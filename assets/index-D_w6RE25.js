var Z$=Object.defineProperty;var Y$=(t,n,a)=>n in t?Z$(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;var W$=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var tM=(t,n,a)=>Y$(t,typeof n!="symbol"?n+"":n,a);var X$=W$((eB,module)=>{function _mergeNamespaces(t,n){for(var a=0;a<n.length;a++){const l=n[a];if(typeof l!="string"&&!Array.isArray(l)){for(const u in l)if(u!=="default"&&!(u in t)){const c=Object.getOwnPropertyDescriptor(l,u);c&&Object.defineProperty(t,u,c.get?c:{enumerable:!0,get:()=>l[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function a(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(u){if(u.ep)return;u.ep=!0;const c=a(u);fetch(u.href,c)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var n=t.default;if(typeof n=="function"){var a=function l(){return this instanceof l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(l){var u=Object.getOwnPropertyDescriptor(t,l);Object.defineProperty(a,l,u.get?u:{enumerable:!0,get:function(){return t[l]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(l,u,c){var p=null;if(c!==void 0&&(p=""+c),u.key!==void 0&&(p=""+u.key),"key"in u){c={};for(var d in u)d!=="key"&&(c[d]=u[d])}else c=u;return u=c.ref,{$$typeof:t,type:l,key:p,ref:u!==void 0?u:null,props:c}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),Ct=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),en=Symbol.iterator;function tn(Tx){return Tx===null||typeof Tx!="object"?null:(Tx=en&&Tx[en]||Tx["@@iterator"],typeof Tx=="function"?Tx:null)}var on={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cn=Object.assign,gn={};function Cn(Tx,Px,Fx){this.props=Tx,this.context=Px,this.refs=gn,this.updater=Fx||on}Cn.prototype.isReactComponent={},Cn.prototype.setState=function(Tx,Px){if(typeof Tx!="object"&&typeof Tx!="function"&&Tx!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Tx,Px,"setState")},Cn.prototype.forceUpdate=function(Tx){this.updater.enqueueForceUpdate(this,Tx,"forceUpdate")};function ex(){}ex.prototype=Cn.prototype;function ix(Tx,Px,Fx){this.props=Tx,this.context=Px,this.refs=gn,this.updater=Fx||on}var ax=ix.prototype=new ex;ax.constructor=ix,cn(ax,Cn.prototype),ax.isPureReactComponent=!0;var ox=Array.isArray,lx={H:null,A:null,T:null,S:null,V:null},cx=Object.prototype.hasOwnProperty;function dx(Tx,Px,Fx,Mx,Dx,Ox){return Fx=Ox.ref,{$$typeof:t,type:Tx,key:Px,ref:Fx!==void 0?Fx:null,props:Ox}}function hx(Tx,Px){return dx(Tx.type,Px,void 0,void 0,void 0,Tx.props)}function fx(Tx){return typeof Tx=="object"&&Tx!==null&&Tx.$$typeof===t}function ux(Tx){var Px={"=":"=0",":":"=2"};return"$"+Tx.replace(/[=:]/g,function(Fx){return Px[Fx]})}var gx=/\/+/g;function yx(Tx,Px){return typeof Tx=="object"&&Tx!==null&&Tx.key!=null?ux(""+Tx.key):Px.toString(36)}function _x(){}function vx(Tx){switch(Tx.status){case"fulfilled":return Tx.value;case"rejected":throw Tx.reason;default:switch(typeof Tx.status=="string"?Tx.then(_x,_x):(Tx.status="pending",Tx.then(function(Px){Tx.status==="pending"&&(Tx.status="fulfilled",Tx.value=Px)},function(Px){Tx.status==="pending"&&(Tx.status="rejected",Tx.reason=Px)})),Tx.status){case"fulfilled":return Tx.value;case"rejected":throw Tx.reason}}throw Tx}function bx(Tx,Px,Fx,Mx,Dx){var Ox=typeof Tx;(Ox==="undefined"||Ox==="boolean")&&(Tx=null);var Lx=!1;if(Tx===null)Lx=!0;else switch(Ox){case"bigint":case"string":case"number":Lx=!0;break;case"object":switch(Tx.$$typeof){case t:case n:Lx=!0;break;case ar:return Lx=Tx._init,bx(Lx(Tx._payload),Px,Fx,Mx,Dx)}}if(Lx)return Dx=Dx(Tx),Lx=Mx===""?"."+yx(Tx,0):Mx,ox(Dx)?(Fx="",Lx!=null&&(Fx=Lx.replace(gx,"$&/")+"/"),bx(Dx,Px,Fx,"",function(Ux){return Ux})):Dx!=null&&(fx(Dx)&&(Dx=hx(Dx,Fx+(Dx.key==null||Tx&&Tx.key===Dx.key?"":(""+Dx.key).replace(gx,"$&/")+"/")+Lx)),Px.push(Dx)),1;Lx=0;var Nx=Mx===""?".":Mx+":";if(ox(Tx))for(var Gx=0;Gx<Tx.length;Gx++)Mx=Tx[Gx],Ox=Nx+yx(Mx,Gx),Lx+=bx(Mx,Px,Fx,Ox,Dx);else if(Gx=tn(Tx),typeof Gx=="function")for(Tx=Gx.call(Tx),Gx=0;!(Mx=Tx.next()).done;)Mx=Mx.value,Ox=Nx+yx(Mx,Gx++),Lx+=bx(Mx,Px,Fx,Ox,Dx);else if(Ox==="object"){if(typeof Tx.then=="function")return bx(vx(Tx),Px,Fx,Mx,Dx);throw Px=String(Tx),Error("Objects are not valid as a React child (found: "+(Px==="[object Object]"?"object with keys {"+Object.keys(Tx).join(", ")+"}":Px)+"). If you meant to render a collection of children, use an array instead.")}return Lx}function xx(Tx,Px,Fx){if(Tx==null)return Tx;var Mx=[],Dx=0;return bx(Tx,Mx,"","",function(Ox){return Px.call(Fx,Ox,Dx++)}),Mx}function Sx(Tx){if(Tx._status===-1){var Px=Tx._result;Px=Px(),Px.then(function(Fx){(Tx._status===0||Tx._status===-1)&&(Tx._status=1,Tx._result=Fx)},function(Fx){(Tx._status===0||Tx._status===-1)&&(Tx._status=2,Tx._result=Fx)}),Tx._status===-1&&(Tx._status=0,Tx._result=Px)}if(Tx._status===1)return Tx._result.default;throw Tx._result}var Ax=typeof reportError=="function"?reportError:function(Tx){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Px=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Tx=="object"&&Tx!==null&&typeof Tx.message=="string"?String(Tx.message):String(Tx),error:Tx});if(!window.dispatchEvent(Px))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Tx);return}console.error(Tx)};function Cx(){}return react_production.Children={map:xx,forEach:function(Tx,Px,Fx){xx(Tx,function(){Px.apply(this,arguments)},Fx)},count:function(Tx){var Px=0;return xx(Tx,function(){Px++}),Px},toArray:function(Tx){return xx(Tx,function(Px){return Px})||[]},only:function(Tx){if(!fx(Tx))throw Error("React.Children.only expected to receive a single React element child.");return Tx}},react_production.Component=Cn,react_production.Fragment=a,react_production.Profiler=u,react_production.PureComponent=ix,react_production.StrictMode=l,react_production.Suspense=Q,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lx,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Tx){return lx.H.useMemoCache(Tx)}},react_production.cache=function(Tx){return function(){return Tx.apply(null,arguments)}},react_production.cloneElement=function(Tx,Px,Fx){if(Tx==null)throw Error("The argument must be a React element, but you passed "+Tx+".");var Mx=cn({},Tx.props),Dx=Tx.key,Ox=void 0;if(Px!=null)for(Lx in Px.ref!==void 0&&(Ox=void 0),Px.key!==void 0&&(Dx=""+Px.key),Px)!cx.call(Px,Lx)||Lx==="key"||Lx==="__self"||Lx==="__source"||Lx==="ref"&&Px.ref===void 0||(Mx[Lx]=Px[Lx]);var Lx=arguments.length-2;if(Lx===1)Mx.children=Fx;else if(1<Lx){for(var Nx=Array(Lx),Gx=0;Gx<Lx;Gx++)Nx[Gx]=arguments[Gx+2];Mx.children=Nx}return dx(Tx.type,Dx,void 0,void 0,Ox,Mx)},react_production.createContext=function(Tx){return Tx={$$typeof:p,_currentValue:Tx,_currentValue2:Tx,_threadCount:0,Provider:null,Consumer:null},Tx.Provider=Tx,Tx.Consumer={$$typeof:c,_context:Tx},Tx},react_production.createElement=function(Tx,Px,Fx){var Mx,Dx={},Ox=null;if(Px!=null)for(Mx in Px.key!==void 0&&(Ox=""+Px.key),Px)cx.call(Px,Mx)&&Mx!=="key"&&Mx!=="__self"&&Mx!=="__source"&&(Dx[Mx]=Px[Mx]);var Lx=arguments.length-2;if(Lx===1)Dx.children=Fx;else if(1<Lx){for(var Nx=Array(Lx),Gx=0;Gx<Lx;Gx++)Nx[Gx]=arguments[Gx+2];Dx.children=Nx}if(Tx&&Tx.defaultProps)for(Mx in Lx=Tx.defaultProps,Lx)Dx[Mx]===void 0&&(Dx[Mx]=Lx[Mx]);return dx(Tx,Ox,void 0,void 0,null,Dx)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Tx){return{$$typeof:d,render:Tx}},react_production.isValidElement=fx,react_production.lazy=function(Tx){return{$$typeof:ar,_payload:{_status:-1,_result:Tx},_init:Sx}},react_production.memo=function(Tx,Px){return{$$typeof:Ct,type:Tx,compare:Px===void 0?null:Px}},react_production.startTransition=function(Tx){var Px=lx.T,Fx={};lx.T=Fx;try{var Mx=Tx(),Dx=lx.S;Dx!==null&&Dx(Fx,Mx),typeof Mx=="object"&&Mx!==null&&typeof Mx.then=="function"&&Mx.then(Cx,Ax)}catch(Ox){Ax(Ox)}finally{lx.T=Px}},react_production.unstable_useCacheRefresh=function(){return lx.H.useCacheRefresh()},react_production.use=function(Tx){return lx.H.use(Tx)},react_production.useActionState=function(Tx,Px,Fx){return lx.H.useActionState(Tx,Px,Fx)},react_production.useCallback=function(Tx,Px){return lx.H.useCallback(Tx,Px)},react_production.useContext=function(Tx){return lx.H.useContext(Tx)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Tx,Px){return lx.H.useDeferredValue(Tx,Px)},react_production.useEffect=function(Tx,Px,Fx){var Mx=lx.H;if(typeof Fx=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Mx.useEffect(Tx,Px)},react_production.useId=function(){return lx.H.useId()},react_production.useImperativeHandle=function(Tx,Px,Fx){return lx.H.useImperativeHandle(Tx,Px,Fx)},react_production.useInsertionEffect=function(Tx,Px){return lx.H.useInsertionEffect(Tx,Px)},react_production.useLayoutEffect=function(Tx,Px){return lx.H.useLayoutEffect(Tx,Px)},react_production.useMemo=function(Tx,Px){return lx.H.useMemo(Tx,Px)},react_production.useOptimistic=function(Tx,Px){return lx.H.useOptimistic(Tx,Px)},react_production.useReducer=function(Tx,Px,Fx){return lx.H.useReducer(Tx,Px,Fx)},react_production.useRef=function(Tx){return lx.H.useRef(Tx)},react_production.useState=function(Tx){return lx.H.useState(Tx)},react_production.useSyncExternalStore=function(Tx,Px,Fx){return lx.H.useSyncExternalStore(Tx,Px,Fx)},react_production.useTransition=function(){return lx.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function n(xx,Sx){var Ax=xx.length;xx.push(Sx);e:for(;0<Ax;){var Cx=Ax-1>>>1,Tx=xx[Cx];if(0<u(Tx,Sx))xx[Cx]=Sx,xx[Ax]=Tx,Ax=Cx;else break e}}function a(xx){return xx.length===0?null:xx[0]}function l(xx){if(xx.length===0)return null;var Sx=xx[0],Ax=xx.pop();if(Ax!==Sx){xx[0]=Ax;e:for(var Cx=0,Tx=xx.length,Px=Tx>>>1;Cx<Px;){var Fx=2*(Cx+1)-1,Mx=xx[Fx],Dx=Fx+1,Ox=xx[Dx];if(0>u(Mx,Ax))Dx<Tx&&0>u(Ox,Mx)?(xx[Cx]=Ox,xx[Dx]=Ax,Cx=Dx):(xx[Cx]=Mx,xx[Fx]=Ax,Cx=Fx);else if(Dx<Tx&&0>u(Ox,Ax))xx[Cx]=Ox,xx[Dx]=Ax,Cx=Dx;else break e}}return Sx}function u(xx,Sx){var Ax=xx.sortIndex-Sx.sortIndex;return Ax!==0?Ax:xx.id-Sx.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var p=Date,d=p.now();t.unstable_now=function(){return p.now()-d}}var Q=[],Ct=[],ar=1,en=null,tn=3,on=!1,cn=!1,gn=!1,Cn=!1,ex=typeof setTimeout=="function"?setTimeout:null,ix=typeof clearTimeout=="function"?clearTimeout:null,ax=typeof setImmediate<"u"?setImmediate:null;function ox(xx){for(var Sx=a(Ct);Sx!==null;){if(Sx.callback===null)l(Ct);else if(Sx.startTime<=xx)l(Ct),Sx.sortIndex=Sx.expirationTime,n(Q,Sx);else break;Sx=a(Ct)}}function lx(xx){if(gn=!1,ox(xx),!cn)if(a(Q)!==null)cn=!0,cx||(cx=!0,yx());else{var Sx=a(Ct);Sx!==null&&bx(lx,Sx.startTime-xx)}}var cx=!1,dx=-1,hx=5,fx=-1;function ux(){return Cn?!0:!(t.unstable_now()-fx<hx)}function gx(){if(Cn=!1,cx){var xx=t.unstable_now();fx=xx;var Sx=!0;try{e:{cn=!1,gn&&(gn=!1,ix(dx),dx=-1),on=!0;var Ax=tn;try{t:{for(ox(xx),en=a(Q);en!==null&&!(en.expirationTime>xx&&ux());){var Cx=en.callback;if(typeof Cx=="function"){en.callback=null,tn=en.priorityLevel;var Tx=Cx(en.expirationTime<=xx);if(xx=t.unstable_now(),typeof Tx=="function"){en.callback=Tx,ox(xx),Sx=!0;break t}en===a(Q)&&l(Q),ox(xx)}else l(Q);en=a(Q)}if(en!==null)Sx=!0;else{var Px=a(Ct);Px!==null&&bx(lx,Px.startTime-xx),Sx=!1}}break e}finally{en=null,tn=Ax,on=!1}Sx=void 0}}finally{Sx?yx():cx=!1}}}var yx;if(typeof ax=="function")yx=function(){ax(gx)};else if(typeof MessageChannel<"u"){var _x=new MessageChannel,vx=_x.port2;_x.port1.onmessage=gx,yx=function(){vx.postMessage(null)}}else yx=function(){ex(gx,0)};function bx(xx,Sx){dx=ex(function(){xx(t.unstable_now())},Sx)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(xx){xx.callback=null},t.unstable_forceFrameRate=function(xx){0>xx||125<xx?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):hx=0<xx?Math.floor(1e3/xx):5},t.unstable_getCurrentPriorityLevel=function(){return tn},t.unstable_next=function(xx){switch(tn){case 1:case 2:case 3:var Sx=3;break;default:Sx=tn}var Ax=tn;tn=Sx;try{return xx()}finally{tn=Ax}},t.unstable_requestPaint=function(){Cn=!0},t.unstable_runWithPriority=function(xx,Sx){switch(xx){case 1:case 2:case 3:case 4:case 5:break;default:xx=3}var Ax=tn;tn=xx;try{return Sx()}finally{tn=Ax}},t.unstable_scheduleCallback=function(xx,Sx,Ax){var Cx=t.unstable_now();switch(typeof Ax=="object"&&Ax!==null?(Ax=Ax.delay,Ax=typeof Ax=="number"&&0<Ax?Cx+Ax:Cx):Ax=Cx,xx){case 1:var Tx=-1;break;case 2:Tx=250;break;case 5:Tx=1073741823;break;case 4:Tx=1e4;break;default:Tx=5e3}return Tx=Ax+Tx,xx={id:ar++,callback:Sx,priorityLevel:xx,startTime:Ax,expirationTime:Tx,sortIndex:-1},Ax>Cx?(xx.sortIndex=Ax,n(Ct,xx),a(Q)===null&&xx===a(Ct)&&(gn?(ix(dx),dx=-1):gn=!0,bx(lx,Ax-Cx))):(xx.sortIndex=Tx,n(Q,xx),cn||on||(cn=!0,cx||(cx=!0,yx()))),xx},t.unstable_shouldYield=ux,t.unstable_wrapCallback=function(xx){var Sx=tn;return function(){var Ax=tn;tn=Sx;try{return xx.apply(this,arguments)}finally{tn=Ax}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function n(Q){var Ct="https://react.dev/errors/"+Q;if(1<arguments.length){Ct+="?args[]="+encodeURIComponent(arguments[1]);for(var ar=2;ar<arguments.length;ar++)Ct+="&args[]="+encodeURIComponent(arguments[ar])}return"Minified React error #"+Q+"; visit "+Ct+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var l={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},u=Symbol.for("react.portal");function c(Q,Ct,ar){var en=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:en==null?null:""+en,children:Q,containerInfo:Ct,implementation:ar}}var p=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(Q,Ct){if(Q==="font")return"";if(typeof Ct=="string")return Ct==="use-credentials"?Ct:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,reactDom_production.createPortal=function(Q,Ct){var ar=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ct||Ct.nodeType!==1&&Ct.nodeType!==9&&Ct.nodeType!==11)throw Error(n(299));return c(Q,Ct,null,ar)},reactDom_production.flushSync=function(Q){var Ct=p.T,ar=l.p;try{if(p.T=null,l.p=2,Q)return Q()}finally{p.T=Ct,l.p=ar,l.d.f()}},reactDom_production.preconnect=function(Q,Ct){typeof Q=="string"&&(Ct?(Ct=Ct.crossOrigin,Ct=typeof Ct=="string"?Ct==="use-credentials"?Ct:"":void 0):Ct=null,l.d.C(Q,Ct))},reactDom_production.prefetchDNS=function(Q){typeof Q=="string"&&l.d.D(Q)},reactDom_production.preinit=function(Q,Ct){if(typeof Q=="string"&&Ct&&typeof Ct.as=="string"){var ar=Ct.as,en=d(ar,Ct.crossOrigin),tn=typeof Ct.integrity=="string"?Ct.integrity:void 0,on=typeof Ct.fetchPriority=="string"?Ct.fetchPriority:void 0;ar==="style"?l.d.S(Q,typeof Ct.precedence=="string"?Ct.precedence:void 0,{crossOrigin:en,integrity:tn,fetchPriority:on}):ar==="script"&&l.d.X(Q,{crossOrigin:en,integrity:tn,fetchPriority:on,nonce:typeof Ct.nonce=="string"?Ct.nonce:void 0})}},reactDom_production.preinitModule=function(Q,Ct){if(typeof Q=="string")if(typeof Ct=="object"&&Ct!==null){if(Ct.as==null||Ct.as==="script"){var ar=d(Ct.as,Ct.crossOrigin);l.d.M(Q,{crossOrigin:ar,integrity:typeof Ct.integrity=="string"?Ct.integrity:void 0,nonce:typeof Ct.nonce=="string"?Ct.nonce:void 0})}}else Ct==null&&l.d.M(Q)},reactDom_production.preload=function(Q,Ct){if(typeof Q=="string"&&typeof Ct=="object"&&Ct!==null&&typeof Ct.as=="string"){var ar=Ct.as,en=d(ar,Ct.crossOrigin);l.d.L(Q,ar,{crossOrigin:en,integrity:typeof Ct.integrity=="string"?Ct.integrity:void 0,nonce:typeof Ct.nonce=="string"?Ct.nonce:void 0,type:typeof Ct.type=="string"?Ct.type:void 0,fetchPriority:typeof Ct.fetchPriority=="string"?Ct.fetchPriority:void 0,referrerPolicy:typeof Ct.referrerPolicy=="string"?Ct.referrerPolicy:void 0,imageSrcSet:typeof Ct.imageSrcSet=="string"?Ct.imageSrcSet:void 0,imageSizes:typeof Ct.imageSizes=="string"?Ct.imageSizes:void 0,media:typeof Ct.media=="string"?Ct.media:void 0})}},reactDom_production.preloadModule=function(Q,Ct){if(typeof Q=="string")if(Ct){var ar=d(Ct.as,Ct.crossOrigin);l.d.m(Q,{as:typeof Ct.as=="string"&&Ct.as!=="script"?Ct.as:void 0,crossOrigin:ar,integrity:typeof Ct.integrity=="string"?Ct.integrity:void 0})}else l.d.m(Q)},reactDom_production.requestFormReset=function(Q){l.d.r(Q)},reactDom_production.unstable_batchedUpdates=function(Q,Ct){return Q(Ct)},reactDom_production.useFormState=function(Q,Ct,ar){return p.H.useFormState(Q,Ct,ar)},reactDom_production.useFormStatus=function(){return p.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),n=requireReact(),a=requireReactDom();function l(dn){var In="https://react.dev/errors/"+dn;if(1<arguments.length){In+="?args[]="+encodeURIComponent(arguments[1]);for(var sx=2;sx<arguments.length;sx++)In+="&args[]="+encodeURIComponent(arguments[sx])}return"Minified React error #"+dn+"; visit "+In+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(dn){return!(!dn||dn.nodeType!==1&&dn.nodeType!==9&&dn.nodeType!==11)}function c(dn){var In=dn,sx=dn;if(dn.alternate)for(;In.return;)In=In.return;else{dn=In;do In=dn,(In.flags&4098)!==0&&(sx=In.return),dn=In.return;while(dn)}return In.tag===3?sx:null}function p(dn){if(dn.tag===13){var In=dn.memoizedState;if(In===null&&(dn=dn.alternate,dn!==null&&(In=dn.memoizedState)),In!==null)return In.dehydrated}return null}function d(dn){if(c(dn)!==dn)throw Error(l(188))}function Q(dn){var In=dn.alternate;if(!In){if(In=c(dn),In===null)throw Error(l(188));return In!==dn?null:dn}for(var sx=dn,px=In;;){var mx=sx.return;if(mx===null)break;var Ex=mx.alternate;if(Ex===null){if(px=mx.return,px!==null){sx=px;continue}break}if(mx.child===Ex.child){for(Ex=mx.child;Ex;){if(Ex===sx)return d(mx),dn;if(Ex===px)return d(mx),In;Ex=Ex.sibling}throw Error(l(188))}if(sx.return!==px.return)sx=mx,px=Ex;else{for(var Rx=!1,qx=mx.child;qx;){if(qx===sx){Rx=!0,sx=mx,px=Ex;break}if(qx===px){Rx=!0,px=mx,sx=Ex;break}qx=qx.sibling}if(!Rx){for(qx=Ex.child;qx;){if(qx===sx){Rx=!0,sx=Ex,px=mx;break}if(qx===px){Rx=!0,px=Ex,sx=mx;break}qx=qx.sibling}if(!Rx)throw Error(l(189))}}if(sx.alternate!==px)throw Error(l(190))}if(sx.tag!==3)throw Error(l(188));return sx.stateNode.current===sx?dn:In}function Ct(dn){var In=dn.tag;if(In===5||In===26||In===27||In===6)return dn;for(dn=dn.child;dn!==null;){if(In=Ct(dn),In!==null)return In;dn=dn.sibling}return null}var ar=Object.assign,en=Symbol.for("react.element"),tn=Symbol.for("react.transitional.element"),on=Symbol.for("react.portal"),cn=Symbol.for("react.fragment"),gn=Symbol.for("react.strict_mode"),Cn=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),ix=Symbol.for("react.consumer"),ax=Symbol.for("react.context"),ox=Symbol.for("react.forward_ref"),lx=Symbol.for("react.suspense"),cx=Symbol.for("react.suspense_list"),dx=Symbol.for("react.memo"),hx=Symbol.for("react.lazy"),fx=Symbol.for("react.activity"),ux=Symbol.for("react.memo_cache_sentinel"),gx=Symbol.iterator;function yx(dn){return dn===null||typeof dn!="object"?null:(dn=gx&&dn[gx]||dn["@@iterator"],typeof dn=="function"?dn:null)}var _x=Symbol.for("react.client.reference");function vx(dn){if(dn==null)return null;if(typeof dn=="function")return dn.$$typeof===_x?null:dn.displayName||dn.name||null;if(typeof dn=="string")return dn;switch(dn){case cn:return"Fragment";case Cn:return"Profiler";case gn:return"StrictMode";case lx:return"Suspense";case cx:return"SuspenseList";case fx:return"Activity"}if(typeof dn=="object")switch(dn.$$typeof){case on:return"Portal";case ax:return(dn.displayName||"Context")+".Provider";case ix:return(dn._context.displayName||"Context")+".Consumer";case ox:var In=dn.render;return dn=dn.displayName,dn||(dn=In.displayName||In.name||"",dn=dn!==""?"ForwardRef("+dn+")":"ForwardRef"),dn;case dx:return In=dn.displayName||null,In!==null?In:vx(dn.type)||"Memo";case hx:In=dn._payload,dn=dn._init;try{return vx(dn(In))}catch{}}return null}var bx=Array.isArray,xx=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Sx=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ax={pending:!1,data:null,method:null,action:null},Cx=[],Tx=-1;function Px(dn){return{current:dn}}function Fx(dn){0>Tx||(dn.current=Cx[Tx],Cx[Tx]=null,Tx--)}function Mx(dn,In){Tx++,Cx[Tx]=dn.current,dn.current=In}var Dx=Px(null),Ox=Px(null),Lx=Px(null),Nx=Px(null);function Gx(dn,In){switch(Mx(Lx,In),Mx(Ox,dn),Mx(Dx,null),In.nodeType){case 9:case 11:dn=(dn=In.documentElement)&&(dn=dn.namespaceURI)?yN(dn):0;break;default:if(dn=In.tagName,In=In.namespaceURI)In=yN(In),dn=xN(In,dn);else switch(dn){case"svg":dn=1;break;case"math":dn=2;break;default:dn=0}}Fx(Dx),Mx(Dx,dn)}function Ux(){Fx(Dx),Fx(Ox),Fx(Lx)}function Hx(dn){dn.memoizedState!==null&&Mx(Nx,dn);var In=Dx.current,sx=xN(In,dn.type);In!==sx&&(Mx(Ox,dn),Mx(Dx,sx))}function Vx(dn){Ox.current===dn&&(Fx(Dx),Fx(Ox)),Nx.current===dn&&(Fx(Nx),XC._currentValue=Ax)}var zx=Object.prototype.hasOwnProperty,rE=t.unstable_scheduleCallback,Zx=t.unstable_cancelCallback,eE=t.unstable_shouldYield,oE=t.unstable_requestPaint,iE=t.unstable_now,Wx=t.unstable_getCurrentPriorityLevel,AE=t.unstable_ImmediatePriority,ME=t.unstable_UserBlockingPriority,EE=t.unstable_NormalPriority,bE=t.unstable_LowPriority,kE=t.unstable_IdlePriority,TE=t.log,jE=t.unstable_setDisableYieldValue,Ix=null,Bx=null;function Yx(dn){if(typeof TE=="function"&&jE(dn),Bx&&typeof Bx.setStrictMode=="function")try{Bx.setStrictMode(Ix,dn)}catch{}}var Qx=Math.clz32?Math.clz32:dE,nE=Math.log,Kx=Math.LN2;function dE(dn){return dn>>>=0,dn===0?32:31-(nE(dn)/Kx|0)|0}var cE=256,mE=4194304;function xE(dn){var In=dn&42;if(In!==0)return In;switch(dn&-dn){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return dn&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return dn&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return dn}}function OE(dn,In,sx){var px=dn.pendingLanes;if(px===0)return 0;var mx=0,Ex=dn.suspendedLanes,Rx=dn.pingedLanes;dn=dn.warmLanes;var qx=px&134217727;return qx!==0?(px=qx&~Ex,px!==0?mx=xE(px):(Rx&=qx,Rx!==0?mx=xE(Rx):sx||(sx=qx&~dn,sx!==0&&(mx=xE(sx))))):(qx=px&~Ex,qx!==0?mx=xE(qx):Rx!==0?mx=xE(Rx):sx||(sx=px&~dn,sx!==0&&(mx=xE(sx)))),mx===0?0:In!==0&&In!==mx&&(In&Ex)===0&&(Ex=mx&-mx,sx=In&-In,Ex>=sx||Ex===32&&(sx&4194048)!==0)?In:mx}function PE(dn,In){return(dn.pendingLanes&~(dn.suspendedLanes&~dn.pingedLanes)&In)===0}function sE(dn,In){switch(dn){case 1:case 2:case 4:case 8:case 64:return In+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return In+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hE(){var dn=cE;return cE<<=1,(cE&4194048)===0&&(cE=256),dn}function wE(){var dn=mE;return mE<<=1,(mE&62914560)===0&&(mE=4194304),dn}function vE(dn){for(var In=[],sx=0;31>sx;sx++)In.push(dn);return In}function RE(dn,In){dn.pendingLanes|=In,In!==268435456&&(dn.suspendedLanes=0,dn.pingedLanes=0,dn.warmLanes=0)}function IE(dn,In,sx,px,mx,Ex){var Rx=dn.pendingLanes;dn.pendingLanes=sx,dn.suspendedLanes=0,dn.pingedLanes=0,dn.warmLanes=0,dn.expiredLanes&=sx,dn.entangledLanes&=sx,dn.errorRecoveryDisabledLanes&=sx,dn.shellSuspendCounter=0;var qx=dn.entanglements,Xx=dn.expirationTimes,uE=dn.hiddenUpdates;for(sx=Rx&~sx;0<sx;){var yE=31-Qx(sx),SE=1<<yE;qx[yE]=0,Xx[yE]=-1;var fE=uE[yE];if(fE!==null)for(uE[yE]=null,yE=0;yE<fE.length;yE++){var pE=fE[yE];pE!==null&&(pE.lane&=-536870913)}sx&=~SE}px!==0&&$x(dn,px,0),Ex!==0&&mx===0&&dn.tag!==0&&(dn.suspendedLanes|=Ex&~(Rx&~In))}function $x(dn,In,sx){dn.pendingLanes|=In,dn.suspendedLanes&=~In;var px=31-Qx(In);dn.entangledLanes|=In,dn.entanglements[px]=dn.entanglements[px]|1073741824|sx&4194090}function kx(dn,In){var sx=dn.entangledLanes|=In;for(dn=dn.entanglements;sx;){var px=31-Qx(sx),mx=1<<px;mx&In|dn[px]&In&&(dn[px]|=In),sx&=~mx}}function jx(dn){switch(dn){case 2:dn=1;break;case 8:dn=4;break;case 32:dn=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:dn=128;break;case 268435456:dn=134217728;break;default:dn=0}return dn}function Jx(dn){return dn&=-dn,2<dn?8<dn?(dn&134217727)!==0?32:268435456:8:2}function gE(){var dn=Sx.p;return dn!==0?dn:(dn=window.event,dn===void 0?32:kN(dn.type))}function DE(dn,In){var sx=Sx.p;try{return Sx.p=dn,In()}finally{Sx.p=sx}}var LE=Math.random().toString(36).slice(2),NE="__reactFiber$"+LE,$E="__reactProps$"+LE,HE="__reactContainer$"+LE,QE="__reactEvents$"+LE,ZE="__reactListeners$"+LE,TS="__reactHandles$"+LE,PS="__reactResources$"+LE,pS="__reactMarker$"+LE;function FS(dn){delete dn[NE],delete dn[$E],delete dn[QE],delete dn[ZE],delete dn[TS]}function NS(dn){var In=dn[NE];if(In)return In;for(var sx=dn.parentNode;sx;){if(In=sx[HE]||sx[NE]){if(sx=In.alternate,In.child!==null||sx!==null&&sx.child!==null)for(dn=SN(dn);dn!==null;){if(sx=dn[NE])return sx;dn=SN(dn)}return In}dn=sx,sx=dn.parentNode}return null}function GS(dn){if(dn=dn[NE]||dn[HE]){var In=dn.tag;if(In===5||In===6||In===13||In===26||In===27||In===3)return dn}return null}function UE(dn){var In=dn.tag;if(In===5||In===26||In===27||In===6)return dn.stateNode;throw Error(l(33))}function CE(dn){var In=dn[PS];return In||(In=dn[PS]={hoistableStyles:new Map,hoistableScripts:new Map}),In}function qE(dn){dn[pS]=!0}var xS=new Set,dS={};function iS(dn,In){eS(dn,In),eS(dn+"Capture",In)}function eS(dn,In){for(dS[dn]=In,dn=0;dn<In.length;dn++)xS.add(In[dn])}var rS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),HS={},mS={};function US(dn){return zx.call(mS,dn)?!0:zx.call(HS,dn)?!1:rS.test(dn)?mS[dn]=!0:(HS[dn]=!0,!1)}function LS(dn,In,sx){if(US(In))if(sx===null)dn.removeAttribute(In);else{switch(typeof sx){case"undefined":case"function":case"symbol":dn.removeAttribute(In);return;case"boolean":var px=In.toLowerCase().slice(0,5);if(px!=="data-"&&px!=="aria-"){dn.removeAttribute(In);return}}dn.setAttribute(In,""+sx)}}function hT(dn,In,sx){if(sx===null)dn.removeAttribute(In);else{switch(typeof sx){case"undefined":case"function":case"symbol":case"boolean":dn.removeAttribute(In);return}dn.setAttribute(In,""+sx)}}function bS(dn,In,sx,px){if(px===null)dn.removeAttribute(sx);else{switch(typeof px){case"undefined":case"function":case"symbol":case"boolean":dn.removeAttribute(sx);return}dn.setAttributeNS(In,sx,""+px)}}var aT,rM;function KS(dn){if(aT===void 0)try{throw Error()}catch(sx){var In=sx.stack.trim().match(/\n( *(at )?)/);aT=In&&In[1]||"",rM=-1<sx.stack.indexOf(`
    at`)?" (<anonymous>)":-1<sx.stack.indexOf("@")?"@unknown:0:0":""}return`
`+aT+dn+rM}var jS=!1;function gT(dn,In){if(!dn||jS)return"";jS=!0;var sx=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var px={DetermineComponentFrameRoot:function(){try{if(In){var SE=function(){throw Error()};if(Object.defineProperty(SE.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(SE,[])}catch(pE){var fE=pE}Reflect.construct(dn,[],SE)}else{try{SE.call()}catch(pE){fE=pE}dn.call(SE.prototype)}}else{try{throw Error()}catch(pE){fE=pE}(SE=dn())&&typeof SE.catch=="function"&&SE.catch(function(){})}}catch(pE){if(pE&&fE&&typeof pE.stack=="string")return[pE.stack,fE.stack]}return[null,null]}};px.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var mx=Object.getOwnPropertyDescriptor(px.DetermineComponentFrameRoot,"name");mx&&mx.configurable&&Object.defineProperty(px.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ex=px.DetermineComponentFrameRoot(),Rx=Ex[0],qx=Ex[1];if(Rx&&qx){var Xx=Rx.split(`
`),uE=qx.split(`
`);for(mx=px=0;px<Xx.length&&!Xx[px].includes("DetermineComponentFrameRoot");)px++;for(;mx<uE.length&&!uE[mx].includes("DetermineComponentFrameRoot");)mx++;if(px===Xx.length||mx===uE.length)for(px=Xx.length-1,mx=uE.length-1;1<=px&&0<=mx&&Xx[px]!==uE[mx];)mx--;for(;1<=px&&0<=mx;px--,mx--)if(Xx[px]!==uE[mx]){if(px!==1||mx!==1)do if(px--,mx--,0>mx||Xx[px]!==uE[mx]){var yE=`
`+Xx[px].replace(" at new "," at ");return dn.displayName&&yE.includes("<anonymous>")&&(yE=yE.replace("<anonymous>",dn.displayName)),yE}while(1<=px&&0<=mx);break}}}finally{jS=!1,Error.prepareStackTrace=sx}return(sx=dn?dn.displayName||dn.name:"")?KS(sx):""}function wT(dn){switch(dn.tag){case 26:case 27:case 5:return KS(dn.type);case 16:return KS("Lazy");case 13:return KS("Suspense");case 19:return KS("SuspenseList");case 0:case 15:return gT(dn.type,!1);case 11:return gT(dn.type.render,!1);case 1:return gT(dn.type,!0);case 31:return KS("Activity");default:return""}}function sA(dn){try{var In="";do In+=wT(dn),dn=dn.return;while(dn);return In}catch(sx){return`
Error generating stack: `+sx.message+`
`+sx.stack}}function zS(dn){switch(typeof dn){case"bigint":case"boolean":case"number":case"string":case"undefined":return dn;case"object":return dn;default:return""}}function lA(dn){var In=dn.type;return(dn=dn.nodeName)&&dn.toLowerCase()==="input"&&(In==="checkbox"||In==="radio")}function oC(dn){var In=lA(dn)?"checked":"value",sx=Object.getOwnPropertyDescriptor(dn.constructor.prototype,In),px=""+dn[In];if(!dn.hasOwnProperty(In)&&typeof sx<"u"&&typeof sx.get=="function"&&typeof sx.set=="function"){var mx=sx.get,Ex=sx.set;return Object.defineProperty(dn,In,{configurable:!0,get:function(){return mx.call(this)},set:function(Rx){px=""+Rx,Ex.call(this,Rx)}}),Object.defineProperty(dn,In,{enumerable:sx.enumerable}),{getValue:function(){return px},setValue:function(Rx){px=""+Rx},stopTracking:function(){dn._valueTracker=null,delete dn[In]}}}}function TA(dn){dn._valueTracker||(dn._valueTracker=oC(dn))}function nM(dn){if(!dn)return!1;var In=dn._valueTracker;if(!In)return!0;var sx=In.getValue(),px="";return dn&&(px=lA(dn)?dn.checked?"true":"false":dn.value),dn=px,dn!==sx?(In.setValue(dn),!0):!1}function AA(dn){if(dn=dn||(typeof document<"u"?document:void 0),typeof dn>"u")return null;try{return dn.activeElement||dn.body}catch{return dn.body}}var sC=/[\n"\\]/g;function oT(dn){return dn.replace(sC,function(In){return"\\"+In.charCodeAt(0).toString(16)+" "})}function cR(dn,In,sx,px,mx,Ex,Rx,qx){dn.name="",Rx!=null&&typeof Rx!="function"&&typeof Rx!="symbol"&&typeof Rx!="boolean"?dn.type=Rx:dn.removeAttribute("type"),In!=null?Rx==="number"?(In===0&&dn.value===""||dn.value!=In)&&(dn.value=""+zS(In)):dn.value!==""+zS(In)&&(dn.value=""+zS(In)):Rx!=="submit"&&Rx!=="reset"||dn.removeAttribute("value"),In!=null?fR(dn,Rx,zS(In)):sx!=null?fR(dn,Rx,zS(sx)):px!=null&&dn.removeAttribute("value"),mx==null&&Ex!=null&&(dn.defaultChecked=!!Ex),mx!=null&&(dn.checked=mx&&typeof mx!="function"&&typeof mx!="symbol"),qx!=null&&typeof qx!="function"&&typeof qx!="symbol"&&typeof qx!="boolean"?dn.name=""+zS(qx):dn.removeAttribute("name")}function lC(dn,In,sx,px,mx,Ex,Rx,qx){if(Ex!=null&&typeof Ex!="function"&&typeof Ex!="symbol"&&typeof Ex!="boolean"&&(dn.type=Ex),In!=null||sx!=null){if(!(Ex!=="submit"&&Ex!=="reset"||In!=null))return;sx=sx!=null?""+zS(sx):"",In=In!=null?""+zS(In):sx,qx||In===dn.value||(dn.value=In),dn.defaultValue=In}px=px??mx,px=typeof px!="function"&&typeof px!="symbol"&&!!px,dn.checked=qx?dn.checked:!!px,dn.defaultChecked=!!px,Rx!=null&&typeof Rx!="function"&&typeof Rx!="symbol"&&typeof Rx!="boolean"&&(dn.name=Rx)}function fR(dn,In,sx){In==="number"&&AA(dn.ownerDocument)===dn||dn.defaultValue===""+sx||(dn.defaultValue=""+sx)}function CA(dn,In,sx,px){if(dn=dn.options,In){In={};for(var mx=0;mx<sx.length;mx++)In["$"+sx[mx]]=!0;for(sx=0;sx<dn.length;sx++)mx=In.hasOwnProperty("$"+dn[sx].value),dn[sx].selected!==mx&&(dn[sx].selected=mx),mx&&px&&(dn[sx].defaultSelected=!0)}else{for(sx=""+zS(sx),In=null,mx=0;mx<dn.length;mx++){if(dn[mx].value===sx){dn[mx].selected=!0,px&&(dn[mx].defaultSelected=!0);return}In!==null||dn[mx].disabled||(In=dn[mx])}In!==null&&(In.selected=!0)}}function gD(dn,In,sx){if(In!=null&&(In=""+zS(In),In!==dn.value&&(dn.value=In),sx==null)){dn.defaultValue!==In&&(dn.defaultValue=In);return}dn.defaultValue=sx!=null?""+zS(sx):""}function mD(dn,In,sx,px){if(In==null){if(px!=null){if(sx!=null)throw Error(l(92));if(bx(px)){if(1<px.length)throw Error(l(93));px=px[0]}sx=px}sx==null&&(sx=""),In=sx}sx=zS(In),dn.defaultValue=sx,px=dn.textContent,px===sx&&px!==""&&px!==null&&(dn.value=px)}function MA(dn,In){if(In){var sx=dn.firstChild;if(sx&&sx===dn.lastChild&&sx.nodeType===3){sx.nodeValue=In;return}}dn.textContent=In}var VN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vD(dn,In,sx){var px=In.indexOf("--")===0;sx==null||typeof sx=="boolean"||sx===""?px?dn.setProperty(In,""):In==="float"?dn.cssFloat="":dn[In]="":px?dn.setProperty(In,sx):typeof sx!="number"||sx===0||VN.has(In)?In==="float"?dn.cssFloat=sx:dn[In]=(""+sx).trim():dn[In]=sx+"px"}function yD(dn,In,sx){if(In!=null&&typeof In!="object")throw Error(l(62));if(dn=dn.style,sx!=null){for(var px in sx)!sx.hasOwnProperty(px)||In!=null&&In.hasOwnProperty(px)||(px.indexOf("--")===0?dn.setProperty(px,""):px==="float"?dn.cssFloat="":dn[px]="");for(var mx in In)px=In[mx],In.hasOwnProperty(mx)&&sx[mx]!==px&&vD(dn,mx,px)}else for(var Ex in In)In.hasOwnProperty(Ex)&&vD(dn,Ex,In[Ex])}function pR(dn){if(dn.indexOf("-")===-1)return!1;switch(dn){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iM(dn){return jN.test(""+dn)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":dn}var dR=null;function hR(dn){return dn=dn.target||dn.srcElement||window,dn.correspondingUseElement&&(dn=dn.correspondingUseElement),dn.nodeType===3?dn.parentNode:dn}var RA=null,IA=null;function xD(dn){var In=GS(dn);if(In&&(dn=In.stateNode)){var sx=dn[$E]||null;e:switch(dn=In.stateNode,In.type){case"input":if(cR(dn,sx.value,sx.defaultValue,sx.defaultValue,sx.checked,sx.defaultChecked,sx.type,sx.name),In=sx.name,sx.type==="radio"&&In!=null){for(sx=dn;sx.parentNode;)sx=sx.parentNode;for(sx=sx.querySelectorAll('input[name="'+oT(""+In)+'"][type="radio"]'),In=0;In<sx.length;In++){var px=sx[In];if(px!==dn&&px.form===dn.form){var mx=px[$E]||null;if(!mx)throw Error(l(90));cR(px,mx.value,mx.defaultValue,mx.defaultValue,mx.checked,mx.defaultChecked,mx.type,mx.name)}}for(In=0;In<sx.length;In++)px=sx[In],px.form===dn.form&&nM(px)}break e;case"textarea":gD(dn,sx.value,sx.defaultValue);break e;case"select":In=sx.value,In!=null&&CA(dn,!!sx.multiple,In,!1)}}}var gR=!1;function _D(dn,In,sx){if(gR)return dn(In,sx);gR=!0;try{var px=dn(In);return px}finally{if(gR=!1,(RA!==null||IA!==null)&&(zM(),RA&&(In=RA,dn=IA,IA=RA=null,xD(In),dn)))for(In=0;In<dn.length;In++)xD(dn[In])}}function uC(dn,In){var sx=dn.stateNode;if(sx===null)return null;var px=sx[$E]||null;if(px===null)return null;sx=px[In];e:switch(In){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(px=!px.disabled)||(dn=dn.type,px=!(dn==="button"||dn==="input"||dn==="select"||dn==="textarea")),dn=!px;break e;default:dn=!1}if(dn)return null;if(sx&&typeof sx!="function")throw Error(l(231,In,typeof sx));return sx}var TT=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mR=!1;if(TT)try{var cC={};Object.defineProperty(cC,"passive",{get:function(){mR=!0}}),window.addEventListener("test",cC,cC),window.removeEventListener("test",cC,cC)}catch{mR=!1}var FT=null,vR=null,aM=null;function ED(){if(aM)return aM;var dn,In=vR,sx=In.length,px,mx="value"in FT?FT.value:FT.textContent,Ex=mx.length;for(dn=0;dn<sx&&In[dn]===mx[dn];dn++);var Rx=sx-dn;for(px=1;px<=Rx&&In[sx-px]===mx[Ex-px];px++);return aM=mx.slice(dn,1<px?1-px:void 0)}function oM(dn){var In=dn.keyCode;return"charCode"in dn?(dn=dn.charCode,dn===0&&In===13&&(dn=13)):dn=In,dn===10&&(dn=13),32<=dn||dn===13?dn:0}function sM(){return!0}function bD(){return!1}function ZS(dn){function In(sx,px,mx,Ex,Rx){this._reactName=sx,this._targetInst=mx,this.type=px,this.nativeEvent=Ex,this.target=Rx,this.currentTarget=null;for(var qx in dn)dn.hasOwnProperty(qx)&&(sx=dn[qx],this[qx]=sx?sx(Ex):Ex[qx]);return this.isDefaultPrevented=(Ex.defaultPrevented!=null?Ex.defaultPrevented:Ex.returnValue===!1)?sM:bD,this.isPropagationStopped=bD,this}return ar(In.prototype,{preventDefault:function(){this.defaultPrevented=!0;var sx=this.nativeEvent;sx&&(sx.preventDefault?sx.preventDefault():typeof sx.returnValue!="unknown"&&(sx.returnValue=!1),this.isDefaultPrevented=sM)},stopPropagation:function(){var sx=this.nativeEvent;sx&&(sx.stopPropagation?sx.stopPropagation():typeof sx.cancelBubble!="unknown"&&(sx.cancelBubble=!0),this.isPropagationStopped=sM)},persist:function(){},isPersistent:sM}),In}var uA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(dn){return dn.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lM=ZS(uA),fC=ar({},uA,{view:0,detail:0}),ZN=ZS(fC),yR,xR,pC,uM=ar({},fC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ER,button:0,buttons:0,relatedTarget:function(dn){return dn.relatedTarget===void 0?dn.fromElement===dn.srcElement?dn.toElement:dn.fromElement:dn.relatedTarget},movementX:function(dn){return"movementX"in dn?dn.movementX:(dn!==pC&&(pC&&dn.type==="mousemove"?(yR=dn.screenX-pC.screenX,xR=dn.screenY-pC.screenY):xR=yR=0,pC=dn),yR)},movementY:function(dn){return"movementY"in dn?dn.movementY:xR}}),SD=ZS(uM),YN=ar({},uM,{dataTransfer:0}),WN=ZS(YN),XN=ar({},fC,{relatedTarget:0}),_R=ZS(XN),KN=ar({},uA,{animationName:0,elapsedTime:0,pseudoElement:0}),QN=ZS(KN),JN=ar({},uA,{clipboardData:function(dn){return"clipboardData"in dn?dn.clipboardData:window.clipboardData}}),eL=ZS(JN),tL=ar({},uA,{data:0}),wD=ZS(tL),rL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aL(dn){var In=this.nativeEvent;return In.getModifierState?In.getModifierState(dn):(dn=iL[dn])?!!In[dn]:!1}function ER(){return aL}var oL=ar({},fC,{key:function(dn){if(dn.key){var In=rL[dn.key]||dn.key;if(In!=="Unidentified")return In}return dn.type==="keypress"?(dn=oM(dn),dn===13?"Enter":String.fromCharCode(dn)):dn.type==="keydown"||dn.type==="keyup"?nL[dn.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ER,charCode:function(dn){return dn.type==="keypress"?oM(dn):0},keyCode:function(dn){return dn.type==="keydown"||dn.type==="keyup"?dn.keyCode:0},which:function(dn){return dn.type==="keypress"?oM(dn):dn.type==="keydown"||dn.type==="keyup"?dn.keyCode:0}}),sL=ZS(oL),lL=ar({},uM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TD=ZS(lL),uL=ar({},fC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ER}),cL=ZS(uL),fL=ar({},uA,{propertyName:0,elapsedTime:0,pseudoElement:0}),pL=ZS(fL),dL=ar({},uM,{deltaX:function(dn){return"deltaX"in dn?dn.deltaX:"wheelDeltaX"in dn?-dn.wheelDeltaX:0},deltaY:function(dn){return"deltaY"in dn?dn.deltaY:"wheelDeltaY"in dn?-dn.wheelDeltaY:"wheelDelta"in dn?-dn.wheelDelta:0},deltaZ:0,deltaMode:0}),hL=ZS(dL),gL=ar({},uA,{newState:0,oldState:0}),mL=ZS(gL),vL=[9,13,27,32],bR=TT&&"CompositionEvent"in window,dC=null;TT&&"documentMode"in document&&(dC=document.documentMode);var yL=TT&&"TextEvent"in window&&!dC,AD=TT&&(!bR||dC&&8<dC&&11>=dC),CD=" ",MD=!1;function RD(dn,In){switch(dn){case"keyup":return vL.indexOf(In.keyCode)!==-1;case"keydown":return In.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ID(dn){return dn=dn.detail,typeof dn=="object"&&"data"in dn?dn.data:null}var DA=!1;function xL(dn,In){switch(dn){case"compositionend":return ID(In);case"keypress":return In.which!==32?null:(MD=!0,CD);case"textInput":return dn=In.data,dn===CD&&MD?null:dn;default:return null}}function _L(dn,In){if(DA)return dn==="compositionend"||!bR&&RD(dn,In)?(dn=ED(),aM=vR=FT=null,DA=!1,dn):null;switch(dn){case"paste":return null;case"keypress":if(!(In.ctrlKey||In.altKey||In.metaKey)||In.ctrlKey&&In.altKey){if(In.char&&1<In.char.length)return In.char;if(In.which)return String.fromCharCode(In.which)}return null;case"compositionend":return AD&&In.locale!=="ko"?null:In.data;default:return null}}var EL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DD(dn){var In=dn&&dn.nodeName&&dn.nodeName.toLowerCase();return In==="input"?!!EL[dn.type]:In==="textarea"}function OD(dn,In,sx,px){RA?IA?IA.push(px):IA=[px]:RA=px,In=WM(In,"onChange"),0<In.length&&(sx=new lM("onChange","change",null,sx,px),dn.push({event:sx,listeners:In}))}var hC=null,gC=null;function bL(dn){dN(dn,0)}function cM(dn){var In=UE(dn);if(nM(In))return dn}function PD(dn,In){if(dn==="change")return In}var ND=!1;if(TT){var SR;if(TT){var wR="oninput"in document;if(!wR){var LD=document.createElement("div");LD.setAttribute("oninput","return;"),wR=typeof LD.oninput=="function"}SR=wR}else SR=!1;ND=SR&&(!document.documentMode||9<document.documentMode)}function $D(){hC&&(hC.detachEvent("onpropertychange",BD),gC=hC=null)}function BD(dn){if(dn.propertyName==="value"&&cM(gC)){var In=[];OD(In,gC,dn,hR(dn)),_D(bL,In)}}function SL(dn,In,sx){dn==="focusin"?($D(),hC=In,gC=sx,hC.attachEvent("onpropertychange",BD)):dn==="focusout"&&$D()}function wL(dn){if(dn==="selectionchange"||dn==="keyup"||dn==="keydown")return cM(gC)}function TL(dn,In){if(dn==="click")return cM(In)}function AL(dn,In){if(dn==="input"||dn==="change")return cM(In)}function CL(dn,In){return dn===In&&(dn!==0||1/dn===1/In)||dn!==dn&&In!==In}var QS=typeof Object.is=="function"?Object.is:CL;function mC(dn,In){if(QS(dn,In))return!0;if(typeof dn!="object"||dn===null||typeof In!="object"||In===null)return!1;var sx=Object.keys(dn),px=Object.keys(In);if(sx.length!==px.length)return!1;for(px=0;px<sx.length;px++){var mx=sx[px];if(!zx.call(In,mx)||!QS(dn[mx],In[mx]))return!1}return!0}function kD(dn){for(;dn&&dn.firstChild;)dn=dn.firstChild;return dn}function FD(dn,In){var sx=kD(dn);dn=0;for(var px;sx;){if(sx.nodeType===3){if(px=dn+sx.textContent.length,dn<=In&&px>=In)return{node:sx,offset:In-dn};dn=px}e:{for(;sx;){if(sx.nextSibling){sx=sx.nextSibling;break e}sx=sx.parentNode}sx=void 0}sx=kD(sx)}}function UD(dn,In){return dn&&In?dn===In?!0:dn&&dn.nodeType===3?!1:In&&In.nodeType===3?UD(dn,In.parentNode):"contains"in dn?dn.contains(In):dn.compareDocumentPosition?!!(dn.compareDocumentPosition(In)&16):!1:!1}function qD(dn){dn=dn!=null&&dn.ownerDocument!=null&&dn.ownerDocument.defaultView!=null?dn.ownerDocument.defaultView:window;for(var In=AA(dn.document);In instanceof dn.HTMLIFrameElement;){try{var sx=typeof In.contentWindow.location.href=="string"}catch{sx=!1}if(sx)dn=In.contentWindow;else break;In=AA(dn.document)}return In}function TR(dn){var In=dn&&dn.nodeName&&dn.nodeName.toLowerCase();return In&&(In==="input"&&(dn.type==="text"||dn.type==="search"||dn.type==="tel"||dn.type==="url"||dn.type==="password")||In==="textarea"||dn.contentEditable==="true")}var ML=TT&&"documentMode"in document&&11>=document.documentMode,OA=null,AR=null,vC=null,CR=!1;function GD(dn,In,sx){var px=sx.window===sx?sx.document:sx.nodeType===9?sx:sx.ownerDocument;CR||OA==null||OA!==AA(px)||(px=OA,"selectionStart"in px&&TR(px)?px={start:px.selectionStart,end:px.selectionEnd}:(px=(px.ownerDocument&&px.ownerDocument.defaultView||window).getSelection(),px={anchorNode:px.anchorNode,anchorOffset:px.anchorOffset,focusNode:px.focusNode,focusOffset:px.focusOffset}),vC&&mC(vC,px)||(vC=px,px=WM(AR,"onSelect"),0<px.length&&(In=new lM("onSelect","select",null,In,sx),dn.push({event:In,listeners:px}),In.target=OA)))}function cA(dn,In){var sx={};return sx[dn.toLowerCase()]=In.toLowerCase(),sx["Webkit"+dn]="webkit"+In,sx["Moz"+dn]="moz"+In,sx}var PA={animationend:cA("Animation","AnimationEnd"),animationiteration:cA("Animation","AnimationIteration"),animationstart:cA("Animation","AnimationStart"),transitionrun:cA("Transition","TransitionRun"),transitionstart:cA("Transition","TransitionStart"),transitioncancel:cA("Transition","TransitionCancel"),transitionend:cA("Transition","TransitionEnd")},MR={},zD={};TT&&(zD=document.createElement("div").style,"AnimationEvent"in window||(delete PA.animationend.animation,delete PA.animationiteration.animation,delete PA.animationstart.animation),"TransitionEvent"in window||delete PA.transitionend.transition);function fA(dn){if(MR[dn])return MR[dn];if(!PA[dn])return dn;var In=PA[dn],sx;for(sx in In)if(In.hasOwnProperty(sx)&&sx in zD)return MR[dn]=In[sx];return dn}var VD=fA("animationend"),HD=fA("animationiteration"),jD=fA("animationstart"),RL=fA("transitionrun"),IL=fA("transitionstart"),DL=fA("transitioncancel"),ZD=fA("transitionend"),YD=new Map,RR="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");RR.push("scrollEnd");function mT(dn,In){YD.set(dn,In),iS(In,[dn])}var WD=new WeakMap;function sT(dn,In){if(typeof dn=="object"&&dn!==null){var sx=WD.get(dn);return sx!==void 0?sx:(In={value:dn,source:In,stack:sA(In)},WD.set(dn,In),In)}return{value:dn,source:In,stack:sA(In)}}var lT=[],NA=0,IR=0;function fM(){for(var dn=NA,In=IR=NA=0;In<dn;){var sx=lT[In];lT[In++]=null;var px=lT[In];lT[In++]=null;var mx=lT[In];lT[In++]=null;var Ex=lT[In];if(lT[In++]=null,px!==null&&mx!==null){var Rx=px.pending;Rx===null?mx.next=mx:(mx.next=Rx.next,Rx.next=mx),px.pending=mx}Ex!==0&&XD(sx,mx,Ex)}}function pM(dn,In,sx,px){lT[NA++]=dn,lT[NA++]=In,lT[NA++]=sx,lT[NA++]=px,IR|=px,dn.lanes|=px,dn=dn.alternate,dn!==null&&(dn.lanes|=px)}function DR(dn,In,sx,px){return pM(dn,In,sx,px),dM(dn)}function LA(dn,In){return pM(dn,null,null,In),dM(dn)}function XD(dn,In,sx){dn.lanes|=sx;var px=dn.alternate;px!==null&&(px.lanes|=sx);for(var mx=!1,Ex=dn.return;Ex!==null;)Ex.childLanes|=sx,px=Ex.alternate,px!==null&&(px.childLanes|=sx),Ex.tag===22&&(dn=Ex.stateNode,dn===null||dn._visibility&1||(mx=!0)),dn=Ex,Ex=Ex.return;return dn.tag===3?(Ex=dn.stateNode,mx&&In!==null&&(mx=31-Qx(sx),dn=Ex.hiddenUpdates,px=dn[mx],px===null?dn[mx]=[In]:px.push(In),In.lane=sx|536870912),Ex):null}function dM(dn){if(50<GC)throw GC=0,FI=null,Error(l(185));for(var In=dn.return;In!==null;)dn=In,In=dn.return;return dn.tag===3?dn.stateNode:null}var $A={};function OL(dn,In,sx,px){this.tag=dn,this.key=sx,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=In,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=px,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function JS(dn,In,sx,px){return new OL(dn,In,sx,px)}function PR(dn){return dn=dn.prototype,!(!dn||!dn.isReactComponent)}function AT(dn,In){var sx=dn.alternate;return sx===null?(sx=JS(dn.tag,In,dn.key,dn.mode),sx.elementType=dn.elementType,sx.type=dn.type,sx.stateNode=dn.stateNode,sx.alternate=dn,dn.alternate=sx):(sx.pendingProps=In,sx.type=dn.type,sx.flags=0,sx.subtreeFlags=0,sx.deletions=null),sx.flags=dn.flags&65011712,sx.childLanes=dn.childLanes,sx.lanes=dn.lanes,sx.child=dn.child,sx.memoizedProps=dn.memoizedProps,sx.memoizedState=dn.memoizedState,sx.updateQueue=dn.updateQueue,In=dn.dependencies,sx.dependencies=In===null?null:{lanes:In.lanes,firstContext:In.firstContext},sx.sibling=dn.sibling,sx.index=dn.index,sx.ref=dn.ref,sx.refCleanup=dn.refCleanup,sx}function KD(dn,In){dn.flags&=65011714;var sx=dn.alternate;return sx===null?(dn.childLanes=0,dn.lanes=In,dn.child=null,dn.subtreeFlags=0,dn.memoizedProps=null,dn.memoizedState=null,dn.updateQueue=null,dn.dependencies=null,dn.stateNode=null):(dn.childLanes=sx.childLanes,dn.lanes=sx.lanes,dn.child=sx.child,dn.subtreeFlags=0,dn.deletions=null,dn.memoizedProps=sx.memoizedProps,dn.memoizedState=sx.memoizedState,dn.updateQueue=sx.updateQueue,dn.type=sx.type,In=sx.dependencies,dn.dependencies=In===null?null:{lanes:In.lanes,firstContext:In.firstContext}),dn}function hM(dn,In,sx,px,mx,Ex){var Rx=0;if(px=dn,typeof dn=="function")PR(dn)&&(Rx=1);else if(typeof dn=="string")Rx=N$(dn,sx,Dx.current)?26:dn==="html"||dn==="head"||dn==="body"?27:5;else e:switch(dn){case fx:return dn=JS(31,sx,In,mx),dn.elementType=fx,dn.lanes=Ex,dn;case cn:return pA(sx.children,mx,Ex,In);case gn:Rx=8,mx|=24;break;case Cn:return dn=JS(12,sx,In,mx|2),dn.elementType=Cn,dn.lanes=Ex,dn;case lx:return dn=JS(13,sx,In,mx),dn.elementType=lx,dn.lanes=Ex,dn;case cx:return dn=JS(19,sx,In,mx),dn.elementType=cx,dn.lanes=Ex,dn;default:if(typeof dn=="object"&&dn!==null)switch(dn.$$typeof){case ex:case ax:Rx=10;break e;case ix:Rx=9;break e;case ox:Rx=11;break e;case dx:Rx=14;break e;case hx:Rx=16,px=null;break e}Rx=29,sx=Error(l(130,dn===null?"null":typeof dn,"")),px=null}return In=JS(Rx,sx,In,mx),In.elementType=dn,In.type=px,In.lanes=Ex,In}function pA(dn,In,sx,px){return dn=JS(7,dn,px,In),dn.lanes=sx,dn}function NR(dn,In,sx){return dn=JS(6,dn,null,In),dn.lanes=sx,dn}function LR(dn,In,sx){return In=JS(4,dn.children!==null?dn.children:[],dn.key,In),In.lanes=sx,In.stateNode={containerInfo:dn.containerInfo,pendingChildren:null,implementation:dn.implementation},In}var BA=[],kA=0,gM=null,mM=0,uT=[],cT=0,dA=null,CT=1,MT="";function hA(dn,In){BA[kA++]=mM,BA[kA++]=gM,gM=dn,mM=In}function QD(dn,In,sx){uT[cT++]=CT,uT[cT++]=MT,uT[cT++]=dA,dA=dn;var px=CT;dn=MT;var mx=32-Qx(px)-1;px&=~(1<<mx),sx+=1;var Ex=32-Qx(In)+mx;if(30<Ex){var Rx=mx-mx%5;Ex=(px&(1<<Rx)-1).toString(32),px>>=Rx,mx-=Rx,CT=1<<32-Qx(In)+mx|sx<<mx|px,MT=Ex+dn}else CT=1<<Ex|sx<<mx|px,MT=dn}function $R(dn){dn.return!==null&&(hA(dn,1),QD(dn,1,0))}function BR(dn){for(;dn===gM;)gM=BA[--kA],BA[kA]=null,mM=BA[--kA],BA[kA]=null;for(;dn===dA;)dA=uT[--cT],uT[cT]=null,MT=uT[--cT],uT[cT]=null,CT=uT[--cT],uT[cT]=null}var VS=null,vS=null,nS=!1,gA=null,xT=!1,kR=Error(l(519));function mA(dn){var In=Error(l(418,""));throw _C(sT(In,dn)),kR}function JD(dn){var In=dn.stateNode,sx=dn.type,px=dn.memoizedProps;switch(In[NE]=dn,In[$E]=px,sx){case"dialog":KE("cancel",In),KE("close",In);break;case"iframe":case"object":case"embed":KE("load",In);break;case"video":case"audio":for(sx=0;sx<VC.length;sx++)KE(VC[sx],In);break;case"source":KE("error",In);break;case"img":case"image":case"link":KE("error",In),KE("load",In);break;case"details":KE("toggle",In);break;case"input":KE("invalid",In),lC(In,px.value,px.defaultValue,px.checked,px.defaultChecked,px.type,px.name,!0),TA(In);break;case"select":KE("invalid",In);break;case"textarea":KE("invalid",In),mD(In,px.value,px.defaultValue,px.children),TA(In)}sx=px.children,typeof sx!="string"&&typeof sx!="number"&&typeof sx!="bigint"||In.textContent===""+sx||px.suppressHydrationWarning===!0||vN(In.textContent,sx)?(px.popover!=null&&(KE("beforetoggle",In),KE("toggle",In)),px.onScroll!=null&&KE("scroll",In),px.onScrollEnd!=null&&KE("scrollend",In),px.onClick!=null&&(In.onclick=XM),In=!0):In=!1,In||mA(dn)}function eO(dn){for(VS=dn.return;VS;)switch(VS.tag){case 5:case 13:xT=!1;return;case 27:case 3:xT=!0;return;default:VS=VS.return}}function yC(dn){if(dn!==VS)return!1;if(!nS)return eO(dn),nS=!0,!1;var In=dn.tag,sx;if((sx=In!==3&&In!==27)&&((sx=In===5)&&(sx=dn.type,sx=!(sx!=="form"&&sx!=="button")||tD(dn.type,dn.memoizedProps)),sx=!sx),sx&&vS&&mA(dn),eO(dn),In===13){if(dn=dn.memoizedState,dn=dn!==null?dn.dehydrated:null,!dn)throw Error(l(317));e:{for(dn=dn.nextSibling,In=0;dn;){if(dn.nodeType===8)if(sx=dn.data,sx==="/$"){if(In===0){vS=yT(dn.nextSibling);break e}In--}else sx!=="$"&&sx!=="$!"&&sx!=="$?"||In++;dn=dn.nextSibling}vS=null}}else In===27?(In=vS,tA(dn.type)?(dn=aD,aD=null,vS=dn):vS=In):vS=VS?yT(dn.stateNode.nextSibling):null;return!0}function xC(){vS=VS=null,nS=!1}function tO(){var dn=gA;return dn!==null&&(XS===null?XS=dn:XS.push.apply(XS,dn),gA=null),dn}function _C(dn){gA===null?gA=[dn]:gA.push(dn)}var FR=Px(null),vA=null,RT=null;function UT(dn,In,sx){Mx(FR,In._currentValue),In._currentValue=sx}function IT(dn){dn._currentValue=FR.current,Fx(FR)}function UR(dn,In,sx){for(;dn!==null;){var px=dn.alternate;if((dn.childLanes&In)!==In?(dn.childLanes|=In,px!==null&&(px.childLanes|=In)):px!==null&&(px.childLanes&In)!==In&&(px.childLanes|=In),dn===sx)break;dn=dn.return}}function qR(dn,In,sx,px){var mx=dn.child;for(mx!==null&&(mx.return=dn);mx!==null;){var Ex=mx.dependencies;if(Ex!==null){var Rx=mx.child;Ex=Ex.firstContext;e:for(;Ex!==null;){var qx=Ex;Ex=mx;for(var Xx=0;Xx<In.length;Xx++)if(qx.context===In[Xx]){Ex.lanes|=sx,qx=Ex.alternate,qx!==null&&(qx.lanes|=sx),UR(Ex.return,sx,dn),px||(Rx=null);break e}Ex=qx.next}}else if(mx.tag===18){if(Rx=mx.return,Rx===null)throw Error(l(341));Rx.lanes|=sx,Ex=Rx.alternate,Ex!==null&&(Ex.lanes|=sx),UR(Rx,sx,dn),Rx=null}else Rx=mx.child;if(Rx!==null)Rx.return=mx;else for(Rx=mx;Rx!==null;){if(Rx===dn){Rx=null;break}if(mx=Rx.sibling,mx!==null){mx.return=Rx.return,Rx=mx;break}Rx=Rx.return}mx=Rx}}function EC(dn,In,sx,px){dn=null;for(var mx=In,Ex=!1;mx!==null;){if(!Ex){if((mx.flags&524288)!==0)Ex=!0;else if((mx.flags&262144)!==0)break}if(mx.tag===10){var Rx=mx.alternate;if(Rx===null)throw Error(l(387));if(Rx=Rx.memoizedProps,Rx!==null){var qx=mx.type;QS(mx.pendingProps.value,Rx.value)||(dn!==null?dn.push(qx):dn=[qx])}}else if(mx===Nx.current){if(Rx=mx.alternate,Rx===null)throw Error(l(387));Rx.memoizedState.memoizedState!==mx.memoizedState.memoizedState&&(dn!==null?dn.push(XC):dn=[XC])}mx=mx.return}dn!==null&&qR(In,dn,sx,px),In.flags|=262144}function vM(dn){for(dn=dn.firstContext;dn!==null;){if(!QS(dn.context._currentValue,dn.memoizedValue))return!0;dn=dn.next}return!1}function yA(dn){vA=dn,RT=null,dn=dn.dependencies,dn!==null&&(dn.firstContext=null)}function qS(dn){return rO(vA,dn)}function yM(dn,In){return vA===null&&yA(dn),rO(dn,In)}function rO(dn,In){var sx=In._currentValue;if(In={context:In,memoizedValue:sx,next:null},RT===null){if(dn===null)throw Error(l(308));RT=In,dn.dependencies={lanes:0,firstContext:In},dn.flags|=524288}else RT=RT.next=In;return sx}var PL=typeof AbortController<"u"?AbortController:function(){var dn=[],In=this.signal={aborted:!1,addEventListener:function(sx,px){dn.push(px)}};this.abort=function(){In.aborted=!0,dn.forEach(function(sx){return sx()})}},NL=t.unstable_scheduleCallback,LL=t.unstable_NormalPriority,AS={$$typeof:ax,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function GR(){return{controller:new PL,data:new Map,refCount:0}}function bC(dn){dn.refCount--,dn.refCount===0&&NL(LL,function(){dn.controller.abort()})}var SC=null,zR=0,FA=0,UA=null;function $L(dn,In){if(SC===null){var sx=SC=[];zR=0,FA=jI(),UA={status:"pending",value:void 0,then:function(px){sx.push(px)}}}return zR++,In.then(nO,nO),In}function nO(){if(--zR===0&&SC!==null){UA!==null&&(UA.status="fulfilled");var dn=SC;SC=null,FA=0,UA=null;for(var In=0;In<dn.length;In++)(0,dn[In])()}}function BL(dn,In){var sx=[],px={status:"pending",value:null,reason:null,then:function(mx){sx.push(mx)}};return dn.then(function(){px.status="fulfilled",px.value=In;for(var mx=0;mx<sx.length;mx++)(0,sx[mx])(In)},function(mx){for(px.status="rejected",px.reason=mx,mx=0;mx<sx.length;mx++)(0,sx[mx])(void 0)}),px}var iO=xx.S;xx.S=function(dn,In){typeof In=="object"&&In!==null&&typeof In.then=="function"&&$L(dn,In),iO!==null&&iO(dn,In)};var xA=Px(null);function VR(){var dn=xA.current;return dn!==null?dn:fS.pooledCache}function xM(dn,In){In===null?Mx(xA,xA.current):Mx(xA,In.pool)}function aO(){var dn=VR();return dn===null?null:{parent:AS._currentValue,pool:dn}}var wC=Error(l(460)),oO=Error(l(474)),_M=Error(l(542)),HR={then:function(){}};function sO(dn){return dn=dn.status,dn==="fulfilled"||dn==="rejected"}function EM(){}function lO(dn,In,sx){switch(sx=dn[sx],sx===void 0?dn.push(In):sx!==In&&(In.then(EM,EM),In=sx),In.status){case"fulfilled":return In.value;case"rejected":throw dn=In.reason,cO(dn),dn;default:if(typeof In.status=="string")In.then(EM,EM);else{if(dn=fS,dn!==null&&100<dn.shellSuspendCounter)throw Error(l(482));dn=In,dn.status="pending",dn.then(function(px){if(In.status==="pending"){var mx=In;mx.status="fulfilled",mx.value=px}},function(px){if(In.status==="pending"){var mx=In;mx.status="rejected",mx.reason=px}})}switch(In.status){case"fulfilled":return In.value;case"rejected":throw dn=In.reason,cO(dn),dn}throw TC=In,wC}}var TC=null;function uO(){if(TC===null)throw Error(l(459));var dn=TC;return TC=null,dn}function cO(dn){if(dn===wC||dn===_M)throw Error(l(483))}var qT=!1;function jR(dn){dn.updateQueue={baseState:dn.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ZR(dn,In){dn=dn.updateQueue,In.updateQueue===dn&&(In.updateQueue={baseState:dn.baseState,firstBaseUpdate:dn.firstBaseUpdate,lastBaseUpdate:dn.lastBaseUpdate,shared:dn.shared,callbacks:null})}function GT(dn){return{lane:dn,tag:0,payload:null,callback:null,next:null}}function zT(dn,In,sx){var px=dn.updateQueue;if(px===null)return null;if(px=px.shared,(aS&2)!==0){var mx=px.pending;return mx===null?In.next=In:(In.next=mx.next,mx.next=In),px.pending=In,In=dM(dn),XD(dn,null,sx),In}return pM(dn,px,In,sx),dM(dn)}function AC(dn,In,sx){if(In=In.updateQueue,In!==null&&(In=In.shared,(sx&4194048)!==0)){var px=In.lanes;px&=dn.pendingLanes,sx|=px,In.lanes=sx,kx(dn,sx)}}function YR(dn,In){var sx=dn.updateQueue,px=dn.alternate;if(px!==null&&(px=px.updateQueue,sx===px)){var mx=null,Ex=null;if(sx=sx.firstBaseUpdate,sx!==null){do{var Rx={lane:sx.lane,tag:sx.tag,payload:sx.payload,callback:null,next:null};Ex===null?mx=Ex=Rx:Ex=Ex.next=Rx,sx=sx.next}while(sx!==null);Ex===null?mx=Ex=In:Ex=Ex.next=In}else mx=Ex=In;sx={baseState:px.baseState,firstBaseUpdate:mx,lastBaseUpdate:Ex,shared:px.shared,callbacks:px.callbacks},dn.updateQueue=sx;return}dn=sx.lastBaseUpdate,dn===null?sx.firstBaseUpdate=In:dn.next=In,sx.lastBaseUpdate=In}var WR=!1;function CC(){if(WR){var dn=UA;if(dn!==null)throw dn}}function MC(dn,In,sx,px){WR=!1;var mx=dn.updateQueue;qT=!1;var Ex=mx.firstBaseUpdate,Rx=mx.lastBaseUpdate,qx=mx.shared.pending;if(qx!==null){mx.shared.pending=null;var Xx=qx,uE=Xx.next;Xx.next=null,Rx===null?Ex=uE:Rx.next=uE,Rx=Xx;var yE=dn.alternate;yE!==null&&(yE=yE.updateQueue,qx=yE.lastBaseUpdate,qx!==Rx&&(qx===null?yE.firstBaseUpdate=uE:qx.next=uE,yE.lastBaseUpdate=Xx))}if(Ex!==null){var SE=mx.baseState;Rx=0,yE=uE=Xx=null,qx=Ex;do{var fE=qx.lane&-536870913,pE=fE!==qx.lane;if(pE?(JE&fE)===fE:(px&fE)===fE){fE!==0&&fE===FA&&(WR=!0),yE!==null&&(yE=yE.next={lane:0,tag:qx.tag,payload:qx.payload,callback:null,next:null});e:{var VE=dn,GE=qx;fE=In;var uS=sx;switch(GE.tag){case 1:if(VE=GE.payload,typeof VE=="function"){SE=VE.call(uS,SE,fE);break e}SE=VE;break e;case 3:VE.flags=VE.flags&-65537|128;case 0:if(VE=GE.payload,fE=typeof VE=="function"?VE.call(uS,SE,fE):VE,fE==null)break e;SE=ar({},SE,fE);break e;case 2:qT=!0}}fE=qx.callback,fE!==null&&(dn.flags|=64,pE&&(dn.flags|=8192),pE=mx.callbacks,pE===null?mx.callbacks=[fE]:pE.push(fE))}else pE={lane:fE,tag:qx.tag,payload:qx.payload,callback:qx.callback,next:null},yE===null?(uE=yE=pE,Xx=SE):yE=yE.next=pE,Rx|=fE;if(qx=qx.next,qx===null){if(qx=mx.shared.pending,qx===null)break;pE=qx,qx=pE.next,pE.next=null,mx.lastBaseUpdate=pE,mx.shared.pending=null}}while(!0);yE===null&&(Xx=SE),mx.baseState=Xx,mx.firstBaseUpdate=uE,mx.lastBaseUpdate=yE,Ex===null&&(mx.shared.lanes=0),KT|=Rx,dn.lanes=Rx,dn.memoizedState=SE}}function fO(dn,In){if(typeof dn!="function")throw Error(l(191,dn));dn.call(In)}function pO(dn,In){var sx=dn.callbacks;if(sx!==null)for(dn.callbacks=null,dn=0;dn<sx.length;dn++)fO(sx[dn],In)}var qA=Px(null),bM=Px(0);function dO(dn,In){dn=BT,Mx(bM,dn),Mx(qA,In),BT=dn|In.baseLanes}function XR(){Mx(bM,BT),Mx(qA,qA.current)}function KR(){BT=bM.current,Fx(qA),Fx(bM)}var VT=0,YE=null,sS=null,SS=null,SM=!1,GA=!1,_A=!1,wM=0,RC=0,zA=null,kL=0;function _S(){throw Error(l(321))}function QR(dn,In){if(In===null)return!1;for(var sx=0;sx<In.length&&sx<dn.length;sx++)if(!QS(dn[sx],In[sx]))return!1;return!0}function JR(dn,In,sx,px,mx,Ex){return VT=Ex,YE=In,In.memoizedState=null,In.updateQueue=null,In.lanes=0,xx.H=dn===null||dn.memoizedState===null?KO:QO,_A=!1,Ex=sx(px,mx),_A=!1,GA&&(Ex=gO(In,sx,px,mx)),hO(dn),Ex}function hO(dn){xx.H=IM;var In=sS!==null&&sS.next!==null;if(VT=0,SS=sS=YE=null,SM=!1,RC=0,zA=null,In)throw Error(l(300));dn===null||RS||(dn=dn.dependencies,dn!==null&&vM(dn)&&(RS=!0))}function gO(dn,In,sx,px){YE=dn;var mx=0;do{if(GA&&(zA=null),RC=0,GA=!1,25<=mx)throw Error(l(301));if(mx+=1,SS=sS=null,dn.updateQueue!=null){var Ex=dn.updateQueue;Ex.lastEffect=null,Ex.events=null,Ex.stores=null,Ex.memoCache!=null&&(Ex.memoCache.index=0)}xx.H=HL,Ex=In(sx,px)}while(GA);return Ex}function FL(){var dn=xx.H,In=dn.useState()[0];return In=typeof In.then=="function"?IC(In):In,dn=dn.useState()[0],(sS!==null?sS.memoizedState:null)!==dn&&(YE.flags|=1024),In}function eI(){var dn=wM!==0;return wM=0,dn}function tI(dn,In,sx){In.updateQueue=dn.updateQueue,In.flags&=-2053,dn.lanes&=~sx}function rI(dn){if(SM){for(dn=dn.memoizedState;dn!==null;){var In=dn.queue;In!==null&&(In.pending=null),dn=dn.next}SM=!1}VT=0,SS=sS=YE=null,GA=!1,RC=wM=0,zA=null}function YS(){var dn={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return SS===null?YE.memoizedState=SS=dn:SS=SS.next=dn,SS}function wS(){if(sS===null){var dn=YE.alternate;dn=dn!==null?dn.memoizedState:null}else dn=sS.next;var In=SS===null?YE.memoizedState:SS.next;if(In!==null)SS=In,sS=dn;else{if(dn===null)throw YE.alternate===null?Error(l(467)):Error(l(310));sS=dn,dn={memoizedState:sS.memoizedState,baseState:sS.baseState,baseQueue:sS.baseQueue,queue:sS.queue,next:null},SS===null?YE.memoizedState=SS=dn:SS=SS.next=dn}return SS}function nI(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function IC(dn){var In=RC;return RC+=1,zA===null&&(zA=[]),dn=lO(zA,dn,In),In=YE,(SS===null?In.memoizedState:SS.next)===null&&(In=In.alternate,xx.H=In===null||In.memoizedState===null?KO:QO),dn}function TM(dn){if(dn!==null&&typeof dn=="object"){if(typeof dn.then=="function")return IC(dn);if(dn.$$typeof===ax)return qS(dn)}throw Error(l(438,String(dn)))}function iI(dn){var In=null,sx=YE.updateQueue;if(sx!==null&&(In=sx.memoCache),In==null){var px=YE.alternate;px!==null&&(px=px.updateQueue,px!==null&&(px=px.memoCache,px!=null&&(In={data:px.data.map(function(mx){return mx.slice()}),index:0})))}if(In==null&&(In={data:[],index:0}),sx===null&&(sx=nI(),YE.updateQueue=sx),sx.memoCache=In,sx=In.data[In.index],sx===void 0)for(sx=In.data[In.index]=Array(dn),px=0;px<dn;px++)sx[px]=ux;return In.index++,sx}function DT(dn,In){return typeof In=="function"?In(dn):In}function AM(dn){var In=wS();return aI(In,sS,dn)}function aI(dn,In,sx){var px=dn.queue;if(px===null)throw Error(l(311));px.lastRenderedReducer=sx;var mx=dn.baseQueue,Ex=px.pending;if(Ex!==null){if(mx!==null){var Rx=mx.next;mx.next=Ex.next,Ex.next=Rx}In.baseQueue=mx=Ex,px.pending=null}if(Ex=dn.baseState,mx===null)dn.memoizedState=Ex;else{In=mx.next;var qx=Rx=null,Xx=null,uE=In,yE=!1;do{var SE=uE.lane&-536870913;if(SE!==uE.lane?(JE&SE)===SE:(VT&SE)===SE){var fE=uE.revertLane;if(fE===0)Xx!==null&&(Xx=Xx.next={lane:0,revertLane:0,action:uE.action,hasEagerState:uE.hasEagerState,eagerState:uE.eagerState,next:null}),SE===FA&&(yE=!0);else if((VT&fE)===fE){uE=uE.next,fE===FA&&(yE=!0);continue}else SE={lane:0,revertLane:uE.revertLane,action:uE.action,hasEagerState:uE.hasEagerState,eagerState:uE.eagerState,next:null},Xx===null?(qx=Xx=SE,Rx=Ex):Xx=Xx.next=SE,YE.lanes|=fE,KT|=fE;SE=uE.action,_A&&sx(Ex,SE),Ex=uE.hasEagerState?uE.eagerState:sx(Ex,SE)}else fE={lane:SE,revertLane:uE.revertLane,action:uE.action,hasEagerState:uE.hasEagerState,eagerState:uE.eagerState,next:null},Xx===null?(qx=Xx=fE,Rx=Ex):Xx=Xx.next=fE,YE.lanes|=SE,KT|=SE;uE=uE.next}while(uE!==null&&uE!==In);if(Xx===null?Rx=Ex:Xx.next=qx,!QS(Ex,dn.memoizedState)&&(RS=!0,yE&&(sx=UA,sx!==null)))throw sx;dn.memoizedState=Ex,dn.baseState=Rx,dn.baseQueue=Xx,px.lastRenderedState=Ex}return mx===null&&(px.lanes=0),[dn.memoizedState,px.dispatch]}function oI(dn){var In=wS(),sx=In.queue;if(sx===null)throw Error(l(311));sx.lastRenderedReducer=dn;var px=sx.dispatch,mx=sx.pending,Ex=In.memoizedState;if(mx!==null){sx.pending=null;var Rx=mx=mx.next;do Ex=dn(Ex,Rx.action),Rx=Rx.next;while(Rx!==mx);QS(Ex,In.memoizedState)||(RS=!0),In.memoizedState=Ex,In.baseQueue===null&&(In.baseState=Ex),sx.lastRenderedState=Ex}return[Ex,px]}function mO(dn,In,sx){var px=YE,mx=wS(),Ex=nS;if(Ex){if(sx===void 0)throw Error(l(407));sx=sx()}else sx=In();var Rx=!QS((sS||mx).memoizedState,sx);Rx&&(mx.memoizedState=sx,RS=!0),mx=mx.queue;var qx=xO.bind(null,px,mx,dn);if(DC(2048,8,qx,[dn]),mx.getSnapshot!==In||Rx||SS!==null&&SS.memoizedState.tag&1){if(px.flags|=2048,VA(9,CM(),yO.bind(null,px,mx,sx,In),null),fS===null)throw Error(l(349));Ex||(VT&124)!==0||vO(px,In,sx)}return sx}function vO(dn,In,sx){dn.flags|=16384,dn={getSnapshot:In,value:sx},In=YE.updateQueue,In===null?(In=nI(),YE.updateQueue=In,In.stores=[dn]):(sx=In.stores,sx===null?In.stores=[dn]:sx.push(dn))}function yO(dn,In,sx,px){In.value=sx,In.getSnapshot=px,_O(In)&&EO(dn)}function xO(dn,In,sx){return sx(function(){_O(In)&&EO(dn)})}function _O(dn){var In=dn.getSnapshot;dn=dn.value;try{var sx=In();return!QS(dn,sx)}catch{return!0}}function EO(dn){var In=LA(dn,2);In!==null&&iT(In,dn,2)}function sI(dn){var In=YS();if(typeof dn=="function"){var sx=dn;if(dn=sx(),_A){Yx(!0);try{sx()}finally{Yx(!1)}}}return In.memoizedState=In.baseState=dn,In.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DT,lastRenderedState:dn},In}function bO(dn,In,sx,px){return dn.baseState=sx,aI(dn,sS,typeof px=="function"?px:DT)}function UL(dn,In,sx,px,mx){if(RM(dn))throw Error(l(485));if(dn=In.action,dn!==null){var Ex={payload:mx,action:dn,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Rx){Ex.listeners.push(Rx)}};xx.T!==null?sx(!0):Ex.isTransition=!1,px(Ex),sx=In.pending,sx===null?(Ex.next=In.pending=Ex,SO(In,Ex)):(Ex.next=sx.next,In.pending=sx.next=Ex)}}function SO(dn,In){var sx=In.action,px=In.payload,mx=dn.state;if(In.isTransition){var Ex=xx.T,Rx={};xx.T=Rx;try{var qx=sx(mx,px),Xx=xx.S;Xx!==null&&Xx(Rx,qx),wO(dn,In,qx)}catch(uE){lI(dn,In,uE)}finally{xx.T=Ex}}else try{Ex=sx(mx,px),wO(dn,In,Ex)}catch(uE){lI(dn,In,uE)}}function wO(dn,In,sx){sx!==null&&typeof sx=="object"&&typeof sx.then=="function"?sx.then(function(px){TO(dn,In,px)},function(px){return lI(dn,In,px)}):TO(dn,In,sx)}function TO(dn,In,sx){In.status="fulfilled",In.value=sx,AO(In),dn.state=sx,In=dn.pending,In!==null&&(sx=In.next,sx===In?dn.pending=null:(sx=sx.next,In.next=sx,SO(dn,sx)))}function lI(dn,In,sx){var px=dn.pending;if(dn.pending=null,px!==null){px=px.next;do In.status="rejected",In.reason=sx,AO(In),In=In.next;while(In!==px)}dn.action=null}function AO(dn){dn=dn.listeners;for(var In=0;In<dn.length;In++)(0,dn[In])()}function CO(dn,In){return In}function MO(dn,In){if(nS){var sx=fS.formState;if(sx!==null){e:{var px=YE;if(nS){if(vS){t:{for(var mx=vS,Ex=xT;mx.nodeType!==8;){if(!Ex){mx=null;break t}if(mx=yT(mx.nextSibling),mx===null){mx=null;break t}}Ex=mx.data,mx=Ex==="F!"||Ex==="F"?mx:null}if(mx){vS=yT(mx.nextSibling),px=mx.data==="F!";break e}}mA(px)}px=!1}px&&(In=sx[0])}}return sx=YS(),sx.memoizedState=sx.baseState=In,px={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CO,lastRenderedState:In},sx.queue=px,sx=YO.bind(null,YE,px),px.dispatch=sx,px=sI(!1),Ex=dI.bind(null,YE,!1,px.queue),px=YS(),mx={state:In,dispatch:null,action:dn,pending:null},px.queue=mx,sx=UL.bind(null,YE,mx,Ex,sx),mx.dispatch=sx,px.memoizedState=dn,[In,sx,!1]}function RO(dn){var In=wS();return IO(In,sS,dn)}function IO(dn,In,sx){if(In=aI(dn,In,CO)[0],dn=AM(DT)[0],typeof In=="object"&&In!==null&&typeof In.then=="function")try{var px=IC(In)}catch(Rx){throw Rx===wC?_M:Rx}else px=In;In=wS();var mx=In.queue,Ex=mx.dispatch;return sx!==In.memoizedState&&(YE.flags|=2048,VA(9,CM(),qL.bind(null,mx,sx),null)),[px,Ex,dn]}function qL(dn,In){dn.action=In}function OO(dn){var In=wS(),sx=sS;if(sx!==null)return IO(In,sx,dn);wS(),In=In.memoizedState,sx=wS();var px=sx.queue.dispatch;return sx.memoizedState=dn,[In,px,!1]}function VA(dn,In,sx,px){return dn={tag:dn,create:sx,deps:px,inst:In,next:null},In=YE.updateQueue,In===null&&(In=nI(),YE.updateQueue=In),sx=In.lastEffect,sx===null?In.lastEffect=dn.next=dn:(px=sx.next,sx.next=dn,dn.next=px,In.lastEffect=dn),dn}function CM(){return{destroy:void 0,resource:void 0}}function PO(){return wS().memoizedState}function MM(dn,In,sx,px){var mx=YS();px=px===void 0?null:px,YE.flags|=dn,mx.memoizedState=VA(1|In,CM(),sx,px)}function DC(dn,In,sx,px){var mx=wS();px=px===void 0?null:px;var Ex=mx.memoizedState.inst;sS!==null&&px!==null&&QR(px,sS.memoizedState.deps)?mx.memoizedState=VA(In,Ex,sx,px):(YE.flags|=dn,mx.memoizedState=VA(1|In,Ex,sx,px))}function NO(dn,In){MM(8390656,8,dn,In)}function LO(dn,In){DC(2048,8,dn,In)}function $O(dn,In){return DC(4,2,dn,In)}function BO(dn,In){return DC(4,4,dn,In)}function kO(dn,In){if(typeof In=="function"){dn=dn();var sx=In(dn);return function(){typeof sx=="function"?sx():In(null)}}if(In!=null)return dn=dn(),In.current=dn,function(){In.current=null}}function FO(dn,In,sx){sx=sx!=null?sx.concat([dn]):null,DC(4,4,kO.bind(null,In,dn),sx)}function uI(){}function UO(dn,In){var sx=wS();In=In===void 0?null:In;var px=sx.memoizedState;return In!==null&&QR(In,px[1])?px[0]:(sx.memoizedState=[dn,In],dn)}function qO(dn,In){var sx=wS();In=In===void 0?null:In;var px=sx.memoizedState;if(In!==null&&QR(In,px[1]))return px[0];if(px=dn(),_A){Yx(!0);try{dn()}finally{Yx(!1)}}return sx.memoizedState=[px,In],px}function cI(dn,In,sx){return sx===void 0||(VT&1073741824)!==0?dn.memoizedState=In:(dn.memoizedState=sx,dn=VP(),YE.lanes|=dn,KT|=dn,sx)}function GO(dn,In,sx,px){return QS(sx,In)?sx:qA.current!==null?(dn=cI(dn,sx,px),QS(dn,In)||(RS=!0),dn):(VT&42)===0?(RS=!0,dn.memoizedState=sx):(dn=VP(),YE.lanes|=dn,KT|=dn,In)}function zO(dn,In,sx,px,mx){var Ex=Sx.p;Sx.p=Ex!==0&&8>Ex?Ex:8;var Rx=xx.T,qx={};xx.T=qx,dI(dn,!1,In,sx);try{var Xx=mx(),uE=xx.S;if(uE!==null&&uE(qx,Xx),Xx!==null&&typeof Xx=="object"&&typeof Xx.then=="function"){var yE=BL(Xx,px);OC(dn,In,yE,nT(dn))}else OC(dn,In,px,nT(dn))}catch(SE){OC(dn,In,{then:function(){},status:"rejected",reason:SE},nT())}finally{Sx.p=Ex,xx.T=Rx}}function GL(){}function fI(dn,In,sx,px){if(dn.tag!==5)throw Error(l(476));var mx=VO(dn).queue;zO(dn,mx,In,Ax,sx===null?GL:function(){return HO(dn),sx(px)})}function VO(dn){var In=dn.memoizedState;if(In!==null)return In;In={memoizedState:Ax,baseState:Ax,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:DT,lastRenderedState:Ax},next:null};var sx={};return In.next={memoizedState:sx,baseState:sx,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:DT,lastRenderedState:sx},next:null},dn.memoizedState=In,dn=dn.alternate,dn!==null&&(dn.memoizedState=In),In}function HO(dn){var In=VO(dn).next.queue;OC(dn,In,{},nT())}function pI(){return qS(XC)}function jO(){return wS().memoizedState}function ZO(){return wS().memoizedState}function zL(dn){for(var In=dn.return;In!==null;){switch(In.tag){case 24:case 3:var sx=nT();dn=GT(sx);var px=zT(In,dn,sx);px!==null&&(iT(px,In,sx),AC(px,In,sx)),In={cache:GR()},dn.payload=In;return}In=In.return}}function VL(dn,In,sx){var px=nT();sx={lane:px,revertLane:0,action:sx,hasEagerState:!1,eagerState:null,next:null},RM(dn)?WO(In,sx):(sx=DR(dn,In,sx,px),sx!==null&&(iT(sx,dn,px),XO(sx,In,px)))}function YO(dn,In,sx){var px=nT();OC(dn,In,sx,px)}function OC(dn,In,sx,px){var mx={lane:px,revertLane:0,action:sx,hasEagerState:!1,eagerState:null,next:null};if(RM(dn))WO(In,mx);else{var Ex=dn.alternate;if(dn.lanes===0&&(Ex===null||Ex.lanes===0)&&(Ex=In.lastRenderedReducer,Ex!==null))try{var Rx=In.lastRenderedState,qx=Ex(Rx,sx);if(mx.hasEagerState=!0,mx.eagerState=qx,QS(qx,Rx))return pM(dn,In,mx,0),fS===null&&fM(),!1}catch{}finally{}if(sx=DR(dn,In,mx,px),sx!==null)return iT(sx,dn,px),XO(sx,In,px),!0}return!1}function dI(dn,In,sx,px){if(px={lane:2,revertLane:jI(),action:px,hasEagerState:!1,eagerState:null,next:null},RM(dn)){if(In)throw Error(l(479))}else In=DR(dn,sx,px,2),In!==null&&iT(In,dn,2)}function RM(dn){var In=dn.alternate;return dn===YE||In!==null&&In===YE}function WO(dn,In){GA=SM=!0;var sx=dn.pending;sx===null?In.next=In:(In.next=sx.next,sx.next=In),dn.pending=In}function XO(dn,In,sx){if((sx&4194048)!==0){var px=In.lanes;px&=dn.pendingLanes,sx|=px,In.lanes=sx,kx(dn,sx)}}var IM={readContext:qS,use:TM,useCallback:_S,useContext:_S,useEffect:_S,useImperativeHandle:_S,useLayoutEffect:_S,useInsertionEffect:_S,useMemo:_S,useReducer:_S,useRef:_S,useState:_S,useDebugValue:_S,useDeferredValue:_S,useTransition:_S,useSyncExternalStore:_S,useId:_S,useHostTransitionStatus:_S,useFormState:_S,useActionState:_S,useOptimistic:_S,useMemoCache:_S,useCacheRefresh:_S},KO={readContext:qS,use:TM,useCallback:function(dn,In){return YS().memoizedState=[dn,In===void 0?null:In],dn},useContext:qS,useEffect:NO,useImperativeHandle:function(dn,In,sx){sx=sx!=null?sx.concat([dn]):null,MM(4194308,4,kO.bind(null,In,dn),sx)},useLayoutEffect:function(dn,In){return MM(4194308,4,dn,In)},useInsertionEffect:function(dn,In){MM(4,2,dn,In)},useMemo:function(dn,In){var sx=YS();In=In===void 0?null:In;var px=dn();if(_A){Yx(!0);try{dn()}finally{Yx(!1)}}return sx.memoizedState=[px,In],px},useReducer:function(dn,In,sx){var px=YS();if(sx!==void 0){var mx=sx(In);if(_A){Yx(!0);try{sx(In)}finally{Yx(!1)}}}else mx=In;return px.memoizedState=px.baseState=mx,dn={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:mx},px.queue=dn,dn=dn.dispatch=VL.bind(null,YE,dn),[px.memoizedState,dn]},useRef:function(dn){var In=YS();return dn={current:dn},In.memoizedState=dn},useState:function(dn){dn=sI(dn);var In=dn.queue,sx=YO.bind(null,YE,In);return In.dispatch=sx,[dn.memoizedState,sx]},useDebugValue:uI,useDeferredValue:function(dn,In){var sx=YS();return cI(sx,dn,In)},useTransition:function(){var dn=sI(!1);return dn=zO.bind(null,YE,dn.queue,!0,!1),YS().memoizedState=dn,[!1,dn]},useSyncExternalStore:function(dn,In,sx){var px=YE,mx=YS();if(nS){if(sx===void 0)throw Error(l(407));sx=sx()}else{if(sx=In(),fS===null)throw Error(l(349));(JE&124)!==0||vO(px,In,sx)}mx.memoizedState=sx;var Ex={value:sx,getSnapshot:In};return mx.queue=Ex,NO(xO.bind(null,px,Ex,dn),[dn]),px.flags|=2048,VA(9,CM(),yO.bind(null,px,Ex,sx,In),null),sx},useId:function(){var dn=YS(),In=fS.identifierPrefix;if(nS){var sx=MT,px=CT;sx=(px&~(1<<32-Qx(px)-1)).toString(32)+sx,In=""+In+"R"+sx,sx=wM++,0<sx&&(In+="H"+sx.toString(32)),In+=""}else sx=kL++,In=""+In+"r"+sx.toString(32)+"";return dn.memoizedState=In},useHostTransitionStatus:pI,useFormState:MO,useActionState:MO,useOptimistic:function(dn){var In=YS();In.memoizedState=In.baseState=dn;var sx={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return In.queue=sx,In=dI.bind(null,YE,!0,sx),sx.dispatch=In,[dn,In]},useMemoCache:iI,useCacheRefresh:function(){return YS().memoizedState=zL.bind(null,YE)}},QO={readContext:qS,use:TM,useCallback:UO,useContext:qS,useEffect:LO,useImperativeHandle:FO,useInsertionEffect:$O,useLayoutEffect:BO,useMemo:qO,useReducer:AM,useRef:PO,useState:function(){return AM(DT)},useDebugValue:uI,useDeferredValue:function(dn,In){var sx=wS();return GO(sx,sS.memoizedState,dn,In)},useTransition:function(){var dn=AM(DT)[0],In=wS().memoizedState;return[typeof dn=="boolean"?dn:IC(dn),In]},useSyncExternalStore:mO,useId:jO,useHostTransitionStatus:pI,useFormState:RO,useActionState:RO,useOptimistic:function(dn,In){var sx=wS();return bO(sx,sS,dn,In)},useMemoCache:iI,useCacheRefresh:ZO},HL={readContext:qS,use:TM,useCallback:UO,useContext:qS,useEffect:LO,useImperativeHandle:FO,useInsertionEffect:$O,useLayoutEffect:BO,useMemo:qO,useReducer:oI,useRef:PO,useState:function(){return oI(DT)},useDebugValue:uI,useDeferredValue:function(dn,In){var sx=wS();return sS===null?cI(sx,dn,In):GO(sx,sS.memoizedState,dn,In)},useTransition:function(){var dn=oI(DT)[0],In=wS().memoizedState;return[typeof dn=="boolean"?dn:IC(dn),In]},useSyncExternalStore:mO,useId:jO,useHostTransitionStatus:pI,useFormState:OO,useActionState:OO,useOptimistic:function(dn,In){var sx=wS();return sS!==null?bO(sx,sS,dn,In):(sx.baseState=dn,[dn,sx.queue.dispatch])},useMemoCache:iI,useCacheRefresh:ZO},HA=null,PC=0;function DM(dn){var In=PC;return PC+=1,HA===null&&(HA=[]),lO(HA,dn,In)}function NC(dn,In){In=In.props.ref,dn.ref=In!==void 0?In:null}function OM(dn,In){throw In.$$typeof===en?Error(l(525)):(dn=Object.prototype.toString.call(In),Error(l(31,dn==="[object Object]"?"object with keys {"+Object.keys(In).join(", ")+"}":dn)))}function JO(dn){var In=dn._init;return In(dn._payload)}function eP(dn){function In(aE,tE){if(dn){var lE=aE.deletions;lE===null?(aE.deletions=[tE],aE.flags|=16):lE.push(tE)}}function sx(aE,tE){if(!dn)return null;for(;tE!==null;)In(aE,tE),tE=tE.sibling;return null}function px(aE){for(var tE=new Map;aE!==null;)aE.key!==null?tE.set(aE.key,aE):tE.set(aE.index,aE),aE=aE.sibling;return tE}function mx(aE,tE){return aE=AT(aE,tE),aE.index=0,aE.sibling=null,aE}function Ex(aE,tE,lE){return aE.index=lE,dn?(lE=aE.alternate,lE!==null?(lE=lE.index,lE<tE?(aE.flags|=67108866,tE):lE):(aE.flags|=67108866,tE)):(aE.flags|=1048576,tE)}function Rx(aE){return dn&&aE.alternate===null&&(aE.flags|=67108866),aE}function qx(aE,tE,lE,_E){return tE===null||tE.tag!==6?(tE=NR(lE,aE.mode,_E),tE.return=aE,tE):(tE=mx(tE,lE),tE.return=aE,tE)}function Xx(aE,tE,lE,_E){var BE=lE.type;return BE===cn?yE(aE,tE,lE.props.children,_E,lE.key):tE!==null&&(tE.elementType===BE||typeof BE=="object"&&BE!==null&&BE.$$typeof===hx&&JO(BE)===tE.type)?(tE=mx(tE,lE.props),NC(tE,lE),tE.return=aE,tE):(tE=hM(lE.type,lE.key,lE.props,null,aE.mode,_E),NC(tE,lE),tE.return=aE,tE)}function uE(aE,tE,lE,_E){return tE===null||tE.tag!==4||tE.stateNode.containerInfo!==lE.containerInfo||tE.stateNode.implementation!==lE.implementation?(tE=LR(lE,aE.mode,_E),tE.return=aE,tE):(tE=mx(tE,lE.children||[]),tE.return=aE,tE)}function yE(aE,tE,lE,_E,BE){return tE===null||tE.tag!==7?(tE=pA(lE,aE.mode,_E,BE),tE.return=aE,tE):(tE=mx(tE,lE),tE.return=aE,tE)}function SE(aE,tE,lE){if(typeof tE=="string"&&tE!==""||typeof tE=="number"||typeof tE=="bigint")return tE=NR(""+tE,aE.mode,lE),tE.return=aE,tE;if(typeof tE=="object"&&tE!==null){switch(tE.$$typeof){case tn:return lE=hM(tE.type,tE.key,tE.props,null,aE.mode,lE),NC(lE,tE),lE.return=aE,lE;case on:return tE=LR(tE,aE.mode,lE),tE.return=aE,tE;case hx:var _E=tE._init;return tE=_E(tE._payload),SE(aE,tE,lE)}if(bx(tE)||yx(tE))return tE=pA(tE,aE.mode,lE,null),tE.return=aE,tE;if(typeof tE.then=="function")return SE(aE,DM(tE),lE);if(tE.$$typeof===ax)return SE(aE,yM(aE,tE),lE);OM(aE,tE)}return null}function fE(aE,tE,lE,_E){var BE=tE!==null?tE.key:null;if(typeof lE=="string"&&lE!==""||typeof lE=="number"||typeof lE=="bigint")return BE!==null?null:qx(aE,tE,""+lE,_E);if(typeof lE=="object"&&lE!==null){switch(lE.$$typeof){case tn:return lE.key===BE?Xx(aE,tE,lE,_E):null;case on:return lE.key===BE?uE(aE,tE,lE,_E):null;case hx:return BE=lE._init,lE=BE(lE._payload),fE(aE,tE,lE,_E)}if(bx(lE)||yx(lE))return BE!==null?null:yE(aE,tE,lE,_E,null);if(typeof lE.then=="function")return fE(aE,tE,DM(lE),_E);if(lE.$$typeof===ax)return fE(aE,tE,yM(aE,lE),_E);OM(aE,lE)}return null}function pE(aE,tE,lE,_E,BE){if(typeof _E=="string"&&_E!==""||typeof _E=="number"||typeof _E=="bigint")return aE=aE.get(lE)||null,qx(tE,aE,""+_E,BE);if(typeof _E=="object"&&_E!==null){switch(_E.$$typeof){case tn:return aE=aE.get(_E.key===null?lE:_E.key)||null,Xx(tE,aE,_E,BE);case on:return aE=aE.get(_E.key===null?lE:_E.key)||null,uE(tE,aE,_E,BE);case hx:var WE=_E._init;return _E=WE(_E._payload),pE(aE,tE,lE,_E,BE)}if(bx(_E)||yx(_E))return aE=aE.get(lE)||null,yE(tE,aE,_E,BE,null);if(typeof _E.then=="function")return pE(aE,tE,lE,DM(_E),BE);if(_E.$$typeof===ax)return pE(aE,tE,lE,yM(tE,_E),BE);OM(tE,_E)}return null}function VE(aE,tE,lE,_E){for(var BE=null,WE=null,FE=tE,zE=tE=0,DS=null;FE!==null&&zE<lE.length;zE++){FE.index>zE?(DS=FE,FE=null):DS=FE.sibling;var tS=fE(aE,FE,lE[zE],_E);if(tS===null){FE===null&&(FE=DS);break}dn&&FE&&tS.alternate===null&&In(aE,FE),tE=Ex(tS,tE,zE),WE===null?BE=tS:WE.sibling=tS,WE=tS,FE=DS}if(zE===lE.length)return sx(aE,FE),nS&&hA(aE,zE),BE;if(FE===null){for(;zE<lE.length;zE++)FE=SE(aE,lE[zE],_E),FE!==null&&(tE=Ex(FE,tE,zE),WE===null?BE=FE:WE.sibling=FE,WE=FE);return nS&&hA(aE,zE),BE}for(FE=px(FE);zE<lE.length;zE++)DS=pE(FE,aE,zE,lE[zE],_E),DS!==null&&(dn&&DS.alternate!==null&&FE.delete(DS.key===null?zE:DS.key),tE=Ex(DS,tE,zE),WE===null?BE=DS:WE.sibling=DS,WE=DS);return dn&&FE.forEach(function(oA){return In(aE,oA)}),nS&&hA(aE,zE),BE}function GE(aE,tE,lE,_E){if(lE==null)throw Error(l(151));for(var BE=null,WE=null,FE=tE,zE=tE=0,DS=null,tS=lE.next();FE!==null&&!tS.done;zE++,tS=lE.next()){FE.index>zE?(DS=FE,FE=null):DS=FE.sibling;var oA=fE(aE,FE,tS.value,_E);if(oA===null){FE===null&&(FE=DS);break}dn&&FE&&oA.alternate===null&&In(aE,FE),tE=Ex(oA,tE,zE),WE===null?BE=oA:WE.sibling=oA,WE=oA,FE=DS}if(tS.done)return sx(aE,FE),nS&&hA(aE,zE),BE;if(FE===null){for(;!tS.done;zE++,tS=lE.next())tS=SE(aE,tS.value,_E),tS!==null&&(tE=Ex(tS,tE,zE),WE===null?BE=tS:WE.sibling=tS,WE=tS);return nS&&hA(aE,zE),BE}for(FE=px(FE);!tS.done;zE++,tS=lE.next())tS=pE(FE,aE,zE,tS.value,_E),tS!==null&&(dn&&tS.alternate!==null&&FE.delete(tS.key===null?zE:tS.key),tE=Ex(tS,tE,zE),WE===null?BE=tS:WE.sibling=tS,WE=tS);return dn&&FE.forEach(function(j$){return In(aE,j$)}),nS&&hA(aE,zE),BE}function uS(aE,tE,lE,_E){if(typeof lE=="object"&&lE!==null&&lE.type===cn&&lE.key===null&&(lE=lE.props.children),typeof lE=="object"&&lE!==null){switch(lE.$$typeof){case tn:e:{for(var BE=lE.key;tE!==null;){if(tE.key===BE){if(BE=lE.type,BE===cn){if(tE.tag===7){sx(aE,tE.sibling),_E=mx(tE,lE.props.children),_E.return=aE,aE=_E;break e}}else if(tE.elementType===BE||typeof BE=="object"&&BE!==null&&BE.$$typeof===hx&&JO(BE)===tE.type){sx(aE,tE.sibling),_E=mx(tE,lE.props),NC(_E,lE),_E.return=aE,aE=_E;break e}sx(aE,tE);break}else In(aE,tE);tE=tE.sibling}lE.type===cn?(_E=pA(lE.props.children,aE.mode,_E,lE.key),_E.return=aE,aE=_E):(_E=hM(lE.type,lE.key,lE.props,null,aE.mode,_E),NC(_E,lE),_E.return=aE,aE=_E)}return Rx(aE);case on:e:{for(BE=lE.key;tE!==null;){if(tE.key===BE)if(tE.tag===4&&tE.stateNode.containerInfo===lE.containerInfo&&tE.stateNode.implementation===lE.implementation){sx(aE,tE.sibling),_E=mx(tE,lE.children||[]),_E.return=aE,aE=_E;break e}else{sx(aE,tE);break}else In(aE,tE);tE=tE.sibling}_E=LR(lE,aE.mode,_E),_E.return=aE,aE=_E}return Rx(aE);case hx:return BE=lE._init,lE=BE(lE._payload),uS(aE,tE,lE,_E)}if(bx(lE))return VE(aE,tE,lE,_E);if(yx(lE)){if(BE=yx(lE),typeof BE!="function")throw Error(l(150));return lE=BE.call(lE),GE(aE,tE,lE,_E)}if(typeof lE.then=="function")return uS(aE,tE,DM(lE),_E);if(lE.$$typeof===ax)return uS(aE,tE,yM(aE,lE),_E);OM(aE,lE)}return typeof lE=="string"&&lE!==""||typeof lE=="number"||typeof lE=="bigint"?(lE=""+lE,tE!==null&&tE.tag===6?(sx(aE,tE.sibling),_E=mx(tE,lE),_E.return=aE,aE=_E):(sx(aE,tE),_E=NR(lE,aE.mode,_E),_E.return=aE,aE=_E),Rx(aE)):sx(aE,tE)}return function(aE,tE,lE,_E){try{PC=0;var BE=uS(aE,tE,lE,_E);return HA=null,BE}catch(FE){if(FE===wC||FE===_M)throw FE;var WE=JS(29,FE,null,aE.mode);return WE.lanes=_E,WE.return=aE,WE}finally{}}}var jA=eP(!0),tP=eP(!1),fT=Px(null),_T=null;function HT(dn){var In=dn.alternate;Mx(CS,CS.current&1),Mx(fT,dn),_T===null&&(In===null||qA.current!==null||In.memoizedState!==null)&&(_T=dn)}function rP(dn){if(dn.tag===22){if(Mx(CS,CS.current),Mx(fT,dn),_T===null){var In=dn.alternate;In!==null&&In.memoizedState!==null&&(_T=dn)}}else jT()}function jT(){Mx(CS,CS.current),Mx(fT,fT.current)}function OT(dn){Fx(fT),_T===dn&&(_T=null),Fx(CS)}var CS=Px(0);function PM(dn){for(var In=dn;In!==null;){if(In.tag===13){var sx=In.memoizedState;if(sx!==null&&(sx=sx.dehydrated,sx===null||sx.data==="$?"||iD(sx)))return In}else if(In.tag===19&&In.memoizedProps.revealOrder!==void 0){if((In.flags&128)!==0)return In}else if(In.child!==null){In.child.return=In,In=In.child;continue}if(In===dn)break;for(;In.sibling===null;){if(In.return===null||In.return===dn)return null;In=In.return}In.sibling.return=In.return,In=In.sibling}return null}function hI(dn,In,sx,px){In=dn.memoizedState,sx=sx(px,In),sx=sx==null?In:ar({},In,sx),dn.memoizedState=sx,dn.lanes===0&&(dn.updateQueue.baseState=sx)}var gI={enqueueSetState:function(dn,In,sx){dn=dn._reactInternals;var px=nT(),mx=GT(px);mx.payload=In,sx!=null&&(mx.callback=sx),In=zT(dn,mx,px),In!==null&&(iT(In,dn,px),AC(In,dn,px))},enqueueReplaceState:function(dn,In,sx){dn=dn._reactInternals;var px=nT(),mx=GT(px);mx.tag=1,mx.payload=In,sx!=null&&(mx.callback=sx),In=zT(dn,mx,px),In!==null&&(iT(In,dn,px),AC(In,dn,px))},enqueueForceUpdate:function(dn,In){dn=dn._reactInternals;var sx=nT(),px=GT(sx);px.tag=2,In!=null&&(px.callback=In),In=zT(dn,px,sx),In!==null&&(iT(In,dn,sx),AC(In,dn,sx))}};function nP(dn,In,sx,px,mx,Ex,Rx){return dn=dn.stateNode,typeof dn.shouldComponentUpdate=="function"?dn.shouldComponentUpdate(px,Ex,Rx):In.prototype&&In.prototype.isPureReactComponent?!mC(sx,px)||!mC(mx,Ex):!0}function iP(dn,In,sx,px){dn=In.state,typeof In.componentWillReceiveProps=="function"&&In.componentWillReceiveProps(sx,px),typeof In.UNSAFE_componentWillReceiveProps=="function"&&In.UNSAFE_componentWillReceiveProps(sx,px),In.state!==dn&&gI.enqueueReplaceState(In,In.state,null)}function EA(dn,In){var sx=In;if("ref"in In){sx={};for(var px in In)px!=="ref"&&(sx[px]=In[px])}if(dn=dn.defaultProps){sx===In&&(sx=ar({},sx));for(var mx in dn)sx[mx]===void 0&&(sx[mx]=dn[mx])}return sx}var NM=typeof reportError=="function"?reportError:function(dn){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var In=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof dn=="object"&&dn!==null&&typeof dn.message=="string"?String(dn.message):String(dn),error:dn});if(!window.dispatchEvent(In))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",dn);return}console.error(dn)};function aP(dn){NM(dn)}function oP(dn){console.error(dn)}function sP(dn){NM(dn)}function LM(dn,In){try{var sx=dn.onUncaughtError;sx(In.value,{componentStack:In.stack})}catch(px){setTimeout(function(){throw px})}}function lP(dn,In,sx){try{var px=dn.onCaughtError;px(sx.value,{componentStack:sx.stack,errorBoundary:In.tag===1?In.stateNode:null})}catch(mx){setTimeout(function(){throw mx})}}function mI(dn,In,sx){return sx=GT(sx),sx.tag=3,sx.payload={element:null},sx.callback=function(){LM(dn,In)},sx}function uP(dn){return dn=GT(dn),dn.tag=3,dn}function cP(dn,In,sx,px){var mx=sx.type.getDerivedStateFromError;if(typeof mx=="function"){var Ex=px.value;dn.payload=function(){return mx(Ex)},dn.callback=function(){lP(In,sx,px)}}var Rx=sx.stateNode;Rx!==null&&typeof Rx.componentDidCatch=="function"&&(dn.callback=function(){lP(In,sx,px),typeof mx!="function"&&(QT===null?QT=new Set([this]):QT.add(this));var qx=px.stack;this.componentDidCatch(px.value,{componentStack:qx!==null?qx:""})})}function jL(dn,In,sx,px,mx){if(sx.flags|=32768,px!==null&&typeof px=="object"&&typeof px.then=="function"){if(In=sx.alternate,In!==null&&EC(In,sx,mx,!0),sx=fT.current,sx!==null){switch(sx.tag){case 13:return _T===null?qI():sx.alternate===null&&yS===0&&(yS=3),sx.flags&=-257,sx.flags|=65536,sx.lanes=mx,px===HR?sx.flags|=16384:(In=sx.updateQueue,In===null?sx.updateQueue=new Set([px]):In.add(px),zI(dn,px,mx)),!1;case 22:return sx.flags|=65536,px===HR?sx.flags|=16384:(In=sx.updateQueue,In===null?(In={transitions:null,markerInstances:null,retryQueue:new Set([px])},sx.updateQueue=In):(sx=In.retryQueue,sx===null?In.retryQueue=new Set([px]):sx.add(px)),zI(dn,px,mx)),!1}throw Error(l(435,sx.tag))}return zI(dn,px,mx),qI(),!1}if(nS)return In=fT.current,In!==null?((In.flags&65536)===0&&(In.flags|=256),In.flags|=65536,In.lanes=mx,px!==kR&&(dn=Error(l(422),{cause:px}),_C(sT(dn,sx)))):(px!==kR&&(In=Error(l(423),{cause:px}),_C(sT(In,sx))),dn=dn.current.alternate,dn.flags|=65536,mx&=-mx,dn.lanes|=mx,px=sT(px,sx),mx=mI(dn.stateNode,px,mx),YR(dn,mx),yS!==4&&(yS=2)),!1;var Ex=Error(l(520),{cause:px});if(Ex=sT(Ex,sx),qC===null?qC=[Ex]:qC.push(Ex),yS!==4&&(yS=2),In===null)return!0;px=sT(px,sx),sx=In;do{switch(sx.tag){case 3:return sx.flags|=65536,dn=mx&-mx,sx.lanes|=dn,dn=mI(sx.stateNode,px,dn),YR(sx,dn),!1;case 1:if(In=sx.type,Ex=sx.stateNode,(sx.flags&128)===0&&(typeof In.getDerivedStateFromError=="function"||Ex!==null&&typeof Ex.componentDidCatch=="function"&&(QT===null||!QT.has(Ex))))return sx.flags|=65536,mx&=-mx,sx.lanes|=mx,mx=uP(mx),cP(mx,dn,sx,px),YR(sx,mx),!1}sx=sx.return}while(sx!==null);return!1}var fP=Error(l(461)),RS=!1;function $S(dn,In,sx,px){In.child=dn===null?tP(In,null,sx,px):jA(In,dn.child,sx,px)}function pP(dn,In,sx,px,mx){sx=sx.render;var Ex=In.ref;if("ref"in px){var Rx={};for(var qx in px)qx!=="ref"&&(Rx[qx]=px[qx])}else Rx=px;return yA(In),px=JR(dn,In,sx,Rx,Ex,mx),qx=eI(),dn!==null&&!RS?(tI(dn,In,mx),PT(dn,In,mx)):(nS&&qx&&$R(In),In.flags|=1,$S(dn,In,px,mx),In.child)}function dP(dn,In,sx,px,mx){if(dn===null){var Ex=sx.type;return typeof Ex=="function"&&!PR(Ex)&&Ex.defaultProps===void 0&&sx.compare===null?(In.tag=15,In.type=Ex,hP(dn,In,Ex,px,mx)):(dn=hM(sx.type,null,px,In,In.mode,mx),dn.ref=In.ref,dn.return=In,In.child=dn)}if(Ex=dn.child,!wI(dn,mx)){var Rx=Ex.memoizedProps;if(sx=sx.compare,sx=sx!==null?sx:mC,sx(Rx,px)&&dn.ref===In.ref)return PT(dn,In,mx)}return In.flags|=1,dn=AT(Ex,px),dn.ref=In.ref,dn.return=In,In.child=dn}function hP(dn,In,sx,px,mx){if(dn!==null){var Ex=dn.memoizedProps;if(mC(Ex,px)&&dn.ref===In.ref)if(RS=!1,In.pendingProps=px=Ex,wI(dn,mx))(dn.flags&131072)!==0&&(RS=!0);else return In.lanes=dn.lanes,PT(dn,In,mx)}return vI(dn,In,sx,px,mx)}function gP(dn,In,sx){var px=In.pendingProps,mx=px.children,Ex=dn!==null?dn.memoizedState:null;if(px.mode==="hidden"){if((In.flags&128)!==0){if(px=Ex!==null?Ex.baseLanes|sx:sx,dn!==null){for(mx=In.child=dn.child,Ex=0;mx!==null;)Ex=Ex|mx.lanes|mx.childLanes,mx=mx.sibling;In.childLanes=Ex&~px}else In.childLanes=0,In.child=null;return mP(dn,In,px,sx)}if((sx&536870912)!==0)In.memoizedState={baseLanes:0,cachePool:null},dn!==null&&xM(In,Ex!==null?Ex.cachePool:null),Ex!==null?dO(In,Ex):XR(),rP(In);else return In.lanes=In.childLanes=536870912,mP(dn,In,Ex!==null?Ex.baseLanes|sx:sx,sx)}else Ex!==null?(xM(In,Ex.cachePool),dO(In,Ex),jT(),In.memoizedState=null):(dn!==null&&xM(In,null),XR(),jT());return $S(dn,In,mx,sx),In.child}function mP(dn,In,sx,px){var mx=VR();return mx=mx===null?null:{parent:AS._currentValue,pool:mx},In.memoizedState={baseLanes:sx,cachePool:mx},dn!==null&&xM(In,null),XR(),rP(In),dn!==null&&EC(dn,In,px,!0),null}function $M(dn,In){var sx=In.ref;if(sx===null)dn!==null&&dn.ref!==null&&(In.flags|=4194816);else{if(typeof sx!="function"&&typeof sx!="object")throw Error(l(284));(dn===null||dn.ref!==sx)&&(In.flags|=4194816)}}function vI(dn,In,sx,px,mx){return yA(In),sx=JR(dn,In,sx,px,void 0,mx),px=eI(),dn!==null&&!RS?(tI(dn,In,mx),PT(dn,In,mx)):(nS&&px&&$R(In),In.flags|=1,$S(dn,In,sx,mx),In.child)}function vP(dn,In,sx,px,mx,Ex){return yA(In),In.updateQueue=null,sx=gO(In,px,sx,mx),hO(dn),px=eI(),dn!==null&&!RS?(tI(dn,In,Ex),PT(dn,In,Ex)):(nS&&px&&$R(In),In.flags|=1,$S(dn,In,sx,Ex),In.child)}function yP(dn,In,sx,px,mx){if(yA(In),In.stateNode===null){var Ex=$A,Rx=sx.contextType;typeof Rx=="object"&&Rx!==null&&(Ex=qS(Rx)),Ex=new sx(px,Ex),In.memoizedState=Ex.state!==null&&Ex.state!==void 0?Ex.state:null,Ex.updater=gI,In.stateNode=Ex,Ex._reactInternals=In,Ex=In.stateNode,Ex.props=px,Ex.state=In.memoizedState,Ex.refs={},jR(In),Rx=sx.contextType,Ex.context=typeof Rx=="object"&&Rx!==null?qS(Rx):$A,Ex.state=In.memoizedState,Rx=sx.getDerivedStateFromProps,typeof Rx=="function"&&(hI(In,sx,Rx,px),Ex.state=In.memoizedState),typeof sx.getDerivedStateFromProps=="function"||typeof Ex.getSnapshotBeforeUpdate=="function"||typeof Ex.UNSAFE_componentWillMount!="function"&&typeof Ex.componentWillMount!="function"||(Rx=Ex.state,typeof Ex.componentWillMount=="function"&&Ex.componentWillMount(),typeof Ex.UNSAFE_componentWillMount=="function"&&Ex.UNSAFE_componentWillMount(),Rx!==Ex.state&&gI.enqueueReplaceState(Ex,Ex.state,null),MC(In,px,Ex,mx),CC(),Ex.state=In.memoizedState),typeof Ex.componentDidMount=="function"&&(In.flags|=4194308),px=!0}else if(dn===null){Ex=In.stateNode;var qx=In.memoizedProps,Xx=EA(sx,qx);Ex.props=Xx;var uE=Ex.context,yE=sx.contextType;Rx=$A,typeof yE=="object"&&yE!==null&&(Rx=qS(yE));var SE=sx.getDerivedStateFromProps;yE=typeof SE=="function"||typeof Ex.getSnapshotBeforeUpdate=="function",qx=In.pendingProps!==qx,yE||typeof Ex.UNSAFE_componentWillReceiveProps!="function"&&typeof Ex.componentWillReceiveProps!="function"||(qx||uE!==Rx)&&iP(In,Ex,px,Rx),qT=!1;var fE=In.memoizedState;Ex.state=fE,MC(In,px,Ex,mx),CC(),uE=In.memoizedState,qx||fE!==uE||qT?(typeof SE=="function"&&(hI(In,sx,SE,px),uE=In.memoizedState),(Xx=qT||nP(In,sx,Xx,px,fE,uE,Rx))?(yE||typeof Ex.UNSAFE_componentWillMount!="function"&&typeof Ex.componentWillMount!="function"||(typeof Ex.componentWillMount=="function"&&Ex.componentWillMount(),typeof Ex.UNSAFE_componentWillMount=="function"&&Ex.UNSAFE_componentWillMount()),typeof Ex.componentDidMount=="function"&&(In.flags|=4194308)):(typeof Ex.componentDidMount=="function"&&(In.flags|=4194308),In.memoizedProps=px,In.memoizedState=uE),Ex.props=px,Ex.state=uE,Ex.context=Rx,px=Xx):(typeof Ex.componentDidMount=="function"&&(In.flags|=4194308),px=!1)}else{Ex=In.stateNode,ZR(dn,In),Rx=In.memoizedProps,yE=EA(sx,Rx),Ex.props=yE,SE=In.pendingProps,fE=Ex.context,uE=sx.contextType,Xx=$A,typeof uE=="object"&&uE!==null&&(Xx=qS(uE)),qx=sx.getDerivedStateFromProps,(uE=typeof qx=="function"||typeof Ex.getSnapshotBeforeUpdate=="function")||typeof Ex.UNSAFE_componentWillReceiveProps!="function"&&typeof Ex.componentWillReceiveProps!="function"||(Rx!==SE||fE!==Xx)&&iP(In,Ex,px,Xx),qT=!1,fE=In.memoizedState,Ex.state=fE,MC(In,px,Ex,mx),CC();var pE=In.memoizedState;Rx!==SE||fE!==pE||qT||dn!==null&&dn.dependencies!==null&&vM(dn.dependencies)?(typeof qx=="function"&&(hI(In,sx,qx,px),pE=In.memoizedState),(yE=qT||nP(In,sx,yE,px,fE,pE,Xx)||dn!==null&&dn.dependencies!==null&&vM(dn.dependencies))?(uE||typeof Ex.UNSAFE_componentWillUpdate!="function"&&typeof Ex.componentWillUpdate!="function"||(typeof Ex.componentWillUpdate=="function"&&Ex.componentWillUpdate(px,pE,Xx),typeof Ex.UNSAFE_componentWillUpdate=="function"&&Ex.UNSAFE_componentWillUpdate(px,pE,Xx)),typeof Ex.componentDidUpdate=="function"&&(In.flags|=4),typeof Ex.getSnapshotBeforeUpdate=="function"&&(In.flags|=1024)):(typeof Ex.componentDidUpdate!="function"||Rx===dn.memoizedProps&&fE===dn.memoizedState||(In.flags|=4),typeof Ex.getSnapshotBeforeUpdate!="function"||Rx===dn.memoizedProps&&fE===dn.memoizedState||(In.flags|=1024),In.memoizedProps=px,In.memoizedState=pE),Ex.props=px,Ex.state=pE,Ex.context=Xx,px=yE):(typeof Ex.componentDidUpdate!="function"||Rx===dn.memoizedProps&&fE===dn.memoizedState||(In.flags|=4),typeof Ex.getSnapshotBeforeUpdate!="function"||Rx===dn.memoizedProps&&fE===dn.memoizedState||(In.flags|=1024),px=!1)}return Ex=px,$M(dn,In),px=(In.flags&128)!==0,Ex||px?(Ex=In.stateNode,sx=px&&typeof sx.getDerivedStateFromError!="function"?null:Ex.render(),In.flags|=1,dn!==null&&px?(In.child=jA(In,dn.child,null,mx),In.child=jA(In,null,sx,mx)):$S(dn,In,sx,mx),In.memoizedState=Ex.state,dn=In.child):dn=PT(dn,In,mx),dn}function xP(dn,In,sx,px){return xC(),In.flags|=256,$S(dn,In,sx,px),In.child}var yI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xI(dn){return{baseLanes:dn,cachePool:aO()}}function _I(dn,In,sx){return dn=dn!==null?dn.childLanes&~sx:0,In&&(dn|=pT),dn}function _P(dn,In,sx){var px=In.pendingProps,mx=!1,Ex=(In.flags&128)!==0,Rx;if((Rx=Ex)||(Rx=dn!==null&&dn.memoizedState===null?!1:(CS.current&2)!==0),Rx&&(mx=!0,In.flags&=-129),Rx=(In.flags&32)!==0,In.flags&=-33,dn===null){if(nS){if(mx?HT(In):jT(),nS){var qx=vS,Xx;if(Xx=qx){e:{for(Xx=qx,qx=xT;Xx.nodeType!==8;){if(!qx){qx=null;break e}if(Xx=yT(Xx.nextSibling),Xx===null){qx=null;break e}}qx=Xx}qx!==null?(In.memoizedState={dehydrated:qx,treeContext:dA!==null?{id:CT,overflow:MT}:null,retryLane:536870912,hydrationErrors:null},Xx=JS(18,null,null,0),Xx.stateNode=qx,Xx.return=In,In.child=Xx,VS=In,vS=null,Xx=!0):Xx=!1}Xx||mA(In)}if(qx=In.memoizedState,qx!==null&&(qx=qx.dehydrated,qx!==null))return iD(qx)?In.lanes=32:In.lanes=536870912,null;OT(In)}return qx=px.children,px=px.fallback,mx?(jT(),mx=In.mode,qx=BM({mode:"hidden",children:qx},mx),px=pA(px,mx,sx,null),qx.return=In,px.return=In,qx.sibling=px,In.child=qx,mx=In.child,mx.memoizedState=xI(sx),mx.childLanes=_I(dn,Rx,sx),In.memoizedState=yI,px):(HT(In),EI(In,qx))}if(Xx=dn.memoizedState,Xx!==null&&(qx=Xx.dehydrated,qx!==null)){if(Ex)In.flags&256?(HT(In),In.flags&=-257,In=bI(dn,In,sx)):In.memoizedState!==null?(jT(),In.child=dn.child,In.flags|=128,In=null):(jT(),mx=px.fallback,qx=In.mode,px=BM({mode:"visible",children:px.children},qx),mx=pA(mx,qx,sx,null),mx.flags|=2,px.return=In,mx.return=In,px.sibling=mx,In.child=px,jA(In,dn.child,null,sx),px=In.child,px.memoizedState=xI(sx),px.childLanes=_I(dn,Rx,sx),In.memoizedState=yI,In=mx);else if(HT(In),iD(qx)){if(Rx=qx.nextSibling&&qx.nextSibling.dataset,Rx)var uE=Rx.dgst;Rx=uE,px=Error(l(419)),px.stack="",px.digest=Rx,_C({value:px,source:null,stack:null}),In=bI(dn,In,sx)}else if(RS||EC(dn,In,sx,!1),Rx=(sx&dn.childLanes)!==0,RS||Rx){if(Rx=fS,Rx!==null&&(px=sx&-sx,px=(px&42)!==0?1:jx(px),px=(px&(Rx.suspendedLanes|sx))!==0?0:px,px!==0&&px!==Xx.retryLane))throw Xx.retryLane=px,LA(dn,px),iT(Rx,dn,px),fP;qx.data==="$?"||qI(),In=bI(dn,In,sx)}else qx.data==="$?"?(In.flags|=192,In.child=dn.child,In=null):(dn=Xx.treeContext,vS=yT(qx.nextSibling),VS=In,nS=!0,gA=null,xT=!1,dn!==null&&(uT[cT++]=CT,uT[cT++]=MT,uT[cT++]=dA,CT=dn.id,MT=dn.overflow,dA=In),In=EI(In,px.children),In.flags|=4096);return In}return mx?(jT(),mx=px.fallback,qx=In.mode,Xx=dn.child,uE=Xx.sibling,px=AT(Xx,{mode:"hidden",children:px.children}),px.subtreeFlags=Xx.subtreeFlags&65011712,uE!==null?mx=AT(uE,mx):(mx=pA(mx,qx,sx,null),mx.flags|=2),mx.return=In,px.return=In,px.sibling=mx,In.child=px,px=mx,mx=In.child,qx=dn.child.memoizedState,qx===null?qx=xI(sx):(Xx=qx.cachePool,Xx!==null?(uE=AS._currentValue,Xx=Xx.parent!==uE?{parent:uE,pool:uE}:Xx):Xx=aO(),qx={baseLanes:qx.baseLanes|sx,cachePool:Xx}),mx.memoizedState=qx,mx.childLanes=_I(dn,Rx,sx),In.memoizedState=yI,px):(HT(In),sx=dn.child,dn=sx.sibling,sx=AT(sx,{mode:"visible",children:px.children}),sx.return=In,sx.sibling=null,dn!==null&&(Rx=In.deletions,Rx===null?(In.deletions=[dn],In.flags|=16):Rx.push(dn)),In.child=sx,In.memoizedState=null,sx)}function EI(dn,In){return In=BM({mode:"visible",children:In},dn.mode),In.return=dn,dn.child=In}function BM(dn,In){return dn=JS(22,dn,null,In),dn.lanes=0,dn.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},dn}function bI(dn,In,sx){return jA(In,dn.child,null,sx),dn=EI(In,In.pendingProps.children),dn.flags|=2,In.memoizedState=null,dn}function EP(dn,In,sx){dn.lanes|=In;var px=dn.alternate;px!==null&&(px.lanes|=In),UR(dn.return,In,sx)}function SI(dn,In,sx,px,mx){var Ex=dn.memoizedState;Ex===null?dn.memoizedState={isBackwards:In,rendering:null,renderingStartTime:0,last:px,tail:sx,tailMode:mx}:(Ex.isBackwards=In,Ex.rendering=null,Ex.renderingStartTime=0,Ex.last=px,Ex.tail=sx,Ex.tailMode=mx)}function bP(dn,In,sx){var px=In.pendingProps,mx=px.revealOrder,Ex=px.tail;if($S(dn,In,px.children,sx),px=CS.current,(px&2)!==0)px=px&1|2,In.flags|=128;else{if(dn!==null&&(dn.flags&128)!==0)e:for(dn=In.child;dn!==null;){if(dn.tag===13)dn.memoizedState!==null&&EP(dn,sx,In);else if(dn.tag===19)EP(dn,sx,In);else if(dn.child!==null){dn.child.return=dn,dn=dn.child;continue}if(dn===In)break e;for(;dn.sibling===null;){if(dn.return===null||dn.return===In)break e;dn=dn.return}dn.sibling.return=dn.return,dn=dn.sibling}px&=1}switch(Mx(CS,px),mx){case"forwards":for(sx=In.child,mx=null;sx!==null;)dn=sx.alternate,dn!==null&&PM(dn)===null&&(mx=sx),sx=sx.sibling;sx=mx,sx===null?(mx=In.child,In.child=null):(mx=sx.sibling,sx.sibling=null),SI(In,!1,mx,sx,Ex);break;case"backwards":for(sx=null,mx=In.child,In.child=null;mx!==null;){if(dn=mx.alternate,dn!==null&&PM(dn)===null){In.child=mx;break}dn=mx.sibling,mx.sibling=sx,sx=mx,mx=dn}SI(In,!0,sx,null,Ex);break;case"together":SI(In,!1,null,null,void 0);break;default:In.memoizedState=null}return In.child}function PT(dn,In,sx){if(dn!==null&&(In.dependencies=dn.dependencies),KT|=In.lanes,(sx&In.childLanes)===0)if(dn!==null){if(EC(dn,In,sx,!1),(sx&In.childLanes)===0)return null}else return null;if(dn!==null&&In.child!==dn.child)throw Error(l(153));if(In.child!==null){for(dn=In.child,sx=AT(dn,dn.pendingProps),In.child=sx,sx.return=In;dn.sibling!==null;)dn=dn.sibling,sx=sx.sibling=AT(dn,dn.pendingProps),sx.return=In;sx.sibling=null}return In.child}function wI(dn,In){return(dn.lanes&In)!==0?!0:(dn=dn.dependencies,!!(dn!==null&&vM(dn)))}function ZL(dn,In,sx){switch(In.tag){case 3:Gx(In,In.stateNode.containerInfo),UT(In,AS,dn.memoizedState.cache),xC();break;case 27:case 5:Hx(In);break;case 4:Gx(In,In.stateNode.containerInfo);break;case 10:UT(In,In.type,In.memoizedProps.value);break;case 13:var px=In.memoizedState;if(px!==null)return px.dehydrated!==null?(HT(In),In.flags|=128,null):(sx&In.child.childLanes)!==0?_P(dn,In,sx):(HT(In),dn=PT(dn,In,sx),dn!==null?dn.sibling:null);HT(In);break;case 19:var mx=(dn.flags&128)!==0;if(px=(sx&In.childLanes)!==0,px||(EC(dn,In,sx,!1),px=(sx&In.childLanes)!==0),mx){if(px)return bP(dn,In,sx);In.flags|=128}if(mx=In.memoizedState,mx!==null&&(mx.rendering=null,mx.tail=null,mx.lastEffect=null),Mx(CS,CS.current),px)break;return null;case 22:case 23:return In.lanes=0,gP(dn,In,sx);case 24:UT(In,AS,dn.memoizedState.cache)}return PT(dn,In,sx)}function SP(dn,In,sx){if(dn!==null)if(dn.memoizedProps!==In.pendingProps)RS=!0;else{if(!wI(dn,sx)&&(In.flags&128)===0)return RS=!1,ZL(dn,In,sx);RS=(dn.flags&131072)!==0}else RS=!1,nS&&(In.flags&1048576)!==0&&QD(In,mM,In.index);switch(In.lanes=0,In.tag){case 16:e:{dn=In.pendingProps;var px=In.elementType,mx=px._init;if(px=mx(px._payload),In.type=px,typeof px=="function")PR(px)?(dn=EA(px,dn),In.tag=1,In=yP(null,In,px,dn,sx)):(In.tag=0,In=vI(null,In,px,dn,sx));else{if(px!=null){if(mx=px.$$typeof,mx===ox){In.tag=11,In=pP(null,In,px,dn,sx);break e}else if(mx===dx){In.tag=14,In=dP(null,In,px,dn,sx);break e}}throw In=vx(px)||px,Error(l(306,In,""))}}return In;case 0:return vI(dn,In,In.type,In.pendingProps,sx);case 1:return px=In.type,mx=EA(px,In.pendingProps),yP(dn,In,px,mx,sx);case 3:e:{if(Gx(In,In.stateNode.containerInfo),dn===null)throw Error(l(387));px=In.pendingProps;var Ex=In.memoizedState;mx=Ex.element,ZR(dn,In),MC(In,px,null,sx);var Rx=In.memoizedState;if(px=Rx.cache,UT(In,AS,px),px!==Ex.cache&&qR(In,[AS],sx,!0),CC(),px=Rx.element,Ex.isDehydrated)if(Ex={element:px,isDehydrated:!1,cache:Rx.cache},In.updateQueue.baseState=Ex,In.memoizedState=Ex,In.flags&256){In=xP(dn,In,px,sx);break e}else if(px!==mx){mx=sT(Error(l(424)),In),_C(mx),In=xP(dn,In,px,sx);break e}else{switch(dn=In.stateNode.containerInfo,dn.nodeType){case 9:dn=dn.body;break;default:dn=dn.nodeName==="HTML"?dn.ownerDocument.body:dn}for(vS=yT(dn.firstChild),VS=In,nS=!0,gA=null,xT=!0,sx=tP(In,null,px,sx),In.child=sx;sx;)sx.flags=sx.flags&-3|4096,sx=sx.sibling}else{if(xC(),px===mx){In=PT(dn,In,sx);break e}$S(dn,In,px,sx)}In=In.child}return In;case 26:return $M(dn,In),dn===null?(sx=CN(In.type,null,In.pendingProps,null))?In.memoizedState=sx:nS||(sx=In.type,dn=In.pendingProps,px=KM(Lx.current).createElement(sx),px[NE]=In,px[$E]=dn,kS(px,sx,dn),qE(px),In.stateNode=px):In.memoizedState=CN(In.type,dn.memoizedProps,In.pendingProps,dn.memoizedState),null;case 27:return Hx(In),dn===null&&nS&&(px=In.stateNode=wN(In.type,In.pendingProps,Lx.current),VS=In,xT=!0,mx=vS,tA(In.type)?(aD=mx,vS=yT(px.firstChild)):vS=mx),$S(dn,In,In.pendingProps.children,sx),$M(dn,In),dn===null&&(In.flags|=4194304),In.child;case 5:return dn===null&&nS&&((mx=px=vS)&&(px=E$(px,In.type,In.pendingProps,xT),px!==null?(In.stateNode=px,VS=In,vS=yT(px.firstChild),xT=!1,mx=!0):mx=!1),mx||mA(In)),Hx(In),mx=In.type,Ex=In.pendingProps,Rx=dn!==null?dn.memoizedProps:null,px=Ex.children,tD(mx,Ex)?px=null:Rx!==null&&tD(mx,Rx)&&(In.flags|=32),In.memoizedState!==null&&(mx=JR(dn,In,FL,null,null,sx),XC._currentValue=mx),$M(dn,In),$S(dn,In,px,sx),In.child;case 6:return dn===null&&nS&&((dn=sx=vS)&&(sx=b$(sx,In.pendingProps,xT),sx!==null?(In.stateNode=sx,VS=In,vS=null,dn=!0):dn=!1),dn||mA(In)),null;case 13:return _P(dn,In,sx);case 4:return Gx(In,In.stateNode.containerInfo),px=In.pendingProps,dn===null?In.child=jA(In,null,px,sx):$S(dn,In,px,sx),In.child;case 11:return pP(dn,In,In.type,In.pendingProps,sx);case 7:return $S(dn,In,In.pendingProps,sx),In.child;case 8:return $S(dn,In,In.pendingProps.children,sx),In.child;case 12:return $S(dn,In,In.pendingProps.children,sx),In.child;case 10:return px=In.pendingProps,UT(In,In.type,px.value),$S(dn,In,px.children,sx),In.child;case 9:return mx=In.type._context,px=In.pendingProps.children,yA(In),mx=qS(mx),px=px(mx),In.flags|=1,$S(dn,In,px,sx),In.child;case 14:return dP(dn,In,In.type,In.pendingProps,sx);case 15:return hP(dn,In,In.type,In.pendingProps,sx);case 19:return bP(dn,In,sx);case 31:return px=In.pendingProps,sx=In.mode,px={mode:px.mode,children:px.children},dn===null?(sx=BM(px,sx),sx.ref=In.ref,In.child=sx,sx.return=In,In=sx):(sx=AT(dn.child,px),sx.ref=In.ref,In.child=sx,sx.return=In,In=sx),In;case 22:return gP(dn,In,sx);case 24:return yA(In),px=qS(AS),dn===null?(mx=VR(),mx===null&&(mx=fS,Ex=GR(),mx.pooledCache=Ex,Ex.refCount++,Ex!==null&&(mx.pooledCacheLanes|=sx),mx=Ex),In.memoizedState={parent:px,cache:mx},jR(In),UT(In,AS,mx)):((dn.lanes&sx)!==0&&(ZR(dn,In),MC(In,null,null,sx),CC()),mx=dn.memoizedState,Ex=In.memoizedState,mx.parent!==px?(mx={parent:px,cache:px},In.memoizedState=mx,In.lanes===0&&(In.memoizedState=In.updateQueue.baseState=mx),UT(In,AS,px)):(px=Ex.cache,UT(In,AS,px),px!==mx.cache&&qR(In,[AS],sx,!0))),$S(dn,In,In.pendingProps.children,sx),In.child;case 29:throw In.pendingProps}throw Error(l(156,In.tag))}function NT(dn){dn.flags|=4}function wP(dn,In){if(In.type!=="stylesheet"||(In.state.loading&4)!==0)dn.flags&=-16777217;else if(dn.flags|=16777216,!ON(In)){if(In=fT.current,In!==null&&((JE&4194048)===JE?_T!==null:(JE&62914560)!==JE&&(JE&536870912)===0||In!==_T))throw TC=HR,oO;dn.flags|=8192}}function kM(dn,In){In!==null&&(dn.flags|=4),dn.flags&16384&&(In=dn.tag!==22?wE():536870912,dn.lanes|=In,XA|=In)}function LC(dn,In){if(!nS)switch(dn.tailMode){case"hidden":In=dn.tail;for(var sx=null;In!==null;)In.alternate!==null&&(sx=In),In=In.sibling;sx===null?dn.tail=null:sx.sibling=null;break;case"collapsed":sx=dn.tail;for(var px=null;sx!==null;)sx.alternate!==null&&(px=sx),sx=sx.sibling;px===null?In||dn.tail===null?dn.tail=null:dn.tail.sibling=null:px.sibling=null}}function gS(dn){var In=dn.alternate!==null&&dn.alternate.child===dn.child,sx=0,px=0;if(In)for(var mx=dn.child;mx!==null;)sx|=mx.lanes|mx.childLanes,px|=mx.subtreeFlags&65011712,px|=mx.flags&65011712,mx.return=dn,mx=mx.sibling;else for(mx=dn.child;mx!==null;)sx|=mx.lanes|mx.childLanes,px|=mx.subtreeFlags,px|=mx.flags,mx.return=dn,mx=mx.sibling;return dn.subtreeFlags|=px,dn.childLanes=sx,In}function YL(dn,In,sx){var px=In.pendingProps;switch(BR(In),In.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gS(In),null;case 1:return gS(In),null;case 3:return sx=In.stateNode,px=null,dn!==null&&(px=dn.memoizedState.cache),In.memoizedState.cache!==px&&(In.flags|=2048),IT(AS),Ux(),sx.pendingContext&&(sx.context=sx.pendingContext,sx.pendingContext=null),(dn===null||dn.child===null)&&(yC(In)?NT(In):dn===null||dn.memoizedState.isDehydrated&&(In.flags&256)===0||(In.flags|=1024,tO())),gS(In),null;case 26:return sx=In.memoizedState,dn===null?(NT(In),sx!==null?(gS(In),wP(In,sx)):(gS(In),In.flags&=-16777217)):sx?sx!==dn.memoizedState?(NT(In),gS(In),wP(In,sx)):(gS(In),In.flags&=-16777217):(dn.memoizedProps!==px&&NT(In),gS(In),In.flags&=-16777217),null;case 27:Vx(In),sx=Lx.current;var mx=In.type;if(dn!==null&&In.stateNode!=null)dn.memoizedProps!==px&&NT(In);else{if(!px){if(In.stateNode===null)throw Error(l(166));return gS(In),null}dn=Dx.current,yC(In)?JD(In):(dn=wN(mx,px,sx),In.stateNode=dn,NT(In))}return gS(In),null;case 5:if(Vx(In),sx=In.type,dn!==null&&In.stateNode!=null)dn.memoizedProps!==px&&NT(In);else{if(!px){if(In.stateNode===null)throw Error(l(166));return gS(In),null}if(dn=Dx.current,yC(In))JD(In);else{switch(mx=KM(Lx.current),dn){case 1:dn=mx.createElementNS("http://www.w3.org/2000/svg",sx);break;case 2:dn=mx.createElementNS("http://www.w3.org/1998/Math/MathML",sx);break;default:switch(sx){case"svg":dn=mx.createElementNS("http://www.w3.org/2000/svg",sx);break;case"math":dn=mx.createElementNS("http://www.w3.org/1998/Math/MathML",sx);break;case"script":dn=mx.createElement("div"),dn.innerHTML="<script><\/script>",dn=dn.removeChild(dn.firstChild);break;case"select":dn=typeof px.is=="string"?mx.createElement("select",{is:px.is}):mx.createElement("select"),px.multiple?dn.multiple=!0:px.size&&(dn.size=px.size);break;default:dn=typeof px.is=="string"?mx.createElement(sx,{is:px.is}):mx.createElement(sx)}}dn[NE]=In,dn[$E]=px;e:for(mx=In.child;mx!==null;){if(mx.tag===5||mx.tag===6)dn.appendChild(mx.stateNode);else if(mx.tag!==4&&mx.tag!==27&&mx.child!==null){mx.child.return=mx,mx=mx.child;continue}if(mx===In)break e;for(;mx.sibling===null;){if(mx.return===null||mx.return===In)break e;mx=mx.return}mx.sibling.return=mx.return,mx=mx.sibling}In.stateNode=dn;e:switch(kS(dn,sx,px),sx){case"button":case"input":case"select":case"textarea":dn=!!px.autoFocus;break e;case"img":dn=!0;break e;default:dn=!1}dn&&NT(In)}}return gS(In),In.flags&=-16777217,null;case 6:if(dn&&In.stateNode!=null)dn.memoizedProps!==px&&NT(In);else{if(typeof px!="string"&&In.stateNode===null)throw Error(l(166));if(dn=Lx.current,yC(In)){if(dn=In.stateNode,sx=In.memoizedProps,px=null,mx=VS,mx!==null)switch(mx.tag){case 27:case 5:px=mx.memoizedProps}dn[NE]=In,dn=!!(dn.nodeValue===sx||px!==null&&px.suppressHydrationWarning===!0||vN(dn.nodeValue,sx)),dn||mA(In)}else dn=KM(dn).createTextNode(px),dn[NE]=In,In.stateNode=dn}return gS(In),null;case 13:if(px=In.memoizedState,dn===null||dn.memoizedState!==null&&dn.memoizedState.dehydrated!==null){if(mx=yC(In),px!==null&&px.dehydrated!==null){if(dn===null){if(!mx)throw Error(l(318));if(mx=In.memoizedState,mx=mx!==null?mx.dehydrated:null,!mx)throw Error(l(317));mx[NE]=In}else xC(),(In.flags&128)===0&&(In.memoizedState=null),In.flags|=4;gS(In),mx=!1}else mx=tO(),dn!==null&&dn.memoizedState!==null&&(dn.memoizedState.hydrationErrors=mx),mx=!0;if(!mx)return In.flags&256?(OT(In),In):(OT(In),null)}if(OT(In),(In.flags&128)!==0)return In.lanes=sx,In;if(sx=px!==null,dn=dn!==null&&dn.memoizedState!==null,sx){px=In.child,mx=null,px.alternate!==null&&px.alternate.memoizedState!==null&&px.alternate.memoizedState.cachePool!==null&&(mx=px.alternate.memoizedState.cachePool.pool);var Ex=null;px.memoizedState!==null&&px.memoizedState.cachePool!==null&&(Ex=px.memoizedState.cachePool.pool),Ex!==mx&&(px.flags|=2048)}return sx!==dn&&sx&&(In.child.flags|=8192),kM(In,In.updateQueue),gS(In),null;case 4:return Ux(),dn===null&&XI(In.stateNode.containerInfo),gS(In),null;case 10:return IT(In.type),gS(In),null;case 19:if(Fx(CS),mx=In.memoizedState,mx===null)return gS(In),null;if(px=(In.flags&128)!==0,Ex=mx.rendering,Ex===null)if(px)LC(mx,!1);else{if(yS!==0||dn!==null&&(dn.flags&128)!==0)for(dn=In.child;dn!==null;){if(Ex=PM(dn),Ex!==null){for(In.flags|=128,LC(mx,!1),dn=Ex.updateQueue,In.updateQueue=dn,kM(In,dn),In.subtreeFlags=0,dn=sx,sx=In.child;sx!==null;)KD(sx,dn),sx=sx.sibling;return Mx(CS,CS.current&1|2),In.child}dn=dn.sibling}mx.tail!==null&&iE()>qM&&(In.flags|=128,px=!0,LC(mx,!1),In.lanes=4194304)}else{if(!px)if(dn=PM(Ex),dn!==null){if(In.flags|=128,px=!0,dn=dn.updateQueue,In.updateQueue=dn,kM(In,dn),LC(mx,!0),mx.tail===null&&mx.tailMode==="hidden"&&!Ex.alternate&&!nS)return gS(In),null}else 2*iE()-mx.renderingStartTime>qM&&sx!==536870912&&(In.flags|=128,px=!0,LC(mx,!1),In.lanes=4194304);mx.isBackwards?(Ex.sibling=In.child,In.child=Ex):(dn=mx.last,dn!==null?dn.sibling=Ex:In.child=Ex,mx.last=Ex)}return mx.tail!==null?(In=mx.tail,mx.rendering=In,mx.tail=In.sibling,mx.renderingStartTime=iE(),In.sibling=null,dn=CS.current,Mx(CS,px?dn&1|2:dn&1),In):(gS(In),null);case 22:case 23:return OT(In),KR(),px=In.memoizedState!==null,dn!==null?dn.memoizedState!==null!==px&&(In.flags|=8192):px&&(In.flags|=8192),px?(sx&536870912)!==0&&(In.flags&128)===0&&(gS(In),In.subtreeFlags&6&&(In.flags|=8192)):gS(In),sx=In.updateQueue,sx!==null&&kM(In,sx.retryQueue),sx=null,dn!==null&&dn.memoizedState!==null&&dn.memoizedState.cachePool!==null&&(sx=dn.memoizedState.cachePool.pool),px=null,In.memoizedState!==null&&In.memoizedState.cachePool!==null&&(px=In.memoizedState.cachePool.pool),px!==sx&&(In.flags|=2048),dn!==null&&Fx(xA),null;case 24:return sx=null,dn!==null&&(sx=dn.memoizedState.cache),In.memoizedState.cache!==sx&&(In.flags|=2048),IT(AS),gS(In),null;case 25:return null;case 30:return null}throw Error(l(156,In.tag))}function WL(dn,In){switch(BR(In),In.tag){case 1:return dn=In.flags,dn&65536?(In.flags=dn&-65537|128,In):null;case 3:return IT(AS),Ux(),dn=In.flags,(dn&65536)!==0&&(dn&128)===0?(In.flags=dn&-65537|128,In):null;case 26:case 27:case 5:return Vx(In),null;case 13:if(OT(In),dn=In.memoizedState,dn!==null&&dn.dehydrated!==null){if(In.alternate===null)throw Error(l(340));xC()}return dn=In.flags,dn&65536?(In.flags=dn&-65537|128,In):null;case 19:return Fx(CS),null;case 4:return Ux(),null;case 10:return IT(In.type),null;case 22:case 23:return OT(In),KR(),dn!==null&&Fx(xA),dn=In.flags,dn&65536?(In.flags=dn&-65537|128,In):null;case 24:return IT(AS),null;case 25:return null;default:return null}}function TP(dn,In){switch(BR(In),In.tag){case 3:IT(AS),Ux();break;case 26:case 27:case 5:Vx(In);break;case 4:Ux();break;case 13:OT(In);break;case 19:Fx(CS);break;case 10:IT(In.type);break;case 22:case 23:OT(In),KR(),dn!==null&&Fx(xA);break;case 24:IT(AS)}}function $C(dn,In){try{var sx=In.updateQueue,px=sx!==null?sx.lastEffect:null;if(px!==null){var mx=px.next;sx=mx;do{if((sx.tag&dn)===dn){px=void 0;var Ex=sx.create,Rx=sx.inst;px=Ex(),Rx.destroy=px}sx=sx.next}while(sx!==mx)}}catch(qx){cS(In,In.return,qx)}}function ZT(dn,In,sx){try{var px=In.updateQueue,mx=px!==null?px.lastEffect:null;if(mx!==null){var Ex=mx.next;px=Ex;do{if((px.tag&dn)===dn){var Rx=px.inst,qx=Rx.destroy;if(qx!==void 0){Rx.destroy=void 0,mx=In;var Xx=sx,uE=qx;try{uE()}catch(yE){cS(mx,Xx,yE)}}}px=px.next}while(px!==Ex)}}catch(yE){cS(In,In.return,yE)}}function AP(dn){var In=dn.updateQueue;if(In!==null){var sx=dn.stateNode;try{pO(In,sx)}catch(px){cS(dn,dn.return,px)}}}function CP(dn,In,sx){sx.props=EA(dn.type,dn.memoizedProps),sx.state=dn.memoizedState;try{sx.componentWillUnmount()}catch(px){cS(dn,In,px)}}function BC(dn,In){try{var sx=dn.ref;if(sx!==null){switch(dn.tag){case 26:case 27:case 5:var px=dn.stateNode;break;case 30:px=dn.stateNode;break;default:px=dn.stateNode}typeof sx=="function"?dn.refCleanup=sx(px):sx.current=px}}catch(mx){cS(dn,In,mx)}}function ET(dn,In){var sx=dn.ref,px=dn.refCleanup;if(sx!==null)if(typeof px=="function")try{px()}catch(mx){cS(dn,In,mx)}finally{dn.refCleanup=null,dn=dn.alternate,dn!=null&&(dn.refCleanup=null)}else if(typeof sx=="function")try{sx(null)}catch(mx){cS(dn,In,mx)}else sx.current=null}function MP(dn){var In=dn.type,sx=dn.memoizedProps,px=dn.stateNode;try{e:switch(In){case"button":case"input":case"select":case"textarea":sx.autoFocus&&px.focus();break e;case"img":sx.src?px.src=sx.src:sx.srcSet&&(px.srcset=sx.srcSet)}}catch(mx){cS(dn,dn.return,mx)}}function TI(dn,In,sx){try{var px=dn.stateNode;m$(px,dn.type,sx,In),px[$E]=In}catch(mx){cS(dn,dn.return,mx)}}function RP(dn){return dn.tag===5||dn.tag===3||dn.tag===26||dn.tag===27&&tA(dn.type)||dn.tag===4}function AI(dn){e:for(;;){for(;dn.sibling===null;){if(dn.return===null||RP(dn.return))return null;dn=dn.return}for(dn.sibling.return=dn.return,dn=dn.sibling;dn.tag!==5&&dn.tag!==6&&dn.tag!==18;){if(dn.tag===27&&tA(dn.type)||dn.flags&2||dn.child===null||dn.tag===4)continue e;dn.child.return=dn,dn=dn.child}if(!(dn.flags&2))return dn.stateNode}}function CI(dn,In,sx){var px=dn.tag;if(px===5||px===6)dn=dn.stateNode,In?(sx.nodeType===9?sx.body:sx.nodeName==="HTML"?sx.ownerDocument.body:sx).insertBefore(dn,In):(In=sx.nodeType===9?sx.body:sx.nodeName==="HTML"?sx.ownerDocument.body:sx,In.appendChild(dn),sx=sx._reactRootContainer,sx!=null||In.onclick!==null||(In.onclick=XM));else if(px!==4&&(px===27&&tA(dn.type)&&(sx=dn.stateNode,In=null),dn=dn.child,dn!==null))for(CI(dn,In,sx),dn=dn.sibling;dn!==null;)CI(dn,In,sx),dn=dn.sibling}function FM(dn,In,sx){var px=dn.tag;if(px===5||px===6)dn=dn.stateNode,In?sx.insertBefore(dn,In):sx.appendChild(dn);else if(px!==4&&(px===27&&tA(dn.type)&&(sx=dn.stateNode),dn=dn.child,dn!==null))for(FM(dn,In,sx),dn=dn.sibling;dn!==null;)FM(dn,In,sx),dn=dn.sibling}function IP(dn){var In=dn.stateNode,sx=dn.memoizedProps;try{for(var px=dn.type,mx=In.attributes;mx.length;)In.removeAttributeNode(mx[0]);kS(In,px,sx),In[NE]=dn,In[$E]=sx}catch(Ex){cS(dn,dn.return,Ex)}}var LT=!1,ES=!1,MI=!1,DP=typeof WeakSet=="function"?WeakSet:Set,IS=null;function XL(dn,In){if(dn=dn.containerInfo,JI=nR,dn=qD(dn),TR(dn)){if("selectionStart"in dn)var sx={start:dn.selectionStart,end:dn.selectionEnd};else e:{sx=(sx=dn.ownerDocument)&&sx.defaultView||window;var px=sx.getSelection&&sx.getSelection();if(px&&px.rangeCount!==0){sx=px.anchorNode;var mx=px.anchorOffset,Ex=px.focusNode;px=px.focusOffset;try{sx.nodeType,Ex.nodeType}catch{sx=null;break e}var Rx=0,qx=-1,Xx=-1,uE=0,yE=0,SE=dn,fE=null;t:for(;;){for(var pE;SE!==sx||mx!==0&&SE.nodeType!==3||(qx=Rx+mx),SE!==Ex||px!==0&&SE.nodeType!==3||(Xx=Rx+px),SE.nodeType===3&&(Rx+=SE.nodeValue.length),(pE=SE.firstChild)!==null;)fE=SE,SE=pE;for(;;){if(SE===dn)break t;if(fE===sx&&++uE===mx&&(qx=Rx),fE===Ex&&++yE===px&&(Xx=Rx),(pE=SE.nextSibling)!==null)break;SE=fE,fE=SE.parentNode}SE=pE}sx=qx===-1||Xx===-1?null:{start:qx,end:Xx}}else sx=null}sx=sx||{start:0,end:0}}else sx=null;for(eD={focusedElem:dn,selectionRange:sx},nR=!1,IS=In;IS!==null;)if(In=IS,dn=In.child,(In.subtreeFlags&1024)!==0&&dn!==null)dn.return=In,IS=dn;else for(;IS!==null;){switch(In=IS,Ex=In.alternate,dn=In.flags,In.tag){case 0:break;case 11:case 15:break;case 1:if((dn&1024)!==0&&Ex!==null){dn=void 0,sx=In,mx=Ex.memoizedProps,Ex=Ex.memoizedState,px=sx.stateNode;try{var VE=EA(sx.type,mx,sx.elementType===sx.type);dn=px.getSnapshotBeforeUpdate(VE,Ex),px.__reactInternalSnapshotBeforeUpdate=dn}catch(GE){cS(sx,sx.return,GE)}}break;case 3:if((dn&1024)!==0){if(dn=In.stateNode.containerInfo,sx=dn.nodeType,sx===9)nD(dn);else if(sx===1)switch(dn.nodeName){case"HEAD":case"HTML":case"BODY":nD(dn);break;default:dn.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((dn&1024)!==0)throw Error(l(163))}if(dn=In.sibling,dn!==null){dn.return=In.return,IS=dn;break}IS=In.return}}function OP(dn,In,sx){var px=sx.flags;switch(sx.tag){case 0:case 11:case 15:YT(dn,sx),px&4&&$C(5,sx);break;case 1:if(YT(dn,sx),px&4)if(dn=sx.stateNode,In===null)try{dn.componentDidMount()}catch(Rx){cS(sx,sx.return,Rx)}else{var mx=EA(sx.type,In.memoizedProps);In=In.memoizedState;try{dn.componentDidUpdate(mx,In,dn.__reactInternalSnapshotBeforeUpdate)}catch(Rx){cS(sx,sx.return,Rx)}}px&64&&AP(sx),px&512&&BC(sx,sx.return);break;case 3:if(YT(dn,sx),px&64&&(dn=sx.updateQueue,dn!==null)){if(In=null,sx.child!==null)switch(sx.child.tag){case 27:case 5:In=sx.child.stateNode;break;case 1:In=sx.child.stateNode}try{pO(dn,In)}catch(Rx){cS(sx,sx.return,Rx)}}break;case 27:In===null&&px&4&&IP(sx);case 26:case 5:YT(dn,sx),In===null&&px&4&&MP(sx),px&512&&BC(sx,sx.return);break;case 12:YT(dn,sx);break;case 13:YT(dn,sx),px&4&&LP(dn,sx),px&64&&(dn=sx.memoizedState,dn!==null&&(dn=dn.dehydrated,dn!==null&&(sx=a$.bind(null,sx),S$(dn,sx))));break;case 22:if(px=sx.memoizedState!==null||LT,!px){In=In!==null&&In.memoizedState!==null||ES,mx=LT;var Ex=ES;LT=px,(ES=In)&&!Ex?WT(dn,sx,(sx.subtreeFlags&8772)!==0):YT(dn,sx),LT=mx,ES=Ex}break;case 30:break;default:YT(dn,sx)}}function PP(dn){var In=dn.alternate;In!==null&&(dn.alternate=null,PP(In)),dn.child=null,dn.deletions=null,dn.sibling=null,dn.tag===5&&(In=dn.stateNode,In!==null&&FS(In)),dn.stateNode=null,dn.return=null,dn.dependencies=null,dn.memoizedProps=null,dn.memoizedState=null,dn.pendingProps=null,dn.stateNode=null,dn.updateQueue=null}var hS=null,WS=!1;function $T(dn,In,sx){for(sx=sx.child;sx!==null;)NP(dn,In,sx),sx=sx.sibling}function NP(dn,In,sx){if(Bx&&typeof Bx.onCommitFiberUnmount=="function")try{Bx.onCommitFiberUnmount(Ix,sx)}catch{}switch(sx.tag){case 26:ES||ET(sx,In),$T(dn,In,sx),sx.memoizedState?sx.memoizedState.count--:sx.stateNode&&(sx=sx.stateNode,sx.parentNode.removeChild(sx));break;case 27:ES||ET(sx,In);var px=hS,mx=WS;tA(sx.type)&&(hS=sx.stateNode,WS=!1),$T(dn,In,sx),jC(sx.stateNode),hS=px,WS=mx;break;case 5:ES||ET(sx,In);case 6:if(px=hS,mx=WS,hS=null,$T(dn,In,sx),hS=px,WS=mx,hS!==null)if(WS)try{(hS.nodeType===9?hS.body:hS.nodeName==="HTML"?hS.ownerDocument.body:hS).removeChild(sx.stateNode)}catch(Ex){cS(sx,In,Ex)}else try{hS.removeChild(sx.stateNode)}catch(Ex){cS(sx,In,Ex)}break;case 18:hS!==null&&(WS?(dn=hS,bN(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn,sx.stateNode),eM(dn)):bN(hS,sx.stateNode));break;case 4:px=hS,mx=WS,hS=sx.stateNode.containerInfo,WS=!0,$T(dn,In,sx),hS=px,WS=mx;break;case 0:case 11:case 14:case 15:ES||ZT(2,sx,In),ES||ZT(4,sx,In),$T(dn,In,sx);break;case 1:ES||(ET(sx,In),px=sx.stateNode,typeof px.componentWillUnmount=="function"&&CP(sx,In,px)),$T(dn,In,sx);break;case 21:$T(dn,In,sx);break;case 22:ES=(px=ES)||sx.memoizedState!==null,$T(dn,In,sx),ES=px;break;default:$T(dn,In,sx)}}function LP(dn,In){if(In.memoizedState===null&&(dn=In.alternate,dn!==null&&(dn=dn.memoizedState,dn!==null&&(dn=dn.dehydrated,dn!==null))))try{eM(dn)}catch(sx){cS(In,In.return,sx)}}function KL(dn){switch(dn.tag){case 13:case 19:var In=dn.stateNode;return In===null&&(In=dn.stateNode=new DP),In;case 22:return dn=dn.stateNode,In=dn._retryCache,In===null&&(In=dn._retryCache=new DP),In;default:throw Error(l(435,dn.tag))}}function RI(dn,In){var sx=KL(dn);In.forEach(function(px){var mx=o$.bind(null,dn,px);sx.has(px)||(sx.add(px),px.then(mx,mx))})}function eT(dn,In){var sx=In.deletions;if(sx!==null)for(var px=0;px<sx.length;px++){var mx=sx[px],Ex=dn,Rx=In,qx=Rx;e:for(;qx!==null;){switch(qx.tag){case 27:if(tA(qx.type)){hS=qx.stateNode,WS=!1;break e}break;case 5:hS=qx.stateNode,WS=!1;break e;case 3:case 4:hS=qx.stateNode.containerInfo,WS=!0;break e}qx=qx.return}if(hS===null)throw Error(l(160));NP(Ex,Rx,mx),hS=null,WS=!1,Ex=mx.alternate,Ex!==null&&(Ex.return=null),mx.return=null}if(In.subtreeFlags&13878)for(In=In.child;In!==null;)$P(In,dn),In=In.sibling}var vT=null;function $P(dn,In){var sx=dn.alternate,px=dn.flags;switch(dn.tag){case 0:case 11:case 14:case 15:eT(In,dn),tT(dn),px&4&&(ZT(3,dn,dn.return),$C(3,dn),ZT(5,dn,dn.return));break;case 1:eT(In,dn),tT(dn),px&512&&(ES||sx===null||ET(sx,sx.return)),px&64&&LT&&(dn=dn.updateQueue,dn!==null&&(px=dn.callbacks,px!==null&&(sx=dn.shared.hiddenCallbacks,dn.shared.hiddenCallbacks=sx===null?px:sx.concat(px))));break;case 26:var mx=vT;if(eT(In,dn),tT(dn),px&512&&(ES||sx===null||ET(sx,sx.return)),px&4){var Ex=sx!==null?sx.memoizedState:null;if(px=dn.memoizedState,sx===null)if(px===null)if(dn.stateNode===null){e:{px=dn.type,sx=dn.memoizedProps,mx=mx.ownerDocument||mx;t:switch(px){case"title":Ex=mx.getElementsByTagName("title")[0],(!Ex||Ex[pS]||Ex[NE]||Ex.namespaceURI==="http://www.w3.org/2000/svg"||Ex.hasAttribute("itemprop"))&&(Ex=mx.createElement(px),mx.head.insertBefore(Ex,mx.querySelector("head > title"))),kS(Ex,px,sx),Ex[NE]=dn,qE(Ex),px=Ex;break e;case"link":var Rx=IN("link","href",mx).get(px+(sx.href||""));if(Rx){for(var qx=0;qx<Rx.length;qx++)if(Ex=Rx[qx],Ex.getAttribute("href")===(sx.href==null||sx.href===""?null:sx.href)&&Ex.getAttribute("rel")===(sx.rel==null?null:sx.rel)&&Ex.getAttribute("title")===(sx.title==null?null:sx.title)&&Ex.getAttribute("crossorigin")===(sx.crossOrigin==null?null:sx.crossOrigin)){Rx.splice(qx,1);break t}}Ex=mx.createElement(px),kS(Ex,px,sx),mx.head.appendChild(Ex);break;case"meta":if(Rx=IN("meta","content",mx).get(px+(sx.content||""))){for(qx=0;qx<Rx.length;qx++)if(Ex=Rx[qx],Ex.getAttribute("content")===(sx.content==null?null:""+sx.content)&&Ex.getAttribute("name")===(sx.name==null?null:sx.name)&&Ex.getAttribute("property")===(sx.property==null?null:sx.property)&&Ex.getAttribute("http-equiv")===(sx.httpEquiv==null?null:sx.httpEquiv)&&Ex.getAttribute("charset")===(sx.charSet==null?null:sx.charSet)){Rx.splice(qx,1);break t}}Ex=mx.createElement(px),kS(Ex,px,sx),mx.head.appendChild(Ex);break;default:throw Error(l(468,px))}Ex[NE]=dn,qE(Ex),px=Ex}dn.stateNode=px}else DN(mx,dn.type,dn.stateNode);else dn.stateNode=RN(mx,px,dn.memoizedProps);else Ex!==px?(Ex===null?sx.stateNode!==null&&(sx=sx.stateNode,sx.parentNode.removeChild(sx)):Ex.count--,px===null?DN(mx,dn.type,dn.stateNode):RN(mx,px,dn.memoizedProps)):px===null&&dn.stateNode!==null&&TI(dn,dn.memoizedProps,sx.memoizedProps)}break;case 27:eT(In,dn),tT(dn),px&512&&(ES||sx===null||ET(sx,sx.return)),sx!==null&&px&4&&TI(dn,dn.memoizedProps,sx.memoizedProps);break;case 5:if(eT(In,dn),tT(dn),px&512&&(ES||sx===null||ET(sx,sx.return)),dn.flags&32){mx=dn.stateNode;try{MA(mx,"")}catch(pE){cS(dn,dn.return,pE)}}px&4&&dn.stateNode!=null&&(mx=dn.memoizedProps,TI(dn,mx,sx!==null?sx.memoizedProps:mx)),px&1024&&(MI=!0);break;case 6:if(eT(In,dn),tT(dn),px&4){if(dn.stateNode===null)throw Error(l(162));px=dn.memoizedProps,sx=dn.stateNode;try{sx.nodeValue=px}catch(pE){cS(dn,dn.return,pE)}}break;case 3:if(eR=null,mx=vT,vT=QM(In.containerInfo),eT(In,dn),vT=mx,tT(dn),px&4&&sx!==null&&sx.memoizedState.isDehydrated)try{eM(In.containerInfo)}catch(pE){cS(dn,dn.return,pE)}MI&&(MI=!1,BP(dn));break;case 4:px=vT,vT=QM(dn.stateNode.containerInfo),eT(In,dn),tT(dn),vT=px;break;case 12:eT(In,dn),tT(dn);break;case 13:eT(In,dn),tT(dn),dn.child.flags&8192&&dn.memoizedState!==null!=(sx!==null&&sx.memoizedState!==null)&&($I=iE()),px&4&&(px=dn.updateQueue,px!==null&&(dn.updateQueue=null,RI(dn,px)));break;case 22:mx=dn.memoizedState!==null;var Xx=sx!==null&&sx.memoizedState!==null,uE=LT,yE=ES;if(LT=uE||mx,ES=yE||Xx,eT(In,dn),ES=yE,LT=uE,tT(dn),px&8192)e:for(In=dn.stateNode,In._visibility=mx?In._visibility&-2:In._visibility|1,mx&&(sx===null||Xx||LT||ES||bA(dn)),sx=null,In=dn;;){if(In.tag===5||In.tag===26){if(sx===null){Xx=sx=In;try{if(Ex=Xx.stateNode,mx)Rx=Ex.style,typeof Rx.setProperty=="function"?Rx.setProperty("display","none","important"):Rx.display="none";else{qx=Xx.stateNode;var SE=Xx.memoizedProps.style,fE=SE!=null&&SE.hasOwnProperty("display")?SE.display:null;qx.style.display=fE==null||typeof fE=="boolean"?"":(""+fE).trim()}}catch(pE){cS(Xx,Xx.return,pE)}}}else if(In.tag===6){if(sx===null){Xx=In;try{Xx.stateNode.nodeValue=mx?"":Xx.memoizedProps}catch(pE){cS(Xx,Xx.return,pE)}}}else if((In.tag!==22&&In.tag!==23||In.memoizedState===null||In===dn)&&In.child!==null){In.child.return=In,In=In.child;continue}if(In===dn)break e;for(;In.sibling===null;){if(In.return===null||In.return===dn)break e;sx===In&&(sx=null),In=In.return}sx===In&&(sx=null),In.sibling.return=In.return,In=In.sibling}px&4&&(px=dn.updateQueue,px!==null&&(sx=px.retryQueue,sx!==null&&(px.retryQueue=null,RI(dn,sx))));break;case 19:eT(In,dn),tT(dn),px&4&&(px=dn.updateQueue,px!==null&&(dn.updateQueue=null,RI(dn,px)));break;case 30:break;case 21:break;default:eT(In,dn),tT(dn)}}function tT(dn){var In=dn.flags;if(In&2){try{for(var sx,px=dn.return;px!==null;){if(RP(px)){sx=px;break}px=px.return}if(sx==null)throw Error(l(160));switch(sx.tag){case 27:var mx=sx.stateNode,Ex=AI(dn);FM(dn,Ex,mx);break;case 5:var Rx=sx.stateNode;sx.flags&32&&(MA(Rx,""),sx.flags&=-33);var qx=AI(dn);FM(dn,qx,Rx);break;case 3:case 4:var Xx=sx.stateNode.containerInfo,uE=AI(dn);CI(dn,uE,Xx);break;default:throw Error(l(161))}}catch(yE){cS(dn,dn.return,yE)}dn.flags&=-3}In&4096&&(dn.flags&=-4097)}function BP(dn){if(dn.subtreeFlags&1024)for(dn=dn.child;dn!==null;){var In=dn;BP(In),In.tag===5&&In.flags&1024&&In.stateNode.reset(),dn=dn.sibling}}function YT(dn,In){if(In.subtreeFlags&8772)for(In=In.child;In!==null;)OP(dn,In.alternate,In),In=In.sibling}function bA(dn){for(dn=dn.child;dn!==null;){var In=dn;switch(In.tag){case 0:case 11:case 14:case 15:ZT(4,In,In.return),bA(In);break;case 1:ET(In,In.return);var sx=In.stateNode;typeof sx.componentWillUnmount=="function"&&CP(In,In.return,sx),bA(In);break;case 27:jC(In.stateNode);case 26:case 5:ET(In,In.return),bA(In);break;case 22:In.memoizedState===null&&bA(In);break;case 30:bA(In);break;default:bA(In)}dn=dn.sibling}}function WT(dn,In,sx){for(sx=sx&&(In.subtreeFlags&8772)!==0,In=In.child;In!==null;){var px=In.alternate,mx=dn,Ex=In,Rx=Ex.flags;switch(Ex.tag){case 0:case 11:case 15:WT(mx,Ex,sx),$C(4,Ex);break;case 1:if(WT(mx,Ex,sx),px=Ex,mx=px.stateNode,typeof mx.componentDidMount=="function")try{mx.componentDidMount()}catch(uE){cS(px,px.return,uE)}if(px=Ex,mx=px.updateQueue,mx!==null){var qx=px.stateNode;try{var Xx=mx.shared.hiddenCallbacks;if(Xx!==null)for(mx.shared.hiddenCallbacks=null,mx=0;mx<Xx.length;mx++)fO(Xx[mx],qx)}catch(uE){cS(px,px.return,uE)}}sx&&Rx&64&&AP(Ex),BC(Ex,Ex.return);break;case 27:IP(Ex);case 26:case 5:WT(mx,Ex,sx),sx&&px===null&&Rx&4&&MP(Ex),BC(Ex,Ex.return);break;case 12:WT(mx,Ex,sx);break;case 13:WT(mx,Ex,sx),sx&&Rx&4&&LP(mx,Ex);break;case 22:Ex.memoizedState===null&&WT(mx,Ex,sx),BC(Ex,Ex.return);break;case 30:break;default:WT(mx,Ex,sx)}In=In.sibling}}function II(dn,In){var sx=null;dn!==null&&dn.memoizedState!==null&&dn.memoizedState.cachePool!==null&&(sx=dn.memoizedState.cachePool.pool),dn=null,In.memoizedState!==null&&In.memoizedState.cachePool!==null&&(dn=In.memoizedState.cachePool.pool),dn!==sx&&(dn!=null&&dn.refCount++,sx!=null&&bC(sx))}function DI(dn,In){dn=null,In.alternate!==null&&(dn=In.alternate.memoizedState.cache),In=In.memoizedState.cache,In!==dn&&(In.refCount++,dn!=null&&bC(dn))}function bT(dn,In,sx,px){if(In.subtreeFlags&10256)for(In=In.child;In!==null;)kP(dn,In,sx,px),In=In.sibling}function kP(dn,In,sx,px){var mx=In.flags;switch(In.tag){case 0:case 11:case 15:bT(dn,In,sx,px),mx&2048&&$C(9,In);break;case 1:bT(dn,In,sx,px);break;case 3:bT(dn,In,sx,px),mx&2048&&(dn=null,In.alternate!==null&&(dn=In.alternate.memoizedState.cache),In=In.memoizedState.cache,In!==dn&&(In.refCount++,dn!=null&&bC(dn)));break;case 12:if(mx&2048){bT(dn,In,sx,px),dn=In.stateNode;try{var Ex=In.memoizedProps,Rx=Ex.id,qx=Ex.onPostCommit;typeof qx=="function"&&qx(Rx,In.alternate===null?"mount":"update",dn.passiveEffectDuration,-0)}catch(Xx){cS(In,In.return,Xx)}}else bT(dn,In,sx,px);break;case 13:bT(dn,In,sx,px);break;case 23:break;case 22:Ex=In.stateNode,Rx=In.alternate,In.memoizedState!==null?Ex._visibility&2?bT(dn,In,sx,px):kC(dn,In):Ex._visibility&2?bT(dn,In,sx,px):(Ex._visibility|=2,ZA(dn,In,sx,px,(In.subtreeFlags&10256)!==0)),mx&2048&&II(Rx,In);break;case 24:bT(dn,In,sx,px),mx&2048&&DI(In.alternate,In);break;default:bT(dn,In,sx,px)}}function ZA(dn,In,sx,px,mx){for(mx=mx&&(In.subtreeFlags&10256)!==0,In=In.child;In!==null;){var Ex=dn,Rx=In,qx=sx,Xx=px,uE=Rx.flags;switch(Rx.tag){case 0:case 11:case 15:ZA(Ex,Rx,qx,Xx,mx),$C(8,Rx);break;case 23:break;case 22:var yE=Rx.stateNode;Rx.memoizedState!==null?yE._visibility&2?ZA(Ex,Rx,qx,Xx,mx):kC(Ex,Rx):(yE._visibility|=2,ZA(Ex,Rx,qx,Xx,mx)),mx&&uE&2048&&II(Rx.alternate,Rx);break;case 24:ZA(Ex,Rx,qx,Xx,mx),mx&&uE&2048&&DI(Rx.alternate,Rx);break;default:ZA(Ex,Rx,qx,Xx,mx)}In=In.sibling}}function kC(dn,In){if(In.subtreeFlags&10256)for(In=In.child;In!==null;){var sx=dn,px=In,mx=px.flags;switch(px.tag){case 22:kC(sx,px),mx&2048&&II(px.alternate,px);break;case 24:kC(sx,px),mx&2048&&DI(px.alternate,px);break;default:kC(sx,px)}In=In.sibling}}var FC=8192;function YA(dn){if(dn.subtreeFlags&FC)for(dn=dn.child;dn!==null;)FP(dn),dn=dn.sibling}function FP(dn){switch(dn.tag){case 26:YA(dn),dn.flags&FC&&dn.memoizedState!==null&&$$(vT,dn.memoizedState,dn.memoizedProps);break;case 5:YA(dn);break;case 3:case 4:var In=vT;vT=QM(dn.stateNode.containerInfo),YA(dn),vT=In;break;case 22:dn.memoizedState===null&&(In=dn.alternate,In!==null&&In.memoizedState!==null?(In=FC,FC=16777216,YA(dn),FC=In):YA(dn));break;default:YA(dn)}}function UP(dn){var In=dn.alternate;if(In!==null&&(dn=In.child,dn!==null)){In.child=null;do In=dn.sibling,dn.sibling=null,dn=In;while(dn!==null)}}function UC(dn){var In=dn.deletions;if((dn.flags&16)!==0){if(In!==null)for(var sx=0;sx<In.length;sx++){var px=In[sx];IS=px,GP(px,dn)}UP(dn)}if(dn.subtreeFlags&10256)for(dn=dn.child;dn!==null;)qP(dn),dn=dn.sibling}function qP(dn){switch(dn.tag){case 0:case 11:case 15:UC(dn),dn.flags&2048&&ZT(9,dn,dn.return);break;case 3:UC(dn);break;case 12:UC(dn);break;case 22:var In=dn.stateNode;dn.memoizedState!==null&&In._visibility&2&&(dn.return===null||dn.return.tag!==13)?(In._visibility&=-3,UM(dn)):UC(dn);break;default:UC(dn)}}function UM(dn){var In=dn.deletions;if((dn.flags&16)!==0){if(In!==null)for(var sx=0;sx<In.length;sx++){var px=In[sx];IS=px,GP(px,dn)}UP(dn)}for(dn=dn.child;dn!==null;){switch(In=dn,In.tag){case 0:case 11:case 15:ZT(8,In,In.return),UM(In);break;case 22:sx=In.stateNode,sx._visibility&2&&(sx._visibility&=-3,UM(In));break;default:UM(In)}dn=dn.sibling}}function GP(dn,In){for(;IS!==null;){var sx=IS;switch(sx.tag){case 0:case 11:case 15:ZT(8,sx,In);break;case 23:case 22:if(sx.memoizedState!==null&&sx.memoizedState.cachePool!==null){var px=sx.memoizedState.cachePool.pool;px!=null&&px.refCount++}break;case 24:bC(sx.memoizedState.cache)}if(px=sx.child,px!==null)px.return=sx,IS=px;else e:for(sx=dn;IS!==null;){px=IS;var mx=px.sibling,Ex=px.return;if(PP(px),px===sx){IS=null;break e}if(mx!==null){mx.return=Ex,IS=mx;break e}IS=Ex}}}var QL={getCacheForType:function(dn){var In=qS(AS),sx=In.data.get(dn);return sx===void 0&&(sx=dn(),In.data.set(dn,sx)),sx}},JL=typeof WeakMap=="function"?WeakMap:Map,aS=0,fS=null,XE=null,JE=0,oS=0,rT=null,XT=!1,WA=!1,OI=!1,BT=0,yS=0,KT=0,SA=0,NI=0,pT=0,XA=0,qC=null,XS=null,LI=!1,$I=0,qM=1/0,GM=null,QT=null,BS=0,JT=null,KA=null,QA=0,BI=0,kI=null,zP=null,GC=0,FI=null;function nT(){if((aS&2)!==0&&JE!==0)return JE&-JE;if(xx.T!==null){var dn=FA;return dn!==0?dn:jI()}return gE()}function VP(){pT===0&&(pT=(JE&536870912)===0||nS?hE():536870912);var dn=fT.current;return dn!==null&&(dn.flags|=32),pT}function iT(dn,In,sx){(dn===fS&&(oS===2||oS===9)||dn.cancelPendingCommit!==null)&&(JA(dn,0),eA(dn,JE,pT,!1)),RE(dn,sx),((aS&2)===0||dn!==fS)&&(dn===fS&&((aS&2)===0&&(SA|=sx),yS===4&&eA(dn,JE,pT,!1)),ST(dn))}function HP(dn,In,sx){if((aS&6)!==0)throw Error(l(327));var px=!sx&&(In&124)===0&&(In&dn.expiredLanes)===0||PE(dn,In),mx=px?r$(dn,In):GI(dn,In,!0),Ex=px;do{if(mx===0){WA&&!px&&eA(dn,In,0,!1);break}else{if(sx=dn.current.alternate,Ex&&!e$(sx)){mx=GI(dn,In,!1),Ex=!1;continue}if(mx===2){if(Ex=In,dn.errorRecoveryDisabledLanes&Ex)var Rx=0;else Rx=dn.pendingLanes&-536870913,Rx=Rx!==0?Rx:Rx&536870912?536870912:0;if(Rx!==0){In=Rx;e:{var qx=dn;mx=qC;var Xx=qx.current.memoizedState.isDehydrated;if(Xx&&(JA(qx,Rx).flags|=256),Rx=GI(qx,Rx,!1),Rx!==2){if(OI&&!Xx){qx.errorRecoveryDisabledLanes|=Ex,SA|=Ex,mx=4;break e}Ex=XS,XS=mx,Ex!==null&&(XS===null?XS=Ex:XS.push.apply(XS,Ex))}mx=Rx}if(Ex=!1,mx!==2)continue}}if(mx===1){JA(dn,0),eA(dn,In,0,!0);break}e:{switch(px=dn,Ex=mx,Ex){case 0:case 1:throw Error(l(345));case 4:if((In&4194048)!==In)break;case 6:eA(px,In,pT,!XT);break e;case 2:XS=null;break;case 3:case 5:break;default:throw Error(l(329))}if((In&62914560)===In&&(mx=$I+300-iE(),10<mx)){if(eA(px,In,pT,!XT),OE(px,0,!0)!==0)break e;px.timeoutHandle=_N(jP.bind(null,px,sx,XS,GM,LI,In,pT,SA,XA,XT,Ex,2,-0,0),mx);break e}jP(px,sx,XS,GM,LI,In,pT,SA,XA,XT,Ex,0,-0,0)}}break}while(!0);ST(dn)}function jP(dn,In,sx,px,mx,Ex,Rx,qx,Xx,uE,yE,SE,fE,pE){if(dn.timeoutHandle=-1,SE=In.subtreeFlags,(SE&8192||(SE&16785408)===16785408)&&(WC={stylesheets:null,count:0,unsuspend:L$},FP(In),SE=B$(),SE!==null)){dn.cancelPendingCommit=SE(JP.bind(null,dn,In,Ex,sx,px,mx,Rx,qx,Xx,yE,1,fE,pE)),eA(dn,Ex,Rx,!uE);return}JP(dn,In,Ex,sx,px,mx,Rx,qx,Xx)}function e$(dn){for(var In=dn;;){var sx=In.tag;if((sx===0||sx===11||sx===15)&&In.flags&16384&&(sx=In.updateQueue,sx!==null&&(sx=sx.stores,sx!==null)))for(var px=0;px<sx.length;px++){var mx=sx[px],Ex=mx.getSnapshot;mx=mx.value;try{if(!QS(Ex(),mx))return!1}catch{return!1}}if(sx=In.child,In.subtreeFlags&16384&&sx!==null)sx.return=In,In=sx;else{if(In===dn)break;for(;In.sibling===null;){if(In.return===null||In.return===dn)return!0;In=In.return}In.sibling.return=In.return,In=In.sibling}}return!0}function eA(dn,In,sx,px){In&=~NI,In&=~SA,dn.suspendedLanes|=In,dn.pingedLanes&=~In,px&&(dn.warmLanes|=In),px=dn.expirationTimes;for(var mx=In;0<mx;){var Ex=31-Qx(mx),Rx=1<<Ex;px[Ex]=-1,mx&=~Rx}sx!==0&&$x(dn,sx,In)}function zM(){return(aS&6)===0?(zC(0),!1):!0}function UI(){if(XE!==null){if(oS===0)var dn=XE.return;else dn=XE,RT=vA=null,rI(dn),HA=null,PC=0,dn=XE;for(;dn!==null;)TP(dn.alternate,dn),dn=dn.return;XE=null}}function JA(dn,In){var sx=dn.timeoutHandle;sx!==-1&&(dn.timeoutHandle=-1,y$(sx)),sx=dn.cancelPendingCommit,sx!==null&&(dn.cancelPendingCommit=null,sx()),UI(),fS=dn,XE=sx=AT(dn.current,null),JE=In,oS=0,rT=null,XT=!1,WA=PE(dn,In),OI=!1,XA=pT=NI=SA=KT=yS=0,XS=qC=null,LI=!1,(In&8)!==0&&(In|=In&32);var px=dn.entangledLanes;if(px!==0)for(dn=dn.entanglements,px&=In;0<px;){var mx=31-Qx(px),Ex=1<<mx;In|=dn[mx],px&=~Ex}return BT=In,fM(),sx}function ZP(dn,In){YE=null,xx.H=IM,In===wC||In===_M?(In=uO(),oS=3):In===oO?(In=uO(),oS=4):oS=In===fP?8:In!==null&&typeof In=="object"&&typeof In.then=="function"?6:1,rT=In,XE===null&&(yS=1,LM(dn,sT(In,dn.current)))}function YP(){var dn=xx.H;return xx.H=IM,dn===null?IM:dn}function WP(){var dn=xx.A;return xx.A=QL,dn}function qI(){yS=4,XT||(JE&4194048)!==JE&&fT.current!==null||(WA=!0),(KT&134217727)===0&&(SA&134217727)===0||fS===null||eA(fS,JE,pT,!1)}function GI(dn,In,sx){var px=aS;aS|=2;var mx=YP(),Ex=WP();(fS!==dn||JE!==In)&&(GM=null,JA(dn,In)),In=!1;var Rx=yS;e:do try{if(oS!==0&&XE!==null){var qx=XE,Xx=rT;switch(oS){case 8:UI(),Rx=6;break e;case 3:case 2:case 9:case 6:fT.current===null&&(In=!0);var uE=oS;if(oS=0,rT=null,eC(dn,qx,Xx,uE),sx&&WA){Rx=0;break e}break;default:uE=oS,oS=0,rT=null,eC(dn,qx,Xx,uE)}}t$(),Rx=yS;break}catch(yE){ZP(dn,yE)}while(!0);return In&&dn.shellSuspendCounter++,RT=vA=null,aS=px,xx.H=mx,xx.A=Ex,XE===null&&(fS=null,JE=0,fM()),Rx}function t$(){for(;XE!==null;)XP(XE)}function r$(dn,In){var sx=aS;aS|=2;var px=YP(),mx=WP();fS!==dn||JE!==In?(GM=null,qM=iE()+500,JA(dn,In)):WA=PE(dn,In);e:do try{if(oS!==0&&XE!==null){In=XE;var Ex=rT;t:switch(oS){case 1:oS=0,rT=null,eC(dn,In,Ex,1);break;case 2:case 9:if(sO(Ex)){oS=0,rT=null,KP(In);break}In=function(){oS!==2&&oS!==9||fS!==dn||(oS=7),ST(dn)},Ex.then(In,In);break e;case 3:oS=7;break e;case 4:oS=5;break e;case 7:sO(Ex)?(oS=0,rT=null,KP(In)):(oS=0,rT=null,eC(dn,In,Ex,7));break;case 5:var Rx=null;switch(XE.tag){case 26:Rx=XE.memoizedState;case 5:case 27:var qx=XE;if(!Rx||ON(Rx)){oS=0,rT=null;var Xx=qx.sibling;if(Xx!==null)XE=Xx;else{var uE=qx.return;uE!==null?(XE=uE,VM(uE)):XE=null}break t}}oS=0,rT=null,eC(dn,In,Ex,5);break;case 6:oS=0,rT=null,eC(dn,In,Ex,6);break;case 8:UI(),yS=6;break e;default:throw Error(l(462))}}n$();break}catch(yE){ZP(dn,yE)}while(!0);return RT=vA=null,xx.H=px,xx.A=mx,aS=sx,XE!==null?0:(fS=null,JE=0,fM(),yS)}function n$(){for(;XE!==null&&!eE();)XP(XE)}function XP(dn){var In=SP(dn.alternate,dn,BT);dn.memoizedProps=dn.pendingProps,In===null?VM(dn):XE=In}function KP(dn){var In=dn,sx=In.alternate;switch(In.tag){case 15:case 0:In=vP(sx,In,In.pendingProps,In.type,void 0,JE);break;case 11:In=vP(sx,In,In.pendingProps,In.type.render,In.ref,JE);break;case 5:rI(In);default:TP(sx,In),In=XE=KD(In,BT),In=SP(sx,In,BT)}dn.memoizedProps=dn.pendingProps,In===null?VM(dn):XE=In}function eC(dn,In,sx,px){RT=vA=null,rI(In),HA=null,PC=0;var mx=In.return;try{if(jL(dn,mx,In,sx,JE)){yS=1,LM(dn,sT(sx,dn.current)),XE=null;return}}catch(Ex){if(mx!==null)throw XE=mx,Ex;yS=1,LM(dn,sT(sx,dn.current)),XE=null;return}In.flags&32768?(nS||px===1?dn=!0:WA||(JE&536870912)!==0?dn=!1:(XT=dn=!0,(px===2||px===9||px===3||px===6)&&(px=fT.current,px!==null&&px.tag===13&&(px.flags|=16384))),QP(In,dn)):VM(In)}function VM(dn){var In=dn;do{if((In.flags&32768)!==0){QP(In,XT);return}dn=In.return;var sx=YL(In.alternate,In,BT);if(sx!==null){XE=sx;return}if(In=In.sibling,In!==null){XE=In;return}XE=In=dn}while(In!==null);yS===0&&(yS=5)}function QP(dn,In){do{var sx=WL(dn.alternate,dn);if(sx!==null){sx.flags&=32767,XE=sx;return}if(sx=dn.return,sx!==null&&(sx.flags|=32768,sx.subtreeFlags=0,sx.deletions=null),!In&&(dn=dn.sibling,dn!==null)){XE=dn;return}XE=dn=sx}while(dn!==null);yS=6,XE=null}function JP(dn,In,sx,px,mx,Ex,Rx,qx,Xx){dn.cancelPendingCommit=null;do HM();while(BS!==0);if((aS&6)!==0)throw Error(l(327));if(In!==null){if(In===dn.current)throw Error(l(177));if(Ex=In.lanes|In.childLanes,Ex|=IR,IE(dn,sx,Ex,Rx,qx,Xx),dn===fS&&(XE=fS=null,JE=0),KA=In,JT=dn,QA=sx,BI=Ex,kI=mx,zP=px,(In.subtreeFlags&10256)!==0||(In.flags&10256)!==0?(dn.callbackNode=null,dn.callbackPriority=0,s$(EE,function(){return iN(),null})):(dn.callbackNode=null,dn.callbackPriority=0),px=(In.flags&13878)!==0,(In.subtreeFlags&13878)!==0||px){px=xx.T,xx.T=null,mx=Sx.p,Sx.p=2,Rx=aS,aS|=4;try{XL(dn,In,sx)}finally{aS=Rx,Sx.p=mx,xx.T=px}}BS=1,eN(),tN(),rN()}}function eN(){if(BS===1){BS=0;var dn=JT,In=KA,sx=(In.flags&13878)!==0;if((In.subtreeFlags&13878)!==0||sx){sx=xx.T,xx.T=null;var px=Sx.p;Sx.p=2;var mx=aS;aS|=4;try{$P(In,dn);var Ex=eD,Rx=qD(dn.containerInfo),qx=Ex.focusedElem,Xx=Ex.selectionRange;if(Rx!==qx&&qx&&qx.ownerDocument&&UD(qx.ownerDocument.documentElement,qx)){if(Xx!==null&&TR(qx)){var uE=Xx.start,yE=Xx.end;if(yE===void 0&&(yE=uE),"selectionStart"in qx)qx.selectionStart=uE,qx.selectionEnd=Math.min(yE,qx.value.length);else{var SE=qx.ownerDocument||document,fE=SE&&SE.defaultView||window;if(fE.getSelection){var pE=fE.getSelection(),VE=qx.textContent.length,GE=Math.min(Xx.start,VE),uS=Xx.end===void 0?GE:Math.min(Xx.end,VE);!pE.extend&&GE>uS&&(Rx=uS,uS=GE,GE=Rx);var aE=FD(qx,GE),tE=FD(qx,uS);if(aE&&tE&&(pE.rangeCount!==1||pE.anchorNode!==aE.node||pE.anchorOffset!==aE.offset||pE.focusNode!==tE.node||pE.focusOffset!==tE.offset)){var lE=SE.createRange();lE.setStart(aE.node,aE.offset),pE.removeAllRanges(),GE>uS?(pE.addRange(lE),pE.extend(tE.node,tE.offset)):(lE.setEnd(tE.node,tE.offset),pE.addRange(lE))}}}}for(SE=[],pE=qx;pE=pE.parentNode;)pE.nodeType===1&&SE.push({element:pE,left:pE.scrollLeft,top:pE.scrollTop});for(typeof qx.focus=="function"&&qx.focus(),qx=0;qx<SE.length;qx++){var _E=SE[qx];_E.element.scrollLeft=_E.left,_E.element.scrollTop=_E.top}}nR=!!JI,eD=JI=null}finally{aS=mx,Sx.p=px,xx.T=sx}}dn.current=In,BS=2}}function tN(){if(BS===2){BS=0;var dn=JT,In=KA,sx=(In.flags&8772)!==0;if((In.subtreeFlags&8772)!==0||sx){sx=xx.T,xx.T=null;var px=Sx.p;Sx.p=2;var mx=aS;aS|=4;try{OP(dn,In.alternate,In)}finally{aS=mx,Sx.p=px,xx.T=sx}}BS=3}}function rN(){if(BS===4||BS===3){BS=0,oE();var dn=JT,In=KA,sx=QA,px=zP;(In.subtreeFlags&10256)!==0||(In.flags&10256)!==0?BS=5:(BS=0,KA=JT=null,nN(dn,dn.pendingLanes));var mx=dn.pendingLanes;if(mx===0&&(QT=null),Jx(sx),In=In.stateNode,Bx&&typeof Bx.onCommitFiberRoot=="function")try{Bx.onCommitFiberRoot(Ix,In,void 0,(In.current.flags&128)===128)}catch{}if(px!==null){In=xx.T,mx=Sx.p,Sx.p=2,xx.T=null;try{for(var Ex=dn.onRecoverableError,Rx=0;Rx<px.length;Rx++){var qx=px[Rx];Ex(qx.value,{componentStack:qx.stack})}}finally{xx.T=In,Sx.p=mx}}(QA&3)!==0&&HM(),ST(dn),mx=dn.pendingLanes,(sx&4194090)!==0&&(mx&42)!==0?dn===FI?GC++:(GC=0,FI=dn):GC=0,zC(0)}}function nN(dn,In){(dn.pooledCacheLanes&=In)===0&&(In=dn.pooledCache,In!=null&&(dn.pooledCache=null,bC(In)))}function HM(dn){return eN(),tN(),rN(),iN()}function iN(){if(BS!==5)return!1;var dn=JT,In=BI;BI=0;var sx=Jx(QA),px=xx.T,mx=Sx.p;try{Sx.p=32>sx?32:sx,xx.T=null,sx=kI,kI=null;var Ex=JT,Rx=QA;if(BS=0,KA=JT=null,QA=0,(aS&6)!==0)throw Error(l(331));var qx=aS;if(aS|=4,qP(Ex.current),kP(Ex,Ex.current,Rx,sx),aS=qx,zC(0,!1),Bx&&typeof Bx.onPostCommitFiberRoot=="function")try{Bx.onPostCommitFiberRoot(Ix,Ex)}catch{}return!0}finally{Sx.p=mx,xx.T=px,nN(dn,In)}}function aN(dn,In,sx){In=sT(sx,In),In=mI(dn.stateNode,In,2),dn=zT(dn,In,2),dn!==null&&(RE(dn,2),ST(dn))}function cS(dn,In,sx){if(dn.tag===3)aN(dn,dn,sx);else for(;In!==null;){if(In.tag===3){aN(In,dn,sx);break}else if(In.tag===1){var px=In.stateNode;if(typeof In.type.getDerivedStateFromError=="function"||typeof px.componentDidCatch=="function"&&(QT===null||!QT.has(px))){dn=sT(sx,dn),sx=uP(2),px=zT(In,sx,2),px!==null&&(cP(sx,px,In,dn),RE(px,2),ST(px));break}}In=In.return}}function zI(dn,In,sx){var px=dn.pingCache;if(px===null){px=dn.pingCache=new JL;var mx=new Set;px.set(In,mx)}else mx=px.get(In),mx===void 0&&(mx=new Set,px.set(In,mx));mx.has(sx)||(OI=!0,mx.add(sx),dn=i$.bind(null,dn,In,sx),In.then(dn,dn))}function i$(dn,In,sx){var px=dn.pingCache;px!==null&&px.delete(In),dn.pingedLanes|=dn.suspendedLanes&sx,dn.warmLanes&=~sx,fS===dn&&(JE&sx)===sx&&(yS===4||yS===3&&(JE&62914560)===JE&&300>iE()-$I?(aS&2)===0&&JA(dn,0):NI|=sx,XA===JE&&(XA=0)),ST(dn)}function oN(dn,In){In===0&&(In=wE()),dn=LA(dn,In),dn!==null&&(RE(dn,In),ST(dn))}function a$(dn){var In=dn.memoizedState,sx=0;In!==null&&(sx=In.retryLane),oN(dn,sx)}function o$(dn,In){var sx=0;switch(dn.tag){case 13:var px=dn.stateNode,mx=dn.memoizedState;mx!==null&&(sx=mx.retryLane);break;case 19:px=dn.stateNode;break;case 22:px=dn.stateNode._retryCache;break;default:throw Error(l(314))}px!==null&&px.delete(In),oN(dn,sx)}function s$(dn,In){return rE(dn,In)}var jM=null,tC=null,VI=!1,ZM=!1,HI=!1,wA=0;function ST(dn){dn!==tC&&dn.next===null&&(tC===null?jM=tC=dn:tC=tC.next=dn),ZM=!0,VI||(VI=!0,u$())}function zC(dn,In){if(!HI&&ZM){HI=!0;do for(var sx=!1,px=jM;px!==null;){if(dn!==0){var mx=px.pendingLanes;if(mx===0)var Ex=0;else{var Rx=px.suspendedLanes,qx=px.pingedLanes;Ex=(1<<31-Qx(42|dn)+1)-1,Ex&=mx&~(Rx&~qx),Ex=Ex&201326741?Ex&201326741|1:Ex?Ex|2:0}Ex!==0&&(sx=!0,cN(px,Ex))}else Ex=JE,Ex=OE(px,px===fS?Ex:0,px.cancelPendingCommit!==null||px.timeoutHandle!==-1),(Ex&3)===0||PE(px,Ex)||(sx=!0,cN(px,Ex));px=px.next}while(sx);HI=!1}}function l$(){sN()}function sN(){ZM=VI=!1;var dn=0;wA!==0&&(v$()&&(dn=wA),wA=0);for(var In=iE(),sx=null,px=jM;px!==null;){var mx=px.next,Ex=lN(px,In);Ex===0?(px.next=null,sx===null?jM=mx:sx.next=mx,mx===null&&(tC=sx)):(sx=px,(dn!==0||(Ex&3)!==0)&&(ZM=!0)),px=mx}zC(dn)}function lN(dn,In){for(var sx=dn.suspendedLanes,px=dn.pingedLanes,mx=dn.expirationTimes,Ex=dn.pendingLanes&-62914561;0<Ex;){var Rx=31-Qx(Ex),qx=1<<Rx,Xx=mx[Rx];Xx===-1?((qx&sx)===0||(qx&px)!==0)&&(mx[Rx]=sE(qx,In)):Xx<=In&&(dn.expiredLanes|=qx),Ex&=~qx}if(In=fS,sx=JE,sx=OE(dn,dn===In?sx:0,dn.cancelPendingCommit!==null||dn.timeoutHandle!==-1),px=dn.callbackNode,sx===0||dn===In&&(oS===2||oS===9)||dn.cancelPendingCommit!==null)return px!==null&&px!==null&&Zx(px),dn.callbackNode=null,dn.callbackPriority=0;if((sx&3)===0||PE(dn,sx)){if(In=sx&-sx,In===dn.callbackPriority)return In;switch(px!==null&&Zx(px),Jx(sx)){case 2:case 8:sx=ME;break;case 32:sx=EE;break;case 268435456:sx=kE;break;default:sx=EE}return px=uN.bind(null,dn),sx=rE(sx,px),dn.callbackPriority=In,dn.callbackNode=sx,In}return px!==null&&px!==null&&Zx(px),dn.callbackPriority=2,dn.callbackNode=null,2}function uN(dn,In){if(BS!==0&&BS!==5)return dn.callbackNode=null,dn.callbackPriority=0,null;var sx=dn.callbackNode;if(HM()&&dn.callbackNode!==sx)return null;var px=JE;return px=OE(dn,dn===fS?px:0,dn.cancelPendingCommit!==null||dn.timeoutHandle!==-1),px===0?null:(HP(dn,px,In),lN(dn,iE()),dn.callbackNode!=null&&dn.callbackNode===sx?uN.bind(null,dn):null)}function cN(dn,In){if(HM())return null;HP(dn,In,!0)}function u$(){x$(function(){(aS&6)!==0?rE(AE,l$):sN()})}function jI(){return wA===0&&(wA=hE()),wA}function fN(dn){return dn==null||typeof dn=="symbol"||typeof dn=="boolean"?null:typeof dn=="function"?dn:iM(""+dn)}function pN(dn,In){var sx=In.ownerDocument.createElement("input");return sx.name=In.name,sx.value=In.value,dn.id&&sx.setAttribute("form",dn.id),In.parentNode.insertBefore(sx,In),dn=new FormData(dn),sx.parentNode.removeChild(sx),dn}function c$(dn,In,sx,px,mx){if(In==="submit"&&sx&&sx.stateNode===mx){var Ex=fN((mx[$E]||null).action),Rx=px.submitter;Rx&&(In=(In=Rx[$E]||null)?fN(In.formAction):Rx.getAttribute("formAction"),In!==null&&(Ex=In,Rx=null));var qx=new lM("action","action",null,px,mx);dn.push({event:qx,listeners:[{instance:null,listener:function(){if(px.defaultPrevented){if(wA!==0){var Xx=Rx?pN(mx,Rx):new FormData(mx);fI(sx,{pending:!0,data:Xx,method:mx.method,action:Ex},null,Xx)}}else typeof Ex=="function"&&(qx.preventDefault(),Xx=Rx?pN(mx,Rx):new FormData(mx),fI(sx,{pending:!0,data:Xx,method:mx.method,action:Ex},Ex,Xx))},currentTarget:mx}]})}}for(var ZI=0;ZI<RR.length;ZI++){var YI=RR[ZI],f$=YI.toLowerCase(),p$=YI[0].toUpperCase()+YI.slice(1);mT(f$,"on"+p$)}mT(VD,"onAnimationEnd"),mT(HD,"onAnimationIteration"),mT(jD,"onAnimationStart"),mT("dblclick","onDoubleClick"),mT("focusin","onFocus"),mT("focusout","onBlur"),mT(RL,"onTransitionRun"),mT(IL,"onTransitionStart"),mT(DL,"onTransitionCancel"),mT(ZD,"onTransitionEnd"),eS("onMouseEnter",["mouseout","mouseover"]),eS("onMouseLeave",["mouseout","mouseover"]),eS("onPointerEnter",["pointerout","pointerover"]),eS("onPointerLeave",["pointerout","pointerover"]),iS("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),iS("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),iS("onBeforeInput",["compositionend","keypress","textInput","paste"]),iS("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),iS("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),iS("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var VC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(VC));function dN(dn,In){In=(In&4)!==0;for(var sx=0;sx<dn.length;sx++){var px=dn[sx],mx=px.event;px=px.listeners;e:{var Ex=void 0;if(In)for(var Rx=px.length-1;0<=Rx;Rx--){var qx=px[Rx],Xx=qx.instance,uE=qx.currentTarget;if(qx=qx.listener,Xx!==Ex&&mx.isPropagationStopped())break e;Ex=qx,mx.currentTarget=uE;try{Ex(mx)}catch(yE){NM(yE)}mx.currentTarget=null,Ex=Xx}else for(Rx=0;Rx<px.length;Rx++){if(qx=px[Rx],Xx=qx.instance,uE=qx.currentTarget,qx=qx.listener,Xx!==Ex&&mx.isPropagationStopped())break e;Ex=qx,mx.currentTarget=uE;try{Ex(mx)}catch(yE){NM(yE)}mx.currentTarget=null,Ex=Xx}}}}function KE(dn,In){var sx=In[QE];sx===void 0&&(sx=In[QE]=new Set);var px=dn+"__bubble";sx.has(px)||(hN(In,dn,2,!1),sx.add(px))}function WI(dn,In,sx){var px=0;In&&(px|=4),hN(sx,dn,px,In)}var YM="_reactListening"+Math.random().toString(36).slice(2);function XI(dn){if(!dn[YM]){dn[YM]=!0,xS.forEach(function(sx){sx!=="selectionchange"&&(d$.has(sx)||WI(sx,!1,dn),WI(sx,!0,dn))});var In=dn.nodeType===9?dn:dn.ownerDocument;In===null||In[YM]||(In[YM]=!0,WI("selectionchange",!1,In))}}function hN(dn,In,sx,px){switch(kN(In)){case 2:var mx=U$;break;case 8:mx=q$;break;default:mx=cD}sx=mx.bind(null,In,sx,dn),mx=void 0,!mR||In!=="touchstart"&&In!=="touchmove"&&In!=="wheel"||(mx=!0),px?mx!==void 0?dn.addEventListener(In,sx,{capture:!0,passive:mx}):dn.addEventListener(In,sx,!0):mx!==void 0?dn.addEventListener(In,sx,{passive:mx}):dn.addEventListener(In,sx,!1)}function KI(dn,In,sx,px,mx){var Ex=px;if((In&1)===0&&(In&2)===0&&px!==null)e:for(;;){if(px===null)return;var Rx=px.tag;if(Rx===3||Rx===4){var qx=px.stateNode.containerInfo;if(qx===mx)break;if(Rx===4)for(Rx=px.return;Rx!==null;){var Xx=Rx.tag;if((Xx===3||Xx===4)&&Rx.stateNode.containerInfo===mx)return;Rx=Rx.return}for(;qx!==null;){if(Rx=NS(qx),Rx===null)return;if(Xx=Rx.tag,Xx===5||Xx===6||Xx===26||Xx===27){px=Ex=Rx;continue e}qx=qx.parentNode}}px=px.return}_D(function(){var uE=Ex,yE=hR(sx),SE=[];e:{var fE=YD.get(dn);if(fE!==void 0){var pE=lM,VE=dn;switch(dn){case"keypress":if(oM(sx)===0)break e;case"keydown":case"keyup":pE=sL;break;case"focusin":VE="focus",pE=_R;break;case"focusout":VE="blur",pE=_R;break;case"beforeblur":case"afterblur":pE=_R;break;case"click":if(sx.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pE=SD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pE=WN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pE=cL;break;case VD:case HD:case jD:pE=QN;break;case ZD:pE=pL;break;case"scroll":case"scrollend":pE=ZN;break;case"wheel":pE=hL;break;case"copy":case"cut":case"paste":pE=eL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pE=TD;break;case"toggle":case"beforetoggle":pE=mL}var GE=(In&4)!==0,uS=!GE&&(dn==="scroll"||dn==="scrollend"),aE=GE?fE!==null?fE+"Capture":null:fE;GE=[];for(var tE=uE,lE;tE!==null;){var _E=tE;if(lE=_E.stateNode,_E=_E.tag,_E!==5&&_E!==26&&_E!==27||lE===null||aE===null||(_E=uC(tE,aE),_E!=null&&GE.push(HC(tE,_E,lE))),uS)break;tE=tE.return}0<GE.length&&(fE=new pE(fE,VE,null,sx,yE),SE.push({event:fE,listeners:GE}))}}if((In&7)===0){e:{if(fE=dn==="mouseover"||dn==="pointerover",pE=dn==="mouseout"||dn==="pointerout",fE&&sx!==dR&&(VE=sx.relatedTarget||sx.fromElement)&&(NS(VE)||VE[HE]))break e;if((pE||fE)&&(fE=yE.window===yE?yE:(fE=yE.ownerDocument)?fE.defaultView||fE.parentWindow:window,pE?(VE=sx.relatedTarget||sx.toElement,pE=uE,VE=VE?NS(VE):null,VE!==null&&(uS=c(VE),GE=VE.tag,VE!==uS||GE!==5&&GE!==27&&GE!==6)&&(VE=null)):(pE=null,VE=uE),pE!==VE)){if(GE=SD,_E="onMouseLeave",aE="onMouseEnter",tE="mouse",(dn==="pointerout"||dn==="pointerover")&&(GE=TD,_E="onPointerLeave",aE="onPointerEnter",tE="pointer"),uS=pE==null?fE:UE(pE),lE=VE==null?fE:UE(VE),fE=new GE(_E,tE+"leave",pE,sx,yE),fE.target=uS,fE.relatedTarget=lE,_E=null,NS(yE)===uE&&(GE=new GE(aE,tE+"enter",VE,sx,yE),GE.target=lE,GE.relatedTarget=uS,_E=GE),uS=_E,pE&&VE)t:{for(GE=pE,aE=VE,tE=0,lE=GE;lE;lE=rC(lE))tE++;for(lE=0,_E=aE;_E;_E=rC(_E))lE++;for(;0<tE-lE;)GE=rC(GE),tE--;for(;0<lE-tE;)aE=rC(aE),lE--;for(;tE--;){if(GE===aE||aE!==null&&GE===aE.alternate)break t;GE=rC(GE),aE=rC(aE)}GE=null}else GE=null;pE!==null&&gN(SE,fE,pE,GE,!1),VE!==null&&uS!==null&&gN(SE,uS,VE,GE,!0)}}e:{if(fE=uE?UE(uE):window,pE=fE.nodeName&&fE.nodeName.toLowerCase(),pE==="select"||pE==="input"&&fE.type==="file")var BE=PD;else if(DD(fE))if(ND)BE=AL;else{BE=wL;var WE=SL}else pE=fE.nodeName,!pE||pE.toLowerCase()!=="input"||fE.type!=="checkbox"&&fE.type!=="radio"?uE&&pR(uE.elementType)&&(BE=PD):BE=TL;if(BE&&(BE=BE(dn,uE))){OD(SE,BE,sx,yE);break e}WE&&WE(dn,fE,uE),dn==="focusout"&&uE&&fE.type==="number"&&uE.memoizedProps.value!=null&&fR(fE,"number",fE.value)}switch(WE=uE?UE(uE):window,dn){case"focusin":(DD(WE)||WE.contentEditable==="true")&&(OA=WE,AR=uE,vC=null);break;case"focusout":vC=AR=OA=null;break;case"mousedown":CR=!0;break;case"contextmenu":case"mouseup":case"dragend":CR=!1,GD(SE,sx,yE);break;case"selectionchange":if(ML)break;case"keydown":case"keyup":GD(SE,sx,yE)}var FE;if(bR)e:{switch(dn){case"compositionstart":var zE="onCompositionStart";break e;case"compositionend":zE="onCompositionEnd";break e;case"compositionupdate":zE="onCompositionUpdate";break e}zE=void 0}else DA?RD(dn,sx)&&(zE="onCompositionEnd"):dn==="keydown"&&sx.keyCode===229&&(zE="onCompositionStart");zE&&(AD&&sx.locale!=="ko"&&(DA||zE!=="onCompositionStart"?zE==="onCompositionEnd"&&DA&&(FE=ED()):(FT=yE,vR="value"in FT?FT.value:FT.textContent,DA=!0)),WE=WM(uE,zE),0<WE.length&&(zE=new wD(zE,dn,null,sx,yE),SE.push({event:zE,listeners:WE}),FE?zE.data=FE:(FE=ID(sx),FE!==null&&(zE.data=FE)))),(FE=yL?xL(dn,sx):_L(dn,sx))&&(zE=WM(uE,"onBeforeInput"),0<zE.length&&(WE=new wD("onBeforeInput","beforeinput",null,sx,yE),SE.push({event:WE,listeners:zE}),WE.data=FE)),c$(SE,dn,uE,sx,yE)}dN(SE,In)})}function HC(dn,In,sx){return{instance:dn,listener:In,currentTarget:sx}}function WM(dn,In){for(var sx=In+"Capture",px=[];dn!==null;){var mx=dn,Ex=mx.stateNode;if(mx=mx.tag,mx!==5&&mx!==26&&mx!==27||Ex===null||(mx=uC(dn,sx),mx!=null&&px.unshift(HC(dn,mx,Ex)),mx=uC(dn,In),mx!=null&&px.push(HC(dn,mx,Ex))),dn.tag===3)return px;dn=dn.return}return[]}function rC(dn){if(dn===null)return null;do dn=dn.return;while(dn&&dn.tag!==5&&dn.tag!==27);return dn||null}function gN(dn,In,sx,px,mx){for(var Ex=In._reactName,Rx=[];sx!==null&&sx!==px;){var qx=sx,Xx=qx.alternate,uE=qx.stateNode;if(qx=qx.tag,Xx!==null&&Xx===px)break;qx!==5&&qx!==26&&qx!==27||uE===null||(Xx=uE,mx?(uE=uC(sx,Ex),uE!=null&&Rx.unshift(HC(sx,uE,Xx))):mx||(uE=uC(sx,Ex),uE!=null&&Rx.push(HC(sx,uE,Xx)))),sx=sx.return}Rx.length!==0&&dn.push({event:In,listeners:Rx})}var h$=/\r\n?/g,g$=/\u0000|\uFFFD/g;function mN(dn){return(typeof dn=="string"?dn:""+dn).replace(h$,`
`).replace(g$,"")}function vN(dn,In){return In=mN(In),mN(dn)===In}function XM(){}function lS(dn,In,sx,px,mx,Ex){switch(sx){case"children":typeof px=="string"?In==="body"||In==="textarea"&&px===""||MA(dn,px):(typeof px=="number"||typeof px=="bigint")&&In!=="body"&&MA(dn,""+px);break;case"className":hT(dn,"class",px);break;case"tabIndex":hT(dn,"tabindex",px);break;case"dir":case"role":case"viewBox":case"width":case"height":hT(dn,sx,px);break;case"style":yD(dn,px,Ex);break;case"data":if(In!=="object"){hT(dn,"data",px);break}case"src":case"href":if(px===""&&(In!=="a"||sx!=="href")){dn.removeAttribute(sx);break}if(px==null||typeof px=="function"||typeof px=="symbol"||typeof px=="boolean"){dn.removeAttribute(sx);break}px=iM(""+px),dn.setAttribute(sx,px);break;case"action":case"formAction":if(typeof px=="function"){dn.setAttribute(sx,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Ex=="function"&&(sx==="formAction"?(In!=="input"&&lS(dn,In,"name",mx.name,mx,null),lS(dn,In,"formEncType",mx.formEncType,mx,null),lS(dn,In,"formMethod",mx.formMethod,mx,null),lS(dn,In,"formTarget",mx.formTarget,mx,null)):(lS(dn,In,"encType",mx.encType,mx,null),lS(dn,In,"method",mx.method,mx,null),lS(dn,In,"target",mx.target,mx,null)));if(px==null||typeof px=="symbol"||typeof px=="boolean"){dn.removeAttribute(sx);break}px=iM(""+px),dn.setAttribute(sx,px);break;case"onClick":px!=null&&(dn.onclick=XM);break;case"onScroll":px!=null&&KE("scroll",dn);break;case"onScrollEnd":px!=null&&KE("scrollend",dn);break;case"dangerouslySetInnerHTML":if(px!=null){if(typeof px!="object"||!("__html"in px))throw Error(l(61));if(sx=px.__html,sx!=null){if(mx.children!=null)throw Error(l(60));dn.innerHTML=sx}}break;case"multiple":dn.multiple=px&&typeof px!="function"&&typeof px!="symbol";break;case"muted":dn.muted=px&&typeof px!="function"&&typeof px!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(px==null||typeof px=="function"||typeof px=="boolean"||typeof px=="symbol"){dn.removeAttribute("xlink:href");break}sx=iM(""+px),dn.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",sx);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":px!=null&&typeof px!="function"&&typeof px!="symbol"?dn.setAttribute(sx,""+px):dn.removeAttribute(sx);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":px&&typeof px!="function"&&typeof px!="symbol"?dn.setAttribute(sx,""):dn.removeAttribute(sx);break;case"capture":case"download":px===!0?dn.setAttribute(sx,""):px!==!1&&px!=null&&typeof px!="function"&&typeof px!="symbol"?dn.setAttribute(sx,px):dn.removeAttribute(sx);break;case"cols":case"rows":case"size":case"span":px!=null&&typeof px!="function"&&typeof px!="symbol"&&!isNaN(px)&&1<=px?dn.setAttribute(sx,px):dn.removeAttribute(sx);break;case"rowSpan":case"start":px==null||typeof px=="function"||typeof px=="symbol"||isNaN(px)?dn.removeAttribute(sx):dn.setAttribute(sx,px);break;case"popover":KE("beforetoggle",dn),KE("toggle",dn),LS(dn,"popover",px);break;case"xlinkActuate":bS(dn,"http://www.w3.org/1999/xlink","xlink:actuate",px);break;case"xlinkArcrole":bS(dn,"http://www.w3.org/1999/xlink","xlink:arcrole",px);break;case"xlinkRole":bS(dn,"http://www.w3.org/1999/xlink","xlink:role",px);break;case"xlinkShow":bS(dn,"http://www.w3.org/1999/xlink","xlink:show",px);break;case"xlinkTitle":bS(dn,"http://www.w3.org/1999/xlink","xlink:title",px);break;case"xlinkType":bS(dn,"http://www.w3.org/1999/xlink","xlink:type",px);break;case"xmlBase":bS(dn,"http://www.w3.org/XML/1998/namespace","xml:base",px);break;case"xmlLang":bS(dn,"http://www.w3.org/XML/1998/namespace","xml:lang",px);break;case"xmlSpace":bS(dn,"http://www.w3.org/XML/1998/namespace","xml:space",px);break;case"is":LS(dn,"is",px);break;case"innerText":case"textContent":break;default:(!(2<sx.length)||sx[0]!=="o"&&sx[0]!=="O"||sx[1]!=="n"&&sx[1]!=="N")&&(sx=HN.get(sx)||sx,LS(dn,sx,px))}}function QI(dn,In,sx,px,mx,Ex){switch(sx){case"style":yD(dn,px,Ex);break;case"dangerouslySetInnerHTML":if(px!=null){if(typeof px!="object"||!("__html"in px))throw Error(l(61));if(sx=px.__html,sx!=null){if(mx.children!=null)throw Error(l(60));dn.innerHTML=sx}}break;case"children":typeof px=="string"?MA(dn,px):(typeof px=="number"||typeof px=="bigint")&&MA(dn,""+px);break;case"onScroll":px!=null&&KE("scroll",dn);break;case"onScrollEnd":px!=null&&KE("scrollend",dn);break;case"onClick":px!=null&&(dn.onclick=XM);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dS.hasOwnProperty(sx))e:{if(sx[0]==="o"&&sx[1]==="n"&&(mx=sx.endsWith("Capture"),In=sx.slice(2,mx?sx.length-7:void 0),Ex=dn[$E]||null,Ex=Ex!=null?Ex[sx]:null,typeof Ex=="function"&&dn.removeEventListener(In,Ex,mx),typeof px=="function")){typeof Ex!="function"&&Ex!==null&&(sx in dn?dn[sx]=null:dn.hasAttribute(sx)&&dn.removeAttribute(sx)),dn.addEventListener(In,px,mx);break e}sx in dn?dn[sx]=px:px===!0?dn.setAttribute(sx,""):LS(dn,sx,px)}}}function kS(dn,In,sx){switch(In){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":KE("error",dn),KE("load",dn);var px=!1,mx=!1,Ex;for(Ex in sx)if(sx.hasOwnProperty(Ex)){var Rx=sx[Ex];if(Rx!=null)switch(Ex){case"src":px=!0;break;case"srcSet":mx=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,In));default:lS(dn,In,Ex,Rx,sx,null)}}mx&&lS(dn,In,"srcSet",sx.srcSet,sx,null),px&&lS(dn,In,"src",sx.src,sx,null);return;case"input":KE("invalid",dn);var qx=Ex=Rx=mx=null,Xx=null,uE=null;for(px in sx)if(sx.hasOwnProperty(px)){var yE=sx[px];if(yE!=null)switch(px){case"name":mx=yE;break;case"type":Rx=yE;break;case"checked":Xx=yE;break;case"defaultChecked":uE=yE;break;case"value":Ex=yE;break;case"defaultValue":qx=yE;break;case"children":case"dangerouslySetInnerHTML":if(yE!=null)throw Error(l(137,In));break;default:lS(dn,In,px,yE,sx,null)}}lC(dn,Ex,qx,Xx,uE,Rx,mx,!1),TA(dn);return;case"select":KE("invalid",dn),px=Rx=Ex=null;for(mx in sx)if(sx.hasOwnProperty(mx)&&(qx=sx[mx],qx!=null))switch(mx){case"value":Ex=qx;break;case"defaultValue":Rx=qx;break;case"multiple":px=qx;default:lS(dn,In,mx,qx,sx,null)}In=Ex,sx=Rx,dn.multiple=!!px,In!=null?CA(dn,!!px,In,!1):sx!=null&&CA(dn,!!px,sx,!0);return;case"textarea":KE("invalid",dn),Ex=mx=px=null;for(Rx in sx)if(sx.hasOwnProperty(Rx)&&(qx=sx[Rx],qx!=null))switch(Rx){case"value":px=qx;break;case"defaultValue":mx=qx;break;case"children":Ex=qx;break;case"dangerouslySetInnerHTML":if(qx!=null)throw Error(l(91));break;default:lS(dn,In,Rx,qx,sx,null)}mD(dn,px,mx,Ex),TA(dn);return;case"option":for(Xx in sx)if(sx.hasOwnProperty(Xx)&&(px=sx[Xx],px!=null))switch(Xx){case"selected":dn.selected=px&&typeof px!="function"&&typeof px!="symbol";break;default:lS(dn,In,Xx,px,sx,null)}return;case"dialog":KE("beforetoggle",dn),KE("toggle",dn),KE("cancel",dn),KE("close",dn);break;case"iframe":case"object":KE("load",dn);break;case"video":case"audio":for(px=0;px<VC.length;px++)KE(VC[px],dn);break;case"image":KE("error",dn),KE("load",dn);break;case"details":KE("toggle",dn);break;case"embed":case"source":case"link":KE("error",dn),KE("load",dn);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(uE in sx)if(sx.hasOwnProperty(uE)&&(px=sx[uE],px!=null))switch(uE){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,In));default:lS(dn,In,uE,px,sx,null)}return;default:if(pR(In)){for(yE in sx)sx.hasOwnProperty(yE)&&(px=sx[yE],px!==void 0&&QI(dn,In,yE,px,sx,void 0));return}}for(qx in sx)sx.hasOwnProperty(qx)&&(px=sx[qx],px!=null&&lS(dn,In,qx,px,sx,null))}function m$(dn,In,sx,px){switch(In){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var mx=null,Ex=null,Rx=null,qx=null,Xx=null,uE=null,yE=null;for(pE in sx){var SE=sx[pE];if(sx.hasOwnProperty(pE)&&SE!=null)switch(pE){case"checked":break;case"value":break;case"defaultValue":Xx=SE;default:px.hasOwnProperty(pE)||lS(dn,In,pE,null,px,SE)}}for(var fE in px){var pE=px[fE];if(SE=sx[fE],px.hasOwnProperty(fE)&&(pE!=null||SE!=null))switch(fE){case"type":Ex=pE;break;case"name":mx=pE;break;case"checked":uE=pE;break;case"defaultChecked":yE=pE;break;case"value":Rx=pE;break;case"defaultValue":qx=pE;break;case"children":case"dangerouslySetInnerHTML":if(pE!=null)throw Error(l(137,In));break;default:pE!==SE&&lS(dn,In,fE,pE,px,SE)}}cR(dn,Rx,qx,Xx,uE,yE,Ex,mx);return;case"select":pE=Rx=qx=fE=null;for(Ex in sx)if(Xx=sx[Ex],sx.hasOwnProperty(Ex)&&Xx!=null)switch(Ex){case"value":break;case"multiple":pE=Xx;default:px.hasOwnProperty(Ex)||lS(dn,In,Ex,null,px,Xx)}for(mx in px)if(Ex=px[mx],Xx=sx[mx],px.hasOwnProperty(mx)&&(Ex!=null||Xx!=null))switch(mx){case"value":fE=Ex;break;case"defaultValue":qx=Ex;break;case"multiple":Rx=Ex;default:Ex!==Xx&&lS(dn,In,mx,Ex,px,Xx)}In=qx,sx=Rx,px=pE,fE!=null?CA(dn,!!sx,fE,!1):!!px!=!!sx&&(In!=null?CA(dn,!!sx,In,!0):CA(dn,!!sx,sx?[]:"",!1));return;case"textarea":pE=fE=null;for(qx in sx)if(mx=sx[qx],sx.hasOwnProperty(qx)&&mx!=null&&!px.hasOwnProperty(qx))switch(qx){case"value":break;case"children":break;default:lS(dn,In,qx,null,px,mx)}for(Rx in px)if(mx=px[Rx],Ex=sx[Rx],px.hasOwnProperty(Rx)&&(mx!=null||Ex!=null))switch(Rx){case"value":fE=mx;break;case"defaultValue":pE=mx;break;case"children":break;case"dangerouslySetInnerHTML":if(mx!=null)throw Error(l(91));break;default:mx!==Ex&&lS(dn,In,Rx,mx,px,Ex)}gD(dn,fE,pE);return;case"option":for(var VE in sx)if(fE=sx[VE],sx.hasOwnProperty(VE)&&fE!=null&&!px.hasOwnProperty(VE))switch(VE){case"selected":dn.selected=!1;break;default:lS(dn,In,VE,null,px,fE)}for(Xx in px)if(fE=px[Xx],pE=sx[Xx],px.hasOwnProperty(Xx)&&fE!==pE&&(fE!=null||pE!=null))switch(Xx){case"selected":dn.selected=fE&&typeof fE!="function"&&typeof fE!="symbol";break;default:lS(dn,In,Xx,fE,px,pE)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var GE in sx)fE=sx[GE],sx.hasOwnProperty(GE)&&fE!=null&&!px.hasOwnProperty(GE)&&lS(dn,In,GE,null,px,fE);for(uE in px)if(fE=px[uE],pE=sx[uE],px.hasOwnProperty(uE)&&fE!==pE&&(fE!=null||pE!=null))switch(uE){case"children":case"dangerouslySetInnerHTML":if(fE!=null)throw Error(l(137,In));break;default:lS(dn,In,uE,fE,px,pE)}return;default:if(pR(In)){for(var uS in sx)fE=sx[uS],sx.hasOwnProperty(uS)&&fE!==void 0&&!px.hasOwnProperty(uS)&&QI(dn,In,uS,void 0,px,fE);for(yE in px)fE=px[yE],pE=sx[yE],!px.hasOwnProperty(yE)||fE===pE||fE===void 0&&pE===void 0||QI(dn,In,yE,fE,px,pE);return}}for(var aE in sx)fE=sx[aE],sx.hasOwnProperty(aE)&&fE!=null&&!px.hasOwnProperty(aE)&&lS(dn,In,aE,null,px,fE);for(SE in px)fE=px[SE],pE=sx[SE],!px.hasOwnProperty(SE)||fE===pE||fE==null&&pE==null||lS(dn,In,SE,fE,px,pE)}var JI=null,eD=null;function KM(dn){return dn.nodeType===9?dn:dn.ownerDocument}function yN(dn){switch(dn){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xN(dn,In){if(dn===0)switch(In){case"svg":return 1;case"math":return 2;default:return 0}return dn===1&&In==="foreignObject"?0:dn}function tD(dn,In){return dn==="textarea"||dn==="noscript"||typeof In.children=="string"||typeof In.children=="number"||typeof In.children=="bigint"||typeof In.dangerouslySetInnerHTML=="object"&&In.dangerouslySetInnerHTML!==null&&In.dangerouslySetInnerHTML.__html!=null}var rD=null;function v$(){var dn=window.event;return dn&&dn.type==="popstate"?dn===rD?!1:(rD=dn,!0):(rD=null,!1)}var _N=typeof setTimeout=="function"?setTimeout:void 0,y$=typeof clearTimeout=="function"?clearTimeout:void 0,EN=typeof Promise=="function"?Promise:void 0,x$=typeof queueMicrotask=="function"?queueMicrotask:typeof EN<"u"?function(dn){return EN.resolve(null).then(dn).catch(_$)}:_N;function _$(dn){setTimeout(function(){throw dn})}function tA(dn){return dn==="head"}function bN(dn,In){var sx=In,px=0,mx=0;do{var Ex=sx.nextSibling;if(dn.removeChild(sx),Ex&&Ex.nodeType===8)if(sx=Ex.data,sx==="/$"){if(0<px&&8>px){sx=px;var Rx=dn.ownerDocument;if(sx&1&&jC(Rx.documentElement),sx&2&&jC(Rx.body),sx&4)for(sx=Rx.head,jC(sx),Rx=sx.firstChild;Rx;){var qx=Rx.nextSibling,Xx=Rx.nodeName;Rx[pS]||Xx==="SCRIPT"||Xx==="STYLE"||Xx==="LINK"&&Rx.rel.toLowerCase()==="stylesheet"||sx.removeChild(Rx),Rx=qx}}if(mx===0){dn.removeChild(Ex),eM(In);return}mx--}else sx==="$"||sx==="$?"||sx==="$!"?mx++:px=sx.charCodeAt(0)-48;else px=0;sx=Ex}while(sx);eM(In)}function nD(dn){var In=dn.firstChild;for(In&&In.nodeType===10&&(In=In.nextSibling);In;){var sx=In;switch(In=In.nextSibling,sx.nodeName){case"HTML":case"HEAD":case"BODY":nD(sx),FS(sx);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(sx.rel.toLowerCase()==="stylesheet")continue}dn.removeChild(sx)}}function E$(dn,In,sx,px){for(;dn.nodeType===1;){var mx=sx;if(dn.nodeName.toLowerCase()!==In.toLowerCase()){if(!px&&(dn.nodeName!=="INPUT"||dn.type!=="hidden"))break}else if(px){if(!dn[pS])switch(In){case"meta":if(!dn.hasAttribute("itemprop"))break;return dn;case"link":if(Ex=dn.getAttribute("rel"),Ex==="stylesheet"&&dn.hasAttribute("data-precedence"))break;if(Ex!==mx.rel||dn.getAttribute("href")!==(mx.href==null||mx.href===""?null:mx.href)||dn.getAttribute("crossorigin")!==(mx.crossOrigin==null?null:mx.crossOrigin)||dn.getAttribute("title")!==(mx.title==null?null:mx.title))break;return dn;case"style":if(dn.hasAttribute("data-precedence"))break;return dn;case"script":if(Ex=dn.getAttribute("src"),(Ex!==(mx.src==null?null:mx.src)||dn.getAttribute("type")!==(mx.type==null?null:mx.type)||dn.getAttribute("crossorigin")!==(mx.crossOrigin==null?null:mx.crossOrigin))&&Ex&&dn.hasAttribute("async")&&!dn.hasAttribute("itemprop"))break;return dn;default:return dn}}else if(In==="input"&&dn.type==="hidden"){var Ex=mx.name==null?null:""+mx.name;if(mx.type==="hidden"&&dn.getAttribute("name")===Ex)return dn}else return dn;if(dn=yT(dn.nextSibling),dn===null)break}return null}function b$(dn,In,sx){if(In==="")return null;for(;dn.nodeType!==3;)if((dn.nodeType!==1||dn.nodeName!=="INPUT"||dn.type!=="hidden")&&!sx||(dn=yT(dn.nextSibling),dn===null))return null;return dn}function iD(dn){return dn.data==="$!"||dn.data==="$?"&&dn.ownerDocument.readyState==="complete"}function S$(dn,In){var sx=dn.ownerDocument;if(dn.data!=="$?"||sx.readyState==="complete")In();else{var px=function(){In(),sx.removeEventListener("DOMContentLoaded",px)};sx.addEventListener("DOMContentLoaded",px),dn._reactRetry=px}}function yT(dn){for(;dn!=null;dn=dn.nextSibling){var In=dn.nodeType;if(In===1||In===3)break;if(In===8){if(In=dn.data,In==="$"||In==="$!"||In==="$?"||In==="F!"||In==="F")break;if(In==="/$")return null}}return dn}var aD=null;function SN(dn){dn=dn.previousSibling;for(var In=0;dn;){if(dn.nodeType===8){var sx=dn.data;if(sx==="$"||sx==="$!"||sx==="$?"){if(In===0)return dn;In--}else sx==="/$"&&In++}dn=dn.previousSibling}return null}function wN(dn,In,sx){switch(In=KM(sx),dn){case"html":if(dn=In.documentElement,!dn)throw Error(l(452));return dn;case"head":if(dn=In.head,!dn)throw Error(l(453));return dn;case"body":if(dn=In.body,!dn)throw Error(l(454));return dn;default:throw Error(l(451))}}function jC(dn){for(var In=dn.attributes;In.length;)dn.removeAttributeNode(In[0]);FS(dn)}var dT=new Map,TN=new Set;function QM(dn){return typeof dn.getRootNode=="function"?dn.getRootNode():dn.nodeType===9?dn:dn.ownerDocument}var kT=Sx.d;Sx.d={f:w$,r:T$,D:A$,C:C$,L:M$,m:R$,X:D$,S:I$,M:O$};function w$(){var dn=kT.f(),In=zM();return dn||In}function T$(dn){var In=GS(dn);In!==null&&In.tag===5&&In.type==="form"?HO(In):kT.r(dn)}var nC=typeof document>"u"?null:document;function AN(dn,In,sx){var px=nC;if(px&&typeof In=="string"&&In){var mx=oT(In);mx='link[rel="'+dn+'"][href="'+mx+'"]',typeof sx=="string"&&(mx+='[crossorigin="'+sx+'"]'),TN.has(mx)||(TN.add(mx),dn={rel:dn,crossOrigin:sx,href:In},px.querySelector(mx)===null&&(In=px.createElement("link"),kS(In,"link",dn),qE(In),px.head.appendChild(In)))}}function A$(dn){kT.D(dn),AN("dns-prefetch",dn,null)}function C$(dn,In){kT.C(dn,In),AN("preconnect",dn,In)}function M$(dn,In,sx){kT.L(dn,In,sx);var px=nC;if(px&&dn&&In){var mx='link[rel="preload"][as="'+oT(In)+'"]';In==="image"&&sx&&sx.imageSrcSet?(mx+='[imagesrcset="'+oT(sx.imageSrcSet)+'"]',typeof sx.imageSizes=="string"&&(mx+='[imagesizes="'+oT(sx.imageSizes)+'"]')):mx+='[href="'+oT(dn)+'"]';var Ex=mx;switch(In){case"style":Ex=iC(dn);break;case"script":Ex=aC(dn)}dT.has(Ex)||(dn=ar({rel:"preload",href:In==="image"&&sx&&sx.imageSrcSet?void 0:dn,as:In},sx),dT.set(Ex,dn),px.querySelector(mx)!==null||In==="style"&&px.querySelector(ZC(Ex))||In==="script"&&px.querySelector(YC(Ex))||(In=px.createElement("link"),kS(In,"link",dn),qE(In),px.head.appendChild(In)))}}function R$(dn,In){kT.m(dn,In);var sx=nC;if(sx&&dn){var px=In&&typeof In.as=="string"?In.as:"script",mx='link[rel="modulepreload"][as="'+oT(px)+'"][href="'+oT(dn)+'"]',Ex=mx;switch(px){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Ex=aC(dn)}if(!dT.has(Ex)&&(dn=ar({rel:"modulepreload",href:dn},In),dT.set(Ex,dn),sx.querySelector(mx)===null)){switch(px){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(sx.querySelector(YC(Ex)))return}px=sx.createElement("link"),kS(px,"link",dn),qE(px),sx.head.appendChild(px)}}}function I$(dn,In,sx){kT.S(dn,In,sx);var px=nC;if(px&&dn){var mx=CE(px).hoistableStyles,Ex=iC(dn);In=In||"default";var Rx=mx.get(Ex);if(!Rx){var qx={loading:0,preload:null};if(Rx=px.querySelector(ZC(Ex)))qx.loading=5;else{dn=ar({rel:"stylesheet",href:dn,"data-precedence":In},sx),(sx=dT.get(Ex))&&oD(dn,sx);var Xx=Rx=px.createElement("link");qE(Xx),kS(Xx,"link",dn),Xx._p=new Promise(function(uE,yE){Xx.onload=uE,Xx.onerror=yE}),Xx.addEventListener("load",function(){qx.loading|=1}),Xx.addEventListener("error",function(){qx.loading|=2}),qx.loading|=4,JM(Rx,In,px)}Rx={type:"stylesheet",instance:Rx,count:1,state:qx},mx.set(Ex,Rx)}}}function D$(dn,In){kT.X(dn,In);var sx=nC;if(sx&&dn){var px=CE(sx).hoistableScripts,mx=aC(dn),Ex=px.get(mx);Ex||(Ex=sx.querySelector(YC(mx)),Ex||(dn=ar({src:dn,async:!0},In),(In=dT.get(mx))&&sD(dn,In),Ex=sx.createElement("script"),qE(Ex),kS(Ex,"link",dn),sx.head.appendChild(Ex)),Ex={type:"script",instance:Ex,count:1,state:null},px.set(mx,Ex))}}function O$(dn,In){kT.M(dn,In);var sx=nC;if(sx&&dn){var px=CE(sx).hoistableScripts,mx=aC(dn),Ex=px.get(mx);Ex||(Ex=sx.querySelector(YC(mx)),Ex||(dn=ar({src:dn,async:!0,type:"module"},In),(In=dT.get(mx))&&sD(dn,In),Ex=sx.createElement("script"),qE(Ex),kS(Ex,"link",dn),sx.head.appendChild(Ex)),Ex={type:"script",instance:Ex,count:1,state:null},px.set(mx,Ex))}}function CN(dn,In,sx,px){var mx=(mx=Lx.current)?QM(mx):null;if(!mx)throw Error(l(446));switch(dn){case"meta":case"title":return null;case"style":return typeof sx.precedence=="string"&&typeof sx.href=="string"?(In=iC(sx.href),sx=CE(mx).hoistableStyles,px=sx.get(In),px||(px={type:"style",instance:null,count:0,state:null},sx.set(In,px)),px):{type:"void",instance:null,count:0,state:null};case"link":if(sx.rel==="stylesheet"&&typeof sx.href=="string"&&typeof sx.precedence=="string"){dn=iC(sx.href);var Ex=CE(mx).hoistableStyles,Rx=Ex.get(dn);if(Rx||(mx=mx.ownerDocument||mx,Rx={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Ex.set(dn,Rx),(Ex=mx.querySelector(ZC(dn)))&&!Ex._p&&(Rx.instance=Ex,Rx.state.loading=5),dT.has(dn)||(sx={rel:"preload",as:"style",href:sx.href,crossOrigin:sx.crossOrigin,integrity:sx.integrity,media:sx.media,hrefLang:sx.hrefLang,referrerPolicy:sx.referrerPolicy},dT.set(dn,sx),Ex||P$(mx,dn,sx,Rx.state))),In&&px===null)throw Error(l(528,""));return Rx}if(In&&px!==null)throw Error(l(529,""));return null;case"script":return In=sx.async,sx=sx.src,typeof sx=="string"&&In&&typeof In!="function"&&typeof In!="symbol"?(In=aC(sx),sx=CE(mx).hoistableScripts,px=sx.get(In),px||(px={type:"script",instance:null,count:0,state:null},sx.set(In,px)),px):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,dn))}}function iC(dn){return'href="'+oT(dn)+'"'}function ZC(dn){return'link[rel="stylesheet"]['+dn+"]"}function MN(dn){return ar({},dn,{"data-precedence":dn.precedence,precedence:null})}function P$(dn,In,sx,px){dn.querySelector('link[rel="preload"][as="style"]['+In+"]")?px.loading=1:(In=dn.createElement("link"),px.preload=In,In.addEventListener("load",function(){return px.loading|=1}),In.addEventListener("error",function(){return px.loading|=2}),kS(In,"link",sx),qE(In),dn.head.appendChild(In))}function aC(dn){return'[src="'+oT(dn)+'"]'}function YC(dn){return"script[async]"+dn}function RN(dn,In,sx){if(In.count++,In.instance===null)switch(In.type){case"style":var px=dn.querySelector('style[data-href~="'+oT(sx.href)+'"]');if(px)return In.instance=px,qE(px),px;var mx=ar({},sx,{"data-href":sx.href,"data-precedence":sx.precedence,href:null,precedence:null});return px=(dn.ownerDocument||dn).createElement("style"),qE(px),kS(px,"style",mx),JM(px,sx.precedence,dn),In.instance=px;case"stylesheet":mx=iC(sx.href);var Ex=dn.querySelector(ZC(mx));if(Ex)return In.state.loading|=4,In.instance=Ex,qE(Ex),Ex;px=MN(sx),(mx=dT.get(mx))&&oD(px,mx),Ex=(dn.ownerDocument||dn).createElement("link"),qE(Ex);var Rx=Ex;return Rx._p=new Promise(function(qx,Xx){Rx.onload=qx,Rx.onerror=Xx}),kS(Ex,"link",px),In.state.loading|=4,JM(Ex,sx.precedence,dn),In.instance=Ex;case"script":return Ex=aC(sx.src),(mx=dn.querySelector(YC(Ex)))?(In.instance=mx,qE(mx),mx):(px=sx,(mx=dT.get(Ex))&&(px=ar({},sx),sD(px,mx)),dn=dn.ownerDocument||dn,mx=dn.createElement("script"),qE(mx),kS(mx,"link",px),dn.head.appendChild(mx),In.instance=mx);case"void":return null;default:throw Error(l(443,In.type))}else In.type==="stylesheet"&&(In.state.loading&4)===0&&(px=In.instance,In.state.loading|=4,JM(px,sx.precedence,dn));return In.instance}function JM(dn,In,sx){for(var px=sx.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),mx=px.length?px[px.length-1]:null,Ex=mx,Rx=0;Rx<px.length;Rx++){var qx=px[Rx];if(qx.dataset.precedence===In)Ex=qx;else if(Ex!==mx)break}Ex?Ex.parentNode.insertBefore(dn,Ex.nextSibling):(In=sx.nodeType===9?sx.head:sx,In.insertBefore(dn,In.firstChild))}function oD(dn,In){dn.crossOrigin==null&&(dn.crossOrigin=In.crossOrigin),dn.referrerPolicy==null&&(dn.referrerPolicy=In.referrerPolicy),dn.title==null&&(dn.title=In.title)}function sD(dn,In){dn.crossOrigin==null&&(dn.crossOrigin=In.crossOrigin),dn.referrerPolicy==null&&(dn.referrerPolicy=In.referrerPolicy),dn.integrity==null&&(dn.integrity=In.integrity)}var eR=null;function IN(dn,In,sx){if(eR===null){var px=new Map,mx=eR=new Map;mx.set(sx,px)}else mx=eR,px=mx.get(sx),px||(px=new Map,mx.set(sx,px));if(px.has(dn))return px;for(px.set(dn,null),sx=sx.getElementsByTagName(dn),mx=0;mx<sx.length;mx++){var Ex=sx[mx];if(!(Ex[pS]||Ex[NE]||dn==="link"&&Ex.getAttribute("rel")==="stylesheet")&&Ex.namespaceURI!=="http://www.w3.org/2000/svg"){var Rx=Ex.getAttribute(In)||"";Rx=dn+Rx;var qx=px.get(Rx);qx?qx.push(Ex):px.set(Rx,[Ex])}}return px}function DN(dn,In,sx){dn=dn.ownerDocument||dn,dn.head.insertBefore(sx,In==="title"?dn.querySelector("head > title"):null)}function N$(dn,In,sx){if(sx===1||In.itemProp!=null)return!1;switch(dn){case"meta":case"title":return!0;case"style":if(typeof In.precedence!="string"||typeof In.href!="string"||In.href==="")break;return!0;case"link":if(typeof In.rel!="string"||typeof In.href!="string"||In.href===""||In.onLoad||In.onError)break;switch(In.rel){case"stylesheet":return dn=In.disabled,typeof In.precedence=="string"&&dn==null;default:return!0}case"script":if(In.async&&typeof In.async!="function"&&typeof In.async!="symbol"&&!In.onLoad&&!In.onError&&In.src&&typeof In.src=="string")return!0}return!1}function ON(dn){return!(dn.type==="stylesheet"&&(dn.state.loading&3)===0)}var WC=null;function L$(){}function $$(dn,In,sx){if(WC===null)throw Error(l(475));var px=WC;if(In.type==="stylesheet"&&(typeof sx.media!="string"||matchMedia(sx.media).matches!==!1)&&(In.state.loading&4)===0){if(In.instance===null){var mx=iC(sx.href),Ex=dn.querySelector(ZC(mx));if(Ex){dn=Ex._p,dn!==null&&typeof dn=="object"&&typeof dn.then=="function"&&(px.count++,px=tR.bind(px),dn.then(px,px)),In.state.loading|=4,In.instance=Ex,qE(Ex);return}Ex=dn.ownerDocument||dn,sx=MN(sx),(mx=dT.get(mx))&&oD(sx,mx),Ex=Ex.createElement("link"),qE(Ex);var Rx=Ex;Rx._p=new Promise(function(qx,Xx){Rx.onload=qx,Rx.onerror=Xx}),kS(Ex,"link",sx),In.instance=Ex}px.stylesheets===null&&(px.stylesheets=new Map),px.stylesheets.set(In,dn),(dn=In.state.preload)&&(In.state.loading&3)===0&&(px.count++,In=tR.bind(px),dn.addEventListener("load",In),dn.addEventListener("error",In))}}function B$(){if(WC===null)throw Error(l(475));var dn=WC;return dn.stylesheets&&dn.count===0&&lD(dn,dn.stylesheets),0<dn.count?function(In){var sx=setTimeout(function(){if(dn.stylesheets&&lD(dn,dn.stylesheets),dn.unsuspend){var px=dn.unsuspend;dn.unsuspend=null,px()}},6e4);return dn.unsuspend=In,function(){dn.unsuspend=null,clearTimeout(sx)}}:null}function tR(){if(this.count--,this.count===0){if(this.stylesheets)lD(this,this.stylesheets);else if(this.unsuspend){var dn=this.unsuspend;this.unsuspend=null,dn()}}}var rR=null;function lD(dn,In){dn.stylesheets=null,dn.unsuspend!==null&&(dn.count++,rR=new Map,In.forEach(k$,dn),rR=null,tR.call(dn))}function k$(dn,In){if(!(In.state.loading&4)){var sx=rR.get(dn);if(sx)var px=sx.get(null);else{sx=new Map,rR.set(dn,sx);for(var mx=dn.querySelectorAll("link[data-precedence],style[data-precedence]"),Ex=0;Ex<mx.length;Ex++){var Rx=mx[Ex];(Rx.nodeName==="LINK"||Rx.getAttribute("media")!=="not all")&&(sx.set(Rx.dataset.precedence,Rx),px=Rx)}px&&sx.set(null,px)}mx=In.instance,Rx=mx.getAttribute("data-precedence"),Ex=sx.get(Rx)||px,Ex===px&&sx.set(null,mx),sx.set(Rx,mx),this.count++,px=tR.bind(this),mx.addEventListener("load",px),mx.addEventListener("error",px),Ex?Ex.parentNode.insertBefore(mx,Ex.nextSibling):(dn=dn.nodeType===9?dn.head:dn,dn.insertBefore(mx,dn.firstChild)),In.state.loading|=4}}var XC={$$typeof:ax,Provider:null,Consumer:null,_currentValue:Ax,_currentValue2:Ax,_threadCount:0};function F$(dn,In,sx,px,mx,Ex,Rx,qx){this.tag=1,this.containerInfo=dn,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vE(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vE(0),this.hiddenUpdates=vE(null),this.identifierPrefix=px,this.onUncaughtError=mx,this.onCaughtError=Ex,this.onRecoverableError=Rx,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=qx,this.incompleteTransitions=new Map}function PN(dn,In,sx,px,mx,Ex,Rx,qx,Xx,uE,yE,SE){return dn=new F$(dn,In,sx,Rx,qx,Xx,uE,SE),In=1,Ex===!0&&(In|=24),Ex=JS(3,null,null,In),dn.current=Ex,Ex.stateNode=dn,In=GR(),In.refCount++,dn.pooledCache=In,In.refCount++,Ex.memoizedState={element:px,isDehydrated:sx,cache:In},jR(Ex),dn}function NN(dn){return dn?(dn=$A,dn):$A}function LN(dn,In,sx,px,mx,Ex){mx=NN(mx),px.context===null?px.context=mx:px.pendingContext=mx,px=GT(In),px.payload={element:sx},Ex=Ex===void 0?null:Ex,Ex!==null&&(px.callback=Ex),sx=zT(dn,px,In),sx!==null&&(iT(sx,dn,In),AC(sx,dn,In))}function $N(dn,In){if(dn=dn.memoizedState,dn!==null&&dn.dehydrated!==null){var sx=dn.retryLane;dn.retryLane=sx!==0&&sx<In?sx:In}}function uD(dn,In){$N(dn,In),(dn=dn.alternate)&&$N(dn,In)}function BN(dn){if(dn.tag===13){var In=LA(dn,67108864);In!==null&&iT(In,dn,67108864),uD(dn,67108864)}}var nR=!0;function U$(dn,In,sx,px){var mx=xx.T;xx.T=null;var Ex=Sx.p;try{Sx.p=2,cD(dn,In,sx,px)}finally{Sx.p=Ex,xx.T=mx}}function q$(dn,In,sx,px){var mx=xx.T;xx.T=null;var Ex=Sx.p;try{Sx.p=8,cD(dn,In,sx,px)}finally{Sx.p=Ex,xx.T=mx}}function cD(dn,In,sx,px){if(nR){var mx=fD(px);if(mx===null)KI(dn,In,px,iR,sx),FN(dn,px);else if(z$(mx,dn,In,sx,px))px.stopPropagation();else if(FN(dn,px),In&4&&-1<G$.indexOf(dn)){for(;mx!==null;){var Ex=GS(mx);if(Ex!==null)switch(Ex.tag){case 3:if(Ex=Ex.stateNode,Ex.current.memoizedState.isDehydrated){var Rx=xE(Ex.pendingLanes);if(Rx!==0){var qx=Ex;for(qx.pendingLanes|=2,qx.entangledLanes|=2;Rx;){var Xx=1<<31-Qx(Rx);qx.entanglements[1]|=Xx,Rx&=~Xx}ST(Ex),(aS&6)===0&&(qM=iE()+500,zC(0))}}break;case 13:qx=LA(Ex,2),qx!==null&&iT(qx,Ex,2),zM(),uD(Ex,2)}if(Ex=fD(px),Ex===null&&KI(dn,In,px,iR,sx),Ex===mx)break;mx=Ex}mx!==null&&px.stopPropagation()}else KI(dn,In,px,null,sx)}}function fD(dn){return dn=hR(dn),pD(dn)}var iR=null;function pD(dn){if(iR=null,dn=NS(dn),dn!==null){var In=c(dn);if(In===null)dn=null;else{var sx=In.tag;if(sx===13){if(dn=p(In),dn!==null)return dn;dn=null}else if(sx===3){if(In.stateNode.current.memoizedState.isDehydrated)return In.tag===3?In.stateNode.containerInfo:null;dn=null}else In!==dn&&(dn=null)}}return iR=dn,null}function kN(dn){switch(dn){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wx()){case AE:return 2;case ME:return 8;case EE:case bE:return 32;case kE:return 268435456;default:return 32}default:return 32}}var dD=!1,rA=null,nA=null,iA=null,KC=new Map,QC=new Map,aA=[],G$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FN(dn,In){switch(dn){case"focusin":case"focusout":rA=null;break;case"dragenter":case"dragleave":nA=null;break;case"mouseover":case"mouseout":iA=null;break;case"pointerover":case"pointerout":KC.delete(In.pointerId);break;case"gotpointercapture":case"lostpointercapture":QC.delete(In.pointerId)}}function JC(dn,In,sx,px,mx,Ex){return dn===null||dn.nativeEvent!==Ex?(dn={blockedOn:In,domEventName:sx,eventSystemFlags:px,nativeEvent:Ex,targetContainers:[mx]},In!==null&&(In=GS(In),In!==null&&BN(In)),dn):(dn.eventSystemFlags|=px,In=dn.targetContainers,mx!==null&&In.indexOf(mx)===-1&&In.push(mx),dn)}function z$(dn,In,sx,px,mx){switch(In){case"focusin":return rA=JC(rA,dn,In,sx,px,mx),!0;case"dragenter":return nA=JC(nA,dn,In,sx,px,mx),!0;case"mouseover":return iA=JC(iA,dn,In,sx,px,mx),!0;case"pointerover":var Ex=mx.pointerId;return KC.set(Ex,JC(KC.get(Ex)||null,dn,In,sx,px,mx)),!0;case"gotpointercapture":return Ex=mx.pointerId,QC.set(Ex,JC(QC.get(Ex)||null,dn,In,sx,px,mx)),!0}return!1}function UN(dn){var In=NS(dn.target);if(In!==null){var sx=c(In);if(sx!==null){if(In=sx.tag,In===13){if(In=p(sx),In!==null){dn.blockedOn=In,DE(dn.priority,function(){if(sx.tag===13){var px=nT();px=jx(px);var mx=LA(sx,px);mx!==null&&iT(mx,sx,px),uD(sx,px)}});return}}else if(In===3&&sx.stateNode.current.memoizedState.isDehydrated){dn.blockedOn=sx.tag===3?sx.stateNode.containerInfo:null;return}}}dn.blockedOn=null}function aR(dn){if(dn.blockedOn!==null)return!1;for(var In=dn.targetContainers;0<In.length;){var sx=fD(dn.nativeEvent);if(sx===null){sx=dn.nativeEvent;var px=new sx.constructor(sx.type,sx);dR=px,sx.target.dispatchEvent(px),dR=null}else return In=GS(sx),In!==null&&BN(In),dn.blockedOn=sx,!1;In.shift()}return!0}function qN(dn,In,sx){aR(dn)&&sx.delete(In)}function V$(){dD=!1,rA!==null&&aR(rA)&&(rA=null),nA!==null&&aR(nA)&&(nA=null),iA!==null&&aR(iA)&&(iA=null),KC.forEach(qN),QC.forEach(qN)}function oR(dn,In){dn.blockedOn===In&&(dn.blockedOn=null,dD||(dD=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,V$)))}var sR=null;function GN(dn){sR!==dn&&(sR=dn,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sR===dn&&(sR=null);for(var In=0;In<dn.length;In+=3){var sx=dn[In],px=dn[In+1],mx=dn[In+2];if(typeof px!="function"){if(pD(px||sx)===null)continue;break}var Ex=GS(sx);Ex!==null&&(dn.splice(In,3),In-=3,fI(Ex,{pending:!0,data:mx,method:sx.method,action:px},px,mx))}}))}function eM(dn){function In(Xx){return oR(Xx,dn)}rA!==null&&oR(rA,dn),nA!==null&&oR(nA,dn),iA!==null&&oR(iA,dn),KC.forEach(In),QC.forEach(In);for(var sx=0;sx<aA.length;sx++){var px=aA[sx];px.blockedOn===dn&&(px.blockedOn=null)}for(;0<aA.length&&(sx=aA[0],sx.blockedOn===null);)UN(sx),sx.blockedOn===null&&aA.shift();if(sx=(dn.ownerDocument||dn).$$reactFormReplay,sx!=null)for(px=0;px<sx.length;px+=3){var mx=sx[px],Ex=sx[px+1],Rx=mx[$E]||null;if(typeof Ex=="function")Rx||GN(sx);else if(Rx){var qx=null;if(Ex&&Ex.hasAttribute("formAction")){if(mx=Ex,Rx=Ex[$E]||null)qx=Rx.formAction;else if(pD(mx)!==null)continue}else qx=Rx.action;typeof qx=="function"?sx[px+1]=qx:(sx.splice(px,3),px-=3),GN(sx)}}}function hD(dn){this._internalRoot=dn}lR.prototype.render=hD.prototype.render=function(dn){var In=this._internalRoot;if(In===null)throw Error(l(409));var sx=In.current,px=nT();LN(sx,px,dn,In,null,null)},lR.prototype.unmount=hD.prototype.unmount=function(){var dn=this._internalRoot;if(dn!==null){this._internalRoot=null;var In=dn.containerInfo;LN(dn.current,2,null,dn,null,null),zM(),In[HE]=null}};function lR(dn){this._internalRoot=dn}lR.prototype.unstable_scheduleHydration=function(dn){if(dn){var In=gE();dn={blockedOn:null,target:dn,priority:In};for(var sx=0;sx<aA.length&&In!==0&&In<aA[sx].priority;sx++);aA.splice(sx,0,dn),sx===0&&UN(dn)}};var zN=n.version;if(zN!=="19.1.0")throw Error(l(527,zN,"19.1.0"));Sx.findDOMNode=function(dn){var In=dn._reactInternals;if(In===void 0)throw typeof dn.render=="function"?Error(l(188)):(dn=Object.keys(dn).join(","),Error(l(268,dn)));return dn=Q(In),dn=dn!==null?Ct(dn):null,dn=dn===null?null:dn.stateNode,dn};var H$={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:xx,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uR.isDisabled&&uR.supportsFiber)try{Ix=uR.inject(H$),Bx=uR}catch{}}return reactDomClient_production.createRoot=function(dn,In){if(!u(dn))throw Error(l(299));var sx=!1,px="",mx=aP,Ex=oP,Rx=sP,qx=null;return In!=null&&(In.unstable_strictMode===!0&&(sx=!0),In.identifierPrefix!==void 0&&(px=In.identifierPrefix),In.onUncaughtError!==void 0&&(mx=In.onUncaughtError),In.onCaughtError!==void 0&&(Ex=In.onCaughtError),In.onRecoverableError!==void 0&&(Rx=In.onRecoverableError),In.unstable_transitionCallbacks!==void 0&&(qx=In.unstable_transitionCallbacks)),In=PN(dn,1,!1,null,null,sx,px,mx,Ex,Rx,qx,null),dn[HE]=In.current,XI(dn),new hD(In)},reactDomClient_production.hydrateRoot=function(dn,In,sx){if(!u(dn))throw Error(l(299));var px=!1,mx="",Ex=aP,Rx=oP,qx=sP,Xx=null,uE=null;return sx!=null&&(sx.unstable_strictMode===!0&&(px=!0),sx.identifierPrefix!==void 0&&(mx=sx.identifierPrefix),sx.onUncaughtError!==void 0&&(Ex=sx.onUncaughtError),sx.onCaughtError!==void 0&&(Rx=sx.onCaughtError),sx.onRecoverableError!==void 0&&(qx=sx.onRecoverableError),sx.unstable_transitionCallbacks!==void 0&&(Xx=sx.unstable_transitionCallbacks),sx.formState!==void 0&&(uE=sx.formState)),In=PN(dn,1,!0,In,sx??null,px,mx,Ex,Rx,qx,Xx,uE),In.context=NN(null),sx=In.current,px=nT(),px=jx(px),mx=GT(px),mx.callback=null,zT(sx,mx,px),sx=px,In.current.lanes=sx,RE(In,sx),ST(In),dn[HE]=In.current,XI(dn),new lR(In)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(t){let n=t.length;for(;--n>=0;)t[n]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(t,n,a,l,u){this.static_tree=t,this.extra_bits=n,this.extra_base=a,this.elems=l,this.max_length=u,this.has_stree=t&&t.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}const d_code=t=>t<256?_dist_code[t]:_dist_code[256+(t>>>7)],put_short=(t,n)=>{t.pending_buf[t.pending++]=n&255,t.pending_buf[t.pending++]=n>>>8&255},send_bits=(t,n,a)=>{t.bi_valid>Buf_size-a?(t.bi_buf|=n<<t.bi_valid&65535,put_short(t,t.bi_buf),t.bi_buf=n>>Buf_size-t.bi_valid,t.bi_valid+=a-Buf_size):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=a)},send_code=(t,n,a)=>{send_bits(t,a[n*2],a[n*2+1])},bi_reverse=(t,n)=>{let a=0;do a|=t&1,t>>>=1,a<<=1;while(--n>0);return a>>>1},bi_flush=t=>{t.bi_valid===16?(put_short(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},gen_bitlen=(t,n)=>{const a=n.dyn_tree,l=n.max_code,u=n.stat_desc.static_tree,c=n.stat_desc.has_stree,p=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,Q=n.stat_desc.max_length;let Ct,ar,en,tn,on,cn,gn=0;for(tn=0;tn<=MAX_BITS$1;tn++)t.bl_count[tn]=0;for(a[t.heap[t.heap_max]*2+1]=0,Ct=t.heap_max+1;Ct<HEAP_SIZE$1;Ct++)ar=t.heap[Ct],tn=a[a[ar*2+1]*2+1]+1,tn>Q&&(tn=Q,gn++),a[ar*2+1]=tn,!(ar>l)&&(t.bl_count[tn]++,on=0,ar>=d&&(on=p[ar-d]),cn=a[ar*2],t.opt_len+=cn*(tn+on),c&&(t.static_len+=cn*(u[ar*2+1]+on)));if(gn!==0){do{for(tn=Q-1;t.bl_count[tn]===0;)tn--;t.bl_count[tn]--,t.bl_count[tn+1]+=2,t.bl_count[Q]--,gn-=2}while(gn>0);for(tn=Q;tn!==0;tn--)for(ar=t.bl_count[tn];ar!==0;)en=t.heap[--Ct],!(en>l)&&(a[en*2+1]!==tn&&(t.opt_len+=(tn-a[en*2+1])*a[en*2],a[en*2+1]=tn),ar--)}},gen_codes=(t,n,a)=>{const l=new Array(MAX_BITS$1+1);let u=0,c,p;for(c=1;c<=MAX_BITS$1;c++)u=u+a[c-1]<<1,l[c]=u;for(p=0;p<=n;p++){let d=t[p*2+1];d!==0&&(t[p*2]=bi_reverse(l[d]++,d))}},tr_static_init=()=>{let t,n,a,l,u;const c=new Array(MAX_BITS$1+1);for(a=0,l=0;l<LENGTH_CODES$1-1;l++)for(base_length[l]=a,t=0;t<1<<extra_lbits[l];t++)_length_code[a++]=l;for(_length_code[a-1]=l,u=0,l=0;l<16;l++)for(base_dist[l]=u,t=0;t<1<<extra_dbits[l];t++)_dist_code[u++]=l;for(u>>=7;l<D_CODES$1;l++)for(base_dist[l]=u<<7,t=0;t<1<<extra_dbits[l]-7;t++)_dist_code[256+u++]=l;for(n=0;n<=MAX_BITS$1;n++)c[n]=0;for(t=0;t<=143;)static_ltree[t*2+1]=8,t++,c[8]++;for(;t<=255;)static_ltree[t*2+1]=9,t++,c[9]++;for(;t<=279;)static_ltree[t*2+1]=7,t++,c[7]++;for(;t<=287;)static_ltree[t*2+1]=8,t++,c[8]++;for(gen_codes(static_ltree,L_CODES$1+1,c),t=0;t<D_CODES$1;t++)static_dtree[t*2+1]=5,static_dtree[t*2]=bi_reverse(t,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=t=>{let n;for(n=0;n<L_CODES$1;n++)t.dyn_ltree[n*2]=0;for(n=0;n<D_CODES$1;n++)t.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES$1;n++)t.bl_tree[n*2]=0;t.dyn_ltree[END_BLOCK*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bi_windup=t=>{t.bi_valid>8?put_short(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},smaller=(t,n,a,l)=>{const u=n*2,c=a*2;return t[u]<t[c]||t[u]===t[c]&&l[n]<=l[a]},pqdownheap=(t,n,a)=>{const l=t.heap[a];let u=a<<1;for(;u<=t.heap_len&&(u<t.heap_len&&smaller(n,t.heap[u+1],t.heap[u],t.depth)&&u++,!smaller(n,l,t.heap[u],t.depth));)t.heap[a]=t.heap[u],a=u,u<<=1;t.heap[a]=l},compress_block=(t,n,a)=>{let l,u,c=0,p,d;if(t.sym_next!==0)do l=t.pending_buf[t.sym_buf+c++]&255,l+=(t.pending_buf[t.sym_buf+c++]&255)<<8,u=t.pending_buf[t.sym_buf+c++],l===0?send_code(t,u,n):(p=_length_code[u],send_code(t,p+LITERALS$1+1,n),d=extra_lbits[p],d!==0&&(u-=base_length[p],send_bits(t,u,d)),l--,p=d_code(l),send_code(t,p,a),d=extra_dbits[p],d!==0&&(l-=base_dist[p],send_bits(t,l,d)));while(c<t.sym_next);send_code(t,END_BLOCK,n)},build_tree=(t,n)=>{const a=n.dyn_tree,l=n.stat_desc.static_tree,u=n.stat_desc.has_stree,c=n.stat_desc.elems;let p,d,Q=-1,Ct;for(t.heap_len=0,t.heap_max=HEAP_SIZE$1,p=0;p<c;p++)a[p*2]!==0?(t.heap[++t.heap_len]=Q=p,t.depth[p]=0):a[p*2+1]=0;for(;t.heap_len<2;)Ct=t.heap[++t.heap_len]=Q<2?++Q:0,a[Ct*2]=1,t.depth[Ct]=0,t.opt_len--,u&&(t.static_len-=l[Ct*2+1]);for(n.max_code=Q,p=t.heap_len>>1;p>=1;p--)pqdownheap(t,a,p);Ct=c;do p=t.heap[1],t.heap[1]=t.heap[t.heap_len--],pqdownheap(t,a,1),d=t.heap[1],t.heap[--t.heap_max]=p,t.heap[--t.heap_max]=d,a[Ct*2]=a[p*2]+a[d*2],t.depth[Ct]=(t.depth[p]>=t.depth[d]?t.depth[p]:t.depth[d])+1,a[p*2+1]=a[d*2+1]=Ct,t.heap[1]=Ct++,pqdownheap(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],gen_bitlen(t,n),gen_codes(a,Q,t.bl_count)},scan_tree=(t,n,a)=>{let l,u=-1,c,p=n[0*2+1],d=0,Q=7,Ct=4;for(p===0&&(Q=138,Ct=3),n[(a+1)*2+1]=65535,l=0;l<=a;l++)c=p,p=n[(l+1)*2+1],!(++d<Q&&c===p)&&(d<Ct?t.bl_tree[c*2]+=d:c!==0?(c!==u&&t.bl_tree[c*2]++,t.bl_tree[REP_3_6*2]++):d<=10?t.bl_tree[REPZ_3_10*2]++:t.bl_tree[REPZ_11_138*2]++,d=0,u=c,p===0?(Q=138,Ct=3):c===p?(Q=6,Ct=3):(Q=7,Ct=4))},send_tree=(t,n,a)=>{let l,u=-1,c,p=n[0*2+1],d=0,Q=7,Ct=4;for(p===0&&(Q=138,Ct=3),l=0;l<=a;l++)if(c=p,p=n[(l+1)*2+1],!(++d<Q&&c===p)){if(d<Ct)do send_code(t,c,t.bl_tree);while(--d!==0);else c!==0?(c!==u&&(send_code(t,c,t.bl_tree),d--),send_code(t,REP_3_6,t.bl_tree),send_bits(t,d-3,2)):d<=10?(send_code(t,REPZ_3_10,t.bl_tree),send_bits(t,d-3,3)):(send_code(t,REPZ_11_138,t.bl_tree),send_bits(t,d-11,7));d=0,u=c,p===0?(Q=138,Ct=3):c===p?(Q=6,Ct=3):(Q=7,Ct=4)}},build_bl_tree=t=>{let n;for(scan_tree(t,t.dyn_ltree,t.l_desc.max_code),scan_tree(t,t.dyn_dtree,t.d_desc.max_code),build_tree(t,t.bl_desc),n=BL_CODES$1-1;n>=3&&t.bl_tree[bl_order[n]*2+1]===0;n--);return t.opt_len+=3*(n+1)+5+5+4,n},send_all_trees=(t,n,a,l)=>{let u;for(send_bits(t,n-257,5),send_bits(t,a-1,5),send_bits(t,l-4,4),u=0;u<l;u++)send_bits(t,t.bl_tree[bl_order[u]*2+1],3);send_tree(t,t.dyn_ltree,n-1),send_tree(t,t.dyn_dtree,a-1)},detect_data_type=t=>{let n=4093624447,a;for(a=0;a<=31;a++,n>>>=1)if(n&1&&t.dyn_ltree[a*2]!==0)return Z_BINARY;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Z_TEXT;for(a=32;a<LITERALS$1;a++)if(t.dyn_ltree[a*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=t=>{static_init_done||(tr_static_init(),static_init_done=!0),t.l_desc=new TreeDesc(t.dyn_ltree,static_l_desc),t.d_desc=new TreeDesc(t.dyn_dtree,static_d_desc),t.bl_desc=new TreeDesc(t.bl_tree,static_bl_desc),t.bi_buf=0,t.bi_valid=0,init_block(t)},_tr_stored_block$1=(t,n,a,l)=>{send_bits(t,(STORED_BLOCK<<1)+(l?1:0),3),bi_windup(t),put_short(t,a),put_short(t,~a),a&&t.pending_buf.set(t.window.subarray(n,n+a),t.pending),t.pending+=a},_tr_align$1=t=>{send_bits(t,STATIC_TREES<<1,3),send_code(t,END_BLOCK,static_ltree),bi_flush(t)},_tr_flush_block$1=(t,n,a,l)=>{let u,c,p=0;t.level>0?(t.strm.data_type===Z_UNKNOWN$1&&(t.strm.data_type=detect_data_type(t)),build_tree(t,t.l_desc),build_tree(t,t.d_desc),p=build_bl_tree(t),u=t.opt_len+3+7>>>3,c=t.static_len+3+7>>>3,c<=u&&(u=c)):u=c=a+5,a+4<=u&&n!==-1?_tr_stored_block$1(t,n,a,l):t.strategy===Z_FIXED$1||c===u?(send_bits(t,(STATIC_TREES<<1)+(l?1:0),3),compress_block(t,static_ltree,static_dtree)):(send_bits(t,(DYN_TREES<<1)+(l?1:0),3),send_all_trees(t,t.l_desc.max_code+1,t.d_desc.max_code+1,p+1),compress_block(t,t.dyn_ltree,t.dyn_dtree)),init_block(t),l&&bi_windup(t)},_tr_tally$1=(t,n,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,n===0?t.dyn_ltree[a*2]++:(t.matches++,n--,t.dyn_ltree[(_length_code[a]+LITERALS$1+1)*2]++,t.dyn_dtree[d_code(n)*2]++),t.sym_next===t.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(t,n,a,l)=>{let u=t&65535|0,c=t>>>16&65535|0,p=0;for(;a!==0;){p=a>2e3?2e3:a,a-=p;do u=u+n[l++]|0,c=c+u|0;while(--p);u%=65521,c%=65521}return u|c<<16|0};var adler32_1=adler32;const makeTable=()=>{let t,n=[];for(var a=0;a<256;a++){t=a;for(var l=0;l<8;l++)t=t&1?3988292384^t>>>1:t>>>1;n[a]=t}return n},crcTable=new Uint32Array(makeTable()),crc32=(t,n,a,l)=>{const u=crcTable,c=l+a;t^=-1;for(let p=l;p<c;p++)t=t>>>8^u[(t^n[p])&255];return t^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(t,n)=>(t.msg=messages[n],n),rank=t=>t*2-(t>4?9:0),zero=t=>{let n=t.length;for(;--n>=0;)t[n]=0},slide_hash=t=>{let n,a,l,u=t.w_size;n=t.hash_size,l=n;do a=t.head[--l],t.head[l]=a>=u?a-u:0;while(--n);n=u,l=n;do a=t.prev[--l],t.prev[l]=a>=u?a-u:0;while(--n)};let HASH_ZLIB=(t,n,a)=>(n<<t.hash_shift^a)&t.hash_mask,HASH=HASH_ZLIB;const flush_pending=t=>{const n=t.state;let a=n.pending;a>t.avail_out&&(a=t.avail_out),a!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+a),t.next_out),t.next_out+=a,n.pending_out+=a,t.total_out+=a,t.avail_out-=a,n.pending-=a,n.pending===0&&(n.pending_out=0))},flush_block_only=(t,n)=>{_tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,flush_pending(t.strm)},put_byte=(t,n)=>{t.pending_buf[t.pending++]=n},putShortMSB=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=n&255},read_buf=(t,n,a,l)=>{let u=t.avail_in;return u>l&&(u=l),u===0?0:(t.avail_in-=u,n.set(t.input.subarray(t.next_in,t.next_in+u),a),t.state.wrap===1?t.adler=adler32_1(t.adler,n,u,a):t.state.wrap===2&&(t.adler=crc32_1(t.adler,n,u,a)),t.next_in+=u,t.total_in+=u,u)},longest_match=(t,n)=>{let a=t.max_chain_length,l=t.strstart,u,c,p=t.prev_length,d=t.nice_match;const Q=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,Ct=t.window,ar=t.w_mask,en=t.prev,tn=t.strstart+MAX_MATCH;let on=Ct[l+p-1],cn=Ct[l+p];t.prev_length>=t.good_match&&(a>>=2),d>t.lookahead&&(d=t.lookahead);do if(u=n,!(Ct[u+p]!==cn||Ct[u+p-1]!==on||Ct[u]!==Ct[l]||Ct[++u]!==Ct[l+1])){l+=2,u++;do;while(Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&Ct[++l]===Ct[++u]&&l<tn);if(c=MAX_MATCH-(tn-l),l=tn-MAX_MATCH,c>p){if(t.match_start=n,p=c,c>=d)break;on=Ct[l+p-1],cn=Ct[l+p]}}while((n=en[n&ar])>Q&&--a!==0);return p<=t.lookahead?p:t.lookahead},fill_window=t=>{const n=t.w_size;let a,l,u;do{if(l=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-MIN_LOOKAHEAD)&&(t.window.set(t.window.subarray(n,n+n-l),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),slide_hash(t),l+=n),t.strm.avail_in===0)break;if(a=read_buf(t.strm,t.window,t.strstart+t.lookahead,l),t.lookahead+=a,t.lookahead+t.insert>=MIN_MATCH)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=HASH(t,t.ins_h,t.window[u+1]);t.insert&&(t.ins_h=HASH(t,t.ins_h,t.window[u+MIN_MATCH-1]),t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&t.strm.avail_in!==0)},deflate_stored=(t,n)=>{let a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,l,u,c,p=0,d=t.strm.avail_in;do{if(l=65535,c=t.bi_valid+42>>3,t.strm.avail_out<c||(c=t.strm.avail_out-c,u=t.strstart-t.block_start,l>u+t.strm.avail_in&&(l=u+t.strm.avail_in),l>c&&(l=c),l<a&&(l===0&&n!==Z_FINISH$3||n===Z_NO_FLUSH$2||l!==u+t.strm.avail_in)))break;p=n===Z_FINISH$3&&l===u+t.strm.avail_in?1:0,_tr_stored_block(t,0,0,p),t.pending_buf[t.pending-4]=l,t.pending_buf[t.pending-3]=l>>8,t.pending_buf[t.pending-2]=~l,t.pending_buf[t.pending-1]=~l>>8,flush_pending(t.strm),u&&(u>l&&(u=l),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+u),t.strm.next_out),t.strm.next_out+=u,t.strm.avail_out-=u,t.strm.total_out+=u,t.block_start+=u,l-=u),l&&(read_buf(t.strm,t.strm.output,t.strm.next_out,l),t.strm.next_out+=l,t.strm.avail_out-=l,t.strm.total_out+=l)}while(p===0);return d-=t.strm.avail_in,d&&(d>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=d&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-d,t.strm.next_in),t.strstart),t.strstart+=d,t.insert+=d>t.w_size-t.insert?t.w_size-t.insert:d),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),p?BS_FINISH_DONE:n!==Z_NO_FLUSH$2&&n!==Z_FINISH$3&&t.strm.avail_in===0&&t.strstart===t.block_start?BS_BLOCK_DONE:(c=t.window_size-t.strstart,t.strm.avail_in>c&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,c+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),c>t.strm.avail_in&&(c=t.strm.avail_in),c&&(read_buf(t.strm,t.window,t.strstart,c),t.strstart+=c,t.insert+=c>t.w_size-t.insert?t.w_size-t.insert:c),t.high_water<t.strstart&&(t.high_water=t.strstart),c=t.bi_valid+42>>3,c=t.pending_buf_size-c>65535?65535:t.pending_buf_size-c,a=c>t.w_size?t.w_size:c,u=t.strstart-t.block_start,(u>=a||(u||n===Z_FINISH$3)&&n!==Z_NO_FLUSH$2&&t.strm.avail_in===0&&u<=c)&&(l=u>c?c:u,p=n===Z_FINISH$3&&t.strm.avail_in===0&&l===u?1:0,_tr_stored_block(t,t.block_start,l,p),t.block_start+=l,flush_pending(t.strm)),p?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(t,n)=>{let a,l;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),a!==0&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a)),t.match_length>=MIN_MATCH)if(l=_tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+1]);else l=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(l&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(t,n)=>{let a,l,u;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,a!==0&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){u=t.strstart+t.lookahead-MIN_MATCH,l=_tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=u&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,l&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}else if(t.match_available){if(l=_tr_tally(t,0,t.window[t.strstart-1]),l&&flush_block_only(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(l=_tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(t,n)=>{let a,l,u,c;const p=t.window;for(;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(u=t.strstart-1,l=p[u],l===p[++u]&&l===p[++u]&&l===p[++u])){c=t.strstart+MAX_MATCH;do;while(l===p[++u]&&l===p[++u]&&l===p[++u]&&l===p[++u]&&l===p[++u]&&l===p[++u]&&l===p[++u]&&l===p[++u]&&u<c);t.match_length=MAX_MATCH-(c-u),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(a=_tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(t,n)=>{let a;for(;;){if(t.lookahead===0&&(fill_window(t),t.lookahead===0)){if(n===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(t.match_length=0,a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(t,n,a,l,u){this.good_length=t,this.max_lazy=n,this.nice_length=a,this.max_chain=l,this.func=u}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=t=>{t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==INIT_STATE&&n.status!==GZIP_STATE&&n.status!==EXTRA_STATE&&n.status!==NAME_STATE&&n.status!==COMMENT_STATE&&n.status!==HCRC_STATE&&n.status!==BUSY_STATE&&n.status!==FINISH_STATE?1:0},deflateResetKeep=t=>{if(deflateStateCheck(t))return err(t,Z_STREAM_ERROR$2);t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?GZIP_STATE:n.wrap?INIT_STATE:BUSY_STATE,t.adler=n.wrap===2?0:1,n.last_flush=-2,_tr_init(n),Z_OK$3},deflateReset=t=>{const n=deflateResetKeep(t);return n===Z_OK$3&&lm_init(t.state),n},deflateSetHeader=(t,n)=>deflateStateCheck(t)||t.state.wrap!==2?Z_STREAM_ERROR$2:(t.state.gzhead=n,Z_OK$3),deflateInit2=(t,n,a,l,u,c)=>{if(!t)return Z_STREAM_ERROR$2;let p=1;if(n===Z_DEFAULT_COMPRESSION$1&&(n=6),l<0?(p=0,l=-l):l>15&&(p=2,l-=16),u<1||u>MAX_MEM_LEVEL||a!==Z_DEFLATED$2||l<8||l>15||n<0||n>9||c<0||c>Z_FIXED||l===8&&p!==1)return err(t,Z_STREAM_ERROR$2);l===8&&(l=9);const d=new DeflateState;return t.state=d,d.strm=t,d.status=INIT_STATE,d.wrap=p,d.gzhead=null,d.w_bits=l,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=u+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+MIN_MATCH-1)/MIN_MATCH),d.window=new Uint8Array(d.w_size*2),d.head=new Uint16Array(d.hash_size),d.prev=new Uint16Array(d.w_size),d.lit_bufsize=1<<u+6,d.pending_buf_size=d.lit_bufsize*4,d.pending_buf=new Uint8Array(d.pending_buf_size),d.sym_buf=d.lit_bufsize,d.sym_end=(d.lit_bufsize-1)*3,d.level=n,d.strategy=c,d.method=a,deflateReset(t)},deflateInit=(t,n)=>deflateInit2(t,n,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(t,n)=>{if(deflateStateCheck(t)||n>Z_BLOCK$1||n<0)return t?err(t,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const a=t.state;if(!t.output||t.avail_in!==0&&!t.input||a.status===FINISH_STATE&&n!==Z_FINISH$3)return err(t,t.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const l=a.last_flush;if(a.last_flush=n,a.pending!==0){if(flush_pending(t),t.avail_out===0)return a.last_flush=-1,Z_OK$3}else if(t.avail_in===0&&rank(n)<=rank(l)&&n!==Z_FINISH$3)return err(t,Z_BUF_ERROR$1);if(a.status===FINISH_STATE&&t.avail_in!==0)return err(t,Z_BUF_ERROR$1);if(a.status===INIT_STATE&&a.wrap===0&&(a.status=BUSY_STATE),a.status===INIT_STATE){let u=Z_DEFLATED$2+(a.w_bits-8<<4)<<8,c=-1;if(a.strategy>=Z_HUFFMAN_ONLY||a.level<2?c=0:a.level<6?c=1:a.level===6?c=2:c=3,u|=c<<6,a.strstart!==0&&(u|=PRESET_DICT),u+=31-u%31,putShortMSB(a,u),a.strstart!==0&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),t.adler=1,a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===GZIP_STATE){if(t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead)put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,a.gzhead.time&255),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,a.gzhead.extra.length&255),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE;else if(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===EXTRA_STATE){if(a.gzhead.extra){let u=a.pending,c=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+c>a.pending_buf_size;){let d=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+d),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>u&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-u,u)),a.gzindex+=d,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;u=0,c-=d}let p=new Uint8Array(a.gzhead.extra);a.pending_buf.set(p.subarray(a.gzindex,a.gzindex+c),a.pending),a.pending+=c,a.gzhead.hcrc&&a.pending>u&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-u,u)),a.gzindex=0}a.status=NAME_STATE}if(a.status===NAME_STATE){if(a.gzhead.name){let u=a.pending,c;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>u&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-u,u)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;u=0}a.gzindex<a.gzhead.name.length?c=a.gzhead.name.charCodeAt(a.gzindex++)&255:c=0,put_byte(a,c)}while(c!==0);a.gzhead.hcrc&&a.pending>u&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-u,u)),a.gzindex=0}a.status=COMMENT_STATE}if(a.status===COMMENT_STATE){if(a.gzhead.comment){let u=a.pending,c;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>u&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-u,u)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;u=0}a.gzindex<a.gzhead.comment.length?c=a.gzhead.comment.charCodeAt(a.gzindex++)&255:c=0,put_byte(a,c)}while(c!==0);a.gzhead.hcrc&&a.pending>u&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-u,u))}a.status=HCRC_STATE}if(a.status===HCRC_STATE){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(flush_pending(t),a.pending!==0))return a.last_flush=-1,Z_OK$3;put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),t.adler=0}if(a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(t.avail_in!==0||a.lookahead!==0||n!==Z_NO_FLUSH$2&&a.status!==FINISH_STATE){let u=a.level===0?deflate_stored(a,n):a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,n):a.strategy===Z_RLE?deflate_rle(a,n):configuration_table[a.level].func(a,n);if((u===BS_FINISH_STARTED||u===BS_FINISH_DONE)&&(a.status=FINISH_STATE),u===BS_NEED_MORE||u===BS_FINISH_STARTED)return t.avail_out===0&&(a.last_flush=-1),Z_OK$3;if(u===BS_BLOCK_DONE&&(n===Z_PARTIAL_FLUSH?_tr_align(a):n!==Z_BLOCK$1&&(_tr_stored_block(a,0,0,!1),n===Z_FULL_FLUSH$1&&(zero(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),t.avail_out===0))return a.last_flush=-1,Z_OK$3}return n!==Z_FINISH$3?Z_OK$3:a.wrap<=0?Z_STREAM_END$3:(a.wrap===2?(put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,t.total_in&255),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=t=>{if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const n=t.state.status;return t.state=null,n===BUSY_STATE?err(t,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(t,n)=>{let a=n.length;if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const l=t.state,u=l.wrap;if(u===2||u===1&&l.status!==INIT_STATE||l.lookahead)return Z_STREAM_ERROR$2;if(u===1&&(t.adler=adler32_1(t.adler,n,a,0)),l.wrap=0,a>=l.w_size){u===0&&(zero(l.head),l.strstart=0,l.block_start=0,l.insert=0);let Q=new Uint8Array(l.w_size);Q.set(n.subarray(a-l.w_size,a),0),n=Q,a=l.w_size}const c=t.avail_in,p=t.next_in,d=t.input;for(t.avail_in=a,t.next_in=0,t.input=n,fill_window(l);l.lookahead>=MIN_MATCH;){let Q=l.strstart,Ct=l.lookahead-(MIN_MATCH-1);do l.ins_h=HASH(l,l.ins_h,l.window[Q+MIN_MATCH-1]),l.prev[Q&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=Q,Q++;while(--Ct);l.strstart=Q,l.lookahead=MIN_MATCH-1,fill_window(l)}return l.strstart+=l.lookahead,l.block_start=l.strstart,l.insert=l.lookahead,l.lookahead=0,l.match_length=l.prev_length=MIN_MATCH-1,l.match_available=0,t.next_in=p,t.input=d,t.avail_in=c,l.wrap=u,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var assign$1=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const l in a)_has(a,l)&&(t[l]=a[l])}}return t},flattenChunks=t=>{let n=0;for(let l=0,u=t.length;l<u;l++)n+=t[l].length;const a=new Uint8Array(n);for(let l=0,u=0,c=t.length;l<c;l++){let p=t[l];a.set(p,u),u+=p.length}return a},common$1={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let t=0;t<256;t++)_utf8len[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,a,l,u,c,p=t.length,d=0;for(u=0;u<p;u++)a=t.charCodeAt(u),(a&64512)===55296&&u+1<p&&(l=t.charCodeAt(u+1),(l&64512)===56320&&(a=65536+(a-55296<<10)+(l-56320),u++)),d+=a<128?1:a<2048?2:a<65536?3:4;for(n=new Uint8Array(d),c=0,u=0;c<d;u++)a=t.charCodeAt(u),(a&64512)===55296&&u+1<p&&(l=t.charCodeAt(u+1),(l&64512)===56320&&(a=65536+(a-55296<<10)+(l-56320),u++)),a<128?n[c++]=a:a<2048?(n[c++]=192|a>>>6,n[c++]=128|a&63):a<65536?(n[c++]=224|a>>>12,n[c++]=128|a>>>6&63,n[c++]=128|a&63):(n[c++]=240|a>>>18,n[c++]=128|a>>>12&63,n[c++]=128|a>>>6&63,n[c++]=128|a&63);return n};const buf2binstring=(t,n)=>{if(n<65534&&t.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let a="";for(let l=0;l<n;l++)a+=String.fromCharCode(t[l]);return a};var buf2string=(t,n)=>{const a=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let l,u;const c=new Array(a*2);for(u=0,l=0;l<a;){let p=t[l++];if(p<128){c[u++]=p;continue}let d=_utf8len[p];if(d>4){c[u++]=65533,l+=d-1;continue}for(p&=d===2?31:d===3?15:7;d>1&&l<a;)p=p<<6|t[l++]&63,d--;if(d>1){c[u++]=65533;continue}p<65536?c[u++]=p:(p-=65536,c[u++]=55296|p>>10&1023,c[u++]=56320|p&1023)}return buf2binstring(c,u)},utf8border=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let a=n-1;for(;a>=0&&(t[a]&192)===128;)a--;return a<0||a===0?n:a+_utf8len[t[a]]>n?a:n},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(t){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=deflate_1$2.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(a!==Z_OK$2)throw new Error(messages[a]);if(n.header&&deflate_1$2.deflateSetHeader(this.strm,n.header),n.dictionary){let l;if(typeof n.dictionary=="string"?l=strings.string2buf(n.dictionary):toString$1.call(n.dictionary)==="[object ArrayBuffer]"?l=new Uint8Array(n.dictionary):l=n.dictionary,a=deflate_1$2.deflateSetDictionary(this.strm,l),a!==Z_OK$2)throw new Error(messages[a]);this._dict_set=!0}}Deflate$1.prototype.push=function(t,n){const a=this.strm,l=this.options.chunkSize;let u,c;if(this.ended)return!1;for(n===~~n?c=n:c=n===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof t=="string"?a.input=strings.string2buf(t):toString$1.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(l),a.next_out=0,a.avail_out=l),(c===Z_SYNC_FLUSH||c===Z_FULL_FLUSH)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(u=deflate_1$2.deflate(a,c),u===Z_STREAM_END$2)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),u=deflate_1$2.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Z_OK$2;if(a.avail_out===0){this.onData(a.output);continue}if(c>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(t){this.chunks.push(t)};Deflate$1.prototype.onEnd=function(t){t===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function deflate$1(t,n){const a=new Deflate$1(n);if(a.push(t,!0),a.err)throw a.msg||messages[a.err];return a.result}function deflateRaw$1(t,n){return n=n||{},n.raw=!0,deflate$1(t,n)}function gzip$1(t,n){return n=n||{},n.gzip=!0,deflate$1(t,n)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(n,a){let l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux;const gx=n.state;l=n.next_in,fx=n.input,u=l+(n.avail_in-5),c=n.next_out,ux=n.output,p=c-(a-n.avail_out),d=c+(n.avail_out-257),Q=gx.dmax,Ct=gx.wsize,ar=gx.whave,en=gx.wnext,tn=gx.window,on=gx.hold,cn=gx.bits,gn=gx.lencode,Cn=gx.distcode,ex=(1<<gx.lenbits)-1,ix=(1<<gx.distbits)-1;e:do{cn<15&&(on+=fx[l++]<<cn,cn+=8,on+=fx[l++]<<cn,cn+=8),ax=gn[on&ex];t:for(;;){if(ox=ax>>>24,on>>>=ox,cn-=ox,ox=ax>>>16&255,ox===0)ux[c++]=ax&65535;else if(ox&16){lx=ax&65535,ox&=15,ox&&(cn<ox&&(on+=fx[l++]<<cn,cn+=8),lx+=on&(1<<ox)-1,on>>>=ox,cn-=ox),cn<15&&(on+=fx[l++]<<cn,cn+=8,on+=fx[l++]<<cn,cn+=8),ax=Cn[on&ix];r:for(;;){if(ox=ax>>>24,on>>>=ox,cn-=ox,ox=ax>>>16&255,ox&16){if(cx=ax&65535,ox&=15,cn<ox&&(on+=fx[l++]<<cn,cn+=8,cn<ox&&(on+=fx[l++]<<cn,cn+=8)),cx+=on&(1<<ox)-1,cx>Q){n.msg="invalid distance too far back",gx.mode=BAD$1;break e}if(on>>>=ox,cn-=ox,ox=c-p,cx>ox){if(ox=cx-ox,ox>ar&&gx.sane){n.msg="invalid distance too far back",gx.mode=BAD$1;break e}if(dx=0,hx=tn,en===0){if(dx+=Ct-ox,ox<lx){lx-=ox;do ux[c++]=tn[dx++];while(--ox);dx=c-cx,hx=ux}}else if(en<ox){if(dx+=Ct+en-ox,ox-=en,ox<lx){lx-=ox;do ux[c++]=tn[dx++];while(--ox);if(dx=0,en<lx){ox=en,lx-=ox;do ux[c++]=tn[dx++];while(--ox);dx=c-cx,hx=ux}}}else if(dx+=en-ox,ox<lx){lx-=ox;do ux[c++]=tn[dx++];while(--ox);dx=c-cx,hx=ux}for(;lx>2;)ux[c++]=hx[dx++],ux[c++]=hx[dx++],ux[c++]=hx[dx++],lx-=3;lx&&(ux[c++]=hx[dx++],lx>1&&(ux[c++]=hx[dx++]))}else{dx=c-cx;do ux[c++]=ux[dx++],ux[c++]=ux[dx++],ux[c++]=ux[dx++],lx-=3;while(lx>2);lx&&(ux[c++]=ux[dx++],lx>1&&(ux[c++]=ux[dx++]))}}else if((ox&64)===0){ax=Cn[(ax&65535)+(on&(1<<ox)-1)];continue r}else{n.msg="invalid distance code",gx.mode=BAD$1;break e}break}}else if((ox&64)===0){ax=gn[(ax&65535)+(on&(1<<ox)-1)];continue t}else if(ox&32){gx.mode=TYPE$1;break e}else{n.msg="invalid literal/length code",gx.mode=BAD$1;break e}break}}while(l<u&&c<d);lx=cn>>3,l-=lx,cn-=lx<<3,on&=(1<<cn)-1,n.next_in=l,n.next_out=c,n.avail_in=l<u?5+(u-l):5-(l-u),n.avail_out=c<d?257+(d-c):257-(c-d),gx.hold=on,gx.bits=cn};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(t,n,a,l,u,c,p,d)=>{const Q=d.bits;let Ct=0,ar=0,en=0,tn=0,on=0,cn=0,gn=0,Cn=0,ex=0,ix=0,ax,ox,lx,cx,dx,hx=null,fx;const ux=new Uint16Array(MAXBITS+1),gx=new Uint16Array(MAXBITS+1);let yx=null,_x,vx,bx;for(Ct=0;Ct<=MAXBITS;Ct++)ux[Ct]=0;for(ar=0;ar<l;ar++)ux[n[a+ar]]++;for(on=Q,tn=MAXBITS;tn>=1&&ux[tn]===0;tn--);if(on>tn&&(on=tn),tn===0)return u[c++]=1<<24|64<<16|0,u[c++]=1<<24|64<<16|0,d.bits=1,0;for(en=1;en<tn&&ux[en]===0;en++);for(on<en&&(on=en),Cn=1,Ct=1;Ct<=MAXBITS;Ct++)if(Cn<<=1,Cn-=ux[Ct],Cn<0)return-1;if(Cn>0&&(t===CODES$1||tn!==1))return-1;for(gx[1]=0,Ct=1;Ct<MAXBITS;Ct++)gx[Ct+1]=gx[Ct]+ux[Ct];for(ar=0;ar<l;ar++)n[a+ar]!==0&&(p[gx[n[a+ar]]++]=ar);if(t===CODES$1?(hx=yx=p,fx=20):t===LENS$1?(hx=lbase,yx=lext,fx=257):(hx=dbase,yx=dext,fx=0),ix=0,ar=0,Ct=en,dx=c,cn=on,gn=0,lx=-1,ex=1<<on,cx=ex-1,t===LENS$1&&ex>ENOUGH_LENS$1||t===DISTS$1&&ex>ENOUGH_DISTS$1)return 1;for(;;){_x=Ct-gn,p[ar]+1<fx?(vx=0,bx=p[ar]):p[ar]>=fx?(vx=yx[p[ar]-fx],bx=hx[p[ar]-fx]):(vx=96,bx=0),ax=1<<Ct-gn,ox=1<<cn,en=ox;do ox-=ax,u[dx+(ix>>gn)+ox]=_x<<24|vx<<16|bx|0;while(ox!==0);for(ax=1<<Ct-1;ix&ax;)ax>>=1;if(ax!==0?(ix&=ax-1,ix+=ax):ix=0,ar++,--ux[Ct]===0){if(Ct===tn)break;Ct=n[a+p[ar]]}if(Ct>on&&(ix&cx)!==lx){for(gn===0&&(gn=on),dx+=en,cn=Ct-gn,Cn=1<<cn;cn+gn<tn&&(Cn-=ux[cn+gn],!(Cn<=0));)cn++,Cn<<=1;if(ex+=1<<cn,t===LENS$1&&ex>ENOUGH_LENS$1||t===DISTS$1&&ex>ENOUGH_DISTS$1)return 1;lx=ix&cx,u[lx]=on<<24|cn<<16|dx-c|0}}return ix!==0&&(u[dx+ix]=Ct-gn<<24|64<<16|0),d.bits=on,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT$1=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<HEAD||n.mode>SYNC?1:0},inflateResetKeep=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=HEAD,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(ENOUGH_LENS),n.distcode=n.distdyn=new Int32Array(ENOUGH_DISTS),n.sane=1,n.back=-1,Z_OK$1},inflateReset=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,inflateResetKeep(t)},inflateReset2=(t,n)=>{let a;if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const l=t.state;return n<0?(a=0,n=-n):(a=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Z_STREAM_ERROR$1:(l.window!==null&&l.wbits!==n&&(l.window=null),l.wrap=a,l.wbits=n,inflateReset(t))},inflateInit2=(t,n)=>{if(!t)return Z_STREAM_ERROR$1;const a=new InflateState;t.state=a,a.strm=t,a.window=null,a.mode=HEAD;const l=inflateReset2(t,n);return l!==Z_OK$1&&(t.state=null),l},inflateInit=t=>inflateInit2(t,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=t=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(inftrees(LENS,t.lens,0,288,lenfix,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;inftrees(DISTS,t.lens,0,32,distfix,0,t.work,{bits:5}),virgin=!1}t.lencode=lenfix,t.lenbits=9,t.distcode=distfix,t.distbits=5},updatewindow=(t,n,a,l)=>{let u;const c=t.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),l>=c.wsize?(c.window.set(n.subarray(a-c.wsize,a),0),c.wnext=0,c.whave=c.wsize):(u=c.wsize-c.wnext,u>l&&(u=l),c.window.set(n.subarray(a-l,a-l+u),c.wnext),l-=u,l?(c.window.set(n.subarray(a-l,a),0),c.wnext=l,c.whave=c.wsize):(c.wnext+=u,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=u))),0},inflate$2=(t,n)=>{let a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn=0,ex,ix,ax,ox,lx,cx,dx,hx;const fx=new Uint8Array(4);let ux,gx;const yx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(t)||!t.output||!t.input&&t.avail_in!==0)return Z_STREAM_ERROR$1;a=t.state,a.mode===TYPE&&(a.mode=TYPEDO),p=t.next_out,u=t.output,Q=t.avail_out,c=t.next_in,l=t.input,d=t.avail_in,Ct=a.hold,ar=a.bits,en=d,tn=Q,hx=Z_OK$1;e:for(;;)switch(a.mode){case HEAD:if(a.wrap===0){a.mode=TYPEDO;break}for(;ar<16;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(a.wrap&2&&Ct===35615){a.wbits===0&&(a.wbits=15),a.check=0,fx[0]=Ct&255,fx[1]=Ct>>>8&255,a.check=crc32_1(a.check,fx,2,0),Ct=0,ar=0,a.mode=FLAGS;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((Ct&255)<<8)+(Ct>>8))%31){t.msg="incorrect header check",a.mode=BAD;break}if((Ct&15)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(Ct>>>=4,ar-=4,dx=(Ct&15)+8,a.wbits===0&&(a.wbits=dx),dx>15||dx>a.wbits){t.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=Ct&512?DICTID:TYPE,Ct=0,ar=0;break;case FLAGS:for(;ar<16;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(a.flags=Ct,(a.flags&255)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(a.flags&57344){t.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=Ct>>8&1),a.flags&512&&a.wrap&4&&(fx[0]=Ct&255,fx[1]=Ct>>>8&255,a.check=crc32_1(a.check,fx,2,0)),Ct=0,ar=0,a.mode=TIME;case TIME:for(;ar<32;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}a.head&&(a.head.time=Ct),a.flags&512&&a.wrap&4&&(fx[0]=Ct&255,fx[1]=Ct>>>8&255,fx[2]=Ct>>>16&255,fx[3]=Ct>>>24&255,a.check=crc32_1(a.check,fx,4,0)),Ct=0,ar=0,a.mode=OS;case OS:for(;ar<16;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}a.head&&(a.head.xflags=Ct&255,a.head.os=Ct>>8),a.flags&512&&a.wrap&4&&(fx[0]=Ct&255,fx[1]=Ct>>>8&255,a.check=crc32_1(a.check,fx,2,0)),Ct=0,ar=0,a.mode=EXLEN;case EXLEN:if(a.flags&1024){for(;ar<16;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}a.length=Ct,a.head&&(a.head.extra_len=Ct),a.flags&512&&a.wrap&4&&(fx[0]=Ct&255,fx[1]=Ct>>>8&255,a.check=crc32_1(a.check,fx,2,0)),Ct=0,ar=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(a.flags&1024&&(on=a.length,on>d&&(on=d),on&&(a.head&&(dx=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(l.subarray(c,c+on),dx)),a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,l,on,c)),d-=on,c+=on,a.length-=on),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(a.flags&2048){if(d===0)break e;on=0;do dx=l[c+on++],a.head&&dx&&a.length<65536&&(a.head.name+=String.fromCharCode(dx));while(dx&&on<d);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,l,on,c)),d-=on,c+=on,dx)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT$1;case COMMENT$1:if(a.flags&4096){if(d===0)break e;on=0;do dx=l[c+on++],a.head&&dx&&a.length<65536&&(a.head.comment+=String.fromCharCode(dx));while(dx&&on<d);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,l,on,c)),d-=on,c+=on,dx)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(a.flags&512){for(;ar<16;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(a.wrap&4&&Ct!==(a.check&65535)){t.msg="header crc mismatch",a.mode=BAD;break}Ct=0,ar=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;ar<32;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}t.adler=a.check=zswap32(Ct),Ct=0,ar=0,a.mode=DICT;case DICT:if(a.havedict===0)return t.next_out=p,t.avail_out=Q,t.next_in=c,t.avail_in=d,a.hold=Ct,a.bits=ar,Z_NEED_DICT$1;t.adler=a.check=1,a.mode=TYPE;case TYPE:if(n===Z_BLOCK||n===Z_TREES)break e;case TYPEDO:if(a.last){Ct>>>=ar&7,ar-=ar&7,a.mode=CHECK;break}for(;ar<3;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}switch(a.last=Ct&1,Ct>>>=1,ar-=1,Ct&3){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,n===Z_TREES){Ct>>>=2,ar-=2;break e}break;case 2:a.mode=TABLE;break;case 3:t.msg="invalid block type",a.mode=BAD}Ct>>>=2,ar-=2;break;case STORED:for(Ct>>>=ar&7,ar-=ar&7;ar<32;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if((Ct&65535)!==(Ct>>>16^65535)){t.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=Ct&65535,Ct=0,ar=0,a.mode=COPY_,n===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(on=a.length,on){if(on>d&&(on=d),on>Q&&(on=Q),on===0)break e;u.set(l.subarray(c,c+on),p),d-=on,c+=on,Q-=on,p+=on,a.length-=on;break}a.mode=TYPE;break;case TABLE:for(;ar<14;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(a.nlen=(Ct&31)+257,Ct>>>=5,ar-=5,a.ndist=(Ct&31)+1,Ct>>>=5,ar-=5,a.ncode=(Ct&15)+4,Ct>>>=4,ar-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;ar<3;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}a.lens[yx[a.have++]]=Ct&7,Ct>>>=3,ar-=3}for(;a.have<19;)a.lens[yx[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,ux={bits:a.lenbits},hx=inftrees(CODES,a.lens,0,19,a.lencode,0,a.work,ux),a.lenbits=ux.bits,hx){t.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;Cn=a.lencode[Ct&(1<<a.lenbits)-1],ex=Cn>>>24,ix=Cn>>>16&255,ax=Cn&65535,!(ex<=ar);){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(ax<16)Ct>>>=ex,ar-=ex,a.lens[a.have++]=ax;else{if(ax===16){for(gx=ex+2;ar<gx;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(Ct>>>=ex,ar-=ex,a.have===0){t.msg="invalid bit length repeat",a.mode=BAD;break}dx=a.lens[a.have-1],on=3+(Ct&3),Ct>>>=2,ar-=2}else if(ax===17){for(gx=ex+3;ar<gx;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}Ct>>>=ex,ar-=ex,dx=0,on=3+(Ct&7),Ct>>>=3,ar-=3}else{for(gx=ex+7;ar<gx;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}Ct>>>=ex,ar-=ex,dx=0,on=11+(Ct&127),Ct>>>=7,ar-=7}if(a.have+on>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=BAD;break}for(;on--;)a.lens[a.have++]=dx}}if(a.mode===BAD)break;if(a.lens[256]===0){t.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,ux={bits:a.lenbits},hx=inftrees(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,ux),a.lenbits=ux.bits,hx){t.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,ux={bits:a.distbits},hx=inftrees(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,ux),a.distbits=ux.bits,hx){t.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,n===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(d>=6&&Q>=258){t.next_out=p,t.avail_out=Q,t.next_in=c,t.avail_in=d,a.hold=Ct,a.bits=ar,inffast(t,tn),p=t.next_out,u=t.output,Q=t.avail_out,c=t.next_in,l=t.input,d=t.avail_in,Ct=a.hold,ar=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;Cn=a.lencode[Ct&(1<<a.lenbits)-1],ex=Cn>>>24,ix=Cn>>>16&255,ax=Cn&65535,!(ex<=ar);){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(ix&&(ix&240)===0){for(ox=ex,lx=ix,cx=ax;Cn=a.lencode[cx+((Ct&(1<<ox+lx)-1)>>ox)],ex=Cn>>>24,ix=Cn>>>16&255,ax=Cn&65535,!(ox+ex<=ar);){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}Ct>>>=ox,ar-=ox,a.back+=ox}if(Ct>>>=ex,ar-=ex,a.back+=ex,a.length=ax,ix===0){a.mode=LIT;break}if(ix&32){a.back=-1,a.mode=TYPE;break}if(ix&64){t.msg="invalid literal/length code",a.mode=BAD;break}a.extra=ix&15,a.mode=LENEXT;case LENEXT:if(a.extra){for(gx=a.extra;ar<gx;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}a.length+=Ct&(1<<a.extra)-1,Ct>>>=a.extra,ar-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;Cn=a.distcode[Ct&(1<<a.distbits)-1],ex=Cn>>>24,ix=Cn>>>16&255,ax=Cn&65535,!(ex<=ar);){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if((ix&240)===0){for(ox=ex,lx=ix,cx=ax;Cn=a.distcode[cx+((Ct&(1<<ox+lx)-1)>>ox)],ex=Cn>>>24,ix=Cn>>>16&255,ax=Cn&65535,!(ox+ex<=ar);){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}Ct>>>=ox,ar-=ox,a.back+=ox}if(Ct>>>=ex,ar-=ex,a.back+=ex,ix&64){t.msg="invalid distance code",a.mode=BAD;break}a.offset=ax,a.extra=ix&15,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(gx=a.extra;ar<gx;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}a.offset+=Ct&(1<<a.extra)-1,Ct>>>=a.extra,ar-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(Q===0)break e;if(on=tn-Q,a.offset>on){if(on=a.offset-on,on>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=BAD;break}on>a.wnext?(on-=a.wnext,cn=a.wsize-on):cn=a.wnext-on,on>a.length&&(on=a.length),gn=a.window}else gn=u,cn=p-a.offset,on=a.length;on>Q&&(on=Q),Q-=on,a.length-=on;do u[p++]=gn[cn++];while(--on);a.length===0&&(a.mode=LEN);break;case LIT:if(Q===0)break e;u[p++]=a.length,Q--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;ar<32;){if(d===0)break e;d--,Ct|=l[c++]<<ar,ar+=8}if(tn-=Q,t.total_out+=tn,a.total+=tn,a.wrap&4&&tn&&(t.adler=a.check=a.flags?crc32_1(a.check,u,tn,p-tn):adler32_1(a.check,u,tn,p-tn)),tn=Q,a.wrap&4&&(a.flags?Ct:zswap32(Ct))!==a.check){t.msg="incorrect data check",a.mode=BAD;break}Ct=0,ar=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;ar<32;){if(d===0)break e;d--,Ct+=l[c++]<<ar,ar+=8}if(a.wrap&4&&Ct!==(a.total&4294967295)){t.msg="incorrect length check",a.mode=BAD;break}Ct=0,ar=0}a.mode=DONE;case DONE:hx=Z_STREAM_END$1;break e;case BAD:hx=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return t.next_out=p,t.avail_out=Q,t.next_in=c,t.avail_in=d,a.hold=Ct,a.bits=ar,(a.wsize||tn!==t.avail_out&&a.mode<BAD&&(a.mode<CHECK||n!==Z_FINISH$1))&&updatewindow(t,t.output,t.next_out,tn-t.avail_out),en-=t.avail_in,tn-=t.avail_out,t.total_in+=en,t.total_out+=tn,a.total+=tn,a.wrap&4&&tn&&(t.adler=a.check=a.flags?crc32_1(a.check,u,tn,t.next_out-tn):adler32_1(a.check,u,tn,t.next_out-tn)),t.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(en===0&&tn===0||n===Z_FINISH$1)&&hx===Z_OK$1&&(hx=Z_BUF_ERROR),hx},inflateEnd=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;let n=t.state;return n.window&&(n.window=null),t.state=null,Z_OK$1},inflateGetHeader=(t,n)=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const a=t.state;return(a.wrap&2)===0?Z_STREAM_ERROR$1:(a.head=n,n.done=!1,Z_OK$1)},inflateSetDictionary=(t,n)=>{const a=n.length;let l,u,c;return inflateStateCheck(t)||(l=t.state,l.wrap!==0&&l.mode!==DICT)?Z_STREAM_ERROR$1:l.mode===DICT&&(u=1,u=adler32_1(u,n,a,0),u!==l.check)?Z_DATA_ERROR$1:(c=updatewindow(t,n,a,a),c?(l.mode=MEM,Z_MEM_ERROR$1):(l.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(t){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=inflate_1$2.inflateInit2(this.strm,n.windowBits);if(a!==Z_OK)throw new Error(messages[a]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=strings.string2buf(n.dictionary):toString.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=inflate_1$2.inflateSetDictionary(this.strm,n.dictionary),a!==Z_OK)))throw new Error(messages[a])}Inflate$1.prototype.push=function(t,n){const a=this.strm,l=this.options.chunkSize,u=this.options.dictionary;let c,p,d;if(this.ended)return!1;for(n===~~n?p=n:p=n===!0?Z_FINISH:Z_NO_FLUSH,toString.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(l),a.next_out=0,a.avail_out=l),c=inflate_1$2.inflate(a,p),c===Z_NEED_DICT&&u&&(c=inflate_1$2.inflateSetDictionary(a,u),c===Z_OK?c=inflate_1$2.inflate(a,p):c===Z_DATA_ERROR&&(c=Z_NEED_DICT));a.avail_in>0&&c===Z_STREAM_END&&a.state.wrap>0&&t[a.next_in]!==0;)inflate_1$2.inflateReset(a),c=inflate_1$2.inflate(a,p);switch(c){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(c),this.ended=!0,!1}if(d=a.avail_out,a.next_out&&(a.avail_out===0||c===Z_STREAM_END))if(this.options.to==="string"){let Q=strings.utf8border(a.output,a.next_out),Ct=a.next_out-Q,ar=strings.buf2string(a.output,Q);a.next_out=Ct,a.avail_out=l-Ct,Ct&&a.output.set(a.output.subarray(Q,Q+Ct),0),this.onData(ar)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(c===Z_OK&&d===0)){if(c===Z_STREAM_END)return c=inflate_1$2.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(t){this.chunks.push(t)};Inflate$1.prototype.onEnd=function(t){t===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function inflate$1(t,n){const a=new Inflate$1(n);if(a.push(t),a.err)throw a.msg||messages[a.err];return a.result}function inflateRaw$1(t,n){return n=n||{},n.raw=!0,inflate$1(t,n)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function hn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Vl(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Oo(t){let n,a,l;t.length!==2?(n=hn,a=(d,Q)=>hn(t(d),Q),l=(d,Q)=>t(d)-Q):(n=t===hn||t===Vl?t:$g,a=t,l=t);function u(d,Q,Ct=0,ar=d.length){if(Ct<ar){if(n(Q,Q)!==0)return ar;do{const en=Ct+ar>>>1;a(d[en],Q)<0?Ct=en+1:ar=en}while(Ct<ar)}return Ct}function c(d,Q,Ct=0,ar=d.length){if(Ct<ar){if(n(Q,Q)!==0)return ar;do{const en=Ct+ar>>>1;a(d[en],Q)<=0?Ct=en+1:ar=en}while(Ct<ar)}return Ct}function p(d,Q,Ct=0,ar=d.length){const en=u(d,Q,Ct,ar-1);return en>Ct&&l(d[en-1],Q)>-l(d[en],Q)?en-1:en}return{left:u,center:p,right:c}}function $g(){return 0}function Hi(t){return t===null?NaN:+t}function*Tg(t,n){if(n===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(yield a);else{let a=-1;for(let l of t)(l=n(l,++a,t))!=null&&(l=+l)>=l&&(yield l)}}const Gl=Oo(hn),Ft=Gl.right,Ag=Gl.left,Sg=Oo(Hi).center;function Eg(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let a=t.length;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid length");if(!a||!n)return t;const l=lf(n),u=t.slice();return l(t,u,0,a,1),l(u,t,0,a,1),l(t,u,0,a,1),t}const Zl=Ql(lf),kg=Ql(Ng);function Ql(t){return function(n,a,l=a){if(!((a=+a)>=0))throw new RangeError("invalid rx");if(!((l=+l)>=0))throw new RangeError("invalid ry");let{data:u,width:c,height:p}=n;if(!((c=Math.floor(c))>=0))throw new RangeError("invalid width");if(!((p=Math.floor(p!==void 0?p:u.length/c))>=0))throw new RangeError("invalid height");if(!c||!p||!a&&!l)return n;const d=a&&t(a),Q=l&&t(l),Ct=u.slice();return d&&Q?(we$1(d,Ct,u,c,p),we$1(d,u,Ct,c,p),we$1(d,Ct,u,c,p),xe(Q,u,Ct,c,p),xe(Q,Ct,u,c,p),xe(Q,u,Ct,c,p)):d?(we$1(d,u,Ct,c,p),we$1(d,Ct,u,c,p),we$1(d,u,Ct,c,p)):Q&&(xe(Q,u,Ct,c,p),xe(Q,Ct,u,c,p),xe(Q,u,Ct,c,p)),n}}function we$1(t,n,a,l,u){for(let c=0,p=l*u;c<p;)t(n,a,c,c+=l,1)}function xe(t,n,a,l,u){for(let c=0,p=l*u;c<l;++c)t(n,a,c,c+p,l)}function Ng(t){const n=lf(t);return(a,l,u,c,p)=>{u<<=2,c<<=2,p<<=2,n(a,l,u+0,c+0,p),n(a,l,u+1,c+1,p),n(a,l,u+2,c+2,p),n(a,l,u+3,c+3,p)}}function lf(t){const n=Math.floor(t);if(n===t)return Rg(t);const a=t-n,l=2*t+1;return(u,c,p,d,Q)=>{if(!((d-=Q)>=p))return;let Ct=n*c[p];const ar=Q*n,en=ar+Q;for(let tn=p,on=p+ar;tn<on;tn+=Q)Ct+=c[Math.min(d,tn)];for(let tn=p,on=d;tn<=on;tn+=Q)Ct+=c[Math.min(d,tn+ar)],u[tn]=(Ct+a*(c[Math.max(p,tn-en)]+c[Math.min(d,tn+en)]))/l,Ct-=c[Math.max(p,tn-ar)]}}function Rg(t){const n=2*t+1;return(a,l,u,c,p)=>{if(!((c-=p)>=u))return;let d=t*l[u];const Q=p*t;for(let Ct=u,ar=u+Q;Ct<ar;Ct+=p)d+=l[Math.min(c,Ct)];for(let Ct=u,ar=c;Ct<=ar;Ct+=p)d+=l[Math.min(c,Ct+Q)],a[Ct]=d/n,d-=l[Math.max(u,Ct-Q)]}}function Yo(t,n){let a=0;if(n===void 0)for(let l of t)l!=null&&(l=+l)>=l&&++a;else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(u=+u)>=u&&++a}return a}function Ig(t){return t.length|0}function Cg(t){return!(t>0)}function Pg(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Dg(t){return n=>t(...n)}function zg(...t){const n=typeof t[t.length-1]=="function"&&Dg(t.pop());t=t.map(Pg);const a=t.map(Ig),l=t.length-1,u=new Array(l+1).fill(0),c=[];if(l<0||a.some(Cg))return c;for(;;){c.push(u.map((d,Q)=>t[Q][d]));let p=l;for(;++u[p]===a[p];){if(p===0)return n?c.map(n):c;u[p--]=0}}}function Og(t,n){var a=0,l=0;return Float64Array.from(t,n===void 0?u=>a+=+u||0:u=>a+=+n(u,l++,t)||0)}function Kl(t,n){let a=0,l,u=0,c=0;if(n===void 0)for(let p of t)p!=null&&(p=+p)>=p&&(l=p-u,u+=l/++a,c+=l*(p-u));else{let p=-1;for(let d of t)(d=n(d,++p,t))!=null&&(d=+d)>=d&&(l=d-u,u+=l/++a,c+=l*(d-u))}if(a>1)return c/(a-1)}function Jl(t,n){const a=Kl(t,n);return a&&Math.sqrt(a)}function Sr(t,n){let a,l;if(n===void 0)for(const u of t)u!=null&&(a===void 0?u>=u&&(a=l=u):(a>u&&(a=u),l<u&&(l=u)));else{let u=-1;for(let c of t)(c=n(c,++u,t))!=null&&(a===void 0?c>=c&&(a=l=c):(a>c&&(a=c),l<c&&(l=c)))}return[a,l]}class bn{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const a=this._partials;let l=0;for(let u=0;u<this._n&&u<32;u++){const c=a[u],p=n+c,d=Math.abs(n)<Math.abs(c)?n-(p-c):c-(p-n);d&&(a[l++]=d),n=p}return a[l]=n,this._n=l+1,this}valueOf(){const n=this._partials;let a=this._n,l,u,c,p=0;if(a>0){for(p=n[--a];a>0&&(l=p,u=n[--a],p=l+u,c=u-(p-l),!c););a>0&&(c<0&&n[a-1]<0||c>0&&n[a-1]>0)&&(u=c*2,l=p+u,u==l-p&&(p=l))}return p}}function Yg(t,n){const a=new bn;if(n===void 0)for(let l of t)(l=+l)&&a.add(l);else{let l=-1;for(let u of t)(u=+n(u,++l,t))&&a.add(u)}return+a}function Fg(t,n){const a=new bn;let l=-1;return Float64Array.from(t,n===void 0?u=>a.add(+u||0):u=>a.add(+n(u,++l,t)||0))}class Cr extends Map{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const[l,u]of n)this.set(l,u)}get(n){return super.get(hu(this,n))}has(n){return super.has(hu(this,n))}set(n,a){return super.set(nh(this,n),a)}delete(n){return super.delete(th(this,n))}}let ie$1=class extends Set{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const l of n)this.add(l)}has(n){return super.has(hu(this,n))}add(n){return super.add(nh(this,n))}delete(n){return super.delete(th(this,n))}};function hu({_intern:t,_key:n},a){const l=n(a);return t.has(l)?t.get(l):a}function nh({_intern:t,_key:n},a){const l=n(a);return t.has(l)?t.get(l):(t.set(l,a),a)}function th({_intern:t,_key:n},a){const l=n(a);return t.has(l)&&(a=t.get(l),t.delete(l)),a}function eh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qe(t){return t}function rh(t,...n){return er(t,qe,qe,n)}function ih(t,...n){return er(t,Array.from,qe,n)}function oh(t,n){for(let a=1,l=n.length;a<l;++a)t=t.flatMap(u=>u.pop().map(([c,p])=>[...u,c,p]));return t}function qg(t,...n){return oh(ih(t,...n),n)}function Lg(t,n,...a){return oh(uh(t,n,...a),a)}function ah(t,n,...a){return er(t,qe,n,a)}function uh(t,n,...a){return er(t,Array.from,n,a)}function Bg(t,...n){return er(t,qe,fh,n)}function Ug(t,...n){return er(t,Array.from,fh,n)}function fh(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function er(t,n,a,l){return function u(c,p){if(p>=l.length)return a(c);const d=new Cr,Q=l[p++];let Ct=-1;for(const ar of c){const en=Q(ar,++Ct,c),tn=d.get(en);tn?tn.push(ar):d.set(en,[ar])}for(const[ar,en]of d)d.set(ar,u(en,p));return n(d)}(t,0)}function ch(t,n){return Array.from(n,a=>t[a])}function du(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[a]=n;if(a&&a.length!==2||n.length>1){const l=Uint32Array.from(t,(u,c)=>c);return n.length>1?(n=n.map(u=>t.map(u)),l.sort((u,c)=>{for(const p of n){const d=Le(p[u],p[c]);if(d)return d}})):(a=t.map(a),l.sort((u,c)=>Le(a[u],a[c]))),ch(t,l)}return t.sort(hf(a))}function hf(t=hn){if(t===hn)return Le;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,a)=>{const l=t(n,a);return l||l===0?l:(t(a,a)===0)-(t(n,n)===0)}}function Le(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function Xg(t,n,a){return(n.length!==2?du(ah(t,n,a),([l,u],[c,p])=>hn(u,p)||hn(l,c)):du(rh(t,a),([l,u],[c,p])=>n(u,p)||hn(l,c))).map(([l])=>l)}var Hg=Array.prototype,jg=Hg.slice;function Aa(t){return()=>t}const Wg=Math.sqrt(50),Vg=Math.sqrt(10),Gg=Math.sqrt(2);function ji(t,n,a){const l=(n-t)/Math.max(0,a),u=Math.floor(Math.log10(l)),c=l/Math.pow(10,u),p=c>=Wg?10:c>=Vg?5:c>=Gg?2:1;let d,Q,Ct;return u<0?(Ct=Math.pow(10,-u)/p,d=Math.round(t*Ct),Q=Math.round(n*Ct),d/Ct<t&&++d,Q/Ct>n&&--Q,Ct=-Ct):(Ct=Math.pow(10,u)*p,d=Math.round(t/Ct),Q=Math.round(n/Ct),d*Ct<t&&++d,Q*Ct>n&&--Q),Q<d&&.5<=a&&a<2?ji(t,n,a*2):[d,Q,Ct]}function oe$1(t,n,a){if(n=+n,t=+t,a=+a,!(a>0))return[];if(t===n)return[t];const l=n<t,[u,c,p]=l?ji(n,t,a):ji(t,n,a);if(!(c>=u))return[];const d=c-u+1,Q=new Array(d);if(l)if(p<0)for(let Ct=0;Ct<d;++Ct)Q[Ct]=(c-Ct)/-p;else for(let Ct=0;Ct<d;++Ct)Q[Ct]=(c-Ct)*p;else if(p<0)for(let Ct=0;Ct<d;++Ct)Q[Ct]=(u+Ct)/-p;else for(let Ct=0;Ct<d;++Ct)Q[Ct]=(u+Ct)*p;return Q}function ae$1(t,n,a){return n=+n,t=+t,a=+a,ji(t,n,a)[2]}function Wi(t,n,a){n=+n,t=+t,a=+a;const l=n<t,u=l?ae$1(n,t,a):ae$1(t,n,a);return(l?-1:1)*(u<0?1/-u:u)}function df(t,n,a){let l;for(;;){const u=ae$1(t,n,a);if(u===l||u===0||!isFinite(u))return[t,n];u>0?(t=Math.floor(t/u)*u,n=Math.ceil(n/u)*u):u<0&&(t=Math.ceil(t*u)/u,n=Math.floor(n*u)/u),l=u}}function gf(t){return Math.max(1,Math.ceil(Math.log(Yo(t))/Math.LN2)+1)}function Nc(){var t=qe,n=Sr,a=gf;function l(u){Array.isArray(u)||(u=Array.from(u));var c,p=u.length,d,Q,Ct=new Array(p);for(c=0;c<p;++c)Ct[c]=t(u[c],c,u);var ar=n(Ct),en=ar[0],tn=ar[1],on=a(Ct,en,tn);if(!Array.isArray(on)){const ax=tn,ox=+on;if(n===Sr&&([en,tn]=df(en,tn,ox)),on=oe$1(en,tn,ox),on[0]<=en&&(Q=ae$1(en,tn,ox)),on[on.length-1]>=tn)if(ax>=tn&&n===Sr){const lx=ae$1(en,tn,ox);isFinite(lx)&&(lx>0?tn=(Math.floor(tn/lx)+1)*lx:lx<0&&(tn=(Math.ceil(tn*-lx)+1)/-lx))}else on.pop()}for(var cn=on.length,gn=0,Cn=cn;on[gn]<=en;)++gn;for(;on[Cn-1]>tn;)--Cn;(gn||Cn<cn)&&(on=on.slice(gn,Cn),cn=Cn-gn);var ex=new Array(cn+1),ix;for(c=0;c<=cn;++c)ix=ex[c]=[],ix.x0=c>0?on[c-1]:en,ix.x1=c<cn?on[c]:tn;if(isFinite(Q)){if(Q>0)for(c=0;c<p;++c)(d=Ct[c])!=null&&en<=d&&d<=tn&&ex[Math.min(cn,Math.floor((d-en)/Q))].push(u[c]);else if(Q<0){for(c=0;c<p;++c)if((d=Ct[c])!=null&&en<=d&&d<=tn){const ax=Math.floor((en-d)*Q);ex[Math.min(cn,ax+(on[ax]<=d))].push(u[c])}}}else for(c=0;c<p;++c)(d=Ct[c])!=null&&en<=d&&d<=tn&&ex[Ft(on,d,0,cn)].push(u[c]);return ex}return l.value=function(u){return arguments.length?(t=typeof u=="function"?u:Aa(u),l):t},l.domain=function(u){return arguments.length?(n=typeof u=="function"?u:Aa([u[0],u[1]]),l):n},l.thresholds=function(u){return arguments.length?(a=typeof u=="function"?u:Aa(Array.isArray(u)?jg.call(u):u),l):a},l}function Pr(t,n){let a;if(n===void 0)for(const l of t)l!=null&&(a<l||a===void 0&&l>=l)&&(a=l);else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(a<u||a===void 0&&u>=u)&&(a=u)}return a}function pf(t,n){let a,l=-1,u=-1;if(n===void 0)for(const c of t)++u,c!=null&&(a<c||a===void 0&&c>=c)&&(a=c,l=u);else for(let c of t)(c=n(c,++u,t))!=null&&(a<c||a===void 0&&c>=c)&&(a=c,l=u);return l}function Vi(t,n){let a;if(n===void 0)for(const l of t)l!=null&&(a>l||a===void 0&&l>=l)&&(a=l);else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(a>u||a===void 0&&u>=u)&&(a=u)}return a}function mf(t,n){let a,l=-1,u=-1;if(n===void 0)for(const c of t)++u,c!=null&&(a>c||a===void 0&&c>=c)&&(a=c,l=u);else for(let c of t)(c=n(c,++u,t))!=null&&(a>c||a===void 0&&c>=c)&&(a=c,l=u);return l}function Fo(t,n,a=0,l=1/0,u){if(n=Math.floor(n),a=Math.floor(Math.max(0,a)),l=Math.floor(Math.min(t.length-1,l)),!(a<=n&&n<=l))return t;for(u=u===void 0?Le:hf(u);l>a;){if(l-a>600){const Q=l-a+1,Ct=n-a+1,ar=Math.log(Q),en=.5*Math.exp(2*ar/3),tn=.5*Math.sqrt(ar*en*(Q-en)/Q)*(Ct-Q/2<0?-1:1),on=Math.max(a,Math.floor(n-Ct*en/Q+tn)),cn=Math.min(l,Math.floor(n+(Q-Ct)*en/Q+tn));Fo(t,n,on,cn,u)}const c=t[n];let p=a,d=l;for(ur(t,a,n),u(t[l],c)>0&&ur(t,a,l);p<d;){for(ur(t,p,d),++p,--d;u(t[p],c)<0;)++p;for(;u(t[d],c)>0;)--d}u(t[a],c)===0?ur(t,a,d):(++d,ur(t,d,l)),d<=n&&(a=d+1),n<=d&&(l=d-1)}return t}function ur(t,n,a){const l=t[n];t[n]=t[a],t[a]=l}function sh(t,n=hn){let a,l=!1;if(n.length===1){let u;for(const c of t){const p=n(c);(l?hn(p,u)>0:hn(p,p)===0)&&(a=c,u=p,l=!0)}}else for(const u of t)(l?n(u,a)>0:n(u,u)===0)&&(a=u,l=!0);return a}function Dr(t,n,a){if(t=Float64Array.from(Tg(t,a)),!(!(l=t.length)||isNaN(n=+n))){if(n<=0||l<2)return Vi(t);if(n>=1)return Pr(t);var l,u=(l-1)*n,c=Math.floor(u),p=Pr(Fo(t,c).subarray(0,c+1)),d=Vi(t.subarray(c+1));return p+(d-p)*(u-c)}}function lh(t,n,a=Hi){if(!(!(l=t.length)||isNaN(n=+n))){if(n<=0||l<2)return+a(t[0],0,t);if(n>=1)return+a(t[l-1],l-1,t);var l,u=(l-1)*n,c=Math.floor(u),p=+a(t[c],c,t),d=+a(t[c+1],c+1,t);return p+(d-p)*(u-c)}}function hh(t,n,a=Hi){if(!isNaN(n=+n)){if(l=Float64Array.from(t,(d,Q)=>Hi(a(t[Q],Q,t))),n<=0)return mf(l);if(n>=1)return pf(l);var l,u=Uint32Array.from(t,(d,Q)=>Q),c=l.length-1,p=Math.floor(c*n);return Fo(u,p,0,c,(d,Q)=>Le(l[d],l[Q])),p=sh(u.subarray(0,p+1),d=>l[d]),p>=0?p:-1}}function Zg(t,n,a){const l=Yo(t),u=Dr(t,.75)-Dr(t,.25);return l&&u?Math.ceil((a-n)/(2*u*Math.pow(l,-1/3))):1}function Qg(t,n,a){const l=Yo(t),u=Jl(t);return l&&u?Math.ceil((a-n)*Math.cbrt(l)/(3.49*u)):1}function Kg(t,n){let a=0,l=0;if(n===void 0)for(let u of t)u!=null&&(u=+u)>=u&&(++a,l+=u);else{let u=-1;for(let c of t)(c=n(c,++u,t))!=null&&(c=+c)>=c&&(++a,l+=c)}if(a)return l/a}function Jg(t,n){return Dr(t,.5,n)}function np(t,n){return hh(t,.5,n)}function*tp(t){for(const n of t)yield*n}function yf(t){return Array.from(tp(t))}function ep(t,n){const a=new Cr;if(n===void 0)for(let c of t)c!=null&&c>=c&&a.set(c,(a.get(c)||0)+1);else{let c=-1;for(let p of t)(p=n(p,++c,t))!=null&&p>=p&&a.set(p,(a.get(p)||0)+1)}let l,u=0;for(const[c,p]of a)p>u&&(u=p,l=c);return l}function rp(t,n=ip){const a=[];let l,u=!1;for(const c of t)u&&a.push(n(l,c)),l=c,u=!0;return a}function ip(t,n){return[t,n]}function zt(t,n,a){t=+t,n=+n,a=(u=arguments.length)<2?(n=t,t=0,1):u<3?1:+a;for(var l=-1,u=Math.max(0,Math.ceil((n-t)/a))|0,c=new Array(u);++l<u;)c[l]=t+l*a;return c}function op(t,n=hn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let a=Array.from(t);const l=new Float64Array(a.length);n.length!==2&&(a=a.map(n),n=hn);const u=(d,Q)=>n(a[d],a[Q]);let c,p;return t=Uint32Array.from(a,(d,Q)=>Q),t.sort(n===hn?(d,Q)=>Le(a[d],a[Q]):hf(u)),t.forEach((d,Q)=>{const Ct=u(d,c===void 0?d:c);Ct>=0?((c===void 0||Ct>0)&&(c=d,p=Q),l[d]=p):l[d]=NaN}),l}function ap(t,n=hn){let a,l=!1;if(n.length===1){let u;for(const c of t){const p=n(c);(l?hn(p,u)<0:hn(p,p)===0)&&(a=c,u=p,l=!0)}}else for(const u of t)(l?n(u,a)<0:n(u,u)===0)&&(a=u,l=!0);return a}function dh(t,n=hn){if(n.length===1)return mf(t,n);let a,l=-1,u=-1;for(const c of t)++u,(l<0?n(c,c)===0:n(c,a)<0)&&(a=c,l=u);return l}function up(t,n=hn){if(n.length===1)return pf(t,n);let a,l=-1,u=-1;for(const c of t)++u,(l<0?n(c,c)===0:n(c,a)>0)&&(a=c,l=u);return l}function fp(t,n){const a=dh(t,n);return a<0?void 0:a}const cp=gh(Math.random);function gh(t){return function(n,a=0,l=n.length){let u=l-(a=+a);for(;u;){const c=t()*u--|0,p=n[u+a];n[u+a]=n[c+a],n[c+a]=p}return n}}function sp(t,n){let a=0;if(n===void 0)for(let l of t)(l=+l)&&(a+=l);else{let l=-1;for(let u of t)(u=+n(u,++l,t))&&(a+=u)}return a}function ph(t){if(!(c=t.length))return[];for(var n=-1,a=Vi(t,lp),l=new Array(a);++n<a;)for(var u=-1,c,p=l[n]=new Array(c);++u<c;)p[u]=t[u][n];return l}function lp(t){return t.length}function hp(){return ph(arguments)}function dp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const l of t)if(!n(l,++a,t))return!1;return!0}function gp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const l of t)if(n(l,++a,t))return!0;return!1}function pp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");const a=[];let l=-1;for(const u of t)n(u,++l,t)&&a.push(u);return a}function mp(t,n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(t,(a,l)=>n(a,l,t))}function yp(t,n,a){if(typeof n!="function")throw new TypeError("reducer is not a function");const l=t[Symbol.iterator]();let u,c,p=-1;if(arguments.length<3){if({done:u,value:a}=l.next(),u)return;++p}for(;{done:u,value:c}=l.next(),!u;)a=n(a,c,++p,t);return a}function _p(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function vp(t,...n){t=new ie$1(t);for(const a of n)for(const l of a)t.delete(l);return t}function bp(t,n){const a=n[Symbol.iterator](),l=new ie$1;for(const u of t){if(l.has(u))return!1;let c,p;for(;({value:c,done:p}=a.next())&&!p;){if(Object.is(u,c))return!1;l.add(c)}}return!0}function wp(t,...n){t=new ie$1(t),n=n.map(xp);e:for(const a of t)for(const l of n)if(!l.has(a)){t.delete(a);continue e}return t}function xp(t){return t instanceof ie$1?t:new ie$1(t)}function mh(t,n){const a=t[Symbol.iterator](),l=new Set;for(const u of n){const c=Rc(u);if(l.has(c))continue;let p,d;for(;{value:p,done:d}=a.next();){if(d)return!1;const Q=Rc(p);if(l.add(Q),Object.is(c,Q))break}}return!0}function Rc(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Mp(t,n){return mh(n,t)}function $p(...t){const n=new ie$1;for(const a of t)for(const l of a)n.add(l);return n}function Tp(t){return t}var Ci=1,Pi=2,gu=3,mr=4,Ic=1e-6;function Ap(t){return"translate("+t+",0)"}function Sp(t){return"translate(0,"+t+")"}function Ep(t){return n=>+t(n)}function kp(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),a=>+t(a)+n}function Np(){return!this.__axis}function qo(t,n){var a=[],l=null,u=null,c=6,p=6,d=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,Ct=t===Ci||t===mr?-1:1,ar=t===mr||t===Pi?"x":"y",en=t===Ci||t===gu?Ap:Sp;function tn(on){var cn=l??(n.ticks?n.ticks.apply(n,a):n.domain()),gn=u??(n.tickFormat?n.tickFormat.apply(n,a):Tp),Cn=Math.max(c,0)+d,ex=n.range(),ix=+ex[0]+Q,ax=+ex[ex.length-1]+Q,ox=(n.bandwidth?kp:Ep)(n.copy(),Q),lx=on.selection?on.selection():on,cx=lx.selectAll(".domain").data([null]),dx=lx.selectAll(".tick").data(cn,n).order(),hx=dx.exit(),fx=dx.enter().append("g").attr("class","tick"),ux=dx.select("line"),gx=dx.select("text");cx=cx.merge(cx.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),dx=dx.merge(fx),ux=ux.merge(fx.append("line").attr("stroke","currentColor").attr(ar+"2",Ct*c)),gx=gx.merge(fx.append("text").attr("fill","currentColor").attr(ar,Ct*Cn).attr("dy",t===Ci?"0em":t===gu?"0.71em":"0.32em")),on!==lx&&(cx=cx.transition(on),dx=dx.transition(on),ux=ux.transition(on),gx=gx.transition(on),hx=hx.transition(on).attr("opacity",Ic).attr("transform",function(yx){return isFinite(yx=ox(yx))?en(yx+Q):this.getAttribute("transform")}),fx.attr("opacity",Ic).attr("transform",function(yx){var _x=this.parentNode.__axis;return en((_x&&isFinite(_x=_x(yx))?_x:ox(yx))+Q)})),hx.remove(),cx.attr("d",t===mr||t===Pi?p?"M"+Ct*p+","+ix+"H"+Q+"V"+ax+"H"+Ct*p:"M"+Q+","+ix+"V"+ax:p?"M"+ix+","+Ct*p+"V"+Q+"H"+ax+"V"+Ct*p:"M"+ix+","+Q+"H"+ax),dx.attr("opacity",1).attr("transform",function(yx){return en(ox(yx)+Q)}),ux.attr(ar+"2",Ct*c),gx.attr(ar,Ct*Cn).text(gn),lx.filter(Np).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Pi?"start":t===mr?"end":"middle"),lx.each(function(){this.__axis=ox})}return tn.scale=function(on){return arguments.length?(n=on,tn):n},tn.ticks=function(){return a=Array.from(arguments),tn},tn.tickArguments=function(on){return arguments.length?(a=on==null?[]:Array.from(on),tn):a.slice()},tn.tickValues=function(on){return arguments.length?(l=on==null?null:Array.from(on),tn):l&&l.slice()},tn.tickFormat=function(on){return arguments.length?(u=on,tn):u},tn.tickSize=function(on){return arguments.length?(c=p=+on,tn):c},tn.tickSizeInner=function(on){return arguments.length?(c=+on,tn):c},tn.tickSizeOuter=function(on){return arguments.length?(p=+on,tn):p},tn.tickPadding=function(on){return arguments.length?(d=+on,tn):d},tn.offset=function(on){return arguments.length?(Q=+on,tn):Q},tn}function Rp(t){return qo(Ci,t)}function Ip(t){return qo(Pi,t)}function Cp(t){return qo(gu,t)}function Pp(t){return qo(mr,t)}var Dp={value:()=>{}};function pe$1(){for(var t=0,n=arguments.length,a={},l;t<n;++t){if(!(l=arguments[t]+"")||l in a||/[\s.]/.test(l))throw new Error("illegal type: "+l);a[l]=[]}return new Di(a)}function Di(t){this._=t}function zp(t,n){return t.trim().split(/^|\s+/).map(function(a){var l="",u=a.indexOf(".");if(u>=0&&(l=a.slice(u+1),a=a.slice(0,u)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:l}})}Di.prototype=pe$1.prototype={constructor:Di,on:function(t,n){var a=this._,l=zp(t+"",a),u,c=-1,p=l.length;if(arguments.length<2){for(;++c<p;)if((u=(t=l[c]).type)&&(u=Op(a[u],t.name)))return u;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<p;)if(u=(t=l[c]).type)a[u]=Cc(a[u],t.name,n);else if(n==null)for(u in a)a[u]=Cc(a[u],t.name,null);return this},copy:function(){var t={},n=this._;for(var a in n)t[a]=n[a].slice();return new Di(t)},call:function(t,n){if((u=arguments.length-2)>0)for(var a=new Array(u),l=0,u,c;l<u;++l)a[l]=arguments[l+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],l=0,u=c.length;l<u;++l)c[l].value.apply(n,a)},apply:function(t,n,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var l=this._[t],u=0,c=l.length;u<c;++u)l[u].value.apply(n,a)}};function Op(t,n){for(var a=0,l=t.length,u;a<l;++a)if((u=t[a]).name===n)return u.value}function Cc(t,n,a){for(var l=0,u=t.length;l<u;++l)if(t[l].name===n){t[l]=Dp,t=t.slice(0,l).concat(t.slice(l+1));break}return a!=null&&t.push({name:n,value:a}),t}var pu="http://www.w3.org/1999/xhtml";const mu={svg:"http://www.w3.org/2000/svg",xhtml:pu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zr(t){var n=t+="",a=n.indexOf(":");return a>=0&&(n=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),mu.hasOwnProperty(n)?{space:mu[n],local:t}:t}function Yp(t){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===pu&&n.documentElement.namespaceURI===pu?n.createElement(t):n.createElementNS(a,t)}}function Fp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Lo(t){var n=Zr(t);return(n.local?Fp:Yp)(n)}function qp(){}function Bo(t){return t==null?qp:function(){return this.querySelector(t)}}function Lp(t){typeof t!="function"&&(t=Bo(t));for(var n=this._groups,a=n.length,l=new Array(a),u=0;u<a;++u)for(var c=n[u],p=c.length,d=l[u]=new Array(p),Q,Ct,ar=0;ar<p;++ar)(Q=c[ar])&&(Ct=t.call(Q,Q.__data__,ar,c))&&("__data__"in Q&&(Ct.__data__=Q.__data__),d[ar]=Ct);return new qn(l,this._parents)}function yh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Bp(){return[]}function _f(t){return t==null?Bp:function(){return this.querySelectorAll(t)}}function Up(t){return function(){return yh(t.apply(this,arguments))}}function Xp(t){typeof t=="function"?t=Up(t):t=_f(t);for(var n=this._groups,a=n.length,l=[],u=[],c=0;c<a;++c)for(var p=n[c],d=p.length,Q,Ct=0;Ct<d;++Ct)(Q=p[Ct])&&(l.push(t.call(Q,Q.__data__,Ct,p)),u.push(Q));return new qn(l,u)}function vf(t){return function(){return this.matches(t)}}function _h(t){return function(n){return n.matches(t)}}var Hp=Array.prototype.find;function jp(t){return function(){return Hp.call(this.children,t)}}function Wp(){return this.firstElementChild}function Vp(t){return this.select(t==null?Wp:jp(typeof t=="function"?t:_h(t)))}var Gp=Array.prototype.filter;function Zp(){return Array.from(this.children)}function Qp(t){return function(){return Gp.call(this.children,t)}}function Kp(t){return this.selectAll(t==null?Zp:Qp(typeof t=="function"?t:_h(t)))}function Jp(t){typeof t!="function"&&(t=vf(t));for(var n=this._groups,a=n.length,l=new Array(a),u=0;u<a;++u)for(var c=n[u],p=c.length,d=l[u]=[],Q,Ct=0;Ct<p;++Ct)(Q=c[Ct])&&t.call(Q,Q.__data__,Ct,c)&&d.push(Q);return new qn(l,this._parents)}function vh(t){return new Array(t.length)}function n2(){return new qn(this._enter||this._groups.map(vh),this._parents)}function Gi(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Gi.prototype={constructor:Gi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function t2(t){return function(){return t}}function e2(t,n,a,l,u,c){for(var p=0,d,Q=n.length,Ct=c.length;p<Ct;++p)(d=n[p])?(d.__data__=c[p],l[p]=d):a[p]=new Gi(t,c[p]);for(;p<Q;++p)(d=n[p])&&(u[p]=d)}function r2(t,n,a,l,u,c,p){var d,Q,Ct=new Map,ar=n.length,en=c.length,tn=new Array(ar),on;for(d=0;d<ar;++d)(Q=n[d])&&(tn[d]=on=p.call(Q,Q.__data__,d,n)+"",Ct.has(on)?u[d]=Q:Ct.set(on,Q));for(d=0;d<en;++d)on=p.call(t,c[d],d,c)+"",(Q=Ct.get(on))?(l[d]=Q,Q.__data__=c[d],Ct.delete(on)):a[d]=new Gi(t,c[d]);for(d=0;d<ar;++d)(Q=n[d])&&Ct.get(tn[d])===Q&&(u[d]=Q)}function i2(t){return t.__data__}function o2(t,n){if(!arguments.length)return Array.from(this,i2);var a=n?r2:e2,l=this._parents,u=this._groups;typeof t!="function"&&(t=t2(t));for(var c=u.length,p=new Array(c),d=new Array(c),Q=new Array(c),Ct=0;Ct<c;++Ct){var ar=l[Ct],en=u[Ct],tn=en.length,on=a2(t.call(ar,ar&&ar.__data__,Ct,l)),cn=on.length,gn=d[Ct]=new Array(cn),Cn=p[Ct]=new Array(cn),ex=Q[Ct]=new Array(tn);a(ar,en,gn,Cn,ex,on,n);for(var ix=0,ax=0,ox,lx;ix<cn;++ix)if(ox=gn[ix]){for(ix>=ax&&(ax=ix+1);!(lx=Cn[ax])&&++ax<cn;);ox._next=lx||null}}return p=new qn(p,l),p._enter=d,p._exit=Q,p}function a2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function u2(){return new qn(this._exit||this._groups.map(vh),this._parents)}function f2(t,n,a){var l=this.enter(),u=this,c=this.exit();return typeof t=="function"?(l=t(l),l&&(l=l.selection())):l=l.append(t+""),n!=null&&(u=n(u),u&&(u=u.selection())),a==null?c.remove():a(c),l&&u?l.merge(u).order():u}function c2(t){for(var n=t.selection?t.selection():t,a=this._groups,l=n._groups,u=a.length,c=l.length,p=Math.min(u,c),d=new Array(u),Q=0;Q<p;++Q)for(var Ct=a[Q],ar=l[Q],en=Ct.length,tn=d[Q]=new Array(en),on,cn=0;cn<en;++cn)(on=Ct[cn]||ar[cn])&&(tn[cn]=on);for(;Q<u;++Q)d[Q]=a[Q];return new qn(d,this._parents)}function s2(){for(var t=this._groups,n=-1,a=t.length;++n<a;)for(var l=t[n],u=l.length-1,c=l[u],p;--u>=0;)(p=l[u])&&(c&&p.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(p,c),c=p);return this}function l2(t){t||(t=h2);function n(en,tn){return en&&tn?t(en.__data__,tn.__data__):!en-!tn}for(var a=this._groups,l=a.length,u=new Array(l),c=0;c<l;++c){for(var p=a[c],d=p.length,Q=u[c]=new Array(d),Ct,ar=0;ar<d;++ar)(Ct=p[ar])&&(Q[ar]=Ct);Q.sort(n)}return new qn(u,this._parents).order()}function h2(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function d2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function g2(){return Array.from(this)}function p2(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var l=t[n],u=0,c=l.length;u<c;++u){var p=l[u];if(p)return p}return null}function m2(){let t=0;for(const n of this)++t;return t}function y2(){return!this.node()}function _2(t){for(var n=this._groups,a=0,l=n.length;a<l;++a)for(var u=n[a],c=0,p=u.length,d;c<p;++c)(d=u[c])&&t.call(d,d.__data__,c,u);return this}function v2$1(t){return function(){this.removeAttribute(t)}}function b2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w2(t,n){return function(){this.setAttribute(t,n)}}function x2(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function M2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function $2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function T2(t,n){var a=Zr(t);if(arguments.length<2){var l=this.node();return a.local?l.getAttributeNS(a.space,a.local):l.getAttribute(a)}return this.each((n==null?a.local?b2:v2$1:typeof n=="function"?a.local?$2:M2:a.local?x2:w2)(a,n))}function bf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A2(t){return function(){this.style.removeProperty(t)}}function S2(t,n,a){return function(){this.style.setProperty(t,n,a)}}function E2(t,n,a){return function(){var l=n.apply(this,arguments);l==null?this.style.removeProperty(t):this.style.setProperty(t,l,a)}}function k2(t,n,a){return arguments.length>1?this.each((n==null?A2:typeof n=="function"?E2:S2)(t,n,a??"")):ue$1(this.node(),t)}function ue$1(t,n){return t.style.getPropertyValue(n)||bf(t).getComputedStyle(t,null).getPropertyValue(n)}function N2(t){return function(){delete this[t]}}function R2(t,n){return function(){this[t]=n}}function I2(t,n){return function(){var a=n.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function C2(t,n){return arguments.length>1?this.each((n==null?N2:typeof n=="function"?I2:R2)(t,n)):this.node()[t]}function bh(t){return t.trim().split(/^|\s+/)}function wf(t){return t.classList||new wh(t)}function wh(t){this._node=t,this._names=bh(t.getAttribute("class")||"")}wh.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xh(t,n){for(var a=wf(t),l=-1,u=n.length;++l<u;)a.add(n[l])}function Mh(t,n){for(var a=wf(t),l=-1,u=n.length;++l<u;)a.remove(n[l])}function P2(t){return function(){xh(this,t)}}function D2(t){return function(){Mh(this,t)}}function z2(t,n){return function(){(n.apply(this,arguments)?xh:Mh)(this,t)}}function O2(t,n){var a=bh(t+"");if(arguments.length<2){for(var l=wf(this.node()),u=-1,c=a.length;++u<c;)if(!l.contains(a[u]))return!1;return!0}return this.each((typeof n=="function"?z2:n?P2:D2)(a,n))}function Y2(){this.textContent=""}function F2(t){return function(){this.textContent=t}}function q2(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function L2(t){return arguments.length?this.each(t==null?Y2:(typeof t=="function"?q2:F2)(t)):this.node().textContent}function B2(){this.innerHTML=""}function U2(t){return function(){this.innerHTML=t}}function X2(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function H2(t){return arguments.length?this.each(t==null?B2:(typeof t=="function"?X2:U2)(t)):this.node().innerHTML}function j2(){this.nextSibling&&this.parentNode.appendChild(this)}function W2(){return this.each(j2)}function V2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G2(){return this.each(V2)}function Z2(t){var n=typeof t=="function"?t:Lo(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Q2(){return null}function K2(t,n){var a=typeof t=="function"?t:Lo(t),l=n==null?Q2:typeof n=="function"?n:Bo(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),l.apply(this,arguments)||null)})}function J2(){var t=this.parentNode;t&&t.removeChild(this)}function nm(){return this.each(J2)}function tm(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function em(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function rm(t){return this.select(t?em:tm)}function im(t){return arguments.length?this.property("__data__",t):this.node().__data__}function om(t){return function(n){t.call(this,n,this.__data__)}}function am(t){return t.trim().split(/^|\s+/).map(function(n){var a="",l=n.indexOf(".");return l>=0&&(a=n.slice(l+1),n=n.slice(0,l)),{type:n,name:a}})}function um(t){return function(){var n=this.__on;if(n){for(var a=0,l=-1,u=n.length,c;a<u;++a)c=n[a],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):n[++l]=c;++l?n.length=l:delete this.__on}}}function fm(t,n,a){return function(){var l=this.__on,u,c=om(n);if(l){for(var p=0,d=l.length;p<d;++p)if((u=l[p]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=c,u.options=a),u.value=n;return}}this.addEventListener(t.type,c,a),u={type:t.type,name:t.name,value:n,listener:c,options:a},l?l.push(u):this.__on=[u]}}function cm(t,n,a){var l=am(t+""),u,c=l.length,p;if(arguments.length<2){var d=this.node().__on;if(d){for(var Q=0,Ct=d.length,ar;Q<Ct;++Q)for(u=0,ar=d[Q];u<c;++u)if((p=l[u]).type===ar.type&&p.name===ar.name)return ar.value}return}for(d=n?fm:um,u=0;u<c;++u)this.each(d(l[u],n,a));return this}function $h(t,n,a){var l=bf(t),u=l.CustomEvent;typeof u=="function"?u=new u(n,a):(u=l.document.createEvent("Event"),a?(u.initEvent(n,a.bubbles,a.cancelable),u.detail=a.detail):u.initEvent(n,!1,!1)),t.dispatchEvent(u)}function sm(t,n){return function(){return $h(this,t,n)}}function lm(t,n){return function(){return $h(this,t,n.apply(this,arguments))}}function hm(t,n){return this.each((typeof n=="function"?lm:sm)(t,n))}function*dm(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var l=t[n],u=0,c=l.length,p;u<c;++u)(p=l[u])&&(yield p)}var xf=[null];function qn(t,n){this._groups=t,this._parents=n}function me$1(){return new qn([[document.documentElement]],xf)}function gm(){return this}qn.prototype=me$1.prototype={constructor:qn,select:Lp,selectAll:Xp,selectChild:Vp,selectChildren:Kp,filter:Jp,data:o2,enter:n2,exit:u2,join:f2,merge:c2,selection:gm,order:s2,sort:l2,call:d2,nodes:g2,node:p2,size:m2,empty:y2,each:_2,attr:T2,style:k2,property:C2,classed:O2,text:L2,html:H2,raise:W2,lower:G2,append:Z2,insert:K2,remove:nm,clone:rm,datum:im,on:cm,dispatch:hm,[Symbol.iterator]:dm};function X$1(t){return typeof t=="string"?new qn([[document.querySelector(t)]],[document.documentElement]):new qn([[t]],xf)}function pm(t){return X$1(Lo(t).call(document.documentElement))}var mm=0;function Th(){return new yu}function yu(){this._="@"+(++mm).toString(36)}yu.prototype=Th.prototype={constructor:yu,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Ah(t){let n;for(;n=t.sourceEvent;)t=n;return t}function wn(t,n){if(t=Ah(t),n===void 0&&(n=t.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var l=a.createSVGPoint();return l.x=t.clientX,l.y=t.clientY,l=l.matrixTransform(n.getScreenCTM().inverse()),[l.x,l.y]}if(n.getBoundingClientRect){var u=n.getBoundingClientRect();return[t.clientX-u.left-n.clientLeft,t.clientY-u.top-n.clientTop]}}return[t.pageX,t.pageY]}function ym(t,n){return t.target&&(t=Ah(t),n===void 0&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,a=>wn(a,n))}function _m(t){return typeof t=="string"?new qn([document.querySelectorAll(t)],[document.documentElement]):new qn([yh(t)],xf)}const vm={passive:!1},zr={capture:!0,passive:!1};function Sa(t){t.stopImmediatePropagation()}function De(t){t.preventDefault(),t.stopImmediatePropagation()}function Uo(t){var n=t.document.documentElement,a=X$1(t).on("dragstart.drag",De,zr);"onselectstart"in n?a.on("selectstart.drag",De,zr):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xo(t,n){var a=t.document.documentElement,l=X$1(t).on("dragstart.drag",null);n&&(l.on("click.drag",De,zr),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in a?l.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const si=t=>()=>t;function _u(t,{sourceEvent:n,subject:a,target:l,identifier:u,active:c,x:p,y:d,dx:Q,dy:Ct,dispatch:ar}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:p,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:Q,enumerable:!0,configurable:!0},dy:{value:Ct,enumerable:!0,configurable:!0},_:{value:ar}})}_u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function bm(t){return!t.ctrlKey&&!t.button}function wm(){return this.parentNode}function xm(t,n){return n??{x:t.x,y:t.y}}function Mm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sh(){var t=bm,n=wm,a=xm,l=Mm,u={},c=pe$1("start","drag","end"),p=0,d,Q,Ct,ar,en=0;function tn(ox){ox.on("mousedown.drag",on).filter(l).on("touchstart.drag",Cn).on("touchmove.drag",ex,vm).on("touchend.drag touchcancel.drag",ix).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function on(ox,lx){if(!(ar||!t.call(this,ox,lx))){var cx=ax(this,n.call(this,ox,lx),ox,lx,"mouse");cx&&(X$1(ox.view).on("mousemove.drag",cn,zr).on("mouseup.drag",gn,zr),Uo(ox.view),Sa(ox),Ct=!1,d=ox.clientX,Q=ox.clientY,cx("start",ox))}}function cn(ox){if(De(ox),!Ct){var lx=ox.clientX-d,cx=ox.clientY-Q;Ct=lx*lx+cx*cx>en}u.mouse("drag",ox)}function gn(ox){X$1(ox.view).on("mousemove.drag mouseup.drag",null),Xo(ox.view,Ct),De(ox),u.mouse("end",ox)}function Cn(ox,lx){if(t.call(this,ox,lx)){var cx=ox.changedTouches,dx=n.call(this,ox,lx),hx=cx.length,fx,ux;for(fx=0;fx<hx;++fx)(ux=ax(this,dx,ox,lx,cx[fx].identifier,cx[fx]))&&(Sa(ox),ux("start",ox,cx[fx]))}}function ex(ox){var lx=ox.changedTouches,cx=lx.length,dx,hx;for(dx=0;dx<cx;++dx)(hx=u[lx[dx].identifier])&&(De(ox),hx("drag",ox,lx[dx]))}function ix(ox){var lx=ox.changedTouches,cx=lx.length,dx,hx;for(ar&&clearTimeout(ar),ar=setTimeout(function(){ar=null},500),dx=0;dx<cx;++dx)(hx=u[lx[dx].identifier])&&(Sa(ox),hx("end",ox,lx[dx]))}function ax(ox,lx,cx,dx,hx,fx){var ux=c.copy(),gx=wn(fx||cx,lx),yx,_x,vx;if((vx=a.call(ox,new _u("beforestart",{sourceEvent:cx,target:tn,identifier:hx,active:p,x:gx[0],y:gx[1],dx:0,dy:0,dispatch:ux}),dx))!=null)return yx=vx.x-gx[0]||0,_x=vx.y-gx[1]||0,function bx(xx,Sx,Ax){var Cx=gx,Tx;switch(xx){case"start":u[hx]=bx,Tx=p++;break;case"end":delete u[hx],--p;case"drag":gx=wn(Ax||Sx,lx),Tx=p;break}ux.call(xx,ox,new _u(xx,{sourceEvent:Sx,subject:vx,target:tn,identifier:hx,active:Tx,x:gx[0]+yx,y:gx[1]+_x,dx:gx[0]-Cx[0],dy:gx[1]-Cx[1],dispatch:ux}),dx)}}return tn.filter=function(ox){return arguments.length?(t=typeof ox=="function"?ox:si(!!ox),tn):t},tn.container=function(ox){return arguments.length?(n=typeof ox=="function"?ox:si(ox),tn):n},tn.subject=function(ox){return arguments.length?(a=typeof ox=="function"?ox:si(ox),tn):a},tn.touchable=function(ox){return arguments.length?(l=typeof ox=="function"?ox:si(!!ox),tn):l},tn.on=function(){var ox=c.on.apply(c,arguments);return ox===c?tn:ox},tn.clickDistance=function(ox){return arguments.length?(en=(ox=+ox)*ox,tn):Math.sqrt(en)},tn}function rr(t,n,a){t.prototype=n.prototype=a,a.constructor=t}function Qr(t,n){var a=Object.create(t.prototype);for(var l in n)a[l]=n[l];return a}function Xt(){}var fe$1=.7,Be=1/fe$1,ze="\\s*([+-]?\\d+)\\s*",Or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$m=/^#([0-9a-f]{3,8})$/,Tm=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Am=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),Sm=new RegExp(`^rgba\\(${ze},${ze},${ze},${Or}\\)$`),Em=new RegExp(`^rgba\\(${dt},${dt},${dt},${Or}\\)$`),km=new RegExp(`^hsl\\(${Or},${dt},${dt}\\)$`),Nm=new RegExp(`^hsla\\(${Or},${dt},${dt},${Or}\\)$`),Pc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rr(Xt,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dc,formatHex:Dc,formatHex8:Rm,formatHsl:Im,formatRgb:zc,toString:zc});function Dc(){return this.rgb().formatHex()}function Rm(){return this.rgb().formatHex8()}function Im(){return Eh(this).formatHsl()}function zc(){return this.rgb().formatRgb()}function qt(t){var n,a;return t=(t+"").trim().toLowerCase(),(n=$m.exec(t))?(a=n[1].length,n=parseInt(n[1],16),a===6?Oc(n):a===3?new xn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?li(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?li(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Tm.exec(t))?new xn(n[1],n[2],n[3],1):(n=Am.exec(t))?new xn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Sm.exec(t))?li(n[1],n[2],n[3],n[4]):(n=Em.exec(t))?li(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=km.exec(t))?qc(n[1],n[2]/100,n[3]/100,1):(n=Nm.exec(t))?qc(n[1],n[2]/100,n[3]/100,n[4]):Pc.hasOwnProperty(t)?Oc(Pc[t]):t==="transparent"?new xn(NaN,NaN,NaN,0):null}function Oc(t){return new xn(t>>16&255,t>>8&255,t&255,1)}function li(t,n,a,l){return l<=0&&(t=n=a=NaN),new xn(t,n,a,l)}function Mf(t){return t instanceof Xt||(t=qt(t)),t?(t=t.rgb(),new xn(t.r,t.g,t.b,t.opacity)):new xn}function Ue(t,n,a,l){return arguments.length===1?Mf(t):new xn(t,n,a,l??1)}function xn(t,n,a,l){this.r=+t,this.g=+n,this.b=+a,this.opacity=+l}rr(xn,Ue,Qr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fe$1:Math.pow(fe$1,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xn(te(this.r),te(this.g),te(this.b),Zi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yc,formatHex:Yc,formatHex8:Cm,formatRgb:Fc,toString:Fc}));function Yc(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Cm(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fc(){const t=Zi(this.opacity);return`${t===1?"rgb(":"rgba("}${te(this.r)}, ${te(this.g)}, ${te(this.b)}${t===1?")":`, ${t})`}`}function Zi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function te(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return t=te(t),(t<16?"0":"")+t.toString(16)}function qc(t,n,a,l){return l<=0?t=n=a=NaN:a<=0||a>=1?t=n=NaN:n<=0&&(t=NaN),new rt$1(t,n,a,l)}function Eh(t){if(t instanceof rt$1)return new rt$1(t.h,t.s,t.l,t.opacity);if(t instanceof Xt||(t=qt(t)),!t)return new rt$1;if(t instanceof rt$1)return t;t=t.rgb();var n=t.r/255,a=t.g/255,l=t.b/255,u=Math.min(n,a,l),c=Math.max(n,a,l),p=NaN,d=c-u,Q=(c+u)/2;return d?(n===c?p=(a-l)/d+(a<l)*6:a===c?p=(l-n)/d+2:p=(n-a)/d+4,d/=Q<.5?c+u:2-c-u,p*=60):d=Q>0&&Q<1?0:p,new rt$1(p,d,Q,t.opacity)}function Qi(t,n,a,l){return arguments.length===1?Eh(t):new rt$1(t,n,a,l??1)}function rt$1(t,n,a,l){this.h=+t,this.s=+n,this.l=+a,this.opacity=+l}rr(rt$1,Qi,Qr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe$1:Math.pow(fe$1,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,l=a+(a<.5?a:1-a)*n,u=2*a-l;return new xn(Ea(t>=240?t-240:t+120,u,l),Ea(t,u,l),Ea(t<120?t+240:t-120,u,l),this.opacity)},clamp(){return new rt$1(Lc(this.h),hi(this.s),hi(this.l),Zi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zi(this.opacity);return`${t===1?"hsl(":"hsla("}${Lc(this.h)}, ${hi(this.s)*100}%, ${hi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lc(t){return t=(t||0)%360,t<0?t+360:t}function hi(t){return Math.max(0,Math.min(1,t||0))}function Ea(t,n,a){return(t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n)*255}const kh=Math.PI/180,Nh=180/Math.PI,Ki=18,Rh=.96422,Ih=1,Ch=.82521,Ph=4/29,Oe=6/29,Dh=3*Oe*Oe,Pm=Oe*Oe*Oe;function zh(t){if(t instanceof at)return new at(t.l,t.a,t.b,t.opacity);if(t instanceof lt$1)return Yh(t);t instanceof xn||(t=Mf(t));var n=Ia(t.r),a=Ia(t.g),l=Ia(t.b),u=ka((.2225045*n+.7168786*a+.0606169*l)/Ih),c,p;return n===a&&a===l?c=p=u:(c=ka((.4360747*n+.3850649*a+.1430804*l)/Rh),p=ka((.0139322*n+.0971045*a+.7141733*l)/Ch)),new at(116*u-16,500*(c-u),200*(u-p),t.opacity)}function Dm(t,n){return new at(t,0,0,n??1)}function Ji(t,n,a,l){return arguments.length===1?zh(t):new at(t,n,a,l??1)}function at(t,n,a,l){this.l=+t,this.a=+n,this.b=+a,this.opacity=+l}rr(at,Ji,Qr(Xt,{brighter(t){return new at(this.l+Ki*(t??1),this.a,this.b,this.opacity)},darker(t){return new at(this.l-Ki*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,a=isNaN(this.b)?t:t-this.b/200;return n=Rh*Na(n),t=Ih*Na(t),a=Ch*Na(a),new xn(Ra(3.1338561*n-1.6168667*t-.4906146*a),Ra(-.9787684*n+1.9161415*t+.033454*a),Ra(.0719453*n-.2289914*t+1.4052427*a),this.opacity)}}));function ka(t){return t>Pm?Math.pow(t,1/3):t/Dh+Ph}function Na(t){return t>Oe?t*t*t:Dh*(t-Ph)}function Ra(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ia(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oh(t){if(t instanceof lt$1)return new lt$1(t.h,t.c,t.l,t.opacity);if(t instanceof at||(t=zh(t)),t.a===0&&t.b===0)return new lt$1(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Nh;return new lt$1(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zm(t,n,a,l){return arguments.length===1?Oh(t):new lt$1(a,n,t,l??1)}function no(t,n,a,l){return arguments.length===1?Oh(t):new lt$1(t,n,a,l??1)}function lt$1(t,n,a,l){this.h=+t,this.c=+n,this.l=+a,this.opacity=+l}function Yh(t){if(isNaN(t.h))return new at(t.l,0,0,t.opacity);var n=t.h*kh;return new at(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}rr(lt$1,no,Qr(Xt,{brighter(t){return new lt$1(this.h,this.c,this.l+Ki*(t??1),this.opacity)},darker(t){return new lt$1(this.h,this.c,this.l-Ki*(t??1),this.opacity)},rgb(){return Yh(this).rgb()}}));var Fh=-.14861,$f=1.78277,Tf=-.29227,Ho=-.90649,Yr=1.97294,Bc=Yr*Ho,Uc=Yr*$f,Xc=$f*Tf-Ho*Fh;function Om(t){if(t instanceof ee$1)return new ee$1(t.h,t.s,t.l,t.opacity);t instanceof xn||(t=Mf(t));var n=t.r/255,a=t.g/255,l=t.b/255,u=(Xc*l+Bc*n-Uc*a)/(Xc+Bc-Uc),c=l-u,p=(Yr*(a-u)-Tf*c)/Ho,d=Math.sqrt(p*p+c*c)/(Yr*u*(1-u)),Q=d?Math.atan2(p,c)*Nh-120:NaN;return new ee$1(Q<0?Q+360:Q,d,u,t.opacity)}function ut(t,n,a,l){return arguments.length===1?Om(t):new ee$1(t,n,a,l??1)}function ee$1(t,n,a,l){this.h=+t,this.s=+n,this.l=+a,this.opacity=+l}rr(ee$1,ut,Qr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new ee$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe$1:Math.pow(fe$1,t),new ee$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*kh,n=+this.l,a=isNaN(this.s)?0:this.s*n*(1-n),l=Math.cos(t),u=Math.sin(t);return new xn(255*(n+a*(Fh*l+$f*u)),255*(n+a*(Tf*l+Ho*u)),255*(n+a*(Yr*l)),this.opacity)}}));function qh(t,n,a,l,u){var c=t*t,p=c*t;return((1-3*t+3*c-p)*n+(4-6*c+3*p)*a+(1+3*t+3*c-3*p)*l+p*u)/6}function Lh(t){var n=t.length-1;return function(a){var l=a<=0?a=0:a>=1?(a=1,n-1):Math.floor(a*n),u=t[l],c=t[l+1],p=l>0?t[l-1]:2*u-c,d=l<n-1?t[l+2]:2*c-u;return qh((a-l/n)*n,p,u,c,d)}}function Bh(t){var n=t.length;return function(a){var l=Math.floor(((a%=1)<0?++a:a)*n),u=t[(l+n-1)%n],c=t[l%n],p=t[(l+1)%n],d=t[(l+2)%n];return qh((a-l/n)*n,u,c,p,d)}}const jo=t=>()=>t;function Uh(t,n){return function(a){return t+a*n}}function Ym(t,n,a){return t=Math.pow(t,a),n=Math.pow(n,a)-t,a=1/a,function(l){return Math.pow(t+l*n,a)}}function Wo(t,n){var a=n-t;return a?Uh(t,a>180||a<-180?a-360*Math.round(a/360):a):jo(isNaN(t)?n:t)}function Fm(t){return(t=+t)==1?Mn:function(n,a){return a-n?Ym(n,a,t):jo(isNaN(n)?a:n)}}function Mn(t,n){var a=n-t;return a?Uh(t,a):jo(isNaN(t)?n:t)}const Fr=function t(n){var a=Fm(n);function l(u,c){var p=a((u=Ue(u)).r,(c=Ue(c)).r),d=a(u.g,c.g),Q=a(u.b,c.b),Ct=Mn(u.opacity,c.opacity);return function(ar){return u.r=p(ar),u.g=d(ar),u.b=Q(ar),u.opacity=Ct(ar),u+""}}return l.gamma=t,l}(1);function Xh(t){return function(n){var a=n.length,l=new Array(a),u=new Array(a),c=new Array(a),p,d;for(p=0;p<a;++p)d=Ue(n[p]),l[p]=d.r||0,u[p]=d.g||0,c[p]=d.b||0;return l=t(l),u=t(u),c=t(c),d.opacity=1,function(Q){return d.r=l(Q),d.g=u(Q),d.b=c(Q),d+""}}}var Hh=Xh(Lh),qm=Xh(Bh);function Af(t,n){n||(n=[]);var a=t?Math.min(n.length,t.length):0,l=n.slice(),u;return function(c){for(u=0;u<a;++u)l[u]=t[u]*(1-c)+n[u]*c;return l}}function jh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lm(t,n){return(jh(n)?Af:Wh)(t,n)}function Wh(t,n){var a=n?n.length:0,l=t?Math.min(a,t.length):0,u=new Array(l),c=new Array(a),p;for(p=0;p<l;++p)u[p]=Ht(t[p],n[p]);for(;p<a;++p)c[p]=n[p];return function(d){for(p=0;p<l;++p)c[p]=u[p](d);return c}}function Vh(t,n){var a=new Date;return t=+t,n=+n,function(l){return a.setTime(t*(1-l)+n*l),a}}function Kn(t,n){return t=+t,n=+n,function(a){return t*(1-a)+n*a}}function Gh(t,n){var a={},l={},u;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(u in n)u in t?a[u]=Ht(t[u],n[u]):l[u]=n[u];return function(c){for(u in a)l[u]=a[u](c);return l}}var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ca=new RegExp(vu.source,"g");function Bm(t){return function(){return t}}function Um(t){return function(n){return t(n)+""}}function Sf(t,n){var a=vu.lastIndex=Ca.lastIndex=0,l,u,c,p=-1,d=[],Q=[];for(t=t+"",n=n+"";(l=vu.exec(t))&&(u=Ca.exec(n));)(c=u.index)>a&&(c=n.slice(a,c),d[p]?d[p]+=c:d[++p]=c),(l=l[0])===(u=u[0])?d[p]?d[p]+=u:d[++p]=u:(d[++p]=null,Q.push({i:p,x:Kn(l,u)})),a=Ca.lastIndex;return a<n.length&&(c=n.slice(a),d[p]?d[p]+=c:d[++p]=c),d.length<2?Q[0]?Um(Q[0].x):Bm(n):(n=Q.length,function(Ct){for(var ar=0,en;ar<n;++ar)d[(en=Q[ar]).i]=en.x(Ct);return d.join("")})}function Ht(t,n){var a=typeof n,l;return n==null||a==="boolean"?jo(n):(a==="number"?Kn:a==="string"?(l=qt(n))?(n=l,Fr):Sf:n instanceof qt?Fr:n instanceof Date?Vh:jh(n)?Af:Array.isArray(n)?Wh:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Gh:Kn)(t,n)}function Xm(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}function Hm(t,n){var a=Wo(+t,+n);return function(l){var u=a(l);return u-360*Math.floor(u/360)}}function Vo(t,n){return t=+t,n=+n,function(a){return Math.round(t*(1-a)+n*a)}}var Hc=180/Math.PI,bu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zh(t,n,a,l,u,c){var p,d,Q;return(p=Math.sqrt(t*t+n*n))&&(t/=p,n/=p),(Q=t*a+n*l)&&(a-=t*Q,l-=n*Q),(d=Math.sqrt(a*a+l*l))&&(a/=d,l/=d,Q/=d),t*l<n*a&&(t=-t,n=-n,Q=-Q,p=-p),{translateX:u,translateY:c,rotate:Math.atan2(n,t)*Hc,skewX:Math.atan(Q)*Hc,scaleX:p,scaleY:d}}var di;function jm(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?bu:Zh(n.a,n.b,n.c,n.d,n.e,n.f)}function Wm(t){return t==null||(di||(di=document.createElementNS("http://www.w3.org/2000/svg","g")),di.setAttribute("transform",t),!(t=di.transform.baseVal.consolidate()))?bu:(t=t.matrix,Zh(t.a,t.b,t.c,t.d,t.e,t.f))}function Qh(t,n,a,l){function u(Ct){return Ct.length?Ct.pop()+" ":""}function c(Ct,ar,en,tn,on,cn){if(Ct!==en||ar!==tn){var gn=on.push("translate(",null,n,null,a);cn.push({i:gn-4,x:Kn(Ct,en)},{i:gn-2,x:Kn(ar,tn)})}else(en||tn)&&on.push("translate("+en+n+tn+a)}function p(Ct,ar,en,tn){Ct!==ar?(Ct-ar>180?ar+=360:ar-Ct>180&&(Ct+=360),tn.push({i:en.push(u(en)+"rotate(",null,l)-2,x:Kn(Ct,ar)})):ar&&en.push(u(en)+"rotate("+ar+l)}function d(Ct,ar,en,tn){Ct!==ar?tn.push({i:en.push(u(en)+"skewX(",null,l)-2,x:Kn(Ct,ar)}):ar&&en.push(u(en)+"skewX("+ar+l)}function Q(Ct,ar,en,tn,on,cn){if(Ct!==en||ar!==tn){var gn=on.push(u(on)+"scale(",null,",",null,")");cn.push({i:gn-4,x:Kn(Ct,en)},{i:gn-2,x:Kn(ar,tn)})}else(en!==1||tn!==1)&&on.push(u(on)+"scale("+en+","+tn+")")}return function(Ct,ar){var en=[],tn=[];return Ct=t(Ct),ar=t(ar),c(Ct.translateX,Ct.translateY,ar.translateX,ar.translateY,en,tn),p(Ct.rotate,ar.rotate,en,tn),d(Ct.skewX,ar.skewX,en,tn),Q(Ct.scaleX,Ct.scaleY,ar.scaleX,ar.scaleY,en,tn),Ct=ar=null,function(on){for(var cn=-1,gn=tn.length,Cn;++cn<gn;)en[(Cn=tn[cn]).i]=Cn.x(on);return en.join("")}}}var Kh=Qh(jm,"px, ","px)","deg)"),Jh=Qh(Wm,", ",")",")"),Vm=1e-12;function jc(t){return((t=Math.exp(t))+1/t)/2}function Gm(t){return((t=Math.exp(t))-1/t)/2}function Zm(t){return((t=Math.exp(2*t))-1)/(t+1)}const n0=function t(n,a,l){function u(c,p){var d=c[0],Q=c[1],Ct=c[2],ar=p[0],en=p[1],tn=p[2],on=ar-d,cn=en-Q,gn=on*on+cn*cn,Cn,ex;if(gn<Vm)ex=Math.log(tn/Ct)/n,Cn=function(dx){return[d+dx*on,Q+dx*cn,Ct*Math.exp(n*dx*ex)]};else{var ix=Math.sqrt(gn),ax=(tn*tn-Ct*Ct+l*gn)/(2*Ct*a*ix),ox=(tn*tn-Ct*Ct-l*gn)/(2*tn*a*ix),lx=Math.log(Math.sqrt(ax*ax+1)-ax),cx=Math.log(Math.sqrt(ox*ox+1)-ox);ex=(cx-lx)/n,Cn=function(dx){var hx=dx*ex,fx=jc(lx),ux=Ct/(a*ix)*(fx*Zm(n*hx+lx)-Gm(lx));return[d+ux*on,Q+ux*cn,Ct*fx/jc(n*hx+lx)]}}return Cn.duration=ex*1e3*n/Math.SQRT2,Cn}return u.rho=function(c){var p=Math.max(.001,+c),d=p*p,Q=d*d;return t(p,d,Q)},u}(Math.SQRT2,2,4);function t0(t){return function(n,a){var l=t((n=Qi(n)).h,(a=Qi(a)).h),u=Mn(n.s,a.s),c=Mn(n.l,a.l),p=Mn(n.opacity,a.opacity);return function(d){return n.h=l(d),n.s=u(d),n.l=c(d),n.opacity=p(d),n+""}}}const Qm=t0(Wo);var Km=t0(Mn);function Jm(t,n){var a=Mn((t=Ji(t)).l,(n=Ji(n)).l),l=Mn(t.a,n.a),u=Mn(t.b,n.b),c=Mn(t.opacity,n.opacity);return function(p){return t.l=a(p),t.a=l(p),t.b=u(p),t.opacity=c(p),t+""}}function e0(t){return function(n,a){var l=t((n=no(n)).h,(a=no(a)).h),u=Mn(n.c,a.c),c=Mn(n.l,a.l),p=Mn(n.opacity,a.opacity);return function(d){return n.h=l(d),n.c=u(d),n.l=c(d),n.opacity=p(d),n+""}}}const ny=e0(Wo);var ty=e0(Mn);function r0(t){return function n(a){a=+a;function l(u,c){var p=t((u=ut(u)).h,(c=ut(c)).h),d=Mn(u.s,c.s),Q=Mn(u.l,c.l),Ct=Mn(u.opacity,c.opacity);return function(ar){return u.h=p(ar),u.s=d(ar),u.l=Q(Math.pow(ar,a)),u.opacity=Ct(ar),u+""}}return l.gamma=n,l}(1)}const ey=r0(Wo);var Go=r0(Mn);function i0(t,n){n===void 0&&(n=t,t=Ht);for(var a=0,l=n.length-1,u=n[0],c=new Array(l<0?0:l);a<l;)c[a]=t(u,u=n[++a]);return function(p){var d=Math.max(0,Math.min(l-1,Math.floor(p*=l)));return c[d](p-d)}}function ry(t,n){for(var a=new Array(n),l=0;l<n;++l)a[l]=t(l/(n-1));return a}var Xe=0,yr=0,fr=0,o0=1e3,to,_r,eo=0,ce$1=0,Zo=0,qr=typeof performance=="object"&&performance.now?performance:Date,a0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Kr(){return ce$1||(a0(iy),ce$1=qr.now()+Zo)}function iy(){ce$1=0}function Lr(){this._call=this._time=this._next=null}Lr.prototype=Qo.prototype={constructor:Lr,restart:function(t,n,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?Kr():+a)+(n==null?0:+n),!this._next&&_r!==this&&(_r?_r._next=this:to=this,_r=this),this._call=t,this._time=a,wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,wu())}};function Qo(t,n,a){var l=new Lr;return l.restart(t,n,a),l}function u0(){Kr(),++Xe;for(var t=to,n;t;)(n=ce$1-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Xe}function Wc(){ce$1=(eo=qr.now())+Zo,Xe=yr=0;try{u0()}finally{Xe=0,ay(),ce$1=0}}function oy(){var t=qr.now(),n=t-eo;n>o0&&(Zo-=n,eo=t)}function ay(){for(var t,n=to,a,l=1/0;n;)n._call?(l>n._time&&(l=n._time),t=n,n=n._next):(a=n._next,n._next=null,n=t?t._next=a:to=a);_r=t,wu(l)}function wu(t){if(!Xe){yr&&(yr=clearTimeout(yr));var n=t-ce$1;n>24?(t<1/0&&(yr=setTimeout(Wc,t-qr.now()-Zo)),fr&&(fr=clearInterval(fr))):(fr||(eo=qr.now(),fr=setInterval(oy,o0)),Xe=1,a0(Wc))}}function xu(t,n,a){var l=new Lr;return n=n==null?0:+n,l.restart(u=>{l.stop(),t(u+n)},n,a),l}function uy(t,n,a){var l=new Lr,u=n;return n==null?(l.restart(t,n,a),l):(l._restart=l.restart,l.restart=function(c,p,d){p=+p,d=d==null?Kr():+d,l._restart(function Q(Ct){Ct+=u,l._restart(Q,u+=p,d),c(Ct)},p,d)},l.restart(t,n,a),l)}var fy=pe$1("start","end","cancel","interrupt"),cy=[],f0=0,Mu=1,$u=2,zi=3,Vc=4,Tu=5,Oi=6;function Ko(t,n,a,l,u,c){var p=t.__transition;if(!p)t.__transition={};else if(a in p)return;sy(t,a,{name:n,index:l,group:u,on:fy,tween:cy,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:f0})}function Ef(t,n){var a=ft(t,n);if(a.state>f0)throw new Error("too late; already scheduled");return a}function _t(t,n){var a=ft(t,n);if(a.state>zi)throw new Error("too late; already running");return a}function ft(t,n){var a=t.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function sy(t,n,a){var l=t.__transition,u;l[n]=a,a.timer=Qo(c,0,a.time);function c(Ct){a.state=Mu,a.timer.restart(p,a.delay,a.time),a.delay<=Ct&&p(Ct-a.delay)}function p(Ct){var ar,en,tn,on;if(a.state!==Mu)return Q();for(ar in l)if(on=l[ar],on.name===a.name){if(on.state===zi)return xu(p);on.state===Vc?(on.state=Oi,on.timer.stop(),on.on.call("interrupt",t,t.__data__,on.index,on.group),delete l[ar]):+ar<n&&(on.state=Oi,on.timer.stop(),on.on.call("cancel",t,t.__data__,on.index,on.group),delete l[ar])}if(xu(function(){a.state===zi&&(a.state=Vc,a.timer.restart(d,a.delay,a.time),d(Ct))}),a.state=$u,a.on.call("start",t,t.__data__,a.index,a.group),a.state===$u){for(a.state=zi,u=new Array(tn=a.tween.length),ar=0,en=-1;ar<tn;++ar)(on=a.tween[ar].value.call(t,t.__data__,a.index,a.group))&&(u[++en]=on);u.length=en+1}}function d(Ct){for(var ar=Ct<a.duration?a.ease.call(null,Ct/a.duration):(a.timer.restart(Q),a.state=Tu,1),en=-1,tn=u.length;++en<tn;)u[en].call(t,ar);a.state===Tu&&(a.on.call("end",t,t.__data__,a.index,a.group),Q())}function Q(){a.state=Oi,a.timer.stop(),delete l[n];for(var Ct in l)return;delete t.__transition}}function re$1(t,n){var a=t.__transition,l,u,c=!0,p;if(a){n=n==null?null:n+"";for(p in a){if((l=a[p]).name!==n){c=!1;continue}u=l.state>$u&&l.state<Tu,l.state=Oi,l.timer.stop(),l.on.call(u?"interrupt":"cancel",t,t.__data__,l.index,l.group),delete a[p]}c&&delete t.__transition}}function ly(t){return this.each(function(){re$1(this,t)})}function hy(t,n){var a,l;return function(){var u=_t(this,t),c=u.tween;if(c!==a){l=a=c;for(var p=0,d=l.length;p<d;++p)if(l[p].name===n){l=l.slice(),l.splice(p,1);break}}u.tween=l}}function dy(t,n,a){var l,u;if(typeof a!="function")throw new Error;return function(){var c=_t(this,t),p=c.tween;if(p!==l){u=(l=p).slice();for(var d={name:n,value:a},Q=0,Ct=u.length;Q<Ct;++Q)if(u[Q].name===n){u[Q]=d;break}Q===Ct&&u.push(d)}c.tween=u}}function gy(t,n){var a=this._id;if(t+="",arguments.length<2){for(var l=ft(this.node(),a).tween,u=0,c=l.length,p;u<c;++u)if((p=l[u]).name===t)return p.value;return null}return this.each((n==null?hy:dy)(a,t,n))}function kf(t,n,a){var l=t._id;return t.each(function(){var u=_t(this,l);(u.value||(u.value={}))[n]=a.apply(this,arguments)}),function(u){return ft(u,l).value[n]}}function c0(t,n){var a;return(typeof n=="number"?Kn:n instanceof qt?Fr:(a=qt(n))?(n=a,Fr):Sf)(t,n)}function py(t){return function(){this.removeAttribute(t)}}function my(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yy(t,n,a){var l,u=a+"",c;return function(){var p=this.getAttribute(t);return p===u?null:p===l?c:c=n(l=p,a)}}function _y(t,n,a){var l,u=a+"",c;return function(){var p=this.getAttributeNS(t.space,t.local);return p===u?null:p===l?c:c=n(l=p,a)}}function vy(t,n,a){var l,u,c;return function(){var p,d=a(this),Q;return d==null?void this.removeAttribute(t):(p=this.getAttribute(t),Q=d+"",p===Q?null:p===l&&Q===u?c:(u=Q,c=n(l=p,d)))}}function by(t,n,a){var l,u,c;return function(){var p,d=a(this),Q;return d==null?void this.removeAttributeNS(t.space,t.local):(p=this.getAttributeNS(t.space,t.local),Q=d+"",p===Q?null:p===l&&Q===u?c:(u=Q,c=n(l=p,d)))}}function wy(t,n){var a=Zr(t),l=a==="transform"?Jh:c0;return this.attrTween(t,typeof n=="function"?(a.local?by:vy)(a,l,kf(this,"attr."+t,n)):n==null?(a.local?my:py)(a):(a.local?_y:yy)(a,l,n))}function xy(t,n){return function(a){this.setAttribute(t,n.call(this,a))}}function My(t,n){return function(a){this.setAttributeNS(t.space,t.local,n.call(this,a))}}function $y(t,n){var a,l;function u(){var c=n.apply(this,arguments);return c!==l&&(a=(l=c)&&My(t,c)),a}return u._value=n,u}function Ty(t,n){var a,l;function u(){var c=n.apply(this,arguments);return c!==l&&(a=(l=c)&&xy(t,c)),a}return u._value=n,u}function Ay(t,n){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var l=Zr(t);return this.tween(a,(l.local?$y:Ty)(l,n))}function Sy(t,n){return function(){Ef(this,t).delay=+n.apply(this,arguments)}}function Ey(t,n){return n=+n,function(){Ef(this,t).delay=n}}function ky(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Sy:Ey)(n,t)):ft(this.node(),n).delay}function Ny(t,n){return function(){_t(this,t).duration=+n.apply(this,arguments)}}function Ry(t,n){return n=+n,function(){_t(this,t).duration=n}}function Iy(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ny:Ry)(n,t)):ft(this.node(),n).duration}function Cy(t,n){if(typeof n!="function")throw new Error;return function(){_t(this,t).ease=n}}function Py(t){var n=this._id;return arguments.length?this.each(Cy(n,t)):ft(this.node(),n).ease}function Dy(t,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;_t(this,t).ease=a}}function zy(t){if(typeof t!="function")throw new Error;return this.each(Dy(this._id,t))}function Oy(t){typeof t!="function"&&(t=vf(t));for(var n=this._groups,a=n.length,l=new Array(a),u=0;u<a;++u)for(var c=n[u],p=c.length,d=l[u]=[],Q,Ct=0;Ct<p;++Ct)(Q=c[Ct])&&t.call(Q,Q.__data__,Ct,c)&&d.push(Q);return new gt(l,this._parents,this._name,this._id)}function Yy(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,a=t._groups,l=n.length,u=a.length,c=Math.min(l,u),p=new Array(l),d=0;d<c;++d)for(var Q=n[d],Ct=a[d],ar=Q.length,en=p[d]=new Array(ar),tn,on=0;on<ar;++on)(tn=Q[on]||Ct[on])&&(en[on]=tn);for(;d<l;++d)p[d]=n[d];return new gt(p,this._parents,this._name,this._id)}function Fy(t){return(t+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function qy(t,n,a){var l,u,c=Fy(n)?Ef:_t;return function(){var p=c(this,t),d=p.on;d!==l&&(u=(l=d).copy()).on(n,a),p.on=u}}function Ly(t,n){var a=this._id;return arguments.length<2?ft(this.node(),a).on.on(t):this.each(qy(a,t,n))}function By(t){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==t)return;n&&n.removeChild(this)}}function Uy(){return this.on("end.remove",By(this._id))}function Xy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=Bo(t));for(var l=this._groups,u=l.length,c=new Array(u),p=0;p<u;++p)for(var d=l[p],Q=d.length,Ct=c[p]=new Array(Q),ar,en,tn=0;tn<Q;++tn)(ar=d[tn])&&(en=t.call(ar,ar.__data__,tn,d))&&("__data__"in ar&&(en.__data__=ar.__data__),Ct[tn]=en,Ko(Ct[tn],n,a,tn,Ct,ft(ar,a)));return new gt(c,this._parents,n,a)}function Hy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=_f(t));for(var l=this._groups,u=l.length,c=[],p=[],d=0;d<u;++d)for(var Q=l[d],Ct=Q.length,ar,en=0;en<Ct;++en)if(ar=Q[en]){for(var tn=t.call(ar,ar.__data__,en,Q),on,cn=ft(ar,a),gn=0,Cn=tn.length;gn<Cn;++gn)(on=tn[gn])&&Ko(on,n,a,gn,tn,cn);c.push(tn),p.push(ar)}return new gt(c,p,n,a)}var jy=me$1.prototype.constructor;function Wy(){return new jy(this._groups,this._parents)}function Vy(t,n){var a,l,u;return function(){var c=ue$1(this,t),p=(this.style.removeProperty(t),ue$1(this,t));return c===p?null:c===a&&p===l?u:u=n(a=c,l=p)}}function s0(t){return function(){this.style.removeProperty(t)}}function Gy(t,n,a){var l,u=a+"",c;return function(){var p=ue$1(this,t);return p===u?null:p===l?c:c=n(l=p,a)}}function Zy(t,n,a){var l,u,c;return function(){var p=ue$1(this,t),d=a(this),Q=d+"";return d==null&&(Q=d=(this.style.removeProperty(t),ue$1(this,t))),p===Q?null:p===l&&Q===u?c:(u=Q,c=n(l=p,d))}}function Qy(t,n){var a,l,u,c="style."+n,p="end."+c,d;return function(){var Q=_t(this,t),Ct=Q.on,ar=Q.value[c]==null?d||(d=s0(n)):void 0;(Ct!==a||u!==ar)&&(l=(a=Ct).copy()).on(p,u=ar),Q.on=l}}function Ky(t,n,a){var l=(t+="")=="transform"?Kh:c0;return n==null?this.styleTween(t,Vy(t,l)).on("end.style."+t,s0(t)):typeof n=="function"?this.styleTween(t,Zy(t,l,kf(this,"style."+t,n))).each(Qy(this._id,t)):this.styleTween(t,Gy(t,l,n),a).on("end.style."+t,null)}function Jy(t,n,a){return function(l){this.style.setProperty(t,n.call(this,l),a)}}function n_(t,n,a){var l,u;function c(){var p=n.apply(this,arguments);return p!==u&&(l=(u=p)&&Jy(t,p,a)),l}return c._value=n,c}function t_(t,n,a){var l="style."+(t+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;return this.tween(l,n_(t,n,a??""))}function e_(t){return function(){this.textContent=t}}function r_(t){return function(){var n=t(this);this.textContent=n??""}}function i_(t){return this.tween("text",typeof t=="function"?r_(kf(this,"text",t)):e_(t==null?"":t+""))}function o_(t){return function(n){this.textContent=t.call(this,n)}}function a_(t){var n,a;function l(){var u=t.apply(this,arguments);return u!==a&&(n=(a=u)&&o_(u)),n}return l._value=t,l}function u_(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,a_(t))}function f_(){for(var t=this._name,n=this._id,a=h0(),l=this._groups,u=l.length,c=0;c<u;++c)for(var p=l[c],d=p.length,Q,Ct=0;Ct<d;++Ct)if(Q=p[Ct]){var ar=ft(Q,n);Ko(Q,t,a,Ct,p,{time:ar.time+ar.delay+ar.duration,delay:0,duration:ar.duration,ease:ar.ease})}return new gt(l,this._parents,t,a)}function c_(){var t,n,a=this,l=a._id,u=a.size();return new Promise(function(c,p){var d={value:p},Q={value:function(){--u===0&&c()}};a.each(function(){var Ct=_t(this,l),ar=Ct.on;ar!==t&&(n=(t=ar).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(Q)),Ct.on=n}),u===0&&c()})}var s_=0;function gt(t,n,a,l){this._groups=t,this._parents=n,this._name=a,this._id=l}function l0(t){return me$1().transition(t)}function h0(){return++s_}var bt=me$1.prototype;gt.prototype=l0.prototype={constructor:gt,select:Xy,selectAll:Hy,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Oy,merge:Yy,selection:Wy,transition:f_,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Ly,attr:wy,attrTween:Ay,style:Ky,styleTween:t_,text:i_,textTween:u_,remove:Uy,tween:gy,delay:ky,duration:Iy,ease:Py,easeVarying:zy,end:c_,[Symbol.iterator]:bt[Symbol.iterator]};const l_=t=>+t;function h_(t){return t*t}function d_(t){return t*(2-t)}function Gc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function g_(t){return t*t*t}function p_(t){return--t*t*t+1}function Au(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Nf=3,m_=function t(n){n=+n;function a(l){return Math.pow(l,n)}return a.exponent=t,a}(Nf),y_=function t(n){n=+n;function a(l){return 1-Math.pow(1-l,n)}return a.exponent=t,a}(Nf),Zc=function t(n){n=+n;function a(l){return((l*=2)<=1?Math.pow(l,n):2-Math.pow(2-l,n))/2}return a.exponent=t,a}(Nf),d0=Math.PI,g0=d0/2;function __(t){return+t==1?1:1-Math.cos(t*g0)}function v_(t){return Math.sin(t*g0)}function Qc(t){return(1-Math.cos(d0*t))/2}function Lt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function b_(t){return Lt(1-+t)}function w_(t){return 1-Lt(t)}function Kc(t){return((t*=2)<=1?Lt(1-t):2-Lt(t-1))/2}function x_(t){return 1-Math.sqrt(1-t*t)}function M_(t){return Math.sqrt(1- --t*t)}function Jc(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Su=4/11,$_=6/11,T_=8/11,A_=3/4,S_=9/11,E_=10/11,k_=15/16,N_=21/22,R_=63/64,gi=1/Su/Su;function I_(t){return 1-Br(1-t)}function Br(t){return(t=+t)<Su?gi*t*t:t<T_?gi*(t-=$_)*t+A_:t<E_?gi*(t-=S_)*t+k_:gi*(t-=N_)*t+R_}function C_(t){return((t*=2)<=1?1-Br(1-t):Br(t-1)+1)/2}var Rf=1.70158,P_=function t(n){n=+n;function a(l){return(l=+l)*l*(n*(l-1)+l)}return a.overshoot=t,a}(Rf),D_=function t(n){n=+n;function a(l){return--l*l*((l+1)*n+l)+1}return a.overshoot=t,a}(Rf),ns=function t(n){n=+n;function a(l){return((l*=2)<1?l*l*((n+1)*l-n):(l-=2)*l*((n+1)*l+n)+2)/2}return a.overshoot=t,a}(Rf),He=2*Math.PI,If=1,Cf=.3,z_=function t(n,a){var l=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function u(c){return n*Lt(- --c)*Math.sin((l-c)/a)}return u.amplitude=function(c){return t(c,a*He)},u.period=function(c){return t(n,c)},u}(If,Cf),ts=function t(n,a){var l=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function u(c){return 1-n*Lt(c=+c)*Math.sin((c+l)/a)}return u.amplitude=function(c){return t(c,a*He)},u.period=function(c){return t(n,c)},u}(If,Cf),O_=function t(n,a){var l=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function u(c){return((c=c*2-1)<0?n*Lt(-c)*Math.sin((l-c)/a):2-n*Lt(c)*Math.sin((l+c)/a))/2}return u.amplitude=function(c){return t(c,a*He)},u.period=function(c){return t(n,c)},u}(If,Cf),Y_={time:null,delay:0,duration:250,ease:Au};function F_(t,n){for(var a;!(a=t.__transition)||!(a=a[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return a}function q_(t){var n,a;t instanceof gt?(n=t._id,t=t._name):(n=h0(),(a=Y_).time=Kr(),t=t==null?null:t+"");for(var l=this._groups,u=l.length,c=0;c<u;++c)for(var p=l[c],d=p.length,Q,Ct=0;Ct<d;++Ct)(Q=p[Ct])&&Ko(Q,t,n,Ct,p,a||F_(Q,n));return new gt(l,this._parents,t,n)}me$1.prototype.interrupt=ly;me$1.prototype.transition=q_;var L_=[null];function B_(t,n){var a=t.__transition,l,u;if(a){n=n==null?null:n+"";for(u in a)if((l=a[u]).state>Mu&&l.name===n)return new gt([[t]],L_,n,+u)}return null}const Pa=t=>()=>t;function U_(t,{sourceEvent:n,target:a,selection:l,mode:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:l,enumerable:!0,configurable:!0},mode:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function X_(t){t.stopImmediatePropagation()}function Da(t){t.preventDefault(),t.stopImmediatePropagation()}var es={name:"drag"},za={name:"space"},Me={name:"handle"},$e={name:"center"};const{abs:rs,max:Sn,min:En}=Math;function is(t){return[+t[0],+t[1]]}function Eu(t){return[is(t[0]),is(t[1])]}var Yi={name:"x",handles:["w","e"].map(Ur),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Fi={name:"y",handles:["n","s"].map(Ur),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},H_={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ur),input:function(t){return t==null?null:Eu(t)},output:function(t){return t}},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},os={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},as={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},j_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},W_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ur(t){return{type:t}}function V_(t){return!t.ctrlKey&&!t.button}function G_(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Z_(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Q_(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function K_(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function J_(){return Pf(Yi)}function nv(){return Pf(Fi)}function tv(){return Pf(H_)}function Pf(t){var n=G_,a=V_,l=Z_,u=!0,c=pe$1("start","brush","end"),p=6,d;function Q(Cn){var ex=Cn.property("__brush",gn).selectAll(".overlay").data([Ur("overlay")]);ex.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(ex).each(function(){var ax=Oa(this).extent;X$1(this).attr("x",ax[0][0]).attr("y",ax[0][1]).attr("width",ax[1][0]-ax[0][0]).attr("height",ax[1][1]-ax[0][1])}),Cn.selectAll(".selection").data([Ur("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ix=Cn.selectAll(".handle").data(t.handles,function(ax){return ax.type});ix.exit().remove(),ix.enter().append("rect").attr("class",function(ax){return"handle handle--"+ax.type}).attr("cursor",function(ax){return wt[ax.type]}),Cn.each(Ct).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",tn).filter(l).on("touchstart.brush",tn).on("touchmove.brush",on).on("touchend.brush touchcancel.brush",cn).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Q.move=function(Cn,ex,ix){Cn.tween?Cn.on("start.brush",function(ax){ar(this,arguments).beforestart().start(ax)}).on("interrupt.brush end.brush",function(ax){ar(this,arguments).end(ax)}).tween("brush",function(){var ax=this,ox=ax.__brush,lx=ar(ax,arguments),cx=ox.selection,dx=t.input(typeof ex=="function"?ex.apply(this,arguments):ex,ox.extent),hx=Ht(cx,dx);function fx(ux){ox.selection=ux===1&&dx===null?null:hx(ux),Ct.call(ax),lx.brush()}return cx!==null&&dx!==null?fx:fx(1)}):Cn.each(function(){var ax=this,ox=arguments,lx=ax.__brush,cx=t.input(typeof ex=="function"?ex.apply(ax,ox):ex,lx.extent),dx=ar(ax,ox).beforestart();re$1(ax),lx.selection=cx===null?null:cx,Ct.call(ax),dx.start(ix).brush(ix).end(ix)})},Q.clear=function(Cn,ex){Q.move(Cn,null,ex)};function Ct(){var Cn=X$1(this),ex=Oa(this).selection;ex?(Cn.selectAll(".selection").style("display",null).attr("x",ex[0][0]).attr("y",ex[0][1]).attr("width",ex[1][0]-ex[0][0]).attr("height",ex[1][1]-ex[0][1]),Cn.selectAll(".handle").style("display",null).attr("x",function(ix){return ix.type[ix.type.length-1]==="e"?ex[1][0]-p/2:ex[0][0]-p/2}).attr("y",function(ix){return ix.type[0]==="s"?ex[1][1]-p/2:ex[0][1]-p/2}).attr("width",function(ix){return ix.type==="n"||ix.type==="s"?ex[1][0]-ex[0][0]+p:p}).attr("height",function(ix){return ix.type==="e"||ix.type==="w"?ex[1][1]-ex[0][1]+p:p})):Cn.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function ar(Cn,ex,ix){var ax=Cn.__brush.emitter;return ax&&(!ix||!ax.clean)?ax:new en(Cn,ex,ix)}function en(Cn,ex,ix){this.that=Cn,this.args=ex,this.state=Cn.__brush,this.active=0,this.clean=ix}en.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(Cn,ex){return this.starting?(this.starting=!1,this.emit("start",Cn,ex)):this.emit("brush",Cn),this},brush:function(Cn,ex){return this.emit("brush",Cn,ex),this},end:function(Cn,ex){return--this.active===0&&(delete this.state.emitter,this.emit("end",Cn,ex)),this},emit:function(Cn,ex,ix){var ax=X$1(this.that).datum();c.call(Cn,this.that,new U_(Cn,{sourceEvent:ex,target:Q,selection:t.output(this.state.selection),mode:ix,dispatch:c}),ax)}};function tn(Cn){if(d&&!Cn.touches||!a.apply(this,arguments))return;var ex=this,ix=Cn.target.__data__.type,ax=(u&&Cn.metaKey?ix="overlay":ix)==="selection"?es:u&&Cn.altKey?$e:Me,ox=t===Fi?null:j_[ix],lx=t===Yi?null:W_[ix],cx=Oa(ex),dx=cx.extent,hx=cx.selection,fx=dx[0][0],ux,gx,yx=dx[0][1],_x,vx,bx=dx[1][0],xx,Sx,Ax=dx[1][1],Cx,Tx,Px=0,Fx=0,Mx,Dx=ox&&lx&&u&&Cn.shiftKey,Ox,Lx,Nx=Array.from(Cn.touches||[Cn],iE=>{const Wx=iE.identifier;return iE=wn(iE,ex),iE.point0=iE.slice(),iE.identifier=Wx,iE});re$1(ex);var Gx=ar(ex,arguments,!0).beforestart();if(ix==="overlay"){hx&&(Mx=!0);const iE=[Nx[0],Nx[1]||Nx[0]];cx.selection=hx=[[ux=t===Fi?fx:En(iE[0][0],iE[1][0]),_x=t===Yi?yx:En(iE[0][1],iE[1][1])],[xx=t===Fi?bx:Sn(iE[0][0],iE[1][0]),Cx=t===Yi?Ax:Sn(iE[0][1],iE[1][1])]],Nx.length>1&&rE(Cn)}else ux=hx[0][0],_x=hx[0][1],xx=hx[1][0],Cx=hx[1][1];gx=ux,vx=_x,Sx=xx,Tx=Cx;var Ux=X$1(ex).attr("pointer-events","none"),Hx=Ux.selectAll(".overlay").attr("cursor",wt[ix]);if(Cn.touches)Gx.moved=zx,Gx.ended=Zx;else{var Vx=X$1(Cn.view).on("mousemove.brush",zx,!0).on("mouseup.brush",Zx,!0);u&&Vx.on("keydown.brush",eE,!0).on("keyup.brush",oE,!0),Uo(Cn.view)}Ct.call(ex),Gx.start(Cn,ax.name);function zx(iE){for(const Wx of iE.changedTouches||[iE])for(const AE of Nx)AE.identifier===Wx.identifier&&(AE.cur=wn(Wx,ex));if(Dx&&!Ox&&!Lx&&Nx.length===1){const Wx=Nx[0];rs(Wx.cur[0]-Wx[0])>rs(Wx.cur[1]-Wx[1])?Lx=!0:Ox=!0}for(const Wx of Nx)Wx.cur&&(Wx[0]=Wx.cur[0],Wx[1]=Wx.cur[1]);Mx=!0,Da(iE),rE(iE)}function rE(iE){const Wx=Nx[0],AE=Wx.point0;var ME;switch(Px=Wx[0]-AE[0],Fx=Wx[1]-AE[1],ax){case za:case es:{ox&&(Px=Sn(fx-ux,En(bx-xx,Px)),gx=ux+Px,Sx=xx+Px),lx&&(Fx=Sn(yx-_x,En(Ax-Cx,Fx)),vx=_x+Fx,Tx=Cx+Fx);break}case Me:{Nx[1]?(ox&&(gx=Sn(fx,En(bx,Nx[0][0])),Sx=Sn(fx,En(bx,Nx[1][0])),ox=1),lx&&(vx=Sn(yx,En(Ax,Nx[0][1])),Tx=Sn(yx,En(Ax,Nx[1][1])),lx=1)):(ox<0?(Px=Sn(fx-ux,En(bx-ux,Px)),gx=ux+Px,Sx=xx):ox>0&&(Px=Sn(fx-xx,En(bx-xx,Px)),gx=ux,Sx=xx+Px),lx<0?(Fx=Sn(yx-_x,En(Ax-_x,Fx)),vx=_x+Fx,Tx=Cx):lx>0&&(Fx=Sn(yx-Cx,En(Ax-Cx,Fx)),vx=_x,Tx=Cx+Fx));break}case $e:{ox&&(gx=Sn(fx,En(bx,ux-Px*ox)),Sx=Sn(fx,En(bx,xx+Px*ox))),lx&&(vx=Sn(yx,En(Ax,_x-Fx*lx)),Tx=Sn(yx,En(Ax,Cx+Fx*lx)));break}}Sx<gx&&(ox*=-1,ME=ux,ux=xx,xx=ME,ME=gx,gx=Sx,Sx=ME,ix in os&&Hx.attr("cursor",wt[ix=os[ix]])),Tx<vx&&(lx*=-1,ME=_x,_x=Cx,Cx=ME,ME=vx,vx=Tx,Tx=ME,ix in as&&Hx.attr("cursor",wt[ix=as[ix]])),cx.selection&&(hx=cx.selection),Ox&&(gx=hx[0][0],Sx=hx[1][0]),Lx&&(vx=hx[0][1],Tx=hx[1][1]),(hx[0][0]!==gx||hx[0][1]!==vx||hx[1][0]!==Sx||hx[1][1]!==Tx)&&(cx.selection=[[gx,vx],[Sx,Tx]],Ct.call(ex),Gx.brush(iE,ax.name))}function Zx(iE){if(X_(iE),iE.touches){if(iE.touches.length)return;d&&clearTimeout(d),d=setTimeout(function(){d=null},500)}else Xo(iE.view,Mx),Vx.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ux.attr("pointer-events","all"),Hx.attr("cursor",wt.overlay),cx.selection&&(hx=cx.selection),Q_(hx)&&(cx.selection=null,Ct.call(ex)),Gx.end(iE,ax.name)}function eE(iE){switch(iE.keyCode){case 16:{Dx=ox&&lx;break}case 18:{ax===Me&&(ox&&(xx=Sx-Px*ox,ux=gx+Px*ox),lx&&(Cx=Tx-Fx*lx,_x=vx+Fx*lx),ax=$e,rE(iE));break}case 32:{(ax===Me||ax===$e)&&(ox<0?xx=Sx-Px:ox>0&&(ux=gx-Px),lx<0?Cx=Tx-Fx:lx>0&&(_x=vx-Fx),ax=za,Hx.attr("cursor",wt.selection),rE(iE));break}default:return}Da(iE)}function oE(iE){switch(iE.keyCode){case 16:{Dx&&(Ox=Lx=Dx=!1,rE(iE));break}case 18:{ax===$e&&(ox<0?xx=Sx:ox>0&&(ux=gx),lx<0?Cx=Tx:lx>0&&(_x=vx),ax=Me,rE(iE));break}case 32:{ax===za&&(iE.altKey?(ox&&(xx=Sx-Px*ox,ux=gx+Px*ox),lx&&(Cx=Tx-Fx*lx,_x=vx+Fx*lx),ax=$e):(ox<0?xx=Sx:ox>0&&(ux=gx),lx<0?Cx=Tx:lx>0&&(_x=vx),ax=Me),Hx.attr("cursor",wt[ix]),rE(iE));break}default:return}Da(iE)}}function on(Cn){ar(this,arguments).moved(Cn)}function cn(Cn){ar(this,arguments).ended(Cn)}function gn(){var Cn=this.__brush||{selection:null};return Cn.extent=Eu(n.apply(this,arguments)),Cn.dim=t,Cn}return Q.extent=function(Cn){return arguments.length?(n=typeof Cn=="function"?Cn:Pa(Eu(Cn)),Q):n},Q.filter=function(Cn){return arguments.length?(a=typeof Cn=="function"?Cn:Pa(!!Cn),Q):a},Q.touchable=function(Cn){return arguments.length?(l=typeof Cn=="function"?Cn:Pa(!!Cn),Q):l},Q.handleSize=function(Cn){return arguments.length?(p=+Cn,Q):p},Q.keyModifiers=function(Cn){return arguments.length?(u=!!Cn,Q):u},Q.on=function(){var Cn=c.on.apply(c,arguments);return Cn===c?Q:Cn},Q}var us=Math.abs,Te=Math.cos,Ae=Math.sin,p0=Math.PI,pi=p0/2,fs$1=p0*2,cs=Math.max,Ya=1e-12;function Fa(t,n){return Array.from({length:n-t},(a,l)=>t+l)}function ev(t){return function(n,a){return t(n.source.value+n.target.value,a.source.value+a.target.value)}}function rv(){return Df(!1,!1)}function iv(){return Df(!1,!0)}function ov(){return Df(!0,!1)}function Df(t,n){var a=0,l=null,u=null,c=null;function p(d){var Q=d.length,Ct=new Array(Q),ar=Fa(0,Q),en=new Array(Q*Q),tn=new Array(Q),on=0,cn;d=Float64Array.from({length:Q*Q},n?(gn,Cn)=>d[Cn%Q][Cn/Q|0]:(gn,Cn)=>d[Cn/Q|0][Cn%Q]);for(let gn=0;gn<Q;++gn){let Cn=0;for(let ex=0;ex<Q;++ex)Cn+=d[gn*Q+ex]+t*d[ex*Q+gn];on+=Ct[gn]=Cn}on=cs(0,fs$1-a*Q)/on,cn=on?a:fs$1/Q;{let gn=0;l&&ar.sort((Cn,ex)=>l(Ct[Cn],Ct[ex]));for(const Cn of ar){const ex=gn;if(t){const ix=Fa(~Q+1,Q).filter(ax=>ax<0?d[~ax*Q+Cn]:d[Cn*Q+ax]);u&&ix.sort((ax,ox)=>u(ax<0?-d[~ax*Q+Cn]:d[Cn*Q+ax],ox<0?-d[~ox*Q+Cn]:d[Cn*Q+ox]));for(const ax of ix)if(ax<0){const ox=en[~ax*Q+Cn]||(en[~ax*Q+Cn]={source:null,target:null});ox.target={index:Cn,startAngle:gn,endAngle:gn+=d[~ax*Q+Cn]*on,value:d[~ax*Q+Cn]}}else{const ox=en[Cn*Q+ax]||(en[Cn*Q+ax]={source:null,target:null});ox.source={index:Cn,startAngle:gn,endAngle:gn+=d[Cn*Q+ax]*on,value:d[Cn*Q+ax]}}tn[Cn]={index:Cn,startAngle:ex,endAngle:gn,value:Ct[Cn]}}else{const ix=Fa(0,Q).filter(ax=>d[Cn*Q+ax]||d[ax*Q+Cn]);u&&ix.sort((ax,ox)=>u(d[Cn*Q+ax],d[Cn*Q+ox]));for(const ax of ix){let ox;if(Cn<ax?(ox=en[Cn*Q+ax]||(en[Cn*Q+ax]={source:null,target:null}),ox.source={index:Cn,startAngle:gn,endAngle:gn+=d[Cn*Q+ax]*on,value:d[Cn*Q+ax]}):(ox=en[ax*Q+Cn]||(en[ax*Q+Cn]={source:null,target:null}),ox.target={index:Cn,startAngle:gn,endAngle:gn+=d[Cn*Q+ax]*on,value:d[Cn*Q+ax]},Cn===ax&&(ox.source=ox.target)),ox.source&&ox.target&&ox.source.value<ox.target.value){const lx=ox.source;ox.source=ox.target,ox.target=lx}}tn[Cn]={index:Cn,startAngle:ex,endAngle:gn,value:Ct[Cn]}}gn+=cn}}return en=Object.values(en),en.groups=tn,c?en.sort(c):en}return p.padAngle=function(d){return arguments.length?(a=cs(0,d),p):a},p.sortGroups=function(d){return arguments.length?(l=d,p):l},p.sortSubgroups=function(d){return arguments.length?(u=d,p):u},p.sortChords=function(d){return arguments.length?(d==null?c=null:(c=ev(d))._=d,p):c&&c._},p}const ku=Math.PI,Nu=2*ku,Zt=1e-6,av=Nu-Zt;function m0(t){this._+=t[0];for(let n=1,a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function uv(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return m0;const a=10**n;return function(l){this._+=l[0];for(let u=1,c=l.length;u<c;++u)this._+=Math.round(arguments[u]*a)/a+l[u]}}let Jr=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m0:uv(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,l){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,n,a,l,u,c){this._append`C${+t},${+n},${+a},${+l},${this._x1=+u},${this._y1=+c}`}arcTo(t,n,a,l,u){if(t=+t,n=+n,a=+a,l=+l,u=+u,u<0)throw new Error(`negative radius: ${u}`);let c=this._x1,p=this._y1,d=a-t,Q=l-n,Ct=c-t,ar=p-n,en=Ct*Ct+ar*ar;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(en>Zt)if(!(Math.abs(ar*d-Q*Ct)>Zt)||!u)this._append`L${this._x1=t},${this._y1=n}`;else{let tn=a-c,on=l-p,cn=d*d+Q*Q,gn=tn*tn+on*on,Cn=Math.sqrt(cn),ex=Math.sqrt(en),ix=u*Math.tan((ku-Math.acos((cn+en-gn)/(2*Cn*ex)))/2),ax=ix/ex,ox=ix/Cn;Math.abs(ax-1)>Zt&&this._append`L${t+ax*Ct},${n+ax*ar}`,this._append`A${u},${u},0,0,${+(ar*tn>Ct*on)},${this._x1=t+ox*d},${this._y1=n+ox*Q}`}}arc(t,n,a,l,u,c){if(t=+t,n=+n,a=+a,c=!!c,a<0)throw new Error(`negative radius: ${a}`);let p=a*Math.cos(l),d=a*Math.sin(l),Q=t+p,Ct=n+d,ar=1^c,en=c?l-u:u-l;this._x1===null?this._append`M${Q},${Ct}`:(Math.abs(this._x1-Q)>Zt||Math.abs(this._y1-Ct)>Zt)&&this._append`L${Q},${Ct}`,a&&(en<0&&(en=en%Nu+Nu),en>av?this._append`A${a},${a},0,1,${ar},${t-p},${n-d}A${a},${a},0,1,${ar},${this._x1=Q},${this._y1=Ct}`:en>Zt&&this._append`A${a},${a},0,${+(en>=ku)},${ar},${this._x1=t+a*Math.cos(u)},${this._y1=n+a*Math.sin(u)}`)}rect(t,n,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}};function Jo(){return new Jr}Jo.prototype=Jr.prototype;function fv(t=3){return new Jr(+t)}var cv=Array.prototype.slice;function Vt(t){return function(){return t}}function sv(t){return t.source}function lv(t){return t.target}function ss(t){return t.radius}function hv(t){return t.startAngle}function dv(t){return t.endAngle}function gv(){return 0}function pv(){return 10}function y0(t){var n=sv,a=lv,l=ss,u=ss,c=hv,p=dv,d=gv,Q=null;function Ct(){var ar,en=n.apply(this,arguments),tn=a.apply(this,arguments),on=d.apply(this,arguments)/2,cn=cv.call(arguments),gn=+l.apply(this,(cn[0]=en,cn)),Cn=c.apply(this,cn)-pi,ex=p.apply(this,cn)-pi,ix=+u.apply(this,(cn[0]=tn,cn)),ax=c.apply(this,cn)-pi,ox=p.apply(this,cn)-pi;if(Q||(Q=ar=Jo()),on>Ya&&(us(ex-Cn)>on*2+Ya?ex>Cn?(Cn+=on,ex-=on):(Cn-=on,ex+=on):Cn=ex=(Cn+ex)/2,us(ox-ax)>on*2+Ya?ox>ax?(ax+=on,ox-=on):(ax-=on,ox+=on):ax=ox=(ax+ox)/2),Q.moveTo(gn*Te(Cn),gn*Ae(Cn)),Q.arc(0,0,gn,Cn,ex),Cn!==ax||ex!==ox)if(t){var lx=+t.apply(this,arguments),cx=ix-lx,dx=(ax+ox)/2;Q.quadraticCurveTo(0,0,cx*Te(ax),cx*Ae(ax)),Q.lineTo(ix*Te(dx),ix*Ae(dx)),Q.lineTo(cx*Te(ox),cx*Ae(ox))}else Q.quadraticCurveTo(0,0,ix*Te(ax),ix*Ae(ax)),Q.arc(0,0,ix,ax,ox);if(Q.quadraticCurveTo(0,0,gn*Te(Cn),gn*Ae(Cn)),Q.closePath(),ar)return Q=null,ar+""||null}return t&&(Ct.headRadius=function(ar){return arguments.length?(t=typeof ar=="function"?ar:Vt(+ar),Ct):t}),Ct.radius=function(ar){return arguments.length?(l=u=typeof ar=="function"?ar:Vt(+ar),Ct):l},Ct.sourceRadius=function(ar){return arguments.length?(l=typeof ar=="function"?ar:Vt(+ar),Ct):l},Ct.targetRadius=function(ar){return arguments.length?(u=typeof ar=="function"?ar:Vt(+ar),Ct):u},Ct.startAngle=function(ar){return arguments.length?(c=typeof ar=="function"?ar:Vt(+ar),Ct):c},Ct.endAngle=function(ar){return arguments.length?(p=typeof ar=="function"?ar:Vt(+ar),Ct):p},Ct.padAngle=function(ar){return arguments.length?(d=typeof ar=="function"?ar:Vt(+ar),Ct):d},Ct.source=function(ar){return arguments.length?(n=ar,Ct):n},Ct.target=function(ar){return arguments.length?(a=ar,Ct):a},Ct.context=function(ar){return arguments.length?(Q=ar??null,Ct):Q},Ct}function mv(){return y0()}function yv(){return y0(pv)}var _v=Array.prototype,_0=_v.slice;function vv(t,n){return t-n}function bv(t){for(var n=0,a=t.length,l=t[a-1][1]*t[0][0]-t[a-1][0]*t[0][1];++n<a;)l+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return l}const Pt=t=>()=>t;function wv(t,n){for(var a=-1,l=n.length,u;++a<l;)if(u=xv(t,n[a]))return u;return 0}function xv(t,n){for(var a=n[0],l=n[1],u=-1,c=0,p=t.length,d=p-1;c<p;d=c++){var Q=t[c],Ct=Q[0],ar=Q[1],en=t[d],tn=en[0],on=en[1];if(Mv(Q,en,n))return 0;ar>l!=on>l&&a<(tn-Ct)*(l-ar)/(on-ar)+Ct&&(u=-u)}return u}function Mv(t,n,a){var l;return $v(t,n,a)&&Tv(t[l=+(t[0]===n[0])],a[l],n[l])}function $v(t,n,a){return(n[0]-t[0])*(a[1]-t[1])===(a[0]-t[0])*(n[1]-t[1])}function Tv(t,n,a){return t<=n&&n<=a||a<=n&&n<=t}function Av(){}var xt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ru(){var t=1,n=1,a=gf,l=Q;function u(Ct){var ar=a(Ct);if(Array.isArray(ar))ar=ar.slice().sort(vv);else{const en=Sr(Ct,Sv);for(ar=oe$1(...df(en[0],en[1],ar),ar);ar[ar.length-1]>=en[1];)ar.pop();for(;ar[1]<en[0];)ar.shift()}return ar.map(en=>c(Ct,en))}function c(Ct,ar){const en=ar==null?NaN:+ar;if(isNaN(en))throw new Error(`invalid value: ${ar}`);var tn=[],on=[];return p(Ct,en,function(cn){l(cn,Ct,en),bv(cn)>0?tn.push([cn]):on.push(cn)}),on.forEach(function(cn){for(var gn=0,Cn=tn.length,ex;gn<Cn;++gn)if(wv((ex=tn[gn])[0],cn)!==-1){ex.push(cn);return}}),{type:"MultiPolygon",value:ar,coordinates:tn}}function p(Ct,ar,en){var tn=new Array,on=new Array,cn,gn,Cn,ex,ix,ax;for(cn=gn=-1,ex=Gt(Ct[0],ar),xt[ex<<1].forEach(ox);++cn<t-1;)Cn=ex,ex=Gt(Ct[cn+1],ar),xt[Cn|ex<<1].forEach(ox);for(xt[ex<<0].forEach(ox);++gn<n-1;){for(cn=-1,ex=Gt(Ct[gn*t+t],ar),ix=Gt(Ct[gn*t],ar),xt[ex<<1|ix<<2].forEach(ox);++cn<t-1;)Cn=ex,ex=Gt(Ct[gn*t+t+cn+1],ar),ax=ix,ix=Gt(Ct[gn*t+cn+1],ar),xt[Cn|ex<<1|ix<<2|ax<<3].forEach(ox);xt[ex|ix<<3].forEach(ox)}for(cn=-1,ix=Ct[gn*t]>=ar,xt[ix<<2].forEach(ox);++cn<t-1;)ax=ix,ix=Gt(Ct[gn*t+cn+1],ar),xt[ix<<2|ax<<3].forEach(ox);xt[ix<<3].forEach(ox);function ox(lx){var cx=[lx[0][0]+cn,lx[0][1]+gn],dx=[lx[1][0]+cn,lx[1][1]+gn],hx=d(cx),fx=d(dx),ux,gx;(ux=on[hx])?(gx=tn[fx])?(delete on[ux.end],delete tn[gx.start],ux===gx?(ux.ring.push(dx),en(ux.ring)):tn[ux.start]=on[gx.end]={start:ux.start,end:gx.end,ring:ux.ring.concat(gx.ring)}):(delete on[ux.end],ux.ring.push(dx),on[ux.end=fx]=ux):(ux=tn[fx])?(gx=on[hx])?(delete tn[ux.start],delete on[gx.end],ux===gx?(ux.ring.push(dx),en(ux.ring)):tn[gx.start]=on[ux.end]={start:gx.start,end:ux.end,ring:gx.ring.concat(ux.ring)}):(delete tn[ux.start],ux.ring.unshift(cx),tn[ux.start=hx]=ux):tn[hx]=on[fx]={start:hx,end:fx,ring:[cx,dx]}}}function d(Ct){return Ct[0]*2+Ct[1]*(t+1)*4}function Q(Ct,ar,en){Ct.forEach(function(tn){var on=tn[0],cn=tn[1],gn=on|0,Cn=cn|0,ex=qa(ar[Cn*t+gn]);on>0&&on<t&&gn===on&&(tn[0]=ls(on,qa(ar[Cn*t+gn-1]),ex,en)),cn>0&&cn<n&&Cn===cn&&(tn[1]=ls(cn,qa(ar[(Cn-1)*t+gn]),ex,en))})}return u.contour=c,u.size=function(Ct){if(!arguments.length)return[t,n];var ar=Math.floor(Ct[0]),en=Math.floor(Ct[1]);if(!(ar>=0&&en>=0))throw new Error("invalid size");return t=ar,n=en,u},u.thresholds=function(Ct){return arguments.length?(a=typeof Ct=="function"?Ct:Array.isArray(Ct)?Pt(_0.call(Ct)):Pt(Ct),u):a},u.smooth=function(Ct){return arguments.length?(l=Ct?Q:Av,u):l===Q},u}function Sv(t){return isFinite(t)?t:NaN}function Gt(t,n){return t==null?!1:+t>=n}function qa(t){return t==null||isNaN(t=+t)?-1/0:t}function ls(t,n,a,l){const u=l-n,c=a-n,p=isFinite(u)||isFinite(c)?u/c:Math.sign(u)/Math.sign(c);return isNaN(p)?t:t+p-.5}function Ev(t){return t[0]}function kv(t){return t[1]}function Nv(){return 1}function Rv(){var t=Ev,n=kv,a=Nv,l=960,u=500,c=20,p=2,d=c*3,Q=l+d*2>>p,Ct=u+d*2>>p,ar=Pt(20);function en(ix){var ax=new Float32Array(Q*Ct),ox=Math.pow(2,-p),lx=-1;for(const _x of ix){var cx=(t(_x,++lx,ix)+d)*ox,dx=(n(_x,lx,ix)+d)*ox,hx=+a(_x,lx,ix);if(hx&&cx>=0&&cx<Q&&dx>=0&&dx<Ct){var fx=Math.floor(cx),ux=Math.floor(dx),gx=cx-fx-.5,yx=dx-ux-.5;ax[fx+ux*Q]+=(1-gx)*(1-yx)*hx,ax[fx+1+ux*Q]+=gx*(1-yx)*hx,ax[fx+1+(ux+1)*Q]+=gx*yx*hx,ax[fx+(ux+1)*Q]+=(1-gx)*yx*hx}}return Zl({data:ax,width:Q,height:Ct},c*ox),ax}function tn(ix){var ax=en(ix),ox=ar(ax),lx=Math.pow(2,2*p);return Array.isArray(ox)||(ox=oe$1(Number.MIN_VALUE,Pr(ax)/lx,ox)),Ru().size([Q,Ct]).thresholds(ox.map(cx=>cx*lx))(ax).map((cx,dx)=>(cx.value=+ox[dx],on(cx)))}tn.contours=function(ix){var ax=en(ix),ox=Ru().size([Q,Ct]),lx=Math.pow(2,2*p),cx=dx=>{dx=+dx;var hx=on(ox.contour(ax,dx*lx));return hx.value=dx,hx};return Object.defineProperty(cx,"max",{get:()=>Pr(ax)/lx}),cx};function on(ix){return ix.coordinates.forEach(cn),ix}function cn(ix){ix.forEach(gn)}function gn(ix){ix.forEach(Cn)}function Cn(ix){ix[0]=ix[0]*Math.pow(2,p)-d,ix[1]=ix[1]*Math.pow(2,p)-d}function ex(){return d=c*3,Q=l+d*2>>p,Ct=u+d*2>>p,tn}return tn.x=function(ix){return arguments.length?(t=typeof ix=="function"?ix:Pt(+ix),tn):t},tn.y=function(ix){return arguments.length?(n=typeof ix=="function"?ix:Pt(+ix),tn):n},tn.weight=function(ix){return arguments.length?(a=typeof ix=="function"?ix:Pt(+ix),tn):a},tn.size=function(ix){if(!arguments.length)return[l,u];var ax=+ix[0],ox=+ix[1];if(!(ax>=0&&ox>=0))throw new Error("invalid size");return l=ax,u=ox,ex()},tn.cellSize=function(ix){if(!arguments.length)return 1<<p;if(!((ix=+ix)>=1))throw new Error("invalid cell size");return p=Math.floor(Math.log(ix)/Math.LN2),ex()},tn.thresholds=function(ix){return arguments.length?(ar=typeof ix=="function"?ix:Array.isArray(ix)?Pt(_0.call(ix)):Pt(ix),tn):ar},tn.bandwidth=function(ix){if(!arguments.length)return Math.sqrt(c*(c+1));if(!((ix=+ix)>=0))throw new Error("invalid bandwidth");return c=(Math.sqrt(4*ix*ix+1)-1)/2,ex()},tn}const kt=11102230246251565e-32,kn=134217729,Iv=(3+8*kt)*kt;function La(t,n,a,l,u){let c,p,d,Q,Ct=n[0],ar=l[0],en=0,tn=0;ar>Ct==ar>-Ct?(c=Ct,Ct=n[++en]):(c=ar,ar=l[++tn]);let on=0;if(en<t&&tn<a)for(ar>Ct==ar>-Ct?(p=Ct+c,d=c-(p-Ct),Ct=n[++en]):(p=ar+c,d=c-(p-ar),ar=l[++tn]),c=p,d!==0&&(u[on++]=d);en<t&&tn<a;)ar>Ct==ar>-Ct?(p=c+Ct,Q=p-c,d=c-(p-Q)+(Ct-Q),Ct=n[++en]):(p=c+ar,Q=p-c,d=c-(p-Q)+(ar-Q),ar=l[++tn]),c=p,d!==0&&(u[on++]=d);for(;en<t;)p=c+Ct,Q=p-c,d=c-(p-Q)+(Ct-Q),Ct=n[++en],c=p,d!==0&&(u[on++]=d);for(;tn<a;)p=c+ar,Q=p-c,d=c-(p-Q)+(ar-Q),ar=l[++tn],c=p,d!==0&&(u[on++]=d);return(c!==0||on===0)&&(u[on++]=c),on}function Cv(t,n){let a=n[0];for(let l=1;l<t;l++)a+=n[l];return a}function ni(t){return new Float64Array(t)}const Pv=(3+16*kt)*kt,Dv=(2+12*kt)*kt,zv=(9+64*kt)*kt*kt,Se$1=ni(4),hs=ni(8),ds=ni(12),gs=ni(16),Pn=ni(4);function Ov(t,n,a,l,u,c,p){let d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx;const fx=t-u,ux=a-u,gx=n-c,yx=l-c;ox=fx*yx,tn=kn*fx,on=tn-(tn-fx),cn=fx-on,tn=kn*yx,gn=tn-(tn-yx),Cn=yx-gn,lx=cn*Cn-(ox-on*gn-cn*gn-on*Cn),cx=gx*ux,tn=kn*gx,on=tn-(tn-gx),cn=gx-on,tn=kn*ux,gn=tn-(tn-ux),Cn=ux-gn,dx=cn*Cn-(cx-on*gn-cn*gn-on*Cn),ex=lx-dx,en=lx-ex,Se$1[0]=lx-(ex+en)+(en-dx),ix=ox+ex,en=ix-ox,ax=ox-(ix-en)+(ex-en),ex=ax-cx,en=ax-ex,Se$1[1]=ax-(ex+en)+(en-cx),hx=ix+ex,en=hx-ix,Se$1[2]=ix-(hx-en)+(ex-en),Se$1[3]=hx;let _x=Cv(4,Se$1),vx=Dv*p;if(_x>=vx||-_x>=vx||(en=t-fx,d=t-(fx+en)+(en-u),en=a-ux,Ct=a-(ux+en)+(en-u),en=n-gx,Q=n-(gx+en)+(en-c),en=l-yx,ar=l-(yx+en)+(en-c),d===0&&Q===0&&Ct===0&&ar===0)||(vx=zv*p+Iv*Math.abs(_x),_x+=fx*ar+yx*d-(gx*Ct+ux*Q),_x>=vx||-_x>=vx))return _x;ox=d*yx,tn=kn*d,on=tn-(tn-d),cn=d-on,tn=kn*yx,gn=tn-(tn-yx),Cn=yx-gn,lx=cn*Cn-(ox-on*gn-cn*gn-on*Cn),cx=Q*ux,tn=kn*Q,on=tn-(tn-Q),cn=Q-on,tn=kn*ux,gn=tn-(tn-ux),Cn=ux-gn,dx=cn*Cn-(cx-on*gn-cn*gn-on*Cn),ex=lx-dx,en=lx-ex,Pn[0]=lx-(ex+en)+(en-dx),ix=ox+ex,en=ix-ox,ax=ox-(ix-en)+(ex-en),ex=ax-cx,en=ax-ex,Pn[1]=ax-(ex+en)+(en-cx),hx=ix+ex,en=hx-ix,Pn[2]=ix-(hx-en)+(ex-en),Pn[3]=hx;const bx=La(4,Se$1,4,Pn,hs);ox=fx*ar,tn=kn*fx,on=tn-(tn-fx),cn=fx-on,tn=kn*ar,gn=tn-(tn-ar),Cn=ar-gn,lx=cn*Cn-(ox-on*gn-cn*gn-on*Cn),cx=gx*Ct,tn=kn*gx,on=tn-(tn-gx),cn=gx-on,tn=kn*Ct,gn=tn-(tn-Ct),Cn=Ct-gn,dx=cn*Cn-(cx-on*gn-cn*gn-on*Cn),ex=lx-dx,en=lx-ex,Pn[0]=lx-(ex+en)+(en-dx),ix=ox+ex,en=ix-ox,ax=ox-(ix-en)+(ex-en),ex=ax-cx,en=ax-ex,Pn[1]=ax-(ex+en)+(en-cx),hx=ix+ex,en=hx-ix,Pn[2]=ix-(hx-en)+(ex-en),Pn[3]=hx;const xx=La(bx,hs,4,Pn,ds);ox=d*ar,tn=kn*d,on=tn-(tn-d),cn=d-on,tn=kn*ar,gn=tn-(tn-ar),Cn=ar-gn,lx=cn*Cn-(ox-on*gn-cn*gn-on*Cn),cx=Q*Ct,tn=kn*Q,on=tn-(tn-Q),cn=Q-on,tn=kn*Ct,gn=tn-(tn-Ct),Cn=Ct-gn,dx=cn*Cn-(cx-on*gn-cn*gn-on*Cn),ex=lx-dx,en=lx-ex,Pn[0]=lx-(ex+en)+(en-dx),ix=ox+ex,en=ix-ox,ax=ox-(ix-en)+(ex-en),ex=ax-cx,en=ax-ex,Pn[1]=ax-(ex+en)+(en-cx),hx=ix+ex,en=hx-ix,Pn[2]=ix-(hx-en)+(ex-en),Pn[3]=hx;const Sx=La(xx,ds,4,Pn,gs);return gs[Sx-1]}function mi(t,n,a,l,u,c){const p=(n-c)*(a-u),d=(t-u)*(l-c),Q=p-d,Ct=Math.abs(p+d);return Math.abs(Q)>=Pv*Ct?Q:-Ov(t,n,a,l,u,c,Ct)}const ps=Math.pow(2,-52),yi=new Uint32Array(512);class ro{static from(n,a=Bv,l=Uv){const u=n.length,c=new Float64Array(u*2);for(let p=0;p<u;p++){const d=n[p];c[2*p]=a(d),c[2*p+1]=l(d)}return new ro(c)}constructor(n){const a=n.length>>1;if(a>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const l=Math.max(2*a-5,0);this._triangles=new Uint32Array(l*3),this._halfedges=new Int32Array(l*3),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:n,_hullPrev:a,_hullNext:l,_hullTri:u,_hullHash:c}=this,p=n.length>>1;let d=1/0,Q=1/0,Ct=-1/0,ar=-1/0;for(let fx=0;fx<p;fx++){const ux=n[2*fx],gx=n[2*fx+1];ux<d&&(d=ux),gx<Q&&(Q=gx),ux>Ct&&(Ct=ux),gx>ar&&(ar=gx),this._ids[fx]=fx}const en=(d+Ct)/2,tn=(Q+ar)/2;let on,cn,gn;for(let fx=0,ux=1/0;fx<p;fx++){const gx=Ba(en,tn,n[2*fx],n[2*fx+1]);gx<ux&&(on=fx,ux=gx)}const Cn=n[2*on],ex=n[2*on+1];for(let fx=0,ux=1/0;fx<p;fx++){if(fx===on)continue;const gx=Ba(Cn,ex,n[2*fx],n[2*fx+1]);gx<ux&&gx>0&&(cn=fx,ux=gx)}let ix=n[2*cn],ax=n[2*cn+1],ox=1/0;for(let fx=0;fx<p;fx++){if(fx===on||fx===cn)continue;const ux=qv(Cn,ex,ix,ax,n[2*fx],n[2*fx+1]);ux<ox&&(gn=fx,ox=ux)}let lx=n[2*gn],cx=n[2*gn+1];if(ox===1/0){for(let gx=0;gx<p;gx++)this._dists[gx]=n[2*gx]-n[0]||n[2*gx+1]-n[1];Ie(this._ids,this._dists,0,p-1);const fx=new Uint32Array(p);let ux=0;for(let gx=0,yx=-1/0;gx<p;gx++){const _x=this._ids[gx],vx=this._dists[_x];vx>yx&&(fx[ux++]=_x,yx=vx)}this.hull=fx.subarray(0,ux),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mi(Cn,ex,ix,ax,lx,cx)<0){const fx=cn,ux=ix,gx=ax;cn=gn,ix=lx,ax=cx,gn=fx,lx=ux,cx=gx}const dx=Lv(Cn,ex,ix,ax,lx,cx);this._cx=dx.x,this._cy=dx.y;for(let fx=0;fx<p;fx++)this._dists[fx]=Ba(n[2*fx],n[2*fx+1],dx.x,dx.y);Ie(this._ids,this._dists,0,p-1),this._hullStart=on;let hx=3;l[on]=a[gn]=cn,l[cn]=a[on]=gn,l[gn]=a[cn]=on,u[on]=0,u[cn]=1,u[gn]=2,c.fill(-1),c[this._hashKey(Cn,ex)]=on,c[this._hashKey(ix,ax)]=cn,c[this._hashKey(lx,cx)]=gn,this.trianglesLen=0,this._addTriangle(on,cn,gn,-1,-1,-1);for(let fx=0,ux,gx;fx<this._ids.length;fx++){const yx=this._ids[fx],_x=n[2*yx],vx=n[2*yx+1];if(fx>0&&Math.abs(_x-ux)<=ps&&Math.abs(vx-gx)<=ps||(ux=_x,gx=vx,yx===on||yx===cn||yx===gn))continue;let bx=0;for(let Tx=0,Px=this._hashKey(_x,vx);Tx<this._hashSize&&(bx=c[(Px+Tx)%this._hashSize],!(bx!==-1&&bx!==l[bx]));Tx++);bx=a[bx];let xx=bx,Sx;for(;Sx=l[xx],mi(_x,vx,n[2*xx],n[2*xx+1],n[2*Sx],n[2*Sx+1])>=0;)if(xx=Sx,xx===bx){xx=-1;break}if(xx===-1)continue;let Ax=this._addTriangle(xx,yx,l[xx],-1,-1,u[xx]);u[yx]=this._legalize(Ax+2),u[xx]=Ax,hx++;let Cx=l[xx];for(;Sx=l[Cx],mi(_x,vx,n[2*Cx],n[2*Cx+1],n[2*Sx],n[2*Sx+1])<0;)Ax=this._addTriangle(Cx,yx,Sx,u[yx],-1,u[Cx]),u[yx]=this._legalize(Ax+2),l[Cx]=Cx,hx--,Cx=Sx;if(xx===bx)for(;Sx=a[xx],mi(_x,vx,n[2*Sx],n[2*Sx+1],n[2*xx],n[2*xx+1])<0;)Ax=this._addTriangle(Sx,yx,xx,-1,u[xx],u[Sx]),this._legalize(Ax+2),u[Sx]=Ax,l[xx]=xx,hx--,xx=Sx;this._hullStart=a[yx]=xx,l[xx]=a[Cx]=yx,l[yx]=Cx,c[this._hashKey(_x,vx)]=yx,c[this._hashKey(n[2*xx],n[2*xx+1])]=xx}this.hull=new Uint32Array(hx);for(let fx=0,ux=this._hullStart;fx<hx;fx++)this.hull[fx]=ux,ux=l[ux];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,a){return Math.floor(Yv(n-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:a,_halfedges:l,coords:u}=this;let c=0,p=0;for(;;){const d=l[n],Q=n-n%3;if(p=Q+(n+2)%3,d===-1){if(c===0)break;n=yi[--c];continue}const Ct=d-d%3,ar=Q+(n+1)%3,en=Ct+(d+2)%3,tn=a[p],on=a[n],cn=a[ar],gn=a[en];if(Fv(u[2*tn],u[2*tn+1],u[2*on],u[2*on+1],u[2*cn],u[2*cn+1],u[2*gn],u[2*gn+1])){a[n]=gn,a[d]=tn;const Cn=l[en];if(Cn===-1){let ix=this._hullStart;do{if(this._hullTri[ix]===en){this._hullTri[ix]=n;break}ix=this._hullPrev[ix]}while(ix!==this._hullStart)}this._link(n,Cn),this._link(d,l[p]),this._link(p,en);const ex=Ct+(d+1)%3;c<yi.length&&(yi[c++]=ex)}else{if(c===0)break;n=yi[--c]}}return p}_link(n,a){this._halfedges[n]=a,a!==-1&&(this._halfedges[a]=n)}_addTriangle(n,a,l,u,c,p){const d=this.trianglesLen;return this._triangles[d]=n,this._triangles[d+1]=a,this._triangles[d+2]=l,this._link(d,u),this._link(d+1,c),this._link(d+2,p),this.trianglesLen+=3,d}}function Yv(t,n){const a=t/(Math.abs(t)+Math.abs(n));return(n>0?3-a:1+a)/4}function Ba(t,n,a,l){const u=t-a,c=n-l;return u*u+c*c}function Fv(t,n,a,l,u,c,p,d){const Q=t-p,Ct=n-d,ar=a-p,en=l-d,tn=u-p,on=c-d,cn=Q*Q+Ct*Ct,gn=ar*ar+en*en,Cn=tn*tn+on*on;return Q*(en*Cn-gn*on)-Ct*(ar*Cn-gn*tn)+cn*(ar*on-en*tn)<0}function qv(t,n,a,l,u,c){const p=a-t,d=l-n,Q=u-t,Ct=c-n,ar=p*p+d*d,en=Q*Q+Ct*Ct,tn=.5/(p*Ct-d*Q),on=(Ct*ar-d*en)*tn,cn=(p*en-Q*ar)*tn;return on*on+cn*cn}function Lv(t,n,a,l,u,c){const p=a-t,d=l-n,Q=u-t,Ct=c-n,ar=p*p+d*d,en=Q*Q+Ct*Ct,tn=.5/(p*Ct-d*Q),on=t+(Ct*ar-d*en)*tn,cn=n+(p*en-Q*ar)*tn;return{x:on,y:cn}}function Ie(t,n,a,l){if(l-a<=20)for(let u=a+1;u<=l;u++){const c=t[u],p=n[c];let d=u-1;for(;d>=a&&n[t[d]]>p;)t[d+1]=t[d--];t[d+1]=c}else{const u=a+l>>1;let c=a+1,p=l;cr(t,u,c),n[t[a]]>n[t[l]]&&cr(t,a,l),n[t[c]]>n[t[l]]&&cr(t,c,l),n[t[a]]>n[t[c]]&&cr(t,a,c);const d=t[c],Q=n[d];for(;;){do c++;while(n[t[c]]<Q);do p--;while(n[t[p]]>Q);if(p<c)break;cr(t,c,p)}t[a+1]=t[p],t[p]=d,l-c+1>=p-a?(Ie(t,n,c,l),Ie(t,n,a,p-1)):(Ie(t,n,a,p-1),Ie(t,n,c,l))}}function cr(t,n,a){const l=t[n];t[n]=t[a],t[a]=l}function Bv(t){return t[0]}function Uv(t){return t[1]}const ms=1e-6;let ne$1=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,a){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,a){this._+=`L${this._x1=+n},${this._y1=+a}`}arc(n,a,l){n=+n,a=+a,l=+l;const u=n+l,c=a;if(l<0)throw new Error("negative radius");this._x1===null?this._+=`M${u},${c}`:(Math.abs(this._x1-u)>ms||Math.abs(this._y1-c)>ms)&&(this._+="L"+u+","+c),l&&(this._+=`A${l},${l},0,1,1,${n-l},${a}A${l},${l},0,1,1,${this._x1=u},${this._y1=c}`)}rect(n,a,l,u){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${+l}v${+u}h${-l}Z`}value(){return this._||null}};class Iu{constructor(){this._=[]}moveTo(n,a){this._.push([n,a])}closePath(){this._.push(this._[0].slice())}lineTo(n,a){this._.push([n,a])}value(){return this._.length?this._:null}}class v0{constructor(n,[a,l,u,c]=[0,0,960,500]){if(!((u=+u)>=(a=+a))||!((c=+c)>=(l=+l)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=u,this.xmin=a,this.ymax=c,this.ymin=l,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:a,triangles:l},vectors:u}=this;let c,p;const d=this.circumcenters=this._circumcenters.subarray(0,l.length/3*2);for(let gn=0,Cn=0,ex=l.length,ix,ax;gn<ex;gn+=3,Cn+=2){const ox=l[gn]*2,lx=l[gn+1]*2,cx=l[gn+2]*2,dx=n[ox],hx=n[ox+1],fx=n[lx],ux=n[lx+1],gx=n[cx],yx=n[cx+1],_x=fx-dx,vx=ux-hx,bx=gx-dx,xx=yx-hx,Sx=(_x*xx-vx*bx)*2;if(Math.abs(Sx)<1e-9){if(c===void 0){c=p=0;for(const Cx of a)c+=n[Cx*2],p+=n[Cx*2+1];c/=a.length,p/=a.length}const Ax=1e9*Math.sign((c-dx)*xx-(p-hx)*bx);ix=(dx+gx)/2-Ax*xx,ax=(hx+yx)/2+Ax*bx}else{const Ax=1/Sx,Cx=_x*_x+vx*vx,Tx=bx*bx+xx*xx;ix=dx+(xx*Cx-vx*Tx)*Ax,ax=hx+(_x*Tx-bx*Cx)*Ax}d[Cn]=ix,d[Cn+1]=ax}let Q=a[a.length-1],Ct,ar=Q*4,en,tn=n[2*Q],on,cn=n[2*Q+1];u.fill(0);for(let gn=0;gn<a.length;++gn)Q=a[gn],Ct=ar,en=tn,on=cn,ar=Q*4,tn=n[2*Q],cn=n[2*Q+1],u[Ct+2]=u[ar]=on-cn,u[Ct+3]=u[ar+1]=tn-en}render(n){const a=n==null?n=new ne$1:void 0,{delaunay:{halfedges:l,inedges:u,hull:c},circumcenters:p,vectors:d}=this;if(c.length<=1)return null;for(let ar=0,en=l.length;ar<en;++ar){const tn=l[ar];if(tn<ar)continue;const on=Math.floor(ar/3)*2,cn=Math.floor(tn/3)*2,gn=p[on],Cn=p[on+1],ex=p[cn],ix=p[cn+1];this._renderSegment(gn,Cn,ex,ix,n)}let Q,Ct=c[c.length-1];for(let ar=0;ar<c.length;++ar){Q=Ct,Ct=c[ar];const en=Math.floor(u[Ct]/3)*2,tn=p[en],on=p[en+1],cn=Q*4,gn=this._project(tn,on,d[cn+2],d[cn+3]);gn&&this._renderSegment(tn,on,gn[0],gn[1],n)}return a&&a.value()}renderBounds(n){const a=n==null?n=new ne$1:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(n,a){const l=a==null?a=new ne$1:void 0,u=this._clip(n);if(u===null||!u.length)return;a.moveTo(u[0],u[1]);let c=u.length;for(;u[0]===u[c-2]&&u[1]===u[c-1]&&c>1;)c-=2;for(let p=2;p<c;p+=2)(u[p]!==u[p-2]||u[p+1]!==u[p-1])&&a.lineTo(u[p],u[p+1]);return a.closePath(),l&&l.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let a=0,l=n.length/2;a<l;++a){const u=this.cellPolygon(a);u&&(u.index=a,yield u)}}cellPolygon(n){const a=new Iu;return this.renderCell(n,a),a.value()}_renderSegment(n,a,l,u,c){let p;const d=this._regioncode(n,a),Q=this._regioncode(l,u);d===0&&Q===0?(c.moveTo(n,a),c.lineTo(l,u)):(p=this._clipSegment(n,a,l,u,d,Q))&&(c.moveTo(p[0],p[1]),c.lineTo(p[2],p[3]))}contains(n,a,l){return a=+a,a!==a||(l=+l,l!==l)?!1:this.delaunay._step(n,a,l)===n}*neighbors(n){const a=this._clip(n);if(a)for(const l of this.delaunay.neighbors(n)){const u=this._clip(l);if(u){e:for(let c=0,p=a.length;c<p;c+=2)for(let d=0,Q=u.length;d<Q;d+=2)if(a[c]===u[d]&&a[c+1]===u[d+1]&&a[(c+2)%p]===u[(d+Q-2)%Q]&&a[(c+3)%p]===u[(d+Q-1)%Q]){yield l;break e}}}}_cell(n){const{circumcenters:a,delaunay:{inedges:l,halfedges:u,triangles:c}}=this,p=l[n];if(p===-1)return null;const d=[];let Q=p;do{const Ct=Math.floor(Q/3);if(d.push(a[Ct*2],a[Ct*2+1]),Q=Q%3===2?Q-2:Q+1,c[Q]!==n)break;Q=u[Q]}while(Q!==p&&Q!==-1);return d}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(n);if(a===null)return null;const{vectors:l}=this,u=n*4;return this._simplify(l[u]||l[u+1]?this._clipInfinite(n,a,l[u],l[u+1],l[u+2],l[u+3]):this._clipFinite(n,a))}_clipFinite(n,a){const l=a.length;let u=null,c,p,d=a[l-2],Q=a[l-1],Ct,ar=this._regioncode(d,Q),en,tn=0;for(let on=0;on<l;on+=2)if(c=d,p=Q,d=a[on],Q=a[on+1],Ct=ar,ar=this._regioncode(d,Q),Ct===0&&ar===0)en=tn,tn=0,u?u.push(d,Q):u=[d,Q];else{let cn,gn,Cn,ex,ix;if(Ct===0){if((cn=this._clipSegment(c,p,d,Q,Ct,ar))===null)continue;[gn,Cn,ex,ix]=cn}else{if((cn=this._clipSegment(d,Q,c,p,ar,Ct))===null)continue;[ex,ix,gn,Cn]=cn,en=tn,tn=this._edgecode(gn,Cn),en&&tn&&this._edge(n,en,tn,u,u.length),u?u.push(gn,Cn):u=[gn,Cn]}en=tn,tn=this._edgecode(ex,ix),en&&tn&&this._edge(n,en,tn,u,u.length),u?u.push(ex,ix):u=[ex,ix]}if(u)en=tn,tn=this._edgecode(u[0],u[1]),en&&tn&&this._edge(n,en,tn,u,u.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(n,a,l,u,c,p){const d=c<p;for(d&&([n,a,l,u,c,p]=[l,u,n,a,p,c]);;){if(c===0&&p===0)return d?[l,u,n,a]:[n,a,l,u];if(c&p)return null;let Q,Ct,ar=c||p;ar&8?(Q=n+(l-n)*(this.ymax-a)/(u-a),Ct=this.ymax):ar&4?(Q=n+(l-n)*(this.ymin-a)/(u-a),Ct=this.ymin):ar&2?(Ct=a+(u-a)*(this.xmax-n)/(l-n),Q=this.xmax):(Ct=a+(u-a)*(this.xmin-n)/(l-n),Q=this.xmin),c?(n=Q,a=Ct,c=this._regioncode(n,a)):(l=Q,u=Ct,p=this._regioncode(l,u))}}_clipInfinite(n,a,l,u,c,p){let d=Array.from(a),Q;if((Q=this._project(d[0],d[1],l,u))&&d.unshift(Q[0],Q[1]),(Q=this._project(d[d.length-2],d[d.length-1],c,p))&&d.push(Q[0],Q[1]),d=this._clipFinite(n,d))for(let Ct=0,ar=d.length,en,tn=this._edgecode(d[ar-2],d[ar-1]);Ct<ar;Ct+=2)en=tn,tn=this._edgecode(d[Ct],d[Ct+1]),en&&tn&&(Ct=this._edge(n,en,tn,d,Ct),ar=d.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(n,a,l,u,c){for(;a!==l;){let p,d;switch(a){case 5:a=4;continue;case 4:a=6,p=this.xmax,d=this.ymin;break;case 6:a=2;continue;case 2:a=10,p=this.xmax,d=this.ymax;break;case 10:a=8;continue;case 8:a=9,p=this.xmin,d=this.ymax;break;case 9:a=1;continue;case 1:a=5,p=this.xmin,d=this.ymin;break}(u[c]!==p||u[c+1]!==d)&&this.contains(n,p,d)&&(u.splice(c,0,p,d),c+=2)}return c}_project(n,a,l,u){let c=1/0,p,d,Q;if(u<0){if(a<=this.ymin)return null;(p=(this.ymin-a)/u)<c&&(Q=this.ymin,d=n+(c=p)*l)}else if(u>0){if(a>=this.ymax)return null;(p=(this.ymax-a)/u)<c&&(Q=this.ymax,d=n+(c=p)*l)}if(l>0){if(n>=this.xmax)return null;(p=(this.xmax-n)/l)<c&&(d=this.xmax,Q=a+(c=p)*u)}else if(l<0){if(n<=this.xmin)return null;(p=(this.xmin-n)/l)<c&&(d=this.xmin,Q=a+(c=p)*u)}return[d,Q]}_edgecode(n,a){return(n===this.xmin?1:n===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(n,a){return(n<this.xmin?1:n>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let a=0;a<n.length;a+=2){const l=(a+2)%n.length,u=(a+4)%n.length;(n[a]===n[l]&&n[l]===n[u]||n[a+1]===n[l+1]&&n[l+1]===n[u+1])&&(n.splice(l,2),a-=2)}n.length||(n=null)}return n}}const Xv=2*Math.PI,Ee$1=Math.pow;function Hv(t){return t[0]}function jv(t){return t[1]}function Wv(t){const{triangles:n,coords:a}=t;for(let l=0;l<n.length;l+=3){const u=2*n[l],c=2*n[l+1],p=2*n[l+2];if((a[p]-a[u])*(a[c+1]-a[u+1])-(a[c]-a[u])*(a[p+1]-a[u+1])>1e-10)return!1}return!0}function Vv(t,n,a){return[t+Math.sin(t+n)*a,n+Math.cos(t-n)*a]}class zf{static from(n,a=Hv,l=jv,u){return new zf("length"in n?Gv(n,a,l,u):Float64Array.from(Zv(n,a,l,u)))}constructor(n){this._delaunator=new ro(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,a=this.points;if(n.hull&&n.hull.length>2&&Wv(n)){this.collinear=Int32Array.from({length:a.length/2},(tn,on)=>on).sort((tn,on)=>a[2*tn]-a[2*on]||a[2*tn+1]-a[2*on+1]);const Q=this.collinear[0],Ct=this.collinear[this.collinear.length-1],ar=[a[2*Q],a[2*Q+1],a[2*Ct],a[2*Ct+1]],en=1e-8*Math.hypot(ar[3]-ar[1],ar[2]-ar[0]);for(let tn=0,on=a.length/2;tn<on;++tn){const cn=Vv(a[2*tn],a[2*tn+1],en);a[2*tn]=cn[0],a[2*tn+1]=cn[1]}this._delaunator=new ro(a)}else delete this.collinear;const l=this.halfedges=this._delaunator.halfedges,u=this.hull=this._delaunator.hull,c=this.triangles=this._delaunator.triangles,p=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let Q=0,Ct=l.length;Q<Ct;++Q){const ar=c[Q%3===2?Q-2:Q+1];(l[Q]===-1||p[ar]===-1)&&(p[ar]=Q)}for(let Q=0,Ct=u.length;Q<Ct;++Q)d[u[Q]]=Q;u.length<=2&&u.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=u[0],p[u[0]]=1,u.length===2&&(p[u[1]]=0,this.triangles[1]=u[1],this.triangles[2]=u[1]))}voronoi(n){return new v0(this,n)}*neighbors(n){const{inedges:a,hull:l,_hullIndex:u,halfedges:c,triangles:p,collinear:d}=this;if(d){const en=d.indexOf(n);en>0&&(yield d[en-1]),en<d.length-1&&(yield d[en+1]);return}const Q=a[n];if(Q===-1)return;let Ct=Q,ar=-1;do{if(yield ar=p[Ct],Ct=Ct%3===2?Ct-2:Ct+1,p[Ct]!==n)return;if(Ct=c[Ct],Ct===-1){const en=l[(u[n]+1)%l.length];en!==ar&&(yield en);return}}while(Ct!==Q)}find(n,a,l=0){if(n=+n,n!==n||(a=+a,a!==a))return-1;const u=l;let c;for(;(c=this._step(l,n,a))>=0&&c!==l&&c!==u;)l=c;return c}_step(n,a,l){const{inedges:u,hull:c,_hullIndex:p,halfedges:d,triangles:Q,points:Ct}=this;if(u[n]===-1||!Ct.length)return(n+1)%(Ct.length>>1);let ar=n,en=Ee$1(a-Ct[n*2],2)+Ee$1(l-Ct[n*2+1],2);const tn=u[n];let on=tn;do{let cn=Q[on];const gn=Ee$1(a-Ct[cn*2],2)+Ee$1(l-Ct[cn*2+1],2);if(gn<en&&(en=gn,ar=cn),on=on%3===2?on-2:on+1,Q[on]!==n)break;if(on=d[on],on===-1){if(on=c[(p[n]+1)%c.length],on!==cn&&Ee$1(a-Ct[on*2],2)+Ee$1(l-Ct[on*2+1],2)<en)return on;break}}while(on!==tn);return ar}render(n){const a=n==null?n=new ne$1:void 0,{points:l,halfedges:u,triangles:c}=this;for(let p=0,d=u.length;p<d;++p){const Q=u[p];if(Q<p)continue;const Ct=c[p]*2,ar=c[Q]*2;n.moveTo(l[Ct],l[Ct+1]),n.lineTo(l[ar],l[ar+1])}return this.renderHull(n),a&&a.value()}renderPoints(n,a){a===void 0&&(!n||typeof n.moveTo!="function")&&(a=n,n=null),a=a==null?2:+a;const l=n==null?n=new ne$1:void 0,{points:u}=this;for(let c=0,p=u.length;c<p;c+=2){const d=u[c],Q=u[c+1];n.moveTo(d+a,Q),n.arc(d,Q,a,0,Xv)}return l&&l.value()}renderHull(n){const a=n==null?n=new ne$1:void 0,{hull:l,points:u}=this,c=l[0]*2,p=l.length;n.moveTo(u[c],u[c+1]);for(let d=1;d<p;++d){const Q=2*l[d];n.lineTo(u[Q],u[Q+1])}return n.closePath(),a&&a.value()}hullPolygon(){const n=new Iu;return this.renderHull(n),n.value()}renderTriangle(n,a){const l=a==null?a=new ne$1:void 0,{points:u,triangles:c}=this,p=c[n*=3]*2,d=c[n+1]*2,Q=c[n+2]*2;return a.moveTo(u[p],u[p+1]),a.lineTo(u[d],u[d+1]),a.lineTo(u[Q],u[Q+1]),a.closePath(),l&&l.value()}*trianglePolygons(){const{triangles:n}=this;for(let a=0,l=n.length/3;a<l;++a)yield this.trianglePolygon(a)}trianglePolygon(n){const a=new Iu;return this.renderTriangle(n,a),a.value()}}function Gv(t,n,a,l){const u=t.length,c=new Float64Array(u*2);for(let p=0;p<u;++p){const d=t[p];c[p*2]=n.call(l,d,p,t),c[p*2+1]=a.call(l,d,p,t)}return c}function*Zv(t,n,a,l){let u=0;for(const c of t)yield n.call(l,c,u,t),yield a.call(l,c,u,t),++u}var ys={},Ua={},Xa=34,sr=10,Ha=13;function b0(t){return new Function("d","return {"+t.map(function(n,a){return JSON.stringify(n)+": d["+a+'] || ""'}).join(",")+"}")}function Qv(t,n){var a=b0(t);return function(l,u){return n(a(l),u,t)}}function _s(t){var n=Object.create(null),a=[];return t.forEach(function(l){for(var u in l)u in n||a.push(n[u]=u)}),a}function Hn(t,n){var a=t+"",l=a.length;return l<n?new Array(n-l+1).join(0)+a:a}function Kv(t){return t<0?"-"+Hn(-t,6):t>9999?"+"+Hn(t,6):Hn(t,4)}function Jv(t){var n=t.getUTCHours(),a=t.getUTCMinutes(),l=t.getUTCSeconds(),u=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Kv(t.getUTCFullYear())+"-"+Hn(t.getUTCMonth()+1,2)+"-"+Hn(t.getUTCDate(),2)+(u?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(l,2)+"."+Hn(u,3)+"Z":l?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(l,2)+"Z":a||n?"T"+Hn(n,2)+":"+Hn(a,2)+"Z":"")}function na(t){var n=new RegExp('["'+t+`
\r]`),a=t.charCodeAt(0);function l(en,tn){var on,cn,gn=u(en,function(Cn,ex){if(on)return on(Cn,ex-1);cn=Cn,on=tn?Qv(Cn,tn):b0(Cn)});return gn.columns=cn||[],gn}function u(en,tn){var on=[],cn=en.length,gn=0,Cn=0,ex,ix=cn<=0,ax=!1;en.charCodeAt(cn-1)===sr&&--cn,en.charCodeAt(cn-1)===Ha&&--cn;function ox(){if(ix)return Ua;if(ax)return ax=!1,ys;var cx,dx=gn,hx;if(en.charCodeAt(dx)===Xa){for(;gn++<cn&&en.charCodeAt(gn)!==Xa||en.charCodeAt(++gn)===Xa;);return(cx=gn)>=cn?ix=!0:(hx=en.charCodeAt(gn++))===sr?ax=!0:hx===Ha&&(ax=!0,en.charCodeAt(gn)===sr&&++gn),en.slice(dx+1,cx-1).replace(/""/g,'"')}for(;gn<cn;){if((hx=en.charCodeAt(cx=gn++))===sr)ax=!0;else if(hx===Ha)ax=!0,en.charCodeAt(gn)===sr&&++gn;else if(hx!==a)continue;return en.slice(dx,cx)}return ix=!0,en.slice(dx,cn)}for(;(ex=ox())!==Ua;){for(var lx=[];ex!==ys&&ex!==Ua;)lx.push(ex),ex=ox();tn&&(lx=tn(lx,Cn++))==null||on.push(lx)}return on}function c(en,tn){return en.map(function(on){return tn.map(function(cn){return ar(on[cn])}).join(t)})}function p(en,tn){return tn==null&&(tn=_s(en)),[tn.map(ar).join(t)].concat(c(en,tn)).join(`
`)}function d(en,tn){return tn==null&&(tn=_s(en)),c(en,tn).join(`
`)}function Q(en){return en.map(Ct).join(`
`)}function Ct(en){return en.map(ar).join(t)}function ar(en){return en==null?"":en instanceof Date?Jv(en):n.test(en+="")?'"'+en.replace(/"/g,'""')+'"':en}return{parse:l,parseRows:u,format:p,formatBody:d,formatRows:Q,formatRow:Ct,formatValue:ar}}var ye$1=na(","),w0=ye$1.parse,nb=ye$1.parseRows,tb=ye$1.format,eb=ye$1.formatBody,rb$1=ye$1.formatRows,ib=ye$1.formatRow,ob=ye$1.formatValue,_e=na("	"),x0=_e.parse,ab=_e.parseRows,ub=_e.format,fb=_e.formatBody,cb=_e.formatRows,sb=_e.formatRow,lb$1=_e.formatValue;function hb(t){for(var n in t){var a=t[n].trim(),l,u;if(!a)a=null;else if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(!isNaN(l=+a))a=l;else if(u=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))db&&u[4]&&!u[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a);else continue;t[n]=a}return t}const db=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function gb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function pb(t,n){return fetch(t,n).then(gb)}function mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function yb(t,n){return fetch(t,n).then(mb)}function _b$1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ta(t,n){return fetch(t,n).then(_b$1)}function M0(t){return function(n,a,l){return arguments.length===2&&typeof a=="function"&&(l=a,a=void 0),ta(n,a).then(function(u){return t(u,l)})}}function vb(t,n,a,l){arguments.length===3&&typeof a=="function"&&(l=a,a=void 0);var u=na(t);return ta(n,a).then(function(c){return u.parse(c,l)})}var bb=M0(w0),wb=M0(x0);function xb(t,n){return new Promise(function(a,l){var u=new Image;for(var c in n)u[c]=n[c];u.onerror=l,u.onload=function(){a(u)},u.src=t})}function Mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function $b(t,n){return fetch(t,n).then(Mb)}function Of(t){return(n,a)=>ta(n,a).then(l=>new DOMParser().parseFromString(l,t))}const $0=Of("application/xml");var Tb=Of("text/html"),Ab=Of("image/svg+xml");function Sb(t,n){var a,l=1;t==null&&(t=0),n==null&&(n=0);function u(){var c,p=a.length,d,Q=0,Ct=0;for(c=0;c<p;++c)d=a[c],Q+=d.x,Ct+=d.y;for(Q=(Q/p-t)*l,Ct=(Ct/p-n)*l,c=0;c<p;++c)d=a[c],d.x-=Q,d.y-=Ct}return u.initialize=function(c){a=c},u.x=function(c){return arguments.length?(t=+c,u):t},u.y=function(c){return arguments.length?(n=+c,u):n},u.strength=function(c){return arguments.length?(l=+c,u):l},u}function Eb(t){const n=+this._x.call(null,t),a=+this._y.call(null,t);return T0(this.cover(n,a),n,a,t)}function T0(t,n,a,l){if(isNaN(n)||isNaN(a))return t;var u,c=t._root,p={data:l},d=t._x0,Q=t._y0,Ct=t._x1,ar=t._y1,en,tn,on,cn,gn,Cn,ex,ix;if(!c)return t._root=p,t;for(;c.length;)if((gn=n>=(en=(d+Ct)/2))?d=en:Ct=en,(Cn=a>=(tn=(Q+ar)/2))?Q=tn:ar=tn,u=c,!(c=c[ex=Cn<<1|gn]))return u[ex]=p,t;if(on=+t._x.call(null,c.data),cn=+t._y.call(null,c.data),n===on&&a===cn)return p.next=c,u?u[ex]=p:t._root=p,t;do u=u?u[ex]=new Array(4):t._root=new Array(4),(gn=n>=(en=(d+Ct)/2))?d=en:Ct=en,(Cn=a>=(tn=(Q+ar)/2))?Q=tn:ar=tn;while((ex=Cn<<1|gn)===(ix=(cn>=tn)<<1|on>=en));return u[ix]=c,u[ex]=p,t}function kb(t){var n,a,l=t.length,u,c,p=new Array(l),d=new Array(l),Q=1/0,Ct=1/0,ar=-1/0,en=-1/0;for(a=0;a<l;++a)isNaN(u=+this._x.call(null,n=t[a]))||isNaN(c=+this._y.call(null,n))||(p[a]=u,d[a]=c,u<Q&&(Q=u),u>ar&&(ar=u),c<Ct&&(Ct=c),c>en&&(en=c));if(Q>ar||Ct>en)return this;for(this.cover(Q,Ct).cover(ar,en),a=0;a<l;++a)T0(this,p[a],d[a],t[a]);return this}function Nb(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var a=this._x0,l=this._y0,u=this._x1,c=this._y1;if(isNaN(a))u=(a=Math.floor(t))+1,c=(l=Math.floor(n))+1;else{for(var p=u-a||1,d=this._root,Q,Ct;a>t||t>=u||l>n||n>=c;)switch(Ct=(n<l)<<1|t<a,Q=new Array(4),Q[Ct]=d,d=Q,p*=2,Ct){case 0:u=a+p,c=l+p;break;case 1:a=u-p,c=l+p;break;case 2:u=a+p,l=c-p;break;case 3:a=u-p,l=c-p;break}this._root&&this._root.length&&(this._root=d)}return this._x0=a,this._y0=l,this._x1=u,this._y1=c,this}function Rb(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Ib(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yn(t,n,a,l,u){this.node=t,this.x0=n,this.y0=a,this.x1=l,this.y1=u}function Cb(t,n,a){var l,u=this._x0,c=this._y0,p,d,Q,Ct,ar=this._x1,en=this._y1,tn=[],on=this._root,cn,gn;for(on&&tn.push(new Yn(on,u,c,ar,en)),a==null?a=1/0:(u=t-a,c=n-a,ar=t+a,en=n+a,a*=a);cn=tn.pop();)if(!(!(on=cn.node)||(p=cn.x0)>ar||(d=cn.y0)>en||(Q=cn.x1)<u||(Ct=cn.y1)<c))if(on.length){var Cn=(p+Q)/2,ex=(d+Ct)/2;tn.push(new Yn(on[3],Cn,ex,Q,Ct),new Yn(on[2],p,ex,Cn,Ct),new Yn(on[1],Cn,d,Q,ex),new Yn(on[0],p,d,Cn,ex)),(gn=(n>=ex)<<1|t>=Cn)&&(cn=tn[tn.length-1],tn[tn.length-1]=tn[tn.length-1-gn],tn[tn.length-1-gn]=cn)}else{var ix=t-+this._x.call(null,on.data),ax=n-+this._y.call(null,on.data),ox=ix*ix+ax*ax;if(ox<a){var lx=Math.sqrt(a=ox);u=t-lx,c=n-lx,ar=t+lx,en=n+lx,l=on.data}}return l}function Pb(t){if(isNaN(ar=+this._x.call(null,t))||isNaN(en=+this._y.call(null,t)))return this;var n,a=this._root,l,u,c,p=this._x0,d=this._y0,Q=this._x1,Ct=this._y1,ar,en,tn,on,cn,gn,Cn,ex;if(!a)return this;if(a.length)for(;;){if((cn=ar>=(tn=(p+Q)/2))?p=tn:Q=tn,(gn=en>=(on=(d+Ct)/2))?d=on:Ct=on,n=a,!(a=a[Cn=gn<<1|cn]))return this;if(!a.length)break;(n[Cn+1&3]||n[Cn+2&3]||n[Cn+3&3])&&(l=n,ex=Cn)}for(;a.data!==t;)if(u=a,!(a=a.next))return this;return(c=a.next)&&delete a.next,u?(c?u.next=c:delete u.next,this):n?(c?n[Cn]=c:delete n[Cn],(a=n[0]||n[1]||n[2]||n[3])&&a===(n[3]||n[2]||n[1]||n[0])&&!a.length&&(l?l[ex]=a:this._root=a),this):(this._root=c,this)}function Db(t){for(var n=0,a=t.length;n<a;++n)this.remove(t[n]);return this}function zb(){return this._root}function Ob(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Yb(t){var n=[],a,l=this._root,u,c,p,d,Q;for(l&&n.push(new Yn(l,this._x0,this._y0,this._x1,this._y1));a=n.pop();)if(!t(l=a.node,c=a.x0,p=a.y0,d=a.x1,Q=a.y1)&&l.length){var Ct=(c+d)/2,ar=(p+Q)/2;(u=l[3])&&n.push(new Yn(u,Ct,ar,d,Q)),(u=l[2])&&n.push(new Yn(u,c,ar,Ct,Q)),(u=l[1])&&n.push(new Yn(u,Ct,p,d,ar)),(u=l[0])&&n.push(new Yn(u,c,p,Ct,ar))}return this}function Fb(t){var n=[],a=[],l;for(this._root&&n.push(new Yn(this._root,this._x0,this._y0,this._x1,this._y1));l=n.pop();){var u=l.node;if(u.length){var c,p=l.x0,d=l.y0,Q=l.x1,Ct=l.y1,ar=(p+Q)/2,en=(d+Ct)/2;(c=u[0])&&n.push(new Yn(c,p,d,ar,en)),(c=u[1])&&n.push(new Yn(c,ar,d,Q,en)),(c=u[2])&&n.push(new Yn(c,p,en,ar,Ct)),(c=u[3])&&n.push(new Yn(c,ar,en,Q,Ct))}a.push(l)}for(;l=a.pop();)t(l.node,l.x0,l.y0,l.x1,l.y1);return this}function qb(t){return t[0]}function Lb(t){return arguments.length?(this._x=t,this):this._x}function Bb(t){return t[1]}function Ub(t){return arguments.length?(this._y=t,this):this._y}function ea(t,n,a){var l=new Yf(n??qb,a??Bb,NaN,NaN,NaN,NaN);return t==null?l:l.addAll(t)}function Yf(t,n,a,l,u,c){this._x=t,this._y=n,this._x0=a,this._y0=l,this._x1=u,this._y1=c,this._root=void 0}function vs(t){for(var n={data:t.data},a=n;t=t.next;)a=a.next={data:t.data};return n}var Xn=ea.prototype=Yf.prototype;Xn.copy=function(){var t=new Yf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,a,l;if(!n)return t;if(!n.length)return t._root=vs(n),t;for(a=[{source:n,target:t._root=new Array(4)}];n=a.pop();)for(var u=0;u<4;++u)(l=n.source[u])&&(l.length?a.push({source:l,target:n.target[u]=new Array(4)}):n.target[u]=vs(l));return t};Xn.add=Eb;Xn.addAll=kb;Xn.cover=Nb;Xn.data=Rb;Xn.extent=Ib;Xn.find=Cb;Xn.remove=Pb;Xn.removeAll=Db;Xn.root=zb;Xn.size=Ob;Xn.visit=Yb;Xn.visitAfter=Fb;Xn.x=Lb;Xn.y=Ub;function vn(t){return function(){return t}}function Ot(t){return(t()-.5)*1e-6}function Xb(t){return t.x+t.vx}function Hb(t){return t.y+t.vy}function jb(t){var n,a,l,u=1,c=1;typeof t!="function"&&(t=vn(t==null?1:+t));function p(){for(var Ct,ar=n.length,en,tn,on,cn,gn,Cn,ex=0;ex<c;++ex)for(en=ea(n,Xb,Hb).visitAfter(d),Ct=0;Ct<ar;++Ct)tn=n[Ct],gn=a[tn.index],Cn=gn*gn,on=tn.x+tn.vx,cn=tn.y+tn.vy,en.visit(ix);function ix(ax,ox,lx,cx,dx){var hx=ax.data,fx=ax.r,ux=gn+fx;if(hx){if(hx.index>tn.index){var gx=on-hx.x-hx.vx,yx=cn-hx.y-hx.vy,_x=gx*gx+yx*yx;_x<ux*ux&&(gx===0&&(gx=Ot(l),_x+=gx*gx),yx===0&&(yx=Ot(l),_x+=yx*yx),_x=(ux-(_x=Math.sqrt(_x)))/_x*u,tn.vx+=(gx*=_x)*(ux=(fx*=fx)/(Cn+fx)),tn.vy+=(yx*=_x)*ux,hx.vx-=gx*(ux=1-ux),hx.vy-=yx*ux)}return}return ox>on+ux||cx<on-ux||lx>cn+ux||dx<cn-ux}}function d(Ct){if(Ct.data)return Ct.r=a[Ct.data.index];for(var ar=Ct.r=0;ar<4;++ar)Ct[ar]&&Ct[ar].r>Ct.r&&(Ct.r=Ct[ar].r)}function Q(){if(n){var Ct,ar=n.length,en;for(a=new Array(ar),Ct=0;Ct<ar;++Ct)en=n[Ct],a[en.index]=+t(en,Ct,n)}}return p.initialize=function(Ct,ar){n=Ct,l=ar,Q()},p.iterations=function(Ct){return arguments.length?(c=+Ct,p):c},p.strength=function(Ct){return arguments.length?(u=+Ct,p):u},p.radius=function(Ct){return arguments.length?(t=typeof Ct=="function"?Ct:vn(+Ct),Q(),p):t},p}function Wb(t){return t.index}function bs(t,n){var a=t.get(n);if(!a)throw new Error("node not found: "+n);return a}function Vb(t){var n=Wb,a=en,l,u=vn(30),c,p,d,Q,Ct,ar=1;t==null&&(t=[]);function en(Cn){return 1/Math.min(d[Cn.source.index],d[Cn.target.index])}function tn(Cn){for(var ex=0,ix=t.length;ex<ar;++ex)for(var ax=0,ox,lx,cx,dx,hx,fx,ux;ax<ix;++ax)ox=t[ax],lx=ox.source,cx=ox.target,dx=cx.x+cx.vx-lx.x-lx.vx||Ot(Ct),hx=cx.y+cx.vy-lx.y-lx.vy||Ot(Ct),fx=Math.sqrt(dx*dx+hx*hx),fx=(fx-c[ax])/fx*Cn*l[ax],dx*=fx,hx*=fx,cx.vx-=dx*(ux=Q[ax]),cx.vy-=hx*ux,lx.vx+=dx*(ux=1-ux),lx.vy+=hx*ux}function on(){if(p){var Cn,ex=p.length,ix=t.length,ax=new Map(p.map((lx,cx)=>[n(lx,cx,p),lx])),ox;for(Cn=0,d=new Array(ex);Cn<ix;++Cn)ox=t[Cn],ox.index=Cn,typeof ox.source!="object"&&(ox.source=bs(ax,ox.source)),typeof ox.target!="object"&&(ox.target=bs(ax,ox.target)),d[ox.source.index]=(d[ox.source.index]||0)+1,d[ox.target.index]=(d[ox.target.index]||0)+1;for(Cn=0,Q=new Array(ix);Cn<ix;++Cn)ox=t[Cn],Q[Cn]=d[ox.source.index]/(d[ox.source.index]+d[ox.target.index]);l=new Array(ix),cn(),c=new Array(ix),gn()}}function cn(){if(p)for(var Cn=0,ex=t.length;Cn<ex;++Cn)l[Cn]=+a(t[Cn],Cn,t)}function gn(){if(p)for(var Cn=0,ex=t.length;Cn<ex;++Cn)c[Cn]=+u(t[Cn],Cn,t)}return tn.initialize=function(Cn,ex){p=Cn,Ct=ex,on()},tn.links=function(Cn){return arguments.length?(t=Cn,on(),tn):t},tn.id=function(Cn){return arguments.length?(n=Cn,tn):n},tn.iterations=function(Cn){return arguments.length?(ar=+Cn,tn):ar},tn.strength=function(Cn){return arguments.length?(a=typeof Cn=="function"?Cn:vn(+Cn),cn(),tn):a},tn.distance=function(Cn){return arguments.length?(u=typeof Cn=="function"?Cn:vn(+Cn),gn(),tn):u},tn}const Gb=1664525,Zb=1013904223,ws=4294967296;function Qb(){let t=1;return()=>(t=(Gb*t+Zb)%ws)/ws}function Kb(t){return t.x}function Jb(t){return t.y}var nw=10,tw=Math.PI*(3-Math.sqrt(5));function ew(t){var n,a=1,l=.001,u=1-Math.pow(l,1/300),c=0,p=.6,d=new Map,Q=Qo(en),Ct=pe$1("tick","end"),ar=Qb();t==null&&(t=[]);function en(){tn(),Ct.call("tick",n),a<l&&(Q.stop(),Ct.call("end",n))}function tn(gn){var Cn,ex=t.length,ix;gn===void 0&&(gn=1);for(var ax=0;ax<gn;++ax)for(a+=(c-a)*u,d.forEach(function(ox){ox(a)}),Cn=0;Cn<ex;++Cn)ix=t[Cn],ix.fx==null?ix.x+=ix.vx*=p:(ix.x=ix.fx,ix.vx=0),ix.fy==null?ix.y+=ix.vy*=p:(ix.y=ix.fy,ix.vy=0);return n}function on(){for(var gn=0,Cn=t.length,ex;gn<Cn;++gn){if(ex=t[gn],ex.index=gn,ex.fx!=null&&(ex.x=ex.fx),ex.fy!=null&&(ex.y=ex.fy),isNaN(ex.x)||isNaN(ex.y)){var ix=nw*Math.sqrt(.5+gn),ax=gn*tw;ex.x=ix*Math.cos(ax),ex.y=ix*Math.sin(ax)}(isNaN(ex.vx)||isNaN(ex.vy))&&(ex.vx=ex.vy=0)}}function cn(gn){return gn.initialize&&gn.initialize(t,ar),gn}return on(),n={tick:tn,restart:function(){return Q.restart(en),n},stop:function(){return Q.stop(),n},nodes:function(gn){return arguments.length?(t=gn,on(),d.forEach(cn),n):t},alpha:function(gn){return arguments.length?(a=+gn,n):a},alphaMin:function(gn){return arguments.length?(l=+gn,n):l},alphaDecay:function(gn){return arguments.length?(u=+gn,n):+u},alphaTarget:function(gn){return arguments.length?(c=+gn,n):c},velocityDecay:function(gn){return arguments.length?(p=1-gn,n):1-p},randomSource:function(gn){return arguments.length?(ar=gn,d.forEach(cn),n):ar},force:function(gn,Cn){return arguments.length>1?(Cn==null?d.delete(gn):d.set(gn,cn(Cn)),n):d.get(gn)},find:function(gn,Cn,ex){var ix=0,ax=t.length,ox,lx,cx,dx,hx;for(ex==null?ex=1/0:ex*=ex,ix=0;ix<ax;++ix)dx=t[ix],ox=gn-dx.x,lx=Cn-dx.y,cx=ox*ox+lx*lx,cx<ex&&(hx=dx,ex=cx);return hx},on:function(gn,Cn){return arguments.length>1?(Ct.on(gn,Cn),n):Ct.on(gn)}}}function rw(){var t,n,a,l,u=vn(-30),c,p=1,d=1/0,Q=.81;function Ct(on){var cn,gn=t.length,Cn=ea(t,Kb,Jb).visitAfter(en);for(l=on,cn=0;cn<gn;++cn)n=t[cn],Cn.visit(tn)}function ar(){if(t){var on,cn=t.length,gn;for(c=new Array(cn),on=0;on<cn;++on)gn=t[on],c[gn.index]=+u(gn,on,t)}}function en(on){var cn=0,gn,Cn,ex=0,ix,ax,ox;if(on.length){for(ix=ax=ox=0;ox<4;++ox)(gn=on[ox])&&(Cn=Math.abs(gn.value))&&(cn+=gn.value,ex+=Cn,ix+=Cn*gn.x,ax+=Cn*gn.y);on.x=ix/ex,on.y=ax/ex}else{gn=on,gn.x=gn.data.x,gn.y=gn.data.y;do cn+=c[gn.data.index];while(gn=gn.next)}on.value=cn}function tn(on,cn,gn,Cn){if(!on.value)return!0;var ex=on.x-n.x,ix=on.y-n.y,ax=Cn-cn,ox=ex*ex+ix*ix;if(ax*ax/Q<ox)return ox<d&&(ex===0&&(ex=Ot(a),ox+=ex*ex),ix===0&&(ix=Ot(a),ox+=ix*ix),ox<p&&(ox=Math.sqrt(p*ox)),n.vx+=ex*on.value*l/ox,n.vy+=ix*on.value*l/ox),!0;if(!(on.length||ox>=d)){(on.data!==n||on.next)&&(ex===0&&(ex=Ot(a),ox+=ex*ex),ix===0&&(ix=Ot(a),ox+=ix*ix),ox<p&&(ox=Math.sqrt(p*ox)));do on.data!==n&&(ax=c[on.data.index]*l/ox,n.vx+=ex*ax,n.vy+=ix*ax);while(on=on.next)}}return Ct.initialize=function(on,cn){t=on,a=cn,ar()},Ct.strength=function(on){return arguments.length?(u=typeof on=="function"?on:vn(+on),ar(),Ct):u},Ct.distanceMin=function(on){return arguments.length?(p=on*on,Ct):Math.sqrt(p)},Ct.distanceMax=function(on){return arguments.length?(d=on*on,Ct):Math.sqrt(d)},Ct.theta=function(on){return arguments.length?(Q=on*on,Ct):Math.sqrt(Q)},Ct}function iw(t,n,a){var l,u=vn(.1),c,p;typeof t!="function"&&(t=vn(+t)),n==null&&(n=0),a==null&&(a=0);function d(Ct){for(var ar=0,en=l.length;ar<en;++ar){var tn=l[ar],on=tn.x-n||1e-6,cn=tn.y-a||1e-6,gn=Math.sqrt(on*on+cn*cn),Cn=(p[ar]-gn)*c[ar]*Ct/gn;tn.vx+=on*Cn,tn.vy+=cn*Cn}}function Q(){if(l){var Ct,ar=l.length;for(c=new Array(ar),p=new Array(ar),Ct=0;Ct<ar;++Ct)p[Ct]=+t(l[Ct],Ct,l),c[Ct]=isNaN(p[Ct])?0:+u(l[Ct],Ct,l)}}return d.initialize=function(Ct){l=Ct,Q()},d.strength=function(Ct){return arguments.length?(u=typeof Ct=="function"?Ct:vn(+Ct),Q(),d):u},d.radius=function(Ct){return arguments.length?(t=typeof Ct=="function"?Ct:vn(+Ct),Q(),d):t},d.x=function(Ct){return arguments.length?(n=+Ct,d):n},d.y=function(Ct){return arguments.length?(a=+Ct,d):a},d}function ow(t){var n=vn(.1),a,l,u;typeof t!="function"&&(t=vn(t==null?0:+t));function c(d){for(var Q=0,Ct=a.length,ar;Q<Ct;++Q)ar=a[Q],ar.vx+=(u[Q]-ar.x)*l[Q]*d}function p(){if(a){var d,Q=a.length;for(l=new Array(Q),u=new Array(Q),d=0;d<Q;++d)l[d]=isNaN(u[d]=+t(a[d],d,a))?0:+n(a[d],d,a)}}return c.initialize=function(d){a=d,p()},c.strength=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),p(),c):n},c.x=function(d){return arguments.length?(t=typeof d=="function"?d:vn(+d),p(),c):t},c}function aw(t){var n=vn(.1),a,l,u;typeof t!="function"&&(t=vn(t==null?0:+t));function c(d){for(var Q=0,Ct=a.length,ar;Q<Ct;++Q)ar=a[Q],ar.vy+=(u[Q]-ar.y)*l[Q]*d}function p(){if(a){var d,Q=a.length;for(l=new Array(Q),u=new Array(Q),d=0;d<Q;++d)l[d]=isNaN(u[d]=+t(a[d],d,a))?0:+n(a[d],d,a)}}return c.initialize=function(d){a=d,p()},c.strength=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),p(),c):n},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:vn(+d),p(),c):t},c}function uw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function io(t,n){if((a=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var a,l=t.slice(0,a);return[l.length>1?l[0]+l.slice(2):l,+t.slice(a+1)]}function je(t){return t=io(Math.abs(t)),t?t[1]:NaN}function fw(t,n){return function(a,l){for(var u=a.length,c=[],p=0,d=t[0],Q=0;u>0&&d>0&&(Q+d+1>l&&(d=Math.max(1,l-Q)),c.push(a.substring(u-=d,u+d)),!((Q+=d+1)>l));)d=t[p=(p+1)%t.length];return c.reverse().join(n)}}function cw(t){return function(n){return n.replace(/[0-9]/g,function(a){return t[+a]})}}var sw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function We(t){if(!(n=sw.exec(t)))throw new Error("invalid format: "+t);var n;return new ra({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}We.prototype=ra.prototype;function ra(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lw(t){e:for(var n=t.length,a=1,l=-1,u;a<n;++a)switch(t[a]){case".":l=u=a;break;case"0":l===0&&(l=a),u=a;break;default:if(!+t[a])break e;l>0&&(l=0);break}return l>0?t.slice(0,l)+t.slice(u+1):t}var A0;function hw(t,n){var a=io(t,n);if(!a)return t+"";var l=a[0],u=a[1],c=u-(A0=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=l.length;return c===p?l:c>p?l+new Array(c-p+1).join("0"):c>0?l.slice(0,c)+"."+l.slice(c):"0."+new Array(1-c).join("0")+io(t,Math.max(0,n+c-1))[0]}function xs(t,n){var a=io(t,n);if(!a)return t+"";var l=a[0],u=a[1];return u<0?"0."+new Array(-u).join("0")+l:l.length>u+1?l.slice(0,u+1)+"."+l.slice(u+1):l+new Array(u-l.length+2).join("0")}const Ms={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uw,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>xs(t*100,n),r:xs,s:hw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $s(t){return t}var Ts=Array.prototype.map,As=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function S0(t){var n=t.grouping===void 0||t.thousands===void 0?$s:fw(Ts.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",l=t.currency===void 0?"":t.currency[1]+"",u=t.decimal===void 0?".":t.decimal+"",c=t.numerals===void 0?$s:cw(Ts.call(t.numerals,String)),p=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"":t.minus+"",Q=t.nan===void 0?"NaN":t.nan+"";function Ct(en){en=We(en);var tn=en.fill,on=en.align,cn=en.sign,gn=en.symbol,Cn=en.zero,ex=en.width,ix=en.comma,ax=en.precision,ox=en.trim,lx=en.type;lx==="n"?(ix=!0,lx="g"):Ms[lx]||(ax===void 0&&(ax=12),ox=!0,lx="g"),(Cn||tn==="0"&&on==="=")&&(Cn=!0,tn="0",on="=");var cx=gn==="$"?a:gn==="#"&&/[boxX]/.test(lx)?"0"+lx.toLowerCase():"",dx=gn==="$"?l:/[%p]/.test(lx)?p:"",hx=Ms[lx],fx=/[defgprs%]/.test(lx);ax=ax===void 0?6:/[gprs]/.test(lx)?Math.max(1,Math.min(21,ax)):Math.max(0,Math.min(20,ax));function ux(gx){var yx=cx,_x=dx,vx,bx,xx;if(lx==="c")_x=hx(gx)+_x,gx="";else{gx=+gx;var Sx=gx<0||1/gx<0;if(gx=isNaN(gx)?Q:hx(Math.abs(gx),ax),ox&&(gx=lw(gx)),Sx&&+gx==0&&cn!=="+"&&(Sx=!1),yx=(Sx?cn==="("?cn:d:cn==="-"||cn==="("?"":cn)+yx,_x=(lx==="s"?As[8+A0/3]:"")+_x+(Sx&&cn==="("?")":""),fx){for(vx=-1,bx=gx.length;++vx<bx;)if(xx=gx.charCodeAt(vx),48>xx||xx>57){_x=(xx===46?u+gx.slice(vx+1):gx.slice(vx))+_x,gx=gx.slice(0,vx);break}}}ix&&!Cn&&(gx=n(gx,1/0));var Ax=yx.length+gx.length+_x.length,Cx=Ax<ex?new Array(ex-Ax+1).join(tn):"";switch(ix&&Cn&&(gx=n(Cx+gx,Cx.length?ex-_x.length:1/0),Cx=""),on){case"<":gx=yx+gx+_x+Cx;break;case"=":gx=yx+Cx+gx+_x;break;case"^":gx=Cx.slice(0,Ax=Cx.length>>1)+yx+gx+_x+Cx.slice(Ax);break;default:gx=Cx+yx+gx+_x;break}return c(gx)}return ux.toString=function(){return en+""},ux}function ar(en,tn){var on=Ct((en=We(en),en.type="f",en)),cn=Math.max(-8,Math.min(8,Math.floor(je(tn)/3)))*3,gn=Math.pow(10,-cn),Cn=As[8+cn/3];return function(ex){return on(gn*ex)+Cn}}return{format:Ct,formatPrefix:ar}}var _i,ia,Ff;E0({thousands:",",grouping:[3],currency:["$",""]});function E0(t){return _i=S0(t),ia=_i.format,Ff=_i.formatPrefix,_i}function k0(t){return Math.max(0,-je(Math.abs(t)))}function N0(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(je(n)/3)))*3-je(Math.abs(t)))}function R0(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,je(n)-je(t))+1}var H$1=1e-6,oo=1e-12,K$1=Math.PI,mn=K$1/2,ao=K$1/4,Ln=K$1*2,an=180/K$1,U$1=K$1/180,nn=Math.abs,ir=Math.atan,Bn=Math.atan2,B$1=Math.cos,vi=Math.ceil,I0=Math.exp,Cu=Math.hypot,uo=Math.log,ja=Math.pow,q$1=Math.sin,nt=Math.sign||function(t){return t>0?1:t<0?-1:0},$n=Math.sqrt,qf=Math.tan;function C0(t){return t>1?0:t<-1?K$1:Math.acos(t)}function Un(t){return t>1?mn:t<-1?-mn:Math.asin(t)}function Ss(t){return(t=q$1(t/2))*t}function ln(){}function fo(t,n){t&&ks.hasOwnProperty(t.type)&&ks[t.type](t,n)}var Es={Feature:function(t,n){fo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,l=-1,u=a.length;++l<u;)fo(a[l].geometry,n)}},ks={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var a=t.coordinates,l=-1,u=a.length;++l<u;)t=a[l],n.point(t[0],t[1],t[2])},LineString:function(t,n){Pu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var a=t.coordinates,l=-1,u=a.length;++l<u;)Pu(a[l],n,0)},Polygon:function(t,n){Ns(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,l=-1,u=a.length;++l<u;)Ns(a[l],n)},GeometryCollection:function(t,n){for(var a=t.geometries,l=-1,u=a.length;++l<u;)fo(a[l],n)}};function Pu(t,n,a){var l=-1,u=t.length-a,c;for(n.lineStart();++l<u;)c=t[l],n.point(c[0],c[1],c[2]);n.lineEnd()}function Ns(t,n){var a=-1,l=t.length;for(n.polygonStart();++a<l;)Pu(t[a],n,1);n.polygonEnd()}function it(t,n){t&&Es.hasOwnProperty(t.type)?Es[t.type](t,n):fo(t,n)}var co=new bn,so=new bn,P0,D0,Du,zu,Ou,pt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){co=new bn,pt.lineStart=dw,pt.lineEnd=gw},polygonEnd:function(){var t=+co;so.add(t<0?Ln+t:t),this.lineStart=this.lineEnd=this.point=ln},sphere:function(){so.add(Ln)}};function dw(){pt.point=pw}function gw(){z0(P0,D0)}function pw(t,n){pt.point=z0,P0=t,D0=n,t*=U$1,n*=U$1,Du=t,zu=B$1(n=n/2+ao),Ou=q$1(n)}function z0(t,n){t*=U$1,n*=U$1,n=n/2+ao;var a=t-Du,l=a>=0?1:-1,u=l*a,c=B$1(n),p=q$1(n),d=Ou*p,Q=zu*c+d*B$1(u),Ct=d*l*q$1(u);co.add(Bn(Ct,Q)),Du=t,zu=c,Ou=p}function mw(t){return so=new bn,it(t,pt),so*2}function lo(t){return[Bn(t[1],t[0]),Un(t[2])]}function se$1(t){var n=t[0],a=t[1],l=B$1(a);return[l*B$1(n),l*q$1(n),q$1(a)]}function bi(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ve(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Wa(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function wi(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ho(t){var n=$n(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var sn,Wn,pn,Gn,Qt,O0,Y0,Ye,Er,Dt,Nt,$t={point:Yu,lineStart:Rs,lineEnd:Is,polygonStart:function(){$t.point=q0,$t.lineStart=yw,$t.lineEnd=_w,Er=new bn,pt.polygonStart()},polygonEnd:function(){pt.polygonEnd(),$t.point=Yu,$t.lineStart=Rs,$t.lineEnd=Is,co<0?(sn=-(pn=180),Wn=-(Gn=90)):Er>H$1?Gn=90:Er<-1e-6&&(Wn=-90),Nt[0]=sn,Nt[1]=pn},sphere:function(){sn=-(pn=180),Wn=-(Gn=90)}};function Yu(t,n){Dt.push(Nt=[sn=t,pn=t]),n<Wn&&(Wn=n),n>Gn&&(Gn=n)}function F0(t,n){var a=se$1([t*U$1,n*U$1]);if(Ye){var l=Ve(Ye,a),u=[l[1],-l[0],0],c=Ve(u,l);ho(c),c=lo(c);var p=t-Qt,d=p>0?1:-1,Q=c[0]*an*d,Ct,ar=nn(p)>180;ar^(d*Qt<Q&&Q<d*t)?(Ct=c[1]*an,Ct>Gn&&(Gn=Ct)):(Q=(Q+360)%360-180,ar^(d*Qt<Q&&Q<d*t)?(Ct=-c[1]*an,Ct<Wn&&(Wn=Ct)):(n<Wn&&(Wn=n),n>Gn&&(Gn=n))),ar?t<Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t):pn>=sn?(t<sn&&(sn=t),t>pn&&(pn=t)):t>Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t)}else Dt.push(Nt=[sn=t,pn=t]);n<Wn&&(Wn=n),n>Gn&&(Gn=n),Ye=a,Qt=t}function Rs(){$t.point=F0}function Is(){Nt[0]=sn,Nt[1]=pn,$t.point=Yu,Ye=null}function q0(t,n){if(Ye){var a=t-Qt;Er.add(nn(a)>180?a+(a>0?360:-360):a)}else O0=t,Y0=n;pt.point(t,n),F0(t,n)}function yw(){pt.lineStart()}function _w(){q0(O0,Y0),pt.lineEnd(),nn(Er)>H$1&&(sn=-(pn=180)),Nt[0]=sn,Nt[1]=pn,Ye=null}function Vn(t,n){return(n-=t)<0?n+360:n}function vw(t,n){return t[0]-n[0]}function Cs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function bw(t){var n,a,l,u,c,p,d;if(Gn=pn=-(sn=Wn=1/0),Dt=[],it(t,$t),a=Dt.length){for(Dt.sort(vw),n=1,l=Dt[0],c=[l];n<a;++n)u=Dt[n],Cs(l,u[0])||Cs(l,u[1])?(Vn(l[0],u[1])>Vn(l[0],l[1])&&(l[1]=u[1]),Vn(u[0],l[1])>Vn(l[0],l[1])&&(l[0]=u[0])):c.push(l=u);for(p=-1/0,a=c.length-1,n=0,l=c[a];n<=a;l=u,++n)u=c[n],(d=Vn(l[1],u[0]))>p&&(p=d,sn=u[0],pn=l[1])}return Dt=Nt=null,sn===1/0||Wn===1/0?[[NaN,NaN],[NaN,NaN]]:[[sn,Wn],[pn,Gn]]}var vr,go,po,mo,yo,_o,vo,bo,Fu,qu,Lu,L0,B0,Dn,zn,On,ot={sphere:ln,point:Lf,lineStart:Ps,lineEnd:Ds,polygonStart:function(){ot.lineStart=Mw,ot.lineEnd=$w},polygonEnd:function(){ot.lineStart=Ps,ot.lineEnd=Ds}};function Lf(t,n){t*=U$1,n*=U$1;var a=B$1(n);ti(a*B$1(t),a*q$1(t),q$1(n))}function ti(t,n,a){++vr,po+=(t-po)/vr,mo+=(n-mo)/vr,yo+=(a-yo)/vr}function Ps(){ot.point=ww}function ww(t,n){t*=U$1,n*=U$1;var a=B$1(n);Dn=a*B$1(t),zn=a*q$1(t),On=q$1(n),ot.point=xw,ti(Dn,zn,On)}function xw(t,n){t*=U$1,n*=U$1;var a=B$1(n),l=a*B$1(t),u=a*q$1(t),c=q$1(n),p=Bn($n((p=zn*c-On*u)*p+(p=On*l-Dn*c)*p+(p=Dn*u-zn*l)*p),Dn*l+zn*u+On*c);go+=p,_o+=p*(Dn+(Dn=l)),vo+=p*(zn+(zn=u)),bo+=p*(On+(On=c)),ti(Dn,zn,On)}function Ds(){ot.point=Lf}function Mw(){ot.point=Tw}function $w(){U0(L0,B0),ot.point=Lf}function Tw(t,n){L0=t,B0=n,t*=U$1,n*=U$1,ot.point=U0;var a=B$1(n);Dn=a*B$1(t),zn=a*q$1(t),On=q$1(n),ti(Dn,zn,On)}function U0(t,n){t*=U$1,n*=U$1;var a=B$1(n),l=a*B$1(t),u=a*q$1(t),c=q$1(n),p=zn*c-On*u,d=On*l-Dn*c,Q=Dn*u-zn*l,Ct=Cu(p,d,Q),ar=Un(Ct),en=Ct&&-ar/Ct;Fu.add(en*p),qu.add(en*d),Lu.add(en*Q),go+=ar,_o+=ar*(Dn+(Dn=l)),vo+=ar*(zn+(zn=u)),bo+=ar*(On+(On=c)),ti(Dn,zn,On)}function Aw(t){vr=go=po=mo=yo=_o=vo=bo=0,Fu=new bn,qu=new bn,Lu=new bn,it(t,ot);var n=+Fu,a=+qu,l=+Lu,u=Cu(n,a,l);return u<oo&&(n=_o,a=vo,l=bo,go<H$1&&(n=po,a=mo,l=yo),u=Cu(n,a,l),u<oo)?[NaN,NaN]:[Bn(a,n)*an,Un(l/u)*an]}function ke(t){return function(){return t}}function Bu(t,n){function a(l,u){return l=t(l,u),n(l[0],l[1])}return t.invert&&n.invert&&(a.invert=function(l,u){return l=n.invert(l,u),l&&t.invert(l[0],l[1])}),a}function Uu(t,n){return nn(t)>K$1&&(t-=Math.round(t/Ln)*Ln),[t,n]}Uu.invert=Uu;function Bf(t,n,a){return(t%=Ln)?n||a?Bu(Os(t),Ys(n,a)):Os(t):n||a?Ys(n,a):Uu}function zs(t){return function(n,a){return n+=t,nn(n)>K$1&&(n-=Math.round(n/Ln)*Ln),[n,a]}}function Os(t){var n=zs(t);return n.invert=zs(-t),n}function Ys(t,n){var a=B$1(t),l=q$1(t),u=B$1(n),c=q$1(n);function p(d,Q){var Ct=B$1(Q),ar=B$1(d)*Ct,en=q$1(d)*Ct,tn=q$1(Q),on=tn*a+ar*l;return[Bn(en*u-on*c,ar*a-tn*l),Un(on*u+en*c)]}return p.invert=function(d,Q){var Ct=B$1(Q),ar=B$1(d)*Ct,en=q$1(d)*Ct,tn=q$1(Q),on=tn*u-en*c;return[Bn(en*u+tn*c,ar*a+on*l),Un(on*a-ar*l)]},p}function X0(t){t=Bf(t[0]*U$1,t[1]*U$1,t.length>2?t[2]*U$1:0);function n(a){return a=t(a[0]*U$1,a[1]*U$1),a[0]*=an,a[1]*=an,a}return n.invert=function(a){return a=t.invert(a[0]*U$1,a[1]*U$1),a[0]*=an,a[1]*=an,a},n}function H0(t,n,a,l,u,c){if(a){var p=B$1(n),d=q$1(n),Q=l*a;u==null?(u=n+l*Ln,c=n-Q/2):(u=Fs(p,u),c=Fs(p,c),(l>0?u<c:u>c)&&(u+=l*Ln));for(var Ct,ar=u;l>0?ar>c:ar<c;ar-=Q)Ct=lo([p,-d*B$1(ar),-d*q$1(ar)]),t.point(Ct[0],Ct[1])}}function Fs(t,n){n=se$1(n),n[0]-=t,ho(n);var a=C0(-n[1]);return((-n[2]<0?-a:a)+Ln-H$1)%Ln}function Sw(){var t=ke([0,0]),n=ke(90),a=ke(2),l,u,c={point:p};function p(Q,Ct){l.push(Q=u(Q,Ct)),Q[0]*=an,Q[1]*=an}function d(){var Q=t.apply(this,arguments),Ct=n.apply(this,arguments)*U$1,ar=a.apply(this,arguments)*U$1;return l=[],u=Bf(-Q[0]*U$1,-Q[1]*U$1,0).invert,H0(c,Ct,ar,1),Q={type:"Polygon",coordinates:[l]},l=u=null,Q}return d.center=function(Q){return arguments.length?(t=typeof Q=="function"?Q:ke([+Q[0],+Q[1]]),d):t},d.radius=function(Q){return arguments.length?(n=typeof Q=="function"?Q:ke(+Q),d):n},d.precision=function(Q){return arguments.length?(a=typeof Q=="function"?Q:ke(+Q),d):a},d}function j0(){var t=[],n;return{point:function(a,l,u){n.push([a,l,u])},lineStart:function(){t.push(n=[])},lineEnd:ln,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var a=t;return t=[],n=null,a}}}function qi(t,n){return nn(t[0]-n[0])<H$1&&nn(t[1]-n[1])<H$1}function xi(t,n,a,l){this.x=t,this.z=n,this.o=a,this.e=l,this.v=!1,this.n=this.p=null}function W0(t,n,a,l,u){var c=[],p=[],d,Q;if(t.forEach(function(cn){if(!((gn=cn.length-1)<=0)){var gn,Cn=cn[0],ex=cn[gn],ix;if(qi(Cn,ex)){if(!Cn[2]&&!ex[2]){for(u.lineStart(),d=0;d<gn;++d)u.point((Cn=cn[d])[0],Cn[1]);u.lineEnd();return}ex[0]+=2*H$1}c.push(ix=new xi(Cn,cn,null,!0)),p.push(ix.o=new xi(Cn,null,ix,!1)),c.push(ix=new xi(ex,cn,null,!1)),p.push(ix.o=new xi(ex,null,ix,!0))}}),!!c.length){for(p.sort(n),qs(c),qs(p),d=0,Q=p.length;d<Q;++d)p[d].e=a=!a;for(var Ct=c[0],ar,en;;){for(var tn=Ct,on=!0;tn.v;)if((tn=tn.n)===Ct)return;ar=tn.z,u.lineStart();do{if(tn.v=tn.o.v=!0,tn.e){if(on)for(d=0,Q=ar.length;d<Q;++d)u.point((en=ar[d])[0],en[1]);else l(tn.x,tn.n.x,1,u);tn=tn.n}else{if(on)for(ar=tn.p.z,d=ar.length-1;d>=0;--d)u.point((en=ar[d])[0],en[1]);else l(tn.x,tn.p.x,-1,u);tn=tn.p}tn=tn.o,ar=tn.z,on=!on}while(!tn.v);u.lineEnd()}}}function qs(t){if(n=t.length){for(var n,a=0,l=t[0],u;++a<n;)l.n=u=t[a],u.p=l,l=u;l.n=u=t[0],u.p=l}}function Va(t){return nn(t[0])<=K$1?t[0]:nt(t[0])*((nn(t[0])+K$1)%Ln-K$1)}function V0(t,n){var a=Va(n),l=n[1],u=q$1(l),c=[q$1(a),-B$1(a),0],p=0,d=0,Q=new bn;u===1?l=mn+H$1:u===-1&&(l=-mn-H$1);for(var Ct=0,ar=t.length;Ct<ar;++Ct)if(tn=(en=t[Ct]).length)for(var en,tn,on=en[tn-1],cn=Va(on),gn=on[1]/2+ao,Cn=q$1(gn),ex=B$1(gn),ix=0;ix<tn;++ix,cn=ox,Cn=cx,ex=dx,on=ax){var ax=en[ix],ox=Va(ax),lx=ax[1]/2+ao,cx=q$1(lx),dx=B$1(lx),hx=ox-cn,fx=hx>=0?1:-1,ux=fx*hx,gx=ux>K$1,yx=Cn*cx;if(Q.add(Bn(yx*fx*q$1(ux),ex*dx+yx*B$1(ux))),p+=gx?hx+fx*Ln:hx,gx^cn>=a^ox>=a){var _x=Ve(se$1(on),se$1(ax));ho(_x);var vx=Ve(c,_x);ho(vx);var bx=(gx^hx>=0?-1:1)*Un(vx[2]);(l>bx||l===bx&&(_x[0]||_x[1]))&&(d+=gx^hx>=0?1:-1)}}return(p<-1e-6||p<H$1&&Q<-1e-12)^d&1}function G0(t,n,a,l){return function(u){var c=n(u),p=j0(),d=n(p),Q=!1,Ct,ar,en,tn={point:on,lineStart:gn,lineEnd:Cn,polygonStart:function(){tn.point=ex,tn.lineStart=ix,tn.lineEnd=ax,ar=[],Ct=[]},polygonEnd:function(){tn.point=on,tn.lineStart=gn,tn.lineEnd=Cn,ar=yf(ar);var ox=V0(Ct,l);ar.length?(Q||(u.polygonStart(),Q=!0),W0(ar,kw,ox,a,u)):ox&&(Q||(u.polygonStart(),Q=!0),u.lineStart(),a(null,null,1,u),u.lineEnd()),Q&&(u.polygonEnd(),Q=!1),ar=Ct=null},sphere:function(){u.polygonStart(),u.lineStart(),a(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function on(ox,lx){t(ox,lx)&&u.point(ox,lx)}function cn(ox,lx){c.point(ox,lx)}function gn(){tn.point=cn,c.lineStart()}function Cn(){tn.point=on,c.lineEnd()}function ex(ox,lx){en.push([ox,lx]),d.point(ox,lx)}function ix(){d.lineStart(),en=[]}function ax(){ex(en[0][0],en[0][1]),d.lineEnd();var ox=d.clean(),lx=p.result(),cx,dx=lx.length,hx,fx,ux;if(en.pop(),Ct.push(en),en=null,!!dx){if(ox&1){if(fx=lx[0],(hx=fx.length-1)>0){for(Q||(u.polygonStart(),Q=!0),u.lineStart(),cx=0;cx<hx;++cx)u.point((ux=fx[cx])[0],ux[1]);u.lineEnd()}return}dx>1&&ox&2&&lx.push(lx.pop().concat(lx.shift())),ar.push(lx.filter(Ew))}}return tn}}function Ew(t){return t.length>1}function kw(t,n){return((t=t.x)[0]<0?t[1]-mn-H$1:mn-t[1])-((n=n.x)[0]<0?n[1]-mn-H$1:mn-n[1])}const Xu=G0(function(){return!0},Nw,Iw,[-K$1,-mn]);function Nw(t){var n=NaN,a=NaN,l=NaN,u;return{lineStart:function(){t.lineStart(),u=1},point:function(c,p){var d=c>0?K$1:-K$1,Q=nn(c-n);nn(Q-K$1)<H$1?(t.point(n,a=(a+p)/2>0?mn:-mn),t.point(l,a),t.lineEnd(),t.lineStart(),t.point(d,a),t.point(c,a),u=0):l!==d&&Q>=K$1&&(nn(n-l)<H$1&&(n-=l*H$1),nn(c-d)<H$1&&(c-=d*H$1),a=Rw(n,a,c,p),t.point(l,a),t.lineEnd(),t.lineStart(),t.point(d,a),u=0),t.point(n=c,a=p),l=d},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-u}}}function Rw(t,n,a,l){var u,c,p=q$1(t-a);return nn(p)>H$1?ir((q$1(n)*(c=B$1(l))*q$1(a)-q$1(l)*(u=B$1(n))*q$1(t))/(u*c*p)):(n+l)/2}function Iw(t,n,a,l){var u;if(t==null)u=a*mn,l.point(-K$1,u),l.point(0,u),l.point(K$1,u),l.point(K$1,0),l.point(K$1,-u),l.point(0,-u),l.point(-K$1,-u),l.point(-K$1,0),l.point(-K$1,u);else if(nn(t[0]-n[0])>H$1){var c=t[0]<n[0]?K$1:-K$1;u=a*c/2,l.point(-c,u),l.point(0,u),l.point(c,u)}else l.point(n[0],n[1])}function Z0(t){var n=B$1(t),a=2*U$1,l=n>0,u=nn(n)>H$1;function c(ar,en,tn,on){H0(on,t,a,tn,ar,en)}function p(ar,en){return B$1(ar)*B$1(en)>n}function d(ar){var en,tn,on,cn,gn;return{lineStart:function(){cn=on=!1,gn=1},point:function(Cn,ex){var ix=[Cn,ex],ax,ox=p(Cn,ex),lx=l?ox?0:Ct(Cn,ex):ox?Ct(Cn+(Cn<0?K$1:-K$1),ex):0;if(!en&&(cn=on=ox)&&ar.lineStart(),ox!==on&&(ax=Q(en,ix),(!ax||qi(en,ax)||qi(ix,ax))&&(ix[2]=1)),ox!==on)gn=0,ox?(ar.lineStart(),ax=Q(ix,en),ar.point(ax[0],ax[1])):(ax=Q(en,ix),ar.point(ax[0],ax[1],2),ar.lineEnd()),en=ax;else if(u&&en&&l^ox){var cx;!(lx&tn)&&(cx=Q(ix,en,!0))&&(gn=0,l?(ar.lineStart(),ar.point(cx[0][0],cx[0][1]),ar.point(cx[1][0],cx[1][1]),ar.lineEnd()):(ar.point(cx[1][0],cx[1][1]),ar.lineEnd(),ar.lineStart(),ar.point(cx[0][0],cx[0][1],3)))}ox&&(!en||!qi(en,ix))&&ar.point(ix[0],ix[1]),en=ix,on=ox,tn=lx},lineEnd:function(){on&&ar.lineEnd(),en=null},clean:function(){return gn|(cn&&on)<<1}}}function Q(ar,en,tn){var on=se$1(ar),cn=se$1(en),gn=[1,0,0],Cn=Ve(on,cn),ex=bi(Cn,Cn),ix=Cn[0],ax=ex-ix*ix;if(!ax)return!tn&&ar;var ox=n*ex/ax,lx=-n*ix/ax,cx=Ve(gn,Cn),dx=wi(gn,ox),hx=wi(Cn,lx);Wa(dx,hx);var fx=cx,ux=bi(dx,fx),gx=bi(fx,fx),yx=ux*ux-gx*(bi(dx,dx)-1);if(!(yx<0)){var _x=$n(yx),vx=wi(fx,(-ux-_x)/gx);if(Wa(vx,dx),vx=lo(vx),!tn)return vx;var bx=ar[0],xx=en[0],Sx=ar[1],Ax=en[1],Cx;xx<bx&&(Cx=bx,bx=xx,xx=Cx);var Tx=xx-bx,Px=nn(Tx-K$1)<H$1,Fx=Px||Tx<H$1;if(!Px&&Ax<Sx&&(Cx=Sx,Sx=Ax,Ax=Cx),Fx?Px?Sx+Ax>0^vx[1]<(nn(vx[0]-bx)<H$1?Sx:Ax):Sx<=vx[1]&&vx[1]<=Ax:Tx>K$1^(bx<=vx[0]&&vx[0]<=xx)){var Mx=wi(fx,(-ux+_x)/gx);return Wa(Mx,dx),[vx,lo(Mx)]}}}function Ct(ar,en){var tn=l?t:K$1-t,on=0;return ar<-tn?on|=1:ar>tn&&(on|=2),en<-tn?on|=4:en>tn&&(on|=8),on}return G0(p,d,c,l?[0,-t]:[-K$1,t-K$1])}function Cw(t,n,a,l,u,c){var p=t[0],d=t[1],Q=n[0],Ct=n[1],ar=0,en=1,tn=Q-p,on=Ct-d,cn;if(cn=a-p,!(!tn&&cn>0)){if(cn/=tn,tn<0){if(cn<ar)return;cn<en&&(en=cn)}else if(tn>0){if(cn>en)return;cn>ar&&(ar=cn)}if(cn=u-p,!(!tn&&cn<0)){if(cn/=tn,tn<0){if(cn>en)return;cn>ar&&(ar=cn)}else if(tn>0){if(cn<ar)return;cn<en&&(en=cn)}if(cn=l-d,!(!on&&cn>0)){if(cn/=on,on<0){if(cn<ar)return;cn<en&&(en=cn)}else if(on>0){if(cn>en)return;cn>ar&&(ar=cn)}if(cn=c-d,!(!on&&cn<0)){if(cn/=on,on<0){if(cn>en)return;cn>ar&&(ar=cn)}else if(on>0){if(cn<ar)return;cn<en&&(en=cn)}return ar>0&&(t[0]=p+ar*tn,t[1]=d+ar*on),en<1&&(n[0]=p+en*tn,n[1]=d+en*on),!0}}}}}var Mi=1e9,$i=-1e9;function oa(t,n,a,l){function u(Ct,ar){return t<=Ct&&Ct<=a&&n<=ar&&ar<=l}function c(Ct,ar,en,tn){var on=0,cn=0;if(Ct==null||(on=p(Ct,en))!==(cn=p(ar,en))||Q(Ct,ar)<0^en>0)do tn.point(on===0||on===3?t:a,on>1?l:n);while((on=(on+en+4)%4)!==cn);else tn.point(ar[0],ar[1])}function p(Ct,ar){return nn(Ct[0]-t)<H$1?ar>0?0:3:nn(Ct[0]-a)<H$1?ar>0?2:1:nn(Ct[1]-n)<H$1?ar>0?1:0:ar>0?3:2}function d(Ct,ar){return Q(Ct.x,ar.x)}function Q(Ct,ar){var en=p(Ct,1),tn=p(ar,1);return en!==tn?en-tn:en===0?ar[1]-Ct[1]:en===1?Ct[0]-ar[0]:en===2?Ct[1]-ar[1]:ar[0]-Ct[0]}return function(Ct){var ar=Ct,en=j0(),tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx={point:hx,lineStart:yx,lineEnd:_x,polygonStart:ux,polygonEnd:gx};function hx(bx,xx){u(bx,xx)&&ar.point(bx,xx)}function fx(){for(var bx=0,xx=0,Sx=on.length;xx<Sx;++xx)for(var Ax=on[xx],Cx=1,Tx=Ax.length,Px=Ax[0],Fx,Mx,Dx=Px[0],Ox=Px[1];Cx<Tx;++Cx)Fx=Dx,Mx=Ox,Px=Ax[Cx],Dx=Px[0],Ox=Px[1],Mx<=l?Ox>l&&(Dx-Fx)*(l-Mx)>(Ox-Mx)*(t-Fx)&&++bx:Ox<=l&&(Dx-Fx)*(l-Mx)<(Ox-Mx)*(t-Fx)&&--bx;return bx}function ux(){ar=en,tn=[],on=[],cx=!0}function gx(){var bx=fx(),xx=cx&&bx,Sx=(tn=yf(tn)).length;(xx||Sx)&&(Ct.polygonStart(),xx&&(Ct.lineStart(),c(null,null,1,Ct),Ct.lineEnd()),Sx&&W0(tn,d,bx,c,Ct),Ct.polygonEnd()),ar=Ct,tn=on=cn=null}function yx(){dx.point=vx,on&&on.push(cn=[]),lx=!0,ox=!1,ix=ax=NaN}function _x(){tn&&(vx(gn,Cn),ex&&ox&&en.rejoin(),tn.push(en.result())),dx.point=hx,ox&&ar.lineEnd()}function vx(bx,xx){var Sx=u(bx,xx);if(on&&cn.push([bx,xx]),lx)gn=bx,Cn=xx,ex=Sx,lx=!1,Sx&&(ar.lineStart(),ar.point(bx,xx));else if(Sx&&ox)ar.point(bx,xx);else{var Ax=[ix=Math.max($i,Math.min(Mi,ix)),ax=Math.max($i,Math.min(Mi,ax))],Cx=[bx=Math.max($i,Math.min(Mi,bx)),xx=Math.max($i,Math.min(Mi,xx))];Cw(Ax,Cx,t,n,a,l)?(ox||(ar.lineStart(),ar.point(Ax[0],Ax[1])),ar.point(Cx[0],Cx[1]),Sx||ar.lineEnd(),cx=!1):Sx&&(ar.lineStart(),ar.point(bx,xx),cx=!1)}ix=bx,ax=xx,ox=Sx}return dx}}function Pw(){var t=0,n=0,a=960,l=500,u,c,p;return p={stream:function(d){return u&&c===d?u:u=oa(t,n,a,l)(c=d)},extent:function(d){return arguments.length?(t=+d[0][0],n=+d[0][1],a=+d[1][0],l=+d[1][1],u=c=null,p):[[t,n],[a,l]]}}}var Hu,ju,Li,Bi,Ge={sphere:ln,point:ln,lineStart:Dw,lineEnd:ln,polygonStart:ln,polygonEnd:ln};function Dw(){Ge.point=Ow,Ge.lineEnd=zw}function zw(){Ge.point=Ge.lineEnd=ln}function Ow(t,n){t*=U$1,n*=U$1,ju=t,Li=q$1(n),Bi=B$1(n),Ge.point=Yw}function Yw(t,n){t*=U$1,n*=U$1;var a=q$1(n),l=B$1(n),u=nn(t-ju),c=B$1(u),p=q$1(u),d=l*p,Q=Bi*a-Li*l*c,Ct=Li*a+Bi*l*c;Hu.add(Bn($n(d*d+Q*Q),Ct)),ju=t,Li=a,Bi=l}function Q0(t){return Hu=new bn,it(t,Ge),+Hu}var Wu=[null,null],Fw={type:"LineString",coordinates:Wu};function wo(t,n){return Wu[0]=t,Wu[1]=n,Q0(Fw)}var Ls={Feature:function(t,n){return xo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,l=-1,u=a.length;++l<u;)if(xo(a[l].geometry,n))return!0;return!1}},Bs={Sphere:function(){return!0},Point:function(t,n){return Us(t.coordinates,n)},MultiPoint:function(t,n){for(var a=t.coordinates,l=-1,u=a.length;++l<u;)if(Us(a[l],n))return!0;return!1},LineString:function(t,n){return Xs(t.coordinates,n)},MultiLineString:function(t,n){for(var a=t.coordinates,l=-1,u=a.length;++l<u;)if(Xs(a[l],n))return!0;return!1},Polygon:function(t,n){return Hs(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,l=-1,u=a.length;++l<u;)if(Hs(a[l],n))return!0;return!1},GeometryCollection:function(t,n){for(var a=t.geometries,l=-1,u=a.length;++l<u;)if(xo(a[l],n))return!0;return!1}};function xo(t,n){return t&&Bs.hasOwnProperty(t.type)?Bs[t.type](t,n):!1}function Us(t,n){return wo(t,n)===0}function Xs(t,n){for(var a,l,u,c=0,p=t.length;c<p;c++){if(l=wo(t[c],n),l===0||c>0&&(u=wo(t[c],t[c-1]),u>0&&a<=u&&l<=u&&(a+l-u)*(1-Math.pow((a-l)/u,2))<oo*u))return!0;a=l}return!1}function Hs(t,n){return!!V0(t.map(qw),K0(n))}function qw(t){return t=t.map(K0),t.pop(),t}function K0(t){return[t[0]*U$1,t[1]*U$1]}function Lw(t,n){return(t&&Ls.hasOwnProperty(t.type)?Ls[t.type]:xo)(t,n)}function js(t,n,a){var l=zt(t,n-H$1,a).concat(n);return function(u){return l.map(function(c){return[u,c]})}}function Ws(t,n,a){var l=zt(t,n-H$1,a).concat(n);return function(u){return l.map(function(c){return[c,u]})}}function J0(){var t,n,a,l,u,c,p,d,Q=10,Ct=Q,ar=90,en=360,tn,on,cn,gn,Cn=2.5;function ex(){return{type:"MultiLineString",coordinates:ix()}}function ix(){return zt(vi(l/ar)*ar,a,ar).map(cn).concat(zt(vi(d/en)*en,p,en).map(gn)).concat(zt(vi(n/Q)*Q,t,Q).filter(function(ax){return nn(ax%ar)>H$1}).map(tn)).concat(zt(vi(c/Ct)*Ct,u,Ct).filter(function(ax){return nn(ax%en)>H$1}).map(on))}return ex.lines=function(){return ix().map(function(ax){return{type:"LineString",coordinates:ax}})},ex.outline=function(){return{type:"Polygon",coordinates:[cn(l).concat(gn(p).slice(1),cn(a).reverse().slice(1),gn(d).reverse().slice(1))]}},ex.extent=function(ax){return arguments.length?ex.extentMajor(ax).extentMinor(ax):ex.extentMinor()},ex.extentMajor=function(ax){return arguments.length?(l=+ax[0][0],a=+ax[1][0],d=+ax[0][1],p=+ax[1][1],l>a&&(ax=l,l=a,a=ax),d>p&&(ax=d,d=p,p=ax),ex.precision(Cn)):[[l,d],[a,p]]},ex.extentMinor=function(ax){return arguments.length?(n=+ax[0][0],t=+ax[1][0],c=+ax[0][1],u=+ax[1][1],n>t&&(ax=n,n=t,t=ax),c>u&&(ax=c,c=u,u=ax),ex.precision(Cn)):[[n,c],[t,u]]},ex.step=function(ax){return arguments.length?ex.stepMajor(ax).stepMinor(ax):ex.stepMinor()},ex.stepMajor=function(ax){return arguments.length?(ar=+ax[0],en=+ax[1],ex):[ar,en]},ex.stepMinor=function(ax){return arguments.length?(Q=+ax[0],Ct=+ax[1],ex):[Q,Ct]},ex.precision=function(ax){return arguments.length?(Cn=+ax,tn=js(c,u,90),on=Ws(n,t,Cn),cn=js(d,p,90),gn=Ws(l,a,Cn),ex):Cn},ex.extentMajor([[-180,-90+H$1],[180,90-H$1]]).extentMinor([[-180,-80-H$1],[180,80+H$1]])}function Bw(){return J0()()}function Uw(t,n){var a=t[0]*U$1,l=t[1]*U$1,u=n[0]*U$1,c=n[1]*U$1,p=B$1(l),d=q$1(l),Q=B$1(c),Ct=q$1(c),ar=p*B$1(a),en=p*q$1(a),tn=Q*B$1(u),on=Q*q$1(u),cn=2*Un($n(Ss(c-l)+p*Q*Ss(u-a))),gn=q$1(cn),Cn=cn?function(ex){var ix=q$1(ex*=cn)/gn,ax=q$1(cn-ex)/gn,ox=ax*ar+ix*tn,lx=ax*en+ix*on,cx=ax*d+ix*Ct;return[Bn(lx,ox)*an,Bn(cx,$n(ox*ox+lx*lx))*an]}:function(){return[a*an,l*an]};return Cn.distance=cn,Cn}const Xr=t=>t;var Ga=new bn,Vu=new bn,n1,t1,Gu,Zu,Tt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){Tt.lineStart=Xw,Tt.lineEnd=jw},polygonEnd:function(){Tt.lineStart=Tt.lineEnd=Tt.point=ln,Ga.add(nn(Vu)),Vu=new bn},result:function(){var t=Ga/2;return Ga=new bn,t}};function Xw(){Tt.point=Hw}function Hw(t,n){Tt.point=e1,n1=Gu=t,t1=Zu=n}function e1(t,n){Vu.add(Zu*t-Gu*n),Gu=t,Zu=n}function jw(){e1(n1,t1)}var Ze=1/0,Mo=Ze,Hr=-Ze,$o=Hr,To={point:Ww,lineStart:ln,lineEnd:ln,polygonStart:ln,polygonEnd:ln,result:function(){var t=[[Ze,Mo],[Hr,$o]];return Hr=$o=-(Mo=Ze=1/0),t}};function Ww(t,n){t<Ze&&(Ze=t),t>Hr&&(Hr=t),n<Mo&&(Mo=n),n>$o&&($o=n)}var Qu=0,Ku=0,br=0,Ao=0,So=0,Ce=0,Ju=0,nf=0,wr=0,r1,i1,ct,st,Jn={point:le$1,lineStart:Vs,lineEnd:Gs,polygonStart:function(){Jn.lineStart=Zw,Jn.lineEnd=Qw},polygonEnd:function(){Jn.point=le$1,Jn.lineStart=Vs,Jn.lineEnd=Gs},result:function(){var t=wr?[Ju/wr,nf/wr]:Ce?[Ao/Ce,So/Ce]:br?[Qu/br,Ku/br]:[NaN,NaN];return Qu=Ku=br=Ao=So=Ce=Ju=nf=wr=0,t}};function le$1(t,n){Qu+=t,Ku+=n,++br}function Vs(){Jn.point=Vw}function Vw(t,n){Jn.point=Gw,le$1(ct=t,st=n)}function Gw(t,n){var a=t-ct,l=n-st,u=$n(a*a+l*l);Ao+=u*(ct+t)/2,So+=u*(st+n)/2,Ce+=u,le$1(ct=t,st=n)}function Gs(){Jn.point=le$1}function Zw(){Jn.point=Kw}function Qw(){o1(r1,i1)}function Kw(t,n){Jn.point=o1,le$1(r1=ct=t,i1=st=n)}function o1(t,n){var a=t-ct,l=n-st,u=$n(a*a+l*l);Ao+=u*(ct+t)/2,So+=u*(st+n)/2,Ce+=u,u=st*t-ct*n,Ju+=u*(ct+t),nf+=u*(st+n),wr+=u*3,le$1(ct=t,st=n)}function a1(t){this._context=t}a1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ln);break}}},result:ln};var tf=new bn,Za,u1,f1,xr,Mr,jr={point:ln,lineStart:function(){jr.point=Jw},lineEnd:function(){Za&&c1(u1,f1),jr.point=ln},polygonStart:function(){Za=!0},polygonEnd:function(){Za=null},result:function(){var t=+tf;return tf=new bn,t}};function Jw(t,n){jr.point=c1,u1=xr=t,f1=Mr=n}function c1(t,n){xr-=t,Mr-=n,tf.add($n(xr*xr+Mr*Mr)),xr=t,Mr=n}let Zs,Eo,Qs,Ks;class Js{constructor(n){this._append=n==null?s1:n3(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,a){switch(this._point){case 0:{this._append`M${n},${a}`,this._point=1;break}case 1:{this._append`L${n},${a}`;break}default:{if(this._append`M${n},${a}`,this._radius!==Qs||this._append!==Eo){const l=this._radius,u=this._;this._="",this._append`m0,${l}a${l},${l} 0 1,1 0,${-2*l}a${l},${l} 0 1,1 0,${2*l}z`,Qs=l,Eo=this._append,Ks=this._,this._=u}this._+=Ks;break}}}result(){const n=this._;return this._="",n.length?n:null}}function s1(t){let n=1;this._+=t[0];for(const a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function n3(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return s1;if(n!==Zs){const a=10**n;Zs=n,Eo=function(l){let u=1;this._+=l[0];for(const c=l.length;u<c;++u)this._+=Math.round(arguments[u]*a)/a+l[u]}}return Eo}function t3(t,n){let a=3,l=4.5,u,c;function p(d){return d&&(typeof l=="function"&&c.pointRadius(+l.apply(this,arguments)),it(d,u(c))),c.result()}return p.area=function(d){return it(d,u(Tt)),Tt.result()},p.measure=function(d){return it(d,u(jr)),jr.result()},p.bounds=function(d){return it(d,u(To)),To.result()},p.centroid=function(d){return it(d,u(Jn)),Jn.result()},p.projection=function(d){return arguments.length?(u=d==null?(t=null,Xr):(t=d).stream,p):t},p.context=function(d){return arguments.length?(c=d==null?(n=null,new Js(a)):new a1(n=d),typeof l!="function"&&c.pointRadius(l),p):n},p.pointRadius=function(d){return arguments.length?(l=typeof d=="function"?d:(c.pointRadius(+d),+d),p):l},p.digits=function(d){if(!arguments.length)return a;if(d==null)a=null;else{const Q=Math.floor(d);if(!(Q>=0))throw new RangeError(`invalid digits: ${d}`);a=Q}return n===null&&(c=new Js(a)),p},p.projection(t).digits(a).context(n)}function e3(t){return{stream:ei(t)}}function ei(t){return function(n){var a=new ef;for(var l in t)a[l]=t[l];return a.stream=n,a}}function ef(){}ef.prototype={constructor:ef,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Uf(t,n,a){var l=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),l!=null&&t.clipExtent(null),it(a,t.stream(To)),n(To.result()),l!=null&&t.clipExtent(l),t}function aa(t,n,a){return Uf(t,function(l){var u=n[1][0]-n[0][0],c=n[1][1]-n[0][1],p=Math.min(u/(l[1][0]-l[0][0]),c/(l[1][1]-l[0][1])),d=+n[0][0]+(u-p*(l[1][0]+l[0][0]))/2,Q=+n[0][1]+(c-p*(l[1][1]+l[0][1]))/2;t.scale(150*p).translate([d,Q])},a)}function Xf(t,n,a){return aa(t,[[0,0],n],a)}function Hf(t,n,a){return Uf(t,function(l){var u=+n,c=u/(l[1][0]-l[0][0]),p=(u-c*(l[1][0]+l[0][0]))/2,d=-c*l[0][1];t.scale(150*c).translate([p,d])},a)}function jf(t,n,a){return Uf(t,function(l){var u=+n,c=u/(l[1][1]-l[0][1]),p=-c*l[0][0],d=(u-c*(l[1][1]+l[0][1]))/2;t.scale(150*c).translate([p,d])},a)}var nl=16,r3=B$1(30*U$1);function tl(t,n){return+n?o3(t,n):i3(t)}function i3(t){return ei({point:function(n,a){n=t(n,a),this.stream.point(n[0],n[1])}})}function o3(t,n){function a(l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn){var ex=Ct-l,ix=ar-u,ax=ex*ex+ix*ix;if(ax>4*n&&gn--){var ox=p+tn,lx=d+on,cx=Q+cn,dx=$n(ox*ox+lx*lx+cx*cx),hx=Un(cx/=dx),fx=nn(nn(cx)-1)<H$1||nn(c-en)<H$1?(c+en)/2:Bn(lx,ox),ux=t(fx,hx),gx=ux[0],yx=ux[1],_x=gx-l,vx=yx-u,bx=ix*_x-ex*vx;(bx*bx/ax>n||nn((ex*_x+ix*vx)/ax-.5)>.3||p*tn+d*on+Q*cn<r3)&&(a(l,u,c,p,d,Q,gx,yx,fx,ox/=dx,lx/=dx,cx,gn,Cn),Cn.point(gx,yx),a(gx,yx,fx,ox,lx,cx,Ct,ar,en,tn,on,cn,gn,Cn))}}return function(l){var u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn={point:ex,lineStart:ix,lineEnd:ox,polygonStart:function(){l.polygonStart(),Cn.lineStart=lx},polygonEnd:function(){l.polygonEnd(),Cn.lineStart=ix}};function ex(hx,fx){hx=t(hx,fx),l.point(hx[0],hx[1])}function ix(){en=NaN,Cn.point=ax,l.lineStart()}function ax(hx,fx){var ux=se$1([hx,fx]),gx=t(hx,fx);a(en,tn,ar,on,cn,gn,en=gx[0],tn=gx[1],ar=hx,on=ux[0],cn=ux[1],gn=ux[2],nl,l),l.point(en,tn)}function ox(){Cn.point=ex,l.lineEnd()}function lx(){ix(),Cn.point=cx,Cn.lineEnd=dx}function cx(hx,fx){ax(u=hx,fx),c=en,p=tn,d=on,Q=cn,Ct=gn,Cn.point=ax}function dx(){a(en,tn,ar,on,cn,gn,c,p,u,d,Q,Ct,nl,l),Cn.lineEnd=ox,ox()}return Cn}}var a3=ei({point:function(t,n){this.stream.point(t*U$1,n*U$1)}});function u3(t){return ei({point:function(n,a){var l=t(n,a);return this.stream.point(l[0],l[1])}})}function f3(t,n,a,l,u){function c(p,d){return p*=l,d*=u,[n+t*p,a-t*d]}return c.invert=function(p,d){return[(p-n)/t*l,(a-d)/t*u]},c}function el(t,n,a,l,u,c){if(!c)return f3(t,n,a,l,u);var p=B$1(c),d=q$1(c),Q=p*t,Ct=d*t,ar=p/t,en=d/t,tn=(d*a-p*n)/t,on=(d*n+p*a)/t;function cn(gn,Cn){return gn*=l,Cn*=u,[Q*gn-Ct*Cn+n,a-Ct*gn-Q*Cn]}return cn.invert=function(gn,Cn){return[l*(ar*gn-en*Cn+tn),u*(on-en*gn-ar*Cn)]},cn}function vt(t){return Wf(function(){return t})()}function Wf(t){var n,a=150,l=480,u=250,c=0,p=0,d=0,Q=0,Ct=0,ar,en=0,tn=1,on=1,cn=null,gn=Xu,Cn=null,ex,ix,ax,ox=Xr,lx=.5,cx,dx,hx,fx,ux;function gx(bx){return hx(bx[0]*U$1,bx[1]*U$1)}function yx(bx){return bx=hx.invert(bx[0],bx[1]),bx&&[bx[0]*an,bx[1]*an]}gx.stream=function(bx){return fx&&ux===bx?fx:fx=a3(u3(ar)(gn(cx(ox(ux=bx)))))},gx.preclip=function(bx){return arguments.length?(gn=bx,cn=void 0,vx()):gn},gx.postclip=function(bx){return arguments.length?(ox=bx,Cn=ex=ix=ax=null,vx()):ox},gx.clipAngle=function(bx){return arguments.length?(gn=+bx?Z0(cn=bx*U$1):(cn=null,Xu),vx()):cn*an},gx.clipExtent=function(bx){return arguments.length?(ox=bx==null?(Cn=ex=ix=ax=null,Xr):oa(Cn=+bx[0][0],ex=+bx[0][1],ix=+bx[1][0],ax=+bx[1][1]),vx()):Cn==null?null:[[Cn,ex],[ix,ax]]},gx.scale=function(bx){return arguments.length?(a=+bx,_x()):a},gx.translate=function(bx){return arguments.length?(l=+bx[0],u=+bx[1],_x()):[l,u]},gx.center=function(bx){return arguments.length?(c=bx[0]%360*U$1,p=bx[1]%360*U$1,_x()):[c*an,p*an]},gx.rotate=function(bx){return arguments.length?(d=bx[0]%360*U$1,Q=bx[1]%360*U$1,Ct=bx.length>2?bx[2]%360*U$1:0,_x()):[d*an,Q*an,Ct*an]},gx.angle=function(bx){return arguments.length?(en=bx%360*U$1,_x()):en*an},gx.reflectX=function(bx){return arguments.length?(tn=bx?-1:1,_x()):tn<0},gx.reflectY=function(bx){return arguments.length?(on=bx?-1:1,_x()):on<0},gx.precision=function(bx){return arguments.length?(cx=tl(dx,lx=bx*bx),vx()):$n(lx)},gx.fitExtent=function(bx,xx){return aa(gx,bx,xx)},gx.fitSize=function(bx,xx){return Xf(gx,bx,xx)},gx.fitWidth=function(bx,xx){return Hf(gx,bx,xx)},gx.fitHeight=function(bx,xx){return jf(gx,bx,xx)};function _x(){var bx=el(a,0,0,tn,on,en).apply(null,n(c,p)),xx=el(a,l-bx[0],u-bx[1],tn,on,en);return ar=Bf(d,Q,Ct),dx=Bu(n,xx),hx=Bu(ar,dx),cx=tl(dx,lx),vx()}function vx(){return fx=ux=null,gx}return function(){return n=t.apply(this,arguments),gx.invert=n.invert&&yx,_x()}}function Vf(t){var n=0,a=K$1/3,l=Wf(t),u=l(n,a);return u.parallels=function(c){return arguments.length?l(n=c[0]*U$1,a=c[1]*U$1):[n*an,a*an]},u}function c3(t){var n=B$1(t);function a(l,u){return[l*n,q$1(u)/n]}return a.invert=function(l,u){return[l/n,Un(u*n)]},a}function l1(t,n){var a=q$1(t),l=(a+q$1(n))/2;if(nn(l)<H$1)return c3(t);var u=1+a*(2*l-a),c=$n(u)/l;function p(d,Q){var Ct=$n(u-2*l*q$1(Q))/l;return[Ct*q$1(d*=l),c-Ct*B$1(d)]}return p.invert=function(d,Q){var Ct=c-Q,ar=Bn(d,nn(Ct))*nt(Ct);return Ct*l<0&&(ar-=K$1*nt(d)*nt(Ct)),[ar/l,Un((u-(d*d+Ct*Ct)*l*l)/(2*l))]},p}function ko(){return Vf(l1).scale(155.424).center([0,33.6442])}function h1(){return ko().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function s3(t){var n=t.length;return{point:function(a,l){for(var u=-1;++u<n;)t[u].point(a,l)},sphere:function(){for(var a=-1;++a<n;)t[a].sphere()},lineStart:function(){for(var a=-1;++a<n;)t[a].lineStart()},lineEnd:function(){for(var a=-1;++a<n;)t[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<n;)t[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<n;)t[a].polygonEnd()}}}function l3(){var t,n,a=h1(),l,u=ko().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c,p=ko().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,Q,Ct={point:function(tn,on){Q=[tn,on]}};function ar(tn){var on=tn[0],cn=tn[1];return Q=null,l.point(on,cn),Q||(c.point(on,cn),Q)||(d.point(on,cn),Q)}ar.invert=function(tn){var on=a.scale(),cn=a.translate(),gn=(tn[0]-cn[0])/on,Cn=(tn[1]-cn[1])/on;return(Cn>=.12&&Cn<.234&&gn>=-.425&&gn<-.214?u:Cn>=.166&&Cn<.234&&gn>=-.214&&gn<-.115?p:a).invert(tn)},ar.stream=function(tn){return t&&n===tn?t:t=s3([a.stream(n=tn),u.stream(tn),p.stream(tn)])},ar.precision=function(tn){return arguments.length?(a.precision(tn),u.precision(tn),p.precision(tn),en()):a.precision()},ar.scale=function(tn){return arguments.length?(a.scale(tn),u.scale(tn*.35),p.scale(tn),ar.translate(a.translate())):a.scale()},ar.translate=function(tn){if(!arguments.length)return a.translate();var on=a.scale(),cn=+tn[0],gn=+tn[1];return l=a.translate(tn).clipExtent([[cn-.455*on,gn-.238*on],[cn+.455*on,gn+.238*on]]).stream(Ct),c=u.translate([cn-.307*on,gn+.201*on]).clipExtent([[cn-.425*on+H$1,gn+.12*on+H$1],[cn-.214*on-H$1,gn+.234*on-H$1]]).stream(Ct),d=p.translate([cn-.205*on,gn+.212*on]).clipExtent([[cn-.214*on+H$1,gn+.166*on+H$1],[cn-.115*on-H$1,gn+.234*on-H$1]]).stream(Ct),en()},ar.fitExtent=function(tn,on){return aa(ar,tn,on)},ar.fitSize=function(tn,on){return Xf(ar,tn,on)},ar.fitWidth=function(tn,on){return Hf(ar,tn,on)},ar.fitHeight=function(tn,on){return jf(ar,tn,on)};function en(){return t=n=null,ar}return ar.scale(1070)}function d1(t){return function(n,a){var l=B$1(n),u=B$1(a),c=t(l*u);return c===1/0?[2,0]:[c*u*q$1(n),c*q$1(a)]}}function ri(t){return function(n,a){var l=$n(n*n+a*a),u=t(l),c=q$1(u),p=B$1(u);return[Bn(n*c,l*p),Un(l&&a*c/l)]}}var Gf=d1(function(t){return $n(2/(1+t))});Gf.invert=ri(function(t){return 2*Un(t/2)});function h3(){return vt(Gf).scale(124.75).clipAngle(180-.001)}var Zf=d1(function(t){return(t=C0(t))&&t/q$1(t)});Zf.invert=ri(function(t){return t});function d3(){return vt(Zf).scale(79.4188).clipAngle(180-.001)}function ii(t,n){return[t,uo(qf((mn+n)/2))]}ii.invert=function(t,n){return[t,2*ir(I0(n))-mn]};function g3(){return g1(ii).scale(961/Ln)}function g1(t){var n=vt(t),a=n.center,l=n.scale,u=n.translate,c=n.clipExtent,p=null,d,Q,Ct;n.scale=function(en){return arguments.length?(l(en),ar()):l()},n.translate=function(en){return arguments.length?(u(en),ar()):u()},n.center=function(en){return arguments.length?(a(en),ar()):a()},n.clipExtent=function(en){return arguments.length?(en==null?p=d=Q=Ct=null:(p=+en[0][0],d=+en[0][1],Q=+en[1][0],Ct=+en[1][1]),ar()):p==null?null:[[p,d],[Q,Ct]]};function ar(){var en=K$1*l(),tn=n(X0(n.rotate()).invert([0,0]));return c(p==null?[[tn[0]-en,tn[1]-en],[tn[0]+en,tn[1]+en]]:t===ii?[[Math.max(tn[0]-en,p),d],[Math.min(tn[0]+en,Q),Ct]]:[[p,Math.max(tn[1]-en,d)],[Q,Math.min(tn[1]+en,Ct)]])}return ar()}function Ti(t){return qf((mn+t)/2)}function p1(t,n){var a=B$1(t),l=t===n?q$1(t):uo(a/B$1(n))/uo(Ti(n)/Ti(t)),u=a*ja(Ti(t),l)/l;if(!l)return ii;function c(p,d){u>0?d<-mn+H$1&&(d=-mn+H$1):d>mn-H$1&&(d=mn-H$1);var Q=u/ja(Ti(d),l);return[Q*q$1(l*p),u-Q*B$1(l*p)]}return c.invert=function(p,d){var Q=u-d,Ct=nt(l)*$n(p*p+Q*Q),ar=Bn(p,nn(Q))*nt(Q);return Q*l<0&&(ar-=K$1*nt(p)*nt(Q)),[ar/l,2*ir(ja(u/Ct,1/l))-mn]},c}function p3(){return Vf(p1).scale(109.5).parallels([30,30])}function Wr(t,n){return[t,n]}Wr.invert=Wr;function m3(){return vt(Wr).scale(152.63)}function m1(t,n){var a=B$1(t),l=t===n?q$1(t):(a-B$1(n))/(n-t),u=a/l+t;if(nn(l)<H$1)return Wr;function c(p,d){var Q=u-d,Ct=l*p;return[Q*q$1(Ct),u-Q*B$1(Ct)]}return c.invert=function(p,d){var Q=u-d,Ct=Bn(p,nn(Q))*nt(Q);return Q*l<0&&(Ct-=K$1*nt(p)*nt(Q)),[Ct/l,u-nt(l)*$n(p*p+Q*Q)]},c}function y3(){return Vf(m1).scale(131.154).center([0,13.9389])}var kr=1.340264,Nr=-.081106,Rr=893e-6,Ir=.003796,No=$n(3)/2,_3=12;function Qf(t,n){var a=Un(No*q$1(n)),l=a*a,u=l*l*l;return[t*B$1(a)/(No*(kr+3*Nr*l+u*(7*Rr+9*Ir*l))),a*(kr+Nr*l+u*(Rr+Ir*l))]}Qf.invert=function(t,n){for(var a=n,l=a*a,u=l*l*l,c=0,p,d,Q;c<_3&&(d=a*(kr+Nr*l+u*(Rr+Ir*l))-n,Q=kr+3*Nr*l+u*(7*Rr+9*Ir*l),a-=p=d/Q,l=a*a,u=l*l*l,!(nn(p)<oo));++c);return[No*t*(kr+3*Nr*l+u*(7*Rr+9*Ir*l))/B$1(a),Un(q$1(a)/No)]};function v3$1(){return vt(Qf).scale(177.158)}function Kf(t,n){var a=B$1(n),l=B$1(t)*a;return[a*q$1(t)/l,q$1(n)/l]}Kf.invert=ri(ir);function b3(){return vt(Kf).scale(144.049).clipAngle(60)}function w3(){var t=1,n=0,a=0,l=1,u=1,c=0,p,d,Q=null,Ct,ar,en,tn=1,on=1,cn=ei({point:function(ox,lx){var cx=ax([ox,lx]);this.stream.point(cx[0],cx[1])}}),gn=Xr,Cn,ex;function ix(){return tn=t*l,on=t*u,Cn=ex=null,ax}function ax(ox){var lx=ox[0]*tn,cx=ox[1]*on;if(c){var dx=cx*p-lx*d;lx=lx*p+cx*d,cx=dx}return[lx+n,cx+a]}return ax.invert=function(ox){var lx=ox[0]-n,cx=ox[1]-a;if(c){var dx=cx*p+lx*d;lx=lx*p-cx*d,cx=dx}return[lx/tn,cx/on]},ax.stream=function(ox){return Cn&&ex===ox?Cn:Cn=cn(gn(ex=ox))},ax.postclip=function(ox){return arguments.length?(gn=ox,Q=Ct=ar=en=null,ix()):gn},ax.clipExtent=function(ox){return arguments.length?(gn=ox==null?(Q=Ct=ar=en=null,Xr):oa(Q=+ox[0][0],Ct=+ox[0][1],ar=+ox[1][0],en=+ox[1][1]),ix()):Q==null?null:[[Q,Ct],[ar,en]]},ax.scale=function(ox){return arguments.length?(t=+ox,ix()):t},ax.translate=function(ox){return arguments.length?(n=+ox[0],a=+ox[1],ix()):[n,a]},ax.angle=function(ox){return arguments.length?(c=ox%360*U$1,d=q$1(c),p=B$1(c),ix()):c*an},ax.reflectX=function(ox){return arguments.length?(l=ox?-1:1,ix()):l<0},ax.reflectY=function(ox){return arguments.length?(u=ox?-1:1,ix()):u<0},ax.fitExtent=function(ox,lx){return aa(ax,ox,lx)},ax.fitSize=function(ox,lx){return Xf(ax,ox,lx)},ax.fitWidth=function(ox,lx){return Hf(ax,ox,lx)},ax.fitHeight=function(ox,lx){return jf(ax,ox,lx)},ax}function Jf(t,n){var a=n*n,l=a*a;return[t*(.8707-.131979*a+l*(-.013791+l*(.003971*a-.001529*l))),n*(1.007226+a*(.015085+l*(-.044475+.028874*a-.005916*l)))]}Jf.invert=function(t,n){var a=n,l=25,u;do{var c=a*a,p=c*c;a-=u=(a*(1.007226+c*(.015085+p*(-.044475+.028874*c-.005916*p)))-n)/(1.007226+c*(.015085*3+p*(-.044475*7+.028874*9*c-.005916*11*p)))}while(nn(u)>H$1&&--l>0);return[t/(.8707+(c=a*a)*(-.131979+c*(-.013791+c*c*c*(.003971-.001529*c)))),a]};function x3(){return vt(Jf).scale(175.295)}function nc(t,n){return[B$1(n)*q$1(t),q$1(n)]}nc.invert=ri(Un);function M3(){return vt(nc).scale(249.5).clipAngle(90+H$1)}function tc(t,n){var a=B$1(n),l=1+B$1(t)*a;return[a*q$1(t)/l,q$1(n)/l]}tc.invert=ri(function(t){return 2*ir(t)});function $3(){return vt(tc).scale(250).clipAngle(142)}function ec(t,n){return[uo(qf((mn+n)/2)),-t]}ec.invert=function(t,n){return[-n,2*ir(I0(t))-mn]};function T3(){var t=g1(ec),n=t.center,a=t.rotate;return t.center=function(l){return arguments.length?n([-l[1],l[0]]):(l=n(),[l[1],-l[0]])},t.rotate=function(l){return arguments.length?a([l[0],l[1],l.length>2?l[2]+90:90]):(l=a(),[l[0],l[1],l[2]-90])},a([0,0,90]).scale(159.155)}function A3(t,n){return t.parent===n.parent?1:2}function S3(t){return t.reduce(E3,0)/t.length}function E3(t,n){return t+n.x}function k3(t){return 1+t.reduce(N3,0)}function N3(t,n){return Math.max(t,n.y)}function R3(t){for(var n;n=t.children;)t=n[0];return t}function I3(t){for(var n;n=t.children;)t=n[n.length-1];return t}function C3(){var t=A3,n=1,a=1,l=!1;function u(c){var p,d=0;c.eachAfter(function(tn){var on=tn.children;on?(tn.x=S3(on),tn.y=k3(on)):(tn.x=p?d+=t(tn,p):0,tn.y=0,p=tn)});var Q=R3(c),Ct=I3(c),ar=Q.x-t(Q,Ct)/2,en=Ct.x+t(Ct,Q)/2;return c.eachAfter(l?function(tn){tn.x=(tn.x-c.x)*n,tn.y=(c.y-tn.y)*a}:function(tn){tn.x=(tn.x-ar)/(en-ar)*n,tn.y=(1-(c.y?tn.y/c.y:1))*a})}return u.separation=function(c){return arguments.length?(t=c,u):t},u.size=function(c){return arguments.length?(l=!1,n=+c[0],a=+c[1],u):l?null:[n,a]},u.nodeSize=function(c){return arguments.length?(l=!0,n=+c[0],a=+c[1],u):l?[n,a]:null},u}function P3(t){var n=0,a=t.children,l=a&&a.length;if(!l)n=1;else for(;--l>=0;)n+=a[l].value;t.value=n}function D3(){return this.eachAfter(P3)}function z3(t,n){let a=-1;for(const l of this)t.call(n,l,++a,this);return this}function O3(t,n){for(var a=this,l=[a],u,c,p=-1;a=l.pop();)if(t.call(n,a,++p,this),u=a.children)for(c=u.length-1;c>=0;--c)l.push(u[c]);return this}function Y3(t,n){for(var a=this,l=[a],u=[],c,p,d,Q=-1;a=l.pop();)if(u.push(a),c=a.children)for(p=0,d=c.length;p<d;++p)l.push(c[p]);for(;a=u.pop();)t.call(n,a,++Q,this);return this}function F3(t,n){let a=-1;for(const l of this)if(t.call(n,l,++a,this))return l}function q3(t){return this.eachAfter(function(n){for(var a=+t(n.data)||0,l=n.children,u=l&&l.length;--u>=0;)a+=l[u].value;n.value=a})}function L3(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function B3(t){for(var n=this,a=U3(n,t),l=[n];n!==a;)n=n.parent,l.push(n);for(var u=l.length;t!==a;)l.splice(u,0,t),t=t.parent;return l}function U3(t,n){if(t===n)return t;var a=t.ancestors(),l=n.ancestors(),u=null;for(t=a.pop(),n=l.pop();t===n;)u=t,t=a.pop(),n=l.pop();return u}function X3(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function H3(){return Array.from(this)}function j3(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function W3(){var t=this,n=[];return t.each(function(a){a!==t&&n.push({source:a.parent,target:a})}),n}function*V3(){var t=this,n,a=[t],l,u,c;do for(n=a.reverse(),a=[];t=n.pop();)if(yield t,l=t.children)for(u=0,c=l.length;u<c;++u)a.push(l[u]);while(a.length)}function rc(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=Q3)):n===void 0&&(n=Z3);for(var a=new he$1(t),l,u=[a],c,p,d,Q;l=u.pop();)if((p=n(l.data))&&(Q=(p=Array.from(p)).length))for(l.children=p,d=Q-1;d>=0;--d)u.push(c=p[d]=new he$1(p[d])),c.parent=l,c.depth=l.depth+1;return a.eachBefore(y1)}function G3(){return rc(this).eachBefore(K3)}function Z3(t){return t.children}function Q3(t){return Array.isArray(t)?t[1]:null}function K3(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function y1(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function he$1(t){this.data=t,this.depth=this.height=0,this.parent=null}he$1.prototype=rc.prototype={constructor:he$1,count:D3,each:z3,eachAfter:Y3,eachBefore:O3,find:F3,sum:q3,sort:L3,path:B3,ancestors:X3,descendants:H3,leaves:j3,links:W3,copy:G3,[Symbol.iterator]:V3};function Ui(t){return t==null?null:_1(t)}function _1(t){if(typeof t!="function")throw new Error;return t}function Kt(){return 0}function Re(t){return function(){return t}}const J3=1664525,n6=1013904223,rl=4294967296;function ic(){let t=1;return()=>(t=(J3*t+n6)%rl)/rl}function t6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function e6(t,n){let a=t.length,l,u;for(;a;)u=n()*a--|0,l=t[a],t[a]=t[u],t[u]=l;return t}function r6(t){return v1$1(t,ic())}function v1$1(t,n){for(var a=0,l=(t=e6(Array.from(t),n)).length,u=[],c,p;a<l;)c=t[a],p&&b1(p,c)?++a:(p=o6(u=i6(u,c)),a=0);return p}function i6(t,n){var a,l;if(Qa(n,t))return[n];for(a=0;a<t.length;++a)if(Ai(n,t[a])&&Qa($r(t[a],n),t))return[t[a],n];for(a=0;a<t.length-1;++a)for(l=a+1;l<t.length;++l)if(Ai($r(t[a],t[l]),n)&&Ai($r(t[a],n),t[l])&&Ai($r(t[l],n),t[a])&&Qa(w1(t[a],t[l],n),t))return[t[a],t[l],n];throw new Error}function Ai(t,n){var a=t.r-n.r,l=n.x-t.x,u=n.y-t.y;return a<0||a*a<l*l+u*u}function b1(t,n){var a=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,l=n.x-t.x,u=n.y-t.y;return a>0&&a*a>l*l+u*u}function Qa(t,n){for(var a=0;a<n.length;++a)if(!b1(t,n[a]))return!1;return!0}function o6(t){switch(t.length){case 1:return a6(t[0]);case 2:return $r(t[0],t[1]);case 3:return w1(t[0],t[1],t[2])}}function a6(t){return{x:t.x,y:t.y,r:t.r}}function $r(t,n){var a=t.x,l=t.y,u=t.r,c=n.x,p=n.y,d=n.r,Q=c-a,Ct=p-l,ar=d-u,en=Math.sqrt(Q*Q+Ct*Ct);return{x:(a+c+Q/en*ar)/2,y:(l+p+Ct/en*ar)/2,r:(en+u+d)/2}}function w1(t,n,a){var l=t.x,u=t.y,c=t.r,p=n.x,d=n.y,Q=n.r,Ct=a.x,ar=a.y,en=a.r,tn=l-p,on=l-Ct,cn=u-d,gn=u-ar,Cn=Q-c,ex=en-c,ix=l*l+u*u-c*c,ax=ix-p*p-d*d+Q*Q,ox=ix-Ct*Ct-ar*ar+en*en,lx=on*cn-tn*gn,cx=(cn*ox-gn*ax)/(lx*2)-l,dx=(gn*Cn-cn*ex)/lx,hx=(on*ax-tn*ox)/(lx*2)-u,fx=(tn*ex-on*Cn)/lx,ux=dx*dx+fx*fx-1,gx=2*(c+cx*dx+hx*fx),yx=cx*cx+hx*hx-c*c,_x=-(Math.abs(ux)>1e-6?(gx+Math.sqrt(gx*gx-4*ux*yx))/(2*ux):yx/gx);return{x:l+cx+dx*_x,y:u+hx+fx*_x,r:_x}}function il(t,n,a){var l=t.x-n.x,u,c,p=t.y-n.y,d,Q,Ct=l*l+p*p;Ct?(c=n.r+a.r,c*=c,Q=t.r+a.r,Q*=Q,c>Q?(u=(Ct+Q-c)/(2*Ct),d=Math.sqrt(Math.max(0,Q/Ct-u*u)),a.x=t.x-u*l-d*p,a.y=t.y-u*p+d*l):(u=(Ct+c-Q)/(2*Ct),d=Math.sqrt(Math.max(0,c/Ct-u*u)),a.x=n.x+u*l-d*p,a.y=n.y+u*p+d*l)):(a.x=n.x+a.r,a.y=n.y)}function ol(t,n){var a=t.r+n.r-1e-6,l=n.x-t.x,u=n.y-t.y;return a>0&&a*a>l*l+u*u}function al(t){var n=t._,a=t.next._,l=n.r+a.r,u=(n.x*a.r+a.x*n.r)/l,c=(n.y*a.r+a.y*n.r)/l;return u*u+c*c}function Si(t){this._=t,this.next=null,this.previous=null}function x1(t,n){if(!(c=(t=t6(t)).length))return 0;var a,l,u,c,p,d,Q,Ct,ar,en,tn;if(a=t[0],a.x=0,a.y=0,!(c>1))return a.r;if(l=t[1],a.x=-l.r,l.x=a.r,l.y=0,!(c>2))return a.r+l.r;il(l,a,u=t[2]),a=new Si(a),l=new Si(l),u=new Si(u),a.next=u.previous=l,l.next=a.previous=u,u.next=l.previous=a;e:for(Q=3;Q<c;++Q){il(a._,l._,u=t[Q]),u=new Si(u),Ct=l.next,ar=a.previous,en=l._.r,tn=a._.r;do if(en<=tn){if(ol(Ct._,u._)){l=Ct,a.next=l,l.previous=a,--Q;continue e}en+=Ct._.r,Ct=Ct.next}else{if(ol(ar._,u._)){a=ar,a.next=l,l.previous=a,--Q;continue e}tn+=ar._.r,ar=ar.previous}while(Ct!==ar.next);for(u.previous=a,u.next=l,a.next=l.previous=l=u,p=al(a);(u=u.next)!==l;)(d=al(u))<p&&(a=u,p=d);l=a.next}for(a=[l._],u=l;(u=u.next)!==l;)a.push(u._);for(u=v1$1(a,n),Q=0;Q<c;++Q)a=t[Q],a.x-=u.x,a.y-=u.y;return u.r}function u6(t){return x1(t,ic()),t}function f6(t){return Math.sqrt(t.value)}function c6(){var t=null,n=1,a=1,l=Kt;function u(c){const p=ic();return c.x=n/2,c.y=a/2,t?c.eachBefore(ul(t)).eachAfter(Ka(l,.5,p)).eachBefore(fl(1)):c.eachBefore(ul(f6)).eachAfter(Ka(Kt,1,p)).eachAfter(Ka(l,c.r/Math.min(n,a),p)).eachBefore(fl(Math.min(n,a)/(2*c.r))),c}return u.radius=function(c){return arguments.length?(t=Ui(c),u):t},u.size=function(c){return arguments.length?(n=+c[0],a=+c[1],u):[n,a]},u.padding=function(c){return arguments.length?(l=typeof c=="function"?c:Re(+c),u):l},u}function ul(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Ka(t,n,a){return function(l){if(u=l.children){var u,c,p=u.length,d=t(l)*n||0,Q;if(d)for(c=0;c<p;++c)u[c].r+=d;if(Q=x1(u,a),d)for(c=0;c<p;++c)u[c].r-=d;l.r=Q+d}}}function fl(t){return function(n){var a=n.parent;n.r*=t,a&&(n.x=a.x+t*n.x,n.y=a.y+t*n.y)}}function M1(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function oi(t,n,a,l,u){for(var c=t.children,p,d=-1,Q=c.length,Ct=t.value&&(l-n)/t.value;++d<Q;)p=c[d],p.y0=a,p.y1=u,p.x0=n,p.x1=n+=p.value*Ct}function s6(){var t=1,n=1,a=0,l=!1;function u(p){var d=p.height+1;return p.x0=p.y0=a,p.x1=t,p.y1=n/d,p.eachBefore(c(n,d)),l&&p.eachBefore(M1),p}function c(p,d){return function(Q){Q.children&&oi(Q,Q.x0,p*(Q.depth+1)/d,Q.x1,p*(Q.depth+2)/d);var Ct=Q.x0,ar=Q.y0,en=Q.x1-a,tn=Q.y1-a;en<Ct&&(Ct=en=(Ct+en)/2),tn<ar&&(ar=tn=(ar+tn)/2),Q.x0=Ct,Q.y0=ar,Q.x1=en,Q.y1=tn}}return u.round=function(p){return arguments.length?(l=!!p,u):l},u.size=function(p){return arguments.length?(t=+p[0],n=+p[1],u):[t,n]},u.padding=function(p){return arguments.length?(a=+p,u):a},u}var l6={depth:-1},cl={},Ja={};function h6(t){return t.id}function d6(t){return t.parentId}function g6(){var t=h6,n=d6,a;function l(u){var c=Array.from(u),p=t,d=n,Q,Ct,ar,en,tn,on,cn,gn,Cn=new Map;if(a!=null){const ex=c.map((ox,lx)=>p6(a(ox,lx,u))),ix=ex.map(sl),ax=new Set(ex).add("");for(const ox of ix)ax.has(ox)||(ax.add(ox),ex.push(ox),ix.push(sl(ox)),c.push(Ja));p=(ox,lx)=>ex[lx],d=(ox,lx)=>ix[lx]}for(ar=0,Q=c.length;ar<Q;++ar)Ct=c[ar],on=c[ar]=new he$1(Ct),(cn=p(Ct,ar,u))!=null&&(cn+="")&&(gn=on.id=cn,Cn.set(gn,Cn.has(gn)?cl:on)),(cn=d(Ct,ar,u))!=null&&(cn+="")&&(on.parent=cn);for(ar=0;ar<Q;++ar)if(on=c[ar],cn=on.parent){if(tn=Cn.get(cn),!tn)throw new Error("missing: "+cn);if(tn===cl)throw new Error("ambiguous: "+cn);tn.children?tn.children.push(on):tn.children=[on],on.parent=tn}else{if(en)throw new Error("multiple roots");en=on}if(!en)throw new Error("no root");if(a!=null){for(;en.data===Ja&&en.children.length===1;)en=en.children[0],--Q;for(let ex=c.length-1;ex>=0&&(on=c[ex],on.data===Ja);--ex)on.data=null}if(en.parent=l6,en.eachBefore(function(ex){ex.depth=ex.parent.depth+1,--Q}).eachBefore(y1),en.parent=null,Q>0)throw new Error("cycle");return en}return l.id=function(u){return arguments.length?(t=Ui(u),l):t},l.parentId=function(u){return arguments.length?(n=Ui(u),l):n},l.path=function(u){return arguments.length?(a=Ui(u),l):a},l}function p6(t){t=`${t}`;let n=t.length;return rf(t,n-1)&&!rf(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function sl(t){let n=t.length;if(n<2)return"";for(;--n>1&&!rf(t,n););return t.slice(0,n)}function rf(t,n){if(t[n]==="/"){let a=0;for(;n>0&&t[--n]==="\\";)++a;if((a&1)===0)return!0}return!1}function m6(t,n){return t.parent===n.parent?1:2}function nu(t){var n=t.children;return n?n[0]:t.t}function tu(t){var n=t.children;return n?n[n.length-1]:t.t}function y6(t,n,a){var l=a/(n.i-t.i);n.c-=l,n.s+=a,t.c+=l,n.z+=a,n.m+=a}function _6(t){for(var n=0,a=0,l=t.children,u=l.length,c;--u>=0;)c=l[u],c.z+=n,c.m+=n,n+=c.s+(a+=c.c)}function v6(t,n,a){return t.a.parent===n.parent?t.a:a}function Xi(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Xi.prototype=Object.create(he$1.prototype);function b6(t){for(var n=new Xi(t,0),a,l=[n],u,c,p,d;a=l.pop();)if(c=a._.children)for(a.children=new Array(d=c.length),p=d-1;p>=0;--p)l.push(u=a.children[p]=new Xi(c[p],p)),u.parent=a;return(n.parent=new Xi(null,0)).children=[n],n}function w6(){var t=m6,n=1,a=1,l=null;function u(Ct){var ar=b6(Ct);if(ar.eachAfter(c),ar.parent.m=-ar.z,ar.eachBefore(p),l)Ct.eachBefore(Q);else{var en=Ct,tn=Ct,on=Ct;Ct.eachBefore(function(ix){ix.x<en.x&&(en=ix),ix.x>tn.x&&(tn=ix),ix.depth>on.depth&&(on=ix)});var cn=en===tn?1:t(en,tn)/2,gn=cn-en.x,Cn=n/(tn.x+cn+gn),ex=a/(on.depth||1);Ct.eachBefore(function(ix){ix.x=(ix.x+gn)*Cn,ix.y=ix.depth*ex})}return Ct}function c(Ct){var ar=Ct.children,en=Ct.parent.children,tn=Ct.i?en[Ct.i-1]:null;if(ar){_6(Ct);var on=(ar[0].z+ar[ar.length-1].z)/2;tn?(Ct.z=tn.z+t(Ct._,tn._),Ct.m=Ct.z-on):Ct.z=on}else tn&&(Ct.z=tn.z+t(Ct._,tn._));Ct.parent.A=d(Ct,tn,Ct.parent.A||en[0])}function p(Ct){Ct._.x=Ct.z+Ct.parent.m,Ct.m+=Ct.parent.m}function d(Ct,ar,en){if(ar){for(var tn=Ct,on=Ct,cn=ar,gn=tn.parent.children[0],Cn=tn.m,ex=on.m,ix=cn.m,ax=gn.m,ox;cn=tu(cn),tn=nu(tn),cn&&tn;)gn=nu(gn),on=tu(on),on.a=Ct,ox=cn.z+ix-tn.z-Cn+t(cn._,tn._),ox>0&&(y6(v6(cn,Ct,en),Ct,ox),Cn+=ox,ex+=ox),ix+=cn.m,Cn+=tn.m,ax+=gn.m,ex+=on.m;cn&&!tu(on)&&(on.t=cn,on.m+=ix-ex),tn&&!nu(gn)&&(gn.t=tn,gn.m+=Cn-ax,en=Ct)}return en}function Q(Ct){Ct.x*=n,Ct.y=Ct.depth*a}return u.separation=function(Ct){return arguments.length?(t=Ct,u):t},u.size=function(Ct){return arguments.length?(l=!1,n=+Ct[0],a=+Ct[1],u):l?null:[n,a]},u.nodeSize=function(Ct){return arguments.length?(l=!0,n=+Ct[0],a=+Ct[1],u):l?[n,a]:null},u}function ua(t,n,a,l,u){for(var c=t.children,p,d=-1,Q=c.length,Ct=t.value&&(u-a)/t.value;++d<Q;)p=c[d],p.x0=n,p.x1=l,p.y0=a,p.y1=a+=p.value*Ct}var $1=(1+Math.sqrt(5))/2;function T1(t,n,a,l,u,c){for(var p=[],d=n.children,Q,Ct,ar=0,en=0,tn=d.length,on,cn,gn=n.value,Cn,ex,ix,ax,ox,lx,cx;ar<tn;){on=u-a,cn=c-l;do Cn=d[en++].value;while(!Cn&&en<tn);for(ex=ix=Cn,lx=Math.max(cn/on,on/cn)/(gn*t),cx=Cn*Cn*lx,ox=Math.max(ix/cx,cx/ex);en<tn;++en){if(Cn+=Ct=d[en].value,Ct<ex&&(ex=Ct),Ct>ix&&(ix=Ct),cx=Cn*Cn*lx,ax=Math.max(ix/cx,cx/ex),ax>ox){Cn-=Ct;break}ox=ax}p.push(Q={value:Cn,dice:on<cn,children:d.slice(ar,en)}),Q.dice?oi(Q,a,l,u,gn?l+=cn*Cn/gn:c):ua(Q,a,l,gn?a+=on*Cn/gn:u,c),gn-=Cn,ar=en}return p}const A1=function t(n){function a(l,u,c,p,d){T1(n,l,u,c,p,d)}return a.ratio=function(l){return t((l=+l)>1?l:1)},a}($1);function x6(){var t=A1,n=!1,a=1,l=1,u=[0],c=Kt,p=Kt,d=Kt,Q=Kt,Ct=Kt;function ar(tn){return tn.x0=tn.y0=0,tn.x1=a,tn.y1=l,tn.eachBefore(en),u=[0],n&&tn.eachBefore(M1),tn}function en(tn){var on=u[tn.depth],cn=tn.x0+on,gn=tn.y0+on,Cn=tn.x1-on,ex=tn.y1-on;Cn<cn&&(cn=Cn=(cn+Cn)/2),ex<gn&&(gn=ex=(gn+ex)/2),tn.x0=cn,tn.y0=gn,tn.x1=Cn,tn.y1=ex,tn.children&&(on=u[tn.depth+1]=c(tn)/2,cn+=Ct(tn)-on,gn+=p(tn)-on,Cn-=d(tn)-on,ex-=Q(tn)-on,Cn<cn&&(cn=Cn=(cn+Cn)/2),ex<gn&&(gn=ex=(gn+ex)/2),t(tn,cn,gn,Cn,ex))}return ar.round=function(tn){return arguments.length?(n=!!tn,ar):n},ar.size=function(tn){return arguments.length?(a=+tn[0],l=+tn[1],ar):[a,l]},ar.tile=function(tn){return arguments.length?(t=_1(tn),ar):t},ar.padding=function(tn){return arguments.length?ar.paddingInner(tn).paddingOuter(tn):ar.paddingInner()},ar.paddingInner=function(tn){return arguments.length?(c=typeof tn=="function"?tn:Re(+tn),ar):c},ar.paddingOuter=function(tn){return arguments.length?ar.paddingTop(tn).paddingRight(tn).paddingBottom(tn).paddingLeft(tn):ar.paddingTop()},ar.paddingTop=function(tn){return arguments.length?(p=typeof tn=="function"?tn:Re(+tn),ar):p},ar.paddingRight=function(tn){return arguments.length?(d=typeof tn=="function"?tn:Re(+tn),ar):d},ar.paddingBottom=function(tn){return arguments.length?(Q=typeof tn=="function"?tn:Re(+tn),ar):Q},ar.paddingLeft=function(tn){return arguments.length?(Ct=typeof tn=="function"?tn:Re(+tn),ar):Ct},ar}function M6(t,n,a,l,u){var c=t.children,p,d=c.length,Q,Ct=new Array(d+1);for(Ct[0]=Q=p=0;p<d;++p)Ct[p+1]=Q+=c[p].value;ar(0,d,t.value,n,a,l,u);function ar(en,tn,on,cn,gn,Cn,ex){if(en>=tn-1){var ix=c[en];ix.x0=cn,ix.y0=gn,ix.x1=Cn,ix.y1=ex;return}for(var ax=Ct[en],ox=on/2+ax,lx=en+1,cx=tn-1;lx<cx;){var dx=lx+cx>>>1;Ct[dx]<ox?lx=dx+1:cx=dx}ox-Ct[lx-1]<Ct[lx]-ox&&en+1<lx&&--lx;var hx=Ct[lx]-ax,fx=on-hx;if(Cn-cn>ex-gn){var ux=on?(cn*fx+Cn*hx)/on:Cn;ar(en,lx,hx,cn,gn,ux,ex),ar(lx,tn,fx,ux,gn,Cn,ex)}else{var gx=on?(gn*fx+ex*hx)/on:ex;ar(en,lx,hx,cn,gn,Cn,gx),ar(lx,tn,fx,cn,gx,Cn,ex)}}}function $6(t,n,a,l,u){(t.depth&1?ua:oi)(t,n,a,l,u)}const T6=function t(n){function a(l,u,c,p,d){if((Q=l._squarify)&&Q.ratio===n)for(var Q,Ct,ar,en,tn=-1,on,cn=Q.length,gn=l.value;++tn<cn;){for(Ct=Q[tn],ar=Ct.children,en=Ct.value=0,on=ar.length;en<on;++en)Ct.value+=ar[en].value;Ct.dice?oi(Ct,u,c,p,gn?c+=(d-c)*Ct.value/gn:d):ua(Ct,u,c,gn?u+=(p-u)*Ct.value/gn:p,d),gn-=Ct.value}else l._squarify=Q=T1(n,l,u,c,p,d),Q.ratio=n}return a.ratio=function(l){return t((l=+l)>1?l:1)},a}($1);function A6(t){for(var n=-1,a=t.length,l,u=t[a-1],c=0;++n<a;)l=u,u=t[n],c+=l[1]*u[0]-l[0]*u[1];return c/2}function S6(t){for(var n=-1,a=t.length,l=0,u=0,c,p=t[a-1],d,Q=0;++n<a;)c=p,p=t[n],Q+=d=c[0]*p[1]-p[0]*c[1],l+=(c[0]+p[0])*d,u+=(c[1]+p[1])*d;return Q*=3,[l/Q,u/Q]}function E6(t,n,a){return(n[0]-t[0])*(a[1]-t[1])-(n[1]-t[1])*(a[0]-t[0])}function k6(t,n){return t[0]-n[0]||t[1]-n[1]}function ll(t){const n=t.length,a=[0,1];let l=2,u;for(u=2;u<n;++u){for(;l>1&&E6(t[a[l-2]],t[a[l-1]],t[u])<=0;)--l;a[l++]=u}return a.slice(0,l)}function N6(t){if((a=t.length)<3)return null;var n,a,l=new Array(a),u=new Array(a);for(n=0;n<a;++n)l[n]=[+t[n][0],+t[n][1],n];for(l.sort(k6),n=0;n<a;++n)u[n]=[l[n][0],-l[n][1]];var c=ll(l),p=ll(u),d=p[0]===c[0],Q=p[p.length-1]===c[c.length-1],Ct=[];for(n=c.length-1;n>=0;--n)Ct.push(t[l[c[n]][2]]);for(n=+d;n<p.length-Q;++n)Ct.push(t[l[p[n]][2]]);return Ct}function R6(t,n){for(var a=t.length,l=t[a-1],u=n[0],c=n[1],p=l[0],d=l[1],Q,Ct,ar=!1,en=0;en<a;++en)l=t[en],Q=l[0],Ct=l[1],Ct>c!=d>c&&u<(p-Q)*(c-Ct)/(d-Ct)+Q&&(ar=!ar),p=Q,d=Ct;return ar}function I6(t){for(var n=-1,a=t.length,l=t[a-1],u,c,p=l[0],d=l[1],Q=0;++n<a;)u=p,c=d,l=t[n],p=l[0],d=l[1],u-=p,c-=d,Q+=Math.hypot(u,c);return Q}const An=Math.random,C6=function t(n){function a(l,u){return l=l==null?0:+l,u=u==null?1:+u,arguments.length===1?(u=l,l=0):u-=l,function(){return n()*u+l}}return a.source=t,a}(An),P6=function t(n){function a(l,u){return arguments.length<2&&(u=l,l=0),l=Math.floor(l),u=Math.floor(u)-l,function(){return Math.floor(n()*u+l)}}return a.source=t,a}(An),oc=function t(n){function a(l,u){var c,p;return l=l==null?0:+l,u=u==null?1:+u,function(){var d;if(c!=null)d=c,c=null;else do c=n()*2-1,d=n()*2-1,p=c*c+d*d;while(!p||p>1);return l+u*d*Math.sqrt(-2*Math.log(p)/p)}}return a.source=t,a}(An),D6=function t(n){var a=oc.source(n);function l(){var u=a.apply(this,arguments);return function(){return Math.exp(u())}}return l.source=t,l}(An),S1=function t(n){function a(l){return(l=+l)<=0?()=>0:function(){for(var u=0,c=l;c>1;--c)u+=n();return u+c*n()}}return a.source=t,a}(An),z6=function t(n){var a=S1.source(n);function l(u){if((u=+u)==0)return n;var c=a(u);return function(){return c()/u}}return l.source=t,l}(An),O6=function t(n){function a(l){return function(){return-Math.log1p(-n())/l}}return a.source=t,a}(An),Y6=function t(n){function a(l){if((l=+l)<0)throw new RangeError("invalid alpha");return l=1/-l,function(){return Math.pow(1-n(),l)}}return a.source=t,a}(An),F6=function t(n){function a(l){if((l=+l)<0||l>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+l)}}return a.source=t,a}(An),E1=function t(n){function a(l){if((l=+l)<0||l>1)throw new RangeError("invalid p");return l===0?()=>1/0:l===1?()=>1:(l=Math.log1p(-l),function(){return 1+Math.floor(Math.log1p(-n())/l)})}return a.source=t,a}(An),ac=function t(n){var a=oc.source(n)();function l(u,c){if((u=+u)<0)throw new RangeError("invalid k");if(u===0)return()=>0;if(c=c==null?1:+c,u===1)return()=>-Math.log1p(-n())*c;var p=(u<1?u+1:u)-1/3,d=1/(3*Math.sqrt(p)),Q=u<1?()=>Math.pow(n(),1/u):()=>1;return function(){do{do var Ct=a(),ar=1+d*Ct;while(ar<=0);ar*=ar*ar;var en=1-n()}while(en>=1-.0331*Ct*Ct*Ct*Ct&&Math.log(en)>=.5*Ct*Ct+p*(1-ar+Math.log(ar)));return p*ar*Q()*c}}return l.source=t,l}(An),k1=function t(n){var a=ac.source(n);function l(u,c){var p=a(u),d=a(c);return function(){var Q=p();return Q===0?0:Q/(Q+d())}}return l.source=t,l}(An),N1=function t(n){var a=E1.source(n),l=k1.source(n);function u(c,p){return c=+c,(p=+p)>=1?()=>c:p<=0?()=>0:function(){for(var d=0,Q=c,Ct=p;Q*Ct>16&&Q*(1-Ct)>16;){var ar=Math.floor((Q+1)*Ct),en=l(ar,Q-ar+1)();en<=Ct?(d+=ar,Q-=ar,Ct=(Ct-en)/(1-en)):(Q=ar-1,Ct/=en)}for(var tn=Ct<.5,on=tn?Ct:1-Ct,cn=a(on),gn=cn(),Cn=0;gn<=Q;++Cn)gn+=cn();return d+(tn?Cn:Q-Cn)}}return u.source=t,u}(An),q6=function t(n){function a(l,u,c){var p;return(l=+l)==0?p=d=>-Math.log(d):(l=1/l,p=d=>Math.pow(d,l)),u=u==null?0:+u,c=c==null?1:+c,function(){return u+c*p(-Math.log1p(-n()))}}return a.source=t,a}(An),L6=function t(n){function a(l,u){return l=l==null?0:+l,u=u==null?1:+u,function(){return l+u*Math.tan(Math.PI*n())}}return a.source=t,a}(An),B6=function t(n){function a(l,u){return l=l==null?0:+l,u=u==null?1:+u,function(){var c=n();return l+u*Math.log(c/(1-c))}}return a.source=t,a}(An),U6=function t(n){var a=ac.source(n),l=N1.source(n);function u(c){return function(){for(var p=0,d=c;d>16;){var Q=Math.floor(.875*d),Ct=a(Q)();if(Ct>d)return p+l(Q-1,d/Ct)();p+=Q,d-=Ct}for(var ar=-Math.log1p(-n()),en=0;ar<=d;++en)ar-=Math.log1p(-n());return p+en}}return u.source=t,u}(An),X6=1664525,H6=1013904223,hl=1/4294967296;function j6(t=Math.random()){let n=(0<=t&&t<1?t/hl:Math.abs(t))|0;return()=>(n=X6*n+H6|0,hl*(n>>>0))}function et(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function It(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const of=Symbol("implicit");function uc(){var t=new Cr,n=[],a=[],l=of;function u(c){let p=t.get(c);if(p===void 0){if(l!==of)return l;t.set(c,p=n.push(c)-1)}return a[p%a.length]}return u.domain=function(c){if(!arguments.length)return n.slice();n=[],t=new Cr;for(const p of c)t.has(p)||t.set(p,n.push(p)-1);return u},u.range=function(c){return arguments.length?(a=Array.from(c),u):a.slice()},u.unknown=function(c){return arguments.length?(l=c,u):l},u.copy=function(){return uc(n,a).unknown(l)},et.apply(u,arguments),u}function fc(){var t=uc().unknown(void 0),n=t.domain,a=t.range,l=0,u=1,c,p,d=!1,Q=0,Ct=0,ar=.5;delete t.unknown;function en(){var tn=n().length,on=u<l,cn=on?u:l,gn=on?l:u;c=(gn-cn)/Math.max(1,tn-Q+Ct*2),d&&(c=Math.floor(c)),cn+=(gn-cn-c*(tn-Q))*ar,p=c*(1-Q),d&&(cn=Math.round(cn),p=Math.round(p));var Cn=zt(tn).map(function(ex){return cn+c*ex});return a(on?Cn.reverse():Cn)}return t.domain=function(tn){return arguments.length?(n(tn),en()):n()},t.range=function(tn){return arguments.length?([l,u]=tn,l=+l,u=+u,en()):[l,u]},t.rangeRound=function(tn){return[l,u]=tn,l=+l,u=+u,d=!0,en()},t.bandwidth=function(){return p},t.step=function(){return c},t.round=function(tn){return arguments.length?(d=!!tn,en()):d},t.padding=function(tn){return arguments.length?(Q=Math.min(1,Ct=+tn),en()):Q},t.paddingInner=function(tn){return arguments.length?(Q=Math.min(1,tn),en()):Q},t.paddingOuter=function(tn){return arguments.length?(Ct=+tn,en()):Ct},t.align=function(tn){return arguments.length?(ar=Math.max(0,Math.min(1,tn)),en()):ar},t.copy=function(){return fc(n(),[l,u]).round(d).paddingInner(Q).paddingOuter(Ct).align(ar)},et.apply(en(),arguments)}function R1(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return R1(n())},t}function W6(){return R1(fc.apply(null,arguments).paddingInner(1))}function V6(t){return function(){return t}}function Ro(t){return+t}var dl=[0,1];function Fn(t){return t}function af(t,n){return(n-=t=+t)?function(a){return(a-t)/n}:V6(isNaN(n)?NaN:.5)}function G6(t,n){var a;return t>n&&(a=t,t=n,n=a),function(l){return Math.max(t,Math.min(n,l))}}function Z6(t,n,a){var l=t[0],u=t[1],c=n[0],p=n[1];return u<l?(l=af(u,l),c=a(p,c)):(l=af(l,u),c=a(c,p)),function(d){return c(l(d))}}function Q6(t,n,a){var l=Math.min(t.length,n.length)-1,u=new Array(l),c=new Array(l),p=-1;for(t[l]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++p<l;)u[p]=af(t[p],t[p+1]),c[p]=a(n[p],n[p+1]);return function(d){var Q=Ft(t,d,1,l)-1;return c[Q](u[Q](d))}}function ai(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fa(){var t=dl,n=dl,a=Ht,l,u,c,p=Fn,d,Q,Ct;function ar(){var tn=Math.min(t.length,n.length);return p!==Fn&&(p=G6(t[0],t[tn-1])),d=tn>2?Q6:Z6,Q=Ct=null,en}function en(tn){return tn==null||isNaN(tn=+tn)?c:(Q||(Q=d(t.map(l),n,a)))(l(p(tn)))}return en.invert=function(tn){return p(u((Ct||(Ct=d(n,t.map(l),Kn)))(tn)))},en.domain=function(tn){return arguments.length?(t=Array.from(tn,Ro),ar()):t.slice()},en.range=function(tn){return arguments.length?(n=Array.from(tn),ar()):n.slice()},en.rangeRound=function(tn){return n=Array.from(tn),a=Vo,ar()},en.clamp=function(tn){return arguments.length?(p=tn?!0:Fn,ar()):p!==Fn},en.interpolate=function(tn){return arguments.length?(a=tn,ar()):a},en.unknown=function(tn){return arguments.length?(c=tn,en):c},function(tn,on){return l=tn,u=on,ar()}}function cc(){return fa()(Fn,Fn)}function I1(t,n,a,l){var u=Wi(t,n,a),c;switch(l=We(l??",f"),l.type){case"s":{var p=Math.max(Math.abs(t),Math.abs(n));return l.precision==null&&!isNaN(c=N0(u,p))&&(l.precision=c),Ff(l,p)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(c=R0(u,Math.max(Math.abs(t),Math.abs(n))))&&(l.precision=c-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(c=k0(u))&&(l.precision=c-(l.type==="%")*2);break}}return ia(l)}function jt(t){var n=t.domain;return t.ticks=function(a){var l=n();return oe$1(l[0],l[l.length-1],a??10)},t.tickFormat=function(a,l){var u=n();return I1(u[0],u[u.length-1],a??10,l)},t.nice=function(a){a==null&&(a=10);var l=n(),u=0,c=l.length-1,p=l[u],d=l[c],Q,Ct,ar=10;for(d<p&&(Ct=p,p=d,d=Ct,Ct=u,u=c,c=Ct);ar-- >0;){if(Ct=ae$1(p,d,a),Ct===Q)return l[u]=p,l[c]=d,n(l);if(Ct>0)p=Math.floor(p/Ct)*Ct,d=Math.ceil(d/Ct)*Ct;else if(Ct<0)p=Math.ceil(p*Ct)/Ct,d=Math.floor(d*Ct)/Ct;else break;Q=Ct}return t},t}function C1(){var t=cc();return t.copy=function(){return ai(t,C1())},et.apply(t,arguments),jt(t)}function P1(t){var n;function a(l){return l==null||isNaN(l=+l)?n:l}return a.invert=a,a.domain=a.range=function(l){return arguments.length?(t=Array.from(l,Ro),a):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return P1(t).unknown(n)},t=arguments.length?Array.from(t,Ro):[0,1],jt(a)}function D1(t,n){t=t.slice();var a=0,l=t.length-1,u=t[a],c=t[l],p;return c<u&&(p=a,a=l,l=p,p=u,u=c,c=p),t[a]=n.floor(u),t[l]=n.ceil(c),t}function gl(t){return Math.log(t)}function pl(t){return Math.exp(t)}function K6(t){return-Math.log(-t)}function J6(t){return-Math.exp(-t)}function n5(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t5(t){return t===10?n5:t===Math.E?Math.exp:n=>Math.pow(t,n)}function e5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function ml(t){return(n,a)=>-t(-n,a)}function sc(t){const n=t(gl,pl),a=n.domain;let l=10,u,c;function p(){return u=e5(l),c=t5(l),a()[0]<0?(u=ml(u),c=ml(c),t(K6,J6)):t(gl,pl),n}return n.base=function(d){return arguments.length?(l=+d,p()):l},n.domain=function(d){return arguments.length?(a(d),p()):a()},n.ticks=d=>{const Q=a();let Ct=Q[0],ar=Q[Q.length-1];const en=ar<Ct;en&&([Ct,ar]=[ar,Ct]);let tn=u(Ct),on=u(ar),cn,gn;const Cn=d==null?10:+d;let ex=[];if(!(l%1)&&on-tn<Cn){if(tn=Math.floor(tn),on=Math.ceil(on),Ct>0){for(;tn<=on;++tn)for(cn=1;cn<l;++cn)if(gn=tn<0?cn/c(-tn):cn*c(tn),!(gn<Ct)){if(gn>ar)break;ex.push(gn)}}else for(;tn<=on;++tn)for(cn=l-1;cn>=1;--cn)if(gn=tn>0?cn/c(-tn):cn*c(tn),!(gn<Ct)){if(gn>ar)break;ex.push(gn)}ex.length*2<Cn&&(ex=oe$1(Ct,ar,Cn))}else ex=oe$1(tn,on,Math.min(on-tn,Cn)).map(c);return en?ex.reverse():ex},n.tickFormat=(d,Q)=>{if(d==null&&(d=10),Q==null&&(Q=l===10?"s":","),typeof Q!="function"&&(!(l%1)&&(Q=We(Q)).precision==null&&(Q.trim=!0),Q=ia(Q)),d===1/0)return Q;const Ct=Math.max(1,l*d/n.ticks().length);return ar=>{let en=ar/c(Math.round(u(ar)));return en*l<l-.5&&(en*=l),en<=Ct?Q(ar):""}},n.nice=()=>a(D1(a(),{floor:d=>c(Math.floor(u(d))),ceil:d=>c(Math.ceil(u(d)))})),n}function z1(){const t=sc(fa()).domain([1,10]);return t.copy=()=>ai(t,z1()).base(t.base()),et.apply(t,arguments),t}function yl(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function _l(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function lc(t){var n=1,a=t(yl(n),_l(n));return a.constant=function(l){return arguments.length?t(yl(n=+l),_l(n)):n},jt(a)}function O1(){var t=lc(fa());return t.copy=function(){return ai(t,O1()).constant(t.constant())},et.apply(t,arguments)}function vl(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function r5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i5(t){return t<0?-t*t:t*t}function hc(t){var n=t(Fn,Fn),a=1;function l(){return a===1?t(Fn,Fn):a===.5?t(r5,i5):t(vl(a),vl(1/a))}return n.exponent=function(u){return arguments.length?(a=+u,l()):a},jt(n)}function dc(){var t=hc(fa());return t.copy=function(){return ai(t,dc()).exponent(t.exponent())},et.apply(t,arguments),t}function o5(){return dc.apply(null,arguments).exponent(.5)}function bl(t){return Math.sign(t)*t*t}function a5(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Y1(){var t=cc(),n=[0,1],a=!1,l;function u(c){var p=a5(t(c));return isNaN(p)?l:a?Math.round(p):p}return u.invert=function(c){return t.invert(bl(c))},u.domain=function(c){return arguments.length?(t.domain(c),u):t.domain()},u.range=function(c){return arguments.length?(t.range((n=Array.from(c,Ro)).map(bl)),u):n.slice()},u.rangeRound=function(c){return u.range(c).round(!0)},u.round=function(c){return arguments.length?(a=!!c,u):a},u.clamp=function(c){return arguments.length?(t.clamp(c),u):t.clamp()},u.unknown=function(c){return arguments.length?(l=c,u):l},u.copy=function(){return Y1(t.domain(),n).round(a).clamp(t.clamp()).unknown(l)},et.apply(u,arguments),jt(u)}function F1(){var t=[],n=[],a=[],l;function u(){var p=0,d=Math.max(1,n.length);for(a=new Array(d-1);++p<d;)a[p-1]=lh(t,p/d);return c}function c(p){return p==null||isNaN(p=+p)?l:n[Ft(a,p)]}return c.invertExtent=function(p){var d=n.indexOf(p);return d<0?[NaN,NaN]:[d>0?a[d-1]:t[0],d<a.length?a[d]:t[t.length-1]]},c.domain=function(p){if(!arguments.length)return t.slice();t=[];for(let d of p)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(hn),u()},c.range=function(p){return arguments.length?(n=Array.from(p),u()):n.slice()},c.unknown=function(p){return arguments.length?(l=p,c):l},c.quantiles=function(){return a.slice()},c.copy=function(){return F1().domain(t).range(n).unknown(l)},et.apply(c,arguments)}function q1(){var t=0,n=1,a=1,l=[.5],u=[0,1],c;function p(Q){return Q!=null&&Q<=Q?u[Ft(l,Q,0,a)]:c}function d(){var Q=-1;for(l=new Array(a);++Q<a;)l[Q]=((Q+1)*n-(Q-a)*t)/(a+1);return p}return p.domain=function(Q){return arguments.length?([t,n]=Q,t=+t,n=+n,d()):[t,n]},p.range=function(Q){return arguments.length?(a=(u=Array.from(Q)).length-1,d()):u.slice()},p.invertExtent=function(Q){var Ct=u.indexOf(Q);return Ct<0?[NaN,NaN]:Ct<1?[t,l[0]]:Ct>=a?[l[a-1],n]:[l[Ct-1],l[Ct]]},p.unknown=function(Q){return arguments.length&&(c=Q),p},p.thresholds=function(){return l.slice()},p.copy=function(){return q1().domain([t,n]).range(u).unknown(c)},et.apply(jt(p),arguments)}function L1(){var t=[.5],n=[0,1],a,l=1;function u(c){return c!=null&&c<=c?n[Ft(t,c,0,l)]:a}return u.domain=function(c){return arguments.length?(t=Array.from(c),l=Math.min(t.length,n.length-1),u):t.slice()},u.range=function(c){return arguments.length?(n=Array.from(c),l=Math.min(t.length,n.length-1),u):n.slice()},u.invertExtent=function(c){var p=n.indexOf(c);return[t[p-1],t[p]]},u.unknown=function(c){return arguments.length?(a=c,u):a},u.copy=function(){return L1().domain(t).range(n).unknown(a)},et.apply(u,arguments)}const eu=new Date,ru=new Date;function _n(t,n,a,l){function u(c){return t(c=arguments.length===0?new Date:new Date(+c)),c}return u.floor=c=>(t(c=new Date(+c)),c),u.ceil=c=>(t(c=new Date(c-1)),n(c,1),t(c),c),u.round=c=>{const p=u(c),d=u.ceil(c);return c-p<d-c?p:d},u.offset=(c,p)=>(n(c=new Date(+c),p==null?1:Math.floor(p)),c),u.range=(c,p,d)=>{const Q=[];if(c=u.ceil(c),d=d==null?1:Math.floor(d),!(c<p)||!(d>0))return Q;let Ct;do Q.push(Ct=new Date(+c)),n(c,d),t(c);while(Ct<c&&c<p);return Q},u.filter=c=>_n(p=>{if(p>=p)for(;t(p),!c(p);)p.setTime(p-1)},(p,d)=>{if(p>=p)if(d<0)for(;++d<=0;)for(;n(p,-1),!c(p););else for(;--d>=0;)for(;n(p,1),!c(p););}),a&&(u.count=(c,p)=>(eu.setTime(+c),ru.setTime(+p),t(eu),t(ru),Math.floor(a(eu,ru))),u.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?u.filter(l?p=>l(p)%c===0:p=>u.count(0,p)%c===0):u)),u}const Qe=_n(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Qe.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_n(n=>{n.setTime(Math.floor(n/t)*t)},(n,a)=>{n.setTime(+n+a*t)},(n,a)=>(a-n)/t):Qe);const wl=Qe.range,At=1e3,tt$1=At*60,St=tt$1*60,Rt=St*24,gc=Rt*7,xl=Rt*30,iu=Rt*365,Et=_n(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*At)},(t,n)=>(n-t)/At,t=>t.getUTCSeconds()),Ml=Et.range,ca=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At)},(t,n)=>{t.setTime(+t+n*tt$1)},(t,n)=>(n-t)/tt$1,t=>t.getMinutes()),u5=ca.range,sa=_n(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*tt$1)},(t,n)=>(n-t)/tt$1,t=>t.getUTCMinutes()),f5=sa.range,la=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At-t.getMinutes()*tt$1)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getHours()),c5=la.range,ha=_n(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getUTCHours()),s5=ha.range,or=_n(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*tt$1)/Rt,t=>t.getDate()-1),l5=or.range,ui=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Rt,t=>t.getUTCDate()-1),h5=ui.range,pc=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Rt,t=>Math.floor(t/Rt)),d5=pc.range;function ve$1(t){return _n(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,a)=>{n.setDate(n.getDate()+a*7)},(n,a)=>(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*tt$1)/gc)}const Ke=ve$1(0),Vr=ve$1(1),B1=ve$1(2),U1=ve$1(3),de$1=ve$1(4),X1=ve$1(5),H1=ve$1(6),$l=Ke.range,g5=Vr.range,p5=B1.range,m5=U1.range,y5=de$1.range,_5=X1.range,v5=H1.range;function be$1(t){return _n(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCDate(n.getUTCDate()+a*7)},(n,a)=>(a-n)/gc)}const Je=be$1(0),Gr=be$1(1),j1=be$1(2),W1=be$1(3),ge=be$1(4),V1=be$1(5),G1=be$1(6),Tl=Je.range,b5=Gr.range,w5=j1.range,x5=W1.range,M5=ge.range,$5=V1.range,T5=G1.range,da=_n(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),A5=da.range,ga=_n(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),S5=ga.range,mt=_n(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());mt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,a)=>{n.setFullYear(n.getFullYear()+a*t)});const E5=mt.range,yt=_n(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCFullYear(n.getUTCFullYear()+a*t)});const k5=yt.range;function Z1(t,n,a,l,u,c){const p=[[Et,1,At],[Et,5,5*At],[Et,15,15*At],[Et,30,30*At],[c,1,tt$1],[c,5,5*tt$1],[c,15,15*tt$1],[c,30,30*tt$1],[u,1,St],[u,3,3*St],[u,6,6*St],[u,12,12*St],[l,1,Rt],[l,2,2*Rt],[a,1,gc],[n,1,xl],[n,3,3*xl],[t,1,iu]];function d(Ct,ar,en){const tn=ar<Ct;tn&&([Ct,ar]=[ar,Ct]);const on=en&&typeof en.range=="function"?en:Q(Ct,ar,en),cn=on?on.range(Ct,+ar+1):[];return tn?cn.reverse():cn}function Q(Ct,ar,en){const tn=Math.abs(ar-Ct)/en,on=Oo(([,,Cn])=>Cn).right(p,tn);if(on===p.length)return t.every(Wi(Ct/iu,ar/iu,en));if(on===0)return Qe.every(Math.max(Wi(Ct,ar,en),1));const[cn,gn]=p[tn/p[on-1][2]<p[on][2]/tn?on-1:on];return cn.every(gn)}return[d,Q]}const[Q1,K1]=Z1(yt,ga,Je,pc,ha,sa),[J1,nd]=Z1(mt,da,Ke,or,la,ca);function ou(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function au(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lr(t,n,a){return{y:t,m:n,d:a,H:0,M:0,S:0,L:0}}function td(t){var n=t.dateTime,a=t.date,l=t.time,u=t.periods,c=t.days,p=t.shortDays,d=t.months,Q=t.shortMonths,Ct=hr(u),ar=dr(u),en=hr(c),tn=dr(c),on=hr(p),cn=dr(p),gn=hr(d),Cn=dr(d),ex=hr(Q),ix=dr(Q),ax={a:Sx,A:Ax,b:Cx,B:Tx,c:null,d:Rl,e:Rl,f:K5,g:f8,G:s8,H:G5,I:Z5,j:Q5,L:ed,m:J5,M:n8,p:Px,q:Fx,Q:Pl,s:Dl,S:t8,u:e8,U:r8,V:i8,w:o8,W:a8,x:null,X:null,y:u8,Y:c8,Z:l8,"%":Cl},ox={a:Mx,A:Dx,b:Ox,B:Lx,c:null,d:Il,e:Il,f:p8,g:T8,G:S8,H:h8,I:d8,j:g8,L:id$1,m:m8,M:y8,p:Nx,q:Gx,Q:Pl,s:Dl,S:_8,u:v8,U:b8,V:w8,w:x8,W:M8,x:null,X:null,y:$8,Y:A8,Z:E8,"%":Cl},lx={a:ux,A:gx,b:yx,B:_x,c:vx,d:kl,e:kl,f:H5,g:El,G:Sl,H:Nl,I:Nl,j:L5,L:X5,m:q5,M:B5,p:fx,q:F5,Q:W5,s:V5,S:U5,u:P5,U:D5,V:z5,w:C5,W:O5,x:bx,X:xx,y:El,Y:Sl,Z:Y5,"%":j5};ax.x=cx(a,ax),ax.X=cx(l,ax),ax.c=cx(n,ax),ox.x=cx(a,ox),ox.X=cx(l,ox),ox.c=cx(n,ox);function cx(Ux,Hx){return function(Vx){var zx=[],rE=-1,Zx=0,eE=Ux.length,oE,iE,Wx;for(Vx instanceof Date||(Vx=new Date(+Vx));++rE<eE;)Ux.charCodeAt(rE)===37&&(zx.push(Ux.slice(Zx,rE)),(iE=Al[oE=Ux.charAt(++rE)])!=null?oE=Ux.charAt(++rE):iE=oE==="e"?" ":"0",(Wx=Hx[oE])&&(oE=Wx(Vx,iE)),zx.push(oE),Zx=rE+1);return zx.push(Ux.slice(Zx,rE)),zx.join("")}}function dx(Ux,Hx){return function(Vx){var zx=lr(1900,void 0,1),rE=hx(zx,Ux,Vx+="",0),Zx,eE;if(rE!=Vx.length)return null;if("Q"in zx)return new Date(zx.Q);if("s"in zx)return new Date(zx.s*1e3+("L"in zx?zx.L:0));if(Hx&&!("Z"in zx)&&(zx.Z=0),"p"in zx&&(zx.H=zx.H%12+zx.p*12),zx.m===void 0&&(zx.m="q"in zx?zx.q:0),"V"in zx){if(zx.V<1||zx.V>53)return null;"w"in zx||(zx.w=1),"Z"in zx?(Zx=au(lr(zx.y,0,1)),eE=Zx.getUTCDay(),Zx=eE>4||eE===0?Gr.ceil(Zx):Gr(Zx),Zx=ui.offset(Zx,(zx.V-1)*7),zx.y=Zx.getUTCFullYear(),zx.m=Zx.getUTCMonth(),zx.d=Zx.getUTCDate()+(zx.w+6)%7):(Zx=ou(lr(zx.y,0,1)),eE=Zx.getDay(),Zx=eE>4||eE===0?Vr.ceil(Zx):Vr(Zx),Zx=or.offset(Zx,(zx.V-1)*7),zx.y=Zx.getFullYear(),zx.m=Zx.getMonth(),zx.d=Zx.getDate()+(zx.w+6)%7)}else("W"in zx||"U"in zx)&&("w"in zx||(zx.w="u"in zx?zx.u%7:"W"in zx?1:0),eE="Z"in zx?au(lr(zx.y,0,1)).getUTCDay():ou(lr(zx.y,0,1)).getDay(),zx.m=0,zx.d="W"in zx?(zx.w+6)%7+zx.W*7-(eE+5)%7:zx.w+zx.U*7-(eE+6)%7);return"Z"in zx?(zx.H+=zx.Z/100|0,zx.M+=zx.Z%100,au(zx)):ou(zx)}}function hx(Ux,Hx,Vx,zx){for(var rE=0,Zx=Hx.length,eE=Vx.length,oE,iE;rE<Zx;){if(zx>=eE)return-1;if(oE=Hx.charCodeAt(rE++),oE===37){if(oE=Hx.charAt(rE++),iE=lx[oE in Al?Hx.charAt(rE++):oE],!iE||(zx=iE(Ux,Vx,zx))<0)return-1}else if(oE!=Vx.charCodeAt(zx++))return-1}return zx}function fx(Ux,Hx,Vx){var zx=Ct.exec(Hx.slice(Vx));return zx?(Ux.p=ar.get(zx[0].toLowerCase()),Vx+zx[0].length):-1}function ux(Ux,Hx,Vx){var zx=on.exec(Hx.slice(Vx));return zx?(Ux.w=cn.get(zx[0].toLowerCase()),Vx+zx[0].length):-1}function gx(Ux,Hx,Vx){var zx=en.exec(Hx.slice(Vx));return zx?(Ux.w=tn.get(zx[0].toLowerCase()),Vx+zx[0].length):-1}function yx(Ux,Hx,Vx){var zx=ex.exec(Hx.slice(Vx));return zx?(Ux.m=ix.get(zx[0].toLowerCase()),Vx+zx[0].length):-1}function _x(Ux,Hx,Vx){var zx=gn.exec(Hx.slice(Vx));return zx?(Ux.m=Cn.get(zx[0].toLowerCase()),Vx+zx[0].length):-1}function vx(Ux,Hx,Vx){return hx(Ux,n,Hx,Vx)}function bx(Ux,Hx,Vx){return hx(Ux,a,Hx,Vx)}function xx(Ux,Hx,Vx){return hx(Ux,l,Hx,Vx)}function Sx(Ux){return p[Ux.getDay()]}function Ax(Ux){return c[Ux.getDay()]}function Cx(Ux){return Q[Ux.getMonth()]}function Tx(Ux){return d[Ux.getMonth()]}function Px(Ux){return u[+(Ux.getHours()>=12)]}function Fx(Ux){return 1+~~(Ux.getMonth()/3)}function Mx(Ux){return p[Ux.getUTCDay()]}function Dx(Ux){return c[Ux.getUTCDay()]}function Ox(Ux){return Q[Ux.getUTCMonth()]}function Lx(Ux){return d[Ux.getUTCMonth()]}function Nx(Ux){return u[+(Ux.getUTCHours()>=12)]}function Gx(Ux){return 1+~~(Ux.getUTCMonth()/3)}return{format:function(Ux){var Hx=cx(Ux+="",ax);return Hx.toString=function(){return Ux},Hx},parse:function(Ux){var Hx=dx(Ux+="",!1);return Hx.toString=function(){return Ux},Hx},utcFormat:function(Ux){var Hx=cx(Ux+="",ox);return Hx.toString=function(){return Ux},Hx},utcParse:function(Ux){var Hx=dx(Ux+="",!0);return Hx.toString=function(){return Ux},Hx}}}var Al={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,N5=/^%/,R5=/[\\^$*+?|[\]().{}]/g;function rn(t,n,a){var l=t<0?"-":"",u=(l?-t:t)+"",c=u.length;return l+(c<a?new Array(a-c+1).join(n)+u:u)}function I5(t){return t.replace(R5,"\\$&")}function hr(t){return new RegExp("^(?:"+t.map(I5).join("|")+")","i")}function dr(t){return new Map(t.map((n,a)=>[n.toLowerCase(),a]))}function C5(t,n,a){var l=Tn.exec(n.slice(a,a+1));return l?(t.w=+l[0],a+l[0].length):-1}function P5(t,n,a){var l=Tn.exec(n.slice(a,a+1));return l?(t.u=+l[0],a+l[0].length):-1}function D5(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.U=+l[0],a+l[0].length):-1}function z5(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.V=+l[0],a+l[0].length):-1}function O5(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.W=+l[0],a+l[0].length):-1}function Sl(t,n,a){var l=Tn.exec(n.slice(a,a+4));return l?(t.y=+l[0],a+l[0].length):-1}function El(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.y=+l[0]+(+l[0]>68?1900:2e3),a+l[0].length):-1}function Y5(t,n,a){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return l?(t.Z=l[1]?0:-(l[2]+(l[3]||"00")),a+l[0].length):-1}function F5(t,n,a){var l=Tn.exec(n.slice(a,a+1));return l?(t.q=l[0]*3-3,a+l[0].length):-1}function q5(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.m=l[0]-1,a+l[0].length):-1}function kl(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.d=+l[0],a+l[0].length):-1}function L5(t,n,a){var l=Tn.exec(n.slice(a,a+3));return l?(t.m=0,t.d=+l[0],a+l[0].length):-1}function Nl(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.H=+l[0],a+l[0].length):-1}function B5(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.M=+l[0],a+l[0].length):-1}function U5(t,n,a){var l=Tn.exec(n.slice(a,a+2));return l?(t.S=+l[0],a+l[0].length):-1}function X5(t,n,a){var l=Tn.exec(n.slice(a,a+3));return l?(t.L=+l[0],a+l[0].length):-1}function H5(t,n,a){var l=Tn.exec(n.slice(a,a+6));return l?(t.L=Math.floor(l[0]/1e3),a+l[0].length):-1}function j5(t,n,a){var l=N5.exec(n.slice(a,a+1));return l?a+l[0].length:-1}function W5(t,n,a){var l=Tn.exec(n.slice(a));return l?(t.Q=+l[0],a+l[0].length):-1}function V5(t,n,a){var l=Tn.exec(n.slice(a));return l?(t.s=+l[0],a+l[0].length):-1}function Rl(t,n){return rn(t.getDate(),n,2)}function G5(t,n){return rn(t.getHours(),n,2)}function Z5(t,n){return rn(t.getHours()%12||12,n,2)}function Q5(t,n){return rn(1+or.count(mt(t),t),n,3)}function ed(t,n){return rn(t.getMilliseconds(),n,3)}function K5(t,n){return ed(t,n)+"000"}function J5(t,n){return rn(t.getMonth()+1,n,2)}function n8(t,n){return rn(t.getMinutes(),n,2)}function t8(t,n){return rn(t.getSeconds(),n,2)}function e8(t){var n=t.getDay();return n===0?7:n}function r8(t,n){return rn(Ke.count(mt(t)-1,t),n,2)}function rd(t){var n=t.getDay();return n>=4||n===0?de$1(t):de$1.ceil(t)}function i8(t,n){return t=rd(t),rn(de$1.count(mt(t),t)+(mt(t).getDay()===4),n,2)}function o8(t){return t.getDay()}function a8(t,n){return rn(Vr.count(mt(t)-1,t),n,2)}function u8(t,n){return rn(t.getFullYear()%100,n,2)}function f8(t,n){return t=rd(t),rn(t.getFullYear()%100,n,2)}function c8(t,n){return rn(t.getFullYear()%1e4,n,4)}function s8(t,n){var a=t.getDay();return t=a>=4||a===0?de$1(t):de$1.ceil(t),rn(t.getFullYear()%1e4,n,4)}function l8(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+rn(n/60|0,"0",2)+rn(n%60,"0",2)}function Il(t,n){return rn(t.getUTCDate(),n,2)}function h8(t,n){return rn(t.getUTCHours(),n,2)}function d8(t,n){return rn(t.getUTCHours()%12||12,n,2)}function g8(t,n){return rn(1+ui.count(yt(t),t),n,3)}function id$1(t,n){return rn(t.getUTCMilliseconds(),n,3)}function p8(t,n){return id$1(t,n)+"000"}function m8(t,n){return rn(t.getUTCMonth()+1,n,2)}function y8(t,n){return rn(t.getUTCMinutes(),n,2)}function _8(t,n){return rn(t.getUTCSeconds(),n,2)}function v8(t){var n=t.getUTCDay();return n===0?7:n}function b8(t,n){return rn(Je.count(yt(t)-1,t),n,2)}function od(t){var n=t.getUTCDay();return n>=4||n===0?ge(t):ge.ceil(t)}function w8(t,n){return t=od(t),rn(ge.count(yt(t),t)+(yt(t).getUTCDay()===4),n,2)}function x8(t){return t.getUTCDay()}function M8(t,n){return rn(Gr.count(yt(t)-1,t),n,2)}function $8(t,n){return rn(t.getUTCFullYear()%100,n,2)}function T8(t,n){return t=od(t),rn(t.getUTCFullYear()%100,n,2)}function A8(t,n){return rn(t.getUTCFullYear()%1e4,n,4)}function S8(t,n){var a=t.getUTCDay();return t=a>=4||a===0?ge(t):ge.ceil(t),rn(t.getUTCFullYear()%1e4,n,4)}function E8(){return"+0000"}function Cl(){return"%"}function Pl(t){return+t}function Dl(t){return Math.floor(+t/1e3)}var Ne$1,mc,ad,pa,yc;ud({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ud(t){return Ne$1=td(t),mc=Ne$1.format,ad=Ne$1.parse,pa=Ne$1.utcFormat,yc=Ne$1.utcParse,Ne$1}var fd="%Y-%m-%dT%H:%M:%S.%LZ";function k8(t){return t.toISOString()}var N8=Date.prototype.toISOString?k8:pa(fd);function R8(t){var n=new Date(t);return isNaN(n)?null:n}var I8=+new Date("2000-01-01T00:00:00.000Z")?R8:yc(fd);function C8(t){return new Date(t)}function P8(t){return t instanceof Date?+t:+new Date(+t)}function _c$1(t,n,a,l,u,c,p,d,Q,Ct){var ar=cc(),en=ar.invert,tn=ar.domain,on=Ct(".%L"),cn=Ct(":%S"),gn=Ct("%I:%M"),Cn=Ct("%I %p"),ex=Ct("%a %d"),ix=Ct("%b %d"),ax=Ct("%B"),ox=Ct("%Y");function lx(cx){return(Q(cx)<cx?on:d(cx)<cx?cn:p(cx)<cx?gn:c(cx)<cx?Cn:l(cx)<cx?u(cx)<cx?ex:ix:a(cx)<cx?ax:ox)(cx)}return ar.invert=function(cx){return new Date(en(cx))},ar.domain=function(cx){return arguments.length?tn(Array.from(cx,P8)):tn().map(C8)},ar.ticks=function(cx){var dx=tn();return t(dx[0],dx[dx.length-1],cx??10)},ar.tickFormat=function(cx,dx){return dx==null?lx:Ct(dx)},ar.nice=function(cx){var dx=tn();return(!cx||typeof cx.range!="function")&&(cx=n(dx[0],dx[dx.length-1],cx??10)),cx?tn(D1(dx,cx)):ar},ar.copy=function(){return ai(ar,_c$1(t,n,a,l,u,c,p,d,Q,Ct))},ar}function D8(){return et.apply(_c$1(J1,nd,mt,da,Ke,or,la,ca,Et,mc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function z8(){return et.apply(_c$1(Q1,K1,yt,ga,Je,ui,ha,sa,Et,pa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ma(){var t=0,n=1,a,l,u,c,p=Fn,d=!1,Q;function Ct(en){return en==null||isNaN(en=+en)?Q:p(u===0?.5:(en=(c(en)-a)*u,d?Math.max(0,Math.min(1,en)):en))}Ct.domain=function(en){return arguments.length?([t,n]=en,a=c(t=+t),l=c(n=+n),u=a===l?0:1/(l-a),Ct):[t,n]},Ct.clamp=function(en){return arguments.length?(d=!!en,Ct):d},Ct.interpolator=function(en){return arguments.length?(p=en,Ct):p};function ar(en){return function(tn){var on,cn;return arguments.length?([on,cn]=tn,p=en(on,cn),Ct):[p(0),p(1)]}}return Ct.range=ar(Ht),Ct.rangeRound=ar(Vo),Ct.unknown=function(en){return arguments.length?(Q=en,Ct):Q},function(en){return c=en,a=en(t),l=en(n),u=a===l?0:1/(l-a),Ct}}function Wt(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cd(){var t=jt(ma()(Fn));return t.copy=function(){return Wt(t,cd())},It.apply(t,arguments)}function sd(){var t=sc(ma()).domain([1,10]);return t.copy=function(){return Wt(t,sd()).base(t.base())},It.apply(t,arguments)}function ld(){var t=lc(ma());return t.copy=function(){return Wt(t,ld()).constant(t.constant())},It.apply(t,arguments)}function vc(){var t=hc(ma());return t.copy=function(){return Wt(t,vc()).exponent(t.exponent())},It.apply(t,arguments)}function O8(){return vc.apply(null,arguments).exponent(.5)}function hd(){var t=[],n=Fn;function a(l){if(l!=null&&!isNaN(l=+l))return n((Ft(t,l,1)-1)/(t.length-1))}return a.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let u of l)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(hn),a},a.interpolator=function(l){return arguments.length?(n=l,a):n},a.range=function(){return t.map((l,u)=>n(u/(t.length-1)))},a.quantiles=function(l){return Array.from({length:l+1},(u,c)=>Dr(t,c/l))},a.copy=function(){return hd(n).domain(t)},It.apply(a,arguments)}function ya(){var t=0,n=.5,a=1,l=1,u,c,p,d,Q,Ct=Fn,ar,en=!1,tn;function on(gn){return isNaN(gn=+gn)?tn:(gn=.5+((gn=+ar(gn))-c)*(l*gn<l*c?d:Q),Ct(en?Math.max(0,Math.min(1,gn)):gn))}on.domain=function(gn){return arguments.length?([t,n,a]=gn,u=ar(t=+t),c=ar(n=+n),p=ar(a=+a),d=u===c?0:.5/(c-u),Q=c===p?0:.5/(p-c),l=c<u?-1:1,on):[t,n,a]},on.clamp=function(gn){return arguments.length?(en=!!gn,on):en},on.interpolator=function(gn){return arguments.length?(Ct=gn,on):Ct};function cn(gn){return function(Cn){var ex,ix,ax;return arguments.length?([ex,ix,ax]=Cn,Ct=i0(gn,[ex,ix,ax]),on):[Ct(0),Ct(.5),Ct(1)]}}return on.range=cn(Ht),on.rangeRound=cn(Vo),on.unknown=function(gn){return arguments.length?(tn=gn,on):tn},function(gn){return ar=gn,u=gn(t),c=gn(n),p=gn(a),d=u===c?0:.5/(c-u),Q=c===p?0:.5/(p-c),l=c<u?-1:1,on}}function dd(){var t=jt(ya()(Fn));return t.copy=function(){return Wt(t,dd())},It.apply(t,arguments)}function gd(){var t=sc(ya()).domain([.1,1,10]);return t.copy=function(){return Wt(t,gd()).base(t.base())},It.apply(t,arguments)}function pd(){var t=lc(ya());return t.copy=function(){return Wt(t,pd()).constant(t.constant())},It.apply(t,arguments)}function bc(){var t=hc(ya());return t.copy=function(){return Wt(t,bc()).exponent(t.exponent())},It.apply(t,arguments)}function Y8(){return bc.apply(null,arguments).exponent(.5)}function G$1(t){for(var n=t.length/6|0,a=new Array(n),l=0;l<n;)a[l]="#"+t.slice(l*6,++l*6);return a}const F8=G$1("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),q8=G$1("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),L8=G$1("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),B8=G$1("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),U8=G$1("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),X8=G$1("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),H8=G$1("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),j8=G$1("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),W8=G$1("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),V8=G$1("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),G8=G$1("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),un=t=>Hh(t[t.length-1]);var md=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(G$1);const Z8=un(md);var yd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(G$1);const Q8=un(yd);var _d=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(G$1);const K8=un(_d);var vd=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(G$1);const J8=un(vd);var bd=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(G$1);const n4=un(bd);var wd=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(G$1);const t4=un(wd);var xd=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(G$1);const e4=un(xd);var Md=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(G$1);const r4=un(Md);var $d=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(G$1);const i4=un($d);var Td=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(G$1);const o4=un(Td);var Ad=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(G$1);const a4=un(Ad);var Sd=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(G$1);const u4=un(Sd);var Ed=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(G$1);const f4=un(Ed);var kd=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(G$1);const c4=un(kd);var Nd=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(G$1);const s4=un(Nd);var Rd=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(G$1);const l4=un(Rd);var Id=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(G$1);const h4=un(Id);var Cd=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(G$1);const d4=un(Cd);var Pd=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(G$1);const g4=un(Pd);var Dd=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(G$1);const p4=un(Dd);var zd=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(G$1);const m4=un(zd);var Od=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(G$1);const y4=un(Od);var Yd=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(G$1);const _4=un(Yd);var Fd=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(G$1);const v4=un(Fd);var qd=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(G$1);const b4=un(qd);var Ld=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(G$1);const w4=un(Ld);var Bd=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(G$1);const x4=un(Bd);function M4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const $4=Go(ut(300,.5,0),ut(-240,.5,1));var T4=Go(ut(-100,.75,.35),ut(80,1.5,.8)),A4=Go(ut(260,.75,.35),ut(80,1.5,.8)),Ei=ut();function S4(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Ei.h=360*t-100,Ei.s=1.5-1.5*n,Ei.l=.8-.9*n,Ei+""}var ki=Ue(),E4=Math.PI/3,k4=Math.PI*2/3;function N4(t){var n;return t=(.5-t)*Math.PI,ki.r=255*(n=Math.sin(t))*n,ki.g=255*(n=Math.sin(t+E4))*n,ki.b=255*(n=Math.sin(t+k4))*n,ki+""}function R4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function _a$1(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}const I4=_a$1(G$1("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var C4=_a$1(G$1("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P4=_a$1(G$1("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D4=_a$1(G$1("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function V$1(t){return function(){return t}}const zl=Math.abs,Nn=Math.atan2,Mt=Math.cos,z4=Math.max,Fe=Math.min,jn$1=Math.sin,fn=Math.sqrt,Rn=1e-12,Bt=Math.PI,Io=Bt/2,Yt=2*Bt;function O4(t){return t>1?0:t<-1?Bt:Math.acos(t)}function Ol(t){return t>=1?Io:t<=-1?-Io:Math.asin(t)}function fi(t){let n=3;return t.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t},()=>new Jr(n)}function Y4(t){return t.innerRadius}function F4(t){return t.outerRadius}function q4(t){return t.startAngle}function L4(t){return t.endAngle}function B4(t){return t&&t.padAngle}function U4(t,n,a,l,u,c,p,d){var Q=a-t,Ct=l-n,ar=p-u,en=d-c,tn=en*Q-ar*Ct;if(!(tn*tn<Rn))return tn=(ar*(n-c)-en*(t-u))/tn,[t+tn*Q,n+tn*Ct]}function Ni(t,n,a,l,u,c,p){var d=t-a,Q=n-l,Ct=(p?c:-c)/fn(d*d+Q*Q),ar=Ct*Q,en=-Ct*d,tn=t+ar,on=n+en,cn=a+ar,gn=l+en,Cn=(tn+cn)/2,ex=(on+gn)/2,ix=cn-tn,ax=gn-on,ox=ix*ix+ax*ax,lx=u-c,cx=tn*gn-cn*on,dx=(ax<0?-1:1)*fn(z4(0,lx*lx*ox-cx*cx)),hx=(cx*ax-ix*dx)/ox,fx=(-cx*ix-ax*dx)/ox,ux=(cx*ax+ix*dx)/ox,gx=(-cx*ix+ax*dx)/ox,yx=hx-Cn,_x=fx-ex,vx=ux-Cn,bx=gx-ex;return yx*yx+_x*_x>vx*vx+bx*bx&&(hx=ux,fx=gx),{cx:hx,cy:fx,x01:-ar,y01:-en,x11:hx*(u/lx-1),y11:fx*(u/lx-1)}}function X4(){var t=Y4,n=F4,a=V$1(0),l=null,u=q4,c=L4,p=B4,d=null,Q=fi(Ct);function Ct(){var ar,en,tn=+t.apply(this,arguments),on=+n.apply(this,arguments),cn=u.apply(this,arguments)-Io,gn=c.apply(this,arguments)-Io,Cn=zl(gn-cn),ex=gn>cn;if(d||(d=ar=Q()),on<tn&&(en=on,on=tn,tn=en),!(on>Rn))d.moveTo(0,0);else if(Cn>Yt-Rn)d.moveTo(on*Mt(cn),on*jn$1(cn)),d.arc(0,0,on,cn,gn,!ex),tn>Rn&&(d.moveTo(tn*Mt(gn),tn*jn$1(gn)),d.arc(0,0,tn,gn,cn,ex));else{var ix=cn,ax=gn,ox=cn,lx=gn,cx=Cn,dx=Cn,hx=p.apply(this,arguments)/2,fx=hx>Rn&&(l?+l.apply(this,arguments):fn(tn*tn+on*on)),ux=Fe(zl(on-tn)/2,+a.apply(this,arguments)),gx=ux,yx=ux,_x,vx;if(fx>Rn){var bx=Ol(fx/tn*jn$1(hx)),xx=Ol(fx/on*jn$1(hx));(cx-=bx*2)>Rn?(bx*=ex?1:-1,ox+=bx,lx-=bx):(cx=0,ox=lx=(cn+gn)/2),(dx-=xx*2)>Rn?(xx*=ex?1:-1,ix+=xx,ax-=xx):(dx=0,ix=ax=(cn+gn)/2)}var Sx=on*Mt(ix),Ax=on*jn$1(ix),Cx=tn*Mt(lx),Tx=tn*jn$1(lx);if(ux>Rn){var Px=on*Mt(ax),Fx=on*jn$1(ax),Mx=tn*Mt(ox),Dx=tn*jn$1(ox),Ox;if(Cn<Bt)if(Ox=U4(Sx,Ax,Mx,Dx,Px,Fx,Cx,Tx)){var Lx=Sx-Ox[0],Nx=Ax-Ox[1],Gx=Px-Ox[0],Ux=Fx-Ox[1],Hx=1/jn$1(O4((Lx*Gx+Nx*Ux)/(fn(Lx*Lx+Nx*Nx)*fn(Gx*Gx+Ux*Ux)))/2),Vx=fn(Ox[0]*Ox[0]+Ox[1]*Ox[1]);gx=Fe(ux,(tn-Vx)/(Hx-1)),yx=Fe(ux,(on-Vx)/(Hx+1))}else gx=yx=0}dx>Rn?yx>Rn?(_x=Ni(Mx,Dx,Sx,Ax,on,yx,ex),vx=Ni(Px,Fx,Cx,Tx,on,yx,ex),d.moveTo(_x.cx+_x.x01,_x.cy+_x.y01),yx<ux?d.arc(_x.cx,_x.cy,yx,Nn(_x.y01,_x.x01),Nn(vx.y01,vx.x01),!ex):(d.arc(_x.cx,_x.cy,yx,Nn(_x.y01,_x.x01),Nn(_x.y11,_x.x11),!ex),d.arc(0,0,on,Nn(_x.cy+_x.y11,_x.cx+_x.x11),Nn(vx.cy+vx.y11,vx.cx+vx.x11),!ex),d.arc(vx.cx,vx.cy,yx,Nn(vx.y11,vx.x11),Nn(vx.y01,vx.x01),!ex))):(d.moveTo(Sx,Ax),d.arc(0,0,on,ix,ax,!ex)):d.moveTo(Sx,Ax),!(tn>Rn)||!(cx>Rn)?d.lineTo(Cx,Tx):gx>Rn?(_x=Ni(Cx,Tx,Px,Fx,tn,-gx,ex),vx=Ni(Sx,Ax,Mx,Dx,tn,-gx,ex),d.lineTo(_x.cx+_x.x01,_x.cy+_x.y01),gx<ux?d.arc(_x.cx,_x.cy,gx,Nn(_x.y01,_x.x01),Nn(vx.y01,vx.x01),!ex):(d.arc(_x.cx,_x.cy,gx,Nn(_x.y01,_x.x01),Nn(_x.y11,_x.x11),!ex),d.arc(0,0,tn,Nn(_x.cy+_x.y11,_x.cx+_x.x11),Nn(vx.cy+vx.y11,vx.cx+vx.x11),ex),d.arc(vx.cx,vx.cy,gx,Nn(vx.y11,vx.x11),Nn(vx.y01,vx.x01),!ex))):d.arc(0,0,tn,lx,ox,ex)}if(d.closePath(),ar)return d=null,ar+""||null}return Ct.centroid=function(){var ar=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,en=(+u.apply(this,arguments)+ +c.apply(this,arguments))/2-Bt/2;return[Mt(en)*ar,jn$1(en)*ar]},Ct.innerRadius=function(ar){return arguments.length?(t=typeof ar=="function"?ar:V$1(+ar),Ct):t},Ct.outerRadius=function(ar){return arguments.length?(n=typeof ar=="function"?ar:V$1(+ar),Ct):n},Ct.cornerRadius=function(ar){return arguments.length?(a=typeof ar=="function"?ar:V$1(+ar),Ct):a},Ct.padRadius=function(ar){return arguments.length?(l=ar==null?null:typeof ar=="function"?ar:V$1(+ar),Ct):l},Ct.startAngle=function(ar){return arguments.length?(u=typeof ar=="function"?ar:V$1(+ar),Ct):u},Ct.endAngle=function(ar){return arguments.length?(c=typeof ar=="function"?ar:V$1(+ar),Ct):c},Ct.padAngle=function(ar){return arguments.length?(p=typeof ar=="function"?ar:V$1(+ar),Ct):p},Ct.context=function(ar){return arguments.length?(d=ar??null,Ct):d},Ct}var H4=Array.prototype.slice;function va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ud(t){this._context=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function ba(t){return new Ud(t)}function wc(t){return t[0]}function xc(t){return t[1]}function Mc(t,n){var a=V$1(!0),l=null,u=ba,c=null,p=fi(d);t=typeof t=="function"?t:t===void 0?wc:V$1(t),n=typeof n=="function"?n:n===void 0?xc:V$1(n);function d(Q){var Ct,ar=(Q=va(Q)).length,en,tn=!1,on;for(l==null&&(c=u(on=p())),Ct=0;Ct<=ar;++Ct)!(Ct<ar&&a(en=Q[Ct],Ct,Q))===tn&&((tn=!tn)?c.lineStart():c.lineEnd()),tn&&c.point(+t(en,Ct,Q),+n(en,Ct,Q));if(on)return c=null,on+""||null}return d.x=function(Q){return arguments.length?(t=typeof Q=="function"?Q:V$1(+Q),d):t},d.y=function(Q){return arguments.length?(n=typeof Q=="function"?Q:V$1(+Q),d):n},d.defined=function(Q){return arguments.length?(a=typeof Q=="function"?Q:V$1(!!Q),d):a},d.curve=function(Q){return arguments.length?(u=Q,l!=null&&(c=u(l)),d):u},d.context=function(Q){return arguments.length?(Q==null?l=c=null:c=u(l=Q),d):l},d}function Xd(t,n,a){var l=null,u=V$1(!0),c=null,p=ba,d=null,Q=fi(Ct);t=typeof t=="function"?t:t===void 0?wc:V$1(+t),n=typeof n=="function"?n:V$1(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?xc:V$1(+a);function Ct(en){var tn,on,cn,gn=(en=va(en)).length,Cn,ex=!1,ix,ax=new Array(gn),ox=new Array(gn);for(c==null&&(d=p(ix=Q())),tn=0;tn<=gn;++tn){if(!(tn<gn&&u(Cn=en[tn],tn,en))===ex)if(ex=!ex)on=tn,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),cn=tn-1;cn>=on;--cn)d.point(ax[cn],ox[cn]);d.lineEnd(),d.areaEnd()}ex&&(ax[tn]=+t(Cn,tn,en),ox[tn]=+n(Cn,tn,en),d.point(l?+l(Cn,tn,en):ax[tn],a?+a(Cn,tn,en):ox[tn]))}if(ix)return d=null,ix+""||null}function ar(){return Mc().defined(u).curve(p).context(c)}return Ct.x=function(en){return arguments.length?(t=typeof en=="function"?en:V$1(+en),l=null,Ct):t},Ct.x0=function(en){return arguments.length?(t=typeof en=="function"?en:V$1(+en),Ct):t},Ct.x1=function(en){return arguments.length?(l=en==null?null:typeof en=="function"?en:V$1(+en),Ct):l},Ct.y=function(en){return arguments.length?(n=typeof en=="function"?en:V$1(+en),a=null,Ct):n},Ct.y0=function(en){return arguments.length?(n=typeof en=="function"?en:V$1(+en),Ct):n},Ct.y1=function(en){return arguments.length?(a=en==null?null:typeof en=="function"?en:V$1(+en),Ct):a},Ct.lineX0=Ct.lineY0=function(){return ar().x(t).y(n)},Ct.lineY1=function(){return ar().x(t).y(a)},Ct.lineX1=function(){return ar().x(l).y(n)},Ct.defined=function(en){return arguments.length?(u=typeof en=="function"?en:V$1(!!en),Ct):u},Ct.curve=function(en){return arguments.length?(p=en,c!=null&&(d=p(c)),Ct):p},Ct.context=function(en){return arguments.length?(en==null?c=d=null:d=p(c=en),Ct):c},Ct}function j4(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function W4(t){return t}function V4(){var t=W4,n=j4,a=null,l=V$1(0),u=V$1(Yt),c=V$1(0);function p(d){var Q,Ct=(d=va(d)).length,ar,en,tn=0,on=new Array(Ct),cn=new Array(Ct),gn=+l.apply(this,arguments),Cn=Math.min(Yt,Math.max(-Yt,u.apply(this,arguments)-gn)),ex,ix=Math.min(Math.abs(Cn)/Ct,c.apply(this,arguments)),ax=ix*(Cn<0?-1:1),ox;for(Q=0;Q<Ct;++Q)(ox=cn[on[Q]=Q]=+t(d[Q],Q,d))>0&&(tn+=ox);for(n!=null?on.sort(function(lx,cx){return n(cn[lx],cn[cx])}):a!=null&&on.sort(function(lx,cx){return a(d[lx],d[cx])}),Q=0,en=tn?(Cn-Ct*ax)/tn:0;Q<Ct;++Q,gn=ex)ar=on[Q],ox=cn[ar],ex=gn+(ox>0?ox*en:0)+ax,cn[ar]={data:d[ar],index:Q,value:ox,startAngle:gn,endAngle:ex,padAngle:ix};return cn}return p.value=function(d){return arguments.length?(t=typeof d=="function"?d:V$1(+d),p):t},p.sortValues=function(d){return arguments.length?(n=d,a=null,p):n},p.sort=function(d){return arguments.length?(a=d,n=null,p):a},p.startAngle=function(d){return arguments.length?(l=typeof d=="function"?d:V$1(+d),p):l},p.endAngle=function(d){return arguments.length?(u=typeof d=="function"?d:V$1(+d),p):u},p.padAngle=function(d){return arguments.length?(c=typeof d=="function"?d:V$1(+d),p):c},p}var Hd=$c(ba);function jd(t){this._curve=t}jd.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function $c(t){function n(a){return new jd(t(a))}return n._curve=t,n}function Tr(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(a){return arguments.length?n($c(a)):n()._curve},t}function Yl(){return Tr(Mc().curve(Hd))}function Fl(){var t=Xd().curve(Hd),n=t.curve,a=t.lineX0,l=t.lineX1,u=t.lineY0,c=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Tr(a())},delete t.lineX0,t.lineEndAngle=function(){return Tr(l())},delete t.lineX1,t.lineInnerRadius=function(){return Tr(u())},delete t.lineY0,t.lineOuterRadius=function(){return Tr(c())},delete t.lineY1,t.curve=function(p){return arguments.length?n($c(p)):n()._curve},t}function Ar(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class Wd{constructor(n,a){this._context=n,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,a){switch(n=+n,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,a,n,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,n,this._y0,n,a);break}}this._x0=n,this._y0=a}}class G4{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,a){if(n=+n,a=+a,this._point===0)this._point=1;else{const l=Ar(this._x0,this._y0),u=Ar(this._x0,this._y0=(this._y0+a)/2),c=Ar(n,this._y0),p=Ar(n,a);this._context.moveTo(...l),this._context.bezierCurveTo(...u,...c,...p)}this._x0=n,this._y0=a}}function Vd(t){return new Wd(t,!0)}function Gd(t){return new Wd(t,!1)}function Z4(t){return new G4(t)}function Q4(t){return t.source}function K4(t){return t.target}function wa(t){let n=Q4,a=K4,l=wc,u=xc,c=null,p=null,d=fi(Q);function Q(){let Ct;const ar=H4.call(arguments),en=n.apply(this,ar),tn=a.apply(this,ar);if(c==null&&(p=t(Ct=d())),p.lineStart(),ar[0]=en,p.point(+l.apply(this,ar),+u.apply(this,ar)),ar[0]=tn,p.point(+l.apply(this,ar),+u.apply(this,ar)),p.lineEnd(),Ct)return p=null,Ct+""||null}return Q.source=function(Ct){return arguments.length?(n=Ct,Q):n},Q.target=function(Ct){return arguments.length?(a=Ct,Q):a},Q.x=function(Ct){return arguments.length?(l=typeof Ct=="function"?Ct:V$1(+Ct),Q):l},Q.y=function(Ct){return arguments.length?(u=typeof Ct=="function"?Ct:V$1(+Ct),Q):u},Q.context=function(Ct){return arguments.length?(Ct==null?c=p=null:p=t(c=Ct),Q):c},Q}function J4(){return wa(Vd)}function n7(){return wa(Gd)}function t7(){const t=wa(Z4);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const e7=fn(3),Zd={draw(t,n){const a=fn(n+Fe(n/28,.75))*.59436,l=a/2,u=l*e7;t.moveTo(0,a),t.lineTo(0,-a),t.moveTo(-u,-l),t.lineTo(u,l),t.moveTo(-u,l),t.lineTo(u,-l)}},xa={draw(t,n){const a=fn(n/Bt);t.moveTo(a,0),t.arc(0,0,a,0,Yt)}},Qd={draw(t,n){const a=fn(n/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},Kd=fn(1/3),r7=Kd*2,Jd={draw(t,n){const a=fn(n/r7),l=a*Kd;t.moveTo(0,-a),t.lineTo(l,0),t.lineTo(0,a),t.lineTo(-l,0),t.closePath()}},ng={draw(t,n){const a=fn(n)*.62625;t.moveTo(0,-a),t.lineTo(a,0),t.lineTo(0,a),t.lineTo(-a,0),t.closePath()}},tg={draw(t,n){const a=fn(n-Fe(n/7,2))*.87559;t.moveTo(-a,0),t.lineTo(a,0),t.moveTo(0,a),t.lineTo(0,-a)}},eg={draw(t,n){const a=fn(n),l=-a/2;t.rect(l,l,a,a)}},rg={draw(t,n){const a=fn(n)*.4431;t.moveTo(a,a),t.lineTo(a,-a),t.lineTo(-a,-a),t.lineTo(-a,a),t.closePath()}},i7=.8908130915292852,ig=jn$1(Bt/10)/jn$1(7*Bt/10),o7=jn$1(Yt/10)*ig,a7=-Mt(Yt/10)*ig,og={draw(t,n){const a=fn(n*i7),l=o7*a,u=a7*a;t.moveTo(0,-a),t.lineTo(l,u);for(let c=1;c<5;++c){const p=Yt*c/5,d=Mt(p),Q=jn$1(p);t.lineTo(Q*a,-d*a),t.lineTo(d*l-Q*u,Q*l+d*u)}t.closePath()}},uu=fn(3),ag={draw(t,n){const a=-fn(n/(uu*3));t.moveTo(0,a*2),t.lineTo(-uu*a,-a),t.lineTo(uu*a,-a),t.closePath()}},u7=fn(3),ug={draw(t,n){const a=fn(n)*.6824,l=a/2,u=a*u7/2;t.moveTo(0,-a),t.lineTo(u,l),t.lineTo(-u,l),t.closePath()}},Zn=-.5,Qn=fn(3)/2,uf=1/fn(12),f7=(uf/2+1)*3,fg={draw(t,n){const a=fn(n/f7),l=a/2,u=a*uf,c=l,p=a*uf+a,d=-c,Q=p;t.moveTo(l,u),t.lineTo(c,p),t.lineTo(d,Q),t.lineTo(Zn*l-Qn*u,Qn*l+Zn*u),t.lineTo(Zn*c-Qn*p,Qn*c+Zn*p),t.lineTo(Zn*d-Qn*Q,Qn*d+Zn*Q),t.lineTo(Zn*l+Qn*u,Zn*u-Qn*l),t.lineTo(Zn*c+Qn*p,Zn*p-Qn*c),t.lineTo(Zn*d+Qn*Q,Zn*Q-Qn*d),t.closePath()}},ff={draw(t,n){const a=fn(n-Fe(n/6,1.7))*.6189;t.moveTo(-a,-a),t.lineTo(a,a),t.moveTo(-a,a),t.lineTo(a,-a)}},ql=[xa,Qd,Jd,eg,og,ag,fg],c7=[xa,tg,ff,ug,Zd,rg,ng];function s7(t,n){let a=null,l=fi(u);t=typeof t=="function"?t:V$1(t||xa),n=typeof n=="function"?n:V$1(n===void 0?64:+n);function u(){let c;if(a||(a=c=l()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),c)return a=null,c+""||null}return u.type=function(c){return arguments.length?(t=typeof c=="function"?c:V$1(c),u):t},u.size=function(c){return arguments.length?(n=typeof c=="function"?c:V$1(+c),u):n},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function Ut(){}function Co(t,n,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+a)/6)}function Ma(t){this._context=t}Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Co(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function l7(t){return new Ma(t)}function cg(t){this._context=t}cg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function h7(t){return new cg(t)}function sg(t){this._context=t}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,l=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(a,l):this._context.moveTo(a,l);break;case 3:this._point=4;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function d7(t){return new sg(t)}function lg(t,n){this._basis=new Ma(t),this._beta=n}lg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,a=t.length-1;if(a>0)for(var l=t[0],u=n[0],c=t[a]-l,p=n[a]-u,d=-1,Q;++d<=a;)Q=d/a,this._basis.point(this._beta*t[d]+(1-this._beta)*(l+Q*c),this._beta*n[d]+(1-this._beta)*(u+Q*p));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const g7=function t(n){function a(l){return n===1?new Ma(l):new lg(l,n)}return a.beta=function(l){return t(+l)},a}(.85);function Po(t,n,a){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-a),t._x2,t._y2)}function Tc(t,n){this._context=t,this._k=(1-n)/6}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Po(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const p7=function t(n){function a(l){return new Tc(l,n)}return a.tension=function(l){return t(+l)},a}(0);function Ac(t,n){this._context=t,this._k=(1-n)/6}Ac.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const m7=function t(n){function a(l){return new Ac(l,n)}return a.tension=function(l){return t(+l)},a}(0);function Sc(t,n){this._context=t,this._k=(1-n)/6}Sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const y7=function t(n){function a(l){return new Sc(l,n)}return a.tension=function(l){return t(+l)},a}(0);function Ec(t,n,a){var l=t._x1,u=t._y1,c=t._x2,p=t._y2;if(t._l01_a>Rn){var d=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,Q=3*t._l01_a*(t._l01_a+t._l12_a);l=(l*d-t._x0*t._l12_2a+t._x2*t._l01_2a)/Q,u=(u*d-t._y0*t._l12_2a+t._y2*t._l01_2a)/Q}if(t._l23_a>Rn){var Ct=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,ar=3*t._l23_a*(t._l23_a+t._l12_a);c=(c*Ct+t._x1*t._l23_2a-n*t._l12_2a)/ar,p=(p*Ct+t._y1*t._l23_2a-a*t._l12_2a)/ar}t._context.bezierCurveTo(l,u,c,p,t._x2,t._y2)}function hg(t,n){this._context=t,this._alpha=n}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,l=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+l*l,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const _7=function t(n){function a(l){return n?new hg(l,n):new Tc(l,0)}return a.alpha=function(l){return t(+l)},a}(.5);function dg(t,n){this._context=t,this._alpha=n}dg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,l=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+l*l,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const v7=function t(n){function a(l){return n?new dg(l,n):new Ac(l,0)}return a.alpha=function(l){return t(+l)},a}(.5);function gg(t,n){this._context=t,this._alpha=n}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,l=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+l*l,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const b7=function t(n){function a(l){return n?new gg(l,n):new Sc(l,0)}return a.alpha=function(l){return t(+l)},a}(.5);function pg(t){this._context=t}pg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function w7(t){return new pg(t)}function Ll(t){return t<0?-1:1}function Bl(t,n,a){var l=t._x1-t._x0,u=n-t._x1,c=(t._y1-t._y0)/(l||u<0&&-0),p=(a-t._y1)/(u||l<0&&-0),d=(c*u+p*l)/(l+u);return(Ll(c)+Ll(p))*Math.min(Math.abs(c),Math.abs(p),.5*Math.abs(d))||0}function Ul(t,n){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-n)/2:n}function fu(t,n,a){var l=t._x0,u=t._y0,c=t._x1,p=t._y1,d=(c-l)/3;t._context.bezierCurveTo(l+d,u+d*n,c-d,p-d*a,c,p)}function Do(t){this._context=t}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fu(this,this._t0,Ul(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var a=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,fu(this,Ul(this,a=Bl(this,t,n)),a);break;default:fu(this,this._t0,a=Bl(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=a}}};function mg(t){this._context=new yg(t)}(mg.prototype=Object.create(Do.prototype)).point=function(t,n){Do.prototype.point.call(this,n,t)};function yg(t){this._context=t}yg.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,a,l,u,c){this._context.bezierCurveTo(n,t,l,a,c,u)}};function x7(t){return new Do(t)}function M7(t){return new mg(t)}function _g(t){this._context=t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),a===2)this._context.lineTo(t[1],n[1]);else for(var l=Xl(t),u=Xl(n),c=0,p=1;p<a;++c,++p)this._context.bezierCurveTo(l[0][c],u[0][c],l[1][c],u[1][c],t[p],n[p]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Xl(t){var n,a=t.length-1,l,u=new Array(a),c=new Array(a),p=new Array(a);for(u[0]=0,c[0]=2,p[0]=t[0]+2*t[1],n=1;n<a-1;++n)u[n]=1,c[n]=4,p[n]=4*t[n]+2*t[n+1];for(u[a-1]=2,c[a-1]=7,p[a-1]=8*t[a-1]+t[a],n=1;n<a;++n)l=u[n]/c[n-1],c[n]-=l,p[n]-=l*p[n-1];for(u[a-1]=p[a-1]/c[a-1],n=a-2;n>=0;--n)u[n]=(p[n]-u[n+1])/c[n];for(c[a-1]=(t[a]+u[a-1])/2,n=0;n<a-1;++n)c[n]=2*t[n+1]-u[n+1];return[u,c]}function $7(t){return new _g(t)}function $a(t,n){this._context=t,this._t=n}$a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=t,this._y=n}};function T7(t){return new $a(t,.5)}function A7(t){return new $a(t,0)}function S7(t){return new $a(t,1)}function nr(t,n){if((p=t.length)>1)for(var a=1,l,u,c=t[n[0]],p,d=c.length;a<p;++a)for(u=c,c=t[n[a]],l=0;l<d;++l)c[l][1]+=c[l][0]=isNaN(u[l][1])?u[l][0]:u[l][1]}function tr(t){for(var n=t.length,a=new Array(n);--n>=0;)a[n]=n;return a}function E7(t,n){return t[n]}function k7(t){const n=[];return n.key=t,n}function N7(){var t=V$1([]),n=tr,a=nr,l=E7;function u(c){var p=Array.from(t.apply(this,arguments),k7),d,Q=p.length,Ct=-1,ar;for(const en of c)for(d=0,++Ct;d<Q;++d)(p[d][Ct]=[0,+l(en,p[d].key,Ct,c)]).data=en;for(d=0,ar=va(n(p));d<Q;++d)p[ar[d]].index=d;return a(p,ar),p}return u.keys=function(c){return arguments.length?(t=typeof c=="function"?c:V$1(Array.from(c)),u):t},u.value=function(c){return arguments.length?(l=typeof c=="function"?c:V$1(+c),u):l},u.order=function(c){return arguments.length?(n=c==null?tr:typeof c=="function"?c:V$1(Array.from(c)),u):n},u.offset=function(c){return arguments.length?(a=c??nr,u):a},u}function R7(t,n){if((l=t.length)>0){for(var a,l,u=0,c=t[0].length,p;u<c;++u){for(p=a=0;a<l;++a)p+=t[a][u][1]||0;if(p)for(a=0;a<l;++a)t[a][u][1]/=p}nr(t,n)}}function I7(t,n){if((Q=t.length)>0)for(var a,l=0,u,c,p,d,Q,Ct=t[n[0]].length;l<Ct;++l)for(p=d=0,a=0;a<Q;++a)(c=(u=t[n[a]][l])[1]-u[0])>0?(u[0]=p,u[1]=p+=c):c<0?(u[1]=d,u[0]=d+=c):(u[0]=0,u[1]=c)}function C7(t,n){if((u=t.length)>0){for(var a=0,l=t[n[0]],u,c=l.length;a<c;++a){for(var p=0,d=0;p<u;++p)d+=t[p][a][1]||0;l[a][1]+=l[a][0]=-d/2}nr(t,n)}}function P7(t,n){if(!(!((p=t.length)>0)||!((c=(u=t[n[0]]).length)>0))){for(var a=0,l=1,u,c,p;l<c;++l){for(var d=0,Q=0,Ct=0;d<p;++d){for(var ar=t[n[d]],en=ar[l][1]||0,tn=ar[l-1][1]||0,on=(en-tn)/2,cn=0;cn<d;++cn){var gn=t[n[cn]],Cn=gn[l][1]||0,ex=gn[l-1][1]||0;on+=Cn-ex}Q+=en,Ct+=on*en}u[l-1][1]+=u[l-1][0]=a,Q&&(a-=Ct/Q)}u[l-1][1]+=u[l-1][0]=a,nr(t,n)}}function vg(t){var n=t.map(D7);return tr(t).sort(function(a,l){return n[a]-n[l]})}function D7(t){for(var n=-1,a=0,l=t.length,u,c=-1/0;++n<l;)(u=+t[n][1])>c&&(c=u,a=n);return a}function bg(t){var n=t.map(wg);return tr(t).sort(function(a,l){return n[a]-n[l]})}function wg(t){for(var n=0,a=-1,l=t.length,u;++a<l;)(u=+t[a][1])&&(n+=u);return n}function z7(t){return bg(t).reverse()}function O7(t){var n=t.length,a,l,u=t.map(wg),c=vg(t),p=0,d=0,Q=[],Ct=[];for(a=0;a<n;++a)l=c[a],p<d?(p+=u[l],Q.push(l)):(d+=u[l],Ct.push(l));return Ct.reverse().concat(Q)}function Y7(t){return tr(t).reverse()}const Ri=t=>()=>t;function F7(t,{sourceEvent:n,target:a,transform:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function ht(t,n,a){this.k=t,this.x=n,this.y=a}ht.prototype={constructor:ht,scale:function(t){return t===1?this:new ht(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new ht(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ci=new ht(1,0,0);Pe$1.prototype=ht.prototype;function Pe$1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ci;return t.__zoom}function cu(t){t.stopImmediatePropagation()}function gr(t){t.preventDefault(),t.stopImmediatePropagation()}function q7(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function L7(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hl(){return this.__zoom||ci}function B7(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function U7(){return navigator.maxTouchPoints||"ontouchstart"in this}function X7(t,n,a){var l=t.invertX(n[0][0])-a[0][0],u=t.invertX(n[1][0])-a[1][0],c=t.invertY(n[0][1])-a[0][1],p=t.invertY(n[1][1])-a[1][1];return t.translate(u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u),p>c?(c+p)/2:Math.min(0,c)||Math.max(0,p))}function xg(){var t=q7,n=L7,a=X7,l=B7,u=U7,c=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],d=250,Q=n0,Ct=pe$1("start","zoom","end"),ar,en,tn,on=500,cn=150,gn=0,Cn=10;function ex(vx){vx.property("__zoom",Hl).on("wheel.zoom",hx,{passive:!1}).on("mousedown.zoom",fx).on("dblclick.zoom",ux).filter(u).on("touchstart.zoom",gx).on("touchmove.zoom",yx).on("touchend.zoom touchcancel.zoom",_x).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}ex.transform=function(vx,bx,xx,Sx){var Ax=vx.selection?vx.selection():vx;Ax.property("__zoom",Hl),vx!==Ax?lx(vx,bx,xx,Sx):Ax.interrupt().each(function(){cx(this,arguments).event(Sx).start().zoom(null,typeof bx=="function"?bx.apply(this,arguments):bx).end()})},ex.scaleBy=function(vx,bx,xx,Sx){ex.scaleTo(vx,function(){var Ax=this.__zoom.k,Cx=typeof bx=="function"?bx.apply(this,arguments):bx;return Ax*Cx},xx,Sx)},ex.scaleTo=function(vx,bx,xx,Sx){ex.transform(vx,function(){var Ax=n.apply(this,arguments),Cx=this.__zoom,Tx=xx==null?ox(Ax):typeof xx=="function"?xx.apply(this,arguments):xx,Px=Cx.invert(Tx),Fx=typeof bx=="function"?bx.apply(this,arguments):bx;return a(ax(ix(Cx,Fx),Tx,Px),Ax,p)},xx,Sx)},ex.translateBy=function(vx,bx,xx,Sx){ex.transform(vx,function(){return a(this.__zoom.translate(typeof bx=="function"?bx.apply(this,arguments):bx,typeof xx=="function"?xx.apply(this,arguments):xx),n.apply(this,arguments),p)},null,Sx)},ex.translateTo=function(vx,bx,xx,Sx,Ax){ex.transform(vx,function(){var Cx=n.apply(this,arguments),Tx=this.__zoom,Px=Sx==null?ox(Cx):typeof Sx=="function"?Sx.apply(this,arguments):Sx;return a(ci.translate(Px[0],Px[1]).scale(Tx.k).translate(typeof bx=="function"?-bx.apply(this,arguments):-bx,typeof xx=="function"?-xx.apply(this,arguments):-xx),Cx,p)},Sx,Ax)};function ix(vx,bx){return bx=Math.max(c[0],Math.min(c[1],bx)),bx===vx.k?vx:new ht(bx,vx.x,vx.y)}function ax(vx,bx,xx){var Sx=bx[0]-xx[0]*vx.k,Ax=bx[1]-xx[1]*vx.k;return Sx===vx.x&&Ax===vx.y?vx:new ht(vx.k,Sx,Ax)}function ox(vx){return[(+vx[0][0]+ +vx[1][0])/2,(+vx[0][1]+ +vx[1][1])/2]}function lx(vx,bx,xx,Sx){vx.on("start.zoom",function(){cx(this,arguments).event(Sx).start()}).on("interrupt.zoom end.zoom",function(){cx(this,arguments).event(Sx).end()}).tween("zoom",function(){var Ax=this,Cx=arguments,Tx=cx(Ax,Cx).event(Sx),Px=n.apply(Ax,Cx),Fx=xx==null?ox(Px):typeof xx=="function"?xx.apply(Ax,Cx):xx,Mx=Math.max(Px[1][0]-Px[0][0],Px[1][1]-Px[0][1]),Dx=Ax.__zoom,Ox=typeof bx=="function"?bx.apply(Ax,Cx):bx,Lx=Q(Dx.invert(Fx).concat(Mx/Dx.k),Ox.invert(Fx).concat(Mx/Ox.k));return function(Nx){if(Nx===1)Nx=Ox;else{var Gx=Lx(Nx),Ux=Mx/Gx[2];Nx=new ht(Ux,Fx[0]-Gx[0]*Ux,Fx[1]-Gx[1]*Ux)}Tx.zoom(null,Nx)}})}function cx(vx,bx,xx){return!xx&&vx.__zooming||new dx(vx,bx)}function dx(vx,bx){this.that=vx,this.args=bx,this.active=0,this.sourceEvent=null,this.extent=n.apply(vx,bx),this.taps=0}dx.prototype={event:function(vx){return vx&&(this.sourceEvent=vx),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(vx,bx){return this.mouse&&vx!=="mouse"&&(this.mouse[1]=bx.invert(this.mouse[0])),this.touch0&&vx!=="touch"&&(this.touch0[1]=bx.invert(this.touch0[0])),this.touch1&&vx!=="touch"&&(this.touch1[1]=bx.invert(this.touch1[0])),this.that.__zoom=bx,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(vx){var bx=X$1(this.that).datum();Ct.call(vx,this.that,new F7(vx,{sourceEvent:this.sourceEvent,target:ex,transform:this.that.__zoom,dispatch:Ct}),bx)}};function hx(vx,...bx){if(!t.apply(this,arguments))return;var xx=cx(this,bx).event(vx),Sx=this.__zoom,Ax=Math.max(c[0],Math.min(c[1],Sx.k*Math.pow(2,l.apply(this,arguments)))),Cx=wn(vx);if(xx.wheel)(xx.mouse[0][0]!==Cx[0]||xx.mouse[0][1]!==Cx[1])&&(xx.mouse[1]=Sx.invert(xx.mouse[0]=Cx)),clearTimeout(xx.wheel);else{if(Sx.k===Ax)return;xx.mouse=[Cx,Sx.invert(Cx)],re$1(this),xx.start()}gr(vx),xx.wheel=setTimeout(Tx,cn),xx.zoom("mouse",a(ax(ix(Sx,Ax),xx.mouse[0],xx.mouse[1]),xx.extent,p));function Tx(){xx.wheel=null,xx.end()}}function fx(vx,...bx){if(tn||!t.apply(this,arguments))return;var xx=vx.currentTarget,Sx=cx(this,bx,!0).event(vx),Ax=X$1(vx.view).on("mousemove.zoom",Fx,!0).on("mouseup.zoom",Mx,!0),Cx=wn(vx,xx),Tx=vx.clientX,Px=vx.clientY;Uo(vx.view),cu(vx),Sx.mouse=[Cx,this.__zoom.invert(Cx)],re$1(this),Sx.start();function Fx(Dx){if(gr(Dx),!Sx.moved){var Ox=Dx.clientX-Tx,Lx=Dx.clientY-Px;Sx.moved=Ox*Ox+Lx*Lx>gn}Sx.event(Dx).zoom("mouse",a(ax(Sx.that.__zoom,Sx.mouse[0]=wn(Dx,xx),Sx.mouse[1]),Sx.extent,p))}function Mx(Dx){Ax.on("mousemove.zoom mouseup.zoom",null),Xo(Dx.view,Sx.moved),gr(Dx),Sx.event(Dx).end()}}function ux(vx,...bx){if(t.apply(this,arguments)){var xx=this.__zoom,Sx=wn(vx.changedTouches?vx.changedTouches[0]:vx,this),Ax=xx.invert(Sx),Cx=xx.k*(vx.shiftKey?.5:2),Tx=a(ax(ix(xx,Cx),Sx,Ax),n.apply(this,bx),p);gr(vx),d>0?X$1(this).transition().duration(d).call(lx,Tx,Sx,vx):X$1(this).call(ex.transform,Tx,Sx,vx)}}function gx(vx,...bx){if(t.apply(this,arguments)){var xx=vx.touches,Sx=xx.length,Ax=cx(this,bx,vx.changedTouches.length===Sx).event(vx),Cx,Tx,Px,Fx;for(cu(vx),Tx=0;Tx<Sx;++Tx)Px=xx[Tx],Fx=wn(Px,this),Fx=[Fx,this.__zoom.invert(Fx),Px.identifier],Ax.touch0?!Ax.touch1&&Ax.touch0[2]!==Fx[2]&&(Ax.touch1=Fx,Ax.taps=0):(Ax.touch0=Fx,Cx=!0,Ax.taps=1+!!ar);ar&&(ar=clearTimeout(ar)),Cx&&(Ax.taps<2&&(en=Fx[0],ar=setTimeout(function(){ar=null},on)),re$1(this),Ax.start())}}function yx(vx,...bx){if(this.__zooming){var xx=cx(this,bx).event(vx),Sx=vx.changedTouches,Ax=Sx.length,Cx,Tx,Px,Fx;for(gr(vx),Cx=0;Cx<Ax;++Cx)Tx=Sx[Cx],Px=wn(Tx,this),xx.touch0&&xx.touch0[2]===Tx.identifier?xx.touch0[0]=Px:xx.touch1&&xx.touch1[2]===Tx.identifier&&(xx.touch1[0]=Px);if(Tx=xx.that.__zoom,xx.touch1){var Mx=xx.touch0[0],Dx=xx.touch0[1],Ox=xx.touch1[0],Lx=xx.touch1[1],Nx=(Nx=Ox[0]-Mx[0])*Nx+(Nx=Ox[1]-Mx[1])*Nx,Gx=(Gx=Lx[0]-Dx[0])*Gx+(Gx=Lx[1]-Dx[1])*Gx;Tx=ix(Tx,Math.sqrt(Nx/Gx)),Px=[(Mx[0]+Ox[0])/2,(Mx[1]+Ox[1])/2],Fx=[(Dx[0]+Lx[0])/2,(Dx[1]+Lx[1])/2]}else if(xx.touch0)Px=xx.touch0[0],Fx=xx.touch0[1];else return;xx.zoom("touch",a(ax(Tx,Px,Fx),xx.extent,p))}}function _x(vx,...bx){if(this.__zooming){var xx=cx(this,bx).event(vx),Sx=vx.changedTouches,Ax=Sx.length,Cx,Tx;for(cu(vx),tn&&clearTimeout(tn),tn=setTimeout(function(){tn=null},on),Cx=0;Cx<Ax;++Cx)Tx=Sx[Cx],xx.touch0&&xx.touch0[2]===Tx.identifier?delete xx.touch0:xx.touch1&&xx.touch1[2]===Tx.identifier&&delete xx.touch1;if(xx.touch1&&!xx.touch0&&(xx.touch0=xx.touch1,delete xx.touch1),xx.touch0)xx.touch0[1]=this.__zoom.invert(xx.touch0[0]);else if(xx.end(),xx.taps===2&&(Tx=wn(Tx,this),Math.hypot(en[0]-Tx[0],en[1]-Tx[1])<Cn)){var Px=X$1(this).on("dblclick.zoom");Px&&Px.apply(this,arguments)}}}return ex.wheelDelta=function(vx){return arguments.length?(l=typeof vx=="function"?vx:Ri(+vx),ex):l},ex.filter=function(vx){return arguments.length?(t=typeof vx=="function"?vx:Ri(!!vx),ex):t},ex.touchable=function(vx){return arguments.length?(u=typeof vx=="function"?vx:Ri(!!vx),ex):u},ex.extent=function(vx){return arguments.length?(n=typeof vx=="function"?vx:Ri([[+vx[0][0],+vx[0][1]],[+vx[1][0],+vx[1][1]]]),ex):n},ex.scaleExtent=function(vx){return arguments.length?(c[0]=+vx[0],c[1]=+vx[1],ex):[c[0],c[1]]},ex.translateExtent=function(vx){return arguments.length?(p[0][0]=+vx[0][0],p[1][0]=+vx[1][0],p[0][1]=+vx[0][1],p[1][1]=+vx[1][1],ex):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},ex.constrain=function(vx){return arguments.length?(a=vx,ex):a},ex.duration=function(vx){return arguments.length?(d=+vx,ex):d},ex.interpolate=function(vx){return arguments.length?(Q=vx,ex):Q},ex.on=function(){var vx=Ct.on.apply(Ct,arguments);return vx===Ct?ex:vx},ex.clickDistance=function(vx){return arguments.length?(gn=(vx=+vx)*vx,ex):Math.sqrt(gn)},ex.tapDistance=function(vx){return arguments.length?(Cn=+vx,ex):Cn},ex}const H7=Object.freeze(Object.defineProperty({__proto__:null,Adder:bn,Delaunay:zf,FormatSpecifier:ra,InternMap:Cr,InternSet:ie$1,Node:he$1,Path:Jr,Voronoi:v0,ZoomTransform:ht,active:B_,arc:X4,area:Xd,areaRadial:Fl,ascending:hn,autoType:hb,axisBottom:Cp,axisLeft:Pp,axisRight:Ip,axisTop:Rp,bin:Nc,bisect:Ft,bisectCenter:Sg,bisectLeft:Ag,bisectRight:Ft,bisector:Oo,blob:pb,blur:Eg,blur2:Zl,blurImage:kg,brush:tv,brushSelection:K_,brushX:J_,brushY:nv,buffer:yb,chord:rv,chordDirected:ov,chordTranspose:iv,cluster:C3,color:qt,contourDensity:Rv,contours:Ru,count:Yo,create:pm,creator:Lo,cross:zg,csv:bb,csvFormat:tb,csvFormatBody:eb,csvFormatRow:ib,csvFormatRows:rb$1,csvFormatValue:ob,csvParse:w0,csvParseRows:nb,cubehelix:ut,cumsum:Og,curveBasis:l7,curveBasisClosed:h7,curveBasisOpen:d7,curveBumpX:Vd,curveBumpY:Gd,curveBundle:g7,curveCardinal:p7,curveCardinalClosed:m7,curveCardinalOpen:y7,curveCatmullRom:_7,curveCatmullRomClosed:v7,curveCatmullRomOpen:b7,curveLinear:ba,curveLinearClosed:w7,curveMonotoneX:x7,curveMonotoneY:M7,curveNatural:$7,curveStep:T7,curveStepAfter:S7,curveStepBefore:A7,descending:Vl,deviation:Jl,difference:vp,disjoint:bp,dispatch:pe$1,drag:Sh,dragDisable:Uo,dragEnable:Xo,dsv:vb,dsvFormat:na,easeBack:ns,easeBackIn:P_,easeBackInOut:ns,easeBackOut:D_,easeBounce:Br,easeBounceIn:I_,easeBounceInOut:C_,easeBounceOut:Br,easeCircle:Jc,easeCircleIn:x_,easeCircleInOut:Jc,easeCircleOut:M_,easeCubic:Au,easeCubicIn:g_,easeCubicInOut:Au,easeCubicOut:p_,easeElastic:ts,easeElasticIn:z_,easeElasticInOut:O_,easeElasticOut:ts,easeExp:Kc,easeExpIn:b_,easeExpInOut:Kc,easeExpOut:w_,easeLinear:l_,easePoly:Zc,easePolyIn:m_,easePolyInOut:Zc,easePolyOut:y_,easeQuad:Gc,easeQuadIn:h_,easeQuadInOut:Gc,easeQuadOut:d_,easeSin:Qc,easeSinIn:__,easeSinInOut:Qc,easeSinOut:v_,every:dp,extent:Sr,fcumsum:Fg,filter:pp,flatGroup:qg,flatRollup:Lg,forceCenter:Sb,forceCollide:jb,forceLink:Vb,forceManyBody:rw,forceRadial:iw,forceSimulation:ew,forceX:ow,forceY:aw,get format(){return ia},formatDefaultLocale:E0,formatLocale:S0,get formatPrefix(){return Ff},formatSpecifier:We,fsum:Yg,geoAlbers:h1,geoAlbersUsa:l3,geoArea:mw,geoAzimuthalEqualArea:h3,geoAzimuthalEqualAreaRaw:Gf,geoAzimuthalEquidistant:d3,geoAzimuthalEquidistantRaw:Zf,geoBounds:bw,geoCentroid:Aw,geoCircle:Sw,geoClipAntimeridian:Xu,geoClipCircle:Z0,geoClipExtent:Pw,geoClipRectangle:oa,geoConicConformal:p3,geoConicConformalRaw:p1,geoConicEqualArea:ko,geoConicEqualAreaRaw:l1,geoConicEquidistant:y3,geoConicEquidistantRaw:m1,geoContains:Lw,geoDistance:wo,geoEqualEarth:v3$1,geoEqualEarthRaw:Qf,geoEquirectangular:m3,geoEquirectangularRaw:Wr,geoGnomonic:b3,geoGnomonicRaw:Kf,geoGraticule:J0,geoGraticule10:Bw,geoIdentity:w3,geoInterpolate:Uw,geoLength:Q0,geoMercator:g3,geoMercatorRaw:ii,geoNaturalEarth1:x3,geoNaturalEarth1Raw:Jf,geoOrthographic:M3,geoOrthographicRaw:nc,geoPath:t3,geoProjection:vt,geoProjectionMutator:Wf,geoRotation:X0,geoStereographic:$3,geoStereographicRaw:tc,geoStream:it,geoTransform:e3,geoTransverseMercator:T3,geoTransverseMercatorRaw:ec,gray:Dm,greatest:sh,greatestIndex:up,group:rh,groupSort:Xg,groups:ih,hcl:no,hierarchy:rc,histogram:Nc,hsl:Qi,html:Tb,image:xb,index:Bg,indexes:Ug,interpolate:Ht,interpolateArray:Lm,interpolateBasis:Lh,interpolateBasisClosed:Bh,interpolateBlues:y4,interpolateBrBG:Z8,interpolateBuGn:o4,interpolateBuPu:a4,interpolateCividis:M4,interpolateCool:A4,interpolateCubehelix:ey,interpolateCubehelixDefault:$4,interpolateCubehelixLong:Go,interpolateDate:Vh,interpolateDiscrete:Xm,interpolateGnBu:u4,interpolateGreens:_4,interpolateGreys:v4,interpolateHcl:ny,interpolateHclLong:ty,interpolateHsl:Qm,interpolateHslLong:Km,interpolateHue:Hm,interpolateInferno:P4,interpolateLab:Jm,interpolateMagma:C4,interpolateNumber:Kn,interpolateNumberArray:Af,interpolateObject:Gh,interpolateOrRd:f4,interpolateOranges:x4,interpolatePRGn:Q8,interpolatePiYG:K8,interpolatePlasma:D4,interpolatePuBu:s4,interpolatePuBuGn:c4,interpolatePuOr:J8,interpolatePuRd:l4,interpolatePurples:b4,interpolateRainbow:S4,interpolateRdBu:n4,interpolateRdGy:t4,interpolateRdPu:h4,interpolateRdYlBu:e4,interpolateRdYlGn:r4,interpolateReds:w4,interpolateRgb:Fr,interpolateRgbBasis:Hh,interpolateRgbBasisClosed:qm,interpolateRound:Vo,interpolateSinebow:N4,interpolateSpectral:i4,interpolateString:Sf,interpolateTransformCss:Kh,interpolateTransformSvg:Jh,interpolateTurbo:R4,interpolateViridis:I4,interpolateWarm:T4,interpolateYlGn:g4,interpolateYlGnBu:d4,interpolateYlOrBr:p4,interpolateYlOrRd:m4,interpolateZoom:n0,interrupt:re$1,intersection:wp,interval:uy,isoFormat:N8,isoParse:I8,json:$b,lab:Ji,lch:zm,least:ap,leastIndex:dh,line:Mc,lineRadial:Yl,link:wa,linkHorizontal:J4,linkRadial:t7,linkVertical:n7,local:Th,map:mp,matcher:vf,max:Pr,maxIndex:pf,mean:Kg,median:Jg,medianIndex:np,merge:yf,min:Vi,minIndex:mf,mode:ep,namespace:Zr,namespaces:mu,nice:df,now:Kr,pack:c6,packEnclose:r6,packSiblings:u6,pairs:rp,partition:s6,path:Jo,pathRound:fv,permute:ch,pie:V4,piecewise:i0,pointRadial:Ar,pointer:wn,pointers:ym,polygonArea:A6,polygonCentroid:S6,polygonContains:R6,polygonHull:N6,polygonLength:I6,precisionFixed:k0,precisionPrefix:N0,precisionRound:R0,quadtree:ea,quantile:Dr,quantileIndex:hh,quantileSorted:lh,quantize:ry,quickselect:Fo,radialArea:Fl,radialLine:Yl,randomBates:z6,randomBernoulli:F6,randomBeta:k1,randomBinomial:N1,randomCauchy:L6,randomExponential:O6,randomGamma:ac,randomGeometric:E1,randomInt:P6,randomIrwinHall:S1,randomLcg:j6,randomLogNormal:D6,randomLogistic:B6,randomNormal:oc,randomPareto:Y6,randomPoisson:U6,randomUniform:C6,randomWeibull:q6,range:zt,rank:op,reduce:yp,reverse:_p,rgb:Ue,ribbon:mv,ribbonArrow:yv,rollup:ah,rollups:uh,scaleBand:fc,scaleDiverging:dd,scaleDivergingLog:gd,scaleDivergingPow:bc,scaleDivergingSqrt:Y8,scaleDivergingSymlog:pd,scaleIdentity:P1,scaleImplicit:of,scaleLinear:C1,scaleLog:z1,scaleOrdinal:uc,scalePoint:W6,scalePow:dc,scaleQuantile:F1,scaleQuantize:q1,scaleRadial:Y1,scaleSequential:cd,scaleSequentialLog:sd,scaleSequentialPow:vc,scaleSequentialQuantile:hd,scaleSequentialSqrt:O8,scaleSequentialSymlog:ld,scaleSqrt:o5,scaleSymlog:O1,scaleThreshold:L1,scaleTime:D8,scaleUtc:z8,scan:fp,schemeAccent:q8,schemeBlues:Od,schemeBrBG:md,schemeBuGn:Td,schemeBuPu:Ad,schemeCategory10:F8,schemeDark2:L8,schemeGnBu:Sd,schemeGreens:Yd,schemeGreys:Fd,schemeObservable10:B8,schemeOrRd:Ed,schemeOranges:Bd,schemePRGn:yd,schemePaired:U8,schemePastel1:X8,schemePastel2:H8,schemePiYG:_d,schemePuBu:Nd,schemePuBuGn:kd,schemePuOr:vd,schemePuRd:Rd,schemePurples:qd,schemeRdBu:bd,schemeRdGy:wd,schemeRdPu:Id,schemeRdYlBu:xd,schemeRdYlGn:Md,schemeReds:Ld,schemeSet1:j8,schemeSet2:W8,schemeSet3:V8,schemeSpectral:$d,schemeTableau10:G8,schemeYlGn:Pd,schemeYlGnBu:Cd,schemeYlOrBr:Dd,schemeYlOrRd:zd,select:X$1,selectAll:_m,selection:me$1,selector:Bo,selectorAll:_f,shuffle:cp,shuffler:gh,some:gp,sort:du,stack:N7,stackOffsetDiverging:I7,stackOffsetExpand:R7,stackOffsetNone:nr,stackOffsetSilhouette:C7,stackOffsetWiggle:P7,stackOrderAppearance:vg,stackOrderAscending:bg,stackOrderDescending:z7,stackOrderInsideOut:O7,stackOrderNone:tr,stackOrderReverse:Y7,stratify:g6,style:ue$1,subset:Mp,sum:sp,superset:mh,svg:Ab,symbol:s7,symbolAsterisk:Zd,symbolCircle:xa,symbolCross:Qd,symbolDiamond:Jd,symbolDiamond2:ng,symbolPlus:tg,symbolSquare:eg,symbolSquare2:rg,symbolStar:og,symbolTimes:ff,symbolTriangle:ag,symbolTriangle2:ug,symbolWye:fg,symbolX:ff,symbols:ql,symbolsFill:ql,symbolsStroke:c7,text:ta,thresholdFreedmanDiaconis:Zg,thresholdScott:Qg,thresholdSturges:gf,tickFormat:I1,tickIncrement:ae$1,tickStep:Wi,ticks:oe$1,timeDay:or,timeDays:l5,get timeFormat(){return mc},timeFormatDefaultLocale:ud,timeFormatLocale:td,timeFriday:X1,timeFridays:_5,timeHour:la,timeHours:c5,timeInterval:_n,timeMillisecond:Qe,timeMilliseconds:wl,timeMinute:ca,timeMinutes:u5,timeMonday:Vr,timeMondays:g5,timeMonth:da,timeMonths:A5,get timeParse(){return ad},timeSaturday:H1,timeSaturdays:v5,timeSecond:Et,timeSeconds:Ml,timeSunday:Ke,timeSundays:$l,timeThursday:de$1,timeThursdays:y5,timeTickInterval:nd,timeTicks:J1,timeTuesday:B1,timeTuesdays:p5,timeWednesday:U1,timeWednesdays:m5,timeWeek:Ke,timeWeeks:$l,timeYear:mt,timeYears:E5,timeout:xu,timer:Qo,timerFlush:u0,transition:l0,transpose:ph,tree:w6,treemap:x6,treemapBinary:M6,treemapDice:oi,treemapResquarify:T6,treemapSlice:ua,treemapSliceDice:$6,treemapSquarify:A1,tsv:wb,tsvFormat:ub,tsvFormatBody:fb,tsvFormatRow:sb,tsvFormatRows:cb,tsvFormatValue:lb$1,tsvParse:x0,tsvParseRows:ab,union:$p,unixDay:pc,unixDays:d5,utcDay:ui,utcDays:h5,get utcFormat(){return pa},utcFriday:V1,utcFridays:$5,utcHour:ha,utcHours:s5,utcMillisecond:Qe,utcMilliseconds:wl,utcMinute:sa,utcMinutes:f5,utcMonday:Gr,utcMondays:b5,utcMonth:ga,utcMonths:S5,get utcParse(){return yc},utcSaturday:G1,utcSaturdays:T5,utcSecond:Et,utcSeconds:Ml,utcSunday:Je,utcSundays:Tl,utcThursday:ge,utcThursdays:M5,utcTickInterval:K1,utcTicks:Q1,utcTuesday:j1,utcTuesdays:w5,utcWednesday:W1,utcWednesdays:x5,utcWeek:Je,utcWeeks:Tl,utcYear:yt,utcYears:k5,variance:Kl,window:bf,xml:$0,zip:hp,zoom:xg,zoomIdentity:ci,zoomTransform:Pe$1},Symbol.toStringTag,{value:"Module"}));function kc(t){const n=t.attr("transform"),a=n&&n.match(/translate\(([^,]+),\s*([^)]+)\)/);return a?[parseFloat(a[1]),parseFloat(a[2])]:[0,0]}function Ta(t){const n=t&&t.match(/rotate\(([^)]+)\)/);return n?parseFloat(n[1]):0}function Mg(t,n,a){const l=Math.sqrt(t*t+n*n),u=Math.atan2(n,t),c=l*Math.sin(u+a*Math.PI/180);return[l*Math.cos(u+a*Math.PI/180),c]}function cf(t,n,a,l,u){const[c,p]=[l.shapes[n].x,l.shapes[n].y];var d=l.shapes[n].connectors[a][0],Q=l.shapes[n].connectors[a][1];const Ct=t.attr("transform"),ar=Ct?Ta(Ct):l.shapes[n].rotation!=null?l.shapes[n].rotation:0,[en,tn]=Mg(d,Q,ar);return u([c+en,p+tn])}const pr={gridSize:16,width:2432,height:1792,defaultZoom:1,maxZoom:2};function j7(t){t.shapes||(t.shapes=[]),t.wires||(t.wires=[]),t.settings||(t.settings={});for(const n in pr)if(t.settings[n]===void 0&&(t.settings[n]=pr[n]),typeof pr[n]=="object")for(const a in pr[n])t.settings[n][a]===void 0&&(t.settings[n][a]=pr[n][a]);return t}function zo(t,n,a,l,u,c,p){var d,Q=10,Ct=[];const ar=l.select("path");var en=[];{const ix=Jo();ix.moveTo(...n[0]),en.push(n[0]);var tn,on,cn,gn=n;for(d=1;d<gn.length;d++)if(tn=gn[d-1],on=gn[d],tn[0]==on[0]||tn[1]==on[1])en.push(on);else{var Cn=a([(on[0]-tn[0])/2,0])[0];en.push([tn[0]+Cn,tn[1]]),en.push([tn[0]+Cn,on[1]]),en.push(on)}for(d=1;d<en.length-1;d++)tn=en[d-1],cn=en[d],on=en[d+1],tn[0]==cn[0]&&cn[0]==on[0]||tn[1]==cn[1]&&cn[1]==on[1]?(en.splice(d,1),d--):Ct.push([en[d][0],en[d][1]]);en.map(ax=>ix.lineTo(ax[0],ax[1])),ar.attr("d",ix.toString())}if(l.selectAll(".visiojs_elbow").remove(),u)for(var ex=0;ex<Ct.length;ex++){tn=Ct[ex];const ix=ex,ax=l.append("rect").attr("class","visiojs_elbow").attr("x",tn[0]-Q/2).attr("y",tn[1]-Q/2).attr("width",Q).attr("height",Q).attr("fill","url(#visiojs_elbow_fill)");c({elbowID:ix,elbow:ax,wireID:p,start:n[0],end:n[n.length-1],redrawWire:ox=>zo(t,ox,a,l,u,c,p)})}return Ct}function W7({d3:t,snapAndClipToGrid:n,elbSvg:a,wireID:l,initialState:u,elbowID:c,redrawWire:p,start:d,end:Q,stateChanged:Ct}){var ar={x:0,y:0},en=[],tn={x:0,y:0};const on=t.drag().clickDistance(10).on("start",cn=>{[tn.x,tn.y]=[cn.x,cn.y]}).on("drag",cn=>{const gn=n([cn.x-tn.x,cn.y-tn.y]),Cn={x:gn[0],y:gn[1]};if(Cn.x===ar.x&&Cn.y===ar.y)return;ar={...Cn};const ex=u.wires[l].points.map((ax,ox)=>ox===c?[ax[0]+Cn.x,ax[1]+Cn.y]:(ox===c-1||ox===c+1)&&ax[0]===u.wires[l].points[c][0]?[ax[0]+Cn.x,ax[1]]:(ox===c-1||ox===c+1)&&ax[1]===u.wires[l].points[c][1]?[ax[0],ax[1]+Cn.y]:ax);var ix=[d,Q];ix.splice(1,0,...ex),en=[...p(ix)]}).on("end",()=>{u.wires[l].points=[...en],Ct(u)});a.call(on)}function V7(t,n,a){const l=document.elementFromPoint(t,n);if(l&&l.classList.contains("visiojs_connector")&&l.id!="visiojs_tempconn"){const u=l.id.split("_");a.shapeID=Number(u[1]),a.connectorID=Number(u[2])}else a.shapeID=null,a.connectorID=null}function jl(t,n,a,l,u,c,p,d,Q,Ct,ar){const en=Ct,tn=[u,c],on=Q([(t-en.x)/en.k,(n-en.y)/en.k]);var cn=[tn,...l,on];zo("manhattan",cn,Q,a,null,ax=>moveElbow(ax),ar.wires.length);const gn=X$1("#visiojs_tempconn");gn.attr("cx",on[0]).attr("cy",on[1]).style("visibility","visible");const Cn=gn.node().getBoundingClientRect(),ex=Cn.left+5,ix=Cn.top+5;V7(ex,ix,d),d.shapeID!=null?(p.classed("visiojs_good_wire",!0),p.classed("visiojs_bad_wire",!1)):(p.classed("visiojs_good_wire",!1),p.classed("visiojs_bad_wire",!0))}const sf=({prevEvent:t,group:n,shapeID:a,connectorID:l,x:u,y:c,endLine:p,wireMidPoints:d=[],lineGroup:Q=null,line:Ct=null,snapAndClipToGrid:ar,wireStart:en,svg:tn,initialState:on,stateChanged:cn})=>{t.stopPropagation(),t.preventDefault();var[gn,Cn]=kc(n);const ex=Ta(n.attr("transform")),[ix,ax]=Mg(u,c,ex);[gn,Cn]=ar([gn+ix,Cn+ax]),en.shapeID=a,en.connectorID=l;const ox={shapeID:null,connectorID:null},lx=X$1("#visiojs_wires");Q===null&&(Q=lx.insert("g")),Ct===null&&(Ct=Q.append("path").attr("class","visiojs_wire"));var cx=X$1("#visiojs_tempconn");cx.empty()&&(cx=Q.append("circle").attr("r",10).attr("cx",0).attr("cy",0).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id","visiojs_tempconn").style("visibility","hidden")),Ct.attr("stroke-dasharray","5,5"),Ct.classed("visiojs_bad_wire",!0),tn.on("touchmove.drawline",function(dx){const hx=dx.touches[0];dx.preventDefault();const[fx,ux]=wn(hx,tn.node());jl(fx,ux,Q,d,gn,Cn,Ct,ox,ar,Pe$1(tn.node()),on)}),tn.on("mousemove.drawline",function(dx){const[hx,fx]=wn(dx,tn.node());jl(hx,fx,Q,d,gn,Cn,Ct,ox,ar,Pe$1(tn.node()),on)}),X$1(window).on("keydown.endline",dx=>{dx.key==="Escape"&&(ox.shapeID=null,ox.connectorID=null,p(dx,d,Q,ox))}),tn.on("dblclick.endline",dx=>{p(dx,d,Q,ox)}),tn.on("click.endline",dx=>{if(ox.shapeID!=null&&!(ox.connectorID==l&&ox.shapeID==a))p(dx,d,Q,ox),cn(on);else{const[hx,fx]=wn(dx,tn.node()),ux=Pe$1(tn.node()),gx=ar([(hx-ux.x)/ux.k,(fx-ux.y)/ux.k]);d.push(gx)}}),tn.on("touchend.endline",dx=>{const hx=dx.changedTouches[0];if(console.log("touch endline"),ox.shapeID!=null)console.log("single click + hover"),p(dx,d,Q,ox),cn(on);else{const[fx,ux]=wn(hx,tn.node()),gx=Pe$1(tn.node());d.push(ar([(fx-gx.x)/gx.k,(ux-gx.y)/gx.k])),console.log("add a point",d),cx.on("touchstart",function(yx){console.log("cvb mousedown on connector",a,l),sf({prevEvent:yx,group:n,shapeID:a,connectorID:l,x:u,y:c,endLine:p,wireMidPoints:d,lineGroup:Q,line:Ct,snapAndClipToGrid:ar,wireStart:en,svg:tn,initialState:on,stateChanged:cn})})}})},G7={clickStartX:0,clickStartY:0,objStartX:0,objStartY:0,shapeDom:null,shapeID:null},Z7=(t,n,a,l,u)=>()=>Sh().clickDistance(10).on("start",function(c){t.clickStartX=c.x,t.clickStartY=c.y,t.shapeDom=X$1(this),t.shapeID=Number(t.shapeDom.attr("id").split("_")[1]),[t.objStartX,t.objStartY]=kc(t.shapeDom)}).on("end",function(c){const p=c.x-t.clickStartX,d=c.y-t.clickStartY,[Q,Ct]=n([t.objStartX+p,t.objStartY+d]);Q==t.objStartX&&Ct==t.objStartY||(l({shapeID:t.shapeID,save:!0}),u(a))}).on("drag",function(c){const p=c.x-t.clickStartX,d=c.y-t.clickStartY,[Q,Ct]=n([t.objStartX+p,t.objStartY+d]);if(Q==a.shapes[t.shapeID].x&&Ct==a.shapes[t.shapeID].y)return;const ar={x:Q-a.shapes[t.shapeID].x,y:Ct-a.shapes[t.shapeID].y},en=Ta(t.shapeDom.attr("transform"));t.shapeDom.attr("transform",`translate(${Q}, ${Ct}) rotate(${en})`);const tn=[];for(const on in a.shapes[t.shapeID].connectors)tn.push(cf(t.shapeDom,t.shapeID,on,a,n));a.shapes[t.shapeID].x=Q,a.shapes[t.shapeID].y=Ct,l({shapeID:t.shapeID,origXY:tn,delta:ar})});async function su({id:t,data:n,selectIt:a=!1,selected:l,wireStart:u,snapAndClipToGrid:c,initialState:p,redrawWireOnShape:d,stateChanged:Q,drawWire:Ct}){const ar=`shape_${t}`,en=X$1("#visiojs_shapes");var tn=X$1(`#${ar}`);if(n===null){tn.remove();return}const on=n.image,cn=n.x,gn=n.y,Cn=n.connectors===void 0?[]:n.connectors,ex=n.rotation,ix=n.label,ax=n.fixed===void 0?!1:n.fixed,ox=n.offset===void 0?[0,0]:n.offset;if(tn.empty()){tn=en.append("g").attr("id",ar);const dx=tn.append("g");var lx;if(on.endsWith(".svg")){const hx=(await $0(on)).documentElement;dx.node().appendChild(hx),lx=X$1(hx)}else lx=dx.append("image").attr("href",on);dx.attr("transform",`translate(${ox[0]}, ${ox[1]})`),a&&l.push(ar),Q7(tn,t,ox,p,d,lx,a,Q),ix&&tn.append("text").attr("stroke","none").attr("x",ix.x).attr("y",ix.y).text(ix.text).attr("class",`visiojs_label ${ix.class}`);for(let hx=0;hx<Cn.length;hx++){const fx=Cn[hx];K7({x:fx[0],y:fx[1],group:tn,shapeID:t,connectorID:hx,wireStart:u,snapAndClipToGrid:c,initialState:p,drawWire:Ct,stateChanged:Q})}ax===!1&&(tn.style("cursor","pointer"),tn.on("mouseover",function(){u.shapeID===null&&(l.includes(ar)||lx.attr("opacity",.5))}),tn.on("mouseout",function(){lx.attr("opacity",1)}),tn.on("click",function(hx){if(u.shapeID!==null)return;hx.stopPropagation(),lx.attr("opacity",1);const fx=l.indexOf(ar);fx===-1?(l.push(ar),tn.selectAll(".visiojs_hover_rect").style("opacity","1"),tn.selectAll(".visiojs_hover_rotate").style("visibility",null)):(console.log("removing rect 3"),l.splice(fx,1),tn.selectAll(".visiojs_hover_rect").style("opacity","0"),tn.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),lx.attr("opacity",.5))}),tn.call(Z7(G7,c,p,d,Q)()))}var cx="";ex&&(cx=`rotate(${ex})`),tn.attr("transform",`translate(${cn}, ${gn}) ${cx}`)}function Q7(t,n,a,l,u,c,p,d){const Q=c.node().getBBox(),[Ct,ar]=[Q.x+Q.width+a[0]+10,Q.y+a[1]-10],en=t.append("rect").attr("x",Q.x-5).attr("y",Q.y-5).attr("width",Q.width+10).attr("height",Q.height+10).attr("class","visiojs_hover_rect").attr("transform",`translate(${a[0]}, ${a[1]})`);p||en.style("opacity","0");const tn=t.append("g").attr("width","16").attr("height","16").attr("fill","currentColor").attr("viewBox","0 0 16 16").attr("transform",`translate(${Ct}, ${ar})`).attr("class","visiojs_hover_rotate");p||tn.style("visibility","hidden"),tn.append("path").attr("fill-rule","evenodd").attr("d","M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"),tn.append("path").attr("d","M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"),tn.append("rect").attr("x","0").attr("y","0").attr("width","16").attr("height","16").attr("fill","transparent"),tn.on("click",function(on){on.stopPropagation();const cn=Ta(t.attr("transform")),[gn,Cn]=kc(t),ex=(cn+90)%360;t.attr("transform",`translate(${gn}, ${Cn}) rotate(${ex})`),l.shapes[t.attr("id").split("_")[1]].rotation=ex,u({shapeID:n,save:!0}),d(l)})}const K7=({x:t,y:n,group:a,shapeID:l,connectorID:u,wireStart:c,snapAndClipToGrid:p,initialState:d,drawWire:Q,stateChanged:Ct})=>{const ar=X$1("#visiojs_top");function en(tn,on,cn,gn){if(c.shapeID!==null){if(tn.stopPropagation(),X$1("#visiojs_tempconn").remove(),ar.on("mousemove.drawline",null),ar.on("dblclick.endline",null),ar.on("click.endline",null),X$1(window).on(".endline",null),gn.shapeID===null)cn.remove();else if(gn.shapeID==c.shapeID&&gn.connectorID==c.connectorID)cn.remove();else{const ex={start:{...c},end:{...gn},points:on};var Cn=d.wires.indexOf(null);Cn==-1?(Cn=d.wires.length,d.wires.push(ex)):d.wires[Cn]=ex,cn.remove();const ix=Q(Cn);d.wires[Cn].points=ix}c.shapeID=null,c.connectorID=null}}a.append("circle").attr("r",8).attr("cx",t).attr("cy",n).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id",`connector_${l}_${u}`).on("mouseover",function(){X$1(this).transition().duration(200).attr("r",16)}).on("mouseout",function(){X$1(this).transition().duration(200).attr("r",8)}).on("mousedown",function(tn){X$1(this).transition().duration(200).attr("r",8),c.shapeID===null&&sf({prevEvent:tn,group:a,shapeID:l,connectorID:u,x:t,y:n,endLine:en,snapAndClipToGrid:p,wireStart:c,svg:ar,initialState:d,stateChanged:Ct})}).on("touchstart",function(tn){X$1(this).transition().duration(200).attr("r",8),c.shapeID===null&&sf({prevEvent:tn,group:a,shapeID:l,connectorID:u,x:t,y:n,endLine:en,snapAndClipToGrid:p,wireStart:c,svg:ar,initialState:d,stateChanged:Ct})})};function J7(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lu,Wl;function nx(){return Wl||(Wl=1,lu=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var l,u,c;if(Array.isArray(n)){if(l=n.length,l!=a.length)return!1;for(u=l;u--!==0;)if(!t(n[u],a[u]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(c=Object.keys(n),l=c.length,l!==Object.keys(a).length)return!1;for(u=l;u--!==0;)if(!Object.prototype.hasOwnProperty.call(a,c[u]))return!1;for(u=l;u--!==0;){var p=c[u];if(!t(n[p],a[p]))return!1}return!0}return n!==n&&a!==a}),lu}var tx=nx();const Ii=J7(tx),rx=({initialState:t,stateChanged:n=()=>{}})=>{var a,l,u,c={connectorID:null,shapeID:null},p=[],d,Q,Ct,ar,en,tn=!1;t=j7(t);const on={...t.settings};function cn(fx=!0){en=on.gridSize,a=X$1("#visiojs_top"),d=X$1("#visiojs_wholeThing"),d.empty()&&(d=a.append("g").attr("id","visiojs_wholeThing")),a.on("."),a.attr("tabindex",0),a.on("click",function(){Cn()}),a.on("dragover",function(Sx){Sx.preventDefault()}),a.on("drop",function(Sx){Sx.preventDefault();const Ax=Sx.dataTransfer.getData("application/json"),Cx=JSON.parse(Ax),Tx=wn(Sx,d.node()),[Px,Fx]=Tx;var[Mx,Dx]=gn([Px,Fx]);cx(Cx,Mx,Dx)}),X$1(window).on("keydown.delete",Sx=>{(Sx.key==="Backspace"||Sx.key==="Delete")&&document.activeElement===a.node()&&(console.log("deleting"),dx())}),X$1(window).on("resize",function(){cn(!1)});const ux=a.node().getBoundingClientRect();l=Math.round(ux.width/en)*en,u=Math.round(ux.height/en)*en;var gx=X$1("#visiojs_svgDefs");if(gx.empty()){gx=a.append("defs").attr("id","visiojs_svgDefs");const Sx=gx.append("linearGradient").attr("id","visiojs_connector_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);Sx.append("stop").attr("offset","0%").attr("stop-color","#4f6870"),Sx.append("stop").attr("offset","100%").attr("stop-color","#678792");const Ax=gx.append("linearGradient").attr("id","visiojs_elbow_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);Ax.append("stop").attr("offset","0%").attr("stop-color","#cacaca"),Ax.append("stop").attr("offset","100%").attr("stop-color","#fdfdfd")}ax(d,on.width,on.height,en),Q=X$1("#visiojs_wires"),Q.empty()&&(Q=d.append("g").attr("id","visiojs_wires")),Ct=X$1("#visiojs_shapes"),Ct.empty()&&(Ct=d.append("g").attr("id","visiojs_shapes"));const yx=Math.min(l/on.width,u/on.height),_x=xg().scaleExtent([yx,on.maxZoom]).clickDistance(10).translateExtent([[-on.width/2,-on.height/2],[on.width/2,on.height/2]]).on("zoom",Sx=>d.attr("transform",Sx.transform)),vx=ci.translate(l/2,u/2).scale(on.defaultZoom);a.call(_x.transform,vx),ix(),fx&&n(t);const bx=100,xx=X$1("#visiojs_toggle_button").empty()?a.append("foreignObject").attr("y",5).attr("width",bx).attr("height",50).attr("id","visiojs_toggle_button_foreign").append("xhtml:body").style("margin","0px").style("background","transparent").append("button").attr("id","visiojs_toggle_button").text("Enable Zoom"):X$1("#visiojs_toggle_button");X$1("#visiojs_toggle_button_foreign").attr("x",ux.width-bx-3),xx.on("click",function(){tn?(a.on(".zoom",null),xx.text("Enable Zoom"),xx.attr("class",null),tn=!1):(a.call(_x).on("dblclick.zoom",null),xx.text("Disable Zoom"),xx.attr("class","visiojs_toggle_button_active"),tn=!0)})}function gn(fx,ux=!0){return ux?[Math.min(Math.max(Math.round(fx[0]/en)*en,-on.width/2),on.width/2),Math.min(Math.max(Math.round(fx[1]/en)*en,-on.height/2),on.height/2)]:[Math.round(fx[0]/en)*en,Math.round(fx[1]/en)*en]}function Cn(){d.selectAll(".visiojs_hover_rect").style("opacity","0"),d.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),d.selectAll(".visiojs_selected_wire").classed("visiojs_selected_wire",!1),d.selectAll(".visiojs_selected_connector").classed("visiojs_selected_connector",!1),d.selectAll(".visiojs_elbow").remove(),p.length=0,X$1("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")}function ex(fx){const ux=Q;var gx=t.wires[fx];if(!gx)return;var yx=X$1(`#shape_${gx.start.shapeID}`);if(yx.empty()){console.log("ERROR - cannot find shapeID",gx.start.shapeID);return}var _x=X$1(`#shape_${gx.end.shapeID}`);if(_x.empty()){console.log("ERROR - cannot find shapeID",gx.end.shapeID);return}const vx=`wire_${fx}`;var bx=X$1(`#${vx}`),xx;bx.empty()?(bx=ux.insert("g").attr("id",`wire_${fx}`),xx=bx.insert("path").attr("class","visiojs_wire")):xx=bx.select("path");const Sx=cf(yx,gx.start.shapeID,gx.start.connectorID,t,gn),Ax=cf(_x,gx.end.shapeID,gx.end.connectorID,t,gn),Cx=[Sx,...gx.points,Ax],Tx=zo("manhattan",Cx,gn,bx,null,Px=>lx(Px),fx);return bx.on("click",function(Px){if(Px.stopPropagation(),c.shapeID!==null)return;var Fx=d.select(`#connector_${gx.start.shapeID}_${gx.start.connectorID}`),Mx=d.select(`#connector_${gx.end.shapeID}_${gx.end.connectorID}`);console.log("removing pointer events from shapes"),X$1("#visiojs_shapes").style("pointer-events","none").style("opacity","0.9");const Dx=[Sx,...gx.points,Ax];zo("manhattan",Dx,gn,bx,!0,Lx=>lx(Lx),fx),xx.classed("visiojs_selected_wire",!0),bx.raise(),Fx.classed("visiojs_selected_connector",!0),Mx.classed("visiojs_selected_connector",!0);const Ox=p.indexOf(vx);Ox===-1?p.push(vx):(p.splice(Ox,1),xx.classed("visiojs_selected_wire",!1),Fx.classed("visiojs_selected_connector",!1),Mx.classed("visiojs_selected_connector",!1),bx.lower(),ar.lower(),bx.selectAll(".visiojs_elbow").remove(),p.filter(Lx=>Lx.startsWith("wire")).length==0&&(console.log("re-enabling pointer events on shapes"),X$1("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")))}),Tx}function ix(){for(let fx=0;fx<t.shapes.length;fx++){const ux=t.shapes[fx];ux&&su({id:fx,data:ux,selected:p,wireStart:c,snapAndClipToGrid:gn,initialState:t,redrawWireOnShape:ox,stateChanged:n,drawWire:ex})}for(let fx=0;fx<t.wires.length;fx++)ex(fx)}function ax(fx,ux,gx,yx){if(!X$1("#visiojs_grid").empty())return;ar=fx.append("g").attr("id","visiojs_grid");const _x=[];for(let vx=-ux/2;vx<ux/2;vx+=yx)_x.push({x1:vx,y1:-gx/2,x2:vx,y2:gx/2});for(let vx=-gx/2;vx<gx/2;vx+=yx)_x.push({x1:-ux/2,y1:vx,x2:ux/2,y2:vx});ar.selectAll("line.grid-line").data(_x).join("line").attr("class","visiojs_grid_line").attr("x1",vx=>vx.x1).attr("y1",vx=>vx.y1).attr("x2",vx=>vx.x2).attr("y2",vx=>vx.y2)}function ox({shapeID:fx,save:ux=!1,origXY:gx=[],delta:yx={}}){for(const vx in t.wires){if(!t.wires[vx])continue;const bx=t.wires[vx].start.shapeID==fx,xx=t.wires[vx].end.shapeID==fx;var _x=t.wires[vx].start.connectorID;if(xx&&(_x=t.wires[vx].end.connectorID),bx||xx){if(gx.length>0&&t.wires[vx].points.length>0){const Ax=gx[_x],Cx=t.wires[vx].points[0],Tx=t.wires[vx].points[t.wires[vx].points.length-1];bx?Ax[0]==Cx[0]?Cx[0]+=yx.x:Cx[1]+=yx.y:xx&&(Ax[0]==Tx[0]?Tx[0]+=yx.x:Tx[1]+=yx.y)}const Sx=ex(vx);ux&&(t.wires[vx].points=Sx)}}}const lx=fx=>{W7({d3:H7,snapAndClipToGrid:gn,elbSvg:fx.elbow,wireID:fx.wireID,initialState:t,elbowID:fx.elbowID,redrawWire:fx.redrawWire,start:fx.start,end:fx.end,stateChanged:n})};function cx(fx,ux=null,gx=null){Cn(),a.node().focus();const yx=JSON.parse(JSON.stringify(fx));ux!==null&&(yx.x=ux),gx!==null&&(yx.y=gx);var _x=t.shapes.indexOf(null);_x==-1?(_x=t.shapes.length,t.shapes.push(yx)):t.shapes[_x]=yx,n(t),su({id:_x,data:yx,selected:p,selectIt:!0,wireStart:c,snapAndClipToGrid:gn,initialState:t,redrawWireOnShape:ox,stateChanged:n,drawWire:ex})}function dx(){for(const fx of p){X$1(`#${fx}`).remove();const ux=fx.split("_");ux[0]=="shape"?(t.shapes[ux[1]]=null,t.wires=t.wires.map((gx,yx)=>gx&&(gx.start.shapeID==ux[1]||gx.end.shapeID==ux[1]?(X$1(`#wire_${yx}`).remove(),null):gx))):ux[0]=="wire"&&(t.wires[ux[1]]=null)}n(t),Cn()}function hx(fx){Cn();const ux=JSON.parse(JSON.stringify(t));if(t.shapes=JSON.parse(JSON.stringify(fx.shapes)),t.wires=JSON.parse(JSON.stringify(fx.wires)),Ii(ux.shapes,t.shapes))if(Ii(ux.wires,t.wires))console.log("it's all the same");else{if(t.wires.length<ux.wires.length){X$1(`#wire_${ux.wires.length-1}`).remove();return}for(const yx in t.wires)Ii(ux.wires[yx],t.wires[yx])||ex(yx)}else{console.log("shapes are different");var gx=!1;if(t.shapes.length<ux.shapes.length){X$1(`#shape_${ux.shapes.length-1}`).remove();return}for(const yx in t.shapes)Ii(ux.shapes[yx],t.shapes[yx])||(console.log("delta in id ",yx),gx=!0,su({id:yx,data:t.shapes[yx],selected:p,wireStart:c,snapAndClipToGrid:gn,initialState:t,redrawWireOnShape:ox,stateChanged:n,drawWire:ex}),ox({shapeID:yx}));if(gx)return;console.log("ERROR - some shape change but not sure what was changed?")}}return{addShape:cx,deleteSelected:dx,redraw:hx,init:cn}};function elementMapper(t){const n=t.image.split(".")[0],a=t.label?t.label.text:"";return t.image=="vin.svg"?{type:"vin",name:"vin"}:t.image=="iin.svg"?{type:"iin",name:"iin"}:t.image=="gnd.svg"?{type:"gnd",name:"gnd"}:{type:n,name:a}}function createNodeMap(t,n){var a=[];const l={},u={};var c=[];t.shapes.map(Cn=>{if(Cn!==null&&"connectors"in Cn){var ex=elementMapper(Cn);l[ex.name]={type:ex.type,portConnections:Array(Cn.connectors.length).fill(!1)}}});var p,d,Q,Ct=null,ar=[];for(const Cn of t.wires){if(Cn==null)continue;const ex=elementMapper(t.shapes[Cn.start.shapeID]),ix=elementMapper(t.shapes[Cn.end.shapeID]);p={...ex,port:Cn.start.connectorID},d={...ix,port:Cn.end.connectorID},l[ex.name].portConnections[Cn.start.connectorID]=!0,l[ix.name].portConnections[Cn.end.connectorID]=!0,ar.push([p,d])}var en;do{en=!1;e:for(Q in ar)for(const Cn in ar[Q]){const ex=ar[Q][Cn];for(const ix in ar){if(ix==Q)continue;const ax=ar[ix];for(const ox in ax){const lx=ax[ox];if(ex.name==lx.name&&ex.port==lx.port){ar[ix]=[...ar[ix],...ar[Q]],ar.splice(Q,1),en=!0;break e}}}}}while(en);e:for(const Cn in ar){const ex=ar[Cn];for(const ix of ex)if(ix.type=="gnd"){ar.splice(Cn,1);break e}}for(const Cn in ar)for(let ex=0;ex<ar[Cn].length;ex++){const ix=ar[Cn][ex];for(let ax=ex+1;ax<ar[Cn].length;ax++){const ox=ar[Cn][ax];ix.name==ox.name&&ix.port==ox.port&&(ar[Cn].splice(ax,1),ax--)}}a=ar;for(const[Cn,ex]of Object.entries(l))if(ex.portConnections.includes(!1))for(const ix in a)a[ix]=a[ix].filter(ax=>ax.name!=Cn);for(const Cn in a)for(const ex of a[Cn])(ex.type=="vin"||ex.type=="iin")&&(Ct=Cn);if(Ct!==null){for(var tn=[Ct],on=a[Ct].map(Cn=>Cn.name),cn,gn=0;gn<on.length;gn++)for(const Cn in a)if(!tn.includes(Cn)){cn=!1;for(const ex of a[Cn])on.includes(ex.name)&&(cn||tn.push(Cn),cn=!0,on.push(...a[Cn].map(ix=>ix.name).filter(ix=>!on.includes(ix))))}c=tn.map(Cn=>a[Cn]),c.forEach((Cn,ex)=>{Cn.forEach(ix=>{ix.name in u||(u[ix.name]={ports:Array(n[ix.type].connectors.length).fill(null),type:ix.type}),u[ix.name].ports[ix.port]=ex})})}return{nodeMap:c,components:l,fullyConnectedComponents:u}}function r(t){var n,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var u=t.length;for(n=0;n<u;n++)t[n]&&(a=r(t[n]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}function clsx(){for(var t,n,a=0,l="",u=arguments.length;a<u;a++)(t=arguments[a])&&(n=r(t))&&(l&&(l+=" "),l+=n);return l}function resolveProps(t,n){const a={...n};for(const l in t)if(Object.prototype.hasOwnProperty.call(t,l)){const u=l;if(u==="components"||u==="slots")a[u]={...t[u],...a[u]};else if(u==="componentsProps"||u==="slotProps"){const c=t[u],p=n[u];if(!p)a[u]=c||{};else if(!c)a[u]=p;else{a[u]={...p};for(const d in c)if(Object.prototype.hasOwnProperty.call(c,d)){const Q=d;a[u][Q]=resolveProps(c[Q],p[Q])}}}else a[u]===void 0&&(a[u]=t[u])}return a}function composeClasses(t,n,a=void 0){const l={};for(const u in t){const c=t[u];let p="",d=!0;for(let Q=0;Q<c.length;Q+=1){const Ct=c[Q];Ct&&(p+=(d===!0?"":" ")+n(Ct),d=!1,a&&a[Ct]&&(p+=" "+a[Ct]))}l[u]=p}return l}function formatMuiErrorMessage(t,...n){const a=new URL(`https://mui.com/production-error/?code=${t}`);return n.forEach(l=>a.searchParams.append("args[]",l)),`Minified MUI error #${t}; visit ${a} for the full message.`}function clamp$1(t,n=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(t,a))}function clampWrapper(t,n=0,a=1){return clamp$1(t,n,a)}function hexToRgb(t){t=t.slice(1);const n=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let a=t.match(n);return a&&a[0].length===1&&(a=a.map(l=>l+l)),a?`rgb${a.length===4?"a":""}(${a.map((l,u)=>u<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(t){if(t.type)return t;if(t.charAt(0)==="#")return decomposeColor(hexToRgb(t));const n=t.indexOf("("),a=t.substring(0,n);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(formatMuiErrorMessage(9,t));let l=t.substring(n+1,t.length-1),u;if(a==="color"){if(l=l.split(" "),u=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(u))throw new Error(formatMuiErrorMessage(10,u))}else l=l.split(",");return l=l.map(c=>parseFloat(c)),{type:a,values:l,colorSpace:u}}const colorChannel=t=>{const n=decomposeColor(t);return n.values.slice(0,3).map((a,l)=>n.type.includes("hsl")&&l!==0?`${a}%`:a).join(" ")},private_safeColorChannel=(t,n)=>{try{return colorChannel(t)}catch{return t}};function recomposeColor(t){const{type:n,colorSpace:a}=t;let{values:l}=t;return n.includes("rgb")?l=l.map((u,c)=>c<3?parseInt(u,10):u):n.includes("hsl")&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),n.includes("color")?l=`${a} ${l.join(" ")}`:l=`${l.join(", ")}`,`${n}(${l})`}function hslToRgb(t){t=decomposeColor(t);const{values:n}=t,a=n[0],l=n[1]/100,u=n[2]/100,c=l*Math.min(u,1-u),p=(Ct,ar=(Ct+a/30)%12)=>u-c*Math.max(Math.min(ar-3,9-ar,1),-1);let d="rgb";const Q=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return t.type==="hsla"&&(d+="a",Q.push(n[3])),recomposeColor({type:d,values:Q})}function getLuminance(t){t=decomposeColor(t);let n=t.type==="hsl"||t.type==="hsla"?decomposeColor(hslToRgb(t)).values:t.values;return n=n.map(a=>(t.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function getContrastRatio(t,n){const a=getLuminance(t),l=getLuminance(n);return(Math.max(a,l)+.05)/(Math.min(a,l)+.05)}function alpha$1(t,n){return t=decomposeColor(t),n=clampWrapper(n),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${n}`:t.values[3]=n,recomposeColor(t)}function private_safeAlpha(t,n,a){try{return alpha$1(t,n)}catch{return t}}function darken(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]*=1-n;else if(t.type.includes("rgb")||t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]*=1-n;return recomposeColor(t)}function private_safeDarken(t,n,a){try{return darken(t,n)}catch{return t}}function lighten(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*n;else if(t.type.includes("rgb"))for(let a=0;a<3;a+=1)t.values[a]+=(255-t.values[a])*n;else if(t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]+=(1-t.values[a])*n;return recomposeColor(t)}function private_safeLighten(t,n,a){try{return lighten(t,n)}catch{return t}}function emphasize(t,n=.15){return getLuminance(t)>.5?darken(t,n):lighten(t,n)}function private_safeEmphasize(t,n,a){try{return emphasize(t,n)}catch{return t}}const defaultGenerator=t=>t,createClassNameGenerator=()=>{let t=defaultGenerator;return{configure(n){t=n},generate(n){return t(n)},reset(){t=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function capitalize(t){if(typeof t!="string")throw new Error(formatMuiErrorMessage(7));return t.charAt(0).toUpperCase()+t.slice(1)}function createChainedFunction(...t){return t.reduce((n,a)=>a==null?n:function(...u){n.apply(this,u),a.apply(this,u)},()=>{})}var reactIs$1={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),ar=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),tn=Symbol.for("react.view_transition"),on=Symbol.for("react.client.reference");function cn(gn){if(typeof gn=="object"&&gn!==null){var Cn=gn.$$typeof;switch(Cn){case t:switch(gn=gn.type,gn){case a:case u:case l:case Q:case Ct:case tn:return gn;default:switch(gn=gn&&gn.$$typeof,gn){case p:case d:case en:case ar:return gn;case c:return gn;default:return Cn}}case n:return Cn}}}return reactIs_production.ContextConsumer=c,reactIs_production.ContextProvider=p,reactIs_production.Element=t,reactIs_production.ForwardRef=d,reactIs_production.Fragment=a,reactIs_production.Lazy=en,reactIs_production.Memo=ar,reactIs_production.Portal=n,reactIs_production.Profiler=u,reactIs_production.StrictMode=l,reactIs_production.Suspense=Q,reactIs_production.SuspenseList=Ct,reactIs_production.isContextConsumer=function(gn){return cn(gn)===c},reactIs_production.isContextProvider=function(gn){return cn(gn)===p},reactIs_production.isElement=function(gn){return typeof gn=="object"&&gn!==null&&gn.$$typeof===t},reactIs_production.isForwardRef=function(gn){return cn(gn)===d},reactIs_production.isFragment=function(gn){return cn(gn)===a},reactIs_production.isLazy=function(gn){return cn(gn)===en},reactIs_production.isMemo=function(gn){return cn(gn)===ar},reactIs_production.isPortal=function(gn){return cn(gn)===n},reactIs_production.isProfiler=function(gn){return cn(gn)===u},reactIs_production.isStrictMode=function(gn){return cn(gn)===l},reactIs_production.isSuspense=function(gn){return cn(gn)===Q},reactIs_production.isSuspenseList=function(gn){return cn(gn)===Ct},reactIs_production.isValidElementType=function(gn){return typeof gn=="string"||typeof gn=="function"||gn===a||gn===u||gn===l||gn===Q||gn===Ct||typeof gn=="object"&&gn!==null&&(gn.$$typeof===en||gn.$$typeof===ar||gn.$$typeof===p||gn.$$typeof===c||gn.$$typeof===d||gn.$$typeof===on||gn.getModuleId!==void 0)},reactIs_production.typeOf=cn,reactIs_production}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production()),reactIs$1.exports}var reactIsExports=requireReactIs$1();function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function deepClone(t){if(reactExports.isValidElement(t)||reactIsExports.isValidElementType(t)||!isPlainObject(t))return t;const n={};return Object.keys(t).forEach(a=>{n[a]=deepClone(t[a])}),n}function deepmerge(t,n,a={clone:!0}){const l=a.clone?{...t}:t;return isPlainObject(t)&&isPlainObject(n)&&Object.keys(n).forEach(u=>{reactExports.isValidElement(n[u])||reactIsExports.isValidElementType(n[u])?l[u]=n[u]:isPlainObject(n[u])&&Object.prototype.hasOwnProperty.call(t,u)&&isPlainObject(t[u])?l[u]=deepmerge(t[u],n[u],a):a.clone?l[u]=isPlainObject(n[u])?deepClone(n[u]):n[u]:l[u]=n[u]}),l}function merge$1(t,n){return n?deepmerge(t,n,{clone:!1}):t}function sortContainerQueries(t,n){if(!t.containerQueries)return n;const a=Object.keys(n).filter(l=>l.startsWith("@container")).sort((l,u)=>{var p,d;const c=/min-width:\s*([0-9.]+)/;return+(((p=l.match(c))==null?void 0:p[1])||0)-+(((d=u.match(c))==null?void 0:d[1])||0)});return a.length?a.reduce((l,u)=>{const c=n[u];return delete l[u],l[u]=c,l},{...n}):n}function isCqShorthand(t,n){return n==="@"||n.startsWith("@")&&(t.some(a=>n.startsWith(`@${a}`))||!!n.match(/^@\d/))}function getContainerQuery(t,n){const a=n.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,l,u]=a,c=Number.isNaN(+l)?l||0:+l;return t.containerQueries(u).up(c)}function cssContainerQueries(t){const n=(c,p)=>c.replace("@media",p?`@container ${p}`:"@container");function a(c,p){c.up=(...d)=>n(t.breakpoints.up(...d),p),c.down=(...d)=>n(t.breakpoints.down(...d),p),c.between=(...d)=>n(t.breakpoints.between(...d),p),c.only=(...d)=>n(t.breakpoints.only(...d),p),c.not=(...d)=>{const Q=n(t.breakpoints.not(...d),p);return Q.includes("not all and")?Q.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):Q}}const l={},u=c=>(a(l,c),l);return a(u),{...t,containerQueries:u}}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${values$1[t]}px)`},defaultContainerQueries={containerQueries:t=>({up:n=>{let a=typeof n=="number"?n:values$1[n]||n;return typeof a=="number"&&(a=`${a}px`),t?`@container ${t} (min-width:${a})`:`@container (min-width:${a})`}})};function handleBreakpoints(t,n,a){const l=t.theme||{};if(Array.isArray(n)){const c=l.breakpoints||defaultBreakpoints;return n.reduce((p,d,Q)=>(p[c.up(c.keys[Q])]=a(n[Q]),p),{})}if(typeof n=="object"){const c=l.breakpoints||defaultBreakpoints;return Object.keys(n).reduce((p,d)=>{if(isCqShorthand(c.keys,d)){const Q=getContainerQuery(l.containerQueries?l:defaultContainerQueries,d);Q&&(p[Q]=a(n[d],d))}else if(Object.keys(c.values||values$1).includes(d)){const Q=c.up(d);p[Q]=a(n[d],d)}else{const Q=d;p[Q]=n[Q]}return p},{})}return a(n)}function createEmptyBreakpointObject(t={}){var a;return((a=t.keys)==null?void 0:a.reduce((l,u)=>{const c=t.up(u);return l[c]={},l},{}))||{}}function removeUnusedBreakpoints(t,n){return t.reduce((a,l)=>{const u=a[l];return(!u||Object.keys(u).length===0)&&delete a[l],a},n)}function mergeBreakpointsInOrder(t,...n){const a=createEmptyBreakpointObject(t),l=[a,...n].reduce((u,c)=>deepmerge(u,c),{});return removeUnusedBreakpoints(Object.keys(a),l)}function computeBreakpointsBase(t,n){if(typeof t!="object")return{};const a={},l=Object.keys(n);return Array.isArray(t)?l.forEach((u,c)=>{c<t.length&&(a[u]=!0)}):l.forEach(u=>{t[u]!=null&&(a[u]=!0)}),a}function resolveBreakpointValues({values:t,breakpoints:n,base:a}){const l=a||computeBreakpointsBase(t,n),u=Object.keys(l);if(u.length===0)return t;let c;return u.reduce((p,d,Q)=>(Array.isArray(t)?(p[d]=t[Q]!=null?t[Q]:t[c],c=Q):typeof t=="object"?(p[d]=t[d]!=null?t[d]:t[c],c=d):p[d]=t,p),{})}function getPath(t,n,a=!0){if(!n||typeof n!="string")return null;if(t&&t.vars&&a){const l=`vars.${n}`.split(".").reduce((u,c)=>u&&u[c]?u[c]:null,t);if(l!=null)return l}return n.split(".").reduce((l,u)=>l&&l[u]!=null?l[u]:null,t)}function getStyleValue$1(t,n,a,l=a){let u;return typeof t=="function"?u=t(a):Array.isArray(t)?u=t[a]||l:u=getPath(t,a)||l,n&&(u=n(u,l,t)),u}function style$2(t){const{prop:n,cssProperty:a=t.prop,themeKey:l,transform:u}=t,c=p=>{if(p[n]==null)return null;const d=p[n],Q=p.theme,Ct=getPath(Q,l)||{};return handleBreakpoints(p,d,en=>{let tn=getStyleValue$1(Ct,u,en);return en===tn&&typeof en=="string"&&(tn=getStyleValue$1(Ct,u,`${n}${en==="default"?"":capitalize(en)}`,en)),a===!1?tn:{[a]:tn}})};return c.propTypes={},c.filterProps=[n],c}function memoize$1(t){const n={};return a=>(n[a]===void 0&&(n[a]=t(a)),n[a])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$1(t=>{if(t.length>2)if(aliases[t])t=aliases[t];else return[t];const[n,a]=t.split(""),l=properties[n],u=directions[a]||"";return Array.isArray(u)?u.map(c=>l+c):[l+u]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(t,n,a,l){const u=getPath(t,n,!0)??a;return typeof u=="number"||typeof u=="string"?c=>typeof c=="string"?c:typeof u=="string"?u.startsWith("var(")&&c===0?0:u.startsWith("var(")&&c===1?u:`calc(${c} * ${u})`:u*c:Array.isArray(u)?c=>{if(typeof c=="string")return c;const p=Math.abs(c),d=u[p];return c>=0?d:typeof d=="number"?-d:typeof d=="string"&&d.startsWith("var(")?`calc(-1 * ${d})`:`-${d}`}:typeof u=="function"?u:()=>{}}function createUnarySpacing(t){return createUnaryUnit(t,"spacing",8)}function getValue(t,n){return typeof n=="string"||n==null?n:t(n)}function getStyleFromPropValue(t,n){return a=>t.reduce((l,u)=>(l[u]=getValue(n,a),l),{})}function resolveCssProperty(t,n,a,l){if(!n.includes(a))return null;const u=getCssProperties(a),c=getStyleFromPropValue(u,l),p=t[a];return handleBreakpoints(t,p,c)}function style$1(t,n){const a=createUnarySpacing(t.theme);return Object.keys(t).map(l=>resolveCssProperty(t,n,l,a)).reduce(merge$1,{})}function margin(t){return style$1(t,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(t){return style$1(t,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function compose(...t){const n=t.reduce((l,u)=>(u.filterProps.forEach(c=>{l[c]=u}),l),{}),a=l=>Object.keys(l).reduce((u,c)=>n[c]?merge$1(u,n[c](l)):u,{});return a.propTypes={},a.filterProps=t.reduce((l,u)=>l.concat(u.filterProps),[]),a}function borderTransform(t){return typeof t!="number"?t:`${t}px solid`}function createBorderStyle(t,n){return style$2({prop:t,themeKey:"borders",transform:n})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const n=createUnaryUnit(t.theme,"shape.borderRadius",4),a=l=>({borderRadius:getValue(n,l)});return handleBreakpoints(t,t.borderRadius,a)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=t=>{if(t.gap!==void 0&&t.gap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=l=>({gap:getValue(n,l)});return handleBreakpoints(t,t.gap,a)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=l=>({columnGap:getValue(n,l)});return handleBreakpoints(t,t.columnGap,a)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=l=>({rowGap:getValue(n,l)});return handleBreakpoints(t,t.rowGap,a)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(t,n){return n==="grey"?n:t}const color$1=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor$1=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor$1);function sizingTransform(t){return t<=1&&t!==0?`${t*100}%`:t}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const n=a=>{var u,c,p,d,Q;const l=((p=(c=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:c.values)==null?void 0:p[a])||values$1[a];return l?((Q=(d=t.theme)==null?void 0:d.breakpoints)==null?void 0:Q.unit)!=="px"?{maxWidth:`${l}${t.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:sizingTransform(a)}};return handleBreakpoints(t,t.maxWidth,n)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...t){const n=t.reduce((l,u)=>l.concat(Object.keys(u)),[]),a=new Set(n);return t.every(l=>a.size===Object.keys(l).length)}function callIfFn(t,n){return typeof t=="function"?t(n):t}function unstable_createStyleFunctionSx(){function t(a,l,u,c){const p={[a]:l,theme:u},d=c[a];if(!d)return{[a]:l};const{cssProperty:Q=a,themeKey:Ct,transform:ar,style:en}=d;if(l==null)return null;if(Ct==="typography"&&l==="inherit")return{[a]:l};const tn=getPath(u,Ct)||{};return en?en(p):handleBreakpoints(p,l,cn=>{let gn=getStyleValue$1(tn,ar,cn);return cn===gn&&typeof cn=="string"&&(gn=getStyleValue$1(tn,ar,`${a}${cn==="default"?"":capitalize(cn)}`,cn)),Q===!1?gn:{[Q]:gn}})}function n(a){const{sx:l,theme:u={}}=a||{};if(!l)return null;const c=u.unstable_sxConfig??defaultSxConfig;function p(d){let Q=d;if(typeof d=="function")Q=d(u);else if(typeof d!="object")return d;if(!Q)return null;const Ct=createEmptyBreakpointObject(u.breakpoints),ar=Object.keys(Ct);let en=Ct;return Object.keys(Q).forEach(tn=>{const on=callIfFn(Q[tn],u);if(on!=null)if(typeof on=="object")if(c[tn])en=merge$1(en,t(tn,on,u,c));else{const cn=handleBreakpoints({theme:u},on,gn=>({[tn]:gn}));objectsHaveSameKeys(cn,on)?en[tn]=n({sx:on,theme:u}):en=merge$1(en,cn)}else en=merge$1(en,t(tn,on,u,c))}),sortContainerQueries(u,removeUnusedBreakpoints(ar,en))}return Array.isArray(l)?l.map(p):p(l)}return n}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const splitProps=t=>{var l;const n={systemProps:{},otherProps:{}},a=((l=t==null?void 0:t.theme)==null?void 0:l.unstable_sxConfig)??defaultSxConfig;return Object.keys(t).forEach(u=>{a[u]?n.systemProps[u]=t[u]:n.otherProps[u]=t[u]}),n};function extendSxProp$1(t){const{sx:n,...a}=t,{systemProps:l,otherProps:u}=splitProps(a);let c;return Array.isArray(n)?c=[l,...n]:typeof n=="function"?c=(...p)=>{const d=n(...p);return isPlainObject(d)?{...l,...d}:l}:c={...l,...n},{...u,sx:c}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)({}).hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},_extends.apply(null,arguments)}function sheetForTag(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function createStyleElement(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var StyleSheet=function(){function t(a){var l=this;this._insertTag=function(u){var c;l.tags.length===0?l.insertionPoint?c=l.insertionPoint.nextSibling:l.prepend?c=l.container.firstChild:c=l.before:c=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(u,c),l.tags.push(u)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(l){l.forEach(this._insertTag)},n.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var c=sheetForTag(u);try{c.insertRule(l,c.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(l));this.ctr++},n.flush=function(){this.tags.forEach(function(l){var u;return(u=l.parentNode)==null?void 0:u.removeChild(l)}),this.tags=[],this.ctr=0},t}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$4=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(t,n){return charat(t,0)^45?(((n<<2^charat(t,0))<<2^charat(t,1))<<2^charat(t,2))<<2^charat(t,3):0}function trim$2(t){return t.trim()}function match(t,n){return(t=n.exec(t))?t[0]:t}function replace(t,n,a){return t.replace(n,a)}function indexof(t,n){return t.indexOf(n)}function charat(t,n){return t.charCodeAt(n)|0}function substr(t,n,a){return t.slice(n,a)}function strlen(t){return t.length}function sizeof(t){return t.length}function append$1(t,n){return n.push(t),t}function combine(t,n){return t.map(n).join("")}var line=1,column=1,length$1=0,position$1=0,character=0,characters="";function node(t,n,a,l,u,c,p){return{value:t,root:n,parent:a,type:l,props:u,children:c,line,column,length:p,return:""}}function copy$2(t,n){return assign(node("",null,null,"",null,null,0),t,{length:-t.length},n)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length$1?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice$1(t,n){return substr(characters,t,n)}function token(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(t){return line=column=1,length$1=strlen(characters=t),position$1=0,[]}function dealloc(t){return characters="",t}function delimit(t){return trim$2(slice$1(position$1-1,delimiter(t===91?t+2:t===40?t+1:t)))}function whitespace(t){for(;(character=peek())&&character<33;)next();return token(t)>2||token(character)>3?"":" "}function escaping(t,n){for(;--n&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(t,caret()+(n<6&&peek()==32&&next()==32))}function delimiter(t){for(;next();)switch(character){case t:return position$1;case 34:case 39:t!==34&&t!==39&&delimiter(character);break;case 40:t===41&&delimiter(t);break;case 92:next();break}return position$1}function commenter(t,n){for(;next()&&t+character!==57;)if(t+character===84&&peek()===47)break;return"/*"+slice$1(n,position$1-1)+"*"+from(t===47?t:next())}function identifier(t){for(;!token(peek());)next();return slice$1(t,position$1)}function compile(t){return dealloc(parse$1("",null,null,null,[""],t=alloc(t),0,[0],t))}function parse$1(t,n,a,l,u,c,p,d,Q){for(var Ct=0,ar=0,en=p,tn=0,on=0,cn=0,gn=1,Cn=1,ex=1,ix=0,ax="",ox=u,lx=c,cx=l,dx=ax;Cn;)switch(cn=ix,ix=next()){case 40:if(cn!=108&&charat(dx,en-1)==58){indexof(dx+=replace(delimit(ix),"&","&\f"),"&\f")!=-1&&(ex=-1);break}case 34:case 39:case 91:dx+=delimit(ix);break;case 9:case 10:case 13:case 32:dx+=whitespace(cn);break;case 92:dx+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append$1(comment(commenter(next(),caret()),n,a),Q);break;default:dx+="/"}break;case 123*gn:d[Ct++]=strlen(dx)*ex;case 125*gn:case 59:case 0:switch(ix){case 0:case 125:Cn=0;case 59+ar:ex==-1&&(dx=replace(dx,/\f/g,"")),on>0&&strlen(dx)-en&&append$1(on>32?declaration(dx+";",l,a,en-1):declaration(replace(dx," ","")+";",l,a,en-2),Q);break;case 59:dx+=";";default:if(append$1(cx=ruleset(dx,n,a,Ct,ar,u,d,ax,ox=[],lx=[],en),c),ix===123)if(ar===0)parse$1(dx,n,cx,cx,ox,c,en,d,lx);else switch(tn===99&&charat(dx,3)===110?100:tn){case 100:case 108:case 109:case 115:parse$1(t,cx,cx,l&&append$1(ruleset(t,cx,cx,0,0,u,d,ax,u,ox=[],en),lx),u,lx,en,d,l?ox:lx);break;default:parse$1(dx,cx,cx,cx,[""],lx,0,d,lx)}}Ct=ar=on=0,gn=ex=1,ax=dx="",en=p;break;case 58:en=1+strlen(dx),on=cn;default:if(gn<1){if(ix==123)--gn;else if(ix==125&&gn++==0&&prev()==125)continue}switch(dx+=from(ix),ix*gn){case 38:ex=ar>0?1:(dx+="\f",-1);break;case 44:d[Ct++]=(strlen(dx)-1)*ex,ex=1;break;case 64:peek()===45&&(dx+=delimit(next())),tn=peek(),ar=en=strlen(ax=dx+=identifier(caret())),ix++;break;case 45:cn===45&&strlen(dx)==2&&(gn=0)}}return c}function ruleset(t,n,a,l,u,c,p,d,Q,Ct,ar){for(var en=u-1,tn=u===0?c:[""],on=sizeof(tn),cn=0,gn=0,Cn=0;cn<l;++cn)for(var ex=0,ix=substr(t,en+1,en=abs$4(gn=p[cn])),ax=t;ex<on;++ex)(ax=trim$2(gn>0?tn[ex]+" "+ix:replace(ix,/&\f/g,tn[ex])))&&(Q[Cn++]=ax);return node(t,n,a,u===0?RULESET:d,Q,Ct,ar)}function comment(t,n,a){return node(t,n,a,COMMENT,from(char()),substr(t,2,-2),0)}function declaration(t,n,a,l){return node(t,n,a,DECLARATION,substr(t,0,l),substr(t,l+1,-1),l)}function serialize(t,n){for(var a="",l=sizeof(t),u=0;u<l;u++)a+=n(t[u],u,t,n)||"";return a}function stringify$1(t,n,a,l){switch(t.type){case LAYER:if(t.children.length)break;case IMPORT:case DECLARATION:return t.return=t.return||t.value;case COMMENT:return"";case KEYFRAMES:return t.return=t.value+"{"+serialize(t.children,l)+"}";case RULESET:t.value=t.props.join(",")}return strlen(a=serialize(t.children,l))?t.return=t.value+"{"+a+"}":""}function middleware(t){var n=sizeof(t);return function(a,l,u,c){for(var p="",d=0;d<n;d++)p+=t[d](a,l,u,c)||"";return p}}function rulesheet(t){return function(n){n.root||(n=n.return)&&t(n)}}function memoize(t){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=t(a)),n[a]}}var identifierWithPointTracking=function(n,a,l){for(var u=0,c=0;u=c,c=peek(),u===38&&c===12&&(a[l]=1),!token(c);)next();return slice$1(n,position$1)},toRules=function(n,a){var l=-1,u=44;do switch(token(u)){case 0:u===38&&peek()===12&&(a[l]=1),n[l]+=identifierWithPointTracking(position$1-1,a,l);break;case 2:n[l]+=delimit(u);break;case 4:if(u===44){n[++l]=peek()===58?"&\f":"",a[l]=n[l].length;break}default:n[l]+=from(u)}while(u=next());return n},getRules=function(n,a){return dealloc(toRules(alloc(n),a))},fixedElements=new WeakMap,compat=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,l=n.parent,u=n.column===l.column&&n.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!fixedElements.get(l))&&!u){fixedElements.set(n,!0);for(var c=[],p=getRules(a,c),d=l.props,Q=0,Ct=0;Q<p.length;Q++)for(var ar=0;ar<d.length;ar++,Ct++)n.props[Ct]=c[Q]?p[Q].replace(/&\f/g,d[ar]):d[ar]+" "+p[Q]}}},removeLabel=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function prefix(t,n){switch(hash$2(t,n)){case 5103:return WEBKIT+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+t+MOZ+t+MS+t+t;case 6828:case 4268:return WEBKIT+t+MS+t+t;case 6165:return WEBKIT+t+MS+"flex-"+t+t;case 5187:return WEBKIT+t+replace(t,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+t;case 5443:return WEBKIT+t+MS+"flex-item-"+replace(t,/flex-|-self/,"")+t;case 4675:return WEBKIT+t+MS+"flex-line-pack"+replace(t,/align-content|flex-|-self/,"")+t;case 5548:return WEBKIT+t+MS+replace(t,"shrink","negative")+t;case 5292:return WEBKIT+t+MS+replace(t,"basis","preferred-size")+t;case 6060:return WEBKIT+"box-"+replace(t,"-grow","")+WEBKIT+t+MS+replace(t,"grow","positive")+t;case 4554:return WEBKIT+replace(t,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+t;case 6187:return replace(replace(replace(t,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),t,"")+t;case 5495:case 3959:return replace(t,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(t,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+t+t;case 4095:case 3583:case 4068:case 2532:return replace(t,/(.+)-inline(.+)/,WEBKIT+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(t)-1-n>6)switch(charat(t,n+1)){case 109:if(charat(t,n+4)!==45)break;case 102:return replace(t,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~indexof(t,"stretch")?prefix(replace(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(charat(t,n+1)!==115)break;case 6444:switch(charat(t,strlen(t)-3-(~indexof(t,"!important")&&10))){case 107:return replace(t,":",":"+WEBKIT)+t;case 101:return replace(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(t,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+t}break;case 5936:switch(charat(t,n+11)){case 114:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return WEBKIT+t+MS+t+t}return t}var prefixer=function(n,a,l,u){if(n.length>-1&&!n.return)switch(n.type){case DECLARATION:n.return=prefix(n.value,n.length);break;case KEYFRAMES:return serialize([copy$2(n,{value:replace(n.value,"@","@"+WEBKIT)})],u);case RULESET:if(n.length)return combine(n.props,function(c){switch(match(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy$2(n,{props:[replace(c,/:(read-\w+)/,":"+MOZ+"$1")]})],u);case"::placeholder":return serialize([copy$2(n,{props:[replace(c,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$2(n,{props:[replace(c,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$2(n,{props:[replace(c,/:(plac\w+)/,MS+"input-$1")]})],u)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(n){var a=n.key;if(a==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(gn){var Cn=gn.getAttribute("data-emotion");Cn.indexOf(" ")!==-1&&(document.head.appendChild(gn),gn.setAttribute("data-s",""))})}var u=n.stylisPlugins||defaultStylisPlugins,c={},p,d=[];p=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(gn){for(var Cn=gn.getAttribute("data-emotion").split(" "),ex=1;ex<Cn.length;ex++)c[Cn[ex]]=!0;d.push(gn)});var Q,Ct=[compat,removeLabel];{var ar,en=[stringify$1,rulesheet(function(gn){ar.insert(gn)})],tn=middleware(Ct.concat(u,en)),on=function(Cn){return serialize(compile(Cn),tn)};Q=function(Cn,ex,ix,ax){ar=ix,on(Cn?Cn+"{"+ex.styles+"}":ex.styles),ax&&(cn.inserted[ex.name]=!0)}}var cn={key:a,sheet:new StyleSheet({key:a,container:p,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:c,registered:{},insert:Q};return cn.sheet.hydrate(d),cn},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,l=t?Symbol.for("react.fragment"):60107,u=t?Symbol.for("react.strict_mode"):60108,c=t?Symbol.for("react.profiler"):60114,p=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,Q=t?Symbol.for("react.async_mode"):60111,Ct=t?Symbol.for("react.concurrent_mode"):60111,ar=t?Symbol.for("react.forward_ref"):60112,en=t?Symbol.for("react.suspense"):60113,tn=t?Symbol.for("react.suspense_list"):60120,on=t?Symbol.for("react.memo"):60115,cn=t?Symbol.for("react.lazy"):60116,gn=t?Symbol.for("react.block"):60121,Cn=t?Symbol.for("react.fundamental"):60117,ex=t?Symbol.for("react.responder"):60118,ix=t?Symbol.for("react.scope"):60119;function ax(lx){if(typeof lx=="object"&&lx!==null){var cx=lx.$$typeof;switch(cx){case n:switch(lx=lx.type,lx){case Q:case Ct:case l:case c:case u:case en:return lx;default:switch(lx=lx&&lx.$$typeof,lx){case d:case ar:case cn:case on:case p:return lx;default:return cx}}case a:return cx}}}function ox(lx){return ax(lx)===Ct}return reactIs_production_min.AsyncMode=Q,reactIs_production_min.ConcurrentMode=Ct,reactIs_production_min.ContextConsumer=d,reactIs_production_min.ContextProvider=p,reactIs_production_min.Element=n,reactIs_production_min.ForwardRef=ar,reactIs_production_min.Fragment=l,reactIs_production_min.Lazy=cn,reactIs_production_min.Memo=on,reactIs_production_min.Portal=a,reactIs_production_min.Profiler=c,reactIs_production_min.StrictMode=u,reactIs_production_min.Suspense=en,reactIs_production_min.isAsyncMode=function(lx){return ox(lx)||ax(lx)===Q},reactIs_production_min.isConcurrentMode=ox,reactIs_production_min.isContextConsumer=function(lx){return ax(lx)===d},reactIs_production_min.isContextProvider=function(lx){return ax(lx)===p},reactIs_production_min.isElement=function(lx){return typeof lx=="object"&&lx!==null&&lx.$$typeof===n},reactIs_production_min.isForwardRef=function(lx){return ax(lx)===ar},reactIs_production_min.isFragment=function(lx){return ax(lx)===l},reactIs_production_min.isLazy=function(lx){return ax(lx)===cn},reactIs_production_min.isMemo=function(lx){return ax(lx)===on},reactIs_production_min.isPortal=function(lx){return ax(lx)===a},reactIs_production_min.isProfiler=function(lx){return ax(lx)===c},reactIs_production_min.isStrictMode=function(lx){return ax(lx)===u},reactIs_production_min.isSuspense=function(lx){return ax(lx)===en},reactIs_production_min.isValidElementType=function(lx){return typeof lx=="string"||typeof lx=="function"||lx===l||lx===Ct||lx===c||lx===u||lx===en||lx===tn||typeof lx=="object"&&lx!==null&&(lx.$$typeof===cn||lx.$$typeof===on||lx.$$typeof===p||lx.$$typeof===d||lx.$$typeof===ar||lx.$$typeof===Cn||lx.$$typeof===ex||lx.$$typeof===ix||lx.$$typeof===gn)},reactIs_production_min.typeOf=ax,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var t=requireReactIs(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[t.ForwardRef]=l,c[t.Memo]=u;function p(cn){return t.isMemo(cn)?u:c[cn.$$typeof]||n}var d=Object.defineProperty,Q=Object.getOwnPropertyNames,Ct=Object.getOwnPropertySymbols,ar=Object.getOwnPropertyDescriptor,en=Object.getPrototypeOf,tn=Object.prototype;function on(cn,gn,Cn){if(typeof gn!="string"){if(tn){var ex=en(gn);ex&&ex!==tn&&on(cn,ex,Cn)}var ix=Q(gn);Ct&&(ix=ix.concat(Ct(gn)));for(var ax=p(cn),ox=p(gn),lx=0;lx<ix.length;++lx){var cx=ix[lx];if(!a[cx]&&!(Cn&&Cn[cx])&&!(ox&&ox[cx])&&!(ax&&ax[cx])){var dx=ar(gn,cx);try{d(cn,cx,dx)}catch{}}}}return cn}return hoistNonReactStatics_cjs=on,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(t,n,a){var l="";return a.split(" ").forEach(function(u){t[u]!==void 0?n.push(t[u]+";"):u&&(l+=u+" ")}),l}var registerStyles=function(n,a,l){var u=n.key+"-"+a.name;(l===!1||isBrowser===!1)&&n.registered[u]===void 0&&(n.registered[u]=a.styles)},insertStyles=function(n,a,l){registerStyles(n,a,l);var u=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var c=a;do n.insert(a===c?"."+u:"",c,n.sheet,!0),c=c.next;while(c!==void 0)}};function murmur2(t){for(var n=0,a,l=0,u=t.length;u>=4;++l,u-=4)a=t.charCodeAt(l)&255|(t.charCodeAt(++l)&255)<<8|(t.charCodeAt(++l)&255)<<16|(t.charCodeAt(++l)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(u){case 3:n^=(t.charCodeAt(l+2)&255)<<16;case 2:n^=(t.charCodeAt(l+1)&255)<<8;case 1:n^=t.charCodeAt(l)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(n){return n.charCodeAt(1)===45},isProcessableValue=function(n){return n!=null&&typeof n!="boolean"},processStyleName=memoize(function(t){return isCustomProperty(t)?t:t.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(animationRegex,function(l,u,c){return cursor={name:u,styles:c,next:cursor},u})}return unitlessKeys[n]!==1&&!isCustomProperty(n)&&typeof a=="number"&&a!==0?a+"px":a};function handleInterpolation(t,n,a){if(a==null)return"";var l=a;if(l.__emotion_styles!==void 0)return l;switch(typeof a){case"boolean":return"";case"object":{var u=a;if(u.anim===1)return cursor={name:u.name,styles:u.styles,next:cursor},u.name;var c=a;if(c.styles!==void 0){var p=c.next;if(p!==void 0)for(;p!==void 0;)cursor={name:p.name,styles:p.styles,next:cursor},p=p.next;var d=c.styles+";";return d}return createStringFromObject(t,n,a)}case"function":{if(t!==void 0){var Q=cursor,Ct=a(t);return cursor=Q,handleInterpolation(t,n,Ct)}break}}var ar=a;if(n==null)return ar;var en=n[ar];return en!==void 0?en:ar}function createStringFromObject(t,n,a){var l="";if(Array.isArray(a))for(var u=0;u<a.length;u++)l+=handleInterpolation(t,n,a[u])+";";else for(var c in a){var p=a[c];if(typeof p!="object"){var d=p;n!=null&&n[d]!==void 0?l+=c+"{"+n[d]+"}":isProcessableValue(d)&&(l+=processStyleName(c)+":"+processStyleValue(c,d)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&(n==null||n[p[0]]===void 0))for(var Q=0;Q<p.length;Q++)isProcessableValue(p[Q])&&(l+=processStyleName(c)+":"+processStyleValue(c,p[Q])+";");else{var Ct=handleInterpolation(t,n,p);switch(c){case"animation":case"animationName":{l+=processStyleName(c)+":"+Ct+";";break}default:l+=c+"{"+Ct+"}"}}}return l}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,u="";cursor=void 0;var c=t[0];if(c==null||c.raw===void 0)l=!1,u+=handleInterpolation(a,n,c);else{var p=c;u+=p[0]}for(var d=1;d<t.length;d++)if(u+=handleInterpolation(a,n,t[d]),l){var Q=c;u+=Q[d]}labelPattern.lastIndex=0;for(var Ct="",ar;(ar=labelPattern.exec(u))!==null;)Ct+="-"+ar[1];var en=murmur2(u)+Ct;return{name:en,styles:u,next:cursor}}var syncFallback=function(n){return n()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(n){return reactExports.forwardRef(function(a,l){var u=reactExports.useContext(EmotionCacheContext);return n(a,u,l)})},ThemeContext$1=reactExports.createContext({}),hasOwn$1={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(n,a){var l={};for(var u in a)hasOwn$1.call(a,u)&&(l[u]=a[u]);return l[typePropName]=n,l},Insertion$1=function(n){var a=n.cache,l=n.serialized,u=n.isStringTag;return registerStyles(a,l,u),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,l,u)}),null},Emotion=withEmotionCache(function(t,n,a){var l=t.css;typeof l=="string"&&n.registered[l]!==void 0&&(l=n.registered[l]);var u=t[typePropName],c=[l],p="";typeof t.className=="string"?p=getRegisteredStyles(n.registered,c,t.className):t.className!=null&&(p=t.className+" ");var d=serializeStyles(c,void 0,reactExports.useContext(ThemeContext$1));p+=n.key+"-"+d.name;var Q={};for(var Ct in t)hasOwn$1.call(t,Ct)&&Ct!=="css"&&Ct!==typePropName&&(Q[Ct]=t[Ct]);return Q.className=p,a&&(Q.ref=a),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:n,serialized:d,isStringTag:typeof u=="string"}),reactExports.createElement(u,Q))}),Emotion$1=Emotion,jsx=function(n,a){var l=arguments;if(a==null||!hasOwn$1.call(a,"css"))return reactExports.createElement.apply(void 0,l);var u=l.length,c=new Array(u);c[0]=Emotion$1,c[1]=createEmotionProps(n,a);for(var p=2;p<u;p++)c[p]=l[p];return reactExports.createElement.apply(null,c)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(t,n){var a=t.styles,l=serializeStyles([a],void 0,reactExports.useContext(ThemeContext$1)),u=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var c=n.key+"-global",p=new n.sheet.constructor({key:c,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),d=!1,Q=document.querySelector('style[data-emotion="'+c+" "+l.name+'"]');return n.sheet.tags.length&&(p.before=n.sheet.tags[0]),Q!==null&&(d=!0,Q.setAttribute("data-emotion",c),p.hydrate([Q])),u.current=[p,d],function(){p.flush()}},[n]),useInsertionEffectWithLayoutFallback(function(){var c=u.current,p=c[0],d=c[1];if(d){c[1]=!1;return}if(l.next!==void 0&&insertStyles(n,l.next,!0),p.tags.length){var Q=p.tags[p.tags.length-1].nextElementSibling;p.before=Q,p.flush()}n.insert("",l,p,!1)},[n,l.name]),null});function css(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return serializeStyles(n)}function keyframes(){var t=css.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(t){return reactPropsRegex.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(n){return n!=="theme"},getDefaultShouldForwardProp=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(n,a,l){var u;if(a){var c=a.shouldForwardProp;u=n.__emotion_forwardProp&&c?function(p){return n.__emotion_forwardProp(p)&&c(p)}:c}return typeof u!="function"&&l&&(u=n.__emotion_forwardProp),u},Insertion=function(n){var a=n.cache,l=n.serialized,u=n.isStringTag;return registerStyles(a,l,u),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,l,u)}),null},createStyled$1=function t(n,a){var l=n.__emotion_real===n,u=l&&n.__emotion_base||n,c,p;a!==void 0&&(c=a.label,p=a.target);var d=composeShouldForwardProps(n,a,l),Q=d||getDefaultShouldForwardProp(u),Ct=!Q("as");return function(){var ar=arguments,en=l&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(c!==void 0&&en.push("label:"+c+";"),ar[0]==null||ar[0].raw===void 0)en.push.apply(en,ar);else{var tn=ar[0];en.push(tn[0]);for(var on=ar.length,cn=1;cn<on;cn++)en.push(ar[cn],tn[cn])}var gn=withEmotionCache(function(Cn,ex,ix){var ax=Ct&&Cn.as||u,ox="",lx=[],cx=Cn;if(Cn.theme==null){cx={};for(var dx in Cn)cx[dx]=Cn[dx];cx.theme=reactExports.useContext(ThemeContext$1)}typeof Cn.className=="string"?ox=getRegisteredStyles(ex.registered,lx,Cn.className):Cn.className!=null&&(ox=Cn.className+" ");var hx=serializeStyles(en.concat(lx),ex.registered,cx);ox+=ex.key+"-"+hx.name,p!==void 0&&(ox+=" "+p);var fx=Ct&&d===void 0?getDefaultShouldForwardProp(ax):Q,ux={};for(var gx in Cn)Ct&&gx==="as"||fx(gx)&&(ux[gx]=Cn[gx]);return ux.className=ox,ix&&(ux.ref=ix),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:ex,serialized:hx,isStringTag:typeof ax=="string"}),reactExports.createElement(ax,ux))});return gn.displayName=c!==void 0?c:"Styled("+(typeof u=="string"?u:u.displayName||u.name||"Component")+")",gn.defaultProps=n.defaultProps,gn.__emotion_real=gn,gn.__emotion_base=u,gn.__emotion_styles=en,gn.__emotion_forwardProp=d,Object.defineProperty(gn,"toString",{value:function(){return"."+p}}),gn.withComponent=function(Cn,ex){var ix=t(Cn,_extends({},a,ex,{shouldForwardProp:composeShouldForwardProps(gn,ex,!0)}));return ix.apply(void 0,en)},gn}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$3=createStyled$1.bind(null);tags.forEach(function(t){styled$3[t]=styled$3(t)});function isEmpty$2(t){return t==null||Object.keys(t).length===0}function GlobalStyles$2(t){const{styles:n,defaultTheme:a={}}=t,l=typeof n=="function"?u=>n(isEmpty$2(u)?a:u):n;return jsxRuntimeExports.jsx(Global,{styles:l})}function styled$2(t,n){return styled$3(t,n)}function internal_mutateStyles(t,n){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=n(t.__emotion_styles))}const wrapper=[];function internal_serializeStyles(t){return wrapper[0]=t,serializeStyles(wrapper)}const sortBreakpointsValues=t=>{const n=Object.keys(t).map(a=>({key:a,val:t[a]}))||[];return n.sort((a,l)=>a.val-l.val),n.reduce((a,l)=>({...a,[l.key]:l.val}),{})};function createBreakpoints(t){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:l=5,...u}=t,c=sortBreakpointsValues(n),p=Object.keys(c);function d(tn){return`@media (min-width:${typeof n[tn]=="number"?n[tn]:tn}${a})`}function Q(tn){return`@media (max-width:${(typeof n[tn]=="number"?n[tn]:tn)-l/100}${a})`}function Ct(tn,on){const cn=p.indexOf(on);return`@media (min-width:${typeof n[tn]=="number"?n[tn]:tn}${a}) and (max-width:${(cn!==-1&&typeof n[p[cn]]=="number"?n[p[cn]]:on)-l/100}${a})`}function ar(tn){return p.indexOf(tn)+1<p.length?Ct(tn,p[p.indexOf(tn)+1]):d(tn)}function en(tn){const on=p.indexOf(tn);return on===0?d(p[1]):on===p.length-1?Q(p[on]):Ct(tn,p[p.indexOf(tn)+1]).replace("@media","@media not all and")}return{keys:p,values:c,up:d,down:Q,between:Ct,only:ar,not:en,unit:a,...u}}const shape={borderRadius:4};function createSpacing(t=8,n=createUnarySpacing({spacing:t})){if(t.mui)return t;const a=(...l)=>(l.length===0?[1]:l).map(c=>{const p=n(c);return typeof p=="number"?`${p}px`:p}).join(" ");return a.mui=!0,a}function applyStyles$2(t,n){var l;const a=this;if(a.vars){if(!((l=a.colorSchemes)!=null&&l[t])||typeof a.getColorSchemeSelector!="function")return{};let u=a.getColorSchemeSelector(t);return u==="&"?n:((u.includes("data-")||u.includes("."))&&(u=`*:where(${u.replace(/\s*&$/,"")}) &`),{[u]:n})}return a.palette.mode===t?n:{}}function createTheme$1(t={},...n){const{breakpoints:a={},palette:l={},spacing:u,shape:c={},...p}=t,d=createBreakpoints(a),Q=createSpacing(u);let Ct=deepmerge({breakpoints:d,direction:"ltr",components:{},palette:{mode:"light",...l},spacing:Q,shape:{...shape,...c}},p);return Ct=cssContainerQueries(Ct),Ct.applyStyles=applyStyles$2,Ct=n.reduce((ar,en)=>deepmerge(ar,en),Ct),Ct.unstable_sxConfig={...defaultSxConfig,...p==null?void 0:p.unstable_sxConfig},Ct.unstable_sx=function(en){return styleFunctionSx({sx:en,theme:this})},Ct}function isObjectEmpty$2(t){return Object.keys(t).length===0}function useTheme$3(t=null){const n=reactExports.useContext(ThemeContext$1);return!n||isObjectEmpty$2(n)?t:n}const systemDefaultTheme$1=createTheme$1();function useTheme$2(t=systemDefaultTheme$1){return useTheme$3(t)}function GlobalStyles$1({styles:t,themeId:n,defaultTheme:a={}}){const l=useTheme$2(a),u=typeof t=="function"?t(n&&l[n]||l):t;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:u})}function createBox(t={}){const{themeId:n,defaultTheme:a,defaultClassName:l="MuiBox-root",generateClassName:u}=t,c=styled$2("div",{shouldForwardProp:d=>d!=="theme"&&d!=="sx"&&d!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(Q,Ct){const ar=useTheme$2(a),{className:en,component:tn="div",...on}=extendSxProp$1(Q);return jsxRuntimeExports.jsx(c,{as:tn,ref:Ct,className:clsx(en,u?u(l):l),theme:n&&ar[n]||ar,...on})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(t,n,a="Mui"){const l=globalStateClasses[n];return l?`${a}-${l}`:`${ClassNameGenerator.generate(t)}-${n}`}function generateUtilityClasses(t,n,a="Mui"){const l={};return n.forEach(u=>{l[u]=generateUtilityClass(t,u,a)}),l}function preprocessStyles(t){const{variants:n,...a}=t,l={variants:n,style:internal_serializeStyles(a),isProcessed:!0};return l.style===a||n&&n.forEach(u=>{typeof u.style!="function"&&(u.style=internal_serializeStyles(u.style))}),l}const systemDefaultTheme=createTheme$1();function shouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function defaultOverridesResolver(t){return t?(n,a)=>a[t]:null}function attachTheme(t,n,a){t.theme=isObjectEmpty$1(t.theme)?a:t.theme[n]||t.theme}function processStyle(t,n){const a=typeof n=="function"?n(t):n;if(Array.isArray(a))return a.flatMap(l=>processStyle(t,l));if(Array.isArray(a==null?void 0:a.variants)){let l;if(a.isProcessed)l=a.style;else{const{variants:u,...c}=a;l=c}return processStyleVariants(t,a.variants,[l])}return a!=null&&a.isProcessed?a.style:a}function processStyleVariants(t,n,a=[]){var u;let l;e:for(let c=0;c<n.length;c+=1){const p=n[c];if(typeof p.props=="function"){if(l??(l={...t,...t.ownerState,ownerState:t.ownerState}),!p.props(l))continue}else for(const d in p.props)if(t[d]!==p.props[d]&&((u=t.ownerState)==null?void 0:u[d])!==p.props[d])continue e;typeof p.style=="function"?(l??(l={...t,...t.ownerState,ownerState:t.ownerState}),a.push(p.style(l))):a.push(p.style)}return a}function createStyled(t={}){const{themeId:n,defaultTheme:a=systemDefaultTheme,rootShouldForwardProp:l=shouldForwardProp,slotShouldForwardProp:u=shouldForwardProp}=t;function c(d){attachTheme(d,n,a)}return(d,Q={})=>{internal_mutateStyles(d,lx=>lx.filter(cx=>cx!==styleFunctionSx));const{name:Ct,slot:ar,skipVariantsResolver:en,skipSx:tn,overridesResolver:on=defaultOverridesResolver(lowercaseFirstLetter(ar)),...cn}=Q,gn=en!==void 0?en:ar&&ar!=="Root"&&ar!=="root"||!1,Cn=tn||!1;let ex=shouldForwardProp;ar==="Root"||ar==="root"?ex=l:ar?ex=u:isStringTag(d)&&(ex=void 0);const ix=styled$2(d,{shouldForwardProp:ex,label:generateStyledLabel(),...cn}),ax=lx=>{if(lx.__emotion_real===lx)return lx;if(typeof lx=="function")return function(dx){return processStyle(dx,lx)};if(isPlainObject(lx)){const cx=preprocessStyles(lx);return cx.variants?function(hx){return processStyle(hx,cx)}:cx.style}return lx},ox=(...lx)=>{const cx=[],dx=lx.map(ax),hx=[];if(cx.push(c),Ct&&on&&hx.push(function(yx){var xx,Sx;const vx=(Sx=(xx=yx.theme.components)==null?void 0:xx[Ct])==null?void 0:Sx.styleOverrides;if(!vx)return null;const bx={};for(const Ax in vx)bx[Ax]=processStyle(yx,vx[Ax]);return on(yx,bx)}),Ct&&!gn&&hx.push(function(yx){var bx,xx;const _x=yx.theme,vx=(xx=(bx=_x==null?void 0:_x.components)==null?void 0:bx[Ct])==null?void 0:xx.variants;return vx?processStyleVariants(yx,vx):null}),Cn||hx.push(styleFunctionSx),Array.isArray(dx[0])){const gx=dx.shift(),yx=new Array(cx.length).fill(""),_x=new Array(hx.length).fill("");let vx;vx=[...yx,...gx,..._x],vx.raw=[...yx,...gx.raw,..._x],cx.unshift(vx)}const fx=[...cx,...dx,...hx],ux=ix(...fx);return d.muiName&&(ux.muiName=d.muiName),ux};return ix.withConfig&&(ox.withConfig=ix.withConfig),ox}}function generateStyledLabel(t,n){return void 0}function isObjectEmpty$1(t){for(const n in t)return!1;return!0}function isStringTag(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lowercaseFirstLetter(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const styled$1=createStyled();function getThemeProps$1(t){const{theme:n,name:a,props:l}=t;return!n||!n.components||!n.components[a]||!n.components[a].defaultProps?l:resolveProps(n.components[a].defaultProps,l)}function useThemeProps({props:t,name:n,defaultTheme:a,themeId:l}){let u=useTheme$2(a);return l&&(u=u[l]||u),getThemeProps$1({theme:u,name:n,props:t})}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,ThemeContext=reactExports.createContext(null);function useTheme$1(){return reactExports.useContext(ThemeContext)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(t,n){return typeof n=="function"?n(t):{...t,...n}}function ThemeProvider$2(t){const{children:n,theme:a}=t,l=useTheme$1(),u=reactExports.useMemo(()=>{const c=l===null?{...a}:mergeOuterLocalTheme(l,a);return c!=null&&(c[nested]=l!==null),c},[a,l]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:u,children:n})}const RtlContext=reactExports.createContext();function RtlProvider({value:t,...n}){return jsxRuntimeExports.jsx(RtlContext.Provider,{value:t??!0,...n})}const useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function DefaultPropsProvider({value:t,children:n}){return jsxRuntimeExports.jsx(PropsContext.Provider,{value:t,children:n})}function getThemeProps(t){const{theme:n,name:a,props:l}=t;if(!n||!n.components||!n.components[a])return l;const u=n.components[a];return u.defaultProps?resolveProps(u.defaultProps,l):!u.styleOverrides&&!u.variants?resolveProps(u,l):l}function useDefaultProps$1({props:t,name:n}){const a=reactExports.useContext(PropsContext);return getThemeProps({props:t,name:n,theme:{components:a}})}const EMPTY_THEME={};function useThemeScoping(t,n,a,l=!1){return reactExports.useMemo(()=>{const u=t&&n[t]||n;if(typeof a=="function"){const c=a(u),p=t?{...n,[t]:c}:c;return l?()=>p:p}return t?{...n,[t]:a}:{...n,...a}},[t,n,a,l])}function ThemeProvider$1(t){const{children:n,theme:a,themeId:l}=t,u=useTheme$3(EMPTY_THEME),c=useTheme$1()||EMPTY_THEME,p=useThemeScoping(l,u,a),d=useThemeScoping(l,c,a,!0),Q=(l?p[l]:p).direction==="rtl";return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:d,children:jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:p,children:jsxRuntimeExports.jsx(RtlProvider,{value:Q,children:jsxRuntimeExports.jsx(DefaultPropsProvider,{value:l?p[l].components:p.components,children:n})})})})}const arg={theme:void 0};function unstable_memoTheme(t){let n,a;return function(u){let c=n;return(c===void 0||u.theme!==a)&&(arg.theme=u.theme,c=preprocessStyles(t(arg)),n=c,a=u.theme),c}}const DEFAULT_MODE_STORAGE_KEY="mode",DEFAULT_COLOR_SCHEME_STORAGE_KEY="color-scheme",DEFAULT_ATTRIBUTE="data-color-scheme";function InitColorSchemeScript(t){const{defaultMode:n="system",defaultLightColorScheme:a="light",defaultDarkColorScheme:l="dark",modeStorageKey:u=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:c=DEFAULT_COLOR_SCHEME_STORAGE_KEY,attribute:p=DEFAULT_ATTRIBUTE,colorSchemeNode:d="document.documentElement",nonce:Q}=t||{};let Ct="",ar=p;if(p==="class"&&(ar=".%s"),p==="data"&&(ar="[data-%s]"),ar.startsWith(".")){const tn=ar.substring(1);Ct+=`${d}.classList.remove('${tn}'.replace('%s', light), '${tn}'.replace('%s', dark));
      ${d}.classList.add('${tn}'.replace('%s', colorScheme));`}const en=ar.match(/\[([^\]]+)\]/);if(en){const[tn,on]=en[1].split("=");on||(Ct+=`${d}.removeAttribute('${tn}'.replace('%s', light));
      ${d}.removeAttribute('${tn}'.replace('%s', dark));`),Ct+=`
      ${d}.setAttribute('${tn}'.replace('%s', colorScheme), ${on?`${on}.replace('%s', colorScheme)`:'""'});`}else Ct+=`${d}.setAttribute('${ar}', colorScheme);`;return jsxRuntimeExports.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?Q:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${u}') || '${n}';
  const dark = localStorage.getItem('${c}-dark') || '${l}';
  const light = localStorage.getItem('${c}-light') || '${a}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${Ct}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function noop$4(){}const localStorageManager=({key:t,storageWindow:n})=>(!n&&typeof window<"u"&&(n=window),{get(a){if(typeof window>"u")return;if(!n)return a;let l;try{l=n.localStorage.getItem(t)}catch{}return l||a},set:a=>{if(n)try{n.localStorage.setItem(t,a)}catch{}},subscribe:a=>{if(!n)return noop$4;const l=u=>{const c=u.newValue;u.key===t&&a(c)};return n.addEventListener("storage",l),()=>{n.removeEventListener("storage",l)}}});function noop$3(){}function getSystemMode(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function processState(t,n){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return n("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return n("dark")}function getColorScheme(t){return processState(t,n=>{if(n==="light")return t.lightColorScheme;if(n==="dark")return t.darkColorScheme})}function useCurrentColorScheme(t){const{defaultMode:n="light",defaultLightColorScheme:a,defaultDarkColorScheme:l,supportedColorSchemes:u=[],modeStorageKey:c=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:p=DEFAULT_COLOR_SCHEME_STORAGE_KEY,storageWindow:d=typeof window>"u"?void 0:window,storageManager:Q=localStorageManager,noSsr:Ct=!1}=t,ar=u.join(","),en=u.length>1,tn=reactExports.useMemo(()=>Q==null?void 0:Q({key:c,storageWindow:d}),[Q,c,d]),on=reactExports.useMemo(()=>Q==null?void 0:Q({key:`${p}-light`,storageWindow:d}),[Q,p,d]),cn=reactExports.useMemo(()=>Q==null?void 0:Q({key:`${p}-dark`,storageWindow:d}),[Q,p,d]),[gn,Cn]=reactExports.useState(()=>{const hx=(tn==null?void 0:tn.get(n))||n,fx=(on==null?void 0:on.get(a))||a,ux=(cn==null?void 0:cn.get(l))||l;return{mode:hx,systemMode:getSystemMode(hx),lightColorScheme:fx,darkColorScheme:ux}}),[ex,ix]=reactExports.useState(Ct||!en);reactExports.useEffect(()=>{ix(!0)},[]);const ax=getColorScheme(gn),ox=reactExports.useCallback(hx=>{Cn(fx=>{if(hx===fx.mode)return fx;const ux=hx??n;return tn==null||tn.set(ux),{...fx,mode:ux,systemMode:getSystemMode(ux)}})},[tn,n]),lx=reactExports.useCallback(hx=>{hx?typeof hx=="string"?hx&&!ar.includes(hx)?console.error(`\`${hx}\` does not exist in \`theme.colorSchemes\`.`):Cn(fx=>{const ux={...fx};return processState(fx,gx=>{gx==="light"&&(on==null||on.set(hx),ux.lightColorScheme=hx),gx==="dark"&&(cn==null||cn.set(hx),ux.darkColorScheme=hx)}),ux}):Cn(fx=>{const ux={...fx},gx=hx.light===null?a:hx.light,yx=hx.dark===null?l:hx.dark;return gx&&(ar.includes(gx)?(ux.lightColorScheme=gx,on==null||on.set(gx)):console.error(`\`${gx}\` does not exist in \`theme.colorSchemes\`.`)),yx&&(ar.includes(yx)?(ux.darkColorScheme=yx,cn==null||cn.set(yx)):console.error(`\`${yx}\` does not exist in \`theme.colorSchemes\`.`)),ux}):Cn(fx=>(on==null||on.set(a),cn==null||cn.set(l),{...fx,lightColorScheme:a,darkColorScheme:l}))},[ar,on,cn,a,l]),cx=reactExports.useCallback(hx=>{gn.mode==="system"&&Cn(fx=>{const ux=hx!=null&&hx.matches?"dark":"light";return fx.systemMode===ux?fx:{...fx,systemMode:ux}})},[gn.mode]),dx=reactExports.useRef(cx);return dx.current=cx,reactExports.useEffect(()=>{if(typeof window.matchMedia!="function"||!en)return;const hx=(...ux)=>dx.current(...ux),fx=window.matchMedia("(prefers-color-scheme: dark)");return fx.addListener(hx),hx(fx),()=>{fx.removeListener(hx)}},[en]),reactExports.useEffect(()=>{if(en){const hx=(tn==null?void 0:tn.subscribe(gx=>{(!gx||["light","dark","system"].includes(gx))&&ox(gx||n)}))||noop$3,fx=(on==null?void 0:on.subscribe(gx=>{(!gx||ar.match(gx))&&lx({light:gx})}))||noop$3,ux=(cn==null?void 0:cn.subscribe(gx=>{(!gx||ar.match(gx))&&lx({dark:gx})}))||noop$3;return()=>{hx(),fx(),ux()}}},[lx,ox,ar,n,d,en,tn,on,cn]),{...gn,mode:ex?gn.mode:void 0,systemMode:ex?gn.systemMode:void 0,colorScheme:ex?ax:void 0,setMode:ox,setColorScheme:lx}}const DISABLE_CSS_TRANSITION="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function createCssVarsProvider(t){const{themeId:n,theme:a={},modeStorageKey:l=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:u=DEFAULT_COLOR_SCHEME_STORAGE_KEY,disableTransitionOnChange:c=!1,defaultColorScheme:p,resolveTheme:d}=t,Q={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},Ct=reactExports.createContext(void 0),ar=()=>reactExports.useContext(Ct)||Q,en={},tn={};function on(ex){var Ix,Bx,Yx,Qx;const{children:ix,theme:ax,modeStorageKey:ox=l,colorSchemeStorageKey:lx=u,disableTransitionOnChange:cx=c,storageManager:dx,storageWindow:hx=typeof window>"u"?void 0:window,documentNode:fx=typeof document>"u"?void 0:document,colorSchemeNode:ux=typeof document>"u"?void 0:document.documentElement,disableNestedContext:gx=!1,disableStyleSheetGeneration:yx=!1,defaultMode:_x="system",forceThemeRerender:vx=!1,noSsr:bx}=ex,xx=reactExports.useRef(!1),Sx=useTheme$1(),Ax=reactExports.useContext(Ct),Cx=!!Ax&&!gx,Tx=reactExports.useMemo(()=>ax||(typeof a=="function"?a():a),[ax]),Px=Tx[n],Fx=Px||Tx,{colorSchemes:Mx=en,components:Dx=tn,cssVarPrefix:Ox}=Fx,Lx=Object.keys(Mx).filter(nE=>!!Mx[nE]).join(","),Nx=reactExports.useMemo(()=>Lx.split(","),[Lx]),Gx=typeof p=="string"?p:p.light,Ux=typeof p=="string"?p:p.dark,Hx=Mx[Gx]&&Mx[Ux]?_x:((Bx=(Ix=Mx[Fx.defaultColorScheme])==null?void 0:Ix.palette)==null?void 0:Bx.mode)||((Yx=Fx.palette)==null?void 0:Yx.mode),{mode:Vx,setMode:zx,systemMode:rE,lightColorScheme:Zx,darkColorScheme:eE,colorScheme:oE,setColorScheme:iE}=useCurrentColorScheme({supportedColorSchemes:Nx,defaultLightColorScheme:Gx,defaultDarkColorScheme:Ux,modeStorageKey:ox,colorSchemeStorageKey:lx,defaultMode:Hx,storageManager:dx,storageWindow:hx,noSsr:bx});let Wx=Vx,AE=oE;Cx&&(Wx=Ax.mode,AE=Ax.colorScheme);let ME=AE||Fx.defaultColorScheme;Fx.vars&&!vx&&(ME=Fx.defaultColorScheme);const EE=reactExports.useMemo(()=>{var dE;const nE=((dE=Fx.generateThemeVars)==null?void 0:dE.call(Fx))||Fx.vars,Kx={...Fx,components:Dx,colorSchemes:Mx,cssVarPrefix:Ox,vars:nE};if(typeof Kx.generateSpacing=="function"&&(Kx.spacing=Kx.generateSpacing()),ME){const cE=Mx[ME];cE&&typeof cE=="object"&&Object.keys(cE).forEach(mE=>{cE[mE]&&typeof cE[mE]=="object"?Kx[mE]={...Kx[mE],...cE[mE]}:Kx[mE]=cE[mE]})}return d?d(Kx):Kx},[Fx,ME,Dx,Mx,Ox]),bE=Fx.colorSchemeSelector;useEnhancedEffect(()=>{if(AE&&ux&&bE&&bE!=="media"){const nE=bE;let Kx=bE;if(nE==="class"&&(Kx=".%s"),nE==="data"&&(Kx="[data-%s]"),nE!=null&&nE.startsWith("data-")&&!nE.includes("%s")&&(Kx=`[${nE}="%s"]`),Kx.startsWith("."))ux.classList.remove(...Nx.map(dE=>Kx.substring(1).replace("%s",dE))),ux.classList.add(Kx.substring(1).replace("%s",AE));else{const dE=Kx.replace("%s",AE).match(/\[([^\]]+)\]/);if(dE){const[cE,mE]=dE[1].split("=");mE||Nx.forEach(xE=>{ux.removeAttribute(cE.replace(AE,xE))}),ux.setAttribute(cE,mE?mE.replace(/"|'/g,""):"")}else ux.setAttribute(Kx,AE)}}},[AE,bE,ux,Nx]),reactExports.useEffect(()=>{let nE;if(cx&&xx.current&&fx){const Kx=fx.createElement("style");Kx.appendChild(fx.createTextNode(DISABLE_CSS_TRANSITION)),fx.head.appendChild(Kx),window.getComputedStyle(fx.body),nE=setTimeout(()=>{fx.head.removeChild(Kx)},1)}return()=>{clearTimeout(nE)}},[AE,cx,fx]),reactExports.useEffect(()=>(xx.current=!0,()=>{xx.current=!1}),[]);const kE=reactExports.useMemo(()=>({allColorSchemes:Nx,colorScheme:AE,darkColorScheme:eE,lightColorScheme:Zx,mode:Wx,setColorScheme:iE,setMode:zx,systemMode:rE}),[Nx,AE,eE,Zx,Wx,iE,zx,rE,EE.colorSchemeSelector]);let TE=!0;(yx||Fx.cssVariables===!1||Cx&&(Sx==null?void 0:Sx.cssVarPrefix)===Ox)&&(TE=!1);const jE=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ThemeProvider$1,{themeId:Px?n:void 0,theme:EE,children:ix}),TE&&jsxRuntimeExports.jsx(GlobalStyles$2,{styles:((Qx=EE.generateStyleSheets)==null?void 0:Qx.call(EE))||[]})]});return Cx?jE:jsxRuntimeExports.jsx(Ct.Provider,{value:kE,children:jE})}const cn=typeof p=="string"?p:p.light,gn=typeof p=="string"?p:p.dark;return{CssVarsProvider:on,useColorScheme:ar,getInitColorSchemeScript:ex=>InitColorSchemeScript({colorSchemeStorageKey:u,defaultLightColorScheme:cn,defaultDarkColorScheme:gn,modeStorageKey:l,...ex})}}function createGetCssVar$1(t=""){function n(...l){if(!l.length)return"";const u=l[0];return typeof u=="string"&&!u.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${u}${n(...l.slice(1))})`:`, ${u}`}return(l,...u)=>`var(--${t?`${t}-`:""}${l}${n(...u)})`}const assignNestedKeys=(t,n,a,l=[])=>{let u=t;n.forEach((c,p)=>{p===n.length-1?Array.isArray(u)?u[Number(c)]=a:u&&typeof u=="object"&&(u[c]=a):u&&typeof u=="object"&&(u[c]||(u[c]=l.includes(c)?[]:{}),u=u[c])})},walkObjectDeep=(t,n,a)=>{function l(u,c=[],p=[]){Object.entries(u).forEach(([d,Q])=>{(!a||a&&!a([...c,d]))&&Q!=null&&(typeof Q=="object"&&Object.keys(Q).length>0?l(Q,[...c,d],Array.isArray(Q)?[...p,d]:p):n([...c,d],Q,p))})}l(t)},getCssValue=(t,n)=>typeof n=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(l=>t.includes(l))||t[t.length-1].toLowerCase().includes("opacity")?n:`${n}px`:n;function cssVarsParser(t,n){const{prefix:a,shouldSkipGeneratingVar:l}=n||{},u={},c={},p={};return walkObjectDeep(t,(d,Q,Ct)=>{if((typeof Q=="string"||typeof Q=="number")&&(!l||!l(d,Q))){const ar=`--${a?`${a}-`:""}${d.join("-")}`,en=getCssValue(d,Q);Object.assign(u,{[ar]:en}),assignNestedKeys(c,d,`var(${ar})`,Ct),assignNestedKeys(p,d,`var(${ar}, ${en})`,Ct)}},d=>d[0]==="vars"),{css:u,vars:c,varsWithDefaults:p}}function prepareCssVars(t,n={}){const{getSelector:a=Cn,disableCssColorScheme:l,colorSchemeSelector:u}=n,{colorSchemes:c={},components:p,defaultColorScheme:d="light",...Q}=t,{vars:Ct,css:ar,varsWithDefaults:en}=cssVarsParser(Q,n);let tn=en;const on={},{[d]:cn,...gn}=c;if(Object.entries(gn||{}).forEach(([ax,ox])=>{const{vars:lx,css:cx,varsWithDefaults:dx}=cssVarsParser(ox,n);tn=deepmerge(tn,dx),on[ax]={css:cx,vars:lx}}),cn){const{css:ax,vars:ox,varsWithDefaults:lx}=cssVarsParser(cn,n);tn=deepmerge(tn,lx),on[d]={css:ax,vars:ox}}function Cn(ax,ox){var cx,dx;let lx=u;if(u==="class"&&(lx=".%s"),u==="data"&&(lx="[data-%s]"),u!=null&&u.startsWith("data-")&&!u.includes("%s")&&(lx=`[${u}="%s"]`),ax){if(lx==="media")return t.defaultColorScheme===ax?":root":{[`@media (prefers-color-scheme: ${((dx=(cx=c[ax])==null?void 0:cx.palette)==null?void 0:dx.mode)||ax})`]:{":root":ox}};if(lx)return t.defaultColorScheme===ax?`:root, ${lx.replace("%s",String(ax))}`:lx.replace("%s",String(ax))}return":root"}return{vars:tn,generateThemeVars:()=>{let ax={...Ct};return Object.entries(on).forEach(([,{vars:ox}])=>{ax=deepmerge(ax,ox)}),ax},generateStyleSheets:()=>{var hx,fx;const ax=[],ox=t.defaultColorScheme||"light";function lx(ux,gx){Object.keys(gx).length&&ax.push(typeof ux=="string"?{[ux]:{...gx}}:ux)}lx(a(void 0,{...ar}),ar);const{[ox]:cx,...dx}=on;if(cx){const{css:ux}=cx,gx=(fx=(hx=c[ox])==null?void 0:hx.palette)==null?void 0:fx.mode,yx=!l&&gx?{colorScheme:gx,...ux}:{...ux};lx(a(ox,{...yx}),yx)}return Object.entries(dx).forEach(([ux,{css:gx}])=>{var vx,bx;const yx=(bx=(vx=c[ux])==null?void 0:vx.palette)==null?void 0:bx.mode,_x=!l&&yx?{colorScheme:yx,...gx}:{...gx};lx(a(ux,{..._x}),_x)}),ax}}}function createGetColorSchemeSelector(t){return function(a){return t==="media"?`@media (prefers-color-scheme: ${a})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${a}"] &`:t==="class"?`.${a} &`:t==="data"?`[data-${a}] &`:`${t.replace("%s",a)} &`:"&"}}const defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$2=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemePropsDefault$2=t=>useThemeProps({props:t,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$I=(t,n)=>{const a=Q=>generateUtilityClass(n,Q),{classes:l,fixed:u,disableGutters:c,maxWidth:p}=t,d={root:["root",p&&`maxWidth${capitalize(String(p))}`,u&&"fixed",c&&"disableGutters"]};return composeClasses(d,a,l)};function createContainer(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$2,useThemeProps:a=useThemePropsDefault$2,componentName:l="MuiContainer"}=t,u=n(({theme:p,ownerState:d})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!d.disableGutters&&{paddingLeft:p.spacing(2),paddingRight:p.spacing(2),[p.breakpoints.up("sm")]:{paddingLeft:p.spacing(3),paddingRight:p.spacing(3)}}}),({theme:p,ownerState:d})=>d.fixed&&Object.keys(p.breakpoints.values).reduce((Q,Ct)=>{const ar=Ct,en=p.breakpoints.values[ar];return en!==0&&(Q[p.breakpoints.up(ar)]={maxWidth:`${en}${p.breakpoints.unit}`}),Q},{}),({theme:p,ownerState:d})=>({...d.maxWidth==="xs"&&{[p.breakpoints.up("xs")]:{maxWidth:Math.max(p.breakpoints.values.xs,444)}},...d.maxWidth&&d.maxWidth!=="xs"&&{[p.breakpoints.up(d.maxWidth)]:{maxWidth:`${p.breakpoints.values[d.maxWidth]}${p.breakpoints.unit}`}}}));return reactExports.forwardRef(function(d,Q){const Ct=a(d),{className:ar,component:en="div",disableGutters:tn=!1,fixed:on=!1,maxWidth:cn="lg",classes:gn,...Cn}=Ct,ex={...Ct,component:en,disableGutters:tn,fixed:on,maxWidth:cn},ix=useUtilityClasses$I(ex,l);return jsxRuntimeExports.jsx(u,{as:en,ownerState:ex,className:clsx(ix.root,ar),ref:Q,...Cn})})}function isMuiElement(t,n){var a,l,u;return reactExports.isValidElement(t)&&n.indexOf(t.type.muiName??((u=(l=(a=t.type)==null?void 0:a._payload)==null?void 0:l.value)==null?void 0:u.muiName))!==-1}const filterBreakpointKeys=(t,n)=>t.filter(a=>n.includes(a)),traverseBreakpoints=(t,n,a)=>{const l=t.keys[0];Array.isArray(n)?n.forEach((u,c)=>{a((p,d)=>{c<=t.keys.length-1&&(c===0?Object.assign(p,d):p[t.up(t.keys[c])]=d)},u)}):n&&typeof n=="object"?(Object.keys(n).length>t.keys.length?t.keys:filterBreakpointKeys(t.keys,Object.keys(n))).forEach(c=>{if(t.keys.includes(c)){const p=n[c];p!==void 0&&a((d,Q)=>{l===c?Object.assign(d,Q):d[t.up(c)]=Q},p)}}):(typeof n=="number"||typeof n=="string")&&a((u,c)=>{Object.assign(u,c)},n)};function getSelfSpacingVar(t){return`--Grid-${t}Spacing`}function getParentSpacingVar(t){return`--Grid-parent-${t}Spacing`}const selfColumnsVar="--Grid-columns",parentColumnsVar="--Grid-parent-columns",generateGridSizeStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.size,(l,u)=>{let c={};u==="grow"&&(c={flexBasis:0,flexGrow:1,maxWidth:"100%"}),u==="auto"&&(c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof u=="number"&&(c={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${u} / var(${parentColumnsVar}) - (var(${parentColumnsVar}) - ${u}) * (var(${getParentSpacingVar("column")}) / var(${parentColumnsVar})))`}),l(a,c)}),a},generateGridOffsetStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.offset,(l,u)=>{let c={};u==="auto"&&(c={marginLeft:"auto"}),typeof u=="number"&&(c={marginLeft:u===0?"0px":`calc(100% * ${u} / var(${parentColumnsVar}) + var(${getParentSpacingVar("column")}) * ${u} / var(${parentColumnsVar}))`}),l(a,c)}),a},generateGridColumnsStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={[selfColumnsVar]:12};return traverseBreakpoints(t.breakpoints,n.columns,(l,u)=>{const c=u??12;l(a,{[selfColumnsVar]:c,"> *":{[parentColumnsVar]:c}})}),a},generateGridRowSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.rowSpacing,(l,u)=>{var p;const c=typeof u=="string"?u:(p=t.spacing)==null?void 0:p.call(t,u);l(a,{[getSelfSpacingVar("row")]:c,"> *":{[getParentSpacingVar("row")]:c}})}),a},generateGridColumnSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.columnSpacing,(l,u)=>{var p;const c=typeof u=="string"?u:(p=t.spacing)==null?void 0:p.call(t,u);l(a,{[getSelfSpacingVar("column")]:c,"> *":{[getParentSpacingVar("column")]:c}})}),a},generateGridDirectionStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.direction,(l,u)=>{l(a,{flexDirection:u})}),a},generateGridStyles=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${getSelfSpacingVar("row")}) var(${getSelfSpacingVar("column")})`}}),generateSizeClassNames=t=>{const n=[];return Object.entries(t).forEach(([a,l])=>{l!==!1&&l!==void 0&&n.push(`grid-${a}-${String(l)}`)}),n},generateSpacingClassNames=(t,n="xs")=>{function a(l){return l===void 0?!1:typeof l=="string"&&!Number.isNaN(Number(l))||typeof l=="number"&&l>0}if(a(t))return[`spacing-${n}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const l=[];return Object.entries(t).forEach(([u,c])=>{a(c)&&l.push(`spacing-${u}-${String(c)}`)}),l}return[]},generateDirectionClasses=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([n,a])=>`direction-${n}-${a}`):[`direction-xs-${String(t)}`];function deleteLegacyGridProps(t,n){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,n.keys.forEach(a=>{t[a]!==void 0&&delete t[a]})}const defaultTheme$3=createTheme$1(),defaultCreateStyledComponent$1=styled$1("div",{name:"MuiGrid",slot:"Root"});function useThemePropsDefault$1(t){return useThemeProps({props:t,name:"MuiGrid",defaultTheme:defaultTheme$3})}function createGrid(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$1,useThemeProps:a=useThemePropsDefault$1,useTheme:l=useTheme$2,componentName:u="MuiGrid"}=t,c=(Ct,ar)=>{const{container:en,direction:tn,spacing:on,wrap:cn,size:gn}=Ct,Cn={root:["root",en&&"container",cn!=="wrap"&&`wrap-xs-${String(cn)}`,...generateDirectionClasses(tn),...generateSizeClassNames(gn),...en?generateSpacingClassNames(on,ar.breakpoints.keys[0]):[]]};return composeClasses(Cn,ex=>generateUtilityClass(u,ex),{})};function p(Ct,ar,en=()=>!0){const tn={};return Ct===null||(Array.isArray(Ct)?Ct.forEach((on,cn)=>{on!==null&&en(on)&&ar.keys[cn]&&(tn[ar.keys[cn]]=on)}):typeof Ct=="object"?Object.keys(Ct).forEach(on=>{const cn=Ct[on];cn!=null&&en(cn)&&(tn[on]=cn)}):tn[ar.keys[0]]=Ct),tn}const d=n(generateGridColumnsStyles,generateGridColumnSpacingStyles,generateGridRowSpacingStyles,generateGridSizeStyles,generateGridDirectionStyles,generateGridStyles,generateGridOffsetStyles),Q=reactExports.forwardRef(function(ar,en){const tn=l(),on=a(ar),cn=extendSxProp$1(on);deleteLegacyGridProps(cn,tn.breakpoints);const{className:gn,children:Cn,columns:ex=12,container:ix=!1,component:ax="div",direction:ox="row",wrap:lx="wrap",size:cx={},offset:dx={},spacing:hx=0,rowSpacing:fx=hx,columnSpacing:ux=hx,unstable_level:gx=0,...yx}=cn,_x=p(cx,tn.breakpoints,Px=>Px!==!1),vx=p(dx,tn.breakpoints),bx=ar.columns??(gx?void 0:ex),xx=ar.spacing??(gx?void 0:hx),Sx=ar.rowSpacing??ar.spacing??(gx?void 0:fx),Ax=ar.columnSpacing??ar.spacing??(gx?void 0:ux),Cx={...cn,level:gx,columns:bx,container:ix,direction:ox,wrap:lx,spacing:xx,rowSpacing:Sx,columnSpacing:Ax,size:_x,offset:vx},Tx=c(Cx,tn);return jsxRuntimeExports.jsx(d,{ref:en,as:ax,ownerState:Cx,className:clsx(Tx.root,gn),...yx,children:reactExports.Children.map(Cn,Px=>{var Fx;return reactExports.isValidElement(Px)&&isMuiElement(Px,["Grid"])&&ix&&Px.props.container?reactExports.cloneElement(Px,{unstable_level:((Fx=Px.props)==null?void 0:Fx.unstable_level)??gx+1}):Px})})});return Q.muiName="Grid",Q}const defaultTheme$2=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root"});function useThemePropsDefault(t){return useThemeProps({props:t,name:"MuiStack",defaultTheme:defaultTheme$2})}function joinChildren(t,n){const a=reactExports.Children.toArray(t).filter(Boolean);return a.reduce((l,u,c)=>(l.push(u),c<a.length-1&&l.push(reactExports.cloneElement(n,{key:`separator-${c}`})),l),[])}const getSideFromDirection=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],style=({ownerState:t,theme:n})=>{let a={display:"flex",flexDirection:"column",...handleBreakpoints({theme:n},resolveBreakpointValues({values:t.direction,breakpoints:n.breakpoints.values}),l=>({flexDirection:l}))};if(t.spacing){const l=createUnarySpacing(n),u=Object.keys(n.breakpoints.values).reduce((Q,Ct)=>((typeof t.spacing=="object"&&t.spacing[Ct]!=null||typeof t.direction=="object"&&t.direction[Ct]!=null)&&(Q[Ct]=!0),Q),{}),c=resolveBreakpointValues({values:t.direction,base:u}),p=resolveBreakpointValues({values:t.spacing,base:u});typeof c=="object"&&Object.keys(c).forEach((Q,Ct,ar)=>{if(!c[Q]){const tn=Ct>0?c[ar[Ct-1]]:"column";c[Q]=tn}}),a=deepmerge(a,handleBreakpoints({theme:n},p,(Q,Ct)=>t.useFlexGap?{gap:getValue(l,Q)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(Ct?c[Ct]:t.direction)}`]:getValue(l,Q)}}))}return a=mergeBreakpointsInOrder(n.breakpoints,a),a};function createStack(t={}){const{createStyledComponent:n=defaultCreateStyledComponent,useThemeProps:a=useThemePropsDefault,componentName:l="MuiStack"}=t,u=()=>composeClasses({root:["root"]},Q=>generateUtilityClass(l,Q),{}),c=n(style);return reactExports.forwardRef(function(Q,Ct){const ar=a(Q),en=extendSxProp$1(ar),{component:tn="div",direction:on="column",spacing:cn=0,divider:gn,children:Cn,className:ex,useFlexGap:ix=!1,...ax}=en,ox={direction:on,spacing:cn,useFlexGap:ix},lx=u();return jsxRuntimeExports.jsx(c,{as:tn,ownerState:ox,ref:Ct,className:clsx(lx.root,ex),...ax,children:gn?joinChildren(Cn,gn):Cn})})}const common={black:"#000",white:"#fff"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(t,n,a,l){const u=l.light||l,c=l.dark||l*1.5;t[n]||(t.hasOwnProperty(a)?t[n]=t[a]:n==="light"?t.light=lighten(t.main,u):n==="dark"&&(t.dark=darken(t.main,c)))}function getDefaultPrimary(t="light"){return t==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(t="light"){return t==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(t="light"){return t==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(t="light"){return t==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(t="light"){return t==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(t="light"){return t==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function createPalette(t){const{mode:n="light",contrastThreshold:a=3,tonalOffset:l=.2,...u}=t,c=t.primary||getDefaultPrimary(n),p=t.secondary||getDefaultSecondary(n),d=t.error||getDefaultError(n),Q=t.info||getDefaultInfo(n),Ct=t.success||getDefaultSuccess(n),ar=t.warning||getDefaultWarning(n);function en(gn){return getContrastRatio(gn,dark.text.primary)>=a?dark.text.primary:light.text.primary}const tn=({color:gn,name:Cn,mainShade:ex=500,lightShade:ix=300,darkShade:ax=700})=>{if(gn={...gn},!gn.main&&gn[ex]&&(gn.main=gn[ex]),!gn.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Cn?` (${Cn})`:"",ex));if(typeof gn.main!="string")throw new Error(formatMuiErrorMessage(12,Cn?` (${Cn})`:"",JSON.stringify(gn.main)));return addLightOrDark(gn,"light",ix,l),addLightOrDark(gn,"dark",ax,l),gn.contrastText||(gn.contrastText=en(gn.main)),gn};let on;return n==="light"?on=getLight():n==="dark"&&(on=getDark()),deepmerge({common:{...common},mode:n,primary:tn({color:c,name:"primary"}),secondary:tn({color:p,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:tn({color:d,name:"error"}),warning:tn({color:ar,name:"warning"}),info:tn({color:Q,name:"info"}),success:tn({color:Ct,name:"success"}),grey,contrastThreshold:a,getContrastText:en,augmentColor:tn,tonalOffset:l,...on},u)}function prepareTypographyVars(t){const n={};return Object.entries(t).forEach(l=>{const[u,c]=l;typeof c=="object"&&(n[u]=`${c.fontStyle?`${c.fontStyle} `:""}${c.fontVariant?`${c.fontVariant} `:""}${c.fontWeight?`${c.fontWeight} `:""}${c.fontStretch?`${c.fontStretch} `:""}${c.fontSize||""}${c.lineHeight?`/${c.lineHeight} `:""}${c.fontFamily||""}`)}),n}function createMixins(t,n){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...n}}function round$6(t){return Math.round(t*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(t,n){const{fontFamily:a=defaultFontFamily,fontSize:l=14,fontWeightLight:u=300,fontWeightRegular:c=400,fontWeightMedium:p=500,fontWeightBold:d=700,htmlFontSize:Q=16,allVariants:Ct,pxToRem:ar,...en}=typeof n=="function"?n(t):n,tn=l/14,on=ar||(Cn=>`${Cn/Q*tn}rem`),cn=(Cn,ex,ix,ax,ox)=>({fontFamily:a,fontWeight:Cn,fontSize:on(ex),lineHeight:ix,...a===defaultFontFamily?{letterSpacing:`${round$6(ax/ex)}em`}:{},...ox,...Ct}),gn={h1:cn(u,96,1.167,-1.5),h2:cn(u,60,1.2,-.5),h3:cn(c,48,1.167,0),h4:cn(c,34,1.235,.25),h5:cn(c,24,1.334,0),h6:cn(p,20,1.6,.15),subtitle1:cn(c,16,1.75,.15),subtitle2:cn(p,14,1.57,.1),body1:cn(c,16,1.5,.15),body2:cn(c,14,1.43,.15),button:cn(p,14,1.75,.4,caseAllCaps),caption:cn(c,12,1.66,.4),overline:cn(c,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:Q,pxToRem:on,fontFamily:a,fontSize:l,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:p,fontWeightBold:d,...gn},en,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(t){return`${Math.round(t)}ms`}function getAutoHeightDuration(t){if(!t)return 0;const n=t/36;return Math.min(Math.round((4+15*n**.25+n/5)*10),3e3)}function createTransitions(t){const n={...easing,...t.easing},a={...duration,...t.duration};return{getAutoHeightDuration,create:(u=["all"],c={})=>{const{duration:p=a.standard,easing:d=n.easeInOut,delay:Q=0,...Ct}=c;return(Array.isArray(u)?u:[u]).map(ar=>`${ar} ${typeof p=="string"?p:formatMs(p)} ${d} ${typeof Q=="string"?Q:formatMs(Q)}`).join(",")},...t,easing:n,duration:a}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(t){return isPlainObject(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function stringifyTheme(t={}){const n={...t};function a(l){const u=Object.entries(l);for(let c=0;c<u.length;c++){const[p,d]=u[c];!isSerializable(d)||p.startsWith("unstable_")?delete l[p]:isPlainObject(d)&&(l[p]={...d},a(l[p]))}}return a(n),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(n,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function createThemeNoVars(t={},...n){const{breakpoints:a,mixins:l={},spacing:u,palette:c={},transitions:p={},typography:d={},shape:Q,...Ct}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const ar=createPalette(c),en=createTheme$1(t);let tn=deepmerge(en,{mixins:createMixins(en.breakpoints,l),palette:ar,shadows:shadows.slice(),typography:createTypography(ar,d),transitions:createTransitions(p),zIndex:{...zIndex}});return tn=deepmerge(tn,Ct),tn=n.reduce((on,cn)=>deepmerge(on,cn),tn),tn.unstable_sxConfig={...defaultSxConfig,...Ct==null?void 0:Ct.unstable_sxConfig},tn.unstable_sx=function(cn){return styleFunctionSx({sx:cn,theme:this})},tn.toRuntimeSource=stringifyTheme,tn}function getOverlayAlpha(t){let n;return t<1?n=5.11916*t**2:n=4.5*Math.log(t+1)+2,Math.round(n*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((t,n)=>{if(n===0)return"none";const a=getOverlayAlpha(n);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function getOpacity(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function getOverlays(t){return t==="dark"?defaultDarkOverlays:[]}function createColorScheme(t){const{palette:n={mode:"light"},opacity:a,overlays:l,...u}=t,c=createPalette(n);return{palette:c,opacity:{...getOpacity(c.mode),...a},overlays:l||getOverlays(c.mode),...u}}function shouldSkipGeneratingVar(t){var n;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((n=t[1])!=null&&n.match(/(mode|contrastThreshold|tonalOffset)/))}const excludeVariablesFromRoot=t=>[...[...Array(25)].map((n,a)=>`--${t?`${t}-`:""}overlays-${a}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],defaultGetSelector=t=>(n,a)=>{const l=t.rootSelector||":root",u=t.colorSchemeSelector;let c=u;if(u==="class"&&(c=".%s"),u==="data"&&(c="[data-%s]"),u!=null&&u.startsWith("data-")&&!u.includes("%s")&&(c=`[${u}="%s"]`),t.defaultColorScheme===n){if(n==="dark"){const p={};return excludeVariablesFromRoot(t.cssVarPrefix).forEach(d=>{p[d]=a[d],delete a[d]}),c==="media"?{[l]:a,"@media (prefers-color-scheme: dark)":{[l]:p}}:c?{[c.replace("%s",n)]:p,[`${l}, ${c.replace("%s",n)}`]:a}:{[l]:{...a,...p}}}if(c&&c!=="media")return`${l}, ${c.replace("%s",String(n))}`}else if(n){if(c==="media")return{[`@media (prefers-color-scheme: ${String(n)})`]:{[l]:a}};if(c)return c.replace("%s",String(n))}return l};function assignNode(t,n){n.forEach(a=>{t[a]||(t[a]={})})}function setColor(t,n,a){!t[n]&&a&&(t[n]=a)}function toRgb(t){return typeof t!="string"||!t.startsWith("hsl")?t:hslToRgb(t)}function setColorChannel(t,n){`${n}Channel`in t||(t[`${n}Channel`]=private_safeColorChannel(toRgb(t[n])))}function getSpacingVal(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const silent=t=>{try{return t()}catch{}},createGetCssVar=(t="mui")=>createGetCssVar$1(t);function attachColorScheme$1(t,n,a,l){if(!n)return;n=n===!0?{}:n;const u=l==="dark"?"dark":"light";if(!a){t[l]=createColorScheme({...n,palette:{mode:u,...n==null?void 0:n.palette}});return}const{palette:c,...p}=createThemeNoVars({...a,palette:{mode:u,...n==null?void 0:n.palette}});return t[l]={...n,palette:c,opacity:{...getOpacity(u),...n==null?void 0:n.opacity},overlays:(n==null?void 0:n.overlays)||getOverlays(u)},p}function createThemeWithVars(t={},...n){const{colorSchemes:a={light:!0},defaultColorScheme:l,disableCssColorScheme:u=!1,cssVarPrefix:c="mui",shouldSkipGeneratingVar:p=shouldSkipGeneratingVar,colorSchemeSelector:d=a.light&&a.dark?"media":void 0,rootSelector:Q=":root",...Ct}=t,ar=Object.keys(a)[0],en=l||(a.light&&ar!=="light"?"light":ar),tn=createGetCssVar(c),{[en]:on,light:cn,dark:gn,...Cn}=a,ex={...Cn};let ix=on;if((en==="dark"&&!("dark"in a)||en==="light"&&!("light"in a))&&(ix=!0),!ix)throw new Error(formatMuiErrorMessage(21,en));const ax=attachColorScheme$1(ex,ix,Ct,en);cn&&!ex.light&&attachColorScheme$1(ex,cn,void 0,"light"),gn&&!ex.dark&&attachColorScheme$1(ex,gn,void 0,"dark");let ox={defaultColorScheme:en,...ax,cssVarPrefix:c,colorSchemeSelector:d,rootSelector:Q,getCssVar:tn,colorSchemes:ex,font:{...prepareTypographyVars(ax.typography),...ax.font},spacing:getSpacingVal(Ct.spacing)};Object.keys(ox.colorSchemes).forEach(fx=>{const ux=ox.colorSchemes[fx].palette,gx=yx=>{const _x=yx.split("-"),vx=_x[1],bx=_x[2];return tn(yx,ux[vx][bx])};if(ux.mode==="light"&&(setColor(ux.common,"background","#fff"),setColor(ux.common,"onBackground","#000")),ux.mode==="dark"&&(setColor(ux.common,"background","#000"),setColor(ux.common,"onBackground","#fff")),assignNode(ux,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ux.mode==="light"){setColor(ux.Alert,"errorColor",private_safeDarken(ux.error.light,.6)),setColor(ux.Alert,"infoColor",private_safeDarken(ux.info.light,.6)),setColor(ux.Alert,"successColor",private_safeDarken(ux.success.light,.6)),setColor(ux.Alert,"warningColor",private_safeDarken(ux.warning.light,.6)),setColor(ux.Alert,"errorFilledBg",gx("palette-error-main")),setColor(ux.Alert,"infoFilledBg",gx("palette-info-main")),setColor(ux.Alert,"successFilledBg",gx("palette-success-main")),setColor(ux.Alert,"warningFilledBg",gx("palette-warning-main")),setColor(ux.Alert,"errorFilledColor",silent(()=>ux.getContrastText(ux.error.main))),setColor(ux.Alert,"infoFilledColor",silent(()=>ux.getContrastText(ux.info.main))),setColor(ux.Alert,"successFilledColor",silent(()=>ux.getContrastText(ux.success.main))),setColor(ux.Alert,"warningFilledColor",silent(()=>ux.getContrastText(ux.warning.main))),setColor(ux.Alert,"errorStandardBg",private_safeLighten(ux.error.light,.9)),setColor(ux.Alert,"infoStandardBg",private_safeLighten(ux.info.light,.9)),setColor(ux.Alert,"successStandardBg",private_safeLighten(ux.success.light,.9)),setColor(ux.Alert,"warningStandardBg",private_safeLighten(ux.warning.light,.9)),setColor(ux.Alert,"errorIconColor",gx("palette-error-main")),setColor(ux.Alert,"infoIconColor",gx("palette-info-main")),setColor(ux.Alert,"successIconColor",gx("palette-success-main")),setColor(ux.Alert,"warningIconColor",gx("palette-warning-main")),setColor(ux.AppBar,"defaultBg",gx("palette-grey-100")),setColor(ux.Avatar,"defaultBg",gx("palette-grey-400")),setColor(ux.Button,"inheritContainedBg",gx("palette-grey-300")),setColor(ux.Button,"inheritContainedHoverBg",gx("palette-grey-A100")),setColor(ux.Chip,"defaultBorder",gx("palette-grey-400")),setColor(ux.Chip,"defaultAvatarColor",gx("palette-grey-700")),setColor(ux.Chip,"defaultIconColor",gx("palette-grey-700")),setColor(ux.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(ux.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(ux.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(ux.LinearProgress,"primaryBg",private_safeLighten(ux.primary.main,.62)),setColor(ux.LinearProgress,"secondaryBg",private_safeLighten(ux.secondary.main,.62)),setColor(ux.LinearProgress,"errorBg",private_safeLighten(ux.error.main,.62)),setColor(ux.LinearProgress,"infoBg",private_safeLighten(ux.info.main,.62)),setColor(ux.LinearProgress,"successBg",private_safeLighten(ux.success.main,.62)),setColor(ux.LinearProgress,"warningBg",private_safeLighten(ux.warning.main,.62)),setColor(ux.Skeleton,"bg",`rgba(${gx("palette-text-primaryChannel")} / 0.11)`),setColor(ux.Slider,"primaryTrack",private_safeLighten(ux.primary.main,.62)),setColor(ux.Slider,"secondaryTrack",private_safeLighten(ux.secondary.main,.62)),setColor(ux.Slider,"errorTrack",private_safeLighten(ux.error.main,.62)),setColor(ux.Slider,"infoTrack",private_safeLighten(ux.info.main,.62)),setColor(ux.Slider,"successTrack",private_safeLighten(ux.success.main,.62)),setColor(ux.Slider,"warningTrack",private_safeLighten(ux.warning.main,.62));const yx=private_safeEmphasize(ux.background.default,.8);setColor(ux.SnackbarContent,"bg",yx),setColor(ux.SnackbarContent,"color",silent(()=>ux.getContrastText(yx))),setColor(ux.SpeedDialAction,"fabHoverBg",private_safeEmphasize(ux.background.paper,.15)),setColor(ux.StepConnector,"border",gx("palette-grey-400")),setColor(ux.StepContent,"border",gx("palette-grey-400")),setColor(ux.Switch,"defaultColor",gx("palette-common-white")),setColor(ux.Switch,"defaultDisabledColor",gx("palette-grey-100")),setColor(ux.Switch,"primaryDisabledColor",private_safeLighten(ux.primary.main,.62)),setColor(ux.Switch,"secondaryDisabledColor",private_safeLighten(ux.secondary.main,.62)),setColor(ux.Switch,"errorDisabledColor",private_safeLighten(ux.error.main,.62)),setColor(ux.Switch,"infoDisabledColor",private_safeLighten(ux.info.main,.62)),setColor(ux.Switch,"successDisabledColor",private_safeLighten(ux.success.main,.62)),setColor(ux.Switch,"warningDisabledColor",private_safeLighten(ux.warning.main,.62)),setColor(ux.TableCell,"border",private_safeLighten(private_safeAlpha(ux.divider,1),.88)),setColor(ux.Tooltip,"bg",private_safeAlpha(ux.grey[700],.92))}if(ux.mode==="dark"){setColor(ux.Alert,"errorColor",private_safeLighten(ux.error.light,.6)),setColor(ux.Alert,"infoColor",private_safeLighten(ux.info.light,.6)),setColor(ux.Alert,"successColor",private_safeLighten(ux.success.light,.6)),setColor(ux.Alert,"warningColor",private_safeLighten(ux.warning.light,.6)),setColor(ux.Alert,"errorFilledBg",gx("palette-error-dark")),setColor(ux.Alert,"infoFilledBg",gx("palette-info-dark")),setColor(ux.Alert,"successFilledBg",gx("palette-success-dark")),setColor(ux.Alert,"warningFilledBg",gx("palette-warning-dark")),setColor(ux.Alert,"errorFilledColor",silent(()=>ux.getContrastText(ux.error.dark))),setColor(ux.Alert,"infoFilledColor",silent(()=>ux.getContrastText(ux.info.dark))),setColor(ux.Alert,"successFilledColor",silent(()=>ux.getContrastText(ux.success.dark))),setColor(ux.Alert,"warningFilledColor",silent(()=>ux.getContrastText(ux.warning.dark))),setColor(ux.Alert,"errorStandardBg",private_safeDarken(ux.error.light,.9)),setColor(ux.Alert,"infoStandardBg",private_safeDarken(ux.info.light,.9)),setColor(ux.Alert,"successStandardBg",private_safeDarken(ux.success.light,.9)),setColor(ux.Alert,"warningStandardBg",private_safeDarken(ux.warning.light,.9)),setColor(ux.Alert,"errorIconColor",gx("palette-error-main")),setColor(ux.Alert,"infoIconColor",gx("palette-info-main")),setColor(ux.Alert,"successIconColor",gx("palette-success-main")),setColor(ux.Alert,"warningIconColor",gx("palette-warning-main")),setColor(ux.AppBar,"defaultBg",gx("palette-grey-900")),setColor(ux.AppBar,"darkBg",gx("palette-background-paper")),setColor(ux.AppBar,"darkColor",gx("palette-text-primary")),setColor(ux.Avatar,"defaultBg",gx("palette-grey-600")),setColor(ux.Button,"inheritContainedBg",gx("palette-grey-800")),setColor(ux.Button,"inheritContainedHoverBg",gx("palette-grey-700")),setColor(ux.Chip,"defaultBorder",gx("palette-grey-700")),setColor(ux.Chip,"defaultAvatarColor",gx("palette-grey-300")),setColor(ux.Chip,"defaultIconColor",gx("palette-grey-300")),setColor(ux.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(ux.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(ux.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(ux.LinearProgress,"primaryBg",private_safeDarken(ux.primary.main,.5)),setColor(ux.LinearProgress,"secondaryBg",private_safeDarken(ux.secondary.main,.5)),setColor(ux.LinearProgress,"errorBg",private_safeDarken(ux.error.main,.5)),setColor(ux.LinearProgress,"infoBg",private_safeDarken(ux.info.main,.5)),setColor(ux.LinearProgress,"successBg",private_safeDarken(ux.success.main,.5)),setColor(ux.LinearProgress,"warningBg",private_safeDarken(ux.warning.main,.5)),setColor(ux.Skeleton,"bg",`rgba(${gx("palette-text-primaryChannel")} / 0.13)`),setColor(ux.Slider,"primaryTrack",private_safeDarken(ux.primary.main,.5)),setColor(ux.Slider,"secondaryTrack",private_safeDarken(ux.secondary.main,.5)),setColor(ux.Slider,"errorTrack",private_safeDarken(ux.error.main,.5)),setColor(ux.Slider,"infoTrack",private_safeDarken(ux.info.main,.5)),setColor(ux.Slider,"successTrack",private_safeDarken(ux.success.main,.5)),setColor(ux.Slider,"warningTrack",private_safeDarken(ux.warning.main,.5));const yx=private_safeEmphasize(ux.background.default,.98);setColor(ux.SnackbarContent,"bg",yx),setColor(ux.SnackbarContent,"color",silent(()=>ux.getContrastText(yx))),setColor(ux.SpeedDialAction,"fabHoverBg",private_safeEmphasize(ux.background.paper,.15)),setColor(ux.StepConnector,"border",gx("palette-grey-600")),setColor(ux.StepContent,"border",gx("palette-grey-600")),setColor(ux.Switch,"defaultColor",gx("palette-grey-300")),setColor(ux.Switch,"defaultDisabledColor",gx("palette-grey-600")),setColor(ux.Switch,"primaryDisabledColor",private_safeDarken(ux.primary.main,.55)),setColor(ux.Switch,"secondaryDisabledColor",private_safeDarken(ux.secondary.main,.55)),setColor(ux.Switch,"errorDisabledColor",private_safeDarken(ux.error.main,.55)),setColor(ux.Switch,"infoDisabledColor",private_safeDarken(ux.info.main,.55)),setColor(ux.Switch,"successDisabledColor",private_safeDarken(ux.success.main,.55)),setColor(ux.Switch,"warningDisabledColor",private_safeDarken(ux.warning.main,.55)),setColor(ux.TableCell,"border",private_safeDarken(private_safeAlpha(ux.divider,1),.68)),setColor(ux.Tooltip,"bg",private_safeAlpha(ux.grey[700],.92))}setColorChannel(ux.background,"default"),setColorChannel(ux.background,"paper"),setColorChannel(ux.common,"background"),setColorChannel(ux.common,"onBackground"),setColorChannel(ux,"divider"),Object.keys(ux).forEach(yx=>{const _x=ux[yx];yx!=="tonalOffset"&&_x&&typeof _x=="object"&&(_x.main&&setColor(ux[yx],"mainChannel",private_safeColorChannel(toRgb(_x.main))),_x.light&&setColor(ux[yx],"lightChannel",private_safeColorChannel(toRgb(_x.light))),_x.dark&&setColor(ux[yx],"darkChannel",private_safeColorChannel(toRgb(_x.dark))),_x.contrastText&&setColor(ux[yx],"contrastTextChannel",private_safeColorChannel(toRgb(_x.contrastText))),yx==="text"&&(setColorChannel(ux[yx],"primary"),setColorChannel(ux[yx],"secondary")),yx==="action"&&(_x.active&&setColorChannel(ux[yx],"active"),_x.selected&&setColorChannel(ux[yx],"selected")))})}),ox=n.reduce((fx,ux)=>deepmerge(fx,ux),ox);const lx={prefix:c,disableCssColorScheme:u,shouldSkipGeneratingVar:p,getSelector:defaultGetSelector(ox)},{vars:cx,generateThemeVars:dx,generateStyleSheets:hx}=prepareCssVars(ox,lx);return ox.vars=cx,Object.entries(ox.colorSchemes[ox.defaultColorScheme]).forEach(([fx,ux])=>{ox[fx]=ux}),ox.generateThemeVars=dx,ox.generateStyleSheets=hx,ox.generateSpacing=function(){return createSpacing(Ct.spacing,createUnarySpacing(this))},ox.getColorSchemeSelector=createGetColorSchemeSelector(d),ox.spacing=ox.generateSpacing(),ox.shouldSkipGeneratingVar=p,ox.unstable_sxConfig={...defaultSxConfig,...Ct==null?void 0:Ct.unstable_sxConfig},ox.unstable_sx=function(ux){return styleFunctionSx({sx:ux,theme:this})},ox.toRuntimeSource=stringifyTheme,ox}function attachColorScheme(t,n,a){t.colorSchemes&&a&&(t.colorSchemes[n]={...a!==!0&&a,palette:createPalette({...a===!0?{}:a.palette,mode:n})})}function createTheme(t={},...n){const{palette:a,cssVariables:l=!1,colorSchemes:u=a?void 0:{light:!0},defaultColorScheme:c=a==null?void 0:a.mode,...p}=t,d=c||"light",Q=u==null?void 0:u[d],Ct={...u,...a?{[d]:{...typeof Q!="boolean"&&Q,palette:a}}:void 0};if(l===!1){if(!("colorSchemes"in t))return createThemeNoVars(t,...n);let ar=a;"palette"in t||Ct[d]&&(Ct[d]!==!0?ar=Ct[d].palette:d==="dark"&&(ar={mode:"dark"}));const en=createThemeNoVars({...t,palette:ar},...n);return en.defaultColorScheme=d,en.colorSchemes=Ct,en.palette.mode==="light"&&(en.colorSchemes.light={...Ct.light!==!0&&Ct.light,palette:en.palette},attachColorScheme(en,"dark",Ct.dark)),en.palette.mode==="dark"&&(en.colorSchemes.dark={...Ct.dark!==!0&&Ct.dark,palette:en.palette},attachColorScheme(en,"light",Ct.light)),en}return!a&&!("light"in Ct)&&d==="light"&&(Ct.light=!0),createThemeWithVars({...p,colorSchemes:Ct,defaultColorScheme:d,...typeof l!="boolean"&&l},...n)}const defaultTheme$1=createTheme(),THEME_ID="$$material";function useTheme(){const t=useTheme$2(defaultTheme$1);return t[THEME_ID]||t}function GlobalStyles(t){return jsxRuntimeExports.jsx(GlobalStyles$1,{...t,defaultTheme:defaultTheme$1,themeId:THEME_ID})}function slotShouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const rootShouldForwardProp=t=>slotShouldForwardProp(t)&&t!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function globalCss(t){return function(a){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof t=="function"?l=>t({theme:l,...a}):t})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(t){return useDefaultProps$1(t)}function getSvgIconUtilityClass(t){return generateUtilityClass("MuiSvgIcon",t)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$H=t=>{const{color:n,fontSize:a,classes:l}=t,u={root:["root",n!=="inherit"&&`color${capitalize(n)}`,`fontSize${capitalize(a)}`]};return composeClasses(u,getSvgIconUtilityClass,l)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color!=="inherit"&&n[`color${capitalize(a.color)}`],n[`fontSize${capitalize(a.fontSize)}`]]}})(memoTheme(({theme:t})=>{var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(u=(n=t.transitions)==null?void 0:n.create)==null?void 0:u.call(n,"fill",{duration:(l=(a=(t.vars??t).transitions)==null?void 0:a.duration)==null?void 0:l.shorter}),variants:[{props:gn=>!gn.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((p=(c=t.typography)==null?void 0:c.pxToRem)==null?void 0:p.call(c,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((Q=(d=t.typography)==null?void 0:d.pxToRem)==null?void 0:Q.call(d,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((ar=(Ct=t.typography)==null?void 0:Ct.pxToRem)==null?void 0:ar.call(Ct,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,gn])=>gn&&gn.main).map(([gn])=>{var Cn,ex;return{props:{color:gn},style:{color:(ex=(Cn=(t.vars??t).palette)==null?void 0:Cn[gn])==null?void 0:ex.main}}}),{props:{color:"action"},style:{color:(tn=(en=(t.vars??t).palette)==null?void 0:en.action)==null?void 0:tn.active}},{props:{color:"disabled"},style:{color:(cn=(on=(t.vars??t).palette)==null?void 0:on.action)==null?void 0:cn.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),SvgIcon=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiSvgIcon"}),{children:u,className:c,color:p="inherit",component:d="svg",fontSize:Q="medium",htmlColor:Ct,inheritViewBox:ar=!1,titleAccess:en,viewBox:tn="0 0 24 24",...on}=l,cn=reactExports.isValidElement(u)&&u.type==="svg",gn={...l,color:p,component:d,fontSize:Q,instanceFontSize:n.fontSize,inheritViewBox:ar,viewBox:tn,hasSvgAsChild:cn},Cn={};ar||(Cn.viewBox=tn);const ex=useUtilityClasses$H(gn);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:d,className:clsx(ex.root,c),focusable:"false",color:Ct,"aria-hidden":en?void 0:!0,role:en?"img":void 0,ref:a,...Cn,...on,...cn&&u.props,ownerState:gn,children:[cn?u.props.children:u,en?jsxRuntimeExports.jsx("title",{children:en}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(t,n){function a(l,u){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":void 0,ref:u,...l,children:t})}return a.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(a))}function debounce$2(t,n=166){let a;function l(...u){const c=()=>{t.apply(this,u)};clearTimeout(a),a=setTimeout(c,n)}return l.clear=()=>{clearTimeout(a)},l}function ownerDocument(t){return t&&t.ownerDocument||document}function ownerWindow(t){return ownerDocument(t).defaultView||window}function setRef(t,n){typeof t=="function"?t(n):t&&(t.current=n)}let globalId=0;function useGlobalId(t){const[n,a]=reactExports.useState(t),l=t||n;return reactExports.useEffect(()=>{n==null&&(globalId+=1,a(`mui-${globalId}`))},[n]),l}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(t){if(maybeReactUseId!==void 0){const n=maybeReactUseId();return t??n}return useGlobalId(t)}function useControlled(t){const{controlled:n,default:a,name:l,state:u="value"}=t,{current:c}=reactExports.useRef(n!==void 0),[p,d]=reactExports.useState(a),Q=c?n:p,Ct=reactExports.useCallback(ar=>{c||d(ar)},[]);return[Q,Ct]}function useEventCallback(t){const n=reactExports.useRef(t);return useEnhancedEffect(()=>{n.current=t}),reactExports.useRef((...a)=>(0,n.current)(...a)).current}function useForkRef(...t){const n=reactExports.useRef(void 0),a=reactExports.useCallback(l=>{const u=t.map(c=>{if(c==null)return null;if(typeof c=="function"){const p=c,d=p(l);return typeof d=="function"?d:()=>{p(null)}}return c.current=l,()=>{c.current=null}});return()=>{u.forEach(c=>c==null?void 0:c())}},t);return reactExports.useMemo(()=>t.every(l=>l==null)?null:l=>{n.current&&(n.current(),n.current=void 0),l!=null&&(n.current=a(l))},t)}function isEventHandler(t,n){const a=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&a>=65&&a<=90&&typeof n=="function"}function mergeSlotProps$1(t,n){if(!t)return n;function a(p,d){const Q={};return Object.keys(d).forEach(Ct=>{isEventHandler(Ct,d[Ct])&&typeof p[Ct]=="function"&&(Q[Ct]=(...ar)=>{p[Ct](...ar),d[Ct](...ar)})}),Q}if(typeof t=="function"||typeof n=="function")return p=>{const d=typeof n=="function"?n(p):n,Q=typeof t=="function"?t({...p,...d}):t,Ct=clsx(p==null?void 0:p.className,d==null?void 0:d.className,Q==null?void 0:Q.className),ar=a(Q,d);return{...d,...Q,...ar,...!!Ct&&{className:Ct},...(d==null?void 0:d.style)&&(Q==null?void 0:Q.style)&&{style:{...d.style,...Q.style}},...(d==null?void 0:d.sx)&&(Q==null?void 0:Q.sx)&&{sx:[...Array.isArray(d.sx)?d.sx:[d.sx],...Array.isArray(Q.sx)?Q.sx:[Q.sx]]}}};const l=n,u=a(t,l),c=clsx(l==null?void 0:l.className,t==null?void 0:t.className);return{...n,...t,...u,...!!c&&{className:c},...(l==null?void 0:l.style)&&(t==null?void 0:t.style)&&{style:{...l.style,...t.style}},...(l==null?void 0:l.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function isFocusVisible(t){try{return t.matches(":focus-visible")}catch{}return!1}const UNINITIALIZED={};function useLazyRef(t,n){const a=reactExports.useRef(UNINITIALIZED);return a.current===UNINITIALIZED&&(a.current=t(n)),a}class LazyRipple{constructor(){tM(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new LazyRipple}static use(){const n=useLazyRef(LazyRipple.create).current,[a,l]=reactExports.useState(!1);return n.shouldMount=a,n.setShouldMount=l,reactExports.useEffect(n.mountEffect,[a]),n}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...n){this.mount().then(()=>{var a;return(a=this.ref.current)==null?void 0:a.start(...n)})}stop(...n){this.mount().then(()=>{var a;return(a=this.ref.current)==null?void 0:a.stop(...n)})}pulsate(...n){this.mount().then(()=>{var a;return(a=this.ref.current)==null?void 0:a.pulsate(...n)})}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let t,n;const a=new Promise((l,u)=>{t=l,n=u});return a.resolve=t,a.reject=n,a}function _objectWithoutPropertiesLoose(t,n){if(t==null)return{};var a={};for(var l in t)if({}.hasOwnProperty.call(t,l)){if(n.indexOf(l)!==-1)continue;a[l]=t[l]}return a}function _setPrototypeOf(t,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,l){return a.__proto__=l,a},_setPrototypeOf(t,n)}function _inheritsLoose(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,_setPrototypeOf(t,n)}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(n){return n.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(t){_inheritsLoose(n,t);function n(l,u){var c;c=t.call(this,l,u)||this;var p=u,d=p&&!p.isMounting?l.enter:l.appear,Q;return c.appearStatus=null,l.in?d?(Q=EXITED,c.appearStatus=ENTERING):Q=ENTERED:l.unmountOnExit||l.mountOnEnter?Q=UNMOUNTED:Q=EXITED,c.state={status:Q},c.nextCallback=null,c}n.getDerivedStateFromProps=function(u,c){var p=u.in;return p&&c.status===UNMOUNTED?{status:EXITED}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(u){var c=null;if(u!==this.props){var p=this.state.status;this.props.in?p!==ENTERING&&p!==ENTERED&&(c=ENTERING):(p===ENTERING||p===ENTERED)&&(c=EXITING)}this.updateStatus(!1,c)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var u=this.props.timeout,c,p,d;return c=p=d=u,u!=null&&typeof u!="number"&&(c=u.exit,p=u.enter,d=u.appear!==void 0?u.appear:p),{exit:c,enter:p,appear:d}},a.updateStatus=function(u,c){if(u===void 0&&(u=!1),c!==null)if(this.cancelNextCallback(),c===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var p=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);p&&forceReflow(p)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},a.performEnter=function(u){var c=this,p=this.props.enter,d=this.context?this.context.isMounting:u,Q=this.props.nodeRef?[d]:[ReactDOM.findDOMNode(this),d],Ct=Q[0],ar=Q[1],en=this.getTimeouts(),tn=d?en.appear:en.enter;if(!u&&!p||config$1.disabled){this.safeSetState({status:ENTERED},function(){c.props.onEntered(Ct)});return}this.props.onEnter(Ct,ar),this.safeSetState({status:ENTERING},function(){c.props.onEntering(Ct,ar),c.onTransitionEnd(tn,function(){c.safeSetState({status:ENTERED},function(){c.props.onEntered(Ct,ar)})})})},a.performExit=function(){var u=this,c=this.props.exit,p=this.getTimeouts(),d=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!c||config$1.disabled){this.safeSetState({status:EXITED},function(){u.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:EXITING},function(){u.props.onExiting(d),u.onTransitionEnd(p.exit,function(){u.safeSetState({status:EXITED},function(){u.props.onExited(d)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(u,c){c=this.setNextCallback(c),this.setState(u,c)},a.setNextCallback=function(u){var c=this,p=!0;return this.nextCallback=function(d){p&&(p=!1,c.nextCallback=null,u(d))},this.nextCallback.cancel=function(){p=!1},this.nextCallback},a.onTransitionEnd=function(u,c){this.setNextCallback(c);var p=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),d=u==null&&!this.props.addEndListener;if(!p||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var Q=this.props.nodeRef?[this.nextCallback]:[p,this.nextCallback],Ct=Q[0],ar=Q[1];this.props.addEndListener(Ct,ar)}u!=null&&setTimeout(this.nextCallback,u)},a.render=function(){var u=this.state.status;if(u===UNMOUNTED)return null;var c=this.props,p=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var d=_objectWithoutPropertiesLoose(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof p=="function"?p(u,d):React.cloneElement(React.Children.only(p),d))},n}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function getChildMapping(t,n){var a=function(c){return n&&reactExports.isValidElement(c)?n(c):c},l=Object.create(null);return t&&reactExports.Children.map(t,function(u){return u}).forEach(function(u){l[u.key]=a(u)}),l}function mergeChildMappings(t,n){t=t||{},n=n||{};function a(ar){return ar in n?n[ar]:t[ar]}var l=Object.create(null),u=[];for(var c in t)c in n?u.length&&(l[c]=u,u=[]):u.push(c);var p,d={};for(var Q in n){if(l[Q])for(p=0;p<l[Q].length;p++){var Ct=l[Q][p];d[l[Q][p]]=a(Ct)}d[Q]=a(Q)}for(p=0;p<u.length;p++)d[u[p]]=a(u[p]);return d}function getProp(t,n,a){return a[n]!=null?a[n]:t.props[n]}function getInitialChildMapping(t,n){return getChildMapping(t.children,function(a){return reactExports.cloneElement(a,{onExited:n.bind(null,a),in:!0,appear:getProp(a,"appear",t),enter:getProp(a,"enter",t),exit:getProp(a,"exit",t)})})}function getNextChildMapping(t,n,a){var l=getChildMapping(t.children),u=mergeChildMappings(n,l);return Object.keys(u).forEach(function(c){var p=u[c];if(reactExports.isValidElement(p)){var d=c in n,Q=c in l,Ct=n[c],ar=reactExports.isValidElement(Ct)&&!Ct.props.in;Q&&(!d||ar)?u[c]=reactExports.cloneElement(p,{onExited:a.bind(null,p),in:!0,exit:getProp(p,"exit",t),enter:getProp(p,"enter",t)}):!Q&&d&&!ar?u[c]=reactExports.cloneElement(p,{in:!1}):Q&&d&&reactExports.isValidElement(Ct)&&(u[c]=reactExports.cloneElement(p,{onExited:a.bind(null,p),in:Ct.props.in,exit:getProp(p,"exit",t),enter:getProp(p,"enter",t)}))}}),u}var values=Object.values||function(t){return Object.keys(t).map(function(n){return t[n]})},defaultProps={component:"div",childFactory:function(n){return n}},TransitionGroup=function(t){_inheritsLoose(n,t);function n(l,u){var c;c=t.call(this,l,u)||this;var p=c.handleExited.bind(_assertThisInitialized(c));return c.state={contextValue:{isMounting:!0},handleExited:p,firstRender:!0},c}var a=n.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(u,c){var p=c.children,d=c.handleExited,Q=c.firstRender;return{children:Q?getInitialChildMapping(u,d):getNextChildMapping(u,p,d),firstRender:!1}},a.handleExited=function(u,c){var p=getChildMapping(this.props.children);u.key in p||(u.props.onExited&&u.props.onExited(c),this.mounted&&this.setState(function(d){var Q=_extends({},d.children);return delete Q[u.key],{children:Q}}))},a.render=function(){var u=this.props,c=u.component,p=u.childFactory,d=_objectWithoutPropertiesLoose(u,["component","childFactory"]),Q=this.state.contextValue,Ct=values(this.state.children).map(p);return delete d.appear,delete d.enter,delete d.exit,c===null?React.createElement(TransitionGroupContext.Provider,{value:Q},Ct):React.createElement(TransitionGroupContext.Provider,{value:Q},React.createElement(c,d,Ct))},n}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const EMPTY=[];function useOnMount(t){reactExports.useEffect(t,EMPTY)}class Timeout{constructor(){tM(this,"currentId",null);tM(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});tM(this,"disposeEffect",()=>this.clear)}static create(){return new Timeout}start(n,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},n)}}function useTimeout(){const t=useLazyRef(Timeout.create).current;return useOnMount(t.disposeEffect),t}function Ripple(t){const{className:n,classes:a,pulsate:l=!1,rippleX:u,rippleY:c,rippleSize:p,in:d,onExited:Q,timeout:Ct}=t,[ar,en]=reactExports.useState(!1),tn=clsx(n,a.ripple,a.rippleVisible,l&&a.ripplePulsate),on={width:p,height:p,top:-(p/2)+c,left:-(p/2)+u},cn=clsx(a.child,ar&&a.childLeaving,l&&a.childPulsate);return!d&&!ar&&en(!0),reactExports.useEffect(()=>{if(!d&&Q!=null){const gn=setTimeout(Q,Ct);return()=>{clearTimeout(gn)}}},[Q,d,Ct]),jsxRuntimeExports.jsx("span",{className:tn,style:on,children:jsxRuntimeExports.jsx("span",{className:cn})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiTouchRipple"}),{center:u=!1,classes:c={},className:p,...d}=l,[Q,Ct]=reactExports.useState([]),ar=reactExports.useRef(0),en=reactExports.useRef(null);reactExports.useEffect(()=>{en.current&&(en.current(),en.current=null)},[Q]);const tn=reactExports.useRef(!1),on=useTimeout(),cn=reactExports.useRef(null),gn=reactExports.useRef(null),Cn=reactExports.useCallback(ox=>{const{pulsate:lx,rippleX:cx,rippleY:dx,rippleSize:hx,cb:fx}=ox;Ct(ux=>[...ux,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(c.ripple,touchRippleClasses.ripple),rippleVisible:clsx(c.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(c.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(c.child,touchRippleClasses.child),childLeaving:clsx(c.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(c.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:lx,rippleX:cx,rippleY:dx,rippleSize:hx},ar.current)]),ar.current+=1,en.current=fx},[c]),ex=reactExports.useCallback((ox={},lx={},cx=()=>{})=>{const{pulsate:dx=!1,center:hx=u||lx.pulsate,fakeElement:fx=!1}=lx;if((ox==null?void 0:ox.type)==="mousedown"&&tn.current){tn.current=!1;return}(ox==null?void 0:ox.type)==="touchstart"&&(tn.current=!0);const ux=fx?null:gn.current,gx=ux?ux.getBoundingClientRect():{width:0,height:0,left:0,top:0};let yx,_x,vx;if(hx||ox===void 0||ox.clientX===0&&ox.clientY===0||!ox.clientX&&!ox.touches)yx=Math.round(gx.width/2),_x=Math.round(gx.height/2);else{const{clientX:bx,clientY:xx}=ox.touches&&ox.touches.length>0?ox.touches[0]:ox;yx=Math.round(bx-gx.left),_x=Math.round(xx-gx.top)}if(hx)vx=Math.sqrt((2*gx.width**2+gx.height**2)/3),vx%2===0&&(vx+=1);else{const bx=Math.max(Math.abs((ux?ux.clientWidth:0)-yx),yx)*2+2,xx=Math.max(Math.abs((ux?ux.clientHeight:0)-_x),_x)*2+2;vx=Math.sqrt(bx**2+xx**2)}ox!=null&&ox.touches?cn.current===null&&(cn.current=()=>{Cn({pulsate:dx,rippleX:yx,rippleY:_x,rippleSize:vx,cb:cx})},on.start(DELAY_RIPPLE,()=>{cn.current&&(cn.current(),cn.current=null)})):Cn({pulsate:dx,rippleX:yx,rippleY:_x,rippleSize:vx,cb:cx})},[u,Cn,on]),ix=reactExports.useCallback(()=>{ex({},{pulsate:!0})},[ex]),ax=reactExports.useCallback((ox,lx)=>{if(on.clear(),(ox==null?void 0:ox.type)==="touchend"&&cn.current){cn.current(),cn.current=null,on.start(0,()=>{ax(ox,lx)});return}cn.current=null,Ct(cx=>cx.length>0?cx.slice(1):cx),en.current=lx},[on]);return reactExports.useImperativeHandle(a,()=>({pulsate:ix,start:ex,stop:ax}),[ix,ex,ax]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,c.root,p),ref:gn,...d,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:Q})})});function getButtonBaseUtilityClass(t){return generateUtilityClass("MuiButtonBase",t)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$G=t=>{const{disabled:n,focusVisible:a,focusVisibleClassName:l,classes:u}=t,p=composeClasses({root:["root",n&&"disabled",a&&"focusVisible"]},getButtonBaseUtilityClass,u);return a&&l&&(p.root+=` ${l}`),p},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiButtonBase"}),{action:u,centerRipple:c=!1,children:p,className:d,component:Q="button",disabled:Ct=!1,disableRipple:ar=!1,disableTouchRipple:en=!1,focusRipple:tn=!1,focusVisibleClassName:on,LinkComponent:cn="a",onBlur:gn,onClick:Cn,onContextMenu:ex,onDragLeave:ix,onFocus:ax,onFocusVisible:ox,onKeyDown:lx,onKeyUp:cx,onMouseDown:dx,onMouseLeave:hx,onMouseUp:fx,onTouchEnd:ux,onTouchMove:gx,onTouchStart:yx,tabIndex:_x=0,TouchRippleProps:vx,touchRippleRef:bx,type:xx,...Sx}=l,Ax=reactExports.useRef(null),Cx=useLazyRipple(),Tx=useForkRef(Cx.ref,bx),[Px,Fx]=reactExports.useState(!1);Ct&&Px&&Fx(!1),reactExports.useImperativeHandle(u,()=>({focusVisible:()=>{Fx(!0),Ax.current.focus()}}),[]);const Mx=Cx.shouldMount&&!ar&&!Ct;reactExports.useEffect(()=>{Px&&tn&&!ar&&Cx.pulsate()},[ar,tn,Px,Cx]);const Dx=useRippleHandler(Cx,"start",dx,en),Ox=useRippleHandler(Cx,"stop",ex,en),Lx=useRippleHandler(Cx,"stop",ix,en),Nx=useRippleHandler(Cx,"stop",fx,en),Gx=useRippleHandler(Cx,"stop",bE=>{Px&&bE.preventDefault(),hx&&hx(bE)},en),Ux=useRippleHandler(Cx,"start",yx,en),Hx=useRippleHandler(Cx,"stop",ux,en),Vx=useRippleHandler(Cx,"stop",gx,en),zx=useRippleHandler(Cx,"stop",bE=>{isFocusVisible(bE.target)||Fx(!1),gn&&gn(bE)},!1),rE=useEventCallback(bE=>{Ax.current||(Ax.current=bE.currentTarget),isFocusVisible(bE.target)&&(Fx(!0),ox&&ox(bE)),ax&&ax(bE)}),Zx=()=>{const bE=Ax.current;return Q&&Q!=="button"&&!(bE.tagName==="A"&&bE.href)},eE=useEventCallback(bE=>{tn&&!bE.repeat&&Px&&bE.key===" "&&Cx.stop(bE,()=>{Cx.start(bE)}),bE.target===bE.currentTarget&&Zx()&&bE.key===" "&&bE.preventDefault(),lx&&lx(bE),bE.target===bE.currentTarget&&Zx()&&bE.key==="Enter"&&!Ct&&(bE.preventDefault(),Cn&&Cn(bE))}),oE=useEventCallback(bE=>{tn&&bE.key===" "&&Px&&!bE.defaultPrevented&&Cx.stop(bE,()=>{Cx.pulsate(bE)}),cx&&cx(bE),Cn&&bE.target===bE.currentTarget&&Zx()&&bE.key===" "&&!bE.defaultPrevented&&Cn(bE)});let iE=Q;iE==="button"&&(Sx.href||Sx.to)&&(iE=cn);const Wx={};iE==="button"?(Wx.type=xx===void 0?"button":xx,Wx.disabled=Ct):(!Sx.href&&!Sx.to&&(Wx.role="button"),Ct&&(Wx["aria-disabled"]=Ct));const AE=useForkRef(a,Ax),ME={...l,centerRipple:c,component:Q,disabled:Ct,disableRipple:ar,disableTouchRipple:en,focusRipple:tn,tabIndex:_x,focusVisible:Px},EE=useUtilityClasses$G(ME);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:iE,className:clsx(EE.root,d),ownerState:ME,onBlur:zx,onClick:Cn,onContextMenu:Ox,onFocus:rE,onKeyDown:eE,onKeyUp:oE,onMouseDown:Dx,onMouseLeave:Gx,onMouseUp:Nx,onDragLeave:Lx,onTouchEnd:Hx,onTouchMove:Vx,onTouchStart:Ux,ref:AE,tabIndex:Ct?-1:_x,type:xx,...Wx,...Sx,children:[p,Mx?jsxRuntimeExports.jsx(TouchRipple,{ref:Tx,center:c,...vx}):null]})});function useRippleHandler(t,n,a,l=!1){return useEventCallback(u=>(a&&a(u),l||t[n](u),!0))}function hasCorrectMainProperty(t){return typeof t.main=="string"}function checkSimplePaletteColorValues(t,n=[]){if(!hasCorrectMainProperty(t))return!1;for(const a of n)if(!t.hasOwnProperty(a)||typeof t[a]!="string")return!1;return!0}function createSimplePaletteValueFilter(t=[]){return([,n])=>n&&checkSimplePaletteColorValues(n,t)}function getCircularProgressUtilityClass(t){return generateUtilityClass("MuiCircularProgress",t)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const SIZE=44,circularRotateKeyframe=keyframes`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,circularDashKeyframe=keyframes`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,rotateAnimation=typeof circularRotateKeyframe!="string"?css`
        animation: ${circularRotateKeyframe} 1.4s linear infinite;
      `:null,dashAnimation=typeof circularDashKeyframe!="string"?css`
        animation: ${circularDashKeyframe} 1.4s ease-in-out infinite;
      `:null,useUtilityClasses$F=t=>{const{classes:n,variant:a,color:l,disableShrink:u}=t,c={root:["root",a,`color${capitalize(l)}`],svg:["svg"],circle:["circle",`circle${capitalize(a)}`,u&&"circleDisableShrink"]};return composeClasses(c,getCircularProgressUtilityClass,n)},CircularProgressRoot=styled("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:rotateAnimation||{animation:`${circularRotateKeyframe} 1.4s linear infinite`}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}}))]}))),CircularProgressSVG=styled("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),CircularProgressCircle=styled("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.circle,n[`circle${capitalize(a.variant)}`],a.disableShrink&&n.circleDisableShrink]}})(memoTheme(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink,style:dashAnimation||{animation:`${circularDashKeyframe} 1.4s ease-in-out infinite`}}]}))),CircularProgress=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiCircularProgress"}),{className:u,color:c="primary",disableShrink:p=!1,size:d=40,style:Q,thickness:Ct=3.6,value:ar=0,variant:en="indeterminate",...tn}=l,on={...l,color:c,disableShrink:p,size:d,thickness:Ct,value:ar,variant:en},cn=useUtilityClasses$F(on),gn={},Cn={},ex={};if(en==="determinate"){const ix=2*Math.PI*((SIZE-Ct)/2);gn.strokeDasharray=ix.toFixed(3),ex["aria-valuenow"]=Math.round(ar),gn.strokeDashoffset=`${((100-ar)/100*ix).toFixed(3)}px`,Cn.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,{className:clsx(cn.root,u),style:{width:d,height:d,...Cn,...Q},ownerState:on,ref:a,role:"progressbar",...ex,...tn,children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:cn.svg,ownerState:on,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:cn.circle,style:gn,ownerState:on,cx:SIZE,cy:SIZE,r:(SIZE-Ct)/2,fill:"none",strokeWidth:Ct})})})});function getButtonUtilityClass(t){return generateUtilityClass("MuiButton",t)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ButtonGroupContext=reactExports.createContext({}),ButtonGroupButtonContext=reactExports.createContext(void 0),useUtilityClasses$E=t=>{const{color:n,disableElevation:a,fullWidth:l,size:u,variant:c,loading:p,loadingPosition:d,classes:Q}=t,Ct={root:["root",p&&"loading",c,`${c}${capitalize(n)}`,`size${capitalize(u)}`,`${c}Size${capitalize(u)}`,`color${capitalize(n)}`,a&&"disableElevation",l&&"fullWidth",p&&`loadingPosition${capitalize(d)}`],startIcon:["icon","startIcon",`iconSize${capitalize(u)}`],endIcon:["icon","endIcon",`iconSize${capitalize(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},ar=composeClasses(Ct,getButtonUtilityClass,Q);return{...Q,...ar}},commonIconStyles=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ButtonRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`${a.variant}${capitalize(a.color)}`],n[`size${capitalize(a.size)}`],n[`${a.variant}Size${capitalize(a.size)}`],a.color==="inherit"&&n.colorInherit,a.disableElevation&&n.disableElevation,a.fullWidth&&n.fullWidth,a.loading&&n.loading]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],a=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${buttonClasses.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${buttonClasses.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([l])=>({props:{color:l},style:{"--variant-textColor":(t.vars||t).palette[l].main,"--variant-outlinedColor":(t.vars||t).palette[l].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[l].mainChannel} / 0.5)`:alpha$1(t.palette[l].main,.5),"--variant-containedColor":(t.vars||t).palette[l].contrastText,"--variant-containedBg":(t.vars||t).palette[l].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[l].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[l].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette[l].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[l].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[l].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette[l].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${buttonClasses.loading}`]:{color:"transparent"}}}]}})),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.startIcon,a.loading&&n.startIconLoadingStart,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...commonIconStyles]})),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.endIcon,a.loading&&n.endIconLoadingEnd,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...commonIconStyles]})),ButtonLoadingIndicator=styled("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ButtonLoadingIconPlaceholder=styled("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Button=reactExports.forwardRef(function(n,a){const l=reactExports.useContext(ButtonGroupContext),u=reactExports.useContext(ButtonGroupButtonContext),c=resolveProps(l,n),p=useDefaultProps({props:c,name:"MuiButton"}),{children:d,color:Q="primary",component:Ct="button",className:ar,disabled:en=!1,disableElevation:tn=!1,disableFocusRipple:on=!1,endIcon:cn,focusVisibleClassName:gn,fullWidth:Cn=!1,id:ex,loading:ix=null,loadingIndicator:ax,loadingPosition:ox="center",size:lx="medium",startIcon:cx,type:dx,variant:hx="text",...fx}=p,ux=useId(ex),gx=ax??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":ux,color:"inherit",size:16}),yx={...p,color:Q,component:Ct,disabled:en,disableElevation:tn,disableFocusRipple:on,fullWidth:Cn,loading:ix,loadingIndicator:gx,loadingPosition:ox,size:lx,type:dx,variant:hx},_x=useUtilityClasses$E(yx),vx=(cx||ix&&ox==="start")&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:_x.startIcon,ownerState:yx,children:cx||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:_x.loadingIconPlaceholder,ownerState:yx})}),bx=(cn||ix&&ox==="end")&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:_x.endIcon,ownerState:yx,children:cn||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:_x.loadingIconPlaceholder,ownerState:yx})}),xx=u||"",Sx=typeof ix=="boolean"?jsxRuntimeExports.jsx("span",{className:_x.loadingWrapper,style:{display:"contents"},children:ix&&jsxRuntimeExports.jsx(ButtonLoadingIndicator,{className:_x.loadingIndicator,ownerState:yx,children:gx})}):null;return jsxRuntimeExports.jsxs(ButtonRoot,{ownerState:yx,className:clsx(l.className,_x.root,ar,xx),component:Ct,disabled:en||ix,focusRipple:!on,focusVisibleClassName:clsx(_x.focusVisible,gn),ref:a,type:dx,id:ix?ux:ex,...fx,classes:_x,children:[vx,ox!=="end"&&Sx,d,ox==="end"&&Sx,bx]})});function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),useUtilityClasses$D=t=>{const{classes:n,disabled:a,color:l,edge:u,size:c,loading:p}=t,d={root:["root",p&&"loading",a&&"disabled",l!=="default"&&`color${capitalize(l)}`,u&&`edge${capitalize(u)}`,`size${capitalize(c)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return composeClasses(d,getIconButtonUtilityClass,n)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.loading&&n.loading,a.color!=="default"&&n[`color${capitalize(a.color)}`],a.edge&&n[`edge${capitalize(a.edge)}`],n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:n=>!n.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),memoTheme(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${iconButtonClasses.loading}`]:{color:"transparent"}}))),IconButtonLoadingIndicator=styled("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),IconButton=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiIconButton"}),{edge:u=!1,children:c,className:p,color:d="default",disabled:Q=!1,disableFocusRipple:Ct=!1,size:ar="medium",id:en,loading:tn=null,loadingIndicator:on,...cn}=l,gn=useId(en),Cn=on??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":gn,color:"inherit",size:16}),ex={...l,edge:u,color:d,disabled:Q,disableFocusRipple:Ct,loading:tn,loadingIndicator:Cn,size:ar},ix=useUtilityClasses$D(ex);return jsxRuntimeExports.jsxs(IconButtonRoot,{id:tn?gn:en,className:clsx(ix.root,p),centerRipple:!0,focusRipple:!Ct,disabled:Q||tn,ref:a,...cn,ownerState:ex,children:[typeof tn=="boolean"&&jsxRuntimeExports.jsx("span",{className:ix.loadingWrapper,style:{display:"contents"},children:jsxRuntimeExports.jsx(IconButtonLoadingIndicator,{className:ix.loadingIndicator,ownerState:ex,children:tn&&Cn})}),c]})}),DeleteIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),UndoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"})),RedoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}));function ThemeProviderNoVars({theme:t,...n}){const a=THEME_ID in t?t[THEME_ID]:void 0;return jsxRuntimeExports.jsx(ThemeProvider$1,{...n,themeId:a?THEME_ID:void 0,theme:a||t})}const defaultConfig={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:InternalCssVarsProvider}=createCssVarsProvider({themeId:THEME_ID,theme:()=>createTheme({cssVariables:!0}),colorSchemeStorageKey:defaultConfig.colorSchemeStorageKey,modeStorageKey:defaultConfig.modeStorageKey,defaultColorScheme:{light:defaultConfig.defaultLightColorScheme,dark:defaultConfig.defaultDarkColorScheme},resolveTheme:t=>{const n={...t,typography:createTypography(t.palette,t.typography)};return n.unstable_sx=function(l){return styleFunctionSx({sx:l,theme:this})},n}}),CssVarsProvider=InternalCssVarsProvider;function ThemeProvider({theme:t,...n}){const a=reactExports.useMemo(()=>{if(typeof t=="function")return t;const l=THEME_ID in t?t[THEME_ID]:t;return"colorSchemes"in l?null:"vars"in l?t:{...t,vars:null}},[t]);return a?jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:a,...n}):jsxRuntimeExports.jsx(CssVarsProvider,{theme:t,...n})}const boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});function getReactElementRef(t){var n;return parseInt(reactExports.version,10)>=19?((n=t==null?void 0:t.props)==null?void 0:n.ref)||null:(t==null?void 0:t.ref)||null}const reflow=t=>t.scrollTop;function getTransitionProps(t,n){const{timeout:a,easing:l,style:u={}}=t;return{duration:u.transitionDuration??(typeof a=="number"?a:a[n.mode]||0),easing:u.transitionTimingFunction??(typeof l=="object"?l[n.mode]:l),delay:u.transitionDelay}}function getScale(t){return`scale(${t}, ${t**2})`}const styles$2={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(n,a){const{addEndListener:l,appear:u=!0,children:c,easing:p,in:d,onEnter:Q,onEntered:Ct,onEntering:ar,onExit:en,onExited:tn,onExiting:on,style:cn,timeout:gn="auto",TransitionComponent:Cn=Transition,...ex}=n,ix=useTimeout(),ax=reactExports.useRef(),ox=useTheme(),lx=reactExports.useRef(null),cx=useForkRef(lx,getReactElementRef(c),a),dx=bx=>xx=>{if(bx){const Sx=lx.current;xx===void 0?bx(Sx):bx(Sx,xx)}},hx=dx(ar),fx=dx((bx,xx)=>{reflow(bx);const{duration:Sx,delay:Ax,easing:Cx}=getTransitionProps({style:cn,timeout:gn,easing:p},{mode:"enter"});let Tx;gn==="auto"?(Tx=ox.transitions.getAutoHeightDuration(bx.clientHeight),ax.current=Tx):Tx=Sx,bx.style.transition=[ox.transitions.create("opacity",{duration:Tx,delay:Ax}),ox.transitions.create("transform",{duration:isWebKit154?Tx:Tx*.666,delay:Ax,easing:Cx})].join(","),Q&&Q(bx,xx)}),ux=dx(Ct),gx=dx(on),yx=dx(bx=>{const{duration:xx,delay:Sx,easing:Ax}=getTransitionProps({style:cn,timeout:gn,easing:p},{mode:"exit"});let Cx;gn==="auto"?(Cx=ox.transitions.getAutoHeightDuration(bx.clientHeight),ax.current=Cx):Cx=xx,bx.style.transition=[ox.transitions.create("opacity",{duration:Cx,delay:Sx}),ox.transitions.create("transform",{duration:isWebKit154?Cx:Cx*.666,delay:isWebKit154?Sx:Sx||Cx*.333,easing:Ax})].join(","),bx.style.opacity=0,bx.style.transform=getScale(.75),en&&en(bx)}),_x=dx(tn),vx=bx=>{gn==="auto"&&ix.start(ax.current||0,bx),l&&l(lx.current,bx)};return jsxRuntimeExports.jsx(Cn,{appear:u,in:d,nodeRef:lx,onEnter:fx,onEntered:ux,onEntering:hx,onExit:yx,onExited:_x,onExiting:gx,addEndListener:vx,timeout:gn==="auto"?null:gn,...ex,children:(bx,{ownerState:xx,...Sx})=>reactExports.cloneElement(c,{style:{opacity:0,transform:getScale(.75),visibility:bx==="exited"&&!d?"hidden":void 0,...styles$2[bx],...cn,...c.props.style},ref:cx,...Sx})})});Grow&&(Grow.muiSupportAuto=!0);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,n){return t.concat([n+"-"+start$1,n+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,n){return t.concat([n,n+"-"+start$1,n+"-"+end$1])},[]),beforeRead="beforeRead",read$1="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read$1,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function isElement(t){var n=getWindow(t).Element;return t instanceof n||t instanceof Element}function isHTMLElement$1(t){var n=getWindow(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var n=getWindow(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function applyStyles(t){var n=t.state;Object.keys(n.elements).forEach(function(a){var l=n.styles[a]||{},u=n.attributes[a]||{},c=n.elements[a];!isHTMLElement$1(c)||!getNodeName(c)||(Object.assign(c.style,l),Object.keys(u).forEach(function(p){var d=u[p];d===!1?c.removeAttribute(p):c.setAttribute(p,d===!0?"":d)}))})}function effect$2(t){var n=t.state,a={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,a.popper),n.styles=a,n.elements.arrow&&Object.assign(n.elements.arrow.style,a.arrow),function(){Object.keys(n.elements).forEach(function(l){var u=n.elements[l],c=n.attributes[l]||{},p=Object.keys(n.styles.hasOwnProperty(l)?n.styles[l]:a[l]),d=p.reduce(function(Q,Ct){return Q[Ct]="",Q},{});!isHTMLElement$1(u)||!getNodeName(u)||(Object.assign(u.style,d),Object.keys(c).forEach(function(Q){u.removeAttribute(Q)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max$3=Math.max,min$2=Math.min,round$5=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,n,a){n===void 0&&(n=!1),a===void 0&&(a=!1);var l=t.getBoundingClientRect(),u=1,c=1;n&&isHTMLElement$1(t)&&(u=t.offsetWidth>0&&round$5(l.width)/t.offsetWidth||1,c=t.offsetHeight>0&&round$5(l.height)/t.offsetHeight||1);var p=isElement(t)?getWindow(t):window,d=p.visualViewport,Q=!isLayoutViewport()&&a,Ct=(l.left+(Q&&d?d.offsetLeft:0))/u,ar=(l.top+(Q&&d?d.offsetTop:0))/c,en=l.width/u,tn=l.height/c;return{width:en,height:tn,top:ar,right:Ct+en,bottom:ar+tn,left:Ct,x:Ct,y:ar}}function getLayoutRect$1(t){var n=getBoundingClientRect(t),a=t.offsetWidth,l=t.offsetHeight;return Math.abs(n.width-a)<=1&&(a=n.width),Math.abs(n.height-l)<=1&&(l=n.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:l}}function contains(t,n){var a=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(a&&isShadowRoot(a)){var l=n;do{if(l&&t.isSameNode(l))return!0;l=l.parentNode||l.host}while(l)}return!1}function getComputedStyle$2(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement$1(t)||getComputedStyle$2(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var n=/firefox/i.test(getUAString()),a=/Trident/i.test(getUAString());if(a&&isHTMLElement$1(t)){var l=getComputedStyle$2(t);if(l.position==="fixed")return null}var u=getParentNode(t);for(isShadowRoot(u)&&(u=u.host);isHTMLElement$1(u)&&["html","body"].indexOf(getNodeName(u))<0;){var c=getComputedStyle$2(u);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||n&&c.willChange==="filter"||n&&c.filter&&c.filter!=="none")return u;u=u.parentNode}return null}function getOffsetParent(t){for(var n=getWindow(t),a=getTrueOffsetParent(t);a&&isTableElement(a)&&getComputedStyle$2(a).position==="static";)a=getTrueOffsetParent(a);return a&&(getNodeName(a)==="html"||getNodeName(a)==="body"&&getComputedStyle$2(a).position==="static")?n:a||getContainingBlock(t)||n}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,n,a){return max$3(t,min$2(n,a))}function withinMaxClamp(t,n,a){var l=within(t,n,a);return l>a?a:l}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,n){return n.reduce(function(a,l){return a[l]=t,a},{})}var toPaddingObject=function(n,a){return n=typeof n=="function"?n(Object.assign({},a.rects,{placement:a.placement})):n,mergePaddingObject(typeof n!="number"?n:expandToHashMap(n,basePlacements))};function arrow(t){var n,a=t.state,l=t.name,u=t.options,c=a.elements.arrow,p=a.modifiersData.popperOffsets,d=getBasePlacement(a.placement),Q=getMainAxisFromPlacement(d),Ct=[left,right].indexOf(d)>=0,ar=Ct?"height":"width";if(!(!c||!p)){var en=toPaddingObject(u.padding,a),tn=getLayoutRect$1(c),on=Q==="y"?top:left,cn=Q==="y"?bottom:right,gn=a.rects.reference[ar]+a.rects.reference[Q]-p[Q]-a.rects.popper[ar],Cn=p[Q]-a.rects.reference[Q],ex=getOffsetParent(c),ix=ex?Q==="y"?ex.clientHeight||0:ex.clientWidth||0:0,ax=gn/2-Cn/2,ox=en[on],lx=ix-tn[ar]-en[cn],cx=ix/2-tn[ar]/2+ax,dx=within(ox,cx,lx),hx=Q;a.modifiersData[l]=(n={},n[hx]=dx,n.centerOffset=dx-cx,n)}}function effect$1(t){var n=t.state,a=t.options,l=a.element,u=l===void 0?"[data-popper-arrow]":l;u!=null&&(typeof u=="string"&&(u=n.elements.popper.querySelector(u),!u)||contains(n.elements.popper,u)&&(n.elements.arrow=u))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,n){var a=t.x,l=t.y,u=n.devicePixelRatio||1;return{x:round$5(a*u)/u||0,y:round$5(l*u)/u||0}}function mapToStyles(t){var n,a=t.popper,l=t.popperRect,u=t.placement,c=t.variation,p=t.offsets,d=t.position,Q=t.gpuAcceleration,Ct=t.adaptive,ar=t.roundOffsets,en=t.isFixed,tn=p.x,on=tn===void 0?0:tn,cn=p.y,gn=cn===void 0?0:cn,Cn=typeof ar=="function"?ar({x:on,y:gn}):{x:on,y:gn};on=Cn.x,gn=Cn.y;var ex=p.hasOwnProperty("x"),ix=p.hasOwnProperty("y"),ax=left,ox=top,lx=window;if(Ct){var cx=getOffsetParent(a),dx="clientHeight",hx="clientWidth";if(cx===getWindow(a)&&(cx=getDocumentElement(a),getComputedStyle$2(cx).position!=="static"&&d==="absolute"&&(dx="scrollHeight",hx="scrollWidth")),cx=cx,u===top||(u===left||u===right)&&c===end$1){ox=bottom;var fx=en&&cx===lx&&lx.visualViewport?lx.visualViewport.height:cx[dx];gn-=fx-l.height,gn*=Q?1:-1}if(u===left||(u===top||u===bottom)&&c===end$1){ax=right;var ux=en&&cx===lx&&lx.visualViewport?lx.visualViewport.width:cx[hx];on-=ux-l.width,on*=Q?1:-1}}var gx=Object.assign({position:d},Ct&&unsetSides),yx=ar===!0?roundOffsetsByDPR({x:on,y:gn},getWindow(a)):{x:on,y:gn};if(on=yx.x,gn=yx.y,Q){var _x;return Object.assign({},gx,(_x={},_x[ox]=ix?"0":"",_x[ax]=ex?"0":"",_x.transform=(lx.devicePixelRatio||1)<=1?"translate("+on+"px, "+gn+"px)":"translate3d("+on+"px, "+gn+"px, 0)",_x))}return Object.assign({},gx,(n={},n[ox]=ix?gn+"px":"",n[ax]=ex?on+"px":"",n.transform="",n))}function computeStyles(t){var n=t.state,a=t.options,l=a.gpuAcceleration,u=l===void 0?!0:l,c=a.adaptive,p=c===void 0?!0:c,d=a.roundOffsets,Q=d===void 0?!0:d,Ct={placement:getBasePlacement(n.placement),variation:getVariation(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:u,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,mapToStyles(Object.assign({},Ct,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:p,roundOffsets:Q})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,mapToStyles(Object.assign({},Ct,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Q})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var n=t.state,a=t.instance,l=t.options,u=l.scroll,c=u===void 0?!0:u,p=l.resize,d=p===void 0?!0:p,Q=getWindow(n.elements.popper),Ct=[].concat(n.scrollParents.reference,n.scrollParents.popper);return c&&Ct.forEach(function(ar){ar.addEventListener("scroll",a.update,passive)}),d&&Q.addEventListener("resize",a.update,passive),function(){c&&Ct.forEach(function(ar){ar.removeEventListener("scroll",a.update,passive)}),d&&Q.removeEventListener("resize",a.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(n){return hash$1[n]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(n){return hash[n]})}function getWindowScroll(t){var n=getWindow(t),a=n.pageXOffset,l=n.pageYOffset;return{scrollLeft:a,scrollTop:l}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,n){var a=getWindow(t),l=getDocumentElement(t),u=a.visualViewport,c=l.clientWidth,p=l.clientHeight,d=0,Q=0;if(u){c=u.width,p=u.height;var Ct=isLayoutViewport();(Ct||!Ct&&n==="fixed")&&(d=u.offsetLeft,Q=u.offsetTop)}return{width:c,height:p,x:d+getWindowScrollBarX(t),y:Q}}function getDocumentRect(t){var n,a=getDocumentElement(t),l=getWindowScroll(t),u=(n=t.ownerDocument)==null?void 0:n.body,c=max$3(a.scrollWidth,a.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),p=max$3(a.scrollHeight,a.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),d=-l.scrollLeft+getWindowScrollBarX(t),Q=-l.scrollTop;return getComputedStyle$2(u||a).direction==="rtl"&&(d+=max$3(a.clientWidth,u?u.clientWidth:0)-c),{width:c,height:p,x:d,y:Q}}function isScrollParent(t){var n=getComputedStyle$2(t),a=n.overflow,l=n.overflowX,u=n.overflowY;return/auto|scroll|overlay|hidden/.test(a+u+l)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement$1(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,n){var a;n===void 0&&(n=[]);var l=getScrollParent(t),u=l===((a=t.ownerDocument)==null?void 0:a.body),c=getWindow(l),p=u?[c].concat(c.visualViewport||[],isScrollParent(l)?l:[]):l,d=n.concat(p);return u?d:d.concat(listScrollParents(getParentNode(p)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,n){var a=getBoundingClientRect(t,!1,n==="fixed");return a.top=a.top+t.clientTop,a.left=a.left+t.clientLeft,a.bottom=a.top+t.clientHeight,a.right=a.left+t.clientWidth,a.width=t.clientWidth,a.height=t.clientHeight,a.x=a.left,a.y=a.top,a}function getClientRectFromMixedType(t,n,a){return n===viewport?rectToClientRect(getViewportRect(t,a)):isElement(n)?getInnerBoundingClientRect(n,a):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var n=listScrollParents(getParentNode(t)),a=["absolute","fixed"].indexOf(getComputedStyle$2(t).position)>=0,l=a&&isHTMLElement$1(t)?getOffsetParent(t):t;return isElement(l)?n.filter(function(u){return isElement(u)&&contains(u,l)&&getNodeName(u)!=="body"}):[]}function getClippingRect(t,n,a,l){var u=n==="clippingParents"?getClippingParents(t):[].concat(n),c=[].concat(u,[a]),p=c[0],d=c.reduce(function(Q,Ct){var ar=getClientRectFromMixedType(t,Ct,l);return Q.top=max$3(ar.top,Q.top),Q.right=min$2(ar.right,Q.right),Q.bottom=min$2(ar.bottom,Q.bottom),Q.left=max$3(ar.left,Q.left),Q},getClientRectFromMixedType(t,p,l));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function computeOffsets(t){var n=t.reference,a=t.element,l=t.placement,u=l?getBasePlacement(l):null,c=l?getVariation(l):null,p=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2,Q;switch(u){case top:Q={x:p,y:n.y-a.height};break;case bottom:Q={x:p,y:n.y+n.height};break;case right:Q={x:n.x+n.width,y:d};break;case left:Q={x:n.x-a.width,y:d};break;default:Q={x:n.x,y:n.y}}var Ct=u?getMainAxisFromPlacement(u):null;if(Ct!=null){var ar=Ct==="y"?"height":"width";switch(c){case start$1:Q[Ct]=Q[Ct]-(n[ar]/2-a[ar]/2);break;case end$1:Q[Ct]=Q[Ct]+(n[ar]/2-a[ar]/2);break}}return Q}function detectOverflow(t,n){n===void 0&&(n={});var a=n,l=a.placement,u=l===void 0?t.placement:l,c=a.strategy,p=c===void 0?t.strategy:c,d=a.boundary,Q=d===void 0?clippingParents:d,Ct=a.rootBoundary,ar=Ct===void 0?viewport:Ct,en=a.elementContext,tn=en===void 0?popper:en,on=a.altBoundary,cn=on===void 0?!1:on,gn=a.padding,Cn=gn===void 0?0:gn,ex=mergePaddingObject(typeof Cn!="number"?Cn:expandToHashMap(Cn,basePlacements)),ix=tn===popper?reference:popper,ax=t.rects.popper,ox=t.elements[cn?ix:tn],lx=getClippingRect(isElement(ox)?ox:ox.contextElement||getDocumentElement(t.elements.popper),Q,ar,p),cx=getBoundingClientRect(t.elements.reference),dx=computeOffsets({reference:cx,element:ax,placement:u}),hx=rectToClientRect(Object.assign({},ax,dx)),fx=tn===popper?hx:cx,ux={top:lx.top-fx.top+ex.top,bottom:fx.bottom-lx.bottom+ex.bottom,left:lx.left-fx.left+ex.left,right:fx.right-lx.right+ex.right},gx=t.modifiersData.offset;if(tn===popper&&gx){var yx=gx[u];Object.keys(ux).forEach(function(_x){var vx=[right,bottom].indexOf(_x)>=0?1:-1,bx=[top,bottom].indexOf(_x)>=0?"y":"x";ux[_x]+=yx[bx]*vx})}return ux}function computeAutoPlacement(t,n){n===void 0&&(n={});var a=n,l=a.placement,u=a.boundary,c=a.rootBoundary,p=a.padding,d=a.flipVariations,Q=a.allowedAutoPlacements,Ct=Q===void 0?placements:Q,ar=getVariation(l),en=ar?d?variationPlacements:variationPlacements.filter(function(cn){return getVariation(cn)===ar}):basePlacements,tn=en.filter(function(cn){return Ct.indexOf(cn)>=0});tn.length===0&&(tn=en);var on=tn.reduce(function(cn,gn){return cn[gn]=detectOverflow(t,{placement:gn,boundary:u,rootBoundary:c,padding:p})[getBasePlacement(gn)],cn},{});return Object.keys(on).sort(function(cn,gn){return on[cn]-on[gn]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var n=getOppositePlacement(t);return[getOppositeVariationPlacement(t),n,getOppositeVariationPlacement(n)]}function flip(t){var n=t.state,a=t.options,l=t.name;if(!n.modifiersData[l]._skip){for(var u=a.mainAxis,c=u===void 0?!0:u,p=a.altAxis,d=p===void 0?!0:p,Q=a.fallbackPlacements,Ct=a.padding,ar=a.boundary,en=a.rootBoundary,tn=a.altBoundary,on=a.flipVariations,cn=on===void 0?!0:on,gn=a.allowedAutoPlacements,Cn=n.options.placement,ex=getBasePlacement(Cn),ix=ex===Cn,ax=Q||(ix||!cn?[getOppositePlacement(Cn)]:getExpandedFallbackPlacements(Cn)),ox=[Cn].concat(ax).reduce(function(Dx,Ox){return Dx.concat(getBasePlacement(Ox)===auto?computeAutoPlacement(n,{placement:Ox,boundary:ar,rootBoundary:en,padding:Ct,flipVariations:cn,allowedAutoPlacements:gn}):Ox)},[]),lx=n.rects.reference,cx=n.rects.popper,dx=new Map,hx=!0,fx=ox[0],ux=0;ux<ox.length;ux++){var gx=ox[ux],yx=getBasePlacement(gx),_x=getVariation(gx)===start$1,vx=[top,bottom].indexOf(yx)>=0,bx=vx?"width":"height",xx=detectOverflow(n,{placement:gx,boundary:ar,rootBoundary:en,altBoundary:tn,padding:Ct}),Sx=vx?_x?right:left:_x?bottom:top;lx[bx]>cx[bx]&&(Sx=getOppositePlacement(Sx));var Ax=getOppositePlacement(Sx),Cx=[];if(c&&Cx.push(xx[yx]<=0),d&&Cx.push(xx[Sx]<=0,xx[Ax]<=0),Cx.every(function(Dx){return Dx})){fx=gx,hx=!1;break}dx.set(gx,Cx)}if(hx)for(var Tx=cn?3:1,Px=function(Ox){var Lx=ox.find(function(Nx){var Gx=dx.get(Nx);if(Gx)return Gx.slice(0,Ox).every(function(Ux){return Ux})});if(Lx)return fx=Lx,"break"},Fx=Tx;Fx>0;Fx--){var Mx=Px(Fx);if(Mx==="break")break}n.placement!==fx&&(n.modifiersData[l]._skip=!0,n.placement=fx,n.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,n,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-n.height-a.y,right:t.right-n.width+a.x,bottom:t.bottom-n.height+a.y,left:t.left-n.width-a.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(n){return t[n]>=0})}function hide(t){var n=t.state,a=t.name,l=n.rects.reference,u=n.rects.popper,c=n.modifiersData.preventOverflow,p=detectOverflow(n,{elementContext:"reference"}),d=detectOverflow(n,{altBoundary:!0}),Q=getSideOffsets(p,l),Ct=getSideOffsets(d,u,c),ar=isAnySideFullyClipped(Q),en=isAnySideFullyClipped(Ct);n.modifiersData[a]={referenceClippingOffsets:Q,popperEscapeOffsets:Ct,isReferenceHidden:ar,hasPopperEscaped:en},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":ar,"data-popper-escaped":en})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,n,a){var l=getBasePlacement(t),u=[left,top].indexOf(l)>=0?-1:1,c=typeof a=="function"?a(Object.assign({},n,{placement:t})):a,p=c[0],d=c[1];return p=p||0,d=(d||0)*u,[left,right].indexOf(l)>=0?{x:d,y:p}:{x:p,y:d}}function offset(t){var n=t.state,a=t.options,l=t.name,u=a.offset,c=u===void 0?[0,0]:u,p=placements.reduce(function(ar,en){return ar[en]=distanceAndSkiddingToXY(en,n.rects,c),ar},{}),d=p[n.placement],Q=d.x,Ct=d.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=Q,n.modifiersData.popperOffsets.y+=Ct),n.modifiersData[l]=p}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var n=t.state,a=t.name;n.modifiersData[a]=computeOffsets({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var n=t.state,a=t.options,l=t.name,u=a.mainAxis,c=u===void 0?!0:u,p=a.altAxis,d=p===void 0?!1:p,Q=a.boundary,Ct=a.rootBoundary,ar=a.altBoundary,en=a.padding,tn=a.tether,on=tn===void 0?!0:tn,cn=a.tetherOffset,gn=cn===void 0?0:cn,Cn=detectOverflow(n,{boundary:Q,rootBoundary:Ct,padding:en,altBoundary:ar}),ex=getBasePlacement(n.placement),ix=getVariation(n.placement),ax=!ix,ox=getMainAxisFromPlacement(ex),lx=getAltAxis(ox),cx=n.modifiersData.popperOffsets,dx=n.rects.reference,hx=n.rects.popper,fx=typeof gn=="function"?gn(Object.assign({},n.rects,{placement:n.placement})):gn,ux=typeof fx=="number"?{mainAxis:fx,altAxis:fx}:Object.assign({mainAxis:0,altAxis:0},fx),gx=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,yx={x:0,y:0};if(cx){if(c){var _x,vx=ox==="y"?top:left,bx=ox==="y"?bottom:right,xx=ox==="y"?"height":"width",Sx=cx[ox],Ax=Sx+Cn[vx],Cx=Sx-Cn[bx],Tx=on?-hx[xx]/2:0,Px=ix===start$1?dx[xx]:hx[xx],Fx=ix===start$1?-hx[xx]:-dx[xx],Mx=n.elements.arrow,Dx=on&&Mx?getLayoutRect$1(Mx):{width:0,height:0},Ox=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Lx=Ox[vx],Nx=Ox[bx],Gx=within(0,dx[xx],Dx[xx]),Ux=ax?dx[xx]/2-Tx-Gx-Lx-ux.mainAxis:Px-Gx-Lx-ux.mainAxis,Hx=ax?-dx[xx]/2+Tx+Gx+Nx+ux.mainAxis:Fx+Gx+Nx+ux.mainAxis,Vx=n.elements.arrow&&getOffsetParent(n.elements.arrow),zx=Vx?ox==="y"?Vx.clientTop||0:Vx.clientLeft||0:0,rE=(_x=gx==null?void 0:gx[ox])!=null?_x:0,Zx=Sx+Ux-rE-zx,eE=Sx+Hx-rE,oE=within(on?min$2(Ax,Zx):Ax,Sx,on?max$3(Cx,eE):Cx);cx[ox]=oE,yx[ox]=oE-Sx}if(d){var iE,Wx=ox==="x"?top:left,AE=ox==="x"?bottom:right,ME=cx[lx],EE=lx==="y"?"height":"width",bE=ME+Cn[Wx],kE=ME-Cn[AE],TE=[top,left].indexOf(ex)!==-1,jE=(iE=gx==null?void 0:gx[lx])!=null?iE:0,Ix=TE?bE:ME-dx[EE]-hx[EE]-jE+ux.altAxis,Bx=TE?ME+dx[EE]+hx[EE]-jE-ux.altAxis:kE,Yx=on&&TE?withinMaxClamp(Ix,ME,Bx):within(on?Ix:bE,ME,on?Bx:kE);cx[lx]=Yx,yx[lx]=Yx-ME}n.modifiersData[l]=yx}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement$1(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var n=t.getBoundingClientRect(),a=round$5(n.width)/t.offsetWidth||1,l=round$5(n.height)/t.offsetHeight||1;return a!==1||l!==1}function getCompositeRect(t,n,a){a===void 0&&(a=!1);var l=isHTMLElement$1(n),u=isHTMLElement$1(n)&&isElementScaled(n),c=getDocumentElement(n),p=getBoundingClientRect(t,u,a),d={scrollLeft:0,scrollTop:0},Q={x:0,y:0};return(l||!l&&!a)&&((getNodeName(n)!=="body"||isScrollParent(c))&&(d=getNodeScroll(n)),isHTMLElement$1(n)?(Q=getBoundingClientRect(n,!0),Q.x+=n.clientLeft,Q.y+=n.clientTop):c&&(Q.x=getWindowScrollBarX(c))),{x:p.left+d.scrollLeft-Q.x,y:p.top+d.scrollTop-Q.y,width:p.width,height:p.height}}function order(t){var n=new Map,a=new Set,l=[];t.forEach(function(c){n.set(c.name,c)});function u(c){a.add(c.name);var p=[].concat(c.requires||[],c.requiresIfExists||[]);p.forEach(function(d){if(!a.has(d)){var Q=n.get(d);Q&&u(Q)}}),l.push(c)}return t.forEach(function(c){a.has(c.name)||u(c)}),l}function orderModifiers(t){var n=order(t);return modifierPhases.reduce(function(a,l){return a.concat(n.filter(function(u){return u.phase===l}))},[])}function debounce$1(t){var n;return function(){return n||(n=new Promise(function(a){Promise.resolve().then(function(){n=void 0,a(t())})})),n}}function mergeByName(t){var n=t.reduce(function(a,l){var u=a[l.name];return a[l.name]=u?Object.assign({},u,l,{options:Object.assign({},u.options,l.options),data:Object.assign({},u.data,l.data)}):l,a},{});return Object.keys(n).map(function(a){return n[a]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return!n.some(function(l){return!(l&&typeof l.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var n=t,a=n.defaultModifiers,l=a===void 0?[]:a,u=n.defaultOptions,c=u===void 0?DEFAULT_OPTIONS:u;return function(d,Q,Ct){Ct===void 0&&(Ct=c);var ar={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,c),modifiersData:{},elements:{reference:d,popper:Q},attributes:{},styles:{}},en=[],tn=!1,on={state:ar,setOptions:function(ex){var ix=typeof ex=="function"?ex(ar.options):ex;gn(),ar.options=Object.assign({},c,ar.options,ix),ar.scrollParents={reference:isElement(d)?listScrollParents(d):d.contextElement?listScrollParents(d.contextElement):[],popper:listScrollParents(Q)};var ax=orderModifiers(mergeByName([].concat(l,ar.options.modifiers)));return ar.orderedModifiers=ax.filter(function(ox){return ox.enabled}),cn(),on.update()},forceUpdate:function(){if(!tn){var ex=ar.elements,ix=ex.reference,ax=ex.popper;if(areValidElements(ix,ax)){ar.rects={reference:getCompositeRect(ix,getOffsetParent(ax),ar.options.strategy==="fixed"),popper:getLayoutRect$1(ax)},ar.reset=!1,ar.placement=ar.options.placement,ar.orderedModifiers.forEach(function(ux){return ar.modifiersData[ux.name]=Object.assign({},ux.data)});for(var ox=0;ox<ar.orderedModifiers.length;ox++){if(ar.reset===!0){ar.reset=!1,ox=-1;continue}var lx=ar.orderedModifiers[ox],cx=lx.fn,dx=lx.options,hx=dx===void 0?{}:dx,fx=lx.name;typeof cx=="function"&&(ar=cx({state:ar,options:hx,name:fx,instance:on})||ar)}}}},update:debounce$1(function(){return new Promise(function(Cn){on.forceUpdate(),Cn(ar)})}),destroy:function(){gn(),tn=!0}};if(!areValidElements(d,Q))return on;on.setOptions(Ct).then(function(Cn){!tn&&Ct.onFirstUpdate&&Ct.onFirstUpdate(Cn)});function cn(){ar.orderedModifiers.forEach(function(Cn){var ex=Cn.name,ix=Cn.options,ax=ix===void 0?{}:ix,ox=Cn.effect;if(typeof ox=="function"){var lx=ox({state:ar,name:ex,instance:on,options:ax}),cx=function(){};en.push(lx||cx)}})}function gn(){en.forEach(function(Cn){return Cn()}),en=[]}return on}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function isHostComponent$1(t){return typeof t=="string"}function appendOwnerState(t,n,a){return t===void 0||isHostComponent$1(t)?n:{...n,ownerState:{...n.ownerState,...a}}}function extractEventHandlers(t,n=[]){if(t===void 0)return{};const a={};return Object.keys(t).filter(l=>l.match(/^on[A-Z]/)&&typeof t[l]=="function"&&!n.includes(l)).forEach(l=>{a[l]=t[l]}),a}function omitEventHandlers(t){if(t===void 0)return{};const n={};return Object.keys(t).filter(a=>!(a.match(/^on[A-Z]/)&&typeof t[a]=="function")).forEach(a=>{n[a]=t[a]}),n}function mergeSlotProps(t){const{getSlotProps:n,additionalProps:a,externalSlotProps:l,externalForwardedProps:u,className:c}=t;if(!n){const on=clsx(a==null?void 0:a.className,c,u==null?void 0:u.className,l==null?void 0:l.className),cn={...a==null?void 0:a.style,...u==null?void 0:u.style,...l==null?void 0:l.style},gn={...a,...u,...l};return on.length>0&&(gn.className=on),Object.keys(cn).length>0&&(gn.style=cn),{props:gn,internalRef:void 0}}const p=extractEventHandlers({...u,...l}),d=omitEventHandlers(l),Q=omitEventHandlers(u),Ct=n(p),ar=clsx(Ct==null?void 0:Ct.className,a==null?void 0:a.className,c,u==null?void 0:u.className,l==null?void 0:l.className),en={...Ct==null?void 0:Ct.style,...a==null?void 0:a.style,...u==null?void 0:u.style,...l==null?void 0:l.style},tn={...Ct,...a,...Q,...d};return ar.length>0&&(tn.className=ar),Object.keys(en).length>0&&(tn.style=en),{props:tn,internalRef:Ct.ref}}function resolveComponentProps(t,n,a){return typeof t=="function"?t(n,a):t}function useSlotProps(t){var en;const{elementType:n,externalSlotProps:a,ownerState:l,skipResolvingSlotProps:u=!1,...c}=t,p=u?{}:resolveComponentProps(a,l),{props:d,internalRef:Q}=mergeSlotProps({...c,externalSlotProps:p}),Ct=useForkRef(Q,p==null?void 0:p.ref,(en=t.additionalProps)==null?void 0:en.ref);return appendOwnerState(n,{...d,ref:Ct},l)}function getContainer$1(t){return typeof t=="function"?t():t}const Portal=reactExports.forwardRef(function(n,a){const{children:l,container:u,disablePortal:c=!1}=n,[p,d]=reactExports.useState(null),Q=useForkRef(reactExports.isValidElement(l)?getReactElementRef(l):null,a);if(useEnhancedEffect(()=>{c||d(getContainer$1(u)||document.body)},[u,c]),useEnhancedEffect(()=>{if(p&&!c)return setRef(a,p),()=>{setRef(a,null)}},[a,p,c]),c){if(reactExports.isValidElement(l)){const Ct={ref:Q};return reactExports.cloneElement(l,Ct)}return l}return p&&reactDomExports.createPortal(l,p)});function getPopperUtilityClass(t){return generateUtilityClass("MuiPopper",t)}generateUtilityClasses("MuiPopper",["root"]);function flipPlacement(t,n){if(n==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function resolveAnchorEl$1(t){return typeof t=="function"?t():t}function isHTMLElement(t){return t.nodeType!==void 0}const useUtilityClasses$C=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getPopperUtilityClass,n)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(n,a){const{anchorEl:l,children:u,direction:c,disablePortal:p,modifiers:d,open:Q,placement:Ct,popperOptions:ar,popperRef:en,slotProps:tn={},slots:on={},TransitionProps:cn,ownerState:gn,...Cn}=n,ex=reactExports.useRef(null),ix=useForkRef(ex,a),ax=reactExports.useRef(null),ox=useForkRef(ax,en),lx=reactExports.useRef(ox);useEnhancedEffect(()=>{lx.current=ox},[ox]),reactExports.useImperativeHandle(en,()=>ax.current,[]);const cx=flipPlacement(Ct,c),[dx,hx]=reactExports.useState(cx),[fx,ux]=reactExports.useState(resolveAnchorEl$1(l));reactExports.useEffect(()=>{ax.current&&ax.current.forceUpdate()}),reactExports.useEffect(()=>{l&&ux(resolveAnchorEl$1(l))},[l]),useEnhancedEffect(()=>{if(!fx||!Q)return;const bx=Ax=>{hx(Ax.placement)};let xx=[{name:"preventOverflow",options:{altBoundary:p}},{name:"flip",options:{altBoundary:p}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ax})=>{bx(Ax)}}];d!=null&&(xx=xx.concat(d)),ar&&ar.modifiers!=null&&(xx=xx.concat(ar.modifiers));const Sx=createPopper(fx,ex.current,{placement:cx,...ar,modifiers:xx});return lx.current(Sx),()=>{Sx.destroy(),lx.current(null)}},[fx,p,d,Q,ar,cx]);const gx={placement:dx};cn!==null&&(gx.TransitionProps=cn);const yx=useUtilityClasses$C(n),_x=on.root??"div",vx=useSlotProps({elementType:_x,externalSlotProps:tn.root,externalForwardedProps:Cn,additionalProps:{role:"tooltip",ref:ix},ownerState:n,className:yx.root});return jsxRuntimeExports.jsx(_x,{...vx,children:typeof u=="function"?u(gx):u})}),Popper$1=reactExports.forwardRef(function(n,a){const{anchorEl:l,children:u,container:c,direction:p="ltr",disablePortal:d=!1,keepMounted:Q=!1,modifiers:Ct,open:ar,placement:en="bottom",popperOptions:tn=defaultPopperOptions,popperRef:on,style:cn,transition:gn=!1,slotProps:Cn={},slots:ex={},...ix}=n,[ax,ox]=reactExports.useState(!0),lx=()=>{ox(!1)},cx=()=>{ox(!0)};if(!Q&&!ar&&(!gn||ax))return null;let dx;if(c)dx=c;else if(l){const ux=resolveAnchorEl$1(l);dx=ux&&isHTMLElement(ux)?ownerDocument(ux).body:ownerDocument(null).body}const hx=!ar&&Q&&(!gn||ax)?"none":void 0,fx=gn?{in:ar,onEnter:lx,onExited:cx}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:d,container:dx,children:jsxRuntimeExports.jsx(PopperTooltip,{anchorEl:l,direction:p,disablePortal:d,modifiers:Ct,ref:a,open:gn?!ax:ar,placement:en,popperOptions:tn,popperRef:on,slotProps:Cn,slots:ex,...ix,style:{position:"fixed",top:0,left:0,display:hx,...cn},TransitionProps:fx,children:u})})}),PopperRoot=styled(Popper$1,{name:"MuiPopper",slot:"Root"})({}),Popper=reactExports.forwardRef(function(n,a){const l=useRtl(),u=useDefaultProps({props:n,name:"MuiPopper"}),{anchorEl:c,component:p,components:d,componentsProps:Q,container:Ct,disablePortal:ar,keepMounted:en,modifiers:tn,open:on,placement:cn,popperOptions:gn,popperRef:Cn,transition:ex,slots:ix,slotProps:ax,...ox}=u,lx=(ix==null?void 0:ix.root)??(d==null?void 0:d.Root),cx={anchorEl:c,container:Ct,disablePortal:ar,keepMounted:en,modifiers:tn,open:on,placement:cn,popperOptions:gn,popperRef:Cn,transition:ex,...ox};return jsxRuntimeExports.jsx(PopperRoot,{as:p,direction:l?"rtl":"ltr",slots:{root:lx},slotProps:ax??Q,...cx,ref:a})});function useSlot(t,n){const{className:a,elementType:l,ownerState:u,externalForwardedProps:c,internalForwardedProps:p,shouldForwardComponentProp:d=!1,...Q}=n,{component:Ct,slots:ar={[t]:void 0},slotProps:en={[t]:void 0},...tn}=c,on=ar[t]||l,cn=resolveComponentProps(en[t],u),{props:{component:gn,...Cn},internalRef:ex}=mergeSlotProps({className:a,...Q,externalForwardedProps:t==="root"?tn:void 0,externalSlotProps:cn}),ix=useForkRef(ex,cn==null?void 0:cn.ref,n.ref),ax=t==="root"?gn||Ct:gn,ox=appendOwnerState(on,{...t==="root"&&!Ct&&!ar[t]&&p,...t!=="root"&&!ar[t]&&p,...Cn,...ax&&!d&&{as:ax},...ax&&d&&{component:ax},ref:ix},u);return[on,ox]}function getTooltipUtilityClass(t){return generateUtilityClass("MuiTooltip",t)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function round$4(t){return Math.round(t*1e5)/1e5}const useUtilityClasses$B=t=>{const{classes:n,disableInteractive:a,arrow:l,touch:u,placement:c}=t,p={popper:["popper",!a&&"popperInteractive",l&&"popperArrow"],tooltip:["tooltip",l&&"tooltipArrow",u&&"touch",`tooltipPlacement${capitalize(c.split("-")[0])}`],arrow:["arrow"]};return composeClasses(p,getTooltipUtilityClass,n)},TooltipPopper=styled(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.popper,!a.disableInteractive&&n.popperInteractive,a.arrow&&n.popperArrow,!a.open&&n.popperClose]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:n})=>!n.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:n})=>!n,style:{pointerEvents:"none"}},{props:({ownerState:n})=>n.arrow,style:{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.tooltip,a.touch&&n.touch,a.arrow&&n.tooltipArrow,n[`tooltipPlacement${capitalize(a.placement.split("-")[0])}`]]}})(memoTheme(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:alpha$1(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:n})=>n.arrow,style:{position:"relative",margin:0}},{props:({ownerState:n})=>n.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${round$4(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:n})=>!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:n})=>!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:n})=>!!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:n})=>!!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow"})(memoTheme(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:alpha$1(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(t,n){return(a,...l)=>{n&&n(a,...l),t(a,...l)}}const Tooltip=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiTooltip"}),{arrow:u=!1,children:c,classes:p,components:d={},componentsProps:Q={},describeChild:Ct=!1,disableFocusListener:ar=!1,disableHoverListener:en=!1,disableInteractive:tn=!1,disableTouchListener:on=!1,enterDelay:cn=100,enterNextDelay:gn=0,enterTouchDelay:Cn=700,followCursor:ex=!1,id:ix,leaveDelay:ax=0,leaveTouchDelay:ox=1500,onClose:lx,onOpen:cx,open:dx,placement:hx="bottom",PopperComponent:fx,PopperProps:ux={},slotProps:gx={},slots:yx={},title:_x,TransitionComponent:vx,TransitionProps:bx,...xx}=l,Sx=reactExports.isValidElement(c)?c:jsxRuntimeExports.jsx("span",{children:c}),Ax=useTheme(),Cx=useRtl(),[Tx,Px]=reactExports.useState(),[Fx,Mx]=reactExports.useState(null),Dx=reactExports.useRef(!1),Ox=tn||ex,Lx=useTimeout(),Nx=useTimeout(),Gx=useTimeout(),Ux=useTimeout(),[Hx,Vx]=useControlled({controlled:dx,default:!1,name:"Tooltip",state:"open"});let zx=Hx;const rE=useId(ix),Zx=reactExports.useRef(),eE=useEventCallback(()=>{Zx.current!==void 0&&(document.body.style.WebkitUserSelect=Zx.current,Zx.current=void 0),Ux.clear()});reactExports.useEffect(()=>eE,[eE]);const oE=Jx=>{hystersisTimer.clear(),hystersisOpen=!0,Vx(!0),cx&&!zx&&cx(Jx)},iE=useEventCallback(Jx=>{hystersisTimer.start(800+ax,()=>{hystersisOpen=!1}),Vx(!1),lx&&zx&&lx(Jx),Lx.start(Ax.transitions.duration.shortest,()=>{Dx.current=!1})}),Wx=Jx=>{Dx.current&&Jx.type!=="touchstart"||(Tx&&Tx.removeAttribute("title"),Nx.clear(),Gx.clear(),cn||hystersisOpen&&gn?Nx.start(hystersisOpen?gn:cn,()=>{oE(Jx)}):oE(Jx))},AE=Jx=>{Nx.clear(),Gx.start(ax,()=>{iE(Jx)})},[,ME]=reactExports.useState(!1),EE=Jx=>{isFocusVisible(Jx.target)||(ME(!1),AE(Jx))},bE=Jx=>{Tx||Px(Jx.currentTarget),isFocusVisible(Jx.target)&&(ME(!0),Wx(Jx))},kE=Jx=>{Dx.current=!0;const gE=Sx.props;gE.onTouchStart&&gE.onTouchStart(Jx)},TE=Jx=>{kE(Jx),Gx.clear(),Lx.clear(),eE(),Zx.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ux.start(Cn,()=>{document.body.style.WebkitUserSelect=Zx.current,Wx(Jx)})},jE=Jx=>{Sx.props.onTouchEnd&&Sx.props.onTouchEnd(Jx),eE(),Gx.start(ox,()=>{iE(Jx)})};reactExports.useEffect(()=>{if(!zx)return;function Jx(gE){gE.key==="Escape"&&iE(gE)}return document.addEventListener("keydown",Jx),()=>{document.removeEventListener("keydown",Jx)}},[iE,zx]);const Ix=useForkRef(getReactElementRef(Sx),Px,a);!_x&&_x!==0&&(zx=!1);const Bx=reactExports.useRef(),Yx=Jx=>{const gE=Sx.props;gE.onMouseMove&&gE.onMouseMove(Jx),cursorPosition={x:Jx.clientX,y:Jx.clientY},Bx.current&&Bx.current.update()},Qx={},nE=typeof _x=="string";Ct?(Qx.title=!zx&&nE&&!en?_x:null,Qx["aria-describedby"]=zx?rE:null):(Qx["aria-label"]=nE?_x:null,Qx["aria-labelledby"]=zx&&!nE?rE:null);const Kx={...Qx,...xx,...Sx.props,className:clsx(xx.className,Sx.props.className),onTouchStart:kE,ref:Ix,...ex?{onMouseMove:Yx}:{}},dE={};on||(Kx.onTouchStart=TE,Kx.onTouchEnd=jE),en||(Kx.onMouseOver=composeEventHandler(Wx,Kx.onMouseOver),Kx.onMouseLeave=composeEventHandler(AE,Kx.onMouseLeave),Ox||(dE.onMouseOver=Wx,dE.onMouseLeave=AE)),ar||(Kx.onFocus=composeEventHandler(bE,Kx.onFocus),Kx.onBlur=composeEventHandler(EE,Kx.onBlur),Ox||(dE.onFocus=bE,dE.onBlur=EE));const cE={...l,isRtl:Cx,arrow:u,disableInteractive:Ox,placement:hx,PopperComponentProp:fx,touch:Dx.current},mE=typeof gx.popper=="function"?gx.popper(cE):gx.popper,xE=reactExports.useMemo(()=>{var gE,DE;let Jx=[{name:"arrow",enabled:!!Fx,options:{element:Fx,padding:4}}];return(gE=ux.popperOptions)!=null&&gE.modifiers&&(Jx=Jx.concat(ux.popperOptions.modifiers)),(DE=mE==null?void 0:mE.popperOptions)!=null&&DE.modifiers&&(Jx=Jx.concat(mE.popperOptions.modifiers)),{...ux.popperOptions,...mE==null?void 0:mE.popperOptions,modifiers:Jx}},[Fx,ux.popperOptions,mE==null?void 0:mE.popperOptions]),OE=useUtilityClasses$B(cE),PE=typeof gx.transition=="function"?gx.transition(cE):gx.transition,sE={slots:{popper:d.Popper,transition:d.Transition??vx,tooltip:d.Tooltip,arrow:d.Arrow,...yx},slotProps:{arrow:gx.arrow??Q.arrow,popper:{...ux,...mE??Q.popper},tooltip:gx.tooltip??Q.tooltip,transition:{...bx,...PE??Q.transition}}},[hE,wE]=useSlot("popper",{elementType:TooltipPopper,externalForwardedProps:sE,ownerState:cE,className:clsx(OE.popper,ux==null?void 0:ux.className)}),[vE,RE]=useSlot("transition",{elementType:Grow,externalForwardedProps:sE,ownerState:cE}),[IE,$x]=useSlot("tooltip",{elementType:TooltipTooltip,className:OE.tooltip,externalForwardedProps:sE,ownerState:cE}),[kx,jx]=useSlot("arrow",{elementType:TooltipArrow,className:OE.arrow,externalForwardedProps:sE,ownerState:cE,ref:Mx});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Sx,Kx),jsxRuntimeExports.jsx(hE,{as:fx??Popper,placement:hx,anchorEl:ex?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:Tx,popperRef:Bx,open:Tx?zx:!1,id:rE,transition:!0,...dE,...wE,popperOptions:xE,children:({TransitionProps:Jx})=>jsxRuntimeExports.jsx(vE,{timeout:Ax.transitions.duration.shorter,...Jx,...RE,children:jsxRuntimeExports.jsxs(IE,{...$x,children:[_x,u?jsxRuntimeExports.jsx(kx,{...jx}):null]})})})]})}),Grid$1=createGrid({createStyledComponent:styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:t=>useDefaultProps({props:t,name:"MuiGrid"}),useTheme}),units={resistor:{m:.001,:1,K:1e3,M:1e6,G:1e9},capacitor:{fF:1e-15,pF:1e-12,nF:1e-9,uF:1e-6,mF:.001,F:1},inductor:{fH:1e-15,pH:1e-12,nH:1e-9,uH:1e-6,mH:.001,H:1},frequency:{Hz:1,kHz:1e3,MHz:1e6,GHz:1e9,THz:1e12}},addShapes={opamp:{image:"opamp.svg",connectors:[[0,-32],[0,32],[128,0]],x:0,y:0,offset:[0,-96],label:{text:"U1",class:"circuit_label",x:96,y:-32}},resistor:{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:0,y:0,label:{text:"R1",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},capacitor:{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:0,y:0,label:{text:"C1",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},inductor:{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:0,y:0,label:{text:"L1",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},vin:{image:"vin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},iin:{image:"iin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},gnd:{image:"gnd.svg",connectors:[[0,0]],x:0,y:0,offset:[-100,-180]},vprobe:{image:"vprobe.svg",label:{text:"X1",class:"circuit_label",x:0,y:-30},connectors:[[0,0]],x:0,y:0,offset:[-10,-90]},iprobe:{image:"iprobe.svg",label:{text:"Y1",class:"circuit_label",x:-64,y:-36},connectors:[[-64,0],[64,0]],x:0,y:0,offset:[-96,-64]}},theme$1=createTheme({palette:{bland:{main:"#fff",light:"#dedfe0",dark:"#dedfe0",contrastText:"#242105"}}}),emptyResults={text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:"",numericML:"",numericText:"",solver:null},shapesWithLabels={resistor:"R",capacitor:"C",inductor:"L",opamp:"U",vprobe:"X",iprobe:"Y"},componentDefaults={resistor:{value:1e3,unit:"K"},capacitor:{value:1,unit:"pF"},inductor:{value:1,unit:"nH"}},activeComponents=["opamp","resistor","capacitor","inductor"],probes=["vprobe","iprobe"],initialLabels={};Object.keys(shapesWithLabels).forEach(t=>{initialLabels[t]=`${shapesWithLabels[t]}0`});function calculateNextIndex(t,n,a){if(!t||Object.keys(t).length==0)return initialLabels[n];const l=Object.keys(t).filter(u=>t[u].type==n).map(u=>Number(u.slice(1)));return`${a}${l.length==0?0:Math.max(...l)+1}`}function VisioJSSchematic({setResults:t,setNodes:n,setComponentValues:a,setFullyConnectedComponents:l,history:u,setHistory:c}){const[p,d]=reactExports.useState(initialLabels),[Q,Ct]=reactExports.useState(null),[ar,en]=reactExports.useState({}),tn=15,on=reactExports.useCallback(ix=>{const{nodeMap:ax,components:ox,fullyConnectedComponents:lx}=createNodeMap(ix,addShapes);for(const[dx,hx]of Object.entries(ox))!(dx in ar)&&hx.type in componentDefaults&&(ox[dx]={...hx,...componentDefaults[hx.type]});a(dx=>{const hx={...dx};for(const[fx,ux]of Object.entries(ox))!(fx in hx)&&ux.type in componentDefaults&&(hx[fx]={type:ux.type,...componentDefaults[ux.type]});for(const fx in hx)fx in ox||delete hx[fx];return JSON.stringify(dx)==JSON.stringify(hx)?dx:hx}),l(dx=>JSON.stringify(dx)==JSON.stringify(lx)?dx:lx),n(dx=>JSON.stringify(dx)==JSON.stringify(ax)?dx:(t({...emptyResults}),ax)),en(ox);const cx={};for(const dx in shapesWithLabels)cx[dx]=calculateNextIndex(ox,dx,shapesWithLabels[dx]);d(cx)},[ar,a,l,n,t]),cn=reactExports.useCallback(ix=>{c(ax=>{const ox=JSON.parse(JSON.stringify(ix)),lx={...ax};return lx.pointer<lx.state.length-1&&(lx.state=lx.state.slice(0,lx.pointer+1)),lx.state.length==tn?lx.state=[...lx.state.slice(1),ox]:lx.state=[...lx.state,ox],lx.pointer=lx.state.length-1,lx}),on(ix)},[on,c]),gn=reactExports.useCallback(()=>{c(ix=>{if(ix.pointer==0)return ix;Q.redraw(ix.state[ix.pointer-1]);const ax={...ix};return ax.pointer=ax.pointer-1,ax}),on(u.state[u.pointer-1])},[on,c,u,Q]),Cn=reactExports.useCallback(()=>{c(ix=>{if(ix.pointer>=ix.state.length-1)return ix;Q.redraw(ix.state[ix.pointer+1]);const ax={...ix};return ax.pointer=ax.pointer+1,ax}),on(u.state[u.pointer+1])},[on,c,u,Q]);reactExports.useEffect(()=>{if(!Q){var ix=rx({initialState:u.state[0],stateChanged:cn});Ct(ix)}},[cn,u,Q]),reactExports.useEffect(()=>{Q&&Q.init()},[Q]),reactExports.useEffect(()=>{const ix=ax=>{const ox=(ax.ctrlKey||ax.metaKey)&&ax.key.toLowerCase()==="z"&&!ax.shiftKey,lx=(ax.ctrlKey||ax.metaKey)&&ax.key.toLowerCase()==="z"&&ax.shiftKey;ox?(console.log("undo"),ax.preventDefault(),gn()):lx&&(ax.preventDefault(),Cn())};return window.addEventListener("keydown",ix),()=>window.removeEventListener("keydown",ix)},[gn,Cn]);const ex={};return ex.vin=!("iin"in ar||"vin"in ar),ex.vprobe=Object.keys(ar).filter(ix=>ar[ix].type=="vprobe").length<2,jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid$1,{container:!0,size:{xs:12,sm:10},columns:{xs:3,md:9},children:Object.keys(addShapes).map(ix=>{const ax=addShapes[ix];return"label"in ax&&(ax.label.text=p[ix]),jsxRuntimeExports.jsx(Grid$1,{size:1,children:jsxRuntimeExports.jsx(Tooltip,{title:ix=="vin"&&!ex.vin||ix=="iin"&&!ex.vin?"max 1 vin or iin ":ix=="vprobe"&&!ex.vprobe?"max 2 vprobes":"",children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,color:probes.includes(ix)?"secondary":activeComponents.includes(ix)?"info":"success",style:{cursor:"grab",marginRight:"10px",height:"100%"},size:"small",disabled:ix=="vin"||ix=="iin"?!ex.vin:ix=="vprobe"?!ex.vprobe:!1,draggable:"true",onDragStart:ox=>{window.dragData=ax,ox.dataTransfer.setData("application/json",JSON.stringify(ax))},onClick:()=>Q.addShape(ax),children:ix},ix)})},ix)},ix)})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,size:{xs:12,sm:2},spacing:0,justifyContent:"flex-end",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Q.deleteSelected(),sx:{p:.5},children:jsxRuntimeExports.jsx(DeleteIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>gn(),disabled:u.pointer==0,sx:{p:.5},children:jsxRuntimeExports.jsx(UndoIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Cn(),disabled:u.pointer==u.state.length-1,sx:{p:.5},children:jsxRuntimeExports.jsx(RedoIcon,{})})]}),jsxRuntimeExports.jsx(Grid$1,{container:!0,size:12,children:jsxRuntimeExports.jsx(Grid$1,{size:12,children:jsxRuntimeExports.jsx("div",{style:{border:"1px solid rgb(222, 226, 230)",display:"inline-block",width:"100%"},children:jsxRuntimeExports.jsx("svg",{id:"visiojs_top",className:"visiojs_svg"})})})})]})}function getStyleValue(t){return parseInt(t,10)||0}const styles$1={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(t){for(const n in t)return!1;return!0}function isEmpty$1(t){return isObjectEmpty(t)||t.outerHeightStyle===0&&!t.overflowing}const TextareaAutosize=reactExports.forwardRef(function(n,a){const{onChange:l,maxRows:u,minRows:c=1,style:p,value:d,...Q}=n,{current:Ct}=reactExports.useRef(d!=null),ar=reactExports.useRef(null),en=useForkRef(a,ar),tn=reactExports.useRef(null),on=reactExports.useRef(null),cn=reactExports.useCallback(()=>{const ax=ar.current,ox=on.current;if(!ax||!ox)return;const cx=ownerWindow(ax).getComputedStyle(ax);if(cx.width==="0px")return{outerHeightStyle:0,overflowing:!1};ox.style.width=cx.width,ox.value=ax.value||n.placeholder||"x",ox.value.slice(-1)===`
`&&(ox.value+=" ");const dx=cx.boxSizing,hx=getStyleValue(cx.paddingBottom)+getStyleValue(cx.paddingTop),fx=getStyleValue(cx.borderBottomWidth)+getStyleValue(cx.borderTopWidth),ux=ox.scrollHeight;ox.value="x";const gx=ox.scrollHeight;let yx=ux;c&&(yx=Math.max(Number(c)*gx,yx)),u&&(yx=Math.min(Number(u)*gx,yx)),yx=Math.max(yx,gx);const _x=yx+(dx==="border-box"?hx+fx:0),vx=Math.abs(yx-ux)<=1;return{outerHeightStyle:_x,overflowing:vx}},[u,c,n.placeholder]),gn=useEventCallback(()=>{const ax=ar.current,ox=cn();if(!ax||!ox||isEmpty$1(ox))return!1;const lx=ox.outerHeightStyle;return tn.current!=null&&tn.current!==lx}),Cn=reactExports.useCallback(()=>{const ax=ar.current,ox=cn();if(!ax||!ox||isEmpty$1(ox))return;const lx=ox.outerHeightStyle;tn.current!==lx&&(tn.current=lx,ax.style.height=`${lx}px`),ax.style.overflow=ox.overflowing?"hidden":""},[cn]),ex=reactExports.useRef(-1);useEnhancedEffect(()=>{const ax=debounce$2(Cn),ox=ar==null?void 0:ar.current;if(!ox)return;const lx=ownerWindow(ox);lx.addEventListener("resize",ax);let cx;return typeof ResizeObserver<"u"&&(cx=new ResizeObserver(()=>{gn()&&(cx.unobserve(ox),cancelAnimationFrame(ex.current),Cn(),ex.current=requestAnimationFrame(()=>{cx.observe(ox)}))}),cx.observe(ox)),()=>{ax.clear(),cancelAnimationFrame(ex.current),lx.removeEventListener("resize",ax),cx&&cx.disconnect()}},[cn,Cn,gn]),useEnhancedEffect(()=>{Cn()});const ix=ax=>{Ct||Cn();const ox=ax.target,lx=ox.value.length,cx=ox.value.endsWith(`
`),dx=ox.selectionStart===lx;cx&&dx&&ox.setSelectionRange(lx,lx),l&&l(ax)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:d,onChange:ix,ref:en,rows:c,style:p,...Q}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:n.className,readOnly:!0,ref:on,tabIndex:-1,style:{...styles$1.shadow,...p,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(t){return typeof t=="string"}function formControlState({props:t,states:n,muiFormControl:a}){return n.reduce((l,u)=>(l[u]=t[u],a&&typeof t[u]>"u"&&(l[u]=a[u]),l),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function isFilled(t,n=!1){return t&&(hasValue(t.value)&&t.value!==""||n&&hasValue(t.defaultValue)&&t.defaultValue!=="")}function isAdornedStart(t){return t.startAdornment}function getInputBaseUtilityClass(t){return generateUtilityClass("MuiInputBase",t)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.formControl&&n.formControl,a.startAdornment&&n.adornedStart,a.endAdornment&&n.adornedEnd,a.error&&n.error,a.size==="small"&&n.sizeSmall,a.multiline&&n.multiline,a.color&&n[`color${capitalize(a.color)}`],a.fullWidth&&n.fullWidth,a.hiddenLabel&&n.hiddenLabel]},inputOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.input,a.size==="small"&&n.inputSizeSmall,a.multiline&&n.inputMultiline,a.type==="search"&&n.inputTypeSearch,a.startAdornment&&n.inputAdornedStart,a.endAdornment&&n.inputAdornedEnd,a.hiddenLabel&&n.inputHiddenLabel]},useUtilityClasses$A=t=>{const{classes:n,color:a,disabled:l,error:u,endAdornment:c,focused:p,formControl:d,fullWidth:Q,hiddenLabel:Ct,multiline:ar,readOnly:en,size:tn,startAdornment:on,type:cn}=t,gn={root:["root",`color${capitalize(a)}`,l&&"disabled",u&&"error",Q&&"fullWidth",p&&"focused",d&&"formControl",tn&&tn!=="medium"&&`size${capitalize(tn)}`,ar&&"multiline",on&&"adornedStart",c&&"adornedEnd",Ct&&"hiddenLabel",en&&"readOnly"],input:["input",l&&"disabled",cn==="search"&&"inputTypeSearch",ar&&"inputMultiline",tn==="small"&&"inputSizeSmall",Ct&&"inputHiddenLabel",on&&"inputAdornedStart",c&&"inputAdornedEnd",en&&"readOnly"]};return composeClasses(gn,getInputBaseUtilityClass,n)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:n})=>n.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:n,size:a})=>n.multiline&&a==="small",style:{paddingTop:1}},{props:({ownerState:n})=>n.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},l={opacity:"0 !important"},u=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus::-ms-input-placeholder":u},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:c})=>!c.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:c})=>c.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiInputBase"}),{"aria-describedby":u,autoComplete:c,autoFocus:p,className:d,color:Q,components:Ct={},componentsProps:ar={},defaultValue:en,disabled:tn,disableInjectingGlobalStyles:on,endAdornment:cn,error:gn,fullWidth:Cn=!1,id:ex,inputComponent:ix="input",inputProps:ax={},inputRef:ox,margin:lx,maxRows:cx,minRows:dx,multiline:hx=!1,name:fx,onBlur:ux,onChange:gx,onClick:yx,onFocus:_x,onKeyDown:vx,onKeyUp:bx,placeholder:xx,readOnly:Sx,renderSuffix:Ax,rows:Cx,size:Tx,slotProps:Px={},slots:Fx={},startAdornment:Mx,type:Dx="text",value:Ox,...Lx}=l,Nx=ax.value!=null?ax.value:Ox,{current:Gx}=reactExports.useRef(Nx!=null),Ux=reactExports.useRef(),Hx=reactExports.useCallback(Kx=>{},[]),Vx=useForkRef(Ux,ox,ax.ref,Hx),[zx,rE]=reactExports.useState(!1),Zx=useFormControl(),eE=formControlState({props:l,muiFormControl:Zx,states:["color","disabled","error","hiddenLabel","size","required","filled"]});eE.focused=Zx?Zx.focused:zx,reactExports.useEffect(()=>{!Zx&&tn&&zx&&(rE(!1),ux&&ux())},[Zx,tn,zx,ux]);const oE=Zx&&Zx.onFilled,iE=Zx&&Zx.onEmpty,Wx=reactExports.useCallback(Kx=>{isFilled(Kx)?oE&&oE():iE&&iE()},[oE,iE]);useEnhancedEffect(()=>{Gx&&Wx({value:Nx})},[Nx,Wx,Gx]);const AE=Kx=>{_x&&_x(Kx),ax.onFocus&&ax.onFocus(Kx),Zx&&Zx.onFocus?Zx.onFocus(Kx):rE(!0)},ME=Kx=>{ux&&ux(Kx),ax.onBlur&&ax.onBlur(Kx),Zx&&Zx.onBlur?Zx.onBlur(Kx):rE(!1)},EE=(Kx,...dE)=>{if(!Gx){const cE=Kx.target||Ux.current;if(cE==null)throw new Error(formatMuiErrorMessage(1));Wx({value:cE.value})}ax.onChange&&ax.onChange(Kx,...dE),gx&&gx(Kx,...dE)};reactExports.useEffect(()=>{Wx(Ux.current)},[]);const bE=Kx=>{Ux.current&&Kx.currentTarget===Kx.target&&Ux.current.focus(),yx&&yx(Kx)};let kE=ix,TE=ax;hx&&kE==="input"&&(Cx?TE={type:void 0,minRows:Cx,maxRows:Cx,...TE}:TE={type:void 0,maxRows:cx,minRows:dx,...TE},kE=TextareaAutosize);const jE=Kx=>{Wx(Kx.animationName==="mui-auto-fill-cancel"?Ux.current:{value:"x"})};reactExports.useEffect(()=>{Zx&&Zx.setAdornedStart(!!Mx)},[Zx,Mx]);const Ix={...l,color:eE.color||"primary",disabled:eE.disabled,endAdornment:cn,error:eE.error,focused:eE.focused,formControl:Zx,fullWidth:Cn,hiddenLabel:eE.hiddenLabel,multiline:hx,size:eE.size,startAdornment:Mx,type:Dx},Bx=useUtilityClasses$A(Ix),Yx=Fx.root||Ct.Root||InputBaseRoot,Qx=Px.root||ar.root||{},nE=Fx.input||Ct.Input||InputBaseInput;return TE={...TE,...Px.input??ar.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!on&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(Yx,{...Qx,ref:a,onClick:bE,...Lx,...!isHostComponent(Yx)&&{ownerState:{...Ix,...Qx.ownerState}},className:clsx(Bx.root,Qx.className,d,Sx&&"MuiInputBase-readOnly"),children:[Mx,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(nE,{"aria-invalid":eE.error,"aria-describedby":u,autoComplete:c,autoFocus:p,defaultValue:en,disabled:eE.disabled,id:ex,onAnimationStart:jE,name:fx,placeholder:xx,readOnly:Sx,required:eE.required,rows:Cx,value:Nx,onKeyDown:vx,onKeyUp:bx,type:Dx,...TE,...!isHostComponent(nE)&&{as:kE,ownerState:{...Ix,...TE.ownerState}},ref:Vx,className:clsx(Bx.input,TE.className,Sx&&"MuiInputBase-readOnly"),onBlur:ME,onChange:EE,onFocus:AE})}),cn,Ax?Ax({...eE,startAdornment:Mx}):null]})]})});function getInputUtilityClass(t){return generateUtilityClass("MuiInput",t)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])},useUtilityClasses$z=t=>{const{classes:n,disableUnderline:a}=t,u=composeClasses({root:["root",!a&&"underline"],input:["input"]},getInputUtilityClass,n);return{...n,...u}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{let a=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(a=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:l})=>l.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([l])=>({props:{color:l,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[l].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiInput"}),{disableUnderline:u=!1,components:c={},componentsProps:p,fullWidth:d=!1,inputComponent:Q="input",multiline:Ct=!1,slotProps:ar,slots:en={},type:tn="text",...on}=l,cn=useUtilityClasses$z(l),Cn={root:{ownerState:{disableUnderline:u}}},ex=ar??p?deepmerge(ar??p,Cn):Cn,ix=en.root??c.Root??InputRoot,ax=en.input??c.Input??InputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:ix,input:ax},slotProps:ex,fullWidth:d,inputComponent:Q,multiline:Ct,ref:a,type:tn,...on,classes:cn})});Input.muiName="Input";function getFilledInputUtilityClass(t){return generateUtilityClass("MuiFilledInput",t)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},useUtilityClasses$y=t=>{const{classes:n,disableUnderline:a,startAdornment:l,endAdornment:u,size:c,hiddenLabel:p,multiline:d}=t,Q={root:["root",!a&&"underline",l&&"adornedStart",u&&"adornedEnd",c==="small"&&`size${capitalize(c)}`,p&&"hiddenLabel",d&&"multiline"],input:["input"]},Ct=composeClasses(Q,getFilledInputUtilityClass,n);return{...n,...Ct}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",l=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",u=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:l,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:u,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:l}},[`&.${filledInputClasses.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:l},[`&.${filledInputClasses.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:c},variants:[{props:({ownerState:p})=>!p.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([p])=>{var d;return{props:{disableUnderline:!1,color:p},style:{"&::after":{borderBottom:`2px solid ${(d=(t.vars||t).palette[p])==null?void 0:d.main}`}}}}),{props:({ownerState:p})=>p.startAdornment,style:{paddingLeft:12}},{props:({ownerState:p})=>p.endAdornment,style:{paddingRight:12}},{props:({ownerState:p})=>p.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:p,size:d})=>p.multiline&&d==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:p})=>p.multiline&&p.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:p})=>p.multiline&&p.hiddenLabel&&p.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:n})=>n.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}},{props:({ownerState:n})=>n.hiddenLabel&&n.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:n})=>n.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiFilledInput"}),{disableUnderline:u=!1,components:c={},componentsProps:p,fullWidth:d=!1,hiddenLabel:Q,inputComponent:Ct="input",multiline:ar=!1,slotProps:en,slots:tn={},type:on="text",...cn}=l,gn={...l,disableUnderline:u,fullWidth:d,inputComponent:Ct,multiline:ar,type:on},Cn=useUtilityClasses$y(l),ex={root:{ownerState:gn},input:{ownerState:gn}},ix=en??p?deepmerge(ex,en??p):ex,ax=tn.root??c.Root??FilledInputRoot,ox=tn.input??c.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:ax,input:ox},slotProps:ix,fullWidth:d,inputComponent:Ct,multiline:ar,ref:a,type:on,...cn,classes:Cn})});FilledInput.muiName="Input";var _span$2;const NotchedOutlineRoot$1=styled("fieldset",{shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:n})=>!n.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:n})=>n.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:n})=>n.withLabel&&n.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(t){const{children:n,classes:a,className:l,label:u,notched:c,...p}=t,d=u!=null&&u!=="",Q={...t,notched:c,withLabel:d};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:l,ownerState:Q,...p,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:Q,children:d?jsxRuntimeExports.jsx("span",{children:u}):_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function getOutlinedInputUtilityClass(t){return generateUtilityClass("MuiOutlinedInput",t)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])},useUtilityClasses$x=t=>{const{classes:n}=t,l=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,n);return{...n,...l}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette[a].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:14}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:14}},{props:({ownerState:a})=>a.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:a,size:l})=>a.multiline&&l==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:n})=>n.multiline,style:{padding:0}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiOutlinedInput"}),{components:u={},fullWidth:c=!1,inputComponent:p="input",label:d,multiline:Q=!1,notched:Ct,slots:ar={},slotProps:en={},type:tn="text",...on}=l,cn=useUtilityClasses$x(l),gn=useFormControl(),Cn=formControlState({props:l,muiFormControl:gn,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),ex={...l,color:Cn.color||"primary",disabled:Cn.disabled,error:Cn.error,focused:Cn.focused,formControl:gn,fullWidth:c,hiddenLabel:Cn.hiddenLabel,multiline:Q,size:Cn.size,type:tn},ix=ar.root??u.Root??OutlinedInputRoot,ax=ar.input??u.Input??OutlinedInputInput,[ox,lx]=useSlot("notchedOutline",{elementType:NotchedOutlineRoot,className:cn.notchedOutline,shouldForwardComponentProp:!0,ownerState:ex,externalForwardedProps:{slots:ar,slotProps:en},additionalProps:{label:d!=null&&d!==""&&Cn.required?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[d,"","*"]}):d}});return jsxRuntimeExports.jsx(InputBase,{slots:{root:ix,input:ax},slotProps:en,renderSuffix:cx=>jsxRuntimeExports.jsx(ox,{...lx,notched:typeof Ct<"u"?Ct:!!(cx.startAdornment||cx.filled||cx.focused)}),fullWidth:c,inputComponent:p,multiline:Q,ref:a,type:tn,...on,classes:{...cn,notchedOutline:null}})});OutlinedInput.muiName="Input";function getFormLabelUtilityClasses(t){return generateUtilityClass("MuiFormLabel",t)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),useUtilityClasses$w=t=>{const{classes:n,color:a,focused:l,disabled:u,error:c,filled:p,required:d}=t,Q={root:["root",`color${capitalize(a)}`,u&&"disabled",c&&"error",p&&"filled",l&&"focused",d&&"required"],asterisk:["asterisk",c&&"error"]};return composeClasses(Q,getFormLabelUtilityClasses,n)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color==="secondary"&&n.colorSecondary,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${formLabelClasses.focused}`]:{color:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${formLabelClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk"})(memoTheme(({theme:t})=>({[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}))),FormLabel=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiFormLabel"}),{children:u,className:c,color:p,component:d="label",disabled:Q,error:Ct,filled:ar,focused:en,required:tn,...on}=l,cn=useFormControl(),gn=formControlState({props:l,muiFormControl:cn,states:["color","required","focused","disabled","error","filled"]}),Cn={...l,color:gn.color||"primary",component:d,disabled:gn.disabled,error:gn.error,filled:gn.filled,focused:gn.focused,required:gn.required},ex=useUtilityClasses$w(Cn);return jsxRuntimeExports.jsxs(FormLabelRoot,{as:d,ownerState:Cn,className:clsx(ex.root,c),ref:a,...on,children:[u,gn.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:Cn,"aria-hidden":!0,className:ex.asterisk,children:["","*"]})]})});function getInputLabelUtilityClasses(t){return generateUtilityClass("MuiInputLabel",t)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const useUtilityClasses$v=t=>{const{classes:n,formControl:a,size:l,shrink:u,disableAnimation:c,variant:p,required:d}=t,Q={root:["root",a&&"formControl",!c&&"animated",u&&"shrink",l&&l!=="medium"&&`size${capitalize(l)}`,p],asterisk:[d&&"asterisk"]},Ct=composeClasses(Q,getInputLabelUtilityClasses,n);return{...n,...Ct}},InputLabelRoot=styled(FormLabel,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${formLabelClasses.asterisk}`]:n.asterisk},n.root,a.formControl&&n.formControl,a.size==="small"&&n.sizeSmall,a.shrink&&n.shrink,!a.disableAnimation&&n.animated,a.focused&&n.focused,n[a.variant]]}})(memoTheme(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:n})=>n.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:n})=>n.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:n})=>!n.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="filled"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:n,ownerState:a,size:l})=>n==="filled"&&a.shrink&&l==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="outlined"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),InputLabel=reactExports.forwardRef(function(n,a){const l=useDefaultProps({name:"MuiInputLabel",props:n}),{disableAnimation:u=!1,margin:c,shrink:p,variant:d,className:Q,...Ct}=l,ar=useFormControl();let en=p;typeof en>"u"&&ar&&(en=ar.filled||ar.focused||ar.adornedStart);const tn=formControlState({props:l,muiFormControl:ar,states:["size","variant","required","focused"]}),on={...l,disableAnimation:u,formControl:ar,shrink:en,size:tn.size,variant:tn.variant,required:tn.required,focused:tn.focused},cn=useUtilityClasses$v(on);return jsxRuntimeExports.jsx(InputLabelRoot,{"data-shrink":en,ref:a,className:clsx(cn.root,Q),...Ct,ownerState:on,classes:cn})});function getFormControlUtilityClasses(t){return generateUtilityClass("MuiFormControl",t)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$u=t=>{const{classes:n,margin:a,fullWidth:l}=t,u={root:["root",a!=="none"&&`margin${capitalize(a)}`,l&&"fullWidth"]};return composeClasses(u,getFormControlUtilityClasses,n)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`margin${capitalize(a.margin)}`],a.fullWidth&&n.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiFormControl"}),{children:u,className:c,color:p="primary",component:d="div",disabled:Q=!1,error:Ct=!1,focused:ar,fullWidth:en=!1,hiddenLabel:tn=!1,margin:on="none",required:cn=!1,size:gn="medium",variant:Cn="outlined",...ex}=l,ix={...l,color:p,component:d,disabled:Q,error:Ct,fullWidth:en,hiddenLabel:tn,margin:on,required:cn,size:gn,variant:Cn},ax=useUtilityClasses$u(ix),[ox,lx]=reactExports.useState(()=>{let bx=!1;return u&&reactExports.Children.forEach(u,xx=>{if(!isMuiElement(xx,["Input","Select"]))return;const Sx=isMuiElement(xx,["Select"])?xx.props.input:xx;Sx&&isAdornedStart(Sx.props)&&(bx=!0)}),bx}),[cx,dx]=reactExports.useState(()=>{let bx=!1;return u&&reactExports.Children.forEach(u,xx=>{isMuiElement(xx,["Input","Select"])&&(isFilled(xx.props,!0)||isFilled(xx.props.inputProps,!0))&&(bx=!0)}),bx}),[hx,fx]=reactExports.useState(!1);Q&&hx&&fx(!1);const ux=ar!==void 0&&!Q?ar:hx;let gx;reactExports.useRef(!1);const yx=reactExports.useCallback(()=>{dx(!0)},[]),_x=reactExports.useCallback(()=>{dx(!1)},[]),vx=reactExports.useMemo(()=>({adornedStart:ox,setAdornedStart:lx,color:p,disabled:Q,error:Ct,filled:cx,focused:ux,fullWidth:en,hiddenLabel:tn,size:gn,onBlur:()=>{fx(!1)},onFocus:()=>{fx(!0)},onEmpty:_x,onFilled:yx,registerEffect:gx,required:cn,variant:Cn}),[ox,p,Q,Ct,cx,ux,en,tn,gx,_x,yx,cn,gn,Cn]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:vx,children:jsxRuntimeExports.jsx(FormControlRoot,{as:d,ownerState:ix,className:clsx(ax.root,c),ref:a,...ex,children:u})})});function getFormHelperTextUtilityClasses(t){return generateUtilityClass("MuiFormHelperText",t)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _span$1;const useUtilityClasses$t=t=>{const{classes:n,contained:a,size:l,disabled:u,error:c,filled:p,focused:d,required:Q}=t,Ct={root:["root",u&&"disabled",c&&"error",l&&`size${capitalize(l)}`,a&&"contained",d&&"focused",p&&"filled",Q&&"required"]};return composeClasses(Ct,getFormHelperTextUtilityClasses,n)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.size&&n[`size${capitalize(a.size)}`],a.contained&&n.contained,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formHelperTextClasses.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:n})=>n.contained,style:{marginLeft:14,marginRight:14}}]}))),FormHelperText=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiFormHelperText"}),{children:u,className:c,component:p="p",disabled:d,error:Q,filled:Ct,focused:ar,margin:en,required:tn,variant:on,...cn}=l,gn=useFormControl(),Cn=formControlState({props:l,muiFormControl:gn,states:["variant","size","disabled","error","filled","focused","required"]}),ex={...l,component:p,contained:Cn.variant==="filled"||Cn.variant==="outlined",variant:Cn.variant,size:Cn.size,disabled:Cn.disabled,error:Cn.error,filled:Cn.filled,focused:Cn.focused,required:Cn.required};delete ex.ownerState;const ix=useUtilityClasses$t(ex);return jsxRuntimeExports.jsx(FormHelperTextRoot,{as:p,className:clsx(ix.root,c),ref:a,...cn,ownerState:ex,children:u===" "?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):u})}),ListContext=reactExports.createContext({});function getListUtilityClass(t){return generateUtilityClass("MuiList",t)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$s=t=>{const{classes:n,disablePadding:a,dense:l,subheader:u}=t;return composeClasses({root:["root",!a&&"padding",l&&"dense",u&&"subheader"]},getListUtilityClass,n)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disablePadding&&n.padding,a.dense&&n.dense,a.subheader&&n.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),List=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiList"}),{children:u,className:c,component:p="ul",dense:d=!1,disablePadding:Q=!1,subheader:Ct,...ar}=l,en=reactExports.useMemo(()=>({dense:d}),[d]),tn={...l,component:p,dense:d,disablePadding:Q},on=useUtilityClasses$s(tn);return jsxRuntimeExports.jsx(ListContext.Provider,{value:en,children:jsxRuntimeExports.jsxs(ListRoot,{as:p,className:clsx(on.root,c),ref:a,ownerState:tn,...ar,children:[Ct,u]})})});function getScrollbarSize(t=window){const n=t.document.documentElement.clientWidth;return t.innerWidth-n}function nextItem(t,n,a){return t===n?t.firstChild:n&&n.nextElementSibling?n.nextElementSibling:a?null:t.firstChild}function previousItem(t,n,a){return t===n?a?t.firstChild:t.lastChild:n&&n.previousElementSibling?n.previousElementSibling:a?null:t.lastChild}function textCriteriaMatches(t,n){if(n===void 0)return!0;let a=t.innerText;return a===void 0&&(a=t.textContent),a=a.trim().toLowerCase(),a.length===0?!1:n.repeating?a[0]===n.keys[0]:a.startsWith(n.keys.join(""))}function moveFocus(t,n,a,l,u,c){let p=!1,d=u(t,n,n?a:!1);for(;d;){if(d===t.firstChild){if(p)return!1;p=!0}const Q=l?!1:d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||!textCriteriaMatches(d,c)||Q)d=u(t,d,a);else return d.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(n,a){const{actions:l,autoFocus:u=!1,autoFocusItem:c=!1,children:p,className:d,disabledItemsFocusable:Q=!1,disableListWrap:Ct=!1,onKeyDown:ar,variant:en="selectedMenu",...tn}=n,on=reactExports.useRef(null),cn=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{u&&on.current.focus()},[u]),reactExports.useImperativeHandle(l,()=>({adjustStyleForScrollbar:(ax,{direction:ox})=>{const lx=!on.current.style.width;if(ax.clientHeight<on.current.clientHeight&&lx){const cx=`${getScrollbarSize(ownerWindow(ax))}px`;on.current.style[ox==="rtl"?"paddingLeft":"paddingRight"]=cx,on.current.style.width=`calc(100% + ${cx})`}return on.current}}),[]);const gn=ax=>{const ox=on.current,lx=ax.key;if(ax.ctrlKey||ax.metaKey||ax.altKey){ar&&ar(ax);return}const dx=ownerDocument(ox).activeElement;if(lx==="ArrowDown")ax.preventDefault(),moveFocus(ox,dx,Ct,Q,nextItem);else if(lx==="ArrowUp")ax.preventDefault(),moveFocus(ox,dx,Ct,Q,previousItem);else if(lx==="Home")ax.preventDefault(),moveFocus(ox,null,Ct,Q,nextItem);else if(lx==="End")ax.preventDefault(),moveFocus(ox,null,Ct,Q,previousItem);else if(lx.length===1){const hx=cn.current,fx=lx.toLowerCase(),ux=performance.now();hx.keys.length>0&&(ux-hx.lastTime>500?(hx.keys=[],hx.repeating=!0,hx.previousKeyMatched=!0):hx.repeating&&fx!==hx.keys[0]&&(hx.repeating=!1)),hx.lastTime=ux,hx.keys.push(fx);const gx=dx&&!hx.repeating&&textCriteriaMatches(dx,hx);hx.previousKeyMatched&&(gx||moveFocus(ox,dx,!1,Q,nextItem,hx))?ax.preventDefault():hx.previousKeyMatched=!1}ar&&ar(ax)},Cn=useForkRef(on,a);let ex=-1;reactExports.Children.forEach(p,(ax,ox)=>{if(!reactExports.isValidElement(ax)){ex===ox&&(ex+=1,ex>=p.length&&(ex=-1));return}ax.props.disabled||(en==="selectedMenu"&&ax.props.selected||ex===-1)&&(ex=ox),ex===ox&&(ax.props.disabled||ax.props.muiSkipListHighlight||ax.type.muiSkipListHighlight)&&(ex+=1,ex>=p.length&&(ex=-1))});const ix=reactExports.Children.map(p,(ax,ox)=>{if(ox===ex){const lx={};return c&&(lx.autoFocus=!0),ax.props.tabIndex===void 0&&en==="selectedMenu"&&(lx.tabIndex=0),reactExports.cloneElement(ax,lx)}return ax});return jsxRuntimeExports.jsx(List,{role:"menu",ref:Cn,className:d,onKeyDown:gn,tabIndex:u?0:-1,...tn,children:ix})});function isOverflowing(t){const n=ownerDocument(t);return n.body===t?ownerWindow(t).innerWidth>n.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function ariaHidden(t,n){n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function getPaddingRight(t){return parseInt(ownerWindow(t).getComputedStyle(t).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(t){const a=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),l=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return a||l}function ariaHiddenSiblings(t,n,a,l,u){const c=[n,a,...l];[].forEach.call(t.children,p=>{const d=!c.includes(p),Q=!isAriaHiddenForbiddenOnElement(p);d&&Q&&ariaHidden(p,u)})}function findIndexOf(t,n){let a=-1;return t.some((l,u)=>n(l)?(a=u,!0):!1),a}function handleContainer(t,n){const a=[],l=t.container;if(!n.disableScrollLock){if(isOverflowing(l)){const p=getScrollbarSize(ownerWindow(l));a.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${getPaddingRight(l)+p}px`;const d=ownerDocument(l).querySelectorAll(".mui-fixed");[].forEach.call(d,Q=>{a.push({value:Q.style.paddingRight,property:"padding-right",el:Q}),Q.style.paddingRight=`${getPaddingRight(Q)+p}px`})}let c;if(l.parentNode instanceof DocumentFragment)c=ownerDocument(l).body;else{const p=l.parentElement,d=ownerWindow(l);c=(p==null?void 0:p.nodeName)==="HTML"&&d.getComputedStyle(p).overflowY==="scroll"?p:l}a.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{a.forEach(({value:c,el:p,property:d})=>{c?p.style.setProperty(d,c):p.style.removeProperty(d)})}}function getHiddenSiblings(t){const n=[];return[].forEach.call(t.children,a=>{a.getAttribute("aria-hidden")==="true"&&n.push(a)}),n}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(n,a){let l=this.modals.indexOf(n);if(l!==-1)return l;l=this.modals.length,this.modals.push(n),n.modalRef&&ariaHidden(n.modalRef,!1);const u=getHiddenSiblings(a);ariaHiddenSiblings(a,n.mount,n.modalRef,u,!0);const c=findIndexOf(this.containers,p=>p.container===a);return c!==-1?(this.containers[c].modals.push(n),l):(this.containers.push({modals:[n],container:a,restore:null,hiddenSiblings:u}),l)}mount(n,a){const l=findIndexOf(this.containers,c=>c.modals.includes(n)),u=this.containers[l];u.restore||(u.restore=handleContainer(u,a))}remove(n,a=!0){const l=this.modals.indexOf(n);if(l===-1)return l;const u=findIndexOf(this.containers,p=>p.modals.includes(n)),c=this.containers[u];if(c.modals.splice(c.modals.indexOf(n),1),this.modals.splice(l,1),c.modals.length===0)c.restore&&c.restore(),n.modalRef&&ariaHidden(n.modalRef,a),ariaHiddenSiblings(c.container,n.mount,n.modalRef,c.hiddenSiblings,!1),this.containers.splice(u,1);else{const p=c.modals[c.modals.length-1];p.modalRef&&ariaHidden(p.modalRef,!1)}return l}isTopModal(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(t){const n=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(n)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:n}function isNonTabbableRadio(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const n=l=>t.ownerDocument.querySelector(`input[type="radio"]${l}`);let a=n(`[name="${t.name}"]:checked`);return a||(a=n(`[name="${t.name}"]`)),a!==t}function isNodeMatchingSelectorFocusable(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||isNonTabbableRadio(t))}function defaultGetTabbable(t){const n=[],a=[];return Array.from(t.querySelectorAll(candidatesSelector)).forEach((l,u)=>{const c=getTabIndex(l);c===-1||!isNodeMatchingSelectorFocusable(l)||(c===0?n.push(l):a.push({documentOrder:u,tabIndex:c,node:l}))}),a.sort((l,u)=>l.tabIndex===u.tabIndex?l.documentOrder-u.documentOrder:l.tabIndex-u.tabIndex).map(l=>l.node).concat(n)}function defaultIsEnabled(){return!0}function FocusTrap(t){const{children:n,disableAutoFocus:a=!1,disableEnforceFocus:l=!1,disableRestoreFocus:u=!1,getTabbable:c=defaultGetTabbable,isEnabled:p=defaultIsEnabled,open:d}=t,Q=reactExports.useRef(!1),Ct=reactExports.useRef(null),ar=reactExports.useRef(null),en=reactExports.useRef(null),tn=reactExports.useRef(null),on=reactExports.useRef(!1),cn=reactExports.useRef(null),gn=useForkRef(getReactElementRef(n),cn),Cn=reactExports.useRef(null);reactExports.useEffect(()=>{!d||!cn.current||(on.current=!a)},[a,d]),reactExports.useEffect(()=>{if(!d||!cn.current)return;const ax=ownerDocument(cn.current);return cn.current.contains(ax.activeElement)||(cn.current.hasAttribute("tabIndex")||cn.current.setAttribute("tabIndex","-1"),on.current&&cn.current.focus()),()=>{u||(en.current&&en.current.focus&&(Q.current=!0,en.current.focus()),en.current=null)}},[d]),reactExports.useEffect(()=>{if(!d||!cn.current)return;const ax=ownerDocument(cn.current),ox=dx=>{Cn.current=dx,!(l||!p()||dx.key!=="Tab")&&ax.activeElement===cn.current&&dx.shiftKey&&(Q.current=!0,ar.current&&ar.current.focus())},lx=()=>{var fx,ux;const dx=cn.current;if(dx===null)return;if(!ax.hasFocus()||!p()||Q.current){Q.current=!1;return}if(dx.contains(ax.activeElement)||l&&ax.activeElement!==Ct.current&&ax.activeElement!==ar.current)return;if(ax.activeElement!==tn.current)tn.current=null;else if(tn.current!==null)return;if(!on.current)return;let hx=[];if((ax.activeElement===Ct.current||ax.activeElement===ar.current)&&(hx=c(cn.current)),hx.length>0){const gx=!!((fx=Cn.current)!=null&&fx.shiftKey&&((ux=Cn.current)==null?void 0:ux.key)==="Tab"),yx=hx[0],_x=hx[hx.length-1];typeof yx!="string"&&typeof _x!="string"&&(gx?_x.focus():yx.focus())}else dx.focus()};ax.addEventListener("focusin",lx),ax.addEventListener("keydown",ox,!0);const cx=setInterval(()=>{ax.activeElement&&ax.activeElement.tagName==="BODY"&&lx()},50);return()=>{clearInterval(cx),ax.removeEventListener("focusin",lx),ax.removeEventListener("keydown",ox,!0)}},[a,l,u,p,d,c]);const ex=ax=>{en.current===null&&(en.current=ax.relatedTarget),on.current=!0,tn.current=ax.target;const ox=n.props.onFocus;ox&&ox(ax)},ix=ax=>{en.current===null&&(en.current=ax.relatedTarget),on.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:d?0:-1,onFocus:ix,ref:Ct,"data-testid":"sentinelStart"}),reactExports.cloneElement(n,{ref:gn,onFocus:ex}),jsxRuntimeExports.jsx("div",{tabIndex:d?0:-1,onFocus:ix,ref:ar,"data-testid":"sentinelEnd"})]})}const styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(n,a){const l=useTheme(),u={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:c,appear:p=!0,children:d,easing:Q,in:Ct,onEnter:ar,onEntered:en,onEntering:tn,onExit:on,onExited:cn,onExiting:gn,style:Cn,timeout:ex=u,TransitionComponent:ix=Transition,...ax}=n,ox=reactExports.useRef(null),lx=useForkRef(ox,getReactElementRef(d),a),cx=vx=>bx=>{if(vx){const xx=ox.current;bx===void 0?vx(xx):vx(xx,bx)}},dx=cx(tn),hx=cx((vx,bx)=>{reflow(vx);const xx=getTransitionProps({style:Cn,timeout:ex,easing:Q},{mode:"enter"});vx.style.webkitTransition=l.transitions.create("opacity",xx),vx.style.transition=l.transitions.create("opacity",xx),ar&&ar(vx,bx)}),fx=cx(en),ux=cx(gn),gx=cx(vx=>{const bx=getTransitionProps({style:Cn,timeout:ex,easing:Q},{mode:"exit"});vx.style.webkitTransition=l.transitions.create("opacity",bx),vx.style.transition=l.transitions.create("opacity",bx),on&&on(vx)}),yx=cx(cn),_x=vx=>{c&&c(ox.current,vx)};return jsxRuntimeExports.jsx(ix,{appear:p,in:Ct,nodeRef:ox,onEnter:hx,onEntered:fx,onEntering:dx,onExit:gx,onExited:yx,onExiting:ux,addEndListener:_x,timeout:ex,...ax,children:(vx,{ownerState:bx,...xx})=>reactExports.cloneElement(d,{style:{opacity:0,visibility:vx==="exited"&&!Ct?"hidden":void 0,...styles[vx],...Cn,...d.props.style},ref:lx,...xx})})});function getBackdropUtilityClass(t){return generateUtilityClass("MuiBackdrop",t)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$r=t=>{const{classes:n,invisible:a}=t;return composeClasses({root:["root",a&&"invisible"]},getBackdropUtilityClass,n)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.invisible&&n.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiBackdrop"}),{children:u,className:c,component:p="div",invisible:d=!1,open:Q,components:Ct={},componentsProps:ar={},slotProps:en={},slots:tn={},TransitionComponent:on,transitionDuration:cn,...gn}=l,Cn={...l,component:p,invisible:d},ex=useUtilityClasses$r(Cn),ix={transition:on,root:Ct.Root,...tn},ax={...ar,...en},ox={slots:ix,slotProps:ax},[lx,cx]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:ox,className:clsx(ex.root,c),ownerState:Cn}),[dx,hx]=useSlot("transition",{elementType:Fade,externalForwardedProps:ox,ownerState:Cn});return jsxRuntimeExports.jsx(dx,{in:Q,timeout:cn,...gn,...hx,children:jsxRuntimeExports.jsx(lx,{"aria-hidden":!0,...cx,classes:ex,ref:a,children:u})})});function getContainer(t){return typeof t=="function"?t():t}function getHasTransition(t){return t?t.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal(t){const{container:n,disableEscapeKeyDown:a=!1,disableScrollLock:l=!1,closeAfterTransition:u=!1,onTransitionEnter:c,onTransitionExited:p,children:d,onClose:Q,open:Ct,rootRef:ar}=t,en=reactExports.useRef({}),tn=reactExports.useRef(null),on=reactExports.useRef(null),cn=useForkRef(on,ar),[gn,Cn]=reactExports.useState(!Ct),ex=getHasTransition(d);let ix=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(ix=!1);const ax=()=>ownerDocument(tn.current),ox=()=>(en.current.modalRef=on.current,en.current.mount=tn.current,en.current),lx=()=>{manager.mount(ox(),{disableScrollLock:l}),on.current&&(on.current.scrollTop=0)},cx=useEventCallback(()=>{const bx=getContainer(n)||ax().body;manager.add(ox(),bx),on.current&&lx()}),dx=()=>manager.isTopModal(ox()),hx=useEventCallback(bx=>{tn.current=bx,bx&&(Ct&&dx()?lx():on.current&&ariaHidden(on.current,ix))}),fx=reactExports.useCallback(()=>{manager.remove(ox(),ix)},[ix]);reactExports.useEffect(()=>()=>{fx()},[fx]),reactExports.useEffect(()=>{Ct?cx():(!ex||!u)&&fx()},[Ct,fx,ex,u,cx]);const ux=bx=>xx=>{var Sx;(Sx=bx.onKeyDown)==null||Sx.call(bx,xx),!(xx.key!=="Escape"||xx.which===229||!dx())&&(a||(xx.stopPropagation(),Q&&Q(xx,"escapeKeyDown")))},gx=bx=>xx=>{var Sx;(Sx=bx.onClick)==null||Sx.call(bx,xx),xx.target===xx.currentTarget&&Q&&Q(xx,"backdropClick")};return{getRootProps:(bx={})=>{const xx=extractEventHandlers(t);delete xx.onTransitionEnter,delete xx.onTransitionExited;const Sx={...xx,...bx};return{role:"presentation",...Sx,onKeyDown:ux(Sx),ref:cn}},getBackdropProps:(bx={})=>{const xx=bx;return{"aria-hidden":!0,...xx,onClick:gx(xx),open:Ct}},getTransitionProps:()=>{const bx=()=>{Cn(!1),c&&c()},xx=()=>{Cn(!0),p&&p(),u&&fx()};return{onEnter:createChainedFunction(bx,(d==null?void 0:d.props.onEnter)??noop$1),onExited:createChainedFunction(xx,(d==null?void 0:d.props.onExited)??noop$1)}},rootRef:cn,portalRef:hx,isTopModal:dx,exited:gn,hasTransition:ex}}function getModalUtilityClass(t){return generateUtilityClass("MuiModal",t)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$q=t=>{const{open:n,exited:a,classes:l}=t;return composeClasses({root:["root",!n&&a&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,l)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.open&&a.exited&&n.hidden]}})(memoTheme(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:n})=>!n.open&&n.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Modal=reactExports.forwardRef(function(n,a){const l=useDefaultProps({name:"MuiModal",props:n}),{BackdropComponent:u=ModalBackdrop,BackdropProps:c,classes:p,className:d,closeAfterTransition:Q=!1,children:Ct,container:ar,component:en,components:tn={},componentsProps:on={},disableAutoFocus:cn=!1,disableEnforceFocus:gn=!1,disableEscapeKeyDown:Cn=!1,disablePortal:ex=!1,disableRestoreFocus:ix=!1,disableScrollLock:ax=!1,hideBackdrop:ox=!1,keepMounted:lx=!1,onClose:cx,onTransitionEnter:dx,onTransitionExited:hx,open:fx,slotProps:ux={},slots:gx={},theme:yx,..._x}=l,vx={...l,closeAfterTransition:Q,disableAutoFocus:cn,disableEnforceFocus:gn,disableEscapeKeyDown:Cn,disablePortal:ex,disableRestoreFocus:ix,disableScrollLock:ax,hideBackdrop:ox,keepMounted:lx},{getRootProps:bx,getBackdropProps:xx,getTransitionProps:Sx,portalRef:Ax,isTopModal:Cx,exited:Tx,hasTransition:Px}=useModal({...vx,rootRef:a}),Fx={...vx,exited:Tx},Mx=useUtilityClasses$q(Fx),Dx={};if(Ct.props.tabIndex===void 0&&(Dx.tabIndex="-1"),Px){const{onEnter:Hx,onExited:Vx}=Sx();Dx.onEnter=Hx,Dx.onExited=Vx}const Ox={slots:{root:tn.Root,backdrop:tn.Backdrop,...gx},slotProps:{...on,...ux}},[Lx,Nx]=useSlot("root",{ref:a,elementType:ModalRoot,externalForwardedProps:{...Ox,..._x,component:en},getSlotProps:bx,ownerState:Fx,className:clsx(d,Mx==null?void 0:Mx.root,!Fx.open&&Fx.exited&&(Mx==null?void 0:Mx.hidden))}),[Gx,Ux]=useSlot("backdrop",{ref:c==null?void 0:c.ref,elementType:u,externalForwardedProps:Ox,shouldForwardComponentProp:!0,additionalProps:c,getSlotProps:Hx=>xx({...Hx,onClick:Vx=>{Hx!=null&&Hx.onClick&&Hx.onClick(Vx)}}),className:clsx(c==null?void 0:c.className,Mx==null?void 0:Mx.backdrop),ownerState:Fx});return!lx&&!fx&&(!Px||Tx)?null:jsxRuntimeExports.jsx(Portal,{ref:Ax,container:ar,disablePortal:ex,children:jsxRuntimeExports.jsxs(Lx,{...Nx,children:[!ox&&u?jsxRuntimeExports.jsx(Gx,{...Ux}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:gn,disableAutoFocus:cn,disableRestoreFocus:ix,isEnabled:Cx,open:fx,children:reactExports.cloneElement(Ct,Dx)})]})})});function getPaperUtilityClass(t){return generateUtilityClass("MuiPaper",t)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$p=t=>{const{square:n,elevation:a,variant:l,classes:u}=t,c={root:["root",l,!n&&"rounded",l==="elevation"&&`elevation${a}`]};return composeClasses(c,getPaperUtilityClass,u)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],!a.square&&n.rounded,a.variant==="elevation"&&n[`elevation${a.elevation}`]]}})(memoTheme(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:n})=>!n.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(n,a){var on;const l=useDefaultProps({props:n,name:"MuiPaper"}),u=useTheme(),{className:c,component:p="div",elevation:d=1,square:Q=!1,variant:Ct="elevation",...ar}=l,en={...l,component:p,elevation:d,square:Q,variant:Ct},tn=useUtilityClasses$p(en);return jsxRuntimeExports.jsx(PaperRoot,{as:p,ownerState:en,className:clsx(tn.root,c),ref:a,...ar,style:{...Ct==="elevation"&&{"--Paper-shadow":(u.vars||u).shadows[d],...u.vars&&{"--Paper-overlay":(on=u.vars.overlays)==null?void 0:on[d]},...!u.vars&&u.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha$1("#fff",getOverlayAlpha(d))}, ${alpha$1("#fff",getOverlayAlpha(d))})`}},...ar.style}})});function getPopoverUtilityClass(t){return generateUtilityClass("MuiPopover",t)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.height/2:n==="bottom"&&(a=t.height),a}function getOffsetLeft(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.width/2:n==="right"&&(a=t.width),a}function getTransformOriginValue(t){return[t.horizontal,t.vertical].map(n=>typeof n=="number"?`${n}px`:n).join(" ")}function resolveAnchorEl(t){return typeof t=="function"?t():t}const useUtilityClasses$o=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,n)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root"})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiPopover"}),{action:u,anchorEl:c,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:Q="anchorEl",children:Ct,className:ar,container:en,elevation:tn=8,marginThreshold:on=16,open:cn,PaperProps:gn={},slots:Cn={},slotProps:ex={},transformOrigin:ix={vertical:"top",horizontal:"left"},TransitionComponent:ax,transitionDuration:ox="auto",TransitionProps:lx={},disableScrollLock:cx=!1,...dx}=l,hx=reactExports.useRef(),fx={...l,anchorOrigin:p,anchorReference:Q,elevation:tn,marginThreshold:on,transformOrigin:ix,TransitionComponent:ax,transitionDuration:ox,TransitionProps:lx},ux=useUtilityClasses$o(fx),gx=reactExports.useCallback(()=>{if(Q==="anchorPosition")return d;const Hx=resolveAnchorEl(c),zx=(Hx&&Hx.nodeType===1?Hx:ownerDocument(hx.current).body).getBoundingClientRect();return{top:zx.top+getOffsetTop(zx,p.vertical),left:zx.left+getOffsetLeft(zx,p.horizontal)}},[c,p.horizontal,p.vertical,d,Q]),yx=reactExports.useCallback(Hx=>({vertical:getOffsetTop(Hx,ix.vertical),horizontal:getOffsetLeft(Hx,ix.horizontal)}),[ix.horizontal,ix.vertical]),_x=reactExports.useCallback(Hx=>{const Vx={width:Hx.offsetWidth,height:Hx.offsetHeight},zx=yx(Vx);if(Q==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(zx)};const rE=gx();let Zx=rE.top-zx.vertical,eE=rE.left-zx.horizontal;const oE=Zx+Vx.height,iE=eE+Vx.width,Wx=ownerWindow(resolveAnchorEl(c)),AE=Wx.innerHeight-on,ME=Wx.innerWidth-on;if(on!==null&&Zx<on){const EE=Zx-on;Zx-=EE,zx.vertical+=EE}else if(on!==null&&oE>AE){const EE=oE-AE;Zx-=EE,zx.vertical+=EE}if(on!==null&&eE<on){const EE=eE-on;eE-=EE,zx.horizontal+=EE}else if(iE>ME){const EE=iE-ME;eE-=EE,zx.horizontal+=EE}return{top:`${Math.round(Zx)}px`,left:`${Math.round(eE)}px`,transformOrigin:getTransformOriginValue(zx)}},[c,Q,gx,yx,on]),[vx,bx]=reactExports.useState(cn),xx=reactExports.useCallback(()=>{const Hx=hx.current;if(!Hx)return;const Vx=_x(Hx);Vx.top!==null&&Hx.style.setProperty("top",Vx.top),Vx.left!==null&&(Hx.style.left=Vx.left),Hx.style.transformOrigin=Vx.transformOrigin,bx(!0)},[_x]);reactExports.useEffect(()=>(cx&&window.addEventListener("scroll",xx),()=>window.removeEventListener("scroll",xx)),[c,cx,xx]);const Sx=()=>{xx()},Ax=()=>{bx(!1)};reactExports.useEffect(()=>{cn&&xx()}),reactExports.useImperativeHandle(u,()=>cn?{updatePosition:()=>{xx()}}:null,[cn,xx]),reactExports.useEffect(()=>{if(!cn)return;const Hx=debounce$2(()=>{xx()}),Vx=ownerWindow(resolveAnchorEl(c));return Vx.addEventListener("resize",Hx),()=>{Hx.clear(),Vx.removeEventListener("resize",Hx)}},[c,cn,xx]);let Cx=ox;const Tx={slots:{transition:ax,...Cn},slotProps:{transition:lx,paper:gn,...ex}},[Px,Fx]=useSlot("transition",{elementType:Grow,externalForwardedProps:Tx,ownerState:fx,getSlotProps:Hx=>({...Hx,onEntering:(Vx,zx)=>{var rE;(rE=Hx.onEntering)==null||rE.call(Hx,Vx,zx),Sx()},onExited:Vx=>{var zx;(zx=Hx.onExited)==null||zx.call(Hx,Vx),Ax()}}),additionalProps:{appear:!0,in:cn}});ox==="auto"&&!Px.muiSupportAuto&&(Cx=void 0);const Mx=en||(c?ownerDocument(resolveAnchorEl(c)).body:void 0),[Dx,{slots:Ox,slotProps:Lx,...Nx}]=useSlot("root",{ref:a,elementType:PopoverRoot,externalForwardedProps:{...Tx,...dx},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:Cn.backdrop},slotProps:{backdrop:mergeSlotProps$1(typeof ex.backdrop=="function"?ex.backdrop(fx):ex.backdrop,{invisible:!0})},container:Mx,open:cn},ownerState:fx,className:clsx(ux.root,ar)}),[Gx,Ux]=useSlot("paper",{ref:hx,className:ux.paper,elementType:PopoverPaper,externalForwardedProps:Tx,shouldForwardComponentProp:!0,additionalProps:{elevation:tn,style:vx?void 0:{opacity:0}},ownerState:fx});return jsxRuntimeExports.jsx(Dx,{...Nx,...!isHostComponent(Dx)&&{slots:Ox,slotProps:Lx,disableScrollLock:cx},children:jsxRuntimeExports.jsx(Px,{...Fx,timeout:Cx,children:jsxRuntimeExports.jsx(Gx,{...Ux,children:Ct})})})});function getMenuUtilityClass(t){return generateUtilityClass("MuiMenu",t)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$n=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,n)},MenuRoot=styled(Popover,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List"})({outline:0}),Menu=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiMenu"}),{autoFocus:u=!0,children:c,className:p,disableAutoFocusItem:d=!1,MenuListProps:Q={},onClose:Ct,open:ar,PaperProps:en={},PopoverClasses:tn,transitionDuration:on="auto",TransitionProps:{onEntering:cn,...gn}={},variant:Cn="selectedMenu",slots:ex={},slotProps:ix={},...ax}=l,ox=useRtl(),lx={...l,autoFocus:u,disableAutoFocusItem:d,MenuListProps:Q,onEntering:cn,PaperProps:en,transitionDuration:on,TransitionProps:gn,variant:Cn},cx=useUtilityClasses$n(lx),dx=u&&!d&&ar,hx=reactExports.useRef(null),fx=(Cx,Tx)=>{hx.current&&hx.current.adjustStyleForScrollbar(Cx,{direction:ox?"rtl":"ltr"}),cn&&cn(Cx,Tx)},ux=Cx=>{Cx.key==="Tab"&&(Cx.preventDefault(),Ct&&Ct(Cx,"tabKeyDown"))};let gx=-1;reactExports.Children.map(c,(Cx,Tx)=>{reactExports.isValidElement(Cx)&&(Cx.props.disabled||(Cn==="selectedMenu"&&Cx.props.selected||gx===-1)&&(gx=Tx))});const yx={slots:ex,slotProps:{list:Q,transition:gn,paper:en,...ix}},_x=useSlotProps({elementType:ex.root,externalSlotProps:ix.root,ownerState:lx,className:[cx.root,p]}),[vx,bx]=useSlot("paper",{className:cx.paper,elementType:MenuPaper,externalForwardedProps:yx,shouldForwardComponentProp:!0,ownerState:lx}),[xx,Sx]=useSlot("list",{className:clsx(cx.list,Q.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:yx,getSlotProps:Cx=>({...Cx,onKeyDown:Tx=>{var Px;ux(Tx),(Px=Cx.onKeyDown)==null||Px.call(Cx,Tx)}}),ownerState:lx}),Ax=typeof yx.slotProps.transition=="function"?yx.slotProps.transition(lx):yx.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:Ct,anchorOrigin:{vertical:"bottom",horizontal:ox?"right":"left"},transformOrigin:ox?RTL_ORIGIN:LTR_ORIGIN,slots:{root:ex.root,paper:vx,backdrop:ex.backdrop,...ex.transition&&{transition:ex.transition}},slotProps:{root:_x,paper:bx,backdrop:typeof ix.backdrop=="function"?ix.backdrop(lx):ix.backdrop,transition:{...Ax,onEntering:(...Cx)=>{var Tx;fx(...Cx),(Tx=Ax==null?void 0:Ax.onEntering)==null||Tx.call(Ax,...Cx)}}},open:ar,ref:a,transitionDuration:on,ownerState:lx,...ax,classes:tn,children:jsxRuntimeExports.jsx(xx,{actions:hx,autoFocus:u&&(gx===-1||d),autoFocusItem:dx,variant:Cn,...Sx,children:c})})});function getNativeSelectUtilityClasses(t){return generateUtilityClass("MuiNativeSelect",t)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$m=t=>{const{classes:n,variant:a,disabled:l,multiple:u,open:c,error:p}=t,d={select:["select",a,l&&"disabled",u&&"multiple",p&&"error"],icon:["icon",`icon${capitalize(a)}`,c&&"iconOpen",l&&"disabled"]};return composeClasses(d,getNativeSelectUtilityClasses,n)},StyledSelectSelect=styled("select")(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:n})=>n.variant!=="filled"&&n.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.select,n[a.variant],a.error&&n.error,{[`&.${nativeSelectClasses.multiple}`]:n.multiple}]}})({}),StyledSelectIcon=styled("svg")(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:n})=>n.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(n,a){const{className:l,disabled:u,error:c,IconComponent:p,inputRef:d,variant:Q="standard",...Ct}=n,ar={...n,disabled:u,variant:Q,error:c},en=useUtilityClasses$m(ar);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:ar,className:clsx(en.select,l),disabled:u,ref:d||a,...Ct}),n.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:p,ownerState:ar,className:en.icon})]})});function getSelectUtilityClasses(t){return generateUtilityClass("MuiSelect",t)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`&.${selectClasses.select}`]:n.select},{[`&.${selectClasses.select}`]:n[a.variant]},{[`&.${selectClasses.error}`]:n.error},{[`&.${selectClasses.multiple}`]:n.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:t=>slotShouldForwardProp(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}function isEmpty(t){return t==null||typeof t=="string"&&!t.trim()}const useUtilityClasses$l=t=>{const{classes:n,variant:a,disabled:l,multiple:u,open:c,error:p}=t,d={select:["select",a,l&&"disabled",u&&"multiple",p&&"error"],icon:["icon",`icon${capitalize(a)}`,c&&"iconOpen",l&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(d,getSelectUtilityClasses,n)},SelectInput=reactExports.forwardRef(function(n,a){var mE;const{"aria-describedby":l,"aria-label":u,autoFocus:c,autoWidth:p,children:d,className:Q,defaultOpen:Ct,defaultValue:ar,disabled:en,displayEmpty:tn,error:on=!1,IconComponent:cn,inputRef:gn,labelId:Cn,MenuProps:ex={},multiple:ix,name:ax,onBlur:ox,onChange:lx,onClose:cx,onFocus:dx,onOpen:hx,open:fx,readOnly:ux,renderValue:gx,required:yx,SelectDisplayProps:_x={},tabIndex:vx,type:bx,value:xx,variant:Sx="standard",...Ax}=n,[Cx,Tx]=useControlled({controlled:xx,default:ar,name:"Select"}),[Px,Fx]=useControlled({controlled:fx,default:Ct,name:"Select"}),Mx=reactExports.useRef(null),Dx=reactExports.useRef(null),[Ox,Lx]=reactExports.useState(null),{current:Nx}=reactExports.useRef(fx!=null),[Gx,Ux]=reactExports.useState(),Hx=useForkRef(a,gn),Vx=reactExports.useCallback(xE=>{Dx.current=xE,xE&&Lx(xE)},[]),zx=Ox==null?void 0:Ox.parentNode;reactExports.useImperativeHandle(Hx,()=>({focus:()=>{Dx.current.focus()},node:Mx.current,value:Cx}),[Cx]),reactExports.useEffect(()=>{Ct&&Px&&Ox&&!Nx&&(Ux(p?null:zx.clientWidth),Dx.current.focus())},[Ox,p]),reactExports.useEffect(()=>{c&&Dx.current.focus()},[c]),reactExports.useEffect(()=>{if(!Cn)return;const xE=ownerDocument(Dx.current).getElementById(Cn);if(xE){const OE=()=>{getSelection().isCollapsed&&Dx.current.focus()};return xE.addEventListener("click",OE),()=>{xE.removeEventListener("click",OE)}}},[Cn]);const rE=(xE,OE)=>{xE?hx&&hx(OE):cx&&cx(OE),Nx||(Ux(p?null:zx.clientWidth),Fx(xE))},Zx=xE=>{xE.button===0&&(xE.preventDefault(),Dx.current.focus(),rE(!0,xE))},eE=xE=>{rE(!1,xE)},oE=reactExports.Children.toArray(d),iE=xE=>{const OE=oE.find(PE=>PE.props.value===xE.target.value);OE!==void 0&&(Tx(OE.props.value),lx&&lx(xE,OE))},Wx=xE=>OE=>{let PE;if(OE.currentTarget.hasAttribute("tabindex")){if(ix){PE=Array.isArray(Cx)?Cx.slice():[];const sE=Cx.indexOf(xE.props.value);sE===-1?PE.push(xE.props.value):PE.splice(sE,1)}else PE=xE.props.value;if(xE.props.onClick&&xE.props.onClick(OE),Cx!==PE&&(Tx(PE),lx)){const sE=OE.nativeEvent||OE,hE=new sE.constructor(sE.type,sE);Object.defineProperty(hE,"target",{writable:!0,value:{value:PE,name:ax}}),lx(hE,xE)}ix||rE(!1,OE)}},AE=xE=>{ux||[" ","ArrowUp","ArrowDown","Enter"].includes(xE.key)&&(xE.preventDefault(),rE(!0,xE))},ME=Ox!==null&&Px,EE=xE=>{!ME&&ox&&(Object.defineProperty(xE,"target",{writable:!0,value:{value:Cx,name:ax}}),ox(xE))};delete Ax["aria-invalid"];let bE,kE;const TE=[];let jE=!1;(isFilled({value:Cx})||tn)&&(gx?bE=gx(Cx):jE=!0);const Ix=oE.map(xE=>{if(!reactExports.isValidElement(xE))return null;let OE;if(ix){if(!Array.isArray(Cx))throw new Error(formatMuiErrorMessage(2));OE=Cx.some(PE=>areEqualValues(PE,xE.props.value)),OE&&jE&&TE.push(xE.props.children)}else OE=areEqualValues(Cx,xE.props.value),OE&&jE&&(kE=xE.props.children);return reactExports.cloneElement(xE,{"aria-selected":OE?"true":"false",onClick:Wx(xE),onKeyUp:PE=>{PE.key===" "&&PE.preventDefault(),xE.props.onKeyUp&&xE.props.onKeyUp(PE)},role:"option",selected:OE,value:void 0,"data-value":xE.props.value})});jE&&(ix?TE.length===0?bE=null:bE=TE.reduce((xE,OE,PE)=>(xE.push(OE),PE<TE.length-1&&xE.push(", "),xE),[]):bE=kE);let Bx=Gx;!p&&Nx&&Ox&&(Bx=zx.clientWidth);let Yx;typeof vx<"u"?Yx=vx:Yx=en?null:0;const Qx=_x.id||(ax?`mui-component-select-${ax}`:void 0),nE={...n,variant:Sx,value:Cx,open:ME,error:on},Kx=useUtilityClasses$l(nE),dE={...ex.PaperProps,...(mE=ex.slotProps)==null?void 0:mE.paper},cE=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:Vx,tabIndex:Yx,role:"combobox","aria-controls":ME?cE:void 0,"aria-disabled":en?"true":void 0,"aria-expanded":ME?"true":"false","aria-haspopup":"listbox","aria-label":u,"aria-labelledby":[Cn,Qx].filter(Boolean).join(" ")||void 0,"aria-describedby":l,"aria-required":yx?"true":void 0,"aria-invalid":on?"true":void 0,onKeyDown:AE,onMouseDown:en||ux?null:Zx,onBlur:EE,onFocus:dx,..._x,ownerState:nE,className:clsx(_x.className,Kx.select,Q),id:Qx,children:isEmpty(bE)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):bE}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":on,value:Array.isArray(Cx)?Cx.join(","):Cx,name:ax,ref:Mx,"aria-hidden":!0,onChange:iE,tabIndex:-1,disabled:en,className:Kx.nativeInput,autoFocus:c,required:yx,...Ax,ownerState:nE}),jsxRuntimeExports.jsx(SelectIcon,{as:cn,className:Kx.icon,ownerState:nE}),jsxRuntimeExports.jsx(Menu,{id:`menu-${ax||""}`,anchorEl:zx,open:ME,onClose:eE,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...ex,slotProps:{...ex.slotProps,list:{"aria-labelledby":Cn,role:"listbox","aria-multiselectable":ix?"true":void 0,disableListWrap:!0,id:cE,...ex.MenuListProps},paper:{...dE,style:{minWidth:Bx,...dE!=null?dE.style:null}}},children:Ix})]})}),ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"})),useUtilityClasses$k=t=>{const{classes:n}=t,l=composeClasses({root:["root"]},getSelectUtilityClasses,n);return{...n,...l}},styledRootConfig={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>rootShouldForwardProp(t)&&t!=="variant"},StyledInput=styled(Input,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(n,a){const l=useDefaultProps({name:"MuiSelect",props:n}),{autoWidth:u=!1,children:c,classes:p={},className:d,defaultOpen:Q=!1,displayEmpty:Ct=!1,IconComponent:ar=ArrowDropDownIcon,id:en,input:tn,inputProps:on,label:cn,labelId:gn,MenuProps:Cn,multiple:ex=!1,native:ix=!1,onClose:ax,onOpen:ox,open:lx,renderValue:cx,SelectDisplayProps:dx,variant:hx="outlined",...fx}=l,ux=ix?NativeSelectInput:SelectInput,gx=useFormControl(),yx=formControlState({props:l,muiFormControl:gx,states:["variant","error"]}),_x=yx.variant||hx,vx={...l,variant:_x,classes:p},bx=useUtilityClasses$k(vx),{root:xx,...Sx}=bx,Ax=tn||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:vx}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:cn,ownerState:vx}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:vx})}[_x],Cx=useForkRef(a,getReactElementRef(Ax));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(Ax,{inputComponent:ux,inputProps:{children:c,error:yx.error,IconComponent:ar,variant:_x,type:void 0,multiple:ex,...ix?{id:en}:{autoWidth:u,defaultOpen:Q,displayEmpty:Ct,labelId:gn,MenuProps:Cn,onClose:ax,onOpen:ox,open:lx,renderValue:cx,SelectDisplayProps:{id:en,...dx}},...on,classes:on?deepmerge(Sx,on.classes):Sx,...tn?tn.props.inputProps:{}},...(ex&&ix||Ct)&&_x==="outlined"?{notched:!0}:{},ref:Cx,className:clsx(Ax.props.className,d,bx.root),...!tn&&{variant:_x},...fx})})});Select.muiName="Select";function getTextFieldUtilityClass(t){return generateUtilityClass("MuiTextField",t)}generateUtilityClasses("MuiTextField",["root"]);const variantComponent={standard:Input,filled:FilledInput,outlined:OutlinedInput},useUtilityClasses$j=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTextFieldUtilityClass,n)},TextFieldRoot=styled(FormControl,{name:"MuiTextField",slot:"Root"})({}),TextField=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiTextField"}),{autoComplete:u,autoFocus:c=!1,children:p,className:d,color:Q="primary",defaultValue:Ct,disabled:ar=!1,error:en=!1,FormHelperTextProps:tn,fullWidth:on=!1,helperText:cn,id:gn,InputLabelProps:Cn,inputProps:ex,InputProps:ix,inputRef:ax,label:ox,maxRows:lx,minRows:cx,multiline:dx=!1,name:hx,onBlur:fx,onChange:ux,onFocus:gx,placeholder:yx,required:_x=!1,rows:vx,select:bx=!1,SelectProps:xx,slots:Sx={},slotProps:Ax={},type:Cx,value:Tx,variant:Px="outlined",...Fx}=l,Mx={...l,autoFocus:c,color:Q,disabled:ar,error:en,fullWidth:on,multiline:dx,required:_x,select:bx,variant:Px},Dx=useUtilityClasses$j(Mx),Ox=useId(gn),Lx=cn&&Ox?`${Ox}-helper-text`:void 0,Nx=ox&&Ox?`${Ox}-label`:void 0,Gx=variantComponent[Px],Ux={slots:Sx,slotProps:{input:ix,inputLabel:Cn,htmlInput:ex,formHelperText:tn,select:xx,...Ax}},Hx={},Vx=Ux.slotProps.inputLabel;Px==="outlined"&&(Vx&&typeof Vx.shrink<"u"&&(Hx.notched=Vx.shrink),Hx.label=ox),bx&&((!xx||!xx.native)&&(Hx.id=void 0),Hx["aria-describedby"]=void 0);const[zx,rE]=useSlot("root",{elementType:TextFieldRoot,shouldForwardComponentProp:!0,externalForwardedProps:{...Ux,...Fx},ownerState:Mx,className:clsx(Dx.root,d),ref:a,additionalProps:{disabled:ar,error:en,fullWidth:on,required:_x,color:Q,variant:Px}}),[Zx,eE]=useSlot("input",{elementType:Gx,externalForwardedProps:Ux,additionalProps:Hx,ownerState:Mx}),[oE,iE]=useSlot("inputLabel",{elementType:InputLabel,externalForwardedProps:Ux,ownerState:Mx}),[Wx,AE]=useSlot("htmlInput",{elementType:"input",externalForwardedProps:Ux,ownerState:Mx}),[ME,EE]=useSlot("formHelperText",{elementType:FormHelperText,externalForwardedProps:Ux,ownerState:Mx}),[bE,kE]=useSlot("select",{elementType:Select,externalForwardedProps:Ux,ownerState:Mx}),TE=jsxRuntimeExports.jsx(Zx,{"aria-describedby":Lx,autoComplete:u,autoFocus:c,defaultValue:Ct,fullWidth:on,multiline:dx,name:hx,rows:vx,maxRows:lx,minRows:cx,type:Cx,value:Tx,id:Ox,inputRef:ax,onBlur:fx,onChange:ux,onFocus:gx,placeholder:yx,inputProps:AE,slots:{input:Sx.htmlInput?Wx:void 0},...eE});return jsxRuntimeExports.jsxs(zx,{...rE,children:[ox!=null&&ox!==""&&jsxRuntimeExports.jsx(oE,{htmlFor:Ox,id:Nx,...iE,children:ox}),bx?jsxRuntimeExports.jsx(bE,{"aria-describedby":Lx,id:Ox,labelId:Nx,value:Tx,input:TE,...kE,children:p}):TE,cn&&jsxRuntimeExports.jsx(ME,{id:Lx,...EE,children:cn})]})});function getTypographyUtilityClass(t){return generateUtilityClass("MuiTypography",t)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const v6Colors$1={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$i=t=>{const{align:n,gutterBottom:a,noWrap:l,paragraph:u,variant:c,classes:p}=t,d={root:["root",c,t.align!=="inherit"&&`align${capitalize(n)}`,a&&"gutterBottom",l&&"noWrap",u&&"paragraph"]};return composeClasses(d,getTypographyUtilityClass,p)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.variant&&n[a.variant],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.noWrap&&n.noWrap,a.gutterBottom&&n.gutterBottom,a.paragraph&&n.paragraph]}})(memoTheme(({theme:t})=>{var n;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([a,l])=>a!=="inherit"&&l&&typeof l=="object").map(([a,l])=>({props:{variant:a},style:l})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{color:(t.vars||t).palette[a].main}})),...Object.entries(((n=t.palette)==null?void 0:n.text)||{}).filter(([,a])=>typeof a=="string").map(([a])=>({props:{color:`text${capitalize(a)}`},style:{color:(t.vars||t).palette.text[a]}})),{props:({ownerState:a})=>a.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:a})=>a.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:a})=>a.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:a})=>a.paragraph,style:{marginBottom:16}}]}})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(n,a){const{color:l,...u}=useDefaultProps({props:n,name:"MuiTypography"}),c=!v6Colors$1[l],p=extendSxProp({...u,...c&&{color:l}}),{align:d="inherit",className:Q,component:Ct,gutterBottom:ar=!1,noWrap:en=!1,paragraph:tn=!1,variant:on="body1",variantMapping:cn=defaultVariantMapping,...gn}=p,Cn={...p,align:d,color:l,className:Q,component:Ct,gutterBottom:ar,noWrap:en,paragraph:tn,variant:on,variantMapping:cn},ex=Ct||(tn?"p":cn[on]||defaultVariantMapping[on])||"span",ix=useUtilityClasses$i(Cn);return jsxRuntimeExports.jsx(TypographyRoot,{as:ex,ref:a,className:clsx(ix.root,Q),...gn,ownerState:Cn,style:{...d!=="inherit"&&{"--Typography-textAlign":d},...gn.style}})}),Stack=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiStack"})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function getMenuItemUtilityClass(t){return generateUtilityClass("MuiMenuItem",t)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.dense&&n.dense,a.divider&&n.divider,!a.disableGutters&&n.gutters]},useUtilityClasses$h=t=>{const{disabled:n,dense:a,divider:l,disableGutters:u,selected:c,classes:p}=t,Q=composeClasses({root:["root",a&&"dense",n&&"disabled",!u&&"gutters",l&&"divider",c&&"selected"]},getMenuItemUtilityClass,p);return{...p,...Q}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:n})=>n.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:n})=>!n.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:n})=>n.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiMenuItem"}),{autoFocus:u=!1,component:c="li",dense:p=!1,divider:d=!1,disableGutters:Q=!1,focusVisibleClassName:Ct,role:ar="menuitem",tabIndex:en,className:tn,...on}=l,cn=reactExports.useContext(ListContext),gn=reactExports.useMemo(()=>({dense:p||cn.dense||!1,disableGutters:Q}),[cn.dense,p,Q]),Cn=reactExports.useRef(null);useEnhancedEffect(()=>{u&&Cn.current&&Cn.current.focus()},[u]);const ex={...l,dense:gn.dense,divider:d,disableGutters:Q},ix=useUtilityClasses$h(l),ax=useForkRef(Cn,a);let ox;return l.disabled||(ox=en!==void 0?en:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:gn,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:ax,role:ar,tabIndex:ox,component:c,focusVisibleClassName:clsx(ix.focusVisible,Ct),className:clsx(ix.root,tn),...on,ownerState:ex,classes:ix})})});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const useUtilityClasses$g=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getCardUtilityClass,n)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Card=reactExports.forwardRef(function(n,a){const l=useDefaultProps({props:n,name:"MuiCard"}),{className:u,raised:c=!1,...p}=l,d={...l,raised:c},Q=useUtilityClasses$g(d);return jsxRuntimeExports.jsx(CardRoot,{className:clsx(Q.root,u),elevation:c?8:void 0,ref:a,ownerState:d,...p})});function ComponentAdjuster({componentValues:t,setComponentValues:n}){function a(u,c){n(p=>({...p,[u]:{...p[u],value:c}}))}function l(u,c){n(p=>({...p,[u]:{...p[u],unit:c}}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:Object.keys(t).map(u=>jsxRuntimeExports.jsx(Grid$1,{size:{md:3},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1,width:"100%"},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:u}),jsxRuntimeExports.jsx(TextField,{name:u,value:t[u].value,sx:{width:"8ch"},size:"small",onChange:c=>a(u,c.target.value)}),jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[u].unit,onChange:c=>l(u,c.target.value),children:Object.keys(units[t[u].type]).map(c=>jsxRuntimeExports.jsx(MenuItem,{value:c,size:"small",children:c},c))})})]})})},u))})}function FreqAdjusters({settings:t,setSettings:n}){function a(l,u){n(c=>({...c,[l]:u}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:[["fmin","fminUnit"],["fmax","fmaxUnit"],["resolution",null]].map(l=>jsxRuntimeExports.jsx(Grid$1,{size:{xs:12,sm:6,md:4},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:l[0]}),jsxRuntimeExports.jsx(TextField,{name:l[0],value:t[l[0]],sx:{width:"8ch"},size:"small",onChange:u=>a(l[0],u.target.value)}),l[1]!==null&&jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[l[1]],onChange:u=>a(l[1],u.target.value),children:Object.keys(units.frequency).map(u=>jsxRuntimeExports.jsx(MenuItem,{value:u,size:"small",children:u},u))})})]})})},l[0]))})}var algebrite={},BigInteger={exports:{}},hasRequiredBigInteger;function requireBigInteger(){return hasRequiredBigInteger||(hasRequiredBigInteger=1,function(t){var n=function(a){var l=1e7,u=7,c=9007199254740992,p=cn(c),d="0123456789abcdefghijklmnopqrstuvwxyz",Q=typeof BigInt=="function";function Ct(Ix,Bx,Yx,Qx){return typeof Ix>"u"?Ct[0]:typeof Bx<"u"?+Bx==10&&!Yx?TE(Ix):iE(Ix,Bx,Yx,Qx):TE(Ix)}function ar(Ix,Bx){this.value=Ix,this.sign=Bx,this.isSmall=!1}ar.prototype=Object.create(Ct.prototype);function en(Ix){this.value=Ix,this.sign=Ix<0,this.isSmall=!0}en.prototype=Object.create(Ct.prototype);function tn(Ix){this.value=Ix}tn.prototype=Object.create(Ct.prototype);function on(Ix){return-c<Ix&&Ix<c}function cn(Ix){return Ix<1e7?[Ix]:Ix<1e14?[Ix%1e7,Math.floor(Ix/1e7)]:[Ix%1e7,Math.floor(Ix/1e7)%1e7,Math.floor(Ix/1e14)]}function gn(Ix){Cn(Ix);var Bx=Ix.length;if(Bx<4&&Tx(Ix,p)<0)switch(Bx){case 0:return 0;case 1:return Ix[0];case 2:return Ix[0]+Ix[1]*l;default:return Ix[0]+(Ix[1]+Ix[2]*l)*l}return Ix}function Cn(Ix){for(var Bx=Ix.length;Ix[--Bx]===0;);Ix.length=Bx+1}function ex(Ix){for(var Bx=new Array(Ix),Yx=-1;++Yx<Ix;)Bx[Yx]=0;return Bx}function ix(Ix){return Ix>0?Math.floor(Ix):Math.ceil(Ix)}function ax(Ix,Bx){var Yx=Ix.length,Qx=Bx.length,nE=new Array(Yx),Kx=0,dE=l,cE,mE;for(mE=0;mE<Qx;mE++)cE=Ix[mE]+Bx[mE]+Kx,Kx=cE>=dE?1:0,nE[mE]=cE-Kx*dE;for(;mE<Yx;)cE=Ix[mE]+Kx,Kx=cE===dE?1:0,nE[mE++]=cE-Kx*dE;return Kx>0&&nE.push(Kx),nE}function ox(Ix,Bx){return Ix.length>=Bx.length?ax(Ix,Bx):ax(Bx,Ix)}function lx(Ix,Bx){var Yx=Ix.length,Qx=new Array(Yx),nE=l,Kx,dE;for(dE=0;dE<Yx;dE++)Kx=Ix[dE]-nE+Bx,Bx=Math.floor(Kx/nE),Qx[dE]=Kx-Bx*nE,Bx+=1;for(;Bx>0;)Qx[dE++]=Bx%nE,Bx=Math.floor(Bx/nE);return Qx}ar.prototype.add=function(Ix){var Bx=TE(Ix);if(this.sign!==Bx.sign)return this.subtract(Bx.negate());var Yx=this.value,Qx=Bx.value;return Bx.isSmall?new ar(lx(Yx,Math.abs(Qx)),this.sign):new ar(ox(Yx,Qx),this.sign)},ar.prototype.plus=ar.prototype.add,en.prototype.add=function(Ix){var Bx=TE(Ix),Yx=this.value;if(Yx<0!==Bx.sign)return this.subtract(Bx.negate());var Qx=Bx.value;if(Bx.isSmall){if(on(Yx+Qx))return new en(Yx+Qx);Qx=cn(Math.abs(Qx))}return new ar(lx(Qx,Math.abs(Yx)),Yx<0)},en.prototype.plus=en.prototype.add,tn.prototype.add=function(Ix){return new tn(this.value+TE(Ix).value)},tn.prototype.plus=tn.prototype.add;function cx(Ix,Bx){var Yx=Ix.length,Qx=Bx.length,nE=new Array(Yx),Kx=0,dE=l,cE,mE;for(cE=0;cE<Qx;cE++)mE=Ix[cE]-Kx-Bx[cE],mE<0?(mE+=dE,Kx=1):Kx=0,nE[cE]=mE;for(cE=Qx;cE<Yx;cE++){if(mE=Ix[cE]-Kx,mE<0)mE+=dE;else{nE[cE++]=mE;break}nE[cE]=mE}for(;cE<Yx;cE++)nE[cE]=Ix[cE];return Cn(nE),nE}function dx(Ix,Bx,Yx){var Qx;return Tx(Ix,Bx)>=0?Qx=cx(Ix,Bx):(Qx=cx(Bx,Ix),Yx=!Yx),Qx=gn(Qx),typeof Qx=="number"?(Yx&&(Qx=-Qx),new en(Qx)):new ar(Qx,Yx)}function hx(Ix,Bx,Yx){var Qx=Ix.length,nE=new Array(Qx),Kx=-Bx,dE=l,cE,mE;for(cE=0;cE<Qx;cE++)mE=Ix[cE]+Kx,Kx=Math.floor(mE/dE),mE%=dE,nE[cE]=mE<0?mE+dE:mE;return nE=gn(nE),typeof nE=="number"?(Yx&&(nE=-nE),new en(nE)):new ar(nE,Yx)}ar.prototype.subtract=function(Ix){var Bx=TE(Ix);if(this.sign!==Bx.sign)return this.add(Bx.negate());var Yx=this.value,Qx=Bx.value;return Bx.isSmall?hx(Yx,Math.abs(Qx),this.sign):dx(Yx,Qx,this.sign)},ar.prototype.minus=ar.prototype.subtract,en.prototype.subtract=function(Ix){var Bx=TE(Ix),Yx=this.value;if(Yx<0!==Bx.sign)return this.add(Bx.negate());var Qx=Bx.value;return Bx.isSmall?new en(Yx-Qx):hx(Qx,Math.abs(Yx),Yx>=0)},en.prototype.minus=en.prototype.subtract,tn.prototype.subtract=function(Ix){return new tn(this.value-TE(Ix).value)},tn.prototype.minus=tn.prototype.subtract,ar.prototype.negate=function(){return new ar(this.value,!this.sign)},en.prototype.negate=function(){var Ix=this.sign,Bx=new en(-this.value);return Bx.sign=!Ix,Bx},tn.prototype.negate=function(){return new tn(-this.value)},ar.prototype.abs=function(){return new ar(this.value,!1)},en.prototype.abs=function(){return new en(Math.abs(this.value))},tn.prototype.abs=function(){return new tn(this.value>=0?this.value:-this.value)};function fx(Ix,Bx){var Yx=Ix.length,Qx=Bx.length,nE=Yx+Qx,Kx=ex(nE),dE=l,cE,mE,xE,OE,PE;for(xE=0;xE<Yx;++xE){OE=Ix[xE];for(var sE=0;sE<Qx;++sE)PE=Bx[sE],cE=OE*PE+Kx[xE+sE],mE=Math.floor(cE/dE),Kx[xE+sE]=cE-mE*dE,Kx[xE+sE+1]+=mE}return Cn(Kx),Kx}function ux(Ix,Bx){var Yx=Ix.length,Qx=new Array(Yx),nE=l,Kx=0,dE,cE;for(cE=0;cE<Yx;cE++)dE=Ix[cE]*Bx+Kx,Kx=Math.floor(dE/nE),Qx[cE]=dE-Kx*nE;for(;Kx>0;)Qx[cE++]=Kx%nE,Kx=Math.floor(Kx/nE);return Qx}function gx(Ix,Bx){for(var Yx=[];Bx-- >0;)Yx.push(0);return Yx.concat(Ix)}function yx(Ix,Bx){var Yx=Math.max(Ix.length,Bx.length);if(Yx<=30)return fx(Ix,Bx);Yx=Math.ceil(Yx/2);var Qx=Ix.slice(Yx),nE=Ix.slice(0,Yx),Kx=Bx.slice(Yx),dE=Bx.slice(0,Yx),cE=yx(nE,dE),mE=yx(Qx,Kx),xE=yx(ox(nE,Qx),ox(dE,Kx)),OE=ox(ox(cE,gx(cx(cx(xE,cE),mE),Yx)),gx(mE,2*Yx));return Cn(OE),OE}function _x(Ix,Bx){return-.012*Ix-.012*Bx+15e-6*Ix*Bx>0}ar.prototype.multiply=function(Ix){var Bx=TE(Ix),Yx=this.value,Qx=Bx.value,nE=this.sign!==Bx.sign,Kx;if(Bx.isSmall){if(Qx===0)return Ct[0];if(Qx===1)return this;if(Qx===-1)return this.negate();if(Kx=Math.abs(Qx),Kx<l)return new ar(ux(Yx,Kx),nE);Qx=cn(Kx)}return _x(Yx.length,Qx.length)?new ar(yx(Yx,Qx),nE):new ar(fx(Yx,Qx),nE)},ar.prototype.times=ar.prototype.multiply;function vx(Ix,Bx,Yx){return Ix<l?new ar(ux(Bx,Ix),Yx):new ar(fx(Bx,cn(Ix)),Yx)}en.prototype._multiplyBySmall=function(Ix){return on(Ix.value*this.value)?new en(Ix.value*this.value):vx(Math.abs(Ix.value),cn(Math.abs(this.value)),this.sign!==Ix.sign)},ar.prototype._multiplyBySmall=function(Ix){return Ix.value===0?Ct[0]:Ix.value===1?this:Ix.value===-1?this.negate():vx(Math.abs(Ix.value),this.value,this.sign!==Ix.sign)},en.prototype.multiply=function(Ix){return TE(Ix)._multiplyBySmall(this)},en.prototype.times=en.prototype.multiply,tn.prototype.multiply=function(Ix){return new tn(this.value*TE(Ix).value)},tn.prototype.times=tn.prototype.multiply;function bx(Ix){var Bx=Ix.length,Yx=ex(Bx+Bx),Qx=l,nE,Kx,dE,cE,mE;for(dE=0;dE<Bx;dE++){cE=Ix[dE],Kx=0-cE*cE;for(var xE=dE;xE<Bx;xE++)mE=Ix[xE],nE=2*(cE*mE)+Yx[dE+xE]+Kx,Kx=Math.floor(nE/Qx),Yx[dE+xE]=nE-Kx*Qx;Yx[dE+Bx]=Kx}return Cn(Yx),Yx}ar.prototype.square=function(){return new ar(bx(this.value),!1)},en.prototype.square=function(){var Ix=this.value*this.value;return on(Ix)?new en(Ix):new ar(bx(cn(Math.abs(this.value))),!1)},tn.prototype.square=function(Ix){return new tn(this.value*this.value)};function xx(Ix,Bx){var Yx=Ix.length,Qx=Bx.length,nE=l,Kx=ex(Bx.length),dE=Bx[Qx-1],cE=Math.ceil(nE/(2*dE)),mE=ux(Ix,cE),xE=ux(Bx,cE),OE,PE,sE,hE,wE,vE,RE;for(mE.length<=Yx&&mE.push(0),xE.push(0),dE=xE[Qx-1],PE=Yx-Qx;PE>=0;PE--){for(OE=nE-1,mE[PE+Qx]!==dE&&(OE=Math.floor((mE[PE+Qx]*nE+mE[PE+Qx-1])/dE)),sE=0,hE=0,vE=xE.length,wE=0;wE<vE;wE++)sE+=OE*xE[wE],RE=Math.floor(sE/nE),hE+=mE[PE+wE]-(sE-RE*nE),sE=RE,hE<0?(mE[PE+wE]=hE+nE,hE=-1):(mE[PE+wE]=hE,hE=0);for(;hE!==0;){for(OE-=1,sE=0,wE=0;wE<vE;wE++)sE+=mE[PE+wE]-nE+xE[wE],sE<0?(mE[PE+wE]=sE+nE,sE=0):(mE[PE+wE]=sE,sE=1);hE+=sE}Kx[PE]=OE}return mE=Ax(mE,cE)[0],[gn(Kx),gn(mE)]}function Sx(Ix,Bx){for(var Yx=Ix.length,Qx=Bx.length,nE=[],Kx=[],dE=l,cE,mE,xE,OE,PE;Yx;){if(Kx.unshift(Ix[--Yx]),Cn(Kx),Tx(Kx,Bx)<0){nE.push(0);continue}mE=Kx.length,xE=Kx[mE-1]*dE+Kx[mE-2],OE=Bx[Qx-1]*dE+Bx[Qx-2],mE>Qx&&(xE=(xE+1)*dE),cE=Math.ceil(xE/OE);do{if(PE=ux(Bx,cE),Tx(PE,Kx)<=0)break;cE--}while(cE);nE.push(cE),Kx=cx(Kx,PE)}return nE.reverse(),[gn(nE),gn(Kx)]}function Ax(Ix,Bx){var Yx=Ix.length,Qx=ex(Yx),nE=l,Kx,dE,cE,mE;for(cE=0,Kx=Yx-1;Kx>=0;--Kx)mE=cE*nE+Ix[Kx],dE=ix(mE/Bx),cE=mE-dE*Bx,Qx[Kx]=dE|0;return[Qx,cE|0]}function Cx(Ix,Bx){var Yx,Qx=TE(Bx);if(Q)return[new tn(Ix.value/Qx.value),new tn(Ix.value%Qx.value)];var nE=Ix.value,Kx=Qx.value,dE;if(Kx===0)throw new Error("Cannot divide by zero");if(Ix.isSmall)return Qx.isSmall?[new en(ix(nE/Kx)),new en(nE%Kx)]:[Ct[0],Ix];if(Qx.isSmall){if(Kx===1)return[Ix,Ct[0]];if(Kx==-1)return[Ix.negate(),Ct[0]];var cE=Math.abs(Kx);if(cE<l){Yx=Ax(nE,cE),dE=gn(Yx[0]);var mE=Yx[1];return Ix.sign&&(mE=-mE),typeof dE=="number"?(Ix.sign!==Qx.sign&&(dE=-dE),[new en(dE),new en(mE)]):[new ar(dE,Ix.sign!==Qx.sign),new en(mE)]}Kx=cn(cE)}var xE=Tx(nE,Kx);if(xE===-1)return[Ct[0],Ix];if(xE===0)return[Ct[Ix.sign===Qx.sign?1:-1],Ct[0]];nE.length+Kx.length<=200?Yx=xx(nE,Kx):Yx=Sx(nE,Kx),dE=Yx[0];var OE=Ix.sign!==Qx.sign,PE=Yx[1],sE=Ix.sign;return typeof dE=="number"?(OE&&(dE=-dE),dE=new en(dE)):dE=new ar(dE,OE),typeof PE=="number"?(sE&&(PE=-PE),PE=new en(PE)):PE=new ar(PE,sE),[dE,PE]}ar.prototype.divmod=function(Ix){var Bx=Cx(this,Ix);return{quotient:Bx[0],remainder:Bx[1]}},tn.prototype.divmod=en.prototype.divmod=ar.prototype.divmod,ar.prototype.divide=function(Ix){return Cx(this,Ix)[0]},tn.prototype.over=tn.prototype.divide=function(Ix){return new tn(this.value/TE(Ix).value)},en.prototype.over=en.prototype.divide=ar.prototype.over=ar.prototype.divide,ar.prototype.mod=function(Ix){return Cx(this,Ix)[1]},tn.prototype.mod=tn.prototype.remainder=function(Ix){return new tn(this.value%TE(Ix).value)},en.prototype.remainder=en.prototype.mod=ar.prototype.remainder=ar.prototype.mod,ar.prototype.pow=function(Ix){var Bx=TE(Ix),Yx=this.value,Qx=Bx.value,nE,Kx,dE;if(Qx===0)return Ct[1];if(Yx===0)return Ct[0];if(Yx===1)return Ct[1];if(Yx===-1)return Bx.isEven()?Ct[1]:Ct[-1];if(Bx.sign)return Ct[0];if(!Bx.isSmall)throw new Error("The exponent "+Bx.toString()+" is too large.");if(this.isSmall&&on(nE=Math.pow(Yx,Qx)))return new en(ix(nE));for(Kx=this,dE=Ct[1];Qx&!0&&(dE=dE.times(Kx),--Qx),Qx!==0;)Qx/=2,Kx=Kx.square();return dE},en.prototype.pow=ar.prototype.pow,tn.prototype.pow=function(Ix){var Bx=TE(Ix),Yx=this.value,Qx=Bx.value,nE=BigInt(0),Kx=BigInt(1),dE=BigInt(2);if(Qx===nE)return Ct[1];if(Yx===nE)return Ct[0];if(Yx===Kx)return Ct[1];if(Yx===BigInt(-1))return Bx.isEven()?Ct[1]:Ct[-1];if(Bx.isNegative())return new tn(nE);for(var cE=this,mE=Ct[1];(Qx&Kx)===Kx&&(mE=mE.times(cE),--Qx),Qx!==nE;)Qx/=dE,cE=cE.square();return mE},ar.prototype.modPow=function(Ix,Bx){if(Ix=TE(Ix),Bx=TE(Bx),Bx.isZero())throw new Error("Cannot take modPow with modulus 0");var Yx=Ct[1],Qx=this.mod(Bx);for(Ix.isNegative()&&(Ix=Ix.multiply(Ct[-1]),Qx=Qx.modInv(Bx));Ix.isPositive();){if(Qx.isZero())return Ct[0];Ix.isOdd()&&(Yx=Yx.multiply(Qx).mod(Bx)),Ix=Ix.divide(2),Qx=Qx.square().mod(Bx)}return Yx},tn.prototype.modPow=en.prototype.modPow=ar.prototype.modPow;function Tx(Ix,Bx){if(Ix.length!==Bx.length)return Ix.length>Bx.length?1:-1;for(var Yx=Ix.length-1;Yx>=0;Yx--)if(Ix[Yx]!==Bx[Yx])return Ix[Yx]>Bx[Yx]?1:-1;return 0}ar.prototype.compareAbs=function(Ix){var Bx=TE(Ix),Yx=this.value,Qx=Bx.value;return Bx.isSmall?1:Tx(Yx,Qx)},en.prototype.compareAbs=function(Ix){var Bx=TE(Ix),Yx=Math.abs(this.value),Qx=Bx.value;return Bx.isSmall?(Qx=Math.abs(Qx),Yx===Qx?0:Yx>Qx?1:-1):-1},tn.prototype.compareAbs=function(Ix){var Bx=this.value,Yx=TE(Ix).value;return Bx=Bx>=0?Bx:-Bx,Yx=Yx>=0?Yx:-Yx,Bx===Yx?0:Bx>Yx?1:-1},ar.prototype.compare=function(Ix){if(Ix===1/0)return-1;if(Ix===-1/0)return 1;var Bx=TE(Ix),Yx=this.value,Qx=Bx.value;return this.sign!==Bx.sign?Bx.sign?1:-1:Bx.isSmall?this.sign?-1:1:Tx(Yx,Qx)*(this.sign?-1:1)},ar.prototype.compareTo=ar.prototype.compare,en.prototype.compare=function(Ix){if(Ix===1/0)return-1;if(Ix===-1/0)return 1;var Bx=TE(Ix),Yx=this.value,Qx=Bx.value;return Bx.isSmall?Yx==Qx?0:Yx>Qx?1:-1:Yx<0!==Bx.sign?Yx<0?-1:1:Yx<0?1:-1},en.prototype.compareTo=en.prototype.compare,tn.prototype.compare=function(Ix){if(Ix===1/0)return-1;if(Ix===-1/0)return 1;var Bx=this.value,Yx=TE(Ix).value;return Bx===Yx?0:Bx>Yx?1:-1},tn.prototype.compareTo=tn.prototype.compare,ar.prototype.equals=function(Ix){return this.compare(Ix)===0},tn.prototype.eq=tn.prototype.equals=en.prototype.eq=en.prototype.equals=ar.prototype.eq=ar.prototype.equals,ar.prototype.notEquals=function(Ix){return this.compare(Ix)!==0},tn.prototype.neq=tn.prototype.notEquals=en.prototype.neq=en.prototype.notEquals=ar.prototype.neq=ar.prototype.notEquals,ar.prototype.greater=function(Ix){return this.compare(Ix)>0},tn.prototype.gt=tn.prototype.greater=en.prototype.gt=en.prototype.greater=ar.prototype.gt=ar.prototype.greater,ar.prototype.lesser=function(Ix){return this.compare(Ix)<0},tn.prototype.lt=tn.prototype.lesser=en.prototype.lt=en.prototype.lesser=ar.prototype.lt=ar.prototype.lesser,ar.prototype.greaterOrEquals=function(Ix){return this.compare(Ix)>=0},tn.prototype.geq=tn.prototype.greaterOrEquals=en.prototype.geq=en.prototype.greaterOrEquals=ar.prototype.geq=ar.prototype.greaterOrEquals,ar.prototype.lesserOrEquals=function(Ix){return this.compare(Ix)<=0},tn.prototype.leq=tn.prototype.lesserOrEquals=en.prototype.leq=en.prototype.lesserOrEquals=ar.prototype.leq=ar.prototype.lesserOrEquals,ar.prototype.isEven=function(){return(this.value[0]&1)===0},en.prototype.isEven=function(){return(this.value&1)===0},tn.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},ar.prototype.isOdd=function(){return(this.value[0]&1)===1},en.prototype.isOdd=function(){return(this.value&1)===1},tn.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},ar.prototype.isPositive=function(){return!this.sign},en.prototype.isPositive=function(){return this.value>0},tn.prototype.isPositive=en.prototype.isPositive,ar.prototype.isNegative=function(){return this.sign},en.prototype.isNegative=function(){return this.value<0},tn.prototype.isNegative=en.prototype.isNegative,ar.prototype.isUnit=function(){return!1},en.prototype.isUnit=function(){return Math.abs(this.value)===1},tn.prototype.isUnit=function(){return this.abs().value===BigInt(1)},ar.prototype.isZero=function(){return!1},en.prototype.isZero=function(){return this.value===0},tn.prototype.isZero=function(){return this.value===BigInt(0)},ar.prototype.isDivisibleBy=function(Ix){var Bx=TE(Ix);return Bx.isZero()?!1:Bx.isUnit()?!0:Bx.compareAbs(2)===0?this.isEven():this.mod(Bx).isZero()},tn.prototype.isDivisibleBy=en.prototype.isDivisibleBy=ar.prototype.isDivisibleBy;function Px(Ix){var Bx=Ix.abs();if(Bx.isUnit())return!1;if(Bx.equals(2)||Bx.equals(3)||Bx.equals(5))return!0;if(Bx.isEven()||Bx.isDivisibleBy(3)||Bx.isDivisibleBy(5))return!1;if(Bx.lesser(49))return!0}function Fx(Ix,Bx){for(var Yx=Ix.prev(),Qx=Yx,nE=0,Kx,dE,cE;Qx.isEven();)Qx=Qx.divide(2),nE++;e:for(dE=0;dE<Bx.length;dE++)if(!Ix.lesser(Bx[dE])&&(cE=n(Bx[dE]).modPow(Qx,Ix),!(cE.isUnit()||cE.equals(Yx)))){for(Kx=nE-1;Kx!=0;Kx--){if(cE=cE.square().mod(Ix),cE.isUnit())return!1;if(cE.equals(Yx))continue e}return!1}return!0}ar.prototype.isPrime=function(Ix){var Bx=Px(this);if(Bx!==a)return Bx;var Yx=this.abs(),Qx=Yx.bitLength();if(Qx<=64)return Fx(Yx,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var nE=Math.log(2)*Qx.toJSNumber(),Kx=Math.ceil(Ix===!0?2*Math.pow(nE,2):nE),dE=[],cE=0;cE<Kx;cE++)dE.push(n(cE+2));return Fx(Yx,dE)},tn.prototype.isPrime=en.prototype.isPrime=ar.prototype.isPrime,ar.prototype.isProbablePrime=function(Ix,Bx){var Yx=Px(this);if(Yx!==a)return Yx;for(var Qx=this.abs(),nE=Ix===a?5:Ix,Kx=[],dE=0;dE<nE;dE++)Kx.push(n.randBetween(2,Qx.minus(2),Bx));return Fx(Qx,Kx)},tn.prototype.isProbablePrime=en.prototype.isProbablePrime=ar.prototype.isProbablePrime,ar.prototype.modInv=function(Ix){for(var Bx=n.zero,Yx=n.one,Qx=TE(Ix),nE=this.abs(),Kx,dE,cE;!nE.isZero();)Kx=Qx.divide(nE),dE=Bx,cE=Qx,Bx=Yx,Qx=nE,Yx=dE.subtract(Kx.multiply(Yx)),nE=cE.subtract(Kx.multiply(nE));if(!Qx.isUnit())throw new Error(this.toString()+" and "+Ix.toString()+" are not co-prime");return Bx.compare(0)===-1&&(Bx=Bx.add(Ix)),this.isNegative()?Bx.negate():Bx},tn.prototype.modInv=en.prototype.modInv=ar.prototype.modInv,ar.prototype.next=function(){var Ix=this.value;return this.sign?hx(Ix,1,this.sign):new ar(lx(Ix,1),this.sign)},en.prototype.next=function(){var Ix=this.value;return Ix+1<c?new en(Ix+1):new ar(p,!1)},tn.prototype.next=function(){return new tn(this.value+BigInt(1))},ar.prototype.prev=function(){var Ix=this.value;return this.sign?new ar(lx(Ix,1),!0):hx(Ix,1,this.sign)},en.prototype.prev=function(){var Ix=this.value;return Ix-1>-c?new en(Ix-1):new ar(p,!0)},tn.prototype.prev=function(){return new tn(this.value-BigInt(1))};for(var Mx=[1];2*Mx[Mx.length-1]<=l;)Mx.push(2*Mx[Mx.length-1]);var Dx=Mx.length,Ox=Mx[Dx-1];function Lx(Ix){return Math.abs(Ix)<=l}ar.prototype.shiftLeft=function(Ix){var Bx=TE(Ix).toJSNumber();if(!Lx(Bx))throw new Error(String(Bx)+" is too large for shifting.");if(Bx<0)return this.shiftRight(-Bx);var Yx=this;if(Yx.isZero())return Yx;for(;Bx>=Dx;)Yx=Yx.multiply(Ox),Bx-=Dx-1;return Yx.multiply(Mx[Bx])},tn.prototype.shiftLeft=en.prototype.shiftLeft=ar.prototype.shiftLeft,ar.prototype.shiftRight=function(Ix){var Bx,Yx=TE(Ix).toJSNumber();if(!Lx(Yx))throw new Error(String(Yx)+" is too large for shifting.");if(Yx<0)return this.shiftLeft(-Yx);for(var Qx=this;Yx>=Dx;){if(Qx.isZero()||Qx.isNegative()&&Qx.isUnit())return Qx;Bx=Cx(Qx,Ox),Qx=Bx[1].isNegative()?Bx[0].prev():Bx[0],Yx-=Dx-1}return Bx=Cx(Qx,Mx[Yx]),Bx[1].isNegative()?Bx[0].prev():Bx[0]},tn.prototype.shiftRight=en.prototype.shiftRight=ar.prototype.shiftRight;function Nx(Ix,Bx,Yx){Bx=TE(Bx);for(var Qx=Ix.isNegative(),nE=Bx.isNegative(),Kx=Qx?Ix.not():Ix,dE=nE?Bx.not():Bx,cE=0,mE=0,xE=null,OE=null,PE=[];!Kx.isZero()||!dE.isZero();)xE=Cx(Kx,Ox),cE=xE[1].toJSNumber(),Qx&&(cE=Ox-1-cE),OE=Cx(dE,Ox),mE=OE[1].toJSNumber(),nE&&(mE=Ox-1-mE),Kx=xE[0],dE=OE[0],PE.push(Yx(cE,mE));for(var sE=Yx(Qx?1:0,nE?1:0)!==0?n(-1):n(0),hE=PE.length-1;hE>=0;hE-=1)sE=sE.multiply(Ox).add(n(PE[hE]));return sE}ar.prototype.not=function(){return this.negate().prev()},tn.prototype.not=en.prototype.not=ar.prototype.not,ar.prototype.and=function(Ix){return Nx(this,Ix,function(Bx,Yx){return Bx&Yx})},tn.prototype.and=en.prototype.and=ar.prototype.and,ar.prototype.or=function(Ix){return Nx(this,Ix,function(Bx,Yx){return Bx|Yx})},tn.prototype.or=en.prototype.or=ar.prototype.or,ar.prototype.xor=function(Ix){return Nx(this,Ix,function(Bx,Yx){return Bx^Yx})},tn.prototype.xor=en.prototype.xor=ar.prototype.xor;var Gx=1<<30,Ux=(l&-l)*(l&-l)|Gx;function Hx(Ix){var Bx=Ix.value,Yx=typeof Bx=="number"?Bx|Gx:typeof Bx=="bigint"?Bx|BigInt(Gx):Bx[0]+Bx[1]*l|Ux;return Yx&-Yx}function Vx(Ix,Bx){if(Bx.compareTo(Ix)<=0){var Yx=Vx(Ix,Bx.square(Bx)),Qx=Yx.p,nE=Yx.e,Kx=Qx.multiply(Bx);return Kx.compareTo(Ix)<=0?{p:Kx,e:nE*2+1}:{p:Qx,e:nE*2}}return{p:n(1),e:0}}ar.prototype.bitLength=function(){var Ix=this;return Ix.compareTo(n(0))<0&&(Ix=Ix.negate().subtract(n(1))),Ix.compareTo(n(0))===0?n(0):n(Vx(Ix,n(2)).e).add(n(1))},tn.prototype.bitLength=en.prototype.bitLength=ar.prototype.bitLength;function zx(Ix,Bx){return Ix=TE(Ix),Bx=TE(Bx),Ix.greater(Bx)?Ix:Bx}function rE(Ix,Bx){return Ix=TE(Ix),Bx=TE(Bx),Ix.lesser(Bx)?Ix:Bx}function Zx(Ix,Bx){if(Ix=TE(Ix).abs(),Bx=TE(Bx).abs(),Ix.equals(Bx))return Ix;if(Ix.isZero())return Bx;if(Bx.isZero())return Ix;for(var Yx=Ct[1],Qx,nE;Ix.isEven()&&Bx.isEven();)Qx=rE(Hx(Ix),Hx(Bx)),Ix=Ix.divide(Qx),Bx=Bx.divide(Qx),Yx=Yx.multiply(Qx);for(;Ix.isEven();)Ix=Ix.divide(Hx(Ix));do{for(;Bx.isEven();)Bx=Bx.divide(Hx(Bx));Ix.greater(Bx)&&(nE=Bx,Bx=Ix,Ix=nE),Bx=Bx.subtract(Ix)}while(!Bx.isZero());return Yx.isUnit()?Ix:Ix.multiply(Yx)}function eE(Ix,Bx){return Ix=TE(Ix).abs(),Bx=TE(Bx).abs(),Ix.divide(Zx(Ix,Bx)).multiply(Bx)}function oE(Ix,Bx,Yx){Ix=TE(Ix),Bx=TE(Bx);var Qx=Yx||Math.random,nE=rE(Ix,Bx),Kx=zx(Ix,Bx),dE=Kx.subtract(nE).add(1);if(dE.isSmall)return nE.add(Math.floor(Qx()*dE));for(var cE=ME(dE,l).value,mE=[],xE=!0,OE=0;OE<cE.length;OE++){var PE=xE?cE[OE]+(OE+1<cE.length?cE[OE+1]/l:0):l,sE=ix(Qx()*PE);mE.push(sE),sE<cE[OE]&&(xE=!1)}return nE.add(Ct.fromArray(mE,l,!1))}var iE=function(Ix,Bx,Yx,Qx){Yx=Yx||d,Ix=String(Ix),Qx||(Ix=Ix.toLowerCase(),Yx=Yx.toLowerCase());var nE=Ix.length,Kx,dE=Math.abs(Bx),cE={};for(Kx=0;Kx<Yx.length;Kx++)cE[Yx[Kx]]=Kx;for(Kx=0;Kx<nE;Kx++){var mE=Ix[Kx];if(mE!=="-"&&mE in cE&&cE[mE]>=dE){if(mE==="1"&&dE===1)continue;throw new Error(mE+" is not a valid digit in base "+Bx+".")}}Bx=TE(Bx);var xE=[],OE=Ix[0]==="-";for(Kx=OE?1:0;Kx<Ix.length;Kx++){var mE=Ix[Kx];if(mE in cE)xE.push(TE(cE[mE]));else if(mE==="<"){var PE=Kx;do Kx++;while(Ix[Kx]!==">"&&Kx<Ix.length);xE.push(TE(Ix.slice(PE+1,Kx)))}else throw new Error(mE+" is not a valid character")}return Wx(xE,Bx,OE)};function Wx(Ix,Bx,Yx){var Qx=Ct[0],nE=Ct[1],Kx;for(Kx=Ix.length-1;Kx>=0;Kx--)Qx=Qx.add(Ix[Kx].times(nE)),nE=nE.times(Bx);return Yx?Qx.negate():Qx}function AE(Ix,Bx){return Bx=Bx||d,Ix<Bx.length?Bx[Ix]:"<"+Ix+">"}function ME(Ix,Bx){if(Bx=n(Bx),Bx.isZero()){if(Ix.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(Bx.equals(-1)){if(Ix.isZero())return{value:[0],isNegative:!1};if(Ix.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-Ix.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var Yx=Array.apply(null,Array(Ix.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return Yx.unshift([1]),{value:[].concat.apply([],Yx),isNegative:!1}}var Qx=!1;if(Ix.isNegative()&&Bx.isPositive()&&(Qx=!0,Ix=Ix.abs()),Bx.isUnit())return Ix.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(Ix.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Qx};for(var nE=[],Kx=Ix,dE;Kx.isNegative()||Kx.compareAbs(Bx)>=0;){dE=Kx.divmod(Bx),Kx=dE.quotient;var cE=dE.remainder;cE.isNegative()&&(cE=Bx.minus(cE).abs(),Kx=Kx.next()),nE.push(cE.toJSNumber())}return nE.push(Kx.toJSNumber()),{value:nE.reverse(),isNegative:Qx}}function EE(Ix,Bx,Yx){var Qx=ME(Ix,Bx);return(Qx.isNegative?"-":"")+Qx.value.map(function(nE){return AE(nE,Yx)}).join("")}ar.prototype.toArray=function(Ix){return ME(this,Ix)},en.prototype.toArray=function(Ix){return ME(this,Ix)},tn.prototype.toArray=function(Ix){return ME(this,Ix)},ar.prototype.toString=function(Ix,Bx){if(Ix===a&&(Ix=10),Ix!==10||Bx)return EE(this,Ix,Bx);for(var Yx=this.value,Qx=Yx.length,nE=String(Yx[--Qx]),Kx="0000000",dE;--Qx>=0;)dE=String(Yx[Qx]),nE+=Kx.slice(dE.length)+dE;var cE=this.sign?"-":"";return cE+nE},en.prototype.toString=function(Ix,Bx){return Ix===a&&(Ix=10),Ix!=10||Bx?EE(this,Ix,Bx):String(this.value)},tn.prototype.toString=en.prototype.toString,tn.prototype.toJSON=ar.prototype.toJSON=en.prototype.toJSON=function(){return this.toString()},ar.prototype.valueOf=function(){return parseInt(this.toString(),10)},ar.prototype.toJSNumber=ar.prototype.valueOf,en.prototype.valueOf=function(){return this.value},en.prototype.toJSNumber=en.prototype.valueOf,tn.prototype.valueOf=tn.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function bE(Ix){if(on(+Ix)){var Bx=+Ix;if(Bx===ix(Bx))return Q?new tn(BigInt(Bx)):new en(Bx);throw new Error("Invalid integer: "+Ix)}var Yx=Ix[0]==="-";Yx&&(Ix=Ix.slice(1));var Qx=Ix.split(/e/i);if(Qx.length>2)throw new Error("Invalid integer: "+Qx.join("e"));if(Qx.length===2){var nE=Qx[1];if(nE[0]==="+"&&(nE=nE.slice(1)),nE=+nE,nE!==ix(nE)||!on(nE))throw new Error("Invalid integer: "+nE+" is not a valid exponent.");var Kx=Qx[0],dE=Kx.indexOf(".");if(dE>=0&&(nE-=Kx.length-dE-1,Kx=Kx.slice(0,dE)+Kx.slice(dE+1)),nE<0)throw new Error("Cannot include negative exponent part for integers");Kx+=new Array(nE+1).join("0"),Ix=Kx}var cE=/^([0-9][0-9]*)$/.test(Ix);if(!cE)throw new Error("Invalid integer: "+Ix);if(Q)return new tn(BigInt(Yx?"-"+Ix:Ix));for(var mE=[],xE=Ix.length,OE=u,PE=xE-OE;xE>0;)mE.push(+Ix.slice(PE,xE)),PE-=OE,PE<0&&(PE=0),xE-=OE;return Cn(mE),new ar(mE,Yx)}function kE(Ix){if(Q)return new tn(BigInt(Ix));if(on(Ix)){if(Ix!==ix(Ix))throw new Error(Ix+" is not an integer.");return new en(Ix)}return bE(Ix.toString())}function TE(Ix){return typeof Ix=="number"?kE(Ix):typeof Ix=="string"?bE(Ix):typeof Ix=="bigint"?new tn(Ix):Ix}for(var jE=0;jE<1e3;jE++)Ct[jE]=TE(jE),jE>0&&(Ct[-jE]=TE(-jE));return Ct.one=Ct[1],Ct.zero=Ct[0],Ct.minusOne=Ct[-1],Ct.max=zx,Ct.min=rE,Ct.gcd=Zx,Ct.lcm=eE,Ct.isInstance=function(Ix){return Ix instanceof ar||Ix instanceof en||Ix instanceof tn},Ct.randBetween=oE,Ct.fromArray=function(Ix,Bx,Yx){return Wx(Ix.map(TE),TE(Bx||10),Yx)},Ct}();t.hasOwnProperty("exports")&&(t.exports=n)}(BigInteger)),BigInteger.exports}var hasRequiredAlgebrite;function requireAlgebrite(){return hasRequiredAlgebrite||(hasRequiredAlgebrite=1,function(exports){(function(){var $,ABS,ADD,ADJ,AND,APPROXRATIO,ARCCOS,ARCCOSH,ARCSIN,ARCSINH,ARCTAN,ARCTANH,ARG,ASSUME_REAL_VARIABLES,ATOMIZE,AUTOEXPAND,BAKE,BESSELJ,BESSELY,BINDING,BINOMIAL,BINOM_check_args,C1,C2,C3,C4,C5,C6,CEILING,CHECK,CHOOSE,CIRCEXP,CLEAR,CLEARALL,CLEARPATTERNS,CLOCK,COEFF,COFACTOR,CONDENSE,CONJ,CONS,CONTRACT,COS,COSH,Condense,DEBUG,DEBUG_ABS,DEBUG_ARG,DEBUG_CLOCKFORM,DEBUG_IMAG,DEBUG_IS,DEBUG_MULTIPLY,DEBUG_POWER,DEBUG_RATIONALIZE,DEBUG_RECT,DEBUG_SIMPLIFY,DECOMP,DEFINT,DEGREE,DENOMINATOR,DERIVATIVE,DET,DET_check_arg,DIM,DIRAC,DIVISORS,DO,DOT,DOUBLE,DRAW,DRAWX,DSOLVE,E,EIGEN,EIGENVAL,EIGENVEC,EIG_N,EIG_check_arg,EIG_yydd,EIG_yyqq,ERF,ERFC,EVAL,EXP,EXPAND,EXPCOS,EXPSIN,Eval,Eval_Eval,Eval_abs,Eval_add,Eval_adj,Eval_and,Eval_approxratio,Eval_arccos,Eval_arccosh,Eval_arcsin,Eval_arcsinh,Eval_arctan,Eval_arctanh,Eval_arg,Eval_besselj,Eval_bessely,Eval_binding,Eval_binomial,Eval_ceiling,Eval_check,Eval_choose,Eval_circexp,Eval_clear,Eval_clearall,Eval_clearpatterns,Eval_clock,Eval_coeff,Eval_cofactor,Eval_condense,Eval_conj,Eval_cons,Eval_contract,Eval_cos,Eval_cosh,Eval_decomp,Eval_defint,Eval_degree,Eval_denominator,Eval_derivative,Eval_det,Eval_dim,Eval_dirac,Eval_divisors,Eval_do,Eval_dsolve,Eval_eigen,Eval_eigenval,Eval_eigenvec,Eval_erf,Eval_erfc,Eval_exp,Eval_expand,Eval_expcos,Eval_expsin,Eval_factor,Eval_factorial,Eval_factorpoly,Eval_filter,Eval_float,Eval_floor,Eval_for,Eval_function_reference,Eval_gamma,Eval_gcd,Eval_hermite,Eval_hilbert,Eval_imag,Eval_index,Eval_inner,Eval_integral,Eval_inv,Eval_invg,Eval_isinteger,Eval_isprime,Eval_laguerre,Eval_lcm,Eval_leading,Eval_legendre,Eval_log,Eval_lookup,Eval_mod,Eval_multiply,Eval_not,Eval_nroots,Eval_number,Eval_numerator,Eval_operator,Eval_or,Eval_outer,Eval_pattern,Eval_patternsinfo,Eval_polar,Eval_power,Eval_predicate,Eval_prime,Eval_print,Eval_print2dascii,Eval_printcomputer,Eval_printhuman,Eval_printlatex,Eval_printlist,Eval_product,Eval_quote,Eval_quotient,Eval_rank,Eval_rationalize,Eval_real,Eval_rect,Eval_roots,Eval_round,Eval_setq,Eval_sgn,Eval_shape,Eval_silentpattern,Eval_simplify,Eval_sin,Eval_sinh,Eval_sqrt,Eval_stop,Eval_subst,Eval_sum,Eval_sym,Eval_symbolsinfo,Eval_tan,Eval_tanh,Eval_taylor,Eval_tensor,Eval_test,Eval_testeq,Eval_testge,Eval_testgt,Eval_testle,Eval_testlt,Eval_transpose,Eval_unit,Eval_user_function,Eval_zero,Evalpoly,FACTOR,FACTORIAL,FACTORPOLY,FILTER,FLOATF,FLOOR,FOR,FORCE_FIXED_PRINTOUT,FUNCTION,Find,GAMMA,GCD,HERMITE,HILBERT,IMAG,INDEX,INNER,INTEGRAL,INV,INVG,INV_check_arg,INV_decomp,ISINTEGER,ISPRIME,LAGUERRE,LAST,LAST_2DASCII_PRINT,LAST_FULL_PRINT,LAST_LATEX_PRINT,LAST_LIST_PRINT,LAST_PLAIN_PRINT,LAST_PRINT,LCM,LEADING,LEGENDRE,LOG,LOOKUP,M,MAXDIM,MAXPRIMETAB,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE,MAX_FIXED_PRINTOUT_DIGITS,MEQUAL,METAA,METAB,METAX,MOD,MSIGN,MULTIPLY,MZERO,N,NIL,NOT,NROOTS,NROOTS_ABS,NROOTS_DELTA,NROOTS_EPSILON,NROOTS_RANDOM,NROOTS_YMAX,NROOTS_divpoly,NSYM,NUM,NUMBER,NUMERATOR,OPERATOR,OR,OUTER,PATTERN,PATTERNSINFO,PI,POLAR,POWER,PRIME,PRINT,PRINT2DASCII,PRINTFULL,PRINTLATEX,PRINTLIST,PRINTMODE_2DASCII,PRINTMODE_COMPUTER,PRINTMODE_HUMAN,PRINTMODE_LATEX,PRINTMODE_LIST,PRINTOUTRESULT,PRINTPLAIN,PRINT_LEAVE_E_ALONE,PRINT_LEAVE_X_ALONE,PRODUCT,QUOTE,QUOTIENT,RANK,RATIONALIZE,REAL,ROOTS,ROUND,SECRETX,SETQ,SGN,SHAPE,SILENTPATTERN,SIMPLIFY,SIN,SINH,SPACE_BETWEEN_COLUMNS,SPACE_BETWEEN_ROWS,SQRT,STOP,STR,SUBST,SUM,SYM,SYMBOLSINFO,SYMBOL_A,SYMBOL_A_UNDERSCORE,SYMBOL_B,SYMBOL_B_UNDERSCORE,SYMBOL_C,SYMBOL_D,SYMBOL_I,SYMBOL_IDENTITY_MATRIX,SYMBOL_J,SYMBOL_N,SYMBOL_R,SYMBOL_S,SYMBOL_T,SYMBOL_X,SYMBOL_X_UNDERSCORE,SYMBOL_Y,SYMBOL_Z,TAN,TANH,TAYLOR,TENSOR,TEST,TESTEQ,TESTGE,TESTGT,TESTLE,TESTLT,TIMING_DEBUGS,TOS,TRACE,TRANSPOSE,T_DOUBLE,T_EQ,T_FUNCTION,T_GTEQ,T_INTEGER,T_LTEQ,T_NEQ,T_NEWLINE,T_QUOTASSIGN,T_STRING,T_SYMBOL,U,UNIT,VERSION,YMAX,YYE,YYRECT,ZERO,__emit_char,__emit_str,__factor_add,__factorial,__is_negative,__is_radical_number,__lcm,__legendre,__legendre2,__legendre3,__normalize_radical_factors,__rationalize_tensor,_print,abs,absValFloat,absval,absval_tensor,add,addSymbolLeftOfAssignment,addSymbolRightOfAssignment,add_all,add_factor_to_accumulator,add_numbers,add_terms,adj,alloc_tensor,allocatedId,any_denominators,approxAll,approxLogs,approxLogsOfRationals,approxOneRatioOnly,approxRadicals,approxRadicalsOfRationals,approxRationalsOfLogs,approxRationalsOfPowersOfE,approxRationalsOfPowersOfPI,approxRationalsOfRadicals,approxSineOfRationalMultiplesOfPI,approxSineOfRationals,approxTrigonometric,approx_just_an_integer,approx_logarithmsOfRationals,approx_radicalOfRatio,approx_ratioOfRadical,approx_rationalOfE,approx_rationalOfPi,approx_rationalsOfLogarithms,approx_sine_of_pi_times_rational,approx_sine_of_rational,approxratioRecursive,arccos,arccosh,arcsin,arcsinh,arctan,arctanh,areunivarpolysfactoredorexpandedform,arg,assignmentFound,avoidCalculatingPowersIntoArctans,bake,bake_poly,bake_poly_term,besselj,bessely,bigInt,bignum_factorial,bignum_float,bignum_power_number,bignum_scan_float,bignum_scan_integer,bignum_truncate,binding,binomial,build_tensor,caaddr,caadr,caar,cadaddr,cadadr,cadar,caddaddr,caddadr,caddar,caddddr,cadddr,caddr,cadr,car,cdaddr,cdadr,cdar,cddaddr,cddar,cdddaddr,cddddr,cdddr,cddr,cdr,ceiling,chainOfUserSymbolsNotFunctionsBeingEvaluated,charTabIndex,chartab,check_esc_flag,check_stack,check_tensor_dimensions,choose,choose_check_args,circexp,clearAlgebraEnvironment,clearRenamedVariablesToAvoidBindingToExternalScope,clear_symbols,clear_term,clockform,cmpGlyphs,cmp_args,cmp_expr,cmp_terms,codeGen,coeff,cofactor,collectLatexStringFromReturnValue,collectUserSymbols,combine_factors,combine_terms,compare_numbers,compare_rationals,compare_tensors,compatible,computeDependenciesFromAlgebra,computeResultsAndJavaScriptFromAlgebra,compute_fa,conjugate,cons,consCount,contract,convert_rational_to_double,copy_tensor,cosine,cosine_of_angle,cosine_of_angle_sum,count,countOccurrencesOfSymbol,count_denominators,counter,countsize,d_scalar_scalar,d_scalar_scalar_1,d_scalar_tensor,d_tensor_scalar,d_tensor_tensor,dabs,darccos,darccosh,darcsin,darcsinh,darctan,darctanh,dbesselj0,dbesseljn,dbessely0,dbesselyn,dcos,dcosh,dd,decomp,decomp_product,decomp_sum,defineSomeHandyConstants,define_user_function,defn,defn_str,degree,denominator,derf,derfc,derivative,derivative_of_integral,det,determinant,dfunction,dhermite,dirac,divide,divide_numbers,divisors,divisors_onstack,divpoly,dlog,do_clearPatterns,do_clearall,do_simplify_nested_radicals,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication,dotprod_unicode,doubleToReasonableString,dpow,dpower,dproduct,dsgn,dsin,dsinh,dsum,dtan,dtanh,dupl,eigen,elelmIndex,elem,emit_denominator,emit_denominators,emit_expr,emit_factor,emit_factorial_function,emit_flat_tensor,emit_fraction,emit_function,emit_index_function,emit_multiply,emit_number,emit_numerators,emit_numerical_fraction,emit_power,emit_string,emit_subexpr,emit_symbol,emit_tensor,emit_tensor_inner,emit_term,emit_top_expr,emit_unsigned_expr,emit_x,equal,equaln,equalq,erfc,errorMessage,esc_flag,evaluatingAsFloats,evaluatingPolar,exec,expand,expand_get_A,expand_get_AF,expand_get_B,expand_get_C,expand_get_CF,expand_tensor,expanding,expcos,exponential,expr_level,expsin,f1,f10,f2,f3,f4,f5,f9,f_equals_a,factor,factor_a,factor_again,factor_b,factor_number,factor_small_number,factor_term,factorial,factorpoly,factors,filter,filter_main,filter_sum,filter_tensor,findDependenciesInScript,findPossibleClockForm,findPossibleExponentialForm,findroot,fixup_fraction,fixup_power,flag,floatToRatioRoutine,frame,functionInvokationsScanningStack,gamma,gamma_of_sum,gammaf,gcd,gcd_main,gcd_numbers,gcd_polys,gcd_powers_with_same_base,gcd_product_product,gcd_product_sum,gcd_sum,gcd_sum_product,gcd_sum_sum,gen,getSimpleRoots,get_binding,get_factor_from_complex_root,get_factor_from_real_root,get_innerprod_factors,get_next_token,get_printname,get_size,get_token,glyph,guess,hasImaginaryCoeff,hasNegativeRationalExponent,hash_addition,hash_function,hash_multiplication,hash_power,hashcode_values,hashed_itab,hermite,hilbert,i1,imag,imaginaryunit,index_function,init,initNRoots,inited,inner,inner_f,input_str,integral,integral_of_form,integral_of_product,integral_of_sum,inv,inverse,invert_number,invg,isNumberOneOverSomething,isNumericAtom,isNumericAtomOrTensor,isSimpleRoot,isSmall,isSymbolLeftOfAssignment,isSymbolReclaimable,isZeroAtom,isZeroAtomOrTensor,isZeroLikeOrNonZeroLikeOrUndetermined,isZeroTensor,is_denominator,is_factor,is_small_integer,is_usr_symbol,isadd,isalnumorunderscore,isalpha,isalphaOrUnderscore,iscomplexnumber,iscomplexnumberdouble,iscons,isdenominator,isdigit,isdouble,iseveninteger,isfactor,isfactorial,isfloating,isfraction,isidentitymatrix,isimaginarynumber,isimaginarynumberdouble,isimaginaryunit,isinnerordot,isinteger,isintegerfactor,isintegerorintegerfloat,isinv,iskeyword,isminusone,isminusoneoversqrttwo,isminusoneovertwo,isminussqrtthreeovertwo,ismultiply,isnegative,isnegativenumber,isnegativeterm,isnonnegativeinteger,isnpi,isone,isoneover,isoneoversqrttwo,isoneovertwo,isplusone,isplustwo,ispolyexpandedform,ispolyexpandedform_expr,ispolyexpandedform_factor,ispolyexpandedform_term,ispolyfactoredorexpandedform,ispolyfactoredorexpandedform_factor,ispolyfactoredorexpandedform_power,isposint,ispositivenumber,ispower,isquarterturn,isrational,isspace,issqrtthree,issqrtthreeovertwo,isstr,issymbol,issymbolic,istensor,istranspose,isunivarpolyfactoredorexpandedform,itab,italu_hashcode,j1,laguerre,laguerre2,lastFoundSymbol,latexErrorSign,lcm,leading,legendre,length,lessp,level,list,logarithm,lookupsTotal,lu_decomp,madd,makePositive,makeSignSameAs,make_hashed_itab,mcmp,mdiv,mdivrem,meta_mode,mgcd,mini_solve,mint,mmod,mmul,mod,monic,move,moveTos,mp_denominator,mp_numerator,mpow,mprime,mroot,msub,multinomial_sum,multiply,multiply_all,multiply_all_noexpand,multiply_consecutive_constants,multiply_denominators,multiply_denominators_factor,multiply_denominators_term,multiply_noexpand,multiply_numbers,n_factor_number,negate,negate_noexpand,negate_number,new_integer,new_string,newline_flag,nil_symbols,normaliseDots,normalisedCoeff,normalize_angle,nroots_a,nroots_b,nroots_c,nroots_df,nroots_dx,nroots_fa,nroots_fb,nroots_x,nroots_y,nterms,numerator,numericRootOfPolynomial,o,one,oneElement,one_as_double,outer,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,parse,parse_internal,parse_p1,parse_p2,parse_time_simplifications,partition,patternHasBeenFound,patternsinfo,polar,polarRectAMinusOneBase,polyform,pop,pop_double,pop_frame,pop_integer,power,power_str,power_sum,power_tensor,predefinedSymbolsInGlobalScope_doNotTrackInDependencies,prime,primetab,print2dascii,printMode,print_ABS_latex,print_ARCCOS_codegen,print_ARCSIN_codegen,print_ARCTAN_codegen,print_BINOMIAL_latex,print_COS_codegen,print_DEFINT_latex,print_DOT_codegen,print_DOT_latex,print_DO_codegen,print_FOR_codegen,print_INV_codegen,print_INV_latex,print_PRODUCT_codegen,print_PRODUCT_latex,print_SETQ_codegen,print_SIN_codegen,print_SQRT_latex,print_SUM_codegen,print_SUM_latex,print_TAN_codegen,print_TESTEQ_latex,print_TESTGE_latex,print_TESTGT_latex,print_TESTLE_latex,print_TESTLT_latex,print_TEST_codegen,print_TEST_latex,print_TRANSPOSE_codegen,print_TRANSPOSE_latex,print_UNIT_codegen,print_a_over_b,print_base_of_denom,print_char,print_denom,print_expo_of_denom,print_expr,print_factor,print_factorial_function,print_glyphs,print_index_function,print_list,print_multiply_sign,print_number,print_power,print_str,print_subexpr,print_tensor,print_tensor_inner,print_tensor_inner_latex,print_tensor_latex,print_term,printchar,printchar_nowrap,printline,promote_tensor,push,pushTryNotToDuplicate,push_double,push_factor,push_frame,push_integer,push_rational,push_symbol,push_term_factors,push_terms,push_zero_matrix,qadd,qdiv,qmul,qpow,qpowf,quickfactor,quickpower,rational,rationalize,rationalize_coefficients,real,reciprocate,rect,recursionLevelNestedRadicalsRemoval,recursiveDependencies,ref,ref1,rememberPrint,remove_negative_exponents,reset_after_error,restore,restoreMetaBindings,rewrite_args,rewrite_args_tensor,roots,roots2,roots3,run,runUserDefinedSimplifications,save,saveMetaBindings,scalar_times_tensor,scan,scan_error,scan_expression,scan_factor,scan_function_call_with_function_name,scan_function_call_without_function_name,scan_index,scan_meta,scan_power,scan_relation,scan_stmt,scan_str,scan_string,scan_subexpr,scan_symbol,scan_tensor,scan_term,scanned,scanningParameters,setM,setSignTo,set_binding,set_component,setq_indexed,sgn,shape,sign,sign_of_term,simfac,simfac_term,simpleComplexityMeasure,simplify,simplifyForCodeGeneration,simplify_1_in_products,simplify_main,simplify_nested_radicals,simplify_polar,simplify_polarRect,simplify_rational_expressions,simplify_rectToClock,simplify_tensor,simplify_trig,sine,sine_of_angle,sine_of_angle_sum,skipRootVariableToBeSolved,sort_stack,square,stack,stackAddsCount,std_symbol,step,step2,stop,strcmp,stringsEmittedByUserPrintouts,subst,subtract,swap,symbol,symbolsDependencies,symbolsHavingReassignments,symbolsInExpressionsWithoutAssignments,symbolsLeftOfAssignment,symbolsRightOfAssignment,symbolsinfo,symnum,symtab,take_care_of_nested_radicals,tangent,taylor,tensor,tensor_plus_tensor,tensor_times_scalar,testApprox,test_flag,token,token_buf,token_str,top,top_level_eval,tos,transform,transpose,transpose_unicode,trigmode,trivial_divide,try_kth_prime,turnErrorMessageToLatex,update_token_buf,userSimplificationsInListForm,userSimplificationsInStringForm,usr_symbol,version,will_be_displayed_as_fraction,ybinomial,ycosh,ydirac,yerf,yerfc,yfloor,yindex,yround,ysinh,yyarg,yybesselj,yybessely,yyceiling,yycondense,yycontract,yycosh,yydegree,yydetg,yydivpoly,yyerf,yyerfc,yyexpand,yyfactorpoly,yyfloat,yyfloor,yyhermite,yyhermite2,yyinvg,yylcm,yylog,yymultiply,yyouter,yypower,yyrationalize,yyround,yysgn,yysimfac,yysinh,yytangent,zero,zzfloat,hasProp={}.hasOwnProperty;for(bigInt=requireBigInteger(),version="1.4.0",NSYM=1e3,DEBUG=!1,PRINTOUTRESULT=!1,PRINTMODE_LATEX="PRINTMODE_LATEX",PRINTMODE_2DASCII="PRINTMODE_2DASCII",PRINTMODE_COMPUTER="PRINTMODE_COMPUTER",PRINTMODE_HUMAN="PRINTMODE_HUMAN",PRINTMODE_LIST="PRINTMODE_LIST",printMode=PRINTMODE_COMPUTER,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0,recursionLevelNestedRadicalsRemoval=0,do_simplify_nested_radicals=!0,avoidCalculatingPowersIntoArctans=!0,rational=(function(){class t{}return t.prototype.a=null,t.prototype.b=null,t}).call(this),U=(function(){class t{toString(){return print_expr(this)}toLatexString(){return collectLatexStringFromReturnValue(this)}constructor(){this.cons={},this.cons.car=null,this.cons.cdr=null,this.q=new rational}}return t.prototype.cons=null,t.prototype.printname="",t.prototype.str="",t.prototype.tensor=null,t.prototype.q=null,t.prototype.d=0,t.prototype.k=0,t.prototype.tag=0,t}).call(this),errorMessage="",CONS=0,NUM=1,DOUBLE=2,STR=3,TENSOR=4,SYM=5,counter=0,ABS=counter++,ADD=counter++,ADJ=counter++,AND=counter++,APPROXRATIO=counter++,ARCCOS=counter++,ARCCOSH=counter++,ARCSIN=counter++,ARCSINH=counter++,ARCTAN=counter++,ARCTANH=counter++,ARG=counter++,ATOMIZE=counter++,BESSELJ=counter++,BESSELY=counter++,BINDING=counter++,BINOMIAL=counter++,CEILING=counter++,CHECK=counter++,CHOOSE=counter++,CIRCEXP=counter++,CLEAR=counter++,CLEARALL=counter++,CLEARPATTERNS=counter++,CLOCK=counter++,COEFF=counter++,COFACTOR=counter++,CONDENSE=counter++,CONJ=counter++,CONTRACT=counter++,COS=counter++,COSH=counter++,DECOMP=counter++,DEFINT=counter++,DEGREE=counter++,DENOMINATOR=counter++,DERIVATIVE=counter++,DET=counter++,DIM=counter++,DIRAC=counter++,DIVISORS=counter++,DO=counter++,DOT=counter++,DRAW=counter++,DSOLVE=counter++,EIGEN=counter++,EIGENVAL=counter++,EIGENVEC=counter++,ERF=counter++,ERFC=counter++,EVAL=counter++,EXP=counter++,EXPAND=counter++,EXPCOS=counter++,EXPSIN=counter++,FACTOR=counter++,FACTORIAL=counter++,FACTORPOLY=counter++,FILTER=counter++,FLOATF=counter++,FLOOR=counter++,FOR=counter++,FUNCTION=counter++,GAMMA=counter++,GCD=counter++,HERMITE=counter++,HILBERT=counter++,IMAG=counter++,INDEX=counter++,INNER=counter++,INTEGRAL=counter++,INV=counter++,INVG=counter++,ISINTEGER=counter++,ISPRIME=counter++,LAGUERRE=counter++,LCM=counter++,LEADING=counter++,LEGENDRE=counter++,LOG=counter++,LOOKUP=counter++,MOD=counter++,MULTIPLY=counter++,NOT=counter++,NROOTS=counter++,NUMBER=counter++,NUMERATOR=counter++,OPERATOR=counter++,OR=counter++,OUTER=counter++,PATTERN=counter++,PATTERNSINFO=counter++,POLAR=counter++,POWER=counter++,PRIME=counter++,PRINT_LEAVE_E_ALONE=counter++,PRINT_LEAVE_X_ALONE=counter++,PRINT=counter++,PRINT2DASCII=counter++,PRINTFULL=counter++,PRINTLATEX=counter++,PRINTLIST=counter++,PRINTPLAIN=counter++,PRODUCT=counter++,QUOTE=counter++,QUOTIENT=counter++,RANK=counter++,RATIONALIZE=counter++,REAL=counter++,ROUND=counter++,YYRECT=counter++,ROOTS=counter++,SETQ=counter++,SGN=counter++,SILENTPATTERN=counter++,SIMPLIFY=counter++,SIN=counter++,SINH=counter++,SHAPE=counter++,SQRT=counter++,STOP=counter++,SUBST=counter++,SUM=counter++,SYMBOLSINFO=counter++,TAN=counter++,TANH=counter++,TAYLOR=counter++,TEST=counter++,TESTEQ=counter++,TESTGE=counter++,TESTGT=counter++,TESTLE=counter++,TESTLT=counter++,TRANSPOSE=counter++,UNIT=counter++,ZERO=counter++,NIL=counter++,LAST=counter++,LAST_PRINT=counter++,LAST_2DASCII_PRINT=counter++,LAST_FULL_PRINT=counter++,LAST_LATEX_PRINT=counter++,LAST_LIST_PRINT=counter++,LAST_PLAIN_PRINT=counter++,AUTOEXPAND=counter++,BAKE=counter++,ASSUME_REAL_VARIABLES=counter++,TRACE=counter++,FORCE_FIXED_PRINTOUT=counter++,MAX_FIXED_PRINTOUT_DIGITS=counter++,YYE=counter++,DRAWX=counter++,METAA=counter++,METAB=counter++,METAX=counter++,SECRETX=counter++,VERSION=counter++,PI=counter++,SYMBOL_A=counter++,SYMBOL_B=counter++,SYMBOL_C=counter++,SYMBOL_D=counter++,SYMBOL_I=counter++,SYMBOL_J=counter++,SYMBOL_N=counter++,SYMBOL_R=counter++,SYMBOL_S=counter++,SYMBOL_T=counter++,SYMBOL_X=counter++,SYMBOL_Y=counter++,SYMBOL_Z=counter++,SYMBOL_IDENTITY_MATRIX=counter++,SYMBOL_A_UNDERSCORE=counter++,SYMBOL_B_UNDERSCORE=counter++,SYMBOL_X_UNDERSCORE=counter++,C1=counter++,C2=counter++,C3=counter++,C4=counter++,C5=counter++,C6=counter++,counter++,E=YYE,TOS=1e5,MAXPRIMETAB=1e4,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10,MAXDIM=24,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"],parse_time_simplifications=!0,chainOfUserSymbolsNotFunctionsBeingEvaluated=[],stringsEmittedByUserPrintouts="",tensor=(function(){class t{constructor(){this.dim=function(){var a,l,u;for(u=[],a=0,l=MAXDIM;0<=l?a<=l:a>=l;0<=l?a++:a--)u.push(0);return u}(),this.elem=[]}}return t.prototype.ndim=0,t.prototype.dim=null,t.prototype.nelem=0,t.prototype.elem=null,t}).call(this),(function(){class t{}return t.prototype.h=0,t.prototype.w=0,t.prototype.n=0,t.prototype.a=[],t}).call(this),(function(){class t{}return t.prototype.ascent=0,t.prototype.descent=0,t.prototype.width=0,t}).call(this),tos=0,expanding=0,evaluatingAsFloats=0,evaluatingPolar=0,primetab=function(){var t,n,a,l;for(l=[2],n=3;l.length<MAXPRIMETAB;){for(a=0,t=Math.sqrt(n);a<l.length&&l[a]<=t;){if(n%l[a]===0){a=-1;break}a++}a!==-1&&l.push(n),n+=2}return l[MAXPRIMETAB]=0,l}(),esc_flag=0,trigmode=0,symtab=[],binding=[],isSymbolReclaimable=[],stack=[],frame=0,p0=null,p1=null,p2=null,p3=null,p4=null,p5=null,p6=null,p7=null,p8=null,p9=null,zero=null,one=null,one_as_double=null,imaginaryunit=null,test_flag=0,codeGen=!1,userSimplificationsInListForm=[],userSimplificationsInStringForm=[],transpose_unicode=7488,dotprod_unicode=183,symbol=function(t){return symtab[t]},iscons=function(t){return t.k===CONS},isrational=function(t){return t.k===NUM},isdouble=function(t){return t.k===DOUBLE},isNumericAtom=function(t){return isrational(t)||isdouble(t)},isstr=function(t){return t.k===STR},istensor=function(t){if(t==null)debugger;else return t.k===TENSOR},isNumericAtomOrTensor=function(t){var n,a,l,u,c;if(isNumericAtom(t)||t===symbol(SYMBOL_IDENTITY_MATRIX))return 1;if(!istensor(t)&&!isNumericAtom(t))return 0;for(l=t.tensor.nelem,n=t.tensor.elem,a=u=0,c=l;0<=c?u<c:u>c;a=0<=c?++u:--u)if(!isNumericAtomOrTensor(n[a]))return 0;return 1},issymbol=function(t){return t.k===SYM},iskeyword=function(t){return issymbol(t)&&symnum(t)<NIL},car=function(t){return iscons(t)?t.cons.car:symbol(NIL)},cdr=function(t){return iscons(t)?t.cons.cdr:symbol(NIL)},caar=function(t){return car(car(t))},cadr=function(t){return car(cdr(t))},cdar=function(t){return cdr(car(t))},cddr=function(t){return cdr(cdr(t))},caadr=function(t){return car(car(cdr(t)))},caddr=function(t){return car(cdr(cdr(t)))},cadar=function(t){return car(cdr(car(t)))},cdadr=function(t){return cdr(car(cdr(t)))},cddar=function(t){return cdr(cdr(car(t)))},cdddr=function(t){return cdr(cdr(cdr(t)))},caaddr=function(t){return car(car(cdr(cdr(t))))},cadadr=function(t){return car(cdr(car(cdr(t))))},caddar=function(t){return car(cdr(cdr(car(t))))},cdaddr=function(t){return cdr(car(cdr(cdr(t))))},cadddr=function(t){return car(cdr(cdr(cdr(t))))},cddddr=function(t){return cdr(cdr(cdr(cdr(t))))},caddddr=function(t){return car(cdr(cdr(cdr(cdr(t)))))},cadaddr=function(t){return car(cdr(car(cdr(cdr(t)))))},cddaddr=function(t){return cdr(cdr(car(cdr(cdr(t)))))},caddadr=function(t){return car(cdr(cdr(car(cdr(t)))))},cdddaddr=function(t){return cdr(cdr(cdr(car(cdr(cdr(t))))))},caddaddr=function(t){return car(cdr(cdr(car(cdr(cdr(t))))))},isadd=function(t){return car(t)===symbol(ADD)},ismultiply=function(t){return car(t)===symbol(MULTIPLY)},ispower=function(t){return car(t)===symbol(POWER)},isfactorial=function(t){return car(t)===symbol(FACTORIAL)},isinnerordot=function(t){return car(t)===symbol(INNER)||car(t)===symbol(DOT)},istranspose=function(t){return car(t)===symbol(TRANSPOSE)},isinv=function(t){return car(t)===symbol(INV)},isidentitymatrix=function(t){return t===symbol(SYMBOL_IDENTITY_MATRIX)},MSIGN=function(t){return t.isPositive()?1:t.isZero()?0:-1},MZERO=function(t){return t.isZero()},MEQUAL=function(t,n){if(t==null)debugger;return t.equals(n)},reset_after_error=function(){return moveTos(0),esc_flag=0,frame=TOS,evaluatingAsFloats=0,evaluatingPolar=0},$=exports!==null?exports:this,$.version=version,$.isadd=isadd,$.ismultiply=ismultiply,$.ispower=ispower,$.isfactorial=isfactorial,$.car=car,$.cdr=cdr,$.caar=caar,$.cadr=cadr,$.cdar=cdar,$.cddr=cddr,$.caadr=caadr,$.caddr=caddr,$.cadar=cadar,$.cdadr=cdadr,$.cddar=cddar,$.cdddr=cdddr,$.caaddr=caaddr,$.cadadr=cadadr,$.caddar=caddar,$.cdaddr=cdaddr,$.cadddr=cadddr,$.cddddr=cddddr,$.caddddr=caddddr,$.cadaddr=cadaddr,$.cddaddr=cddaddr,$.caddadr=caddadr,$.cdddaddr=cdddaddr,$.caddaddr=caddaddr,$.symbol=symbol,$.iscons=iscons,$.isrational=isrational,$.isdouble=isdouble,$.isNumericAtom=isNumericAtom,$.isstr=isstr,$.istensor=istensor,$.issymbol=issymbol,$.iskeyword=iskeyword,$.CONS=CONS,$.NUM=NUM,$.DOUBLE=DOUBLE,$.STR=STR,$.TENSOR=TENSOR,$.SYM=SYM,DEBUG_ABS=!1,Eval_abs=function(){return push(cadr(p1)),Eval(),abs()},absValFloat=function(){return Eval(),absval(),Eval(),zzfloat()},abs=function(){var t;if(t=top(),DEBUG_ABS&&console.trace(">>>>  ABS of "+t),numerator(),DEBUG_ABS&&console.log("ABS numerator "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL numerator: "+stack[tos-1]),push(t),denominator(),DEBUG_ABS&&console.log("ABS denominator: "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL denominator: "+stack[tos-1]),divide(),DEBUG_ABS&&console.log("ABSVAL divided: "+stack[tos-1]),DEBUG_ABS)return console.log("<<<<<<<  ABS")},absval=function(){var t,n;if(save(),p1=pop(),n=p1,DEBUG_ABS&&console.log("ABS of "+p1),isZeroAtomOrTensor(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just zero"),push(zero),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(isnegativenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a negative"),push(p1),negate(),restore();return}if(ispositivenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a positive"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(p1===symbol(PI)){DEBUG_ABS&&console.log(" abs: "+p1+" of PI"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ADD)&&(findPossibleClockForm(p1)||findPossibleExponentialForm(p1)||Find(p1,imaginaryunit))){DEBUG_ABS&&console.log(" abs: "+p1+" is a sum"),DEBUG_ABS&&console.log("abs of a sum"),push(p1),rect(),p1=pop(),push(p1),real(),push_integer(2),power(),push(p1),imag(),push_integer(2),power(),add(),push_rational(1,2),power(),simplify_trig(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1)){DEBUG_ABS&&console.log(" abs: "+p1+" is -1 to any power"),evaluatingAsFloats?(DEBUG_ABS&&console.log(" abs: numeric, so result is 1.0"),push_double(1)):(DEBUG_ABS&&console.log(" abs: symbolic, so result is 1"),push_integer(1)),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&ispositivenumber(caddr(p1))){DEBUG_ABS&&console.log(" abs: "+p1+" is something to the power of a positive number"),push(cadr(p1)),abs(),push(caddr(p1)),power(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E)){DEBUG_ABS&&console.log(" abs: "+p1+" is an exponential"),push(caddr(p1)),real(),exponential(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(MULTIPLY)){for(DEBUG_ABS&&console.log(" abs: "+p1+" is a product"),t=!1,p1=cdr(p1);iscons(p1);)push(car(p1)),absval(),t&&multiply(),t=!0,p1=cdr(p1);DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ABS)){DEBUG_ABS&&console.log(" abs: "+p1+" is abs of a abs"),push_symbol(ABS),push(cadr(p1)),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(istensor(p1)){absval_tensor(),restore();return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),DEBUG_ABS&&console.log(" abs: "+p1+" is nothing decomposable"),push_symbol(ABS),push(p1),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore()},absval_tensor=function(){return p1.tensor.ndim!==1&&stop("abs(tensor) with tensor rank > 1"),push(p1),push(p1),conjugate(),inner(),push_rational(1,2),power(),simplify(),Eval()},flag=0,Eval_add=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p2=pop(),push_terms(p2),p1=cdr(p1);return add_terms(tos-t)},stackAddsCount=0,add_terms=function(t){var n,a,l,u,c,p,d,Q,Ct;if(stackAddsCount++,a=0,n=tos-t,DEBUG&&console.log("stack before adding terms #"+stackAddsCount),DEBUG)for(a=c=0,p=tos;0<=p?c<p:c>p;a=0<=p?++c:--c)console.log(print_list(stack[a]));for(a=l=0;l<10&&!(t<2||(flag=0,Ct=stack.slice(n,n+t),Ct.sort(cmp_terms),stack=stack.slice(0,n).concat(Ct).concat(stack.slice(n+t)),flag===0));a=++l)t=combine_terms(n,t);switch(moveTos(n+t),t){case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:break;default:list(t),p1=pop(),push_symbol(ADD),push(p1),cons()}if(DEBUG&&console.log("stack after adding terms #"+stackAddsCount),DEBUG){for(Q=[],a=u=0,d=tos;0<=d?u<d:u>d;a=0<=d?++u:--u)Q.push(console.log(print_list(stack[a])));return Q}},cmp_terms=function(t,n){var a,l,u,c;if(a=0,isNumericAtom(t)&&isNumericAtom(n))return flag=1,0;if(istensor(t)&&istensor(n)){if(t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=l=0,u=t.tensor.ndim;0<=u?l<u:l>u;a=0<=u?++l:--l){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}return flag=1,0}return car(t)===symbol(MULTIPLY)&&(t=cdr(t),isNumericAtom(car(t))&&(t=cdr(t),cdr(t)===symbol(NIL)&&(t=car(t)))),car(n)===symbol(MULTIPLY)&&(n=cdr(n),isNumericAtom(car(n))&&(n=cdr(n),cdr(n)===symbol(NIL)&&(n=car(n)))),c=cmp_expr(t,n),c===0&&(flag=1),c},combine_terms=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax;for(a=0;a<n-1;){if(check_esc_flag(),p3=stack[t+a],p4=stack[t+a+1],istensor(p3)&&istensor(p4)){if(push(p3),push(p4),tensor_plus_tensor(),p1=pop(),p1!==symbol(NIL)){for(stack[t+a]=p1,u=Q=Ct=a+1,ar=n-1;Ct<=ar?Q<ar:Q>ar;u=Ct<=ar?++Q:--Q)stack[t+u]=stack[t+u+1];n--,a--}a++;continue}if(istensor(p3)||istensor(p4)){a++;continue}if(isNumericAtom(p3)&&isNumericAtom(p4)){if(push(p3),push(p4),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(u=l=en=a,tn=n-2;en<=tn?l<tn:l>tn;u=en<=tn?++l:--l)stack[t+u]=stack[t+u+2];n-=2}else{for(stack[t+a]=p1,u=c=on=a+1,cn=n-1;on<=cn?c<cn:c>cn;u=on<=cn?++c:--c)stack[t+u]=stack[t+u+1];n--}a--,a++;continue}if(isNumericAtom(p3)||isNumericAtom(p4)){a++;continue}if(evaluatingAsFloats?(p1=one_as_double,p2=one_as_double):(p1=one,p2=one),ax=0,car(p3)===symbol(MULTIPLY)&&(p3=cdr(p3),ax=1,isNumericAtom(car(p3))&&(p1=car(p3),p3=cdr(p3),cdr(p3)===symbol(NIL)&&(p3=car(p3),ax=0))),car(p4)===symbol(MULTIPLY)&&(p4=cdr(p4),isNumericAtom(car(p4))&&(p2=car(p4),p4=cdr(p4),cdr(p4)===symbol(NIL)&&(p4=car(p4)))),!equal(p3,p4)){a++;continue}if(push(p1),push(p2),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(u=p=gn=a,Cn=n-2;gn<=Cn?p<Cn:p>Cn;u=gn<=Cn?++p:--p)stack[t+u]=stack[t+u+2];n-=2,a--,a++;continue}for(push(p1),ax?(push(symbol(MULTIPLY)),push(p3),cons()):push(p3),multiply(),stack[t+a]=pop(),u=d=ex=a+1,ix=n-1;ex<=ix?d<ix:d>ix;u=ex<=ix?++d:--d)stack[t+u]=stack[t+u+1];n--,a--,a++}return n},push_terms=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else if(!isZeroAtom(t))return push(t)},add=function(){var t;return save(),p2=pop(),p1=pop(),t=tos,push_terms(p1),push_terms(p2),add_terms(tos-t),restore()},add_all=function(t){var n,a,l,u,c;for(a=0,save(),c=tos-t,n=tos,a=l=0,u=t;0<=u?l<u:l>u;a=0<=u?++l:--l)push_terms(stack[c+a]);return add_terms(tos-n),p1=pop(),moveTos(tos-t),push(p1),restore()},subtract=function(){return negate(),add()},Eval_adj=function(){return push(cadr(p1)),Eval(),adj()},adj=function(){var t,n,a,l,u,c,p;for(t=0,a=0,l=0,save(),p1=pop(),istensor(p1)&&p1.tensor.ndim===2&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("adj: square matrix expected"),l=p1.tensor.dim[0],p2=alloc_tensor(l*l),p2.tensor.ndim=2,p2.tensor.dim[0]=l,p2.tensor.dim[1]=l,t=u=0,c=l;0<=c?u<c:u>c;t=0<=c?++u:--u)for(a=n=0,p=l;0<=p?n<p:n>p;a=0<=p?++n:--n)cofactor(p1,l,t,a),p2.tensor.elem[l*a+t]=pop();return push(p2),restore()},Eval_approxratio=function(){var t;return t=cadr(p1),push(t),approxratioRecursive()},approxratioRecursive=function(){var t,n,a,l,u;if(t=0,save(),p1=pop(),istensor(p1)){for(p4=alloc_tensor(p1.tensor.nelem),p4.tensor.ndim=p1.tensor.ndim,t=a=0,l=p1.tensor.ndim;0<=l?a<l:a>l;t=0<=l?++a:--a)p4.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,u=p1.tensor.nelem;0<=u?n<u:n>u;t=0<=u?++n:--n)push(p1.tensor.elem[t]),approxratioRecursive(),p4.tensor.elem[t]=pop(),check_tensor_dimensions(p4);push(p4)}else p1.k===DOUBLE?(push(p1),approxOneRatioOnly()):iscons(p1)?(push(car(p1)),approxratioRecursive(),push(cdr(p1)),approxratioRecursive(),cons()):push(p1);return restore()},approxOneRatioOnly=function(){var t,n,a,l,u,c;if(zzfloat(),l=pop(),l.k===DOUBLE){u=l.d,a=u.toString().split("."),a.length===2?(t=a[1].length,n=1/Math.pow(10,t),c=floatToRatioRoutine(u,n),push_rational(c[0],c[1])):push_integer(u);return}return push_symbol(APPROXRATIO),push(theArgument),list(2)},floatToRatioRoutine=function(t,n){var a,l,u,c,p,d,Q;if(u=void 0,l=void 0,a=void 0,d=void 0,c=void 0,p=void 0,Q=[0,0],isNaN(t))return Q;if(t===1/0)return Q[0]=1,Q[1]=0,Q;if(t===-1/0)return Q[0]=-1,Q[1]=0,Q;if(t<0?a=-1:a=1,t=Math.abs(t),Math.abs(t-Math.floor(t))<n)return u=t*a,l=1,Q[0]=u,Q[1]=l,Q;if(t<1e-19)return u=a,l=1e19,Q[0]=u,Q[1]=l,Q;if(t>1e19)return u=1e19*a,l=1,Q[0]=u,Q[1]=l,Q;for(d=t,c=0,l=1;d=1/(d-Math.floor(d)),p=l,l=l*Math.floor(d)+c,c=p,u=Math.floor(t*l+.5),Math.abs(t-u/l)>n&&d!==Math.floor(d););return u=a*u,Q[0]=u,Q[1]=l,Q},approx_just_an_integer=0,approx_sine_of_rational=1,approx_sine_of_pi_times_rational=2,approx_rationalOfPi=3,approx_radicalOfRatio=4,approx_ratioOfRadical=6,approx_rationalOfE=7,approx_logarithmsOfRationals=8,approx_rationalsOfLogarithms=9,approxRationalsOfRadicals=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex;if(ex=t.toString().split("."),ex.length===2)en=ex[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,gn=[2,3,5,6,7,8,10],tn=0,Q=gn.length;tn<Q;tn++)for(c=gn[tn],d=p=1;p<=10;d=++p)u=Math.sqrt(c)/d,Math.abs(u)>1e-10?(cn=t/u,Ct=Math.round(cn),l=Math.abs(1-cn/Ct)):(cn=1,Ct=1,l=Math.abs(t-u)),l<2*on&&(a=simpleComplexityMeasure(Ct,c,d),a<ar&&(ar=a,Cn=Ct+" * sqrt( "+c+" ) / "+d,n=[Cn,approx_ratioOfRadical,Ct,c,d]));return n},approxRadicalsOfRationals=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax;if(ax=t.toString().split("."),ax.length===2)tn=ax[1].length,cn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+cn),n=null,en=Number.MAX_VALUE,Cn=[1,2,3,5,6,7,8,10],on=0,Q=Cn.length;on<Q;on++)for(c=Cn[on],ex=[1,2,3,5,6,7,8,10],p=0,Ct=ex.length;p<Ct;p++)d=ex[p],u=Math.sqrt(c/d),Math.abs(u)>1e-10?(gn=t/u,ar=Math.round(gn),l=Math.abs(1-gn/ar)):(gn=1,ar=1,l=Math.abs(t-u)),l<2*cn&&(a=simpleComplexityMeasure(ar,c,d),a<en&&(en=a,ix=ar+" * (sqrt( "+c+" / "+d+" )",n=[ix,approx_radicalOfRatio,ar,c,d]));return n},approxRadicals=function(t){var n,a,l,u,c;if(c=t.toString().split("."),c.length===2)l=c[1].length,u=1/Math.pow(10,l);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+u),a=approxRationalsOfRadicals(t),a??(n=approxRadicalsOfRationals(t),n??null)},approxLogs=function(t){var n,a,l,u,c;if(c=t.toString().split("."),c.length===2)l=c[1].length,u=1/Math.pow(10,l);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+u),a=approxRationalsOfLogs(t),a??(n=approxLogsOfRationals(t),n??null)},approxRationalsOfLogs=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;if(gn=t.toString().split("."),gn.length===2)ar=gn[1].length,tn=1/Math.pow(10,ar);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+tn),n=null,Ct=Number.MAX_VALUE,c=en=2;en<=5;c=++en)for(d=p=1;p<=5;d=++p)u=Math.log(c)/d,Math.abs(u)>1e-10?(on=t/u,Q=Math.round(on),l=Math.abs(1-on/Q)):(on=1,Q=1,l=Math.abs(t-u)),!(Q!==1&&Math.abs(Math.floor(Q/d))===Math.abs(Q/d))&&l<2.2*tn&&(a=simpleComplexityMeasure(Q,c,d),a<Ct&&(Ct=a,cn=Q+" * log( "+c+" ) / "+d,n=[cn,approx_rationalsOfLogarithms,Q,c,d]));return n},approxLogsOfRationals=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;if(gn=t.toString().split("."),gn.length===2)ar=gn[1].length,tn=1/Math.pow(10,ar);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+tn),n=null,Ct=Number.MAX_VALUE,c=en=1;en<=5;c=++en)for(d=p=1;p<=5;d=++p)u=Math.log(c/d),Math.abs(u)>1e-10?(on=t/u,Q=Math.round(on),l=Math.abs(1-on/Q)):(on=1,Q=1,l=Math.abs(t-u)),l<1.96*tn&&(a=simpleComplexityMeasure(Q,c,d),a<Ct&&(Ct=a,cn=Q+" * log( "+c+" / "+d+" )",n=[cn,approx_logarithmsOfRationals,Q,c,d]));return n},approxRationalsOfPowersOfE=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;if(gn=t.toString().split("."),gn.length===2)ar=gn[1].length,tn=1/Math.pow(10,ar);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+tn),n=null,Ct=Number.MAX_VALUE,c=en=1;en<=2;c=++en)for(d=p=1;p<=12;d=++p)u=Math.pow(Math.E,c)/d,Math.abs(u)>1e-10?(on=t/u,Q=Math.round(on),l=Math.abs(1-on/Q)):(on=1,Q=1,l=Math.abs(t-u)),l<2*tn&&(a=simpleComplexityMeasure(Q,c,d),a<Ct&&(Ct=a,cn=Q+" * (e ^ "+c+" ) / "+d,n=[cn,approx_rationalOfE,Q,c,d]));return n},approxRationalsOfPowersOfPI=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;if(gn=t.toString().split("."),gn.length===2)ar=gn[1].length,tn=1/Math.pow(10,ar);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+tn),n=null,Ct=Number.MAX_VALUE,c=en=1;en<=5;c=++en)for(d=p=1;p<=12;d=++p)u=Math.pow(Math.PI,c)/d,Math.abs(u)>1e-10?(on=t/u,Q=Math.round(on),l=Math.abs(1-on/Q)):(on=1,Q=1,l=Math.abs(t-u)),l<2*tn&&(a=simpleComplexityMeasure(Q,c,d),a<Ct&&(Ct=a,cn=Q+" * (pi ^ "+c+" ) / "+d+" )",n=[cn,approx_rationalOfPi,Q,c,d]));return n},approxTrigonometric=function(t){var n,a,l,u,c;if(c=t.toString().split("."),c.length===2)l=c[1].length,u=1/Math.pow(10,l);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+u),a=approxSineOfRationals(t),a??(n=approxSineOfRationalMultiplesOfPI(t),n??null)},approxSineOfRationals=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,p=tn=1;tn<=4;p=++tn)for(Q=d=1;d<=4;Q=++d)u=p/Q,c=Math.sin(u),Math.abs(c)>1e-10?(cn=t/c,Ct=Math.round(cn),l=Math.abs(1-cn/Ct)):(cn=1,Ct=1,l=Math.abs(t-c)),l<2*on&&(a=simpleComplexityMeasure(Ct,p,Q),a<ar&&(ar=a,gn=Ct+" * sin( "+p+"/"+Q+" )",n=[gn,approx_sine_of_rational,Ct,p,Q]));return n},approxSineOfRationalMultiplesOfPI=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,p=tn=1;tn<=13;p=++tn)for(Q=d=1;d<=13;Q=++d)u=p/Q,c=Math.sin(Math.PI*u),Math.abs(c)>1e-10?(cn=t/c,Ct=Math.round(cn),l=Math.abs(1-cn/Ct)):(cn=1,Ct=1,l=Math.abs(t-c)),l<23*on&&(a=simpleComplexityMeasure(Ct,p,Q),a<ar&&(ar=a,gn=Ct+" * sin( "+p+"/"+Q+" * pi )",n=[gn,approx_sine_of_pi_times_rational,Ct,p,Q]));return n},approxAll=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn;if(tn=t.toString().split("."),tn.length===2)ar=tn[1].length,en=1/Math.pow(10,ar);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+en),Ct=Number.MAX_VALUE,Q=0,d=null,n=!0,l=approxRadicals(t),l!=null&&(Q=simpleComplexityMeasure(l),Q<Ct?(n&&console.log("better explanation by approxRadicals: "+l+" complexity: "+Q),Ct=Q,d=l):n&&console.log("subpar explanation by approxRadicals: "+l+" complexity: "+Q)),a=approxLogs(t),a!=null&&(Q=simpleComplexityMeasure(a),Q<Ct?(n&&console.log("better explanation by approxLogs: "+a+" complexity: "+Q),Ct=Q,d=a):n&&console.log("subpar explanation by approxLogs: "+a+" complexity: "+Q)),u=approxRationalsOfPowersOfE(t),u!=null&&(Q=simpleComplexityMeasure(u),Q<Ct?(n&&console.log("better explanation by approxRationalsOfPowersOfE: "+u+" complexity: "+Q),Ct=Q,d=u):n&&console.log("subpar explanation by approxRationalsOfPowersOfE: "+u+" complexity: "+Q)),c=approxRationalsOfPowersOfPI(t),c!=null&&(Q=simpleComplexityMeasure(c),Q<Ct?(n&&console.log("better explanation by approxRationalsOfPowersOfPI: "+c+" complexity: "+Q),Ct=Q,d=c):n&&console.log("subpar explanation by approxRationalsOfPowersOfPI: "+c+" complexity: "+Q)),p=approxTrigonometric(t),p!=null&&(Q=simpleComplexityMeasure(p),Q<Ct?(n&&console.log("better explanation by approxTrigonometric: "+p+" complexity: "+Q),Ct=Q,d=p):n&&console.log("subpar explanation by approxTrigonometric: "+p+" complexity: "+Q)),d},simpleComplexityMeasure=function(t,n,a){var l;if(l=null,t instanceof Array){switch(t[1]){case approx_sine_of_pi_times_rational:l=4;break;case approx_rationalOfPi:l=Math.pow(4,Math.abs(t[3]))*Math.abs(t[2]);break;case approx_rationalOfE:l=Math.pow(3,Math.abs(t[3]))*Math.abs(t[2]);break;default:l=0}l+=Math.abs(t[2])*(Math.abs(t[3])+Math.abs(t[4]))}else l+=Math.abs(t)*(Math.abs(n)+Math.abs(a));return t[2]===1?l-=1:l+=1,t[3]===1?l-=1:l+=1,t[4]===1?l-=1:l+=1,l<0&&(l=0),l},testApprox=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux,gx,yx,_x,vx,bx,xx,Sx,Ax,Cx,Tx,Px,Fx,Mx,Dx,Ox,Lx,Nx,Gx,Ux,Hx,Vx,zx,rE,Zx,eE,oE,iE,Wx,AE,ME,EE,bE;for(Cx=[2,3,5,6,7,8,10],gx=0,cn=Cx.length;gx<cn;gx++)for(a=Cx[gx],Tx=[2,3,5,6,7,8,10],l=0,gn=Tx.length;l<gn;l++)p=Tx[l],a!==p&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" ) / "+p),n=a/p,Wx=Math.sqrt(a)/p,Nx=approxRadicals(Wx),Ux=Nx[2]*Math.sqrt(Nx[3])/Nx[4],Math.abs(Wx-Ux)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" ) / "+p+" . obtained: "+Nx));for(Px=[2,3,5,6,7,8,10],d=0,Cn=Px.length;d<Cn;d++)for(a=Px[d],Fx=[2,3,5,6,7,8,10],en=0,ex=Fx.length;en<ex;en++)p=Fx[en],a!==p&&(console.log("testapproxRadicals testing with 4 digits: 1 * sqrt( "+a+" ) / "+p),n=a/p,vx=Math.sqrt(a)/p,Wx=vx.toFixed(4),Nx=approxRadicals(Wx),Ux=Nx[2]*Math.sqrt(Nx[3])/Nx[4],Math.abs(vx-Ux)>1e-15&&console.log("fail testapproxRadicals with 4 digits: 1 * sqrt( "+a+" ) / "+p+" . obtained: "+Nx));for(Mx=[2,3,5,6,7,8,10],cx=0,ix=Mx.length;cx<ix;cx++)for(a=Mx[cx],Dx=[2,3,5,6,7,8,10],fx=0,ax=Dx.length;fx<ax;fx++)p=Dx[fx],a!==p&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" / "+p+" )"),n=a/p,Wx=Math.sqrt(a/p),Nx=approxRadicals(Wx),Nx!=null&&(Ux=Nx[2]*Math.sqrt(Nx[3]/Nx[4]),Nx[1]===approx_radicalOfRatio&&Math.abs(Wx-Ux)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" / "+p+" ) . obtained: "+Nx)));for(Ox=[1,2,3,5,6,7,8,10],yx=0,ox=Ox.length;yx<ox;yx++)for(a=Ox[yx],Lx=[1,2,3,5,6,7,8,10],bx=0,lx=Lx.length;bx<lx;bx++)p=Lx[bx],!(a===1&&p===1)&&(console.log("testapproxRadicals testing with 4 digits:: 1 * sqrt( "+a+" / "+p+" )"),n=a/p,vx=Math.sqrt(a/p),Wx=vx.toFixed(4),Nx=approxRadicals(Wx),Ux=Nx[2]*Math.sqrt(Nx[3]/Nx[4]),Nx[1]===approx_radicalOfRatio&&Math.abs(vx-Ux)>1e-15&&console.log("fail testapproxRadicals with 4 digits:: 1 * sqrt( "+a+" / "+p+" ) . obtained: "+Nx));for(a=Sx=1;Sx<=5;a=++Sx)for(p=Hx=1;Hx<=5;p=++Hx)console.log("testApproxAll testing: 1 * log("+a+" ) / "+p),n=a/p,Wx=Math.log(a)/p,Nx=approxAll(Wx),Ux=Nx[2]*Math.log(Nx[3])/Nx[4],Math.abs(Wx-Ux)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" ) / "+p+" . obtained: "+Nx);for(a=zx=1;zx<=5;a=++zx)for(p=Zx=1;Zx<=5;p=++Zx)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" ) / "+p),n=a/p,vx=Math.log(a)/p,Wx=vx.toFixed(4),Nx=approxAll(Wx),Ux=Nx[2]*Math.log(Nx[3])/Nx[4],Math.abs(vx-Ux)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" ) / "+p+" . obtained: "+Nx);for(a=oE=1;oE<=5;a=++oE)for(p=AE=1;AE<=5;p=++AE)console.log("testApproxAll testing: 1 * log("+a+" / "+p+" )"),n=a/p,Wx=Math.log(a/p),Nx=approxAll(Wx),Ux=Nx[2]*Math.log(Nx[3]/Nx[4]),Math.abs(Wx-Ux)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" / "+p+" ) . obtained: "+Nx);for(a=EE=1;EE<=5;a=++EE)for(p=u=1;u<=5;p=++u)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" / "+p+" )"),n=a/p,vx=Math.log(a/p),Wx=vx.toFixed(4),Nx=approxAll(Wx),Ux=Nx[2]*Math.log(Nx[3]/Nx[4]),Math.abs(vx-Ux)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" / "+p+" ) . obtained: "+Nx);for(a=Q=1;Q<=2;a=++Q)for(p=tn=1;tn<=12;p=++tn)console.log("testApproxAll testing: 1 * (e ^ "+a+" ) / "+p),n=a/p,Wx=Math.pow(Math.E,a)/p,Nx=approxAll(Wx),Ux=Nx[2]*Math.pow(Math.E,Nx[3])/Nx[4],Math.abs(Wx-Ux)>1e-15&&console.log("fail testApproxAll: 1 * (e ^ "+a+" ) / "+p+" . obtained: "+Nx);for(a=dx=1;dx<=2;a=++dx)for(p=ux=1;ux<=12;p=++ux)console.log("approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ "+a+" ) / "+p),n=a/p,vx=Math.pow(Math.E,a)/p,Wx=vx.toFixed(4),Nx=approxRationalsOfPowersOfE(Wx),Ux=Nx[2]*Math.pow(Math.E,Nx[3])/Nx[4],Math.abs(vx-Ux)>1e-15&&console.log("fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ "+a+" ) / "+p+" . obtained: "+Nx);for(a=_x=1;_x<=2;a=++_x)for(p=xx=1;xx<=12;p=++xx)console.log("testApproxAll testing: 1 * pi ^ "+a+" / "+p),n=a/p,Wx=Math.pow(Math.PI,a)/p,Nx=approxAll(Wx),Ux=Nx[2]*Math.pow(Math.PI,Nx[3])/Nx[4],Math.abs(Wx-Ux)>1e-15&&console.log("fail testApproxAll: 1 * pi ^ "+a+" / "+p+" ) . obtained: "+Nx);for(a=Ax=1;Ax<=2;a=++Ax)for(p=Vx=1;Vx<=12;p=++Vx)console.log("approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ "+a+" / "+p),n=a/p,vx=Math.pow(Math.PI,a)/p,Wx=vx.toFixed(4),Nx=approxRationalsOfPowersOfPI(Wx),Ux=Nx[2]*Math.pow(Math.PI,Nx[3])/Nx[4],Math.abs(vx-Ux)>1e-15&&console.log("fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ "+a+" / "+p+" ) . obtained: "+Nx);for(a=rE=1;rE<=4;a=++rE)for(p=eE=1;eE<=4;p=++eE)console.log("testApproxAll testing: 1 * sin( "+a+"/"+p+" )"),n=a/p,Wx=Math.sin(n),Nx=approxAll(Wx),Gx=Nx[3]/Nx[4],Ux=Nx[2]*Math.sin(Gx),Math.abs(Wx-Ux)>1e-15&&console.log("fail testApproxAll: 1 * sin( "+a+"/"+p+" ) . obtained: "+Nx);for(a=iE=1;iE<=4;a=++iE)for(p=ME=1;ME<=4;p=++ME)console.log("testApproxAll testing with 5 digits: 1 * sin( "+a+"/"+p+" )"),n=a/p,vx=Math.sin(n),Wx=vx.toFixed(5),Nx=approxAll(Wx),Nx==null&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+p+" ) . obtained:  undefined "),Gx=Nx[3]/Nx[4],Ux=Nx[2]*Math.sin(Gx),t=Math.abs(vx-Ux),t>1e-14&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+p+" ) . obtained: "+Nx+" error: "+t);for(a=bE=1;bE<=4;a=++bE)for(p=c=1;c<=4;p=++c)console.log("testApproxAll testing with 4 digits: 1 * sin( "+a+"/"+p+" )"),n=a/p,vx=Math.sin(n),Wx=vx.toFixed(4),Nx=approxAll(Wx),Nx==null&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+p+" ) . obtained:  undefined "),Gx=Nx[3]/Nx[4],Ux=Nx[2]*Math.sin(Gx),t=Math.abs(vx-Ux),t>1e-14&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+p+" ) . obtained: "+Nx+" error: "+t);for(Wx=0,approxAll(Wx)[0]!=="0"&&console.log("fail testApproxAll: 0"),Wx=0,approxAll(Wx)[0]!=="0"&&console.log("fail testApproxAll: 0.0"),Wx=0,approxAll(Wx)[0]!=="0"&&console.log("fail testApproxAll: 0.00"),Wx=0,approxAll(Wx)[0]!=="0"&&console.log("fail testApproxAll: 0.000"),Wx=0,approxAll(Wx)[0]!=="0"&&console.log("fail testApproxAll: 0.0000"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1.0"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1.00"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1.000"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1.00000"),Wx=Math.sqrt(2),approxAll(Wx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(2)"),Wx=1.41,approxAll(Wx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: 1.41"),Wx=1.4,approxRadicals(Wx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail approxRadicals: 1.4"),Wx=.6,approxLogs(Wx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.6"),Wx=.69,approxLogs(Wx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.69"),Wx=.7,approxLogs(Wx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.7"),Wx=1.09,approxLogs(Wx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxLogs: 1.09"),Wx=1.09,approxAll(Wx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.09"),Wx=1.098,approxAll(Wx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.098"),Wx=1.1,approxAll(Wx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.1"),Wx=1.11,approxAll(Wx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.11"),Wx=Math.sqrt(3),approxAll(Wx)[0]!=="1 * sqrt( 3 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(3)"),Wx=1,approxAll(Wx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Wx=3.141592,approxAll(Wx)[0]!=="1 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 3.141592"),Wx=31.41592,approxAll(Wx)[0]!=="10 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31.41592"),Wx=314.1592,approxAll(Wx)[0]!=="100 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 314.1592"),Wx=3141592653589793e-8,approxAll(Wx)[0]!=="10000000 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31415926.53589793"),Wx=Math.sqrt(2),approxTrigonometric(Wx)[0]!=="2 * sin( 1/4 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(2)"),Wx=Math.sqrt(3),approxTrigonometric(Wx)[0]!=="2 * sin( 1/3 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(3)"),Wx=(Math.sqrt(6)-Math.sqrt(2))/4,approxAll(Wx)[0]!=="1 * sin( 1/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),Wx=Math.sqrt(2-Math.sqrt(2))/2,approxAll(Wx)[0]!=="1 * sin( 1/8 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),Wx=(Math.sqrt(6)+Math.sqrt(2))/4,approxAll(Wx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),Wx=Math.sqrt(2+Math.sqrt(3))/2,approxAll(Wx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),Wx=(Math.sqrt(5)-1)/4,approxAll(Wx)[0]!=="1 * sin( 1/10 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),Wx=Math.sqrt(10-2*Math.sqrt(5))/4,approxAll(Wx)[0]!=="1 * sin( 1/5 * pi )"&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),Wx=Math.sin(Math.PI/7),approxAll(Wx)[0]!=="1 * sin( 1/7 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),Wx=Math.sin(Math.PI/9),approxAll(Wx)[0]!=="1 * sin( 1/9 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),Wx=1836.15267,approxRationalsOfPowersOfPI(Wx)[0]!=="6 * (pi ^ 5 ) / 1 )"&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267"),a=Ct=1;Ct<=13;a=++Ct)for(p=ar=1;ar<=13;p=++ar)console.log("approxTrigonometric testing: 1 * sin( "+a+"/"+p+" * pi )"),n=a/p,Wx=Math.sin(Math.PI*n),Nx=approxTrigonometric(Wx),Gx=Nx[3]/Nx[4],Ux=Nx[2]*Math.sin(Math.PI*Gx),Math.abs(Wx-Ux)>1e-15&&console.log("fail approxTrigonometric: 1 * sin( "+a+"/"+p+" * pi ) . obtained: "+Nx);for(a=on=1;on<=13;a=++on)for(p=hx=1;hx<=13;p=++hx)a===5&&p===11||a===6&&p===11||(console.log("approxTrigonometric testing with 4 digits: 1 * sin( "+a+"/"+p+" * pi )"),n=a/p,vx=Math.sin(Math.PI*n),Wx=vx.toFixed(4),Nx=approxTrigonometric(Wx),Gx=Nx[3]/Nx[4],Ux=Nx[2]*Math.sin(Math.PI*Gx),t=Math.abs(vx-Ux),t>1e-14&&console.log("fail approxTrigonometric with 4 digits: 1 * sin( "+a+"/"+p+" * pi ) . obtained: "+Nx+" error: "+t));return console.log("testApprox done")},$.approxRadicals=approxRadicals,$.approxRationalsOfLogs=approxRationalsOfLogs,$.approxAll=approxAll,$.testApprox=testApprox,Eval_arccos=function(){return push(cadr(p1)),Eval(),arccos()},arccos=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.acos(p1.d),n&&stop("arccos function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI/4):(push_rational(1,4),push_symbol(PI),multiply()),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI*3/4):(push_rational(3,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(5*Math.PI/6):(push_rational(5,6),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCCOS),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(Math.PI):push_symbol(PI);break;case-1:evaluatingAsFloats?push_double(Math.PI*2/3):(push_rational(2,3),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;case 1:evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(0):push(zero);break;default:push_symbol(ARCCOS),push(p1),list(2)}return restore()},Eval_arccosh=function(){return push(cadr(p1)),Eval(),arccosh()},arccosh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(COSH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t<1&&stop("arccosh function argument is less than 1.0"),t=Math.log(t+Math.sqrt(t*t-1)),push_double(t),restore();return}if(isplusone(p1)){push(zero),restore();return}return push_symbol(ARCCOSH),push(p1),list(2),restore()},Eval_arcsin=function(){return push(cadr(p1)),Eval(),arcsin()},arcsin=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(SIN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.asin(p1.d),n&&stop("arcsin function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,4),push_symbol(PI),multiply(),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(-Math.PI/4):(push_rational(-1,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(-Math.PI/3):(push_rational(-1,3),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCSIN),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(-Math.PI/2):(push_rational(-1,2),push_symbol(PI),multiply());break;case-1:evaluatingAsFloats?push_double(-Math.PI/6):(push_rational(-1,6),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;default:push_symbol(ARCSIN),push(p1),list(2)}return restore()},Eval_arcsinh=function(){return push(cadr(p1)),Eval(),arcsinh()},arcsinh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(SINH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t=Math.log(t+Math.sqrt(t*t+1)),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCSINH),push(p1),list(2),restore()},Eval_arctan=function(){return push(cadr(p1)),Eval(),arctan()},arctan=function(){var t,n;if(t=0,save(),p1=pop(),car(p1)===symbol(TAN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.atan(p1.d),n&&stop("arctan function error"),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}if(isnegative(p1)){push(p1),negate(),arctan(),negate(),restore();return}if(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&(push(p1),numerator(),p2=pop(),push(p1),denominator(),p3=pop(),car(p2)===symbol(SIN)&&car(p3)===symbol(COS)&&equal(cadr(p2),cadr(p3)))){push(cadr(p2)),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),-1,2)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,3)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),3)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,6),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(equaln(p1,1)){push_rational(1,4),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),1,2)){push_rational(1,3),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}return push_symbol(ARCTAN),push(p1),list(2),restore()},Eval_arctanh=function(){return push(cadr(p1)),Eval(),arctanh()},arctanh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(TANH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,(t<-1||t>1)&&stop("arctanh function argument is not in the interval [-1,1]"),t=Math.log((1+t)/(1-t))/2,push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCTANH),push(p1),list(2),restore()},DEBUG_ARG=!1,Eval_arg=function(){return push(cadr(p1)),Eval(),arg()},arg=function(){return save(),p1=pop(),push(p1),numerator(),yyarg(),push(p1),denominator(),yyarg(),subtract(),restore()},yyarg=function(){if(save(),p1=pop(),ispositivenumber(p1)||p1===symbol(PI))isdouble(p1)||evaluatingAsFloats?push_double(0):push_integer(0);else if(isnegativenumber(p1))isdouble(p1)||evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),negate();else if(issymbol(p1))push_symbol(ARG),push(p1),list(2);else if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),push(caddr(p1)),multiply();else if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))push(caddr(p1)),imag();else if(car(p1)===symbol(POWER)&&isoneovertwo(caddr(p1))){if(DEBUG_ARG&&console.log("arg of a sqrt: "+p1),DEBUG_ARG)debugger;push(cadr(p1)),arg(),DEBUG_ARG&&console.log(" = 1/2 * "+stack[tos-1]),push(caddr(p1)),multiply()}else if(car(p1)===symbol(MULTIPLY))for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),arg(),add(),p1=cdr(p1);else car(p1)===symbol(ADD)?(push(p1),rect(),p1=pop(),push(p1),real(),p2=pop(),push(p1),imag(),p3=pop(),isZeroAtomOrTensor(p2)?(evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),isnegative(p3)&&negate()):(push(p3),push(p2),divide(),arctan(),isnegative(p2)&&(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),isnegative(p3)?subtract():add()))):isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(ARG),push(p1),list(2)):push_integer(0);return restore()},bake=function(){var t,n,a,l,u,c;if(t=0,n=0,a=0,l=0,u=0,c=0,expanding++,save(),p1=pop(),n=ispolyexpandedform(p1,symbol(SYMBOL_S)),a=ispolyexpandedform(p1,symbol(SYMBOL_T)),l=ispolyexpandedform(p1,symbol(SYMBOL_X)),u=ispolyexpandedform(p1,symbol(SYMBOL_Y)),c=ispolyexpandedform(p1,symbol(SYMBOL_Z)),n===1&&a===0&&l===0&&u===0&&c===0)p2=symbol(SYMBOL_S),bake_poly();else if(n===0&&a===1&&l===0&&u===0&&c===0)p2=symbol(SYMBOL_T),bake_poly();else if(n===0&&a===0&&l===1&&u===0&&c===0)p2=symbol(SYMBOL_X),bake_poly();else if(n===0&&a===0&&l===0&&u===1&&c===0)p2=symbol(SYMBOL_Y),bake_poly();else if(n===0&&a===0&&l===0&&u===0&&c===1)p2=symbol(SYMBOL_Z),bake_poly();else if(iscons(p1)&&car(p1)!==symbol(FOR)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),bake(),p1=cdr(p1);list(tos-t)}else push(p1);return restore(),expanding--},polyform=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2))bake_poly();else if(iscons(p1)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),polyform(),p1=cdr(p1);list(tos-t)}else push(p1);return restore()},bake_poly=function(){var t,n,a,l,u,c;for(n=0,a=0,l=0,u=0,t=tos,l=coeff(p2,p1),n=tos,a=c=l-1;c>=0;a=c+=-1)p1=stack[t+a],bake_poly_term(a);return u=tos-n,u>1&&(list(u),push(symbol(ADD)),swap(),cons()),p1=pop(),moveTos(tos-l),push(p1)},bake_poly_term=function(t){var n,a;if(n=0,a=0,!isZeroAtomOrTensor(p1)){if(t===0){if(car(p1)===symbol(ADD))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return}if(n=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else equaln(p1,1)||push(p1);if(t===1?push(p2):(push(symbol(POWER)),push(p2),push_integer(t),list(3)),a=tos-n,a>1)return list(a),push(symbol(MULTIPLY)),swap(),cons()}},Eval_besselj=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),besselj()},besselj=function(){return save(),yybesselj(),restore()},yybesselj=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=jn(n,p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)&&isZeroAtomOrTensor(p2)){push_integer(1);return}if(isZeroAtomOrTensor(p1)&&!isNaN(n)){push_integer(0);return}if(p2.k===NUM&&MEQUAL(p2.q.b,2)){if(MEQUAL(p2.q.a,1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),sine(),multiply();return}if(MEQUAL(p2.q.a,-1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),cosine(),multiply();return}push_integer(MSIGN(p2.q.a)),p3=pop(),push_integer(2),push(p1),divide(),push(p2),push(p3),subtract(),multiply(),push(p1),push(p2),push(p3),subtract(),besselj(),multiply(),push(p1),push(p2),push_integer(2),push(p3),multiply(),subtract(),besselj(),subtract();return}if(isnegativeterm(p1)){push(p1),negate(),push(p2),power(),push(p1),push(p2),negate(),power(),multiply(),push_symbol(BESSELJ),push(p1),negate(),push(p2),list(3),multiply();return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELJ),push(p1),push(p2),negate(),list(3),multiply();return}return push(symbol(BESSELJ)),push(p1),push(p2),list(3)},Eval_bessely=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),bessely()},bessely=function(){return save(),yybessely(),restore()},yybessely=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=yn(n,p1.d),push_double(t);return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELY),push(p1),push(p2),negate(),list(3),multiply();return}push_symbol(BESSELY),push(p1),push(p2),list(3)},mint=function(t){return bigInt(t)},isSmall=function(t){return t.geq(Number.MIN_SAFE_INTEGER)&&t.leq(Number.MAX_SAFE_INTEGER)},setSignTo=function(t,n){if(t.isPositive()){if(n<0)return t.multiply(bigInt(-1))}else if(n>0)return t.multiply(bigInt(-1));return t},makeSignSameAs=function(t,n){if(t.isPositive()){if(n.isNegative())return t.multiply(bigInt(-1))}else if(n.isPositive())return t.multiply(bigInt(-1));return t},makePositive=function(t){return t.isNegative()?t.multiply(bigInt(-1)):t},add_numbers=function(){var t,n,a;if(t=1,n=1,isrational(stack[tos-1])&&isrational(stack[tos-2])){qadd();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),a=t+n,push_double(a),restore()},multiply_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qmul();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t*n),restore()},divide_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qdiv();return}return save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("divide by zero"),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t/n),restore()},invert_number=function(){var t,n;if(save(),p1=pop(),isZeroAtomOrTensor(p1)&&stop("divide by zero"),isdouble(p1)){push_double(1/p1.d),restore();return}return t=bigInt(p1.q.a),n=bigInt(p1.q.b),n=makeSignSameAs(n,t),t=setSignTo(t,1),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=t,push(p1),restore()},compare_rationals=function(t,n){var a,l,u;return u=0,a=mmul(t.q.a,n.q.b),l=mmul(t.q.b,n.q.a),u=mcmp(a,l),u},compare_numbers=function(t,n){var a,l;return a=0,l=0,isrational(t)&&isrational(n)?compare_rationals(t,n):(isdouble(t)?a=t.d:a=convert_rational_to_double(t),isdouble(n)?l=n.d:l=convert_rational_to_double(n),a<l?-1:a>l?1:0)},negate_number=function(){if(save(),p1=pop(),isZeroAtomOrTensor(p1)){push(p1),restore();return}switch(p1.k){case NUM:p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a.multiply(bigInt.minusOne)),p2.q.b=bigInt(p1.q.b),push(p2);break;case DOUBLE:push_double(-p1.d);break;default:stop("bug caught in mp_negate_number")}return restore()},bignum_truncate=function(){var t;return save(),p1=pop(),t=mdiv(p1.q.a,p1.q.b),p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=bigInt(1),push(p1),restore()},mp_numerator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a),p2.q.b=bigInt(1),push(p2),restore()},mp_denominator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.b),p2.q.b=bigInt(1),push(p2),restore()},bignum_power_number=function(t){var n,a,l;return save(),p1=pop(),n=mpow(p1.q.a,Math.abs(t)),a=mpow(p1.q.b,Math.abs(t)),t<0&&(l=n,n=a,a=l,n=makeSignSameAs(n,a),a=setSignTo(a,1)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=a,push(p1),restore()},convert_rational_to_double=function(t){var n,a;if(t.q==null)debugger;return n=t.q.a.divmod(t.q.b),a=n.quotient+n.remainder/t.q.b.toJSNumber(),a},new_integer=function(t){var n;return n=new U,n.k=NUM,n.q.a=bigInt(t),n.q.b=bigInt(1),n},push_integer=function(t){return DEBUG&&console.log("pushing integer "+t),push(new_integer(t))},push_double=function(t){return save(),p1=new U,p1.k=DOUBLE,p1.d=t,push(p1),restore()},push_rational=function(t,n){var a;return a=new U,a.k=NUM,a.q.a=bigInt(t),a.q.b=bigInt(n),push(a)},pop_integer=function(){var t;switch(t=NaN,save(),p1=pop(),p1.k){case NUM:isinteger(p1)&&isSmall(p1.q.a)&&(t=p1.q.a.toJSNumber());break;case DOUBLE:DEBUG&&console.log("popping integer but double is found"),Math.floor(p1.d)===p1.d&&(DEBUG&&console.log("...altough it's an integer"),t=p1.d)}return restore(),t},bignum_scan_integer=function(t){var n,a,l;return save(),a=0,l=t[a],(l==="+"||l==="-")&&a++,n=bigInt(t.substring(a)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=bigInt(1),push(p1),l==="-"&&negate(),restore()},bignum_scan_float=function(t){return push_double(parseFloat(t))},print_number=function(t,n){var a,l,u;switch(l="",u="",t.k){case NUM:a=t.q.a.toString(),n||a[0]==="-"&&(a=a.substring(1)),printMode===PRINTMODE_LATEX&&isfraction(t)&&(a="\\frac{"+a+"}{"),l+=a,isfraction(t)&&(printMode!==PRINTMODE_LATEX&&(l+="/"),u=t.q.b.toString(),printMode===PRINTMODE_LATEX&&(u+="}"),l+=u);break;case DOUBLE:a=doubleToReasonableString(t.d),n||a[0]==="-"&&(a=a.substring(1)),l+=a}return l},gcd_numbers=function(){return save(),p2=pop(),p1=pop(),p3=new U,p3.k=NUM,p3.q.a=mgcd(p1.q.a,p2.q.a),p3.q.b=mgcd(p1.q.b,p2.q.b),p3.q.a=setSignTo(p3.q.a,1),push(p3),restore()},pop_double=function(){var t;switch(t=0,save(),p1=pop(),p1.k){case NUM:t=convert_rational_to_double(p1);break;case DOUBLE:t=p1.d;break;default:t=0}return restore(),t},bignum_float=function(){var t;return t=0,t=convert_rational_to_double(pop()),push_double(t)},bignum_factorial=function(t){return save(),p1=new U,p1.k=NUM,p1.q.a=__factorial(t),p1.q.b=bigInt(1),push(p1),restore()},__factorial=function(t){var n,a,l,u,c,p;if(l=0,t===0||t===1)return n=bigInt(1),n;if(n=bigInt(2),a=bigInt(0),3<=t)for(l=u=3,c=t;3<=c?u<=c:u>=c;l=3<=c?++u:--u)a=bigInt(l),p=mmul(n,a),n=p;return n},Eval_binomial=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),binomial()},binomial=function(){return save(),ybinomial(),restore()},ybinomial=function(){if(p2=pop(),p1=pop(),BINOM_check_args()===0){push(zero);return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide()},BINOM_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_ceiling=function(){return push(cadr(p1)),Eval(),ceiling()},ceiling=function(){return save(),yyceiling(),restore()},yyceiling=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(CEILING),push(p1),list(2);return}if(isdouble(p1)){t=Math.ceil(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?1:(push_integer(1),add())},Eval_choose=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),choose()},choose=function(){if(save(),p2=pop(),p1=pop(),choose_check_args()===0){push_integer(0),restore();return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide(),restore()},choose_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_circexp=function(){return push(cadr(p1)),Eval(),circexp(),Eval()},circexp=function(){var t,n,a,l;if(n=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),expcos(),restore();return}if(car(p1)===symbol(SIN)){push(cadr(p1)),expsin(),restore();return}if(car(p1)===symbol(TAN)){p1=cadr(p1),push(imaginaryunit),push(p1),multiply(),exponential(),p2=pop(),push(imaginaryunit),push(p1),multiply(),negate(),exponential(),p3=pop(),push(p3),push(p2),subtract(),push(imaginaryunit),multiply(),push(p2),push(p3),add(),divide(),restore();return}if(car(p1)===symbol(COSH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),add(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(SINH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),subtract(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(TANH)){p1=cadr(p1),push(p1),push_integer(2),multiply(),exponential(),p1=pop(),push(p1),push_integer(1),subtract(),push(p1),push_integer(1),add(),divide(),restore();return}if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),circexp(),p1=cdr(p1);list(tos-t),restore();return}if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)push(p1.tensor.elem[n]),circexp(),p1.tensor.elem[n]=pop();push(p1),restore();return}return push(p1),restore()},Eval_clearall=function(){return do_clearall(),push(symbol(NIL))},do_clearall=function(){return test_flag===0&&clear_term(),do_clearPatterns(),clear_symbols(),defn(),codeGen=!1},clearRenamedVariablesToAvoidBindingToExternalScope=function(){var t,n,a,l;for(l=[],t=n=0,a=symtab.length;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t].printname.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")!==-1?(symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],l.push(isSymbolReclaimable[t]=!0)):l.push(void 0);return l},Eval_clear=function(){var t,n;for(p2=cdr(p1);iscons(p2);)n=car(p2),n.k!==SYM&&stop("symbol error"),t=symtab.indexOf(n),symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],isSymbolReclaimable[t]=!0,p2=cdr(p2);return push(symbol(NIL))},DEBUG_CLOCKFORM=!1,Eval_clock=function(){return push(cadr(p1)),Eval(),clockform()},clockform=function(){return save(),p1=pop(),push(p1),abs(),DEBUG_CLOCKFORM&&console.log("clockform: abs of "+p1+" : "+stack[tos-1]),push_symbol(POWER),push_integer(-1),push(p1),arg(),DEBUG_CLOCKFORM&&console.log("clockform: arg of "+p1+" : "+stack[tos-1]),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),divide(),DEBUG_CLOCKFORM&&console.log("clockform: divide : "+stack[tos-1]),list(3),DEBUG_CLOCKFORM&&console.log("clockform: power : "+stack[tos-1]),multiply(),DEBUG_CLOCKFORM&&console.log("clockform: multiply : "+stack[tos-1]),restore()},Eval_coeff=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p3=pop(),p2=pop(),p1=pop(),p3===symbol(NIL)&&(p3=p2,p2=symbol(SYMBOL_X)),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter()},coeff=function(t,n){var a,l,u,c;for(DEBUG&&console.log("coeff: "+t+" "+n),a=0;;){if(push(n),push(t),push(zero),subst(),Eval(),l=pop(),push(l),a++,push(n),push(l),subtract(),u=pop(),equal(u,zero))return DEBUG&&console.log("coeff: result: "+a),a;push(u),push(t),c=expanding,expanding=1,divide(),expanding=c,n=pop()}},Eval_cofactor=function(){var t,n,a;return t=0,n=0,a=0,push(cadr(p1)),Eval(),p2=pop(),istensor(p2)&&p2.tensor.ndim===2&&p2.tensor.dim[0]===p2.tensor.dim[1]||stop("cofactor: 1st arg: square matrix expected"),a=p2.tensor.dim[0],push(caddr(p1)),Eval(),t=pop_integer(),(t<1||t>a)&&stop("cofactor: 2nd arg: row index expected"),push(cadddr(p1)),Eval(),n=pop_integer(),(n<1||n>a)&&stop("cofactor: 3rd arg: column index expected"),cofactor(p2,a,t-1,n-1)},cofactor=function(t,n,a,l){var u,c,p,d,Q,Ct;for(u=0,p=0,u=d=0,Q=n;0<=Q?d<Q:d>Q;u=0<=Q?++d:--d)for(p=c=0,Ct=n;0<=Ct?c<Ct:c>Ct;p=0<=Ct?++c:--c)u!==a&&p!==l&&push(t.tensor.elem[n*u+p]);if(determinant(n-1),(a+l)%2)return negate()},Eval_condense=function(){return push(cadr(p1)),Eval(),Condense()},Condense=function(){var t;return t=expanding,expanding=0,save(),yycondense(),restore(),expanding=t},yycondense=function(){if(p1=pop(),car(p1)!==symbol(ADD)){push(p1);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),DEBUG&&console.log("calculating gcd between: "+stack[tos-1]+" and "+stack[tos-2]),gcd(),DEBUG&&console.log("partial gcd: "+stack[tos-1]),p3=cdr(p3);for(DEBUG&&console.log("condense: this is the gcd of all the terms: "+stack[tos-1]),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply_noexpand(),add(),p3=cdr(p3);return yyexpand(),push(p2),divide()},Eval_conj=function(){return push(cadr(p1)),Eval(),p1=pop(),push(p1),Find(p1,imaginaryunit)?conjugate():(polar(),conjugate(),clockform())},conjugate=function(){return push(imaginaryunit),push(imaginaryunit),negate(),subst(),Eval()},consCount=0,cons=function(){var t;if(consCount++,DEBUG&&console.log("cons tos: "+tos+" # "+consCount),t=new U,t.k=CONS,t.cons.cdr=pop(),t===t.cons.cdr){debugger;console.log("something wrong p == its cdr")}return t.cons.car=pop(),push(t)},Eval_contract=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),contract()},contract=function(){return save(),yycontract(),restore()},yycontract=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux;if(u=0,c=0,d=0,Ct=0,ar=0,tn=0,cn=0,Cn=0,ex=0,n=[],a=[],p3=pop(),p2=pop(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("contract: tensor expected, 1st arg is not a tensor"),push(zero);return}for(push(p2),ar=pop_integer(),push(p3),tn=pop_integer(),Cn=p1.tensor.ndim,(ar<1||ar>Cn||tn<1||tn>Cn||ar===tn||p1.tensor.dim[ar-1]!==p1.tensor.dim[tn-1])&&stop("contract: index out of range"),ar--,tn--,cn=p1.tensor.dim[ar],ex=1,c=ix=0,ox=Cn;0<=ox?ix<ox:ix>ox;c=0<=ox?++ix:--ix)c!==ar&&c!==tn&&(ex*=p1.tensor.dim[c]);for(p2=alloc_tensor(ex),p2.tensor.ndim=Cn-2,d=0,c=p=0,lx=Cn;0<=lx?p<lx:p>lx;c=0<=lx?++p:--p)c!==ar&&c!==tn&&(p2.tensor.dim[d++]=p1.tensor.dim[c]);for(t=p1.tensor.elem,l=p2.tensor.elem,c=Q=0,cx=Cn;0<=cx?Q<cx:Q>cx;c=0<=cx?++Q:--Q)n[c]=0,a[c]=p1.tensor.dim[c];for(c=en=0,dx=ex;0<=dx?en<dx:en>dx;c=0<=dx?++en:--en){for(push(zero),d=on=0,hx=cn;0<=hx?on<hx:on>hx;d=0<=hx?++on:--on){for(n[ar]=d,n[tn]=d,u=0,Ct=gn=0,fx=Cn;0<=fx?gn<fx:gn>fx;Ct=0<=fx?++gn:--gn)u=u*a[Ct]+n[Ct];push(t[u]),add()}for(l[c]=pop(),d=ax=ux=Cn-1;ux<=0?ax<=0:ax>=0;d=ux<=0?++ax:--ax)if(!(d===ar||d===tn)){if(++n[d]<a[d])break;n[d]=0}}return push(ex===1?l[0]:p2)},Eval_cos=function(){return push(cadr(p1)),Eval(),cosine()},cosine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?cosine_of_angle_sum():cosine_of_angle(),restore()},cosine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),cosine(),push(p4),cosine(),multiply(),push(p3),sine(),push(p4),sine(),multiply(),subtract();return}p2=cdr(p2)}return cosine_of_angle()},cosine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCCOS)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cos(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)&&(push(p1),negate(),p1=pop()),car(p1)===symbol(ARCTAN)){push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(COS)),push(p1),list(2);return}switch(n%360){case 90:case 270:return push_integer(0);case 60:case 300:return push_rational(1,2);case 120:case 240:return push_rational(-1,2);case 45:case 315:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 135:case 225:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 30:case 330:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 210:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 0:return push_integer(1);case 180:return push_integer(-1);default:return push(symbol(COS)),push(p1),list(2)}},Eval_cosh=function(){return push(cadr(p1)),Eval(),ycosh()},ycosh=function(){return save(),yycosh(),restore()},yycosh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCCOSH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cosh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}return push_symbol(COSH),push(p1),list(2)},Eval_decomp=function(){var t;return save(),console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!"),t=tos,push(symbol(NIL)),push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),decomp(!1),list(tos-t),restore()},pushTryNotToDuplicate=function(t){if(tos>0&&(DEBUG&&console.log("comparing "+t+" to: "+stack[tos-1]),equal(t,stack[tos-1]))){DEBUG&&console.log("skipping "+t+" because it's already on stack ");return}return push(t)},decomp=function(t){if(save(),p2=pop(),p1=pop(),DEBUG&&console.log("DECOMPOSING "+p1),t){if(!iscons(p1)){DEBUG&&console.log(" ground thing: "+p1),pushTryNotToDuplicate(p1),restore();return}}else if(Find(p1,p2)===0){DEBUG&&console.log(" entire expression is constant"),pushTryNotToDuplicate(p1),restore();return}if(isadd(p1)){decomp_sum(t),restore();return}if(ismultiply(p1)){decomp_product(t),restore();return}for(DEBUG&&console.log(" naive decomp"),p3=cdr(p1),DEBUG&&console.log("startig p3: "+p3);iscons(p3);)t&&push(car(p3)),DEBUG&&console.log("recursive decomposition"),push(car(p3)),DEBUG&&console.log("car(p3): "+car(p3)),push(p2),DEBUG&&console.log("p2: "+p2),decomp(t),p3=cdr(p3);return restore()},decomp_sum=function(t){var n;for(DEBUG&&console.log(" decomposing the sum "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return add_all(tos-n),p3=pop(),pushTryNotToDuplicate(p3),push(p3),negate()},decomp_product=function(t){var n;for(DEBUG&&console.log(" decomposing the product "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return multiply_all(tos-n)},define_user_function=function(){return p3=caadr(p1),p4=cdadr(p1),p5=caddr(p1),issymbol(p3)||stop("function name?"),car(p5)===symbol(EVAL)&&(push(cadr(p5)),Eval(),p5=pop()),push_symbol(FUNCTION),push(p5),push(p4),list(3),p5=pop(),set_binding(p3,p5),push_symbol(NIL)},Eval_function_reference=function(){return push(p1)},Eval_defint=function(){for(push(cadr(p1)),Eval(),p2=pop(),p1=cddr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1),Eval(),p3=pop(),push(car(p1)),p1=cdr(p1),Eval(),p4=pop(),push(car(p1)),p1=cdr(p1),Eval(),p5=pop(),push(p2),push(p3),integral(),p2=pop(),push(p2),push(p3),push(p5),subst(),Eval(),push(p2),push(p3),push(p4),subst(),Eval(),subtract(),p2=pop();return push(p2)},Eval_degree=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),degree()},degree=function(){return save(),p2=pop(),p1=pop(),p3=zero,yydegree(p1),push(p3),restore()},yydegree=function(t){var n;if(equal(t,p2)){if(isZeroAtomOrTensor(p3))return p3=one}else if(car(t)===symbol(POWER)){if(equal(cadr(t),p2)&&isNumericAtom(caddr(t))&&lessp(p3,caddr(t)))return p3=caddr(t)}else if(iscons(t)){for(t=cdr(t),n=[];iscons(t);)yydegree(car(t)),n.push(t=cdr(t));return n}},Eval_denominator=function(){return push(cadr(p1)),Eval(),denominator()},denominator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),denominator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_denominator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?(push(n),reciprocate()):push(one)},Eval_derivative=function(){var t,n,a,l,u;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth derivative: check n")):n=1,push(p3),n>=0)for(a=0,l=n;0<=l?a<l:a>l;0<=l?++a:--a)push(p4),derivative();else for(n=-n,t=0,u=n;0<=u?t<u:t>u;0<=u?++t:--t)push(p4),integral();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},derivative=function(){return save(),p2=pop(),p1=pop(),isNumericAtom(p2)&&stop("undefined function"),istensor(p1)?istensor(p2)?d_tensor_tensor():d_tensor_scalar():istensor(p2)?d_scalar_tensor():d_scalar_scalar(),restore()},d_scalar_scalar=function(){return issymbol(p2)?d_scalar_scalar_1():(push(p1),push(p2),push(symbol(SECRETX)),subst(),push(symbol(SECRETX)),derivative(),push(symbol(SECRETX)),push(p2),subst())},d_scalar_scalar_1=function(){if(equal(p1,p2)){push(one);return}if(!iscons(p1)){push(zero);return}if(isadd(p1)){dsum();return}if(car(p1)===symbol(MULTIPLY)){dproduct();return}if(car(p1)===symbol(POWER)){dpower();return}if(car(p1)===symbol(DERIVATIVE)){dd();return}if(car(p1)===symbol(LOG)){dlog();return}if(car(p1)===symbol(SIN)){dsin();return}if(car(p1)===symbol(COS)){dcos();return}if(car(p1)===symbol(TAN)){dtan();return}if(car(p1)===symbol(ARCSIN)){darcsin();return}if(car(p1)===symbol(ARCCOS)){darccos();return}if(car(p1)===symbol(ARCTAN)){darctan();return}if(car(p1)===symbol(SINH)){dsinh();return}if(car(p1)===symbol(COSH)){dcosh();return}if(car(p1)===symbol(TANH)){dtanh();return}if(car(p1)===symbol(ARCSINH)){darcsinh();return}if(car(p1)===symbol(ARCCOSH)){darccosh();return}if(car(p1)===symbol(ARCTANH)){darctanh();return}if(car(p1)===symbol(ABS)){dabs();return}if(car(p1)===symbol(SGN)){dsgn();return}if(car(p1)===symbol(HERMITE)){dhermite();return}if(car(p1)===symbol(ERF)){derf();return}if(car(p1)===symbol(ERFC)){derfc();return}if(car(p1)===symbol(BESSELJ)){isZeroAtomOrTensor(caddr(p1))?dbesselj0():dbesseljn();return}if(car(p1)===symbol(BESSELY)){isZeroAtomOrTensor(caddr(p1))?dbessely0():dbesselyn();return}if(car(p1)===symbol(INTEGRAL)&&caddr(p1)===p2){derivative_of_integral();return}return dfunction()},dsum=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),derivative(),p1=cdr(p1);return add_all(tos-t)},dproduct=function(){var t,n,a,l,u,c,p;for(t=0,a=0,l=0,l=length(p1)-1,t=u=0,c=l;0<=c?u<c:u>c;t=0<=c?++u:--u){for(p3=cdr(p1),a=n=0,p=l;0<=p?n<p:n>p;a=0<=p?++n:--n)push(car(p3)),t===a&&(push(p2),derivative()),p3=cdr(p3);multiply_all(l)}return add_all(l)},dpower=function(){return push(caddr(p1)),push(cadr(p1)),divide(),push(cadr(p1)),push(p2),derivative(),multiply(),push(cadr(p1)),logarithm(),push(caddr(p1)),push(p2),derivative(),multiply(),add(),push(p1),multiply()},dlog=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),divide()},dd=function(){return push(cadr(p1)),push(p2),derivative(),p3=pop(),car(p3)===symbol(DERIVATIVE)?(push_symbol(DERIVATIVE),push_symbol(DERIVATIVE),push(cadr(p3)),lessp(caddr(p3),caddr(p1))?(push(caddr(p3)),list(3),push(caddr(p1))):(push(caddr(p1)),list(3),push(caddr(p3))),list(3)):(push(p3),push(caddr(p1)),derivative())},dfunction=function(){return p3=cdr(p1),p3===symbol(NIL)||Find(p3,p2)?(push_symbol(DERIVATIVE),push(p1),push(p2),list(3)):push(zero)},dsin=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),multiply()},dcos=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sine(),multiply(),negate()},dtan=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),push_integer(-2),power(),multiply()},darcsin=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply()},darccos=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply(),negate()},darctan=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),inverse(),multiply(),simplify()},dsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),multiply()},dcosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ysinh(),multiply()},dtanh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),push_integer(-2),power(),multiply()},darcsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(1),add(),push_rational(-1,2),power(),multiply()},darccosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(-1),add(),push_rational(-1,2),power(),multiply()},darctanh=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),inverse(),multiply()},dabs=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sgn(),multiply()},dsgn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),dirac(),multiply(),push_integer(2),multiply()},dhermite=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(2),push(caddr(p1)),multiply(),multiply(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),hermite(),multiply()},derf=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},derfc=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(-2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},dbesselj0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesseljn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),besselj(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),besselj(),multiply(),add(),multiply()},dbessely0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesselyn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),bessely(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),bessely(),multiply(),add(),multiply()},derivative_of_integral=function(){return push(cadr(p1))},DET_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},det=function(){var t,n,a,l,u,c,p;if(n=0,l=0,save(),p1=pop(),DET_check_arg()===0){push_symbol(DET),push(p1),list(2),restore();return}for(l=p1.tensor.nelem,t=p1.tensor.elem,n=u=0,c=l;(0<=c?u<c:u>c)&&isNumericAtom(t[n]);n=0<=c?++u:--u);if(n===l)yydetg();else{for(n=a=0,p=p1.tensor.nelem;0<=p?a<p:a>p;n=0<=p?++a:--a)push(p1.tensor.elem[n]);determinant(p1.tensor.dim[0])}return restore()},determinant=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn;for(l=0,u=0,p=0,d=0,Ct=0,tn=0,on=0,cn=0,n=[],l=tos-t*t,u=Q=0,ar=t;0<=ar?Q<ar:Q>ar;u=0<=ar?++Q:--Q)n[u]=u,n[u+t]=0,n[u+t+t]=1;for(on=1,push(zero);;){for(push_integer(on===1?1:-1),u=c=0,en=t;0<=en?c<en:c>en;u=0<=en?++c:--c)d=t*n[u]+u,push(stack[l+d]),multiply();for(add(),p=t-1,tn=0,a=!1;;){if(Ct=n[t+p]+n[t+t+p],Ct<0){n[t+t+p]=-n[t+t+p],p--;continue}if(Ct===p+1){if(p===0){a=!0;break}tn++,n[t+t+p]=-n[t+t+p],p--;continue}break}if(a)break;cn=n[p-n[t+p]+tn],n[p-n[t+p]+tn]=n[p-Ct+tn],n[p-Ct+tn]=cn,n[t+p]=Ct,on=-on}return stack[l]=stack[tos-1],moveTos(l+1)},yydetg=function(){var t,n,a,l;for(t=0,n=0,n=p1.tensor.dim[0],t=a=0,l=n*n;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p1.tensor.elem[t]);return lu_decomp(n),moveTos(tos-n*n),push(p1)},M=function(t,n,a,l){return stack[t+n*a+l]},setM=function(t,n,a,l,u){return stack[t+n*a+l]=u},lu_decomp=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix;for(n=0,a=0,l=0,c=0,a=tos-t*t,p1=one,n=Ct=0,ar=t-1;0<=ar?Ct<ar:Ct>ar;n=0<=ar?++Ct:--Ct){if(equal(M(a,t,n,n),zero)){for(l=u=en=n+1,tn=t;(en<=tn?u<tn:u>tn)&&equal(M(a,t,l,n),zero);l=en<=tn?++u:--u);if(l===t){p1=zero;break}for(c=p=on=n,cn=t;on<=cn?p<cn:p>cn;c=on<=cn?++p:--p)p2=M(a,t,n,c),setM(a,t,n,c,M(a,t,l,c)),setM(a,t,l,c,p2);push(p1),negate(),p1=pop()}for(push(p1),push(M(a,t,n,n)),multiply(),p1=pop(),l=d=gn=n+1,Cn=t;gn<=Cn?d<Cn:d>Cn;l=gn<=Cn?++d:--d)for(push(M(a,t,l,n)),push(M(a,t,n,n)),divide(),negate(),p2=pop(),setM(a,t,l,n,zero),c=Q=ex=n+1,ix=t;ex<=ix?Q<ix:Q>ix;c=ex<=ix?++Q:--Q)push(M(a,t,n,c)),push(p2),multiply(),push(M(a,t,l,c)),add(),setM(a,t,l,c,pop())}return push(p1),push(M(a,t,t-1,t-1)),multiply(),p1=pop()},Eval_dirac=function(){return push(cadr(p1)),Eval(),dirac()},dirac=function(){return save(),ydirac(),restore()},ydirac=function(){if(p1=pop(),isdouble(p1))if(p1.d===0){push_integer(1);return}else{push_integer(0);return}if(isrational(p1))if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(1);return}else{push_integer(0);return}if(car(p1)===symbol(POWER)){push_symbol(DIRAC),push(cadr(p1)),list(2);return}if(isnegativeterm(p1)){push_symbol(DIRAC),push(p1),negate(),list(2);return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),push_symbol(DIRAC),push(p1),list(2)},divisors=function(){var t,n,a,l,u,c;for(n=0,t=0,a=0,save(),t=tos-1,divisors_onstack(),a=tos-t,c=stack.slice(t,t+a),c.sort(cmp_expr),stack=stack.slice(0,t).concat(c).concat(stack.slice(t+a)),p1=alloc_tensor(a),p1.tensor.ndim=1,p1.tensor.dim[0]=a,n=l=0,u=a;0<=u?l<u:l>u;n=0<=u?++l:--l)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore()},divisors_onstack=function(){var t,n,a,l,u,c;if(t=0,n=0,a=0,l=0,save(),p1=pop(),t=tos,isNumericAtom(p1))push(p1),factor_small_number();else if(car(p1)===symbol(ADD))push(p1),__factor_add();else if(car(p1)===symbol(MULTIPLY))for(p1=cdr(p1),isNumericAtom(car(p1))&&(push(car(p1)),factor_small_number(),p1=cdr(p1));iscons(p1);)p2=car(p1),car(p2)===symbol(POWER)?(push(cadr(p2)),push(caddr(p2))):(push(p2),push(one)),p1=cdr(p1);else car(p1)===symbol(POWER)?(push(cadr(p1)),push(caddr(p1))):(push(p1),push(one));for(a=tos,push(one),gen(t,a),l=tos-a,n=u=0,c=l;0<=c?u<c:u>c;n=0<=c?++u:--u)stack[t+n]=stack[a+n];return moveTos(t+l),restore()},gen=function(t,n){var a,l,u,c;if(a=0,l=0,save(),p1=pop(),t===n){push(p1),restore();return}if(p2=stack[t+0],p3=stack[t+1],push(p3),a=pop_integer(),!isNaN(a))for(l=u=0,c=Math.abs(a);0<=c?u<=c:u>=c;l=0<=c?++u:--u)push(p1),push(p2),push_integer(sign(a)*l),power(),multiply(),gen(t+2,n);return restore()},__factor_add=function(){for(save(),p1=pop(),p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);if(p2=pop(),isplusone(p2)){push(p1),push(one),restore();return}if(isNumericAtom(p2))push(p2),factor_small_number();else if(car(p2)===symbol(MULTIPLY))for(p3=cdr(p2),isNumericAtom(car(p3))?(push(car(p3)),factor_small_number()):(push(car(p3)),push(one)),p3=cdr(p3);iscons(p3);)push(car(p3)),push(one),p3=cdr(p3);else push(p2),push(one);for(push(p2),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply(),add(),p3=cdr(p3);return push(one),restore()},dpow=function(){var t,n,a,l,u,c;if(t=0,n=0,a=0,l=0,u=0,c=0,l=pop_double(),a=pop_double(),a===0&&l<0&&stop("divide by zero"),a>=0||l%1===0){u=Math.pow(a,l),push_double(u);return}return u=Math.pow(Math.abs(a),l),c=Math.PI*l,l%.5===0?(t=0,n=Math.sin(c)):(t=Math.cos(c),n=Math.sin(c)),push_double(t*u),push_double(n*u),push(imaginaryunit),multiply(),add()},EIG_N=0,EIG_yydd=[],EIG_yyqq=[],Eval_eigen=function(){return EIG_check_arg()===0&&stop("eigen: argument is not a square matrix"),eigen(EIGEN),p1=usr_symbol("D"),set_binding(p1,p2),p1=usr_symbol("Q"),set_binding(p1,p3),push(symbol(NIL))},Eval_eigenval=function(){if(EIG_check_arg()===0){push_symbol(EIGENVAL),push(p1),list(2);return}return eigen(EIGENVAL),push(p2)},Eval_eigenvec=function(){if(EIG_check_arg()===0){push_symbol(EIGENVEC),push(p1),list(2);return}return eigen(EIGENVEC),push(p3)},EIG_check_arg=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar;if(t=0,a=0,push(cadr(p1)),Eval(),yyfloat(),Eval(),p1=pop(),!istensor(p1))return 0;for((p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1])&&stop("eigen: argument is not a square matrix"),EIG_N=p1.tensor.dim[0],t=c=0,p=EIG_N;0<=p?c<p:c>p;t=0<=p?++c:--c)for(a=n=0,d=EIG_N;0<=d?n<d:n>d;a=0<=d?++n:--n)isdouble(p1.tensor.elem[EIG_N*t+a])||stop("eigen: matrix is not numerical");for(t=l=0,Q=EIG_N-1;0<=Q?l<Q:l>Q;t=0<=Q?++l:--l)for(a=u=Ct=t+1,ar=EIG_N;Ct<=ar?u<ar:u>ar;a=Ct<=ar?++u:--u)Math.abs(p1.tensor.elem[EIG_N*t+a].d-p1.tensor.elem[EIG_N*a+t].d)>1e-10&&stop("eigen: matrix is not symmetrical");return 1},eigen=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx;for(n=0,l=0,n=Q=0,tn=EIG_N*EIG_N;0<=tn?Q<tn:Q>tn;n=0<=tn?++Q:--Q)EIG_yydd[n]=0;for(n=a=0,on=EIG_N*EIG_N;0<=on?a<on:a>on;n=0<=on?++a:--a)EIG_yyqq[n]=0;for(n=u=0,gn=EIG_N;0<=gn?u<gn:u>gn;n=0<=gn?++u:--u)for(EIG_yydd[EIG_N*n+n]=p1.tensor.elem[EIG_N*n+n].d,l=c=Cn=n+1,ex=EIG_N;Cn<=ex?c<ex:c>ex;l=Cn<=ex?++c:--c)EIG_yydd[EIG_N*n+l]=p1.tensor.elem[EIG_N*n+l].d,EIG_yydd[EIG_N*l+n]=p1.tensor.elem[EIG_N*n+l].d;for(n=p=0,ix=EIG_N;0<=ix?p<ix:p>ix;n=0<=ix?++p:--p)for(EIG_yyqq[EIG_N*n+n]=1,l=d=ax=n+1,ox=EIG_N;ax<=ox?d<ox:d>ox;l=ax<=ox?++d:--d)EIG_yyqq[EIG_N*n+l]=0,EIG_yyqq[EIG_N*l+n]=0;for(n=Ct=0;Ct<100&&step()!==0;n=++Ct);if(n===100&&printstr(`
note: eigen did not converge
`),t===EIGEN||t===EIGENVAL)for(push(p1),copy_tensor(),p2=pop(),n=ar=0,lx=EIG_N;0<=lx?ar<lx:ar>lx;n=0<=lx?++ar:--ar)for(l=en=0,cx=EIG_N;0<=cx?en<cx:en>cx;l=0<=cx?++en:--en)push_double(EIG_yydd[EIG_N*n+l]),p2.tensor.elem[EIG_N*n+l]=pop();if(t===EIGEN||t===EIGENVEC){for(push(p1),copy_tensor(),p3=pop(),dx=[],n=hx=0,cn=EIG_N;0<=cn?hx<cn:hx>cn;n=0<=cn?++hx:--hx)dx.push(function(){var fx,ux,gx;for(ux=[],l=gx=0,fx=EIG_N;0<=fx?gx<fx:gx>fx;l=0<=fx?++gx:--gx)push_double(EIG_yyqq[EIG_N*n+l]),ux.push(p3.tensor.elem[EIG_N*n+l]=pop());return ux}());return dx}},step=function(){var t,n,a,l,u,c,p,d;for(n=0,l=0,t=0,n=u=0,c=EIG_N-1;0<=c?u<c:u>c;n=0<=c?++u:--u)for(l=a=p=n+1,d=EIG_N;p<=d?a<d:a>d;l=p<=d?++a:--a)EIG_yydd[EIG_N*n+l]!==0&&(step2(n,l),t++);return t},step2=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn;for(p=0,on=0,cn=0,a=0,l=0,en=0,tn=0,cn=.5*(EIG_yydd[EIG_N*t+t]-EIG_yydd[EIG_N*n+n])/EIG_yydd[EIG_N*t+n],on=1/(Math.abs(cn)+Math.sqrt(cn*cn+1)),cn<0&&(on=-on),a=1/Math.sqrt(on*on+1),en=on*a,p=d=0,Q=EIG_N;0<=Q?d<Q:d>Q;p=0<=Q?++d:--d)l=EIG_yydd[EIG_N*t+p],tn=EIG_yydd[EIG_N*n+p],EIG_yydd[EIG_N*t+p]=a*l+en*tn,EIG_yydd[EIG_N*n+p]=a*tn-en*l;for(p=u=0,Ct=EIG_N;0<=Ct?u<Ct:u>Ct;p=0<=Ct?++u:--u)l=EIG_yydd[EIG_N*p+t],tn=EIG_yydd[EIG_N*p+n],EIG_yydd[EIG_N*p+t]=a*l+en*tn,EIG_yydd[EIG_N*p+n]=a*tn-en*l;for(p=c=0,ar=EIG_N;0<=ar?c<ar:c>ar;p=0<=ar?++c:--c)l=EIG_yyqq[EIG_N*t+p],tn=EIG_yyqq[EIG_N*n+p],EIG_yyqq[EIG_N*t+p]=a*l+en*tn,EIG_yyqq[EIG_N*n+p]=a*tn-en*l;return EIG_yydd[EIG_N*t+n]=0,EIG_yydd[EIG_N*n+t]=0},Eval_erf=function(){return push(cadr(p1)),Eval(),yerf()},yerf=function(){return save(),yyerf(),restore()},yyerf=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=1-erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}if(isnegativeterm(p1)){push_symbol(ERF),push(p1),negate(),list(2),negate();return}push_symbol(ERF),push(p1),list(2)},Eval_erfc=function(){return push(cadr(p1)),Eval(),yerfc()},yerfc=function(){return save(),yyerfc(),restore()},yyerfc=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}push_symbol(ERFC),push(p1),list(2)},erfc=function(t){var n,a,l;return t===0?1:(a=0,l=0,n=0,l=Math.abs(t),a=1/(1+.5*l),n=a*Math.exp(-l*l-1.26551223+a*(1.00002368+a*(.37409196+a*(.09678418+a*(-.18628806+a*(.27886807+a*(-1.13520398+a*(1.48851587+a*(-.82215223+a*.17087277))))))))),t>=0?n:2-n)},Eval=function(){var t;if(check_esc_flag(),save(),p1=pop(),p1==null)debugger;switch(!evaluatingAsFloats&&isfloating(p1)&&(t=!0,evaluatingAsFloats++),p1.k){case CONS:Eval_cons();break;case NUM:evaluatingAsFloats?push_double(convert_rational_to_double(p1)):push(p1);break;case DOUBLE:case STR:push(p1);break;case TENSOR:Eval_tensor();break;case SYM:Eval_sym();break;default:stop("atom?")}return t&&evaluatingAsFloats--,restore()},Eval_sym=function(){var t,n,a,l,u,c;if(iskeyword(p1)){push(p1),push(symbol(LAST)),list(2),Eval();return}else if(p1===symbol(PI)&&evaluatingAsFloats){push_double(Math.PI);return}if(p2=get_binding(p1),DEBUG&&console.log("looked up: "+p1+" which contains: "+p2),push(p2),p1!==p2){if(l=chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(p1),l!==-1){for(t="",n=a=u=l,c=chainOfUserSymbolsNotFunctionsBeingEvaluated.length;u<=c?a<c:a>c;n=u<=c?++a:--a)t+=chainOfUserSymbolsNotFunctionsBeingEvaluated[n].printname+" -> ";t+=p1.printname,stop("recursive evaluation of symbols: "+t);return}return chainOfUserSymbolsNotFunctionsBeingEvaluated.push(p1),Eval(),chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}},Eval_cons=function(){var t;if(t=car(p1),car(t)===symbol(EVAL)){Eval_user_function();return}switch(issymbol(t)||stop("cons?"),symnum(t)){case ABS:return Eval_abs();case ADD:return Eval_add();case ADJ:return Eval_adj();case AND:return Eval_and();case ARCCOS:return Eval_arccos();case ARCCOSH:return Eval_arccosh();case ARCSIN:return Eval_arcsin();case ARCSINH:return Eval_arcsinh();case ARCTAN:return Eval_arctan();case ARCTANH:return Eval_arctanh();case ARG:return Eval_arg();case ATOMIZE:return Eval_atomize();case BESSELJ:return Eval_besselj();case BESSELY:return Eval_bessely();case BINDING:return Eval_binding();case BINOMIAL:return Eval_binomial();case CEILING:return Eval_ceiling();case CHECK:return Eval_check();case CHOOSE:return Eval_choose();case CIRCEXP:return Eval_circexp();case CLEAR:return Eval_clear();case CLEARALL:return Eval_clearall();case CLEARPATTERNS:return Eval_clearpatterns();case CLOCK:return Eval_clock();case COEFF:return Eval_coeff();case COFACTOR:return Eval_cofactor();case CONDENSE:return Eval_condense();case CONJ:return Eval_conj();case CONTRACT:return Eval_contract();case COS:return Eval_cos();case COSH:return Eval_cosh();case DECOMP:return Eval_decomp();case DEGREE:return Eval_degree();case DEFINT:return Eval_defint();case DENOMINATOR:return Eval_denominator();case DERIVATIVE:return Eval_derivative();case DET:return Eval_det();case DIM:return Eval_dim();case DIRAC:return Eval_dirac();case DIVISORS:return Eval_divisors();case DO:return Eval_do();case DOT:return Eval_inner();case DRAW:return Eval_draw();case DSOLVE:return Eval_dsolve();case EIGEN:return Eval_eigen();case EIGENVAL:return Eval_eigenval();case EIGENVEC:return Eval_eigenvec();case ERF:return Eval_erf();case ERFC:return Eval_erfc();case EVAL:return Eval_Eval();case EXP:return Eval_exp();case EXPAND:return Eval_expand();case EXPCOS:return Eval_expcos();case EXPSIN:return Eval_expsin();case FACTOR:return Eval_factor();case FACTORIAL:return Eval_factorial();case FACTORPOLY:return Eval_factorpoly();case FILTER:return Eval_filter();case FLOATF:return Eval_float();case APPROXRATIO:return Eval_approxratio();case FLOOR:return Eval_floor();case FOR:return Eval_for();case FUNCTION:return Eval_function_reference();case GAMMA:return Eval_gamma();case GCD:return Eval_gcd();case HERMITE:return Eval_hermite();case HILBERT:return Eval_hilbert();case IMAG:return Eval_imag();case INDEX:return Eval_index();case INNER:return Eval_inner();case INTEGRAL:return Eval_integral();case INV:return Eval_inv();case INVG:return Eval_invg();case ISINTEGER:return Eval_isinteger();case ISPRIME:return Eval_isprime();case LAGUERRE:return Eval_laguerre();case LCM:return Eval_lcm();case LEADING:return Eval_leading();case LEGENDRE:return Eval_legendre();case LOG:return Eval_log();case LOOKUP:return Eval_lookup();case MOD:return Eval_mod();case MULTIPLY:return Eval_multiply();case NOT:return Eval_not();case NROOTS:return Eval_nroots();case NUMBER:return Eval_number();case NUMERATOR:return Eval_numerator();case OPERATOR:return Eval_operator();case OR:return Eval_or();case OUTER:return Eval_outer();case PATTERN:return Eval_pattern();case PATTERNSINFO:return Eval_patternsinfo();case POLAR:return Eval_polar();case POWER:return Eval_power();case PRIME:return Eval_prime();case PRINT:return Eval_print();case PRINT2DASCII:return Eval_print2dascii();case PRINTFULL:return Eval_printcomputer();case PRINTLATEX:return Eval_printlatex();case PRINTLIST:return Eval_printlist();case PRINTPLAIN:return Eval_printhuman();case PRODUCT:return Eval_product();case QUOTE:return Eval_quote();case QUOTIENT:return Eval_quotient();case RANK:return Eval_rank();case RATIONALIZE:return Eval_rationalize();case REAL:return Eval_real();case ROUND:return Eval_round();case YYRECT:return Eval_rect();case ROOTS:return Eval_roots();case SETQ:return Eval_setq();case SGN:return Eval_sgn();case SILENTPATTERN:return Eval_silentpattern();case SIMPLIFY:return Eval_simplify();case SIN:return Eval_sin();case SINH:return Eval_sinh();case SHAPE:return Eval_shape();case SQRT:return Eval_sqrt();case STOP:return Eval_stop();case SUBST:return Eval_subst();case SUM:return Eval_sum();case SYMBOLSINFO:return Eval_symbolsinfo();case TAN:return Eval_tan();case TANH:return Eval_tanh();case TAYLOR:return Eval_taylor();case TEST:return Eval_test();case TESTEQ:return Eval_testeq();case TESTGE:return Eval_testge();case TESTGT:return Eval_testgt();case TESTLE:return Eval_testle();case TESTLT:return Eval_testlt();case TRANSPOSE:return Eval_transpose();case UNIT:return Eval_unit();case ZERO:return Eval_zero();default:return Eval_user_function()}},Eval_binding=function(){return push(get_binding(cadr(p1)))},Eval_check=function(){var t;return t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(p1):push_integer(t)},Eval_det=function(){return push(cadr(p1)),Eval(),det()},Eval_dim=function(){var t;return push(cadr(p1)),Eval(),p2=pop(),iscons(cddr(p1))?(push(caddr(p1)),Eval(),t=pop_integer()):t=1,istensor(p2)?t<1||t>p2.tensor.ndim?push(p1):push_integer(p2.tensor.dim[t-1]):push_integer(1)},Eval_divisors=function(){return push(cadr(p1)),Eval(),divisors()},Eval_do=function(){var t;for(push(car(p1)),p1=cdr(p1),t=[];iscons(p1);)pop(),push(car(p1)),Eval(),t.push(p1=cdr(p1));return t},Eval_dsolve=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),dsolve()},Eval_Eval=function(){for(push(cadr(p1)),Eval(),p1=cddr(p1);iscons(p1);)push(car(p1)),Eval(),push(cadr(p1)),Eval(),subst(),p1=cddr(p1);return Eval()},Eval_exp=function(){return push(cadr(p1)),Eval(),exponential()},Eval_factorial=function(){return push(cadr(p1)),Eval(),factorial()},Eval_factorpoly=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),factorpoly(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factorpoly(),t.push(p1=cdr(p1));return t},Eval_hermite=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),hermite()},Eval_hilbert=function(){return push(cadr(p1)),Eval(),hilbert()},Eval_index=function(){var t,n,a;if(t=tos,n=p1,p1=cdr(p1),push(car(p1)),Eval(),a=stack[tos-1],isNumericAtom(a)&&stop("trying to access a scalar as a tensor"),!istensor(a)){moveTos(t),push(n);return}for(p1=cdr(p1);iscons(p1);){if(push(car(p1)),Eval(),!isintegerorintegerfloat(stack[tos-1])){moveTos(t),push(n);return}p1=cdr(p1)}return index_function(tos-t)},Eval_inv=function(){return push(cadr(p1)),Eval(),inv()},Eval_invg=function(){return push(cadr(p1)),Eval(),invg()},Eval_isinteger=function(){var t;if(push(cadr(p1)),Eval(),p1=pop(),isrational(p1)){isinteger(p1)?push(one):push(zero);return}if(isdouble(p1)){t=Math.floor(p1.d),t===p1.d?push(one):push(zero);return}return push_symbol(ISINTEGER),push(p1),list(2)},Eval_number=function(){return push(cadr(p1)),Eval(),p1=pop(),p1.k===NUM||p1.k===DOUBLE?push_integer(1):push_integer(0)},Eval_operator=function(){var t;for(t=tos,push_symbol(OPERATOR),p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);return list(tos-t)},Eval_quote=function(){return push(cadr(p1))},Eval_rank=function(){return push(cadr(p1)),Eval(),p1=pop(),istensor(p1)?push_integer(p1.tensor.ndim):push(zero)},Eval_setq=function(){if(caadr(p1)===symbol(INDEX)){setq_indexed();return}if(iscons(cadr(p1))){define_user_function();return}return issymbol(cadr(p1))||stop("symbol assignment: error in symbol"),push(caddr(p1)),Eval(),p2=pop(),set_binding(cadr(p1),p2),push(symbol(NIL))},setq_indexed=function(){var t;for(p4=cadadr(p1),issymbol(p4)||stop("indexed assignment: expected a symbol name"),t=tos,push(caddr(p1)),Eval(),p2=cdadr(p1);iscons(p2);)push(car(p2)),Eval(),p2=cdr(p2);return set_component(tos-t),p3=pop(),set_binding(p4,p3),push(symbol(NIL))},Eval_sqrt=function(){return push(cadr(p1)),Eval(),push_rational(1,2),power()},Eval_stop=function(){return stop("user stop")},Eval_subst=function(){return push(cadddr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadr(p1)),Eval(),subst(),Eval()},Eval_unit=function(){var t,n,a,l;if(t=0,n=0,push(cadr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(n<1){push(p1);return}for(p1=alloc_tensor(n*n),p1.tensor.ndim=2,p1.tensor.dim[0]=n,p1.tensor.dim[1]=n,t=a=0,l=n;0<=l?a<l:a>l;t=0<=l?++a:--a)p1.tensor.elem[n*t+t]=one;return check_tensor_dimensions(p1),push(p1)},Eval_predicate=function(){return save(),p1=top(),car(p1)===symbol(SETQ)&&(pop(),push_symbol(TESTEQ),push(cadr(p1)),push(caddr(p1)),list(3)),Eval(),restore()},Eval_expand=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),expand()},expand=function(){var t;if(save(),p9=pop(),p5=pop(),istensor(p5)){expand_tensor(),restore();return}if(car(p5)===symbol(ADD)){for(push_integer(0),p1=cdr(p5);iscons(p1);)push(car(p1)),push(p9),expand(),add(),p1=cdr(p1);restore();return}if(push(p5),numerator(),p3=pop(),push(p5),denominator(),p2=pop(),remove_negative_exponents(),push(p3),push(p2),push(p9),(isone(p3)||isone(p2))&&(!ispolyexpandedform(p2,p9)||isone(p2))){pop(),pop(),pop(),push(p5),restore();return}if(divpoly(),p7=pop(),push(p3),push(p2),push(p7),multiply(),subtract(),p3=pop(),isZeroAtomOrTensor(p3)){push(p7),restore();return}return push(p2),push(p9),factorpoly(),p2=pop(),expand_get_C(),expand_get_B(),expand_get_A(),istensor(p4)?(push(p4),t=expanding,expanding=1,inv(),expanding=t,push(p3),inner(),push(p2),inner()):(push(p3),push(p4),t=expanding,expanding=1,divide(),expanding=t,push(p2),multiply()),push(p7),add(),restore()},expand_tensor=function(){var t,n,a;for(t=0,push(p5),copy_tensor(),p5=pop(),t=n=0,a=p5.tensor.nelem;0<=a?n<a:n>a;t=0<=a?++n:--n)push(p5.tensor.elem[t]),push(p9),expand(),p5.tensor.elem[t]=pop();return push(p5)},remove_negative_exponents=function(){var t,n,a,l,u,c,p;for(t=0,n=0,a=0,l=0,u=0,t=tos,factors(p2),factors(p3),u=tos-t,a=0,n=c=0,p=u;0<=p?c<p:c>p;n=0<=p?++c:--c)p1=stack[t+n],car(p1)===symbol(POWER)&&cadr(p1)===p9&&(push(caddr(p1)),l=pop_integer(),!isNaN(l)&&l<a&&(a=l));if(moveTos(t),a!==0)return push(p2),push(p9),push_integer(-a),power(),multiply(),p2=pop(),push(p3),push(p9),push_integer(-a),power(),multiply(),p3=pop()},expand_get_C=function(){var t,n,a,l,u,c,p,d,Q,Ct;if(n=0,a=0,u=0,c=0,n=tos,car(p2)===symbol(MULTIPLY))for(p1=cdr(p2);iscons(p1);)p5=car(p1),expand_get_CF(),p1=cdr(p1);else p5=p2,expand_get_CF();if(c=tos-n,c===1){p4=pop();return}for(p4=alloc_tensor(c*c),p4.tensor.ndim=2,p4.tensor.dim[0]=c,p4.tensor.dim[1]=c,t=n,a=p=0,Q=c;0<=Q?p<Q:p>Q;a=0<=Q?++p:--p)for(u=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;u=0<=Ct?++l:--l)push(stack[t+u]),push(p9),push_integer(a),power(),d=expanding,expanding=1,divide(),expanding=d,push(p9),filter(),p4.tensor.elem[c*a+u]=pop();return moveTos(tos-c)},expand_get_CF=function(){var t,n,a,l,u,c,p,d;if(t=0,n=0,a=0,l=0,!!Find(p5,p9)){for(c=expanding,expanding=1,trivial_divide(),expanding=c,car(p5)===symbol(POWER)?(push(caddr(p5)),l=pop_integer(),p6=cadr(p5)):(l=1,p6=p5),push(p6),push(p9),degree(),t=pop_integer(),d=[],n=u=0,p=l;0<=p?u<p:u>p;n=0<=p?++u:--u)d.push(function(){var Q,Ct,ar;for(ar=[],a=Q=0,Ct=t;0<=Ct?Q<Ct:Q>Ct;a=0<=Ct?++Q:--Q)push(p8),push(p6),push_integer(n),power(),c=expanding,expanding=1,multiply(),expanding=c,push(p9),push_integer(a),power(),c=expanding,expanding=1,multiply(),ar.push(expanding=c);return ar}());return d}},trivial_divide=function(){var t;if(t=0,car(p2)===symbol(MULTIPLY)){for(t=tos,p0=cdr(p2);iscons(p0);)equal(car(p0),p5)||(push(car(p0)),Eval()),p0=cdr(p0);multiply_all(tos-t)}else push_integer(1);return p8=pop()},expand_get_B=function(){var t,n,a,l,u;if(t=0,n=0,!!istensor(p4)){for(n=p4.tensor.dim[0],p8=alloc_tensor(n),p8.tensor.ndim=1,p8.tensor.dim[0]=n,t=a=0,u=n;0<=u?a<u:a>u;t=0<=u?++a:--a)push(p3),push(p9),push_integer(t),power(),l=expanding,expanding=1,divide(),expanding=l,push(p9),filter(),p8.tensor.elem[t]=pop();return p3=p8}},expand_get_A=function(){var t,n,a,l,u;if(t=0,n=0,a=0,!istensor(p4)){push(p2),reciprocate(),p2=pop();return}if(t=tos,car(p2)===symbol(MULTIPLY))for(p8=cdr(p2);iscons(p8);)p5=car(p8),expand_get_AF(),p8=cdr(p8);else p5=p2,expand_get_AF();for(a=tos-t,p8=alloc_tensor(a),p8.tensor.ndim=1,p8.tensor.dim[0]=a,n=l=0,u=a;0<=u?l<u:l>u;n=0<=u?++l:--l)p8.tensor.elem[n]=stack[t+n];return moveTos(t),p2=p8},expand_get_AF=function(){var t,n,a,l,u,c,p;if(t=0,n=0,a=0,l=1,!!Find(p5,p9)){for(car(p5)===symbol(POWER)&&(push(caddr(p5)),l=pop_integer(),p5=cadr(p5)),push(p5),push(p9),degree(),t=pop_integer(),p=[],n=u=c=l;c<=0?u<0:u>0;n=c<=0?++u:--u)p.push(function(){var d,Q,Ct;for(Ct=[],a=d=0,Q=t;0<=Q?d<Q:d>Q;a=0<=Q?++d:--d)push(p5),push_integer(n),power(),reciprocate(),push(p9),push_integer(a),power(),Ct.push(multiply());return Ct}());return p}},Eval_expcos=function(){return push(cadr(p1)),Eval(),expcos()},expcos=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),add(),restore()},Eval_expsin=function(){return push(cadr(p1)),Eval(),expsin()},expsin=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),subtract(),restore()},Eval_factor=function(){var t;for(push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),factor(),p1=cdddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factor_again(),t.push(p1=cdr(p1));return t},factor_again=function(){var t,n;if(save(),p2=pop(),p1=pop(),t=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),factor_term(),p1=cdr(p1);else push(p1),push(p2),factor_term();return n=tos-t,n>1&&multiply_all_noexpand(n),restore()},factor_term=function(){if(save(),factorpoly(),p1=pop(),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return restore()},factor=function(){return save(),p2=pop(),p1=pop(),isinteger(p1)?(push(p1),factor_number()):(push(p1),push(p2),factorpoly()),restore()},factor_small_number=function(){var t,n,a,l,u,c;for(a=0,save(),l=pop_integer(),isNaN(l)&&stop("number too big to factor"),l<0&&(l=-l),a=u=0,c=MAXPRIMETAB;(0<=c?u<c:u>c)&&(t=primetab[a],!(t>l/t));a=0<=c?++u:--u){for(n=0;l%t===0;)l/=t,n++;n&&(push_integer(t),push_integer(n))}return l>1&&(push_integer(l),push_integer(1)),restore()},factorial=function(){var t;if(t=0,save(),p1=pop(),push(p1),t=pop_integer(),t<0||isNaN(t)){push_symbol(FACTORIAL),push(p1),list(2),restore();return}return bignum_factorial(t),restore()},factorpoly=function(){var t,n;return DEBUG&&console.log("factorpoly: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),n=pop(),t=pop(),!Find(t,n)||!ispolyexpandedform(t,n)||!issymbol(n)?push(t):yyfactorpoly(n,t),restore()},yyfactorpoly=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux,gx,yx;for(DEBUG&&(Q=t,gx=n,console.log("yyfactorpoly: "+Q+" "+gx)),save(),en=tos,isfloating(n)&&stop("floating point numbers in polynomial"),ix=tos,d=coeff(t,n)-1,DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" factpoly_expo before rationalize_coefficients: "+d),ex=rationalize_coefficients(en),DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" factpoly_expo  after rationalize_coefficients: "+d),yx="real",fx=null;d>0;)if(DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" factpoly_expo inside while loop: "+d),isZeroAtomOrTensor(stack[ix+0])?(DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" isZeroAtomOrTensor"),a=one,u=zero):yx==="real"?[ar,a,u]=get_factor_from_real_root(t,d,ix):yx==="complex"&&([Ct,a]=get_factor_from_complex_root(fx,d,ix)),yx==="real")if(ar===0){yx="complex";continue}else{for(push(a),push(t),multiply(),push(u),add(),l=pop(),DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+` success
FACTOR=`+l),push(ex),push(l),multiply_noexpand(),ex=pop(),yydivpoly(d,ix,a,u);d&&isZeroAtomOrTensor(stack[ix+d]);)d--;for(push(zero),tn=Cn=0,lx=d;0<=lx?Cn<=lx:Cn>=lx;tn=0<=lx?++Cn:--Cn)push(stack[ix+tn]),push(t),push_integer(tn),power(),multiply(),add();fx=pop()}else if(yx==="complex"){if(Ct===0)break;if(push(a),push(t),subtract(),push(a),conjugate(),push(t),subtract(),multiply(),ux=pop(),DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+` success
FACTOR=`+ux),push(ex),ox=pop(),push(ex),push(ux),multiply_noexpand(),ex=pop(),fx==null){for(push(zero),tn=on=0,cx=d;0<=cx?on<=cx:on>=cx;tn=0<=cx?++on:--on)push(stack[ix+tn]),push(t),push_integer(tn),power(),multiply(),add();fx=pop()}if(p=fx,push(p),push(ux),push(t),divpoly(),fx=pop(),push(fx),push(ux),multiply(),c=pop(),!equal(c,p)){DEBUG&&console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),DEBUG&&console.log("so just returning previousFactorisation times dividend: "+ox+" * "+p),push(ox),push(p),ax=expanding,expanding=0,yycondense(),expanding=ax,multiply_noexpand(),ex=pop(),stack[en]=ex,moveTos(en+1),restore();return}for(tn=cn=0,dx=d;0<=dx?cn<=dx:cn>=dx;tn=0<=dx?++cn:--cn)pop();coeff(t,fx),d-=2}for(DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" building the remaining unfactored part of the polynomial"),push(zero),tn=gn=0,hx=d;0<=hx?gn<=hx:gn>=hx;tn=0<=hx?++gn:--gn)push(stack[ix+tn]),push(t),push_integer(tn),power(),multiply(),add();return n=pop(),DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" remaining unfactored part of the polynomial: "+n.toString()),push(n),ax=expanding,expanding=0,yycondense(),expanding=ax,n=pop(),DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" new poly with extracted common factor: "+n.toString()),d>0&&isnegativeterm(stack[ix+d])&&(push(n),negate(),n=pop(),push(ex),negate_noexpand(),ex=pop()),push(ex),push(n),multiply_noexpand(),ex=pop(),DEBUG&&console.log("yyfactorpoly: "+Q+" "+gx+" result: "+ex),stack[en]=ex,moveTos(en+1),restore()},rationalize_coefficients=function(t){var n,a,l,u,c,p,d,Q,Ct;for(u=one,n=l=p=t,d=tos;p<=d?l<d:l>d;n=p<=d?++l:--l)push(stack[n]),denominator(),push(u),lcm(),u=pop();for(n=a=Q=t,Ct=tos;Q<=Ct?a<Ct:a>Ct;n=Q<=Ct?++a:--a)push(u),push(stack[n]),multiply(),stack[n]=pop();return push(u),reciprocate(),c=pop(),DEBUG&&console.log("rationalize_coefficients result: "+c.toString()),c},get_factor_from_real_root=function(t,n,a){var l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx;if(DEBUG&&console.log("get_factor_from_real_root"),d=0,p=0,l=0,u=0,tn=0,on=0,DEBUG){for(push(zero),d=cn=0,Cn=n;0<=Cn?cn<=Cn:cn>=Cn;d=0<=Cn?++cn:--cn)push(stack[a+d]),push(t),push_integer(d),power(),multiply(),add();gn=pop(),console.log("POLY="+gn)}if(p=tos,u=tos,push(stack[a+n]),divisors_onstack(),on=tos-u,l=tos,push(stack[a+0]),divisors_onstack(),tn=tos-l,DEBUG){for(console.log("divisors of base term"),d=Q=0,ex=tn;0<=ex?Q<ex:Q>ex;d=0<=ex?++Q:--Q)console.log(", "+stack[l+d]);for(console.log("divisors of leading term"),d=Ct=0,ix=on;0<=ix?Ct<ix:Ct>ix;d=0<=ix?++Ct:--Ct)console.log(", "+stack[u+d])}for(lx=ar=0,ax=on;0<=ax?ar<ax:ar>ax;lx=0<=ax?++ar:--ar)for(cx=en=0,ox=tn;0<=ox?en<ox:en>ox;cx=0<=ox?++en:--en){if(hx=stack[u+lx],dx=stack[l+cx],push(dx),push(hx),divide(),negate(),fx=pop(),c=Evalpoly(n,a,fx),DEBUG&&(console.log("try A="+hx),console.log(", B="+dx),console.log(", root "+t),console.log("=-B/A="+fx),console.log(", POLY("+fx),console.log(")="+c)),isZeroAtomOrTensor(c))return moveTos(p),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,hx,dx];if(push(dx),negate(),dx=pop(),push(fx),negate(),fx=pop(),c=Evalpoly(n,a,fx),DEBUG&&(console.log("try A="+hx),console.log(", B="+dx),console.log(", root "+t),console.log("=-B/A="+fx),console.log(", POLY("+fx),console.log(")="+c)),isZeroAtomOrTensor(c))return moveTos(p),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,hx,dx]}return moveTos(p),DEBUG&&console.log("get_factor_from_real_root returning"),[0,null,null]},get_factor_from_complex_root=function(t,n,a){var l,u,c,p,d,Q,Ct;if(u=0,n<=2)return DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[0,null];if(DEBUG&&console.log("complex root finding for POLY="+t),u=tos,push_integer(-1),push_rational(2,3),power(),rect(),Ct=pop(),DEBUG&&console.log("complex root finding: trying with "+Ct),push(Ct),l=Evalpoly(n,a,Ct),DEBUG&&console.log("complex root finding result: "+l),isZeroAtomOrTensor(l))return moveTos(u),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,Ct];if(push_integer(1),push_rational(2,3),power(),rect(),Ct=pop(),DEBUG&&console.log("complex root finding: trying with "+Ct),push(Ct),l=Evalpoly(n,a,Ct),DEBUG&&console.log("complex root finding result: "+l),isZeroAtomOrTensor(l))return moveTos(u),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,Ct];for(d=p=-10;p<=10;d=++p)for(Q=c=1;c<=5;Q=++c)if(push_integer(d),push_integer(Q),push(imaginaryunit),multiply(),add(),rect(),Ct=pop(),DEBUG&&console.log("complex root finding: trying simple complex combination "+Ct),push(Ct),l=Evalpoly(n,a,Ct),isZeroAtomOrTensor(l))return moveTos(u),DEBUG&&console.log("found complex root: "+l),[1,Ct];return moveTos(u),DEBUG&&console.log("get_factor_from_complex_root returning 0"),[0,null]},yydivpoly=function(t,n,a,l){var u,c,p,d;for(u=zero,c=p=d=t;d<=0?p<0:p>0;c=d<=0?++p:--p)push(stack[n+c]),stack[n+c]=u,push(a),divide(),u=pop(),push(stack[n+c-1]),push(u),push(l),multiply(),subtract(),stack[n+c-1]=pop();if(stack[n+0]=u,DEBUG)return console.log("yydivpoly Q: "+u.toString())},Evalpoly=function(t,n,a){var l,u,c;for(push(zero),l=u=c=t;c<=0?u<=0:u>=0;l=c<=0?++u:--u)push(a),multiply(),push(stack[n+l]),add();return pop()},factors=function(t){var n;if(n=tos,car(t)===symbol(ADD))for(t=cdr(t);iscons(t);)push_term_factors(car(t)),t=cdr(t);else push_term_factors(t);return tos-n},push_term_factors=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else return push(t)},Eval_filter=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),filter(),t.push(p1=cdr(p1));return t},filter=function(){return save(),p2=pop(),p1=pop(),filter_main(),restore()},filter_main=function(){return car(p1)===symbol(ADD)?filter_sum():istensor(p1)?filter_tensor():Find(p1,p2)?push_integer(0):push(p1)},filter_sum=function(){var t;for(push_integer(0),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),filter(),add(),t.push(p1=cdr(p1));return t},filter_tensor=function(){var t,n,a,l,u,c;for(t=0,a=0,a=p1.tensor.nelem,p3=alloc_tensor(a),p3.tensor.ndim=p1.tensor.ndim,t=l=0,u=p1.tensor.ndim;0<=u?l<u:l>u;t=0<=u?++l:--l)p3.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,c=a;0<=c?n<c:n>c;t=0<=c?++n:--n)push(p1.tensor.elem[t]),push(p2),filter(),p3.tensor.elem[t]=pop();return push(p3)},Eval_float=function(){return evaluatingAsFloats++,push(cadr(p1)),Eval(),yyfloat(),Eval(),evaluatingAsFloats--},zzfloat=function(){return save(),evaluatingAsFloats++,Eval(),yyfloat(),Eval(),evaluatingAsFloats--,restore()},yyfloat=function(){var t,n,a,l;if(n=0,t=0,evaluatingAsFloats++,save(),p1=pop(),iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),yyfloat(),p1=cdr(p1);list(tos-t)}else if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)push(p1.tensor.elem[n]),yyfloat(),p1.tensor.elem[n]=pop();push(p1)}else p1.k===NUM?(push(p1),bignum_float()):p1===symbol(PI)?push_double(Math.PI):p1===symbol(E)?push_double(Math.E):push(p1);return restore(),evaluatingAsFloats--},Eval_floor=function(){return push(cadr(p1)),Eval(),yfloor()},yfloor=function(){return save(),yyfloor(),restore()},yyfloor=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(FLOOR),push(p1),list(2);return}if(isdouble(p1)){t=Math.floor(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}if(p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1))return push_integer(-1),add()},Eval_for=function(){var t,n,a,l,u,c,p;if(t=0,n=0,a=0,l=caddr(p1),issymbol(l)||stop("for: 2nd arg should be the variable to loop over"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(push(caddddr(p1)),Eval(),a=pop_integer(),isNaN(a)){push(p1);return}for(p4=get_binding(l),t=u=c=n,p=a;c<=p?u<=p:u>=p;t=c<=p?++u:--u)push_integer(t),p5=pop(),set_binding(l,p5),push(cadr(p1)),Eval(),pop();return set_binding(l,p4),push_symbol(NIL)},Eval_gamma=function(){return push(cadr(p1)),Eval(),gamma()},gamma=function(){return save(),gammaf(),restore()},gammaf=function(){if(p1=pop(),isrational(p1)&&MEQUAL(p1.q.a,1)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power();return}if(isrational(p1)&&MEQUAL(p1.q.a,3)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power(),push_rational(1,2),multiply();return}if(isnegativeterm(p1)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_integer(-1),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push(p1),multiply(),sine(),push(p1),multiply(),push(p1),negate(),gamma(),multiply(),divide();return}if(car(p1)===symbol(ADD)){gamma_of_sum();return}push_symbol(GAMMA),push(p1),list(2)},gamma_of_sum=function(){if(p3=cdr(p1),isrational(car(p3))&&MEQUAL(car(p3).q.a,1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),push(cadr(p3)),gamma(),multiply();if(isrational(car(p3))&&MEQUAL(car(p3).q.a,-1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),gamma(),push(cadr(p3)),push_integer(-1),add(),divide();push_symbol(GAMMA),push(p1),list(2)},Eval_gcd=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),gcd(),t.push(p1=cdr(p1));return t},gcd=function(){var t;return t=expanding,save(),gcd_main(),restore(),expanding=t},gcd_main=function(){var t;if(expanding=1,p2=pop(),p1=pop(),DEBUG&&console.log("gcd_main: p1: "+p1+" p2: "+p2),equal(p1,p2)){push(p1);return}if(isrational(p1)&&isrational(p2)){push(p1),push(p2),gcd_numbers();return}if(t=areunivarpolysfactoredorexpandedform(p1,p2)){gcd_polys(t);return}if(car(p1)===symbol(ADD)&&car(p2)===symbol(ADD)){gcd_sum_sum();return}if(car(p1)===symbol(ADD)&&(gcd_sum(p1),p1=pop()),car(p2)===symbol(ADD)&&(gcd_sum(p2),p2=pop()),car(p1)===symbol(MULTIPLY)){gcd_sum_product();return}if(car(p2)===symbol(MULTIPLY)){gcd_product_sum();return}if(car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base()},areunivarpolysfactoredorexpandedform=function(t,n){var a;return DEBUG&&console.log("areunivarpolysfactoredorexpandedform: p1: "+t+" p2: "+n),(a=isunivarpolyfactoredorexpandedform(t))&&isunivarpolyfactoredorexpandedform(n,a)?a:!1},gcd_polys=function(t){if(DEBUG&&console.log("gcd_polys: p1: "+p1+" polyVar: "+t),push(p1),push(t),factorpoly(),p1=pop(),push(p2),push(t),factorpoly(),p2=pop(),DEBUG&&console.log("GCD: factored polys:"),DEBUG&&console.log("  p1:"+p1.toString()),DEBUG&&console.log("  p2:"+p2.toString()),(car(p1)===symbol(MULTIPLY)||car(p2)===symbol(MULTIPLY))&&(car(p1)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p1),push(one),list(3),p1=pop()),car(p2)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p2),push(one),list(3),p2=pop())),car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base(),!0},gcd_product_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);){for(p4=cdr(p2);iscons(p4);)push(car(p3)),push(car(p4)),gcd(),multiply(),p4=cdr(p4);t.push(p3=cdr(p3))}return t},gcd_powers_with_same_base=function(){if(car(p1)===symbol(POWER)?(p3=caddr(p1),p1=cadr(p1)):p3=one,car(p2)===symbol(POWER)?(p4=caddr(p2),p2=cadr(p2)):p4=one,!equal(p1,p2)){push(one);return}if(isNumericAtom(p3)&&isNumericAtom(p4)){push(p1),lessp(p3,p4)?push(p3):push(p4),power();return}if(push(p3),push(p4),divide(),p5=pop(),isNumericAtom(p5)){push(p1),car(p3)===symbol(MULTIPLY)&&isNumericAtom(cadr(p3))?p5=cadr(p3):p5=one,car(p4)===symbol(MULTIPLY)&&isNumericAtom(cadr(p4))?p6=cadr(p4):p6=one,lessp(p5,p6)?push(p3):push(p4),power();return}if(push(p3),push(p4),subtract(),p5=pop(),!isNumericAtom(p5)){push(one);return}return push(p1),isnegativenumber(p5)?push(p3):push(p4),power()},gcd_sum_sum=function(){if(length(p1)!==length(p2)){push(one);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);for(p3=pop(),p4=cdr(p2),push(car(p4)),p4=cdr(p4);iscons(p4);)push(car(p4)),gcd(),p4=cdr(p4);return p4=pop(),push(p1),push(p3),divide(),p5=pop(),push(p2),push(p4),divide(),p6=pop(),equal(p5,p6)?(push(p5),push(p3),push(p4),gcd(),multiply()):push(one)},gcd_sum=function(t){var n;for(t=cdr(t),push(car(t)),t=cdr(t),n=[];iscons(t);)push(car(t)),gcd(),n.push(t=cdr(t));return n},gcd_sum_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);)push(car(p3)),push(p2),gcd(),multiply(),t.push(p3=cdr(p3));return t},gcd_product_sum=function(){var t;for(push(one),p4=cdr(p2),t=[];iscons(p4);)push(p1),push(car(p4)),gcd(),multiply(),t.push(p4=cdr(p4));return t},guess=function(){var t;return t=pop(),push(t),Find(t,symbol(SYMBOL_X))?push_symbol(SYMBOL_X):Find(t,symbol(SYMBOL_Y))?push_symbol(SYMBOL_Y):Find(t,symbol(SYMBOL_Z))?push_symbol(SYMBOL_Z):Find(t,symbol(SYMBOL_T))?push_symbol(SYMBOL_T):Find(t,symbol(SYMBOL_S))?push_symbol(SYMBOL_S):push_symbol(SYMBOL_X)},hermite=function(){return save(),yyhermite(),restore()},yyhermite=function(){var t;if(t=0,p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(HERMITE),push(p1),push(p2),list(3);return}return issymbol(p1)?yyhermite2(t):(p3=p1,p1=symbol(SECRETX),yyhermite2(t),p1=p3,push(symbol(SECRETX)),push(p1),subst(),Eval())},yyhermite2=function(t){var n,a,l,u;for(n=0,push_integer(1),push_integer(0),p4=pop(),u=[],n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)p5=p4,p4=pop(),push(p1),push(p4),multiply(),push_integer(n),push(p5),multiply(),subtract(),push_integer(2),u.push(multiply());return u},hilbert=function(){var t,n,a,l,u,c,p;if(t=0,a=0,l=0,save(),p2=pop(),push(p2),l=pop_integer(),l<2){push_symbol(HILBERT),push(p2),list(2),restore();return}for(push_zero_matrix(l,l),p1=pop(),t=u=0,c=l;0<=c?u<c:u>c;t=0<=c?++u:--u)for(a=n=0,p=l;0<=p?n<p:n>p;a=0<=p?++n:--n)push_integer(t+a+1),inverse(),p1.tensor.elem[t*l+a]=pop();return push(p1),restore()},DEBUG_IMAG=!1,Eval_imag=function(){return push(cadr(p1)),Eval(),imag()},imag=function(){return save(),rect(),p1=pop(),DEBUG_IMAG&&console.log("IMAGE of "+p1),push(p1),push(p1),conjugate(),DEBUG_IMAG&&console.log(" image: conjugate result: "+stack[tos-1]),subtract(),push_integer(2),divide(),DEBUG_IMAG&&console.log(" image: 1st divide result: "+stack[tos-1]),push(imaginaryunit),divide(),DEBUG_IMAG&&console.log(" image: 2nd divide result: "+stack[tos-1]),restore()},index_function=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox;for(n=0,u=0,p=0,Q=0,Ct=0,ox=0,save(),ax=tos-t,p1=stack[ax],Q=p1.tensor.ndim,p=t-1,p>Q&&stop("too many indices for tensor"),u=0,n=ar=0,en=p;0<=en?ar<en:ar>en;n=0<=en?++ar:--ar)push(stack[ax+n+1]),ox=pop_integer(),(ox<1||ox>p1.tensor.dim[n])&&stop("index out of range"),u=u*p1.tensor.dim[n]+ox-1;if(Q===p){moveTos(tos-t),push(p1.tensor.elem[u]),restore();return}for(n=a=tn=p,on=Q;tn<=on?a<on:a>on;n=tn<=on?++a:--a)u=u*p1.tensor.dim[n]+0;for(Ct=1,n=l=cn=p,gn=Q;cn<=gn?l<gn:l>gn;n=cn<=gn?++l:--l)Ct*=p1.tensor.dim[n];for(p2=alloc_tensor(Ct),p2.tensor.ndim=Q-p,n=c=Cn=p,ex=Q;Cn<=ex?c<ex:c>ex;n=Cn<=ex?++c:--c)p2.tensor.dim[n-p]=p1.tensor.dim[n];for(n=d=0,ix=Ct;0<=ix?d<ix:d>ix;n=0<=ix?++d:--d)p2.tensor.elem[n]=p1.tensor.elem[u+n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},set_component=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax;for(n=0,u=0,p=0,Ct=0,ax=0,save(),t<3&&stop("error in indexed assign"),ix=tos-t,p2=stack[ix],p1=stack[ix+1],istensor(p1)||stop("error in indexed assign: assigning to something that is not a tensor"),Ct=p1.tensor.ndim,p=t-2,p>Ct&&stop("error in indexed assign"),u=0,n=ar=0,en=p;0<=en?ar<en:ar>en;n=0<=en?++ar:--ar)push(stack[ix+n+2]),ax=pop_integer(),(ax<1||ax>p1.tensor.dim[n])&&stop(`error in indexed assign
`),u=u*p1.tensor.dim[n]+ax-1;for(n=a=tn=p,on=Ct;tn<=on?a<on:a>on;n=tn<=on?++a:--a)u=u*p1.tensor.dim[n]+0;for(p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,n=l=0,cn=p1.tensor.ndim;0<=cn?l<cn:l>cn;n=0<=cn?++l:--l)p3.tensor.dim[n]=p1.tensor.dim[n];for(n=c=0,gn=p1.tensor.nelem;0<=gn?c<gn:c>gn;n=0<=gn?++c:--c)p3.tensor.elem[n]=p1.tensor.elem[n];if(check_tensor_dimensions(p1),check_tensor_dimensions(p3),p1=p3,Ct===p){istensor(p2)&&stop("error in indexed assign"),p1.tensor.elem[u]=p2,check_tensor_dimensions(p1),moveTos(tos-t),push(p1),restore();return}for(istensor(p2)||stop("error in indexed assign"),Ct-p!==p2.tensor.ndim&&stop("error in indexed assign"),n=d=0,Cn=p2.tensor.ndim;0<=Cn?d<Cn:d>Cn;n=0<=Cn?++d:--d)p1.tensor.dim[p+n]!==p2.tensor.dim[n]&&stop("error in indexed assign");for(n=Q=0,ex=p2.tensor.nelem;0<=ex?Q<ex:Q>ex;n=0<=ex?++Q:--Q)p1.tensor.elem[u+n]=p2.tensor.elem[n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p1),restore()},Eval_inner=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn;for(Cn=[],Cn.push(car(cdr(p1))),cn=car(cdr(cdr(p1))),cn===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),c=cdr(cdr(p1));c!==symbol(NIL);)Cn.push(car(c)),c=cdr(c);if(Cn.length>2){for(push_symbol(INNER),push(Cn[Cn.length-2]),push(Cn[Cn.length-1]),list(3),n=p=2,Q=Cn.length;2<=Q?p<Q:p>Q;n=2<=Q?++p:--p)push_symbol(INNER),swap(),push(Cn[Cn.length-n-1]),swap(),list(3);p1=pop(),Eval_inner();return}for(d=[],get_innerprod_factors(p1,d),tn=[],n=a=0,Ct=d.length;0<=Ct?a<Ct:a>Ct;n=0<=Ct?++a:--a)d[n]!==symbol(SYMBOL_IDENTITY_MATRIX)&&tn.push(d[n]);if(d=tn,tn=[],d.length>1){for(gn=0,n=l=0,ar=d.length;(0<=ar?l<ar:l>ar)&&n+gn+1<=d.length-1;n=0<=ar?++l:--l){isNumericAtomOrTensor(d[n+gn])||isNumericAtomOrTensor(d[n+gn+1])?tn.push(d[n+gn]):(push(d[n+gn]),Eval(),inv(),push(d[n+gn+1]),Eval(),subtract(),t=pop(),isZeroAtomOrTensor(t)?gn+=1:tn.push(d[n+gn]));if(n+gn===d.length-2&&tn.push(d[d.length-1]),n+gn>=d.length-1)break}d=tn}if(push(symbol(INNER)),d.length>0)for(n=u=0,en=d.length;0<=en?u<en:u>en;n=0<=en?++u:--u)push(d[n]);else{pop(),push(symbol(SYMBOL_IDENTITY_MATRIX));return}for(list(d.length+1),p1=pop(),p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),on=[];iscons(p1);)push(car(p1)),Eval(),inner(),on.push(p1=cdr(p1));return on},inner=function(){var t,n,a,l;if(save(),p2=pop(),p1=pop(),isnegativeterm(p2)&&isnegativeterm(p1)&&(push(p2),negate(),p2=pop(),push(p1),negate(),p1=pop()),isinnerordot(p1)&&(t=car(cdr(p1)),n=car(cdr(cdr(p1))),a=p2,p1=t,push(n),push(a),inner(),p2=pop()),p1===symbol(SYMBOL_IDENTITY_MATRIX)){push(p2),restore();return}else if(p2===symbol(SYMBOL_IDENTITY_MATRIX)){push(p1),restore();return}if(istensor(p1)&&istensor(p2))inner_f();else{if(!(isNumericAtomOrTensor(p1)||isNumericAtomOrTensor(p2))&&(push(p1),push(p2),inv(),subtract(),l=pop(),isZeroAtomOrTensor(l))){push_symbol(SYMBOL_IDENTITY_MATRIX),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),inner(),add(),p1=cdr(p1);restore();return}if(expanding&&isadd(p2)){for(p2=cdr(p2),push(zero);iscons(p2);)push(p1),push(car(p2)),inner(),add(),p2=cdr(p2);restore();return}if(push(p1),push(p2),istensor(p1)&&isNumericAtom(p2))tensor_times_scalar();else if(isNumericAtom(p1)&&istensor(p2))scalar_times_tensor();else if(isNumericAtom(p1)||isNumericAtom(p2))multiply();else{pop(),pop(),push_symbol(INNER),push(p1),push(p2),list(3),restore();return}}return restore()},inner_f=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx;if(c=0,tn=p1.tensor.dim[p1.tensor.ndim-1],tn!==p2.tensor.dim[0]){debugger;stop("inner: tensor dimension check")}for(cn=p1.tensor.ndim+p2.tensor.ndim-2,cn>MAXDIM&&stop("inner: rank of result exceeds maximum"),t=p1.tensor.elem,a=p2.tensor.elem,n=1,c=gn=0,ex=p1.tensor.ndim-1;0<=ex?gn<ex:gn>ex;c=0<=ex?++gn:--gn)n*=p1.tensor.dim[c];for(l=1,c=p=1,ix=p2.tensor.ndim;1<=ix?p<ix:p>ix;c=1<=ix?++p:--p)l*=p2.tensor.dim[c];for(p3=alloc_tensor(n*l),u=p3.tensor.elem,c=Q=0,ax=n;0<=ax?Q<ax:Q>ax;c=0<=ax?++Q:--Q)for(d=ar=0,ox=tn;0<=ox?ar<ox:ar>ox;d=0<=ox?++ar:--ar)if(!isZeroAtomOrTensor(t[c*tn+d]))for(Ct=en=0,lx=l;0<=lx?en<lx:en>lx;Ct=0<=lx?++en:--en)push(t[c*tn+d]),push(a[d*l+Ct]),multiply(),push(u[c*l+Ct]),add(),u[c*l+Ct]=pop();if(cn===0)return push(p3.tensor.elem[0]);for(p3.tensor.ndim=cn,d=0,c=on=0,cx=p1.tensor.ndim-1;0<=cx?on<cx:on>cx;c=0<=cx?++on:--on)p3.tensor.dim[c]=p1.tensor.dim[c];for(d=p1.tensor.ndim-1,c=Cn=0,dx=p2.tensor.ndim-1;0<=dx?Cn<dx:Cn>dx;c=0<=dx?++Cn:--Cn)p3.tensor.dim[d+c]=p2.tensor.dim[c+1];return push(p3)},get_innerprod_factors=function(t,n){if(!iscons(t)){add_factor_to_accumulator(t,n);return}if(cdr(t)===symbol(NIL)){t=get_innerprod_factors(car(t),n);return}if(isinnerordot(t)){get_innerprod_factors(car(cdr(t)),n),get_innerprod_factors(cdr(cdr(t)),n);return}return add_factor_to_accumulator(t,n)},add_factor_to_accumulator=function(t,n){if(t!==symbol(NIL))return n.push(t)},itab=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))",0],Eval_integral=function(){var t,n,a,l,u;for(n=0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth integral: check n")):n=1,push(p3),n>=0)for(a=0,l=n;0<=l?a<l:a>l;0<=l?++a:--a)push(p4),integral();else for(n=-n,t=0,u=n;0<=u?t<u:t>u;0<=u?++t:--t)push(p4),derivative();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},integral=function(){return save(),p2=pop(),p1=pop(),car(p1)===symbol(ADD)?integral_of_sum():car(p1)===symbol(MULTIPLY)?integral_of_product():integral_of_form(),p1=pop(),Find(p1,symbol(INTEGRAL))&&stop("integral: sorry, could not find a solution"),push(p1),simplify(),Eval(),restore()},integral_of_sum=function(){var t;for(p1=cdr(p1),push(car(p1)),push(p2),integral(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),integral(),add(),t.push(p1=cdr(p1));return t},integral_of_product=function(){return push(p1),push(p2),partition(),p1=pop(),integral_of_form(),multiply()},integral_of_form=function(){var t,n;if(t=italu_hashcode(p1,p2).toFixed(6),n=hashed_itab[t],!n){push_symbol(INTEGRAL),push(p1),push(p2),list(3);return}return push(p1),push(p2),transform(n,!1),p3=pop(),p3===symbol(NIL)?(push_symbol(INTEGRAL),push(p1),push(p2),list(3)):push(p3)},hashcode_values={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916},italu_hashcode=function(t,n){var a;if(issymbol(t))return equal(t,n)?hashcode_values.x:hashcode_values.constant;if(iscons(t))switch(symnum(car(t))){case ADD:return hash_addition(cdr(t),n);case MULTIPLY:return hash_multiplication(cdr(t),n);case POWER:return hash_power(cadr(t),caddr(t),n);case EXP:return hash_power(symbol(E),cadr(t),n);case SQRT:return push_double(.5),a=pop(),hash_power(cadr(t),a,n);default:return hash_function(t,n)}return hashcode_values.constant},hash_function=function(t,n){var a,l,u;if(!Find(cadr(t),n))return hashcode_values.constant;if(u=car(t),a=italu_hashcode(cadr(t),n),l=hashcode_values[u.printname],!l)throw new Error("Unsupported function "+u.printname);return Math.pow(l,a)},hash_addition=function(t,n){var a,l,u,c,p;for(p={};iscons(t);)u=car(t),t=cdr(t),c=0,Find(u,n)?c=italu_hashcode(u,n):c=hashcode_values.constant,p[c.toFixed(6)]=!0;l=0;for(a in p)hasProp.call(p,a)&&(p[a],l=l+parseFloat(a,10));return l},hash_multiplication=function(t,n){var a,l;for(a=1;iscons(t);)l=car(t),t=cdr(t),Find(l,n)&&(a=a*italu_hashcode(l,n));return a},hash_power=function(t,n,a){var l,u;if(l=hashcode_values.constant,u=hashcode_values.constexp,Find(t,a)&&(l=italu_hashcode(t,a)),Find(n,a))u=italu_hashcode(n,a);else{if(l===hashcode_values.constant)return hashcode_values.constant;isminusone(n)?u=-1:isoneovertwo(n)?u=.5:isminusoneovertwo(n)?u=-.5:equalq(n,2,1)?u=2:equalq(n,-2,1)&&(u=-2)}return Math.pow(l,u)},make_hashed_itab=function(){var t,n,a,l,u,c,p,d;for(p={},u=0,l=itab.length;u<l&&(c=itab[u],!!c);u++)scan_meta(c),t=pop(),d=cadr(t),n=italu_hashcode(d,symbol(METAX)),a=n.toFixed(6),p[a]||(p[a]=[]),p[a].push(c);return console.log("hashed_itab = "+JSON.stringify(p,null,2)),p},$.make_hashed_itab=make_hashed_itab,hashed_itab={"1.144166":["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],"1.095727":["f(x^(-2),-x^(-1))"],"1.023118":["f(x^(-1/2),2*x^(1/2))"],"0.977405":["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],"0.912636":["f(x^2,x^3/3)"],"1.137302":["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],"1.326774":["f(exp(a*x+b),1/a*exp(a*x+b))"],"1.080259":["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],"1.260228":["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],"1.451902":["f(log(a*x),x*log(a*x)-x)"],"0.486192":["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],"0.697274":["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],"0.476307":["f(1/(a+b*x),1/b*log(a+b*x))"],"0.226868":["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],"2.904531":["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],"0.455026":["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],"0.216732":["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],"0.434695":["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],"0.207048":["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],"2.650781":["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],"0.498584":["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],"0.237479":["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],"3.040375":["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],"0.521902":["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],"0.446014":["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],"0.248586":["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],"0.464469":["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],"0.443716":["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],"0.236382":["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],"0.508931":["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],"0.532733":["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],"0.480638":["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],"0.438648":["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],"0.459164":["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],"1.384221":["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],"1.322374":["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],"1.516728":["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],"1.587665":["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],"0.659314":["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],"0.629856":["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],"0.722428":["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],"0.756216":["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],"1.434156":["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],"0.729886":["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],"1.370077":["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],"1.730087":["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],"0.578006":["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],"1.652787":["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],"1.308862":["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],"1.342944":["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],"0.636358":["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"0.652928":["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],"0.764022":["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],"1.620055":["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],"0.332117":["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],"1.571443":["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"1.690994":["f(sin(a*x),-cos(a*x)/a)"],"1.055979":["f(cos(a*x),sin(a*x)/a)"],"1.116714":["f(tan(a*x),-log(cos(a*x))/a)"],"0.895484":["f(1/tan(a*x),log(sin(a*x))/a)"],"0.946989":["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],"0.591368":["f(1/sin(a*x),log(tan(a*x/2))/a)"],"2.859462":["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"1.115091":["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],"1.081452":["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"0.349716":["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],"0.896788":["f(1/cos(a*x)^2,tan(a*x)/a)"],"1.785654":["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],"1.516463":["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],"2.707879":["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],"0.369293":["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],"0.560019":["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],"0.530332":["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],"0.331177":["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],"0.313621":["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],"3.172365":["f(sin(a+b*x),-cos(a+b*x)/b)"],"1.127162":["f(cos(a+b*x),sin(a+b*x)/b)"],"0.352714":["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],"0.454515":["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],"1.615441":["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],"1.543263":["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],"1.008798":["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],"0.963724":["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],"1.611938":["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],"1.791033":["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],"1.123599":["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],"1.387031":["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],"1.325058":["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],"2.108018":["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],"0.403214":["f(1/x*1/(a+log(x)),log(a+log(x)))"],"2.269268":["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],"2.486498":["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],"1.769733":["f(sinh(x),cosh(x))"],"1.883858":["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],"1.690661":["f(x*sinh(x),x*cosh(x)-sinh(x))"],"1.799688":["f(x*cosh(x),x*sinh(x)-cosh(x))"],"3.131954":["f(sinh(x)^2,sinh(2*x)/4-x/2)"],"2.579685":["f(tanh(x)^2,x-tanh(x))"],"3.548923":["f(cosh(x)^2,sinh(2*x)/4+x/2)"],"1.058866":["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],"1.130783":["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],"1.078698":["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],"2.640666":["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],"1.086487":["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],"1.267493":["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],"1.037943":["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.210862":["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],"1.242392":["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]},INV_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},inv=function(){var t,n,a,l;if(save(),p1=pop(),isinv(p1)){push(car(cdr(p1))),restore();return}if(isidentitymatrix(p1)){push(p1),restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),t=[];iscons(p1);)t.push(car(p1)),p1=cdr(p1);for(n=a=l=t.length-1;l<=0?a<=0:a>=0;n=l<=0?++a:--a)push(t[n]),inv(),n!==t.length-1&&inner();restore();return}if(INV_check_arg()===0){push_symbol(INV),push(p1),list(2),restore();return}return isNumericAtomOrTensor(p1)?yyinvg():(push(p1),adj(),push(p1),det(),p2=pop(),isZeroAtomOrTensor(p2)&&stop("inverse of singular matrix"),push(p2),divide()),restore()},invg=function(){if(save(),p1=pop(),INV_check_arg()===0){push_symbol(INVG),push(p1),list(2),restore();return}return yyinvg(),restore()},yyinvg=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en;for(t=0,n=0,l=0,p=0,p=p1.tensor.dim[0],t=tos,n=d=0,Q=p;0<=Q?d<Q:d>Q;n=0<=Q?++d:--d)for(l=a=0,Ct=p;0<=Ct?a<Ct:a>Ct;l=0<=Ct?++a:--a)push(n===l?one:zero);for(n=u=0,ar=p*p;0<=ar?u<ar:u>ar;n=0<=ar?++u:--u)push(p1.tensor.elem[n]);for(INV_decomp(p),p1=alloc_tensor(p*p),p1.tensor.ndim=2,p1.tensor.dim[0]=p,p1.tensor.dim[1]=p,n=c=0,en=p*p;0<=en?c<en:c>en;n=0<=en?++c:--c)p1.tensor.elem[n]=stack[t+n];return moveTos(tos-2*p*p),push(p1)},INV_decomp=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;for(n=0,a=0,l=0,c=0,gn=0,n=tos-t*t,gn=n-t*t,cn=[],a=Q=0,Ct=t;0<=Ct?Q<Ct:Q>Ct;a=0<=Ct?++Q:--Q){if(equal(stack[n+t*a+a],zero)){for(l=u=ar=a+1,en=t;(ar<=en?u<en:u>en)&&equal(stack[n+t*l+a],zero);l=ar<=en?++u:--u);for(l===t&&stop("inverse of singular matrix"),c=p=0,tn=t;0<=tn?p<tn:p>tn;c=0<=tn?++p:--p)p2=stack[n+t*a+c],stack[n+t*a+c]=stack[n+t*l+c],stack[n+t*l+c]=p2,p2=stack[gn+t*a+c],stack[gn+t*a+c]=stack[gn+t*l+c],stack[gn+t*l+c]=p2}for(p2=stack[n+t*a+a],c=d=0,on=t;0<=on?d<on:d>on;c=0<=on?++d:--d)c>a&&(push(stack[n+t*a+c]),push(p2),divide(),stack[n+t*a+c]=pop()),push(stack[gn+t*a+c]),push(p2),divide(),stack[gn+t*a+c]=pop();cn.push(function(){var Cn,ex,ix;for(ix=[],l=Cn=0,ex=t;0<=ex?Cn<ex:Cn>ex;l=0<=ex?++Cn:--Cn)l!==a&&(p2=stack[n+t*l+a],ix.push(function(){var ax,ox,lx;for(lx=[],c=ax=0,ox=t;0<=ox?ax<ox:ax>ox;c=0<=ox?++ax:--ax)c>a&&(push(stack[n+t*l+c]),push(stack[n+t*a+c]),push(p2),multiply(),subtract(),stack[n+t*l+c]=pop()),push(stack[gn+t*l+c]),push(stack[gn+t*a+c]),push(p2),multiply(),subtract(),lx.push(stack[gn+t*l+c]=pop());return lx}()));return ix}())}return cn},DEBUG_IS=!1,isZeroAtom=function(t){switch(t.k){case NUM:return MZERO(t.q.a);case DOUBLE:return t.d===0;default:return!1}},isZeroTensor=function(t){var n,a,l;if(t.k!==TENSOR)return 0;for(n=a=0,l=t.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)if(!isZeroAtomOrTensor(t.tensor.elem[n]))return 0;return 1},isZeroAtomOrTensor=function(t){return isZeroAtom(t)||isZeroTensor(t)},isZeroLikeOrNonZeroLikeOrUndetermined=function(t){var n;if(push(t),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(push(n),zzfloat(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(Find(n,imaginaryunit)){if(push(n),absValFloat(),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1}return null},isnegativenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===-1)return 1;break;case DOUBLE:if(t.d<0)return 1}return 0},ispositivenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===1)return 1;break;case DOUBLE:if(t.d>0)return 1}return 0},isplustwo=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,2)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===2)return 1}return 0},isplusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===1)return 1}return 0},isminusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,-1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===-1)return 1}return 0},isone=function(t){return isplusone(t)||isminusone(t)},isinteger=function(t){return t.k===NUM&&MEQUAL(t.q.b,1)?1:0},isintegerorintegerfloat=function(t){return t.k===DOUBLE?t.d===Math.round(t.d)?1:0:isinteger(t)},isnonnegativeinteger=function(t){return isrational(t)&&MEQUAL(t.q.b,1)&&MSIGN(t.q.a)===1?1:0},isposint=function(t){return isinteger(t)&&MSIGN(t.q.a)===1?1:0},isunivarpolyfactoredorexpandedform=function(t,n){return DEBUG&&console.log("isunivarpolyfactoredorexpandedform: p: "+t+" x: "+n),n==null&&(push(t),guess(),n=pop(),pop()),ispolyfactoredorexpandedform(t,n)&&Find(t,symbol(SYMBOL_X))+Find(t,symbol(SYMBOL_Y))+Find(t,symbol(SYMBOL_Z))===1?n:0},ispolyfactoredorexpandedform=function(t,n){return ispolyfactoredorexpandedform_factor(t,n)},ispolyfactoredorexpandedform_factor=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(DEBUG&&console.log("ispolyfactoredorexpandedform_factor testing "+car(t)),!ispolyfactoredorexpandedform_power(car(t),n))return DEBUG&&console.log("... tested negative:"+car(t)),0;t=cdr(t)}return 1}else return ispolyfactoredorexpandedform_power(t,n)},ispolyfactoredorexpandedform_power=function(t,n){return car(t)===symbol(POWER)?(DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(isposint(caddr(t)),DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+ispolyexpandedform_expr(cadr(t),n)):void 0)),isposint(caddr(t))&&ispolyexpandedform_expr(cadr(t),n)):(DEBUG&&console.log("ispolyfactoredorexpandedform_power not a power, testing if this is exp form: "+t),ispolyexpandedform_expr(t,n))},ispolyexpandedform=function(t,n){return Find(t,n)?ispolyexpandedform_expr(t,n):0},ispolyexpandedform_expr=function(t,n){if(car(t)===symbol(ADD)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_term(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_term(t,n)},ispolyexpandedform_term=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_factor(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_factor(t,n)},ispolyexpandedform_factor=function(t,n){return equal(t,n)?1:car(t)===symbol(POWER)&&equal(cadr(t),n)?isposint(caddr(t))?1:0:Find(t,n)?0:1},isnegativeterm=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},hasNegativeRationalExponent=function(t){return car(t)===symbol(POWER)&&isrational(car(cdr(cdr(t))))&&isnegativenumber(car(cdr(t)))?(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has imaginary component"),1):(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has NO imaginary component"),0)},isimaginarynumberdouble=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isdouble(cadr(t))&&hasNegativeRationalExponent(caddr(t))||equal(t,imaginaryunit)?1:0},isimaginarynumber=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isNumericAtom(cadr(t))&&equal(caddr(t),imaginaryunit)||equal(t,imaginaryunit)||hasNegativeRationalExponent(caddr(t))?(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" is imaginary number"),1):(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" isn't an imaginary number"),0)},iscomplexnumberdouble=function(t){return car(t)===symbol(ADD)&&length(t)===3&&isdouble(cadr(t))&&isimaginarynumberdouble(caddr(t))||isimaginarynumberdouble(t)?1:0},iscomplexnumber=function(t){if(DEBUG_IS)debugger;return car(t)===symbol(ADD)&&length(t)===3&&isNumericAtom(cadr(t))&&isimaginarynumber(caddr(t))||isimaginarynumber(t)?(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),1):(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),0)},iseveninteger=function(t){return isinteger(t)&&t.q.a.isEven()?1:0},isnegative=function(t){return car(t)===symbol(ADD)&&isnegativeterm(cadr(t))||isnegativeterm(t)?1:0},issymbolic=function(t){if(issymbol(t))return 1;for(;iscons(t);){if(issymbolic(car(t)))return 1;t=cdr(t)}return 0},isintegerfactor=function(t){return isinteger(t)||car(t)===symbol(POWER)&&isinteger(cadr(t))&&isinteger(caddr(t))},isNumberOneOverSomething=function(t){return isfraction(t)&&MEQUAL(t.q.a.abs(),1)},isoneover=function(t){return car(t)===symbol(POWER)&&isminusone(caddr(t))},isfraction=function(t){return t.k===NUM&&!MEQUAL(t.q.b,1)},equaln=function(t,n){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,1);case DOUBLE:return t.d===n;default:return!1}},equalq=function(t,n,a){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,a);case DOUBLE:return t.d===n/a;default:return!1}},isoneovertwo=function(t){return equalq(t,1,2)},isminusoneovertwo=function(t){return equalq(t,-1,2)},isoneoversqrttwo=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),2)&&equalq(caddr(t),-1,2)},isminusoneoversqrttwo=function(t){return car(t)===symbol(MULTIPLY)&&equaln(cadr(t),-1)&&isoneoversqrttwo(caddr(t))&&length(t)===3},issqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},isminussqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isminusoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},issqrtthree=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),3)&&isoneovertwo(caddr(t))},isfloating=function(t){if(t.k===DOUBLE||t===symbol(FLOATF))return 1;for(;iscons(t);){if(isfloating(car(t)))return 1;t=cdr(t)}return 0},isimaginaryunit=function(t){return equal(t,imaginaryunit)?1:0},isquarterturn=function(t){var n,a;if(a=0,n=0,car(t)!==symbol(MULTIPLY))return 0;if(equal(cadr(t),imaginaryunit))return caddr(t)!==symbol(PI)||length(t)!==3?0:2;if(!isNumericAtom(cadr(t))||!equal(caddr(t),imaginaryunit)||cadddr(t)!==symbol(PI)||length(t)!==4||(push(cadr(t)),push_integer(2),multiply(),a=pop_integer(),isNaN(a)))return 0;switch(a<1&&(n=1,a=-a),a%4){case 0:a=1;break;case 1:n?a=4:a=3;break;case 2:a=2;break;case 3:n?a=3:a=4}return a},isnpi=function(t){var n;return n=0,t===symbol(PI)?2:!(car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&caddr(t)===symbol(PI)&&length(t)===3)||(push(cadr(t)),push_integer(2),multiply(),n=pop_integer(),isNaN(n))?0:(n<0?n=4- -n%4:n=1+(n-1)%4,n)},$.isZeroAtomOrTensor=isZeroAtomOrTensor,$.isnegativenumber=isnegativenumber,$.isplusone=isplusone,$.isminusone=isminusone,$.isinteger=isinteger,$.isnonnegativeinteger=isnonnegativeinteger,$.isposint=isposint,$.isnegativeterm=isnegativeterm,$.isimaginarynumber=isimaginarynumber,$.iscomplexnumber=iscomplexnumber,$.iseveninteger=iseveninteger,$.isnegative=isnegative,$.issymbolic=issymbolic,$.isintegerfactor=isintegerfactor,$.isoneover=isoneover,$.isfraction=isfraction,$.isoneoversqrttwo=isoneoversqrttwo,$.isminusoneoversqrttwo=isminusoneoversqrttwo,$.isfloating=isfloating,$.isimaginaryunit=isimaginaryunit,$.isquarterturn=isquarterturn,$.isnpi=isnpi,Eval_isprime=function(){return push(cadr(p1)),Eval(),p1=pop(),isnonnegativeinteger(p1)&&mprime(p1.q.a)?push_integer(1):push_integer(0)},Eval_laguerre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),laguerre()},laguerre=function(){var t;if(t=0,save(),p3=pop(),p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(LAGUERRE),push(p1),push(p2),push(p3),list(4),restore();return}return issymbol(p1)?laguerre2(t):(p4=p1,p1=symbol(SECRETX),laguerre2(t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),restore()},laguerre2=function(t){var n,a,l,u;for(n=0,push_integer(1),push_integer(0),p6=pop(),u=[],n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)p5=p6,p6=pop(),push_integer(2*n+1),push(p1),subtract(),push(p3),add(),push(p6),multiply(),push_integer(n),push(p3),add(),push(p5),multiply(),subtract(),push_integer(n+1),u.push(divide());return u},Eval_lcm=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),lcm(),t.push(p1=cdr(p1));return t},lcm=function(){var t;return t=expanding,save(),yylcm(),restore(),expanding=t},yylcm=function(){return expanding=1,p2=pop(),p1=pop(),push(p1),push(p2),gcd(),push(p1),divide(),push(p2),divide(),inverse()},Eval_leading=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),leading()},leading=function(){return save(),p2=pop(),p1=pop(),push(p1),push(p2),degree(),p3=pop(),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter(),restore()},Eval_legendre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),legendre()},legendre=function(){return save(),__legendre(),restore()},__legendre=function(){var t,n;if(t=0,n=0,p3=pop(),p2=pop(),p1=pop(),push(p2),n=pop_integer(),push(p3),t=pop_integer(),n<0||isNaN(n)||t<0||isNaN(t)){push_symbol(LEGENDRE),push(p1),push(p2),push(p3),list(4);return}return issymbol(p1)?__legendre2(n,t):(p4=p1,p1=symbol(SECRETX),__legendre2(n,t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),__legendre3(t)},__legendre2=function(t,n){var a,l,u,c,p,d;for(a=0,push_integer(1),push_integer(0),p6=pop(),a=u=0,c=t;0<=c?u<c:u>c;a=0<=c?++u:--u)p5=p6,p6=pop(),push_integer(2*a+1),push(p1),multiply(),push(p6),multiply(),push_integer(a),push(p5),multiply(),subtract(),push_integer(a+1),divide();for(d=[],a=l=0,p=n;0<=p?l<p:l>p;a=0<=p?++l:--l)push(p1),d.push(derivative());return d},__legendre3=function(t){if(t!==0&&(car(p1)===symbol(COS)?(push(cadr(p1)),sine(),square()):car(p1)===symbol(SIN)?(push(cadr(p1)),cosine(),square()):(push_integer(1),push(p1),square(),subtract()),push_integer(t),push_rational(1,2),multiply(),power(),multiply(),t%2))return negate()},list=function(t){var n,a,l;for(push(symbol(NIL)),l=[],n=0,a=t;0<=a?n<a:n>a;0<=a?++n:--n)l.push(cons());return l},Eval_log=function(){return push(cadr(p1)),Eval(),logarithm()},logarithm=function(){return save(),yylog(),restore()},yylog=function(){var t;if(t=0,p1=pop(),p1===symbol(E)){push_integer(1);return}if(equaln(p1,1)){push_integer(0);return}if(isnegativenumber(p1)){push(p1),negate(),logarithm(),push(imaginaryunit),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),multiply(),add();return}if(isdouble(p1)){t=Math.log(p1.d),push_double(t);return}if(isfraction(p1)){push(p1),numerator(),logarithm(),push(p1),denominator(),logarithm(),subtract();return}if(car(p1)===symbol(POWER)){push(caddr(p1)),push(cadr(p1)),logarithm(),multiply();return}if(car(p1)===symbol(MULTIPLY)){for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),logarithm(),add(),p1=cdr(p1);return}return push_symbol(LOG),push(p1),list(2)},Eval_lookup=function(){return p1=cadr(p1),!iscons(p1)&&cadr(p1).k===SYM&&(p1=get_binding(p1)),push(p1)},madd=function(t,n){return t.add(n)},msub=function(t,n){return t.subtract(n)},mgcd=function(t,n){return bigInt.gcd(t,n)},new_string=function(t){var n;return n=new U,n.k=STR,n.str=t,n},push_zero_matrix=function(t,n){return push(alloc_tensor(t*n)),stack[tos-1].tensor.ndim=2,stack[tos-1].tensor.dim[0]=t,stack[tos-1].tensor.dim[1]=n},equal=function(t,n){return cmp_expr(t,n)===0?1:0},lessp=function(t,n){return cmp_expr(t,n)<0?1:0},sign=function(t){return t<0?-1:t>0?1:0},cmp_expr=function(t,n){var a;if(a=0,t===n)return 0;if(t===symbol(NIL))return-1;if(n===symbol(NIL))return 1;if(isNumericAtom(t)&&isNumericAtom(n))return sign(compare_numbers(t,n));if(isNumericAtom(t))return-1;if(isNumericAtom(n))return 1;if(isstr(t)&&isstr(n))return sign(strcmp(t.str,n.str));if(isstr(t))return-1;if(isstr(n))return 1;if(issymbol(t)&&issymbol(n))return sign(strcmp(get_printname(t),get_printname(n)));if(issymbol(t))return-1;if(issymbol(n))return 1;if(istensor(t)&&istensor(n))return compare_tensors(t,n);if(istensor(t))return-1;if(istensor(n))return 1;for(;iscons(t)&&iscons(n);){if(a=cmp_expr(car(t),car(n)),a!==0)return a;t=cdr(t),n=cdr(n)}return iscons(n)?-1:iscons(t)?1:0},length=function(t){var n;for(n=0;iscons(t);)t=cdr(t),n++;return n},yyexpand=function(){var t;return t=expanding,expanding=1,Eval(),expanding=t},exponential=function(){return push_symbol(E),swap(),power()},square=function(){return push_integer(2),power()},sort_stack=function(t){var n,a;return n=tos-t,a=stack.slice(n,n+t),a.sort(cmp_expr),stack=stack.slice(0,n).concat(a).concat(stack.slice(n+t))},$.equal=equal,$.length=length,mmul=function(t,n){return t.multiply(n)},mdiv=function(t,n){return t.divide(n)},mmod=function(t,n){return t.mod(n)},mdivrem=function(t,n){var a;return a=t.divmod(n),[a.quotient,a.remainder]},Eval_mod=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),mod()},mod=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("mod function: divide by zero"),!isNumericAtom(p1)||!isNumericAtom(p2)){push_symbol(MOD),push(p1),push(p2),list(3),restore();return}return isdouble(p1)&&(push(p1),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p1=pop()),isdouble(p2)&&(push(p2),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p2=pop()),(!isinteger(p1)||!isinteger(p2))&&stop("mod function: integer arguments expected"),p3=new U,p3.k=NUM,p3.q.a=mmod(p1.q.a,p2.q.a),p3.q.b=mint(1),push(p3),restore()},mpow=function(t,n){return t.pow(n)},mprime=function(t){return t.isProbablePrime()},mroot=function(t,n){var a,l,u,c,p,d,Q;for(t=t.abs(),a=0,l=0,u=0,n===0&&stop("root index is zero"),u=0;t.shiftRight(u)>0;)u++;if(u===0)return mint(0);for(u=Math.floor((u-1)/n),l=Math.floor(u/32+1),d=bigInt(l),a=c=0,p=l;0<=p?c<p:c>p;a=0<=p?++c:--c)d=d.and(bigInt(1).shiftLeft(a).not());for(;u>=0;){switch(d=d.or(bigInt(1).shiftLeft(u)),Q=mpow(d,n),mcmp(Q,t)){case 0:return d;case 1:d=d.and(bigInt(1).shiftLeft(u).not())}u--}return 0},DEBUG_MULTIPLY=!1,Eval_multiply=function(){var t;for(push(cadr(p1)),Eval(),p1=cddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),multiply(),t.push(p1=cdr(p1));return t},multiply=function(){return esc_flag&&stop("escape key stop"),isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?multiply_numbers():(save(),yymultiply(),restore())},yymultiply=function(){var t,n,a,l,u,c;if(t=0,n=0,a=0,p2=pop(),p1=pop(),t=tos,isZeroAtom(p1)||isZeroAtom(p2)){evaluatingAsFloats?push_double(0):push(zero);return}if(expanding&&isadd(p1)){for(p1=cdr(p1),evaluatingAsFloats?push_double(0):push(zero);iscons(p1);)push(car(p1)),push(p2),multiply(),add(),p1=cdr(p1);return}if(expanding&&isadd(p2)){for(p2=cdr(p2),evaluatingAsFloats?push_double(0):push(zero);iscons(p2);)push(p1),push(car(p2)),multiply(),add(),p2=cdr(p2);return}if(!istensor(p1)&&istensor(p2)){push(p1),push(p2),scalar_times_tensor();return}if(istensor(p1)&&!istensor(p2)){push(p1),push(p2),tensor_times_scalar();return}for(car(p1)===symbol(MULTIPLY)?p1=cdr(p1):(push(p1),list(1),p1=pop()),car(p2)===symbol(MULTIPLY)?p2=cdr(p2):(push(p2),list(1),p2=pop()),isNumericAtom(car(p1))&&isNumericAtom(car(p2))?(push(car(p1)),push(car(p2)),multiply_numbers(),p1=cdr(p1),p2=cdr(p2)):isNumericAtom(car(p1))?(push(car(p1)),p1=cdr(p1)):isNumericAtom(car(p2))?(push(car(p2)),p2=cdr(p2)):evaluatingAsFloats?push_double(1):push(one),parse_p1(),parse_p2();iscons(p1)&&iscons(p2);){if(caar(p1)===symbol(OPERATOR)&&caar(p2)===symbol(OPERATOR)){push_symbol(OPERATOR),push(cdar(p1)),push(cdar(p2)),append(),cons(),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();continue}switch(cmp_expr(p3,p4)){case-1:push(car(p1)),p1=cdr(p1),parse_p1();break;case 1:push(car(p2)),p2=cdr(p2),parse_p2();break;case 0:combine_factors(t),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();break;default:stop("internal error 2")}}for(;iscons(p1);)push(car(p1)),p1=cdr(p1);for(;iscons(p2);)push(car(p2)),p2=cdr(p2);if(__normalize_radical_factors(t),expanding){for(n=l=u=t,c=tos;u<=c?l<c:l>c;n=u<=c?++l:--l)if(isadd(stack[n])){multiply_all(tos-t);return}}if(a=tos-t,a!==1){if(isrational(stack[t])&&equaln(stack[t],1)){a===2?(p7=pop(),pop(),push(p7)):(stack[t]=symbol(MULTIPLY),list(a));return}return list(a),p7=pop(),push_symbol(MULTIPLY),push(p7),cons()}},parse_p1=function(){if(p3=car(p1),p5=evaluatingAsFloats?one_as_double:one,car(p3)===symbol(POWER))return p5=caddr(p3),p3=cadr(p3)},parse_p2=function(){if(p4=car(p2),p6=evaluatingAsFloats?one_as_double:one,car(p4)===symbol(POWER))return p6=caddr(p4),p4=cadr(p4)},combine_factors=function(t){return push(p4),push(p5),push(p6),add(),power(),p7=pop(),isNumericAtom(p7)?(push(stack[t]),push(p7),multiply_numbers(),stack[t]=pop()):car(p7)===symbol(MULTIPLY)&&isNumericAtom(cadr(p7))&&cdddr(p7)===symbol(NIL)?(push(stack[t]),push(cadr(p7)),multiply_numbers(),stack[t]=pop(),push(caddr(p7))):push(p7)},multiply_noexpand=function(){var t;return t=expanding,expanding=0,multiply(),expanding=t},multiply_all=function(t){var n,a,l,u;if(a=0,t!==1){if(t===0){push(evaluatingAsFloats?one_as_double:one);return}for(n=tos-t,push(stack[n]),a=l=1,u=t;1<=u?l<u:l>u;a=1<=u?++l:--l)push(stack[n+a]),multiply();return stack[n]=pop(),moveTos(n+1)}},multiply_all_noexpand=function(t){var n;return n=expanding,expanding=0,multiply_all(t),expanding=n},divide=function(){return isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?divide_numbers():(inverse(),multiply())},inverse=function(){return isNumericAtom(stack[tos-1])?invert_number():(push_integer(-1),power())},reciprocate=function(){return inverse()},negate=function(){return isNumericAtom(stack[tos-1])?negate_number():(evaluatingAsFloats?push_double(-1):push_integer(-1),multiply())},negate_noexpand=function(){var t;return t=expanding,expanding=0,negate(),expanding=t},__normalize_radical_factors=function(t){var n,a,l,u,c,p,d,Q,Ct,ar;if(n=0,!(isplusone(stack[t])||isminusone(stack[t])||isdouble(stack[t]))){for(n=u=c=t+1,p=tos;(c<=p?u<p:u>p)&&!__is_radical_number(stack[n]);n=c<=p?++u:--u);if(n!==tos){for(save(),push(stack[t]),mp_numerator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors numerator: "+stack[tos-1]),p1=pop(),n=a=d=t+1,Q=tos;(d<=Q?a<Q:a>Q)&&!(isplusone(p1)||isminusone(p1));n=d<=Q?++a:--a)__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),isnegativenumber(p4)&&(push(p1),push(p3),divide(),p5=pop(),isinteger(p5)&&(p1=p5,push_symbol(POWER),push(p3),push(evaluatingAsFloats?one_as_double:one),push(p4),add(),list(3),stack[n]=pop())));for(push(stack[t]),mp_denominator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors denominator: "+stack[tos-1]),p2=pop(),n=l=Ct=t+1,ar=tos;(Ct<=ar?l<ar:l>ar)&&!isplusone(p2);n=Ct<=ar?++l:--l)if(__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),!isnegativenumber(p4)&&(push(p2),push(p3),divide(),p5=pop(),!!isinteger(p5)))){if(DEBUG_MULTIPLY&&console.log("__new radical p5: "+p5.toString()),DEBUG_MULTIPLY&&console.log("__new radical top stack: "+stack[tos-1]),p2=p5,push_symbol(POWER),push(p3),push(p4),DEBUG_MULTIPLY&&console.log("__new radical p3: "+p3.toString()),DEBUG_MULTIPLY&&console.log("__new radical p4: "+p4.toString()),push(one),subtract(),dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&isinteger(p3)&&!isinteger(stack[tos-1])&&isnegativenumber(stack[tos-1])){pop(),pop(),pop(),push(p1),push(p3),divide(),p1=pop();break}DEBUG_MULTIPLY&&console.log("__new radical exponent: "+stack[tos-1]),list(3),stack[n]=pop()}return push(p1),push(p2),divide(),stack[t]=pop(),restore()}}},__is_radical_number=function(t){return car(t)===symbol(POWER)&&isNumericAtom(cadr(t))&&isfraction(caddr(t))&&!isminusone(cadr(t))},NROOTS_YMAX=101,NROOTS_DELTA=1e-6,NROOTS_EPSILON=1e-9,NROOTS_ABS=function(t){return Math.sqrt(t.r*t.r+t.i*t.i)},NROOTS_RANDOM=function(){return 4*Math.random()-2},numericRootOfPolynomial=(function(){class t{}return t.prototype.r=0,t.prototype.i=0,t}).call(this),nroots_a=new numericRootOfPolynomial,nroots_b=new numericRootOfPolynomial,nroots_x=new numericRootOfPolynomial,nroots_y=new numericRootOfPolynomial,nroots_fa=new numericRootOfPolynomial,nroots_fb=new numericRootOfPolynomial,nroots_dx=new numericRootOfPolynomial,nroots_df=new numericRootOfPolynomial,nroots_c=[],initNRoots=o=0,ref=NROOTS_YMAX;0<=ref?o<ref:o>ref;initNRoots=0<=ref?++o:--o)nroots_c[initNRoots]=new numericRootOfPolynomial;for(Eval_nroots=function(){var t,n,a,l,u,c,p,d,Q;for(t=0,n=0,u=0,p=0,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("nroots: polynomial?"),t=tos,p=coeff(p2,p1),p>NROOTS_YMAX&&stop("nroots: degree?"),n=a=0,d=p;0<=d?a<d:a>d;n=0<=d?++a:--a)push(stack[t+n]),real(),yyfloat(),Eval(),p1=pop(),push(stack[t+n]),imag(),yyfloat(),Eval(),p2=pop(),(!isdouble(p1)||!isdouble(p2))&&stop("nroots: coefficients?"),nroots_c[n].r=p1.d,nroots_c[n].i=p2.d;for(moveTos(t),monic(p),u=l=p;l>1;u=l+=-1)findroot(u),Math.abs(nroots_a.r)<NROOTS_DELTA&&(nroots_a.r=0),Math.abs(nroots_a.i)<NROOTS_DELTA&&(nroots_a.i=0),push_double(nroots_a.r),push_double(nroots_a.i),push(imaginaryunit),multiply(),add(),NROOTS_divpoly(u);if(p=tos-t,p>1){for(sort_stack(p),p1=alloc_tensor(p),p1.tensor.ndim=1,p1.tensor.dim[0]=p,n=c=0,Q=p;0<=Q?c<Q:c>Q;n=0<=Q?++c:--c)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1)}},monic=function(t){var n,a,l,u;for(a=0,u=0,nroots_y.r=nroots_c[t-1].r,nroots_y.i=nroots_c[t-1].i,u=nroots_y.r*nroots_y.r+nroots_y.i*nroots_y.i,a=n=0,l=t-1;0<=l?n<l:n>l;a=0<=l?++n:--n)nroots_c[a].r=(nroots_c[a].r*nroots_y.r+nroots_c[a].i*nroots_y.i)/u,nroots_c[a].i=(nroots_c[a].i*nroots_y.r-nroots_c[a].r*nroots_y.i)/u;return nroots_c[t-1].r=1,nroots_c[t-1].i=0},findroot=function(t){var n,a,l,u;if(u=0,NROOTS_ABS(nroots_c[0])<NROOTS_DELTA){nroots_a.r=0,nroots_a.i=0;return}for(n=0;n<100;++n)for(nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),compute_fa(t),nroots_b.r=nroots_a.r,nroots_b.i=nroots_a.i,nroots_fb.r=nroots_fa.r,nroots_fb.i=nroots_fa.i,nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),a=0;a<1e3;++a){if(compute_fa(t),l=NROOTS_ABS(nroots_fa),DEBUG&&console.log("nrabs: "+l),l<NROOTS_EPSILON)return;if(NROOTS_ABS(nroots_fa)<NROOTS_ABS(nroots_fb)&&(nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_a.r=nroots_b.r,nroots_a.i=nroots_b.i,nroots_b.r=nroots_x.r,nroots_b.i=nroots_x.i,nroots_x.r=nroots_fa.r,nroots_x.i=nroots_fa.i,nroots_fa.r=nroots_fb.r,nroots_fa.i=nroots_fb.i,nroots_fb.r=nroots_x.r,nroots_fb.i=nroots_x.i),nroots_dx.r=nroots_b.r-nroots_a.r,nroots_dx.i=nroots_b.i-nroots_a.i,nroots_df.r=nroots_fb.r-nroots_fa.r,nroots_df.i=nroots_fb.i-nroots_fa.i,u=nroots_df.r*nroots_df.r+nroots_df.i*nroots_df.i,u===0)break;nroots_y.r=(nroots_dx.r*nroots_df.r+nroots_dx.i*nroots_df.i)/u,nroots_y.i=(nroots_dx.i*nroots_df.r-nroots_dx.r*nroots_df.i)/u,nroots_a.r=nroots_b.r-(nroots_y.r*nroots_fb.r-nroots_y.i*nroots_fb.i),nroots_a.i=nroots_b.i-(nroots_y.r*nroots_fb.i+nroots_y.i*nroots_fb.r)}return stop("nroots: convergence error")},compute_fa=function(t){var n,a,l,u,c;for(a=0,c=0,nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_fa.r=nroots_c[0].r+nroots_c[1].r*nroots_x.r-nroots_c[1].i*nroots_x.i,nroots_fa.i=nroots_c[0].i+nroots_c[1].r*nroots_x.i+nroots_c[1].i*nroots_x.r,u=[],a=n=2,l=t;2<=l?n<l:n>l;a=2<=l?++n:--n)c=nroots_a.r*nroots_x.r-nroots_a.i*nroots_x.i,nroots_x.i=nroots_a.r*nroots_x.i+nroots_a.i*nroots_x.r,nroots_x.r=c,nroots_fa.r+=nroots_c[a].r*nroots_x.r-nroots_c[a].i*nroots_x.i,u.push(nroots_fa.i+=nroots_c[a].r*nroots_x.i+nroots_c[a].i*nroots_x.r);return u},NROOTS_divpoly=function(t){var n,a,l,u,c,p;for(l=0,l=n=u=t-1;u<=0?n<0:n>0;l=u<=0?++n:--n)nroots_c[l-1].r+=nroots_c[l].r*nroots_a.r-nroots_c[l].i*nroots_a.i,nroots_c[l-1].i+=nroots_c[l].i*nroots_a.r+nroots_c[l].r*nroots_a.i;for(NROOTS_ABS(nroots_c[0])>NROOTS_DELTA&&stop("nroots: residual error"),p=[],l=a=0,c=t-1;0<=c?a<c:a>c;l=0<=c?++a:--a)nroots_c[l].r=nroots_c[l+1].r,p.push(nroots_c[l].i=nroots_c[l+1].i);return p},Eval_numerator=function(){return push(cadr(p1)),Eval(),numerator()},numerator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),numerator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_numerator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?push(one):push(n)},Eval_outer=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),outer(),t.push(p1=cdr(p1));return t},outer=function(){return save(),p2=pop(),p1=pop(),istensor(p1)&&istensor(p2)?yyouter():(push(p1),push(p2),istensor(p1)?tensor_times_scalar():istensor(p2)?scalar_times_tensor():multiply()),restore()},yyouter=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn;for(t=0,a=0,u=0,d=0,Q=0,d=p1.tensor.ndim+p2.tensor.ndim,d>MAXDIM&&stop("outer: rank of result exceeds maximum"),Q=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(Q),p3.tensor.ndim=d,t=n=0,Ct=p1.tensor.ndim;0<=Ct?n<Ct:n>Ct;t=0<=Ct?++n:--n)p3.tensor.dim[t]=p1.tensor.dim[t];for(a=t,t=l=0,ar=p2.tensor.ndim;0<=ar?l<ar:l>ar;t=0<=ar?++l:--l)p3.tensor.dim[a+t]=p2.tensor.dim[t];for(u=0,t=c=0,en=p1.tensor.nelem;0<=en?c<en:c>en;t=0<=en?++c:--c)for(a=p=0,tn=p2.tensor.nelem;0<=tn?p<tn:p>tn;a=0<=tn?++p:--p)push(p1.tensor.elem[t]),push(p2.tensor.elem[a]),multiply(),p3.tensor.elem[u++]=pop();return push(p3)},partition=function(){for(save(),p2=pop(),p1=pop(),push_integer(1),p3=pop(),p4=p3,p1=cdr(p1);iscons(p1);)Find(car(p1),p2)?(push(p4),push(car(p1)),multiply(),p4=pop()):(push(p3),push(car(p1)),multiply(),p3=pop()),p1=cdr(p1);return push(p3),push(p4),restore()},Eval_silentpattern=function(){return Eval_pattern(),pop(),push_symbol(NIL)},Eval_pattern=function(){var t,n,a,l,u;return iscons(cdr(p1))||stop("pattern needs at least a template and a transformed version"),t=car(cdr(p1)),a=car(cdr(cdr(p1))),a===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),iscons(cdr(cdr(p1)))?u=car(cdr(cdr(cdr(p1)))):u=symbol(NIL),equal(t,a)&&stop("recursive pattern"),l="template: "+print_list(t),l+=" tests: "+print_list(u),DEBUG&&console.log("pattern stringkey: "+l),n=userSimplificationsInStringForm.indexOf(l),n===-1?(userSimplificationsInStringForm.push(l),userSimplificationsInListForm.push(cdr(p1))):(DEBUG&&console.log("pattern already exists, replacing. "+cdr(p1)),userSimplificationsInStringForm[n]=l,userSimplificationsInListForm[n]=cdr(p1)),push_symbol(PATTERN),push(cdr(p1)),list(2)},do_clearPatterns=function(){return userSimplificationsInListForm=[],userSimplificationsInStringForm=[]},Eval_clearpatterns=function(){return do_clearPatterns(),push_symbol(NIL)},Eval_patternsinfo=function(){var t;return t=patternsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},patternsinfo=function(){var t,n,a;for(a="",t=0,n=userSimplificationsInListForm.length;t<n;t++)userSimplificationsInListForm[t],a+=userSimplificationsInListForm+`
`;return a},Eval_polar=function(){return push(cadr(p1)),Eval(),polar()},polar=function(){return evaluatingPolar++,save(),p1=pop(),push(p1),abs(),push(imaginaryunit),push(p1),arg(),multiply(),exponential(),multiply(),evaluatingPolar--,restore()},n_factor_number=0,factor_number=function(){var t;if(t=0,save(),p1=pop(),equaln(p1,0)||equaln(p1,1)||equaln(p1,-1)){push(p1),restore();return}return n_factor_number=p1.q.a,t=tos,factor_a(),tos-t>1&&(list(tos-t),push_symbol(MULTIPLY),swap(),cons()),restore()},factor_a=function(){var t,n;for(n=0,n_factor_number.isNegative()&&(n_factor_number=setSignTo(n_factor_number,1),push_integer(-1)),n=t=0;t<1e4;n=++t)if(try_kth_prime(n),n_factor_number.compare(1)===0)return;return factor_b()},try_kth_prime=function(t){var n,a,l,u;for(n=0,a=mint(primetab[t]),n=0;;){if(n_factor_number.compare(1)===0){n&&push_factor(a,n);return}if([l,u]=mdivrem(n_factor_number,a),u.isZero())n++,n_factor_number=l;else break}if(n&&push_factor(a,n),mcmp(l,a)===-1)return push_factor(n_factor_number,1),n_factor_number=mint(1)},factor_b=function(){var t,n,a,l,u,c,p;for(a=0,l=0,t=mint(1),c=mint(5),p=mint(2),a=1,l=1;;){if(mprime(n_factor_number))return push_factor(n_factor_number,1),0;for(;;){if(esc_flag&&stop("esc"),u=msub(p,c),u=setSignTo(u,1),n=mgcd(u,n_factor_number),MEQUAL(n,1)){--a===0&&(p=c,l*=2,a=l),u=mmul(c,c),c=madd(u,t),u=mmod(c,n_factor_number),c=u;continue}if(push_factor(n,1),mcmp(n,n_factor_number)===0)return-1;u=mdiv(n_factor_number,n),n_factor_number=u,u=mmod(c,n_factor_number),c=u,u=mmod(p,n_factor_number),p=u;break}}},push_factor=function(t,n){if(p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=mint(1),push(p1),n>1)return push_symbol(POWER),swap(),p1=new U,p1.k=NUM,p1.q.a=mint(n),p1.q.b=mint(1),push(p1),list(3)},DEBUG_POWER=!1,Eval_power=function(){if(DEBUG_POWER)debugger;return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),power()},power=function(){return save(),yypower(),restore()},yypower=function(){var t,n,a,l,u,c,p;if(DEBUG_POWER)debugger;if(p=0,p2=pop(),p1=pop(),l=p2,a=p1,DEBUG_POWER&&console.log("POWER: "+p1+" ^ "+p2),equal(p1,one)||isZeroAtomOrTensor(p2)){evaluatingAsFloats?push_double(1):push(one),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(equal(p2,one)){push(p1),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusone(p2)){evaluatingAsFloats?push_double(1):push(one),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusoneovertwo(p2)){push(imaginaryunit),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isminusone(p1)&&!isdouble(p1)&&isrational(p2)&&!isinteger(p2)&&ispositivenumber(p2)&&!evaluatingAsFloats){DEBUG_POWER&&console.log("   power: -1 ^ rational"),DEBUG_POWER&&console.log(" trick: p2.q.a , p2.q.b "+p2.q.a+" , "+p2.q.b),p2.q.a<p2.q.b?(push_symbol(POWER),push(p1),push(p2),list(3)):(push_symbol(MULTIPLY),push(p1),push_symbol(POWER),push(p1),push_rational(p2.q.a.mod(p2.q.b),p2.q.b),list(3),list(3),DEBUG_POWER&&console.log(" trick applied : "+stack[tos-1])),rect(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isrational(p1)&&isrational(p2)){DEBUG_POWER&&console.log("   power: isrational(p1) && isrational(p2)"),push(p1),push(p2),qpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isNumericAtom(p1)&&isNumericAtom(p2)){DEBUG_POWER&&console.log("   power: both base and exponent are either rational or double "),DEBUG_POWER&&console.log("POWER - isNumericAtom(p1) && isNumericAtom(p2)"),push(p1),push(p2),dpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(istensor(p1)){DEBUG_POWER&&console.log("   power: istensor(p1) "),power_tensor(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(car(p1)===symbol(ABS)&&iseveninteger(p2)&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))){DEBUG_POWER&&console.log("   power: even power of absolute of real value "),push(cadr(p1)),push(p2),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(p1===symbol(E)&&car(p2)===symbol(LOG)){push(cadr(p2)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(p1===symbol(E)&&isdouble(p2)){DEBUG_POWER&&console.log("   power: p1 == symbol(E) && isdouble(p2) "),push_double(Math.exp(p2.d)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(p1===symbol(E)&&Find(p2,imaginaryunit)!==0&&Find(p2,symbol(PI))!==0&&!evaluatingPolar&&(push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER&&console.log("   power: turning complex exponential to rect: "+stack[tos-1]),rect(),n=pop(),Find(n,symbol(PI))===0)){DEBUG_POWER&&console.log("   power: turned complex exponential to rect: "+n),push(n);return}if(car(p1)===symbol(MULTIPLY)&&isinteger(p2)){for(DEBUG_POWER&&console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),p1=cdr(p1),push(car(p1)),push(p2),power(),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),power(),multiply(),p1=cdr(p1);DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(c=!1,isNumericAtom(cadr(p1))&&(c=sign(compare_numbers(cadr(p1),zero))),car(p1)===symbol(POWER)&&(isinteger(p2)||c)){push(cadr(p1)),push(caddr(p1)),push(p2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(t=!1,iseveninteger(caddr(p1))&&(push(caddr(p1)),push(p2),multiply(),u=pop(),isone(u)&&(t=!0)),car(p1)===symbol(POWER)&&t){DEBUG_POWER&&console.log("   power: car(p1) == symbol(POWER) && b_isEven_and_c_isItsInverse "),push(cadr(p1)),abs(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(expanding&&isadd(p1)&&isNumericAtom(p2)&&(push(p2),p=pop_integer(),p>1&&!isNaN(p))){DEBUG_POWER&&console.log("   power: expanding && isadd(p1) && isNumericAtom(p2) "),power_sum(p),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(trigmode===1&&car(p1)===symbol(SIN)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 1 && car(p1) == symbol(SIN) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),cosine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(trigmode===2&&car(p1)===symbol(COS)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 2 && car(p1) == symbol(COS) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),sine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(iscomplexnumber(p1)){if(DEBUG_POWER&&console.log(" power - handling the case (a + ib) ^ n"),isinteger(p2)){push(p1),conjugate(),p3=pop(),push(p3),push(p3),push(p1),multiply(),divide(),isone(p2)||(push(p2),negate(),power()),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}if(isNumericAtom(p2)){push(p1),abs(),push(p2),power(),push_integer(-1),push(p1),arg(),push(p2),multiply(),evaluatingAsFloats||iscomplexnumberdouble(p1)&&isdouble(p2)?push_double(Math.PI):push(symbol(PI)),divide(),power(),multiply(),avoidCalculatingPowersIntoArctans&&Find(stack[tos-1],symbol(ARCTAN))&&(pop(),push_symbol(POWER),push(p1),push(p2),list(3)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+l+": "+stack[tos-1]);return}}if(simplify_polar()){DEBUG_POWER&&console.log("   power: using simplify_polar");return}if(DEBUG_POWER&&console.log("   power: nothing can be done "),push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER)return console.log("   power of "+a+" ^ "+l+": "+stack[tos-1])},power_sum=function(t){var n,a,l,u,c,p,d,Q,Ct,ar;for(n=[],a=0,u=0,p=0,p=length(p1)-1,push_frame(p*(t+1)),p1=cdr(p1),a=l=0,Q=p;0<=Q?l<Q:l>Q;a=0<=Q?++l:--l){for(u=c=0,Ct=t;0<=Ct?c<=Ct:c>=Ct;u=0<=Ct?++c:--c)push(car(p1)),push_integer(u),power(),stack[frame+a*(t+1)+u]=pop();p1=cdr(p1)}for(push_integer(t),factorial(),p1=pop(),a=d=0,ar=p;0<=ar?d<ar:d>ar;a=0<=ar?++d:--d)n[a]=0;return push(zero),multinomial_sum(p,t,n,0,t),pop_frame(p*(t+1))},multinomial_sum=function(t,n,a,l,u){var c,p,d,Q,Ct,ar,en;if(p=0,l<t-1){for(p=c=0,Ct=u;0<=Ct?c<=Ct:c>=Ct;p=0<=Ct?++c:--c)a[l]=p,multinomial_sum(t,n,a,l+1,u-p);return}for(a[l]=u,push(p1),p=d=0,ar=t;0<=ar?d<ar:d>ar;p=0<=ar?++d:--d)push_integer(a[p]),factorial(),divide();for(p=Q=0,en=t;0<=en?Q<en:Q>en;p=0<=en?++Q:--Q)push(stack[frame+p*(n+1)+a[p]]),multiply();return add()},simplify_polar=function(){var t;switch(t=0,t=isquarterturn(p2),t){case 0:break;case 1:return push_integer(1),1;case 2:return push_integer(-1),1;case 3:return push(imaginaryunit),1;case 4:return push(imaginaryunit),negate(),1}if(car(p2)===symbol(ADD)){for(p3=cdr(p2);iscons(p3)&&(t=isquarterturn(car(p3)),!t);)p3=cdr(p3);switch(t){case 0:return 0;case 1:push_integer(1);break;case 2:push_integer(-1);break;case 3:push(imaginaryunit);break;case 4:push(imaginaryunit),negate()}return push(p2),push(car(p3)),subtract(),exponential(),multiply(),1}return 0},Eval_prime=function(){return push(cadr(p1)),Eval(),prime()},prime=function(){var t;return t=0,t=pop_integer(),(t<1||t>MAXPRIMETAB)&&stop("prime: Argument out of range."),t=primetab[t-1],push_integer(t)},power_str="^",codeGen=!1,Eval_print=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),printMode),push(symbol(NIL))},Eval_print2dascii=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_2DASCII),push(symbol(NIL))},Eval_printcomputer=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_COMPUTER),push(symbol(NIL))},Eval_printlatex=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_LATEX),push(symbol(NIL))},Eval_printhuman=function(){var t;return t=test_flag,test_flag=0,stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_HUMAN),test_flag=t,push(symbol(NIL))},Eval_printlist=function(){var t;return t=_print(cdr(p1),PRINTMODE_LIST),stringsEmittedByUserPrintouts+=t,push(symbol(NIL))},_print=function(t,n){var a,l;for(a="";iscons(t);)push(car(t)),Eval(),p2=pop(),l=printMode,n===PRINTMODE_COMPUTER?(printMode=PRINTMODE_COMPUTER,a=printline(p2),rememberPrint(a,LAST_FULL_PRINT)):n===PRINTMODE_HUMAN?(printMode=PRINTMODE_HUMAN,a=printline(p2),rememberPrint(a,LAST_PLAIN_PRINT)):n===PRINTMODE_2DASCII?(printMode=PRINTMODE_2DASCII,a=print2dascii(p2),rememberPrint(a,LAST_2DASCII_PRINT)):n===PRINTMODE_LATEX?(printMode=PRINTMODE_LATEX,a=printline(p2),rememberPrint(a,LAST_LATEX_PRINT)):n===PRINTMODE_LIST&&(printMode=PRINTMODE_LIST,a=print_list(p2),rememberPrint(a,LAST_LIST_PRINT)),printMode=l,t=cdr(t);return DEBUG&&console.log("emttedString from display: "+stringsEmittedByUserPrintouts),a},rememberPrint=function(t,n){var a;return scan('"'+t+'"'),a=pop(),set_binding(symbol(n),a)},print_str=function(t){return DEBUG&&console.log("emttedString from print_str: "+stringsEmittedByUserPrintouts),t},print_char=function(t){return t},collectLatexStringFromReturnValue=function(t){var n,a,l;return n=printMode,printMode=PRINTMODE_LATEX,a=codeGen,codeGen=!1,l=print_expr(t),l=l.replace(/_/g,"\\_"),printMode=n,codeGen=a,DEBUG&&console.log("emttedString from collectLatexStringFromReturnValue: "+stringsEmittedByUserPrintouts),l},printline=function(t){var n;return n="",n+=print_expr(t),n},print_base_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||lessp(t,zero)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_expo_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_denom=function(t,n){var a;return a="",save(),p1=cadr(t),p2=caddr(t),isminusone(p2)?(a+=print_base_of_denom(p1),restore(),a):(n===1&&(a+=print_char("(")),push(p2),negate(),p2=pop(),a+=print_power(p1,p2),n===1&&(a+=print_char(")")),restore(),a)},print_a_over_b=function(t){var n,a,l;for(n="",flag=0,l=0,a=0,save(),l=0,a=0,p1=cdr(t),p2=car(p1),isrational(p2)?(push(p2),mp_numerator(),absval(),p3=pop(),push(p2),mp_denominator(),p4=pop(),isplusone(p3)||l++,isplusone(p4)||a++,p1=cdr(p1)):(p3=one,p4=one);iscons(p1);)p2=car(p1),is_denominator(p2)?a++:l++,p1=cdr(p1);if(printMode===PRINTMODE_LATEX&&(n+=print_str("\\frac{")),l===0)n+=print_char("1");else for(flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p3)||(n+=print_factor(p3),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)||(flag&&(n+=print_multiply_sign()),n+=print_factor(p2),flag=1),p1=cdr(p1);for(printMode===PRINTMODE_LATEX?n+=print_str("}{"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" / "):n+=print_str("/"),a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char("(")),flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p4)||(n+=print_factor(p4),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)&&(flag&&(n+=print_multiply_sign()),n+=print_denom(p2,a),flag=1),p1=cdr(p1);return a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char(")")),printMode===PRINTMODE_LATEX&&(n+=print_str("}")),restore(),n},print_expr=function(t){var n;if(n="",isadd(t))for(t=cdr(t),sign_of_term(car(t))==="-"&&(n+=print_str("-")),n+=print_term(car(t)),t=cdr(t);iscons(t);)sign_of_term(car(t))==="+"?printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" + "):n+=print_str("+"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" - "):n+=print_str("-"),n+=print_term(car(t)),t=cdr(t);else sign_of_term(t)==="-"&&(n+=print_str("-")),n+=print_term(t);return n},sign_of_term=function(t){var n;return n="",car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&lessp(cadr(t),zero)||isNumericAtom(t)&&lessp(t,zero)?n+="-":n+="+",n},print_term=function(t){var n,a,l,u,c;if(n="",car(t)===symbol(MULTIPLY)&&any_denominators(t))return n+=print_a_over_b(t),n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),isminusone(car(t))&&(t=cdr(t)),c=!1,isNumericAtom(car(t))&&(c=!0),l=!1,printMode===PRINTMODE_LATEX&&iscons(cdr(t))&&isNumberOneOverSomething(car(t))&&(l=!0,a=car(t).q.b.toString()),l?(u=n,n=""):n+=print_factor(car(t)),t=cdr(t);iscons(t);)printMode===PRINTMODE_LATEX&&c&&caar(t)===symbol(POWER)&&isNumericAtom(car(cdr(car(t))))&&(isfraction(car(cdr(cdr(car(t)))))||(n+=" \\cdot ")),n+=print_multiply_sign(),n+=print_factor(car(t),!1,!0),c=!1,isNumericAtom(car(t))&&(c=!0),t=cdr(t);l&&(n=u+"\\frac{"+n+"}{"+a+"}")}else n+=print_factor(t);return n},print_subexpr=function(t){var n;return n="",n+=print_char("("),n+=print_expr(t),n+=print_char(")"),n},print_factorial_function=function(t){var n;return n="",t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?n+=print_subexpr(t):n+=print_expr(t),n+=print_char("!"),n},print_ABS_latex=function(t){var n;return n="",n+=print_str("\\left |"),n+=print_expr(cadr(t)),n+=print_str(" \\right |"),n},print_BINOMIAL_latex=function(t){var n;return n="",n+=print_str("\\binom{"),n+=print_expr(cadr(t)),n+=print_str("}{"),n+=print_expr(caddr(t)),n+=print_str("} "),n},print_DOT_latex=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=print_str(" \\cdot "),n+=print_expr(caddr(t)),n},print_DOT_codegen=function(t){var n;return n="dot(",n+=print_expr(cadr(t)),n+=", ",n+=print_expr(caddr(t)),n+=")",n},print_SIN_codegen=function(t){var n;return n="Math.sin(",n+=print_expr(cadr(t)),n+=")",n},print_COS_codegen=function(t){var n;return n="Math.cos(",n+=print_expr(cadr(t)),n+=")",n},print_TAN_codegen=function(t){var n;return n="Math.tan(",n+=print_expr(cadr(t)),n+=")",n},print_ARCSIN_codegen=function(t){var n;return n="Math.asin(",n+=print_expr(cadr(t)),n+=")",n},print_ARCCOS_codegen=function(t){var n;return n="Math.acos(",n+=print_expr(cadr(t)),n+=")",n},print_ARCTAN_codegen=function(t){var n;return n="Math.atan(",n+=print_expr(cadr(t)),n+=")",n},print_SQRT_latex=function(t){var n;return n="",n+=print_str("\\sqrt{"),n+=print_expr(cadr(t)),n+=print_str("} "),n},print_TRANSPOSE_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^T"),n},print_TRANSPOSE_codegen=function(t){var n;return n="",n+=print_str("transpose("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_UNIT_codegen=function(t){var n;return n="",n+=print_str("identity("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_INV_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^{-1}"),n},print_INV_codegen=function(t){var n;return n="",n+=print_str("inv("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_DEFINT_latex=function(t){var n,a,l,u,c,p,d,Q,Ct;for(n="",a=car(cdr(t)),t=cdr(t),p=t,c=0;iscons(cdr(cdr(t)));)c++,Q=cdr(cdr(t)),n+=print_str("\\int^{"),n+=print_expr(car(cdr(Q))),n+=print_str("}_{"),n+=print_expr(car(Q)),n+=print_str("} \\! "),t=cdr(Q);for(n+=print_expr(a),n+=print_str(" \\,"),t=p,l=u=1,d=c;1<=d?u<=d:u>=d;l=1<=d?++u:--u)Ct=cdr(t),n+=print_str(" \\mathrm{d} "),n+=print_expr(car(Ct)),l<c&&(n+=print_str(" \\, ")),t=cdr(cdr(Ct));return n},print_tensor=function(t){var n;return n="",n+=print_tensor_inner(t,0,0)[1],n},print_tensor_inner=function(t,n,a){var l,u,c,p,d,Q,Ct;if(l="",l+=print_str("["),n<t.tensor.ndim-1)for(u=c=0,d=t.tensor.dim[n];0<=d?c<d:c>d;u=0<=d?++c:--c)[a,Ct]=print_tensor_inner(t,n+1,a),l+=Ct,u!==t.tensor.dim[n]-1&&(l+=print_str(","));else for(u=p=0,Q=t.tensor.dim[n];0<=Q?p<Q:p>Q;u=0<=Q?++p:--p)l+=print_expr(t.tensor.elem[a]),u!==t.tensor.dim[n]-1&&(l+=print_str(",")),a++;return l+=print_str("]"),[a,l]},print_tensor_latex=function(t){var n;return n="",t.tensor.ndim<=2&&(n+=print_tensor_inner_latex(!0,t,0,0)[1]),n},print_tensor_inner_latex=function(t,n,a,l){var u,c,p,d,Q,Ct,ar;if(u="",t&&(u+="\\begin{bmatrix} "),a<n.tensor.ndim-1)for(c=p=0,Q=n.tensor.dim[a];0<=Q?p<Q:p>Q;c=0<=Q?++p:--p)[l,ar]=print_tensor_inner_latex(0,n,a+1,l),u+=ar,c!==n.tensor.dim[a]-1&&(u+=print_str(" \\\\ "));else for(c=d=0,Ct=n.tensor.dim[a];0<=Ct?d<Ct:d>Ct;c=0<=Ct?++d:--d)u+=print_expr(n.tensor.elem[l]),c!==n.tensor.dim[a]-1&&(u+=print_str(" & ")),l++;return t&&(u+=" \\end{bmatrix}"),[l,u]},print_SUM_latex=function(t){var n;return n="\\sum_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_SUM_codegen=function(t){var n,a,l,u,c;return a=cadr(t),c=caddr(t),l=cadddr(t),u=caddddr(t),n="(function(){ var "+c+";  var holderSum = 0;  var lowerlimit = "+print_expr(l)+";  var upperlimit = "+print_expr(u)+";  for ("+c+" = lowerlimit; "+c+" < upperlimit; "+c+"++) {    holderSum += "+print_expr(a)+"; }  return holderSum;})()",n},print_TEST_latex=function(t){var n;for(n="\\left\\{ \\begin{array}{ll}",t=cdr(t);iscons(t);){if(cdr(t)===symbol(NIL)){n+="{",n+=print_expr(car(t)),n+="} & otherwise ",n+=" \\\\\\\\";break}n+="{",n+=print_expr(cadr(t)),n+="} & if & ",n+=print_expr(car(t)),n+=" \\\\\\\\",t=cddr(t)}return n=n.substring(0,n.length-4),n+="\\end{array} \\right."},print_TEST_codegen=function(t){var n,a;for(n="(function(){",t=cdr(t),a=0;iscons(t);){if(cdr(t)===symbol(NIL)){n+="else {",n+="return ("+print_expr(car(t))+");",n+="}";break}a&&(n+=" else "),n+="if ("+print_expr(car(t))+"){",n+="return ("+print_expr(cadr(t))+");",n+="}",a++,t=cddr(t)}return n+="})()",n},print_TESTLT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" < ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTLE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\leq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" > ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\geq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTEQ_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" = ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_FOR_codegen=function(t){var n,a,l,u,c;return a=cadr(t),c=caddr(t),l=cadddr(t),u=caddddr(t),n="(function(){ var "+c+";  var lowerlimit = "+print_expr(l)+";  var upperlimit = "+print_expr(u)+";  for ("+c+" = lowerlimit; "+c+" < upperlimit; "+c+"++) {    "+print_expr(a)+" } })()",n},print_DO_codegen=function(t){var n;for(n="",t=cdr(t);iscons(t);)n+=print_expr(car(t)),t=cdr(t);return n},print_SETQ_codegen=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=" = ",n+=print_expr(caddr(t)),n+="; ",n},print_PRODUCT_latex=function(t){var n;return n="\\prod_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_PRODUCT_codegen=function(t){var n,a,l,u,c;return a=cadr(t),c=caddr(t),l=cadddr(t),u=caddddr(t),n="(function(){ var "+c+";  var holderProduct = 1;  var lowerlimit = "+print_expr(l)+";  var upperlimit = "+print_expr(u)+";  for ("+c+" = lowerlimit; "+c+" < upperlimit; "+c+"++) {    holderProduct *= "+print_expr(a)+"; }  return holderProduct;})()",n},print_power=function(t,n){var a,l,u,c;if(a="",DEBUG&&console.log("power base: "+t+"  exponent: "+n),isoneovertwo(n))if(equaln(t,2)){if(codeGen)return a+=print_str("Math.SQRT2"),a}else{if(printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt{"),a+=print_expr(t),a+=print_str("}"),a;if(codeGen)return a+=print_str("Math.sqrt("),a+=print_expr(t),a+=print_str(")"),a}if(equaln(get_binding(symbol(PRINT_LEAVE_E_ALONE)),1)&&t===symbol(E))return codeGen?(a+=print_str("Math.exp("),a+=print_expo_of_denom(n),a+=print_str(")"),a):(printMode===PRINTMODE_LATEX?(a+=print_str("e^{"),a+=print_expr(n),a+=print_str("}")):(a+=print_str("exp("),a+=print_expr(n),a+=print_str(")")),a);if(codeGen)return a+=print_str("Math.pow("),a+=print_base_of_denom(t),a+=print_str(", "),a+=print_expo_of_denom(n),a+=print_str(")"),a;if(equaln(get_binding(symbol(PRINT_LEAVE_X_ALONE)),0)||t.printname!=="x"){if(t!==symbol(E)){if(isminusone(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):a+=print_expr(t),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a;if(isnegativeterm(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),push(n),push_integer(-1),multiply(),u=pop(),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_power(t,u),a+=print_str(")")):a+=print_power(t,u),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a}if(isfraction(n)&&printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt"),push(n),denominator(),l=pop(),isplustwo(l)||(a+=print_str("["),a+=print_expr(l),a+=print_str("]")),a+=print_str("{"),push(n),numerator(),c=pop(),n=c,a+=print_power(t,n),a+=print_str("}"),a}return printMode===PRINTMODE_LATEX&&isplusone(n)?a+=print_expr(t):(isadd(t)||isnegativenumber(t)?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(printMode!==PRINTMODE_LATEX&&(a+=print_str("(")),a+=print_factor(t,!0),printMode!==PRINTMODE_LATEX&&(a+=print_str(")"))):isNumericAtom(t)&&(lessp(t,zero)||isfraction(t))?(a+=print_str("("),a+=print_factor(t),a+=print_str(")")):a+=print_factor(t),printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str(power_str):a+=print_str("^"),printMode===PRINTMODE_LATEX?print_expr(n).length>1?(a+=print_str("{"),a+=print_expr(n),a+=print_str("}")):a+=print_expr(n):iscons(n)||isfraction(n)||isNumericAtom(n)&&lessp(n,zero)?(a+=print_str("("),a+=print_expr(n),a+=print_str(")")):a+=print_factor(n)),a},print_index_function=function(t){var n;if(n="",t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?n+=print_subexpr(car(t)):n+=print_expr(car(t)),n+=print_str("["),t=cdr(t),iscons(t))for(n+=print_expr(car(t)),t=cdr(t);iscons(t);)n+=print_str(","),n+=print_expr(car(t)),t=cdr(t);return n+=print_str("]"),n},print_factor=function(t,n,a){var l,u,c,p,d,Q;if(l="",isNumericAtom(t))return a&&lessp(t,zero)&&(l+="("),l+=print_number(t,a),a&&lessp(t,zero)&&(l+=")"),l;if(isstr(t))return l+=print_str('"'),l+=print_str(t.str),l+=print_str('"'),l;if(istensor(t))return printMode===PRINTMODE_LATEX?l+=print_tensor_latex(t):l+=print_tensor(t),l;if(car(t)===symbol(MULTIPLY))return n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?l+=print_str(" \\left ("):l+=print_str("(")),l+=print_expr(t),n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?l+=print_str(" \\right ) "):l+=print_str(")")),l;if(isadd(t))return n||(l+=print_str("(")),l+=print_expr(t),n||(l+=print_str(")")),l;if(car(t)===symbol(POWER))return u=cadr(t),c=caddr(t),l+=print_power(u,c),l;if(car(t)===symbol(FUNCTION))return p=cadr(t),codeGen||(d=caddr(t),l+=print_str("function "),DEBUG&&console.log("emittedString from print_factor "+stringsEmittedByUserPrintouts),Q=print_list(d),l+=Q,l+=print_str(" -> ")),l+=print_expr(p),l;if(car(t)===symbol(PATTERN))return l+=print_expr(caadr(t)),printMode===PRINTMODE_LATEX?l+=print_str(" \\rightarrow "):printMode===PRINTMODE_HUMAN&&!test_flag?l+=print_str(" -> "):l+=print_str("->"),l+=print_expr(car(cdr(cadr(t)))),l;if(car(t)===symbol(INDEX)&&issymbol(cadr(t)))return l+=print_index_function(t),l;if(car(t)===symbol(FACTORIAL))return l+=print_factorial_function(t),l;if(car(t)===symbol(ABS)&&printMode===PRINTMODE_LATEX)return l+=print_ABS_latex(t),l;if(car(t)===symbol(SQRT)&&printMode===PRINTMODE_LATEX)return l+=print_SQRT_latex(t),l;if(car(t)===symbol(TRANSPOSE)){if(printMode===PRINTMODE_LATEX)return l+=print_TRANSPOSE_latex(t),l;if(codeGen)return l+=print_TRANSPOSE_codegen(t),l}else if(car(t)===symbol(UNIT)){if(codeGen)return l+=print_UNIT_codegen(t),l}else if(car(t)===symbol(INV)){if(printMode===PRINTMODE_LATEX)return l+=print_INV_latex(t),l;if(codeGen)return l+=print_INV_codegen(t),l}else{if(car(t)===symbol(BINOMIAL)&&printMode===PRINTMODE_LATEX)return l+=print_BINOMIAL_latex(t),l;if(car(t)===symbol(DEFINT)&&printMode===PRINTMODE_LATEX)return l+=print_DEFINT_latex(t),l;if(isinnerordot(t)){if(printMode===PRINTMODE_LATEX)return l+=print_DOT_latex(t),l;if(codeGen)return l+=print_DOT_codegen(t),l}else if(car(t)===symbol(SIN)){if(codeGen)return l+=print_SIN_codegen(t),l}else if(car(t)===symbol(COS)){if(codeGen)return l+=print_COS_codegen(t),l}else if(car(t)===symbol(TAN)){if(codeGen)return l+=print_TAN_codegen(t),l}else if(car(t)===symbol(ARCSIN)){if(codeGen)return l+=print_ARCSIN_codegen(t),l}else if(car(t)===symbol(ARCCOS)){if(codeGen)return l+=print_ARCCOS_codegen(t),l}else if(car(t)===symbol(ARCTAN)){if(codeGen)return l+=print_ARCTAN_codegen(t),l}else if(car(t)===symbol(SUM)){if(printMode===PRINTMODE_LATEX)return l+=print_SUM_latex(t),l;if(codeGen)return l+=print_SUM_codegen(t),l}else if(car(t)===symbol(PRODUCT)){if(printMode===PRINTMODE_LATEX)return l+=print_PRODUCT_latex(t),l;if(codeGen)return l+=print_PRODUCT_codegen(t),l}else if(car(t)===symbol(FOR)){if(codeGen)return l+=print_FOR_codegen(t),l}else if(car(t)===symbol(DO)){if(codeGen)return l+=print_DO_codegen(t),l}else if(car(t)===symbol(TEST)){if(codeGen)return l+=print_TEST_codegen(t),l;if(printMode===PRINTMODE_LATEX)return l+=print_TEST_latex(t),l}else if(car(t)===symbol(TESTLT)){if(codeGen)return l+="(("+print_expr(cadr(t))+") < ("+print_expr(caddr(t))+"))",l;if(printMode===PRINTMODE_LATEX)return l+=print_TESTLT_latex(t),l}else if(car(t)===symbol(TESTLE)){if(codeGen)return l+="(("+print_expr(cadr(t))+") <= ("+print_expr(caddr(t))+"))",l;if(printMode===PRINTMODE_LATEX)return l+=print_TESTLE_latex(t),l}else if(car(t)===symbol(TESTGT)){if(codeGen)return l+="(("+print_expr(cadr(t))+") > ("+print_expr(caddr(t))+"))",l;if(printMode===PRINTMODE_LATEX)return l+=print_TESTGT_latex(t),l}else if(car(t)===symbol(TESTGE)){if(codeGen)return l+="(("+print_expr(cadr(t))+") >= ("+print_expr(caddr(t))+"))",l;if(printMode===PRINTMODE_LATEX)return l+=print_TESTGE_latex(t),l}else if(car(t)===symbol(TESTEQ)){if(codeGen)return l+="(("+print_expr(cadr(t))+") === ("+print_expr(caddr(t))+"))",l;if(printMode===PRINTMODE_LATEX)return l+=print_TESTEQ_latex(t),l}else if(car(t)===symbol(FLOOR)){if(codeGen)return l+="Math.floor("+print_expr(cadr(t))+")",l;if(printMode===PRINTMODE_LATEX)return l+=" \\lfloor {"+print_expr(cadr(t))+"} \\rfloor ",l}else if(car(t)===symbol(CEILING)){if(codeGen)return l+="Math.ceiling("+print_expr(cadr(t))+")",l;if(printMode===PRINTMODE_LATEX)return l+=" \\lceil {"+print_expr(cadr(t))+"} \\rceil ",l}else if(car(t)===symbol(ROUND)){if(codeGen)return l+="Math.round("+print_expr(cadr(t))+")",l}else if(car(t)===symbol(SETQ))return codeGen?(l+=print_SETQ_codegen(t),l):(l+=print_expr(cadr(t)),l+=print_str("="),l+=print_expr(caddr(t)),l)}if(iscons(t)){if(l+=print_factor(car(t)),t=cdr(t),n||(l+=print_str("(")),iscons(t))for(l+=print_expr(car(t)),t=cdr(t);iscons(t);)l+=print_str(","),l+=print_expr(car(t)),t=cdr(t);return n||(l+=print_str(")")),l}return t===symbol(DERIVATIVE)?l+=print_char("d"):t===symbol(E)?codeGen?l+=print_str("Math.E"):l+=print_str("e"):t===symbol(PI)?printMode===PRINTMODE_LATEX?l+=print_str("\\pi"):l+=print_str("pi"):l+=print_str(get_printname(t)),l},print_list=function(t){var n;switch(n="",t.k){case CONS:if(n+="(",n+=print_list(car(t)),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}for(t=cdr(t);iscons(t);)if(n+=" ",n+=print_list(car(t)),t=cdr(t),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}t!==symbol(NIL)&&(n+=" . ",n+=print_list(t)),n+=")";break;case STR:n+=t.str;break;case NUM:case DOUBLE:n+=print_number(t,!0);break;case SYM:n+=get_printname(t);break;default:n+="<tensor>"}return n},print_multiply_sign=function(){var t;if(t="",printMode===PRINTMODE_LATEX)if(printMode===PRINTMODE_HUMAN&&!test_flag)t+=print_str(" ");else return t;return printMode===PRINTMODE_HUMAN&&!test_flag&&!codeGen?t+=print_str(" "):t+=print_str("*"),t},is_denominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&isnegativeterm(caddr(t))?1:0},any_denominators=function(t){var n;for(t=cdr(t);iscons(t);){if(n=car(t),is_denominator(n))return 1;t=cdr(t)}return 0},YMAX=1e4,glyph=(function(){class t{}return t.prototype.c=0,t.prototype.x=0,t.prototype.y=0,t}).call(this),chartab=[],charTabIndex=i1=0,ref1=YMAX;0<=ref1?i1<ref1:i1>ref1;charTabIndex=0<=ref1?++i1:--i1)chartab[charTabIndex]=new glyph;for(yindex=0,level=0,emit_x=0,expr_level=0,printchar_nowrap=function(t){var n;return n="",n+=t,n},printchar=function(t){return printchar_nowrap(t)},print2dascii=function(t){var n,a,l,u;if(a=0,l=0,u=0,save(),yindex=0,level=0,emit_x=0,emit_top_expr(t),[a,l,u]=get_size(0,yindex),l>100){printline(t),restore();return}return n=print_glyphs(),restore(),n},emit_top_expr=function(t){if(car(t)===symbol(SETQ)){emit_expr(cadr(t)),__emit_str(" = "),emit_expr(caddr(t));return}return istensor(t)?emit_tensor(t):emit_expr(t)},will_be_displayed_as_fraction=function(t){if(level>0)return 0;if(isfraction(t))return 1;if(car(t)!==symbol(MULTIPLY))return 0;if(isfraction(cadr(t)))return 1;for(;iscons(t);){if(isdenominator(car(t)))return 1;t=cdr(t)}return 0},emit_expr=function(t){if(expr_level++,car(t)===symbol(ADD))for(t=cdr(t),__is_negative(car(t))&&(__emit_char("-"),will_be_displayed_as_fraction(car(t))&&__emit_char(" ")),emit_term(car(t)),t=cdr(t);iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),t=cdr(t);else __is_negative(t)&&(__emit_char("-"),will_be_displayed_as_fraction(t)&&__emit_char(" ")),emit_term(t);return expr_level--},emit_unsigned_expr=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),emit_term(car(t)),t=cdr(t),n=[];iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),n.push(t=cdr(t));return n}else return emit_term(t)},__is_negative=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},emit_term=function(t){var n;return car(t)===symbol(MULTIPLY)?(n=count_denominators(t),n&&level===0?emit_fraction(t,n):emit_multiply(t,n)):emit_factor(t)},isdenominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&__is_negative(caddr(t))?1:0},count_denominators=function(t){var n,a;for(n=0,t=cdr(t);iscons(t);)a=car(t),isdenominator(a)&&n++,t=cdr(t);return n},emit_multiply=function(t,n){var a;if(n===0){for(t=cdr(t),(isplusone(car(t))||isminusone(car(t)))&&(t=cdr(t)),emit_factor(car(t)),t=cdr(t),a=[];iscons(t);)__emit_char(" "),emit_factor(car(t)),a.push(t=cdr(t));return a}else return emit_numerators(t),__emit_char("/"),n>1||isfraction(cadr(t))?(__emit_char("("),emit_denominators(t),__emit_char(")")):emit_denominators(t)},emit_fraction=function(t,n){var a,l,u,c,p;for(a=0,l=0,u=0,c=0,p=0,save(),p3=one,p4=one,isrational(cadr(t))&&(push(cadr(t)),mp_numerator(),absval(),p3=pop(),push(cadr(t)),mp_denominator(),p4=pop()),isdouble(cadr(t))&&(push(cadr(t)),absval(),p3=pop()),isplusone(p3)?c=0:c=1,p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||c++,p1=cdr(p1);for(p=emit_x,l=yindex,a=0,isplusone(p3)||(emit_number(p3,0),a++),p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||(a>0&&__emit_char(" "),c===1?emit_expr(p2):emit_factor(p2),a++),p1=cdr(p1);for(a===0&&__emit_char("1"),u=yindex,a=0,isplusone(p4)||(emit_number(p4,0),a++,n++),p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)&&(a>0&&__emit_char(" "),emit_denominator(p2,n),a++),p1=cdr(p1);return fixup_fraction(p,l,u),restore()},emit_numerators=function(t){var n;for(save(),n=0,p1=one,t=cdr(t),isrational(car(t))?(push(car(t)),mp_numerator(),absval(),p1=pop(),t=cdr(t)):isdouble(car(t))&&(push(car(t)),absval(),p1=pop(),t=cdr(t)),n=0,isplusone(p1)||(emit_number(p1,0),n++);iscons(t);)isdenominator(car(t))||(n>0&&__emit_char(" "),emit_factor(car(t)),n++),t=cdr(t);return n===0&&__emit_char("1"),restore()},emit_denominators=function(t){var n;for(save(),n=0,t=cdr(t),isfraction(car(t))&&(push(car(t)),mp_denominator(),p1=pop(),emit_number(p1,0),n++,t=cdr(t));iscons(t);)isdenominator(car(t))&&(n>0&&__emit_char(" "),emit_denominator(car(t),0),n++),t=cdr(t);return restore()},emit_factor=function(t){if(istensor(t)){emit_flat_tensor(t);return}if(isdouble(t)){emit_number(t,0);return}if(car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)){emit_subexpr(t);return}if(car(t)===symbol(POWER)){emit_power(t);return}if(iscons(t)){emit_function(t);return}if(isNumericAtom(t)){level===0?emit_numerical_fraction(t):emit_number(t,0);return}if(issymbol(t)){emit_symbol(t);return}isstr(t)&&emit_string(t)},emit_numerical_fraction=function(t){var n,a,l;if(n=0,a=0,l=0,save(),push(t),mp_numerator(),absval(),p3=pop(),push(t),mp_denominator(),p4=pop(),isplusone(p4)){emit_number(p3,0),restore();return}return l=emit_x,n=yindex,emit_number(p3,0),a=yindex,emit_number(p4,0),fixup_fraction(l,n,a),restore()},isfactor=function(t){return iscons(t)&&car(t)!==symbol(ADD)&&car(t)!==symbol(MULTIPLY)&&car(t)!==symbol(POWER)||issymbol(t)?1:isfraction(t)||isnegativenumber(t)?0:isNumericAtom(t)?1:0},emit_power=function(t){var n,a,l;if(n=0,a=0,l=0,cadr(t)===symbol(E)){__emit_str("exp("),emit_expr(caddr(t)),__emit_char(")");return}if(level>0){isminusone(caddr(t))?(__emit_char("1"),__emit_char("/"),isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t))):(isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),__emit_char("^"),isfactor(caddr(t))?emit_factor(caddr(t)):emit_subexpr(caddr(t)));return}if(__is_negative(caddr(t))){l=emit_x,n=yindex,__emit_char("1"),a=yindex,emit_denominator(t,1),fixup_fraction(l,n,a);return}return n=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),a=yindex,level++,emit_expr(caddr(t)),level--,fixup_power(n,a)},emit_denominator=function(t,n){var a,l;if(a=0,l=0,isminusone(caddr(t))){n===1?emit_expr(cadr(t)):emit_factor(cadr(t));return}return a=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),l=yindex,level++,emit_unsigned_expr(caddr(t)),level--,fixup_power(a,l)},emit_function=function(t){if(car(t)===symbol(INDEX)&&issymbol(cadr(t))){emit_index_function(t);return}if(car(t)===symbol(FACTORIAL)){emit_factorial_function(t);return}if(car(t)===symbol(DERIVATIVE)?__emit_char("d"):emit_symbol(car(t)),__emit_char("("),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char(")")},emit_index_function=function(t){if(t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?emit_subexpr(car(t)):emit_expr(car(t)),__emit_char("["),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char("]")},emit_factorial_function=function(t){return t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?emit_subexpr(t):emit_expr(t),__emit_char("!")},emit_subexpr=function(t){return __emit_char("("),emit_expr(t),__emit_char(")")},emit_symbol=function(t){var n,a,l,u,c;if(n=0,t===symbol(E)){__emit_str("exp(1)");return}for(l=get_printname(t),c=[],n=a=0,u=l.length;0<=u?a<u:a>u;n=0<=u?++a:--a)c.push(__emit_char(l[n]));return c},emit_string=function(t){var n,a,l,u;for(n=0,l=t.str,__emit_char('"'),n=a=0,u=l.length;0<=u?a<u:a>u;n=0<=u?++a:--a)__emit_char(l[n]);return __emit_char('"')},fixup_fraction=function(t,n,a){var l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;for(l=0,u=0,ar=0,on=0,c=0,en=0,cn=0,p=0,tn=0,gn=0,[c,en,cn]=get_size(n,a),[p,tn,gn]=get_size(a,yindex),tn>en?l=(tn-en)/2:l=0,l++,on=cn+c-1,u=-on-1,move(n,a,l,u),tn>en?l=-en:l=-en+(en-tn)/2,l++,u=-gn+1,move(a,yindex,l,u),tn>en?ar=tn:ar=en,ar+=2,emit_x=t,Ct=[],d=0,Q=ar;0<=Q?d<Q:d>Q;0<=Q?++d:--d)Ct.push(__emit_char("-"));return Ct},fixup_power=function(t,n){var a,l,u,c,p,d,Q;return a=0,l=0,c=0,d=0,u=0,p=0,Q=0,[l,c,d]=get_size(t,n),[u,p,Q]=get_size(n,yindex),a=-Q-u+1,a+=d-1,move(n,yindex,0,a)},move=function(t,n,a,l){var u,c,p,d,Q;for(u=0,Q=[],u=c=p=t,d=n;p<=d?c<d:c>d;u=p<=d?++c:--c)chartab[u].x+=a,Q.push(chartab[u].y+=l);return Q},get_size=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en,tn;for(l=0,d=chartab[t].x,c=chartab[t].x,Q=chartab[t].y,p=chartab[t].y,l=u=Ct=t+1,ar=n;Ct<=ar?u<ar:u>ar;l=Ct<=ar?++u:--u)chartab[l].x<d&&(d=chartab[l].x),chartab[l].x>c&&(c=chartab[l].x),chartab[l].y<Q&&(Q=chartab[l].y),chartab[l].y>p&&(p=chartab[l].y);return a=p-Q+1,en=c-d+1,tn=Q,[a,en,tn]},__emit_char=function(t){if(yindex!==YMAX){if(chartab[yindex]==null)debugger;return chartab[yindex].c=t,chartab[yindex].x=emit_x,chartab[yindex].y=0,yindex++,emit_x++}},__emit_str=function(t){var n,a,l,u;for(n=0,u=[],n=a=0,l=t.length;0<=l?a<l:a>l;n=0<=l?++a:--a)u.push(__emit_char(t[n]));return u},emit_number=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en;switch(en="",a=0,t.k){case NUM:for(en=t.q.a.toString(),en[0]==="-"&&n===0&&(en=en.substring(1)),a=l=0,p=en.length;0<=p?l<p:l>p;a=0<=p?++l:--l)__emit_char(en[a]);if(en=t.q.b.toString(),en==="1")break;for(__emit_char("/"),Ct=[],a=u=0,d=en.length;0<=d?u<d:u>d;a=0<=d?++u:--u)Ct.push(__emit_char(en[a]));return Ct;case DOUBLE:for(en=doubleToReasonableString(t.d),en[0]==="-"&&n===0&&(en=en.substring(1)),ar=[],a=c=0,Q=en.length;0<=Q?c<Q:c>Q;a=0<=Q?++c:--c)ar.push(__emit_char(en[a]));return ar}},cmpGlyphs=function(t,n){return t.y<n.y?-1:t.y>n.y?1:t.x<n.x?-1:t.x>n.x?1:0},print_glyphs=function(){var t,n,a,l,u,c,p;for(n=0,t="",u=chartab.slice(0,yindex),u.sort(cmpGlyphs),chartab=[].concat(u).concat(chartab.slice(yindex)),c=0,p=chartab[0].y,n=a=0,l=yindex;0<=l?a<l:a>l;n=0<=l?++a:--a){for(;chartab[n].y>p;)t+=printchar(`
`),c=0,p++;for(;chartab[n].x>c;)t+=printchar_nowrap(" "),c++;t+=printchar_nowrap(chartab[n].c),c++}return t},N=100,oneElement=(function(){class t{}return t.prototype.x=0,t.prototype.y=0,t.prototype.h=0,t.prototype.w=0,t.prototype.index=0,t.prototype.count=0,t}).call(this),elem=[],elelmIndex=j1=0;j1<1e4;elelmIndex=++j1)elem[elelmIndex]=new oneElement;SPACE_BETWEEN_COLUMNS=3,SPACE_BETWEEN_ROWS=1,emit_tensor=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx;if(d=0,ar=0,on=0,tn=0,lx=0,cx=0,p=0,ox=0,a=0,l=0,u=0,c=0,ax=0,n=0,t.tensor.ndim>2){emit_flat_tensor(t);return}if(on=t.tensor.dim[0],t.tensor.ndim===2?tn=t.tensor.dim[1]:tn=1,ar=on*tn,ar>N){emit_flat_tensor(t);return}for(lx=emit_x,d=Q=0,gn=ar;0<=gn?Q<gn:Q>gn;d=0<=gn?++Q:--Q)elem[d].index=yindex,elem[d].x=emit_x,emit_expr(t.tensor.elem[d]),elem[d].count=yindex-elem[d].index,[elem[d].h,elem[d].w,elem[d].y]=get_size(elem[d].index,yindex);for(u=0,c=0,d=Ct=0,Cn=ar;0<=Cn?Ct<Cn:Ct>Cn;d=0<=Cn?++Ct:--Ct)elem[d].h>u&&(u=elem[d].h),elem[d].w>c&&(c=elem[d].w);for(p=on*u+(on-1)*SPACE_BETWEEN_ROWS,ox=tn*c+(tn-1)*SPACE_BETWEEN_COLUMNS,cx=-(p/2),ax=en=0,ex=on;0<=ex?en<ex:en>ex;ax=0<=ex?++en:--en)for(n=cn=0,ix=tn;0<=ix?cn<ix:cn>ix;n=0<=ix?++cn:--cn)d=ax*tn+n,a=lx-elem[d].x,l=cx-elem[d].y,move(elem[d].index,elem[d].index+elem[d].count,a,l),a=0,n>0&&(a=n*(c+SPACE_BETWEEN_COLUMNS)),l=0,ax>0&&(l=ax*(u+SPACE_BETWEEN_ROWS)),a+=(c-elem[d].w)/2,l+=(u-elem[d].h)/2,move(elem[d].index,elem[d].index+elem[d].count,a,l);return emit_x=lx+ox},emit_flat_tensor=function(t){return emit_tensor_inner(t,0,0)},emit_tensor_inner=function(t,n,a){var l,u,c;for(l=0,__emit_char("("),l=u=0,c=t.tensor.dim[n];0<=c?u<c:u>c;l=0<=c?++u:--u)n+1===t.tensor.ndim?(emit_expr(t.tensor.elem[a]),a=a+1):a=emit_tensor_inner(t,n+1,a),l+1<t.tensor.dim[n]&&__emit_char(",");return __emit_char(")"),a},Eval_product=function(){var t,n,a,l,u,c,p,d,Q;if(n=0,l=0,u=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}if(push(caddddr(p1)),Eval(),u=pop_integer(),isNaN(u)){push(p1);return}for(p=get_binding(a),push_integer(1),n=c=d=l,Q=u;d<=Q?c<=Q:c>=Q;n=d<=Q?++c:--c)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),DEBUG&&(console.log("product - factor 1: "+stack[tos-1].toString()),console.log("product - factor 2: "+stack[tos-2].toString())),multiply(),DEBUG&&console.log("product - result: "+stack[tos-1].toString());return set_binding(a,p)},qadd=function(){var t,n,a,l,u,c,p,d;if(c=pop(),u=pop(),n=mmul(u.q.a,c.q.b),a=mmul(u.q.b,c.q.a),p=madd(n,a),MZERO(p)){push(zero);return}return l=mmul(u.q.b,c.q.b),t=mgcd(p,l),t=makeSignSameAs(t,l),d=new U,d.k=NUM,d.q.a=mdiv(p,t),d.q.b=mdiv(l,t),push(d)},qdiv=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p2.q.a)&&stop("divide by zero"),MZERO(p1.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.b),n=mmul(p1.q.b,p2.q.a),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qmul=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p1.q.a)||MZERO(p2.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.a),n=mmul(p1.q.b,p2.q.b),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qpow=function(){return save(),qpowf(),restore()},qpowf=function(){var t,n,a,l,u,c;if(a=0,p2=pop(),p1=pop(),isplusone(p1)||isZeroAtomOrTensor(p2)){push_integer(1);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit);return}if(isZeroAtomOrTensor(p1)){isnegativenumber(p2)&&stop("divide by zero"),push(zero);return}if(isplusone(p2)){push(p1);return}if(isinteger(p2)){if(push(p2),a=pop_integer(),isNaN(a)){push_symbol(POWER),push(p1),push(p2),list(3);return}u=mpow(p1.q.a,Math.abs(a)),c=mpow(p1.q.b,Math.abs(a)),a<0&&(l=u,u=c,c=l,u=makeSignSameAs(u,c),c=makePositive(c)),p3=new U,p3.k=NUM,p3.q.a=u,p3.q.b=c,push(p3);return}if(isminusone(p1)){push(p2),normalize_angle();return}if(isnegativenumber(p1)){push(p1),negate(),push(p2),qpow(),push_integer(-1),push(p2),qpow(),multiply();return}if(!isinteger(p1)){push(p1),mp_numerator(),push(p2),qpow(),push(p1),mp_denominator(),push(p2),negate(),qpow(),multiply();return}if(is_small_integer(p1)){push(p1),push(p2),quickfactor();return}if(!isSmall(p2.q.a)||!isSmall(p2.q.b)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(t=p2.q.a,n=p2.q.b,u=mroot(p1.q.a,n),u===0){push_symbol(POWER),push(p1),push(p2),list(3);return}return c=mpow(u,t),p3=new U,p3.k=NUM,p2.q.a.isNegative()?(p3.q.a=bigInt(1),p3.q.b=c):(p3.q.a=c,p3.q.b=bigInt(1)),push(p3)},normalize_angle=function(){if(save(),p1=pop(),isinteger(p1)){p1.q.a.isOdd()?push_integer(-1):push_integer(1),restore();return}return push(p1),bignum_truncate(),p2=pop(),isnegativenumber(p1)&&(push(p2),push_integer(-1),add(),p2=pop()),push(p1),push(p2),subtract(),p3=pop(),push_symbol(POWER),push_integer(-1),push(p3),list(3),p2.q.a.isOdd()&&negate(),restore()},is_small_integer=function(t){return isSmall(t.q.a)},quickfactor=function(){var t,n,a,l,u,c;for(n=0,save(),p2=pop(),p1=pop(),t=tos,push(p1),factor_small_number(),l=tos-t,c=t,n=a=0,u=l;a<u;n=a+=2)push(stack[c+n]),push(stack[c+n+1]),push(p2),multiply(),quickpower();return multiply_all(tos-t-l),p1=pop(),moveTos(t),push(p1),restore()},quickpower=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),push(p2),bignum_truncate(),p3=pop(),push(p2),push(p3),subtract(),p4=pop(),isZeroAtomOrTensor(p4)||(push_symbol(POWER),push(p1),push(p4),list(3)),push(p3),t=pop_integer(),isNaN(t)){push_symbol(POWER),push(p1),push(p3),list(3),restore();return}if(t===0){restore();return}return push(p1),bignum_power_number(t),restore()},Eval_quotient=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)&&(p1=symbol(SYMBOL_X)),push(p1),divpoly()},divpoly=function(){var t,n,a,l,u,c,p,d,Q;for(a=0,l=0,c=0,p=0,Q=0,save(),p3=pop(),p2=pop(),p1=pop(),a=tos,t=tos,c=coeff(p3,p1)-1,n=tos,p=coeff(p3,p2)-1,Q=c-p,push_integer(0),p5=pop();Q>=0;){for(push(stack[t+c]),push(stack[n+p]),divide(),p4=pop(),l=u=0,d=p;0<=d?u<=d:u>=d;l=0<=d?++u:--u)push(stack[t+Q+l]),push(stack[n+l]),push(p4),multiply(),subtract(),stack[t+Q+l]=pop();push(p5),push(p4),push(p3),push_integer(Q),power(),multiply(),add(),p5=pop(),c--,Q--}return moveTos(a),push(p5),restore()},DEBUG_RATIONALIZE=!1,Eval_rationalize=function(){return push(cadr(p1)),Eval(),rationalize()},rationalize=function(){var t;return t=expanding,yyrationalize(),expanding=t},yyrationalize=function(){var t,n,a;if(a=pop(),istensor(a)){__rationalize_tensor(a);return}if(expanding=0,car(a)!==symbol(ADD)){push(a);return}for(DEBUG_RATIONALIZE&&console.log("rationalize: this is the input expr: "+a),push(one),multiply_denominators(a),t=pop(),DEBUG_RATIONALIZE&&console.log("rationalize: this is the new denominator: "+t),push(zero),n=cdr(a);iscons(n);)DEBUG_RATIONALIZE&&console.log("term: "+car(n)),push(t),push(car(n)),multiply(),add(),n=cdr(n);if(DEBUG_RATIONALIZE&&console.log("rationalize: original terms times new denominator: "+stack[tos-1]),Condense(),DEBUG_RATIONALIZE&&console.log("rationalize: after factoring: "+stack[tos-1]),push(t),divide(),DEBUG_RATIONALIZE)return console.log("rationalize: after dividing by new denom. (and we're done): "+stack[tos-1])},multiply_denominators=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_term(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_term(t)},multiply_denominators_term=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_factor(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_factor(t)},multiply_denominators_factor=function(t){if(car(t)===symbol(POWER)){if(push(t),t=caddr(t),isnegativenumber(t)){inverse(),__lcm();return}if(car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))){inverse(),__lcm();return}return pop()}},__rationalize_tensor=function(t){var n,a,l,u;if(n=0,push(t),Eval(),t=pop(),!istensor(t)){push(t);return}for(l=t.tensor.nelem,n=a=0,u=l;0<=u?a<u:a>u;n=0<=u?++a:--a)push(t.tensor.elem[n]),rationalize(),t.tensor.elem[n]=pop();return check_tensor_dimensions(t),push(t)},__lcm=function(){return save(),p1=pop(),p2=pop(),push(p1),push(p2),multiply(),push(p1),push(p2),gcd(),divide(),restore()},Eval_real=function(){return push(cadr(p1)),Eval(),real()},real=function(){return save(),rect(),p1=pop(),push(p1),push(p1),conjugate(),add(),push_integer(2),divide(),restore()},DEBUG_RECT=!1,Eval_rect=function(){return push(cadr(p1)),Eval(),rect()},rect=function(){var t;if(save(),p1=pop(),t=p1,DEBUG_RECT&&console.log("RECT of "+t),DEBUG_RECT&&console.log("any clock forms in : "+t+" ? "+findPossibleClockForm(t)),issymbol(p1))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(YYRECT),push(p1),list(2)):push(p1);else if(!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))&&!findPossibleExponentialForm(p1)&&!findPossibleClockForm(p1)&&!(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&Find(p1,imaginaryunit)))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),push(p1);else if(car(p1)===symbol(MULTIPLY)&&isimaginaryunit(cadr(p1))&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))push(p1);else if(car(p1)===symbol(ADD))for(DEBUG_RECT&&console.log(" rect - "+t+" is a sum "),push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),rect(),add(),p1=cdr(p1);else DEBUG_RECT&&console.log(" rect - "+t+" is NOT a sum "),push(p1),abs(),DEBUG_RECT&&console.log(" rect - "+t+" abs: "+stack[tos-1].toString()),push(p1),arg(),DEBUG_RECT&&console.log(" rect - "+t+" arg of "+p1+" : "+stack[tos-1].toString()),p1=pop(),push(p1),cosine(),DEBUG_RECT&&console.log(" rect - "+t+" cosine: "+stack[tos-1].toString()),push(imaginaryunit),push(p1),sine(),DEBUG_RECT&&console.log(" rect - "+t+" sine: "+stack[tos-1].toString()),multiply(),DEBUG_RECT&&console.log(" rect - "+t+" i * sine: "+stack[tos-1].toString()),add(),DEBUG_RECT&&console.log(" rect - "+t+" cos + i * sine: "+stack[tos-1].toString()),multiply();if(restore(),DEBUG_RECT)return console.log("rect of "+t+" : "+stack[tos-1])},Eval_roots=function(){return p2=cadr(p1),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):(push(p2),Eval(),p2=pop(),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):push(p2)),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("roots: 1st argument is not a polynomial in the variable "+p2),push(p1),push(p2),roots()},hasImaginaryCoeff=function(t){var n,a,l;for(a=!1,n=l=t;l>0;n=l+=-1)if(iscomplexnumber(stack[tos-n])){a=!0;break}return a},isSimpleRoot=function(t){var n,a,l;if(t>2){for(a=!0,isZeroAtomOrTensor(stack[tos-t])&&(a=!1),n=l=t-1;l>1;n=l+=-1)if(!isZeroAtomOrTensor(stack[tos-n])){a=!1;break}}else a=!1;return a},normalisedCoeff=function(t,n){var a,l,u,c,p,d,Q,Ct;for(u=coeff(t,n),a=stack[tos-1],d=[],l=c=1,Q=u;1<=Q?c<=Q:c>=Q;l=1<=Q?++c:--c)d.push(pop());for(l=p=Ct=u-1;Ct<=0?p<=0:p>=0;l=Ct<=0?++p:--p)push(d[l]),push(a),divide();return u},roots=function(){var t,n,a,l,u,c,p,d;if(t=0,n=0,p=0,DEBUG&&console.log("roots: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),recursionLevelNestedRadicalsRemoval>1){pop(),pop(),push(symbol(NIL)),restore();return}if(t=tos-2,DEBUG&&console.log("roots checking if "+stack[tos-1].toString()+" is a case of simple roots"),p2=pop(),p1=pop(),push(p1),push(p2),a=normalisedCoeff(p2,p1),isSimpleRoot(a)?(DEBUG&&console.log("yes, "+stack[tos-1].toString()+" is a case of simple roots"),u=stack[tos-a],c=stack[tos-1],moveTos(tos-a),pop(),pop(),getSimpleRoots(a,c,u)):(moveTos(tos-a),roots2()),p=tos-t,p===0&&stop("roots: the polynomial is not factorable, try nroots"),p===1){restore();return}for(sort_stack(p),p1=alloc_tensor(p),p1.tensor.ndim=1,p1.tensor.dim[0]=p,n=l=0,d=p;0<=d?l<d:l>d;n=0<=d?++l:--l)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore(),!1},getSimpleRoots=function(t,n,a){var l,u,c,p,d,Q,Ct;if(DEBUG&&console.log("getSimpleRoots"),save(),t=t-1,push(a),push_rational(1,t),power(),push(n),push_rational(1,t),power(),divide(),u=pop(),t%2===0)for(Ct=c=1,d=t;c<=d;Ct=c+=2)push(u),push_integer(-1),push_rational(Ct,t),power(),multiply(),l=pop(),push(l),push(l),negate();else for(Ct=p=1,Q=t;1<=Q?p<=Q:p>=Q;Ct=1<=Q?++p:--p)push(u),push_integer(-1),push_rational(Ct,t),power(),multiply(),Ct%2===0&&negate();return restore()},roots2=function(){var t;if(save(),DEBUG&&console.log("roots2: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),p2=pop(),p1=pop(),push(p1),push(p2),t=normalisedCoeff(p2,p1),hasImaginaryCoeff(t)?(moveTos(tos-t),pop(),pop()):(moveTos(tos-t),factorpoly(),p1=pop()),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),roots3(),p1=cdr(p1);else push(p1),push(p2),roots3();return restore()},roots3=function(){var t;return save(),p2=pop(),p1=pop(),car(p1)===symbol(POWER)&&ispolyexpandedform(cadr(p1),p2)&&isposint(caddr(p1))?(t=normalisedCoeff(p2,cadr(p1)),mini_solve(t)):ispolyexpandedform(p1,p2)&&(t=normalisedCoeff(p2,p1),mini_solve(t)),restore()},mini_solve=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux,gx,yx,_x,vx,bx,xx,Sx,Ax,Cx,Tx,Px,Fx,Mx,Dx,Ox,Lx,Nx,Gx,Ux,Hx,Vx,zx,rE,Zx,eE,oE,iE,Wx,AE,ME,EE,bE,kE,TE,jE,Ix,Bx,Yx,Qx,nE,Kx;if(save(),t===2){p3=pop(),p4=pop(),push(p4),push(p3),divide(),negate(),restore();return}if(t===3){p3=pop(),p4=pop(),p5=pop(),push(p4),push_integer(2),power(),push_integer(4),push(p3),multiply(),push(p5),multiply(),subtract(),push_rational(1,2),power(),p6=pop(),push(p6),push(p4),subtract(),push(p3),push_integer(2),multiply(),divide(),push(p6),push(p4),add(),negate(),push(p3),divide(),push_rational(1,2),multiply(),restore();return}if(t===4||t===5){if(p3=pop(),p4=pop(),p5=pop(),p6=pop(),push(p5),push(p5),multiply(),yx=pop(),push(yx),push(p5),multiply(),_x=pop(),push(p4),push(p4),multiply(),hx=pop(),push(hx),push(p4),multiply(),ux=pop(),push(ux),push(p6),multiply(),gx=pop(),push(gx),push_integer(-4),multiply(),Px=pop(),push(ux),push_integer(2),multiply(),u=pop(),push(p3),push(p3),multiply(),ex=pop(),push(ex),push(p3),multiply(),ox=pop(),push_integer(3),push(p3),multiply(),c=pop(),push(ex),push(p6),multiply(),ix=pop(),push(ix),push(p6),multiply(),ax=pop(),push(ix),push_integer(27),multiply(),l=pop(),push(ax),push_integer(-27),multiply(),Cx=pop(),push(c),push_integer(2),multiply(),pop(),push(p3),push(p5),multiply(),dx=pop(),push(dx),push(p4),multiply(),lx=pop(),push(lx),push(p6),multiply(),cx=pop(),push(dx),push_integer(3),multiply(),d=pop(),push_integer(-4),push(p3),push(_x),multiply(),multiply(),Tx=pop(),push(lx),push_integer(9),multiply(),negate(),Fx=pop(),push(cx),push_integer(18),multiply(),a=pop(),push(hx),push(d),subtract(),on=pop(),push(hx),push(yx),multiply(),fx=pop(),push(p4),negate(),push(c),divide(),Mx=pop(),t===4){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),DEBUG&&console.log("cubic: D0: "+on.toString()),push(on),push_integer(3),power(),push_integer(4),multiply(),Q=pop(),push(on),simplify(),absValFloat(),cn=pop(),DEBUG&&console.log("cubic: D0 as float: "+cn.toString()),push(a),push(Px),push(fx),push(Tx),push(Cx),add(),add(),add(),add(),simplify(),absValFloat(),bx=pop(),DEBUG&&console.log("cubic: DETERMINANT: "+bx.toString()),push(u),push(Fx),push(l),add(),add(),gn=pop(),DEBUG&&console.log("cubic: D1: "+gn.toString()),push(gn),push_integer(2),power(),push(Q),subtract(),push_rational(1,2),power(),simplify(),Cn=pop(),isZeroAtomOrTensor(bx))if(isZeroAtomOrTensor(cn)){DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is zero"),push(Mx),restore();return}else{DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is not zero"),push(p3),push(p6),push_integer(9),multiply(),multiply(),push(p4),push(p5),multiply(),subtract(),push(on),push_integer(2),multiply(),divide(),Qx=pop(),push(Qx),push(Qx),push(lx),push_integer(4),multiply(),push(p3),push(p3),push(p6),push_integer(9),multiply(),multiply(),multiply(),negate(),push(ux),negate(),add(),add(),push(p3),push(on),multiply(),divide(),restore();return}for(n=!1,eE=!1;!n;)push(Cn),eE&&negate(),push(gn),add(),push_rational(1,2),multiply(),push_rational(1,3),power(),simplify(),ar=pop(),DEBUG&&console.log("cubic: C: "+ar.toString()),push(ar),simplify(),absValFloat(),tn=pop(),DEBUG&&console.log("cubic: C as absval and float: "+tn.toString()),isZeroAtomOrTensor(tn)?(DEBUG&&console.log(" cubic: C IS ZERO flipping the sign"),eE=!0):n=!0;push(ar),push(c),multiply(),p=pop(),push(p),push_integer(2),multiply(),Ct=pop(),push(imaginaryunit),push_integer(3),push_rational(1,2),power(),multiply(),oE=pop(),push_integer(1),push(oE),add(),TE=pop(),push_integer(1),push(oE),subtract(),kE=pop(),push(ar),push(c),divide(),en=pop(),push(Mx),push(en),negate(),push(on),push(p),divide(),negate(),add(),add(),simplify(),push(Mx),push(en),push(TE),multiply(),push_integer(2),divide(),push(kE),push(on),multiply(),push(Ct),divide(),add(),add(),simplify(),push(Mx),push(en),push(kE),multiply(),push_integer(2),divide(),push(TE),push(on),multiply(),push(Ct),divide(),add(),add(),simplify(),restore();return}if(t===5){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),p7=pop(),isZeroAtomOrTensor(p4)&&isZeroAtomOrTensor(p6)&&!isZeroAtomOrTensor(p5)&&!isZeroAtomOrTensor(p7)){for(DEBUG&&console.log("biquadratic case"),push(p3),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(p5),push(symbol(SECRETX)),multiply(),push(p7),add(),add(),push(symbol(SECRETX)),roots(),Ux=pop(),jE=Ux.tensor.elem,iE=0,Wx=jE.length;iE<Wx;iE++)Zx=jE[iE],push(Zx),push_rational(1,2),power(),simplify(),push(Zx),push_rational(1,2),power(),negate(),simplify();restore();return}if(push(p6),push(p6),multiply(),vx=pop(),push(p7),push(p7),multiply(),xx=pop(),push(xx),push(p7),multiply(),Sx=pop(),push_integer(256),push(ox),push(Sx),multiply(),multiply(),push_integer(-192),push(ix),push(xx),push(p4),multiply(),multiply(),multiply(),push_integer(-128),push(ex),push(yx),push(xx),multiply(),multiply(),multiply(),push_integer(144),push(ax),push(p5),push(p7),multiply(),multiply(),multiply(),push(Cx),push(vx),multiply(),push_integer(144),push(lx),push(p4),push(xx),multiply(),multiply(),multiply(),push_integer(-6),push(p3),push(hx),push(vx),push(p7),multiply(),multiply(),multiply(),multiply(),push_integer(-80),push(cx),push(p5),push(p7),multiply(),multiply(),multiply(),push_integer(18),push(cx),push(vx),multiply(),multiply(),push_integer(16),push(dx),push(_x),push(p7),multiply(),multiply(),multiply(),push_integer(-4),push(dx),push(yx),push(vx),multiply(),multiply(),multiply(),push_integer(-27),push(ux),push(p4),push(xx),multiply(),multiply(),multiply(),push_integer(18),push(gx),push(p5),push(p7),multiply(),multiply(),multiply(),push(Px),push(vx),multiply(),push_integer(-4),push(fx),push(p5),push(p7),multiply(),multiply(),multiply(),push(fx),push(vx),multiply(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),bx=pop(),DEBUG&&console.log("R_determinant: "+bx.toString()),push(yx),push_integer(-3),push(p4),push(p6),multiply(),multiply(),push_integer(12),push(p3),push(p7),multiply(),multiply(),add(),add(),on=pop(),DEBUG&&console.log("R_DELTA0: "+on.toString()),push_integer(2),push(_x),multiply(),push_integer(-9),push(p4),push(p5),push(p6),multiply(),multiply(),multiply(),push_integer(27),push(hx),push(p7),multiply(),multiply(),push_integer(27),push(p3),push(vx),multiply(),multiply(),push_integer(-72),push(dx),push(p7),multiply(),multiply(),add(),add(),add(),add(),gn=pop(),DEBUG&&console.log("R_DELTA1: "+gn.toString()),push_integer(8),push(dx),multiply(),push_integer(-3),push(hx),multiply(),add(),push_integer(8),push(ex),multiply(),divide(),Dx=pop(),DEBUG&&console.log("p: "+Dx.toString()),push(ux),push_integer(-4),push(lx),multiply(),push_integer(8),push(ix),multiply(),add(),add(),push_integer(8),push(ox),multiply(),divide(),Ox=pop(),DEBUG&&console.log("q: "+Ox.toString()),DEBUG&&console.log("tos 1 "+tos),isZeroAtomOrTensor(p4)){for(Dx=p5,Ox=p6,Lx=p7,push_rational(5,2),push(Dx),multiply(),Hx=pop(),push_integer(2),push(Dx),push_integer(2),power(),multiply(),push(Lx),subtract(),Vx=pop(),push(Dx),push_integer(3),power(),push_integer(2),divide(),push_rational(-1,2),push(Dx),push(Lx),multiply(),multiply(),push_rational(-1,8),push(Ox),push_integer(2),power(),multiply(),add(),add(),zx=pop(),push(symbol(SECRETX)),push_integer(3),power(),push(Hx),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(Vx),push(symbol(SECRETX)),multiply(),push(zx),add(),add(),add(),DEBUG&&console.log("resolventCubic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),Yx=pop(),DEBUG&&console.log("resolventCubicSolutions: "+Yx),Ax=null,Bx=Yx.tensor.elem,bE=0,ME=Bx.length;bE<ME;bE++)if(Zx=Bx[bE],DEBUG&&console.log("examining solution: "+Zx),push(Zx),push_integer(2),multiply(),push(Dx),add(),absValFloat(),Kx=pop(),DEBUG&&console.log("abs value is: "+Zx),!isZeroAtomOrTensor(Kx)){Ax=Zx;break}DEBUG&&console.log("chosen solution: "+Ax),push(Ax),push_integer(2),multiply(),push(Dx),add(),push_rational(1,2),power(),simplify(),nE=pop(),push(Ox),push_integer(2),multiply(),push(nE),divide(),simplify(),Gx=pop(),push(Dx),push_integer(3),multiply(),push(Ax),push_integer(2),multiply(),add(),Nx=pop(),push(nE),push(Nx),push(Gx),add(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(nE),push(Nx),push(Gx),add(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),push(nE),negate(),push(Nx),push(Gx),subtract(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(nE),negate(),push(Nx),push(Gx),subtract(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),restore();return}else{for(DEBUG&&console.log("tos 2 "+tos),push_integer(8),push(p5),push(p3),multiply(),multiply(),push_integer(-3),push(p4),push_integer(2),power(),multiply(),add(),push_integer(8),push(p3),push_integer(2),power(),multiply(),divide(),Dx=pop(),DEBUG&&console.log("p for depressed quartic: "+Dx.toString()),push(p4),push_integer(3),power(),push_integer(-4),push(p3),push(p4),push(p5),multiply(),multiply(),multiply(),push_integer(8),push(p6),push(p3),push_integer(2),power(),multiply(),multiply(),add(),add(),push_integer(8),push(p3),push_integer(3),power(),multiply(),divide(),Ox=pop(),DEBUG&&console.log("q for depressed quartic: "+Ox.toString()),push(p4),push_integer(4),power(),push_integer(-3),multiply(),push_integer(256),push(ox),push(p7),multiply(),multiply(),push_integer(-64),push(ix),push(p4),multiply(),multiply(),push_integer(16),push(hx),push(p3),push(p5),multiply(),multiply(),multiply(),add(),add(),add(),push_integer(256),push(p3),push_integer(4),power(),multiply(),divide(),Lx=pop(),DEBUG&&console.log("r for depressed quartic: "+Lx.toString()),DEBUG&&console.log("tos 4 "+tos),push(symbol(SECRETX)),push_integer(4),power(),DEBUG&&console.log("4 * x^4: "+stack[tos-1].toString()),push(Dx),push(symbol(SECRETX)),push_integer(2),power(),multiply(),DEBUG&&console.log("R_p * x^2: "+stack[tos-1].toString()),push(Ox),push(symbol(SECRETX)),multiply(),DEBUG&&console.log("R_q * x: "+stack[tos-1].toString()),push(Lx),DEBUG&&console.log("R_r: "+stack[tos-1].toString()),add(),add(),add(),simplify(),DEBUG&&console.log("solving depressed quartic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),rE=pop(),DEBUG&&console.log("depressedSolutions: "+rE),Ix=rE.tensor.elem,EE=0,AE=Ix.length;EE<AE;EE++)Zx=Ix[EE],push(Zx),push(p4),push_integer(4),push(p3),multiply(),divide(),subtract(),simplify(),DEBUG&&console.log("solution from depressed: "+stack[tos-1].toString());restore();return}}}return moveTos(tos-t),restore()},Eval_round=function(){return push(cadr(p1)),Eval(),yround()},yround=function(){return save(),yyround(),restore()},yyround=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(ROUND),push(p1),list(2);return}if(isdouble(p1)){t=Math.round(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return push(p1),yyfloat(),p1=pop(),push_integer(Math.round(p1.d))},T_INTEGER=1001,T_DOUBLE=1002,T_SYMBOL=1003,T_FUNCTION=1004,T_NEWLINE=1006,T_STRING=1007,T_GTEQ=1008,T_LTEQ=1009,T_EQ=1010,T_NEQ=1011,T_QUOTASSIGN=1012,token="",newline_flag=0,meta_mode=0,input_str=0,scan_str=0,token_str=0,token_buf=0,lastFoundSymbol=null,symbolsRightOfAssignment=null,symbolsLeftOfAssignment=null,isSymbolLeftOfAssignment=null,scanningParameters=null,functionInvokationsScanningStack=null,skipRootVariableToBeSolved=!1,assignmentFound=null,scanned="",scan=function(t){return DEBUG&&console.log("#### scanning "+t),lastFoundSymbol=null,symbolsRightOfAssignment=[],symbolsLeftOfAssignment=[],isSymbolLeftOfAssignment=!0,scanningParameters=[],functionInvokationsScanningStack=[""],assignmentFound=!1,scanned=t,meta_mode=0,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,assignmentFound||(symbolsInExpressionsWithoutAssignments=symbolsInExpressionsWithoutAssignments.concat(symbolsLeftOfAssignment)),token_str-input_str)},scan_meta=function(t){return scanned=t,meta_mode=1,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,token_str-input_str)},scan_stmt=function(){var t,n,a,l,u,c,p,d,Q;if(scan_relation(),t=!1,token===T_QUOTASSIGN&&(t=!0),(token===T_QUOTASSIGN||token==="=")&&(Q=lastFoundSymbol,DEBUG&&console.log("assignment!"),assignmentFound=!0,isSymbolLeftOfAssignment=!1,get_next_token(),push_symbol(SETQ),swap(),t&&push_symbol(QUOTE),scan_relation(),t&&list(2),list(3),isSymbolLeftOfAssignment=!0,codeGen)){if(l=symbolsRightOfAssignment.indexOf(Q),l!==-1&&(symbolsRightOfAssignment.splice(l,1),symbolsHavingReassignments.push(Q)),DEBUG)for(console.log("locally, "+Q+" depends on: "),u=0,c=symbolsRightOfAssignment.length;u<c;u++)a=symbolsRightOfAssignment[u],console.log("  "+a);for(symbolsDependencies[Q]==null&&(symbolsDependencies[Q]=[]),n=symbolsDependencies[Q],d=0,p=symbolsRightOfAssignment.length;d<p;d++)a=symbolsRightOfAssignment[d],n.indexOf(a)===-1&&n.push(a);return symbolsRightOfAssignment=[]}},scan_relation=function(){switch(scan_expression(),token){case T_EQ:return push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3);case T_NEQ:return push_symbol(NOT),swap(),push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3),list(2);case T_LTEQ:return push_symbol(TESTLE),swap(),get_next_token(),scan_expression(),list(3);case T_GTEQ:return push_symbol(TESTGE),swap(),get_next_token(),scan_expression(),list(3);case"<":return push_symbol(TESTLT),swap(),get_next_token(),scan_expression(),list(3);case">":return push_symbol(TESTGT),swap(),get_next_token(),scan_expression(),list(3)}},scan_expression=function(){var t;switch(t=tos,token){case"+":get_next_token(),scan_term();break;case"-":get_next_token(),scan_term(),negate();break;default:scan_term()}for(;newline_flag===0&&(token==="+"||token==="-");)token==="+"?(get_next_token(),scan_term()):(get_next_token(),scan_term(),negate());if(tos-t>1)return list(tos-t),push_symbol(ADD),swap(),cons()},is_factor=function(){if((typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode)return 1;switch(token){case"*":case"/":return 1;case"(":case T_SYMBOL:case T_FUNCTION:case T_INTEGER:case T_DOUBLE:case T_STRING:return newline_flag?(scan_str=token_str,0):1}return 0},simplify_1_in_products=function(t,n){if(t>n&&isrational(stack[t-1])&&equaln(stack[t-1],1))return pop()},multiply_consecutive_constants=function(t,n){if(t>n+1&&isNumericAtom(stack[t-2])&&isNumericAtom(stack[t-1]))return multiply()},scan_term=function(){var t;for(t=tos,scan_factor(),parse_time_simplifications&&simplify_1_in_products(tos,t);is_factor();)token==="*"?(get_next_token(),scan_factor()):token==="/"?(simplify_1_in_products(tos,t),get_next_token(),scan_factor(),inverse()):(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode?(get_next_token(),push_symbol(INNER),swap(),scan_factor(),list(3)):scan_factor(),parse_time_simplifications&&(multiply_consecutive_constants(tos,t),simplify_1_in_products(tos,t));if(t===tos)return push_integer(1);if(tos-t>1)return list(tos-t),push_symbol(MULTIPLY),swap(),cons()},scan_power=function(){if(token==="^")return get_next_token(),push_symbol(POWER),swap(),scan_factor(),list(3)},scan_index=function(t){for(get_next_token(),push_symbol(INDEX),swap(),scan_expression();token===",";)get_next_token(),scan_expression();return token!=="]"&&scan_error("] expected"),get_next_token(),list(tos-t)},scan_factor=function(){var t,n;for(n=tos,t=!1,token==="("?scan_subexpr():token===T_SYMBOL?scan_symbol():token===T_FUNCTION?scan_function_call_with_function_name():token==="["?scan_tensor():token===T_INTEGER?(t=!0,bignum_scan_integer(token_buf),get_next_token()):token===T_DOUBLE?(t=!0,bignum_scan_float(token_buf),get_next_token()):token===T_STRING?scan_string():scan_error("syntax error");token==="["||token==="("&&newline_flag===0&&!t;)token==="["?scan_index(n):token==="("&&scan_function_call_without_function_name();for(;token==="!";)get_next_token(),push_symbol(FACTORIAL),swap(),list(2);for(;(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===transpose_unicode;)get_next_token(),push_symbol(TRANSPOSE),swap(),list(2);return scan_power()},addSymbolRightOfAssignment=function(t){var n,a,l,u;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols right of assignment"),l="",n=a=1,u=functionInvokationsScanningStack.length;1<=u?a<u:a>u;n=1<=u?++a:--a)functionInvokationsScanningStack[n]!==""&&(l+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=l+t,symbolsRightOfAssignment.push(t)}},addSymbolLeftOfAssignment=function(t){var n,a,l,u;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols left of assignment"),l="",n=a=1,u=functionInvokationsScanningStack.length;1<=u?a<u:a>u;n=1<=u?++a:--a)functionInvokationsScanningStack[n]!==""&&(l+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=l+t,symbolsLeftOfAssignment.push(t)}},scan_symbol=function(){if(token!==T_SYMBOL&&scan_error("symbol expected"),meta_mode&&token_buf.length===1)switch(token_buf[0]){case"a":push(symbol(METAA));break;case"b":push(symbol(METAB));break;case"x":push(symbol(METAX));break;default:push(usr_symbol(token_buf))}else push(usr_symbol(token_buf));return scanningParameters.length===0?(DEBUG&&console.log("out of scanning parameters, processing "+token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment&&addSymbolLeftOfAssignment(token_buf)):(DEBUG&&console.log("still scanning parameters, skipping "+token_buf),isSymbolLeftOfAssignment&&addSymbolRightOfAssignment("'"+token_buf)),DEBUG&&console.log("found symbol: "+token_buf+" left of assignment: "+isSymbolLeftOfAssignment),isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token()},scan_string=function(){return push(new_string(token_buf)),get_next_token()},scan_function_call_with_function_name=function(){var t,n,a,l,u,c;if(DEBUG&&console.log("-- scan_function_call_with_function_name start"),l=1,u=new U,u=usr_symbol(token_buf),push(u),t=token_buf,(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.push(token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token(),get_next_token(),scanningParameters.push(!0),token!==")"){for(scan_stmt(),l++;token===",";)get_next_token(),l===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(p){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(p)}),skipRootVariableToBeSolved=!0),l===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("sum")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(p){return!new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(p)}),skipRootVariableToBeSolved=!0),l===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("product")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(p){return!new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(p)}),skipRootVariableToBeSolved=!0),l===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("for")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(p){return!new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(p)}),skipRootVariableToBeSolved=!0),functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("defint")!==-1&&(l===2||l>2&&(l-2)%3===0)&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(p){return!new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(p)}),skipRootVariableToBeSolved=!0),scan_stmt(),skipRootVariableToBeSolved=!1,l++;l===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(p){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_x").test(p)}))}for(scanningParameters.pop(),n=a=0,c=symbolsRightOfAssignment.length;0<=c?a<=c:a>=c;n=0<=c?++a:--a)symbolsRightOfAssignment[n]!=null&&(t==="roots"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="defint"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="sum"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="product"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="for"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"),"")));if(token!==")"&&scan_error(") expected"),get_next_token(),list(l),(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.pop(),t===symbol(PATTERN).printname&&(patternHasBeenFound=!0),DEBUG)return console.log("-- scan_function_call_with_function_name end")},scan_function_call_without_function_name=function(){var t;if(DEBUG&&console.log("-- scan_function_call_without_function_name start"),push_symbol(EVAL),swap(),list(2),t=1,get_next_token(),scanningParameters.push(!0),token!==")")for(scan_stmt(),t++;token===",";)get_next_token(),scan_stmt(),t++;if(scanningParameters.pop(),token!==")"&&scan_error(") expected"),get_next_token(),list(t),DEBUG)return console.log("-- scan_function_call_without_function_name end: "+stack[tos-1])},scan_subexpr=function(){return token!=="("&&scan_error("( expected"),get_next_token(),scan_stmt(),token!==")"&&scan_error(") expected"),get_next_token()},scan_tensor=function(){var t;for(t=0,token!=="["&&scan_error("[ expected"),get_next_token(),scan_stmt(),t=1;token===",";)get_next_token(),scan_stmt(),t++;return build_tensor(t),token!=="]"&&scan_error("] expected"),get_next_token()},scan_error=function(t){for(errorMessage="";input_str!==scan_str&&!((scanned[input_str]===`
`||scanned[input_str]==="\r")&&input_str+1===scan_str);)errorMessage+=scanned[input_str++];for(errorMessage+=" ? ";scanned[input_str]&&scanned[input_str]!==`
`&&scanned[input_str]!=="\r";)errorMessage+=scanned[input_str++];return errorMessage+=`
`,stop(t)},build_tensor=function(t){var n,a,l;for(n=0,save(),p2=alloc_tensor(t),p2.tensor.ndim=1,p2.tensor.dim[0]=t,n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)p2.tensor.elem[n]=stack[tos-t+n];return check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},get_next_token=function(){for(newline_flag=0;get_token(),token===T_NEWLINE;)newline_flag=1;if(DEBUG)return console.log("get_next_token token: "+token)},get_token=function(){for(;isspace(scanned[scan_str]);){if(scanned[scan_str]===`
`||scanned[scan_str]==="\r"){token=T_NEWLINE,scan_str++;return}scan_str++}if(token_str=scan_str,scan_str===scanned.length){token="";return}if(isdigit(scanned[scan_str])||scanned[scan_str]==="."){for(;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="."){for(scan_str++;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="e"&&(scanned[scan_str+1]==="+"||scanned[scan_str+1]==="-"||isdigit(scanned[scan_str+1])))for(scan_str+=2;isdigit(scanned[scan_str]);)scan_str++;token=T_DOUBLE}else token=T_INTEGER;update_token_buf(token_str,scan_str);return}if(isalpha(scanned[scan_str])){for(;isalnumorunderscore(scanned[scan_str]);)scan_str++;scanned[scan_str]==="("?token=T_FUNCTION:token=T_SYMBOL,update_token_buf(token_str,scan_str);return}if(scanned[scan_str]==='"'){for(scan_str++;scanned[scan_str]!=='"';)scan_str===scanned.length-1&&(scan_str++,scan_error("runaway string"),scan_str--),scan_str++;scan_str++,token=T_STRING,update_token_buf(token_str+1,scan_str-1);return}if(scanned[scan_str]==="#"||scanned[scan_str]==="-"&&scanned[scan_str+1]==="-"){for(;scanned[scan_str]&&scanned[scan_str]!==`
`&&scanned[scan_str]!=="\r";)scan_str++;scanned[scan_str]&&scan_str++,token=T_NEWLINE;return}if(scanned[scan_str]===":"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_QUOTASSIGN;return}if(scanned[scan_str]==="="&&scanned[scan_str+1]==="="){scan_str+=2,token=T_EQ;return}if(scanned[scan_str]==="!"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_NEQ;return}if(scanned[scan_str]==="<"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_LTEQ;return}if(scanned[scan_str]===">"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_GTEQ;return}return token=scanned[scan_str++]},update_token_buf=function(t,n){return token_buf=scanned.substring(t,n)},$.scan=scan,Eval_sgn=function(){return push(cadr(p1)),Eval(),sgn()},sgn=function(){return save(),yysgn(),restore()},yysgn=function(){if(p1=pop(),isdouble(p1))if(p1.d>0){push_integer(1);return}else if(p1.d===0){push_integer(1);return}else{push_integer(-1);return}if(isrational(p1))if(MSIGN(mmul(p1.q.a,p1.q.b))===-1){push_integer(-1);return}else if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(0);return}else{push_integer(1);return}if(iscomplexnumber(p1)){push_integer(-1),push(p1),absval(),power(),push(p1),multiply();return}if(isnegativeterm(p1)){push_symbol(SGN),push(p1),negate(),list(2),push_integer(-1),multiply();return}return push_symbol(SGN),push(p1),list(2)},Eval_shape=function(){return push(cadr(p1)),Eval(),shape()},shape=function(){var t,n,a,l,u,c,p,d;for(a=0,c=0,t=[],n=[],a=l=0,p=MAXDIM;0<=p?l<p:l>p;a=0<=p?++l:--l)t[a]=0,n[a]=0;if(save(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("transpose: tensor expected, 1st arg is not a tensor"),push(zero),restore();return}for(c=p1.tensor.ndim,p2=alloc_tensor(c),p2.tensor.ndim=1,p2.tensor.dim[0]=c,a=u=0,d=c;0<=d?u<d:u>d;a=0<=d?++u:--u)push_integer(p1.tensor.dim[a]),p2.tensor.elem[a]=pop();return push(p2),restore()},simfac=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(ADD)){for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),simfac_term(),p1=cdr(p1);add_all(tos-t)}else push(p1),simfac_term();return restore()},simfac_term=function(){var t;if(t=0,save(),p1=pop(),car(p1)!==symbol(MULTIPLY)){push(p1),restore();return}for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),p1=cdr(p1);for(;yysimfac(t););return multiply_all_noexpand(tos-t),restore()},yysimfac=function(t){var n,a,l,u,c,p,d,Q;for(n=0,a=0,n=l=c=t,p=tos;c<=p?l<p:l>p;n=c<=p?++l:--l)for(p1=stack[n],a=u=d=t,Q=tos;d<=Q?u<Q:u>Q;a=d<=Q?++u:--u)if(n!==a){if(p2=stack[a],car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&equal(cadr(p1),cadr(p2)))return push(cadr(p1)),push(one),subtract(),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&equal(p1,cadadr(p2)))return push(p1),push_integer(-1),add(),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(FACTORIAL)&&(push(p1),push(cadr(p2)),subtract(),p3=pop(),isplusone(p3)))return push(p1),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(POWER)&&isminusone(caddr(p1))&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3)))return push(cadr(p1)),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)){if(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3))return stack[n]=cadr(p1),stack[a]=one,1;if(isminusone(p3))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(equaln(p3,2))return stack[n]=cadr(p1),push(cadr(p1)),push_integer(-1),add(),stack[a]=pop(),1;if(equaln(p3,-2))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),push(cadr(cadr(p2))),push_integer(-1),add(),reciprocate(),stack[a]=pop(),1}}return 0},DEBUG_SIMPLIFY=!1,Eval_simplify=function(){return push(cadr(p1)),runUserDefinedSimplifications(),Eval(),simplify()},runUserDefinedSimplifications=function(){var t,n,a,l,u,c,p,d,Q,Ct;if(userSimplificationsInListForm.length!==0&&!Find(cadr(p1),symbol(INTEGRAL))){for(Q=expanding,expanding=!1,DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications passed: "+stack[tos-1].toString()),Eval(),DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications after eval no expanding: "+stack[tos-1].toString()),expanding=Q,p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("patterns to be checked: "),l=0,u=userSimplificationsInListForm.length;l<u;l++)a=userSimplificationsInListForm[l],DEBUG_SIMPLIFY&&console.log("..."+a);for(t=!0,d=0;t&&d<MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;)for(t=!1,d++,p=0,c=userSimplificationsInListForm.length;p<c;p++){for(a=userSimplificationsInListForm[p],Ct=!0,n=0;Ct&&n<MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)n++,DEBUG_SIMPLIFY&&console.log("simplify - tos: "+tos+" checking pattern: "+a+" on: "+p1),push_symbol(NIL),Ct=transform(a,!0),Ct&&(t=!0),p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("p1 at this stage of simplification: "+p1);n===MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&stop("maximum application of single transformation rule exceeded: "+a)}if(d===MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&stop("maximum application of all transformation rules exceeded "),DEBUG_SIMPLIFY&&console.log("METAX = "+get_binding(symbol(METAX))),DEBUG_SIMPLIFY&&console.log("METAA = "+get_binding(symbol(METAA))),DEBUG_SIMPLIFY)return console.log("METAB = "+get_binding(symbol(METAB)))}},simplifyForCodeGeneration=function(){return save(),runUserDefinedSimplifications(),codeGen=!0,simplify_main(),codeGen=!1,restore()},simplify=function(){return save(),simplify_main(),restore()},simplify_main=function(){var args,fbody;if(p1=pop(),codeGen&&car(p1)===symbol(FUNCTION)&&(fbody=cadr(p1),push(fbody),eval(),simplify(),p3=pop(),args=caddr(p1),push_symbol(FUNCTION),push(p3),push(args),list(3),p1=pop()),istensor(p1)){simplify_tensor();return}if(Find(p1,symbol(FACTORIAL))&&(push(p1),simfac(),p2=pop(),push(p1),rationalize(),simfac(),p3=pop(),count(p2)<count(p3)?p1=p2:p1=p3),f10(),DEBUG_SIMPLIFY&&console.log("f10: "+p1.toString()),f1(),DEBUG_SIMPLIFY&&console.log("f1: "+p1.toString()),f2(),DEBUG_SIMPLIFY&&console.log("f2: "+p1.toString()),f3(),DEBUG_SIMPLIFY&&console.log("f3: "+p1.toString()),f4(),DEBUG_SIMPLIFY&&console.log("f4: "+p1.toString()),f5(),DEBUG_SIMPLIFY&&console.log("f5: "+p1.toString()),f9(),DEBUG_SIMPLIFY&&console.log("f9: "+p1.toString()),simplify_polarRect(),do_simplify_nested_radicals&&simplify_nested_radicals()){DEBUG_SIMPLIFY&&console.log("de-nesting successful into: "+p1.toString()),push(p1),simplify();return}return simplify_rectToClock(),simplify_rational_expressions(),push(p1)},simplify_tensor=function(){var t,n,a,l,u;for(t=0,p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,l=p1.tensor.ndim;0<=l?n<l:n>l;t=0<=l?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,u=p1.tensor.nelem;0<=u?a<u:a>u;t=0<=u?++a:--a)push(p1.tensor.elem[t]),simplify(),p2.tensor.elem[t]=pop();return check_tensor_dimensions(p2),isZeroAtomOrTensor(p2)&&(p2=zero),push(p2)},f1=function(){if(car(p1)===symbol(ADD)&&(push(p1),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},f2=function(){if(car(p1)===symbol(ADD)&&(push(p1),Condense(),p2=pop(),count(p2)<=count(p1)))return p1=p2},f3=function(){if(push(p1),rationalize(),negate(),rationalize(),negate(),rationalize(),p2=pop(),count(p2)<count(p1))return p1=p2},f10=function(){var t,n,a,l;if(a=car(p1),cdr(p1),(a===symbol(MULTIPLY)||isinnerordot(p1))&&car(car(cdr(p1)))===symbol(TRANSPOSE)&&car(car(cdr(cdr(p1))))===symbol(TRANSPOSE)&&(DEBUG_SIMPLIFY&&console.log("maybe collecting a transpose "+p1),t=cadr(car(cdr(p1))),n=cadr(car(cdr(cdr(p1)))),a===symbol(MULTIPLY)?(push(t),push(n),multiply()):isinnerordot(p1)&&(push(n),push(t),inner()),push_integer(1),push_integer(2),l=expanding,expanding=!1,transpose(),expanding=l,p2=pop(),count(p2)<count(p1)&&(p1=p2),DEBUG_SIMPLIFY))return console.log("collecting a transpose "+p2)},f4=function(){if(!isZeroAtomOrTensor(p1)&&(push(p1),rationalize(),inverse(),rationalize(),inverse(),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},simplify_trig=function(){return save(),p1=pop(),f5(),push(p1),restore()},f5=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(p2=p1,trigmode=1,push(p2),Eval(),p3=pop(),trigmode=2,push(p2),Eval(),p4=pop(),trigmode=0,(count(p4)<count(p3)||nterms(p4)<nterms(p3))&&(p3=p4),count(p3)<count(p1)||nterms(p3)<nterms(p1)))return p1=p3},f9=function(){var t,n;if(car(p1)===symbol(ADD)){for(push_integer(0),p2=cdr(p1);iscons(p2);)push(car(p2)),simplify(),add(),t=p1,n=p2,p1=pop(),simplify_rational_expressions(),push(p1),p1=t,p2=n,p2=cdr(p2);if(p2=pop(),count(p2)<count(p1))return p1=p2}},simplify_rational_expressions=function(){var t,n,a,l;if(push(p1),denominator(),t=pop(),!isone(t)&&(push(p1),numerator(),n=pop(),!isone(n)&&(a=areunivarpolysfactoredorexpandedform(n,t))&&(push(n),push(t),gcd(),push(a),factor(),l=pop(),!isone(l)&&(push(n),push(a),factor(),push(l),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),push(t),push(a),factor(),push(l),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),divide(),Condense(),stack[tos-1].toString(),p2=pop(),count(p2)<count(p1)))))return p1=p2},simplify_rectToClock=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(push(p1),Eval(),clockform(),p2=pop(),DEBUG_SIMPLIFY&&console.log("before simplification clockform: "+p1+" after: "+p2),count(p2)<count(p1)))return p1=p2},simplify_polarRect=function(){if(push(p1),polarRectAMinusOneBase(),Eval(),p2=pop(),count(p2)<count(p1))return p1=p2},polarRectAMinusOneBase=function(){var t;if(save(),p1=pop(),isimaginaryunit(p1)){push(p1),restore();return}if(equal(car(p1),symbol(POWER))&&isminusone(cadr(p1)))push(one),negate(),push(caddr(p1)),polarRectAMinusOneBase(),power(),polar(),rect();else if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),polarRectAMinusOneBase(),p1=cdr(p1);list(tos-t)}else push(p1);restore()},nterms=function(t){return car(t)!==symbol(ADD)?1:length(t)-1},simplify_nested_radicals=function(){var t,n,a,l;return recursionLevelNestedRadicalsRemoval>0?(DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1):(push(p1),l=take_care_of_nested_radicals(),a=stack[tos-1],t=expanding,expanding=0,yycondense(),expanding=t,n=pop(),countOccurrencesOfSymbol(symbol(POWER),a)<countOccurrencesOfSymbol(symbol(POWER),n)?push(a):push(n),p1=pop(),l)},take_care_of_nested_radicals=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux,gx,yx,_x,vx,bx,xx,Sx,Ax,Cx,Tx,Px,Fx;if(recursionLevelNestedRadicalsRemoval>0)return DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1;if(save(),p1=pop(),equal(car(p1),symbol(POWER)))if(c=cadr(p1),en=caddr(p1),!isminusone(en)&&equal(car(c),symbol(ADD))&&isfraction(en)&&(equalq(en,1,3)||equalq(en,1,2))){for(tn=cadr(c),push(tn),take_care_of_nested_radicals(),pop(),Cx=caddr(c),push(Cx),take_care_of_nested_radicals(),pop(),ux=0,Ct=c;cdr(Ct)!==symbol(NIL);)ux++,Ct=cdr(Ct);if(ux>2)return push(p1),restore(),!1;if(Q=null,d=[],Px=[],car(Cx)===symbol(MULTIPLY)){if(Tx=cdr(Cx),iscons(Tx))for(;iscons(Tx);)xx=car(Tx),car(xx)===symbol(POWER)?(gn=cadr(xx),Cn=caddr(xx),equalq(Cn,1,2)&&(Q==null?(Q=Cn,d.push(gn)):equal(Cn,Q)&&d.push(gn))):Px.push(xx),Tx=cdr(Tx)}else car(Cx)===symbol(POWER)&&(gn=cadr(Cx),Cn=caddr(Cx),Q==null&&equalq(Cn,1,2)&&(Q=Cn,d.push(gn)));if(d.length===0)return push(p1),restore(),!1;for(t=tn,push_integer(1),ex=0,ix=d.length;ex<ix;ex++)cn=d[ex],push(cn),multiply();for(a=pop(),push_integer(1),hx=0,ax=Px.length;hx<ax;hx++)cn=Px[hx],push(cn),multiply();if(n=pop(),equalq(en,1,3)){if(push(t),negate(),push(a),multiply(),push(n),divide(),p=pop(),push(p),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(p),push_integer(3),push(a),multiply(),p=pop(),push(p),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;if(push(p),push(symbol(SECRETX)),multiply(),push_integer(-3),push(t),multiply(),push(n),divide(),p=pop(),push(p),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),pop(),push(p1),restore(),!1;push(p),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(3),power(),multiply(),add(),add(),add()}else if(equalq(en,1,2)){if(push(a),p=pop(),push(p),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(p),push_integer(-2),push(t),multiply(),push(n),divide(),p=pop(),push(p),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;push(p),push(symbol(SECRETX)),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(2),power(),multiply(),add(),add()}if(push(symbol(SECRETX)),recursionLevelNestedRadicalsRemoval++,roots(),recursionLevelNestedRadicalsRemoval--,equal(stack[tos-1],symbol(NIL)))return DEBUG_SIMPLIFY&&console.log("roots bailed out because of too much recursion"),pop(),push(p1),restore(),!1;for(bx=[],Ax=stack[tos-1].tensor.elem,fx=0,ox=Ax.length;fx<ox;fx++)ar=Ax[fx],Find(ar,symbol(POWER))||bx.push(ar);if(pop(),bx.length===0)return push(p1),restore(),!1;for(vx=[],Sx=[],gx=0,lx=bx.length;gx<lx;gx++)cn=bx[gx],push(cn),real(),yyfloat(),vx.push(cn),Sx.push(pop().d);return Fx=Sx.indexOf(Math.max.apply(Math,Sx)),l=vx[Fx],equalq(en,1,3)?(push(t),push(l),push_integer(3),power(),push_integer(3),push(a),multiply(),push(l),multiply(),add(),divide(),push_rational(1,3),power()):equalq(en,1,2)&&(push(t),push(l),push_integer(2),power(),push(a),add(),divide(),push_rational(1,2),power()),dx=pop(),dx==null?(push(p1),restore(),!1):(push(dx),push(l),multiply(),equalq(en,1,3)?(cx=pop(),push(dx),push(a),push_rational(1,2),power(),multiply(),push(cx),add(),simplify()):equalq(en,1,2)&&(cx=pop(),push(dx),push(a),push_rational(1,2),power(),multiply(),push(cx),add(),simplify(),yx=pop(),push(yx),real(),yyfloat(),_x=pop(),isnegativenumber(_x)?(push(dx),negate(),dx=pop(),push(cx),negate(),cx=pop(),push(dx),push(a),push_rational(1,2),power(),multiply(),push(cx),add(),simplify()):push(yx)),p1=pop(),push(p1),restore(),!0)}else return push(p1),restore(),!1;else if(iscons(p1)){for(on=tos,u=!1;iscons(p1);)push(car(p1)),u=u||take_care_of_nested_radicals(),p1=cdr(p1);return list(tos-on),restore(),u}else return push(p1),restore(),!1},Eval_sin=function(){return push(cadr(p1)),Eval(),sine()},sine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?sine_of_angle_sum():sine_of_angle(),restore()},sine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),sine(),push(p4),cosine(),multiply(),push(p3),cosine(),push(p4),sine(),multiply(),add();return}p2=cdr(p2)}return sine_of_angle()},sine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCSIN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sin(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),sine(),negate();return}if(car(p1)===symbol(ARCTAN)){push(cadr(p1)),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power(),multiply();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(SIN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 150:return push_rational(1,2);case 210:case 330:return push_rational(-1,2);case 45:case 135:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 225:case 315:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 60:case 120:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 240:case 300:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 90:return push_integer(1);case 270:return push_integer(-1);default:return push(symbol(SIN)),push(p1),list(2)}},Eval_sinh=function(){return push(cadr(p1)),Eval(),ysinh()},ysinh=function(){return save(),yysinh(),restore()},yysinh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCSINH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sinh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(SINH),push(p1),list(2)},subst=function(){var t,n,a,l,u,c,p,d,Q;if(save(),u=pop(),p=pop(),p===symbol(NIL)||u===symbol(NIL)){restore();return}if(t=pop(),istensor(t)){for(c=alloc_tensor(t.tensor.nelem),c.tensor.ndim=t.tensor.ndim,n=a=0,d=t.tensor.ndim;0<=d?a<d:a>d;n=0<=d?++a:--a)c.tensor.dim[n]=t.tensor.dim[n];for(n=l=0,Q=t.tensor.nelem;0<=Q?l<Q:l>Q;n=0<=Q?++l:--l)push(t.tensor.elem[n]),push(p),push(u),subst(),c.tensor.elem[n]=pop(),check_tensor_dimensions(c);push(c)}else equal(t,p)?push(u):iscons(t)?(push(car(t)),push(p),push(u),subst(),push(cdr(t)),push(p),push(u),subst(),cons()):push(t);return restore()},Eval_sum=function(){var t,n,a,l,u,c,p,d;if(n=0,l=0,u=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}if(push(caddddr(p1)),Eval(),u=pop_integer(),isNaN(u)){push(p1);return}for(p4=get_binding(a),push_integer(0),n=c=p=l,d=u;p<=d?c<=d:c>=d;n=p<=d?++c:--c)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),add();return set_binding(a,p4)},Eval_tan=function(){return push(cadr(p1)),Eval(),tangent()},tangent=function(){return save(),yytangent(),restore()},yytangent=function(){var t,n;if(n=0,t=0,p1=pop(),car(p1)===symbol(ARCTAN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tan(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),tangent(),negate();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(TAN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 210:return push_rational(1,3),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 330:return push_rational(-1,3),push_integer(3),push_rational(1,2),power(),multiply();case 45:case 225:return push_integer(1);case 135:case 315:return push_integer(-1);case 60:case 240:return push_integer(3),push_rational(1,2),power();case 120:case 300:return push_integer(3),push_rational(1,2),power(),negate();default:return push(symbol(TAN)),push(p1),list(2)}},Eval_tanh=function(){var t;if(t=0,push(cadr(p1)),Eval(),p1=pop(),car(p1)===symbol(ARCTANH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tanh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(TANH),push(p1),list(2)},Eval_taylor=function(){return p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(24):push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),taylor()},taylor=function(){var t,n,a,l;if(t=0,n=0,save(),p4=pop(),p3=pop(),p2=pop(),p1=pop(),push(p3),n=pop_integer(),isNaN(n)){push_symbol(TAYLOR),push(p1),push(p2),push(p3),push(p4),list(5),restore();return}for(push(p1),push(p2),push(p4),subst(),Eval(),push_integer(1),p5=pop(),t=a=1,l=n;(1<=l?a<=l:a>=l)&&(push(p1),push(p2),derivative(),p1=pop(),!isZeroAtomOrTensor(p1));t=1<=l?++a:--a)push(p5),push(p2),push(p4),subtract(),multiply(),p5=pop(),push(p1),push(p2),push(p4),subst(),Eval(),push(p5),multiply(),push_integer(t),factorial(),divide(),add();return restore()},Eval_tensor=function(){var t,n,a,l,u,c,p,d,Q;for(a=0,c=0,p=0,check_tensor_dimensions(p1),p=p1.tensor.nelem,c=p1.tensor.ndim,p2=alloc_tensor(p),p2.tensor.ndim=c,a=l=0,d=c;0<=d?l<d:l>d;a=0<=d?++l:--l)p2.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p2.tensor.elem,check_tensor_dimensions(p2),a=u=0,Q=p;0<=Q?u<Q:u>Q;a=0<=Q?++u:--u)push(t[a]),Eval(),n[a]=pop();return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),promote_tensor()},tensor_plus_tensor=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en;if(l=0,d=0,Q=0,save(),p2=pop(),p1=pop(),d=p1.tensor.ndim,d!==p2.tensor.ndim){push(symbol(NIL)),restore();return}for(l=u=0,Ct=d;0<=Ct?u<Ct:u>Ct;l=0<=Ct?++u:--u)if(p1.tensor.dim[l]!==p2.tensor.dim[l]){push(symbol(NIL)),restore();return}for(Q=p1.tensor.nelem,p3=alloc_tensor(Q),p3.tensor.ndim=d,l=c=0,ar=d;0<=ar?c<ar:c>ar;l=0<=ar?++c:--c)p3.tensor.dim[l]=p1.tensor.dim[l];for(t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,l=p=0,en=Q;0<=en?p<en:p>en;l=0<=en?++p:--p)push(t[l]),push(n[l]),add(),a[l]=pop();return push(p3),restore()},tensor_times_scalar=function(){var t,n,a,l,u,c,p,d,Q;for(a=0,c=0,p=0,save(),p2=pop(),p1=pop(),c=p1.tensor.ndim,p=p1.tensor.nelem,p3=alloc_tensor(p),p3.tensor.ndim=c,a=l=0,d=c;0<=d?l<d:l>d;a=0<=d?++l:--l)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=u=0,Q=p;0<=Q?u<Q:u>Q;a=0<=Q?++u:--u)push(t[a]),push(p2),multiply(),n[a]=pop();return push(p3),restore()},scalar_times_tensor=function(){var t,n,a,l,u,c,p,d,Q;for(a=0,c=0,p=0,save(),p2=pop(),p1=pop(),c=p2.tensor.ndim,p=p2.tensor.nelem,p3=alloc_tensor(p),p3.tensor.ndim=c,a=l=0,d=c;0<=d?l<d:l>d;a=0<=d?++l:--l)p3.tensor.dim[a]=p2.tensor.dim[a];for(t=p2.tensor.elem,n=p3.tensor.elem,a=u=0,Q=p;0<=Q?u<Q:u>Q;a=0<=Q?++u:--u)push(p1),push(t[a]),multiply(),n[a]=pop();return push(p3),restore()},check_tensor_dimensions=function(t){if(t.tensor.nelem!==t.tensor.elem.length){console.log("something wrong in tensor dimensions");debugger}},d_tensor_tensor=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn;if(l=0,u=0,Q=0,Ct=0,Q=p1.tensor.ndim,Ct=p1.tensor.nelem,Q+1>=MAXDIM){push_symbol(DERIVATIVE),push(p1),push(p2),list(3);return}for(p3=alloc_tensor(Ct*p2.tensor.nelem),p3.tensor.ndim=Q+1,l=c=0,ar=Q;0<=ar?c<ar:c>ar;l=0<=ar?++c:--c)p3.tensor.dim[l]=p1.tensor.dim[l];for(p3.tensor.dim[Q]=p2.tensor.dim[0],t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,l=p=0,en=Ct;0<=en?p<en:p>en;l=0<=en?++p:--p)for(u=d=0,tn=p2.tensor.nelem;0<=tn?d<tn:d>tn;u=0<=tn?++d:--d)push(t[l]),push(n[u]),derivative(),a[l*p2.tensor.nelem+u]=pop();return push(p3)},d_scalar_tensor=function(){var t,n,a,l,u;for(p3=alloc_tensor(p2.tensor.nelem),p3.tensor.ndim=1,p3.tensor.dim[0]=p2.tensor.dim[0],t=p2.tensor.elem,n=p3.tensor.elem,a=l=0,u=p2.tensor.nelem;0<=u?l<u:l>u;a=0<=u?++l:--l)push(p1),push(t[a]),derivative(),n[a]=pop();return push(p3)},d_tensor_scalar=function(){var t,n,a,l,u,c,p;for(a=0,p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,a=l=0,c=p1.tensor.ndim;0<=c?l<c:l>c;a=0<=c?++l:--l)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=u=0,p=p1.tensor.nelem;0<=p?u<p:u>p;a=0<=p?++u:--u)push(t[a]),push(p2),derivative(),n[a]=pop();return push(p3)},compare_tensors=function(t,n){var a,l,u,c,p;if(a=0,t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=l=0,c=t.tensor.ndim;0<=c?l<c:l>c;a=0<=c?++l:--l){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}for(a=u=0,p=t.tensor.nelem;0<=p?u<p:u>p;a=0<=p?++u:--u)if(!equal(t.tensor.elem[a],n.tensor.elem[a]))return lessp(t.tensor.elem[a],n.tensor.elem[a])?-1:1;return 0},power_tensor=function(){var t,n,a,l,u,c,p,d;if(t=0,n=0,u=0,n=p1.tensor.ndim-1,p1.tensor.dim[0]!==p1.tensor.dim[n]){push_symbol(POWER),push(p1),push(p2),list(3);return}if(push(p2),u=pop_integer(),isNaN(u)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(u===0){for(p1.tensor.ndim!==2&&stop("power(tensor,0) with tensor rank not equal to 2"),u=p1.tensor.dim[0],p1=alloc_tensor(u*u),p1.tensor.ndim=2,p1.tensor.dim[0]=u,p1.tensor.dim[1]=u,t=a=0,c=u;0<=c?a<c:a>c;t=0<=c?++a:--a)p1.tensor.elem[u*t+t]=one;check_tensor_dimensions(p1),push(p1);return}for(u<0&&(u=-u,push(p1),inv(),p1=pop()),push(p1),d=[],t=l=1,p=u;(1<=p?l<p:l>p)&&(push(p1),inner(),!isZeroAtomOrTensor(stack[tos-1]));t=1<=p?++l:--l)d.push(void 0);return d},copy_tensor=function(){var t,n,a,l,u;for(t=0,save(),p1=pop(),p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,l=p1.tensor.ndim;0<=l?n<l:n>l;t=0<=l?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,u=p1.tensor.nelem;0<=u?a<u:a>u;t=0<=u?++a:--a)p2.tensor.elem[t]=p1.tensor.elem[t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),restore()},promote_tensor=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn;if(t=0,n=0,a=0,d=0,p=0,save(),p1=pop(),!istensor(p1)){push(p1),restore();return}for(p2=p1.tensor.elem[0],t=l=1,ar=p1.tensor.nelem;1<=ar?l<ar:l>ar;t=1<=ar?++l:--l)compatible(p2,p1.tensor.elem[t])||stop("Cannot promote tensor due to inconsistent tensor components.");if(!istensor(p2)){push(p1),restore();return}for(p=p1.tensor.ndim+p2.tensor.ndim,p>MAXDIM&&stop("tensor rank > "+MAXDIM),d=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(d),p3.tensor.ndim=p,t=u=0,en=p1.tensor.ndim;0<=en?u<en:u>en;t=0<=en?++u:--u)p3.tensor.dim[t]=p1.tensor.dim[t];for(n=c=0,tn=p2.tensor.ndim;0<=tn?c<tn:c>tn;n=0<=tn?++c:--c)p3.tensor.dim[t+n]=p2.tensor.dim[n];for(a=0,t=Q=0,on=p1.tensor.nelem;0<=on?Q<on:Q>on;t=0<=on?++Q:--Q)for(p2=p1.tensor.elem[t],n=Ct=0,cn=p2.tensor.nelem;0<=cn?Ct<cn:Ct>cn;n=0<=cn?++Ct:--Ct)p3.tensor.elem[a++]=p2.tensor.elem[n];return check_tensor_dimensions(p2),check_tensor_dimensions(p3),push(p3),restore()},compatible=function(t,n){var a,l,u;if(!istensor(t)&&!istensor(n))return 1;if(!istensor(t)||!istensor(n)||t.tensor.ndim!==n.tensor.ndim)return 0;for(a=l=0,u=t.tensor.ndim;0<=u?l<u:l>u;a=0<=u?++l:--l)if(t.tensor.dim[a]!==n.tensor.dim[a])return 0;return 1},Eval_test=function(){var t,n;for(n=p1,p1=cdr(p1);iscons(p1);){if(cdr(p1)===symbol(NIL)){push(car(p1)),Eval();return}if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(p1)),t==null){push(n);return}else if(t){push(cadr(p1)),Eval();return}else p1=cddr(p1)}return push_integer(0)},Eval_testeq=function(){var t,n,a;if(n=p1,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}if(push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}return push(n)},Eval_testge=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>=0?push_integer(1):push_integer(0)},Eval_testgt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>0?push_integer(1):push_integer(0)},Eval_testle=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<=0?push_integer(1):push_integer(0)},Eval_testlt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<0?push_integer(1):push_integer(0)},Eval_not=function(){var t,n;return n=p1,t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(n):push_integer(t?0:1)},Eval_and=function(){var t,n,a,l;for(l=p1,t=cdr(l),a=!1;iscons(t);)if(n=isZeroLikeOrNonZeroLikeOrUndetermined(car(t)),n==null)a=!0,t=cdr(t);else if(n)t=cdr(t);else if(!n){push_integer(0);return}return a?push(l):push_integer(1)},Eval_or=function(){var t,n,a,l;for(l=p1,n=cdr(l),a=!1;iscons(n);)if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(n)),t==null)a=!0,n=cdr(n);else if(t){push_integer(1);return}else t||(n=cdr(n));return a?push(l):push_integer(0)},cmp_args=function(){var t;if(t=0,push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),p1=pop(),p1.k!==NUM&&p1.k!==DOUBLE&&(push(p1),yyfloat(),Eval(),p1=pop()),isZeroAtomOrTensor(p1))return 0;switch(p1.k){case NUM:MSIGN(p1.q.a)===-1?t=-1:t=1;break;case DOUBLE:p1.d<0?t=-1:t=1;break;default:t=null}return t},transform=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix;if(Cn=0,save(),p1=null,p4=pop(),p3=pop(),DEBUG&&console.log("         !!!!!!!!!   transform on: "+p3),saveMetaBindings(),set_binding(symbol(METAX),p4),Cn=tos,push_integer(1),push(p3),push(p4),polyform(),push(p4),a=tos-2,decomp(n),ar=tos-a,DEBUG)for(console.log("  "+ar+" decomposed elements ====== "),u=c=0,en=ar;0<=en?c<en:c>en;u=0<=en?++c:--c)console.log("  decomposition element "+u+": "+stack[tos-1-u]);if(ex=!1,n){if(!isNumericAtom(p3))if(gn=t,DEBUG&&console.log("applying transform: "+gn),DEBUG&&console.log("scanning table entry "+gn),push(gn),push(symbol(SYMBOL_A_UNDERSCORE)),push(symbol(METAA)),subst(),push(symbol(SYMBOL_B_UNDERSCORE)),push(symbol(METAB)),subst(),push(symbol(SYMBOL_X_UNDERSCORE)),push(symbol(METAX)),subst(),p1=pop(),p5=car(p1),DEBUG&&console.log("template expression: "+p5),p6=cadr(p1),p7=cddr(p1),f_equals_a(Cn,n))ex=!0;else{for(DEBUG&&console.log("p3 at this point: "+p3),ix=[],DEBUG&&console.log("car(p3): "+car(p3)),tn=p3,iscons(tn)&&(ix.push(car(p3)),tn=cdr(p3));iscons(tn);)on=car(tn),tn=cdr(tn),DEBUG&&console.log("tos before recursive transform: "+tos),push(on),push_symbol(NIL),DEBUG&&console.log("testing: "+on),DEBUG&&console.log("about to try to simplify other term: "+on),cn=transform(t,n),ex=ex||cn,ix.push(pop()),DEBUG&&console.log("tried to simplify other term: "+on+" ...successful?: "+cn+" ...transformed: "+ix[ix.length-1]);if(ix.length!==0){for(Q=0,p=ix.length;Q<p;Q++)u=ix[Q],push(u);list(ix.length),p6=pop()}}}else for(Ct=0,d=t.length;Ct<d;Ct++){if(l=t[Ct],DEBUG&&(console.log("scanning table entry "+l),(l+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")!==-1))debugger;if(l&&(scan_meta(l),p1=pop(),p5=cadr(p1),p6=caddr(p1),p7=cdddr(p1),f_equals_a(Cn,n))){ex=!0;break}}return moveTos(Cn),ex?(push(p6),Eval(),p1=pop(),ex=!0):n?p1=p3:p1=symbol(NIL),restoreMetaBindings(),push(p1),restore(),ex},saveMetaBindings=function(){return push(get_binding(symbol(METAA))),push(get_binding(symbol(METAB))),push(get_binding(symbol(METAX)))},restoreMetaBindings=function(){return set_binding(symbol(METAX),pop()),set_binding(symbol(METAB),pop()),set_binding(symbol(METAA),pop())},f_equals_a=function(t,n){var a,l,u,c,p,d,Q,Ct,ar;for(a=0,l=0,a=u=d=t,Q=tos;d<=Q?u<Q:u>Q;a=d<=Q?++u:--u)for(set_binding(symbol(METAA),stack[a]),DEBUG&&console.log("  binding METAA to "+get_binding(symbol(METAA))),l=c=Ct=t,ar=tos;Ct<=ar?c<ar:c>ar;l=Ct<=ar?++c:--c){for(set_binding(symbol(METAB),stack[l]),DEBUG&&console.log("  binding METAB to "+get_binding(symbol(METAB))),p1=p7;iscons(p1)&&(push(car(p1)),Eval(),p2=pop(),!isZeroAtomOrTensor(p2));)p1=cdr(p1);if(!iscons(p1)&&(push(p3),DEBUG&&console.log("about to evaluate template expression: "+p5+" binding METAA to "+get_binding(symbol(METAA))+" and binding METAB to "+get_binding(symbol(METAB))+" and binding METAX to "+get_binding(symbol(METAX))),push(p5),n&&(p=expanding,expanding=!1),Eval(),n&&(expanding=p),DEBUG&&console.log("  comparing "+stack[tos-1]+" to: "+stack[tos-2]),subtract(),p1=pop(),isZeroAtomOrTensor(p1)))return DEBUG&&(console.log("binding METAA to "+get_binding(symbol(METAA))),console.log("binding METAB to "+get_binding(symbol(METAB))),console.log("binding METAX to "+get_binding(symbol(METAX))),console.log("comparing "+p3+" to: "+p5)),1}return 0},Eval_transpose=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),transpose()},transpose=function(){var t,n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux,gx,yx,_x;for(p=0,Ct=0,ar=0,en=0,on=0,Cn=0,ex=0,_x=0,a=[],l=[],p=tn=0,lx=MAXDIM;0<=lx?tn<lx:tn>lx;p=0<=lx?++tn:--tn)a[p]=0,l[p]=0;if(save(),p3=pop(),p2=pop(),p1=pop(),isNumericAtom(p1)){push(p1),restore();return}if((isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2))&&isidentitymatrix(p1)){push(p1),restore();return}if(istranspose(p1)&&(d=car(cdr(cdr(p1))),Q=car(cdr(cdr(cdr(p1)))),equal(d,p3)&&equal(Q,p2)||equal(Q,p3)&&equal(d,p2)||equal(d,symbol(NIL))&&equal(Q,symbol(NIL))&&(isplusone(p3)&&isplustwo(p2)||isplusone(p2)&&isplustwo(p3)))){push(car(cdr(p1))),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),add(),p1=cdr(p1);restore();return}if(expanding&&ismultiply(p1)){for(p1=cdr(p1),push(one);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),multiply(),p1=cdr(p1);restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),n=[];iscons(p1);)n.push([car(p1),p2,p3]),p1=cdr(p1);for(c=cn=cx=n.length-1;cx<=0?cn<=0:cn>=0;c=cx<=0?++cn:--cn)push(n[c][0]),push(n[c][1]),push(n[c][2]),transpose(),c!==n.length-1&&inner();restore();return}if(!istensor(p1)){if(!isZeroAtomOrTensor(p1)){push_symbol(TRANSPOSE),push(p1),(!isplusone(p2)||!isplustwo(p3))&&(!isplusone(p3)||!isplustwo(p2))?(push(p2),push(p3),list(4)):list(2),restore();return}push(zero),restore();return}if(Cn=p1.tensor.ndim,ex=p1.tensor.nelem,Cn===1){push(p1),restore();return}for(push(p2),en=pop_integer(),push(p3),on=pop_integer(),(en<1||en>Cn||on<1||on>Cn)&&stop("transpose: index out of range"),en--,on--,p2=alloc_tensor(ex),p2.tensor.ndim=Cn,p=gn=0,dx=Cn;0<=dx?gn<dx:gn>dx;p=0<=dx?++gn:--gn)p2.tensor.dim[p]=p1.tensor.dim[p];for(p2.tensor.dim[en]=p1.tensor.dim[on],p2.tensor.dim[on]=p1.tensor.dim[en],t=p1.tensor.elem,u=p2.tensor.elem,p=ix=0,hx=Cn;0<=hx?ix<hx:ix>hx;p=0<=hx?++ix:--ix)a[p]=0,l[p]=p1.tensor.dim[p];for(p=ax=0,fx=ex;0<=fx?ax<fx:ax>fx;p=0<=fx?++ax:--ax){for(_x=a[en],a[en]=a[on],a[on]=_x,_x=l[en],l[en]=l[on],l[on]=_x,ar=0,Ct=ox=0,ux=Cn;0<=ux?ox<ux:ox>ux;Ct=0<=ux?++ox:--ox)ar=ar*l[Ct]+a[Ct];for(_x=a[en],a[en]=a[on],a[on]=_x,_x=l[en],l[en]=l[on],l[on]=_x,u[ar]=t[p],Ct=yx=gx=Cn-1;(gx<=0?yx<=0:yx>=0)&&!(++a[Ct]<l[Ct]);Ct=gx<=0?++yx:--yx)a[Ct]=0}return push(p2),restore()},Eval_user_function=function(){var t,n;if(DEBUG&&console.log("Eval_user_function evaluating: "+car(p1)),car(p1)===symbol(SYMBOL_D)&&get_binding(symbol(SYMBOL_D))===symbol(SYMBOL_D)){Eval_derivative();return}if(push(car(p1)),Eval(),t=pop(),isNumericAtom(t)?stop("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):istensor(t)?stop("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):isstr(t)&&stop("expected function, found string instead."),p3=car(cdr(t)),p4=car(cdr(cdr(t))),p5=cdr(p1),car(t)!==symbol(FUNCTION)||t===car(p1)){for(n=tos,push(t),p1=p5;iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);list(tos-n);return}for(p1=p4,p2=p5,n=tos;iscons(p1)&&iscons(p2);)push(car(p1)),push(car(p2)),p1=cdr(p1),p2=cdr(p2);return list(tos-n),p6=pop(),push(p3),iscons(p6)&&(push(p6),rewrite_args()),Eval()},rewrite_args=function(){var t,n;if(n=0,save(),p2=pop(),p1=pop(),istensor(p1))return n=rewrite_args_tensor(),restore(),n;if(iscons(p1)){for(t=tos,car(p1)===car(p2)?(push_symbol(EVAL),push(car(cdr(p2))),list(2)):push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),n+=rewrite_args(),p1=cdr(p1);return list(tos-t),restore(),n}if(!issymbol(p1))return push(p1),restore(),0;for(p3=p2;iscons(p3);){if(p1===car(p3))return push(cadr(p3)),restore(),1;p3=cddr(p3)}return p3=get_binding(p1),push(p3),p1!==p3&&(push(p2),n=rewrite_args(),n===0&&(pop(),push(p1))),restore(),n},rewrite_args_tensor=function(){var t,n,a,l;for(a=0,t=0,push(p1),copy_tensor(),p1=pop(),t=n=0,l=p1.tensor.nelem;0<=l?n<l:n>l;t=0<=l?++n:--n)push(p1.tensor.elem[t]),push(p2),a+=rewrite_args(),p1.tensor.elem[t]=pop();return check_tensor_dimensions(p1),push(p1),a},Eval_zero=function(){var t,n,a,l,u,c,p,d;for(t=0,n=[],l=0,c=0,t=a=0,p=MAXDIM;0<=p?a<p:a>p;t=0<=p?++a:--a)n[t]=0;for(l=1,c=0,p2=cdr(p1);iscons(p2);){if(push(car(p2)),Eval(),t=pop_integer(),t<1||isNaN(t)){push(zero);return}l*=t,n[c++]=t,p2=cdr(p2)}if(c===0){push(zero);return}for(p1=alloc_tensor(l),p1.tensor.ndim=c,t=u=0,d=c;0<=d?u<d:u>d;t=0<=d?++u:--u)p1.tensor.dim[t]=n[t];return push(p1)},allocatedId=0,alloc_tensor=function(t){var n,a,l,u;for(n=0,l=new U,l.k=TENSOR,l.tensor=new tensor,l.tensor.nelem=t,n=a=0,u=t;0<=u?a<u:a>u;n=0<=u?++a:--a)l.tensor.elem[n]=zero;return l.tensor.allocatedId=allocatedId,allocatedId++,check_tensor_dimensions(l),l},Find=function(t,n){var a,l,u;if(a=0,equal(t,n))return 1;if(istensor(t)){for(a=l=0,u=t.tensor.nelem;0<=u?l<u:l>u;a=0<=u?++l:--l)if(Find(t.tensor.elem[a],n))return 1;return 0}for(;iscons(t);){if(Find(car(t),n))return 1;t=cdr(t)}return 0},findPossibleClockForm=function(t){var n,a,l;if(n=0,isimaginaryunit(t))return 0;if(car(t)===symbol(POWER)&&!isinteger(caddr(p1))&&Find(cadr(t),imaginaryunit)||car(t)===symbol(POWER)&&equaln(cadr(t),-1)&&!isinteger(caddr(p1)))return 1;if(istensor(t)){for(n=a=0,l=t.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)if(findPossibleClockForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleClockForm(car(t)))return 1;t=cdr(t)}return 0},findPossibleExponentialForm=function(t){var n,a,l;if(n=0,car(t)===symbol(POWER)&&cadr(t)===symbol(E))return Find(caddr(t),imaginaryunit);if(istensor(t)){for(n=a=0,l=t.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)if(findPossibleExponentialForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleExponentialForm(car(t)))return 1;t=cdr(t)}return 0},$.Find=Find,init=function(){var t,n,a;if(t=0,flag=0,reset_after_error(),chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!flag){for(flag=1,t=n=0,a=NSYM;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],isSymbolReclaimable[t]=!1;return defn()}},defn_str=['version="'+version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"],defn=function(){var t,n,a,l,u;for(p0=symbol(NIL),p1=symbol(NIL),p2=symbol(NIL),p3=symbol(NIL),p4=symbol(NIL),p5=symbol(NIL),p6=symbol(NIL),p7=symbol(NIL),p8=symbol(NIL),p9=symbol(NIL),std_symbol("abs",ABS),std_symbol("add",ADD),std_symbol("adj",ADJ),std_symbol("and",AND),std_symbol("approxratio",APPROXRATIO),std_symbol("arccos",ARCCOS),std_symbol("arccosh",ARCCOSH),std_symbol("arcsin",ARCSIN),std_symbol("arcsinh",ARCSINH),std_symbol("arctan",ARCTAN),std_symbol("arctanh",ARCTANH),std_symbol("arg",ARG),std_symbol("atomize",ATOMIZE),std_symbol("besselj",BESSELJ),std_symbol("bessely",BESSELY),std_symbol("binding",BINDING),std_symbol("binomial",BINOMIAL),std_symbol("ceiling",CEILING),std_symbol("check",CHECK),std_symbol("choose",CHOOSE),std_symbol("circexp",CIRCEXP),std_symbol("clear",CLEAR),std_symbol("clearall",CLEARALL),std_symbol("clearpatterns",CLEARPATTERNS),std_symbol("clock",CLOCK),std_symbol("coeff",COEFF),std_symbol("cofactor",COFACTOR),std_symbol("condense",CONDENSE),std_symbol("conj",CONJ),std_symbol("contract",CONTRACT),std_symbol("cos",COS),std_symbol("cosh",COSH),std_symbol("decomp",DECOMP),std_symbol("defint",DEFINT),std_symbol("deg",DEGREE),std_symbol("denominator",DENOMINATOR),std_symbol("det",DET),std_symbol("derivative",DERIVATIVE),std_symbol("dim",DIM),std_symbol("dirac",DIRAC),std_symbol("divisors",DIVISORS),std_symbol("do",DO),std_symbol("dot",DOT),std_symbol("draw",DRAW),std_symbol("dsolve",DSOLVE),std_symbol("erf",ERF),std_symbol("erfc",ERFC),std_symbol("eigen",EIGEN),std_symbol("eigenval",EIGENVAL),std_symbol("eigenvec",EIGENVEC),std_symbol("eval",EVAL),std_symbol("exp",EXP),std_symbol("expand",EXPAND),std_symbol("expcos",EXPCOS),std_symbol("expsin",EXPSIN),std_symbol("factor",FACTOR),std_symbol("factorial",FACTORIAL),std_symbol("factorpoly",FACTORPOLY),std_symbol("filter",FILTER),std_symbol("float",FLOATF),std_symbol("floor",FLOOR),std_symbol("for",FOR),std_symbol("function",FUNCTION),std_symbol("Gamma",GAMMA),std_symbol("gcd",GCD),std_symbol("hermite",HERMITE),std_symbol("hilbert",HILBERT),std_symbol("imag",IMAG),std_symbol("component",INDEX),std_symbol("inner",INNER),std_symbol("integral",INTEGRAL),std_symbol("inv",INV),std_symbol("invg",INVG),std_symbol("isinteger",ISINTEGER),std_symbol("isprime",ISPRIME),std_symbol("laguerre",LAGUERRE),std_symbol("lcm",LCM),std_symbol("leading",LEADING),std_symbol("legendre",LEGENDRE),std_symbol("log",LOG),std_symbol("lookup",LOOKUP),std_symbol("mod",MOD),std_symbol("multiply",MULTIPLY),std_symbol("not",NOT),std_symbol("nroots",NROOTS),std_symbol("number",NUMBER),std_symbol("numerator",NUMERATOR),std_symbol("operator",OPERATOR),std_symbol("or",OR),std_symbol("outer",OUTER),std_symbol("pattern",PATTERN),std_symbol("patternsinfo",PATTERNSINFO),std_symbol("polar",POLAR),std_symbol("power",POWER),std_symbol("prime",PRIME),std_symbol("print",PRINT),std_symbol("print2dascii",PRINT2DASCII),std_symbol("printcomputer",PRINTFULL),std_symbol("printlatex",PRINTLATEX),std_symbol("printlist",PRINTLIST),std_symbol("printhuman",PRINTPLAIN),std_symbol("printLeaveEAlone",PRINT_LEAVE_E_ALONE),std_symbol("printLeaveXAlone",PRINT_LEAVE_X_ALONE),std_symbol("product",PRODUCT),std_symbol("quote",QUOTE),std_symbol("quotient",QUOTIENT),std_symbol("rank",RANK),std_symbol("rationalize",RATIONALIZE),std_symbol("real",REAL),std_symbol("rect",YYRECT),std_symbol("roots",ROOTS),std_symbol("round",ROUND),std_symbol("equals",SETQ),std_symbol("sgn",SGN),std_symbol("silentpattern",SILENTPATTERN),std_symbol("simplify",SIMPLIFY),std_symbol("sin",SIN),std_symbol("sinh",SINH),std_symbol("shape",SHAPE),std_symbol("sqrt",SQRT),std_symbol("stop",STOP),std_symbol("subst",SUBST),std_symbol("sum",SUM),std_symbol("symbolsinfo",SYMBOLSINFO),std_symbol("tan",TAN),std_symbol("tanh",TANH),std_symbol("taylor",TAYLOR),std_symbol("test",TEST),std_symbol("testeq",TESTEQ),std_symbol("testge",TESTGE),std_symbol("testgt",TESTGT),std_symbol("testle",TESTLE),std_symbol("testlt",TESTLT),std_symbol("transpose",TRANSPOSE),std_symbol("unit",UNIT),std_symbol("zero",ZERO),std_symbol("nil",NIL),std_symbol("autoexpand",AUTOEXPAND),std_symbol("bake",BAKE),std_symbol("assumeRealVariables",ASSUME_REAL_VARIABLES),std_symbol("last",LAST),std_symbol("lastprint",LAST_PRINT),std_symbol("last2dasciiprint",LAST_2DASCII_PRINT),std_symbol("lastfullprint",LAST_FULL_PRINT),std_symbol("lastlatexprint",LAST_LATEX_PRINT),std_symbol("lastlistprint",LAST_LIST_PRINT),std_symbol("lastplainprint",LAST_PLAIN_PRINT),std_symbol("trace",TRACE),std_symbol("forceFixedPrintout",FORCE_FIXED_PRINTOUT),std_symbol("maxFixedPrintoutDigits",MAX_FIXED_PRINTOUT_DIGITS),std_symbol("~",YYE),std_symbol("$DRAWX",DRAWX),std_symbol("$METAA",METAA),std_symbol("$METAB",METAB),std_symbol("$METAX",METAX),std_symbol("$SECRETX",SECRETX),std_symbol("version",VERSION),std_symbol("pi",PI),std_symbol("a",SYMBOL_A),std_symbol("b",SYMBOL_B),std_symbol("c",SYMBOL_C),std_symbol("d",SYMBOL_D),std_symbol("i",SYMBOL_I),std_symbol("j",SYMBOL_J),std_symbol("n",SYMBOL_N),std_symbol("r",SYMBOL_R),std_symbol("s",SYMBOL_S),std_symbol("t",SYMBOL_T),std_symbol("x",SYMBOL_X),std_symbol("y",SYMBOL_Y),std_symbol("z",SYMBOL_Z),std_symbol("I",SYMBOL_IDENTITY_MATRIX),std_symbol("a_",SYMBOL_A_UNDERSCORE),std_symbol("b_",SYMBOL_B_UNDERSCORE),std_symbol("x_",SYMBOL_X_UNDERSCORE),std_symbol("$C1",C1),std_symbol("$C2",C2),std_symbol("$C3",C3),std_symbol("$C4",C4),std_symbol("$C5",C5),std_symbol("$C6",C6),defineSomeHandyConstants(),l=codeGen,codeGen=!1,n=a=0,u=defn_str.length;0<=u?a<u:a>u;n=0<=u?++a:--a)t=defn_str[n],scan(t),DEBUG&&(console.log("... evaling "+t),console.log("top of stack:"),console.log(print_list(stack[tos-1]))),Eval(),pop();return codeGen=l},defineSomeHandyConstants=function(){return zero=new_integer(0),one=new_integer(1),push_double(1),one_as_double=pop(),push_symbol(POWER),DEBUG&&console.log(print_list(stack[tos-1])),push_integer(-1),DEBUG&&console.log(print_list(stack[tos-1])),push_rational(1,2),DEBUG&&console.log(print_list(stack[tos-1])),list(3),DEBUG&&console.log(print_list(stack[tos-1])),imaginaryunit=pop()},mcmp=function(t,n){return t.compare(n)},strcmp=function(t,n){return t===n?0:t>n?1:-1},doubleToReasonableString=function(t){var n,a;return codeGen?""+t:(isZeroAtomOrTensor(get_binding(symbol(FORCE_FIXED_PRINTOUT)))?(a=""+t,printMode===PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):a=a.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"*10^($1)"):a=a.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)")):(push(get_binding(symbol(MAX_FIXED_PRINTOUT_DIGITS))),n=pop_integer(),a=""+t.toFixed(n),a=a.replace(/(\.\d*?[1-9])0+$/gm,"$1"),a=a.replace(/\.0+$/gm,""),a.indexOf(".")===-1&&(a+=".0"),parseFloat(a)!==t&&(a=t.toFixed(n)+"...")),a)},clear_term=function(){},isspace=function(t){return t==null?!1:t===" "||t==="	"||t===`
`||t==="\v"||t==="\f"||t==="\r"},isdigit=function(t){return t==null?!1:/^\d+$/.test(t)},isalpha=function(t){return t==null?!1:t.search(/[^A-Za-z]/)===-1},isalphaOrUnderscore=function(t){return t==null?!1:t.search(/[^A-Za-z_]/)===-1},isalnumorunderscore=function(t){return t==null?!1:isalphaOrUnderscore(t)||isdigit(t)},count=function(t){var n;if(iscons(t))for(n=0;iscons(t);)n+=count(car(t))+1,t=cdr(t);else n=1;return n},countOccurrencesOfSymbol=function(t,n){var a;if(a=0,iscons(n))for(;iscons(n);)a+=countOccurrencesOfSymbol(t,car(n)),n=cdr(n);else equal(t,n)&&(a=1);return a},countsize=function(t){var n,a,l,u;if(l=0,istensor(t))for(n=a=0,u=t.tensor.nelem;0<=u?a<u:a>u;n=0<=u?++a:--a)l+=t.tensor.elem[n];else if(iscons(t))for(;iscons(t);)l+=count(car(t))+1,t=cdr(t);else l=1;return l},stop=function(t){var n;throw errorMessage+="Stop: ",errorMessage+=t,n=errorMessage,errorMessage="",moveTos(0),new Error(n)},findDependenciesInScript=function(t,n){var a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn,Cn,ex,ix,ax,ox,lx,cx,dx,hx,fx,ux,gx,yx,_x,vx,bx,xx,Sx,Ax,Cx,Tx,Px,Fx,Mx,Dx,Ox,Lx,Nx,Gx,Ux,Hx,Vx,zx,rE,Zx;for(DEBUG&&console.log("stringToBeParsed: "+t),Ux=new Date().getTime(),codeGen=!0,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,cn=0,l="",a="",ux=0,d={affectsVariables:[],affectedBy:[]},Lx=t;;){try{errorMessage="",check_stack(),DEBUG&&console.log("findDependenciesInScript: scanning"),ux=scan(t.substring(cn)),DEBUG&&console.log("scanned"),pop(),check_stack()}catch(eE){Ct=eE,PRINTOUTRESULT&&console.log(Ct),errorMessage=Ct+"",reset_after_error();break}if(ux===0)break;cn+=ux}Gx="",DEBUG&&console.log("all local dependencies ----------------"),Gx+="All local dependencies: ";for(gn in symbolsDependencies){for(rE=symbolsDependencies[gn],DEBUG&&console.log("variable "+gn+" depends on: "),d.affectsVariables.push(gn),Gx+=" variable "+gn+" depends on: ",Cn=0,ex=rE.length;Cn<ex;Cn++)tn=rE[Cn],DEBUG&&console.log("    "+tn),tn[0]!=="'"&&d.affectedBy.push(tn),Gx+=tn+", ";Gx+="; "}for(Gx+=". ",DEBUG&&console.log("Symbols with reassignments ----------------"),Gx+="Symbols with reassignments: ",fx=0,ix=symbolsHavingReassignments.length;fx<ix;fx++)gn=symbolsHavingReassignments[fx],d.affectedBy.indexOf(gn)===-1&&(d.affectedBy.push(gn),Gx+=gn+", ");for(Gx+=". ",DEBUG&&console.log("Symbols in expressions without assignments ----------------"),Gx+="Symbols in expressions without assignments: ",gx=0,ax=symbolsInExpressionsWithoutAssignments.length;gx<ax;gx++)gn=symbolsInExpressionsWithoutAssignments[gx],d.affectedBy.indexOf(gn)===-1&&(d.affectedBy.push(gn),Gx+=gn+", ");if(Gx+=". ",d.affectedBy.push("PATTERN_DEPENDENCY"),patternHasBeenFound&&(d.affectsVariables.push("PATTERN_DEPENDENCY"),Gx+=" - PATTERN_DEPENDENCY inserted - "),DEBUG&&console.log("All dependencies recursively ----------------"),Gx+="All dependencies recursively: ",Ox=["",""],en="",Cx="",errorMessage===""&&!n){try{l="",a="",Ox=run(t,!0),l="",a=""}catch(eE){Ct=eE,PRINTOUTRESULT&&console.log(Ct),errorMessage=Ct+"",init()}if(errorMessage==="")for(gn in symbolsDependencies){for(codeGen=!0,DEBUG&&console.log("  variable "+gn+" is: "+get_binding(usr_symbol(gn)).toString()),codeGen=!1,DEBUG&&console.log("  variable "+gn+" depends on: "),Gx+=" variable "+gn+" depends on: ",Tx=[],Zx=[],c=[],recursiveDependencies(gn,Tx,[],Zx,[],c),_x=0,ox=Zx.length;_x<ox;_x++)tn=Zx[_x],DEBUG&&console.log("    --> cycle through "+tn);for(Sx=0,lx=Tx.length;Sx<lx;Sx++)tn=Tx[Sx],DEBUG&&console.log("    "+tn),Gx+=tn+", ";for(Gx+="; ",Ax=0,cx=c.length;Ax<cx;Ax++)tn=c[Ax],Gx+=" "+tn+", ";for(DEBUG&&console.log("  code generation:"+gn+" is: "+get_binding(usr_symbol(gn)).toString()),push(get_binding(usr_symbol(gn))),Fx=[],Mx=[],Dx=0,dx=Tx.length;Dx<dx;Dx++)Q=Tx[Dx],Q[0]==="'"&&(p=Q.substring(1),bx=usr_symbol(p),yx=usr_symbol("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+p),Fx.push(bx),Mx.push(yx),push(bx),push(yx),subst(),DEBUG&&console.log("after substitution: "+stack[tos-1]));try{simplifyForCodeGeneration()}catch(eE){Ct=eE,PRINTOUTRESULT&&console.log(Ct),errorMessage=Ct+"",init()}for(on=Nx=0,Px=Fx.length;0<=Px?Nx<Px:Nx>Px;on=0<=Px?++Nx:--Nx)push(Mx[on]),push(Fx[on]),subst();if(clearRenamedVariablesToAvoidBindingToExternalScope(),errorMessage===""){if(Hx=pop(),zx=[],collectUserSymbols(Hx,zx),l="",a="",codeGen=!0,ar=Hx.toString(),codeGen=!1,vx=printMode,printMode=PRINTMODE_LATEX,u=Hx.toString(),printMode=vx,Zx.indexOf(gn)!==-1)en+="// "+gn+" is part of a cyclic dependency, no code generated.",Cx+="#"+gn+" is part of a cyclic dependency, no code generated.";else if(zx=zx.filter(function(eE){return predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(eE+"")===-1}),zx=zx.filter(function(eE){return Tx.indexOf(eE+"")!==-1||Tx.indexOf("'"+eE)!==-1}),zx.length!==0){for(xx="(",Vx=0,hx=zx.length;Vx<hx;Vx++)tn=zx[Vx],tn.printname!==gn&&(xx+=tn.printname+", ");xx=xx.replace(/, $/gm,""),xx+=")",en+=gn+" = function "+xx+" { return ( "+ar+" ); }",Cx+=gn+xx+" = "+u}else en+=gn+" = "+ar+";",Cx+=gn+" = "+u;en+=`
`,Cx+=`
`,DEBUG&&console.log("    "+en)}}}return en=en.replace(/\n$/gm,""),Cx=Cx.replace(/\n$/gm,""),symbolsDependencies={},symbolsHavingReassignments=[],patternHasBeenFound=!1,symbolsInExpressionsWithoutAssignments=[],DEBUG&&console.log("testable string: "+Gx),TIMING_DEBUGS&&console.log("findDependenciesInScript time for: "+Lx+" : "+(new Date().getTime()-Ux)+"ms"),[Gx,Ox[0],en,Cx,Ox[1],errorMessage,d]},recursiveDependencies=function(t,n,a,l,u,c){var p,d,Q,Ct,ar,en,tn,on;if(a.push(t),symbolsDependencies[u[u.length-1]]!=null&&symbolsDependencies[u[u.length-1]].indexOf("'"+t)!==-1)return DEBUG&&console.log("can't keep following the chain of "+t+" because it's actually a variable bound to a parameter"),n.indexOf("'"+t)===-1&&n.indexOf(t)===-1&&n.push(t),n;if(u.push(t),symbolsDependencies[t]==null)return n.indexOf(t)===-1&&n.push(t),n;for(on=symbolsDependencies[t],Ct=0,ar=on.length;Ct<ar;Ct++)if(d=on[Ct],u.indexOf(d)!==-1){for(DEBUG&&console.log("  found cycle:"),p="",tn=0,en=u.length;tn<en;tn++)Q=u[tn],l.indexOf(Q)===-1&&l.push(Q),DEBUG&&console.log(Q+" --> "),p+=Q+" --> ";DEBUG&&console.log(" ... then "+d+" again"),p+=" ... then "+d+" again",c.push(p),l.indexOf(d)===-1&&l.push(d)}else recursiveDependencies(d,n,a,l,u,c),u.pop();return n},inited=!1,latexErrorSign="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}",turnErrorMessageToLatex=function(t){return t=t.replace(/\n/g,""),t=t.replace(/_/g,"} \\_ \\text{"),t=t.replace(new RegExp(String.fromCharCode(transpose_unicode),"g"),"}{}^{T}\\text{"),t=t.replace(new RegExp(String.fromCharCode(dotprod_unicode),"g"),"}\\cdot \\text{"),t=t.replace("Stop:","}  \\quad \\text{Stop:"),t=t.replace("->","}  \\rightarrow \\text{"),t=t.replace("?","}\\enspace "+latexErrorSign+" \\enspace  \\text{"),t="$$\\text{"+t.replace(/\n/g,"")+"}$$",t},normaliseDots=function(t){return t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("\uD800","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t},TIMING_DEBUGS=!1,run=function(t,n=!1){var a,l,u,c,p,d,Q,Ct,ar,en,tn;if(en=new Date().getTime(),t=normaliseDots(t),t==="selftest"){selftest();return}for(inited||(inited=!0,init()),Q=0,d=0,l="",a="";;){try{errorMessage="",check_stack(),Q=scan(t.substring(d)),p1=pop(),check_stack()}catch(on){p=on,PRINTOUTRESULT&&console.log(p),l+=p.message,n&&(ar=turnErrorMessageToLatex(p.message),a+=ar),reset_after_error();break}if(Q===0)break;d+=Q,push(p1);try{stringsEmittedByUserPrintouts="",top_level_eval(),p2=pop(),check_stack(),isstr(p2)&&(DEBUG&&console.log(p2.str),DEBUG&&console.log(`
`)),p2===symbol(NIL)?(c=stringsEmittedByUserPrintouts,n&&(u="$$"+stringsEmittedByUserPrintouts+"$$")):(c=print_expr(p2),c+=`
`,n&&(u="$$"+collectLatexStringFromReturnValue(p2)+"$$",DEBUG&&console.log("collectedLatexResult: "+u))),l+=c,n&&(a+=u),PRINTOUTRESULT&&(DEBUG&&console.log("printline"),DEBUG&&console.log(c)),PRINTOUTRESULT&&(DEBUG&&console.log("display:"),print2dascii(p2)),n&&(a+=`
`)}catch(on){p=on,c=p.message,n&&(u=turnErrorMessageToLatex(p.message)),PRINTOUTRESULT&&console.log(c),l+=c,c!==""&&(l+=`
`),n&&(a+=u,a+=`
`),init()}}return l[l.length-1]===`
`&&(l=l.substring(0,l.length-1)),n&&a[a.length-1]===`
`&&(a=a.substring(0,a.length-1)),n?(DEBUG&&console.log("allReturnedLatexStrings: "+a),Ct=[l,a]):Ct=l,TIMING_DEBUGS&&(tn="run time on: "+t+" : "+(new Date().getTime()-en)+"ms",console.log(tn)),l="",a="",Ct},check_stack=function(){if(tos!==0){debugger;stop("stack error")}if(frame!==TOS){debugger;stop("frame error")}if(chainOfUserSymbolsNotFunctionsBeingEvaluated.length!==0){debugger;stop("symbols evaluation still ongoing?")}if(evaluatingAsFloats!==0){debugger;stop("numeric evaluation still ongoing?")}if(evaluatingPolar!==0){debugger;return stop("evaluation of polar still ongoing?")}},top_level_eval=function(){var t,n,a;if(DEBUG&&console.log("#### top level eval"),trigmode=0,a=symbol(AUTOEXPAND),isZeroAtomOrTensor(get_binding(a))?expanding=0:expanding=1,n=top(),Eval(),t=top(),t!==symbol(NIL)&&(set_binding(symbol(LAST),t),isZeroAtomOrTensor(get_binding(symbol(BAKE)))||(bake(),t=top()),!((n===symbol(SYMBOL_I)||n===symbol(SYMBOL_J))&&isimaginaryunit(t)))){if(isimaginaryunit(get_binding(symbol(SYMBOL_J))))return push(imaginaryunit),push_symbol(SYMBOL_J),subst();if(isimaginaryunit(get_binding(symbol(SYMBOL_I))))return push(imaginaryunit),push_symbol(SYMBOL_I),subst()}},check_esc_flag=function(){if(esc_flag)return stop("esc key")},clearAlgebraEnvironment=function(){return do_clearall()},computeDependenciesFromAlgebra=function(t){var n,a,l,u,c,p,d;if(DEBUG&&console.log("computeDependenciesFromAlgebra!!!"),a=!0,t=normaliseDots(t),!a){for(userSimplificationsInListForm=[],d="",l=0,u=userSimplificationsInListForm.length;l<u;l++)n=userSimplificationsInListForm[l],d+="silentpattern("+car(n)+","+car(cdr(n))+","+car(cdr(cdr(n)))+`)
`;do_clearall(),t=d+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}if(DEBUG){for(console.log("computeDependenciesFromAlgebra: patterns in the list --------------- "),p=0,c=userSimplificationsInListForm.length;p<c;p++)n=userSimplificationsInListForm[p],console.log(car(n)+","+cdr(n)+")");console.log("...end of list --------------- ")}return findDependenciesInScript(t,!0)[6]},computeResultsAndJavaScriptFromAlgebra=function(t){var n,a,l,u,c,p,d,Q,Ct,ar,en,tn,on,cn,gn;if(u=!0,cn=new Date().getTime(),TIMING_DEBUGS&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+t+" at: "+new Date),t=normaliseDots(t),tn=t,DEBUG){for(console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- "),c=0,d=userSimplificationsInListForm.length;c<d;c++)l=userSimplificationsInListForm[c],console.log(car(l)+","+cdr(l)+")");console.log("...end of list --------------- ")}if(!u){for(userSimplificationsInListForm=[],gn="",Ct=0,Q=userSimplificationsInListForm.length;Ct<Q;Ct++)l=userSimplificationsInListForm[Ct],gn+="silentpattern("+car(l)+","+car(cdr(l))+","+car(cdr(cdr(l)))+`)
`;do_clearall(),t=gn+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}return[on,en,n,ar,p,errorMessage,a]=findDependenciesInScript(t),(ar!==""||errorMessage!=="")&&(en+=`
`+ar,errorMessage!==""&&(en+=`
`+errorMessage),en=en.replace(/\n/g,`

`),p+=`
$$`+ar+"$$",errorMessage!==""&&(p+=turnErrorMessageToLatex(errorMessage)),p=p.replace(/\n/g,`

`)),p=p.replace(/\n*/,""),p=p.replace(/\$\$\$\$\n*/g,""),n=n.replace(/Math\./g,""),n=n.replace(/\n/g,`

`),TIMING_DEBUGS&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+tn+" : "+(new Date().getTime()-cn)+"ms"),{code:n,result:p,latexResult:p,dependencyInfo:a}},(exports!==null?exports:this).run=run,(exports!==null?exports:this).findDependenciesInScript=findDependenciesInScript,(exports!==null?exports:this).computeDependenciesFromAlgebra=computeDependenciesFromAlgebra,(exports!==null?exports:this).computeResultsAndJavaScriptFromAlgebra=computeResultsAndJavaScriptFromAlgebra,(exports!==null?exports:this).clearAlgebraEnvironment=clearAlgebraEnvironment,tos=0,nil_symbols=0,push=function(t){if(t==null)debugger;if(t.isZero!=null)debugger;return t===symbol(NIL)&&(nil_symbols++,DEBUG&&console.log("pushing symbol(NIL) #"+nil_symbols)),tos>=frame&&stop("stack overflow"),stack[tos++]=t},moveTos=function(t){if(tos<=t){tos=t;return}for(;tos>t;)stack[tos]=null,tos--},top=function(){return stack[tos-1]},pop=function(){var t;if(tos===0){debugger;stop("stack underflow")}if(stack[tos-1]==null)debugger;return t=stack[--tos],stack[tos]=null,t},push_frame=function(t){var n,a,l,u;if(n=0,frame-=t,frame<tos){debugger;stop("frame overflow, circular reference?")}for(u=[],n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)u.push(stack[frame+n]=symbol(NIL));return u},pop_frame=function(t){if(frame+=t,frame>TOS)return stop("frame underflow")},save=function(){if(frame-=10,frame<tos){debugger;stop("frame overflow, circular reference?")}return stack[frame+0]=p0,stack[frame+1]=p1,stack[frame+2]=p2,stack[frame+3]=p3,stack[frame+4]=p4,stack[frame+5]=p5,stack[frame+6]=p6,stack[frame+7]=p7,stack[frame+8]=p8,stack[frame+9]=p9},restore=function(){return frame>TOS-10&&stop("frame underflow"),p0=stack[frame+0],p1=stack[frame+1],p2=stack[frame+2],p3=stack[frame+3],p4=stack[frame+4],p5=stack[frame+5],p6=stack[frame+6],p7=stack[frame+7],p8=stack[frame+8],p9=stack[frame+9],frame+=10},swap=function(){var t,n;return t=pop(),n=pop(),push(t),push(n)},dupl=function(){var t;return t=pop(),push(t),push(t)},$.dupl=dupl,$.swap=swap,$.restore=restore,$.save=save,$.push=push,$.pop=pop,Eval_symbolsinfo=function(){var t;return t=symbolsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},symbolsinfo=function(){var t,n,a,l,u,c,p;for(c="",n=a=l=NIL+1,u=symtab.length;l<=u?a<u:a>u;n=l<=u?++a:--a){if(symtab[n].printname===""){if(isSymbolReclaimable[n]===!1)break;continue}p=symtab[n]+"",t=(binding[n]+"").substring(0,4),c+="symbol: "+p+" size: "+countsize(binding[n])+" value: "+t+`...
`}return c},std_symbol=function(t,n,a){var l;if(l=symtab[n],l==null)debugger;return l.printname=t,a!=null?l.latexPrint=a:l.latexPrint=t},usr_symbol=function(t){var n,a,l;for(n=0,n=a=0,l=NSYM;0<=l?a<l:a>l;n=0<=l?++a:--a){if(t===symtab[n].printname)return symtab[n];if(symtab[n].printname==="")break}return n===NSYM&&stop("symbol table overflow"),symtab[n]=new U,symtab[n].k=SYM,symtab[n].printname=t,binding[n]=symtab[n],isSymbolReclaimable[n]=!1,symtab[n]},get_printname=function(t){return t.k!==SYM&&stop("symbol error"),t.printname},set_binding=function(t,n){var a;if(t.k!==SYM&&stop("symbol error"),a=symtab.indexOf(t),symtab.indexOf(t,a+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> set_binding lookup "+a),isSymbolReclaimable[a]=!1,binding[a]=n},get_binding=function(t){var n;if(t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> get_binding lookup "+n),binding[n]},is_usr_symbol=function(t){var n;return t.k!==SYM?!1:(n=symnum(t),n>PI&&n!==SYMBOL_I&&n!==SYMBOL_IDENTITY_MATRIX)},lookupsTotal=0,symnum=function(t){var n;if(lookupsTotal++,t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> symnum lookup "+n+" lookup # "+lookupsTotal),n},push_symbol=function(t){return push(symtab[t])},clear_symbols=function(){var t,n,a,l,u;for(u=[],t=n=a=NIL+1,l=NSYM;a<=l?n<l:n>l;t=a<=l?++n:--n){if(symtab[t].printname===""){if(isSymbolReclaimable[t]===!1)break;continue}symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],u.push(isSymbolReclaimable[t]=!1)}return u},collectUserSymbols=function(t,n=[]){var a,l,u;if(is_usr_symbol(t)&&n.indexOf(t)===-1){n.push(t);return}if(istensor(t)){for(a=l=0,u=t.tensor.nelem;0<=u?l<u:l>u;a=0<=u?++l:--l)collectUserSymbols(t.tensor.elem[a],n);return}for(;iscons(t);)collectUserSymbols(car(t),n),t=cdr(t)},$.get_binding=get_binding,$.set_binding=set_binding,$.usr_symbol=usr_symbol,$.symbolsinfo=symbolsinfo,$.collectUserSymbols=collectUserSymbols,inited||(inited=!0,init()),$.init=init,parse_internal=function(t){return typeof t=="string"?scan(t):typeof t=="number"?t%1===0?push_integer(t):push_double(t):t instanceof U?push(t):(console.warn("unknown argument type",t),push(symbol(NIL)))},parse=function(t){var n,a;try{parse_internal(t),n=pop(),check_stack()}catch(l){throw a=l,reset_after_error(),a}return n},exec=function(t,...n){var a,l,u,c,p,d;for(u=get_binding(usr_symbol(t)),check_stack(),push(u),c=0,p=n.length;c<p;c++)a=n[c],parse_internal(a);list(1+n.length),p1=pop(),push(p1);try{top_level_eval(),d=pop(),check_stack()}catch(Q){throw l=Q,reset_after_error(),l}return d},$.exec=exec,$.parse=parse,function(){var t,n,a,l,u;for(t=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"],u=[],a=0,l=t.length;a<l;a++)n=t[a],u.push($[n]=exec.bind(this,n));return u}()}).call(algebrite)}(algebrite)),algebrite}var algebriteExports=requireAlgebrite();function nthRoot(t,n){if(typeof t!="bigint"||typeof n!="number"||Math.floor(n)!==n||n<1||n>Number.MAX_SAFE_INTEGER)throw new RangeError;if(n===1)return t;const a=Number(t+0n);if(a===0)return 0n;if(a<0){if(n%2===0)throw new RangeError;return-BigInt(nthRoot(-t,n))}const l=Number.MAX_SAFE_INTEGER+1,u=Math.floor(l/(n===2?2:Math.pow(2,1+Math.ceil(Math.log2(Math.log2(l))))));if(a<u){const ar=Math.floor(n===2?Math.sqrt(a+.5):Math.exp(Math.log(a+.5)/n));return BigInt(ar)}const c=n===2?Math.sqrt(a):Math.exp(Math.log(a)/n);if(c<u){if(Math.floor(c-c/u)===Math.floor(c+c/u))return BigInt(Math.floor(c));const ar=BigInt(Math.floor(c+.5));return t<ar**BigInt(n)?ar-1n:ar}const p=t.toString(16).length*4;if(p<=n)return 1n;const d=Math.floor((Math.floor(p/n)+1)/2);let Q=BigInt(nthRoot(t>>BigInt(d*n),n))+1n<<BigInt(d),Ct=-1n;do Ct=Q,n===2?Q=Q+t/Q>>1n:Q=(BigInt(n-1)*Q+t/Q**BigInt(n-1))/BigInt(n);while(Q<Ct);return Ct}function BitSet(t){const n=Math.ceil(t/256)*8;this.data=new Uint32Array(n),this.data64=new BigUint64Array(this.data.buffer),this.size=t}BitSet.prototype.nextSetBit=function(t){if((t|0)>=(this.size|0))return-1;const n=this.data;let a=t>>5,l=t&31;for(;n[a]>>l===0;){if(a+=1,a===n.length)return-1;l=0}return l+=31-Math.clz32(n[a]>>l&-(n[a]>>l)),a*32+l};BitSet.prototype.toggle=function(t){if((t|0)>=(this.size|0))throw new RangeError;this.data[t>>5]^=1<<(t&31)};BitSet.prototype.xor=function(t){const n=this.data64,a=t.data64,l=n.length|0;if(l!==a.length||l%2!==0)throw new RangeError;for(let u=0;u<l;u+=2)n[u+0]^=a[u+0],n[u+1]^=a[u+1]};BitSet.prototype.clear=function(){for(let t=0;t<this.data.length;t+=1)this.data[t]=0};BitSet.prototype.toString=function(){return this.data.map(t=>(t>>>0).toString(2).padStart(32,"0").split("").reverse().join("")).join("").slice(0,this.size)};function solve(t,n=!1){const a=new Array(t).fill(null),l=new Array(t).fill(void 0);let u=null,c=1;const p={next:function(Q){for(;;){if(c===1)return c=0,{value:u,done:!1};c=1;const Ct=Q[0],ar=Q[1];let en=null;if(n)en=Ct;else{en=new BitSet(t);for(let tn=0;tn<Ct.length;tn++){const on=Ct[tn],cn=t-1-on;en.toggle(cn)}}for(let tn=en.nextSetBit(0);tn!==-1&&en!=null;tn=en==null?-1:en.nextSetBit(tn+1)){const on=a[tn];on!=null?(en.xor(on),en.toggle(tn)):(l[tn]=ar,a[tn]=en,en=null)}if(en!=null){const tn=[];for(let on=en.nextSetBit(0);on!==-1;on=en.nextSetBit(on+1))tn.push(l[on]);tn.push(ar),u=tn}else u=null}}};return p[globalThis.Symbol.iterator]=function(){return this},p}function SparseGF2Matrix(t,n){this.rows=new Array(t).fill(null),this.columns=new Array(n).fill(null).map(a=>[])}SparseGF2Matrix.prototype.addRow=function(t,n){function a(u){const c=u.slice(0);c.sort((d,Q)=>d-Q);let p=-1;for(let d=0;d<c.length;d++)d===0||c[p]!==c[d]?(p+=1,c[p]=c[d]):p-=1;return c.slice(0,p+1)}const l=a(t);this.rows[n]=l;for(let u=0;u<l.length;u++)this.columns[l[u]].push(n)};SparseGF2Matrix.prototype.deleteColumn=function(t){const n=this.columns[t];if(n!=null){for(let a=0;a<n.length;a++){let l=n[a];const u=this.rows[l].indexOf(t);console.assert(u!==-1),this.rows[l].splice(u,1)}this.columns[t]=null}};SparseGF2Matrix.prototype.deleteRow=function(t){const n=this.rows[t];if(n!=null){for(let a=0;a<n.length;a++){const l=n[a];this.columns[l]=this.columns[l].filter(u=>u!=t)}this.rows[t]=null}};SparseGF2Matrix.prototype.reduce=function(t,n){const a=this.rows[t];console.assert(a.length===1);const l=a[0],u=this.columns[l];for(let c=u.length-1;c>=0;c--)if(u[c]!==t){const p=u[c],d=this.rows[p],Q=d.indexOf(l);console.assert(Q!==-1),d.splice(Q,1),u.splice(c,1),n.push({a:p,b:t})}console.assert(u.length===1&&u[0]===t),this.columns[l]=null,this.rows[t]=null};function sparseSolve(t){if(t<1024*2)return solve(t);function n(on,cn){return on.sort((gn,Cn)=>gn-Cn),on[Math.max(on.length-cn,0)]}function a(on,cn){const gn=on.columns.map(ex=>ex==null?0:ex.length),Cn=n(gn,cn);for(let ex=0;ex<on.columns.length;ex++){const ix=on.columns[ex];ix!=null&&ix.length>=Cn&&on.deleteColumn(ex)}}function l(on,cn){const gn=[];for(let Cn=0;Cn<on.rows.length;Cn++){const ex=on.rows[Cn];ex!=null&&ex.length===1&&gn.push(Cn)}for(let Cn=0;Cn<gn.length;Cn++){const ex=gn[Cn],ix=on.rows[ex];ix!=null&&ix.length===1?(on.reduce(ex,p),cn[ix[0]]=!0):console.assert(ix!=null&&ix.length===0)}return gn.length}const u=[],c=[],p=[];let d=null,Q=null,Ct=-1;function ar(){const cn=new SparseGF2Matrix(u.length,t);for(let fx=0;fx<u.length;fx++)cn.addRow(u[fx].filter(ux=>ux>=2585),fx);const gn=new Array(t).fill(!1),Cn=128;let ex=-1;do{ex=cn.columns.reduce((ux,gx)=>ux+(gx==null?0:1),0);const fx=Math.ceil(cn.rows.length/Cn)-l(cn,gn);fx>0&&a(cn,fx)}while(ex>0);const ix=new Array(t).fill(0);let ax=0;for(let fx=0;fx<cn.columns.length;fx++)gn[fx]?ix[fx]=-1:(ix[fx]=ax,ax+=1);const ox=ax,lx=[];function cx(fx){let ux=null;lx.length>0?(ux=lx.pop(),ux.clear()):ux=new BitSet(ox);for(let gx=0;gx<fx.length;gx++){const yx=ix[fx[gx]];yx!==-1&&ux.toggle(ox-1-yx)}return ux}d=u.map(fx=>null);const dx=cn.rows.map(fx=>fx!=null?1/0:-1);for(let fx=p.length-1;fx>=0;fx-=1)dx[p[fx].a]!==-1?dx[p[fx].b]===-1&&(dx[p[fx].b]=fx):p[fx]=null;const hx=function(fx,ux){return d[fx]==null&&(console.assert(dx[fx]>=ux),d[fx]=cx(u[fx])),d[fx]};for(let fx=0;fx<p.length;fx++)p[fx]!=null&&(hx(p[fx].a,fx).xor(hx(p[fx].b,fx)),dx[p[fx].b]<=fx&&(lx.push(d[p[fx].b]),d[p[fx].b]=null));for(let fx=0;fx<cn.rows.length;fx++)cn.rows[fx]!=null?(console.assert(cn.rows[fx].length===0),d[fx]=hx(fx,1/0)):d[fx]=null;Q=solve(ox,!0),Q.next()}let en=!0;const tn={next:function(cn){if(en)return en=!1,{value:null,done:!1};if(Q==null){if(u.length<t+32)return u.push(cn[0]),c.push(cn[1]),{value:null,done:!1};ar()}for(let gn=Ct+1;gn<d.length;gn++){Ct=gn;const Cn=d[gn];if(Cn!=null){const ex=Q.next([Cn,gn]).value;if(ex!=null){const ix=new Array(u.length).fill(0);for(let ox=0;ox<ex.length;ox++){if(ix[ex[ox]]!==0)throw new RangeError;ix[ex[ox]]=1}for(let ox=p.length-1;ox>=0;ox--)p[ox]!=null&&ix[p[ox].a]===1&&(ix[p[ox].b]=1-ix[p[ox].b]);const ax=[];for(let ox=0;ox<ix.length;ox++)ix[ox]===1&&ax.push(c[ox]);return{value:ax,done:!1}}}}}};return tn[globalThis.Symbol.iterator]=function(){return this},tn}solve.solve=solve;solve.sparseSolve=sparseSolve;sparseSolve.solve=solve;sparseSolve.sparseSolve=sparseSolve;function modPowSmall$1(t,n,a){let l=1;for(;n!==0;)n%2===0?(n/=2,t=t*t,t=t-Math.floor(t/a)*a):(n-=1,l=l*t,l=l-Math.floor(l/a)*a);return l}function legendre$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,l=0;t!==0;){for(;(t&1)===0;)t>>=1,l=n&7,(l===3||l===5)&&(a=-a);l=n,n=t,t=l,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function sqrtMod(t,n){if(console.assert(n*n<=Number.MAX_SAFE_INTEGER),legendre$1(t,n)!==1)return-1;let a=n-1,l=0;for(;a%2===0;)a/=2,l+=1;if(l===1)return modPowSmall$1(t,(n+1)/4,n);let u=2;for(;u<=n&&legendre$1(u,n)!==-1;)u+=1;let c=modPowSmall$1(u,a,n),p=modPowSmall$1(t,(a+1)/2,n),d=modPowSmall$1(t,a,n),Q=l,Ct=0;for(;(d-1)%n!==0;){Ct=d*d%n;let ar=1;for(;ar<=Q&&(Ct-1)%n!==0;)Ct=Ct*Ct%n,ar+=1;const en=modPowSmall$1(c,1<<Q-ar-1,n);p=p*en%n,c=en*en%n,d=d*c%n,Q=ar}return p}const wasmCode$2=new Uint8Array([0,97,115,109,1,0,0,0,1,28,4,96,2,126,126,1,126,96,4,126,126,126,126,1,126,96,3,126,126,127,1,126,96,2,126,127,1,126,3,5,4,0,1,2,3,7,29,2,9,103,99,100,66,105,110,97,114,121,0,0,13,80,111,108,108,97,114,100,115,82,104,111,54,52,0,3,10,246,6,4,98,2,2,126,1,127,32,0,80,4,64,32,1,15,11,32,1,80,4,64,32,0,15,11,32,0,32,1,132,122,33,3,32,0,32,0,122,136,33,0,32,1,32,1,122,136,33,1,3,64,32,1,32,0,125,32,0,32,1,125,32,0,32,1,84,34,4,27,33,2,32,0,32,1,32,4,27,33,1,32,2,32,2,122,136,34,0,66,0,82,13,0,11,32,1,32,3,134,11,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,160,4,2,8,126,5,127,32,0,33,4,65,2,33,13,3,64,32,13,65,192,0,72,4,64,32,4,66,2,32,0,32,4,126,125,126,33,4,32,13,32,13,106,33,13,12,1,11,11,32,4,33,6,66,2,33,7,66,127,32,0,130,66,1,124,33,4,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,4,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,4,32,0,32,4,125,34,8,125,32,0,66,0,32,4,32,8,84,27,124,33,4,32,7,66,1,136,33,7,12,1,11,11,66,127,32,0,130,66,1,124,33,7,3,64,32,1,66,0,82,4,64,32,1,66,1,131,167,4,64,32,5,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,5,86,27,124,33,5,11,32,7,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,7,86,27,124,33,7,32,1,66,1,136,33,1,12,1,11,11,65,1,33,13,66,1,33,4,32,3,33,1,3,64,32,2,32,11,79,4,64,32,1,33,7,3,64,32,1,32,1,32,0,32,6,16,1,34,1,32,0,32,5,125,34,8,125,32,0,66,0,32,1,32,8,84,27,124,33,1,32,11,65,1,106,34,11,32,13,65,3,108,65,2,118,77,4,126,66,1,33,4,32,11,33,12,32,1,5,32,7,32,1,125,32,1,32,7,125,32,1,32,7,84,27,33,8,32,4,66,1,81,4,126,32,8,5,32,4,32,8,32,0,32,6,16,1,11,33,4,32,11,65,255,0,113,69,32,11,32,13,70,114,32,14,114,4,126,2,126,32,0,32,4,80,13,0,26,32,4,32,0,80,13,0,26,32,0,32,4,132,122,33,9,32,4,32,4,122,136,33,8,32,0,32,0,122,136,33,4,3,64,32,4,32,8,125,32,8,32,4,125,32,4,32,8,86,34,15,27,33,10,32,8,32,4,32,15,27,33,4,32,10,32,10,122,136,34,8,66,0,82,13,0,11,32,4,32,9,134,11,34,4,66,1,82,4,64,32,0,32,4,82,4,64,32,4,15,11,32,14,4,64,32,0,15,11,65,1,33,14,32,12,33,11,32,3,33,1,11,66,1,33,4,32,11,33,12,32,1,5,32,3,11,11,33,3,32,11,32,13,71,13,0,11,32,13,65,1,116,33,13,12,1,11,11,66,0,11,63,1,2,126,32,0,66,2,88,4,64,66,0,15,11,32,0,66,1,131,80,4,64,66,2,15,11,3,64,32,2,66,1,124,34,2,66,42,86,4,64,66,0,15,11,32,0,32,2,32,1,16,2,34,3,32,0,81,13,0,11,32,3,11]),wasmModule$2=new WebAssembly.Module(wasmCode$2),exports$1=new WebAssembly.Instance(wasmModule$2).exports,PollardsRho64=exports$1.PollardsRho64,wasmCode$1=new Uint8Array([0,97,115,109,1,0,0,0,1,14,2,96,4,126,126,126,126,1,126,96,1,126,1,127,3,3,2,0,1,7,21,1,17,105,115,80,114,111,98,97,98,108,121,80,114,105,109,101,54,52,0,1,10,160,5,2,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,237,3,2,10,126,2,127,32,0,66,2,84,4,64,65,0,15,11,32,0,66,1,131,80,4,64,32,0,66,2,81,15,11,32,0,66,1,125,34,5,122,33,10,32,5,32,10,136,33,9,32,0,33,5,65,2,33,11,3,64,32,11,65,192,0,72,4,64,32,5,66,2,32,0,32,5,126,125,126,33,5,32,11,32,11,106,33,11,12,1,11,11,66,1,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,2,32,0,32,6,125,34,8,125,32,0,66,0,32,2,32,8,84,27,124,33,2,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,2,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,6,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,1,33,8,66,127,32,0,130,66,1,124,33,7,32,0,33,6,3,64,32,8,66,0,82,4,64,32,8,66,1,131,167,4,64,32,1,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,1,86,27,124,33,1,11,32,7,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,7,86,27,124,33,7,32,8,66,1,136,33,8,12,1,11,11,32,1,33,0,3,64,32,9,66,0,82,4,64,32,9,66,1,131,167,4,64,32,0,32,3,32,6,32,5,16,0,33,0,11,32,9,66,1,136,33,9,32,3,32,3,32,6,32,5,16,0,33,3,12,1,11,11,3,64,32,12,172,32,10,83,4,64,32,0,32,0,32,6,32,5,16,0,34,4,32,2,81,32,0,32,2,82,113,32,0,32,6,32,2,125,82,113,4,64,65,0,15,11,32,4,33,0,32,12,65,1,106,33,12,12,1,11,11,32,2,32,4,82,4,64,65,0,15,11,65,1,11]),wasmModule$1=new WebAssembly.Module(wasmCode$1),exports=new WebAssembly.Instance(wasmModule$1).exports,isProbablyPrime64=exports.isProbablyPrime64;function modInverse$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(Number(n)<=2**30-1)return BigInt(modInverseSmall$1(Number(t),Number(n)));if(t<0n||t>=n||n<=0n)throw new RangeError;let a=t,l=n,u=1n,c=0n;for(;l!==0n;){const p=(a-a%l)/l,d=a-p*l;a=l,l=d;const Q=u-p*c;u=c,c=Q}return a!==1n?0n:u<0n?u+n:u}function modInverseSmall$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;const a=1073741823;if(t<0||t>=n||n<=0||n>a)throw new RangeError;let l=t&a,u=n&a,c=1,p=0;for(;u!==0;){const d=Math.floor(l/u),Q=l%u;l=u,u=Q;const Ct=c-d*p;c=p,p=Ct}return l!==1?0:c<0?c+n:c}function ChineseRemainderTheorem$1(t,n,a,l){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint"||typeof l!="bigint")throw new TypeError;const u=modInverse$1(a%l,l);return t+(n-t)*u%l*a}function squareRootsModuloOddPrimesProduct(t,n,a=1){let l=[];l.push(0n);let u=1n;for(let c=0;c<n.length;c+=1){const p=BigInt(Math.pow(n[c],a));if(Number(p)>Number.MAX_SAFE_INTEGER)throw new RangeError;const d=BigInt(squareRootModuloOddPrime(Number(t%p),n[c],a)),Q=[];for(let Ct=0;Ct<l.length;Ct+=1){const ar=l[Ct];Q.push(ChineseRemainderTheorem$1(ar,d,u,p)),Q.push(ChineseRemainderTheorem$1(ar,-d,u,p))}u*=p,l=Q}return l}function squareRootsModuloTwo(t,n=1){if(n>=3){if(t%8===1){const a=Math.pow(2,n),l=+squareRootsModuloTwo(t,n-1)[0],u=a/4-l,c=l*l%a!==t%a?u:l;return[c,a/2-c,a/2+c,a-c]}return[]}return n>=2?t%4===1?[1,3]:[]:n>=1?[1]:[]}function squareRootModuloOddPrime(t,n,a=1){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;const l=Math.pow(n,a);if(!(t>0&&t<l&&n>0&&n%2!==0&&a>=1&&+t%+n!==0&&l<Math.floor(Math.sqrt(Number.MAX_SAFE_INTEGER*4))))throw new RangeError;if(a>1){const c=squareRootModuloOddPrime(t%Math.pow(n,a-1),n,a-1);let p=modInverseSmall$1(2*c,l)%l,d=(t-c*c)%l;p=p>l/2?p-l:p,d=d>l/2?d-l:d;let Q=c+d*p%l;return Q>=l&&(Q-=l),Q<0&&(Q+=l),Math.min(Q,l-Q)}const u=sqrtMod(t,n)|0;return Math.min(u,n-u)}function bitLength$2(t){return t.toString(16).length*4}function sqrt(t){if(t<BigInt((Number.MAX_SAFE_INTEGER+1)/2))return BigInt(Math.floor(Math.sqrt(Number(BigInt(t))+.5)));const n=BigInt(bitLength$2(t)>>2);let l=sqrt(t>>n*2n)+1n<<n,u=l+1n;for(;l<u;)u=l,l=u+t/u>>1n;return u}function getSmoothFactorization(t,n){let a=BigInt(t);if(a===0n)return[0];const l=[];a<0n&&(l.push(-1),a=-a);let u=0;for(;u<n.length;){const c=n[u];for(;a%BigInt(c)===0n;)a/=BigInt(c),l.push(c);u+=1}return a===1n?l:null}function CongruenceOfsquareOfXminusYmoduloN(t,n,a){this.X=t,this.Y=n,this.N=a}CongruenceOfsquareOfXminusYmoduloN.prototype.toString=function(){return"X**2  Y (mod N)".replaceAll("X",this.X).replaceAll("N",this.N).replaceAll("Y",this.Y.join(" * "))};function isQuadraticResidueModuloPrime(t,n){if(typeof t!="bigint"||typeof n!="number")throw new TypeError;if(n===2)return!0;const a=Number(BigInt(t)%BigInt(n));return a===0?!0:legendre(a,n)===1}function significand(t){const n=Number(t);if(Math.abs(n)<1/0)return n/2**Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),l=Number(t>>BigInt(a));return l/2**Math.floor(Math.log2(Math.abs(l)))}function exponent(t){const n=Number(t);if(Math.abs(n)<1/0)return Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),l=Number(t>>BigInt(a));return a+Math.floor(Math.log2(Math.abs(l)))}function log2$1(t){return Math.log2(significand(t))+exponent(t)}function L$1(t){const n=log2$1(t)*Math.log(2);return Math.exp(Math.sqrt(n*Math.log(n)))}function modPow$2(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;let l=n,u=t,c=1n;for(;l!==0n;)BigInt.asUintN(1,l)===1n&&(l-=1n,c=c*u%a),l>>=1n,u=u*u%a;return c}function primes$1(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let l=3;l<=t;l+=2)if(n[l]&&(a.push(l),l<=Math.floor(t/l)))for(let u=l*l;u<=t;u+=2*l)n[u]=!1;return a}//!copy-paste
function FastModBigInt(t){const n=[];for(;t!==0n;){const a=Number(BigInt.asUintN(51,t));n.push(a),t>>=51n}return new Float64Array(n)}function FastMod(t,n,a){n=-0+n,a=-0+a;const l=t.length-1;let u=t[l];if(u=u-Math.floor(u*a)*n,l>0){const c=0x8000000000000-Math.floor(0x8000000000000*a)*n;let p=l;do p-=1,u=u*c+t[p],u=u-Math.floor(u*a)*n;while(p!==0)}return-0+u}function exp2(t){let n=Math.floor(Math.pow(2,Math.floor(t))*Math.exp(Math.LN2*(t-Math.floor(t))));return n%2===0&&(n+=1),n}function QuadraticPolynomial(t,n,a,l,u){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const c=n*n-a;if(u&&a%4n!==1n)throw new RangeError;if(c%((u?4n:1n)*t)!==0n)throw new TypeError;const p=c/(u?4n*t:t);this.A=t,this.B=n,this.C=p,this.AFactors=l;const d=significand(n)/significand(t)*Math.pow(2,exponent(n)-exponent(t)),Q=Math.sqrt(significand(a)/Math.pow(significand(t),2))*Math.pow(2,exponent(a)/2-exponent(t));this.x1=(u?1/2:1)*(-d-Q),this.x2=(u?1/2:1)*(-d+Q),this.log2a=log2$1(t),this.useQ2Form=u}QuadraticPolynomial.generator=function(t,n,a){const l=function(ix,ax){return ix.length===0?[]:ax===0?[[]]:ax===1?ix.map(ox=>[ox]):l(ix.slice(1),ax-1).map(ox=>[ix[0]].concat(ox)).concat(l(ix.slice(1),ax))},u=function(ix,ax){return Math.round(Math.pow(significand(ix),1/ax)*Math.pow(2,exponent(ix)/ax))},c=function(ix,ax){return ix<ax?ax:ix},p=a%8n===1n,d=c(1n,p?BigInt(sqrt(a/2n))/BigInt(t):BigInt(sqrt(2n*a))/BigInt(t)),Q=log2$1(d),Ct=Math.log2(n[n.length-1]),ar=2,en=Math.max(ar,Math.ceil(Q/Math.min(Q<180?14.5:Ct,Ct)/ar)*ar);console.debug("k: ",en,"useQ2Form: ",p);const tn=u(d,en);let on=0;const cn=function(){let ix=0;do if(ix=tn-tn%2+1+(on%2===0?on:-1-on),on+=1,tn+on>n[n.length-1]&&tn-on<n[0])throw new RangeError;while(indexOf$1(n,ix)===-1);return ix};let gn=[];const Cn=[],ex=[];return QuadraticSieveFactorization.polynomialsCounter=0,{next:function(){for(;Cn.length===0;){for(;gn.length===0;){const fx=[];for(let ux=0;ux<ar;ux+=1)fx.push(cn());console.assert(en%ar===0),gn=l(ex,en/ar-1).map(ux=>[fx].concat(ux)),ex.push(fx)}const ax=gn.pop().reduce((fx,ux)=>fx.concat(ux),[]),ox=BigInt(ax.reduce((fx,ux)=>fx*BigInt(ux),1n));if(modInverse$1(ox%a,a)===0n)return this.next();const cx=ox;let dx=squareRootsModuloOddPrimesProduct(a,ax,1);for(let fx=0;fx<dx.length;fx+=1)if(dx[fx]=dx[fx]<0n?dx[fx]+cx:dx[fx],dx[fx]<0n||dx[fx]>=cx)throw new Error;p&&(dx=dx.map(fx=>fx%2n===0n?fx-cx:fx)),dx=dx.slice(0,dx.length/2);const hx=p?[2,2].concat(ax):ax.slice(0);hx.sort((fx,ux)=>fx-ux);for(let fx=0;fx<dx.length;fx+=1){const ux=dx[fx];Cn.push(new QuadraticPolynomial(cx,ux,a,hx,p))}}return QuadraticSieveFactorization.polynomialsCounter+=1,Cn.shift()}}};QuadraticPolynomial.prototype.X=function(t){return this.A*BigInt((this.useQ2Form?2:1)*t)+this.B};QuadraticPolynomial.prototype.Y=function(t,n,a){if(typeof t!="number")throw new TypeError;const l=this.A*(t*t>=2**53?BigInt(t)*BigInt(t):BigInt(t*t))+this.B*BigInt((this.useQ2Form?1:2)*t)+this.C;if(n===void 0&&a===void 0)return l;if(l%n!==0n)return null;const u=getSmoothFactorization(l/n,a);return u==null?null:u.length===1&&u[0]===0?u:this.AFactors.concat(u)};QuadraticPolynomial.prototype.log2AbsY=function(t){if(typeof t!="number")throw new TypeError;return Math.log2(Math.abs((t-this.x1)*(t-this.x2)))+this.log2a};function thresholdApproximationInterval(t,n,a,l){let u=l>2048?l>262144?1024:256:1;for(;u>=2&&Math.abs(t.log2AbsY(n+u)-a)>.5;)u=Math.floor(u/2);return n+u}const wasmCode=typeof Uint8Array<"u"?new Uint8Array([0,97,115,109,1,0,0,0,1,28,3,96,8,127,127,127,127,127,127,127,127,1,127,96,2,127,127,1,127,96,6,127,127,127,127,127,127,0,2,15,1,3,101,110,118,6,109,101,109,111,114,121,2,0,0,3,5,4,0,1,2,0,7,85,4,16,115,105,110,103,108,101,66,108,111,99,107,83,105,101,118,101,0,0,15,102,105,110,100,83,109,111,111,116,104,69,110,116,114,121,0,1,24,117,112,100,97,116,101,87,104,101,101,108,115,73,110,116,101,114,110,97,108,78,101,120,116,0,2,17,104,97,110,100,108,101,83,109,97,108,108,87,104,101,101,108,115,0,3,10,154,8,4,226,1,1,4,127,32,2,32,5,106,33,8,32,0,32,4,106,33,0,32,1,32,4,106,33,1,32,2,32,4,106,33,2,32,3,32,4,65,2,117,106,33,3,3,64,32,2,32,8,71,4,64,32,0,40,2,0,33,5,32,1,40,2,0,33,4,32,2,40,2,0,33,10,32,3,45,0,0,33,11,3,64,32,4,32,6,72,4,64,32,4,45,0,0,32,11,106,33,9,32,5,32,5,45,0,0,32,11,106,58,0,0,32,4,32,9,58,0,0,32,5,32,10,106,33,5,32,4,32,10,106,33,4,12,1,11,11,32,5,32,6,72,4,64,32,5,32,5,45,0,0,32,11,106,58,0,0,32,5,32,10,106,33,9,32,4,33,5,32,9,33,4,11,32,0,32,5,32,7,107,54,2,0,32,1,32,4,32,7,107,54,2,0,32,0,65,4,106,33,0,32,1,65,4,106,33,1,32,2,65,4,106,33,2,32,3,65,1,106,33,3,12,1,11,11,65,0,11,42,1,1,123,32,0,253,15,33,2,32,1,65,16,107,33,1,3,64,32,1,65,16,106,34,1,253,0,4,0,32,2,253,44,253,100,69,13,0,11,32,1,11,173,1,2,5,123,1,127,32,5,253,17,33,6,3,64,32,11,32,0,65,2,116,72,4,64,32,3,32,3,253,0,4,0,34,8,32,1,253,0,4,0,34,7,32,6,253,177,1,32,7,32,6,253,55,32,2,253,0,4,0,34,9,253,78,253,174,1,34,7,253,177,1,32,8,32,7,253,57,32,9,253,78,253,174,1,34,8,32,4,253,0,4,0,34,10,32,7,253,177,1,32,10,32,7,253,57,32,9,253,78,253,174,1,34,7,253,182,1,253,11,4,0,32,4,32,8,32,7,253,184,1,253,11,4,0,32,1,65,16,106,33,1,32,2,65,16,106,33,2,32,3,65,16,106,33,3,32,4,65,16,106,33,4,32,11,65,16,106,33,11,12,1,11,11,11,217,4,2,10,127,5,123,32,6,32,7,70,4,64,0,11,32,5,33,8,3,64,32,13,32,0,65,2,116,72,4,64,32,1,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,1,253,0,4,16,65,16,253,171,1,253,80,33,20,32,2,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,2,253,0,4,16,65,16,253,171,1,253,80,33,21,32,3,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,3,253,0,4,16,65,16,253,171,1,253,80,33,19,32,4,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,4,253,0,4,16,65,16,253,171,1,253,80,33,22,32,6,65,4,107,33,10,253,12,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,33,18,3,64,32,18,32,20,32,10,65,4,106,34,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,253,151,1,33,18,32,7,32,10,74,13,0,11,32,18,32,22,253,52,253,100,4,64,32,6,33,10,3,64,32,7,32,10,74,4,64,32,20,32,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,32,22,253,52,253,100,34,11,4,64,65,0,33,9,3,64,32,11,65,3,32,11,104,34,12,116,115,33,11,32,9,65,1,32,12,65,1,118,34,9,65,1,113,65,2,116,32,9,65,1,117,114,116,115,33,9,32,11,13,0,11,32,9,33,11,32,10,40,2,0,33,14,3,64,32,11,104,34,9,65,2,116,33,15,32,11,65,1,32,9,116,115,33,11,32,4,32,15,106,40,2,0,34,12,32,3,32,15,106,40,2,0,34,9,32,2,32,15,106,40,2,0,34,16,32,14,107,108,79,32,12,32,9,32,1,32,15,106,40,2,0,34,17,32,14,107,108,79,114,65,0,65,1,32,16,32,17,27,27,4,64,32,8,65,2,116,32,13,32,15,106,65,2,117,34,12,54,2,0,32,8,65,1,106,65,2,116,32,10,32,6,107,65,2,117,34,9,54,2,0,32,8,65,2,106,33,8,32,16,32,17,70,4,64,32,8,65,2,116,32,12,54,2,0,32,8,65,1,106,65,2,116,32,9,54,2,0,32,8,65,2,106,33,8,11,11,32,11,13,0,11,11,32,10,65,4,106,33,10,12,1,11,11,11,32,1,65,32,106,33,1,32,2,65,32,106,33,2,32,3,65,32,106,33,3,32,4,65,32,106,33,4,32,13,65,32,106,33,13,12,1,11,11,32,8,32,5,107,11]):null;let wasmModule=null;function instantiateWasm(t){wasmModule==null&&(wasmModule=new WebAssembly.Module(wasmCode));const n=Math.ceil(t/2**16),a=new WebAssembly.Memory({initial:n,maximum:n}),l=a.buffer,u=new WebAssembly.Instance(wasmModule,{env:{memory:a}}).exports;return Object.assign({},u,{memory:{buffer:l}})}function congruencesUsingQuadraticSieve(t,n,a){if(typeof n!="bigint")throw new TypeError;let l=Number(a||0);l===0&&(l=3*2**14,l=Math.min(l,Math.ceil(Math.pow(+t[t.length-1],1.15))),l=Math.max(l,t[t.length-1]+1),Number(n)>2**285?l=Math.floor(l/3.2/1.5):Number(n)>2**240?l=Math.floor(l/1.6/1.5):l=Math.floor(l/1.5));const u=Math.ceil(l/(typeof navigator<"u"&&navigator.hardwareConcurrency===12?2.75*2**20:6*2**20));console.debug("q",u);const c=Math.ceil(Math.ceil(l/u)/2**15)*2**15,p=c*u;console.debug("sieveSize",p);const d=0,Q=255,Ct=2**0,ar=Math.log2(t.length===0?Math.sqrt(2):+t[t.length-1]),en=ar+Math.min(Math.log2(n<2**240?50:n<2**285?400:1e3),ar);console.debug("largePrimesThreshold",en);const tn=new Map,on=Number(n)>2**285,cn=Math.min(2*ar+Math.min(Math.log2(200),ar),64);on&&console.log("doubleLargePrimesThreshold",cn);const gn=[];for(let sE=0;sE<t.length;sE+=1){const hE=+t[sE];for(let wE=1,vE=hE;vE<=p||wE===1;wE+=1,vE*=hE){const RE=Number(n%BigInt(vE));if(RE%hE===0)wE===1&&gn.push({step:vE,p:hE,root:0});else if(hE===2){const IE=squareRootsModuloTwo(RE,wE);for(let $x=0;$x<Math.ceil(IE.length/2);$x+=1)gn.push({step:vE,p:hE,root:IE[$x]|0})}else{const IE=squareRootModuloOddPrime(RE,hE,wE);gn.push({step:vE,p:hE,root:IE|0})}}}gn.sort((sE,hE)=>+sE.step-+hE.step);const Cn=gn.length;for(;gn.length%16!==0;)gn.push(gn.at(-1));console.debug("wheels",gn.length),console.debug("max wheel",gn.at(-1).step);const ex=new Float64Array(gn.length);let ix=0n;const ax=[],ox=gn.length;console.assert(c%4===0);let lx=0;lx+=c*1,lx+=ox*4,lx+=ox*4,lx+=ox*4,lx+=ox*1,lx+=16*1024*4,lx+=ox*4,lx+=ox*4,lx+=512*4,lx+=30*ox*4,lx+=ox*4,lx+=ox*4;const cx=instantiateWasm(lx),dx=cx.singleBlockSieve,hx=cx.findSmoothEntry,fx=cx.updateWheelsInternalNext,ux=cx.handleSmallWheels,gx=cx.memory.buffer;let yx=0;const _x=function(sE){return yx+=sE,new Uint8Array(gx,yx-sE,sE)},vx=function(sE){return yx+=sE*4,new Int32Array(gx,yx-sE*4,sE)},bx=_x(c),xx=vx(ox),Sx=vx(ox),Ax=vx(ox),Cx=_x(ox),Tx=vx(16*1024),Px=vx(ox),Fx=vx(ox),Mx=vx(512),Dx=vx(30*ox),Ox=vx(ox),Lx=vx(ox);for(let sE=0;sE<ox;sE+=1){const hE=gn[sE],wE=sE>=Cn?0:Math.log2(hE.p)*(hE.step===2||hE.root===0?.5:1),vE=Math.round(wE*Ct)|0;if(vE>=2**8||hE.step>=2**32)throw new RangeError;Ax[sE]=hE.step,Cx[sE]=vE,Px[sE]=hE.root,ex[sE]=wE}const Nx=function(sE,hE,wE,vE){const RE=tn.get(sE);if(RE==null)tn.set(sE,{polynomial:hE,x:wE,pb:vE.slice(0)}),QuadraticSieveFactorization.lpRels+=1;else{const IE=BigInt(sE),$x=modInverse$1(IE,n);if($x===0n)return new CongruenceOfsquareOfXminusYmoduloN(IE,[0],n);{const kx=hE.X(wE),jx=hE.Y(wE,IE,vE),Jx=RE.polynomial.X(RE.x),gE=RE.polynomial.Y(RE.x,IE,RE.pb),DE=$x*Jx*kx%n;if(jx!=null&&gE!=null){const LE=jx.concat(gE);return new CongruenceOfsquareOfXminusYmoduloN(DE,LE,n)}else console.count("bad lp")}}return null},Gx=QuadraticPolynomial.generator(p/2,t,n);let Ux=null;function Hx(sE){let hE=sE;for(let wE=2;wE<32;wE+=wE)hE=Math.imul(hE,2-Math.imul(sE,hE));return hE}function Vx(sE,hE){if(sE%2===0){if(sE!==2**Math.round(Math.log2(sE)))throw new RangeError;return{a:2**32/sE|0,b:0}}const wE=Hx(sE);let vE=Math.floor(hE/sE);return vE=vE<2**16?vE:vE|65535,console.assert(vE<=Math.floor((2**32-1)/sE)),{a:wE,b:vE}}for(let sE=0;sE<ox;sE+=1){const hE=Ax[sE],wE=Vx(hE,gn.at(-1).step+p);Ox[sE]=wE.a,Lx[sE]=wE.b}let zx=0n,rE=[];const Zx=function(sE,hE){if(hE=-0+hE,!(BigInt(sE.A)===BigInt(ix))){const kx=FastModBigInt((sE.useQ2Form?2n:1n)*sE.A),jx=sE.B<0n?-1:1,Jx=FastModBigInt(sE.B<0n?-sE.B:sE.B);ax.length=0;for(let gE=0;gE<ox;gE+=1){const DE=-0+Ax[gE],LE=(1+2**-52)/DE,NE=-0+FastMod(kx,DE,LE),$E=modInverseSmall$1(NE,DE)|0;Fx[gE]=$E,$E===0&&ax.push(gE);let HE=-0+FastMod(Jx,DE,LE);HE=jx<0?-HE:HE;const QE=-0+Px[gE];let ZE=(DE-HE+(DE-QE))*$E-hE,TS=(DE-HE+QE)*$E-hE;ZE=ZE-Math.floor(ZE*LE)*DE,TS=TS-Math.floor(TS*LE)*DE;const PS=Math.min(ZE,TS),pS=Math.max(ZE,TS);xx[gE]=PS,Sx[gE]=pS}zx=0n,rE.length=0}if(zx===0n)zx=sE.B;else{let kx=sE.B-zx;zx=sE.B;let jx=0;if(kx<0n&&(kx+=(sE.useQ2Form?2n:1n)*sE.A,jx=1),kx<0n||kx>=sE.A*2n)throw new RangeError;let Jx=rE.indexOf(kx);if(Jx===-1){rE.push(kx);const gE=FastModBigInt(kx<0n?-kx:kx);Jx=rE.length-1;const DE=Jx*ox;for(let LE=0;LE<ox;LE+=1){const NE=-0+Ax[LE],$E=-0+Fx[LE],HE=(1+2**-52)/NE,QE=FastMod(gE,NE,HE);let ZE=(NE-QE)*$E;ZE=ZE+p,ZE=ZE-Math.floor(ZE*HE)*NE,ZE=NE-ZE,Dx[DE+LE]=ZE}}fx(ox,Dx.byteOffset+Jx*ox*4,Ax.byteOffset,xx.byteOffset,Sx.byteOffset,jx)}const vE=Number(sE.A&BigInt(2**29-1)),RE=Number(sE.B&BigInt(2**29-1)),IE=Number(sE.C&BigInt(2**29-1)),$x=modInverseSmall$1(vE,2**29);for(let kx=0;kx<ax.length;kx+=1){const jx=ax[kx];if(xx[jx]=p,Sx[jx]=p,sE.useQ2Form){const Jx=Ax[jx];if(Jx%2===0){const gE=Px[jx];for(let DE=0;DE<(Jx===2?1:2);DE+=1){const LE=DE===0?gE:Jx-gE;console.assert((-RE-LE)%2===0),console.assert((-RE+LE)%2===0);let NE=Math.imul((-RE-LE)/2,$x)-hE&Jx-1,$E=Math.imul((-RE+LE)/2,$x)-hE&Jx-1,HE=Math.imul(Math.imul(vE,NE+hE)+RE,NE+hE)+IE&Jx-1,QE=Math.imul(Math.imul(vE,$E+hE)+RE,$E+hE)+IE&Jx-1;if(HE===0&&QE===0&&(xx[jx]=Math.min(NE,$E),Sx[jx]=Math.max(NE,$E)),Jx===2)if(NE!==$E)Cx[jx]=Math.round(1*Ct)|0,ex[jx]=1;else throw new Error}}}}ix=sE.A},eE=function(sE,hE){for(;hE!==0;){const wE=+sE%+hE;sE=hE,hE=wE}return sE},oE=function(sE,hE){return Math.floor(sE/eE(sE,hE))*hE},Wx=function(){let sE=1,hE=0;for(;hE<ox&&oE(sE,Ax[hE])<=c/4;)sE=oE(sE,Ax[hE]),hE+=1;return hE}(),AE=function(sE,hE,wE){if(typeof wE!="number"||typeof hE!="number")throw new TypeError;if(wE>sE.length)throw new RangeError;for(let vE=hE;vE<wE;vE+=hE)sE.copyWithin(vE,0,Math.min(wE-vE,hE))};QuadraticSieveFactorization.smallSegmentTime=0,QuadraticSieveFactorization.largeSegmentTime=0;const ME=function(sE){let hE=1;bx[0]=d;for(let jx=0;jx<Wx;jx+=1){const Jx=+oE(hE,Ax[jx]);AE(bx,hE,Jx),hE=Jx;const gE=Ax[jx],DE=Cx[jx],LE=xx[jx]|0;if(LE!==p)for(let $E=(LE+Jx-sE%Jx)%gE;$E<Jx;$E+=gE)bx[$E]=bx[$E]+DE|0;const NE=Sx[jx]|0;if(NE!==p)for(let $E=(NE+Jx-sE%Jx)%gE;$E<Jx;$E+=gE)bx[$E]=bx[$E]+DE|0}AE(bx,hE,c);const wE=typeof navigator<"u"&&navigator.hardwareConcurrency===12?1:1.5,vE=Math.min(0+ox-Wx,Math.floor(64*3*wE*(n>2**285?4:n>2**240?2:1))),RE=Math.floor(32768*wE),IE=performance.now();let $x=0;for(;$x+RE<=c;)$x+=RE,dx(xx.byteOffset,Sx.byteOffset,Ax.byteOffset,Cx.byteOffset,Wx*4,Wx*4+vE*4,$x,0);QuadraticSieveFactorization.smallSegmentTime+=performance.now()-IE;const kx=performance.now();dx(xx.byteOffset,Sx.byteOffset,Ax.byteOffset,Cx.byteOffset,Wx*4,ox*4,c,c),QuadraticSieveFactorization.largeSegmentTime+=performance.now()-kx},EE=[],bE=[],kE=[],TE=function(sE,hE){if(typeof sE!="number")throw new TypeError;const wE=Math.max(d,(Math.round((hE.log2AbsY(0)-(on?cn:en))*Ct+d)|0)-9);let vE=0,RE=0;for(;vE<c;){RE=wE;const $x=c;for(;vE<$x;){if(vE<$x-1){const jx=bx[$x-1];for(bx[$x-1]=Q;(vE&15)!==0&&RE>bx[vE];)vE+=1;if((vE&15)===0){vE=hx(RE,vE);for(var IE=0;RE>bx[vE];)vE+=1,IE+=1;IE>=16&&console.error("too big c",IE)}bx[$x-1]=jx}const kx=hE.log2AbsY(vE+sE)-(bx[vE]-d)*(1/Ct);(kx<en||on&&kx>=ar*2&&kx<cn)&&(EE.push(vE+sE),bE.push(-0+(bx[vE]-d)*(1/Ct))),vE+=1}}};function jE(sE){EE.length>512&&(console.warn("too many smooth entries: "+EE.length+" N = "+n),EE.length=512);for(let vE=0;vE<EE.length;vE+=1)Mx[vE]=EE[vE]-sE-p;for(let vE=0;vE<Wx;vE+=1){const RE=Ax[vE];if(xx[vE]!==p){let IE=xx[vE]+(0-p)%RE;xx[vE]=IE<=0?IE+RE:IE}else xx[vE]=0;if(Sx[vE]!==p){let IE=Sx[vE]+(0-p)%RE;Sx[vE]=IE<=0?IE+RE:IE}else Sx[vE]=0}const hE=EE.length===0?0:ux(ox,xx.byteOffset,Sx.byteOffset,Ox.byteOffset,Lx.byteOffset,Tx.byteOffset>>2,Mx.byteOffset,Mx.byteOffset+EE.length*4),wE=new Float64Array(EE.length);for(let vE=0;vE<hE;vE+=2){const RE=Tx[vE],IE=Tx[vE+1],$x=Ax[RE];wE[IE]+=+ex[RE],kE[IE].push($x)}for(let vE=0;vE<EE.length;vE+=1){const RE=Math.abs(bE[vE]-wE[vE]);RE>=9&&RE<100&&console.error(RE),bE[vE]=wE[vE]}}function Ix(){this.a=[],this.b=[],this.length=0}Ix.prototype.push=function(sE){this.a.push(sE),this.length=this.a.length+this.b.length},Ix.prototype.shift=function(hE){if(this.b.length===0)for(;this.a.length>0;)this.b.push(this.a.pop());var hE=this.b.pop();return this.length=this.a.length+this.b.length,hE};function Bx(){this.edges=0,this.components=0,this.vertices=0,this._edges=new Map,this._edgesArray=[],this._g=new Map}Bx.prototype._insertVertex=function(sE){if(!this._g.has(sE))return this._g.set(sE,sE),this.vertices+=1,this.components+=1,sE;let hE=this._g.get(sE);for(;this._g.get(hE)!==hE;)hE=this._g.get(hE);let wE=sE;for(;wE!==hE;){const vE=this._g.get(wE);this._g.set(wE,hE),wE=vE}return hE};const Yx=function(sE,hE){return BigInt.asUintN(64,(BigInt(Math.min(sE,hE))<<32n)+BigInt(Math.max(sE,hE)))};Bx.prototype.insertEdge=function(sE,hE,wE){const vE=Yx(sE,hE);if(this._edges.get(vE)!==void 0){console.count("same p1p2");return}this._edges.set(vE,wE),this._edgesArray.push({p1:sE,p2:hE}),sE!==hE&&this._edgesArray.push({p1:hE,p2:sE}),this.edges+=1;const RE=this._insertVertex(sE),IE=this._insertVertex(hE);RE<IE&&(this.components-=1,this._g.set(IE,RE)),RE>IE&&(this.components-=1,this._g.set(RE,IE))},Bx.prototype.iterateCycles=function(sE){const hE=new Map;this._edgesArray.sort((IE,$x)=>IE.p1-$x.p1||IE.p2-$x.p2);const wE=[];for(let IE of this._g.keys())this._g.get(IE)===IE&&wE.push(IE),hE.set(IE,{explored:!1,finished:!1,parent:0});wE.sort((IE,$x)=>IE-$x);const vE=this._edgesArray.map(IE=>IE.p1),RE=function(IE){const $x=[];for(;IE!==0;)$x.push(IE),IE=hE.get(IE).parent;return $x};for(const IE of wE){const $x=new Ix,kx=hE.get(IE);for(console.assert(kx.explored===!1&&kx.parent===0),kx.explored=!0,kx.parent=0,$x.push(IE);$x.length>0;){const jx=$x.shift(),Jx=indexOf$1(vE,jx);for(let gE=Jx;gE>=0&&this._edgesArray[gE].p1===jx;gE-=1){const DE=this._edgesArray[gE],LE=hE.get(DE.p2);if(LE.explored){if(LE.finished)continue;const NE=RE(DE.p2),$E=RE(DE.p1);let HE=0;for(;NE.length-1-HE>=0&&$E.length-1-HE>=0&&NE[NE.length-1-HE]===$E[$E.length-1-HE];)HE+=1;console.assert(HE>0);const QE=NE.slice(0,NE.length-(HE-1)).reverse().concat($E.slice(0,$E.length-(HE-1))),ZE=[];for(let pS=1;pS<QE.length;pS+=1)ZE.push({p1:QE[pS-1],p2:QE[pS]});const TS=this._edges,PS=ZE.map(pS=>TS.get(Yx(pS.p1,pS.p2)));sE(ZE,PS)}else LE.explored=!0,LE.parent=DE.p1,$x.push(DE.p2)}hE.get(jx).finished=!0}}};const Qx=function(sE,hE){let wE=1n,vE=1n,RE=[];for(let $x=0;$x<sE.length;$x+=1){const kx=sE[$x],jx=hE[$x],Jx=jx.polynomial.X(jx.x),gE=jx.polynomial.Y(jx.x,BigInt(kx.p1)*BigInt(kx.p2),jx.pb);vE=Jx*vE%n,RE==null||gE==null?RE=null:RE=RE.concat(gE),wE=wE*BigInt(kx.p2)%n}const IE=modInverse$1(wE,n);if(IE===0n)Kx.push(new CongruenceOfsquareOfXminusYmoduloN(wE,[0],n));else if(RE!=null){vE=IE*vE%n;const $x=new CongruenceOfsquareOfXminusYmoduloN(vE,RE,n);if((vE**2n-RE.reduce((kx,jx)=>kx*BigInt(jx),1n))%n!==0n)throw new Error;Kx.push($x)}else console.count("BAD CYCLE")};let nE=new Bx;const Kx=[];let dE=0;function cE(sE,hE,wE,vE,RE){if(nE==null)return;nE.insertEdge(sE,hE,{polynomial:vE,x:wE,pb:RE.slice(0)});const IE=nE.edges+nE.components-nE.vertices;nE.edges%1e4===0&&console.debug("graph:",nE.edges,nE.components,nE.vertices,IE),IE>t.length+64-dE&&(console.debug("graph:",nE.edges,nE.components,nE.vertices,IE),console.time("collectGraphRelations"),nE.iterateCycles(Qx),console.timeEnd("collectGraphRelations"),console.log(Kx.length),nE=null)}function mE(sE,hE,wE){let vE=abs$3(hE.Y(sE));for(let Jx=wE.length-1;Jx>=0;Jx-=1){const gE=wE[Jx];for(;vE%BigInt(gE)===0n;)vE/=BigInt(gE)}const RE=BigInt(vE);if(Number(RE)>=2**64||isProbablyPrime64(RE))return;const IE=Number(PollardsRho64(RE,2**18));if(IE===0||IE===1){console.count("cannot factor");return}if(BigInt(RE)%BigInt(IE)!==BigInt(0)||!(IE>1&&BigInt(IE)<BigInt(RE)))throw new Error;const $x=Math.floor(Number(BigInt(RE)/BigInt(IE))),kx=Math.min($x,IE),jx=Math.max($x,IE);Math.log2(kx)>ar&&kx<=1073741823&&jx<=1073741823&&cE(kx|0,jx|0,sE,hE,wE)}QuadraticSieveFactorization.lpCounter=0,QuadraticSieveFactorization.lpRels=0;let xE=-1,OE=0;const PE={next:function(){for(dE+=1;OE<32||2*OE*p<=Math.pow(t[t.length-1],2);){if(Kx.length!==0)return{value:Kx.pop(),done:!1};xE===p&&(OE+=1,xE=-1);const hE=-p/2;if(xE===-1){Ux=Gx.next(),Zx(Ux,hE),EE.length=0,bE.length=0;for(let wE=0;wE<p;wE+=c)ME(wE),TE(hE+wE,Ux);for(let wE=0;wE<EE.length;wE+=1)wE<kE.length?kE[wE].length=0:kE.push([]);jE(hE)}for(let wE=xE+1;wE<EE.length;wE+=1){const vE=EE[wE],RE=+bE[wE],IE=kE[wE],$x=+Ux.log2AbsY(vE);let kx=null;if($x-RE<=ar){const jx=Ux.X(vE);let Jx=Ux.Y(vE,1n,IE);Jx==null&&(Jx=Ux.Y(vE,1n,IE.concat(ax.map(gE=>Ax[gE])))),Jx!=null?kx=new CongruenceOfsquareOfXminusYmoduloN(jx,Jx,n):console.count("wrong entry",exp2($x-RE))}else if($x-RE<2*ar){const jx=exp2($x-RE);kx=Nx(jx,Ux,vE,IE),kx!=null?QuadraticSieveFactorization.lpCounter+=1:on&&jx<=1073741823&&(Ux.Y(vE,BigInt(jx),IE)!=null?cE(1,jx|0,vE,Ux,IE):(console.count("wrong?"),console.log(Ux.Y(vE),jx)))}else on&&$x-RE<3*ar?mE(vE,Ux,IE):console.count("too big",($x-RE)/ar);if(kx!=null)return xE=wE,{value:kx,done:!1}}xE=p}return{value:void 0,done:!0}}};return PE[globalThis.Symbol.iterator]=function(){return this},PE}function gcd$2(t,n){for(;n!==0n;){const a=BigInt(t)%BigInt(n);t=n,n=a}return t}function abs$3(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function indexOf$1(t,n){if(typeof n!="number"||(n|0)!==n)throw new TypeError;let a=0,l=t.length-1;for(;a<l;){const u=Math.ceil((a+l)/2);(t[u]|0)>(n|0)?l=u-1:a=u}return(t[a]|0)===(n|0)?a:-1}function computeY(t,n,a){const l=new Array(t.length+1).fill(0);for(let c=0;c<n.length;c+=1){const p=n[c].v;for(let d=0;d<p.length;d+=1)l[p[d]]+=1}let u=1n;for(let c=0;c<l.length;c+=1){if(l[c]%2!==0)throw new RangeError;if(c!==0){const p=t[c-1],d=l[c]/2;d>0&&(d<=2?u=u*BigInt(Math.pow(p,d))%a:u=u*modPow$2(BigInt(p),BigInt(d),a)%a)}}return u}function legendre(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,l=0;t!==0;){for(;(t&1)===0;)t>>=1,l=n&7,(l===3||l===5)&&(a=-a);l=n,n=t,t=l,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function getBestMultiplier(t,n){const a=new Array(150).fill(0);for(let p=1;p<a.length;p+=1)a[p]=-Math.log(p)/2;for(let p=0;p<n.length&&p<300;p+=1){const d=n[p];if(d===2)for(let Q=1;Q<a.length;Q+=1)a[Q]+=[0,3,0,.5,0,1,0,.5][Q*Number(t%8n)%8]*Math.log(2);else{const Q=legendre(Number(t%BigInt(d)),d),Ct=2/(d-1)*Math.log(d);for(let ar=1;ar<a.length;ar+=1)a[ar]+=Q*legendre(ar,d)===1?Ct:0}}let l=0,u=1;for(let p=1;p<=a.length;p+=1){var c=+a[p];+c>+l&&(l=c,u=p)}return u}function QuadraticSieveFactorization(t){if(typeof t!="bigint")throw new TypeError;const n=Math.floor(((performance.memory||{jsHeapSizeLimit:0}).jsHeapSizeLimit||0)/2**32<.99?2**23.5:2**23.75),a=Math.min(n,(1<<25)-1),u=Math.max(Math.min(Math.floor(Math.sqrt(L$1(t)/(Number(t)>2**285?24*2.5:Number(t)>2**240?12:6))),a),512),c=primes$1(u);let p=1n;for(p=Number(t)>2**64?BigInt(getBestMultiplier(t,c)):1n;;p+=1n){if(p!==1n&&console.debug("multiplier",p),p!==1n&&t%p===0n)return console.error("k"),BigInt(p);const d=p*t,Q=c.filter(gn=>isQuadraticResidueModuloPrime(d,gn));for(let gn=0;gn<Q.length;gn+=1)if(Number(t%BigInt(Q[gn]))===0)return BigInt(Q[gn]);const Ct=congruencesUsingQuadraticSieve(Q,d),ar=solve.sparseSolve(1+Q.length);ar.next();let en=null;const tn=performance.now();let on=0,cn=tn;for(;(en=Ct.next().value)!=null;)if(en.Y.length===1&&en.Y[0]===0){const gn=BigInt(gcd$2(abs$3(en.X),t));if(gn!==1n&&gn!==t)return gn}else{const gn=function(){throw new TypeError(t)},Cn=en.Y.map(ix=>ix===-1?0:1+indexOf$1(Q,ix)||gn()),ex=ar.next([Cn,{c:en,v:Cn}]).value;{const ix=performance.now();on+=1,(ix-cn>5e3||ex!=null)&&(console.debug("congruences found: ",on,"/",Q.length,"expected time: ",Math.round((ix-tn)/on*Q.length),"large prime congruences: ",QuadraticSieveFactorization.lpCounter+"("+QuadraticSieveFactorization.lpRels+")","polynomials used: ",QuadraticSieveFactorization.polynomialsCounter),cn=ix)}if(ex!=null){let ix=1n;for(let lx=0;lx<ex.length;lx+=1)ix=ix*ex[lx].c.X%t;let ax=computeY(Q,ex,t);const ox=BigInt(gcd$2(abs$3(ix+ax),t));if(ox!==1n&&ox!==t)return ox}}}}QuadraticSieveFactorization.testables={congruencesUsingQuadraticSieve,squareRootModuloOddPrime,isQuadraticResidueModuloPrime,solve,QuadraticPolynomial,thresholdApproximationInterval};function log2(t){return BigInt(t.toString(16).length*4)}function modPow$1(t,n,a){let l=1n;for(;n!==0n;)BigInt.asUintN(1,n)===1n&&(n-=1n,l=l*t%a),n>>=1n,t=t*t%a;return l}function primes(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let l=3;l<=t;l+=2)if(n[l]&&(a.push(l),l<=Math.floor(t/l)))for(let u=l*l;u<=t;u+=2*l)n[u]=!1;return a}function getBases(t){if(typeof t!="bigint")throw new TypeError;if(t<2047n)return[2];if(t<1373653n)return[2,3];if(t<25326001n)return[2,3,5];if(t<3215031751n)return[2,3,5,7];if(t<2152302898747n)return[2,3,5,7,11];if(t<3474749660383n)return[2,3,5,7,11,13];if(t<341550071728321n)return[2,3,5,7,11,13,17];if(t<3825123056546413051n)return[2,3,5,7,11,13,17,19,23];if(t<318665857834031151167461n)return[2,3,5,7,11,13,17,19,23,29,31,37];if(t<3317044064679887385961981n)return[2,3,5,7,11,13,17,19,23,29,31,37,41];const n=Number(log2(t))*Math.log(2);return primes(Math.floor(1/Math.log(2)*n*Math.log(n)))}function isPrime$3(t){if(typeof t!="bigint")throw new RangeError;if(t<0n)throw new RangeError;if(t<2n)return!1;const n=[2,3,5,7,11,13,17,19,23,29,31,37,41],a=Number(t%304250263527210n);for(let p=0;p<n.length;p+=1){const d=n[p];if(a-Math.floor(a/d)*d===0)return t===BigInt(d)}if(t<43*43)return!0;let l=0,u=t-1n;for(;u%2n===0n;)u/=2n,l+=1;const c=getBases(t);for(const p of c){let d=modPow$1(BigInt(p),u,t);if(d!==1n){for(let Q=l-1;Q>0&&d!==t-1n;Q-=1)d=d*d%t;if(d!==t-1n)return!1}}return!0}function bitLength$1(t){if(typeof t=="number"){var n=t|0;if(n===t&&n>=0)return 32-Math.clz32(n)}const a=t.toString(16),l=0+a.charCodeAt(0)-48;if(l<=0)throw new RangeError;return(a.length-1)*4+(32-Math.clz32(Math.min(l,8)))}const SPLIT=Math.pow(2,Math.ceil(Math.log2((Number.MAX_SAFE_INTEGER+1)*2)/2))+1;function fma(t,n,a){var l=SPLIT*t,u=l-(l-t),c=t-u,p=SPLIT*n,d=p-(p-n),Q=n-d,Ct=u*d+a+u*Q+c*d+c*Q;return Ct}function modMultiplySmall(t,n,a){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;if(!(t>=0&&n>=0&&t<a&&n<a&&a<=Number.MAX_SAFE_INTEGER))throw new RangeError;var l=t*n;if(l<=Number.MAX_SAFE_INTEGER)return l-Math.floor(l/a)*a;var u=fma(t,n,-l),c=l/a-(1+Number.MAX_SAFE_INTEGER)+(1+Number.MAX_SAFE_INTEGER),p=0-fma(c,a,-l);u>0&&(u-=a),p<0&&(p+=a);var d=u+p;return d<0&&(d+=a),d}function modPowSmall(t,n,a){let l=1;for(;n!==0;){let u=Math.floor(n/2);n!==u+u&&(l=modMultiplySmall(l,t,a)),n=u,t=modMultiplySmall(t,t,a)}return l}function range(t,n){var a=[];for(let l=t;l<=n;l+=1)a.push(l);return a}function isPrimeSmall(t){if(typeof t!="number")throw new TypeError;if(t>Number.MAX_SAFE_INTEGER)throw new RangeError;if(t<2)throw new RangeError;if(+primeFactorUsingWheel(t,2*1024)<t)return!1;if(t<Math.pow(1024,2))return!0;let n=0,a=t-1;for(;a%2===0;)a/=2,n+=1;const l=[10,20,24,31,40,41,48,48,61,61,61,78,81],u=[2,3,5,7,11,13,17,17,19,19,19,23,29];let c=0;const p=Math.ceil(Math.log2(t));for(;p>l[c]&&c<l.length;)c+=1;let d=null;c<l.length?d=u.slice(0,c+1):d=range(2,Math.floor(1/Math.log(2)*Math.log(t)*Math.log(Math.log(t)))),console.assert(t>d[d.length-1]);for(const Q of d){const Ct=modPowSmall(Q,a,t);if(Ct!==1){for(let ar=0,en=Ct;en!==t-1;ar+=1,en=modMultiplySmall(en,en,t))if(ar===n-1)return!1}}return!0}function factorByPollardRhoSmall(t){if(typeof t!="number")throw new TypeError;function n(p,d){for(;d!==0;){var Q=p-Math.floor(p/d)*d;p=d,d=Q}return p}function a(p,d,Q){var Ct=modMultiplySmall(p,p,Q)-d;return Ct<0?Ct+Q:Ct}function l(p,d,Q){if(p%d===0)return d;for(var Ct=d,ar=2,en=d;;){for(var tn=1,on=en,cn=!1,gn=1;cn||gn<=ar;gn+=1)if(en=a(en,Q,p),gn===ar/2&&(on=en),gn>ar/2&&(tn=cn?Math.abs(en-Ct):modMultiplySmall(tn,Math.abs(en-Ct),p),cn||gn===ar||gn%128===0)){var Cn=n(tn,p);if(Cn!==1)if(!cn)en=on,cn=!0;else return Cn;tn=1,on=en}ar*=2,Ct=en}return 1}var u=1,c=t;do u+=1,c=l(t,u,1);while(c===t);return c}function factorByPollardRhoBig(t,n){function a(Q){if(typeof Q!="bigint")throw new TypeError;return Q<0n?-Q:Q}function l(Q,Ct){if(typeof Q!="bigint"||typeof Ct!="bigint")throw new RangeError;for(;Ct!==0n;){var ar=BigInt(Q)%Ct;Q=Ct,Ct=ar}return Q}function u(Q,Ct,ar){if(typeof Q!="bigint"||typeof Ct!="bigint"||typeof ar!="bigint")throw new RangeError;var en=Q*Q%ar-Ct;return en<0n?en+ar:en}function c(Q,Ct,ar,en){if(typeof Q!="bigint"||typeof Ct!="bigint")throw new RangeError;if(Q%Ct===0n)return Ct;for(var tn=Ct,on=2,cn=Ct;on<=Math.pow(2,en);){for(var gn=1n,Cn=cn,ex=!1,ix=1;ex||ix<=on;ix+=1)if(cn=u(cn,ar,Q),ix===on/2&&(Cn=cn),ix>on/2){const ox=a(BigInt(cn)-tn);if(gn=ex?ox:gn*ox%Q,ex||ix===on||ix%128===0){var ax=l(gn,Q);if(ax!==1n)if(!ex)cn=Cn,ex=!0;else return ax;gn=1n,Cn=cn}}on*=2,tn=cn}return 1n}var p=1,d=t;do p+=1,d=c(t,BigInt(p),1n,n);while(BigInt(d)===BigInt(t));return d}var WHEEL3=[1,2,2,4,2,4,2,4,6,2,6];function remainder(t,n){return t-Math.floor(t/n)*n}function primeFactorUsingWheel(t,n=void 0){if(typeof t!="number")throw new RangeError;var a=WHEEL3,l=3;n==null&&(n=Math.floor(Math.sqrt(Number(t)+.5)));for(var u=2,c=0;u<=n;){if(remainder(t,u)===0)return u;u+=a[c],c+=1,c===a.length&&(c=l)}return t}function someFactor(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));if(n<1)throw new TypeError("primeFactor cannot be called for numbers less than 2");if(n===1)return t;if(n<=Number.MAX_SAFE_INTEGER){var a=primeFactorUsingWheel(n,1024);if(a<n||n<=1024*1024)return BigInt(a);if(n%2===0)return 2n}//! optimize n = f**2
var l=BigInt(nthRoot(BigInt(t),2));if(l**2n===t)return l;if(n>5){var u=l+1n,c=u*u-BigInt(t),p=BigInt(nthRoot(BigInt(c),2));if(p*p===c)return u-p}//! optimize n = f**3
for(var d=bitLength$1(BigInt(t)),Q=3;Q<=d/10;Q+=2){var Ct=BigInt(nthRoot(BigInt(t),Q));if(Ct**BigInt(Q)===BigInt(t))return Ct}var ar=n<=Number.MAX_SAFE_INTEGER;if(ar&&isPrimeSmall(n)||!ar&&isPrime$3(t))return t;if(n<=Number.MAX_SAFE_INTEGER)return factorByPollardRhoSmall(n);{var en=Math.floor(Math.log(function(gn){const Cn=Math.max(0,gn.toString(16).length*4-48),ex=(Math.log2(Number(BigInt(gn)>>BigInt(Cn)))+Cn)*Math.LN2;return Math.exp(Math.sqrt(ex*Math.log(ex)))}(t)));n<2**64&&(en=1/0),globalThis.ArrayBuffer==null&&(en=1/0),n>=2**128?en-=3:n>=2**96?en-=2:en-=1;var tn=factorByPollardRhoBig(t,en);if(tn!==1n)return tn;if(globalThis.onerror!=null){var d=bitLength$1(t),on=new TypeError("big size of someFactor bitLength("+t+") === "+d);globalThis.onerror(on.message,"",0,0,on)}return QuadraticSieveFactorization(t)}}function countTrailingZeros(t,n){t=BigInt(t);const a=BigInt(n);if(t<0n||a<0n)throw new RangeError;if(t===a)return 1;if(t===0n)throw new TypeError;if(a===2n){for(var u=32;BigInt.asUintN(u,t)===0n;)u*=2;for(var c=0,l=Math.floor(u/2);l>=32;l=Math.floor(l/2))BigInt.asUintN(l,t)===0n&&(c=+c+l,t>>=BigInt(l));const en=function(tn){const on=+tn;return 32-(Math.clz32(on&-on)+1)};return c=+c+en(Number(BigInt.asUintN(32,t))),c}for(var u=1;t%a**BigInt(u)===0n;)u*=2;for(var c=0,l=u/2;l>=1;l/=2){var p=a**BigInt(l),d=BigInt(t)/p,Q=BigInt(t)-d*BigInt(p);Q===0n&&(c=+c+l,t=d)}return c}primeFactor._rationalNumberToDecimalString=function(t,n,a){const l=function(on,cn){if(on=BigInt(on),on%2n===0n||on%5n===0n)throw new RangeError("should be called with denominator not divible by 2 or 5");const gn=on;let Cn=0;if(gn!==1n){let ex=1n;do Cn+=1,ex=10n*ex%gn;while(Cn<=cn&&ex!==1n)}return Cn},u=function(on,cn,gn,Cn){let ex=+cn+on.length-1;on=on.replace(/0+$/g,"");const ix=Math.max(0,Math.max(ex+1,Cn)-on.length);return ex<=-1&&(on=String("0".repeat(0-ex))+String(on),ex=0),on=String(on)+String("0".repeat(ix)),on=String(on)+String("0".repeat(Math.max(gn-(on.length-(ex+1)),0))),on.slice(0,ex+1)+(on.length>ex+1?"."+on.slice(ex+1):"")},c=function(on,cn,gn){const Cn=+cn+on.length-1;return Cn<-6||Cn>=gn?u(on,-(on.length-1),0,gn)+"e"+(Cn<0?"-":"")+Math.abs(Cn).toString():u(on,cn,0,gn)},p=function(on,cn,gn){return gn.significantDigits!=null?c(on,cn,gn.significantDigits):u(on,cn,gn.fractionDigits,0)};t=BigInt(t),n=BigInt(n);let d=1;n<0n&&(n=-BigInt(n),d=-d),t<0n&&(t=-BigInt(t),d=-d);const Q=function(on,cn){let gn=Math.floor((bitLength$1(on)-1-bitLength$1(cn))/Math.log2(10));for(;BigInt(gn<0?10n**BigInt(-gn)*on:on)>=BigInt(gn>0?10n**BigInt(gn)*cn:cn);)gn+=1;return gn-1},Ct=primeFactor._countTrailingZeros(n,2),ar=primeFactor._countTrailingZeros(n,5);if(Ct>0&&t%2n===0n)throw new RangeError("not implemented");if(ar>0&&t%5n===0n)throw new RangeError("not implemented");const en=n/(2n**BigInt(Ct)*5n**BigInt(ar)),tn=+Math.max(Ct,ar);if((a.fractionDigits!=null&&tn<=a.fractionDigits||a.significantDigits!=null&&tn+(Q(t,n)+1)-primeFactor._countTrailingZeros(t,10)<=a.significantDigits)&&t%en===0n){const on=tn,cn=(10n**BigInt(on)*t/n).toString(),gn=a.fractionDigits!=null?{fractionDigits:tn}:{significantDigits:tn+(Q(t,n)+1)<=a.significantDigits?tn+(Q(t,n)+1):tn+(Q(t,n)+1)-primeFactor._countTrailingZeros(t,10)};return(d<0?"-":"")+p(cn,-on,gn)}else{const on=+(a.fractionDigits!=null?a.fractionDigits:a.significantDigits-(Q(t,n)+1)),cn=on>0?10n**BigInt(on)*t:t,gn=on<0?10n**BigInt(-on)*n:n,Cn=((cn+gn/2n)/gn).toString();let ex=(d<0?"-":"")+p(Cn,-on,a);const ix=+l(en,ex.length);if(ix!==0&&ix<=ex.length){const ax=ex.indexOf(".");let ox=ax+1+tn-(ex.indexOf("e")!==-1?-Number(String(ex.slice(ex.indexOf("e")+1)))-0:0)-primeFactor._countTrailingZeros(t,10);if(ox<ax+1){ox=ax+1;//!?
}const lx=ex.indexOf("e")!==-1?ex.indexOf("e"):ex.length;ax!==-1&&(ox+ix<lx||ox+ix===lx&&+ex.charCodeAt(ox)<53)&&(ex=ex.slice(0,ox)+"("+ex.slice(ox,ox+ix)+")"+ex.slice(ox+ix))}return!/[^0\.]/.test(ex)&&d>=0&&t!==0n&&(ex="+"+ex),ex}};function primeFactor(t){t=BigInt(t);var n=BigInt(someFactor(t));if(n===t)return n;var a=primeFactor(n);return a}function modInverseBig(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;console.assert(t>=0n),console.assert(n>0n),t>=n&&(t=t%n);let a=t,l=n,u=1n,c=0n;for(;l!==0n;){const d=BigInt(BigInt(a)/l),Q=a-d*l;a=l,l=Q;const Ct=u-d*c;u=c,c=Ct}let p=u;return p=p<0n?p+n:p,console.assert(p>=0n&&p<n),p}function modInverseSmall(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;if(n<0)throw new RangeError;console.assert(t>=0),t>=n&&(t=t%n);let a=t,l=n,u=1,c=0;for(;l!==0;){const d=Math.floor(a/l),Q=a-d*l;a=l,l=Q;const Ct=u-d*c;u=c,c=Ct}let p=u;return p=p<0?p+n:p,console.assert(p>=0&&p<n),p}function modInverse(t,n){return typeof n=="number"?modInverseSmall(typeof t=="number"?t:Number(BigInt(t)%BigInt(n)),n):modInverseBig(BigInt(t),BigInt(n))}primeFactor._bitLength=bitLength$1;primeFactor._isPrime=function(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));return n<=Number.MAX_SAFE_INTEGER?isPrimeSmall(n):isPrime$3(t)};primeFactor._countTrailingZeros=countTrailingZeros;primeFactor._someFactor=someFactor;primeFactor._modInverse=modInverse;primeFactor._integerNthRoot=function(t,n){return nthRoot(BigInt(t),n)};primeFactor.testables={factorByPollardRhoSmall,factorByPollardRhoBig};(function(){function t(){}t.BigInt=function(fx){return BigInt(fx)},t.asIntN=function(fx,ux){return BigInt.asIntN(fx,ux)},t.asUintN=function(fx,ux){return BigInt.asUintN(fx,ux)},t.toNumber=function(fx){return Number(fx)},t.add=function(fx,ux){return fx+ux},t.subtract=function(fx,ux){return fx-ux},t.multiply=function(fx,ux){return fx*ux},t.divide=function(fx,ux){return fx/ux},t.remainder=function(fx,ux){return fx%ux},t.unaryMinus=function(fx){return-fx},t.equal=function(fx,ux){return fx===ux},t.lessThan=function(fx,ux){return fx<ux},t.greaterThan=function(fx,ux){return fx>ux},t.notEqual=function(fx,ux){return fx!==ux},t.lessThanOrEqual=function(fx,ux){return fx<=ux},t.greaterThanOrEqual=function(fx,ux){return fx>=ux},t.exponentiate=function(fx,ux){if(typeof fx!="bigint"||typeof ux!="bigint")throw new TypeError;var gx=Number(ux);if(gx<0)throw new RangeError;if(gx>Number.MAX_SAFE_INTEGER){var yx=Number(fx);if(yx===0||yx===-1||yx===1)return yx===-1&&Number(ux%BigInt(2))===0?-fx:fx;throw new RangeError}if(fx===BigInt(2))return BigInt(1)<<ux;if(gx===0)return BigInt(1);for(var _x=fx;gx%2===0;)gx=Math.floor(gx/2),_x*=_x;var vx=_x;if(gx-=1,gx>=2){for(;gx>=2;){var bx=Math.floor(gx/2);bx*2!==gx&&(vx*=_x),gx=bx,_x*=_x}vx*=_x}return vx},t.signedRightShift=function(fx,ux){return fx>>ux},t.leftShift=function(fx,ux){return fx<<ux},Symbol.hasInstance!=null&&Object.defineProperty(t,Symbol.hasInstance,{value:function(fx){return typeof fx=="bigint"}});var n=Symbol.hasInstance!=null&&typeof BigInt<"u"&&BigInt(Number.MAX_SAFE_INTEGER)+BigInt(2)-BigInt(2)===BigInt(Number.MAX_SAFE_INTEGER);if(n&&(-BigInt("0xffffffffffffffffffffffffffffffff")>>BigInt(64)).toString()!=="-18446744073709551616"&&(t.signedRightShift=function(fx,ux){var gx=BigInt(1)<<ux;return fx>=BigInt(0)?fx/gx:(fx-gx+BigInt(1))/gx}),n)try{BigInt(Number.MAX_SAFE_INTEGER+1)}catch{t.BigInt=function(ux){if(typeof ux=="number"){for(var gx=0,yx=ux;yx>=Number.MAX_SAFE_INTEGER+1;)yx/=Number.MAX_SAFE_INTEGER+1,gx+=Math.round(Math.log2(Number.MAX_SAFE_INTEGER+1));if(gx!==0)return BigInt(yx)<<BigInt(gx)}return BigInt(ux)}}for(var a=t,l=function(fx){return function(ux,gx){return fx(ux,gx)}},u=new Array(16*2+1),c=0;c<u.length;c+=1)u[c]=void 0;function p(){this.a=void 0,this.aKey=0,this.b=void 0,this.bKey=0,this.last=0}p.prototype.get=function(fx){if(this.aKey===fx)return this.last=0,this.a;if(this.bKey===fx)return this.last=1,this.b},p.prototype.set=function(fx,ux){this.last===0?(this.bKey=fx,this.b=ux,this.last=1):(this.aKey=fx,this.a=ux,this.last=0)};var d=new p,Q=l(function(fx){return a.toNumber(fx)}),Ct=function(fx){if(typeof fx=="number"){if(fx>=-16&&fx<=16){var ux=u[fx+16];return ux==null&&(ux=a.BigInt(fx),u[fx+16]=ux),ux}var ux=d.get(fx);return ux==null&&(ux=a.BigInt(fx),d.set(fx,ux)),ux}return fx},ar=void 0,en=void 0,tn=function(){ar=a.BigInt(-9007199254740991),en=a.BigInt(9007199254740991)},on=function(fx){return!a.lessThan(fx,ar)&&!a.greaterThan(fx,en)?a.toNumber(fx):fx},cn=l(function(fx,ux){if(typeof fx=="string"||typeof ux=="string")return fx+ux;if(typeof fx=="number"&&fx===0)return ux;if(typeof ux=="number"&&ux===0)return fx;var gx=Ct(fx),yx=Ct(ux),_x=a.add(gx,yx);return typeof fx=="number"&&typeof ux=="number"?_x:on(_x)}),gn=l(function(fx,ux){if(typeof fx=="number"&&fx===0)return ox(ux);if(typeof ux=="number"&&ux===0)return fx;var gx=Ct(fx),yx=Ct(ux),_x=a.subtract(gx,yx);return typeof fx=="number"&&typeof ux=="number"?_x:on(_x)}),Cn=l(function(fx,ux){if(typeof fx=="number"&&fx===0)return 0;if(typeof fx=="number"&&fx===1)return ux;if(typeof fx=="number"&&fx===-1)return a.unaryMinus(ux);if(typeof ux=="number"&&ux===0)return 0;if(typeof ux=="number"&&ux===1)return fx;if(typeof ux=="number"&&ux===-1)return a.unaryMinus(fx);var gx=Ct(fx),yx=Ct(ux);return a.multiply(gx,yx)}),ex=l(function(fx,ux){if(typeof fx=="number")return 0;if(typeof ux=="number"&&ux===1)return fx;if(typeof ux=="number"&&ux===-1)return a.unaryMinus(fx);var gx=Ct(fx),yx=Ct(ux);return on(a.divide(gx,yx))}),ix=l(function(fx,ux){if(typeof fx=="number")return fx;if(typeof ux=="number"&&ux===1||typeof ux=="number"&&ux===-1)return 0;var gx=Ct(fx),yx=Ct(ux);return on(a.remainder(gx,yx))}),ax=l(function(fx,ux){if(typeof ux=="number"){if(ux===0)return 1;if(ux===1)return fx;if(ux===2)return Cn(fx,fx);if(typeof fx=="number"&&Math.abs(fx)>2&&ux>=0){if(ux>42&&fx%2===0)return Cn(ax(2,ux),ax(fx/2,ux));var gx=Math.floor(Math.log(9007199254740991)/Math.log(Math.abs(fx)+.5));if(gx>=2)return Cn(Math.pow(fx,ux%gx),ax(Math.pow(fx,gx),Math.floor(ux/gx)))}}var yx=Ct(fx),_x=Ct(ux),vx=a.exponentiate(yx,_x);return typeof fx=="number"&&Math.abs(fx)<=1?on(vx):vx}),ox=l(function(fx){var ux=Ct(fx);return a.unaryMinus(ux)}),lx=l(function(fx,ux){return typeof fx=="number"||typeof ux=="number"?!1:a.equal(fx,ux)}),cx=l(function(fx,ux){return typeof fx=="number"?fx<a.toNumber(ux):typeof ux=="number"?a.toNumber(fx)<ux:a.lessThan(fx,ux)}),dx=l(function(fx,ux){return typeof fx=="number"?fx>a.toNumber(ux):typeof ux=="number"?a.toNumber(fx)>ux:a.greaterThan(fx,ux)});function hx(){}hx.BigInt=function(fx){if(typeof fx=="number"||typeof fx=="string"||typeof fx=="bigint"){var ux=0+(typeof fx=="number"?fx:Number(fx));if(ux>=-9007199254740991&&ux<=9007199254740991)return ux}return on(a.BigInt(fx))},hx.asIntN=function(fx,ux){return on(a.asIntN(fx,a.BigInt(ux)))},hx.asUintN=function(fx,ux){if(typeof ux=="number"&&ux>=0&&fx>=0&&fx<=53){var gx=Math.pow(2,fx);return ux-Math.floor(ux/gx)*gx}return on(a.asUintN(fx,a.BigInt(ux)))},hx.toNumber=function(fx){return typeof fx=="number"?fx:Q(fx)},hx.add=function(fx,ux){if(typeof fx=="number"&&typeof ux=="number"){var gx=fx+ux;if(gx>=-9007199254740991&&gx<=9007199254740991)return gx}return cn(fx,ux)},hx.subtract=function(fx,ux){if(typeof fx=="number"&&typeof ux=="number"){var gx=fx-ux;if(gx>=-9007199254740991&&gx<=9007199254740991)return gx}return gn(fx,ux)},hx.multiply=function(fx,ux){if(typeof fx=="number"&&typeof ux=="number"){var gx=0+fx*ux;if(gx>=-9007199254740991&&gx<=9007199254740991)return gx}return Cn(fx,ux)},hx.divide=function(fx,ux){return typeof fx=="number"&&typeof ux=="number"&&ux!==0?fx===0?0:fx>0&&ux>0||fx<0&&ux<0?0+Math.floor(fx/ux):0-Math.floor((0-fx)/ux):ex(fx,ux)},hx.remainder=function(fx,ux){return typeof fx=="number"&&typeof ux=="number"&&ux!==0?0+fx%ux:ix(fx,ux)},hx.unaryMinus=function(fx){return typeof fx=="number"?0-fx:ox(fx)},hx.equal=function(fx,ux){return typeof fx=="number"&&typeof ux=="number"?fx===ux:lx(fx,ux)},hx.lessThan=function(fx,ux){return typeof fx=="number"&&typeof ux=="number"?fx<ux:cx(fx,ux)},hx.greaterThan=function(fx,ux){return typeof fx=="number"&&typeof ux=="number"?fx>ux:dx(fx,ux)},hx.notEqual=function(fx,ux){return!hx.equal(fx,ux)},hx.lessThanOrEqual=function(fx,ux){return!hx.greaterThan(fx,ux)},hx.greaterThanOrEqual=function(fx,ux){return!hx.lessThan(fx,ux)},hx.exponentiate=function(fx,ux){if(typeof fx=="number"&&typeof ux=="number"&&ux>=0&&(ux<53||fx>=-1&&fx<=1)){var gx=0+Math.pow(fx,ux);if(gx>=-9007199254740991&&gx<=9007199254740991)return gx}return ax(fx,ux)},hx.signedRightShift=function(fx,ux){return on(a.signedRightShift(Ct(fx),Ct(ux)))},hx.leftShift=function(fx,ux){if(typeof ux=="number"&&ux>=0){if(typeof fx=="number"){var gx=ux===0?fx:fx*Math.pow(2,ux);if(gx>=-9007199254740991&&gx<=9007199254740991)return gx}return a.leftShift(Ct(fx),Ct(ux))}return on(a.leftShift(Ct(fx),Ct(ux)))},Symbol.hasInstance!=null&&Object.defineProperty(hx,Symbol.hasInstance,{value:function(fx){return typeof fx=="number"||fx instanceof a}}),globalThis.SmallBigInt=hx,globalThis.JSBI=n?t:globalThis.JSBI||globalThis.BigInteger,a=globalThis.JSBI,tn()})();function Matrix$1(t){this.a=t}Matrix$1.Zero=function(t,n){for(var a=new Array(n),l=0;l<n;l+=1)a[l]=Expression.ZERO;for(var u=new Array(t),c=0;c<t;c+=1)u[c]=a;return new Matrix$1(u)};Matrix$1.I=function(t){return Matrix$1.Zero(t,t).map(function(n,a,l){return a===l?Expression.ONE:Expression.ZERO})};Matrix$1.prototype.rows=function(){return this.a.length};Matrix$1.prototype.cols=function(){return this.a.length>0?this.a[0].length:0};Matrix$1.prototype.e=function(t,n){return this.a[t][n]};Matrix$1.prototype.isSquare=function(){return this.rows()>0&&this.rows()===this.cols()};Matrix$1.prototype.map=function(t){for(var n=this.rows(),a=this.cols(),l=new Array(n),u=-1;++u<n;){for(var c=new Array(a),p=-1;++p<a;){var d=t.call(void 0,this.e(u,p),u,p,this);c[p]=d.simplifyExpression()}l[u]=c}return new Matrix$1(l)};Matrix$1.prototype.transpose=function(){var t=this;return Matrix$1.Zero(t.cols(),t.rows()).map(function(n,a,l){return t.e(l,a)})};Matrix$1.prototype.scale=function(t){return this.map(function(n,a,l){return n.multiply(t)})};Matrix$1.prototype.multiply=function(t){var n=this;if(n.cols()!==t.rows())throw new RangeError("DimensionMismatchException");return Matrix$1.Zero(n.rows(),t.cols()).map(function(a,l,u){for(var c=t.rows(),p=-1;++p<c;){//! this code is used to show not simplified expressions
var d=n.e(l,p).multiply(t.e(p,u));a=p===0?d:a.add(d)}return a})};Matrix$1.prototype.add=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())throw new RangeError("MatrixDimensionMismatchException");return n.map(function(a,l,u){return a.add(t.e(l,u))})};Matrix$1.prototype.augment=function(t){if(this.rows()!==t.rows())throw new RangeError("NonSquareMatrixException");var n=this;return Matrix$1.Zero(n.rows(),n.cols()+t.cols()).map(function(a,l,u){return u<n.cols()?n.e(l,u):t.e(l,u-n.cols())})};Matrix$1.prototype.rowReduce=function(t,n,a,l){for(var u=this.rows(),c=this.cols(),p=new Array(u),d=-1;++d<u;)if(t===d){for(var Q=new Array(c),Ct=l==null?this.e(t,a).divide(this.e(n,a)):void 0,ar=-1;++ar<c;){var en=void 0;l==null?en=this.e(t,ar).subtract(Ct.multiply(this.e(n,ar))):en=this.e(n,a).multiply(this.e(t,ar)).subtract(this.e(t,a).multiply(this.e(n,ar))).divide(l),Q[ar]=en.simplifyExpression()}p[d]=Q}else p[d]=this.a[d];return new Matrix$1(p)};Matrix$1.prototype.swapRows=function(t,n,a){var l=this;return l.map(function(u,c,p){return c===t?l.e(n,p):c===n?a?l.e(t,p).negate():l.e(t,p):u})};var notEqualsZero=function(t,n){if(n!=null){//!update from 2018-16-07
return n.andZero(t).isFalse()}return!t.equals(Expression.ZERO)};Matrix$1.check=function(t,n,a,l,u){for(var c=a;c<l;c+=1)if(t!=="solving"||notEqualsZero(n.e(c,n.cols()-1),u)){for(var p=t==="solving"?n.cols()-1:t==="determinant"?n.cols():t==="inverse"?Math.floor(n.cols()/2):-1,d=0;d<p&&n.e(c,d).equals(Expression.ZERO);)d+=1;if(d===p)return c}return-1};Matrix$1.toRowEchelonStep=function(t,n,a,l,u,c,p){var d=void 0,Q=void 0,Ct=0;if(l!==n&&(d=t,t=t.swapRows(n,l,c.usage==="determinant"),c.callback!=null&&c.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:c.usage==="determinant"?"swap-negate":"swap",targetRow:n,pivotRow:l,pivotColumn:a})),c.method===Matrix$1.GaussJordan&&(t.e(n,a).equals(Expression.ONE)||(d=t,Q=Expression.ONE.divide(t.e(n,a)),t=t.map(function(en,tn,on){return tn!==n?en:en.multiply(Q)}),c.callback!=null&&c.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:"divide",targetRow:n,pivotRow:n,pivotColumn:a}))),c.method===Matrix$1.Gauss||c.method===Matrix$1.GaussJordan){for(Ct=n;++Ct<t.rows();)if(!t.e(Ct,a).equals(Expression.ZERO)){d=t,t=t.rowReduce(Ct,n,a),c.callback!=null&&c.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:"reduce",targetRow:Ct,pivotRow:n,pivotColumn:a});var ar=Matrix$1.check(c.usage,t,Ct,Ct+1,p);if(ar!==-1)return{stoppedAtRow:ar,matrix:t}}}if(c.method===Matrix$1.GaussMontante){for(d=t,Ct=-1;++Ct<t.rows();)Ct!==n&&(t=t.rowReduce(Ct,n,a,u));c.callback!=null&&c.callback({previousPivot:u,newMatrix:t,oldMatrix:d,type:"pivot",targetRow:-1,pivotRow:n,pivotColumn:a});var ar=Matrix$1.check(c.usage,t,0,t.rows(),p);if(ar!==-1)return{stoppedAtRow:ar,matrix:t}}return{stoppedAtRow:-1,matrix:t}};Matrix$1.toRowEchelonBackSubstitution=function(t,n,a){if(a.method===Matrix$1.GaussJordan)for(;--n>=0;){for(var l=0;l<t.cols()&&t.e(n,l).equals(Expression.ZERO);)l+=1;if(l<t.cols()){for(var u=n;--u>=0;)if(!t.e(u,l).equals(Expression.ZERO)){var c=t;t=t.rowReduce(u,n,l),a.callback!=null&&a.callback({previousPivot:void 0,newMatrix:t,oldMatrix:c,type:"reduce",targetRow:u,pivotRow:n,pivotColumn:l})}}}return t};var isConditionValid=function(t,n){for(var a=0;a<n.rows();a++)for(var l=0;l<n.cols();l++){var u=n.e(a,l);if(!Polynomial._isIntegerLike(u)){if(Polynomial._isIntegerLike(u.getNumerator())){//!!! for performance
u=u.getDenominator().inverse()}if(t.andZero(u).isFalse()&&t.andNotZero(u).isFalse())return!1}}return!0};Matrix$1.Gauss="Gauss";Matrix$1.GaussJordan="Gauss-Jordan";Matrix$1.GaussMontante="Gauss-Montante";function ToRowEchelonOptions(t,n,a){if(n!=="determinant"&&n!=="inverse"&&n!=="solving"&&n!=="LU-decomposition"&&n!==""&&n!=="row-reduction")throw new RangeError;if(t!==Matrix$1.Gauss&&t!==Matrix$1.GaussJordan&&t!==Matrix$1.GaussMontante)throw new RangeError;this.method=t,this.usage=n,this.callback=a}Matrix$1.ToRowEchelonOptions=ToRowEchelonOptions;var COLUMN_LOOP=0,ZERO=1,NOT_ZERO=2;Matrix$1.prototype.toRowEchelon=function(t,n,a){var l=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(l,0,-1,-1,Expression.ONE,COLUMN_LOOP,void 0)};Matrix$1.prototype.toRowEchelonXXX=function(t,n,a,l){var u=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(u,0,-1,-1,Expression.ONE,COLUMN_LOOP,l)};Matrix$1.prototype.toRowEchelonInternal=function(t,n,a,l,u,c,p){var d=this;p!=null&&!p.isTrue()&&(d=d.map(function(Cn,ex,ix){return p.updateExpression(Cn)}),u=p.updateExpression(u));var Q=Matrix$1.check(t.usage,d,0,d.rows(),p);if(Q!==-1)return{stoppedAtRow:Q,matrix:d,condition:p};for(;;)switch(c){case COLUMN_LOOP:if(a+=1,a>=d.cols())return d=Matrix$1.toRowEchelonBackSubstitution(d,n,t),{stoppedAtRow:-1,matrix:d,condition:p};if(a>n&&(t.usage==="determinant"||t.usage==="inverse"))return a>=Math.floor(d.cols()/2)&&t.usage==="inverse"?(d=Matrix$1.toRowEchelonBackSubstitution(d,n,t),{stoppedAtRow:-1,matrix:d,condition:p}):{stoppedAtRow:n,matrix:d,condition:p};l=n-1,c=ZERO;break;case ZERO:if(p==null)l+=1,l<d.rows()?d.e(l,a).equals(Expression.ZERO)?c=ZERO:c=NOT_ZERO:c=COLUMN_LOOP;else{l>=n&&(d=n>=d.rows()||d.e(n,a).equals(Expression.ZERO)?d:d.map(function(ex,ix,ax){return p.updateExpression(ex)}),u=p.updateExpression(u));var Ct=!1;if(l===n-1){//!
for(var ar=n;ar<d.rows()&&!((p.andZero(d.e(ar,a)).isFalse()||t.usage==="LU-decomposition")&&!d.e(ar,a).equals(Expression.ZERO));)ar+=1;ar<d.rows()&&(l=ar,Ct=!0)}//!
if(Ct)c=NOT_ZERO;else if(l+=1,l<d.rows()){var en=d.e(l,a),tn=p.andNotZero(en),on=p.andZero(en);if(!on.isFalse()){//!new 2020-01-03
if(!isConditionValid(on,d)){debugger;on=Condition.FALSE;//!!!
p=tn;//!
}//!
}if(on.isFalse())c=NOT_ZERO;else if(tn.isFalse())c=ZERO;else{if(t.usage==="row-reduction"){var gn=Matrix$1.toRowEchelonStep(d,n,a,l,u,Object.assign({},t,{callback:null}),p),cn=gn.matrix.slice(l+1,d.rows(),a,d.cols()).map(function(ix,ax,ox){return on.updateExpression(ix)});if(cn.eql(Matrix$1.Zero(cn.rows(),cn.cols())))return d.toRowEchelonInternal(t,n,a,l,u,NOT_ZERO,p)}return{matrix:d,c1:tn,a1:function(){return d.toRowEchelonInternal(t,n,a,l,u,NOT_ZERO,tn)},c2:on,a2:function(){return d.toRowEchelonInternal(t,n,a,l,u,ZERO,on)}}}}else c=COLUMN_LOOP}break;case NOT_ZERO:var gn=Matrix$1.toRowEchelonStep(d,n,a,l,u,t,p),Q=gn.stoppedAtRow;if(d=gn.matrix,Q!==-1)return{stoppedAtRow:Q,matrix:d,condition:p};u=d.e(n,a),n+=1,c=COLUMN_LOOP;break}};Matrix$1.prototype.determinant=function(){var t=this.rows();if(!this.isSquare()||t===0)throw new RangeError("NonSquareMatrixException");var n,a,l,n=this.toRowEchelon(Matrix$1.GaussMontante,"determinant",void 0),a=n.stoppedAtRow,l=n.matrix;return a!==-1?Expression.ZERO:l.e(t-1,t-1)};Matrix$1.prototype.rank=function(){for(var t=this.toRowEchelon(Matrix$1.GaussMontante,"",void 0).matrix,n=0,a=0,l=0;a<t.rows();){for(;l<t.cols()&&t.e(a,l).equals(Expression.ZERO);)l+=1;l<t.cols()&&(n+=1),a+=1}return n};Matrix$1.prototype.inverse=function(){if(!this.isSquare())throw new RangeError("NonSquareMatrixException");if(this.rows()===2){var t=this.e(0,0),n=this.e(0,1),a=this.e(1,0),l=this.e(1,1),u=t.multiply(l).subtract(n.multiply(a));if(u.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");return Matrix$1.Zero(this.rows(),this.rows()).map(function(p,d,Q){return(d===0?Q===0?l:n.negate():Q===0?a.negate():t).divide(u)})}var c=this.augment(Matrix$1.I(this.rows()));return c=c.toRowEchelon(Matrix$1.GaussMontante,"inverse",void 0).matrix,Matrix$1.Zero(c.rows(),c.rows()).map(function(p,d,Q){var Ct=c.e(d,d);if(Ct.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");var ar=c.e(d,Q+c.rows());return Ct.equals(Expression.ONE)?ar:ar.divide(Ct)})};Matrix$1.prototype.toString=function(t){var n="",a=this.rows(),l=this.cols();if(a===0&&l===0)throw new RangeError;var u=-1;for(n+="{";++u<a;){u!==0&&(n+=","),n+="{";for(var c=-1;++c<l;)c!==0&&(n+=","),n+=this.e(u,c).toString(t);n+="}"}return n+="}",n};Matrix$1.prototype.negate=function(){return this.map(function(t,n,a){return t.negate()})};Matrix$1.prototype.subtract=function(t){return this.add(t.negate())};Matrix$1.prototype.getElements=function(){for(var t=this.rows(),n=this.cols(),a=new Array(t),l=0;l<t;l+=1){for(var u=new Array(n),c=0;c<n;c+=1)u[c]=this.e(l,c).toString();a[l]=u}return a};Matrix$1.prototype.slice=function(t,n,a,l){var u=this;return Matrix$1.Zero(n-t,l-a).map(function(c,p,d){return u.e(p+t,d+a)})};Matrix$1.prototype.isExact=function(){for(var t=this.rows(),n=this.cols(),a=0;a<t;a+=1)for(var l=0;l<n;l+=1)if(!this.e(a,l).isExact())return!1;return!0};Matrix$1.prototype.eql=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())return!1;for(var a=0;a<n.rows();a+=1)for(var l=0;l<n.cols();l+=1)if(!n.e(a,l).equals(t.e(a,l)))return!1;return!0};Matrix$1.prototype.pow=function(t){if(!(t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError;var n=function(a,l,u){return l<1?u:2*Math.floor(l/2)!==l?n(a,l-1,u.multiply(a)):n(a.multiply(a),Math.floor(l/2),u)};return n(this,t,Matrix$1.I(this.rows()))};Matrix$1.split=function(t){t=t.replace(/\b(sin|cos)\x20/g,"$1");var n=[],a=t;if(/^\s*\[[^\[\]]*\]\s*$/.exec(a)!=null){//!
a=a.replace(/\[/g," "),a=a.replace(/\]/g," ")}//!
if(a.replace(/^\s+|\s+$/g,"")!==""){a=a.replace(/;/g,`
`),a=a.replace(/\r/g,`
`);var l=[];n.push(l);for(var u=0,c=void 0;(c=/^\s*\S+/.exec(a.slice(u)))!=null;){var p=c[0];p.indexOf(`
`)!==-1&&l.length!==0&&(l=[],n.push(l),p=p.replace(/\n/g," ")),l.push(p),u+=p.length}}//!new 2023-05-07
for(var d=0;d<n.length;d++)n[d].length===1&&/,/.test(n[d][0])&&(n[d]=n[d][0].split(","));return n};Matrix$1.padRows=function(t,n){for(var a=t.length,l=0,u=0;u<t.length;u+=1)l=Math.max(l,t[u].length);for(var c=new Array(a),p=0;p<a;p+=1){for(var d=t[p],Q=new Array(l),Ct=0;Ct<l;Ct+=1)Q[Ct]=Ct<d.length?n!=null?n(d[Ct]):d[Ct]:Expression.ZERO;c[p]=Q}return new Matrix$1(c)};Matrix$1.solveByGaussNext=function(t,n){for(var a=new Array(t.cols()-1),l=0;l<t.cols()-1;l+=1)a[l]=-1;for(var u=t.rows()-1;u>=0;u-=1){for(var c=0;c<t.cols()-1&&t.e(u,c).equals(Expression.ZERO);)c+=1;if(c<t.cols()-1){a[c]=u;for(var p=t,l=c+1;l<t.cols()-1;l+=1)if(!t.e(u,l).equals(Expression.ZERO)){var d=a[l];d!==-1&&(t=t.rowReduce(u,d,l))}var Q=t;if(!t.e(u,c).equals(Expression.ONE)){var Ct=t.e(u,c);t=t.map(function(ar,en,tn){return en===u?ar.divide(Ct):ar})}n!=null&&n(t,p,Q,u,c)}}return t};Matrix$1.getPivotRow=function(t,n){for(var a=t.rows()-1;a>=0&&t.e(a,n).equals(Expression.ZERO);)a-=1;if(a>=0){for(var l=n-1;l>=0&&t.e(a,l).equals(Expression.ZERO);)l-=1;if(l<0)return a}return-1};Matrix$1.getSolutionSet=function(t){for(var n={basisVectors:[],variables:[]},a=0;a<t.cols()-1;a+=1)if(Matrix$1.getPivotRow(t,a)===-1){for(var l=new Array(t.cols()-1),u=0;u<t.cols()-1;u+=1){var c=Matrix$1.getPivotRow(t,u);l[u]=c!==-1?t.e(c,a).negate():u===a?Expression.ONE:Expression.ZERO}var p=new Vector(l);n.basisVectors.push(p),n.variables.push(a)}return n};Matrix$1.prototype.minorMatrix=function(t,n){var a=this;return Matrix$1.Zero(this.rows()-1,this.cols()-1).map(function(l,u,c){return a.e(u<t?u:u+1,c<n?c:c+1)})};Matrix$1.toRowEchelonWithCallback=function(t,n,a,l,u){var c=t.toRowEchelonXXX(n,a,l,Condition.TRUE),p=function(d){d.c1==null&&d.c2==null?u(d):(p(d.a1()),p(d.a2()))};p(c)};Matrix$1.prototype.isDiagonal=function(){return this.eql(this.map(function(t,n,a){return n!==a?Expression.ZERO:t}))};Matrix$1.prototype.isScalar=function(){var t=this;return this.eql(this.map(function(n,a,l){return a!==l?Expression.ZERO:t.e(0,0)}))};Matrix$1.prototype.isNilpotent=function(){var t=this.map(function(n,a,l){return l<=a?Expression.ZERO:n});if(this.eql(t)){//! This method only tests if it nilpotent based on a property and so may return false for the positive result
return!0}return this.pow(this.cols()).eql(Matrix$1.Zero(this.cols(),this.cols()))};Matrix$1.prototype.isJordanMatrix=function(){var t=this;return this.eql(this.map(function(n,a,l){return a===l?n:l===a+1&&t.e(a,a).equals(t.e(a+1,a+1))&&!t.e(a,l).equals(Expression.ZERO)?Expression.ONE:Expression.ZERO}))};Matrix$1.prototype.isZero=function(){return this.eql(Matrix$1.Zero(this.rows(),this.cols()))};function Vector(t){this.elements=t}Vector.prototype.e=function(t){return this.elements[t]};Vector.prototype.dimensions=function(){return this.elements.length};Vector.prototype.rows=function(){return this.dimensions()};Vector.prototype.cols=function(){return 1};Vector.prototype.isExact=function(){for(var t=0;t<this.dimensions();t+=1)if(!this.e(t).isExact())return!1;return!0};Vector.prototype.toString=function(t){return Matrix$1.prototype.toString.call(this,t)};Vector.prototype.dot=function(t){let n=Expression.ZERO;for(let l=0;l<Math.max(this.dimensions(),t.dimensions());l+=1){var a=this.e(l).multiply(t.e(l).complexConjugate());n=n===Expression.ZERO?a:n.add(a)}return n};Vector.prototype.toUnitVector=function(){var t=this.dot(this).squareRoot();return this.scale(t.inverse())};Vector.prototype.scale=function(t){return new Vector(this.elements.map(n=>t.multiply(n)))};Vector.prototype.subtract=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions(),a=new Array(n);for(let l=0;l<n;l+=1)a[l]=this.e(l).subtract(t.e(l));return new Vector(a)};Vector.prototype.eql=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions();for(var a=0;a<n;a+=1)if(!this.e(a).equals(t.e(a)))return!1;return!0};Vector.Zero=function(t){return new Vector(new Array(t).fill(Expression.ZERO))};Matrix$1.Vector=Vector;Matrix$1.prototype.row=function(t){const n=new Array(this.cols());for(let a=0;a<this.cols();a+=1)n[a]=this.e(t,a);return new Vector(n)};Matrix$1.prototype.col=function(t){const n=new Array(this.rows());for(let a=0;a<this.rows();a+=1)n[a]=this.e(a,t);return new Vector(n)};function Heap(t){this.data=[],this.compareTo=t}Heap.prototype.push=function(t){var n=this.data,a=this.compareTo;n.push(t);for(var l=n.length,u=l-1,c=n[u],p=-1;u>0&&a(c,n[p=Math.floor((u-1)/2)])<0;)n[u]=n[p],u=p;n[u]=c};Heap.prototype.pop=function(){var t=this.data,n=this.compareTo,a=t.length;if(a!==0){if(a===1)return t.pop();var l=t[0];t[0]=t.pop(),--a;var u=0;if(u<a){var c=t[u];do{var p=a,d=c,Q=u*2;++Q<a&&n(t[Q],d)<0&&(p=Q,d=t[p]),++Q<a&&n(t[Q],d)<0&&(p=Q,d=t[p]),t[u]=d,u=p}while(u<a)}return l}};Heap.prototype.peek=function(){var t=this.data;return t.length>0?t[0]:void 0};Heap.prototype.size=function(){var t=this.data;return t.length};Heap.prototype.replace=function(t){return this.data.push(t),this.pop()};const DefaultYField={ONE:1,sub:function(t,n){return t-n},mul:function(t,n){return t*n},div:function(t,n){return t/n},scale:function(t,n){return t*Number(n)}};let yField=DefaultYField;function NewtonInterpolation(){let t=function(){let Q=[],Ct=[],ar=!0,en=yField.ONE,tn=yField.ONE,on=!0;const cn={next:function(gn){for(;;){if(on)return on=!1,{value:tn,done:!1};const[Cn,ex]=gn;if(ar&&Q.length>=2&&Q[Q.length-1]-Q[Q.length-2]!==Cn-Q[Q.length-1]){const ax=Q[Q.length-1]-Q[Q.length-2];en=yField.ONE;for(let ox=1;ox<Ct.length;ox+=1)en=yField.scale(en,ax*ox),Ct[ox]=yField.div(Ct[ox],en);ar=!1}let ix=ex;for(let ax=0;ax<Ct.length;ax+=1){let ox=yField.sub(ix,Ct[ax]);ar||(ox=yField.div(ox,yField.scale(yField.ONE,Cn-Q[Q.length-1-ax]))),Ct[ax]=ix,ix=ox}if(Ct.push(ix),Q.push(Cn),tn=Ct[Ct.length-1],ar&&Q.length>=2){const ax=Ct.length-1,ox=Q[Q.length-1]-Q[Q.length-2];en=yField.scale(en,ox*ax),tn=yField.div(tn,en)}return{value:tn,done:!1}}}};return cn[globalThis.Symbol.iterator]=function(){return this},cn};const n=yField.sub(yField.ONE,yField.ONE),a=yField.ONE;let l=t();l.next();let u=[a],c=[],p=!0;const d={next:function(Q){for(;;){if(p)return p=!1,{value:c,done:!1};const[Ct,ar]=Q,en=yField.sub(n,l.next([Ct,ar]).value);c.push(n);for(let tn=u.length-1;tn>=0;tn-=1)c[tn]=yField.sub(c[tn],yField.mul(u[tn],en));u.push(n);for(let tn=u.length-1;tn>=0;tn-=1)u[tn]=yField.sub(tn>=1?u[tn-1]:n,yField.scale(u[tn],Ct));return{value:c,done:!1}}}};return d[globalThis.Symbol.iterator]=function(){return this},d}NewtonInterpolation.setField=function(t){yField=t||DefaultYField};globalThis.NewtonInterpolation=NewtonInterpolation;var seedrandom$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom=seedrandom$1.exports,hasRequiredSeedrandom;function requireSeedrandom(){return hasRequiredSeedrandom||(hasRequiredSeedrandom=1,function(t){(function(n,a,l){var u=256,c=6,p=52,d="random",Q=l.pow(u,c),Ct=l.pow(2,p),ar=Ct*2,en=u-1,tn;function on(ox,lx,cx){var dx=[];lx=lx==!0?{entropy:!0}:lx||{};var hx=ex(Cn(lx.entropy?[ox,ax(a)]:ox??ix(),3),dx),fx=new cn(dx),ux=function(){for(var gx=fx.g(c),yx=Q,_x=0;gx<Ct;)gx=(gx+_x)*u,yx*=u,_x=fx.g(1);for(;gx>=ar;)gx/=2,yx/=2,_x>>>=1;return(gx+_x)/yx};return ux.int32=function(){return fx.g(4)|0},ux.quick=function(){return fx.g(4)/4294967296},ux.double=ux,ex(ax(fx.S),a),(lx.pass||cx||function(gx,yx,_x,vx){return vx&&(vx.S&&gn(vx,fx),gx.state=function(){return gn(fx,{})}),_x?(l[d]=gx,yx):gx})(ux,hx,"global"in lx?lx.global:this==l,lx.state)}function cn(ox){var lx,cx=ox.length,dx=this,hx=0,fx=dx.i=dx.j=0,ux=dx.S=[];for(cx||(ox=[cx++]);hx<u;)ux[hx]=hx++;for(hx=0;hx<u;hx++)ux[hx]=ux[fx=en&fx+ox[hx%cx]+(lx=ux[hx])],ux[fx]=lx;(dx.g=function(gx){for(var yx,_x=0,vx=dx.i,bx=dx.j,xx=dx.S;gx--;)yx=xx[vx=en&vx+1],_x=_x*u+xx[en&(xx[vx]=xx[bx=en&bx+yx])+(xx[bx]=yx)];return dx.i=vx,dx.j=bx,_x})(u)}function gn(ox,lx){return lx.i=ox.i,lx.j=ox.j,lx.S=ox.S.slice(),lx}function Cn(ox,lx){var cx=[],dx=typeof ox,hx;if(lx&&dx=="object")for(hx in ox)try{cx.push(Cn(ox[hx],lx-1))}catch{}return cx.length?cx:dx=="string"?ox:ox+"\0"}function ex(ox,lx){for(var cx=ox+"",dx,hx=0;hx<cx.length;)lx[en&hx]=en&(dx^=lx[en&hx]*19)+cx.charCodeAt(hx++);return ax(lx)}function ix(){try{var ox;return tn&&(ox=tn.randomBytes)?ox=ox(u):(ox=new Uint8Array(u),(n.crypto||n.msCrypto).getRandomValues(ox)),ax(ox)}catch{var lx=n.navigator,cx=lx&&lx.plugins;return[+new Date,n,cx,n.screen,ax(a)]}}function ax(ox){return String.fromCharCode.apply(0,ox)}if(ex(l.random(),a),t.exports){t.exports=on;try{tn=require$$0}catch{}}else l["seed"+d]=on})(typeof self<"u"?self:seedrandom,[],Math)}(seedrandom$1)),seedrandom$1.exports}requireSeedrandom();function combinations(t,n){const a=t.length;let l=new Array(n+1).fill(-1),u=new Array(n).fill(void 0),c=0,p={next:function(){for(;c>=0;)if(c<n){const d=l[c];d<a-n+c?(l[c]=d+1,u[c]=t[d+1],c+=1,l[c]=d+1):c-=1}else return c-=1,{value:u.slice(0),done:!1};return{value:void 0,done:!0}}};return p[globalThis.Symbol.iterator]=function(){return this},p}function modulo(t,n){return t-Math.floor(t/n)*n}function check(t){if(typeof t!="number"||Math.abs(t)>Number.MAX_SAFE_INTEGER)throw new RangeError}function schoolbook(t,n){const a=new Array(t.length===0||n.length===0?0:t.length-1+n.length-1+1);for(let l=0;l<a.length;l+=1){const u=Math.max(0,l-(n.length-1)),c=Math.min(l,t.length-1);let p=t[u]*n[l-u];for(let d=u+1;d<=c;d+=1)p+=t[d]*n[l-d];a[l]=p}return a}function absMax(t){let n=0;for(let a=0;a<t.length;a+=1)n=Math.max(n,Math.abs(t[a]));return n}function multiply(t,n){return check(absMax(t)*absMax(n)*Math.min(t.length,n.length)),schoolbook(t,n)}function IntPolynomial(t){let n=t.length;for(;n>0&&t[n-1]==0;)n-=1;t.length=n,check(absMax(t)),this.coefficients=t}IntPolynomial.prototype.add=function(t){const n=this.coefficients,a=t.coefficients,l=new Array(Math.max(n.length,a.length));for(let u=0;u<l.length;u+=1)u<n.length&&u<a.length?l[u]=n[u]+a[u]:u<n.length?l[u]=n[u]:l[u]=a[u];return new IntPolynomial(l)};IntPolynomial.prototype.subtract=function(t){return this.add(t.negate())};IntPolynomial.prototype.multiply=function(t){const n=this.coefficients,a=t.coefficients;return new IntPolynomial(multiply(n,a))};IntPolynomial.prototype.divideAndRemainderModP=function(t,n){const a=this.coefficients,l=t.coefficients;if(a.length<l.length)return{quotient:new IntPolynomial([]),remainder:this.mod(n)};if(l.length===0)throw new RangeError;const u=l[l.length-1];if(u!=1)throw new RangeError;check(n*n*l.length);const c=new Array(a.length);for(let Ct=0;Ct<a.length;Ct+=1)c[Ct]=a[Ct];let p=c.length-1;const d=new Array(a.length-l.length+1),Q=u-u;for(let Ct=0;Ct<d.length;Ct+=1)d[Ct]=Q;for(;p>=l.length-1;){const Ct=p-l.length+1,ar=modulo(c[p],n);if(d[Ct]=ar,ar!=0)if(ar==1)for(let en=0;en<l.length;en+=1)c[en+Ct]-=l[en];else for(let en=0;en<l.length;en+=1)c[en+Ct]-=ar*l[en];for(;p>=0&&modulo(c[p],n)==0;)c[p]=Q,p-=1}for(let Ct=0;Ct<=p;Ct+=1)c[Ct]=modulo(c[Ct],n);return{quotient:new IntPolynomial(d),remainder:new IntPolynomial(c)}};IntPolynomial.prototype.negate=function(t){return new IntPolynomial(this.coefficients.map(n=>n-n-n))};IntPolynomial.prototype.scale=function(t){return new IntPolynomial(this.coefficients.map(n=>n*t))};IntPolynomial.prototype.getDegree=function(){return this.coefficients.length-1};IntPolynomial.prototype.getLeadingCoefficient=function(){if(this.coefficients.length===0)throw new RangeError;return this.coefficients[this.coefficients.length-1]};IntPolynomial.prototype.getCoefficient=function(t){if(t>=this.coefficients.length)throw new RangeError;return this.coefficients[t]};IntPolynomial.prototype.derive=function(t){let n=new Array(this.coefficients.length-1);for(let a=0;a<n.length;a+=1)n[a]=(a+1)*this.coefficients[a+1];return new IntPolynomial(n)};IntPolynomial.prototype.mod=function(t){return new IntPolynomial(this.coefficients.map(n=>modulo(n,t)))};IntPolynomial.prototype.toString=function(){let t="",n=this.coefficients;for(let a=n.length-1;a>=0;a-=1)t+=n[a]>=0&&a!==n.length?"+":"",t+=n[a].toString(),a===1?t+="x":a!==0&&(t+="x^",t+=a);return t};IntPolynomial.from=function(t){return new IntPolynomial(t)};function toInt(t,n){return n instanceof Expression.Integer?Expression.Integer.fromBigInt(t):t}function fromInt(t){return t instanceof Expression.Integer?t:Expression.Integer.fromBigInt(t)}function toIntPolynomial(t,n){if(n instanceof Expression.Integer)return t.mod(n);for(var a=Expression.Integer.fromBigInt(n),l=new Array(t.getDegree()+1),u=0;u<l.length;u+=1)l[u]=t.getCoefficient(u).modulo(a).toBigInt();return IntPolynomial.from(l)}function fromIntPolynomial(t){for(var n=new Array(t.getDegree()+1),a=0;a<n.length;a+=1)n[a]=Expression.Integer.fromBigInt(t.getCoefficient(a));return Polynomial$1.from(n)}const isPrime$2=primeFactor._isPrime;function ExtendedEuclideanAlgorithm(t,n,a){t=t.mod(a),n=n.mod(a);let[l,u]=[t,n];const c=Polynomial$1.of(Expression.ZERO),p=Polynomial$1.of(a.divide(a));let[d,Q]=[p,c],[Ct,ar]=[c,p];for(;u.getDegree()>=0;){const gn=u.getLeadingCoefficient().modInverse(a),Cn=l.scale(gn).mod(a).divideAndRemainderModP(u.scale(gn).mod(a),a),ex=Cn.quotient;[l,u]=[u,Cn.remainder.scale(u.getLeadingCoefficient()).mod(a)],[d,Q]=[Q,d.subtract(ex.multiply(Q)).mod(a)],[Ct,ar]=[ar,Ct.subtract(ex.multiply(ar)).mod(a)]}const en=l.getLeadingCoefficient().modInverse(a),tn=l.scale(en).mod(a),on=d.scale(en).mod(a),cn=Ct.scale(en).mod(a);return{U:on,V:cn,gcd:tn}}function modPow(t,n,a,l){let u=t,c=null;for(;!n.equals(Expression.ZERO);)n.remainder(Expression.TWO).equals(Expression.ZERO)?(n=n.truncatingDivide(Expression.TWO),u=u.multiply(u).mod(l).divideAndRemainderModP(a,l).remainder):(n=n.subtract(Expression.ONE),c==null?c=u:c=c.multiply(u).mod(l).divideAndRemainderModP(a,l).remainder);return c}function distinctDegreeFactorization(t,n){t=t.mod(n);let a=1;const l=[];let u=t;u=toMonic(u,n);const c=n,p=t.constructor.from([toInt(0,n),toInt(1,n)]);let d=modPow(p,fromInt(c),u,c);for(;u.getDegree()>=2*a;){const Q=d.subtract(p).divideAndRemainderModP(u,c).remainder,Ct=gcdOfPolynomialsOverFiniteField(u,Q,c);Ct.getDegree()!==0&&(l.push({factor:Ct,degree:a}),u=u.divideAndRemainderModP(Ct,c).quotient),a=a+1,d=modPow(d,fromInt(c),u,c)}return u.getDegree()>0&&l.push({factor:u,degree:u.getDegree()}),l.length===0&&l.push({factor:t,degree:1}),l}function randomBigInt0(t,n=Math.random){if(console.assert(Math.floor(t)===t),t<=52)return Math.floor(n()*2**t);const a=Math.ceil(t/(2*52))*52;return(BigInt(randomBigInt0(t-a,n))<<BigInt(a))+BigInt(randomBigInt0(a,n))}function randomBigInt(t,n=Math.random){if(Number(t)<=2**52)return Math.floor(n()*Number(t));var a=Expression.Integer.fromBigInt(t).bitLength();return BigInt(randomBigInt0(a,n))*BigInt(t)>>BigInt(a)}function CantorZassenhausAlgorithm(t,n,a){t=t.mod(n),t=toMonic(t,n);const l=t.getDegree(),u=a,c=l/u,p=n;let d=[];d.push(t);const Q=Math.seedrandom!=null?new Math.seedrandom("hello."):Math.random;for(;d.length<c;){const Ct=t.constructor.from(new Array(l).fill(p).map(cn=>toInt(randomBigInt(fromInt(cn).toBigInt(),Q),cn))),ar=t.constructor.from([toInt(1,n)]),en=fromInt(p)._pow(u).subtract(Expression.ONE).truncatingDivide(Expression.TWO),tn=modPow(Ct,en,t,p).subtract(ar).divideAndRemainderModP(t,p).remainder,on=[];for(const cn of d){const gn=gcdOfPolynomialsOverFiniteField(tn,cn,p);gn.getDegree()!==0&&gn.getDegree()!==cn.getDegree()?(on.push(gn),on.push(cn.divideAndRemainderModP(gn,p).quotient)):on.push(cn)}d=on}return d}function factorizeOverTheFiniteField(t,n){if(!isFactorizationOverZpSquareFree(t,n))throw new RangeError("implemented only for square-free polynomials");let a=[];const l=distinctDegreeFactorization(t,n);for(const u of l){const c=CantorZassenhausAlgorithm(u.factor,n,u.degree);a=a.concat(c)}return a}function toMonic(t,n){if(t.getDegree()<0)return t;const a=toInt(fromInt(t.getLeadingCoefficient()).modInverse(fromInt(n)).toBigInt(),n);return t.scale(a).mod(n)}function gcdOfPolynomialsOverFiniteField(t,n,a){for(t=t.mod(a),n=n.mod(a),n=toMonic(n,a);n.getDegree()>=0;){let l=t.divideAndRemainderModP(n,a).remainder;l=toMonic(l,a),t=n,n=l}return t}function _gcdOfPolynomialsOverFiniteField0(t,n,a){return fromIntPolynomial(gcdOfPolynomialsOverFiniteField(toIntPolynomial(t,a),toIntPolynomial(n,a),a))}function isFactorizationOverZpSquareFree(t,n){const a=t;return gcdOfPolynomialsOverFiniteField(a,a.derive().mod(n),n).getDegree()===0}function factorizeOverTheIntegers(t,n=!0){const a=t;let l=null,u=null,c=null,p=!0,d=0,Q=null,Ct=0,ar=0,en=1,tn=null;const on={next:function(){if(t.getDegree()===0)return{value:null,done:!0};for(;t.getDegree()>1&&t.getCoefficient(0).equals(Expression.ZERO);){const ax=Polynomial$1.of(Expression.ZERO,Expression.ONE);return t=t.divideAndRemainder(ax,"undefined").quotient,{value:ax,done:!1}}if(t.getCoefficient(0).abs().bitLength()-t.getLeadingCoefficient().abs().bitLength()<-42){l==null&&(l=factorizeOverTheIntegers(t._exponentiateRoots(-1),n));const ax=l.next().value;return ax!=null?{value:ax._exponentiateRoots(-1),done:!1}:{value:null,done:!0}}if(t.isEven()&&a.getDegree()>=4){u==null&&(u=factorizeOverTheIntegers(t._exponentiateRoots(2),n));const ax=u.next().value;if(ax!=null){const ox=ax._exponentiateRoots(.5);return t=t.divideAndRemainder(ox,"undefined").quotient,{value:ox,done:!1}}}function cn(ax){return ax-Math.log2(Math.sqrt(Math.PI*Math.ceil(ax/2)))}function gn(ax){return cn(ax.getDegree())+ax._log2hypot()}function Cn(ax){return gn(ax)*.5}const ex=function(ax){return p?Cn(ax):gn(ax)},ix=function(ax){let ox=ax,lx=ox;do{do ox=Expression.Integer.fromBigInt(ox).add(Expression.TWO).toBigInt();while(!isPrime$2(ox));n?lx=ox:lx=Expression.Integer.fromBigInt(ox)}while(t.getLeadingCoefficient().remainder(Expression.Integer.fromBigInt(ox)).equals(Expression.ZERO)||!isFactorizationOverZpSquareFree(toIntPolynomial(t,lx),lx));return lx};if(Q==null){const ax=1+ex(t.scale(t.getLeadingCoefficient().abs()));n?d=ix(1):d=ix(Expression.TWO._pow(Math.ceil(ax)).add(Expression.ONE).toBigInt());const ox=n?2:0;if(ox!==0){let lx=d,cx=1/0;for(let dx=0;dx<ox&&cx>1;dx+=1){let hx=0;const fx=distinctDegreeFactorization(toIntPolynomial(t,d),d);for(const ux of fx)console.assert(ux.factor.getDegree()%ux.degree===0),hx+=ux.factor.getDegree()/ux.degree;cx>hx&&(lx=d,cx=hx),d=ix(d)}d=lx}if(Q=factorizeOverTheFiniteField(toIntPolynomial(t,d),d).map(lx=>n?fromIntPolynomial(lx):lx),n&&Q.length>15&&(p=!1),n){const lx=Math.ceil(ax/Math.log2(d)),cx=Expression.Integer.fromNumber(d);Q[Q.length-1]=Q[Q.length-1].scale(t.getLeadingCoefficient().modulo(cx)).mod(cx),Q=HenselLifting(t,Q,cx,lx),Ct=cx._pow(lx),Q=Q.map(dx=>dx.scale(dx.getLeadingCoefficient().modulo(Ct).modInverse(Ct)).mod(Ct))}else Ct=d}//!new 2022-07-27
if(t.isEven()&&a.getDegree()>=4){if(c==null){for(let ax=0;ax<Q.length;ax+=1)if(Q[ax]!=null){Q[ax].mod(Ct);const ox=Q[ax]._scaleRoots(Expression.ONE.negate()).mod(Ct);let lx=!1;for(let cx=ax+1;cx<Q.length&&!lx;cx+=1)Q[cx]!=null&&Q[cx].mod(Ct).equals(ox)&&(Q[cx]=null,lx=!0);if(!lx)return{value:null,done:!0}}Q=Q.filter(ax=>ax!=null);for(let ax=0;ax<Math.pow(2,Q.length-1)&&c==null;ax+=1){const ox=Q.map((cx,dx)=>Math.floor(ax/2**dx)%2===0?cx:cx._scaleRoots(Expression.ONE.negate()));let lx=!0;{const cx=t.getLeadingCoefficient();let dx=Expression.ZERO,hx=Expression.ZERO,fx=cx;for(const gx of ox){const yx=gx.getCoefficient(2),_x=gx.getCoefficient(1),vx=gx.getCoefficient(0);dx=dx.multiply(vx).add(hx.multiply(_x)).add(fx.multiply(yx)).modulo(Ct),hx=hx.multiply(vx).add(fx.multiply(_x)).modulo(Ct),fx=fx.multiply(vx).modulo(Ct)}let ux=Polynomial$1.of(fx,hx,dx).mod2(Ct);ux=ux.multiply(ux._scaleRoots(Expression.ONE.negate())),lx=ux.getCoefficient(2).abs().equals(t.getCoefficient(2).multiply(t.getLeadingCoefficient()).abs())}if(lx){const cx=productModQ(ox,Ct).scale(t.getLeadingCoefficient()).mod2(Ct).primitivePart(),dx=cx._scaleRoots(Expression.ONE.negate());cx.multiply(dx).equals(t)&&(c=[],c.push(cx),c.push(dx))}}}if(c!=null)for(;c.length>0;)return{value:c.pop(),done:!1};return{value:null,done:!0}}//!!! (number of factors depends on the choise of prime numbers)
for(;en<=(p?Q.length-1:Math.floor(Q.length/2));en+=1){tn=combinations(Q,en);let ax=null;for(;(ax=tn.next().value)!=null;){ar+=1;const ox=t.getLeadingCoefficient();let lx=ox;for(const cx of ax)lx=lx.multiply(cx.getCoefficient(0)).modulo(Ct);if(lx=Polynomial$1.of(lx).mod2(Ct).getCoefficient(0),t.getCoefficient(0).multiply(ox).remainder(lx).equals(Expression.ZERO)){let cx=productModQ(ax,Ct);console.assert(cx.getLeadingCoefficient().equals(Expression.ONE)),cx=cx.scale(ox),cx=cx.mod2(Ct),console.assert(cx.getDegree()<t.getDegree());const dx=t.scale(ox).divideAndRemainder(cx,"undefined");if(dx!=null&&dx.remainder.getDegree()<0){cx=cx.primitivePart(),Q=Q.filter(hx=>ax.indexOf(hx)===-1),tn=combinations(Q,en);//!?
return t=dx.quotient,ar>16&&console.debug(ar),{value:cx,done:!1}}}}}if(ar>16&&console.debug(ar),a.getDegree()>t.getDegree()){const ax=t.primitivePart();return t=Polynomial$1.of(t.getContent()),{value:ax,done:!1}}return{value:null,done:!0}}};return on[globalThis.Symbol.iterator]=function(){return this},on}function HenselLift(t,n,a,l,u,c,p){console.assert(c.isDivisibleBy(p));const d=t.subtract(n.multiply(a)).scale(c.inverse()).mod(p),Q=u.multiply(d).mod(p).divideAndRemainderModP(n.mod(p),p),Ct=Q.quotient,ar=Q.remainder,en=l.multiply(d).add(a.mod(p).multiply(Ct)).mod(p),tn=n.add(ar.scale(c)),on=a.add(en.scale(c));return[tn,on]}function QuadraticHenselLift(t,n,a,l,u){const c=u.divide(u),p=Polynomial$1.of(c).subtract(a.multiply(t)).subtract(l.multiply(n)).scale(u.inverse()).mod(u),d=l.multiply(p).mod(u).divideAndRemainderModP(t.mod(u),u),Q=d.quotient,Ct=a.multiply(p).add(n.mod(u).multiply(Q)).mod(u),ar=d.remainder,en=a.add(Ct.scale(u)),tn=l.add(ar.scale(u));return[en,tn]}function HenselLiftingOfTwoFactors(t,n,a,l,u){const c=ExtendedEuclideanAlgorithm(n,a,l);console.assert(c.gcd.getDegree()===0);let p=c.U,d=c.V;if(!(l instanceof Expression.Polynomial)){const ar=l;let en=1;for(;en<u/4;){[n,a]=HenselLift(t,n,a,p,d,l,l),[p,d]=QuadraticHenselLift(n,a,p,d,l),l=l.multiply(l),en*=2;{let cn=1;for(;en*cn<u;)cn*=2;(en-1)*cn>=u&&(en-=1,l=l.divide(ar))}}let tn=en,on=l;for(;en<u;)[n,a]=HenselLift(t,n,a,p,d,on,l),on=on.multiply(l),en+=tn;if(en!==u){const cn=ar._pow(u);n=n.mod(cn),a=a.mod(cn)}return[n,a]}let Ct=l;for(let ar=1;ar<u;ar+=1)[n,a]=HenselLift(t,n,a,p,d,Ct,l),Ct=Ct.multiply(l);return[n,a]}function productModQ(t,n){return console.assert(t.length>0),t.length>1?productModQ(t.slice(0,Math.ceil(t.length/2)),n).multiply(productModQ(t.slice(Math.ceil(t.length/2)),n)).mod(n):t[0]}function HenselLifting(t,n,a,l){if(n.length===1)return[t];const u=Math.ceil(n.length/2),c=n.slice(0,u),p=n.slice(u),[d,Q]=HenselLiftingOfTwoFactors(t,productModQ(c,a),productModQ(p,a),a,l);return HenselLifting(d,c,a,l).concat(HenselLifting(Q,p,a,l))}factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0=_gcdOfPolynomialsOverFiniteField0;function factorizeMultivariateIntegerPolynomial(t){function n(tn){var on=[];tn=tn.primitivePart();var cn=tn.getDegree()>1?tn.hasIntegerCoefficients()?factorizeOverTheIntegers(tn).next().value:tn.factorize():null;return cn!=null?(on=on.concat(n(cn)),on=on.concat(n(tn.divideAndRemainder(cn,"throw").quotient))):on.push(tn),on}for(var a=0,l=0;l<=t.getDegree();l+=1)t.getCoefficient(l).equals(Expression.ZERO)||(a=Math.max(a,t.getCoefficient(l).polynomial.getDegree()));for(var u=0;;u+=1){var c=t.map(tn=>tn.polynomial.calcAt(Expression.Integer.fromNumber(u)));if(c.getDegree()===t.getDegree()&&c.isSquareFreePolynomial()){var p=Array.from(n(c)).map(on=>on.map(cn=>new Expression.Polynomial(Polynomial$1.of(cn))));if(p.length<2)return null;var d=new Expression.Polynomial(Polynomial$1.of(c.getContent()));p[p.length-1]=p[p.length-1].scale(d);const tn=new Expression.Polynomial(Polynomial$1.of(Expression.Integer.fromNumber(0-u),Expression.ONE));var Q=tn._pow(a+1);p=HenselLifting(t,p,tn,a+1),console.assert(t.subtract(productModQ(p,Q)).mod(Q).toString()==="0");for(var Ct=1;Ct<=p.length-1;Ct+=1)for(var ar of combinations(p,Ct)){var en=productModQ(ar,Q);if(en=en.scale(t.getLeadingCoefficient()).mod(Q),en._hasIntegerLikeCoefficients()&&(en=en.primitivePart(),t.scale(t.getLeadingCoefficient()._pow(t.getDegree()-en.getDegree()+1)).isDivisibleBy(en)))return en}}}}factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial=factorizeMultivariateIntegerPolynomial;factorizeOverTheIntegers.testables={gcdOfPolynomialsOverFiniteField,distinctDegreeFactorization,CantorZassenhausAlgorithm,isFactorizationOverZpSquareFree,factorizeOverTheFiniteField,modPow,randomBigInt,ExtendedEuclideanAlgorithm,HenselLift,QuadraticHenselLift,HenselLiftingOfTwoFactors,HenselLifting,productModQ};const isPrime$1=primeFactor._isPrime,freeze=t=>t;function PolynomialData(t){this.degrees=new Array(t),this.coefficients=new Array(t),this.size=0}PolynomialData.prototype.add=function(t,n){const a=this.size;if(!(Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError("NotSupportedError");if(a>0&&!(t<this.degrees[a-1])||a>=this.degrees.length||a>=this.coefficients.length)throw new RangeError;this.degrees[a]=t,this.coefficients[a]=n,this.size=a+1};PolynomialData.prototype.degree=function(t){return this.degrees[t]};PolynomialData.prototype.coefficient=function(t){return this.coefficients[t]};PolynomialData.prototype.trim=function(){return this.size<Math.max(this.degrees.length,this.coefficients.length)&&(this.degrees.length=this.size,this.coefficients.length=this.size),this};function Polynomial$1(t){this.a=t.trim()}Polynomial$1.of=function(){for(var t=new PolynomialData(arguments.length),n=arguments.length-1;n>=0;n-=1){var a=arguments[n];a.equals(Expression.ZERO)||t.add(n,a)}return new Polynomial$1(t)};Polynomial$1.from=function(t){for(var n=new PolynomialData(t.length),a=t.length-1;a>=0;a-=1){var l=a,u=t[a];u.equals(Expression.ZERO)||n.add(l,u)}return new Polynomial$1(n)};Polynomial$1.ZERO=Polynomial$1.of();Polynomial$1.prototype.getDegree=function(){return this.a.size===0?-1:this.a.degree(0)};Polynomial$1.prototype.getCoefficient=function(t){for(var n=0,a=this.a.size;n<a;){var l=n+Math.floor((a-n)/2),u=this.a.degree(l);if(u>t)n=l+1;else if(u<t)a=l;else return this.a.coefficient(l)}return Expression.ZERO};Polynomial$1.prototype.getLeadingCoefficient=function(){return this.a.size===0?Expression.ZERO:this.a.coefficient(0)};Polynomial$1.prototype.map=function(t){if(t.length!==1)throw new RangeError("deprecated");const n=new PolynomialData(this.a.size);for(let a=0;a<this.a.size;a+=1){const l=this.a.degree(a),u=this.a.coefficient(a),c=t(u);c.equals(Expression.ZERO)||n.add(l,c)}return new Polynomial$1(n)};Polynomial$1.prototype.equals=function(t){if(t===Expression.ZERO)return this.a.size===0;if(this.a.size!==t.a.size)return!1;for(var n=0,a=0;n<this.a.size&&a<t.a.size;){if(this.a.degree(n)!==t.a.degree(a)||!this.a.coefficient(n).equals(t.a.coefficient(a)))return!1;n+=1,a+=1}return!0};function _join(t,n,a){const l=new PolynomialData(t.a.size+n.a.size);let u=-1,c=-2,p=Expression.ZERO,d=-1,Q=-2,Ct=Expression.ZERO;for(;c!==-1||Q!==-1;){const ar=Math.max(c,Q);if(ar!==-2){const en=a(c>=Q?p:Expression.ZERO,Q>=c?Ct:Expression.ZERO);(c!==Q||!en.equals(Expression.ZERO))&&l.add(ar,en)}c===ar&&(u+=1,u<t.a.size?(c=t.a.degree(u),p=t.a.coefficient(u)):(c=-1,p=Expression.ZERO)),Q===ar&&(d+=1,d<n.a.size?(Q=n.a.degree(d),Ct=n.a.coefficient(d)):(Q=-1,Ct=Expression.ZERO))}return new Polynomial$1(l)}Polynomial$1.prototype.add=function(t){return t.a.size===0?this:this.a.size===0?t:_join(this,t,function(n,a){return n===Expression.ZERO?a:a===Expression.ZERO?n:n.add(a)})};function split_at(t,n){var a=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n));return[a.quotient,a.remainder]}const KARATSUBA_THRESHOLD=12;function karatsuba(t,n){if(t.a.size<KARATSUBA_THRESHOLD||n.a.size<KARATSUBA_THRESHOLD)return t.multiply(n);const a=n.a.size>t.a.size?n.a.degree(Math.floor(n.a.size/2)):t.a.degree(Math.floor(t.a.size/2)),[l,u]=split_at(t,a),[c,p]=split_at(n,a),d=karatsuba(u,p),Q=karatsuba(u.add(l),p.add(c)),Ct=karatsuba(l,c);return Ct.shift(a*2).add(Q.subtract(Ct).subtract(d).shift(a)).add(d)}function coefficientsBound(t,n=!1){function a(p,d){if(d.a.size<4)return p+1;const Q=Math.floor(d.a.size/2);return p===0?Q:p===Q?Q+1:p===Q+1?d.a.size-1:p+1}let l=Expression.ZERO,u=Expression.ZERO;for(let p=0;p<t.a.size;p=n?a(p,t):p+1){const d=t.a.coefficient(p);d.compareTo(l)>0?l=d:d.compareTo(u)<0&&(u=d)}return(u.negate().compareTo(l)<0?l:u.negate()).bitLength()}let supportsLargeBigintCache;function supportsLargeBigint(){if(supportsLargeBigintCache==null)try{supportsLargeBigintCache=Expression.ONE.leftShift(2**20).compareTo(Expression.ZERO)>0}catch{supportsLargeBigintCache=!1}return supportsLargeBigintCache}function hasFastBigIntMultiplication(){return supportsLargeBigint()}function multiplyByKroneckerSubstitution(t,n){function a(en,tn){function on(ex,ix,ax){const ox=ax-ix;if(ox>=2){const lx=Math.ceil(ox/2);return on(ex,ix+lx,ax).leftShift(tn*lx).add(on(ex,ix,ix+lx))}else return ox===1?ex[ix]:Expression.ZERO}const cn=new Array(en.getDegree()+1);for(let ex=0;ex<=en.getDegree();ex+=1)cn[ex]=en.getCoefficient(ex);const gn=Expression.ONE.leftShift(tn),Cn=Expression.ONE.negate();for(let ex=0;ex<cn.length;ex+=1)cn[ex].compareTo(Expression.ZERO)<0&&(cn[ex]=gn.add(cn[ex]),cn[ex+1]=cn[ex+1].add(Cn));return on(cn,0,cn.length)}function l(en,tn,on){const cn=on,gn=new Array(cn);function Cn(ox,lx,cx){const dx=cx-lx;if(dx>=2){const hx=Math.ceil(dx/2),fx=ox.leftShift(0-tn*hx),ux=ox.asUintN(tn*hx);Cn(ux,lx,lx+hx),Cn(fx,lx+hx,cx)}else console.assert(dx===1),gn[lx]=ox}Cn(en,0,cn);const ex=Expression.ONE.leftShift(tn),ix=ex.negate(),ax=ex.leftShift(-1);for(let ox=0;ox<gn.length;ox+=1){let lx=gn[ox];lx.compareTo(ax)>=0&&(gn[ox]=lx.add(ix),gn[ox+1]=gn[ox+1].add(Expression.ONE))}return Polynomial$1.from(gn)}const u=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());u>1&&(t=t._exponentiateRoots(u),n=n._exponentiateRoots(u));let c=!1;if(t.getLeadingCoefficient().sign()<=0){if(t.getLeadingCoefficient().sign()===0)return t.multiply(n);t=t.negate(),c=!c}if(n.getLeadingCoefficient().sign()<=0){if(n.getLeadingCoefficient().sign()===0)return t.multiply(n);n=n.negate(),c=!c}const p=coefficientsBound(t),d=coefficientsBound(n),Q=Math.ceil((Math.max(p,d)*2+Math.ceil(Math.log2(Math.min(t.getDegree()+1,n.getDegree()+1)))+1)/1)*1;let Ct=Expression.ZERO;const ar=(t.getDegree()+n.getDegree()+1)*Q;return ar>=2**30||ar>=2**20&&!supportsLargeBigint()?Ct=karatsuba(t,n):Ct=l(a(t,Q).multiply(a(n,Q)),Q,t.getDegree()+n.getDegree()+1),u>1&&(Ct=Ct._exponentiateRoots(1/u)),c&&(Ct=Ct.negate()),Ct}function multiplyInternal(t,n,a){var l=t.getDegree()+n.getDegree()+1;if((t.a.size+n.a.size+Math.min(t.a.size,n.a.size))*4>=l){for(var u=new Array(l).fill(Expression.ZERO),c=0;c<t.a.size;c+=1)for(var p=t.a.degree(c),d=t.a.coefficient(c),Q=0;Q<n.a.size;Q+=1){var Ct=n.a.degree(Q),ar=n.a.coefficient(Q),en=p+Ct,tn=a?d.multiply(ar):ar.multiply(d);u[en]=u[en].add(tn)}return Polynomial$1.from(u)}else{for(var u=new FastAdditionPolynomial,c=0;c<t.a.size;c+=1){var p=t.a.degree(c),d=t.a.coefficient(c);u.add(d,p,n,a)}return u.toPolynomial()}}globalThis.counter9=0;Polynomial$1.prototype.multiply=function(t){if(this.a.size===0||t.a.size===0)return Polynomial$1.ZERO;if(t.a.size===1&&t.a.coefficient(0)instanceof Expression.Integer)return this.shift(t.a.degree(0)).scale(t.a.coefficient(0));if(this.a.size>=16&&t.a.size>=16&&this.hasIntegerCoefficients()&&t.hasIntegerCoefficients()){var n=this,a=t,l=Math.gcd(n.getGCDOfTermDegrees(),a.getGCDOfTermDegrees()),u=Math.min(n.getDegree(),a.getDegree()),c=Math.min((n.a.size-1)/n.getDegree(),(a.a.size-1)/a.getDegree());const p=coefficientsBound(n,!0),d=coefficientsBound(a,!0);if(Math.max(p,d)>=32&&Math.max(p,d)<=256&&c>=.8&&u>=16||hasFastBigIntMultiplication()&&u*c>=64||hasFastBigIntMultiplication()&&u*c*Math.min(p,d)*Math.pow(c*l,2)>=64*1024)return globalThis.counter9+=1,multiplyByKroneckerSubstitution(n,a)}return t.a.size>=KARATSUBA_THRESHOLD&&this.a.size>=KARATSUBA_THRESHOLD?karatsuba(this,t):this.a.size<=t.a.size?multiplyInternal(this,t,!0):multiplyInternal(t,this,!1)};Polynomial$1.prototype.shift=function(t){if(!(t>=0))throw new TypeError;if(t===0)return this;for(var n=new PolynomialData(this.a.size),a=0;a<this.a.size;a+=1)n.add(this.a.degree(a)+t,this.a.coefficient(a));return new Polynomial$1(n)};function FastAdditionPolynomial(){this.maxHeap=new Heap((t,n)=>n.degree-t.degree),this.degree=-1,this.leadingCoefficient=Expression.ZERO}FastAdditionPolynomial.prototype.add=function(t,n,a,l){let u=0;var c={next:function(){if(u===a.a.size)return;const Ct=a.a.degree(u),ar=a.a.coefficient(u);return u+=1,freeze({degree:Ct+n,coefficient:ar===Expression.ONE?t:t===Expression.ONE?ar:l?t.multiply(ar):ar.multiply(t),iterator:c})}},p=c.next();if(p.degree>this.degree&&this.degree!==-1)throw new RangeError;if(p.degree<this.degree)this.maxHeap.push(p);else{for(this.degree===-1?(this.leadingCoefficient=p.coefficient,this.degree=p.degree):this.leadingCoefficient=this.leadingCoefficient.add(p.coefficient),p=p.iterator.next(),p!=null&&this.maxHeap.push(p);this.maxHeap.size()>0&&(this.degree===this.maxHeap.peek().degree||this.leadingCoefficient.equals(Expression.ZERO));){var d=this.maxHeap.peek();this.leadingCoefficient=this.leadingCoefficient.add(d.coefficient),this.degree=d.degree;var Q=d.iterator.next();Q!=null?this.maxHeap.replace(Q):this.maxHeap.pop()}this.maxHeap.size()===0&&this.leadingCoefficient.equals(Expression.ZERO)&&(this.degree=-1)}};FastAdditionPolynomial.prototype.getDegree=function(){return this.degree};FastAdditionPolynomial.prototype.getLeadingCoefficient=function(){return this.leadingCoefficient};FastAdditionPolynomial.prototype.toPolynomial=function(){for(var t=[],n=Polynomial$1.of(Expression.ONE);this.getDegree()>=0;){var a=this.getDegree(),l=this.getLeadingCoefficient();this.add(l.negate(),a,n,!0),t.push({degree:a,coefficient:l})}return Polynomial$1.fromTerms(t)};Polynomial$1.prototype.divideAndRemainder=function(t,n,a){if(n=n||void 0,t.equals(Polynomial$1.ZERO))throw new TypeError("ArithmeticException");if(this.getDegree()<t.getDegree())return{quotient:Polynomial$1.ZERO,remainder:this};if(t.a.size===1&&t.a.coefficient(0).equals(Expression.ONE)&&(n==null||this._hasIntegerLikeCoefficients())){if(t.a.degree(0)===0)return{quotient:this,remainder:Polynomial$1.ZERO};for(var l=t.a.degree(0),u=0;this.a.degree(u)>=l&&u<this.a.size;)u+=1;for(var c=new PolynomialData(u),p=0;p<u;p+=1)c.add(this.a.degree(p)-l,this.a.coefficient(p));for(var d=new PolynomialData(this.a.size-u),p=u;p<this.a.size;p+=1)d.add(this.a.degree(p),this.a.coefficient(p));return{quotient:new Polynomial$1(c),remainder:new Polynomial$1(d)}}const Q=t.getLeadingCoefficient(),Ct=Q instanceof Expression.ExpressionWithPolynomialRoot?Q.inverse():void 0;if(t.a.size===1&&t.a.degree(0)===0&&Ct==null&&(n==null||n==="throw"))return{quotient:this.map(function(Cn){var ex=Cn.divide(Q);if(n!=null&&ex instanceof Expression.Division)throw new RangeError;return ex}),remainder:Polynomial$1.ZERO};var ar=[],en=this.a.size/this.getDegree()<1/4&&a==null,tn=this;en&&(tn=new FastAdditionPolynomial,tn.add(Expression.ONE,0,this,!0));const on=t.negate();for(;tn.getDegree()>=t.getDegree();){var cn=tn.getDegree()-t.getDegree(),gn=tn.getLeadingCoefficient(),c=Ct==null?gn.divide(Q):gn.multiply(Ct);if(a!=null&&(c=a(c)),n!=null&&c instanceof Expression.Division){if(n==="throw")throw new TypeError(this.toString()+" "+t.toString());if(n==="undefined")return;throw new TypeError}if(ar.push({degree:cn,coefficient:c}),en?tn.add(c,cn,on,!0):c instanceof Expression.Integer?tn=tn.add(on.shift(cn).scale(c)):tn=tn.add(Polynomial$1.of(c).shift(cn).multiply(on)),a!=null)for(;tn.getDegree()>=0&&a(tn.getLeadingCoefficient()).equals(Expression.ZERO);)tn=tn.subtract(Polynomial$1.of(tn.getLeadingCoefficient()).shift(tn.getDegree()));if(tn.getDegree()-t.getDegree()===cn){throw new TypeError("there is a some problem with the expression evaluation");//!
}}return en&&(tn=tn.toPolynomial()),{quotient:Polynomial$1.fromTerms(ar),remainder:tn}};Polynomial$1.prototype.divideAndRemainderModP=function(t,n){const a=t.getLeadingCoefficient();if(!(a instanceof Expression.Polynomial)&&!a.equals(Expression.ONE)||a instanceof Expression.Polynomial&&a.polynomial.getDegree()!==0)throw new RangeError;const l=this.divideAndRemainder(t,"throw",u=>u.modulo(n));return{quotient:l.quotient,remainder:l.remainder.mod(n)}};Polynomial$1.pseudoRemainder=function(t,n){var a=t.getDegree()-n.getDegree();if(a<0)throw new RangeError;return t.scale(n.getLeadingCoefficient()._pow(a+1)).divideAndRemainder(n,"throw").remainder};Polynomial$1.polynomialGCD=function(t,n){let a=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(a>1)return Polynomial$1.polynomialGCD(t._exponentiateRoots(a),n._exponentiateRoots(a))._exponentiateRoots(1/a);//!optimization 2021-03-15
if(n.getDegree()>0&&t.getDegree()>0){var l=function(on){for(var cn=0;on.getCoefficient(cn).equals(Expression.ZERO);)cn+=1;return cn},u=l(n),c=l(t);if(u!==0||c!==0)return Polynomial$1.polynomialGCD(t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(c),void 0).quotient,n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(u),void 0).quotient).shift(Math.min(u,c))}//!
if(t.getDegree()<n.getDegree()){//!!!
var p=t;t=n,n=p}if(n.equals(Polynomial$1.ZERO))return t;//!
if(t.getDegree()===1&&n.getDegree()===0)return Polynomial$1.of(n.getCoefficient(0).gcd(t.getCoefficient(0)).gcd(t.getCoefficient(1)));//!
var d=t.getContent(),Q=n.getContent(),Ct=t.divideAndRemainder(Polynomial$1.of(d),"throw").quotient,ar=n.divideAndRemainder(Polynomial$1.of(Q),"throw").quotient,en=gcdOfPrimitivePolynomials(Ct,ar),tn=d.gcd(Q);return Polynomial$1.of(tn).multiply(en)};function hasQuadraticInteger(t){return t instanceof Expression.NthRoot?!(t instanceof Expression.Integer):t instanceof Expression.ExponentiationOfMinusOne?!0:t instanceof Expression.BinaryOperation?hasQuadraticInteger(t.a)||hasQuadraticInteger(t.b):(t instanceof Expression.Integer||t instanceof Expression.Symbol||t instanceof Expression.Complex,!1)}var getY=function(t,n){for(var a={},l=0;l<t.a.size;l++){var u=t.a.coefficient(l),c=Expression.getVariable(u,{avoidNthRoots:!0});if(c!=null){if(c instanceof Expression.ExpressionWithPolynomialRoot){return null;//!?
}if(Expression.isConstant(c)&&c!==Expression.E&&c!==Expression.PI)return null;if(c instanceof Expression.Polynomial){return null;//!?
}c instanceof Expression.Symbol&&(a[c.symbol]?c=null:a[c.symbol]=!0);for(var p=0;p<t.a.size&&c!=null;p+=1)Expression._getReplacement(t.a.coefficient(p),c).equals(c)||(c=null);for(var p=0;p<n.a.size&&c!=null;p+=1)Expression._getReplacement(n.a.coefficient(p),c).equals(c)||(c=null);if(c!=null)return c}}return null};Polynomial$1._getY=getY;function gcdOfPrimitivePolynomials(t,n){return console.assert(t.getDegree()>=n.getDegree()),t.hasIntegerCoefficients()&&n.hasIntegerCoefficients()&&n.getDegree()>2?t.isDivisibleBy(n)?n:gcdByModularAlgorithm(t,n):n.getDegree()>1&&(getY(t,n)!=null||getY(n,t)!=null)?gcdByMultivariateModularAlgorithm(t,n):n.getDegree()>2?gcdUsingPseudoRemainderSequence(t,n,"subresultant").primitivePart():!t._testCoefficients(a=>hasQuadraticInteger(a))&&!n._testCoefficients(a=>hasQuadraticInteger(a))&&n.getDegree()>0?gcdUsingPseudoRemainderSequence(t,n,"primitive"):n.getDegree()===0?Polynomial$1.of(Expression.ONE):gcdUsingRemainderSequence(t,n).primitivePart()}function gcdUsingRemainderSequence(t,n){for(;!n.equals(Polynomial$1.ZERO);){const a=t.divideAndRemainder(n).remainder;t=n,n=a}return t}function gcdUsingPseudoRemainderSequence(t,n,a){let l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(l>1)return gcdUsingPseudoRemainderSequence(t._exponentiateRoots(l),n._exponentiateRoots(l),a)._exponentiateRoots(1/l);for(var u of Polynomial$1._pseudoRemainderSequence(t,n,a)){var c=u.R;t=n,n=c}var p=t;return p}Polynomial$1._gcdUsingPseudoRemainderSequence=gcdUsingPseudoRemainderSequence;function ChineseRemainderTheorem(t,n){const a=t.remainder(n).modInverse(n);return function(l,u){return l.add(u.subtract(l.modulo(n)).multiply(a).modulo(n).multiply(t))}}globalThis.ChineseRemainderTheorem=ChineseRemainderTheorem;function ChineseRemainderTheoremForPolynomialCoefficients(t,n,a,l){const u=ChineseRemainderTheorem(a,l);return _join(t,n,(c,p)=>u(c,p))}globalThis.ChineseRemainderTheoremForPolynomialCoefficients=ChineseRemainderTheoremForPolynomialCoefficients;Polynomial$1.prototype._exponentiateRoots=function(t){if(t===-1){if(this.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;for(var n=new PolynomialData(this.a.size),a=this.a.size-1;a>=0;a-=1)n.add(this.getDegree()-this.a.degree(a),this.a.coefficient(a));var l=new Polynomial$1(n);if(l.getLeadingCoefficient()instanceof Expression.Integer&&l.getLeadingCoefficient().sign()<0){l=l.negate();//!!!
}return l}const u=Math.floor(1/t+.5);if(Math.floor(t)===t&&t>=2||1/u===t&&u>=2){for(var n=new PolynomialData(this.a.size),c=0;c<this.a.size;c+=1){if(Math.floor(t)===t&&this.a.degree(c)%t!==0)throw new RangeError;n.add(Math.floor(t)===t?this.a.degree(c)/t:this.a.degree(c)*u,this.a.coefficient(c))}return new Polynomial$1(n)}throw new RangeError(t)};Polynomial$1.prototype._scaleRoots=function(t){const n=t.getNumerator(),a=t.getDenominator(),l=this.getDegree();let u=Expression.ONE,c=0;const p=new PolynomialData(this.a.size);for(let d=0;d<this.a.size;d+=1){const Q=this.a.degree(d),Ct=this.a.coefficient(d);u=u.multiply(n._pow(l-Q-c)),c=l-Q,p.add(Q,u.multiply(a._pow(Q)).multiply(Ct))}return new Polynomial$1(p)};Polynomial$1.prototype._translateRoots=function(t){if(t.equals(Expression.ONE.negate())){const a=this,l=a.getDegree(),u=new Array(l+1);for(let c=0;c<=l;c+=1)u[c]=a.getCoefficient(c);for(let c=0;c<=l-1;c+=1)for(let p=l-1;p>=c;p-=1)u[p]=u[p].add(u[p+1]);return Polynomial$1.from(u)}if(t.equals(Expression.ZERO))return this;var n=t.getNumerator()._pow(this.getDegree());return this._scaleRoots(t.negate().inverse())._translateRoots(Expression.ONE.negate())._scaleRoots(t.negate()).map(a=>a.divide(n))};Polynomial$1.prototype.mod=function(t){return this.map(n=>n.modulo(t))};Polynomial$1.prototype.mod2=function(t){return this.mod(t).map(n=>n.subtract(t).add(n).compareTo(Expression.ZERO)<0?n:n.subtract(t))};Polynomial$1.prototype._pow=function(t){var n=function(a,l,u){if(l<0)throw new RangeError;if(l>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return l<1?u:2*Math.floor(l/2)!==l?n(a,l-1,u.multiply(a)):n(a.multiply(a),Math.floor(l/2),u)};return n(this,t,Polynomial$1.of(Expression.ONE))};function gcdByModularAlgorithm(t,n){{const Q=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(Q>1)return console.debug("g > 1"),gcdByModularAlgorithm(t._exponentiateRoots(Q),n._exponentiateRoots(Q))._exponentiateRoots(1/Q)}//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const a=t.getLeadingCoefficient().abs().gcd(n.getLeadingCoefficient().abs());if(t.getCoefficient(0).equals(Expression.ZERO)||n.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;if(a.compareTo(t.getCoefficient(0).abs().gcd(n.getCoefficient(0).abs()))>0)return gcdByModularAlgorithm(t._exponentiateRoots(-1),n._exponentiateRoots(-1))._exponentiateRoots(-1);console.assert(t.hasIntegerCoefficients()&&t.getContent().abs().equals(Expression.ONE)&&t.getDegree()>0),console.assert(n.hasIntegerCoefficients()&&n.getContent().abs().equals(Expression.ONE)&&n.getDegree()>0);let l=Math.min(t.getDegree(),n.getDegree());const u=function(){const Q=a,Ct=Math.min(t._log2OfBoundForCoefficientsOfFactor(l,Q),n._log2OfBoundForCoefficientsOfFactor(l,Q));return Expression.TWO._pow(1+Math.ceil(Ct))};let c=u(),p=Expression.Integer.fromBigInt(Math.min(Math.max(c.toNumber(),1024),Math.floor(Math.sqrt((Number.MAX_SAFE_INTEGER+1)/(1+Math.min(t.getDegree(),n.getDegree())))))),d=0;for(;;){let Q=null,Ct=Expression.ZERO;for(;Ct.compareTo(c)<0;){if(d+=1,d>50&&p._pow(d-50).compareTo(c)>=0)throw new TypeError("!!!");do p=p.subtract(Expression.ONE);while(!isPrime$1(p.toBigInt())||a.remainder(p).equals(Expression.ZERO));const ar=factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0(t,n,p.toBigInt());console.assert(ar.getLeadingCoefficient().equals(Expression.ONE));const en=ar.scale(a.remainder(p)).mod(p);if(en.getDegree()<1)return Polynomial$1.of(Expression.ONE);if(en.getDegree()>2/3*t.getDegree(),!(en.getDegree()>l)){if(Q!=null&&en.getDegree()<Q.getDegree()&&(Q=null),Q==null)Q=en.mod2(p),Ct=p,l=en.getDegree(),c=u();else if(en.getDegree()===Q.getDegree()){const tn=Q;if(Q=ChineseRemainderTheoremForPolynomialCoefficients(Q,en,Ct,p),Ct=Ct.multiply(p),Q=Q.mod2(Ct),Ct.compareTo(c)<0&&tn.equals(Q)){if(Q=Q.primitivePart(),t.isDivisibleBy(Q)&&n.isDivisibleBy(Q))return Q;Q=tn}}}}if(Q=Q.primitivePart(),t.isDivisibleBy(Q)&&n.isDivisibleBy(Q))return Q}}Polynomial$1._gcdByModularAlgorithm=gcdByModularAlgorithm;function gcdByMultivariateModularAlgorithm(t,n){{const ex=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(ex>1)return console.debug("g > 1"),gcdByMultivariateModularAlgorithm(t._exponentiateRoots(ex),n._exponentiateRoots(ex))._exponentiateRoots(1/ex)}if(!t.getContent().equals(Expression.ONE)||!n.getContent().equals(Expression.ONE))return Polynomial$1.polynomialGCD(t,n);const a=getY(t,n)||getY(n,t);if(a==null)return Polynomial$1.polynomialGCD(t,n);//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const l=Math.min(t.getDegree(),n.getDegree());t=t.map(ex=>new Expression.Polynomial(Polynomial$1.toPolynomial(ex,a))),n=n.map(ex=>new Expression.Polynomial(Polynomial$1.toPolynomial(ex,a)));const u=function(ex){const ix=new Expression.Polynomial(Polynomial$1.of(new Expression.Polynomial(Polynomial$1.of(Expression.ZERO,Expression.ONE))));return ex.map(ax=>new Expression.Polynomial(ax.polynomial.map(ox=>new Expression.Polynomial(Polynomial$1.of(ox))))).calcAt(ix).polynomial},c=u(t),p=u(n),d=c.getContent().gcd(p.getContent()).polynomial.primitivePart();if(!d.equals(Polynomial$1.of(Expression.ONE))){const ex=function(ix){return ix.map(ax=>new Expression.Polynomial(ax.polynomial.divideAndRemainder(d,d._hasIntegerLikeCoefficients()?"throw":void 0).quotient)).calcAt(new Expression.Polynomial(Polynomial$1.of(a))).polynomial};return gcdByMultivariateModularAlgorithm(ex(c),ex(p)).multiply(d)}if(console.assert(d.equals(Polynomial$1.of(Expression.ONE))),c.getDegree()===0||p.getDegree()===0)return Polynomial$1.of(Expression.ONE);const Q=Polynomial$1.polynomialGCD(c.getLeadingCoefficient().polynomial,p.getLeadingCoefficient().polynomial),Ct=function(){NewtonInterpolation.setField(Expression._FIELD);const ex=NewtonInterpolation();return ex.next(),ex},ar=t._hasIntegerLikeCoefficients()&&n._hasIntegerLikeCoefficients();let en=Expression.ZERO,tn=0,on=null,cn=1/0,gn=null;for(;;){do en=Expression.Integer.fromNumber(en.toNumber()+1),en.toNumber()-l>2&&console.error("!",en.toNumber()-l);while(Q.calcAt(en).equals(Expression.ZERO));var Cn=Polynomial$1.polynomialGCD(t.calcAt(en).polynomial,n.calcAt(en).polynomial);if(Cn.getDegree()===0)return Polynomial$1.of(Expression.ONE);if(Cn.getDegree()>cn)continue;const ex=Q.calcAt(en);if(Cn=Cn.scale(ex).scale(Cn.getLeadingCoefficient().inverse()),ar&&!Cn._hasIntegerLikeCoefficients())continue;(tn===l+1||Cn.getDegree()<cn)&&(tn=0,gn=Ct());const ix=on;if(on=Polynomial$1.from(gn.next([en.toNumber(),new Expression.Polynomial(Cn)]).value),tn+=1,cn=Cn.getDegree(),ar&&on!=null&&!on._hasIntegerLikeCoefficients())debugger;if(ix!=null&&ix.equals(on)||tn===l+1)if(!ar||on._hasIntegerLikeCoefficients()){if(on=u(u(on).primitivePart()),(!ar||on.getContent().equals(Expression.ONE))&&t.isDivisibleBy(on)&&n.isDivisibleBy(on))return on=on.map(ax=>ax.polynomial.calcAt(a)),on.getLeadingCoefficient().isNegative()&&(on=on.negate()),ar||(on=on.primitivePart()),on;on=ix}else debugger}}Polynomial$1._gcdByMultivariateModularAlgorithm=gcdByMultivariateModularAlgorithm;Polynomial$1.prototype.calcAt=function(t){//!!!
if(t instanceof Expression.Division&&t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer&&this.hasIntegerCoefficients()){var p=this.getDegree(),n=this._scaleRoots(t.getDenominator());return n.calcAt(t.getNumerator()).divide(t.getDenominator()._pow(p))}if((t instanceof Expression.Symbol||t instanceof Expression.NthRoot)&&this.hasIntegerCoefficients()){for(var a=Expression.ZERO,l=0;l<this.a.size;l+=1){var u=this.a.degree(l),c=this.a.coefficient(l);a=a.add(c.multiply(t._pow(u)))}return a}for(var p=Expression.ZERO,d=-1,l=0;l<this.a.size;l+=1){var u=this.a.degree(l),c=this.a.coefficient(l);p.equals(Expression.ZERO)?p=c:p=Expression.pow(t,d-u).multiply(p).add(c),d=u}return p.equals(Expression.ZERO)||(p=Expression.pow(t,d-0).multiply(p)),p};Polynomial$1.prototype.getContent=function(){if(this.a.size===0)return Expression.ONE;for(var t=Expression.ONE,n=Expression.ZERO,a=0;a<this.a.size;a+=1){const p=a%2===0?a/2:this.a.size-(a+1)/2;var l=this.a.coefficient(p);t=t.lcm(l.getDenominator()),n=n.gcd(l.getNumerator())}var u=n.divide(t),c=this.a.coefficient(0);return c.isNegative()&&!n.isNegative()||n.isNegative()&&!c.isNegative()?u.negate():u};Polynomial$1.prototype.negate=function(){return this.map(t=>t.negate())};Polynomial$1.prototype.subtract=function(t){return this.add(t.negate())};Polynomial$1.prototype.scale=function(t){if(t.equals(Expression.ONE))return this;if(Expression.has(t,Expression.Matrix)||Expression.has(t,Expression.MatrixSymbol))throw new TypeError;return this.map(n=>n.multiply(t))};Polynomial$1.fromTerms=function(t){for(var n=new PolynomialData(t.length),a=0;a<t.length;a+=1){var l=t[a];n.add(l.degree,l.coefficient)}return new Polynomial$1(n)};Polynomial$1.toPolynomial=function(t,n){if(t instanceof Expression.Division)throw new RangeError;var a=Expression.getCoefficients(t,n);return Polynomial$1.fromTerms(a)};Polynomial$1.prototype.toExpression=function(t){for(var n=void 0,a=0;a<this.a.size;a+=1){var l=this.a.degree(a),u=this.a.coefficient(a),c=l===0?void 0:l===1?t:new Expression.Exponentiation(t,Expression.Integer.fromNumber(l)),p=c==null?u:u.equals(Expression.ONE)?c:new Expression.Multiplication(u,c);n=n==null?p:new Expression.Addition(n,p)}return n??Expression.ZERO};Polynomial$1.prototype.doRationalRootTest=function(){var t=this;if(t.getCoefficient(0).equals(Expression.ZERO)){return Expression.ZERO;//!TODO: test
}var n=t.getLeadingCoefficient(),a=t.getCoefficient(0);a=Expression._expandTrigonometry(a);//!
if(t.getDegree()===1)return a.negate().divide(n);var l=t.hasIntegerCoefficients(),u=null,c=null;if(l){if(u=t.calcAt(Expression.ONE),u.equals(Expression.ZERO))return Expression.ONE;if(c=t.calcAt(Expression.ONE.negate()),c.equals(Expression.ZERO))return Expression.ONE.negate()}var p=function(tn,on){return!(u!=null&&(on.subtract(tn).equals(Expression.ZERO)||!u.remainder(on.subtract(tn)).equals(Expression.ZERO))||c!=null&&(on.add(tn).equals(Expression.ZERO)||!c.remainder(on.add(tn)).equals(Expression.ZERO)))};//!new 2020-01-13
if(l&&n.abs().bitLength()+a.abs().bitLength()>8){const tn=function(cn,gn){gn.compareTo(Expression.ZERO)<0&&(gn=gn.negate(),cn=cn.negate());var Cn=gn.truncatingDivide(Expression.TWO);return cn.compareTo(Expression.ONE)<0&&(Cn=Cn.negate()),cn.add(Cn).truncatingDivide(gn)},on=function(cn,gn){const Cn=cn instanceof Expression.ExpressionPolynomialRoot?cn.root._root.toDecimal(gn.abs().bitLength()):cn.toDecimal(gn.abs().bitLength()),ex=Cn.a.add(Cn.b).divide(Expression.TWO);return tn(gn.multiply(ex.getNumerator()),ex.getDenominator())};for(var d=t.getZeros(),Q=0;Q<d.length;Q+=1){var Ct=d[Q];if(Q===0||Ct!==d[Q-1]){var ar=Ct.root!=null?on(Ct,n).divide(n):Ct.getNumerator()instanceof Expression.Integer&&Ct.getDenominator()instanceof Expression.Integer?Ct:Expression.ZERO;if(p(ar.getNumerator(),ar.getDenominator())&&t.calcAt(ar).equals(Expression.ZERO))return ar}}return null}var en=null;return Expression.everyDivisor(a,function(tn){return Expression.everyDivisor(n,function(on){for(var cn=-3;(cn+=2)<3;){var gn=cn===-1?tn.negate():tn;if(p(gn,on)){var Cn=Polynomial$1.of(gn.negate(),on),ex=t.divideAndRemainder(Cn,"undefined"),ix=ex==null?void 0:ex.remainder.map(function(ax){return ax.simplifyExpression()});if(ix!=null&&ix.equals(Polynomial$1.ZERO))return en=gn.divide(on),!1}}return!0})}),en};Polynomial$1.prototype._testCoefficients=function(t){for(var n=0;n<this.a.size;n+=1)if(!t(this.a.coefficient(n)))return!1;return!0};Polynomial$1.prototype.hasIntegerCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Integer)};Polynomial$1.prototype.hasComplexCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Complex||t instanceof Expression.Integer)};const isIntegerLike=function(t){return t instanceof Expression.Integer?!0:t instanceof Expression.Symbol?t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?!1:(t instanceof Expression.PolynomialRootSymbol,!0):t instanceof Expression.Addition||t instanceof Expression.Multiplication?isIntegerLike(t.a)&&isIntegerLike(t.b):t instanceof Expression.Exponentiation?isIntegerLike(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.TWO)>=0:t instanceof Expression.Polynomial?t.polynomial._hasIntegerLikeCoefficients():!1};Polynomial$1._isIntegerLike=isIntegerLike;Polynomial$1.prototype._hasIntegerLikeCoefficients=function(){return this._testCoefficients(t=>Polynomial$1._isIntegerLike(t))};Polynomial$1.prototype._canBeFactored=function(t){if(!this.hasIntegerCoefficients()||this.getCoefficient(0).equals(Expression.ZERO))return!0;var n=this.getContent();if(!n.equals(Expression.ONE)&&!n.equals(Expression.ONE.negate()))return this.scale(n.inverse())._canBeFactored();var a=this.subtract(Polynomial$1.of(this.getLeadingCoefficient()).shift(this.getDegree())).getContent(),l=null;do l=a.gcd(this.getLeadingCoefficient()),a=a.truncatingDivide(l);while(!l.equals(Expression.ONE));var l=null;for(a=a.abs();!a.equals(Expression.ONE);){var u=a.primeFactor();if(!this.getCoefficient(0).remainder(u._pow(2)).equals(Expression.ZERO))return!1;a=a.truncatingDivide(u)}return!(t==null&&!this._translateRoots(Expression.Integer.fromNumber(3).negate())._canBeFactored(1))};Polynomial$1.prototype.isEven=function(){return this.getGCDOfTermDegrees()%2===0};var counter=0;Polynomial$1.prototype.getGCDOfTermDegrees=function(){if(this.equals(Polynomial$1.ZERO))return 0;for(var t=this.getDegree(),n=1;n<=this.getDegree()&&t>=2;n+=1)this.getCoefficient(n).equals(Expression.ZERO)||(t=Math.gcd(t,n));return t};Polynomial$1.prototype.getroots=function(t){t=t||void 0;var n=this,a=[];//!new 2018-12-24
for(var l=Expression.ONE,u=Expression.ZERO;u!=null;){var u=Expression.getConjugate(n.getLeadingCoefficient());u!=null&&(n=n.scale(u),l=l.multiply(u))}//!
//!new 2020-07-11
n=n.map(function(UE){return UE.simplifyExpression()});//!
var c=n.getContent();for(c.equals(Expression.ONE)||(n=n.scale(c.getDenominator()).divideAndRemainder(Polynomial$1.of(c.getNumerator()),"throw").quotient),l.equals(Expression.ONE)||(c=c.divide(l));n.getCoefficient(0).equals(Expression.ZERO);)n=n.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient,a.push(Expression.ZERO);if((!c.equals(Expression.ONE)&&!c.equals(Expression.ONE.negate())||a.length>0)&&(a.length>0&&typeof hit=="function"&&hit({getroots:{special:"0"}}),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"factorOutTheGreatestCommonFactor"})),n.getDegree()===1)return a.push(n.getCoefficient(0).negate().divide(n.getCoefficient(1))),n=Polynomial$1.of(n.getLeadingCoefficient()),typeof hit=="function"&&hit({getroots:{linear:""}}),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveLinearEquation"}),a;var p=function(UE,CE){if(!(CE instanceof Expression.ExpressionWithPolynomialRoot)){if(CE instanceof Expression.ExpressionPolynomialRoot)return CE._nthRoot(UE);if(CE instanceof Expression.Division){var qE=p(UE,CE.a),xS=p(UE,CE.b);return qE==null||xS==null?void 0:qE.divide(xS)}if(CE instanceof Expression.Exponentiation){var dS=Expression.Integer.fromNumber(UE);if(CE.b instanceof Expression.Integer&&CE.b.remainder(dS).equals(Expression.ZERO)||CE.a instanceof Expression.Integer||CE.a===Expression.E||CE.b instanceof Expression.Division&&CE.b.a instanceof Expression.Integer&&CE.b.a.remainder(dS).equals(Expression.ZERO))return CE.a.pow(CE.b.divide(dS))}if(CE instanceof Expression.Multiplication){var iS=p(UE,CE.a),eS=p(UE,CE.b);return iS==null||eS==null?void 0:iS.multiply(eS)}if(CE instanceof Expression.Complex||Expression.isConstant(CE)&&Expression.has(CE,Expression.Complex)){var rS=Expression.getComplexNumberParts(CE),HS=rS.real,mS=rS.imaginary;if(UE===2){var US=HS.multiply(HS).add(mS.multiply(mS)).squareRoot(),LS=p(2,HS.add(US).divide(Expression.TWO));if(LS!=null){var hT=mS.divide(Expression.TWO.multiply(LS)),bS=LS.add(hT.multiply(Expression.I));return bS}}if(HS.equals(Expression.ZERO)&&UE%2===0){var rS=p(Math.floor(UE/2),CE);if(rS!=null)return p(2,rS)}if(HS.equals(Expression.ZERO)&&UE%2===1){var rS=p(UE,mS);if(rS!=null)return rS.multiply(UE%4===1?Expression.I:Expression.I.negate())}//!new 2020-07-24
if(CE instanceof Expression.Complex&&!mS.equals(Expression.ZERO)){var aT=HS._pow(2).add(mS._pow(2)).squareRoot();try{var rM=Expression.TWO.multiply(mS.divide(aT.add(HS)).arctan());return aT._nthRoot(UE).multiply(Expression.I.multiply(rM.divide(Expression.Integer.fromNumber(UE))).exp())}catch(sC){console.debug(sC)}}}if(CE instanceof Expression.Addition){for(var KS=void 0,jS=0,bS=Expression.ONE,gT=Expression.ONE,wT=CE;!wT.equals(Expression.ONE)&&!wT.equals(Expression.ONE.negate());){var sA=Expression.simpleDivisor(wT);jS===0?(KS=sA,jS+=1):sA.equals(KS)?(jS+=1,jS===UE&&(jS=0,bS=bS.multiply(KS))):jS!==0&&(gT=gT.multiply(Expression.pow(KS,jS)),KS=sA,jS=1),wT=wT.divide(sA)}if(bS!==Expression.ONE){jS!==0&&(gT=gT.multiply(Expression.pow(KS,jS))),wT.equals(Expression.ONE.negate())&&(gT=gT.multiply(wT));var zS=p(UE,gT);if(zS!=null)return bS.multiply(zS)}}if(CE instanceof Expression.Exponentiation&&CE.a instanceof Expression.Symbol){var hT=CE.b.divide(Expression.Integer.fromNumber(UE));return hT.equals(Expression.ONE)?CE.a:new Expression.Exponentiation(CE.a,hT)}if(!Expression.isConstant(CE)&&CE.isNegative()&&(UE===2||UE%2!==0)){CE=CE.negate();var rS=p(UE,CE);return rS==null?null:Expression.ONE.negate()._nthRoot(UE).multiply(rS)}if((CE instanceof Expression.Integer||CE instanceof Expression.Complex)&&CE.isNegative()&&UE%2===0){var rS=CE instanceof Expression.Integer?CE._nthRoot(2):p(2,CE);return rS==null?null:p(UE/2,rS)}if(Expression.has(CE,Expression.Sin)||Expression.has(CE,Expression.Cos)){var lA=p(2,Expression._replaceSinCos(CE));if(lA!=null)return Expression._replaceBySinCos(lA).simplifyExpression()}var oC=void 0;try{oC=CE._nthRoot(UE)}catch(sC){console.error(sC)}if(oC==null){var LS=CE,TA=Expression.getConjugateExpression(LS.getNumerator());if((UE===3||UE===2)&&TA instanceof Expression.Integer){if(UE===2&&Expression._isPositive(CE.negate()))return Expression.I.multiply(p(2,CE.negate()));var LS=CE,lA=new Expression.Symbol("x")._pow(UE).subtract(LS).getNumerator(),nM=Polynomial$1.toPolynomial(Expression.getConjugateExpression(lA),new Expression.Symbol("x")),AA=nM.getZeros();for(const lC of AA)if(lC._pow(UE).equals(CE))return lC;return null}}return oC}},d=function(UE,CE,qE){if(UE===1)return CE;var xS=p(UE,CE);return xS==null&&(CE instanceof Expression.Integer||typeof hit=="function"&&hit({nthRoot:(UE===2?"squareRoot":UE+"-root")+":"+CE.toString()+":"+qE.toString()})),xS},Q=function(UE,CE,qE){for(var xS=CE.getroots(t!=null?function(iS){var eS=Object.assign({},iS,{content:c.multiply(iS.content),roots:UE.concat(iS.roots),newPolynomialVariable:qE});t(eS)}:void 0),dS=0;dS<xS.length;dS+=1)UE.push(xS[dS])};if(n.getDegree()>=2){var Ct=n.getGCDOfTermDegrees();if(Ct>=2){var ar=Ct===n.getDegree();typeof hit=="function"&&(Ct===n.getDegree()?hit({getroots:{allZeros:""}}):hit({getroots:Ct%2===0?n.getDegree()===4?{biquadratic:""}:{even:""}:{xyz:n.toString()}}));for(var en=new Array(Math.floor((n.getDegree()+Ct)/Ct)),tn=0,on=0;on<=n.getDegree();on+=Ct)en[tn]=n.getCoefficient(on),tn+=1;var cn=Polynomial$1.from(en),gn=[];ar?gn=cn.getroots():(t!=null&&t({content:c,roots:a,newPolynomial:cn,type:"t = x^g",g:Ct,newPolynomialVariable:new Expression.Symbol("t")}),Q(gn,cn,new Expression.Symbol("t")));for(var Cn=n.getDegree(),tn=0;tn<gn.length;tn+=1){var ex=gn[tn],ix=d(Ct,ex,n);if(ix!=null){var ax=null;if((!ar||Ct>=5||!n.hasIntegerCoefficients())&&(Ct<=24&&(17896830>>Ct)%2===1||Ct===48)){ax=Polynomial$1.of(Expression.ONE).shift(Ct).add(Polynomial$1.of(ex.negate()));for(var ox=Expression.E.pow(Expression.I.multiply(Expression.TWO.multiply(Expression.PI)).divide(Expression.Integer.fromNumber(Ct))),lx=Expression.ONE,on=0;on<Ct;on+=1){var cx=lx.multiply(ix);lx=lx.multiply(ox),a.push(cx)}}else a.push(ix),ax=Polynomial$1.of(ix.negate(),Expression.ONE),Ct%2===0&&(a.push(ix.negate()),ax=Polynomial$1.of(ix.multiply(ix).negate(),Expression.ZERO,Expression.ONE));var dx=n.divideAndRemainder(ax).quotient;console.assert(n.subtract(dx.multiply(ax)).map(CE=>CE.simplifyExpression()).getDegree()<0),n=dx}}if(!ar)t!=null&&t({content:c,roots:a,newPolynomial:n,type:"x = t^(1/g)",g:Ct});else{var hx=Ct===2?"applyDifferenceOfSquaresRule":Ct===3?"applyDifferenceOfCubesRule":"applyDifferenceOfNthPowersRule";t!=null&&t({content:c,roots:a,newPolynomial:n,type:hx,g:Ct})}var fx=!0;return Cn!==n.getDegree()&&fx&&n.getDegree()>0&&Q(a,n),a}}//! new: solution of quadratic equations
if(n.getDegree()===2){var ux=n.getCoefficient(2),gx=n.getCoefficient(1),ox=n.getCoefficient(0),yx=gx.multiply(gx).subtract(Expression.TWO.multiply(Expression.TWO).multiply(ux).multiply(ox));yx=yx.simplifyExpression();var _x=d(2,yx,n);if(typeof hit=="function"&&hit({getroots:{quadratic:_x==null?yx instanceof Expression.Integer?yx.compareTo(Expression.ZERO):"?"+yx.toString():"OK"}}),_x!=null){if(_x.equals(Expression.ZERO)){var vx=gx.negate().divide(Expression.TWO.multiply(ux));a.push(vx),a.push(vx)}else{var bx=gx.negate().subtract(_x).divide(Expression.TWO.multiply(ux)),xx=gx.negate().add(_x).divide(Expression.TWO.multiply(ux));a.push(bx),a.push(xx)}return n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveQuadraticEquation"}),a}}if(n.getDegree()>=4&&n.getDegree()%2===0){for(var Sx=Math.floor(n.getDegree()/2),Ax=1;Ax<Sx+1&&n.getCoefficient(Sx+Ax).equals(Expression.ZERO)&&n.getCoefficient(Sx-Ax).equals(Expression.ZERO);)Ax+=1;if(Ax<Sx+1&&!n.getCoefficient(Sx+Ax).equals(Expression.ZERO)&&!n.getCoefficient(Sx-Ax).equals(Expression.ZERO)){for(var Cx=Expression.Integer.fromNumber(Ax),Tx=n.getCoefficient(Sx+Ax).divide(n.getCoefficient(Sx-Ax)),Px=!0,on=2;on<Sx+1&&Px;on+=1)Px=Px&&n.getCoefficient(Sx+on).pow(Cx).subtract(n.getCoefficient(Sx-on).pow(Cx).multiply(Tx.pow(Expression.Integer.fromNumber(on)))).equals(Expression.ZERO);if(Px&&typeof hit=="function"&&hit({getroots:{quasiPalindromic:n.getDegree()}}),Px&&n.getDegree()<=Math.log2(Number.MAX_SAFE_INTEGER+1)){for(var Fx=function(UE,CE){var qE=function(iS,eS){return eS===0?1:Math.floor(iS*qE(iS-1,eS-1)/eS)},xS=function(iS,eS,rS){return iS-2*eS>=0?xS(iS-2*eS,1,UE).scale(Expression.Integer.fromNumber(qE(iS,eS)).multiply(rS).negate()).add(xS(iS,eS+1,rS.multiply(UE))):Polynomial$1.of(Expression.ONE).shift(iS)},dS=function(iS,eS){return eS<=iS?xS(iS-eS,1,UE).scale(CE.getCoefficient(eS)).add(dS(iS,eS+1)):Polynomial$1.ZERO};return dS(Math.floor(CE.getDegree()/2),0)},Mx=Ax===1?Tx:d(Ax,Tx,n),Dx=Fx(Mx,n),Ox=Dx.getroots(),on=0;on<Ox.length;on+=1){for(var Lx=Ox[on],Nx=Polynomial$1.of(Expression.ONE,Lx.negate(),Mx),Gx=Nx.getroots(),Ax=0;Ax<Gx.length;Ax+=1){var cx=Gx[Ax];a.push(cx)}n=n.divideAndRemainder(Nx.scale(Nx.getLeadingCoefficient().inverse())).quotient}return t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solvePalindromicEquaion"}),a}}}if(n.getDegree()>=2){var Cn=n.getDegree(),Ux=function(CE){for(var qE=0;qE<=CE.getDegree();qE+=1)if(CE.getCoefficient(qE).equals(Expression.ZERO))return!0;return!1};if(!Ux(n)){for(var Ct=n.getCoefficient(Cn-1).divide(n.getCoefficient(Cn)).divide(Expression.Integer.fromNumber(Cn)),fx=!0,tn=n.getDegree()-1;tn>=1&&fx;tn-=1)fx=Ct.equals(n.getCoefficient(tn-1).divide(n.getCoefficient(tn)).multiply(Expression.Integer.fromNumber(Cn-tn+1)).divide(Expression.Integer.fromNumber(tn)));if(fx){for(var cx=Ct.negate(),tn=0;tn<Cn;tn+=1)a.push(cx);return n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"(ax+b)**n"}),a}}}if(n.getDegree()>=2){var cx=n.doRationalRootTest();if(cx!=null)return n=n.divideAndRemainder(Polynomial$1.of(cx.negate(),Expression.ONE)).quotient,a.push(cx),typeof hit=="function"&&hit({getroots:{rational:""}}),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"useTheRationalRootTest"}),n.getDegree()>0&&Q(a,n),a}if(!n.hasIntegerCoefficients()&&n.getDegree()===3){var Hx=n._getShiftToDepressed();if(!Hx.equals(Expression.ZERO)){var Vx=n._translateRoots(Hx);if(Vx.hasIntegerCoefficients()){var zx=Vx.getroots();if(zx.length===0){zx=Vx.getZeros();debugger}if(zx.length===n.getDegree()){for(const UE of zx)a.push(UE.subtract(Hx));return n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else debugger}}}if(n.hasIntegerCoefficients()){var Cn=n.getDegree(),ux=n.getLeadingCoefficient(),gx=n.getCoefficient(Cn-1);if(!gx.equals(Expression.ZERO)){var Hx=gx.divide(Expression.Integer.fromNumber(Cn).multiply(ux)),rE=n._translateRoots(Hx),Zx=[];if(t!=null){var eE=t;t=function(dS){eE({content:c.multiply(rE.getLeadingCoefficient().divide(n.getLeadingCoefficient()).inverse()),roots:a,newPolynomial:rE,type:"eliminationOfTheSubDominantTerm",b:gx,n:Cn,a:ux,newPolynomialVariable:new Expression.Symbol("t")}),eE(dS),t=eE}}if(Q(Zx,rE,new Expression.Symbol("t")),Zx.length>0){for(const dS of Zx)a.push(dS.subtract(Hx));Zx.length===rE.getDegree()?n=Polynomial$1.of(n.getLeadingCoefficient()):console.warn("TODO:")}return a}}if(n.getDegree()===3){var ux=n.getCoefficient(3),gx=n.getCoefficient(2),ox=n.getCoefficient(1),ax=n.getCoefficient(0),oE=Expression.Integer.fromNumber(3),Hx=gx.divide(oE.multiply(ux)),Fx=function(mS){return mS.subtract(Hx)},iE=n._translateRoots(Hx),rE=iE.scale(iE.getLeadingCoefficient().inverse()),Vx=rE.getCoefficient(1),cn=rE.getCoefficient(0),Wx=Vx.divide(oE)._pow(3).add(cn.divide(Expression.TWO)._pow(2));typeof hit=="function"&&hit({getroots:{cubic:(Wx instanceof Expression.Integer?Wx.compareTo(Expression.ZERO):"?")+"-"+(Vx instanceof Expression.Integer?Vx.compareTo(Expression.ZERO):"?")}});var AE=Expression.ONE.negate().divide(Expression.TWO),ME=Expression.I.multiply(oE.squareRoot()).divide(Expression.TWO),EE=AE.subtract(ME),bE=AE.add(ME);if(cn.equals(Expression.ZERO)&&Vx.equals(Expression.ZERO)){var cx=Fx(Expression.ZERO);return a.push(cx),a.push(cx),a.push(cx),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(cn.equals(Expression.ZERO)){a.push(Fx(Expression.ZERO));var iE=d(2,Vx.negate(),n);return a.push(Fx(iE)),a.push(Fx(iE.negate())),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Vx.equals(Expression.ZERO)){var iE=d(3,cn.negate(),n);return a.push(Fx(iE)),a.push(Fx(iE.multiply(EE))),a.push(Fx(iE.multiply(bE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Wx.equals(Expression.ZERO)){var kE=oE.multiply(cn).divide(Expression.TWO.multiply(Vx)).negate(),TE=Fx(kE);a.push(TE),a.push(TE);var jE=kE.multiply(Expression.TWO).negate(),Ix=Fx(jE);return a.push(Ix),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else{var iE=d(2,Wx,n);if(iE!=null){var Bx=d(3,cn.negate().divide(Expression.TWO).add(iE),n);if(Bx!=null&&!(Bx instanceof Expression.ExpressionPolynomialRoot)&&!(Bx instanceof Expression.ExpressionWithPolynomialRoot)){var Yx=function(US){return Fx(US.subtract(Vx.divide(oE.multiply(US))))};return a.push(Yx(Bx)),a.push(Yx(Bx.multiply(EE))),a.push(Yx(Bx.multiply(bE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}}}}//!2018-12-23
if(n.getDegree()>2){var iE=n.squareFreeFactors(),Qx=iE.a0,nE=iE.a1;if(Qx.getDegree()>0){for(var Kx=Qx,dE=Qx.getroots(function(CE){Kx=CE.newPolynomial}),cE=null,on=0;on<dE.length;on+=1){var cx=dE[on];a.push(cx),(cE==null||!cE.equals(cx))&&a.push(cx),cE=cx}for(var mE=nE,xE=nE.getroots(function(CE){mE=CE.newPolynomial}),on=0;on<xE.length;on+=1)a.push(xE[on]);if(Kx!=null&&(n=mE.multiply(Kx).multiply(Polynomial$1.polynomialGCD(Kx,n))),dE.length>0||xE.length>0)return typeof hit=="function"&&hit({getroots:{squareFreeFactorization:n.toString()}}),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"squareFreeFactorization"}),a}}//!
if(n.getDegree()>=4){var Ct=n.factorize();if(Ct!=null){for(var Hx=n.divideAndRemainder(Ct).quotient,OE=null,PE=Ct.getroots(function(qE){OE=qE.newPolynomial.scale(qE.content)}),on=0;on<PE.length;on+=1)a.push(PE[on]);PE.length>0&&(n=n.divideAndRemainder(Ct.divideAndRemainder(OE).quotient).quotient);for(var sE=null,hE=Hx.getroots(function(qE){sE=qE.newPolynomial.scale(qE.content)}),on=0;on<hE.length;on+=1)a.push(hE[on]);return hE.length>0&&(n=n.divideAndRemainder(Hx.divideAndRemainder(sE).quotient).quotient),(hE.length>0||PE.length>0)&&(typeof hit=="function"&&hit({getroots:{methodOfKronecker:n.toString()}}),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"methodOfKronecker"})),a}}if(n.getDegree()>=3){for(var on=0;on<=n.getDegree();on+=1)if(Expression.has(n.getCoefficient(on),Expression.SquareRoot)){var ox=null;if(Expression._map(function(qE){return ox==null&&qE instanceof Expression.SquareRoot&&qE.a instanceof Expression.Integer&&(ox=qE),qE},n.getCoefficient(on)),ox!=null){var iE=new Expression.Symbol("_t"),Vx=n.map(function(eS){var rS=Expression.ZERO;for(var HS of eS.summands()){var mS=Expression.ONE;for(var US of HS.factors())if(US.equals(ox))mS=mS.multiply(iE);else if(US instanceof Expression.Integer){for(var LS=0;US.gcd(ox.a).equals(ox.a);)LS+=2,US=US.divide(ox.a);mS=mS.multiply(US.multiply(iE._pow(LS)))}else mS=mS.multiply(US);rS=rS.add(mS)}return rS}),ux="_x"+ ++counter,wE=Polynomial$1.toPolynomial(Vx.calcAt(new Expression.Symbol(ux)),iE);//!2020-12-11
var Ct=wE.getGCDOfTermDegrees();if(Ct>=2){for(var en=new Array(Math.floor((wE.getDegree()+Ct)/Ct)),tn=0,vE=0;vE<=wE.getDegree();vE+=Ct)en[tn]=wE.getCoefficient(vE).multiply(ox._pow(vE-tn)),tn+=1;wE=Polynomial$1.from(en)}//!
if(wE.getDegree()>1){for(var RE=[],IE=null;(IE=wE.doRationalRootTest())!=null;)RE.push(IE),wE=wE.divideAndRemainder(Polynomial$1.of(IE.negate(),Expression.ONE),"throw").quotient;for(var $x=a.length,Ax=0;Ax<RE.length;Ax+=1)for(var kx=Polynomial$1.toPolynomial(RE[Ax].subtract(ox).getNumerator(),new Expression.Symbol(ux)).getroots(),tn=0;tn<kx.length;tn+=1){var cx=kx[tn];a.push(cx),n=n.divideAndRemainder(Polynomial$1.of(cx.negate(),Expression.ONE)).quotient}if(a.length>$x)return typeof hit=="function"&&hit({getroots:{methodOfIntroducingANewVariable:""}}),t!=null&&t({content:c,roots:a,newPolynomial:n,type:"methodOfIntroducingANewVariable",t:ox}),Q(a,n),a}}}}if(n.getDegree()===4){var jx=n.getCoefficient(4),Vx=n.scale(jx.inverse()),gx=Vx.getCoefficient(3),Jx=new Expression.Symbol("$y"),Fx=function(eS){return eS.subtract(gx.divide(Expression.Integer.fromNumber(4)))},gE=Vx.calcAt(Fx(Jx)),DE=Polynomial$1.toPolynomial(gE.getNumerator(),Jx),Vx=DE.getCoefficient(2),cn=DE.getCoefficient(1),LE=DE.getCoefficient(0);const dS=Polynomial$1.of(cn._pow(2).negate(),Vx._pow(2).subtract(Expression.TWO.add(Expression.TWO).multiply(LE)),Expression.TWO.multiply(Vx),Expression.ONE),iS=dS.getCoefficient(1).equals(Expression.ZERO)&&dS.getCoefficient(2).equals(Expression.ZERO)||dS.getCoefficient(0).equals(Expression.ZERO)?dS.getroots():[dS.doRationalRootTest()||Expression.ZERO];for(const eS of iS){const rS=p(2,eS);if(!eS.equals(Expression.ZERO)&&rS!=null){const HS=rS.negate(),mS=Vx.add(rS._pow(2)).add(cn.divide(rS)).divide(Expression.TWO),US=Vx.add(rS._pow(2)).subtract(cn.divide(rS)).divide(Expression.TWO),LS=Polynomial$1.of(mS,HS,Expression.ONE),hT=Polynomial$1.of(US,rS,Expression.ONE);var NE=Polynomial$1.of(Expression.ONE);for(const bS of LS.getroots()){const aT=Fx(bS);a.push(aT),NE=NE.multiply(Polynomial$1.of(aT.negate(),Expression.ONE))}for(const bS of hT.getroots()){const aT=Fx(bS);a.push(aT),NE=NE.multiply(Polynomial$1.of(aT.negate(),Expression.ONE))}if(NE.getDegree()>0)return n=n.divideAndRemainder(NE).quotient,t!=null&&t({content:c,roots:a,newPolynomial:n,type:"solveQuarticEcuation"}),Q(a,n),a}}}if(!n.hasIntegerCoefficients()&&n.getDegree()>2){var $E=new Expression.Symbol("$$"),gE=n.calcAt($E),ox=Expression.getConjugate(gE);if(ox!=null){for(var HE=Polynomial$1.toPolynomial(ox.multiply(gE),$E).getSquareFreePolynomial().getroots(function(qE){qE.newPolynomial}),on=0;on<HE.length;on+=1){var cx=HE[on];n.calcAt(cx).equals(Expression.ZERO)?(a.push(cx),n=n.divideAndRemainder(Polynomial$1.of(cx.negate(),Expression.ONE)).quotient):console.debug(cx)}return HE.length>0&&(t!=null&&t({content:c,roots:a,newPolynomial:n,type:"multiplyByConjugates",t:ox}),Q(a,n)),a}}n.getDegree()>=0&&typeof hit=="function"&&hit({getroots:{other:n.getDegree()}});//!2023-05-08 new TODO: !?
if(n.hasIntegerCoefficients()&&n.getDegree()>=4&&n.getDegree()%2===0&&n.getDegree()<=12){var Nx=new Expression.Symbol("u"),QE=new Expression.Symbol("v"),ZE=n.calcAt(Nx.add(QE)),TS=n.calcAt(Nx.subtract(QE)),PS=Polynomial$1.resultant(Polynomial$1.toPolynomial(ZE,Nx),Polynomial$1.toPolynomial(TS,Nx));PS=Polynomial$1.toPolynomial(PS,QE);for(var pS=function(CE){for(var qE=[],xS=CE.factorize();xS!=null&&CE.getDegree()>1;)xS.getDegree()<=2&&(qE=qE.concat(xS.getroots())),CE=CE.divideAndRemainder(xS).quotient,xS=CE.factorize();return qE},FS=Expression.unique(pS(PS.primitivePart())),on=0;on<FS.length;on++){var QE=FS[on],Ct=Polynomial$1.polynomialGCD(n._translateRoots(QE),n._translateRoots(QE.negate()));if(Ct.getDegree()<=3){var NS=Ct.getroots();if(NS.length>0){for(var GS=Polynomial$1.of(Expression.ONE),on=0;on<NS.length;on+=1){var Nx=NS[on],cx=Nx.add(QE);a.push(cx),GS=GS.multiply(Polynomial$1.of(cx.negate(),Expression.ONE))}var iE=n.divideAndRemainder(GS);if(!iE.remainder.equals(Polynomial$1.ZERO))throw new TypeError;return n=iE.quotient,Q(a,n),a}}}}return a};Polynomial$1.prototype.derive=function(){for(var t=new PolynomialData(this.a.size),n=0;n<this.a.size;n+=1){var a=this.a.degree(n),l=this.a.coefficient(n);if(a>=1){var u=Expression.Integer.fromNumber(a).multiply(l);u.equals(Expression.ZERO)||t.add(a-1,u)}}return new Polynomial$1(t)};Polynomial$1.prototype.getSquareFreePolynomial=function(){return this.divideAndRemainder(this.squareFreeFactors().a0).quotient};Polynomial$1.prototype.isSquareFreePolynomial=function(){return this.squareFreeFactors().a0.equals(Polynomial$1.of(Expression.ONE))};Polynomial$1.prototype.squareFreeFactors=function(){for(var t=this,n=0;t.getCoefficient(n).equals(Expression.ZERO);)n+=1;if(t=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n),"throw").quotient,t.getDegree()!==0){var a=t,l=a.derive(),u=Polynomial$1.polynomialGCD(a,l);if(u.getDegree()!==0){Expression.isConstant(u.getLeadingCoefficient())&&(u=u.scale(u.getLeadingCoefficient().inverse())),a.hasIntegerCoefficients()&&(u=u.scale(u.getContent().inverse()));var c=a.divideAndRemainder(u,a._hasIntegerLikeCoefficients()?"throw":void 0).quotient,p=Polynomial$1.polynomialGCD(c,u),d=c.divideAndRemainder(p,c._hasIntegerLikeCoefficients()?"throw":void 0).quotient;return{a1:d.shift(n===1?1:0),a0:u.shift(n>1?n-1:0)}}}return{a1:t.shift(n===1?1:0),a0:Polynomial$1.of(Expression.ONE).shift(n>1?n-1:0)}};Polynomial$1.testables={multiplyByKroneckerSubstitution};Polynomial$1.prototype._findGoodSubstitution=function(){var t=function(a){for(var l=a.getCoefficient(0).abs(),u=0;u<a.getDegree();u+=1)l=l.gcd(a.getCoefficient(u).abs());l=l.abs();for(var c=Expression.ONE;!l.equals(Expression.ONE);){var p=l.primeFactor();if(!a.getLeadingCoefficient().remainder(p).equals(Expression.ZERO)){for(var d=!0,u=0;u<a.getDegree()&&d;u+=1){var Q=p._pow(a.getDegree()-u);d=a.getCoefficient(u).gcd(Q).abs().equals(Q)}d&&(c=c.multiply(p),a=a._scaleRoots(p.inverse()).primitivePart())}l=l.truncatingDivide(p)}return c},n=t(this);return n.divide(t(this._scaleRoots(n.inverse())._exponentiateRoots(-1)))};Polynomial$1.prototype._tryGoodSubstitution=function(){return this._scaleRoots(this._findGoodSubstitution())};Polynomial$1.prototype._getShiftToDepressed=function(){var t=this.getDegree(),n=this.getLeadingCoefficient(),a=this.getCoefficient(t-1),l=a.divide(Expression.Integer.fromNumber(t).multiply(n));return l};Polynomial$1.prototype._factorizeOverTheIntegers=function(){return factorizeOverTheIntegers(this)};Polynomial$1.prototype._factorizeMultivariateIntegerPolynomial=function(){var t=Polynomial$1._getY(this,this),n=Date.now();const a=function(c,p){return c.map(d=>new Expression.Polynomial(Polynomial$1.toPolynomial(d,new Expression.Symbol(p))))};var l=factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial(a(this,t.symbol)),u=Date.now();return u-n>4&&console.log("_factorizeMultivariateIntegerPolynomial",u-n,this.toString()),l==null?null:(l=l.map(c=>c.polynomial.calcAt(t)),l.getLeadingCoefficient().isNegative()&&(l=l.negate()),l)};Polynomial$1.prototype.factorize=function(){if(this.getCoefficient(0).equals(Expression.ZERO))return Polynomial$1.of(Expression.ZERO,Expression.ONE);var t=this.getContent();if(!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate()))throw new RangeError;if(this.getDegree()===1)return null;if(this.getDegree()===2){var n=function(gn){console.assert(gn.getDegree()===2);var Cn=gn.getCoefficient(2),ex=gn.getCoefficient(1),ix=gn.getCoefficient(0);return ex.multiply(ex).subtract(Expression.Integer.fromNumber(4).multiply(Cn).multiply(ix))}(this);if(n instanceof Expression.Integer&&!n._isPerfectSquare())return null}var a=this.squareFreeFactors();if(a.a0.getDegree()>0)return a.a1.getDegree()>0?a.a1:a.a0;if(this.getDegree()<2)return null;//!new
var l,u;this.hasIntegerCoefficients();var c=this.getDegree(),p=this.getCoefficient(c-1);if(!p.equals(Expression.ZERO)&&!this.hasIntegerCoefficients()){var d=this.getLeadingCoefficient(),Q=p.divide(Expression.Integer.fromNumber(c).multiply(d)),Ct=this._translateRoots(Q);if(Ct.hasIntegerCoefficients()){Ct=Ct.primitivePart();var ar=Ct.factorize();return ar!=null?ar._translateRoots(Q.negate()).primitivePart():null}else console.warn("???")}//!
//!new
if(this.isEven()&&this.hasIntegerCoefficients()&&(!this.getCoefficient(0).abs()._isPerfectSquare()||!this.getCoefficient(this.getDegree()).abs()._isPerfectSquare())){var u=this._exponentiateRoots(2).factorize();return u!=null?u._exponentiateRoots(1/2):null}var en=this.getGCDOfTermDegrees();if(en>2){var u=this._exponentiateRoots(en).factorize();if(u!=null)return u._exponentiateRoots(1/en)}//!
if(!this.hasIntegerCoefficients()||this.getDegree()<4&&this.getLeadingCoefficient().abs().bitLength()+this.getCoefficient(0).abs().bitLength()<9){var tn=this.doRationalRootTest();if(tn!=null)return Polynomial$1.of(tn.getNumerator(),tn.getDenominator().negate());if(this.getDegree()<4)return null}//!
var on=this;return on.hasIntegerCoefficients()?on._factorizeOverTheIntegers().next().value:on._hasIntegerLikeCoefficients()&&Polynomial$1._getY(on,on)!=null?on._factorizeMultivariateIntegerPolynomial():null};Polynomial$1.prototype.primitivePart=function(){return this.scale(this.getContent().inverse())};Polynomial$1.prototype.modularInverse=function(t){if(t.getDegree()<9&&this.getDegree()<t.getDegree()&&!1||this.getDegree()<t.getDegree()&&t.getDegree()<=3){for(var n=t.getDegree(),a=this,l=Polynomial$1.of(n%2===1?Expression.ONE:Expression.ONE.negate());a.getDegree()>0;){var u=function(dx,hx){for(var fx=dx,ux=Polynomial$1.ZERO;fx.getDegree()>=hx.getDegree();){var gx=fx.getLeadingCoefficient();ux=ux.scale(hx.getLeadingCoefficient()),fx=fx.scale(hx.getLeadingCoefficient());var yx=Polynomial$1.of(gx.negate()).shift(fx.getDegree()-hx.getDegree());ux=ux.add(yx),fx=fx.add(hx.multiply(yx))}return{Q:ux,R:fx}},c=u(t.negate(),a);a=c.R,l=l.multiply(c.Q)}l=l.divideAndRemainder(t).remainder;var p,ar,d=l;if(t.getDegree()<=3)return l}var Q=t,Ct=Math.gcd(this.getGCDOfTermDegrees(),Q.getGCDOfTermDegrees());if(Ct>1)return this._exponentiateRoots(Ct).modularInverse(Q._exponentiateRoots(Ct)).primitivePart()._exponentiateRoots(1/Ct);this.hasIntegerCoefficients()&&Q.hasIntegerCoefficients();var ar=this,en=Q,lx=ar.getDegree()>=Q.getDegree()?Polynomial$1.pseudoRemainder(ar,Q).primitivePart():ar,tn=Polynomial$1.of(Expression.ZERO),on=Polynomial$1.of(Expression.ONE),cn=(ar._hasIntegerLikeCoefficients()&&Q._hasIntegerLikeCoefficients(),"primitive");for(var c of Polynomial$1._pseudoRemainderSequence(en,lx,cn)){var gn=lx.getLeadingCoefficient()._pow(en.getDegree()-lx.getDegree()+1),Cn=c.q,ex=c.,ix=tn.scale(gn).subtract(Cn.multiply(on));{var Ct=ix.getContent().gcd(ex);ix=ix.divideAndRemainder(Polynomial$1.of(Ct),"throw").quotient,on=on.scale(ex.divide(Ct))}[tn,on]=[on,ix];var ax=c.R;[en,lx]=[lx,ax]}var ox=en;if(ox.getDegree()!==0)throw new TypeError;tn=tn.primitivePart().scale(Q.getLeadingCoefficient()._pow(Math.max(tn.getDegree()+ar.getDegree()-Q.getDegree()+1,0)));var lx=tn.multiply(ar).divideAndRemainder(Q,"throw").remainder;if(lx.getDegree()!==0)throw new TypeError;return d!=null&&console.log("!",d.toString(),tn.toString()),tn};const SUBQUADRATIC_GCD_THRESHOLD=32*1024,SUBQUADRATIC_HALFGCD_THRESHOLD=4096;let SMALL_GCD_MAX=0n,DIGITSIZE=0,smallgcd=null,smallgcdext=null,wasmHelper=null,jsHelper=null;if(typeof WebAssembly<"u"){const t=new Uint8Array([0,97,115,109,1,0,0,0,1,20,3,96,0,1,126,96,2,126,126,1,126,96,5,126,126,126,126,127,1,127,3,8,7,1,1,2,0,0,0,0,6,21,4,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,7,47,7,6,117,54,52,103,99,100,0,0,9,117,54,52,103,99,100,101,120,116,0,1,6,104,101,108,112,101,114,0,2,1,65,0,3,1,66,0,4,1,67,0,5,1,68,0,6,10,141,4,7,37,1,1,126,32,1,66,0,82,4,64,3,64,32,0,32,1,130,33,2,32,1,33,0,32,2,34,1,66,0,82,13,0,11,11,32,0,11,97,1,6,126,66,1,33,6,66,1,33,3,32,1,66,0,82,4,64,3,64,32,0,32,0,32,1,128,34,7,32,1,126,125,33,4,32,1,33,0,32,6,32,2,32,7,126,125,33,1,32,5,32,3,32,7,126,125,33,7,32,2,33,6,32,3,33,5,32,1,33,2,32,7,33,3,32,4,34,1,66,0,82,13,0,11,11,32,6,36,0,32,5,36,1,32,0,11,238,2,2,7,126,2,127,66,1,33,9,66,1,33,7,32,0,66,127,82,32,2,66,127,82,113,4,64,3,64,32,0,32,6,124,33,8,32,0,32,9,124,33,6,32,2,32,5,124,33,5,32,2,32,7,124,33,7,32,12,65,1,113,4,64,32,8,33,9,32,6,33,8,32,9,33,6,32,5,33,9,32,7,33,5,32,9,33,7,11,3,64,32,5,32,6,32,8,32,7,128,34,11,32,5,126,125,34,9,86,4,64,32,12,65,1,106,33,12,32,8,32,7,32,11,126,125,33,10,32,0,32,2,32,11,126,125,33,11,32,5,33,8,32,7,33,6,32,2,33,0,32,10,33,5,32,9,33,7,32,11,33,2,12,1,11,11,32,6,32,0,125,33,9,32,8,32,0,125,33,6,32,5,32,2,125,33,5,32,7,32,2,125,33,7,32,12,65,1,113,4,64,32,9,33,8,32,6,33,9,32,8,33,6,32,5,33,8,32,7,33,5,32,8,33,7,11,32,4,32,0,32,9,124,34,8,32,0,32,6,124,34,10,32,8,32,10,86,27,121,167,34,13,32,4,32,13,72,27,34,13,4,64,32,1,32,1,32,4,32,13,107,34,4,172,34,8,136,34,10,32,8,134,125,33,1,32,3,32,3,32,8,136,34,11,32,8,134,125,33,3,32,9,32,10,126,32,6,32,11,126,124,32,0,32,13,172,34,8,134,124,33,0,32,5,32,10,126,32,7,32,11,126,124,32,2,32,8,134,124,33,2,11,32,13,13,0,11,11,32,9,36,0,32,6,36,1,32,5,36,2,32,7,36,3,65,0,11,4,0,35,0,11,4,0,35,1,11,4,0,35,2,11,4,0,35,3,11]);try{const n=new WebAssembly.Instance(new WebAssembly.Module(t)).exports;n.helper(1n,0n,1n,0n)!=null&&(wasmHelper=function(a,l,u,c,p){return n.helper(a,l,u,c,p),[n.A(),n.B(),n.C(),n.D()]},DIGITSIZE=64,SMALL_GCD_MAX=BigInt.asUintN(64,-1n)),n.u64gcd(0n,0n)===0n&&(smallgcd=n.u64gcd),n.u64gcdext(0n,0n)===0n&&(smallgcdext=function(a,l){const u=n.u64gcdext(a,l);return[n.A(),n.B(),u]})}catch(n){console.log(n)}}function AsmModule(t){var n=t.Math.floor,a=t.Math.max,l=t.Math.clz32,u=-0,c=-0,p=-0,d=-0;function Q(ex,ix){ex=+ex,ix=+ix;for(var ax=-0,ox=-0;ix>-0;)ox=+n(ex/ix),ax=ex-ox*ix,ex=ix,ix=ax;return+ex}function Ct(ex,ix){ex=+ex,ix=+ix;for(var ax=-0,ox=-0,lx=1,cx=-0,dx=-0,hx=1,fx=-0,ux=-0;ix>-0;)ox=+n(ex/ix),ax=ex-ox*ix,ex=ix,ix=ax,fx=lx-ox*dx,ux=cx-ox*hx,lx=dx,cx=hx,dx=fx,hx=ux;return u=lx,c=cx,+ex}function ar(ex){ex=+ex;for(var ix=0;ex>=4294967296;)ex=ex*23283064365386963e-26,ix=ix+32|0;return ix=ix+(32-(l(~~ex)|0))|0,ix|0}function en(ex){ex=ex|0;for(var ix=1;(ex|0)<0;)ex=ex+32|0,ix=ix*23283064365386963e-26;for(;(ex|0)>=32;)ex=ex-32|0,ix=ix*4294967296;return ix=ix*+(1<<ex>>>0),+ix}function tn(ex,ix,ax,ox,lx){ex=+ex,ix=+ix,ax=+ax,ox=+ox,lx=lx|0;var cx=1,dx=-0,hx=-0,fx=1,ux=0,gx=0,yx=-0,_x=-0,vx=-0,bx=-0,xx=-0,Sx=-0,Ax=0,Cx=-0,Tx=-0,Px=-0,Fx=-0,Mx=-0;if(ax!=-0)do{do yx=n(ex/ax),_x=ex-yx*ax,vx=hx,bx=fx,xx=cx-yx*hx,Sx=dx-yx*fx,gx=-0<=_x+xx&_x+xx<ax+hx&-0<=_x+Sx&_x+Sx<ax+fx,gx&&(ex=ax,ax=_x,cx=vx,dx=bx,hx=xx,fx=Sx);while(gx);Ax=53-(ar(ex+a(cx,dx))|0)|0,ux=(Ax|0)<0?Ax:(Ax|0)>(lx|0)?lx:Ax,(Ax|0)!=0&&(Cx=+en(lx-ux|0),Tx=+en(ux-lx|0),Px=+n(ix*Tx),Fx=+n(ox*Tx),ix=ix-Px*Cx,ox=ox-Fx*Cx,lx=lx-ux|0,Mx=+en(ux),ex=cx*Px+dx*Fx+ex*Mx,ax=hx*Px+fx*Fx+ax*Mx)}while((ux|0)!=0);return u=cx,c=dx,p=hx,d=fx,0}function on(){return u}function cn(){return c}function gn(){return p}function Cn(){return d}return{f64gcdext:Ct,f64gcd:Q,helper:tn,A:on,B:cn,C:gn,D:Cn}}if(DIGITSIZE===0){const t=AsmModule(globalThis);jsHelper=function(n,a,l,u,c){return t.helper(n,a,l,u,c),[BigInt(t.A()),BigInt(t.B()),BigInt(t.C()),BigInt(t.D())]},DIGITSIZE=53,SMALL_GCD_MAX=BigInt.asUintN(53,-1n),smallgcd=function(n,a){return BigInt(t.f64gcd(Number(BigInt(n)),Number(BigInt(a))))},smallgcdext=function(n,a){const l=t.f64gcdext(Number(BigInt(n)),Number(BigInt(a)));return[BigInt(t.A()),BigInt(t.B()),BigInt(l)]}}function bitLength(t){const n=t.toString(16),a=n.charCodeAt(0)-0-48;if(a<=0)throw new RangeError;return(n.length-1)*4+(32-Math.clz32(Math.min(a,8)))}const frexpf64=typeof Float64Array<"u"?new Float64Array(1):null,frexpi32=typeof Float64Array<"u"?new Int32Array(frexpf64.buffer):null;let previousValue=0;function bitLength2(t){if(previousValue<=1024){const a=-0+Number(BigInt(t));if(frexpf64!=null){frexpf64[0]=a;const c=(frexpi32[1]>>20)-1023;if(c<1024&&frexpi32[0]!==0||(frexpi32[1]&1048575)!==0)return previousValue=c+1,previousValue}const l=Math.log2(a)+1024*4-1024*4,u=Math.ceil(l);if(l!==u)return previousValue=u,previousValue}previousValue<DIGITSIZE&&(previousValue=DIGITSIZE);const n=-0+Number(t>>BigInt(previousValue-DIGITSIZE));if(n>=1&&n<=9007199254740992){let a=+n,l=0;for(;a>1073741824;)a=Math.floor(a/1073741824),l+=30;return l+=32-Math.clz32(a),previousValue=previousValue-DIGITSIZE+l,previousValue}return previousValue=bitLength(t),previousValue}function helper$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(wasmHelper!=null){if(DIGITSIZE!==64)throw new RangeError;const a=BigInt.asUintN(64,t>>64n),l=BigInt.asUintN(64,t),u=BigInt.asUintN(64,n>>64n),c=BigInt.asUintN(64,n);return wasmHelper(a,l,u,c,64)}else{if(DIGITSIZE!==53)throw new RangeError;const a=-0+Number(t>>53n),l=-0+Number(BigInt.asUintN(53,t)),u=-0+Number(n>>53n),c=-0+Number(BigInt.asUintN(53,n));return jsHelper(a,l,u,c,53)}}function abs$2(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function max$2(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;return t<n?n:t}function halfgcd(t,n,a=!0,l=!0,u=!1){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;a=a||l;let c=1n,p=0n,d=0n,Q=1n,Ct=0;if(t<0n&&(t=-t,a&&(c=-c,p=-p,Ct+=1)),n<0n&&(n=-n,a&&(d=-d,Q=-Q,Ct+=1)),t<n){const on=t;if(t=n,n=on,a){const cn=c;c=d,d=cn;const gn=p;p=Q,Q=gn,Ct+=1}}let ar=!1;l&&BigInt.asUintN(SUBQUADRATIC_HALFGCD_THRESHOLD,t)===t&&(ar=!0);let en=!1,tn=0;for(;(l||t>SMALL_GCD_MAX)&&n!==0n;){if(!ar&&!l&&BigInt.asUintN(SUBQUADRATIC_GCD_THRESHOLD*(a?1/16:1),n)===n){ar=!0;continue}if(Ct+=1,!ar){l&&Ct===1&&(tn=bitLength(t));const gn=l?bitLength(max$2(abs$2(d),abs$2(Q))):0;let Cn=l?Math.max(0,Math.ceil((tn-gn-gn)*(1/2))):a?0:Math.floor(bitLength(t)*2/3),ex=BigInt(Cn);if(Ct!==1&&l){if(Cn<256){ar=!0;continue}let vx=8;for(;t+c>>ex!==t+p>>ex||n+d>>ex!==n+Q>>ex;)Cn+=vx,ex=BigInt(Cn),vx+=vx}const[ix,ax,ox,lx,cx,dx]=halfgcd(t>>ex,n>>ex),[hx,fx,ux,gx,yx,_x]=[BigInt(ix),BigInt(ax),BigInt(ox),BigInt(lx),BigInt(cx),BigInt(dx)];if(fx!==0n){if(a)if(Ct===1)c=hx,p=fx,d=ux,Q=gx;else{const Ax=hx*p+fx*Q,Cx=ux*p+gx*Q;if(p=Ax,Q=Cx,l){const Tx=hx*c+fx*d,Px=ux*c+gx*d;c=Tx,d=Px}}const vx=BigInt.asUintN(Cn,t),bx=BigInt.asUintN(Cn,n),xx=hx*vx+fx*bx+(yx<<ex),Sx=ux*vx+gx*bx+(_x<<ex);if(t=xx,n=Sx,t<0n||n<0n)throw new TypeError("assertion");continue}}if(ar&&!en){let gn=Math.max(0,bitLength2(t)-DIGITSIZE*2),Cn=gn===0?0n:BigInt(gn);if(Ct!==1&&l&&(t+c>>Cn!==t+p>>Cn||n+d>>Cn!==n+Q>>Cn)){if(!u)break;do gn+=8,Cn=BigInt(gn);while(t+c>>Cn!==t+p>>Cn||n+d>>Cn!==n+Q>>Cn);if(n>>Cn===0n){en=!0;continue}}const[ex,ix,ax,ox]=helper$1(gn===0?t:t>>Cn,gn===0?n:n>>Cn),[lx,cx,dx,hx]=[BigInt(ex),BigInt(ix),BigInt(ax),BigInt(ox)];if(cx!==0n){if(a)if(Ct===1)c=lx,p=cx,d=dx,Q=hx;else{const gx=lx*p+cx*Q,yx=dx*p+hx*Q;if(p=gx,Q=yx,l){const _x=lx*c+cx*d,vx=dx*c+hx*d;c=_x,d=vx}}const fx=lx*t+cx*n,ux=dx*t+hx*n;if(t=fx,n=ux,t<0n||n<0n)throw new TypeError("assertion");continue}}const on=t/n,cn=t-on*n;if(a){const gn=c-on*d,Cn=p-on*Q;if(l&&!(0n<=cn+gn&&cn+gn<n+d&&0n<=cn+Cn&&cn+Cn<n+Q))break;c=d,p=Q,d=gn,Q=Cn}t=n,n=cn}return[c,p,d,Q,t,n]}function LehmersGCD(t,n){const[a,l,u,c,p,d]=halfgcd(t,n,!1,!1);return t=BigInt(p),n=BigInt(d),n!==0n&&(t=BigInt.asUintN(64,smallgcd(t,n))),t}function LehmersGCDExt(t,n){const[a,l,u,c,p,d]=halfgcd(t,n,!0,!1),Q=t,Ct=n;let ar=BigInt(a),en=BigInt(l);BigInt(u);let tn=BigInt(c);if(t=BigInt(p),n=BigInt(d),d!==0n){const[on,cn,gn]=smallgcdext(t,n);t=BigInt.asUintN(64,gn),n=0n,en=on*en+cn*tn}return ar=Q===0n?0n:(t-en*Ct)/Q,[ar,en,t]}function gcd$1(t,n){return LehmersGCD(BigInt(t),BigInt(n))}function gcdext(t,n){return LehmersGCDExt(BigInt(t),BigInt(n))}function invmod(t,n){const[a,l,u,c,p,d]=halfgcd(n,t,!0,!1);if(BigInt(d)!==0n){const[Ct,ar,en]=smallgcdext(p,d);if(BigInt.asUintN(64,en)!==1n)return 0n;const tn=Ct*BigInt(l)+ar*BigInt(c);return tn<0n?tn+n:tn}if(BigInt(p)!==1n)return 0n;const Q=BigInt(l);return Q<0n?Q+n:Q}function halfgcdWrapper(t,n){return halfgcd(t,n,!0,!0,!0)}gcd$1.halfgcd=halfgcdWrapper;gcd$1.gcdext=gcdext;gcd$1.invmod=invmod;function abs$1(t){return t<0n?0n-t:t}function ngcd(t,n){return BigInt(gcd$1(BigInt(t),BigInt(n)))}function QuadraticInteger(t,n,a,l=!1){let u=BigInt(t),c=BigInt(n);const p=typeof a=="number"?a:Number(BigInt(a));if(l&&p%4===0)throw new RangeError;if(l&&u%2n===0n&&c%2n===0n&&(l=!1,u/=2n,c/=2n),l&&(u%2n===0n||c%2n===0n))throw new RangeError;this.a=u,this.b=c,this.D=p,this.overTwo=l}QuadraticInteger.prototype.multiply=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=BigInt(n.a)*t.a+BigInt(n.b)*t.b*BigInt(t.D),l=BigInt(n.a)*t.b+BigInt(n.b)*t.a,u=(n.overTwo?1:0)+(t.overTwo?1:0);u>0&&a%2n===0n&&l%2n===0n;)a/=2n,l/=2n,u-=1;return new QuadraticInteger(a,l,n.D,u===1)};QuadraticInteger.prototype.conjugate=function(t){return new QuadraticInteger(this.a,-BigInt(this.b),this.D,this.overTwo)};QuadraticInteger.prototype.norm=function(){const t=BigInt(this.a),n=BigInt(this.b),a=+this.D;var l=t*t,u=n*n,c=l-u*BigInt(a);if(this.overTwo){if(c%4n!==0n)throw new RangeError("assertion");c/=4n}return c};QuadraticInteger.prototype.truncatingDivideInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).truncatingDivide(this)};QuadraticInteger.prototype.truncatingDivide=function(t){if(!(t instanceof QuadraticInteger)){if(!t instanceof Expression.Integer)throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=n.multiply(t.conjugate()),l=t.norm();l%2n===0n&&a.a%2n===0n&&a.b%2n===0n;)a=new QuadraticInteger(a.a/2n,a.b/2n,a.D,a.overTwo),l/=2n;return!a.overTwo&&a.D%4===1&&a.a%2n!==0n&&a.b%2n!==0n&&l%2n===0n&&(a=new QuadraticInteger(a.a,a.b,a.D,!0),l/=2n),BigInt(a.a)%l===0n&&BigInt(a.b)%l===0n?new QuadraticInteger(BigInt(a.a)/l,BigInt(a.b)/l,n.D,a.overTwo):null};QuadraticInteger.prototype.negate=function(){return new QuadraticInteger(-BigInt(this.a),-BigInt(this.b),this.D,this.overTwo)};function factors(t){if(t<1n)throw new TypeError;var n=t>1n?BigInt(primeFactor(t)):1n,a=1n,l=1n,u=null,c=1n,p={done:!1,value:null,next:function(){if(n===1n)return this.value=null,this.done=!0,this;if(u==null){if(t%n===0n)return a=a*n,t=t/n,this.value=a,this.done=!1,this;u=factors(t),c=a}return c===a?(c=1n,l=u.next().value):c=c*n,this.value=l==null?null:l*c,this.done=l==null,this}};return p[Symbol.iterator]=function(){return this},p}QuadraticInteger._factors=function(t){return factors(BigInt(t))};QuadraticInteger._complexIntegerPrimeFactor=function(t,n){t=BigInt(t),n=BigInt(n);function a(Q){var Ct=33751571,ar=(Ct>>Number(Q%32n))%2;return ar===1}function l(Q,Ct){if(typeof Q!="bigint"||typeof Ct!="bigint")throw new TypeError;return Q*Q+Ct*Ct}function u(Q,Ct,ar,en){if(typeof ar!="bigint"||typeof en!="bigint")throw new TypeError;var tn=ar*ar+en*en,on=Q*ar+Ct*en,cn=Ct*ar-Q*en;return on%tn===0n&&cn%tn===0n}var c=l(t,n);for(var p of QuadraticInteger._factors(c)){let Q=0n;for(var d=p;d>0n;){if(a(d)){const Ct=BigInt(nthRoot(BigInt(d),2));if(Ct*Ct===BigInt(d)&&l(Ct,Q)>1n&&u(t,n,Ct,Q))return Q===0n?new Expression.Complex(Expression.ZERO,Expression.Integer.fromBigInt(Ct)):new Expression.Complex(Expression.Integer.fromBigInt(Ct),Expression.Integer.fromBigInt(Q))}Q=Q+1n,d=p-Q*Q}}if(c>1n)throw new TypeError;return new Expression.Complex(Expression.Integer.fromBigInt(t),Expression.Integer.fromBigInt(n))};function jacobiSymbol(t,n){if(t<0||n%2==0)throw new Error("Invalid value. k = "+t+", n = "+n);t%=n;for(var a=1;t>0;){for(;t%2==0;){t/=2;var l=n%8;(l==3||l==5)&&(a=-a)}var u=n;n=t,t=u,t%4==3&&n%4==3&&(a=-a),t%=n}return n==1?a:0}function LegendreSymbol(t,n){return jacobiSymbol(t,n)}function quadraticIntegers(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const l=Number(BigInt(n))%4===1;for(;;){var u=BigInt(a)*a*n;const d=-t*(l?4n:1n)+u,Q=t*(l?4n:1n)+u;if(Number(Q)>Number.MAX_SAFE_INTEGER||Number(d)>Number.MAX_SAFE_INTEGER)throw new RangeError(t);var p=d;if(p>=0n){var c=BigInt(nthRoot(BigInt(p),2));if(p===c**2n)return new QuadraticInteger(c,a,n,l)}var p=Q;if(p>=0n){var c=BigInt(nthRoot(BigInt(p),2));if(p===c**2n)return new QuadraticInteger(c,a,n,l)}a=a+1n}}QuadraticInteger._fundamentalUnit=function(t){return quadraticIntegers(1n,t,1n)};QuadraticInteger.prototype.primeFactor=function(){var t=this.a,n=this.b,a=BigInt(this.D),u=ngcd(t,a),l=ngcd(t,n);if(l!==1n&&l!==-1n)return l!==a?Expression.Integer.fromBigInt(l).primeFactor():new QuadraticInteger(0n,1n,a);if(u===a)return new QuadraticInteger(0n,1n,a);var u=l,c=this.norm();if(c===1n||c===-1n){var p=QuadraticInteger._fundamentalUnit(a),d=p.conjugate(),Q=this;return BigInt(Q.b)*Q.a<1n?Q.a<0n?d.negate():d:p}for(var Ct=this,ar=QuadraticInteger._factors(abs$1(c)),en=ar.next().value;en!=null;en=ar.next().value){if(a%4n===1n&&en===2n||a===37n&&(en===7n||en===14n||en===3n||en===11n)||isPrime(en)&&a%en!==0n&&en!==2n&&LegendreSymbol(Number(a),Number(BigInt(en)))!==1)continue;var tn=quadraticIntegers(en,a,0n),Q=Ct.truncatingDivide(tn);if(Q!=null)return this.equals(tn)?tn:tn.primeFactor();const on=tn.conjugate();var Q=Ct.truncatingDivide(on);if(Q!=null)return this.equals(on)?on:on.primeFactor()}return this};QuadraticInteger.prototype.toString=function(){var t=this.a.toString()+"+"+this.b.toString()+"sqrt("+this.D+")";return this.overTwo&&(t="("+t+")/2"),t};QuadraticInteger.prototype.isUnit=function(){var t=this.norm();return t===1n||t===-1n};QuadraticInteger.prototype.equals=function(t){var n=this;if(!(t instanceof QuadraticInteger)){if(t.equals(Expression.ZERO))return n.a===0n&&n.b===0n;if(t.equals(Expression.ONE))return n.a===1n&&n.b===0n;throw new TypeError}return BigInt(n.a)===t.a&&BigInt(n.b)===t.b&&+n.D==+t.D&&!!n.overTwo==!!t.overTwo};QuadraticInteger.prototype.subtract=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;var a=BigInt(n.a),l=BigInt(n.b),u=BigInt(t.a),c=BigInt(t.b);return!!n.overTwo!=!!t.overTwo&&(n.overTwo&&(u*=2n,c*=2n),t.overTwo&&(a*=2n,l*=2n)),new QuadraticInteger(a-u,l-c,n.D,n.overTwo||t.overTwo)};QuadraticInteger.prototype.isDivisibleBy=function(t){return this.truncatingDivide(t)!=null};QuadraticInteger.prototype.isDivisibleByInteger=function(t){return t.truncatingDivide(this)!=null};QuadraticInteger.prototype.remainder=function(t){if(!(t instanceof QuadraticInteger)){if(t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.SquareRoot)return this.remainder(new QuadraticInteger(Expression.ZERO.toBigInt(),t.a.toBigInt(),t.b.a.toBigInt()));if(!(t instanceof Expression.Integer))throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;var a=n.multiply(t.conjugate()),l=t.norm();if(l===1n||l===-1n)return n.subtract(n);var u=(a.a-BigInt(a.a)%l)/l,c=(a.b-BigInt(a.b)%l)/l;const p=BigInt(n.a),d=BigInt(t.a);if(u===0n&&c===0n){if(p>d&&d>0n)return n.subtract(t.multiply(new QuadraticInteger((p-p%d)/d,0n,n.D)));if(p>-d&&d<0n)return n.subtract(t.multiply(new QuadraticInteger((p-p%-d)/-d,0n,n.D)));if(t.b===0n)return new QuadraticInteger(1n,0n,n.D)}var Q=new QuadraticInteger(u,c,n.D),Ct=n.subtract(t.multiply(Q));return Ct};QuadraticInteger.prototype.remainderInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).remainder(this)};QuadraticInteger.prototype.toExpression=function(){return Expression.Integer.fromBigInt(this.a).add(Expression.Integer.fromBigInt(this.b).multiply(Expression.Integer.fromNumber(this.D).squareRoot())).divide(this.overTwo?Expression.TWO:Expression.ONE)};QuadraticInteger.prototype.abs=function(){return this.a<=0n&&this.b<=0n||this.a<0n&&this.norm()>0n||this.b<0n&&this.norm()<0n?this.negate():this};QuadraticInteger.prototype.isValid=function(){return this.D,this.D,!(this.D===6||this.D%4===1||[2,3,5,6,7,11,13,17,19,21,29,33,37,41,57,73].indexOf(this.D)===-1)};QuadraticInteger.prototype.isPositive=function(){var t=this;return t.a>0n&&t.b>0n||t.a>0n&&t.norm()>0n||t.b>0n&&t.norm()<0n};function toQuadraticInteger(t){if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.SquareRoot&&t.a.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),Expression.ONE.toBigInt(),t.a.a.toBigInt());if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.Multiplication&&t.a.a instanceof Expression.Integer&&t.a.b instanceof Expression.SquareRoot&&t.a.b.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),t.a.a.toBigInt(),t.a.b.a.toBigInt());if(t instanceof Expression.Division&&t.getDenominator().equals(Expression.TWO)){var n=toQuadraticInteger(t.getNumerator());if(n!=null)return n.truncatingDivide(new QuadraticInteger(2,0,n.D))}}//!
QuadraticInteger.toQuadraticInteger=toQuadraticInteger;QuadraticInteger.gcd=function(t,n){for(var a=t,l=n;!l.equals(Expression.ZERO);){var u=a.remainder(l);if(!(BigInt(abs$1(u.norm()))<=BigInt(abs$1(l.norm()))))throw new TypeError("norm");a=l,l=u}return a};function isPrime(t){return BigInt(primeFactor(t))===BigInt(t)}globalThis.QuadraticInteger=QuadraticInteger;QuadraticInteger._checkFactorization=function t(n){typeof n=="string"&&(n=QuadraticInteger.toQuadraticInteger(RPN(n)));for(var a=[],l=n;Math.abs(Number(BigInt(l.norm())))>1;){var u=l.primeFactor();a.push(u),l=l.truncatingDivide(u)}(l.a.toString()!=="1"||l.b.toString()!=="0")&&a.unshift(l),console.log(n+"="+a.map(c=>"("+c.toString()+")").join(""))};const factory=function(t){const n=BigInt(t),a=Math.log2(t),l=1/Math.log2(t),u=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)),c=/^\s*([+\-])?(\d+)?\.?(\d+)?(?:e([+\-]?\d+))?\s*$/;function p(Mx,Dx){this.significand=Mx,this.exponent=Dx}p.BigFloat=p.BigDecimal=function(Mx){if(Mx instanceof p)return Mx;if(typeof Mx=="string"){if(t!==10)throw new Error;const Ox=c.exec(Mx);if(Ox==null)throw new RangeError(Mx);const Lx=Number(Ox[4]||"0");return d(BigInt((Ox[1]||"")+(Ox[2]||"")+(Ox[3]||"")),on(Math.abs(Lx)<Number.MAX_SAFE_INTEGER?Lx:BigInt(Ox[4]||"0"),(Ox[3]||"").length))}if(typeof Mx=="number"&&Math.floor(Mx)!==Mx&&t===2){const Ox=Sx(Mx),Nx=Mx/2**Ox*(Number.MAX_SAFE_INTEGER+1)/2,Gx=Ox-(u-1);return d(BigInt(Nx),Gx)}return d(BigInt(Mx),0)},p.toNumber=function(Mx){return Number(BigInt(p.toBigInt(Mx)))},p.toBigInt=function(Mx){const Dx=Mx.exponent,Ox=typeof Dx=="number"?Dx:Number(BigInt(Dx));if(Ox===0)return Mx.significand;if(Ox<0){const Lx=cx(Mx.significand,0-Ox);if(lx(Lx,0-Ox)!==BigInt(Mx.significand))throw new RangeError("The BigDecimal "+Mx.toString()+" cannot be converted to a BigInt because it is not an integer");return Lx}return lx(Mx.significand,Ox)};function d(Mx,Dx){return new p(Mx,Dx)}function Q(Mx){return Mx<0n?0n-Mx:Mx}function Ct(Mx){const Dx=Mx.toString(16),Ox=+Dx.charCodeAt(0)-48;if(Ox<=0)throw new RangeError;return(Dx.length-1)*4+(32-Math.clz32(Math.min(Ox,8)))}function ar(Mx){const Dx=Ct(Mx)-u,Ox=Number(Mx>>BigInt(Dx));return Math.log2(Ox)+Dx}function en(Mx){if(Mx=Q(Mx),t===2)return Ct(Mx);const Dx=Number(BigInt(Mx));if(Dx<(Number.MAX_SAFE_INTEGER+1)/16)return Math.floor(Math.log2(Dx+.5)*l)+1;const Ox=(Dx<1/0?Math.log2(Dx):ar(Mx))*l;if(Math.floor(Ox*(1-32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(Ox)&&Math.floor(Ox*(1+32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(Ox))return Math.floor(Ox)+1;const Lx=Math.floor(Ox+.5);return Mx>=BigInt(ax(Lx))?Lx+1:Lx}function tn(Mx,Dx){if(typeof Mx=="number"&&typeof Dx=="number"){const Nx=Mx+Dx;if(Math.abs(Nx)<=+Number.MAX_SAFE_INTEGER)return Nx}const Ox=BigInt(Mx)+BigInt(Dx),Lx=Number(Ox);return Math.abs(Lx)<=+Number.MAX_SAFE_INTEGER?Lx:Ox}function on(Mx,Dx){return tn(Mx,typeof Dx=="number"?0-Dx:-BigInt(Dx))}const cn=Math.ceil(.5*Math.log2(Number.MAX_SAFE_INTEGER+1)/Math.log2(t)-1),gn=BigInt(t**cn);function Cn(Mx,Dx){if(Dx==null||Dx.maximumSignificantDigits!=null){if(Mx.significand===0n)return Mx.exponent===0?Mx:d(0n,0);const Ox=Mx.significand;let Lx=cn,Nx=gn;if(Ox%Nx===0n){for(;Ox%(Nx*Nx)===0n;)Nx*=Nx,Lx*=2;const Gx=Ox/Nx;return d(Gx,tn(Mx.exponent,Lx))}}return Mx}function ex(Mx){let Dx={},Ox=0;return function(Lx){let Nx=Dx[Lx];return Nx==null&&(Ox>100&&(Dx={},Ox=0),Nx=Mx(Lx),Dx[Lx]=Nx,Ox+=1),Nx}}const ix=ex(function(Mx){return BigInt(Mx)}),ax=ex(function(Mx){return n**BigInt(Mx)});function ox(Mx,Dx){if(Dx!=null){let Ox=0;const Lx=BigInt(Mx.significand),Nx=Mx.exponent,Gx=Dx.maximumSignificantDigits;if(Gx!=null){if(!(Gx>0))throw new RangeError("maximumSignificantDigits should be positive");if(Lx===0n)return d(0n,0);Ox=en(Lx)-Gx}const Ux=Dx.maximumFractionDigits;if(Ux!=null){if(!(Ux>=0))throw new RangeError("maximumFractionDigits should be non-negative");Ox=0-tn(Nx,Ux)}if(Ox>0){const Hx=Dx.roundingMode;let Vx=0n;if(Hx==="floor")t===2?Vx=Lx>>ix(Ox):Lx>=0n?Vx=Lx/ax(Ox):Vx=(Lx+1n)/ax(Ox)-1n;else if(Hx==="down")t===2?Lx>=0n?Vx=Lx>>ix(Ox):Vx=-(-Lx>>ix(Ox)):Vx=Lx/ax(Ox);else if(Hx==="ceil")t===2?Vx=-(-Lx>>ix(Ox)):Lx<0n?Vx=Lx/ax(Ox):Vx=(Lx-1n)/ax(Ox)+1n;else if(Hx==="up")t===2?Lx>=0n?Vx=-(-Lx>>ix(Ox)):Vx=Lx>>ix(Ox):Lx>=0n?Vx=(Lx-1n)/ax(Ox)+1n:Vx=(Lx+1n)/ax(Ox)-1n;else{let zx=0n,rE=0n;if(t===2){const Zx=ix(Ox);zx=1n<<Zx,Lx>=0n?Vx=Lx>>Zx:Vx=-(-Lx>>Zx),rE=(Lx-(Vx<<Zx))*2n}else zx=ax(Ox),Vx=Lx/zx,rE=(Lx-zx*Vx)*2n;if(rE!==0n){if(Hx==="half-up")rE+=rE<0n?-1n:1n;else if(Hx==="half-down")rE+=0n;else if(Hx==="half-even")rE+=Vx%2n;else throw new RangeError("supported roundingMode (floor/ceil/up/down/half-even/half-up/half-down) is not given");rE>zx&&(Vx+=1n),-rE>zx&&(Vx-=1n)}}return d(Vx,tn(Nx,Ox))}}return Mx}p.unaryMinus=function(Mx){return d(-BigInt(Mx.significand),Mx.exponent)},p.add=function(Mx,Dx,Ox=null){const Lx=BigInt(Mx.significand),Nx=BigInt(Dx.significand),Gx=Mx.exponent,Ux=Dx.exponent,Hx=on(Gx,Ux),Vx=typeof Hx=="number"?Hx:Number(BigInt(Hx));if(Vx!==0){if(Lx===0n)return ox(Dx,Ox);if(Nx===0n)return ox(Mx,Ox);const zx=Ox!=null?Ox.maximumSignificantDigits+1:0;if(Vx>0)return zx!==0&&Vx>en(Nx)+zx?ox(d(lx(Lx,zx)+(Nx<0n?-1n:1n),on(Gx,zx)),Ox):ox(d(lx(Lx,Vx)+Nx,Ux),Ox);if(Vx<0)return zx!==0&&0-Vx>en(Lx)+zx?ox(d((Lx<0n?-1n:1n)+lx(Nx,zx),on(Ux,zx)),Ox):ox(d(Lx+lx(Nx,0-Vx),Gx),Ox)}return ox(d(Lx+Nx,Gx),Ox)},p.subtract=function(Mx,Dx,Ox=null){return p.add(Mx,p.unaryMinus(Dx),Ox)},p.multiply=function(Mx,Dx,Ox=null){return Cn(ox(d(BigInt(Mx.significand)*BigInt(Dx.significand),tn(Mx.exponent,Dx.exponent)),Ox),Ox)};function lx(Mx,Dx){if(typeof Mx!="bigint")throw new TypeError;return t===2?Mx<<ix(Dx):ax(Dx)*Mx}function cx(Mx,Dx){if(typeof Mx!="bigint")throw new TypeError;return t===2?Mx>>ix(Dx):Mx/ax(Dx)}p.divide=function(Mx,Dx,Ox=null){if(Mx.significand===0n)return Mx;const Lx=on(Mx.exponent,Dx.exponent);let Nx=0;Ox!=null&&Ox.maximumSignificantDigits!=null?Nx=Ox.maximumSignificantDigits+(en(Dx.significand)-en(Mx.significand)):Ox!=null&&Ox.maximumFractionDigits!=null?Nx=tn(Ox.maximumFractionDigits,Lx):Nx=Math.ceil(en(Dx.significand)*a)+1;let Gx=BigInt(Nx>0?lx(Mx.significand,Nx):Mx.significand),Ux=BigInt(Nx<0?lx(Dx.significand,0-Nx):Dx.significand);Ux<0n&&(Gx=-Gx,Ux=-Ux);let Hx=0n;if(Ox!=null&&Ox.roundingMode==="floor")Gx>=0n?Hx=Gx/Ux:Hx=(Gx+1n)/Ux-1n;else if(Ox!=null&&Ox.roundingMode==="ceil")Gx<=0n?Hx=Gx/Ux:Hx=(Gx-1n)/Ux+1n;else{Gx<0n?Hx=(Gx+1n)/Ux-1n:Hx=Gx/Ux;const Vx=Gx-Ux*Hx;if(console.assert(Vx>=0n),Vx!==0n){if(Ox==null)throw new RangeError("rounding is not given for inexact operation");Hx*=n**2n,Nx=tn(Nx,2),Vx*2n<Ux?Hx+=1n:Vx*2n===Ux?Hx+=n**2n/2n:Hx+=n**2n/2n+1n}}return ox(d(Hx,on(Lx,Nx)),Ox)};function dx(Mx,Dx){const Ox=BigInt(Mx.significand),Lx=BigInt(Dx.significand),Nx=Mx.exponent,Gx=Dx.exponent,Ux=on(Nx,Gx),Hx=typeof Ux=="number"?+Ux:Number(BigInt(Ux));if(Hx===0)return Ox<Lx?-1:Ox>Lx?1:0;if(Ox<=0n&&Lx>=0n)return Ox===0n&&Lx===0n?0:-1;if(Ox>=0n&&Lx<=0n)return Ox===0n&&Lx===0n?0:1;if(t!==2||Hx>=9007199254740992||Hx<=-9007199254740992){const rE=tn(Ux,en(Ox)-en(Lx)),Zx=typeof rE=="number"?rE:Number(BigInt(rE));if(Zx!==0)return Ox<0n&&Lx<0n?Zx>0?-1:1:Zx<0?-1:1}else{const rE=Hx>=0?Ox:Ox>>ix(0-Hx),Zx=Hx<=0?Lx:Lx>>ix(Hx);if(rE<Zx)return-1;if(Zx<rE)return 1}const Vx=Hx<=0?Ox:lx(Ox,Hx),zx=Hx>=0?Lx:lx(Lx,0-Hx);return Vx<zx?-1:Vx>zx?1:0}p.lessThan=function(Mx,Dx){return dx(Mx,Dx)<0},p.greaterThan=function(Mx,Dx){return dx(Mx,Dx)>0},p.equal=function(Mx,Dx){return dx(Mx,Dx)===0},p.round=function(Mx,Dx){return ox(Mx,Dx)},p.prototype.toString=function(){//! https://tc39.es/ecma262/#sec-number.prototype.tostring
if(t!==10)throw new Error;if(arguments.length!==0)throw new RangeError("not implemented");const Mx=p.BigDecimal(this);let Dx=Mx.significand.toString();//! https://tc39.es/ecma262/#sec-numeric-types-number-tostring
if(Dx==="0")return"0";let Ox="";Dx.charCodeAt(0)===45&&(Dx=Dx.slice(1),Ox="-");const Lx=tn(Mx.exponent,Dx.length-1),Nx=typeof Lx=="number"?Lx:Number(BigInt(Lx));return Nx>-7&&Nx<21?Ox+hx(Dx,Nx+1-Dx.length,0,0):Ox+hx(Dx,-(Dx.length-1),0,0)+"e"+(Nx>=0?"+":"")+Lx.toString()};function hx(Mx,Dx,Ox,Lx){let Nx=Mx.length-1+Dx;Nx<=-1&&(Mx=String("0".repeat(0-Nx))+Mx,Lx+=0-Nx,Nx=0);let Gx=Mx.length-(Nx+1),Ux=Mx.length;for(;Gx>Ox&&Ux>=Lx&&Ux>=1&&0+Mx.charCodeAt(Ux-1)===48;)Ux-=1,Gx-=1;Ux<Mx.length&&(Mx=Mx.slice(0,Ux));const Hx=Math.max(Math.max(0,Ox-Gx),Math.max(0,Lx-Mx.length));return Hx!==0&&(Mx+=String("0".repeat(Hx))),Mx.length>Nx+1?Mx.slice(0,Nx+1)+"."+Mx.slice(Nx+1):Mx}function fx(Mx,Dx,Ox){const Lx=tn(Dx,Mx.length-1),Nx=typeof Lx=="number"?Lx:Number(BigInt(Lx));return Nx<-6||Nx>=+Ox?hx(Mx,-(Mx.length-1),0,Ox)+"e"+(Nx<0?"":"+")+Lx.toString():hx(Mx,typeof Dx=="number"?Dx:Number(BigInt(Dx)),0,Ox)}function ux(Mx,Dx,Ox){return hx(Mx,Dx,Ox,0)}function gx(Mx,Dx,Ox){const Lx=tn(Dx,Mx.length-1),Nx=typeof Lx=="number"?Lx:Number(BigInt(Lx));return hx(Mx,-(Mx.length-1),0,Ox+1)+"e"+(Nx<0?"":"+")+Lx.toString()}p.prototype.toFixed=function(Mx,Dx="half-up"){if(Math.floor(Mx)!==Mx)throw new RangeError;const Ox=t===10?d(this.significand,tn(this.exponent,Mx)):p.multiply(p.BigDecimal(10n**BigInt(Mx)),this),Lx=Ox.significand<0n?"-":"",Nx=p.round(Ox,{maximumFractionDigits:0,roundingMode:Dx}),Gx=p.abs(Nx);return Lx+ux(p.toBigInt(Gx).toString(),0-Mx,Mx)};function yx(Mx,Dx,Ox){if(t===10){const eE=p.round(p.abs(Mx),{maximumSignificantDigits:Dx,roundingMode:Ox});return{significand:eE.significand.toString(),exponent:BigInt(eE.exponent)}}const Lx=function(eE,oE,iE){if(oE<0n)return p.divide(p.BigDecimal(1),Lx(eE,-BigInt(oE),iE),iE);let Wx;for(;oE>=1n;)oE%2n===0n?(eE=p.multiply(eE,eE,iE),oE/=2n):(Wx=Wx==null?eE:p.multiply(eE,Wx,iE),oE-=1n);return Wx??p.BigDecimal(1)},Nx=function(eE,oE,iE){if(!p.greaterThan(eE,p.BigDecimal(0)))throw new RangeError;if(p.lessThan(eE,p.BigDecimal(1)))return 0n-Nx(p.divide(p.BigDecimal(1),eE,iE),oE,iE);const Wx=bx(eE),AE=BigInt(Math.max(0,Ct(Wx)-u)),ME=BigInt(Math.floor(Number(Wx>>AE)/Math.log2(oE)*a))<<AE;return ME<3n?ME:ME+Nx(p.divide(eE,Lx(p.BigDecimal(oE),ME,iE),iE),oE,iE)},Gx=Mx.significand<0n?-1:1,Ux=function(eE){return p.round(Gx>=0?eE:p.unaryMinus(eE),{maximumFractionDigits:0,roundingMode:Ox})};if(p.equal(Mx,p.BigDecimal(0)))return{significand:"0",exponent:0n};const Hx=p.BigDecimal(10),Vx=Math.pow(2,Math.ceil(Math.log2(Ct(Q(BigInt(Mx.exponent))+1n)*l)));let zx={maximumSignificantDigits:Math.max(Vx,t===2?32:8),roundingMode:"half-even"},rE,Zx=0n;do{let eE=p.abs(Mx);if(Zx=0n-Nx(eE,10,zx),eE=p.multiply(Lx(Hx,Zx,zx),eE,zx),p.lessThan(eE,Hx)||(Zx-=1n,eE=p.divide(eE,Hx,zx)),p.lessThan(eE,p.BigDecimal(1))&&(Zx+=1n,eE=p.multiply(eE,Hx,zx)),!p.lessThan(eE,p.BigDecimal(1))&&p.lessThan(eE,Hx))if(Zx+=BigInt(Dx-1),zx.maximumSignificantDigits>(Math.abs(Number(Zx))+Dx)*Math.log2(10)+en(Mx.significand))eE=p.abs(Mx),eE=p.multiply(eE,Lx(Hx,Zx,zx),zx),rE=p.toBigInt(p.abs(Ux(eE))).toString();else{eE=p.multiply(eE,Lx(Hx,BigInt(Dx-1),zx),zx),eE=p.abs(eE);const oE=p.multiply(p.multiply(p.BigDecimal(Q(Zx)+BigInt(Dx)),vx(t,0-zx.maximumSignificantDigits)),eE);p.equal(Ux(p.add(eE,oE)),Ux(p.subtract(eE,oE)))&&(rE=p.toBigInt(p.abs(Ux(eE))).toString())}zx={maximumSignificantDigits:zx.maximumSignificantDigits*2,roundingMode:"half-even"}}while(rE==null);return{significand:rE,exponent:-Zx}}p.prototype.toPrecision=function(Mx,Dx="half-up"){const Ox=yx(this,Mx,Dx);return(p.lessThan(this,p.BigDecimal(0))?"-":"")+fx(Ox.significand,Ox.exponent,Mx)},p.prototype.toExponential=function(Mx,Dx="half-up"){const Ox=yx(this,Mx+1,Dx);return(p.lessThan(this,p.BigDecimal(0))?"-":"")+gx(Ox.significand,Ox.exponent,Mx)};function _x(Mx,Dx){if(+Mx!==t)throw new RangeError("a should be BASE");return d(1n,Dx)}function vx(Mx,Dx){return _x(Mx,Dx)}function bx(Mx){if(Mx.significand===0n)throw new RangeError;return BigInt(en(Mx.significand))+BigInt(Mx.exponent)}p.abs=function(Mx){return Mx.significand<0n?p.unaryMinus(Mx):Mx},p.sign=function(Mx){return Mx.significand<0n?-1:Mx.significand>0n?1:0},p.max=function(Mx,Dx){if(arguments.length>2)throw new RangeError("not implemented");return p.lessThan(Mx,Dx)?Dx:Mx},p.min=function(Mx,Dx){if(arguments.length>2)throw new RangeError("not implemented");return p.greaterThan(Mx,Dx)?Dx:Mx};function xx(Mx){let Dx=1;for(;!p.equal(p.round(Mx,{maximumSignificantDigits:Dx,roundingMode:"half-even"}),Mx);)Dx*=2;let Ox=Dx/2,Lx=Dx;for(;Lx-1>Ox;){const Nx=Ox+Math.floor((Lx-Ox)/2);p.equal(p.round(Mx,{maximumSignificantDigits:Nx,roundingMode:"half-even"}),Mx)?Lx=Nx:Ox=Nx}return Lx}function Sx(Mx){const Dx=Math.floor(Math.log(Math.abs(Mx))/Math.log(2))-1;return Math.abs(Mx)/2**Dx>=2?Dx+1:Dx}function Ax(Mx,Dx,Ox){function Lx(Nx){return Ox==="exp"?Math.ceil(Number(BigInt(p.toBigInt(p.round(Nx,{maximumFractionDigits:0,roundingMode:"half-even"}))))/Math.log(t)):Ox==="log"?Math.ceil(Math.log2(Math.ceil(Math.max(Number(bx(Nx)),1)*Math.log(t)))*l):1}return function(Nx,Gx){if(p.equal(Nx,p.BigDecimal(Mx)))return Dx(Nx,{maximumSignificantDigits:1,roundingMode:"half-even"});let Ux=p.BigDecimal(0),Hx=0,Vx=p.BigDecimal(0);do{if(Hx>4*(10/t)&&Gx.maximumSignificantDigits!=null&&Gx.roundingMode==="half-even"&&Ox!=="sin"&&Ox!=="cos")throw console.error(Nx,Gx),new Error;Hx+=1;const zx={maximumSignificantDigits:Math.ceil(Math.max(Gx.maximumSignificantDigits||Gx.maximumFractionDigits+1+Lx(Nx)-1,xx(Nx))*Math.pow(2,Math.ceil((Hx-1)/3)))+2+(t===2?1:0),roundingMode:"half-even"};if(Ux=void 0,t===2&&Math.max(zx.maximumSignificantDigits+2,xx(Nx)+1)<=Math.log2(Number.MAX_SAFE_INTEGER+1)){const rE=Nx.exponent,Zx=typeof rE=="number"?rE:Number(BigInt(rE)),eE=Number(BigInt(Nx.significand))*t**Zx;if(Ox!=="sin"&&Ox!=="cos"&&Ox!=="tan"||Math.abs(eE)<=Math.PI/4){const oE=Math[Ox](eE),iE=(Number.MIN_VALUE*1.25>Number.MIN_VALUE?Number.MIN_VALUE:Number.MIN_VALUE*(Number.MAX_SAFE_INTEGER+1)/2)||2**-1022,Wx=Math.abs(oE);Wx<1/0&&Wx>iE&&(Ux=p.BigDecimal(oE))}}Ux==null&&(Ux=Dx(Nx,zx)),Vx=p.multiply(_x(t,-BigInt(zx.maximumSignificantDigits)),p.abs(Ux))}while(!p.equal(p.round(p.subtract(Ux,Vx),Gx),p.round(p.add(Ux,Vx),Gx)));return p.round(Ux,Gx)}}function Cx(Mx,Dx){let Ox=p.add(Mx,p.BigDecimal(1)),Lx=Mx;for(;p.lessThan(Lx,Ox);)Ox=Lx,Lx=p.divide(p.add(p.divide(Mx,Lx,Dx),Lx),p.BigDecimal(2),Dx);return Lx}p.log=Ax(1,function(Dx,Ox){if(!p.greaterThan(Dx,p.BigDecimal(0)))throw new RangeError;const Lx={maximumSignificantDigits:Ox.maximumSignificantDigits+Math.ceil(Math.log2(Ox.maximumSignificantDigits+.5)*l),roundingMode:"half-even"};{//! ln(f * BASE**k) = ln(f) + k * ln(BASE), where (1/BASE) <= f <= BASE
let rE=bx(Dx)-1n,Zx=p.multiply(_x(t,-rE),Dx),eE=p.round(p.multiply(Zx,Zx),{maximumSignificantDigits:3,roundingMode:"half-even"});if(p.greaterThan(eE,_x(t,1n))&&(rE+=1n,Zx=p.multiply(_x(t,-1n),Zx)),p.lessThan(eE,_x(t,-1n))&&(rE-=1n,Zx=p.multiply(_x(t,1n),Zx)),rE!==0n)return p.add(p.log(Zx,Lx),p.multiply(p.BigDecimal(2n*rE),p.log(Cx(p.BigDecimal(t),Lx),Lx)))}//! log(x) = log((1 + g) / (1 - g)) = 2*(g + g**3/3 + g**5/5 + ...)
const Nx=p.divide(p.subtract(Dx,p.BigDecimal(1)),p.add(Dx,p.BigDecimal(1)),Lx);let Gx=1,Ux=p.BigDecimal(1),Hx=Ux,Vx=p.BigDecimal(0);const zx=p.multiply(Nx,Nx,Lx);for(;!p.equal(Vx,Hx);)Gx+=2,Ux=p.multiply(Ux,p.BigDecimal(Gx-2)),Ux=p.multiply(Ux,zx),Ux=p.divide(Ux,p.BigDecimal(Gx),Lx),Vx=Hx,Hx=p.add(Hx,Ux,Lx);return p.multiply(p.multiply(p.BigDecimal(2),Nx),Hx)},"log");function Tx(Mx){return p.divide(p.BigDecimal(Math.floor(Mx*(Number.MAX_SAFE_INTEGER+1))),p.add(p.BigDecimal(Number.MAX_SAFE_INTEGER),p.BigDecimal(1)),{maximumSignificantDigits:Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*l+.5),roundingMode:"half-even"})}p.exp=Ax(0,function(Dx,Ox){//! k = round(x / ln(BASE));
//! exp(x) = exp(x - k * ln(BASE) + k * ln(BASE)) = exp(x - k * ln(BASE)) * BASE**k
const Lx={maximumSignificantDigits:Ox.maximumSignificantDigits+Math.ceil(Math.log2(Ox.maximumSignificantDigits+.5)*l),roundingMode:"half-even"};if(!p.equal(Dx,p.BigDecimal(0))){const Vx=Tx(Math.log(t)),zx=p.round(p.divide(Dx,Vx,{maximumSignificantDigits:Math.max(Number(bx(Dx)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!p.equal(zx,p.BigDecimal(0))){const rE=p.log(p.BigDecimal(t),{maximumSignificantDigits:Lx.maximumSignificantDigits+Number(bx(zx)),roundingMode:"half-even"}),Zx=p.round(p.divide(Dx,rE,{maximumSignificantDigits:Math.max(Number(bx(Dx)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!p.equal(Zx,p.BigDecimal(0))){const eE=p.subtract(Dx,p.multiply(Zx,rE));return p.multiply(_x(t,p.toBigInt(Zx)),p.exp(eE,Lx))}}}let Nx=0,Gx=p.BigDecimal(1),Ux=Gx,Hx=p.BigDecimal(0);for(;!p.equal(Hx,Ux);)Nx+=1,Gx=p.multiply(Gx,Dx),Gx=p.divide(Gx,p.BigDecimal(Nx),Lx),Hx=Ux,Ux=p.add(Ux,Gx,Lx);return Ux},"exp");function Px(Mx,Dx){const Ox=Tx(Math.PI/4);if(p.greaterThan(p.abs(Mx),Ox)){const Lx={maximumSignificantDigits:Dx.maximumSignificantDigits+xx(Mx)+Number(bx(Mx))+1+Math.ceil(42*l),roundingMode:"half-even"},Nx=p.multiply(p.BigDecimal(2),p.atan(p.BigDecimal(1),Lx)),Gx=p.round(p.divide(Mx,Nx,{maximumSignificantDigits:Math.max(Number(bx(Mx)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});return{remainder:p.subtract(Mx,p.multiply(Gx,Nx)),k:(Number(p.toBigInt(Gx)%4n)+4)%4}}return{remainder:Mx,k:0}}function Fx(Mx,Dx,Ox){const Lx=Px(Mx,Dx),Nx=Lx.remainder,Gx=(Lx.k+(Ox?3:0))%4,Ux={maximumSignificantDigits:Dx.maximumSignificantDigits+Math.ceil(Math.log2(Dx.maximumSignificantDigits+.5)*l),roundingMode:"half-even"};let Hx=Gx===1||Gx===3?1:0,Vx=p.BigDecimal(1),zx=Vx,rE=p.BigDecimal(0);const Zx=p.multiply(Nx,Nx);for(;!p.equal(rE,zx);)Hx+=2,Vx=p.multiply(Vx,Zx),Vx=p.divide(Vx,p.BigDecimal(-Hx*(Hx-1)),Ux),rE=zx,zx=p.add(zx,Vx,Ux);return(Gx===1||Gx===2)&&(zx=p.unaryMinus(zx)),Gx===1||Gx===3?p.multiply(Nx,zx):zx}return p.sin=Ax(0,function(Mx,Dx){return Fx(Mx,Dx,!0)},"sin"),p.cos=Ax(0,function(Mx,Dx){return Fx(Mx,Dx,!1)},"cos"),p.atan=Ax(0,function(Mx,Dx){if(p.greaterThan(p.abs(Mx),p.BigDecimal(1))){const zx={maximumFractionDigits:Dx.maximumSignificantDigits+1,roundingMode:"half-even"},rE=p.multiply(p.atan(p.BigDecimal(1),zx),p.BigDecimal(2));return p.multiply(p.BigDecimal(p.lessThan(Mx,p.BigDecimal(0))?-1:1),p.subtract(rE,p.atan(p.divide(p.BigDecimal(1),p.abs(Mx),zx),zx)))}const Ox={maximumSignificantDigits:Dx.maximumSignificantDigits+Math.ceil(Math.log2(Dx.maximumSignificantDigits+.5)*l),roundingMode:"half-even"};let Lx=0;const Nx=p.multiply(Mx,Mx),Gx=p.add(p.BigDecimal(1),Nx);let Ux=p.divide(p.BigDecimal(1),Gx,Ox),Hx=Ux,Vx=p.BigDecimal(0);for(;!p.equal(Vx,Hx);)Lx+=1,Ux=p.multiply(Ux,p.multiply(p.BigDecimal(2*Lx),Nx)),Ux=p.divide(Ux,p.multiply(p.BigDecimal(2*Lx+1),Gx),Ox),Vx=Hx,Hx=p.add(Hx,Ux,Ox);return p.multiply(Mx,Hx)},"atan"),p.sqrt=function(Mx,Dx){if(p.lessThan(Mx,p.BigDecimal(0)))throw new RangeError;if(p.equal(Mx,p.BigDecimal(0)))return Mx;const Ox=bx(Mx)/2n,Lx=_x(t,Ox),Nx=p.multiply(Mx,_x(t,-(2n*Ox))),Gx=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*l)-1,Ux=p.toNumber(p.round(p.multiply(Nx,_x(t,Gx)),{maximumFractionDigits:0,roundingMode:"half-even"}))/t**Gx,Hx=Math.sqrt(Ux),Vx=2*(Dx.maximumSignificantDigits||Dx.maximumFractionDigits+Math.ceil(xx(Mx)/2)||1);let zx=p.multiply(p.BigDecimal(Math.sign(Hx)*Math.floor(Math.abs(Hx)*t**Gx+.5)),_x(t,-Gx));const rE=function(Zx,eE){return p.divide(p.add(Nx,p.multiply(Zx,Zx)),p.multiply(p.BigDecimal(2),Zx),eE)};for(let Zx=Math.max(Gx-1,1);Zx<=Vx;Zx*=2)zx=rE(zx,{maximumSignificantDigits:Zx,roundingMode:"half-even"});return zx=rE(zx,Dx),p.multiply(zx,Lx)},p},BigDecimal=factory(10),BigFloat=factory(2),BASE=2;function MakeMath(t,n){function a(){}a.nextAfter=function(u,c){if(c==null)throw new RangeError;if(c.roundingMode!=="floor"&&c.roundingMode!=="ceil")throw new RangeError;var p=t.round(u,c);if(!t.equal(u,p))return p;var d=function(Q,Ct,ar,en){var tn=t.multiply(t.BigDecimal(en.roundingMode==="floor"?-1:1),l(-Ct)),on=t.multiply(t.abs(ar),tn);return t.add(Q,on,en)};if(c.maximumFractionDigits!=null)return d(u,c.maximumFractionDigits,t.BigDecimal(1),c);if(c.maximumSignificantDigits!=null)return d(u,c.maximumSignificantDigits,u,c);throw new RangeError};var l=function(u){var c=t.round(t.BigDecimal(n),{maximumSignificantDigits:1,roundingMode:"half-even"}),p=c;if(u<0)return t.divide(t.BigDecimal(1),l(-u),null);for(var d=t.BigDecimal(1);u>=1;)u%2===0?(p=t.multiply(p,p),u=u/2):(d=d==null?p:t.multiply(p,d),u=u-1);return d};return a}const BigDecimalMath=MakeMath(BigDecimal,10),BigFloatMath=MakeMath(BigFloat,2);function Interval(t,n){if(BigFloat.greaterThan(t,n))throw new TypeError;this.a=t,this.b=n}Interval._rounding=function(t,n){return t==null?null:t.maximumFractionDigits!=null?{maximumFractionDigits:t.maximumFractionDigits,roundingMode:n}:{maximumSignificantDigits:t.maximumSignificantDigits,roundingMode:n}};Interval.unaryMinus=function(t){return new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a))};Interval.add=function(t,n,a=null){return new Interval(BigFloat.add(t.a,n.a,Interval._rounding(a,"floor")),BigFloat.add(t.b,n.b,Interval._rounding(a,"ceil")))};Interval.subtract=function(t,n,a=null){return new Interval(BigFloat.subtract(t.a,n.b,Interval._rounding(a,"floor")),BigFloat.subtract(t.b,n.a,Interval._rounding(a,"ceil")))};Interval._multiply=function(t,n,a,l,u){const c=BigFloat.sign,p=c(t),d=c(n),Q=c(a),Ct=c(l);if(p>=0)return Q>=0?u(t,a,n,l):Ct<=0?u(n,a,t,l):u(n,a,n,l);if(d<=0)return Ct<=0?u(n,l,t,a):Q>=0?u(t,l,n,a):u(t,l,t,a);if(Q>=0)return u(t,l,n,l);if(Ct<=0)return u(n,a,t,a);var ar=u(t,l,t,a),en=u(n,a,n,l);return new Interval(BigFloat.min(ar.a,en.a),BigFloat.max(ar.b,en.b))};Interval.multiply=function(t,n,a=null){var l=Interval._rounding(a,"floor"),u=Interval._rounding(a,"ceil");if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var c=BigFloat.multiply(t.a,n.a);return new Interval(BigFloat.round(c,l),BigFloat.round(c,u))}var p=function(d,Q,Ct,ar){return new Interval(BigFloat.multiply(d,Q,l),BigFloat.multiply(Ct,ar,u))};return Interval._multiply(t.a,t.b,n.a,n.b,p)};Interval.divide=function(t,n,a){var l=Interval._rounding(a,"floor"),u=Interval._rounding(a,"ceil");if(BigFloat.sign(n.a)<=0&&BigFloat.sign(n.b)>=0){if(BigFloat.equal(n.a,n.b))throw new RangeError;return"CANNOT_DIVIDE"}if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var c=BigFloat.divide(t.a,n.a,l),p=BigFloat.subtract(t.a,BigFloat.multiply(n.a,c));return new Interval(c,BigFloat.equal(p,BigFloat.BigFloat(0))?c:BigFloatMath.nextAfter(c,u))}var d=function(Q,Ct,ar,en){return new Interval(BigFloat.divide(Q,en,l),BigFloat.divide(ar,Ct,u))};return Interval._multiply(t.a,t.b,n.a,n.b,d)};Interval.sqrt=function(t,n){if(BigFloat.sign(t.a)<0&&BigFloat.sign(t.b)>=0)return"CANNOT_DIVIDE";if(BigFloat.equal(t.a,t.b)){var a=BigFloat.sqrt(t.a,Interval._rounding(n,"floor")),l=BigFloat.equal(BigFloat.multiply(a,a),t.b)?a:BigFloatMath.nextAfter(a,Interval._rounding(n,"ceil"));return new Interval(a,l)}return Interval._map(t,function(u,c){return BigFloat.sqrt(u,c)},n)};Interval.exp=function(t,n){return Interval._map(t,BigFloat.exp,n)};Interval.log=function(t,n){return BigFloat.sign(t.a)<=0&&BigFloat.sign(t.b)>0?"CANNOT_DIVIDE":BigFloat.equal(t.a,t.b)&&BigFloat.equal(t.b,BigFloat.BigFloat(1))?new Interval(BigFloat.BigFloat(0),BigFloat.BigFloat(0)):Interval._map(t,BigFloat.log,n)};Interval.atan=function(t,n){return Interval._map(t,BigFloat.atan,n)};Interval._mapValue=function(t,n,a){var l=n(t,Interval._rounding(a,"floor")),u=l,c=l;return BigFloat.equal(t,BigFloat.BigFloat(0))||(c=BigFloatMath.nextAfter(l,Interval._rounding(a,"ceil"))),new Interval(u,c)};Interval._map=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n,a);var l=n(t.a,Interval._rounding(a,"floor")),u=n(t.b,Interval._rounding(a,"ceil"));return new Interval(l,u)};Interval._trigonometry=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n==="sin"?BigFloat.sin:BigFloat.cos,a);var l=Object.assign({},Interval._rounding(a,"floor"),{roundingMode:"half-even"}),u=BigFloat.multiply(BigFloat.BigFloat(8),BigFloat.atan(BigFloat.BigFloat(1),l));if(!BigFloat.lessThan(BigFloat.subtract(t.b,t.a),u))return new Interval(BigFloat.BigFloat(-1),BigFloat.BigFloat(1));var c=function(cn,gn){return n==="sin"?BigFloat.sin(cn,gn):BigFloat.cos(cn,gn)},p=BigFloat.divide(BigFloat.add(t.a,t.b),BigFloat.BigFloat(2),l),d=function(cn){var gn=BigFloat.multiply(BigFloat.divide(BigFloat.BigFloat(cn),BigFloat.BigFloat(4),l),u),Cn=BigFloat.round(BigFloat.divide(BigFloat.subtract(p,gn,l),u,l),{maximumFractionDigits:0,roundingMode:"half-even"});return BigFloat.add(BigFloat.multiply(u,Cn),gn)},Q=d(n==="sin"?3:2),Ct=d(n==="sin"?1:0);const ar=Interval._rounding(a,"floor"),en=Interval._rounding(a,"ceil");var tn=BigFloat.lessThan(Q,t.a)?c(t.a,ar):BigFloat.greaterThan(Q,t.b)?c(t.b,ar):BigFloat.BigFloat(-1),on=BigFloat.lessThan(Ct,t.a)?c(t.a,en):BigFloat.greaterThan(Ct,t.b)?c(t.b,en):BigFloat.BigFloat(1);return new Interval(tn,on)};Interval.sin=function(t,n){return Interval._trigonometry(t,"sin",n)};Interval.cos=function(t,n){return Interval._trigonometry(t,"cos",n)};Interval.fromIntegers=function(t,n){var a=BigFloat.BigFloat(t),l=BigFloat.BigFloat(n);return console.assert(!BigFloat.lessThan(l,a)),new Interval(a,l)};Interval.abs=function(t){return BigFloat.lessThan(t.a,BigFloat.BigFloat(0))?BigFloat.lessThan(t.b,BigFloat.BigFloat(0))?new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a)):new Interval(BigFloat.BigFloat(0),BigFloat.max(BigFloat.unaryMinus(t.a),t.b)):t};Interval.exponentiate=function(t,n,a){for(var l=void 0;n>=1;)n===2*Math.floor(n/2)?(t=Interval.multiply(t,t,a),n=Math.floor(n/2)):(l=l==null?t:Interval.multiply(t,l,a),n-=1);return l};Interval.formatToDecimal=function(t,n){var a=BigFloat.sign(t.a),l=BigFloat.sign(t.b),u=(a||l)===(l||a)?a||l:0;t=Interval.abs(t);var c=function(Ct,ar){return n.fractionDigits!=null?Ct.toFixed(n.fractionDigits,ar):Ct.toPrecision(n.significantDigits,ar)},p=c(t.a,"half-up"),d=BigFloat.equal(t.a,t.b)?p:c(t.b,"half-down"),Q=function(Ct){return!/[^0\.]/.test(Ct)};if(p===d&&(u!==0||Q(p)&&Q(d)))return(u<0?"-":u>0&&Q(p)&&Q(d)?"+":"")+p};Interval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};var calcAt=function(t,n,a){for(var l=evaluateExpression(Expression.ZERO,a),u=t.getDegree();u>=0;u--){l=Interval.multiply(l,n,a);var c=evaluateExpression(t.getCoefficient(u),a);if(c==="CANNOT_DIVIDE"||c==null)return c;l=Interval.add(l,c,a)}return l},evaluateExpression=function(t,n){if(t instanceof Expression.Integer){var a=t.value;return Interval.fromIntegers(a,a)}else if(t instanceof Expression.NthRoot){var l=t.a,a=t.n,u=evaluateExpression(l,n);return u==="CANNOT_DIVIDE"||u==null?u:a==2?Interval.sqrt(u,n):Interval.exp(Interval.divide(Interval.log(u,n),Interval.fromIntegers(a,a),n),n)}else if(t instanceof Expression.BinaryOperation){if(t instanceof Expression.Addition&&Expression.has(t,Expression.PolynomialRootSymbol)){var c=Expression.getVariable(t),p=Polynomial.toPolynomial(t,c);if(p.hasIntegerCoefficients()){var d=evaluateExpression(c,n);return calcAt(p,d,n)}}if(t.a===Expression.E&&t.getS()==="^"){var Q=evaluateExpression(t.b,n);return Q==="CANNOT_DIVIDE"||Q==null?Q:Interval.exp(Q,n)}var l=evaluateExpression(t.a,n);if(l==="CANNOT_DIVIDE"||l==null)return l;var Q=evaluateExpression(t.b,n);if(Q==="CANNOT_DIVIDE"||Q==null)return Q;var Ct=t.getS();if(Ct==="+")return Interval.add(l,Q,n);if(Ct==="-")return Interval.subtract(l,Q,n);if(Ct==="*")return Interval.multiply(l,Q,n);if(Ct==="/")return Interval.divide(l,Q,n);if(Ct==="^"){if(!(t.b instanceof Expression.Integer)||t.b.toNumber()<=0||t.b.toNumber()>Number.MAX_SAFE_INTEGER){var ar=Interval.log(l,n);return ar==="CANNOT_DIVIDE"?ar:Interval.exp(Interval.multiply(ar,Q,n),n)}var a=t.b.toNumber();return Interval.exponentiate(l,a,n)}}else if(t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot){var en=(t instanceof Expression.ExpressionPolynomialRoot?t.root:t).toDecimal(n.maximumSignificantDigits||n.maximumFractionDigits);const on=en.a.getDenominator().multiply(en.b.getDenominator()).value;return Interval.divide(Interval.fromIntegers(en.b.getDenominator().multiply(en.a.getNumerator()).value,en.a.getDenominator().multiply(en.b.getNumerator()).value),Interval.fromIntegers(on,on),n)}else{if(t===Expression.E)return Interval.exp(Interval.fromIntegers(1,1),n);if(t===Expression.PI)return Interval.multiply(Interval.fromIntegers(4,4),Interval.atan(Interval.fromIntegers(1,1),n));if(t instanceof Expression.Function){var tn=evaluateExpression((t instanceof Expression.Sin||t instanceof Expression.Cos)&&t.a instanceof Expression.Radians?t.a.value:t.a,n);if(tn==="CANNOT_DIVIDE"||tn==null)return tn;if(t instanceof Expression.Sin)return Interval.sin(tn,n);if(t instanceof Expression.Cos)return Interval.cos(tn,n);if(t instanceof Expression.Logarithm)return Interval.log(tn,n);if(t instanceof Expression.Arctan)return Interval.atan(tn,n)}else if(t instanceof Expression.ExpressionWithPolynomialRoot)return evaluateExpression(t.e,n)}},decimalToString=function(t){return t.replace(/[eE]/g,"*10^")},complexToString=function(t,n){return t+(/^[\-\+]/.test(n)?n.replace(/^([\-\+])[\s\S]+/g,"$1"):t!==""?"+":"")+(n!=="1"&&n!=="-1"?n.replace(/^[\-\+]/g,"")+"*i":"i")},toDecimalStringInternal$1=function(t,n,a,l){if(a=a||decimalToString,l=l||complexToString,n.fractionDigits==null&&n.significantDigits==null||n.fractionDigits!=null&&n.significantDigits!=null)throw new RangeError;if(n.fractionDigits!=null&&(n.fractionDigits<0||n.fractionDigits>Number.MAX_SAFE_INTEGER)||n.significantDigits!=null&&(n.significantDigits<1||n.significantDigits>Number.MAX_SAFE_INTEGER)||n.roundingMode!=null)throw new RangeError;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex)){var u=t.getNumerator(),c=t.getDenominator();if((c instanceof Expression.Integer||Expression.has(c,Expression.PolynomialRootSymbol)||Expression.has(c,Expression.ExpressionPolynomialRoot)||Expression._isPositive(c))&&(u instanceof Expression.Addition||u instanceof Expression.Multiplication||u instanceof Expression.Complex)){const cn=Expression.getComplexNumberParts(u);let gn=cn.real,Cn=cn.imaginary;if(!Cn.equals(Expression.ZERO)){gn=gn.divide(c),Cn=Cn.divide(c);var p=gn.equals(Expression.ZERO)?"":toDecimalStringInternal$1(gn,n,a,l),d=toDecimalStringInternal$1(Cn,n,a,l);return l(p,d)}}}if(t instanceof Expression.Integer||t instanceof Expression.Division&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Integer)return a(primeFactor._rationalNumberToDecimalString(t.getNumerator().toBigInt(),t.getDenominator().toBigInt(),n));console.assert(BASE%2===0);var Q=void 0,Ct=1;//!new
//!
for(var ar=Expression.has(t,Expression.Function)||Expression.has(t,Expression.Exponentiation);Q==null;){if(Ct>6e4&&Ct>(n.fractionDigits||n.significantDigits)*4*Math.log2(10)){debugger;throw new TypeError}const cn=ar?{maximumSignificantDigits:Ct}:{maximumFractionDigits:Ct-1};var en=evaluateExpression(t,cn);if(en==null)return;if(en!=="CANNOT_DIVIDE"&&(Q=Interval.formatToDecimal(en,n)),en!=="CANNOT_DIVIDE"&&Q==null&&n.fractionDigits!=null&&Ct===1){var tn=BigFloat.max(BigFloat.abs(en.a),BigFloat.abs(en.b)).toFixed(0).length;Ct=Math.max(Math.ceil((tn+n.fractionDigits+1)*Math.log2(10)/2),2)}if(en!=="CANNOT_DIVIDE"&&Q==null&&n.significantDigits!=null&&Ct===1&&BigFloat.sign(en.a)===BigFloat.sign(en.b)){var on=BigFloat.log(BigFloat.min(BigFloat.abs(en.a),BigFloat.abs(en.b)),{maximumSignificantDigits:1,roundingMode:"half-even"}).toFixed(0).length;Ct=Math.max(Math.ceil(on*Math.log2(10)/2),1)}Ct*=2}return a(Q)};toDecimalStringInternal$1.testables={BigDecimalMath,BigDecimal,BigFloat,Interval};function gcdOfSafeIntegers(t,n){for(t=Math.abs(t),n=Math.abs(n);n!==0;){const a=t-Math.floor(t/n)*n;t=n,n=a}return t}Math.gcd=function(t,n){if(typeof t!="number"&&typeof n!="number")throw new RangeError;const a=1073741823;if((t|0)===t&&Math.abs(t)<=a&&(n|0)===n&&Math.abs(n)<=a){let l=Math.abs(t),u=Math.abs(n);for(;u!==0;){const c=l%u;l=u,u=c}return l}return gcdOfSafeIntegers(t,n)};function integerMin(t,n){return t.compareTo(n)<0?t:n}function bigIntGCDWrapper2(t,n){if(Math.abs(SmallBigInt.toNumber(t))>=1/0&&Math.abs(SmallBigInt.toNumber(n))>=1/0){var a=integerMin(Expression.Integer.fromBigInt(t).abs(),Expression.Integer.fromBigInt(n).abs()).bitLength();if(a=Math.pow(2,Math.ceil(Math.log2(a))),a>=128*1024&&a>lastMaxSize){lastMaxSize=a;var l=new TypeError("big size of gcd "+a);globalThis.onerror!=null&&globalThis.onerror(l.message,"",0,0,l)}}return gcd$1(SmallBigInt.BigInt(t),SmallBigInt.BigInt(n))}function bigIntGCDWrapper(t,n){return typeof t=="number"&&typeof n=="number"?Math.gcd(t,n):bigIntGCDWrapper2(t,n)}var pow=function(t,n,a){if(!(n>=0))throw new RangeError;if(n>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return n<1?a:2*Math.floor(n/2)!==n?pow(t,n-1,a.multiply(t)):pow(t.multiply(t),Math.floor(n/2),a)},binomialCoefficient=function(t,n){return n===0?Expression.ONE:t.multiply(binomialCoefficient(t.subtract(Expression.ONE),n-1)).divide(Integer$2.fromNumber(n))},matrixInN=function(t,n){var a=-1;//!
var l=t.map(function(ox,lx,cx){return lx===cx?ox:Expression.ZERO}),u=t.subtract(l);if(u.isNilpotent()&&l.multiply(u).eql(u.multiply(l))){for(var c=0;c<l.cols();c+=1)if(l.e(c,c).equals(Expression.ZERO)){for(var p=1;!u.pow(p).map(function(lx,cx,dx){return cx!==c?Expression.ZERO:lx}).isZero();){if(p>=u.cols())throw new TypeError("assertion");p+=1}a=Math.max(a,p-1)}for(var d=Matrix$1.Zero(u.cols(),u.cols()),c=0;c<u.cols()&&(c===0||!u.isZero());c+=1){var Q=l.map(function(cx,dx,hx){return dx===hx?cx.equals(Expression.ZERO)?Expression.ZERO:cx.pow(n.subtract(Expression.Integer.fromNumber(c))):Expression.ZERO});d=d.add(Q.multiply(u.pow(c)).scale(binomialCoefficient(n,c)))}var Cn=new Expression.Matrix(d);if(a>0){var Ct=[];Ct.push(new ExpressionWithCondition(Cn,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var ar=1;ar<=a;ar+=1)Ct.push(new ExpressionWithCondition(new Expression.Matrix(t.pow(ar)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(ar)))));return new Expression.Cases(Ct)}return a!==-1?new ExpressionWithCondition(Cn,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):Cn}//!
for(var en=function(ox){return ox instanceof Expression.Symbol||ox instanceof Exponentiation$1&&getBase(ox)instanceof Integer$2&&getBase(ox).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(ox).inverse())?!0:isConstant$1(ox)||isConstant$1(ox.divide(Expression.E))},tn=t,on="aa",cn=t.map(function(ox,lx,cx){return new Expression.Symbol(on+"_("+lx+","+cx+")")}),gn=cn.map(function(ox,lx,cx){return Expression.ZERO}),Cn=void 0,ex=-1;!cn.eql(gn);)ex+=1,gn=cn,Cn=cn.multiply(tn),cn=Cn.map(function(ox,lx,cx){var dx=cn.e(lx,cx)instanceof Expression.Symbol&&cn.e(lx,cx).symbol.slice(0,on.length)===on;if(!dx)return cn.e(lx,cx);if(!(ox instanceof Integer$2)){var hx=Polynomial$1.toPolynomial(ox.getNumerator(),n).getDegree(),fx=cn.e(lx,cx),ux=Polynomial$1.toPolynomial(ox.getNumerator(),fx),gx=ux.getLeadingCoefficient().divide(ox.getDenominator());if(hx!==0&&ux.getDegree()===1&&tn.e(lx,cx).equals(Expression.ZERO)&&(gx instanceof Integer$2||gx instanceof Expression.Complex||en(gx))){var yx=gx.pow(n).divide(gx.pow(Integer$2.fromNumber(hx+1))).multiply(binomialCoefficient(n.subtract(Expression.ONE),hx)),_x=ox.subtract(gx.multiply(fx)).divide(yx);if(_x instanceof Integer$2)return console.log("!",ox.toString()),_x.multiply(gx.pow(n).divide(gx.pow(Integer$2.fromNumber(hx+2))).multiply(binomialCoefficient(n.subtract(Expression.ONE),hx+1)))}}if(ox.equals(cn.e(lx,cx)))return tn.e(lx,cx);if(cn.e(lx,cx)instanceof Expression.Symbol&&cn.e(lx,cx).symbol===on+"_("+lx+","+cx+")"&&!ox.equals(Expression.ZERO)){var fx=cn.e(lx,cx),ux=Polynomial$1.toPolynomial(ox.getNumerator(),fx),gx=ux.getLeadingCoefficient().divide(ox.getDenominator()),vx=ux.getCoefficient(0).divide(ox.getDenominator());if(!Expression.has(vx,Expression.Symbol)&&ox.equals(gx.multiply(fx).add(vx))){var bx=gx.equals(Expression.ONE)?vx.multiply(n.subtract(Expression.TWO)):vx.multiply(Expression.ONE.subtract(gx.pow(n.subtract(Expression.TWO))).divide(Expression.ONE.subtract(gx)));return gx.pow(n.subtract(Expression.TWO)).multiply(tn.e(lx,cx)).add(bx)}}if(cn.e(lx,cx)instanceof Expression.Symbol&&cn.e(lx,cx).symbol===on+"_("+lx+","+cx+")"&&ox.equals(Expression.ZERO)){//!TODO: conditions.push(iteration); //? n > 0 && n <= 3 , n > 3 - ?
return a=ex,Expression.ZERO}var xx=ox.subtract(cn.e(lx,cx));if(xx instanceof Integer$2)return tn.e(lx,cx).add(xx.multiply(n.subtract(Expression.TWO)));var Sx=function(Cx){if(!en(Cx))return Expression.ZERO;var Tx=cn.e(lx,cx);return Cx.pow(n.subtract(Expression.ONE)).add(Cx.multiply(Tx))};if(!ox.equals(Expression.ZERO)){var fx=cn.e(lx,cx),ux=Polynomial$1.toPolynomial(ox.getNumerator(),fx),gx=ux.getLeadingCoefficient().divide(ox.getDenominator()),Ax=gx;if(ox.equals(Sx(Ax)))return Ax.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(tn.e(lx,cx)));var Ax=gx.negate();if(ox.equals(Sx(Ax)))return Ax.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(tn.e(lx,cx)))}return cn.e(lx,cx)});for(var ar=0;ar<cn.rows();ar+=1)for(var ix=0;ix<cn.cols();ix+=1){var ax=cn.e(ar,ix);if(ax instanceof Expression.Symbol&&ax.symbol.slice(0,on.length)===on)return}if(a>0){var Ct=[];Ct.push(new ExpressionWithCondition(new Expression.Matrix(Cn),Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var ar=1;ar<=a;ar+=1)Ct.push(new ExpressionWithCondition(new Expression.Matrix(tn.pow(ar)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(ar)))));return new Expression.Cases(Ct)}var ax=new Expression.Matrix(Cn);return a!==-1?new ExpressionWithCondition(ax,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):ax},isPositiveQuick=function(t){return t instanceof Integer$2?t.compareTo(Expression.ZERO)>0:t instanceof NthRoot?isPositiveQuick(t.a):(t instanceof Multiplication$1||t instanceof Division$1)&&!t.a.equals(Expression.ONE.negate())&&!t.b.equals(Expression.ONE.negate())?isPositiveQuick(t.a)&&isPositiveQuick(t.b)||isPositiveQuick(t.a.negate())&&isPositiveQuick(t.b.negate()):t instanceof Addition$1?isPositiveQuick(t.a)&&isPositiveQuick(t.b):t instanceof Expression.PolynomialRootSymbol?isPositiveQuick(t.interval.a)&&isPositiveQuick(t.interval.b):t instanceof Expression.Multiplication&&t.a.equals(Expression.ONE.negate())&&t.b instanceof Expression.PolynomialRootSymbol?!isPositiveQuick(t.b.interval.a)&&!isPositiveQuick(t.b.interval.b):t instanceof Expression.Abs},isPositive=function(t){if(t.equals(Expression.ZERO))return!1;if(isPositiveQuick(t))return!0;if(isPositiveQuick(t.negate()))return!1;if(t instanceof Expression.Symbol&&!(t instanceof Expression.PolynomialRootSymbol)&&!(t instanceof Expression.ExpressionPolynomialRoot)&&!(t instanceof Expression.ExpressionWithPolynomialRoot))return t===Expression.PI||t===Expression.E;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex))return!1;if(t instanceof Addition$1||t instanceof Expression.Cos||t instanceof Expression.Sin||t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication||t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot||t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.Division){var n=toDecimalStringInternal$1(t,{significantDigits:1}),a=n==null?NaN:Number(n.replace(/\((\d+)\)/g,"$1").replace(/\*10\^/g,"e"));if(!Number.isNaN(a))return a>0}if(t instanceof Expression.ExponentiationOfMinusOne)return!1;if(t instanceof Expression.Exponentiation&&getExponent(t)instanceof Expression.Integer)return isPositive(t.a);if(Expression.has(t,Expression.Symbol))return!1;if(t instanceof Expression.Logarithm)return isPositive(t.a.subtract(Expression.ONE));throw new TypeError("!"+t)};Expression._isPositive=isPositive;var isIntegerOrN=function(t){return t instanceof Integer$2||t instanceof Expression.Symbol&&(t.symbol==="n"||t.symbol==="k")?!0:t instanceof Expression.Addition||t instanceof Expression.Multiplication||t instanceof Expression.Exponentiation?isIntegerOrN(t.a)&&isIntegerOrN(t.b):!1},isGoodPolynomial=function(t){if(t instanceof Expression.Exponentiation)return!1;var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(n instanceof Expression.Symbol){var a=Polynomial$1.toPolynomial(t,n);if(a.getDegree()===1&&a.getCoefficient(0)instanceof Expression.Integer&&a.getCoefficient(1)instanceof Expression.Integer&&a.getContent().equals(Expression.ONE))return!0}return!1};const isMatrixSymbolTranspose=function(t){if(t instanceof Expression.Exponentiation&&getBase(t)instanceof Expression.MatrixSymbol){const n=getExponent(t);if(n instanceof Expression.Symbol&&n.symbol==="T"||n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&n.b.symbol==="T")return!0}return!1};Expression.prototype.powExpression=function(t){var n=this;if(n===Expression.INFINITY&&Expression.isScalar(t)){if(Expression.isReal(t)){if(t.compareTo(Expression.ONE)>0)throw new RangeError("NotSupportedError");if(t.compareTo(Expression.ONE)===0)return Expression.ONE;if(t.compareTo(Expression.ONE.negate())>0)return Expression.ZERO;throw new RangeError("NotSupportedError")}var a=Expression.getComplexNumberParts(t);if(Expression.isReal(a.real)&&Expression.isReal(a.imaginary)){var l=a.real._pow(2).add(a.imaginary._pow(2));if(l.compareTo(Expression.ONE)<0)return Expression.ZERO}}if(n instanceof Expression.Symbol&&(n.symbol==="t"||n.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.transpose();if(n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&(n.b.symbol==="t"||n.b.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.pow(n.a).transpose();//!
if(n instanceof Division$1&&n.a instanceof Integer$2&&n.b instanceof Integer$2&&t!==Expression.E&&!(t instanceof Expression.Symbol)&&!Expression.has(t,Expression.Symbol)){typeof hit=="function"&&hit({powExpression:n.toString()});var u=n.b.toNumber(),c=n.a.truncatingDivide(n.b),p=n.a.subtract(c.multiply(n.b));return c.equals(Expression.ZERO)?t.pow(p)._nthRoot(u):t.pow(c).multiply(t.pow(p)._nthRoot(u))}//!
if(t instanceof Expression.Integer&&n===Expression.CIRCLE)return new Expression.Degrees(t);//!new 2017-05-08
{if(t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&integerPrimeFactor(t).compareTo(t)===0){var d=function(yx){if(yx instanceof Expression.Symbol)return!0;if(yx instanceof Addition$1)return d(yx.a)&&d(yx.b);if((yx instanceof Integer$2||yx instanceof NthRoot)&&(t===Expression.E||t instanceof Integer$2&&yx instanceof NthRoot))return!0;if(yx instanceof Multiplication$1||yx instanceof Exponentiation$1){for(var _x of yx.factors()){var vx=getBase(_x);if(!(vx instanceof Integer$2||vx instanceof NthRoot||vx instanceof Expression.Symbol)&&!d(vx))return!1}return!0}if((t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0)&&yx instanceof Division$1&&yx.b instanceof Integer$2){//!new 2019-08-08
return d(yx.a)}return!1};if(n.getNumerator()instanceof Addition$1&&(n.getNumerator().a.isNegative()||n.getNumerator().b.isNegative()))return Expression.ONE.divide(t.pow(n.getNumerator().a.negate().divide(n.getDenominator())).divide(t.pow(n.getNumerator().b.divide(n.getDenominator()))));if(d(n)){if(n.isNegative())return Expression.ONE.divide(new Expression.Exponentiation(t,n.negate()));//!new
return n instanceof Expression.ExpressionWithPolynomialRoot?t.pow(n.upgrade()):new Expression.Exponentiation(t,n)}}if(t instanceof Integer$2&&t.compareTo(Expression.ONE)>0){if(n instanceof Addition$1&&(n.a instanceof Integer$2||n.b instanceof Integer$2))return t.pow(n.a).multiply(t.pow(n.b));var Q=integerPrimeFactor(t);if(Q.equals(t)){if(n instanceof Division$1&&n.b instanceof Integer$2){var u=n.b.toNumber();if(u>=2&&u<=Number.MAX_SAFE_INTEGER)return t.pow(n.a)._nthRoot(u)}//!new 2020-18-01
if(n instanceof Division$1&&isIntegerOrN(n.a)&&isIntegerOrN(n.b)&&t.compareTo(Expression.ONE)>0)return new Expression.Exponentiation(t,n);//!
}else if(!Expression.has(n,Expression.Logarithm)){var Ct=primeFactor._countTrailingZeros(t.toBigInt(),Q.toBigInt());return Q.pow(n.multiply(Integer$2.fromNumber(Ct))).multiply(t.divide(Q._pow(Ct)).pow(n))}}}//!
{if(t instanceof Integer$2&&t.equals(Expression.ONE))return Expression.ONE;if(t instanceof Division$1||t instanceof Multiplication$1&&(n.getDenominator().equals(Expression.ONE)||isPositive(t.a)||isPositive(t.b))){if(t instanceof Division$1)return t.a.pow(n).divide(t.b.pow(n));if(t instanceof Multiplication$1)return t.a.pow(n).multiply(t.b.pow(n))}}var ar=n.getNumerator(),en=n.getDenominator();if(t===Expression.E&&ar instanceof Multiplication$1&&ar.a instanceof Expression.Complex&&ar.a.real.equals(Expression.ZERO)&&ar.b instanceof Expression.Symbol){var tn=n.multiply(Expression.I.negate());return tn.cos().add(Expression.I.multiply(tn.sin()))}if(t===Expression.E&&getConstant$1(ar)instanceof Expression.Complex&&en instanceof Expression.Integer){var on=getConstant$1(ar);if(on.real.equals(Expression.ZERO)){var tn=n.multiply(Expression.I.negate());return tn=Expression.has(n,Expression.Symbol)?tn:new Expression.Radians(tn),tn.cos().add(Expression.I.multiply(tn.sin()))}return t.pow(on.real.divide(en)).multiply(t.pow(on.imaginary.multiply(Expression.I).multiply(ar.divide(on)).divide(en)))}if(t===Expression.E&&ar instanceof Expression.Addition&&en instanceof Expression.Integer)return t.pow(ar.a.divide(en)).multiply(t.pow(ar.b.divide(en)));if(t instanceof Expression.Matrix&&(isIntegerOrN(n)||n===Expression.INFINITY)){if(!t.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var cn=matrixInN(t.matrix,n);if(cn!=null){var gn=t.matrix.map(function(yx,_x,vx){return _x===vx?yx:Expression.ZERO}),Cn=t.matrix.subtract(gn);return t.matrix.isDiagonal()||Cn.isNilpotent()&&gn.multiply(Cn).eql(Cn.multiply(gn))&&Expression.callback!=null&&Expression.callback(new Expression.Event("DpN-matrix-pow",t)),cn}//! 2018-08-26
{var ex=Expression.getEigenvalues(t.matrix);if(ex.length===t.matrix.cols()){var ix=Expression.getEigenvectors(t.matrix,ex);if(ix.filter(yx=>yx!=null).length===t.matrix.cols()){var a=Expression.diagonalize(t.matrix,ex,ix),ax=a.L,ox=matrixInN(ax,n);if(ox!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-diagonalization",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",t)),new Expression.Matrix(a.T).multiply(ox).multiply(new Expression.Matrix(a.T_INVERSED))}else{var a=Expression.getFormaDeJordan(t.matrix,ex),lx=matrixInN(a.J,n);if(lx!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-Jordan-normal-form",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",t)),new Expression.Matrix(a.P).multiply(lx).multiply(new Expression.Matrix(a.P_INVERSED))}}}//!
}if(Expression.ExponentiationOfMinusOne!=null&&(t instanceof Integer$2&&t.compareTo(Expression.ZERO)<0||t.equals(Expression.E.negate()))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n).multiply(t.negate().pow(n));if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n.a).multiply(Expression.ONE.negate().pow(n.b)).multiply(t.negate().pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(Expression.ExponentiationOfImaginaryUnit!=null){if(t instanceof Expression.Complex&&t.equals(Expression.I.negate()))return Expression.ONE.negate().pow(n).multiply(t.negate().pow(n));if(t instanceof Expression.Complex&&(t.equals(Expression.I)||t.real.compareTo(Expression.ZERO)>0&&t.primeFactor().equals(t))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfImaginaryUnit(t,n);if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&!t.imaginary.equals(Expression.ONE)){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return t.imaginary.pow(n).multiply(Expression.I.pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex){var cx=t.primeFactor();return t.divide(cx).pow(n).multiply(cx.pow(n))}if(t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Expression.Symbol&&(n.getNumerator().symbol==="n"||n.getNumerator().symbol==="k")||t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Addition$1)return t.pow(Expression.ONE.divide(n.getDenominator())).pow(n.getNumerator())}if(t===Expression.E&&n instanceof Expression.Matrix){if(!n.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var ex=Expression.getEigenvalues(n.matrix);if(ex.length===n.matrix.cols()){var a=Expression.getFormaDeJordan(n.matrix,ex),gn=a.J.map(function(xx,Sx,Ax){return Sx===Ax?xx:Expression.ZERO}),Cn=a.J.map(function(xx,Sx,Ax){return Sx!==Ax?xx:Expression.ZERO}),dx=function(xx){for(var Sx=Matrix$1.Zero(xx.cols(),xx.cols()),Ax=Sx,Cx=Matrix$1.I(xx.cols()),Tx=0,Px=1;!Cx.eql(Sx);){var Fx=Cx.scale(Expression.ONE.divide(Integer$2.fromNumber(Px)));Ax=Ax.add(Fx),Cx=Cx.multiply(xx),Tx+=1,Px*=Tx}return Ax};return Expression.callback!=null&&Expression.callback(new Expression.Event("exponential-using-Jordan-canonical-form",n)),new Expression.Matrix(a.P.multiply(gn.map(function(xx,Sx,Ax){return Sx===Ax?Expression.E.pow(xx):Expression.ZERO}).multiply(dx(Cn))).multiply(a.P_INVERSED))}}//!2019-04-22
if(t instanceof NthRoot&&t.a instanceof Integer$2)return t.a.pow(n.divide(Expression.Integer.fromNumber(t.n)));{if(t===Expression.E&&isConstant$1(n)&&!has$2(n,Expression.Complex)&&!has$2(n,Expression.Logarithm))return new Expression.Exponentiation(t,n);if((t instanceof Expression.Symbol||Expression.has(t,Expression.Symbol))&&n instanceof Expression.Division&&n.getDenominator()instanceof Integer$2)return t.pow(n.getNumerator())._nthRoot(n.getDenominator().toNumber());if(t instanceof Expression.Symbol&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n);if(t===Expression.E&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Exponentiation$1&&getBase(t)===Expression.E)return getBase(t).pow(getExponent(t).multiply(n));if(isGoodPolynomial(t)&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n)}if(t instanceof Expression.Matrix&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Expression.Matrix&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer)return t.pow(n.a).pow(n.b);if(t instanceof Expression.Matrix&&n instanceof Expression.Division){if(n.getNumerator().equals(Expression.ONE)&&n.getDenominator()instanceof Expression.Symbol&&(n.getDenominator().symbol==="n"||n.getDenominator().symbol==="k"))return t._nthRoot(n.getDenominator());if(isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return t.pow(n.getNumerator()).pow(Expression.ONE.divide(n.getDenominator()))}if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k")){var hx=QuadraticInteger.toQuadraticInteger(t);if(hx!=null&&Number(hx.a.toString())>0&&hx.D>0&&(hx.isValid()||!0)){if(Number(hx.b.toString())>0)return new Expression.ExponentiationOfQuadraticInteger(t,n);if(Number(hx.b.toString())<0){var fx=hx.conjugate().toExpression();return t.multiply(fx).pow(n).divide(fx.pow(n))}}if(hx!=null&&Number(hx.a.toString())<0)return Expression.ONE.negate().pow(n).multiply(hx.toExpression().negate().pow(n))}{if(isIntegerOrN(n)){if(n instanceof Addition$1){for(var ux of n.summands())if(ux.isNegative())return t.pow(n.subtract(ux)).divide(t.pow(ux.negate()))}if(n.isNegative())return Expression.ONE.divide(t.pow(n.negate()));if(Expression.isConstant(t)&&!getConstant$1(n).equals(Expression.ONE))return t.pow(getConstant$1(n)).pow(n.divide(getConstant$1(n)));var gx=t instanceof Expression.Symbol||t instanceof Expression.Addition&&!(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos));if(gx)return new Expression.Exponentiation(t,n)}if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(t).getNumerator())&&isIntegerOrN(getExponent(t).getDenominator())||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t))&&isIntegerOrN(n)||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t).inverse())&&isIntegerOrN(n.inverse()))return getBase(t).pow(getExponent(t).multiply(n))}if(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos))return Expression._replaceBySinCos(Expression._replaceSinCos(t).pow(n));if(t===Expression.E&&n instanceof Expression.Logarithm)return n.a;if(t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Integer$2&&n.b instanceof Expression.Logarithm||t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Symbol&&n.b instanceof Expression.Logarithm)return t.pow(n.b).pow(n.a);if(t instanceof Expression.Integer&&Expression.has(n,Expression.Logarithm))return Expression.E.pow(t.logarithm().multiply(n));//!new 2020-12-11
if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.TWO)>=0&&isIntegerOrN(n))return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2022-07-26
if(t===Expression.E&&n instanceof Expression.ComplexConjugate&&n.a instanceof Expression.Symbol)return new Expression.Exponentiation(t,n);throw new RangeError("NotSupportedError")};Expression.prototype.compare4Addition=function(t){var n=this;if(n instanceof Integer$2&&t instanceof Integer$2)return n.compareTo(t);if(n instanceof Expression.Symbol&&t instanceof Integer$2)return 1;if(n instanceof Integer$2&&t instanceof Expression.Symbol)return-1;if(n instanceof Expression.Symbol&&t instanceof Expression.Symbol)return n.symbol<t.symbol?-1:t.symbol<n.symbol?1:0;//!
if(n instanceof Expression.Matrix&&t instanceof MatrixSymbol)return 1;if(n instanceof MatrixSymbol&&t instanceof Expression.Matrix)return-1;if(n instanceof Expression.Matrix&&t instanceof Expression.Matrix)return 0;//!new 2016-12-17
if(n instanceof Addition$1||t instanceof Addition$1)return Addition$1.compare4Addition(n,t);//!new 2016-10-09
if(n instanceof Multiplication$1||t instanceof Multiplication$1)return Multiplication$1.compare4Addition(n,t);//!new 2018-10-11
if(n instanceof Integer$2&&t instanceof Expression.Function)return-1;//!new 2018-11-12
if(n instanceof Division$1&&t instanceof Division$1)return n.a.compare4Addition(t.a)||n.b.compare4Addition(t.b);if(n instanceof Expression&&t instanceof Division$1)return 1;if(n instanceof Division$1&&t instanceof Expression||n instanceof Expression.Matrix)return-1;if(t instanceof Expression.Matrix)return 1;//!2019-02-18
if(n instanceof Integer$2&&t instanceof Expression.Complex)return-1;if(n instanceof Expression.Complex&&t instanceof Integer$2)return 1;//!
if(n.equals(t)){return 0;//!
}if(n instanceof Expression.Exponentiation||t instanceof Expression.Exponentiation)return getBase(n).compare4Addition(getBase(t))||0-getExponent(n).compare4Addition(getExponent(t));//!new 2017-02-10
if(t instanceof Expression.Symbol)return-1;//!
throw new RangeError};var compare$1=function(t,n){return t.compare4Addition(n)},compare4Multiplication=function(t,n){return t.compare4Multiplication(n)},getBase=function(t){return t instanceof Exponentiation$1?t.a:t},getExponent=function(t){return t instanceof Exponentiation$1?t.b:Expression.ONE},getConstant$1=function(t,n=void 0){if(t instanceof Integer$2)return t;if(t instanceof Expression.Complex)return t;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return t}else if(t instanceof Multiplication$1){var a=void 0,l=t;for(var u of l.factors()){var c=getConstant$1(u,n);a=a==null?c:c.multiply(a)}if(a!=null)return a}else if(t instanceof Addition$1){var a=void 0;for(var l of t.summands()){var c=getConstant$1(l,n);a=a==null?c:complexGCD(c,a)}if(a!=null)return a}return Expression.ONE},getTerm=function(t,n){if(!(t instanceof Integer$2)){{if(t instanceof Expression.Complex)return;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return}else if(t instanceof Multiplication$1){var a=[];for(var l of t.factors()){var u=getTerm(l,n);u!=null&&a.push(u)}for(var c=void 0,p=a.length-1;p>=0;p-=1)c=c==null?a[p]:new Multiplication$1(c,a[p]);return c}else if(t instanceof Addition$1)return t.divide(getConstant$1(t))}return t}};Expression.getConstant=getConstant$1;var multiplyByInteger=function(t,n){return t.compareTo(Expression.ZERO)===0?t:t.compareTo(Expression.ONE)===0?n:new Multiplication$1(t,n)};Expression.prototype.multiplyExpression=function(t){var n=this;if(t instanceof Expression&&n instanceof Multiplication$1)return t.multiply(n.a).multiply(n.b);if(t instanceof Multiplication$1&&n instanceof Expression){var a=compare4Multiplication2(t.b,n);return a===0?t.a.multiply(t.b.multiply(n)):a>0?t.a.multiply(n).multiply(t.b):new Multiplication$1(t,n)}//!
//!
var a=0;if(t instanceof Integer$2&&n instanceof Expression.Symbol)return multiplyByInteger(t,n);if(t instanceof Expression.Symbol&&n instanceof Integer$2)return multiplyByInteger(n,t);if(t instanceof Expression.Symbol&&n instanceof Expression.Symbol)return a=compare4Multiplication(t,n),a===0?t.pow(Expression.TWO):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Integer$2&&n instanceof Exponentiation$1)return multiplyByInteger(t,n);if(t instanceof Exponentiation$1&&n instanceof Integer$2)return multiplyByInteger(n,t);//!new 2022-06-20
if((getBase(t)instanceof Expression.MatrixSymbol||getBase(n)instanceof Expression.MatrixSymbol)&&(a=compare4Multiplication(getBase(t),getBase(n)),a===0&&(getExponent(t).equals(new Expression.Symbol("T"))||getExponent(n).equals(new Expression.Symbol("T")))))return new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Expression.Symbol)return a=compare4Multiplication(getBase(t),n),a===0?n.pow(getExponent(t).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Expression.Symbol&&n instanceof Exponentiation$1)return a=compare4Multiplication(t,getBase(n)),a===0?t.pow(getExponent(n).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Exponentiation$1)return a=compare4Multiplication(getBase(t),getBase(n)),a===0?getBase(t).pow(getExponent(t).add(getExponent(n))):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof SquareRoot&&n instanceof SquareRoot){if(t.a instanceof Integer$2&&n.a instanceof Exponentiation$1)return new Multiplication$1(t,n);var l=t.a.gcd(n.a);return l.multiply(t.a.divide(l).multiply(n.a.divide(l)).squareRoot())}if(t instanceof NthRoot&&t.n===3&&n instanceof NthRoot&&n.n===3)return t.a.multiply(n.a)._nthRoot(3);if(t instanceof NthRoot&&n instanceof NthRoot){//!2021-02-02 - hack
if(t.a instanceof Integer$2&&!(n.a instanceof Integer$2)&&t.n<n.n&&getVariable(n.a)._pow(2).gcd(t.a).equals(t.a)&&Expression.isConstant(t)&&Expression.isConstant(n))return n.multiply(t);//!
var u=Math.gcd(t.n,n.n);if(!(t.a instanceof Integer$2)&&(!(n.a instanceof Integer$2)||!t.a._pow(2).gcd(n.a).equals(Expression.ONE)||getVariable(t.a)._pow(2).gcd(n.a).equals(getVariable(t.a)._pow(2)))||!t.a.gcd(n.a).equals(Expression.ONE)){var c=Expression.pow(t.a,n.n/u).multiply(Expression.pow(n.a,t.n/u)),p=t.n/u*n.n;return c._nthRoot(p)}return!(t.a instanceof Integer$2)&&t.n===2&&n.a instanceof Integer$2&&n.n===4&&!(getConstant$1(t.a.getNumerator()).multiply(n.a)._nthRoot(n.n)instanceof NthRoot)?t.a.multiply(n.a._nthRoot(2))._nthRoot(2):t.n<n.n?new Multiplication$1(t,n):t.n>n.n?new Multiplication$1(n,t):t.a.multiply(n.a)._nthRoot(t.n)}//!
if(t instanceof MatrixSymbol&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&n instanceof MatrixSymbol)return new Multiplication$1(t,n);if(has$2(t,MatrixSymbol)&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&has$2(n,MatrixSymbol))return new Multiplication$1(t,n);//!
if(t instanceof Integer$2&&n instanceof Expression){if(t.compareTo(Expression.ZERO)===0)return t;if(t.compareTo(Expression.ONE)===0)return n}if(t instanceof Expression&&n instanceof Integer$2){if(n.compareTo(Expression.ZERO)===0)return n;if(n.compareTo(Expression.ONE)===0)return t}var d=t instanceof Expression.Complex&&n instanceof Expression.ExponentiationOfImaginaryUnit?-1:t instanceof Expression.ExponentiationOfImaginaryUnit&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n));if(d===0)return getBase(t).pow(getExponent(t).add(getExponent(n)));if(d<0)return new Multiplication$1(t,n);if(d>0)return new Multiplication$1(n,t)};function Iterator(){}Object.defineProperty(Iterator.prototype,"done",{get:function(){return this.value==null}});Iterator.prototype[globalThis.Symbol.iterator]=function(){return this};function TermFactorsIterator(t){this.value=void 0,this.e=t,this.hasPolynomialRoot=!1}TermFactorsIterator.prototype=Object.create(Iterator.prototype);TermFactorsIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e instanceof Integer$2||this.e instanceof Expression.Complex||this.e instanceof Expression.ExpressionPolynomialRoot?null:this.e,this.hasPolynomialRoot=this.e instanceof Expression.ExpressionPolynomialRoot,this.e=this.e instanceof Multiplication$1?this.e.a:void 0,this};function termFactors(t){return new TermFactorsIterator(t)}var compare4Addition=function(t,n){for(var a=termFactors(t),l=termFactors(n),u=a.next().value,c=l.next().value;u!=null&&c!=null;){var p=0-compare$1(getBase(u),getBase(c));if(p===0&&(p=compare$1(getExponent(u),getExponent(c))),p!==0)return p;u=a.next().value,c=l.next().value}for(;u==null&&a.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(c);)c=l.next().value;for(;c==null&&l.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(u);)u=a.next().value;//!new 2020-02-13
if(u instanceof Expression.Matrix||c instanceof Expression.Matrix)return n instanceof Integer$2&&t instanceof Multiplication$1?1:t instanceof Integer$2&&n instanceof Multiplication$1?-1:u!=null&&a.next().value!=null?1:c!=null&&l.next().value!=null?-1:0;//!
return u!=null?1:c!=null?-1:0},addSimilar=function(t,n){if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return t.add(n);for(var a=getConstant$1(t),l=getConstant$1(n),u=termFactors(getTerm(t)),c=termFactors(getTerm(n)),p=u.next().value,d=c.next().value,Q=Expression.ONE,Ct=!1;p!=null||d!=null;){var ar=null;if(p instanceof Expression.Matrix&&p.matrix.isScalar()&&isScalar(p.matrix.e(0,0))&&!p.matrix.e(0,0).equals(Expression.ZERO)&&d instanceof Expression.Matrix&&d.matrix.isScalar()&&isScalar(d.matrix.e(0,0))&&!d.matrix.e(0,0).equals(Expression.ZERO)&&p.matrix.rows()===d.matrix.rows()&&p.matrix.cols()===d.matrix.cols()&&!p.equals(d)){var ar=function(tn,on){return tn.matrix.e(0,0).multiply(on).multiply(tn.inverse())};return addSimilar(ar(p,t),ar(d,n))}else if(!Ct&&(p instanceof Expression.Matrix||d instanceof Expression.Matrix)&&(p==null||d==null||!p.equals(d)))Ct=!0,ar=(p==null?a:p.multiply(a)).add(d==null?l:d.multiply(l)),a=Expression.ONE,l=Expression.ONE;else{if(!p.equals(d))return null;ar=p}Q=ar.multiply(Q);//!TODO: depends on the iteration order !!!
p=u.next().value,d=c.next().value}return Ct||(Q=a.add(l).multiply(Q)),Q};Expression.getComplexNumberParts=function(t){if(t instanceof Expression.Division){var n=Expression.getComplexNumberParts(t.getNumerator());return{real:n.real.divide(t.getDenominator()),imaginary:n.imaginary.divide(t.getDenominator())}}if(!Expression.has(t,Expression.Complex))return{real:t,imaginary:Expression.ZERO};var a=[],l=[];for(var u of t.summands()){var c=void 0;for(let Q of u.factors())c==null&&Q instanceof Expression.Complex&&(c=Q);if(c==null)a.push(u);else if(c.real.equals(Expression.ZERO))l.push(u.multiply(Expression.I.negate()));else{var p=null;if(u!==c)for(var d of u.factors())d!==c&&(p=p==null?d:p.multiply(d));p==null?(a.push(c.real),l.push(c.imaginary)):(a.push(p.multiply(c.real)),l.push(p.multiply(c.imaginary)))}}return{real:_sum(a),imaginary:_sum(l)}};Expression.prototype.addExpression=function(t){var n=this;if(t.equals(Expression.ZERO))return n;if(n.equals(Expression.ZERO))return t;//!2019-02-16
if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return t.a.add(a).multiply(t.b)}else if(t instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return Expression.ONE.add(a).multiply(t)}if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(n.a).multiply(n.b)}else if(n instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(Expression.ONE).multiply(n)}//!2019-02-16
//!new 2019-09-30
//!new 2020-12-26
if((has2(t,Expression.Complex)||has2(n,Expression.Complex))&&(has2(t,Expression.ExpressionPolynomialRoot)||has2(n,Expression.ExpressionPolynomialRoot))){var l=Expression.getComplexNumberParts(t),u=Expression.getComplexNumberParts(n),c=l.real.add(u.real),p=l.imaginary.add(u.imaginary);if(p.equals(Expression.ZERO))return c;if(!(p instanceof Expression.Addition))return c.equals(Expression.ZERO)?p.multiply(Expression.I):!has2(c,Expression.ExpressionPolynomialRoot)&&!has2(p,Expression.ExpressionPolynomialRoot)?c.add(p.multiply(Expression.I)):new Expression.Addition(c,p.multiply(Expression.I))}//!
for(var d=t.summands(),Q=n.summands(),Ct=d.next().value,ar=0,en=Q.next().value,tn=[];Ct!=null&&en!=null;){var on=compare4Addition(Ct,en);if(on<0)tn.push(Ct),Ct=d.next().value;else if(on>0)tn.push(en),en=Q.next().value;else{if(has2(Ct,Expression.Matrix)||has2(en,Expression.Matrix)){var cn=addSimilar(Ct,en);cn!=null?cn.equals(Expression.ZERO)||tn.push(cn):(tn.push(Ct),tn.push(en))}else{const ix=getConstant$1(Ct,!0),ax=getConstant$1(en,!0),ox=getTerm(Ct,!0)||Expression.ONE,lx=getTerm(en,!0)||Expression.ONE,cx=(ox.equals(lx)?ix:ix.multiply(ox.divide(lx))).add(ax),dx=lx===Expression.ONE?cx:cx instanceof Expression.Addition?new Expression.Multiplication(cx,lx):cx.multiply(lx);ar=0,dx.equals(Expression.ZERO)||(Expression.has(dx,Expression.ExpressionPolynomialRoot)?Expression.has(Ct,Expression.ExpressionPolynomialRoot)?(Ct=dx,ar=1):(en=dx,ar=2):tn.push(dx))}ar!==1&&(Ct=d.next().value),ar!==2&&(en=Q.next().value)}}for(;Ct!=null;)tn.push(Ct),Ct=d.next().value;for(;en!=null;)tn.push(en),en=Q.next().value;if(tn.length===0)return Expression.ZERO;for(var gn=tn[tn.length-1],Cn=tn.length-2;Cn>=0;Cn-=1){var ex=tn[Cn];gn=new Addition$1(gn,ex)}return gn};var divideByInteger=function(t,n){if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");var a=[];for(var l of t.summands()){var u=Expression.ONE,c=void 0;for(var p of l.factors()){var d=p;d instanceof Integer$2||d instanceof Expression.Complex||d instanceof Expression.ExpressionPolynomialRoot?c!=null?(console.warn("!"),c=c.multiply(d)):c=d:u===Expression.ONE?u=d:u=d.multiply(u)}if(!(c instanceof Expression.Complex)&&!(c instanceof Integer$2)&&!(c instanceof Expression.ExpressionPolynomialRoot))throw new RangeError;var Q=null;c instanceof Expression.ExpressionPolynomialRoot?Q=c.divide(n).multiply(u):Q=c.truncatingDivide(n).multiply(u),a.push(Q)}return _sum(a)};Expression.getCoefficients=function(t,n){if(t.equals(Expression.ZERO))return[];var a=[];for(var l of t.summands()){var u=Expression.ZERO,c=Expression.ONE;for(var p of l.factors()){var d=p;for(var Q of getVariableInternal(d))Q.v.equals(n)?u=u.add(Q.e):c=c.multiply(Q.e===Expression.ONE?Q.v:Q.v.pow(Q.e))}var Ct=u.toNumber();a.push({degree:Ct,coefficient:c})}a.sort((tn,on)=>on.degree-tn.degree);for(var ar=-1,en=0;en<a.length;en+=1){var l=a[en];(ar===-1||l.degree!==a[ar].degree)&&(ar+=1,a[ar]={degree:l.degree,coefficient:[]}),a[ar].coefficient.push(l.coefficient)}a.length=ar+1;for(var en=0;en<a.length;en+=1)a[en]={degree:a[en].degree,coefficient:_sum(a[en].coefficient)};return a};var getFirstAdditionOperand=function(t){for(var n=t;n instanceof Addition$1;)n=n.a;return n},getLastMultiplicationOperand=function(t){for(var n=t;n instanceof Multiplication$1;)n=n.b;return n};function VIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.v=t}VIterator.prototype=Object.create(Iterator.prototype);VIterator.prototype.next=function(){return this.value=this.v,this.v=void 0,this};function VariablesIterator(t,n){if(n==null)throw new TypeError;this.value=void 0,this.v=t,this.additions=n}VariablesIterator.prototype=Object.create(Iterator.prototype);VariablesIterator.prototype.next=function(){var t=this.additions.next().value,n=null;if(t==null)n=null;else if(t instanceof Expression.Symbol)n={v:new Exponentiation$1(this.v,t),e:Expression.ONE};else if(t instanceof Expression.NthRoot){//!new 2019-11-30
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Expression.Exponentiation){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Multiplication$1&&t.a instanceof Integer$2)n={v:new Exponentiation$1(this.v,t.b),e:t.a};else if(t instanceof Multiplication$1)n={v:new Exponentiation$1(this.v,getTerm(t)),e:getConstant$1(t)};else if(t instanceof Integer$2)n={v:this.v,e:t};else if(t instanceof Expression.Division&&t.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
n={v:this.v,e:t}}else if(t instanceof Expression.Division&&t.a instanceof NthRoot&&t.b instanceof Integer$2){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t.getNumerator()),e:Expression.ONE.divide(t.getDenominator())}}else if(t instanceof Expression.Division&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
this.v instanceof Integer$2?n={v:new Exponentiation$1(this.v,t.a.b),e:t.divide(t.a.b)}:n={v:this.v,e:t}}else if(t instanceof Division$1&&t.b instanceof Integer$2){var a=getTerm(t.a);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else if(t instanceof Division$1&&t.a instanceof Integer$2&&t.b instanceof Expression.Symbol&&(this.v instanceof Integer$2||this.v instanceof Expression.Symbol||isGoodPolynomial(this.v))){var a=Expression.ONE.divide(t.b);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else throw new RangeError;return this.value=n,this};function NumeratorSummandsIterator(t){this.value=void 0,this.internal=t.getNumerator().summands(),this.denominator=t.getDenominator()}NumeratorSummandsIterator.prototype=Object.create(Iterator.prototype);NumeratorSummandsIterator.prototype.next=function(){var t=this.internal.next().value;return this.value=t==null?null:t.divide(this.denominator),this};var getVariableInternal=function(t){if(t instanceof Expression.ExponentiationOfMinusOne)return new VIterator({v:t,e:Expression.ONE});if(t instanceof Expression.ExponentiationOfImaginaryUnit)return new VIterator({v:t,e:Expression.ONE});var n=getBase(t),a=getExponent(t);//!new 2017-05-08
if(!(a instanceof Integer$2)){var l=new NumeratorSummandsIterator(a);return new VariablesIterator(n,l)}//!
return new VIterator({v:n,e:a})},getVariable=function(t,n=null){if(n==null||!n.avoidNthRoots){for(var a of t.summands())for(var l of a.factors())if(l instanceof NthRoot)return l}var u=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;//!?
if(!(u instanceof Expression.Complex)&&!(u instanceof Integer$2)&&!(n!=null&&n.avoidNthRoots&&u instanceof NthRoot))return u};Expression.getVariable=getVariable;var lastMaxSize=1,integerGCD=function(t,n){if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&(t=t.imaginary),n instanceof Expression.Complex&&n.real.equals(Expression.ZERO)&&(n=n.imaginary),t instanceof Expression.Integer&&n instanceof Expression.Integer)return Expression.Integer.fromBigInt(bigIntGCDWrapper(t.value,n.value));for(var a=t,l=n;!l.equals(Expression.ZERO);){var u=a.remainder(l);a=l,l=u}return a},complexGCD=function(t,n){if(t instanceof Expression.ExpressionPolynomialRoot){var a=t.root.getAlphaExpression();return complexGCD(Expression.getConstant(a.getNumerator()),n)}if(n instanceof Expression.ExpressionPolynomialRoot){var a=n.root.getAlphaExpression();return complexGCD(t,Expression.getConstant(a.getNumerator()))}var a=integerGCD(t,n);return a instanceof Expression.Complex&&a.real.compareTo(Expression.ZERO)===0?a.imaginary:(a instanceof Expression.Integer&&a.compareTo(Expression.ZERO)<0&&(a=a.negate()),a)},nthRootCommonFactor=function(t,n){if(t instanceof Expression.NthRoot&&n instanceof Expression.NthRoot){var a=t.n/Math.gcd(t.n,n.n)*n.n,l=t.radicand.gcd(n.radicand),u=Math.min(a/t.n,a/n.n),c=Math.gcd(a,u);return l._pow(u/c)._nthRoot(a/c)}return null},gcd=function(t,n,a){if(a==null){//!TODO: (2020-06-13)
return getTerm(t)instanceof Expression.NthRoot&&getTerm(n)instanceof Expression.NthRoot?gcd(getConstant$1(t),getConstant$1(n)).multiply(gcd(t.divide(getConstant$1(t)),n.divide(getConstant$1(n)))):complexGCD(getConstant$1(t,!0),getConstant$1(n,!0))}var l=getReplacement(t,getReplacement(n,a));//!new 2023-03-11
var l=getReplacement(t,getReplacement(n,a,"any"),"any");if(l instanceof Replacement){var u=l.apply(t),c=l.apply(n);if(!u.getDenominator().equals(Expression.ONE)){if(!(u.getDenominator()instanceof Expression.Integer))throw new TypeError;u=u.getNumerator()}if(!c.getDenominator().equals(Expression.ONE)){if(!(c.getDenominator()instanceof Expression.Integer))throw new TypeError;c=c.getNumerator()}var p=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(u,a),Polynomial$1.toPolynomial(c,a)).calcAt(a),d=l.undo(p);return getTerm(d)==null||(d=getTerm(d),console.log("c1",d.toString(),getTerm(d))),d}return l.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(t,a),Polynomial$1.toPolynomial(n,a)).calcAt(a):substitute(substitute(t,a,l,inverseReplacement(l,a)).gcd(substitute(n,a,l,inverseReplacement(l,a))),a,inverseReplacement(l,a),l)},getConjugateFactor=function(t){var n=-1/0;for(var a of t.summands())for(var l of a.factors())if(l instanceof NthRoot){var u=l.degree;n<u&&(n=u),l.a instanceof Integer$2||(n=1/0)}var c=void 0;for(var a of t.summands())for(var l of a.factors())if(l instanceof NthRoot){var u=l.degree,p=l.a instanceof Integer$2?l.a:null;if(p==null&&(p=QuadraticInteger.toQuadraticInteger(l.a),p!=null&&c==null)){for(var d=p.primeFactor();d.toExpression()instanceof Expression.SquareRoot;)p=p.truncatingDivide(d),d=p.primeFactor();p=d}if(p==null)throw new TypeError;if(n===1/0&&!(l.a instanceof Integer$2)&&(n=u),n%u===0)if(c==null&&(c=p),p!=null){var Q=integerGCD(c,p);if(!Q.isUnit()){c=Q;//!
}Q.isUnit()&&!(Q instanceof Integer$2)&&(c.isUnit()||p.isUnit())&&(c=Q)}else throw new TypeError}//!new 2020-12-16 - ExpressionParser.parse('1/(x+cbrt(18)+cbrt(12))')
c!=null&&c instanceof Integer$2&&(c=c.primeFactor());//!
return{p:c,degree:n}},getConjugate=function(t){var n=void 0;if(n=Expression.getComplexNumberParts(t),n!=null&&!n.imaginary.equals(Expression.ZERO))return n.real.subtract(n.imaginary.multiply(Expression.I));if(n=Expression.getNthRootConjugate(t),n!=null){if(n.equals(t)&&t instanceof Addition$1)throw new TypeError;return n}};Expression.getConjugate=getConjugate;Expression.getConjugateExpression=function(t){try{var n=Expression.getConjugate(t);return n!=null?Expression.getConjugateExpression(n.multiply(t)):t}catch(a){console.error(a)}return null};var getPolynomialRelativeToNthRoot=function(t,n,a){var l=Polynomial$1.of();for(var u of t.summands()){var c=0,p=Expression.ONE;for(var d of u.factors())if(d instanceof NthRoot&&(a===d.degree||a%d.degree===0&&n instanceof Integer$2)){var Q=d.a instanceof Integer$2?d.a:null;if(Q==null&&(Q=QuadraticInteger.toQuadraticInteger(d.a)),Q!=null){var Ct=0,ar=Q;if(n.isUnit()){if(ar.isUnit())for(Ct=1,ar=ar.truncatingDivide(n);ar.primeFactor().equals(n);)Ct+=1,ar=ar.truncatingDivide(n);else if(!(ar instanceof Integer$2)){var en=ar.truncatingDivide(n);if(!(en instanceof Expression.Integer)&&Number.isNaN(Number(en.a.toString())*Number(en.b.toString())))throw new TypeError;(en instanceof Expression.Integer||Number(en.a.toString())*Number(en.b.toString())>=0)&&(Ct=1,ar=en)}}else for(;ar.isDivisibleBy(n)&&Ct<d.degree;)ar=ar.truncatingDivide(n),Ct+=1;ar=ar.toExpression(),p=p.multiply(ar._nthRoot(d.degree)),c+=Ct*(a/d.degree)}else throw new TypeError}else p=p.multiply(d);l=l.add(Polynomial$1.of(p).shift(c))}return l};Expression.getNthRootConjugate=function(t){if(t instanceof Integer$2)return null;if(t instanceof NthRoot)return t._pow(t.n-1);if(t instanceof Multiplication$1&&t.a instanceof Integer$2)return Expression.getNthRootConjugate(t.b);//!2019-10-20 a workaround
if(t instanceof Addition$1&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.a.b instanceof NthRoot&&t.a.b.n===3&&t.b instanceof Multiplication$1&&t.b.a instanceof Integer$2&&t.b.b instanceof NthRoot&&t.b.b.n===3)return t.a._pow(2).subtract(t.a.multiply(t.b)).add(t.b._pow(2));//!
var n=getConjugateFactor(t),a=n.p,l=n.degree;if(a==null)return;var u=getPolynomialRelativeToNthRoot(t,a,l);u=u.divideAndRemainder(Polynomial$1.of(u.getContent()),"throw").quotient;//!new
const c=a.toExpression(),p=Polynomial$1.of(Expression.ONE).shift(l).subtract(Polynomial$1.of(c));return u.modularInverse(p).primitivePart().calcAt(c._nthRoot(l))};Expression.collectLinearEquationVariables=function(t){if(t instanceof Division$1)throw new RangeError;var n=[];for(var a of t.summands()){var l=void 0,u=Expression.ONE,c="";for(var p of a.factors())p instanceof Expression.Symbol&&l==null?l=p:(!(p instanceof Integer$2)&&!(p instanceof NthRoot)&&l==null&&(l=c),u=u.multiply(p));l==null&&(l=c);var d=l===c?"":l.toString();n.push({c:u,v:d})}return n};var has$2=function(t,n){if(t instanceof n)return!0;if(t instanceof BinaryOperation$1){if(t instanceof Addition$1){for(;t instanceof Addition$1;){if(has$2(t.b,n))return!0;t=t.a}return has$2(t,n)}return has$2(t.b,n)?!0:has$2(t.a,n)}return t instanceof Negation?has$2(t.b,n):t instanceof Expression.Function?has$2(t.a,n):!1};Expression.has=has$2;var has2=function(t,n){do{var a=null;t instanceof Addition$1?(a=t.b,t=t.a):(a=t,t=null);do{var l=null;if(a instanceof Multiplication$1?(l=a.b,a=a.a):(l=a,a=null),l instanceof n)return!0}while(a!=null)}while(t!=null);return!1},inverseReplacement=function(t,n){for(var a=n;!t.equals(n);)if(t instanceof Expression.Exponentiation&&t.b instanceof Multiplication$1&&n instanceof Exponentiation$1)a=a.pow(t.b.a.inverse()),t=t.pow(t.b.a.inverse());else if(t instanceof Expression.Exponentiation)a=a.pow(getExponent(t).inverse()),t=getBase(t);else if(t instanceof Addition$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.subtract(t.b),t=t.a}else if(t instanceof Multiplication$1){if(!(t.a instanceof Integer$2))throw new RangeError;a=a.divide(t.a),t=t.b}else if(t instanceof Division$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.multiply(t.b),t=t.a}else if(Expression.E===t||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&getBase(n).equals(t)){//!new 2019-09-23
a=a.pow(getExponent(n)),t=n}else throw new TypeError;return a},h$2=function(t,n,a){for(var l of t.summands())for(var u of l.factors())getBase(a).equals(getBase(u))&&(n=n.lcm(getExponent(u).getDenominator()));return n};Replacement._counter=0;function Replacement(t){this.from=getBase(t),this.to=new Expression.Symbol("$t"+ ++Replacement._counter).pow(getExponent(t).getDenominator())}Replacement.prototype.apply=function(t){var n=this.from,a=this.to,l=getVariable(n),u=Polynomial$1.toPolynomial(n.subtract(a),l);return Expression._map(function(c){if(!Expression.has(c,Expression.Division)){var p=Polynomial$1.toPolynomial(c,l);return p.divideAndRemainder(u).remainder.calcAt(l)}return c},t)};Replacement.prototype.undo1=function(t){var n=this.from,a=this.to,l=getBase(this.to),u=Polynomial$1.toPolynomial(n.subtract(a),l);return Polynomial$1.toPolynomial(t,l).divideAndRemainder(u).remainder.calcAt(l)};Replacement.prototype.undo=function(t){var n=getBase(this.to),a=this.from.pow(getExponent(this.to).inverse());return Expression._map(function(l){return l.equals(n)?a:l},t)};Replacement.prototype.equals=function(){return!0};var getReplacement=function(t,n,a){if(n instanceof Replacement)return n;for(var l of t.summands())for(var u of l.factors())if(u instanceof Expression.Exponentiation&&(Expression.has(u.a,Expression.Symbol)||u.a instanceof Integer$2&&u.a.compareTo(Expression.ONE)>0)&&u.b instanceof Expression.Division){if(getBase(n).equals(u.a))n=new Expression.Exponentiation(u.a,getConstant$1(u.b.b).lcm(getExponent(n).getNumerator()).divide(getExponent(n).getDenominator()));else if(getBase(n)instanceof Expression.Symbol){if(u.a instanceof Expression.Addition&&u.a.a.divide(getBase(n))instanceof Integer$2&&u.a.b instanceof Integer$2&&u.b instanceof Division$1&&u.b.a instanceof Integer$2&&u.b.b instanceof Integer$2){var c=u.b.getDenominator();c=h$2(t,c,u);//!
var p=getBase(n).pow(c).subtract(u.a.b).divide(u.a.a.divide(getBase(n)));return p}else if(a==="any"||a!=null&&a.equals(u.a))return new Replacement(u)}}return n};Expression._getReplacement=getReplacement;var substitute=function(t,n,a,l){if(t.equals(n))return a;if(t instanceof Expression.Exponentiation){if(t.equals(l))return n;if(getBase(t).equals(getBase(l))){//!new 2019-09-23
return n.pow(getExponent(t).divide(getExponent(l)))}}if(t instanceof Expression.Addition)return substitute(t.a,n,a,l).add(substitute(t.b,n,a,l));if(t instanceof Expression.Multiplication)return substitute(t.a,n,a,l).multiply(substitute(t.b,n,a,l));if(t instanceof Expression.Exponentiation){var u=substitute(t.a,n,a,l),c=substitute(t.b,n,a,l);return u instanceof Expression.Exponentiation&&getBase(u).equals(getBase(l))&&getExponent(l).getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)?getBase(u).pow(getExponent(u).multiply(c)):u.pow(c)}//! for sin.js:
return t instanceof Division$1?substitute(t.a,n,a,l).divide(substitute(t.b,n,a,l)):t instanceof Expression.Sin?substitute(t.a,n,a,l).sin():t instanceof Expression.Cos?substitute(t.a,n,a,l).cos():t};Expression._substitute=substitute;Expression.prototype.divideExpression=function(t){var n=this;if(simplifyIdentityMatrixPower){if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)return t.b.equals(n)?t.a:t.a.divide(n).multiply(t.b);if(t instanceof IdentityMatrix)return Expression.ONE.divide(n).multiply(t);if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix)return t.divide(n.a).multiply(n.b);if(n instanceof IdentityMatrix)return t.multiply(n)}if(has$2(n,MatrixSymbol)){//!?
var a=getBase(n)instanceof MatrixSymbol?n.pow(Expression.ONE.negate()):new Expression.Exponentiation(n,Expression.ONE.negate());if(t.equals(Expression.ONE)){if(n instanceof Multiplication$1){//!?
return Expression.callback!=null&&Expression.callback(new Expression.Event("property-inverse-of-multiplication",{matrix:"{{0}}"})),t.multiply(Expression.ONE.divide(n.b).multiply(Expression.ONE.divide(n.a)))}if(n instanceof Addition$1&&!has$2(n,Expression.Matrix)){var l=Expression.simpleDivisor(n);if(l!=null&&!l.equals(Expression.ONE)&&isScalar(l)&&!gcd(l,n).equals(Expression.ONE))return t.multiply(Expression.ONE.divide(l).multiply(Expression.ONE.divide(n.divide(l))))}return a}}if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return new Expression.Matrix(t.matrix.multiply(n.matrix.inverse()));if(t instanceof Expression.Matrix&&n instanceof Expression)return t.multiply(n.inverse());if(t instanceof Expression&&n instanceof Expression.Matrix)return Expression.callback!=null&&Expression.callback(new Expression.Event(n.matrix.getDeterminantEventType("inverse").type,n)),new Expression.Matrix(n.matrix.inverse()).multiply(t);if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");if(t.equals(Expression.ZERO))return Expression.ZERO;if(n.equals(Expression.ONE))return t;//!!! new (2021-04-05)
var u=getTerm(n);if(u instanceof Expression.Exponentiation&&getBase(u)===Expression.E&&getExponent(u)instanceof Expression.ExpressionPolynomialRoot){if(getTerm(t)instanceof Expression.Exponentiation&&getExponent(getTerm(t))instanceof Expression.ExpressionPolynomialRoot&&(t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication)&&(n instanceof Expression.Exponentiation||n instanceof Expression.Multiplication))return getExponent(getTerm(t)).subtract(getExponent(getTerm(n))).exp().multiply(getConstant$1(t).divide(getConstant$1(n)));if(getExponent(getTerm(n)).isNegative())return t.multiply(u.inverse()).divide(n.divide(u))}//!!!
//!!! new (21.12.2013)
{var c=getConjugate(n);if(c!=null){if(c.equals(Expression.ONE)){//!
if(Expression.isConstant(n))return t.multiply(Expression._map(function(cx){return cx instanceof NthRoot?Expression.toPolynomialRoot(cx):cx},n).inverse());//!
throw new TypeError}return c instanceof Expression.Multiplication&&c.a instanceof Expression.Complex&&(c=c.a),t.multiply(c).divide(n.multiply(c))}}if(Expression.has(t,Expression.Complex)){//!new 2017-11-25
var a=Expression.getComplexNumberParts(t);if(a!=null&&!a.imaginary.equals(Expression.ZERO)){var p=a.real,d=a.imaginary,Q=(p.equals(Expression.ZERO)?n:p.gcd(n)).gcd(d)._abs();return Q.equals(Expression.ONE)||(t=p.divide(Q).add(d.divide(Q).multiply(Expression.I)),n=n.divide(Q)),n.isNegative()&&(t=t.negate(),n=n.negate()),n.equals(Expression.ONE)?t:new Division$1(t,n)}}//!
//!2020-06-07
if(!getConstant$1(n).equals(n)&&t.divide(getConstant$1(t)).equals(n.divide(getConstant$1(n))))return getConstant$1(t).divide(getConstant$1(n));var Ct=n instanceof Integer$2?void 0:getVariable(t);has$2(Ct,MatrixSymbol)&&isScalar(n)&&(Ct=getVariable(n));//!2019-06-16
if(Ct!=null){var ar=Ct;Ct=getVariable(Ct);var en=getReplacement(n,getReplacement(t,Ct,ar),"any");if(en instanceof Replacement){var p=en.apply(t),d=en.apply(n),tn=p.divide(d),on=en.undo1(tn.getNumerator()),cn=en.undo1(tn.getDenominator());//!new 2023-03-11:
var Q=on.gcd(cn);return Q.equals(Expression.ONE)||(on=on.divide(Q),cn=cn.divide(Q)),on=en.undo(on),cn=en.undo(cn),cn.equals(Expression.ONE)?on:new Expression.Division(on,cn)}if(!en.equals(Ct)){var gn=inverseReplacement(en,Ct),p=substitute(t,Ct,en,gn),d=substitute(n,Ct,en,gn),Cn=p.divide(d);return p=substitute(Cn.getNumerator(),Ct,gn,en),d=substitute(Cn.getDenominator(),Ct,gn,en),d.equals(Expression.ONE)?p:new Expression.Division(p,d)}}var ex=void 0,ix=void 0;if(Ct!=null&&(ex=Polynomial$1.toPolynomial(t,Ct),ix=Polynomial$1.toPolynomial(n,Ct),ex.getDegree()===0&&ix.getDegree()===0&&(Ct=void 0)),Ct==null){var Q=complexGCD(getConstant$1(t,!0),getConstant$1(n,!0));if(!Q.equals(Expression.ONE))return t=divideByInteger(t,Q),n=divideByInteger(n,Q),t.divide(n)}else{//!TODO: remove - performance optimization
var Cn=ex.divideAndRemainder(ix,"undefined");if(Cn!=null&&Cn.remainder.equals(Polynomial$1.ZERO))return Cn.quotient.calcAt(Ct);//!
var Q=Polynomial$1.polynomialGCD(ex,ix);if(Q.getDegree()!==0||!Q.getLeadingCoefficient().equals(Expression.ONE)){var ax=ex.divideAndRemainder(Q,"throw").quotient,ox=ix.divideAndRemainder(Q,"throw").quotient;return ax.calcAt(Ct).divide(ox.calcAt(Ct))}}var lx=getConstant$1(getFirstAdditionOperand(n));return lx.compareTo(Expression.ZERO)<0?t.negate().divide(n.negate()):has$2(n,MatrixSymbol)?new Expression.Multiplication(t,new Expression.Exponentiation(n,Expression.ONE.negate())):new Division$1(t,n)};function Expression(){throw new TypeError("Do not call for better performance")}Expression.callback=void 0;Expression.Event=function(t,n,a){a=a??void 0,this.type=t,this.data=n,this.second=a};Expression.prototype.compare4Multiplication=function(t){throw new TypeError(this.toString())};Expression.prototype.compare4MultiplicationInteger=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationSymbol=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationNthRoot=function(t){throw new TypeError};Expression.prototype.negate=function(){return Expression.ONE.negate().multiply(this)};Expression.prototype.add=function(t){return t.addExpression(this)};Expression.prototype.subtract=function(t){return this.add(t.negate())};Expression.prototype.divide=function(t){//!2019-04-22
if(!(t instanceof Expression.Matrix)){if(this.equals(t)){//!TODO: remove - a hack to avoid some exceptions
return Expression.ONE}if(this.equals(t.negate()))return Expression.ONE.negate()}return t.divideExpression(this)};Expression.prototype.multiply=function(t){return t.multiplyExpression(this)};Expression.prototype.pow=function(t){return t.powExpression(this)};Expression.prototype.getDenominator=function(){return this instanceof Division$1?this.b:Expression.ONE};Expression.prototype.getNumerator=function(){return this instanceof Division$1?this.a:this};Expression.prototype.inverse=function(){return Expression.ONE.divide(this)};Expression.prototype.exp=function(){return Expression.E.pow(this)};var variables=function(t){var n=[];for(var a of t.summands())for(var l of a.factors())for(var u of getVariableInternal(l))u.v instanceof Integer$2||n.push(u.v);return n},getCommonVariable=function(t,n){for(var a=variables(t),l=variables(n),u=0;u<a.length;u+=1)if(a[u]instanceof NthRoot)return a[u];for(var u=0;u<l.length;u+=1)if(l[u]instanceof NthRoot)return l[u];for(var u=0;u<a.length;u+=1)a[u]instanceof Addition$1&&(a=a.concat(variables(a[u])),a[u]=null);for(var u=0;u<l.length;u+=1)l[u]instanceof Addition$1&&(l=l.concat(variables(l[u])),l[u]=null);for(var u=0;u<a.length;u+=1)for(var c=0;c<l.length;c+=1)if(a[u]!=null&&l[c]!=null&&a[u].equals(l[c]))return a[u];return null};Expression.prototype.gcd=function(t){if(this.equals(Expression.ONE))return this;if(this instanceof Integer$2&&t instanceof Integer$2)return integerGCD(this,t);if(!(this instanceof Integer$2)&&!(t instanceof Integer$2)){var n=getTerm(this),a=getTerm(t);if(n!=null&&a!=null&&n.equals(a))return getConstant$1(this).gcd(getConstant$1(t)).multiply(a);//!2020-11-05 more workarounds:
if(n=getTerm(getFirstAdditionOperand(this)),a=getTerm(getFirstAdditionOperand(t)),n!=null&&a!=null&&n.equals(a)){var l=getConstant$1(getFirstAdditionOperand(this)),u=getConstant$1(getFirstAdditionOperand(t));if(l instanceof Integer$2&&u instanceof Integer$2){var c=l.truncatingDivide(u);if(c instanceof Expression.Integer&&c.multiply(u).equals(l))return this.subtract(t.multiply(c)).gcd(t);var c=u.truncatingDivide(l);if(c instanceof Expression.Integer&&c.multiply(l).equals(u))return this.gcd(t.subtract(this.multiply(c)))}}}if(this.equals(Expression.ZERO)||t.equals(Expression.ZERO))return this.add(t);//!
var p=gcd(this,t,getCommonVariable(this,t));return p};Expression.prototype.lcm=function(t){return t.equals(Expression.ONE)?this:this.divide(this.gcd(t)).multiply(t)};//!new 2020-07-21
Expression.prototype.polynomialGCD=function(t){var n=this,a=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(a instanceof Expression.Symbol){var l=getReplacement(n,getReplacement(t,a));return l.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(n,a),Polynomial$1.toPolynomial(t,a)).calcAt(a):substitute(substitute(n,a,l,inverseReplacement(l,a)).polynomialGCD(substitute(t,a,l,inverseReplacement(l,a))),a,inverseReplacement(l,a),l)}return n.gcd(t)};var precedence={binary:{".^":5,"^":5,"*":3,"/":3,"+":2,"-":2},unary:{"-":5}};Expression.Symbol=function(t){this.symbol=t};Expression.Symbol.prototype=Object.create(Expression.prototype);Expression.Symbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationSymbol(this)};Expression.Symbol.prototype.compare4MultiplicationInteger=function(t){return-1};Expression.Symbol.prototype.compare4MultiplicationSymbol=function(t){return t.symbol<this.symbol?-1:this.symbol<t.symbol?1:0};Expression.Symbol.prototype.compare4MultiplicationNthRoot=function(t){return-1};Expression.Symbol.prototype.toString=function(t){if(this.symbol===""){return"e";//!
}return this.symbol};Expression.Symbol.prototype._pow=function(t){return t>1?new Expression.Exponentiation(this,Expression.Integer.fromNumber(t)):Expression.prototype._pow.call(this,t)};Expression.prototype.addInteger=function(t){return this.addExpression(t)};Expression.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:this.multiplyExpression(t)};Expression.prototype.divideInteger=function(t){return this.divideExpression(t)};var simplifyIdentityMatrixPower=!0;//! TODO:
function Integer$2(t){this.value=t}Integer$2.prototype=Object.create(Expression.prototype);Integer$2.prototype.powExpression=function(t){var n=this;if(t instanceof IdentityMatrix)return new IdentityMatrix(t.symbol);if(t instanceof MatrixSymbol)return n.equals(Expression.ZERO)?Expression.ONE:n.equals(Expression.ONE)?t:new Exponentiation$1(t,n);//!new 2019-12-16
if(t instanceof Exponentiation$1&&getExponent(t)instanceof Integer$2&&n instanceof Integer$2)return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2020-03-02
if(t instanceof Exponentiation$1&&getTerm(getExponent(t))instanceof Expression.Symbol)return getBase(t).pow(getExponent(t).multiply(n));//!
if(n.compareTo(Expression.ZERO)<0)return Expression.ONE.divide(t.pow(n.negate()));if(t instanceof Expression.Matrix){n.compareTo(Expression.ONE)>0&&(t.matrix.isDiagonal()||Expression.callback!=null&&Expression.callback(new Expression.Event("pow",t,new Expression.Matrix(Matrix$1.I(1).map(function(){return n})))));var a=function(c,p){return p.toNumber()>Number.MAX_SAFE_INTEGER?a(c,p.truncatingDivide(Expression.TWO)).pow(2).multiply(c.pow(p.remainder(Expression.TWO).toNumber())):c.pow(p.toNumber())};return new Expression.Matrix(a(t.matrix,n))}if(n.equals(Expression.ZERO))return Expression.ONE;if(n.equals(Expression.ONE))return t;if(t instanceof Expression.Symbol)return new Exponentiation$1(t,n);if(t instanceof Exponentiation$1){var l=t.b.multiply(n);if(l.getNumerator()instanceof Integer$2&&l.getDenominator()instanceof Integer$2){var u=l.getNumerator().truncatingDivide(l.getDenominator());if(u.compareTo(Expression.ZERO)>0)return t.a.pow(u).multiply(t.a.pow(l.subtract(u)))}return t.a.pow(t.b.multiply(n))}return t instanceof Integer$2&&(t.compareTo(Expression.ZERO)===0||t.compareTo(Expression.ONE)===0||t.compareTo(Expression.ONE.negate())===0)?n.remainder(Expression.TWO).compareTo(Expression.ZERO)===0?t.multiply(t):t:(t.equals(Expression.I)&&(n=n.remainder(Expression.TWO.add(Expression.TWO))),Expression.pow(t,n.toNumber()))};Integer$2.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationInteger(this)};Integer$2.prototype.compare4MultiplicationInteger=function(t){return t.compareTo(this)};Integer$2.prototype.compare4MultiplicationSymbol=function(t){return 1};Integer$2.prototype.compare4MultiplicationNthRoot=function(t){return 1};Integer$2.prototype.negate=function(){return new Integer$2(SmallBigInt.unaryMinus(this.value))};Integer$2.prototype.isUnit=function(){return this.equals(Expression.ONE)||this.equals(Expression.ONE.negate())};Expression.prototype.toExpression=function(){return this};Integer$2.prototype.compareTo=function(t){if(t instanceof Expression.Integer){var n=t.value,a=this.value;return SmallBigInt.lessThan(a,n)?-1:SmallBigInt.lessThan(n,a)?1:0}return Expression.prototype.compareTo.call(this,t)};Integer$2.prototype.abs=function(){return SmallBigInt.toNumber(this.value)<0?this.negate():this};Integer$2.prototype.sign=function(){return Math.sign(SmallBigInt.toNumber(this.value))};Integer$2.prototype.add=function(t){return this===Expression.ZERO?t:t.addInteger(this)};Integer$2.prototype.addInteger=function(t){return new Integer$2(SmallBigInt.add(t.value,this.value))};Integer$2.prototype.multiply=function(t){return t.multiplyInteger(this)};Integer$2.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:new Integer$2(SmallBigInt.multiply(t.value,this.value))};Integer$2.prototype.divide=function(t){return t.divideInteger(this)};//! for performance only
Integer$2.prototype.divideInteger=function(t){var n=this,a=t.value,l=n.value;if(SmallBigInt.toNumber(l)===0)throw new TypeError("ArithmeticException");if(typeof l=="number"&&l===1){return t;//!!!
}var u=SmallBigInt.divide(a,l),c=SmallBigInt.subtract(a,SmallBigInt.multiply(u,l));if(SmallBigInt.toNumber(c)===0)return new Integer$2(u);var p=SmallBigInt.BigInt(bigIntGCDWrapper(c,l));return a=SmallBigInt.divide(a,p),l=SmallBigInt.divide(l,p),SmallBigInt.toNumber(l)<0&&(a=SmallBigInt.unaryMinus(a),l=SmallBigInt.unaryMinus(l)),new Division$1(new Integer$2(a),new Integer$2(l))};Integer$2.prototype.truncatingDivide=function(t){return t.equals(Expression.ONE)?this:t.truncatingDivideInteger(this)};Integer$2.prototype.truncatingDivideInteger=function(t){var n=this;return new Integer$2(SmallBigInt.divide(t.value,n.value))};Integer$2.prototype.isDivisibleBy=function(t){return t.isDivisibleByInteger(this)};Integer$2.prototype.isDivisibleByInteger=function(t){return t.remainder(this).equals(Expression.ZERO)};Integer$2.prototype.remainder=function(t){return t.remainderInteger(this)};Integer$2.prototype.remainderInteger=function(t){var n=this,a=SmallBigInt.remainder(t.value,n.value);return a===1?Expression.ONE:new Integer$2(a)};Integer$2.prototype.primeFactor=function(){return integerPrimeFactor(this)};Integer$2.prototype.toNumber=function(){return SmallBigInt.toNumber(this.value)};Integer$2.prototype.toBigInt=function(){return this.value};Integer$2.prototype.toString=function(t){return this.value.toString()};Integer$2.prototype.valueOf=function(){return console.error("!"),this};Integer$2.prototype.leftShift=function(t){return new Integer$2(SmallBigInt.leftShift(this.value,t))};Integer$2.prototype.asUintN=function(t){return new Integer$2(SmallBigInt.asUintN(t,this.value))};Integer$2.fromNumber=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromString=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromBigInt=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Expression.ZERO=Integer$2.fromNumber(0);Expression.ONE=Integer$2.fromNumber(1);Expression.TWO=Integer$2.fromNumber(2);Expression.TEN=Integer$2.fromNumber(10);Expression.Matrix=function(t){this.matrix=t};Expression.Matrix.fromArray=function(t){return new Expression.Matrix(Matrix$1.padRows(t,null))};Expression.Matrix.prototype=Object.create(Expression.prototype);Expression.Matrix.prototype.augment=function(t){return t instanceof Expression.IdentityMatrix?new Expression.Matrix(this.matrix.augment(Matrix$1.I(this.matrix.cols()))):new Expression.Matrix(this.matrix.augment(t.matrix))};Expression.Matrix.prototype.equals=function(t){//!new 2019-12-03
if(t===Expression.ZERO)return this.matrix.isSquare()&&this.matrix.eql(this.matrix.map(function(n,a,l){return Expression.ZERO}));//!
return t instanceof Expression.Matrix?this.matrix.eql(t.matrix):!1};Expression.Matrix.prototype.compare4Multiplication=function(t){if(t instanceof Expression.Matrix)return 0;if(t instanceof MatrixSymbol){if(this.matrix.isSquare()&&this.matrix.isDiagonal()){const n=this.matrix.e(0,0);if(this.matrix.eql(Matrix$1.Zero(this.matrix.rows(),this.matrix.cols()).map((a,l,u)=>l===u?n:Expression.ZERO)))return 1}return-1}return 1};Expression.Matrix.prototype.compare4MultiplicationNthRoot=function(t){return 1};Expression.Matrix.prototype.multiply=function(t){return t.multiplyMatrix(this)};Expression.prototype.multiplyMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null)return new Expression.Matrix(t.matrix.scale(n));if(t.equals(Expression.ZERO)){//!TODO: TEST, TODO: sizes are lost
return t}return this.multiplyExpression(t)};Expression.Matrix.prototype.multiplyExpression=function(t){var n=getIdentityMatrixCoefficient(t);return n!=null?new Expression.Matrix(this.matrix.scale(n)):Expression.prototype.multiplyExpression.call(this,t)};Expression.Matrix.prototype.multiplyMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("multiply",t,this)),new Expression.Matrix(t.matrix.multiply(this.matrix))};Expression.Matrix.prototype.compare4MultiplicationSymbol=function(t){return 1};Expression.Matrix.prototype.multiplyDivision=Expression.Matrix.prototype.multiplyExpression;Expression.Matrix.prototype.add=function(t){return t.addMatrix(this)};Expression.Matrix.prototype.addMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("add",t,this)),new Expression.Matrix(t.matrix.add(this.matrix))};var isScalar=function(t){return t instanceof Integer$2||t instanceof Expression.Complex?!0:t instanceof MatrixSymbol?!1:t instanceof Expression.ExpressionWithPolynomialRoot?isScalar(t.e):t instanceof Expression.Symbol?!0:t instanceof BinaryOperation$1?isScalar(t.a)&&isScalar(t.b):t instanceof Negation?isScalar(t.b):t instanceof Expression.Function?isScalar(t.a):t instanceof Expression.NonSimplifiedExpression?isScalar(t.unwrap()):!1};Expression.isScalar=isScalar;var getIdentityMatrixCoefficient=function(t){var n=void 0;if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)n=t.a;else if(t instanceof IdentityMatrix)n=Expression.ONE;else if(isScalar(t))n=t;else if(t instanceof Addition$1&&Expression.has(t,IdentityMatrix)){var a=getIdentityMatrixCoefficient(t.a),l=getIdentityMatrixCoefficient(t.b);a!=null&&l!=null&&(n=a.add(l))}return n};Expression.prototype.addMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null){if(t.matrix.isSquare())return new Expression.Matrix(Matrix$1.I(t.matrix.rows()).scale(n)).add(t);throw new RangeError("NonSquareMatrixException")}return this.addExpression(t)};Expression.Matrix.prototype.addExpression=function(t){var n=getIdentityMatrixCoefficient(t);if(n!=null){if(this.matrix.isSquare())return this.add(new Expression.Matrix(Matrix$1.I(this.matrix.rows()).scale(n)));throw new RangeError("NonSquareMatrixException")}return Expression.prototype.addExpression.call(this,t)};Expression.Matrix.prototype.toString=function(t){return this.matrix.toString(setTopLevel(!0,t))};Expression.Matrix.prototype.isExact=function(){return this.matrix.isExact()};function BinaryOperation$1(t,n){this.a=t,this.b=n}BinaryOperation$1.prototype=Object.create(Expression.prototype);BinaryOperation$1.prototype.isNegation=function(){return this instanceof Multiplication$1&&this.a instanceof Integer$2&&this.a.equals(Expression.ONE.negate())};var setTopLevel=function(t,n){return n==null?{isTopLevel:t}:Object.assign({},n,{isTopLevel:t})};Expression.setTopLevel=setTopLevel;BinaryOperation$1.prototype.toString=function(t){var n=this.a,a=this.b,l=!1;this instanceof Addition$1&&a.isNegative()&&(l=!0,a=a.negateCarefully());var u=n.getPrecedence()+(n.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),c=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=a.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(u=u||n.isUnaryPlusMinus()),c=c||a.isUnaryPlusMinus(),c=c||this.unwrap()instanceof Exponentiation$1&&a.unwrap()instanceof Exponentiation$1,u=u||this.unwrap()instanceof Exponentiation$1&&n.unwrap()instanceof Expression.Function;var p=l?"-":this.getS();return this.isNegation()?"-"+(c?"(":"")+a.toString(setTopLevel(c,t))+(c?")":""):(u?"(":"")+n.toString(setTopLevel(u||t==null||t.isTopLevel,t))+(u?")":"")+p+(c?"(":"")+a.toString(setTopLevel(c,t))+(c?")":"")};Expression.prototype.unwrap=function(){return this};function Exponentiation$1(t,n){BinaryOperation$1.call(this,t,n)}Exponentiation$1.prototype=Object.create(BinaryOperation$1.prototype);Exponentiation$1.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationExponentiation(this)};Exponentiation$1.prototype.compare4MultiplicationInteger=function(t){return-1};Exponentiation$1.prototype.compare4MultiplicationExponentiation=function(t){var n=this;return getBase(t).compare4Multiplication(getBase(n))||getExponent(t).compare4Multiplication(getExponent(n))};BinaryOperation$1.prototype.compare4MultiplicationExponentiation=function(){return-1};function Multiplication$1(t,n){BinaryOperation$1.call(this,t,n)}Multiplication$1.prototype=Object.create(BinaryOperation$1.prototype);Multiplication$1.prototype.multiply=function(t){return t.multiplyExpression(this)};var compare4Multiplication2=function(t,n){if(t instanceof NthRoot&&n instanceof NthRoot){var a=t.multiply(n);if(a instanceof Expression.Multiplication){if(a.equals(new Expression.Multiplication(t,n)))return-1;if(a.equals(new Expression.Multiplication(n,t)))return 1}return 0}return t instanceof Integer$2&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Integer$2?1:t instanceof Expression.Complex&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n))};function Negation(t){this.b=t}Negation.prototype=Object.create(Expression.prototype);Expression.prototype.equalsNegation=function(t){return!1};Negation.prototype.equalsNegation=function(t){return this.b.equals(t.b)};Negation.prototype.equals=function(t){return t.equalsNegation()};Negation.prototype.toString=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"-"+(a?"(":"")+n.toString(setTopLevel(a,t))+(a?")":"")};function Subtraction(t,n){BinaryOperation$1.call(this,t,n)}Subtraction.prototype=Object.create(BinaryOperation$1.prototype);Subtraction.prototype.getS=function(){return"-"};function Addition$1(t,n){BinaryOperation$1.call(this,t,n)}Addition$1.prototype=Object.create(BinaryOperation$1.prototype);Addition$1.prototype.multiply=function(t){return t.multiplyAddition(this)};var _multiplyAddition=function(t,n,a){var l=[];for(var u of n.summands()){var c=a?t.multiply(u):u.multiply(t);l.push(c)}return _sum(l)},_sum=function(t){var n=t.length;if(n===0)return Expression.ZERO;for(;n>1;){for(var a=0;2*a<n;a+=1)t[a]=2*a+1<n?t[2*a+1].add(t[2*a]):t[2*a];n=Math.ceil(n/2)}return t[0]};Expression.prototype.multiplyAddition=function(t){return _multiplyAddition(this,t,!1)};Addition$1.prototype.multiplyExpression=function(t){return _multiplyAddition(t,this,!0)};function Division$1(t,n){BinaryOperation$1.call(this,t,n)}Division$1.prototype=Object.create(BinaryOperation$1.prototype);Division$1.prototype.multiply=function(t){return t.multiplyDivision(this)};Expression.prototype.multiplyDivision=function(t){return t.a.multiply(this).divide(t.b)};Division$1.prototype.multiplyDivision=function(t){return t.a.multiply(this.a).divide(t.b.multiply(this.b))};Division$1.prototype.multiplyExpression=function(t){return t.multiply(this.a).divide(this.b)};Division$1.prototype.add=function(t){return t.addDivision(this)};Expression.prototype.addDivision=function(t){return t.a.add(this.multiply(t.b)).divide(t.b)};Division$1.prototype.addDivision=function(t){return t.b.equals(this.b)?t.a.add(this.a).divide(this.b):t.a.multiply(this.b).add(t.b.multiply(this.a)).divide(t.b.multiply(this.b))};Division$1.prototype.addExpression=function(t){return t.multiply(this.b).add(this.a).divide(this.b)};Division$1.prototype.divide=function(t){return this.a.divide(this.b.multiply(t))};Division$1.prototype.divideExpression=function(t){return t.multiply(this.b).divide(this.a)};Division$1.prototype.multiplyAddition=function(t){return t.multiply(this.a).divide(this.b)};Expression.prototype.equals=function(t){throw new RangeError};Expression.prototype.equalsInteger=function(t){return this instanceof Expression.ExpressionWithPolynomialRoot||this instanceof Expression.ExpressionPolynomialRoot?this.equals(t):!1};const _isNumberTypeUsedForSmall=SmallBigInt.BigInt(0)===0;Integer$2.prototype.equals=function(t){return t===Expression.ZERO&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===0:t===Expression.ONE&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===1:t.equalsInteger(this)};Integer$2.prototype.equalsInteger=function(t){return t.compareTo(this)===0};Expression.Symbol.prototype.equals=function(t){return t instanceof Expression.Symbol&&this.symbol===t.symbol};BinaryOperation$1.prototype.equals=function(t){if(t instanceof Addition$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(t instanceof Addition$1&&this instanceof Multiplication$1&&Expression.has(this,Expression.ExpressionPolynomialRoot)||this instanceof Addition$1&&t instanceof Multiplication$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(this instanceof Addition$1&&t instanceof Addition$1){for(var n=this,a=t,l=n.summands(),u=a.summands(),c=l.next().value,t=u.next().value;c!=null&&t!=null;){if(!c.equals(t))return!1;c=l.next().value,t=u.next().value}return c!=null?!1:t==null}return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):t instanceof BinaryOperation$1&&this.getS()===t.getS()&&this.a.equals(t.a)&&this.b.equals(t.b)};function MatrixSymbol(t){Expression.Symbol.call(this,t)}MatrixSymbol.prototype=Object.create(Expression.Symbol.prototype);Exponentiation$1.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationMatrixSymbol(this)};Expression.prototype.compare4MultiplicationMatrixSymbol=function(t){return 1};Addition$1.prototype.compare4MultiplicationMatrixSymbol=function(t){return-1};Expression.Matrix.prototype.compare4MultiplicationMatrixSymbol=function(t){return t instanceof IdentityMatrix?1:-1};MatrixSymbol.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=Expression.Symbol.prototype.compare4MultiplicationSymbol.call(this,t);return n===1?-1:n};MatrixSymbol.prototype.compare4MultiplicationSymbol=function(t){return-1};MatrixSymbol.prototype.equals=function(t){return t instanceof MatrixSymbol&&Expression.Symbol.prototype.equals.call(this,t)};MatrixSymbol.prototype.transpose=function(){return new Expression.Exponentiation(this,new Expression.Symbol("T"))};Expression.MatrixSymbol=MatrixSymbol;function IdentityMatrix(t){MatrixSymbol.call(this,t)}IdentityMatrix.prototype=Object.create(MatrixSymbol.prototype);IdentityMatrix.prototype.multiplyAddition=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyAddition.call(this,t)};IdentityMatrix.prototype.addMatrix=function(t){return t.add(new Expression.Matrix(Matrix$1.I(t.matrix.rows())))};IdentityMatrix.prototype.add=function(t){return t.addIdentityMatrix(this)};Expression.prototype.addIdentityMatrix=function(t){return this.addExpression(t)};Expression.Matrix.prototype.addIdentityMatrix=function(t){return new Expression.Matrix(Matrix$1.I(this.matrix.rows())).add(this)};IdentityMatrix.prototype.multiplyDivision=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyExpression.call(this,t)};IdentityMatrix.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=this;return t instanceof IdentityMatrix?t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0:1};Expression.IdentityMatrix=IdentityMatrix;BinaryOperation$1.prototype.getS=function(){throw new TypeError("abstract")};Exponentiation$1.prototype.getS=function(){return"^"};Multiplication$1.prototype.getS=function(){return"*"};Negation.prototype.getS=function(){return"-"};Addition$1.prototype.getS=function(){return"+"};Division$1.prototype.getS=function(){return"/"};Expression.Function=function(t,n){this.name=t,this.a=n};Expression.Function.prototype=Object.create(Expression.prototype);Expression.Function.prototype.toString=function(t){return this.name+"("+this.a.toString(setTopLevel(!0,t))+")"};Expression.Function.prototype.equals=function(t){return t instanceof Expression.Function&&this.name===t.name&&this.a.equals(t.a)};Negation.prototype.isUnaryPlusMinus=function(){return!0};BinaryOperation$1.prototype.isUnaryPlusMinus=function(){return this.isNegation()};Expression.Function.prototype.isUnaryPlusMinus=function(){return!1;//!
};Expression.prototype.isUnaryPlusMinus=function(){return!1};Integer$2.prototype.isUnaryPlusMinus=function(){return this.compareTo(Expression.ZERO)<0};Negation.prototype.getPrecedence=function(){return precedence.unary["-"]};BinaryOperation$1.prototype.getPrecedence=function(){return this.isNegation()?precedence.unary["-"]:precedence.binary[this.getS()]};Expression.Function.prototype.getPrecedence=function(){return precedence.unary["-"]};Expression.prototype.getPrecedence=function(){return 1e3};Integer$2.prototype.getPrecedence=function(){return this.compareTo(Expression.ZERO)<0?precedence.unary["-"]:1e3};//! Note: this function is more for canonical order(?) or output(?), to check if a numeric expression is negative you should use Expression#sign()
Expression.prototype.isNegative=function(){var t=this;if(t instanceof Integer$2)return t.compareTo(Expression.ZERO)<0;if(t instanceof Expression.Complex)return t.real.compareTo(Expression.ZERO)<0||t.real.compareTo(Expression.ZERO)===0&&t.imaginary.compareTo(Expression.ZERO)<0;if(t instanceof Addition$1){var n=t;do n=n.a;while(n instanceof Addition$1);return n.isNegative()}return t instanceof Multiplication$1||t instanceof Division$1?t.a.isNegative()!==t.b.isNegative():t instanceof Negation?!0:t instanceof Expression.Radians?t.value.isNegative():!1};Expression.prototype.negateCarefully=function(){if(this instanceof Integer$2)return this.negate();if(this instanceof Addition$1)return new Addition$1(this.a.negateCarefully(),this.b.negateCarefully());if(this instanceof Multiplication$1)return this.b.isNegative()?new Multiplication$1(this.a,this.b.negateCarefully()):this.a.negateCarefully().equals(Expression.ONE)?this.b:new Multiplication$1(this.a.negateCarefully(),this.b);if(this instanceof Division$1)return this.b.isNegative()?new Division$1(this.a,this.b.negateCarefully()):new Division$1(this.a.negateCarefully(),this.b);if(this instanceof Negation){return this.b;//!
}return this.negate()};function NthRoot(t,n,a){Expression.Function.call(this,t,n),this.n=a,this.degree=a,this.radicand=n,console.assert(t===(a===2?"sqrt":a+"-root"))}NthRoot.prototype=Object.create(Expression.Function.prototype);NthRoot.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationNthRoot(this)};NthRoot.prototype.compare4MultiplicationInteger=function(t){return-1};NthRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};NthRoot.prototype.compare4MultiplicationNthRoot=function(t){return t.n<this.n?-1:t.n>this.n?1:0};NthRoot.prototype.toString=function(t){var n=this.a.getPrecedence()<=this.getPrecedence();return(n?"(":"")+this.a.toString(setTopLevel(n||t==null||t.isTopLevel,t))+(n?")":"")+"^"+(this.n===2?"0.5":"(1/"+this.n+")")};var isCommutative=function(t){return!Expression.has(t,Expression.Matrix)&&!Expression.has(t,Expression.MatrixSymbol)};NthRoot.prototype.getDegree=function(){return console.error("deprecated"),this.n};NthRoot.prototype.multiplyExpression=function(t){if(t instanceof Multiplication$1&&isCommutative(this)&&this.a instanceof Expression.Integer){for(var n of t.factors())if(n instanceof NthRoot&&n.a instanceof Expression.Integer&&compare4Multiplication2(n,this)===0){var a=!1,l=Expression.ONE;for(var u of t.factors()){var c=u;!a&&n===u&&(c=n.multiply(this),a=!0),l=l.multiply(c)}return l}}return Expression.prototype.multiplyExpression.call(this,t)};NthRoot.prototype.equals=function(t){return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):Expression.Function.prototype.equals.call(this,t)};//!new
NthRoot.prototype._pow=function(t){var n=Math.gcd(this.n,t);return n>1?this.n===n?this.a._pow(t/n):this.a._nthRoot(this.n/n)._pow(t/n):Expression.prototype._pow.call(this,t)};function isPerfectCube(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(3).toBigInt(),SmallBigInt.BigInt(3)),t.toBigInt()))===0}function isPerfectSquare(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(2).toBigInt(),SmallBigInt.BigInt(2)),t.toBigInt()))===0}var makeRoot=function(t,n){return n===1?t:n===2?new SquareRoot(t):new NthRoot(n+"-root",t,n)};NthRoot.makeRoot=makeRoot;Expression.prototype._nthRoot=function(t){if(typeof t=="number"){if(t<1||t>Number.MAX_SAFE_INTEGER||Math.floor(t)!==t)throw new RangeError("NotSupportedError")}else if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");var n=this;if(t===2&&n instanceof Addition$1){if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,Lx=n.b,l=Lx.multiply(Lx).subtract(a.multiply(a));l instanceof Integer$2&&!isPerfectSquare(l.abs())&&(l=null);var u=l instanceof Integer$2&&l.compareTo(Expression.ZERO)>=0?l.squareRoot():void 0;if(u!=null&&u instanceof Integer$2){var c=Lx.add(u),p=c.compareTo(Expression.ZERO)>=0?c.squareRoot().divide(Expression.TWO.squareRoot()):void 0;if(p!=null){var d=a.divide(Expression.TWO.multiply(p));return p.add(d)}}}if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&(n.b instanceof SquareRoot||n.b instanceof Multiplication$1&&n.b.a instanceof Integer$2&&n.b.b instanceof SquareRoot)){var p=n.a,d=n.b,c=p.multiply(p),Q=d.multiply(d),Ct=c.gcd(Q).squareRoot();if(!Ct.equals(Expression.ONE)){var Lx=p.divide(Ct).add(d.divide(Ct)).squareRoot().multiply(Ct.squareRoot());return typeof hit=="function"&&hit({rootFromAddition:n.toString()}),Lx}}if(Expression._isPositive(n)){var ar=getConjugateFactor(n);if(ar.p!=null){var u=ar.p.toExpression()._nthRoot(ar.degree),en=getPolynomialRelativeToNthRoot(n,ar.p,ar.degree),a=en.getCoefficient(1).multiply(u.toExpression()),Lx=en.getCoefficient(0),tn=Lx.multiply(Lx).subtract(a.multiply(a)),on=function(Zx){var eE=Zx.divide(getConstant$1(Zx)),oE=Expression.getConjugate(eE);return oE!=null&&oE.multiply(eE)instanceof Integer$2&&isPerfectSquare(oE.multiply(eE).abs())};if(tn instanceof Integer$2||on(tn)){var cn=tn.squareRoot(),c=Lx.add(cn);if(c instanceof Integer$2||on(c)){var p=c.squareRoot().divide(Expression.TWO.squareRoot()),d=a.divide(Expression.TWO.multiply(p));return p.add(d)}}}}else if(Expression._isPositive(n.negate())&&t===2)return Expression.I.multiply(n.negate()._nthRoot(2))}if(t===3&&n instanceof Addition$1&&(n.a instanceof SquareRoot&&n.a.a instanceof Integer$2||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,Lx=n.b,gn=a.multiply(a).subtract(Lx.multiply(Lx));if(isPerfectCube(gn)){var u=new Expression.Symbol("t"),Cn=Expression.Integer.fromNumber(9),ex=Expression.Integer.fromNumber(27),ix=Expression.pow(Cn.multiply(u).add(Lx.subtract(u)),2).multiply(Lx.subtract(u)).subtract(ex.multiply(u).multiply(Expression.pow(a,2))),ax=Polynomial$1.toPolynomial(ix,u);ax=ax.scale(ax.getContent().inverse());var u=ax.doRationalRootTest();if(u!=null){var p=u._nthRoot(3),d=a.divide(a.abs()).multiply(Lx.subtract(u).divide(Expression.Integer.fromNumber(3).multiply(p))._nthRoot(2));return p.add(d)}}}if(n instanceof NthRoot)return typeof hit=="function"&&hit({rootFromRoot:""}),n.a._nthRoot(n.n*t);if((n instanceof Division$1||n instanceof Multiplication$1)&&(t%2!==0||n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0||n.b instanceof Integer$2&&n.b.compareTo(Expression.ZERO)>0||n.a instanceof Integer$2&&isConstant$1(n.b)||isConstant$1(n)||isPositive(n.a)||isPositive(n.b)||isPositive(n.b.negate()))){if(n instanceof Division$1)return n.a._nthRoot(t).divide(n.b._nthRoot(t));if(n instanceof Multiplication$1)return n.a._nthRoot(t).multiply(n.b._nthRoot(t))}var ox=n instanceof Integer$2?n:null,lx=QuadraticInteger.toQuadraticInteger(n);//!
if(lx==null&&n instanceof Expression.Addition&&n.a instanceof Multiplication$1&&n.b instanceof Multiplication$1){var Ct=n.a.pow(Expression.TWO).gcd(n.b.pow(Expression.TWO)).squareRoot();if(!Ct.equals(Expression.ONE))return Ct._nthRoot(t).multiply(n.divide(Ct)._nthRoot(t))}//!
if(lx!=null){if(t!==2&&t%2===0){var ar=n.squareRoot();if(!(ar instanceof Expression.SquareRoot))return ar._nthRoot(t/2)}if((t===2||t===3)&&lx.isValid())if(lx.isPositive()){ox=lx;//!new 2020-12-31
if(lx.norm!=null&&Math.abs(Number(lx.norm().toString()))>Number.MAX_SAFE_INTEGER&&t!==3){ox=null;//!
}//!
}else return Expression.ONE.negate()._nthRoot(t).multiply(this.negate()._nthRoot(t))}if(ox!=null){if(n=ox,n instanceof Integer$2&&n.compareTo(Expression.ZERO)<0){if(t%2===0){if(t===2)return Expression.I.multiply(this.negate()._nthRoot(t));throw new RangeError("NotSupportedError")}return this.negate()._nthRoot(t).negate()}if(n.equals(Expression.ZERO))return this;for(var cx=[],dx=n;!dx.equals(Expression.ONE);){var gn=dx.primeFactor();if(gn instanceof QuadraticInteger){if(t!==2&&t!==3)throw new TypeError;if(Number(gn.a.toString())<0&&Number(gn.b.toString())>0||Number(gn.a.toString())>0&&Number(gn.b.toString())<0){var p=t%2===0?gn.abs():gn;return n.toExpression().divide(p.toExpression()._pow(t))._nthRoot(t).multiply(p.toExpression())}var hx=gn.norm();if(Number(gn.b.toString())!==0&&Number(gn.a.toString())!==0&&Number(hx.toString())>=0&&isPerfectSquare(Integer$2.fromBigInt(hx))&&t===2)return n.toExpression().divide(gn.toExpression())._nthRoot(2).multiply(gn.toExpression()._nthRoot(2))}var fx=dx instanceof Expression.Integer&&gn instanceof Expression.Integer?primeFactor._countTrailingZeros(dx.value,gn.value):-1,ux=0;if(fx!==-1)ux=fx,dx=dx.truncatingDivide(gn._pow(fx));else if(dx.isUnit())for(;!dx.equals(Expression.ONE);)dx=dx.truncatingDivide(gn),ux+=1;else for(;dx.isDivisibleBy(gn);)dx=dx.truncatingDivide(gn),ux+=1;gn=gn.toExpression();var gx=t;gn instanceof NthRoot&&(gx*=gn.n,gn=gn.a);var u=Math.gcd(gx,ux);for(gx/=u,ux/=u;ux!==0;){var Ct=ux>=gx?gx:1,yx=Math.floor(ux/Ct),vx=Math.floor(gx/Ct);cx.push(Object.freeze({degree:vx,radicand:Expression.pow(gn,yx)})),ux=ux-Ct*yx}}var _x=Expression.ONE;cx.sort((Vx,zx)=>Vx.degree-zx.degree);for(var vx=-1,dx=0;dx<cx.length;dx+=1)vx===-1||cx[dx].degree!==cx[vx].degree?(vx+=1,cx[vx]=cx[dx]):cx[vx]=Object.freeze({degree:cx[dx].degree,radicand:cx[vx].radicand.multiply(cx[dx].radicand)});cx.length=vx+1;for(var bx=null,xx=0;xx<cx.length;xx+=1){var Sx=cx[xx].degree;if(Sx!==1){var Ax=cx[xx].radicand,n=makeRoot(Ax,Sx);_x!==Expression.ONE?_x=new Expression.Multiplication(_x,n):_x=n}else bx=cx[xx].radicand}return bx!=null&&(_x=bx.multiply(_x)),_x}if(n instanceof Expression.Matrix){typeof hit=="function"&&hit(t===2?{squareRoot:"matrix"}:{nthRoot:"Matrix^(1/"+t+")"});var Cx=Expression.getEigenvalues(n.matrix),Tx=typeof t=="number"?Expression.Integer.fromNumber(t):t;if(Cx.length===n.matrix.cols()){var Px=Expression.getEigenvectors(n.matrix,Cx);if(Px.filter(Vx=>Vx!=null).length===n.matrix.cols()){n.matrix.isDiagonal()||(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-diagonalization",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",n)));var ar=Expression.diagonalize(n.matrix,Cx,Px),Fx=ar.L,Mx=Fx.map(function(zx,rE,Zx){return rE===Zx?zx.pow(Expression.ONE.divide(Tx)):zx});return new Expression.Matrix(ar.T.multiply(Mx).multiply(ar.T_INVERSED))}else{n.matrix.isJordanMatrix()?Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-matrix-nth-root",n)):(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-Jordan-normal-form",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",n)));var Dx=function(zx,rE){var Zx=zx.map(function(eE,oE,iE){if(oE>iE)return Expression.ZERO;if(oE===iE)return zx.e(oE,iE).pow(Expression.ONE.divide(rE));if(zx.e(oE,oE+1).equals(Expression.ZERO))return Expression.ZERO;if(!zx.e(oE,oE+1).equals(Expression.ONE))throw new TypeError("assertion");for(var Wx=iE-oE,AE=0;AE<Wx;AE+=1)if(!zx.e(iE-1-AE,iE-AE).equals(Expression.ONE))return Expression.ZERO;for(var ME=Expression.ONE,AE=0;AE<Wx;AE+=1)ME=ME.multiply(Expression.ONE.divide(rE).subtract(Expression.Integer.fromNumber(AE))).divide(Expression.Integer.fromNumber(AE+1));return ME.divide(zx.e(oE,oE)._pow(Wx)).multiply(zx.e(oE,oE).pow(Expression.ONE.divide(rE)))});return Zx},ar=Expression.getFormaDeJordan(n.matrix,Cx),Ox=Dx(ar.J,Tx);return new Expression.Matrix(ar.P.multiply(Ox).multiply(ar.P_INVERSED))}}}//!2019-04-22
if(n instanceof Exponentiation$1&&n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0)if(n.b instanceof Expression.Symbol){if(n.a instanceof Expression.Integer&&integerPrimeFactor(n.a).equals(n.a))return new Expression.Exponentiation(n.a,n.b.divide(Expression.Integer.fromNumber(t)))}else return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));//!2019-16-06
if(n instanceof Exponentiation$1&&n.a===Expression.E||n instanceof Exponentiation$1&&getBase(n)instanceof Expression.Logarithm&&getBase(n).a instanceof Expression.Integer)return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));if(n instanceof IdentityMatrix)return n;//!2019-17-06
if(n instanceof Expression.Symbol)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(n instanceof Exponentiation$1&&(n.a instanceof Expression.Symbol||isGoodPolynomial(n.a))&&(t%2===1||n.b.getNumerator()instanceof Integer$2&&n.b.getNumerator().remainder(Expression.TWO).equals(Expression.ONE))){var d=n.b.divide(Expression.Integer.fromNumber(t));return d.equals(Expression.ONE)?n.a:new Expression.Exponentiation(n.a,d)}//!2019-06-20
var Lx=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(Lx instanceof Expression.Symbol||Lx instanceof Expression.Logarithm&&Lx.a instanceof Expression.Integer&&(t===2||t===3||!0)){var ax=Polynomial$1.toPolynomial(n,Lx),Nx=ax.getContent();if(Nx.isNegative()&&(Nx=Nx.negate()),isPositive(Nx)&&!Nx.equals(Expression.ONE))return n.divide(Nx)._nthRoot(t).multiply(Nx._nthRoot(t));if(ax.getDegree()===1&&ax.getCoefficient(0)instanceof Integer$2&&!ax.getCoefficient(0).equals(Expression.ZERO)&&ax.getCoefficient(1)instanceof Integer$2)if(ax.getCoefficient(1).compareTo(Expression.ZERO)>0){var Tx=t instanceof Expression.Symbol?t:Expression.Integer.fromNumber(t);return new Expression.Exponentiation(n,Expression.ONE.divide(Tx))}else{//!TODO: fix
if(t%2!==0)return Expression.ONE.negate()._nthRoot(t).multiply(new Expression.Exponentiation(n.negate(),Expression.ONE.divide(Expression.Integer.fromNumber(t))))}if(ax.getDegree()>1&&!ax.getCoefficient(0).equals(Expression.ZERO)){var Tx=ax.getDegree(),u=Lx.multiply(ax.getCoefficient(Tx)._nthRoot(Tx)).add(ax.getCoefficient(0)._nthRoot(Tx));if(n.equals(u._pow(Tx))){//!TODO: remove
if(Tx>=t&&(t%2!==0||Expression._isPositive(Lx)))return u.pow(Expression.ONE).multiply(u._pow(Tx-t)._nthRoot(t));//!
if(t%2!==0||Expression._isPositive(Lx))return new Expression.Exponentiation(u,Expression.Integer.fromNumber(Tx).divide(Expression.Integer.fromNumber(t)))}if(ax.getDegree()>1&&ax.getSquareFreePolynomial().equals(ax)&&t===2)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(ax.getDegree()>1&&t===3){var gn=simpleDivisor(n);return n.divide(gn)._nthRoot(t).multiply(gn._nthRoot(t))}}}if(t%2!==0&&n instanceof Expression.ExponentiationOfMinusOne)return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));if(n instanceof Addition$1&&n.b instanceof NthRoot&&n.a instanceof NthRoot){var Ct=nthRootCommonFactor(n.a,n.b);if(!Ct.equals(Expression.ONE))return Ct._nthRoot(t).multiply(n.divide(Ct)._nthRoot(t))}if(n instanceof Exponentiation$1&&t===3&&getExponent(n).equals(Integer$2.fromNumber(3)))return getBase(n);if(n instanceof Exponentiation$1&&t===2&&getExponent(n).equals(Integer$2.fromNumber(2))){if(isPositive(getBase(n)))return getBase(n);if(isPositive(getBase(n).negate()))return getBase(n).negate()}if(t===2&&!(n.getDenominator()instanceof Expression.Integer)){var Gx=simpleDivisor(n.getDenominator());if(Gx.complexConjugate().multiply(Gx).equals(n.getDenominator()))return n.getNumerator()._nthRoot(t).divide(Gx.abs())}var Gx=simpleDivisor(n);if(!Gx.equals(n)&&(console.log(Gx.toString()),isPositive(Gx)&&(!(Gx instanceof Addition$1)||!(n.divide(Gx)instanceof Addition$1))&&!(Gx._nthRoot(t)instanceof NthRoot)))return Gx._nthRoot(t).multiply(n.divide(Gx)._nthRoot(t));const Ux=!0,Hx=function(Vx){return Expression.isConstant(Vx)&&!Expression.has(Vx,Expression.Sin)&&!Expression.has(Vx,Expression.Cos)};if(typeof t=="number"&&!isPositive(n)&&Ux&&Hx(n)&&t===2){const Vx=Expression.getComplexNumberParts(n),zx=Vx.real,rE=Vx.imaginary,Zx=zx._pow(2).add(rE._pow(2)).squareRoot(),eE=zx.add(Zx).divide(Expression.TWO).squareRoot(),oE=Expression.Integer.fromNumber(rE.sign()).multiply(zx.negate().add(Zx).divide(Expression.TWO).squareRoot());return eE.add(oE.multiply(Expression.I))}if(typeof t=="number"&&(isPositive(n)||Hx(n)&&t===2)){var ar=Expression.toPolynomialRoot(makeRoot(n,t));if(ar!=null)return ar}if(typeof t=="number"&&isPositive(n.negate())){var ar=Expression.toPolynomialRoot(makeRoot(n.negate(),t));if(ar!=null)return ar.negate()}if(getBase(n)instanceof Expression.Symbol&&getBase(n).symbol.startsWith("$t")&&typeof t=="number")return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));//!new
if(Expression.isReal(n)&&typeof t=="number"&&isPositive(n))return new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse());//!
if(t===2&&!(this instanceof Expression.Exponentiation)){var gn=simpleDivisor(this);if(gn.complexConjugate().multiply(gn).equals(this))return gn.abs()}if(t===2&&!(this instanceof Expression.Exponentiation))return console.log(this.toString()),Expression.has(this,Expression.Symbol)?new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse()):NthRoot.makeRoot(this,t);throw new RangeError("NotSupportedError")};function SquareRoot(t){NthRoot.call(this,"sqrt",t,2)}SquareRoot.prototype=Object.create(NthRoot.prototype);//!
SquareRoot.prototype.divideInteger=function(t){return t.multiply(this).divide(this.a)};Expression.prototype.squareRoot=function(){return this._nthRoot(2)};Expression.Rank=function(t){Expression.Function.call(this,"rank",t)};Expression.Rank.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rank=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
Expression.callback!=null&&Expression.callback(new Expression.Event("rank",t));var n=[],a=void 0;if(Matrix$1.toRowEchelonWithCallback(t.matrix,Matrix$1.GaussMontante,"",void 0,function(l){var u=l.condition;if(u.isTrue())a=l.matrix.rank();else{var c=l.matrix;n.push(new ExpressionWithCondition(Integer$2.fromNumber(c.rank()),u))}}),n.length!==0)return new Expression.Cases(n);//!
return Integer$2.fromNumber(a)};Expression.Determinant=function(t){Expression.Function.call(this,"determinant",t)};Expression.Determinant.prototype=Object.create(Expression.Function.prototype);function isSquareMatrix(t){return!!(t instanceof Expression.Matrix&&t.matrix.isSquare()||t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))}Expression.prototype.determinant=function(){var t=this;if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().multiply(t.b.determinant());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().pow(t.b);if(t instanceof Expression.MatrixSymbol)return new Expression.Determinant(t);if(isMatrixSymbolTranspose(t))return t.transpose().determinant();if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event(t.matrix.getDeterminantEventType("determinant").type,t)),t.matrix.determinant()};Expression.RowReduce=function(t){Expression.Function.call(this,"row-reduce",t)};Expression.RowReduce.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rowReduce=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event("row-reduce".type,t)),new Expression.Matrix(t.matrix.toRowEchelon(Matrix$1.GaussJordan,"",null).matrix)};Expression.Transpose=function(t){Expression.Function.call(this,"transpose",t)};Expression.Transpose.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transpose=function(){var t=this;if(t instanceof Expression.Multiplication)return Expression.callback!=null&&Expression.callback(new Expression.Event("property-transpose-of-multiplication",{matrix:"{{0}}"})),t.b.transpose().multiply(t.a.transpose());if(t instanceof Expression.Addition)return t.a.transpose().add(t.b.transpose());if(isScalar(t))return t;if(!(getBase(t)instanceof MatrixSymbol)&&t instanceof Expression.Exponentiation&&t.b.equals(Expression.ONE.negate()))return t.a.transpose().pow(t.b);if(t instanceof Expression.Exponentiation&&t.b.equals(new Expression.Symbol("T")))return t.a;if(getBase(t)instanceof MatrixSymbol){var n=getExponent(t).multiply(new Expression.Symbol("T")),a=Polynomial$1.toPolynomial(n,new Expression.Symbol("T"));return a.getDegree()>=2&&(n=n.subtract(a.getCoefficient(2).multiply(new Expression.Symbol("T")._pow(2))).add(a.getCoefficient(2))),new Expression.Exponentiation(getBase(t),n)}if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.transpose())};Expression.Adjugate=function(t){Expression.Function.call(this,"adjugate",t)};Expression.Adjugate.prototype=Object.create(Expression.Function.prototype);Expression.prototype.adjugate=function(){var t=this;const n=function(){Expression.callback!=null&&Expression.callback(new Expression.Event("property-adjugate-of-multiplication",{matrix:"{{0}}"}))};if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return n(),t.b.adjugate().multiply(t.a.adjugate());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return n(),t.a.adjugate().pow(t.b);if(isMatrixSymbolTranspose(t))return n(),t.transpose().adjugate().transpose();if(t instanceof Expression.MatrixSymbol)return t.determinant().multiply(t.inverse());if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");if(Expression.callback!=null&&Expression.callback(new Expression.Event("adjugate",t)),t.matrix.rows()===1&&t.matrix.cols()===1)return new Expression.Matrix(Matrix$1.I(1));var a=t.matrix.determinant();if(Expression.isScalar(a)&&!a.equals(Expression.ZERO))return new Expression.Matrix(t.matrix.inverse().scale(a));var l=t.matrix.map(function(c,p,d,Q){return(p+d-2*Math.floor((p+d)/2)===1?Expression.ONE.negate():Expression.ONE).multiply(Q.minorMatrix(p,d).determinant())}),u=new Expression.Matrix(l.transpose());return u};Expression.NoAnswerExpression=function(t,n,a){Expression.Function.call(this,n,t),this.second=a};Expression.NoAnswerExpression.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transformNoAnswerExpression=function(t,n){if(n=n??void 0,!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return t==="solve"&&Expression.callback!=null&&Expression.callback(new Expression.Event("solve",this)),new Expression.NoAnswerExpression(this,t,n)};Expression.NoAnswerExpression.prototype.multiply=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.add=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.toString=function(t){return this.second==null?Expression.Function.prototype.toString.call(this,t):this.a.toString(setTopLevel(!0,t))+" "+this.name+" "+this.second.toString(setTopLevel(!0,t))};Expression.ElementWisePower=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.ElementWisePower.prototype=Object.create(BinaryOperation$1.prototype);Expression.ElementWisePower.prototype.getS=function(){return".^"};Expression.prototype.elementWisePower=function(t){if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(this.matrix.map(function(n,a,l){return n.pow(t)}))};Expression.prototype.isRightToLeftAssociative=function(){var t=this;return t instanceof Integer$2?t.compareTo(Expression.ZERO)<0:t instanceof Negation?!0:t instanceof BinaryOperation$1?t.isNegation()?!0:t instanceof Exponentiation$1:!1};var integerPrimeFactor=function(t){return Integer$2.fromBigInt(primeFactor(t.value))},simpleDivisor=function(t){if(t instanceof Division$1)throw new RangeError;if(t instanceof Expression.Matrix)throw new RangeError;if(t instanceof Expression.Symbol)return t;if(t instanceof Integer$2){var n=t,a=n.compareTo(Expression.ZERO)<0?n.negate():n;return a.compareTo(Expression.ONE)>0?integerPrimeFactor(a):null}if(t instanceof Expression.Complex){var l=t.primeFactor();return!l.equals(t)&&t.divide(l)instanceof Expression.Integer&&(l=l.multiply(Expression.I)),l}var u=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(u instanceof NthRoot&&u.a instanceof Integer$2&&u.n===2){var c=getPolynomialRelativeToNthRoot(t,u.a,u.n),l=c.getContent();if(!l.equals(Expression.ONE)&&!l.equals(Expression.ONE.negate()))return simpleDivisor(l)}if(u!=null){u=getVariable(u);//!?TODO: FIX
var p=getReplacement(t,u);if(!p.equals(u))return substitute(simpleDivisor(substitute(t,u,p,inverseReplacement(p,u))),u,inverseReplacement(p,u),p);var d=Polynomial$1.toPolynomial(t,u),Q=d.getContent(),Ct=simpleDivisor(Q);if(Ct!=null)return Ct;var ar=getConstant$1(d.getLeadingCoefficient());if(ar instanceof Expression.Complex&&ar.real.equals(Expression.ZERO)){return Expression.I;//!?
}if(d.getCoefficient(0).equals(Expression.ZERO))return u;if(d.getDegree()>=2){var en=d.doRationalRootTest();if(en!=null){var Ct=u.multiply(en.getDenominator()).subtract(en.getNumerator());return Ct}}if(d.getDegree()>=2&&d._hasIntegerLikeCoefficients()){var Ct=d.factorize();if(Ct!=null)return simpleDivisor(Ct.calcAt(u))}if(d.getDegree()>=2&&!d._hasIntegerLikeCoefficients()){var Ct=d.squareFreeFactors();if(Ct.a0.getDegree()!==0)return Ct.a0.scale(Ct.a0.getLeadingCoefficient().inverse()).calcAt(u)}if(t=d.calcAt(u),t.isNegative()){t=t.negate();//!?
}return t}throw new RangeError};Expression.simpleDivisor=simpleDivisor;Expression.everyDivisor=function(t,n){if(t.equals(Expression.ZERO))return!0;if(!n(Expression.ONE))return!1;for(var a=[],l=function(c,p,d){if(p>=0){for(var Q=a[p],Ct=c;Ct<=Q.e;Ct+=1)if(!l(0,p-1,d.multiply(Expression.pow(Q.d,Ct))))return!1}else if(!n(d))return!1;return!0};!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate());){var u=simpleDivisor(t);if((a.length===0||!a[a.length-1].d.equals(u))&&a.push({d:u,e:0}),a[a.length-1].e+=1,!l(a[a.length-1].e,a.length-1,Expression.ONE))return!1;t=t.divide(u)}return!0};Expression.Integer=Integer$2;Expression.NthRoot=NthRoot;Expression.SquareRoot=SquareRoot;Expression.Negation=Negation;Expression.Subtraction=Subtraction;Expression.BinaryOperation=BinaryOperation$1;Expression.Exponentiation=Exponentiation$1;Expression.Multiplication=Multiplication$1;Expression.Addition=Addition$1;Expression.Division=Division$1;Expression.pow=function(t,n){return t._pow(n)};Expression.prototype._pow=function(t){return pow(this,t,Expression.ONE)};Expression.Integer.prototype._pow=function(t){return typeof t=="number"&&Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER?new Integer$2(SmallBigInt.exponentiate(this.value,SmallBigInt.BigInt(t))):Expression.prototype._pow.call(this,t)};Expression.Integer.prototype._nthRoot=function(t){if(typeof t=="number"&&t===2&&this.equals(this.abs())&&isPerfectSquare(this))return this._integerNthRoot(2);if(typeof t=="number"&&t===3&&isPerfectCube(this))return this._integerNthRoot(3);if(typeof t=="number"&&t===2&&this.equals(this.abs())){for(var n=this,a=Expression.ONE,l=Expression.ONE;!isPerfectSquare(n);){var u=Integer$2.fromBigInt(primeFactor(n.toBigInt())),c=primeFactor._countTrailingZeros(n.toBigInt(),u.toBigInt());n=n.divide(u._pow(c)),c%2===1&&(l=l.multiply(u),c-=1),a=a.multiply(u._pow(c/2))}return n.squareRoot().multiply(a).multiply(new SquareRoot(l))}return Expression.prototype._nthRoot.call(this,t)};Expression.Integer.prototype._isPerfectSquare=function(){return this.sign()<0?!1:isPerfectSquare(this)};Integer$2.prototype._integerNthRoot=function(t){return new Integer$2(SmallBigInt.BigInt(primeFactor._integerNthRoot(this.toBigInt(),t)))};Integer$2.prototype.bitLength=function(){return primeFactor._bitLength(this.toBigInt())};Integer$2.prototype.modInverse=function(t){return Expression.Integer.fromBigInt(primeFactor._modInverse(this.toBigInt(),t.toBigInt()))};Integer$2.prototype.modulo=function t(n){const a=this.remainder(n);return a.compareTo(Expression.ZERO)<0?a.add(n):a};Expression.Equality=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Equality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Equality.prototype.getS=function(){return"="};Expression.Inequality=function(t,n,a){BinaryOperation$1.call(this,t,n),this.sign=a};Expression.Inequality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Inequality.prototype.getS=function(){return this.sign};function AdditionIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}AdditionIterator.prototype=Object.create(Iterator.prototype);AdditionIterator.prototype.next=function(){return this.value=this.e instanceof Addition$1?this.e.b:this.e,this.e=this.e instanceof Addition$1?this.e.a:void 0,this};function MultiplicationIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}MultiplicationIterator.prototype=Object.create(Iterator.prototype);MultiplicationIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e,this.e=this.e instanceof Multiplication$1?this.e.a:null,this};Expression.prototype.summands=function(){return new AdditionIterator(this)};Expression.prototype.factors=function(){return new MultiplicationIterator(this)};var splitX=function(t){var n=void 0,a=void 0,l=void 0,u=void 0;for(var c of t.summands()){var p=0;for(var d of c.factors()){var Q=d,Ct=getBase(d);getExponent(d);var ar=Ct instanceof Expression.Symbol?Ct.toString():"";ar==="X"&&p===0?(p=1,u=Q):isScalar(Q)?n=n==null?Q:Q.multiply(n):(p===0&&(l=l==null?Q:Q.multiply(l)),p===1&&(a=a==null?Q:Q.multiply(a)))}}return n=n??Expression.ONE,{s:n,l:a,r:l,x:u}};Expression.splitX=splitX;var groupX=function(t,n){var a=splitX(t),l=splitX(n),u=a.s,c=a.l,p=a.r,d=l.s,Q=l.l,Ct=l.r;if(p==null&&Ct==null&&a.x.equals(l.x))return c=c??new IdentityMatrix("I"),Q=Q??new IdentityMatrix("I"),new Multiplication$1(u.multiply(c).add(d.multiply(Q)),a.x);if(c==null&&Q==null&&a.x.equals(l.x))return p=p??new IdentityMatrix("I"),Ct=Ct??new IdentityMatrix("I"),new Multiplication$1(a.x,u.multiply(p).add(d.multiply(Ct)))},getExpressionWithX=function(t){if(t instanceof Division$1)if(t.getDenominator()instanceof Expression.Integer){t=t.getNumerator();//!
}else return{withX:void 0,withoutX:void 0};var n=void 0,a=void 0;for(var l of t.summands()){var u=l,c=!1;for(var p of l.factors()){var d=p,Q=getBase(d);//!new2019-12-03
if(Q instanceof Addition$1&&getExponent(d).isNegative()){var Ct=null;for(var ar of t.summands())ar!==l&&(Ct=Ct==null?ar:Ct.add(ar));var en=getExponent(d).negate(),tn=Ct.multiply(Q.pow(en)).add(l.multiply(new Expression.Exponentiation(Q,en))),on=tn.transformEquality(Expression.ZERO),cn=getExponent(on.a)instanceof Expression.Symbol?on.a:getBase(on.a),gn=Polynomial$1.toPolynomial(Q,cn).divideAndRemainder(Polynomial$1.toPolynomial(on.a.subtract(on.b),cn)).remainder.calcAt(cn),Cn=gn instanceof Expression.Matrix?gn.determinant():null;if(!Expression.isConstant(Cn))return{withX:void 0,withoutX:void 0};if(Cn.equals(Expression.ZERO))return{withX:Expression.ZERO,withoutX:Expression.ONE};return getExpressionWithX(tn);//!hack
}//!
//!2020-06-14
if(Q instanceof MatrixSymbol&&getExponent(d).isNegative()){var en=getExponent(d).negate(),tn=l.b.equals(d)?t.multiply(Q.pow(en)):Array.from(Q.pow(en).multiply(l).factors()).length<Array.from(l.factors()).length?Q.pow(en).multiply(t):null;if(tn!=null)return getExpressionWithX(tn)}if(Q instanceof Expression.Division){//! 2023-02-12  (X/9) TODO: ???
if(Q.getDenominator()instanceof Expression.Integer)return getExpressionWithX(Q.getDenominator().multiply(t))}//!
if(!(Q instanceof Integer$2)&&!(Q instanceof Expression.Symbol)&&!(Q instanceof Expression.Matrix)&&!(Q instanceof NthRoot)){if(Q instanceof Expression.Determinant&&Q.a.toString()==="X")return{withX:null,withoutX:null};if(Expression.has(Q,Expression.MatrixSymbol))throw new RangeError("NotSupportedError")}if(Q instanceof Expression.Symbol){var ex=Q.toString();if(ex==="X"){if(c)return{withX:null,withoutX:null};c=!0}}}if(c)if(n!=null){if(n=groupX(n,u),n==null)return{withX:null,withoutX:null}}else n=u;c||(a=a==null?u.negate():a.subtract(u))}return{withX:n,withoutX:a}},isConstant$1=function(t){return t instanceof Expression.BinaryOperation?isConstant$1(t.b)&&isConstant$1(t.a):t instanceof Expression.Integer||t instanceof Expression.PolynomialRootSymbol?!0:t instanceof Expression.ExpressionWithPolynomialRoot?isConstant$1(t.e):t instanceof Expression.ExpressionPolynomialRoot?!0:t instanceof Expression.Symbol?t===Expression.E||t===Expression.PI:t instanceof Expression.Complex?!0:t instanceof Expression.NthRoot||t instanceof Expression.Sin||t instanceof Expression.Cos||t instanceof Expression.Arctan?isConstant$1(t.a):t instanceof Expression.Radians?isConstant$1(t.value):t instanceof Expression.Logarithm?isConstant$1(t.a):t===Expression.E||t===Expression.PI};Expression.isConstant=isConstant$1;Expression.getMultivariatePolynomial=function(t){if(!(t instanceof Expression.Division)){var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if((n instanceof NthRoot||n instanceof Integer$2||n instanceof Expression.Complex)&&(n=void 0),n!=null){n instanceof Expression.Addition&&(n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v);var a=getReplacement(t,n);if(!a.equals(n)&&(t=substitute(t,n,a,inverseReplacement(a,n)),t instanceof Expression.Division&&t.b instanceof Expression.Integer)){t=t.a;//!
}var l=Polynomial$1.toPolynomial(t,n);if(l.getDegree()===0){console.warn("Expression.getMultivariatePolynomial");return}for(var u=0;u<=l.getDegree();u+=1){var c=l.getCoefficient(u);if(!isConstant$1(c)){var p=Expression.getMultivariatePolynomial(c);if(p==null)return}}return{p:l.map(function(d){return substitute(d,n,inverseReplacement(a,n),a)}),v:inverseReplacement(a,n)}}}};Expression.isSingleVariablePolynomial=function(t){var n=Expression.getMultivariatePolynomial(t);if(n==null)return!1;for(var a=n.p,l=0;l<=a.getDegree();l+=1){var u=a.getCoefficient(l);if(!isConstant$1(u))return!1}return!0};Expression.prototype.transformEquality=function(t){var n=this.subtract(t),a=getExpressionWithX(n),l=a.withX,u=a.withoutX;if(l==null){if(n.getDenominator()instanceof Integer$2&&!(n.getNumerator()instanceof Expression.Matrix)&&!Expression.has(n,Expression.MatrixSymbol)&&!n.equals(Expression.ZERO)){typeof n.upgrade=="function"&&(n=n.upgrade());var c=new Expression.Symbol("x"),a={p:Polynomial$1.toPolynomial(n.getNumerator(),c),v:c};if((a.p.getDegree()===0||Expression.has(n,Expression.Function))&&(a=Expression.getMultivariatePolynomial(n.getNumerator())),a!=null&&a.v instanceof Expression.Symbol){var p=a.p,d=a.v,Q=Matrix$1.Zero(1,p.getDegree()+1).map(function(ox,lx,cx){return p.getCoefficient(p.getDegree()-cx)});return new Expression.NoAnswerExpression(new Expression.Matrix(Q),"polynomial-roots",{polynomial:p,variable:d})}}if(n instanceof Expression.Matrix&&this instanceof Expression.Matrix&&(t instanceof Expression.Matrix||t instanceof Expression.IdentityMatrix))return Expression.SystemOfEquations.from([{left:this,right:t}]);{//!new 2019-11-27
return Expression.SystemOfEquations.from([{left:this,right:t}])}}u==null&&(u=Expression.ZERO);var Ct=l,ar=u,en=!1,tn=l;for(var on of tn.factors()){var cn=on,gn=getBase(cn),Cn=!1;if(gn instanceof Expression.Symbol){var ex=gn.toString();ex==="X"&&(Cn=!0,en=!0)}if(Cn)Ct=cn;else{if(cn instanceof Expression.Matrix&&(cn.matrix.cols()!==cn.matrix.rows()||cn.determinant().equals(Expression.ZERO)))return Expression.SystemOfEquations.from([{left:l,right:u}]);var ix=cn.inverse();en?ar=ix.multiply(ar):ar=ar.multiply(ix)}}return Ct instanceof Expression.Exponentiation&&getExponent(Ct).equals(Expression.ONE.negate())&&ar instanceof Expression.Matrix&&!ar.determinant().equals(Expression.ZERO)&&(Ct=Ct.inverse(),ar=ar.inverse()),new Expression.Equality(Ct,ar)};Expression.prototype.transformInequality=function(t,n){var a=this;return new Expression.Inequality(a,t,n)};Expression.simplifications=[];Expression.prototype.simplifyExpression=function(){for(var t=this,n=0;n<Expression.simplifications.length;n+=1)t=Expression.simplifications[n](t);return t};Expression.prototype.isExact=function(){return!Expression.has(this,Expression.PolynomialRootSymbol)&&!Expression.has(this,Expression.ExpressionPolynomialRoot)};Expression.PI=new Expression.Symbol("");Expression.E=new Expression.Symbol("");Expression.I=new Expression.Symbol("");Expression.CIRCLE=new Expression.Symbol("");Expression.INFINITY=new Expression.Symbol("");Expression.prototype.addPosition=function(){return this};//! 2018-09-30
Expression.SystemOfEquations=function(t){throw new TypeError};Expression.SystemOfEquations.from=function(t){return new Expression.NoAnswerExpression({matrix:null},"system-of-equations",{equations:t})};Expression.ExponentiationOfMinusOne=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfMinusOne.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfMinusOne.prototype.divideExpression=function(t){return t.multiply(this)};Expression.ExponentiationOfImaginaryUnit=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfImaginaryUnit.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfImaginaryUnit.prototype.divideExpression=function(t){var n=getConjugate(getBase(this)).pow(getExponent(this));return t.multiply(n).divide(this.multiply(n))};Expression.ExponentiationOfQuadraticInteger=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfQuadraticInteger.prototype=Object.create(Expression.ExponentiationOfImaginaryUnit.prototype);Expression.ExponentiationOfQuadraticInteger.prototype.divideExpression=function(t){return Expression.Exponentiation.prototype.divideExpression.call(this,t)};//!
Expression.Division.prototype.negate=function(){return new Expression.Division(this.a.negate(),this.b)};Expression.Polynomial=function(t){this.polynomial=t};Expression.Polynomial.prototype=Object.create(Expression.prototype);Expression.Polynomial.prototype.gcd=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial));if(t.equals(Expression.ZERO))return this;throw new TypeError};Expression.Polynomial.prototype.equals=function(t){return t.equalsPolynomial(this)};Expression.Polynomial.prototype.equalsPolynomial=function(t){return t.polynomial.equals(this.polynomial)};Expression.prototype.equalsPolynomial=function(t){return t.polynomial.equals(Polynomial$1.ZERO)&&this.equals(Expression.ZERO)||t.polynomial.getDegree()===0&&this.equals(t.polynomial.getCoefficient(0))};Expression.Polynomial.prototype.multiply=function(t){return t===Expression.ONE?this:t.multiplyPolynomial(this)};Expression.Polynomial.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.multiply(this.polynomial))};Expression.Division.prototype.multiplyPolynomial=function(t){return this.multiplyExpression(t)};Expression.Integer.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.scale(this))};Expression.Polynomial.prototype.multiplyInteger=function(t){return new Expression.Polynomial(this.polynomial.scale(t))};Expression.Polynomial.prototype.divide=function(t){return t.equals(Expression.ONE)?this:t.equals(Expression.ONE.negate())?this.negate():t instanceof Expression.Integer?new Expression.Polynomial(this.polynomial.scale(t.inverse())):t.dividePolynomial(this)};Expression.Division.prototype.dividePolynomial=function(t){return this.divideExpression(t)};Expression.Polynomial.prototype.dividePolynomial=function(t){var n=this,a=t.polynomial,l=n.polynomial;if(a.getDegree()<0&&l.getDegree()>=0)return new Expression.Polynomial(a);var u=a.divideAndRemainder(l);if(u.remainder.equals(Polynomial$1.ZERO))return new Expression.Polynomial(u.quotient);var c=a.getContent();if(!c.getDenominator().equals(Expression.ONE))return n.multiply(c.getDenominator()).dividePolynomial(t.multiply(c.getDenominator()));var p=l.getContent();if(!p.getDenominator().equals(Expression.ONE))return n.multiply(p.getDenominator()).dividePolynomial(t.multiply(p.getDenominator()));var d=Polynomial$1.polynomialGCD(a,l);return n.polynomial.equals(d)?new Expression.Polynomial(t.polynomial.divideAndRemainder(d).quotient):new Expression.Division(new Expression.Polynomial(t.polynomial.divideAndRemainder(d).quotient),new Expression.Polynomial(n.polynomial.divideAndRemainder(d).quotient))};Expression.Polynomial.prototype.negate=function(){return new Expression.Polynomial(this.polynomial.negate())};Expression.Polynomial.prototype.add=function(t){return t.addPolynomial(this)};Expression.Polynomial.prototype.addPolynomial=function(t){return new Expression.Polynomial(t.polynomial.add(this.polynomial))};Expression.prototype.addPolynomial=function(t){if(this.equals(Expression.ZERO))return t;throw new RangeError};Expression.Polynomial.prototype.getPrecedence=function(){for(var t=this.polynomial.getDegree(),n=0,a=0;a<=t;a+=1)this.polynomial.getCoefficient(a).equals(Expression.ZERO)||(n+=1);return(n<2?this.polynomial.getLeadingCoefficient().equals(Expression.ONE)?new Expression.Symbol("x"):new Expression.Multiplication(Expression.ONE,Expression.ONE):new Expression.Addition(Expression.ONE,Expression.ONE)).getPrecedence()};Expression.Polynomial.prototype.modulo=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.divideAndRemainder(t.polynomial).remainder);throw new TypeError};Expression.Polynomial.prototype.modInverse=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.primitivePart().modularInverse(t.polynomial).primitivePart().scale(this.polynomial.getContent().inverse()));throw new TypeError};Expression.Polynomial.prototype.isDivisibleBy=function(t){if(t instanceof Expression.Polynomial)return this.polynomial.isDivisibleBy(t.polynomial);throw new TypeError};Expression.unique=function(t){for(var n=[],a=0;a<t.length;a+=1){for(var l=t[a],u=!1,c=0;c<n.length;c+=1)n[c]===l&&(u=!0);u||n.push(l)}return n};Expression.Multiplication.prototype.compare4Multiplication=function(t){var n=this;if(t instanceof Addition$1)return 0-t.compare4Multiplication(n);for(var a=n.factors(),l=t.factors(),u=a.next().value,c=l.next().value;u!=null&&c!=null;){var p=u.compare4Multiplication(c);if(p!==0)return p;u=a.next().value,c=l.next().value}return u!=null?1:c!=null?-1:0};Expression.Multiplication.compare4Addition=function(t,n){for(var a=t.factors(),l=n.factors(),u=a.next().value,c=l.next().value;u!=null&&c!=null;){var p=u.compare4Addition(c);if(p!==0)return p;u=a.next().value,c=l.next().value}return u!=null?1:c!=null?-1:0};Expression.Multiplication.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4Addition=function(t){if(t instanceof Expression.Function)return this.name<t.name?-1:t.name<this.name?1:this.a.compare4Addition(t.a);if(t instanceof Multiplication$1){var n=this;return Multiplication$1.compare4Addition(n,t)}if(t instanceof Addition$1){var n=this;return Addition$1.compare4Addition(n,t)}return 1};Expression.NthRoot.prototype.compare4Addition=function(t){return t.compare4AdditionNthRoot(this)};Expression.prototype.compare4AdditionNthRoot=function(t){return Expression.Function.prototype.compare4Addition.call(t,this)};Expression.NthRoot.prototype.compare4AdditionNthRoot=function(t){return this.n-t.n||t.a.compare4Addition(this.a)};Expression.prototype.compare4AdditionSymbol=function(t){var n=this;return n instanceof Expression.Function?-1:Expression.prototype.compare4Addition.call(t,n)};Expression.Symbol.prototype.compare4Addition=function(t){return t.compare4AdditionSymbol(this)};Expression.Symbol.prototype.compare4AdditionSymbol=function(t){var n=this;return t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0};Expression.Function.prototype.compare4Multiplication=function(t){return t instanceof Expression.NthRoot?1:t instanceof Expression.Function?this.name<t.name?-1:t.name<this.name?1:getBase(this.a).compare4Multiplication(getBase(t.a))||getExponent(this.a).compare4AdditionSymbol(getExponent(t.a)):t instanceof Expression.MatrixSymbol?-1:1};Expression.Function.prototype.compare4MultiplicationInteger=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4MultiplicationSymbol=function(t){return-1};Expression.Function.prototype.compare4MultiplicationNthRoot=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.pow=function(t){if(this instanceof Expression.NthRoot)return Expression.prototype.pow.call(this,t);if(t instanceof Expression.Integer)return t.compareTo(Expression.ONE)>0?new Expression.Exponentiation(this,t):Expression.prototype.pow.call(this,t);if(isIntegerOrN(t)&&t instanceof Expression.Symbol)return new Expression.Exponentiation(this,t);throw new RangeError("NotSupportedError")};function ExpressionWithCondition(t,n){this.e=t,this.condition=n}ExpressionWithCondition.prototype=Object.create(Expression.prototype);ExpressionWithCondition.prototype.toString=function(){return this.e.toString()+"; "+this.condition.toString()};ExpressionWithCondition.prototype.toMathML=function(t){return this.e.toMathML(t)+"<mtext>; </mtext>"+this.condition.toMathML(t)};ExpressionWithCondition.prototype.multiplyExpression=ExpressionWithCondition.prototype.multiplyMatrix=function(t){return new ExpressionWithCondition(t.multiply(this.e),this.condition)};ExpressionWithCondition.prototype.multiply=function(t){return t.multiplyExpressionWithCondition(this)};ExpressionWithCondition.prototype.multiplyExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.multiplyExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.multiply(this),t.condition)};ExpressionWithCondition.prototype.add=function(t){return t.addExpressionWithCondition(this)};ExpressionWithCondition.prototype.addExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.addExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.add(this),t.condition)};Expression.ExpressionWithCondition=ExpressionWithCondition;Addition$1.prototype.compare4MultiplicationNthRoot=function(t){return 1};Multiplication$1.prototype.compare4MultiplicationNthRoot=function(t){return-1};function Cases(t){this.cases=t}Cases.prototype=Object.create(Expression.prototype);Cases.prototype._cross=function(t,n){for(var a=this,l=[],u=0;u<t.cases.length;u+=1)for(var c=0;c<a.cases.length;c+=1){var p=t.cases[u].condition.and(a.cases[c].condition);if(!p.isFalse()){var d=n(t.cases[u].e,a.cases[c].e);l.push(new ExpressionWithCondition(d,p))}}return new Expression.Cases(l)};Cases.prototype.multiply=function(t){return t.multiplyCases(this)};Cases.prototype.multiplyCases=function(t){return this._cross(t,function(n,a){return n.multiply(a)})};Cases.prototype.toString=function(){for(var t="",n=0;n<this.cases.length;n+=1)t+="("+this.cases[n].toString()+"),";return"{{"+t.slice(0,-1)+"}}"};Expression.prototype.multiplyCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.multiply(n)}))};Cases.prototype.multiplyExpression=Cases.prototype.multiplyMatrix=function(t){return new Cases(this.cases.map(function(n){return t.multiply(n)}))};Cases.prototype.add=function(t){return t.addCases(this)};Cases.prototype.addCases=function(t){return this._cross(t,function(n,a){return n.add(a)})};Expression.prototype.addCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.add(n)}))};Cases.prototype.equals=function(t){var n=this;if(n===t)return!0;if(!(t instanceof Cases))return!1;throw new TypeError};Cases.prototype.toMathML=function(t){var n="";n+="<mrow>",n+="<mo>{</mo>",n+='<mtable columnalign="left">';for(var a=0;a<this.cases.length;a+=1){var l=this.cases[a];n+="<mtr>",n+="<mtd>",n+=l.e.toMathML(t),n+="</mtd>",n+="<mtd>",n+=l.condition.toMathML(t),n+="</mtd>",n+="</mtr>"}return n+="</mtable>",n+="</mrow>",n};Expression.Cases=Cases;Expression.Factorial=function(t){this.n=t};Expression.Factorial.prototype=Object.create(Expression.prototype);Expression.prototype.factorial=function(){var t=this;if(!(t instanceof Expression.Integer))throw new TypeError("NotSupportedError");if(t.compareTo(Expression.ZERO)<0)throw new TypeError("NotSupportedError");for(var n=Expression.ONE,a=t;a.compareTo(Expression.ONE)>=0;a=a.subtract(Expression.ONE))n=n.multiply(a);return n};Expression.prototype._abs=function(){return this.isNegative()?this.negate():this};Expression.Comma=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Comma.prototype=Object.create(BinaryOperation$1.prototype);Expression.Comma.prototype.getS=function(){return", "};Expression.prototype.transformComma=function(t){var n=this,a=function(c){if(c instanceof Expression.Equality)return[{left:c.a,right:c.b}];if(c instanceof Expression.NoAnswerExpression&&c.name==="system-of-equations")return c.second.equations;if(c instanceof Expression.Inequality)return[{left:c.a,right:c.b,sign:c.sign}];if(c instanceof Expression.NoAnswerExpression&&c.name==="polynomial-roots"){var p=c.second.polynomial.calcAt(c.second.variable);return[{left:p,right:Expression.ZERO}]}return null},l=a(n),u=a(t);if(l!=null&&u!=null)return Expression.SystemOfEquations.from(l.concat(u));if(l==null&&u==null)return new Expression.List((n instanceof Expression.List?n.list:[n]).concat(t instanceof Expression.List?t.list:[t]));throw new TypeError("NotSupportedError")};Expression.List=function(t){this.list=t};Expression.List.prototype=Object.create(Expression.prototype);Expression.List.prototype.min=function(){return this.list.reduce((t,n)=>t.compareTo(n)>0?n:t)};Expression.List.prototype.max=function(){return this.list.reduce((t,n)=>t.compareTo(n)<0?n:t)};Expression.List.prototype.gcd=function(){return this.list.reduce((t,n)=>t.gcd(n))};function atan2(t,n){if(n.equals(Expression.ZERO)){if(t.equals(Expression.ZERO))throw new RangeError;const l=Expression.PI.divide(Expression.TWO);return t.isNegative()?l.negate():l}const a=t.divide(n).arctan();return n.isNegative()?t.isNegative()?a.subtract(Expression.PI):a.add(Expression.PI):a}Expression.prototype.complexArgument=function(){var t=Expression.getComplexNumberParts(this);if(t==null)throw new TypeError;return atan2(t.imaginary,t.real)};Expression.Logarithm=function(t){Expression.Function.call(this,"log",t)};Expression.Logarithm.prototype=Object.create(Expression.Function.prototype);Expression.prototype.logarithm=function(){var t=this;if(t instanceof Expression.Integer){if(t.compareTo(Expression.ZERO)<=0){if(t.compareTo(Expression.ZERO)===0)throw new TypeError("ArithmeticException");return t.equals(Expression.ONE.negate())?Expression.I.multiply(Expression.PI):t.abs().logarithm().add(t.divide(t.abs()).logarithm())}if(t.compareTo(Expression.ONE)===0)return Expression.ZERO;var n=integerPrimeFactor(t);if(n.equals(t))return new Expression.Logarithm(t);var a=primeFactor._countTrailingZeros(t.toBigInt(),n.toBigInt());return n.logarithm().multiply(Integer$2.fromNumber(a)).add(t.truncatingDivide(n._pow(a)).logarithm())}if(t instanceof Expression.Division){var l=t.getNumerator(),u=t.getDenominator();if(u instanceof Integer$2||isConstant$1(l))return l.logarithm().subtract(u.logarithm())}if(t instanceof Expression.Multiplication){var lx=t.a;if(isConstant$1(lx))return lx.logarithm().add(t.divide(lx).logarithm());var lx=getConstant$1(t);if(lx instanceof Integer$2&&!lx.equals(Expression.ONE))return lx.logarithm().add(t.divide(lx).logarithm());if(t.b instanceof Expression.MatrixSymbol)return t.a.logarithm().add(t.b.logarithm())}if(t instanceof Expression.ExpressionWithPolynomialRoot&&(t=t.upgrade()),t instanceof Expression.ExpressionPolynomialRoot){var c=t.root.upgrade().getAlpha().polynomial.getGCDOfTermDegrees();if(c>1)return t._pow(c).logarithm().divide(Expression.Integer.fromNumber(c))}if(t instanceof Expression.Symbol)return t===Expression.E?Expression.ONE:new Expression.Logarithm(t);if(t instanceof Expression.NthRoot){var p=t.a,l=t.n;if(p instanceof Expression.Integer&&p.compareTo(Expression.ONE)>0||isPositive(p))return p.logarithm().divide(Expression.Integer.fromNumber(l))}if(t instanceof Expression.Exponentiation){var d=getBase(t),Q=getExponent(t);if(d===Expression.E)return Q;if(d instanceof Expression.MatrixSymbol&&Q instanceof Integer$2||d instanceof Expression.Integer)return d.logarithm().multiply(Q)}if(t instanceof Expression.Matrix){var Ct=t.matrix;if(Ct.isDiagonal())return new Expression.Matrix(Ct.map(function(dx,hx,fx){return hx===fx?dx.logarithm():Expression.ZERO}));var ar=Expression.getEigenvalues(Ct);if(ar.length===Ct.cols()){var en=Expression.getEigenvectors(Ct,ar);if(en.filter(dx=>dx!=null).length===Ct.cols()){Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-diagonalization",new Expression.Matrix(Ct)));var tn=Expression.diagonalize(Ct,ar,en);return new Expression.Matrix(tn.T).multiply(new Expression.Matrix(tn.L).logarithm()).multiply(new Expression.Matrix(tn.T_INVERSED))}else{var tn=Expression.getFormaDeJordan(Ct,ar),on=tn.J,cn=function(hx){for(var fx=hx.map(function(vx,bx,xx){return bx!==xx?vx.divide(hx.e(bx,bx)):Expression.ZERO}),ux=hx.map(function(vx,bx,xx){return bx===xx?vx.logarithm():Expression.ZERO}),gx=hx.cols(),yx=1;yx<gx;yx+=1){var _x=fx.pow(yx).scale(Expression.ONE.divide(Expression.Integer.fromNumber(yx)));ux=yx%2===1?ux.add(_x):ux.subtract(_x)}return ux},gn=cn(on);return Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-Jordan-canonical-form",new Expression.Matrix(Ct))),new Expression.Matrix(tn.P).multiply(new Expression.Matrix(gn)).multiply(new Expression.Matrix(tn.P_INVERSED))}}}if(t instanceof Expression.Addition){var lx=getConstant$1(t);if(!lx.equals(Expression.ONE))return lx.logarithm().add(t.divide(lx).logarithm());if(t.a instanceof Expression.Symbol&&t.b instanceof Expression.Integer)return new Expression.Logarithm(t);var Cn=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(Cn instanceof Expression.Symbol){var n=Polynomial$1.toPolynomial(t,Cn),lx=n.getContent();if(lx.isNegative()&&(lx=lx.negate()),isPositive(lx)&&!lx.equals(Expression.ONE))return t.divide(lx).logarithm().add(lx.logarithm());var ex=n.getSquareFreePolynomial(),l=Math.floor(n.getDegree()/ex.getDegree());if(l>1&&ex.calcAt(Cn)._pow(l).equals(t))return Expression.Integer.fromNumber(l).multiply(ex.calcAt(Cn).logarithm())}if(isGoodPolynomial(t))return new Expression.Logarithm(t)}var ix=QuadraticInteger.toQuadraticInteger(t);if(ix!=null&&(Number(ix.a.toString())>0||Number(ix.b.toString())>0)&&ix.D>0&&(ix.isValid()||ix.D===5||ix.D===37)){var ax=ix.primeFactor();if(ax.toExpression().equals(Expression.TWO)&&(ix=ix.truncatingDivide(ax),ax=ix.primeFactor()),!ax.equals(ix))return ax.toExpression().logarithm().add(t.divide(ax.toExpression()).logarithm());if(Number(ix.a.toString())>0&&Number(ix.b.toString())>0)return new Expression.Logarithm(t);if(Number(ix.a.toString())<0||Number(ix.b.toString())<0){var ox=ix.conjugate().toExpression();return ox.isNegative()&&(ox=ox.negate()),t.multiply(ox).logarithm().subtract(ox.logarithm())}}if(t instanceof Addition$1&&t.b instanceof NthRoot&&t.a instanceof NthRoot){var c=nthRootCommonFactor(t.a,t.b);if(!c.equals(Expression.ONE)&&isPositive(c))return c.logarithm().add(t.divide(c).logarithm())}var lx=Expression.getComplexNumberParts(t);if(lx!=null&&!lx.imaginary.equals(Expression.ZERO)){const dx=atan2(lx.imaginary,lx.real);return t.divide(Expression.I.multiply(dx).exp()).logarithm().add(Expression.I.multiply(dx))}if(Expression.isConstant(t)){var cx=simpleDivisor(t);if(!cx.equals(t))return cx.logarithm().add(t.divide(cx).logarithm())}throw new TypeError("NotSupportedError")};//!new
NthRoot.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;Expression.Symbol.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;//!new
Expression.prototype.complexConjugate=function(){throw new TypeError("NotSupportedError")};Expression.Integer.prototype.complexConjugate=function(){return this};Expression.Division.prototype.complexConjugate=function(){return this.getNumerator().complexConjugate().divide(this.getDenominator().complexConjugate())};Expression.Multiplication.prototype.complexConjugate=function(){return this.a.complexConjugate().multiply(this.b.complexConjugate())};Expression.Addition.prototype.complexConjugate=function(){return this.a.complexConjugate().add(this.b.complexConjugate())};Expression.Function.prototype.complexConjugate=function(){if(this.a instanceof Integer$2||Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Matrix.prototype.complexConjugate=function(){var t=this;return new Expression.Matrix(t.matrix.map(n=>n.complexConjugate()))};Expression.Symbol.prototype.complexConjugate=function(){return this===Expression.E||this===Expression.PI||Expression.isReal(this)?this:new Expression.ComplexConjugate(this)};Expression.Exponentiation.prototype.complexConjugate=function(){if(getBase(this)===Expression.E)return getBase(this).pow(getExponent(this).complexConjugate());if(isIntegerOrN(getExponent(this)))return getBase(this).complexConjugate().pow(getExponent(this));if(isMatrixSymbolTranspose(this))return new Expression.Exponentiation(getBase(this).complexConjugate(),getExponent(this));if(Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Logarithm.prototype.complexConjugate=function(){return this.a.complexConjugate().logarithm()};Expression.ComplexConjugate=function(t){Expression.Function.call(this,"conjugate",t)};Expression.ComplexConjugate.prototype=Object.create(Expression.Function.prototype);Expression.ComplexConjugate.prototype.complexConjugate=function(){return this.a};Expression.ComplexArgument=function(t){Expression.Function.call(this,"arg",t)};Expression.ComplexArgument.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix=function(t,n){Expression.Function.call(this,"augment",null),this.a=t,this.b=n};Expression.AugmentedMatrix.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix.prototype.toString=function(t){return"("+this.a.toString(t)+"|"+this.b.toString(t)+")"};Expression.AugmentedMatrix.prototype.toMathML=function(t){return"<mrow><mo>(</mo>"+this.a.toMathML(t)+"<mo>|</mo>"+this.b.toMathML(t)+"<mo>)</mo></mrow>"};Expression.Abs=function(t){Expression.Function.call(this,"abs",t)};Expression.Abs.prototype=Object.create(Expression.Function.prototype);Expression.Abs.prototype.toMathML=function(t){return'<mrow><mo stretchy="false">|</mo>'+this.a.toMathML(t)+'<mo stretchy="false">|</mo></mrow>'};Expression.Abs.prototype.complexConjugate=function(){return this};Expression.Abs.prototype.pow=function(t){return t instanceof Expression.Integer?this.a.pow(t).abs():Expression.Function.prototype.pow.call(this,t)};Expression.Matrix.prototype.pseudoinverse=function(){if(this.matrix.isSquare()){const n=this.matrix.determinant();if(Expression.isConstant(n)&&!n.equals(Expression.ZERO))return new Expression.Matrix(this.matrix.inverse())}Expression.callback!=null&&Expression.callback(new Expression.Event("pseudoinverse",this));const t=Expression.SVD(this.matrix);return new Expression.Matrix(t.Vstar.conjugateTranspose().multiply(t.Sigma.map(n=>n.equals(Expression.ZERO)?Expression.ZERO:n.inverse()).transpose()).multiply(t.U.conjugateTranspose()))};Expression.Pseudoinverse=function(t){Expression.Function.call(this,"pseudoinverse",t)};Expression.Pseudoinverse.prototype=Object.create(Expression.Function.prototype);Expression.prototype.factor=function(){var t=this,n=new Expression.Symbol("x"),a=Polynomial$1.toPolynomial(t,n),l=[];l.push(Polynomial$1.of(a.getContent())),a=a.primitivePart();function u(c){for(var p=null;c.getDegree()>1&&(p=c.factorize())!=null&&!p.equals(c);)u(p),c=c.divideAndRemainder(p,"throw").quotient;c.getDegree()>=0&&l.push(c)}return u(a),l.map(c=>new Expression.Polynomial(c)).reduce((c,p)=>new Expression.Multiplication(c,p))};function Derivative(t,n){Expression.Symbol.call(this,t),this.variable=n}Derivative.prototype=Object.create(Expression.Symbol.prototype);Expression.Derivative=Derivative;Expression.prototype.derivative=function(t=void 0){if(t==null)throw new RangeError;var n=this;if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(u=>u.derivative(t)));if(n instanceof Expression.Exponentiation){if(getBase(n)===Expression.E)return n.multiply(getExponent(n).derivative(t));if(getExponent(n)instanceof Expression.Integer)return getExponent(n).multiply(getBase(n).pow(getExponent(n).subtract(Expression.ONE))).multiply(getBase(n).derivative(t));if(getExponent(n).equals(t)&&Expression.isConstant(getBase(n)))return n.multiply(getBase(n).logarithm())}if(n instanceof Expression.Symbol)return n.symbol.toLowerCase()===n.symbol?n.equals(t)?Expression.ONE:Expression.ZERO:new Expression.Derivative(n);if(n instanceof Expression.Multiplication)return n.a.derivative(t).multiply(n.b).add(n.a.multiply(n.b.derivative(t)));if(n instanceof Expression.Addition)return n.a.derivative(t).add(n.b.derivative(t));if(n instanceof Expression.Division){var a=n.getNumerator(),l=n.getDenominator();return l.multiply(a.derivative(t)).subtract(a.multiply(l.derivative(t))).divide(l.multiply(l))}if(n instanceof Expression.Sin)return n.a.cos().multiply(n.a.derivative(t));if(n instanceof Expression.Cos)return n.a.sin().negate().multiply(n.a.derivative(t));if(n instanceof Expression.Logarithm)return n.a.derivative(t).divide(n.a);if(Expression.isConstant(n))return Expression.ZERO;throw new RangeError("NotSupportedError")};function GF2(t){this.a=t}GF2.prototype=Object.create(Expression.prototype);Expression.GF2=GF2;Expression.GF2.prototype.toString=function(t){return"GF2("+this.a.toString(Expression.setTopLevel(!0,t))+")"};function GF2Value(t){this.value=t}Expression.GF2Value=GF2Value;GF2Value.prototype=Object.create(Expression.prototype);Expression.GF2Value.prototype.equals=function(t){if(Expression.ZERO===t){return this.value===0;//!
}return!1};Expression.GF2Value.prototype.negate=function(){return new GF2Value(this.value===0?0:2-this.value)};GF2Value.prototype.add=function(t){if(t===Expression.ZERO)return new GF2Value(this.value);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value-2+t.value;return new GF2Value(n>=0?n:n+2)};GF2Value.prototype.multiply=function(t){if(t===Expression.ZERO)return new GF2Value(0);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value*t.value;return new GF2Value(n-2*Math.floor(n/2))};GF2Value.prototype.divide=function(t){return new GF2Value(this.value)};Expression.prototype.GF2=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.map(function(n,a,l){if(!(n.equals(Expression.ZERO)||n.equals(Expression.ONE)))throw new TypeError;return new Expression.GF2Value(n.equals(Expression.ZERO)?0:1)}))};GF2Value.prototype.toString=function(t){return this.value.toString()};var Integer$1=Expression.Integer,Addition=Expression.Addition,Multiplication=Expression.Multiplication,Division=Expression.Division,Exponentiation=Expression.Exponentiation,BinaryOperation=Expression.BinaryOperation,separateSinCos=function(t){if(!(t instanceof Multiplication))throw new TypeError;var n=void 0,a=void 0,l=t;for(var u of l.factors()){var c=u;c instanceof Sin||c instanceof Cos||c instanceof Exponentiation&&(c.a instanceof Sin||c.a instanceof Cos)?n=n==null?c:n.multiply(c):a=a==null?c:a.multiply(c)}return{sinCos:n??Expression.ONE,other:a??Expression.ONE}},expandMainOp=function(t){return t},contractTrigonometryInternal=function(t,n){var a=t.a,l=n.a;if(t instanceof Sin&&n instanceof Sin)return a.subtract(l).cos().divide(Expression.TWO).subtract(a.add(l).cos().divide(Expression.TWO));if(t instanceof Sin&&n instanceof Cos)return a.add(l).sin().divide(Expression.TWO).add(a.subtract(l).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Sin)return a.add(l).sin().divide(Expression.TWO).subtract(a.subtract(l).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Cos)return a.subtract(l).cos().divide(Expression.TWO).add(a.add(l).cos().divide(Expression.TWO));throw new TypeError},contractTrigonometryPower=function(t){var n=t.a;if(!(n instanceof Sin)&&!(n instanceof Cos))return t;var a=contractTrigonometryInternal(n,n).multiply(t.divide(n.multiply(n)));return contractTrigonometryRules(a.getNumerator()).divide(a.getDenominator())},contractTrigonometryProduct=function(t){for(var n=t.factors(),a=n.next().value,l=n.next().value,u=Expression.ONE,c=n.next().value;c!=null;)u=c.multiply(u),c=n.next().value;if(a instanceof Exponentiation)return a=contractTrigonometryPower(a),contractTrigonometryRules(a.multiply(l).multiply(u));if(l instanceof Exponentiation)return l=contractTrigonometryPower(l),contractTrigonometryRules(a.multiply(l).multiply(u));var p=contractTrigonometryInternal(a,l);return contractTrigonometryRules(p.multiply(u))},contractTrigonometryRules=function(t){var n=expandMainOp(t);if(n instanceof Exponentiation)return contractTrigonometryPower(n);if(n instanceof Multiplication){var a=separateSinCos(n),l=a.other,u=a.sinCos;if(u.equals(Expression.ONE)||u instanceof Sin||u instanceof Cos)return n;if(u instanceof Exponentiation)return expandMainOp(l.multiply(contractTrigonometryPower(u)));if(u instanceof Multiplication)return expandMainOp(l.multiply(contractTrigonometryProduct(u)));throw new TypeError}if(n instanceof Addition){var c=Expression.ZERO,p=n;for(var d of p.summands())d instanceof Multiplication||d instanceof Exponentiation?c=c.add(contractTrigonometryRules(d)):c=c.add(d);return c}return n},map$3=function(t,n){if(n instanceof Integer$1)return t(n);if(n instanceof Addition)return t(map$3(t,n.a).add(map$3(t,n.b)));if(n instanceof Multiplication)return t(map$3(t,n.a).multiply(map$3(t,n.b)));if(n instanceof Division)return t(map$3(t,n.a).divide(map$3(t,n.b)));if(n instanceof Exponentiation)return t(map$3(t,n.a).pow(map$3(t,n.b)));if(n instanceof Sin)return t(map$3(t,n.a).sin());if(n instanceof Cos)return t(map$3(t,n.a).cos());if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(function(a,l,u){return map$3(t,a)}));if(n instanceof Expression.Polynomial)return new Expression.Polynomial(n.polynomial.map(function(a,l){return map$3(t,a)}));if(n instanceof Expression.GF2Value)return n;if(n instanceof Expression.NthRoot)return t(n);if(n instanceof Expression.Negation||n instanceof Expression.Complex||n instanceof Expression.NonSimplifiedExpression||n instanceof Expression.Degrees||n instanceof Expression.Radians)return n;if(n instanceof Expression.Symbol)return t(n);if(n instanceof Expression.Arctan)return t(map$3(t,n.a).arctan());if(n instanceof Expression.Logarithm)return t(map$3(t,n.a).logarithm());if(n instanceof Expression.Determinant)return t(map$3(t,n.a).determinant());if(n instanceof Expression.Inequality)return t(map$3(t,n.a).transformInequality(map$3(t,n.b),n.sign));if(n instanceof Expression.ComplexConjugate)return t(map$3(t,n.a).complexConjugate());if(n instanceof Expression.Abs)return t(map$3(t,n.a).abs());throw new TypeError};Expression._map=map$3;var expandTrigonometryRulesInternal=function(t,n,a){if(a==="cos")return expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"cos")).subtract(expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"sin")));if(a==="sin")return expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"cos")).add(expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"sin")));throw new TypeError(a)},expandTrigonometryRules=function(t,n){if(t instanceof Addition)return expandTrigonometryRulesInternal(t.a,t.b,n);if(t instanceof Multiplication){var a=Expression.ONE;for(var l of t.factors())l instanceof Expression.Integer&&(a=a.multiply(l));var u=a,c=t.divide(a);if(!(u instanceof Integer$1))throw new TypeError;if(u.equals(Expression.ONE)){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}if(u.compareTo(Expression.ONE.negate())===0){if(n==="cos")return expandTrigonometryRules(c,n);if(n==="sin")return expandTrigonometryRules(c,n).negate()}var p=u.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate();return expandTrigonometryRulesInternal(p.multiply(c),u.subtract(p).multiply(c),n)}else if(t instanceof Division){var d=simplifyConstantValue(t,n);if(d!=null)return d;var u=t.a,c=t.b;if(u instanceof Addition)return expandTrigonometryRulesInternal(u.a.divide(c),u.b.divide(c),n)}if(t instanceof Expression.Symbol||t instanceof Expression.Exponentiation&&t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0||t instanceof Expression.Degrees||t instanceof Expression.Radians||t instanceof Expression.Complex||t instanceof Expression.Arctan){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}throw new TypeError},expandTrigonometry=function(t){return map$3(function(n){return n instanceof Sin?expandTrigonometryRules(n.a,"sin"):n instanceof Cos?expandTrigonometryRules(n.a,"cos"):n},t)};Expression._expandTrigonometry=expandTrigonometry;//!
var contractTrigonometry=function(t){return map$3(function(n){if(n instanceof Multiplication||n instanceof Exponentiation||n instanceof Addition){//! Addition - ?
return contractTrigonometryRules(n)}return n instanceof Division?contractTrigonometryRules(n.getNumerator()).divide(n.getDenominator()):n},t)},hasTrigonometry=function(t){return t instanceof BinaryOperation?hasTrigonometry(t.a)||hasTrigonometry(t.b):t instanceof Cos||t instanceof Sin},simplifyTrigonometry=function(t){if(!hasTrigonometry(t))return t;//!new
var n=null,a=null;if(Expression._map(function(c){if(c instanceof Expression.Sin||c instanceof Expression.Cos){var p=c.a;if(p instanceof Division){var d=p.getNumerator(),Q=p.getDenominator();if(!Q.equals(Expression.ONE))for(var Ct of d.summands()){var ar=Ct.gcd(Q);if(!ar.equals(Q))for(var en of Ct.factors())en instanceof Expression.Symbol&&en!==Expression.PI&&(a=Q.divide(ar),n=en)}}}return c},t),n!=null&&a!=null)return t=Expression._substitute(t,n,n.multiply(a),n.divide(a)),t=simplifyTrigonometry(t),t=Expression._substitute(t,n,n.divide(a),n.multiply(a)),t;//!
var l=t.getNumerator();l=expandTrigonometry(l),l=contractTrigonometry(l);var u=t.getDenominator();return u=expandTrigonometry(u),u=contractTrigonometry(u),l.divide(u)};Expression.Division.prototype.compare4Multiplication=function(t){return t instanceof Division?this.a.compare4Multiplication(t.a)||this.b.compare4Multiplication(t.b):-1};Expression.Division.prototype.compare4MultiplicationSymbol=function(){return 1};Expression.Division.prototype.compare4MultiplicationInteger=function(){return 1};Expression.Division.prototype.compare4MultiplicationNthRoot=function(){return 1};Expression.simplifyTrigonometry=simplifyTrigonometry;function Sin(t){Expression.Function.call(this,"sin",t)}Sin.prototype=Object.create(Expression.Function.prototype);var simplifyConstantValueInternal=function(t,n){if(n=n||Expression.ZERO,t>=360||t<=-360)throw new RangeError;if(t<0&&(t=0-t,n=n.negate()),t>=180){t=t-180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}if(t>90){t=0-t,n=n.negate(),t=t+180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}console.assert(t>=0&&t<=90),console.assert(n.getNumerator().abs().compareTo(n.getDenominator())<0);function l(Cn){var ex=simplifyConstantValueInternal(Cn*2);return ex==null?null:Expression.TWO.add(Expression.TWO.multiply(ex)).squareRoot().divide(Expression.TWO)}function u(Cn,ex){var ix=simplifyConstantValueInternal(Cn),ax=simplifyConstantValueInternal(ex),ox=simplifyConstantValueInternal(90-Cn),lx=simplifyConstantValueInternal(90-ex);return ix.multiply(ax).subtract(ox.multiply(lx))}function c(){return Expression.ONE.add(Expression.TWO.add(Expression.TWO).add(Expression.ONE).squareRoot()).divide(Expression.TWO)}if(n.equals(Expression.ZERO)){if(t===0)return Expression.ONE;if(t===30)return Expression.ONE.add(Expression.TWO).squareRoot().divide(Expression.TWO);if(t===45)return Expression.ONE.divide(Expression.TWO.squareRoot());if(t===60)return Expression.ONE.divide(Expression.TWO);if(t===90)return Expression.ZERO;if(t===15||t===75)return l(t);if(t===36)return c().divide(Expression.TWO);if(t===72)return c().subtract(Expression.ONE).divide(Expression.TWO);if(t===18)return Expression.TWO.add(c()).squareRoot().divide(Expression.TWO);if(t===54)return Expression.TWO.add(Expression.ONE).subtract(c()).squareRoot().divide(Expression.TWO);if(t%3===0){var p=90-Math.floor(t/3)%6*15,d=-(p-t);return u(p,d)}}if(n.multiply(Expression.TWO).getDenominator().equals(Expression.ONE)){var Q=t+n.multiply(Expression.TWO).toNumber()/2;if(Q===7.5)return u(30,-22.5);if(Q===22.5)return l(Q);if(Q===37.5)return u(60,-22.5);if(Q===52.5)return u(30,22.5);if(Q===67.5)return l(Q);if(Q===82.5)return u(60,22.5)}if(t%1===0){var Ct=Integer$1.fromNumber(t).add(n).divide(Integer$1.fromNumber(60)),ar=Ct.getDenominator().toNumber(),p=Ct.getNumerator().toNumber();if(ar>Number.MAX_SAFE_INTEGER||p>Number.MAX_SAFE_INTEGER)return;var en=function(ix){const ax=Polynomial.of(Expression.ZERO,Expression.ONE);let ox=Polynomial.of(Expression.ONE),lx=ax,cx=1;for(;cx<ix;){let dx=Polynomial.of(Expression.TWO).multiply(ax).multiply(lx).subtract(ox);ox=lx,lx=dx,cx+=1}return lx},tn=en(ar).subtract(Polynomial.of(simplifyConstantValueInternal(60*(p%6),Expression.ZERO)));tn=tn.scale(tn.getContent().inverse());var on=Math.cos((t+n.getNumerator().toNumber()/n.getDenominator().toNumber())/180*Math.PI),a=Math.floor(on*2**24+.5),cn=Expression.Integer.fromNumber(2**24),gn={a:Expression.Integer.fromNumber(a-1).divide(cn),b:Expression.Integer.fromNumber(a+1).divide(cn)};return Expression.ExpressionPolynomialRoot.create(tn,gn)}},simplifyConstantValue=function(t,n){var a=void 0,l=void 0;if(t instanceof Integer$1&&t.compareTo(Expression.ZERO)===0)a=Expression.ZERO,l=Expression.ONE;else if(t===Expression.PI)a=Expression.ONE,l=Expression.ONE;else if(t instanceof Multiplication&&t.a instanceof Integer$1&&t.b===Expression.PI)a=t.a,l=Expression.ONE;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a===Expression.PI)a=Expression.ONE,l=t.b;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b===Expression.PI)a=t.a.a,l=t.b;else if(t instanceof Expression.Degrees){var u=t.value.simplify();if(u=u.multiply(Expression.PI).divide(Integer$1.fromNumber(180)),n==="sin")return u.sin();if(n==="cos")return u.cos()}if(a!=null&&l!=null){var c=a.multiply(Integer$1.fromNumber(180)).truncatingDivide(l),p=a.multiply(Integer$1.fromNumber(180)).subtract(c.multiply(l)).divide(l),d=c.remainder(Integer$1.fromNumber(360)).toNumber();if(n==="sin")d=90-d,p=p.negate(),d>=270&&(d-=360);else if(n!=="cos")throw new TypeError;return simplifyConstantValueInternal(d,p)}if(t instanceof Expression.Radians&&t.value.equals(Expression.ZERO))return simplifyConstantValue(t.value,n);if(Expression.has(t,Expression.Complex)){if(n==="sin")return Expression.I.multiply(t.divide(Expression.I).sinh());if(n==="cos")return t.divide(Expression.I).cosh()}if(t instanceof Expression.Arctan){Expression.callback!=null&&Expression.callback(new Expression.Event("trigonometric-function-of-inverse-trigonometric-function-arg",new Expression.Matrix(Matrix.I(1))));var a=t.a;if(n==="sin")return a.getNumerator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot());if(n==="cos")return a.getDenominator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot())}if(t instanceof Expression.ExpressionWithPolynomialRoot)return simplifyConstantValue(t.upgrade(),n)};Expression.prototype.cosh=function(){var t=this;return t.exp().add(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.sinh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.tanh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(t.exp().add(t.negate().exp()))};Expression.prototype.coth=function(){var t=this;return t.exp().add(t.negate().exp()).divide(t.exp().subtract(t.negate().exp()))};Expression.prototype.arccos=function(){var t=this;return t.arcsin().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcsin=function(){var t=this;return t.divide(t.pow(Expression.TWO).subtract(Expression.ONE).negate().squareRoot()).arctan()};Expression.prototype.arccot=function(){var t=this;return t.arctan().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcosh=function(){var t=this;return t.add(t.multiply(t).subtract(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.arsinh=function(){var t=this;return t.add(t.multiply(t).add(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.artanh=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE).negate()).logarithm().divide(Expression.TWO)};Expression.prototype.arcoth=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE)).logarithm().divide(Expression.TWO)};Expression.isRealAlgebraicNumber=function t(n){return n instanceof Expression.Integer||n instanceof Expression.NthRoot&&typeof n.n=="number"&&n.n%1===0&&t(n.a)&&(n.n%2!==0||Expression._isPositive(n.a))||n instanceof Expression.Division&&t(n.getNumerator())&&t(n.getDenominator())||n instanceof Expression.Addition&&t(n.a)&&t(n.b)||n instanceof Expression.Multiplication&&t(n.a)&&t(n.b)};var isArgumentValid=function(t,n){if(t instanceof Expression.Radians)return Expression.isRealAlgebraicNumber(t.value);if(t instanceof Expression.Degrees)return simplifyConstantValue(t,n)!=null;if(t instanceof Expression.Symbol)return Expression.isScalar(t);if(t instanceof Expression.Exponentiation)return t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0;if(t instanceof Addition)return isArgumentValid(t.a,n)&&isArgumentValid(t.b,n);if(t instanceof Expression.Arctan)return!0;if(t instanceof Multiplication){if(t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol||t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Arctan||Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol&&(t.a instanceof Expression.NthRoot&&t.a.a instanceof Integer$1||t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b instanceof Expression.NthRoot&&t.a.b.a instanceof Integer$1))return!0;var a=Expression.getConstant(t),l=t.divide(a);if(Expression.isScalar(t)&&(a instanceof Integer$1||a instanceof Expression.Complex)&&(l instanceof Multiplication||l instanceof Expression.Symbol||l instanceof Expression.Exponentiation)){for(var u of l.factors())if(!(u instanceof Expression.NthRoot)&&!(u instanceof Expression.Symbol)&&!(u instanceof Expression.Exponentiation&&u.a instanceof Expression.Symbol&&Expression.isScalar(u.a)&&u.b instanceof Expression.Integer&&u.b.compareTo(Expression.ONE)>0))return!1;return!0;//!?
}}return t instanceof Division&&t.b instanceof Integer$1?isArgumentValid(t.a):t instanceof Expression.Complex};Expression.prototype.sin=function(){var t=this,n=simplifyConstantValue(t,"sin");if(n!=null)return n;if(t.isNegative())return t.negate().sin().negate();if(!isArgumentValid(t,"sin"))throw new RangeError("NotSupportedError");return new Sin(t)};function Cos(t){Expression.Function.call(this,"cos",t)}Cos.prototype=Object.create(Expression.Function.prototype);Expression.prototype.cos=function(){var t=this,n=simplifyConstantValue(t,"cos");if(n!=null)return n;if(t.isNegative())return t.negate().cos();if(!isArgumentValid(t,"cos"))throw new RangeError("NotSupportedError");return new Cos(t)};Expression.simplifications.push(Expression.simplifyTrigonometry);Expression.Sin=Sin;Expression.Cos=Cos;Expression.Addition.prototype.compare4Addition=function(t){var n=this;return Expression.Addition.compare4Addition(n,t)};Expression.Multiplication.prototype.compare4MultiplicationInteger=function(t){return-1};//!!!
Expression.Addition.prototype.compare4Multiplication=function(t){if(t instanceof Integer$1)return-1;if(t instanceof Expression.MatrixSymbol)return 1;for(var n=this,a=n.summands(),l=t.summands(),u=a.next().value,c=l.next().value;u!=null&&c!=null;){var p=u.compare4Multiplication(c);if(p!==0)return p;u=a.next().value,c=l.next().value}return u!=null?1:c!=null?-1:0};Expression.Addition.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Addition.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Addition.compare4Addition=function(t,n){for(var a=t.summands(),l=n.summands(),u=a.next().value,c=l.next().value;u!=null&&c!=null;){var p=u.compare4Addition(c);if(p!==0)return p;u=a.next().value,c=l.next().value}return u!=null?1:c!=null?-1:0};//!!!
Expression.Unit=function(t){this.value=t};Expression.Unit.prototype=Object.create(Expression.prototype);Expression.Unit.prototype.toString=function(t){var n=this.value,a=!(n instanceof Expression.Integer);return(a?"(":"")+n.toString(t)+(a?")":"")+this.unitSymbol()};Expression.Unit.prototype.equals=function(t){return t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()&&this.value.equals(t.value)};Expression.Unit.prototype.compare4AdditionSymbol=function(t){return t.compare4Addition(this.value)};Expression.Unit.prototype.compare4Addition=function(t){return this.value.compare4Addition(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4Multiplication=function(t){return this.value.compare4Multiplication(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4MultiplicationSymbol=function(t){return t.compare4Multiplication(this.value)};Expression.Unit.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Unit.prototype.negate=function(){return this.create(this.value.negate())};Expression.Unit.prototype.multiply=function(t){return this.create(this.value.multiply(t))};Expression.Unit.prototype.multiplyInteger=function(t){return this.create(t.multiply(this.value))};Expression.Unit.prototype.add=function(t){if(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()){var n=this.value.add(t.value);if(n.equals(Expression.ZERO)){return n;//!?
}return this.create(n);//!?
}return Expression.prototype.add.call(this,t)};//!new 2017-04-26
Expression.Degrees=function(t){Expression.Unit.call(this,t)};Expression.Degrees.prototype=Object.create(Expression.Unit.prototype);Expression.Degrees.prototype.unitSymbol=function(){return""};Expression.Degrees.prototype.create=function(t){return new Expression.Degrees(t)};//!new 2019-12-27
Expression.Radians=function(t){this.value=t};Expression.Radians.prototype=Object.create(Expression.Unit.prototype);Expression.Radians.prototype.unitSymbol=function(){return" rad"};Expression.Radians.prototype.create=function(t){return new Expression.Radians(t)};//!new 2019-11-23
Expression.Matrix.prototype.sin=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().subtract(n.negate().multiply(t).exp()).divide(a.multiply(n))};Expression.Matrix.prototype.cos=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().add(n.negate().multiply(t).exp()).divide(a)};//!
(function(){var t=new Expression.Symbol("_i");function n(l){return Expression._map(function(u){if(u instanceof Expression.Sin){var c=u.a;return t.multiply(c).exp().subtract(t.multiply(c).negate().exp()).divide(Expression.TWO.multiply(Expression.I))}if(u instanceof Expression.Cos){var c=u.a;return t.multiply(c).exp().add(t.multiply(c).negate().exp()).divide(Expression.TWO)}return u},l)}function a(l){return Expression._map(function(u){if(u instanceof Expression.Exponentiation&&u.a===Expression.E){var c=u.b,p=Polynomial.toPolynomial(c.getNumerator(),t).scale(c.getDenominator().inverse());if(p.getDegree()===1){var d=p.getCoefficient(0),Q=p.getCoefficient(1);return Q.cos().add(Expression.I.multiply(Q.sin())).multiply(d.exp())}if(p.getDegree()>1)throw new TypeError("!?")}return u},l)}Expression._replaceSinCos=n,Expression._replaceBySinCos=a})();function Arctan(t){Expression.Function.call(this,"arctan",t)}Arctan.prototype=Object.create(Expression.Function.prototype);Expression.Arctan=Arctan;function getlowestfraction(t){var n=1e-15,a,l,u,c,p,d,Q,Ct;for(Ct=t,Q=Math.floor(Ct),l=1,p=0,a=Q,c=1;Ct-Q>n*c*c;)Ct=1/(Ct-Q),Q=Math.floor(Ct),u=l,l=a,d=p,p=c,a=u+Q*l,c=d+Q*p;return a+"/"+c}Expression.prototype.arctan=function(){var t=this;if(t.isNegative())return t.negate().arctan().negate();if(Expression.isConstant(t)&&!(t instanceof Expression.Logarithm)){if(t instanceof Expression.Complex)return Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I));var n=Number(toDecimalStringInternal$1(t,{fractionDigits:15}));console.assert(!Number.isNaN(n));var a=getlowestfraction(Math.atan(n)/Math.PI).split("/"),l=Expression.Integer.fromNumber(Number(a[0])).divide(Expression.Integer.fromNumber(a[1])).multiply(Expression.PI);if(l.getDenominator().toNumber()<1e4&&l.tan().subtract(t).equals(Expression.ZERO))return l;throw new RangeError("NotSupportedError")}if(t instanceof Division){var u=t.getNumerator(),c=t.getDenominator();if(c.subtract(Expression.ONE).subtract(u).multiply(c.subtract(Expression.ONE).add(u)).subtract(Expression.ONE).equals(Expression.ZERO)){var p=Expression.TWO.multiply(t).divide(Expression.ONE.subtract(t._pow(2)));return new Arctan(p).divide(Expression.TWO)}}return t instanceof Expression.Matrix?t.matrix.isDiagonal()?new Expression.Matrix(t.matrix.map(function(d,Q,Ct){return Q===Ct?d.arctan():Expression.ZERO})):Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I)):new Arctan(t)};Expression.prototype.tan=function(){var t=this,n=t.multiply(Expression.TWO);return n.sin().divide(n.cos().add(Expression.ONE))};Expression.prototype.cot=function(){var t=this;if(t instanceof Expression.Matrix)return t.cos().divide(t.sin());var n=t.multiply(Expression.TWO);return n.cos().add(Expression.ONE).divide(n.sin())};Expression.Radians.prototype.complexConjugate=function(){return new Expression.Radians(this.value.complexConjugate())};Expression.Sin.prototype.complexConjugate=function(){return this.a.complexConjugate().sin()};Expression.Cos.prototype.complexConjugate=function(){return this.a.complexConjugate().cos()};Expression.Sin.prototype.compare4MultiplicationExponentiation=function(){return-1};var Integer=Expression.Integer;function Complex(t,n){if(!(t instanceof Integer)||!(n instanceof Integer)||n.compareTo(Expression.ZERO)===0)throw new RangeError;this.real=t,this.imaginary=n}Complex.prototype=Object.create(Expression.prototype);Expression.I=new Complex(Expression.ZERO,Expression.ONE);Expression.Complex=Complex;Complex.prototype.add=function(t){return t.addComplex(this)};Expression.prototype.addComplex=function(t){return this.addExpression(t)};Integer.prototype.addComplex=function(t){return new Complex(t.real.add(this),t.imaginary)};Complex.prototype.addComplex=function(t){var n=t.real.add(this.real),a=t.imaginary.add(this.imaginary);return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Complex.prototype.addInteger=function(t){return new Complex(t.add(this.real),this.imaginary)};Complex.prototype.equals=function(t){return!!(t instanceof Complex&&this.real.equals(t.real)&&this.imaginary.equals(t.imaginary))};Complex.prototype.compare4AdditionSymbol=function(t){return 1};Complex.prototype.compare4MultiplicationNthRoot=function(t){return 1};Complex.prototype.compare4Addition=function(t){return t instanceof Complex?this.equals(t)?0:this.real.compareTo(t.real)||this.imaginary.compareTo(t.imaginary):t instanceof Integer?1:t instanceof Expression.Division?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Exponentiation?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Matrix?Expression.prototype.compare4Addition.call(this,t):-1};Complex.prototype.compare4Multiplication=function(t){return t instanceof Complex?t.equals(this)?0:this.real.abs().compareTo(t.real.abs())||this.imaginary.abs().compareTo(t.imaginary.abs()):t.compare4MultiplicationComplex(this)};Expression.prototype.compare4MultiplicationComplex=function(t){return-1};Complex.prototype.compare4MultiplicationSymbol=function(t){return 1};Complex.prototype.multiply=function(t){return t.multiplyComplex(this)};Complex.prototype.multiplyComplex=function(t){var n=t.real.multiply(this.real).subtract(t.imaginary.multiply(this.imaginary)),a=t.real.multiply(this.imaginary).add(t.imaginary.multiply(this.real));return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Expression.prototype.multiplyComplex=function(t){return this.multiplyExpression(t)};Integer.prototype.multiplyComplex=function(t){return this.compareTo(Expression.ZERO)===0?this:new Complex(t.real.multiply(this),t.imaginary.multiply(this))};Complex.prototype.multiplyInteger=function(t){return t.compareTo(Expression.ZERO)===0?t:new Complex(t.multiply(this.real),t.multiply(this.imaginary))};Complex.prototype.conjugate=function(){return new Complex(this.real,this.imaginary.negate())};Complex.prototype.getPrecedence=function(){return this.real.equals(Expression.ZERO)?this.imaginary.equals(Expression.ONE)?1e3:3:2};Complex.prototype.truncatingDivide=function(t){return t instanceof Integer?new Complex(this.real.truncatingDivide(t),this.imaginary.truncatingDivide(t)):this.multiply(t.conjugate()).truncatingDivide(t.multiply(t.conjugate()))};Complex.prototype.toStringInternal=function(t,n,a,l,u,c,p,d){if(this.real.equals(Expression.ZERO))return this.imaginary.equals(Expression.ONE)?a:this.imaginary.equals(Expression.ONE.negate())?c+l+a+p:c+d(this.imaginary,t)+n+a+p;var Q=this.imaginary.isNegative(),Ct=Q?this.imaginary.negateCarefully():this.imaginary,ar=Ct.equals(Expression.ONE)?a:c+d(Ct,t)+n+a+p,en=d(this.real,t);return c+en+(Q?l:u)+ar+p};Complex.prototype.toString=function(t){return this.toStringInternal(t,"","i","-","+","","",function(n,a){return n.toString(a)})};Complex.prototype.compare4MultiplicationInteger=function(t){return 1};Complex.prototype.remainderInteger=function(t){return Complex.prototype.remainder.call(t,this)};Complex.prototype.remainder=function(t){function n(ar){return ar instanceof Expression.Integer?ar.multiply(ar):ar.multiply(ar.conjugate())}function a(ar,en){en.compareTo(Expression.ZERO)<0&&(en=en.negate(),ar=ar.negate());var tn=en.truncatingDivide(Expression.TWO);return ar.compareTo(Expression.ONE)<0&&(tn=tn.negate()),ar.add(tn).truncatingDivide(en)}var l=this,u=t instanceof Expression.Integer?l:l.multiply(t.conjugate()),c=t instanceof Expression.Integer?t:t.multiply(t.conjugate()),p=a(u instanceof Complex?u.real:u,c),d=a(u instanceof Complex?u.imaginary:Expression.ZERO,c),Q=d.compareTo(Expression.ZERO)===0?p:new Complex(p,d),Ct=l.subtract(t.multiply(Q));if(n(Ct).compareTo(n(t))>=0)throw new TypeError;return Ct};Complex.prototype.primeFactor=function(){return QuadraticInteger._complexIntegerPrimeFactor(this.real.toBigInt(),this.imaginary.toBigInt())};Expression.Complex=Complex;Expression.Complex.prototype.complexConjugate=function(){return this.conjugate()};Expression.Complex.prototype.compare4MultiplicationExponentiation=function(){return 1};function SomePolynomialRoot(t,n,a){this.e=t,this.polynomial=n,this.rootSymbol=a}SomePolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);function alpha(){return new Expression.Symbol("alpha")}function isSameRoot(t,n){return t.polynomial.equals(n.polynomial)&&t.rootSymbol===n.rootSymbol}SomePolynomialRoot.create=function(t){const n=alpha();return new SomePolynomialRoot(n,t,n)};SomePolynomialRoot.prototype.isExact=function(){return!1};function simplifyExpressionWithPolynomialRoot$1(t,n){if(t instanceof Expression.Integer)return t;var a=Polynomial$1.toPolynomial(t.getNumerator(),alpha()),l=Polynomial$1.toPolynomial(t.getDenominator(),alpha()),u=!1;if(l.getDegree()>=n.getDegree()*2&&(a=a.divideAndRemainder(n).remainder,u=!0),l.getDegree()>=n.getDegree()*2&&(l=l.divideAndRemainder(n).remainder,u=!0),a.isDivisibleBy(n))return Expression.ZERO;if(l.getDegree()>0){var c=l.modularInverse(n).primitivePart();l=l.multiply(c).divideAndRemainder(n).remainder,a=a.multiply(c).divideAndRemainder(n).remainder,u=!0}if(!u)return new SomePolynomialRoot(t,n);var p=a.calcAt(alpha()).divide(l.calcAt(alpha()));return p instanceof Expression.Integer?p:new SomePolynomialRoot(p,n)}SomePolynomialRoot.prototype.negate=function(){return new SomePolynomialRoot(this.e.negate(),this.polynomial)};SomePolynomialRoot.prototype.equals=function(t){return t===Expression.ZERO?!1:this.subtract(t).equals(Expression.ZERO)};SomePolynomialRoot.prototype.simplifyExpression=function(){return this};SomePolynomialRoot.prototype.toString=function(t){throw new TypeError};SomePolynomialRoot.prototype.toMathML=function(t){throw new TypeError};SomePolynomialRoot.prototype.multiply=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t),this.polynomial)};SomePolynomialRoot.prototype.add=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.add(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.add(t),this.polynomial)};SomePolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot$1(this.e.inverse(),this.polynomial)};SomePolynomialRoot.prototype.divide=function(t){return t instanceof SomePolynomialRoot&&isSameRoot(this,t)?simplifyExpressionWithPolynomialRoot$1(this.e.divide(t.e),this.polynomial):this.multiply(t.inverse())};SomePolynomialRoot.prototype.divideExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.divide(this.e),this.polynomial)};SomePolynomialRoot.prototype.multiplyExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.multiply(this.e),this.polynomial)};SomePolynomialRoot.prototype.addExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.add(this.e),this.polynomial)};SomePolynomialRoot.prototype.getPrecedence=function(){throw new TypeError};SomePolynomialRoot.prototype.isRightToLeftAssociative=function(){throw new TypeError};SomePolynomialRoot.prototype.isUnaryPlusMinus=function(){throw new TypeError};SomePolynomialRoot.prototype.isNegative=function(){throw new TypeError};SomePolynomialRoot.prototype._nthRoot=function(t){throw new TypeError};SomePolynomialRoot.prototype.pow=function(t){throw new TypeError};SomePolynomialRoot.prototype._pow=function(t){throw new TypeError};SomePolynomialRoot.prototype.calcAt=function(t,n){var a=function(c){for(var p=Polynomial$1.toPolynomial(c,alpha()),d=Expression.ZERO,Q=Date.now();n.length<=p.getDegree();)n.push(n[n.length-1].multiply(t));var Ct=Date.now();Ct-Q>10&&console.log("xPows",Ct-Q);for(var ar=0;ar<=p.getDegree();ar+=1)d=d.add(p.getCoefficient(ar).multiply(n[ar]));return d},l=this.e,u=a(l.getNumerator()).divide(a(l.getDenominator()));return u};var LEFT_TO_RIGHT=0,RIGHT_TO_LEFT=1,COMMA_PRECEDENCE=1,EQUALITY_PRECEDENCE=2,ADDITIVE_PRECEDENCE=3,MULTIPLICATIVE_PRECEDENCE=4,UNARY_PRECEDENCE=6,UNARY_PRECEDENCE_PLUS_ONE=UNARY_PRECEDENCE+1,UNARY_PRECEDENCE_PLUS_TWO=UNARY_PRECEDENCE+2;function Operator(t,n,a,l,u){this.name=t,this.arity=n,this.rightToLeftAssociative=a,this.precedence=l,this.i=u}Operator.trigonometry=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n=prepareTrigonometricArgument(n),n[t]()})};Operator.simple=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n[t]()})};var UNARY_PLUS=new Operator("+",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t}),UNARY_MINUS=new Operator("-",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.negate()}),prepareTrigonometricArgument=function(t){if(t instanceof Expression.Integer)return new Expression.Degrees(t);if(t instanceof Expression.NonSimplifiedExpression){const n=function(a){return a instanceof Expression.NonSimplifiedExpression?n(a.e):a instanceof Expression.Integer?!0:a instanceof Expression.Negation?n(a.b):a instanceof Expression.Multiplication||a instanceof Expression.Addition?n(a.a)&&n(a.b):!1};if(n(t))return toDegrees(t)}return t},toDegrees=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Degrees(t)):new Expression.Degrees(t)},toRadians=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Radians(t)):new Expression.Radians(t)},notSupported=function(t){throw new TypeError},conjugateTranspose=function(t){return t.transpose().complexConjugate()},inequalityOperator=function(t,n){return new Operator(t,2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(a,l){return a.transformInequality(l,n)})},operations=[new Operator("=",2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(t,n){return t.transformEquality(n)}),inequalityOperator("","!="),inequalityOperator("!=","!="),inequalityOperator(">",">"),inequalityOperator("<","<"),inequalityOperator("",">="),inequalityOperator("","<="),new Operator(";",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator(",",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator("+",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.add(n)}),new Operator("-",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.subtract(n)}),new Operator("*",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("/",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.divide(n)}),new Operator("\\",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.inverse().multiply(n)}),new Operator("^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator("**",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator(".^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.elementWisePower(n)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.squareRoot()}),new Operator("sqrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("radical",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(3)}),new Operator("cbrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t._nthRoot(3)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(4)}),new Operator("rank",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rank()}),new Operator("adj",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("adjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("inverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.inverse()}),new Operator("det",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("determinant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("row-reduce",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rowReduce()}),new Operator("transpose",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transpose()}),new Operator("'",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){if(Expression.isScalar(t)){var n=null;if(Expression._map(function(l){return l instanceof Expression.Symbol&&!Expression.isConstant(l)&&(n=l),l},t.simplify()),n!=null)return t.simplify().derivative(n)}return t.transpose()}),new Operator("^*",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("^{*}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("solve",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transformNoAnswerExpression("solve")}),new Operator("GF2",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.GF2()}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("deg",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("rad",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toRadians(t)}),new Operator("exp",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.exp()}),new Operator("log",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("lg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm().divide(Expression.TEN.logarithm())}),new Operator("ln",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("abs",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.abs()}),new Operator("min",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.min()}),new Operator("max",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.max()}),new Operator("gcd",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.gcd()}),new Operator("conjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("overline",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("arg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexArgument()}),new Operator("\\left",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\right",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\mathrm",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("frac",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t,n){return t.divide(n)}),new Operator("\\cdot",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("\\times",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){return t.factorial()}),new Operator("!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("!!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("pseudoinverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.pseudoinverse()}),new Operator("root of",1,RIGHT_TO_LEFT,EQUALITY_PRECEDENCE,function(t){var n=Expression.getMultivariatePolynomial(t.simplify());return SomePolynomialRoot.create(n.p)}),new Operator("near",2,RIGHT_TO_LEFT,COMMA_PRECEDENCE,function(t,n){if(t instanceof Expression.Integer)return t;if(t instanceof SomePolynomialRoot&&t.e.toString()==="alpha"){const Q=n.simplify(),Ct=t.polynomial;var a=Ct.getZeros(),l=1/0,u=null,c=function(en,tn){return en.subtract(tn)};for(var p of a){var d=Math.abs(Number(c(Q,p).toString({rounding:{fractionDigits:2*Ct.getDegree()+Math.ceil(Ct._log2hypot())}})));(u==null||d<l)&&(l=d,u=p)}const ar=u.upgrade();return n instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(ar):ar}throw new TypeError}),new Operator("factor",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.simplify().factor()}),new Operator("derivative",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;return t.list[0].derivative(t.list[1])}return t.derivative()}),new Operator("'(x)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("'(t)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("t"))}),new Operator("'_{x}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("resultant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;var n=new Expression.Symbol("x"),a=Polynomial.toPolynomial(t.list[0],n),l=Polynomial.toPolynomial(t.list[1],n);return new Expression.Polynomial(Polynomial.resultant(a,l))}})];function OperationSearchCache(){this.map={},this.re=null}OperationSearchCache.prototype.append=function(t){this.map[t.name.toLowerCase()]=t,this.re=null};OperationSearchCache.prototype.getByName=function(t){return this.map[t.toLowerCase()]};OperationSearchCache.prototype.getRegExp=function(){var t=function(l){return l.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&")};if(this.re==null){var n=[];for(var a in this.map)Object.prototype.hasOwnProperty.call(this.map,a)&&n.push(a);n.sort(function(u,c){return u<c&&c.lastIndexOf(u,0)!==0||u.lastIndexOf(c,0)===0?-1:1});const l="\0";this.re=new RegExp("^(?:"+t(n.join(l)).split(l).join("|").replace(/\|ch\|/g,"|ch(?!i)|").replace(/\|th\|/g,"|th(?!eta)|")+")","i")}return this.re};var operationSearchCache=new OperationSearchCache,trigonometryFunctions={},i$1=-1;for(;++i$1<operations.length;)operationSearchCache.append(operations[i$1]);for(const t of"cos sin tan cot".split(" "))operationSearchCache.append(Operator.trigonometry(t)),trigonometryFunctions[t]=!0;for(const t of"cosh sinh tanh coth arccos arcsin arctan arccot arcosh arsinh artanh arcoth".split(" "))operationSearchCache.append(Operator.simple(t));var nextToken=function(t){var n=null;do n=t.next();while(n.type==="whitespace");return n},parsePunctuator=function(t,n,a){if(n.type!=="punctuator"||n.value!==a)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input, '"+a+"' expected"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"', '"+a+"' expected");return n=nextToken(t),n};function ParseResult(t,n){this.result=t,this.token=n}var parseMatrix=function(t,n,a){for(var l="{",u="}",c=[],p=!0;p;){n=parsePunctuator(t,n,l);for(var d=[],Q=!0;Q;){var Ct=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=Ct.token,d.push(Ct.result),n.type==="punctuator"&&n.value===","?(Q=!0,n=nextToken(t)):Q=!1}n=parsePunctuator(t,n,u),c.push(d),n.type==="punctuator"&&n.value===","?(p=!0,n=nextToken(t)):p=!1}return n=parsePunctuator(t,n,"}"),new ParseResult(a.wrap(Expression.Matrix.fromArray(c)),n)},parseLaTeXMatrix=function(t,n,a,l){for(var u=[],c=!0;c||n.type==="punctuator"&&n.value===l;){c?c=!1:n=nextToken(t);for(var p=[],d=!0;d||n.type==="punctuator"&&n.value==="&";){d?d=!1:n=nextToken(t);var Q=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=Q.token,p.push(Q.result)}u.push(p)}return new ParseResult(a.wrap(Expression.Matrix.fromArray(u)),n)},parseLaTeXArgument=function(t,n,a){return parseExpression(t,n,a,0,void 0)},getVulgarFraction=function(t){var n=normalizeVulgarFractions(t).replace(/[\u2044]/g,"/"),a=Expression.Integer.fromString(n.slice(0,n.indexOf("/"))).divide(Expression.Integer.fromString(n.slice(n.indexOf("/")+1)));return a},getDecimalFraction=function(t,n,a,l){var u=Expression.ZERO,c=Expression.ONE;if(t!=null&&(u=Expression.Integer.fromString(t)),n!=null){var p=Expression.pow(Expression.TEN,n.length);u=u.multiply(p).add(Expression.Integer.fromString(n)),c=c.multiply(p)}if(a!=null){var p=Expression.pow(Expression.TEN,a.length).subtract(Expression.ONE);u=u.multiply(p).add(Expression.Integer.fromString(a)),c=c.multiply(p)}if(l!=null){var d=0+Number(l),p=Expression.pow(Expression.TEN,d<0?-d:d);d<0?c=c.multiply(p):u=u.multiply(p)}var Q=u.divide(c);return Q};ExpressionParser._getDecimalFraction=getDecimalFraction;var parseDecimalFraction=function(t,n,a){var l=!0,u=void 0;if(n.type==="integerLiteral")u=Expression.Integer.fromString(n.value),u=a.wrap(u),n=nextToken(t);else if(n.type==="numericLiteral"){var c=n.value,p=decimalFractionWithGroups.exec(c);l=!1,a.needsWrap?u=new Expression.DecimalFraction(p[1],p[2],p[3],p[4]):u=getDecimalFraction(p[1],p[2],p[3],p[4]),u=a.wrap(u),n=nextToken(t)}//!
if((l||u==null)&&n.type==="vulgarFraction"){var d=a.wrap(getVulgarFraction(n.value));u!=null?u=u.add(d).addPosition(t.previousPosition,t.previousPosition,t.input):u=d,n=nextToken(t)}return u!=null?new ParseResult(u,n):void 0},whiteSpaces=/^\s+/,punctuators=/^(?:[,&(){}|@]|\\\\|(?:\\begin|\\end)(?:\{(?:[bvp]?matrix|gathered)\})?)/,integerLiteral=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))(?!,(?:\d|\(\d+\)))/,integerLiteralWithoutComma=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))/,decimalFraction=/^(?=[.,]?\d)\d*(?:(?:[.]|[.,](?=\d|\(\d+\)))\d*(?:\(\d+\))?)?(?:(?:[eE]|)[\+\-]?\d+)?/,decimalFractionWithoutComma=new RegExp(decimalFraction.source.replace(/,/g,""));const greek="alpha beta gamma delta epsilon zeta eta theta iota kappa lambda mu nu xi omicron pi rho varsigma sigma tau upsilon phi chi psi omega".split(" "),ARABIC_MATHEMATIC_LETTER=/(?:[\u0627\u066E\u062D\u062F\u0633\u0634\u0635\u0639\u0637\u06BE\u062A]|\u062d\u0640\u0640\u0640\u0640)(?![\u0600-\u06FF])/;var symbols=new RegExp(/^(?:GREEK|circ||[a-zA-Z---]|ARABIC_MATHEMATIC_LETTER)(?:\_[0-9]+|\_\([a-z0-9]+,[a-z0-9]+\)|[\u2080-\u2089]+)?/.source.replace(/GREEK/g,greek.join("|")).replace(/ARABIC_MATHEMATIC_LETTER/g,ARABIC_MATHEMATIC_LETTER.source)),superscripts=/^[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]+/,vulgarFractions=/^[\u00BC-\u00BE\u2150-\u215E]/,other=/^(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|\S)/,decimalFractionWithGroups=/^(\d+)?(?:[.,](\d+)?(?:\((\d+)\))?)?(?:(?:[eE]|)([\+\-]?\d+))?$/,normalizeSuperscripts=function(t){return t.replace(/[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]/g,function(n){var a=n.charCodeAt(0);if(a===178)return"2";if(a===179)return"3";if(a===185)return"1";var l=a-8304;return"0i  456789+-=()n".slice(l,l+1)})},normalizeVulgarFractions=function(t){return t.replace(/[\u00BC-\u00BE\u2150-\u215E]/g,function(n){var a=n.charCodeAt(0),l=a-8528<0?(a-188)*2:(3+a-8528)*2;return"141234171911132315253545165618385878".slice(l,l+2).replace(/^\S/g,"$&").replace(/1\u20441/g,"110")})},normalizeSubscripts=function(t){for(var n=t.length-1;n>=0&&t.charCodeAt(n)>=8320&&t.charCodeAt(n)<=8329;)n-=1;return n===t.length-1?t:t.slice(0,n+1)+"_"+t.slice(n+1).replace(/[\u2080-\u2089]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-8320+48)})},normalizeGreek=function(t){var n=t.indexOf("_"),a=n===-1?t.length:n;if(a>1){var l=t.slice(0,a),u=greek.indexOf(l);if(u!==-1)return String.fromCharCode(945+u)+t.slice(a)}return t},parseExpression=function(t,n,a,l,u){var c=!0,p=!1,d=void 0,Q=void 0;//!
for(;n.type!=="EOF"&&c;){var Ct=void 0,ar=void 0,en=n.type==="operator"||n.type==="punctuator"&&n.value===","?operationSearchCache.getByName(n.value):null;if(en!=null&&(Ct=u==null&&en.name==="+"?UNARY_PLUS:u==null&&en.name==="-"?UNARY_MINUS:en),Ct!=null&&Ct.name==="frac")if(!(u==null&&l<=UNARY_PRECEDENCE_PLUS_ONE||l<MULTIPLICATIVE_PRECEDENCE))c=!1;else{n=nextToken(t),d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var tn=d.result;n=d.token,d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var on=d.result;n=d.token,ar=Ct.i(tn,on),c=!0}else if(Ct!=null)if(!(u!=null&&(Ct.arity!==1||Ct.rightToLeftAssociative!==RIGHT_TO_LEFT||l<MULTIPLICATIVE_PRECEDENCE)||u==null&&Ct.arity===1&&Ct.rightToLeftAssociative===RIGHT_TO_LEFT)||l>Ct.precedence+(Ct.rightToLeftAssociative===RIGHT_TO_LEFT?0:-1))c=!1;else{var cn=t.previousPosition;if(n=nextToken(t),Ct.arity===1&&Ct.rightToLeftAssociative!==RIGHT_TO_LEFT)ExpressionParser.startPosition=cn,ExpressionParser.endPosition=cn+Ct.name.length,ExpressionParser.input=t.input,u=Ct.i(u).addPosition(cn,Ct.name.length,t.input);else if(Ct.arity===1&&Ct.rightToLeftAssociative===RIGHT_TO_LEFT&&Ct.precedence===UNARY_PRECEDENCE_PLUS_ONE&&Ct.name.length>1&&trigonometryFunctions[Ct.name]===!0&&(n.type==="operator"&&n.value==="^"||n.type==="superscript"&&/^\d+$/.test(normalizeSuperscripts(n.value)))){//!new 2017-11-04
var gn=t.position,Cn=0,ex=null;n.type==="superscript"?(ex=Expression.Integer.fromString(normalizeSuperscripts(n.value)),Cn=t.position-t.previousPosition,n=nextToken(t)):(Cn=1,n=nextToken(t),n.type!=="integerLiteral"&&!(n.type==="punctuator"&&(n.value==="{"||n.value==="("))?c=!1:(d=parseExpression(t,n,a,UNARY_PRECEDENCE,void 0),ex=d.result,n=d.token)),c&&(d=parseExpression(t,n,a,Ct.precedence,void 0),Q=d.result,n=d.token,ar=Ct.i(Q).addPosition(cn,Ct.name.length,t.input).pow(ex).addPosition(gn,Cn,t.input))}else if(d=parseExpression(t,n,a,Ct.precedence,void 0),Q=d.result,n=d.token,ExpressionParser.startPosition=cn,ExpressionParser.endPosition=cn+Ct.name.length,ExpressionParser.input=t.input,Ct.arity===1)ar=Ct.i(Q).addPosition(cn,Ct.name.length,t.input);else if(Ct.arity===2)u=Ct.i(u,Q).addPosition(cn,Ct.name.length,t.input);else throw new RangeError}else if(u==null||l<MULTIPLICATIVE_PRECEDENCE||l===UNARY_PRECEDENCE_PLUS_ONE&&p&&n.type==="symbol")if((d=parseDecimalFraction(t,n,a))!=null)ar=d.result,n=d.token,p=!0;else if(n.type==="punctuator"&&n.value==="(")n=parsePunctuator(t,n,"("),d=parseExpression(t,n,a,0,void 0),ar=d.result,n=d.token,n=parsePunctuator(t,n,")");else if(n.type==="punctuator"&&n.value==="{")n=parsePunctuator(t,n,"{"),n.type==="punctuator"&&n.value==="{"?(d=parseMatrix(t,n,a),ar=d.result,n=d.token):(d=parseLaTeXArgument(t,n,a),ar=d.result,n=d.token,n=parsePunctuator(t,n,"}"));else if(n.type==="punctuator"&&(n.value==="\\begin{bmatrix}"||n.value==="\\begin{vmatrix}"||n.value==="\\begin{pmatrix}"||n.value==="\\begin{matrix}"||n.value==="\\begin{gathered}")){var ix=n.value.slice(7,-1);if(n=nextToken(t),d=parseLaTeXMatrix(t,n,a,"\\\\"),ar=d.result,n=d.token,n.type==="punctuator"&&n.value==="\\end{"+ix+"}"&&(n=nextToken(t)),ix==="vmatrix"){ar=ar.determinant();//!
}}else if(n.type==="symbol"){var ax=n.value;ax=normalizeSubscripts(ax),ax=normalizeGreek(ax),ar=a.get(ax),ar=a.wrap(ar),n=nextToken(t)}else if(n.type==="punctuator"&&n.value==="|")if(u==null||Expression.isScalar(u)){//!
if(n=parsePunctuator(t,n,"|"),d=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0),ar=d.result,n=d.token,n=parsePunctuator(t,n,"|"),Expression.isScalar(ar))ar=ar.abs();else{ar=ar.determinant();//!
}}else l<COMMA_PRECEDENCE?(n=parsePunctuator(t,n,"|"),d=parseExpression(t,n,a,0,void 0),ar=d.result,n=d.token,ar=u.augment(ar),u=void 0):c=!1;else n.type==="punctuator"&&n.value===""?(n=nextToken(t),n=parsePunctuator(t,n,"("),d=parseLaTeXMatrix(t,n,a,"@"),ar=d.result,n=d.token,n=parsePunctuator(t,n,")")):c=!1;else c=!1;//!TODO: fix
if(!c&&u!=null&&l<=UNARY_PRECEDENCE+0&&n.type==="superscript"){var ox=ExpressionParser.parse(normalizeSuperscripts(n.value),a);u=u.pow(ox).addPosition(t.previousPosition,t.previousPosition,t.input),n=nextToken(t),c=!0;//!
}if(!c&&n.type==="operator"&&n.value==="\\"&&(c=!0,n=nextToken(t)),ar!=null)if(u!=null){var lx=t.position;d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,ar);var cx=d.result;n=d.token,u=u.multiply(cx).addPosition(lx,1,t.input)}else u=ar}if(u==null)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"'");return new ParseResult(u,n)};const decimalNumberRegExp$1=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit$1=function(t){let n=0;for(;decimalNumberRegExp$1.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10},map$2={":":"/","[":"(","]":")","":"*","":"*","":"/","":"^",:"",:"A",:"B",:"C",:"T",:"A",:"B",:"C",:"T","":",","":",","":" ","":"-","":"-","":"-","":"-","":"-","":"-","":"*","":" ","":"*","":",","":" ","":"e","":"i","":"-","":"/","":"*","":"","":"","":"*","":"|","":"","":"","":"0","":"(","":")",:"-",:"1",:"7",:"3",:"9",:"2",:"5",:"8",:"6",:"4"},isBidiControl=function(t){return t===1564||t===8206||t===8207||t>=8234&&t<=8238||t>=8294&&t<=8297};var getCodePointReplacement=function(t){if(t>=65281&&t<=65374)return t-65281+33;var n=replaceSimpleDigit$1(t);if(n!==-1)return n+48;if(isBidiControl(t))return 32;if(t>=0&&t<=65535){var a=map$2[String.fromCharCode(t)];if(a!=null&&a.length===1)return a.charCodeAt(0)}return-1},replaceSomeChars=function(t){for(var n=0,a="",l=0;l<t.length;){const p=t.codePointAt(l);var u=p<=65535?1:2;if(p>127||p===58||p===91||p===93){var c=getCodePointReplacement(p);if(c!==-1){if(!(c>=0&&c<=65535))throw new RangeError;a+=t.slice(n,l),a+=String.fromCharCode(c),n=l+u}}l+=u}return a+=t.slice(n),a},config=[{type:"integerLiteral",re:integerLiteral,state:0},{type:"integerLiteral",re:integerLiteralWithoutComma,state:1},{type:"numericLiteral",re:decimalFraction,state:0},{type:"numericLiteral",re:decimalFractionWithoutComma,state:1},{type:"whitespace",re:whiteSpaces,state:-1},{type:"punctuator",re:punctuators,state:-1},{type:"operator",re:null,state:-1},{type:"symbol",re:symbols,state:-1},{type:"vulgarFraction",re:vulgarFractions,state:-1},{type:"superscript",re:superscripts,state:-1},{type:"OTHER",re:other,state:-1}],stateConfigs=[{start:"(",end:")"},{start:"{",end:"}"}];function Token(t,n){this.type=t,this.value=n}Token.EOF=new Token("EOF","");function Tokenizer(t,n,a){this._preparedInput=replaceSomeChars(t.slice(n)),this.input=t,this._preparedInputPosition=0,this.previousPosition=n,this.position=n,this.states=a}Tokenizer.prototype.next=function(){if(this.previousPosition=this.position,this.position>=this.input.length)return Token.EOF;for(var t=0;t<config.length;t+=1){var n=config[t],a=n.type,l=n.re,u=n.state;if(l==null&&a==="operator"&&(l=operationSearchCache.getRegExp()),u===-1||u===(this.states==null?0:this.states.value)){var c=l.exec(this._preparedInput.slice(this._preparedInputPosition));if(c!=null){var p=c[0];if(a==="punctuator")for(var d=0;d<stateConfigs.length;d+=1){var u=stateConfigs[d];p===u.start?this.states={previous:this.states,value:d}:p===u.end&&this.states!=null&&this.states.value===d&&(this.states=this.states.previous)}for(var d=0;d<p.length;d+=p.codePointAt(d)<=65535?1:2)this.position+=this.input.codePointAt(this.position)<=65535?1:2;return this._preparedInputPosition+=p.length,new Token(a,p)}}}throw new TypeError};var fs={};//!TODO: remove!!!
function ExpressionParser(){}ExpressionParser.parse=function(t,n){if(n=n??new ExpressionParser.Context(void 0,!1),ExpressionParser.startPosition=-1,ExpressionParser.endPosition=-1,ExpressionParser.input=t,typeof t!="string")throw new RangeError;if(typeof hit=="function"&&n.getter!=null)for(var a=/[a-z][a-z][a-z\-]+/gi,l=null;(l=a.exec(t))!=null;){var u=l[0];!(u in fs)&&u.indexOf("-")===-1&&(fs[u]=!0,hit({fs:u}))}var c=new Tokenizer(t,0,null),p=nextToken(c),d=parseExpression(c,p,n,0,void 0);if(p=d.token,p.type!=="EOF")throw ExpressionParser.startPosition=c.previousPosition,ExpressionParser.endPosition=c.position,ExpressionParser.input=c.input,new RangeError("UserError: unexpected '"+c.input.slice(c.previousPosition,c.position)+"'");return d.result};globalThis.Tokenizer=Tokenizer;ExpressionParser.startPosition=-1;ExpressionParser.endPosition=-1;ExpressionParser.input="";var getConstant=function(t){return t==="pi"||t===""||t===""?Expression.PI:t==="e"||t===""?Expression.E:t==="i"||t===""?Expression.I:t==="I"||t==="U"||t==="E"?new Expression.IdentityMatrix(t):t==="circ"?Expression.CIRCLE:t===""?Expression.INFINITY:new Expression.Symbol(t)};ExpressionParser.Context=function(t,n){this.getter=t,this.needsWrap=n??!0};ExpressionParser.Context.prototype.get=function(t){if(this.getter!=null){var n=this.getter(t);if(n!=null)return n}return getConstant(t)};ExpressionParser.Context.prototype.wrap=function(t){return this.needsWrap?new Expression.NonSimplifiedExpression(t):t};ExpressionParser.addOperation=function(t,n){var a=n===1?new Operator(t,n,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(l){return l.transformNoAnswerExpression(t)}):new Operator(t,n,RIGHT_TO_LEFT,MULTIPLICATIVE_PRECEDENCE,function(l,u){return l.transformNoAnswerExpression(t,u)});operationSearchCache.append(a)};ExpressionParser.addDenotations=function(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n],l=operationSearchCache.getByName(n),u={};u[n]=!0;for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var p=a[c];if(u[p]==null){u[p]=!0;var d=new Operator(p,l.arity,l.rightToLeftAssociative,l.precedence,l.i);operationSearchCache.append(d),trigonometryFunctions[n]&&(trigonometryFunctions[p]=!0)}}}};var idCounter=0;function NonSimplifiedExpression(t,n,a,l){this.e=t,this.position=n??-1,this.length=a??-1,this.input=l??"",this.id=idCounter+=1}NonSimplifiedExpression.prototype=Object.create(Expression.prototype);NonSimplifiedExpression.prototype.negate=function(){return new NonSimplifiedExpression(new Expression.Negation(this))};NonSimplifiedExpression.prototype.add=function(t){return new NonSimplifiedExpression(new Expression.Addition(this,t))};NonSimplifiedExpression.prototype.subtract=function(t){return new NonSimplifiedExpression(new Expression.Subtraction(this,t))};NonSimplifiedExpression.prototype.divide=function(t){return new NonSimplifiedExpression(new Expression.Division(this,t))};NonSimplifiedExpression.prototype.multiply=function(t){return new NonSimplifiedExpression(new Expression.Multiplication(this,t))};NonSimplifiedExpression.prototype.pow=function(t){return new NonSimplifiedExpression(new Expression.Exponentiation(this,t))};NonSimplifiedExpression.prototype.exp=function(){return new NonSimplifiedExpression(Expression.E).pow(this)};NonSimplifiedExpression.prototype.logarithm=function(){return new NonSimplifiedExpression(new Expression.Logarithm(this))};NonSimplifiedExpression.prototype.inverse=function(){return new NonSimplifiedExpression(new Expression.Exponentiation(this,Expression.ONE.negate()))};NonSimplifiedExpression.prototype.factorial=function(){return new NonSimplifiedExpression(new Expression.Factorial(this))};NonSimplifiedExpression.prototype.addExpression=function(t){throw new TypeError};NonSimplifiedExpression.prototype.squareRoot=function(){return new NonSimplifiedExpression(new Expression.SquareRoot(this))};NonSimplifiedExpression.prototype._nthRoot=function(t){return new NonSimplifiedExpression(new Expression.NthRoot(t+"-root",this,t))};NonSimplifiedExpression.prototype.abs=function(){return new NonSimplifiedExpression(new Expression.Function("abs",this))};NonSimplifiedExpression.prototype.cos=function(){return new NonSimplifiedExpression(new Expression.Function("cos",this))};NonSimplifiedExpression.prototype.sin=function(){return new NonSimplifiedExpression(new Expression.Function("sin",this))};NonSimplifiedExpression.prototype.tan=function(){return new NonSimplifiedExpression(new Expression.Function("tan",this))};NonSimplifiedExpression.prototype.cot=function(){return new NonSimplifiedExpression(new Expression.Function("cot",this))};NonSimplifiedExpression.prototype.cosh=function(){return new NonSimplifiedExpression(new Expression.Function("cosh",this))};NonSimplifiedExpression.prototype.sinh=function(){return new NonSimplifiedExpression(new Expression.Function("sinh",this))};NonSimplifiedExpression.prototype.tanh=function(){return new NonSimplifiedExpression(new Expression.Function("tanh",this))};NonSimplifiedExpression.prototype.coth=function(){return new NonSimplifiedExpression(new Expression.Function("coth",this))};NonSimplifiedExpression.prototype.arccos=function(){return new NonSimplifiedExpression(new Expression.Function("arccos",this))};NonSimplifiedExpression.prototype.arcsin=function(){return new NonSimplifiedExpression(new Expression.Function("arcsin",this))};NonSimplifiedExpression.prototype.arctan=function(){return new NonSimplifiedExpression(new Expression.Function("arctan",this))};NonSimplifiedExpression.prototype.arccot=function(){return new NonSimplifiedExpression(new Expression.Function("arccot",this))};NonSimplifiedExpression.prototype.arcosh=function(){return new NonSimplifiedExpression(new Expression.Function("arcosh",this))};NonSimplifiedExpression.prototype.arsinh=function(){return new NonSimplifiedExpression(new Expression.Function("arsinh",this))};NonSimplifiedExpression.prototype.artanh=function(){return new NonSimplifiedExpression(new Expression.Function("artanh",this))};NonSimplifiedExpression.prototype.arcoth=function(){return new NonSimplifiedExpression(new Expression.Function("arcoth",this))};NonSimplifiedExpression.prototype.rank=function(){return new NonSimplifiedExpression(new Expression.Rank(this))};NonSimplifiedExpression.prototype.determinant=function(){return new NonSimplifiedExpression(new Expression.Determinant(this))};Expression.Pseudoinverse.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pseudoinverse()};NonSimplifiedExpression.prototype.pseudoinverse=function(){return new NonSimplifiedExpression(new Expression.Pseudoinverse(this))};NonSimplifiedExpression.prototype.rowReduce=function(){return new NonSimplifiedExpression(new Expression.RowReduce(this))};NonSimplifiedExpression.prototype.GF2=function(){return new NonSimplifiedExpression(new Expression.GF2(this))};NonSimplifiedExpression.prototype.transpose=function(){return new NonSimplifiedExpression(new Expression.Transpose(this))};NonSimplifiedExpression.prototype.complexConjugate=function(){return new NonSimplifiedExpression(new Expression.ComplexConjugate(this))};NonSimplifiedExpression.prototype.complexArgument=function(){return new NonSimplifiedExpression(new Expression.ComplexArgument(this))};NonSimplifiedExpression.prototype.adjugate=function(){return new NonSimplifiedExpression(new Expression.Adjugate(this))};NonSimplifiedExpression.prototype.elementWisePower=function(t){return new NonSimplifiedExpression(new Expression.ElementWisePower(this,t))};NonSimplifiedExpression.prototype.transformNoAnswerExpression=function(t,n){return new NonSimplifiedExpression(new Expression.NoAnswerExpression(this,t,n))};NonSimplifiedExpression.prototype.transformEquality=function(t){return new NonSimplifiedExpression(new Expression.Equality(this,t))};NonSimplifiedExpression.prototype.transformInequality=function(t,n){return new NonSimplifiedExpression(new Expression.Inequality(this,t,n))};NonSimplifiedExpression.prototype.transformComma=function(t){return new NonSimplifiedExpression(new Expression.Comma(this,t))};NonSimplifiedExpression.prototype.derivative=function(t){return new NonSimplifiedExpression(new Expression.Derivative(this,t))};NonSimplifiedExpression.prototype.addPosition=function(t,n,a){return new NonSimplifiedExpression(this.e,t,n,a)};var prepare$1=function(t,n){var a=t.simplify();return ExpressionParser.startPosition=n.position,ExpressionParser.endPosition=n.position+n.length,ExpressionParser.input=n.input,a};Expression.prototype.simplifyInternal=function(t){return this};Expression.Exponentiation.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pow(prepare$1(this.b,t))};Expression.Multiplication.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).multiply(prepare$1(this.b,t))};Expression.Addition.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).add(prepare$1(this.b,t))};Expression.Division.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).divide(prepare$1(this.b,t))};Expression.SquareRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).squareRoot()};Expression.NthRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)._nthRoot(this.n)};Expression.Function.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)[this.name]()};Expression.Logarithm.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).logarithm()};Expression.Rank.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rank()};Expression.Determinant.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).determinant()};Expression.RowReduce.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rowReduce()};Expression.GF2.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).GF2()};Expression.Transpose.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transpose()};Expression.ComplexConjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexConjugate()};Expression.ComplexArgument.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexArgument()};Expression.Adjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).adjugate()};Expression.NoAnswerExpression.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformNoAnswerExpression(this.name,this.second==null?void 0:prepare$1(this.second,t))};Expression.Equality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformEquality(prepare$1(this.b,t))};Expression.Inequality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformInequality(prepare$1(this.b,t),this.sign)};Expression.Matrix.prototype.simplifyInternal=function(t){return new Expression.Matrix(this.matrix.map(function(n,a,l){return prepare$1(n,t)}))};Expression.Radians.prototype.simplifyInternal=function(t){return new Expression.Radians(prepare$1(this.value,t))};Expression.Comma.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformComma(prepare$1(this.b,t))};Expression.Derivative.prototype.simplifyInternal=function(t){return prepare$1(this.symbol,t).derivative(this.variable)};Expression.prototype.simplify=function(){return this};NonSimplifiedExpression.prototype.simplify=function(){return this.e.simplify().simplifyInternal(this).simplifyExpression()};NonSimplifiedExpression.prototype.toString=function(t){return this.e.toString(t)};NonSimplifiedExpression.prototype.equals=function(t){return this.simplify().equals(t.simplify())};//!
NonSimplifiedExpression.prototype.unwrap=function(){return this.e};Expression.Negation.prototype.simplifyInternal=function(t){return prepare$1(this.b,t).negate()};Expression.Subtraction.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).subtract(prepare$1(this.b,t))};NonSimplifiedExpression.prototype.isUnaryPlusMinus=function(){return this.e.isUnaryPlusMinus()};NonSimplifiedExpression.prototype.getPrecedence=function(){return this.e.getPrecedence()};Expression.ElementWisePower.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).elementWisePower(prepare$1(this.b,t))};Expression.Factorial.prototype.simplifyInternal=function(t){return prepare$1(this.n,t).factorial()};NonSimplifiedExpression.prototype.getId=function(){return"e"+this.id.toString()};Expression.prototype.getIds=function(){return""};Expression.BinaryOperation.prototype.getIds=function(){var t=this.a.getIds(),n=this.b.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.getIds=function(){var t=this.getId(),n=this.e.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.isNegative=function(){return!1};NonSimplifiedExpression.prototype.negateCarefully=function(){return new NonSimplifiedExpression(this.e.negateCarefully())};NonSimplifiedExpression.prototype.isRightToLeftAssociative=function(){return this.e.isRightToLeftAssociative()};NonSimplifiedExpression.prototype.isExact=function(){return this.e.isExact()};Expression.DecimalFraction=function(t,n,a,l){this.integer=t,this.transient=n,this.repetend=a,this.exponent=l};Expression.DecimalFraction.prototype=Object.create(Expression.prototype);Expression.DecimalFraction.prototype.getPrecedence=function(){return 1e3};Expression.DecimalFraction.prototype.simplifyInternal=function(){return ExpressionParser._getDecimalFraction(this.integer,this.transient,this.repetend,this.exponent)};Expression.DecimalFraction.prototype.toString=function(){return(this.integer||"0")+"."+(this.transient||"")+(this.repetend!=null?"("+this.repetend+")":"")+(this.exponent!=null?"E"+this.exponent:"")};NonSimplifiedExpression.prototype.augment=function(t){return new NonSimplifiedExpression(new Expression.AugmentedMatrix(this,t))};Expression.AugmentedMatrix.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).augment(prepare$1(this.b,t))};Expression.NonSimplifiedExpression=NonSimplifiedExpression;function SimpleFloat(t,n){this.significand=t,this.exponent=n}SimpleFloat.create=function(t){var n=t.getNumerator(),a=t.getDenominator();if(!(n instanceof Expression.Integer)||!(a instanceof Expression.Integer))throw new TypeError;var l=0;if(a!==Expression.ONE&&(l=a.bitLength()-1,!Expression.TWO._pow(l).equals(a)))throw new TypeError;return new SimpleFloat(n,0-l)};SimpleFloat.prototype.toExpression=function(){return this.significand.multiply(this.exponent>=0?Expression.TWO._pow(this.exponent):Expression.TWO._pow(-this.exponent).inverse())};SimpleFloat.prototype.multiply=function(t){return new SimpleFloat(this.significand.multiply(t.significand),this.exponent+t.exponent)};SimpleFloat.prototype.add=function(t){const n=Math.min(this.exponent,t.exponent);return new SimpleFloat(this.significand.leftShift(this.exponent-n).add(t.significand.leftShift(t.exponent-n)),n)};SimpleFloat.prototype.negate=function(){return new SimpleFloat(this.significand.negate(),this.exponent)};SimpleFloat.prototype.sign=function(){return this.significand.sign()};SimpleFloat.prototype.toString=function(){return this.significand.toString()+"*2**"+this.exponent};SimpleFloat.prototype.round=function(t,n){if(this.exponent!==0-n){if(t==="floor"){var a=new SimpleFloat(this.significand.leftShift(this.exponent+n),0-n);if(a.add(this.negate()).sign()>0)throw new Error;return a}if(t==="ceil"){var a=new SimpleFloat(this.significand.negate().leftShift(this.exponent+n).negate(),0-n);if(a.add(this.negate()).sign()<0)throw new Error;return a}throw new RangeError}return this};var isRational=function(t){return t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer},isPowerOf2=function(t){return Expression.TWO._pow(t.bitLength()-1).equals(t)};function SimpleInterval(t,n){if(!(t instanceof SimpleFloat)||!(n instanceof SimpleFloat)||t.add(n.negate()).sign()>0)throw new TypeError;this.a=t,this.b=n}SimpleInterval.from=function(t){return new SimpleInterval(SimpleFloat.create(t.a),SimpleFloat.create(t.b))};SimpleInterval.prototype.toExpressionsInterval=function(){return{a:this.a.toExpression(),b:this.b.toExpression()}};SimpleInterval.prototype.negate=function(){return new SimpleInterval(this.b.negate(),this.a.negate())};SimpleInterval.prototype.add=function(t){return new SimpleInterval(this.a.add(t.a),this.b.add(t.b))};SimpleInterval.prototype.multiply=function(t){var n=function(ax){return ax.sign()};const a=function(ax,ox,lx,cx){return new SimpleInterval(ax.multiply(ox),lx.multiply(cx))},l=this.a,u=this.b,c=t.a,p=t.b,d=n(l),Q=n(u),Ct=n(c),ar=n(p);if(d>=0)return Ct>=0?a(l,c,u,p):ar<=0?a(u,c,l,p):a(u,c,u,p);if(Q<=0)return ar<=0?a(u,p,l,c):Ct>=0?a(l,p,u,c):a(l,p,l,c);if(Ct>=0)return a(l,p,u,p);if(ar<=0)return a(u,c,l,c);const en=l.multiply(c),tn=u.multiply(c),on=l.multiply(p),cn=u.multiply(p);var gn=function(ax,ox){return ax.subtract(ox).sign()<0?ax:ox},Cn=function(ax,ox){return ax.subtract(ox).sign()<0?ox:ax};const ex=gn(gn(en,tn),gn(on,cn)),ix=Cn(Cn(en,tn),Cn(on,cn));return new SimpleInterval(ex,ix)};SimpleInterval.prototype.scale=function(t){return this.multiply(SimpleInterval.from({a:t,b:t}))};SimpleInterval.prototype.inverse=function(t){var n=function(p){return p.sign()};if(n(this.a)<0&&n(this.b)>0)throw new TypeError;if(t==null){debugger;throw new TypeError}var a=this.toExpressionsInterval();//!TODO: REMOVE
var l=Expression.TWO._pow(t+Math.max(a.b.getNumerator().abs().bitLength(),a.a.getNumerator().abs().bitLength())),u=function(p,d,Q){if(Q==="floor")return d.sign()<0&&(p=p.negate(),d=d.negate()),p.sign()>=0?p.truncatingDivide(d):p.add(Expression.ONE).truncatingDivide(d).subtract(Expression.ONE);if(Q==="ceil")return u(p.negate(),d,"floor").negate();throw new TypeError},c=function(p,d,Q){return u(p,d.getNumerator(),Q).divide(p).multiply(d.getDenominator())};return SimpleInterval.from({a:c(l,a.b,"floor"),b:c(l,a.a,"ceil")})};SimpleInterval.prototype._pow=function(t){return t%2===0?t===0?SimpleInterval.from({a:Expression.ONE,b:Expression.ONE}):this.multiply(this)._pow(t/2):new SimpleInterval(this.a._pow(t),this.b._pow(t))};SimpleInterval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};SimpleInterval.prototype.round=function(t){return new SimpleInterval(this.a.round("floor",t),this.b.round("ceil",t))};const intersection=function(t,n){var a=function(c,p){return c.subtract(p).getNumerator().sign()},l=function(c,p){return a(c,p)<0?p:c},u=function(c,p){return a(c,p)<0?c:p};return a(n.a,t.b)>0||a(t.a,n.b)>0?null:{a:l(t.a,n.a),b:u(t.b,n.b)}},toSimpleInterval=function(t,n){if(t instanceof Expression.Integer)return SimpleInterval.from({a:t,b:t});if(t instanceof Expression.BinaryOperation){var a=toSimpleInterval(t.a,n),l=toSimpleInterval(t.b,n),u=t.getS();if(u==="+")return a.add(l);if(u==="-")return a.add(l.negate());if(u==="*")return a.multiply(l);if(u==="/")return a.multiply(l.inverse(n));if(u==="^"){if(t.b instanceof Expression.Integer){var c=t.b.toBigInt();return a._pow(c)}}else debugger}else if(t instanceof Expression.NthRoot){const ar=t.n;if(console.assert(ar>=2&&ar%1===0),t.a instanceof Expression.Integer&&t.a.sign()>0){var a=t.a,p=Expression.TWO._pow(n),d=a.multiply(p._pow(ar))._integerNthRoot(ar);return SimpleInterval.from({a:d.divide(p),b:d.add(Expression.ONE).divide(p)})}var a=toSimpleInterval(t.a,n);if(ar%2===0)for(var Q=2;a.a.sign()<0&&a.b.sign()>0;)a=toSimpleInterval(t.a,n*Q),Q*=2;var Ct=function(tn,on,cn){var gn=Expression.TWO._pow(n),Cn=cn==="floor"?tn.getNumerator().sign()>=0?Expression.ZERO:Expression.ONE.negate():tn.getNumerator().sign()<0?Expression.ZERO:Expression.ONE;return tn.getNumerator().multiply(tn.getDenominator()._pow(on-1)).multiply(gn._pow(on))._integerNthRoot(on).add(Cn).divide(gn.multiply(tn.getDenominator()))};return a=a.toExpressionsInterval(),SimpleInterval.from({a:Ct(a.a,ar,"floor"),b:Ct(a.b,ar,"ceil")})}if(t instanceof PolynomialRoot||t instanceof Expression.PolynomialRootSymbol)return SimpleInterval.from(t.toDecimal(n));if(t instanceof Expression.ExpressionPolynomialRoot)return SimpleInterval.from(t.root.toDecimal(n));debugger;throw new TypeError("?")};function Helper(t){this.squareFreeFactors=[];var n=null;const a=Polynomial$1.of(Expression.ONE);do n=t.squareFreeFactors(),n.a1.equals(a)||this.squareFreeFactors.push(n.a1),n.a0.getDegree()!==0?t=n.a0:t=null;while(t!=null)}Helper.prototype.calcAt=function(t){var n=Expression.ONE;for(var a of this.squareFreeFactors)n=n.multiply(a.calcAt(t));return n};Helper.prototype.numberOfRoots=function(t){var n=0,a=[];for(var l of this.squareFreeFactors){var u=l.numberOfRoots(t.toExpressionsInterval());n+=u,u>0&&a.push(l)}return this.squareFreeFactors=a,n};Helper.get=function(t,n){return t.squareFreeFactors.length===1?t.squareFreeFactors[0]:null};var calculateNewInterval=function(t,n,a){if(!t.hasIntegerCoefficients())throw new RangeError("just a check");t=new Helper(t);//!?!?TODO: REMOVE
var l=8,u=n(l);for(u=u.round(l);u.a.sign()!==u.b.sign()&&!t.calcAt(Expression.ZERO).equals(Expression.ZERO)||t.numberOfRoots(u)>1;)if(l*=2,u=n(l),u=u.round(l),l>1024)throw new Error;var c=u;return t=Helper.get(t,u),new PolynomialRoot(t,c.toExpressionsInterval(),a)};function PolynomialRoot(t,n,a={}){if(!t.hasIntegerCoefficients())throw new TypeError;if(t.getLeadingCoefficient().sign()<0)return new PolynomialRoot(t.negate(),n);var l=t.getContent();if(!l.equals(Expression.ONE))return new PolynomialRoot(t.scale(l.inverse()),n);if(!a.skipFactorization){//!
var u=function(){const d=t._factorizeOverTheIntegers();for(let Q=d.next().value;Q!=null;Q=d.next().value)if(Q.numberOfRoots(n)!==0)return Q;return null};let p=t.isSquareFreePolynomial()?u():t.factorize();if(p!=null&&!p.equals(t)){if(p.numberOfRoots(n)!==0)return new PolynomialRoot(p,n);var c=t.divideAndRemainder(p,"throw").quotient;return new PolynomialRoot(c,n)}}if(n instanceof SimpleInterval)throw new TypeError;if(n.a.subtract(n.b).getNumerator().sign()>0)throw new TypeError;if(!a.skipFactorization){//!
if(t.numberOfRoots(n)!==1)throw new TypeError}if(!t.getContent().equals(Expression.ONE))throw new TypeError;this.polynomial=t,this.interval=n}PolynomialRoot.prototype.toDecimal=function(t){return t<=0?this.interval:this.polynomial.getZero(this.interval,t)};PolynomialRoot.prototype.toString=function(){return"[root of "+this.polynomial+" near "+this.interval.a.add(this.interval.b).divide(Expression.TWO).toString()+"]"};PolynomialRoot.prototype.scale=function(t){var n=this.polynomial._scaleRoots(t).primitivePart();if(!isRational(t)){var a=this;return n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(u){return toSimpleInterval(a,u).multiply(toSimpleInterval(t,u))})}if(!isPowerOf2(t.getDenominator())){var a=this;return calculateNewInterval(n,function(c){return toSimpleInterval(a,c).multiply(toSimpleInterval(t,c))})}var l=SimpleInterval.from(this.interval).scale(t).toExpressionsInterval();return new PolynomialRoot(n,l,{skipFactorization:!0})};PolynomialRoot.prototype.translate=function(t){var n=this.polynomial._translateRoots(t).primitivePart(),a=this;return isRational(t)?calculateNewInterval(n,function(l){return toSimpleInterval(a,l).add(toSimpleInterval(t,l))},{skipFactorization:!0}):(n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(l){return toSimpleInterval(a,l).add(toSimpleInterval(t,l))}))};PolynomialRoot.prototype.multiply=function(t){var n=this;{let d=Math.gcd(n.polynomial.getGCDOfTermDegrees(),t.polynomial.getGCDOfTermDegrees());if(d>1){var a=n._pow(d).multiply(t._pow(d))._nthRoot(d);return d%2===0&&n.sign()*t.sign()<0&&(a=a.negate()),a}}const l=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),u=d=>new Expression.Polynomial(Polynomial$1.of(d));var c=t.polynomial._exponentiateRoots(-1).map(u)._scaleRoots(l),p=Polynomial$1.resultant(n.polynomial.map(u),c).polynomial.primitivePart();return calculateNewInterval(p,function(d){return toSimpleInterval(n,d).multiply(toSimpleInterval(t,d))})};PolynomialRoot.prototype.add=function(t){var n=this;if(n.polynomial.isEven()&&n.polynomial.equals(t.polynomial)&&n.equals(t.negate()))return new PolynomialRoot(Polynomial$1.of(Expression.ONE).shift(1),{a:Expression.ONE.negate(),b:Expression.ONE});const a=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),l=p=>new Expression.Polynomial(Polynomial$1.of(p));var u=t.polynomial._scaleRoots(Expression.ONE.negate()).map(l)._translateRoots(a),c=Polynomial$1.resultant(n.polynomial.map(l),u).polynomial.primitivePart();return calculateNewInterval(c,function(p){return toSimpleInterval(n,p).add(toSimpleInterval(t,p))})};PolynomialRoot.prototype.negate=function(){return new PolynomialRoot(this.polynomial._scaleRoots(Expression.ONE.negate()),{b:this.interval.a.negate(),a:this.interval.b.negate()})};PolynomialRoot.prototype.inverse=function(){var t=this.polynomial._exponentiateRoots(-1);console.assert(this.interval.a.getNumerator().sign()===this.interval.b.getNumerator().sign());var n=this;return calculateNewInterval(t,function(a){return toSimpleInterval(n,a).inverse(a)})};PolynomialRoot.prototype.sign=function(){if(this.polynomial.getCoefficient(0).equals(Expression.ZERO)&&this.interval.a.getNumerator().sign()<=0&&this.interval.b.getNumerator().sign()>=0)return 0;if(this.interval.a.getNumerator().sign()>=0)return 1;if(this.interval.b.getNumerator().sign()<=0)return-1;throw new TypeError("should not happen")};PolynomialRoot.prototype._pow=function(t){var n=function(u,c,p){if(!(c>=0))throw new RangeError;if(c>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return c<1?p:2*Math.floor(c/2)!==c?n(u,c-1,p.multiply(u)):n(u._pow(2),Math.floor(c/2),p)};if(t===0)return new PolynomialRoot(Polynomial$1.of(Expression.ONE.negate(),Expression.ONE),SimpleInterval.from({a:Expression.ZERO,b:Expression.TWO}));var a=Math.gcd(t,this.polynomial.getGCDOfTermDegrees());if(a===1)return n(this,t-1,this);if(a<t)return this._pow(a)._pow(t/a);var l=void 0;return t%2===0&&this.interval.b.getNumerator().sign()<=0?l={a:this.interval.b._pow(t),b:this.interval.a._pow(t)}:l={a:this.interval.a._pow(t),b:this.interval.b._pow(t)},new PolynomialRoot(this.polynomial._exponentiateRoots(t),l)};const $=function(){return new Expression.Symbol("")};PolynomialRoot.prototype._nthRoot=function(t){var n=this.polynomial._exponentiateRoots(1/t),a=this;return calculateNewInterval(n,function(l){return toSimpleInterval(Expression.NthRoot.makeRoot(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),a)),t),l)})};PolynomialRoot.prototype.equals=function(t){if(this===t)return!0;if(this.polynomial.getDegree()!==t.polynomial.getDegree())return!1;if(this.polynomial.equals(t.polynomial)&&this.interval.a.equals(t.interval.a)&&this.interval.b.equals(t.interval.b))return!0;const n=intersection(this.interval,t.interval);if(n==null)return!1;if(this.polynomial.equals(t.polynomial)){const l=this.polynomial.numberOfRoots(n);if(l===1)return!0;if(l===0)return!1;throw new TypeError}if(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial).getDegree()===0)return!1;var a=this.add(t.negate()).interval;return a.a.getNumerator().sign()<=0&&a.b.getNumerator().sign()>=0};PolynomialRoot._calculateNewInterval=calculateNewInterval;LazyPolynomialRoot._calculateNewInterval=calculateNewInterval;PolynomialRoot._toSimpleInterval=toSimpleInterval;LazyPolynomialRoot._toSimpleInterval=toSimpleInterval;var _isSimpleForUpgrade=function(t,n){if(t instanceof Expression.Multiplication){return!0;//!?
}return t instanceof Expression.Addition&&!(t.a instanceof Expression.Addition)?_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n):t.equals(n)||t instanceof Expression.Integer||t instanceof Expression.Complex||t instanceof Expression.NthRoot||t instanceof Expression.Exponentiation&&_isSimpleForUpgrade(t.a,n)&&t.b instanceof Expression.Integer||t instanceof Expression.Multiplication&&_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n)||t instanceof Expression.Division&&_isSimpleForUpgrade(t.getNumerator(),n)&&t.b instanceof Expression.Integer};PolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;LazyPolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;function LazyPolynomialRoot(t,n,a){if(!(t instanceof Polynomial$1))throw new TypeError;if(!(n instanceof Polynomial$1)||n.getDegree()!==0)throw new TypeError;if(!t._testCoefficients(l=>!(l instanceof Expression.Division)))throw new TypeError;console.assert(a instanceof PolynomialRoot),this._p1=t,this._p2=n,this._root=a}LazyPolynomialRoot.prototype.toDecimal=function(t){var n=function(Q,Ct,ar){for(var en=toSimpleInterval(Expression.ZERO,ar),tn=Q.getDegree();tn>=0;tn--){en=en.multiply(Ct);var on=toSimpleInterval(Q.getCoefficient(tn),Math.max(1,ar));en=en.add(on)}return en},a=toSimpleInterval(this._root,t),l=this._p1,u=this._p2,c=n(l,a,t),p=n(u,a,t),d=c.multiply(p.inverse(t));return d.toExpressionsInterval()};LazyPolynomialRoot.prototype.toString=function(){return"["+this.getAlphaExpression()+", where "+this._root+"]"};function makeExpressionWithPolynomialRoot(t,n,a){var l=a;if(n.getDegree()!==0||!(n.getCoefficient(0)instanceof Expression.Integer)){const Ct=n.modularInverse(a.polynomial).primitivePart(),ar=n.multiply(Ct).divideAndRemainder(a.polynomial).remainder;if(n.getDegree()>0){var c=ar.getContent().getDenominator();return makeExpressionWithPolynomialRoot(t.multiply(Ct).scale(c),ar.scale(c),a)}}var u=function(Ct,ar){if(!(ar.getLeadingCoefficient()instanceof Expression.Integer)){var en=Expression.getConjugate(ar.getLeadingCoefficient());return u(Ct.scale(en),ar.scale(en))}var tn=Ct.getContent().gcd(ar.getContent());return tn.equals(Expression.ONE)||(Ct=Ct.scale(tn.inverse()),ar=ar.scale(tn.inverse())),[Ct,ar]};if(t.equals(Polynomial$1.ZERO))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)];if(t.getDegree()===0&&n.getDegree()===0)return u(t,n);//!
var c=function(Ct){return Ct.divideAndRemainder(l.polynomial).remainder};t=c(t),n=c(n);var p=t.map(Ct=>Ct.getDenominator().inverse()).getContent().getDenominator();if(t=t.scale(p),n=n.scale(p),!t.hasIntegerCoefficients()){var d=!0;if(a instanceof PolynomialRoot){var Q=new LazyPolynomialRoot(t,Polynomial$1.of(Expression.ONE),a).toDecimal(53);//!new - trying to optimize (!)
d=Q.b.sign()>=0&&Q.a.sign()<=0}if(d&&t.hasRoot(l))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)]}return u(t,n)}PolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;LazyPolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;function simplifyExpressionWithPolynomialRoot(t,n,a){const l=makeExpressionWithPolynomialRoot(t,n,a);return new LazyPolynomialRoot(l[0],l[1],a)}PolynomialRoot.create=function(t,n,a){return new PolynomialRoot(t,n,a)};LazyPolynomialRoot.create=function(t,n,a){return fromRoot(new PolynomialRoot(t,n,a))};function fromRoot(t){return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),t)}LazyPolynomialRoot.prototype.scale=function(t){console.assert(Expression.isRealAlgebraicNumber(t));var n=this._p1.scale(t.getNumerator()),a=this._p2.scale(t.getDenominator());return t instanceof Expression.Integer?new LazyPolynomialRoot(n,a,this._root):simplifyExpressionWithPolynomialRoot(n,a,this._root)};LazyPolynomialRoot.prototype.translate=function(t){return console.assert(Expression.isRealAlgebraicNumber(t)),simplifyExpressionWithPolynomialRoot(this._p1.scale(t.getDenominator()).add(this._p2.scale(t.getNumerator())),this._p2.scale(t.getDenominator()),this._root)};var toPolynomialWithIntegerCoefficients=function(t){if(!t.hasIntegerCoefficients()){var n=new Expression.Symbol("$$"),a=t.calcAt(n),l=Expression.getConjugateExpression(a);if(l!=null&&!l.equals(a))return Polynomial$1.toPolynomial(l,n)}return t};function upgrade(t,n,a){if(n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getCoefficient(1).equals(Expression.ONE)&&a.getDegree()===0)return a.getCoefficient(0).equals(Expression.ONE)?t:t.scale(a.getCoefficient(0).inverse());if(n.equals(Polynomial$1.ZERO))return PolynomialRoot.create(Polynomial$1.of(Expression.ZERO,Expression.ONE),{a:Expression.ZERO,b:Expression.ZERO});if(n.getDegree()===0&&a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)){const d=n.getCoefficient(0);return PolynomialRoot.create(Polynomial$1.of(d.negate(),Expression.ONE),{a:d,b:d})}if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===n.getGCDOfTermDegrees()&&n.getLeadingCoefficient().equals(Expression.ONE)&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getDegree()===t.polynomial.getGCDOfTermDegrees())return t._pow(n.getDegree());if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===1&&n.getCoefficient(1).equals(Expression.ONE))return t.translate(n.getCoefficient(0));if(a.getDegree()===0&&n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO))return t.scale(n.getCoefficient(1).divide(a.getCoefficient(0)));var l=Expression.ONE;a.getDegree()===0&&a.hasIntegerCoefficients()&&(l=a.getLeadingCoefficient(),a=Polynomial$1.of(Expression.ONE));var u=n.subtract(Polynomial$1.of(new Expression.Symbol("")).multiply(a));u=toPolynomialWithIntegerCoefficients(u);const c=d=>new Expression.Polynomial(Polynomial$1.of(d));u=u.map(d=>new Expression.Polynomial(Polynomial$1.toPolynomial(d,new Expression.Symbol(""))));var p=Polynomial$1.resultant(u,t.polynomial.map(c)).polynomial.primitivePart();return l!==Expression.ONE&&(p=p._scaleRoots(l.inverse()).primitivePart()),PolynomialRoot._calculateNewInterval(p,function(d){return toSimpleInterval(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(n,a.scale(l),t)),d)})}LazyPolynomialRoot.prototype.multiply=function(t){if(this._root.equals(t._root))return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p1),this._p2.multiply(t._p2),this._root);var n=upgrade(this._root,this._p1,this._p2).multiply(upgrade(t._root,t._p1,t._p2));return fromRoot(n)};LazyPolynomialRoot.prototype.add=function(t){if(this._root.equals(t._root)){var n=t._p2.getContent().gcd(this._p2.getContent());return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p2.scale(n.inverse())).add(t._p1.multiply(this._p2.scale(n.inverse()))),this._p2.scale(n.inverse()).multiply(t._p2.scale(n.inverse())).scale(n),this._root)}var a=upgrade(this._root,this._p1,this._p2).add(upgrade(t._root,t._p1,t._p2));return fromRoot(a)};LazyPolynomialRoot.prototype.negate=function(){return new LazyPolynomialRoot(this._p1.negate(),this._p2,this._root)};LazyPolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot(this._p2,this._p1,this._root)};LazyPolynomialRoot.prototype.sign=function(){if(this._p1.equals(Polynomial$1.ZERO))return 0;let t=1;for(;;){var n=this.toDecimal(t);if(n.a.getNumerator().sign()>=0)return 1;if(n.b.getNumerator().sign()<=0)return-1;t*=2,t>8&&console.debug("hm...")}};LazyPolynomialRoot.prototype._pow=function(t){return simplifyExpressionWithPolynomialRoot(this._p1._pow(t),this._p2._pow(t),this._root)};LazyPolynomialRoot.prototype._nthRoot=function(t){if(this._p2.getDegree()===0&&this._p2.getCoefficient(0).equals(Expression.ONE)&&this._p1.getDegree()===1&&this._p1.getCoefficient(0).equals(Expression.ZERO)&&this._p1.getCoefficient(1).equals(Expression.ONE)){var n=this._root._nthRoot(t);return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),n)}var a=function(c,p){var d=c.getSquareFreePolynomial();return d._pow(p).equals(c)?d:null},l=a(this._p1,t);const u=this._p2.getCoefficient(0);return l!=null&&this._p2.getDegree()===0&&u instanceof Expression.Integer&&u.sign()>0?simplifyExpressionWithPolynomialRoot(l,Polynomial$1.of(u._nthRoot(t)),this._root):this.upgrade()._nthRoot(t)};LazyPolynomialRoot.prototype.equals=function(t){if(this._root.equals(t._root))return this._p1.equals(t._p1)&&this._p2.equals(t._p2)||this.add(t.negate()).sign()===0;//!TODO: remove (hack to avoid error)
if(toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(this),{significantDigits:3})!==toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(t),{significantDigits:3}))return!1;//!
var n=upgrade(this._root,this._p1,this._p2).equals(upgrade(t._root,t._p1,t._p2));return n};PolynomialRoot.prototype.upgrade=function(){return this};LazyPolynomialRoot.prototype.upgrade=function(){return fromRoot(upgrade(this._root,this._p1,this._p2))};PolynomialRoot.prototype._calc=function(t){return upgrade(this,t.calcAt($()))};LazyPolynomialRoot.prototype._calc=function(t){var n=t.calcAt(this.getAlphaExpression());return simplifyExpressionWithPolynomialRoot(Polynomial$1.toPolynomial(n.getNumerator(),$()),Polynomial$1.toPolynomial(n.getDenominator(),$()),this._root)};PolynomialRoot.prototype.getAlpha=function(t){return{polynomial:this.polynomial,interval:this.interval}};LazyPolynomialRoot.prototype.getAlpha=function(t){return this._root.getAlpha()};PolynomialRoot.prototype.getAlphaExpression=function(t){return $()};LazyPolynomialRoot.prototype.getAlphaExpression=function(t){return this._p1.calcAt($()).divide(this._p2.calcAt($()))};PolynomialRoot.prototype.getAlphaPolynomial=function(t){return Polynomial$1.of(Expression.ZERO,Expression.ONE)};LazyPolynomialRoot.prototype.getAlphaPolynomial=function(t){return[this._p1,this._p2]};globalThis.testables=globalThis.testables||{};globalThis.testables.LazyPolynomialRoot=LazyPolynomialRoot;globalThis.testables.PolynomialRoot=PolynomialRoot;globalThis.testables.toSimpleInterval=toSimpleInterval;globalThis.testables.SimpleInterval=SimpleInterval;console.assert(Object.keys(PolynomialRoot).join(" ")===Object.keys(LazyPolynomialRoot).join(" ")),console.assert(Object.keys(PolynomialRoot.prototype).join(" ")===Object.keys(LazyPolynomialRoot.prototype).join(" ")),console.assert(PolynomialRoot.prototype.__proto__===LazyPolynomialRoot.prototype.__proto__);Expression.PolynomialRootSymbol=function(){throw new TypeError};function ExpressionWithPolynomialRoot(){throw new TypeError}Expression.ExpressionWithPolynomialRoot=ExpressionWithPolynomialRoot;function ExpressionPolynomialRoot(t){const n=t.getAlpha(),[a,l]=t.getAlphaPolynomial(),u=n.polynomial,c=n.interval;if(a.getDegree()<=0&&l.getDegree()<=0)return a.getCoefficient(0).divide(l.getCoefficient(0));if(u.getDegree()===1||u.getDegree()===2||u.getDegree()===4&&!1||u.getDegree()===u.getGCDOfTermDegrees()){var p=u.getDegree()===u.getGCDOfTermDegrees()&&u.getDegree()%2===1?[u.getCoefficient(0).negate().divide(u.getLeadingCoefficient())._nthRoot(u.getDegree())]:u.getroots();for(var d of p)if(!Expression.has(d,ExpressionPolynomialRoot)&&(Expression._isPositive(d.subtract(c.a))&&Expression._isPositive(d.subtract(c.b).negate())||d.equals(c.b)||d.equals(c.a))){if(a.getDegree()===1&&a.getCoefficient(0).equals(Expression.ZERO)&&a.getCoefficient(1).equals(Expression.ONE)&&l.getDegree()===0&&l.getCoefficient(0).equals(Expression.ONE))return d;var Q=a.calcAt(d),Ct=l.calcAt(d);return Q.divide(Ct)}}if(u.getDegree()<3)throw new TypeError;if(u.getDegree()/u.getGCDOfTermDegrees()>64*2*32)throw new Error;Expression.Symbol.call(this,null),this.root=t,Object.freeze(this)}ExpressionPolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);ExpressionPolynomialRoot.create=function(t,n,a){return new ExpressionPolynomialRoot(LazyPolynomialRoot.create(t,n,a))};ExpressionPolynomialRoot.prototype.multiplyInteger=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiply=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiplyExpression=function(t){return t.equals(Expression.ONE)?this:Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiply(t):Expression.Symbol.prototype.multiplyExpression.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyAddition=function(t){return Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiplyExpression(t):Expression.Symbol.prototype.multiplyAddition.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyComplex=function(t){return this.multiply(t)};Expression.prototype.multiplyPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?n:n.equals(Expression.ONE)?t:new ExpressionPolynomialRoot(t.root.scale(n))}return this instanceof Expression.Complex&&!this.imaginary.equals(Expression.ONE)?this.imaginary.multiply(t).multiply(Expression.I).add(this.real.multiply(t)):this.multiplyExpression(t)};ExpressionPolynomialRoot.prototype._pow=function(t){return new ExpressionPolynomialRoot(this.root._pow(t))};ExpressionPolynomialRoot.prototype.pow=function(t){return t instanceof Expression.Integer?this._pow(t.toNumber()):t instanceof Expression.Division&&t.getDenominator()instanceof Expression.Integer?this._nthRoot(t.getDenominator().toNumber()).pow(t.getNumerator()):Expression.Symbol.prototype.pow.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.multiply(n.root))};ExpressionPolynomialRoot.prototype.add=function(t){return t.addPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.addPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.add(n.root))};Expression.prototype.addPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?t:new ExpressionPolynomialRoot(t.root.translate(n))}return this.addExpression(t)};ExpressionPolynomialRoot.prototype.addExpression=function(t){return this.add(t);//!?
};ExpressionPolynomialRoot.prototype.divide=function(t){return t instanceof Expression.Exponentiation?t.divideExpression(this):t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Exponentiation?this.multiply(t.a.inverse()).divide(t.b):this.multiply(t.inverse())};ExpressionPolynomialRoot.prototype.divideExpression=function(t){return t.equals(Expression.ZERO)?t:t.multiply(this.inverse())};ExpressionPolynomialRoot.prototype.inverse=function(){return new ExpressionPolynomialRoot(this.root.inverse())};ExpressionPolynomialRoot.prototype.sign=function(){return this.root.sign()};var toRadicalExpression=function(t){t=t.upgrade();const n=t.getAlpha();if(n.polynomial.getDegree()===1)return n.polynomial.getroots()[0];var a=n.polynomial.getGCDOfTermDegrees();if(a>1){const c=toRadicalExpression(t._pow(a));if(c!=null){const p=Expression.NthRoot.makeRoot(c,a);return a%2===1||t.sign()>0?p:new Expression.Negation(p)}}var l=n.polynomial._getShiftToDepressed();if(!l.equals(Expression.ZERO)){var u=toRadicalExpression(t.translate(l));if(u!=null)return new Expression.Addition(u,l.negate())}return null};function EmptyMap(){}EmptyMap.prototype.has=function(){return!1};EmptyMap.prototype.set=function(){};EmptyMap.prototype.get=function(){return null};function weakMap(){return typeof WeakMap<"u"?new WeakMap:new EmptyMap}const cache2rounding=weakMap(),DEFAULT_ROUNDING={fractionDigits:3};ExpressionPolynomialRoot.prototype._toDecimalString=function(t){t=t||{};const n=t.rounding||DEFAULT_ROUNDING;let a=cache2rounding.get(n);a==null&&(a=weakMap(),cache2rounding.set(n,a));var l=a.get(this);return l!=null||(l=toDecimalStringInternal$1(this,n),a.set(this,l)),l};ExpressionPolynomialRoot.prototype.toString=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toString(t)}return this._toDecimalString(t)};ExpressionPolynomialRoot.prototype.equals=function(t){return t instanceof ExpressionPolynomialRoot?this.root.equals(t.root):t instanceof Expression.Integer&&t.equals(Expression.ZERO)||!Expression.isRealAlgebraicNumber(t)?!1:this.subtract(t).equals(Expression.ZERO)};ExpressionPolynomialRoot.prototype.compare4MultiplicationComplex=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4MultiplicationNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype.compare4Multiplication=function(t){return t instanceof Expression.Complex||t instanceof Expression.Integer?1:t instanceof ExpressionPolynomialRoot||t instanceof Expression.NthRoot?0:t instanceof Expression.Symbol?-1:Expression.Symbol.prototype.compare4Multiplication.call(this,t)};ExpressionPolynomialRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};ExpressionPolynomialRoot.prototype.compare4Addition=function(t){return t instanceof ExpressionPolynomialRoot?0:t instanceof Expression.Symbol?1:t instanceof Expression.NthRoot||Expression.isRealAlgebraicNumber(t)?0:Expression.Symbol.prototype.compare4Addition.call(this,t)};ExpressionPolynomialRoot.prototype.compare4AdditionSymbol=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4AdditionNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype._nthRoot=function(t){if(this.root.sign()<0&&t%2===0){if(t!==2)throw new RangeError("NotSupportedError");return Expression.I.multiply(this.negate()._nthRoot(t))}return new ExpressionPolynomialRoot(this.root._nthRoot(t))};ExpressionPolynomialRoot.prototype.upgrade=function(){return new ExpressionPolynomialRoot(this.root.upgrade())};ExpressionPolynomialRoot.prototype.isNegative=function(){return this.root.sign()<0};Expression.prototype.upgrade=function(){return this};ExpressionPolynomialRoot.prototype.isExact=function(){{var t=this._toRadicalExpression();if(t!=null)return!0}return!1};ExpressionPolynomialRoot.prototype.negate=function(){return new ExpressionPolynomialRoot(this.root.negate())};ExpressionPolynomialRoot.prototype.simplifyExpression=function(){return this};ExpressionPolynomialRoot.prototype.toMathML=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toMathML(t)}return Expression._decimalToMathML(this._toDecimalString(t))};const cache=weakMap();ExpressionPolynomialRoot.prototype._toRadicalExpression=function(){if(cache.has(this))return cache.get(this);var t=this.root.getAlpha().polynomial;if(t.getDegree()/t.getGCDOfTermDegrees()<10&&LazyPolynomialRoot._isSimpleForUpgrade(this.root.getAlphaExpression(),new Expression.Symbol(""))){var n=toRadicalExpression(this.root);if(n!=null)return cache.set(this,n),n}cache.set(this,null)};ExpressionPolynomialRoot.prototype.getPrecedence=function(){{var t=this._toRadicalExpression();if(t!=null)return t.getPrecedence()}return 1e3};ExpressionPolynomialRoot.prototype.isRightToLeftAssociative=function(){return!0};ExpressionPolynomialRoot.prototype.isUnaryPlusMinus=function(){return!0};ExpressionPolynomialRoot.prototype._calc=function(t){return new ExpressionPolynomialRoot(this.root._calc(t))};Expression.ExpressionPolynomialRoot=ExpressionPolynomialRoot;Expression.toPolynomialRoot=function(t){var n=t instanceof Expression.NthRoot?t.a:t,a=t instanceof Expression.NthRoot?t.n:1,l=new Expression.Symbol("x");if(!(n.getDenominator()instanceof Expression.Integer))throw new TypeError;var u=Polynomial$1.toPolynomial(Expression.getConjugateExpression(l._pow(a).subtract(n).getNumerator()),l);if(u.getDegree()<=8){var c=u.factorize();if(c!=null&&c.getDegree()<u.getDegree()&&c.getDegree()===4){var p=Polynomial$1.polynomialGCD(c,Polynomial$1.toPolynomial(l._pow(a).subtract(n),l)).getroots();for(const Ct of p)if(Ct._pow(a).equals(n))return Expression._isPositive(Ct)||a%2!==0?Ct:Ct.negate()}}for(;u.getDegree()>0;){var c=u.factorize()||u;const ar=a===2&&Expression.has(t.radicand,Expression.Complex);var d=c.getZeros(ar);if(a%2===0&&d.length===2&&Expression._isPositive(d[1])&&Expression._isPositive(n))return d[1];for(var Q of d)if((Q.root!=null&&Expression._isPositive(Q)||ar&&Expression._isPositive(Expression.getComplexNumberParts(Q).real))&&Q._pow(a).equals(n))return Q;u=u.divideAndRemainder(c,"throw").quotient}console.error(t.toString())};Polynomial$1.prototype.signVariations=function(){let t=0,n=0;for(let a=this.a.size-1;a>=0;a-=1){const l=this.a.coefficient(a).sign();l!==0&&(n===0?n=l:n!==l&&(n=l,t+=1))}return t};Polynomial$1.prototype._getNonNegativeRealRootIntervals=function(){const t=this.getPositiveRealRootsBound();if(t.equals(Expression.ZERO))return[];const n=this._scaleRoots(t.inverse()),a=(this.getCoefficient(0).equals(Expression.ZERO)?1:0)+this.signVariations(),l=function(u,c,p){const d=p.getCoefficient(0).equals(Expression.ZERO),Ct=(d?p.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient:p)._exponentiateRoots(-1)._translateRoots(Expression.ONE.negate());let ar=Ct.signVariations();if(ar===1&&d){ar=NaN;//!?
}if(ar===0&&d)return[{a:u,b:u}];if(ar===1&&Ct.getCoefficient(0).equals(Expression.ZERO)){ar=NaN;//!?
}if(ar===1)return[{a:u,b:c}];if(ar!==0){var en=p._scaleRoots(Expression.TWO),tn=u.add(c).divide(Expression.TWO),on=l(u,tn,en);if(on.length>=a){return on;//!
}var cn=en._translateRoots(Expression.ONE.negate()),gn=l(tn,c,cn);return on.concat(gn)}return[]};return l(Expression.ZERO,Expression.ONE,n).map(u=>({a:u.a.multiply(t),b:u.b.multiply(t)}))};Polynomial$1.prototype.getRootIntervals=function(){return this._scaleRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().map(t=>({a:t.b.negate(),b:t.a.negate()})).reverse().concat(this._getNonNegativeRealRootIntervals())};Polynomial$1.prototype.getPositiveRealRootsBound=function(){let t=null;const n=this.getDegree(),a=this.getLeadingCoefficient();for(let l=0;l<=this.getDegree()-1;l+=1){const u=this.getCoefficient(l).negate().truncatingDivide(a);if(u.sign()>=0){const c=Expression.TWO.multiply(u._integerNthRoot(n-l).add(Expression.ONE));(t==null||t.compareTo(c)<0)&&(t=c)}}if(t==null)return Expression.ZERO;//!2020-12-19
t=Expression.TWO._pow(t.getNumerator().bitLength()-t.getDenominator().bitLength()+1);//!
return t};Polynomial$1.prototype.getZero=function(t,n){var a=function(ox,lx){return lx.compareTo(Expression.ZERO)<0&&(ox=ox.negate(),lx=lx.negate()),ox.compareTo(Expression.ZERO)>=0?ox.truncatingDivide(lx):ox.add(Expression.ONE).truncatingDivide(lx).subtract(Expression.ONE)},l=function(ox,lx){var cx=ox.getNumerator().multiply(lx),dx=ox.getDenominator();return a(cx,dx)};const u=function(ox){return Math.sign(ox.getNumerator().compareTo(Expression.ZERO))},c=Expression.TWO,p=Expression.pow(c,n);if(!(p instanceof Expression.Integer))throw new RangeError("epsilon^-1 is not an integer");var d=t.a,Q=t.b;if(p.multiply(d.getDenominator().multiply(Q.getNumerator()).subtract(Q.getDenominator().multiply(d.getNumerator()))).compareTo(Q.getDenominator().multiply(d.getDenominator()))>0){var Ct=n>=16/Math.log10(c.toNumber())?this.getZero(t,Math.floor(n/4)):t;d=Ct.a,Q=Ct.b,this.getDegree();var ar=this._scaleRoots(p);ar=ar.primitivePart();const ox=l(d,p).add(Expression.ONE),lx=l(Q,p);console.assert(ox.multiply(d.getDenominator()).subtract(d.getNumerator().multiply(p)).compareTo(Expression.ZERO)>=0),console.assert(lx.multiply(Q.getDenominator()).subtract(Q.getNumerator().multiply(p)).compareTo(Expression.ZERO)<=0);let cx=ar.calcAt(ox),dx=ar.calcAt(lx);const hx=u(dx),fx=u(cx);if(fx===0)return{a:ox.divide(p),b:ox.divide(p)};if(hx===0)return{a:lx.divide(p),b:lx.divide(p)};if(fx===hx){if(fx!==(u(this.calcAt(d))||u(this.calcAt(Q).negate())||fx))return{a:d,b:ox.divide(p)};if(hx!==u(this.calcAt(Q)))return{a:lx.divide(p),b:Q};throw new RangeError}d=ox,Q=lx;for(var en=0,tn=ar.derive(),on=Q.subtract(d);on.compareTo(Expression.ONE)>0;){var cn=d.add(on.truncatingDivide(Expression.TWO));if(en%3!==2&&on.compareTo(d.abs())<0){var gn=en%3===1?d:Q,Cn=gn===d?cx:gn===Q?dx:void 0,ex=tn.calcAt(gn);ex.equals(Expression.ZERO)||(gn=gn.subtract(Cn.truncatingDivide(ex)),gn.compareTo(d)<=0&&(gn=d.add(Expression.ONE)),gn.compareTo(Q)>=0&&(gn=Q.subtract(Expression.ONE)),cn=gn)}en+=1;var ix=ar.calcAt(cn),ax=u(ix);ax===hx?(Q=cn,dx=ix):ax===fx?(d=cn,cx=ix):(d=cn,Q=cn,cx=ix,dx=ix),on=Q.subtract(d)}d=d.divide(p),Q=Q.divide(p)}return{a:d,b:Q}};Polynomial$1.prototype.hasRoot=function(t){var n=this;if(n.equals(Polynomial$1.ZERO))return!0;//!new 2021-02-20 (TODO: CHECK)
if(!n.hasIntegerCoefficients()&&n.hasComplexCoefficients())return n.map(en=>en instanceof Expression.Integer?en:en.real).hasRoot(t)&&n.map(en=>en instanceof Expression.Integer?Expression.ZERO:en.imaginary).hasRoot(t);//!
if(!n.hasIntegerCoefficients()&&!n.hasComplexCoefficients()&&!n._testCoefficients(en=>!Expression.has(en,Expression.Complex))&&n._testCoefficients(en=>Expression.isConstant(en)))return n.map(en=>Expression.getComplexNumberParts(en).real).hasRoot(t)&&n.map(en=>Expression.getComplexNumberParts(en).imaginary).hasRoot(t);var a=t.polynomial,l=null;//!
if(!n.hasIntegerCoefficients()){var u=new Expression.Symbol("~"),c=n.calcAt(u),p=Expression.getMultivariatePolynomial(c);p!=null&&!p.v.equals(u)&&p.v instanceof Expression.Symbol&&(l=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(p.p.getContent(),u),a))}l==null&&(l=Polynomial$1.polynomialGCD(n,a));//!
if(l.getDegree()<1)return!1;var d=t.interval;if(!l.hasIntegerCoefficients()){var u=new Expression.Symbol("$$"),Q=l.calcAt(u),Ct=Expression.getComplexNumberParts(Q);Ct!=null&&!Ct.imaginary.equals(Expression.ZERO)&&(l=Polynomial$1.toPolynomial(Ct.real.subtract(Ct.imaginary.multiply(Expression.I)).multiply(Q),u).getSquareFreePolynomial())}var ar=l._translateRoots(d.a.negate()).signVariations()-l._translateRoots(d.b.negate()).signVariations();return ar%2===1};Polynomial$1.prototype.numberOfRoots=function(t=null){if(!this.hasIntegerCoefficients())throw new RangeError;t==null&&(t={a:this._scaleRoots(Expression.ONE.negate()).getPositiveRealRootsBound().negate(),b:this.getPositiveRealRootsBound()});var n=this;t.a.equals(Expression.ZERO)||(n=n._scaleRoots(t.a.inverse())._translateRoots(Expression.ONE.negate()),t={a:Expression.ZERO,b:t.b.divide(t.a).subtract(Expression.ONE)},t.b.getNumerator().sign()<0&&(t={a:t.a,b:t.b.negate()},n=n._scaleRoots(Expression.ONE.negate()))),console.assert(t.a.equals(Expression.ZERO));for(var a=0;n.getCoefficient(a).equals(Expression.ZERO);)a+=1;if(a>1)throw new RangeError;return a>0&&(n=n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(a),"throw").quotient),(a>0?1:0)+n._exponentiateRoots(-1)._scaleRoots(t.b)._translateRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().length};Polynomial$1.prototype.getZeros=function(t=!1){if(this.getCoefficient(0).equals(Expression.ZERO)){if(this.getLeadingCoefficient().equals(Expression.ZERO))throw new TypeError;for(var n=0;this.getCoefficient(n).equals(Expression.ZERO);)n+=1;var u=this.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n)).quotient.getZeros(t);return u.concat(new Array(n).fill(Expression.ZERO))}var a=this.getContent(),l=this.scale(a.getDenominator()).divideAndRemainder(Polynomial$1.of(a.getNumerator()),"throw").quotient,u=l.squareFreeFactors(),c=u.a0,p=u.a1;if(c.getDegree()!==0){for(var d=p.getZeros(t),Q=c.getZeros(t),ix=[],Ct=void 0,n=0;n<Q.length;n+=1){var ar=Q[n];ar!==Ct&&(ix.push(ar),Ct=ar),ix.push(ar)}return d.concat(ix)}var en=l;if(en.getDegree()===0)return[];//!
en=en.scale(en.getContent().inverse());//!
if(!l.hasIntegerCoefficients()){var tn=function(Mx){if(!Mx.hasIntegerCoefficients()){var Dx=new Expression.Symbol("$$"),Ox=Mx.calcAt(Dx),Lx=Expression.getConjugateExpression(Ox);if(Lx!=null&&!Lx.equals(Ox))return Polynomial$1.toPolynomial(Lx,Dx);for(var Nx=0;Nx<Mx.getDegree();Nx+=1){var Lx=Mx.getCoefficient(Nx);if(Lx instanceof Expression.ExpressionPolynomialRoot){var Gx=Lx.root.upgrade().getAlpha(),Ux=new Expression.Symbol("$a"),Hx=Polynomial$1.toPolynomial(Mx.map(Zx=>Zx===Lx?Ux:Zx).calcAt(new Expression.Symbol("$$")),Ux),Vx=Gx.polynomial,zx=Polynomial$1.toPolynomial(Polynomial$1.resultant(Hx,Vx),new Expression.Symbol("$$")).primitivePart();return tn(zx)}}}return Mx};const Fx=tn(l);if(!Fx.equals(l)){var ix=[],u=Fx.getZeros(t);console.time("checking roots");for(var n=0;n<u.length;n+=1){var ar=u[n];(ar instanceof ExpressionPolynomialRoot&&ar.root.getAlphaExpression().equals(new Expression.Symbol(""))?l.hasRoot(ar.root.getAlpha()):ar instanceof ExpressionWithPolynomialRoot&&ar.e===ar.root?l.hasRoot(ar.root):(ar instanceof ExpressionWithPolynomialRoot?ar._calc(l):l.calcAt(ar)).equals(Expression.ZERO))?ix.push(ar):console.debug(ar.root)}return console.timeEnd("checking roots"),ix}//!new
var on=Polynomial$1.of(Expression.ONE).shift(l.getDegree()).subtract(Polynomial$1.of(l.getLeadingCoefficient())).getroots();if(on.length!==0){on=on[0];var cn=l.getCoefficient(l.getDegree()-1).divide(on._pow(l.getDegree()-1)).subtract(Expression.ZERO).divide(Expression.Integer.fromNumber(l.getDegree())),gn=new Expression.Symbol("$$"),Cn=Polynomial$1.toPolynomial(en.calcAt(gn.subtract(cn).divide(on)).getNumerator(),gn);if(Cn.hasIntegerCoefficients())return Cn.getZeros(t).map(function(Mx){return Mx.subtract(cn).divide(on)})}//!
return console.debug("not all roots were found!!!"),[]}//!new
en.getDegree();//!
for(var ex=en.getRootIntervals(),ix=new Array(ex.length),n=0;n<ex.length;n+=1){var ar=en.getZero(ex[n],0);if(ar.a.equals(ar.b))ix[n]=ar.a;else{//! p, not f, as f may have roots with multiplicity > 1
{const Dx=ExpressionPolynomialRoot.create(en,ar,{skipFactorization:!0});ix[n]=Dx}}}//!new
if(ex.length!==en.getDegree()&&t){//!new
if(en.getDegree()>=4){var ax=en.factorize();if(ax!=null)return ax.getZeros(t).concat(en.divideAndRemainder(ax,"throw").quotient.getZeros(t))}//!
if(en.isEven()){const Ox=en._exponentiateRoots(2).getZeros(t);for(var ar of Ox){var ox=function(Nx){var rE=Expression.getComplexNumberParts(Nx),Gx=rE.real,Ux=rE.imaginary,Hx=Gx._pow(2).add(Ux._pow(2)).squareRoot(),Vx=Gx.add(Hx).divide(Expression.TWO).squareRoot(),zx=Ux.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate(),rE=Gx.negate().add(Hx).divide(Expression.TWO),Zx=zx.multiply(rE.squareRoot());return Vx.add(Zx.multiply(Expression.I))};if(!Expression._isPositive(ar)){var lx=ox(ar.e!=null?ar.upgrade():ar);ix.push(lx),ix.push(lx.negate())}}return ix}var cx=en.calcAt(new Expression.Symbol("a").add(new Expression.Symbol("b").multiply(Expression.I))),dx=Expression.getComplexNumberParts(cx);const Fx=dx.real,Mx=dx.imaginary.divide(new Expression.Symbol("b")),Dx=function(Ox){var Lx=Ox.squareFreeFactors();if(Lx.a0.getDegree()!==0)return Dx(Lx.a0).concat(Dx(Lx.a1));var Nx=Ox.factorize();if(Nx!=null){var Lx=Dx(Nx),Gx=Ox.divideAndRemainder(Nx,"throw").quotient;return Gx._getNonNegativeRealRootIntervals().length===0?Lx:Lx.concat(Dx(Gx))}return Ox.getZeros(!1)};//!TODO: 
//!new 2021-01-03
if(ix.length<en.getDegree()){var hx=function(Ox,Lx){var Nx=Polynomial$1.toPolynomial(Fx,new Expression.Symbol(Ox)),Gx=Polynomial$1.toPolynomial(Mx,new Expression.Symbol(Ox));return Polynomial$1.toPolynomial(Polynomial$1.resultant(Nx,Gx),new Expression.Symbol(Lx)).primitivePart()},fx=Dx(hx("a","b"));fx=fx.filter(Ox=>Expression._isPositive(Ox));//!?
fx=fx.map(Ox=>Ox instanceof ExpressionWithPolynomialRoot&&Ox.root.polynomial.getDegree()/Ox.root.polynomial.getGCDOfTermDegrees()<=2?Ox.upgrade():Ox);//!new
{var ux=Polynomial$1.toPolynomial(Fx,new Expression.Symbol("a")).map(Ox=>Polynomial$1.toPolynomial(Ox,new Expression.Symbol("b"))),gx=Polynomial$1.toPolynomial(Mx,new Expression.Symbol("a")).map(Ox=>Polynomial$1.toPolynomial(Ox,new Expression.Symbol("b"))),yx=void 0,_x=Polynomial$1.ZERO;for(var vx of fx){var bx=null;if((!(vx instanceof ExpressionWithPolynomialRoot)||!vx.e.equals(vx.root))&&(!(vx instanceof ExpressionPolynomialRoot)||!vx.root.getAlphaExpression().equals(new Expression.Symbol("")))){var xx=ux.map(Lx=>Lx.calcAt(vx)),Sx=gx.map(Lx=>Lx.calcAt(vx));bx=Polynomial$1.polynomialGCD(xx,Sx)}else{const Lx=(vx instanceof ExpressionPolynomialRoot?vx.root.upgrade().getAlpha():vx.root).polynomial;_x.equals(Lx)||(yx=polynomialGCDModuloPolynomial(ux,gx,Lx),yx=yx.map(Nx=>Nx.polynomial),_x=Lx),bx=yx.map(Nx=>vx._calc(Nx))}if(bx.getDegree()>=3){console.log("g!!!",bx.toString());var Ax=this;window.setTimeout(function(){throw new TypeError("good test: "+Ax.toString())},0)}const Ox=function(Lx){var Nx=Lx.getCoefficient(1).divide(Lx.getCoefficient(2)),Gx=Lx.getCoefficient(0).divide(Lx.getCoefficient(2)),Ux=Nx.divide(Expression.TWO).negate(),Hx=Ux._pow(2).subtract(Gx).squareRoot(),Vx=Ux.subtract(Hx),zx=Ux.add(Hx);return[Vx,zx]};if(bx.getDegree()<=2){const Lx=bx.getDegree()===2?Ox(bx):bx.getroots();for(var Cx of Lx)if(!Expression.has(Cx,Expression.Complex)){var Tx=Cx.add(vx.multiply(Expression.I));ix.push(Tx),ix.push(Tx.complexConjugate())}}}}if(ix.length<en.getDegree()){ix=ix.filter(Ox=>Expression.isReal(Ox));var Px=Dx(hx("b","a"));//!
for(var Cx of Px)for(var vx of fx){var Tx=Cx.add(vx.multiply(Expression.I));en.calcAt(Tx).equals(Expression.ZERO)&&(ix.push(Tx),ix.push(Tx.complexConjugate()))}}}}//!
return ix};function pseudoRemainderSequence(t,n,a="primitive",l=!1){Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees())>1&&console.error("g > 1");let c=!0,p=Expression.ONE;var d={next:function(){if(console.assert(t.getDegree()>=n.getDegree()),!n.equals(Polynomial$1.ZERO)){const Q=t.getDegree()-n.getDegree(),Ct=n.getLeadingCoefficient()._pow(Q+1),ar=t.scale(l?Ct.abs():Ct).divideAndRemainder(n,n._hasIntegerLikeCoefficients()?"throw":void 0),en=ar.quotient,tn=ar.remainder;let on=Expression.ONE;if(a==="trivial")on=Expression.ONE;else if(a==="primitive")on=tn.getContent();else if(a==="subresultant")on=c?Expression.ONE:t.getLeadingCoefficient().multiply(p._pow(Q)),c=!1,p=Q===0?p:n.getLeadingCoefficient()._pow(Q).divide(p._pow(Q).divide(p));else throw new RangeError(a);const cn=tn.map(Cn=>Cn.divide(l?on.abs().negate():on)),gn={R:cn,q:en,:on};return t=n,n=cn,{value:gn,done:!1}}return{value:void 0,done:!0}}};return d[globalThis.Symbol.iterator]=function(){return this},d}Polynomial$1._pseudoRemainderSequence=pseudoRemainderSequence;Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence=function(t,n){function a(Cn,ex){if(Cn.getLeadingCoefficient()instanceof Expression.Polynomial||ex.getLeadingCoefficient()instanceof Expression.Polynomial)return{variables:[],A:Cn,B:ex};for(var ix={},ax=[],ox=function(dx){for(var hx of dx.summands())for(var fx of hx.factors())fx instanceof Expression.Exponentiation&&(fx=fx.a),fx instanceof Expression.Symbol&&Object.getPrototypeOf(fx)===Expression.Symbol.prototype&&ix[fx.symbol]==null&&(ax.push(fx),ix[fx.symbol]=!0)},lx=0;lx<Cn.a.size;lx+=1)ox(Cn.a.coefficient(lx));for(var lx=0;lx<ex.a.size;lx+=1)ox(ex.a.coefficient(lx));var cx=function(dx,hx){if(hx===ax.length)return console.assert(dx.hasIntegerCoefficients()),dx;var fx=ax[hx];return dx.map(ux=>new Expression.Polynomial(cx(Polynomial$1.toPolynomial(ux,fx),hx+1)))};return{variables:ax,A:cx(Cn,0),B:cx(ex,0)}}function l(Cn,ex){if(ex.equals(Expression.ZERO)){return ex;//!?
}return Cn.length===0?ex:ex.polynomial.map(ix=>l(Cn.slice(1),ix)).calcAt(Cn[0])}if(t.getDegree()===Polynomial$1.ZERO.getDegree()||n.getDegree()===Polynomial$1.ZERO.getDegree())return Expression.ZERO;var u=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(u>1){var c=Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t._exponentiateRoots(u),n._exponentiateRoots(u));return c._pow(u)}var p=a(t,n);t=p.A,n=p.B;var d=t,Q=n,Ct=Date.now(),ar=1;if(t.getDegree()<n.getDegree()){const Cn=t;t=n,n=Cn,ar*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}const en=[];for(var c of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var tn=c.R,on=c.;if(n.getDegree()>0)if(tn.getDegree()<0){for(;en.length>0;)en.pop();en.push({base:Expression.ZERO,exponent:1})}else{if(!on.equals(Expression.ONE))if(en.length>0){const ex=en.pop();en.push({base:ex.base,exponent:ex.exponent+2*n.getDegree()}),en.push({base:on.divide(ex.base._pow(2)),exponent:n.getDegree()})}else en.push({base:on,exponent:n.getDegree()});en.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()-tn.getDegree()-n.getDegree()*(t.getDegree()-n.getDegree()+1)}),ar*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}else console.assert(n.getDegree()===0&&tn.getDegree()<0),en.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()});t=n,n=tn}let cn=ar===-1?Expression.ONE.negate():Expression.ONE;for(const Cn of en)Cn.exponent<0?cn=cn.divide(Cn.base._pow(-Cn.exponent)):Cn.exponent>0&&(cn=cn.multiply(Cn.base._pow(Cn.exponent)));var gn=Date.now();return gn-Ct>250&&console.log(gn-Ct,d.toString(),Q.toString()),cn=l(p.variables,cn),cn};Expression._FIELD={ONE:Expression.ONE,sub:function(t,n){return t.subtract(n)},mul:function(t,n){return t.multiply(n)},div:function(t,n){return t.divide(n)},scale:function(t,n){return t.multiply(Expression.Integer.fromBigInt(n))}};Polynomial$1.resultant=function(t,n){return Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t,n)};function GramSchmidtOrthogonalization$1(t){for(var n=Matrix$1.fromVectors(t).transpose(),a=n,l=a.multiply(a.conjugateTranspose()).augment(a).toRowEchelon(Matrix$1.Gauss,"row-reduction").matrix,u=l.slice(0,l.rows(),a.rows(),l.cols()),c=new Array(u.rows()),p=0;p<u.rows();p+=1)c[p]=u.row(p);return c}globalThis.GramSchmidtOrthogonalization=GramSchmidtOrthogonalization$1;Expression.Complex.prototype.abs=function(){return this.multiply(this.conjugate()).squareRoot()};Expression.Division.prototype.abs=function(){return this.getNumerator().abs().divide(this.getDenominator().abs())};Expression.prototype.abs=function(){const t=function(u){if(u instanceof Expression.Addition){for(var c of u.summands())for(var p of c.factors())if(!(p instanceof Expression.Symbol&&!(p instanceof Expression.MatrixSymbol)||p instanceof Expression.Integer))return!1;return!0}return!1},n=this;if(n instanceof Expression.Symbol&&!(n instanceof Expression.PolynomialRootSymbol)&&!(n instanceof Expression.ExpressionPolynomialRoot)&&!(n instanceof Expression.ExpressionWithPolynomialRoot))return n===Expression.PI||n===Expression.E?n:new Expression.Abs(this);if(this instanceof Expression.ComplexConjugate)return this.a.abs();if(this instanceof Expression.Multiplication)return this.a.abs().multiply(this.b.abs());if(this instanceof Expression.Abs)return this;if(this.isNegative())return this.negate().abs();if(this instanceof Expression.Exponentiation&&(this.a instanceof Expression.Symbol||t(this.a))&&this.b instanceof Expression.Integer)return this.a.multiply(this.a.complexConjugate()).multiply(this.a.pow(this.b.subtract(Expression.TWO)).abs());var a=Expression.simpleDivisor(this);if(a!=null&&!a.equals(Expression.ONE)&&!a.equals(this))return this.divide(a).divide(a)instanceof Expression.Division?a.abs().multiply(this.divide(a).abs()):new Expression.Exponentiation(a,Expression.TWO).abs().multiply(this.divide(a).divide(a).abs());if(t(this))return new Expression.Abs(this);if(t(this.complexConjugate()))return this.complexConjugate().abs();if(Expression.isConstant(this)){var l=Expression.getComplexNumberParts(this);if(!l.imaginary.equals(Expression.ZERO))return this.multiply(this.complexConjugate()).squareRoot()}return this.compareTo(Expression.ZERO)<0?this.negate():this};Expression.prototype.compareTo=function(t){if(t.equals(Expression.ZERO)){if(Expression._isPositive(this))return 1;if(Expression._isPositive(this.negate()))return-1;throw new TypeError(this.toString())}return this.subtract(t).getNumerator().compareTo(Expression.ZERO)};Expression.prototype.sign=function(){return this.compareTo(Expression.ZERO)};Expression.prototype.round=function(){return ExpressionParser.parse(toDecimalStringInternal$1(this,{fractionDigits:0}))};Polynomial$1.prototype._log2hypot=function(){let t=Expression.ZERO;for(let u=0;u<this.a.size;u+=1){const c=this.a.coefficient(u).abs();c.compareTo(t)>0&&(t=c)}const n=Math.max(t.bitLength()-970/2,0),a=Expression.TWO._pow(n);let l=0;for(let u=0;u<this.a.size;u+=1)l+=Math.pow(this.a.coefficient(u).truncatingDivide(a).toNumber(),2);return n+Math.log2(Math.sqrt(l))};Polynomial$1.prototype._log2OfBoundForCoefficientsOfFactor=function(t,n){if(t==null&&(t=this.getDegree()),t===0)return 0;n==null&&(n=this.getLeadingCoefficient().abs());var a=function(p){var d=p.bitLength();return d<=53?Math.log2(p.toNumber()):d-53+Math.log2(p.truncatingDivide(Expression.TWO._pow(d-53)).toNumber())},l=function(p){return p-Math.log2(Math.sqrt(Math.PI*Math.ceil(p/2)))},u=t,c=l(u)+(a(n.abs())-a(this.getLeadingCoefficient().abs()))+this._log2hypot();return c};Polynomial$1.prototype.isDivisibleBy=function(t){var n=void 0,a=Expression.ONE;this._hasIntegerLikeCoefficients()&&t._hasIntegerLikeCoefficients()&&(n="undefined",a=t.getContent());var l=this.scale(a).divideAndRemainder(t,n);return l!=null&&l.remainder.equals(Polynomial$1.ZERO)};function polynomialGCDModuloPolynomial(t,n,a){function l(d,Q){var Ct=d.map(en=>new Expression.Polynomial(en.polynomial.divideAndRemainder(Q).remainder)),ar=Ct.map(en=>en.polynomial.getContent()).getContent().inverse();return Ct.scale(new Expression.Polynomial(Polynomial$1.of(ar)))}function u(d,Q){return d.getDegree()<0?d:l(d.scale(new Expression.Polynomial(d.getLeadingCoefficient().polynomial.primitivePart().modularInverse(Q).primitivePart())),Q)}if(t=t.map(d=>new Expression.Polynomial(d)),n=n.map(d=>new Expression.Polynomial(d)),t.getDegree()<n.getDegree()){var c=t;t=n,n=c}if(n.getDegree()>=0&&l(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(l(t,a).map(d=>d.polynomial),l(n,a).map(d=>d.polynomial),a);for(var c of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var p=c.R;if(t=n,n=p,n.getDegree()>=0&&l(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(l(t,a).map(Q=>Q.polynomial),l(n,a).map(Q=>Q.polynomial),a)}return u(l(t,a),a)}globalThis.testables=globalThis.testables||{};globalThis.testables.polynomialGCDModuloPolynomial=polynomialGCDModuloPolynomial;Expression.getSolutionSet=function t(n){var a=n.augment(Matrix$1.Zero(n.cols(),1)),l=a.toRowEchelon(Matrix$1.GaussMontante,"solving",void 0),u=Matrix$1.solveByGaussNext(l.matrix),c=Matrix$1.getSolutionSet(u).basisVectors;return c};Expression.getFormaDeJordan=function(t,n,a){function l(yx){for(var _x=0,vx=Matrix$1.Zero(ar,ar),bx=0;bx<yx.length;bx+=1){var xx=yx[bx];vx=vx.map(function(Sx,Ax,Cx){return Ax>=_x&&Ax<_x+xx.size?Ax===Cx?xx.eigenvalue:Ax!==_x+xx.size-1&&Cx===Ax+1?Expression.ONE:Expression.ZERO:Sx}),_x+=xx.size}return vx}function u(yx,_x){var vx=yx.multiply(_x);return vx.eql(Matrix$1.Zero(vx.rows(),1))}function c(yx,_x){return Matrix$1.fromVectors(yx.concat(_x)).rank()===yx.length+_x.length}if(arguments.length>3||arguments[2]!==!0&&arguments[2]!==void 0)throw new TypeError;var p=Expression.unique(n);//!TODO: remove
if(p.length===t.rows()){var d=Expression.getEigenvectors(t,n),Q=Expression.diagonalize(t,n,d),ux=Q.T,fx=Q.L,gx=Q.T_INVERSED;return{P:ux,J:fx,P_INVERSED:gx}}//!
for(var Ct=t,ar=Ct.rows(),en=[],tn=[],on=0;on<p.length;on+=1){for(var cn=[],gn=p[on],Cn=n.reduce((yx,_x)=>yx+(_x===gn?1:0),0),ex=Ct.subtract(Matrix$1.I(ar).scale(gn)),ix=1;ex.pow(ix).rank()>ar-Cn;)ix+=1;for(ix+=1;--ix>=1;)for(var ax=Expression.getSolutionSet(ex.pow(ix)),ox=0;ox<ax.length;ox+=1){var lx=ax[ox];if(!u(ex.pow(ix-1),lx)){for(var cx=[],dx=lx,hx=0;hx<ix;hx+=1)cx.push(dx),dx=ex.multiply(dx).col(0);cx.reverse(),c(cn,cx)&&(en=en.concat(cx),cn=cn.concat(cx),tn.push({size:ix,eigenvalue:gn}))}}}var fx=l(tn);if(en.length!==ar)throw new TypeError("assertion failed");var ux=Matrix$1.fromVectors(en),gx=ux.isExact()?ux.inverse():a?null:getInverse$1(Ct,n,ux);if(!a&&ux.isExact()&&Ct.toString()!==ux.multiply(fx).multiply(gx).toString())throw new TypeError("assertion failed");return{P:ux,J:fx,P_INVERSED:gx}};var getInverse$1=function(t,n,a){var l=t.transpose(),u=Expression.getFormaDeJordan(l,n,!0),c=u.J,p=u.P,d=t.cols(),Q=Matrix$1.Zero(d,d).map(function(ar,en,tn){function on(){for(var gn=en;gn-1>=0&&gn<d&&c.e(gn-1,gn).equals(Expression.ONE);)gn-=1;for(var Cn=en;Cn+1<d&&c.e(Cn,Cn+1).equals(Expression.ONE);)Cn+=1;return{s:gn,e:Cn}}var cn=on();return cn.s+cn.e===en+tn?Expression.ONE:Expression.ZERO}),Ct=p.multiply(Q).transpose();return Expression._unscaleInverseMatrix(Ct,a)};Expression._getInverse=getInverse$1;globalThis.factorsMap=new Map;Expression.getPolynomialRootsWithSteps=function(t,n){var a=t.getroots(n);//!2018-05-28
//!2018-07-11
var l=[];if(typeof t.getZeros=="function"&&a.length!==t.getDegree()){for(var u=Polynomial$1.of(Expression.ONE),c=0;c<a.length;c+=1)u=u.multiply(Polynomial$1.of(a[c].negate(),Expression.ONE));var p=t.divideAndRemainder(u).quotient;globalThis.factorsMap=new Map;const Ct=function(ar){var en=ar.primitivePart();if(!en.hasIntegerCoefficients())return ar.getZeros(!0);ar=en;var tn=ar.squareFreeFactors(),on=tn.a0,cn=tn.a1;if(on.getDegree()!==0){for(var gn=Ct(cn),Cn=Ct(on),ex=[],ix=void 0,ax=0;ax<Cn.length;ax+=1){var ox=Cn[ax];ox!==ix&&(ex.push(ox),ix=ox),ex.push(ox)}return gn.concat(ex)}var lx=ar.factorize();if(lx==null&&(lx=ar),!lx.equals(ar))return Ct(lx).concat(Ct(ar.divideAndRemainder(lx,"throw").quotient));const cx=lx.getZeros(!0);for(const dx of cx)globalThis.factorsMap.set(dx,lx);return cx};l=Ct(p),n!=null&&l.length===p.getDegree()&&n({content:Expression.ONE,roots:a.concat(l),newPolynomial:Polynomial$1.of(t.getLeadingCoefficient()),type:"realRootIsolationAndNewton'sMethod"})}//!
for(var c=0;c<a.length;c+=1)for(var d=a[c],Q=0;Q<a.length;Q+=1)a[Q].equals(d)&&(a[Q]=d);return a.concat(l)};Expression.getEigenvalues=function(t,n){if(!t.isSquare())throw new RangeError("NonSquareMatrixException");var a=function(Q){var Ct=Expression.ZERO,ar=Expression.ONE;return Q.map(function(en){return Expression.isScalar(en)&&(Ct=Ct.gcd(en.getNumerator()),ar=ar.lcm(en.getDenominator())),Expression.ZERO}),Ct.divide(ar)},l=Expression.ONE,u=Expression.ONE;n==null&&(l=a(t),l.equals(Expression.ZERO)?l=Expression.ONE:(u=l.inverse(),t=t.scale(u)));var c=t.map(function(Q,Ct,ar){var en=Ct===ar?Polynomial$1.of(Q,Expression.ONE.negate()):Q.equals(Expression.ZERO)?Polynomial$1.ZERO:Polynomial$1.of(Q);return new Expression.Polynomial(en)}).determinant();c=c.polynomial,c=c._scaleRoots(l),c=c.scale(l._pow(t.cols()));//!new (sin/cos)
c=c.map(function(Q){return Q.simplifyExpression()});var p=c;//!TODO: fix
n!=null&&n(p),console.time("p3");var d=Expression.getPolynomialRootsWithSteps(p,n);return console.timeEnd("p3"),d};Expression.isRational=function(t){return t instanceof Expression.Integer||t instanceof Expression.BinaryOperation&&Expression.isRational(t.a)&&Expression.isRational(t.b)};Expression.isRationalMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isRational(t.e(n,a)))return!1;return!0};Expression.getEigenvectors=function(t,n,a=!1){n==null&&(n=Expression.getEigenvalues(t));const l=new Array(n.length).fill(null),u=Expression.unique(n),c=function(on,cn){for(var gn=0,Cn=0;Cn<n.length&&gn<cn.length;Cn+=1)n[Cn]===on&&(l[Cn]=cn[gn],gn+=1);if(gn<cn.length)throw new TypeError("wrong eigenvalues argument: the eigenvalue should appear multiple times")};if(!a&&t.isSquare()&&Expression.isRationalMatrix(t)){const on=new Map;for(const cn of u){const gn=globalThis.factorsMap.get(cn);if(gn==null||gn.getDegree()<=1){const Cn=Expression.getEigenvectors(t,n.filter(ex=>ex===cn),!0);c(cn,Cn)}else{var p=on.get(gn);if(p==null){const ex=SomePolynomialRoot.create(gn);p=Expression.getEigenvectors(t,n.filter(ix=>ix===cn).map(ix=>ex),!0),on.set(gn,p)}var d=[];d.push(Expression.ONE);const Cn=function(ex){return ex instanceof SomePolynomialRoot?ex.calcAt(cn,d):ex};c(cn,p.map(ex=>new Matrix$1.Vector(ex.elements.map(ix=>Cn(ix)))))}}return l}var Q=function(on){var cn=Expression.ZERO,gn=Expression.ONE;return on.map(function(Cn){return Expression.isScalar(Cn)&&(cn=cn.gcd(Cn.getNumerator()),gn=gn.lcm(Cn.getDenominator())),Expression.ZERO}),cn.divide(gn)},Ct=Expression.ONE,ar=Expression.ONE;Ct=Q(t),Ct.equals(Expression.ZERO)&&(Ct=Expression.ONE),ar=Ct.inverse();for(var en=0;en<u.length;en+=1){const on=u[en];var tn=t.cols(),p=Expression.getSolutionSet(t.scale(ar).subtract(Matrix$1.I(tn).scale(on.multiply(ar))));c(on,p);let gn=null;if(en+1<u.length)try{gn=on.complexConjugate()}catch(Cn){console.error(Cn)}if(en+1<u.length&&gn!=null&&gn.equals(u[en+1])&&t.eql(t.map(Cn=>Cn.complexConjugate()))){const Cn=function(ex){return new Matrix$1.Vector(ex.elements.map(ix=>ix.complexConjugate()))};c(u[en+1],p.map(ex=>Cn(ex))),en+=1}}return l};var getInverse=function(t,n,a){var l=t.transpose(),u=Expression.getEigenvectors(l,n),c=Matrix$1.fromVectors(u).transpose();return _unscaleInverseMatrix(c,a)},_unscaleInverseMatrix=function(t,n){var a=function(c,p){var d=c.rows();return Matrix$1.Zero(d,d).map(function(Q,Ct,ar){if(Ct!==ar)return Expression.ZERO;for(var en=d,tn=-1;++tn<en;){var on=c.e(Ct,tn).multiply(p.e(tn,ar));Q=tn===0?on:Q.add(on)}return Q})},l=a(t,n),u=l.map(function(c,p,d){return p===d?c.inverse():Expression.ZERO});return u.multiply(t)};Expression._unscaleInverseMatrix=_unscaleInverseMatrix;Expression.diagonalize=function(t,n,a){if(arguments.length>3)throw new TypeError;if(!t.isSquare())throw new RangeError("NonSquareMatrixException");if(n.length!==t.cols())throw new RangeError;if(a.filter(d=>d!=null).length!==t.cols())throw new RangeError;//!!!
var l=Matrix$1.I(t.cols()).map(function(d,Q,Ct){return Q===Ct?n[Q]:Expression.ZERO}),u=Matrix$1.fromVectors(a),c=function(){return n.map(d=>!Expression.has(d,Expression.Exponentiation)).reduce((d,Q)=>d||Q)},p=u.isExact()&&c()?u.inverse():getInverse(t,n,u);return{T:u,L:l,T_INVERSED:p}};Expression.LUDecomposition=function(t){for(var n=t.rows(),a=t,l=Matrix$1.I(n),u=Matrix$1.I(n),c=!1,p=0,d=0;d<t.cols();d+=1)if(p<n){var Q=p;if(a.e(p,d).equals(Expression.ZERO)){for(var Ct=p+1;Ct<n&&Q===p;Ct+=1)a.e(Ct,d).equals(Expression.ZERO)||(Q=Ct);if(Q!==p){var ar=Matrix$1.I(n);ar=ar.map(function(tn,on,cn){return on===p?ar.e(Q,cn):on===Q?ar.e(p,cn):tn}),a=ar.multiply(a),l=ar.multiply(l.subtract(Matrix$1.I(n))).add(Matrix$1.I(n)),u=ar.multiply(u),c=!0}}if(!a.e(p,d).equals(Expression.ZERO)){var en=Matrix$1.I(n).map(function(tn,on,cn){return cn===p&&on>=p+1?a.e(on,d).divide(a.e(p,d)).negate():tn});a=en.multiply(a),l=l.multiply(en),p+=1}}return l=l.map(function(tn,on,cn){return on===cn?tn:tn.negate()}),{swapFlag:c,P:new Expression.Matrix(u),A:new Expression.Matrix(t),L:new Expression.Matrix(l),U:new Expression.Matrix(a)}};Expression.isReal=function(t){var n=function(a){return a instanceof Expression.Integer?!0:a instanceof Expression.NthRoot?n(a.a):a instanceof Expression.BinaryOperation&&n(a.a)&&n(a.b)||a===Expression.E||a===Expression.PI?!0:a instanceof Expression.Function?n(a.a):a instanceof Expression.PolynomialRootSymbol?!0:a instanceof Expression.ExpressionWithPolynomialRoot?n(a.e):!!(a instanceof Expression.ExpressionPolynomialRoot||!(a instanceof Expression.Symbol)&&!(a instanceof Expression.Exponentiation)&&a.complexConjugate().equals(a))};return n(t)};Expression.isRealMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isReal(t.e(n,a)))return!1;return!0};Expression.CholeskyDecomposition=function(t){var n=t;if(!n.isSquare())throw new RangeError("NonSquareMatrixException");for(var a=n.rows(),l=Expression.isRealMatrix(n),u=0;u<a;u+=1)for(var c=u;c<a;c+=1)if(!n.e(u,c).equals(n.e(c,u).complexConjugate()))throw l?new RangeError("NonSymmetricMatrixException"):new RangeError("NonHermitianMatrixException");for(var p=new Array(a),u=0;u<a;u+=1){p[u]=new Array(a);for(var c=0;c<a;c+=1)p[u][c]=Expression.ZERO}for(var c=0;c<a;c+=1)for(var u=c;u<a;u+=1){var d=null;if(c===u){for(var Q=null,Ct=0;Ct<c;Ct+=1){var ar=p[c][Ct].multiply(p[c][Ct].complexConjugate());Q=Q==null?ar:Q.add(ar)}var en=Q==null?n.e(c,c):n.e(c,c).subtract(Q);if(!Expression._isPositive(en))throw new RangeError("NonPositiveDefiniteMatrix");d=en.squareRoot()}else{for(var Q=null,Ct=0;Ct<c;Ct+=1){var en=p[u][Ct].multiply(p[c][Ct].complexConjugate());Q=Q==null?en:Q.add(en)}d=(Q==null?n.e(u,c):n.e(u,c).subtract(Q)).divide(p[c][c])}p[u][c]=d,console.log("l_%d%d = %s",u+1,c+1,p[u][c].toString())}return{L:Matrix$1.padRows(p,null)}};Matrix$1.prototype.conjugateTranspose=function(){return this.transpose().map(t=>t.complexConjugate())};Matrix$1.fromVectors=function(t){if(t.length===0)throw new RangeError;for(var n=t[0].dimensions(),a=0;a<t.length;a+=1)if(t[a].dimensions()!==n)throw new RangeError;return Matrix$1.Zero(n,t.length).map((l,u,c)=>t[c].e(u))};Expression.SVD=function(t){var n=function(ox,lx){return lx.length>1&&(lx=GramSchmidtOrthogonalization(lx)),lx.map(cx=>cx.toUnitVector())},a=t.conjugateTranspose().multiply(t),l=Expression.getEigenvalues(a);//!
var u=Expression.unique(l),c=u.map(ox=>ox instanceof Expression.ExpressionWithPolynomialRoot||ox instanceof Expression.ExpressionPolynomialRoot?ox.upgrade():ox);l=l.map(ox=>c[u.indexOf(ox)]);//!
l=l.slice(0).reverse().sort(function(ox,lx){var cx=ox.subtract(lx);return Expression.isReal(cx)?Expression._isPositive(cx.negate())?1:-1:NaN});var p=[],d=[];const Q=Expression.unique(l);var Ct=Expression.getEigenvectors(a,l);for(var ar of Q){var en=Ct.filter((ox,lx)=>l[lx]===ar);p=p.concat(n(a,en));var tn=ar.squareRoot(),on=p.length-d.length;d=d.concat(new Array(on).fill(tn))}var cn=Matrix$1.Zero(t.rows(),t.cols()).map((ox,lx,cx)=>lx===cx&&lx<d.length?d[lx]:Expression.ZERO);console.time("U");for(var gn=[],Cn=0;Cn<cn.rows()&&Cn<cn.cols()&&!cn.e(Cn,Cn).equals(Expression.ZERO);Cn+=1){var ex=t.multiply(p[Cn]).col(0).scale(cn.e(Cn,Cn).inverse());gn.push(ex)}if(gn.length<t.rows()){console.time("U1");var ix=t.multiply(t.conjugateTranspose()),Ct=Expression.getEigenvectors(ix,new Array(t.rows()).fill(Expression.ZERO),!0).filter(lx=>lx!=null),ax=n(ix,Ct);console.timeEnd("U1"),console.assert(gn.length+ax.length===t.rows()),gn=gn.concat(ax)}return console.timeEnd("U"),gn=Matrix$1.fromVectors(gn),p=Matrix$1.fromVectors(p),{U:gn,Sigma:cn,Vstar:p.conjugateTranspose()}};Expression.QRDecomposition=function(t){for(var n=t,a=new Array(n.cols()),l=0;l<n.cols();l+=1)a[l]=n.col(l);var u=GramSchmidtOrthogonalization(a).filter(d=>!d.eql(Matrix$1.Vector.Zero(d.dimensions()))),c=Matrix$1.fromVectors(u.map(d=>d.toUnitVector())),p=c.conjugateTranspose().multiply(n);return console.log(c),{Q:c,R:p}};function Condition$1(t){Object.freeze(t),this.array=t}Condition$1.NEZ=" != 0";Condition$1.EQZ=" == 0";Condition$1.GTZ=" > 0";Condition$1.prototype._and=function(t,n){if(t!==Condition$1.NEZ&&t!==Condition$1.EQZ&&t!==Condition$1.GTZ)throw new TypeError;if(n==null)throw new RangeError;if(this===Condition$1.FALSE)return this;var a=function(Q,Ct,ar){for(var en=0;en<Q.length;en+=1)if(Q[en].operator===Ct&&Q[en].expression.equals(ar))return!0;return!1};if(n instanceof Expression.GF2Value)return this._and(t,n.value===0?Expression.ZERO:Expression.ONE);var l=function(Q,Ct){if(a(Q,Ct.operator,Ct.expression)){//!TODO: it should work even without this (?)
return Q}if(a(Q,Ct.operator===Condition$1.EQZ?Condition$1.NEZ:Condition$1.EQZ,Ct.expression))return null;var ar=Ct.expression;//!
//!new 2019-12-15:
//!substitute:  x = 0, sin(x) != 0
(Expression.has(ar,Expression.Sin)||Expression.has(ar,Expression.Cos)||Expression.has(ar,Expression.Exponentiation)||Expression.has(ar,Expression.Arctan)||Expression.has(ar,Expression.Logarithm)||Expression.has(ar,Expression.Abs))&&Q.length>0&&(ar=Expression._map(function(Zx){if(Zx instanceof Expression.Function&&!(Zx instanceof Expression.NthRoot)||Zx instanceof Expression.Exponentiation&&(!(Zx.b instanceof Expression.Integer)||!(Zx.a instanceof Expression.Symbol))){var eE=Zx instanceof Expression.Exponentiation?Zx.b:Zx.a,oE=null,iE=null;if(eE instanceof Expression.Symbol)oE=eE,iE=Q;else if(oE=new Expression.Symbol("arg"),iE=l(Q,{expression:oE.subtract(eE),operator:Condition$1.EQZ}),iE==null){//! TODO: fix, should not happen
return Zx}for(var Wx=0;Wx<iE.length;Wx+=1){var AE=iE[Wx];if(AE.operator===Condition$1.EQZ){var ME=Polynomial$1.toPolynomial(AE.expression,oE);if(ME.getDegree()===1){var EE=ME.getCoefficient(0).negate().divide(ME.getCoefficient(1));if(!Expression.has(EE,Expression.Function)&&(EE.compare4Addition(oE)<0&&!(EE instanceof Expression.Division)||Expression.isConstant(EE)||Expression.isConstant(EE.divide(Expression.PI)))){if(Zx instanceof Expression.Exponentiation)return Zx.a.pow(EE);if(Zx instanceof Expression.Arctan)return EE.arctan();if(Zx instanceof Expression.Logarithm)return EE.logarithm();if(Zx instanceof Expression.Abs)return EE.abs();if(EE=Expression.isConstant(EE)&&!EE.equals(Expression.ZERO)&&!(EE instanceof Expression.Radians)&&!Expression.has(EE,Expression.Symbol)?new Expression.Radians(EE):EE,Zx instanceof Expression.Sin)return EE.sin();if(Zx instanceof Expression.Cos)return EE.cos();throw new TypeError("NotSupportedError")}}}}return Zx}return Zx},ar),Ct={expression:ar,operator:Ct.operator});//!
//!new
if(ar.isNegative()&&(Ct.operator===Condition$1.EQZ||Ct.operator===Condition$1.NEZ))return l(Q,{expression:ar.negate(),operator:Ct.operator});if(ar instanceof Expression.Exponentiation&&(Ct.operator===Condition$1.EQZ||Ct.operator===Condition$1.NEZ))return l(Q,{expression:ar.a,operator:Ct.operator});if(ar instanceof Expression.Addition&&ar.a instanceof Expression.Exponentiation&&Expression.isConstant(ar.b)&&ar.a.b.getDenominator()instanceof Expression.Integer&&!ar.a.b.getDenominator().equals(Expression.ONE))return ar.a.b.getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)&&!ar.b.isNegative()?l(Q,{expression:Expression.ONE,operator:Ct.operator}):l(Q,{expression:ar.a.a.pow(ar.a.b.getNumerator()).subtract(ar.b.negate().pow(ar.a.b.getDenominator())),operator:Ct.operator});if(Ct.expression instanceof Expression.Multiplication&&Ct.expression.b instanceof Expression.IdentityMatrix)return l(Q,{expression:Ct.expression.a,operator:Ct.operator});if(Ct.expression instanceof Expression.Division){var en=Q;return en=l(en,{expression:Ct.expression.a,operator:Ct.operator}),en==null?null:(en=l(en,{expression:Ct.expression.b,operator:Condition$1.NEZ}),en)}if(Ct.expression instanceof Expression.Integer||Ct.expression instanceof Expression.Complex)return Ct.operator===Condition$1.NEZ&&Ct.expression.equals(Expression.ZERO)||Ct.operator===Condition$1.EQZ&&!Ct.expression.equals(Expression.ZERO)||Ct.operator===Condition$1.GTZ&&Ct.expression.equals(Expression.ZERO)||Ct.operator===Condition$1.GTZ&&Ct.expression instanceof Expression.Integer&&Ct.expression.compareTo(Expression.ZERO)<0?null:Q;if(Expression.isConstant(Ct.expression)&&!Ct.expression.equals(Expression.ZERO)){if(Ct.operator===Condition$1.NEZ)return Q;if(Ct.operator===Condition$1.EQZ)return null}if(Ct.expression instanceof Expression.Matrix&&Ct.expression.matrix.isZero()){if(Ct.operator===Condition$1.EQZ)return Q;if(Ct.operator===Condition$1.NEZ)return null}if(Ct.expression instanceof Expression.NthRoot)return l(Q,{expression:Ct.expression.a,operator:Ct.operator});if(Expression.has(Ct.expression,Expression.Abs)){if(Ct.expression instanceof Expression.Abs&&(Ct.operator===Condition$1.EQZ||Ct.operator===Condition$1.NEZ))return l(Q,{expression:Ct.expression.a,operator:Ct.operator});if(Ct.expression instanceof Expression.Abs&&Ct.operator===Condition$1.GTZ)return Q;if(Ct.expression.negate()instanceof Expression.Abs&&Ct.operator===Condition$1.GTZ)return null}if(Expression.has(Ct.expression,Expression.ComplexConjugate)&&!Expression.has(Ct.expression.complexConjugate(),Expression.ComplexConjugate))return l(Q,{expression:Ct.expression.complexConjugate(),operator:Ct.operator});if(Ct.expression instanceof Expression.Multiplication){if(Ct.operator===Condition$1.EQZ&&Ct.expression.a instanceof Expression.Integer&&!Ct.expression.a.equals(Expression.ZERO))return Ct={expression:Ct.expression.b,operator:Ct.operator},l(Q,Ct);if(Ct.operator===Condition$1.NEZ){var en=Q;return en=l(en,{expression:Ct.expression.a,operator:Condition$1.NEZ}),en==null?null:(en=l(en,{expression:Ct.expression.b,operator:Condition$1.NEZ}),en)}}var gn=Expression.getMultivariatePolynomial(Ct.expression);if(gn!=null){//!new 2018-12-24
var tn=Expression.getNthRootConjugate(gn.p.getLeadingCoefficient());if(tn!=null&&Expression.isConstant(tn))return l(Q,{expression:tn.multiply(Ct.expression),operator:Ct.operator});//!
var on=gn.p.getContent();if(!on.equals(Expression.ONE)&&!on.equals(Expression.ONE.negate())){if(Ct.operator===Condition$1.NEZ){var en=l(Q,{expression:Ct.expression.divide(on),operator:Condition$1.NEZ});return en==null?null:l(en,{expression:on,operator:Condition$1.NEZ})}for(;gn!=null;){if(Ct.operator===Condition$1.EQZ){var cn=gn.p.getSquareFreePolynomial();if(cn.getDegree()!==gn.p.getDegree())return l(Q,{expression:Ct.expression.divide(gn.p.divideAndRemainder(cn).quotient.calcAt(gn.v)),operator:Condition$1.EQZ})}on=gn.p.getContent(),gn=Expression.getMultivariatePolynomial(on)}//!new
if(Expression.isConstant(on)&&!on.equals(Expression.ONE)&&!on.equals(Expression.ONE.negate()))return l(Q,{expression:Ct.expression.divide(on),operator:Condition$1.EQZ})}if(gn!=null&&gn.p.getDegree()>1&&gn.p.getCoefficient(0).equals(Expression.ZERO)&&Ct.operator===Condition$1.NEZ){var en=l(Q,{expression:gn.v,operator:Condition$1.NEZ});return en==null?null:l(en,{expression:Ct.expression.divide(gn.v),operator:Condition$1.NEZ})}}//!new 2019-12-24:
var gn=Expression.getMultivariatePolynomial(Ct.expression);if(gn!=null&&gn.p.getDegree()>1){var cn=gn.p.getSquareFreePolynomial();if(cn.getDegree()!==gn.p.getDegree()&&(Ct.operator===Condition$1.EQZ||Ct.operator===Condition$1.NEZ))return l(Q,{expression:cn.calcAt(gn.v),operator:Ct.operator})}//!
for(var Cn=function(Zx,eE,oE,iE){if(Zx==null)return null;for(var Wx=oE+1;Wx<eE.length;Wx+=1)if(Zx=l(Zx,eE[Wx]),Zx==null)return null;return iE!=null&&(Zx=l(Zx,iE)),Zx},ex=[],ix=0;ix<Q.length;ix+=1){var ax=Q[ix];//!new 2020-01-01:
if((Expression.has(ax.expression,Expression.Sin)||Expression.has(ax.expression,Expression.Cos))&&(Expression.has(Ct.expression,Expression.Sin)||Expression.has(Ct.expression,Expression.Cos))){var ox={operator:ax.operator,expression:Expression._replaceSinCos(ax.expression)},lx={operator:Ct.operator,expression:Expression._replaceSinCos(Ct.expression)},cx=l([],ox);if(cx==null)return null;var en=l(cx,lx);if(en==null)return null;if(en.length===0)return[];if(en.length===1)return Cn(ex,Q,ix,{operator:en[0].operator,expression:Expression._replaceBySinCos(en[0].expression)});for(var ix=0;ix<en.length;ix++)if(!Expression.has(en[ix],Expression.Exponentiation)&&en[ix].expression.gcd(Ct.expression).equals(en[ix].expression))return ex=l(ex,ax),Cn(ex,Q,ix,{operator:en[ix].operator,expression:Expression._replaceBySinCos(en[ix].expression)})}//!
if((Expression.has(ax.expression,Expression.Function)||Expression.has(ax.expression,Expression.Exponentiation))&&!(Expression.has(Ct.expression,Expression.Function)||Expression.has(Ct.expression,Expression.Exponentiation)))return Cn(l(ex,Ct),Q,ix,ax);if((ax.operator===Condition$1.NEZ&&Ct.operator===Condition$1.EQZ||ax.operator===Condition$1.EQZ&&Ct.operator===Condition$1.NEZ)&&(Expression.isSingleVariablePolynomial(ax.expression.multiply(Ct.expression))||!0)){for(var dx=ax.expression.polynomialGCD(Ct.expression);!dx.equals(Expression.ONE)&&!dx.equals(Expression.ONE.negate());)return ax.operator===Condition$1.EQZ?ax={operator:ax.operator,expression:ax.expression.divide(dx)}:Ct={operator:Ct.operator,expression:Ct.expression.divide(dx)},ex=l(ex,ax),ex==null?null:Cn(ex,Q,ix,Ct);if(ax.operator===Condition$1.EQZ&&Expression.isConstant(ax.expression)||Ct.operator===Condition$1.EQZ&&Expression.isConstant(Ct.expression))return null}var hx=!0,fx=Expression.isSingleVariablePolynomial(ax.expression)&&Expression.isSingleVariablePolynomial(Ct.expression)&&Expression.isSingleVariablePolynomial(ax.expression.multiply(Ct.expression));if(ax.operator===Condition$1.NEZ&&Ct.operator===Condition$1.EQZ&&fx)Ct=Ct;else if(ax.operator===Condition$1.EQZ&&Ct.operator===Condition$1.NEZ&&fx)Ct=ax;else if(ax.operator===Condition$1.EQZ&&Ct.operator===Condition$1.EQZ&&fx){var dx=ax.expression.polynomialGCD(Ct.expression);return dx instanceof Expression.Integer?null:(Ct={operator:Ct.operator,expression:dx},Cn(ex,Q,ix,Ct))}else if(ax.operator===Condition$1.NEZ&&Ct.operator===Condition$1.NEZ&&fx){var dx=ax.expression.gcd(Ct.expression);ax={operator:ax.operator,expression:ax.expression.divide(dx)},Expression.isConstant(ax.expression)||ex.push(ax)}else{//!new 2020-16-02
var ux=function(Zx){if(Zx instanceof Expression.Multiplication&&Zx.a instanceof Expression.Matrix)return Zx.a.multiply(ux(Zx.b));var eE=Expression.getConstant(Zx);for(var oE of Zx.divide(eE).factors())oE instanceof Expression.NthRoot&&Expression.isConstant(oE.a)&&(eE=eE.multiply(oE));return eE},gx=function(Zx,eE){var oE=eE.divide(ux(eE)),iE=Expression.ZERO;for(var Wx of Zx.summands()){var AE=Wx.divide(ux(Wx));AE.equals(oE)&&(iE=iE.add(Wx))}return iE},yx=function(Zx){var eE=function(EE){return EE instanceof Expression.Exponentiation?EE.b:Expression.ONE},oE=function(EE){return EE instanceof Expression.Exponentiation?EE.a:EE},iE=function(EE){var bE=Expression.ZERO;for(var kE of EE.factors())if(!Expression.isConstant(kE)){var EE=eE(kE);bE=bE.add(EE)}return bE},Wx=function(EE,bE){var kE=iE(EE).subtract(iE(bE)),TE=kE.isNegative()?-1:kE.negate().isNegative()?1:0;if(TE!==0)return TE;for(var jE=function(nE){return Array.from(nE.divide(Expression.getConstant(nE)).factors()).reverse().filter(Kx=>!Expression.isConstant(Kx)).values()},Ix=jE(EE),Bx=jE(bE),Yx=Ix.next().value,Qx=Bx.next().value;Yx!=null&&Qx!=null;){var TE=0-oE(Yx).compare4Multiplication(oE(Qx))||eE(Yx).compare4Multiplication(eE(Qx));if(TE!==0)return TE;Yx=Ix.next().value,Qx=Bx.next().value}return Yx!=null?1:Qx!=null?-1:0},AE=null;for(var ME of Zx.summands())(AE==null||Wx(ME,AE)>0)&&(AE=ME);return AE};if(hx&&ax.operator===Condition$1.EQZ){var _x=yx(ax.expression),gn=_x.divide(ux(_x))._abs();_x=gx(ax.expression,_x);var vx=Ct.expression,bx=0;for(var xx of Ct.expression.summands())xx.gcd(gn)._abs().equals(gn)&&(vx=vx.subtract(xx.divide(_x).multiply(ax.expression)),bx+=1);if(bx>0)return Cn(l(ex,ax),Q,ix,{expression:vx,operator:Ct.operator})}if(hx&&Ct.operator===Condition$1.EQZ){var _x=yx(Ct.expression),gn=_x.divide(ux(_x))._abs();_x=gx(Ct.expression,_x);for(var xx of ax.expression.summands())if(xx.gcd(gn)._abs().equals(gn)){var Sx=ax.expression.subtract(xx.divide(_x).multiply(Ct.expression));return ax.operator===Condition$1.EQZ?Cn(l(ex,{expression:Sx,operator:ax.operator}),Q,ix,Ct):Cn(l(ex,Ct),Q,ix,{expression:Sx,operator:ax.operator})}}if(hx&&ax.operator===Condition$1.NEZ&&Ct.operator===Condition$1.EQZ){var _x=yx(ax.expression),gn=_x.divide(Expression.getConstant(_x));for(var xx of Ct.expression.summands())if(xx.gcd(gn).equals(gn)||xx.gcd(gn).equals(gn.negate())){var Ax=xx.divide(_x);if(Ax instanceof Expression.Integer&&!Ax.equals(Expression.ZERO)){var Cx=Ct.expression.subtract(Ax.multiply(ax.expression)),Tx={expression:Cx,operator:Condition$1.NEZ},Px=!1;{//! 2020-07-05
for(var Px=!1,Fx=0;Fx<Q.length;Fx++){var Mx=Q[Fx];if(Mx.operator===Condition$1.EQZ){var dx=Mx.expression.gcd(Tx.expression);!dx.equals(Expression.ONE)&&!dx.equals(Expression.ONE.negate())&&(Px=!0)}}}if(Px)return Cn(l(l(ex,ax),Tx),Q,ix-1,Ct)}}}//!
{var gn=null,Dx=null,Ox=null,Lx=null,Nx=Expression.getMultivariatePolynomial(ax.expression),Gx=Expression.getMultivariatePolynomial(Ct.expression);if(Ct.operator===Condition$1.EQZ&&Gx!=null&&Gx.p.getDegree()!==1){var en=Expression.getMultivariatePolynomial(Gx.p.getCoefficient(0));if(en!=null){var Ux=en.v;Ux instanceof Expression.Symbol&&en.p.getDegree()===1&&(Gx={p:Polynomial$1.toPolynomial(Ct.expression,Ux),v:Ux})}}if(Nx!=null&&Gx!=null){//!new 2019-24-12
//!?
Ct.operator===Condition$1.EQZ&&Gx!=null&&Gx.p.getDegree()===1&&ax.operator===Condition$1.EQZ&&Nx!=null&&Nx.p.getDegree()===1&&(Expression._getReplacement(Ct.expression,Nx.v).equals(Nx.v)&&Polynomial$1.toPolynomial(Ct.expression,Nx.v).getDegree()===0&&(Nx=null),Expression._getReplacement(ax.expression,Gx.v).equals(Gx.v)&&Polynomial$1.toPolynomial(ax.expression,Gx.v).getDegree()===0&&(Gx=null),Nx!=null&&Gx!=null&&(Nx.p.getCoefficient(1)instanceof Expression.Integer||(Nx=null),Gx.p.getCoefficient(1)instanceof Expression.Integer||(Gx=null)),Nx!=null&&Gx!=null&&Nx.v.compare4Addition(Gx.v)<0&&(Nx=null)),Ct.operator===Condition$1.EQZ&&Gx!=null&&Gx.p.getDegree()===1&&(Ox=Gx,gn=ax.expression,Dx=ax.operator,Lx=Ct),ax.operator===Condition$1.EQZ&&Nx!=null&&Nx.p.getDegree()===1&&(Ox=Nx,gn=Ct.expression,Dx=Ct.operator,Lx=ax)}if(Ox!=null){var Hx=!1;if(Hx=Hx||Ox.p.getDegree()===1&&Expression.isConstant(Ox.p.getCoefficient(1))&&Expression.isConstant(Ox.p.getCoefficient(0)),Hx=Hx||Ox.p.getDegree()===1&&Expression.isConstant(Ox.p.getCoefficient(0))&&!Ox.p.getCoefficient(0).equals(Expression.ZERO)&&Expression.has(gn,Expression.Exponentiation),Hx){var Vx=Ox.p.getCoefficient(0).negate().divide(Ox.p.getCoefficient(1)),xx=Expression._substitute(gn,Ox.v,Vx,{uniqueObject:1});if(xx.equals(gn))ex.push(ax);else{var en={operator:Dx,expression:xx};return ex=l(ex,en),ex==null?null:Cn(ex,Q,ix,Lx)}}else ex.push(ax)}else ex.push(ax)}}}if(ex.push(Ct),hx){new Condition$1(ex);for(var ix=0;ix<ex.length;ix+=1){var Ct=ex[ix];if(Ct.operator===Condition$1.EQZ){var zx=Ct.expression,dx=null;for(var rE of zx.summands()){var xx=rE.divide(Expression.getConstant(rE));dx==null?dx=xx:dx=dx.gcd(xx)}if(!dx.equals(Expression.ONE)&&zx instanceof Expression.Addition&&new Condition$1(ex.slice(0,ix).concat(ex.slice(ix+1))).andZero(dx).isFalse())return l(ex,{expression:dx,operator:Condition$1.NEZ})}}}return ex};//!new 2021-10-06
if(n instanceof Expression.Division)return this._and(t,n.getNumerator()).andNotZero(n.getDenominator());var u=this;if(t===Condition$1.EQZ){const Q=function(ar){var en=void 0;for(var tn of ar.summands())for(var on of tn.factors()){var cn=on instanceof Expression.Exponentiation?on.a:on;cn instanceof Expression.Symbol&&(en==null||cn.symbol<en.symbol)&&(en=cn)}return en},Ct=Q(n);if(Ct!=null&&Polynomial$1.of(n)._hasIntegerLikeCoefficients()){const ar=Polynomial$1.toPolynomial(n,Ct);for(var c of this.array)if(c.operator===Condition$1.EQZ&&Polynomial$1.of(c.expression)._hasIntegerLikeCoefficients()&&Q(c.expression).symbol>=Ct.symbol){const en=Polynomial$1.toPolynomial(c.expression,Ct);if(en.getDegree()>=1){var p=Polynomial$1.polynomialGCD(ar,en);if(p.getDegree()===0){const tn=Polynomial$1.resultant(ar,en);if(u=u.andZero(tn),u.isFalse())return u}}}}}//!
var d=l(u.array,{operator:t,expression:n});return d==null?Condition$1.FALSE:d.length===0?Condition$1.TRUE:new Condition$1(d)};Condition$1.prototype.andNotZero=function(t){return this._and(Condition$1.NEZ,t)};Condition$1.prototype.andZero=function(t){return this._and(Condition$1.EQZ,t)};Condition$1.prototype.andGreaterZero=function(t){return this._and(Condition$1.GTZ,t)};Condition$1.prototype.and=function(t){if(!(t instanceof Condition$1))throw new TypeError;for(var n=this,a=0;a<t.array.length;a+=1)n=n._and(t.array[a].operator,t.array[a].expression);return n};Condition$1.prototype.isFalse=function(){return this===Condition$1.FALSE};Condition$1.prototype.isTrue=function(){return this===Condition$1.TRUE};Condition$1.prototype.toString=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1)n+=(a!==0?", ":"")+this.array[a].expression.toString(t)+this.array[a].operator;return n};Condition$1.TRUE=new Condition$1(new Array(0));Condition$1.FALSE=new Condition$1(void 0);Condition$1.prototype.getSolutionFor=function(t){var n=this;if(n.array==null)return null;for(var a=0;a<n.array.length;a+=1){var l=n.array[a];if(l.operator===Condition$1.EQZ){var u=Polynomial$1.toPolynomial(l.expression,t);if(u.getDegree()===1)return u.getroots()[0]}}return null};Condition$1.prototype.updateExpression=function(t,n){return this.andNotZero(t).isFalse()?Expression.ZERO:t};//!TODO: remove
Polynomial$1.prototype.toString=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toString(t)};Polynomial$1.prototype.toMathML=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toMathML(t)};Expression.Polynomial.prototype.toString=function(t){return this.polynomial.toString(t)};Expression.Polynomial.prototype.toMathML=function(t){return this.polynomial.toMathML(t)};var printPartOfAddition=function(t,n,a,l,u){if(a.equals(Expression.ZERO))return t&&n?Expression.ZERO.toMathML():"";var c=!1;a.isNegative()&&!n&&(c=!0,a=a.negateCarefully());var p=new Expression.Multiplication(Expression.ZERO,Expression.ZERO).getPrecedence(),d=a.getPrecedence()<p,Q=a.equals(Expression.ONE);return(!n&&c?'<mo form="infix">&minus;</mo>':"")+(!n&&!c?'<mo form="infix">+</mo>':"")+(Q?"":"<mrow>")+(Q||!d?"":"<mrow><mo>(</mo>")+(Q?"":a.toMathML(u))+(Q||!d?"":"<mo>)</mo></mrow>")+(Q?"":"<mo>&sdot;</mo>")+l.toMathML(u)+(Q?"":"</mrow>")},decimalToMathML=function(t){const n=/^([+\-])?(\d+\.?\d*(?:\(\d+\)\d*)?)(?:[eE]\+?(\-?\d+))?$/.exec(t),a={sign:n[1]||"",significand:n[2]||"",exponent:n[3]||""};return(a.exponent!==""?"<mrow>":"")+(a.sign!==""?"<mrow>":"")+(a.sign==="+"?"<mo>+</mo>":"")+(a.sign==="-"?"<mo>&minus;</mo>":"")+"<mn>"+numberFormat.format(a.significand.replace(/[\(\)]/g,"")).replace(/^[\s\S]+$/g,function(l){var u=a.significand.indexOf("("),c=a.significand.lastIndexOf(")");if(u===-1||c===-1)return l;const p=numberFormat.format("0").trim().length;var d=l.length-(a.significand.length-u-1-1)*p,Q=l.length-(a.significand.length-c-1)*p;return l.slice(0,d)+'<span style="text-decoration:overline;">'+l.slice(d,Q)+"</span>"+l.slice(Q)})+"</mn>"+(a.sign!==""?"</mrow>":"")+(a.exponent!==""?'<mo lspace="0" rspace="0">&sdot;</mo><msup><mn>'+numberFormat.format("10")+"</mn>"+decimalToMathML(a.exponent)+"</msup>":"")+(a.exponent!==""?"</mrow>":"")},complexToMathML=function(t,n){if(n.replace(/<[^>]+>/g,"")==="1")return"<mrow>"+t+"<mo>+</mo><mi>&ii;</mi></mrow>";if(n.replace(/<[^>]+>/g,"").replace(/&minus;/g,"-")==="-1")return"<mrow>"+t+"<mo>&minus;</mo><mi>&ii;</mi></mrow>";if(t==="")return"<mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow>";var a="+";return/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/.test(n)&&(a="-",n=n.replace(/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/g,"<mn>$1</mn>")),"<mrow>"+t+"<mo>"+(a==="-"?"&minus;":"+")+"</mo><mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow></mrow>"};Expression._decimalToMathML=decimalToMathML;Expression._complexToMathML=complexToMathML;function isConstant(t){return t instanceof Expression.NonSimplifiedExpression||t instanceof Expression.Matrix||t instanceof Expression.Polynomial?!1:Expression.isConstant(t)}var groupByTerm=function(t){if(t instanceof Expression.Division||t instanceof Expression.Addition){var n=t.getNumerator(),a=t.getDenominator(),l=a instanceof Expression.Integer?a:(Expression.getMultivariatePolynomial(a)||{p:{getContent:function(){return Expression.ONE}}}).p.getContent(),u=a.divide(l);if(isConstant(l)){var c=[];for(var p of n.summands())c.push(p);var d={};c.reverse();for(var Q=0;Q<c.length;Q+=1){var p=c[Q],Ct=Expression.ONE;for(var ar of p.factors())isConstant(ar)&&(Ct=Ct.multiply(ar));var en=p.divide(Ct),tn="_"+en.toString();d[tn]=d[tn]||{constant:Expression.ZERO,term:en},d[tn].constant=d[tn].constant.add(Ct.divide(l))}var on=null;for(var tn in d)if(Object.prototype.hasOwnProperty.call(d,tn)){var Ct=d[tn].constant,en=d[tn].term,cn=!1;on!=null&&Ct.isNegative()&&(Ct=Ct.negate(),cn=!0);var gn=new NonSimplifiedExpression(en.equals(Expression.ONE)?Ct:Ct.equals(Expression.ONE)?d[tn].term:new Expression.Multiplication(Ct,d[tn].term));on=on==null?gn:new Expression.Addition(on,cn?new Expression.Multiplication(Expression.ONE.negate(),gn):gn)}return u.equals(Expression.ONE)||(on=new Expression.Division(on,u)),new NonSimplifiedExpression(on)}}},getRounding=function(t){var n=t!=null?t.rounding:void 0;return t!=null&&n==null&&t.fractionDigits!=null&&t.fractionDigits!==-1&&(console.debug("deprecated fractionDigits, use rounding instead"),n={fractionDigits:t.fractionDigits}),n};Expression.toDecimalString=function(t,n){var a=getRounding(n);if(a!=null){if(isConstant(t))return toDecimalStringInternal$1(t,a,decimalToMathML,complexToMathML);if(!Expression.has(t,NonSimplifiedExpression)){var l=groupByTerm(t);if(l!=null)return l.toMathML(n)}}};var getPrecedence=function(t,n){var a=getRounding(n);return a!=null&&isConstant(t.unwrap())&&Expression.has(t.unwrap(),Expression.Complex)&&!t.unwrap().equals(Expression.I)?new Expression.Addition(Expression.ONE,Expression.ONE).getPrecedence():t.getPrecedence()};Expression.idCounter=0;Expression.id=function(){return(Expression.idCounter+=1).toString()};Expression.escapeHTML=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Expression.defaultOptions={useMatrixContainer:!1};Expression.Matrix.prototype.toMathML=function(t){var n=this.matrix;t=Expression.setTopLevel(!0,t);var a=t.useMatrixContainer==null&&Expression.defaultOptions.useMatrixContainer?!0:t.useMatrixContainer,l=t.useBraces==null?void 0:t.useBraces,u=t.columnlines==null?0:t.columnlines,c=t.variableNames==null?void 0:t.variableNames,p=t.verticalStrike==null?-1:t.verticalStrike,d=t.horizontalStrike==null?-1:t.horizontalStrike,Q=t.cellIdGenerator==null?void 0:t.cellIdGenerator,Ct=t.pivotCell==null?void 0:t.pivotCell,ar=t.isLUDecomposition2==null?void 0:t.isLUDecomposition2,en=t.highlightRow==null?-1:t.highlightRow,tn=t.highlightCol==null?-1:t.highlightCol;t=Object.assign({},t,{useBraces:void 0,columnlines:void 0,variableNames:void 0,verticalStrike:void 0,horizontalStrike:void 0,cellIdGenerator:void 0,pivotCell:void 0,isLUDecomposition2:void 0,highlightRow:void 0,highlightCol:void 0});var on="",cn=n.rows(),gn=n.cols(),Cn=-1,ex=t.idPrefix+"-"+Expression.id();a&&(on+='<munder accentunder="true">',on+='<mrow id="'+ex+'" data-matrix="'+Expression.escapeHTML(n.toString())+'" draggable="true" tabindex="0" contextmenu="matrix-menu">'),on+=l==null?"<mrow><mo>(</mo>":"<mrow>"+(l[0]===" "?"":"<mo>"+l[0]+"</mo>");//! 2017-07-06 rowspacing="0ex" was added to make it look better with Native MathML (when it is supported) and to have the same style as in mathml.css
//!  rowspacing="0ex" is also needed when verticalStrike !== -1 and <menclose> is used inside
for(on+="<mtable"+(c!=null?' columnalign="right"':"")+">";++Cn<cn;){var ix=-1;if(c!=null){for(var ax="",ox=!1;++ix<gn-1;)ax+="<mtd>",ax+=printPartOfAddition(ix===gn-2,!ox,n.e(Cn,ix),new Expression.Symbol(c[ix]),t),ax+="</mtd>",ox=ox||!n.e(Cn,ix).equals(Expression.ZERO);ax+="<mtd><mo>=</mo></mtd><mtd>"+n.e(Cn,gn-1).toMathML(t)+"</mtd>",(ox||!n.e(Cn,gn-1).equals(Expression.ZERO))&&(on+="<mtr>",on+=ax,on+="</mtr>")}else{for(on+="<mtr>";++ix<gn;){var lx="",cx="";u!==0&&gn-1>0&&(cx+=gn+u===ix?"border-left: 1px solid;":""),Ct!=null&&Cn===Ct.i&&ix===Ct.j&&(cx+="border: 1px solid; border-radius: 50%;",cx+="font-weight: bolder"),d===Cn&&p===ix?(cx+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto, linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5",lx="true"):(p===ix&&(cx+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto; opacity: 0.5",lx="true"),d===Cn&&(cx+="background: linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5;",lx="true"));var dx=Q!=null?Q(Cn,ix):"";on+=('<mtd id="'+dx+'" aria-hidden="'+lx+'" style="'+cx+'">').replace(/\s+[a-z\-]+\=""/g,"");var hx=ix<Cn&&ar||en===Cn&&(u===0||ix<=gn-1+u)||tn===ix;hx&&(on+='<mrow style="background: #80FF80; color: #3C78C2">'),on+=n.e(Cn,ix).toMathML(t),hx&&(on+="</mrow>"),on+="</mtd>"}on+="</mtr>"}}return on+="</mtable>",on+=l==null?"<mo>)</mo></mrow>":(l[1]===" "?"":"<mo>"+l[1]+"</mo>")+"</mrow>",a&&(on+="</mrow>",on+="<mtext>",on+='<button type="button" class="matrix-menu-show" data-for-matrix="'+ex+'" aria-haspopup="true" title="'+i18n.matrixMenu.title+'"></button>',on+="</mtext>",on+="</munder>"),on};Expression.Determinant.prototype.toMathML=function(t){var n=this;return n.a instanceof Expression.Matrix||n.a instanceof NonSimplifiedExpression&&n.a.e instanceof Expression.Matrix?(t=Object.assign({},t,{useBraces:["|","|"]}),n.a.toMathML(t)):Expression.Function.prototype.toMathML.call(this,t)};Expression.Transpose.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+"<mi>T</mi></msup>"};Expression.ComplexConjugate.prototype.toMathML=function(t){var n=this;return'<mover accent="true">'+n.a.toMathML(t)+"<mo></mo></mover>"};Expression.Pseudoinverse.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+'<mi><span title="pseudoinverse">+</span></mi></msup>'};Expression.SquareRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??"<msqrt>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"</msqrt>"};Expression.NthRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??(console.assert(typeof this.n=="number"&&Math.floor(this.n)===this.n&&this.n>=3),"<mroot>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"<mn>"+numberFormat.format(this.n.toString())+"</mn></mroot>")};Expression.denotations={};Expression.Function.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,l=!(a.a instanceof Expression.Matrix)&&!(a.a instanceof NonSimplifiedExpression&&a.a.e instanceof Expression.Matrix);return"<mrow><mi>"+(Expression.denotations[a.name]||a.name)+"</mi><mo>&af;</mo>"+(l?"<mrow><mo>(</mo>":"")+a.a.toMathML(Expression.setTopLevel(!0,t))+(l?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Division.prototype.toMathML=function(t){if(t!=null&&t.nofractions)return Expression.BinaryOperation.prototype.toMathML.call(this,t);var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,l=a.getDenominator(),u=a.getNumerator();return"<mfrac>"+u.toMathML(Expression.setTopLevel(!0,t))+l.toMathML(Expression.setTopLevel(!0,t))+"</mfrac>"};Expression.numberFormat={format:function(t){return t.toString()}};const decimalNumberRegExp=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit=function(t){let n=0;for(;decimalNumberRegExp.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10};let cachedFormatData={format:null,decimalSeparator:".",decimalZeroOffset:0};var numberFormat={format:function(t){var n=function(){var d=Expression.numberFormat.format(1.5).trim(),Q=/[,\.]/.exec(d);return Q==null?(console.error(d),"."):Q[0]},a=function(){var d=Expression.numberFormat.format(0).trim().codePointAt(0),Q=replaceSimpleDigit(d)===0;return Q?d-48:(console.error(d),0)};cachedFormatData.format!==Expression.numberFormat&&(cachedFormatData={format:Expression.numberFormat,decimalSeparator:n(),decimalZeroOffset:a()});var l=t.indexOf(".");if(l!==-1)return numberFormat.format(t.slice(0,l))+cachedFormatData.decimalSeparator+numberFormat.format(t.slice(l+1));var u=cachedFormatData.decimalZeroOffset;if(u===0)return t;for(var c="",p=0;p<t.length;p+=1)c+=String.fromCodePoint(u+t.charCodeAt(p));return c}};Expression.Integer.prototype.toMathML=function(t){var n=this,a=n.compareTo(Expression.ZERO)<0?"-":"",l=n.compareTo(Expression.ZERO)<0?n.negate():n,u=l.value.toString(),c=numberFormat.format(u);return a==="-"?"<mrow><mo>&minus;</mo><mn>"+c+"</mn></mrow>":"<mn>"+c+"</mn>"};Expression.BinaryOperation.prototype.toMathML=function(t){t=t??{},t!=null&&t.rounding!=null&&this.unwrap()instanceof Expression.Exponentiation&&this.unwrap().a.unwrap()instanceof Expression.Symbol&&this.unwrap().a.unwrap()!==Expression.E&&this.unwrap().a.unwrap()!==Expression.PI&&!(this.unwrap().a.unwrap()instanceof Expression.PolynomialRootSymbol)&&!(this.unwrap().a.unwrap()instanceof Expression.ExpressionPolynomialRoot)&&(this.unwrap().b.unwrap()instanceof Expression.Integer||this.unwrap().b.unwrap()instanceof Expression.Negation&&this.unwrap().b.unwrap().b.unwrap()instanceof Expression.Integer)&&(t=Object.assign({},t,{rounding:null}));var n=Expression.toDecimalString(this,t);if(n!=null)return n;//!2019-05-16
if(this instanceof Expression.Addition&&t.printId==null){var a=function(ox){for(var lx=[];ox.unwrap()instanceof Expression.Addition;)lx.push(ox.unwrap().b),ox=ox.unwrap().a;return lx.push(ox),lx},en=[],d=null;for(var l of a(this)){if(d!=null){var u=!1;d.isNegative()&&(u=!0,d=d.negateCarefully());var c=this.getPrecedence()>=getPrecedence(d,t);c=c||d.isUnaryPlusMinus(),en.push((c?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(c,t))+(c?"<mo>)</mo></mrow>":"")),en.push(u?"<mo>&minus;</mo>":"<mo>+</mo>")}d=l}en=en.reverse().join("");var p=d,c=p.getPrecedence()+(p.isRightToLeftAssociative()?-1:0)<this.getPrecedence();return t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(c=c||p.isUnaryPlusMinus()),en=(c?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(c||t==null||t.isTopLevel,t))+(c?"<mo>)</mo></mrow>":"")+en,"<mrow>"+en+"</mrow>"}//!
var p=this.a,d=this.b,Q=!1;this instanceof Expression.Addition&&d.isNegative()&&(Q=!0,d=d.negateCarefully());var Ct=p.getPrecedence()+(p.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),ar=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=d.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(Ct=Ct||p.isUnaryPlusMinus()),ar=ar||d.isUnaryPlusMinus(),ar=ar||this.unwrap()instanceof Expression.Exponentiation&&d.unwrap()instanceof Expression.Exponentiation,Ct=Ct||this.unwrap()instanceof Expression.Exponentiation&&p.unwrap()instanceof Expression.Function,Ct=Ct||t.rounding!=null&&isConstant(p.unwrap())&&Expression.has(p.unwrap(),Expression.Complex);var en=Q?"-":this.getS();if(this instanceof Expression.Exponentiation){if(p.unwrap()===Expression.E&&d.unwrap()instanceof Expression.Matrix)return"<mrow><mi>exp</mi><mo>&af;</mo>"+d.toMathML(t)+"</mrow>";var tn=t;return p.unwrap()instanceof Expression.Matrix||(tn=Object.assign({},t||{},{nofractions:!0})),"<msup>"+(Ct?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(Ct||t==null||t.isTopLevel,t))+(Ct?"<mo>)</mo></mrow>":"")+(ar?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(ar,tn))+(ar?"<mo>)</mo></mrow>":"")+"</msup>"}if(this.isNegation())return"<mrow><mo>&minus;</mo>"+(ar?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(ar,t))+(ar?"<mo>)</mo></mrow>":"")+"</mrow>";var on=function(ex){return ex instanceof Expression.Exponentiation&&(ex.b.unwrap()instanceof Expression.Integer||ex.b.unwrap()instanceof Expression.Symbol&&ex.b.unwrap().symbol==="T")?ex.a.unwrap():ex},cn=function(ex){return!Ct&&!ar&&(ex.a.unwrap()instanceof Expression.Integer||on(ex.a.unwrap())instanceof Expression.Symbol||ex.a.unwrap()instanceof Expression.Multiplication&&on(ex.a.unwrap().b.unwrap())instanceof Expression.Symbol)&&(on(ex.b.unwrap())instanceof Expression.Symbol||t.rounding==null&&ex.b.unwrap()instanceof Expression.SquareRoot)};//!2020-08-02
if(this instanceof Expression.Multiplication&&t.printId==null){for(var gn=!0,l=this;l!=null;l=l instanceof Expression.Multiplication?l.a.unwrap():null){var Cn=l instanceof Expression.Multiplication?l.b.unwrap():l;on(Cn).unwrap()instanceof Expression.Symbol&&Expression.isScalar(Cn)||(gn=!1),Cn instanceof Expression.ExpressionWithPolynomialRoot&&(gn=!1),Cn instanceof Expression.ExpressionPolynomialRoot&&(gn=!1)}if(gn){for(var en=[],l=this;l!=null;l=l instanceof Expression.Multiplication?l.a.unwrap():null){var Cn=l instanceof Expression.Multiplication?l.b.unwrap():l;en.push(Cn.toMathML(Expression.setTopLevel(c,t)))}return en=en.reverse().join("<mo>&it;</mo>"),"<mrow>"+en+"</mrow>"}}return"<mrow>"+(Ct?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(Ct||t==null||t.isTopLevel,t))+(Ct?"<mo>)</mo></mrow>":"")+(en==="*"?cn(this)?"<mo>&it;</mo>":"<mo>&sdot;</mo>":en==="-"?"<mo>&minus;</mo>":en==="/"?"<mo>&#x2215;</mo>":this instanceof Expression.Comma?'<mo lspace="0em" rspace="0.55em">,</mo>':"<mo>"+en+"</mo>")+(ar?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(ar,t))+(ar?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Symbol.prototype.toMathML=function(t){var n=this,a=n.symbol,l=a.indexOf("_");if(l!==-1){for(var u=a.slice(l+1).replace(/^\(|\)$/g,"").split(","),c="",p=0;p<u.length;p+=1)c+=p!==0?"<mo>,</mo>":"",c+=/^\d+$/.exec(u[p])!=null?Expression.Integer.fromString(u[p]).toMathML():"<mi>"+u[p]+"</mi>";u.length>1&&(c="<mrow>"+c+"</mrow>");var d=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a.slice(0,l));return"<msub><mi"+(d?' mathvariant="bold-italic"':"")+">"+a.slice(0,l)+"</mi>"+c+"</msub>"}var d=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a);return"<mi"+(d?' mathvariant="bold-italic"':"")+">"+(this instanceof Expression.IdentityMatrix&&typeof i18n<"u"?'<span class="dotted-underline" title="'+i18n.identityMatrix+'" aria-label="'+i18n.identityMatrix+'">'+a+"</span>":a)+"</mi>"};Expression.Negation.prototype.toMathML=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"<mrow><mo>&minus;</mo>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Factorial.prototype.toMathML=function(t){var n=this.n.unwrap(),a=!(n instanceof Expression.Integer&&n.compareTo(Expression.ZERO)>0);return"<mrow>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"<mo>!</mo></mrow>"};Condition$1.prototype.toMathML=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1){var l=this.array[a];n+=a!==0?'<mo lspace="0em" rspace="0.55em">,</mo>':"",n+="<mrow>";var u="<mo>"+(l.operator===Condition$1.NEZ?"&ne;":l.operator===Condition$1.EQZ?"=":l.operator===Condition$1.GTZ?"&gt;":"???")+"</mo>";if(l.expression instanceof Expression.Addition&&l.expression.a instanceof Expression.Symbol&&l.expression.b instanceof Expression.Integer){var c=l.expression.a,p=l.expression.b.negate();n+=c.toMathML(t)+u+p.toMathML(t)}else n+=l.expression.toMathML(t)+u+Expression.ZERO.toMathML();n+="</mrow>"}return this.array.length===1?n:"<mrow>"+n+"</mrow>"};Expression.Complex.prototype.toMathML=function(t){return this.toStringInternal(t,"<mo>&it;</mo>","<mi>&ii;</mi>","<mo>&minus;</mo>","<mo>+</mo>","<mrow>","</mrow>",function(n,a){return n.toMathML(a)})};Expression.GF2.prototype.toMathML=function(t){return this.a.toMathML(t)};Expression.GF2Value.prototype.toMathML=function(t){return"<mrow><mn>"+this.value.toString()+"</mn></mrow>"};Expression.Degrees.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>&deg;</mi></mrow>"};Expression.Radians.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>rad</mi></mrow>"};NonSimplifiedExpression.prototype.toMathML=function(t){return t!=null&&t.printId!=null?'<mrow id="'+this.getId()+'">'+this.e.toMathML(t)+"</mrow>":this.e.toMathML(t)};Expression.prototype.toMathML=function(t){throw new TypeError};Expression.DecimalFraction.prototype.toMathML=function(t){return decimalToMathML(this.toString())};primeFactor._isPrime;function simplify_algebra(t){var n=t.replace(/([CRL]+)([0-9]*)/g,"$1_$2"),a=ExpressionParser.parse(n),l=a.toString(),u=l.replace(/([CRL]+)_([0-9]*)/g,"$1$2");return[u,a.toMathML()]}function removeFenced(t){return t.replaceAll(/<mfenced>/g,"<mrow><mo>(</mo>").replaceAll(/<\/mfenced>/g,"<mo>)</mo></mrow>")}async function solveWithSymPy(t,n,a,l,u,c,p){const d=`${[...Object.keys(a),"s"].join(", ")} = symbols("${[...Object.keys(a),"s"].join(" ")}", positive=True, real=True)`,Q=t.replaceAll("^","**"),Ct=`
${d}
${n.length==1?`mna_vo_vi = 1/(${n[0]})`:`
mna = Matrix([${Q}])
mna_inv = mna.inv()
${u.length==0?`mna_vo_vi = mna_inv[${l[0]-1}, ${l[1]-1}]`:`mna_vo_vi = mna_inv[${l[0]-1}, ${l[1]-1}] - mna_inv[${u[0]-1}, ${u[1]-1}]`}`}
mna_vo_vi_complex = mna_vo_vi.subs(s, s*I)
rx = Abs(mna_vo_vi_complex)
result_simplified = simplify(mna_vo_vi)
result_numeric = result_simplified.subs(${JSON.stringify(c).replaceAll('"',"")})
result_numeric_simplified = simplify(result_numeric)

str(result_simplified), mathml(result_simplified, printer='presentation'), str(rx), mathml(result_numeric_simplified, printer='presentation'), str(result_numeric_simplified)
`,[ar,en,tn,on,cn]=await p.runPythonAsync(Ct),gn=on,Cn=cn.replaceAll("**","^");return[ar,removeFenced(en),tn,removeFenced(gn),Cn]}function solveWithAlgebrite(t,n,a,l){try{algebriteExports.eval("clearall"),n.length==1?algebriteExports.eval(`mna_vo_vi = 1/(${n[0]})`):(algebriteExports.eval(`mna = [${t}]`),algebriteExports.eval("inv_mna = inv(mna)"),l.length==0?algebriteExports.eval(`mna_vo_vi = inv_mna[${a[0]}][${a[1]}]`):algebriteExports.eval(`mna_vo_vi = inv_mna[${a[0]}][${a[1]}] - inv_mna[${l[0]}][${l[1]}]`));var u=algebriteExports.eval("mna_vo_vi").toString();const[c,p]=simplify_algebra(u);algebriteExports.eval("complex_response = subst(s*i,s,mna_vo_vi)"),algebriteExports.eval("abs_complex_response = abs(complex_response)");const d=algebriteExports.eval("abs_complex_response").toString();return[c,p,d]}catch(c){return console.log("Building MNA matrix failed with this error:",c),["","",""]}}async function build_and_solve_mna(t,n,a,l,u,c){var p,d,Q;const Ct=a[n[0]].type==="iprobe",ar=a,en=Object.values(ar).filter(yx=>yx.type==="iprobe").length,tn=Object.values(ar).filter(yx=>yx.type==="opamp").length;if("vin"in ar)d=ar.vin.ports[0];else if("iin"in ar)Q=ar.iin.ports[0];else{console.log("no iin or vin");return}const on="vin"in ar?"vin":"iin",cn=on=="vin"?1:0;var gn=new Array(t+cn+tn+en);for(p=0;p<gn.length;p++)gn[p]=new Array(gn.length).fill("0");var Cn;for(const yx in ar){const _x=ar[yx];if(["inductor","capacitor","resistor"].includes(_x.type)){_x.type=="resistor"?Cn=yx:_x.type=="inductor"?Cn=`(s*${yx})`:Cn=`1/(s*${yx})`;for(const vx of _x.ports)vx!==null&&(gn[vx][vx]+=`+${Cn}^(-1)`);_x.ports.includes(null)||(gn[_x.ports[0]][_x.ports[1]]+=`-${Cn}^(-1)`,gn[_x.ports[1]][_x.ports[0]]+=`-${Cn}^(-1)`)}}on=="vin"&&(gn[gn.length-1-tn-en][d]="1",gn[d][gn.length-1-tn-en]="1");var ex=0,ix=0;for(const yx in ar){const _x=ar[yx];_x.type==="opamp"?(_x.ports[0]!=null&&(gn[t+cn+ex][_x.ports[0]]="1"),_x.ports[1]!=null&&(gn[t+cn+ex][_x.ports[1]]="-1"),_x.ports[2]!=null&&(gn[_x.ports[2]][t+cn+ex]="1"),ex++):_x.type==="iprobe"&&(console.log("iprobe",t+cn+tn+ix,_x.ports[0]),gn[t+cn+tn+ix][_x.ports[0]]="1",gn[_x.ports[0]][t+cn+tn+ix]="1",gn[t+cn+tn+ix][_x.ports[1]]="-1",gn[_x.ports[1]][t+cn+tn+ix]="-1",ix++)}var ax=[];for(p=0;p<gn.length;p++)ax.push("["+gn[p].join(",")+"]");const ox=ax.join(",");var lx=[],cx=[];if(Ct)on=="vin"?lx.push(gn.length,gn.length-tn-en):lx.push(gn.length,Q);else{const yx=ar[n[0]].ports[0];if(on=="vin"?lx.push(yx+1,gn.length-tn-en):lx.push(yx+1,Q+1),n.length==2){const _x=ar[n[1]].ports[0];on=="vin"?cx.push(_x+1,gn.length-tn-en):cx.push(_x+1,Q+1)}}var dx,hx,fx,ux,gx;return c==="algebrite"?[hx,fx,ux]=solveWithAlgebrite(ox,gn,lx,cx):[hx,fx,ux,dx,gx]=await solveWithSymPy(ox,gn,ar,lx,cx,l,u),[hx,fx,ux,dx,gx]}async function calcBilinear(t){if(t){const n=`
T, Z = symbols("T Z")
bilinear = result_simplified.subs(s,(2/T)*(Z-1)/(Z+1))
bilinear_simp = simplify(bilinear)
str(bilinear_simp), mathml(bilinear_simp, printer='presentation')
`,[a,l]=await t.runPythonAsync(n);return[a,removeFenced(l)]}else{algebriteExports.eval("bilinear = subst((2/T)*(Z-1)/(Z+1),s,mna_vo_vi)");try{return simplify_algebra(algebriteExports.eval("bilinear").toString())}catch(n){return console.log(n),["","<mtext>Having trouble calculating bilinear transform</mtext>"]}}}function getAppBarUtilityClass(t){return generateUtilityClass("MuiAppBar",t)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$f=t=>{const{color:n,position:a,classes:l}=t,u={root:["root",`color${capitalize(n)}`,`position${capitalize(a)}`]};return composeClasses(u,getAppBarUtilityClass,l)},joinVars=(t,n)=>t?`${t==null?void 0:t.replace(")","")}, ${n})`:n,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`position${capitalize(a.position)}`],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([n])=>({props:{color:n},style:{"--AppBar-background":(t.vars??t).palette[n].main,"--AppBar-color":(t.vars??t).palette[n].contrastText}})),{props:n=>n.enableColorOnDark===!0&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:n=>n.enableColorOnDark===!1&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?joinVars(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?joinVars(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiAppBar"}),{className:u,color:c="primary",enableColorOnDark:p=!1,position:d="fixed",...Q}=l,Ct={...l,color:c,position:d,enableColorOnDark:p},ar=useUtilityClasses$f(Ct);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:Ct,elevation:4,className:clsx(ar.root,u,d==="fixed"&&"mui-fixed"),ref:a,...Q})});function getToolbarUtilityClass(t){return generateUtilityClass("MuiToolbar",t)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses$e=t=>{const{classes:n,disableGutters:a,variant:l}=t;return composeClasses({root:["root",!a&&"gutters",l]},getToolbarUtilityClass,n)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disableGutters&&n.gutters,n[a.variant]]}})(memoTheme(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiToolbar"}),{className:u,component:c="div",disableGutters:p=!1,variant:d="regular",...Q}=l,Ct={...l,component:c,disableGutters:p,variant:d},ar=useUtilityClasses$e(Ct);return jsxRuntimeExports.jsx(ToolbarRoot,{as:c,className:clsx(ar.root,u),ref:a,ownerState:Ct,...Q})});function useSnackbar(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:a=!1,onClose:l,open:u,resumeHideDuration:c}=t,p=useTimeout();reactExports.useEffect(()=>{if(!u)return;function ex(ix){ix.defaultPrevented||ix.key==="Escape"&&(l==null||l(ix,"escapeKeyDown"))}return document.addEventListener("keydown",ex),()=>{document.removeEventListener("keydown",ex)}},[u,l]);const d=useEventCallback((ex,ix)=>{l==null||l(ex,ix)}),Q=useEventCallback(ex=>{!l||ex==null||p.start(ex,()=>{d(null,"timeout")})});reactExports.useEffect(()=>(u&&Q(n),p.clear),[u,n,Q,p]);const Ct=ex=>{l==null||l(ex,"clickaway")},ar=p.clear,en=reactExports.useCallback(()=>{n!=null&&Q(c??n*.5)},[n,c,Q]),tn=ex=>ix=>{const ax=ex.onBlur;ax==null||ax(ix),en()},on=ex=>ix=>{const ax=ex.onFocus;ax==null||ax(ix),ar()},cn=ex=>ix=>{const ax=ex.onMouseEnter;ax==null||ax(ix),ar()},gn=ex=>ix=>{const ax=ex.onMouseLeave;ax==null||ax(ix),en()};return reactExports.useEffect(()=>{if(!a&&u)return window.addEventListener("focus",en),window.addEventListener("blur",ar),()=>{window.removeEventListener("focus",en),window.removeEventListener("blur",ar)}},[a,u,en,ar]),{getRootProps:(ex={})=>{const ix={...extractEventHandlers(t),...extractEventHandlers(ex)};return{role:"presentation",...ex,...ix,onBlur:tn(ix),onFocus:on(ix),onMouseEnter:cn(ix),onMouseLeave:gn(ix)}},onClickAway:Ct}}function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:n,disableReactTree:a=!1,mouseEvent:l="onClick",onClickAway:u,touchEvent:c="onTouchEnd"}=t,p=reactExports.useRef(!1),d=reactExports.useRef(null),Q=reactExports.useRef(!1),Ct=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{Q.current=!0},0),()=>{Q.current=!1}),[]);const ar=useForkRef(getReactElementRef(n),d),en=useEventCallback(cn=>{const gn=Ct.current;Ct.current=!1;const Cn=ownerDocument(d.current);if(!Q.current||!d.current||"clientX"in cn&&clickedRootScrollbar(cn,Cn))return;if(p.current){p.current=!1;return}let ex;cn.composedPath?ex=cn.composedPath().includes(d.current):ex=!Cn.documentElement.contains(cn.target)||d.current.contains(cn.target),!ex&&(a||!gn)&&u(cn)}),tn=cn=>gn=>{Ct.current=!0;const Cn=n.props[cn];Cn&&Cn(gn)},on={ref:ar};return c!==!1&&(on[c]=tn(c)),reactExports.useEffect(()=>{if(c!==!1){const cn=mapEventPropToEvent(c),gn=ownerDocument(d.current),Cn=()=>{p.current=!0};return gn.addEventListener(cn,en),gn.addEventListener("touchmove",Cn),()=>{gn.removeEventListener(cn,en),gn.removeEventListener("touchmove",Cn)}}},[en,c]),l!==!1&&(on[l]=tn(l)),reactExports.useEffect(()=>{if(l!==!1){const cn=mapEventPropToEvent(l),gn=ownerDocument(d.current);return gn.addEventListener(cn,en),()=>{gn.removeEventListener(cn,en)}}},[en,l]),reactExports.cloneElement(n,on)}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const useUtilityClasses$d=t=>{const{classes:n}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,n)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98;return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(emphasize(t.palette.background.default,n)),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:emphasize(t.palette.background.default,n),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiSnackbarContent"}),{action:u,className:c,message:p,role:d="alert",...Q}=l,Ct=l,ar=useUtilityClasses$d(Ct);return jsxRuntimeExports.jsxs(SnackbarContentRoot,{role:d,elevation:6,className:clsx(ar.root,c),ownerState:Ct,ref:a,...Q,children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:ar.message,ownerState:Ct,children:p}),u?jsxRuntimeExports.jsx(SnackbarContentAction,{className:ar.action,ownerState:Ct,children:u}):null]})});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const useUtilityClasses$c=t=>{const{classes:n,anchorOrigin:a}=t,l={root:["root",`anchorOrigin${capitalize(a.vertical)}${capitalize(a.horizontal)}`]};return composeClasses(l,getSnackbarUtilityClass,n)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`anchorOrigin${capitalize(a.anchorOrigin.vertical)}${capitalize(a.anchorOrigin.horizontal)}`]]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Snackbar=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiSnackbar"}),u=useTheme(),c={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{action:p,anchorOrigin:{vertical:d,horizontal:Q}={vertical:"bottom",horizontal:"left"},autoHideDuration:Ct=null,children:ar,className:en,ClickAwayListenerProps:tn,ContentProps:on,disableWindowBlurListener:cn=!1,message:gn,onBlur:Cn,onClose:ex,onFocus:ix,onMouseEnter:ax,onMouseLeave:ox,open:lx,resumeHideDuration:cx,slots:dx={},slotProps:hx={},TransitionComponent:fx,transitionDuration:ux=c,TransitionProps:{onEnter:gx,onExited:yx,..._x}={},...vx}=l,bx={...l,anchorOrigin:{vertical:d,horizontal:Q},autoHideDuration:Ct,disableWindowBlurListener:cn,TransitionComponent:fx,transitionDuration:ux},xx=useUtilityClasses$c(bx),{getRootProps:Sx,onClickAway:Ax}=useSnackbar({...bx}),[Cx,Tx]=reactExports.useState(!0),Px=rE=>{Tx(!0),yx&&yx(rE)},Fx=(rE,Zx)=>{Tx(!1),gx&&gx(rE,Zx)},Mx={slots:{transition:fx,...dx},slotProps:{content:on,clickAwayListener:tn,transition:_x,...hx}},[Dx,Ox]=useSlot("root",{ref:a,className:[xx.root,en],elementType:SnackbarRoot,getSlotProps:Sx,externalForwardedProps:{...Mx,...vx},ownerState:bx}),[Lx,{ownerState:Nx,...Gx}]=useSlot("clickAwayListener",{elementType:ClickAwayListener,externalForwardedProps:Mx,getSlotProps:rE=>({onClickAway:(...Zx)=>{var oE;const eE=Zx[0];(oE=rE.onClickAway)==null||oE.call(rE,...Zx),!(eE!=null&&eE.defaultMuiPrevented)&&Ax(...Zx)}}),ownerState:bx}),[Ux,Hx]=useSlot("content",{elementType:SnackbarContent,shouldForwardComponentProp:!0,externalForwardedProps:Mx,additionalProps:{message:gn,action:p},ownerState:bx}),[Vx,zx]=useSlot("transition",{elementType:Grow,externalForwardedProps:Mx,getSlotProps:rE=>({onEnter:(...Zx)=>{var eE;(eE=rE.onEnter)==null||eE.call(rE,...Zx),Fx(...Zx)},onExited:(...Zx)=>{var eE;(eE=rE.onExited)==null||eE.call(rE,...Zx),Px(...Zx)}}),additionalProps:{appear:!0,in:lx,timeout:ux,direction:d==="top"?"down":"up"},ownerState:bx});return!lx&&Cx?null:jsxRuntimeExports.jsx(Lx,{...Gx,...dx.clickAwayListener&&{ownerState:Nx},children:jsxRuntimeExports.jsx(Dx,{...Ox,children:jsxRuntimeExports.jsx(Vx,{...zx,children:ar||jsxRuntimeExports.jsx(Ux,{...Hx})})})})}),CircuitSolverSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20stroke='rgb(184,%20255,%20241)'%20fill='none'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20Outer%20rounded%20rectangle%20--%3e%3crect%20x='5'%20y='5'%20width='90'%20height='90'%20rx='10'%20ry='10'%20/%3e%3c!--%20Top%20vertical%20lines%20--%3e%3cline%20x1='20'%20y1='5'%20x2='20'%20y2='30'%20/%3e%3cline%20x1='50'%20y1='5'%20x2='50'%20y2='30'%20/%3e%3cline%20x1='80'%20y1='5'%20x2='80'%20y2='30'%20/%3e%3c!--%20Bottom%20vertical%20lines%20--%3e%3cline%20x1='30'%20y1='95'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='95'%20x2='70'%20y2='70'%20/%3e%3c!--%20Horizontal%20traces%20--%3e%3cline%20x1='5'%20y1='50'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='95'%20y2='50'%20/%3e%3c!--%20Connect%20top%20to%20mid%20circles%20--%3e%3cline%20x1='20'%20y1='30'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='50'%20y1='30'%20x2='50'%20y2='50'%20/%3e%3cline%20x1='80'%20y1='30'%20x2='70'%20y2='50'%20/%3e%3c!--%20Connect%20mid%20to%20bottom%20circles%20--%3e%3cline%20x1='30'%20y1='50'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='70'%20y2='70'%20/%3e%3c!--%20Pads%20(circles)%20--%3e%3ccircle%20cx='20'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='50'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='80'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='70'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='70'%20r='5'%20/%3e%3c/svg%3e",SaveIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),HomeIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}));function NavBar({stateToURL:t}){const[n,a]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(ThemeProvider,{theme:theme$1,children:[jsxRuntimeExports.jsx(Snackbar,{open:n,autoHideDuration:1e4,onClose:()=>a(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Shareable URL copied to clipboard! Your whole website state is in the URL",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200}})}),jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:1},children:jsxRuntimeExports.jsxs(Toolbar,{style:{minHeight:0},children:[jsxRuntimeExports.jsx("img",{src:CircuitSolverSVG,alt:"Smith Chart",width:"30",height:"30",style:{marginRight:"12px"}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:"bold",display:{xs:"none",sm:"block"}},children:"ONLINE CIRCUIT SOLVER"}),jsxRuntimeExports.jsx("div",{style:{flexGrow:1,display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Tooltip,{title:"Copy shareable URL",placement:"bottom",children:jsxRuntimeExports.jsx(IconButton,{"aria-label":"download",color:"bland",onClick:()=>{const l=t();navigator.clipboard.writeText(l).then(()=>{a(!0)})},children:jsxRuntimeExports.jsx(SaveIcon,{})})})}),jsxRuntimeExports.jsxs(Stack,{spacing:1,direction:{sm:"column",xs:"column",md:"row"},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com",children:jsxRuntimeExports.jsx(HomeIcon,{})}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://onlinesmithchart.com",children:"Smith Chart"}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com/circuitSolver",children:"Circuit Solver"})]})]})})})]})}function getToggleButtonUtilityClass(t){return generateUtilityClass("MuiToggleButton",t)}const toggleButtonClasses=generateUtilityClasses("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ToggleButtonGroupContext=reactExports.createContext({}),ToggleButtonGroupButtonContext=reactExports.createContext(void 0);function isValueSelected(t,n){return n===void 0||t===void 0?!1:Array.isArray(n)?n.includes(t):t===n}const useUtilityClasses$b=t=>{const{classes:n,fullWidth:a,selected:l,disabled:u,size:c,color:p}=t,d={root:["root",l&&"selected",u&&"disabled",a&&"fullWidth",`size${capitalize(c)}`,p]};return composeClasses(d,getToggleButtonUtilityClass,n)},ToggleButtonRoot=styled(ButtonBase,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${toggleButtonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${toggleButtonClasses.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha$1(t.palette.text.primary,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${toggleButtonClasses.selected}`]:{color:(t.vars||t).palette[n].main,backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette[n].main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha$1(t.palette[n].main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette[n].main,t.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}))),ToggleButton=reactExports.forwardRef(function t(n,a){const{value:l,...u}=reactExports.useContext(ToggleButtonGroupContext),c=reactExports.useContext(ToggleButtonGroupButtonContext),p=resolveProps({...u,selected:isValueSelected(n.value,l)},n),d=useDefaultProps({props:p,name:"MuiToggleButton"}),{children:Q,className:Ct,color:ar="standard",disabled:en=!1,disableFocusRipple:tn=!1,fullWidth:on=!1,onChange:cn,onClick:gn,selected:Cn,size:ex="medium",value:ix,...ax}=d,ox={...d,color:ar,disabled:en,disableFocusRipple:tn,fullWidth:on,size:ex},lx=useUtilityClasses$b(ox),cx=hx=>{gn&&(gn(hx,ix),hx.defaultPrevented)||cn&&cn(hx,ix)},dx=c||"";return jsxRuntimeExports.jsx(ToggleButtonRoot,{className:clsx(u.className,lx.root,Ct,dx),disabled:en,focusRipple:!tn,ref:a,onClick:cx,onChange:cn,value:ix,ownerState:ox,"aria-pressed":Cn,...ax,children:Q})});function getValidReactChildren(t){return reactExports.Children.toArray(t).filter(n=>reactExports.isValidElement(n))}function getToggleButtonGroupUtilityClass(t){return generateUtilityClass("MuiToggleButtonGroup",t)}const toggleButtonGroupClasses=generateUtilityClasses("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),useUtilityClasses$a=t=>{const{classes:n,orientation:a,fullWidth:l,disabled:u}=t,c={root:["root",a,l&&"fullWidth"],grouped:["grouped",`grouped${capitalize(a)}`,u&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(c,getToggleButtonGroupUtilityClass,n)},ToggleButtonGroupRoot=styled("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${toggleButtonGroupClasses.grouped}`]:n.grouped},{[`& .${toggleButtonGroupClasses.grouped}`]:n[`grouped${capitalize(a.orientation)}`]},{[`& .${toggleButtonGroupClasses.firstButton}`]:n.firstButton},{[`& .${toggleButtonGroupClasses.lastButton}`]:n.lastButton},{[`& .${toggleButtonGroupClasses.middleButton}`]:n.middleButton},n.root,a.orientation==="vertical"&&n.vertical,a.fullWidth&&n.fullWidth]}})(memoTheme(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderTop:0,marginTop:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),ToggleButtonGroup=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiToggleButtonGroup"}),{children:u,className:c,color:p="standard",disabled:d=!1,exclusive:Q=!1,fullWidth:Ct=!1,onChange:ar,orientation:en="horizontal",size:tn="medium",value:on,...cn}=l,gn={...l,disabled:d,fullWidth:Ct,orientation:en,size:tn},Cn=useUtilityClasses$a(gn),ex=reactExports.useCallback((dx,hx)=>{if(!ar)return;const fx=on&&on.indexOf(hx);let ux;on&&fx>=0?(ux=on.slice(),ux.splice(fx,1)):ux=on?on.concat(hx):[hx],ar(dx,ux)},[ar,on]),ix=reactExports.useCallback((dx,hx)=>{ar&&ar(dx,on===hx?null:hx)},[ar,on]),ax=reactExports.useMemo(()=>({className:Cn.grouped,onChange:Q?ix:ex,value:on,size:tn,fullWidth:Ct,color:p,disabled:d}),[Cn.grouped,Q,ix,ex,on,tn,Ct,p,d]),ox=getValidReactChildren(u),lx=ox.length,cx=dx=>{const hx=dx===0,fx=dx===lx-1;return hx&&fx?"":hx?Cn.firstButton:fx?Cn.lastButton:Cn.middleButton};return jsxRuntimeExports.jsx(ToggleButtonGroupRoot,{role:"group",className:clsx(Cn.root,c),ref:a,ownerState:gn,...cn,children:jsxRuntimeExports.jsx(ToggleButtonGroupContext.Provider,{value:ax,children:ox.map((dx,hx)=>jsxRuntimeExports.jsx(ToggleButtonGroupButtonContext.Provider,{value:cx(hx),children:dx},hx))})})}),scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function t(n,a,l){let u=Promise.resolve();if(a&&a.length>0){let p=function(Ct){return Promise.all(Ct.map(ar=>Promise.resolve(ar).then(en=>({status:"fulfilled",value:en}),en=>({status:"rejected",reason:en}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),Q=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));u=p(a.map(Ct=>{if(Ct=assetsURL(Ct),Ct in seen)return;seen[Ct]=!0;const ar=Ct.endsWith(".css"),en=ar?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ct}"]${en}`))return;const tn=document.createElement("link");if(tn.rel=ar?"stylesheet":scriptRel,ar||(tn.as="script"),tn.crossOrigin="",tn.href=Ct,Q&&tn.setAttribute("nonce",Q),document.head.appendChild(tn),ar)return new Promise((on,cn)=>{tn.addEventListener("load",on),tn.addEventListener("error",()=>cn(new Error(`Unable to preload CSS for ${Ct}`)))})}))}function c(p){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=p,window.dispatchEvent(d),!d.defaultPrevented)throw p}return u.then(p=>{for(const d of p||[])d.status==="rejected"&&c(d.reason);return n().catch(c)})};var ne=Object.defineProperty,s=(t,n)=>ne(t,"name",{value:n,configurable:!0}),k$2=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,a)=>(typeof require<"u"?require:n)[a]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),W=(()=>{for(var t=new Uint8Array(128),n=0;n<64;n++)t[n<26?n+65:n<52?n+71:n<62?n-4:n*4-205]=n;return a=>{for(var l=a.length,u=new Uint8Array((l-(a[l-1]=="=")-(a[l-2]=="="))*3/4|0),c=0,p=0;c<l;){var d=t[a.charCodeAt(c++)],Q=t[a.charCodeAt(c++)],Ct=t[a.charCodeAt(c++)],ar=t[a.charCodeAt(c++)];u[p++]=d<<2|Q>>4,u[p++]=Q<<4|Ct>>2,u[p++]=Ct<<6|ar}return u}})();function re(t){return!isNaN(parseFloat(t))&&isFinite(t)}s(re,"_isNumber");function S(t){return t.charAt(0).toUpperCase()+t.substring(1)}s(S,"_capitalize");function O(t){return function(){return this[t]}}s(O,"_getter");var E$1=["isConstructor","isEval","isNative","isToplevel"],P=["columnNumber","lineNumber"],N=["fileName","functionName","source"],ie=["args"],oe=["evalOrigin"],R=E$1.concat(P,N,ie,oe);function m$1(t){if(t)for(var n=0;n<R.length;n++)t[R[n]]!==void 0&&this["set"+S(R[n])](t[R[n]])}s(m$1,"StackFrame");m$1.prototype={getArgs:s(function(){return this.args},"getArgs"),setArgs:s(function(t){if(Object.prototype.toString.call(t)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=t},"setArgs"),getEvalOrigin:s(function(){return this.evalOrigin},"getEvalOrigin"),setEvalOrigin:s(function(t){if(t instanceof m$1)this.evalOrigin=t;else if(t instanceof Object)this.evalOrigin=new m$1(t);else throw new TypeError("Eval Origin must be an Object or StackFrame")},"setEvalOrigin"),toString:s(function(){var t=this.getFileName()||"",n=this.getLineNumber()||"",a=this.getColumnNumber()||"",l=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+n+":"+a+")":"[eval]:"+n+":"+a:l?l+" ("+t+":"+n+":"+a+")":t+":"+n+":"+a},"toString")};m$1.fromString=s(function(t){var n=t.indexOf("("),a=t.lastIndexOf(")"),l=t.substring(0,n),u=t.substring(n+1,a).split(","),c=t.substring(a+1);if(c.indexOf("@")===0)var p=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(c,""),d=p[1],Q=p[2],Ct=p[3];return new m$1({functionName:l,args:u||void 0,fileName:d,lineNumber:Q||void 0,columnNumber:Ct||void 0})},"StackFrame$$fromString");for(b$1=0;b$1<E$1.length;b$1++)m$1.prototype["get"+S(E$1[b$1])]=O(E$1[b$1]),m$1.prototype["set"+S(E$1[b$1])]=function(t){return function(n){this[t]=!!n}}(E$1[b$1]);var b$1;for(v$1=0;v$1<P.length;v$1++)m$1.prototype["get"+S(P[v$1])]=O(P[v$1]),m$1.prototype["set"+S(P[v$1])]=function(t){return function(n){if(!re(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(P[v$1]);var v$1;for(h$1=0;h$1<N.length;h$1++)m$1.prototype["get"+S(N[h$1])]=O(N[h$1]),m$1.prototype["set"+S(N[h$1])]=function(t){return function(n){this[t]=String(n)}}(N[h$1]);var h$1,A=m$1;function se(){var t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:s(function(a){if(a.stack&&a.stack.match(t))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:s(function(a){if(a.indexOf(":")===-1)return[a];var l=/(.+?)(?::(\d+))?(?::(\d+))?$/,u=l.exec(a.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:s(function(a){var l=a.stack.split(`
`).filter(function(u){return!!u.match(t)},this);return l.map(function(u){u.indexOf("(eval ")>-1&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var c=u.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),p=c.match(/ (\(.+\)$)/);c=p?c.replace(p[0],""):c;var d=this.extractLocation(p?p[1]:c),Q=p&&c||void 0,Ct=["eval","<anonymous>"].indexOf(d[0])>-1?void 0:d[0];return new A({functionName:Q,fileName:Ct,lineNumber:d[1],columnNumber:d[2],source:u})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:s(function(a){var l=a.stack.split(`
`).filter(function(u){return!u.match(n)},this);return l.map(function(u){if(u.indexOf(" > eval")>-1&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return new A({functionName:u});var c=/((.*".+"[^@]*)?[^@]*)(?:@)/,p=u.match(c),d=p&&p[1]?p[1]:void 0,Q=this.extractLocation(u.replace(c,""));return new A({functionName:d,fileName:Q[0],lineNumber:Q[1],columnNumber:Q[2],source:u})},this)},"ErrorStackParser$$parseFFOrSafari")}}s(se,"ErrorStackParser");var ae=new se,$$1=ae,y$1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,L=y$1&&typeof module<"u"&&typeof module.exports<"u"&&typeof k$2<"u"&&typeof __dirname<"u",B=y$1&&!L,ce=typeof Deno<"u",j=!y$1&&!ce,H=j&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",V=j&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var F=typeof read=="function"&&typeof load=="function",q,T,J,z,D;async function U(){if(!y$1||(q=(await __vitePreload(async()=>{const{default:c}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{default:c}},void 0)).default,z=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),D=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),J=(await __vitePreload(async()=>{const{default:c}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{default:c}},void 0)).default,T=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),C$1=T.sep,typeof k$2<"u"))return;let t=z,n=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),a=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),l=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),u={fs:t,crypto:n,ws:a,child_process:l};globalThis.require=function(c){return u[c]}}s(U,"initNodeModules");function le(t,n){return T.resolve(n||".",t)}s(le,"node_resolvePath");function de(t,n){return n===void 0&&(n=location),new URL(t,n).toString()}s(de,"browser_resolvePath");var x;y$1?x=le:F?x=s(t=>t,"resolvePath"):x=de;var C$1;y$1||(C$1="/");function ue(t,n){return t.startsWith("file://")&&(t=t.slice(7)),t.includes("://")?{response:fetch(t)}:{binary:D.readFile(t).then(a=>new Uint8Array(a.buffer,a.byteOffset,a.byteLength))}}s(ue,"node_getBinaryResponse");function fe(t,n){if(t.startsWith("file://")&&(t=t.slice(7)),t.includes("://"))throw new Error("Shell cannot fetch urls");return{binary:Promise.resolve(new Uint8Array(readbuffer(t)))}}s(fe,"shell_getBinaryResponse");function me(t,n){let a=new URL(t,location);return{response:fetch(a,n?{integrity:n}:{})}}s(me,"browser_getBinaryResponse");var _;y$1?_=ue:F?_=fe:_=me;async function Y(t,n){let{response:a,binary:l}=_(t,n);if(l)return l;let u=await a;if(!u.ok)throw new Error(`Failed to load '${t}': request failed.`);return new Uint8Array(await u.arrayBuffer())}s(Y,"loadBinaryFile");var I;if(H)I=s(async t=>await import(t),"loadScript");else if(V)I=s(async t=>{try{globalThis.importScripts(t)}catch(n){if(n instanceof TypeError)await import(t);else throw n}},"loadScript");else if(y$1)I=pe;else if(F)I=load;else throw new Error("Cannot determine runtime environment");async function pe(t){t.startsWith("file://")&&(t=t.slice(7)),t.includes("://")?J.runInThisContext(await(await fetch(t)).text()):await import(q.pathToFileURL(t).href)}s(pe,"nodeLoadScript");async function K(t){if(y$1){await U();let n=await D.readFile(t,{encoding:"utf8"});return JSON.parse(n)}else if(F){let n=read(t);return JSON.parse(n)}else return await(await fetch(t)).json()}s(K,"loadLockFile");async function G(){if(L)return __dirname;let t;try{throw new Error}catch(l){t=l}let n=$$1.parse(t)[0].fileName;if(y$1&&!n.startsWith("file://")&&(n=`file://${n}`),B){let l=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),[]);return(await __vitePreload(async()=>{const{fileURLToPath:u}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{fileURLToPath:u}},void 0)).fileURLToPath(l.dirname(n))}let a=n.lastIndexOf(C$1);if(a===-1)throw new Error("Could not extract indexURL path from pyodide module location");return n.slice(0,a)}s(G,"calculateDirname");function X(t){let n=t.FS,a=t.FS.filesystems.MEMFS,l=t.PATH,u={DIR_MODE:16895,FILE_MODE:33279,mount:s(function(c){if(!c.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return a.mount.apply(null,arguments)},"mount"),syncfs:s(async(c,p,d)=>{try{let Q=u.getLocalSet(c),Ct=await u.getRemoteSet(c),ar=p?Ct:Q,en=p?Q:Ct;await u.reconcile(c,ar,en),d(null)}catch(Q){d(Q)}},"syncfs"),getLocalSet:s(c=>{let p=Object.create(null);function d(ar){return ar!=="."&&ar!==".."}s(d,"isRealDir");function Q(ar){return en=>l.join2(ar,en)}s(Q,"toAbsolute");let Ct=n.readdir(c.mountpoint).filter(d).map(Q(c.mountpoint));for(;Ct.length;){let ar=Ct.pop(),en=n.stat(ar);n.isDir(en.mode)&&Ct.push.apply(Ct,n.readdir(ar).filter(d).map(Q(ar))),p[ar]={timestamp:en.mtime,mode:en.mode}}return{type:"local",entries:p}},"getLocalSet"),getRemoteSet:s(async c=>{let p=Object.create(null),d=await ye(c.opts.fileSystemHandle);for(let[Q,Ct]of d)Q!=="."&&(p[l.join2(c.mountpoint,Q)]={timestamp:Ct.kind==="file"?new Date((await Ct.getFile()).lastModified):new Date,mode:Ct.kind==="file"?u.FILE_MODE:u.DIR_MODE});return{type:"remote",entries:p,handles:d}},"getRemoteSet"),loadLocalEntry:s(c=>{let p=n.lookupPath(c).node,d=n.stat(c);if(n.isDir(d.mode))return{timestamp:d.mtime,mode:d.mode};if(n.isFile(d.mode))return p.contents=a.getFileDataAsTypedArray(p),{timestamp:d.mtime,mode:d.mode,contents:p.contents};throw new Error("node type not supported")},"loadLocalEntry"),storeLocalEntry:s((c,p)=>{if(n.isDir(p.mode))n.mkdirTree(c,p.mode);else if(n.isFile(p.mode))n.writeFile(c,p.contents,{canOwn:!0});else throw new Error("node type not supported");n.chmod(c,p.mode),n.utime(c,p.timestamp,p.timestamp)},"storeLocalEntry"),removeLocalEntry:s(c=>{var p=n.stat(c);n.isDir(p.mode)?n.rmdir(c):n.isFile(p.mode)&&n.unlink(c)},"removeLocalEntry"),loadRemoteEntry:s(async c=>{if(c.kind==="file"){let p=await c.getFile();return{contents:new Uint8Array(await p.arrayBuffer()),mode:u.FILE_MODE,timestamp:new Date(p.lastModified)}}else{if(c.kind==="directory")return{mode:u.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+c.kind)}},"loadRemoteEntry"),storeRemoteEntry:s(async(c,p,d)=>{let Q=c.get(l.dirname(p)),Ct=n.isFile(d.mode)?await Q.getFileHandle(l.basename(p),{create:!0}):await Q.getDirectoryHandle(l.basename(p),{create:!0});if(Ct.kind==="file"){let ar=await Ct.createWritable();await ar.write(d.contents),await ar.close()}c.set(p,Ct)},"storeRemoteEntry"),removeRemoteEntry:s(async(c,p)=>{await c.get(l.dirname(p)).removeEntry(l.basename(p)),c.delete(p)},"removeRemoteEntry"),reconcile:s(async(c,p,d)=>{let Q=0,Ct=[];Object.keys(p.entries).forEach(function(tn){let on=p.entries[tn],cn=d.entries[tn];(!cn||n.isFile(on.mode)&&on.timestamp.getTime()>cn.timestamp.getTime())&&(Ct.push(tn),Q++)}),Ct.sort();let ar=[];if(Object.keys(d.entries).forEach(function(tn){p.entries[tn]||(ar.push(tn),Q++)}),ar.sort().reverse(),!Q)return;let en=p.type==="remote"?p.handles:d.handles;for(let tn of Ct){let on=l.normalize(tn.replace(c.mountpoint,"/")).substring(1);if(d.type==="local"){let cn=en.get(on),gn=await u.loadRemoteEntry(cn);u.storeLocalEntry(tn,gn)}else{let cn=u.loadLocalEntry(tn);await u.storeRemoteEntry(en,on,cn)}}for(let tn of ar)if(d.type==="local")u.removeLocalEntry(tn);else{let on=l.normalize(tn.replace(c.mountpoint,"/")).substring(1);await u.removeRemoteEntry(en,on)}},"reconcile")};t.FS.filesystems.NATIVEFS_ASYNC=u}s(X,"initializeNativeFS");var ye=s(async t=>{let n=[];async function a(u){for await(let c of u.values())n.push(c),c.kind==="directory"&&await a(c)}s(a,"collect"),await a(t);let l=new Map;l.set(".",t);for(let u of n){let c=(await t.resolve(u)).join("/");l.set(c,u)}return l},"getFsHandles");W("AGFzbQEAAAABDANfAGAAAW9gAW8BfwMDAgECByECD2NyZWF0ZV9zZW50aW5lbAAAC2lzX3NlbnRpbmVsAAEKEwIHAPsBAPsbCwkAIAD7GvsUAAs=");var be=async function(){globalThis.navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&typeof navigator.maxTouchPoints<"u"&&navigator.maxTouchPoints>1)}();async function Z(){let t=await be;if(t)return t.exports;let n=Symbol("error marker");return{create_sentinel:s(()=>n,"create_sentinel"),is_sentinel:s(a=>a===n,"is_sentinel")}}s(Z,"getSentinelImport");function ee(t){let n={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:Pe(t),print:t.stdout,printErr:t.stderr,onExit(a){n.exitCode=a},thisProgram:t._sysExecutable,arguments:t.args,API:{config:t},locateFile:s(a=>t.indexURL+a,"locateFile"),instantiateWasm:Ne(t.indexURL)};return n}s(ee,"createSettings");function ve(t){return function(n){let a="/";try{n.FS.mkdirTree(t)}catch(l){console.error(`Error occurred while making a home directory '${t}':`),console.error(l),console.error(`Using '${a}' for a home directory instead`),t=a}n.FS.chdir(t)}}s(ve,"createHomeDirectory");function he(t){return function(n){Object.assign(n.ENV,t)}}s(he,"setEnvironment");function Se(t){return t?[async n=>{n.addRunDependency("fsInitHook");try{await t(n.FS,{sitePackages:n.API.sitePackages})}finally{n.removeRunDependency("fsInitHook")}}]:[]}s(Se,"callFsInitHook");function we(t){let n=t.HEAPU32[t._Py_Version>>>2],a=n>>>24&255,l=n>>>16&255,u=n>>>8&255;return[a,l,u]}s(we,"computeVersionTuple");function Ee(t){let n=Y(t);return async a=>{a.API.pyVersionTuple=we(a);let[l,u]=a.API.pyVersionTuple;a.FS.mkdirTree("/lib"),a.API.sitePackages=`/lib/python${l}.${u}/site-packages`,a.FS.mkdirTree(a.API.sitePackages),a.addRunDependency("install-stdlib");try{let c=await n;a.FS.writeFile(`/lib/python${l}${u}.zip`,c)}catch(c){console.error("Error occurred while installing the standard library:"),console.error(c)}finally{a.removeRunDependency("install-stdlib")}}}s(Ee,"installStdlib");function Pe(t){let n;return t.stdLibURL!=null?n=t.stdLibURL:n=t.indexURL+"python_stdlib.zip",[Ee(n),ve(t.env.HOME),he(t.env),X,...Se(t.fsInit)]}s(Pe,"getFileSystemInitializationFuncs");function Ne(t){if(typeof WasmOffsetConverter<"u")return;let{binary:n,response:a}=_(t+"pyodide.asm.wasm"),l=Z();return function(u,c){return async function(){u.sentinel=await l;try{let p;a?p=await WebAssembly.instantiateStreaming(a,u):p=await WebAssembly.instantiate(await n,u);let{instance:d,module:Q}=p;c(d,Q)}catch(p){console.warn("wasm instantiation failed!"),console.warn(p)}}(),{}}}s(Ne,"getInstantiateWasmFunc");var M="0.28.0";async function tt(t={}){var ar,en;await U();let n=t.indexURL||await G();n=x(n),n.endsWith("/")||(n+="/"),t.indexURL=n;let a={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:n+"pyodide-lock.json",args:[],env:{},packages:[],enableRunUntilComplete:!0,checkAPIVersion:!0,BUILD_ID:"aca77914b08e1d99774d24f0b7c9b8f9068e2c62cf4696d7e95d8c3b72139f2d"},l=Object.assign(a,t);(ar=l.env).HOME??(ar.HOME="/home/pyodide"),(en=l.env).PYTHONINSPECT??(en.PYTHONINSPECT="1");let u=ee(l),c=u.API;if(c.lockFilePromise=K(l.lockFileURL),typeof _createPyodideModule!="function"){let tn=`${l.indexURL}pyodide.asm.js`;await I(tn)}let p;if(t._loadSnapshot){let tn=await t._loadSnapshot;ArrayBuffer.isView(tn)?p=tn:p=new Uint8Array(tn),u.noInitialRun=!0,u.INITIAL_MEMORY=p.length}let d=await _createPyodideModule(u);if(u.exitCode!==void 0)throw new d.ExitStatus(u.exitCode);if(t.pyproxyToStringRepr&&c.setPyProxyToStringMethod(!0),t.convertNullToNone&&c.setCompatNullToNone(!0),c.version!==M&&l.checkAPIVersion)throw new Error(`Pyodide version does not match: '${M}' <==> '${c.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);d.locateFile=tn=>{throw tn.endsWith(".so")?new Error(`Failed to find dynamic library "${tn}"`):new Error(`Unexpected call to locateFile("${tn}")`)};let Q;p&&(Q=c.restoreSnapshot(p));let Ct=c.finalizeBootstrap(Q,t._snapshotDeserializer);return c.sys.path.insert(0,""),Ct.version.includes("dev")||c.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${Ct.version}/full/`),c._pyodide.set_excepthook(),await c.packageIndexReady,c.initializeStreams(l.stdin,l.stdout,l.stderr),Ct}s(tt,"loadPyodide");async function initPyodideAndSympy(){const t=await tt({indexURL:`https://cdn.jsdelivr.net/pyodide/v${M}/full/`});await t.loadPackage("sympy");var n=`
from sympy import Matrix, symbols, simplify, Abs, I, fraction, solve
from sympy.printing.mathml import mathml`;return await t.runPythonAsync(n),t}const HtmlTooltip=styled(({className:t,...n})=>jsxRuntimeExports.jsx(Tooltip,{...n,classes:{popper:t}}))(({theme:t})=>({[`& .${tooltipClasses.tooltip}`]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"}}));function formatMathML(t,n,a){return`<math><mfrac><mrow><mi>${n}</mi></mrow><mrow><msub><mi>${a[0]=="vin"?"V":"I"}</mi><mi>in</mi></msub></mrow></mfrac><mo>=</mo>${t}</math>`}function ChoseTF({setResults:t,nodes:n,fullyConnectedComponents:a,componentValuesSolved:l}){const[u,c]=reactExports.useState("algebrite"),[p,d]=reactExports.useState(!1),[Q,Ct]=reactExports.useState(null),ar=[],en=[];for(const cn in a)["vin","iin"].includes(a[cn].type)&&en.push(a[cn].type);for(const cn in a)["vprobe","iprobe"].includes(a[cn].type)&&ar.push(cn);const tn=ar.filter(cn=>a[cn].type=="vprobe");tn.length==2&&(ar.push(`${tn[0]}-${tn[1]}`),ar.push(`${tn[1]}-${tn[0]}`));const on={};for(const cn in a)cn in l&&(on[cn]=l[cn]);return jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[en.length==0||ar.length==0?jsxRuntimeExports.jsx(Box,{sx:{color:"red"},children:jsxRuntimeExports.jsxs("p",{children:["No path found from ",jsxRuntimeExports.jsx("b",{children:"vin"})," or ",jsxRuntimeExports.jsx("b",{children:"iin"})," to ",jsxRuntimeExports.jsx("b",{children:"vprobe"})," or ",jsxRuntimeExports.jsx("b",{children:"iprobe"})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Grid$1,{size:12,children:"Calculate..."}),ar.map(cn=>{const gn=cn.includes("-")?cn.split("-"):[cn];return jsxRuntimeExports.jsx(Grid$1,{size:{xs:4,sm:2,lg:1},children:jsxRuntimeExports.jsx(Button,{variant:"contained",loading:p,color:"info",fullWidth:!0,sx:{py:1,justifyContent:"center",fontSize:"1.4em"},onClick:async()=>{d(!0),t({...emptyResults});const[Cn,ex,ix,ax,ox]=await build_and_solve_mna(n.length,gn,a,on,Q,u),lx=formatMathML(ex,cn,en),cx=formatMathML(ax,cn,en);t({text:Cn,mathML:lx,complexResponse:ix,bilinearRaw:"",bilinearMathML:"",numericML:cx,numericText:ox,solver:Q}),d(!1)},children:jsxRuntimeExports.jsx("math",{xmlns:"http://www.w3.org/1998/Math/MathML",children:jsxRuntimeExports.jsxs("mfrac",{children:[jsxRuntimeExports.jsx("mi",{children:cn}),en[0]=="vin"?jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"V"}),jsxRuntimeExports.jsx("mi",{children:"in"})]}):jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"I"}),jsxRuntimeExports.jsx("mi",{children:"in"})]})]})})},cn)},cn)})]}),jsxRuntimeExports.jsx(Box,{display:"flex",gap:1,children:jsxRuntimeExports.jsxs(ToggleButtonGroup,{color:"primary",value:u,exclusive:!0,children:[jsxRuntimeExports.jsx(HtmlTooltip,{title:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h6",{children:"Chose Algebra solver"}),"These are JavaScript based solvers. It's already loaded and is fine for most cases"]}),children:jsxRuntimeExports.jsx(ToggleButton,{value:"algebrite",onClick:()=>{t({...emptyResults}),Ct(null),c("algebrite")},children:p?jsxRuntimeExports.jsx(CircularProgress,{size:20,color:"inherit"}):"Algebrite + Yaffle"})}),jsxRuntimeExports.jsx(HtmlTooltip,{title:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h6",{children:"Chose Algebra solver"}),"This is a Python based solver. Chosing this will download 10MB of files and run Python inside the browser, enabling more features such as giving a pretty numeric result, and more advanced algebraic simplification."]}),children:jsxRuntimeExports.jsx(ToggleButton,{value:"sympy",onClick:async()=>{d(!0),t({...emptyResults});const cn=await initPyodideAndSympy();Ct(cn),d(!1),c("sympy")},children:p?jsxRuntimeExports.jsx(CircularProgress,{size:20,color:"inherit"}):"SymPy"})})]})})]})}var bundle_min$1={exports:{}},bundle_min=bundle_min$1.exports,hasRequiredBundle_min;function requireBundle_min(){return hasRequiredBundle_min||(hasRequiredBundle_min=1,function(t,n){(function(a,l){t.exports=l()})(bundle_min,()=>(()=>{var a={4582:(p,d)=>{function Q(en,tn){return tn===void 0&&(tn=Object),tn&&typeof tn.freeze=="function"?tn.freeze(en):en}var Ct=Q({HTML:"text/html",isHTML:function(en){return en===Ct.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ar=Q({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(en){return en===ar.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});d.assign=function(en,tn){if(en===null||typeof en!="object")throw new TypeError("target is not an object");for(var on in tn)Object.prototype.hasOwnProperty.call(tn,on)&&(en[on]=tn[on]);return en},d.find=function(en,tn,on){if(on===void 0&&(on=Array.prototype),en&&typeof on.find=="function")return on.find.call(en,tn);for(var cn=0;cn<en.length;cn++)if(Object.prototype.hasOwnProperty.call(en,cn)){var gn=en[cn];if(tn.call(void 0,gn,cn,en))return gn}},d.freeze=Q,d.MIME_TYPE=Ct,d.NAMESPACE=ar},5752:(p,d,Q)=>{var Ct=Q(4582),ar=Q(4722),en=Q(6559),tn=Q(4466),on=ar.DOMImplementation,cn=Ct.NAMESPACE,gn=tn.ParseError,Cn=tn.XMLReader;function ex(hx){return hx.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function ix(hx){this.options=hx||{locator:{}}}function ax(){this.cdata=!1}function ox(hx,fx){fx.lineNumber=hx.lineNumber,fx.columnNumber=hx.columnNumber}function lx(hx){if(hx)return`
@`+(hx.systemId||"")+"#[line:"+hx.lineNumber+",col:"+hx.columnNumber+"]"}function cx(hx,fx,ux){return typeof hx=="string"?hx.substr(fx,ux):hx.length>=fx+ux||fx?new java.lang.String(hx,fx,ux)+"":hx}function dx(hx,fx){hx.currentElement?hx.currentElement.appendChild(fx):hx.doc.appendChild(fx)}ix.prototype.parseFromString=function(hx,fx){var ux=this.options,gx=new Cn,yx=ux.domBuilder||new ax,_x=ux.errorHandler,vx=ux.locator,bx=ux.xmlns||{},xx=/\/x?html?$/.test(fx),Sx=xx?en.HTML_ENTITIES:en.XML_ENTITIES;vx&&yx.setDocumentLocator(vx),gx.errorHandler=function(Cx,Tx,Px){if(!Cx){if(Tx instanceof ax)return Tx;Cx=Tx}var Fx={},Mx=Cx instanceof Function;function Dx(Ox){var Lx=Cx[Ox];!Lx&&Mx&&(Lx=Cx.length==2?function(Nx){Cx(Ox,Nx)}:Cx),Fx[Ox]=Lx&&function(Nx){Lx("[xmldom "+Ox+"]	"+Nx+lx(Px))}||function(){}}return Px=Px||{},Dx("warning"),Dx("error"),Dx("fatalError"),Fx}(_x,yx,vx),gx.domBuilder=ux.domBuilder||yx,xx&&(bx[""]=cn.HTML),bx.xml=bx.xml||cn.XML;var Ax=ux.normalizeLineEndings||ex;return hx&&typeof hx=="string"?gx.parse(Ax(hx),bx,Sx):gx.errorHandler.error("invalid doc source"),yx.doc},ax.prototype={startDocument:function(){this.doc=new on().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(hx,fx,ux,gx){var yx=this.doc,_x=yx.createElementNS(hx,ux||fx),vx=gx.length;dx(this,_x),this.currentElement=_x,this.locator&&ox(this.locator,_x);for(var bx=0;bx<vx;bx++){hx=gx.getURI(bx);var xx=gx.getValue(bx),Sx=(ux=gx.getQName(bx),yx.createAttributeNS(hx,ux));this.locator&&ox(gx.getLocator(bx),Sx),Sx.value=Sx.nodeValue=xx,_x.setAttributeNode(Sx)}},endElement:function(hx,fx,ux){var gx=this.currentElement;gx.tagName,this.currentElement=gx.parentNode},startPrefixMapping:function(hx,fx){},endPrefixMapping:function(hx){},processingInstruction:function(hx,fx){var ux=this.doc.createProcessingInstruction(hx,fx);this.locator&&ox(this.locator,ux),dx(this,ux)},ignorableWhitespace:function(hx,fx,ux){},characters:function(hx,fx,ux){if(hx=cx.apply(this,arguments)){if(this.cdata)var gx=this.doc.createCDATASection(hx);else gx=this.doc.createTextNode(hx);this.currentElement?this.currentElement.appendChild(gx):/^\s*$/.test(hx)&&this.doc.appendChild(gx),this.locator&&ox(this.locator,gx)}},skippedEntity:function(hx){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(hx){(this.locator=hx)&&(hx.lineNumber=0)},comment:function(hx,fx,ux){hx=cx.apply(this,arguments);var gx=this.doc.createComment(hx);this.locator&&ox(this.locator,gx),dx(this,gx)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(hx,fx,ux){var gx=this.doc.implementation;if(gx&&gx.createDocumentType){var yx=gx.createDocumentType(hx,fx,ux);this.locator&&ox(this.locator,yx),dx(this,yx),this.doc.doctype=yx}},warning:function(hx){console.warn("[xmldom warning]	"+hx,lx(this.locator))},error:function(hx){console.error("[xmldom error]	"+hx,lx(this.locator))},fatalError:function(hx){throw new gn(hx,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(hx){ax.prototype[hx]=function(){return null}}),d.DOMParser=ix},4722:(p,d,Q)=>{var Ct=Q(4582),ar=Ct.find,en=Ct.NAMESPACE;function tn($x){return $x!==""}function on($x,kx){return $x.hasOwnProperty(kx)||($x[kx]=!0),$x}function cn($x){if(!$x)return[];var kx=function(jx){return jx?jx.split(/[\t\n\f\r ]+/).filter(tn):[]}($x);return Object.keys(kx.reduce(on,{}))}function gn($x,kx){for(var jx in $x)Object.prototype.hasOwnProperty.call($x,jx)&&(kx[jx]=$x[jx])}function Cn($x,kx){var jx=$x.prototype;if(!(jx instanceof kx)){let gE=function(){};var Jx=gE;gE.prototype=kx.prototype,gn(jx,gE=new gE),$x.prototype=jx=gE}jx.constructor!=$x&&(typeof $x!="function"&&console.error("unknown Class:"+$x),jx.constructor=$x)}var ex={},ix=ex.ELEMENT_NODE=1,ax=ex.ATTRIBUTE_NODE=2,ox=ex.TEXT_NODE=3,lx=ex.CDATA_SECTION_NODE=4,cx=ex.ENTITY_REFERENCE_NODE=5,dx=ex.ENTITY_NODE=6,hx=ex.PROCESSING_INSTRUCTION_NODE=7,fx=ex.COMMENT_NODE=8,ux=ex.DOCUMENT_NODE=9,gx=ex.DOCUMENT_TYPE_NODE=10,yx=ex.DOCUMENT_FRAGMENT_NODE=11,_x=ex.NOTATION_NODE=12,vx={},bx={},xx=(vx.INDEX_SIZE_ERR=(bx[1]="Index size error",1),vx.DOMSTRING_SIZE_ERR=(bx[2]="DOMString size error",2),vx.HIERARCHY_REQUEST_ERR=(bx[3]="Hierarchy request error",3)),Sx=(vx.WRONG_DOCUMENT_ERR=(bx[4]="Wrong document",4),vx.INVALID_CHARACTER_ERR=(bx[5]="Invalid character",5),vx.NO_DATA_ALLOWED_ERR=(bx[6]="No data allowed",6),vx.NO_MODIFICATION_ALLOWED_ERR=(bx[7]="No modification allowed",7),vx.NOT_FOUND_ERR=(bx[8]="Not found",8)),Ax=(vx.NOT_SUPPORTED_ERR=(bx[9]="Not supported",9),vx.INUSE_ATTRIBUTE_ERR=(bx[10]="Attribute in use",10));function Cx($x,kx){if(kx instanceof Error)var jx=kx;else jx=this,Error.call(this,bx[$x]),this.message=bx[$x],Error.captureStackTrace&&Error.captureStackTrace(this,Cx);return jx.code=$x,kx&&(this.message=this.message+": "+kx),jx}function Tx(){}function Px($x,kx){this._node=$x,this._refresh=kx,Fx(this)}function Fx($x){var kx=$x._node._inc||$x._node.ownerDocument._inc;if($x._inc!==kx){var jx=$x._refresh($x._node);if(RE($x,"length",jx.length),!$x.$$length||jx.length<$x.$$length)for(var Jx=jx.length;Jx in $x;Jx++)Object.prototype.hasOwnProperty.call($x,Jx)&&delete $x[Jx];gn(jx,$x),$x._inc=kx}}function Mx(){}function Dx($x,kx){for(var jx=$x.length;jx--;)if($x[jx]===kx)return jx}function Ox($x,kx,jx,Jx){if(Jx?kx[Dx(kx,Jx)]=jx:kx[kx.length++]=jx,$x){jx.ownerElement=$x;var gE=$x.ownerDocument;gE&&(Jx&&zx(gE,$x,Jx),function(DE,LE,NE){DE&&DE._inc++,NE.namespaceURI===en.XMLNS&&(LE._nsMap[NE.prefix?NE.localName:""]=NE.value)}(gE,$x,jx))}}function Lx($x,kx,jx){var Jx=Dx(kx,jx);if(!(Jx>=0))throw new Cx(Sx,new Error($x.tagName+"@"+jx));for(var gE=kx.length-1;Jx<gE;)kx[Jx]=kx[++Jx];if(kx.length=gE,$x){var DE=$x.ownerDocument;DE&&(zx(DE,$x,jx),jx.ownerElement=null)}}function Nx(){}function Gx(){}function Ux($x){return($x=="<"?"&lt;":$x==">"&&"&gt;")||$x=="&"&&"&amp;"||$x=='"'&&"&quot;"||"&#"+$x.charCodeAt()+";"}function Hx($x,kx){if(kx($x))return!0;if($x=$x.firstChild)do if(Hx($x,kx))return!0;while($x=$x.nextSibling)}function Vx(){this.ownerDocument=this}function zx($x,kx,jx,Jx){$x&&$x._inc++,jx.namespaceURI===en.XMLNS&&delete kx._nsMap[jx.prefix?jx.localName:""]}function rE($x,kx,jx){if($x&&$x._inc){$x._inc++;var Jx=kx.childNodes;if(jx)Jx[Jx.length++]=jx;else{for(var gE=kx.firstChild,DE=0;gE;)Jx[DE++]=gE,gE=gE.nextSibling;Jx.length=DE,delete Jx[Jx.length]}}}function Zx($x,kx){var jx=kx.previousSibling,Jx=kx.nextSibling;return jx?jx.nextSibling=Jx:$x.firstChild=Jx,Jx?Jx.previousSibling=jx:$x.lastChild=jx,kx.parentNode=null,kx.previousSibling=null,kx.nextSibling=null,rE($x.ownerDocument,$x),kx}function eE($x){return $x&&$x.nodeType===Gx.DOCUMENT_TYPE_NODE}function oE($x){return $x&&$x.nodeType===Gx.ELEMENT_NODE}function iE($x){return $x&&$x.nodeType===Gx.TEXT_NODE}function Wx($x,kx){var jx=$x.childNodes||[];if(ar(jx,oE)||eE(kx))return!1;var Jx=ar(jx,eE);return!(kx&&Jx&&jx.indexOf(Jx)>jx.indexOf(kx))}function AE($x,kx){var jx=$x.childNodes||[];if(ar(jx,function(gE){return oE(gE)&&gE!==kx}))return!1;var Jx=ar(jx,eE);return!(kx&&Jx&&jx.indexOf(Jx)>jx.indexOf(kx))}function ME($x,kx,jx){var Jx=$x.childNodes||[],gE=kx.childNodes||[];if(kx.nodeType===Gx.DOCUMENT_FRAGMENT_NODE){var DE=gE.filter(oE);if(DE.length>1||ar(gE,iE))throw new Cx(xx,"More than one element or text in fragment");if(DE.length===1&&!Wx($x,jx))throw new Cx(xx,"Element in fragment can not be inserted before doctype")}if(oE(kx)&&!Wx($x,jx))throw new Cx(xx,"Only one element can be added and only after doctype");if(eE(kx)){if(ar(Jx,eE))throw new Cx(xx,"Only one doctype is allowed");var LE=ar(Jx,oE);if(jx&&Jx.indexOf(LE)<Jx.indexOf(jx))throw new Cx(xx,"Doctype can only be inserted before an element");if(!jx&&LE)throw new Cx(xx,"Doctype can not be appended since element is present")}}function EE($x,kx,jx){var Jx=$x.childNodes||[],gE=kx.childNodes||[];if(kx.nodeType===Gx.DOCUMENT_FRAGMENT_NODE){var DE=gE.filter(oE);if(DE.length>1||ar(gE,iE))throw new Cx(xx,"More than one element or text in fragment");if(DE.length===1&&!AE($x,jx))throw new Cx(xx,"Element in fragment can not be inserted before doctype")}if(oE(kx)&&!AE($x,jx))throw new Cx(xx,"Only one element can be added and only after doctype");if(eE(kx)){if(ar(Jx,function(NE){return eE(NE)&&NE!==jx}))throw new Cx(xx,"Only one doctype is allowed");var LE=ar(Jx,oE);if(jx&&Jx.indexOf(LE)<Jx.indexOf(jx))throw new Cx(xx,"Doctype can only be inserted before an element")}}function bE($x,kx,jx,Jx){(function($E,HE,QE){if(!function(ZE){return ZE&&(ZE.nodeType===Gx.DOCUMENT_NODE||ZE.nodeType===Gx.DOCUMENT_FRAGMENT_NODE||ZE.nodeType===Gx.ELEMENT_NODE)}($E))throw new Cx(xx,"Unexpected parent node type "+$E.nodeType);if(QE&&QE.parentNode!==$E)throw new Cx(Sx,"child not in parent");if(!function(ZE){return ZE&&(oE(ZE)||iE(ZE)||eE(ZE)||ZE.nodeType===Gx.DOCUMENT_FRAGMENT_NODE||ZE.nodeType===Gx.COMMENT_NODE||ZE.nodeType===Gx.PROCESSING_INSTRUCTION_NODE)}(HE)||eE(HE)&&$E.nodeType!==Gx.DOCUMENT_NODE)throw new Cx(xx,"Unexpected node type "+HE.nodeType+" for parent node type "+$E.nodeType)})($x,kx,jx),$x.nodeType===Gx.DOCUMENT_NODE&&(Jx||ME)($x,kx,jx);var gE=kx.parentNode;if(gE&&gE.removeChild(kx),kx.nodeType===yx){var DE=kx.firstChild;if(DE==null)return kx;var LE=kx.lastChild}else DE=LE=kx;var NE=jx?jx.previousSibling:$x.lastChild;DE.previousSibling=NE,LE.nextSibling=jx,NE?NE.nextSibling=DE:$x.firstChild=DE,jx==null?$x.lastChild=LE:jx.previousSibling=LE;do DE.parentNode=$x;while(DE!==LE&&(DE=DE.nextSibling));return rE($x.ownerDocument||$x,$x),kx.nodeType==yx&&(kx.firstChild=kx.lastChild=null),kx}function kE(){this._nsMap={}}function TE(){}function jE(){}function Ix(){}function Bx(){}function Yx(){}function Qx(){}function nE(){}function Kx(){}function dE(){}function cE(){}function mE(){}function xE(){}function OE($x,kx){var jx=[],Jx=this.nodeType==9&&this.documentElement||this,gE=Jx.prefix,DE=Jx.namespaceURI;if(DE&&gE==null&&(gE=Jx.lookupPrefix(DE))==null)var LE=[{namespace:DE,prefix:null}];return hE(this,jx,$x,kx,LE),jx.join("")}function PE($x,kx,jx){var Jx=$x.prefix||"",gE=$x.namespaceURI;if(!gE||Jx==="xml"&&gE===en.XML||gE===en.XMLNS)return!1;for(var DE=jx.length;DE--;){var LE=jx[DE];if(LE.prefix===Jx)return LE.namespace!==gE}return!0}function sE($x,kx,jx){$x.push(" ",kx,'="',jx.replace(/[<>&"\t\n\r]/g,Ux),'"')}function hE($x,kx,jx,Jx,gE){if(gE||(gE=[]),Jx){if(!($x=Jx($x)))return;if(typeof $x=="string")return void kx.push($x)}switch($x.nodeType){case ix:var DE=$x.attributes,LE=DE.length,NE=$x.firstChild,$E=$x.tagName,HE=$E;if(!(jx=en.isHTML($x.namespaceURI)||jx)&&!$x.prefix&&$x.namespaceURI){for(var QE,ZE=0;ZE<DE.length;ZE++)if(DE.item(ZE).name==="xmlns"){QE=DE.item(ZE).value;break}if(!QE){for(var TS=gE.length-1;TS>=0;TS--)if((PS=gE[TS]).prefix===""&&PS.namespace===$x.namespaceURI){QE=PS.namespace;break}}if(QE!==$x.namespaceURI)for(TS=gE.length-1;TS>=0;TS--){var PS;if((PS=gE[TS]).namespace===$x.namespaceURI){PS.prefix&&(HE=PS.prefix+":"+$E);break}}}kx.push("<",HE);for(var pS=0;pS<LE;pS++)(FS=DE.item(pS)).prefix=="xmlns"?gE.push({prefix:FS.localName,namespace:FS.value}):FS.nodeName=="xmlns"&&gE.push({prefix:"",namespace:FS.value});for(pS=0;pS<LE;pS++){var FS,NS,GS;PE(FS=DE.item(pS),0,gE)&&(sE(kx,(NS=FS.prefix||"")?"xmlns:"+NS:"xmlns",GS=FS.namespaceURI),gE.push({prefix:NS,namespace:GS})),hE(FS,kx,jx,Jx,gE)}if($E===HE&&PE($x,0,gE)&&(sE(kx,(NS=$x.prefix||"")?"xmlns:"+NS:"xmlns",GS=$x.namespaceURI),gE.push({prefix:NS,namespace:GS})),NE||jx&&!/^(?:meta|link|img|br|hr|input)$/i.test($E)){if(kx.push(">"),jx&&/^script$/i.test($E))for(;NE;)NE.data?kx.push(NE.data):hE(NE,kx,jx,Jx,gE.slice()),NE=NE.nextSibling;else for(;NE;)hE(NE,kx,jx,Jx,gE.slice()),NE=NE.nextSibling;kx.push("</",HE,">")}else kx.push("/>");return;case ux:case yx:for(NE=$x.firstChild;NE;)hE(NE,kx,jx,Jx,gE.slice()),NE=NE.nextSibling;return;case ax:return sE(kx,$x.name,$x.value);case ox:return kx.push($x.data.replace(/[<&>]/g,Ux));case lx:return kx.push("<![CDATA[",$x.data,"]]>");case fx:return kx.push("<!--",$x.data,"-->");case gx:var UE=$x.publicId,CE=$x.systemId;if(kx.push("<!DOCTYPE ",$x.name),UE)kx.push(" PUBLIC ",UE),CE&&CE!="."&&kx.push(" ",CE),kx.push(">");else if(CE&&CE!=".")kx.push(" SYSTEM ",CE,">");else{var qE=$x.internalSubset;qE&&kx.push(" [",qE,"]"),kx.push(">")}return;case hx:return kx.push("<?",$x.target," ",$x.data,"?>");case cx:return kx.push("&",$x.nodeName,";");default:kx.push("??",$x.nodeName)}}function wE($x,kx,jx){var Jx;switch(kx.nodeType){case ix:(Jx=kx.cloneNode(!1)).ownerDocument=$x;case yx:break;case ax:jx=!0}if(Jx||(Jx=kx.cloneNode(!1)),Jx.ownerDocument=$x,Jx.parentNode=null,jx)for(var gE=kx.firstChild;gE;)Jx.appendChild(wE($x,gE,jx)),gE=gE.nextSibling;return Jx}function vE($x,kx,jx){var Jx=new kx.constructor;for(var gE in kx)if(Object.prototype.hasOwnProperty.call(kx,gE)){var DE=kx[gE];typeof DE!="object"&&DE!=Jx[gE]&&(Jx[gE]=DE)}switch(kx.childNodes&&(Jx.childNodes=new Tx),Jx.ownerDocument=$x,Jx.nodeType){case ix:var LE=kx.attributes,NE=Jx.attributes=new Mx,$E=LE.length;NE._ownerElement=Jx;for(var HE=0;HE<$E;HE++)Jx.setAttributeNode(vE($x,LE.item(HE),!0));break;case ax:jx=!0}if(jx)for(var QE=kx.firstChild;QE;)Jx.appendChild(vE($x,QE,jx)),QE=QE.nextSibling;return Jx}function RE($x,kx,jx){$x[kx]=jx}vx.INVALID_STATE_ERR=(bx[11]="Invalid state",11),vx.SYNTAX_ERR=(bx[12]="Syntax error",12),vx.INVALID_MODIFICATION_ERR=(bx[13]="Invalid modification",13),vx.NAMESPACE_ERR=(bx[14]="Invalid namespace",14),vx.INVALID_ACCESS_ERR=(bx[15]="Invalid access",15),Cx.prototype=Error.prototype,gn(vx,Cx),Tx.prototype={length:0,item:function($x){return $x>=0&&$x<this.length?this[$x]:null},toString:function($x,kx){for(var jx=[],Jx=0;Jx<this.length;Jx++)hE(this[Jx],jx,$x,kx);return jx.join("")},filter:function($x){return Array.prototype.filter.call(this,$x)},indexOf:function($x){return Array.prototype.indexOf.call(this,$x)}},Px.prototype.item=function($x){return Fx(this),this[$x]||null},Cn(Px,Tx),Mx.prototype={length:0,item:Tx.prototype.item,getNamedItem:function($x){for(var kx=this.length;kx--;){var jx=this[kx];if(jx.nodeName==$x)return jx}},setNamedItem:function($x){var kx=$x.ownerElement;if(kx&&kx!=this._ownerElement)throw new Cx(Ax);var jx=this.getNamedItem($x.nodeName);return Ox(this._ownerElement,this,$x,jx),jx},setNamedItemNS:function($x){var kx,jx=$x.ownerElement;if(jx&&jx!=this._ownerElement)throw new Cx(Ax);return kx=this.getNamedItemNS($x.namespaceURI,$x.localName),Ox(this._ownerElement,this,$x,kx),kx},removeNamedItem:function($x){var kx=this.getNamedItem($x);return Lx(this._ownerElement,this,kx),kx},removeNamedItemNS:function($x,kx){var jx=this.getNamedItemNS($x,kx);return Lx(this._ownerElement,this,jx),jx},getNamedItemNS:function($x,kx){for(var jx=this.length;jx--;){var Jx=this[jx];if(Jx.localName==kx&&Jx.namespaceURI==$x)return Jx}return null}},Nx.prototype={hasFeature:function($x,kx){return!0},createDocument:function($x,kx,jx){var Jx=new Vx;if(Jx.implementation=this,Jx.childNodes=new Tx,Jx.doctype=jx||null,jx&&Jx.appendChild(jx),kx){var gE=Jx.createElementNS($x,kx);Jx.appendChild(gE)}return Jx},createDocumentType:function($x,kx,jx){var Jx=new Qx;return Jx.name=$x,Jx.nodeName=$x,Jx.publicId=kx||"",Jx.systemId=jx||"",Jx}},Gx.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function($x,kx){return bE(this,$x,kx)},replaceChild:function($x,kx){bE(this,$x,kx,EE),kx&&this.removeChild(kx)},removeChild:function($x){return Zx(this,$x)},appendChild:function($x){return this.insertBefore($x,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function($x){return vE(this.ownerDocument||this,this,$x)},normalize:function(){for(var $x=this.firstChild;$x;){var kx=$x.nextSibling;kx&&kx.nodeType==ox&&$x.nodeType==ox?(this.removeChild(kx),$x.appendData(kx.data)):($x.normalize(),$x=kx)}},isSupported:function($x,kx){return this.ownerDocument.implementation.hasFeature($x,kx)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function($x){for(var kx=this;kx;){var jx=kx._nsMap;if(jx){for(var Jx in jx)if(Object.prototype.hasOwnProperty.call(jx,Jx)&&jx[Jx]===$x)return Jx}kx=kx.nodeType==ax?kx.ownerDocument:kx.parentNode}return null},lookupNamespaceURI:function($x){for(var kx=this;kx;){var jx=kx._nsMap;if(jx&&Object.prototype.hasOwnProperty.call(jx,$x))return jx[$x];kx=kx.nodeType==ax?kx.ownerDocument:kx.parentNode}return null},isDefaultNamespace:function($x){return this.lookupPrefix($x)==null}},gn(ex,Gx),gn(ex,Gx.prototype),Vx.prototype={nodeName:"#document",nodeType:ux,doctype:null,documentElement:null,_inc:1,insertBefore:function($x,kx){if($x.nodeType==yx){for(var jx=$x.firstChild;jx;){var Jx=jx.nextSibling;this.insertBefore(jx,kx),jx=Jx}return $x}return bE(this,$x,kx),$x.ownerDocument=this,this.documentElement===null&&$x.nodeType===ix&&(this.documentElement=$x),$x},removeChild:function($x){return this.documentElement==$x&&(this.documentElement=null),Zx(this,$x)},replaceChild:function($x,kx){bE(this,$x,kx,EE),$x.ownerDocument=this,kx&&this.removeChild(kx),oE($x)&&(this.documentElement=$x)},importNode:function($x,kx){return wE(this,$x,kx)},getElementById:function($x){var kx=null;return Hx(this.documentElement,function(jx){if(jx.nodeType==ix&&jx.getAttribute("id")==$x)return kx=jx,!0}),kx},getElementsByClassName:function($x){var kx=cn($x);return new Px(this,function(jx){var Jx=[];return kx.length>0&&Hx(jx.documentElement,function(gE){if(gE!==jx&&gE.nodeType===ix){var DE=gE.getAttribute("class");if(DE){var LE=$x===DE;if(!LE){var NE=cn(DE);LE=kx.every(($E=NE,function(HE){return $E&&$E.indexOf(HE)!==-1}))}LE&&Jx.push(gE)}}var $E}),Jx})},createElement:function($x){var kx=new kE;return kx.ownerDocument=this,kx.nodeName=$x,kx.tagName=$x,kx.localName=$x,kx.childNodes=new Tx,(kx.attributes=new Mx)._ownerElement=kx,kx},createDocumentFragment:function(){var $x=new cE;return $x.ownerDocument=this,$x.childNodes=new Tx,$x},createTextNode:function($x){var kx=new Ix;return kx.ownerDocument=this,kx.appendData($x),kx},createComment:function($x){var kx=new Bx;return kx.ownerDocument=this,kx.appendData($x),kx},createCDATASection:function($x){var kx=new Yx;return kx.ownerDocument=this,kx.appendData($x),kx},createProcessingInstruction:function($x,kx){var jx=new mE;return jx.ownerDocument=this,jx.tagName=jx.nodeName=jx.target=$x,jx.nodeValue=jx.data=kx,jx},createAttribute:function($x){var kx=new TE;return kx.ownerDocument=this,kx.name=$x,kx.nodeName=$x,kx.localName=$x,kx.specified=!0,kx},createEntityReference:function($x){var kx=new dE;return kx.ownerDocument=this,kx.nodeName=$x,kx},createElementNS:function($x,kx){var jx=new kE,Jx=kx.split(":"),gE=jx.attributes=new Mx;return jx.childNodes=new Tx,jx.ownerDocument=this,jx.nodeName=kx,jx.tagName=kx,jx.namespaceURI=$x,Jx.length==2?(jx.prefix=Jx[0],jx.localName=Jx[1]):jx.localName=kx,gE._ownerElement=jx,jx},createAttributeNS:function($x,kx){var jx=new TE,Jx=kx.split(":");return jx.ownerDocument=this,jx.nodeName=kx,jx.name=kx,jx.namespaceURI=$x,jx.specified=!0,Jx.length==2?(jx.prefix=Jx[0],jx.localName=Jx[1]):jx.localName=kx,jx}},Cn(Vx,Gx),kE.prototype={nodeType:ix,hasAttribute:function($x){return this.getAttributeNode($x)!=null},getAttribute:function($x){var kx=this.getAttributeNode($x);return kx&&kx.value||""},getAttributeNode:function($x){return this.attributes.getNamedItem($x)},setAttribute:function($x,kx){var jx=this.ownerDocument.createAttribute($x);jx.value=jx.nodeValue=""+kx,this.setAttributeNode(jx)},removeAttribute:function($x){var kx=this.getAttributeNode($x);kx&&this.removeAttributeNode(kx)},appendChild:function($x){return $x.nodeType===yx?this.insertBefore($x,null):function(kx,jx){return jx.parentNode&&jx.parentNode.removeChild(jx),jx.parentNode=kx,jx.previousSibling=kx.lastChild,jx.nextSibling=null,jx.previousSibling?jx.previousSibling.nextSibling=jx:kx.firstChild=jx,kx.lastChild=jx,rE(kx.ownerDocument,kx,jx),jx}(this,$x)},setAttributeNode:function($x){return this.attributes.setNamedItem($x)},setAttributeNodeNS:function($x){return this.attributes.setNamedItemNS($x)},removeAttributeNode:function($x){return this.attributes.removeNamedItem($x.nodeName)},removeAttributeNS:function($x,kx){var jx=this.getAttributeNodeNS($x,kx);jx&&this.removeAttributeNode(jx)},hasAttributeNS:function($x,kx){return this.getAttributeNodeNS($x,kx)!=null},getAttributeNS:function($x,kx){var jx=this.getAttributeNodeNS($x,kx);return jx&&jx.value||""},setAttributeNS:function($x,kx,jx){var Jx=this.ownerDocument.createAttributeNS($x,kx);Jx.value=Jx.nodeValue=""+jx,this.setAttributeNode(Jx)},getAttributeNodeNS:function($x,kx){return this.attributes.getNamedItemNS($x,kx)},getElementsByTagName:function($x){return new Px(this,function(kx){var jx=[];return Hx(kx,function(Jx){Jx===kx||Jx.nodeType!=ix||$x!=="*"&&Jx.tagName!=$x||jx.push(Jx)}),jx})},getElementsByTagNameNS:function($x,kx){return new Px(this,function(jx){var Jx=[];return Hx(jx,function(gE){gE===jx||gE.nodeType!==ix||$x!=="*"&&gE.namespaceURI!==$x||kx!=="*"&&gE.localName!=kx||Jx.push(gE)}),Jx})}},Vx.prototype.getElementsByTagName=kE.prototype.getElementsByTagName,Vx.prototype.getElementsByTagNameNS=kE.prototype.getElementsByTagNameNS,Cn(kE,Gx),TE.prototype.nodeType=ax,Cn(TE,Gx),jE.prototype={data:"",substringData:function($x,kx){return this.data.substring($x,$x+kx)},appendData:function($x){$x=this.data+$x,this.nodeValue=this.data=$x,this.length=$x.length},insertData:function($x,kx){this.replaceData($x,0,kx)},appendChild:function($x){throw new Error(bx[xx])},deleteData:function($x,kx){this.replaceData($x,kx,"")},replaceData:function($x,kx,jx){jx=this.data.substring(0,$x)+jx+this.data.substring($x+kx),this.nodeValue=this.data=jx,this.length=jx.length}},Cn(jE,Gx),Ix.prototype={nodeName:"#text",nodeType:ox,splitText:function($x){var kx=this.data,jx=kx.substring($x);kx=kx.substring(0,$x),this.data=this.nodeValue=kx,this.length=kx.length;var Jx=this.ownerDocument.createTextNode(jx);return this.parentNode&&this.parentNode.insertBefore(Jx,this.nextSibling),Jx}},Cn(Ix,jE),Bx.prototype={nodeName:"#comment",nodeType:fx},Cn(Bx,jE),Yx.prototype={nodeName:"#cdata-section",nodeType:lx},Cn(Yx,jE),Qx.prototype.nodeType=gx,Cn(Qx,Gx),nE.prototype.nodeType=_x,Cn(nE,Gx),Kx.prototype.nodeType=dx,Cn(Kx,Gx),dE.prototype.nodeType=cx,Cn(dE,Gx),cE.prototype.nodeName="#document-fragment",cE.prototype.nodeType=yx,Cn(cE,Gx),mE.prototype.nodeType=hx,Cn(mE,Gx),xE.prototype.serializeToString=function($x,kx,jx){return OE.call($x,kx,jx)},Gx.prototype.toString=OE;try{if(Object.defineProperty){let $x=function(kx){switch(kx.nodeType){case ix:case yx:var jx=[];for(kx=kx.firstChild;kx;)kx.nodeType!==7&&kx.nodeType!==8&&jx.push($x(kx)),kx=kx.nextSibling;return jx.join("");default:return kx.nodeValue}};var IE=$x;Object.defineProperty(Px.prototype,"length",{get:function(){return Fx(this),this.$$length}}),Object.defineProperty(Gx.prototype,"textContent",{get:function(){return $x(this)},set:function(kx){switch(this.nodeType){case ix:case yx:for(;this.firstChild;)this.removeChild(this.firstChild);(kx||String(kx))&&this.appendChild(this.ownerDocument.createTextNode(kx));break;default:this.data=kx,this.value=kx,this.nodeValue=kx}}}),RE=function(kx,jx,Jx){kx["$$"+jx]=Jx}}}catch{}d.DocumentType=Qx,d.DOMException=Cx,d.DOMImplementation=Nx,d.Element=kE,d.Node=Gx,d.NodeList=Tx,d.XMLSerializer=xE},6559:(p,d,Q)=>{var Ct=Q(4582).freeze;d.XML_ENTITIES=Ct({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),d.HTML_ENTITIES=Ct({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),d.entityMap=d.HTML_ENTITIES},8978:(p,d,Q)=>{var Ct=Q(4722);d.DOMImplementation=Ct.DOMImplementation,d.XMLSerializer=Ct.XMLSerializer,d.DOMParser=Q(5752).DOMParser},4466:(p,d,Q)=>{var Ct=Q(4582).NAMESPACE,ar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,en=new RegExp("[\\-\\.0-9"+ar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tn=new RegExp("^"+ar.source+en.source+"*(?::"+ar.source+en.source+"*)?$");function on(hx,fx){this.message=hx,this.locator=fx,Error.captureStackTrace&&Error.captureStackTrace(this,on)}function cn(){}function gn(hx,fx){return fx.lineNumber=hx.lineNumber,fx.columnNumber=hx.columnNumber,fx}function Cn(hx,fx,ux,gx,yx,_x){function vx(Tx,Px,Fx){ux.attributeNames.hasOwnProperty(Tx)&&_x.fatalError("Attribute "+Tx+" redefined"),ux.addValue(Tx,Px.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,yx),Fx)}for(var bx,xx=++fx,Sx=0;;){var Ax=hx.charAt(xx);switch(Ax){case"=":if(Sx===1)bx=hx.slice(fx,xx),Sx=3;else{if(Sx!==2)throw new Error("attribute equal must after attrName");Sx=3}break;case"'":case'"':if(Sx===3||Sx===1){if(Sx===1&&(_x.warning('attribute value must after "="'),bx=hx.slice(fx,xx)),fx=xx+1,!((xx=hx.indexOf(Ax,fx))>0))throw new Error("attribute value no end '"+Ax+"' match");vx(bx,Cx=hx.slice(fx,xx),fx-1),Sx=5}else{if(Sx!=4)throw new Error('attribute value must after "="');vx(bx,Cx=hx.slice(fx,xx),fx),_x.warning('attribute "'+bx+'" missed start quot('+Ax+")!!"),fx=xx+1,Sx=5}break;case"/":switch(Sx){case 0:ux.setTagName(hx.slice(fx,xx));case 5:case 6:case 7:Sx=7,ux.closed=!0;case 4:case 1:break;case 2:ux.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return _x.error("unexpected end of input"),Sx==0&&ux.setTagName(hx.slice(fx,xx)),xx;case">":switch(Sx){case 0:ux.setTagName(hx.slice(fx,xx));case 5:case 6:case 7:break;case 4:case 1:(Cx=hx.slice(fx,xx)).slice(-1)==="/"&&(ux.closed=!0,Cx=Cx.slice(0,-1));case 2:Sx===2&&(Cx=bx),Sx==4?(_x.warning('attribute "'+Cx+'" missed quot(")!'),vx(bx,Cx,fx)):(Ct.isHTML(gx[""])&&Cx.match(/^(?:disabled|checked|selected)$/i)||_x.warning('attribute "'+Cx+'" missed value!! "'+Cx+'" instead!!'),vx(Cx,Cx,fx));break;case 3:throw new Error("attribute value missed!!")}return xx;case"":Ax=" ";default:if(Ax<=" ")switch(Sx){case 0:ux.setTagName(hx.slice(fx,xx)),Sx=6;break;case 1:bx=hx.slice(fx,xx),Sx=2;break;case 4:var Cx=hx.slice(fx,xx);_x.warning('attribute "'+Cx+'" missed quot(")!!'),vx(bx,Cx,fx);case 5:Sx=6}else switch(Sx){case 2:ux.tagName,Ct.isHTML(gx[""])&&bx.match(/^(?:disabled|checked|selected)$/i)||_x.warning('attribute "'+bx+'" missed value!! "'+bx+'" instead2!!'),vx(bx,bx,fx),fx=xx,Sx=1;break;case 5:_x.warning('attribute space is required"'+bx+'"!!');case 6:Sx=1,fx=xx;break;case 3:Sx=4,fx=xx;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}xx++}}function ex(hx,fx,ux){for(var gx=hx.tagName,yx=null,_x=hx.length;_x--;){var vx=hx[_x],bx=vx.qName,xx=vx.value;if((Tx=bx.indexOf(":"))>0)var Sx=vx.prefix=bx.slice(0,Tx),Ax=bx.slice(Tx+1),Cx=Sx==="xmlns"&&Ax;else Ax=bx,Sx=null,Cx=bx==="xmlns"&&"";vx.localName=Ax,Cx!==!1&&(yx==null&&(yx={},ox(ux,ux={})),ux[Cx]=yx[Cx]=xx,vx.uri=Ct.XMLNS,fx.startPrefixMapping(Cx,xx))}for(_x=hx.length;_x--;)(Sx=(vx=hx[_x]).prefix)&&(Sx==="xml"&&(vx.uri=Ct.XML),Sx!=="xmlns"&&(vx.uri=ux[Sx||""]));var Tx;(Tx=gx.indexOf(":"))>0?(Sx=hx.prefix=gx.slice(0,Tx),Ax=hx.localName=gx.slice(Tx+1)):(Sx=null,Ax=hx.localName=gx);var Px=hx.uri=ux[Sx||""];if(fx.startElement(Px,Ax,gx,hx),!hx.closed)return hx.currentNSMap=ux,hx.localNSMap=yx,!0;if(fx.endElement(Px,Ax,gx),yx)for(Sx in yx)Object.prototype.hasOwnProperty.call(yx,Sx)&&fx.endPrefixMapping(Sx)}function ix(hx,fx,ux,gx,yx){if(/^(?:script|textarea)$/i.test(ux)){var _x=hx.indexOf("</"+ux+">",fx),vx=hx.substring(fx+1,_x);if(/[&<]/.test(vx))return/^script$/i.test(ux)?(yx.characters(vx,0,vx.length),_x):(vx=vx.replace(/&#?\w+;/g,gx),yx.characters(vx,0,vx.length),_x)}return fx+1}function ax(hx,fx,ux,gx){var yx=gx[ux];return yx==null&&((yx=hx.lastIndexOf("</"+ux+">"))<fx&&(yx=hx.lastIndexOf("</"+ux)),gx[ux]=yx),yx<fx}function ox(hx,fx){for(var ux in hx)Object.prototype.hasOwnProperty.call(hx,ux)&&(fx[ux]=hx[ux])}function lx(hx,fx,ux,gx){if(hx.charAt(fx+2)==="-")return hx.charAt(fx+3)==="-"?(yx=hx.indexOf("-->",fx+4))>fx?(ux.comment(hx,fx+4,yx-fx-4),yx+3):(gx.error("Unclosed comment"),-1):-1;if(hx.substr(fx+3,6)=="CDATA["){var yx=hx.indexOf("]]>",fx+9);return ux.startCDATA(),ux.characters(hx,fx+9,yx-fx-9),ux.endCDATA(),yx+3}var _x=function(Cx,Tx){var Px,Fx=[],Mx=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Mx.lastIndex=Tx,Mx.exec(Cx);Px=Mx.exec(Cx);)if(Fx.push(Px),Px[1])return Fx}(hx,fx),vx=_x.length;if(vx>1&&/!doctype/i.test(_x[0][0])){var bx=_x[1][0],xx=!1,Sx=!1;vx>3&&(/^public$/i.test(_x[2][0])?(xx=_x[3][0],Sx=vx>4&&_x[4][0]):/^system$/i.test(_x[2][0])&&(Sx=_x[3][0]));var Ax=_x[vx-1];return ux.startDTD(bx,xx,Sx),ux.endDTD(),Ax.index+Ax[0].length}return-1}function cx(hx,fx,ux){var gx=hx.indexOf("?>",fx);if(gx){var yx=hx.substring(fx,gx).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return yx?(yx[0].length,ux.processingInstruction(yx[1],yx[2]),gx+2):-1}return-1}function dx(){this.attributeNames={}}on.prototype=new Error,on.prototype.name=on.name,cn.prototype={parse:function(hx,fx,ux){var gx=this.domBuilder;gx.startDocument(),ox(fx,fx={}),function(yx,_x,vx,bx,xx){function Sx(bE){var kE=bE.slice(1,-1);return Object.hasOwnProperty.call(vx,kE)?vx[kE]:kE.charAt(0)==="#"?function(TE){if(TE>65535){var jE=55296+((TE-=65536)>>10),Ix=56320+(1023&TE);return String.fromCharCode(jE,Ix)}return String.fromCharCode(TE)}(parseInt(kE.substr(1).replace("x","0x"))):(xx.error("entity not found:"+bE),bE)}function Ax(bE){if(bE>Lx){var kE=yx.substring(Lx,bE).replace(/&#?\w+;/g,Sx);Mx&&Cx(Lx),bx.characters(kE,0,bE-Lx),Lx=bE}}function Cx(bE,kE){for(;bE>=Px&&(kE=Fx.exec(yx));)Tx=kE.index,Px=Tx+kE[0].length,Mx.lineNumber++;Mx.columnNumber=bE-Tx+1}for(var Tx=0,Px=0,Fx=/.*(?:\r\n?|\n)|.*$/g,Mx=bx.locator,Dx=[{currentNSMap:_x}],Ox={},Lx=0;;){try{var Nx=yx.indexOf("<",Lx);if(Nx<0){if(!yx.substr(Lx).match(/^\s*$/)){var Gx=bx.doc,Ux=Gx.createTextNode(yx.substr(Lx));Gx.appendChild(Ux),bx.currentElement=Ux}return}switch(Nx>Lx&&Ax(Nx),yx.charAt(Nx+1)){case"/":var Hx=yx.indexOf(">",Nx+3),Vx=yx.substring(Nx+2,Hx).replace(/[ \t\n\r]+$/g,""),zx=Dx.pop();Hx<0?(Vx=yx.substring(Nx+2).replace(/[\s<].*/,""),xx.error("end tag name: "+Vx+" is not complete:"+zx.tagName),Hx=Nx+1+Vx.length):Vx.match(/\s</)&&(Vx=Vx.replace(/[\s<].*/,""),xx.error("end tag name: "+Vx+" maybe not complete"),Hx=Nx+1+Vx.length);var rE=zx.localNSMap,Zx=zx.tagName==Vx;if(Zx||zx.tagName&&zx.tagName.toLowerCase()==Vx.toLowerCase()){if(bx.endElement(zx.uri,zx.localName,Vx),rE)for(var eE in rE)Object.prototype.hasOwnProperty.call(rE,eE)&&bx.endPrefixMapping(eE);Zx||xx.fatalError("end tag name: "+Vx+" is not match the current start tagName:"+zx.tagName)}else Dx.push(zx);Hx++;break;case"?":Mx&&Cx(Nx),Hx=cx(yx,Nx,bx);break;case"!":Mx&&Cx(Nx),Hx=lx(yx,Nx,bx,xx);break;default:Mx&&Cx(Nx);var oE=new dx,iE=Dx[Dx.length-1].currentNSMap,Wx=(Hx=Cn(yx,Nx,oE,iE,Sx,xx),oE.length);if(!oE.closed&&ax(yx,Hx,oE.tagName,Ox)&&(oE.closed=!0,vx.nbsp||xx.warning("unclosed xml attribute")),Mx&&Wx){for(var AE=gn(Mx,{}),ME=0;ME<Wx;ME++){var EE=oE[ME];Cx(EE.offset),EE.locator=gn(Mx,{})}bx.locator=AE,ex(oE,bx,iE)&&Dx.push(oE),bx.locator=Mx}else ex(oE,bx,iE)&&Dx.push(oE);Ct.isHTML(oE.uri)&&!oE.closed?Hx=ix(yx,Hx,oE.tagName,Sx,bx):Hx++}}catch(bE){if(bE instanceof on)throw bE;xx.error("element parse error: "+bE),Hx=-1}Hx>Lx?Lx=Hx:Ax(Math.max(Nx,Lx)+1)}}(hx,fx,ux,gx,this.errorHandler),gx.endDocument()}},dx.prototype={setTagName:function(hx){if(!tn.test(hx))throw new Error("invalid tagName:"+hx);this.tagName=hx},addValue:function(hx,fx,ux){if(!tn.test(hx))throw new Error("invalid attribute:"+hx);this.attributeNames[hx]=this.length,this[this.length++]={qName:hx,value:fx,offset:ux}},length:0,getLocalName:function(hx){return this[hx].localName},getLocator:function(hx){return this[hx].locator},getQName:function(hx){return this[hx].qName},getURI:function(hx){return this[hx].uri},getValue:function(hx){return this[hx].value}},d.XMLReader=cn,d.ParseError=on},8917:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidNumberOfChildrenError=void 0;var Ct=Q(6200);Object.defineProperty(d,"InvalidNumberOfChildrenError",{enumerable:!0,get:function(){return Ct.InvalidNumberOfChildrenError}})},6200:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidNumberOfChildrenError=void 0;class Q extends Error{constructor(ar,en,tn,on="exactly"){super(`${ar} tag must have ${on} ${en} children. It's actually ${tn}`),this.name="InvalidNumberOfChildrenError"}}d.InvalidNumberOfChildrenError=Q},4279:function(p,d,Q){var Ct=this&&this.__createBinding||(Object.create?function(en,tn,on,cn){cn===void 0&&(cn=on);var gn=Object.getOwnPropertyDescriptor(tn,on);gn&&!("get"in gn?!tn.__esModule:gn.writable||gn.configurable)||(gn={enumerable:!0,get:function(){return tn[on]}}),Object.defineProperty(en,cn,gn)}:function(en,tn,on,cn){cn===void 0&&(cn=on),en[cn]=tn[on]}),ar=this&&this.__exportStar||function(en,tn){for(var on in en)on==="default"||Object.prototype.hasOwnProperty.call(tn,on)||Ct(tn,en,on)};Object.defineProperty(d,"__esModule",{value:!0}),ar(Q(828),d),ar(Q(5975),d),ar(Q(799),d),ar(Q(2424),d)},5975:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.JoinWithManySeparators=void 0;class Q{constructor(ar){this._separators=ar}static join(ar,en,tn=""){const on=en.length>0?en:tn!==void 0?[tn]:[];return new Q(on)._join(ar)}_join(ar){return ar.reduce((en,tn,on,cn)=>en+tn+(on===cn.length-1?"":this._get(on)),"")}_get(ar){return this._separators[ar]?this._separators[ar]:this._separators[this._separators.length-1]}}d.JoinWithManySeparators=Q},799:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mathMLElementToLaTeXConverter=void 0;const Ct=Q(5443);d.mathMLElementToLaTeXConverter=ar=>new Ct.MathMLElementToLatexConverterAdapter(ar).toLatexConverter()},2424:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.normalizeWhiteSpaces=void 0,d.normalizeWhiteSpaces=Q=>Q.replace(/\s+/g," ")},7192:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BracketWrapper=void 0;const Ct=Q(1855);d.BracketWrapper=class{constructor(){this._open="{",this._close="}"}wrap(ar){return new Ct.Wrapper(this._open,this._close).wrap(ar)}}},5025:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericWrapper=void 0;const Ct=Q(1855);d.GenericWrapper=class{constructor(ar,en){this._open="\\left"+ar,this._close="\\right"+en}wrap(ar){return new Ct.Wrapper(this._open,this._close).wrap(ar)}}},828:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericWrapper=d.ParenthesisWrapper=d.BracketWrapper=void 0;var Ct=Q(7192);Object.defineProperty(d,"BracketWrapper",{enumerable:!0,get:function(){return Ct.BracketWrapper}});var ar=Q(1168);Object.defineProperty(d,"ParenthesisWrapper",{enumerable:!0,get:function(){return ar.ParenthesisWrapper}});var en=Q(5025);Object.defineProperty(d,"GenericWrapper",{enumerable:!0,get:function(){return en.GenericWrapper}})},1168:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ParenthesisWrapper=void 0;const Ct=Q(1855);d.ParenthesisWrapper=class{constructor(){this._open="\\left(",this._close="\\right)"}wrap(ar){return new Ct.Wrapper(this._open,this._close).wrap(ar)}wrapIfMoreThanOneChar(ar){return ar.length<=1?ar:this.wrap(ar)}}},1855:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Wrapper=void 0,d.Wrapper=class{constructor(Q,Ct){this._open=Q,this._close=Ct}wrap(Q){return this._open+Q+this._close}}},2697:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.VoidMathMLElement=void 0,d.VoidMathMLElement=class{constructor(){this.name="void",this.value="",this.children=[],this.attributes={}}}},4760:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericSpacingWrapper=void 0;const Ct=Q(4279);d.GenericSpacingWrapper=class{constructor(ar){this._mathmlElement=ar}convert(){return this._mathmlElement.children.map(ar=>(0,Ct.mathMLElementToLaTeXConverter)(ar)).map(ar=>ar.convert()).join(" ")}}},9376:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericUnderOver=void 0;const Ct=Q(799),ar=Q(8917),en=Q(472);d.GenericUnderOver=class{constructor(cn){this._mathmlElement=cn}convert(){const{name:cn,children:gn}=this._mathmlElement,Cn=gn.length;if(Cn!==2)throw new ar.InvalidNumberOfChildrenError(cn,2,Cn);const ex=(0,Ct.mathMLElementToLaTeXConverter)(gn[0]).convert(),ix=(0,Ct.mathMLElementToLaTeXConverter)(gn[1]).convert();return this._applyCommand(ex,ix)}_applyCommand(cn,gn){const Cn=this._mathmlElement.name.match(/under/)?on.Under:on.Over;return new tn(Cn).apply(cn,gn)}};class tn{constructor(gn){this._type=gn}apply(gn,Cn){return en.latexAccents.includes(Cn)?`${Cn}{${gn}}`:`${this._defaultCommand}{${Cn}}{${gn}}`}get _defaultCommand(){return this._type===on.Under?"\\underset":"\\overset"}}var on;(function(cn){cn[cn.Under=0]="Under",cn[cn.Over=1]="Over"})(on||(on={}))},6959:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Void=d.MSpace=d.MRow=d.GenericUnderOver=d.GenericSpacingWrapper=d.MTr=d.MTable=d.MUnderover=d.MText=d.MMultiscripts=d.MSubsup=d.MSub=d.MSup=d.MPhantom=d.MError=d.MEnclose=d.MAction=d.MRoot=d.MFrac=d.MFenced=d.MSqrt=d.MN=d.MO=d.MI=d.Math=void 0;var Ct=Q(393);Object.defineProperty(d,"Math",{enumerable:!0,get:function(){return Ct.Math}});var ar=Q(7037);Object.defineProperty(d,"MI",{enumerable:!0,get:function(){return ar.MI}});var en=Q(3487);Object.defineProperty(d,"MO",{enumerable:!0,get:function(){return en.MO}});var tn=Q(4464);Object.defineProperty(d,"MN",{enumerable:!0,get:function(){return tn.MN}});var on=Q(8686);Object.defineProperty(d,"MSqrt",{enumerable:!0,get:function(){return on.MSqrt}});var cn=Q(9511);Object.defineProperty(d,"MFenced",{enumerable:!0,get:function(){return cn.MFenced}});var gn=Q(6440);Object.defineProperty(d,"MFrac",{enumerable:!0,get:function(){return gn.MFrac}});var Cn=Q(6052);Object.defineProperty(d,"MRoot",{enumerable:!0,get:function(){return Cn.MRoot}});var ex=Q(1678);Object.defineProperty(d,"MAction",{enumerable:!0,get:function(){return ex.MAction}});var ix=Q(2631);Object.defineProperty(d,"MEnclose",{enumerable:!0,get:function(){return ix.MEnclose}});var ax=Q(1840);Object.defineProperty(d,"MError",{enumerable:!0,get:function(){return ax.MError}});var ox=Q(7443);Object.defineProperty(d,"MPhantom",{enumerable:!0,get:function(){return ox.MPhantom}});var lx=Q(6926);Object.defineProperty(d,"MSup",{enumerable:!0,get:function(){return lx.MSup}});var cx=Q(2564);Object.defineProperty(d,"MSub",{enumerable:!0,get:function(){return cx.MSub}});var dx=Q(1358);Object.defineProperty(d,"MSubsup",{enumerable:!0,get:function(){return dx.MSubsup}});var hx=Q(8303);Object.defineProperty(d,"MMultiscripts",{enumerable:!0,get:function(){return hx.MMultiscripts}});var fx=Q(3951);Object.defineProperty(d,"MText",{enumerable:!0,get:function(){return fx.MText}});var ux=Q(1222);Object.defineProperty(d,"MUnderover",{enumerable:!0,get:function(){return ux.MUnderover}});var gx=Q(2350);Object.defineProperty(d,"MTable",{enumerable:!0,get:function(){return gx.MTable}});var yx=Q(1586);Object.defineProperty(d,"MTr",{enumerable:!0,get:function(){return yx.MTr}});var _x=Q(4760);Object.defineProperty(d,"GenericSpacingWrapper",{enumerable:!0,get:function(){return _x.GenericSpacingWrapper}});var vx=Q(9376);Object.defineProperty(d,"GenericUnderOver",{enumerable:!0,get:function(){return vx.GenericUnderOver}});var bx=Q(6346);Object.defineProperty(d,"MRow",{enumerable:!0,get:function(){return bx.MRow}});var xx=Q(3700);Object.defineProperty(d,"MSpace",{enumerable:!0,get:function(){return xx.MSpace}});var Sx=Q(9165);Object.defineProperty(d,"Void",{enumerable:!0,get:function(){return Sx.Void}})},1678:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MAction=void 0;const Ct=Q(799);d.MAction=class{constructor(ar){this._mathmlElement=ar}convert(){const{children:ar}=this._mathmlElement;return this._isToggle()?ar.map(en=>(0,Ct.mathMLElementToLaTeXConverter)(en)).map(en=>en.convert()).join(" \\Longrightarrow "):(0,Ct.mathMLElementToLaTeXConverter)(ar[0]).convert()}_isToggle(){const{actiontype:ar}=this._mathmlElement.attributes;return ar==="toggle"||!ar}}},393:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Math=void 0;const Ct=Q(799),ar=Q(2424);d.Math=class{constructor(en){this._mathmlElement=en}convert(){const en=this._mathmlElement.children.map(tn=>(0,Ct.mathMLElementToLaTeXConverter)(tn)).map(tn=>tn.convert()).join(" ");return(0,ar.normalizeWhiteSpaces)(en)}}},2631:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MEnclose=void 0;const Ct=Q(799);d.MEnclose=class{constructor(ar){this._mathmlElement=ar}convert(){const ar=this._mathmlElement.children.map(en=>(0,Ct.mathMLElementToLaTeXConverter)(en)).map(en=>en.convert()).join(" ");return this._notation==="actuarial"?`\\overline{\\left.${ar}\\right|}`:this._notation==="radical"?`\\sqrt{${ar}}`:["box","roundedbox","circle"].includes(this._notation)?`\\boxed{${ar}}`:this._notation==="left"?`\\left|${ar}`:this._notation==="right"?`${ar}\\right|`:this._notation==="top"?`\\overline{${ar}}`:this._notation==="bottom"?`\\underline{${ar}}`:this._notation==="updiagonalstrike"?`\\cancel{${ar}}`:this._notation==="downdiagonalstrike"?`\\bcancel{${ar}}`:this._notation==="updiagonalarrow"?`\\cancelto{}{${ar}}`:["verticalstrike","horizontalstrike"].includes(this._notation)?`\\hcancel{${ar}}`:this._notation==="madruwb"?`\\underline{${ar}\\right|}`:this._notation==="phasorangle"?`{\\angle \\underline{${ar}}}`:`\\overline{\\left.\\right)${ar}}`}get _notation(){return this._mathmlElement.attributes.notation||"longdiv"}}},1840:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MError=void 0;const Ct=Q(799);d.MError=class{constructor(ar){this._mathmlElement=ar}convert(){return`\\color{red}{${this._mathmlElement.children.map(ar=>(0,Ct.mathMLElementToLaTeXConverter)(ar)).map(ar=>ar.convert()).join(" ")}}`}}},9511:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MFenced=void 0;const Ct=Q(799),ar=Q(4279);d.MFenced=class{constructor(cn){this._mathmlElement=cn,this.open=this._mathmlElement.attributes.open||"",this.close=this._mathmlElement.attributes.close||""}convert(){const cn=this._mathmlElement.children.map(ax=>(0,Ct.mathMLElementToLaTeXConverter)(ax)).map(ax=>ax.convert());if(this._isThereRelativeOfName(this._mathmlElement.children,"mtable"))return new tn(this.open,this.close).apply(cn);const gn=this._mathmlElement.attributes.separators,Cn=gn!==void 0,ex=gn?Array.from(gn):[],ix=Cn?"":",";return new en(this.open,this.close,ex,ix).apply(cn)}_isThereRelativeOfName(cn,gn){return cn.some(Cn=>Cn.name===gn||this._isThereRelativeOfName(Cn.children,gn))}};class en{constructor(gn,Cn,ex,ix){this.separators=ex,this.defaultSeparator=ix,this.open=gn||"(",this.close=Cn||")"}apply(gn){const Cn=ar.JoinWithManySeparators.join(gn,this.separators,this.defaultSeparator);return new ar.GenericWrapper(this.open,this.close).wrap(Cn)}}class tn{constructor(gn,Cn){this._genericCommand="matrix",this.separators=new on(gn,Cn)}apply(gn){const Cn=this._command,ex=`\\begin{${Cn}}
${gn.join("")}
\\end{${Cn}}`;return Cn===this._genericCommand?this.separators.wrap(ex):ex}get _command(){return this.separators.areParentheses()?"pmatrix":this.separators.areSquareBrackets()?"bmatrix":this.separators.areBrackets()?"Bmatrix":this.separators.areDivides()?"vmatrix":this.separators.areParallels()?"Vmatrix":this.separators.areNotEqual()?this._genericCommand:"bmatrix"}}class on{constructor(gn,Cn){this.open=gn,this.close=Cn}wrap(gn){return new ar.GenericWrapper(this.open,this.close).wrap(gn)}areParentheses(){return this._compare("(",")")}areSquareBrackets(){return this._compare("[","]")}areBrackets(){return this._compare("{","}")}areDivides(){return this._compare("|","|")}areParallels(){return this._compare("||","||")}areNotEqual(){return this.open!==this.close}_compare(gn,Cn){return this.open===gn&&this.close===Cn}}},6440:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MFrac=void 0;const Ct=Q(8917),ar=Q(4279);d.MFrac=class{constructor(en){this._mathmlElement=en}convert(){const{children:en,name:tn}=this._mathmlElement,on=en.length;if(on!==2)throw new Ct.InvalidNumberOfChildrenError(tn,2,on);const cn=(0,ar.mathMLElementToLaTeXConverter)(en[0]).convert(),gn=(0,ar.mathMLElementToLaTeXConverter)(en[1]).convert();return this._isBevelled()?`${this._wrapIfMoreThanOneChar(cn)}/${this._wrapIfMoreThanOneChar(gn)}`:`\\frac{${cn}}{${gn}}`}_wrapIfMoreThanOneChar(en){return new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(en)}_isBevelled(){return!!this._mathmlElement.attributes.bevelled}}},7037:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MI=void 0;const Ct=Q(4279),ar=Q(5406),en=Q(6122);d.MI=class{constructor(on){this.utf8Converter=new en.HashUTF8ToLtXConverter,this._mathmlElement=on}convert(){const on=(0,Ct.normalizeWhiteSpaces)(this._mathmlElement.value);if(on===" ")return tn.apply(on);const cn=on.trim(),gn=tn.apply(cn),Cn=this.utf8Converter.convert(gn);return Cn!==gn?Cn:this.wrapInMathVariant(gn,this.getMathVariant(this._mathmlElement.attributes))}getMathVariant(on){if(on&&on.mathvariant)return on.mathvariant}wrapInMathVariant(on,cn){switch(cn){case"bold":return`\\mathbf{${on}}`;case"italic":return`\\mathit{${on}}`;case"bold-italic":return`\\mathbf{\\mathit{${on}}}`;case"double-struck":return`\\mathbb{${on}}`;case"bold-fraktur":return`\\mathbf{\\mathfrak{${on}}}`;case"script":return`\\mathcal{${on}}`;case"bold-script":return`\\mathbf{\\mathcal{${on}}}`;case"fraktur":return`\\mathfrak{${on}}`;case"sans-serif":return`\\mathsf{${on}}`;case"bold-sans-serif":return`\\mathbf{\\mathsf{${on}}}`;case"sans-serif-italic":return`\\mathsf{\\mathit{${on}}}`;case"sans-serif-bold-italic":return`\\mathbf{\\mathsf{\\mathit{${on}}}}`;case"monospace":return`\\mathtt{${on}}`;default:return on}}};class tn{constructor(cn){this._value=cn}static apply(cn){return new tn(cn)._apply()}_apply(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new en.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return ar.allMathSymbolsByChar[this._value]}_findByGlyph(){return ar.allMathSymbolsByGlyph[this._value]}_findByNumber(){return ar.mathNumberByGlyph[this._value]}}},8303:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MMultiscripts=void 0;const Ct=Q(4279),ar=Q(8917);d.MMultiscripts=class{constructor(en){this._mathmlElement=en}convert(){const{name:en,children:tn}=this._mathmlElement,on=tn.length;if(on<3)throw new ar.InvalidNumberOfChildrenError(en,3,on,"at least");const cn=(0,Ct.mathMLElementToLaTeXConverter)(tn[0]).convert();return this._prescriptLatex()+this._wrapInParenthesisIfThereIsSpace(cn)+this._postscriptLatex()}_prescriptLatex(){const{children:en}=this._mathmlElement;let tn,on;if(this._isPrescripts(en[1]))tn=en[2],on=en[3];else{if(!this._isPrescripts(en[3]))return"";tn=en[4],on=en[5]}return`\\_{${(0,Ct.mathMLElementToLaTeXConverter)(tn).convert()}}^{${(0,Ct.mathMLElementToLaTeXConverter)(on).convert()}}`}_postscriptLatex(){const{children:en}=this._mathmlElement;if(this._isPrescripts(en[1]))return"";const tn=en[1],on=en[2];return`_{${(0,Ct.mathMLElementToLaTeXConverter)(tn).convert()}}^{${(0,Ct.mathMLElementToLaTeXConverter)(on).convert()}}`}_wrapInParenthesisIfThereIsSpace(en){return en.match(/\s+/g)?new Ct.ParenthesisWrapper().wrap(en):en}_isPrescripts(en){return(en==null?void 0:en.name)==="mprescripts"}}},4464:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MN=void 0;const Ct=Q(4279),ar=Q(5406);d.MN=class{constructor(en){this._mathmlElement=en}convert(){const en=(0,Ct.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return ar.mathNumberByGlyph[en]||en}}},3487:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MO=void 0;const Ct=Q(4279),ar=Q(5406);d.MO=class{constructor(tn){this._mathmlElement=tn}convert(){const tn=(0,Ct.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return en.operate(tn)}};class en{constructor(on){this._value=on}static operate(on){return new en(on)._operate()}_operate(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new ar.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return ar.allMathOperatorsByChar[this._value]}_findByGlyph(){return ar.allMathOperatorsByGlyph[this._value]}_findByNumber(){return ar.mathNumberByGlyph[this._value]}}},7443:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MPhantom=void 0,d.MPhantom=class{constructor(Q){this._mathmlElement=Q}convert(){return""}}},6052:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MRoot=void 0;const Ct=Q(4279),ar=Q(8917);d.MRoot=class{constructor(en){this._mathmlElement=en}convert(){const{name:en,children:tn}=this._mathmlElement,on=tn.length;if(on!==2)throw new ar.InvalidNumberOfChildrenError(en,2,on);const cn=(0,Ct.mathMLElementToLaTeXConverter)(tn[0]).convert();return`\\sqrt[${(0,Ct.mathMLElementToLaTeXConverter)(tn[1]).convert()}]{${cn}}`}}},6346:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MRow=void 0;const Ct=Q(4279);d.MRow=class{constructor(ar){this._mathmlElement=ar}convert(){return this._isLinearSystemPattern()?this._convertAsLinearSystem():this._mathmlElement.children.map(ar=>(0,Ct.mathMLElementToLaTeXConverter)(ar)).map(ar=>ar.convert()).join(" ")}_isLinearSystemPattern(){const{children:ar}=this._mathmlElement;if(ar.length!==3)return!1;const en=ar[0],tn=en.name==="mo"&&en.value.trim()==="{",on=ar[1].name==="mtable",cn=ar[2],gn=cn.name==="mo"&&cn.value.trim()==="";return tn&&on&&gn}_convertAsLinearSystem(){return`\\begin{cases} ${this._mathmlElement.children[1].children.map(ar=>(0,Ct.mathMLElementToLaTeXConverter)(ar)).map(ar=>ar.convert()).join(" \\\\ ")} \\end{cases}`}}},3700:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSpace=void 0,d.MSpace=class{constructor(Q){this._mathmlElement=Q}convert(){const{linebreak:Q}=this._mathmlElement.attributes;return Q==="newline"?" \\\\ ":" "}}},8686:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSqrt=void 0;const Ct=Q(4279);d.MSqrt=class{constructor(ar){this._mathmlElement=ar}convert(){return`\\sqrt{${this._mathmlElement.children.map(ar=>(0,Ct.mathMLElementToLaTeXConverter)(ar)).map(ar=>ar.convert()).join(" ")}}`}}},2564:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSub=void 0;const Ct=Q(4279),ar=Q(8917);d.MSub=class{constructor(en){this._mathmlElement=en}convert(){const{name:en,children:tn}=this._mathmlElement,on=tn.length;if(on!==2)throw new ar.InvalidNumberOfChildrenError(en,2,on);const cn=tn[0],gn=tn[1];return`${this._handleBaseChild(cn)}_${this._handleSubscriptChild(gn)}`}_handleBaseChild(en){const tn=en.children,on=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return tn.length<=1?on:new Ct.ParenthesisWrapper().wrapIfMoreThanOneChar(on)}_handleSubscriptChild(en){const tn=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return new Ct.BracketWrapper().wrap(tn)}}},1358:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSubsup=void 0;const Ct=Q(4279),ar=Q(8917);d.MSubsup=class{constructor(en){this._mathmlElement=en}convert(){const{name:en,children:tn}=this._mathmlElement,on=tn.length;if(on!==3)throw new ar.InvalidNumberOfChildrenError(en,3,on);const cn=tn[0],gn=tn[1],Cn=tn[2];return`${this._handleBaseChild(cn)}_${this._handleSubscriptChild(gn)}^${this._handleSuperscriptChild(Cn)}`}_handleBaseChild(en){const tn=en.children,on=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return tn.length<=1?on:new Ct.ParenthesisWrapper().wrapIfMoreThanOneChar(on)}_handleSubscriptChild(en){const tn=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return new Ct.BracketWrapper().wrap(tn)}_handleSuperscriptChild(en){const tn=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return new Ct.BracketWrapper().wrap(tn)}}},6926:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSup=void 0;const Ct=Q(4279),ar=Q(8917);d.MSup=class{constructor(en){this._mathmlElement=en}convert(){const{name:en,children:tn}=this._mathmlElement,on=tn.length;if(on!==2)throw new ar.InvalidNumberOfChildrenError(en,2,on);const cn=tn[0],gn=tn[1];return`${this._handleBaseChild(cn)}^${this._handleExponentChild(gn)}`}_handleBaseChild(en){const tn=en.children,on=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return tn.length<=1?on:new Ct.ParenthesisWrapper().wrapIfMoreThanOneChar(on)}_handleExponentChild(en){const tn=(0,Ct.mathMLElementToLaTeXConverter)(en).convert();return new Ct.BracketWrapper().wrap(tn)}}},2350:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MTable=void 0;const Ct=Q(4279);d.MTable=class{constructor(ar){this._mathmlElement=ar,this._addFlagRecursiveIfName(this._mathmlElement.children,"mtable","innerTable")}convert(){const ar=this._mathmlElement.children.map(en=>(0,Ct.mathMLElementToLaTeXConverter)(en)).map(en=>en.convert()).join(` \\\\
`);return this._hasFlag("innerTable")?this._wrap(ar):ar}_wrap(ar){return`\\begin{matrix}${ar}\\end{matrix}`}_addFlagRecursiveIfName(ar,en,tn){ar.forEach(on=>{on.name===en&&(on.attributes[tn]=tn),this._addFlagRecursiveIfName(on.children,en,tn)})}_hasFlag(ar){return!!this._mathmlElement.attributes[ar]}}},3951:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MText=void 0;const Ct=Q(7037);d.MText=class{constructor(en){this._mathmlElement=en}convert(){const{attributes:en,value:tn}=this._mathmlElement;return[...tn].map(on=>/^[a-zA-Z0-9]$/.test(on)||on===" "?{value:on,isAlphanumeric:!0}:{value:on,isAlphanumeric:!1}).reduce((on,cn)=>{if(cn.isAlphanumeric){const gn=on[on.length-1];if(gn&&gn.isAlphanumeric)return gn.value+=cn.value,on}return[...on,cn]},[]).map(on=>on.isAlphanumeric?new ar(en.mathvariant).apply(on.value):new Ct.MI({name:"mi",attributes:{},children:[],value:on.value}).convert()).join("")}};class ar{constructor(tn){this._mathvariant=tn||"normal"}apply(tn){return this._commands.reduce((on,cn,gn)=>gn===0?`${cn}{${tn}}`:`${cn}{${on}}`,"")}get _commands(){switch(this._mathvariant){case"bold":return["\\textbf"];case"italic":return["\\textit"];case"bold-italic":return["\\textit","\\textbf"];case"double-struck":return["\\mathbb"];case"monospace":return["\\mathtt"];case"bold-fraktur":case"fraktur":return["\\mathfrak"];default:return["\\text"]}}}},1586:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MTr=void 0;const Ct=Q(4279);d.MTr=class{constructor(ar){this._mathmlElement=ar}convert(){return this._mathmlElement.children.map(ar=>(0,Ct.mathMLElementToLaTeXConverter)(ar)).map(ar=>ar.convert()).join(" & ")}}},1222:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MUnderover=void 0;const Ct=Q(4279),ar=Q(8917);d.MUnderover=class{constructor(en){this._mathmlElement=en}convert(){const{name:en,children:tn}=this._mathmlElement,on=tn.length;if(on!==3)throw new ar.InvalidNumberOfChildrenError(en,3,on);return`${(0,Ct.mathMLElementToLaTeXConverter)(tn[0]).convert()}_{${(0,Ct.mathMLElementToLaTeXConverter)(tn[1]).convert()}}^{${(0,Ct.mathMLElementToLaTeXConverter)(tn[2]).convert()}}`}}},9165:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Void=void 0,d.Void=class{constructor(Q){this._mathmlElement=Q}convert(){return""}}},5443:function(p,d,Q){var Ct=this&&this.__createBinding||(Object.create?function(gn,Cn,ex,ix){ix===void 0&&(ix=ex);var ax=Object.getOwnPropertyDescriptor(Cn,ex);ax&&!("get"in ax?!Cn.__esModule:ax.writable||ax.configurable)||(ax={enumerable:!0,get:function(){return Cn[ex]}}),Object.defineProperty(gn,ix,ax)}:function(gn,Cn,ex,ix){ix===void 0&&(ix=ex),gn[ix]=Cn[ex]}),ar=this&&this.__setModuleDefault||(Object.create?function(gn,Cn){Object.defineProperty(gn,"default",{enumerable:!0,value:Cn})}:function(gn,Cn){gn.default=Cn}),en=this&&this.__importStar||function(gn){if(gn&&gn.__esModule)return gn;var Cn={};if(gn!=null)for(var ex in gn)ex!=="default"&&Object.prototype.hasOwnProperty.call(gn,ex)&&Ct(Cn,gn,ex);return ar(Cn,gn),Cn};Object.defineProperty(d,"__esModule",{value:!0}),d.MathMLElementToLatexConverterAdapter=void 0;const tn=en(Q(6959)),on=Q(2697);d.MathMLElementToLatexConverterAdapter=class{constructor(gn){this._mathMLElement=gn??new on.VoidMathMLElement}toLatexConverter(){const{name:gn}=this._mathMLElement;return new(cn[gn]||tn.GenericSpacingWrapper)(this._mathMLElement)}};const cn={math:tn.Math,mi:tn.MI,mo:tn.MO,mn:tn.MN,msqrt:tn.MSqrt,mfenced:tn.MFenced,mfrac:tn.MFrac,mroot:tn.MRoot,maction:tn.MAction,menclose:tn.MEnclose,merror:tn.MError,mphantom:tn.MPhantom,msup:tn.MSup,msub:tn.MSub,msubsup:tn.MSubsup,mmultiscripts:tn.MMultiscripts,mtext:tn.MText,munderover:tn.MUnderover,mtable:tn.MTable,mtr:tn.MTr,mover:tn.GenericUnderOver,munder:tn.GenericUnderOver,mrow:tn.MRow,mspace:tn.MSpace,mpadded:tn.GenericSpacingWrapper,void:tn.Void}},5243:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ErrorHandler=void 0,d.ErrorHandler=class{constructor(){this._errors=[],this.errorLocator={}}fixError(Q,Ct){return this._isMissingAttributeValueError(Ct)?(this._errors.push(Ct),this._fixMissingAttribute(Ct,Q)):Q}isThereAnyErrors(){return this._errors.length>0}cleanErrors(){this._errors=[]}_fixMissingAttribute(Q,Ct){const ar=Q.split('"')[1];if(ar)return Ct.replace(this._matchMissingValueForAttribute(ar),"");for(;this._mathGenericMissingValue().exec(Ct);)Ct=Ct.replace(this._mathGenericMissingValue(),"$1$3");return Ct}_matchMissingValueForAttribute(Q){return new RegExp(`(${Q}=(?!("|')))|(${Q}(?!("|')))`,"gm")}_mathGenericMissingValue(){return/(\<.* )(\w+=(?!\"|\'))(.*\>)/gm}_isMissingAttributeValueError(Q){return!!Q.includes("attribute")&&!!Q.includes("missed")||Q.includes("attribute value missed")}}},9208:function(p,d,Q){var Ct=this&&this.__createBinding||(Object.create?function(en,tn,on,cn){cn===void 0&&(cn=on);var gn=Object.getOwnPropertyDescriptor(tn,on);gn&&!("get"in gn?!tn.__esModule:gn.writable||gn.configurable)||(gn={enumerable:!0,get:function(){return tn[on]}}),Object.defineProperty(en,cn,gn)}:function(en,tn,on,cn){cn===void 0&&(cn=on),en[cn]=tn[on]}),ar=this&&this.__exportStar||function(en,tn){for(var on in en)on==="default"||Object.prototype.hasOwnProperty.call(tn,on)||Ct(tn,en,on)};Object.defineProperty(d,"__esModule",{value:!0}),ar(Q(9548),d),ar(Q(5243),d),ar(Q(1101),d)},1101:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ElementsToMathMLAdapter=void 0,d.ElementsToMathMLAdapter=class{convert(Q){return Q.filter(Ct=>Ct.tagName!==void 0).map(Ct=>this._convertElement(Ct))}_convertElement(Q){return{name:Q.tagName,attributes:this._convertElementAttributes(Q.attributes),value:this._hasElementChild(Q)?"":Q.textContent||"",children:this._hasElementChild(Q)?this.convert(Array.from(Q.childNodes)):[]}}_convertElementAttributes(Q){return Array.from(Q).reduce((Ct,ar)=>Object.assign({[ar.nodeName]:ar.nodeValue===ar.nodeName?"":ar.nodeValue},Ct),{})}_hasElementChild(Q){const Ct=Q.childNodes;return!!Ct&&Ct.length!==0&&this._isThereAnyNoTextNode(Ct)}_isThereAnyNoTextNode(Q){return Array.from(Q).some(Ct=>Ct.nodeName!=="#text")}}},9548:function(p,d,Q){var Ct=this&&this.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(d,"__esModule",{value:!0}),d.XmlToMathMLAdapter=void 0;const ar=Ct(Q(8978));d.XmlToMathMLAdapter=class{constructor(en,tn){this._xml="",this._elementsConvertor=en,this._errorHandler=tn,this._xmlDOM=new ar.default.DOMParser({locator:this._errorHandler.errorLocator,errorHandler:this._fixError.bind(this)})}convert(en){return this._xml=this._removeLineBreaks(en),this._xml=this._removeMsWordPrefixes(this._xml),this._elementsConvertor.convert(this._mathMLElements)}_fixError(en){this._xml=this._errorHandler.fixError(this._xml,en)}_removeLineBreaks(en){return en.replace(/\n|\r\n|\r/g,"")}_removeMsWordPrefixes(en){return en.replace(/mml:/g,"")}get _mathMLElements(){let en=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math");return this._errorHandler.isThereAnyErrors()&&(this._errorHandler.cleanErrors(),en=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math")),Array.from(en)}}},7941:function(p,d,Q){var Ct=this&&this.__createBinding||(Object.create?function(en,tn,on,cn){cn===void 0&&(cn=on);var gn=Object.getOwnPropertyDescriptor(tn,on);gn&&!("get"in gn?!tn.__esModule:gn.writable||gn.configurable)||(gn={enumerable:!0,get:function(){return tn[on]}}),Object.defineProperty(en,cn,gn)}:function(en,tn,on,cn){cn===void 0&&(cn=on),en[cn]=tn[on]}),ar=this&&this.__exportStar||function(en,tn){for(var on in en)on==="default"||Object.prototype.hasOwnProperty.call(tn,on)||Ct(tn,en,on)};Object.defineProperty(d,"__esModule",{value:!0}),ar(Q(8585),d)},8585:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.makeToMathElementsConverter=void 0;const Ct=Q(9208);d.makeToMathElementsConverter=()=>{const ar=new Ct.ElementsToMathMLAdapter,en=new Ct.ErrorHandler;return new Ct.XmlToMathMLAdapter(ar,en)}},8672:function(p,d,Q){var Ct=this&&this.__createBinding||(Object.create?function(en,tn,on,cn){cn===void 0&&(cn=on);var gn=Object.getOwnPropertyDescriptor(tn,on);gn&&!("get"in gn?!tn.__esModule:gn.writable||gn.configurable)||(gn={enumerable:!0,get:function(){return tn[on]}}),Object.defineProperty(en,cn,gn)}:function(en,tn,on,cn){cn===void 0&&(cn=on),en[cn]=tn[on]}),ar=this&&this.__exportStar||function(en,tn){for(var on in en)on==="default"||Object.prototype.hasOwnProperty.call(tn,on)||Ct(tn,en,on)};Object.defineProperty(d,"__esModule",{value:!0}),ar(Q(3798),d)},3798:(p,d,Q)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MathMLToLaTeX=void 0;const Ct=Q(5443),ar=Q(7941);d.MathMLToLaTeX=class{static convert(en){return(0,ar.makeToMathElementsConverter)().convert(en).map(tn=>new Ct.MathMLElementToLatexConverterAdapter(tn).toLatexConverter()).map(tn=>tn.convert()).join("").trim()}}},2965:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathOperatorsByChar=void 0,d.allMathOperatorsByChar={_:"\\underline","&#x23E1;":"\\underbrace","&#x23E0;":"\\overbrace","&#x23DF;":"\\underbrace","&#x23DE;":"\\overbrace","&#x23DD;":"\\underbrace","&#x23DC;":"\\overbrace","&#x23B5;":"\\underbrace","&#x23B4;":"\\overbrace","&#x20DC;":"\\square","&#x20DB;":"\\square","&#x2064;":"","&#x2057;":"''''","&#x203E;":"\\bar","&#x2037;":"```","&#x2036;":"``","&#x2035;":"`","&#x2034;":"'''","&#x2033;":"''","&#x201F;":"``","&#x201E;":",,","&#x201B;":"`","&#x201A;":",","&#x302;":"\\hat","&#x2F7;":"\\sim","&#x2DD;":"\\sim","&#x2DC;":"\\sim","&#x2DA;":"\\circ","&#x2D9;":"\\cdot","&#x2D8;":"","&#x2CD;":"\\_","&#x2CB;":"","&#x2CA;":"","&#x2C9;":"","&#x2C7;":"","&#x2C6;":"\\hat","&#xBA;":"o","&#xB9;":"1","&#xB8;":"","&#xB4;":"","&#xB3;":"3","&#xB2;":"2","&#xB0;":"\\circ","&#xAF;":"\\bar","&#xAA;":"a","&#xA8;":"\\cdot\\cdot","~":"\\sim","`":"`","^":"\\hat","--":"--","++":"++","&amp;":"\\&","&#x2061;":"","&#x221C;":"\\sqrt[4]{}","&#x221B;":"\\sqrt[3]{}","&#x221A;":"\\sqrt{}","&#x2146;":"d","&#x2145;":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","&#x266F;":"\\#","&#x266E;":"","&#x266D;":"","&#x2032;":"'","&lt;>":"<>","**":"\\star\\star","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x2299;":"\\bigodot","&#xAC;":"\\neg","&#x2222;":"\\measuredangle","&#x2221;":"\\measuredangle","&#x2220;":"\\angle","&#xF7;":"\\div","/":"/","&#x2216;":"\\backslash","\\":"\\backslash","%":"\\%","&#x2297;":"\\bigotimes","&#xB7;":"\\cdot","&#x2A3F;":"\\coprod","&#x2A2F;":"\\times","&#x22C5;":"\\cdot","&#x22A1;":"\\boxdot","&#x22A0;":"\\boxtimes","&#x2062;":"","&#x2043;":"-","&#x2022;":"\\cdot","&#xD7;":"\\times",".":".","*":"\\star","&#x222A;":"\\cup","&#x2229;":"\\cap","&#x2210;":"\\coprod","&#x220F;":"\\prod","&#x2240;":"","&#x2AFF;":"","&#x2AFC;":"\\mid\\mid\\mid","&#x2A09;":"\\times","&#x2A08;":"","&#x2A07;":"","&#x2A06;":"\\sqcup","&#x2A05;":"\\sqcap","&#x2A02;":"\\otimes","&#x2A00;":"\\odot","&#x22C2;":"\\cap","&#x22C1;":"\\vee","&#x22C0;":"\\wedge","&#x2A04;":"\\uplus","&#x2A03;":"\\cup","&#x22C3;":"\\cup","&#x2A1C;":"\\underline{\\int}","&#x2A1B;":"\\overline{\\int}","&#x2A1A;":"\\int","&#x2A19;":"\\int","&#x2A18;":"\\int","&#x2A17;":"\\int","&#x2A16;":"\\oint","&#x2A15;":"\\oint","&#x2A14;":"\\int","&#x2A13;":"\\int","&#x2A12;":"\\int","&#x2A11;":"\\int","&#x2A10;":"\\int","&#x2A0F;":"\\bcancel{\\int}","&#x2A0E;":"","&#x2A0D;":"\\hcancel{\\int}","&#x2A0C;":"\\iiiint","&#x2233;":"\\oint","&#x2232;":"\\oint","&#x2231;":"\\int","&#x2230;":"\\oiint","&#x222F;":"\\oiint","&#x222E;":"\\oint","&#x222B;":"\\int","&#x2A01;":"\\oplus","&#x2298;":"\\oslash","&#x2296;":"\\ominus","&#x2295;":"\\oplus","&#x222D;":"\\iiint","&#x222C;":"\\iint","&#x2A0B;":"","&#x2A0A;":"","&#x2211;":"\\sum","&#x229F;":"\\boxminus","&#x229E;":"\\boxplus","&#x2214;":"\\dot{+}","&#x2213;":"+-","&#x2212;":"-","&#xB1;":"\\pm","-":"-","+":"+","&#x2B46;":"\\Rrightarrow","&#x2B45;":"\\Lleftarrow","&#x29F4;":":\\rightarrow","&#x29EF;":"","&#x29DF;":"\\bullet-\\bullet","&#x299F;":"\\angle","&#x299E;":"\\measuredangle","&#x299D;":"\\measuredangle","&#x299C;":"\\perp","&#x299B;":"\\measuredangle","&#x299A;":"","&#x2999;":"\\vdots","&#x297F;":"","&#x297E;":"","&#x297D;":"\\prec","&#x297C;":"\\succ","&#x297B;":"\\underset{\\rightarrow}{\\supset}","&#x297A;":"","&#x2979;":"\\underset{\\rightarrow}{\\subset}","&#x2978;":"\\underset{\\rightarrow}{>}","&#x2977;":"","&#x2976;":"\\underset{\\leftarrow}{<}","&#x2975;":"\\underset{\\approx}{\\rightarrow}","&#x2974;":"\\underset{\\sim}{\\rightarrow}","&#x2973;":"\\underset{\\sim}{\\leftarrow}","&#x2972;":"\\overset{\\sim}{\\rightarrow}","&#x2971;":"\\overset{=}{\\rightarrow}","&#x2970;":"","&#x296F;":"","&#x296E;":"","&#x296D;":"\\overline{\\rightharpoondown}","&#x296C;":"\\underline{\\rightharpoonup}","&#x296B;":"\\overline{\\leftharpoondown}","&#x296A;":"\\underline{\\leftharpoonup}","&#x2969;":"\\rightleftharpoons","&#x2968;":"\\rightleftharpoons","&#x2967;":"\\rightleftharpoons","&#x2966;":"\\rightleftharpoons","&#x2965;":"\\Downarrow","&#x2964;":"\\Rightarrow","&#x2963;":"\\Uparrow","&#x2962;":"\\Leftarrow","&#x2961;":"\\downarrow","&#x2960;":"\\uparrow","&#x295F;":"\\rightarrow","&#x295E;":"\\leftarrow","&#x295D;":"\\downarrow","&#x295C;":"\\uparrow","&#x295B;":"\\rightarrow","&#x295A;":"\\leftarrow","&#x2959;":"\\downarrow","&#x2958;":"\\uparrow","&#x2957;":"\\rightarrow","&#x2956;":"\\leftarrow","&#x2955;":"\\downarrow","&#x2954;":"\\uparrow","&#x2953;":"\\rightarrow","&#x2952;":"\\leftarrow","&#x2951;":"\\updownarrow","&#x2950;":"\\leftrightarrow","&#x294F;":"\\updownarrow","&#x294E;":"\\leftrightarrow","&#x294D;":"\\updownarrow","&#x294C;":"\\updownarrow","&#x294B;":"\\leftrightarrow","&#x294A;":"\\leftrightarrow","&#x2949;":"","&#x2948;":"\\leftrightarrow","&#x2947;":"\\nrightarrow","&#x2946;":"","&#x2945;":"","&#x2944;":"\\rightleftarrows","&#x2943;":"\\leftrightarrows","&#x2942;":"\\rightleftarrows","&#x2941;":"\\circlearrowright","&#x2940;":"\\circlearrowleft","&#x293F;":"\\rightarrow","&#x293E;":"\\leftarrow","&#x293D;":"","&#x293C;":"","&#x293B;":"","&#x293A;":"","&#x2939;":"","&#x2938;":"","&#x2937;":"\\Rsh","&#x2936;":"\\Lsh","&#x2935;":"\\downarrow","&#x2934;":"\\uparrow","&#x2933;":"\\leadsto","&#x2932;":"","&#x2931;":"","&#x2930;":"","&#x292F;":"","&#x292E;":"","&#x292D;":"","&#x292C;":"\\times","&#x292B;":"\\times","&#x292A;":"","&#x2929;":"","&#x2928;":"","&#x2927;":"","&#x2926;":"","&#x2925;":"","&#x2924;":"","&#x2923;":"","&#x2922;":"","&#x2921;":"","&#x2920;":"\\mapsto\\cdot","&#x291F;":"\\cdot\\leftarrow","&#x291E;":"\\rightarrow\\cdot","&#x291D;":"\\leftarrow","&#x291C;":"\\rightarrow","&#x291B;":"\\leftarrow","&#x291A;":"\\rightarrow","&#x2919;":"\\leftarrow","&#x2918;":"\\rightarrow","&#x2917;":"\\rightarrow","&#x2916;":"\\rightarrow","&#x2915;":"\\rightarrow","&#x2914;":"\\rightarrow","&#x2913;":"\\downarrow","&#x2912;":"\\uparrow","&#x2911;":"\\rightarrow","&#x2910;":"\\rightarrow","&#x290F;":"\\rightarrow","&#x290E;":"\\leftarrow","&#x290D;":"\\rightarrow","&#x290C;":"\\leftarrow","&#x290B;":"\\Downarrow","&#x290A;":"\\Uparrow","&#x2909;":"\\uparrow","&#x2908;":"\\downarrow","&#x2907;":"\\Rightarrow","&#x2906;":"\\Leftarrow","&#x2905;":"\\mapsto","&#x2904;":"\\nLeftrightarrow","&#x2903;":"\\nRightarrow","&#x2902;":"\\nLeftarrow","&#x2901;":"\\rightsquigarrow","&#x2900;":"\\rightsquigarrow","&#x27FF;":"\\rightsquigarrow","&#x27FE;":"\\Rightarrow","&#x27FD;":"\\Leftarrow","&#x27FC;":"\\mapsto","&#x27FB;":"\\leftarrow","&#x27FA;":"\\Longleftrightarrow","&#x27F9;":"\\Longrightarrow","&#x27F8;":"\\Longleftarrow","&#x27F7;":"\\leftrightarrow","&#x27F6;":"\\rightarrow","&#x27F5;":"\\leftarrow","&#x27F1;":"\\Downarrow","&#x27F0;":"\\Uparrow","&#x22B8;":"\\rightarrow","&#x21FF;":"\\leftrightarrow","&#x21FE;":"\\rightarrow","&#x21FD;":"\\leftarrow","&#x21FC;":"\\nleftrightarrow","&#x21FB;":"\\nrightarrow","&#x21FA;":"\\nleftarrow","&#x21F9;":"\\nleftrightarrow","&#x21F8;":"\\nrightarrow","&#x21F7;":"\\nleftarrow","&#x21F6;":"\\Rrightarrow","&#x21F5;":"","&#x21F4;":"\\rightarrow","&#x21F3;":"\\Updownarrow","&#x21F2;":"\\searrow","&#x21F1;":"\\nwarrow","&#x21F0;":"\\Leftarrow","&#x21EF;":"\\Uparrow","&#x21EE;":"\\Uparrow","&#x21ED;":"\\Uparrow","&#x21EC;":"\\Uparrow","&#x21EB;":"\\Uparrow","&#x21EA;":"\\Uparrow","&#x21E9;":"\\Downarrow","&#x21E8;":"\\Rightarrow","&#x21E7;":"\\Uparrow","&#x21E6;":"\\Leftarrow","&#x21E5;":"\\rightarrow","&#x21E4;":"\\leftarrow","&#x21E3;":"\\downarrow","&#x21E2;":"\\rightarrow","&#x21E1;":"\\uparrow","&#x21E0;":"\\leftarrow","&#x21DF;":"\\downarrow","&#x21DE;":"\\uparrow","&#x21DD;":"\\rightsquigarrow","&#x21DC;":"\\leftarrow","&#x21DB;":"\\Rrightarrow","&#x21DA;":"\\Lleftarrow","&#x21D9;":"\\swarrow","&#x21D8;":"\\searrow","&#x21D7;":"\\nearrow","&#x21D6;":"\\nwarrow","&#x21D5;":"\\Updownarrow","&#x21D4;":"\\Leftrightarrow","&#x21D3;":"\\Downarrow","&#x21D2;":"\\Rightarrow","&#x21D1;":"\\Uparrow","&#x21D0;":"\\Leftarrow","&#x21CF;":"\\nRightarrow","&#x21CE;":"\\nLeftrightarrow","&#x21CD;":"\\nLeftarrow","&#x21CC;":"\\rightleftharpoons","&#x21CB;":"\\leftrightharpoons","&#x21CA;":"\\downdownarrows","&#x21C9;":"\\rightrightarrows","&#x21C8;":"\\upuparrows","&#x21C7;":"\\leftleftarrows","&#x21C6;":"\\leftrightarrows","&#x21C5;":"","&#x21C4;":"\\rightleftarrows","&#x21C3;":"\\downharpoonleft","&#x21C2;":"\\downharpoonright","&#x21C1;":"\\rightharpoondown","&#x21C0;":"\\rightharpoonup","&#x21BF;":"\\upharpoonleft","&#x21BE;":"\\upharpoonright","&#x21BD;":"\\leftharpoondown","&#x21BC;":"\\leftharpoonup","&#x21BB;":"\\circlearrowright","&#x21BA;":"\\circlearrowleft","&#x21B9;":"\\leftrightarrows","&#x21B8;":"\\overline{\\nwarrow}","&#x21B7;":"\\curvearrowright","&#x21B6;":"\\curvearrowleft","&#x21B5;":"\\swarrow","&#x21B4;":"\\searrow","&#x21B3;":"\\Rsh","&#x21B2;":"\\Lsh","&#x21B1;":"\\Rsh","&#x21B0;":"\\Lsh","&#x21AF;":"\\swarrow","&#x21AE;":"","&#x21AD;":"\\leftrightsquigarrow","&#x21AC;":"\\looparrowright","&#x21AB;":"\\looparrowleft","&#x21AA;":"\\hookrightarrow","&#x21A9;":"\\hookleftarrow","&#x21A8;":"\\underline{\\updownarrow}","&#x21A7;":"\\downarrow","&#x21A6;":"\\rightarrowtail","&#x21A5;":"\\uparrow","&#x21A4;":"\\leftarrowtail","&#x21A3;":"\\rightarrowtail","&#x21A2;":"\\leftarrowtail","&#x21A1;":"\\downarrow","&#x21A0;":"\\twoheadrightarrow","&#x219F;":"\\uparrow","&#x219E;":"\\twoheadleftarrow","&#x219D;":"\\nearrow","&#x219C;":"\\nwarrow","&#x219B;":"","&#x219A;":"","&#x2199;":"\\swarrow","&#x2198;":"\\searrow","&#x2197;":"\\nearrow","&#x2196;":"\\nwarrow","&#x2195;":"\\updownarrow","&#x2194;":"\\leftrightarrow","&#x2193;":"\\downarrow","&#x2192;":"\\rightarrow","&#x2191;":"\\uparrow","&#x2190;":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\left|\\right.","&#x2AFE;":"","&#x2AFD;":"//","&#x2AFB;":"///","&#x2AFA;":"","&#x2AF9;":"","&#x2AF8;":"","&#x2AF7;":"","&#x2AF6;":"\\vdots","&#x2AF5;":"","&#x2AF4;":"","&#x2AF3;":"","&#x2AF2;":"\\nparallel","&#x2AF1;":"","&#x2AF0;":"","&#x2AEF;":"","&#x2AEE;":"\\bcancel{\\mid}","&#x2AED;":"","&#x2AEC;":"","&#x2AEB;":"","&#x2AEA;":"","&#x2AE9;":"","&#x2AE8;":"\\underline{\\perp}","&#x2AE7;":"\\overline{\\top}","&#x2AE6;":"","&#x2AE5;":"","&#x2AE4;":"","&#x2AE3;":"","&#x2AE2;":"","&#x2AE1;":"","&#x2AE0;":"\\perp","&#x2ADF;":"\\top","&#x2ADE;":"\\dashv","&#x2ADD;&#x338;":"","&#x2ADD;":"","&#x2ADB;":"\\pitchfork","&#x2ADA;":"","&#x2AD9;":"","&#x2AD8;":"","&#x2AD7;":"","&#x2AD6;":"","&#x2AD5;":"","&#x2AD4;":"","&#x2AD3;":"","&#x2AD2;":"","&#x2AD1;":"","&#x2AD0;":"","&#x2ACF;":"","&#x2ACE;":"","&#x2ACD;":"","&#x2ACC;":"\\underset{\\neq}{\\supset}","&#x2ACB;":"\\underset{\\neq}{\\subset}","&#x2ACA;":"\\underset{\\approx}{\\supset}","&#x2AC9;":"\\underset{\\approx}{\\subset}","&#x2AC8;":"\\underset{\\sim}{\\supset}","&#x2AC7;":"\\underset{\\sim}{\\subset}","&#x2AC6;":"\\supseteqq","&#x2AC5;":"\\subseteqq","&#x2AC4;":"\\dot{\\supseteq}","&#x2AC3;":"\\dot{\\subseteq}","&#x2AC2;":"\\underset{\\times}{\\supset}","&#x2AC1;":"\\underset{\\times}{\\subset}","&#x2AC0;":"\\underset{+}{\\supset}","&#x2ABF;":"\\underset{+}{\\subset}","&#x2ABE;":"","&#x2ABD;":"","&#x2ABC;":"\\gg ","&#x2ABB;":"\\ll","&#x2ABA;":"\\underset{\\cancel{\\approx}}{\\succ}","&#x2AB9;":"\\underset{\\cancel{\\approx}}{\\prec}","&#x2AB8;":"\\underset{\\approx}{\\succ}","&#x2AB7;":"\\underset{\\approx}{\\prec}","&#x2AB6;":"\\underset{\\cancel{=}}{\\succ}","&#x2AB5;":"\\underset{\\cancel{=}}{\\prec}","&#x2AB4;":"\\underset{=}{\\succ}","&#x2AB3;":"\\underset{=}{\\prec}","&#x2AB2;":"","&#x2AB1;":"","&#x2AAE;":"","&#x2AAD;":"\\underline{\\hcancel{>}}","&#x2AAC;":"\\underline{\\hcancel{>}}","&#x2AAB;":"\\hcancel{>}","&#x2AAA;":"\\hcancel{<}","&#x2AA9;":"","&#x2AA8;":"","&#x2AA7;":"\\vartriangleright","&#x2AA6;":"\\vartriangleleft","&#x2AA5;":"><","&#x2AA4;":"><","&#x2AA3;":"\\underline{\\ll}","&#x2AA2;&#x338;":"\\cancel{\\gg}","&#x2AA2;":"\\gg","&#x2AA1;&#x338;":"\\cancel{\\ll}","&#x2AA1;":"\\ll","&#x2AA0;":"\\overset{\\sim}{\\geqq}","&#x2A9F;":"\\overset{\\sim}{\\leqq}","&#x2A9E;":"\\overset{\\sim}{>}","&#x2A9D;":"\\overset{\\sim}{<}","&#x2A9C;":"","&#x2A9B;":"","&#x2A9A;":"\\overset{=}{>}","&#x2A99;":"\\overset{=}{<}","&#x2A98;":"","&#x2A97;":"","&#x2A96;":"","&#x2A95;":"","&#x2A94;":"","&#x2A93;":"","&#x2A92;":"\\underset{=}{\\gtrless}","&#x2A91;":"\\underset{=}{\\lessgtr}","&#x2A90;":"\\underset{<}{\\gtrsim}","&#x2A8F;":"\\underset{>}{\\lesssim}","&#x2A8E;":"\\underset{\\simeq}{>}","&#x2A8D;":"\\underset{\\simeq}{<}","&#x2A8C;":"\\gtreqqless","&#x2A8B;":"\\lesseqqgtr","&#x2A8A;":"\\underset{\\cancel{\\approx}}{>}","&#x2A89;":"\\underset{\\approx}{<}","&#x2A86;":"\\underset{\\approx}{>}","&#x2A85;":"\\underset{\\approx}{<}","&#x2A84;":"","&#x2A83;":"","&#x2A82;":"","&#x2A81;":"","&#x2A80;":"","&#x2A7F;":"","&#x2A7E;&#x338;":"\\bcancel{\\geq}","&#x2A7E;":"\\geq","&#x2A7D;&#x338;":"\\bcancel{\\leq}","&#x2A7D;":"\\leq","&#x2A7C;":"","&#x2A7B;":"","&#x2A7A;":"","&#x2A79;":"","&#x2A78;":"\\overset{\\dots}{\\equiv}","&#x2A77;":"","&#x2A76;":"===","&#x2A75;":"==","&#x2A74;":"::=","&#x2A73;":"","&#x2A72;":"\\underset{=}{+}","&#x2A71;":"\\overset{=}{+}","&#x2A70;":"\\overset{\\approx}{=}","&#x2A6F;":"\\overset{\\wedge}{=}","&#x2A6E;":"\\overset{*}{=}","&#x2A6D;":"\\dot{\\approx}","&#x2A6C;":"","&#x2A6B;":"","&#x2A6A;":"\\dot{\\sim}","&#x2A69;":"","&#x2A68;":"","&#x2A67;":"\\dot{\\equiv}","&#x2A66;":"\\underset{\\cdot}{=}","&#x2A65;":"","&#x2A64;":"","&#x2A63;":"\\underset{=}{\\vee}","&#x2A62;":"\\overset{=}{\\vee}","&#x2A61;":"ul(vv)","&#x2A60;":"\\underset{=}{\\wedge}","&#x2A5F;":"\\underline{\\wedge}","&#x2A5E;":"\\overset{=}{\\wedge}","&#x2A5D;":"\\hcancel{\\vee}","&#x2A5C;":"\\hcancel{\\wedge}","&#x2A5B;":"","&#x2A5A;":"","&#x2A59;":"","&#x2A58;":"\\vee","&#x2A57;":"\\wedge","&#x2A56;":"","&#x2A55;":"","&#x2A54;":"","&#x2A53;":"","&#x2A52;":"\\dot{\\vee}","&#x2A51;":"\\dot{\\wedge}","&#x2A50;":"","&#x2A4F;":"","&#x2A4E;":"","&#x2A4D;":"\\overline{\\cap}","&#x2A4C;":"\\overline{\\cup}","&#x2A4B;":"","&#x2A4A;":"","&#x2A49;":"","&#x2A48;":"","&#x2A47;":"","&#x2A46;":"","&#x2A45;":"","&#x2A44;":"","&#x2A43;":"\\overline{\\cap}","&#x2A42;":"\\overline{\\cup}","&#x2A41;":"","&#x2A40;":"","&#x2A3E;":"","&#x2A3D;":"\\llcorner","&#x2A3C;":"\\lrcorner","&#x2A3B;":"","&#x2A3A;":"","&#x2A39;":"","&#x2A38;":"","&#x2A37;":"","&#x2A36;":"\\hat{\\otimes}","&#x2A35;":"","&#x2A34;":"","&#x2A33;":"","&#x2A32;":"\\underline{\\times}","&#x2A31;":"\\underline{\\times}","&#x2A30;":"\\dot{\\times}","&#x2A2E;":"","&#x2A2D;":"","&#x2A2C;":"","&#x2A2B;":"","&#x2A2A;":"","&#x2A29;":"","&#x2A28;":"","&#x2A27;":"","&#x2A26;":"\\underset{\\sim}{+}","&#x2A25;":"\\underset{\\circ}{+}","&#x2A24;":"\\overset{\\sim}{+}","&#x2A23;":"\\hat{+}","&#x2A22;":"\\dot{+}","&#x2A21;":"\\upharpoonright","&#x2A20;":">>","&#x2A1F;":"","&#x2A1E;":"\\triangleleft","&#x2A1D;":"\\bowtie","&#x29FF;":"","&#x29FE;":"+","&#x29FB;":"\\hcancel{|||}","&#x29FA;":"\\hcancel{||}","&#x29F9;":"\\backslash","&#x29F8;":"/","&#x29F7;":"hcancel{\backslash}","&#x29F6;":"","&#x29F5;":"\\backslash","&#x29F2;":"\\Phi","&#x29F1;":"","&#x29F0;":"","&#x29EE;":"","&#x29ED;":"","&#x29EC;":"","&#x29EB;":"\\lozenge","&#x29EA;":"","&#x29E9;":"","&#x29E8;":"","&#x29E7;":"\\ddagger","&#x29E2;":"\\sqcup\\sqcup","&#x29E1;":"","&#x29E0;":"\\square","&#x29DE;":"","&#x29DD;":"","&#x29DC;":"","&#x29DB;":"\\{\\{","&#x29D9;":"\\{","&#x29D8;":"\\}","&#x29D7;":"","&#x29D6;":"","&#x29D5;":"\\bowtie","&#x29D4;":"\\bowtie","&#x29D3;":"\\bowtie","&#x29D2;":"\\bowtie","&#x29D1;":"\\bowtie","&#x29D0;&#x338;":"| \\not\\triangleright","&#x29D0;":"| \\triangleright","&#x29CF;&#x338;":"\\not\\triangleleft |","&#x29CF;":"\\triangleleft |","&#x29CE;":"","&#x29CD;":"\\triangle","&#x29CC;":"","&#x29CB;":"\\underline{\\triangle}","&#x29CA;":"\\dot{\\triangle}","&#x29C9;":"","&#x29C8;":"\\boxed{\\circ}","&#x29C7;":"\\boxed{\\circ}","&#x29C6;":"\\boxed{\\rightarrow}","&#x29C5;":"\\bcancel{\\square}","&#x29C4;":"\\cancel{\\square}","&#x29C3;":"\\odot","&#x29C2;":"\\odot","&#x29BF;":"\\odot","&#x29BE;":"\\odot","&#x29BD;":"\\varnothing","&#x29BC;":"\\oplus","&#x29BB;":"\\otimes","&#x29BA;":"","&#x29B9;":"\\varnothing","&#x29B8;":"\\varnothing","&#x29B7;":"\\ominus","&#x29B6;":"\\ominus","&#x29B5;":"\\ominus","&#x29B4;":"\\vec{\\varnothing}","&#x29B3;":"\\vec{\\varnothing}","&#x29B2;":"\\dot{\\varnothing}","&#x29B1;":"\\overline{\\varnothing}","&#x29B0;":"\\varnothing","&#x29AF;":"","&#x29AE;":"","&#x29AD;":"","&#x29AC;":"","&#x29AB;":"","&#x29AA;":"","&#x29A9;":"","&#x29A8;":"","&#x29A7;":"","&#x29A6;":"","&#x29A5;":"","&#x29A4;":"","&#x29A3;":"","&#x29A2;":"","&#x29A1;":"\\not\\lor","&#x29A0;":"\\bcancel{>}","&#x2982;":":","&#x2981;":"\\circ","&#x2758;":"|","&#x25B2;":"\\bigtriangleup","&#x22FF;":"\\Epsilon","&#x22FE;":"\\overline{\\ni}","&#x22FD;":"\\overline{\\ni}","&#x22FC;":"\\in","&#x22FB;":"\\in","&#x22FA;":"\\in","&#x22F9;":"\\underline{\\in}","&#x22F8;":"\\underline{\\in}","&#x22F7;":"\\overline{\\in}","&#x22F6;":"\\overline{\\in}","&#x22F5;":"\\dot{\\in}","&#x22F4;":"\\in","&#x22F3;":"\\in","&#x22F2;":"\\in","&#x22F0;":"\\ddots","&#x22E9;":"\\underset{\\sim}{\\succ}","&#x22E8;":"\\underset{\\sim}{\\prec}","&#x22E7;":"\\underset{\\not\\sim}{>}","&#x22E6;":"\\underset{\\not\\sim}{<}","&#x22E5;":"\\not\\sqsupseteq","&#x22E4;":"\\not\\sqsubseteq","&#x22E3;":"\\not\\sqsupseteq","&#x22E2;":"\\not\\sqsubseteq","&#x22E1;":"\\nsucc","&#x22E0;":"\\nprec","&#x22DF;":"\\succ","&#x22DE;":"\\prec","&#x22DD;":"\\overline{>}","&#x22DC;":"\\overline{<}","&#x22DB;":"\\underset{>}{\\leq}","&#x22DA;":"\\underset{<}{\\geq}","&#x22D5;":"\\#","&#x22D3;":"\\cup","&#x22D2;":"\\cap","&#x22D1;":"\\supset","&#x22D0;":"\\subset","&#x22CF;":"\\wedge","&#x22CE;":"\\vee","&#x22CD;":"\\simeq","&#x22C8;":"\\bowtie","&#x22C7;":"\\ast","&#x22C6;":"\\star","&#x22C4;":"\\diamond","&#x22BF;":"\\triangle","&#x22BE;":"\\measuredangle","&#x22BD;":"\\overline{\\lor}","&#x22BC;":"\\overline{\\land}","&#x22BB;":"\\underline{\\lor}","&#x22BA;":"\\top","&#x22B9;":"","&#x22B7;":"\\circ\\multimap","&#x22B6;":"\\circ\\multimap","&#x22B3;":"\\triangleright","&#x22B2;":"\\triangleleft","&#x22B1;":"\\succ","&#x22B0;":"\\prec","&#x22AB;":"|\\models","&#x22AA;":"|\\models","&#x22A7;":"\\models","&#x22A6;":"\\vdash","&#x229D;":"\\ominus","&#x229C;":"\\ominus","&#x229B;":"\\odot","&#x229A;":"\\odot","&#x2294;":"\\sqcup","&#x2293;":"\\sqcap","&#x2292;":"\\sqsupseteq","&#x2291;":"\\sqsubseteq","&#x2290;&#x338;":"\\not\\sqsupset","&#x2290;":"\\sqsupset","&#x228F;&#x338;":"\\not\\sqsubset","&#x228F;":"\\sqsubset","&#x228E;":"\\cup","&#x228D;":"\\cup","&#x228C;":"\\cup","&#x227F;&#x338;":"\\not\\succsim","&#x227F;":"\\succsim","&#x227E;":"\\precsim","&#x2279;":"\\not\\overset{>}{<}","&#x2278;":"\\not\\overset{>}{<}","&#x2277;":"\\overset{>}{<}","&#x2276;":"\\overset{<}{>}","&#x2275;":"\\not\\geg","&#x2274;":"\\not\\leq","&#x2273;":"\\geg","&#x2272;":"\\leq","&#x226C;":"","&#x2267;":"\\geg","&#x2266;&#x338;":"\\not\\leq","&#x2266;":"\\leq","&#x2263;":"\\overset{=}{=} ","&#x225E;":"\\overset{m}{=} ","&#x225D;":"\\overset{def}{=}","&#x2258;":"=","&#x2256;":"=","&#x2255;":"=:","&#x2253;":"\\doteq","&#x2252;":"\\doteq","&#x2251;":"\\doteq","&#x2250;":"\\doteq","&#x224F;&#x338;":"","&#x224F;":"","&#x224E;&#x338;":"","&#x224E;":"","&#x224C;":"\\approx","&#x224B;":"\\approx","&#x224A;":"\\approx","&#x2242;&#x338;":"\\neq","&#x2242;":"=","&#x223F;":"\\sim","&#x223E;":"\\infty","&#x223D;&#x331;":"\\sim","&#x223D;":"\\sim","&#x223B;":"\\sim","&#x223A;":":-:","&#x2239;":"-:","&#x2238;":"\\bot","&#x2237;":"::","&#x2236;":":","&#x2223;":"|","&#x221F;":"\\llcorner","&#x2219;":"\\cdot","&#x2218;":"\\circ","&#x2217;":"*","&#x2215;":"/","&#x220E;":"\\square","&#x220D;":"\\ni","&#x220A;":"\\in","&#x2206;":"\\Delta","&#x2044;":"/","&#x2AB0;&#x338;":"\\nsucceq","&#x2AB0;":"\\succeq","&#x2AAF;&#x338;":"\\npreceq","&#x2AAF;":"\\preceq","&#x2A88;":"\\ngeqslant","&#x2A87;":"\\nleqslant","&#x29F3;":"\\Phi","&#x29E6;":"\\models","&#x29E5;":"\\not\\equiv","&#x29E4;":"\\approx\\neq","&#x29E3;":"\\neq","&#x29C1;":"\\circle","&#x29C0;":"\\circle","&#x25E6;":"\\circle","&#x25D7;":"\\circle","&#x25D6;":"\\circle","&#x25CF;":"\\circle","&#x25CE;":"\\circledcirc","&#x25CD;":"\\circledcirc","&#x25CC;":"\\circledcirc","&#x25C9;":"\\circledcirc","&#x25C8;":"\\diamond","&#x25C7;":"\\diamond","&#x25C6;":"\\diamond","&#x25C5;":"\\triangleleft","&#x25C4;":"\\triangleleft","&#x25C3;":"\\triangleleft","&#x25C2;":"\\triangleleft","&#x25C1;":"\\triangleleft","&#x25C0;":"\\triangleleft","&#x25BF;":"\\triangledown","&#x25BE;":"\\triangledown","&#x25BD;":"\\triangledown","&#x25BC;":"\\triangledown","&#x25B9;":"\\triangleright","&#x25B8;":"\\triangleright","&#x25B7;":"\\triangleright","&#x25B6;":"\\triangleright","&#x25B5;":"\\triangle","&#x25B4;":"\\triangle","&#x25B3;":"\\triangle","&#x25B1;":"\\square","&#x25B0;":"\\square","&#x25AF;":"\\square","&#x25AE;":"\\square","&#x25AD;":"\\square","&#x25AB;":"\\square","&#x25AA;":"\\square","&#x25A1;":"\\square","&#x25A0;":"\\square","&#x22ED;":"\\not\\triangleright","&#x22EC;":"\\not\\triangleleft","&#x22EB;":"\\not\\triangleright","&#x22EA;":"\\not\\triangleleft","&#x22D9;":"\\ggg","&#x22D8;":"\\lll","&#x22D7;":"*>","&#x22D6;":"<*","&#x22D4;":"\\pitchfork","&#x22CC;":"","&#x22CB;":"","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#x22B5;":"\\triangleright","&#x22B4;":"","&#x22A5;":"\\bot","&#x2281;":"\\nsucc","&#x2280;":"\\preceq","&#x227D;":"\\succeq","&#x227C;":"\\preceq","&#x227B;":"\\succ","&#x227A;":"\\prec","&#x2271;":"\\geq/","&#x2270;":"\\leq/","&#x226D;":"\\neq","&#x226B;&#x338;":"\\not\\gg","&#x226B;":"\\gg","&#x226A;&#x338;":"\\not\\ll","&#x226A;":"\\ll","&#x2269;":"\\ngeqslant","&#x2268;":"\\nleqslant","&#x2261;":"\\equiv","&#x225F;":"\\doteq","&#x225C;":"\\triangleq","&#x225B;":"\\doteq","&#x225A;":"\\triangleq","&#x2259;":"\\triangleq","&#x2257;":"\\doteq","&#x2254;":":=","&#x224D;":"\\asymp","&#x2247;":"\\ncong","&#x2246;":"\\ncong","&#x2245;":"\\cong","&#x2244;":"\\not\\simeq","&#x2243;":"\\simeq","&#x2241;":"\\not\\sim","&#x2226;":"\\not\\parallel","&#x2225;":"\\parallel","&#x2224;":"\\not|","&#x221D;":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","&#x2260;":"\\neq","&#x2262;":"\\equiv /","&#x2249;":"\\approx /","&#x223C;":"sim","&#x2248;":"\\approx","&#x226E;":"</","&lt;":"<","&#x226F;":">/",">=":">=",">":">","&#x2265;":"\\geq","&#x2264;":"\\leq","&lt;=":"<=","&#x228B;":"\\supsetneq","&#x228A;":"\\subsetneq","&#x2289;":"\\nsupseteq","&#x2288;":"\\nsubseteq","&#x2287;":"\\supseteq","&#x2286;":"\\subseteq","&#x2285;":"\\not\\supset","&#x2284;":"\\not\\subset","&#x2283;&#x20D2;":"\\supset |","&#x2283;":"\\supset","&#x2282;&#x20D2;":"\\subset |","&#x2282;":"\\subset","&#x220C;":"\\not\\in","&#x2209;":"\\notin","&#x2208;":"\\in","&#x2201;":"C","&#x2204;":"\\nexists","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x2227;":"\\land","&amp;&amp;":"\\&\\&","&#x2228;":"\\lor","&#x22AF;":"\\cancel{\\vDash}","&#x22AE;":"\\cancel{\\Vdash}","&#x22AD;":"\\nvDash","&#x22AC;":"\\nvDash","&#x22A9;":"\\Vdash","&#x22A8;":"\\vDash","&#x22A4;":"\\top","&#x22A3;":"\\dashv","&#x22A2;":"\\vdash","&#x220B;":"\\ni","&#x22F1;":"\\ddots","&#x22EF;":"\\hdots","&#x22EE;":"\\vdots","&#x2026;":"\\hdots","&#x3F6;":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","&#x2235;":"\\because","&#x2234;":"\\therefore ","&#x2063;":"",",":",",";":";","&#x29FD;":"\\}","&#x29FC;":"\\{","&#x2998;":"\\]","&#x2997;":"\\[","&#x2996;":"\\ll","&#x2995;":"\\gg","&#x2994;":"\\gg","&#x2993;":"\\ll","&#x2992;":"\\gg","&#x2991;":"\\ll","&#x2990;":"\\]","&#x298F;":"\\]","&#x298E;":"\\]","&#x298D;":"\\[","&#x298C;":"\\[","&#x298B;":"\\]","&#x298A;":"\\triangleright","&#x2989;":"\\triangleleft","&#x2988;":"|\\)","&#x2987;":"\\(|","&#x2986;":"|\\)","&#x2985;":"\\(\\(","&#x2984;":"|\\}","&#x2983;":"\\{|","&#x2980;":"\\||","&#x27EF;":"\\left. \\right]","&#x27EE;":"\\left[ \\right.","&#x27ED;":"\\left. \\right]]","&#x27EC;":"\\left[[ \\right.","&#x27EB;":"\\gg","&#x27EA;":"\\ll","&#x27E9;":"\\rangle","&#x27E8;":"\\langle","&#x27E7;":"\\left. \\right]]","&#x27E6;":"\\left[[ \\right.","&#x2773;":"\\left.\\right)","&#x2772;":"\\left(\\right.","&#x232A;":"\\rangle","&#x2329;":"\\langle","&#x230B;":"\\rfloor","&#x230A;":"\\lfloor","&#x2309;":"\\rceil","&#x2308;":"\\lceil","&#x2016;":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","&#x201D;":'"',"&#x201C;":"``","&#x2019;":"'","&#x2018;":"`","%CE%B1":"\\alpha","%CE%B2":"\\beta","%CE%B3":"\\gamma","%CE%93":"\\Gamma","%CE%B4":"\\delta","%CE%94":"\\Delta","%CF%B5":"\\epsilon","%CE%B6":"\\zeta","%CE%B7":"\\eta","%CE%B8":"\\theta","%CE%98":"\\Theta","%CE%B9":"\\iota","%CE%BA":"\\kappa","%CE%BB":"\\lambda","%CE%BC":"\\mu","%CE%BD":"\\nu","%CE%BF":"\\omicron","%CF%80":"\\pi","%CE%A0":"\\Pi","%CF%81":"\\pho","%CF%83":"\\sigma","%CE%A3":"\\Sigma","%CF%84":"\\tau","%CF%85":"\\upsilon","%CE%A5":"\\Upsilon","%CF%95":"\\phi","%CE%A6":"\\Phi","%CF%87":"\\chi","%CF%88":"\\psi","%CE%A8":"\\Psi","%CF%89":"\\omega","%CE%A9":"\\Omega"}},9039:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathOperatorsByGlyph=void 0,d.allMathOperatorsByGlyph={_:"\\underline","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\square","":"\\square","":"","":"''''","":"\\overline","":"```","":"``","":"`","":"'''","":"''","":"``","":",,","":"`","":",","^":"\\hat","":"\\sim","":"\\sim","":"\\sim","":"\\circ","":"\\cdot","":" ","":"\\_","":"","":"","":"","":"","":"\\hat",:"o","":"1","":",","":"","":"3","":"2","":"\\circ","":"\\bar",:"a","":"\\nrightarrow","":"\\cdot\\cdot","~":"\\sim","`":"`","--":"--","++":"++","&":"\\&","":"\\sqrt[4]{}","":"\\sqrt[3]{}","":"\\sqrt{}","":"d","":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","":"\\#","":"","":"","":"'","<>":"<>","**":"\\star\\star","":"\\nabla","":"\\partial","":"\\bigodot","":"\\neg","":"\\measuredangle","":"\\measuredangle","":"\\angle","":"\\div","/":"/","":"\\backslash","\\":"\\backslash","%":"\\%","":"\\bigotimes","":"\\cdot","":"\\coprod","":"\\times","":"\\cdot","":"\\boxdot","":"\\boxtimes","":"","":"-","":"\\cdot",".":".","*":"\\star","":"\\cup","":"\\cap","":"\\coprod","":"\\prod","":"","":"","":"\\mid\\mid\\mid","":"\\times","":"","":"","":"\\sqcup","":"\\sqcap","":"\\otimes","":"\\odot","":"\\cap","":"\\vee","":"\\wedge","":"\\uplus","":"\\cup","":"\\cup","":"\\underline{\\int}","":"\\overline{\\int}","":"\\int","":"\\int","":"\\int","":"\\int","":"\\oint","":"\\oint","":"\\int","":"\\int","":"\\int","":"\\int","":"\\int","":"\\bcancel{\\int}","":"","":"\\hcancel{\\int}","":"\\iiiint","":"\\oint","":"\\oint","":"\\int","":"\\oiint","":"\\oiint","":"\\oint","":"\\int","":"\\oplus","":"\\oslash","":"\\ominus","":"\\oplus","":"\\iiint","":"\\iint","":"","":"","":"\\sum","":"\\boxminus","":"\\boxplus","":"\\dot{+}","":"+-","":"-","":"\\pm","-":"-","+":"+","":"\\Rrightarrow","":"\\Lleftarrow","":":\\rightarrow","":"","":"\\bullet-\\bullet","":"\\angle","":"\\measuredangle","":"\\measuredangle","":"\\perp","":"\\measuredangle","":"","":"\\vdots","":"","":"","":"\\prec","":"\\succ","":"\\underset{\\rightarrow}{\\supset}","":"","":"\\underset{\\rightarrow}{\\subset}","":"\\underset{\\rightarrow}{>}","":"","":"\\underset{\\leftarrow}{<}","":"\\underset{\\approx}{\\rightarrow}","":"\\underset{\\sim}{\\rightarrow}","":"\\underset{\\sim}{\\leftarrow}","":"\\overset{\\sim}{\\rightarrow}","":"\\overset{=}{\\rightarrow}","":"","":"","":"","":"\\overline{\\rightharpoondown}","":"\\underline{\\rightharpoonup}","":"\\overline{\\leftharpoondown}","":"\\underline{\\leftharpoonup}","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\leftrightarrow","":"","":"\\leftrightarrow","":"\\nrightarrow","":"","":"","":"\\rightleftarrows","":"\\leftrightarrows","":"\\rightleftarrows","":"\\circlearrowright","":"\\circlearrowleft","":"\\rightarrow","":"\\leftarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":" ","":" ","":" ","":" ","":" ","":"\\times","":"\\times","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":"\\mapsto\\cdot","":"\\cdot\\leftarrow","":"\\rightarrow\\cdot","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\uparrow","":"\\downarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\nLeftrightarrow","":"\\nRightarrow","":"\\nLeftarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\leftarrow","":"\\Longleftrightarrow","":"\\Longrightarrow","":"\\Longleftarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\rightarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\Rrightarrow","":"","":"\\rightarrow","":"\\Updownarrow","":"\\searrow","":"\\nwarrow","":"\\Leftarrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightsquigarrow","":"\\leftarrow","":"\\Rrightarrow","":"\\Lleftarrow","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\Updownarrow","":"\\Leftrightarrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\nRightarrow","":"\\nLeftrightarrow","":"\\nLeftarrow","":"\\rightleftharpoons","":"\\leftrightharpoons","":"\\downdownarrows","":"\\rightrightarrows","":"\\upuparrows","":"\\leftleftarrows","":"\\leftrightarrows","":"","":"\\rightleftarrows","":"\\downharpoonleft","":"\\downharpoonright","":"\\rightharpoondown","":"\\rightharpoonup","":"\\upharpoonleft","":"\\upharpoonright","":"\\leftharpoondown","":"\\leftharpoonup","":"\\circlearrowright","":"\\circlearrowleft","":"\\leftrightarrows","":"\\overline{\\nwarrow}","":"\\curvearrowright","":"\\curvearrowleft","":"\\swarrow","":"\\searrow","":"\\Rsh","":"\\Lsh","":"\\Rsh","":"\\Lsh","":"\\swarrow","":"","":"\\leftrightsquigarrow","":"\\looparrowright","":"\\looparrowleft","":"\\hookrightarrow","":"\\hookleftarrow","":"\\underline{\\updownarrow}","":"\\downarrow","":"\\rightarrowtail","":"\\uparrow","":"\\leftarrowtail","":"\\rightarrowtail","":"\\leftarrowtail","":"\\downarrow","":"\\twoheadrightarrow","":"\\uparrow","":"\\twoheadleftarrow","":"\\nearrow","":"\\nwarrow","":"","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\mid","":"","":"//","":"///","":"","":"","":"","":"","":"\\vdots","":"","":"","":"","":"\\nparallel","":"","":"","":"","":"\\bcancel{\\mid}","":"","":"","":"","":"","":"","":"\\underline{\\perp}","":"\\overline{\\top}","":"","":"","":"","":"","":"","":"","":"\\perp","":"\\top","":"\\dashv","":"","":"","":"\\pitchfork","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\underset{\\neq}{\\supset}","":"\\underset{\\neq}{\\subset}","":"\\underset{\\approx}{\\supset}","":"\\underset{\\approx}{\\subset}","":"\\underset{\\sim}{\\supset}","":"\\underset{\\sim}{\\subset}","":"\\supseteqq","":"\\subseteqq","":"\\dot{\\supseteq}","":"\\dot{\\subseteq}","":"\\underset{\\times}{\\supset}","":"\\underset{\\times}{\\subset}","":"\\underset{+}{\\supset}","":"\\underset{+}{\\subset}","":"","":"","":"\\gg ","":"\\ll","":"\\underset{\\cancel{\\approx}}{\\succ}","":"\\underset{\\cancel{\\approx}}{\\prec}","":"\\underset{\\approx}{\\succ}","":"\\underset{\\approx}{\\prec}","":"\\underset{\\cancel{=}}{\\succ}","":"\\underset{\\cancel{=}}{\\prec}","":"\\underset{=}{\\succ}","":"\\underset{=}{\\prec}","":"","":"","":"","":"\\underline{\\hcancel{>}}","":"\\underline{\\hcancel{>}}","":"\\hcancel{>}","":"\\hcancel{<}","":"","":"","":"\\vartriangleright","":"\\vartriangleleft","":"><","":"><","":"\\underline{\\ll}","":"\\cancel{\\gg}","":"\\gg","":"\\cancel{\\ll}","":"\\ll","":"\\overset{\\sim}{\\geqq}","":"\\overset{\\sim}{\\leqq}","":"\\overset{\\sim}{>}","":"\\overset{\\sim}{<}","":"","":"","":"\\overset{=}{>}","":"\\overset{=}{<}","":"","":"","":"","":"","":"","":"","":"\\underset{=}{\\gtrless}","":"\\underset{=}{\\lessgtr}","":"\\underset{<}{\\gtrsim}","":"\\underset{>}{\\lesssim}","":"\\underset{\\simeq}{>}","":"\\underset{\\simeq}{<}","":"\\gtreqqless","":"\\lesseqqgtr","":"\\underset{\\cancel{\\approx}}{>}","":"\\underset{\\approx}{<}","":"\\underset{\\approx}{>}","":"\\underset{\\approx}{<}","":"","":"","":"","":"","":"","":"","":"\\bcancel{\\geq}","":"\\geq","":"\\bcancel{\\leq}","":"\\leq","":"","":"","":"","":"","":"\\overset{\\dots}{\\equiv}","":"","":"===","":"==","":"::=","":"","":"\\underset{=}{+}","":"\\overset{=}{+}","":"\\overset{\\approx}{=}","":"\\overset{\\wedge}{=}","":"\\overset{*}{=}","":"\\dot{\\approx}","":"","":"","":"\\dot{\\sim}","":"","":"","":"\\dot{\\equiv}","":"\\underset{\\cdot}{=}","":"","":"","":"\\underset{=}{\\vee}","":"\\overset{=}{\\vee}","":"ul(vv)","":"\\underset{=}{\\wedge}","":"\\underline{\\wedge}","":"\\overset{=}{\\wedge}","":"\\hcancel{\\vee}","":"\\hcancel{\\wedge}","":"","":"","":"","":"\\vee","":"\\wedge","":"","":"","":"","":"","":"\\dot{\\vee}","":"\\dot{\\wedge}","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"","":"","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"\\llcorner","":"\\lrcorner","":"","":"","":"","":"","":"","":"\\hat{\\otimes}","":"","":"","":"","":"\\underline{\\times}","":"\\underline{\\times}","":"\\dot{\\times}","":"\\bigodot","":"\\bigodot","":"","":"","":"","":"","":"","":"","":"\\Box","":"\\underset{\\sim}{+}","":"\\underset{\\circ}{+}","":"\\overset{\\sim}{+}","":"\\hat{+}","":"\\dot{+}","":"\\upharpoonright","":">>","":"","":"\\triangleleft","":"\\bowtie","":"","":"+","":"\\hcancel{|||}","":"\\hcancel{||}","":"\\backslash","":"/","":"hcancel{\backslash}","":"","":"\\backslash","":"\\Phi","":"","":"","":"","":"","":"","":"\\lozenge","":"","":"","":"","":"\\ddagger","":"\\sqcup\\sqcup","":"","":"\\square","":"","":"","":"","":"\\{\\{","":"\\{","":"\\}","":"","":"","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"| \\not\\triangleright","":"| \\triangleright","":"\\not\\triangleleft |","":"\\triangleleft |","":"","":"\\triangle","":"","":"\\underline{\\triangle}","":"\\dot{\\triangle}","":"","":"\\boxed{\\circ}","":"\\boxed{\\circ}","":"\\boxed{\\rightarrow}","":"\\bcancel{\\square}","":"\\cancel{\\square}","":"\\odot","":"\\odot","":"\\odot","":"\\odot","":"\\varnothing","":"\\oplus","":"\\otimes","":"","":"\\varnothing","":"\\varnothing","":"\\ominus","":"\\ominus","":"\\ominus","":"\\vec{\\varnothing}","":"\\vec{\\varnothing}","":"\\dot{\\varnothing}","":"\\overline{\\varnothing}","":"\\varnothing","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"","":"","":"","":"","":"\\ulcorner","":"\\measuredangle","":"\\not\\lor","":"\\bcancel{>}","":":","":"\\cdot","":"\\mid","":"\\bigtriangleup","":"\\Epsilon","":"\\overline{\\ni}","":"\\overline{\\ni}","":"\\in","":"\\in","":"\\in","":"\\underline{\\in}","":"\\underline{\\in}","":"\\overline{\\in}","":"\\overline{\\in}","":"\\dot{\\in}","":"\\in","":"\\in","":"\\in","":"\\ddots","":":","":"\\underset{\\sim}{\\succ}","":"\\underset{\\sim}{\\prec}","":"\\underset{\\not\\sim}{>}","":"\\underset{\\not\\sim}{<}","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\nsucc","":"\\nprec","":"\\succ","":"\\prec","":"\\overline{>}","":"\\overline{<}","":"\\underset{>}{\\leq}","":"\\underset{<}{\\geq}","":"\\#","":"\\cup","":"\\cap","":"\\supset","":"\\subset","":"\\wedge","":"\\vee","":"\\simeq","":"\\Join","":"\\ast","":"\\star","":"\\diamond","":"\\triangle","":"\\measuredangle","":"\\overline{\\lor}","":"\\overline{\\land}","":"\\underline{\\lor}","":"\\top",:"\\pm",:"+","":"","":"\\circ\\multimap","":"\\circ\\multimap","":"\\triangleright","":"\\triangleleft","":"\\succ","":"\\prec","":"|\\models","":"|\\models","":"\\models","":"\\vdash","":"\\ominus","":"\\ominus","":"\\odot","":"\\odot","":"\\sqcup","":"\\sqcap","":"\\sqsupseteq","":"\\sqsubseteq","":"\\not\\sqsupset","":"\\sqsupset","":"\\not\\sqsubset","":"\\sqsubset","":"\\cup","":"\\cup","":"\\cup","":"\\not\\succsim","":"\\succsim","":"\\precsim","":"\\not\\overset{>}{<}","":"\\not\\overset{>}{<}","":"\\overset{>}{<}","":"\\overset{<}{>}","":"\\not\\geg","":"\\not\\leq","":"\\geg","":"\\leq","":"","":"\\geg","":"\\not\\leq","":"\\leq","":"\\overset{=}{=} ","":"\\overset{m}{=} ","":"\\overset{def}{=}","":"=","":"=","":"=:","":"\\doteq","":"\\doteq","":"\\doteq","":"\\doteq","":"","":"","":"","":"","":"\\approx","":"\\approx","":"\\approx","":"\\neq","":"=","":"\\sim","":"\\infty","":"\\sim","":"\\sim","":"\\sim","":":-:","":"-:","":"\\bot","":"::","":":","":"\\mid","":"\\llcorner","":"\\circ","":"*","":"/","":"\\square","":"\\ni","":"\\in","":"\\Delta","":"/","":"\\nsucceq","":"\\succeq","":"\\npreceq","":"\\preceq","":"\\ngeqslant","":"\\nleqslant","":"\\Phi","":"\\models","":"\\not\\equiv","":"\\approx\\neq","":"\\neq","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\diamond","":"\\diamond","":"\\diamond","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangle","":"\\triangle","":"\\triangle","":"\\square","":"\\blacksquare","":"\\square","":"\\blacksquare","":"\\square","":"\\square","":"\\square","":"\\square","":"\\blacksquare","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\ggg","":"\\lll","":"*>","":"<*","":"\\pitchfork","":"","":"\\bowtie","":"\\ltimes","":"\\rtimes","":"\\triangleright","\\triangleleft":"","":"\\bot","":"\\nsucc","":"\\preceq","":"\\succeq","":"\\preceq","":"\\succ","":"\\prec","":"\\geq/","":"\\leq/","":"\\neq","":"\\not\\gg","":"\\gg","":"\\not\\ll","":"\\ll","":"\\ngeqslant","":"\\nleqslant","":"\\equiv","":"\\doteq","":"\\triangleq","":"\\doteq","":"\\triangleq","":"\\triangleq","":"\\doteq","":":=","":"\\asymp","":"\\ncong","":"\\ncong","":"\\cong","":"\\not\\simeq","":"\\simeq","":"\\not\\sim","":"\\not\\parallel","":"\\parallel","":"\\not|","":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","":"\\neq","":"\\equiv /","":"\\approx /","":"sim","":"\\approx","":"</","<":"<","":">/",">=":">=",">":">","":"\\geq","":"\\leq","<=":"<=","":"\\supsetneq","":"\\subsetneq","":"\\nsupseteq","":"\\nsubseteq","":"\\supseteq","":"\\subseteq","":"\\not\\supset","":"\\not\\subset","":"\\supset |","":"\\supset","":"\\subset |","":"\\subset","":"\\not\\in","":"\\notin","":"\\in","":"C","":"\\nexists","":"\\exists","":"\\forall","":"\\land","&&":"\\&\\&","":"\\lor","":"\\cancel{\\vDash}","":"\\cancel{\\Vdash}","":"\\nvDash","":"\\nvDash","":"\\Vdash","":"\\vDash","":"\\top","":"\\dashv","":"\\vdash","":"\\ni","":"\\ddots","":"\\hdots","":"\\vdots","":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","":"\\because","":"\\therefore ","":"\\llbracket",",":",",";":";","":"\\}","":"\\{","":"\\]","":"\\[","":"\\ll","":"\\gg","":"\\gg","":"\\ll","":"\\gg","":"\\ll","":"\\]","":"\\]","":"\\]","":"\\[","":"\\[","":"\\]","":"\\triangleright","":"\\triangleleft","":"|\\)","":"\\(|","":"|\\)","":"\\(\\(","":"|\\}","":"\\{|","":"\\||","":"\\left. \\right]","":"\\left[ \\right.","":"\\left. \\right]]","":"\\left[[ \\right.","":"\\gg","":"\\ll","":"\\)|","":"\\(|","":"\\left.\\right)","":"\\left(\\right.","":"\\rangle","":"\\langle","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil","":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","":'\\"',"":"\\text{``}","":"'","":"`",:"\\alpha",:"\\beta",:"\\gamma",:"\\Gamma",:"\\delta",:"\\Delta","":"\\epsilon",:"\\zeta",:"\\eta",:"\\theta",:"\\Theta",:"\\iota",:"\\kappa",:"\\lambda",:"\\nu",:"\\omicron",:"\\pi",:"\\Pi",:"\\rho",:"\\sigma",:"\\Sigma",:"\\tau",:"\\upsilon",:"\\Upsilon",:"\\phi",:"\\Phi",:"\\chi",:"\\psi",:"\\Psi",:"\\omega",:"\\Omega",:"\\Omega","":"\\emptyset","":"\\circlearrowleft","":"\\circlearrowright","":"\\times","":"\\dfrac{1}{2}",:"\\mu",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",:"\\varepsilon",T:"T","":"\\cdot",:"P","":"\\infty",:"\\nabla",:"\\eta","":"^{+}","":"^{-}","":"^{=}","":"^{(}","":"^{)}","":"\\)|","":"\\langle","":";","":"\\circ","":"\\perp","":"\\times","":"-","":"\\gg","":"\\uparrow","":"\\downarrow","":"\\leftarrow","":"\\rightarrow","":"-","":"\\mid","":"\\mid",:"\\hbar","":"\\rightarrow","":"\\cdot","":"\\mid","":"\\pounds","":"\\yen","":"\\times","":"\\checkmark",:"^{n}","":"\\ll",:"\\prime","":"\\dagger","":"\\mid",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\text{e}",:"r","":"\\ddagger",:"i",:"\\Upsilon","":"\\delta","":"\\cdot",:"\\theta","":"\\phi",:"\\prod",:"o",:"\\hbar","":"\\Lambda","":"\\mid","":"\\euro",:"\\bar{u}",:"\\varphi","":"c","":"\\epsilon",:"\\mathsf{X}","":"_{n}"}},8249:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathSymbolsByChar=void 0,d.allMathSymbolsByChar={"&#xA0;":"\\textrm{ }","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x21D4;":"\\iff","&#x21D2;":"=>","&#xAC;":"\\neg","&#x2124;":"\\mathbb{Z}","&#x211D;":"\\mathbb{R}","&#x211A;":"\\mathbb{Q}","&#x2115;":"\\mathbb{N}","&#x2102;":"CC","&#x25A1;":"\\square","&#x22C4;":"\\diamond","&#x25B3;":"\\triangle","&#x2322;":"\\frown","&#x2220;":"\\angle","&#x22F1;":"\\ddots","&#x22EE;":"\\vdots","&#x2235;":"\\because","&#x2234;":"\\therefore","&#x2135;":"\\aleph","&#x2205;":"\\oslash","&#xB1;":"\\pm","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x222E;":"\\oint","&#x222B;":"\\int","&#x22C3;":"\\cup","&#x222A;":"\\cup","&#x22C2;":"\\cap","&#x2229;":"\\cap","&#x22C1;":"\\vee","&#x2228;":"\\vee","&#x22C0;":"\\wedge","&#x2227;":"\\wedge","&#x220F;":"\\prod","&#x2211;":"\\sum","&#x2299;":"\\bigodot","&#x2297;":"\\bigoplus","&#x2295;":"o+","&#x2218;":"@","&#x22C8;":"\\bowtie","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#xF7;":"\\div","&#xD7;":"\\times","\\":"\\backslash","&#x22C6;":"\\star","&#x2217;":"\\star","&#x22C5;":"\\cdot","&#x3A9;":"\\Omega","&#x3C9;":"\\omega","&#x3A8;":"\\Psi","&#x3C8;":"\\psi","&#x3C7;":"\\chi","&#x3C6;":"\\varphi","&#x3A6;":"\\Phi","&#x3D5;":"\\phi","&#x3C5;":"\\upsilon","&#x3C4;":"\\tau","&#x3A3;":"\\Sigma","&#x3C3;":"\\sigma","&#x3C1;":"\\rho","&#x3A0;":"\\Pi","&#x3C0;":"\\pi","&#x39E;":"\\Xi","&#x3BE;":"\\xi","&#x3BD;":"\\nu","&#x3BC;":"\\mu","&#x39B;":"\\Lambda","&#x3BB;":"\\lambda","&#x3BA;":"\\kappa","&#x3B9;":"\\iota","&#x3D1;":"\\vartheta","&#x398;":"\\Theta","&#x3B8;":"\\theta","&#x3B7;":"\\eta","&#x3B6;":"\\zeta","&#x25B;":"\\varepsilon","&#x3B5;":"\\epsilon","&#x394;":"\\Delta","&#x3B4;":"\\delta","&#x393;":"\\Gamma","&#x3B3;":"\\gamma","&#x3B2;":"\\beta","&#x3B1;":"\\alpha","&#x221E;":"\\infty","":"\\text{\\textdir TRT}","":"\\text{\\textdir LTR}"}},8171:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathSymbolsByGlyph=void 0,d.allMathSymbolsByGlyph={" ":"\\textrm{ }","":"\\exists","":"\\forall","":"\\iff","":"\\Rightarrow","":"\\neg","":"\\square","":"\\diamond","":"\\triangle","":"\\frown","":"\\angle","":"\\ddots","":"\\vdots","":"\\because","":"\\therefore",:"\\aleph","":"\\emptyset","":"\\pm","":"\\nabla","":"\\partial","":"\\oint","":"\\int","":"\\cup","":"\\cup","":"\\cap","":"\\cap","":"\\vee","":"\\vee","":"\\wedge","":"\\wedge","":"\\prod","":"\\sum","":"\\bigodot","":"\\bigoplus","":"o+","":"@","":"\\bowtie","":"\\rtimes","":"\\ltimes","":"\\div","":"\\times","\\":"\\backslash","":"\\star","":"\\star","":"\\cdot",:"\\Omega",:"\\omega",:"\\Psi",:"\\psi",:"\\chi",:"\\varphi",:"\\Phi",:"\\phi",:"\\upsilon",:"\\tau",:"\\Sigma",:"\\sigma",:"\\rho",:"\\Pi",:"\\pi",:"\\Xi",:"\\xi",:"\\nu",:"\\mu",:"\\Lambda",:"\\lambda",:"\\kappa",:"\\iota",:"\\vartheta",:"\\Theta",:"\\theta",:"\\eta",:"\\zeta",:"\\varepsilon",:"\\epsilon",:"\\Delta",:"\\delta",:"\\Gamma",:"\\gamma",:"\\beta",:"\\alpha","":"\\infty","":"\\epsilon",:"\\mu","":"^{2}",:"\\imath","":"\\blacksquare",:"\\mathbf{m}",:"\\Omega","":"\\circlearrowleft","":"\\circlearrowright",:" ","":"\\yen","":"^{(}","":"^{)}",:"\\ss",:"\\hbar","":"\\ominus","":"\\bigtriangleup","'":"\\nrightarrow","":"\\dagger",:"\\prime",:" ","":" ",:"\\wp",:" ",:"^{n}","":"\\checkmark","":"\\times","":"\\dfrac{1}{2}",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",T:"T","":"\\cdot",:"P",:"\\nabla",:"\\eta",:"\\gamma",:"\\hbar",:"\\varepsilon","":"\\_{D}","":"\\lambda","":"\\rangle","":"\\langle","":";","":"x","":"y","":"z","":"i","":"j","":"k","":"m","":"e","":"r",:"\\eta","":"\\beta","":"\\omega","":"\\wp","":"\\pi",:"\\epsilon",:"\\epsilon","":"\\epsilon",:"\\pi",:"\\nu",:"\\theta","":"\\psi","":"\\theta",:"\\phi","":"\\Gamma",:"\\ell",:"\\upsilon","":"\\varphi","":"\\theta",:"\\Phi","":"\\varphi","":"i",:"o",:"o",:"f","":"\\rho","":"x","":"p","":"q","":"s","":"t","":"u","":"v","":"w","":"a","":"b","":"c","":"d","":"f","":"g","":"l","":"n","":"o","":"w","":"v",:"m","":"\\circ","":"\\perp","":"\\times","":"\\mid",:"\\Phi","":"\\mid",:"\\hbar",:" ","":"\\llbracket",:"\\hat{e}","":"\\cent","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","|":"\\mid","":"\\mid","":"\\heartsuit",:"0",:"Y",:"x","":"z","":"y","":"x",:"p",:"a","":"\\pounds",m:"m","":"\\Xi","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","&":"\\&","":"\\parallel","%":"\\%","":"\\text{``}",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil",:"\\varepsilon","":"\\text{e}",:"r","":"\\nrightarrow","":"\\hat{}","":"\\overline","":"\\rightarrow","":"\\ddagger","":"\\cdot","":"\\square","":"\\Delta",:"i","":"\\angle",:"\\Upsilon","":"\\downarrow","":"\\uparrow","":"\\gg","":"\\top","":"/","":"\\delta","":"\\cdot","":":","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\cdot",:"\\theta","":"\\measuredangle","":",","":"\\overline","":"\\llbracket","":"\\phi",:"\\prod",:"o","":"\\approx","":"\\leq",:"\\hbar","":"\\Lambda",:"\\pm","":"-",:"+","":"\\neq","":"\\leftarrow","":"\\mid","":"\\euro","":" ",:"\\bar{u}","":"\\parallel","":"\\leftrightarrow","":"\\sqrt{}","":"c","":"\\epsilon","":"\\cdot","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\ll",:"\\mathsf{X}","":"\\mid","":"\\rangle","":"_{n}","":"\\square","":"\\circle","":'\\"'}},5406:function(p,d,Q){var Ct=this&&this.__createBinding||(Object.create?function(en,tn,on,cn){cn===void 0&&(cn=on);var gn=Object.getOwnPropertyDescriptor(tn,on);gn&&!("get"in gn?!tn.__esModule:gn.writable||gn.configurable)||(gn={enumerable:!0,get:function(){return tn[on]}}),Object.defineProperty(en,cn,gn)}:function(en,tn,on,cn){cn===void 0&&(cn=on),en[cn]=tn[on]}),ar=this&&this.__exportStar||function(en,tn){for(var on in en)on==="default"||Object.prototype.hasOwnProperty.call(tn,on)||Ct(tn,en,on)};Object.defineProperty(d,"__esModule",{value:!0}),ar(Q(2965),d),ar(Q(9039),d),ar(Q(8249),d),ar(Q(8171),d),ar(Q(472),d),ar(Q(4320),d),ar(Q(6122),d)},472:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.latexAccents=void 0,d.latexAccents=["\\hat","\\bar","\\underbrace","\\overbrace"]},4320:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mathNumberByGlyph=void 0,d.mathNumberByGlyph={"":"_{0}","":"_{1}","":"_{2}","":"_{3}","":"_{4}","":"_{5}","":"_{6}","":"_{7}","":"_{8}","":"_{9}","":"^{0}","":"^{1}","":"^{2}","":"^{3}","":"^{4}","":"^{5}","":"^{6}","":"^{7}","":"^{8}","":"^{9}",:"^{n}","":"_{n}","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","":"\\dfrac{1}{2}","":"\\dfrac{1}{3}","":"\\dfrac{2}{3}","":"\\dfrac{1}{4}","":"\\dfrac{3}{4}","":"\\dfrac{1}{5}","":"\\dfrac{2}{5}","":"\\dfrac{3}{5}","":"\\dfrac{4}{5}","":"\\dfrac{1}{6}","":"\\dfrac{5}{6}","":"\\dfrac{1}{7}","":"\\dfrac{1}{8}","":"\\dfrac{3}{8}","":"\\dfrac{5}{8}","":"\\dfrac{7}{8}","":"\\dfrac{1}{9}","":"\\dfrac{1}{10}"}},6122:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.HashUTF8ToLtXConverter=void 0,d.HashUTF8ToLtXConverter=class{convert(en){if(en.match(/[a-z0-9]/i))return en;const tn=Q[en];return tn?this.convertAccentCharToLtX(tn)||en:this.convertSpecialCharToLtX(en)||en}convertAccentCharToLtX(en){const{char:tn,accent:on}=en,cn=Ct[on];return cn?`\\${cn}{${tn}}`:null}convertSpecialCharToLtX(en){const tn=ar[en];if(!tn)return null;const{letter:on,fontCmd:cn}=tn;return`\\${cn}{${on}}`}};const Q={:{char:"a",accent:""},:{char:"a",accent:"`"},:{char:"a",accent:"^"},:{char:"a",accent:"~"},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:"-"},:{char:"a",accent:"-"},:{char:"e",accent:""},:{char:"e",accent:"`"},:{char:"e",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"i",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:"-"},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:"^"},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:""},:{char:"i",accent:"-"},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:"^"},:{char:"o",accent:"~"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"-"},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:"^"},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:""},:{char:"u",accent:"-"},:{char:"y",accent:""},:{char:"y",accent:"`"},:{char:"y",accent:"^"},:{char:"y",accent:""},:{char:"y",accent:"-"},:{char:"A",accent:""},:{char:"A",accent:"`"},:{char:"A",accent:"^"},:{char:"A",accent:"~"},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:"-"},:{char:"A",accent:"-"},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"^"},:{char:"E",accent:""},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"-"},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:"^"},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:""},:{char:"I",accent:"-"},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:"^"},:{char:"O",accent:"~"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"-"},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:"^"},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:""},:{char:"U",accent:"-"},:{char:"Y",accent:""},:{char:"Y",accent:"`"},:{char:"Y",accent:"^"},:{char:"Y",accent:""},:{char:"Y",accent:"-"},:{char:"n",accent:"~"},:{char:"N",accent:"~"},:{char:"c",accent:""},:{char:"C",accent:""},:{char:"v",accent:"~"},:{char:"V",accent:"~"},:{char:"j",accent:"^"},:{char:"J",accent:"^"},:{char:"z",accent:""},:{char:"Z",accent:""},:{char:"Z",accent:"^"},:{char:"z",accent:"^"},:{char:"Z",accent:""},:{char:"z",accent:""},:{char:"z",accent:""}},Ct={"":"acute","`":"grave","^":"hat","~":"tilde","":"ddot","":"mathring","":"breve","":"check","":"H","":"dot","-":"bar","":"hat","":"tilde"},ar={"":{letter:"A",fontCmd:"mathbf"},"":{letter:"B",fontCmd:"mathbf"},"":{letter:"C",fontCmd:"mathbf"},"":{letter:"D",fontCmd:"mathbf"},"":{letter:"E",fontCmd:"mathbf"},:{letter:"E",fontCmd:"mathbf"},"":{letter:"F",fontCmd:"mathbf"},"":{letter:"G",fontCmd:"mathbf"},"":{letter:"H",fontCmd:"mathbf"},"":{letter:"I",fontCmd:"mathbf"},"":{letter:"J",fontCmd:"mathbf"},"":{letter:"K",fontCmd:"mathbf"},"":{letter:"L",fontCmd:"mathbf"},"":{letter:"M",fontCmd:"mathbf"},"":{letter:"N",fontCmd:"mathbf"},"":{letter:"O",fontCmd:"mathbf"},"":{letter:"P",fontCmd:"mathbf"},"":{letter:"Q",fontCmd:"mathbf"},"":{letter:"R",fontCmd:"mathbf"},"":{letter:"S",fontCmd:"mathbf"},"":{letter:"T",fontCmd:"mathbf"},"":{letter:"U",fontCmd:"mathbf"},"":{letter:"V",fontCmd:"mathbf"},"":{letter:"W",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"Y",fontCmd:"mathbf"},"":{letter:"Z",fontCmd:"mathbf"},"":{letter:"0",fontCmd:"mathbf"},"":{letter:"1",fontCmd:"mathbf"},"":{letter:"2",fontCmd:"mathbf"},"":{letter:"3",fontCmd:"mathbf"},"":{letter:"4",fontCmd:"mathbf"},"":{letter:"5",fontCmd:"mathbf"},"":{letter:"6",fontCmd:"mathbf"},"":{letter:"7",fontCmd:"mathbf"},"":{letter:"8",fontCmd:"mathbf"},"":{letter:"9",fontCmd:"mathbf"},"":{letter:"A",fontCmd:"mathit"},"":{letter:"B",fontCmd:"mathit"},"":{letter:"C",fontCmd:"mathit"},"":{letter:"D",fontCmd:"mathit"},"":{letter:"E",fontCmd:"mathit"},"":{letter:"F",fontCmd:"mathit"},"":{letter:"G",fontCmd:"mathit"},"":{letter:"H",fontCmd:"mathit"},"":{letter:"I",fontCmd:"mathit"},:{letter:"I",fontCmd:"mathit"},"":{letter:"J",fontCmd:"mathit"},"":{letter:"K",fontCmd:"mathit"},"":{letter:"L",fontCmd:"mathit"},"":{letter:"M",fontCmd:"mathit"},"":{letter:"N",fontCmd:"mathit"},"":{letter:"O",fontCmd:"mathit"},"":{letter:"P",fontCmd:"mathit"},"":{letter:"Q",fontCmd:"mathit"},"":{letter:"R",fontCmd:"mathit"},"":{letter:"S",fontCmd:"mathit"},"":{letter:"T",fontCmd:"mathit"},"":{letter:"U",fontCmd:"mathit"},"":{letter:"V",fontCmd:"mathit"},"":{letter:"W",fontCmd:"mathit"},"":{letter:"X",fontCmd:"mathit"},"":{letter:"Y",fontCmd:"mathit"},"":{letter:"Z",fontCmd:"mathit"},"":{letter:"A",fontCmd:"mathbb"},"":{letter:"B",fontCmd:"mathbb"},:{letter:"C",fontCmd:"mathbb"},"":{letter:"D",fontCmd:"mathbb"},"":{letter:"E",fontCmd:"mathbb"},"":{letter:"F",fontCmd:"mathbb"},"":{letter:"G",fontCmd:"mathbb"},:{letter:"H",fontCmd:"mathbb"},"":{letter:"I",fontCmd:"mathbb"},"":{letter:"J",fontCmd:"mathbb"},"":{letter:"K",fontCmd:"mathbb"},"":{letter:"L",fontCmd:"mathbb"},"":{letter:"M",fontCmd:"mathbb"},:{letter:"N",fontCmd:"mathbb"},"":{letter:"O",fontCmd:"mathbb"},:{letter:"P",fontCmd:"mathbb"},:{letter:"Q",fontCmd:"mathbb"},:{letter:"R",fontCmd:"mathbb"},"":{letter:"S",fontCmd:"mathbb"},"":{letter:"T",fontCmd:"mathbb"},"":{letter:"U",fontCmd:"mathbb"},"":{letter:"V",fontCmd:"mathbb"},"":{letter:"W",fontCmd:"mathbb"},"":{letter:"X",fontCmd:"mathbb"},"":{letter:"Y",fontCmd:"mathbb"},:{letter:"Z",fontCmd:"mathbb"},"":{letter:"0",fontCmd:"mathbb"},"":{letter:"1",fontCmd:"mathbb"},"":{letter:"2",fontCmd:"mathbb"},"":{letter:"3",fontCmd:"mathbb"},"":{letter:"4",fontCmd:"mathbb"},"":{letter:"5",fontCmd:"mathbb"},"":{letter:"6",fontCmd:"mathbb"},"":{letter:"7",fontCmd:"mathbb"},"":{letter:"8",fontCmd:"mathbb"},"":{letter:"9",fontCmd:"mathbb"},"":{letter:"A",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathcal"},:{letter:"B",fontCmd:"mathcal"},"":{letter:"C",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},:{letter:"E",fontCmd:"mathcal"},:{letter:"F",fontCmd:"mathcal"},"":{letter:"F",fontCmd:"mathcal"},"":{letter:"G",fontCmd:"mathcal"},:{letter:"H",fontCmd:"mathcal"},:{letter:"I",fontCmd:"mathcal"},"":{letter:"J",fontCmd:"mathcal"},"":{letter:"K",fontCmd:"mathcal"},:{letter:"L",fontCmd:"mathcal"},"":{letter:"L",fontCmd:"mathcal"},:{letter:"M",fontCmd:"mathcal"},"":{letter:"N",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"P",fontCmd:"mathcal"},"":{letter:"Q",fontCmd:"mathcal"},:{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"S",fontCmd:"mathcal"},"":{letter:"T",fontCmd:"mathcal"},"":{letter:"U",fontCmd:"mathcal"},"":{letter:"V",fontCmd:"mathcal"},"":{letter:"W",fontCmd:"mathcal"},"":{letter:"X",fontCmd:"mathcal"},"":{letter:"Y",fontCmd:"mathcal"},"":{letter:"Z",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathfrak"},"":{letter:"B",fontCmd:"mathfrak"},:{letter:"C",fontCmd:"mathfrak"},"":{letter:"D",fontCmd:"mathfrak"},"":{letter:"E",fontCmd:"mathfrak"},"":{letter:"F",fontCmd:"mathfrak"},"":{letter:"G",fontCmd:"mathfrak"},:{letter:"H",fontCmd:"mathfrak"},:{letter:"I",fontCmd:"mathfrak"},"":{letter:"J",fontCmd:"mathfrak"},"":{letter:"K",fontCmd:"mathfrak"},"":{letter:"L",fontCmd:"mathfrak"},"":{letter:"M",fontCmd:"mathfrak"},"":{letter:"N",fontCmd:"mathfrak"},"":{letter:"O",fontCmd:"mathfrak"},"":{letter:"P",fontCmd:"mathfrak"},"":{letter:"Q",fontCmd:"mathfrak"},:{letter:"R",fontCmd:"mathfrak"},"":{letter:"S",fontCmd:"mathfrak"},"":{letter:"T",fontCmd:"mathfrak"},"":{letter:"U",fontCmd:"mathfrak"},"":{letter:"V",fontCmd:"mathfrak"},"":{letter:"W",fontCmd:"mathfrak"},"":{letter:"X",fontCmd:"mathfrak"},"":{letter:"Y",fontCmd:"mathfrak"},:{letter:"Z",fontCmd:"mathfrak"},"":{letter:"A",fontCmd:"mathsf"},:{letter:"A",fontCmd:"mathsf"},"":{letter:"B",fontCmd:"mathsf"},:{letter:"B",fontCmd:"mathsf"},"":{letter:"C",fontCmd:"mathsf"},"":{letter:"D",fontCmd:"mathsf"},"":{letter:"E",fontCmd:"mathsf"},"":{letter:"F",fontCmd:"mathsf"},"":{letter:"G",fontCmd:"mathsf"},"":{letter:"H",fontCmd:"mathsf"},"":{letter:"I",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"K",fontCmd:"mathsf"},:{letter:"K",fontCmd:"mathsf"},"":{letter:"L",fontCmd:"mathsf"},"":{letter:"M",fontCmd:"mathsf"},"":{letter:"N",fontCmd:"mathsf"},"":{letter:"O",fontCmd:"mathsf"},"":{letter:"P",fontCmd:"mathsf"},"":{letter:"Q",fontCmd:"mathsf"},"":{letter:"R",fontCmd:"mathsf"},"":{letter:"S",fontCmd:"mathsf"},"":{letter:"T",fontCmd:"mathsf"},"":{letter:"U",fontCmd:"mathsf"},"":{letter:"V",fontCmd:"mathsf"},"":{letter:"W",fontCmd:"mathsf"},"":{letter:"X",fontCmd:"mathsf"},:{letter:"X",fontCmd:"mathsf"},"":{letter:"Y",fontCmd:"mathsf"},"":{letter:"Z",fontCmd:"mathsf"},"":{letter:"A",fontCmd:"mathtt"},"":{letter:"B",fontCmd:"mathtt"},"":{letter:"\\Gamma",fontCmd:"mathtt"},"":{letter:"\\Delta",fontCmd:"mathtt"},"":{letter:"E",fontCmd:"mathtt"},"":{letter:"F",fontCmd:"mathtt"},"":{letter:"G",fontCmd:"mathtt"},"":{letter:"\\Theta",fontCmd:"mathtt"},"":{letter:"I",fontCmd:"mathtt"},"":{letter:"J",fontCmd:"mathtt"},"":{letter:"\\Lambda",fontCmd:"mathtt"},"":{letter:"L",fontCmd:"mathtt"},"":{letter:"M",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"O",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"Q",fontCmd:"mathtt"},"":{letter:"R",fontCmd:"mathtt"},"":{letter:"S",fontCmd:"mathtt"},"":{letter:"T",fontCmd:"mathtt"},"":{letter:"U",fontCmd:"mathtt"},"":{letter:"\\Phi",fontCmd:"mathtt"},"":{letter:"W",fontCmd:"mathtt"},"":{letter:"\\Psi",fontCmd:"mathtt"},"":{letter:"\\Omega",fontCmd:"mathtt"}}}},l={};function u(p){var d=l[p];if(d!==void 0)return d.exports;var Q=l[p]={exports:{}};return a[p].call(Q.exports,Q,Q.exports,u),Q.exports}var c={};return(()=>{var p=c;Object.defineProperty(p,"__esModule",{value:!0}),p.MathMLToLaTeX=void 0;var d=u(8672);Object.defineProperty(p,"MathMLToLaTeX",{enumerable:!0,get:function(){return d.MathMLToLaTeX}})})(),c})())}(bundle_min$1)),bundle_min$1.exports}var bundle_minExports=requireBundle_min();function DangerousSetIn({mathMLString:t}){return jsxRuntimeExports.jsx("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:{__html:t}})}function DisplayMathML({title:t,mathML:n,textResult:a,caclDone:l}){const[u,c]=reactExports.useState(!1),[p,d]=reactExports.useState(!1);return l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Snackbar,{open:u,autoHideDuration:1e4,onClose:()=>c(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["LaTeX copied to your clipboard. Here's a free online latex editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://latexeditor.lagrida.com/",target:"_blank",children:"https://latexeditor.lagrida.com/"})]})})}),jsxRuntimeExports.jsx(Snackbar,{open:p,autoHideDuration:1e4,onClose:()=>d(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["MathML copied to your clipboard. Here's a free online MathML editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://codepen.io/bqlou/pen/yOgbmb",target:"_blank",children:"https://codepen.io/bqlou/pen/yOgbmb"})]})})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,children:[jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:10},children:[jsxRuntimeExports.jsx(Grid$1,{size:12,sx:{my:2},children:jsxRuntimeExports.jsx("h3",{children:t})}),jsxRuntimeExports.jsx(Grid$1,{size:12,style:{overflow:"auto"},sx:{fontSize:"1.6em",minHeight:"55px"},children:jsxRuntimeExports.jsx(DangerousSetIn,{mathMLString:n})})]}),jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:2},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{const Q=bundle_minExports.MathMLToLaTeX.convert(n);navigator.clipboard.writeText(Q),c(!0)},children:"Copy LaTeX"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{navigator.clipboard.writeText(n),d(!0)},children:"Copy MathML"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{var Q=encodeURIComponent(a),Ct=`https://www.wolframalpha.com/input?i2d=true&i=${Q}`;window.open(Ct,"_blank")},children:"Wolfram Alpha"})]})]})]}):null}const GitHubIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}));function getLinkUtilityClass(t){return generateUtilityClass("MuiLink",t)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),getTextDecoration=({theme:t,ownerState:n})=>{const a=n.color,l=getPath(t,`palette.${a}.main`,!1)||getPath(t,`palette.${a}`,!1)||n.color,u=getPath(t,`palette.${a}.mainChannel`)||getPath(t,`palette.${a}Channel`);return"vars"in t&&u?`rgba(${u} / 0.4)`:alpha$1(l,.4)},v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},useUtilityClasses$9=t=>{const{classes:n,component:a,focusVisible:l,underline:u}=t,c={root:["root",`underline${capitalize(u)}`,a==="button"&&"button",l&&"focusVisible"]};return composeClasses(c,getLinkUtilityClass,n)},LinkRoot=styled(Typography,{name:"MuiLink",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`underline${capitalize(a.underline)}`],a.component==="button"&&n.button]}})(memoTheme(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:n,ownerState:a})=>n==="always"&&a.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{underline:"always",color:n},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.4)`:alpha$1(t.palette[n].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:alpha$1(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette.text.secondaryChannel} / 0.4)`:alpha$1(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses.focusVisible}`]:{outline:"auto"}}}]}))),Link=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiLink"}),u=useTheme(),{className:c,color:p="primary",component:d="a",onBlur:Q,onFocus:Ct,TypographyClasses:ar,underline:en="always",variant:tn="inherit",sx:on,...cn}=l,[gn,Cn]=reactExports.useState(!1),ex=lx=>{isFocusVisible(lx.target)||Cn(!1),Q&&Q(lx)},ix=lx=>{isFocusVisible(lx.target)&&Cn(!0),Ct&&Ct(lx)},ax={...l,color:p,component:d,focusVisible:gn,underline:en,variant:tn},ox=useUtilityClasses$9(ax);return jsxRuntimeExports.jsx(LinkRoot,{color:p,className:clsx(ox.root,c),classes:ar,component:d,onBlur:ex,onFocus:ix,ref:a,ownerState:ax,variant:tn,...cn,sx:[...v6Colors[p]===void 0?[{color:p}]:[],...Array.isArray(on)?on:[on]],style:{...cn.style,...en==="always"&&p!=="inherit"&&!v6Colors[p]&&{"--Link-underlineColor":getTextDecoration({theme:u,ownerState:ax})}}})});function Footer(){return jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1,mt:0},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:2},children:jsxRuntimeExports.jsx(Toolbar,{children:jsxRuntimeExports.jsxs(Stack,{spacing:1,sx:{width:"100%"},direction:{xs:"column",sm:"row"},children:[jsxRuntimeExports.jsxs(Typography,{sx:{flexGrow:1},children:[" ",new Date().getFullYear()," Will Kelsey. This work is licensed under a Creative Commons Attribution 4.0 International License. You may not resell this tool"]}),jsxRuntimeExports.jsx(Typography,{sx:{px:2},children:"v2.0"}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(GitHubIcon,{sx:{height:"24px",width:"24px",mr:1}}),jsxRuntimeExports.jsx(Link,{href:"https://github.com/28raining/circuit-solver",target:"_blank",color:"inherit",children:"https://github.com/28raining/circuit-solver"})]})]})})})})}function getCollapseUtilityClass(t){return generateUtilityClass("MuiCollapse",t)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const useUtilityClasses$8=t=>{const{orientation:n,classes:a}=t,l={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return composeClasses(l,getCollapseUtilityClass,a)},CollapseRoot=styled("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.state==="entered"&&n.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&n.hidden]}})(memoTheme(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:n})=>n.state==="exited"&&!n.in&&n.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),CollapseWrapper=styled("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),CollapseWrapperInner=styled("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Collapse=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiCollapse"}),{addEndListener:u,children:c,className:p,collapsedSize:d="0px",component:Q,easing:Ct,in:ar,onEnter:en,onEntered:tn,onEntering:on,onExit:cn,onExited:gn,onExiting:Cn,orientation:ex="vertical",style:ix,timeout:ax=duration.standard,TransitionComponent:ox=Transition,...lx}=l,cx={...l,orientation:ex,collapsedSize:d},dx=useUtilityClasses$8(cx),hx=useTheme(),fx=useTimeout(),ux=reactExports.useRef(null),gx=reactExports.useRef(),yx=typeof d=="number"?`${d}px`:d,_x=ex==="horizontal",vx=_x?"width":"height",bx=reactExports.useRef(null),xx=useForkRef(a,bx),Sx=Lx=>Nx=>{if(Lx){const Gx=bx.current;Nx===void 0?Lx(Gx):Lx(Gx,Nx)}},Ax=()=>ux.current?ux.current[_x?"clientWidth":"clientHeight"]:0,Cx=Sx((Lx,Nx)=>{ux.current&&_x&&(ux.current.style.position="absolute"),Lx.style[vx]=yx,en&&en(Lx,Nx)}),Tx=Sx((Lx,Nx)=>{const Gx=Ax();ux.current&&_x&&(ux.current.style.position="");const{duration:Ux,easing:Hx}=getTransitionProps({style:ix,timeout:ax,easing:Ct},{mode:"enter"});if(ax==="auto"){const Vx=hx.transitions.getAutoHeightDuration(Gx);Lx.style.transitionDuration=`${Vx}ms`,gx.current=Vx}else Lx.style.transitionDuration=typeof Ux=="string"?Ux:`${Ux}ms`;Lx.style[vx]=`${Gx}px`,Lx.style.transitionTimingFunction=Hx,on&&on(Lx,Nx)}),Px=Sx((Lx,Nx)=>{Lx.style[vx]="auto",tn&&tn(Lx,Nx)}),Fx=Sx(Lx=>{Lx.style[vx]=`${Ax()}px`,cn&&cn(Lx)}),Mx=Sx(gn),Dx=Sx(Lx=>{const Nx=Ax(),{duration:Gx,easing:Ux}=getTransitionProps({style:ix,timeout:ax,easing:Ct},{mode:"exit"});if(ax==="auto"){const Hx=hx.transitions.getAutoHeightDuration(Nx);Lx.style.transitionDuration=`${Hx}ms`,gx.current=Hx}else Lx.style.transitionDuration=typeof Gx=="string"?Gx:`${Gx}ms`;Lx.style[vx]=yx,Lx.style.transitionTimingFunction=Ux,Cn&&Cn(Lx)}),Ox=Lx=>{ax==="auto"&&fx.start(gx.current||0,Lx),u&&u(bx.current,Lx)};return jsxRuntimeExports.jsx(ox,{in:ar,onEnter:Cx,onEntered:Px,onEntering:Tx,onExit:Fx,onExited:Mx,onExiting:Dx,addEndListener:Ox,nodeRef:bx,timeout:ax==="auto"?null:ax,...lx,children:(Lx,{ownerState:Nx,...Gx})=>jsxRuntimeExports.jsx(CollapseRoot,{as:Q,className:clsx(dx.root,p,{entered:dx.entered,exited:!ar&&yx==="0px"&&dx.hidden}[Lx]),style:{[_x?"minWidth":"minHeight"]:yx,...ix},ref:xx,ownerState:{...cx,state:Lx},...Gx,children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:{...cx,state:Lx},className:dx.wrapper,ref:ux,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:{...cx,state:Lx},className:dx.wrapperInner,children:c})})})})});Collapse&&(Collapse.muiSupportAuto=!0);const AccordionContext=reactExports.createContext({});function getAccordionUtilityClass(t){return generateUtilityClass("MuiAccordion",t)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),useUtilityClasses$7=t=>{const{classes:n,square:a,expanded:l,disabled:u,disableGutters:c}=t;return composeClasses({root:["root",!a&&"rounded",l&&"expanded",u&&"disabled",!c&&"gutters"],heading:["heading"],region:["region"]},getAccordionUtilityClass,n)},AccordionRoot=styled(Paper,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${accordionClasses.region}`]:n.region},n.root,!a.square&&n.rounded,!a.disableGutters&&n.gutters]}})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${accordionClasses.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${accordionClasses.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),memoTheme(({theme:t})=>({variants:[{props:n=>!n.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:n=>!n.disableGutters,style:{[`&.${accordionClasses.expanded}`]:{margin:"16px 0"}}}]}))),AccordionHeading=styled("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),Accordion=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiAccordion"}),{children:u,className:c,defaultExpanded:p=!1,disabled:d=!1,disableGutters:Q=!1,expanded:Ct,onChange:ar,square:en=!1,slots:tn={},slotProps:on={},TransitionComponent:cn,TransitionProps:gn,...Cn}=l,[ex,ix]=useControlled({controlled:Ct,default:p,name:"Accordion",state:"expanded"}),ax=reactExports.useCallback(Ax=>{ix(!ex),ar&&ar(Ax,!ex)},[ex,ar,ix]),[ox,...lx]=reactExports.Children.toArray(u),cx=reactExports.useMemo(()=>({expanded:ex,disabled:d,disableGutters:Q,toggle:ax}),[ex,d,Q,ax]),dx={...l,square:en,disabled:d,disableGutters:Q,expanded:ex},hx=useUtilityClasses$7(dx),fx={transition:cn,...tn},ux={transition:gn,...on},gx={slots:fx,slotProps:ux},[yx,_x]=useSlot("root",{elementType:AccordionRoot,externalForwardedProps:{...gx,...Cn},className:clsx(hx.root,c),shouldForwardComponentProp:!0,ownerState:dx,ref:a,additionalProps:{square:en}}),[vx,bx]=useSlot("heading",{elementType:AccordionHeading,externalForwardedProps:gx,className:hx.heading,ownerState:dx}),[xx,Sx]=useSlot("transition",{elementType:Collapse,externalForwardedProps:gx,ownerState:dx});return jsxRuntimeExports.jsxs(yx,{..._x,children:[jsxRuntimeExports.jsx(vx,{...bx,children:jsxRuntimeExports.jsx(AccordionContext.Provider,{value:cx,children:ox})}),jsxRuntimeExports.jsx(xx,{in:ex,timeout:"auto",...Sx,children:jsxRuntimeExports.jsx("div",{"aria-labelledby":ox.props.id,id:ox.props["aria-controls"],role:"region",className:hx.region,children:lx})})]})});function getAccordionSummaryUtilityClass(t){return generateUtilityClass("MuiAccordionSummary",t)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),useUtilityClasses$6=t=>{const{classes:n,expanded:a,disabled:l,disableGutters:u}=t;return composeClasses({root:["root",a&&"expanded",l&&"disabled",!u&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!u&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},getAccordionSummaryUtilityClass,n)},AccordionSummaryRoot=styled(ButtonBase,{name:"MuiAccordionSummary",slot:"Root"})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${accordionSummaryClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${accordionSummaryClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${accordionSummaryClasses.expanded}`]:{minHeight:64}}}]}})),AccordionSummaryContent=styled("span",{name:"MuiAccordionSummary",slot:"Content"})(memoTheme(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:n=>!n.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{margin:"20px 0"}}}]}))),AccordionSummaryExpandIconWrapper=styled("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(memoTheme(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{transform:"rotate(180deg)"}}))),AccordionSummary=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiAccordionSummary"}),{children:u,className:c,expandIcon:p,focusVisibleClassName:d,onClick:Q,slots:Ct,slotProps:ar,...en}=l,{disabled:tn=!1,disableGutters:on,expanded:cn,toggle:gn}=reactExports.useContext(AccordionContext),Cn=ux=>{gn&&gn(ux),Q&&Q(ux)},ex={...l,expanded:cn,disabled:tn,disableGutters:on},ix=useUtilityClasses$6(ex),ax={slots:Ct,slotProps:ar},[ox,lx]=useSlot("root",{ref:a,shouldForwardComponentProp:!0,className:clsx(ix.root,c),elementType:AccordionSummaryRoot,externalForwardedProps:{...ax,...en},ownerState:ex,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:tn,"aria-expanded":cn,focusVisibleClassName:clsx(ix.focusVisible,d)},getSlotProps:ux=>({...ux,onClick:gx=>{var yx;(yx=ux.onClick)==null||yx.call(ux,gx),Cn(gx)}})}),[cx,dx]=useSlot("content",{className:ix.content,elementType:AccordionSummaryContent,externalForwardedProps:ax,ownerState:ex}),[hx,fx]=useSlot("expandIconWrapper",{className:ix.expandIconWrapper,elementType:AccordionSummaryExpandIconWrapper,externalForwardedProps:ax,ownerState:ex});return jsxRuntimeExports.jsxs(ox,{...lx,children:[jsxRuntimeExports.jsx(cx,{...dx,children:u}),p&&jsxRuntimeExports.jsx(hx,{...fx,children:p})]})});function getAccordionDetailsUtilityClass(t){return generateUtilityClass("MuiAccordionDetails",t)}generateUtilityClasses("MuiAccordionDetails",["root"]);const useUtilityClasses$5=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,n)},AccordionDetailsRoot=styled("div",{name:"MuiAccordionDetails",slot:"Root"})(memoTheme(({theme:t})=>({padding:t.spacing(1,2,2)}))),AccordionDetails=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiAccordionDetails"}),{className:u,...c}=l,p=l,d=useUtilityClasses$5(p);return jsxRuntimeExports.jsx(AccordionDetailsRoot,{className:clsx(d.root,u),ref:a,ownerState:p,...c})}),ArrowDownwardIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),TableContext=reactExports.createContext();function getTableUtilityClass(t){return generateUtilityClass("MuiTable",t)}generateUtilityClasses("MuiTable",["root","stickyHeader"]);const useUtilityClasses$4=t=>{const{classes:n,stickyHeader:a}=t;return composeClasses({root:["root",a&&"stickyHeader"]},getTableUtilityClass,n)},TableRoot=styled("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:n})=>n.stickyHeader,style:{borderCollapse:"separate"}}]}))),defaultComponent$3="table",Table=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiTable"}),{className:u,component:c=defaultComponent$3,padding:p="normal",size:d="medium",stickyHeader:Q=!1,...Ct}=l,ar={...l,component:c,padding:p,size:d,stickyHeader:Q},en=useUtilityClasses$4(ar),tn=reactExports.useMemo(()=>({padding:p,size:d,stickyHeader:Q}),[p,d,Q]);return jsxRuntimeExports.jsx(TableContext.Provider,{value:tn,children:jsxRuntimeExports.jsx(TableRoot,{as:c,role:c===defaultComponent$3?null:"table",ref:a,className:clsx(en.root,u),ownerState:ar,...Ct})})}),Tablelvl2Context=reactExports.createContext();function getTableBodyUtilityClass(t){return generateUtilityClass("MuiTableBody",t)}generateUtilityClasses("MuiTableBody",["root"]);const useUtilityClasses$3=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableBodyUtilityClass,n)},TableBodyRoot=styled("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),tablelvl2$1={variant:"body"},defaultComponent$2="tbody",TableBody=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiTableBody"}),{className:u,component:c=defaultComponent$2,...p}=l,d={...l,component:c},Q=useUtilityClasses$3(d);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2$1,children:jsxRuntimeExports.jsx(TableBodyRoot,{className:clsx(Q.root,u),as:c,ref:a,role:c===defaultComponent$2?null:"rowgroup",ownerState:d,...p})})});function getTableCellUtilityClass(t){return generateUtilityClass("MuiTableCell",t)}const tableCellClasses=generateUtilityClasses("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),useUtilityClasses$2=t=>{const{classes:n,variant:a,align:l,padding:u,size:c,stickyHeader:p}=t,d={root:["root",a,p&&"stickyHeader",l!=="inherit"&&`align${capitalize(l)}`,u!=="normal"&&`padding${capitalize(u)}`,`size${capitalize(c)}`]};return composeClasses(d,getTableCellUtilityClass,n)},TableCellRoot=styled("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`size${capitalize(a.size)}`],a.padding!=="normal"&&n[`padding${capitalize(a.padding)}`],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?lighten(alpha$1(t.palette.divider,1),.88):darken(alpha$1(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${tableCellClasses.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:n})=>n.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),TableCell=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiTableCell"}),{align:u="inherit",className:c,component:p,padding:d,scope:Q,size:Ct,sortDirection:ar,variant:en,...tn}=l,on=reactExports.useContext(TableContext),cn=reactExports.useContext(Tablelvl2Context),gn=cn&&cn.variant==="head";let Cn;p?Cn=p:Cn=gn?"th":"td";let ex=Q;Cn==="td"?ex=void 0:!ex&&gn&&(ex="col");const ix=en||cn&&cn.variant,ax={...l,align:u,component:Cn,padding:d||(on&&on.padding?on.padding:"normal"),size:Ct||(on&&on.size?on.size:"medium"),sortDirection:ar,stickyHeader:ix==="head"&&on&&on.stickyHeader,variant:ix},ox=useUtilityClasses$2(ax);let lx=null;return ar&&(lx=ar==="asc"?"ascending":"descending"),jsxRuntimeExports.jsx(TableCellRoot,{as:Cn,ref:a,className:clsx(ox.root,c),"aria-sort":lx,scope:ex,ownerState:ax,...tn})});function getTableHeadUtilityClass(t){return generateUtilityClass("MuiTableHead",t)}generateUtilityClasses("MuiTableHead",["root"]);const useUtilityClasses$1=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableHeadUtilityClass,n)},TableHeadRoot=styled("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),tablelvl2={variant:"head"},defaultComponent$1="thead",TableHead=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiTableHead"}),{className:u,component:c=defaultComponent$1,...p}=l,d={...l,component:c},Q=useUtilityClasses$1(d);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2,children:jsxRuntimeExports.jsx(TableHeadRoot,{as:c,className:clsx(Q.root,u),ref:a,role:c===defaultComponent$1?null:"rowgroup",ownerState:d,...p})})});function getTableRowUtilityClass(t){return generateUtilityClass("MuiTableRow",t)}const tableRowClasses=generateUtilityClasses("MuiTableRow",["root","selected","hover","head","footer"]),useUtilityClasses=t=>{const{classes:n,selected:a,hover:l,head:u,footer:c}=t;return composeClasses({root:["root",a&&"selected",l&&"hover",u&&"head",c&&"footer"]},getTableRowUtilityClass,n)},TableRowRoot=styled("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.head&&n.head,a.footer&&n.footer]}})(memoTheme(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${tableRowClasses.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${tableRowClasses.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}))),defaultComponent="tr",TableRow=reactExports.forwardRef(function t(n,a){const l=useDefaultProps({props:n,name:"MuiTableRow"}),{className:u,component:c=defaultComponent,hover:p=!1,selected:d=!1,...Q}=l,Ct=reactExports.useContext(Tablelvl2Context),ar={...l,component:c,hover:p,selected:d,head:Ct&&Ct.variant==="head",footer:Ct&&Ct.variant==="footer"},en=useUtilityClasses(ar);return jsxRuntimeExports.jsx(TableRowRoot,{as:c,ref:a,className:clsx(en.root,u),role:c===defaultComponent?null:"row",ownerState:ar,...Q})});function ReleaseNotes(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Accordion,{className:"bg-lightgreen",children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ArrowDownwardIcon,{}),"aria-controls":"panel1-content",id:"panel1-header",children:jsxRuntimeExports.jsx(Typography,{component:"span",children:"Release Notes"})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsxs(Table,{size:"small",sx:{"& .MuiTableCell-root":{border:"1px solid #ccc"}},children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#f5f5f5"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Version"}),jsxRuntimeExports.jsx(TableCell,{children:"Date"}),jsxRuntimeExports.jsx(TableCell,{children:"Notes"})]})}),jsxRuntimeExports.jsx(TableBody,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"v2.0"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"July 2025"})}),jsxRuntimeExports.jsxs(TableCell,{children:[jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Site moved from will-kelsey.com/circuitSolver to onlinecircuitsolver.com"}),jsxRuntimeExports.jsxs("li",{children:["The user 'reactions' to the old site were: 27 angry, 3 laugh, 3 sad, 5 wow, 15 love and 29 superb. The angry people weren't leaving comments but I think the reasons were:",jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"It doesn't work on touch devices including ipad"}),jsxRuntimeExports.jsx("li",{children:"It could crash, like when you drag one componenct directly on top of another"}),jsxRuntimeExports.jsx("li",{children:"Limited features compared to industial tools"})]}),"Now it works on touch because I developed visiojs (https://www.npmjs.com/package/visiojs). Also visiojs replaces draw2d which was the source of all the crashing. This site isn't feature rich - it's original purpose was to create Laplace transforms. But it does run MNA in the background so many more features could be added"]}),jsxRuntimeExports.jsx("li",{children:"Moved to React + MUI + NPM. This allows: running lint, more maintainable code, smaller file size, many micro-benefits from joining the mainstream"}),jsxRuntimeExports.jsx("li",{children:"As well as a re-write, the following new features are added:"}),jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:"Adding 2 vprobes"})})]}),"There is one open item I want to do, which is add Python SymPy. Currently the algebraic solver is Algebrite + Yaffle - and they do an amazing job to inverse and simplify an algebraic matrix. However, SymPy can simplify better, and can swap out the algebra to make pretty numberic results"]})]})})]})})]})})}function b(t){if(document.querySelector(`script[src="${t}"]`))return;const n=document.createElement("script");n.src=t,n.async=!0,n.type="module",document.head.appendChild(n)}function h(t,n){for(const[a,l]of Object.entries(n))l!=null&&t.setAttribute(a,l.toString())}const E=["loaded","comment:published","comment:edited","comment:deleted","comment:voted","comment:flagged","reaction","rating","auth:login:clicked","profile:clicked"];class y{static script(n){n=n||"https://talk.hyvor.com",b(`${n}/embed/embed.js`)}static comments(n,a,l){y.script(n.instance);const u=document.createElement("hyvor-talk-comments");for(let[c,p]of Object.entries(n))if(p!=null){if(c==="translations"&&typeof p=="object"){for(let[d,Q]of Object.entries(p))d=d.replace("_","-"),u.setAttribute(`t-${d}`,Q);continue}c==="settings"&&(p=JSON.stringify(p)),u.setAttribute(c,p)}return l&&E.forEach(c=>{u.addEventListener(c,p=>{l(c,p.detail)})}),a.appendChild(u),u}}const k$1="https://talk.hyvor.com";class w{static script(n){n=n||k$1,b(`${n}/embed/comment-counts.js`)}static commentCount(n,a){w.script(n.instance);const l=document.createElement("hyvor-talk-comment-count");return h(l,n),a.appendChild(l),l}static load(n={},a=null){w.script(),customElements.whenDefined("hyvor-talk-comment-count").then(()=>{window.hyvorTalkCommentCounts.load(n,a)})}}class C{static script(n){n=n||k$1,b(`${n}/embed/newsletter.js`)}static form(n,a){C.script(n.instance);const l=document.createElement("hyvor-talk-newsletter");return h(l,n),a.appendChild(l),l}}const g=["loaded","subscription:created","subscription:success","subscription:updated"];class v{static script(n){n=n||k$1,b(`${n}/embed/memberships.js`)}static memberships(n,a,l){v.script(n.instance);const u=document.createElement("hyvor-talk-memberships");return h(u,n),l&&g.forEach(c=>{u.addEventListener(c,p=>{l(c,p.detail)})}),a=a||document.body,a.appendChild(u),u}static gatedContent(n,a){const l=document.createElement("hyvor-talk-gated-content");return h(l,n),a.appendChild(l),l}}const $=reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),l=reactExports.useRef(null),{on:u,...c}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>l.current}),[]),reactExports.useEffect(()=>(l.current=y.comments(c,a.current,(p,d)=>{var Q;const Ct=(Q=t.on)==null?void 0:Q[p];Ct&&typeof Ct=="function"&&Ct(d)}),()=>{var p;(p=l.current)==null||p.remove()}),[]),React.createElement("div",{className:"ht-comments-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),l=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>l.current}),[]),reactExports.useEffect(()=>(l.current=w.commentCount(t,a.current),()=>{var u;(u=l.current)==null||u.remove()}),[]),React.createElement("span",{className:"ht-comment-count-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),l=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>l.current}),[]),reactExports.useEffect(()=>(l.current=C.form(t,a.current),()=>{var u;(u=l.current)==null||u.remove()}),[]),React.createElement("div",{className:"ht-newsletter-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),l=reactExports.useRef(null),{on:u,...c}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>l.current}),[]),reactExports.useEffect(()=>(l.current=v.memberships(c,a.current,(p,d)=>{var Q;const Ct=(Q=t.on)==null?void 0:Q[p];Ct&&typeof Ct=="function"&&Ct(d)}),()=>{var p;(p=l.current)==null||p.remove()}),[]),React.createElement("div",{className:"ht-memberships-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),l=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>l.current}),[]),reactExports.useEffect(()=>{const u={...t};return u._key&&(u.key=u._key,delete u._key),l.current=v.gatedContent(u,a.current),()=>{var c;(c=l.current)==null||c.remove()}},[]),React.createElement("div",{className:"ht-gated-content-wrap",ref:a})});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},extendStatics(t,n)};function __extends(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(n){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},__assign.apply(this,arguments)},Browser=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),Env=function(){function t(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(t,n){var a=n.browser,l=t.match(/Firefox\/([\d.]+)/),u=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),c=t.match(/Edge?\/([\d.]+)/),p=/micromessenger/i.test(t);l&&(a.firefox=!0,a.version=l[1]),u&&(a.ie=!0,a.version=u[1]),c&&(a.edge=!0,a.version=c[1],a.newEdge=+c[1].split(".")[0]>18),p&&(a.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,n.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11),n.domSupported=typeof document<"u";var d=document.documentElement.style;n.transform3dSupported=(a.ie&&"transition"in d||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in d)&&!("OTransition"in d),n.transformSupported=n.transform3dSupported||a.ie&&+a.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(t){var n={};if(typeof JSON>"u")return n;for(var a=0;a<t.length;a++){var l=String.fromCharCode(a+32),u=(t.charCodeAt(a)-OFFSET)/SCALE;n[l]=u}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,n;return function(a,l){if(!t){var u=platformApi.createCanvas();t=u&&u.getContext("2d")}if(t)return n!==l&&(n=t.font=l||DEFAULT_FONT),t.measureText(a);a=a||"",l=l||DEFAULT_FONT;var c=/((?:\d+)?\.?\d*)px/.exec(l),p=c&&+c[1]||DEFAULT_FONT_SIZE,d=0;if(l.indexOf("mono")>=0)d=p*a.length;else for(var Q=0;Q<a.length;Q++){var Ct=DEFAULT_TEXT_WIDTH_MAP[a[Q]];d+=Ct==null?p:Ct*p}return{width:d}}}(),loadImage:function(t,n,a){var l=new Image;return l.onload=n,l.onerror=a,l.src=t,l}};function setPlatformAPI(t){for(var n in platformApi)t[n]&&(platformApi[n]=t[n])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,n){return t["[object "+n+"]"]=!0,t},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,n){return t["[object "+n+"Array]"]=!0,t},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];typeof console<"u"&&console.error.apply(console,t)}function clone$4(t){if(t==null||typeof t!="object")return t;var n=t,a=objToString.call(t);if(a==="[object Array]"){if(!isPrimitive(t)){n=[];for(var l=0,u=t.length;l<u;l++)n[l]=clone$4(t[l])}}else if(TYPED_ARRAY[a]){if(!isPrimitive(t)){var c=t.constructor;if(c.from)n=c.from(t);else{n=new c(t.length);for(var l=0,u=t.length;l<u;l++)n[l]=t[l]}}}else if(!BUILTIN_OBJECT[a]&&!isPrimitive(t)&&!isDom(t)){n={};for(var p in t)t.hasOwnProperty(p)&&p!==protoKey&&(n[p]=clone$4(t[p]))}return n}function merge(t,n,a){if(!isObject$3(n)||!isObject$3(t))return a?clone$4(n):t;for(var l in n)if(n.hasOwnProperty(l)&&l!==protoKey){var u=t[l],c=n[l];isObject$3(c)&&isObject$3(u)&&!isArray$1(c)&&!isArray$1(u)&&!isDom(c)&&!isDom(u)&&!isBuiltInObject(c)&&!isBuiltInObject(u)&&!isPrimitive(c)&&!isPrimitive(u)?merge(u,c,a):(a||!(l in t))&&(t[l]=clone$4(n[l]))}return t}function mergeAll(t,n){for(var a=t[0],l=1,u=t.length;l<u;l++)a=merge(a,t[l],n);return a}function extend(t,n){if(Object.assign)Object.assign(t,n);else for(var a in n)n.hasOwnProperty(a)&&a!==protoKey&&(t[a]=n[a]);return t}function defaults(t,n,a){for(var l=keys(n),u=0,c=l.length;u<c;u++){var p=l[u];(a?n[p]!=null:t[p]==null)&&(t[p]=n[p])}return t}var createCanvas=platformApi.createCanvas;function indexOf(t,n){if(t){if(t.indexOf)return t.indexOf(n);for(var a=0,l=t.length;a<l;a++)if(t[a]===n)return a}return-1}function inherits(t,n){var a=t.prototype;function l(){}l.prototype=n.prototype,t.prototype=new l;for(var u in a)a.hasOwnProperty(u)&&(t.prototype[u]=a[u]);t.prototype.constructor=t,t.superClass=n}function mixin(t,n,a){if(t="prototype"in t?t.prototype:t,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var l=Object.getOwnPropertyNames(n),u=0;u<l.length;u++){var c=l[u];c!=="constructor"&&(a?n[c]!=null:t[c]==null)&&(t[c]=n[c])}else defaults(t,n,a)}function isArrayLike(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function each$f(t,n,a){if(t&&n)if(t.forEach&&t.forEach===nativeForEach)t.forEach(n,a);else if(t.length===+t.length)for(var l=0,u=t.length;l<u;l++)n.call(a,t[l],l,t);else for(var c in t)t.hasOwnProperty(c)&&n.call(a,t[c],c,t)}function map$1(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.map&&t.map===nativeMap)return t.map(n,a);for(var l=[],u=0,c=t.length;u<c;u++)l.push(n.call(a,t[u],u,t));return l}function reduce(t,n,a,l){if(t&&n){for(var u=0,c=t.length;u<c;u++)a=n.call(l,a,t[u],u,t);return a}}function filter(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.filter&&t.filter===nativeFilter)return t.filter(n,a);for(var l=[],u=0,c=t.length;u<c;u++)n.call(a,t[u],u,t)&&l.push(t[u]);return l}function find(t,n,a){if(t&&n){for(var l=0,u=t.length;l<u;l++)if(n.call(a,t[l],l,t))return t[l]}}function keys(t){if(!t)return[];if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n}function bindPolyfill(t,n){for(var a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];return function(){return t.apply(n,a.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$1(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return t.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(t){return Array.isArray?Array.isArray(t):objToString.call(t)==="[object Array]"}function isFunction$1(t){return typeof t=="function"}function isString$1(t){return typeof t=="string"}function isStringSafe(t){return objToString.call(t)==="[object String]"}function isNumber(t){return typeof t=="number"}function isObject$3(t){var n=typeof t;return n==="function"||!!t&&n==="object"}function isBuiltInObject(t){return!!BUILTIN_OBJECT[objToString.call(t)]}function isTypedArray(t){return!!TYPED_ARRAY[objToString.call(t)]}function isDom(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function isGradientObject(t){return t.colorStops!=null}function isImagePatternObject(t){return t.image!=null}function isRegExp(t){return objToString.call(t)==="[object RegExp]"}function eqNaN(t){return t!==t}function retrieve(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,l=t.length;a<l;a++)if(t[a]!=null)return t[a]}function retrieve2(t,n){return t??n}function retrieve3(t,n,a){return t??n??a}function slice(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return nativeSlice.apply(t,n)}function normalizeCssArray$1(t){if(typeof t=="number")return[t,t,t,t];var n=t.length;return n===2?[t[0],t[1],t[0],t[1]]:n===3?[t[0],t[1],t[2],t[1]]:t}function assert(t,n){if(!t)throw new Error(n)}function trim$1(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(t){t[primitiveKey]=!0}function isPrimitive(t){return t[primitiveKey]}var MapPolyfill=function(){function t(){this.data={}}return t.prototype.delete=function(n){var a=this.has(n);return a&&delete this.data[n],a},t.prototype.has=function(n){return this.data.hasOwnProperty(n)},t.prototype.get=function(n){return this.data[n]},t.prototype.set=function(n,a){return this.data[n]=a,this},t.prototype.keys=function(){return keys(this.data)},t.prototype.forEach=function(n){var a=this.data;for(var l in a)a.hasOwnProperty(l)&&n(a[l],l)},t}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function t(n){var a=isArray$1(n);this.data=maybeNativeMap();var l=this;n instanceof t?n.each(u):n&&each$f(n,u);function u(c,p){a?l.set(c,p):l.set(p,c)}}return t.prototype.hasKey=function(n){return this.data.has(n)},t.prototype.get=function(n){return this.data.get(n)},t.prototype.set=function(n,a){return this.data.set(n,a),a},t.prototype.each=function(n,a){this.data.forEach(function(l,u){n.call(a,l,u)})},t.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},t.prototype.removeKey=function(n){this.data.delete(n)},t}();function createHashMap(t){return new HashMap(t)}function concatArray(t,n){for(var a=new t.constructor(t.length+n.length),l=0;l<t.length;l++)a[l]=t[l];for(var u=t.length,l=0;l<n.length;l++)a[l+u]=n[l];return a}function createObject(t,n){var a;if(Object.create)a=Object.create(t);else{var l=function(){};l.prototype=t,a=new l}return n&&extend(a,n),a}function disableUserSelect(t){var n=t.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(t,n){return t.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$1,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString:isString$1,isStringSafe,isTypedArray,keys,logError,map:map$1,merge,mergeAll,mixin,noop,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));function create$2(t,n){return t==null&&(t=0),n==null&&(n=0),[t,n]}function copy$1(t,n){return t[0]=n[0],t[1]=n[1],t}function clone$3(t){return[t[0],t[1]]}function set$1(t,n,a){return t[0]=n,t[1]=a,t}function add(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function scaleAndAdd$1(t,n,a,l){return t[0]=n[0]+a[0]*l,t[1]=n[1]+a[1]*l,t}function sub(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function len(t){return Math.sqrt(lenSquare(t))}var length=len;function lenSquare(t){return t[0]*t[0]+t[1]*t[1]}var lengthSquare=lenSquare;function mul$1(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function div(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function dot(t,n){return t[0]*n[0]+t[1]*n[1]}function scale$2(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function normalize$3(t,n){var a=len(n);return a===0?(t[0]=0,t[1]=0):(t[0]=n[0]/a,t[1]=n[1]/a),t}function distance(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}var dist$1=distance;function distanceSquare(t,n){return(t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1])}var distSquare=distanceSquare;function negate(t,n){return t[0]=-n[0],t[1]=-n[1],t}function lerp$1(t,n,a,l){return t[0]=n[0]+l*(a[0]-n[0]),t[1]=n[1]+l*(a[1]-n[1]),t}function applyTransform$1(t,n,a){var l=n[0],u=n[1];return t[0]=a[0]*l+a[2]*u+a[4],t[1]=a[1]*l+a[3]*u+a[5],t}function min$1(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function max$1(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){function t(n,a){this.target=n,this.topTarget=a&&a.topTarget}return t}(),Draggable=function(){function t(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(n){for(var a=n.target;a&&!a.draggable;)a=a.parent||a.__hostTarget;a&&(this._draggingTarget=a,a.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(a,n),"dragstart",n.event))},t.prototype._drag=function(n){var a=this._draggingTarget;if(a){var l=n.offsetX,u=n.offsetY,c=l-this._x,p=u-this._y;this._x=l,this._y=u,a.drift(c,p,n),this.handler.dispatchToElement(new Param(a,n),"drag",n.event);var d=this.handler.findHover(l,u,a).target,Q=this._dropTarget;this._dropTarget=d,a!==d&&(Q&&d!==Q&&this.handler.dispatchToElement(new Param(Q,n),"dragleave",n.event),d&&d!==Q&&this.handler.dispatchToElement(new Param(d,n),"dragenter",n.event))}},t.prototype._dragEnd=function(n){var a=this._draggingTarget;a&&(a.dragging=!1),this.handler.dispatchToElement(new Param(a,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},t}(),Eventful=function(){function t(n){n&&(this._$eventProcessor=n)}return t.prototype.on=function(n,a,l,u){this._$handlers||(this._$handlers={});var c=this._$handlers;if(typeof a=="function"&&(u=l,l=a,a=null),!l||!n)return this;var p=this._$eventProcessor;a!=null&&p&&p.normalizeQuery&&(a=p.normalizeQuery(a)),c[n]||(c[n]=[]);for(var d=0;d<c[n].length;d++)if(c[n][d].h===l)return this;var Q={h:l,query:a,ctx:u||this,callAtLast:l.zrEventfulCallAtLast},Ct=c[n].length-1,ar=c[n][Ct];return ar&&ar.callAtLast?c[n].splice(Ct,0,Q):c[n].push(Q),this},t.prototype.isSilent=function(n){var a=this._$handlers;return!a||!a[n]||!a[n].length},t.prototype.off=function(n,a){var l=this._$handlers;if(!l)return this;if(!n)return this._$handlers={},this;if(a){if(l[n]){for(var u=[],c=0,p=l[n].length;c<p;c++)l[n][c].h!==a&&u.push(l[n][c]);l[n]=u}l[n]&&l[n].length===0&&delete l[n]}else delete l[n];return this},t.prototype.trigger=function(n){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(!this._$handlers)return this;var u=this._$handlers[n],c=this._$eventProcessor;if(u)for(var p=a.length,d=u.length,Q=0;Q<d;Q++){var Ct=u[Q];if(!(c&&c.filter&&Ct.query!=null&&!c.filter(n,Ct.query)))switch(p){case 0:Ct.h.call(Ct.ctx);break;case 1:Ct.h.call(Ct.ctx,a[0]);break;case 2:Ct.h.call(Ct.ctx,a[0],a[1]);break;default:Ct.h.apply(Ct.ctx,a);break}}return c&&c.afterTrigger&&c.afterTrigger(n),this},t.prototype.triggerWithContext=function(n){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(!this._$handlers)return this;var u=this._$handlers[n],c=this._$eventProcessor;if(u)for(var p=a.length,d=a[p-1],Q=u.length,Ct=0;Ct<Q;Ct++){var ar=u[Ct];if(!(c&&c.filter&&ar.query!=null&&!c.filter(n,ar.query)))switch(p){case 0:ar.h.call(d);break;case 1:ar.h.call(d,a[0]);break;case 2:ar.h.call(d,a[0],a[1]);break;default:ar.h.apply(d,a.slice(1,p-1));break}}return c&&c.afterTrigger&&c.afterTrigger(n),this},t}(),LN2=Math.log(2);function determinant(t,n,a,l,u,c){var p=l+"-"+u,d=t.length;if(c.hasOwnProperty(p))return c[p];if(n===1){var Q=Math.round(Math.log((1<<d)-1&~u)/LN2);return t[a][Q]}for(var Ct=l|1<<a,ar=a+1;l&1<<ar;)ar++;for(var en=0,tn=0,on=0;tn<d;tn++){var cn=1<<tn;cn&u||(en+=(on%2?-1:1)*t[a][tn]*determinant(t,n-1,ar,Ct,u|cn,c),on++)}return c[p]=en,en}function buildTransformer(t,n){var a=[[t[0],t[1],1,0,0,0,-n[0]*t[0],-n[0]*t[1]],[0,0,0,t[0],t[1],1,-n[1]*t[0],-n[1]*t[1]],[t[2],t[3],1,0,0,0,-n[2]*t[2],-n[2]*t[3]],[0,0,0,t[2],t[3],1,-n[3]*t[2],-n[3]*t[3]],[t[4],t[5],1,0,0,0,-n[4]*t[4],-n[4]*t[5]],[0,0,0,t[4],t[5],1,-n[5]*t[4],-n[5]*t[5]],[t[6],t[7],1,0,0,0,-n[6]*t[6],-n[6]*t[7]],[0,0,0,t[6],t[7],1,-n[7]*t[6],-n[7]*t[7]]],l={},u=determinant(a,8,0,0,0,l);if(u!==0){for(var c=[],p=0;p<8;p++)for(var d=0;d<8;d++)c[d]==null&&(c[d]=0),c[d]+=((p+d)%2?-1:1)*determinant(a,7,p===0?1:0,1<<p,1<<d,l)/u*n[p];return function(Q,Ct,ar){var en=Ct*c[6]+ar*c[7]+1;Q[0]=(Ct*c[0]+ar*c[1]+c[2])/en,Q[1]=(Ct*c[3]+ar*c[4]+c[5])/en}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(t,n,a,l,u){return transformCoordWithViewport(_calcOut$1,n,l,u,!0)&&transformCoordWithViewport(t,a,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(t,n,a,l,u){if(n.getBoundingClientRect&&env.domSupported&&!isCanvasEl(n)){var c=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),p=prepareCoordMarkers(n,c),d=preparePointerTransformer(p,c,u);if(d)return d(t,a,l),!0}return!1}function prepareCoordMarkers(t,n){var a=n.markers;if(a)return a;a=n.markers=[];for(var l=["left","right"],u=["top","bottom"],c=0;c<4;c++){var p=document.createElement("div"),d=p.style,Q=c%2,Ct=(c>>1)%2;d.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",l[Q]+":0",u[Ct]+":0",l[1-Q]+":auto",u[1-Ct]+":auto",""].join("!important;"),t.appendChild(p),a.push(p)}return a}function preparePointerTransformer(t,n,a){for(var l=a?"invTrans":"trans",u=n[l],c=n.srcCoords,p=[],d=[],Q=!0,Ct=0;Ct<4;Ct++){var ar=t[Ct].getBoundingClientRect(),en=2*Ct,tn=ar.left,on=ar.top;p.push(tn,on),Q=Q&&c&&tn===c[en]&&on===c[en+1],d.push(t[Ct].offsetLeft,t[Ct].offsetTop)}return Q&&u?u:(n.srcCoords=p,n[l]=a?buildTransformer(d,p):buildTransformer(p,d))}function isCanvasEl(t){return t.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(t){return t==null?"":(t+"").replace(replaceReg,function(n,a){return replaceMap[a]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(t,n,a,l){return a=a||{},l?calculateZrXY(t,n,a):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(a.zrX=n.layerX,a.zrY=n.layerY):n.offsetX!=null?(a.zrX=n.offsetX,a.zrY=n.offsetY):calculateZrXY(t,n,a),a}function calculateZrXY(t,n,a){if(env.domSupported&&t.getBoundingClientRect){var l=n.clientX,u=n.clientY;if(isCanvasEl(t)){var c=t.getBoundingClientRect();a.zrX=l-c.left,a.zrY=u-c.top;return}else if(transformCoordWithViewport(_calcOut,t,l,u)){a.zrX=_calcOut[0],a.zrY=_calcOut[1];return}}a.zrX=a.zrY=0}function getNativeEvent(t){return t||window.event}function normalizeEvent(t,n,a){if(n=getNativeEvent(n),n.zrX!=null)return n;var l=n.type,u=l&&l.indexOf("touch")>=0;if(u){var p=l!=="touchend"?n.targetTouches[0]:n.changedTouches[0];p&&clientToLocal(t,p,n,a)}else{clientToLocal(t,n,n,a);var c=getWheelDeltaMayPolyfill(n);n.zrDelta=c?c/120:-(n.detail||0)/3}var d=n.button;return n.which==null&&d!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=d&1?1:d&2?3:d&4?2:0),n}function getWheelDeltaMayPolyfill(t){var n=t.wheelDelta;if(n)return n;var a=t.deltaX,l=t.deltaY;if(a==null||l==null)return n;var u=Math.abs(l!==0?l:a),c=l>0?-1:l<0?1:a>0?-1:1;return 3*u*c}function addEventListener(t,n,a,l){t.addEventListener(n,a,l)}function removeEventListener(t,n,a,l){t.removeEventListener(n,a,l)}var stop=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(t){return t.which===2||t.which===3}var GestureMgr=function(){function t(){this._track=[]}return t.prototype.recognize=function(n,a,l){return this._doTrack(n,a,l),this._recognize(n)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(n,a,l){var u=n.touches;if(u){for(var c={points:[],touches:[],target:a,event:n},p=0,d=u.length;p<d;p++){var Q=u[p],Ct=clientToLocal(l,Q,{});c.points.push([Ct.zrX,Ct.zrY]),c.touches.push(Q)}this._track.push(c)}},t.prototype._recognize=function(n){for(var a in recognizers)if(recognizers.hasOwnProperty(a)){var l=recognizers[a](this._track,n);if(l)return l}},t}();function dist(t){var n=t[1][0]-t[0][0],a=t[1][1]-t[0][1];return Math.sqrt(n*n+a*a)}function center$1(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var recognizers={pinch:function(t,n){var a=t.length;if(a){var l=(t[a-1]||{}).points,u=(t[a-2]||{}).points||l;if(u&&u.length>1&&l&&l.length>1){var c=dist(l)/dist(u);!isFinite(c)&&(c=1),n.pinchScale=c;var p=center$1(l);return n.pinchX=p[0],n.pinchY=p[1],{type:"pinch",target:t[0].target,event:n}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function copy(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function mul(t,n,a){var l=n[0]*a[0]+n[2]*a[1],u=n[1]*a[0]+n[3]*a[1],c=n[0]*a[2]+n[2]*a[3],p=n[1]*a[2]+n[3]*a[3],d=n[0]*a[4]+n[2]*a[5]+n[4],Q=n[1]*a[4]+n[3]*a[5]+n[5];return t[0]=l,t[1]=u,t[2]=c,t[3]=p,t[4]=d,t[5]=Q,t}function translate(t,n,a){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4]+a[0],t[5]=n[5]+a[1],t}function rotate(t,n,a,l){l===void 0&&(l=[0,0]);var u=n[0],c=n[2],p=n[4],d=n[1],Q=n[3],Ct=n[5],ar=Math.sin(a),en=Math.cos(a);return t[0]=u*en+d*ar,t[1]=-u*ar+d*en,t[2]=c*en+Q*ar,t[3]=-c*ar+en*Q,t[4]=en*(p-l[0])+ar*(Ct-l[1])+l[0],t[5]=en*(Ct-l[1])-ar*(p-l[0])+l[1],t}function scale$1(t,n,a){var l=a[0],u=a[1];return t[0]=n[0]*l,t[1]=n[1]*u,t[2]=n[2]*l,t[3]=n[3]*u,t[4]=n[4]*l,t[5]=n[5]*u,t}function invert(t,n){var a=n[0],l=n[2],u=n[4],c=n[1],p=n[3],d=n[5],Q=a*p-c*l;return Q?(Q=1/Q,t[0]=p*Q,t[1]=-c*Q,t[2]=-l*Q,t[3]=a*Q,t[4]=(l*d-p*u)*Q,t[5]=(c*u-a*d)*Q,t):null}function clone$2(t){var n=create$1();return copy(n,t),n}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function t(n,a){this.x=n||0,this.y=a||0}return t.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(n,a){return this.x=n,this.y=a,this},t.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},t.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},t.prototype.scale=function(n){this.x*=n,this.y*=n},t.prototype.scaleAndAdd=function(n,a){this.x+=n.x*a,this.y+=n.y*a},t.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},t.prototype.dot=function(n){return this.x*n.x+this.y*n.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},t.prototype.distance=function(n){var a=this.x-n.x,l=this.y-n.y;return Math.sqrt(a*a+l*l)},t.prototype.distanceSquare=function(n){var a=this.x-n.x,l=this.y-n.y;return a*a+l*l},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(n){if(n){var a=this.x,l=this.y;return this.x=n[0]*a+n[2]*l+n[4],this.y=n[1]*a+n[3]*l+n[5],this}},t.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},t.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},t.set=function(n,a,l){n.x=a,n.y=l},t.copy=function(n,a){n.x=a.x,n.y=a.y},t.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},t.lenSquare=function(n){return n.x*n.x+n.y*n.y},t.dot=function(n,a){return n.x*a.x+n.y*a.y},t.add=function(n,a,l){n.x=a.x+l.x,n.y=a.y+l.y},t.sub=function(n,a,l){n.x=a.x-l.x,n.y=a.y-l.y},t.scale=function(n,a,l){n.x=a.x*l,n.y=a.y*l},t.scaleAndAdd=function(n,a,l,u){n.x=a.x+l.x*u,n.y=a.y+l.y*u},t.lerp=function(n,a,l,u){var c=1-u;n.x=c*a.x+u*l.x,n.y=c*a.y+u*l.y},t}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function t(n,a,l,u){l<0&&(n=n+l,l=-l),u<0&&(a=a+u,u=-u),this.x=n,this.y=a,this.width=l,this.height=u}return t.prototype.union=function(n){var a=mathMin$a(n.x,this.x),l=mathMin$a(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(n.x+n.width,this.x+this.width)-a:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(n.y+n.height,this.y+this.height)-l:this.height=n.height,this.x=a,this.y=l},t.prototype.applyTransform=function(n){t.applyTransform(this,this,n)},t.prototype.calculateTransform=function(n){var a=this,l=n.width/a.width,u=n.height/a.height,c=create$1();return translate(c,c,[-a.x,-a.y]),scale$1(c,c,[l,u]),translate(c,c,[n.x,n.y]),c},t.prototype.intersect=function(n,a){if(!n)return!1;n instanceof t||(n=t.create(n));var l=this,u=l.x,c=l.x+l.width,p=l.y,d=l.y+l.height,Q=n.x,Ct=n.x+n.width,ar=n.y,en=n.y+n.height,tn=!(c<Q||Ct<u||d<ar||en<p);if(a){var on=1/0,cn=0,gn=Math.abs(c-Q),Cn=Math.abs(Ct-u),ex=Math.abs(d-ar),ix=Math.abs(en-p),ax=Math.min(gn,Cn),ox=Math.min(ex,ix);c<Q||Ct<u?ax>cn&&(cn=ax,gn<Cn?Point.set(maxTv$1,-gn,0):Point.set(maxTv$1,Cn,0)):ax<on&&(on=ax,gn<Cn?Point.set(minTv$1,gn,0):Point.set(minTv$1,-Cn,0)),d<ar||en<p?ox>cn&&(cn=ox,ex<ix?Point.set(maxTv$1,0,-ex):Point.set(maxTv$1,0,ix)):ax<on&&(on=ax,ex<ix?Point.set(minTv$1,0,ex):Point.set(minTv$1,0,-ix))}return a&&Point.copy(a,tn?minTv$1:maxTv$1),tn},t.prototype.contain=function(n,a){var l=this;return n>=l.x&&n<=l.x+l.width&&a>=l.y&&a<=l.y+l.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(n){t.copy(this,n)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(n){return new t(n.x,n.y,n.width,n.height)},t.copy=function(n,a){n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height},t.applyTransform=function(n,a,l){if(!l){n!==a&&t.copy(n,a);return}if(l[1]<1e-5&&l[1]>-1e-5&&l[2]<1e-5&&l[2]>-1e-5){var u=l[0],c=l[3],p=l[4],d=l[5];n.x=a.x*u+p,n.y=a.y*c+d,n.width=a.width*u,n.height=a.height*c,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=a.x,lt.y=rt.y=a.y,rb.x=rt.x=a.x+a.width,rb.y=lb.y=a.y+a.height,lt.transform(l),rt.transform(l),rb.transform(l),lb.transform(l),n.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var Q=mathMax$a(lt.x,rb.x,lb.x,rt.x),Ct=mathMax$a(lt.y,rb.y,lb.y,rt.y);n.width=Q-n.x,n.height=Ct-n.y},t}(),SILENT="silent";function makeEventPacket(t,n,a){return{type:t,event:a,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.handler=null,a}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n}(Eventful),HoveredResult=function(){function t(n,a){this.x=n,this.y=a}return t}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(t){__extends(n,t);function n(a,l,u,c,p){var d=t.call(this)||this;return d._hovered=new HoveredResult(0,0),d.storage=a,d.painter=l,d.painterRoot=c,d._pointerSize=p,u=u||new EmptyProxy,d.proxy=null,d.setHandlerProxy(u),d._draggingMgr=new Draggable(d),d}return n.prototype.setHandlerProxy=function(a){this.proxy&&this.proxy.dispose(),a&&(each$f(handlerNames,function(l){a.on&&a.on(l,this[l],this)},this),a.handler=this),this.proxy=a},n.prototype.mousemove=function(a){var l=a.zrX,u=a.zrY,c=isOutsideBoundary(this,l,u),p=this._hovered,d=p.target;d&&!d.__zr&&(p=this.findHover(p.x,p.y),d=p.target);var Q=this._hovered=c?new HoveredResult(l,u):this.findHover(l,u),Ct=Q.target,ar=this.proxy;ar.setCursor&&ar.setCursor(Ct?Ct.cursor:"default"),d&&Ct!==d&&this.dispatchToElement(p,"mouseout",a),this.dispatchToElement(Q,"mousemove",a),Ct&&Ct!==d&&this.dispatchToElement(Q,"mouseover",a)},n.prototype.mouseout=function(a){var l=a.zrEventControl;l!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",a),l!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:a})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(a,l){var u=this[a];u&&u.call(this,l)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(a){var l=this.proxy;l.setCursor&&l.setCursor(a)},n.prototype.dispatchToElement=function(a,l,u){a=a||{};var c=a.target;if(!(c&&c.silent)){for(var p="on"+l,d=makeEventPacket(l,a,u);c&&(c[p]&&(d.cancelBubble=!!c[p].call(c,d)),c.trigger(l,d),c=c.__hostTarget?c.__hostTarget:c.parent,!d.cancelBubble););d.cancelBubble||(this.trigger(l,d),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(Q){typeof Q[p]=="function"&&Q[p].call(Q,d),Q.trigger&&Q.trigger(l,d)}))}},n.prototype.findHover=function(a,l,u){var c=this.storage.getDisplayList(),p=new HoveredResult(a,l);if(setHoverTarget(c,p,a,l,u),this._pointerSize&&!p.target){for(var d=[],Q=this._pointerSize,Ct=Q/2,ar=new BoundingRect(a-Ct,l-Ct,Q,Q),en=c.length-1;en>=0;en--){var tn=c[en];tn!==u&&!tn.ignore&&!tn.ignoreCoarsePointer&&(!tn.parent||!tn.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(tn.getBoundingRect()),tn.transform&&tmpRect$1.applyTransform(tn.transform),tmpRect$1.intersect(ar)&&d.push(tn))}if(d.length)for(var on=4,cn=Math.PI/12,gn=Math.PI*2,Cn=0;Cn<Ct;Cn+=on)for(var ex=0;ex<gn;ex+=cn){var ix=a+Cn*Math.cos(ex),ax=l+Cn*Math.sin(ex);if(setHoverTarget(d,p,ix,ax,u),p.target)return p}}return p},n.prototype.processGesture=function(a,l){this._gestureMgr||(this._gestureMgr=new GestureMgr);var u=this._gestureMgr;l==="start"&&u.clear();var c=u.recognize(a,this.findHover(a.zrX,a.zrY,null).target,this.proxy.dom);if(l==="end"&&u.clear(),c){var p=c.type;a.gestureEvent=p;var d=new HoveredResult;d.target=c.target,this.dispatchToElement(d,p,c.event)}},n}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Handler.prototype[t]=function(n){var a=n.zrX,l=n.zrY,u=isOutsideBoundary(this,a,l),c,p;if((t!=="mouseup"||!u)&&(c=this.findHover(a,l),p=c.target),t==="mousedown")this._downEl=p,this._downPoint=[n.zrX,n.zrY],this._upEl=p;else if(t==="mouseup")this._upEl=p;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(c,t,n)}});function isHover(t,n,a){if(t[t.rectHover?"rectContain":"contain"](n,a)){for(var l=t,u=void 0,c=!1;l;){if(l.ignoreClip&&(c=!0),!c){var p=l.getClipPath();if(p&&!p.contain(n,a))return!1}l.silent&&(u=!0);var d=l.__hostTarget;l=d||l.parent}return u?SILENT:!0}return!1}function setHoverTarget(t,n,a,l,u){for(var c=t.length-1;c>=0;c--){var p=t[c],d=void 0;if(p!==u&&!p.ignore&&(d=isHover(p,a,l))&&(!n.topTarget&&(n.topTarget=p),d!==SILENT)){n.target=p;break}}}function isOutsideBoundary(t,n,a){var l=t.painter;return n<0||n>l.getWidth()||a<0||a>l.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(t){for(var n=0;t>=DEFAULT_MIN_MERGE;)n|=t&1,t>>=1;return t+n}function makeAscendingRun(t,n,a,l){var u=n+1;if(u===a)return 1;if(l(t[u++],t[n])<0){for(;u<a&&l(t[u],t[u-1])<0;)u++;reverseRun(t,n,u)}else for(;u<a&&l(t[u],t[u-1])>=0;)u++;return u-n}function reverseRun(t,n,a){for(a--;n<a;){var l=t[n];t[n++]=t[a],t[a--]=l}}function binaryInsertionSort(t,n,a,l,u){for(l===n&&l++;l<a;l++){for(var c=t[l],p=n,d=l,Q;p<d;)Q=p+d>>>1,u(c,t[Q])<0?d=Q:p=Q+1;var Ct=l-p;switch(Ct){case 3:t[p+3]=t[p+2];case 2:t[p+2]=t[p+1];case 1:t[p+1]=t[p];break;default:for(;Ct>0;)t[p+Ct]=t[p+Ct-1],Ct--}t[p]=c}}function gallopLeft(t,n,a,l,u,c){var p=0,d=0,Q=1;if(c(t,n[a+u])>0){for(d=l-u;Q<d&&c(t,n[a+u+Q])>0;)p=Q,Q=(Q<<1)+1,Q<=0&&(Q=d);Q>d&&(Q=d),p+=u,Q+=u}else{for(d=u+1;Q<d&&c(t,n[a+u-Q])<=0;)p=Q,Q=(Q<<1)+1,Q<=0&&(Q=d);Q>d&&(Q=d);var Ct=p;p=u-Q,Q=u-Ct}for(p++;p<Q;){var ar=p+(Q-p>>>1);c(t,n[a+ar])>0?p=ar+1:Q=ar}return Q}function gallopRight(t,n,a,l,u,c){var p=0,d=0,Q=1;if(c(t,n[a+u])<0){for(d=u+1;Q<d&&c(t,n[a+u-Q])<0;)p=Q,Q=(Q<<1)+1,Q<=0&&(Q=d);Q>d&&(Q=d);var Ct=p;p=u-Q,Q=u-Ct}else{for(d=l-u;Q<d&&c(t,n[a+u+Q])>=0;)p=Q,Q=(Q<<1)+1,Q<=0&&(Q=d);Q>d&&(Q=d),p+=u,Q+=u}for(p++;p<Q;){var ar=p+(Q-p>>>1);c(t,n[a+ar])<0?Q=ar:p=ar+1}return Q}function TimSort(t,n){var a=DEFAULT_MIN_GALLOPING,l,u,c=0,p=[];l=[],u=[];function d(on,cn){l[c]=on,u[c]=cn,c+=1}function Q(){for(;c>1;){var on=c-2;if(on>=1&&u[on-1]<=u[on]+u[on+1]||on>=2&&u[on-2]<=u[on]+u[on-1])u[on-1]<u[on+1]&&on--;else if(u[on]>u[on+1])break;ar(on)}}function Ct(){for(;c>1;){var on=c-2;on>0&&u[on-1]<u[on+1]&&on--,ar(on)}}function ar(on){var cn=l[on],gn=u[on],Cn=l[on+1],ex=u[on+1];u[on]=gn+ex,on===c-3&&(l[on+1]=l[on+2],u[on+1]=u[on+2]),c--;var ix=gallopRight(t[Cn],t,cn,gn,0,n);cn+=ix,gn-=ix,gn!==0&&(ex=gallopLeft(t[cn+gn-1],t,Cn,ex,ex-1,n),ex!==0&&(gn<=ex?en(cn,gn,Cn,ex):tn(cn,gn,Cn,ex)))}function en(on,cn,gn,Cn){var ex=0;for(ex=0;ex<cn;ex++)p[ex]=t[on+ex];var ix=0,ax=gn,ox=on;if(t[ox++]=t[ax++],--Cn===0){for(ex=0;ex<cn;ex++)t[ox+ex]=p[ix+ex];return}if(cn===1){for(ex=0;ex<Cn;ex++)t[ox+ex]=t[ax+ex];t[ox+Cn]=p[ix];return}for(var lx=a,cx,dx,hx;;){cx=0,dx=0,hx=!1;do if(n(t[ax],p[ix])<0){if(t[ox++]=t[ax++],dx++,cx=0,--Cn===0){hx=!0;break}}else if(t[ox++]=p[ix++],cx++,dx=0,--cn===1){hx=!0;break}while((cx|dx)<lx);if(hx)break;do{if(cx=gallopRight(t[ax],p,ix,cn,0,n),cx!==0){for(ex=0;ex<cx;ex++)t[ox+ex]=p[ix+ex];if(ox+=cx,ix+=cx,cn-=cx,cn<=1){hx=!0;break}}if(t[ox++]=t[ax++],--Cn===0){hx=!0;break}if(dx=gallopLeft(p[ix],t,ax,Cn,0,n),dx!==0){for(ex=0;ex<dx;ex++)t[ox+ex]=t[ax+ex];if(ox+=dx,ax+=dx,Cn-=dx,Cn===0){hx=!0;break}}if(t[ox++]=p[ix++],--cn===1){hx=!0;break}lx--}while(cx>=DEFAULT_MIN_GALLOPING||dx>=DEFAULT_MIN_GALLOPING);if(hx)break;lx<0&&(lx=0),lx+=2}if(a=lx,a<1&&(a=1),cn===1){for(ex=0;ex<Cn;ex++)t[ox+ex]=t[ax+ex];t[ox+Cn]=p[ix]}else{if(cn===0)throw new Error;for(ex=0;ex<cn;ex++)t[ox+ex]=p[ix+ex]}}function tn(on,cn,gn,Cn){var ex=0;for(ex=0;ex<Cn;ex++)p[ex]=t[gn+ex];var ix=on+cn-1,ax=Cn-1,ox=gn+Cn-1,lx=0,cx=0;if(t[ox--]=t[ix--],--cn===0){for(lx=ox-(Cn-1),ex=0;ex<Cn;ex++)t[lx+ex]=p[ex];return}if(Cn===1){for(ox-=cn,ix-=cn,cx=ox+1,lx=ix+1,ex=cn-1;ex>=0;ex--)t[cx+ex]=t[lx+ex];t[ox]=p[ax];return}for(var dx=a;;){var hx=0,fx=0,ux=!1;do if(n(p[ax],t[ix])<0){if(t[ox--]=t[ix--],hx++,fx=0,--cn===0){ux=!0;break}}else if(t[ox--]=p[ax--],fx++,hx=0,--Cn===1){ux=!0;break}while((hx|fx)<dx);if(ux)break;do{if(hx=cn-gallopRight(p[ax],t,on,cn,cn-1,n),hx!==0){for(ox-=hx,ix-=hx,cn-=hx,cx=ox+1,lx=ix+1,ex=hx-1;ex>=0;ex--)t[cx+ex]=t[lx+ex];if(cn===0){ux=!0;break}}if(t[ox--]=p[ax--],--Cn===1){ux=!0;break}if(fx=Cn-gallopLeft(t[ix],p,0,Cn,Cn-1,n),fx!==0){for(ox-=fx,ax-=fx,Cn-=fx,cx=ox+1,lx=ax+1,ex=0;ex<fx;ex++)t[cx+ex]=p[lx+ex];if(Cn<=1){ux=!0;break}}if(t[ox--]=t[ix--],--cn===0){ux=!0;break}dx--}while(hx>=DEFAULT_MIN_GALLOPING||fx>=DEFAULT_MIN_GALLOPING);if(ux)break;dx<0&&(dx=0),dx+=2}if(a=dx,a<1&&(a=1),Cn===1){for(ox-=cn,ix-=cn,cx=ox+1,lx=ix+1,ex=cn-1;ex>=0;ex--)t[cx+ex]=t[lx+ex];t[ox]=p[ax]}else{if(Cn===0)throw new Error;for(lx=ox-(Cn-1),ex=0;ex<Cn;ex++)t[lx+ex]=p[ex]}}return{mergeRuns:Q,forceMergeRuns:Ct,pushRun:d}}function sort$2(t,n,a,l){a||(a=0),l||(l=t.length);var u=l-a;if(!(u<2)){var c=0;if(u<DEFAULT_MIN_MERGE){c=makeAscendingRun(t,a,l,n),binaryInsertionSort(t,a,l,a+c,n);return}var p=TimSort(t,n),d=minRunLength(u);do{if(c=makeAscendingRun(t,a,l,n),c<d){var Q=u;Q>d&&(Q=d),binaryInsertionSort(t,a,a+Q,a+c,n),c=Q}p.pushRun(a,c),p.mergeRuns(),u-=c,a+=c}while(u!==0);p.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(t,n){return t.zlevel===n.zlevel?t.z===n.z?t.z2-n.z2:t.z-n.z:t.zlevel-n.zlevel}var Storage=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return t.prototype.traverse=function(n,a){for(var l=0;l<this._roots.length;l++)this._roots[l].traverse(n,a)},t.prototype.getDisplayList=function(n,a){a=a||!1;var l=this._displayList;return(n||!l.length)&&this.updateDisplayList(a),l},t.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var a=this._roots,l=this._displayList,u=0,c=a.length;u<c;u++)this._updateAndAddDisplayable(a[u],null,n);l.length=this._displayListLen,sort$2(l,shapeCompareFunc)},t.prototype._updateAndAddDisplayable=function(n,a,l){if(!(n.ignore&&!l)){n.beforeUpdate(),n.update(),n.afterUpdate();var u=n.getClipPath();if(n.ignoreClip)a=null;else if(u){a?a=a.slice():a=[];for(var c=u,p=n;c;)c.parent=p,c.updateTransform(),a.push(c),p=c,c=c.getClipPath()}if(n.childrenRef){for(var d=n.childrenRef(),Q=0;Q<d.length;Q++){var Ct=d[Q];n.__dirty&&(Ct.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(Ct,a,l)}n.__dirty=0}else{var ar=n;a&&a.length?ar.__clipPaths=a:ar.__clipPaths&&ar.__clipPaths.length>0&&(ar.__clipPaths=[]),isNaN(ar.z)&&(logInvalidZError(),ar.z=0),isNaN(ar.z2)&&(logInvalidZError(),ar.z2=0),isNaN(ar.zlevel)&&(logInvalidZError(),ar.zlevel=0),this._displayList[this._displayListLen++]=ar}var en=n.getDecalElement&&n.getDecalElement();en&&this._updateAndAddDisplayable(en,a,l);var tn=n.getTextGuideLine();tn&&this._updateAndAddDisplayable(tn,a,l);var on=n.getTextContent();on&&this._updateAndAddDisplayable(on,a,l)}},t.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},t.prototype.delRoot=function(n){if(n instanceof Array){for(var a=0,l=n.length;a<l;a++)this.delRoot(n[a]);return}var u=indexOf(this._roots,n);u>=0&&this._roots.splice(u,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var easingFuncs={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var n,a=.1,l=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=l/4):n=l*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/l)))},elasticOut:function(t){var n,a=.1,l=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=l/4):n=l*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/l)+1)},elasticInOut:function(t){var n,a=.1,l=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=l/4):n=l*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/l)):a*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/l)*.5+1)},backIn:function(t){var n=1.70158;return t*t*((n+1)*t-n)},backOut:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},backInOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)},bounceIn:function(t){return 1-easingFuncs.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?easingFuncs.bounceIn(t*2)*.5:easingFuncs.bounceOut(t*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(t){return t>-EPSILON$4&&t<EPSILON$4}function isNotAroundZero$1(t){return t>EPSILON$4||t<-EPSILON$4}function cubicAt(t,n,a,l,u){var c=1-u;return c*c*(c*t+3*u*n)+u*u*(u*l+3*c*a)}function cubicDerivativeAt(t,n,a,l,u){var c=1-u;return 3*(((n-t)*c+2*(a-n)*u)*c+(l-a)*u*u)}function cubicRootAt(t,n,a,l,u,c){var p=l+3*(n-a)-t,d=3*(a-n*2+t),Q=3*(n-t),Ct=t-u,ar=d*d-3*p*Q,en=d*Q-9*p*Ct,tn=Q*Q-3*d*Ct,on=0;if(isAroundZero$1(ar)&&isAroundZero$1(en))if(isAroundZero$1(d))c[0]=0;else{var cn=-Q/d;cn>=0&&cn<=1&&(c[on++]=cn)}else{var gn=en*en-4*ar*tn;if(isAroundZero$1(gn)){var Cn=en/ar,cn=-d/p+Cn,ex=-Cn/2;cn>=0&&cn<=1&&(c[on++]=cn),ex>=0&&ex<=1&&(c[on++]=ex)}else if(gn>0){var ix=mathSqrt$3(gn),ax=ar*d+1.5*p*(-en+ix),ox=ar*d+1.5*p*(-en-ix);ax<0?ax=-mathPow$2(-ax,ONE_THIRD):ax=mathPow$2(ax,ONE_THIRD),ox<0?ox=-mathPow$2(-ox,ONE_THIRD):ox=mathPow$2(ox,ONE_THIRD);var cn=(-d-(ax+ox))/(3*p);cn>=0&&cn<=1&&(c[on++]=cn)}else{var lx=(2*ar*d-3*p*en)/(2*mathSqrt$3(ar*ar*ar)),cx=Math.acos(lx)/3,dx=mathSqrt$3(ar),hx=Math.cos(cx),cn=(-d-2*dx*hx)/(3*p),ex=(-d+dx*(hx+THREE_SQRT*Math.sin(cx)))/(3*p),fx=(-d+dx*(hx-THREE_SQRT*Math.sin(cx)))/(3*p);cn>=0&&cn<=1&&(c[on++]=cn),ex>=0&&ex<=1&&(c[on++]=ex),fx>=0&&fx<=1&&(c[on++]=fx)}}return on}function cubicExtrema(t,n,a,l,u){var c=6*a-12*n+6*t,p=9*n+3*l-3*t-9*a,d=3*n-3*t,Q=0;if(isAroundZero$1(p)){if(isNotAroundZero$1(c)){var Ct=-d/c;Ct>=0&&Ct<=1&&(u[Q++]=Ct)}}else{var ar=c*c-4*p*d;if(isAroundZero$1(ar))u[0]=-c/(2*p);else if(ar>0){var en=mathSqrt$3(ar),Ct=(-c+en)/(2*p),tn=(-c-en)/(2*p);Ct>=0&&Ct<=1&&(u[Q++]=Ct),tn>=0&&tn<=1&&(u[Q++]=tn)}}return Q}function cubicSubdivide(t,n,a,l,u,c){var p=(n-t)*u+t,d=(a-n)*u+n,Q=(l-a)*u+a,Ct=(d-p)*u+p,ar=(Q-d)*u+d,en=(ar-Ct)*u+Ct;c[0]=t,c[1]=p,c[2]=Ct,c[3]=en,c[4]=en,c[5]=ar,c[6]=Q,c[7]=l}function cubicProjectPoint(t,n,a,l,u,c,p,d,Q,Ct,ar){var en,tn=.005,on=1/0,cn,gn,Cn,ex;_v0[0]=Q,_v0[1]=Ct;for(var ix=0;ix<1;ix+=.05)_v1[0]=cubicAt(t,a,u,p,ix),_v1[1]=cubicAt(n,l,c,d,ix),Cn=distSquare(_v0,_v1),Cn<on&&(en=ix,on=Cn);on=1/0;for(var ax=0;ax<32&&!(tn<EPSILON_NUMERIC);ax++)cn=en-tn,gn=en+tn,_v1[0]=cubicAt(t,a,u,p,cn),_v1[1]=cubicAt(n,l,c,d,cn),Cn=distSquare(_v1,_v0),cn>=0&&Cn<on?(en=cn,on=Cn):(_v2[0]=cubicAt(t,a,u,p,gn),_v2[1]=cubicAt(n,l,c,d,gn),ex=distSquare(_v2,_v0),gn<=1&&ex<on?(en=gn,on=ex):tn*=.5);return ar&&(ar[0]=cubicAt(t,a,u,p,en),ar[1]=cubicAt(n,l,c,d,en)),mathSqrt$3(on)}function cubicLength(t,n,a,l,u,c,p,d,Q){for(var Ct=t,ar=n,en=0,tn=1/Q,on=1;on<=Q;on++){var cn=on*tn,gn=cubicAt(t,a,u,p,cn),Cn=cubicAt(n,l,c,d,cn),ex=gn-Ct,ix=Cn-ar;en+=Math.sqrt(ex*ex+ix*ix),Ct=gn,ar=Cn}return en}function quadraticAt$1(t,n,a,l){var u=1-l;return u*(u*t+2*l*n)+l*l*a}function quadraticDerivativeAt(t,n,a,l){return 2*((1-l)*(n-t)+l*(a-n))}function quadraticRootAt(t,n,a,l,u){var c=t-2*n+a,p=2*(n-t),d=t-l,Q=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(p)){var Ct=-d/p;Ct>=0&&Ct<=1&&(u[Q++]=Ct)}}else{var ar=p*p-4*c*d;if(isAroundZero$1(ar)){var Ct=-p/(2*c);Ct>=0&&Ct<=1&&(u[Q++]=Ct)}else if(ar>0){var en=mathSqrt$3(ar),Ct=(-p+en)/(2*c),tn=(-p-en)/(2*c);Ct>=0&&Ct<=1&&(u[Q++]=Ct),tn>=0&&tn<=1&&(u[Q++]=tn)}}return Q}function quadraticExtremum(t,n,a){var l=t+a-2*n;return l===0?.5:(t-n)/l}function quadraticSubdivide(t,n,a,l,u){var c=(n-t)*l+t,p=(a-n)*l+n,d=(p-c)*l+c;u[0]=t,u[1]=c,u[2]=d,u[3]=d,u[4]=p,u[5]=a}function quadraticProjectPoint(t,n,a,l,u,c,p,d,Q){var Ct,ar=.005,en=1/0;_v0[0]=p,_v0[1]=d;for(var tn=0;tn<1;tn+=.05){_v1[0]=quadraticAt$1(t,a,u,tn),_v1[1]=quadraticAt$1(n,l,c,tn);var on=distSquare(_v0,_v1);on<en&&(Ct=tn,en=on)}en=1/0;for(var cn=0;cn<32&&!(ar<EPSILON_NUMERIC);cn++){var gn=Ct-ar,Cn=Ct+ar;_v1[0]=quadraticAt$1(t,a,u,gn),_v1[1]=quadraticAt$1(n,l,c,gn);var on=distSquare(_v1,_v0);if(gn>=0&&on<en)Ct=gn,en=on;else{_v2[0]=quadraticAt$1(t,a,u,Cn),_v2[1]=quadraticAt$1(n,l,c,Cn);var ex=distSquare(_v2,_v0);Cn<=1&&ex<en?(Ct=Cn,en=ex):ar*=.5}}return Q&&(Q[0]=quadraticAt$1(t,a,u,Ct),Q[1]=quadraticAt$1(n,l,c,Ct)),mathSqrt$3(en)}function quadraticLength(t,n,a,l,u,c,p){for(var d=t,Q=n,Ct=0,ar=1/p,en=1;en<=p;en++){var tn=en*ar,on=quadraticAt$1(t,a,u,tn),cn=quadraticAt$1(n,l,c,tn),gn=on-d,Cn=cn-Q;Ct+=Math.sqrt(gn*gn+Cn*Cn),d=on,Q=cn}return Ct}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(t){var n=t&&regexp.exec(t);if(n){var a=n[1].split(","),l=+trim$1(a[0]),u=+trim$1(a[1]),c=+trim$1(a[2]),p=+trim$1(a[3]);if(isNaN(l+u+c+p))return;var d=[];return function(Q){return Q<=0?0:Q>=1?1:cubicRootAt(0,l,c,1,Q,d)&&cubicAt(0,u,p,1,d[0])}}}var Clip=function(){function t(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return t.prototype.step=function(n,a){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=a;return}var l=this._life,u=n-this._startTime-this._pausedTime,c=u/l;c<0&&(c=0),c=Math.min(c,1);var p=this.easingFunc,d=p?p(c):c;if(this.onframe(d),c===1)if(this.loop){var Q=u%l;this._startTime=n-Q,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction$1(n)?n:easingFuncs[n]||createCubicEasingFunc(n)},t}(),Entry=function(){function t(n){this.value=n}return t}(),LinkedList=function(){function t(){this._len=0}return t.prototype.insert=function(n){var a=new Entry(n);return this.insertEntry(a),a},t.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},t.prototype.remove=function(n){var a=n.prev,l=n.next;a?a.next=l:this.head=l,l?l.prev=a:this.tail=a,n.next=n.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),LRU=function(){function t(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return t.prototype.put=function(n,a){var l=this._list,u=this._map,c=null;if(u[n]==null){var p=l.len(),d=this._lastRemovedEntry;if(p>=this._maxSize&&p>0){var Q=l.head;l.remove(Q),delete u[Q.key],c=Q.value,this._lastRemovedEntry=Q}d?d.value=a:d=new Entry(a),d.key=n,l.insertEntry(d),u[n]=d}return c},t.prototype.get=function(n){var a=this._map[n],l=this._list;if(a!=null)return a!==l.tail&&(l.remove(a),l.insertEntry(a)),a.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(t){return t=Math.round(t),t<0?0:t>255?255:t}function clampCssAngle(t){return t=Math.round(t),t<0?0:t>360?360:t}function clampCssFloat(t){return t<0?0:t>1?1:t}function parseCssInt(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(t,n,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?t+(n-t)*a*6:a*2<1?n:a*3<2?t+(n-t)*(2/3-a)*6:t}function lerpNumber(t,n,a){return t+(n-t)*a}function setRgba(t,n,a,l,u){return t[0]=n,t[1]=a,t[2]=l,t[3]=u,t}function copyRgba(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(t,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(t,lastRemovedArr||n.slice())}function parse(t,n){if(t){n=n||[];var a=colorCache.get(t);if(a)return copyRgba(n,a);t=t+"";var l=t.replace(/ /g,"").toLowerCase();if(l in kCSSColorTable)return copyRgba(n,kCSSColorTable[l]),putToCache(t,n),n;var u=l.length;if(l.charAt(0)==="#"){if(u===4||u===5){var c=parseInt(l.slice(1,4),16);if(!(c>=0&&c<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(c&3840)>>4|(c&3840)>>8,c&240|(c&240)>>4,c&15|(c&15)<<4,u===5?parseInt(l.slice(4),16)/15:1),putToCache(t,n),n}else if(u===7||u===9){var c=parseInt(l.slice(1,7),16);if(!(c>=0&&c<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(c&16711680)>>16,(c&65280)>>8,c&255,u===9?parseInt(l.slice(7),16)/255:1),putToCache(t,n),n}return}var p=l.indexOf("("),d=l.indexOf(")");if(p!==-1&&d+1===u){var Q=l.substr(0,p),Ct=l.substr(p+1,d-(p+1)).split(","),ar=1;switch(Q){case"rgba":if(Ct.length!==4)return Ct.length===3?setRgba(n,+Ct[0],+Ct[1],+Ct[2],1):setRgba(n,0,0,0,1);ar=parseCssFloat(Ct.pop());case"rgb":if(Ct.length>=3)return setRgba(n,parseCssInt(Ct[0]),parseCssInt(Ct[1]),parseCssInt(Ct[2]),Ct.length===3?ar:parseCssFloat(Ct[3])),putToCache(t,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(Ct.length!==4){setRgba(n,0,0,0,1);return}return Ct[3]=parseCssFloat(Ct[3]),hsla2rgba(Ct,n),putToCache(t,n),n;case"hsl":if(Ct.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(Ct,n),putToCache(t,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(t,n){var a=(parseFloat(t[0])%360+360)%360/360,l=parseCssFloat(t[1]),u=parseCssFloat(t[2]),c=u<=.5?u*(l+1):u+l-u*l,p=u*2-c;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(p,c,a+1/3)*255),clampCssByte(cssHueToRgb(p,c,a)*255),clampCssByte(cssHueToRgb(p,c,a-1/3)*255),1),t.length===4&&(n[3]=t[3]),n}function rgba2hsla(t){if(t){var n=t[0]/255,a=t[1]/255,l=t[2]/255,u=Math.min(n,a,l),c=Math.max(n,a,l),p=c-u,d=(c+u)/2,Q,Ct;if(p===0)Q=0,Ct=0;else{d<.5?Ct=p/(c+u):Ct=p/(2-c-u);var ar=((c-n)/6+p/2)/p,en=((c-a)/6+p/2)/p,tn=((c-l)/6+p/2)/p;n===c?Q=tn-en:a===c?Q=1/3+ar-tn:l===c&&(Q=2/3+en-ar),Q<0&&(Q+=1),Q>1&&(Q-=1)}var on=[Q*360,Ct,d];return t[3]!=null&&on.push(t[3]),on}}function lift(t,n){var a=parse(t);if(a){for(var l=0;l<3;l++)n<0?a[l]=a[l]*(1-n)|0:a[l]=(255-a[l])*n+a[l]|0,a[l]>255?a[l]=255:a[l]<0&&(a[l]=0);return stringify(a,a.length===4?"rgba":"rgb")}}function toHex(t){var n=parse(t);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function fastLerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){a=a||[];var l=t*(n.length-1),u=Math.floor(l),c=Math.ceil(l),p=n[u],d=n[c],Q=l-u;return a[0]=clampCssByte(lerpNumber(p[0],d[0],Q)),a[1]=clampCssByte(lerpNumber(p[1],d[1],Q)),a[2]=clampCssByte(lerpNumber(p[2],d[2],Q)),a[3]=clampCssFloat(lerpNumber(p[3],d[3],Q)),a}}var fastMapToColor=fastLerp;function lerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){var l=t*(n.length-1),u=Math.floor(l),c=Math.ceil(l),p=parse(n[u]),d=parse(n[c]),Q=l-u,Ct=stringify([clampCssByte(lerpNumber(p[0],d[0],Q)),clampCssByte(lerpNumber(p[1],d[1],Q)),clampCssByte(lerpNumber(p[2],d[2],Q)),clampCssFloat(lerpNumber(p[3],d[3],Q))],"rgba");return a?{color:Ct,leftIndex:u,rightIndex:c,value:l}:Ct}}var mapToColor=lerp;function modifyHSL(t,n,a,l){var u=parse(t);if(t)return u=rgba2hsla(u),n!=null&&(u[0]=clampCssAngle(n)),a!=null&&(u[1]=parseCssFloat(a)),l!=null&&(u[2]=parseCssFloat(l)),stringify(hsla2rgba(u),"rgba")}function modifyAlpha(t,n){var a=parse(t);if(a&&n!=null)return a[3]=clampCssFloat(n),stringify(a,"rgba")}function stringify(t,n){if(!(!t||!t.length)){var a=t[0]+","+t[1]+","+t[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(a+=","+t[3]),n+"("+a+")"}}function lum(t,n){var a=parse(t);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*n:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(t){if(isString$1(t)){var n=liftedColorCache.get(t);return n||(n=lift(t,-.1),liftedColorCache.put(t,n)),n}else if(isGradientObject(t)){var a=extend({},t);return a.colorStops=map$1(t.colorStops,function(l){return{offset:l.offset,color:lift(l.color,-.1)}}),a}return t}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(t){var n;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var a=parse(t);a&&(t="rgb("+a[0]+","+a[1]+","+a[2]+")",n=a[3])}return{color:t,opacity:n??1}}var EPSILON$3=1e-4;function isAroundZero(t){return t<EPSILON$3&&t>-EPSILON$3}function round3(t){return mathRound$1(t*1e3)/1e3}function round4(t){return mathRound$1(t*1e4)/1e4}function getMatrixStr(t){return"matrix("+round3(t[0])+","+round3(t[1])+","+round3(t[2])+","+round3(t[3])+","+round4(t[4])+","+round4(t[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(t,n,a){return a==="top"?t+=n/2:a==="bottom"&&(t-=n/2),t}function hasShadow(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function getShadowKey(t){var n=t.style,a=t.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),a[0],a[1]].join(",")}function isImagePattern(t){return t&&!!t.image}function isSVGPattern(t){return t&&!!t.svgElement}function isPattern(t){return isImagePattern(t)||isSVGPattern(t)}function isLinearGradient(t){return t.type==="linear"}function isRadialGradient(t){return t.type==="radial"}function isGradient(t){return t&&(t.type==="linear"||t.type==="radial")}function getIdURL(t){return"url(#"+t+")"}function getPathPrecision(t){var n=t.getGlobalScale(),a=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(a)/Math.log(10)),1)}function getSRTTransformString(t){var n=t.x||0,a=t.y||0,l=(t.rotation||0)*RADIAN_TO_DEGREE,u=retrieve2(t.scaleX,1),c=retrieve2(t.scaleY,1),p=t.skewX||0,d=t.skewY||0,Q=[];return(n||a)&&Q.push("translate("+n+"px,"+a+"px)"),l&&Q.push("rotate("+l+")"),(u!==1||c!==1)&&Q.push("scale("+u+","+c+")"),(p||d)&&Q.push("skew("+mathRound$1(p*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(d*RADIAN_TO_DEGREE)+"deg)"),Q.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction$1(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(t,n,a){return(n-t)*a+t}function interpolate1DArray(t,n,a,l){for(var u=n.length,c=0;c<u;c++)t[c]=interpolateNumber$1(n[c],a[c],l);return t}function interpolate2DArray(t,n,a,l){for(var u=n.length,c=u&&n[0].length,p=0;p<u;p++){t[p]||(t[p]=[]);for(var d=0;d<c;d++)t[p][d]=interpolateNumber$1(n[p][d],a[p][d],l)}return t}function add1DArray(t,n,a,l){for(var u=n.length,c=0;c<u;c++)t[c]=n[c]+a[c]*l;return t}function add2DArray(t,n,a,l){for(var u=n.length,c=u&&n[0].length,p=0;p<u;p++){t[p]||(t[p]=[]);for(var d=0;d<c;d++)t[p][d]=n[p][d]+a[p][d]*l}return t}function fillColorStops(t,n){for(var a=t.length,l=n.length,u=a>l?n:t,c=Math.min(a,l),p=u[c-1]||{color:[0,0,0,0],offset:0},d=c;d<Math.max(a,l);d++)u.push({offset:p.offset,color:p.color.slice()})}function fillArray(t,n,a){var l=t,u=n;if(!(!l.push||!u.push)){var c=l.length,p=u.length;if(c!==p){var d=c>p;if(d)l.length=p;else for(var Q=c;Q<p;Q++)l.push(a===1?u[Q]:arraySlice.call(u[Q]))}for(var Ct=l[0]&&l[0].length,Q=0;Q<l.length;Q++)if(a===1)isNaN(l[Q])&&(l[Q]=u[Q]);else for(var ar=0;ar<Ct;ar++)isNaN(l[Q][ar])&&(l[Q][ar]=u[Q][ar])}}function cloneValue(t){if(isArrayLike(t)){var n=t.length;if(isArrayLike(t[0])){for(var a=[],l=0;l<n;l++)a.push(arraySlice.call(t[l]));return a}return arraySlice.call(t)}return t}function rgba2String(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function guessArrayDim(t){return isArrayLike(t&&t[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(t){return t===VALUE_TYPE_LINEAR_GRADIENT||t===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(t){return t===VALUE_TYPE_1D_ARRAY||t===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function t(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(n,a,l){this._needsSort=!0;var u=this.keyframes,c=u.length,p=!1,d=VALUE_TYPE_UNKOWN,Q=a;if(isArrayLike(a)){var Ct=guessArrayDim(a);d=Ct,(Ct===1&&!isNumber(a[0])||Ct===2&&!isNumber(a[0][0]))&&(p=!0)}else if(isNumber(a)&&!eqNaN(a))d=VALUE_TYPE_NUMBER;else if(isString$1(a))if(!isNaN(+a))d=VALUE_TYPE_NUMBER;else{var ar=parse(a);ar&&(Q=ar,d=VALUE_TYPE_COLOR)}else if(isGradientObject(a)){var en=extend({},Q);en.colorStops=map$1(a.colorStops,function(on){return{offset:on.offset,color:parse(on.color)}}),isLinearGradient(a)?d=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(a)&&(d=VALUE_TYPE_RADIAL_GRADIENT),Q=en}c===0?this.valType=d:(d!==this.valType||d===VALUE_TYPE_UNKOWN)&&(p=!0),this.discrete=this.discrete||p;var tn={time:n,value:Q,rawValue:a,percent:0};return l&&(tn.easing=l,tn.easingFunc=isFunction$1(l)?l:easingFuncs[l]||createCubicEasingFunc(l)),u.push(tn),tn},t.prototype.prepare=function(n,a){var l=this.keyframes;this._needsSort&&l.sort(function(gn,Cn){return gn.time-Cn.time});for(var u=this.valType,c=l.length,p=l[c-1],d=this.discrete,Q=isArrayValueType(u),Ct=isGradientValueType(u),ar=0;ar<c;ar++){var en=l[ar],tn=en.value,on=p.value;en.percent=en.time/n,d||(Q&&ar!==c-1?fillArray(tn,on,u):Ct&&fillColorStops(tn.colorStops,on.colorStops))}if(!d&&u!==VALUE_TYPE_RADIAL_GRADIENT&&a&&this.needsAnimate()&&a.needsAnimate()&&u===a.valType&&!a._finished){this._additiveTrack=a;for(var cn=l[0].value,ar=0;ar<c;ar++)u===VALUE_TYPE_NUMBER?l[ar].additiveValue=l[ar].value-cn:u===VALUE_TYPE_COLOR?l[ar].additiveValue=add1DArray([],l[ar].value,cn,-1):isArrayValueType(u)&&(l[ar].additiveValue=u===VALUE_TYPE_1D_ARRAY?add1DArray([],l[ar].value,cn,-1):add2DArray([],l[ar].value,cn,-1))}},t.prototype.step=function(n,a){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var l=this._additiveTrack!=null,u=l?"additiveValue":"value",c=this.valType,p=this.keyframes,d=p.length,Q=this.propName,Ct=c===VALUE_TYPE_COLOR,ar,en=this._lastFr,tn=Math.min,on,cn;if(d===1)on=cn=p[0];else{if(a<0)ar=0;else if(a<this._lastFrP){var gn=tn(en+1,d-1);for(ar=gn;ar>=0&&!(p[ar].percent<=a);ar--);ar=tn(ar,d-2)}else{for(ar=en;ar<d&&!(p[ar].percent>a);ar++);ar=tn(ar-1,d-2)}cn=p[ar+1],on=p[ar]}if(on&&cn){this._lastFr=ar,this._lastFrP=a;var Cn=cn.percent-on.percent,ex=Cn===0?1:tn((a-on.percent)/Cn,1);cn.easingFunc&&(ex=cn.easingFunc(ex));var ix=l?this._additiveValue:Ct?tmpRgba:n[Q];if((isArrayValueType(c)||Ct)&&!ix&&(ix=this._additiveValue=[]),this.discrete)n[Q]=ex<1?on.rawValue:cn.rawValue;else if(isArrayValueType(c))c===VALUE_TYPE_1D_ARRAY?interpolate1DArray(ix,on[u],cn[u],ex):interpolate2DArray(ix,on[u],cn[u],ex);else if(isGradientValueType(c)){var ax=on[u],ox=cn[u],lx=c===VALUE_TYPE_LINEAR_GRADIENT;n[Q]={type:lx?"linear":"radial",x:interpolateNumber$1(ax.x,ox.x,ex),y:interpolateNumber$1(ax.y,ox.y,ex),colorStops:map$1(ax.colorStops,function(dx,hx){var fx=ox.colorStops[hx];return{offset:interpolateNumber$1(dx.offset,fx.offset,ex),color:rgba2String(interpolate1DArray([],dx.color,fx.color,ex))}}),global:ox.global},lx?(n[Q].x2=interpolateNumber$1(ax.x2,ox.x2,ex),n[Q].y2=interpolateNumber$1(ax.y2,ox.y2,ex)):n[Q].r=interpolateNumber$1(ax.r,ox.r,ex)}else if(Ct)interpolate1DArray(ix,on[u],cn[u],ex),l||(n[Q]=rgba2String(ix));else{var cx=interpolateNumber$1(on[u],cn[u],ex);l?this._additiveValue=cx:n[Q]=cx}l&&this._addToTarget(n)}}},t.prototype._addToTarget=function(n){var a=this.valType,l=this.propName,u=this._additiveValue;a===VALUE_TYPE_NUMBER?n[l]=n[l]+u:a===VALUE_TYPE_COLOR?(parse(n[l],tmpRgba),add1DArray(tmpRgba,tmpRgba,u,1),n[l]=rgba2String(tmpRgba)):a===VALUE_TYPE_1D_ARRAY?add1DArray(n[l],n[l],u,1):a===VALUE_TYPE_2D_ARRAY&&add2DArray(n[l],n[l],u,1)},t}(),Animator=function(){function t(n,a,l,u){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=a,a&&u){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=u,this._allowDiscrete=l}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(n){this._target=n},t.prototype.when=function(n,a,l){return this.whenWithKeys(n,a,keys(a),l)},t.prototype.whenWithKeys=function(n,a,l,u){for(var c=this._tracks,p=0;p<l.length;p++){var d=l[p],Q=c[d];if(!Q){Q=c[d]=new Track(d);var Ct=void 0,ar=this._getAdditiveTrack(d);if(ar){var en=ar.keyframes,tn=en[en.length-1];Ct=tn&&tn.value,ar.valType===VALUE_TYPE_COLOR&&Ct&&(Ct=rgba2String(Ct))}else Ct=this._target[d];if(Ct==null)continue;n>0&&Q.addKeyframe(0,cloneValue(Ct),u),this._trackKeys.push(d)}Q.addKeyframe(n,cloneValue(a[d]),u)}return this._maxTime=Math.max(this._maxTime,n),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var a=n.length,l=0;l<a;l++)n[l].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,a=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,a)for(var l=0;l<a.length;l++)a[l].call(this)},t.prototype._setTracksFinished=function(){for(var n=this._tracks,a=this._trackKeys,l=0;l<a.length;l++)n[a[l]].setFinished()},t.prototype._getAdditiveTrack=function(n){var a,l=this._additiveAnimators;if(l)for(var u=0;u<l.length;u++){var c=l[u].getTrack(n);c&&(a=c)}return a},t.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var a=this,l=[],u=this._maxTime||0,c=0;c<this._trackKeys.length;c++){var p=this._trackKeys[c],d=this._tracks[p],Q=this._getAdditiveTrack(p),Ct=d.keyframes,ar=Ct.length;if(d.prepare(u,Q),d.needsAnimate())if(!this._allowDiscrete&&d.discrete){var en=Ct[ar-1];en&&(a._target[d.propName]=en.rawValue),d.setFinished()}else l.push(d)}if(l.length||this._force){var tn=new Clip({life:u,loop:this._loop,delay:this._delay||0,onframe:function(on){a._started=2;var cn=a._additiveAnimators;if(cn){for(var gn=!1,Cn=0;Cn<cn.length;Cn++)if(cn[Cn]._clip){gn=!0;break}gn||(a._additiveAnimators=null)}for(var Cn=0;Cn<l.length;Cn++)l[Cn].step(a._target,on);var ex=a._onframeCbs;if(ex)for(var Cn=0;Cn<ex.length;Cn++)ex[Cn](a._target,on)},ondestroy:function(){a._doneCallback()}});this._clip=tn,this.animation&&this.animation.addClip(tn),n&&tn.setEasing(n)}else this._doneCallback();return this}},t.prototype.stop=function(n){if(this._clip){var a=this._clip;n&&a.onframe(1),this._abortedCallback()}},t.prototype.delay=function(n){return this._delay=n,this},t.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},t.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},t.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(n){return this._tracks[n]},t.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(a){return n._tracks[a]})},t.prototype.stopTracks=function(n,a){if(!n.length||!this._clip)return!0;for(var l=this._tracks,u=this._trackKeys,c=0;c<n.length;c++){var p=l[n[c]];p&&!p.isFinished()&&(a?p.step(this._target,1):this._started===1&&p.step(this._target,0),p.setFinished())}for(var d=!0,c=0;c<u.length;c++)if(!l[u[c]].isFinished()){d=!1;break}return d&&this._abortedCallback(),d},t.prototype.saveTo=function(n,a,l){if(n){a=a||this._trackKeys;for(var u=0;u<a.length;u++){var c=a[u],p=this._tracks[c];if(!(!p||p.isFinished())){var d=p.keyframes,Q=d[l?0:d.length-1];Q&&(n[c]=cloneValue(Q.rawValue))}}}},t.prototype.__changeFinalValue=function(n,a){a=a||keys(n);for(var l=0;l<a.length;l++){var u=a[l],c=this._tracks[u];if(c){var p=c.keyframes;if(p.length>1){var d=p.pop();c.addKeyframe(d.time,n[u]),c.prepare(this._maxTime,c.getAdditiveTrack())}}}},t}();function getTime(){return new Date().getTime()}var Animation=function(t){__extends(n,t);function n(a){var l=t.call(this)||this;return l._running=!1,l._time=0,l._pausedTime=0,l._pauseStart=0,l._paused=!1,a=a||{},l.stage=a.stage||{},l}return n.prototype.addClip=function(a){a.animation&&this.removeClip(a),this._head?(this._tail.next=a,a.prev=this._tail,a.next=null,this._tail=a):this._head=this._tail=a,a.animation=this},n.prototype.addAnimator=function(a){a.animation=this;var l=a.getClip();l&&this.addClip(l)},n.prototype.removeClip=function(a){if(a.animation){var l=a.prev,u=a.next;l?l.next=u:this._head=u,u?u.prev=l:this._tail=l,a.next=a.prev=a.animation=null}},n.prototype.removeAnimator=function(a){var l=a.getClip();l&&this.removeClip(l),a.animation=null},n.prototype.update=function(a){for(var l=getTime()-this._pausedTime,u=l-this._time,c=this._head;c;){var p=c.next,d=c.step(l,u);d&&(c.ondestroy(),this.removeClip(c)),c=p}this._time=l,a||(this.trigger("frame",u),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var a=this;this._running=!0;function l(){a._running&&(requestAnimationFrame$1(l),!a._paused&&a.update())}requestAnimationFrame$1(l)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var a=this._head;a;){var l=a.next;a.prev=a.next=a.animation=null,a=l}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(a,l){l=l||{},this.start();var u=new Animator(a,l.loop);return this.addAnimator(u),u},n}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],a={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},l=map$1(t,function(u){var c=u.replace("mouse","pointer");return a.hasOwnProperty(c)?c:u});return{mouse:t,touch:n,pointer:l}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(t){var n=t.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function markTouch(t){t&&(t.zrByTouch=!0)}function normalizeGlobalEvent(t,n){return normalizeEvent(t.dom,new FakeGlobalEvent(t,n),!0)}function isLocalEl(t,n){for(var a=n,l=!1;a&&a.nodeType!==9&&!(l=a.domBelongToZr||a!==n&&a===t.painterRoot);)a=a.parentNode;return l}var FakeGlobalEvent=function(){function t(n,a){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=a.type,this.target=this.currentTarget=n.dom,this.pointerType=a.pointerType,this.clientX=a.clientX,this.clientY=a.clientY}return t}(),localDOMHandlers={mousedown:function(t){t=normalizeEvent(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=normalizeEvent(this.dom,t);var n=this.__mayPointerCapture;n&&(t.zrX!==n[0]||t.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=normalizeEvent(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=normalizeEvent(this.dom,t);var n=t.toElement||t.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){wheelEventSupported=!0,t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){wheelEventSupported||(t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),localDOMHandlers.mousemove.call(this,t),localDOMHandlers.mousedown.call(this,t)},touchmove:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"change"),localDOMHandlers.mousemove.call(this,t)},touchend:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"end"),localDOMHandlers.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,t)},pointerdown:function(t){localDOMHandlers.mousedown.call(this,t)},pointermove:function(t){isPointerFromTouch(t)||localDOMHandlers.mousemove.call(this,t)},pointerup:function(t){localDOMHandlers.mouseup.call(this,t)},pointerout:function(t){isPointerFromTouch(t)||localDOMHandlers.mouseout.call(this,t)}};each$f(["click","dblclick","contextmenu"],function(t){localDOMHandlers[t]=function(n){n=normalizeEvent(this.dom,n),this.trigger(t,n)}});var globalDOMHandlers={pointermove:function(t){isPointerFromTouch(t)||globalDOMHandlers.mousemove.call(this,t)},pointerup:function(t){globalDOMHandlers.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),n&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function mountLocalDOMEventListeners(t,n){var a=n.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(l){mountSingleDOMEventListener(n,l,function(u){a[l].call(t,u)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(l){mountSingleDOMEventListener(n,l,function(u){a[l].call(t,u),setTouchTimer(n)})}),each$f(localNativeListenerNames.mouse,function(l){mountSingleDOMEventListener(n,l,function(u){u=getNativeEvent(u),n.touching||a[l].call(t,u)})}))}function mountGlobalDOMEventListeners(t,n){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,a):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,a);function a(l){function u(c){c=getNativeEvent(c),isLocalEl(t,c.target)||(c=normalizeGlobalEvent(t,c),n.domHandlers[l].call(t,c))}mountSingleDOMEventListener(n,l,u,{capture:!0})}}function mountSingleDOMEventListener(t,n,a,l){t.mounted[n]=a,t.listenerOpts[n]=l,addEventListener(t.domTarget,n,a,l)}function unmountDOMEventListeners(t){var n=t.mounted;for(var a in n)n.hasOwnProperty(a)&&removeEventListener(t.domTarget,a,n[a],t.listenerOpts[a]);t.mounted={}}var DOMHandlerScope=function(){function t(n,a){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=a}return t}(),HandlerDomProxy=function(t){__extends(n,t);function n(a,l){var u=t.call(this)||this;return u.__pointerCapturing=!1,u.dom=a,u.painterRoot=l,u._localHandlerScope=new DOMHandlerScope(a,localDOMHandlers),globalEventSupported&&(u._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(u,u._localHandlerScope),u}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},n.prototype.__togglePointerCapture=function(a){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+a){this.__pointerCapturing=a;var l=this._globalHandlerScope;a?mountGlobalDOMEventListeners(this,l):unmountDOMEventListeners(l)}},n}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(t){return t>EPSILON$2||t<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function t(){}return t.prototype.getLocalTransform=function(n){return t.getLocalTransform(this,n)},t.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},t.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},t.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},t.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},t.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},t.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,a=this.needLocalTransform(),l=this.transform;if(!(a||n)){l&&(mIdentity(l),this.invTransform=null);return}l=l||create$1(),a?this.getLocalTransform(l):mIdentity(l),n&&(a?mul(l,n,l):copy(l,n)),this.transform=l,this._resolveGlobalScaleRatio(l)},t.prototype._resolveGlobalScaleRatio=function(n){var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(scaleTmp);var l=scaleTmp[0]<0?-1:1,u=scaleTmp[1]<0?-1:1,c=((scaleTmp[0]-l)*a+l)/scaleTmp[0]||0,p=((scaleTmp[1]-u)*a+u)/scaleTmp[1]||0;n[0]*=c,n[1]*=c,n[2]*=p,n[3]*=p}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,n)},t.prototype.getComputedTransform=function(){for(var n=this,a=[];n;)a.push(n),n=n.parent;for(;n=a.pop();)n.updateTransform();return this.transform},t.prototype.setLocalTransform=function(n){if(n){var a=n[0]*n[0]+n[1]*n[1],l=n[2]*n[2]+n[3]*n[3],u=Math.atan2(n[1],n[0]),c=Math.PI/2+u-Math.atan2(n[3],n[2]);l=Math.sqrt(l)*Math.cos(c),a=Math.sqrt(a),this.skewX=c,this.skewY=0,this.rotation=-u,this.x=+n[4],this.y=+n[5],this.scaleX=a,this.scaleY=l,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,a=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create$1(),mul(tmpTransform,n.invTransform,a),a=tmpTransform);var l=this.originX,u=this.originY;(l||u)&&(originTransform[4]=l,originTransform[5]=u,mul(tmpTransform,a,originTransform),tmpTransform[4]-=l,tmpTransform[5]-=u,a=tmpTransform),this.setLocalTransform(a)}},t.prototype.getGlobalScale=function(n){var a=this.transform;return n=n||[],a?(n[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n[1]=Math.sqrt(a[2]*a[2]+a[3]*a[3]),a[0]<0&&(n[0]=-n[0]),a[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},t.prototype.transformCoordToLocal=function(n,a){var l=[n,a],u=this.invTransform;return u&&applyTransform$1(l,l,u),l},t.prototype.transformCoordToGlobal=function(n,a){var l=[n,a],u=this.transform;return u&&applyTransform$1(l,l,u),l},t.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},t.prototype.copyTransform=function(n){copyTransform(this,n)},t.getLocalTransform=function(n,a){a=a||[];var l=n.originX||0,u=n.originY||0,c=n.scaleX,p=n.scaleY,d=n.anchorX,Q=n.anchorY,Ct=n.rotation||0,ar=n.x,en=n.y,tn=n.skewX?Math.tan(n.skewX):0,on=n.skewY?Math.tan(-n.skewY):0;if(l||u||d||Q){var cn=l+d,gn=u+Q;a[4]=-cn*c-tn*gn*p,a[5]=-gn*p-on*cn*c}else a[4]=a[5]=0;return a[0]=c,a[3]=p,a[1]=on*c,a[2]=tn*p,Ct&&rotate(a,a,Ct),a[4]+=l+ar,a[5]+=u+en,a},t.initDefaultProps=function(){var n=t.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0}(),t}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(t,n){for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var l=TRANSFORMABLE_PROPS[a];t[l]=n[l]}}var textWidthCache={};function getWidth(t,n){n=n||DEFAULT_FONT;var a=textWidthCache[n];a||(a=textWidthCache[n]=new LRU(500));var l=a.get(t);return l==null&&(l=platformApi.measureText(t,n).width,a.put(t,l)),l}function innerGetBoundingRect(t,n,a,l){var u=getWidth(t,n),c=getLineHeight(n),p=adjustTextX(0,u,a),d=adjustTextY(0,c,l),Q=new BoundingRect(p,d,u,c);return Q}function getBoundingRect(t,n,a,l){var u=((t||"")+"").split(`
`),c=u.length;if(c===1)return innerGetBoundingRect(u[0],n,a,l);for(var p=new BoundingRect(0,0,0,0),d=0;d<u.length;d++){var Q=innerGetBoundingRect(u[d],n,a,l);d===0?p.copy(Q):p.union(Q)}return p}function adjustTextX(t,n,a){return a==="right"?t-=n:a==="center"&&(t-=n/2),t}function adjustTextY(t,n,a){return a==="middle"?t-=n/2:a==="bottom"&&(t-=n),t}function getLineHeight(t){return getWidth("",t)}function parsePercent$1(t,n){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*n:parseFloat(t):t}function calculateTextPosition(t,n,a){var l=n.position||"inside",u=n.distance!=null?n.distance:5,c=a.height,p=a.width,d=c/2,Q=a.x,Ct=a.y,ar="left",en="top";if(l instanceof Array)Q+=parsePercent$1(l[0],a.width),Ct+=parsePercent$1(l[1],a.height),ar=null,en=null;else switch(l){case"left":Q-=u,Ct+=d,ar="right",en="middle";break;case"right":Q+=u+p,Ct+=d,en="middle";break;case"top":Q+=p/2,Ct-=u,ar="center",en="bottom";break;case"bottom":Q+=p/2,Ct+=c+u,ar="center";break;case"inside":Q+=p/2,Ct+=d,ar="center",en="middle";break;case"insideLeft":Q+=u,Ct+=d,en="middle";break;case"insideRight":Q+=p-u,Ct+=d,ar="right",en="middle";break;case"insideTop":Q+=p/2,Ct+=u,ar="center";break;case"insideBottom":Q+=p/2,Ct+=c-u,ar="center",en="bottom";break;case"insideTopLeft":Q+=u,Ct+=u;break;case"insideTopRight":Q+=p-u,Ct+=u,ar="right";break;case"insideBottomLeft":Q+=u,Ct+=c-u,en="bottom";break;case"insideBottomRight":Q+=p-u,Ct+=c-u,ar="right",en="bottom";break}return t=t||{},t.x=Q,t.y=Ct,t.align=ar,t.verticalAlign=en,t}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=!0,t},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=function(){function t(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return t.prototype._init=function(n){this.attr(n)},t.prototype.drift=function(n,a,l){switch(this.draggable){case"horizontal":a=0;break;case"vertical":n=0;break}var u=this.transform;u||(u=this.transform=[1,0,0,1,0,0]),u[4]+=n,u[5]+=a,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(n){var a=this._textContent;if(a&&(!a.ignore||n)){this.textConfig||(this.textConfig={});var l=this.textConfig,u=l.local,c=a.innerTransformable,p=void 0,d=void 0,Q=!1;c.parent=u?this:null;var Ct=!1;if(c.copyTransform(a),l.position!=null){var ar=tmpBoundingRect;l.layoutRect?ar.copy(l.layoutRect):ar.copy(this.getBoundingRect()),u||ar.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,l,ar):calculateTextPosition(tmpTextPosCalcRes,l,ar),c.x=tmpTextPosCalcRes.x,c.y=tmpTextPosCalcRes.y,p=tmpTextPosCalcRes.align,d=tmpTextPosCalcRes.verticalAlign;var en=l.origin;if(en&&l.rotation!=null){var tn=void 0,on=void 0;en==="center"?(tn=ar.width*.5,on=ar.height*.5):(tn=parsePercent$1(en[0],ar.width),on=parsePercent$1(en[1],ar.height)),Ct=!0,c.originX=-c.x+tn+(u?0:ar.x),c.originY=-c.y+on+(u?0:ar.y)}}l.rotation!=null&&(c.rotation=l.rotation);var cn=l.offset;cn&&(c.x+=cn[0],c.y+=cn[1],Ct||(c.originX=-cn[0],c.originY=-cn[1]));var gn=l.inside==null?typeof l.position=="string"&&l.position.indexOf("inside")>=0:l.inside,Cn=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ex=void 0,ix=void 0,ax=void 0;gn&&this.canBeInsideText()?(ex=l.insideFill,ix=l.insideStroke,(ex==null||ex==="auto")&&(ex=this.getInsideTextFill()),(ix==null||ix==="auto")&&(ix=this.getInsideTextStroke(ex),ax=!0)):(ex=l.outsideFill,ix=l.outsideStroke,(ex==null||ex==="auto")&&(ex=this.getOutsideFill()),(ix==null||ix==="auto")&&(ix=this.getOutsideStroke(ex),ax=!0)),ex=ex||"#000",(ex!==Cn.fill||ix!==Cn.stroke||ax!==Cn.autoStroke||p!==Cn.align||d!==Cn.verticalAlign)&&(Q=!0,Cn.fill=ex,Cn.stroke=ix,Cn.autoStroke=ax,Cn.align=p,Cn.verticalAlign=d,a.setDefaultTextStyle(Cn)),a.__dirty|=REDRAW_BIT,Q&&a.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(n){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},t.prototype.getOutsideStroke=function(n){var a=this.__zr&&this.__zr.getBackgroundColor(),l=typeof a=="string"&&parse(a);l||(l=[255,255,255,1]);for(var u=l[3],c=this.__zr.isDarkMode(),p=0;p<3;p++)l[p]=l[p]*u+(c?0:255)*(1-u);return l[3]=1,stringify(l,"rgba")},t.prototype.traverse=function(n,a){},t.prototype.attrKV=function(n,a){n==="textConfig"?this.setTextConfig(a):n==="textContent"?this.setTextContent(a):n==="clipPath"?this.setClipPath(a):n==="extra"?(this.extra=this.extra||{},extend(this.extra,a)):this[n]=a},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(n,a){if(typeof n=="string")this.attrKV(n,a);else if(isObject$3(n))for(var l=n,u=keys(l),c=0;c<u.length;c++){var p=u[c];this.attrKV(p,n[p])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var a=this._normalState,l=0;l<this.animators.length;l++){var u=this.animators[l],c=u.__fromStateTransition;if(!(u.getLoop()||c&&c!==PRESERVED_NORMAL_STATE)){var p=u.targetName,d=p?a[p]:a;u.saveTo(d)}}},t.prototype._innerSaveToNormal=function(n){var a=this._normalState;a||(a=this._normalState={}),n.textConfig&&!a.textConfig&&(a.textConfig=this.textConfig),this._savePrimaryToNormal(n,a,PRIMARY_STATES_KEYS$1)},t.prototype._savePrimaryToNormal=function(n,a,l){for(var u=0;u<l.length;u++){var c=l[u];n[c]!=null&&!(c in a)&&(a[c]=this[c])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(n){return this.states[n]},t.prototype.ensureState=function(n){var a=this.states;return a[n]||(a[n]={}),a[n]},t.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},t.prototype.useState=function(n,a,l,u){var c=n===PRESERVED_NORMAL_STATE,p=this.hasState();if(!(!p&&c)){var d=this.currentStates,Q=this.stateTransition;if(!(indexOf(d,n)>=0&&(a||d.length===1))){var Ct;if(this.stateProxy&&!c&&(Ct=this.stateProxy(n)),Ct||(Ct=this.states&&this.states[n]),!Ct&&!c){logError("State "+n+" not exists.");return}c||this.saveCurrentToNormalState(Ct);var ar=!!(Ct&&Ct.hoverLayer||u);ar&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,Ct,this._normalState,a,!l&&!this.__inHover&&Q&&Q.duration>0,Q);var en=this._textContent,tn=this._textGuide;return en&&en.useState(n,a,l,ar),tn&&tn.useState(n,a,l,ar),c?(this.currentStates=[],this._normalState={}):a?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!ar&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),Ct}}},t.prototype.useStates=function(n,a,l){if(!n.length)this.clearStates();else{var u=[],c=this.currentStates,p=n.length,d=p===c.length;if(d){for(var Q=0;Q<p;Q++)if(n[Q]!==c[Q]){d=!1;break}}if(d)return;for(var Q=0;Q<p;Q++){var Ct=n[Q],ar=void 0;this.stateProxy&&(ar=this.stateProxy(Ct,n)),ar||(ar=this.states[Ct]),ar&&u.push(ar)}var en=u[p-1],tn=!!(en&&en.hoverLayer||l);tn&&this._toggleHoverLayerFlag(!0);var on=this._mergeStates(u),cn=this.stateTransition;this.saveCurrentToNormalState(on),this._applyStateObj(n.join(","),on,this._normalState,!1,!a&&!this.__inHover&&cn&&cn.duration>0,cn);var gn=this._textContent,Cn=this._textGuide;gn&&gn.useStates(n,a,tn),Cn&&Cn.useStates(n,a,tn),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!tn&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},t.prototype.isSilent=function(){for(var n=this.silent,a=this.parent;!n&&a;){if(a.silent){n=!0;break}a=a.parent}return n},t.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var a=this.animators[n];a.targetName&&a.changeTarget(this[a.targetName])}},t.prototype.removeState=function(n){var a=indexOf(this.currentStates,n);if(a>=0){var l=this.currentStates.slice();l.splice(a,1),this.useStates(l)}},t.prototype.replaceState=function(n,a,l){var u=this.currentStates.slice(),c=indexOf(u,n),p=indexOf(u,a)>=0;c>=0?p?u.splice(c,1):u[c]=a:l&&!p&&u.push(a),this.useStates(u)},t.prototype.toggleState=function(n,a){a?this.useState(n,!0):this.removeState(n)},t.prototype._mergeStates=function(n){for(var a={},l,u=0;u<n.length;u++){var c=n[u];extend(a,c),c.textConfig&&(l=l||{},extend(l,c.textConfig))}return l&&(a.textConfig=l),a},t.prototype._applyStateObj=function(n,a,l,u,c,p){var d=!(a&&u);a&&a.textConfig?(this.textConfig=extend({},u?this.textConfig:l.textConfig),extend(this.textConfig,a.textConfig)):d&&l.textConfig&&(this.textConfig=l.textConfig);for(var Q={},Ct=!1,ar=0;ar<PRIMARY_STATES_KEYS$1.length;ar++){var en=PRIMARY_STATES_KEYS$1[ar],tn=c&&DEFAULT_ANIMATABLE_MAP[en];a&&a[en]!=null?tn?(Ct=!0,Q[en]=a[en]):this[en]=a[en]:d&&l[en]!=null&&(tn?(Ct=!0,Q[en]=l[en]):this[en]=l[en])}if(!c)for(var ar=0;ar<this.animators.length;ar++){var on=this.animators[ar],cn=on.targetName;on.getLoop()||on.__changeFinalValue(cn?(a||l)[cn]:a||l)}Ct&&this._transitionState(n,Q,p)},t.prototype._attachComponent=function(n){if(!(n.__zr&&!n.__hostTarget)&&n!==this){var a=this.__zr;a&&n.addSelfToZr(a),n.__zr=a,n.__hostTarget=this}},t.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},t.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(n){var a=this._textContent;a!==n&&(a&&a!==n&&this.removeTextContent(),n.innerTransformable=new Transformable,this._attachComponent(n),this._textContent=n,this.markRedraw())},t.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var a=this._textContent,l=this._textGuide;a&&(a.__inHover=n),l&&(l.__inHover=n)},t.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var a=this.animators;if(a)for(var l=0;l<a.length;l++)n.animation.addAnimator(a[l]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var a=this.animators;if(a)for(var l=0;l<a.length;l++)n.animation.removeAnimator(a[l]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},t.prototype.animate=function(n,a,l){var u=n?this[n]:this,c=new Animator(u,a,l);return n&&(c.targetName=n),this.addAnimator(c,n),c},t.prototype.addAnimator=function(n,a){var l=this.__zr,u=this;n.during(function(){u.updateDuringAnimation(a)}).done(function(){var c=u.animators,p=indexOf(c,n);p>=0&&c.splice(p,1)}),this.animators.push(n),l&&l.animation.addAnimator(n),l&&l.wakeUp()},t.prototype.updateDuringAnimation=function(n){this.markRedraw()},t.prototype.stopAnimation=function(n,a){for(var l=this.animators,u=l.length,c=[],p=0;p<u;p++){var d=l[p];!n||n===d.scope?d.stop(a):c.push(d)}return this.animators=c,this},t.prototype.animateTo=function(n,a,l){animateTo(this,n,a,l)},t.prototype.animateFrom=function(n,a,l){animateTo(this,n,a,l,!0)},t.prototype._transitionState=function(n,a,l,u){for(var c=animateTo(this,a,l,u),p=0;p<c.length;p++)c[p].__fromStateTransition=n},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var n=t.prototype;n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;function a(l,u,c,p){Object.defineProperty(n,l,{get:function(){if(!this[u]){var Q=this[u]=[];d(this,Q)}return this[u]},set:function(Q){this[c]=Q[0],this[p]=Q[1],this[u]=Q,d(this,Q)}});function d(Q,Ct){Object.defineProperty(Ct,0,{get:function(){return Q[c]},set:function(ar){Q[c]=ar}}),Object.defineProperty(Ct,1,{get:function(){return Q[p]},set:function(ar){Q[p]=ar}})}}Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))}(),t}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(t,n,a,l,u){a=a||{};var c=[];animateToShallow(t,"",t,n,a,l,c,u);var p=c.length,d=!1,Q=a.done,Ct=a.aborted,ar=function(){d=!0,p--,p<=0&&(d?Q&&Q():Ct&&Ct())},en=function(){p--,p<=0&&(d?Q&&Q():Ct&&Ct())};p||Q&&Q(),c.length>0&&a.during&&c[0].during(function(cn,gn){a.during(gn)});for(var tn=0;tn<c.length;tn++){var on=c[tn];ar&&on.done(ar),en&&on.aborted(en),a.force&&on.duration(a.duration),on.start(a.easing)}return c}function copyArrShallow(t,n,a){for(var l=0;l<a;l++)t[l]=n[l]}function is2DArray(t){return isArrayLike(t[0])}function copyValue(t,n,a){if(isArrayLike(n[a]))if(isArrayLike(t[a])||(t[a]=[]),isTypedArray(n[a])){var l=n[a].length;t[a].length!==l&&(t[a]=new n[a].constructor(l),copyArrShallow(t[a],n[a],l))}else{var u=n[a],c=t[a],p=u.length;if(is2DArray(u))for(var d=u[0].length,Q=0;Q<p;Q++)c[Q]?copyArrShallow(c[Q],u[Q],d):c[Q]=Array.prototype.slice.call(u[Q]);else copyArrShallow(c,u,p);c.length=u.length}else t[a]=n[a]}function isValueSame(t,n){return t===n||isArrayLike(t)&&isArrayLike(n)&&is1DArraySame(t,n)}function is1DArraySame(t,n){var a=t.length;if(a!==n.length)return!1;for(var l=0;l<a;l++)if(t[l]!==n[l])return!1;return!0}function animateToShallow(t,n,a,l,u,c,p,d){for(var Q=keys(l),Ct=u.duration,ar=u.delay,en=u.additive,tn=u.setToFinal,on=!isObject$3(c),cn=t.animators,gn=[],Cn=0;Cn<Q.length;Cn++){var ex=Q[Cn],ix=l[ex];if(ix!=null&&a[ex]!=null&&(on||c[ex]))if(isObject$3(ix)&&!isArrayLike(ix)&&!isGradientObject(ix)){if(n){d||(a[ex]=ix,t.updateDuringAnimation(n));continue}animateToShallow(t,ex,a[ex],ix,u,c&&c[ex],p,d)}else gn.push(ex);else d||(a[ex]=ix,t.updateDuringAnimation(n),gn.push(ex))}var ax=gn.length;if(!en&&ax)for(var ox=0;ox<cn.length;ox++){var lx=cn[ox];if(lx.targetName===n){var cx=lx.stopTracks(gn);if(cx){var dx=indexOf(cn,lx);cn.splice(dx,1)}}}if(u.force||(gn=filter(gn,function(gx){return!isValueSame(l[gx],a[gx])}),ax=gn.length),ax>0||u.force&&!p.length){var hx=void 0,fx=void 0,ux=void 0;if(d){fx={},tn&&(hx={});for(var ox=0;ox<ax;ox++){var ex=gn[ox];fx[ex]=a[ex],tn?hx[ex]=l[ex]:a[ex]=l[ex]}}else if(tn){ux={};for(var ox=0;ox<ax;ox++){var ex=gn[ox];ux[ex]=cloneValue(a[ex]),copyValue(a,l,ex)}}var lx=new Animator(a,!1,!1,en?filter(cn,function(yx){return yx.targetName===n}):null);lx.targetName=n,u.scope&&(lx.scope=u.scope),tn&&hx&&lx.whenWithKeys(0,hx,gn),ux&&lx.whenWithKeys(0,ux,gn),lx.whenWithKeys(Ct??500,d?fx:l,gn).delay(ar||0),t.addAnimator(lx,n),p.push(lx)}}var Group$3=function(t){__extends(n,t);function n(a){var l=t.call(this)||this;return l.isGroup=!0,l._children=[],l.attr(a),l}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(a){return this._children[a]},n.prototype.childOfName=function(a){for(var l=this._children,u=0;u<l.length;u++)if(l[u].name===a)return l[u]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},n.prototype.addBefore=function(a,l){if(a&&a!==this&&a.parent!==this&&l&&l.parent===this){var u=this._children,c=u.indexOf(l);c>=0&&(u.splice(c,0,a),this._doAdd(a))}return this},n.prototype.replace=function(a,l){var u=indexOf(this._children,a);return u>=0&&this.replaceAt(l,u),this},n.prototype.replaceAt=function(a,l){var u=this._children,c=u[l];if(a&&a!==this&&a.parent!==this&&a!==c){u[l]=a,c.parent=null;var p=this.__zr;p&&c.removeSelfFromZr(p),this._doAdd(a)}return this},n.prototype._doAdd=function(a){a.parent&&a.parent.remove(a),a.parent=this;var l=this.__zr;l&&l!==a.__zr&&a.addSelfToZr(l),l&&l.refresh()},n.prototype.remove=function(a){var l=this.__zr,u=this._children,c=indexOf(u,a);return c<0?this:(u.splice(c,1),a.parent=null,l&&a.removeSelfFromZr(l),l&&l.refresh(),this)},n.prototype.removeAll=function(){for(var a=this._children,l=this.__zr,u=0;u<a.length;u++){var c=a[u];l&&c.removeSelfFromZr(l),c.parent=null}return a.length=0,this},n.prototype.eachChild=function(a,l){for(var u=this._children,c=0;c<u.length;c++){var p=u[c];a.call(l,p,c)}return this},n.prototype.traverse=function(a,l){for(var u=0;u<this._children.length;u++){var c=this._children[u],p=a.call(l,c);c.isGroup&&!p&&c.traverse(a,l)}return this},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var l=0;l<this._children.length;l++){var u=this._children[l];u.addSelfToZr(a)}},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var l=0;l<this._children.length;l++){var u=this._children[l];u.removeSelfFromZr(a)}},n.prototype.getBoundingRect=function(a){for(var l=new BoundingRect(0,0,0,0),u=a||this._children,c=[],p=null,d=0;d<u.length;d++){var Q=u[d];if(!(Q.ignore||Q.invisible)){var Ct=Q.getBoundingRect(),ar=Q.getLocalTransform(c);ar?(BoundingRect.applyTransform(l,Ct,ar),p=p||l.clone(),p.union(l)):(p=p||Ct.clone(),p.union(Ct))}}return p||l},n}(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(t){delete instances$1[t]}function isDarkMode(t){if(!t)return!1;if(typeof t=="string")return lum(t,1)<DARK_MODE_THRESHOLD;if(t.colorStops){for(var n=t.colorStops,a=0,l=n.length,u=0;u<l;u++)a+=lum(n[u].color,1);return a/=l,a<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function t(n,a,l){var u=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,l=l||{},this.dom=a,this.id=n;var c=new Storage,p=l.renderer||"canvas";painterCtors[p]||(p=keys(painterCtors)[0]),l.useDirtyRect=l.useDirtyRect==null?!1:l.useDirtyRect;var d=new painterCtors[p](a,c,l,n),Q=l.ssr||d.ssrOnly;this.storage=c,this.painter=d;var Ct=!env.node&&!env.worker&&!Q?new HandlerDomProxy(d.getViewportRoot(),d.root):null,ar=l.useCoarsePointer,en=ar==null||ar==="auto"?env.touchEventsSupported:!!ar,tn=44,on;en&&(on=retrieve2(l.pointerSize,tn)),this.handler=new Handler(c,d,Ct,d.root,on),this.animation=new Animation({stage:{update:Q?null:function(){return u._flush(!0)}}}),Q||this.animation.start()}return t.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},t.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(n,a){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,a),this.refresh())},t.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(n){this._darkMode=n},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(n){var a,l=getTime();this._needsRefresh&&(a=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately());var u=getTime();a?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:u-l})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},t.prototype.findHover=function(n,a){if(!this._disposed)return this.handler.findHover(n,a)},t.prototype.on=function(n,a,l){return this._disposed||this.handler.on(n,a,l),this},t.prototype.off=function(n,a){this._disposed||this.handler.off(n,a)},t.prototype.trigger=function(n,a){this._disposed||this.handler.trigger(n,a)},t.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),a=0;a<n.length;a++)n[a]instanceof Group$3&&n[a].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},t}();function init$2(t,n){var a=new ZRender(guid(),t,n);return instances$1[a.id]=a,a}function dispose$1(t){t.dispose()}function disposeAll(){for(var t in instances$1)instances$1.hasOwnProperty(t)&&instances$1[t].dispose();instances$1={}}function getInstance(t){return instances$1[t]}function registerPainter(t,n){painterCtors[t]=n}var ssrDataGetter;function getElementSSRData(t){if(typeof ssrDataGetter=="function")return ssrDataGetter(t)}function registerSSRDataGetter(t){ssrDataGetter=t}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(t){return t.replace(/^\s+|\s+$/g,"")}function linearMap$2(t,n,a,l){var u=n[0],c=n[1],p=a[0],d=a[1],Q=c-u,Ct=d-p;if(Q===0)return Ct===0?p:(p+d)/2;if(l)if(Q>0){if(t<=u)return p;if(t>=c)return d}else{if(t>=u)return p;if(t<=c)return d}else{if(t===u)return p;if(t===c)return d}return(t-u)/Q*Ct+p}function parsePercent(t,n){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return isString$1(t)?_trim(t).match(/%$/)?parseFloat(t)/100*n:parseFloat(t):t==null?NaN:+t}function round$3(t,n,a){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),t=(+t).toFixed(n),a?t:+t}function asc$2(t){return t.sort(function(n,a){return n-a}),t}function getPrecision(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var n=1,a=0;a<15;a++,n*=10)if(Math.round(t*n)/n===t)return a}return getPrecisionSafe(t)}function getPrecisionSafe(t){var n=t.toString().toLowerCase(),a=n.indexOf("e"),l=a>0?+n.slice(a+1):0,u=a>0?a:n.length,c=n.indexOf("."),p=c<0?0:u-1-c;return Math.max(0,p-l)}function getPixelPrecision(t,n){var a=Math.log,l=Math.LN10,u=Math.floor(a(t[1]-t[0])/l),c=Math.round(a(Math.abs(n[1]-n[0]))/l),p=Math.min(Math.max(-u+c,0),20);return isFinite(p)?p:20}function getPercentWithPrecision(t,n,a){if(!t[n])return 0;var l=getPercentSeats(t,a);return l[n]||0}function getPercentSeats(t,n){var a=reduce(t,function(on,cn){return on+(isNaN(cn)?0:cn)},0);if(a===0)return[];for(var l=Math.pow(10,n),u=map$1(t,function(on){return(isNaN(on)?0:on)/a*l*100}),c=l*100,p=map$1(u,function(on){return Math.floor(on)}),d=reduce(p,function(on,cn){return on+cn},0),Q=map$1(u,function(on,cn){return on-p[cn]});d<c;){for(var Ct=Number.NEGATIVE_INFINITY,ar=null,en=0,tn=Q.length;en<tn;++en)Q[en]>Ct&&(Ct=Q[en],ar=en);++p[ar],Q[ar]=0,++d}return map$1(p,function(on){return on/l})}function addSafe(t,n){var a=Math.max(getPrecision(t),getPrecision(n)),l=t+n;return a>ROUND_SUPPORTED_PRECISION_MAX?l:round$3(l,a)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(t){var n=Math.PI*2;return(t%n+n)%n}function isRadianAroundZero(t){return t>-RADIAN_EPSILON&&t<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(t){if(t instanceof Date)return t;if(isString$1(t)){var n=TIME_REG.exec(t);if(!n)return new Date(NaN);if(n[8]){var a=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(a-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,a,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function quantity(t){return Math.pow(10,quantityExponent(t))}function quantityExponent(t){if(t===0)return 0;var n=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,n)>=10&&n++,n}function nice(t,n){var a=quantityExponent(t),l=Math.pow(10,a),u=t/l,c;return n?u<1.5?c=1:u<2.5?c=2:u<4?c=3:u<7?c=5:c=10:u<1?c=1:u<2?c=2:u<3?c=3:u<5?c=5:c=10,t=c*l,a>=-20?+t.toFixed(a<0?-a:0):t}function quantile(t,n){var a=(t.length-1)*n+1,l=Math.floor(a),u=+t[l-1],c=a-l;return c?u+c*(t[l]-u):u}function reformIntervals(t){t.sort(function(Q,Ct){return d(Q,Ct,0)?-1:1});for(var n=-1/0,a=1,l=0;l<t.length;){for(var u=t[l].interval,c=t[l].close,p=0;p<2;p++)u[p]<=n&&(u[p]=n,c[p]=p?1:1-a),n=u[p],a=c[p];u[0]===u[1]&&c[0]*c[1]!==1?t.splice(l,1):l++}return t;function d(Q,Ct,ar){return Q.interval[ar]<Ct.interval[ar]||Q.interval[ar]===Ct.interval[ar]&&(Q.close[ar]-Ct.close[ar]===(ar?-1:1)||!ar&&d(Q,Ct,1))}}function numericToNumber(t){var n=parseFloat(t);return n==t&&(n!==0||!isString$1(t)||t.indexOf("x")<=0)?n:NaN}function isNumeric(t){return!isNaN(numericToNumber(t))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(t,n){return n===0?t:getGreatestCommonDividor(n,t%n)}function getLeastCommonMultiple(t,n){return t==null?n:n==null?t:t*n/getGreatestCommonDividor(t,n)}function throwError(t){throw new Error(t)}function interpolateNumber(t,n,a){return(n-t)*a+t}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(t){return t instanceof Array?t:t==null?[]:[t]}function defaultEmphasis(t,n,a){if(t){t[n]=t[n]||{},t.emphasis=t.emphasis||{},t.emphasis[n]=t.emphasis[n]||{};for(var l=0,u=a.length;l<u;l++){var c=a[l];!t.emphasis[n].hasOwnProperty(c)&&t[n].hasOwnProperty(c)&&(t.emphasis[n][c]=t[n][c])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(t){return isObject$3(t)&&!isArray$1(t)&&!(t instanceof Date)?t.value:t}function isDataItemOption(t){return isObject$3(t)&&!(t instanceof Array)}function mappingToExists(t,n,a){var l=a==="normalMerge",u=a==="replaceMerge",c=a==="replaceAll";t=t||[],n=(n||[]).slice();var p=createHashMap();each$f(n,function(Q,Ct){if(!isObject$3(Q)){n[Ct]=null;return}});var d=prepareResult(t,p,a);return(l||u)&&mappingById(d,t,p,n),l&&mappingByName(d,n),l||u?mappingByIndex(d,n,u):c&&mappingInReplaceAllMode(d,n),makeIdAndName(d),d}function prepareResult(t,n,a){var l=[];if(a==="replaceAll")return l;for(var u=0;u<t.length;u++){var c=t[u];c&&c.id!=null&&n.set(c.id,u),l.push({existing:a==="replaceMerge"||isComponentIdInternal(c)?null:c,newOption:null,keyInfo:null,brandNew:null})}return l}function mappingById(t,n,a,l){each$f(l,function(u,c){if(!(!u||u.id==null)){var p=makeComparableKey(u.id),d=a.get(p);if(d!=null){var Q=t[d];assert(!Q.newOption,'Duplicated option on id "'+p+'".'),Q.newOption=u,Q.existing=n[d],l[c]=null}}})}function mappingByName(t,n){each$f(n,function(a,l){if(!(!a||a.name==null))for(var u=0;u<t.length;u++){var c=t[u].existing;if(!t[u].newOption&&c&&(c.id==null||a.id==null)&&!isComponentIdInternal(a)&&!isComponentIdInternal(c)&&keyExistAndEqual("name",c,a)){t[u].newOption=a,n[l]=null;return}}})}function mappingByIndex(t,n,a){each$f(n,function(l){if(l){for(var u,c=0;(u=t[c])&&(u.newOption||isComponentIdInternal(u.existing)||u.existing&&l.id!=null&&!keyExistAndEqual("id",l,u.existing));)c++;u?(u.newOption=l,u.brandNew=a):t.push({newOption:l,brandNew:a,existing:null,keyInfo:null}),c++}})}function mappingInReplaceAllMode(t,n){each$f(n,function(a){t.push({newOption:a,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(t){var n=createHashMap();each$f(t,function(a){var l=a.existing;l&&n.set(l.id,a)}),each$f(t,function(a){var l=a.newOption;assert(!l||l.id==null||!n.get(l.id)||n.get(l.id)===a,"id duplicates: "+(l&&l.id)),l&&l.id!=null&&n.set(l.id,a),!a.keyInfo&&(a.keyInfo={})}),each$f(t,function(a,l){var u=a.existing,c=a.newOption,p=a.keyInfo;if(isObject$3(c)){if(p.name=c.name!=null?makeComparableKey(c.name):u?u.name:DUMMY_COMPONENT_NAME_PREFIX+l,u)p.id=makeComparableKey(u.id);else if(c.id!=null)p.id=makeComparableKey(c.id);else{var d=0;do p.id="\0"+p.name+"\0"+d++;while(n.get(p.id))}n.set(p.id,a)}})}function keyExistAndEqual(t,n,a){var l=convertOptionIdName(n[t],null),u=convertOptionIdName(a[t],null);return l!=null&&u!=null&&l===u}function makeComparableKey(t){return convertOptionIdName(t,"")}function convertOptionIdName(t,n){return t==null?n:isString$1(t)?t:isNumber(t)||isStringSafe(t)?t+"":n}function isNameSpecified(t){var n=t.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(t){return t&&t.id!=null&&makeComparableKey(t.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(t){return INTERNAL_COMPONENT_ID_PREFIX+t}function setComponentTypeToKeyInfo(t,n,a){each$f(t,function(l){var u=l.newOption;isObject$3(u)&&(l.keyInfo.mainType=n,l.keyInfo.subType=determineSubType(n,u,l.existing,a))})}function determineSubType(t,n,a,l){var u=n.type?n.type:a?a.subType:l.determineSubType(t,n);return u}function compressBatches(t,n){var a={},l={};return u(t||[],a),u(n||[],l,a),[c(a),c(l)];function u(p,d,Q){for(var Ct=0,ar=p.length;Ct<ar;Ct++){var en=convertOptionIdName(p[Ct].seriesId,null);if(en==null)return;for(var tn=normalizeToArray(p[Ct].dataIndex),on=Q&&Q[en],cn=0,gn=tn.length;cn<gn;cn++){var Cn=tn[cn];on&&on[Cn]?on[Cn]=null:(d[en]||(d[en]={}))[Cn]=1}}}function c(p,d){var Q=[];for(var Ct in p)if(p.hasOwnProperty(Ct)&&p[Ct]!=null)if(d)Q.push(+Ct);else{var ar=c(p[Ct],!0);ar.length&&Q.push({seriesId:Ct,dataIndex:ar})}return Q}}function queryDataIndex(t,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(a){return t.indexOfRawIndex(a)}):t.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(a){return t.indexOfName(a)}):t.indexOfName(n.name)}function makeInner(){var t="__ec_inner_"+innerUniqueIndex++;return function(n){return n[t]||(n[t]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(t,n,a){var l=preParseFinder(n,a),u=l.mainTypeSpecified,c=l.queryOptionMap,p=l.others,d=p,Q=a?a.defaultMainType:null;return!u&&Q&&c.set(Q,{}),c.each(function(Ct,ar){var en=queryReferringComponents(t,ar,Ct,{useDefault:Q===ar,enableAll:a&&a.enableAll!=null?a.enableAll:!0,enableNone:a&&a.enableNone!=null?a.enableNone:!0});d[ar+"Models"]=en.models,d[ar+"Model"]=en.models[0]}),d}function preParseFinder(t,n){var a;if(isString$1(t)){var l={};l[t+"Index"]=0,a=l}else a=t;var u=createHashMap(),c={},p=!1;return each$f(a,function(d,Q){if(Q==="dataIndex"||Q==="dataIndexInside"){c[Q]=d;return}var Ct=Q.match(/^(\w+)(Index|Id|Name)$/)||[],ar=Ct[1],en=(Ct[2]||"").toLowerCase();if(!(!ar||!en||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,ar)<0)){p=p||!!ar;var tn=u.get(ar)||u.set(ar,{});tn[en]=d}}),{mainTypeSpecified:p,queryOptionMap:u,others:c}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(t,n,a,l){l=l||SINGLE_REFERRING;var u=a.index,c=a.id,p=a.name,d={models:null,specified:u!=null||c!=null||p!=null};if(!d.specified){var Q=void 0;return d.models=l.useDefault&&(Q=t.getComponent(n))?[Q]:[],d}return u==="none"||u===!1?(assert(l.enableNone,'`"none"` or `false` is not a valid value on index option.'),d.models=[],d):(u==="all"&&(assert(l.enableAll,'`"all"` is not a valid value on index option.'),u=c=p=null),d.models=t.queryComponents({mainType:n,index:u,id:c,name:p}),d)}function setAttribute(t,n,a){t.setAttribute?t.setAttribute(n,a):t[n]=a}function getAttribute(t,n){return t.getAttribute?t.getAttribute(n):t[n]}function getTooltipRenderMode(t){return t==="auto"?env.domSupported?"html":"richText":t||"html"}function groupData(t,n){var a=createHashMap(),l=[];return each$f(t,function(u){var c=n(u);(a.get(c)||(l.push(c),a.set(c,[]))).push(u)}),{keys:l,buckets:a}}function interpolateRawValues(t,n,a,l,u){var c=n==null||n==="auto";if(l==null)return l;if(isNumber(l)){var p=interpolateNumber(a||0,l,u);return round$3(p,c?Math.max(getPrecision(a||0),getPrecision(l)):n)}else{if(isString$1(l))return u<1?a:l;for(var d=[],Q=a,Ct=l,ar=Math.max(Q?Q.length:0,Ct.length),en=0;en<ar;++en){var tn=t.getDimensionInfo(en);if(tn&&tn.type==="ordinal")d[en]=(u<1&&Q?Q:Ct)[en];else{var on=Q&&Q[en]?Q[en]:0,cn=Ct[en],p=interpolateNumber(on,cn,u);d[en]=round$3(p,c?Math.max(getPrecision(on),getPrecision(cn)):n)}}return d}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(t){var n={main:"",sub:""};if(t){var a=t.split(TYPE_DELIMITER);n.main=a[0]||"",n.sub=a[1]||""}return n}function checkClassType(t){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function isExtendedClass(t){return!!(t&&t[IS_EXTENDED_CLASS])}function enableClassExtend(t,n){t.$constructor=t,t.extend=function(a){var l=this,u;return isESClass(l)?u=function(c){__extends(p,c);function p(){return c.apply(this,arguments)||this}return p}(l):(u=function(){(a.$constructor||l).apply(this,arguments)},inherits(u,this)),extend(u.prototype,a),u[IS_EXTENDED_CLASS]=!0,u.extend=this.extend,u.superCall=superCall,u.superApply=superApply,u.superClass=l,u}}function isESClass(t){return isFunction$1(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function mountExtend(t,n){t.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(t){var n=["__\0is_clz",classBase++].join("_");t.prototype[n]=!0,t.isInstance=function(a){return!!(a&&a[n])}}function superCall(t,n){for(var a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];return this.superClass.prototype[n].apply(t,a)}function superApply(t,n,a){return this.superClass.prototype[n].apply(t,a)}function enableClassManagement(t){var n={};t.registerClass=function(l){var u=l.type||l.prototype.type;if(u){checkClassType(u),l.prototype.type=u;var c=parseClassType(u);if(!c.sub)n[c.main]=l;else if(c.sub!==IS_CONTAINER){var p=a(c);p[c.sub]=l}}return l},t.getClass=function(l,u,c){var p=n[l];if(p&&p[IS_CONTAINER]&&(p=u?p[u]:null),c&&!p)throw new Error(u?"Component "+l+"."+(u||"")+" is used but not imported.":l+".type should be specified.");return p},t.getClassesByMainType=function(l){var u=parseClassType(l),c=[],p=n[u.main];return p&&p[IS_CONTAINER]?each$f(p,function(d,Q){Q!==IS_CONTAINER&&c.push(d)}):c.push(p),c},t.hasClass=function(l){var u=parseClassType(l);return!!n[u.main]},t.getAllClassMainTypes=function(){var l=[];return each$f(n,function(u,c){l.push(c)}),l},t.hasSubTypes=function(l){var u=parseClassType(l),c=n[u.main];return c&&c[IS_CONTAINER]};function a(l){var u=n[l.main];return(!u||!u[IS_CONTAINER])&&(u=n[l.main]={},u[IS_CONTAINER]=!0),u}}function makeStyleMapper(t,n){for(var a=0;a<t.length;a++)t[a][1]||(t[a][1]=t[a][0]);return n=n||!1,function(l,u,c){for(var p={},d=0;d<t.length;d++){var Q=t[d][1];if(!(u&&indexOf(u,Q)>=0||c&&indexOf(c,Q)<0)){var Ct=l.getShallow(Q,n);Ct!=null&&(p[t[d][0]]=Ct)}}return p}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function t(){}return t.prototype.getAreaStyle=function(n,a){return getAreaStyle(this,n,a)},t}(),globalImageCache=new LRU(50);function findExistImage(t){if(typeof t=="string"){var n=globalImageCache.get(t);return n&&n.image}else return t}function createOrUpdateImage(t,n,a,l,u){if(t)if(typeof t=="string"){if(n&&n.__zrImageSrc===t||!a)return n;var c=globalImageCache.get(t),p={hostEl:a,cb:l,cbPayload:u};return c?(n=c.image,!isImageReady(n)&&c.pending.push(p)):(n=platformApi.loadImage(t,imageOnLoad,imageOnLoad),n.__zrImageSrc=t,globalImageCache.put(t,n.__cachedImgObj={image:n,pending:[p]})),n}else return t;else return n}function imageOnLoad(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<t.pending.length;n++){var a=t.pending[n],l=a.cb;l&&l(this,a.cbPayload),a.hostEl.dirty()}t.pending.length=0}function isImageReady(t){return t&&t.width&&t.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(t,n,a,l,u){var c={};return truncateText2(c,t,n,a,l,u),c.text}function truncateText2(t,n,a,l,u,c){if(!a){t.text="",t.isTruncated=!1;return}var p=(n+"").split(`
`);c=prepareTruncateOptions(a,l,u,c);for(var d=!1,Q={},Ct=0,ar=p.length;Ct<ar;Ct++)truncateSingleLine(Q,p[Ct],c),p[Ct]=Q.textLine,d=d||Q.isTruncated;t.text=p.join(`
`),t.isTruncated=d}function prepareTruncateOptions(t,n,a,l){l=l||{};var u=extend({},l);u.font=n,a=retrieve2(a,"..."),u.maxIterations=retrieve2(l.maxIterations,2);var c=u.minChar=retrieve2(l.minChar,0);u.cnCharWidth=getWidth("",n);var p=u.ascCharWidth=getWidth("a",n);u.placeholder=retrieve2(l.placeholder,"");for(var d=t=Math.max(0,t-1),Q=0;Q<c&&d>=p;Q++)d-=p;var Ct=getWidth(a,n);return Ct>d&&(a="",Ct=0),d=t-Ct,u.ellipsis=a,u.ellipsisWidth=Ct,u.contentWidth=d,u.containerWidth=t,u}function truncateSingleLine(t,n,a){var l=a.containerWidth,u=a.font,c=a.contentWidth;if(!l){t.textLine="",t.isTruncated=!1;return}var p=getWidth(n,u);if(p<=l){t.textLine=n,t.isTruncated=!1;return}for(var d=0;;d++){if(p<=c||d>=a.maxIterations){n+=a.ellipsis;break}var Q=d===0?estimateLength(n,c,a.ascCharWidth,a.cnCharWidth):p>0?Math.floor(n.length*c/p):0;n=n.substr(0,Q),p=getWidth(n,u)}n===""&&(n=a.placeholder),t.textLine=n,t.isTruncated=!0}function estimateLength(t,n,a,l){for(var u=0,c=0,p=t.length;c<p&&u<n;c++){var d=t.charCodeAt(c);u+=0<=d&&d<=127?a:l}return c}function parsePlainText(t,n){t!=null&&(t+="");var a=n.overflow,l=n.padding,u=n.font,c=a==="truncate",p=getLineHeight(u),d=retrieve2(n.lineHeight,p),Q=!!n.backgroundColor,Ct=n.lineOverflow==="truncate",ar=!1,en=n.width,tn;en!=null&&(a==="break"||a==="breakAll")?tn=t?wrapText(t,n.font,en,a==="breakAll",0).lines:[]:tn=t?t.split(`
`):[];var on=tn.length*d,cn=retrieve2(n.height,on);if(on>cn&&Ct){var gn=Math.floor(cn/d);ar=ar||tn.length>gn,tn=tn.slice(0,gn)}if(t&&c&&en!=null)for(var Cn=prepareTruncateOptions(en,u,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),ex={},ix=0;ix<tn.length;ix++)truncateSingleLine(ex,tn[ix],Cn),tn[ix]=ex.textLine,ar=ar||ex.isTruncated;for(var ax=cn,ox=0,ix=0;ix<tn.length;ix++)ox=Math.max(getWidth(tn[ix],u),ox);en==null&&(en=ox);var lx=ox;return l&&(ax+=l[0]+l[2],lx+=l[1]+l[3],en+=l[1]+l[3]),Q&&(lx=en),{lines:tn,height:cn,outerWidth:lx,outerHeight:ax,lineHeight:d,calculatedLineHeight:p,contentWidth:ox,contentHeight:on,width:en,isTruncated:ar}}var RichTextToken=function(){function t(){}return t}(),RichTextLine=function(){function t(n){this.tokens=[],n&&(this.tokens=n)}return t}(),RichTextContentBlock=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t}();function parseRichText(t,n){var a=new RichTextContentBlock;if(t!=null&&(t+=""),!t)return a;for(var l=n.width,u=n.height,c=n.overflow,p=(c==="break"||c==="breakAll")&&l!=null?{width:l,accumWidth:0,breakAll:c==="breakAll"}:null,d=STYLE_REG.lastIndex=0,Q;(Q=STYLE_REG.exec(t))!=null;){var Ct=Q.index;Ct>d&&pushTokens(a,t.substring(d,Ct),n,p),pushTokens(a,Q[2],n,p,Q[1]),d=STYLE_REG.lastIndex}d<t.length&&pushTokens(a,t.substring(d,t.length),n,p);var ar=[],en=0,tn=0,on=n.padding,cn=c==="truncate",gn=n.lineOverflow==="truncate",Cn={};function ex(Tx,Px,Fx){Tx.width=Px,Tx.lineHeight=Fx,en+=Fx,tn=Math.max(tn,Px)}e:for(var ix=0;ix<a.lines.length;ix++){for(var ax=a.lines[ix],ox=0,lx=0,cx=0;cx<ax.tokens.length;cx++){var dx=ax.tokens[cx],hx=dx.styleName&&n.rich[dx.styleName]||{},fx=dx.textPadding=hx.padding,ux=fx?fx[1]+fx[3]:0,gx=dx.font=hx.font||n.font;dx.contentHeight=getLineHeight(gx);var yx=retrieve2(hx.height,dx.contentHeight);if(dx.innerHeight=yx,fx&&(yx+=fx[0]+fx[2]),dx.height=yx,dx.lineHeight=retrieve3(hx.lineHeight,n.lineHeight,yx),dx.align=hx&&hx.align||n.align,dx.verticalAlign=hx&&hx.verticalAlign||"middle",gn&&u!=null&&en+dx.lineHeight>u){var _x=a.lines.length;cx>0?(ax.tokens=ax.tokens.slice(0,cx),ex(ax,lx,ox),a.lines=a.lines.slice(0,ix+1)):a.lines=a.lines.slice(0,ix),a.isTruncated=a.isTruncated||a.lines.length<_x;break e}var vx=hx.width,bx=vx==null||vx==="auto";if(typeof vx=="string"&&vx.charAt(vx.length-1)==="%")dx.percentWidth=vx,ar.push(dx),dx.contentWidth=getWidth(dx.text,gx);else{if(bx){var xx=hx.backgroundColor,Sx=xx&&xx.image;Sx&&(Sx=findExistImage(Sx),isImageReady(Sx)&&(dx.width=Math.max(dx.width,Sx.width*yx/Sx.height)))}var Ax=cn&&l!=null?l-lx:null;Ax!=null&&Ax<dx.width?!bx||Ax<ux?(dx.text="",dx.width=dx.contentWidth=0):(truncateText2(Cn,dx.text,Ax-ux,gx,n.ellipsis,{minChar:n.truncateMinChar}),dx.text=Cn.text,a.isTruncated=a.isTruncated||Cn.isTruncated,dx.width=dx.contentWidth=getWidth(dx.text,gx)):dx.contentWidth=getWidth(dx.text,gx)}dx.width+=ux,lx+=dx.width,hx&&(ox=Math.max(ox,dx.lineHeight))}ex(ax,lx,ox)}a.outerWidth=a.width=retrieve2(l,tn),a.outerHeight=a.height=retrieve2(u,en),a.contentHeight=en,a.contentWidth=tn,on&&(a.outerWidth+=on[1]+on[3],a.outerHeight+=on[0]+on[2]);for(var ix=0;ix<ar.length;ix++){var dx=ar[ix],Cx=dx.percentWidth;dx.width=parseInt(Cx,10)/100*a.width}return a}function pushTokens(t,n,a,l,u){var c=n==="",p=u&&a.rich[u]||{},d=t.lines,Q=p.font||a.font,Ct=!1,ar,en;if(l){var tn=p.padding,on=tn?tn[1]+tn[3]:0;if(p.width!=null&&p.width!=="auto"){var cn=parsePercent$1(p.width,l.width)+on;d.length>0&&cn+l.accumWidth>l.width&&(ar=n.split(`
`),Ct=!0),l.accumWidth=cn}else{var gn=wrapText(n,Q,l.width,l.breakAll,l.accumWidth);l.accumWidth=gn.accumWidth+on,en=gn.linesWidths,ar=gn.lines}}else ar=n.split(`
`);for(var Cn=0;Cn<ar.length;Cn++){var ex=ar[Cn],ix=new RichTextToken;if(ix.styleName=u,ix.text=ex,ix.isLineHolder=!ex&&!c,typeof p.width=="number"?ix.width=p.width:ix.width=en?en[Cn]:getWidth(ex,Q),!Cn&&!Ct){var ax=(d[d.length-1]||(d[0]=new RichTextLine)).tokens,ox=ax.length;ox===1&&ax[0].isLineHolder?ax[0]=ix:(ex||!ox||c)&&ax.push(ix)}else d.push(new RichTextLine([ix]))}}function isAlphabeticLetter(t){var n=t.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(t,n){return t[n]=!0,t},{});function isWordBreakChar(t){return isAlphabeticLetter(t)?!!breakCharMap[t]:!0}function wrapText(t,n,a,l,u){for(var c=[],p=[],d="",Q="",Ct=0,ar=0,en=0;en<t.length;en++){var tn=t.charAt(en);if(tn===`
`){Q&&(d+=Q,ar+=Ct),c.push(d),p.push(ar),d="",Q="",Ct=0,ar=0;continue}var on=getWidth(tn,n),cn=l?!1:!isWordBreakChar(tn);if(c.length?ar+on>a:u+ar+on>a){ar?(d||Q)&&(cn?(d||(d=Q,Q="",Ct=0,ar=Ct),c.push(d),p.push(ar-Ct),Q+=tn,Ct+=on,d="",ar=Ct):(Q&&(d+=Q,Q="",Ct=0),c.push(d),p.push(ar),d=tn,ar=on)):cn?(c.push(Q),p.push(Ct),Q=tn,Ct=on):(c.push(tn),p.push(on));continue}ar+=on,cn?(Q+=tn,Ct+=on):(Q&&(d+=Q,Q="",Ct=0),d+=tn)}return!c.length&&!d&&(d=t,Q="",Ct=0),Q&&(d+=Q),d&&(c.push(d),p.push(ar)),c.length===1&&(ar+=u),{accumWidth:ar,lines:c,linesWidths:p}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype._init=function(a){for(var l=keys(a),u=0;u<l.length;u++){var c=l[u];c==="style"?this.useStyle(a[c]):t.prototype.attrKV.call(this,c,a[c])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(a,l,u,c){var p=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,a,l)||p&&!p[0]&&!p[3])return!1;if(u&&this.__clipPaths){for(var d=0;d<this.__clipPaths.length;++d)if(this.__clipPaths[d].isZeroArea())return!1}if(c&&this.parent)for(var Q=this.parent;Q;){if(Q.ignore)return!1;Q=Q.parent}return!0},n.prototype.contain=function(a,l){return this.rectContain(a,l)},n.prototype.traverse=function(a,l){a.call(l,this)},n.prototype.rectContain=function(a,l){var u=this.transformCoordToLocal(a,l),c=this.getBoundingRect();return c.contain(u[0],u[1])},n.prototype.getPaintRect=function(){var a=this._paintRect;if(!this._paintRect||this.__dirty){var l=this.transform,u=this.getBoundingRect(),c=this.style,p=c.shadowBlur||0,d=c.shadowOffsetX||0,Q=c.shadowOffsetY||0;a=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),l?BoundingRect.applyTransform(a,u,l):a.copy(u),(p||d||Q)&&(a.width+=p*2+Math.abs(d),a.height+=p*2+Math.abs(Q),a.x=Math.min(a.x,a.x+d-p),a.y=Math.min(a.y,a.y+Q-p));var Ct=this.dirtyRectTolerance;a.isZero()||(a.x=Math.floor(a.x-Ct),a.y=Math.floor(a.y-Ct),a.width=Math.ceil(a.width+1+Ct*2),a.height=Math.ceil(a.height+1+Ct*2))}return a},n.prototype.setPrevPaintRect=function(a){a?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(a)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(a){return this.animate("style",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(a,l){a!=="style"?t.prototype.attrKV.call(this,a,l):this.style?this.setStyle(l):this.useStyle(l)},n.prototype.setStyle=function(a,l){return typeof a=="string"?this.style[a]=l:extend(this.style,a),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(a){a||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(a){return createObject(DEFAULT_COMMON_STYLE,a)},n.prototype.useStyle=function(a){a[STYLE_MAGIC_KEY]||(a=this.createStyle(a)),this.__inHover?this.__hoverStyle=a:this.style=a,this.dirtyStyle()},n.prototype.isStyleObject=function(a){return a[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var l=this._normalState;a.style&&!l.style&&(l.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(a,l,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(a,l,u,c,p,d){t.prototype._applyStateObj.call(this,a,l,u,c,p,d);var Q=!(l&&c),Ct;if(l&&l.style?p?c?Ct=l.style:(Ct=this._mergeStyle(this.createStyle(),u.style),this._mergeStyle(Ct,l.style)):(Ct=this._mergeStyle(this.createStyle(),c?this.style:u.style),this._mergeStyle(Ct,l.style)):Q&&(Ct=u.style),Ct)if(p){var ar=this.style;if(this.style=this.createStyle(Q?{}:ar),Q)for(var en=keys(ar),tn=0;tn<en.length;tn++){var on=en[tn];on in Ct&&(Ct[on]=Ct[on],this.style[on]=ar[on])}for(var cn=keys(Ct),tn=0;tn<cn.length;tn++){var on=cn[tn];this.style[on]=this.style[on]}this._transitionState(a,{style:Ct},d,this.getAnimationStyleProps())}else this.useStyle(Ct);for(var gn=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,tn=0;tn<gn.length;tn++){var on=gn[tn];l&&l[on]!=null?this[on]=l[on]:Q&&u[on]!=null&&(this[on]=u[on])}},n.prototype._mergeStates=function(a){for(var l=t.prototype._mergeStates.call(this,a),u,c=0;c<a.length;c++){var p=a[c];p.style&&(u=u||{},this._mergeStyle(u,p.style))}return u&&(l.style=u),l},n.prototype._mergeStyle=function(a,l){return extend(a,l),a},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=function(){var a=n.prototype;a.type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),n}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(t,n,a){return tmpRect.copy(t.getBoundingRect()),t.transform&&tmpRect.applyTransform(t.transform),viewRect.width=n,viewRect.height=a,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(t,n,a){if(t.length!==0){for(var l=t[0],u=l[0],c=l[0],p=l[1],d=l[1],Q=1;Q<t.length;Q++)l=t[Q],u=mathMin$9(u,l[0]),c=mathMax$9(c,l[0]),p=mathMin$9(p,l[1]),d=mathMax$9(d,l[1]);n[0]=u,n[1]=p,a[0]=c,a[1]=d}}function fromLine(t,n,a,l,u,c){u[0]=mathMin$9(t,a),u[1]=mathMin$9(n,l),c[0]=mathMax$9(t,a),c[1]=mathMax$9(n,l)}var xDim=[],yDim=[];function fromCubic(t,n,a,l,u,c,p,d,Q,Ct){var ar=cubicExtrema,en=cubicAt,tn=ar(t,a,u,p,xDim);Q[0]=1/0,Q[1]=1/0,Ct[0]=-1/0,Ct[1]=-1/0;for(var on=0;on<tn;on++){var cn=en(t,a,u,p,xDim[on]);Q[0]=mathMin$9(cn,Q[0]),Ct[0]=mathMax$9(cn,Ct[0])}tn=ar(n,l,c,d,yDim);for(var on=0;on<tn;on++){var gn=en(n,l,c,d,yDim[on]);Q[1]=mathMin$9(gn,Q[1]),Ct[1]=mathMax$9(gn,Ct[1])}Q[0]=mathMin$9(t,Q[0]),Ct[0]=mathMax$9(t,Ct[0]),Q[0]=mathMin$9(p,Q[0]),Ct[0]=mathMax$9(p,Ct[0]),Q[1]=mathMin$9(n,Q[1]),Ct[1]=mathMax$9(n,Ct[1]),Q[1]=mathMin$9(d,Q[1]),Ct[1]=mathMax$9(d,Ct[1])}function fromQuadratic(t,n,a,l,u,c,p,d){var Q=quadraticExtremum,Ct=quadraticAt$1,ar=mathMax$9(mathMin$9(Q(t,a,u),1),0),en=mathMax$9(mathMin$9(Q(n,l,c),1),0),tn=Ct(t,a,u,ar),on=Ct(n,l,c,en);p[0]=mathMin$9(t,u,tn),p[1]=mathMin$9(n,c,on),d[0]=mathMax$9(t,u,tn),d[1]=mathMax$9(n,c,on)}function fromArc(t,n,a,l,u,c,p,d,Q){var Ct=min$1,ar=max$1,en=Math.abs(u-c);if(en%PI2$8<1e-4&&en>1e-4){d[0]=t-a,d[1]=n-l,Q[0]=t+a,Q[1]=n+l;return}if(start[0]=mathCos$4(u)*a+t,start[1]=mathSin$4(u)*l+n,end[0]=mathCos$4(c)*a+t,end[1]=mathSin$4(c)*l+n,Ct(d,start,end),ar(Q,start,end),u=u%PI2$8,u<0&&(u=u+PI2$8),c=c%PI2$8,c<0&&(c=c+PI2$8),u>c&&!p?c+=PI2$8:u<c&&p&&(u+=PI2$8),p){var tn=c;c=u,u=tn}for(var on=0;on<c;on+=Math.PI/2)on>u&&(extremity[0]=mathCos$4(on)*a+t,extremity[1]=mathSin$4(on)*l+n,Ct(d,extremity,d),ar(Q,extremity,Q))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(t){var n=Math.round(t/PI$8*1e8)/1e8;return n%2*PI$8}function normalizeArcAngles(t,n){var a=modPI2(t[0]);a<0&&(a+=PI2$7);var l=a-t[0],u=t[1];u+=l,!n&&u-a>=PI2$7?u=a+PI2$7:n&&a-u>=PI2$7?u=a-PI2$7:!n&&a>u?u=a+(PI2$7-modPI2(a-u)):n&&a<u&&(u=a-(PI2$7-modPI2(u-a))),t[0]=a,t[1]=u}var PathProxy=function(){function t(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(n,a,l){l=l||0,l>0&&(this._ux=mathAbs$2(l/devicePixelRatio/n)||0,this._uy=mathAbs$2(l/devicePixelRatio/a)||0)},t.prototype.setDPR=function(n){this.dpr=n},t.prototype.setContext=function(n){this._ctx=n},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(n,a){return this._drawPendingPt(),this.addData(CMD$4.M,n,a),this._ctx&&this._ctx.moveTo(n,a),this._x0=n,this._y0=a,this._xi=n,this._yi=a,this},t.prototype.lineTo=function(n,a){var l=mathAbs$2(n-this._xi),u=mathAbs$2(a-this._yi),c=l>this._ux||u>this._uy;if(this.addData(CMD$4.L,n,a),this._ctx&&c&&this._ctx.lineTo(n,a),c)this._xi=n,this._yi=a,this._pendingPtDist=0;else{var p=l*l+u*u;p>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=a,this._pendingPtDist=p)}return this},t.prototype.bezierCurveTo=function(n,a,l,u,c,p){return this._drawPendingPt(),this.addData(CMD$4.C,n,a,l,u,c,p),this._ctx&&this._ctx.bezierCurveTo(n,a,l,u,c,p),this._xi=c,this._yi=p,this},t.prototype.quadraticCurveTo=function(n,a,l,u){return this._drawPendingPt(),this.addData(CMD$4.Q,n,a,l,u),this._ctx&&this._ctx.quadraticCurveTo(n,a,l,u),this._xi=l,this._yi=u,this},t.prototype.arc=function(n,a,l,u,c,p){this._drawPendingPt(),tmpAngles[0]=u,tmpAngles[1]=c,normalizeArcAngles(tmpAngles,p),u=tmpAngles[0],c=tmpAngles[1];var d=c-u;return this.addData(CMD$4.A,n,a,l,l,u,d,0,p?0:1),this._ctx&&this._ctx.arc(n,a,l,u,c,p),this._xi=mathCos$3(c)*l+n,this._yi=mathSin$3(c)*l+a,this},t.prototype.arcTo=function(n,a,l,u,c){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,a,l,u,c),this},t.prototype.rect=function(n,a,l,u){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,a,l,u),this.addData(CMD$4.R,n,a,l,u),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var n=this._ctx,a=this._x0,l=this._y0;return n&&n.closePath(),this._xi=a,this._yi=l,this},t.prototype.fill=function(n){n&&n.fill(),this.toStatic()},t.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(n){var a=n.length;!(this.data&&this.data.length===a)&&hasTypedArray&&(this.data=new Float32Array(a));for(var l=0;l<a;l++)this.data[l]=n[l];this._len=a},t.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var a=n.length,l=0,u=this._len,c=0;c<a;c++)l+=n[c].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(u+l));for(var c=0;c<a;c++)for(var p=n[c].data,d=0;d<p.length;d++)this.data[u++]=p[d];this._len=u},t.prototype.addData=function(n,a,l,u,c,p,d,Q,Ct){if(this._saveData){var ar=this.data;this._len+arguments.length>ar.length&&(this._expandData(),ar=this.data);for(var en=0;en<arguments.length;en++)ar[this._len++]=arguments[en]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],a=0;a<this._len;a++)n[a]=this.data[a];this.data=n}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},t.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,a=0,l=0,u=0,c=0,p;for(p=0;p<this._len;){var d=n[p++],Q=p===1;switch(Q&&(a=n[p],l=n[p+1],u=a,c=l),d){case CMD$4.M:a=u=n[p++],l=c=n[p++],min2[0]=u,min2[1]=c,max2[0]=u,max2[1]=c;break;case CMD$4.L:fromLine(a,l,n[p],n[p+1],min2,max2),a=n[p++],l=n[p++];break;case CMD$4.C:fromCubic(a,l,n[p++],n[p++],n[p++],n[p++],n[p],n[p+1],min2,max2),a=n[p++],l=n[p++];break;case CMD$4.Q:fromQuadratic(a,l,n[p++],n[p++],n[p],n[p+1],min2,max2),a=n[p++],l=n[p++];break;case CMD$4.A:var Ct=n[p++],ar=n[p++],en=n[p++],tn=n[p++],on=n[p++],cn=n[p++]+on;p+=1;var gn=!n[p++];Q&&(u=mathCos$3(on)*en+Ct,c=mathSin$3(on)*tn+ar),fromArc(Ct,ar,en,tn,on,cn,gn,min2,max2),a=mathCos$3(cn)*en+Ct,l=mathSin$3(cn)*tn+ar;break;case CMD$4.R:u=a=n[p++],c=l=n[p++];var Cn=n[p++],ex=n[p++];fromLine(u,c,u+Cn,c+ex,min2,max2);break;case CMD$4.Z:a=u,l=c;break}min$1(min,min,min2),max$1(max,max,max2)}return p===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},t.prototype._calculateLength=function(){var n=this.data,a=this._len,l=this._ux,u=this._uy,c=0,p=0,d=0,Q=0;this._pathSegLen||(this._pathSegLen=[]);for(var Ct=this._pathSegLen,ar=0,en=0,tn=0;tn<a;){var on=n[tn++],cn=tn===1;cn&&(c=n[tn],p=n[tn+1],d=c,Q=p);var gn=-1;switch(on){case CMD$4.M:c=d=n[tn++],p=Q=n[tn++];break;case CMD$4.L:{var Cn=n[tn++],ex=n[tn++],ix=Cn-c,ax=ex-p;(mathAbs$2(ix)>l||mathAbs$2(ax)>u||tn===a-1)&&(gn=Math.sqrt(ix*ix+ax*ax),c=Cn,p=ex);break}case CMD$4.C:{var ox=n[tn++],lx=n[tn++],Cn=n[tn++],ex=n[tn++],cx=n[tn++],dx=n[tn++];gn=cubicLength(c,p,ox,lx,Cn,ex,cx,dx,10),c=cx,p=dx;break}case CMD$4.Q:{var ox=n[tn++],lx=n[tn++],Cn=n[tn++],ex=n[tn++];gn=quadraticLength(c,p,ox,lx,Cn,ex,10),c=Cn,p=ex;break}case CMD$4.A:var hx=n[tn++],fx=n[tn++],ux=n[tn++],gx=n[tn++],yx=n[tn++],_x=n[tn++],vx=_x+yx;tn+=1,cn&&(d=mathCos$3(yx)*ux+hx,Q=mathSin$3(yx)*gx+fx),gn=mathMax$8(ux,gx)*mathMin$8(PI2$7,Math.abs(_x)),c=mathCos$3(vx)*ux+hx,p=mathSin$3(vx)*gx+fx;break;case CMD$4.R:{d=c=n[tn++],Q=p=n[tn++];var bx=n[tn++],xx=n[tn++];gn=bx*2+xx*2;break}case CMD$4.Z:{var ix=d-c,ax=Q-p;gn=Math.sqrt(ix*ix+ax*ax),c=d,p=Q;break}}gn>=0&&(Ct[en++]=gn,ar+=gn)}return this._pathLen=ar,ar},t.prototype.rebuildPath=function(n,a){var l=this.data,u=this._ux,c=this._uy,p=this._len,d,Q,Ct,ar,en,tn,on=a<1,cn,gn,Cn=0,ex=0,ix,ax=0,ox,lx;if(!(on&&(this._pathSegLen||this._calculateLength(),cn=this._pathSegLen,gn=this._pathLen,ix=a*gn,!ix)))e:for(var cx=0;cx<p;){var dx=l[cx++],hx=cx===1;switch(hx&&(Ct=l[cx],ar=l[cx+1],d=Ct,Q=ar),dx!==CMD$4.L&&ax>0&&(n.lineTo(ox,lx),ax=0),dx){case CMD$4.M:d=Ct=l[cx++],Q=ar=l[cx++],n.moveTo(Ct,ar);break;case CMD$4.L:{en=l[cx++],tn=l[cx++];var fx=mathAbs$2(en-Ct),ux=mathAbs$2(tn-ar);if(fx>u||ux>c){if(on){var gx=cn[ex++];if(Cn+gx>ix){var yx=(ix-Cn)/gx;n.lineTo(Ct*(1-yx)+en*yx,ar*(1-yx)+tn*yx);break e}Cn+=gx}n.lineTo(en,tn),Ct=en,ar=tn,ax=0}else{var _x=fx*fx+ux*ux;_x>ax&&(ox=en,lx=tn,ax=_x)}break}case CMD$4.C:{var vx=l[cx++],bx=l[cx++],xx=l[cx++],Sx=l[cx++],Ax=l[cx++],Cx=l[cx++];if(on){var gx=cn[ex++];if(Cn+gx>ix){var yx=(ix-Cn)/gx;cubicSubdivide(Ct,vx,xx,Ax,yx,tmpOutX),cubicSubdivide(ar,bx,Sx,Cx,yx,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}Cn+=gx}n.bezierCurveTo(vx,bx,xx,Sx,Ax,Cx),Ct=Ax,ar=Cx;break}case CMD$4.Q:{var vx=l[cx++],bx=l[cx++],xx=l[cx++],Sx=l[cx++];if(on){var gx=cn[ex++];if(Cn+gx>ix){var yx=(ix-Cn)/gx;quadraticSubdivide(Ct,vx,xx,yx,tmpOutX),quadraticSubdivide(ar,bx,Sx,yx,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}Cn+=gx}n.quadraticCurveTo(vx,bx,xx,Sx),Ct=xx,ar=Sx;break}case CMD$4.A:var Tx=l[cx++],Px=l[cx++],Fx=l[cx++],Mx=l[cx++],Dx=l[cx++],Ox=l[cx++],Lx=l[cx++],Nx=!l[cx++],Gx=Fx>Mx?Fx:Mx,Ux=mathAbs$2(Fx-Mx)>.001,Hx=Dx+Ox,Vx=!1;if(on){var gx=cn[ex++];Cn+gx>ix&&(Hx=Dx+Ox*(ix-Cn)/gx,Vx=!0),Cn+=gx}if(Ux&&n.ellipse?n.ellipse(Tx,Px,Fx,Mx,Lx,Dx,Hx,Nx):n.arc(Tx,Px,Gx,Dx,Hx,Nx),Vx)break e;hx&&(d=mathCos$3(Dx)*Fx+Tx,Q=mathSin$3(Dx)*Mx+Px),Ct=mathCos$3(Hx)*Fx+Tx,ar=mathSin$3(Hx)*Mx+Px;break;case CMD$4.R:d=Ct=l[cx],Q=ar=l[cx+1],en=l[cx++],tn=l[cx++];var zx=l[cx++],rE=l[cx++];if(on){var gx=cn[ex++];if(Cn+gx>ix){var Zx=ix-Cn;n.moveTo(en,tn),n.lineTo(en+mathMin$8(Zx,zx),tn),Zx-=zx,Zx>0&&n.lineTo(en+zx,tn+mathMin$8(Zx,rE)),Zx-=rE,Zx>0&&n.lineTo(en+mathMax$8(zx-Zx,0),tn+rE),Zx-=zx,Zx>0&&n.lineTo(en,tn+mathMax$8(rE-Zx,0));break e}Cn+=gx}n.rect(en,tn,zx,rE);break;case CMD$4.Z:if(on){var gx=cn[ex++];if(Cn+gx>ix){var yx=(ix-Cn)/gx;n.lineTo(Ct*(1-yx)+d*yx,ar*(1-yx)+Q*yx);break e}Cn+=gx}n.closePath(),Ct=d,ar=Q}}},t.prototype.clone=function(){var n=new t,a=this.data;return n.data=a.slice?a.slice():Array.prototype.slice.call(a),n._len=this._len,n},t.CMD=CMD$4,t.initDefaultProps=function(){var n=t.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0}(),t}();function containStroke$4(t,n,a,l,u,c,p){if(u===0)return!1;var d=u,Q=0,Ct=t;if(p>n+d&&p>l+d||p<n-d&&p<l-d||c>t+d&&c>a+d||c<t-d&&c<a-d)return!1;if(t!==a)Q=(n-l)/(t-a),Ct=(t*l-a*n)/(t-a);else return Math.abs(c-t)<=d/2;var ar=Q*c-p+Ct,en=ar*ar/(Q*Q+1);return en<=d/2*d/2}function containStroke$3(t,n,a,l,u,c,p,d,Q,Ct,ar){if(Q===0)return!1;var en=Q;if(ar>n+en&&ar>l+en&&ar>c+en&&ar>d+en||ar<n-en&&ar<l-en&&ar<c-en&&ar<d-en||Ct>t+en&&Ct>a+en&&Ct>u+en&&Ct>p+en||Ct<t-en&&Ct<a-en&&Ct<u-en&&Ct<p-en)return!1;var tn=cubicProjectPoint(t,n,a,l,u,c,p,d,Ct,ar,null);return tn<=en/2}function containStroke$2(t,n,a,l,u,c,p,d,Q){if(p===0)return!1;var Ct=p;if(Q>n+Ct&&Q>l+Ct&&Q>c+Ct||Q<n-Ct&&Q<l-Ct&&Q<c-Ct||d>t+Ct&&d>a+Ct&&d>u+Ct||d<t-Ct&&d<a-Ct&&d<u-Ct)return!1;var ar=quadraticProjectPoint(t,n,a,l,u,c,d,Q,null);return ar<=Ct/2}var PI2$6=Math.PI*2;function normalizeRadian(t){return t%=PI2$6,t<0&&(t+=PI2$6),t}var PI2$5=Math.PI*2;function containStroke$1(t,n,a,l,u,c,p,d,Q){if(p===0)return!1;var Ct=p;d-=t,Q-=n;var ar=Math.sqrt(d*d+Q*Q);if(ar-Ct>a||ar+Ct<a)return!1;if(Math.abs(l-u)%PI2$5<1e-4)return!0;if(c){var en=l;l=normalizeRadian(u),u=normalizeRadian(en)}else l=normalizeRadian(l),u=normalizeRadian(u);l>u&&(u+=PI2$5);var tn=Math.atan2(Q,d);return tn<0&&(tn+=PI2$5),tn>=l&&tn<=u||tn+PI2$5>=l&&tn+PI2$5<=u}function windingLine(t,n,a,l,u,c){if(c>n&&c>l||c<n&&c<l||l===n)return 0;var p=(c-n)/(l-n),d=l<n?1:-1;(p===1||p===0)&&(d=l<n?.5:-.5);var Q=p*(a-t)+t;return Q===u?1/0:Q>u?d:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(t,n){return Math.abs(t-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var t=extrema[0];extrema[0]=extrema[1],extrema[1]=t}function windingCubic(t,n,a,l,u,c,p,d,Q,Ct){if(Ct>n&&Ct>l&&Ct>c&&Ct>d||Ct<n&&Ct<l&&Ct<c&&Ct<d)return 0;var ar=cubicRootAt(n,l,c,d,Ct,roots);if(ar===0)return 0;for(var en=0,tn=-1,on=void 0,cn=void 0,gn=0;gn<ar;gn++){var Cn=roots[gn],ex=Cn===0||Cn===1?.5:1,ix=cubicAt(t,a,u,p,Cn);ix<Q||(tn<0&&(tn=cubicExtrema(n,l,c,d,extrema),extrema[1]<extrema[0]&&tn>1&&swapExtrema(),on=cubicAt(n,l,c,d,extrema[0]),tn>1&&(cn=cubicAt(n,l,c,d,extrema[1]))),tn===2?Cn<extrema[0]?en+=on<n?ex:-ex:Cn<extrema[1]?en+=cn<on?ex:-ex:en+=d<cn?ex:-ex:Cn<extrema[0]?en+=on<n?ex:-ex:en+=d<on?ex:-ex)}return en}function windingQuadratic(t,n,a,l,u,c,p,d){if(d>n&&d>l&&d>c||d<n&&d<l&&d<c)return 0;var Q=quadraticRootAt(n,l,c,d,roots);if(Q===0)return 0;var Ct=quadraticExtremum(n,l,c);if(Ct>=0&&Ct<=1){for(var ar=0,en=quadraticAt$1(n,l,c,Ct),tn=0;tn<Q;tn++){var on=roots[tn]===0||roots[tn]===1?.5:1,cn=quadraticAt$1(t,a,u,roots[tn]);cn<p||(roots[tn]<Ct?ar+=en<n?on:-on:ar+=c<en?on:-on)}return ar}else{var on=roots[0]===0||roots[0]===1?.5:1,cn=quadraticAt$1(t,a,u,roots[0]);return cn<p?0:c<n?on:-on}}function windingArc(t,n,a,l,u,c,p,d){if(d-=n,d>a||d<-a)return 0;var Q=Math.sqrt(a*a-d*d);roots[0]=-Q,roots[1]=Q;var Ct=Math.abs(l-u);if(Ct<1e-4)return 0;if(Ct>=PI2$4-1e-4){l=0,u=PI2$4;var ar=c?1:-1;return p>=roots[0]+t&&p<=roots[1]+t?ar:0}if(l>u){var en=l;l=u,u=en}l<0&&(l+=PI2$4,u+=PI2$4);for(var tn=0,on=0;on<2;on++){var cn=roots[on];if(cn+t>p){var gn=Math.atan2(d,cn),ar=c?1:-1;gn<0&&(gn=PI2$4+gn),(gn>=l&&gn<=u||gn+PI2$4>=l&&gn+PI2$4<=u)&&(gn>Math.PI/2&&gn<Math.PI*1.5&&(ar=-ar),tn+=ar)}}return tn}function containPath(t,n,a,l,u){for(var c=t.data,p=t.len(),d=0,Q=0,Ct=0,ar=0,en=0,tn,on,cn=0;cn<p;){var gn=c[cn++],Cn=cn===1;switch(gn===CMD$3.M&&cn>1&&(a||(d+=windingLine(Q,Ct,ar,en,l,u))),Cn&&(Q=c[cn],Ct=c[cn+1],ar=Q,en=Ct),gn){case CMD$3.M:ar=c[cn++],en=c[cn++],Q=ar,Ct=en;break;case CMD$3.L:if(a){if(containStroke$4(Q,Ct,c[cn],c[cn+1],n,l,u))return!0}else d+=windingLine(Q,Ct,c[cn],c[cn+1],l,u)||0;Q=c[cn++],Ct=c[cn++];break;case CMD$3.C:if(a){if(containStroke$3(Q,Ct,c[cn++],c[cn++],c[cn++],c[cn++],c[cn],c[cn+1],n,l,u))return!0}else d+=windingCubic(Q,Ct,c[cn++],c[cn++],c[cn++],c[cn++],c[cn],c[cn+1],l,u)||0;Q=c[cn++],Ct=c[cn++];break;case CMD$3.Q:if(a){if(containStroke$2(Q,Ct,c[cn++],c[cn++],c[cn],c[cn+1],n,l,u))return!0}else d+=windingQuadratic(Q,Ct,c[cn++],c[cn++],c[cn],c[cn+1],l,u)||0;Q=c[cn++],Ct=c[cn++];break;case CMD$3.A:var ex=c[cn++],ix=c[cn++],ax=c[cn++],ox=c[cn++],lx=c[cn++],cx=c[cn++];cn+=1;var dx=!!(1-c[cn++]);tn=Math.cos(lx)*ax+ex,on=Math.sin(lx)*ox+ix,Cn?(ar=tn,en=on):d+=windingLine(Q,Ct,tn,on,l,u);var hx=(l-ex)*ox/ax+ex;if(a){if(containStroke$1(ex,ix,ox,lx,lx+cx,dx,n,hx,u))return!0}else d+=windingArc(ex,ix,ox,lx,lx+cx,dx,hx,u);Q=Math.cos(lx+cx)*ax+ex,Ct=Math.sin(lx+cx)*ox+ix;break;case CMD$3.R:ar=Q=c[cn++],en=Ct=c[cn++];var fx=c[cn++],ux=c[cn++];if(tn=ar+fx,on=en+ux,a){if(containStroke$4(ar,en,tn,en,n,l,u)||containStroke$4(tn,en,tn,on,n,l,u)||containStroke$4(tn,on,ar,on,n,l,u)||containStroke$4(ar,on,ar,en,n,l,u))return!0}else d+=windingLine(tn,en,tn,on,l,u),d+=windingLine(ar,on,ar,en,l,u);break;case CMD$3.Z:if(a){if(containStroke$4(Q,Ct,ar,en,n,l,u))return!0}else d+=windingLine(Q,Ct,ar,en,l,u);Q=ar,Ct=en;break}}return!a&&!isAroundEqual$1(Ct,en)&&(d+=windingLine(Q,Ct,ar,en,l,u)||0),d!==0}function contain$2(t,n,a){return containPath(t,0,!1,n,a)}function containStroke(t,n,a,l){return containPath(t,n,!0,a,l)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.update=function(){var a=this;t.prototype.update.call(this);var l=this.style;if(l.decal){var u=this._decalEl=this._decalEl||new n;u.buildPath===n.prototype.buildPath&&(u.buildPath=function(Q){a.buildPath(Q,a.shape)}),u.silent=!0;var c=u.style;for(var p in l)c[p]!==l[p]&&(c[p]=l[p]);c.fill=l.fill?l.decal:null,c.decal=null,c.shadowColor=null,l.strokeFirst&&(c.stroke=null);for(var d=0;d<pathCopyParams.length;++d)u[pathCopyParams[d]]=this[pathCopyParams[d]];u.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(a){var l=keys(a);this.shape=this.getDefaultShape();var u=this.getDefaultStyle();u&&this.useStyle(u);for(var c=0;c<l.length;c++){var p=l[c],d=a[p];p==="style"?this.style?extend(this.style,d):this.useStyle(d):p==="shape"?extend(this.shape,d):t.prototype.attrKV.call(this,p,d)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var a=this.style.fill;if(a!=="none"){if(isString$1(a)){var l=lum(a,0);return l>.5?DARK_LABEL_COLOR:l>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(a)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(a){var l=this.style.fill;if(isString$1(l)){var u=this.__zr,c=!!(u&&u.isDarkMode()),p=lum(a,0)<DARK_MODE_THRESHOLD;if(c===p)return l}},n.prototype.buildPath=function(a,l,u){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(a){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,a),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},n.prototype.hasStroke=function(){var a=this.style,l=a.stroke;return!(l==null||l==="none"||!(a.lineWidth>0))},n.prototype.hasFill=function(){var a=this.style,l=a.fill;return l!=null&&l!=="none"},n.prototype.getBoundingRect=function(){var a=this._rect,l=this.style,u=!a;if(u){var c=!1;this.path||(c=!0,this.createPathProxy());var p=this.path;(c||this.__dirty&SHAPE_CHANGED_BIT)&&(p.beginPath(),this.buildPath(p,this.shape,!1),this.pathUpdated()),a=p.getBoundingRect()}if(this._rect=a,this.hasStroke()&&this.path&&this.path.len()>0){var d=this._rectStroke||(this._rectStroke=a.clone());if(this.__dirty||u){d.copy(a);var Q=l.strokeNoScale?this.getLineScale():1,Ct=l.lineWidth;if(!this.hasFill()){var ar=this.strokeContainThreshold;Ct=Math.max(Ct,ar??4)}Q>1e-10&&(d.width+=Ct/Q,d.height+=Ct/Q,d.x-=Ct/Q/2,d.y-=Ct/Q/2)}return d}return a},n.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l),c=this.getBoundingRect(),p=this.style;if(a=u[0],l=u[1],c.contain(a,l)){var d=this.path;if(this.hasStroke()){var Q=p.lineWidth,Ct=p.strokeNoScale?this.getLineScale():1;if(Ct>1e-10&&(this.hasFill()||(Q=Math.max(Q,this.strokeContainThreshold)),containStroke(d,Q/Ct,a,l)))return!0}if(this.hasFill())return contain$2(d,a,l)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(a){return this.animate("shape",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():a==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(a,l){a==="shape"?this.setShape(l):t.prototype.attrKV.call(this,a,l)},n.prototype.setShape=function(a,l){var u=this.shape;return u||(u=this.shape={}),typeof a=="string"?u[a]=l:extend(u,a),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(a){return createObject(DEFAULT_PATH_STYLE,a)},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var l=this._normalState;a.shape&&!l.shape&&(l.shape=extend({},this.shape))},n.prototype._applyStateObj=function(a,l,u,c,p,d){t.prototype._applyStateObj.call(this,a,l,u,c,p,d);var Q=!(l&&c),Ct;if(l&&l.shape?p?c?Ct=l.shape:(Ct=extend({},u.shape),extend(Ct,l.shape)):(Ct=extend({},c?this.shape:u.shape),extend(Ct,l.shape)):Q&&(Ct=u.shape),Ct)if(p){this.shape=extend({},this.shape);for(var ar={},en=keys(Ct),tn=0;tn<en.length;tn++){var on=en[tn];typeof Ct[on]=="object"?this.shape[on]=Ct[on]:ar[on]=Ct[on]}this._transitionState(a,{shape:ar},d)}else this.shape=Ct,this.dirtyShape()},n.prototype._mergeStates=function(a){for(var l=t.prototype._mergeStates.call(this,a),u,c=0;c<a.length;c++){var p=a[c];p.shape&&(u=u||{},this._mergeStyle(u,p.shape))}return u&&(l.shape=u),l},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(a){var l=function(c){__extends(p,c);function p(d){var Q=c.call(this,d)||this;return a.init&&a.init.call(Q,d),Q}return p.prototype.getDefaultStyle=function(){return clone$4(a.style)},p.prototype.getDefaultShape=function(){return clone$4(a.shape)},p}(n);for(var u in a)typeof a[u]=="function"&&(l.prototype[u]=a[u]);return l},n.initDefaultProps=function(){var a=n.prototype;a.type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),n}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.hasStroke=function(){var a=this.style,l=a.stroke;return l!=null&&l!=="none"&&a.lineWidth>0},n.prototype.hasFill=function(){var a=this.style,l=a.fill;return l!=null&&l!=="none"},n.prototype.createStyle=function(a){return createObject(DEFAULT_TSPAN_STYLE,a)},n.prototype.setBoundingRect=function(a){this._rect=a},n.prototype.getBoundingRect=function(){var a=this.style;if(!this._rect){var l=a.text;l!=null?l+="":l="";var u=getBoundingRect(l,a.font,a.textAlign,a.textBaseline);if(u.x+=a.x||0,u.y+=a.y||0,this.hasStroke()){var c=a.lineWidth;u.x-=c/2,u.y-=c/2,u.width+=c,u.height+=c}this._rect=u}return this._rect},n.initDefaultProps=function(){var a=n.prototype;a.dirtyRectTolerance=10}(),n}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var ZRImage=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.createStyle=function(a){return createObject(DEFAULT_IMAGE_STYLE,a)},n.prototype._getSize=function(a){var l=this.style,u=l[a];if(u!=null)return u;var c=isImageLike$1(l.image)?l.image:this.__image;if(!c)return 0;var p=a==="width"?"height":"width",d=l[p];return d==null?c[a]:c[a]/c[p]*d},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var a=this.style;return this._rect||(this._rect=new BoundingRect(a.x||0,a.y||0,this.getWidth(),this.getHeight())),this._rect},n}(Displayable);ZRImage.prototype.type="image";function buildPath$2(t,n){var a=n.x,l=n.y,u=n.width,c=n.height,p=n.r,d,Q,Ct,ar;u<0&&(a=a+u,u=-u),c<0&&(l=l+c,c=-c),typeof p=="number"?d=Q=Ct=ar=p:p instanceof Array?p.length===1?d=Q=Ct=ar=p[0]:p.length===2?(d=Ct=p[0],Q=ar=p[1]):p.length===3?(d=p[0],Q=ar=p[1],Ct=p[2]):(d=p[0],Q=p[1],Ct=p[2],ar=p[3]):d=Q=Ct=ar=0;var en;d+Q>u&&(en=d+Q,d*=u/en,Q*=u/en),Ct+ar>u&&(en=Ct+ar,Ct*=u/en,ar*=u/en),Q+Ct>c&&(en=Q+Ct,Q*=c/en,Ct*=c/en),d+ar>c&&(en=d+ar,d*=c/en,ar*=c/en),t.moveTo(a+d,l),t.lineTo(a+u-Q,l),Q!==0&&t.arc(a+u-Q,l+Q,Q,-Math.PI/2,0),t.lineTo(a+u,l+c-Ct),Ct!==0&&t.arc(a+u-Ct,l+c-Ct,Ct,0,Math.PI/2),t.lineTo(a+ar,l+c),ar!==0&&t.arc(a+ar,l+c-ar,ar,Math.PI/2,Math.PI),t.lineTo(a,l+d),d!==0&&t.arc(a+d,l+d,d,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(t,n,a){if(n){var l=n.x1,u=n.x2,c=n.y1,p=n.y2;t.x1=l,t.x2=u,t.y1=c,t.y2=p;var d=a&&a.lineWidth;return d&&(round$2(l*2)===round$2(u*2)&&(t.x1=t.x2=subPixelOptimize$1(l,d,!0)),round$2(c*2)===round$2(p*2)&&(t.y1=t.y2=subPixelOptimize$1(c,d,!0))),t}}function subPixelOptimizeRect$1(t,n,a){if(n){var l=n.x,u=n.y,c=n.width,p=n.height;t.x=l,t.y=u,t.width=c,t.height=p;var d=a&&a.lineWidth;return d&&(t.x=subPixelOptimize$1(l,d,!0),t.y=subPixelOptimize$1(u,d,!0),t.width=Math.max(subPixelOptimize$1(l+c,d,!1)-t.x,c===0?0:1),t.height=Math.max(subPixelOptimize$1(u+p,d,!1)-t.y,p===0?0:1)),t}}function subPixelOptimize$1(t,n,a){if(!n)return t;var l=round$2(t*2);return(l+round$2(n))%2===0?l/2:(l+(a?1:-1))/2}var RectShape=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),subPixelOptimizeOutputShape$1={},Rect$2=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(a,l){var u,c,p,d;if(this.subPixelOptimize){var Q=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,l,this.style);u=Q.x,c=Q.y,p=Q.width,d=Q.height,Q.r=l.r,l=Q}else u=l.x,c=l.y,p=l.width,d=l.height;l.r?buildPath$2(a,l):a.rect(u,c,p,d)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(t){__extends(n,t);function n(a){var l=t.call(this)||this;return l.type="text",l._children=[],l._defaultStyle=DEFAULT_RICH_TEXT_COLOR,l.attr(a),l}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var a=0;a<this._children.length;a++){var l=this._children[a];l.zlevel=this.zlevel,l.z=this.z,l.z2=this.z2,l.culling=this.culling,l.cursor=this.cursor,l.invisible=this.invisible}},n.prototype.updateTransform=function(){var a=this.innerTransformable;a?(a.updateTransform(),a.transform&&(this.transform=a.transform)):t.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(a){var l=this.innerTransformable;return l?l.getLocalTransform(a):t.prototype.getLocalTransform.call(this,a)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var l=0;l<this._children.length;l++)this._children[l].__zr=a},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var l=0;l<this._children.length;l++)this._children[l].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var a=new BoundingRect(0,0,0,0),l=this._children,u=[],c=null,p=0;p<l.length;p++){var d=l[p],Q=d.getBoundingRect(),Ct=d.getLocalTransform(u);Ct?(a.copy(Q),a.applyTransform(Ct),c=c||a.clone(),c.union(a)):(c=c||Q.clone(),c.union(Q))}this._rect=c||a}return this._rect},n.prototype.setDefaultTextStyle=function(a){this._defaultStyle=a||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(a){},n.prototype._mergeStyle=function(a,l){if(!l)return a;var u=l.rich,c=a.rich||u&&{};return extend(a,l),u&&c?(this._mergeRich(c,u),a.rich=c):c&&(a.rich=c),a},n.prototype._mergeRich=function(a,l){for(var u=keys(l),c=0;c<u.length;c++){var p=u[c];a[p]=a[p]||{},extend(a[p],l[p])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(a){var l=this._children[this._childCursor];return(!l||!(l instanceof a))&&(l=new a),this._children[this._childCursor++]=l,l.__zr=this.__zr,l.parent=this,l},n.prototype._updatePlainTexts=function(){var a=this.style,l=a.font||DEFAULT_FONT,u=a.padding,c=getStyleText(a),p=parsePlainText(c,a),d=needDrawBackground(a),Q=!!a.backgroundColor,Ct=p.outerHeight,ar=p.outerWidth,en=p.contentWidth,tn=p.lines,on=p.lineHeight,cn=this._defaultStyle;this.isTruncated=!!p.isTruncated;var gn=a.x||0,Cn=a.y||0,ex=a.align||cn.align||"left",ix=a.verticalAlign||cn.verticalAlign||"top",ax=gn,ox=adjustTextY(Cn,p.contentHeight,ix);if(d||u){var lx=adjustTextX(gn,ar,ex),cx=adjustTextY(Cn,Ct,ix);d&&this._renderBackground(a,a,lx,cx,ar,Ct)}ox+=on/2,u&&(ax=getTextXForPadding(gn,ex,u),ix==="top"?ox+=u[0]:ix==="bottom"&&(ox-=u[2]));for(var dx=0,hx=!1,fx=getFill("fill"in a?a.fill:(hx=!0,cn.fill)),ux=getStroke("stroke"in a?a.stroke:!Q&&(!cn.autoStroke||hx)?(dx=DEFAULT_STROKE_LINE_WIDTH,cn.stroke):null),gx=a.textShadowBlur>0,yx=a.width!=null&&(a.overflow==="truncate"||a.overflow==="break"||a.overflow==="breakAll"),_x=p.calculatedLineHeight,vx=0;vx<tn.length;vx++){var bx=this._getOrCreateChild(TSpan),xx=bx.createStyle();bx.useStyle(xx),xx.text=tn[vx],xx.x=ax,xx.y=ox,xx.textAlign=ex,xx.textBaseline="middle",xx.opacity=a.opacity,xx.strokeFirst=!0,gx&&(xx.shadowBlur=a.textShadowBlur||0,xx.shadowColor=a.textShadowColor||"transparent",xx.shadowOffsetX=a.textShadowOffsetX||0,xx.shadowOffsetY=a.textShadowOffsetY||0),xx.stroke=ux,xx.fill=fx,ux&&(xx.lineWidth=a.lineWidth||dx,xx.lineDash=a.lineDash,xx.lineDashOffset=a.lineDashOffset||0),xx.font=l,setSeparateFont(xx,a),ox+=on,yx&&bx.setBoundingRect(new BoundingRect(adjustTextX(xx.x,en,xx.textAlign),adjustTextY(xx.y,_x,xx.textBaseline),en,_x))}},n.prototype._updateRichTexts=function(){var a=this.style,l=getStyleText(a),u=parseRichText(l,a),c=u.width,p=u.outerWidth,d=u.outerHeight,Q=a.padding,Ct=a.x||0,ar=a.y||0,en=this._defaultStyle,tn=a.align||en.align,on=a.verticalAlign||en.verticalAlign;this.isTruncated=!!u.isTruncated;var cn=adjustTextX(Ct,p,tn),gn=adjustTextY(ar,d,on),Cn=cn,ex=gn;Q&&(Cn+=Q[3],ex+=Q[0]);var ix=Cn+c;needDrawBackground(a)&&this._renderBackground(a,a,cn,gn,p,d);for(var ax=!!a.backgroundColor,ox=0;ox<u.lines.length;ox++){for(var lx=u.lines[ox],cx=lx.tokens,dx=cx.length,hx=lx.lineHeight,fx=lx.width,ux=0,gx=Cn,yx=ix,_x=dx-1,vx=void 0;ux<dx&&(vx=cx[ux],!vx.align||vx.align==="left");)this._placeToken(vx,a,hx,ex,gx,"left",ax),fx-=vx.width,gx+=vx.width,ux++;for(;_x>=0&&(vx=cx[_x],vx.align==="right");)this._placeToken(vx,a,hx,ex,yx,"right",ax),fx-=vx.width,yx-=vx.width,_x--;for(gx+=(c-(gx-Cn)-(ix-yx)-fx)/2;ux<=_x;)vx=cx[ux],this._placeToken(vx,a,hx,ex,gx+vx.width/2,"center",ax),gx+=vx.width,ux++;ex+=hx}},n.prototype._placeToken=function(a,l,u,c,p,d,Q){var Ct=l.rich[a.styleName]||{};Ct.text=a.text;var ar=a.verticalAlign,en=c+u/2;ar==="top"?en=c+a.height/2:ar==="bottom"&&(en=c+u-a.height/2);var tn=!a.isLineHolder&&needDrawBackground(Ct);tn&&this._renderBackground(Ct,l,d==="right"?p-a.width:d==="center"?p-a.width/2:p,en-a.height/2,a.width,a.height);var on=!!Ct.backgroundColor,cn=a.textPadding;cn&&(p=getTextXForPadding(p,d,cn),en-=a.height/2-cn[0]-a.innerHeight/2);var gn=this._getOrCreateChild(TSpan),Cn=gn.createStyle();gn.useStyle(Cn);var ex=this._defaultStyle,ix=!1,ax=0,ox=getFill("fill"in Ct?Ct.fill:"fill"in l?l.fill:(ix=!0,ex.fill)),lx=getStroke("stroke"in Ct?Ct.stroke:"stroke"in l?l.stroke:!on&&!Q&&(!ex.autoStroke||ix)?(ax=DEFAULT_STROKE_LINE_WIDTH,ex.stroke):null),cx=Ct.textShadowBlur>0||l.textShadowBlur>0;Cn.text=a.text,Cn.x=p,Cn.y=en,cx&&(Cn.shadowBlur=Ct.textShadowBlur||l.textShadowBlur||0,Cn.shadowColor=Ct.textShadowColor||l.textShadowColor||"transparent",Cn.shadowOffsetX=Ct.textShadowOffsetX||l.textShadowOffsetX||0,Cn.shadowOffsetY=Ct.textShadowOffsetY||l.textShadowOffsetY||0),Cn.textAlign=d,Cn.textBaseline="middle",Cn.font=a.font||DEFAULT_FONT,Cn.opacity=retrieve3(Ct.opacity,l.opacity,1),setSeparateFont(Cn,Ct),lx&&(Cn.lineWidth=retrieve3(Ct.lineWidth,l.lineWidth,ax),Cn.lineDash=retrieve2(Ct.lineDash,l.lineDash),Cn.lineDashOffset=l.lineDashOffset||0,Cn.stroke=lx),ox&&(Cn.fill=ox);var dx=a.contentWidth,hx=a.contentHeight;gn.setBoundingRect(new BoundingRect(adjustTextX(Cn.x,dx,Cn.textAlign),adjustTextY(Cn.y,hx,Cn.textBaseline),dx,hx))},n.prototype._renderBackground=function(a,l,u,c,p,d){var Q=a.backgroundColor,Ct=a.borderWidth,ar=a.borderColor,en=Q&&Q.image,tn=Q&&!en,on=a.borderRadius,cn=this,gn,Cn;if(tn||a.lineHeight||Ct&&ar){gn=this._getOrCreateChild(Rect$2),gn.useStyle(gn.createStyle()),gn.style.fill=null;var ex=gn.shape;ex.x=u,ex.y=c,ex.width=p,ex.height=d,ex.r=on,gn.dirtyShape()}if(tn){var ix=gn.style;ix.fill=Q||null,ix.fillOpacity=retrieve2(a.fillOpacity,1)}else if(en){Cn=this._getOrCreateChild(ZRImage),Cn.onload=function(){cn.dirtyStyle()};var ax=Cn.style;ax.image=Q.image,ax.x=u,ax.y=c,ax.width=p,ax.height=d}if(Ct&&ar){var ix=gn.style;ix.lineWidth=Ct,ix.stroke=ar,ix.strokeOpacity=retrieve2(a.strokeOpacity,1),ix.lineDash=a.borderDash,ix.lineDashOffset=a.borderDashOffset||0,gn.strokeContainThreshold=0,gn.hasFill()&&gn.hasStroke()&&(ix.strokeFirst=!0,ix.lineWidth*=2)}var ox=(gn||Cn).style;ox.shadowBlur=a.shadowBlur||0,ox.shadowColor=a.shadowColor||"transparent",ox.shadowOffsetX=a.shadowOffsetX||0,ox.shadowOffsetY=a.shadowOffsetY||0,ox.opacity=retrieve3(a.opacity,l.opacity,1)},n.makeFont=function(a){var l="";return hasSeparateFont(a)&&(l=[a.fontStyle,a.fontWeight,parseFontSize(a.fontSize),a.fontFamily||"sans-serif"].join(" ")),l&&trim$1(l)||a.textFont||a.font},n}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?DEFAULT_FONT_SIZE+"px":t+"px"}function setSeparateFont(t,n){for(var a=0;a<FONT_PARTS.length;a++){var l=FONT_PARTS[a],u=n[l];u!=null&&(t[l]=u)}}function hasSeparateFont(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function normalizeTextStyle(t){return normalizeStyle(t),each$f(t.rich,normalizeStyle),t}function normalizeStyle(t){if(t){t.font=ZRText.makeFont(t);var n=t.align;n==="middle"&&(n="center"),t.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var a=t.verticalAlign;a==="center"&&(a="middle"),t.verticalAlign=a==null||VALID_TEXT_VERTICAL_ALIGN[a]?a:"top";var l=t.padding;l&&(t.padding=normalizeCssArray$1(t.padding))}}function getStroke(t,n){return t==null||n<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function getFill(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function getTextXForPadding(t,n,a){return n==="right"?t-a[1]:n==="center"?t+a[3]/2-a[1]/2:t+a[3]}function getStyleText(t){var n=t.text;return n!=null&&(n+=""),n}function needDrawBackground(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var getECData=makeInner(),setCommonECData=function(t,n,a,l){if(l){var u=getECData(l);u.dataIndex=a,u.dataType=n,u.seriesIndex=t,u.ssrType="chart",l.type==="group"&&l.traverse(function(c){var p=getECData(c);p.seriesIndex=t,p.dataIndex=a,p.dataType=n,p.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(t){return t!=null&&t!=="none"}function doChangeHoverState(t,n,a){t.onHoverStateChange&&(t.hoverState||0)!==a&&t.onHoverStateChange(n),t.hoverState=a}function singleEnterEmphasis(t){doChangeHoverState(t,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(t){t.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(t){doChangeHoverState(t,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(t){t.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(t){t.selected=!0}function singleLeaveSelect(t){t.selected=!1}function updateElementState(t,n,a){n(t,a)}function traverseUpdateState(t,n,a){updateElementState(t,n,a),t.isGroup&&t.traverse(function(l){updateElementState(l,n,a)})}function setStatesFlag(t,n){switch(n){case"emphasis":t.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":t.hoverState=HOVER_STATE_NORMAL;break;case"blur":t.hoverState=HOVER_STATE_BLUR;break;case"select":t.selected=!0}}function getFromStateStyle(t,n,a,l){for(var u=t.style,c={},p=0;p<n.length;p++){var d=n[p],Q=u[d];c[d]=Q??(l&&l[d])}for(var p=0;p<t.animators.length;p++){var Ct=t.animators[p];Ct.__fromStateTransition&&Ct.__fromStateTransition.indexOf(a)<0&&Ct.targetName==="style"&&Ct.saveTo(c,n)}return c}function createEmphasisDefaultState(t,n,a,l){var u=a&&indexOf(a,"select")>=0,c=!1;if(t instanceof Path){var p=getSavedStates(t),d=u&&p.selectFill||p.normalFill,Q=u&&p.selectStroke||p.normalStroke;if(hasFillOrStroke(d)||hasFillOrStroke(Q)){l=l||{};var Ct=l.style||{};Ct.fill==="inherit"?(c=!0,l=extend({},l),Ct=extend({},Ct),Ct.fill=d):!hasFillOrStroke(Ct.fill)&&hasFillOrStroke(d)?(c=!0,l=extend({},l),Ct=extend({},Ct),Ct.fill=liftColor(d)):!hasFillOrStroke(Ct.stroke)&&hasFillOrStroke(Q)&&(c||(l=extend({},l),Ct=extend({},Ct)),Ct.stroke=liftColor(Q)),l.style=Ct}}if(l&&l.z2==null){c||(l=extend({},l));var ar=t.z2EmphasisLift;l.z2=t.z2+(ar??Z2_EMPHASIS_LIFT)}return l}function createSelectDefaultState(t,n,a){if(a&&a.z2==null){a=extend({},a);var l=t.z2SelectLift;a.z2=t.z2+(l??Z2_SELECT_LIFT)}return a}function createBlurDefaultState(t,n,a){var l=indexOf(t.currentStates,n)>=0,u=t.style.opacity,c=l?null:getFromStateStyle(t,["opacity"],n,{opacity:1});a=a||{};var p=a.style||{};return p.opacity==null&&(a=extend({},a),p=extend({opacity:l?u:c.opacity*.1},p),a.style=p),a}function elementStateProxy(t,n){var a=this.states[t];if(this.style){if(t==="emphasis")return createEmphasisDefaultState(this,t,n,a);if(t==="blur")return createBlurDefaultState(this,t,a);if(t==="select")return createSelectDefaultState(this,t,a)}return a}function setDefaultStateProxy(t){t.stateProxy=elementStateProxy;var n=t.getTextContent(),a=t.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),a&&(a.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleLeaveEmphasis)}function enterEmphasis(t,n){t.__highByOuter|=1<<(n||0),traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasis(t,n){!(t.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(t,singleLeaveEmphasis)}function enterBlur(t){traverseUpdateState(t,singleEnterBlur)}function leaveBlur(t){traverseUpdateState(t,singleLeaveBlur)}function enterSelect(t){traverseUpdateState(t,singleEnterSelect)}function leaveSelect(t){traverseUpdateState(t,singleLeaveSelect)}function shouldSilent(t,n){return t.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(t){var n=t.getModel(),a=[],l=[];n.eachComponent(function(u,c){var p=getComponentStates(c),d=u==="series",Q=d?t.getViewOfSeriesModel(c):t.getViewOfComponentModel(c);!d&&l.push(Q),p.isBlured&&(Q.group.traverse(function(Ct){singleLeaveBlur(Ct)}),d&&a.push(c)),p.isBlured=!1}),each$f(l,function(u){u&&u.toggleBlurSeries&&u.toggleBlurSeries(a,!1,n)})}function blurSeries(t,n,a,l){var u=l.getModel();a=a||"coordinateSystem";function c(Ct,ar){for(var en=0;en<ar.length;en++){var tn=Ct.getItemGraphicEl(ar[en]);tn&&leaveBlur(tn)}}if(t!=null&&!(!n||n==="none")){var p=u.getSeriesByIndex(t),d=p.coordinateSystem;d&&d.master&&(d=d.master);var Q=[];u.eachSeries(function(Ct){var ar=p===Ct,en=Ct.coordinateSystem;en&&en.master&&(en=en.master);var tn=en&&d?en===d:ar;if(!(a==="series"&&!ar||a==="coordinateSystem"&&!tn||n==="series"&&ar)){var on=l.getViewOfSeriesModel(Ct);if(on.group.traverse(function(Cn){Cn.__highByOuter&&ar&&n==="self"||singleEnterBlur(Cn)}),isArrayLike(n))c(Ct.getData(),n);else if(isObject$3(n))for(var cn=keys(n),gn=0;gn<cn.length;gn++)c(Ct.getData(cn[gn]),n[cn[gn]]);Q.push(Ct),getComponentStates(Ct).isBlured=!0}}),u.eachComponent(function(Ct,ar){if(Ct!=="series"){var en=l.getViewOfComponentModel(ar);en&&en.toggleBlurSeries&&en.toggleBlurSeries(Q,!0,u)}})}}function blurComponent(t,n,a){if(!(t==null||n==null)){var l=a.getModel().getComponent(t,n);if(l){getComponentStates(l).isBlured=!0;var u=a.getViewOfComponentModel(l);!u||!u.focusBlurEnabled||u.group.traverse(function(c){singleEnterBlur(c)})}}}function blurSeriesFromHighlightPayload(t,n,a){var l=t.seriesIndex,u=t.getData(n.dataType);if(u){var c=queryDataIndex(u,n);c=(isArray$1(c)?c[0]:c)||0;var p=u.getItemGraphicEl(c);if(!p)for(var d=u.count(),Q=0;!p&&Q<d;)p=u.getItemGraphicEl(Q++);if(p){var Ct=getECData(p);blurSeries(l,Ct.focus,Ct.blurScope,a)}else{var ar=t.get(["emphasis","focus"]),en=t.get(["emphasis","blurScope"]);ar!=null&&blurSeries(l,ar,en,a)}}}function findComponentHighDownDispatchers(t,n,a,l){var u={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||n==null||a==null)return u;var c=l.getModel().getComponent(t,n);if(!c)return u;var p=l.getViewOfComponentModel(c);if(!p||!p.findHighDownDispatchers)return u;for(var d=p.findHighDownDispatchers(a),Q,Ct=0;Ct<d.length;Ct++)if(getECData(d[Ct]).focus==="self"){Q=!0;break}return{focusSelf:Q,dispatchers:d}}function handleGlobalMouseOverForHighDown(t,n,a){var l=getECData(t),u=findComponentHighDownDispatchers(l.componentMainType,l.componentIndex,l.componentHighDownName,a),c=u.dispatchers,p=u.focusSelf;c?(p&&blurComponent(l.componentMainType,l.componentIndex,a),each$f(c,function(d){return enterEmphasisWhenMouseOver(d,n)})):(blurSeries(l.seriesIndex,l.focus,l.blurScope,a),l.focus==="self"&&blurComponent(l.componentMainType,l.componentIndex,a),enterEmphasisWhenMouseOver(t,n))}function handleGlobalMouseOutForHighDown(t,n,a){allLeaveBlur(a);var l=getECData(t),u=findComponentHighDownDispatchers(l.componentMainType,l.componentIndex,l.componentHighDownName,a).dispatchers;u?each$f(u,function(c){return leaveEmphasisWhenMouseOut(c,n)}):leaveEmphasisWhenMouseOut(t,n)}function toggleSelectionFromPayload(t,n,a){if(isSelectChangePayload(n)){var l=n.dataType,u=t.getData(l),c=queryDataIndex(u,n);isArray$1(c)||(c=[c]),t[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](c,l)}}function updateSeriesElementSelection(t){var n=t.getAllData();each$f(n,function(a){var l=a.data,u=a.type;l.eachItemGraphicEl(function(c,p){t.isSelected(p,u)?enterSelect(c):leaveSelect(c)})})}function getAllSelectedIndices(t){var n=[];return t.eachSeries(function(a){var l=a.getAllData();each$f(l,function(u){u.data;var c=u.type,p=a.getSelectedDataIndices();if(p.length>0){var d={dataIndex:p,seriesIndex:a.seriesIndex};c!=null&&(d.dataType=c),n.push(d)}})}),n}function enableHoverEmphasis(t,n,a){setAsHighDownDispatcher(t,!0),traverseUpdateState(t,setDefaultStateProxy),enableHoverFocus(t,n,a)}function disableHoverEmphasis(t){setAsHighDownDispatcher(t,!1)}function toggleHoverEmphasis(t,n,a,l){l?disableHoverEmphasis(t):enableHoverEmphasis(t,n,a)}function enableHoverFocus(t,n,a){var l=getECData(t);n!=null?(l.focus=n,l.blurScope=a):l.focus&&(l.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(t,n,a,l){a=a||"itemStyle";for(var u=0;u<OTHER_STATES.length;u++){var c=OTHER_STATES[u],p=n.getModel([c,a]),d=t.ensureState(c);d.style=l?l(p):p[defaultStyleGetterMap[a]]()}}function setAsHighDownDispatcher(t,n){var a=n===!1,l=t;t.highDownSilentOnTouch&&(l.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!a||l.__highDownDispatcher)&&(l.__highByOuter=l.__highByOuter||0,l.__highDownDispatcher=!a)}function isHighDownDispatcher(t){return!!(t&&t.__highDownDispatcher)}function enableComponentHighDownFeatures(t,n,a){var l=getECData(t);l.componentMainType=n.mainType,l.componentIndex=n.componentIndex,l.componentHighDownName=a}function getHighlightDigit(t){var n=_highlightKeyMap[t];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[t]=_highlightNextDigit++),n}function isSelectChangePayload(t){var n=t.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(t){var n=t.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(t){var n=getSavedStates(t);n.normalFill=t.style.fill,n.normalStroke=t.style.stroke;var a=t.states.select||{};n.selectFill=a.style&&a.style.fill||null,n.selectStroke=a.style&&a.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(t,n){if(n){var a=t.data,l=t.len(),u,c,p,d,Q,Ct,ar=CMD$2.M,en=CMD$2.C,tn=CMD$2.L,on=CMD$2.R,cn=CMD$2.A,gn=CMD$2.Q;for(p=0,d=0;p<l;){switch(u=a[p++],d=p,c=0,u){case ar:c=1;break;case tn:c=1;break;case en:c=3;break;case gn:c=2;break;case cn:var Cn=n[4],ex=n[5],ix=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),ax=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),ox=mathAtan2(-n[1]/ax,n[0]/ix);a[p]*=ix,a[p++]+=Cn,a[p]*=ax,a[p++]+=ex,a[p++]*=ix,a[p++]*=ax,a[p++]+=ox,a[p++]+=ox,p+=2,d=p;break;case on:Ct[0]=a[p++],Ct[1]=a[p++],applyTransform$1(Ct,Ct,n),a[d++]=Ct[0],a[d++]=Ct[1],Ct[0]+=a[p++],Ct[1]+=a[p++],applyTransform$1(Ct,Ct,n),a[d++]=Ct[0],a[d++]=Ct[1]}for(Q=0;Q<c;Q++){var lx=points$2[Q];lx[0]=a[p++],lx[1]=a[p++],applyTransform$1(lx,lx,n),a[d++]=lx[0],a[d++]=lx[1]}}t.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vRatio(t,n){return(t[0]*n[0]+t[1]*n[1])/(vMag(t)*vMag(n))}function vAngle(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(vRatio(t,n))}function processArc(t,n,a,l,u,c,p,d,Q,Ct,ar){var en=Q*(PI$7/180),tn=mathCos$2(en)*(t-a)/2+mathSin$2(en)*(n-l)/2,on=-1*mathSin$2(en)*(t-a)/2+mathCos$2(en)*(n-l)/2,cn=tn*tn/(p*p)+on*on/(d*d);cn>1&&(p*=mathSqrt$1(cn),d*=mathSqrt$1(cn));var gn=(u===c?-1:1)*mathSqrt$1((p*p*(d*d)-p*p*(on*on)-d*d*(tn*tn))/(p*p*(on*on)+d*d*(tn*tn)))||0,Cn=gn*p*on/d,ex=gn*-d*tn/p,ix=(t+a)/2+mathCos$2(en)*Cn-mathSin$2(en)*ex,ax=(n+l)/2+mathSin$2(en)*Cn+mathCos$2(en)*ex,ox=vAngle([1,0],[(tn-Cn)/p,(on-ex)/d]),lx=[(tn-Cn)/p,(on-ex)/d],cx=[(-1*tn-Cn)/p,(-1*on-ex)/d],dx=vAngle(lx,cx);if(vRatio(lx,cx)<=-1&&(dx=PI$7),vRatio(lx,cx)>=1&&(dx=0),dx<0){var hx=Math.round(dx/PI$7*1e6)/1e6;dx=PI$7*2+hx%2*PI$7}ar.addData(Ct,ix,ax,p,d,ox,dx,en,c)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(t){var n=new PathProxy;if(!t)return n;var a=0,l=0,u=a,c=l,p,d=PathProxy.CMD,Q=t.match(commandReg);if(!Q)return n;for(var Ct=0;Ct<Q.length;Ct++){for(var ar=Q[Ct],en=ar.charAt(0),tn=void 0,on=ar.match(numberReg$1)||[],cn=on.length,gn=0;gn<cn;gn++)on[gn]=parseFloat(on[gn]);for(var Cn=0;Cn<cn;){var ex=void 0,ix=void 0,ax=void 0,ox=void 0,lx=void 0,cx=void 0,dx=void 0,hx=a,fx=l,ux=void 0,gx=void 0;switch(en){case"l":a+=on[Cn++],l+=on[Cn++],tn=d.L,n.addData(tn,a,l);break;case"L":a=on[Cn++],l=on[Cn++],tn=d.L,n.addData(tn,a,l);break;case"m":a+=on[Cn++],l+=on[Cn++],tn=d.M,n.addData(tn,a,l),u=a,c=l,en="l";break;case"M":a=on[Cn++],l=on[Cn++],tn=d.M,n.addData(tn,a,l),u=a,c=l,en="L";break;case"h":a+=on[Cn++],tn=d.L,n.addData(tn,a,l);break;case"H":a=on[Cn++],tn=d.L,n.addData(tn,a,l);break;case"v":l+=on[Cn++],tn=d.L,n.addData(tn,a,l);break;case"V":l=on[Cn++],tn=d.L,n.addData(tn,a,l);break;case"C":tn=d.C,n.addData(tn,on[Cn++],on[Cn++],on[Cn++],on[Cn++],on[Cn++],on[Cn++]),a=on[Cn-2],l=on[Cn-1];break;case"c":tn=d.C,n.addData(tn,on[Cn++]+a,on[Cn++]+l,on[Cn++]+a,on[Cn++]+l,on[Cn++]+a,on[Cn++]+l),a+=on[Cn-2],l+=on[Cn-1];break;case"S":ex=a,ix=l,ux=n.len(),gx=n.data,p===d.C&&(ex+=a-gx[ux-4],ix+=l-gx[ux-3]),tn=d.C,hx=on[Cn++],fx=on[Cn++],a=on[Cn++],l=on[Cn++],n.addData(tn,ex,ix,hx,fx,a,l);break;case"s":ex=a,ix=l,ux=n.len(),gx=n.data,p===d.C&&(ex+=a-gx[ux-4],ix+=l-gx[ux-3]),tn=d.C,hx=a+on[Cn++],fx=l+on[Cn++],a+=on[Cn++],l+=on[Cn++],n.addData(tn,ex,ix,hx,fx,a,l);break;case"Q":hx=on[Cn++],fx=on[Cn++],a=on[Cn++],l=on[Cn++],tn=d.Q,n.addData(tn,hx,fx,a,l);break;case"q":hx=on[Cn++]+a,fx=on[Cn++]+l,a+=on[Cn++],l+=on[Cn++],tn=d.Q,n.addData(tn,hx,fx,a,l);break;case"T":ex=a,ix=l,ux=n.len(),gx=n.data,p===d.Q&&(ex+=a-gx[ux-4],ix+=l-gx[ux-3]),a=on[Cn++],l=on[Cn++],tn=d.Q,n.addData(tn,ex,ix,a,l);break;case"t":ex=a,ix=l,ux=n.len(),gx=n.data,p===d.Q&&(ex+=a-gx[ux-4],ix+=l-gx[ux-3]),a+=on[Cn++],l+=on[Cn++],tn=d.Q,n.addData(tn,ex,ix,a,l);break;case"A":ax=on[Cn++],ox=on[Cn++],lx=on[Cn++],cx=on[Cn++],dx=on[Cn++],hx=a,fx=l,a=on[Cn++],l=on[Cn++],tn=d.A,processArc(hx,fx,a,l,cx,dx,ax,ox,lx,tn,n);break;case"a":ax=on[Cn++],ox=on[Cn++],lx=on[Cn++],cx=on[Cn++],dx=on[Cn++],hx=a,fx=l,a+=on[Cn++],l+=on[Cn++],tn=d.A,processArc(hx,fx,a,l,cx,dx,ax,ox,lx,tn,n);break}}(en==="z"||en==="Z")&&(tn=d.Z,n.addData(tn),a=u,l=c),p=tn}return n.toStatic(),n}var SVGPath=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.applyTransform=function(a){},n}(Path);function isPathProxy(t){return t.setData!=null}function createPathOptions(t,n){var a=createPathProxyFromString(t),l=extend({},n);return l.buildPath=function(u){if(isPathProxy(u)){u.setData(a.data);var c=u.getContext();c&&u.rebuildPath(c,1)}else{var c=u;a.rebuildPath(c,1)}},l.applyTransform=function(u){transformPath(a,u),this.dirtyShape()},l}function createFromString(t,n){return new SVGPath(createPathOptions(t,n))}function extendFromString(t,n){var a=createPathOptions(t,n),l=function(u){__extends(c,u);function c(p){var d=u.call(this,p)||this;return d.applyTransform=a.applyTransform,d.buildPath=a.buildPath,d}return c}(SVGPath);return l}function mergePath$1(t,n){for(var a=[],l=t.length,u=0;u<l;u++){var c=t[u];a.push(c.getUpdatedPathProxy(!0))}var p=new Path(n);return p.createPathProxy(),p.buildPath=function(d){if(isPathProxy(d)){d.appendPath(a);var Q=d.getContext();Q&&d.rebuildPath(Q,1)}},p}function clonePath(t,n){n=n||{};var a=new Path;return t.shape&&a.setShape(t.shape),a.setStyle(t.style),n.bakeTransform?transformPath(a.path,t.getComputedTransform()):n.toLocal?a.setLocalTransform(t.getComputedTransform()):a.copyTransform(t),a.buildPath=t.buildPath,a.applyTransform=a.applyTransform,a.z=t.z,a.z2=t.z2,a.zlevel=t.zlevel,a}var CircleShape=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),Circle=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(a,l){a.moveTo(l.cx+l.r,l.cy),a.arc(l.cx,l.cy,l.r,0,Math.PI*2)},n}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),Ellipse=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(a,l){var u=.5522848,c=l.cx,p=l.cy,d=l.rx,Q=l.ry,Ct=d*u,ar=Q*u;a.moveTo(c-d,p),a.bezierCurveTo(c-d,p-ar,c-Ct,p-Q,c,p-Q),a.bezierCurveTo(c+Ct,p-Q,c+d,p-ar,c+d,p),a.bezierCurveTo(c+d,p+ar,c+Ct,p+Q,c,p+Q),a.bezierCurveTo(c-Ct,p+Q,c-d,p+ar,c-d,p),a.closePath()},n}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(t,n,a,l,u,c,p,d){var Q=a-t,Ct=l-n,ar=p-u,en=d-c,tn=en*Q-ar*Ct;if(!(tn*tn<e))return tn=(ar*(n-c)-en*(t-u))/tn,[t+tn*Q,n+tn*Ct]}function computeCornerTangents(t,n,a,l,u,c,p){var d=t-a,Q=n-l,Ct=(p?c:-c)/mathSqrt(d*d+Q*Q),ar=Ct*Q,en=-Ct*d,tn=t+ar,on=n+en,cn=a+ar,gn=l+en,Cn=(tn+cn)/2,ex=(on+gn)/2,ix=cn-tn,ax=gn-on,ox=ix*ix+ax*ax,lx=u-c,cx=tn*gn-cn*on,dx=(ax<0?-1:1)*mathSqrt(mathMax$7(0,lx*lx*ox-cx*cx)),hx=(cx*ax-ix*dx)/ox,fx=(-cx*ix-ax*dx)/ox,ux=(cx*ax+ix*dx)/ox,gx=(-cx*ix+ax*dx)/ox,yx=hx-Cn,_x=fx-ex,vx=ux-Cn,bx=gx-ex;return yx*yx+_x*_x>vx*vx+bx*bx&&(hx=ux,fx=gx),{cx:hx,cy:fx,x0:-ar,y0:-en,x1:hx*(u/lx-1),y1:fx*(u/lx-1)}}function normalizeCornerRadius(t){var n;if(isArray$1(t)){var a=t.length;if(!a)return t;a===1?n=[t[0],t[0],0,0]:a===2?n=[t[0],t[0],t[1],t[1]]:a===3?n=t.concat(t[2]):n=t}else n=[t,t,t,t];return n}function buildPath$1(t,n){var a,l=mathMax$7(n.r,0),u=mathMax$7(n.r0||0,0),c=l>0,p=u>0;if(!(!c&&!p)){if(c||(l=u,u=0),u>l){var d=l;l=u,u=d}var Q=n.startAngle,Ct=n.endAngle;if(!(isNaN(Q)||isNaN(Ct))){var ar=n.cx,en=n.cy,tn=!!n.clockwise,on=mathAbs$1(Ct-Q),cn=on>PI2$3&&on%PI2$3;if(cn>e&&(on=cn),!(l>e))t.moveTo(ar,en);else if(on>PI2$3-e)t.moveTo(ar+l*mathCos$1(Q),en+l*mathSin$1(Q)),t.arc(ar,en,l,Q,Ct,!tn),u>e&&(t.moveTo(ar+u*mathCos$1(Ct),en+u*mathSin$1(Ct)),t.arc(ar,en,u,Ct,Q,tn));else{var gn=void 0,Cn=void 0,ex=void 0,ix=void 0,ax=void 0,ox=void 0,lx=void 0,cx=void 0,dx=void 0,hx=void 0,fx=void 0,ux=void 0,gx=void 0,yx=void 0,_x=void 0,vx=void 0,bx=l*mathCos$1(Q),xx=l*mathSin$1(Q),Sx=u*mathCos$1(Ct),Ax=u*mathSin$1(Ct),Cx=on>e;if(Cx){var Tx=n.cornerRadius;Tx&&(a=normalizeCornerRadius(Tx),gn=a[0],Cn=a[1],ex=a[2],ix=a[3]);var Px=mathAbs$1(l-u)/2;if(ax=mathMin$7(Px,ex),ox=mathMin$7(Px,ix),lx=mathMin$7(Px,gn),cx=mathMin$7(Px,Cn),fx=dx=mathMax$7(ax,ox),ux=hx=mathMax$7(lx,cx),(dx>e||hx>e)&&(gx=l*mathCos$1(Ct),yx=l*mathSin$1(Ct),_x=u*mathCos$1(Q),vx=u*mathSin$1(Q),on<PI$6)){var Fx=intersect(bx,xx,_x,vx,gx,yx,Sx,Ax);if(Fx){var Mx=bx-Fx[0],Dx=xx-Fx[1],Ox=gx-Fx[0],Lx=yx-Fx[1],Nx=1/mathSin$1(mathACos((Mx*Ox+Dx*Lx)/(mathSqrt(Mx*Mx+Dx*Dx)*mathSqrt(Ox*Ox+Lx*Lx)))/2),Gx=mathSqrt(Fx[0]*Fx[0]+Fx[1]*Fx[1]);fx=mathMin$7(dx,(l-Gx)/(Nx+1)),ux=mathMin$7(hx,(u-Gx)/(Nx-1))}}}if(!Cx)t.moveTo(ar+bx,en+xx);else if(fx>e){var Ux=mathMin$7(ex,fx),Hx=mathMin$7(ix,fx),Vx=computeCornerTangents(_x,vx,bx,xx,l,Ux,tn),zx=computeCornerTangents(gx,yx,Sx,Ax,l,Hx,tn);t.moveTo(ar+Vx.cx+Vx.x0,en+Vx.cy+Vx.y0),fx<dx&&Ux===Hx?t.arc(ar+Vx.cx,en+Vx.cy,fx,mathATan2(Vx.y0,Vx.x0),mathATan2(zx.y0,zx.x0),!tn):(Ux>0&&t.arc(ar+Vx.cx,en+Vx.cy,Ux,mathATan2(Vx.y0,Vx.x0),mathATan2(Vx.y1,Vx.x1),!tn),t.arc(ar,en,l,mathATan2(Vx.cy+Vx.y1,Vx.cx+Vx.x1),mathATan2(zx.cy+zx.y1,zx.cx+zx.x1),!tn),Hx>0&&t.arc(ar+zx.cx,en+zx.cy,Hx,mathATan2(zx.y1,zx.x1),mathATan2(zx.y0,zx.x0),!tn))}else t.moveTo(ar+bx,en+xx),t.arc(ar,en,l,Q,Ct,!tn);if(!(u>e)||!Cx)t.lineTo(ar+Sx,en+Ax);else if(ux>e){var Ux=mathMin$7(gn,ux),Hx=mathMin$7(Cn,ux),Vx=computeCornerTangents(Sx,Ax,gx,yx,u,-Hx,tn),zx=computeCornerTangents(bx,xx,_x,vx,u,-Ux,tn);t.lineTo(ar+Vx.cx+Vx.x0,en+Vx.cy+Vx.y0),ux<hx&&Ux===Hx?t.arc(ar+Vx.cx,en+Vx.cy,ux,mathATan2(Vx.y0,Vx.x0),mathATan2(zx.y0,zx.x0),!tn):(Hx>0&&t.arc(ar+Vx.cx,en+Vx.cy,Hx,mathATan2(Vx.y0,Vx.x0),mathATan2(Vx.y1,Vx.x1),!tn),t.arc(ar,en,u,mathATan2(Vx.cy+Vx.y1,Vx.cx+Vx.x1),mathATan2(zx.cy+zx.y1,zx.cx+zx.x1),tn),Ux>0&&t.arc(ar+zx.cx,en+zx.cy,Ux,mathATan2(zx.y1,zx.x1),mathATan2(zx.y0,zx.x0),!tn))}else t.lineTo(ar+Sx,en+Ax),t.arc(ar,en,u,Ct,Q,tn)}t.closePath()}}}var SectorShape=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Sector=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(a,l){buildPath$1(a,l)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n}(Path);Sector.prototype.type="sector";var RingShape=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),Ring=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(a,l){var u=l.cx,c=l.cy,p=Math.PI*2;a.moveTo(u+l.r,c),a.arc(u,c,l.r,0,p,!1),a.moveTo(u+l.r0,c),a.arc(u,c,l.r0,0,p,!0)},n}(Path);Ring.prototype.type="ring";function smoothBezier(t,n,a,l){var u=[],c=[],p=[],d=[],Q,Ct,ar,en;if(l){ar=[1/0,1/0],en=[-1/0,-1/0];for(var tn=0,on=t.length;tn<on;tn++)min$1(ar,ar,t[tn]),max$1(en,en,t[tn]);min$1(ar,ar,l[0]),max$1(en,en,l[1])}for(var tn=0,on=t.length;tn<on;tn++){var cn=t[tn];if(a)Q=t[tn?tn-1:on-1],Ct=t[(tn+1)%on];else if(tn===0||tn===on-1){u.push(clone$3(t[tn]));continue}else Q=t[tn-1],Ct=t[tn+1];sub(c,Ct,Q),scale$2(c,c,n);var gn=distance(cn,Q),Cn=distance(cn,Ct),ex=gn+Cn;ex!==0&&(gn/=ex,Cn/=ex),scale$2(p,c,-gn),scale$2(d,c,Cn);var ix=add([],cn,p),ax=add([],cn,d);l&&(max$1(ix,ix,ar),min$1(ix,ix,en),max$1(ax,ax,ar),min$1(ax,ax,en)),u.push(ix),u.push(ax)}return a&&u.push(u.shift()),u}function buildPath(t,n,a){var l=n.smooth,u=n.points;if(u&&u.length>=2){if(l){var c=smoothBezier(u,l,a,n.smoothConstraint);t.moveTo(u[0][0],u[0][1]);for(var p=u.length,d=0;d<(a?p:p-1);d++){var Q=c[d*2],Ct=c[d*2+1],ar=u[(d+1)%p];t.bezierCurveTo(Q[0],Q[1],Ct[0],Ct[1],ar[0],ar[1])}}else{t.moveTo(u[0][0],u[0][1]);for(var d=1,en=u.length;d<en;d++)t.lineTo(u[d][0],u[d][1])}a&&t.closePath()}}var PolygonShape=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),Polygon=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(a,l){buildPath(a,l,!0)},n}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Polyline$1=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(a,l){buildPath(a,l,!1)},n}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),Line$1=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(a,l){var u,c,p,d;if(this.subPixelOptimize){var Q=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,l,this.style);u=Q.x1,c=Q.y1,p=Q.x2,d=Q.y2}else u=l.x1,c=l.y1,p=l.x2,d=l.y2;var Ct=l.percent;Ct!==0&&(a.moveTo(u,c),Ct<1&&(p=u*(1-Ct)+p*Ct,d=c*(1-Ct)+d*Ct),a.lineTo(p,d))},n.prototype.pointAt=function(a){var l=this.shape;return[l.x1*(1-a)+l.x2*a,l.y1*(1-a)+l.y2*a]},n}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function someVectorAt(t,n,a){var l=t.cpx2,u=t.cpy2;return l!=null||u!=null?[(a?cubicDerivativeAt:cubicAt)(t.x1,t.cpx1,t.cpx2,t.x2,n),(a?cubicDerivativeAt:cubicAt)(t.y1,t.cpy1,t.cpy2,t.y2,n)]:[(a?quadraticDerivativeAt:quadraticAt$1)(t.x1,t.cpx1,t.x2,n),(a?quadraticDerivativeAt:quadraticAt$1)(t.y1,t.cpy1,t.y2,n)]}var BezierCurve=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(a,l){var u=l.x1,c=l.y1,p=l.x2,d=l.y2,Q=l.cpx1,Ct=l.cpy1,ar=l.cpx2,en=l.cpy2,tn=l.percent;tn!==0&&(a.moveTo(u,c),ar==null||en==null?(tn<1&&(quadraticSubdivide(u,Q,p,tn,out),Q=out[1],p=out[2],quadraticSubdivide(c,Ct,d,tn,out),Ct=out[1],d=out[2]),a.quadraticCurveTo(Q,Ct,p,d)):(tn<1&&(cubicSubdivide(u,Q,ar,p,tn,out),Q=out[1],ar=out[2],p=out[3],cubicSubdivide(c,Ct,en,d,tn,out),Ct=out[1],en=out[2],d=out[3]),a.bezierCurveTo(Q,Ct,ar,en,p,d)))},n.prototype.pointAt=function(a){return someVectorAt(this.shape,a,!1)},n.prototype.tangentAt=function(a){var l=someVectorAt(this.shape,a,!0);return normalize$3(l,l)},n}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Arc=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(a,l){var u=l.cx,c=l.cy,p=Math.max(l.r,0),d=l.startAngle,Q=l.endAngle,Ct=l.clockwise,ar=Math.cos(d),en=Math.sin(d);a.moveTo(ar*p+u,en*p+c),a.arc(u,c,p,d,Q,!Ct)},n}(Path);Arc.prototype.type="arc";var CompoundPath=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="compound",a}return n.prototype._updatePathDirty=function(){for(var a=this.shape.paths,l=this.shapeChanged(),u=0;u<a.length;u++)l=l||a[u].shapeChanged();l&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var a=this.shape.paths||[],l=this.getGlobalScale(),u=0;u<a.length;u++)a[u].path||a[u].createPathProxy(),a[u].path.setScale(l[0],l[1],a[u].segmentIgnoreThreshold)},n.prototype.buildPath=function(a,l){for(var u=l.paths||[],c=0;c<u.length;c++)u[c].buildPath(a,u[c].shape,!0)},n.prototype.afterBrush=function(){for(var a=this.shape.paths||[],l=0;l<a.length;l++)a[l].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},n}(Path),Gradient=function(){function t(n){this.colorStops=n||[]}return t.prototype.addColorStop=function(n,a){this.colorStops.push({offset:n,color:a})},t}(),LinearGradient=function(t){__extends(n,t);function n(a,l,u,c,p,d){var Q=t.call(this,p)||this;return Q.x=a??0,Q.y=l??0,Q.x2=u??1,Q.y2=c??0,Q.type="linear",Q.global=d||!1,Q}return n}(Gradient),RadialGradient=function(t){__extends(n,t);function n(a,l,u,c,p){var d=t.call(this,c)||this;return d.x=a??.5,d.y=l??.5,d.r=u??.5,d.type="radial",d.global=p||!1,d}return n}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function t(n,a){this._corners=[],this._axes=[],this._origin=[0,0];for(var l=0;l<4;l++)this._corners[l]=new Point;for(var l=0;l<2;l++)this._axes[l]=new Point;n&&this.fromBoundingRect(n,a)}return t.prototype.fromBoundingRect=function(n,a){var l=this._corners,u=this._axes,c=n.x,p=n.y,d=c+n.width,Q=p+n.height;if(l[0].set(c,p),l[1].set(d,p),l[2].set(d,Q),l[3].set(c,Q),a)for(var Ct=0;Ct<4;Ct++)l[Ct].transform(a);Point.sub(u[0],l[1],l[0]),Point.sub(u[1],l[3],l[0]),u[0].normalize(),u[1].normalize();for(var Ct=0;Ct<2;Ct++)this._origin[Ct]=u[Ct].dot(l[0])},t.prototype.intersect=function(n,a){var l=!0,u=!a;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,n,minTv,maxTv,u,1)&&(l=!1,u)||!this._intersectCheckOneSide(n,this,minTv,maxTv,u,-1)&&(l=!1,u)||u||Point.copy(a,l?minTv:maxTv),l},t.prototype._intersectCheckOneSide=function(n,a,l,u,c,p){for(var d=!0,Q=0;Q<2;Q++){var Ct=this._axes[Q];if(this._getProjMinMaxOnAxis(Q,n._corners,extent),this._getProjMinMaxOnAxis(Q,a._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(d=!1,c)return d;var ar=Math.abs(extent2[0]-extent[1]),en=Math.abs(extent[0]-extent2[1]);Math.min(ar,en)>u.len()&&(ar<en?Point.scale(u,Ct,-ar*p):Point.scale(u,Ct,en*p))}else if(l){var ar=Math.abs(extent2[0]-extent[1]),en=Math.abs(extent[0]-extent2[1]);Math.min(ar,en)<l.len()&&(ar<en?Point.scale(l,Ct,ar*p):Point.scale(l,Ct,-en*p))}}return d},t.prototype._getProjMinMaxOnAxis=function(n,a,l){for(var u=this._axes[n],c=this._origin,p=a[0].dot(u)+c[n],d=p,Q=p,Ct=1;Ct<a.length;Ct++){var ar=a[Ct].dot(u)+c[n];d=Math.min(ar,d),Q=Math.max(ar,Q)}l[0]=d,l[1]=Q},t}(),m=[],IncrementalDisplayable=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.notClear=!0,a.incremental=!0,a._displayables=[],a._temporaryDisplayables=[],a._cursor=0,a}return n.prototype.traverse=function(a,l){a.call(l,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(a,l){l?this._temporaryDisplayables.push(a):this._displayables.push(a),this.markRedraw()},n.prototype.addDisplayables=function(a,l){l=l||!1;for(var u=0;u<a.length;u++)this.addDisplayable(a[u],l)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(a){for(var l=this._cursor;l<this._displayables.length;l++)a&&a(this._displayables[l]);for(var l=0;l<this._temporaryDisplayables.length;l++)a&&a(this._temporaryDisplayables[l])},n.prototype.update=function(){this.updateTransform();for(var a=this._cursor;a<this._displayables.length;a++){var l=this._displayables[a];l.parent=this,l.update(),l.parent=null}for(var a=0;a<this._temporaryDisplayables.length;a++){var l=this._temporaryDisplayables[a];l.parent=this,l.update(),l.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var a=new BoundingRect(1/0,1/0,-1/0,-1/0),l=0;l<this._displayables.length;l++){var u=this._displayables[l],c=u.getBoundingRect().clone();u.needLocalTransform()&&c.applyTransform(u.getLocalTransform(m)),a.union(c)}this._rect=a}return this._rect},n.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l),c=this.getBoundingRect();if(c.contain(u[0],u[1]))for(var p=0;p<this._displayables.length;p++){var d=this._displayables[p];if(d.contain(a,l))return!0}return!1},n}(Displayable),transitionStore=makeInner();function getAnimationConfig(t,n,a,l,u){var c;if(n&&n.ecModel){var p=n.ecModel.getUpdatePayload();c=p&&p.animation}var d=n&&n.isAnimationEnabled(),Q=t==="update";if(d){var Ct=void 0,ar=void 0,en=void 0;l?(Ct=retrieve2(l.duration,200),ar=retrieve2(l.easing,"cubicOut"),en=0):(Ct=n.getShallow(Q?"animationDurationUpdate":"animationDuration"),ar=n.getShallow(Q?"animationEasingUpdate":"animationEasing"),en=n.getShallow(Q?"animationDelayUpdate":"animationDelay")),c&&(c.duration!=null&&(Ct=c.duration),c.easing!=null&&(ar=c.easing),c.delay!=null&&(en=c.delay)),isFunction$1(en)&&(en=en(a,u)),isFunction$1(Ct)&&(Ct=Ct(a));var tn={duration:Ct||0,delay:en,easing:ar};return tn}else return null}function animateOrSetProps(t,n,a,l,u,c,p){var d=!1,Q;isFunction$1(u)?(p=c,c=u,u=null):isObject$3(u)&&(c=u.cb,p=u.during,d=u.isFrom,Q=u.removeOpt,u=u.dataIndex);var Ct=t==="leave";Ct||n.stopAnimation("leave");var ar=getAnimationConfig(t,l,u,Ct?Q||{}:null,l&&l.getAnimationDelayParams?l.getAnimationDelayParams(n,u):null);if(ar&&ar.duration>0){var en=ar.duration,tn=ar.delay,on=ar.easing,cn={duration:en,delay:tn||0,easing:on,done:c,force:!!c||!!p,setToFinal:!Ct,scope:t,during:p};d?n.animateFrom(a,cn):n.animateTo(a,cn)}else n.stopAnimation(),!d&&n.attr(a),p&&p(1),c&&c()}function updateProps$1(t,n,a,l,u,c){animateOrSetProps("update",t,n,a,l,u,c)}function initProps(t,n,a,l,u,c){animateOrSetProps("enter",t,n,a,l,u,c)}function isElementRemoved(t){if(!t.__zr)return!0;for(var n=0;n<t.animators.length;n++){var a=t.animators[n];if(a.scope==="leave")return!0}return!1}function removeElement(t,n,a,l,u,c){isElementRemoved(t)||animateOrSetProps("leave",t,n,a,l,u,c)}function fadeOutDisplayable(t,n,a,l){t.removeTextContent(),t.removeTextGuideLine(),removeElement(t,{style:{opacity:0}},n,a,l)}function removeElementWithFadeOut(t,n,a){function l(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(u){u.isGroup||fadeOutDisplayable(u,n,a,l)}):fadeOutDisplayable(t,n,a,l)}function saveOldStyle(t){transitionStore(t).oldStyle=t.style}function getOldStyle(t){return transitionStore(t).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(t){return Path.extend(t)}var extendPathFromString=extendFromString;function extendPath(t,n){return extendPathFromString(t,n)}function registerShape(t,n){_customShapeMap[t]=n}function getShapeClass(t){if(_customShapeMap.hasOwnProperty(t))return _customShapeMap[t]}function makePath(t,n,a,l){var u=createFromString(t,n);return a&&(l==="center"&&(a=centerGraphic(a,u.getBoundingRect())),resizePath(u,a)),u}function makeImage(t,n,a){var l=new ZRImage({style:{image:t,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(u){if(a==="center"){var c={width:u.width,height:u.height};l.setStyle(centerGraphic(n,c))}}});return l}function centerGraphic(t,n){var a=n.width/n.height,l=t.height*a,u;l<=t.width?u=t.height:(l=t.width,u=l/a);var c=t.x+t.width/2,p=t.y+t.height/2;return{x:c-l/2,y:p-u/2,width:l,height:u}}var mergePath=mergePath$1;function resizePath(t,n){if(t.applyTransform){var a=t.getBoundingRect(),l=a.calculateTransform(n);t.applyTransform(l)}}function subPixelOptimizeLine(t,n){return subPixelOptimizeLine$1(t,t,{lineWidth:n}),t}function subPixelOptimizeRect(t){return subPixelOptimizeRect$1(t.shape,t.shape,t.style),t}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(t,n){for(var a=identity([]);t&&t!==n;)mul(a,t.getLocalTransform(),a),t=t.parent;return a}function applyTransform(t,n,a){return n&&!isArrayLike(n)&&(n=Transformable.getLocalTransform(n)),a&&(n=invert([],n)),applyTransform$1([],t,n)}function transformDirection(t,n,a){var l=n[4]===0||n[5]===0||n[0]===0?1:Math.abs(2*n[4]/n[0]),u=n[4]===0||n[5]===0||n[2]===0?1:Math.abs(2*n[4]/n[2]),c=[t==="left"?-l:t==="right"?l:0,t==="top"?-u:t==="bottom"?u:0];return c=applyTransform(c,n,a),Math.abs(c[0])>Math.abs(c[1])?c[0]>0?"right":"left":c[1]>0?"bottom":"top"}function isNotGroup(t){return!t.isGroup}function isPath$1(t){return t.shape!=null}function groupTransition(t,n,a){if(!t||!n)return;function l(p){var d={};return p.traverse(function(Q){isNotGroup(Q)&&Q.anid&&(d[Q.anid]=Q)}),d}function u(p){var d={x:p.x,y:p.y,rotation:p.rotation};return isPath$1(p)&&(d.shape=extend({},p.shape)),d}var c=l(t);n.traverse(function(p){if(isNotGroup(p)&&p.anid){var d=c[p.anid];if(d){var Q=u(p);p.attr(u(d)),updateProps$1(p,Q,a,getECData(p).dataIndex)}}})}function clipPointsByRect(t,n){return map$1(t,function(a){var l=a[0];l=mathMax$6(l,n.x),l=mathMin$6(l,n.x+n.width);var u=a[1];return u=mathMax$6(u,n.y),u=mathMin$6(u,n.y+n.height),[l,u]})}function clipRectByRect(t,n){var a=mathMax$6(t.x,n.x),l=mathMin$6(t.x+t.width,n.x+n.width),u=mathMax$6(t.y,n.y),c=mathMin$6(t.y+t.height,n.y+n.height);if(l>=a&&c>=u)return{x:a,y:u,width:l-a,height:c-u}}function createIcon(t,n,a){var l=extend({rectHover:!0},n),u=l.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(u.image=t.slice(8),defaults(u,a),new ZRImage(l)):makePath(t.replace("path://",""),l,a,"center")}function linePolygonIntersect(t,n,a,l,u){for(var c=0,p=u[u.length-1];c<u.length;c++){var d=u[c];if(lineLineIntersect$1(t,n,a,l,d[0],d[1],p[0],p[1]))return!0;p=d}}function lineLineIntersect$1(t,n,a,l,u,c,p,d){var Q=a-t,Ct=l-n,ar=p-u,en=d-c,tn=crossProduct2d$1(ar,en,Q,Ct);if(nearZero(tn))return!1;var on=t-u,cn=n-c,gn=crossProduct2d$1(on,cn,Q,Ct)/tn;if(gn<0||gn>1)return!1;var Cn=crossProduct2d$1(on,cn,ar,en)/tn;return!(Cn<0||Cn>1)}function crossProduct2d$1(t,n,a,l){return t*l-a*n}function nearZero(t){return t<=1e-6&&t>=-1e-6}function setTooltipConfig(t){var n=t.itemTooltipOption,a=t.componentModel,l=t.itemName,u=isString$1(n)?{formatter:n}:n,c=a.mainType,p=a.componentIndex,d={componentType:c,name:l,$vars:["name"]};d[c+"Index"]=p;var Q=t.formatterParamsExtra;Q&&each$f(keys(Q),function(ar){hasOwn(d,ar)||(d[ar]=Q[ar],d.$vars.push(ar))});var Ct=getECData(t.el);Ct.componentMainType=c,Ct.componentIndex=p,Ct.tooltipConfig={name:l,option:defaults({content:l,encodeHTMLContent:!0,formatterParams:d},u)}}function traverseElement(t,n){var a;t.isGroup&&(a=n(t)),a||t.traverse(n)}function traverseElements(t,n){if(t)if(isArray$1(t))for(var a=0;a<t.length;a++)traverseElement(t[a],n);else traverseElement(t,n)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(t,n){for(var a=0;a<SPECIAL_STATES.length;a++){var l=SPECIAL_STATES[a],u=n[l],c=t.ensureState(l);c.style=c.style||{},c.style.text=u}var p=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:n.normal}),t.useStates(p,!0)}function getLabelText(t,n,a){var l=t.labelFetcher,u=t.labelDataIndex,c=t.labelDimIndex,p=n.normal,d;l&&(d=l.getFormattedLabel(u,"normal",null,c,p&&p.get("formatter"),a!=null?{interpolatedValue:a}:null)),d==null&&(d=isFunction$1(t.defaultText)?t.defaultText(u,t,a):t.defaultText);for(var Q={normal:d},Ct=0;Ct<SPECIAL_STATES.length;Ct++){var ar=SPECIAL_STATES[Ct],en=n[ar];Q[ar]=retrieve2(l?l.getFormattedLabel(u,ar,null,c,en&&en.get("formatter")):null,d)}return Q}function setLabelStyle(t,n,a,l){a=a||EMPTY_OBJ;for(var u=t instanceof ZRText,c=!1,p=0;p<DISPLAY_STATES.length;p++){var d=n[DISPLAY_STATES[p]];if(d&&d.getShallow("show")){c=!0;break}}var Q=u?t:t.getTextContent();if(c){u||(Q||(Q=new ZRText,t.setTextContent(Q)),t.stateProxy&&(Q.stateProxy=t.stateProxy));var Ct=getLabelText(a,n),ar=n.normal,en=!!ar.getShallow("show"),tn=createTextStyle$1(ar,l&&l.normal,a,!1,!u);tn.text=Ct.normal,u||t.setTextConfig(createTextConfig(ar,a,!1));for(var p=0;p<SPECIAL_STATES.length;p++){var on=SPECIAL_STATES[p],d=n[on];if(d){var cn=Q.ensureState(on),gn=!!retrieve2(d.getShallow("show"),en);if(gn!==en&&(cn.ignore=!gn),cn.style=createTextStyle$1(d,l&&l[on],a,!0,!u),cn.style.text=Ct[on],!u){var Cn=t.ensureState(on);Cn.textConfig=createTextConfig(d,a,!0)}}}Q.silent=!!ar.getShallow("silent"),Q.style.x!=null&&(tn.x=Q.style.x),Q.style.y!=null&&(tn.y=Q.style.y),Q.ignore=!en,Q.useStyle(tn),Q.dirty(),a.enableTextSetter&&(labelInner(Q).setLabelText=function(ex){var ix=getLabelText(a,n,ex);setLabelText(Q,ix)})}else Q&&(Q.ignore=!0);t.dirty()}function getLabelStatesModels(t,n){n=n||"label";for(var a={normal:t.getModel(n)},l=0;l<SPECIAL_STATES.length;l++){var u=SPECIAL_STATES[l];a[u]=t.getModel([u,n])}return a}function createTextStyle$1(t,n,a,l,u){var c={};return setTextStyleCommon(c,t,a,l,u),n&&extend(c,n),c}function createTextConfig(t,n,a){n=n||{};var l={},u,c=t.getShallow("rotate"),p=retrieve2(t.getShallow("distance"),a?null:5),d=t.getShallow("offset");return u=t.getShallow("position")||(a?null:"inside"),u==="outside"&&(u=n.defaultOutsidePosition||"top"),u!=null&&(l.position=u),d!=null&&(l.offset=d),c!=null&&(c*=Math.PI/180,l.rotation=c),p!=null&&(l.distance=p),l.outsideFill=t.get("color")==="inherit"?n.inheritColor||null:"auto",l}function setTextStyleCommon(t,n,a,l,u){a=a||EMPTY_OBJ;var c=n.ecModel,p=c&&c.option.textStyle,d=getRichItemNames(n),Q;if(d){Q={};for(var Ct in d)if(d.hasOwnProperty(Ct)){var ar=n.getModel(["rich",Ct]);setTokenTextStyle(Q[Ct]={},ar,p,a,l,u,!1,!0)}}Q&&(t.rich=Q);var en=n.get("overflow");en&&(t.overflow=en);var tn=n.get("minMargin");tn!=null&&(t.margin=tn),setTokenTextStyle(t,n,p,a,l,u,!0,!1)}function getRichItemNames(t){for(var n;t&&t!==t.ecModel;){var a=(t.option||EMPTY_OBJ).rich;if(a){n=n||{};for(var l=keys(a),u=0;u<l.length;u++){var c=l[u];n[c]=1}}t=t.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(t,n,a,l,u,c,p,d){a=!u&&a||EMPTY_OBJ;var Q=l&&l.inheritColor,Ct=n.getShallow("color"),ar=n.getShallow("textBorderColor"),en=retrieve2(n.getShallow("opacity"),a.opacity);(Ct==="inherit"||Ct==="auto")&&(Q?Ct=Q:Ct=null),(ar==="inherit"||ar==="auto")&&(Q?ar=Q:ar=null),c||(Ct=Ct||a.color,ar=ar||a.textBorderColor),Ct!=null&&(t.fill=Ct),ar!=null&&(t.stroke=ar);var tn=retrieve2(n.getShallow("textBorderWidth"),a.textBorderWidth);tn!=null&&(t.lineWidth=tn);var on=retrieve2(n.getShallow("textBorderType"),a.textBorderType);on!=null&&(t.lineDash=on);var cn=retrieve2(n.getShallow("textBorderDashOffset"),a.textBorderDashOffset);cn!=null&&(t.lineDashOffset=cn),!u&&en==null&&!d&&(en=l&&l.defaultOpacity),en!=null&&(t.opacity=en),!u&&!c&&t.fill==null&&l.inheritColor&&(t.fill=l.inheritColor);for(var gn=0;gn<TEXT_PROPS_WITH_GLOBAL.length;gn++){var Cn=TEXT_PROPS_WITH_GLOBAL[gn],ex=retrieve2(n.getShallow(Cn),a[Cn]);ex!=null&&(t[Cn]=ex)}for(var gn=0;gn<TEXT_PROPS_SELF.length;gn++){var Cn=TEXT_PROPS_SELF[gn],ex=n.getShallow(Cn);ex!=null&&(t[Cn]=ex)}if(t.verticalAlign==null){var ix=n.getShallow("baseline");ix!=null&&(t.verticalAlign=ix)}if(!p||!l.disableBox){for(var gn=0;gn<TEXT_PROPS_BOX.length;gn++){var Cn=TEXT_PROPS_BOX[gn],ex=n.getShallow(Cn);ex!=null&&(t[Cn]=ex)}var ax=n.getShallow("borderType");ax!=null&&(t.borderDash=ax),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&Q&&(t.backgroundColor=Q),(t.borderColor==="auto"||t.borderColor==="inherit")&&Q&&(t.borderColor=Q)}}function getFont(t,n){var a=n&&n.getModel("textStyle");return trim$1([t.fontStyle||a&&a.getShallow("fontStyle")||"",t.fontWeight||a&&a.getShallow("fontWeight")||"",(t.fontSize||a&&a.getShallow("fontSize")||12)+"px",t.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(t,n,a,l){if(t){var u=labelInner(t);u.prevValue=u.value,u.value=a;var c=n.normal;u.valueAnimation=c.get("valueAnimation"),u.valueAnimation&&(u.precision=c.get("precision"),u.defaultInterpolatedText=l,u.statesModels=n)}}function animateLabelValue(t,n,a,l,u){var c=labelInner(t);if(!c.valueAnimation||c.prevValue===c.value)return;var p=c.defaultInterpolatedText,d=retrieve2(c.interpolatedValue,c.prevValue),Q=c.value;function Ct(ar){var en=interpolateRawValues(a,c.precision,d,Q,ar);c.interpolatedValue=ar===1?null:en;var tn=getLabelText({labelDataIndex:n,labelFetcher:u,defaultText:p?p(en):en+""},c.statesModels,en);setLabelText(t,tn)}t.percent=0,(c.prevValue==null?initProps:updateProps$1)(t,{percent:1},l,n,null,Ct)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function t(){}return t.prototype.getTextColor=function(n){var a=this.ecModel;return this.getShallow("color")||(!n&&a?a.get(PATH_COLOR):null)},t.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(n){for(var a={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},l=0;l<textStyleParams.length;l++)a[textStyleParams[l]]=this.getShallow(textStyleParams[l]);return tmpText.useStyle(a),tmpText.update(),tmpText.getBoundingRect()},t}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function t(){}return t.prototype.getLineStyle=function(n){return getLineStyle(this,n)},t}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function t(){}return t.prototype.getItemStyle=function(n,a){return getItemStyle(this,n,a)},t}(),Model=function(){function t(n,a,l){this.parentModel=a,this.ecModel=l,this.option=n}return t.prototype.init=function(n,a,l){},t.prototype.mergeOption=function(n,a){merge(this.option,n,!0)},t.prototype.get=function(n,a){return n==null?this.option:this._doGet(this.parsePath(n),!a&&this.parentModel)},t.prototype.getShallow=function(n,a){var l=this.option,u=l==null?l:l[n];if(u==null&&!a){var c=this.parentModel;c&&(u=c.getShallow(n))}return u},t.prototype.getModel=function(n,a){var l=n!=null,u=l?this.parsePath(n):null,c=l?this._doGet(u):this.option;return a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(u)),new t(c,a,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var n=this.constructor;return new n(clone$4(this.option))},t.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},t.prototype.resolveParentPath=function(n){return n},t.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(n,a){var l=this.option;if(!n)return l;for(var u=0;u<n.length&&!(n[u]&&(l=l&&typeof l=="object"?l[n[u]]:null,l==null));u++);return l==null&&a&&(l=a._doGet(this.resolveParentPath(n),a.parentModel)),l},t}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(t){return[t||"",base++].join("_")}function enableSubTypeDefaulter(t){var n={};t.registerSubTypeDefaulter=function(a,l){var u=parseClassType(a);n[u.main]=l},t.determineSubType=function(a,l){var u=l.type;if(!u){var c=parseClassType(a).main;t.hasSubTypes(a)&&n[c]&&(u=n[c](l))}return u}}function enableTopologicalTravel(t,n){t.topologicalTravel=function(c,p,d,Q){if(!c.length)return;var Ct=a(p),ar=Ct.graph,en=Ct.noEntryList,tn={};for(each$f(c,function(ix){tn[ix]=!0});en.length;){var on=en.pop(),cn=ar[on],gn=!!tn[on];gn&&(d.call(Q,on,cn.originalDeps.slice()),delete tn[on]),each$f(cn.successor,gn?ex:Cn)}each$f(tn,function(){var ix="";throw new Error(ix)});function Cn(ix){ar[ix].entryCount--,ar[ix].entryCount===0&&en.push(ix)}function ex(ix){tn[ix]=!0,Cn(ix)}};function a(c){var p={},d=[];return each$f(c,function(Q){var Ct=l(p,Q),ar=Ct.originalDeps=n(Q),en=u(ar,c);Ct.entryCount=en.length,Ct.entryCount===0&&d.push(Q),each$f(en,function(tn){indexOf(Ct.predecessor,tn)<0&&Ct.predecessor.push(tn);var on=l(p,tn);indexOf(on.successor,tn)<0&&on.successor.push(Q)})}),{graph:p,noEntryList:d}}function l(c,p){return c[p]||(c[p]={predecessor:[],successor:[]}),c[p]}function u(c,p){var d=[];return each$f(c,function(Q){indexOf(p,Q)>=0&&d.push(Q)}),d}}function inheritDefaultOption(t,n){return merge(merge({},t,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return t.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(t,n){t=t.toUpperCase(),localeModels[t]=new Model(n),localeStorage[t]=n}function createLocaleObject(t){if(isString$1(t)){var n=localeStorage[t.toUpperCase()]||{};return t===LOCALE_ZH||t===LOCALE_EN?clone$4(n):merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(t){return localeModels[t]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(t,n){return t+="","0000".substr(0,n-t.length)+t}function getPrimaryTimeUnit(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function isPrimaryTimeUnit(t){return t===getPrimaryTimeUnit(t)}function getDefaultFormatPrecisionOfInterval(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(t,n,a,l){var u=parseDate(t),c=u[fullYearGetterName(a)](),p=u[monthGetterName(a)]()+1,d=Math.floor((p-1)/3)+1,Q=u[dateGetterName(a)](),Ct=u["get"+(a?"UTC":"")+"Day"](),ar=u[hoursGetterName(a)](),en=(ar-1)%12+1,tn=u[minutesGetterName(a)](),on=u[secondsGetterName(a)](),cn=u[millisecondsGetterName(a)](),gn=ar>=12?"pm":"am",Cn=gn.toUpperCase(),ex=l instanceof Model?l:getLocaleModel(l||SYSTEM_LANG)||getDefaultLocaleModel(),ix=ex.getModel("time"),ax=ix.get("month"),ox=ix.get("monthAbbr"),lx=ix.get("dayOfWeek"),cx=ix.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,gn+"").replace(/{A}/g,Cn+"").replace(/{yyyy}/g,c+"").replace(/{yy}/g,pad(c%100+"",2)).replace(/{Q}/g,d+"").replace(/{MMMM}/g,ax[p-1]).replace(/{MMM}/g,ox[p-1]).replace(/{MM}/g,pad(p,2)).replace(/{M}/g,p+"").replace(/{dd}/g,pad(Q,2)).replace(/{d}/g,Q+"").replace(/{eeee}/g,lx[Ct]).replace(/{ee}/g,cx[Ct]).replace(/{e}/g,Ct+"").replace(/{HH}/g,pad(ar,2)).replace(/{H}/g,ar+"").replace(/{hh}/g,pad(en+"",2)).replace(/{h}/g,en+"").replace(/{mm}/g,pad(tn,2)).replace(/{m}/g,tn+"").replace(/{ss}/g,pad(on,2)).replace(/{s}/g,on+"").replace(/{SSS}/g,pad(cn,3)).replace(/{S}/g,cn+"")}function leveledFormat(t,n,a,l,u){var c=null;if(isString$1(a))c=a;else if(isFunction$1(a))c=a(t.value,n,{level:t.level});else{var p=extend({},defaultLeveledFormatter);if(t.level>0)for(var d=0;d<primaryTimeUnits.length;++d)p[primaryTimeUnits[d]]="{primary|"+p[primaryTimeUnits[d]]+"}";var Q=a?a.inherit===!1?a:defaults(a,p):p,Ct=getUnitFromValue(t.value,u);if(Q[Ct])c=Q[Ct];else if(Q.inherit){for(var ar=timeUnits.indexOf(Ct),d=ar-1;d>=0;--d)if(Q[Ct]){c=Q[Ct];break}c=c||p.none}if(isArray$1(c)){var en=t.level==null?0:t.level>=0?t.level:c.length+t.level;en=Math.min(en,c.length-1),c=c[en]}}return format$1(new Date(t.value),c,u,l)}function getUnitFromValue(t,n){var a=parseDate(t),l=a[monthGetterName(n)]()+1,u=a[dateGetterName(n)](),c=a[hoursGetterName(n)](),p=a[minutesGetterName(n)](),d=a[secondsGetterName(n)](),Q=a[millisecondsGetterName(n)](),Ct=Q===0,ar=Ct&&d===0,en=ar&&p===0,tn=en&&c===0,on=tn&&u===1,cn=on&&l===1;return cn?"year":on?"month":tn?"day":en?"hour":ar?"minute":Ct?"second":"millisecond"}function getUnitValue(t,n,a){var l=isNumber(t)?parseDate(t):t;switch(n=n||getUnitFromValue(t,a),n){case"year":return l[fullYearGetterName(a)]();case"half-year":return l[monthGetterName(a)]()>=6?1:0;case"quarter":return Math.floor((l[monthGetterName(a)]()+1)/4);case"month":return l[monthGetterName(a)]();case"day":return l[dateGetterName(a)]();case"half-day":return l[hoursGetterName(a)]()/24;case"hour":return l[hoursGetterName(a)]();case"minute":return l[minutesGetterName(a)]();case"second":return l[secondsGetterName(a)]();case"millisecond":return l[millisecondsGetterName(a)]()}}function fullYearGetterName(t){return t?"getUTCFullYear":"getFullYear"}function monthGetterName(t){return t?"getUTCMonth":"getMonth"}function dateGetterName(t){return t?"getUTCDate":"getDate"}function hoursGetterName(t){return t?"getUTCHours":"getHours"}function minutesGetterName(t){return t?"getUTCMinutes":"getMinutes"}function secondsGetterName(t){return t?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(t){return t?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(t){return t?"setUTCFullYear":"setFullYear"}function monthSetterName(t){return t?"setUTCMonth":"setMonth"}function dateSetterName(t){return t?"setUTCDate":"setDate"}function hoursSetterName(t){return t?"setUTCHours":"setHours"}function minutesSetterName(t){return t?"setUTCMinutes":"setMinutes"}function secondsSetterName(t){return t?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(t){return t?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(t,n,a,l,u,c,p,d){var Q=new ZRText({style:{text:t,font:n,align:a,verticalAlign:l,padding:u,rich:c,overflow:p?"truncate":null,lineHeight:d}});return Q.getBoundingRect()}function addCommas(t){if(!isNumeric(t))return isString$1(t)?t:"-";var n=(t+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(t,n){return t=(t||"").toLowerCase().replace(/-(.)/g,function(a,l){return l.toUpperCase()}),n&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(t,n,a){var l="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function u(ar){return ar&&trim$1(ar)?ar:"-"}function c(ar){return!!(ar!=null&&!isNaN(ar)&&isFinite(ar))}var p=n==="time",d=t instanceof Date;if(p||d){var Q=p?parseDate(t):t;if(isNaN(+Q)){if(d)return"-"}else return format$1(Q,l,a)}if(n==="ordinal")return isStringSafe(t)?u(t):isNumber(t)&&c(t)?t+"":"-";var Ct=numericToNumber(t);return c(Ct)?addCommas(Ct):isStringSafe(t)?u(t):typeof t=="boolean"?t+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(t,n){return"{"+t+(n??"")+"}"};function formatTpl(t,n,a){isArray$1(n)||(n=[n]);var l=n.length;if(!l)return"";for(var u=n[0].$vars||[],c=0;c<u.length;c++){var p=TPL_VAR_ALIAS[c];t=t.replace(wrapVar(p),wrapVar(p,0))}for(var d=0;d<l;d++)for(var Q=0;Q<u.length;Q++){var Ct=n[d][u[Q]];t=t.replace(wrapVar(TPL_VAR_ALIAS[Q],d),a?encodeHTML(Ct):Ct)}return t}function formatTplSimple(t,n,a){return each$f(n,function(l,u){t=t.replace("{"+u+"}",l)}),t}function getTooltipMarker(t,n){var a=isString$1(t)?{color:t,extraCssText:n}:t||{},l=a.color,u=a.type;n=a.extraCssText;var c=a.renderMode||"html";if(!l)return"";if(c==="html")return u==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(l)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(l)+";"+(n||"")+'"></span>';var p=a.markerId||"markerX";return{renderMode:c,content:"{"+p+"|}  ",style:u==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:l}:{width:10,height:10,borderRadius:5,backgroundColor:l}}}function formatTime(t,n,a){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var l=parseDate(n),u=a?"getUTC":"get",c=l[u+"FullYear"](),p=l[u+"Month"]()+1,d=l[u+"Date"](),Q=l[u+"Hours"](),Ct=l[u+"Minutes"](),ar=l[u+"Seconds"](),en=l[u+"Milliseconds"]();return t=t.replace("MM",pad(p,2)).replace("M",p).replace("yyyy",c).replace("yy",pad(c%100+"",2)).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(Q,2)).replace("h",Q).replace("mm",pad(Ct,2)).replace("m",Ct).replace("ss",pad(ar,2)).replace("s",ar).replace("SSS",pad(en,3)),t}function capitalFirst(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}function convertToColorString(t,n){return n=n||"transparent",isString$1(t)?t:isObject$3(t)&&t.colorStops&&(t.colorStops[0]||{}).color||n}function windowOpen(t,n){if(n==="_blank"||n==="blank"){var a=window.open();a.opener=null,a.location.href=t}else window.open(t,n)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(t,n,a,l,u){var c=0,p=0;l==null&&(l=1/0),u==null&&(u=1/0);var d=0;n.eachChild(function(Q,Ct){var ar=Q.getBoundingRect(),en=n.childAt(Ct+1),tn=en&&en.getBoundingRect(),on,cn;if(t==="horizontal"){var gn=ar.width+(tn?-tn.x+ar.x:0);on=c+gn,on>l||Q.newline?(c=0,on=gn,p+=d+a,d=ar.height):d=Math.max(d,ar.height)}else{var Cn=ar.height+(tn?-tn.y+ar.y:0);cn=p+Cn,cn>u||Q.newline?(c+=d+a,p=0,cn=Cn,d=ar.width):d=Math.max(d,ar.width)}Q.newline||(Q.x=c,Q.y=p,Q.markRedraw(),t==="horizontal"?c=on+a:p=cn+a)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(t,n,a){var l=n.width,u=n.height,c=parsePercent(t.left,l),p=parsePercent(t.top,u),d=parsePercent(t.right,l),Q=parsePercent(t.bottom,u);return(isNaN(c)||isNaN(parseFloat(t.left)))&&(c=0),(isNaN(d)||isNaN(parseFloat(t.right)))&&(d=l),(isNaN(p)||isNaN(parseFloat(t.top)))&&(p=0),(isNaN(Q)||isNaN(parseFloat(t.bottom)))&&(Q=u),a=normalizeCssArray(a||0),{width:Math.max(d-c-a[1]-a[3],0),height:Math.max(Q-p-a[0]-a[2],0)}}function getLayoutRect(t,n,a){a=normalizeCssArray(a||0);var l=n.width,u=n.height,c=parsePercent(t.left,l),p=parsePercent(t.top,u),d=parsePercent(t.right,l),Q=parsePercent(t.bottom,u),Ct=parsePercent(t.width,l),ar=parsePercent(t.height,u),en=a[2]+a[0],tn=a[1]+a[3],on=t.aspect;switch(isNaN(Ct)&&(Ct=l-d-tn-c),isNaN(ar)&&(ar=u-Q-en-p),on!=null&&(isNaN(Ct)&&isNaN(ar)&&(on>l/u?Ct=l*.8:ar=u*.8),isNaN(Ct)&&(Ct=on*ar),isNaN(ar)&&(ar=Ct/on)),isNaN(c)&&(c=l-d-Ct-tn),isNaN(p)&&(p=u-Q-ar-en),t.left||t.right){case"center":c=l/2-Ct/2-a[3];break;case"right":c=l-Ct-tn;break}switch(t.top||t.bottom){case"middle":case"center":p=u/2-ar/2-a[0];break;case"bottom":p=u-ar-en;break}c=c||0,p=p||0,isNaN(Ct)&&(Ct=l-tn-c-(d||0)),isNaN(ar)&&(ar=u-en-p-(Q||0));var cn=new BoundingRect(c+a[3],p+a[0],Ct,ar);return cn.margin=a,cn}function positionElement(t,n,a,l,u,c){var p=!u||!u.hv||u.hv[0],d=!u||!u.hv||u.hv[1],Q=u&&u.boundingMode||"all";if(c=c||t,c.x=t.x,c.y=t.y,!p&&!d)return!1;var Ct;if(Q==="raw")Ct=t.type==="group"?new BoundingRect(0,0,+n.width||0,+n.height||0):t.getBoundingRect();else if(Ct=t.getBoundingRect(),t.needLocalTransform()){var ar=t.getLocalTransform();Ct=Ct.clone(),Ct.applyTransform(ar)}var en=getLayoutRect(defaults({width:Ct.width,height:Ct.height},n),a,l),tn=p?en.x-Ct.x:0,on=d?en.y-Ct.y:0;return Q==="raw"?(c.x=tn,c.y=on):(c.x+=tn,c.y+=on),c===t&&t.markRedraw(),!0}function sizeCalculable(t,n){return t[HV_NAMES[n][0]]!=null||t[HV_NAMES[n][1]]!=null&&t[HV_NAMES[n][2]]!=null}function fetchLayoutMode(t){var n=t.layoutMode||t.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(t,n,a){var l=a&&a.ignoreSize;!isArray$1(l)&&(l=[l,l]);var u=p(HV_NAMES[0],0),c=p(HV_NAMES[1],1);Ct(HV_NAMES[0],t,u),Ct(HV_NAMES[1],t,c);function p(ar,en){var tn={},on=0,cn={},gn=0,Cn=2;if(each$e(ar,function(ax){cn[ax]=t[ax]}),each$e(ar,function(ax){d(n,ax)&&(tn[ax]=cn[ax]=n[ax]),Q(tn,ax)&&on++,Q(cn,ax)&&gn++}),l[en])return Q(n,ar[1])?cn[ar[2]]=null:Q(n,ar[2])&&(cn[ar[1]]=null),cn;if(gn===Cn||!on)return cn;if(on>=Cn)return tn;for(var ex=0;ex<ar.length;ex++){var ix=ar[ex];if(!d(tn,ix)&&d(t,ix)){tn[ix]=t[ix];break}}return tn}function d(ar,en){return ar.hasOwnProperty(en)}function Q(ar,en){return ar[en]!=null&&ar[en]!=="auto"}function Ct(ar,en,tn){each$e(ar,function(on){en[on]=tn[on]})}}function getLayoutParams(t){return copyLayoutParams({},t)}function copyLayoutParams(t,n){return n&&t&&each$e(LOCATION_PARAMS,function(a){n.hasOwnProperty(a)&&(t[a]=n[a])}),t}var inner$l=makeInner(),ComponentModel=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this,a,l,u)||this;return c.uid=getUID("ec_cpt_model"),c}return n.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u)},n.prototype.mergeDefaultAndTheme=function(a,l){var u=fetchLayoutMode(this),c=u?getLayoutParams(a):{},p=l.getTheme();merge(a,p.get(this.mainType)),merge(a,this.getDefaultOption()),u&&mergeLayoutParam(a,c,u)},n.prototype.mergeOption=function(a,l){merge(this.option,a,!0);var u=fetchLayoutMode(this);u&&mergeLayoutParam(this.option,a,u)},n.prototype.optionUpdated=function(a,l){},n.prototype.getDefaultOption=function(){var a=this.constructor;if(!isExtendedClass(a))return a.defaultOption;var l=inner$l(this);if(!l.defaultOption){for(var u=[],c=a;c;){var p=c.prototype.defaultOption;p&&u.push(p),c=c.superClass}for(var d={},Q=u.length-1;Q>=0;Q--)d=merge(d,u[Q],!0);l.defaultOption=d}return l.defaultOption},n.prototype.getReferringComponents=function(a,l){var u=a+"Index",c=a+"Id";return queryReferringComponents(this.ecModel,a,{index:this.get(u,!0),id:this.get(c,!0)},l)},n.prototype.getBoxLayoutParams=function(){var a=this;return{left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(a){this.option.zlevel=a},n.protoInitialize=function(){var a=n.prototype;a.type="component",a.id="",a.name="",a.mainType="",a.subType="",a.componentIndex=0}(),n}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(t){var n=[];return each$f(ComponentModel.getClassesByMainType(t),function(a){n=n.concat(a.dependencies||a.prototype.dependencies||[])}),n=map$1(n,function(a){return parseClassType(a).main}),t!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(t){innerGlobalModel(t).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(t,n,a){var l={},u=querySeriesUpstreamDatasetModel(n);if(!u||!t)return l;var c=[],p=[],d=n.ecModel,Q=innerGlobalModel(d).datasetMap,Ct=u.uid+"_"+a.seriesLayoutBy,ar,en;t=t.slice(),each$f(t,function(gn,Cn){var ex=isObject$3(gn)?gn:t[Cn]={name:gn};ex.type==="ordinal"&&ar==null&&(ar=Cn,en=cn(ex)),l[ex.name]=[]});var tn=Q.get(Ct)||Q.set(Ct,{categoryWayDim:en,valueWayDim:0});each$f(t,function(gn,Cn){var ex=gn.name,ix=cn(gn);if(ar==null){var ax=tn.valueWayDim;on(l[ex],ax,ix),on(p,ax,ix),tn.valueWayDim+=ix}else if(ar===Cn)on(l[ex],0,ix),on(c,0,ix);else{var ax=tn.categoryWayDim;on(l[ex],ax,ix),on(p,ax,ix),tn.categoryWayDim+=ix}});function on(gn,Cn,ex){for(var ix=0;ix<ex;ix++)gn.push(Cn+ix)}function cn(gn){var Cn=gn.dimsDef;return Cn?Cn.length:1}return c.length&&(l.itemName=c),p.length&&(l.seriesName=p),l}function makeSeriesEncodeForNameBased(t,n,a){var l={},u=querySeriesUpstreamDatasetModel(t);if(!u)return l;var c=n.sourceFormat,p=n.dimensionsDefine,d;(c===SOURCE_FORMAT_OBJECT_ROWS||c===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(p,function(ar,en){(isObject$3(ar)?ar.name:ar)==="name"&&(d=en)});var Q=function(){for(var ar={},en={},tn=[],on=0,cn=Math.min(5,a);on<cn;on++){var gn=doGuessOrdinal(n.data,c,n.seriesLayoutBy,p,n.startIndex,on);tn.push(gn);var Cn=gn===BE_ORDINAL.Not;if(Cn&&ar.v==null&&on!==d&&(ar.v=on),(ar.n==null||ar.n===ar.v||!Cn&&tn[ar.n]===BE_ORDINAL.Not)&&(ar.n=on),ex(ar)&&tn[ar.n]!==BE_ORDINAL.Not)return ar;Cn||(gn===BE_ORDINAL.Might&&en.v==null&&on!==d&&(en.v=on),(en.n==null||en.n===en.v)&&(en.n=on))}function ex(ix){return ix.v!=null&&ix.n!=null}return ex(ar)?ar:ex(en)?en:null}();if(Q){l.value=[Q.v];var Ct=d??Q.n;l.itemName=[Ct],l.seriesName=[Ct]}return l}function querySeriesUpstreamDatasetModel(t){var n=t.get("data",!0);if(!n)return queryReferringComponents(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:queryReferringComponents(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(t,n){return doGuessOrdinal(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,n)}function doGuessOrdinal(t,n,a,l,u,c){var p,d=5;if(isTypedArray(t))return BE_ORDINAL.Not;var Q,Ct;if(l){var ar=l[c];isObject$3(ar)?(Q=ar.name,Ct=ar.type):isString$1(ar)&&(Q=ar)}if(Ct!=null)return Ct==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var en=t;if(a===SERIES_LAYOUT_BY_ROW){for(var tn=en[c],on=0;on<(tn||[]).length&&on<d;on++)if((p=ox(tn[u+on]))!=null)return p}else for(var on=0;on<en.length&&on<d;on++){var cn=en[u+on];if(cn&&(p=ox(cn[c]))!=null)return p}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var gn=t;if(!Q)return BE_ORDINAL.Not;for(var on=0;on<gn.length&&on<d;on++){var Cn=gn[on];if(Cn&&(p=ox(Cn[Q]))!=null)return p}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var ex=t;if(!Q)return BE_ORDINAL.Not;var tn=ex[Q];if(!tn||isTypedArray(tn))return BE_ORDINAL.Not;for(var on=0;on<tn.length&&on<d;on++)if((p=ox(tn[on]))!=null)return p}else if(n===SOURCE_FORMAT_ORIGINAL)for(var ix=t,on=0;on<ix.length&&on<d;on++){var Cn=ix[on],ax=getDataItemValue(Cn);if(!isArray$1(ax))return BE_ORDINAL.Not;if((p=ox(ax[c]))!=null)return p}function ox(lx){var cx=isString$1(lx);if(lx!=null&&Number.isFinite(Number(lx))&&lx!=="")return cx?BE_ORDINAL.Might:BE_ORDINAL.Not;if(cx&&lx!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(t,n){assert(internalOptionCreatorMap.get(t)==null&&n),internalOptionCreatorMap.set(t,n)}function concatInternalOptions(t,n,a){var l=internalOptionCreatorMap.get(n);if(!l)return a;var u=l(t);return u?a.concat(u):a}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function t(){}return t.prototype.getColorFromPalette=function(n,a,l){var u=normalizeToArray(this.get("color",!0)),c=this.get("colorLayer",!0);return getFromPalette(this,innerColor,u,c,n,a,l)},t.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},t}();function getDecalFromPalette(t,n,a,l){var u=normalizeToArray(t.get(["aria","decal","decals"]));return getFromPalette(t,innerDecal,u,null,n,a,l)}function getNearestPalette(t,n){for(var a=t.length,l=0;l<a;l++)if(t[l].length>n)return t[l];return t[a-1]}function getFromPalette(t,n,a,l,u,c,p){c=c||t;var d=n(c),Q=d.paletteIdx||0,Ct=d.paletteNameMap=d.paletteNameMap||{};if(Ct.hasOwnProperty(u))return Ct[u];var ar=p==null||!l?a:getNearestPalette(l,p);if(ar=ar||a,!(!ar||!ar.length)){var en=ar[Q];return u&&(Ct[u]=en),d.paletteIdx=(Q+1)%ar.length,en}}function clearPalette(t,n){n(t).paletteIdx=0,n(t).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a,l,u,c,p,d){c=c||{},this.option=null,this._theme=new Model(c),this._locale=new Model(p),this._optionManager=d},n.prototype.setOption=function(a,l,u){var c=normalizeSetOptionInput(l);this._optionManager.setOption(a,u,c),this._resetOption(null,c)},n.prototype.resetOption=function(a,l){return this._resetOption(a,normalizeSetOptionInput(l))},n.prototype._resetOption=function(a,l){var u=!1,c=this._optionManager;if(!a||a==="recreate"){var p=c.mountOption(a==="recreate");!this.option||a==="recreate"?initBase(this,p):(this.restoreData(),this._mergeOption(p,l)),u=!0}if((a==="timeline"||a==="media")&&this.restoreData(),!a||a==="recreate"||a==="timeline"){var d=c.getTimelineOption(this);d&&(u=!0,this._mergeOption(d,l))}if(!a||a==="recreate"||a==="media"){var Q=c.getMediaOption(this);Q.length&&each$f(Q,function(Ct){u=!0,this._mergeOption(Ct,l)},this)}return u},n.prototype.mergeOption=function(a){this._mergeOption(a,null)},n.prototype._mergeOption=function(a,l){var u=this.option,c=this._componentsMap,p=this._componentsCount,d=[],Q=createHashMap(),Ct=l&&l.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(a,function(en,tn){en!=null&&(ComponentModel.hasClass(tn)?tn&&(d.push(tn),Q.set(tn,!0)):u[tn]=u[tn]==null?clone$4(en):merge(u[tn],en,!0))}),Ct&&Ct.each(function(en,tn){ComponentModel.hasClass(tn)&&!Q.get(tn)&&(d.push(tn),Q.set(tn,!0))}),ComponentModel.topologicalTravel(d,ComponentModel.getAllClassMainTypes(),ar,this);function ar(en){var tn=concatInternalOptions(this,en,normalizeToArray(a[en])),on=c.get(en),cn=on?Ct&&Ct.get(en)?"replaceMerge":"normalMerge":"replaceAll",gn=mappingToExists(on,tn,cn);setComponentTypeToKeyInfo(gn,en,ComponentModel),u[en]=null,c.set(en,null),p.set(en,0);var Cn=[],ex=[],ix=0,ax;each$f(gn,function(ox,lx){var cx=ox.existing,dx=ox.newOption;if(!dx)cx&&(cx.mergeOption({},this),cx.optionUpdated({},!1));else{var hx=en==="series",fx=ComponentModel.getClass(en,ox.keyInfo.subType,!hx);if(!fx)return;if(en==="tooltip"){if(ax)return;ax=!0}if(cx&&cx.constructor===fx)cx.name=ox.keyInfo.name,cx.mergeOption(dx,this),cx.optionUpdated(dx,!1);else{var ux=extend({componentIndex:lx},ox.keyInfo);cx=new fx(dx,this,this,ux),extend(cx,ux),ox.brandNew&&(cx.__requireNewView=!0),cx.init(dx,this,this),cx.optionUpdated(null,!0)}}cx?(Cn.push(cx.option),ex.push(cx),ix++):(Cn.push(void 0),ex.push(void 0))},this),u[en]=Cn,c.set(en,ex),p.set(en,ix),en==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var a=clone$4(this.option);return each$f(a,function(l,u){if(ComponentModel.hasClass(u)){for(var c=normalizeToArray(l),p=c.length,d=!1,Q=p-1;Q>=0;Q--)c[Q]&&!isComponentIdInternal(c[Q])?d=!0:(c[Q]=null,!d&&p--);c.length=p,a[u]=c}}),delete a[OPTION_INNER_KEY],a},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(a){this._payload=a},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(a,l){var u=this._componentsMap.get(a);if(u){var c=u[l||0];if(c)return c;if(l==null){for(var p=0;p<u.length;p++)if(u[p])return u[p]}}},n.prototype.queryComponents=function(a){var l=a.mainType;if(!l)return[];var u=a.index,c=a.id,p=a.name,d=this._componentsMap.get(l);if(!d||!d.length)return[];var Q;return u!=null?(Q=[],each$f(normalizeToArray(u),function(Ct){d[Ct]&&Q.push(d[Ct])})):c!=null?Q=queryByIdOrName("id",c,d):p!=null?Q=queryByIdOrName("name",p,d):Q=filter(d,function(Ct){return!!Ct}),filterBySubType(Q,a)},n.prototype.findComponents=function(a){var l=a.query,u=a.mainType,c=d(l),p=c?this.queryComponents(c):filter(this._componentsMap.get(u),function(Ct){return!!Ct});return Q(filterBySubType(p,a));function d(Ct){var ar=u+"Index",en=u+"Id",tn=u+"Name";return Ct&&(Ct[ar]!=null||Ct[en]!=null||Ct[tn]!=null)?{mainType:u,index:Ct[ar],id:Ct[en],name:Ct[tn]}:null}function Q(Ct){return a.filter?filter(Ct,a.filter):Ct}},n.prototype.eachComponent=function(a,l,u){var c=this._componentsMap;if(isFunction$1(a)){var p=l,d=a;c.each(function(en,tn){for(var on=0;en&&on<en.length;on++){var cn=en[on];cn&&d.call(p,tn,cn,cn.componentIndex)}})}else for(var Q=isString$1(a)?c.get(a):isObject$3(a)?this.findComponents(a):null,Ct=0;Q&&Ct<Q.length;Ct++){var ar=Q[Ct];ar&&l.call(u,ar,ar.componentIndex)}},n.prototype.getSeriesByName=function(a){var l=convertOptionIdName(a,null);return filter(this._componentsMap.get("series"),function(u){return!!u&&l!=null&&u.name===l})},n.prototype.getSeriesByIndex=function(a){return this._componentsMap.get("series")[a]},n.prototype.getSeriesByType=function(a){return filter(this._componentsMap.get("series"),function(l){return!!l&&l.subType===a})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(a){return!!a})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(a,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];a.call(l,c,u)},this)},n.prototype.eachRawSeries=function(a,l){each$f(this._componentsMap.get("series"),function(u){u&&a.call(l,u,u.componentIndex)})},n.prototype.eachSeriesByType=function(a,l,u){assertSeriesInitialized(this),each$f(this._seriesIndices,function(c){var p=this._componentsMap.get("series")[c];p.subType===a&&l.call(u,p,c)},this)},n.prototype.eachRawSeriesByType=function(a,l,u){return each$f(this.getSeriesByType(a),l,u)},n.prototype.isSeriesFiltered=function(a){return assertSeriesInitialized(this),this._seriesIndicesMap.get(a.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(a,l){assertSeriesInitialized(this);var u=[];each$f(this._seriesIndices,function(c){var p=this._componentsMap.get("series")[c];a.call(l,p,c)&&u.push(c)},this),this._seriesIndices=u,this._seriesIndicesMap=createHashMap(u)},n.prototype.restoreData=function(a){reCreateSeriesIndices(this);var l=this._componentsMap,u=[];l.each(function(c,p){ComponentModel.hasClass(p)&&u.push(p)}),ComponentModel.topologicalTravel(u,ComponentModel.getAllClassMainTypes(),function(c){each$f(l.get(c),function(p){p&&(c!=="series"||!isNotTargetSeries(p,a))&&p.restoreData()})})},n.internalField=function(){reCreateSeriesIndices=function(a){var l=a._seriesIndices=[];each$f(a._componentsMap.get("series"),function(u){u&&l.push(u.componentIndex)}),a._seriesIndicesMap=createHashMap(l)},assertSeriesInitialized=function(a){},initBase=function(a,l){a.option={},a.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,a._componentsMap=createHashMap({series:[]}),a._componentsCount=createHashMap();var u=l.aria;isObject$3(u)&&u.enabled==null&&(u.enabled=!0),mergeTheme(l,a._theme.option),merge(l,globalDefault,!1),a._mergeOption(l,null)}}(),n}(Model);function isNotTargetSeries(t,n){if(n){var a=n.seriesIndex,l=n.seriesId,u=n.seriesName;return a!=null&&t.componentIndex!==a||l!=null&&t.id!==l||u!=null&&t.name!==u}}function mergeTheme(t,n){var a=t.color&&!t.colorLayer;each$f(n,function(l,u){u==="colorLayer"&&a||ComponentModel.hasClass(u)||(typeof l=="object"?t[u]=t[u]?merge(t[u],l,!1):clone$4(l):t[u]==null&&(t[u]=l))})}function queryByIdOrName(t,n,a){if(isArray$1(n)){var l=createHashMap();return each$f(n,function(c){if(c!=null){var p=convertOptionIdName(c,null);p!=null&&l.set(c,!0)}}),filter(a,function(c){return c&&l.get(c[t])})}else{var u=convertOptionIdName(n,null);return filter(a,function(c){return c&&u!=null&&c[t]===u})}}function filterBySubType(t,n){return n.hasOwnProperty("subType")?filter(t,function(a){return a&&a.subType===n.subType}):t}function normalizeSetOptionInput(t){var n=createHashMap();return t&&each$f(normalizeToArray(t.replaceMerge),function(a){n.set(a,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function t(n){each$f(availableMethods,function(a){this[a]=bind$1(n[a],n)},this)}return t}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(n,a){var l=[];each$f(coordinateSystemCreators,function(u,c){var p=u.create(n,a);l=l.concat(p||[])}),this._coordinateSystems=l},t.prototype.update=function(n,a){each$f(this._coordinateSystems,function(l){l.update&&l.update(n,a)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(n,a){coordinateSystemCreators[n]=a},t.get=function(n){return coordinateSystemCreators[n]},t}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function t(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return t.prototype.setOption=function(n,a,l){n&&(each$f(normalizeToArray(n.series),function(p){p&&p.data&&isTypedArray(p.data)&&setAsPrimitive(p.data)}),each$f(normalizeToArray(n.dataset),function(p){p&&p.source&&isTypedArray(p.source)&&setAsPrimitive(p.source)})),n=clone$4(n);var u=this._optionBackup,c=parseRawOption(n,a,!u);this._newBaseOption=c.baseOption,u?(c.timelineOptions.length&&(u.timelineOptions=c.timelineOptions),c.mediaList.length&&(u.mediaList=c.mediaList),c.mediaDefault&&(u.mediaDefault=c.mediaDefault)):this._optionBackup=c},t.prototype.mountOption=function(n){var a=this._optionBackup;return this._timelineOptions=a.timelineOptions,this._mediaList=a.mediaList,this._mediaDefault=a.mediaDefault,this._currentMediaIndices=[],clone$4(n?a.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(n){var a,l=this._timelineOptions;if(l.length){var u=n.getComponent("timeline");u&&(a=clone$4(l[u.getCurrentIndex()]))}return a},t.prototype.getMediaOption=function(n){var a=this._api.getWidth(),l=this._api.getHeight(),u=this._mediaList,c=this._mediaDefault,p=[],d=[];if(!u.length&&!c)return d;for(var Q=0,Ct=u.length;Q<Ct;Q++)applyMediaQuery(u[Q].query,a,l)&&p.push(Q);return!p.length&&c&&(p=[-1]),p.length&&!indicesEquals(p,this._currentMediaIndices)&&(d=map$1(p,function(ar){return clone$4(ar===-1?c.option:u[ar].option)})),this._currentMediaIndices=p,d},t}();function parseRawOption(t,n,a){var l=[],u,c,p=t.baseOption,d=t.timeline,Q=t.options,Ct=t.media,ar=!!t.media,en=!!(Q||d||p&&p.timeline);p?(c=p,c.timeline||(c.timeline=d)):((en||ar)&&(t.options=t.media=null),c=t),ar&&isArray$1(Ct)&&each$f(Ct,function(on){on&&on.option&&(on.query?l.push(on):u||(u=on))}),tn(c),each$f(Q,function(on){return tn(on)}),each$f(l,function(on){return tn(on.option)});function tn(on){each$f(n,function(cn){cn(on,a)})}return{baseOption:c,timelineOptions:Q||[],mediaDefault:u,mediaList:l}}function applyMediaQuery(t,n,a){var l={width:n,height:a,aspectratio:n/a},u=!0;return each$f(t,function(c,p){var d=p.match(QUERY_REG);if(!(!d||!d[1]||!d[2])){var Q=d[1],Ct=d[2].toLowerCase();compare(l[Ct],c,Q)||(u=!1)}}),u}function compare(t,n,a){return a==="min"?t>=n:a==="max"?t<=n:t===n}function indicesEquals(t,n){return t.join(",")===n.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0,l=POSSIBLE_STYLES.length;a<l;a++){var u=POSSIBLE_STYLES[a],c=n.normal,p=n.emphasis;c&&c[u]&&(t[u]=t[u]||{},t[u].normal?merge(t[u].normal,c[u]):t[u].normal=c[u],c[u]=null),p&&p[u]&&(t[u]=t[u]||{},t[u].emphasis?merge(t[u].emphasis,p[u]):t[u].emphasis=p[u],p[u]=null)}}function convertNormalEmphasis(t,n,a){if(t&&t[n]&&(t[n].normal||t[n].emphasis)){var l=t[n].normal,u=t[n].emphasis;l&&(a?(t[n].normal=t[n].emphasis=null,defaults(t[n],l)):t[n]=l),u&&(t.emphasis=t.emphasis||{},t.emphasis[n]=u,u.focus&&(t.emphasis.focus=u.focus),u.blurScope&&(t.emphasis.blurScope=u.blurScope))}}function removeEC3NormalStatus(t){convertNormalEmphasis(t,"itemStyle"),convertNormalEmphasis(t,"lineStyle"),convertNormalEmphasis(t,"areaStyle"),convertNormalEmphasis(t,"label"),convertNormalEmphasis(t,"labelLine"),convertNormalEmphasis(t,"upperLabel"),convertNormalEmphasis(t,"edgeLabel")}function compatTextStyle(t,n){var a=isObject$2(t)&&t[n],l=isObject$2(a)&&a.textStyle;if(l)for(var u=0,c=TEXT_STYLE_OPTIONS.length;u<c;u++){var p=TEXT_STYLE_OPTIONS[u];l.hasOwnProperty(p)&&(a[p]=l[p])}}function compatEC3CommonStyles(t){t&&(removeEC3NormalStatus(t),compatTextStyle(t,"label"),t.emphasis&&compatTextStyle(t.emphasis,"label"))}function processSeries(t){if(isObject$2(t)){compatEC2ItemStyle(t),removeEC3NormalStatus(t),compatTextStyle(t,"label"),compatTextStyle(t,"upperLabel"),compatTextStyle(t,"edgeLabel"),t.emphasis&&(compatTextStyle(t.emphasis,"label"),compatTextStyle(t.emphasis,"upperLabel"),compatTextStyle(t.emphasis,"edgeLabel"));var n=t.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var a=t.markLine;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var l=t.markArea;l&&compatEC3CommonStyles(l);var u=t.data;if(t.type==="graph"){u=u||t.nodes;var c=t.links||t.edges;if(c&&!isTypedArray(c))for(var p=0;p<c.length;p++)compatEC3CommonStyles(c[p]);each$f(t.categories,function(Ct){removeEC3NormalStatus(Ct)})}if(u&&!isTypedArray(u))for(var p=0;p<u.length;p++)compatEC3CommonStyles(u[p]);if(n=t.markPoint,n&&n.data)for(var d=n.data,p=0;p<d.length;p++)compatEC3CommonStyles(d[p]);if(a=t.markLine,a&&a.data)for(var Q=a.data,p=0;p<Q.length;p++)isArray$1(Q[p])?(compatEC3CommonStyles(Q[p][0]),compatEC3CommonStyles(Q[p][1])):compatEC3CommonStyles(Q[p]);t.type==="gauge"?(compatTextStyle(t,"axisLabel"),compatTextStyle(t,"title"),compatTextStyle(t,"detail")):t.type==="treemap"?(convertNormalEmphasis(t.breadcrumb,"itemStyle"),each$f(t.levels,function(Ct){removeEC3NormalStatus(Ct)})):t.type==="tree"&&removeEC3NormalStatus(t.leaves)}}function toArr(t){return isArray$1(t)?t:t?[t]:[]}function toObj(t){return(isArray$1(t)?t[0]:t)||{}}function globalCompatStyle(t,n){each$d(toArr(t.series),function(l){isObject$2(l)&&processSeries(l)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(a,function(l){each$d(toArr(t[l]),function(u){u&&(compatTextStyle(u,"axisLabel"),compatTextStyle(u.axisPointer,"label"))})}),each$d(toArr(t.parallel),function(l){var u=l&&l.parallelAxisDefault;compatTextStyle(u,"axisLabel"),compatTextStyle(u&&u.axisPointer,"label")}),each$d(toArr(t.calendar),function(l){convertNormalEmphasis(l,"itemStyle"),compatTextStyle(l,"dayLabel"),compatTextStyle(l,"monthLabel"),compatTextStyle(l,"yearLabel")}),each$d(toArr(t.radar),function(l){compatTextStyle(l,"name"),l.name&&l.axisName==null&&(l.axisName=l.name,delete l.name),l.nameGap!=null&&l.axisNameGap==null&&(l.axisNameGap=l.nameGap,delete l.nameGap)}),each$d(toArr(t.geo),function(l){isObject$2(l)&&(compatEC3CommonStyles(l),each$d(toArr(l.regions),function(u){compatEC3CommonStyles(u)}))}),each$d(toArr(t.timeline),function(l){compatEC3CommonStyles(l),convertNormalEmphasis(l,"label"),convertNormalEmphasis(l,"itemStyle"),convertNormalEmphasis(l,"controlStyle",!0);var u=l.data;isArray$1(u)&&each$f(u,function(c){isObject$3(c)&&(convertNormalEmphasis(c,"label"),convertNormalEmphasis(c,"itemStyle"))})}),each$d(toArr(t.toolbox),function(l){convertNormalEmphasis(l,"iconStyle"),each$d(l.feature,function(u){convertNormalEmphasis(u,"iconStyle")})}),compatTextStyle(toObj(t.axisPointer),"label"),compatTextStyle(toObj(t.tooltip).axisPointer,"label")}function get(t,n){for(var a=n.split(","),l=t,u=0;u<a.length&&(l=l&&l[a[u]],l!=null);u++);return l}function set(t,n,a,l){for(var u=n.split(","),c=t,p,d=0;d<u.length-1;d++)p=u[d],c[p]==null&&(c[p]={}),c=c[p];c[u[d]]==null&&(c[u[d]]=a)}function compatLayoutProperties(t){t&&each$f(LAYOUT_PROPERTIES,function(n){n[0]in t&&!(n[1]in t)&&(t[n[1]]=t[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0;a<BAR_ITEM_STYLE_MAP.length;a++){var l=BAR_ITEM_STYLE_MAP[a][1],u=BAR_ITEM_STYLE_MAP[a][0];n[l]!=null&&(n[u]=n[l])}}function compatPieLabel(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function compatSunburstState(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function compatGraphFocus(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function traverseTree(t,n){if(t)for(var a=0;a<t.length;a++)n(t[a]),t[a]&&traverseTree(t[a].children,n)}function globalBackwardCompat(t,n){globalCompatStyle(t,n),t.series=normalizeToArray(t.series),each$f(t.series,function(a){if(isObject$3(a)){var l=a.type;if(l==="line")a.clipOverflow!=null&&(a.clip=a.clipOverflow);else if(l==="pie"||l==="gauge"){a.clockWise!=null&&(a.clockwise=a.clockWise),compatPieLabel(a.label);var u=a.data;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatPieLabel(u[c]);a.hoverOffset!=null&&(a.emphasis=a.emphasis||{},(a.emphasis.scaleSize=null)&&(a.emphasis.scaleSize=a.hoverOffset))}else if(l==="gauge"){var p=get(a,"pointer.color");p!=null&&set(a,"itemStyle.color",p)}else if(l==="bar"){compatBarItemStyle(a),compatBarItemStyle(a.backgroundStyle),compatBarItemStyle(a.emphasis);var u=a.data;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)typeof u[c]=="object"&&(compatBarItemStyle(u[c]),compatBarItemStyle(u[c]&&u[c].emphasis))}else if(l==="sunburst"){var d=a.highlightPolicy;d&&(a.emphasis=a.emphasis||{},a.emphasis.focus||(a.emphasis.focus=d)),compatSunburstState(a),traverseTree(a.data,compatSunburstState)}else l==="graph"||l==="sankey"?compatGraphFocus(a):l==="map"&&(a.mapType&&!a.map&&(a.map=a.mapType),a.mapLocation&&defaults(a,a.mapLocation));a.hoverAnimation!=null&&(a.emphasis=a.emphasis||{},a.emphasis&&a.emphasis.scale==null&&(a.emphasis.scale=a.hoverAnimation)),compatLayoutProperties(a)}}),t.dataRange&&(t.visualMap=t.dataRange),each$f(COMPATITABLE_COMPONENTS,function(a){var l=t[a];l&&(isArray$1(l)||(l=[l]),each$f(l,function(u){compatLayoutProperties(u)}))})}function dataStack$1(t){var n=createHashMap();t.eachSeries(function(a){var l=a.get("stack");if(l){var u=n.get(l)||n.set(l,[]),c=a.getData(),p={stackResultDimension:c.getCalculationInfo("stackResultDimension"),stackedOverDimension:c.getCalculationInfo("stackedOverDimension"),stackedDimension:c.getCalculationInfo("stackedDimension"),stackedByDimension:c.getCalculationInfo("stackedByDimension"),isStackedByIndex:c.getCalculationInfo("isStackedByIndex"),data:c,seriesModel:a};if(!p.stackedDimension||!(p.isStackedByIndex||p.stackedByDimension))return;u.length&&c.setCalculationInfo("stackedOnSeries",u[u.length-1].seriesModel),u.push(p)}}),n.each(calculateStack)}function calculateStack(t){each$f(t,function(n,a){var l=[],u=[NaN,NaN],c=[n.stackResultDimension,n.stackedOverDimension],p=n.data,d=n.isStackedByIndex,Q=n.seriesModel.get("stackStrategy")||"samesign";p.modify(c,function(Ct,ar,en){var tn=p.get(n.stackedDimension,en);if(isNaN(tn))return u;var on,cn;d?cn=p.getRawIndex(en):on=p.get(n.stackedByDimension,en);for(var gn=NaN,Cn=a-1;Cn>=0;Cn--){var ex=t[Cn];if(d||(cn=ex.data.rawIndexOf(ex.stackedByDimension,on)),cn>=0){var ix=ex.data.getByRawIndex(ex.stackResultDimension,cn);if(Q==="all"||Q==="positive"&&ix>0||Q==="negative"&&ix<0||Q==="samesign"&&tn>=0&&ix>0||Q==="samesign"&&tn<=0&&ix<0){tn=addSafe(tn,ix),gn=ix;break}}}return l[0]=tn,l[1]=gn,l})})}var SourceImpl=function(){function t(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var a=this.dimensionsDefine=n.dimensionsDefine;if(a)for(var l=0;l<a.length;l++){var u=a[l];u.type==null&&guessOrdinal(this,l)===BE_ORDINAL.Must&&(u.type="ordinal")}}return t}();function isSourceInstance(t){return t instanceof SourceImpl}function createSource(t,n,a){a=a||detectSourceFormat(t);var l=n.seriesLayoutBy,u=determineSourceDimensions(t,a,l,n.sourceHeader,n.dimensions),c=new SourceImpl({data:t,sourceFormat:a,seriesLayoutBy:l,dimensionsDefine:u.dimensionsDefine,startIndex:u.startIndex,dimensionsDetectedCount:u.dimensionsDetectedCount,metaRawOption:clone$4(n)});return c}function createSourceFromSeriesDataOption(t){return new SourceImpl({data:t,sourceFormat:isTypedArray(t)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(t){return new SourceImpl({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:clone$4(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function detectSourceFormat(t){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(t))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(t)){t.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var a=0,l=t.length;a<l;a++){var u=t[a];if(u!=null){if(isArray$1(u)||isTypedArray(u)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(u)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(t)){for(var c in t)if(hasOwn(t,c)&&isArrayLike(t[c])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(t,n,a,l,u){var c,p;if(!t)return{dimensionsDefine:normalizeDimensionsOption(u),startIndex:p,dimensionsDetectedCount:c};if(n===SOURCE_FORMAT_ARRAY_ROWS){var d=t;l==="auto"||l==null?arrayRowsTravelFirst(function(Ct){Ct!=null&&Ct!=="-"&&(isString$1(Ct)?p==null&&(p=1):p=0)},a,d,10):p=isNumber(l)?l:l?1:0,!u&&p===1&&(u=[],arrayRowsTravelFirst(function(Ct,ar){u[ar]=Ct!=null?Ct+"":""},a,d,1/0)),c=u?u.length:a===SERIES_LAYOUT_BY_ROW?d.length:d[0]?d[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)u||(u=objectRowsCollectDimensions(t));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)u||(u=[],each$f(t,function(Ct,ar){u.push(ar)}));else if(n===SOURCE_FORMAT_ORIGINAL){var Q=getDataItemValue(t[0]);c=isArray$1(Q)&&Q.length||1}return{startIndex:p,dimensionsDefine:normalizeDimensionsOption(u),dimensionsDetectedCount:c}}function objectRowsCollectDimensions(t){for(var n=0,a;n<t.length&&!(a=t[n++]););if(a)return keys(a)}function normalizeDimensionsOption(t){if(t){var n=createHashMap();return map$1(t,function(a,l){a=isObject$3(a)?a:{name:a};var u={name:a.name,displayName:a.displayName,type:a.type};if(u.name==null)return u;u.name+="",u.displayName==null&&(u.displayName=u.name);var c=n.get(u.name);return c?u.name+="-"+c.count++:n.set(u.name,{count:1}),u})}}function arrayRowsTravelFirst(t,n,a,l){if(n===SERIES_LAYOUT_BY_ROW)for(var u=0;u<a.length&&u<l;u++)t(a[u]?a[u][0]:null,u);else for(var c=a[0]||[],u=0;u<c.length&&u<l;u++)t(c[u],u)}function shouldRetrieveDataByName(t){var n=t.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function t(n,a){var l=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=l;var u=this._data=l.data;l.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=a,this._data=u),mountMethods(this,u,l)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(n,a){},t.prototype.appendData=function(n){},t.prototype.clean=function(){},t.protoInitialize=function(){var n=t.prototype;n.pure=!1,n.persistent=!0}(),t.internalField=function(){var n;mountMethods=function(p,d,Q){var Ct=Q.sourceFormat,ar=Q.seriesLayoutBy,en=Q.startIndex,tn=Q.dimensionsDefine,on=providerMethods[getMethodMapKey(Ct,ar)];if(extend(p,on),Ct===SOURCE_FORMAT_TYPED_ARRAY)p.getItem=a,p.count=u,p.fillStorage=l;else{var cn=getRawSourceItemGetter(Ct,ar);p.getItem=bind$1(cn,null,d,en,tn);var gn=getRawSourceDataCounter(Ct,ar);p.count=bind$1(gn,null,d,en,tn)}};var a=function(p,d){p=p-this._offset,d=d||[];for(var Q=this._data,Ct=this._dimSize,ar=Ct*p,en=0;en<Ct;en++)d[en]=Q[ar+en];return d},l=function(p,d,Q,Ct){for(var ar=this._data,en=this._dimSize,tn=0;tn<en;tn++){for(var on=Ct[tn],cn=on[0]==null?1/0:on[0],gn=on[1]==null?-1/0:on[1],Cn=d-p,ex=Q[tn],ix=0;ix<Cn;ix++){var ax=ar[ix*en+tn];ex[p+ix]=ax,ax<cn&&(cn=ax),ax>gn&&(gn=ax)}on[0]=cn,on[1]=gn}},u=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:c},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:c},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(p){var d=this._data;each$f(p,function(Q,Ct){for(var ar=d[Ct]||(d[Ct]=[]),en=0;en<(Q||[]).length;en++)ar.push(Q[en])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:c},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(p){this._data=p},clean:function(){this._offset+=this.count(),this._data=null}},n);function c(p){for(var d=0;d<p.length;d++)this._data.push(p[d])}}(),t}(),getItemSimply=function(t,n,a,l){return t[l]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a,l){return t[l+n]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a,l,u){l+=n;for(var c=u||[],p=t,d=0;d<p.length;d++){var Q=p[d];c[d]=Q?Q[l]:null}return c},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a,l,u){for(var c=u||[],p=0;p<a.length;p++){var d=a[p].name,Q=t[d];c[p]=Q?Q[l]:null}return c},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(t,n){var a=rawSourceItemGetterMap[getMethodMapKey(t,n)];return a}var countSimply=function(t,n,a){return t.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a){return Math.max(0,t.length-n)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a){var l=t[0];return l?Math.max(0,l.length-n):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a){var l=a[0].name,u=t[l];return u?u.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(t,n){var a=rawSourceDataCounterMap[getMethodMapKey(t,n)];return a}var getRawValueSimply=function(t,n,a){return t[n]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(t,n,a){return t[a]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(t,n,a){var l=getDataItemValue(t);return l instanceof Array?l[n]:l},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(t){var n=rawSourceValueGetterMap[t];return n}function getMethodMapKey(t,n){return t===SOURCE_FORMAT_ARRAY_ROWS?t+"_"+n:t}function retrieveRawValue(t,n,a){if(t){var l=t.getRawDataItem(n);if(l!=null){var u=t.getStore(),c=u.getSource().sourceFormat;if(a!=null){var p=t.getDimensionIndex(a),d=u.getDimensionProperty(p);return getRawSourceValueGetter(c)(l,p,d)}else{var Q=l;return c===SOURCE_FORMAT_ORIGINAL&&(Q=getDataItemValue(l)),Q}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function t(){}return t.prototype.getDataParams=function(n,a){var l=this.getData(a),u=this.getRawValue(n,a),c=l.getRawIndex(n),p=l.getName(n),d=l.getRawDataItem(n),Q=l.getItemVisual(n,"style"),Ct=Q&&Q[l.getItemVisual(n,"drawType")||"fill"],ar=Q&&Q.stroke,en=this.mainType,tn=en==="series",on=l.userOutput&&l.userOutput.get();return{componentType:en,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:tn?this.subType:null,seriesIndex:this.seriesIndex,seriesId:tn?this.id:null,seriesName:tn?this.name:null,name:p,dataIndex:c,data:d,dataType:a,value:u,color:Ct,borderColor:ar,dimensionNames:on?on.fullDimensions:null,encode:on?on.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(n,a,l,u,c,p){a=a||"normal";var d=this.getData(l),Q=this.getDataParams(n,l);if(p&&(Q.value=p.interpolatedValue),u!=null&&isArray$1(Q.value)&&(Q.value=Q.value[u]),!c){var Ct=d.getItemModel(n);c=Ct.get(a==="normal"?["label","formatter"]:[a,"label","formatter"])}if(isFunction$1(c))return Q.status=a,Q.dimensionIndex=u,c(Q);if(isString$1(c)){var ar=formatTpl(c,Q);return ar.replace(DIMENSION_LABEL_REG,function(en,tn){var on=tn.length,cn=tn;cn.charAt(0)==="["&&cn.charAt(on-1)==="]"&&(cn=+cn.slice(1,on-1));var gn=retrieveRawValue(d,n,cn);if(p&&isArray$1(p.interpolatedValue)){var Cn=d.getDimensionIndex(cn);Cn>=0&&(gn=p.interpolatedValue[Cn])}return gn!=null?gn+"":""})}},t.prototype.getRawValue=function(n,a){return retrieveRawValue(this.getData(a),n)},t.prototype.formatTooltip=function(n,a,l){},t}();function normalizeTooltipFormatResult(t){var n,a;return isObject$3(t)?t.type&&(a=t):n=t,{text:n,frag:a}}function createTask(t){return new Task(t)}var Task=function(){function t(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return t.prototype.perform=function(n){var a=this._upstream,l=n&&n.skip;if(this._dirty&&a){var u=this.context;u.data=u.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var c;this._plan&&!l&&(c=this._plan(this.context));var p=ar(this._modBy),d=this._modDataCount||0,Q=ar(n&&n.modBy),Ct=n&&n.modDataCount||0;(p!==Q||d!==Ct)&&(c="reset");function ar(ix){return!(ix>=1)&&(ix=1),ix}var en;(this._dirty||c==="reset")&&(this._dirty=!1,en=this._doReset(l)),this._modBy=Q,this._modDataCount=Ct;var tn=n&&n.step;if(a?this._dueEnd=a._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var on=this._dueIndex,cn=Math.min(tn!=null?this._dueIndex+tn:1/0,this._dueEnd);if(!l&&(en||on<cn)){var gn=this._progress;if(isArray$1(gn))for(var Cn=0;Cn<gn.length;Cn++)this._doProgress(gn[Cn],on,cn,Q,Ct);else this._doProgress(gn,on,cn,Q,Ct)}this._dueIndex=cn;var ex=this._settedOutputEnd!=null?this._settedOutputEnd:cn;this._outputDueEnd=ex}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(n,a,l,u,c){iterator.reset(a,l,u,c),this._callingProgress=n,this._callingProgress({start:a,end:l,count:l-a,next:iterator.next},this.context)},t.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var a,l;!n&&this._reset&&(a=this._reset(this.context),a&&a.progress&&(l=a.forceFirstProgress,a=a.progress),isArray$1(a)&&!a.length&&(a=null)),this._progress=a,this._modBy=this._modDataCount=null;var u=this._downstream;return u&&u.dirty(),l},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},t}(),iterator=function(){var t,n,a,l,u,c={reset:function(Q,Ct,ar,en){n=Q,t=Ct,a=ar,l=en,u=Math.ceil(l/a),c.next=a>1&&l>0?d:p}};return c;function p(){return n<t?n++:null}function d(){var Q=n%u*a+Math.ceil(n/u),Ct=n>=t?null:Q<l?Q:n;return n++,Ct}}();function parseDataValue(t,n){var a=n&&n.type;return a==="ordinal"?t:(a==="time"&&!isNumber(t)&&t!=null&&t!=="-"&&(t=+parseDate(t)),t==null||t===""?NaN:Number(t))}var valueParserMap=createHashMap({number:function(t){return parseFloat(t)},time:function(t){return+parseDate(t)},trim:function(t){return isString$1(t)?trim$1(t):t}});function getRawValueParser(t){return valueParserMap.get(t)}var ORDER_COMPARISON_OP_MAP={lt:function(t,n){return t<n},lte:function(t,n){return t<=n},gt:function(t,n){return t>n},gte:function(t,n){return t>=n}},FilterOrderComparator=function(){function t(n,a){if(!isNumber(a)){var l="";throwError(l)}this._opFn=ORDER_COMPARISON_OP_MAP[n],this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){return isNumber(n)?this._opFn(n,this._rvalFloat):this._opFn(numericToNumber(n),this._rvalFloat)},t}(),SortOrderComparator=function(){function t(n,a){var l=n==="desc";this._resultLT=l?1:-1,a==null&&(a=l?"min":"max"),this._incomparable=a==="min"?-1/0:1/0}return t.prototype.evaluate=function(n,a){var l=isNumber(n)?n:numericToNumber(n),u=isNumber(a)?a:numericToNumber(a),c=isNaN(l),p=isNaN(u);if(c&&(l=this._incomparable),p&&(u=this._incomparable),c&&p){var d=isString$1(n),Q=isString$1(a);d&&(l=Q?n:0),Q&&(u=d?a:0)}return l<u?this._resultLT:l>u?-this._resultLT:0},t}(),FilterEqualityComparator=function(){function t(n,a){this._rval=a,this._isEQ=n,this._rvalTypeof=typeof a,this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){var a=n===this._rval;if(!a){var l=typeof n;l!==this._rvalTypeof&&(l==="number"||this._rvalTypeof==="number")&&(a=numericToNumber(n)===this._rvalFloat)}return this._isEQ?a:!a},t}();function createFilterComparator(t,n){return t==="eq"||t==="ne"?new FilterEqualityComparator(t==="eq",n):hasOwn(ORDER_COMPARISON_OP_MAP,t)?new FilterOrderComparator(t,n):null}var ExternalSource=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(n){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(n){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(n,a){},t.prototype.retrieveValueFromItem=function(n,a){},t.prototype.convertValue=function(n,a){return parseDataValue(n,a)},t}();function createExternalSource(t,n){var a=new ExternalSource,l=t.data,u=a.sourceFormat=t.sourceFormat,c=t.startIndex,p="";t.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(p);var d=[],Q={},Ct=t.dimensionsDefine;if(Ct)each$f(Ct,function(gn,Cn){var ex=gn.name,ix={index:Cn,name:ex,displayName:gn.displayName};if(d.push(ix),ex!=null){var ax="";hasOwn(Q,ex)&&throwError(ax),Q[ex]=ix}});else for(var ar=0;ar<t.dimensionsDetectedCount;ar++)d.push({index:ar});var en=getRawSourceItemGetter(u,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(a.getRawDataItem=function(gn){return en(l,c,d,gn)},a.getRawData=bind$1(getRawData,null,t)),a.cloneRawData=bind$1(cloneRawData,null,t);var tn=getRawSourceDataCounter(u,SERIES_LAYOUT_BY_COLUMN);a.count=bind$1(tn,null,l,c,d);var on=getRawSourceValueGetter(u);a.retrieveValue=function(gn,Cn){var ex=en(l,c,d,gn);return cn(ex,Cn)};var cn=a.retrieveValueFromItem=function(gn,Cn){if(gn!=null){var ex=d[Cn];if(ex)return on(gn,Cn,ex.name)}};return a.getDimensionInfo=bind$1(getDimensionInfo,null,d,Q),a.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,d),a}function getRawData(t){var n=t.sourceFormat;if(!isSupportedSourceFormat(n)){var a="";throwError(a)}return t.data}function cloneRawData(t){var n=t.sourceFormat,a=t.data;if(!isSupportedSourceFormat(n)){var l="";throwError(l)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var u=[],c=0,p=a.length;c<p;c++)u.push(a[c].slice());return u}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var u=[],c=0,p=a.length;c<p;c++)u.push(extend({},a[c]));return u}}function getDimensionInfo(t,n,a){if(a!=null){if(isNumber(a)||!isNaN(a)&&!hasOwn(n,a))return t[a];if(hasOwn(n,a))return n[a]}}function cloneAllDimensionInfo(t){return clone$4(t)}var externalTransformMap=createHashMap();function registerExternalTransform(t){t=clone$4(t);var n=t.type,a="";n||throwError(a);var l=n.split(":");l.length!==2&&throwError(a);var u=!1;l[0]==="echarts"&&(n=l[1],u=!0),t.__isBuiltIn=u,externalTransformMap.set(n,t)}function applyDataTransform(t,n,a){var l=normalizeToArray(t),u=l.length,c="";u||throwError(c);for(var p=0,d=u;p<d;p++){var Q=l[p];n=applySingleDataTransform(Q,n),p!==d-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(t,n,a,l){var u="";n.length||throwError(u),isObject$3(t)||throwError(u);var c=t.type,p=externalTransformMap.get(c);p||throwError(u);var d=map$1(n,function(Ct){return createExternalSource(Ct,p)}),Q=normalizeToArray(p.transform({upstream:d[0],upstreamList:d,config:clone$4(t.config)}));return map$1(Q,function(Ct,ar){var en="";isObject$3(Ct)||throwError(en),Ct.data||throwError(en);var tn=detectSourceFormat(Ct.data);isSupportedSourceFormat(tn)||throwError(en);var on,cn=n[0];if(cn&&ar===0&&!Ct.dimensions){var gn=cn.startIndex;gn&&(Ct.data=cn.data.slice(0,gn).concat(Ct.data)),on={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:gn,dimensions:cn.metaRawOption.dimensions}}else on={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:Ct.dimensions};return createSource(Ct.data,on,null)})}function isSupportedSourceFormat(t){return t===SOURCE_FORMAT_ARRAY_ROWS||t===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(t){return t>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(t){var n=t.constructor;return n===Array?t.slice():new n(t)}function prepareStore(t,n,a,l,u){var c=dataCtors[a||"float"];if(u){var p=t[n],d=p&&p.length;if(d!==l){for(var Q=new c(l),Ct=0;Ct<d;Ct++)Q[Ct]=p[Ct];t[n]=Q}}else t[n]=new c(l)}var DataStore=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return t.prototype.initData=function(n,a,l){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var u=n.getSource(),c=this.defaultDimValueGetter=defaultDimValueGetters[u.sourceFormat];this._dimValueGetter=l||c,this._rawExtent=[],shouldRetrieveDataByName(u),this._dimensions=map$1(a,function(p){return{type:p.type,property:p.property}}),this._initDataFromProvider(0,n.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(n,a){var l=this._calcDimNameToIdx,u=this._dimensions,c=l.get(n);if(c!=null){if(u[c].type===a)return c}else c=u.length;return u[c]={type:a},l.set(n,c),this._chunks[c]=new dataCtors[a||"float"](this._rawCount),this._rawExtent[c]=getInitialExtent(),c},t.prototype.collectOrdinalMeta=function(n,a){var l=this._chunks[n],u=this._dimensions[n],c=this._rawExtent,p=u.ordinalOffset||0,d=l.length;p===0&&(c[n]=getInitialExtent());for(var Q=c[n],Ct=p;Ct<d;Ct++){var ar=l[Ct]=a.parseAndCollect(l[Ct]);isNaN(ar)||(Q[0]=Math.min(ar,Q[0]),Q[1]=Math.max(ar,Q[1]))}u.ordinalMeta=a,u.ordinalOffset=d,u.type="ordinal"},t.prototype.getOrdinalMeta=function(n){var a=this._dimensions[n],l=a.ordinalMeta;return l},t.prototype.getDimensionProperty=function(n){var a=this._dimensions[n];return a&&a.property},t.prototype.appendData=function(n){var a=this._provider,l=this.count();a.appendData(n);var u=a.count();return a.persistent||(u+=l),l<u&&this._initDataFromProvider(l,u,!0),[l,u]},t.prototype.appendValues=function(n,a){for(var l=this._chunks,u=this._dimensions,c=u.length,p=this._rawExtent,d=this.count(),Q=d+Math.max(n.length,a||0),Ct=0;Ct<c;Ct++){var ar=u[Ct];prepareStore(l,Ct,ar.type,Q,!0)}for(var en=[],tn=d;tn<Q;tn++)for(var on=tn-d,cn=0;cn<c;cn++){var ar=u[cn],gn=defaultDimValueGetters.arrayRows.call(this,n[on]||en,ar.property,on,cn);l[cn][tn]=gn;var Cn=p[cn];gn<Cn[0]&&(Cn[0]=gn),gn>Cn[1]&&(Cn[1]=gn)}return this._rawCount=this._count=Q,{start:d,end:Q}},t.prototype._initDataFromProvider=function(n,a,l){for(var u=this._provider,c=this._chunks,p=this._dimensions,d=p.length,Q=this._rawExtent,Ct=map$1(p,function(ix){return ix.property}),ar=0;ar<d;ar++){var en=p[ar];Q[ar]||(Q[ar]=getInitialExtent()),prepareStore(c,ar,en.type,a,l)}if(u.fillStorage)u.fillStorage(n,a,c,Q);else for(var tn=[],on=n;on<a;on++){tn=u.getItem(on,tn);for(var cn=0;cn<d;cn++){var gn=c[cn],Cn=this._dimValueGetter(tn,Ct[cn],on,cn);gn[on]=Cn;var ex=Q[cn];Cn<ex[0]&&(ex[0]=Cn),Cn>ex[1]&&(ex[1]=Cn)}}!u.persistent&&u.clean&&u.clean(),this._rawCount=this._count=a,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(n,a){if(!(a>=0&&a<this._count))return NaN;var l=this._chunks[n];return l?l[this.getRawIndex(a)]:NaN},t.prototype.getValues=function(n,a){var l=[],u=[];if(a==null){a=n,n=[];for(var c=0;c<this._dimensions.length;c++)u.push(c)}else u=n;for(var c=0,p=u.length;c<p;c++)l.push(this.get(u[c],a));return l},t.prototype.getByRawIndex=function(n,a){if(!(a>=0&&a<this._rawCount))return NaN;var l=this._chunks[n];return l?l[a]:NaN},t.prototype.getSum=function(n){var a=this._chunks[n],l=0;if(a)for(var u=0,c=this.count();u<c;u++){var p=this.get(n,u);isNaN(p)||(l+=p)}return l},t.prototype.getMedian=function(n){var a=[];this.each([n],function(c){isNaN(c)||a.push(c)});var l=a.sort(function(c,p){return c-p}),u=this.count();return u===0?0:u%2===1?l[(u-1)/2]:(l[u/2]+l[u/2-1])/2},t.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var a=this._indices,l=a[n];if(l!=null&&l<this._count&&l===n)return n;for(var u=0,c=this._count-1;u<=c;){var p=(u+c)/2|0;if(a[p]<n)u=p+1;else if(a[p]>n)c=p-1;else return p}return-1},t.prototype.indicesOfNearest=function(n,a,l){var u=this._chunks,c=u[n],p=[];if(!c)return p;l==null&&(l=1/0);for(var d=1/0,Q=-1,Ct=0,ar=0,en=this.count();ar<en;ar++){var tn=this.getRawIndex(ar),on=a-c[tn],cn=Math.abs(on);cn<=l&&((cn<d||cn===d&&on>=0&&Q<0)&&(d=cn,Q=on,Ct=0),on===Q&&(p[Ct++]=ar))}return p.length=Ct,p},t.prototype.getIndices=function(){var n,a=this._indices;if(a){var l=a.constructor,u=this._count;if(l===Array){n=new l(u);for(var c=0;c<u;c++)n[c]=a[c]}else n=new l(a.buffer,0,u)}else{var l=getIndicesCtor(this._rawCount);n=new l(this.count());for(var c=0;c<n.length;c++)n[c]=c}return n},t.prototype.filter=function(n,a){if(!this._count)return this;for(var l=this.clone(),u=l.count(),c=getIndicesCtor(l._rawCount),p=new c(u),d=[],Q=n.length,Ct=0,ar=n[0],en=l._chunks,tn=0;tn<u;tn++){var on=void 0,cn=l.getRawIndex(tn);if(Q===0)on=a(tn);else if(Q===1){var gn=en[ar][cn];on=a(gn,tn)}else{for(var Cn=0;Cn<Q;Cn++)d[Cn]=en[n[Cn]][cn];d[Cn]=tn,on=a.apply(null,d)}on&&(p[Ct++]=cn)}return Ct<u&&(l._indices=p),l._count=Ct,l._extent=[],l._updateGetRawIdx(),l},t.prototype.selectRange=function(n){var a=this.clone(),l=a._count;if(!l)return this;var u=keys(n),c=u.length;if(!c)return this;var p=a.count(),d=getIndicesCtor(a._rawCount),Q=new d(p),Ct=0,ar=u[0],en=n[ar][0],tn=n[ar][1],on=a._chunks,cn=!1;if(!a._indices){var gn=0;if(c===1){for(var Cn=on[u[0]],ex=0;ex<l;ex++){var ix=Cn[ex];(ix>=en&&ix<=tn||isNaN(ix))&&(Q[Ct++]=gn),gn++}cn=!0}else if(c===2){for(var Cn=on[u[0]],ax=on[u[1]],ox=n[u[1]][0],lx=n[u[1]][1],ex=0;ex<l;ex++){var ix=Cn[ex],cx=ax[ex];(ix>=en&&ix<=tn||isNaN(ix))&&(cx>=ox&&cx<=lx||isNaN(cx))&&(Q[Ct++]=gn),gn++}cn=!0}}if(!cn)if(c===1)for(var ex=0;ex<p;ex++){var dx=a.getRawIndex(ex),ix=on[u[0]][dx];(ix>=en&&ix<=tn||isNaN(ix))&&(Q[Ct++]=dx)}else for(var ex=0;ex<p;ex++){for(var hx=!0,dx=a.getRawIndex(ex),fx=0;fx<c;fx++){var ux=u[fx],ix=on[ux][dx];(ix<n[ux][0]||ix>n[ux][1])&&(hx=!1)}hx&&(Q[Ct++]=a.getRawIndex(ex))}return Ct<p&&(a._indices=Q),a._count=Ct,a._extent=[],a._updateGetRawIdx(),a},t.prototype.map=function(n,a){var l=this.clone(n);return this._updateDims(l,n,a),l},t.prototype.modify=function(n,a){this._updateDims(this,n,a)},t.prototype._updateDims=function(n,a,l){for(var u=n._chunks,c=[],p=a.length,d=n.count(),Q=[],Ct=n._rawExtent,ar=0;ar<a.length;ar++)Ct[a[ar]]=getInitialExtent();for(var en=0;en<d;en++){for(var tn=n.getRawIndex(en),on=0;on<p;on++)Q[on]=u[a[on]][tn];Q[p]=en;var cn=l&&l.apply(null,Q);if(cn!=null){typeof cn!="object"&&(c[0]=cn,cn=c);for(var ar=0;ar<cn.length;ar++){var gn=a[ar],Cn=cn[ar],ex=Ct[gn],ix=u[gn];ix&&(ix[tn]=Cn),Cn<ex[0]&&(ex[0]=Cn),Cn>ex[1]&&(ex[1]=Cn)}}}},t.prototype.lttbDownSample=function(n,a){var l=this.clone([n],!0),u=l._chunks,c=u[n],p=this.count(),d=0,Q=Math.floor(1/a),Ct=this.getRawIndex(0),ar,en,tn,on=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(p/Q)+2)*2,p));on[d++]=Ct;for(var cn=1;cn<p-1;cn+=Q){for(var gn=Math.min(cn+Q,p-1),Cn=Math.min(cn+Q*2,p),ex=(Cn+gn)/2,ix=0,ax=gn;ax<Cn;ax++){var ox=this.getRawIndex(ax),lx=c[ox];isNaN(lx)||(ix+=lx)}ix/=Cn-gn;var cx=cn,dx=Math.min(cn+Q,p),hx=cn-1,fx=c[Ct];ar=-1,tn=cx;for(var ux=-1,gx=0,ax=cx;ax<dx;ax++){var ox=this.getRawIndex(ax),lx=c[ox];if(isNaN(lx)){gx++,ux<0&&(ux=ox);continue}en=Math.abs((hx-ex)*(lx-fx)-(hx-ax)*(ix-fx)),en>ar&&(ar=en,tn=ox)}gx>0&&gx<dx-cx&&(on[d++]=Math.min(ux,tn),tn=Math.max(ux,tn)),on[d++]=tn,Ct=tn}return on[d++]=this.getRawIndex(p-1),l._count=d,l._indices=on,l.getRawIndex=this._getRawIdx,l},t.prototype.minmaxDownSample=function(n,a){for(var l=this.clone([n],!0),u=l._chunks,c=Math.floor(1/a),p=u[n],d=this.count(),Q=new(getIndicesCtor(this._rawCount))(Math.ceil(d/c)*2),Ct=0,ar=0;ar<d;ar+=c){var en=ar,tn=p[this.getRawIndex(en)],on=ar,cn=p[this.getRawIndex(on)],gn=c;ar+c>d&&(gn=d-ar);for(var Cn=0;Cn<gn;Cn++){var ex=this.getRawIndex(ar+Cn),ix=p[ex];ix<tn&&(tn=ix,en=ar+Cn),ix>cn&&(cn=ix,on=ar+Cn)}var ax=this.getRawIndex(en),ox=this.getRawIndex(on);en<on?(Q[Ct++]=ax,Q[Ct++]=ox):(Q[Ct++]=ox,Q[Ct++]=ax)}return l._count=Ct,l._indices=Q,l._updateGetRawIdx(),l},t.prototype.downSample=function(n,a,l,u){for(var c=this.clone([n],!0),p=c._chunks,d=[],Q=Math.floor(1/a),Ct=p[n],ar=this.count(),en=c._rawExtent[n]=getInitialExtent(),tn=new(getIndicesCtor(this._rawCount))(Math.ceil(ar/Q)),on=0,cn=0;cn<ar;cn+=Q){Q>ar-cn&&(Q=ar-cn,d.length=Q);for(var gn=0;gn<Q;gn++){var Cn=this.getRawIndex(cn+gn);d[gn]=Ct[Cn]}var ex=l(d),ix=this.getRawIndex(Math.min(cn+u(d,ex)||0,ar-1));Ct[ix]=ex,ex<en[0]&&(en[0]=ex),ex>en[1]&&(en[1]=ex),tn[on++]=ix}return c._count=on,c._indices=tn,c._updateGetRawIdx(),c},t.prototype.each=function(n,a){if(this._count)for(var l=n.length,u=this._chunks,c=0,p=this.count();c<p;c++){var d=this.getRawIndex(c);switch(l){case 0:a(c);break;case 1:a(u[n[0]][d],c);break;case 2:a(u[n[0]][d],u[n[1]][d],c);break;default:for(var Q=0,Ct=[];Q<l;Q++)Ct[Q]=u[n[Q]][d];Ct[Q]=c,a.apply(null,Ct)}}},t.prototype.getDataExtent=function(n){var a=this._chunks[n],l=getInitialExtent();if(!a)return l;var u=this.count(),c=!this._indices,p;if(c)return this._rawExtent[n].slice();if(p=this._extent[n],p)return p.slice();p=l;for(var d=p[0],Q=p[1],Ct=0;Ct<u;Ct++){var ar=this.getRawIndex(Ct),en=a[ar];en<d&&(d=en),en>Q&&(Q=en)}return p=[d,Q],this._extent[n]=p,p},t.prototype.getRawDataItem=function(n){var a=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(a);for(var l=[],u=this._chunks,c=0;c<u.length;c++)l.push(u[c][a]);return l},t.prototype.clone=function(n,a){var l=new t,u=this._chunks,c=n&&reduce(n,function(d,Q){return d[Q]=!0,d},{});if(c)for(var p=0;p<u.length;p++)l._chunks[p]=c[p]?cloneChunk(u[p]):u[p];else l._chunks=u;return this._copyCommonProps(l),a||(l._indices=this._cloneIndices()),l._updateGetRawIdx(),l},t.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$4(this._extent),n._rawExtent=clone$4(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,a=void 0;if(n===Array){var l=this._indices.length;a=new n(l);for(var u=0;u<l;u++)a[u]=this._indices[u]}else a=new n(this._indices);return a}return null},t.prototype._getRawIdxIdentity=function(n){return n},t.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function n(a,l,u,c){return parseDataValue(a[c],this._dimensions[c])}defaultDimValueGetters={arrayRows:n,objectRows:function(a,l,u,c){return parseDataValue(a[l],this._dimensions[c])},keyedColumns:n,original:function(a,l,u,c){var p=a&&(a.value==null?a:a.value);return parseDataValue(p instanceof Array?p[c]:p,this._dimensions[c])},typedArray:function(a,l,u,c){return a[c]}}}(),t}(),SourceManager=function(){function t(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(n,a){this._sourceList=n,this._upstreamSignList=a,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,a=this._getUpstreamSourceManagers(),l=!!a.length,u,c;if(isSeries(n)){var p=n,d=void 0,Q=void 0,Ct=void 0;if(l){var ar=a[0];ar.prepareSource(),Ct=ar.getSource(),d=Ct.data,Q=Ct.sourceFormat,c=[ar._getVersionSign()]}else d=p.get("data",!0),Q=isTypedArray(d)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,c=[];var en=this._getSourceMetaRawOption()||{},tn=Ct&&Ct.metaRawOption||{},on=retrieve2(en.seriesLayoutBy,tn.seriesLayoutBy)||null,cn=retrieve2(en.sourceHeader,tn.sourceHeader),gn=retrieve2(en.dimensions,tn.dimensions),Cn=on!==tn.seriesLayoutBy||!!cn!=!!tn.sourceHeader||gn;u=Cn?[createSource(d,{seriesLayoutBy:on,sourceHeader:cn,dimensions:gn},Q)]:[]}else{var ex=n;if(l){var ix=this._applyTransform(a);u=ix.sourceList,c=ix.upstreamSignList}else{var ax=ex.get("source",!0);u=[createSource(ax,this._getSourceMetaRawOption(),null)],c=[]}}this._setLocalSource(u,c)},t.prototype._applyTransform=function(n){var a=this._sourceHost,l=a.get("transform",!0),u=a.get("fromTransformResult",!0);if(u!=null){var c="";n.length!==1&&doThrow(c)}var p,d=[],Q=[];return each$f(n,function(Ct){Ct.prepareSource();var ar=Ct.getSource(u||0),en="";u!=null&&!ar&&doThrow(en),d.push(ar),Q.push(Ct._getVersionSign())}),l?p=applyDataTransform(l,d,{datasetIndex:a.componentIndex}):u!=null&&(p=[cloneSourceShallow(d[0])]),{sourceList:p,upstreamSignList:Q}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),a=0;a<n.length;a++){var l=n[a];if(l._isDirty()||this._upstreamSignList[a]!==l._getVersionSign())return!0}},t.prototype.getSource=function(n){n=n||0;var a=this._sourceList[n];if(!a){var l=this._getUpstreamSourceManagers();return l[0]&&l[0].getSource(n)}return a},t.prototype.getSharedDataStore=function(n){var a=n.makeStoreSchema();return this._innerGetDataStore(a.dimensions,n.source,a.hash)},t.prototype._innerGetDataStore=function(n,a,l){var u=0,c=this._storeList,p=c[u];p||(p=c[u]={});var d=p[l];if(!d){var Q=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&Q?d=Q._innerGetDataStore(n,a,l):(d=new DataStore,d.initData(new DefaultDataProvider(a,n.length),n)),p[l]=d}return d},t.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var a=querySeriesUpstreamDatasetModel(n);return a?[a.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(l){return l.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,a,l,u;if(isSeries(n))a=n.get("seriesLayoutBy",!0),l=n.get("sourceHeader",!0),u=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var c=n;a=c.get("seriesLayoutBy",!0),l=c.get("sourceHeader",!0),u=c.get("dimensions",!0)}return{seriesLayoutBy:a,sourceHeader:l,dimensions:u}},t}();function disableTransformOptionMerge(t){var n=t.option.transform;n&&setAsPrimitive(t.option.transform)}function isSeries(t){return t.mainType==="series"}function doThrow(t){throw new Error(t)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(t){var n=t.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(t,n){var a=t.color||"#6e7079",l=t.fontSize||12,u=t.fontWeight||"400",c=t.color||"#464646",p=t.fontSize||14,d=t.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(l+"")+"px;color:"+encodeHTML(a)+";font-weight:"+encodeHTML(u+""),valueStyle:"font-size:"+encodeHTML(p+"")+"px;color:"+encodeHTML(c)+";font-weight:"+encodeHTML(d+"")}:{nameStyle:{fontSize:l,fill:a,fontWeight:u},valueStyle:{fontSize:p,fill:c,fontWeight:d}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(t,n){return n.type=t,n}function isSectionFragment(t){return t.type==="section"}function getBuilder(t){return isSectionFragment(t)?buildSection:buildNameValue}function getBlockGapLevel(t){if(isSectionFragment(t)){var n=0,a=t.blocks.length,l=a>1||a>0&&!t.noHeader;return each$f(t.blocks,function(u){var c=getBlockGapLevel(u);c>=n&&(n=c+ +(l&&(!c||isSectionFragment(u)&&!u.noHeader)))}),n}return 0}function buildSection(t,n,a,l){var u=n.noHeader,c=getGap(getBlockGapLevel(n)),p=[],d=n.blocks||[];assert(!d||isArray$1(d)),d=d||[];var Q=t.orderMode;if(n.sortBlocks&&Q){d=d.slice();var Ct={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(Ct,Q)){var ar=new SortOrderComparator(Ct[Q],null);d.sort(function(gn,Cn){return ar.evaluate(gn.sortParam,Cn.sortParam)})}else Q==="seriesDesc"&&d.reverse()}each$f(d,function(gn,Cn){var ex=n.valueFormatter,ix=getBuilder(gn)(ex?extend(extend({},t),{valueFormatter:ex}):t,gn,Cn>0?c.html:0,l);ix!=null&&p.push(ix)});var en=t.renderMode==="richText"?p.join(c.richText):wrapBlockHTML(l,p.join(""),u?a:c.html);if(u)return en;var tn=makeValueReadable(n.header,"ordinal",t.useUTC),on=getTooltipTextStyle(l,t.renderMode).nameStyle,cn=getTooltipLineHeight(l);return t.renderMode==="richText"?wrapInlineNameRichText(t,tn,on)+c.richText+en:wrapBlockHTML(l,'<div style="'+on+";"+cn+';">'+encodeHTML(tn)+"</div>"+en,a)}function buildNameValue(t,n,a,l){var u=t.renderMode,c=n.noName,p=n.noValue,d=!n.markerType,Q=n.name,Ct=t.useUTC,ar=n.valueFormatter||t.valueFormatter||function(ox){return ox=isArray$1(ox)?ox:[ox],map$1(ox,function(lx,cx){return makeValueReadable(lx,isArray$1(on)?on[cx]:on,Ct)})};if(!(c&&p)){var en=d?"":t.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",u),tn=c?"":makeValueReadable(Q,"ordinal",Ct),on=n.valueType,cn=p?[]:ar(n.value,n.dataIndex),gn=!d||!c,Cn=!d&&c,ex=getTooltipTextStyle(l,u),ix=ex.nameStyle,ax=ex.valueStyle;return u==="richText"?(d?"":en)+(c?"":wrapInlineNameRichText(t,tn,ix))+(p?"":wrapInlineValueRichText(t,cn,gn,Cn,ax)):wrapBlockHTML(l,(d?"":en)+(c?"":wrapInlineNameHTML(tn,!d,ix))+(p?"":wrapInlineValueHTML(cn,gn,Cn,ax)),a)}}function buildTooltipMarkup(t,n,a,l,u,c){if(t){var p=getBuilder(t),d={useUTC:u,renderMode:a,orderMode:l,markupStyleCreator:n,valueFormatter:t.valueFormatter};return p(d,t,0,c)}}function getGap(t){return{html:HTML_GAPS[t],richText:RICH_TEXT_GAPS[t]}}function wrapBlockHTML(t,n,a){var l='<div style="clear:both"></div>',u="margin: "+a+"px 0 0",c=getTooltipLineHeight(t);return'<div style="'+u+";"+c+';">'+n+l+"</div>"}function wrapInlineNameHTML(t,n,a){var l=n?"margin-left:2px":"";return'<span style="'+a+";"+l+'">'+encodeHTML(t)+"</span>"}function wrapInlineValueHTML(t,n,a,l){var u=a?"10px":"20px",c=n?"float:right;margin-left:"+u:"";return t=isArray$1(t)?t:[t],'<span style="'+c+";"+l+'">'+map$1(t,function(p){return encodeHTML(p)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(t,n,a){return t.markupStyleCreator.wrapRichTextStyle(n,a)}function wrapInlineValueRichText(t,n,a,l,u){var c=[u],p=l?10:20;return a&&c.push({padding:[0,0,0,p],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,c)}function retrieveVisualColorForTooltipMarker(t,n){var a=t.getData().getItemVisual(n,"style"),l=a[t.visualDrawType];return convertToColorString(l)}function getPaddingFromTooltipModel(t,n){var a=t.get("padding");return a??(n==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function t(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(n,a,l){var u=l==="richText"?this._generateStyleName():null,c=getTooltipMarker({color:a,type:n,renderMode:l,markerId:u});return isString$1(c)?c:(this.richTextStyles[u]=c.style,c.content)},t.prototype.wrapRichTextStyle=function(n,a){var l={};isArray$1(a)?each$f(a,function(c){return extend(l,c)}):extend(l,a);var u=this._generateStyleName();return this.richTextStyles[u]=l,"{"+u+"|"+n+"}"},t}();function defaultSeriesFormatTooltip(t){var n=t.series,a=t.dataIndex,l=t.multipleSeries,u=n.getData(),c=u.mapDimensionsAll("defaultedTooltip"),p=c.length,d=n.getRawValue(a),Q=isArray$1(d),Ct=retrieveVisualColorForTooltipMarker(n,a),ar,en,tn,on;if(p>1||Q&&!p){var cn=formatTooltipArrayValue(d,n,a,c,Ct);ar=cn.inlineValues,en=cn.inlineValueTypes,tn=cn.blocks,on=cn.inlineValues[0]}else if(p){var gn=u.getDimensionInfo(c[0]);on=ar=retrieveRawValue(u,a,c[0]),en=gn.type}else on=ar=Q?d[0]:d;var Cn=isNameSpecified(n),ex=Cn&&n.name||"",ix=u.getName(a),ax=l?ex:ix;return createTooltipMarkup("section",{header:ex,noHeader:l||!Cn,sortParam:on,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:Ct,name:ax,noName:!trim$1(ax),value:ar,valueType:en,dataIndex:a})].concat(tn||[])})}function formatTooltipArrayValue(t,n,a,l,u){var c=n.getData(),p=reduce(t,function(en,tn,on){var cn=c.getDimensionInfo(on);return en=en||cn&&cn.tooltip!==!1&&cn.displayName!=null},!1),d=[],Q=[],Ct=[];l.length?each$f(l,function(en){ar(retrieveRawValue(c,a,en),en)}):each$f(t,ar);function ar(en,tn){var on=c.getDimensionInfo(tn);!on||on.otherDims.tooltip===!1||(p?Ct.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:u,name:on.displayName,value:en,valueType:on.type})):(d.push(en),Q.push(on.type)))}return{inlineValues:d,inlineValueTypes:Q,blocks:Ct}}var inner$k=makeInner();function getSelectionKey(t,n){return t.getName(n)||t.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._selectedDataIndicesMap={},a}return n.prototype.init=function(a,l,u){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(a,u);var c=inner$k(this).sourceManager=new SourceManager(this);c.prepareSource();var p=this.getInitialData(a,u);wrapData(p,this),this.dataTask.context.data=p,inner$k(this).dataBeforeProcessed=p,autoSeriesName(this),this._initSelectedMapFromData(p)},n.prototype.mergeDefaultAndTheme=function(a,l){var u=fetchLayoutMode(this),c=u?getLayoutParams(a):{},p=this.subType;ComponentModel.hasClass(p)&&(p+="Series"),merge(a,l.getTheme().get(this.subType)),merge(a,this.getDefaultOption()),defaultEmphasis(a,"label",["show"]),this.fillDataTextStyle(a.data),u&&mergeLayoutParam(a,c,u)},n.prototype.mergeOption=function(a,l){a=merge(this.option,a,!0),this.fillDataTextStyle(a.data);var u=fetchLayoutMode(this);u&&mergeLayoutParam(this.option,a,u);var c=inner$k(this).sourceManager;c.dirty(),c.prepareSource();var p=this.getInitialData(a,l);wrapData(p,this),this.dataTask.dirty(),this.dataTask.context.data=p,inner$k(this).dataBeforeProcessed=p,autoSeriesName(this),this._initSelectedMapFromData(p)},n.prototype.fillDataTextStyle=function(a){if(a&&!isTypedArray(a))for(var l=["show"],u=0;u<a.length;u++)a[u]&&a[u].label&&defaultEmphasis(a[u],"label",l)},n.prototype.getInitialData=function(a,l){},n.prototype.appendData=function(a){var l=this.getRawData();l.appendData(a.data)},n.prototype.getData=function(a){var l=getCurrentTask(this);if(l){var u=l.context.data;return a==null||!u.getLinkedData?u:u.getLinkedData(a)}else return inner$k(this).data},n.prototype.getAllData=function(){var a=this.getData();return a&&a.getLinkedDataAll?a.getLinkedDataAll():[{data:a}]},n.prototype.setData=function(a){var l=getCurrentTask(this);if(l){var u=l.context;u.outputData=a,l!==this.dataTask&&(u.data=a)}inner$k(this).data=a},n.prototype.getEncode=function(){var a=this.get("encode",!0);if(a)return createHashMap(a)},n.prototype.getSourceManager=function(){return inner$k(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var a=this.get("colorBy");return a||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},n.prototype.formatTooltip=function(a,l,u){return defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:l})},n.prototype.isAnimationEnabled=function(){var a=this.ecModel;if(env.node&&!(a&&a.ssr))return!1;var l=this.getShallow("animation");return l&&this.getData().count()>this.getShallow("animationThreshold")&&(l=!1),!!l},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(a,l,u){var c=this.ecModel,p=PaletteMixin.prototype.getColorFromPalette.call(this,a,l,u);return p||(p=c.getColorFromPalette(a,l,u)),p},n.prototype.coordDimToDataDim=function(a){return this.getRawData().mapDimensionsAll(a)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(a,l){this._innerSelect(this.getData(l),a)},n.prototype.unselect=function(a,l){var u=this.option.selectedMap;if(u){var c=this.option.selectedMode,p=this.getData(l);if(c==="series"||u==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var d=0;d<a.length;d++){var Q=a[d],Ct=getSelectionKey(p,Q);u[Ct]=!1,this._selectedDataIndicesMap[Ct]=-1}}},n.prototype.toggleSelect=function(a,l){for(var u=[],c=0;c<a.length;c++)u[0]=a[c],this.isSelected(a[c],l)?this.unselect(u,l):this.select(u,l)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var a=this._selectedDataIndicesMap,l=keys(a),u=[],c=0;c<l.length;c++){var p=a[l[c]];p>=0&&u.push(p)}return u},n.prototype.isSelected=function(a,l){var u=this.option.selectedMap;if(!u)return!1;var c=this.getData(l);return(u==="all"||u[getSelectionKey(c,a)])&&!c.getItemModel(a).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var a=this.option.universalTransition;return a?a===!0?!0:a&&a.enabled:!1},n.prototype._innerSelect=function(a,l){var u,c,p=this.option,d=p.selectedMode,Q=l.length;if(!(!d||!Q)){if(d==="series")p.selectedMap="all";else if(d==="multiple"){isObject$3(p.selectedMap)||(p.selectedMap={});for(var Ct=p.selectedMap,ar=0;ar<Q;ar++){var en=l[ar],tn=getSelectionKey(a,en);Ct[tn]=!0,this._selectedDataIndicesMap[tn]=a.getRawIndex(en)}}else if(d==="single"||d===!0){var on=l[Q-1],tn=getSelectionKey(a,on);p.selectedMap=(u={},u[tn]=!0,u),this._selectedDataIndicesMap=(c={},c[tn]=a.getRawIndex(on),c)}}},n.prototype._initSelectedMapFromData=function(a){if(!this.option.selectedMap){var l=[];a.hasItemOption&&a.each(function(u){var c=a.getRawDataItem(u);c&&c.selected&&l.push(u)}),l.length>0&&this._innerSelect(a,l)}},n.registerClass=function(a){return ComponentModel.registerClass(a)},n.protoInitialize=function(){var a=n.prototype;a.type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",a.visualDrawType="fill"}(),n}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(t){var n=t.name;isNameSpecified(t)||(t.name=getSeriesAutoName(t)||n)}function getSeriesAutoName(t){var n=t.getRawData(),a=n.mapDimensionsAll("seriesName"),l=[];return each$f(a,function(u){var c=n.getDimensionInfo(u);c.displayName&&l.push(c.displayName)}),l.join(" ")}function dataTaskCount(t){return t.model.getRawData().count()}function dataTaskReset(t){var n=t.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(t,n){n.outputData&&t.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(t,n){each$f(concatArray(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(a){t.wrapMethod(a,curry$1(onDataChange,n))})}function onDataChange(t,n){var a=getCurrentTask(t);return a&&a.setOutputEnd((n||this).count()),n}function getCurrentTask(t){var n=(t.ecModel||{}).scheduler,a=n&&n.getPipeline(t.uid);if(a){var l=a.currentTask;if(l){var u=l.agentStubMap;u&&(l=u.get(t.uid))}return l}}var ComponentView=function(){function t(){this.group=new Group$3,this.uid=getUID("viewComponent")}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,l,u){},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,l,u){},t.prototype.updateLayout=function(n,a,l,u){},t.prototype.updateVisual=function(n,a,l,u){},t.prototype.toggleBlurSeries=function(n,a,l){},t.prototype.eachRendered=function(n){var a=this.group;a&&a.traverse(n)},t}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var t=makeInner();return function(n){var a=t(n),l=n.pipelineContext,u=!!a.large,c=!!a.progressiveRender,p=a.large=!!(l&&l.large),d=a.progressiveRender=!!(l&&l.progressiveRender);return(u!==p||c!==d)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function t(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,l,u){},t.prototype.highlight=function(n,a,l,u){var c=n.getData(u&&u.dataType);c&&toggleHighlight(c,u,"emphasis")},t.prototype.downplay=function(n,a,l,u){var c=n.getData(u&&u.dataType);c&&toggleHighlight(c,u,"normal")},t.prototype.remove=function(n,a){this.group.removeAll()},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,l,u){this.render(n,a,l,u)},t.prototype.updateLayout=function(n,a,l,u){this.render(n,a,l,u)},t.prototype.updateVisual=function(n,a,l,u){this.render(n,a,l,u)},t.prototype.eachRendered=function(n){traverseElements(this.group,n)},t.markUpdateMethod=function(n,a){inner$j(n).updateMethod=a},t.protoInitialize=function(){var n=t.prototype;n.type="chart"}(),t}();function elSetState(t,n,a){t&&isHighDownDispatcher(t)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(t,a)}function toggleHighlight(t,n,a){var l=queryDataIndex(t,n),u=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;l!=null?each$f(normalizeToArray(l),function(c){elSetState(t.getItemGraphicEl(c),a,u)}):t.eachItemGraphicEl(function(c){elSetState(c,a,u)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(t){return renderPlanner(t.model)}function renderTaskReset(t){var n=t.model,a=t.ecModel,l=t.api,u=t.payload,c=n.pipelineContext.progressiveRender,p=t.view,d=u&&inner$j(u).updateMethod,Q=c?"incrementalPrepareRender":d&&p[d]?d:"render";return Q!=="render"&&p[Q](n,a,l,u),progressMethodMap[Q]}var progressMethodMap={incrementalPrepareRender:{progress:function(t,n){n.view.incrementalRender(t,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(t,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(t,n,a){var l,u=0,c=0,p=null,d,Q,Ct,ar;n=n||0;function en(){c=new Date().getTime(),p=null,t.apply(Q,Ct||[])}var tn=function(){for(var on=[],cn=0;cn<arguments.length;cn++)on[cn]=arguments[cn];l=new Date().getTime(),Q=this,Ct=on;var gn=ar||n,Cn=ar||a;ar=null,d=l-(Cn?u:c)-gn,clearTimeout(p),Cn?p=setTimeout(en,gn):d>=0?en():p=setTimeout(en,-d),u=l};return tn.clear=function(){p&&(clearTimeout(p),p=null)},tn.debounceNextCall=function(on){ar=on},tn}function createOrUpdate(t,n,a,l){var u=t[n];if(u){var c=u[ORIGIN_METHOD]||u,p=u[THROTTLE_TYPE],d=u[RATE];if(d!==a||p!==l){if(a==null||!l)return t[n]=c;u=t[n]=throttle(c,a,l==="debounce"),u[ORIGIN_METHOD]=c,u[THROTTLE_TYPE]=l,u[RATE]=a}return u}}function clear$1(t,n){var a=t[n];a&&a[ORIGIN_METHOD]&&(a.clear&&a.clear(),t[n]=a[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(t,n){var a=t.visualStyleMapper||defaultStyleMappers[n];return a||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(t,n){var a=t.visualDrawType||defaultColorKey[n];return a||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData(),l=t.visualStyleAccessPath||"itemStyle",u=t.getModel(l),c=getStyleMapper(t,l),p=c(u),d=u.getShallow("decal");d&&(a.setVisual("decal",d),d.dirty=!0);var Q=getDefaultColorKey(t,l),Ct=p[Q],ar=isFunction$1(Ct)?Ct:null,en=p.fill==="auto"||p.stroke==="auto";if(!p[Q]||ar||en){var tn=t.getColorFromPalette(t.name,null,n.getSeriesCount());p[Q]||(p[Q]=tn,a.setVisual("colorFromPalette",!0)),p.fill=p.fill==="auto"||isFunction$1(p.fill)?tn:p.fill,p.stroke=p.stroke==="auto"||isFunction$1(p.stroke)?tn:p.stroke}if(a.setVisual("style",p),a.setVisual("drawType",Q),!n.isSeriesFiltered(t)&&ar)return a.setVisual("colorFromPalette",!1),{dataEach:function(on,cn){var gn=t.getDataParams(cn),Cn=extend({},p);Cn[Q]=ar(gn),on.setItemVisual(cn,"style",Cn)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!(t.ignoreStyleOnData||n.isSeriesFiltered(t))){var a=t.getData(),l=t.visualStyleAccessPath||"itemStyle",u=getStyleMapper(t,l),c=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(p,d){var Q=p.getRawDataItem(d);if(Q&&Q[l]){sharedModel.option=Q[l];var Ct=u(sharedModel),ar=p.ensureUniqueItemVisual(d,"style");extend(ar,Ct),sharedModel.option.decal&&(p.setItemVisual(d,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),c in Ct&&p.setItemVisual(d,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(t){var n=createHashMap();t.eachSeries(function(a){var l=a.getColorBy();if(!a.isColorBySeries()){var u=a.type+"-"+l,c=n.get(u);c||(c={},n.set(u,c)),inner$i(a).scope=c}}),t.eachSeries(function(a){if(!(a.isColorBySeries()||t.isSeriesFiltered(a))){var l=a.getRawData(),u={},c=a.getData(),p=inner$i(a).scope,d=a.visualStyleAccessPath||"itemStyle",Q=getDefaultColorKey(a,d);c.each(function(Ct){var ar=c.getRawIndex(Ct);u[ar]=Ct}),l.each(function(Ct){var ar=u[Ct],en=c.getItemVisual(ar,"colorFromPalette");if(en){var tn=c.ensureUniqueItemVisual(ar,"style"),on=l.getName(Ct)||Ct+"",cn=l.count();tn[Q]=a.getColorFromPalette(on,p,cn)}})}})}},PI$5=Math.PI;function defaultLoading(t,n){n=n||{},defaults(n,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var a=new Group$3,l=new Rect$2({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});a.add(l);var u=new ZRText({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),c=new Rect$2({style:{fill:"none"},textContent:u,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});a.add(c);var p;return n.showSpinner&&(p=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),p.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),p.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),a.add(p)),a.resize=function(){var d=u.getBoundingRect().width,Q=n.showSpinner?n.spinnerRadius:0,Ct=(t.getWidth()-Q*2-(n.showSpinner&&d?10:0)-d)/2-(n.showSpinner&&d?0:5+d/2)+(n.showSpinner?0:d/2)+(d?0:Q),ar=t.getHeight()/2;n.showSpinner&&p.setShape({cx:Ct,cy:ar}),c.setShape({x:Ct-Q,y:ar-Q,width:Q*2,height:Q*2}),l.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}var Scheduler=function(){function t(n,a,l,u){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=a,l=this._dataProcessorHandlers=l.slice(),u=this._visualHandlers=u.slice(),this._allHandlers=l.concat(u)}return t.prototype.restoreData=function(n,a){n.restoreData(a),this._stageTaskMap.each(function(l){var u=l.overallTask;u&&u.dirty()})},t.prototype.getPerformArgs=function(n,a){if(n.__pipeline){var l=this._pipelineMap.get(n.__pipeline.id),u=l.context,c=!a&&l.progressiveEnabled&&(!u||u.progressiveRender)&&n.__idxInPipeline>l.blockIndex,p=c?l.step:null,d=u&&u.modDataCount,Q=d!=null?Math.ceil(d/p):null;return{step:p,modBy:Q,modDataCount:d}}},t.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},t.prototype.updateStreamModes=function(n,a){var l=this._pipelineMap.get(n.uid),u=n.getData(),c=u.count(),p=l.progressiveEnabled&&a.incrementalPrepareRender&&c>=l.threshold,d=n.get("large")&&c>=n.get("largeThreshold"),Q=n.get("progressiveChunkMode")==="mod"?c:null;n.pipelineContext=l.context={progressiveRender:p,modDataCount:Q,large:d}},t.prototype.restorePipelines=function(n){var a=this,l=a._pipelineMap=createHashMap();n.eachSeries(function(u){var c=u.getProgressive(),p=u.uid;l.set(p,{id:p,head:null,tail:null,threshold:u.getProgressiveThreshold(),progressiveEnabled:c&&!(u.preventIncremental&&u.preventIncremental()),blockIndex:-1,step:Math.round(c||700),count:0}),a._pipe(u,u.dataTask)})},t.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,a=this.api.getModel(),l=this.api;each$f(this._allHandlers,function(u){var c=n.get(u.uid)||n.set(u.uid,{}),p="";assert(!(u.reset&&u.overallReset),p),u.reset&&this._createSeriesStageTask(u,c,a,l),u.overallReset&&this._createOverallStageTask(u,c,a,l)},this)},t.prototype.prepareView=function(n,a,l,u){var c=n.renderTask,p=c.context;p.model=a,p.ecModel=l,p.api=u,c.__block=!n.incrementalPrepareRender,this._pipe(a,c)},t.prototype.performDataProcessorTasks=function(n,a){this._performStageTasks(this._dataProcessorHandlers,n,a,{block:!0})},t.prototype.performVisualTasks=function(n,a,l){this._performStageTasks(this._visualHandlers,n,a,l)},t.prototype._performStageTasks=function(n,a,l,u){u=u||{};var c=!1,p=this;each$f(n,function(Q,Ct){if(!(u.visualType&&u.visualType!==Q.visualType)){var ar=p._stageTaskMap.get(Q.uid),en=ar.seriesTaskMap,tn=ar.overallTask;if(tn){var on,cn=tn.agentStubMap;cn.each(function(Cn){d(u,Cn)&&(Cn.dirty(),on=!0)}),on&&tn.dirty(),p.updatePayload(tn,l);var gn=p.getPerformArgs(tn,u.block);cn.each(function(Cn){Cn.perform(gn)}),tn.perform(gn)&&(c=!0)}else en&&en.each(function(Cn,ex){d(u,Cn)&&Cn.dirty();var ix=p.getPerformArgs(Cn,u.block);ix.skip=!Q.performRawSeries&&a.isSeriesFiltered(Cn.context.model),p.updatePayload(Cn,l),Cn.perform(ix)&&(c=!0)})}});function d(Q,Ct){return Q.setDirty&&(!Q.dirtyMap||Q.dirtyMap.get(Ct.__pipeline.id))}this.unfinished=c||this.unfinished},t.prototype.performSeriesTasks=function(n){var a;n.eachSeries(function(l){a=l.dataTask.perform()||a}),this.unfinished=a||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(n){var a=n.tail;do{if(a.__block){n.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},t.prototype.updatePayload=function(n,a){a!=="remain"&&(n.context.payload=a)},t.prototype._createSeriesStageTask=function(n,a,l,u){var c=this,p=a.seriesTaskMap,d=a.seriesTaskMap=createHashMap(),Q=n.seriesType,Ct=n.getTargetSeries;n.createOnAllSeries?l.eachRawSeries(ar):Q?l.eachRawSeriesByType(Q,ar):Ct&&Ct(l,u).each(ar);function ar(en){var tn=en.uid,on=d.set(tn,p&&p.get(tn)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));on.context={model:en,ecModel:l,api:u,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:c},c._pipe(en,on)}},t.prototype._createOverallStageTask=function(n,a,l,u){var c=this,p=a.overallTask=a.overallTask||createTask({reset:overallTaskReset});p.context={ecModel:l,api:u,overallReset:n.overallReset,scheduler:c};var d=p.agentStubMap,Q=p.agentStubMap=createHashMap(),Ct=n.seriesType,ar=n.getTargetSeries,en=!0,tn=!1,on="";assert(!n.createOnAllSeries,on),Ct?l.eachRawSeriesByType(Ct,cn):ar?ar(l,u).each(cn):(en=!1,each$f(l.getSeries(),cn));function cn(gn){var Cn=gn.uid,ex=Q.set(Cn,d&&d.get(Cn)||(tn=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));ex.context={model:gn,overallProgress:en},ex.agent=p,ex.__block=en,c._pipe(gn,ex)}tn&&p.dirty()},t.prototype._pipe=function(n,a){var l=n.uid,u=this._pipelineMap.get(l);!u.head&&(u.head=a),u.tail&&u.tail.pipe(a),u.tail=a,a.__idxInPipeline=u.count++,a.__pipeline=u},t.wrapStageHandler=function(n,a){return isFunction$1(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),a&&(n.visualType=a),n},t}();function overallTaskReset(t){t.overallReset(t.ecModel,t.api,t.payload)}function stubReset(t){return t.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function seriesTaskReset(t){t.useClearVisual&&t.data.clearAllVisual();var n=t.resetDefines=normalizeToArray(t.reset(t.model,t.ecModel,t.api,t.payload));return n.length>1?map$1(n,function(a,l){return makeSeriesTaskProgress(l)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(t){return function(n,a){var l=a.data,u=a.resetDefines[t];if(u&&u.dataEach)for(var c=n.start;c<n.end;c++)u.dataEach(l,c);else u&&u.progress&&u.progress(n,l)}}function seriesTaskCount(t){return t.data.count()}function detectSeriseType(t){seriesType=null;try{t(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(t){seriesType=t};ecModelMock.eachComponent=function(t){t.mainType==="series"&&t.subType&&(seriesType=t.subType)};function mockMethods(t,n){for(var a in n.prototype)t[a]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function t(){}return t.prototype.normalizeQuery=function(n){var a={},l={},u={};if(isString$1(n)){var c=parseClassType(n);a.mainType=c.main||null,a.subType=c.sub||null}else{var p=["Index","Name","Id"],d={name:1,dataIndex:1,dataType:1};each$f(n,function(Q,Ct){for(var ar=!1,en=0;en<p.length;en++){var tn=p[en],on=Ct.lastIndexOf(tn);if(on>0&&on===Ct.length-tn.length){var cn=Ct.slice(0,on);cn!=="data"&&(a.mainType=cn,a[tn.toLowerCase()]=Q,ar=!0)}}d.hasOwnProperty(Ct)&&(l[Ct]=Q,ar=!0),ar||(u[Ct]=Q)})}return{cptQuery:a,dataQuery:l,otherQuery:u}},t.prototype.filter=function(n,a){var l=this.eventInfo;if(!l)return!0;var u=l.targetEl,c=l.packedEvent,p=l.model,d=l.view;if(!p||!d)return!0;var Q=a.cptQuery,Ct=a.dataQuery;return ar(Q,p,"mainType")&&ar(Q,p,"subType")&&ar(Q,p,"index","componentIndex")&&ar(Q,p,"name")&&ar(Q,p,"id")&&ar(Ct,c,"name")&&ar(Ct,c,"dataIndex")&&ar(Ct,c,"dataType")&&(!d.filterForExposedEvent||d.filterForExposedEvent(n,a.otherQuery,u,c));function ar(en,tn,on,cn){return en[on]==null||tn[cn||on]===en[on]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData();if(t.legendIcon&&a.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var l={},u={},c=!1,p=0;p<SYMBOL_PROPS_WITH_CB.length;p++){var d=SYMBOL_PROPS_WITH_CB[p],Q=t.get(d);isFunction$1(Q)?(c=!0,u[d]=Q):l[d]=Q}if(l.symbol=l.symbol||t.defaultSymbol,a.setVisual(extend({legendIcon:t.legendIcon||l.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},l)),n.isSeriesFiltered(t))return;var Ct=keys(u);function ar(en,tn){for(var on=t.getRawValue(tn),cn=t.getDataParams(tn),gn=0;gn<Ct.length;gn++){var Cn=Ct[gn];en.setItemVisual(tn,Cn,u[Cn](on,cn))}}return{dataEach:c?ar:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!t.hasSymbolVisual||n.isSeriesFiltered(t))return;var a=t.getData();function l(u,c){for(var p=u.getItemModel(c),d=0;d<SYMBOL_PROPS.length;d++){var Q=SYMBOL_PROPS[d],Ct=p.getShallow(Q,!0);Ct!=null&&u.setItemVisual(c,Q,Ct)}}return{dataEach:a.hasItemOption?l:null}}};function getItemVisualFromData(t,n,a){switch(a){case"color":var l=t.getItemVisual(n,"style");return l[t.getVisual("drawType")];case"opacity":return t.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(n,a)}}function getVisualFromData(t,n){switch(n){case"color":var a=t.getVisual("style");return a[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(n)}}function setItemVisualFromData(t,n,a,l){switch(a){case"color":var u=t.ensureUniqueItemVisual(n,"style");u[t.getVisual("drawType")]=l,t.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(n,"style").opacity=l;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(n,a,l);break}}function createLegacyDataSelectAction(t,n){function a(l,u){var c=[];return l.eachComponent({mainType:"series",subType:t,query:u},function(p){c.push(p.seriesIndex)}),c}each$f([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(l){n(l[0],function(u,c,p){u=extend({},u),p.dispatchAction(extend(u,{type:l[1],seriesIndex:a(c,u)}))})})}function handleSeriesLegacySelectEvents(t,n,a,l,u){var c=t+n;a.isSilent(c)||l.eachComponent({mainType:"series",subType:"pie"},function(p){for(var d=p.seriesIndex,Q=p.option.selectedMap,Ct=u.selected,ar=0;ar<Ct.length;ar++)if(Ct[ar].seriesIndex===d){var en=p.getData(),tn=queryDataIndex(en,u.fromActionPayload);a.trigger(c,{type:c,seriesId:p.id,name:isArray$1(tn)?en.getName(tn[0]):en.getName(tn),selected:isString$1(Q)?Q:extend({},Q)})}})}function handleLegacySelectEvents(t,n,a){t.on("selectchanged",function(l){var u=a.getModel();l.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,u,l),handleSeriesLegacySelectEvents("pie","selectchanged",n,u,l)):l.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,u,l),handleSeriesLegacySelectEvents("pie","selected",n,u,l)):l.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,u,l),handleSeriesLegacySelectEvents("pie","unselected",n,u,l))})}function findEventDispatcher(t,n,a){for(var l;t&&!(n(t)&&(l=t,a));)t=t.__hostTarget||t.parent;return l}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function t(){this._id="__ec_inner_"+wmUniqueIndex++}return t.prototype.get=function(n){return this._guard(n)[this._id]},t.prototype.set=function(n,a){var l=this._guard(n);return supportDefineProperty?Object.defineProperty(l,this._id,{value:a,enumerable:!1,configurable:!0}):l[this._id]=a,this},t.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},t.prototype.has=function(n){return!!this._guard(n)[this._id]},t.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},t}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,l=n.cy,u=n.width/2,c=n.height/2;t.moveTo(a,l-c),t.lineTo(a+u,l+c),t.lineTo(a-u,l+c),t.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,l=n.cy,u=n.width/2,c=n.height/2;t.moveTo(a,l-c),t.lineTo(a+u,l),t.lineTo(a,l+c),t.lineTo(a-u,l),t.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.x,l=n.y,u=n.width/5*3,c=Math.max(u,n.height),p=u/2,d=p*p/(c-p),Q=l-c+p+d,Ct=Math.asin(d/p),ar=Math.cos(Ct)*p,en=Math.sin(Ct),tn=Math.cos(Ct),on=p*.6,cn=p*.7;t.moveTo(a-ar,Q+d),t.arc(a,Q,p,Math.PI-Ct,Math.PI*2+Ct),t.bezierCurveTo(a+ar-en*on,Q+d+tn*on,a,l-cn,a,l),t.bezierCurveTo(a,l-cn,a-ar+en*on,Q+d+tn*on,a-ar,Q+d),t.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.height,l=n.width,u=n.x,c=n.y,p=l/3*2;t.moveTo(u,c),t.lineTo(u+p,c+a),t.lineTo(u,c+a/4*3),t.lineTo(u-p,c+a),t.lineTo(u,c),t.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(t,n,a,l,u){u.x1=t,u.y1=n+l/2,u.x2=t+a,u.y2=n+l/2},rect:function(t,n,a,l,u){u.x=t,u.y=n,u.width=a,u.height=l},roundRect:function(t,n,a,l,u){u.x=t,u.y=n,u.width=a,u.height=l,u.r=Math.min(a,l)/4},square:function(t,n,a,l,u){var c=Math.min(a,l);u.x=t,u.y=n,u.width=c,u.height=c},circle:function(t,n,a,l,u){u.cx=t+a/2,u.cy=n+l/2,u.r=Math.min(a,l)/2},diamond:function(t,n,a,l,u){u.cx=t+a/2,u.cy=n+l/2,u.width=a,u.height=l},pin:function(t,n,a,l,u){u.x=t+a/2,u.y=n+l/2,u.width=a,u.height=l},arrow:function(t,n,a,l,u){u.x=t+a/2,u.y=n+l/2,u.width=a,u.height=l},triangle:function(t,n,a,l,u){u.cx=t+a/2,u.cy=n+l/2,u.width=a,u.height=l}},symbolBuildProxies={};each$f(symbolCtors,function(t,n){symbolBuildProxies[n]=new t});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,n,a){var l=calculateTextPosition(t,n,a),u=this.shape;return u&&u.symbolType==="pin"&&n.position==="inside"&&(l.y=a.y+a.height*.4),l},buildPath:function(t,n,a){var l=n.symbolType;if(l!=="none"){var u=symbolBuildProxies[l];u||(l="rect",u=symbolBuildProxies[l]),symbolShapeMakers[l](n.x,n.y,n.width,n.height,u.shape),u.buildPath(t,u.shape,a)}}});function symbolPathSetColor(t,n){if(this.type!=="image"){var a=this.style;this.__isEmptyBrush?(a.stroke=t,a.fill=n||"#fff",a.lineWidth=2):this.shape.symbolType==="line"?a.stroke=t:a.fill=t,this.markRedraw()}}function createSymbol$1(t,n,a,l,u,c,p){var d=t.indexOf("empty")===0;d&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var Q;return t.indexOf("image://")===0?Q=makeImage(t.slice(8),new BoundingRect(n,a,l,u),p?"center":"cover"):t.indexOf("path://")===0?Q=makePath(t.slice(7),{},new BoundingRect(n,a,l,u),p?"center":"cover"):Q=new SymbolClz({shape:{symbolType:t,x:n,y:a,width:l,height:u}}),Q.__isEmptyBrush=d,Q.setColor=symbolPathSetColor,c&&Q.setColor(c),Q}function normalizeSymbolSize(t){return isArray$1(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function normalizeSymbolOffset(t,n){if(t!=null)return isArray$1(t)||(t=[t,t]),[parsePercent(t[0],n[0])||0,parsePercent(retrieve2(t[1],t[0]),n[1])||0]}function isSafeNum(t){return isFinite(t)}function createLinearGradient(t,n,a){var l=n.x==null?0:n.x,u=n.x2==null?1:n.x2,c=n.y==null?0:n.y,p=n.y2==null?0:n.y2;n.global||(l=l*a.width+a.x,u=u*a.width+a.x,c=c*a.height+a.y,p=p*a.height+a.y),l=isSafeNum(l)?l:0,u=isSafeNum(u)?u:1,c=isSafeNum(c)?c:0,p=isSafeNum(p)?p:0;var d=t.createLinearGradient(l,c,u,p);return d}function createRadialGradient(t,n,a){var l=a.width,u=a.height,c=Math.min(l,u),p=n.x==null?.5:n.x,d=n.y==null?.5:n.y,Q=n.r==null?.5:n.r;n.global||(p=p*l+a.x,d=d*u+a.y,Q=Q*c),p=isSafeNum(p)?p:.5,d=isSafeNum(d)?d:.5,Q=Q>=0&&isSafeNum(Q)?Q:.5;var Ct=t.createRadialGradient(p,d,0,p,d,Q);return Ct}function getCanvasGradient(t,n,a){for(var l=n.type==="radial"?createRadialGradient(t,n,a):createLinearGradient(t,n,a),u=n.colorStops,c=0;c<u.length;c++)l.addColorStop(u[c].offset,u[c].color);return l}function isClipPathChanged(t,n){if(t===n||!t&&!n)return!1;if(!t||!n||t.length!==n.length)return!0;for(var a=0;a<t.length;a++)if(t[a]!==n[a])return!0;return!1}function parseInt10(t){return parseInt(t,10)}function getSize$1(t,n,a){var l=["width","height"][n],u=["clientWidth","clientHeight"][n],c=["paddingLeft","paddingTop"][n],p=["paddingRight","paddingBottom"][n];if(a[l]!=null&&a[l]!=="auto")return parseFloat(a[l]);var d=document.defaultView.getComputedStyle(t);return(t[u]||parseInt10(d[l])||parseInt10(t.style[l]))-(parseInt10(d[c])||0)-(parseInt10(d[p])||0)|0}function normalizeLineDash(t,n){return!t||t==="solid"||!(n>0)?null:t==="dashed"?[4*n,2*n]:t==="dotted"?[n]:isNumber(t)?[t]:isArray$1(t)?t:null}function getLineDash(t){var n=t.style,a=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),l=n.lineDashOffset;if(a){var u=n.strokeNoScale&&t.getLineScale?t.getLineScale():1;u&&u!==1&&(a=map$1(a,function(c){return c/u}),l/=u)}return[a,l]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(t){var n=t.stroke;return!(n==null||n==="none"||!(t.lineWidth>0))}function isValidStrokeFillStyle(t){return typeof t=="string"&&t!=="none"}function styleHasFill(t){var n=t.fill;return n!=null&&n!=="none"}function doFillPath(t,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=a}else t.fill()}function doStrokePath(t,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=a}else t.stroke()}function createCanvasPattern(t,n,a){var l=createOrUpdateImage(n.image,n.__image,a);if(isImageReady(l)){var u=t.createPattern(l,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&u&&u.setTransform){var c=new DOMMatrix;c.translateSelf(n.x||0,n.y||0),c.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),c.scaleSelf(n.scaleX||1,n.scaleY||1),u.setTransform(c)}return u}}function brushPath(t,n,a,l){var u,c=styleHasStroke(a),p=styleHasFill(a),d=a.strokePercent,Q=d<1,Ct=!n.path;(!n.silent||Q)&&Ct&&n.createPathProxy();var ar=n.path||pathProxyForDraw,en=n.__dirty;if(!l){var tn=a.fill,on=a.stroke,cn=p&&!!tn.colorStops,gn=c&&!!on.colorStops,Cn=p&&!!tn.image,ex=c&&!!on.image,ix=void 0,ax=void 0,ox=void 0,lx=void 0,cx=void 0;(cn||gn)&&(cx=n.getBoundingRect()),cn&&(ix=en?getCanvasGradient(t,tn,cx):n.__canvasFillGradient,n.__canvasFillGradient=ix),gn&&(ax=en?getCanvasGradient(t,on,cx):n.__canvasStrokeGradient,n.__canvasStrokeGradient=ax),Cn&&(ox=en||!n.__canvasFillPattern?createCanvasPattern(t,tn,n):n.__canvasFillPattern,n.__canvasFillPattern=ox),ex&&(lx=en||!n.__canvasStrokePattern?createCanvasPattern(t,on,n):n.__canvasStrokePattern,n.__canvasStrokePattern=ox),cn?t.fillStyle=ix:Cn&&(ox?t.fillStyle=ox:p=!1),gn?t.strokeStyle=ax:ex&&(lx?t.strokeStyle=lx:c=!1)}var dx=n.getGlobalScale();ar.setScale(dx[0],dx[1],n.segmentIgnoreThreshold);var hx,fx;t.setLineDash&&a.lineDash&&(u=getLineDash(n),hx=u[0],fx=u[1]);var ux=!0;(Ct||en&SHAPE_CHANGED_BIT)&&(ar.setDPR(t.dpr),Q?ar.setContext(null):(ar.setContext(t),ux=!1),ar.reset(),n.buildPath(ar,n.shape,l),ar.toStatic(),n.pathUpdated()),ux&&ar.rebuildPath(t,Q?d:1),hx&&(t.setLineDash(hx),t.lineDashOffset=fx),l||(a.strokeFirst?(c&&doStrokePath(t,a),p&&doFillPath(t,a)):(p&&doFillPath(t,a),c&&doStrokePath(t,a))),hx&&t.setLineDash([])}function brushImage(t,n,a){var l=n.__image=createOrUpdateImage(a.image,n.__image,n,n.onload);if(!(!l||!isImageReady(l))){var u=a.x||0,c=a.y||0,p=n.getWidth(),d=n.getHeight(),Q=l.width/l.height;if(p==null&&d!=null?p=d*Q:d==null&&p!=null?d=p/Q:p==null&&d==null&&(p=l.width,d=l.height),a.sWidth&&a.sHeight){var Ct=a.sx||0,ar=a.sy||0;t.drawImage(l,Ct,ar,a.sWidth,a.sHeight,u,c,p,d)}else if(a.sx&&a.sy){var Ct=a.sx,ar=a.sy,en=p-Ct,tn=d-ar;t.drawImage(l,Ct,ar,en,tn,u,c,p,d)}else t.drawImage(l,u,c,p,d)}}function brushText(t,n,a){var l,u=a.text;if(u!=null&&(u+=""),u){t.font=a.font||DEFAULT_FONT,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline;var c=void 0,p=void 0;t.setLineDash&&a.lineDash&&(l=getLineDash(n),c=l[0],p=l[1]),c&&(t.setLineDash(c),t.lineDashOffset=p),a.strokeFirst?(styleHasStroke(a)&&t.strokeText(u,a.x,a.y),styleHasFill(a)&&t.fillText(u,a.x,a.y)):(styleHasFill(a)&&t.fillText(u,a.x,a.y),styleHasStroke(a)&&t.strokeText(u,a.x,a.y)),c&&t.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(t,n,a,l,u){var c=!1;if(!l&&(a=a||{},n===a))return!1;if(l||n.opacity!==a.opacity){flushPathDrawn(t,u),c=!0;var p=Math.max(Math.min(n.opacity,1),0);t.globalAlpha=isNaN(p)?DEFAULT_COMMON_STYLE.opacity:p}(l||n.blend!==a.blend)&&(c||(flushPathDrawn(t,u),c=!0),t.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var d=0;d<SHADOW_NUMBER_PROPS.length;d++){var Q=SHADOW_NUMBER_PROPS[d];(l||n[Q]!==a[Q])&&(c||(flushPathDrawn(t,u),c=!0),t[Q]=t.dpr*(n[Q]||0))}return(l||n.shadowColor!==a.shadowColor)&&(c||(flushPathDrawn(t,u),c=!0),t.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),c}function bindPathAndTextCommonStyle(t,n,a,l,u){var c=getStyle(n,u.inHover),p=l?null:a&&getStyle(a,u.inHover)||{};if(c===p)return!1;var d=bindCommonProps(t,c,p,l,u);if((l||c.fill!==p.fill)&&(d||(flushPathDrawn(t,u),d=!0),isValidStrokeFillStyle(c.fill)&&(t.fillStyle=c.fill)),(l||c.stroke!==p.stroke)&&(d||(flushPathDrawn(t,u),d=!0),isValidStrokeFillStyle(c.stroke)&&(t.strokeStyle=c.stroke)),(l||c.opacity!==p.opacity)&&(d||(flushPathDrawn(t,u),d=!0),t.globalAlpha=c.opacity==null?1:c.opacity),n.hasStroke()){var Q=c.lineWidth,Ct=Q/(c.strokeNoScale&&n.getLineScale?n.getLineScale():1);t.lineWidth!==Ct&&(d||(flushPathDrawn(t,u),d=!0),t.lineWidth=Ct)}for(var ar=0;ar<STROKE_PROPS.length;ar++){var en=STROKE_PROPS[ar],tn=en[0];(l||c[tn]!==p[tn])&&(d||(flushPathDrawn(t,u),d=!0),t[tn]=c[tn]||en[1])}return d}function bindImageStyle(t,n,a,l,u){return bindCommonProps(t,getStyle(n,u.inHover),a&&getStyle(a,u.inHover),l,u)}function setContextTransform(t,n){var a=n.transform,l=t.dpr||1;a?t.setTransform(l*a[0],l*a[1],l*a[2],l*a[3],l*a[4],l*a[5]):t.setTransform(l,0,0,l,0,0)}function updateClipStatus(t,n,a){for(var l=!1,u=0;u<t.length;u++){var c=t[u];l=l||c.isZeroArea(),setContextTransform(n,c),n.beginPath(),c.buildPath(n,c.shape),n.clip()}a.allClipped=l}function isTransformChanged(t,n){return t&&n?t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||t[4]!==n[4]||t[5]!==n[5]:!(!t&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(t){var n=styleHasFill(t),a=styleHasStroke(t);return!(t.lineDash||!(+n^+a)||n&&typeof t.fill!="string"||a&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function flushPathDrawn(t,n){n.batchFill&&t.fill(),n.batchStroke&&t.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(t,n){return n&&t.__hoverStyle||t.style}function brushSingle(t,n){brush$1(t,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(t,n,a,l){var u=n.transform;if(!n.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var c=n.__clipPaths,p=a.prevElClipPaths,d=!1,Q=!1;if((!p||isClipPathChanged(c,p))&&(p&&p.length&&(flushPathDrawn(t,a),t.restore(),Q=d=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),c&&c.length&&(flushPathDrawn(t,a),t.save(),updateClipStatus(c,t,a),d=!0),a.prevElClipPaths=c),a.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var Ct=a.prevEl;Ct||(Q=d=!0);var ar=n instanceof Path&&n.autoBatch&&canPathBatch(n.style);d||isTransformChanged(u,Ct.transform)?(flushPathDrawn(t,a),setContextTransform(t,n)):ar||flushPathDrawn(t,a);var en=getStyle(n,a.inHover);n instanceof Path?(a.lastDrawType!==DRAW_TYPE_PATH&&(Q=!0,a.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(t,n,Ct,Q,a),(!ar||!a.batchFill&&!a.batchStroke)&&t.beginPath(),brushPath(t,n,en,ar),ar&&(a.batchFill=en.fill||"",a.batchStroke=en.stroke||"")):n instanceof TSpan?(a.lastDrawType!==DRAW_TYPE_TEXT&&(Q=!0,a.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(t,n,Ct,Q,a),brushText(t,n,en)):n instanceof ZRImage?(a.lastDrawType!==DRAW_TYPE_IMAGE&&(Q=!0,a.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(t,n,Ct,Q,a),brushImage(t,n,en)):n.getTemporalDisplayables&&(a.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(Q=!0,a.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(t,n,a)),ar&&l&&flushPathDrawn(t,a),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),a.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(t,n,a){var l=n.getDisplayables(),u=n.getTemporalDisplayables();t.save();var c={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover},p,d;for(p=n.getCursor(),d=l.length;p<d;p++){var Q=l[p];Q.beforeBrush&&Q.beforeBrush(),Q.innerBeforeBrush(),brush$1(t,Q,c,p===d-1),Q.innerAfterBrush(),Q.afterBrush&&Q.afterBrush(),c.prevEl=Q}for(var Ct=0,ar=u.length;Ct<ar;Ct++){var Q=u[Ct];Q.beforeBrush&&Q.beforeBrush(),Q.innerBeforeBrush(),brush$1(t,Q,c,Ct===ar-1),Q.innerAfterBrush(),Q.afterBrush&&Q.afterBrush(),c.prevEl=Q}n.clearTemporalDisplayables(),n.notClear=!0,t.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(t,n){if(t==="none")return null;var a=n.getDevicePixelRatio(),l=n.getZr(),u=l.painter.type==="svg";t.dirty&&decalMap.delete(t);var c=decalMap.get(t);if(c)return c;var p=defaults(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});p.backgroundColor==="none"&&(p.backgroundColor=null);var d={repeat:"repeat"};return Q(d),d.rotation=p.rotation,d.scaleX=d.scaleY=u?1:1/a,decalMap.set(t,d),t.dirty=!1,d;function Q(Ct){for(var ar=[a],en=!0,tn=0;tn<decalKeys.length;++tn){var on=p[decalKeys[tn]];if(on!=null&&!isArray$1(on)&&!isString$1(on)&&!isNumber(on)&&typeof on!="boolean"){en=!1;break}ar.push(on)}var cn;if(en){cn=ar.join(",")+(u?"-svg":"");var gn=decalCache.get(cn);gn&&(u?Ct.svgElement=gn:Ct.image=gn)}var Cn=normalizeDashArrayX(p.dashArrayX),ex=normalizeDashArrayY(p.dashArrayY),ix=normalizeSymbolArray(p.symbol),ax=getLineBlockLengthX(Cn),ox=getLineBlockLengthY(ex),lx=!u&&platformApi.createCanvas(),cx=u&&{tag:"g",attrs:{},key:"dcl",children:[]},dx=fx(),hx;lx&&(lx.width=dx.width*a,lx.height=dx.height*a,hx=lx.getContext("2d")),ux(),en&&decalCache.put(cn,lx||cx),Ct.image=lx,Ct.svgElement=cx,Ct.svgWidth=dx.width,Ct.svgHeight=dx.height;function fx(){for(var gx=1,yx=0,_x=ax.length;yx<_x;++yx)gx=getLeastCommonMultiple(gx,ax[yx]);for(var vx=1,yx=0,_x=ix.length;yx<_x;++yx)vx=getLeastCommonMultiple(vx,ix[yx].length);gx*=vx;var bx=ox*ax.length*ix.length;return{width:Math.max(1,Math.min(gx,p.maxTileWidth)),height:Math.max(1,Math.min(bx,p.maxTileHeight))}}function ux(){hx&&(hx.clearRect(0,0,lx.width,lx.height),p.backgroundColor&&(hx.fillStyle=p.backgroundColor,hx.fillRect(0,0,lx.width,lx.height)));for(var gx=0,yx=0;yx<ex.length;++yx)gx+=ex[yx];if(gx<=0)return;for(var _x=-ox,vx=0,bx=0,xx=0;_x<dx.height;){if(vx%2===0){for(var Sx=bx/2%ix.length,Ax=0,Cx=0,Tx=0;Ax<dx.width*2;){for(var Px=0,yx=0;yx<Cn[xx].length;++yx)Px+=Cn[xx][yx];if(Px<=0)break;if(Cx%2===0){var Fx=(1-p.symbolSize)*.5,Mx=Ax+Cn[xx][Cx]*Fx,Dx=_x+ex[vx]*Fx,Ox=Cn[xx][Cx]*p.symbolSize,Lx=ex[vx]*p.symbolSize,Nx=Tx/2%ix[Sx].length;Gx(Mx,Dx,Ox,Lx,ix[Sx][Nx])}Ax+=Cn[xx][Cx],++Tx,++Cx,Cx===Cn[xx].length&&(Cx=0)}++xx,xx===Cn.length&&(xx=0)}_x+=ex[vx],++bx,++vx,vx===ex.length&&(vx=0)}function Gx(Ux,Hx,Vx,zx,rE){var Zx=u?1:a,eE=createSymbol$1(rE,Ux*Zx,Hx*Zx,Vx*Zx,zx*Zx,p.color,p.symbolKeepAspect);if(u){var oE=l.painter.renderOneToVNode(eE);oE&&cx.children.push(oE)}else brushSingle(hx,eE)}}}}function normalizeSymbolArray(t){if(!t||t.length===0)return[["rect"]];if(isString$1(t))return[[t]];for(var n=!0,a=0;a<t.length;++a)if(!isString$1(t[a])){n=!1;break}if(n)return normalizeSymbolArray([t]);for(var l=[],a=0;a<t.length;++a)isString$1(t[a])?l.push([t[a]]):l.push(t[a]);return l}function normalizeDashArrayX(t){if(!t||t.length===0)return[[0,0]];if(isNumber(t)){var n=Math.ceil(t);return[[n,n]]}for(var a=!0,l=0;l<t.length;++l)if(!isNumber(t[l])){a=!1;break}if(a)return normalizeDashArrayX([t]);for(var u=[],l=0;l<t.length;++l)if(isNumber(t[l])){var n=Math.ceil(t[l]);u.push([n,n])}else{var n=map$1(t[l],function(d){return Math.ceil(d)});n.length%2===1?u.push(n.concat(n)):u.push(n)}return u}function normalizeDashArrayY(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(isNumber(t)){var n=Math.ceil(t);return[n,n]}var a=map$1(t,function(l){return Math.ceil(l)});return t.length%2?a.concat(a):a}function getLineBlockLengthX(t){return map$1(t,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(t){for(var n=0,a=0;a<t.length;++a)n+=t[a];return t.length%2===1?n*2:n}function decalVisual(t,n){t.eachRawSeries(function(a){if(!t.isSeriesFiltered(a)){var l=a.getData();l.hasItemVisual()&&l.each(function(p){var d=l.getItemVisual(p,"decal");if(d){var Q=l.ensureUniqueItemVisual(p,"style");Q.decal=createOrUpdatePatternFromDecal(d,n)}});var u=l.getVisual("decal");if(u){var c=l.getVisual("style");c.decal=createOrUpdatePatternFromDecal(u,n)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(t,n){implsStore[t]=n}function getImpl(t){return implsStore[t]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,t,n)}}function createRegisterEventWithLowercaseMessageCenter(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return toLowercaseNameAndCallEventful(this,t,n)}}function toLowercaseNameAndCallEventful(t,n,a){return a[0]=a[0]&&a[0].toLowerCase(),Eventful.prototype[n].apply(t,a)}var MessageCenter=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this,new ECEventProcessor)||this;c._chartsViews=[],c._chartsMap={},c._componentsViews=[],c._componentsMap={},c._pendingActions=[],u=u||{},isString$1(l)&&(l=themeStorage[l]),c._dom=a;var p="canvas",d="auto",Q=!1;u.ssr&&registerSSRDataGetter(function(tn){var on=getECData(tn),cn=on.dataIndex;if(cn!=null){var gn=createHashMap();return gn.set("series_index",on.seriesIndex),gn.set("data_index",cn),on.ssrType&&gn.set("ssr_type",on.ssrType),gn}});var Ct=c._zr=init$2(a,{renderer:u.renderer||p,devicePixelRatio:u.devicePixelRatio,width:u.width,height:u.height,ssr:u.ssr,useDirtyRect:retrieve2(u.useDirtyRect,Q),useCoarsePointer:retrieve2(u.useCoarsePointer,d),pointerSize:u.pointerSize});c._ssr=u.ssr,c._throttledZrFlush=throttle(bind$1(Ct.flush,Ct),17),l=clone$4(l),l&&globalBackwardCompat(l,!0),c._theme=l,c._locale=createLocaleObject(u.locale||SYSTEM_LANG),c._coordSysMgr=new CoordinateSystemManager;var ar=c._api=createExtensionAPI(c);function en(tn,on){return tn.__prio-on.__prio}return sort$2(visualFuncs,en),sort$2(dataProcessorFuncs,en),c._scheduler=new Scheduler(c,ar,dataProcessorFuncs,visualFuncs),c._messageCenter=new MessageCenter,c._initEvents(),c.resize=bind$1(c.resize,c),Ct.animation.on("frame",c._onframe,c),bindRenderedEvent(Ct,c),bindMouseEvent(Ct,c),setAsPrimitive(c),c}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var a=this._scheduler;if(this[PENDING_UPDATE]){var l=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(Q){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,Q}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}else if(a.unfinished){var u=TEST_FRAME_REMAIN_TIME,c=this._model,p=this._api;a.unfinished=!1;do{var d=+new Date;a.performSeriesTasks(c),a.performDataProcessorTasks(c),updateStreamModes(this,c),a.performVisualTasks(c),renderSeries(this,this._model,p,"remain",{}),u-=+new Date-d}while(u>0&&a.unfinished);a.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(a,l,u){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var c,p,d;if(isObject$3(l)&&(u=l.lazyUpdate,c=l.silent,p=l.replaceMerge,d=l.transition,l=l.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||l){var Q=new OptionManager(this._api),Ct=this._theme,ar=this._model=new GlobalModel;ar.scheduler=this._scheduler,ar.ssr=this._ssr,ar.init(null,null,null,Ct,this._locale,Q)}this._model.setOption(a,{replaceMerge:p},optionPreprocessorFuncs);var en={seriesTransition:d,optionChanged:!0};if(u)this[PENDING_UPDATE]={silent:c,updateParams:en},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,en)}catch(tn){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,tn}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}}},n.prototype.setTheme=function(){},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(a){return this.renderToCanvas(a)},n.prototype.renderToCanvas=function(a){a=a||{};var l=this._zr.painter;return l.getRenderedCanvas({backgroundColor:a.backgroundColor||this._model.get("backgroundColor"),pixelRatio:a.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(a){a=a||{};var l=this._zr.painter;return l.renderToString({useViewBox:a.useViewBox})},n.prototype.getSvgDataURL=function(){if(env.svgSupported){var a=this._zr,l=a.storage.getDisplayList();return each$f(l,function(u){u.stopAnimation(null,!0)}),a.painter.toDataURL()}},n.prototype.getDataURL=function(a){if(this._disposed){this.id;return}a=a||{};var l=a.excludeComponents,u=this._model,c=[],p=this;each$f(l,function(Q){u.eachComponent({mainType:Q},function(Ct){var ar=p._componentsMap[Ct.__viewId];ar.group.ignore||(c.push(ar),ar.group.ignore=!0)})});var d=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(a).toDataURL("image/"+(a&&a.type||"png"));return each$f(c,function(Q){Q.group.ignore=!1}),d},n.prototype.getConnectedDataURL=function(a){if(this._disposed){this.id;return}var l=a.type==="svg",u=this.group,c=Math.min,p=Math.max,d=1/0;if(connectedGroups[u]){var Q=d,Ct=d,ar=-d,en=-d,tn=[],on=a&&a.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(ax,ox){if(ax.group===u){var lx=l?ax.getZr().painter.getSvgDom().innerHTML:ax.renderToCanvas(clone$4(a)),cx=ax.getDom().getBoundingClientRect();Q=c(cx.left,Q),Ct=c(cx.top,Ct),ar=p(cx.right,ar),en=p(cx.bottom,en),tn.push({dom:lx,left:cx.left,top:cx.top})}}),Q*=on,Ct*=on,ar*=on,en*=on;var cn=ar-Q,gn=en-Ct,Cn=platformApi.createCanvas(),ex=init$2(Cn,{renderer:l?"svg":"canvas"});if(ex.resize({width:cn,height:gn}),l){var ix="";return each$f(tn,function(ax){var ox=ax.left-Q,lx=ax.top-Ct;ix+='<g transform="translate('+ox+","+lx+')">'+ax.dom+"</g>"}),ex.painter.getSvgRoot().innerHTML=ix,a.connectedBackgroundColor&&ex.painter.setBackgroundColor(a.connectedBackgroundColor),ex.refreshImmediately(),ex.painter.toDataURL()}else return a.connectedBackgroundColor&&ex.add(new Rect$2({shape:{x:0,y:0,width:cn,height:gn},style:{fill:a.connectedBackgroundColor}})),each$f(tn,function(ax){var ox=new ZRImage({style:{x:ax.left*on-Q,y:ax.top*on-Ct,image:ax.dom}});ex.add(ox)}),ex.refreshImmediately(),Cn.toDataURL("image/"+(a&&a.type||"png"))}else return this.getDataURL(a)},n.prototype.convertToPixel=function(a,l){return doConvertPixel(this,"convertToPixel",a,l)},n.prototype.convertFromPixel=function(a,l){return doConvertPixel(this,"convertFromPixel",a,l)},n.prototype.containPixel=function(a,l){if(this._disposed){this.id;return}var u=this._model,c,p=parseFinder$1(u,a);return each$f(p,function(d,Q){Q.indexOf("Models")>=0&&each$f(d,function(Ct){var ar=Ct.coordinateSystem;if(ar&&ar.containPoint)c=c||!!ar.containPoint(l);else if(Q==="seriesModels"){var en=this._chartsMap[Ct.__viewId];en&&en.containPoint&&(c=c||en.containPoint(l,Ct))}},this)},this),!!c},n.prototype.getVisual=function(a,l){var u=this._model,c=parseFinder$1(u,a,{defaultMainType:"series"}),p=c.seriesModel,d=p.getData(),Q=c.hasOwnProperty("dataIndexInside")?c.dataIndexInside:c.hasOwnProperty("dataIndex")?d.indexOfRawIndex(c.dataIndex):null;return Q!=null?getItemVisualFromData(d,Q,l):getVisualFromData(d,l)},n.prototype.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},n.prototype.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},n.prototype._initEvents=function(){var a=this;each$f(MOUSE_EVENT_NAMES,function(l){var u=function(c){var p=a.getModel(),d=c.target,Q,Ct=l==="globalout";if(Ct?Q={}:d&&findEventDispatcher(d,function(cn){var gn=getECData(cn);if(gn&&gn.dataIndex!=null){var Cn=gn.dataModel||p.getSeriesByIndex(gn.seriesIndex);return Q=Cn&&Cn.getDataParams(gn.dataIndex,gn.dataType,d)||{},!0}else if(gn.eventData)return Q=extend({},gn.eventData),!0},!0),Q){var ar=Q.componentType,en=Q.componentIndex;(ar==="markLine"||ar==="markPoint"||ar==="markArea")&&(ar="series",en=Q.seriesIndex);var tn=ar&&en!=null&&p.getComponent(ar,en),on=tn&&a[tn.mainType==="series"?"_chartsMap":"_componentsMap"][tn.__viewId];Q.event=c,Q.type=l,a._$eventProcessor.eventInfo={targetEl:d,packedEvent:Q,model:tn,view:on},a.trigger(l,Q)}};u.zrEventfulCallAtLast=!0,a._zr.on(l,u,a)}),each$f(eventActionMap,function(l,u){a._messageCenter.on(u,function(c){this.trigger(u,c)},a)}),each$f(["selectchanged"],function(l){a._messageCenter.on(l,function(u){this.trigger(l,u)},a)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var a=this.getDom();a&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var l=this,u=l._api,c=l._model;each$f(l._componentsViews,function(p){p.dispose(c,u)}),each$f(l._chartsViews,function(p){p.dispose(c,u)}),l._zr.dispose(),l._dom=l._model=l._chartsMap=l._componentsMap=l._chartsViews=l._componentsViews=l._scheduler=l._api=l._zr=l._throttledZrFlush=l._theme=l._coordSysMgr=l._messageCenter=null,delete instances[l.id]},n.prototype.resize=function(a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(a);var l=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!l){var u=l.resetOption("media"),c=a&&a.silent;this[PENDING_UPDATE]&&(c==null&&(c=this[PENDING_UPDATE].silent),u=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{u&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},a&&a.animation)})}catch(p){throw this[IN_MAIN_PROCESS_KEY]=!1,p}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}}},n.prototype.showLoading=function(a,l){if(this._disposed){this.id;return}if(isObject$3(a)&&(l=a,a=""),a=a||"default",this.hideLoading(),!!loadingEffects[a]){var u=loadingEffects[a](this._api,l),c=this._zr;this._loadingFX=u,c.add(u)}},n.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(a){var l=extend({},a);return l.type=eventActionMap[a.type],l},n.prototype.dispatchAction=function(a,l){if(this._disposed){this.id;return}if(isObject$3(l)||(l={silent:!!l}),!!actions[a.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(a);return}var u=l.silent;doDispatchAction.call(this,a,u);var c=l.flush;c?this._zr.flush():c!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}},n.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(a){if(this._disposed){this.id;return}var l=a.seriesIndex,u=this.getModel(),c=u.getSeriesByIndex(l);c.appendData(a),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=function(){prepare=function(en){var tn=en._scheduler;tn.restorePipelines(en._model),tn.prepareStageTasks(),prepareView(en,!0),prepareView(en,!1),tn.plan()},prepareView=function(en,tn){for(var on=en._model,cn=en._scheduler,gn=tn?en._componentsViews:en._chartsViews,Cn=tn?en._componentsMap:en._chartsMap,ex=en._zr,ix=en._api,ax=0;ax<gn.length;ax++)gn[ax].__alive=!1;tn?on.eachComponent(function(cx,dx){cx!=="series"&&ox(dx)}):on.eachSeries(ox);function ox(cx){var dx=cx.__requireNewView;cx.__requireNewView=!1;var hx="_ec_"+cx.id+"_"+cx.type,fx=!dx&&Cn[hx];if(!fx){var ux=parseClassType(cx.type),gx=tn?ComponentView.getClass(ux.main,ux.sub):ChartView.getClass(ux.sub);fx=new gx,fx.init(on,ix),Cn[hx]=fx,gn.push(fx),ex.add(fx.group)}cx.__viewId=fx.__id=hx,fx.__alive=!0,fx.__model=cx,fx.group.__ecComponentInfo={mainType:cx.mainType,index:cx.componentIndex},!tn&&cn.prepareView(fx,cx,on,ix)}for(var ax=0;ax<gn.length;){var lx=gn[ax];lx.__alive?ax++:(!tn&&lx.renderTask.dispose(),ex.remove(lx.group),lx.dispose(on,ix),gn.splice(ax,1),Cn[lx.__id]===lx&&delete Cn[lx.__id],lx.__id=lx.group.__ecComponentInfo=null)}},updateDirectly=function(en,tn,on,cn,gn){var Cn=en._model;if(Cn.setUpdatePayload(on),!cn){each$f([].concat(en._componentsViews).concat(en._chartsViews),lx);return}var ex={};ex[cn+"Id"]=on[cn+"Id"],ex[cn+"Index"]=on[cn+"Index"],ex[cn+"Name"]=on[cn+"Name"];var ix={mainType:cn,query:ex};gn&&(ix.subType=gn);var ax=on.excludeSeriesId,ox;ax!=null&&(ox=createHashMap(),each$f(normalizeToArray(ax),function(cx){var dx=convertOptionIdName(cx,null);dx!=null&&ox.set(dx,!0)})),Cn&&Cn.eachComponent(ix,function(cx){var dx=ox&&ox.get(cx.id)!=null;if(!dx)if(isHighDownPayload(on))if(cx instanceof SeriesModel)on.type===HIGHLIGHT_ACTION_TYPE&&!on.notBlur&&!cx.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(cx,on,en._api);else{var hx=findComponentHighDownDispatchers(cx.mainType,cx.componentIndex,on.name,en._api),fx=hx.focusSelf,ux=hx.dispatchers;on.type===HIGHLIGHT_ACTION_TYPE&&fx&&!on.notBlur&&blurComponent(cx.mainType,cx.componentIndex,en._api),ux&&each$f(ux,function(gx){on.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(gx):leaveEmphasis(gx)})}else isSelectChangePayload(on)&&cx instanceof SeriesModel&&(toggleSelectionFromPayload(cx,on,en._api),updateSeriesElementSelection(cx),markStatusToUpdate(en))},en),Cn&&Cn.eachComponent(ix,function(cx){var dx=ox&&ox.get(cx.id)!=null;dx||lx(en[cn==="series"?"_chartsMap":"_componentsMap"][cx.__viewId])},en);function lx(cx){cx&&cx.__alive&&cx[tn]&&cx[tn](cx.__model,Cn,en._api,on)}},updateMethods={prepareAndUpdate:function(en){prepare(this),updateMethods.update.call(this,en,{optionChanged:en.newOption!=null})},update:function(en,tn){var on=this._model,cn=this._api,gn=this._zr,Cn=this._coordSysMgr,ex=this._scheduler;if(on){on.setUpdatePayload(en),ex.restoreData(on,en),ex.performSeriesTasks(on),Cn.create(on,cn),ex.performDataProcessorTasks(on,en),updateStreamModes(this,on),Cn.update(on,cn),a(on),ex.performVisualTasks(on,en),render(this,on,cn,en,tn);var ix=on.get("backgroundColor")||"transparent",ax=on.get("darkMode");gn.setBackgroundColor(ix),ax!=null&&ax!=="auto"&&gn.setDarkMode(ax),lifecycle.trigger("afterupdate",on,cn)}},updateTransform:function(en){var tn=this,on=this._model,cn=this._api;if(on){on.setUpdatePayload(en);var gn=[];on.eachComponent(function(ex,ix){if(ex!=="series"){var ax=tn.getViewOfComponentModel(ix);if(ax&&ax.__alive)if(ax.updateTransform){var ox=ax.updateTransform(ix,on,cn,en);ox&&ox.update&&gn.push(ax)}else gn.push(ax)}});var Cn=createHashMap();on.eachSeries(function(ex){var ix=tn._chartsMap[ex.__viewId];if(ix.updateTransform){var ax=ix.updateTransform(ex,on,cn,en);ax&&ax.update&&Cn.set(ex.uid,1)}else Cn.set(ex.uid,1)}),a(on),this._scheduler.performVisualTasks(on,en,{setDirty:!0,dirtyMap:Cn}),renderSeries(this,on,cn,en,{},Cn),lifecycle.trigger("afterupdate",on,cn)}},updateView:function(en){var tn=this._model;tn&&(tn.setUpdatePayload(en),ChartView.markUpdateMethod(en,"updateView"),a(tn),this._scheduler.performVisualTasks(tn,en,{setDirty:!0}),render(this,tn,this._api,en,{}),lifecycle.trigger("afterupdate",tn,this._api))},updateVisual:function(en){var tn=this,on=this._model;on&&(on.setUpdatePayload(en),on.eachSeries(function(cn){cn.getData().clearAllVisual()}),ChartView.markUpdateMethod(en,"updateVisual"),a(on),this._scheduler.performVisualTasks(on,en,{visualType:"visual",setDirty:!0}),on.eachComponent(function(cn,gn){if(cn!=="series"){var Cn=tn.getViewOfComponentModel(gn);Cn&&Cn.__alive&&Cn.updateVisual(gn,on,tn._api,en)}}),on.eachSeries(function(cn){var gn=tn._chartsMap[cn.__viewId];gn.updateVisual(cn,on,tn._api,en)}),lifecycle.trigger("afterupdate",on,this._api))},updateLayout:function(en){updateMethods.update.call(this,en)}},doConvertPixel=function(en,tn,on,cn){if(en._disposed){en.id;return}for(var gn=en._model,Cn=en._coordSysMgr.getCoordinateSystems(),ex,ix=parseFinder$1(gn,on),ax=0;ax<Cn.length;ax++){var ox=Cn[ax];if(ox[tn]&&(ex=ox[tn](gn,ix,cn))!=null)return ex}},updateStreamModes=function(en,tn){var on=en._chartsMap,cn=en._scheduler;tn.eachSeries(function(gn){cn.updateStreamModes(gn,on[gn.__viewId])})},doDispatchAction=function(en,tn){var on=this,cn=this.getModel(),gn=en.type,Cn=en.escapeConnect,ex=actions[gn],ix=ex.actionInfo,ax=(ix.update||"update").split(":"),ox=ax.pop(),lx=ax[0]!=null&&parseClassType(ax[0]);this[IN_MAIN_PROCESS_KEY]=!0;var cx=[en],dx=!1;en.batch&&(dx=!0,cx=map$1(en.batch,function(vx){return vx=defaults(extend({},vx),en),vx.batch=null,vx}));var hx=[],fx,ux=isSelectChangePayload(en),gx=isHighDownPayload(en);if(gx&&allLeaveBlur(this._api),each$f(cx,function(vx){if(fx=ex.action(vx,on._model,on._api),fx=fx||extend({},vx),fx.type=ix.event||fx.type,hx.push(fx),gx){var bx=preParseFinder(en),xx=bx.queryOptionMap,Sx=bx.mainTypeSpecified,Ax=Sx?xx.keys()[0]:"series";updateDirectly(on,ox,vx,Ax),markStatusToUpdate(on)}else ux?(updateDirectly(on,ox,vx,"series"),markStatusToUpdate(on)):lx&&updateDirectly(on,ox,vx,lx.main,lx.sub)}),ox!=="none"&&!gx&&!ux&&!lx)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,en),this[PENDING_UPDATE]=null):updateMethods[ox].call(this,en)}catch(vx){throw this[IN_MAIN_PROCESS_KEY]=!1,vx}if(dx?fx={type:ix.event||gn,escapeConnect:Cn,batch:hx}:fx=hx[0],this[IN_MAIN_PROCESS_KEY]=!1,!tn){var yx=this._messageCenter;if(yx.trigger(fx.type,fx),ux){var _x={type:"selectchanged",escapeConnect:Cn,selected:getAllSelectedIndices(cn),isFromClick:en.isFromClick||!1,fromAction:en.type,fromActionPayload:en};yx.trigger(_x.type,_x)}}},flushPendingActions=function(en){for(var tn=this._pendingActions;tn.length;){var on=tn.shift();doDispatchAction.call(this,on,en)}},triggerUpdatedEvent=function(en){!en&&this.trigger("updated")},bindRenderedEvent=function(en,tn){en.on("rendered",function(on){tn.trigger("rendered",on),en.animation.isFinished()&&!tn[PENDING_UPDATE]&&!tn._scheduler.unfinished&&!tn._pendingActions.length&&tn.trigger("finished")})},bindMouseEvent=function(en,tn){en.on("mouseover",function(on){var cn=on.target,gn=findEventDispatcher(cn,isHighDownDispatcher);gn&&(handleGlobalMouseOverForHighDown(gn,on,tn._api),markStatusToUpdate(tn))}).on("mouseout",function(on){var cn=on.target,gn=findEventDispatcher(cn,isHighDownDispatcher);gn&&(handleGlobalMouseOutForHighDown(gn,on,tn._api),markStatusToUpdate(tn))}).on("click",function(on){var cn=on.target,gn=findEventDispatcher(cn,function(ix){return getECData(ix).dataIndex!=null},!0);if(gn){var Cn=gn.selected?"unselect":"select",ex=getECData(gn);tn._api.dispatchAction({type:Cn,dataType:ex.dataType,dataIndexInside:ex.dataIndex,seriesIndex:ex.seriesIndex,isFromClick:!0})}})};function a(en){en.clearColorPalette(),en.eachSeries(function(tn){tn.clearColorPalette()})}function l(en){var tn=[],on=[],cn=!1;if(en.eachComponent(function(ix,ax){var ox=ax.get("zlevel")||0,lx=ax.get("z")||0,cx=ax.getZLevelKey();cn=cn||!!cx,(ix==="series"?on:tn).push({zlevel:ox,z:lx,idx:ax.componentIndex,type:ix,key:cx})}),cn){var gn=tn.concat(on),Cn,ex;sort$2(gn,function(ix,ax){return ix.zlevel===ax.zlevel?ix.z-ax.z:ix.zlevel-ax.zlevel}),each$f(gn,function(ix){var ax=en.getComponent(ix.type,ix.idx),ox=ix.zlevel,lx=ix.key;Cn!=null&&(ox=Math.max(Cn,ox)),lx?(ox===Cn&&lx!==ex&&ox++,ex=lx):ex&&(ox===Cn&&ox++,ex=""),Cn=ox,ax.setZLevel(ox)})}}render=function(en,tn,on,cn,gn){l(tn),renderComponents(en,tn,on,cn,gn),each$f(en._chartsViews,function(Cn){Cn.__alive=!1}),renderSeries(en,tn,on,cn,gn),each$f(en._chartsViews,function(Cn){Cn.__alive||Cn.remove(tn,on)})},renderComponents=function(en,tn,on,cn,gn,Cn){each$f(Cn||en._componentsViews,function(ex){var ix=ex.__model;Ct(ix,ex),ex.render(ix,tn,on,cn),d(ix,ex),ar(ix,ex)})},renderSeries=function(en,tn,on,cn,gn,Cn){var ex=en._scheduler;gn=extend(gn||{},{updatedSeries:tn.getSeries()}),lifecycle.trigger("series:beforeupdate",tn,on,gn);var ix=!1;tn.eachSeries(function(ax){var ox=en._chartsMap[ax.__viewId];ox.__alive=!0;var lx=ox.renderTask;ex.updatePayload(lx,cn),Ct(ax,ox),Cn&&Cn.get(ax.uid)&&lx.dirty(),lx.perform(ex.getPerformArgs(lx))&&(ix=!0),ox.group.silent=!!ax.get("silent"),p(ax,ox),updateSeriesElementSelection(ax)}),ex.unfinished=ix||ex.unfinished,lifecycle.trigger("series:layoutlabels",tn,on,gn),lifecycle.trigger("series:transition",tn,on,gn),tn.eachSeries(function(ax){var ox=en._chartsMap[ax.__viewId];d(ax,ox),ar(ax,ox)}),c(en,tn),lifecycle.trigger("series:afterupdate",tn,on,gn)},markStatusToUpdate=function(en){en[STATUS_NEEDS_UPDATE_KEY]=!0,en.getZr().wakeUp()},applyChangedStates=function(en){en[STATUS_NEEDS_UPDATE_KEY]&&(en.getZr().storage.traverse(function(tn){isElementRemoved(tn)||u(tn)}),en[STATUS_NEEDS_UPDATE_KEY]=!1)};function u(en){for(var tn=[],on=en.currentStates,cn=0;cn<on.length;cn++){var gn=on[cn];gn==="emphasis"||gn==="blur"||gn==="select"||tn.push(gn)}en.selected&&en.states.select&&tn.push("select"),en.hoverState===HOVER_STATE_EMPHASIS&&en.states.emphasis?tn.push("emphasis"):en.hoverState===HOVER_STATE_BLUR&&en.states.blur&&tn.push("blur"),en.useStates(tn)}function c(en,tn){var on=en._zr,cn=on.storage,gn=0;cn.traverse(function(Cn){Cn.isGroup||gn++}),gn>tn.get("hoverLayerThreshold")&&!env.node&&!env.worker&&tn.eachSeries(function(Cn){if(!Cn.preventUsingHoverLayer){var ex=en._chartsMap[Cn.__viewId];ex.__alive&&ex.eachRendered(function(ix){ix.states.emphasis&&(ix.states.emphasis.hoverLayer=!0)})}})}function p(en,tn){var on=en.get("blendMode")||null;tn.eachRendered(function(cn){cn.isGroup||(cn.style.blend=on)})}function d(en,tn){if(!en.preventAutoZ){var on=en.get("z")||0,cn=en.get("zlevel")||0;tn.eachRendered(function(gn){return Q(gn,on,cn,-1/0),!0})}}function Q(en,tn,on,cn){var gn=en.getTextContent(),Cn=en.getTextGuideLine(),ex=en.isGroup;if(ex)for(var ix=en.childrenRef(),ax=0;ax<ix.length;ax++)cn=Math.max(Q(ix[ax],tn,on,cn),cn);else en.z=tn,en.zlevel=on,cn=Math.max(en.z2,cn);if(gn&&(gn.z=tn,gn.zlevel=on,isFinite(cn)&&(gn.z2=cn+2)),Cn){var ox=en.textGuideLineConfig;Cn.z=tn,Cn.zlevel=on,isFinite(cn)&&(Cn.z2=cn+(ox&&ox.showAbove?1:-1))}return cn}function Ct(en,tn){tn.eachRendered(function(on){if(!isElementRemoved(on)){var cn=on.getTextContent(),gn=on.getTextGuideLine();on.stateTransition&&(on.stateTransition=null),cn&&cn.stateTransition&&(cn.stateTransition=null),gn&&gn.stateTransition&&(gn.stateTransition=null),on.hasState()?(on.prevStates=on.currentStates,on.clearStates()):on.prevStates&&(on.prevStates=null)}})}function ar(en,tn){var on=en.getModel("stateAnimation"),cn=en.isAnimationEnabled(),gn=on.get("duration"),Cn=gn>0?{duration:gn,delay:on.get("delay"),easing:on.get("easing")}:null;tn.eachRendered(function(ex){if(ex.states&&ex.states.emphasis){if(isElementRemoved(ex))return;if(ex instanceof Path&&savePathStates(ex),ex.__dirty){var ix=ex.prevStates;ix&&ex.useStates(ix)}if(cn){ex.stateTransition=Cn;var ax=ex.getTextContent(),ox=ex.getTextGuideLine();ax&&(ax.stateTransition=Cn),ox&&(ox.stateTransition=Cn)}ex.__dirty&&u(ex)}})}createExtensionAPI=function(en){return new(function(tn){__extends(on,tn);function on(){return tn!==null&&tn.apply(this,arguments)||this}return on.prototype.getCoordinateSystems=function(){return en._coordSysMgr.getCoordinateSystems()},on.prototype.getComponentByElement=function(cn){for(;cn;){var gn=cn.__ecComponentInfo;if(gn!=null)return en._model.getComponent(gn.mainType,gn.index);cn=cn.parent}},on.prototype.enterEmphasis=function(cn,gn){enterEmphasis(cn,gn),markStatusToUpdate(en)},on.prototype.leaveEmphasis=function(cn,gn){leaveEmphasis(cn,gn),markStatusToUpdate(en)},on.prototype.enterBlur=function(cn){enterBlur(cn),markStatusToUpdate(en)},on.prototype.leaveBlur=function(cn){leaveBlur(cn),markStatusToUpdate(en)},on.prototype.enterSelect=function(cn){enterSelect(cn),markStatusToUpdate(en)},on.prototype.leaveSelect=function(cn){leaveSelect(cn),markStatusToUpdate(en)},on.prototype.getModel=function(){return en.getModel()},on.prototype.getViewOfComponentModel=function(cn){return en.getViewOfComponentModel(cn)},on.prototype.getViewOfSeriesModel=function(cn){return en.getViewOfSeriesModel(cn)},on}(ExtensionAPI))(en)},enableConnect=function(en){function tn(on,cn){for(var gn=0;gn<on.length;gn++){var Cn=on[gn];Cn[CONNECT_STATUS_KEY]=cn}}each$f(eventActionMap,function(on,cn){en._messageCenter.on(cn,function(gn){if(connectedGroups[en.group]&&en[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(gn&&gn.escapeConnect)return;var Cn=en.makeActionFromEvent(gn),ex=[];each$f(instances,function(ix){ix!==en&&ix.group===en.group&&ex.push(ix)}),tn(ex,CONNECT_STATUS_PENDING),each$f(ex,function(ix){ix[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&ix.dispatchAction(Cn)}),tn(ex,CONNECT_STATUS_UPDATED)}})})}}(),n}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(t,n,a){var l=this;function u(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];n&&n.apply&&n.apply(this,c),l.off(t,u)}this.on.call(this,t,u,a)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(t){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(t,n,a){var l=!(a&&a.ssr);if(l){var u=getInstanceByDom(t);if(u)return u}var c=new ECharts(t,n,a);return c.id="ec_"+idBase++,instances[c.id]=c,l&&setAttribute(t,DOM_ATTRIBUTE_KEY,c.id),enableConnect(c),lifecycle.trigger("afterinit",c),c}function connect(t){if(isArray$1(t)){var n=t;t=null,each$f(n,function(a){a.group!=null&&(t=a.group)}),t=t||"g_"+groupIdBase++,each$f(n,function(a){a.group=t})}return connectedGroups[t]=!0,t}function disconnect(t){connectedGroups[t]=!1}var disConnect=disconnect;function dispose(t){isString$1(t)?t=instances[t]:t instanceof ECharts||(t=getInstanceByDom(t)),t instanceof ECharts&&!t.isDisposed()&&t.dispose()}function getInstanceByDom(t){return instances[getAttribute(t,DOM_ATTRIBUTE_KEY)]}function getInstanceById(t){return instances[t]}function registerTheme(t,n){themeStorage[t]=n}function registerPreprocessor(t){indexOf(optionPreprocessorFuncs,t)<0&&optionPreprocessorFuncs.push(t)}function registerProcessor(t,n){normalizeRegister(dataProcessorFuncs,t,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(t){registerUpdateLifecycle("afterinit",t)}function registerPostUpdate(t){registerUpdateLifecycle("afterupdate",t)}function registerUpdateLifecycle(t,n){lifecycle.on(t,n)}function registerAction(t,n,a){isFunction$1(n)&&(a=n,n="");var l=isObject$3(t)?t.type:[t,t={event:n}][0];t.event=(t.event||l).toLowerCase(),n=t.event,!eventActionMap[n]&&(assert(ACTION_REG.test(l)&&ACTION_REG.test(n)),actions[l]||(actions[l]={action:a,actionInfo:t}),eventActionMap[n]=l)}function registerCoordinateSystem(t,n){CoordinateSystemManager.register(t,n)}function getCoordinateSystemDimensions(t){var n=CoordinateSystemManager.get(t);if(n)return n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice()}function registerLayout(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(t,n,a,l,u){if((isFunction$1(n)||isObject$3(n))&&(a=n,n=l),!(indexOf(registeredTasks,a)>=0)){registeredTasks.push(a);var c=Scheduler.wrapStageHandler(a,u);c.__prio=n,c.__raw=a,t.push(c)}}function registerLoading(t,n){loadingEffects[t]=n}function setCanvasCreator(t){setPlatformAPI({createCanvas:t})}function registerMap$1(t,n,a){var l=getImpl("registerMap");l&&l(t,n,a)}function getMap(t){var n=getImpl("getMap");return n&&n(t)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(t){ComponentModel.registerClass(t)},registerComponentView:function(t){ComponentView.registerClass(t)},registerSeriesModel:function(t){SeriesModel.registerClass(t)},registerChartView:function(t){ChartView.registerClass(t)},registerSubTypeDefaulter:function(t,n){ComponentModel.registerSubTypeDefaulter(t,n)},registerPainter:function(t,n){registerPainter(t,n)}};function use(t){if(isArray$1(t)){each$f(t,function(n){use(n)});return}indexOf(extensions,t)>=0||(extensions.push(t),isFunction$1(t)&&(t={install:t}),t.install(extensionRegisters))}function dataIndexMapValueLength(t){return t==null?0:t.length||1}function defaultKeyGetter(t){return t}var DataDiffer=function(){function t(n,a,l,u,c,p){this._old=n,this._new=a,this._oldKeyGetter=l||defaultKeyGetter,this._newKeyGetter=u||defaultKeyGetter,this.context=c,this._diffModeMultiple=p==="multiple"}return t.prototype.add=function(n){return this._add=n,this},t.prototype.update=function(n){return this._update=n,this},t.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},t.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},t.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},t.prototype.remove=function(n){return this._remove=n,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var n=this._old,a=this._new,l={},u=new Array(n.length),c=new Array(a.length);this._initIndexMap(n,null,u,"_oldKeyGetter"),this._initIndexMap(a,l,c,"_newKeyGetter");for(var p=0;p<n.length;p++){var d=u[p],Q=l[d],Ct=dataIndexMapValueLength(Q);if(Ct>1){var ar=Q.shift();Q.length===1&&(l[d]=Q[0]),this._update&&this._update(ar,p)}else Ct===1?(l[d]=null,this._update&&this._update(Q,p)):this._remove&&this._remove(p)}this._performRestAdd(c,l)},t.prototype._executeMultiple=function(){var n=this._old,a=this._new,l={},u={},c=[],p=[];this._initIndexMap(n,l,c,"_oldKeyGetter"),this._initIndexMap(a,u,p,"_newKeyGetter");for(var d=0;d<c.length;d++){var Q=c[d],Ct=l[Q],ar=u[Q],en=dataIndexMapValueLength(Ct),tn=dataIndexMapValueLength(ar);if(en>1&&tn===1)this._updateManyToOne&&this._updateManyToOne(ar,Ct),u[Q]=null;else if(en===1&&tn>1)this._updateOneToMany&&this._updateOneToMany(ar,Ct),u[Q]=null;else if(en===1&&tn===1)this._update&&this._update(ar,Ct),u[Q]=null;else if(en>1&&tn>1)this._updateManyToMany&&this._updateManyToMany(ar,Ct),u[Q]=null;else if(en>1)for(var on=0;on<en;on++)this._remove&&this._remove(Ct[on]);else this._remove&&this._remove(Ct)}this._performRestAdd(p,u)},t.prototype._performRestAdd=function(n,a){for(var l=0;l<n.length;l++){var u=n[l],c=a[u],p=dataIndexMapValueLength(c);if(p>1)for(var d=0;d<p;d++)this._add&&this._add(c[d]);else p===1&&this._add&&this._add(c);a[u]=null}},t.prototype._initIndexMap=function(n,a,l,u){for(var c=this._diffModeMultiple,p=0;p<n.length;p++){var d="_ec_"+this[u](n[p],p);if(c||(l[p]=d),!!a){var Q=a[d],Ct=dataIndexMapValueLength(Q);Ct===0?(a[d]=p,c&&l.push(d)):Ct===1?a[d]=[Q,p]:Q.push(p)}}},t}(),DimensionUserOuput=function(){function t(n,a){this._encode=n,this._schema=a}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function summarizeDimensions(t,n){var a={},l=a.encode={},u=createHashMap(),c=[],p=[],d={};each$f(t.dimensions,function(tn){var on=t.getDimensionInfo(tn),cn=on.coordDim;if(cn){var gn=on.coordDimIndex;getOrCreateEncodeArr(l,cn)[gn]=tn,on.isExtraCoord||(u.set(cn,1),mayLabelDimType(on.type)&&(c[0]=tn),getOrCreateEncodeArr(d,cn)[gn]=t.getDimensionIndex(on.name)),on.defaultTooltip&&p.push(tn)}VISUAL_DIMENSIONS.each(function(Cn,ex){var ix=getOrCreateEncodeArr(l,ex),ax=on.otherDims[ex];ax!=null&&ax!==!1&&(ix[ax]=on.name)})});var Q=[],Ct={};u.each(function(tn,on){var cn=l[on];Ct[on]=cn[0],Q=Q.concat(cn)}),a.dataDimsOnCoord=Q,a.dataDimIndicesOnCoord=map$1(Q,function(tn){return t.getDimensionInfo(tn).storeDimIndex}),a.encodeFirstDimNotExtra=Ct;var ar=l.label;ar&&ar.length&&(c=ar.slice());var en=l.tooltip;return en&&en.length?p=en.slice():p.length||(p=c.slice()),l.defaultedLabel=c,l.defaultedTooltip=p,a.userOutput=new DimensionUserOuput(d,n),a}function getOrCreateEncodeArr(t,n){return t.hasOwnProperty(n)||(t[n]=[]),t[n]}function getDimensionTypeByAxis(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function mayLabelDimType(t){return!(t==="ordinal"||t==="time")}var SeriesDimensionDefine=function(){function t(n){this.otherDims={},n!=null&&extend(this,n)}return t}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function t(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},t.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},t.prototype.getSourceDimension=function(n){var a=this.source.dimensionsDefine;if(a)return a[n]},t.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,a=shouldRetrieveDataByName(this.source),l=!shouldOmitUnusedDimensions(n),u="",c=[],p=0,d=0;p<n;p++){var Q=void 0,Ct=void 0,ar=void 0,en=this.dimensions[d];if(en&&en.storeDimIndex===p)Q=a?en.name:null,Ct=en.type,ar=en.ordinalMeta,d++;else{var tn=this.getSourceDimension(p);tn&&(Q=a?tn.name:null,Ct=tn.type)}c.push({property:Q,type:Ct,ordinalMeta:ar}),a&&Q!=null&&(!en||!en.isCalculationCoord)&&(u+=l?Q.replace(/\`/g,"`1").replace(/\$/g,"`2"):Q),u+="$",u+=dimTypeShort[Ct]||"f",ar&&(u+=ar.uid),u+="$"}var on=this.source,cn=[on.seriesLayoutBy,on.startIndex,u].join("$$");return{dimensions:c,hash:cn}},t.prototype.makeOutputDimensionNames=function(){for(var n=[],a=0,l=0;a<this._fullDimCount;a++){var u=void 0,c=this.dimensions[l];if(c&&c.storeDimIndex===a)c.isCalculationCoord||(u=c.name),l++;else{var p=this.getSourceDimension(a);p&&(u=p.name)}n.push(u)}return n},t.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function isSeriesDataSchema(t){return t instanceof SeriesDataSchema}function createDimNameMap(t){for(var n=createHashMap(),a=0;a<(t||[]).length;a++){var l=t[a],u=isObject$3(l)?l.name:l;u!=null&&n.get(u)==null&&n.set(u,a)}return n}function ensureSourceDimNameMap(t){var n=inner$h(t);return n.dimNameMap||(n.dimNameMap=createDimNameMap(t.dimensionsDefine))}function shouldOmitUnusedDimensions(t){return t>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function t(n,a){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var l,u=!1;isSeriesDataSchema(n)?(l=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(u=!0,l=n),l=l||["x","y"];for(var c={},p=[],d={},Q=!1,Ct={},ar=0;ar<l.length;ar++){var en=l[ar],tn=isString$1(en)?new SeriesDimensionDefine({name:en}):en instanceof SeriesDimensionDefine?en:new SeriesDimensionDefine(en),on=tn.name;tn.type=tn.type||"float",tn.coordDim||(tn.coordDim=on,tn.coordDimIndex=0);var cn=tn.otherDims=tn.otherDims||{};p.push(on),c[on]=tn,Ct[on]!=null&&(Q=!0),tn.createInvertedIndices&&(d[on]=[]),cn.itemName===0&&(this._nameDimIdx=ar),cn.itemId===0&&(this._idDimIdx=ar),u&&(tn.storeDimIndex=ar)}if(this.dimensions=p,this._dimInfos=c,this._initGetDimensionInfo(Q),this.hostModel=a,this._invertedIndicesMap=d,this._dimOmitted){var gn=this._dimIdxToName=createHashMap();each$f(p,function(Cn){gn.set(c[Cn].storeDimIndex,Cn)})}}return t.prototype.getDimension=function(n){var a=this._recognizeDimIndex(n);if(a==null)return n;if(a=n,!this._dimOmitted)return this.dimensions[a];var l=this._dimIdxToName.get(a);if(l!=null)return l;var u=this._schema.getSourceDimension(a);if(u)return u.name},t.prototype.getDimensionIndex=function(n){var a=this._recognizeDimIndex(n);if(a!=null)return a;if(n==null)return-1;var l=this._getDimInfo(n);return l?l.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},t.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},t.prototype._getStoreDimIndex=function(n){var a=this.getDimensionIndex(n);return a},t.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},t.prototype._initGetDimensionInfo=function(n){var a=this._dimInfos;this._getDimInfo=n?function(l){return a.hasOwnProperty(l)?a[l]:void 0}:function(l){return a[l]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(n,a){var l=this._dimSummary;if(a==null)return l.encodeFirstDimNotExtra[n];var u=l.encode[n];return u?u[a]:null},t.prototype.mapDimensionsAll=function(n){var a=this._dimSummary,l=a.encode[n];return(l||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(n,a,l){var u=this,c;if(n instanceof DataStore&&(c=n),!c){var p=this.dimensions,d=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,p.length):n;c=new DataStore;var Q=map(p,function(Ct){return{type:u._dimInfos[Ct].type,property:Ct}});c.initData(d,Q,l)}this._store=c,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,c.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(n){var a=this._store.appendData(n);this._doInit(a[0],a[1])},t.prototype.appendValues=function(n,a){var l=this._store.appendValues(n,a&&a.length),u=l.start,c=l.end,p=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),a)for(var d=u;d<c;d++){var Q=d-u;this._nameList[d]=a[Q],p&&makeIdFromName(this,d)}},t.prototype._updateOrdinalMeta=function(){for(var n=this._store,a=this.dimensions,l=0;l<a.length;l++){var u=this._dimInfos[a[l]];u.ordinalMeta&&n.collectOrdinalMeta(u.storeDimIndex,u.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},t.prototype._doInit=function(n,a){if(!(n>=a)){var l=this._store,u=l.getProvider();this._updateOrdinalMeta();var c=this._nameList,p=this._idList,d=u.getSource().sourceFormat,Q=d===SOURCE_FORMAT_ORIGINAL;if(Q&&!u.pure)for(var Ct=[],ar=n;ar<a;ar++){var en=u.getItem(ar,Ct);if(!this.hasItemOption&&isDataItemOption(en)&&(this.hasItemOption=!0),en){var tn=en.name;c[ar]==null&&tn!=null&&(c[ar]=convertOptionIdName(tn,null));var on=en.id;p[ar]==null&&on!=null&&(p[ar]=convertOptionIdName(on,null))}}if(this._shouldMakeIdFromName())for(var ar=n;ar<a;ar++)makeIdFromName(this,ar);prepareInvertedIndex(this)}},t.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.setApproximateExtent=function(n,a){a=this.getDimension(a),this._approximateExtent[a]=n.slice()},t.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},t.prototype.setCalculationInfo=function(n,a){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=a},t.prototype.getName=function(n){var a=this.getRawIndex(n),l=this._nameList[a];return l==null&&this._nameDimIdx!=null&&(l=getIdNameFromStore(this,this._nameDimIdx,a)),l==null&&(l=""),l},t.prototype._getCategory=function(n,a){var l=this._store.get(n,a),u=this._store.getOrdinalMeta(n);return u?u.categories[l]:l},t.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(n,a){var l=this._store,u=this._dimInfos[n];if(u)return l.get(u.storeDimIndex,a)},t.prototype.getByRawIndex=function(n,a){var l=this._store,u=this._dimInfos[n];if(u)return l.getByRawIndex(u.storeDimIndex,a)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},t.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},t.prototype.getValues=function(n,a){var l=this,u=this._store;return isArray$1(n)?u.getValues(map(n,function(c){return l._getStoreDimIndex(c)}),a):u.getValues(n)},t.prototype.hasValue=function(n){for(var a=this._dimSummary.dataDimIndicesOnCoord,l=0,u=a.length;l<u;l++)if(isNaN(this._store.get(a[l],n)))return!1;return!0},t.prototype.indexOfName=function(n){for(var a=0,l=this._store.count();a<l;a++)if(this.getName(a)===n)return a;return-1},t.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},t.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},t.prototype.rawIndexOf=function(n,a){var l=n&&this._invertedIndicesMap[n],u=l&&l[a];return u==null||isNaN(u)?INDEX_NOT_FOUND:u},t.prototype.indicesOfNearest=function(n,a,l){return this._store.indicesOfNearest(this._getStoreDimIndex(n),a,l)},t.prototype.each=function(n,a,l){isFunction$1(n)&&(l=a,a=n,n=[]);var u=l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(c,u?bind$1(a,u):a)},t.prototype.filterSelf=function(n,a,l){isFunction$1(n)&&(l=a,a=n,n=[]);var u=l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(c,u?bind$1(a,u):a),this},t.prototype.selectRange=function(n){var a=this,l={},u=keys(n);return each$f(u,function(c){var p=a._getStoreDimIndex(c);l[p]=n[c]}),this._store=this._store.selectRange(l),this},t.prototype.mapArray=function(n,a,l){isFunction$1(n)&&(l=a,a=n,n=[]),l=l||this;var u=[];return this.each(n,function(){u.push(a&&a.apply(this,arguments))},l),u},t.prototype.map=function(n,a,l,u){var c=l||u||this,p=map(normalizeDimensions(n),this._getStoreDimIndex,this),d=cloneListForMapAndSample(this);return d._store=this._store.map(p,c?bind$1(a,c):a),d},t.prototype.modify=function(n,a,l,u){var c=l||u||this,p=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(p,c?bind$1(a,c):a)},t.prototype.downSample=function(n,a,l,u){var c=cloneListForMapAndSample(this);return c._store=this._store.downSample(this._getStoreDimIndex(n),a,l,u),c},t.prototype.minmaxDownSample=function(n,a){var l=cloneListForMapAndSample(this);return l._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),a),l},t.prototype.lttbDownSample=function(n,a){var l=cloneListForMapAndSample(this);return l._store=this._store.lttbDownSample(this._getStoreDimIndex(n),a),l},t.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},t.prototype.getItemModel=function(n){var a=this.hostModel,l=this.getRawDataItem(n);return new Model(l,a,a&&a.ecModel)},t.prototype.diff=function(n){var a=this;return new DataDiffer(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(l){return getId(n,l)},function(l){return getId(a,l)})},t.prototype.getVisual=function(n){var a=this._visual;return a&&a[n]},t.prototype.setVisual=function(n,a){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=a},t.prototype.getItemVisual=function(n,a){var l=this._itemVisuals[n],u=l&&l[a];return u??this.getVisual(a)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(n,a){var l=this._itemVisuals,u=l[n];u||(u=l[n]={});var c=u[a];return c==null&&(c=this.getVisual(a),isArray$1(c)?c=c.slice():isObject$1(c)&&(c=extend({},c)),u[a]=c),c},t.prototype.setItemVisual=function(n,a,l){var u=this._itemVisuals[n]||{};this._itemVisuals[n]=u,isObject$1(a)?extend(u,a):u[a]=l},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(n,a){isObject$1(n)?extend(this._layout,n):this._layout[n]=a},t.prototype.getLayout=function(n){return this._layout[n]},t.prototype.getItemLayout=function(n){return this._itemLayouts[n]},t.prototype.setItemLayout=function(n,a,l){this._itemLayouts[n]=l?extend(this._itemLayouts[n]||{},a):a},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(n,a){var l=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(l,this.dataType,n,a),this._graphicEls[n]=a},t.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},t.prototype.eachItemGraphicEl=function(n,a){each$f(this._graphicEls,function(l,u){l&&n&&n.call(a,l,u)})},t.prototype.cloneShallow=function(n){return n||(n=new t(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},t.prototype.wrapMethod=function(n,a){var l=this[n];isFunction$1(l)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var u=l.apply(this,arguments);return a.apply(this,[u].concat(slice(arguments)))})},t.internalField=function(){prepareInvertedIndex=function(n){var a=n._invertedIndicesMap;each$f(a,function(l,u){var c=n._dimInfos[u],p=c.ordinalMeta,d=n._store;if(p){l=a[u]=new CtorInt32Array(p.categories.length);for(var Q=0;Q<l.length;Q++)l[Q]=INDEX_NOT_FOUND;for(var Q=0;Q<d.count();Q++)l[d.get(c.storeDimIndex,Q)]=Q}})},getIdNameFromStore=function(n,a,l){return convertOptionIdName(n._getCategory(a,l),null)},getId=function(n,a){var l=n._idList[a];return l==null&&n._idDimIdx!=null&&(l=getIdNameFromStore(n,n._idDimIdx,a)),l==null&&(l=ID_PREFIX+a),l},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var a=new t(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(a,n),a},transferProperties=function(n,a){each$f(TRANSFERABLE_PROPERTIES.concat(a.__wrappedMethods||[]),function(l){a.hasOwnProperty(l)&&(n[l]=a[l])}),n.__wrappedMethods=a.__wrappedMethods,each$f(CLONE_PROPERTIES,function(l){n[l]=clone$4(a[l])}),n._calculationInfo=extend({},a._calculationInfo)},makeIdFromName=function(n,a){var l=n._nameList,u=n._idList,c=n._nameDimIdx,p=n._idDimIdx,d=l[a],Q=u[a];if(d==null&&c!=null&&(l[a]=d=getIdNameFromStore(n,c,a)),Q==null&&p!=null&&(u[a]=Q=getIdNameFromStore(n,p,a)),Q==null&&d!=null){var Ct=n._nameRepeatCount,ar=Ct[d]=(Ct[d]||0)+1;Q=d,ar>1&&(Q+="__ec__"+ar),u[a]=Q}}}(),t}();function createDimensions(t,n){return prepareSeriesDataSchema(t,n).dimensions}function prepareSeriesDataSchema(t,n){isSourceInstance(t)||(t=createSourceFromSeriesDataOption(t)),n=n||{};var a=n.coordDimensions||[],l=n.dimensionsDefine||t.dimensionsDefine||[],u=createHashMap(),c=[],p=getDimCount(t,a,l,n.dimensionsCount),d=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(p),Q=l===t.dimensionsDefine,Ct=Q?ensureSourceDimNameMap(t):createDimNameMap(l),ar=n.encodeDefine;!ar&&n.encodeDefaulter&&(ar=n.encodeDefaulter(t,p));for(var en=createHashMap(ar),tn=new CtorInt32Array$1(p),on=0;on<tn.length;on++)tn[on]=-1;function cn(fx){var ux=tn[fx];if(ux<0){var gx=l[fx],yx=isObject$3(gx)?gx:{name:gx},_x=new SeriesDimensionDefine,vx=yx.name;vx!=null&&Ct.get(vx)!=null&&(_x.name=_x.displayName=vx),yx.type!=null&&(_x.type=yx.type),yx.displayName!=null&&(_x.displayName=yx.displayName);var bx=c.length;return tn[fx]=bx,_x.storeDimIndex=fx,c.push(_x),_x}return c[ux]}if(!d)for(var on=0;on<p;on++)cn(on);en.each(function(fx,ux){var gx=normalizeToArray(fx).slice();if(gx.length===1&&!isString$1(gx[0])&&gx[0]<0){en.set(ux,!1);return}var yx=en.set(ux,[]);each$f(gx,function(_x,vx){var bx=isString$1(_x)?Ct.get(_x):_x;bx!=null&&bx<p&&(yx[vx]=bx,Cn(cn(bx),ux,vx))})});var gn=0;each$f(a,function(fx){var ux,gx,yx,_x;if(isString$1(fx))ux=fx,_x={};else{_x=fx,ux=_x.name;var vx=_x.ordinalMeta;_x.ordinalMeta=null,_x=extend({},_x),_x.ordinalMeta=vx,gx=_x.dimsDef,yx=_x.otherDims,_x.name=_x.coordDim=_x.coordDimIndex=_x.dimsDef=_x.otherDims=null}var bx=en.get(ux);if(bx!==!1){if(bx=normalizeToArray(bx),!bx.length)for(var xx=0;xx<(gx&&gx.length||1);xx++){for(;gn<p&&cn(gn).coordDim!=null;)gn++;gn<p&&bx.push(gn++)}each$f(bx,function(Sx,Ax){var Cx=cn(Sx);if(Q&&_x.type!=null&&(Cx.type=_x.type),Cn(defaults(Cx,_x),ux,Ax),Cx.name==null&&gx){var Tx=gx[Ax];!isObject$3(Tx)&&(Tx={name:Tx}),Cx.name=Cx.displayName=Tx.name,Cx.defaultTooltip=Tx.defaultTooltip}yx&&defaults(Cx.otherDims,yx)})}});function Cn(fx,ux,gx){VISUAL_DIMENSIONS.get(ux)!=null?fx.otherDims[ux]=gx:(fx.coordDim=ux,fx.coordDimIndex=gx,u.set(ux,!0))}var ex=n.generateCoord,ix=n.generateCoordCount,ax=ix!=null;ix=ex?ix||1:0;var ox=ex||"value";function lx(fx){fx.name==null&&(fx.name=fx.coordDim)}if(d)each$f(c,function(fx){lx(fx)}),c.sort(function(fx,ux){return fx.storeDimIndex-ux.storeDimIndex});else for(var cx=0;cx<p;cx++){var dx=cn(cx),hx=dx.coordDim;hx==null&&(dx.coordDim=genCoordDimName(ox,u,ax),dx.coordDimIndex=0,(!ex||ix<=0)&&(dx.isExtraCoord=!0),ix--),lx(dx),dx.type==null&&(guessOrdinal(t,cx)===BE_ORDINAL.Must||dx.isExtraCoord&&(dx.otherDims.itemName!=null||dx.otherDims.seriesName!=null))&&(dx.type="ordinal")}return removeDuplication(c),new SeriesDataSchema({source:t,dimensions:c,fullDimensionCount:p,dimensionOmitted:d})}function removeDuplication(t){for(var n=createHashMap(),a=0;a<t.length;a++){var l=t[a],u=l.name,c=n.get(u)||0;c>0&&(l.name=u+(c-1)),c++,n.set(u,c)}}function getDimCount(t,n,a,l){var u=Math.max(t.dimensionsDetectedCount||1,n.length,a.length,l||0);return each$f(n,function(c){var p;isObject$3(c)&&(p=c.dimsDef)&&(u=Math.max(u,p.length))}),u}function genCoordDimName(t,n,a){if(a||n.hasKey(t)){for(var l=0;n.hasKey(t+l);)l++;t+=l}return n.set(t,!0),t}var CoordSysInfo=function(){function t(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return t}();function getCoordSysInfoBySeries(t){var n=t.get("coordinateSystem"),a=new CoordSysInfo(n),l=fetchers[n];if(l)return l(t,a,a.axisMap,a.categoryAxisMap),a}var fetchers={cartesian2d:function(t,n,a,l){var u=t.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],c=t.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"],a.set("x",u),a.set("y",c),isCategory(u)&&(l.set("x",u),n.firstCategoryDimIndex=0),isCategory(c)&&(l.set("y",c),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(t,n,a,l){var u=t.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["single"],a.set("single",u),isCategory(u)&&(l.set("single",u),n.firstCategoryDimIndex=0)},polar:function(t,n,a,l){var u=t.getReferringComponents("polar",SINGLE_REFERRING).models[0],c=u.findAxisModel("radiusAxis"),p=u.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],a.set("radius",c),a.set("angle",p),isCategory(c)&&(l.set("radius",c),n.firstCategoryDimIndex=0),isCategory(p)&&(l.set("angle",p),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(t,n,a,l){n.coordSysDims=["lng","lat"]},parallel:function(t,n,a,l){var u=t.ecModel,c=u.getComponent("parallel",t.get("parallelIndex")),p=n.coordSysDims=c.dimensions.slice();each$f(c.parallelAxisIndex,function(d,Q){var Ct=u.getComponent("parallelAxis",d),ar=p[Q];a.set(ar,Ct),isCategory(Ct)&&(l.set(ar,Ct),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=Q))})}};function isCategory(t){return t.get("type")==="category"}function enableDataStack(t,n,a){a=a||{};var l=a.byIndex,u=a.stackedCoordDimension,c,p,d;isLegacyDimensionsInput(n)?c=n:(p=n.schema,c=p.dimensions,d=n.store);var Q=!!(t&&t.get("stack")),Ct,ar,en,tn;if(each$f(c,function(ix,ax){isString$1(ix)&&(c[ax]=ix={name:ix}),Q&&!ix.isExtraCoord&&(!l&&!Ct&&ix.ordinalMeta&&(Ct=ix),!ar&&ix.type!=="ordinal"&&ix.type!=="time"&&(!u||u===ix.coordDim)&&(ar=ix))}),ar&&!l&&!Ct&&(l=!0),ar){en="__\0ecstackresult_"+t.id,tn="__\0ecstackedover_"+t.id,Ct&&(Ct.createInvertedIndices=!0);var on=ar.coordDim,cn=ar.type,gn=0;each$f(c,function(ix){ix.coordDim===on&&gn++});var Cn={name:en,coordDim:on,coordDimIndex:gn,type:cn,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:c.length},ex={name:tn,coordDim:tn,coordDimIndex:gn+1,type:cn,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:c.length+1};p?(d&&(Cn.storeDimIndex=d.ensureCalculationDimension(tn,cn),ex.storeDimIndex=d.ensureCalculationDimension(en,cn)),p.appendCalculationDimension(Cn),p.appendCalculationDimension(ex)):(c.push(Cn),c.push(ex))}return{stackedDimension:ar&&ar.name,stackedByDimension:Ct&&Ct.name,isStackedByIndex:l,stackedOverDimension:tn,stackResultDimension:en}}function isLegacyDimensionsInput(t){return!isSeriesDataSchema(t.schema)}function isDimensionStacked(t,n){return!!n&&n===t.getCalculationInfo("stackedDimension")}function getStackedDimension(t,n){return isDimensionStacked(t,n)?t.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(t,n){var a=t.get("coordinateSystem"),l=CoordinateSystemManager.get(a),u;return n&&n.coordSysDims&&(u=map$1(n.coordSysDims,function(c){var p={name:c},d=n.axisMap.get(c);if(d){var Q=d.get("type");p.type=getDimensionTypeByAxis(Q)}return p})),u||(u=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]),u}function injectOrdinalMeta(t,n,a){var l,u;return a&&each$f(t,function(c,p){var d=c.coordDim,Q=a.categoryAxisMap.get(d);Q&&(l==null&&(l=p),c.ordinalMeta=Q.getOrdinalMeta(),n&&(c.createInvertedIndices=!0)),c.otherDims.itemName!=null&&(u=!0)}),!u&&l!=null&&(t[l].otherDims.itemName=0),l}function createSeriesData(t,n,a){a=a||{};var l=n.getSourceManager(),u,c=!1;t?(c=!0,u=createSourceFromSeriesDataOption(t)):(u=l.getSource(),c=u.sourceFormat===SOURCE_FORMAT_ORIGINAL);var p=getCoordSysInfoBySeries(n),d=getCoordSysDimDefs(n,p),Q=a.useEncodeDefaulter,Ct=isFunction$1(Q)?Q:Q?curry$1(makeSeriesEncodeForAxisCoordSys,d,n):null,ar={coordDimensions:d,generateCoord:a.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:Ct,canOmitUnusedDimensions:!c},en=prepareSeriesDataSchema(u,ar),tn=injectOrdinalMeta(en.dimensions,a.createInvertedIndices,p),on=c?null:l.getSharedDataStore(en),cn=enableDataStack(n,{schema:en,store:on}),gn=new SeriesData(en,n);gn.setCalculationInfo(cn);var Cn=tn!=null&&isNeedCompleteOrdinalData(u)?function(ex,ix,ax,ox){return ox===tn?ax:this.defaultDimValueGetter(ex,ix,ax,ox)}:null;return gn.hasItemOption=!1,gn.initData(c?u:on,null,Cn),gn}function isNeedCompleteOrdinalData(t){if(t.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(t.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(t){for(var n=0;n<t.length&&t[n]==null;)n++;return t[n]}var Scale=function(){function t(n){this._setting=n||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(n){return this._setting[n]},t.prototype.unionExtent=function(n){var a=this._extent;n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1])},t.prototype.unionExtentFromData=function(n,a){this.unionExtent(n.getApproximateExtent(a))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(n,a){var l=this._extent;isNaN(n)||(l[0]=n),isNaN(a)||(l[1]=a)},t.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(n){this._isBlank=n},t}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function t(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase}return t.createByAxisModel=function(n){var a=n.option,l=a.data,u=l&&map$1(l,getName);return new t({categories:u,needCollect:!u,deduplication:a.dedplication!==!1})},t.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},t.prototype.parseAndCollect=function(n){var a,l=this._needCollect;if(!isString$1(n)&&!l)return n;if(l&&!this._deduplication)return a=this.categories.length,this.categories[a]=n,a;var u=this._getOrCreateMap();return a=u.get(n),a==null&&(l?(a=this.categories.length,this.categories[a]=n,u.set(n,a)):a=NaN),a},t.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},t}();function getName(t){return isObject$3(t)&&t.value!=null?t.value:t+""}function isIntervalOrLogScale(t){return t.type==="interval"||t.type==="log"}function intervalScaleNiceTicks(t,n,a,l){var u={},c=t[1]-t[0],p=u.interval=nice(c/n,!0);a!=null&&p<a&&(p=u.interval=a),l!=null&&p>l&&(p=u.interval=l);var d=u.intervalPrecision=getIntervalPrecision(p),Q=u.niceTickExtent=[round$3(Math.ceil(t[0]/p)*p,d),round$3(Math.floor(t[1]/p)*p,d)];return fixExtent(Q,t),u}function increaseInterval(t){var n=Math.pow(10,quantityExponent(t)),a=t/n;return a?a===2?a=3:a===3?a=5:a*=2:a=1,round$3(a*n)}function getIntervalPrecision(t){return getPrecision(t)+2}function clamp(t,n,a){t[n]=Math.max(Math.min(t[n],a[1]),a[0])}function fixExtent(t,n){!isFinite(t[0])&&(t[0]=n[0]),!isFinite(t[1])&&(t[1]=n[1]),clamp(t,0,n),clamp(t,1,n),t[0]>t[1]&&(t[0]=t[1])}function contain$1(t,n){return t>=n[0]&&t<=n[1]}function normalize$2(t,n){return n[1]===n[0]?.5:(t-n[0])/(n[1]-n[0])}function scale(t,n){return t*(n[1]-n[0])+n[0]}var OrdinalScale=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;l.type="ordinal";var u=l.getSetting("ordinalMeta");return u||(u=new OrdinalMeta({})),isArray$1(u)&&(u=new OrdinalMeta({categories:map$1(u,function(c){return isObject$3(c)?c.value:c})})),l._ordinalMeta=u,l._extent=l.getSetting("extent")||[0,u.categories.length-1],l}return n.prototype.parse=function(a){return a==null?NaN:isString$1(a)?this._ordinalMeta.getOrdinal(a):Math.round(a)},n.prototype.contain=function(a){return a=this.parse(a),contain$1(a,this._extent)&&this._ordinalMeta.categories[a]!=null},n.prototype.normalize=function(a){return a=this._getTickNumber(this.parse(a)),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=Math.round(scale(a,this._extent)),this.getRawOrdinalNumber(a)},n.prototype.getTicks=function(){for(var a=[],l=this._extent,u=l[0];u<=l[1];)a.push({value:u}),u++;return a},n.prototype.getMinorTicks=function(a){},n.prototype.setSortInfo=function(a){if(a==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var l=a.ordinalNumbers,u=this._ordinalNumbersByTick=[],c=this._ticksByOrdinalNumber=[],p=0,d=this._ordinalMeta.categories.length,Q=Math.min(d,l.length);p<Q;++p){var Ct=l[p];u[p]=Ct,c[Ct]=p}for(var ar=0;p<d;++p){for(;c[ar]!=null;)ar++;u.push(ar),c[ar]=p}},n.prototype._getTickNumber=function(a){var l=this._ticksByOrdinalNumber;return l&&a>=0&&a<l.length?l[a]:a},n.prototype.getRawOrdinalNumber=function(a){var l=this._ordinalNumbersByTick;return l&&a>=0&&a<l.length?l[a]:a},n.prototype.getLabel=function(a){if(!this.isBlank()){var l=this.getRawOrdinalNumber(a.value),u=this._ordinalMeta.categories[l];return u==null?"":u+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(a,l){this.unionExtent(a.getApproximateExtent(l))},n.prototype.isInExtentRange=function(a){return a=this._getTickNumber(a),this._extent[0]<=a&&this._extent[1]>=a},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="interval",a._interval=0,a._intervalPrecision=2,a}return n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return contain$1(a,this._extent)},n.prototype.normalize=function(a){return normalize$2(a,this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.prototype.setExtent=function(a,l){var u=this._extent;isNaN(a)||(u[0]=parseFloat(a)),isNaN(l)||(u[1]=parseFloat(l))},n.prototype.unionExtent=function(a){var l=this._extent;a[0]<l[0]&&(l[0]=a[0]),a[1]>l[1]&&(l[1]=a[1]),this.setExtent(l[0],l[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(a)},n.prototype.getTicks=function(a){var l=this._interval,u=this._extent,c=this._niceExtent,p=this._intervalPrecision,d=[];if(!l)return d;var Q=1e4;u[0]<c[0]&&(a?d.push({value:roundNumber(c[0]-l,p)}):d.push({value:u[0]}));for(var Ct=c[0];Ct<=c[1]&&(d.push({value:Ct}),Ct=roundNumber(Ct+l,p),Ct!==d[d.length-1].value);)if(d.length>Q)return[];var ar=d.length?d[d.length-1].value:c[1];return u[1]>ar&&(a?d.push({value:roundNumber(ar+l,p)}):d.push({value:u[1]})),d},n.prototype.getMinorTicks=function(a){for(var l=this.getTicks(!0),u=[],c=this.getExtent(),p=1;p<l.length;p++){for(var d=l[p],Q=l[p-1],Ct=0,ar=[],en=d.value-Q.value,tn=en/a;Ct<a-1;){var on=roundNumber(Q.value+(Ct+1)*tn);on>c[0]&&on<c[1]&&ar.push(on),Ct++}u.push(ar)}return u},n.prototype.getLabel=function(a,l){if(a==null)return"";var u=l&&l.precision;u==null?u=getPrecision(a.value)||0:u==="auto"&&(u=this._intervalPrecision);var c=roundNumber(a.value,u,!0);return addCommas(c)},n.prototype.calcNiceTicks=function(a,l,u){a=a||5;var c=this._extent,p=c[1]-c[0];if(isFinite(p)){p<0&&(p=-p,c.reverse());var d=intervalScaleNiceTicks(c,a,l,u);this._intervalPrecision=d.intervalPrecision,this._interval=d.interval,this._niceExtent=d.niceTickExtent}},n.prototype.calcNiceExtent=function(a){var l=this._extent;if(l[0]===l[1])if(l[0]!==0){var u=Math.abs(l[0]);a.fixMax||(l[1]+=u/2),l[0]-=u/2}else l[1]=1;var c=l[1]-l[0];isFinite(c)||(l[0]=0,l[1]=1),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval);var p=this._interval;a.fixMin||(l[0]=roundNumber(Math.floor(l[0]/p)*p)),a.fixMax||(l[1]=roundNumber(Math.ceil(l[1]/p)*p))},n.prototype.setNiceExtent=function(a,l){this._niceExtent=[a,l]},n.type="interval",n}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(t){return isArray$1(t)?supportFloat32Array?new Float32Array(t):t:new Float32ArrayCtor(t)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(t){return t.get("stack")||STACK_PREFIX+t.seriesIndex}function getAxisKey$1(t){return t.dim+t.index}function getLayoutOnAxis(t){var n=[],a=t.axis,l="axis0";if(a.type==="category"){for(var u=a.getBandWidth(),c=0;c<t.count;c++)n.push(defaults({bandWidth:u,axisKey:l,stackId:STACK_PREFIX+c},t));for(var p=doCalBarWidthAndOffset(n),d=[],c=0;c<t.count;c++){var Q=p[l][STACK_PREFIX+c];Q.offsetCenter=Q.offset+Q.width/2,d.push(Q)}return d}}function prepareLayoutBarSeries(t,n){var a=[];return n.eachSeriesByType(t,function(l){isOnCartesian(l)&&a.push(l)}),a}function getValueAxesMinGaps(t){var n={};each$f(t,function(Q){var Ct=Q.coordinateSystem,ar=Ct.getBaseAxis();if(!(ar.type!=="time"&&ar.type!=="value"))for(var en=Q.getData(),tn=ar.dim+"_"+ar.index,on=en.getDimensionIndex(en.mapDimension(ar.dim)),cn=en.getStore(),gn=0,Cn=cn.count();gn<Cn;++gn){var ex=cn.get(on,gn);n[tn]?n[tn].push(ex):n[tn]=[ex]}});var a={};for(var l in n)if(n.hasOwnProperty(l)){var u=n[l];if(u){u.sort(function(Q,Ct){return Q-Ct});for(var c=null,p=1;p<u.length;++p){var d=u[p]-u[p-1];d>0&&(c=c===null?d:Math.min(c,d))}a[l]=c}}return a}function makeColumnLayout(t){var n=getValueAxesMinGaps(t),a=[];return each$f(t,function(l){var u=l.coordinateSystem,c=u.getBaseAxis(),p=c.getExtent(),d;if(c.type==="category")d=c.getBandWidth();else if(c.type==="value"||c.type==="time"){var Q=c.dim+"_"+c.index,Ct=n[Q],ar=Math.abs(p[1]-p[0]),en=c.scale.getExtent(),tn=Math.abs(en[1]-en[0]);d=Ct?ar/tn*Ct:ar}else{var on=l.getData();d=Math.abs(p[1]-p[0])/on.count()}var cn=parsePercent(l.get("barWidth"),d),gn=parsePercent(l.get("barMaxWidth"),d),Cn=parsePercent(l.get("barMinWidth")||(isInLargeMode(l)?.5:1),d),ex=l.get("barGap"),ix=l.get("barCategoryGap");a.push({bandWidth:d,barWidth:cn,barMaxWidth:gn,barMinWidth:Cn,barGap:ex,barCategoryGap:ix,axisKey:getAxisKey$1(c),stackId:getSeriesStackId$1(l)})}),doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(t){var n={};each$f(t,function(l,u){var c=l.axisKey,p=l.bandWidth,d=n[c]||{bandWidth:p,remainedWidth:p,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},Q=d.stacks;n[c]=d;var Ct=l.stackId;Q[Ct]||d.autoWidthCount++,Q[Ct]=Q[Ct]||{width:0,maxWidth:0};var ar=l.barWidth;ar&&!Q[Ct].width&&(Q[Ct].width=ar,ar=Math.min(d.remainedWidth,ar),d.remainedWidth-=ar);var en=l.barMaxWidth;en&&(Q[Ct].maxWidth=en);var tn=l.barMinWidth;tn&&(Q[Ct].minWidth=tn);var on=l.barGap;on!=null&&(d.gap=on);var cn=l.barCategoryGap;cn!=null&&(d.categoryGap=cn)});var a={};return each$f(n,function(l,u){a[u]={};var c=l.stacks,p=l.bandWidth,d=l.categoryGap;if(d==null){var Q=keys(c).length;d=Math.max(35-Q*4,15)+"%"}var Ct=parsePercent(d,p),ar=parsePercent(l.gap,1),en=l.remainedWidth,tn=l.autoWidthCount,on=(en-Ct)/(tn+(tn-1)*ar);on=Math.max(on,0),each$f(c,function(ex){var ix=ex.maxWidth,ax=ex.minWidth;if(ex.width){var ox=ex.width;ix&&(ox=Math.min(ox,ix)),ax&&(ox=Math.max(ox,ax)),ex.width=ox,en-=ox+ar*ox,tn--}else{var ox=on;ix&&ix<ox&&(ox=Math.min(ix,en)),ax&&ax>ox&&(ox=ax),ox!==on&&(ex.width=ox,en-=ox+ar*ox,tn--)}}),on=(en-Ct)/(tn+(tn-1)*ar),on=Math.max(on,0);var cn=0,gn;each$f(c,function(ex,ix){ex.width||(ex.width=on),gn=ex,cn+=ex.width*(1+ar)}),gn&&(cn-=gn.width*ar);var Cn=-cn/2;each$f(c,function(ex,ix){a[u][ix]=a[u][ix]||{bandWidth:p,offset:Cn,width:ex.width},Cn+=ex.width*(1+ar)})}),a}function retrieveColumnLayout(t,n,a){if(t&&n){var l=t[getAxisKey$1(n)];return l}}function layout$3(t,n){var a=prepareLayoutBarSeries(t,n),l=makeColumnLayout(a);each$f(a,function(u){var c=u.getData(),p=u.coordinateSystem,d=p.getBaseAxis(),Q=getSeriesStackId$1(u),Ct=l[getAxisKey$1(d)][Q],ar=Ct.offset,en=Ct.width;c.setLayout({bandWidth:Ct.bandWidth,offset:ar,size:en})})}function createProgressiveLayout(t){return{seriesType:t,plan:createRenderPlanner(),reset:function(n){if(isOnCartesian(n)){var a=n.getData(),l=n.coordinateSystem,u=l.getBaseAxis(),c=l.getOtherAxis(u),p=a.getDimensionIndex(a.mapDimension(c.dim)),d=a.getDimensionIndex(a.mapDimension(u.dim)),Q=n.get("showBackground",!0),Ct=a.mapDimension(c.dim),ar=a.getCalculationInfo("stackResultDimension"),en=isDimensionStacked(a,Ct)&&!!a.getCalculationInfo("stackedOnSeries"),tn=c.isHorizontal(),on=getValueAxisStart(u,c),cn=isInLargeMode(n),gn=n.get("barMinHeight")||0,Cn=ar&&a.getDimensionIndex(ar),ex=a.getLayout("size"),ix=a.getLayout("offset");return{progress:function(ax,ox){for(var lx=ax.count,cx=cn&&createFloat32Array(lx*3),dx=cn&&Q&&createFloat32Array(lx*3),hx=cn&&createFloat32Array(lx),fx=l.master.getRect(),ux=tn?fx.width:fx.height,gx,yx=ox.getStore(),_x=0;(gx=ax.next())!=null;){var vx=yx.get(en?Cn:p,gx),bx=yx.get(d,gx),xx=on,Sx=void 0;en&&(Sx=+vx-yx.get(p,gx));var Ax=void 0,Cx=void 0,Tx=void 0,Px=void 0;if(tn){var Fx=l.dataToPoint([vx,bx]);if(en){var Mx=l.dataToPoint([Sx,bx]);xx=Mx[0]}Ax=xx,Cx=Fx[1]+ix,Tx=Fx[0]-xx,Px=ex,Math.abs(Tx)<gn&&(Tx=(Tx<0?-1:1)*gn)}else{var Fx=l.dataToPoint([bx,vx]);if(en){var Mx=l.dataToPoint([bx,Sx]);xx=Mx[1]}Ax=Fx[0]+ix,Cx=xx,Tx=ex,Px=Fx[1]-xx,Math.abs(Px)<gn&&(Px=(Px<=0?-1:1)*gn)}cn?(cx[_x]=Ax,cx[_x+1]=Cx,cx[_x+2]=tn?Tx:Px,dx&&(dx[_x]=tn?fx.x:Ax,dx[_x+1]=tn?Cx:fx.y,dx[_x+2]=ux),hx[gx]=gx):ox.setItemLayout(gx,{x:Ax,y:Cx,width:Tx,height:Px}),_x+=3}cn&&ox.setLayout({largePoints:cx,largeDataIndices:hx,largeBackgroundPoints:dx,valueAxisHorizontal:tn})}}}}}}function isOnCartesian(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function isInLargeMode(t){return t.pipelineContext&&t.pipelineContext.large}function getValueAxisStart(t,n){var a=n.model.get("startValue");return a||(a=0),n.toGlobalCoord(n.dataToCoord(n.type==="log"?a>0?a:1:a))}var bisect=function(t,n,a,l){for(;a<l;){var u=a+l>>>1;t[u][1]<n?a=u+1:l=u}return a},TimeScale=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="time",l}return n.prototype.getLabel=function(a){var l=this.getSetting("useUTC");return format$1(a.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,l,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(a,l,u){var c=this.getSetting("useUTC"),p=this.getSetting("locale");return leveledFormat(a,l,u,p,c)},n.prototype.getTicks=function(){var a=this._interval,l=this._extent,u=[];if(!a)return u;u.push({value:l[0],level:0});var c=this.getSetting("useUTC"),p=getIntervalTicks(this._minLevelUnit,this._approxInterval,c,l);return u=u.concat(p),u.push({value:l[1],level:0}),u},n.prototype.calcNiceExtent=function(a){var l=this._extent;if(l[0]===l[1]&&(l[0]-=ONE_DAY,l[1]+=ONE_DAY),l[1]===-1/0&&l[0]===1/0){var u=new Date;l[1]=+new Date(u.getFullYear(),u.getMonth(),u.getDate()),l[0]=l[1]-ONE_DAY}this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval)},n.prototype.calcNiceTicks=function(a,l,u){a=a||10;var c=this._extent,p=c[1]-c[0];this._approxInterval=p/a,l!=null&&this._approxInterval<l&&(this._approxInterval=l),u!=null&&this._approxInterval>u&&(this._approxInterval=u);var d=scaleIntervals.length,Q=Math.min(bisect(scaleIntervals,this._approxInterval,0,d),d-1);this._interval=scaleIntervals[Q][1],this._minLevelUnit=scaleIntervals[Math.max(Q-1,0)][0]},n.prototype.parse=function(a){return isNumber(a)?a:+parseDate(a)},n.prototype.contain=function(a){return contain$1(this.parse(a),this._extent)},n.prototype.normalize=function(a){return normalize$2(this.parse(a),this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.type="time",n}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(t,n,a,l){var u=parseDate(n),c=parseDate(a),p=function(cn){return getUnitValue(u,cn,l)===getUnitValue(c,cn,l)},d=function(){return p("year")},Q=function(){return d()&&p("month")},Ct=function(){return Q()&&p("day")},ar=function(){return Ct()&&p("hour")},en=function(){return ar()&&p("minute")},tn=function(){return en()&&p("second")},on=function(){return tn()&&p("millisecond")};switch(t){case"year":return d();case"month":return Q();case"day":return Ct();case"hour":return ar();case"minute":return en();case"second":return tn();case"millisecond":return on()}}function getDateInterval(t,n){return t/=ONE_DAY,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function getMonthInterval(t){var n=30*ONE_DAY;return t/=n,t>6?6:t>3?3:t>2?2:1}function getHourInterval(t){return t/=ONE_HOUR,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function getMinutesAndSecondsInterval(t,n){return t/=n?ONE_MINUTE:ONE_SECOND,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function getMillisecondsInterval(t){return nice(t,!0)}function getFirstTimestampOfUnit(t,n,a){var l=new Date(t);switch(getPrimaryTimeUnit(n)){case"year":case"month":l[monthSetterName(a)](0);case"day":l[dateSetterName(a)](1);case"hour":l[hoursSetterName(a)](0);case"minute":l[minutesSetterName(a)](0);case"second":l[secondsSetterName(a)](0),l[millisecondsSetterName(a)](0)}return l.getTime()}function getIntervalTicks(t,n,a,l){var u=1e4,c=timeUnits,p=0;function d(ux,gx,yx,_x,vx,bx,xx){for(var Sx=new Date(gx),Ax=gx,Cx=Sx[_x]();Ax<yx&&Ax<=l[1];)xx.push({value:Ax}),Cx+=ux,Sx[vx](Cx),Ax=Sx.getTime();xx.push({value:Ax,notAdd:!0})}function Q(ux,gx,yx){var _x=[],vx=!gx.length;if(!isUnitValueSame(getPrimaryTimeUnit(ux),l[0],l[1],a)){vx&&(gx=[{value:getFirstTimestampOfUnit(new Date(l[0]),ux,a)},{value:l[1]}]);for(var bx=0;bx<gx.length-1;bx++){var xx=gx[bx].value,Sx=gx[bx+1].value;if(xx!==Sx){var Ax=void 0,Cx=void 0,Tx=void 0,Px=!1;switch(ux){case"year":Ax=Math.max(1,Math.round(n/ONE_DAY/365)),Cx=fullYearGetterName(a),Tx=fullYearSetterName(a);break;case"half-year":case"quarter":case"month":Ax=getMonthInterval(n),Cx=monthGetterName(a),Tx=monthSetterName(a);break;case"week":case"half-week":case"day":Ax=getDateInterval(n),Cx=dateGetterName(a),Tx=dateSetterName(a),Px=!0;break;case"half-day":case"quarter-day":case"hour":Ax=getHourInterval(n),Cx=hoursGetterName(a),Tx=hoursSetterName(a);break;case"minute":Ax=getMinutesAndSecondsInterval(n,!0),Cx=minutesGetterName(a),Tx=minutesSetterName(a);break;case"second":Ax=getMinutesAndSecondsInterval(n,!1),Cx=secondsGetterName(a),Tx=secondsSetterName(a);break;case"millisecond":Ax=getMillisecondsInterval(n),Cx=millisecondsGetterName(a),Tx=millisecondsSetterName(a);break}d(Ax,xx,Sx,Cx,Tx,Px,_x),ux==="year"&&yx.length>1&&bx===0&&yx.unshift({value:yx[0].value-Ax})}}for(var bx=0;bx<_x.length;bx++)yx.push(_x[bx]);return _x}}for(var Ct=[],ar=[],en=0,tn=0,on=0;on<c.length&&p++<u;++on){var cn=getPrimaryTimeUnit(c[on]);if(isPrimaryTimeUnit(c[on])){Q(c[on],Ct[Ct.length-1]||[],ar);var gn=c[on+1]?getPrimaryTimeUnit(c[on+1]):null;if(cn!==gn){if(ar.length){tn=en,ar.sort(function(ux,gx){return ux.value-gx.value});for(var Cn=[],ex=0;ex<ar.length;++ex){var ix=ar[ex].value;(ex===0||ar[ex-1].value!==ix)&&(Cn.push(ar[ex]),ix>=l[0]&&ix<=l[1]&&en++)}var ax=(l[1]-l[0])/n;if(en>ax*1.5&&tn>ax/1.5||(Ct.push(Cn),en>ax||t===c[on]))break}ar=[]}}}for(var ox=filter(map$1(Ct,function(ux){return filter(ux,function(gx){return gx.value>=l[0]&&gx.value<=l[1]&&!gx.notAdd})}),function(ux){return ux.length>0}),lx=[],cx=ox.length-1,on=0;on<ox.length;++on)for(var dx=ox[on],hx=0;hx<dx.length;++hx)lx.push({value:dx[hx].value,level:cx-on});lx.sort(function(ux,gx){return ux.value-gx.value});for(var fx=[],on=0;on<lx.length;++on)(on===0||lx[on].value!==lx[on-1].value)&&fx.push(lx[on]);return fx}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="log",a.base=10,a._originalScale=new IntervalScale,a._interval=0,a}return n.prototype.getTicks=function(a){var l=this._originalScale,u=this._extent,c=l.getExtent(),p=intervalScaleProto.getTicks.call(this,a);return map$1(p,function(d){var Q=d.value,Ct=round$3(mathPow$1(this.base,Q));return Ct=Q===u[0]&&this._fixMin?fixRoundingError(Ct,c[0]):Ct,Ct=Q===u[1]&&this._fixMax?fixRoundingError(Ct,c[1]):Ct,{value:Ct}},this)},n.prototype.setExtent=function(a,l){var u=mathLog$1(this.base);a=mathLog$1(Math.max(0,a))/u,l=mathLog$1(Math.max(0,l))/u,intervalScaleProto.setExtent.call(this,a,l)},n.prototype.getExtent=function(){var a=this.base,l=scaleProto.getExtent.call(this);l[0]=mathPow$1(a,l[0]),l[1]=mathPow$1(a,l[1]);var u=this._originalScale,c=u.getExtent();return this._fixMin&&(l[0]=fixRoundingError(l[0],c[0])),this._fixMax&&(l[1]=fixRoundingError(l[1],c[1])),l},n.prototype.unionExtent=function(a){this._originalScale.unionExtent(a);var l=this.base;a[0]=mathLog$1(a[0])/mathLog$1(l),a[1]=mathLog$1(a[1])/mathLog$1(l),scaleProto.unionExtent.call(this,a)},n.prototype.unionExtentFromData=function(a,l){this.unionExtent(a.getApproximateExtent(l))},n.prototype.calcNiceTicks=function(a){a=a||10;var l=this._extent,u=l[1]-l[0];if(!(u===1/0||u<=0)){var c=quantity(u),p=a/u*c;for(p<=.5&&(c*=10);!isNaN(c)&&Math.abs(c)<1&&Math.abs(c)>0;)c*=10;var d=[round$3(mathCeil$1(l[0]/c)*c),round$3(mathFloor$1(l[1]/c)*c)];this._interval=c,this._niceExtent=d}},n.prototype.calcNiceExtent=function(a){intervalScaleProto.calcNiceExtent.call(this,a),this._fixMin=a.fixMin,this._fixMax=a.fixMax},n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return a=mathLog$1(a)/mathLog$1(this.base),contain$1(a,this._extent)},n.prototype.normalize=function(a){return a=mathLog$1(a)/mathLog$1(this.base),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=scale(a,this._extent),mathPow$1(this.base,a)},n.type="log",n}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(t,n){return roundingErrorFix(t,getPrecision(n))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function t(n,a,l){this._prepareParams(n,a,l)}return t.prototype._prepareParams=function(n,a,l){l[1]<l[0]&&(l=[NaN,NaN]),this._dataMin=l[0],this._dataMax=l[1];var u=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&a.getNeedCrossZero&&a.getNeedCrossZero();var c=a.get("min",!0);c==null&&(c=a.get("startValue",!0));var p=this._modelMinRaw=c;isFunction$1(p)?this._modelMinNum=parseAxisModelMinMax(n,p({min:l[0],max:l[1]})):p!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,p));var d=this._modelMaxRaw=a.get("max",!0);if(isFunction$1(d)?this._modelMaxNum=parseAxisModelMinMax(n,d({min:l[0],max:l[1]})):d!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,d)),u)this._axisDataLen=a.getCategories().length;else{var Q=a.get("boundaryGap"),Ct=isArray$1(Q)?Q:[Q||0,Q||0];typeof Ct[0]=="boolean"||typeof Ct[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(Ct[0],1),parsePercent$1(Ct[1],1)]}},t.prototype.calculate=function(){var n=this._isOrdinal,a=this._dataMin,l=this._dataMax,u=this._axisDataLen,c=this._boundaryGapInner,p=n?null:l-a||Math.abs(a),d=this._modelMinRaw==="dataMin"?a:this._modelMinNum,Q=this._modelMaxRaw==="dataMax"?l:this._modelMaxNum,Ct=d!=null,ar=Q!=null;d==null&&(d=n?u?0:NaN:a-c[0]*p),Q==null&&(Q=n?u?u-1:NaN:l+c[1]*p),(d==null||!isFinite(d))&&(d=NaN),(Q==null||!isFinite(Q))&&(Q=NaN);var en=eqNaN(d)||eqNaN(Q)||n&&!u;this._needCrossZero&&(d>0&&Q>0&&!Ct&&(d=0),d<0&&Q<0&&!ar&&(Q=0));var tn=this._determinedMin,on=this._determinedMax;return tn!=null&&(d=tn,Ct=!0),on!=null&&(Q=on,ar=!0),{min:d,max:Q,minFixed:Ct,maxFixed:ar,isBlank:en}},t.prototype.modifyDataMinMax=function(n,a){this[DATA_MIN_MAX_ATTR[n]]=a},t.prototype.setDeterminedMinMax=function(n,a){var l=DETERMINED_MIN_MAX_ATTR[n];this[l]=a},t.prototype.freeze=function(){this.frozen=!0},t}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(t,n,a){var l=t.rawExtentInfo;return l||(l=new ScaleRawExtentInfo(t,n,a),t.rawExtentInfo=l,l)}function parseAxisModelMinMax(t,n){return n==null?null:eqNaN(n)?NaN:t.parse(n)}function getScaleExtent(t,n){var a=t.type,l=ensureScaleRawExtentInfo(t,n,t.getExtent()).calculate();t.setBlank(l.isBlank);var u=l.min,c=l.max,p=n.ecModel;if(p&&a==="time"){var d=prepareLayoutBarSeries("bar",p),Q=!1;if(each$f(d,function(en){Q=Q||en.getBaseAxis()===n.axis}),Q){var Ct=makeColumnLayout(d),ar=adjustScaleForOverflow(u,c,n,Ct);u=ar.min,c=ar.max}}return{extent:[u,c],fixMin:l.minFixed,fixMax:l.maxFixed}}function adjustScaleForOverflow(t,n,a,l){var u=a.axis.getExtent(),c=Math.abs(u[1]-u[0]),p=retrieveColumnLayout(l,a.axis);if(p===void 0)return{min:t,max:n};var d=1/0;each$f(p,function(on){d=Math.min(on.offset,d)});var Q=-1/0;each$f(p,function(on){Q=Math.max(on.offset+on.width,Q)}),d=Math.abs(d),Q=Math.abs(Q);var Ct=d+Q,ar=n-t,en=1-(d+Q)/c,tn=ar/en-ar;return n+=tn*(Q/Ct),t-=tn*(d/Ct),{min:t,max:n}}function niceScaleExtent(t,n){var a=n,l=getScaleExtent(t,a),u=l.extent,c=a.get("splitNumber");t instanceof LogScale&&(t.base=a.get("logBase"));var p=t.type,d=a.get("interval"),Q=p==="interval"||p==="time";t.setExtent(u[0],u[1]),t.calcNiceExtent({splitNumber:c,fixMin:l.fixMin,fixMax:l.fixMax,minInterval:Q?a.get("minInterval"):null,maxInterval:Q?a.get("maxInterval"):null}),d!=null&&t.setInterval&&t.setInterval(d)}function createScaleByModel$1(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Scale.getClass(n)||IntervalScale)}}function ifAxisCrossZero(t){var n=t.scale.getExtent(),a=n[0],l=n[1];return!(a>0&&l>0||a<0&&l<0)}function makeLabelFormatter(t){var n=t.getLabelModel().get("formatter"),a=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(l){return function(u,c){return t.scale.getFormattedLabel(u,c,l)}}(n):isString$1(n)?function(l){return function(u){var c=t.scale.getLabel(u),p=l.replace("{value}",c??"");return p}}(n):isFunction$1(n)?function(l){return function(u,c){return a!=null&&(c=u.value-a),l(getAxisRawValue(t,u),c,u.level!=null?{level:u.level}:null)}}(n):function(l){return t.scale.getLabel(l)}}function getAxisRawValue(t,n){return t.type==="category"?t.scale.getLabel(n):n.value}function estimateLabelUnionRect(t){var n=t.model,a=t.scale;if(!(!n.get(["axisLabel","show"])||a.isBlank())){var l,u,c=a.getExtent();a instanceof OrdinalScale?u=a.count():(l=a.getTicks(),u=l.length);var p=t.getLabelModel(),d=makeLabelFormatter(t),Q,Ct=1;u>40&&(Ct=Math.ceil(u/40));for(var ar=0;ar<u;ar+=Ct){var en=l?l[ar]:{value:c[0]+ar},tn=d(en,ar),on=p.getTextRect(tn),cn=rotateTextRect(on,p.get("rotate")||0);Q?Q.union(cn):Q=cn}return Q}}function rotateTextRect(t,n){var a=n*Math.PI/180,l=t.width,u=t.height,c=l*Math.abs(Math.cos(a))+Math.abs(u*Math.sin(a)),p=l*Math.abs(Math.sin(a))+Math.abs(u*Math.cos(a)),d=new BoundingRect(t.x,t.y,c,p);return d}function getOptionCategoryInterval(t){var n=t.get("interval");return n??"auto"}function shouldShowAllLabels(t){return t.type==="category"&&getOptionCategoryInterval(t.getLabelModel())===0}function getDataDimensionsOnAxis(t,n){var a={};return each$f(t.mapDimensionsAll(n),function(l){a[getStackedDimension(t,l)]=!0}),keys(a)}function unionAxisExtentFromData(t,n,a){n&&each$f(getDataDimensionsOnAxis(n,a),function(l){var u=n.getApproximateExtent(l);u[0]<t[0]&&(t[0]=u[0]),u[1]>t[1]&&(t[1]=u[1])})}var AxisModelCommonMixin=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},t.prototype.getCoordSysModel=function(){},t}();function createList$2(t){return createSeriesData(null,t)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(t,n){var a=n;n instanceof Model||(a=new Model(n));var l=createScaleByModel$1(a);return l.setExtent(t[0],t[1]),niceScaleExtent(l,a),l}function mixinAxisModelCommonMethods(t){mixin(t,AxisModelCommonMixin)}function createTextStyle(t,n){return n=n||{},createTextStyle$1(t,null,null,n.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(t,n){return Math.abs(t-n)<EPSILON}function contain(t,n,a){var l=0,u=t[0];if(!u)return!1;for(var c=1;c<t.length;c++){var p=t[c];l+=windingLine(u[0],u[1],p[0],p[1],n,a),u=p}var d=t[0];return(!isAroundEqual(u[0],d[0])||!isAroundEqual(u[1],d[1]))&&(l+=windingLine(u[0],u[1],d[0],d[1],n,a)),l!==0}var TMP_TRANSFORM=[];function transformPoints(t,n){for(var a=0;a<t.length;a++)applyTransform$1(t[a],t[a],n)}function updateBBoxFromPoints(t,n,a,l){for(var u=0;u<t.length;u++){var c=t[u];l&&(c=l.project(c)),c&&isFinite(c[0])&&isFinite(c[1])&&(min$1(n,n,c),max$1(a,a,c))}}function centroid$1(t){for(var n=0,a=0,l=0,u=t.length,c=t[u-1][0],p=t[u-1][1],d=0;d<u;d++){var Q=t[d][0],Ct=t[d][1],ar=c*Ct-Q*p;n+=ar,a+=(c+Q)*ar,l+=(p+Ct)*ar,c=Q,p=Ct}return n?[a/n/3,l/n/3,n]:[t[0][0]||0,t[0][1]||0]}var Region=function(){function t(n){this.name=n}return t.prototype.setCenter=function(n){this._center=n},t.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},t}(),GeoJSONPolygonGeometry=function(){function t(n,a){this.type="polygon",this.exterior=n,this.interiors=a}return t}(),GeoJSONLineStringGeometry=function(){function t(n){this.type="linestring",this.points=n}return t}(),GeoJSONRegion=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this,a)||this;return c.type="geoJSON",c.geometries=l,c._center=u&&[u[0],u[1]],c}return n.prototype.calcCenter=function(){for(var a=this.geometries,l,u=0,c=0;c<a.length;c++){var p=a[c],d=p.exterior,Q=d&&d.length;Q>u&&(l=p,u=Q)}if(l)return centroid$1(l.exterior);var Ct=this.getBoundingRect();return[Ct.x+Ct.width/2,Ct.y+Ct.height/2]},n.prototype.getBoundingRect=function(a){var l=this._rect;if(l&&!a)return l;var u=[1/0,1/0],c=[-1/0,-1/0],p=this.geometries;return each$f(p,function(d){d.type==="polygon"?updateBBoxFromPoints(d.exterior,u,c,a):each$f(d.points,function(Q){updateBBoxFromPoints(Q,u,c,a)})}),isFinite(u[0])&&isFinite(u[1])&&isFinite(c[0])&&isFinite(c[1])||(u[0]=u[1]=c[0]=c[1]=0),l=new BoundingRect(u[0],u[1],c[0]-u[0],c[1]-u[1]),a||(this._rect=l),l},n.prototype.contain=function(a){var l=this.getBoundingRect(),u=this.geometries;if(!l.contain(a[0],a[1]))return!1;e:for(var c=0,p=u.length;c<p;c++){var d=u[c];if(d.type==="polygon"){var Q=d.exterior,Ct=d.interiors;if(contain(Q,a[0],a[1])){for(var ar=0;ar<(Ct?Ct.length:0);ar++)if(contain(Ct[ar],a[0],a[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(a,l,u,c){var p=this.getBoundingRect(),d=p.width/p.height;u?c||(c=u/d):u=d*c;for(var Q=new BoundingRect(a,l,u,c),Ct=p.calculateTransform(Q),ar=this.geometries,en=0;en<ar.length;en++){var tn=ar[en];tn.type==="polygon"?(transformPoints(tn.exterior,Ct),each$f(tn.interiors,function(on){transformPoints(on,Ct)})):each$f(tn.points,function(on){transformPoints(on,Ct)})}p=this._rect,p.copy(Q),this._center=[p.x+p.width/2,p.y+p.height/2]},n.prototype.cloneShallow=function(a){a==null&&(a=this.name);var l=new n(a,this.geometries,this._center);return l._rect=this._rect,l.transformTo=null,l},n}(Region),GeoSVGRegion=function(t){__extends(n,t);function n(a,l){var u=t.call(this,a)||this;return u.type="geoSVG",u._elOnlyForCalculate=l,u}return n.prototype.calcCenter=function(){for(var a=this._elOnlyForCalculate,l=a.getBoundingRect(),u=[l.x+l.width/2,l.y+l.height/2],c=identity(TMP_TRANSFORM),p=a;p&&!p.isGeoSVGGraphicRoot;)mul(c,p.getLocalTransform(),c),p=p.parent;return invert(c,c),applyTransform$1(u,u,c),u},n}(Region);function decode(t){if(!t.UTF8Encoding)return t;var n=t,a=n.UTF8Scale;a==null&&(a=1024);var l=n.features;return each$f(l,function(u){var c=u.geometry,p=c.encodeOffsets,d=c.coordinates;if(p)switch(c.type){case"LineString":c.coordinates=decodeRing(d,p,a);break;case"Polygon":decodeRings(d,p,a);break;case"MultiLineString":decodeRings(d,p,a);break;case"MultiPolygon":each$f(d,function(Q,Ct){return decodeRings(Q,p[Ct],a)})}}),n.UTF8Encoding=!1,n}function decodeRings(t,n,a){for(var l=0;l<t.length;l++)t[l]=decodeRing(t[l],n[l],a)}function decodeRing(t,n,a){for(var l=[],u=n[0],c=n[1],p=0;p<t.length;p+=2){var d=t.charCodeAt(p)-64,Q=t.charCodeAt(p+1)-64;d=d>>1^-(d&1),Q=Q>>1^-(Q&1),d+=u,Q+=c,u=d,c=Q,l.push([d/a,Q/a])}return l}function parseGeoJSON(t,n){return t=decode(t),map$1(filter(t.features,function(a){return a.geometry&&a.properties&&a.geometry.coordinates.length>0}),function(a){var l=a.properties,u=a.geometry,c=[];switch(u.type){case"Polygon":var p=u.coordinates;c.push(new GeoJSONPolygonGeometry(p[0],p.slice(1)));break;case"MultiPolygon":each$f(u.coordinates,function(Q){Q[0]&&c.push(new GeoJSONPolygonGeometry(Q[0],Q.slice(1)))});break;case"LineString":c.push(new GeoJSONLineStringGeometry([u.coordinates]));break;case"MultiLineString":c.push(new GeoJSONLineStringGeometry(u.coordinates))}var d=new GeoJSONRegion(l[n||"name"],c,l.cp);return d.properties=l,d})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$1,isObject:isObject$3,isString:isString$1,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(t,n){var a=map$1(n,function(l){return t.scale.parse(l)});return t.type==="time"&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}function createAxisLabels(t){var n=t.getLabelModel().get("customValues");if(n){var a=makeLabelFormatter(t),l=t.scale.getExtent(),u=tickValuesToNumbers(t,n),c=filter(u,function(p){return p>=l[0]&&p<=l[1]});return{labels:map$1(c,function(p){var d={value:p};return{formattedLabel:a(d),rawLabel:t.scale.getLabel(d),tickValue:p}})}}return t.type==="category"?makeCategoryLabels(t):makeRealNumberLabels(t)}function createAxisTicks(t,n){var a=t.getTickModel().get("customValues");if(a){var l=t.scale.getExtent(),u=tickValuesToNumbers(t,a);return{ticks:filter(u,function(c){return c>=l[0]&&c<=l[1]})}}return t.type==="category"?makeCategoryTicks(t,n):{ticks:map$1(t.scale.getTicks(),function(c){return c.value})}}function makeCategoryLabels(t){var n=t.getLabelModel(),a=makeCategoryLabelsActually(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}function makeCategoryLabelsActually(t,n){var a=getListCache(t,"labels"),l=getOptionCategoryInterval(n),u=listCacheGet(a,l);if(u)return u;var c,p;return isFunction$1(l)?c=makeLabelsByCustomizedCategoryInterval(t,l):(p=l==="auto"?makeAutoCategoryInterval(t):l,c=makeLabelsByNumericCategoryInterval(t,p)),listCacheSet(a,l,{labels:c,labelCategoryInterval:p})}function makeCategoryTicks(t,n){var a=getListCache(t,"ticks"),l=getOptionCategoryInterval(n),u=listCacheGet(a,l);if(u)return u;var c,p;if((!n.get("show")||t.scale.isBlank())&&(c=[]),isFunction$1(l))c=makeLabelsByCustomizedCategoryInterval(t,l,!0);else if(l==="auto"){var d=makeCategoryLabelsActually(t,t.getLabelModel());p=d.labelCategoryInterval,c=map$1(d.labels,function(Q){return Q.tickValue})}else p=l,c=makeLabelsByNumericCategoryInterval(t,p,!0);return listCacheSet(a,l,{ticks:c,tickCategoryInterval:p})}function makeRealNumberLabels(t){var n=t.scale.getTicks(),a=makeLabelFormatter(t);return{labels:map$1(n,function(l,u){return{level:l.level,formattedLabel:a(l,u),rawLabel:t.scale.getLabel(l),tickValue:l.value}})}}function getListCache(t,n){return inner$g(t)[n]||(inner$g(t)[n]=[])}function listCacheGet(t,n){for(var a=0;a<t.length;a++)if(t[a].key===n)return t[a].value}function listCacheSet(t,n,a){return t.push({key:n,value:a}),a}function makeAutoCategoryInterval(t){var n=inner$g(t).autoInterval;return n??(inner$g(t).autoInterval=t.calculateCategoryInterval())}function calculateCategoryInterval(t){var n=fetchAutoCategoryIntervalCalculationParams(t),a=makeLabelFormatter(t),l=(n.axisRotate-n.labelRotate)/180*Math.PI,u=t.scale,c=u.getExtent(),p=u.count();if(c[1]-c[0]<1)return 0;var d=1;p>40&&(d=Math.max(1,Math.floor(p/40)));for(var Q=c[0],Ct=t.dataToCoord(Q+1)-t.dataToCoord(Q),ar=Math.abs(Ct*Math.cos(l)),en=Math.abs(Ct*Math.sin(l)),tn=0,on=0;Q<=c[1];Q+=d){var cn=0,gn=0,Cn=getBoundingRect(a({value:Q}),n.font,"center","top");cn=Cn.width*1.3,gn=Cn.height*1.3,tn=Math.max(tn,cn,7),on=Math.max(on,gn,7)}var ex=tn/ar,ix=on/en;isNaN(ex)&&(ex=1/0),isNaN(ix)&&(ix=1/0);var ax=Math.max(0,Math.floor(Math.min(ex,ix))),ox=inner$g(t.model),lx=t.getExtent(),cx=ox.lastAutoInterval,dx=ox.lastTickCount;return cx!=null&&dx!=null&&Math.abs(cx-ax)<=1&&Math.abs(dx-p)<=1&&cx>ax&&ox.axisExtent0===lx[0]&&ox.axisExtent1===lx[1]?ax=cx:(ox.lastTickCount=p,ox.lastAutoInterval=ax,ox.axisExtent0=lx[0],ox.axisExtent1=lx[1]),ax}function fetchAutoCategoryIntervalCalculationParams(t){var n=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(t,n,a){var l=makeLabelFormatter(t),u=t.scale,c=u.getExtent(),p=t.getLabelModel(),d=[],Q=Math.max((n||0)+1,1),Ct=c[0],ar=u.count();Ct!==0&&Q>1&&ar/Q>2&&(Ct=Math.round(Math.ceil(Ct/Q)*Q));var en=shouldShowAllLabels(t),tn=p.get("showMinLabel")||en,on=p.get("showMaxLabel")||en;tn&&Ct!==c[0]&&gn(c[0]);for(var cn=Ct;cn<=c[1];cn+=Q)gn(cn);on&&cn-Q!==c[1]&&gn(c[1]);function gn(Cn){var ex={value:Cn};d.push(a?Cn:{formattedLabel:l(ex),rawLabel:u.getLabel(ex),tickValue:Cn})}return d}function makeLabelsByCustomizedCategoryInterval(t,n,a){var l=t.scale,u=makeLabelFormatter(t),c=[];return each$f(l.getTicks(),function(p){var d=l.getLabel(p),Q=p.value;n(p.value,d)&&c.push(a?Q:{formattedLabel:u(p),rawLabel:d,tickValue:Q})}),c}var NORMALIZED_EXTENT=[0,1],Axis=function(){function t(n,a,l){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=a,this._extent=l||[0,0]}return t.prototype.contain=function(n){var a=this._extent,l=Math.min(a[0],a[1]),u=Math.max(a[0],a[1]);return n>=l&&n<=u},t.prototype.containData=function(n){return this.scale.contain(n)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(n,a){var l=this._extent;l[0]=n,l[1]=a},t.prototype.dataToCoord=function(n,a){var l=this._extent,u=this.scale;return n=u.normalize(n),this.onBand&&u.type==="ordinal"&&(l=l.slice(),fixExtentWithBands(l,u.count())),linearMap$2(n,NORMALIZED_EXTENT,l,a)},t.prototype.coordToData=function(n,a){var l=this._extent,u=this.scale;this.onBand&&u.type==="ordinal"&&(l=l.slice(),fixExtentWithBands(l,u.count()));var c=linearMap$2(n,l,NORMALIZED_EXTENT,a);return this.scale.scale(c)},t.prototype.pointToData=function(n,a){},t.prototype.getTicksCoords=function(n){n=n||{};var a=n.tickModel||this.getTickModel(),l=createAxisTicks(this,a),u=l.ticks,c=map$1(u,function(d){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(d):d),tickValue:d}},this),p=a.get("alignWithLabel");return fixOnBandTicksCoords(this,c,p,n.clamp),c},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),a=n.get("splitNumber");a>0&&a<100||(a=5);var l=this.scale.getMinorTicks(a),u=map$1(l,function(c){return map$1(c,function(p){return{coord:this.dataToCoord(p),tickValue:p}},this)},this);return u},t.prototype.getViewLabels=function(){return createAxisLabels(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var n=this._extent,a=this.scale.getExtent(),l=a[1]-a[0]+(this.onBand?1:0);l===0&&(l=1);var u=Math.abs(n[1]-n[0]);return Math.abs(u)/l},t.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},t}();function fixExtentWithBands(t,n){var a=t[1]-t[0],l=n,u=a/l/2;t[0]+=u,t[1]-=u}function fixOnBandTicksCoords(t,n,a,l){var u=n.length;if(!t.onBand||a||!u)return;var c=t.getExtent(),p,d;if(u===1)n[0].coord=c[0],p=n[1]={coord:c[1],tickValue:n[0].tickValue};else{var Q=n[u-1].tickValue-n[0].tickValue,Ct=(n[u-1].coord-n[0].coord)/Q;each$f(n,function(on){on.coord-=Ct/2});var ar=t.scale.getExtent();d=1+ar[1]-n[u-1].tickValue,p={coord:n[u-1].coord+Ct*d,tickValue:ar[1]+1},n.push(p)}var en=c[0]>c[1];tn(n[0].coord,c[0])&&(l?n[0].coord=c[0]:n.shift()),l&&tn(c[0],n[0].coord)&&n.unshift({coord:c[0]}),tn(c[1],p.coord)&&(l?p.coord=c[1]:n.pop()),l&&tn(p.coord,c[1])&&n.push({coord:c[1]});function tn(on,cn){return on=round$3(on),cn=round$3(cn),en?on>cn:on<cn}}function extendComponentModel(t){var n=ComponentModel.extend(t);return ComponentModel.registerClass(n),n}function extendComponentView(t){var n=ComponentView.extend(t);return ComponentView.registerClass(n),n}function extendSeriesModel(t){var n=SeriesModel.extend(t);return SeriesModel.registerClass(n),n}function extendChartView(t){var n=ChartView.extend(t);return ChartView.registerClass(n),n}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(t,n,a,l,u){var c=a.width,p=a.height;switch(t){case"top":l.set(a.x+c/2,a.y-n),u.set(0,-1);break;case"bottom":l.set(a.x+c/2,a.y+p+n),u.set(0,1);break;case"left":l.set(a.x-n,a.y+p/2),u.set(-1,0);break;case"right":l.set(a.x+c+n,a.y+p/2),u.set(1,0);break}}function projectPointToArc(t,n,a,l,u,c,p,d,Q){p-=t,d-=n;var Ct=Math.sqrt(p*p+d*d);p/=Ct,d/=Ct;var ar=p*a+t,en=d*a+n;if(Math.abs(l-u)%PI2$2<1e-4)return Q[0]=ar,Q[1]=en,Ct-a;if(c){var tn=l;l=normalizeRadian(u),u=normalizeRadian(tn)}else l=normalizeRadian(l),u=normalizeRadian(u);l>u&&(u+=PI2$2);var on=Math.atan2(d,p);if(on<0&&(on+=PI2$2),on>=l&&on<=u||on+PI2$2>=l&&on+PI2$2<=u)return Q[0]=ar,Q[1]=en,Ct-a;var cn=a*Math.cos(l)+t,gn=a*Math.sin(l)+n,Cn=a*Math.cos(u)+t,ex=a*Math.sin(u)+n,ix=(cn-p)*(cn-p)+(gn-d)*(gn-d),ax=(Cn-p)*(Cn-p)+(ex-d)*(ex-d);return ix<ax?(Q[0]=cn,Q[1]=gn,Math.sqrt(ix)):(Q[0]=Cn,Q[1]=ex,Math.sqrt(ax))}function projectPointToLine(t,n,a,l,u,c,p,d){var Q=u-t,Ct=c-n,ar=a-t,en=l-n,tn=Math.sqrt(ar*ar+en*en);ar/=tn,en/=tn;var on=Q*ar+Ct*en,cn=on/tn;d&&(cn=Math.min(Math.max(cn,0),1)),cn*=tn;var gn=p[0]=t+cn*ar,Cn=p[1]=n+cn*en;return Math.sqrt((gn-u)*(gn-u)+(Cn-c)*(Cn-c))}function projectPointToRect(t,n,a,l,u,c,p){a<0&&(t=t+a,a=-a),l<0&&(n=n+l,l=-l);var d=t+a,Q=n+l,Ct=p[0]=Math.min(Math.max(u,t),d),ar=p[1]=Math.min(Math.max(c,n),Q);return Math.sqrt((Ct-u)*(Ct-u)+(ar-c)*(ar-c))}var tmpPt=[];function nearestPointOnRect(t,n,a){var l=projectPointToRect(n.x,n.y,n.width,n.height,t.x,t.y,tmpPt);return a.set(tmpPt[0],tmpPt[1]),l}function nearestPointOnPath(t,n,a){for(var l=0,u=0,c=0,p=0,d,Q,Ct=1/0,ar=n.data,en=t.x,tn=t.y,on=0;on<ar.length;){var cn=ar[on++];on===1&&(l=ar[on],u=ar[on+1],c=l,p=u);var gn=Ct;switch(cn){case CMD$1.M:c=ar[on++],p=ar[on++],l=c,u=p;break;case CMD$1.L:gn=projectPointToLine(l,u,ar[on],ar[on+1],en,tn,tmpPt,!0),l=ar[on++],u=ar[on++];break;case CMD$1.C:gn=cubicProjectPoint(l,u,ar[on++],ar[on++],ar[on++],ar[on++],ar[on],ar[on+1],en,tn,tmpPt),l=ar[on++],u=ar[on++];break;case CMD$1.Q:gn=quadraticProjectPoint(l,u,ar[on++],ar[on++],ar[on],ar[on+1],en,tn,tmpPt),l=ar[on++],u=ar[on++];break;case CMD$1.A:var Cn=ar[on++],ex=ar[on++],ix=ar[on++],ax=ar[on++],ox=ar[on++],lx=ar[on++];on+=1;var cx=!!(1-ar[on++]);d=Math.cos(ox)*ix+Cn,Q=Math.sin(ox)*ax+ex,on<=1&&(c=d,p=Q);var dx=(en-Cn)*ax/ix+Cn;gn=projectPointToArc(Cn,ex,ax,ox,ox+lx,cx,dx,tn,tmpPt),l=Math.cos(ox+lx)*ix+Cn,u=Math.sin(ox+lx)*ax+ex;break;case CMD$1.R:c=l=ar[on++],p=u=ar[on++];var hx=ar[on++],fx=ar[on++];gn=projectPointToRect(c,p,hx,fx,en,tn,tmpPt);break;case CMD$1.Z:gn=projectPointToLine(l,u,c,p,en,tn,tmpPt,!0),l=c,u=p;break}gn<Ct&&(Ct=gn,a.set(tmpPt[0],tmpPt[1]))}return Ct}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(t,n){if(t){var a=t.getTextGuideLine(),l=t.getTextContent();if(l&&a){var u=t.textGuideLineConfig||{},c=[[0,0],[0,0],[0,0]],p=u.candidates||DEFAULT_SEARCH_SPACE,d=l.getBoundingRect().clone();d.applyTransform(l.getComputedTransform());var Q=1/0,Ct=u.anchor,ar=t.getComputedTransform(),en=ar&&invert([],ar),tn=n.get("length2")||0;Ct&&pt2.copy(Ct);for(var on=0;on<p.length;on++){var cn=p[on];getCandidateAnchor(cn,0,d,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,tn),pt1.transform(en);var gn=t.getBoundingRect(),Cn=Ct?Ct.distance(pt1):t instanceof Path?nearestPointOnPath(pt1,t.path,pt2):nearestPointOnRect(pt1,gn,pt2);Cn<Q&&(Q=Cn,pt1.transform(ar),pt2.transform(ar),pt2.toArray(c[0]),pt1.toArray(c[1]),pt0.toArray(c[2]))}limitTurnAngle(c,n.get("minTurnAngle")),a.setShape({points:c})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(t,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var a=dir.len(),l=dir2.len();if(!(a<.001||l<.001)){dir.scale(1/a),dir2.scale(1/l);var u=dir.dot(dir2),c=Math.cos(n);if(c<u){var p=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,p/Math.tan(Math.PI-n));var d=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(d))return;d<0?Point.copy(tmpProjPoint,pt1):d>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(t[1])}}}}function limitSurfaceAngle(t,n,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var l=dir.len(),u=dir2.len();if(!(l<.001||u<.001)){dir.scale(1/l),dir2.scale(1/u);var c=dir.dot(n),p=Math.cos(a);if(c<p){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var Q=Math.PI/2,Ct=Math.acos(dir2.dot(n)),ar=Q+Ct-a;if(ar>=Q)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI/2-ar));var en=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(en))return;en<0?Point.copy(tmpProjPoint,pt1):en>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(t[1])}}}}function setLabelLineState(t,n,a,l){var u=a==="normal",c=u?t:t.ensureState(a);c.ignore=n;var p=l.get("smooth");p&&p===!0&&(p=.3),c.shape=c.shape||{},p>0&&(c.shape.smooth=p);var d=l.getModel("lineStyle").getLineStyle();u?t.useStyle(d):c.style=d}function buildLabelLinePath(t,n){var a=n.smooth,l=n.points;if(l)if(t.moveTo(l[0][0],l[0][1]),a>0&&l.length>=3){var u=dist$1(l[0],l[1]),c=dist$1(l[1],l[2]);if(!u||!c){t.lineTo(l[1][0],l[1][1]),t.lineTo(l[2][0],l[2][1]);return}var p=Math.min(u,c)*a,d=lerp$1([],l[1],l[0],p/u),Q=lerp$1([],l[1],l[2],p/c),Ct=lerp$1([],d,Q,.5);t.bezierCurveTo(d[0],d[1],d[0],d[1],Ct[0],Ct[1]),t.bezierCurveTo(Q[0],Q[1],Q[0],Q[1],l[2][0],l[2][1])}else for(var ar=1;ar<l.length;ar++)t.lineTo(l[ar][0],l[ar][1])}function setLabelLineStyle(t,n,a){var l=t.getTextGuideLine(),u=t.getTextContent();if(!u){l&&t.removeTextGuideLine();return}for(var c=n.normal,p=c.get("show"),d=u.ignore,Q=0;Q<DISPLAY_STATES.length;Q++){var Ct=DISPLAY_STATES[Q],ar=n[Ct],en=Ct==="normal";if(ar){var tn=ar.get("show"),on=en?d:retrieve2(u.states[Ct]&&u.states[Ct].ignore,d);if(on||!retrieve2(tn,p)){var cn=en?l:l&&l.states[Ct];cn&&(cn.ignore=!0),l&&setLabelLineState(l,!0,Ct,ar);continue}l||(l=new Polyline$1,t.setTextGuideLine(l),!en&&(d||!p)&&setLabelLineState(l,!0,"normal",n.normal),t.stateProxy&&(l.stateProxy=t.stateProxy)),setLabelLineState(l,!1,Ct,ar)}}if(l){defaults(l.style,a),l.style.fill=null;var gn=c.get("showAbove"),Cn=t.textGuideLineConfig=t.textGuideLineConfig||{};Cn.showAbove=gn||!1,l.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(t,n){n=n||"labelLine";for(var a={normal:t.getModel(n)},l=0;l<SPECIAL_STATES.length;l++){var u=SPECIAL_STATES[l];a[u]=t.getModel([u,n])}return a}function prepareLayoutList(t){for(var n=[],a=0;a<t.length;a++){var l=t[a];if(!l.defaultAttr.ignore){var u=l.label,c=u.getComputedTransform(),p=u.getBoundingRect(),d=!c||c[1]<1e-5&&c[2]<1e-5,Q=u.style.margin||0,Ct=p.clone();Ct.applyTransform(c),Ct.x-=Q/2,Ct.y-=Q/2,Ct.width+=Q,Ct.height+=Q;var ar=d?new OrientedBoundingRect(p,c):null;n.push({label:u,labelLine:l.labelLine,rect:Ct,localRect:p,obb:ar,priority:l.priority,defaultAttr:l.defaultAttr,layoutOption:l.computedLayoutOption,axisAligned:d,transform:c})}}return n}function shiftLayout(t,n,a,l,u,c){var p=t.length;if(p<2)return;t.sort(function(cx,dx){return cx.rect[n]-dx.rect[n]});for(var d=0,Q,Ct=!1,ar=0;ar<p;ar++){var en=t[ar],tn=en.rect;Q=tn[n]-d,Q<0&&(tn[n]-=Q,en.label[n]-=Q,Ct=!0),d=tn[n]+tn[a]}var on=t[0],cn=t[p-1],gn,Cn;ex(),gn<0&&ox(-gn,.8),Cn<0&&ox(Cn,.8),ex(),ix(gn,Cn,1),ix(Cn,gn,-1),ex(),gn<0&&lx(-gn),Cn<0&&lx(Cn);function ex(){gn=on.rect[n]-l,Cn=u-cn.rect[n]-cn.rect[a]}function ix(cx,dx,hx){if(cx<0){var fx=Math.min(dx,-cx);if(fx>0){ax(fx*hx,0,p);var ux=fx+cx;ux<0&&ox(-ux*hx,1)}else ox(-cx*hx,1)}}function ax(cx,dx,hx){cx!==0&&(Ct=!0);for(var fx=dx;fx<hx;fx++){var ux=t[fx],gx=ux.rect;gx[n]+=cx,ux.label[n]+=cx}}function ox(cx,dx){for(var hx=[],fx=0,ux=1;ux<p;ux++){var gx=t[ux-1].rect,yx=Math.max(t[ux].rect[n]-gx[n]-gx[a],0);hx.push(yx),fx+=yx}if(fx){var _x=Math.min(Math.abs(cx)/fx,dx);if(cx>0)for(var ux=0;ux<p-1;ux++){var vx=hx[ux]*_x;ax(vx,0,ux+1)}else for(var ux=p-1;ux>0;ux--){var vx=hx[ux-1]*_x;ax(-vx,ux,p)}}}function lx(cx){var dx=cx<0?-1:1;cx=Math.abs(cx);for(var hx=Math.ceil(cx/(p-1)),fx=0;fx<p-1;fx++)if(dx>0?ax(hx,0,fx+1):ax(-hx,p-fx-1,p),cx-=hx,cx<=0)return}return Ct}function shiftLayoutOnX(t,n,a,l){return shiftLayout(t,"x","width",n,a)}function shiftLayoutOnY(t,n,a,l){return shiftLayout(t,"y","height",n,a)}function hideOverlap(t){var n=[];t.sort(function(gn,Cn){return Cn.priority-gn.priority});var a=new BoundingRect(0,0,0,0);function l(gn){if(!gn.ignore){var Cn=gn.ensureState("emphasis");Cn.ignore==null&&(Cn.ignore=!1)}gn.ignore=!0}for(var u=0;u<t.length;u++){var c=t[u],p=c.axisAligned,d=c.localRect,Q=c.transform,Ct=c.label,ar=c.labelLine;a.copy(c.rect),a.width-=.1,a.height-=.1,a.x+=.05,a.y+=.05;for(var en=c.obb,tn=!1,on=0;on<n.length;on++){var cn=n[on];if(a.intersect(cn.rect)){if(p&&cn.axisAligned){tn=!0;break}if(cn.obb||(cn.obb=new OrientedBoundingRect(cn.localRect,cn.transform)),en||(en=new OrientedBoundingRect(d,Q)),en.intersect(cn.obb)){tn=!0;break}}}tn?(l(Ct),ar&&l(ar)):(Ct.attr("ignore",c.defaultAttr.ignore),ar&&ar.attr("ignore",c.defaultAttr.labelGuideIgnore),n.push(c))}}function cloneArr(t){if(t){for(var n=[],a=0;a<t.length;a++)n.push(t[a].slice());return n}}function prepareLayoutCallbackParams(t,n){var a=t.label,l=n&&n.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:cloneArr(l&&l.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(t,n,a){for(var l=0;l<a.length;l++){var u=a[l];n[u]!=null&&(t[u]=n[u])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(n,a,l,u,c){var p=u.style,d=u.__hostTarget,Q=d.textConfig||{},Ct=u.getComputedTransform(),ar=u.getBoundingRect().plain();BoundingRect.applyTransform(ar,ar,Ct),Ct?dummyTransformable.setLocalTransform(Ct):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var en=u.__hostTarget,tn;if(en){tn=en.getBoundingRect().plain();var on=en.getComputedTransform();BoundingRect.applyTransform(tn,tn,on)}var cn=tn&&en.getTextGuideLine();this._labelList.push({label:u,labelLine:cn,seriesModel:l,dataIndex:n,dataType:a,layoutOption:c,computedLayoutOption:null,rect:ar,hostRect:tn,priority:tn?tn.width*tn.height:0,defaultAttr:{ignore:u.ignore,labelGuideIgnore:cn&&cn.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:p.x,y:p.y,align:p.align,verticalAlign:p.verticalAlign,width:p.width,height:p.height,fontSize:p.fontSize},cursor:u.cursor,attachedPos:Q.position,attachedRot:Q.rotation}})},t.prototype.addLabelsOfSeries=function(n){var a=this;this._chartViewList.push(n);var l=n.__model,u=l.get("labelLayout");(isFunction$1(u)||keys(u).length)&&n.group.traverse(function(c){if(c.ignore)return!0;var p=c.getTextContent(),d=getECData(c);p&&!p.disableLabelLayout&&a._addLabel(d.dataIndex,d.dataType,l,p,u)})},t.prototype.updateLayoutConfig=function(n){var a=n.getWidth(),l=n.getHeight();function u(ax,ox){return function(){updateLabelLinePoints(ax,ox)}}for(var c=0;c<this._labelList.length;c++){var p=this._labelList[c],d=p.label,Q=d.__hostTarget,Ct=p.defaultAttr,ar=void 0;isFunction$1(p.layoutOption)?ar=p.layoutOption(prepareLayoutCallbackParams(p,Q)):ar=p.layoutOption,ar=ar||{},p.computedLayoutOption=ar;var en=Math.PI/180;Q&&Q.setTextConfig({local:!1,position:ar.x!=null||ar.y!=null?null:Ct.attachedPos,rotation:ar.rotate!=null?ar.rotate*en:Ct.attachedRot,offset:[ar.dx||0,ar.dy||0]});var tn=!1;if(ar.x!=null?(d.x=parsePercent(ar.x,a),d.setStyle("x",0),tn=!0):(d.x=Ct.x,d.setStyle("x",Ct.style.x)),ar.y!=null?(d.y=parsePercent(ar.y,l),d.setStyle("y",0),tn=!0):(d.y=Ct.y,d.setStyle("y",Ct.style.y)),ar.labelLinePoints){var on=Q.getTextGuideLine();on&&(on.setShape({points:ar.labelLinePoints}),tn=!1)}var cn=labelLayoutInnerStore(d);cn.needsUpdateLabelLine=tn,d.rotation=ar.rotate!=null?ar.rotate*en:Ct.rotation,d.scaleX=Ct.scaleX,d.scaleY=Ct.scaleY;for(var gn=0;gn<LABEL_OPTION_TO_STYLE_KEYS.length;gn++){var Cn=LABEL_OPTION_TO_STYLE_KEYS[gn];d.setStyle(Cn,ar[Cn]!=null?ar[Cn]:Ct.style[Cn])}if(ar.draggable){if(d.draggable=!0,d.cursor="move",Q){var ex=p.seriesModel;if(p.dataIndex!=null){var ix=p.seriesModel.getData(p.dataType);ex=ix.getItemModel(p.dataIndex)}d.on("drag",u(Q,ex.getModel("labelLine")))}}else d.off("drag"),d.cursor=Ct.cursor}},t.prototype.layout=function(n){var a=n.getWidth(),l=n.getHeight(),u=prepareLayoutList(this._labelList),c=filter(u,function(Q){return Q.layoutOption.moveOverlap==="shiftX"}),p=filter(u,function(Q){return Q.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(c,0,a),shiftLayoutOnY(p,0,l);var d=filter(u,function(Q){return Q.layoutOption.hideOverlap});hideOverlap(d)},t.prototype.processLabelsOverall=function(){var n=this;each$f(this._chartViewList,function(a){var l=a.__model,u=a.ignoreLabelLineUpdate,c=l.isAnimationEnabled();a.group.traverse(function(p){if(p.ignore&&!p.forceLabelAnimation)return!0;var d=!u,Q=p.getTextContent();!d&&Q&&(d=labelLayoutInnerStore(Q).needsUpdateLabelLine),d&&n._updateLabelLine(p,l),c&&n._animateLabels(p,l)})})},t.prototype._updateLabelLine=function(n,a){var l=n.getTextContent(),u=getECData(n),c=u.dataIndex;if(l&&c!=null){var p=a.getData(u.dataType),d=p.getItemModel(c),Q={},Ct=p.getItemVisual(c,"style");if(Ct){var ar=p.getVisual("drawType");Q.stroke=Ct[ar]}var en=d.getModel("labelLine");setLabelLineStyle(n,getLabelLineStatesModels(d),Q),updateLabelLinePoints(n,en)}},t.prototype._animateLabels=function(n,a){var l=n.getTextContent(),u=n.getTextGuideLine();if(l&&(n.forceLabelAnimation||!l.ignore&&!l.invisible&&!n.disableLabelAnimation&&!isElementRemoved(n))){var c=labelLayoutInnerStore(l),p=c.oldLayout,d=getECData(n),Q=d.dataIndex,Ct={x:l.x,y:l.y,rotation:l.rotation},ar=a.getData(d.dataType);if(p){l.attr(p);var tn=n.prevStates;tn&&(indexOf(tn,"select")>=0&&l.attr(c.oldLayoutSelect),indexOf(tn,"emphasis")>=0&&l.attr(c.oldLayoutEmphasis)),updateProps$1(l,Ct,a,Q)}else if(l.attr(Ct),!labelInner(l).valueAnimation){var en=retrieve2(l.style.opacity,1);l.style.opacity=0,initProps(l,{style:{opacity:en}},a,Q)}if(c.oldLayout=Ct,l.states.select){var on=c.oldLayoutSelect={};extendWithKeys(on,Ct,LABEL_LAYOUT_PROPS),extendWithKeys(on,l.states.select,LABEL_LAYOUT_PROPS)}if(l.states.emphasis){var cn=c.oldLayoutEmphasis={};extendWithKeys(cn,Ct,LABEL_LAYOUT_PROPS),extendWithKeys(cn,l.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(l,Q,ar,a,a)}if(u&&!u.ignore&&!u.invisible){var c=labelLineAnimationStore(u),p=c.oldLayout,gn={points:u.shape.points};p?(u.attr({shape:p}),updateProps$1(u,{shape:gn},a)):(u.setShape(gn),u.style.strokePercent=0,initProps(u,{style:{strokePercent:1}},a)),c.oldLayout=gn}},t}(),getLabelManager=makeInner();function installLabelLayout(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,l){var u=getLabelManager(a).labelManager;u||(u=getLabelManager(a).labelManager=new LabelManager),u.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(n,a,l){var u=getLabelManager(a).labelManager;l.updatedSeries.forEach(function(c){u.addLabelsOfSeries(a.getViewOfSeriesModel(c))}),u.updateLayoutConfig(a),u.layout(a),u.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function t(){}return t.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},t.prototype.moveTo=function(n,a){this._add("M",n,a)},t.prototype.lineTo=function(n,a){this._add("L",n,a)},t.prototype.bezierCurveTo=function(n,a,l,u,c,p){this._add("C",n,a,l,u,c,p)},t.prototype.quadraticCurveTo=function(n,a,l,u){this._add("Q",n,a,l,u)},t.prototype.arc=function(n,a,l,u,c,p){this.ellipse(n,a,l,l,0,u,c,p)},t.prototype.ellipse=function(n,a,l,u,c,p,d,Q){var Ct=d-p,ar=!Q,en=Math.abs(Ct),tn=isAroundZero(en-PI2$1)||(ar?Ct>=PI2$1:-Ct>=PI2$1),on=Ct>0?Ct%PI2$1:Ct%PI2$1+PI2$1,cn=!1;tn?cn=!0:isAroundZero(en)?cn=!1:cn=on>=PI$4==!!ar;var gn=n+l*mathCos(p),Cn=a+u*mathSin(p);this._start&&this._add("M",gn,Cn);var ex=Math.round(c*degree);if(tn){var ix=1/this._p,ax=(ar?1:-1)*(PI2$1-ix);this._add("A",l,u,ex,1,+ar,n+l*mathCos(p+ax),a+u*mathSin(p+ax)),ix>.01&&this._add("A",l,u,ex,0,+ar,gn,Cn)}else{var ox=n+l*mathCos(d),lx=a+u*mathSin(d);this._add("A",l,u,ex,+cn,+ar,ox,lx)}},t.prototype.rect=function(n,a,l,u){this._add("M",n,a),this._add("l",l,0),this._add("l",0,u),this._add("l",-l,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(n,a,l,u,c,p,d,Q,Ct){for(var ar=[],en=this._p,tn=1;tn<arguments.length;tn++){var on=arguments[tn];if(isNaN(on)){this._invalid=!0;return}ar.push(Math.round(on*en)/en)}this._d.push(n+ar.join(" ")),this._start=n==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),NONE="none",mathRound=Math.round;function pathHasFill(t){var n=t.fill;return n!=null&&n!==NONE}function pathHasStroke(t){var n=t.stroke;return n!=null&&n!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(t){return"stroke-"+t.toLowerCase()});function mapStyleToAttrs(t,n,a,l){var u=n.opacity==null?1:n.opacity;if(a instanceof ZRImage){t("opacity",u);return}if(pathHasFill(n)){var c=normalizeColor(n.fill);t("fill",c.color);var p=n.fillOpacity!=null?n.fillOpacity*c.opacity*u:c.opacity*u;p<1&&t("fill-opacity",p)}else t("fill",NONE);if(pathHasStroke(n)){var d=normalizeColor(n.stroke);t("stroke",d.color);var Q=n.strokeNoScale?a.getLineScale():1,Ct=Q?(n.lineWidth||0)/Q:0,ar=n.strokeOpacity!=null?n.strokeOpacity*d.opacity*u:d.opacity*u,en=n.strokeFirst;if(Ct!==1&&t("stroke-width",Ct),en&&t("paint-order",en?"stroke":"fill"),ar<1&&t("stroke-opacity",ar),n.lineDash){var tn=getLineDash(a),on=tn[0],cn=tn[1];on&&(cn=mathRound(cn||0),t("stroke-dasharray",on.join(",")),(cn||l)&&t("stroke-dashoffset",cn))}for(var gn=0;gn<strokeProps.length;gn++){var Cn=strokeProps[gn];if(n[Cn]!==DEFAULT_PATH_STYLE[Cn]){var ex=n[Cn]||DEFAULT_PATH_STYLE[Cn];ex&&t(svgStrokeProps[gn],ex)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(t){return document.createElementNS(SVGNS,t)}function createVNode(t,n,a,l,u){return{tag:t,attrs:a||{},children:l,text:u,key:n}}function createElementOpen(t,n){var a=[];if(n)for(var l in n){var u=n[l],c=l;u!==!1&&(u!==!0&&u!=null&&(c+='="'+u+'"'),a.push(c))}return"<"+t+" "+a.join(" ")+">"}function createElementClose(t){return"</"+t+">"}function vNodeToString(t,n){n=n||{};var a=n.newline?`
`:"";function l(u){var c=u.children,p=u.tag,d=u.attrs,Q=u.text;return createElementOpen(p,d)+(p!=="style"?encodeHTML(Q):Q||"")+(c?""+a+map$1(c,function(Ct){return l(Ct)}).join(a)+a:"")+createElementClose(p)}return l(t)}function getCssString(t,n,a){a=a||{};var l=a.newline?`
`:"",u=" {"+l,c=l+"}",p=map$1(keys(t),function(Q){return Q+u+map$1(keys(t[Q]),function(Ct){return Ct+":"+t[Q][Ct]+";"}).join(l)+c}).join(l),d=map$1(keys(n),function(Q){return"@keyframes "+Q+u+map$1(keys(n[Q]),function(Ct){return Ct+u+map$1(keys(n[Q][Ct]),function(ar){var en=n[Q][Ct][ar];return ar==="d"&&(en='path("'+en+'")'),ar+":"+en+";"}).join(l)+c}).join(l)+c}).join(l);return!p&&!d?"":["<![CDATA[",p,d,"]]>"].join(l)}function createBrushScope(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(t,n,a,l){return createVNode("svg","root",{width:t,height:n,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:l?"0 0 "+t+" "+n:!1},a)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(t,n,a){var l=extend({},t.shape);extend(l,n),t.buildPath(a,l);var u=new SVGPathRebuilder;return u.reset(getPathPrecision(t)),a.rebuildPath(u,1),u.generateStr(),u.getStr()}function setTransformOrigin(t,n){var a=n.originX,l=n.originY;(a||l)&&(t[transformOriginKey]=a+"px "+l+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(t,n){var a=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[a]=t,a}function createCompoundPathCSSAnimation(t,n,a){var l=t.shape.paths,u={},c,p;if(each$f(l,function(Q){var Ct=createBrushScope(a.zrId);Ct.animation=!0,createCSSAnimation(Q,{},Ct,!0);var ar=Ct.cssAnims,en=Ct.cssNodes,tn=keys(ar),on=tn.length;if(on){p=tn[on-1];var cn=ar[p];for(var gn in cn){var Cn=cn[gn];u[gn]=u[gn]||{d:""},u[gn].d+=Cn.d||""}for(var ex in en){var ix=en[ex].animation;ix.indexOf(p)>=0&&(c=ix)}}}),!!c){n.d=!1;var d=addAnimation(u,a);return c.replace(p,d)}}function getEasingFunc(t){return isString$1(t)?EASING_MAP[t]?"cubic-bezier("+EASING_MAP[t]+")":createCubicEasingFunc(t)?t:"":""}function createCSSAnimation(t,n,a,l){var u=t.animators,c=u.length,p=[];if(t instanceof CompoundPath){var d=createCompoundPathCSSAnimation(t,n,a);if(d)p.push(d);else if(!c)return}else if(!c)return;for(var Q={},Ct=0;Ct<c;Ct++){var ar=u[Ct],en=[ar.getMaxTime()/1e3+"s"],tn=getEasingFunc(ar.getClip().easing),on=ar.getDelay();tn?en.push(tn):en.push("linear"),on&&en.push(on/1e3+"s"),ar.getLoop()&&en.push("infinite");var cn=en.join(" ");Q[cn]=Q[cn]||[cn,[]],Q[cn][1].push(ar)}function gn(ix){var ax=ix[1],ox=ax.length,lx={},cx={},dx={},hx="animation-timing-function";function fx(Gx,Ux,Hx){for(var Vx=Gx.getTracks(),zx=Gx.getMaxTime(),rE=0;rE<Vx.length;rE++){var Zx=Vx[rE];if(Zx.needsAnimate()){var eE=Zx.keyframes,oE=Zx.propName;if(Hx&&(oE=Hx(oE)),oE)for(var iE=0;iE<eE.length;iE++){var Wx=eE[iE],AE=Math.round(Wx.time/zx*100)+"%",ME=getEasingFunc(Wx.easing),EE=Wx.rawValue;(isString$1(EE)||isNumber(EE))&&(Ux[AE]=Ux[AE]||{},Ux[AE][oE]=Wx.rawValue,ME&&(Ux[AE][hx]=ME))}}}}for(var ux=0;ux<ox;ux++){var gx=ax[ux],yx=gx.targetName;yx?yx==="shape"&&fx(gx,cx):!l&&fx(gx,lx)}for(var _x in lx){var vx={};copyTransform(vx,t),extend(vx,lx[_x]);var bx=getSRTTransformString(vx),xx=lx[_x][hx];dx[_x]=bx?{transform:bx}:{},setTransformOrigin(dx[_x],vx),xx&&(dx[_x][hx]=xx)}var Sx,Ax=!0;for(var _x in cx){dx[_x]=dx[_x]||{};var Cx=!Sx,xx=cx[_x][hx];Cx&&(Sx=new PathProxy);var Tx=Sx.len();Sx.reset(),dx[_x].d=buildPathString(t,cx[_x],Sx);var Px=Sx.len();if(!Cx&&Tx!==Px){Ax=!1;break}xx&&(dx[_x][hx]=xx)}if(!Ax)for(var _x in dx)delete dx[_x].d;if(!l)for(var ux=0;ux<ox;ux++){var gx=ax[ux],yx=gx.targetName;yx==="style"&&fx(gx,dx,function(Vx){return ANIMATE_STYLE_MAP[Vx]})}for(var Fx=keys(dx),Mx=!0,Dx,ux=1;ux<Fx.length;ux++){var Ox=Fx[ux-1],Lx=Fx[ux];if(dx[Ox][transformOriginKey]!==dx[Lx][transformOriginKey]){Mx=!1;break}Dx=dx[Ox][transformOriginKey]}if(Mx&&Dx){for(var _x in dx)dx[_x][transformOriginKey]&&delete dx[_x][transformOriginKey];n[transformOriginKey]=Dx}if(filter(Fx,function(Gx){return keys(dx[Gx]).length>0}).length){var Nx=addAnimation(dx,a);return Nx+" "+ix[0]+" both"}}for(var Cn in Q){var d=gn(Q[Cn]);d&&p.push(d)}if(p.length){var ex=a.zrId+"-cls-"+getClassId();a.cssNodes["."+ex]={animation:p.join(",")},n.class=ex}}function createCSSEmphasis(t,n,a){if(!t.ignore)if(t.isSilent()){var l={"pointer-events":"none"};setClassAttribute(l,n,a)}else{var u=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},c=u.fill;if(!c){var p=t.style&&t.style.fill,d=t.states.select&&t.states.select.style&&t.states.select.style.fill,Q=t.currentStates.indexOf("select")>=0&&d||p;Q&&(c=liftColor(Q))}var Ct=u.lineWidth;if(Ct){var ar=!u.strokeNoScale&&t.transform?t.transform[0]:1;Ct=Ct/ar}var l={cursor:"pointer"};c&&(l.fill=c),u.stroke&&(l.stroke=u.stroke),Ct&&(l["stroke-width"]=Ct),setClassAttribute(l,n,a)}}function setClassAttribute(t,n,a,l){var u=JSON.stringify(t),c=a.cssStyleCache[u];c||(c=a.zrId+"-cls-"+getClassId(),a.cssStyleCache[u]=c,a.cssNodes["."+c+":hover"]=t),n.class=n.class?n.class+" "+c:c}var round$1=Math.round;function isImageLike(t){return t&&isString$1(t.src)}function isCanvasLike(t){return t&&isFunction$1(t.toDataURL)}function setStyleAttrs(t,n,a,l){mapStyleToAttrs(function(u,c){var p=u==="fill"||u==="stroke";p&&isGradient(c)?setGradient(n,t,u,l):p&&isPattern(c)?setPattern(a,t,u,l):t[u]=c,p&&l.ssr&&c==="none"&&(t["pointer-events"]="visible")},n,a,!1),setShadow(a,t,l)}function setMetaData(t,n){var a=getElementSSRData(n);a&&(a.each(function(l,u){l!=null&&(t[(META_DATA_PREFIX+u).toLowerCase()]=l+"")}),n.isSilent()&&(t[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(t){return isAroundZero(t[0]-1)&&isAroundZero(t[1])&&isAroundZero(t[2])&&isAroundZero(t[3]-1)}function noTranslate(t){return isAroundZero(t[4])&&isAroundZero(t[5])}function setTransform(t,n,a){if(n&&!(noTranslate(n)&&noRotateScale(n))){var l=1e4;t.transform=noRotateScale(n)?"translate("+round$1(n[4]*l)/l+" "+round$1(n[5]*l)/l+")":getMatrixStr(n)}}function convertPolyShape(t,n,a){for(var l=t.points,u=[],c=0;c<l.length;c++)u.push(round$1(l[c][0]*a)/a),u.push(round$1(l[c][1]*a)/a);n.points=u.join(" ")}function validatePolyShape(t){return!t.smooth}function createAttrsConvert(t){var n=map$1(t,function(a){return typeof a=="string"?[a,a]:a});return function(a,l,u){for(var c=0;c<n.length;c++){var p=n[c],d=a[p[0]];d!=null&&(l[p[1]]=round$1(d*u)/u)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(t){for(var n=t.animators,a=0;a<n.length;a++)if(n[a].targetName==="shape")return!0;return!1}function brushSVGPath(t,n){var a=t.style,l=t.shape,u=builtinShapesDef[t.type],c={},p=n.animation,d="path",Q=t.style.strokePercent,Ct=n.compress&&getPathPrecision(t)||4;if(u&&!n.willUpdate&&!(u[1]&&!u[1](l))&&!(p&&hasShapeAnimation(t))&&!(Q<1)){d=t.type;var ar=Math.pow(10,Ct);u[0](l,c,ar)}else{var en=!t.path||t.shapeChanged();t.path||t.createPathProxy();var tn=t.path;en&&(tn.beginPath(),t.buildPath(tn,t.shape),t.pathUpdated());var on=tn.getVersion(),cn=t,gn=cn.__svgPathBuilder;(cn.__svgPathVersion!==on||!gn||Q!==cn.__svgPathStrokePercent)&&(gn||(gn=cn.__svgPathBuilder=new SVGPathRebuilder),gn.reset(Ct),tn.rebuildPath(gn,Q),gn.generateStr(),cn.__svgPathVersion=on,cn.__svgPathStrokePercent=Q),c.d=gn.getStr()}return setTransform(c,t.transform),setStyleAttrs(c,a,t,n),setMetaData(c,t),n.animation&&createCSSAnimation(t,c,n),n.emphasis&&createCSSEmphasis(t,c,n),createVNode(d,t.id+"",c)}function brushSVGImage(t,n){var a=t.style,l=a.image;if(l&&!isString$1(l)&&(isImageLike(l)?l=l.src:isCanvasLike(l)&&(l=l.toDataURL())),!!l){var u=a.x||0,c=a.y||0,p=a.width,d=a.height,Q={href:l,width:p,height:d};return u&&(Q.x=u),c&&(Q.y=c),setTransform(Q,t.transform),setStyleAttrs(Q,a,t,n),setMetaData(Q,t),n.animation&&createCSSAnimation(t,Q,n),createVNode("image",t.id+"",Q)}}function brushSVGTSpan(t,n){var a=t.style,l=a.text;if(l!=null&&(l+=""),!(!l||isNaN(a.x)||isNaN(a.y))){var u=a.font||DEFAULT_FONT,c=a.x||0,p=adjustTextY$1(a.y||0,getLineHeight(u),a.textBaseline),d=TEXT_ALIGN_TO_ANCHOR[a.textAlign]||a.textAlign,Q={"dominant-baseline":"central","text-anchor":d};if(hasSeparateFont(a)){var Ct="",ar=a.fontStyle,en=parseFontSize(a.fontSize);if(!parseFloat(en))return;var tn=a.fontFamily||DEFAULT_FONT_FAMILY,on=a.fontWeight;Ct+="font-size:"+en+";font-family:"+tn+";",ar&&ar!=="normal"&&(Ct+="font-style:"+ar+";"),on&&on!=="normal"&&(Ct+="font-weight:"+on+";"),Q.style=Ct}else Q.style="font: "+u;return l.match(/\s/)&&(Q["xml:space"]="preserve"),c&&(Q.x=c),p&&(Q.y=p),setTransform(Q,t.transform),setStyleAttrs(Q,a,t,n),setMetaData(Q,t),n.animation&&createCSSAnimation(t,Q,n),createVNode("text",t.id+"",Q,void 0,l)}}function brush(t,n){if(t instanceof Path)return brushSVGPath(t,n);if(t instanceof ZRImage)return brushSVGImage(t,n);if(t instanceof TSpan)return brushSVGTSpan(t,n)}function setShadow(t,n,a){var l=t.style;if(hasShadow(l)){var u=getShadowKey(t),c=a.shadowCache,p=c[u];if(!p){var d=t.getGlobalScale(),Q=d[0],Ct=d[1];if(!Q||!Ct)return;var ar=l.shadowOffsetX||0,en=l.shadowOffsetY||0,tn=l.shadowBlur,on=normalizeColor(l.shadowColor),cn=on.opacity,gn=on.color,Cn=tn/2/Q,ex=tn/2/Ct,ix=Cn+" "+ex;p=a.zrId+"-s"+a.shadowIdx++,a.defs[p]=createVNode("filter",p,{id:p,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:ar/Q,dy:en/Ct,stdDeviation:ix,"flood-color":gn,"flood-opacity":cn})]),c[u]=p}n.filter=getIdURL(p)}}function setGradient(t,n,a,l){var u=t[a],c,p={gradientUnits:u.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(u))c="linearGradient",p.x1=u.x,p.y1=u.y,p.x2=u.x2,p.y2=u.y2;else if(isRadialGradient(u))c="radialGradient",p.cx=retrieve2(u.x,.5),p.cy=retrieve2(u.y,.5),p.r=retrieve2(u.r,.5);else return;for(var d=u.colorStops,Q=[],Ct=0,ar=d.length;Ct<ar;++Ct){var en=round4(d[Ct].offset)*100+"%",tn=d[Ct].color,on=normalizeColor(tn),cn=on.color,gn=on.opacity,Cn={offset:en};Cn["stop-color"]=cn,gn<1&&(Cn["stop-opacity"]=gn),Q.push(createVNode("stop",Ct+"",Cn))}var ex=createVNode(c,"",p,Q),ix=vNodeToString(ex),ax=l.gradientCache,ox=ax[ix];ox||(ox=l.zrId+"-g"+l.gradientIdx++,ax[ix]=ox,p.id=ox,l.defs[ox]=createVNode(c,ox,p,Q)),n[a]=getIdURL(ox)}function setPattern(t,n,a,l){var u=t.style[a],c=t.getBoundingRect(),p={},d=u.repeat,Q=d==="no-repeat",Ct=d==="repeat-x",ar=d==="repeat-y",en;if(isImagePattern(u)){var tn=u.imageWidth,on=u.imageHeight,cn=void 0,gn=u.image;if(isString$1(gn)?cn=gn:isImageLike(gn)?cn=gn.src:isCanvasLike(gn)&&(cn=gn.toDataURL()),typeof Image>"u"){var Cn="Image width/height must been given explictly in svg-ssr renderer.";assert(tn,Cn),assert(on,Cn)}else if(tn==null||on==null){var ex=function(ux,gx){if(ux){var yx=ux.elm,_x=tn||gx.width,vx=on||gx.height;ux.tag==="pattern"&&(Ct?(vx=1,_x/=c.width):ar&&(_x=1,vx/=c.height)),ux.attrs.width=_x,ux.attrs.height=vx,yx&&(yx.setAttribute("width",_x),yx.setAttribute("height",vx))}},ix=createOrUpdateImage(cn,null,t,function(ux){Q||ex(cx,ux),ex(en,ux)});ix&&ix.width&&ix.height&&(tn=tn||ix.width,on=on||ix.height)}en=createVNode("image","img",{href:cn,width:tn,height:on}),p.width=tn,p.height=on}else u.svgElement&&(en=clone$4(u.svgElement),p.width=u.svgWidth,p.height=u.svgHeight);if(en){var ax,ox;Q?ax=ox=1:Ct?(ox=1,ax=p.width/c.width):ar?(ax=1,ox=p.height/c.height):p.patternUnits="userSpaceOnUse",ax!=null&&!isNaN(ax)&&(p.width=ax),ox!=null&&!isNaN(ox)&&(p.height=ox);var lx=getSRTTransformString(u);lx&&(p.patternTransform=lx);var cx=createVNode("pattern","",p,[en]),dx=vNodeToString(cx),hx=l.patternCache,fx=hx[dx];fx||(fx=l.zrId+"-p"+l.patternIdx++,hx[dx]=fx,p.id=fx,cx=l.defs[fx]=createVNode("pattern",fx,p,[en])),n[a]=getIdURL(fx)}}function setClipPath(t,n,a){var l=a.clipPathCache,u=a.defs,c=l[t.id];if(!c){c=a.zrId+"-c"+a.clipPathIdx++;var p={id:c};l[t.id]=c,u[c]=createVNode("clipPath",c,p,[brushSVGPath(t,a)])}n["clip-path"]=getIdURL(c)}function createTextNode(t){return document.createTextNode(t)}function insertBefore(t,n,a){t.insertBefore(n,a)}function removeChild(t,n){t.removeChild(n)}function appendChild(t,n){t.appendChild(n)}function parentNode(t){return t.parentNode}function nextSibling(t){return t.nextSibling}function setTextContent(t,n){t.textContent=n}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(t){return t===void 0}function isDef(t){return t!==void 0}function createKeyToOldIdx(t,n,a){for(var l={},u=n;u<=a;++u){var c=t[u].key;c!==void 0&&(l[c]=u)}return l}function sameVnode(t,n){var a=t.key===n.key,l=t.tag===n.tag;return l&&a}function createElm(t){var n,a=t.children,l=t.tag;if(isDef(l)){var u=t.elm=createElement(l);if(updateAttrs(emptyNode,t),isArray$1(a))for(n=0;n<a.length;++n){var c=a[n];c!=null&&appendChild(u,createElm(c))}else isDef(t.text)&&!isObject$3(t.text)&&appendChild(u,createTextNode(t.text))}else t.elm=createTextNode(t.text);return t.elm}function addVnodes(t,n,a,l,u){for(;l<=u;++l){var c=a[l];c!=null&&insertBefore(t,createElm(c),n)}}function removeVnodes(t,n,a,l){for(;a<=l;++a){var u=n[a];if(u!=null)if(isDef(u.tag)){var c=parentNode(u.elm);removeChild(c,u.elm)}else removeChild(t,u.elm)}}function updateAttrs(t,n){var a,l=n.elm,u=t&&t.attrs||{},c=n.attrs||{};if(u!==c){for(a in c){var p=c[a],d=u[a];d!==p&&(p===!0?l.setAttribute(a,""):p===!1?l.removeAttribute(a):a==="style"?l.style.cssText=p:a.charCodeAt(0)!==xChar?l.setAttribute(a,p):a==="xmlns:xlink"||a==="xmlns"?l.setAttributeNS(XMLNS,a,p):a.charCodeAt(3)===colonChar?l.setAttributeNS(XML_NAMESPACE,a,p):a.charCodeAt(5)===colonChar?l.setAttributeNS(XLINKNS,a,p):l.setAttribute(a,p))}for(a in u)a in c||l.removeAttribute(a)}}function updateChildren(t,n,a){for(var l=0,u=0,c=n.length-1,p=n[0],d=n[c],Q=a.length-1,Ct=a[0],ar=a[Q],en,tn,on,cn;l<=c&&u<=Q;)p==null?p=n[++l]:d==null?d=n[--c]:Ct==null?Ct=a[++u]:ar==null?ar=a[--Q]:sameVnode(p,Ct)?(patchVnode(p,Ct),p=n[++l],Ct=a[++u]):sameVnode(d,ar)?(patchVnode(d,ar),d=n[--c],ar=a[--Q]):sameVnode(p,ar)?(patchVnode(p,ar),insertBefore(t,p.elm,nextSibling(d.elm)),p=n[++l],ar=a[--Q]):sameVnode(d,Ct)?(patchVnode(d,Ct),insertBefore(t,d.elm,p.elm),d=n[--c],Ct=a[++u]):(isUndef(en)&&(en=createKeyToOldIdx(n,l,c)),tn=en[Ct.key],isUndef(tn)?insertBefore(t,createElm(Ct),p.elm):(on=n[tn],on.tag!==Ct.tag?insertBefore(t,createElm(Ct),p.elm):(patchVnode(on,Ct),n[tn]=void 0,insertBefore(t,on.elm,p.elm))),Ct=a[++u]);(l<=c||u<=Q)&&(l>c?(cn=a[Q+1]==null?null:a[Q+1].elm,addVnodes(t,cn,a,u,Q)):removeVnodes(t,n,l,c))}function patchVnode(t,n){var a=n.elm=t.elm,l=t.children,u=n.children;t!==n&&(updateAttrs(t,n),isUndef(n.text)?isDef(l)&&isDef(u)?l!==u&&updateChildren(a,l,u):isDef(u)?(isDef(t.text)&&setTextContent(a,""),addVnodes(a,null,u,0,u.length-1)):isDef(l)?removeVnodes(a,l,0,l.length-1):isDef(t.text)&&setTextContent(a,""):t.text!==n.text&&(isDef(l)&&removeVnodes(a,l,0,l.length-1),setTextContent(a,n.text)))}function patch(t,n){if(sameVnode(t,n))patchVnode(t,n);else{var a=t.elm,l=parentNode(a);createElm(n),l!==null&&(insertBefore(l,n.elm,nextSibling(a)),removeVnodes(l,[t],0,0))}return n}var svgId=0,SVGPainter=function(){function t(n,a,l){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=a,this._opts=l=extend({},l),this.root=n,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(l.width,l.height),n&&!l.ssr){var u=this._viewport=document.createElement("div");u.style.cssText="position:relative;overflow:hidden";var c=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),u.appendChild(c),n.appendChild(u)}this.resize(l.width,l.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,n),this._oldVNode=n}},t.prototype.renderOneToVNode=function(n){return brush(n,createBrushScope(this._id))},t.prototype.renderToVNode=function(n){n=n||{};var a=this.storage.getDisplayList(!0),l=this._width,u=this._height,c=createBrushScope(this._id);c.animation=n.animation,c.willUpdate=n.willUpdate,c.compress=n.compress,c.emphasis=n.emphasis,c.ssr=this._opts.ssr;var p=[],d=this._bgVNode=createBackgroundVNode(l,u,this._backgroundColor,c);d&&p.push(d);var Q=n.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(a,c,Q?Q.children:p),Q&&p.push(Q);var Ct=map$1(keys(c.defs),function(tn){return c.defs[tn]});if(Ct.length&&p.push(createVNode("defs","defs",{},Ct)),n.animation){var ar=getCssString(c.cssNodes,c.cssAnims,{newline:!0});if(ar){var en=createVNode("style","stl",{},[],ar);p.push(en)}}return createSVGVNode(l,u,p,n.useViewBox)},t.prototype.renderToString=function(n){return n=n||{},vNodeToString(this.renderToVNode({animation:retrieve2(n.cssAnimation,!0),emphasis:retrieve2(n.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(n.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(n,a,l){for(var u=n.length,c=[],p=0,d,Q,Ct=0,ar=0;ar<u;ar++){var en=n[ar];if(!en.invisible){var tn=en.__clipPaths,on=tn&&tn.length||0,cn=Q&&Q.length||0,gn=void 0;for(gn=Math.max(on-1,cn-1);gn>=0&&!(tn&&Q&&tn[gn]===Q[gn]);gn--);for(var Cn=cn-1;Cn>gn;Cn--)p--,d=c[p-1];for(var ex=gn+1;ex<on;ex++){var ix={};setClipPath(tn[ex],ix,a);var ax=createVNode("g","clip-g-"+Ct++,ix,[]);(d?d.children:l).push(ax),c[p++]=ax,d=ax}Q=tn;var ox=brush(en,a);ox&&(d?d.children:l).push(ox)}}},t.prototype.resize=function(n,a){var l=this._opts,u=this.root,c=this._viewport;if(n!=null&&(l.width=n),a!=null&&(l.height=a),u&&c&&(c.style.display="none",n=getSize$1(u,0,l),a=getSize$1(u,1,l),c.style.display=""),this._width!==n||this._height!==a){if(this._width=n,this._height=a,c){var p=c.style;p.width=n+"px",p.height=a+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var d=this._svgDom;d&&(d.setAttribute("width",n),d.setAttribute("height",a));var Q=this._bgVNode&&this._bgVNode.elm;Q&&(Q.setAttribute("width",n),Q.setAttribute("height",a))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(n){var a=this.renderToString(),l="data:image/svg+xml;";return n?(a=encodeBase64(a),a&&l+"base64,"+a):l+"charset=UTF-8,"+encodeURIComponent(a)},t}();function createMethodNotSupport(t){return function(){}}function createBackgroundVNode(t,n,a,l){var u;if(a&&a!=="none")if(u=createVNode("rect","bg",{width:t,height:n,x:"0",y:"0"}),isGradient(a))setGradient({fill:a},u.attrs,"fill",l);else if(isPattern(a))setPattern({style:{fill:a},dirty:noop,getBoundingRect:function(){return{width:t,height:n}}},u.attrs,"fill",l);else{var c=normalizeColor(a),p=c.color,d=c.opacity;u.attrs.fill=p,d<1&&(u.attrs["fill-opacity"]=d)}return u}function install$S(t){t.registerPainter("svg",SVGPainter)}function createDom(t,n,a){var l=platformApi.createCanvas(),u=n.getWidth(),c=n.getHeight(),p=l.style;return p&&(p.position="absolute",p.left="0",p.top="0",p.width=u+"px",p.height=c+"px",l.setAttribute("data-zr-dom-id",t)),l.width=u*a,l.height=c*a,l}var Layer=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this)||this;c.motionBlur=!1,c.lastFrameAlpha=.7,c.dpr=1,c.virtual=!1,c.config={},c.incremental=!1,c.zlevel=0,c.maxRepaintRectCount=5,c.__dirty=!0,c.__firstTimePaint=!0,c.__used=!1,c.__drawIndex=0,c.__startIndex=0,c.__endIndex=0,c.__prevStartIndex=null,c.__prevEndIndex=null;var p;u=u||devicePixelRatio,typeof a=="string"?p=createDom(a,l,u):isObject$3(a)&&(p=a,a=p.id),c.id=a,c.dom=p;var d=p.style;return d&&(disableUserSelect(p),p.onselectstart=function(){return!1},d.padding="0",d.margin="0",d.borderWidth="0"),c.painter=l,c.dpr=u,c}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},n.prototype.createRepaintRects=function(a,l,u,c){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var p=[],d=this.maxRepaintRectCount,Q=!1,Ct=new BoundingRect(0,0,0,0);function ar(ix){if(!(!ix.isFinite()||ix.isZero()))if(p.length===0){var ax=new BoundingRect(0,0,0,0);ax.copy(ix),p.push(ax)}else{for(var ox=!1,lx=1/0,cx=0,dx=0;dx<p.length;++dx){var hx=p[dx];if(hx.intersect(ix)){var fx=new BoundingRect(0,0,0,0);fx.copy(hx),fx.union(ix),p[dx]=fx,ox=!0;break}else if(Q){Ct.copy(ix),Ct.union(hx);var ux=ix.width*ix.height,gx=hx.width*hx.height,yx=Ct.width*Ct.height,_x=yx-ux-gx;_x<lx&&(lx=_x,cx=dx)}}if(Q&&(p[cx].union(ix),ox=!0),!ox){var ax=new BoundingRect(0,0,0,0);ax.copy(ix),p.push(ax)}Q||(Q=p.length>=d)}}for(var en=this.__startIndex;en<this.__endIndex;++en){var tn=a[en];if(tn){var on=tn.shouldBePainted(u,c,!0,!0),cn=tn.__isRendered&&(tn.__dirty&REDRAW_BIT||!on)?tn.getPrevPaintRect():null;cn&&ar(cn);var gn=on&&(tn.__dirty&REDRAW_BIT||!tn.__isRendered)?tn.getPaintRect():null;gn&&ar(gn)}}for(var en=this.__prevStartIndex;en<this.__prevEndIndex;++en){var tn=l[en],on=tn&&tn.shouldBePainted(u,c,!0,!0);if(tn&&(!on||!tn.__zr)&&tn.__isRendered){var cn=tn.getPrevPaintRect();cn&&ar(cn)}}var Cn;do{Cn=!1;for(var en=0;en<p.length;){if(p[en].isZero()){p.splice(en,1);continue}for(var ex=en+1;ex<p.length;)p[en].intersect(p[ex])?(Cn=!0,p[en].union(p[ex]),p.splice(ex,1)):ex++;en++}}while(Cn);return this._paintRects=p,p},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(a,l){var u=this.dpr,c=this.dom,p=c.style,d=this.domBack;p&&(p.width=a+"px",p.height=l+"px"),c.width=a*u,c.height=l*u,d&&(d.width=a*u,d.height=l*u,u!==1&&this.ctxBack.scale(u,u))},n.prototype.clear=function(a,l,u){var c=this.dom,p=this.ctx,d=c.width,Q=c.height;l=l||this.clearColor;var Ct=this.motionBlur&&!a,ar=this.lastFrameAlpha,en=this.dpr,tn=this;Ct&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(c,0,0,d/en,Q/en));var on=this.domBack;function cn(gn,Cn,ex,ix){if(p.clearRect(gn,Cn,ex,ix),l&&l!=="transparent"){var ax=void 0;if(isGradientObject(l)){var ox=l.global||l.__width===ex&&l.__height===ix;ax=ox&&l.__canvasGradient||getCanvasGradient(p,l,{x:0,y:0,width:ex,height:ix}),l.__canvasGradient=ax,l.__width=ex,l.__height=ix}else isImagePatternObject(l)&&(l.scaleX=l.scaleX||en,l.scaleY=l.scaleY||en,ax=createCanvasPattern(p,l,{dirty:function(){tn.setUnpainted(),tn.painter.refresh()}}));p.save(),p.fillStyle=ax||l,p.fillRect(gn,Cn,ex,ix),p.restore()}Ct&&(p.save(),p.globalAlpha=ar,p.drawImage(on,gn,Cn,ex,ix),p.restore())}!u||Ct?cn(0,0,d,Q):u.length&&each$f(u,function(gn){cn(gn.x*en,gn.y*en,gn.width*en,gn.height*en)})},n}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function createRoot(t,n){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+t+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var CanvasPainter=function(){function t(n,a,l,u){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var c=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=l=extend({},l||{}),this.dpr=l.devicePixelRatio||devicePixelRatio,this._singleCanvas=c,this.root=n;var p=n.style;p&&(disableUserSelect(n),n.innerHTML=""),this.storage=a;var d=this._zlevelList;this._prevDisplayList=[];var Q=this._layers;if(c){var ar=n,en=ar.width,tn=ar.height;l.width!=null&&(en=l.width),l.height!=null&&(tn=l.height),this.dpr=l.devicePixelRatio||1,ar.width=en*this.dpr,ar.height=tn*this.dpr,this._width=en,this._height=tn;var on=new Layer(ar,this,this.dpr);on.__builtin__=!0,on.initContext(),Q[CANVAS_ZLEVEL]=on,on.zlevel=CANVAS_ZLEVEL,d.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize$1(n,0,l),this._height=getSize$1(n,1,l);var Ct=this._domRoot=createRoot(this._width,this._height);n.appendChild(Ct)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.refresh=function(n){var a=this.storage.getDisplayList(!0),l=this._prevDisplayList,u=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,l,n,this._redrawId);for(var c=0;c<u.length;c++){var p=u[c],d=this._layers[p];if(!d.__builtin__&&d.refresh){var Q=c===0?this._backgroundColor:null;d.refresh(Q)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(n){var a=n.length,l=this._hoverlayer;if(l&&l.clear(),!!a){for(var u={inHover:!0,viewWidth:this._width,viewHeight:this._height},c,p=0;p<a;p++){var d=n[p];d.__inHover&&(l||(l=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),c||(c=l.ctx,c.save()),brush$1(c,d,u,p===a-1))}c&&c.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},t.prototype.paintOne=function(n,a){brushSingle(n,a)},t.prototype._paintList=function(n,a,l,u){if(this._redrawId===u){l=l||!1,this._updateLayerStatus(n);var c=this._doPaintList(n,a,l),p=c.finished,d=c.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),d&&this._paintHoverList(n),p)this.eachLayer(function(Ct){Ct.afterBrush&&Ct.afterBrush()});else{var Q=this;requestAnimationFrame$1(function(){Q._paintList(n,a,l,u)})}}},t.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,a=this._domRoot.width,l=this._domRoot.height;n.clearRect(0,0,a,l),this.eachBuiltinLayer(function(u){u.virtual&&n.drawImage(u.dom,0,0,a,l)})},t.prototype._doPaintList=function(n,a,l){for(var u=this,c=[],p=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var Q=this._zlevelList[d],Ct=this._layers[Q];Ct.__builtin__&&Ct!==this._hoverlayer&&(Ct.__dirty||l)&&c.push(Ct)}for(var ar=!0,en=!1,tn=function(gn){var Cn=c[gn],ex=Cn.ctx,ix=p&&Cn.createRepaintRects(n,a,on._width,on._height),ax=l?Cn.__startIndex:Cn.__drawIndex,ox=!l&&Cn.incremental&&Date.now,lx=ox&&Date.now(),cx=Cn.zlevel===on._zlevelList[0]?on._backgroundColor:null;if(Cn.__startIndex===Cn.__endIndex)Cn.clear(!1,cx,ix);else if(ax===Cn.__startIndex){var dx=n[ax];(!dx.incremental||!dx.notClear||l)&&Cn.clear(!1,cx,ix)}ax===-1&&(console.error("For some unknown reason. drawIndex is -1"),ax=Cn.__startIndex);var hx,fx=function(_x){var vx={inHover:!1,allClipped:!1,prevEl:null,viewWidth:u._width,viewHeight:u._height};for(hx=ax;hx<Cn.__endIndex;hx++){var bx=n[hx];if(bx.__inHover&&(en=!0),u._doPaintEl(bx,Cn,p,_x,vx,hx===Cn.__endIndex-1),ox){var xx=Date.now()-lx;if(xx>15)break}}vx.prevElClipPaths&&ex.restore()};if(ix)if(ix.length===0)hx=Cn.__endIndex;else for(var ux=on.dpr,gx=0;gx<ix.length;++gx){var yx=ix[gx];ex.save(),ex.beginPath(),ex.rect(yx.x*ux,yx.y*ux,yx.width*ux,yx.height*ux),ex.clip(),fx(yx),ex.restore()}else ex.save(),fx(),ex.restore();Cn.__drawIndex=hx,Cn.__drawIndex<Cn.__endIndex&&(ar=!1)},on=this,cn=0;cn<c.length;cn++)tn(cn);return env.wxa&&each$f(this._layers,function(gn){gn&&gn.ctx&&gn.ctx.draw&&gn.ctx.draw()}),{finished:ar,needsRefreshHover:en}},t.prototype._doPaintEl=function(n,a,l,u,c,p){var d=a.ctx;if(l){var Q=n.getPaintRect();(!u||Q&&Q.intersect(u))&&(brush$1(d,n,c,p),n.setPrevPaintRect(Q))}else brush$1(d,n,c,p)},t.prototype.getLayer=function(n,a){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var l=this._layers[n];return l||(l=new Layer("zr_"+n,this,this.dpr),l.zlevel=n,l.__builtin__=!0,this._layerConfig[n]?merge(l,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(l,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),a&&(l.virtual=a),this.insertLayer(n,l),l.initContext()),l},t.prototype.insertLayer=function(n,a){var l=this._layers,u=this._zlevelList,c=u.length,p=this._domRoot,d=null,Q=-1;if(!l[n]&&isLayerValid(a)){if(c>0&&n>u[0]){for(Q=0;Q<c-1&&!(u[Q]<n&&u[Q+1]>n);Q++);d=l[u[Q]]}if(u.splice(Q+1,0,n),l[n]=a,!a.virtual)if(d){var Ct=d.dom;Ct.nextSibling?p.insertBefore(a.dom,Ct.nextSibling):p.appendChild(a.dom)}else p.firstChild?p.insertBefore(a.dom,p.firstChild):p.appendChild(a.dom);a.painter||(a.painter=this)}},t.prototype.eachLayer=function(n,a){for(var l=this._zlevelList,u=0;u<l.length;u++){var c=l[u];n.call(a,this._layers[c],c)}},t.prototype.eachBuiltinLayer=function(n,a){for(var l=this._zlevelList,u=0;u<l.length;u++){var c=l[u],p=this._layers[c];p.__builtin__&&n.call(a,p,c)}},t.prototype.eachOtherLayer=function(n,a){for(var l=this._zlevelList,u=0;u<l.length;u++){var c=l[u],p=this._layers[c];p.__builtin__||n.call(a,p,c)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(en,tn){en.__dirty=en.__used=!1});function a(en){c&&(c.__endIndex!==en&&(c.__dirty=!0),c.__endIndex=en)}if(this._singleCanvas)for(var l=1;l<n.length;l++){var u=n[l];if(u.zlevel!==n[l-1].zlevel||u.incremental){this._needsManuallyCompositing=!0;break}}var c=null,p=0,d,Q;for(Q=0;Q<n.length;Q++){var u=n[Q],Ct=u.zlevel,ar=void 0;d!==Ct&&(d=Ct,p=0),u.incremental?(ar=this.getLayer(Ct+INCREMENTAL_INC,this._needsManuallyCompositing),ar.incremental=!0,p=1):ar=this.getLayer(Ct+(p>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),ar.__builtin__||logError("ZLevel "+Ct+" has been used by unkown layer "+ar.id),ar!==c&&(ar.__used=!0,ar.__startIndex!==Q&&(ar.__dirty=!0),ar.__startIndex=Q,ar.incremental?ar.__drawIndex=-1:ar.__drawIndex=Q,a(Q),c=ar),u.__dirty&REDRAW_BIT&&!u.__inHover&&(ar.__dirty=!0,ar.incremental&&ar.__drawIndex<0&&(ar.__drawIndex=Q))}a(Q),this.eachBuiltinLayer(function(en,tn){!en.__used&&en.getElementCount()>0&&(en.__dirty=!0,en.__startIndex=en.__endIndex=en.__drawIndex=0),en.__dirty&&en.__drawIndex<0&&(en.__drawIndex=en.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(n){n.clear()},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$f(this._layers,function(a){a.setUnpainted()})},t.prototype.configLayer=function(n,a){if(a){var l=this._layerConfig;l[n]?merge(l[n],a,!0):l[n]=a;for(var u=0;u<this._zlevelList.length;u++){var c=this._zlevelList[u];if(c===n||c===n+EL_AFTER_INCREMENTAL_INC){var p=this._layers[c];merge(p,l[n],!0)}}}},t.prototype.delLayer=function(n){var a=this._layers,l=this._zlevelList,u=a[n];u&&(u.dom.parentNode.removeChild(u.dom),delete a[n],l.splice(indexOf(l,n),1))},t.prototype.resize=function(n,a){if(this._domRoot.style){var l=this._domRoot;l.style.display="none";var u=this._opts,c=this.root;if(n!=null&&(u.width=n),a!=null&&(u.height=a),n=getSize$1(c,0,u),a=getSize$1(c,1,u),l.style.display="",this._width!==n||a!==this._height){l.style.width=n+"px",l.style.height=a+"px";for(var p in this._layers)this._layers.hasOwnProperty(p)&&this._layers[p].resize(n,a);this.refresh(!0)}this._width=n,this._height=a}else{if(n==null||a==null)return;this._width=n,this._height=a,this.getLayer(CANVAS_ZLEVEL).resize(n,a)}return this},t.prototype.clearLayer=function(n){var a=this._layers[n];a&&a.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var a=new Layer("image",this,n.pixelRatio||this.dpr);a.initContext(),a.clear(!1,n.backgroundColor||this._backgroundColor);var l=a.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var u=a.dom.width,c=a.dom.height;this.eachLayer(function(en){en.__builtin__?l.drawImage(en.dom,0,0,u,c):en.renderToCanvas&&(l.save(),en.renderToCanvas(l),l.restore())})}else for(var p={inHover:!1,viewWidth:this._width,viewHeight:this._height},d=this.storage.getDisplayList(!0),Q=0,Ct=d.length;Q<Ct;Q++){var ar=d[Q];brush$1(l,ar,p,Q===Ct-1)}return a.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function install$R(t){t.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(a){var l=new Group$3,u=createSymbol$1("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);l.add(u),u.setStyle(a.lineStyle);var c=this.getData().getVisual("symbol"),p=this.getData().getVisual("symbolRotate"),d=c==="none"?"circle":c,Q=a.itemHeight*.8,Ct=createSymbol$1(d,(a.itemWidth-Q)/2,(a.itemHeight-Q)/2,Q,Q,a.itemStyle.fill);l.add(Ct),Ct.setStyle(a.itemStyle);var ar=a.iconRotate==="inherit"?p:a.iconRotate||0;return Ct.rotation=ar*Math.PI/180,Ct.setOrigin([a.itemWidth/2,a.itemHeight/2]),d.indexOf("empty")>-1&&(Ct.style.stroke=Ct.style.fill,Ct.style.fill="#fff",Ct.style.lineWidth=2),l},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n}(SeriesModel);function getDefaultLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel"),l=a.length;if(l===1){var u=retrieveRawValue(t,n,a[0]);return u!=null?u+"":null}else if(l){for(var c=[],p=0;p<a.length;p++)c.push(retrieveRawValue(t,n,a[p]));return c.join(" ")}}function getDefaultInterpolatedLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel");if(!isArray$1(n))return n+"";for(var l=[],u=0;u<a.length;u++){var c=t.getDimensionIndex(a[u]);c>=0&&l.push(n[c])}return l.join(" ")}var Symbol$1=function(t){__extends(n,t);function n(a,l,u,c){var p=t.call(this)||this;return p.updateData(a,l,u,c),p}return n.prototype._createSymbol=function(a,l,u,c,p){this.removeAll();var d=createSymbol$1(a,-1,-1,2,2,null,p);d.attr({z2:100,culling:!0,scaleX:c[0]/2,scaleY:c[1]/2}),d.drift=driftSymbol,this._symbolType=a,this.add(d)},n.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(a,l){var u=this.childAt(0);u.zlevel=a,u.z=l},n.prototype.setDraggable=function(a,l){var u=this.childAt(0);u.draggable=a,u.cursor=!l&&a?"move":u.cursor},n.prototype.updateData=function(a,l,u,c){this.silent=!1;var p=a.getItemVisual(l,"symbol")||"circle",d=a.hostModel,Q=n.getSymbolSize(a,l),Ct=p!==this._symbolType,ar=c&&c.disableAnimation;if(Ct){var en=a.getItemVisual(l,"symbolKeepAspect");this._createSymbol(p,a,l,Q,en)}else{var tn=this.childAt(0);tn.silent=!1;var on={scaleX:Q[0]/2,scaleY:Q[1]/2};ar?tn.attr(on):updateProps$1(tn,on,d,l),saveOldStyle(tn)}if(this._updateCommon(a,l,Q,u,c),Ct){var tn=this.childAt(0);if(!ar){var on={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:tn.style.opacity}};tn.scaleX=tn.scaleY=0,tn.style.opacity=0,initProps(tn,on,d,l)}}ar&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(a,l,u,c,p){var d=this.childAt(0),Q=a.hostModel,Ct,ar,en,tn,on,cn,gn,Cn,ex;if(c&&(Ct=c.emphasisItemStyle,ar=c.blurItemStyle,en=c.selectItemStyle,tn=c.focus,on=c.blurScope,gn=c.labelStatesModels,Cn=c.hoverScale,ex=c.cursorStyle,cn=c.emphasisDisabled),!c||a.hasItemOption){var ix=c&&c.itemModel?c.itemModel:a.getItemModel(l),ax=ix.getModel("emphasis");Ct=ax.getModel("itemStyle").getItemStyle(),en=ix.getModel(["select","itemStyle"]).getItemStyle(),ar=ix.getModel(["blur","itemStyle"]).getItemStyle(),tn=ax.get("focus"),on=ax.get("blurScope"),cn=ax.get("disabled"),gn=getLabelStatesModels(ix),Cn=ax.getShallow("scale"),ex=ix.getShallow("cursor")}var ox=a.getItemVisual(l,"symbolRotate");d.attr("rotation",(ox||0)*Math.PI/180||0);var lx=normalizeSymbolOffset(a.getItemVisual(l,"symbolOffset"),u);lx&&(d.x=lx[0],d.y=lx[1]),ex&&d.attr("cursor",ex);var cx=a.getItemVisual(l,"style"),dx=cx.fill;if(d instanceof ZRImage){var hx=d.style;d.useStyle(extend({image:hx.image,x:hx.x,y:hx.y,width:hx.width,height:hx.height},cx))}else d.__isEmptyBrush?d.useStyle(extend({},cx)):d.useStyle(cx),d.style.decal=null,d.setColor(dx,p&&p.symbolInnerColor),d.style.strokeNoScale=!0;var fx=a.getItemVisual(l,"liftZ"),ux=this._z2;fx!=null?ux==null&&(this._z2=d.z2,d.z2+=fx):ux!=null&&(d.z2=ux,this._z2=null);var gx=p&&p.useNameLabel;setLabelStyle(d,gn,{labelFetcher:Q,labelDataIndex:l,defaultText:yx,inheritColor:dx,defaultOpacity:cx.opacity});function yx(bx){return gx?a.getName(bx):getDefaultLabel(a,bx)}this._sizeX=u[0]/2,this._sizeY=u[1]/2;var _x=d.ensureState("emphasis");_x.style=Ct,d.ensureState("select").style=en,d.ensureState("blur").style=ar;var vx=Cn==null||Cn===!0?Math.max(1.1,3/this._sizeY):isFinite(Cn)&&Cn>0?+Cn:1;_x.scaleX=this._sizeX*vx,_x.scaleY=this._sizeY*vx,this.setSymbolScale(1),toggleHoverEmphasis(this,tn,on,cn)},n.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},n.prototype.fadeOut=function(a,l,u){var c=this.childAt(0),p=getECData(this).dataIndex,d=u&&u.animation;if(this.silent=c.silent=!0,u&&u.fadeLabel){var Q=c.getTextContent();Q&&removeElement(Q,{style:{opacity:0}},l,{dataIndex:p,removeOpt:d,cb:function(){c.removeTextContent()}})}else c.removeTextContent();removeElement(c,{style:{opacity:0},scaleX:0,scaleY:0},l,{dataIndex:p,cb:a,removeOpt:d})},n.getSymbolSize=function(a,l){return normalizeSymbolSize(a.getItemVisual(l,"symbolSize"))},n}(Group$3);function driftSymbol(t,n){this.parent.drift(t,n)}function symbolNeedsDraw$1(t,n,a,l){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(l.isIgnore&&l.isIgnore(a))&&!(l.clipShape&&!l.clipShape.contain(n[0],n[1]))&&t.getItemVisual(a,"symbol")!=="none"}function normalizeUpdateOpt(t){return t!=null&&!isObject$3(t)&&(t={isIgnore:t}),t||{}}function makeSeriesScope$2(t){var n=t.hostModel,a=n.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=function(){function t(n){this.group=new Group$3,this._SymbolCtor=n||Symbol$1}return t.prototype.updateData=function(n,a){this._progressiveEls=null,a=normalizeUpdateOpt(a);var l=this.group,u=n.hostModel,c=this._data,p=this._SymbolCtor,d=a.disableAnimation,Q=makeSeriesScope$2(n),Ct={disableAnimation:d},ar=a.getSymbolPoint||function(en){return n.getItemLayout(en)};c||l.removeAll(),n.diff(c).add(function(en){var tn=ar(en);if(symbolNeedsDraw$1(n,tn,en,a)){var on=new p(n,en,Q,Ct);on.setPosition(tn),n.setItemGraphicEl(en,on),l.add(on)}}).update(function(en,tn){var on=c.getItemGraphicEl(tn),cn=ar(en);if(!symbolNeedsDraw$1(n,cn,en,a)){l.remove(on);return}var gn=n.getItemVisual(en,"symbol")||"circle",Cn=on&&on.getSymbolType&&on.getSymbolType();if(!on||Cn&&Cn!==gn)l.remove(on),on=new p(n,en,Q,Ct),on.setPosition(cn);else{on.updateData(n,en,Q,Ct);var ex={x:cn[0],y:cn[1]};d?on.attr(ex):updateProps$1(on,ex,u)}l.add(on),n.setItemGraphicEl(en,on)}).remove(function(en){var tn=c.getItemGraphicEl(en);tn&&tn.fadeOut(function(){l.remove(tn)},u)}).execute(),this._getSymbolPoint=ar,this._data=n},t.prototype.updateLayout=function(){var n=this,a=this._data;a&&a.eachItemGraphicEl(function(l,u){var c=n._getSymbolPoint(u);l.setPosition(c),l.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$2(n),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a,l){this._progressiveEls=[],l=normalizeUpdateOpt(l);function u(Q){Q.isGroup||(Q.incremental=!0,Q.ensureState("emphasis").hoverLayer=!0)}for(var c=n.start;c<n.end;c++){var p=a.getItemLayout(c);if(symbolNeedsDraw$1(a,p,c,l)){var d=new this._SymbolCtor(a,c,this._seriesScope);d.traverse(u),d.setPosition(p),this.group.add(d),a.setItemGraphicEl(c,d),this._progressiveEls.push(d)}}},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype.remove=function(n){var a=this.group,l=this._data;l&&n?l.eachItemGraphicEl(function(u){u.fadeOut(function(){a.remove(u)},l.hostModel)}):a.removeAll()},t}();function prepareDataCoordInfo(t,n,a){var l=t.getBaseAxis(),u=t.getOtherAxis(l),c=getValueStart(u,a),p=l.dim,d=u.dim,Q=n.mapDimension(d),Ct=n.mapDimension(p),ar=d==="x"||d==="radius"?1:0,en=map$1(t.dimensions,function(cn){return n.mapDimension(cn)}),tn=!1,on=n.getCalculationInfo("stackResultDimension");return isDimensionStacked(n,en[0])&&(tn=!0,en[0]=on),isDimensionStacked(n,en[1])&&(tn=!0,en[1]=on),{dataDimsForPoint:en,valueStart:c,valueAxisDim:d,baseAxisDim:p,stacked:!!tn,valueDim:Q,baseDim:Ct,baseDataOffset:ar,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function getValueStart(t,n){var a=0,l=t.scale.getExtent();return n==="start"?a=l[0]:n==="end"?a=l[1]:isNumber(n)&&!isNaN(n)?a=n:l[0]>0?a=l[0]:l[1]<0&&(a=l[1]),a}function getStackedOnPoint(t,n,a,l){var u=NaN;t.stacked&&(u=a.get(a.getCalculationInfo("stackedOverDimension"),l)),isNaN(u)&&(u=t.valueStart);var c=t.baseDataOffset,p=[];return p[c]=a.get(t.baseDim,l),p[1-c]=u,n.dataToPoint(p)}function diffData(t,n){var a=[];return n.diff(t).add(function(l){a.push({cmd:"+",idx:l})}).update(function(l,u){a.push({cmd:"=",idx:u,idx1:l})}).remove(function(l){a.push({cmd:"-",idx:l})}).execute(),a}function lineAnimationDiff(t,n,a,l,u,c,p,d){for(var Q=diffData(t,n),Ct=[],ar=[],en=[],tn=[],on=[],cn=[],gn=[],Cn=prepareDataCoordInfo(u,n,p),ex=t.getLayout("points")||[],ix=n.getLayout("points")||[],ax=0;ax<Q.length;ax++){var ox=Q[ax],lx=!0,cx=void 0,dx=void 0;switch(ox.cmd){case"=":cx=ox.idx*2,dx=ox.idx1*2;var hx=ex[cx],fx=ex[cx+1],ux=ix[dx],gx=ix[dx+1];(isNaN(hx)||isNaN(fx))&&(hx=ux,fx=gx),Ct.push(hx,fx),ar.push(ux,gx),en.push(a[cx],a[cx+1]),tn.push(l[dx],l[dx+1]),gn.push(n.getRawIndex(ox.idx1));break;case"+":var yx=ox.idx,_x=Cn.dataDimsForPoint,vx=u.dataToPoint([n.get(_x[0],yx),n.get(_x[1],yx)]);dx=yx*2,Ct.push(vx[0],vx[1]),ar.push(ix[dx],ix[dx+1]);var bx=getStackedOnPoint(Cn,u,n,yx);en.push(bx[0],bx[1]),tn.push(l[dx],l[dx+1]),gn.push(n.getRawIndex(yx));break;case"-":lx=!1}lx&&(on.push(ox),cn.push(cn.length))}cn.sort(function(Ox,Lx){return gn[Ox]-gn[Lx]});for(var xx=Ct.length,Sx=createFloat32Array(xx),Ax=createFloat32Array(xx),Cx=createFloat32Array(xx),Tx=createFloat32Array(xx),Px=[],ax=0;ax<cn.length;ax++){var Fx=cn[ax],Mx=ax*2,Dx=Fx*2;Sx[Mx]=Ct[Dx],Sx[Mx+1]=Ct[Dx+1],Ax[Mx]=ar[Dx],Ax[Mx+1]=ar[Dx+1],Cx[Mx]=en[Dx],Cx[Mx+1]=en[Dx+1],Tx[Mx]=tn[Dx],Tx[Mx+1]=tn[Dx+1],Px[ax]=on[Fx]}return{current:Sx,next:Ax,stackedOnCurrent:Cx,stackedOnNext:Tx,status:Px}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(t,n){return isNaN(t)||isNaN(n)}function drawSegment(t,n,a,l,u,c,p,d,Q){for(var Ct,ar,en,tn,on,cn,gn=a,Cn=0;Cn<l;Cn++){var ex=n[gn*2],ix=n[gn*2+1];if(gn>=u||gn<0)break;if(isPointNull$1(ex,ix)){if(Q){gn+=c;continue}break}if(gn===a)t[c>0?"moveTo":"lineTo"](ex,ix),en=ex,tn=ix;else{var ax=ex-Ct,ox=ix-ar;if(ax*ax+ox*ox<.5){gn+=c;continue}if(p>0){for(var lx=gn+c,cx=n[lx*2],dx=n[lx*2+1];cx===ex&&dx===ix&&Cn<l;)Cn++,lx+=c,gn+=c,cx=n[lx*2],dx=n[lx*2+1],ex=n[gn*2],ix=n[gn*2+1],ax=ex-Ct,ox=ix-ar;var hx=Cn+1;if(Q)for(;isPointNull$1(cx,dx)&&hx<l;)hx++,lx+=c,cx=n[lx*2],dx=n[lx*2+1];var fx=.5,ux=0,gx=0,yx=void 0,_x=void 0;if(hx>=l||isPointNull$1(cx,dx))on=ex,cn=ix;else{ux=cx-Ct,gx=dx-ar;var vx=ex-Ct,bx=cx-ex,xx=ix-ar,Sx=dx-ix,Ax=void 0,Cx=void 0;if(d==="x"){Ax=Math.abs(vx),Cx=Math.abs(bx);var Tx=ux>0?1:-1;on=ex-Tx*Ax*p,cn=ix,yx=ex+Tx*Cx*p,_x=ix}else if(d==="y"){Ax=Math.abs(xx),Cx=Math.abs(Sx);var Px=gx>0?1:-1;on=ex,cn=ix-Px*Ax*p,yx=ex,_x=ix+Px*Cx*p}else Ax=Math.sqrt(vx*vx+xx*xx),Cx=Math.sqrt(bx*bx+Sx*Sx),fx=Cx/(Cx+Ax),on=ex-ux*p*(1-fx),cn=ix-gx*p*(1-fx),yx=ex+ux*p*fx,_x=ix+gx*p*fx,yx=mathMin$5(yx,mathMax$5(cx,ex)),_x=mathMin$5(_x,mathMax$5(dx,ix)),yx=mathMax$5(yx,mathMin$5(cx,ex)),_x=mathMax$5(_x,mathMin$5(dx,ix)),ux=yx-ex,gx=_x-ix,on=ex-ux*Ax/Cx,cn=ix-gx*Ax/Cx,on=mathMin$5(on,mathMax$5(Ct,ex)),cn=mathMin$5(cn,mathMax$5(ar,ix)),on=mathMax$5(on,mathMin$5(Ct,ex)),cn=mathMax$5(cn,mathMin$5(ar,ix)),ux=ex-on,gx=ix-cn,yx=ex+ux*Cx/Ax,_x=ix+gx*Cx/Ax}t.bezierCurveTo(en,tn,on,cn,ex,ix),en=yx,tn=_x}else t.lineTo(ex,ix)}Ct=ex,ar=ix,gn+=c}return Cn}var ECPolylineShape=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),ECPolyline=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="ec-polyline",l}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ECPolylineShape},n.prototype.buildPath=function(a,l){var u=l.points,c=0,p=u.length/2;if(l.connectNulls){for(;p>0&&isPointNull$1(u[p*2-2],u[p*2-1]);p--);for(;c<p&&isPointNull$1(u[c*2],u[c*2+1]);c++);}for(;c<p;)c+=drawSegment(a,u,c,p,p,1,l.smooth,l.smoothMonotone,l.connectNulls)+1},n.prototype.getPointOn=function(a,l){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var u=this.path,c=u.data,p=PathProxy.CMD,d,Q,Ct=l==="x",ar=[],en=0;en<c.length;){var tn=c[en++],on=void 0,cn=void 0,gn=void 0,Cn=void 0,ex=void 0,ix=void 0,ax=void 0;switch(tn){case p.M:d=c[en++],Q=c[en++];break;case p.L:if(on=c[en++],cn=c[en++],ax=Ct?(a-d)/(on-d):(a-Q)/(cn-Q),ax<=1&&ax>=0){var ox=Ct?(cn-Q)*ax+Q:(on-d)*ax+d;return Ct?[a,ox]:[ox,a]}d=on,Q=cn;break;case p.C:on=c[en++],cn=c[en++],gn=c[en++],Cn=c[en++],ex=c[en++],ix=c[en++];var lx=Ct?cubicRootAt(d,on,gn,ex,a,ar):cubicRootAt(Q,cn,Cn,ix,a,ar);if(lx>0)for(var cx=0;cx<lx;cx++){var dx=ar[cx];if(dx<=1&&dx>=0){var ox=Ct?cubicAt(Q,cn,Cn,ix,dx):cubicAt(d,on,gn,ex,dx);return Ct?[a,ox]:[ox,a]}}d=ex,Q=ix;break}}},n}(Path),ECPolygonShape=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(ECPolylineShape),ECPolygon=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="ec-polygon",l}return n.prototype.getDefaultShape=function(){return new ECPolygonShape},n.prototype.buildPath=function(a,l){var u=l.points,c=l.stackedOnPoints,p=0,d=u.length/2,Q=l.smoothMonotone;if(l.connectNulls){for(;d>0&&isPointNull$1(u[d*2-2],u[d*2-1]);d--);for(;p<d&&isPointNull$1(u[p*2],u[p*2+1]);p++);}for(;p<d;){var Ct=drawSegment(a,u,p,d,d,1,l.smooth,Q,l.connectNulls);drawSegment(a,c,p+Ct-1,Ct,d,-1,l.stackedOnSmooth,Q,l.connectNulls),p+=Ct+1,a.closePath()}},n}(Path);function createGridClipPath(t,n,a,l,u){var c=t.getArea(),p=c.x,d=c.y,Q=c.width,Ct=c.height,ar=a.get(["lineStyle","width"])||0;p-=ar/2,d-=ar/2,Q+=ar,Ct+=ar,Q=Math.ceil(Q),p!==Math.floor(p)&&(p=Math.floor(p),Q++);var en=new Rect$2({shape:{x:p,y:d,width:Q,height:Ct}});if(n){var tn=t.getBaseAxis(),on=tn.isHorizontal(),cn=tn.inverse;on?(cn&&(en.shape.x+=Q),en.shape.width=0):(cn||(en.shape.y+=Ct),en.shape.height=0);var gn=isFunction$1(u)?function(Cn){u(Cn,en)}:null;initProps(en,{shape:{width:Q,height:Ct,x:p,y:d}},a,null,l,gn)}return en}function createPolarClipPath(t,n,a){var l=t.getArea(),u=round$3(l.r0,1),c=round$3(l.r,1),p=new Sector({shape:{cx:round$3(t.cx,1),cy:round$3(t.cy,1),r0:u,r:c,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}});if(n){var d=t.getBaseAxis().dim==="angle";d?p.shape.endAngle=l.startAngle:p.shape.r=u,initProps(p,{shape:{endAngle:l.endAngle,r:c}},a)}return p}function createClipPath(t,n,a,l,u){if(t){if(t.type==="polar")return createPolarClipPath(t,n,a);if(t.type==="cartesian2d")return createGridClipPath(t,n,a,l,u)}else return null;return null}function isCoordinateSystemType(t,n){return t.type===n}function isPointsSame(t,n){if(t.length===n.length){for(var a=0;a<t.length;a++)if(t[a]!==n[a])return;return!0}}function bboxFromPoints(t){for(var n=1/0,a=1/0,l=-1/0,u=-1/0,c=0;c<t.length;){var p=t[c++],d=t[c++];isNaN(p)||(n=Math.min(p,n),l=Math.max(p,l)),isNaN(d)||(a=Math.min(d,a),u=Math.max(d,u))}return[[n,a],[l,u]]}function getBoundingDiff(t,n){var a=bboxFromPoints(t),l=a[0],u=a[1],c=bboxFromPoints(n),p=c[0],d=c[1];return Math.max(Math.abs(l[0]-p[0]),Math.abs(l[1]-p[1]),Math.abs(u[0]-d[0]),Math.abs(u[1]-d[1]))}function getSmooth(t){return isNumber(t)?t:t?.5:0}function getStackedOnPoints(t,n,a){if(!a.valueDim)return[];for(var l=n.count(),u=createFloat32Array(l*2),c=0;c<l;c++){var p=getStackedOnPoint(a,t,n,c);u[c*2]=p[0],u[c*2+1]=p[1]}return u}function turnPointsIntoStep(t,n,a,l,u){var c=a.getBaseAxis(),p=c.dim==="x"||c.dim==="radius"?0:1,d=[],Q=0,Ct=[],ar=[],en=[],tn=[];if(u){for(Q=0;Q<t.length;Q+=2){var on=n||t;!isNaN(on[Q])&&!isNaN(on[Q+1])&&tn.push(t[Q],t[Q+1])}t=tn}for(Q=0;Q<t.length-2;Q+=2)switch(en[0]=t[Q+2],en[1]=t[Q+3],ar[0]=t[Q],ar[1]=t[Q+1],d.push(ar[0],ar[1]),l){case"end":Ct[p]=en[p],Ct[1-p]=ar[1-p],d.push(Ct[0],Ct[1]);break;case"middle":var cn=(ar[p]+en[p])/2,gn=[];Ct[p]=gn[p]=cn,Ct[1-p]=ar[1-p],gn[1-p]=en[1-p],d.push(Ct[0],Ct[1]),d.push(gn[0],gn[1]);break;default:Ct[p]=ar[p],Ct[1-p]=en[1-p],d.push(Ct[0],Ct[1])}return d.push(t[Q++],t[Q++]),d}function clipColorStops(t,n){var a=[],l=t.length,u,c;function p(ar,en,tn){var on=ar.coord,cn=(tn-on)/(en.coord-on),gn=lerp(cn,[ar.color,en.color]);return{coord:tn,color:gn}}for(var d=0;d<l;d++){var Q=t[d],Ct=Q.coord;if(Ct<0)u=Q;else if(Ct>n){c?a.push(p(c,Q,n)):u&&a.push(p(u,Q,0),p(u,Q,n));break}else u&&(a.push(p(u,Q,0)),u=null),a.push(Q),c=Q}return a}function getVisualGradient(t,n,a){var l=t.getVisual("visualMeta");if(!(!l||!l.length||!t.count())&&n.type==="cartesian2d"){for(var u,c,p=l.length-1;p>=0;p--){var d=t.getDimensionInfo(l[p].dimension);if(u=d&&d.coordDim,u==="x"||u==="y"){c=l[p];break}}if(c){var Q=n.getAxis(u),Ct=map$1(c.stops,function(ax){return{coord:Q.toGlobalCoord(Q.dataToCoord(ax.value)),color:ax.color}}),ar=Ct.length,en=c.outerColors.slice();ar&&Ct[0].coord>Ct[ar-1].coord&&(Ct.reverse(),en.reverse());var tn=clipColorStops(Ct,u==="x"?a.getWidth():a.getHeight()),on=tn.length;if(!on&&ar)return Ct[0].coord<0?en[1]?en[1]:Ct[ar-1].color:en[0]?en[0]:Ct[0].color;var cn=10,gn=tn[0].coord-cn,Cn=tn[on-1].coord+cn,ex=Cn-gn;if(ex<.001)return"transparent";each$f(tn,function(ax){ax.offset=(ax.coord-gn)/ex}),tn.push({offset:on?tn[on-1].offset:.5,color:en[1]||"transparent"}),tn.unshift({offset:on?tn[0].offset:.5,color:en[0]||"transparent"});var ix=new LinearGradient(0,0,0,0,tn,!0);return ix[u]=gn,ix[u+"2"]=Cn,ix}}}function getIsIgnoreFunc(t,n,a){var l=t.get("showAllSymbol"),u=l==="auto";if(!(l&&!u)){var c=a.getAxesByScale("ordinal")[0];if(c&&!(u&&canShowAllSymbolForCategory(c,n))){var p=n.mapDimension(c.dim),d={};return each$f(c.getViewLabels(),function(Q){var Ct=c.scale.getRawOrdinalNumber(Q.tickValue);d[Ct]=1}),function(Q){return!d.hasOwnProperty(n.get(p,Q))}}}}function canShowAllSymbolForCategory(t,n){var a=t.getExtent(),l=Math.abs(a[1]-a[0])/t.scale.count();isNaN(l)&&(l=0);for(var u=n.count(),c=Math.max(1,Math.round(u/5)),p=0;p<u;p+=c)if(Symbol$1.getSymbolSize(n,p)[t.isHorizontal()?1:0]*1.5>l)return!1;return!0}function isPointNull(t,n){return isNaN(t)||isNaN(n)}function getLastIndexNotNull(t){for(var n=t.length/2;n>0&&isPointNull(t[n*2-2],t[n*2-1]);n--);return n-1}function getPointAtIndex(t,n){return[t[n*2],t[n*2+1]]}function getIndexRange(t,n,a){for(var l=t.length/2,u=a==="x"?0:1,c,p,d=0,Q=-1,Ct=0;Ct<l;Ct++)if(p=t[Ct*2+u],!(isNaN(p)||isNaN(t[Ct*2+1-u]))){if(Ct===0){c=p;continue}if(c<=n&&p>=n||c>=n&&p<=n){Q=Ct;break}d=Ct,c=p}return{range:[d,Q],t:(n-c)/(p-c)}}function anyStateShowEndLabel(t){if(t.get(["endLabel","show"]))return!0;for(var n=0;n<SPECIAL_STATES.length;n++)if(t.get([SPECIAL_STATES[n],"endLabel","show"]))return!0;return!1}function createLineClipPath(t,n,a,l){if(isCoordinateSystemType(n,"cartesian2d")){var u=l.getModel("endLabel"),c=u.get("valueAnimation"),p=l.getData(),d={lastFrameIndex:0},Q=anyStateShowEndLabel(l)?function(on,cn){t._endLabelOnDuring(on,cn,p,d,c,u,n)}:null,Ct=n.getBaseAxis().isHorizontal(),ar=createGridClipPath(n,a,l,function(){var on=t._endLabel;on&&a&&d.originalX!=null&&on.attr({x:d.originalX,y:d.originalY})},Q);if(!l.get("clip",!0)){var en=ar.shape,tn=Math.max(en.width,en.height);Ct?(en.y-=tn,en.height+=tn*2):(en.x-=tn,en.width+=tn*2)}return Q&&Q(1,ar),ar}else return createPolarClipPath(n,a,l)}function getEndLabelStateSpecified(t,n){var a=n.getBaseAxis(),l=a.isHorizontal(),u=a.inverse,c=l?u?"right":"left":"center",p=l?"middle":u?"top":"bottom";return{normal:{align:t.get("align")||c,verticalAlign:t.get("verticalAlign")||p}}}var LineView=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){var a=new Group$3,l=new SymbolDraw;this.group.add(l.group),this._symbolDraw=l,this._lineGroup=a,this._changePolyState=bind$1(this._changePolyState,this)},n.prototype.render=function(a,l,u){var c=a.coordinateSystem,p=this.group,d=a.getData(),Q=a.getModel("lineStyle"),Ct=a.getModel("areaStyle"),ar=d.getLayout("points")||[],en=c.type==="polar",tn=this._coordSys,on=this._symbolDraw,cn=this._polyline,gn=this._polygon,Cn=this._lineGroup,ex=!l.ssr&&a.get("animation"),ix=!Ct.isEmpty(),ax=Ct.get("origin"),ox=prepareDataCoordInfo(c,d,ax),lx=ix&&getStackedOnPoints(c,d,ox),cx=a.get("showSymbol"),dx=a.get("connectNulls"),hx=cx&&!en&&getIsIgnoreFunc(a,d,c),fx=this._data;fx&&fx.eachItemGraphicEl(function(Ox,Lx){Ox.__temp&&(p.remove(Ox),fx.setItemGraphicEl(Lx,null))}),cx||on.remove(),p.add(Cn);var ux=en?!1:a.get("step"),gx;c&&c.getArea&&a.get("clip",!0)&&(gx=c.getArea(),gx.width!=null?(gx.x-=.1,gx.y-=.1,gx.width+=.2,gx.height+=.2):gx.r0&&(gx.r0-=.5,gx.r+=.5)),this._clipShapeForSymbol=gx;var yx=getVisualGradient(d,c,u)||d.getVisual("style")[d.getVisual("drawType")];if(!(cn&&tn.type===c.type&&ux===this._step))cx&&on.updateData(d,{isIgnore:hx,clipShape:gx,disableAnimation:!0,getSymbolPoint:function(Ox){return[ar[Ox*2],ar[Ox*2+1]]}}),ex&&this._initSymbolLabelAnimation(d,c,gx),ux&&(lx&&(lx=turnPointsIntoStep(lx,ar,c,ux,dx)),ar=turnPointsIntoStep(ar,null,c,ux,dx)),cn=this._newPolyline(ar),ix?gn=this._newPolygon(ar,lx):gn&&(Cn.remove(gn),gn=this._polygon=null),en||this._initOrUpdateEndLabel(a,c,convertToColorString(yx)),Cn.setClipPath(createLineClipPath(this,c,!0,a));else{ix&&!gn?gn=this._newPolygon(ar,lx):gn&&!ix&&(Cn.remove(gn),gn=this._polygon=null),en||this._initOrUpdateEndLabel(a,c,convertToColorString(yx));var _x=Cn.getClipPath();if(_x){var vx=createLineClipPath(this,c,!1,a);initProps(_x,{shape:vx.shape},a)}else Cn.setClipPath(createLineClipPath(this,c,!0,a));cx&&on.updateData(d,{isIgnore:hx,clipShape:gx,disableAnimation:!0,getSymbolPoint:function(Ox){return[ar[Ox*2],ar[Ox*2+1]]}}),(!isPointsSame(this._stackedOnPoints,lx)||!isPointsSame(this._points,ar))&&(ex?this._doUpdateAnimation(d,lx,c,u,ux,ax,dx):(ux&&(lx&&(lx=turnPointsIntoStep(lx,ar,c,ux,dx)),ar=turnPointsIntoStep(ar,null,c,ux,dx)),cn.setShape({points:ar}),gn&&gn.setShape({points:ar,stackedOnPoints:lx})))}var bx=a.getModel("emphasis"),xx=bx.get("focus"),Sx=bx.get("blurScope"),Ax=bx.get("disabled");if(cn.useStyle(defaults(Q.getLineStyle(),{fill:"none",stroke:yx,lineJoin:"bevel"})),setStatesStylesFromModel(cn,a,"lineStyle"),cn.style.lineWidth>0&&a.get(["emphasis","lineStyle","width"])==="bolder"){var Cx=cn.getState("emphasis").style;Cx.lineWidth=+cn.style.lineWidth+1}getECData(cn).seriesIndex=a.seriesIndex,toggleHoverEmphasis(cn,xx,Sx,Ax);var Tx=getSmooth(a.get("smooth")),Px=a.get("smoothMonotone");if(cn.setShape({smooth:Tx,smoothMonotone:Px,connectNulls:dx}),gn){var Fx=d.getCalculationInfo("stackedOnSeries"),Mx=0;gn.useStyle(defaults(Ct.getAreaStyle(),{fill:yx,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),Fx&&(Mx=getSmooth(Fx.get("smooth"))),gn.setShape({smooth:Tx,stackedOnSmooth:Mx,smoothMonotone:Px,connectNulls:dx}),setStatesStylesFromModel(gn,a,"areaStyle"),getECData(gn).seriesIndex=a.seriesIndex,toggleHoverEmphasis(gn,xx,Sx,Ax)}var Dx=this._changePolyState;d.eachItemGraphicEl(function(Ox){Ox&&(Ox.onHoverStateChange=Dx)}),this._polyline.onHoverStateChange=Dx,this._data=d,this._coordSys=c,this._stackedOnPoints=lx,this._points=ar,this._step=ux,this._valueOrigin=ax,a.get("triggerLineEvent")&&(this.packEventData(a,cn),gn&&this.packEventData(a,gn))},n.prototype.packEventData=function(a,l){getECData(l).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},n.prototype.highlight=function(a,l,u,c){var p=a.getData(),d=queryDataIndex(p,c);if(this._changePolyState("emphasis"),!(d instanceof Array)&&d!=null&&d>=0){var Q=p.getLayout("points"),Ct=p.getItemGraphicEl(d);if(!Ct){var ar=Q[d*2],en=Q[d*2+1];if(isNaN(ar)||isNaN(en)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(ar,en))return;var tn=a.get("zlevel")||0,on=a.get("z")||0;Ct=new Symbol$1(p,d),Ct.x=ar,Ct.y=en,Ct.setZ(tn,on);var cn=Ct.getSymbolPath().getTextContent();cn&&(cn.zlevel=tn,cn.z=on,cn.z2=this._polyline.z2+1),Ct.__temp=!0,p.setItemGraphicEl(d,Ct),Ct.stopSymbolAnimation(!0),this.group.add(Ct)}Ct.highlight()}else ChartView.prototype.highlight.call(this,a,l,u,c)},n.prototype.downplay=function(a,l,u,c){var p=a.getData(),d=queryDataIndex(p,c);if(this._changePolyState("normal"),d!=null&&d>=0){var Q=p.getItemGraphicEl(d);Q&&(Q.__temp?(p.setItemGraphicEl(d,null),this.group.remove(Q)):Q.downplay())}else ChartView.prototype.downplay.call(this,a,l,u,c)},n.prototype._changePolyState=function(a){var l=this._polygon;setStatesFlag(this._polyline,a),l&&setStatesFlag(l,a)},n.prototype._newPolyline=function(a){var l=this._polyline;return l&&this._lineGroup.remove(l),l=new ECPolyline({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(l),this._polyline=l,l},n.prototype._newPolygon=function(a,l){var u=this._polygon;return u&&this._lineGroup.remove(u),u=new ECPolygon({shape:{points:a,stackedOnPoints:l},segmentIgnoreThreshold:2}),this._lineGroup.add(u),this._polygon=u,u},n.prototype._initSymbolLabelAnimation=function(a,l,u){var c,p,d=l.getBaseAxis(),Q=d.inverse;l.type==="cartesian2d"?(c=d.isHorizontal(),p=!1):l.type==="polar"&&(c=d.dim==="angle",p=!0);var Ct=a.hostModel,ar=Ct.get("animationDuration");isFunction$1(ar)&&(ar=ar(null));var en=Ct.get("animationDelay")||0,tn=isFunction$1(en)?en(null):en;a.eachItemGraphicEl(function(on,cn){var gn=on;if(gn){var Cn=[on.x,on.y],ex=void 0,ix=void 0,ax=void 0;if(u)if(p){var ox=u,lx=l.pointToCoord(Cn);c?(ex=ox.startAngle,ix=ox.endAngle,ax=-lx[1]/180*Math.PI):(ex=ox.r0,ix=ox.r,ax=lx[0])}else{var cx=u;c?(ex=cx.x,ix=cx.x+cx.width,ax=on.x):(ex=cx.y+cx.height,ix=cx.y,ax=on.y)}var dx=ix===ex?0:(ax-ex)/(ix-ex);Q&&(dx=1-dx);var hx=isFunction$1(en)?en(cn):ar*dx+tn,fx=gn.getSymbolPath(),ux=fx.getTextContent();gn.attr({scaleX:0,scaleY:0}),gn.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:hx}),ux&&ux.animateFrom({style:{opacity:0}},{duration:300,delay:hx}),fx.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(a,l,u){var c=a.getModel("endLabel");if(anyStateShowEndLabel(a)){var p=a.getData(),d=this._polyline,Q=p.getLayout("points");if(!Q){d.removeTextContent(),this._endLabel=null;return}var Ct=this._endLabel;Ct||(Ct=this._endLabel=new ZRText({z2:200}),Ct.ignoreClip=!0,d.setTextContent(this._endLabel),d.disableLabelAnimation=!0);var ar=getLastIndexNotNull(Q);ar>=0&&(setLabelStyle(d,getLabelStatesModels(a,"endLabel"),{inheritColor:u,labelFetcher:a,labelDataIndex:ar,defaultText:function(en,tn,on){return on!=null?getDefaultInterpolatedLabel(p,on):getDefaultLabel(p,en)},enableTextSetter:!0},getEndLabelStateSpecified(c,l)),d.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(a,l,u,c,p,d,Q){var Ct=this._endLabel,ar=this._polyline;if(Ct){a<1&&c.originalX==null&&(c.originalX=Ct.x,c.originalY=Ct.y);var en=u.getLayout("points"),tn=u.hostModel,on=tn.get("connectNulls"),cn=d.get("precision"),gn=d.get("distance")||0,Cn=Q.getBaseAxis(),ex=Cn.isHorizontal(),ix=Cn.inverse,ax=l.shape,ox=ix?ex?ax.x:ax.y+ax.height:ex?ax.x+ax.width:ax.y,lx=(ex?gn:0)*(ix?-1:1),cx=(ex?0:-gn)*(ix?-1:1),dx=ex?"x":"y",hx=getIndexRange(en,ox,dx),fx=hx.range,ux=fx[1]-fx[0],gx=void 0;if(ux>=1){if(ux>1&&!on){var yx=getPointAtIndex(en,fx[0]);Ct.attr({x:yx[0]+lx,y:yx[1]+cx}),p&&(gx=tn.getRawValue(fx[0]))}else{var yx=ar.getPointOn(ox,dx);yx&&Ct.attr({x:yx[0]+lx,y:yx[1]+cx});var _x=tn.getRawValue(fx[0]),vx=tn.getRawValue(fx[1]);p&&(gx=interpolateRawValues(u,cn,_x,vx,hx.t))}c.lastFrameIndex=fx[0]}else{var bx=a===1||c.lastFrameIndex>0?fx[0]:0,yx=getPointAtIndex(en,bx);p&&(gx=tn.getRawValue(bx)),Ct.attr({x:yx[0]+lx,y:yx[1]+cx})}if(p){var xx=labelInner(Ct);typeof xx.setLabelText=="function"&&xx.setLabelText(gx)}}},n.prototype._doUpdateAnimation=function(a,l,u,c,p,d,Q){var Ct=this._polyline,ar=this._polygon,en=a.hostModel,tn=lineAnimationDiff(this._data,a,this._stackedOnPoints,l,this._coordSys,u,this._valueOrigin),on=tn.current,cn=tn.stackedOnCurrent,gn=tn.next,Cn=tn.stackedOnNext;if(p&&(cn=turnPointsIntoStep(tn.stackedOnCurrent,tn.current,u,p,Q),on=turnPointsIntoStep(tn.current,null,u,p,Q),Cn=turnPointsIntoStep(tn.stackedOnNext,tn.next,u,p,Q),gn=turnPointsIntoStep(tn.next,null,u,p,Q)),getBoundingDiff(on,gn)>3e3||ar&&getBoundingDiff(cn,Cn)>3e3){Ct.stopAnimation(),Ct.setShape({points:gn}),ar&&(ar.stopAnimation(),ar.setShape({points:gn,stackedOnPoints:Cn}));return}Ct.shape.__points=tn.current,Ct.shape.points=on;var ex={shape:{points:gn}};tn.current!==on&&(ex.shape.__points=tn.next),Ct.stopAnimation(),updateProps$1(Ct,ex,en),ar&&(ar.setShape({points:on,stackedOnPoints:cn}),ar.stopAnimation(),updateProps$1(ar,{shape:{stackedOnPoints:Cn}},en),Ct.shape.points!==ar.shape.points&&(ar.shape.points=Ct.shape.points));for(var ix=[],ax=tn.status,ox=0;ox<ax.length;ox++){var lx=ax[ox].cmd;if(lx==="="){var cx=a.getItemGraphicEl(ax[ox].idx1);cx&&ix.push({el:cx,ptIdx:ox})}}Ct.animators&&Ct.animators.length&&Ct.animators[0].during(function(){ar&&ar.dirtyShape();for(var dx=Ct.shape.__points,hx=0;hx<ix.length;hx++){var fx=ix[hx].el,ux=ix[hx].ptIdx*2;fx.x=dx[ux],fx.y=dx[ux+1],fx.markRedraw()}})},n.prototype.remove=function(a){var l=this.group,u=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),u&&u.eachItemGraphicEl(function(c,p){c.__temp&&(l.remove(c),u.setItemGraphicEl(p,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n}(ChartView);function pointsLayout(t,n){return{seriesType:t,plan:createRenderPlanner(),reset:function(a){var l=a.getData(),u=a.coordinateSystem,c=a.pipelineContext,p=n||c.large;if(u){var d=map$1(u.dimensions,function(on){return l.mapDimension(on)}).slice(0,2),Q=d.length,Ct=l.getCalculationInfo("stackResultDimension");isDimensionStacked(l,d[0])&&(d[0]=Ct),isDimensionStacked(l,d[1])&&(d[1]=Ct);var ar=l.getStore(),en=l.getDimensionIndex(d[0]),tn=l.getDimensionIndex(d[1]);return Q&&{progress:function(on,cn){for(var gn=on.end-on.start,Cn=p&&createFloat32Array(gn*Q),ex=[],ix=[],ax=on.start,ox=0;ax<on.end;ax++){var lx=void 0;if(Q===1){var cx=ar.get(en,ax);lx=u.dataToPoint(cx,null,ix)}else ex[0]=ar.get(en,ax),ex[1]=ar.get(tn,ax),lx=u.dataToPoint(ex,null,ix);p?(Cn[ox++]=lx[0],Cn[ox++]=lx[1]):cn.setItemLayout(ax,lx.slice())}p&&cn.setLayout("points",Cn)}}}}}}var samplers={average:function(t){for(var n=0,a=0,l=0;l<t.length;l++)isNaN(t[l])||(n+=t[l],a++);return a===0?NaN:n/a},sum:function(t){for(var n=0,a=0;a<t.length;a++)n+=t[a]||0;return n},max:function(t){for(var n=-1/0,a=0;a<t.length;a++)t[a]>n&&(n=t[a]);return isFinite(n)?n:NaN},min:function(t){for(var n=1/0,a=0;a<t.length;a++)t[a]<n&&(n=t[a]);return isFinite(n)?n:NaN},nearest:function(t){return t[0]}},indexSampler=function(t){return Math.round(t.length/2)};function dataSample(t){return{seriesType:t,reset:function(n,a,l){var u=n.getData(),c=n.get("sampling"),p=n.coordinateSystem,d=u.count();if(d>10&&p.type==="cartesian2d"&&c){var Q=p.getBaseAxis(),Ct=p.getOtherAxis(Q),ar=Q.getExtent(),en=l.getDevicePixelRatio(),tn=Math.abs(ar[1]-ar[0])*(en||1),on=Math.round(d/tn);if(isFinite(on)&&on>1){c==="lttb"?n.setData(u.lttbDownSample(u.mapDimension(Ct.dim),1/on)):c==="minmax"&&n.setData(u.minmaxDownSample(u.mapDimension(Ct.dim),1/on));var cn=void 0;isString$1(c)?cn=samplers[c]:isFunction$1(c)&&(cn=c),cn&&n.setData(u.downSample(u.mapDimension(Ct.dim),1/on,cn,indexSampler))}}}}}function install$Q(t){t.registerChartView(LineView),t.registerSeriesModel(LineSeriesModel),t.registerLayout(pointsLayout("line",!0)),t.registerVisual({seriesType:"line",reset:function(n){var a=n.getData(),l=n.getModel("lineStyle").getLineStyle();l&&!l.stroke&&(l.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",l)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,l){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(a,l,u){var c=this.coordinateSystem;if(c&&c.clampData){var p=c.clampData(a),d=c.dataToPoint(p);if(u)each$f(c.getAxes(),function(tn,on){if(tn.type==="category"&&l!=null){var cn=tn.getTicksCoords(),gn=tn.getTickModel().get("alignWithLabel"),Cn=p[on],ex=l[on]==="x1"||l[on]==="y1";if(ex&&!gn&&(Cn+=1),cn.length<2)return;if(cn.length===2){d[on]=tn.toGlobalCoord(tn.getExtent()[ex?1:0]);return}for(var ix=void 0,ax=void 0,ox=1,lx=0;lx<cn.length;lx++){var cx=cn[lx].coord,dx=lx===cn.length-1?cn[lx-1].tickValue+ox:cn[lx].tickValue;if(dx===Cn){ax=cx;break}else if(dx<Cn)ix=cx;else if(ix!=null&&dx>Cn){ax=(cx+ix)/2;break}lx===1&&(ox=dx-cn[0].tickValue)}ax==null&&(ix?ix&&(ax=cn[cn.length-1].coord):ax=cn[0].coord),d[on]=tn.toGlobalCoord(ax)}});else{var Q=this.getData(),Ct=Q.getLayout("offset"),ar=Q.getLayout("size"),en=c.getBaseAxis().isHorizontal()?0:1;d[en]+=Ct+ar/2}return d}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},n.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),l=this.get("largeThreshold");return l>a&&(a=l),a},n.prototype.brushSelector=function(a,l,u){return u.rect(l.getItemLayout(a))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n}(BaseBarSeriesModel),SausageShape=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),SausagePath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="sausage",l}return n.prototype.getDefaultShape=function(){return new SausageShape},n.prototype.buildPath=function(a,l){var u=l.cx,c=l.cy,p=Math.max(l.r0||0,0),d=Math.max(l.r,0),Q=(d-p)*.5,Ct=p+Q,ar=l.startAngle,en=l.endAngle,tn=l.clockwise,on=Math.PI*2,cn=tn?en-ar<on:ar-en<on;cn||(ar=en-(tn?on:-on));var gn=Math.cos(ar),Cn=Math.sin(ar),ex=Math.cos(en),ix=Math.sin(en);cn?(a.moveTo(gn*p+u,Cn*p+c),a.arc(gn*Ct+u,Cn*Ct+c,Q,-Math.PI+ar,ar,!tn)):a.moveTo(gn*d+u,Cn*d+c),a.arc(u,c,d,ar,en,!tn),a.arc(ex*Ct+u,ix*Ct+c,Q,en-Math.PI*2,en-Math.PI,!tn),p!==0&&a.arc(u,c,p,en,ar,tn)},n}(Path);function createSectorCalculateTextPosition(t,n){n=n||{};var a=n.isRoundCap;return function(l,u,c){var p=u.position;if(!p||p instanceof Array)return calculateTextPosition(l,u,c);var d=t(p),Q=u.distance!=null?u.distance:5,Ct=this.shape,ar=Ct.cx,en=Ct.cy,tn=Ct.r,on=Ct.r0,cn=(tn+on)/2,gn=Ct.startAngle,Cn=Ct.endAngle,ex=(gn+Cn)/2,ix=a?Math.abs(tn-on)/2:0,ax=Math.cos,ox=Math.sin,lx=ar+tn*ax(gn),cx=en+tn*ox(gn),dx="left",hx="top";switch(d){case"startArc":lx=ar+(on-Q)*ax(ex),cx=en+(on-Q)*ox(ex),dx="center",hx="top";break;case"insideStartArc":lx=ar+(on+Q)*ax(ex),cx=en+(on+Q)*ox(ex),dx="center",hx="bottom";break;case"startAngle":lx=ar+cn*ax(gn)+adjustAngleDistanceX(gn,Q+ix,!1),cx=en+cn*ox(gn)+adjustAngleDistanceY(gn,Q+ix,!1),dx="right",hx="middle";break;case"insideStartAngle":lx=ar+cn*ax(gn)+adjustAngleDistanceX(gn,-Q+ix,!1),cx=en+cn*ox(gn)+adjustAngleDistanceY(gn,-Q+ix,!1),dx="left",hx="middle";break;case"middle":lx=ar+cn*ax(ex),cx=en+cn*ox(ex),dx="center",hx="middle";break;case"endArc":lx=ar+(tn+Q)*ax(ex),cx=en+(tn+Q)*ox(ex),dx="center",hx="bottom";break;case"insideEndArc":lx=ar+(tn-Q)*ax(ex),cx=en+(tn-Q)*ox(ex),dx="center",hx="top";break;case"endAngle":lx=ar+cn*ax(Cn)+adjustAngleDistanceX(Cn,Q+ix,!0),cx=en+cn*ox(Cn)+adjustAngleDistanceY(Cn,Q+ix,!0),dx="left",hx="middle";break;case"insideEndAngle":lx=ar+cn*ax(Cn)+adjustAngleDistanceX(Cn,-Q+ix,!0),cx=en+cn*ox(Cn)+adjustAngleDistanceY(Cn,-Q+ix,!0),dx="right",hx="middle";break;default:return calculateTextPosition(l,u,c)}return l=l||{},l.x=lx,l.y=cx,l.align=dx,l.verticalAlign=hx,l}}function setSectorTextRotation(t,n,a,l){if(isNumber(l)){t.setTextConfig({rotation:l});return}else if(isArray$1(n)){t.setTextConfig({rotation:0});return}var u=t.shape,c=u.clockwise?u.startAngle:u.endAngle,p=u.clockwise?u.endAngle:u.startAngle,d=(c+p)/2,Q,Ct=a(n);switch(Ct){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":Q=d;break;case"startAngle":case"insideStartAngle":Q=c;break;case"endAngle":case"insideEndAngle":Q=p;break;default:t.setTextConfig({rotation:0});return}var ar=Math.PI*1.5-Q;Ct==="middle"&&ar>Math.PI/2&&ar<Math.PI*1.5&&(ar-=Math.PI),t.setTextConfig({rotation:ar})}function adjustAngleDistanceX(t,n,a){return n*Math.sin(t)*(a?-1:1)}function adjustAngleDistanceY(t,n,a){return n*Math.cos(t)*(a?1:-1)}function getSectorCornerRadius(t,n,a){var l=t.get("borderRadius");if(l==null)return a?{cornerRadius:0}:null;isArray$1(l)||(l=[l,l,l,l]);var u=Math.abs(n.r||0-n.r0||0);return{cornerRadius:map$1(l,function(c){return parsePercent$1(c,u)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(t,n){var a=t.getArea&&t.getArea();if(isCoordinateSystemType(t,"cartesian2d")){var l=t.getBaseAxis();if(l.type!=="category"||!l.onBand){var u=n.getLayout("bandWidth");l.isHorizontal()?(a.x-=u,a.width+=u*2):(a.y-=u,a.height+=u*2)}}return a}var BarView=function(t){__extends(n,t);function n(){var a=t.call(this)||this;return a.type=n.type,a._isFirstFrame=!0,a}return n.prototype.render=function(a,l,u,c){this._model=a,this._removeOnRenderedListener(u),this._updateDrawMode(a);var p=a.get("coordinateSystem");(p==="cartesian2d"||p==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,l,u):this._renderNormal(a,l,u,c))},n.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},n.prototype.incrementalRender=function(a,l){this._progressiveEls=[],this._incrementalRenderLarge(a,l)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(this._isLargeDraw==null||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},n.prototype._renderNormal=function(a,l,u,c){var p=this.group,d=a.getData(),Q=this._data,Ct=a.coordinateSystem,ar=Ct.getBaseAxis(),en;Ct.type==="cartesian2d"?en=ar.isHorizontal():Ct.type==="polar"&&(en=ar.dim==="angle");var tn=a.isAnimationEnabled()?a:null,on=shouldRealtimeSort(a,Ct);on&&this._enableRealtimeSort(on,d,u);var cn=a.get("clip",!0)||on,gn=getClipArea(Ct,d);p.removeClipPath();var Cn=a.get("roundCap",!0),ex=a.get("showBackground",!0),ix=a.getModel("backgroundStyle"),ax=ix.get("borderRadius")||0,ox=[],lx=this._backgroundEls,cx=c&&c.isInitSort,dx=c&&c.type==="changeAxisOrder";function hx(gx){var yx=getLayout[Ct.type](d,gx),_x=createBackgroundEl(Ct,en,yx);return _x.useStyle(ix.getItemStyle()),Ct.type==="cartesian2d"?_x.setShape("r",ax):_x.setShape("cornerRadius",ax),ox[gx]=_x,_x}d.diff(Q).add(function(gx){var yx=d.getItemModel(gx),_x=getLayout[Ct.type](d,gx,yx);if(ex&&hx(gx),!(!d.hasValue(gx)||!isValidLayout[Ct.type](_x))){var vx=!1;cn&&(vx=clip[Ct.type](gn,_x));var bx=elementCreator[Ct.type](a,d,gx,_x,en,tn,ar.model,!1,Cn);on&&(bx.forceLabelAnimation=!0),updateStyle(bx,d,gx,yx,_x,a,en,Ct.type==="polar"),cx?bx.attr({shape:_x}):on?updateRealtimeAnimation(on,tn,bx,_x,gx,en,!1,!1):initProps(bx,{shape:_x},a,gx),d.setItemGraphicEl(gx,bx),p.add(bx),bx.ignore=vx}}).update(function(gx,yx){var _x=d.getItemModel(gx),vx=getLayout[Ct.type](d,gx,_x);if(ex){var bx=void 0;lx.length===0?bx=hx(yx):(bx=lx[yx],bx.useStyle(ix.getItemStyle()),Ct.type==="cartesian2d"?bx.setShape("r",ax):bx.setShape("cornerRadius",ax),ox[gx]=bx);var xx=getLayout[Ct.type](d,gx),Sx=createBackgroundShape(en,xx,Ct);updateProps$1(bx,{shape:Sx},tn,gx)}var Ax=Q.getItemGraphicEl(yx);if(!d.hasValue(gx)||!isValidLayout[Ct.type](vx)){p.remove(Ax);return}var Cx=!1;if(cn&&(Cx=clip[Ct.type](gn,vx),Cx&&p.remove(Ax)),Ax?saveOldStyle(Ax):Ax=elementCreator[Ct.type](a,d,gx,vx,en,tn,ar.model,!!Ax,Cn),on&&(Ax.forceLabelAnimation=!0),dx){var Tx=Ax.getTextContent();if(Tx){var Px=labelInner(Tx);Px.prevValue!=null&&(Px.prevValue=Px.value)}}else updateStyle(Ax,d,gx,_x,vx,a,en,Ct.type==="polar");cx?Ax.attr({shape:vx}):on?updateRealtimeAnimation(on,tn,Ax,vx,gx,en,!0,dx):updateProps$1(Ax,{shape:vx},a,gx,null),d.setItemGraphicEl(gx,Ax),Ax.ignore=Cx,p.add(Ax)}).remove(function(gx){var yx=Q.getItemGraphicEl(gx);yx&&removeElementWithFadeOut(yx,a,gx)}).execute();var fx=this._backgroundGroup||(this._backgroundGroup=new Group$3);fx.removeAll();for(var ux=0;ux<ox.length;++ux)fx.add(ox[ux]);p.add(fx),this._backgroundEls=ox,this._data=d},n.prototype._renderLarge=function(a,l,u){this._clear(),createLarge$1(a,this.group),this._updateLargeClip(a)},n.prototype._incrementalRenderLarge=function(a,l){this._removeBackground(),createLarge$1(l,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(a){var l=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a),u=this.group;l?u.setClipPath(l):u.removeClipPath()},n.prototype._enableRealtimeSort=function(a,l,u){var c=this;if(l.count()){var p=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(l,a,u),this._isFirstFrame=!1;else{var d=function(Q){var Ct=l.getItemGraphicEl(Q),ar=Ct&&Ct.shape;return ar&&Math.abs(p.isHorizontal()?ar.height:ar.width)||0};this._onRendered=function(){c._updateSortWithinSameData(l,d,p,u)},u.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(a,l,u){var c=[];return a.each(a.mapDimension(l.dim),function(p,d){var Q=u(d);Q=Q??NaN,c.push({dataIndex:d,mappedValue:Q,ordinalNumber:p})}),c.sort(function(p,d){return d.mappedValue-p.mappedValue}),{ordinalNumbers:map$1(c,function(p){return p.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(a,l,u){for(var c=u.scale,p=a.mapDimension(u.dim),d=Number.MAX_VALUE,Q=0,Ct=c.getOrdinalMeta().categories.length;Q<Ct;++Q){var ar=a.rawIndexOf(p,c.getRawOrdinalNumber(Q)),en=ar<0?Number.MIN_VALUE:l(a.indexOfRawIndex(ar));if(en>d)return!0;d=en}return!1},n.prototype._isOrderDifferentInView=function(a,l){for(var u=l.scale,c=u.getExtent(),p=Math.max(0,c[0]),d=Math.min(c[1],u.getOrdinalMeta().categories.length-1);p<=d;++p)if(a.ordinalNumbers[p]!==u.getRawOrdinalNumber(p))return!0},n.prototype._updateSortWithinSameData=function(a,l,u,c){if(this._isOrderChangedWithinSameData(a,l,u)){var p=this._dataSort(a,u,l);this._isOrderDifferentInView(p,u)&&(this._removeOnRenderedListener(c),c.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",axisId:u.index,sortInfo:p}))}},n.prototype._dispatchInitSort=function(a,l,u){var c=l.baseAxis,p=this._dataSort(a,c,function(d){return a.get(a.mapDimension(l.otherAxis.dim),d)});u.dispatchAction({type:"changeAxisOrder",componentType:c.dim+"Axis",isInitSort:!0,axisId:c.index,sortInfo:p})},n.prototype.remove=function(a,l){this._clear(this._model),this._removeOnRenderedListener(l)},n.prototype.dispose=function(a,l){this._removeOnRenderedListener(l)},n.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(a){var l=this.group,u=this._data;a&&a.isAnimationEnabled()&&u&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],u.eachItemGraphicEl(function(c){removeElementWithFadeOut(c,a,getECData(c).dataIndex)})):l.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n}(ChartView),clip={cartesian2d:function(t,n){var a=n.width<0?-1:1,l=n.height<0?-1:1;a<0&&(n.x+=n.width,n.width=-n.width),l<0&&(n.y+=n.height,n.height=-n.height);var u=t.x+t.width,c=t.y+t.height,p=mathMax$4(n.x,t.x),d=mathMin$4(n.x+n.width,u),Q=mathMax$4(n.y,t.y),Ct=mathMin$4(n.y+n.height,c),ar=d<p,en=Ct<Q;return n.x=ar&&p>u?d:p,n.y=en&&Q>c?Ct:Q,n.width=ar?0:d-p,n.height=en?0:Ct-Q,a<0&&(n.x+=n.width,n.width=-n.width),l<0&&(n.y+=n.height,n.height=-n.height),ar||en},polar:function(t,n){var a=n.r0<=n.r?1:-1;if(a<0){var l=n.r;n.r=n.r0,n.r0=l}var u=mathMin$4(n.r,t.r),c=mathMax$4(n.r0,t.r0);n.r=u,n.r0=c;var p=u-c<0;if(a<0){var l=n.r;n.r=n.r0,n.r0=l}return p}},elementCreator={cartesian2d:function(t,n,a,l,u,c,p,d,Q){var Ct=new Rect$2({shape:extend({},l),z2:1});if(Ct.__dataIndex=a,Ct.name="item",c){var ar=Ct.shape,en=u?"height":"width";ar[en]=0}return Ct},polar:function(t,n,a,l,u,c,p,d,Q){var Ct=!u&&Q?SausagePath:Sector,ar=new Ct({shape:l,z2:1});ar.name="item";var en=createPolarPositionMapping(u);if(ar.calculateTextPosition=createSectorCalculateTextPosition(en,{isRoundCap:Ct===SausagePath}),c){var tn=ar.shape,on=u?"r":"endAngle",cn={};tn[on]=u?l.r0:l.startAngle,cn[on]=l[on],(d?updateProps$1:initProps)(ar,{shape:cn},c)}return ar}};function shouldRealtimeSort(t,n){var a=t.get("realtimeSort",!0),l=n.getBaseAxis();if(a&&l.type==="category"&&n.type==="cartesian2d")return{baseAxis:l,otherAxis:n.getOtherAxis(l)}}function updateRealtimeAnimation(t,n,a,l,u,c,p,d){var Q,Ct;c?(Ct={x:l.x,width:l.width},Q={y:l.y,height:l.height}):(Ct={y:l.y,height:l.height},Q={x:l.x,width:l.width}),d||(p?updateProps$1:initProps)(a,{shape:Q},n,u,null);var ar=n?t.baseAxis.model:null;(p?updateProps$1:initProps)(a,{shape:Ct},ar,u)}function checkPropertiesNotValid(t,n){for(var a=0;a<n.length;a++)if(!isFinite(t[n[a]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(t){return!checkPropertiesNotValid(t,rectPropties)},polar:function(t){return!checkPropertiesNotValid(t,polarPropties)}},getLayout={cartesian2d:function(t,n,a){var l=t.getItemLayout(n),u=a?getLineWidth(a,l):0,c=l.width>0?1:-1,p=l.height>0?1:-1;return{x:l.x+c*u/2,y:l.y+p*u/2,width:l.width-c*u,height:l.height-p*u}},polar:function(t,n,a){var l=t.getItemLayout(n);return{cx:l.cx,cy:l.cy,r0:l.r0,r:l.r,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}}};function isZeroOnPolar(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function createPolarPositionMapping(t){return function(n){var a=n?"Arc":"Angle";return function(l){switch(l){case"start":case"insideStart":case"end":case"insideEnd":return l+a;default:return l}}}(t)}function updateStyle(t,n,a,l,u,c,p,d){var Q=n.getItemVisual(a,"style");if(d){if(!c.get("roundCap")){var ar=t.shape,en=getSectorCornerRadius(l.getModel("itemStyle"),ar,!0);extend(ar,en),t.setShape(ar)}}else{var Ct=l.get(["itemStyle","borderRadius"])||0;t.setShape("r",Ct)}t.useStyle(Q);var tn=l.getShallow("cursor");tn&&t.attr("cursor",tn);var on=d?p?u.r>=u.r0?"endArc":"startArc":u.endAngle>=u.startAngle?"endAngle":"startAngle":p?u.height>=0?"bottom":"top":u.width>=0?"right":"left",cn=getLabelStatesModels(l);setLabelStyle(t,cn,{labelFetcher:c,labelDataIndex:a,defaultText:getDefaultLabel(c.getData(),a),inheritColor:Q.fill,defaultOpacity:Q.opacity,defaultOutsidePosition:on});var gn=t.getTextContent();if(d&&gn){var Cn=l.get(["label","position"]);t.textConfig.inside=Cn==="middle"?!0:null,setSectorTextRotation(t,Cn==="outside"?on:Cn,createPolarPositionMapping(p),l.get(["label","rotate"]))}setLabelValueAnimation(gn,cn,c.getRawValue(a),function(ix){return getDefaultInterpolatedLabel(n,ix)});var ex=l.getModel(["emphasis"]);toggleHoverEmphasis(t,ex.get("focus"),ex.get("blurScope"),ex.get("disabled")),setStatesStylesFromModel(t,l),isZeroOnPolar(u)&&(t.style.fill="none",t.style.stroke="none",each$f(t.states,function(ix){ix.style&&(ix.style.fill=ix.style.stroke="none")}))}function getLineWidth(t,n){var a=t.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var l=t.get(["itemStyle","borderWidth"])||0,u=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),c=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(l,u,c)}var LagePathShape=function(){function t(){}return t}(),LargePath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="largeBar",l}return n.prototype.getDefaultShape=function(){return new LagePathShape},n.prototype.buildPath=function(a,l){for(var u=l.points,c=this.baseDimIdx,p=1-this.baseDimIdx,d=[],Q=[],Ct=this.barWidth,ar=0;ar<u.length;ar+=3)Q[c]=Ct,Q[p]=u[ar+2],d[c]=u[ar+c],d[p]=u[ar+p],a.rect(d[0],d[1],Q[0],Q[1])},n}(Path);function createLarge$1(t,n,a,l){var u=t.getData(),c=u.getLayout("valueAxisHorizontal")?1:0,p=u.getLayout("largeDataIndices"),d=u.getLayout("size"),Q=t.getModel("backgroundStyle"),Ct=u.getLayout("largeBackgroundPoints");if(Ct){var ar=new LargePath({shape:{points:Ct},incremental:!!l,silent:!0,z2:0});ar.baseDimIdx=c,ar.largeDataIndices=p,ar.barWidth=d,ar.useStyle(Q.getItemStyle()),n.add(ar),a&&a.push(ar)}var en=new LargePath({shape:{points:u.getLayout("largePoints")},incremental:!!l,ignoreCoarsePointer:!0,z2:1});en.baseDimIdx=c,en.largeDataIndices=p,en.barWidth=d,n.add(en),en.useStyle(u.getVisual("style")),en.style.stroke=null,getECData(en).seriesIndex=t.seriesIndex,t.get("silent")||(en.on("mousedown",largePathUpdateDataIndex),en.on("mousemove",largePathUpdateDataIndex)),a&&a.push(en)}var largePathUpdateDataIndex=throttle(function(t){var n=this,a=largePathFindDataIndex(n,t.offsetX,t.offsetY);getECData(n).dataIndex=a>=0?a:null},30,!1);function largePathFindDataIndex(t,n,a){for(var l=t.baseDimIdx,u=1-l,c=t.shape.points,p=t.largeDataIndices,d=[],Q=[],Ct=t.barWidth,ar=0,en=c.length/3;ar<en;ar++){var tn=ar*3;if(Q[l]=Ct,Q[u]=c[tn+2],d[l]=c[tn+l],d[u]=c[tn+u],Q[u]<0&&(d[u]+=Q[u],Q[u]=-Q[u]),n>=d[0]&&n<=d[0]+Q[0]&&a>=d[1]&&a<=d[1]+Q[1])return p[ar]}return-1}function createBackgroundShape(t,n,a){if(isCoordinateSystemType(a,"cartesian2d")){var l=n,u=a.getArea();return{x:t?l.x:u.x,y:t?u.y:l.y,width:t?l.width:u.width,height:t?u.height:l.height}}else{var u=a.getArea(),c=n;return{cx:u.cx,cy:u.cy,r0:t?u.r0:c.r0,r:t?u.r:c.r,startAngle:t?c.startAngle:0,endAngle:t?c.endAngle:Math.PI*2}}}function createBackgroundEl(t,n,a){var l=t.type==="polar"?Sector:Rect$2;return new l({shape:createBackgroundShape(n,a,t),silent:!0,z2:0})}function install$P(t){t.registerChartView(BarView),t.registerSeriesModel(BarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,a){var l=n.componentType||"series";a.eachComponent({mainType:l,query:n},function(u){n.sortInfo&&u.axis.setCategorySortInfo(n.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getBasicPieLayout(t,n){var a=getViewRect$5(t,n),l=t.get("center"),u=t.get("radius");isArray$1(u)||(u=[0,u]);var c=parsePercent(a.width,n.getWidth()),p=parsePercent(a.height,n.getHeight()),d=Math.min(c,p),Q=parsePercent(u[0],d/2),Ct=parsePercent(u[1],d/2),ar,en,tn=t.coordinateSystem;if(tn){var on=tn.dataToPoint(l);ar=on[0]||0,en=on[1]||0}else isArray$1(l)||(l=[l,l]),ar=parsePercent(l[0],c)+a.x,en=parsePercent(l[1],p)+a.y;return{cx:ar,cy:en,r0:Q,r:Ct}}function pieLayout(t,n,a){n.eachSeriesByType(t,function(l){var u=l.getData(),c=u.mapDimension("value"),p=getViewRect$5(l,a),d=getBasicPieLayout(l,a),Q=d.cx,Ct=d.cy,ar=d.r,en=d.r0,tn=-l.get("startAngle")*RADIAN$2,on=l.get("endAngle"),cn=l.get("padAngle")*RADIAN$2;on=on==="auto"?tn-PI2:-on*RADIAN$2;var gn=l.get("minAngle")*RADIAN$2,Cn=gn+cn,ex=0;u.each(c,function(Sx){!isNaN(Sx)&&ex++});var ix=u.getSum(c),ax=Math.PI/(ix||ex)*2,ox=l.get("clockwise"),lx=l.get("roseType"),cx=l.get("stillShowZeroSum"),dx=u.getDataExtent(c);dx[0]=0;var hx=ox?1:-1,fx=[tn,on],ux=hx*cn/2;normalizeArcAngles(fx,!ox),tn=fx[0],on=fx[1];var gx=getSeriesLayoutData(l);gx.startAngle=tn,gx.endAngle=on,gx.clockwise=ox;var yx=Math.abs(on-tn),_x=yx,vx=0,bx=tn;if(u.setLayout({viewRect:p,r:ar}),u.each(c,function(Sx,Ax){var Cx;if(isNaN(Sx)){u.setItemLayout(Ax,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:ox,cx:Q,cy:Ct,r0:en,r:lx?NaN:ar});return}lx!=="area"?Cx=ix===0&&cx?ax:Sx*ax:Cx=yx/ex,Cx<Cn?(Cx=Cn,_x-=Cn):vx+=Sx;var Tx=bx+hx*Cx,Px=0,Fx=0;cn>Cx?(Px=bx+hx*Cx/2,Fx=Px):(Px=bx+ux,Fx=Tx-ux),u.setItemLayout(Ax,{angle:Cx,startAngle:Px,endAngle:Fx,clockwise:ox,cx:Q,cy:Ct,r0:en,r:lx?linearMap$2(Sx,dx,[en,ar]):ar}),bx=Tx}),_x<PI2&&ex)if(_x<=.001){var xx=yx/ex;u.each(c,function(Sx,Ax){if(!isNaN(Sx)){var Cx=u.getItemLayout(Ax);Cx.angle=xx;var Tx=0,Px=0;xx<cn?(Tx=tn+hx*(Ax+1/2)*xx,Px=Tx):(Tx=tn+hx*Ax*xx+ux,Px=tn+hx*(Ax+1)*xx-ux),Cx.startAngle=Tx,Cx.endAngle=Px}})}else ax=_x/vx,bx=tn,u.each(c,function(Sx,Ax){if(!isNaN(Sx)){var Cx=u.getItemLayout(Ax),Tx=Cx.angle===Cn?Cn:Sx*ax,Px=0,Fx=0;Tx<cn?(Px=bx+hx*Tx/2,Fx=Px):(Px=bx+ux,Fx=bx+hx*Tx-ux),Cx.startAngle=Px,Cx.endAngle=Fx,bx+=hx*Tx}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(t){return{seriesType:t,reset:function(n,a){var l=a.findComponents({mainType:"legend"});if(!(!l||!l.length)){var u=n.getData();u.filterSelf(function(c){for(var p=u.getName(c),d=0;d<l.length;d++)if(!l[d].isSelected(p))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(t,n,a,l,u,c,p,d,Q,Ct){if(t.length<2)return;function ar(gn){for(var Cn=gn.rB,ex=Cn*Cn,ix=0;ix<gn.list.length;ix++){var ax=gn.list[ix],ox=Math.abs(ax.label.y-a),lx=l+ax.len,cx=lx*lx,dx=Math.sqrt(Math.abs((1-ox*ox/ex)*cx)),hx=n+(dx+ax.len2)*u,fx=hx-ax.label.x,ux=ax.targetTextWidth-fx*u;constrainTextWidth(ax,ux,!0),ax.label.x=hx}}function en(gn){for(var Cn={list:[],maxY:0},ex={list:[],maxY:0},ix=0;ix<gn.length;ix++)if(gn[ix].labelAlignTo==="none"){var ax=gn[ix],ox=ax.label.y>a?ex:Cn,lx=Math.abs(ax.label.y-a);if(lx>=ox.maxY){var cx=ax.label.x-n-ax.len2*u,dx=l+ax.len,hx=Math.abs(cx)<dx?Math.sqrt(lx*lx/(1-cx*cx/dx/dx)):dx;ox.rB=hx,ox.maxY=lx}ox.list.push(ax)}ar(Cn),ar(ex)}for(var tn=t.length,on=0;on<tn;on++)if(t[on].position==="outer"&&t[on].labelAlignTo==="labelLine"){var cn=t[on].label.x-Ct;t[on].linePoints[1][0]+=cn,t[on].label.x=Ct}shiftLayoutOnY(t,Q,Q+p)&&en(t)}function avoidOverlap(t,n,a,l,u,c,p,d){for(var Q=[],Ct=[],ar=Number.MAX_VALUE,en=-Number.MAX_VALUE,tn=0;tn<t.length;tn++){var on=t[tn].label;isPositionCenter(t[tn])||(on.x<n?(ar=Math.min(ar,on.x),Q.push(t[tn])):(en=Math.max(en,on.x),Ct.push(t[tn])))}for(var tn=0;tn<t.length;tn++){var cn=t[tn];if(!isPositionCenter(cn)&&cn.linePoints){if(cn.labelStyleWidth!=null)continue;var on=cn.label,gn=cn.linePoints,Cn=void 0;cn.labelAlignTo==="edge"?on.x<n?Cn=gn[2][0]-cn.labelDistance-p-cn.edgeDistance:Cn=p+u-cn.edgeDistance-gn[2][0]-cn.labelDistance:cn.labelAlignTo==="labelLine"?on.x<n?Cn=ar-p-cn.bleedMargin:Cn=p+u-en-cn.bleedMargin:on.x<n?Cn=on.x-p-cn.bleedMargin:Cn=p+u-on.x-cn.bleedMargin,cn.targetTextWidth=Cn,constrainTextWidth(cn,Cn)}}adjustSingleSide(Ct,n,a,l,1,u,c,p,d,en),adjustSingleSide(Q,n,a,l,-1,u,c,p,d,ar);for(var tn=0;tn<t.length;tn++){var cn=t[tn];if(!isPositionCenter(cn)&&cn.linePoints){var on=cn.label,gn=cn.linePoints,ex=cn.labelAlignTo==="edge",ix=on.style.padding,ax=ix?ix[1]+ix[3]:0,ox=on.style.backgroundColor?0:ax,lx=cn.rect.width+ox,cx=gn[1][0]-gn[2][0];ex?on.x<n?gn[2][0]=p+cn.edgeDistance+lx+cn.labelDistance:gn[2][0]=p+u-cn.edgeDistance-lx-cn.labelDistance:(on.x<n?gn[2][0]=on.x+cn.labelDistance:gn[2][0]=on.x-cn.labelDistance,gn[1][0]=gn[2][0]+cx),gn[1][1]=gn[2][1]=on.y}}}function constrainTextWidth(t,n,a){if(a===void 0&&(a=!1),t.labelStyleWidth==null){var l=t.label,u=l.style,c=t.rect,p=u.backgroundColor,d=u.padding,Q=d?d[1]+d[3]:0,Ct=u.overflow,ar=c.width+(p?0:Q);if(n<ar||a){var en=c.height;if(Ct&&Ct.match("break")){l.setStyle("backgroundColor",null),l.setStyle("width",n-Q);var tn=l.getBoundingRect();l.setStyle("width",Math.ceil(tn.width)),l.setStyle("backgroundColor",p)}else{var on=n-Q,cn=n<ar?on:a?on>t.unconstrainedWidth?null:on:null;l.setStyle("width",cn)}var gn=l.getBoundingRect();c.width=gn.width;var Cn=(l.style.margin||0)+2.1;c.height=gn.height+Cn,c.y-=(c.height-en)/2}}}function isPositionCenter(t){return t.position==="center"}function pieLabelLayout(t){var n=t.getData(),a=[],l,u,c=!1,p=(t.get("minShowLabelAngle")||0)*RADIAN$1,d=n.getLayout("viewRect"),Q=n.getLayout("r"),Ct=d.width,ar=d.x,en=d.y,tn=d.height;function on(cx){cx.ignore=!0}function cn(cx){if(!cx.ignore)return!0;for(var dx in cx.states)if(cx.states[dx].ignore===!1)return!0;return!1}n.each(function(cx){var dx=n.getItemGraphicEl(cx),hx=dx.shape,fx=dx.getTextContent(),ux=dx.getTextGuideLine(),gx=n.getItemModel(cx),yx=gx.getModel("label"),_x=yx.get("position")||gx.get(["emphasis","label","position"]),vx=yx.get("distanceToLabelLine"),bx=yx.get("alignTo"),xx=parsePercent(yx.get("edgeDistance"),Ct),Sx=yx.get("bleedMargin"),Ax=gx.getModel("labelLine"),Cx=Ax.get("length");Cx=parsePercent(Cx,Ct);var Tx=Ax.get("length2");if(Tx=parsePercent(Tx,Ct),Math.abs(hx.endAngle-hx.startAngle)<p){each$f(fx.states,on),fx.ignore=!0,ux&&(each$f(ux.states,on),ux.ignore=!0);return}if(cn(fx)){var Px=(hx.startAngle+hx.endAngle)/2,Fx=Math.cos(Px),Mx=Math.sin(Px),Dx,Ox,Lx,Nx;l=hx.cx,u=hx.cy;var Gx=_x==="inside"||_x==="inner";if(_x==="center")Dx=hx.cx,Ox=hx.cy,Nx="center";else{var Ux=(Gx?(hx.r+hx.r0)/2*Fx:hx.r*Fx)+l,Hx=(Gx?(hx.r+hx.r0)/2*Mx:hx.r*Mx)+u;if(Dx=Ux+Fx*3,Ox=Hx+Mx*3,!Gx){var Vx=Ux+Fx*(Cx+Q-hx.r),zx=Hx+Mx*(Cx+Q-hx.r),rE=Vx+(Fx<0?-1:1)*Tx,Zx=zx;bx==="edge"?Dx=Fx<0?ar+xx:ar+Ct-xx:Dx=rE+(Fx<0?-vx:vx),Ox=Zx,Lx=[[Ux,Hx],[Vx,zx],[rE,Zx]]}Nx=Gx?"center":bx==="edge"?Fx>0?"right":"left":Fx>0?"left":"right"}var eE=Math.PI,oE=0,iE=yx.get("rotate");if(isNumber(iE))oE=iE*(eE/180);else if(_x==="center")oE=0;else if(iE==="radial"||iE===!0){var Wx=Fx<0?-Px+eE:-Px;oE=Wx}else if(iE==="tangential"&&_x!=="outside"&&_x!=="outer"){var AE=Math.atan2(Fx,Mx);AE<0&&(AE=eE*2+AE);var ME=Mx>0;ME&&(AE=eE+AE),oE=AE-eE}if(c=!!oE,fx.x=Dx,fx.y=Ox,fx.rotation=oE,fx.setStyle({verticalAlign:"middle"}),Gx){fx.setStyle({align:Nx});var kE=fx.states.select;kE&&(kE.x+=fx.x,kE.y+=fx.y)}else{var EE=fx.getBoundingRect().clone();EE.applyTransform(fx.getComputedTransform());var bE=(fx.style.margin||0)+2.1;EE.y-=bE/2,EE.height+=bE,a.push({label:fx,labelLine:ux,position:_x,len:Cx,len2:Tx,minTurnAngle:Ax.get("minTurnAngle"),maxSurfaceAngle:Ax.get("maxSurfaceAngle"),surfaceNormal:new Point(Fx,Mx),linePoints:Lx,textAlign:Nx,labelDistance:vx,labelAlignTo:bx,edgeDistance:xx,bleedMargin:Sx,rect:EE,unconstrainedWidth:EE.width,labelStyleWidth:fx.style.width})}dx.setTextConfig({inside:Gx})}}),!c&&t.get("avoidLabelOverlap")&&avoidOverlap(a,l,u,Q,Ct,tn,ar,en);for(var gn=0;gn<a.length;gn++){var Cn=a[gn],ex=Cn.label,ix=Cn.labelLine,ax=isNaN(ex.x)||isNaN(ex.y);if(ex){ex.setStyle({align:Cn.textAlign}),ax&&(each$f(ex.states,on),ex.ignore=!0);var ox=ex.states.select;ox&&(ox.x+=ex.x,ox.y+=ex.y)}if(ix){var lx=Cn.linePoints;ax||!lx?(each$f(ix.states,on),ix.ignore=!0):(limitTurnAngle(lx,Cn.minTurnAngle),limitSurfaceAngle(lx,Cn.surfaceNormal,Cn.maxSurfaceAngle),ix.setShape({points:lx}),ex.__hostTarget.textGuideLineConfig={anchor:new Point(lx[0][0],lx[0][1])})}}}var PiePiece=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this)||this;c.z2=2;var p=new ZRText;return c.setTextContent(p),c.updateData(a,l,u,!0),c}return n.prototype.updateData=function(a,l,u,c){var p=this,d=a.hostModel,Q=a.getItemModel(l),Ct=Q.getModel("emphasis"),ar=a.getItemLayout(l),en=extend(getSectorCornerRadius(Q.getModel("itemStyle"),ar,!0),ar);if(isNaN(en.startAngle)){p.setShape(en);return}if(c){p.setShape(en);var tn=d.getShallow("animationType");d.ecModel.ssr?(initProps(p,{scaleX:0,scaleY:0},d,{dataIndex:l,isFrom:!0}),p.originX=en.cx,p.originY=en.cy):tn==="scale"?(p.shape.r=ar.r0,initProps(p,{shape:{r:ar.r}},d,l)):u!=null?(p.setShape({startAngle:u,endAngle:u}),initProps(p,{shape:{startAngle:ar.startAngle,endAngle:ar.endAngle}},d,l)):(p.shape.endAngle=ar.startAngle,updateProps$1(p,{shape:{endAngle:ar.endAngle}},d,l))}else saveOldStyle(p),updateProps$1(p,{shape:en},d,l);p.useStyle(a.getItemVisual(l,"style")),setStatesStylesFromModel(p,Q);var on=(ar.startAngle+ar.endAngle)/2,cn=d.get("selectedOffset"),gn=Math.cos(on)*cn,Cn=Math.sin(on)*cn,ex=Q.getShallow("cursor");ex&&p.attr("cursor",ex),this._updateLabel(d,a,l),p.ensureState("emphasis").shape=extend({r:ar.r+(Ct.get("scale")&&Ct.get("scaleSize")||0)},getSectorCornerRadius(Ct.getModel("itemStyle"),ar)),extend(p.ensureState("select"),{x:gn,y:Cn,shape:getSectorCornerRadius(Q.getModel(["select","itemStyle"]),ar)}),extend(p.ensureState("blur"),{shape:getSectorCornerRadius(Q.getModel(["blur","itemStyle"]),ar)});var ix=p.getTextGuideLine(),ax=p.getTextContent();ix&&extend(ix.ensureState("select"),{x:gn,y:Cn}),extend(ax.ensureState("select"),{x:gn,y:Cn}),toggleHoverEmphasis(this,Ct.get("focus"),Ct.get("blurScope"),Ct.get("disabled"))},n.prototype._updateLabel=function(a,l,u){var c=this,p=l.getItemModel(u),d=p.getModel("labelLine"),Q=l.getItemVisual(u,"style"),Ct=Q&&Q.fill,ar=Q&&Q.opacity;setLabelStyle(c,getLabelStatesModels(p),{labelFetcher:l.hostModel,labelDataIndex:u,inheritColor:Ct,defaultOpacity:ar,defaultText:a.getFormattedLabel(u,"normal")||l.getName(u)});var en=c.getTextContent();c.setTextConfig({position:null,rotation:null}),en.attr({z2:10});var tn=a.get(["label","position"]);if(tn!=="outside"&&tn!=="outer")c.removeTextGuideLine();else{var on=this.getTextGuideLine();on||(on=new Polyline$1,this.setTextGuideLine(on)),setLabelLineStyle(this,getLabelLineStatesModels(p),{stroke:Ct,opacity:retrieve3(d.get(["lineStyle","opacity"]),ar,1)})}},n}(Sector),PieView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,l,u,c){var p=a.getData(),d=this._data,Q=this.group,Ct;if(!d&&p.count()>0){for(var ar=p.getItemLayout(0),en=1;isNaN(ar&&ar.startAngle)&&en<p.count();++en)ar=p.getItemLayout(en);ar&&(Ct=ar.startAngle)}if(this._emptyCircleSector&&Q.remove(this._emptyCircleSector),p.count()===0&&a.get("showEmptyCircle")){var tn=getSeriesLayoutData(a),on=new Sector({shape:extend(getBasicPieLayout(a,u),tn)});on.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=on,Q.add(on)}p.diff(d).add(function(cn){var gn=new PiePiece(p,cn,Ct);p.setItemGraphicEl(cn,gn),Q.add(gn)}).update(function(cn,gn){var Cn=d.getItemGraphicEl(gn);Cn.updateData(p,cn,Ct),Cn.off("click"),Q.add(Cn),p.setItemGraphicEl(cn,Cn)}).remove(function(cn){var gn=d.getItemGraphicEl(cn);removeElementWithFadeOut(gn,a,cn)}).execute(),pieLabelLayout(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=p)},n.prototype.dispose=function(){},n.prototype.containPoint=function(a,l){var u=l.getData(),c=u.getItemLayout(0);if(c){var p=a[0]-c.cx,d=a[1]-c.cy,Q=Math.sqrt(p*p+d*d);return Q<=c.r&&Q>=c.r0}},n.type="pie",n}(ChartView);function createSeriesDataSimply(t,n,a){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:t.getEncode()},n);var l=t.getSource(),u=prepareSeriesDataSchema(l,n).dimensions,c=new SeriesData(u,t);return c.initData(l,a),c}var LegendVisualProvider=function(){function t(n,a){this._getDataWithEncodedVisual=n,this._getRawData=a}return t.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},t.prototype.containName=function(n){var a=this._getRawData();return a.indexOfName(n)>=0},t.prototype.indexOfName=function(n){var a=this._getDataWithEncodedVisual();return a.indexOfName(n)},t.prototype.getItemVisual=function(n,a){var l=this._getDataWithEncodedVisual();return l.getItemVisual(n,a)},t}(),innerData=makeInner(),PieSeriesModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype.getDataParams=function(a){var l=this.getData(),u=innerData(l),c=u.seats;if(!c){var p=[];l.each(l.mapDimension("value"),function(Q){p.push(Q)}),c=u.seats=getPercentSeats(p,l.hostModel.get("percentPrecision"))}var d=t.prototype.getDataParams.call(this,a);return d.percent=c[a]||0,d.$vars.push("percent"),d},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var l=a.labelLine,u=a.emphasis.labelLine;l.show=l.show&&a.label.show,u.show=u.show&&a.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n}(SeriesModel);function negativeDataFilter(t){return{seriesType:t,reset:function(n,a){var l=n.getData();l.filterSelf(function(u){var c=l.mapDimension("value"),p=l.get(c,u);return!(isNumber(p)&&!isNaN(p)&&p<0)})}}}function install$O(t){t.registerChartView(PieView),t.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",t.registerAction),t.registerLayout(curry$1(pieLayout,"pie")),t.registerProcessor(dataFilter$1("pie")),t.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,l){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},n.prototype.brushSelector=function(a,l,u){return u.point(l.getItemLayout(a))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function t(){}return t}(),LargeSymbolPath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(a,l){var u=l.points,c=l.size,p=this.symbolProxy,d=p.shape,Q=a.getContext?a.getContext():a,Ct=Q&&c[0]<BOOST_SIZE_THRESHOLD,ar=this.softClipShape,en;if(Ct){this._ctx=Q;return}for(this._ctx=null,en=this._off;en<u.length;){var tn=u[en++],on=u[en++];isNaN(tn)||isNaN(on)||ar&&!ar.contain(tn,on)||(d.x=tn-c[0]/2,d.y=on-c[1]/2,d.width=c[0],d.height=c[1],p.buildPath(a,d,!0))}this.incremental&&(this._off=en,this.notClear=!0)},n.prototype.afterBrush=function(){var a=this.shape,l=a.points,u=a.size,c=this._ctx,p=this.softClipShape,d;if(c){for(d=this._off;d<l.length;){var Q=l[d++],Ct=l[d++];isNaN(Q)||isNaN(Ct)||p&&!p.contain(Q,Ct)||c.fillRect(Q-u[0]/2,Ct-u[1]/2,u[0],u[1])}this.incremental&&(this._off=d,this.notClear=!0)}},n.prototype.findDataIndex=function(a,l){for(var u=this.shape,c=u.points,p=u.size,d=Math.max(p[0],4),Q=Math.max(p[1],4),Ct=c.length/2-1;Ct>=0;Ct--){var ar=Ct*2,en=c[ar]-d/2,tn=c[ar+1]-Q/2;if(a>=en&&l>=tn&&a<=en+d&&l<=tn+Q)return Ct}return-1},n.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l),c=this.getBoundingRect();if(a=u[0],l=u[1],c.contain(a,l)){var p=this.hoverDataIdx=this.findDataIndex(a,l);return p>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var l=this.shape,u=l.points,c=l.size,p=c[0],d=c[1],Q=1/0,Ct=1/0,ar=-1/0,en=-1/0,tn=0;tn<u.length;){var on=u[tn++],cn=u[tn++];Q=Math.min(on,Q),ar=Math.max(on,ar),Ct=Math.min(cn,Ct),en=Math.max(cn,en)}a=this._rect=new BoundingRect(Q-p/2,Ct-d/2,ar-Q+p,en-Ct+d)}return a},n}(Path),LargeSymbolDraw=function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n,a){this._clear();var l=this._create();l.setShape({points:n.getLayout("points")}),this._setCommon(l,n,a)},t.prototype.updateLayout=function(n){var a=n.getLayout("points");this.group.eachChild(function(l){if(l.startIndex!=null){var u=(l.endIndex-l.startIndex)*2,c=l.startIndex*4*2;a=new Float32Array(a.buffer,c,u)}l.setShape("points",a),l.reset()})},t.prototype.incrementalPrepareUpdate=function(n){this._clear()},t.prototype.incrementalUpdate=function(n,a,l){var u=this._newAdded[0],c=a.getLayout("points"),p=u&&u.shape.points;if(p&&p.length<2e4){var d=p.length,Q=new Float32Array(d+c.length);Q.set(p),Q.set(c,d),u.endIndex=n.end,u.setShape({points:Q})}else{this._newAdded=[];var Ct=this._create();Ct.startIndex=n.start,Ct.endIndex=n.end,Ct.incremental=!0,Ct.setShape({points:c}),this._setCommon(Ct,a,l)}},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},t.prototype._setCommon=function(n,a,l){var u=a.hostModel;l=l||{};var c=a.getVisual("symbolSize");n.setShape("size",c instanceof Array?c:[c,c]),n.softClipShape=l.clipShape||null,n.symbolProxy=createSymbol$1(a.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var p=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(u.getModel("itemStyle").getItemStyle(p?["color","shadowBlur","shadowColor"]:["color"]));var d=a.getVisual("style"),Q=d&&d.fill;Q&&n.setColor(Q);var Ct=getECData(n);Ct.seriesIndex=u.seriesIndex,n.on("mousemove",function(ar){Ct.dataIndex=null;var en=n.hoverDataIdx;en>=0&&(Ct.dataIndex=en+(n.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),ScatterView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=a.getData(),p=this._updateSymbolDraw(c,a);p.updateData(c,{clipShape:this._getClipShape(a)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(a,l,u){var c=a.getData(),p=this._updateSymbolDraw(c,a);p.incrementalPrepareUpdate(c),this._finished=!1},n.prototype.incrementalRender=function(a,l,u){this._symbolDraw.incrementalUpdate(a,l.getData(),{clipShape:this._getClipShape(l)}),this._finished=a.end===l.getData().count()},n.prototype.updateTransform=function(a,l,u){var c=a.getData();if(this.group.dirty(),!this._finished||c.count()>1e4)return{update:!0};var p=pointsLayout("").reset(a,l,u);p.progress&&p.progress({start:0,end:c.count(),count:c.count()},c),this._symbolDraw.updateLayout(c)},n.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},n.prototype._getClipShape=function(a){if(a.get("clip",!0)){var l=a.coordinateSystem;return l&&l.getArea&&l.getArea(.1)}},n.prototype._updateSymbolDraw=function(a,l){var u=this._symbolDraw,c=l.pipelineContext,p=c.large;return(!u||p!==this._isLargeDraw)&&(u&&u.remove(),u=this._symbolDraw=p?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=p,this.group.removeAll()),this.group.add(u.group),u},n.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n}(ChartView),GridModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n}(ComponentModel),CartesianAxisModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(t,n,a,l){each$f(AXIS_TYPES,function(u,c){var p=merge(merge({},axisDefault[c],!0),l,!0),d=function(Q){__extends(Ct,Q);function Ct(){var ar=Q!==null&&Q.apply(this,arguments)||this;return ar.type=n+"Axis."+c,ar}return Ct.prototype.mergeDefaultAndTheme=function(ar,en){var tn=fetchLayoutMode(this),on=tn?getLayoutParams(ar):{},cn=en.getTheme();merge(ar,cn.get(c+"Axis")),merge(ar,this.getDefaultOption()),ar.type=getAxisType(ar),tn&&mergeLayoutParam(ar,on,tn)},Ct.prototype.optionUpdated=function(){var ar=this.option;ar.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},Ct.prototype.getCategories=function(ar){var en=this.option;if(en.type==="category")return ar?en.data:this.__ordinalMeta.categories},Ct.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},Ct.type=n+"Axis."+c,Ct.defaultOption=p,Ct}(a);t.registerComponentModel(d)}),t.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(t){return t.type||(t.data?"category":"value")}var Cartesian=function(){function t(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return t.prototype.getAxis=function(n){return this._axes[n]},t.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},t.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(a){return a.scale.type===n})},t.prototype.addAxis=function(n){var a=n.dim;this._axes[a]=n,this._dimList.push(a)},t}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(t){return t.type==="interval"||t.type==="time"}var Cartesian2D=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=cartesian2DDimensions,a}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,l=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(a)||!canCalculateAffineTransform(l))){var u=a.getExtent(),c=l.getExtent(),p=this.dataToPoint([u[0],c[0]]),d=this.dataToPoint([u[1],c[1]]),Q=u[1]-u[0],Ct=c[1]-c[0];if(!(!Q||!Ct)){var ar=(d[0]-p[0])/Q,en=(d[1]-p[1])/Ct,tn=p[0]-u[0]*ar,on=p[1]-c[0]*en,cn=this._transform=[ar,0,0,en,tn,on];this._invTransform=invert([],cn)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(a){var l=this.getAxis("x"),u=this.getAxis("y");return l.contain(l.toLocalCoord(a[0]))&&u.contain(u.toLocalCoord(a[1]))},n.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},n.prototype.containZone=function(a,l){var u=this.dataToPoint(a),c=this.dataToPoint(l),p=this.getArea(),d=new BoundingRect(u[0],u[1],c[0]-u[0],c[1]-u[1]);return p.intersect(d)},n.prototype.dataToPoint=function(a,l,u){u=u||[];var c=a[0],p=a[1];if(this._transform&&c!=null&&isFinite(c)&&p!=null&&isFinite(p))return applyTransform$1(u,a,this._transform);var d=this.getAxis("x"),Q=this.getAxis("y");return u[0]=d.toGlobalCoord(d.dataToCoord(c,l)),u[1]=Q.toGlobalCoord(Q.dataToCoord(p,l)),u},n.prototype.clampData=function(a,l){var u=this.getAxis("x").scale,c=this.getAxis("y").scale,p=u.getExtent(),d=c.getExtent(),Q=u.parse(a[0]),Ct=c.parse(a[1]);return l=l||[],l[0]=Math.min(Math.max(Math.min(p[0],p[1]),Q),Math.max(p[0],p[1])),l[1]=Math.min(Math.max(Math.min(d[0],d[1]),Ct),Math.max(d[0],d[1])),l},n.prototype.pointToData=function(a,l){var u=[];if(this._invTransform)return applyTransform$1(u,a,this._invTransform);var c=this.getAxis("x"),p=this.getAxis("y");return u[0]=c.coordToData(c.toLocalCoord(a[0]),l),u[1]=p.coordToData(p.toLocalCoord(a[1]),l),u},n.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},n.prototype.getArea=function(a){a=a||0;var l=this.getAxis("x").getGlobalExtent(),u=this.getAxis("y").getGlobalExtent(),c=Math.min(l[0],l[1])-a,p=Math.min(u[0],u[1])-a,d=Math.max(l[0],l[1])-c+a,Q=Math.max(u[0],u[1])-p+a;return new BoundingRect(c,p,d,Q)},n}(Cartesian),Axis2D=function(t){__extends(n,t);function n(a,l,u,c,p){var d=t.call(this,a,l,u)||this;return d.index=0,d.type=c||"value",d.position=p||"bottom",d}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.getGlobalExtent=function(a){var l=this.getExtent();return l[0]=this.toGlobalCoord(l[0]),l[1]=this.toGlobalCoord(l[1]),a&&l[0]>l[1]&&l.reverse(),l},n.prototype.pointToData=function(a,l){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),l)},n.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},n}(Axis);function layout$2(t,n,a){a=a||{};var l=t.coordinateSystem,u=n.axis,c={},p=u.getAxesOnZeroOf()[0],d=u.position,Q=p?"onZero":d,Ct=u.dim,ar=l.getRect(),en=[ar.x,ar.x+ar.width,ar.y,ar.y+ar.height],tn={left:0,right:1,top:0,bottom:1,onZero:2},on=n.get("offset")||0,cn=Ct==="x"?[en[2]-on,en[3]+on]:[en[0]-on,en[1]+on];if(p){var gn=p.toGlobalCoord(p.dataToCoord(0));cn[tn.onZero]=Math.max(Math.min(gn,cn[1]),cn[0])}c.position=[Ct==="y"?cn[tn[Q]]:en[0],Ct==="x"?cn[tn[Q]]:en[3]],c.rotation=Math.PI/2*(Ct==="x"?0:1);var Cn={top:-1,bottom:1,left:-1,right:1};c.labelDirection=c.tickDirection=c.nameDirection=Cn[d],c.labelOffset=p?cn[tn[d]]-cn[tn.onZero]:0,n.get(["axisTick","inside"])&&(c.tickDirection=-c.tickDirection),retrieve(a.labelInside,n.get(["axisLabel","inside"]))&&(c.labelDirection=-c.labelDirection);var ex=n.get(["axisLabel","rotate"]);return c.labelRotate=Q==="top"?-ex:ex,c.z2=1,c}function isCartesian2DSeries(t){return t.get("coordinateSystem")==="cartesian2d"}function findAxisModels(t){var n={xAxisModel:null,yAxisModel:null};return each$f(n,function(a,l){var u=l.replace(/Model$/,""),c=t.getReferringComponents(u,SINGLE_REFERRING).models[0];n[l]=c}),n}var mathLog=Math.log;function alignScaleTicks(t,n,a){var l=IntervalScale.prototype,u=l.getTicks.call(a),c=l.getTicks.call(a,!0),p=u.length-1,d=l.getInterval.call(a),Q=getScaleExtent(t,n),Ct=Q.extent,ar=Q.fixMin,en=Q.fixMax;if(t.type==="log"){var tn=mathLog(t.base);Ct=[mathLog(Ct[0])/tn,mathLog(Ct[1])/tn]}t.setExtent(Ct[0],Ct[1]),t.calcNiceExtent({splitNumber:p,fixMin:ar,fixMax:en});var on=l.getExtent.call(t);ar&&(Ct[0]=on[0]),en&&(Ct[1]=on[1]);var cn=l.getInterval.call(t),gn=Ct[0],Cn=Ct[1];if(ar&&en)cn=(Cn-gn)/p;else if(ar)for(Cn=Ct[0]+cn*p;Cn<Ct[1]&&isFinite(Cn)&&isFinite(Ct[1]);)cn=increaseInterval(cn),Cn=Ct[0]+cn*p;else if(en)for(gn=Ct[1]-cn*p;gn>Ct[0]&&isFinite(gn)&&isFinite(Ct[0]);)cn=increaseInterval(cn),gn=Ct[1]-cn*p;else{var ex=t.getTicks().length-1;ex>p&&(cn=increaseInterval(cn));var ix=cn*p;Cn=Math.ceil(Ct[1]/cn)*cn,gn=round$3(Cn-ix),gn<0&&Ct[0]>=0?(gn=0,Cn=round$3(ix)):Cn>0&&Ct[1]<=0&&(Cn=0,gn=-round$3(ix))}var ax=(u[0].value-c[0].value)/d,ox=(u[p].value-c[p].value)/d;l.setExtent.call(t,gn+cn*ax,Cn+cn*ox),l.setInterval.call(t,cn),(ax||ox)&&l.setNiceExtent.call(t,gn+cn,Cn-cn)}var Grid=function(){function t(n,a,l){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,a,l),this.model=n}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(n,a){var l=this._axesMap;this._updateScale(n,this.model);function u(p){var d,Q=keys(p),Ct=Q.length;if(Ct){for(var ar=[],en=Ct-1;en>=0;en--){var tn=+Q[en],on=p[tn],cn=on.model,gn=on.scale;isIntervalOrLogScale(gn)&&cn.get("alignTicks")&&cn.get("interval")==null?ar.push(on):(niceScaleExtent(gn,cn),isIntervalOrLogScale(gn)&&(d=on))}ar.length&&(d||(d=ar.pop(),niceScaleExtent(d.scale,d.model)),each$f(ar,function(Cn){alignScaleTicks(Cn.scale,Cn.model,d.scale)}))}}u(l.x),u(l.y);var c={};each$f(l.x,function(p){fixAxisOnZero(l,"y",p,c)}),each$f(l.y,function(p){fixAxisOnZero(l,"x",p,c)}),this.resize(this.model,a)},t.prototype.resize=function(n,a,l){var u=n.getBoxLayoutParams(),c=!l&&n.get("containLabel"),p=getLayoutRect(u,{width:a.getWidth(),height:a.getHeight()});this._rect=p;var d=this._axesList;Q(),c&&(each$f(d,function(Ct){if(!Ct.model.get(["axisLabel","inside"])){var ar=estimateLabelUnionRect(Ct);if(ar){var en=Ct.isHorizontal()?"height":"width",tn=Ct.model.get(["axisLabel","margin"]);p[en]-=ar[en]+tn,Ct.position==="top"?p.y+=ar.height+tn:Ct.position==="left"&&(p.x+=ar.width+tn)}}}),Q()),each$f(this._coordsList,function(Ct){Ct.calcAffineTransform()});function Q(){each$f(d,function(Ct){var ar=Ct.isHorizontal(),en=ar?[0,p.width]:[0,p.height],tn=Ct.inverse?1:0;Ct.setExtent(en[tn],en[1-tn]),updateAxisTransform(Ct,ar?p.x:p.y)})}},t.prototype.getAxis=function(n,a){var l=this._axesMap[n];if(l!=null)return l[a||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(n,a){if(n!=null&&a!=null){var l="x"+n+"y"+a;return this._coordsMap[l]}isObject$3(n)&&(a=n.yAxisIndex,n=n.xAxisIndex);for(var u=0,c=this._coordsList;u<c.length;u++)if(c[u].getAxis("x").index===n||c[u].getAxis("y").index===a)return c[u]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(n,a,l){var u=this._findConvertTarget(a);return u.cartesian?u.cartesian.dataToPoint(l):u.axis?u.axis.toGlobalCoord(u.axis.dataToCoord(l)):null},t.prototype.convertFromPixel=function(n,a,l){var u=this._findConvertTarget(a);return u.cartesian?u.cartesian.pointToData(l):u.axis?u.axis.coordToData(u.axis.toLocalCoord(l)):null},t.prototype._findConvertTarget=function(n){var a=n.seriesModel,l=n.xAxisModel||a&&a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=n.yAxisModel||a&&a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],c=n.gridModel,p=this._coordsList,d,Q;if(a)d=a.coordinateSystem,indexOf(p,d)<0&&(d=null);else if(l&&u)d=this.getCartesian(l.componentIndex,u.componentIndex);else if(l)Q=this.getAxis("x",l.componentIndex);else if(u)Q=this.getAxis("y",u.componentIndex);else if(c){var Ct=c.coordinateSystem;Ct===this&&(d=this._coordsList[0])}return{cartesian:d,axis:Q}},t.prototype.containPoint=function(n){var a=this._coordsList[0];if(a)return a.containPoint(n)},t.prototype._initCartesian=function(n,a,l){var u=this,c=this,p={left:!1,right:!1,top:!1,bottom:!1},d={x:{},y:{}},Q={x:0,y:0};if(a.eachComponent("xAxis",Ct("x"),this),a.eachComponent("yAxis",Ct("y"),this),!Q.x||!Q.y){this._axesMap={},this._axesList=[];return}this._axesMap=d,each$f(d.x,function(ar,en){each$f(d.y,function(tn,on){var cn="x"+en+"y"+on,gn=new Cartesian2D(cn);gn.master=u,gn.model=n,u._coordsMap[cn]=gn,u._coordsList.push(gn),gn.addAxis(ar),gn.addAxis(tn)})});function Ct(ar){return function(en,tn){if(isAxisUsedInTheGrid(en,n)){var on=en.get("position");ar==="x"?on!=="top"&&on!=="bottom"&&(on=p.bottom?"top":"bottom"):on!=="left"&&on!=="right"&&(on=p.left?"right":"left"),p[on]=!0;var cn=new Axis2D(ar,createScaleByModel$1(en),[0,0],en.get("type"),on),gn=cn.type==="category";cn.onBand=gn&&en.get("boundaryGap"),cn.inverse=en.get("inverse"),en.axis=cn,cn.model=en,cn.grid=c,cn.index=tn,c._axesList.push(cn),d[ar][tn]=cn,Q[ar]++}}}},t.prototype._updateScale=function(n,a){each$f(this._axesList,function(u){if(u.scale.setExtent(1/0,-1/0),u.type==="category"){var c=u.model.get("categorySortInfo");u.scale.setSortInfo(c)}}),n.eachSeries(function(u){if(isCartesian2DSeries(u)){var c=findAxisModels(u),p=c.xAxisModel,d=c.yAxisModel;if(!isAxisUsedInTheGrid(p,a)||!isAxisUsedInTheGrid(d,a))return;var Q=this.getCartesian(p.componentIndex,d.componentIndex),Ct=u.getData(),ar=Q.getAxis("x"),en=Q.getAxis("y");l(Ct,ar),l(Ct,en)}},this);function l(u,c){each$f(getDataDimensionsOnAxis(u,c.dim),function(p){c.scale.unionExtentFromData(u,p)})}},t.prototype.getTooltipAxes=function(n){var a=[],l=[];return each$f(this.getCartesians(),function(u){var c=n!=null&&n!=="auto"?u.getAxis(n):u.getBaseAxis(),p=u.getOtherAxis(c);indexOf(a,c)<0&&a.push(c),indexOf(l,p)<0&&l.push(p)}),{baseAxes:a,otherAxes:l}},t.create=function(n,a){var l=[];return n.eachComponent("grid",function(u,c){var p=new t(u,n,a);p.name="grid_"+c,p.resize(u,a,!0),u.coordinateSystem=p,l.push(p)}),n.eachSeries(function(u){if(isCartesian2DSeries(u)){var c=findAxisModels(u),p=c.xAxisModel,d=c.yAxisModel,Q=p.getCoordSysModel(),Ct=Q.coordinateSystem;u.coordinateSystem=Ct.getCartesian(p.componentIndex,d.componentIndex)}}),l},t.dimensions=cartesian2DDimensions,t}();function isAxisUsedInTheGrid(t,n){return t.getCoordSysModel()===n}function fixAxisOnZero(t,n,a,l){a.getAxesOnZeroOf=function(){return c?[c]:[]};var u=t[n],c,p=a.model,d=p.get(["axisLine","onZero"]),Q=p.get(["axisLine","onZeroAxisIndex"]);if(!d)return;if(Q!=null)canOnZeroToAxis(u[Q])&&(c=u[Q]);else for(var Ct in u)if(u.hasOwnProperty(Ct)&&canOnZeroToAxis(u[Ct])&&!l[ar(u[Ct])]){c=u[Ct];break}c&&(l[ar(c)]=!0);function ar(en){return en.dim+"_"+en.index}}function canOnZeroToAxis(t){return t&&t.type!=="category"&&t.type!=="time"&&ifAxisCrossZero(t)}function updateAxisTransform(t,n){var a=t.getExtent(),l=a[0]+a[1];t.toGlobalCoord=t.dim==="x"?function(u){return u+n}:function(u){return l-u+n},t.toLocalCoord=t.dim==="x"?function(u){return u-n}:function(u){return l-u+n}}var PI$3=Math.PI,AxisBuilder=function(){function t(n,a){this.group=new Group$3,this.opt=a,this.axisModel=n,defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var l=new Group$3({x:a.position[0],y:a.position[1],rotation:a.rotation});l.updateTransform(),this._transformGroup=l}return t.prototype.hasBuilder=function(n){return!!builders[n]},t.prototype.add=function(n){builders[n](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(n,a,l){var u=remRadian(a-n),c,p;return isRadianAroundZero(u)?(p=l>0?"top":"bottom",c="center"):isRadianAroundZero(u-PI$3)?(p=l>0?"bottom":"top",c="center"):(p="middle",u>0&&u<PI$3?c=l>0?"right":"left":c=l>0?"left":"right"),{rotation:u,textAlign:c,textVerticalAlign:p}},t.makeAxisEventDataBase=function(n){var a={componentType:n.mainType,componentIndex:n.componentIndex};return a[n.mainType+"Index"]=n.componentIndex,a},t.isLabelSilent=function(n){var a=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||a&&a.show)},t}(),builders={axisLine:function(t,n,a,l){var u=n.get(["axisLine","show"]);if(u==="auto"&&t.handleAutoShown&&(u=t.handleAutoShown("axisLine")),!!u){var c=n.axis.getExtent(),p=l.transform,d=[c[0],0],Q=[c[1],0],Ct=d[0]>Q[0];p&&(applyTransform$1(d,d,p),applyTransform$1(Q,Q,p));var ar=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),en=new Line$1({shape:{x1:d[0],y1:d[1],x2:Q[0],y2:Q[1]},style:ar,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(en.shape,en.style.lineWidth),en.anid="line",a.add(en);var tn=n.get(["axisLine","symbol"]);if(tn!=null){var on=n.get(["axisLine","symbolSize"]);isString$1(tn)&&(tn=[tn,tn]),(isString$1(on)||isNumber(on))&&(on=[on,on]);var cn=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,on),gn=on[0],Cn=on[1];each$f([{rotate:t.rotation+Math.PI/2,offset:cn[0],r:0},{rotate:t.rotation-Math.PI/2,offset:cn[1],r:Math.sqrt((d[0]-Q[0])*(d[0]-Q[0])+(d[1]-Q[1])*(d[1]-Q[1]))}],function(ex,ix){if(tn[ix]!=="none"&&tn[ix]!=null){var ax=createSymbol$1(tn[ix],-gn/2,-Cn/2,gn,Cn,ar.stroke,!0),ox=ex.r+ex.offset,lx=Ct?Q:d;ax.attr({rotation:ex.rotate,x:lx[0]+ox*Math.cos(t.rotation),y:lx[1]-ox*Math.sin(t.rotation),silent:!0,z2:11}),a.add(ax)}})}}},axisTickLabel:function(t,n,a,l){var u=buildAxisMajorTicks(a,l,n,t),c=buildAxisLabel(a,l,n,t);if(fixMinMaxLabelShow(n,c,u),buildAxisMinorTicks(a,l,n,t.tickDirection),n.get(["axisLabel","hideOverlap"])){var p=prepareLayoutList(map$1(c,function(d){return{label:d,priority:d.z2,defaultAttr:{ignore:d.ignore}}}));hideOverlap(p)}},axisName:function(t,n,a,l){var u=retrieve(t.axisName,n.get("name"));if(u){var c=n.get("nameLocation"),p=t.nameDirection,d=n.getModel("nameTextStyle"),Q=n.get("nameGap")||0,Ct=n.axis.getExtent(),ar=Ct[0]>Ct[1]?-1:1,en=[c==="start"?Ct[0]-ar*Q:c==="end"?Ct[1]+ar*Q:(Ct[0]+Ct[1])/2,isNameLocationCenter(c)?t.labelOffset+p*Q:0],tn,on=n.get("nameRotate");on!=null&&(on=on*PI$3/180);var cn;isNameLocationCenter(c)?tn=AxisBuilder.innerTextLayout(t.rotation,on??t.rotation,p):(tn=endTextLayout(t.rotation,c,on||0,Ct),cn=t.axisNameAvailableWidth,cn!=null&&(cn=Math.abs(cn/Math.sin(tn.rotation)),!isFinite(cn)&&(cn=null)));var gn=d.getFont(),Cn=n.get("nameTruncate",!0)||{},ex=Cn.ellipsis,ix=retrieve(t.nameTruncateMaxWidth,Cn.maxWidth,cn),ax=new ZRText({x:en[0],y:en[1],rotation:tn.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(d,{text:u,font:gn,overflow:"truncate",width:ix,ellipsis:ex,fill:d.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:d.get("align")||tn.textAlign,verticalAlign:d.get("verticalAlign")||tn.textVerticalAlign}),z2:1});if(setTooltipConfig({el:ax,componentModel:n,itemName:u}),ax.__fullText=u,ax.anid="name",n.get("triggerEvent")){var ox=AxisBuilder.makeAxisEventDataBase(n);ox.targetType="axisName",ox.name=u,getECData(ax).eventData=ox}l.add(ax),ax.updateTransform(),a.add(ax),ax.decomposeTransform()}}};function endTextLayout(t,n,a,l){var u=remRadian(a-t),c,p,d=l[0]>l[1],Q=n==="start"&&!d||n!=="start"&&d;return isRadianAroundZero(u-PI$3/2)?(p=Q?"bottom":"top",c="center"):isRadianAroundZero(u-PI$3*1.5)?(p=Q?"top":"bottom",c="center"):(p="middle",u<PI$3*1.5&&u>PI$3/2?c=Q?"left":"right":c=Q?"right":"left"),{rotation:u,textAlign:c,textVerticalAlign:p}}function fixMinMaxLabelShow(t,n,a){if(!shouldShowAllLabels(t.axis)){var l=t.get(["axisLabel","showMinLabel"]),u=t.get(["axisLabel","showMaxLabel"]);n=n||[],a=a||[];var c=n[0],p=n[1],d=n[n.length-1],Q=n[n.length-2],Ct=a[0],ar=a[1],en=a[a.length-1],tn=a[a.length-2];l===!1?(ignoreEl(c),ignoreEl(Ct)):isTwoLabelOverlapped(c,p)&&(l?(ignoreEl(p),ignoreEl(ar)):(ignoreEl(c),ignoreEl(Ct))),u===!1?(ignoreEl(d),ignoreEl(en)):isTwoLabelOverlapped(Q,d)&&(u?(ignoreEl(Q),ignoreEl(tn)):(ignoreEl(d),ignoreEl(en)))}}function ignoreEl(t){t&&(t.ignore=!0)}function isTwoLabelOverlapped(t,n){var a=t&&t.getBoundingRect().clone(),l=n&&n.getBoundingRect().clone();if(!(!a||!l)){var u=identity([]);return rotate(u,u,-t.rotation),a.applyTransform(mul([],u,t.getLocalTransform())),l.applyTransform(mul([],u,n.getLocalTransform())),a.intersect(l)}}function isNameLocationCenter(t){return t==="middle"||t==="center"}function createTicks(t,n,a,l,u){for(var c=[],p=[],d=[],Q=0;Q<t.length;Q++){var Ct=t[Q].coord;p[0]=Ct,p[1]=0,d[0]=Ct,d[1]=a,n&&(applyTransform$1(p,p,n),applyTransform$1(d,d,n));var ar=new Line$1({shape:{x1:p[0],y1:p[1],x2:d[0],y2:d[1]},style:l,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(ar.shape,ar.style.lineWidth),ar.anid=u+"_"+t[Q].tickValue,c.push(ar)}return c}function buildAxisMajorTicks(t,n,a,l){var u=a.axis,c=a.getModel("axisTick"),p=c.get("show");if(p==="auto"&&l.handleAutoShown&&(p=l.handleAutoShown("axisTick")),!(!p||u.scale.isBlank())){for(var d=c.getModel("lineStyle"),Q=l.tickDirection*c.get("length"),Ct=u.getTicksCoords(),ar=createTicks(Ct,n.transform,Q,defaults(d.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),en=0;en<ar.length;en++)t.add(ar[en]);return ar}}function buildAxisMinorTicks(t,n,a,l){var u=a.axis,c=a.getModel("minorTick");if(!(!c.get("show")||u.scale.isBlank())){var p=u.getMinorTicksCoords();if(p.length)for(var d=c.getModel("lineStyle"),Q=l*c.get("length"),Ct=defaults(d.getLineStyle(),defaults(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),ar=0;ar<p.length;ar++)for(var en=createTicks(p[ar],n.transform,Q,Ct,"minorticks_"+ar),tn=0;tn<en.length;tn++)t.add(en[tn])}}function buildAxisLabel(t,n,a,l){var u=a.axis,c=retrieve(l.axisLabelShow,a.get(["axisLabel","show"]));if(!(!c||u.scale.isBlank())){var p=a.getModel("axisLabel"),d=p.get("margin"),Q=u.getViewLabels(),Ct=(retrieve(l.labelRotate,p.get("rotate"))||0)*PI$3/180,ar=AxisBuilder.innerTextLayout(l.rotation,Ct,l.labelDirection),en=a.getCategories&&a.getCategories(!0),tn=[],on=AxisBuilder.isLabelSilent(a),cn=a.get("triggerEvent");return each$f(Q,function(gn,Cn){var ex=u.scale.type==="ordinal"?u.scale.getRawOrdinalNumber(gn.tickValue):gn.tickValue,ix=gn.formattedLabel,ax=gn.rawLabel,ox=p;if(en&&en[ex]){var lx=en[ex];isObject$3(lx)&&lx.textStyle&&(ox=new Model(lx.textStyle,p,a.ecModel))}var cx=ox.getTextColor()||a.get(["axisLine","lineStyle","color"]),dx=u.dataToCoord(ex),hx=ox.getShallow("align",!0)||ar.textAlign,fx=retrieve2(ox.getShallow("alignMinLabel",!0),hx),ux=retrieve2(ox.getShallow("alignMaxLabel",!0),hx),gx=ox.getShallow("verticalAlign",!0)||ox.getShallow("baseline",!0)||ar.textVerticalAlign,yx=retrieve2(ox.getShallow("verticalAlignMinLabel",!0),gx),_x=retrieve2(ox.getShallow("verticalAlignMaxLabel",!0),gx),vx=new ZRText({x:dx,y:l.labelOffset+l.labelDirection*d,rotation:ar.rotation,silent:on,z2:10+(gn.level||0),style:createTextStyle$1(ox,{text:ix,align:Cn===0?fx:Cn===Q.length-1?ux:hx,verticalAlign:Cn===0?yx:Cn===Q.length-1?_x:gx,fill:isFunction$1(cx)?cx(u.type==="category"?ax:u.type==="value"?ex+"":ex,Cn):cx})});if(vx.anid="label_"+ex,setTooltipConfig({el:vx,componentModel:a,itemName:ix,formatterParamsExtra:{isTruncated:function(){return vx.isTruncated},value:ax,tickIndex:Cn}}),cn){var bx=AxisBuilder.makeAxisEventDataBase(a);bx.targetType="axisLabel",bx.value=ax,bx.tickIndex=Cn,u.type==="category"&&(bx.dataIndex=ex),getECData(vx).eventData=bx}n.add(vx),vx.updateTransform(),tn.push(vx),t.add(vx),vx.decomposeTransform()}),tn}}function collect(t,n){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(a,t,n),a.seriesInvolved&&collectSeriesInfo(a,t),a}function collectAxesInfo(t,n,a){var l=n.getComponent("tooltip"),u=n.getComponent("axisPointer"),c=u.get("link",!0)||[],p=[];each$f(a.getCoordinateSystems(),function(d){if(!d.axisPointerEnabled)return;var Q=makeKey(d.model),Ct=t.coordSysAxesInfo[Q]={};t.coordSysMap[Q]=d;var ar=d.model,en=ar.getModel("tooltip",l);if(each$f(d.getAxes(),curry$1(gn,!1,null)),d.getTooltipAxes&&l&&en.get("show")){var tn=en.get("trigger")==="axis",on=en.get(["axisPointer","type"])==="cross",cn=d.getTooltipAxes(en.get(["axisPointer","axis"]));(tn||on)&&each$f(cn.baseAxes,curry$1(gn,on?"cross":!0,tn)),on&&each$f(cn.otherAxes,curry$1(gn,"cross",!1))}function gn(Cn,ex,ix){var ax=ix.model.getModel("axisPointer",u),ox=ax.get("show");if(!(!ox||ox==="auto"&&!Cn&&!isHandleTrigger(ax))){ex==null&&(ex=ax.get("triggerTooltip")),ax=Cn?makeAxisPointerModel(ix,en,u,n,Cn,ex):ax;var lx=ax.get("snap"),cx=ax.get("triggerEmphasis"),dx=makeKey(ix.model),hx=ex||lx||ix.type==="category",fx=t.axesInfo[dx]={key:dx,axis:ix,coordSys:d,axisPointerModel:ax,triggerTooltip:ex,triggerEmphasis:cx,involveSeries:hx,snap:lx,useHandle:isHandleTrigger(ax),seriesModels:[],linkGroup:null};Ct[dx]=fx,t.seriesInvolved=t.seriesInvolved||hx;var ux=getLinkGroupIndex(c,ix);if(ux!=null){var gx=p[ux]||(p[ux]={axesInfo:{}});gx.axesInfo[dx]=fx,gx.mapper=c[ux].mapper,fx.linkGroup=gx}}}})}function makeAxisPointerModel(t,n,a,l,u,c){var p=n.getModel("axisPointer"),d=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],Q={};each$f(d,function(tn){Q[tn]=clone$4(p.get(tn))}),Q.snap=t.type!=="category"&&!!c,p.get("type")==="cross"&&(Q.type="line");var Ct=Q.label||(Q.label={});if(Ct.show==null&&(Ct.show=!1),u==="cross"){var ar=p.get(["label","show"]);if(Ct.show=ar??!0,!c){var en=Q.lineStyle=p.get("crossStyle");en&&defaults(Ct,en.textStyle)}}return t.model.getModel("axisPointer",new Model(Q,a,l))}function collectSeriesInfo(t,n){n.eachSeries(function(a){var l=a.coordinateSystem,u=a.get(["tooltip","trigger"],!0),c=a.get(["tooltip","show"],!0);!l||u==="none"||u===!1||u==="item"||c===!1||a.get(["axisPointer","show"],!0)===!1||each$f(t.coordSysAxesInfo[makeKey(l.model)],function(p){var d=p.axis;l.getAxis(d.dim)===d&&(p.seriesModels.push(a),p.seriesDataCount==null&&(p.seriesDataCount=0),p.seriesDataCount+=a.getData().count())})})}function getLinkGroupIndex(t,n){for(var a=n.model,l=n.dim,u=0;u<t.length;u++){var c=t[u]||{};if(checkPropInLink(c[l+"AxisId"],a.id)||checkPropInLink(c[l+"AxisIndex"],a.componentIndex)||checkPropInLink(c[l+"AxisName"],a.name))return u}}function checkPropInLink(t,n){return t==="all"||isArray$1(t)&&indexOf(t,n)>=0||t===n}function fixValue(t){var n=getAxisInfo$1(t);if(n){var a=n.axisPointerModel,l=n.axis.scale,u=a.option,c=a.get("status"),p=a.get("value");p!=null&&(p=l.parse(p));var d=isHandleTrigger(a);c==null&&(u.status=d?"show":"hide");var Q=l.getExtent().slice();Q[0]>Q[1]&&Q.reverse(),(p==null||p>Q[1])&&(p=Q[1]),p<Q[0]&&(p=Q[0]),u.value=p,d&&(u.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(t){var n=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(t)]}function getAxisPointerModel(t){var n=getAxisInfo$1(t);return n&&n.axisPointerModel}function isHandleTrigger(t){return!!t.get(["handle","show"])}function makeKey(t){return t.type+"||"+t.id}var axisPointerClazz={},AxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u,c){this.axisPointerClass&&fixValue(a),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,u,!0)},n.prototype.updateAxisPointer=function(a,l,u,c){this._doUpdateAxisPointerClass(a,u,!1)},n.prototype.remove=function(a,l){var u=this._axisPointer;u&&u.remove(l)},n.prototype.dispose=function(a,l){this._disposeAxisPointer(l),t.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(a,l,u){var c=n.getAxisPointerClass(this.axisPointerClass);if(c){var p=getAxisPointerModel(a);p?(this._axisPointer||(this._axisPointer=new c)).render(a,p,l,u):this._disposeAxisPointer(l)}},n.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},n.registerAxisPointerClass=function(a,l){axisPointerClazz[a]=l},n.getAxisPointerClass=function(a){return a&&axisPointerClazz[a]},n.type="axis",n}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(t,n,a,l){var u=a.axis;if(!u.scale.isBlank()){var c=a.getModel("splitArea"),p=c.getModel("areaStyle"),d=p.get("color"),Q=l.coordinateSystem.getRect(),Ct=u.getTicksCoords({tickModel:c,clamp:!0});if(Ct.length){var ar=d.length,en=inner$f(t).splitAreaColors,tn=createHashMap(),on=0;if(en)for(var cn=0;cn<Ct.length;cn++){var gn=en.get(Ct[cn].tickValue);if(gn!=null){on=(gn+(ar-1)*cn)%ar;break}}var Cn=u.toGlobalCoord(Ct[0].coord),ex=p.getAreaStyle();d=isArray$1(d)?d:[d];for(var cn=1;cn<Ct.length;cn++){var ix=u.toGlobalCoord(Ct[cn].coord),ax=void 0,ox=void 0,lx=void 0,cx=void 0;u.isHorizontal()?(ax=Cn,ox=Q.y,lx=ix-ax,cx=Q.height,Cn=ax+lx):(ax=Q.x,ox=Cn,lx=Q.width,cx=ix-ox,Cn=ox+cx);var dx=Ct[cn-1].tickValue;dx!=null&&tn.set(dx,on),n.add(new Rect$2({anid:dx!=null?"area_"+dx:null,shape:{x:ax,y:ox,width:lx,height:cx},style:defaults({fill:d[on]},ex),autoBatch:!0,silent:!0})),on=(on+1)%ar}inner$f(t).splitAreaColors=tn}}}function rectCoordAxisHandleRemove(t){inner$f(t).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="CartesianAxisPointer",a}return n.prototype.render=function(a,l,u,c){this.group.removeAll();var p=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var d=a.getCoordSysModel(),Q=layout$2(d,a),Ct=new AxisBuilder(a,extend({handleAutoShown:function(en){for(var tn=d.coordinateSystem.getCartesians(),on=0;on<tn.length;on++)if(isIntervalOrLogScale(tn[on].getOtherAxis(a.axis).scale))return!0;return!1}},Q));each$f(axisBuilderAttrs$3,Ct.add,Ct),this._axisGroup.add(Ct.getGroup()),each$f(selfBuilderAttrs$2,function(en){a.get([en,"show"])&&axisElementBuilders$2[en](this,this._axisGroup,a,d)},this);var ar=c&&c.type==="changeAxisOrder"&&c.isInitSort;ar||groupTransition(p,this._axisGroup,a),t.prototype.render.call(this,a,l,u,c)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n}(AxisView),axisElementBuilders$2={splitLine:function(t,n,a,l){var u=a.axis;if(!u.scale.isBlank()){var c=a.getModel("splitLine"),p=c.getModel("lineStyle"),d=p.get("color"),Q=c.get("showMinLine")!==!1,Ct=c.get("showMaxLine")!==!1;d=isArray$1(d)?d:[d];for(var ar=l.coordinateSystem.getRect(),en=u.isHorizontal(),tn=0,on=u.getTicksCoords({tickModel:c}),cn=[],gn=[],Cn=p.getLineStyle(),ex=0;ex<on.length;ex++){var ix=u.toGlobalCoord(on[ex].coord);if(!(ex===0&&!Q||ex===on.length-1&&!Ct)){var ax=on[ex].tickValue;en?(cn[0]=ix,cn[1]=ar.y,gn[0]=ix,gn[1]=ar.y+ar.height):(cn[0]=ar.x,cn[1]=ix,gn[0]=ar.x+ar.width,gn[1]=ix);var ox=tn++%d.length,lx=new Line$1({anid:ax!=null?"line_"+ax:null,autoBatch:!0,shape:{x1:cn[0],y1:cn[1],x2:gn[0],y2:gn[1]},style:defaults({stroke:d[ox]},Cn),silent:!0});subPixelOptimizeLine(lx.shape,Cn.lineWidth),n.add(lx)}}}},minorSplitLine:function(t,n,a,l){var u=a.axis,c=a.getModel("minorSplitLine"),p=c.getModel("lineStyle"),d=l.coordinateSystem.getRect(),Q=u.isHorizontal(),Ct=u.getMinorTicksCoords();if(Ct.length)for(var ar=[],en=[],tn=p.getLineStyle(),on=0;on<Ct.length;on++)for(var cn=0;cn<Ct[on].length;cn++){var gn=u.toGlobalCoord(Ct[on][cn].coord);Q?(ar[0]=gn,ar[1]=d.y,en[0]=gn,en[1]=d.y+d.height):(ar[0]=d.x,ar[1]=gn,en[0]=d.x+d.width,en[1]=gn);var Cn=new Line$1({anid:"minor_line_"+Ct[on][cn].tickValue,autoBatch:!0,shape:{x1:ar[0],y1:ar[1],x2:en[0],y2:en[1]},style:tn,silent:!0});subPixelOptimizeLine(Cn.shape,tn.lineWidth),n.add(Cn)}},splitArea:function(t,n,a,l){rectCoordAxisBuildSplitArea(t,n,a,l)}},CartesianXAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="xAxis",n}(CartesianAxisView),CartesianYAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=CartesianXAxisView.type,a}return n.type="yAxis",n}(CartesianAxisView),GridView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="grid",a}return n.prototype.render=function(a,l){this.group.removeAll(),a.get("show")&&this.group.add(new Rect$2({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n}(ComponentView),extraOption={offset:0};function install$N(t){t.registerComponentView(GridView),t.registerComponentModel(GridModel),t.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(t,"x",CartesianAxisModel,extraOption),axisModelCreator(t,"y",CartesianAxisModel,extraOption),t.registerComponentView(CartesianXAxisView),t.registerComponentView(CartesianYAxisView),t.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$M(t){use(install$N),t.registerSeriesModel(ScatterSeriesModel),t.registerChartView(ScatterView),t.registerLayout(pointsLayout("scatter"))}function radarLayout(t){t.eachSeriesByType("radar",function(n){var a=n.getData(),l=[],u=n.coordinateSystem;if(u){var c=u.getIndicatorAxes();each$f(c,function(p,d){a.each(a.mapDimension(c[d].dim),function(Q,Ct){l[Ct]=l[Ct]||[];var ar=u.dataToPoint(Q,d);l[Ct][d]=isValidPoint(ar)?ar:getValueMissingPoint(u)})}),a.each(function(p){var d=find(l[p],function(Q){return isValidPoint(Q)})||getValueMissingPoint(u);l[p].push(d.slice()),a.setItemLayout(p,l[p])})}})}function isValidPoint(t){return!isNaN(t[0])&&!isNaN(t[1])}function getValueMissingPoint(t){return[t.cx,t.cy]}function radarBackwardCompat(t){var n=t.polar;if(n){isArray$1(n)||(n=[n]);var a=[];each$f(n,function(l,u){l.indicator?(l.type&&!l.shape&&(l.shape=l.type),t.radar=t.radar||[],isArray$1(t.radar)||(t.radar=[t.radar]),t.radar.push(l)):a.push(l)}),t.polar=a}each$f(t.series,function(l){l&&l.type==="radar"&&l.polarIndex&&(l.radarIndex=l.polarIndex)})}var RadarView$1=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=a.coordinateSystem,p=this.group,d=a.getData(),Q=this._data;function Ct(tn,on){var cn=tn.getItemVisual(on,"symbol")||"circle";if(cn!=="none"){var gn=normalizeSymbolSize(tn.getItemVisual(on,"symbolSize")),Cn=createSymbol$1(cn,-1,-1,2,2),ex=tn.getItemVisual(on,"symbolRotate")||0;return Cn.attr({style:{strokeNoScale:!0},z2:100,scaleX:gn[0]/2,scaleY:gn[1]/2,rotation:ex*Math.PI/180||0}),Cn}}function ar(tn,on,cn,gn,Cn,ex){cn.removeAll();for(var ix=0;ix<on.length-1;ix++){var ax=Ct(gn,Cn);ax&&(ax.__dimIdx=ix,tn[ix]?(ax.setPosition(tn[ix]),graphic$1[ex?"initProps":"updateProps"](ax,{x:on[ix][0],y:on[ix][1]},a,Cn)):ax.setPosition(on[ix]),cn.add(ax))}}function en(tn){return map$1(tn,function(on){return[c.cx,c.cy]})}d.diff(Q).add(function(tn){var on=d.getItemLayout(tn);if(on){var cn=new Polygon,gn=new Polyline$1,Cn={shape:{points:on}};cn.shape.points=en(on),gn.shape.points=en(on),initProps(cn,Cn,a,tn),initProps(gn,Cn,a,tn);var ex=new Group$3,ix=new Group$3;ex.add(gn),ex.add(cn),ex.add(ix),ar(gn.shape.points,on,ix,d,tn,!0),d.setItemGraphicEl(tn,ex)}}).update(function(tn,on){var cn=Q.getItemGraphicEl(on),gn=cn.childAt(0),Cn=cn.childAt(1),ex=cn.childAt(2),ix={shape:{points:d.getItemLayout(tn)}};ix.shape.points&&(ar(gn.shape.points,ix.shape.points,ex,d,tn,!1),saveOldStyle(Cn),saveOldStyle(gn),updateProps$1(gn,ix,a),updateProps$1(Cn,ix,a),d.setItemGraphicEl(tn,cn))}).remove(function(tn){p.remove(Q.getItemGraphicEl(tn))}).execute(),d.eachItemGraphicEl(function(tn,on){var cn=d.getItemModel(on),gn=tn.childAt(0),Cn=tn.childAt(1),ex=tn.childAt(2),ix=d.getItemVisual(on,"style"),ax=ix.fill;p.add(tn),gn.useStyle(defaults(cn.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:ax})),setStatesStylesFromModel(gn,cn,"lineStyle"),setStatesStylesFromModel(Cn,cn,"areaStyle");var ox=cn.getModel("areaStyle"),lx=ox.isEmpty()&&ox.parentModel.isEmpty();Cn.ignore=lx,each$f(["emphasis","select","blur"],function(hx){var fx=cn.getModel([hx,"areaStyle"]),ux=fx.isEmpty()&&fx.parentModel.isEmpty();Cn.ensureState(hx).ignore=ux&&lx}),Cn.useStyle(defaults(ox.getAreaStyle(),{fill:ax,opacity:.7,decal:ix.decal}));var cx=cn.getModel("emphasis"),dx=cx.getModel("itemStyle").getItemStyle();ex.eachChild(function(hx){if(hx instanceof ZRImage){var fx=hx.style;hx.useStyle(extend({image:fx.image,x:fx.x,y:fx.y,width:fx.width,height:fx.height},ix))}else hx.useStyle(ix),hx.setColor(ax),hx.style.strokeNoScale=!0;var ux=hx.ensureState("emphasis");ux.style=clone$4(dx);var gx=d.getStore().get(d.getDimensionIndex(hx.__dimIdx),on);(gx==null||isNaN(gx))&&(gx=""),setLabelStyle(hx,getLabelStatesModels(cn),{labelFetcher:d.hostModel,labelDataIndex:on,labelDimIndex:hx.__dimIdx,defaultText:gx,inheritColor:ax,defaultOpacity:ix.opacity})}),toggleHoverEmphasis(tn,cx.get("focus"),cx.get("blurScope"),cx.get("disabled"))}),this._data=d},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n}(ChartView),RadarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(a,l){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(a,l,u){var c=this.getData(),p=this.coordinateSystem,d=p.getIndicatorAxes(),Q=this.getData().getName(a),Ct=Q===""?this.name:Q,ar=retrieveVisualColorForTooltipMarker(this,a);return createTooltipMarkup("section",{header:Ct,sortBlocks:!0,blocks:map$1(d,function(en){var tn=c.get(c.mapDimension(en.dim),a);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:ar,name:en.name,value:tn,sortParam:tn})})})},n.prototype.getTooltipPosition=function(a){if(a!=null){for(var l=this.getData(),u=this.coordinateSystem,c=l.getValues(map$1(u.dimensions,function(Ct){return l.mapDimension(Ct)}),a),p=0,d=c.length;p<d;p++)if(!isNaN(c[p])){var Q=u.getIndicatorAxes();return u.coordToPoint(Q[p].dataToCoord(c[p]),p)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(t,n){return defaults({show:n},t)}var RadarModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),l=this.get("splitNumber"),u=this.get("scale"),c=this.get("axisLine"),p=this.get("axisTick"),d=this.get("axisLabel"),Q=this.get("axisName"),Ct=this.get(["axisName","show"]),ar=this.get(["axisName","formatter"]),en=this.get("axisNameGap"),tn=this.get("triggerEvent"),on=map$1(this.get("indicator")||[],function(cn){cn.max!=null&&cn.max>0&&!cn.min?cn.min=0:cn.min!=null&&cn.min<0&&!cn.max&&(cn.max=0);var gn=Q;cn.color!=null&&(gn=defaults({color:cn.color},Q));var Cn=merge(clone$4(cn),{boundaryGap:a,splitNumber:l,scale:u,axisLine:c,axisTick:p,axisLabel:d,name:cn.text,showName:Ct,nameLocation:"end",nameGap:en,nameTextStyle:gn,triggerEvent:tn},!1);if(isString$1(ar)){var ex=Cn.name;Cn.name=ar.replace("{value}",ex??"")}else isFunction$1(ar)&&(Cn.name=ar(Cn.name,Cn));var ix=new Model(Cn,null,this.ecModel);return mixin(ix,AxisModelCommonMixin.prototype),ix.mainType="radar",ix.componentIndex=this.componentIndex,ix},this);this._indicatorModels=on},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=this.group;c.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},n.prototype._buildAxes=function(a){var l=a.coordinateSystem,u=l.getIndicatorAxes(),c=map$1(u,function(p){var d=p.model.get("showName")?p.name:"",Q=new AxisBuilder(p.model,{axisName:d,position:[l.cx,l.cy],rotation:p.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return Q});each$f(c,function(p){each$f(axisBuilderAttrs$2,p.add,p),this.group.add(p.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(a){var l=a.coordinateSystem,u=l.getIndicatorAxes();if(!u.length)return;var c=a.get("shape"),p=a.getModel("splitLine"),d=a.getModel("splitArea"),Q=p.getModel("lineStyle"),Ct=d.getModel("areaStyle"),ar=p.get("show"),en=d.get("show"),tn=Q.get("color"),on=Ct.get("color"),cn=isArray$1(tn)?tn:[tn],gn=isArray$1(on)?on:[on],Cn=[],ex=[];function ix(bx,xx,Sx){var Ax=Sx%xx.length;return bx[Ax]=bx[Ax]||[],Ax}if(c==="circle")for(var ax=u[0].getTicksCoords(),ox=l.cx,lx=l.cy,cx=0;cx<ax.length;cx++){if(ar){var dx=ix(Cn,cn,cx);Cn[dx].push(new Circle({shape:{cx:ox,cy:lx,r:ax[cx].coord}}))}if(en&&cx<ax.length-1){var dx=ix(ex,gn,cx);ex[dx].push(new Ring({shape:{cx:ox,cy:lx,r0:ax[cx].coord,r:ax[cx+1].coord}}))}}else for(var hx,fx=map$1(u,function(bx,xx){var Sx=bx.getTicksCoords();return hx=hx==null?Sx.length-1:Math.min(Sx.length-1,hx),map$1(Sx,function(Ax){return l.coordToPoint(Ax.coord,xx)})}),ux=[],cx=0;cx<=hx;cx++){for(var gx=[],yx=0;yx<u.length;yx++)gx.push(fx[yx][cx]);if(gx[0]&&gx.push(gx[0].slice()),ar){var dx=ix(Cn,cn,cx);Cn[dx].push(new Polyline$1({shape:{points:gx}}))}if(en&&ux){var dx=ix(ex,gn,cx-1);ex[dx].push(new Polygon({shape:{points:gx.concat(ux)}}))}ux=gx.slice().reverse()}var _x=Q.getLineStyle(),vx=Ct.getAreaStyle();each$f(ex,function(bx,xx){this.group.add(mergePath(bx,{style:defaults({stroke:"none",fill:gn[xx%gn.length]},vx),silent:!0}))},this),each$f(Cn,function(bx,xx){this.group.add(mergePath(bx,{style:defaults({fill:"none",stroke:cn[xx%cn.length]},_x),silent:!0}))},this)},n.type="radar",n}(ComponentView),IndicatorAxis=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this,a,l,u)||this;return c.type="value",c.angle=0,c.name="",c}return n}(Axis),Radar=function(){function t(n,a,l){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(u,c){var p="indicator_"+c,d=new IndicatorAxis(p,new IntervalScale);return d.name=u.get("name"),d.model=u,u.axis=d,this.dimensions.push(p),d},this),this.resize(n,l)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(n,a){var l=this._indicatorAxes[a];return this.coordToPoint(l.dataToCoord(n),a)},t.prototype.coordToPoint=function(n,a){var l=this._indicatorAxes[a],u=l.angle,c=this.cx+n*Math.cos(u),p=this.cy-n*Math.sin(u);return[c,p]},t.prototype.pointToData=function(n){var a=n[0]-this.cx,l=n[1]-this.cy,u=Math.sqrt(a*a+l*l);a/=u,l/=u;for(var c=Math.atan2(-l,a),p=1/0,d,Q=-1,Ct=0;Ct<this._indicatorAxes.length;Ct++){var ar=this._indicatorAxes[Ct],en=Math.abs(c-ar.angle);en<p&&(d=ar,Q=Ct,p=en)}return[Q,+(d&&d.coordToData(u))]},t.prototype.resize=function(n,a){var l=n.get("center"),u=a.getWidth(),c=a.getHeight(),p=Math.min(u,c)/2;this.cx=parsePercent(l[0],u),this.cy=parsePercent(l[1],c),this.startAngle=n.get("startAngle")*Math.PI/180;var d=n.get("radius");(isString$1(d)||isNumber(d))&&(d=[0,d]),this.r0=parsePercent(d[0],p),this.r=parsePercent(d[1],p),each$f(this._indicatorAxes,function(Q,Ct){Q.setExtent(this.r0,this.r);var ar=this.startAngle+Ct*Math.PI*2/this._indicatorAxes.length;ar=Math.atan2(Math.sin(ar),Math.cos(ar)),Q.angle=ar},this)},t.prototype.update=function(n,a){var l=this._indicatorAxes,u=this._model;each$f(l,function(d){d.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(d,Q){if(!(d.get("coordinateSystem")!=="radar"||n.getComponent("radar",d.get("radarIndex"))!==u)){var Ct=d.getData();each$f(l,function(ar){ar.scale.unionExtentFromData(Ct,Ct.mapDimension(ar.dim))})}},this);var c=u.get("splitNumber"),p=new IntervalScale;p.setExtent(0,c),p.setInterval(1),each$f(l,function(d,Q){alignScaleTicks(d.scale,d.model,p)})},t.prototype.convertToPixel=function(n,a,l){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(n,a,l){return console.warn("Not implemented."),null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.create=function(n,a){var l=[];return n.eachComponent("radar",function(u){var c=new t(u,n,a);l.push(c),u.coordinateSystem=c}),n.eachSeriesByType("radar",function(u){u.get("coordinateSystem")==="radar"&&(u.coordinateSystem=l[u.get("radarIndex")||0])}),l},t.dimensions=[],t}();function install$L(t){t.registerCoordinateSystem("radar",Radar),t.registerComponentModel(RadarModel),t.registerComponentView(RadarView),t.registerVisual({seriesType:"radar",reset:function(n){var a=n.getData();a.each(function(l){a.setItemVisual(l,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function install$K(t){use(install$L),t.registerChartView(RadarView$1),t.registerSeriesModel(RadarSeriesModel),t.registerLayout(radarLayout),t.registerProcessor(dataFilter$1("radar")),t.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(t,n,a){var l=getStore(t);l[n]=a}function release(t,n,a){var l=getStore(t),u=l[n];u===a&&(l[n]=null)}function isTaken(t,n){return!!getStore(t)[n]}function getStore(t){return t[ATTR]||(t[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(t){__extends(n,t);function n(a){var l=t.call(this)||this;l._zr=a;var u=bind$1(l._mousedownHandler,l),c=bind$1(l._mousemoveHandler,l),p=bind$1(l._mouseupHandler,l),d=bind$1(l._mousewheelHandler,l),Q=bind$1(l._pinchHandler,l);return l.enable=function(Ct,ar){this.disable(),this._opt=defaults(clone$4(ar)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),Ct==null&&(Ct=!0),(Ct===!0||Ct==="move"||Ct==="pan")&&(a.on("mousedown",u),a.on("mousemove",c),a.on("mouseup",p)),(Ct===!0||Ct==="scale"||Ct==="zoom")&&(a.on("mousewheel",d),a.on("pinch",Q))},l.disable=function(){a.off("mousedown",u),a.off("mousemove",c),a.off("mouseup",p),a.off("mousewheel",d),a.off("pinch",Q)},l}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(a){this.pointerChecker=a},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(a){if(!isMiddleOrRightButtonOnMouseUpDown(a)){for(var l=a.target;l;){if(l.draggable)return;l=l.__hostTarget||l.parent}var u=a.offsetX,c=a.offsetY;this.pointerChecker&&this.pointerChecker(a,u,c)&&(this._x=u,this._y=c,this._dragging=!0)}},n.prototype._mousemoveHandler=function(a){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",a,this._opt)||a.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var l=a.offsetX,u=a.offsetY,c=this._x,p=this._y,d=l-c,Q=u-p;this._x=l,this._y=u,this._opt.preventDefaultMouseMove&&stop(a.event),trigger$1(this,"pan","moveOnMouseMove",a,{dx:d,dy:Q,oldX:c,oldY:p,newX:l,newY:u,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(a){isMiddleOrRightButtonOnMouseUpDown(a)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(a){var l=isAvailableBehavior("zoomOnMouseWheel",a,this._opt),u=isAvailableBehavior("moveOnMouseWheel",a,this._opt),c=a.wheelDelta,p=Math.abs(c),d=a.offsetX,Q=a.offsetY;if(!(c===0||!l&&!u)){if(l){var Ct=p>3?1.4:p>1?1.2:1.1,ar=c>0?Ct:1/Ct;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",a,{scale:ar,originX:d,originY:Q,isAvailableBehavior:null})}if(u){var en=Math.abs(c),tn=(c>0?1:-1)*(en>3?.4:en>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:tn,originX:d,originY:Q,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(a){if(!isTaken(this._zr,"globalPan")){var l=a.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,a,{scale:l,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},n}(Eventful);function checkPointerAndTrigger(t,n,a,l,u){t.pointerChecker&&t.pointerChecker(l,u.originX,u.originY)&&(stop(l.event),trigger$1(t,n,a,l,u))}function trigger$1(t,n,a,l,u){u.isAvailableBehavior=bind$1(isAvailableBehavior,null,a,l),t.trigger(n,u)}function isAvailableBehavior(t,n,a){var l=a[t];return!t||l&&(!isString$1(l)||n.event[l+"Key"])}function updateViewOnPan(t,n,a){var l=t.target;l.x+=n,l.y+=a,l.dirty()}function updateViewOnZoom(t,n,a,l){var u=t.target,c=t.zoomLimit,p=t.zoom=t.zoom||1;if(p*=n,c){var d=c.min||0,Q=c.max||1/0;p=Math.max(Math.min(Q,p),d)}var Ct=p/t.zoom;t.zoom=p,u.x-=(a-u.x)*(Ct-1),u.y-=(l-u.y)*(Ct-1),u.scaleX*=Ct,u.scaleY*=Ct,u.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(t,n,a){var l=n.getComponentByElement(t.topTarget),u=l&&l.coordinateSystem;return l&&l!==a&&!IRRELEVANT_EXCLUDES.hasOwnProperty(l.mainType)&&u&&u.model!==a}function parseXML(t){if(isString$1(t)){var n=new DOMParser;t=n.parseFromString(t,"text/xml")}var a=t;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(n,a){a=a||{};var l=parseXML(n);this._defsUsePending=[];var u=new Group$3;this._root=u;var c=[],p=l.getAttribute("viewBox")||"",d=parseFloat(l.getAttribute("width")||a.width),Q=parseFloat(l.getAttribute("height")||a.height);isNaN(d)&&(d=null),isNaN(Q)&&(Q=null),parseAttributes(l,u,null,!0,!1);for(var Ct=l.firstChild;Ct;)this._parseNode(Ct,u,c,null,!1,!1),Ct=Ct.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var ar,en;if(p){var tn=splitNumberSequence(p);tn.length>=4&&(ar={x:parseFloat(tn[0]||0),y:parseFloat(tn[1]||0),width:parseFloat(tn[2]),height:parseFloat(tn[3])})}if(ar&&d!=null&&Q!=null&&(en=makeViewBoxTransform(ar,{x:0,y:0,width:d,height:Q}),!a.ignoreViewBox)){var on=u;u=new Group$3,u.add(on),on.scaleX=on.scaleY=en.scale,on.x=en.x,on.y=en.y}return!a.ignoreRootClip&&d!=null&&Q!=null&&u.setClipPath(new Rect$2({shape:{x:0,y:0,width:d,height:Q}})),{root:u,width:d,height:Q,viewBoxRect:ar,viewBoxTransform:en,named:c}},t.prototype._parseNode=function(n,a,l,u,c,p){var d=n.nodeName.toLowerCase(),Q,Ct=u;if(d==="defs"&&(c=!0),d==="text"&&(p=!0),d==="defs"||d==="switch")Q=a;else{if(!c){var ar=nodeParsers[d];if(ar&&hasOwn(nodeParsers,d)){Q=ar.call(this,n,a);var en=n.getAttribute("name");if(en){var tn={name:en,namedFrom:null,svgNodeTagLower:d,el:Q};l.push(tn),d==="g"&&(Ct=tn)}else u&&l.push({name:u.name,namedFrom:u,svgNodeTagLower:d,el:Q});a.add(Q)}}var on=paintServerParsers[d];if(on&&hasOwn(paintServerParsers,d)){var cn=on.call(this,n),gn=n.getAttribute("id");gn&&(this._defs[gn]=cn)}}if(Q&&Q.isGroup)for(var Cn=n.firstChild;Cn;)Cn.nodeType===1?this._parseNode(Cn,Q,l,Ct,c,p):Cn.nodeType===3&&p&&this._parseText(Cn,Q),Cn=Cn.nextSibling},t.prototype._parseText=function(n,a){var l=new TSpan({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),applyTextAlignment(l,a);var u=l.style,c=u.fontSize;c&&c<9&&(u.fontSize=9,l.scaleX*=c/9,l.scaleY*=c/9);var p=(u.fontSize||u.fontFamily)&&[u.fontStyle,u.fontWeight,(u.fontSize||12)+"px",u.fontFamily||"sans-serif"].join(" ");u.font=p;var d=l.getBoundingRect();return this._textX+=d.width,a.add(l),l},t.internalField=function(){nodeParsers={g:function(n,a){var l=new Group$3;return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l},rect:function(n,a){var l=new Rect$2;return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),l.silent=!0,l},circle:function(n,a){var l=new Circle;return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),l.silent=!0,l},line:function(n,a){var l=new Line$1;return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),l.silent=!0,l},ellipse:function(n,a){var l=new Ellipse;return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),l.silent=!0,l},polygon:function(n,a){var l=n.getAttribute("points"),u;l&&(u=parsePoints(l));var c=new Polygon({shape:{points:u||[]},silent:!0});return inheritStyle(a,c),parseAttributes(n,c,this._defsUsePending,!1,!1),c},polyline:function(n,a){var l=n.getAttribute("points"),u;l&&(u=parsePoints(l));var c=new Polyline$1({shape:{points:u||[]},silent:!0});return inheritStyle(a,c),parseAttributes(n,c,this._defsUsePending,!1,!1),c},image:function(n,a){var l=new ZRImage;return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),l.silent=!0,l},text:function(n,a){var l=n.getAttribute("x")||"0",u=n.getAttribute("y")||"0",c=n.getAttribute("dx")||"0",p=n.getAttribute("dy")||"0";this._textX=parseFloat(l)+parseFloat(c),this._textY=parseFloat(u)+parseFloat(p);var d=new Group$3;return inheritStyle(a,d),parseAttributes(n,d,this._defsUsePending,!1,!0),d},tspan:function(n,a){var l=n.getAttribute("x"),u=n.getAttribute("y");l!=null&&(this._textX=parseFloat(l)),u!=null&&(this._textY=parseFloat(u));var c=n.getAttribute("dx")||"0",p=n.getAttribute("dy")||"0",d=new Group$3;return inheritStyle(a,d),parseAttributes(n,d,this._defsUsePending,!1,!0),this._textX+=parseFloat(c),this._textY+=parseFloat(p),d},path:function(n,a){var l=n.getAttribute("d")||"",u=createFromString(l);return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u.silent=!0,u}}}(),t}(),paintServerParsers={lineargradient:function(t){var n=parseInt(t.getAttribute("x1")||"0",10),a=parseInt(t.getAttribute("y1")||"0",10),l=parseInt(t.getAttribute("x2")||"10",10),u=parseInt(t.getAttribute("y2")||"0",10),c=new LinearGradient(n,a,l,u);return parsePaintServerUnit(t,c),parseGradientColorStops(t,c),c},radialgradient:function(t){var n=parseInt(t.getAttribute("cx")||"0",10),a=parseInt(t.getAttribute("cy")||"0",10),l=parseInt(t.getAttribute("r")||"0",10),u=new RadialGradient(n,a,l);return parsePaintServerUnit(t,u),parseGradientColorStops(t,u),u}};function parsePaintServerUnit(t,n){var a=t.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(t,n){for(var a=t.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var l=a.getAttribute("offset"),u=void 0;l&&l.indexOf("%")>0?u=parseInt(l,10)/100:l?u=parseFloat(l):u=0;var c={};parseInlineStyle(a,c,c);var p=c.stopColor||a.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:u,color:p})}a=a.nextSibling}}function inheritStyle(t,n){t&&t.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,t.__inheritedStyle))}function parsePoints(t){for(var n=splitNumberSequence(t),a=[],l=0;l<n.length;l+=2){var u=parseFloat(n[l]),c=parseFloat(n[l+1]);a.push([u,c])}return a}function parseAttributes(t,n,a,l,u){var c=n,p=c.__inheritedStyle=c.__inheritedStyle||{},d={};t.nodeType===1&&(parseTransformAttribute(t,n),parseInlineStyle(t,p,d),l||parseAttributeStyle(t,p,d)),c.style=c.style||{},p.fill!=null&&(c.style.fill=getFillStrokeStyle(c,"fill",p.fill,a)),p.stroke!=null&&(c.style.stroke=getFillStrokeStyle(c,"stroke",p.stroke,a)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(Q){p[Q]!=null&&(c.style[Q]=parseFloat(p[Q]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(Q){p[Q]!=null&&(c.style[Q]=p[Q])}),u&&(c.__selfStyle=d),p.lineDash&&(c.style.lineDash=map$1(splitNumberSequence(p.lineDash),function(Q){return parseFloat(Q)})),(p.visibility==="hidden"||p.visibility==="collapse")&&(c.invisible=!0),p.display==="none"&&(c.ignore=!0)}function applyTextAlignment(t,n){var a=n.__selfStyle;if(a){var l=a.textBaseline,u=l;!l||l==="auto"||l==="baseline"?u="alphabetic":l==="before-edge"||l==="text-before-edge"?u="top":l==="after-edge"||l==="text-after-edge"?u="bottom":(l==="central"||l==="mathematical")&&(u="middle"),t.style.textBaseline=u}var c=n.__inheritedStyle;if(c){var p=c.textAlign,d=p;p&&(p==="middle"&&(d="center"),t.style.textAlign=d)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(t,n,a,l){var u=a&&a.match(urlRegex);if(u){var c=trim$1(u[1]);l.push([t,n,c]);return}return a==="none"&&(a=null),a}function applyDefs(t,n){for(var a=0;a<n.length;a++){var l=n[a];l[0].style[l[1]]=t[l[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(t){return t.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(t,n){var a=t.getAttribute("transform");if(a){a=a.replace(/,/g," ");var l=[],u=null;a.replace(transformRegex,function(en,tn,on){return l.push(tn,on),""});for(var c=l.length-1;c>0;c-=2){var p=l[c],d=l[c-1],Q=splitNumberSequence(p);switch(u=u||create$1(),d){case"translate":translate(u,u,[parseFloat(Q[0]),parseFloat(Q[1]||"0")]);break;case"scale":scale$1(u,u,[parseFloat(Q[0]),parseFloat(Q[1]||Q[0])]);break;case"rotate":rotate(u,u,-parseFloat(Q[0])*DEGREE_TO_ANGLE,[parseFloat(Q[1]||"0"),parseFloat(Q[2]||"0")]);break;case"skewX":var Ct=Math.tan(parseFloat(Q[0])*DEGREE_TO_ANGLE);mul(u,[1,0,Ct,1,0,0],u);break;case"skewY":var ar=Math.tan(parseFloat(Q[0])*DEGREE_TO_ANGLE);mul(u,[1,ar,0,1,0,0],u);break;case"matrix":u[0]=parseFloat(Q[0]),u[1]=parseFloat(Q[1]),u[2]=parseFloat(Q[2]),u[3]=parseFloat(Q[3]),u[4]=parseFloat(Q[4]),u[5]=parseFloat(Q[5]);break}}n.setLocalTransform(u)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(t,n,a){var l=t.getAttribute("style");if(l){styleRegex.lastIndex=0;for(var u;(u=styleRegex.exec(l))!=null;){var c=u[1],p=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,c)?INHERITABLE_STYLE_ATTRIBUTES_MAP[c]:null;p&&(n[p]=u[2]);var d=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,c)?SELF_STYLE_ATTRIBUTES_MAP[c]:null;d&&(a[d]=u[2])}}}function parseAttributeStyle(t,n,a){for(var l=0;l<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;l++){var u=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[l],c=t.getAttribute(u);c!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[u]]=c)}for(var l=0;l<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;l++){var u=SELF_STYLE_ATTRIBUTES_MAP_KEYS[l],c=t.getAttribute(u);c!=null&&(a[SELF_STYLE_ATTRIBUTES_MAP[u]]=c)}}function makeViewBoxTransform(t,n){var a=n.width/t.width,l=n.height/t.height,u=Math.min(a,l);return{scale:u,x:-(t.x+t.width/2)*u+(n.x+n.width/2),y:-(t.y+t.height/2)*u+(n.y+n.height/2)}}function parseSVG(t,n){var a=new SVGParser;return a.parse(t,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function t(n,a){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(a)}return t.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=createRegions(n.named),l=a.regions,u=a.regionsMap;this._regions=l,this._regionsMap=u}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(n){var a,l;try{a=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},l=a.root,assert(l!=null)}catch(Cn){throw new Error(`Invalid svg format
`+Cn.message)}var u=new Group$3;u.add(l),u.isGeoSVGGraphicRoot=!0;var c=a.width,p=a.height,d=a.viewBoxRect,Q=this._boundingRect;if(!Q){var Ct=void 0,ar=void 0,en=void 0,tn=void 0;if(c!=null?(Ct=0,en=c):d&&(Ct=d.x,en=d.width),p!=null?(ar=0,tn=p):d&&(ar=d.y,tn=d.height),Ct==null||ar==null){var on=l.getBoundingRect();Ct==null&&(Ct=on.x,en=on.width),ar==null&&(ar=on.y,tn=on.height)}Q=this._boundingRect=new BoundingRect(Ct,ar,en,tn)}if(d){var cn=makeViewBoxTransform(d,Q);l.scaleX=l.scaleY=cn.scale,l.x=cn.x,l.y=cn.y}u.setClipPath(new Rect$2({shape:Q.plain()}));var gn=[];return each$f(a.named,function(Cn){REGION_AVAILABLE_SVG_TAG_MAP.get(Cn.svgNodeTagLower)!=null&&(gn.push(Cn),setSilent(Cn.el))}),{root:u,boundingRect:Q,named:gn}},t.prototype.useGraphic=function(n){var a=this._usedGraphicMap,l=a.get(n);return l||(l=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(n,l),l)},t.prototype.freeGraphic=function(n){var a=this._usedGraphicMap,l=a.get(n);l&&(a.removeKey(n),this._freedGraphics.push(l))},t}();function setSilent(t){t.silent=!1,t.isGroup&&t.traverse(function(n){n.silent=!1})}function createRegions(t){var n=[],a=createHashMap();return each$f(t,function(l){if(l.namedFrom==null){var u=new GeoSVGRegion(l.name,l.el);n.push(u),a.set(l.name,u)}}),{regions:n,regionsMap:a}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(t,n){if(t==="china"){for(var a=0;a<n.length;a++)if(n[a].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(l){return{type:"polygon",exterior:l}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(t,n){if(t==="china"){var a=coordsOffsetMap[n.name];if(a){var l=n.getCenter();l[0]+=a[0]/10.5,l[1]+=-a[1]/(10.5/.75),n.setCenter(l)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(t,n){t==="china"&&n.name===""&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function t(n,a,l){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=l,this._geoJSON=parseInput(a)}return t.prototype.load=function(n,a){a=a||DEFAULT_NAME_PROPERTY;var l=this._parsedMap.get(a);if(!l){var u=this._parseToRegions(a);l=this._parsedMap.set(a,{regions:u,boundingRect:calculateBoundingRect(u)})}var c=createHashMap(),p=[];return each$f(l.regions,function(d){var Q=d.name;n&&hasOwn(n,Q)&&(d=d.cloneShallow(Q=n[Q])),p.push(d),c.set(Q,d)}),{regions:p,boundingRect:l.boundingRect||new BoundingRect(0,0,0,0),regionsMap:c}},t.prototype._parseToRegions=function(n){var a=this._mapName,l=this._geoJSON,u;try{u=l?parseGeoJSON(l,n):[]}catch(c){throw new Error(`Invalid geoJson format
`+c.message)}return fixNanhai(a,u),each$f(u,function(c){var p=c.name;fixTextCoords(a,c),fixDiaoyuIsland(a,c);var d=this._specialAreas&&this._specialAreas[p];d&&c.transformTo(d.left,d.top,d.width,d.height)},this),u},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function calculateBoundingRect(t){for(var n,a=0;a<t.length;a++){var l=t[a].getBoundingRect();n=n||l.clone(),n.union(l)}return n}function parseInput(t){return isString$1(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var storage=createHashMap();const geoSourceManager={registerMap:function(t,n,a){if(n.svg){var l=new GeoSVGResource(t,n.svg);storage.set(t,l)}else{var u=n.geoJson||n.geoJSON;u&&!n.features?a=n.specialAreas:u=n;var l=new GeoJSONResource(t,u,a);storage.set(t,l)}},getGeoResource:function(t){return storage.get(t)},getMapForUser:function(t){var n=storage.get(t);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(t,n,a){var l=storage.get(t);if(l)return l.load(n,a)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(t){var n=t.getItemStyle(),a=t.get("areaColor");return a!=null&&(n.fill=a),n}function fixLineStyle(t){var n=t.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=function(){function t(n){var a=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(n.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Group$3),a.add(this._svgGroup=new Group$3)}return t.prototype.draw=function(n,a,l,u,c){var p=n.mainType==="geo",d=n.getData&&n.getData();p&&a.eachComponent({mainType:"series",subType:"map"},function(ex){!d&&ex.getHostGeoModel()===n&&(d=ex.getData())});var Q=n.coordinateSystem,Ct=this._regionsGroup,ar=this.group,en=Q.getTransformInfo(),tn=en.raw,on=en.roam,cn=!Ct.childAt(0)||c;cn?(ar.x=on.x,ar.y=on.y,ar.scaleX=on.scaleX,ar.scaleY=on.scaleY,ar.dirty()):updateProps$1(ar,on,n);var gn=d&&d.getVisual("visualMeta")&&d.getVisual("visualMeta").length>0,Cn={api:l,geo:Q,mapOrGeoModel:n,data:d,isVisualEncodedByVisualMap:gn,isGeo:p,transformInfoRaw:tn};Q.resourceType==="geoJSON"?this._buildGeoJSON(Cn):Q.resourceType==="geoSVG"&&this._buildSVG(Cn),this._updateController(n,a,l),this._updateMapSelectHandler(n,Ct,l,u)},t.prototype._buildGeoJSON=function(n){var a=this._regionsGroupByName=createHashMap(),l=createHashMap(),u=this._regionsGroup,c=n.transformInfoRaw,p=n.mapOrGeoModel,d=n.data,Q=n.geo.projection,Ct=Q&&Q.stream;function ar(on,cn){return cn&&(on=cn(on)),on&&[on[0]*c.scaleX+c.x,on[1]*c.scaleY+c.y]}function en(on){for(var cn=[],gn=!Ct&&Q&&Q.project,Cn=0;Cn<on.length;++Cn){var ex=ar(on[Cn],gn);ex&&cn.push(ex)}return cn}function tn(on){return{shape:{points:en(on)}}}u.removeAll(),each$f(n.geo.regions,function(on){var cn=on.name,gn=a.get(cn),Cn=l.get(cn)||{},ex=Cn.dataIdx,ix=Cn.regionModel;if(!gn){gn=a.set(cn,new Group$3),u.add(gn),ex=d?d.indexOfName(cn):null,ix=n.isGeo?p.getRegionModel(cn):d?d.getItemModel(ex):null;var ax=ix.get("silent",!0);ax!=null&&(gn.silent=ax),l.set(cn,{dataIdx:ex,regionModel:ix})}var ox=[],lx=[];each$f(on.geometries,function(hx){if(hx.type==="polygon"){var fx=[hx.exterior].concat(hx.interiors||[]);Ct&&(fx=projectPolys(fx,Ct)),each$f(fx,function(gx){ox.push(new Polygon(tn(gx)))})}else{var ux=hx.points;Ct&&(ux=projectPolys(ux,Ct,!0)),each$f(ux,function(gx){lx.push(new Polyline$1(tn(gx)))})}});var cx=ar(on.getCenter(),Q&&Q.project);function dx(hx,fx){if(hx.length){var ux=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:hx}});gn.add(ux),applyOptionStyleForRegion(n,ux,ex,ix),resetLabelForRegion(n,ux,cn,ix,p,ex,cx),fx&&(fixLineStyle(ux),each$f(ux.states,fixLineStyle))}}dx(ox),dx(lx,!0)}),a.each(function(on,cn){var gn=l.get(cn),Cn=gn.dataIdx,ex=gn.regionModel;resetEventTriggerForRegion(n,on,cn,ex,p,Cn),resetTooltipForRegion(n,on,cn,ex,p),resetStateTriggerForRegion(n,on,cn,ex,p)},this)},t.prototype._buildSVG=function(n){var a=n.geo.map,l=n.transformInfoRaw;this._svgGroup.x=l.x,this._svgGroup.y=l.y,this._svgGroup.scaleX=l.scaleX,this._svgGroup.scaleY=l.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var u=this._svgDispatcherMap=createHashMap(),c=!1;each$f(this._svgGraphicRecord.named,function(p){var d=p.name,Q=n.mapOrGeoModel,Ct=n.data,ar=p.svgNodeTagLower,en=p.el,tn=Ct?Ct.indexOfName(d):null,on=Q.getRegionModel(d);OPTION_STYLE_ENABLED_TAG_MAP.get(ar)!=null&&en instanceof Displayable&&applyOptionStyleForRegion(n,en,tn,on),en instanceof Displayable&&(en.culling=!0);var cn=on.get("silent",!0);if(cn!=null&&(en.silent=cn),en.z2EmphasisLift=0,!p.namedFrom&&(LABEL_HOST_MAP.get(ar)!=null&&resetLabelForRegion(n,en,d,on,Q,tn,null),resetEventTriggerForRegion(n,en,d,on,Q,tn),resetTooltipForRegion(n,en,d,on,Q),STATE_TRIGGER_TAG_MAP.get(ar)!=null)){var gn=resetStateTriggerForRegion(n,en,d,on,Q);gn==="self"&&(c=!0);var Cn=u.get(d)||u.set(d,[]);Cn.push(en)}},this),this._enableBlurEntireSVG(c,n)},t.prototype._enableBlurEntireSVG=function(n,a){if(n&&a.isGeo){var l=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),u=l.opacity;this._svgGraphicRecord.root.traverse(function(c){if(!c.isGroup){setDefaultStateProxy(c);var p=c.ensureState("blur").style||{};p.opacity==null&&u!=null&&(p.opacity=u),c.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(n,a){if(n==null)return[];var l=a.coordinateSystem;if(l.resourceType==="geoJSON"){var u=this._regionsGroupByName;if(u){var c=u.get(n);return c?[c]:[]}}else if(l.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},t.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},t.prototype._useSVG=function(n){var a=geoSourceManager.getGeoResource(n);if(a&&a.type==="geoSVG"){var l=a.useGraphic(this.uid);this._svgGroup.add(l.root),this._svgGraphicRecord=l,this._svgMapName=n}},t.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var a=geoSourceManager.getGeoResource(n);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(n,a,l){var u=n.coordinateSystem,c=this._controller,p=this._controllerHost;p.zoomLimit=n.get("scaleLimit"),p.zoom=u.getZoom(),c.enable(n.get("roam")||!1);var d=n.mainType;function Q(){var Ct={type:"geoRoam",componentType:d};return Ct[d+"Id"]=n.id,Ct}c.off("pan").on("pan",function(Ct){this._mouseDownFlag=!1,updateViewOnPan(p,Ct.dx,Ct.dy),l.dispatchAction(extend(Q(),{dx:Ct.dx,dy:Ct.dy,animation:{duration:0}}))},this),c.off("zoom").on("zoom",function(Ct){this._mouseDownFlag=!1,updateViewOnZoom(p,Ct.scale,Ct.originX,Ct.originY),l.dispatchAction(extend(Q(),{totalZoom:p.zoom,zoom:Ct.scale,originX:Ct.originX,originY:Ct.originY,animation:{duration:0}}))},this),c.setPointerChecker(function(Ct,ar,en){return u.containPoint([ar,en])&&!onIrrelevantElement(Ct,l,n)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var a=n.getTextContent();a&&(a.ignore=mapLabelRaw(a).ignore)})},t.prototype._updateMapSelectHandler=function(n,a,l,u){var c=this;a.off("mousedown"),a.off("click"),n.get("selectedMode")&&(a.on("mousedown",function(){c._mouseDownFlag=!0}),a.on("click",function(p){c._mouseDownFlag&&(c._mouseDownFlag=!1)}))},t}();function applyOptionStyleForRegion(t,n,a,l){var u=l.getModel("itemStyle"),c=l.getModel(["emphasis","itemStyle"]),p=l.getModel(["blur","itemStyle"]),d=l.getModel(["select","itemStyle"]),Q=getFixedItemStyle(u),Ct=getFixedItemStyle(c),ar=getFixedItemStyle(d),en=getFixedItemStyle(p),tn=t.data;if(tn){var on=tn.getItemVisual(a,"style"),cn=tn.getItemVisual(a,"decal");t.isVisualEncodedByVisualMap&&on.fill&&(Q.fill=on.fill),cn&&(Q.decal=createOrUpdatePatternFromDecal(cn,t.api))}n.setStyle(Q),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=Ct,n.ensureState("select").style=ar,n.ensureState("blur").style=en,setDefaultStateProxy(n)}function resetLabelForRegion(t,n,a,l,u,c,p){var d=t.data,Q=t.isGeo,Ct=d&&isNaN(d.get(d.mapDimension("value"),c)),ar=d&&d.getItemLayout(c);if(Q||Ct||ar&&ar.showLabel){var en=Q?a:c,tn=void 0;(!d||c>=0)&&(tn=u);var on=p?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(l),{labelFetcher:tn,labelDataIndex:en,defaultText:a},on);var cn=n.getTextContent();if(cn&&(mapLabelRaw(cn).ignore=cn.ignore,n.textConfig&&p)){var gn=n.getBoundingRect().clone();n.textConfig.layoutRect=gn,n.textConfig.position=[(p[0]-gn.x)/gn.width*100+"%",(p[1]-gn.y)/gn.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(t,n,a,l,u,c){t.data?t.data.setItemGraphicEl(c,n):getECData(n).eventData={componentType:"geo",componentIndex:u.componentIndex,geoIndex:u.componentIndex,name:a,region:l&&l.option||{}}}function resetTooltipForRegion(t,n,a,l,u){t.data||setTooltipConfig({el:n,componentModel:u,itemName:a,itemTooltipOption:l.get("tooltip")})}function resetStateTriggerForRegion(t,n,a,l,u){n.highDownSilentOnTouch=!!u.get("selectedMode");var c=l.getModel("emphasis"),p=c.get("focus");return toggleHoverEmphasis(n,p,c.get("blurScope"),c.get("disabled")),t.isGeo&&enableComponentHighDownFeatures(n,u,a),p}function projectPolys(t,n,a){var l=[],u;function c(){u=[]}function p(){u.length&&(l.push(u),u=[])}var d=n({polygonStart:c,polygonEnd:p,lineStart:c,lineEnd:p,point:function(Q,Ct){isFinite(Q)&&isFinite(Ct)&&u.push([Q,Ct])},sphere:function(){}});return!a&&d.polygonStart(),each$f(t,function(Q){d.lineStart();for(var Ct=0;Ct<Q.length;Ct++)d.point(Q[Ct][0],Q[Ct][1]);d.lineEnd()}),!a&&d.polygonEnd(),l}var MapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u,c){if(!(c&&c.type==="mapToggleSelect"&&c.from===this.uid)){var p=this.group;if(p.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&c&&c.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),c&&c.type==="geoRoam"&&c.componentType==="series"&&c.seriesId===a.id){var d=this._mapDraw;d&&p.add(d.group)}else if(a.needsDrawMap){var d=this._mapDraw||new MapDraw(u);p.add(d.group),d.draw(a,l,u,this,c),this._mapDraw=d}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&l.getComponent("legend")&&this._renderSymbols(a,l,u)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(a,l,u){var c=a.originalData,p=this.group;c.each(c.mapDimension("value"),function(d,Q){if(!isNaN(d)){var Ct=c.getItemLayout(Q);if(!(!Ct||!Ct.point)){var ar=Ct.point,en=Ct.offset,tn=new Circle({style:{fill:a.getData().getVisual("style").fill},shape:{cx:ar[0]+en*9,cy:ar[1],r:3},silent:!0,z2:8+(en?0:Z2_EMPHASIS_LIFT+1)});if(!en){var on=a.mainSeries.getData(),cn=c.getName(Q),gn=on.indexOfName(cn),Cn=c.getItemModel(Q),ex=Cn.getModel("label"),ix=on.getItemGraphicEl(gn);setLabelStyle(tn,getLabelStatesModels(Cn),{labelFetcher:{getFormattedLabel:function(ax,ox){return a.getFormattedLabel(gn,ox)}},defaultText:cn}),tn.disableLabelAnimation=!0,ex.get("position")||tn.setTextConfig({position:"bottom"}),ix.onHoverStateChange=function(ax){setStatesFlag(tn,ax)}}p.add(tn)}}})},n.type="map",n}(ChartView),MapSeries=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(l){if(l!=null){var u=this.getData().getName(l),c=this.coordinateSystem,p=c.getRegion(u);return p&&c.dataToPoint(p.getCenter())}},a}return n.prototype.getInitialData=function(a){for(var l=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),u=createHashMap(),c=[],p=0,d=l.count();p<d;p++){var Q=l.getName(p);u.set(Q,p)}var Ct=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(Ct.regions,function(ar){var en=ar.name,tn=u.get(en),on=ar.properties&&ar.properties.echartsStyle,cn;tn==null?(cn={name:en},c.push(cn)):cn=l.getRawDataItem(tn),on&&merge(cn,on)}),l.appendData(c),l},n.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return a!=null?this.ecModel.getComponent("geo",a):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(a){var l=this.getData();return l.get(l.mapDimension("value"),a)},n.prototype.getRegionModel=function(a){var l=this.getData();return l.getItemModel(l.indexOfName(a))},n.prototype.formatTooltip=function(a,l,u){for(var c=this.getData(),p=this.getRawValue(a),d=c.getName(a),Q=this.seriesGroup,Ct=[],ar=0;ar<Q.length;ar++){var en=Q[ar].originalData.indexOfName(d),tn=c.mapDimension("value");isNaN(Q[ar].originalData.get(tn,en))||Ct.push(Q[ar].name)}return createTooltipMarkup("section",{header:Ct.join(", "),noHeader:!Ct.length,blocks:[createTooltipMarkup("nameValue",{name:d,value:p})]})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.getLegendIcon=function(a){var l=a.icon||"roundRect",u=createSymbol$1(l,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return u.setStyle(a.itemStyle),u.style.stroke="none",l.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),u},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n}(SeriesModel);function dataStatistics(t,n){var a={};return each$f(t,function(l){l.each(l.mapDimension("value"),function(u,c){var p="ec-"+l.getName(c);a[p]=a[p]||[],isNaN(u)||a[p].push(u)})}),t[0].map(t[0].mapDimension("value"),function(l,u){for(var c="ec-"+t[0].getName(u),p=0,d=1/0,Q=-1/0,Ct=a[c].length,ar=0;ar<Ct;ar++)d=Math.min(d,a[c][ar]),Q=Math.max(Q,a[c][ar]),p+=a[c][ar];var en;return n==="min"?en=d:n==="max"?en=Q:n==="average"?en=p/Ct:en=p,Ct===0?NaN:en})}function mapDataStatistic(t){var n={};t.eachSeriesByType("map",function(a){var l=a.getHostGeoModel(),u=l?"o"+l.id:"i"+a.getMapType();(n[u]=n[u]||[]).push(a)}),each$f(n,function(a,l){for(var u=dataStatistics(map$1(a,function(p){return p.getData()}),a[0].get("mapValueCalculation")),c=0;c<a.length;c++)a[c].originalData=a[c].getData();for(var c=0;c<a.length;c++)a[c].seriesGroup=a,a[c].needsDrawMap=c===0&&!a[c].getHostGeoModel(),a[c].setData(u.cloneShallow()),a[c].mainSeries=a[0]})}function mapSymbolLayout(t){var n={};t.eachSeriesByType("map",function(a){var l=a.getMapType();if(!(a.getHostGeoModel()||n[l])){var u={};each$f(a.seriesGroup,function(p){var d=p.coordinateSystem,Q=p.originalData;p.get("showLegendSymbol")&&t.getComponent("legend")&&Q.each(Q.mapDimension("value"),function(Ct,ar){var en=Q.getName(ar),tn=d.getRegion(en);if(!(!tn||isNaN(Ct))){var on=u[en]||0,cn=d.dataToPoint(tn.getCenter());u[en]=on+1,Q.setItemLayout(ar,{point:cn,offset:on})}})});var c=a.getData();c.each(function(p){var d=c.getName(p),Q=c.getItemLayout(p)||{};Q.showLabel=!u[d],c.setItemLayout(p,Q)}),n[l]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(t){__extends(n,t);function n(a){var l=t.call(this)||this;return l.type="view",l.dimensions=["x","y"],l._roamTransformable=new Transformable,l._rawTransformable=new Transformable,l.name=a,l}return n.prototype.setBoundingRect=function(a,l,u,c){return this._rect=new BoundingRect(a,l,u,c),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(a,l,u,c){this._transformTo(a,l,u,c),this._viewRect=new BoundingRect(a,l,u,c)},n.prototype._transformTo=function(a,l,u,c){var p=this.getBoundingRect(),d=this._rawTransformable;d.transform=p.calculateTransform(new BoundingRect(a,l,u,c));var Q=d.parent;d.parent=null,d.decomposeTransform(),d.parent=Q,this._updateTransform()},n.prototype.setCenter=function(a,l){a&&(this._center=[parsePercent(a[0],l.getWidth()),parsePercent(a[1],l.getHeight())],this._updateCenterAndZoom())},n.prototype.setZoom=function(a){a=a||1;var l=this.zoomLimit;l&&(l.max!=null&&(a=Math.min(l.max,a)),l.min!=null&&(a=Math.max(l.min,a))),this._zoom=a,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),l=a.x+a.width/2,u=a.y+a.height/2;return[l,u]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),l=this._roamTransformable,u=this.getDefaultCenter(),c=this.getCenter(),p=this.getZoom();c=applyTransform$1([],c,a),u=applyTransform$1([],u,a),l.originX=c[0],l.originY=c[1],l.x=u[0]-c[0],l.y=u[1]-c[1],l.scaleX=l.scaleY=p,this._updateTransform()},n.prototype._updateTransform=function(){var a=this._roamTransformable,l=this._rawTransformable;l.parent=a,a.updateTransform(),l.updateTransform(),copy(this.transform||(this.transform=[]),l.transform||create$1()),this._rawTransform=l.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var a=this._rawTransformable,l=this._roamTransformable,u=new Transformable;return u.transform=l.transform,u.decomposeTransform(),{roam:{x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},n.prototype.dataToPoint=function(a,l,u){var c=l?this._rawTransform:this.transform;return u=u||[],c?v2ApplyTransform(u,a,c):copy$1(u,a)},n.prototype.pointToData=function(a){var l=this.invTransform;return l?v2ApplyTransform([],a,l):[a[0],a[1]]},n.prototype.convertToPixel=function(a,l,u){var c=getCoordSys$4(l);return c===this?c.dataToPoint(u):null},n.prototype.convertFromPixel=function(a,l,u){var c=getCoordSys$4(l);return c===this?c.pointToData(u):null},n.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},n.dimensions=["x","y"],n}(Transformable);function getCoordSys$4(t){var n=t.seriesModel;return n?n.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this,a)||this;c.dimensions=geo2DDimensions,c.type="geo",c._nameCoordMap=createHashMap(),c.map=l;var p=u.projection,d=geoSourceManager.load(l,u.nameMap,u.nameProperty),Q=geoSourceManager.getGeoResource(l);c.resourceType=Q?Q.type:null;var Ct=c.regions=d.regions,ar=GEO_DEFAULT_PARAMS[Q.type];c._regionsMap=d.regionsMap,c.regions=d.regions,c.projection=p;var en;if(p)for(var tn=0;tn<Ct.length;tn++){var on=Ct[tn].getBoundingRect(p);en=en||on.clone(),en.union(on)}else en=d.boundingRect;return c.setBoundingRect(en.x,en.y,en.width,en.height),c.aspectScale=p?1:retrieve2(u.aspectScale,ar.aspectScale),c._invertLongitute=p?!1:ar.invertLongitute,c}return n.prototype._transformTo=function(a,l,u,c){var p=this.getBoundingRect(),d=this._invertLongitute;p=p.clone(),d&&(p.y=-p.y-p.height);var Q=this._rawTransformable;Q.transform=p.calculateTransform(new BoundingRect(a,l,u,c));var Ct=Q.parent;Q.parent=null,Q.decomposeTransform(),Q.parent=Ct,d&&(Q.scaleY=-Q.scaleY),this._updateTransform()},n.prototype.getRegion=function(a){return this._regionsMap.get(a)},n.prototype.getRegionByCoord=function(a){for(var l=this.regions,u=0;u<l.length;u++){var c=l[u];if(c.type==="geoJSON"&&c.contain(a))return l[u]}},n.prototype.addGeoCoord=function(a,l){this._nameCoordMap.set(a,l)},n.prototype.getGeoCoord=function(a){var l=this._regionsMap.get(a);return this._nameCoordMap.get(a)||l&&l.getCenter()},n.prototype.dataToPoint=function(a,l,u){if(isString$1(a)&&(a=this.getGeoCoord(a)),a){var c=this.projection;return c&&(a=c.project(a)),a&&this.projectedToPoint(a,l,u)}},n.prototype.pointToData=function(a){var l=this.projection;return l&&(a=l.unproject(a)),a&&this.pointToProjected(a)},n.prototype.pointToProjected=function(a){return t.prototype.pointToData.call(this,a)},n.prototype.projectedToPoint=function(a,l,u){return t.prototype.dataToPoint.call(this,a,l,u)},n.prototype.convertToPixel=function(a,l,u){var c=getCoordSys$3(l);return c===this?c.dataToPoint(u):null},n.prototype.convertFromPixel=function(a,l,u){var c=getCoordSys$3(l);return c===this?c.pointToData(u):null},n}(View);mixin(Geo,View);function getCoordSys$3(t){var n=t.geoModel,a=t.seriesModel;return n?n.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(t,n){var a=t.get("boundingCoords");if(a!=null){var l=a[0],u=a[1];if(isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])){var c=this.projection;if(c){var p=l[0],d=l[1],Q=u[0],Ct=u[1];l=[1/0,1/0],u=[-1/0,-1/0];var ar=function(cx,dx,hx,fx){for(var ux=hx-cx,gx=fx-dx,yx=0;yx<=100;yx++){var _x=yx/100,vx=c.project([cx+ux*_x,dx+gx*_x]);min$1(l,l,vx),max$1(u,u,vx)}};ar(p,d,Q,d),ar(Q,d,Q,Ct),ar(Q,Ct,p,Ct),ar(p,Ct,Q,d)}this.setBoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1])}}var en=this.getBoundingRect(),tn=t.get("layoutCenter"),on=t.get("layoutSize"),cn=n.getWidth(),gn=n.getHeight(),Cn=en.width/en.height*this.aspectScale,ex=!1,ix,ax;tn&&on&&(ix=[parsePercent(tn[0],cn),parsePercent(tn[1],gn)],ax=parsePercent(on,Math.min(cn,gn)),!isNaN(ix[0])&&!isNaN(ix[1])&&!isNaN(ax)&&(ex=!0));var ox;if(ex)ox={},Cn>1?(ox.width=ax,ox.height=ax/Cn):(ox.height=ax,ox.width=ax*Cn),ox.y=ix[1]-ox.height/2,ox.x=ix[0]-ox.width/2;else{var lx=t.getBoxLayoutParams();lx.aspect=Cn,ox=getLayoutRect(lx,{width:cn,height:gn})}this.setViewRect(ox.x,ox.y,ox.width,ox.height),this.setCenter(t.get("center"),n),this.setZoom(t.get("zoom"))}function setGeoCoords(t,n){each$f(n.get("geoCoord"),function(a,l){t.addGeoCoord(l,a)})}var GeoCreator=function(){function t(){this.dimensions=geo2DDimensions}return t.prototype.create=function(n,a){var l=[];function u(p){return{nameProperty:p.get("nameProperty"),aspectScale:p.get("aspectScale"),projection:p.get("projection")}}n.eachComponent("geo",function(p,d){var Q=p.get("map"),Ct=new Geo(Q+d,Q,extend({nameMap:p.get("nameMap")},u(p)));Ct.zoomLimit=p.get("scaleLimit"),l.push(Ct),p.coordinateSystem=Ct,Ct.model=p,Ct.resize=resizeGeo,Ct.resize(p,a)}),n.eachSeries(function(p){var d=p.get("coordinateSystem");if(d==="geo"){var Q=p.get("geoIndex")||0;p.coordinateSystem=l[Q]}});var c={};return n.eachSeriesByType("map",function(p){if(!p.getHostGeoModel()){var d=p.getMapType();c[d]=c[d]||[],c[d].push(p)}}),each$f(c,function(p,d){var Q=map$1(p,function(ar){return ar.get("nameMap")}),Ct=new Geo(d,d,extend({nameMap:mergeAll(Q)},u(p[0])));Ct.zoomLimit=retrieve.apply(null,map$1(p,function(ar){return ar.get("scaleLimit")})),l.push(Ct),Ct.resize=resizeGeo,Ct.resize(p[0],a),each$f(p,function(ar){ar.coordinateSystem=Ct,setGeoCoords(Ct,ar)})}),l},t.prototype.getFilledRegions=function(n,a,l,u){for(var c=(n||[]).slice(),p=createHashMap(),d=0;d<c.length;d++)p.set(c[d].name,c[d]);var Q=geoSourceManager.load(a,l,u);return each$f(Q.regions,function(Ct){var ar=Ct.name,en=p.get(ar),tn=Ct.properties&&Ct.properties.echartsStyle;en||(en={name:ar},c.push(en)),tn&&merge(en,tn)}),c},t}(),geoCreator=new GeoCreator,GeoModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l,u){var c=geoSourceManager.getGeoResource(a.map);if(c&&c.type==="geoJSON"){var p=a.itemStyle=a.itemStyle||{};"color"in p||(p.color="#eee")}this.mergeDefaultAndTheme(a,u),defaultEmphasis(a,"label",["show"])},n.prototype.optionUpdated=function(){var a=this,l=this.option;l.regions=geoCreator.getFilledRegions(l.regions,l.map,l.nameMap,l.nameProperty);var u={};this._optionModelMap=reduce(l.regions||[],function(c,p){var d=p.name;return d&&(c.set(d,new Model(p,a,a.ecModel)),p.selected&&(u[d]=!0)),c},createHashMap()),l.selectedMap||(l.selectedMap=u)},n.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(a,l){var u=this.getRegionModel(a),c=l==="normal"?u.get(["label","formatter"]):u.get(["emphasis","label","formatter"]),p={name:a};if(isFunction$1(c))return p.status=l,c(p);if(isString$1(c))return c.replace("{a}",a??"")},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.select=function(a){var l=this.option,u=l.selectedMode;if(u){u!=="multiple"&&(l.selectedMap=null);var c=l.selectedMap||(l.selectedMap={});c[a]=!0}},n.prototype.unSelect=function(a){var l=this.option.selectedMap;l&&(l[a]=!1)},n.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},n.prototype.isSelected=function(a){var l=this.option.selectedMap;return!!(l&&l[a])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n}(ComponentModel);function getCenterCoord(t,n){return t.pointToProjected?t.pointToProjected(n):t.pointToData(n)}function updateCenterAndZoom(t,n,a,l){var u=t.getZoom(),c=t.getCenter(),p=n.zoom,d=t.projectedToPoint?t.projectedToPoint(c):t.dataToPoint(c);if(n.dx!=null&&n.dy!=null&&(d[0]-=n.dx,d[1]-=n.dy,t.setCenter(getCenterCoord(t,d),l)),p!=null){if(a){var Q=a.min||0,Ct=a.max||1/0;p=Math.max(Math.min(u*p,Ct),Q)/u}t.scaleX*=p,t.scaleY*=p;var ar=(n.originX-t.x)*(p-1),en=(n.originY-t.y)*(p-1);t.x-=ar,t.y-=en,t.updateTransform(),t.setCenter(getCenterCoord(t,d),l),t.setZoom(p*u)}return{center:t.getCenter(),zoom:t.getZoom()}}var GeoView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.focusBlurEnabled=!0,a}return n.prototype.init=function(a,l){this._api=l},n.prototype.render=function(a,l,u,c){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(u));var p=this._mapDraw;p.draw(a,l,u,this,c),p.group.on("click",this._handleRegionClick,this),p.group.silent=a.get("silent"),this.group.add(p.group),this.updateSelectStatus(a,l,u)},n.prototype._handleRegionClick=function(a){var l;findEventDispatcher(a.target,function(u){return(l=getECData(u).eventData)!=null},!0),l&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:l.name})},n.prototype.updateSelectStatus=function(a,l,u){var c=this;this._mapDraw.group.traverse(function(p){var d=getECData(p).eventData;if(d)return c._model.isSelected(d.name)?u.enterSelect(p):u.leaveSelect(p),!0})},n.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(ComponentView);function registerMap(t,n,a){geoSourceManager.registerMap(t,n,a)}function install$J(t){t.registerCoordinateSystem("geo",geoCreator),t.registerComponentModel(GeoModel),t.registerComponentView(GeoView),t.registerImpl("registerMap",registerMap),t.registerImpl("getMap",function(a){return geoSourceManager.getMapForUser(a)});function n(a,l){l.update="geo:updateSelectStatus",t.registerAction(l,function(u,c){var p={},d=[];return c.eachComponent({mainType:"geo",query:u},function(Q){Q[a](u.name);var Ct=Q.coordinateSystem;each$f(Ct.regions,function(en){p[en.name]=Q.isSelected(en.name)||!1});var ar=[];each$f(p,function(en,tn){p[tn]&&ar.push(tn)}),d.push({geoIndex:Q.componentIndex,name:ar})}),{selected:p,allSelected:d,name:u.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,l,u){var c=a.componentType||"series";l.eachComponent({mainType:c,query:a},function(p){var d=p.coordinateSystem;if(d.type==="geo"){var Q=updateCenterAndZoom(d,a,p.get("scaleLimit"),u);p.setCenter&&p.setCenter(Q.center),p.setZoom&&p.setZoom(Q.zoom),c==="series"&&each$f(p.seriesGroup,function(Ct){Ct.setCenter(Q.center),Ct.setZoom(Q.zoom)})}})})}function install$I(t){use(install$J),t.registerChartView(MapView),t.registerSeriesModel(MapSeries),t.registerLayout(mapSymbolLayout),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",t.registerAction)}function init(t){var n=t;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a=[n],l,u;l=a.pop();)if(u=l.children,l.isExpand&&u.length)for(var c=u.length,p=c-1;p>=0;p--){var d=u[p];d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:p,thread:null},a.push(d)}}function firstWalk(t,n){var a=t.isExpand?t.children:[],l=t.parentNode.children,u=t.hierNode.i?l[t.hierNode.i-1]:null;if(a.length){executeShifts(t);var c=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;u?(t.hierNode.prelim=u.hierNode.prelim+n(t,u),t.hierNode.modifier=t.hierNode.prelim-c):t.hierNode.prelim=c}else u&&(t.hierNode.prelim=u.hierNode.prelim+n(t,u));t.parentNode.hierNode.defaultAncestor=apportion(t,u,t.parentNode.hierNode.defaultAncestor||l[0],n)}function secondWalk(t){var n=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:n},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function separation(t){return arguments.length?t:defaultSeparation}function radialCoordinate(t,n){return t-=Math.PI/2,{x:n*Math.cos(t),y:n*Math.sin(t)}}function getViewRect$4(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function executeShifts(t){for(var n=t.children,a=n.length,l=0,u=0;--a>=0;){var c=n[a];c.hierNode.prelim+=l,c.hierNode.modifier+=l,u+=c.hierNode.change,l+=c.hierNode.shift+u}}function apportion(t,n,a,l){if(n){for(var u=t,c=t,p=c.parentNode.children[0],d=n,Q=u.hierNode.modifier,Ct=c.hierNode.modifier,ar=p.hierNode.modifier,en=d.hierNode.modifier;d=nextRight(d),c=nextLeft(c),d&&c;){u=nextRight(u),p=nextLeft(p),u.hierNode.ancestor=t;var tn=d.hierNode.prelim+en-c.hierNode.prelim-Ct+l(d,c);tn>0&&(moveSubtree(nextAncestor(d,t,a),t,tn),Ct+=tn,Q+=tn),en+=d.hierNode.modifier,Ct+=c.hierNode.modifier,Q+=u.hierNode.modifier,ar+=p.hierNode.modifier}d&&!nextRight(u)&&(u.hierNode.thread=d,u.hierNode.modifier+=en-Q),c&&!nextLeft(p)&&(p.hierNode.thread=c,p.hierNode.modifier+=Ct-ar,a=t)}return a}function nextRight(t){var n=t.children;return n.length&&t.isExpand?n[n.length-1]:t.hierNode.thread}function nextLeft(t){var n=t.children;return n.length&&t.isExpand?n[0]:t.hierNode.thread}function nextAncestor(t,n,a){return t.hierNode.ancestor.parentNode===n.parentNode?t.hierNode.ancestor:a}function moveSubtree(t,n,a){var l=a/(n.hierNode.i-t.hierNode.i);n.hierNode.change-=l,n.hierNode.shift+=a,n.hierNode.modifier+=a,n.hierNode.prelim+=a,t.hierNode.change+=l}function defaultSeparation(t,n){return t.parentNode===n.parentNode?1:2}var TreeEdgeShape=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),TreePath=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TreeEdgeShape},n.prototype.buildPath=function(a,l){var u=l.childPoints,c=u.length,p=l.parentPoint,d=u[0],Q=u[c-1];if(c===1){a.moveTo(p[0],p[1]),a.lineTo(d[0],d[1]);return}var Ct=l.orient,ar=Ct==="TB"||Ct==="BT"?0:1,en=1-ar,tn=parsePercent(l.forkPosition,1),on=[];on[ar]=p[ar],on[en]=p[en]+(Q[en]-p[en])*tn,a.moveTo(p[0],p[1]),a.lineTo(on[0],on[1]),a.moveTo(d[0],d[1]),on[ar]=d[ar],a.lineTo(on[0],on[1]),on[ar]=Q[ar],a.lineTo(on[0],on[1]),a.lineTo(Q[0],Q[1]);for(var cn=1;cn<c-1;cn++){var gn=u[cn];a.moveTo(gn[0],gn[1]),on[ar]=gn[ar],a.lineTo(on[0],on[1])}},n}(Path),TreeView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._mainGroup=new Group$3,a}return n.prototype.init=function(a,l){this._controller=new RoamController(l.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(a,l,u){var c=a.getData(),p=a.layoutInfo,d=this._mainGroup,Q=a.get("layout");Q==="radial"?(d.x=p.x+p.width/2,d.y=p.y+p.height/2):(d.x=p.x,d.y=p.y),this._updateViewCoordSys(a,u),this._updateController(a,l,u);var Ct=this._data;c.diff(Ct).add(function(ar){symbolNeedsDraw(c,ar)&&updateNode(c,ar,null,d,a)}).update(function(ar,en){var tn=Ct.getItemGraphicEl(en);if(!symbolNeedsDraw(c,ar)){tn&&removeNode(Ct,en,tn,d,a);return}updateNode(c,ar,tn,d,a)}).remove(function(ar){var en=Ct.getItemGraphicEl(ar);en&&removeNode(Ct,ar,en,d,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),a.get("expandAndCollapse")===!0&&c.eachItemGraphicEl(function(ar,en){ar.off("click").on("click",function(){u.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:en})})}),this._data=c},n.prototype._updateViewCoordSys=function(a,l){var u=a.getData(),c=[];u.each(function(en){var tn=u.getItemLayout(en);tn&&!isNaN(tn.x)&&!isNaN(tn.y)&&c.push([+tn.x,+tn.y])});var p=[],d=[];fromPoints(c,p,d);var Q=this._min,Ct=this._max;d[0]-p[0]===0&&(p[0]=Q?Q[0]:p[0]-1,d[0]=Ct?Ct[0]:d[0]+1),d[1]-p[1]===0&&(p[1]=Q?Q[1]:p[1]-1,d[1]=Ct?Ct[1]:d[1]+1);var ar=a.coordinateSystem=new View;ar.zoomLimit=a.get("scaleLimit"),ar.setBoundingRect(p[0],p[1],d[0]-p[0],d[1]-p[1]),ar.setCenter(a.get("center"),l),ar.setZoom(a.get("zoom")),this.group.attr({x:ar.x,y:ar.y,scaleX:ar.scaleX,scaleY:ar.scaleY}),this._min=p,this._max=d},n.prototype._updateController=function(a,l,u){var c=this,p=this._controller,d=this._controllerHost,Q=this.group;p.setPointerChecker(function(Ct,ar,en){var tn=Q.getBoundingRect();return tn.applyTransform(Q.transform),tn.contain(ar,en)&&!onIrrelevantElement(Ct,u,a)}),p.enable(a.get("roam")),d.zoomLimit=a.get("scaleLimit"),d.zoom=a.coordinateSystem.getZoom(),p.off("pan").off("zoom").on("pan",function(Ct){updateViewOnPan(d,Ct.dx,Ct.dy),u.dispatchAction({seriesId:a.id,type:"treeRoam",dx:Ct.dx,dy:Ct.dy})}).on("zoom",function(Ct){updateViewOnZoom(d,Ct.scale,Ct.originX,Ct.originY),u.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:Ct.scale,originX:Ct.originX,originY:Ct.originY}),c._updateNodeAndLinkScale(a),u.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(a){var l=a.getData(),u=this._getNodeGlobalScale(a);l.eachItemGraphicEl(function(c,p){c.setSymbolScale(u)})},n.prototype._getNodeGlobalScale=function(a){var l=a.coordinateSystem;if(l.type!=="view")return 1;var u=this._nodeScaleRatio,c=l.scaleX||1,p=l.getZoom(),d=(p-1)*u+1;return d/c},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n}(ChartView);function symbolNeedsDraw(t,n){var a=t.getItemLayout(n);return a&&!isNaN(a.x)&&!isNaN(a.y)}function updateNode(t,n,a,l,u){var c=!a,p=t.tree.getNodeByDataIndex(n),d=p.getModel(),Q=p.getVisual("style").fill,Ct=p.isExpand===!1&&p.children.length!==0?Q:"#fff",ar=t.tree.root,en=p.parentNode===ar?p:p.parentNode||p,tn=t.getItemGraphicEl(en.dataIndex),on=en.getLayout(),cn=tn?{x:tn.__oldX,y:tn.__oldY,rawX:tn.__radialOldRawX,rawY:tn.__radialOldRawY}:on,gn=p.getLayout();c?(a=new Symbol$1(t,n,null,{symbolInnerColor:Ct,useNameLabel:!0}),a.x=cn.x,a.y=cn.y):a.updateData(t,n,null,{symbolInnerColor:Ct,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=gn.rawX,a.__radialRawY=gn.rawY,l.add(a),t.setItemGraphicEl(n,a),a.__oldX=a.x,a.__oldY=a.y,updateProps$1(a,{x:gn.x,y:gn.y},u);var Cn=a.getSymbolPath();if(u.get("layout")==="radial"){var ex=ar.children[0],ix=ex.getLayout(),ax=ex.children.length,ox=void 0,lx=void 0;if(gn.x===ix.x&&p.isExpand===!0&&ex.children.length){var cx={x:(ex.children[0].getLayout().x+ex.children[ax-1].getLayout().x)/2,y:(ex.children[0].getLayout().y+ex.children[ax-1].getLayout().y)/2};ox=Math.atan2(cx.y-ix.y,cx.x-ix.x),ox<0&&(ox=Math.PI*2+ox),lx=cx.x<ix.x,lx&&(ox=ox-Math.PI)}else ox=Math.atan2(gn.y-ix.y,gn.x-ix.x),ox<0&&(ox=Math.PI*2+ox),p.children.length===0||p.children.length!==0&&p.isExpand===!1?(lx=gn.x<ix.x,lx&&(ox=ox-Math.PI)):(lx=gn.x>ix.x,lx||(ox=ox-Math.PI));var dx=lx?"left":"right",hx=d.getModel("label"),fx=hx.get("rotate"),ux=fx*(Math.PI/180),gx=Cn.getTextContent();gx&&(Cn.setTextConfig({position:hx.get("position")||dx,rotation:fx==null?-ox:ux,origin:"center"}),gx.setStyle("verticalAlign","middle"))}var yx=d.get(["emphasis","focus"]),_x=yx==="relative"?concatArray(p.getAncestorsIndices(),p.getDescendantIndices()):yx==="ancestor"?p.getAncestorsIndices():yx==="descendant"?p.getDescendantIndices():null;_x&&(getECData(a).focus=_x),drawEdge(u,p,ar,a,cn,on,gn,l),a.__edge&&(a.onHoverStateChange=function(vx){if(vx!=="blur"){var bx=p.parentNode&&t.getItemGraphicEl(p.parentNode.dataIndex);bx&&bx.hoverState===HOVER_STATE_BLUR||setStatesFlag(a.__edge,vx)}})}function drawEdge(t,n,a,l,u,c,p,d){var Q=n.getModel(),Ct=t.get("edgeShape"),ar=t.get("layout"),en=t.getOrient(),tn=t.get(["lineStyle","curveness"]),on=t.get("edgeForkPosition"),cn=Q.getModel("lineStyle").getLineStyle(),gn=l.__edge;if(Ct==="curve")n.parentNode&&n.parentNode!==a&&(gn||(gn=l.__edge=new BezierCurve({shape:getEdgeShape(ar,en,tn,u,u)})),updateProps$1(gn,{shape:getEdgeShape(ar,en,tn,c,p)},t));else if(Ct==="polyline"&&ar==="orthogonal"&&n!==a&&n.children&&n.children.length!==0&&n.isExpand===!0){for(var Cn=n.children,ex=[],ix=0;ix<Cn.length;ix++){var ax=Cn[ix].getLayout();ex.push([ax.x,ax.y])}gn||(gn=l.__edge=new TreePath({shape:{parentPoint:[p.x,p.y],childPoints:[[p.x,p.y]],orient:en,forkPosition:on}})),updateProps$1(gn,{shape:{parentPoint:[p.x,p.y],childPoints:ex}},t)}gn&&!(Ct==="polyline"&&!n.isExpand)&&(gn.useStyle(defaults({strokeNoScale:!0,fill:null},cn)),setStatesStylesFromModel(gn,Q,"lineStyle"),setDefaultStateProxy(gn),d.add(gn))}function removeNodeEdge(t,n,a,l,u){var c=n.tree.root,p=getSourceNode(c,t),d=p.source,Q=p.sourceLayout,Ct=n.getItemGraphicEl(t.dataIndex);if(Ct){var ar=n.getItemGraphicEl(d.dataIndex),en=ar.__edge,tn=Ct.__edge||(d.isExpand===!1||d.children.length===1?en:void 0),on=l.get("edgeShape"),cn=l.get("layout"),gn=l.get("orient"),Cn=l.get(["lineStyle","curveness"]);tn&&(on==="curve"?removeElement(tn,{shape:getEdgeShape(cn,gn,Cn,Q,Q),style:{opacity:0}},l,{cb:function(){a.remove(tn)},removeOpt:u}):on==="polyline"&&l.get("layout")==="orthogonal"&&removeElement(tn,{shape:{parentPoint:[Q.x,Q.y],childPoints:[[Q.x,Q.y]]},style:{opacity:0}},l,{cb:function(){a.remove(tn)},removeOpt:u}))}}function getSourceNode(t,n){for(var a=n.parentNode===t?n:n.parentNode||n,l;l=a.getLayout(),l==null;)a=a.parentNode===t?a:a.parentNode||a;return{source:a,sourceLayout:l}}function removeNode(t,n,a,l,u){var c=t.tree.getNodeByDataIndex(n),p=t.tree.root,d=getSourceNode(p,c).sourceLayout,Q={duration:u.get("animationDurationUpdate"),easing:u.get("animationEasingUpdate")};removeElement(a,{x:d.x+1,y:d.y+1},u,{cb:function(){l.remove(a),t.setItemGraphicEl(n,null)},removeOpt:Q}),a.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:Q}),c.children.forEach(function(Ct){removeNodeEdge(Ct,t,l,u,Q)}),removeNodeEdge(c,t,l,u,Q)}function getEdgeShape(t,n,a,l,u){var c,p,d,Q,Ct,ar,en,tn;if(t==="radial"){Ct=l.rawX,en=l.rawY,ar=u.rawX,tn=u.rawY;var on=radialCoordinate(Ct,en),cn=radialCoordinate(Ct,en+(tn-en)*a),gn=radialCoordinate(ar,tn+(en-tn)*a),Cn=radialCoordinate(ar,tn);return{x1:on.x||0,y1:on.y||0,x2:Cn.x||0,y2:Cn.y||0,cpx1:cn.x||0,cpy1:cn.y||0,cpx2:gn.x||0,cpy2:gn.y||0}}else Ct=l.x,en=l.y,ar=u.x,tn=u.y,(n==="LR"||n==="RL")&&(c=Ct+(ar-Ct)*a,p=en,d=ar+(Ct-ar)*a,Q=tn),(n==="TB"||n==="BT")&&(c=Ct,p=en+(tn-en)*a,d=ar,Q=tn+(en-tn)*a);return{x1:Ct,y1:en,x2:ar,y2:tn,cpx1:c,cpy1:p,cpx2:d,cpy2:Q}}var inner$e=makeInner();function linkSeriesData(t){var n=t.mainData,a=t.datas;a||(a={main:n},t.datasAttr={main:"data"}),t.datas=t.mainData=null,linkAll(n,a,t),each$f(a,function(l){each$f(n.TRANSFERABLE_METHODS,function(u){l.wrapMethod(u,curry$1(transferInjection,t))})}),n.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,t)),each$f(n.CHANGABLE_METHODS,function(l){n.wrapMethod(l,curry$1(changeInjection,t))}),assert(a[n.dataType]===n)}function transferInjection(t,n){if(isMainData(this)){var a=extend({},inner$e(this).datas);a[this.dataType]=n,linkAll(n,a,t)}else linkSingle(n,this.dataType,inner$e(this).mainData,t);return n}function changeInjection(t,n){return t.struct&&t.struct.update(),n}function cloneShallowInjection(t,n){return each$f(inner$e(n).datas,function(a,l){a!==n&&linkSingle(a.cloneShallow(),l,n,t)}),n}function getLinkedData(t){var n=inner$e(this).mainData;return t==null||n==null?n:inner$e(n).datas[t]}function getLinkedDataAll(){var t=inner$e(this).mainData;return t==null?[{data:t}]:map$1(keys(inner$e(t).datas),function(n){return{type:n,data:inner$e(t).datas[n]}})}function isMainData(t){return inner$e(t).mainData===t}function linkAll(t,n,a){inner$e(t).datas={},each$f(n,function(l,u){linkSingle(l,u,t,a)})}function linkSingle(t,n,a,l){inner$e(a).datas[n]=t,inner$e(t).mainData=a,t.dataType=n,l.struct&&(t[l.structAttr]=l.struct,l.struct[l.datasAttr[n]]=t),t.getLinkedData=getLinkedData,t.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function t(n,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=a}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(n,a,l){isFunction$1(n)&&(l=a,a=n,n=null),n=n||{},isString$1(n)&&(n={order:n});var u=n.order||"preorder",c=this[n.attr||"children"],p;u==="preorder"&&(p=a.call(l,this));for(var d=0;!p&&d<c.length;d++)c[d].eachNode(n,a,l);u==="postorder"&&a.call(l,this)},t.prototype.updateDepthAndHeight=function(n){var a=0;this.depth=n;for(var l=0;l<this.children.length;l++){var u=this.children[l];u.updateDepthAndHeight(n+1),u.height>a&&(a=u.height)}this.height=a+1},t.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var a=0,l=this.children,u=l.length;a<u;a++){var c=l[a].getNodeById(n);if(c)return c}},t.prototype.contains=function(n){if(n===this)return!0;for(var a=0,l=this.children,u=l.length;a<u;a++){var c=l[a].contains(n);if(c)return c}},t.prototype.getAncestors=function(n){for(var a=[],l=n?this:this.parentNode;l;)a.push(l),l=l.parentNode;return a.reverse(),a},t.prototype.getAncestorsIndices=function(){for(var n=[],a=this;a;)n.push(a.dataIndex),a=a.parentNode;return n.reverse(),n},t.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(a){n.push(a.dataIndex)}),n},t.prototype.getValue=function(n){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},t.prototype.setLayout=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,a)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostTree,l=a.data.getItemModel(this.dataIndex);return l.getModel(n)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,a)},t.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,a=0;a<n.length;++a)if(n[a]===this)return a;return-1}return-1},t.prototype.isAncestorOf=function(n){for(var a=n.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},t.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},t}(),Tree=function(){function t(n){this.type="tree",this._nodes=[],this.hostModel=n}return t.prototype.eachNode=function(n,a,l){this.root.eachNode(n,a,l)},t.prototype.getNodeByDataIndex=function(n){var a=this.data.getRawIndex(n);return this._nodes[a]},t.prototype.getNodeById=function(n){return this.root.getNodeById(n)},t.prototype.update=function(){for(var n=this.data,a=this._nodes,l=0,u=a.length;l<u;l++)a[l].dataIndex=-1;for(var l=0,u=n.count();l<u;l++)a[n.getRawIndex(l)].dataIndex=l},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(n,a,l){var u=new t(a),c=[],p=1;d(n);function d(ar,en){var tn=ar.value;p=Math.max(p,isArray$1(tn)?tn.length:1),c.push(ar);var on=new TreeNode(convertOptionIdName(ar.name,""),u);en?addChild(on,en):u.root=on,u._nodes.push(on);var cn=ar.children;if(cn)for(var gn=0;gn<cn.length;gn++)d(cn[gn],on)}u.root.updateDepthAndHeight(0);var Q=prepareSeriesDataSchema(c,{coordDimensions:["value"],dimensionsCount:p}).dimensions,Ct=new SeriesData(Q,a);return Ct.initData(c),l&&l(Ct),linkSeriesData({mainData:Ct,struct:u,structAttr:"tree"}),u.update(),u},t}();function addChild(t,n){var a=n.children;t.parentNode!==n&&(a.push(t),t.parentNode=n)}function retrieveTargetInfo(t,n,a){if(t&&indexOf(n,t.type)>=0){var l=a.getData().tree.root,u=t.targetNode;if(isString$1(u)&&(u=l.getNodeById(u)),u&&l.contains(u))return{node:u};var c=t.targetNodeId;if(c!=null&&(u=l.getNodeById(c)))return{node:u}}}function getPathToRoot(t){for(var n=[];t;)t=t.parentNode,t&&n.push(t);return n.reverse()}function aboveViewRoot(t,n){var a=getPathToRoot(t);return indexOf(a,n)>=0}function wrapTreePathInfo(t,n){for(var a=[];t;){var l=t.dataIndex;a.push({name:t.name,dataIndex:l,value:n.getRawValue(l)}),t=t.parentNode}return a.reverse(),a}var TreeSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a){var l={name:a.name,children:a.data},u=a.leaves||{},c=new Model(u,this,this.ecModel),p=Tree.createTree(l,this,d);function d(en){en.wrapMethod("getItemModel",function(tn,on){var cn=p.getNodeByDataIndex(on);return cn&&cn.children.length&&cn.isExpand||(tn.parentModel=c),tn})}var Q=0;p.eachNode("preorder",function(en){en.depth>Q&&(Q=en.depth)});var Ct=a.expandAndCollapse,ar=Ct&&a.initialTreeDepth>=0?a.initialTreeDepth:Q;return p.root.eachNode("preorder",function(en){var tn=en.hostTree.data.getRawDataItem(en.dataIndex);en.isExpand=tn&&tn.collapsed!=null?!tn.collapsed:en.depth<=ar}),p.data},n.prototype.getOrient=function(){var a=this.get("orient");return a==="horizontal"?a="LR":a==="vertical"&&(a="TB"),a},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.formatTooltip=function(a,l,u){for(var c=this.getData().tree,p=c.root.children[0],d=c.getNodeByDataIndex(a),Q=d.getValue(),Ct=d.name;d&&d!==p;)Ct=d.parentNode.name+"."+Ct,d=d.parentNode;return createTooltipMarkup("nameValue",{name:Ct,value:Q,noValue:isNaN(Q)||Q==null})},n.prototype.getDataParams=function(a){var l=t.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=wrapTreePathInfo(u,this),l.collapsed=!u.isExpand,l},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n}(SeriesModel);function eachAfter(t,n,a){for(var l=[t],u=[],c;c=l.pop();)if(u.push(c),c.isExpand){var p=c.children;if(p.length)for(var d=0;d<p.length;d++)l.push(p[d])}for(;c=u.pop();)n(c,a)}function eachBefore(t,n){for(var a=[t],l;l=a.pop();)if(n(l),l.isExpand){var u=l.children;if(u.length)for(var c=u.length-1;c>=0;c--)a.push(u[c])}}function treeLayout(t,n){t.eachSeriesByType("tree",function(a){commonLayout(a,n)})}function commonLayout(t,n){var a=getViewRect$4(t,n);t.layoutInfo=a;var l=t.get("layout"),u=0,c=0,p=null;l==="radial"?(u=2*Math.PI,c=Math.min(a.height,a.width)/2,p=separation(function(ax,ox){return(ax.parentNode===ox.parentNode?1:2)/ax.depth})):(u=a.width,c=a.height,p=separation());var d=t.getData().tree.root,Q=d.children[0];if(Q){init(d),eachAfter(Q,firstWalk,p),d.hierNode.modifier=-Q.hierNode.prelim,eachBefore(Q,secondWalk);var Ct=Q,ar=Q,en=Q;eachBefore(Q,function(ax){var ox=ax.getLayout().x;ox<Ct.getLayout().x&&(Ct=ax),ox>ar.getLayout().x&&(ar=ax),ax.depth>en.depth&&(en=ax)});var tn=Ct===ar?1:p(Ct,ar)/2,on=tn-Ct.getLayout().x,cn=0,gn=0,Cn=0,ex=0;if(l==="radial")cn=u/(ar.getLayout().x+tn+on),gn=c/(en.depth-1||1),eachBefore(Q,function(ax){Cn=(ax.getLayout().x+on)*cn,ex=(ax.depth-1)*gn;var ox=radialCoordinate(Cn,ex);ax.setLayout({x:ox.x,y:ox.y,rawX:Cn,rawY:ex},!0)});else{var ix=t.getOrient();ix==="RL"||ix==="LR"?(gn=c/(ar.getLayout().x+tn+on),cn=u/(en.depth-1||1),eachBefore(Q,function(ax){ex=(ax.getLayout().x+on)*gn,Cn=ix==="LR"?(ax.depth-1)*cn:u-(ax.depth-1)*cn,ax.setLayout({x:Cn,y:ex},!0)})):(ix==="TB"||ix==="BT")&&(cn=u/(ar.getLayout().x+tn+on),gn=c/(en.depth-1||1),eachBefore(Q,function(ax){Cn=(ax.getLayout().x+on)*cn,ex=ix==="TB"?(ax.depth-1)*gn:c-(ax.depth-1)*gn,ax.setLayout({x:Cn,y:ex},!0)}))}}}function treeVisual(t){t.eachSeriesByType("tree",function(n){var a=n.getData(),l=a.tree;l.eachNode(function(u){var c=u.getModel(),p=c.getModel("itemStyle").getItemStyle(),d=a.ensureUniqueItemVisual(u.dataIndex,"style");extend(d,p)})})}function installTreeAction(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"tree",query:n},function(l){var u=n.dataIndex,c=l.getData().tree,p=c.getNodeByDataIndex(u);p.isExpand=!p.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,a,l){a.eachComponent({mainType:"series",subType:"tree",query:n},function(u){var c=u.coordinateSystem,p=updateCenterAndZoom(c,n,void 0,l);u.setCenter&&u.setCenter(p.center),u.setZoom&&u.setZoom(p.zoom)})})}function install$H(t){t.registerChartView(TreeView),t.registerSeriesModel(TreeSeriesModel),t.registerLayout(treeLayout),t.registerVisual(treeVisual),installTreeAction(t)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(t){for(var n=0;n<actionTypes.length;n++)t.registerAction({type:actionTypes[n],update:"updateView"},noop);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,l){l.eachComponent({mainType:"series",subType:"treemap",query:a},u);function u(c,p){var d=["treemapZoomToNode","treemapRootToNode"],Q=retrieveTargetInfo(a,d,c);if(Q){var Ct=c.getViewRoot();Ct&&(a.direction=aboveViewRoot(Ct,Q.node)?"rollUp":"drillDown"),c.resetViewRoot(Q.node)}}})}function enableAriaDecalForTree(t){var n=t.getData(),a=n.tree,l={};a.eachNode(function(u){for(var c=u;c&&c.depth>1;)c=c.parentNode;var p=getDecalFromPalette(t.ecModel,c.name||c.dataIndex+"",l);u.setVisual("decal",p)})}var TreemapSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventUsingHoverLayer=!0,a}return n.prototype.getInitialData=function(a,l){var u={name:a.name,children:a.data};completeTreeValue$1(u);var c=a.levels||[],p=this.designatedVisualItemStyle={},d=new Model({itemStyle:p},this,l);c=a.levels=setDefault(c,l);var Q=map$1(c||[],function(en){return new Model(en,d,l)},this),Ct=Tree.createTree(u,this,ar);function ar(en){en.wrapMethod("getItemModel",function(tn,on){var cn=Ct.getNodeByDataIndex(on),gn=cn?Q[cn.depth]:null;return tn.parentModel=gn||d,tn})}return Ct.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(a,l,u){var c=this.getData(),p=this.getRawValue(a),d=c.getName(a);return createTooltipMarkup("nameValue",{name:d,value:p})},n.prototype.getDataParams=function(a){var l=t.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=wrapTreePathInfo(u,this),l.treePathInfo=l.treeAncestors,l},n.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,a)},n.prototype.mapIdToIndex=function(a){var l=this._idIndexMap;l||(l=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var u=l.get(a);return u==null&&l.set(a,u=this._idIndexMapCount++),u},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n}(SeriesModel);function completeTreeValue$1(t){var n=0;each$f(t.children,function(l){completeTreeValue$1(l);var u=l.value;isArray$1(u)&&(u=u[0]),n+=u});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}function setDefault(t,n){var a=normalizeToArray(n.get("color")),l=normalizeToArray(n.get(["aria","decal","decals"]));if(a){t=t||[];var u,c;each$f(t,function(d){var Q=new Model(d),Ct=Q.get("color"),ar=Q.get("decal");(Q.get(["itemStyle","color"])||Ct&&Ct!=="none")&&(u=!0),(Q.get(["itemStyle","decal"])||ar&&ar!=="none")&&(c=!0)});var p=t[0]||(t[0]={});return u||(p.color=a.slice()),!c&&l&&(p.decal=l.slice()),t}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function t(n){this.group=new Group$3,n.add(this.group)}return t.prototype.render=function(n,a,l,u){var c=n.getModel("breadcrumb"),p=this.group;if(p.removeAll(),!(!c.get("show")||!l)){var d=c.getModel("itemStyle"),Q=c.getModel("emphasis"),Ct=d.getModel("textStyle"),ar=Q.getModel(["itemStyle","textStyle"]),en={pos:{left:c.get("left"),right:c.get("right"),top:c.get("top"),bottom:c.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:c.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(l,en,Ct),this._renderContent(n,en,d,Q,Ct,ar,u),positionElement(p,en.pos,en.box)}},t.prototype._prepare=function(n,a,l){for(var u=n;u;u=u.parentNode){var c=convertOptionIdName(u.getModel().get("name"),""),p=l.getTextRect(c),d=Math.max(p.width+TEXT_PADDING*2,a.emptyItemWidth);a.totalWidth+=d+ITEM_GAP,a.renderList.push({node:u,text:c,width:d})}},t.prototype._renderContent=function(n,a,l,u,c,p,d){for(var Q=0,Ct=a.emptyItemWidth,ar=n.get(["breadcrumb","height"]),en=getAvailableSize(a.pos,a.box),tn=a.totalWidth,on=a.renderList,cn=u.getModel("itemStyle").getItemStyle(),gn=on.length-1;gn>=0;gn--){var Cn=on[gn],ex=Cn.node,ix=Cn.width,ax=Cn.text;tn>en.width&&(tn-=ix-Ct,ix=Ct,ax=null);var ox=new Polygon({shape:{points:makeItemPoints(Q,0,ix,ar,gn===on.length-1,gn===0)},style:defaults(l.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(c,{text:ax})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(d,ex)});ox.disableLabelAnimation=!0,ox.getTextContent().ensureState("emphasis").style=createTextStyle$1(p,{text:ax}),ox.ensureState("emphasis").style=cn,toggleHoverEmphasis(ox,u.get("focus"),u.get("blurScope"),u.get("disabled")),this.group.add(ox),packEventData(ox,n,ex),Q+=ix+ITEM_GAP}},t.prototype.remove=function(){this.group.removeAll()},t}();function makeItemPoints(t,n,a,l,u,c){var p=[[u?t:t-ARRAY_LENGTH,n],[t+a,n],[t+a,n+l],[u?t:t-ARRAY_LENGTH,n+l]];return!c&&p.splice(2,0,[t+a+ARRAY_LENGTH,n+l/2]),!u&&p.push([t,n+l/2]),p}function packEventData(t,n,a){getECData(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,n)}}var AnimationWrap=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(n,a,l,u,c){return this._elExistsMap[n.id]?!1:(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:a,duration:l,delay:u,easing:c}),!0)},t.prototype.finished=function(n){return this._finishedCallback=n,this},t.prototype.start=function(){for(var n=this,a=this._storage.length,l=function(){a--,a<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},u=0,c=this._storage.length;u<c;u++){var p=this._storage[u];p.el.animateTo(p.target,{duration:p.duration,delay:p.delay,easing:p.easing,setToFinal:!0,done:l,aborted:l})}return this},t}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(t){var n=getStateItemStyle(t);return n.stroke=n.fill=n.lineWidth=null,n},inner$d=makeInner(),TreemapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._state="ready",a._storage=createStorage(),a}return n.prototype.render=function(a,l,u,c){var p=l.findComponents({mainType:"series",subType:"treemap",query:c});if(!(indexOf(p,a)<0)){this.seriesModel=a,this.api=u,this.ecModel=l;var d=["treemapZoomToNode","treemapRootToNode"],Q=retrieveTargetInfo(c,d,a),Ct=c&&c.type,ar=a.layoutInfo,en=!this._oldTree,tn=this._storage,on=Ct==="treemapRootToNode"&&Q&&tn?{rootNodeGroup:tn.nodeGroup[Q.node.getRawIndex()],direction:c.direction}:null,cn=this._giveContainerGroup(ar),gn=a.get("animation"),Cn=this._doRender(cn,a,on);gn&&!en&&(!Ct||Ct==="treemapZoomToNode"||Ct==="treemapRootToNode")?this._doAnimation(cn,Cn,a,on):Cn.renderFinally(),this._resetController(u),this._renderBreadcrumb(a,u,Q)}},n.prototype._giveContainerGroup=function(a){var l=this._containerGroup;return l||(l=this._containerGroup=new Group$2,this._initEvents(l),this.group.add(l)),l.x=a.x,l.y=a.y,l},n.prototype._doRender=function(a,l,u){var c=l.getData().tree,p=this._oldTree,d=createStorage(),Q=createStorage(),Ct=this._storage,ar=[];function en(ix,ax,ox,lx){return renderNode(l,Q,Ct,u,d,ar,ix,ax,ox,lx)}gn(c.root?[c.root]:[],p&&p.root?[p.root]:[],a,c===p||!p,0);var tn=Cn(Ct);if(this._oldTree=c,this._storage=Q,this._controllerHost){var on=this.seriesModel.layoutInfo,cn=c.root.getLayout();cn.width===on.width&&cn.height===on.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:d,willDeleteEls:tn,renderFinally:ex};function gn(ix,ax,ox,lx,cx){lx?(ax=ix,each$f(ix,function(fx,ux){!fx.isRemoved()&&hx(ux,ux)})):new DataDiffer(ax,ix,dx,dx).add(hx).update(hx).remove(curry$1(hx,null)).execute();function dx(fx){return fx.getId()}function hx(fx,ux){var gx=fx!=null?ix[fx]:null,yx=ux!=null?ax[ux]:null,_x=en(gx,yx,ox,cx);_x&&gn(gx&&gx.viewChildren||[],yx&&yx.viewChildren||[],_x,lx,cx+1)}}function Cn(ix){var ax=createStorage();return ix&&each$f(ix,function(ox,lx){var cx=ax[lx];each$f(ox,function(dx){dx&&(cx.push(dx),inner$d(dx).willDelete=!0)})}),ax}function ex(){each$f(tn,function(ix){each$f(ix,function(ax){ax.parent&&ax.parent.remove(ax)})}),each$f(ar,function(ix){ix.invisible=!0,ix.dirty()})}},n.prototype._doAnimation=function(a,l,u,c){var p=u.get("animationDurationUpdate"),d=u.get("animationEasing"),Q=(isFunction$1(p)?0:p)||0,Ct=(isFunction$1(d)?null:d)||"cubicOut",ar=createWrap();each$f(l.willDeleteEls,function(en,tn){each$f(en,function(on,cn){if(!on.invisible){var gn=on.parent,Cn,ex=inner$d(gn);if(c&&c.direction==="drillDown")Cn=gn===c.rootNodeGroup?{shape:{x:0,y:0,width:ex.nodeWidth,height:ex.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var ix=0,ax=0;ex.willDelete||(ix=ex.nodeWidth/2,ax=ex.nodeHeight/2),Cn=tn==="nodeGroup"?{x:ix,y:ax,style:{opacity:0}}:{shape:{x:ix,y:ax,width:0,height:0},style:{opacity:0}}}Cn&&ar.add(on,Cn,Q,0,Ct)}})}),each$f(this._storage,function(en,tn){each$f(en,function(on,cn){var gn=l.lastsForAnimation[tn][cn],Cn={};gn&&(on instanceof Group$3?gn.oldX!=null&&(Cn.x=on.x,Cn.y=on.y,on.x=gn.oldX,on.y=gn.oldY):(gn.oldShape&&(Cn.shape=extend({},on.shape),on.setShape(gn.oldShape)),gn.fadein?(on.setStyle("opacity",0),Cn.style={opacity:1}):on.style.opacity!==1&&(Cn.style={opacity:1})),ar.add(on,Cn,Q,0,Ct))})},this),this._state="animating",ar.finished(bind$1(function(){this._state="ready",l.renderFinally()},this)).start()},n.prototype._resetController=function(a){var l=this._controller,u=this._controllerHost;u||(this._controllerHost={target:this.group},u=this._controllerHost),l||(l=this._controller=new RoamController(a.getZr()),l.enable(this.seriesModel.get("roam")),u.zoomLimit=this.seriesModel.get("scaleLimit"),u.zoom=this.seriesModel.get("zoom"),l.on("pan",bind$1(this._onPan,this)),l.on("zoom",bind$1(this._onZoom,this)));var c=new BoundingRect(0,0,a.getWidth(),a.getHeight());l.setPointerChecker(function(p,d,Q){return c.contain(d,Q)})},n.prototype._clearController=function(){var a=this._controller;this._controllerHost=null,a&&(a.dispose(),a=null)},n.prototype._onPan=function(a){if(this._state!=="animating"&&(Math.abs(a.dx)>DRAG_THRESHOLD||Math.abs(a.dy)>DRAG_THRESHOLD)){var l=this.seriesModel.getData().tree.root;if(!l)return;var u=l.getLayout();if(!u)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x+a.dx,y:u.y+a.dy,width:u.width,height:u.height}})}},n.prototype._onZoom=function(a){var l=a.originX,u=a.originY,c=a.scale;if(this._state!=="animating"){var p=this.seriesModel.getData().tree.root;if(!p)return;var d=p.getLayout();if(!d)return;var Q=new BoundingRect(d.x,d.y,d.width,d.height),Ct=null,ar=this._controllerHost;Ct=ar.zoomLimit;var en=ar.zoom=ar.zoom||1;if(en*=c,Ct){var tn=Ct.min||0,on=Ct.max||1/0;en=Math.max(Math.min(on,en),tn)}var cn=en/ar.zoom;ar.zoom=en;var gn=this.seriesModel.layoutInfo;l-=gn.x,u-=gn.y;var Cn=create$1();translate(Cn,Cn,[-l,-u]),scale$1(Cn,Cn,[cn,cn]),translate(Cn,Cn,[l,u]),Q.applyTransform(Cn),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:Q.x,y:Q.y,width:Q.width,height:Q.height}})}},n.prototype._initEvents=function(a){var l=this;a.on("click",function(u){if(l._state==="ready"){var c=l.seriesModel.get("nodeClick",!0);if(c){var p=l.findTarget(u.offsetX,u.offsetY);if(p){var d=p.node;if(d.getLayout().isLeafRoot)l._rootToNode(p);else if(c==="zoomToNode")l._zoomToNode(p);else if(c==="link"){var Q=d.hostTree.data.getItemModel(d.dataIndex),Ct=Q.get("link",!0),ar=Q.get("target",!0)||"blank";Ct&&windowOpen(Ct,ar)}}}}},this)},n.prototype._renderBreadcrumb=function(a,l,u){var c=this;u||(u=a.get("leafDepth",!0)!=null?{node:a.getViewRoot()}:this.findTarget(l.getWidth()/2,l.getHeight()/2),u||(u={node:a.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,l,u.node,function(p){c._state!=="animating"&&(aboveViewRoot(a.getViewRoot(),p)?c._rootToNode({node:p}):c._zoomToNode({node:p}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype.findTarget=function(a,l){var u,c=this.seriesModel.getViewRoot();return c.eachNode({attr:"viewChildren",order:"preorder"},function(p){var d=this._storage.background[p.getRawIndex()];if(d){var Q=d.transformCoordToLocal(a,l),Ct=d.shape;if(Ct.x<=Q[0]&&Q[0]<=Ct.x+Ct.width&&Ct.y<=Q[1]&&Q[1]<=Ct.y+Ct.height)u={node:p,offsetX:Q[0],offsetY:Q[1]};else return!1}},this),u},n.type="treemap",n}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(t,n,a,l,u,c,p,d,Q,Ct){if(!p)return;var ar=p.getLayout(),en=t.getData(),tn=p.getModel();if(en.setItemGraphicEl(p.dataIndex,null),!ar||!ar.isInView)return;var on=ar.width,cn=ar.height,gn=ar.borderWidth,Cn=ar.invisible,ex=p.getRawIndex(),ix=d&&d.getRawIndex(),ax=p.viewChildren,ox=ar.upperHeight,lx=ax&&ax.length,cx=tn.getModel("itemStyle"),dx=tn.getModel(["emphasis","itemStyle"]),hx=tn.getModel(["blur","itemStyle"]),fx=tn.getModel(["select","itemStyle"]),ux=cx.get("borderRadius")||0,gx=Ox("nodeGroup",Group$2);if(!gx)return;if(Q.add(gx),gx.x=ar.x||0,gx.y=ar.y||0,gx.markRedraw(),inner$d(gx).nodeWidth=on,inner$d(gx).nodeHeight=cn,ar.isAboveViewRoot)return gx;var yx=Ox("background",Rect$1,Ct,Z2_BG);yx&&Tx(gx,yx,lx&&ar.upperLabelHeight);var _x=tn.getModel("emphasis"),vx=_x.get("focus"),bx=_x.get("blurScope"),xx=_x.get("disabled"),Sx=vx==="ancestor"?p.getAncestorsIndices():vx==="descendant"?p.getDescendantIndices():vx;if(lx)isHighDownDispatcher(gx)&&setAsHighDownDispatcher(gx,!1),yx&&(setAsHighDownDispatcher(yx,!xx),en.setItemGraphicEl(p.dataIndex,yx),enableHoverFocus(yx,Sx,bx));else{var Ax=Ox("content",Rect$1,Ct,Z2_CONTENT);Ax&&Px(gx,Ax),yx.disableMorphing=!0,yx&&isHighDownDispatcher(yx)&&setAsHighDownDispatcher(yx,!1),setAsHighDownDispatcher(gx,!xx),en.setItemGraphicEl(p.dataIndex,gx);var Cx=tn.getShallow("cursor");Cx&&Ax.attr("cursor",Cx),enableHoverFocus(gx,Sx,bx)}return gx;function Tx(Gx,Ux,Hx){var Vx=getECData(Ux);if(Vx.dataIndex=p.dataIndex,Vx.seriesIndex=t.seriesIndex,Ux.setShape({x:0,y:0,width:on,height:cn,r:ux}),Cn)Fx(Ux);else{Ux.invisible=!1;var zx=p.getVisual("style"),rE=zx.stroke,Zx=getItemStyleNormal(cx);Zx.fill=rE;var eE=getStateItemStyle(dx);eE.fill=dx.get("borderColor");var oE=getStateItemStyle(hx);oE.fill=hx.get("borderColor");var iE=getStateItemStyle(fx);if(iE.fill=fx.get("borderColor"),Hx){var Wx=on-2*gn;Mx(Ux,rE,zx.opacity,{x:gn,y:0,width:Wx,height:ox})}else Ux.removeTextContent();Ux.setStyle(Zx),Ux.ensureState("emphasis").style=eE,Ux.ensureState("blur").style=oE,Ux.ensureState("select").style=iE,setDefaultStateProxy(Ux)}Gx.add(Ux)}function Px(Gx,Ux){var Hx=getECData(Ux);Hx.dataIndex=p.dataIndex,Hx.seriesIndex=t.seriesIndex;var Vx=Math.max(on-2*gn,0),zx=Math.max(cn-2*gn,0);if(Ux.culling=!0,Ux.setShape({x:gn,y:gn,width:Vx,height:zx,r:ux}),Cn)Fx(Ux);else{Ux.invisible=!1;var rE=p.getVisual("style"),Zx=rE.fill,eE=getItemStyleNormal(cx);eE.fill=Zx,eE.decal=rE.decal;var oE=getStateItemStyle(dx),iE=getStateItemStyle(hx),Wx=getStateItemStyle(fx);Mx(Ux,Zx,rE.opacity,null),Ux.setStyle(eE),Ux.ensureState("emphasis").style=oE,Ux.ensureState("blur").style=iE,Ux.ensureState("select").style=Wx,setDefaultStateProxy(Ux)}Gx.add(Ux)}function Fx(Gx){!Gx.invisible&&c.push(Gx)}function Mx(Gx,Ux,Hx,Vx){var zx=tn.getModel(Vx?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),rE=convertOptionIdName(tn.get("name"),null),Zx=zx.getShallow("show");setLabelStyle(Gx,getLabelStatesModels(tn,Vx?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Zx?rE:null,inheritColor:Ux,defaultOpacity:Hx,labelFetcher:t,labelDataIndex:p.dataIndex});var eE=Gx.getTextContent();if(eE){var oE=eE.style,iE=normalizeCssArray$1(oE.padding||0);Vx&&(Gx.setTextConfig({layoutRect:Vx}),eE.disableLabelLayout=!0),eE.beforeUpdate=function(){var AE=Math.max((Vx?Vx.width:Gx.shape.width)-iE[1]-iE[3],0),ME=Math.max((Vx?Vx.height:Gx.shape.height)-iE[0]-iE[2],0);(oE.width!==AE||oE.height!==ME)&&eE.setStyle({width:AE,height:ME})},oE.truncateMinChar=2,oE.lineOverflow="truncate",Dx(oE,Vx,ar);var Wx=eE.getState("emphasis");Dx(Wx?Wx.style:null,Vx,ar)}}function Dx(Gx,Ux,Hx){var Vx=Gx?Gx.text:null;if(!Ux&&Hx.isLeafRoot&&Vx!=null){var zx=t.get("drillDownIcon",!0);Gx.text=zx?zx+" "+Vx:Vx}}function Ox(Gx,Ux,Hx,Vx){var zx=ix!=null&&a[Gx][ix],rE=u[Gx];return zx?(a[Gx][ix]=null,Lx(rE,zx)):Cn||(zx=new Ux,zx instanceof Displayable&&(zx.z2=calculateZ2(Hx,Vx)),Nx(rE,zx)),n[Gx][ex]=zx}function Lx(Gx,Ux){var Hx=Gx[ex]={};Ux instanceof Group$2?(Hx.oldX=Ux.x,Hx.oldY=Ux.y):Hx.oldShape=extend({},Ux.shape)}function Nx(Gx,Ux){var Hx=Gx[ex]={},Vx=p.parentNode,zx=Ux instanceof Group$3;if(Vx&&(!l||l.direction==="drillDown")){var rE=0,Zx=0,eE=u.background[Vx.getRawIndex()];!l&&eE&&eE.oldShape&&(rE=eE.oldShape.width,Zx=eE.oldShape.height),zx?(Hx.oldX=0,Hx.oldY=Zx):Hx.oldShape={x:rE,y:Zx,width:0,height:0}}Hx.fadein=!zx}}function calculateZ2(t,n){return t*Z2_BASE+n}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function t(n){var a=n.mappingMethod,l=n.type,u=this.option=clone$4(n);this.type=l,this.mappingMethod=a,this._normalizeData=normalizers[a];var c=t.visualHandlers[l];this.applyVisual=c.applyVisual,this.getColorMapper=c.getColorMapper,this._normalizedToVisual=c._normalizedToVisual[a],a==="piecewise"?(normalizeVisualRange(u),preprocessForPiecewise(u)):a==="category"?u.categories?preprocessForSpecifiedCategory(u):normalizeVisualRange(u,!0):(assert(a!=="linear"||u.dataExtent),normalizeVisualRange(u))}return t.prototype.mapValueToVisual=function(n){var a=this._normalizeData(n);return this._normalizedToVisual(a,n)},t.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},t.listVisualTypes=function(){return keys(t.visualHandlers)},t.isValidType=function(n){return t.visualHandlers.hasOwnProperty(n)},t.eachVisual=function(n,a,l){isObject$3(n)?each$f(n,a,l):a.call(l,n)},t.mapVisual=function(n,a,l){var u,c=isArray$1(n)?[]:isObject$3(n)?{}:(u=!0,null);return t.eachVisual(n,function(p,d){var Q=a.call(l,p,d);u?c=Q:c[d]=Q}),c},t.retrieveVisuals=function(n){var a={},l;return n&&each$c(t.visualHandlers,function(u,c){n.hasOwnProperty(c)&&(a[c]=n[c],l=!0)}),l?a:null},t.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var a=[];each$c(n,function(l,u){a.push(u)}),n=a}else return[];return n.sort(function(l,u){return u==="color"&&l!=="color"&&l.indexOf("color")===0?1:-1}),n},t.dependsOn=function(n,a){return a==="color"?!!(n&&n.indexOf(a)===0):n===a},t.findPieceIndex=function(n,a,l){for(var u,c=1/0,p=0,d=a.length;p<d;p++){var Q=a[p].value;if(Q!=null){if(Q===n||isString$1(Q)&&Q===n+"")return p;l&&tn(Q,p)}}for(var p=0,d=a.length;p<d;p++){var Ct=a[p],ar=Ct.interval,en=Ct.close;if(ar){if(ar[0]===-1/0){if(littleThan(en[1],n,ar[1]))return p}else if(ar[1]===1/0){if(littleThan(en[0],ar[0],n))return p}else if(littleThan(en[0],ar[0],n)&&littleThan(en[1],n,ar[1]))return p;l&&tn(ar[0],p),l&&tn(ar[1],p)}}if(l)return n===1/0?a.length-1:n===-1/0?0:u;function tn(on,cn){var gn=Math.abs(on-n);gn<c&&(c=gn,u=cn)}},t.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(a,l){return!l&&(a=this._normalizeData(a)),doMapCategory.call(this,a)}:function(a,l,u){var c=!!u;return!l&&(a=this._normalizeData(a)),u=fastLerp(a,n.parsedVisual,u),c?u:stringify(u,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,a){var l=getSpecifiedVisual.call(this,a);return l==null&&(l=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),l},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,a)}),colorSaturation:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,a)}),colorLightness:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,null,a)}),colorAlpha:makePartialColorVisualHandler(function(n,a){return modifyAlpha(n,a)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,a,l){var u=this.mapValueToVisual(n);l("symbol",u)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,a){var l=getSpecifiedVisual.call(this,a);return l==null&&(l=doMapToArray.call(this,n)),l},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},t}();function preprocessForPiecewise(t){var n=t.pieceList;t.hasSpecialVisual=!1,each$f(n,function(a,l){a.originIndex=l,a.visual!=null&&(t.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(t){var n=t.categories,a=t.categoryMap={},l=t.visual;if(each$c(n,function(p,d){a[p]=d}),!isArray$1(l)){var u=[];isObject$3(l)?each$c(l,function(p,d){var Q=a[d];u[Q??CATEGORY_DEFAULT_VISUAL_INDEX]=p}):u[CATEGORY_DEFAULT_VISUAL_INDEX]=l,l=setVisualToOption(t,u)}for(var c=n.length-1;c>=0;c--)l[c]==null&&(delete a[n[c]],n.pop())}function normalizeVisualRange(t,n){var a=t.visual,l=[];isObject$3(a)?each$c(a,function(c){l.push(c)}):a!=null&&l.push(a);var u={color:1,symbol:1};!n&&l.length===1&&!u.hasOwnProperty(t.type)&&(l[1]=l[0]),setVisualToOption(t,l)}function makePartialColorVisualHandler(t){return{applyVisual:function(n,a,l){var u=this.mapValueToVisual(n);l("color",t(a("color"),u))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(t){var n=this.option.visual;return n[Math.round(linearMap$2(t,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(t){return function(n,a,l){l(t,this.mapValueToVisual(n))}}function doMapCategory(t){var n=this.option.visual;return n[this.option.loop&&t!==CATEGORY_DEFAULT_VISUAL_INDEX?t%n.length:t]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(t){return{linear:function(n){return linearMap$2(n,t,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,a){var l=getSpecifiedVisual.call(this,a);return l==null&&(l=linearMap$2(n,t,this.option.visual,!0)),l},fixed:doMapFixed}}function getSpecifiedVisual(t){var n=this.option,a=n.pieceList;if(n.hasSpecialVisual){var l=VisualMapping.findPieceIndex(t,a),u=a[l];if(u&&u.visual)return u.visual[this.type]}}function setVisualToOption(t,n){return t.visual=n,t.type==="color"&&(t.parsedVisual=map$1(n,function(a){var l=parse(a);return l||[0,0,0,1]})),n}var normalizers={linear:function(t){return linearMap$2(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var n=this.option.pieceList,a=VisualMapping.findPieceIndex(t,n,!0);if(a!=null)return linearMap$2(a,[0,n.length-1],[0,1],!0)},category:function(t){var n=this.option.categories?this.option.categoryMap[t]:t;return n??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(t,n,a){return t?n<=a:n<a}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(t){var n=t.getData().tree,a=n.root;a.isRemoved()||travelTree(a,{},t.getViewRoot().getAncestors(),t)}};function travelTree(t,n,a,l){var u=t.getModel(),c=t.getLayout(),p=t.hostTree.data;if(!(!c||c.invisible||!c.isInView)){var d=u.getModel(ITEM_STYLE_NORMAL),Q=buildVisuals(d,n,l),Ct=p.ensureUniqueItemVisual(t.dataIndex,"style"),ar=d.get("borderColor"),en=d.get("borderColorSaturation"),tn;en!=null&&(tn=calculateColor(Q),ar=calculateBorderColor(en,tn)),Ct.stroke=ar;var on=t.viewChildren;if(!on||!on.length)tn=calculateColor(Q),Ct.fill=tn;else{var cn=buildVisualMapping(t,u,c,d,Q,on);each$f(on,function(gn,Cn){if(gn.depth>=a.length||gn===a[gn.depth]){var ex=mapVisual$1(u,Q,gn,Cn,cn,l);travelTree(gn,ex,a,l)}})}}}function buildVisuals(t,n,a){var l=extend({},n),u=a.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(c){u[c]=n[c];var p=t.get(c);u[c]=null,p!=null&&(l[c]=p)}),l}function calculateColor(t){var n=getValueVisualDefine(t,"color");if(n){var a=getValueVisualDefine(t,"colorAlpha"),l=getValueVisualDefine(t,"colorSaturation");return l&&(n=modifyHSL(n,null,null,l)),a&&(n=modifyAlpha(n,a)),n}}function calculateBorderColor(t,n){return n!=null?modifyHSL(n,null,null,t):null}function getValueVisualDefine(t,n){var a=t[n];if(a!=null&&a!=="none")return a}function buildVisualMapping(t,n,a,l,u,c){if(!(!c||!c.length)){var p=getRangeVisual(n,"color")||u.color!=null&&u.color!=="none"&&(getRangeVisual(n,"colorAlpha")||getRangeVisual(n,"colorSaturation"));if(p){var d=n.get("visualMin"),Q=n.get("visualMax"),Ct=a.dataExtent.slice();d!=null&&d<Ct[0]&&(Ct[0]=d),Q!=null&&Q>Ct[1]&&(Ct[1]=Q);var ar=n.get("colorMappingBy"),en={type:p.name,dataExtent:Ct,visual:p.range};en.type==="color"&&(ar==="index"||ar==="id")?(en.mappingMethod="category",en.loop=!0):en.mappingMethod="linear";var tn=new VisualMapping(en);return inner$c(tn).drColorMappingBy=ar,tn}}}function getRangeVisual(t,n){var a=t.get(n);return isArray$1(a)&&a.length?{name:n,range:a}:null}function mapVisual$1(t,n,a,l,u,c){var p=extend({},n);if(u){var d=u.type,Q=d==="color"&&inner$c(u).drColorMappingBy,Ct=Q==="index"?l:Q==="id"?c.mapIdToIndex(a.getId()):a.getValue(t.get("visualDimension"));p[d]=u.mapValueToVisual(Ct)}return p}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(t,n,a,l){var u=a.getWidth(),c=a.getHeight(),p=t.option,d=getLayoutRect(t.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),Q=p.size||[],Ct=parsePercent(retrieveValue(d.width,Q[0]),u),ar=parsePercent(retrieveValue(d.height,Q[1]),c),en=l&&l.type,tn=["treemapZoomToNode","treemapRootToNode"],on=retrieveTargetInfo(l,tn,t),cn=en==="treemapRender"||en==="treemapMove"?l.rootRect:null,gn=t.getViewRoot(),Cn=getPathToRoot(gn);if(en!=="treemapMove"){var ex=en==="treemapZoomToNode"?estimateRootSize(t,on,gn,Ct,ar):cn?[cn.width,cn.height]:[Ct,ar],ix=p.sort;ix&&ix!=="asc"&&ix!=="desc"&&(ix="desc");var ax={squareRatio:p.squareRatio,sort:ix,leafDepth:p.leafDepth};gn.hostTree.clearLayouts();var ox={x:0,y:0,width:ex[0],height:ex[1],area:ex[0]*ex[1]};gn.setLayout(ox),squarify(gn,ax,!1,0),ox=gn.getLayout(),each$b(Cn,function(cx,dx){var hx=(Cn[dx+1]||gn).getValue();cx.setLayout(extend({dataExtent:[hx,hx],borderWidth:0,upperHeight:0},ox))})}var lx=t.getData().tree.root;lx.setLayout(calculateRootPosition(d,cn,on),!0),t.setLayoutInfo(d),prunning(lx,new BoundingRect(-d.x,-d.y,u,c),Cn,gn,0)}};function squarify(t,n,a,l){var u,c;if(!t.isRemoved()){var p=t.getLayout();u=p.width,c=p.height;var d=t.getModel(),Q=d.get(PATH_BORDER_WIDTH),Ct=d.get(PATH_GAP_WIDTH)/2,ar=getUpperLabelHeight(d),en=Math.max(Q,ar),tn=Q-Ct,on=en-Ct;t.setLayout({borderWidth:Q,upperHeight:en,upperLabelHeight:ar},!0),u=mathMax$3(u-2*tn,0),c=mathMax$3(c-tn-on,0);var cn=u*c,gn=initChildren$1(t,d,cn,n,a,l);if(gn.length){var Cn={x:tn,y:on,width:u,height:c},ex=mathMin$3(u,c),ix=1/0,ax=[];ax.area=0;for(var ox=0,lx=gn.length;ox<lx;){var cx=gn[ox];ax.push(cx),ax.area+=cx.getLayout().area;var dx=worst(ax,ex,n.squareRatio);dx<=ix?(ox++,ix=dx):(ax.area-=ax.pop().getLayout().area,position(ax,ex,Cn,Ct,!1),ex=mathMin$3(Cn.width,Cn.height),ax.length=ax.area=0,ix=1/0)}if(ax.length&&position(ax,ex,Cn,Ct,!0),!a){var hx=d.get("childrenVisibleMin");hx!=null&&cn<hx&&(a=!0)}for(var ox=0,lx=gn.length;ox<lx;ox++)squarify(gn[ox],n,a,l+1)}}}function initChildren$1(t,n,a,l,u,c){var p=t.children||[],d=l.sort;d!=="asc"&&d!=="desc"&&(d=null);var Q=l.leafDepth!=null&&l.leafDepth<=c;if(u&&!Q)return t.viewChildren=[];p=filter(p,function(on){return!on.isRemoved()}),sort$1(p,d);var Ct=statistic(n,p,d);if(Ct.sum===0)return t.viewChildren=[];if(Ct.sum=filterByThreshold(n,a,Ct.sum,d,p),Ct.sum===0)return t.viewChildren=[];for(var ar=0,en=p.length;ar<en;ar++){var tn=p[ar].getValue()/Ct.sum*a;p[ar].setLayout({area:tn})}return Q&&(p.length&&t.setLayout({isLeafRoot:!0},!0),p.length=0),t.viewChildren=p,t.setLayout({dataExtent:Ct.dataExtent},!0),p}function filterByThreshold(t,n,a,l,u){if(!l)return a;for(var c=t.get("visibleMin"),p=u.length,d=p,Q=p-1;Q>=0;Q--){var Ct=u[l==="asc"?p-Q-1:Q].getValue();Ct/a*n<c&&(d=Q,a-=Ct)}return l==="asc"?u.splice(0,p-d):u.splice(d,p-d),a}function sort$1(t,n){return n&&t.sort(function(a,l){var u=n==="asc"?a.getValue()-l.getValue():l.getValue()-a.getValue();return u===0?n==="asc"?a.dataIndex-l.dataIndex:l.dataIndex-a.dataIndex:u}),t}function statistic(t,n,a){for(var l=0,u=0,c=n.length;u<c;u++)l+=n[u].getValue();var p=t.get("visualDimension"),d;return!n||!n.length?d=[NaN,NaN]:p==="value"&&a?(d=[n[n.length-1].getValue(),n[0].getValue()],a==="asc"&&d.reverse()):(d=[1/0,-1/0],each$b(n,function(Q){var Ct=Q.getValue(p);Ct<d[0]&&(d[0]=Ct),Ct>d[1]&&(d[1]=Ct)})),{sum:l,dataExtent:d}}function worst(t,n,a){for(var l=0,u=1/0,c=0,p=void 0,d=t.length;c<d;c++)p=t[c].getLayout().area,p&&(p<u&&(u=p),p>l&&(l=p));var Q=t.area*t.area,Ct=n*n*a;return Q?mathMax$3(Ct*l/Q,Q/(Ct*u)):1/0}function position(t,n,a,l,u){var c=n===a.width?0:1,p=1-c,d=["x","y"],Q=["width","height"],Ct=a[d[c]],ar=n?t.area/n:0;(u||ar>a[Q[p]])&&(ar=a[Q[p]]);for(var en=0,tn=t.length;en<tn;en++){var on=t[en],cn={},gn=ar?on.getLayout().area/ar:0,Cn=cn[Q[p]]=mathMax$3(ar-2*l,0),ex=a[d[c]]+a[Q[c]]-Ct,ix=en===tn-1||ex<gn?ex:gn,ax=cn[Q[c]]=mathMax$3(ix-2*l,0);cn[d[p]]=a[d[p]]+mathMin$3(l,Cn/2),cn[d[c]]=Ct+mathMin$3(l,ax/2),Ct+=ix,on.setLayout(cn,!0)}a[d[p]]+=ar,a[Q[p]]-=ar}function estimateRootSize(t,n,a,l,u){var c=(n||{}).node,p=[l,u];if(!c||c===a)return p;for(var d,Q=l*u,Ct=Q*t.option.zoomToNodeRatio;d=c.parentNode;){for(var ar=0,en=d.children,tn=0,on=en.length;tn<on;tn++)ar+=en[tn].getValue();var cn=c.getValue();if(cn===0)return p;Ct*=ar/cn;var gn=d.getModel(),Cn=gn.get(PATH_BORDER_WIDTH),ex=Math.max(Cn,getUpperLabelHeight(gn));Ct+=4*Cn*Cn+(3*Cn+ex)*Math.pow(Ct,.5),Ct>MAX_SAFE_INTEGER&&(Ct=MAX_SAFE_INTEGER),c=d}Ct<Q&&(Ct=Q);var ix=Math.pow(Ct/Q,.5);return[l*ix,u*ix]}function calculateRootPosition(t,n,a){if(n)return{x:n.x,y:n.y};var l={x:0,y:0};if(!a)return l;var u=a.node,c=u.getLayout();if(!c)return l;for(var p=[c.width/2,c.height/2],d=u;d;){var Q=d.getLayout();p[0]+=Q.x,p[1]+=Q.y,d=d.parentNode}return{x:t.width/2-p[0],y:t.height/2-p[1]}}function prunning(t,n,a,l,u){var c=t.getLayout(),p=a[u],d=p&&p===t;if(!(p&&!d||u===a.length&&t!==l)){t.setLayout({isInView:!0,invisible:!d&&!n.intersect(c),isAboveViewRoot:d},!0);var Q=new BoundingRect(n.x-c.x,n.y-c.y,n.width,n.height);each$b(t.viewChildren||[],function(Ct){prunning(Ct,Q,a,l,u+1)})}}function getUpperLabelHeight(t){return t.get(PATH_UPPER_LABEL_SHOW)?t.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(t){t.registerSeriesModel(TreemapSeriesModel),t.registerChartView(TreemapView),t.registerVisual(treemapVisual),t.registerLayout(treemapLayout),installTreemapAction(t)}function categoryFilter(t){var n=t.findComponents({mainType:"legend"});!n||!n.length||t.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),u=a.getGraph(),c=u.data,p=l.mapArray(l.getName);c.filterSelf(function(d){var Q=c.getItemModel(d),Ct=Q.getShallow("category");if(Ct!=null){isNumber(Ct)&&(Ct=p[Ct]);for(var ar=0;ar<n.length;ar++)if(!n[ar].isSelected(Ct))return!1}return!0})})}function categoryVisual(t){var n={};t.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),u=a.getData(),c={};l.each(function(p){var d=l.getName(p);c["ec-"+d]=p;var Q=l.getItemModel(p),Ct=Q.getModel("itemStyle").getItemStyle();Ct.fill||(Ct.fill=a.getColorFromPalette(d,n)),l.setItemVisual(p,"style",Ct);for(var ar=["symbol","symbolSize","symbolKeepAspect"],en=0;en<ar.length;en++){var tn=Q.getShallow(ar[en],!0);tn!=null&&l.setItemVisual(p,ar[en],tn)}}),l.count()&&u.each(function(p){var d=u.getItemModel(p),Q=d.getShallow("category");if(Q!=null){isString$1(Q)&&(Q=c["ec-"+Q]);var Ct=l.getItemVisual(Q,"style"),ar=u.ensureUniqueItemVisual(p,"style");extend(ar,Ct);for(var en=["symbol","symbolSize","symbolKeepAspect"],tn=0;tn<en.length;tn++)u.setItemVisual(p,en[tn],l.getItemVisual(Q,en[tn]))}})})}function normalize$1(t){return t instanceof Array||(t=[t,t]),t}function graphEdgeVisual(t){t.eachSeriesByType("graph",function(n){var a=n.getGraph(),l=n.getEdgeData(),u=normalize$1(n.get("edgeSymbol")),c=normalize$1(n.get("edgeSymbolSize"));l.setVisual("fromSymbol",u&&u[0]),l.setVisual("toSymbol",u&&u[1]),l.setVisual("fromSymbolSize",c&&c[0]),l.setVisual("toSymbolSize",c&&c[1]),l.setVisual("style",n.getModel("lineStyle").getLineStyle()),l.each(function(p){var d=l.getItemModel(p),Q=a.getEdgeByIndex(p),Ct=normalize$1(d.getShallow("symbol",!0)),ar=normalize$1(d.getShallow("symbolSize",!0)),en=d.getModel("lineStyle").getLineStyle(),tn=l.ensureUniqueItemVisual(p,"style");switch(extend(tn,en),tn.stroke){case"source":{var on=Q.node1.getVisual("style");tn.stroke=on&&on.fill;break}case"target":{var on=Q.node2.getVisual("style");tn.stroke=on&&on.fill;break}}Ct[0]&&Q.setVisual("fromSymbol",Ct[0]),Ct[1]&&Q.setVisual("toSymbol",Ct[1]),ar[0]&&Q.setVisual("fromSymbolSize",ar[0]),ar[1]&&Q.setVisual("toSymbolSize",ar[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(t){return t.get("autoCurveness")||null},createCurveness=function(t,n){var a=getAutoCurvenessParams(t),l=20,u=[];if(isNumber(a))l=a;else if(isArray$1(a)){t.__curvenessList=a;return}n>l&&(l=n);var c=l%2?l+2:l+3;u=[];for(var p=0;p<c;p++)u.push((p%2?p+1:p)/10*(p%2?-1:1));t.__curvenessList=u},getKeyOfEdges=function(t,n,a){var l=[t.id,t.dataIndex].join("."),u=[n.id,n.dataIndex].join(".");return[a.uid,l,u].join(KEY_DELIMITER)},getOppositeKey=function(t){var n=t.split(KEY_DELIMITER);return[n[0],n[2],n[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(t,n){var a=getKeyOfEdges(t.node1,t.node2,n);return n.__edgeMap[a]},getTotalLengthBetweenNodes=function(t,n){var a=getEdgeMapLengthWithKey(getKeyOfEdges(t.node1,t.node2,n),n),l=getEdgeMapLengthWithKey(getKeyOfEdges(t.node2,t.node1,n),n);return a+l},getEdgeMapLengthWithKey=function(t,n){var a=n.__edgeMap;return a[t]?a[t].length:0};function initCurvenessList(t){getAutoCurvenessParams(t)&&(t.__curvenessList=[],t.__edgeMap={},createCurveness(t))}function createEdgeMapForCurveness(t,n,a,l){if(getAutoCurvenessParams(a)){var u=getKeyOfEdges(t,n,a),c=a.__edgeMap,p=c[getOppositeKey(u)];c[u]&&!p?c[u].isForward=!0:p&&c[u]&&(p.isForward=!0,c[u].isForward=!1),c[u]=c[u]||[],c[u].push(l)}}function getCurvenessForEdge(t,n,a,l){var u=getAutoCurvenessParams(n),c=isArray$1(u);if(!u)return null;var p=getEdgeFromMap(t,n);if(!p)return null;for(var d=-1,Q=0;Q<p.length;Q++)if(p[Q]===a){d=Q;break}var Ct=getTotalLengthBetweenNodes(t,n);createCurveness(n,Ct),t.lineStyle=t.lineStyle||{};var ar=getKeyOfEdges(t.node1,t.node2,n),en=n.__curvenessList,tn=c||Ct%2?0:1;if(p.isForward)return en[tn+d];var on=getOppositeKey(ar),cn=getEdgeMapLengthWithKey(on,n),gn=en[d+cn+tn];return l?c?u&&u[0]===0?(cn+tn)%2?gn:-gn:((cn%2?0:1)+tn)%2?gn:-gn:(cn+tn)%2?gn:-gn:en[d+cn+tn]}function simpleLayout(t){var n=t.coordinateSystem;if(!(n&&n.type!=="view")){var a=t.getGraph();a.eachNode(function(l){var u=l.getModel();l.setLayout([+u.get("x"),+u.get("y")])}),simpleLayoutEdge(a,t)}}function simpleLayoutEdge(t,n){t.eachEdge(function(a,l){var u=retrieve3(a.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(a,n,l,!0),0),c=clone$3(a.node1.getLayout()),p=clone$3(a.node2.getLayout()),d=[c,p];+u&&d.push([(c[0]+p[0])/2-(c[1]-p[1])*u,(c[1]+p[1])/2-(p[0]-c[0])*u]),a.setLayout(d)})}function graphSimpleLayout(t,n){t.eachSeriesByType("graph",function(a){var l=a.get("layout"),u=a.coordinateSystem;if(u&&u.type!=="view"){var c=a.getData(),p=[];each$f(u.dimensions,function(tn){p=p.concat(c.mapDimensionsAll(tn))});for(var d=0;d<c.count();d++){for(var Q=[],Ct=!1,ar=0;ar<p.length;ar++){var en=c.get(p[ar],d);isNaN(en)||(Ct=!0),Q.push(en)}Ct?c.setItemLayout(d,u.dataToPoint(Q)):c.setItemLayout(d,[NaN,NaN])}simpleLayoutEdge(c.graph,a)}else(!l||l==="none")&&simpleLayout(a)})}function getNodeGlobalScale(t){var n=t.coordinateSystem;if(n.type!=="view")return 1;var a=t.option.nodeScaleRatio,l=n.scaleX,u=n.getZoom(),c=(u-1)*a+1;return c/l}function getSymbolSize(t){var n=t.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(t,n,a,l){var u=t.coordinateSystem;if(!(u&&u.type!=="view")){var c=u.getBoundingRect(),p=t.getData(),d=p.graph,Q=c.width/2+c.x,Ct=c.height/2+c.y,ar=Math.min(c.width,c.height)/2,en=p.count();if(p.setLayout({cx:Q,cy:Ct}),!!en){if(a){var tn=u.pointToData(l),on=tn[0],cn=tn[1],gn=[on-Q,cn-Ct];normalize$3(gn,gn),scale$2(gn,gn,ar),a.setLayout([Q+gn[0],Ct+gn[1]],!0);var Cn=t.get(["circular","rotateLabel"]);rotateNodeLabel(a,Cn,Q,Ct)}_layoutNodesBasedOn[n](t,d,p,ar,Q,Ct,en),d.eachEdge(function(ex,ix){var ax=retrieve3(ex.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(ex,t,ix),0),ox=clone$3(ex.node1.getLayout()),lx=clone$3(ex.node2.getLayout()),cx,dx=(ox[0]+lx[0])/2,hx=(ox[1]+lx[1])/2;+ax&&(ax*=3,cx=[Q*ax+dx*(1-ax),Ct*ax+hx*(1-ax)]),ex.setLayout([ox,lx,cx])})}}}var _layoutNodesBasedOn={value:function(t,n,a,l,u,c,p){var d=0,Q=a.getSum("value"),Ct=Math.PI*2/(Q||p);n.eachNode(function(ar){var en=ar.getValue("value"),tn=Ct*(Q?en:1)/2;d+=tn,ar.setLayout([l*Math.cos(d)+u,l*Math.sin(d)+c]),d+=tn})},symbolSize:function(t,n,a,l,u,c,p){var d=0;_symbolRadiansHalf.length=p;var Q=getNodeGlobalScale(t);n.eachNode(function(en){var tn=getSymbolSize(en);isNaN(tn)&&(tn=2),tn<0&&(tn=0),tn*=Q;var on=Math.asin(tn/2/l);isNaN(on)&&(on=PI$2/2),_symbolRadiansHalf[en.dataIndex]=on,d+=on*2});var Ct=(2*PI$2-d)/p/2,ar=0;n.eachNode(function(en){var tn=Ct+_symbolRadiansHalf[en.dataIndex];ar+=tn,(!en.getLayout()||!en.getLayout().fixed)&&en.setLayout([l*Math.cos(ar)+u,l*Math.sin(ar)+c]),ar+=tn})}};function rotateNodeLabel(t,n,a,l){var u=t.getGraphicEl();if(u){var c=t.getModel(),p=c.get(["label","rotate"])||0,d=u.getSymbolPath();if(n){var Q=t.getLayout(),Ct=Math.atan2(Q[1]-l,Q[0]-a);Ct<0&&(Ct=Math.PI*2+Ct);var ar=Q[0]<a;ar&&(Ct=Ct-Math.PI);var en=ar?"left":"right";d.setTextConfig({rotation:-Ct,position:en,origin:"center"});var tn=d.ensureState("emphasis");extend(tn.textConfig||(tn.textConfig={}),{position:en})}else d.setTextConfig({rotation:p*=Math.PI/180})}}function graphCircularLayout(t){t.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&circularLayout(n,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(t,n,a){for(var l=t,u=n,c=a.rect,p=c.width,d=c.height,Q=[c.x+p/2,c.y+d/2],Ct=a.gravity==null?.1:a.gravity,ar=0;ar<l.length;ar++){var en=l[ar];en.p||(en.p=create$2(p*(Math.random()-.5)+Q[0],d*(Math.random()-.5)+Q[1])),en.pp=clone$3(en.p),en.edges=null}var tn=a.friction==null?.6:a.friction,on=tn,cn,gn;return{warmUp:function(){on=tn*.8},setFixed:function(Cn){l[Cn].fixed=!0},setUnfixed:function(Cn){l[Cn].fixed=!1},beforeStep:function(Cn){cn=Cn},afterStep:function(Cn){gn=Cn},step:function(Cn){cn&&cn(l,u);for(var ex=[],ix=l.length,ax=0;ax<u.length;ax++){var ox=u[ax];if(!ox.ignoreForceLayout){var lx=ox.n1,cx=ox.n2;sub(ex,cx.p,lx.p);var dx=len(ex)-ox.d,hx=cx.w/(lx.w+cx.w);isNaN(hx)&&(hx=0),normalize$3(ex,ex),!lx.fixed&&scaleAndAdd(lx.p,lx.p,ex,hx*dx*on),!cx.fixed&&scaleAndAdd(cx.p,cx.p,ex,-(1-hx)*dx*on)}}for(var ax=0;ax<ix;ax++){var fx=l[ax];fx.fixed||(sub(ex,Q,fx.p),scaleAndAdd(fx.p,fx.p,ex,Ct*on))}for(var ax=0;ax<ix;ax++)for(var lx=l[ax],ux=ax+1;ux<ix;ux++){var cx=l[ux];sub(ex,cx.p,lx.p);var dx=len(ex);dx===0&&(set$1(ex,Math.random()-.5,Math.random()-.5),dx=1);var gx=(lx.rep+cx.rep)/dx/dx;!lx.fixed&&scaleAndAdd(lx.pp,lx.pp,ex,gx),!cx.fixed&&scaleAndAdd(cx.pp,cx.pp,ex,-gx)}for(var yx=[],ax=0;ax<ix;ax++){var fx=l[ax];fx.fixed||(sub(yx,fx.p,fx.pp),scaleAndAdd(fx.p,fx.p,yx,on),copy$1(fx.pp,fx.p))}on=on*.992;var _x=on<.01;gn&&gn(l,u,_x),Cn&&Cn(_x)}}}function graphForceLayout(t){t.eachSeriesByType("graph",function(n){var a=n.coordinateSystem;if(!(a&&a.type!=="view"))if(n.get("layout")==="force"){var l=n.preservedPoints||{},u=n.getGraph(),c=u.data,p=u.edgeData,d=n.getModel("force"),Q=d.get("initLayout");n.preservedPoints?c.each(function(ax){var ox=c.getId(ax);c.setItemLayout(ax,l[ox]||[NaN,NaN])}):!Q||Q==="none"?simpleLayout(n):Q==="circular"&&circularLayout(n,"value");var Ct=c.getDataExtent("value"),ar=p.getDataExtent("value"),en=d.get("repulsion"),tn=d.get("edgeLength"),on=isArray$1(en)?en:[en,en],cn=isArray$1(tn)?tn:[tn,tn];cn=[cn[1],cn[0]];var gn=c.mapArray("value",function(ax,ox){var lx=c.getItemLayout(ox),cx=linearMap$2(ax,Ct,on);return isNaN(cx)&&(cx=(on[0]+on[1])/2),{w:cx,rep:cx,fixed:c.getItemModel(ox).get("fixed"),p:!lx||isNaN(lx[0])||isNaN(lx[1])?null:lx}}),Cn=p.mapArray("value",function(ax,ox){var lx=u.getEdgeByIndex(ox),cx=linearMap$2(ax,ar,cn);isNaN(cx)&&(cx=(cn[0]+cn[1])/2);var dx=lx.getModel(),hx=retrieve3(lx.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(lx,n,ox,!0),0);return{n1:gn[lx.node1.dataIndex],n2:gn[lx.node2.dataIndex],d:cx,curveness:hx,ignoreForceLayout:dx.get("ignoreForceLayout")}}),ex=a.getBoundingRect(),ix=forceLayout(gn,Cn,{rect:ex,gravity:d.get("gravity"),friction:d.get("friction")});ix.beforeStep(function(ax,ox){for(var lx=0,cx=ax.length;lx<cx;lx++)ax[lx].fixed&&copy$1(ax[lx].p,u.getNodeByIndex(lx).getLayout())}),ix.afterStep(function(ax,ox,lx){for(var cx=0,dx=ax.length;cx<dx;cx++)ax[cx].fixed||u.getNodeByIndex(cx).setLayout(ax[cx].p),l[c.getId(cx)]=ax[cx].p;for(var cx=0,dx=ox.length;cx<dx;cx++){var hx=ox[cx],fx=u.getEdgeByIndex(cx),ux=hx.n1.p,gx=hx.n2.p,yx=fx.getLayout();yx=yx?yx.slice():[],yx[0]=yx[0]||[],yx[1]=yx[1]||[],copy$1(yx[0],ux),copy$1(yx[1],gx),+hx.curveness&&(yx[2]=[(ux[0]+gx[0])/2-(ux[1]-gx[1])*hx.curveness,(ux[1]+gx[1])/2-(gx[0]-ux[0])*hx.curveness]),fx.setLayout(yx)}}),n.forceLayout=ix,n.preservedPoints=l,ix.step()}else n.forceLayout=null})}function getViewRect$3(t,n,a){var l=extend(t.getBoxLayoutParams(),{aspect:a});return getLayoutRect(l,{width:n.getWidth(),height:n.getHeight()})}function createViewCoordSys(t,n){var a=[];return t.eachSeriesByType("graph",function(l){var u=l.get("coordinateSystem");if(!u||u==="view"){var c=l.getData(),p=c.mapArray(function(Cn){var ex=c.getItemModel(Cn);return[+ex.get("x"),+ex.get("y")]}),d=[],Q=[];fromPoints(p,d,Q),Q[0]-d[0]===0&&(Q[0]+=1,d[0]-=1),Q[1]-d[1]===0&&(Q[1]+=1,d[1]-=1);var Ct=(Q[0]-d[0])/(Q[1]-d[1]),ar=getViewRect$3(l,n,Ct);isNaN(Ct)&&(d=[ar.x,ar.y],Q=[ar.x+ar.width,ar.y+ar.height]);var en=Q[0]-d[0],tn=Q[1]-d[1],on=ar.width,cn=ar.height,gn=l.coordinateSystem=new View;gn.zoomLimit=l.get("scaleLimit"),gn.setBoundingRect(d[0],d[1],en,tn),gn.setViewRect(ar.x,ar.y,on,cn),gn.setCenter(l.get("center"),n),gn.setZoom(l.get("zoom")),a.push(gn)}}),a}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(StraightLineShape);function isStraightLine(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var ECLinePath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="ec-line",l}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new StraightLineShape},n.prototype.buildPath=function(a,l){isStraightLine(l)?straightLineProto.buildPath.call(this,a,l):bezierCurveProto.buildPath.call(this,a,l)},n.prototype.pointAt=function(a){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,a):bezierCurveProto.pointAt.call(this,a)},n.prototype.tangentAt=function(a){var l=this.shape,u=isStraightLine(l)?[l.x2-l.x1,l.y2-l.y1]:bezierCurveProto.tangentAt.call(this,a);return normalize$3(u,u)},n}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(t){return"_"+t+"Type"}function makeSymbolTypeValue(t,n,a){var l=n.getItemVisual(a,t);if(!l||l==="none")return l;var u=n.getItemVisual(a,t+"Size"),c=n.getItemVisual(a,t+"Rotate"),p=n.getItemVisual(a,t+"Offset"),d=n.getItemVisual(a,t+"KeepAspect"),Q=normalizeSymbolSize(u),Ct=normalizeSymbolOffset(p||0,Q);return l+Q+Ct+(c||"")+(d||"")}function createSymbol(t,n,a){var l=n.getItemVisual(a,t);if(!(!l||l==="none")){var u=n.getItemVisual(a,t+"Size"),c=n.getItemVisual(a,t+"Rotate"),p=n.getItemVisual(a,t+"Offset"),d=n.getItemVisual(a,t+"KeepAspect"),Q=normalizeSymbolSize(u),Ct=normalizeSymbolOffset(p||0,Q),ar=createSymbol$1(l,-Q[0]/2+Ct[0],-Q[1]/2+Ct[1],Q[0],Q[1],null,d);return ar.__specifiedRotation=c==null||isNaN(c)?void 0:+c*Math.PI/180||0,ar.name=t,ar}}function createLine(t){var n=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(n.shape,t),n}function setLinePoints(t,n){t.x1=n[0][0],t.y1=n[0][1],t.x2=n[1][0],t.y2=n[1][1],t.percent=1;var a=n[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var Line=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this)||this;return c._createLine(a,l,u),c}return n.prototype._createLine=function(a,l,u){var c=a.hostModel,p=a.getItemLayout(l),d=createLine(p);d.shape.percent=0,initProps(d,{shape:{percent:1}},c,l),this.add(d),each$f(SYMBOL_CATEGORIES,function(Q){var Ct=createSymbol(Q,a,l);this.add(Ct),this[makeSymbolTypeKey(Q)]=makeSymbolTypeValue(Q,a,l)},this),this._updateCommonStl(a,l,u)},n.prototype.updateData=function(a,l,u){var c=a.hostModel,p=this.childOfName("line"),d=a.getItemLayout(l),Q={shape:{}};setLinePoints(Q.shape,d),updateProps$1(p,Q,c,l),each$f(SYMBOL_CATEGORIES,function(Ct){var ar=makeSymbolTypeValue(Ct,a,l),en=makeSymbolTypeKey(Ct);if(this[en]!==ar){this.remove(this.childOfName(Ct));var tn=createSymbol(Ct,a,l);this.add(tn)}this[en]=ar},this),this._updateCommonStl(a,l,u)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(a,l,u){var c=a.hostModel,p=this.childOfName("line"),d=u&&u.emphasisLineStyle,Q=u&&u.blurLineStyle,Ct=u&&u.selectLineStyle,ar=u&&u.labelStatesModels,en=u&&u.emphasisDisabled,tn=u&&u.focus,on=u&&u.blurScope;if(!u||a.hasItemOption){var cn=a.getItemModel(l),gn=cn.getModel("emphasis");d=gn.getModel("lineStyle").getLineStyle(),Q=cn.getModel(["blur","lineStyle"]).getLineStyle(),Ct=cn.getModel(["select","lineStyle"]).getLineStyle(),en=gn.get("disabled"),tn=gn.get("focus"),on=gn.get("blurScope"),ar=getLabelStatesModels(cn)}var Cn=a.getItemVisual(l,"style"),ex=Cn.stroke;p.useStyle(Cn),p.style.fill=null,p.style.strokeNoScale=!0,p.ensureState("emphasis").style=d,p.ensureState("blur").style=Q,p.ensureState("select").style=Ct,each$f(SYMBOL_CATEGORIES,function(cx){var dx=this.childOfName(cx);if(dx){dx.setColor(ex),dx.style.opacity=Cn.opacity;for(var hx=0;hx<SPECIAL_STATES.length;hx++){var fx=SPECIAL_STATES[hx],ux=p.getState(fx);if(ux){var gx=ux.style||{},yx=dx.ensureState(fx),_x=yx.style||(yx.style={});gx.stroke!=null&&(_x[dx.__isEmptyBrush?"stroke":"fill"]=gx.stroke),gx.opacity!=null&&(_x.opacity=gx.opacity)}}dx.markRedraw()}},this);var ix=c.getRawValue(l);setLabelStyle(this,ar,{labelDataIndex:l,labelFetcher:{getFormattedLabel:function(cx,dx){return c.getFormattedLabel(cx,dx,a.dataType)}},inheritColor:ex||"#000",defaultOpacity:Cn.opacity,defaultText:(ix==null?a.getName(l):isFinite(ix)?round$3(ix):ix)+""});var ax=this.getTextContent();if(ax){var ox=ar.normal;ax.__align=ax.style.align,ax.__verticalAlign=ax.style.verticalAlign,ax.__position=ox.get("position")||"middle";var lx=ox.get("distance");isArray$1(lx)||(lx=[lx,lx]),ax.__labelDistance=lx}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,tn,on,en)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.updateLayout=function(a,l){this.setLinePoints(a.getItemLayout(l))},n.prototype.setLinePoints=function(a){var l=this.childOfName("line");setLinePoints(l.shape,a),l.dirty()},n.prototype.beforeUpdate=function(){var a=this,l=a.childOfName("fromSymbol"),u=a.childOfName("toSymbol"),c=a.getTextContent();if(!l&&!u&&(!c||c.ignore))return;for(var p=1,d=this.parent;d;)d.scaleX&&(p/=d.scaleX),d=d.parent;var Q=a.childOfName("line");if(!this.__dirty&&!Q.__dirty)return;var Ct=Q.shape.percent,ar=Q.pointAt(0),en=Q.pointAt(Ct),tn=sub([],en,ar);normalize$3(tn,tn);function on(ux,gx){var yx=ux.__specifiedRotation;if(yx==null){var _x=Q.tangentAt(gx);ux.attr("rotation",(gx===1?-1:1)*Math.PI/2-Math.atan2(_x[1],_x[0]))}else ux.attr("rotation",yx)}if(l&&(l.setPosition(ar),on(l,0),l.scaleX=l.scaleY=p*Ct,l.markRedraw()),u&&(u.setPosition(en),on(u,1),u.scaleX=u.scaleY=p*Ct,u.markRedraw()),c&&!c.ignore){c.x=c.y=0,c.originX=c.originY=0;var cn=void 0,gn=void 0,Cn=c.__labelDistance,ex=Cn[0]*p,ix=Cn[1]*p,ax=Ct/2,ox=Q.tangentAt(ax),lx=[ox[1],-ox[0]],cx=Q.pointAt(ax);lx[1]>0&&(lx[0]=-lx[0],lx[1]=-lx[1]);var dx=ox[0]<0?-1:1;if(c.__position!=="start"&&c.__position!=="end"){var hx=-Math.atan2(ox[1],ox[0]);en[0]<ar[0]&&(hx=Math.PI+hx),c.rotation=hx}var fx=void 0;switch(c.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":fx=-ix,gn="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":fx=ix,gn="top";break;default:fx=0,gn="middle"}switch(c.__position){case"end":c.x=tn[0]*ex+en[0],c.y=tn[1]*ix+en[1],cn=tn[0]>.8?"left":tn[0]<-.8?"right":"center",gn=tn[1]>.8?"top":tn[1]<-.8?"bottom":"middle";break;case"start":c.x=-tn[0]*ex+ar[0],c.y=-tn[1]*ix+ar[1],cn=tn[0]>.8?"right":tn[0]<-.8?"left":"center",gn=tn[1]>.8?"bottom":tn[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":c.x=ex*dx+ar[0],c.y=ar[1]+fx,cn=ox[0]<0?"right":"left",c.originX=-ex*dx,c.originY=-fx;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":c.x=cx[0],c.y=cx[1]+fx,cn="center",c.originY=-fx;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":c.x=-ex*dx+en[0],c.y=en[1]+fx,cn=ox[0]>=0?"right":"left",c.originX=ex*dx,c.originY=-fx;break}c.scaleX=c.scaleY=p,c.setStyle({verticalAlign:c.__verticalAlign||gn,align:c.__align||cn})}},n}(Group$3),LineDraw=function(){function t(n){this.group=new Group$3,this._LineCtor=n||Line}return t.prototype.updateData=function(n){var a=this;this._progressiveEls=null;var l=this,u=l.group,c=l._lineData;l._lineData=n,c||u.removeAll();var p=makeSeriesScope$1(n);n.diff(c).add(function(d){a._doAdd(n,d,p)}).update(function(d,Q){a._doUpdate(c,n,Q,d,p)}).remove(function(d){u.remove(c.getItemGraphicEl(d))}).execute()},t.prototype.updateLayout=function(){var n=this._lineData;n&&n.eachItemGraphicEl(function(a,l){a.updateLayout(n,l)},this)},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$1(n),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a){this._progressiveEls=[];function l(d){!d.isGroup&&!isEffectObject(d)&&(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var u=n.start;u<n.end;u++){var c=a.getItemLayout(u);if(lineNeedsDraw(c)){var p=new this._LineCtor(a,u,this._seriesScope);p.traverse(l),this.group.add(p),a.setItemGraphicEl(u,p),this._progressiveEls.push(p)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._doAdd=function(n,a,l){var u=n.getItemLayout(a);if(lineNeedsDraw(u)){var c=new this._LineCtor(n,a,l);n.setItemGraphicEl(a,c),this.group.add(c)}},t.prototype._doUpdate=function(n,a,l,u,c){var p=n.getItemGraphicEl(l);if(!lineNeedsDraw(a.getItemLayout(u))){this.group.remove(p);return}p?p.updateData(a,u,c):p=new this._LineCtor(a,u,c),a.setItemGraphicEl(u,p),this.group.add(p)},t}();function isEffectObject(t){return t.animators&&t.animators.length>0}function makeSeriesScope$1(t){var n=t.hostModel,a=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:getLabelStatesModels(n)}}function isPointNaN(t){return isNaN(t[0])||isNaN(t[1])}function lineNeedsDraw(t){return t&&!isPointNaN(t[0])&&!isPointNaN(t[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(t,n,a){for(var l=t[0],u=t[1],c=t[2],p=1/0,d,Q=a*a,Ct=.1,ar=.1;ar<=.9;ar+=.1){v1[0]=quadraticAt(l[0],u[0],c[0],ar),v1[1]=quadraticAt(l[1],u[1],c[1],ar);var en=mathAbs(v2DistSquare(v1,n)-Q);en<p&&(p=en,d=ar)}for(var tn=0;tn<32;tn++){var on=d+Ct;v2[0]=quadraticAt(l[0],u[0],c[0],d),v2[1]=quadraticAt(l[1],u[1],c[1],d),v3[0]=quadraticAt(l[0],u[0],c[0],on),v3[1]=quadraticAt(l[1],u[1],c[1],on);var en=v2DistSquare(v2,n)-Q;if(mathAbs(en)<.01)break;var cn=v2DistSquare(v3,n)-Q;Ct/=2,en<0?cn>=0?d=d+Ct:d=d-Ct:cn>=0?d=d-Ct:d=d+Ct}return d}function adjustEdge(t,n){var a=[],l=quadraticSubdivide,u=[[],[],[]],c=[[],[]],p=[];n/=2,t.eachEdge(function(d,Q){var Ct=d.getLayout(),ar=d.getVisual("fromSymbol"),en=d.getVisual("toSymbol");Ct.__original||(Ct.__original=[clone$3(Ct[0]),clone$3(Ct[1])],Ct[2]&&Ct.__original.push(clone$3(Ct[2])));var tn=Ct.__original;if(Ct[2]!=null){if(copy$1(u[0],tn[0]),copy$1(u[1],tn[2]),copy$1(u[2],tn[1]),ar&&ar!=="none"){var on=getSymbolSize(d.node1),cn=intersectCurveCircle(u,tn[0],on*n);l(u[0][0],u[1][0],u[2][0],cn,a),u[0][0]=a[3],u[1][0]=a[4],l(u[0][1],u[1][1],u[2][1],cn,a),u[0][1]=a[3],u[1][1]=a[4]}if(en&&en!=="none"){var on=getSymbolSize(d.node2),cn=intersectCurveCircle(u,tn[1],on*n);l(u[0][0],u[1][0],u[2][0],cn,a),u[1][0]=a[1],u[2][0]=a[2],l(u[0][1],u[1][1],u[2][1],cn,a),u[1][1]=a[1],u[2][1]=a[2]}copy$1(Ct[0],u[0]),copy$1(Ct[1],u[2]),copy$1(Ct[2],u[1])}else{if(copy$1(c[0],tn[0]),copy$1(c[1],tn[1]),sub(p,c[1],c[0]),normalize$3(p,p),ar&&ar!=="none"){var on=getSymbolSize(d.node1);scaleAndAdd$1(c[0],c[0],p,on*n)}if(en&&en!=="none"){var on=getSymbolSize(d.node2);scaleAndAdd$1(c[1],c[1],p,-on*n)}copy$1(Ct[0],c[0]),copy$1(Ct[1],c[1])}})}function isViewCoordSys(t){return t.type==="view"}var GraphView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l){var u=new SymbolDraw,c=new LineDraw,p=this.group;this._controller=new RoamController(l.getZr()),this._controllerHost={target:p},p.add(u.group),p.add(c.group),this._symbolDraw=u,this._lineDraw=c,this._firstRender=!0},n.prototype.render=function(a,l,u){var c=this,p=a.coordinateSystem;this._model=a;var d=this._symbolDraw,Q=this._lineDraw,Ct=this.group;if(isViewCoordSys(p)){var ar={x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY};this._firstRender?Ct.attr(ar):updateProps$1(Ct,ar,a)}adjustEdge(a.getGraph(),getNodeGlobalScale(a));var en=a.getData();d.updateData(en);var tn=a.getEdgeData();Q.updateData(tn),this._updateNodeAndLinkScale(),this._updateController(a,l,u),clearTimeout(this._layoutTimeout);var on=a.forceLayout,cn=a.get(["force","layoutAnimation"]);on&&this._startForceLayoutIteration(on,cn);var gn=a.get("layout");en.graph.eachNode(function(ax){var ox=ax.dataIndex,lx=ax.getGraphicEl(),cx=ax.getModel();if(lx){lx.off("drag").off("dragend");var dx=cx.get("draggable");dx&&lx.on("drag",function(fx){switch(gn){case"force":on.warmUp(),!c._layouting&&c._startForceLayoutIteration(on,cn),on.setFixed(ox),en.setItemLayout(ox,[lx.x,lx.y]);break;case"circular":en.setItemLayout(ox,[lx.x,lx.y]),ax.setLayout({fixed:!0},!0),circularLayout(a,"symbolSize",ax,[fx.offsetX,fx.offsetY]),c.updateLayout(a);break;case"none":default:en.setItemLayout(ox,[lx.x,lx.y]),simpleLayoutEdge(a.getGraph(),a),c.updateLayout(a);break}}).on("dragend",function(){on&&on.setUnfixed(ox)}),lx.setDraggable(dx,!!cx.get("cursor"));var hx=cx.get(["emphasis","focus"]);hx==="adjacency"&&(getECData(lx).focus=ax.getAdjacentDataIndices())}}),en.graph.eachEdge(function(ax){var ox=ax.getGraphicEl(),lx=ax.getModel().get(["emphasis","focus"]);ox&&lx==="adjacency"&&(getECData(ox).focus={edge:[ax.dataIndex],node:[ax.node1.dataIndex,ax.node2.dataIndex]})});var Cn=a.get("layout")==="circular"&&a.get(["circular","rotateLabel"]),ex=en.getLayout("cx"),ix=en.getLayout("cy");en.graph.eachNode(function(ax){rotateNodeLabel(ax,Cn,ex,ix)}),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(a,l){var u=this;(function c(){a.step(function(p){u.updateLayout(u._model),(u._layouting=!p)&&(l?u._layoutTimeout=setTimeout(c,16):c())})})()},n.prototype._updateController=function(a,l,u){var c=this,p=this._controller,d=this._controllerHost,Q=this.group;if(p.setPointerChecker(function(Ct,ar,en){var tn=Q.getBoundingRect();return tn.applyTransform(Q.transform),tn.contain(ar,en)&&!onIrrelevantElement(Ct,u,a)}),!isViewCoordSys(a.coordinateSystem)){p.disable();return}p.enable(a.get("roam")),d.zoomLimit=a.get("scaleLimit"),d.zoom=a.coordinateSystem.getZoom(),p.off("pan").off("zoom").on("pan",function(Ct){updateViewOnPan(d,Ct.dx,Ct.dy),u.dispatchAction({seriesId:a.id,type:"graphRoam",dx:Ct.dx,dy:Ct.dy})}).on("zoom",function(Ct){updateViewOnZoom(d,Ct.scale,Ct.originX,Ct.originY),u.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:Ct.scale,originX:Ct.originX,originY:Ct.originY}),c._updateNodeAndLinkScale(),adjustEdge(a.getGraph(),getNodeGlobalScale(a)),c._lineDraw.updateLayout(),u.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(){var a=this._model,l=a.getData(),u=getNodeGlobalScale(a);l.eachItemGraphicEl(function(c,p){c&&c.setSymbolScale(u)})},n.prototype.updateLayout=function(a){adjustEdge(a.getGraph(),getNodeGlobalScale(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(ChartView);function generateNodeKey(t){return"_EC_"+t}var Graph=function(){function t(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(n,a){n=n==null?""+a:""+n;var l=this._nodesMap;if(!l[generateNodeKey(n)]){var u=new GraphNode(n,a);return u.hostGraph=this,this.nodes.push(u),l[generateNodeKey(n)]=u,u}},t.prototype.getNodeByIndex=function(n){var a=this.data.getRawIndex(n);return this.nodes[a]},t.prototype.getNodeById=function(n){return this._nodesMap[generateNodeKey(n)]},t.prototype.addEdge=function(n,a,l){var u=this._nodesMap,c=this._edgesMap;if(isNumber(n)&&(n=this.nodes[n]),isNumber(a)&&(a=this.nodes[a]),n instanceof GraphNode||(n=u[generateNodeKey(n)]),a instanceof GraphNode||(a=u[generateNodeKey(a)]),!(!n||!a)){var p=n.id+"-"+a.id,d=new GraphEdge(n,a,l);return d.hostGraph=this,this._directed&&(n.outEdges.push(d),a.inEdges.push(d)),n.edges.push(d),n!==a&&a.edges.push(d),this.edges.push(d),c[p]=d,d}},t.prototype.getEdgeByIndex=function(n){var a=this.edgeData.getRawIndex(n);return this.edges[a]},t.prototype.getEdge=function(n,a){n instanceof GraphNode&&(n=n.id),a instanceof GraphNode&&(a=a.id);var l=this._edgesMap;return this._directed?l[n+"-"+a]:l[n+"-"+a]||l[a+"-"+n]},t.prototype.eachNode=function(n,a){for(var l=this.nodes,u=l.length,c=0;c<u;c++)l[c].dataIndex>=0&&n.call(a,l[c],c)},t.prototype.eachEdge=function(n,a){for(var l=this.edges,u=l.length,c=0;c<u;c++)l[c].dataIndex>=0&&l[c].node1.dataIndex>=0&&l[c].node2.dataIndex>=0&&n.call(a,l[c],c)},t.prototype.breadthFirstTraverse=function(n,a,l,u){if(a instanceof GraphNode||(a=this._nodesMap[generateNodeKey(a)]),!!a){for(var c=l==="out"?"outEdges":l==="in"?"inEdges":"edges",p=0;p<this.nodes.length;p++)this.nodes[p].__visited=!1;if(!n.call(u,a,null))for(var d=[a];d.length;)for(var Q=d.shift(),Ct=Q[c],p=0;p<Ct.length;p++){var ar=Ct[p],en=ar.node1===Q?ar.node2:ar.node1;if(!en.__visited){if(n.call(u,en,Q))return;d.push(en),en.__visited=!0}}}},t.prototype.update=function(){for(var n=this.data,a=this.edgeData,l=this.nodes,u=this.edges,c=0,p=l.length;c<p;c++)l[c].dataIndex=-1;for(var c=0,p=n.count();c<p;c++)l[n.getRawIndex(c)].dataIndex=c;a.filterSelf(function(d){var Q=u[a.getRawIndex(d)];return Q.node1.dataIndex>=0&&Q.node2.dataIndex>=0});for(var c=0,p=u.length;c<p;c++)u[c].dataIndex=-1;for(var c=0,p=a.count();c<p;c++)u[a.getRawIndex(c)].dataIndex=c},t.prototype.clone=function(){for(var n=new t(this._directed),a=this.nodes,l=this.edges,u=0;u<a.length;u++)n.addNode(a[u].id,a[u].dataIndex);for(var u=0;u<l.length;u++){var c=l[u];n.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return n},t}(),GraphNode=function(){function t(n,a){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=n??"",this.dataIndex=a??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,l=a.data.getItemModel(this.dataIndex);return l.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},a=0;a<this.edges.length;a++){var l=this.edges[a];l.dataIndex<0||(n.edge.push(l.dataIndex),n.node.push(l.node1.dataIndex,l.node2.dataIndex))}return n},t.prototype.getTrajectoryDataIndices=function(){for(var n=createHashMap(),a=createHashMap(),l=0;l<this.edges.length;l++){var u=this.edges[l];if(!(u.dataIndex<0)){n.set(u.dataIndex,!0);for(var c=[u.node1],p=[u.node2],d=0;d<c.length;){var Q=c[d];d++,a.set(Q.dataIndex,!0);for(var Ct=0;Ct<Q.inEdges.length;Ct++)n.set(Q.inEdges[Ct].dataIndex,!0),c.push(Q.inEdges[Ct].node1)}for(d=0;d<p.length;){var ar=p[d];d++,a.set(ar.dataIndex,!0);for(var Ct=0;Ct<ar.outEdges.length;Ct++)n.set(ar.outEdges[Ct].dataIndex,!0),p.push(ar.outEdges[Ct].node2)}}}return{edge:n.keys(),node:a.keys()}},t}(),GraphEdge=function(){function t(n,a,l){this.dataIndex=-1,this.node1=n,this.node2=a,this.dataIndex=l??-1}return t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,l=a.edgeData.getItemModel(this.dataIndex);return l.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var n=createHashMap(),a=createHashMap();n.set(this.dataIndex,!0);for(var l=[this.node1],u=[this.node2],c=0;c<l.length;){var p=l[c];c++,a.set(p.dataIndex,!0);for(var d=0;d<p.inEdges.length;d++)n.set(p.inEdges[d].dataIndex,!0),l.push(p.inEdges[d].node1)}for(c=0;c<u.length;){var Q=u[c];c++,a.set(Q.dataIndex,!0);for(var d=0;d<Q.outEdges.length;d++)n.set(Q.outEdges[d].dataIndex,!0),u.push(Q.outEdges[d].node2)}return{edge:n.keys(),node:a.keys()}},t}();function createGraphDataProxyMixin(t,n){return{getValue:function(a){var l=this[t][n];return l.getStore().get(l.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,l){this.dataIndex>=0&&this[t][n].setItemVisual(this.dataIndex,a,l)},getVisual:function(a){return this[t][n].getItemVisual(this.dataIndex,a)},setLayout:function(a,l){this.dataIndex>=0&&this[t][n].setItemLayout(this.dataIndex,a,l)},getLayout:function(){return this[t][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][n].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(t,n,a,l,u){for(var c=new Graph(l),p=0;p<t.length;p++)c.addNode(retrieve(t[p].id,t[p].name,p),p);for(var d=[],Q=[],Ct=0,p=0;p<n.length;p++){var ar=n[p],en=ar.source,tn=ar.target;c.addEdge(en,tn,Ct)&&(Q.push(ar),d.push(retrieve(convertOptionIdName(ar.id,null),en+" > "+tn)),Ct++)}var on=a.get("coordinateSystem"),cn;if(on==="cartesian2d"||on==="polar")cn=createSeriesData(t,a);else{var gn=CoordinateSystemManager.get(on),Cn=gn?gn.dimensions||[]:[];indexOf(Cn,"value")<0&&Cn.concat(["value"]);var ex=prepareSeriesDataSchema(t,{coordDimensions:Cn,encodeDefine:a.getEncode()}).dimensions;cn=new SeriesData(ex,a),cn.initData(t)}var ix=new SeriesData(["value"],a);return ix.initData(Q,d),u&&u(cn,ix),linkSeriesData({mainData:cn,struct:c,structAttr:"graph",datas:{node:cn,edge:ix},datasAttr:{node:"data",edge:"edgeData"}}),c.update(),c}var GraphSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments);var l=this;function u(){return l._categoriesData}this.legendVisualProvider=new LegendVisualProvider(u,u),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(a){t.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(a,"edgeLabel",["show"])},n.prototype.getInitialData=function(a,l){var u=a.edges||a.links||[],c=a.data||a.nodes||[],p=this;if(c&&u){initCurvenessList(this);var d=createGraphFromNodeEdge(c,u,this,!0,Q);return each$f(d.edges,function(Ct){createEdgeMapForCurveness(Ct.node1,Ct.node2,this,Ct.dataIndex)},this),d.data}function Q(Ct,ar){Ct.wrapMethod("getItemModel",function(cn){var gn=p._categoriesModels,Cn=cn.getShallow("category"),ex=gn[Cn];return ex&&(ex.parentModel=cn.parentModel,cn.parentModel=ex),cn});var en=Model.prototype.getModel;function tn(cn,gn){var Cn=en.call(this,cn,gn);return Cn.resolveParentPath=on,Cn}ar.wrapMethod("getItemModel",function(cn){return cn.resolveParentPath=on,cn.getModel=tn,cn});function on(cn){if(cn&&(cn[0]==="label"||cn[1]==="label")){var gn=cn.slice();return cn[0]==="label"?gn[0]="edgeLabel":cn[1]==="label"&&(gn[1]="edgeLabel"),gn}return cn}}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(a,l,u){if(u==="edge"){var c=this.getData(),p=this.getDataParams(a,u),d=c.graph.getEdgeByIndex(a),Q=c.getName(d.node1.dataIndex),Ct=c.getName(d.node2.dataIndex),ar=[];return Q!=null&&ar.push(Q),Ct!=null&&ar.push(Ct),createTooltipMarkup("nameValue",{name:ar.join(" > "),value:p.value,noValue:p.value==null})}var en=defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:l});return en},n.prototype._updateCategoriesData=function(){var a=map$1(this.option.categories||[],function(u){return u.value!=null?u:extend({value:0},u)}),l=new SeriesData(["value"],this);l.initData(a),this._categoriesData=l,this._categoriesModels=l.mapArray(function(u){return l.getItemModel(u)})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(t){t.registerChartView(GraphView),t.registerSeriesModel(GraphSeriesModel),t.registerProcessor(categoryFilter),t.registerVisual(categoryVisual),t.registerVisual(graphEdgeVisual),t.registerLayout(graphSimpleLayout),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),t.registerLayout(graphForceLayout),t.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),t.registerAction(actionInfo$1,function(n,a,l){a.eachComponent({mainType:"series",query:n},function(u){var c=u.coordinateSystem,p=updateCenterAndZoom(c,n,void 0,l);u.setCenter&&u.setCenter(p.center),u.setZoom&&u.setZoom(p.zoom)})})}var PointerShape=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),PointerPath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="pointer",l}return n.prototype.getDefaultShape=function(){return new PointerShape},n.prototype.buildPath=function(a,l){var u=Math.cos,c=Math.sin,p=l.r,d=l.width,Q=l.angle,Ct=l.x-u(Q)*d*(d>=p/3?1:2),ar=l.y-c(Q)*d*(d>=p/3?1:2);Q=l.angle-Math.PI/2,a.moveTo(Ct,ar),a.lineTo(l.x+u(Q)*d,l.y+c(Q)*d),a.lineTo(l.x+u(l.angle)*p,l.y+c(l.angle)*p),a.lineTo(l.x-u(Q)*d,l.y-c(Q)*d),a.lineTo(Ct,ar)},n}(Path);function parsePosition(t,n){var a=t.get("center"),l=n.getWidth(),u=n.getHeight(),c=Math.min(l,u),p=parsePercent(a[0],n.getWidth()),d=parsePercent(a[1],n.getHeight()),Q=parsePercent(t.get("radius"),c/2);return{cx:p,cy:d,r:Q}}function formatLabel(t,n){var a=t==null?"":t+"";return n&&(isString$1(n)?a=n.replace("{value}",a):isFunction$1(n)&&(a=n(t))),a}var GaugeView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){this.group.removeAll();var c=a.get(["axisLine","lineStyle","color"]),p=parsePosition(a,u);this._renderMain(a,l,u,c,p),this._data=a.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(a,l,u,c,p){var d=this.group,Q=a.get("clockwise"),Ct=-a.get("startAngle")/180*Math.PI,ar=-a.get("endAngle")/180*Math.PI,en=a.getModel("axisLine"),tn=en.get("roundCap"),on=tn?SausagePath:Sector,cn=en.get("show"),gn=en.getModel("lineStyle"),Cn=gn.get("width"),ex=[Ct,ar];normalizeArcAngles(ex,!Q),Ct=ex[0],ar=ex[1];for(var ix=ar-Ct,ax=Ct,ox=[],lx=0;cn&&lx<c.length;lx++){var cx=Math.min(Math.max(c[lx][0],0),1);ar=Ct+ix*cx;var dx=new on({shape:{startAngle:ax,endAngle:ar,cx:p.cx,cy:p.cy,clockwise:Q,r0:p.r-Cn,r:p.r},silent:!0});dx.setStyle({fill:c[lx][1]}),dx.setStyle(gn.getLineStyle(["color","width"])),ox.push(dx),ax=ar}ox.reverse(),each$f(ox,function(fx){return d.add(fx)});var hx=function(fx){if(fx<=0)return c[0][1];var ux;for(ux=0;ux<c.length;ux++)if(c[ux][0]>=fx&&(ux===0?0:c[ux-1][0])<fx)return c[ux][1];return c[ux-1][1]};this._renderTicks(a,l,u,hx,p,Ct,ar,Q,Cn),this._renderTitleAndDetail(a,l,u,hx,p),this._renderAnchor(a,p),this._renderPointer(a,l,u,hx,p,Ct,ar,Q,Cn)},n.prototype._renderTicks=function(a,l,u,c,p,d,Q,Ct,ar){for(var en=this.group,tn=p.cx,on=p.cy,cn=p.r,gn=+a.get("min"),Cn=+a.get("max"),ex=a.getModel("splitLine"),ix=a.getModel("axisTick"),ax=a.getModel("axisLabel"),ox=a.get("splitNumber"),lx=ix.get("splitNumber"),cx=parsePercent(ex.get("length"),cn),dx=parsePercent(ix.get("length"),cn),hx=d,fx=(Q-d)/ox,ux=fx/lx,gx=ex.getModel("lineStyle").getLineStyle(),yx=ix.getModel("lineStyle").getLineStyle(),_x=ex.get("distance"),vx,bx,xx=0;xx<=ox;xx++){if(vx=Math.cos(hx),bx=Math.sin(hx),ex.get("show")){var Sx=_x?_x+ar:ar,Ax=new Line$1({shape:{x1:vx*(cn-Sx)+tn,y1:bx*(cn-Sx)+on,x2:vx*(cn-cx-Sx)+tn,y2:bx*(cn-cx-Sx)+on},style:gx,silent:!0});gx.stroke==="auto"&&Ax.setStyle({stroke:c(xx/ox)}),en.add(Ax)}if(ax.get("show")){var Sx=ax.get("distance")+_x,Cx=formatLabel(round$3(xx/ox*(Cn-gn)+gn),ax.get("formatter")),Tx=c(xx/ox),Px=vx*(cn-cx-Sx)+tn,Fx=bx*(cn-cx-Sx)+on,Mx=ax.get("rotate"),Dx=0;Mx==="radial"?(Dx=-hx+2*Math.PI,Dx>Math.PI/2&&(Dx+=Math.PI)):Mx==="tangential"?Dx=-hx-Math.PI/2:isNumber(Mx)&&(Dx=Mx*Math.PI/180),Dx===0?en.add(new ZRText({style:createTextStyle$1(ax,{text:Cx,x:Px,y:Fx,verticalAlign:bx<-.8?"top":bx>.8?"bottom":"middle",align:vx<-.4?"left":vx>.4?"right":"center"},{inheritColor:Tx}),silent:!0})):en.add(new ZRText({style:createTextStyle$1(ax,{text:Cx,x:Px,y:Fx,verticalAlign:"middle",align:"center"},{inheritColor:Tx}),silent:!0,originX:Px,originY:Fx,rotation:Dx}))}if(ix.get("show")&&xx!==ox){var Sx=ix.get("distance");Sx=Sx?Sx+ar:ar;for(var Ox=0;Ox<=lx;Ox++){vx=Math.cos(hx),bx=Math.sin(hx);var Lx=new Line$1({shape:{x1:vx*(cn-Sx)+tn,y1:bx*(cn-Sx)+on,x2:vx*(cn-dx-Sx)+tn,y2:bx*(cn-dx-Sx)+on},silent:!0,style:yx});yx.stroke==="auto"&&Lx.setStyle({stroke:c((xx+Ox/lx)/ox)}),en.add(Lx),hx+=ux}hx-=ux}else hx+=fx}},n.prototype._renderPointer=function(a,l,u,c,p,d,Q,Ct,ar){var en=this.group,tn=this._data,on=this._progressEls,cn=[],gn=a.get(["pointer","show"]),Cn=a.getModel("progress"),ex=Cn.get("show"),ix=a.getData(),ax=ix.mapDimension("value"),ox=+a.get("min"),lx=+a.get("max"),cx=[ox,lx],dx=[d,Q];function hx(ux,gx){var yx=ix.getItemModel(ux),_x=yx.getModel("pointer"),vx=parsePercent(_x.get("width"),p.r),bx=parsePercent(_x.get("length"),p.r),xx=a.get(["pointer","icon"]),Sx=_x.get("offsetCenter"),Ax=parsePercent(Sx[0],p.r),Cx=parsePercent(Sx[1],p.r),Tx=_x.get("keepAspect"),Px;return xx?Px=createSymbol$1(xx,Ax-vx/2,Cx-bx,vx,bx,null,Tx):Px=new PointerPath({shape:{angle:-Math.PI/2,width:vx,r:bx,x:Ax,y:Cx}}),Px.rotation=-(gx+Math.PI/2),Px.x=p.cx,Px.y=p.cy,Px}function fx(ux,gx){var yx=Cn.get("roundCap"),_x=yx?SausagePath:Sector,vx=Cn.get("overlap"),bx=vx?Cn.get("width"):ar/ix.count(),xx=vx?p.r-bx:p.r-(ux+1)*bx,Sx=vx?p.r:p.r-ux*bx,Ax=new _x({shape:{startAngle:d,endAngle:gx,cx:p.cx,cy:p.cy,clockwise:Ct,r0:xx,r:Sx}});return vx&&(Ax.z2=linearMap$2(ix.get(ax,ux),[ox,lx],[100,0],!0)),Ax}(ex||gn)&&(ix.diff(tn).add(function(ux){var gx=ix.get(ax,ux);if(gn){var yx=hx(ux,d);initProps(yx,{rotation:-((isNaN(+gx)?dx[0]:linearMap$2(gx,cx,dx,!0))+Math.PI/2)},a),en.add(yx),ix.setItemGraphicEl(ux,yx)}if(ex){var _x=fx(ux,d),vx=Cn.get("clip");initProps(_x,{shape:{endAngle:linearMap$2(gx,cx,dx,vx)}},a),en.add(_x),setCommonECData(a.seriesIndex,ix.dataType,ux,_x),cn[ux]=_x}}).update(function(ux,gx){var yx=ix.get(ax,ux);if(gn){var _x=tn.getItemGraphicEl(gx),vx=_x?_x.rotation:d,bx=hx(ux,vx);bx.rotation=vx,updateProps$1(bx,{rotation:-((isNaN(+yx)?dx[0]:linearMap$2(yx,cx,dx,!0))+Math.PI/2)},a),en.add(bx),ix.setItemGraphicEl(ux,bx)}if(ex){var xx=on[gx],Sx=xx?xx.shape.endAngle:d,Ax=fx(ux,Sx),Cx=Cn.get("clip");updateProps$1(Ax,{shape:{endAngle:linearMap$2(yx,cx,dx,Cx)}},a),en.add(Ax),setCommonECData(a.seriesIndex,ix.dataType,ux,Ax),cn[ux]=Ax}}).execute(),ix.each(function(ux){var gx=ix.getItemModel(ux),yx=gx.getModel("emphasis"),_x=yx.get("focus"),vx=yx.get("blurScope"),bx=yx.get("disabled");if(gn){var xx=ix.getItemGraphicEl(ux),Sx=ix.getItemVisual(ux,"style"),Ax=Sx.fill;if(xx instanceof ZRImage){var Cx=xx.style;xx.useStyle(extend({image:Cx.image,x:Cx.x,y:Cx.y,width:Cx.width,height:Cx.height},Sx))}else xx.useStyle(Sx),xx.type!=="pointer"&&xx.setColor(Ax);xx.setStyle(gx.getModel(["pointer","itemStyle"]).getItemStyle()),xx.style.fill==="auto"&&xx.setStyle("fill",c(linearMap$2(ix.get(ax,ux),cx,[0,1],!0))),xx.z2EmphasisLift=0,setStatesStylesFromModel(xx,gx),toggleHoverEmphasis(xx,_x,vx,bx)}if(ex){var Tx=cn[ux];Tx.useStyle(ix.getItemVisual(ux,"style")),Tx.setStyle(gx.getModel(["progress","itemStyle"]).getItemStyle()),Tx.z2EmphasisLift=0,setStatesStylesFromModel(Tx,gx),toggleHoverEmphasis(Tx,_x,vx,bx)}}),this._progressEls=cn)},n.prototype._renderAnchor=function(a,l){var u=a.getModel("anchor"),c=u.get("show");if(c){var p=u.get("size"),d=u.get("icon"),Q=u.get("offsetCenter"),Ct=u.get("keepAspect"),ar=createSymbol$1(d,l.cx-p/2+parsePercent(Q[0],l.r),l.cy-p/2+parsePercent(Q[1],l.r),p,p,null,Ct);ar.z2=u.get("showAbove")?1:0,ar.setStyle(u.getModel("itemStyle").getItemStyle()),this.group.add(ar)}},n.prototype._renderTitleAndDetail=function(a,l,u,c,p){var d=this,Q=a.getData(),Ct=Q.mapDimension("value"),ar=+a.get("min"),en=+a.get("max"),tn=new Group$3,on=[],cn=[],gn=a.isAnimationEnabled(),Cn=a.get(["pointer","showAbove"]);Q.diff(this._data).add(function(ex){on[ex]=new ZRText({silent:!0}),cn[ex]=new ZRText({silent:!0})}).update(function(ex,ix){on[ex]=d._titleEls[ix],cn[ex]=d._detailEls[ix]}).execute(),Q.each(function(ex){var ix=Q.getItemModel(ex),ax=Q.get(Ct,ex),ox=new Group$3,lx=c(linearMap$2(ax,[ar,en],[0,1],!0)),cx=ix.getModel("title");if(cx.get("show")){var dx=cx.get("offsetCenter"),hx=p.cx+parsePercent(dx[0],p.r),fx=p.cy+parsePercent(dx[1],p.r),ux=on[ex];ux.attr({z2:Cn?0:2,style:createTextStyle$1(cx,{x:hx,y:fx,text:Q.getName(ex),align:"center",verticalAlign:"middle"},{inheritColor:lx})}),ox.add(ux)}var gx=ix.getModel("detail");if(gx.get("show")){var yx=gx.get("offsetCenter"),_x=p.cx+parsePercent(yx[0],p.r),vx=p.cy+parsePercent(yx[1],p.r),bx=parsePercent(gx.get("width"),p.r),xx=parsePercent(gx.get("height"),p.r),Sx=a.get(["progress","show"])?Q.getItemVisual(ex,"style").fill:lx,ux=cn[ex],Ax=gx.get("formatter");ux.attr({z2:Cn?0:2,style:createTextStyle$1(gx,{x:_x,y:vx,text:formatLabel(ax,Ax),width:isNaN(bx)?null:bx,height:isNaN(xx)?null:xx,align:"center",verticalAlign:"middle"},{inheritColor:Sx})}),setLabelValueAnimation(ux,{normal:gx},ax,function(Tx){return formatLabel(Tx,Ax)}),gn&&animateLabelValue(ux,ex,Q,a,{getFormattedLabel:function(Tx,Px,Fx,Mx,Dx,Ox){return formatLabel(Ox?Ox.interpolatedValue:ax,Ax)}}),ox.add(ux)}tn.add(ox)}),this.group.add(tn),this._titleEls=on,this._detailEls=cn},n.type="gauge",n}(ChartView),GaugeSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="itemStyle",a}return n.prototype.getInitialData=function(a,l){return createSeriesDataSimply(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n}(SeriesModel);function install$E(t){t.registerChartView(GaugeView),t.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(t){__extends(n,t);function n(a,l){var u=t.call(this)||this,c=u,p=new Polyline$1,d=new ZRText;return c.setTextContent(d),u.setTextGuideLine(p),u.updateData(a,l,!0),u}return n.prototype.updateData=function(a,l,u){var c=this,p=a.hostModel,d=a.getItemModel(l),Q=a.getItemLayout(l),Ct=d.getModel("emphasis"),ar=d.get(opacityAccessPath$1);ar=ar??1,u||saveOldStyle(c),c.useStyle(a.getItemVisual(l,"style")),c.style.lineJoin="round",u?(c.setShape({points:Q.points}),c.style.opacity=0,initProps(c,{style:{opacity:ar}},p,l)):updateProps$1(c,{style:{opacity:ar},shape:{points:Q.points}},p,l),setStatesStylesFromModel(c,d),this._updateLabel(a,l),toggleHoverEmphasis(this,Ct.get("focus"),Ct.get("blurScope"),Ct.get("disabled"))},n.prototype._updateLabel=function(a,l){var u=this,c=this.getTextGuideLine(),p=u.getTextContent(),d=a.hostModel,Q=a.getItemModel(l),Ct=a.getItemLayout(l),ar=Ct.label,en=a.getItemVisual(l,"style"),tn=en.fill;setLabelStyle(p,getLabelStatesModels(Q),{labelFetcher:a.hostModel,labelDataIndex:l,defaultOpacity:en.opacity,defaultText:a.getName(l)},{normal:{align:ar.textAlign,verticalAlign:ar.verticalAlign}}),u.setTextConfig({local:!0,inside:!!ar.inside,insideStroke:tn,outsideFill:tn});var on=ar.linePoints;c.setShape({points:on}),u.textGuideLineConfig={anchor:on?new Point(on[0][0],on[0][1]):null},updateProps$1(p,{style:{x:ar.x,y:ar.y}},d,l),p.attr({rotation:ar.rotation,originX:ar.x,originY:ar.y,z2:10}),setLabelLineStyle(u,getLabelLineStatesModels(Q),{stroke:tn})},n}(Polygon),FunnelView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,l,u){var c=a.getData(),p=this._data,d=this.group;c.diff(p).add(function(Q){var Ct=new FunnelPiece(c,Q);c.setItemGraphicEl(Q,Ct),d.add(Ct)}).update(function(Q,Ct){var ar=p.getItemGraphicEl(Ct);ar.updateData(c,Q),d.add(ar),c.setItemGraphicEl(Q,ar)}).remove(function(Q){var Ct=p.getItemGraphicEl(Q);removeElementWithFadeOut(Ct,a,Q)}).execute(),this._data=c},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n}(ChartView),FunnelSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.getInitialData=function(a,l){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var l=a.labelLine,u=a.emphasis.labelLine;l.show=l.show&&a.label.show,u.show=u.show&&a.emphasis.label.show},n.prototype.getDataParams=function(a){var l=this.getData(),u=t.prototype.getDataParams.call(this,a),c=l.mapDimension("value"),p=l.getSum(c);return u.percent=p?+(l.get(c,a)/p*100).toFixed(2):0,u.$vars.push("percent"),u},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel);function getViewRect$2(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getSortedIndices(t,n){for(var a=t.mapDimension("value"),l=t.mapArray(a,function(Q){return Q}),u=[],c=n==="ascending",p=0,d=t.count();p<d;p++)u[p]=p;return isFunction$1(n)?u.sort(n):n!=="none"&&u.sort(function(Q,Ct){return c?l[Q]-l[Ct]:l[Ct]-l[Q]}),u}function labelLayout(t){var n=t.hostModel,a=n.get("orient");t.each(function(l){var u=t.getItemModel(l),c=u.getModel("label"),p=c.get("position"),d=u.getModel("labelLine"),Q=t.getItemLayout(l),Ct=Q.points,ar=p==="inner"||p==="inside"||p==="center"||p==="insideLeft"||p==="insideRight",en,tn,on,cn;if(ar)p==="insideLeft"?(tn=(Ct[0][0]+Ct[3][0])/2+5,on=(Ct[0][1]+Ct[3][1])/2,en="left"):p==="insideRight"?(tn=(Ct[1][0]+Ct[2][0])/2-5,on=(Ct[1][1]+Ct[2][1])/2,en="right"):(tn=(Ct[0][0]+Ct[1][0]+Ct[2][0]+Ct[3][0])/4,on=(Ct[0][1]+Ct[1][1]+Ct[2][1]+Ct[3][1])/4,en="center"),cn=[[tn,on],[tn,on]];else{var gn=void 0,Cn=void 0,ex=void 0,ix=void 0,ax=d.get("length");p==="left"?(gn=(Ct[3][0]+Ct[0][0])/2,Cn=(Ct[3][1]+Ct[0][1])/2,ex=gn-ax,tn=ex-5,en="right"):p==="right"?(gn=(Ct[1][0]+Ct[2][0])/2,Cn=(Ct[1][1]+Ct[2][1])/2,ex=gn+ax,tn=ex+5,en="left"):p==="top"?(gn=(Ct[3][0]+Ct[0][0])/2,Cn=(Ct[3][1]+Ct[0][1])/2,ix=Cn-ax,on=ix-5,en="center"):p==="bottom"?(gn=(Ct[1][0]+Ct[2][0])/2,Cn=(Ct[1][1]+Ct[2][1])/2,ix=Cn+ax,on=ix+5,en="center"):p==="rightTop"?(gn=a==="horizontal"?Ct[3][0]:Ct[1][0],Cn=a==="horizontal"?Ct[3][1]:Ct[1][1],a==="horizontal"?(ix=Cn-ax,on=ix-5,en="center"):(ex=gn+ax,tn=ex+5,en="top")):p==="rightBottom"?(gn=Ct[2][0],Cn=Ct[2][1],a==="horizontal"?(ix=Cn+ax,on=ix+5,en="center"):(ex=gn+ax,tn=ex+5,en="bottom")):p==="leftTop"?(gn=Ct[0][0],Cn=a==="horizontal"?Ct[0][1]:Ct[1][1],a==="horizontal"?(ix=Cn-ax,on=ix-5,en="center"):(ex=gn-ax,tn=ex-5,en="right")):p==="leftBottom"?(gn=a==="horizontal"?Ct[1][0]:Ct[3][0],Cn=a==="horizontal"?Ct[1][1]:Ct[2][1],a==="horizontal"?(ix=Cn+ax,on=ix+5,en="center"):(ex=gn-ax,tn=ex-5,en="right")):(gn=(Ct[1][0]+Ct[2][0])/2,Cn=(Ct[1][1]+Ct[2][1])/2,a==="horizontal"?(ix=Cn+ax,on=ix+5,en="center"):(ex=gn+ax,tn=ex+5,en="left")),a==="horizontal"?(ex=gn,tn=ex):(ix=Cn,on=ix),cn=[[gn,Cn],[ex,ix]]}Q.label={linePoints:cn,x:tn,y:on,verticalAlign:"middle",textAlign:en,inside:ar}})}function funnelLayout(t,n){t.eachSeriesByType("funnel",function(a){var l=a.getData(),u=l.mapDimension("value"),c=a.get("sort"),p=getViewRect$2(a,n),d=a.get("orient"),Q=p.width,Ct=p.height,ar=getSortedIndices(l,c),en=p.x,tn=p.y,on=d==="horizontal"?[parsePercent(a.get("minSize"),Ct),parsePercent(a.get("maxSize"),Ct)]:[parsePercent(a.get("minSize"),Q),parsePercent(a.get("maxSize"),Q)],cn=l.getDataExtent(u),gn=a.get("min"),Cn=a.get("max");gn==null&&(gn=Math.min(cn[0],0)),Cn==null&&(Cn=cn[1]);var ex=a.get("funnelAlign"),ix=a.get("gap"),ax=d==="horizontal"?Q:Ct,ox=(ax-ix*(l.count()-1))/l.count(),lx=function(vx,bx){if(d==="horizontal"){var xx=l.get(u,vx)||0,Sx=linearMap$2(xx,[gn,Cn],on,!0),Ax=void 0;switch(ex){case"top":Ax=tn;break;case"center":Ax=tn+(Ct-Sx)/2;break;case"bottom":Ax=tn+(Ct-Sx);break}return[[bx,Ax],[bx,Ax+Sx]]}var Cx=l.get(u,vx)||0,Tx=linearMap$2(Cx,[gn,Cn],on,!0),Px;switch(ex){case"left":Px=en;break;case"center":Px=en+(Q-Tx)/2;break;case"right":Px=en+Q-Tx;break}return[[Px,bx],[Px+Tx,bx]]};c==="ascending"&&(ox=-ox,ix=-ix,d==="horizontal"?en+=Q:tn+=Ct,ar=ar.reverse());for(var cx=0;cx<ar.length;cx++){var dx=ar[cx],hx=ar[cx+1],fx=l.getItemModel(dx);if(d==="horizontal"){var ux=fx.get(["itemStyle","width"]);ux==null?ux=ox:(ux=parsePercent(ux,Q),c==="ascending"&&(ux=-ux));var gx=lx(dx,en),yx=lx(hx,en+ux);en+=ux+ix,l.setItemLayout(dx,{points:gx.concat(yx.slice().reverse())})}else{var _x=fx.get(["itemStyle","height"]);_x==null?_x=ox:(_x=parsePercent(_x,Ct),c==="ascending"&&(_x=-_x));var gx=lx(dx,tn),yx=lx(hx,tn+_x);tn+=_x+ix,l.setItemLayout(dx,{points:gx.concat(yx.slice().reverse())})}}labelLayout(l)})}function install$D(t){t.registerChartView(FunnelView),t.registerSeriesModel(FunnelSeriesModel),t.registerLayout(funnelLayout),t.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._dataGroup=new Group$3,a._initialized=!1,a}return n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(a,l,u,c){this._progressiveEls=null;var p=this._dataGroup,d=a.getData(),Q=this._data,Ct=a.coordinateSystem,ar=Ct.dimensions,en=makeSeriesScope(a);d.diff(Q).add(tn).update(on).remove(cn).execute();function tn(Cn){var ex=addEl(d,p,Cn,ar,Ct);updateElCommon(ex,d,Cn,en)}function on(Cn,ex){var ix=Q.getItemGraphicEl(ex),ax=createLinePoints(d,Cn,ar,Ct);d.setItemGraphicEl(Cn,ix),updateProps$1(ix,{shape:{points:ax}},a,Cn),saveOldStyle(ix),updateElCommon(ix,d,Cn,en)}function cn(Cn){var ex=Q.getItemGraphicEl(Cn);p.remove(ex)}if(!this._initialized){this._initialized=!0;var gn=createGridClipShape$2(Ct,a,function(){setTimeout(function(){p.removeClipPath()})});p.setClipPath(gn)}this._data=d},n.prototype.incrementalPrepareRender=function(a,l,u){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(a,l,u){for(var c=l.getData(),p=l.coordinateSystem,d=p.dimensions,Q=makeSeriesScope(l),Ct=this._progressiveEls=[],ar=a.start;ar<a.end;ar++){var en=addEl(c,this._dataGroup,ar,d,p);en.incremental=!0,updateElCommon(en,c,ar,Q),Ct.push(en)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n}(ChartView);function createGridClipShape$2(t,n,a){var l=t.model,u=t.getRect(),c=new Rect$2({shape:{x:u.x,y:u.y,width:u.width,height:u.height}}),p=l.get("layout")==="horizontal"?"width":"height";return c.setShape(p,0),initProps(c,{shape:{width:u.width,height:u.height}},n,a),c}function createLinePoints(t,n,a,l){for(var u=[],c=0;c<a.length;c++){var p=a[c],d=t.get(t.mapDimension(p),n);isEmptyValue(d,l.getAxis(p).type)||u.push(l.dataToPoint(d,p))}return u}function addEl(t,n,a,l,u){var c=createLinePoints(t,a,l,u),p=new Polyline$1({shape:{points:c},z2:10});return n.add(p),t.setItemGraphicEl(a,p),p}function makeSeriesScope(t){var n=t.get("smooth",!0);return n===!0&&(n=DEFAULT_SMOOTH),n=numericToNumber(n),eqNaN(n)&&(n=0),{smooth:n}}function updateElCommon(t,n,a,l){t.useStyle(n.getItemVisual(a,"style")),t.style.fill=null,t.setShape("smooth",l.smooth);var u=n.getItemModel(a),c=u.getModel("emphasis");setStatesStylesFromModel(t,u,"lineStyle"),toggleHoverEmphasis(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function isEmptyValue(t,n){return n==="category"?t==null:t==null||isNaN(t)}var ParallelSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.getInitialData=function(a,l){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},n.prototype.getRawIndicesByActiveState=function(a){var l=this.coordinateSystem,u=this.getData(),c=[];return l.eachActiveState(u,function(p,d){a===p&&c.push(u.getRawIndex(d))}),c},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n}(SeriesModel);function makeDefaultEncode(t){var n=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(n){var a={};return each$f(n.dimensions,function(l){var u=convertDimNameToNumber(l);a[l]=u}),a}}function convertDimNameToNumber(t){return+t.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(t,n){var a=t.coordinateSystem,l={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(u,c){a.eachActiveState(c,function(p,d){var Q=l[p];if(p==="normal"&&c.hasItemOption){var Ct=c.getItemModel(d).get(opacityAccessPath,!0);Ct!=null&&(Q=Ct)}var ar=c.ensureUniqueItemVisual(d,"style");ar.opacity=Q},u.start,u.end)}}}};function parallelPreprocessor(t){createParallelIfNeeded(t),mergeAxisOptionFromParallel(t)}function createParallelIfNeeded(t){if(!t.parallel){var n=!1;each$f(t.series,function(a){a&&a.type==="parallel"&&(n=!0)}),n&&(t.parallel=[{}])}}function mergeAxisOptionFromParallel(t){var n=normalizeToArray(t.parallelAxis);each$f(n,function(a){if(isObject$3(a)){var l=a.parallelIndex||0,u=normalizeToArray(t.parallel)[l];u&&u.parallelAxisDefault&&merge(a,u.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){this._model=a,this._api=u,this._handlers||(this._handlers={},each$f(handlers$1,function(c,p){u.getZr().on(p,this._handlers[p]=bind$1(c,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(a,l){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(u,c){l.getZr().off(c,u)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},n.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},a))},n.type="parallel",n}(ComponentView),handlers$1={mousedown:function(t){checkTrigger(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var n=this._mouseDownPoint;if(checkTrigger(this,"click")&&n){var a=[t.offsetX,t.offsetY],l=Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2);if(l>CLICK_THRESHOLD)return;var u=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);u.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:u.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var n=this._model,a=n.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),l=a.behavior;l==="jump"&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand(l==="none"?null:{axisExpandWindow:a.axisExpandWindow,animation:l==="jump"?null:{duration:0}})}}};function checkTrigger(t,n){var a=t._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===n}var ParallelModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(a){var l=this.option;a&&merge(l,a,!0),this._initDimensions()},n.prototype.contains=function(a,l){var u=a.get("parallelIndex");return u!=null&&l.getComponent("parallel",u)===this},n.prototype.setAxisExpand=function(a){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(l){a.hasOwnProperty(l)&&(this.option[l]=a[l])},this)},n.prototype._initDimensions=function(){var a=this.dimensions=[],l=this.parallelAxisIndex=[],u=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(c){return(c.get("parallelIndex")||0)===this.componentIndex},this);each$f(u,function(c){a.push("dim"+c.get("dim")),l.push(c.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n}(ComponentModel),ParallelAxis=function(t){__extends(n,t);function n(a,l,u,c,p){var d=t.call(this,a,l,u)||this;return d.type=c||"value",d.axisIndex=p,d}return n.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},n}(Axis);function sliderMove(t,n,a,l,u,c){t=t||0;var p=a[1]-a[0];if(u!=null&&(u=restrict$1(u,[0,p])),c!=null&&(c=Math.max(c,u??0)),l==="all"){var d=Math.abs(n[1]-n[0]);d=restrict$1(d,[0,p]),u=c=restrict$1(d,[u,c]),l=0}n[0]=restrict$1(n[0],a),n[1]=restrict$1(n[1],a);var Q=getSpanSign(n,l);n[l]+=t;var Ct=u||0,ar=a.slice();Q.sign<0?ar[0]+=Ct:ar[1]-=Ct,n[l]=restrict$1(n[l],ar);var en;return en=getSpanSign(n,l),u!=null&&(en.sign!==Q.sign||en.span<u)&&(n[1-l]=n[l]+Q.sign*u),en=getSpanSign(n,l),c!=null&&en.span>c&&(n[1-l]=n[l]+en.sign*c),n}function getSpanSign(t,n){var a=t[n]-t[1-n];return{span:Math.abs(a),sign:a>0?-1:a<0?1:n?-1:1}}function restrict$1(t,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,t))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function t(n,a,l){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,a,l)}return t.prototype._init=function(n,a,l){var u=n.dimensions,c=n.parallelAxisIndex;each$a(u,function(p,d){var Q=c[d],Ct=a.getComponent("parallelAxis",Q),ar=this._axesMap.set(p,new ParallelAxis(p,createScaleByModel$1(Ct),[0,0],Ct.get("type"),Q)),en=ar.type==="category";ar.onBand=en&&Ct.get("boundaryGap"),ar.inverse=Ct.get("inverse"),Ct.axis=ar,ar.model=Ct,ar.coordinateSystem=Ct.coordinateSystem=this},this)},t.prototype.update=function(n,a){this._updateAxesFromSeries(this._model,n)},t.prototype.containPoint=function(n){var a=this._makeLayoutInfo(),l=a.axisBase,u=a.layoutBase,c=a.pixelDimIndex,p=n[1-c],d=n[c];return p>=l&&p<=l+a.axisLength&&d>=u&&d<=u+a.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(n,a){a.eachSeries(function(l){if(n.contains(l,a)){var u=l.getData();each$a(this.dimensions,function(c){var p=this._axesMap.get(c);p.scale.unionExtentFromData(u,u.mapDimension(c)),niceScaleExtent(p.scale,p.model)},this)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var n=this._model,a=this._rect,l=["x","y"],u=["width","height"],c=n.get("layout"),p=c==="horizontal"?0:1,d=a[u[p]],Q=[0,d],Ct=this.dimensions.length,ar=restrict(n.get("axisExpandWidth"),Q),en=restrict(n.get("axisExpandCount")||0,[0,Ct]),tn=n.get("axisExpandable")&&Ct>3&&Ct>en&&en>1&&ar>0&&d>0,on=n.get("axisExpandWindow"),cn;if(on)cn=restrict(on[1]-on[0],Q),on[1]=on[0]+cn;else{cn=restrict(ar*(en-1),Q);var gn=n.get("axisExpandCenter")||mathFloor(Ct/2);on=[ar*gn-cn/2],on[1]=on[0]+cn}var Cn=(d-cn)/(Ct-en);Cn<3&&(Cn=0);var ex=[mathFloor(round(on[0]/ar,1))+1,mathCeil(round(on[1]/ar,1))-1],ix=Cn/ar*on[0];return{layout:c,pixelDimIndex:p,layoutBase:a[l[p]],layoutLength:d,axisBase:a[l[1-p]],axisLength:a[u[1-p]],axisExpandable:tn,axisExpandWidth:ar,axisCollapseWidth:Cn,axisExpandWindow:on,axisCount:Ct,winInnerIndices:ex,axisExpandWindow0Pos:ix}},t.prototype._layoutAxes=function(){var n=this._rect,a=this._axesMap,l=this.dimensions,u=this._makeLayoutInfo(),c=u.layout;a.each(function(p){var d=[0,u.axisLength],Q=p.inverse?1:0;p.setExtent(d[Q],d[1-Q])}),each$a(l,function(p,d){var Q=(u.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(d,u),Ct={horizontal:{x:Q.position,y:u.axisLength},vertical:{x:0,y:Q.position}},ar={horizontal:PI$1/2,vertical:0},en=[Ct[c].x+n.x,Ct[c].y+n.y],tn=ar[c],on=create$1();rotate(on,on,tn),translate(on,on,en),this._axesLayout[p]={position:en,rotation:tn,transform:on,axisNameAvailableWidth:Q.axisNameAvailableWidth,axisLabelShow:Q.axisLabelShow,nameTruncateMaxWidth:Q.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(n){return this._axesMap.get(n)},t.prototype.dataToPoint=function(n,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(n),a)},t.prototype.eachActiveState=function(n,a,l,u){l==null&&(l=0),u==null&&(u=n.count());var c=this._axesMap,p=this.dimensions,d=[],Q=[];each$f(p,function(Cn){d.push(n.mapDimension(Cn)),Q.push(c.get(Cn).model)});for(var Ct=this.hasAxisBrushed(),ar=l;ar<u;ar++){var en=void 0;if(!Ct)en="normal";else{en="active";for(var tn=n.getValues(d,ar),on=0,cn=p.length;on<cn;on++){var gn=Q[on].getActiveState(tn[on]);if(gn==="inactive"){en="inactive";break}}}a(en,ar)}},t.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,a=this._axesMap,l=!1,u=0,c=n.length;u<c;u++)a.get(n[u]).model.getActiveState()!=="normal"&&(l=!0);return l},t.prototype.axisCoordToPoint=function(n,a){var l=this._axesLayout[a];return applyTransform([n,0],l.transform)},t.prototype.getAxisLayout=function(n){return clone$4(this._axesLayout[n])},t.prototype.getSlidedAxisExpandWindow=function(n){var a=this._makeLayoutInfo(),l=a.pixelDimIndex,u=a.axisExpandWindow.slice(),c=u[1]-u[0],p=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:u};var d=n[l]-a.layoutBase-a.axisExpandWindow0Pos,Q,Ct="slide",ar=a.axisCollapseWidth,en=this._model.get("axisExpandSlideTriggerArea"),tn=en[0]!=null;if(ar)tn&&ar&&d<c*en[0]?(Ct="jump",Q=d-c*en[2]):tn&&ar&&d>c*(1-en[0])?(Ct="jump",Q=d-c*(1-en[2])):(Q=d-c*en[1])>=0&&(Q=d-c*(1-en[1]))<=0&&(Q=0),Q*=a.axisExpandWidth/ar,Q?sliderMove(Q,u,p,"all"):Ct="none";else{var on=u[1]-u[0],cn=p[1]*d/on;u=[mathMax$2(0,cn-on/2)],u[1]=mathMin$2(p[1],u[0]+on),u[0]=u[1]-on}return{axisExpandWindow:u,behavior:Ct}},t}();function restrict(t,n){return mathMin$2(mathMax$2(t,n[0]),n[1])}function layoutAxisWithoutExpand(t,n){var a=n.layoutLength/(n.axisCount-1);return{position:a*t,axisNameAvailableWidth:a,axisLabelShow:!0}}function layoutAxisWithExpand(t,n){var a=n.layoutLength,l=n.axisExpandWidth,u=n.axisCount,c=n.axisCollapseWidth,p=n.winInnerIndices,d,Q=c,Ct=!1,ar;return t<p[0]?(d=t*c,ar=c):t<=p[1]?(d=n.axisExpandWindow0Pos+t*l-n.axisExpandWindow[0],Q=l,Ct=!0):(d=a-(u-1-t)*c,ar=c),{position:d,axisNameAvailableWidth:Q,axisLabelShow:Ct,nameTruncateMaxWidth:ar}}function createParallelCoordSys(t,n){var a=[];return t.eachComponent("parallel",function(l,u){var c=new Parallel(l,t,n);c.name="parallel_"+u,c.resize(l,n),l.coordinateSystem=c,c.model=l,a.push(c)}),t.eachSeries(function(l){if(l.get("coordinateSystem")==="parallel"){var u=l.getReferringComponents("parallel",SINGLE_REFERRING).models[0];l.coordinateSystem=u.coordinateSystem}}),a}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.activeIntervals=[],a}return n.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(a){var l=this.activeIntervals=clone$4(a);if(l)for(var u=l.length-1;u>=0;u--)asc$2(l[u])},n.prototype.getActiveState=function(a){var l=this.activeIntervals;if(!l.length)return"normal";if(a==null||isNaN(+a))return"inactive";if(l.length===1){var u=l[0];if(u[0]<=a&&a<=u[1])return"active"}else for(var c=0,p=l.length;c<p;c++)if(l[c][0]<=a&&a<=l[c][1])return"active";return"inactive"},n}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(t){__extends(n,t);function n(a){var l=t.call(this)||this;return l._track=[],l._covers=[],l._handlers={},l._zr=a,l.group=new Group$3,l._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(u,c){this._handlers[c]=bind$1(u,this)},l),l}return n.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},n.prototype._doEnableBrush=function(a){var l=this._zr;this._enableGlobalPan||take(l,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(u,c){l.on(c,u)}),this._brushType=a.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),a,!0)},n.prototype._doDisableBrush=function(){var a=this._zr;release(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,u){a.off(u,l)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(a){if(a&&a.length){var l=this._panels={};each$f(a,function(u){l[u.panelId]=clone$4(u)})}else this._panels=null;return this},n.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var l=this.group;return this._zr.add(l),l.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=l.getLocalTransform(),this},n.prototype.updateCovers=function(a){a=map$1(a,function(tn){return merge(clone$4(DEFAULT_BRUSH_OPT),tn,!0)});var l="\0-brush-index-",u=this._covers,c=this._covers=[],p=this,d=this._creatingCover;return new DataDiffer(u,a,Ct,Q).add(ar).update(ar).remove(en).execute(),this;function Q(tn,on){return(tn.id!=null?tn.id:l+on)+"-"+tn.brushType}function Ct(tn,on){return Q(tn.__brushOption,on)}function ar(tn,on){var cn=a[tn];if(on!=null&&u[on]===d)c[tn]=u[on];else{var gn=c[tn]=on!=null?(u[on].__brushOption=cn,u[on]):endCreating(p,createCover(p,cn));updateCoverAfterCreation(p,gn)}}function en(tn){u[tn]!==d&&p.group.remove(u[tn])}},n.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(Eventful);function createCover(t,n){var a=coverRenderers[n.brushType].createCover(t,n);return a.__brushOption=n,updateZ$1(a,n),t.group.add(a),a}function endCreating(t,n){var a=getCoverRenderer(n);return a.endCreating&&(a.endCreating(t,n),updateZ$1(n,n.__brushOption)),n}function updateCoverShape(t,n){var a=n.__brushOption;getCoverRenderer(n).updateCoverShape(t,n,a.range,a)}function updateZ$1(t,n){var a=n.z;a==null&&(a=COVER_Z),t.traverse(function(l){l.z=a,l.z2=a})}function updateCoverAfterCreation(t,n){getCoverRenderer(n).updateCommon(t,n),updateCoverShape(t,n)}function getCoverRenderer(t){return coverRenderers[t.__brushOption.brushType]}function getPanelByPoint(t,n,a){var l=t._panels;if(!l)return BRUSH_PANEL_GLOBAL;var u,c=t._transform;return each$f(l,function(p){p.isTargetByCursor(n,a,c)&&(u=p)}),u}function getPanelByCover(t,n){var a=t._panels;if(!a)return BRUSH_PANEL_GLOBAL;var l=n.__brushOption.panelId;return l!=null?a[l]:BRUSH_PANEL_GLOBAL}function clearCovers(t){var n=t._covers,a=n.length;return each$f(n,function(l){t.group.remove(l)},t),n.length=0,!!a}function trigger(t,n){var a=map$1(t._covers,function(l){var u=l.__brushOption,c=clone$4(u.range);return{brushType:u.brushType,panelId:u.panelId,range:c}});t.trigger("brush",{areas:a,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function shouldShowCover(t){var n=t._track;if(!n.length)return!1;var a=n[n.length-1],l=n[0],u=a[0]-l[0],c=a[1]-l[1],p=mathPow(u*u+c*c,.5);return p>UNSELECT_THRESHOLD}function getTrackEnds(t){var n=t.length-1;return n<0&&(n=0),[t[0],t[n]]}function createBaseRectCover(t,n,a,l){var u=new Group$3;return u.add(new Rect$2({name:"main",style:makeStyle(a),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,t,n,u,["n","s","w","e"]),ondragend:curry$1(trigger,n,{isEnd:!0})})),each$f(l,function(c){u.add(new Rect$2({name:c.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,t,n,u,c),ondragend:curry$1(trigger,n,{isEnd:!0})}))}),u}function updateBaseRect(t,n,a,l){var u=l.brushStyle.lineWidth||0,c=mathMax$1(u,MIN_RESIZE_LINE_WIDTH),p=a[0][0],d=a[1][0],Q=p-u/2,Ct=d-u/2,ar=a[0][1],en=a[1][1],tn=ar-c+u/2,on=en-c+u/2,cn=ar-p,gn=en-d,Cn=cn+u,ex=gn+u;updateRectShape(t,n,"main",p,d,cn,gn),l.transformable&&(updateRectShape(t,n,"w",Q,Ct,c,ex),updateRectShape(t,n,"e",tn,Ct,c,ex),updateRectShape(t,n,"n",Q,Ct,Cn,c),updateRectShape(t,n,"s",Q,on,Cn,c),updateRectShape(t,n,"nw",Q,Ct,c,c),updateRectShape(t,n,"ne",tn,Ct,c,c),updateRectShape(t,n,"sw",Q,on,c,c),updateRectShape(t,n,"se",tn,on,c,c))}function updateCommon$1(t,n){var a=n.__brushOption,l=a.transformable,u=n.childAt(0);u.useStyle(makeStyle(a)),u.attr({silent:!l,cursor:l?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(c){var p=n.childOfName(c.join("")),d=c.length===1?getGlobalDirection1(t,c[0]):getGlobalDirection2(t,c);p&&p.attr({silent:!l,invisible:!l,cursor:l?CURSOR_MAP[d]+"-resize":null})})}function updateRectShape(t,n,a,l,u,c,p){var d=n.childOfName(a);d&&d.setShape(pointsToRect(clipByPanel(t,n,[[l,u],[l+c,u+p]])))}function makeStyle(t){return defaults({strokeNoScale:!0},t.brushStyle)}function formatRectRange(t,n,a,l){var u=[mathMin$1(t,a),mathMin$1(n,l)],c=[mathMax$1(t,a),mathMax$1(n,l)];return[[u[0],c[0]],[u[1],c[1]]]}function getTransform(t){return getTransform$1(t.group)}function getGlobalDirection1(t,n){var a={w:"left",e:"right",n:"top",s:"bottom"},l={left:"w",right:"e",top:"n",bottom:"s"},u=transformDirection(a[n],getTransform(t));return l[u]}function getGlobalDirection2(t,n){var a=[getGlobalDirection1(t,n[0]),getGlobalDirection1(t,n[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function driftRect(t,n,a,l,u,c){var p=a.__brushOption,d=t.toRectRange(p.range),Q=toLocalDelta(n,u,c);each$f(l,function(Ct){var ar=DIRECTION_MAP[Ct];d[ar[0]][ar[1]]+=Q[ar[0]]}),p.range=t.fromRectRange(formatRectRange(d[0][0],d[1][0],d[0][1],d[1][1])),updateCoverAfterCreation(n,a),trigger(n,{isEnd:!1})}function driftPolygon(t,n,a,l){var u=n.__brushOption.range,c=toLocalDelta(t,a,l);each$f(u,function(p){p[0]+=c[0],p[1]+=c[1]}),updateCoverAfterCreation(t,n),trigger(t,{isEnd:!1})}function toLocalDelta(t,n,a){var l=t.group,u=l.transformCoordToLocal(n,a),c=l.transformCoordToLocal(0,0);return[u[0]-c[0],u[1]-c[1]]}function clipByPanel(t,n,a){var l=getPanelByCover(t,n);return l&&l!==BRUSH_PANEL_GLOBAL?l.clipPath(a,t._transform):clone$4(a)}function pointsToRect(t){var n=mathMin$1(t[0][0],t[1][0]),a=mathMin$1(t[0][1],t[1][1]),l=mathMax$1(t[0][0],t[1][0]),u=mathMax$1(t[0][1],t[1][1]);return{x:n,y:a,width:l-n,height:u-a}}function resetCursor(t,n,a){if(!(!t._brushType||isOutsideZrArea(t,n.offsetX,n.offsetY))){var l=t._zr,u=t._covers,c=getPanelByPoint(t,n,a);if(!t._dragging)for(var p=0;p<u.length;p++){var d=u[p].__brushOption;if(c&&(c===BRUSH_PANEL_GLOBAL||d.panelId===c.panelId)&&coverRenderers[d.brushType].contain(u[p],a[0],a[1]))return}c&&l.setCursorStyle("crosshair")}}function preventDefault(t){var n=t.event;n.preventDefault&&n.preventDefault()}function mainShapeContain(t,n,a){return t.childOfName("main").contain(n,a)}function updateCoverByMouse(t,n,a,l){var u=t._creatingCover,c=t._creatingPanel,p=t._brushOption,d;if(t._track.push(a.slice()),shouldShowCover(t)||u){if(c&&!u){p.brushMode==="single"&&clearCovers(t);var Q=clone$4(p);Q.brushType=determineBrushType(Q.brushType,c),Q.panelId=c===BRUSH_PANEL_GLOBAL?null:c.panelId,u=t._creatingCover=createCover(t,Q),t._covers.push(u)}if(u){var Ct=coverRenderers[determineBrushType(t._brushType,c)],ar=u.__brushOption;ar.range=Ct.getCreatingRange(clipByPanel(t,u,t._track)),l&&(endCreating(t,u),Ct.updateCommon(t,u)),updateCoverShape(t,u),d={isEnd:l}}}else l&&p.brushMode==="single"&&p.removeOnClick&&getPanelByPoint(t,n,a)&&clearCovers(t)&&(d={isEnd:l,removeOnClick:!0});return d}function determineBrushType(t,n){return t==="auto"?n.defaultBrushType:t}var pointerHandlers={mousedown:function(t){if(this._dragging)handleDragEnd(this,t);else if(!t.target||!t.target.draggable){preventDefault(t);var n=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=getPanelByPoint(this,t,n);a&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(t){var n=t.offsetX,a=t.offsetY,l=this.group.transformCoordToLocal(n,a);if(resetCursor(this,t,l),this._dragging){preventDefault(t);var u=updateCoverByMouse(this,t,l,!1);u&&trigger(this,u)}},mouseup:function(t){handleDragEnd(this,t)}};function handleDragEnd(t,n){if(t._dragging){preventDefault(n);var a=n.offsetX,l=n.offsetY,u=t.group.transformCoordToLocal(a,l),c=updateCoverByMouse(t,n,u,!0);t._dragging=!1,t._track=[],t._creatingCover=null,c&&trigger(t,c)}}function isOutsideZrArea(t,n,a){var l=t._zr;return n<0||n>l.getWidth()||a<0||a>l.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(t,n){function a(l){return l}return createBaseRectCover({toRectRange:a,fromRectRange:a},t,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var n=getTrackEnds(t);return formatRectRange(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(t,n,a,l){updateBaseRect(t,n,a,l)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(t,n){var a=new Group$3;return a.add(new Polyline$1({name:"main",style:makeStyle(n),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,n){n.remove(n.childAt(0)),n.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,t,n),ondragend:curry$1(trigger,t,{isEnd:!0})}))},updateCoverShape:function(t,n,a,l){n.childAt(0).setShape({points:clipByPanel(t,n,a)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(t){return{createCover:function(n,a){return createBaseRectCover({toRectRange:function(l){var u=[l,[0,100]];return t&&u.reverse(),u},fromRectRange:function(l){return l[t]}},n,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(n){var a=getTrackEnds(n),l=mathMin$1(a[0][t],a[1][t]),u=mathMax$1(a[0][t],a[1][t]);return[l,u]},updateCoverShape:function(n,a,l,u){var c,p=getPanelByCover(n,a);if(p!==BRUSH_PANEL_GLOBAL&&p.getLinearBrushOtherExtent)c=p.getLinearBrushOtherExtent(t);else{var d=n._zr;c=[0,[d.getWidth(),d.getHeight()][1-t]]}var Q=[l,c];t&&Q.reverse(),updateBaseRect(n,a,Q,u)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(t){return t=normalizeRect(t),function(n){return clipPointsByRect(n,t)}}function makeLinearBrushOtherExtent(t,n){return t=normalizeRect(t),function(a){var l=n??a,u=l?t.width:t.height,c=l?t.x:t.y;return[c,c+(u||0)]}}function makeRectIsTargetByCursor(t,n,a){var l=normalizeRect(t);return function(u,c){return l.contain(c[0],c[1])&&!onIrrelevantElement(u,n,a)}}function normalizeRect(t){return BoundingRect.create(t)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l){t.prototype.init.apply(this,arguments),(this._brushController=new BrushController(l.getZr())).on("brush",bind$1(this._onBrush,this))},n.prototype.render=function(a,l,u,c){if(!fromAxisAreaSelect(a,l,c)){this.axisModel=a,this.api=u,this.group.removeAll();var p=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var d=getCoordSysModel(a,l),Q=d.coordinateSystem,Ct=a.getAreaSelectStyle(),ar=Ct.width,en=a.axis.dim,tn=Q.getAxisLayout(en),on=extend({strokeContainThreshold:ar},tn),cn=new AxisBuilder(a,on);each$f(elementList$1,cn.add,cn),this._axisGroup.add(cn.getGroup()),this._refreshBrushController(on,Ct,a,d,ar,u),groupTransition(p,this._axisGroup,a)}}},n.prototype._refreshBrushController=function(a,l,u,c,p,d){var Q=u.axis.getExtent(),Ct=Q[1]-Q[0],ar=Math.min(30,Math.abs(Ct)*.1),en=BoundingRect.create({x:Q[0],y:-p/2,width:Ct,height:p});en.x-=ar,en.width+=2*ar,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(en),isTargetByCursor:makeRectIsTargetByCursor(en,d,c),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(en,0)}]).enableBrush({brushType:"lineX",brushStyle:l,removeOnClick:!0}).updateCovers(getCoverInfoList(u))},n.prototype._onBrush=function(a){var l=a.areas,u=this.axisModel,c=u.axis,p=map$1(l,function(d){return[c.coordToData(d.range[0],!0),c.coordToData(d.range[1],!0)]});(!u.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:u.id,intervals:p})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n}(ComponentView);function fromAxisAreaSelect(t,n,a){return a&&a.type==="axisAreaSelect"&&n.findComponents({mainType:"parallelAxis",query:a})[0]===t}function getCoverInfoList(t){var n=t.axis;return map$1(t.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(a[0],!0),n.dataToCoord(a[1],!0)]}})}function getCoordSysModel(t,n){return n.getComponent("parallel",t.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(t){t.registerAction(actionInfo,function(n,a){a.eachComponent({mainType:"parallelAxis",query:n},function(l){l.axis.model.setActiveIntervals(n.intervals)})}),t.registerAction("parallelAxisExpand",function(n,a){a.eachComponent({mainType:"parallel",query:n},function(l){l.setAxisExpand(n)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(t){t.registerComponentView(ParallelView),t.registerComponentModel(ParallelModel),t.registerCoordinateSystem("parallel",parallelCoordSysCreator),t.registerPreprocessor(parallelPreprocessor),t.registerComponentModel(ParallelAxisModel),t.registerComponentView(ParallelAxisView),axisModelCreator(t,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(t)}function install$B(t){use(install$C),t.registerChartView(ParallelView$1),t.registerSeriesModel(ParallelSeriesModel),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),SankeyPath=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SankeyPathShape},n.prototype.buildPath=function(a,l){var u=l.extent;a.moveTo(l.x1,l.y1),a.bezierCurveTo(l.cpx1,l.cpy1,l.cpx2,l.cpy2,l.x2,l.y2),l.orient==="vertical"?(a.lineTo(l.x2+u,l.y2),a.bezierCurveTo(l.cpx2+u,l.cpy2,l.cpx1+u,l.cpy1,l.x1+u,l.y1)):(a.lineTo(l.x2,l.y2+u),a.bezierCurveTo(l.cpx2,l.cpy2+u,l.cpx1,l.cpy1+u,l.x1,l.y1+u)),a.closePath()},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n}(Path),SankeyView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._focusAdjacencyDisabled=!1,a}return n.prototype.render=function(a,l,u){var c=this,p=a.getGraph(),d=this.group,Q=a.layoutInfo,Ct=Q.width,ar=Q.height,en=a.getData(),tn=a.getData("edge"),on=a.get("orient");this._model=a,d.removeAll(),d.x=Q.x,d.y=Q.y,p.eachEdge(function(cn){var gn=new SankeyPath,Cn=getECData(gn);Cn.dataIndex=cn.dataIndex,Cn.seriesIndex=a.seriesIndex,Cn.dataType="edge";var ex=cn.getModel(),ix=ex.getModel("lineStyle"),ax=ix.get("curveness"),ox=cn.node1.getLayout(),lx=cn.node1.getModel(),cx=lx.get("localX"),dx=lx.get("localY"),hx=cn.node2.getLayout(),fx=cn.node2.getModel(),ux=fx.get("localX"),gx=fx.get("localY"),yx=cn.getLayout(),_x,vx,bx,xx,Sx,Ax,Cx,Tx;gn.shape.extent=Math.max(1,yx.dy),gn.shape.orient=on,on==="vertical"?(_x=(cx!=null?cx*Ct:ox.x)+yx.sy,vx=(dx!=null?dx*ar:ox.y)+ox.dy,bx=(ux!=null?ux*Ct:hx.x)+yx.ty,xx=gx!=null?gx*ar:hx.y,Sx=_x,Ax=vx*(1-ax)+xx*ax,Cx=bx,Tx=vx*ax+xx*(1-ax)):(_x=(cx!=null?cx*Ct:ox.x)+ox.dx,vx=(dx!=null?dx*ar:ox.y)+yx.sy,bx=ux!=null?ux*Ct:hx.x,xx=(gx!=null?gx*ar:hx.y)+yx.ty,Sx=_x*(1-ax)+bx*ax,Ax=vx,Cx=_x*ax+bx*(1-ax),Tx=xx),gn.setShape({x1:_x,y1:vx,x2:bx,y2:xx,cpx1:Sx,cpy1:Ax,cpx2:Cx,cpy2:Tx}),gn.useStyle(ix.getItemStyle()),applyCurveStyle(gn.style,on,cn);var Px=""+ex.get("value"),Fx=getLabelStatesModels(ex,"edgeLabel");setLabelStyle(gn,Fx,{labelFetcher:{getFormattedLabel:function(Ox,Lx,Nx,Gx,Ux,Hx){return a.getFormattedLabel(Ox,Lx,"edge",Gx,retrieve3(Ux,Fx.normal&&Fx.normal.get("formatter"),Px),Hx)}},labelDataIndex:cn.dataIndex,defaultText:Px}),gn.setTextConfig({position:"inside"});var Mx=ex.getModel("emphasis");setStatesStylesFromModel(gn,ex,"lineStyle",function(Ox){var Lx=Ox.getItemStyle();return applyCurveStyle(Lx,on,cn),Lx}),d.add(gn),tn.setItemGraphicEl(cn.dataIndex,gn);var Dx=Mx.get("focus");toggleHoverEmphasis(gn,Dx==="adjacency"?cn.getAdjacentDataIndices():Dx==="trajectory"?cn.getTrajectoryDataIndices():Dx,Mx.get("blurScope"),Mx.get("disabled"))}),p.eachNode(function(cn){var gn=cn.getLayout(),Cn=cn.getModel(),ex=Cn.get("localX"),ix=Cn.get("localY"),ax=Cn.getModel("emphasis"),ox=Cn.get(["itemStyle","borderRadius"])||0,lx=new Rect$2({shape:{x:ex!=null?ex*Ct:gn.x,y:ix!=null?ix*ar:gn.y,width:gn.dx,height:gn.dy,r:ox},style:Cn.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(lx,getLabelStatesModels(Cn),{labelFetcher:{getFormattedLabel:function(dx,hx){return a.getFormattedLabel(dx,hx,"node")}},labelDataIndex:cn.dataIndex,defaultText:cn.id}),lx.disableLabelAnimation=!0,lx.setStyle("fill",cn.getVisual("color")),lx.setStyle("decal",cn.getVisual("style").decal),setStatesStylesFromModel(lx,Cn),d.add(lx),en.setItemGraphicEl(cn.dataIndex,lx),getECData(lx).dataType="node";var cx=ax.get("focus");toggleHoverEmphasis(lx,cx==="adjacency"?cn.getAdjacentDataIndices():cx==="trajectory"?cn.getTrajectoryDataIndices():cx,ax.get("blurScope"),ax.get("disabled"))}),en.eachItemGraphicEl(function(cn,gn){var Cn=en.getItemModel(gn);Cn.get("draggable")&&(cn.drift=function(ex,ix){c._focusAdjacencyDisabled=!0,this.shape.x+=ex,this.shape.y+=ix,this.dirty(),u.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:en.getRawIndex(gn),localX:this.shape.x/Ct,localY:this.shape.y/ar})},cn.ondragend=function(){c._focusAdjacencyDisabled=!1},cn.draggable=!0,cn.cursor="move")}),!this._data&&a.isAnimationEnabled()&&d.setClipPath(createGridClipShape$1(d.getBoundingRect(),a,function(){d.removeClipPath()})),this._data=a.getData()},n.prototype.dispose=function(){},n.type="sankey",n}(ChartView);function applyCurveStyle(t,n,a){switch(t.fill){case"source":t.fill=a.node1.getVisual("color"),t.decal=a.node1.getVisual("style").decal;break;case"target":t.fill=a.node2.getVisual("color"),t.decal=a.node2.getVisual("style").decal;break;case"gradient":var l=a.node1.getVisual("color"),u=a.node2.getVisual("color");isString$1(l)&&isString$1(u)&&(t.fill=new LinearGradient(0,0,+(n==="horizontal"),+(n==="vertical"),[{color:l,offset:0},{color:u,offset:1}]))}}function createGridClipShape$1(t,n,a){var l=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(l,{shape:{width:t.width+20}},n,a),l}var SankeySeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,l){var u=a.edges||a.links||[],c=a.data||a.nodes||[],p=a.levels||[];this.levelModels=[];for(var d=this.levelModels,Q=0;Q<p.length;Q++)p[Q].depth!=null&&p[Q].depth>=0&&(d[p[Q].depth]=new Model(p[Q],this,l));var Ct=createGraphFromNodeEdge(c,u,this,!0,ar);return Ct.data;function ar(en,tn){en.wrapMethod("getItemModel",function(on,cn){var gn=on.parentModel,Cn=gn.getData().getItemLayout(cn);if(Cn){var ex=Cn.depth,ix=gn.levelModels[ex];ix&&(on.parentModel=ix)}return on}),tn.wrapMethod("getItemModel",function(on,cn){var gn=on.parentModel,Cn=gn.getGraph().getEdgeByIndex(cn),ex=Cn.node1.getLayout();if(ex){var ix=ex.depth,ax=gn.levelModels[ix];ax&&(on.parentModel=ax)}return on})}},n.prototype.setNodePosition=function(a,l){var u=this.option.data||this.option.nodes,c=u[a];c.localX=l[0],c.localY=l[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(a,l,u){function c(on){return isNaN(on)||on==null}if(u==="edge"){var p=this.getDataParams(a,u),d=p.data,Q=p.value,Ct=d.source+" -- "+d.target;return createTooltipMarkup("nameValue",{name:Ct,value:Q,noValue:c(Q)})}else{var ar=this.getGraph().getNodeByIndex(a),en=ar.getLayout().value,tn=this.getDataParams(a,u).data.name;return createTooltipMarkup("nameValue",{name:tn!=null?tn+"":null,value:en,noValue:c(en)})}},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(a,l){var u=t.prototype.getDataParams.call(this,a,l);if(u.value==null&&l==="node"){var c=this.getGraph().getNodeByIndex(a),p=c.getLayout().value;u.value=p}return u},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n}(SeriesModel);function sankeyLayout(t,n){t.eachSeriesByType("sankey",function(a){var l=a.get("nodeWidth"),u=a.get("nodeGap"),c=getViewRect$1(a,n);a.layoutInfo=c;var p=c.width,d=c.height,Q=a.getGraph(),Ct=Q.nodes,ar=Q.edges;computeNodeValues(Ct);var en=filter(Ct,function(gn){return gn.getLayout().value===0}),tn=en.length!==0?0:a.get("layoutIterations"),on=a.get("orient"),cn=a.get("nodeAlign");layoutSankey(Ct,ar,l,u,p,d,tn,on,cn)})}function getViewRect$1(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function layoutSankey(t,n,a,l,u,c,p,d,Q){computeNodeBreadths(t,n,a,u,c,d,Q),computeNodeDepths(t,n,c,u,l,p,d),computeEdgeDepths(t,d)}function computeNodeValues(t){each$f(t,function(n){var a=sum(n.outEdges,getEdgeValue),l=sum(n.inEdges,getEdgeValue),u=n.getValue()||0,c=Math.max(a,l,u);n.setLayout({value:c},!0)})}function computeNodeBreadths(t,n,a,l,u,c,p){for(var d=[],Q=[],Ct=[],ar=[],en=0,tn=0;tn<n.length;tn++)d[tn]=1;for(var tn=0;tn<t.length;tn++)Q[tn]=t[tn].inEdges.length,Q[tn]===0&&Ct.push(t[tn]);for(var on=-1;Ct.length;){for(var cn=0;cn<Ct.length;cn++){var gn=Ct[cn],Cn=gn.hostGraph.data.getRawDataItem(gn.dataIndex),ex=Cn.depth!=null&&Cn.depth>=0;ex&&Cn.depth>on&&(on=Cn.depth),gn.setLayout({depth:ex?Cn.depth:en},!0),c==="vertical"?gn.setLayout({dy:a},!0):gn.setLayout({dx:a},!0);for(var ix=0;ix<gn.outEdges.length;ix++){var ax=gn.outEdges[ix],ox=n.indexOf(ax);d[ox]=0;var lx=ax.node2,cx=t.indexOf(lx);--Q[cx]===0&&ar.indexOf(lx)<0&&ar.push(lx)}}++en,Ct=ar,ar=[]}for(var tn=0;tn<d.length;tn++)if(d[tn]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var dx=on>en-1?on:en-1;p&&p!=="left"&&adjustNodeWithNodeAlign(t,p,c,dx);var hx=c==="vertical"?(u-a)/dx:(l-a)/dx;scaleNodeBreadths(t,hx,c)}function isNodeDepth(t){var n=t.hostGraph.data.getRawDataItem(t.dataIndex);return n.depth!=null&&n.depth>=0}function adjustNodeWithNodeAlign(t,n,a,l){if(n==="right"){for(var u=[],c=t,p=0;c.length;){for(var d=0;d<c.length;d++){var Q=c[d];Q.setLayout({skNodeHeight:p},!0);for(var Ct=0;Ct<Q.inEdges.length;Ct++){var ar=Q.inEdges[Ct];u.indexOf(ar.node1)<0&&u.push(ar.node1)}}c=u,u=[],++p}each$f(t,function(en){isNodeDepth(en)||en.setLayout({depth:Math.max(0,l-en.getLayout().skNodeHeight)},!0)})}else n==="justify"&&moveSinksRight(t,l)}function moveSinksRight(t,n){each$f(t,function(a){!isNodeDepth(a)&&!a.outEdges.length&&a.setLayout({depth:n},!0)})}function scaleNodeBreadths(t,n,a){each$f(t,function(l){var u=l.getLayout().depth*n;a==="vertical"?l.setLayout({y:u},!0):l.setLayout({x:u},!0)})}function computeNodeDepths(t,n,a,l,u,c,p){var d=prepareNodesByBreadth(t,p);initializeNodeDepth(d,n,a,l,u,p),resolveCollisions(d,u,a,l,p);for(var Q=1;c>0;c--)Q*=.99,relaxRightToLeft(d,Q,p),resolveCollisions(d,u,a,l,p),relaxLeftToRight(d,Q,p),resolveCollisions(d,u,a,l,p)}function prepareNodesByBreadth(t,n){var a=[],l=n==="vertical"?"y":"x",u=groupData(t,function(c){return c.getLayout()[l]});return u.keys.sort(function(c,p){return c-p}),each$f(u.keys,function(c){a.push(u.buckets.get(c))}),a}function initializeNodeDepth(t,n,a,l,u,c){var p=1/0;each$f(t,function(d){var Q=d.length,Ct=0;each$f(d,function(en){Ct+=en.getLayout().value});var ar=c==="vertical"?(l-(Q-1)*u)/Ct:(a-(Q-1)*u)/Ct;ar<p&&(p=ar)}),each$f(t,function(d){each$f(d,function(Q,Ct){var ar=Q.getLayout().value*p;c==="vertical"?(Q.setLayout({x:Ct},!0),Q.setLayout({dx:ar},!0)):(Q.setLayout({y:Ct},!0),Q.setLayout({dy:ar},!0))})}),each$f(n,function(d){var Q=+d.getValue()*p;d.setLayout({dy:Q},!0)})}function resolveCollisions(t,n,a,l,u){var c=u==="vertical"?"x":"y";each$f(t,function(p){p.sort(function(gn,Cn){return gn.getLayout()[c]-Cn.getLayout()[c]});for(var d,Q,Ct,ar=0,en=p.length,tn=u==="vertical"?"dx":"dy",on=0;on<en;on++)Q=p[on],Ct=ar-Q.getLayout()[c],Ct>0&&(d=Q.getLayout()[c]+Ct,u==="vertical"?Q.setLayout({x:d},!0):Q.setLayout({y:d},!0)),ar=Q.getLayout()[c]+Q.getLayout()[tn]+n;var cn=u==="vertical"?l:a;if(Ct=ar-n-cn,Ct>0){d=Q.getLayout()[c]-Ct,u==="vertical"?Q.setLayout({x:d},!0):Q.setLayout({y:d},!0),ar=d;for(var on=en-2;on>=0;--on)Q=p[on],Ct=Q.getLayout()[c]+Q.getLayout()[tn]+n-ar,Ct>0&&(d=Q.getLayout()[c]-Ct,u==="vertical"?Q.setLayout({x:d},!0):Q.setLayout({y:d},!0)),ar=Q.getLayout()[c]}})}function relaxRightToLeft(t,n,a){each$f(t.slice().reverse(),function(l){each$f(l,function(u){if(u.outEdges.length){var c=sum(u.outEdges,weightedTarget,a)/sum(u.outEdges,getEdgeValue);if(isNaN(c)){var p=u.outEdges.length;c=p?sum(u.outEdges,centerTarget,a)/p:0}if(a==="vertical"){var d=u.getLayout().x+(c-center(u,a))*n;u.setLayout({x:d},!0)}else{var Q=u.getLayout().y+(c-center(u,a))*n;u.setLayout({y:Q},!0)}}})})}function weightedTarget(t,n){return center(t.node2,n)*t.getValue()}function centerTarget(t,n){return center(t.node2,n)}function weightedSource(t,n){return center(t.node1,n)*t.getValue()}function centerSource(t,n){return center(t.node1,n)}function center(t,n){return n==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function getEdgeValue(t){return t.getValue()}function sum(t,n,a){for(var l=0,u=t.length,c=-1;++c<u;){var p=+n(t[c],a);isNaN(p)||(l+=p)}return l}function relaxLeftToRight(t,n,a){each$f(t,function(l){each$f(l,function(u){if(u.inEdges.length){var c=sum(u.inEdges,weightedSource,a)/sum(u.inEdges,getEdgeValue);if(isNaN(c)){var p=u.inEdges.length;c=p?sum(u.inEdges,centerSource,a)/p:0}if(a==="vertical"){var d=u.getLayout().x+(c-center(u,a))*n;u.setLayout({x:d},!0)}else{var Q=u.getLayout().y+(c-center(u,a))*n;u.setLayout({y:Q},!0)}}})})}function computeEdgeDepths(t,n){var a=n==="vertical"?"x":"y";each$f(t,function(l){l.outEdges.sort(function(u,c){return u.node2.getLayout()[a]-c.node2.getLayout()[a]}),l.inEdges.sort(function(u,c){return u.node1.getLayout()[a]-c.node1.getLayout()[a]})}),each$f(t,function(l){var u=0,c=0;each$f(l.outEdges,function(p){p.setLayout({sy:u},!0),u+=p.getLayout().dy}),each$f(l.inEdges,function(p){p.setLayout({ty:c},!0),c+=p.getLayout().dy})})}function sankeyVisual(t){t.eachSeriesByType("sankey",function(n){var a=n.getGraph(),l=a.nodes,u=a.edges;if(l.length){var c=1/0,p=-1/0;each$f(l,function(d){var Q=d.getLayout().value;Q<c&&(c=Q),Q>p&&(p=Q)}),each$f(l,function(d){var Q=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[c,p],visual:n.get("color")}),Ct=Q.mapValueToVisual(d.getLayout().value),ar=d.getModel().get(["itemStyle","color"]);ar!=null?(d.setVisual("color",ar),d.setVisual("style",{fill:ar})):(d.setVisual("color",Ct),d.setVisual("style",{fill:Ct}))})}u.length&&each$f(u,function(d){var Q=d.getModel().get("lineStyle");d.setVisual("style",Q)})})}function install$A(t){t.registerChartView(SankeyView),t.registerSeriesModel(SankeySeriesModel),t.registerLayout(sankeyLayout),t.registerVisual(sankeyVisual),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"sankey",query:n},function(l){l.setNodePosition(n.dataIndex,[n.localX,n.localY])})})}var WhiskerBoxCommonMixin=function(){function t(){}return t.prototype._hasEncodeRule=function(n){var a=this.getEncode();return a&&a.get(n)!=null},t.prototype.getInitialData=function(n,a){var l,u=a.getComponent("xAxis",this.get("xAxisIndex")),c=a.getComponent("yAxis",this.get("yAxisIndex")),p=u.get("type"),d=c.get("type"),Q;p==="category"?(n.layout="horizontal",l=u.getOrdinalMeta(),Q=!this._hasEncodeRule("x")):d==="category"?(n.layout="vertical",l=c.getOrdinalMeta(),Q=!this._hasEncodeRule("y")):n.layout=n.layout||"horizontal";var Ct=["x","y"],ar=n.layout==="horizontal"?0:1,en=this._baseAxisDim=Ct[ar],tn=Ct[1-ar],on=[u,c],cn=on[ar].get("type"),gn=on[1-ar].get("type"),Cn=n.data;if(Cn&&Q){var ex=[];each$f(Cn,function(ox,lx){var cx;isArray$1(ox)?(cx=ox.slice(),ox.unshift(lx)):isArray$1(ox.value)?(cx=extend({},ox),cx.value=cx.value.slice(),ox.value.unshift(lx)):cx=ox,ex.push(cx)}),n.data=ex}var ix=this.defaultValueDimensions,ax=[{name:en,type:getDimensionTypeByAxis(cn),ordinalMeta:l,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:tn,type:getDimensionTypeByAxis(gn),dimsDef:ix.slice()}];return createSeriesDataSimply(this,{coordDimensions:ax,dimensionsCount:ix.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,ax,this)})},t.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},t}(),BoxplotSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=a.getData(),p=this.group,d=this._data;this._data||p.removeAll();var Q=a.get("layout")==="horizontal"?1:0;c.diff(d).add(function(Ct){if(c.hasValue(Ct)){var ar=c.getItemLayout(Ct),en=createNormalBox$1(ar,c,Ct,Q,!0);c.setItemGraphicEl(Ct,en),p.add(en)}}).update(function(Ct,ar){var en=d.getItemGraphicEl(ar);if(!c.hasValue(Ct)){p.remove(en);return}var tn=c.getItemLayout(Ct);en?(saveOldStyle(en),updateNormalBoxData(tn,en,c,Ct)):en=createNormalBox$1(tn,c,Ct,Q),p.add(en),c.setItemGraphicEl(Ct,en)}).remove(function(Ct){var ar=d.getItemGraphicEl(Ct);ar&&p.remove(ar)}).execute(),this._data=c},n.prototype.remove=function(a){var l=this.group,u=this._data;this._data=null,u&&u.eachItemGraphicEl(function(c){c&&l.remove(c)})},n.type="boxplot",n}(ChartView),BoxPathShape=function(){function t(){}return t}(),BoxPath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="boxplotBoxPath",l}return n.prototype.getDefaultShape=function(){return new BoxPathShape},n.prototype.buildPath=function(a,l){var u=l.points,c=0;for(a.moveTo(u[c][0],u[c][1]),c++;c<4;c++)a.lineTo(u[c][0],u[c][1]);for(a.closePath();c<u.length;c++)a.moveTo(u[c][0],u[c][1]),c++,a.lineTo(u[c][0],u[c][1])},n}(Path);function createNormalBox$1(t,n,a,l,u){var c=t.ends,p=new BoxPath({shape:{points:u?transInit$1(c,l,t):c}});return updateNormalBoxData(t,p,n,a,u),p}function updateNormalBoxData(t,n,a,l,u){var c=a.hostModel,p=graphic$1[u?"initProps":"updateProps"];p(n,{shape:{points:t.ends}},c,l),n.useStyle(a.getItemVisual(l,"style")),n.style.strokeNoScale=!0,n.z2=100;var d=a.getItemModel(l),Q=d.getModel("emphasis");setStatesStylesFromModel(n,d),toggleHoverEmphasis(n,Q.get("focus"),Q.get("blurScope"),Q.get("disabled"))}function transInit$1(t,n,a){return map$1(t,function(l){return l=l.slice(),l[n]=a.initBaseline,l})}var each$9=each$f;function boxplotLayout(t){var n=groupSeriesByAxis(t);each$9(n,function(a){var l=a.seriesModels;l.length&&(calculateBase(a),each$9(l,function(u,c){layoutSingleSeries(u,a.boxOffsetList[c],a.boxWidthList[c])}))})}function groupSeriesByAxis(t){var n=[],a=[];return t.eachSeriesByType("boxplot",function(l){var u=l.getBaseAxis(),c=indexOf(a,u);c<0&&(c=a.length,a[c]=u,n[c]={axis:u,seriesModels:[]}),n[c].seriesModels.push(l)}),n}function calculateBase(t){var n=t.axis,a=t.seriesModels,l=a.length,u=t.boxWidthList=[],c=t.boxOffsetList=[],p=[],d;if(n.type==="category")d=n.getBandWidth();else{var Q=0;each$9(a,function(cn){Q=Math.max(Q,cn.getData().count())});var Ct=n.getExtent();d=Math.abs(Ct[1]-Ct[0])/Q}each$9(a,function(cn){var gn=cn.get("boxWidth");isArray$1(gn)||(gn=[gn,gn]),p.push([parsePercent(gn[0],d)||0,parsePercent(gn[1],d)||0])});var ar=d*.8-2,en=ar/l*.3,tn=(ar-en*(l-1))/l,on=tn/2-ar/2;each$9(a,function(cn,gn){c.push(on),on+=en+tn,u.push(Math.min(Math.max(tn,p[gn][0]),p[gn][1]))})}function layoutSingleSeries(t,n,a){var l=t.coordinateSystem,u=t.getData(),c=a/2,p=t.get("layout")==="horizontal"?0:1,d=1-p,Q=["x","y"],Ct=u.mapDimension(Q[p]),ar=u.mapDimensionsAll(Q[d]);if(Ct==null||ar.length<5)return;for(var en=0;en<u.count();en++){var tn=u.get(Ct,en),on=ax(tn,ar[2],en),cn=ax(tn,ar[0],en),gn=ax(tn,ar[1],en),Cn=ax(tn,ar[3],en),ex=ax(tn,ar[4],en),ix=[];ox(ix,gn,!1),ox(ix,Cn,!0),ix.push(cn,gn,ex,Cn),lx(ix,cn),lx(ix,ex),lx(ix,on),u.setItemLayout(en,{initBaseline:on[d],ends:ix})}function ax(cx,dx,hx){var fx=u.get(dx,hx),ux=[];ux[p]=cx,ux[d]=fx;var gx;return isNaN(cx)||isNaN(fx)?gx=[NaN,NaN]:(gx=l.dataToPoint(ux),gx[p]+=n),gx}function ox(cx,dx,hx){var fx=dx.slice(),ux=dx.slice();fx[p]+=c,ux[p]-=c,hx?cx.push(fx,ux):cx.push(ux,fx)}function lx(cx,dx){var hx=dx.slice(),fx=dx.slice();hx[p]-=c,fx[p]+=c,cx.push(hx,fx)}}function prepareBoxplotData(t,n){n=n||{};for(var a=[],l=[],u=n.boundIQR,c=u==="none"||u===0,p=0;p<t.length;p++){var d=asc$2(t[p].slice()),Q=quantile(d,.25),Ct=quantile(d,.5),ar=quantile(d,.75),en=d[0],tn=d[d.length-1],on=(u??1.5)*(ar-Q),cn=c?en:Math.max(en,Q-on),gn=c?tn:Math.min(tn,ar+on),Cn=n.itemNameFormatter,ex=isFunction$1(Cn)?Cn({value:p}):isString$1(Cn)?Cn.replace("{value}",p+""):p+"";a.push([ex,cn,Q,Ct,ar,gn]);for(var ix=0;ix<d.length;ix++){var ax=d[ix];if(ax<cn||ax>gn){var ox=[ex,ax];l.push(ox)}}}return{boxData:a,outliers:l}}var boxplotTransform={type:"echarts:boxplot",transform:function t(n){var a=n.upstream;if(a.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var l="";throwError(l)}var u=prepareBoxplotData(a.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:u.boxData},{data:u.outliers}]}};function install$z(t){t.registerSeriesModel(BoxplotSeriesModel),t.registerChartView(BoxplotView),t.registerLayout(boxplotLayout),t.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(t,n){return n.get(t>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(t,n){return n.get(t===0?dojiBorderColorQuery:t>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(t,n){if(!n.isSeriesFiltered(t)){var a=t.pipelineContext.large;return!a&&{progress:function(l,u){for(var c;(c=l.next())!=null;){var p=u.getItemModel(c),d=u.getItemLayout(c).sign,Q=p.getItemStyle();Q.fill=getColor(d,p),Q.stroke=getBorderColor(d,p)||Q.fill;var Ct=u.ensureUniqueItemVisual(c,"style");extend(Ct,Q)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},n.prototype.incrementalPrepareRender=function(a,l,u){this._clear(),this._updateDrawMode(a)},n.prototype.incrementalRender=function(a,l,u,c){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,l):this._incrementalRenderNormal(a,l)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(this._isLargeDraw==null||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},n.prototype._renderNormal=function(a){var l=a.getData(),u=this._data,c=this.group,p=l.getLayout("isSimpleBox"),d=a.get("clip",!0),Q=a.coordinateSystem,Ct=Q.getArea&&Q.getArea();this._data||c.removeAll(),l.diff(u).add(function(ar){if(l.hasValue(ar)){var en=l.getItemLayout(ar);if(d&&isNormalBoxClipped(Ct,en))return;var tn=createNormalBox(en,ar,!0);initProps(tn,{shape:{points:en.ends}},a,ar),setBoxCommon(tn,l,ar,p),c.add(tn),l.setItemGraphicEl(ar,tn)}}).update(function(ar,en){var tn=u.getItemGraphicEl(en);if(!l.hasValue(ar)){c.remove(tn);return}var on=l.getItemLayout(ar);if(d&&isNormalBoxClipped(Ct,on)){c.remove(tn);return}tn?(updateProps$1(tn,{shape:{points:on.ends}},a,ar),saveOldStyle(tn)):tn=createNormalBox(on),setBoxCommon(tn,l,ar,p),c.add(tn),l.setItemGraphicEl(ar,tn)}).remove(function(ar){var en=u.getItemGraphicEl(ar);en&&c.remove(en)}).execute(),this._data=l},n.prototype._renderLarge=function(a){this._clear(),createLarge(a,this.group);var l=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;l?this.group.setClipPath(l):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(a,l){for(var u=l.getData(),c=u.getLayout("isSimpleBox"),p;(p=a.next())!=null;){var d=u.getItemLayout(p),Q=createNormalBox(d);setBoxCommon(Q,u,p,c),Q.incremental=!0,this.group.add(Q),this._progressiveEls.push(Q)}},n.prototype._incrementalRenderLarge=function(a,l){createLarge(l,this.group,this._progressiveEls,!0)},n.prototype.remove=function(a){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n}(ChartView),NormalBoxPathShape=function(){function t(){}return t}(),NormalBoxPath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="normalCandlestickBox",l}return n.prototype.getDefaultShape=function(){return new NormalBoxPathShape},n.prototype.buildPath=function(a,l){var u=l.points;this.__simpleBox?(a.moveTo(u[4][0],u[4][1]),a.lineTo(u[6][0],u[6][1])):(a.moveTo(u[0][0],u[0][1]),a.lineTo(u[1][0],u[1][1]),a.lineTo(u[2][0],u[2][1]),a.lineTo(u[3][0],u[3][1]),a.closePath(),a.moveTo(u[4][0],u[4][1]),a.lineTo(u[5][0],u[5][1]),a.moveTo(u[6][0],u[6][1]),a.lineTo(u[7][0],u[7][1]))},n}(Path);function createNormalBox(t,n,a){var l=t.ends;return new NormalBoxPath({shape:{points:a?transInit(l,t):l},z2:100})}function isNormalBoxClipped(t,n){for(var a=!0,l=0;l<n.ends.length;l++)if(t.contain(n.ends[l][0],n.ends[l][1])){a=!1;break}return a}function setBoxCommon(t,n,a,l){var u=n.getItemModel(a);t.useStyle(n.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=l,setStatesStylesFromModel(t,u);var c=n.getItemLayout(a).sign;each$f(t.states,function(d,Q){var Ct=u.getModel(Q),ar=getColor(c,Ct),en=getBorderColor(c,Ct)||ar,tn=d.style||(d.style={});ar&&(tn.fill=ar),en&&(tn.stroke=en)});var p=u.getModel("emphasis");toggleHoverEmphasis(t,p.get("focus"),p.get("blurScope"),p.get("disabled"))}function transInit(t,n){return map$1(t,function(a){return a=a.slice(),a[1]=n.initBaseline,a})}var LargeBoxPathShape=function(){function t(){}return t}(),LargeBoxPath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.type="largeCandlestickBox",l}return n.prototype.getDefaultShape=function(){return new LargeBoxPathShape},n.prototype.buildPath=function(a,l){for(var u=l.points,c=0;c<u.length;)if(this.__sign===u[c++]){var p=u[c++];a.moveTo(p,u[c++]),a.lineTo(p,u[c++])}else c+=3},n}(Path);function createLarge(t,n,a,l){var u=t.getData(),c=u.getLayout("largePoints"),p=new LargeBoxPath({shape:{points:c},__sign:1,ignoreCoarsePointer:!0});n.add(p);var d=new LargeBoxPath({shape:{points:c},__sign:-1,ignoreCoarsePointer:!0});n.add(d);var Q=new LargeBoxPath({shape:{points:c},__sign:0,ignoreCoarsePointer:!0});n.add(Q),setLargeStyle(1,p,t),setLargeStyle(-1,d,t),setLargeStyle(0,Q,t),l&&(p.incremental=!0,d.incremental=!0),a&&a.push(p,d)}function setLargeStyle(t,n,a,l){var u=getBorderColor(t,a)||getColor(t,a),c=a.getModel("itemStyle").getItemStyle(SKIP_PROPS);n.useStyle(c),n.style.fill=null,n.style.stroke=u}var CandlestickSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(a,l,u){var c=l.getItemLayout(a);return c&&u.rect(c.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(t){!t||!isArray$1(t.series)||each$f(t.series,function(n){isObject$3(n)&&n.type==="k"&&(n.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem,a=t.getData(),l=calculateCandleWidth(t,a),u=0,c=1,p=["x","y"],d=a.getDimensionIndex(a.mapDimension(p[u])),Q=map$1(a.mapDimensionsAll(p[c]),a.getDimensionIndex,a),Ct=Q[0],ar=Q[1],en=Q[2],tn=Q[3];if(a.setLayout({candleWidth:l,isSimpleBox:l<=1.3}),d<0||Q.length<4)return;return{progress:t.pipelineContext.large?cn:on};function on(gn,Cn){for(var ex,ix=Cn.getStore();(ex=gn.next())!=null;){var ax=ix.get(d,ex),ox=ix.get(Ct,ex),lx=ix.get(ar,ex),cx=ix.get(en,ex),dx=ix.get(tn,ex),hx=Math.min(ox,lx),fx=Math.max(ox,lx),ux=Sx(hx,ax),gx=Sx(fx,ax),yx=Sx(cx,ax),_x=Sx(dx,ax),vx=[];Ax(vx,gx,0),Ax(vx,ux,1),vx.push(Tx(_x),Tx(gx),Tx(yx),Tx(ux));var bx=Cn.getItemModel(ex),xx=!!bx.get(["itemStyle","borderColorDoji"]);Cn.setItemLayout(ex,{sign:getSign(ix,ex,ox,lx,ar,xx),initBaseline:ox>lx?gx[c]:ux[c],ends:vx,brushRect:Cx(cx,dx,ax)})}function Sx(Px,Fx){var Mx=[];return Mx[u]=Fx,Mx[c]=Px,isNaN(Fx)||isNaN(Px)?[NaN,NaN]:n.dataToPoint(Mx)}function Ax(Px,Fx,Mx){var Dx=Fx.slice(),Ox=Fx.slice();Dx[u]=subPixelOptimize(Dx[u]+l/2,1,!1),Ox[u]=subPixelOptimize(Ox[u]-l/2,1,!0),Mx?Px.push(Dx,Ox):Px.push(Ox,Dx)}function Cx(Px,Fx,Mx){var Dx=Sx(Px,Mx),Ox=Sx(Fx,Mx);return Dx[u]-=l/2,Ox[u]-=l/2,{x:Dx[0],y:Dx[1],width:l,height:Ox[1]-Dx[1]}}function Tx(Px){return Px[u]=subPixelOptimize(Px[u],1),Px}}function cn(gn,Cn){for(var ex=createFloat32Array(gn.count*4),ix=0,ax,ox=[],lx=[],cx,dx=Cn.getStore(),hx=!!t.get(["itemStyle","borderColorDoji"]);(cx=gn.next())!=null;){var fx=dx.get(d,cx),ux=dx.get(Ct,cx),gx=dx.get(ar,cx),yx=dx.get(en,cx),_x=dx.get(tn,cx);if(isNaN(fx)||isNaN(yx)||isNaN(_x)){ex[ix++]=NaN,ix+=3;continue}ex[ix++]=getSign(dx,cx,ux,gx,ar,hx),ox[u]=fx,ox[c]=yx,ax=n.dataToPoint(ox,null,lx),ex[ix++]=ax?ax[0]:NaN,ex[ix++]=ax?ax[1]:NaN,ox[c]=_x,ax=n.dataToPoint(ox,null,lx),ex[ix++]=ax?ax[1]:NaN}Cn.setLayout("largePoints",ex)}}};function getSign(t,n,a,l,u,c){var p;return a>l?p=-1:a<l?p=1:p=c?0:n>0?t.get(u,n-1)<=l?1:-1:1,p}function calculateCandleWidth(t,n){var a=t.getBaseAxis(),l,u=a.type==="category"?a.getBandWidth():(l=a.getExtent(),Math.abs(l[1]-l[0])/n.count()),c=parsePercent(retrieve2(t.get("barMaxWidth"),u),u),p=parsePercent(retrieve2(t.get("barMinWidth"),1),u),d=t.get("barWidth");return d!=null?parsePercent(d,u):Math.max(Math.min(u/2,c),p)}function install$y(t){t.registerChartView(CandlestickView),t.registerSeriesModel(CandlestickSeriesModel),t.registerPreprocessor(candlestickPreprocessor),t.registerVisual(candlestickVisual),t.registerLayout(candlestickLayout)}function updateRipplePath(t,n){var a=n.rippleEffectColor||n.color;t.eachChild(function(l){l.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?a:null,fill:n.brushType==="fill"?a:null}})})}var EffectSymbol=function(t){__extends(n,t);function n(a,l){var u=t.call(this)||this,c=new Symbol$1(a,l),p=new Group$3;return u.add(c),u.add(p),u.updateData(a,l),u}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(a){for(var l=a.symbolType,u=a.color,c=a.rippleNumber,p=this.childAt(1),d=0;d<c;d++){var Q=createSymbol$1(l,-1,-1,2,2,u);Q.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var Ct=-d/c*a.period+a.effectOffset;Q.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(Ct).start(),Q.animateStyle(!0).when(a.period,{opacity:0}).delay(Ct).start(),p.add(Q)}updateRipplePath(p,a)},n.prototype.updateEffectAnimation=function(a){for(var l=this._effectCfg,u=this.childAt(1),c=["symbolType","period","rippleScale","rippleNumber"],p=0;p<c.length;p++){var d=c[p];if(l[d]!==a[d]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}updateRipplePath(u,a)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},n.prototype.updateData=function(a,l){var u=this,c=a.hostModel;this.childAt(0).updateData(a,l);var p=this.childAt(1),d=a.getItemModel(l),Q=a.getItemVisual(l,"symbol"),Ct=normalizeSymbolSize(a.getItemVisual(l,"symbolSize")),ar=a.getItemVisual(l,"style"),en=ar&&ar.fill,tn=d.getModel("emphasis");p.setScale(Ct),p.traverse(function(Cn){Cn.setStyle("fill",en)});var on=normalizeSymbolOffset(a.getItemVisual(l,"symbolOffset"),Ct);on&&(p.x=on[0],p.y=on[1]);var cn=a.getItemVisual(l,"symbolRotate");p.rotation=(cn||0)*Math.PI/180||0;var gn={};gn.showEffectOn=c.get("showEffectOn"),gn.rippleScale=d.get(["rippleEffect","scale"]),gn.brushType=d.get(["rippleEffect","brushType"]),gn.period=d.get(["rippleEffect","period"])*1e3,gn.effectOffset=l/a.count(),gn.z=c.getShallow("z")||0,gn.zlevel=c.getShallow("zlevel")||0,gn.symbolType=Q,gn.color=en,gn.rippleEffectColor=d.get(["rippleEffect","color"]),gn.rippleNumber=d.get(["rippleEffect","number"]),gn.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(gn):this.startEffectAnimation(gn),this._effectCfg=gn):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Cn){Cn==="emphasis"?gn.showEffectOn!=="render"&&u.startEffectAnimation(gn):Cn==="normal"&&gn.showEffectOn!=="render"&&u.stopEffectAnimation()}),this._effectCfg=gn,toggleHoverEmphasis(this,tn.get("focus"),tn.get("blurScope"),tn.get("disabled"))},n.prototype.fadeOut=function(a){a&&a()},n}(Group$3),EffectScatterView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},n.prototype.render=function(a,l,u){var c=a.getData(),p=this._symbolDraw;p.updateData(c,{clipShape:this._getClipShape(a)}),this.group.add(p.group)},n.prototype._getClipShape=function(a){var l=a.coordinateSystem,u=l&&l.getArea&&l.getArea();return a.get("clip",!0)?u:null},n.prototype.updateTransform=function(a,l,u){var c=a.getData();this.group.dirty();var p=pointsLayout("").reset(a,l,u);p.progress&&p.progress({start:0,end:c.count(),count:c.count()},c),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(a){var l=a.coordinateSystem;l&&l.getRoamTransform&&(this.group.transform=clone$2(l.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(ChartView),EffectScatterSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,l){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(a,l,u){return u.point(l.getItemLayout(a))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(SeriesModel);function install$x(t){t.registerChartView(EffectScatterView),t.registerSeriesModel(EffectScatterSeriesModel),t.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this)||this;return c.add(c.createLine(a,l,u)),c._updateEffectSymbol(a,l),c}return n.prototype.createLine=function(a,l,u){return new Line(a,l,u)},n.prototype._updateEffectSymbol=function(a,l){var u=a.getItemModel(l),c=u.getModel("effect"),p=c.get("symbolSize"),d=c.get("symbol");isArray$1(p)||(p=[p,p]);var Q=a.getItemVisual(l,"style"),Ct=c.get("color")||Q&&Q.stroke,ar=this.childAt(1);this._symbolType!==d&&(this.remove(ar),ar=createSymbol$1(d,-.5,-.5,1,1,Ct),ar.z2=100,ar.culling=!0,this.add(ar)),ar&&(ar.setStyle("shadowColor",Ct),ar.setStyle(c.getItemStyle(["color"])),ar.scaleX=p[0],ar.scaleY=p[1],ar.setColor(Ct),this._symbolType=d,this._symbolScale=p,this._updateEffectAnimation(a,c,l))},n.prototype._updateEffectAnimation=function(a,l,u){var c=this.childAt(1);if(c){var p=a.getItemLayout(u),d=l.get("period")*1e3,Q=l.get("loop"),Ct=l.get("roundTrip"),ar=l.get("constantSpeed"),en=retrieve(l.get("delay"),function(on){return on/a.count()*d/3});if(c.ignore=!0,this._updateAnimationPoints(c,p),ar>0&&(d=this._getLineLength(c)/ar*1e3),d!==this._period||Q!==this._loop||Ct!==this._roundTrip){c.stopAnimation();var tn=void 0;isFunction$1(en)?tn=en(u):tn=en,c.__t>0&&(tn=-d*c.__t),this._animateSymbol(c,d,tn,Q,Ct)}this._period=d,this._loop=Q,this._roundTrip=Ct}},n.prototype._animateSymbol=function(a,l,u,c,p){if(l>0){a.__t=0;var d=this,Q=a.animate("",c).when(p?l*2:l,{__t:p?2:1}).delay(u).during(function(){d._updateSymbolPosition(a)});c||Q.done(function(){d.remove(a)}),Q.start()}},n.prototype._getLineLength=function(a){return dist$1(a.__p1,a.__cp1)+dist$1(a.__cp1,a.__p2)},n.prototype._updateAnimationPoints=function(a,l){a.__p1=l[0],a.__p2=l[1],a.__cp1=l[2]||[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]},n.prototype.updateData=function(a,l,u){this.childAt(0).updateData(a,l,u),this._updateEffectSymbol(a,l)},n.prototype._updateSymbolPosition=function(a){var l=a.__p1,u=a.__p2,c=a.__cp1,p=a.__t<1?a.__t:2-a.__t,d=[a.x,a.y],Q=d.slice(),Ct=quadraticAt$1,ar=quadraticDerivativeAt;d[0]=Ct(l[0],c[0],u[0],p),d[1]=Ct(l[1],c[1],u[1],p);var en=a.__t<1?ar(l[0],c[0],u[0],p):ar(u[0],c[0],l[0],1-p),tn=a.__t<1?ar(l[1],c[1],u[1],p):ar(u[1],c[1],l[1],1-p);a.rotation=-Math.atan2(tn,en)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(a.__lastT!==void 0&&a.__lastT<a.__t?(a.scaleY=dist$1(Q,d)*1.05,p===1&&(d[0]=Q[0]+(d[0]-Q[0])/2,d[1]=Q[1]+(d[1]-Q[1])/2)):a.__lastT===1?a.scaleY=2*dist$1(l,d):a.scaleY=this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=d[0],a.y=d[1]},n.prototype.updateLayout=function(a,l){this.childAt(0).updateLayout(a,l);var u=a.getItemModel(l).getModel("effect");this._updateEffectAnimation(a,u,l)},n}(Group$3),Polyline=function(t){__extends(n,t);function n(a,l,u){var c=t.call(this)||this;return c._createPolyline(a,l,u),c}return n.prototype._createPolyline=function(a,l,u){var c=a.getItemLayout(l),p=new Polyline$1({shape:{points:c}});this.add(p),this._updateCommonStl(a,l,u)},n.prototype.updateData=function(a,l,u){var c=a.hostModel,p=this.childAt(0),d={shape:{points:a.getItemLayout(l)}};updateProps$1(p,d,c,l),this._updateCommonStl(a,l,u)},n.prototype._updateCommonStl=function(a,l,u){var c=this.childAt(0),p=a.getItemModel(l),d=u&&u.emphasisLineStyle,Q=u&&u.focus,Ct=u&&u.blurScope,ar=u&&u.emphasisDisabled;if(!u||a.hasItemOption){var en=p.getModel("emphasis");d=en.getModel("lineStyle").getLineStyle(),ar=en.get("disabled"),Q=en.get("focus"),Ct=en.get("blurScope")}c.useStyle(a.getItemVisual(l,"style")),c.style.fill=null,c.style.strokeNoScale=!0;var tn=c.ensureState("emphasis");tn.style=d,toggleHoverEmphasis(this,Q,Ct,ar)},n.prototype.updateLayout=function(a,l){var u=this.childAt(0);u.setShape("points",a.getItemLayout(l))},n}(Group$3),EffectPolyline=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return n.prototype.createLine=function(a,l,u){return new Polyline(a,l,u)},n.prototype._updateAnimationPoints=function(a,l){this._points=l;for(var u=[0],c=0,p=1;p<l.length;p++){var d=l[p-1],Q=l[p];c+=dist$1(d,Q),u.push(c)}if(c===0){this._length=0;return}for(var p=0;p<u.length;p++)u[p]/=c;this._offsets=u,this._length=c},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(a){var l=a.__t<1?a.__t:2-a.__t,u=this._points,c=this._offsets,p=u.length;if(c){var d=this._lastFrame,Q;if(l<this._lastFramePercent){var Ct=Math.min(d+1,p-1);for(Q=Ct;Q>=0&&!(c[Q]<=l);Q--);Q=Math.min(Q,p-2)}else{for(Q=d;Q<p&&!(c[Q]>l);Q++);Q=Math.min(Q-1,p-2)}var ar=(l-c[Q])/(c[Q+1]-c[Q]),en=u[Q],tn=u[Q+1];a.x=en[0]*(1-ar)+ar*tn[0],a.y=en[1]*(1-ar)+ar*tn[1];var on=a.__t<1?tn[0]-en[0]:en[0]-tn[0],cn=a.__t<1?tn[1]-en[1]:en[1]-tn[1];a.rotation=-Math.atan2(cn,on)-Math.PI/2,this._lastFrame=Q,this._lastFramePercent=l,a.ignore=!1}},n}(EffectLine),LargeLinesPathShape=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),LargeLinesPath=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LargeLinesPathShape},n.prototype.buildPath=function(a,l){var u=l.segs,c=l.curveness,p;if(l.polyline)for(p=this._off;p<u.length;){var d=u[p++];if(d>0){a.moveTo(u[p++],u[p++]);for(var Q=1;Q<d;Q++)a.lineTo(u[p++],u[p++])}}else for(p=this._off;p<u.length;){var Ct=u[p++],ar=u[p++],en=u[p++],tn=u[p++];if(a.moveTo(Ct,ar),c>0){var on=(Ct+en)/2-(ar-tn)*c,cn=(ar+tn)/2-(en-Ct)*c;a.quadraticCurveTo(on,cn,en,tn)}else a.lineTo(en,tn)}this.incremental&&(this._off=p,this.notClear=!0)},n.prototype.findDataIndex=function(a,l){var u=this.shape,c=u.segs,p=u.curveness,d=this.style.lineWidth;if(u.polyline)for(var Q=0,Ct=0;Ct<c.length;){var ar=c[Ct++];if(ar>0)for(var en=c[Ct++],tn=c[Ct++],on=1;on<ar;on++){var cn=c[Ct++],gn=c[Ct++];if(containStroke$4(en,tn,cn,gn,d,a,l))return Q}Q++}else for(var Q=0,Ct=0;Ct<c.length;){var en=c[Ct++],tn=c[Ct++],cn=c[Ct++],gn=c[Ct++];if(p>0){var Cn=(en+cn)/2-(tn-gn)*p,ex=(tn+gn)/2-(cn-en)*p;if(containStroke$2(en,tn,Cn,ex,cn,gn,d,a,l))return Q}else if(containStroke$4(en,tn,cn,gn,d,a,l))return Q;Q++}return-1},n.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l),c=this.getBoundingRect();if(a=u[0],l=u[1],c.contain(a,l)){var p=this.hoverDataIdx=this.findDataIndex(a,l);return p>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var l=this.shape,u=l.segs,c=1/0,p=1/0,d=-1/0,Q=-1/0,Ct=0;Ct<u.length;){var ar=u[Ct++],en=u[Ct++];c=Math.min(ar,c),d=Math.max(ar,d),p=Math.min(en,p),Q=Math.max(en,Q)}a=this._rect=new BoundingRect(c,p,d,Q)}return a},n}(Path),LargeLineDraw=function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n){this._clear();var a=this._create();a.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(a,n)},t.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(n,a){var l=this._newAdded[0],u=a.getLayout("linesPoints"),c=l&&l.shape.segs;if(c&&c.length<2e4){var p=c.length,d=new Float32Array(p+u.length);d.set(c),d.set(u,p),l.setShape({segs:d})}else{this._newAdded=[];var Q=this._create();Q.incremental=!0,Q.setShape({segs:u}),this._setCommon(Q,a),Q.__startIndex=n.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(n),this.group.add(n),n},t.prototype._setCommon=function(n,a,l){var u=a.hostModel;n.setShape({polyline:u.get("polyline"),curveness:u.get(["lineStyle","curveness"])}),n.useStyle(u.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var c=a.getVisual("style");c&&c.stroke&&n.setStyle("stroke",c.stroke),n.setStyle("fill",null);var p=getECData(n);p.seriesIndex=u.seriesIndex,n.on("mousemove",function(d){p.dataIndex=null;var Q=n.hoverDataIdx;Q>0&&(p.dataIndex=Q+n.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem;if(n){var a=t.get("polyline"),l=t.pipelineContext.large;return{progress:function(u,c){var p=[];if(l){var d=void 0,Q=u.end-u.start;if(a){for(var Ct=0,ar=u.start;ar<u.end;ar++)Ct+=t.getLineCoordsCount(ar);d=new Float32Array(Q+Ct*2)}else d=new Float32Array(Q*4);for(var en=0,tn=[],ar=u.start;ar<u.end;ar++){var on=t.getLineCoords(ar,p);a&&(d[en++]=on);for(var cn=0;cn<on;cn++)tn=n.dataToPoint(p[cn],!1,tn),d[en++]=tn[0],d[en++]=tn[1]}c.setLayout("linesPoints",d)}else for(var ar=u.start;ar<u.end;ar++){var gn=c.getItemModel(ar),on=t.getLineCoords(ar,p),Cn=[];if(a)for(var ex=0;ex<on;ex++)Cn.push(n.dataToPoint(p[ex]));else{Cn[0]=n.dataToPoint(p[0]),Cn[1]=n.dataToPoint(p[1]);var ix=gn.get(["lineStyle","curveness"]);+ix&&(Cn[2]=[(Cn[0][0]+Cn[1][0])/2-(Cn[0][1]-Cn[1][1])*ix,(Cn[0][1]+Cn[1][1])/2-(Cn[1][0]-Cn[0][0])*ix])}c.setItemLayout(ar,Cn)}}}}}},LinesView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=a.getData(),p=this._updateLineDraw(c,a),d=a.get("zlevel"),Q=a.get(["effect","trailLength"]),Ct=u.getZr(),ar=Ct.painter.getType()==="svg";ar||Ct.painter.getLayer(d).clear(!0),this._lastZlevel!=null&&!ar&&Ct.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&Q>0&&(ar||Ct.configLayer(d,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(Q/10+.9,1),0)})),p.updateData(c);var en=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a);en?this.group.setClipPath(en):this.group.removeClipPath(),this._lastZlevel=d,this._finished=!0},n.prototype.incrementalPrepareRender=function(a,l,u){var c=a.getData(),p=this._updateLineDraw(c,a);p.incrementalPrepareUpdate(c),this._clearLayer(u),this._finished=!1},n.prototype.incrementalRender=function(a,l,u){this._lineDraw.incrementalUpdate(a,l.getData()),this._finished=a.end===l.getData().count()},n.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},n.prototype.updateTransform=function(a,l,u){var c=a.getData(),p=a.pipelineContext;if(!this._finished||p.large||p.progressiveRender)return{update:!0};var d=linesLayout.reset(a,l,u);d.progress&&d.progress({start:0,end:c.count(),count:c.count()},c),this._lineDraw.updateLayout(),this._clearLayer(u)},n.prototype._updateLineDraw=function(a,l){var u=this._lineDraw,c=this._showEffect(l),p=!!l.get("polyline"),d=l.pipelineContext,Q=d.large;return(!u||c!==this._hasEffet||p!==this._isPolyline||Q!==this._isLargeDraw)&&(u&&u.remove(),u=this._lineDraw=Q?new LargeLineDraw:new LineDraw(p?c?EffectPolyline:Polyline:c?EffectLine:Line),this._hasEffet=c,this._isPolyline=p,this._isLargeDraw=Q),this.group.add(u.group),u},n.prototype._showEffect=function(a){return!!a.get(["effect","show"])},n.prototype._clearLayer=function(a){var l=a.getZr(),u=l.painter.getType()==="svg";!u&&this._lastZlevel!=null&&l.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(a,l){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(l)},n.prototype.dispose=function(a,l){this.remove(a,l)},n.type="lines",n}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(t){var n=t.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(t.data=map$1(n,function(a){var l=[a[0].coord,a[1].coord],u={coords:l};return a[0].name&&(u.fromName=a[0].name),a[1].name&&(u.toName=a[1].name),mergeAll([u,a[0],a[1]])}))}var LinesSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.init=function(a){a.data=a.data||[],compatEc2(a);var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count)),t.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(a){if(compatEc2(a),a.data){var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count))}t.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(a){var l=this._processFlatCoordsArray(a.data);l.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,l.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,l.flatCoordsOffset)):(this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset),a.data=new Float32Array(l.count)),this.getRawData().appendData(a.data)},n.prototype._getCoordsFromItemModel=function(a){var l=this.getData().getItemModel(a),u=l.option instanceof Array?l.option:l.getShallow("coords");return u},n.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[a*2+1]:this._getCoordsFromItemModel(a).length},n.prototype.getLineCoords=function(a,l){if(this._flatCoordsOffset){for(var u=this._flatCoordsOffset[a*2],c=this._flatCoordsOffset[a*2+1],p=0;p<c;p++)l[p]=l[p]||[],l[p][0]=this._flatCoords[u+p*2],l[p][1]=this._flatCoords[u+p*2+1];return c}else{for(var d=this._getCoordsFromItemModel(a),p=0;p<d.length;p++)l[p]=l[p]||[],l[p][0]=d[p][0],l[p][1]=d[p][1];return d.length}},n.prototype._processFlatCoordsArray=function(a){var l=0;if(this._flatCoords&&(l=this._flatCoords.length),isNumber(a[0])){for(var u=a.length,c=new Uint32Arr(u),p=new Float64Arr(u),d=0,Q=0,Ct=0,ar=0;ar<u;){Ct++;var en=a[ar++];c[Q++]=d+l,c[Q++]=en;for(var tn=0;tn<en;tn++){var on=a[ar++],cn=a[ar++];p[d++]=on,p[d++]=cn}}return{flatCoordsOffset:new Uint32Array(c.buffer,0,Q),flatCoords:p,count:Ct}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},n.prototype.getInitialData=function(a,l){var u=new SeriesData(["value"],this);return u.hasItemOption=!1,u.initData(a.data,[],function(c,p,d,Q){if(c instanceof Array)return NaN;u.hasItemOption=!0;var Ct=c.value;if(Ct!=null)return Ct instanceof Array?Ct[Q]:Ct}),u},n.prototype.formatTooltip=function(a,l,u){var c=this.getData(),p=c.getItemModel(a),d=p.get("name");if(d)return d;var Q=p.get("fromName"),Ct=p.get("toName"),ar=[];return Q!=null&&ar.push(Q),Ct!=null&&ar.push(Ct),createTooltipMarkup("nameValue",{name:ar.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?1e4:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?2e4:this.get("progressiveThreshold"))},n.prototype.getZLevelKey=function(){var a=this.getModel("effect"),l=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&l>0?l+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n}(SeriesModel);function normalize(t){return t instanceof Array||(t=[t,t]),t}var linesVisual={seriesType:"lines",reset:function(t){var n=normalize(t.get("symbol")),a=normalize(t.get("symbolSize")),l=t.getData();l.setVisual("fromSymbol",n&&n[0]),l.setVisual("toSymbol",n&&n[1]),l.setVisual("fromSymbolSize",a&&a[0]),l.setVisual("toSymbolSize",a&&a[1]);function u(c,p){var d=c.getItemModel(p),Q=normalize(d.getShallow("symbol",!0)),Ct=normalize(d.getShallow("symbolSize",!0));Q[0]&&c.setItemVisual(p,"fromSymbol",Q[0]),Q[1]&&c.setItemVisual(p,"toSymbol",Q[1]),Ct[0]&&c.setItemVisual(p,"fromSymbolSize",Ct[0]),Ct[1]&&c.setItemVisual(p,"toSymbolSize",Ct[1])}return{dataEach:l.hasItemOption?u:null}}};function install$w(t){t.registerChartView(LinesView),t.registerSeriesModel(LinesSeriesModel),t.registerLayout(linesLayout),t.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=platformApi.createCanvas();this.canvas=n}return t.prototype.update=function(n,a,l,u,c,p){var d=this._getBrush(),Q=this._getGradient(c,"inRange"),Ct=this._getGradient(c,"outOfRange"),ar=this.pointSize+this.blurSize,en=this.canvas,tn=en.getContext("2d"),on=n.length;en.width=a,en.height=l;for(var cn=0;cn<on;++cn){var gn=n[cn],Cn=gn[0],ex=gn[1],ix=gn[2],ax=u(ix);tn.globalAlpha=ax,tn.drawImage(d,Cn-ar,ex-ar)}if(!en.width||!en.height)return en;for(var ox=tn.getImageData(0,0,en.width,en.height),lx=ox.data,cx=0,dx=lx.length,hx=this.minOpacity,fx=this.maxOpacity,ux=fx-hx;cx<dx;){var ax=lx[cx+3]/256,gx=Math.floor(ax*(GRADIENT_LEVELS-1))*4;if(ax>0){var yx=p(ax)?Q:Ct;ax>0&&(ax=ax*ux+hx),lx[cx++]=yx[gx],lx[cx++]=yx[gx+1],lx[cx++]=yx[gx+2],lx[cx++]=yx[gx+3]*ax*256}else cx+=4}return tn.putImageData(ox,0,0),en},t.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),a=this.pointSize+this.blurSize,l=a*2;n.width=l,n.height=l;var u=n.getContext("2d");return u.clearRect(0,0,l,l),u.shadowOffsetX=l,u.shadowBlur=this.blurSize,u.shadowColor="#000",u.beginPath(),u.arc(-a,a,this.pointSize,0,Math.PI*2,!0),u.closePath(),u.fill(),n},t.prototype._getGradient=function(n,a){for(var l=this._gradientPixels,u=l[a]||(l[a]=new Uint8ClampedArray(256*4)),c=[0,0,0,0],p=0,d=0;d<256;d++)n[a](d/255,!0,c),u[p++]=c[0],u[p++]=c[1],u[p++]=c[2],u[p++]=c[3];return u},t}();function getIsInPiecewiseRange(t,n,a){var l=t[1]-t[0];n=map$1(n,function(p){return{interval:[(p.interval[0]-t[0])/l,(p.interval[1]-t[0])/l]}});var u=n.length,c=0;return function(p){var d;for(d=c;d<u;d++){var Q=n[d].interval;if(Q[0]<=p&&p<=Q[1]){c=d;break}}if(d===u)for(d=c-1;d>=0;d--){var Q=n[d].interval;if(Q[0]<=p&&p<=Q[1]){c=d;break}}return d>=0&&d<u&&a[d]}}function getIsInContinuousRange(t,n){var a=t[1]-t[0];return n=[(n[0]-t[0])/a,(n[1]-t[0])/a],function(l){return l>=n[0]&&l<=n[1]}}function isGeoCoordSys(t){var n=t.dimensions;return n[0]==="lng"&&n[1]==="lat"}var HeatmapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c;l.eachComponent("visualMap",function(d){d.eachTargetSeries(function(Q){Q===a&&(c=d)})}),this._progressiveEls=null,this.group.removeAll();var p=a.coordinateSystem;p.type==="cartesian2d"||p.type==="calendar"?this._renderOnCartesianAndCalendar(a,u,0,a.getData().count()):isGeoCoordSys(p)&&this._renderOnGeo(p,a,c,u)},n.prototype.incrementalPrepareRender=function(a,l,u){this.group.removeAll()},n.prototype.incrementalRender=function(a,l,u,c){var p=l.coordinateSystem;p&&(isGeoCoordSys(p)?this.render(l,u,c):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(l,c,a.start,a.end,!0)))},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._renderOnCartesianAndCalendar=function(a,l,u,c,p){var d=a.coordinateSystem,Q=isCoordinateSystemType(d,"cartesian2d"),Ct,ar,en,tn;if(Q){var on=d.getAxis("x"),cn=d.getAxis("y");Ct=on.getBandWidth()+.5,ar=cn.getBandWidth()+.5,en=on.scale.getExtent(),tn=cn.scale.getExtent()}for(var gn=this.group,Cn=a.getData(),ex=a.getModel(["emphasis","itemStyle"]).getItemStyle(),ix=a.getModel(["blur","itemStyle"]).getItemStyle(),ax=a.getModel(["select","itemStyle"]).getItemStyle(),ox=a.get(["itemStyle","borderRadius"]),lx=getLabelStatesModels(a),cx=a.getModel("emphasis"),dx=cx.get("focus"),hx=cx.get("blurScope"),fx=cx.get("disabled"),ux=Q?[Cn.mapDimension("x"),Cn.mapDimension("y"),Cn.mapDimension("value")]:[Cn.mapDimension("time"),Cn.mapDimension("value")],gx=u;gx<c;gx++){var yx=void 0,_x=Cn.getItemVisual(gx,"style");if(Q){var vx=Cn.get(ux[0],gx),bx=Cn.get(ux[1],gx);if(isNaN(Cn.get(ux[2],gx))||isNaN(vx)||isNaN(bx)||vx<en[0]||vx>en[1]||bx<tn[0]||bx>tn[1])continue;var xx=d.dataToPoint([vx,bx]);yx=new Rect$2({shape:{x:xx[0]-Ct/2,y:xx[1]-ar/2,width:Ct,height:ar},style:_x})}else{if(isNaN(Cn.get(ux[1],gx)))continue;yx=new Rect$2({z2:1,shape:d.dataToRect([Cn.get(ux[0],gx)]).contentShape,style:_x})}if(Cn.hasItemOption){var Sx=Cn.getItemModel(gx),Ax=Sx.getModel("emphasis");ex=Ax.getModel("itemStyle").getItemStyle(),ix=Sx.getModel(["blur","itemStyle"]).getItemStyle(),ax=Sx.getModel(["select","itemStyle"]).getItemStyle(),ox=Sx.get(["itemStyle","borderRadius"]),dx=Ax.get("focus"),hx=Ax.get("blurScope"),fx=Ax.get("disabled"),lx=getLabelStatesModels(Sx)}yx.shape.r=ox;var Cx=a.getRawValue(gx),Tx="-";Cx&&Cx[2]!=null&&(Tx=Cx[2]+""),setLabelStyle(yx,lx,{labelFetcher:a,labelDataIndex:gx,defaultOpacity:_x.opacity,defaultText:Tx}),yx.ensureState("emphasis").style=ex,yx.ensureState("blur").style=ix,yx.ensureState("select").style=ax,toggleHoverEmphasis(yx,dx,hx,fx),yx.incremental=p,p&&(yx.states.emphasis.hoverLayer=!0),gn.add(yx),Cn.setItemGraphicEl(gx,yx),this._progressiveEls&&this._progressiveEls.push(yx)}},n.prototype._renderOnGeo=function(a,l,u,c){var p=u.targetVisuals.inRange,d=u.targetVisuals.outOfRange,Q=l.getData(),Ct=this._hmLayer||this._hmLayer||new HeatmapLayer;Ct.blurSize=l.get("blurSize"),Ct.pointSize=l.get("pointSize"),Ct.minOpacity=l.get("minOpacity"),Ct.maxOpacity=l.get("maxOpacity");var ar=a.getViewRect().clone(),en=a.getRoamTransform();ar.applyTransform(en);var tn=Math.max(ar.x,0),on=Math.max(ar.y,0),cn=Math.min(ar.width+ar.x,c.getWidth()),gn=Math.min(ar.height+ar.y,c.getHeight()),Cn=cn-tn,ex=gn-on,ix=[Q.mapDimension("lng"),Q.mapDimension("lat"),Q.mapDimension("value")],ax=Q.mapArray(ix,function(dx,hx,fx){var ux=a.dataToPoint([dx,hx]);return ux[0]-=tn,ux[1]-=on,ux.push(fx),ux}),ox=u.getExtent(),lx=u.type==="visualMap.continuous"?getIsInContinuousRange(ox,u.option.range):getIsInPiecewiseRange(ox,u.getPieceList(),u.option.selected);Ct.update(ax,Cn,ex,p.color.getNormalizer(),{inRange:p.color.getColorMapper(),outOfRange:d.color.getColorMapper()},lx);var cx=new ZRImage({style:{width:Cn,height:ex,x:tn,y:on,image:Ct.canvas},silent:!0});this.group.add(cx)},n.type="heatmap",n}(ChartView),HeatmapSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,l){return createSeriesData(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var a=CoordinateSystemManager.get(this.get("coordinateSystem"));if(a&&a.dimensions)return a.dimensions[0]==="lng"&&a.dimensions[1]==="lat"},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel);function install$v(t){t.registerChartView(HeatmapView),t.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=this.group,p=a.getData(),d=this._data,Q=a.coordinateSystem,Ct=Q.getBaseAxis(),ar=Ct.isHorizontal(),en=Q.master.getRect(),tn={ecSize:{width:u.getWidth(),height:u.getHeight()},seriesModel:a,coordSys:Q,coordSysExtent:[[en.x,en.x+en.width],[en.y,en.y+en.height]],isHorizontal:ar,valueDim:LAYOUT_ATTRS[+ar],categoryDim:LAYOUT_ATTRS[1-+ar]};p.diff(d).add(function(cn){if(p.hasValue(cn)){var gn=getItemModel(p,cn),Cn=getSymbolMeta(p,cn,gn,tn),ex=createBar(p,tn,Cn);p.setItemGraphicEl(cn,ex),c.add(ex),updateCommon(ex,tn,Cn)}}).update(function(cn,gn){var Cn=d.getItemGraphicEl(gn);if(!p.hasValue(cn)){c.remove(Cn);return}var ex=getItemModel(p,cn),ix=getSymbolMeta(p,cn,ex,tn),ax=getShapeStr(p,ix);Cn&&ax!==Cn.__pictorialShapeStr&&(c.remove(Cn),p.setItemGraphicEl(cn,null),Cn=null),Cn?updateBar(Cn,tn,ix):Cn=createBar(p,tn,ix,!0),p.setItemGraphicEl(cn,Cn),Cn.__pictorialSymbolMeta=ix,c.add(Cn),updateCommon(Cn,tn,ix)}).remove(function(cn){var gn=d.getItemGraphicEl(cn);gn&&removeBar(d,cn,gn.__pictorialSymbolMeta.animationModel,gn)}).execute();var on=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;return on?c.setClipPath(on):c.removeClipPath(),this._data=p,this.group},n.prototype.remove=function(a,l){var u=this.group,c=this._data;a.get("animation")?c&&c.eachItemGraphicEl(function(p){removeBar(c,getECData(p).dataIndex,a,p)}):u.removeAll()},n.type="pictorialBar",n}(ChartView);function getSymbolMeta(t,n,a,l){var u=t.getItemLayout(n),c=a.get("symbolRepeat"),p=a.get("symbolClip"),d=a.get("symbolPosition")||"start",Q=a.get("symbolRotate"),Ct=(Q||0)*Math.PI/180||0,ar=a.get("symbolPatternSize")||2,en=a.isAnimationEnabled(),tn={dataIndex:n,layout:u,itemModel:a,symbolType:t.getItemVisual(n,"symbol")||"circle",style:t.getItemVisual(n,"style"),symbolClip:p,symbolRepeat:c,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:ar,rotation:Ct,animationModel:en?a:null,hoverScale:en&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};prepareBarLength(a,c,u,l,tn),prepareSymbolSize(t,n,u,c,p,tn.boundingLength,tn.pxSign,ar,l,tn),prepareLineWidth(a,tn.symbolScale,Ct,l,tn);var on=tn.symbolSize,cn=normalizeSymbolOffset(a.get("symbolOffset"),on);return prepareLayoutInfo(a,on,u,c,p,cn,d,tn.valueLineWidth,tn.boundingLength,tn.repeatCutLength,l,tn),tn}function prepareBarLength(t,n,a,l,u){var c=l.valueDim,p=t.get("symbolBoundingData"),d=l.coordSys.getOtherAxis(l.coordSys.getBaseAxis()),Q=d.toGlobalCoord(d.dataToCoord(0)),Ct=1-+(a[c.wh]<=0),ar;if(isArray$1(p)){var en=[convertToCoordOnAxis(d,p[0])-Q,convertToCoordOnAxis(d,p[1])-Q];en[1]<en[0]&&en.reverse(),ar=en[Ct]}else p!=null?ar=convertToCoordOnAxis(d,p)-Q:n?ar=l.coordSysExtent[c.index][Ct]-Q:ar=a[c.wh];u.boundingLength=ar,n&&(u.repeatCutLength=a[c.wh]);var tn=c.xy==="x",on=d.inverse;u.pxSign=tn&&!on||!tn&&on?ar>=0?1:-1:ar>0?1:-1}function convertToCoordOnAxis(t,n){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(n)))}function prepareSymbolSize(t,n,a,l,u,c,p,d,Q,Ct){var ar=Q.valueDim,en=Q.categoryDim,tn=Math.abs(a[en.wh]),on=t.getItemVisual(n,"symbolSize"),cn;isArray$1(on)?cn=on.slice():on==null?cn=["100%","100%"]:cn=[on,on],cn[en.index]=parsePercent(cn[en.index],tn),cn[ar.index]=parsePercent(cn[ar.index],l?tn:Math.abs(c)),Ct.symbolSize=cn;var gn=Ct.symbolScale=[cn[0]/d,cn[1]/d];gn[ar.index]*=(Q.isHorizontal?-1:1)*p}function prepareLineWidth(t,n,a,l,u){var c=t.get(BAR_BORDER_WIDTH_QUERY)||0;c&&(pathForLineWidth.attr({scaleX:n[0],scaleY:n[1],rotation:a}),pathForLineWidth.updateTransform(),c/=pathForLineWidth.getLineScale(),c*=n[l.valueDim.index]),u.valueLineWidth=c||0}function prepareLayoutInfo(t,n,a,l,u,c,p,d,Q,Ct,ar,en){var tn=ar.categoryDim,on=ar.valueDim,cn=en.pxSign,gn=Math.max(n[on.index]+d,0),Cn=gn;if(l){var ex=Math.abs(Q),ix=retrieve(t.get("symbolMargin"),"15%")+"",ax=!1;ix.lastIndexOf("!")===ix.length-1&&(ax=!0,ix=ix.slice(0,ix.length-1));var ox=parsePercent(ix,n[on.index]),lx=Math.max(gn+ox*2,0),cx=ax?0:ox*2,dx=isNumeric(l),hx=dx?l:toIntTimes((ex+cx)/lx),fx=ex-hx*gn;ox=fx/2/(ax?hx:Math.max(hx-1,1)),lx=gn+ox*2,cx=ax?0:ox*2,!dx&&l!=="fixed"&&(hx=Ct?toIntTimes((Math.abs(Ct)+cx)/lx):0),Cn=hx*lx-cx,en.repeatTimes=hx,en.symbolMargin=ox}var ux=cn*(Cn/2),gx=en.pathPosition=[];gx[tn.index]=a[tn.wh]/2,gx[on.index]=p==="start"?ux:p==="end"?Q-ux:Q/2,c&&(gx[0]+=c[0],gx[1]+=c[1]);var yx=en.bundlePosition=[];yx[tn.index]=a[tn.xy],yx[on.index]=a[on.xy];var _x=en.barRectShape=extend({},a);_x[on.wh]=cn*Math.max(Math.abs(a[on.wh]),Math.abs(gx[on.index]+ux)),_x[tn.wh]=a[tn.wh];var vx=en.clipShape={};vx[tn.xy]=-a[tn.xy],vx[tn.wh]=ar.ecSize[tn.wh],vx[on.xy]=0,vx[on.wh]=a[on.wh]}function createPath(t){var n=t.symbolPatternSize,a=createSymbol$1(t.symbolType,-n/2,-n/2,n,n);return a.attr({culling:!0}),a.type!=="image"&&a.setStyle({strokeNoScale:!0}),a}function createOrUpdateRepeatSymbols(t,n,a,l){var u=t.__pictorialBundle,c=a.symbolSize,p=a.valueLineWidth,d=a.pathPosition,Q=n.valueDim,Ct=a.repeatTimes||0,ar=0,en=c[n.valueDim.index]+p+a.symbolMargin*2;for(eachPath(t,function(gn){gn.__pictorialAnimationIndex=ar,gn.__pictorialRepeatTimes=Ct,ar<Ct?updateAttr(gn,null,cn(ar),a,l):updateAttr(gn,null,{scaleX:0,scaleY:0},a,l,function(){u.remove(gn)}),ar++});ar<Ct;ar++){var tn=createPath(a);tn.__pictorialAnimationIndex=ar,tn.__pictorialRepeatTimes=Ct,u.add(tn);var on=cn(ar);updateAttr(tn,{x:on.x,y:on.y,scaleX:0,scaleY:0},{scaleX:on.scaleX,scaleY:on.scaleY,rotation:on.rotation},a,l)}function cn(gn){var Cn=d.slice(),ex=a.pxSign,ix=gn;return(a.symbolRepeatDirection==="start"?ex>0:ex<0)&&(ix=Ct-1-gn),Cn[Q.index]=en*(ix-Ct/2+.5)+d[Q.index],{x:Cn[0],y:Cn[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function createOrUpdateSingleSymbol(t,n,a,l){var u=t.__pictorialBundle,c=t.__pictorialMainPath;c?updateAttr(c,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,l):(c=t.__pictorialMainPath=createPath(a),u.add(c),updateAttr(c,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,l))}function createOrUpdateBarRect(t,n,a){var l=extend({},n.barRectShape),u=t.__pictorialBarRect;u?updateAttr(u,null,{shape:l},n,a):(u=t.__pictorialBarRect=new Rect$2({z2:2,shape:l,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),u.disableMorphing=!0,t.add(u))}function createOrUpdateClip(t,n,a,l){if(a.symbolClip){var u=t.__pictorialClipPath,c=extend({},a.clipShape),p=n.valueDim,d=a.animationModel,Q=a.dataIndex;if(u)updateProps$1(u,{shape:c},d,Q);else{c[p.wh]=0,u=new Rect$2({shape:c}),t.__pictorialBundle.setClipPath(u),t.__pictorialClipPath=u;var Ct={};Ct[p.wh]=a.clipShape[p.wh],graphic$1[l?"updateProps":"initProps"](u,{shape:Ct},d,Q)}}}function getItemModel(t,n){var a=t.getItemModel(n);return a.getAnimationDelayParams=getAnimationDelayParams,a.isAnimationEnabled=isAnimationEnabled,a}function getAnimationDelayParams(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(t,n,a,l){var u=new Group$3,c=new Group$3;return u.add(c),u.__pictorialBundle=c,c.x=a.bundlePosition[0],c.y=a.bundlePosition[1],a.symbolRepeat?createOrUpdateRepeatSymbols(u,n,a):createOrUpdateSingleSymbol(u,n,a),createOrUpdateBarRect(u,a,l),createOrUpdateClip(u,n,a,l),u.__pictorialShapeStr=getShapeStr(t,a),u.__pictorialSymbolMeta=a,u}function updateBar(t,n,a){var l=a.animationModel,u=a.dataIndex,c=t.__pictorialBundle;updateProps$1(c,{x:a.bundlePosition[0],y:a.bundlePosition[1]},l,u),a.symbolRepeat?createOrUpdateRepeatSymbols(t,n,a,!0):createOrUpdateSingleSymbol(t,n,a,!0),createOrUpdateBarRect(t,a,!0),createOrUpdateClip(t,n,a,!0)}function removeBar(t,n,a,l){var u=l.__pictorialBarRect;u&&u.removeTextContent();var c=[];eachPath(l,function(p){c.push(p)}),l.__pictorialMainPath&&c.push(l.__pictorialMainPath),l.__pictorialClipPath&&(a=null),each$f(c,function(p){removeElement(p,{scaleX:0,scaleY:0},a,n,function(){l.parent&&l.parent.remove(l)})}),t.setItemGraphicEl(n,null)}function getShapeStr(t,n){return[t.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function eachPath(t,n,a){each$f(t.__pictorialBundle.children(),function(l){l!==t.__pictorialBarRect&&n.call(a,l)})}function updateAttr(t,n,a,l,u,c){n&&t.attr(n),l.symbolClip&&!u?a&&t.attr(a):a&&graphic$1[u?"updateProps":"initProps"](t,a,l.animationModel,l.dataIndex,c)}function updateCommon(t,n,a){var l=a.dataIndex,u=a.itemModel,c=u.getModel("emphasis"),p=c.getModel("itemStyle").getItemStyle(),d=u.getModel(["blur","itemStyle"]).getItemStyle(),Q=u.getModel(["select","itemStyle"]).getItemStyle(),Ct=u.getShallow("cursor"),ar=c.get("focus"),en=c.get("blurScope"),tn=c.get("scale");eachPath(t,function(gn){if(gn instanceof ZRImage){var Cn=gn.style;gn.useStyle(extend({image:Cn.image,x:Cn.x,y:Cn.y,width:Cn.width,height:Cn.height},a.style))}else gn.useStyle(a.style);var ex=gn.ensureState("emphasis");ex.style=p,tn&&(ex.scaleX=gn.scaleX*1.1,ex.scaleY=gn.scaleY*1.1),gn.ensureState("blur").style=d,gn.ensureState("select").style=Q,Ct&&(gn.cursor=Ct),gn.z2=a.z2});var on=n.valueDim.posDesc[+(a.boundingLength>0)],cn=t.__pictorialBarRect;cn.ignoreClip=!0,setLabelStyle(cn,getLabelStatesModels(u),{labelFetcher:n.seriesModel,labelDataIndex:l,defaultText:getDefaultLabel(n.seriesModel.getData(),l),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:on}),toggleHoverEmphasis(t,ar,en,c.get("disabled"))}function toIntTimes(t){var n=Math.round(t);return Math.abs(t-n)<1e-4?n:Math.ceil(t)}var PictorialBarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return n.prototype.getInitialData=function(a){return a.stack=null,t.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n}(BaseBarSeriesModel);function install$u(t){t.registerChartView(PictorialBarView),t.registerSeriesModel(PictorialBarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._layers=[],a}return n.prototype.render=function(a,l,u){var c=a.getData(),p=this,d=this.group,Q=a.getLayerSeries(),Ct=c.getLayout("layoutInfo"),ar=Ct.rect,en=Ct.boundaryGap;d.x=0,d.y=ar.y+en[0];function tn(Cn){return Cn.name}var on=new DataDiffer(this._layersSeries||[],Q,tn,tn),cn=[];on.add(bind$1(gn,this,"add")).update(bind$1(gn,this,"update")).remove(bind$1(gn,this,"remove")).execute();function gn(Cn,ex,ix){var ax=p._layers;if(Cn==="remove"){d.remove(ax[ex]);return}for(var ox=[],lx=[],cx,dx=Q[ex].indices,hx=0;hx<dx.length;hx++){var fx=c.getItemLayout(dx[hx]),ux=fx.x,gx=fx.y0,yx=fx.y;ox.push(ux,gx),lx.push(ux,gx+yx),cx=c.getItemVisual(dx[hx],"style")}var _x,vx=c.getItemLayout(dx[0]),bx=a.getModel("label"),xx=bx.get("margin"),Sx=a.getModel("emphasis");if(Cn==="add"){var Ax=cn[ex]=new Group$3;_x=new ECPolygon({shape:{points:ox,stackedOnPoints:lx,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Ax.add(_x),d.add(Ax),a.isAnimationEnabled()&&_x.setClipPath(createGridClipShape(_x.getBoundingRect(),a,function(){_x.removeClipPath()}))}else{var Ax=ax[ix];_x=Ax.childAt(0),d.add(Ax),cn[ex]=Ax,updateProps$1(_x,{shape:{points:ox,stackedOnPoints:lx}},a),saveOldStyle(_x)}setLabelStyle(_x,getLabelStatesModels(a),{labelDataIndex:dx[hx-1],defaultText:c.getName(dx[hx-1]),inheritColor:cx.fill},{normal:{verticalAlign:"middle"}}),_x.setTextConfig({position:null,local:!0});var Cx=_x.getTextContent();Cx&&(Cx.x=vx.x-xx,Cx.y=vx.y0+vx.y/2),_x.useStyle(cx),c.setItemGraphicEl(ex,_x),setStatesStylesFromModel(_x,a),toggleHoverEmphasis(_x,Sx.get("focus"),Sx.get("blurScope"),Sx.get("disabled"))}this._layersSeries=Q,this._layers=cn},n.type="themeRiver",n}(ChartView);function createGridClipShape(t,n,a){var l=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(l,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},n,a),l}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.fixData=function(a){var l=a.length,u={},c=groupData(a,function(tn){return u.hasOwnProperty(tn[0]+"")||(u[tn[0]+""]=-1),tn[2]}),p=[];c.buckets.each(function(tn,on){p.push({name:on,dataList:tn})});for(var d=p.length,Q=0;Q<d;++Q){for(var Ct=p[Q].name,ar=0;ar<p[Q].dataList.length;++ar){var en=p[Q].dataList[ar][0]+"";u[en]=Q}for(var en in u)u.hasOwnProperty(en)&&u[en]!==Q&&(u[en]=Q,a[l]=[en,0,Ct],l++)}return a},n.prototype.getInitialData=function(a,l){for(var u=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],c=u.get("type"),p=filter(a.data,function(cn){return cn[2]!==void 0}),d=this.fixData(p||[]),Q=[],Ct=this.nameMap=createHashMap(),ar=0,en=0;en<d.length;++en)Q.push(d[en][DATA_NAME_INDEX]),Ct.get(d[en][DATA_NAME_INDEX])||(Ct.set(d[en][DATA_NAME_INDEX],ar),ar++);var tn=prepareSeriesDataSchema(d,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(c)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,on=new SeriesData(tn,this);return on.initData(d),on},n.prototype.getLayerSeries=function(){for(var a=this.getData(),l=a.count(),u=[],c=0;c<l;++c)u[c]=c;var p=a.mapDimension("single"),d=groupData(u,function(Ct){return a.get("name",Ct)}),Q=[];return d.buckets.each(function(Ct,ar){Ct.sort(function(en,tn){return a.get(p,en)-a.get(p,tn)}),Q.push({name:ar,indices:Ct})}),Q},n.prototype.getAxisTooltipData=function(a,l,u){isArray$1(a)||(a=a?[a]:[]);for(var c=this.getData(),p=this.getLayerSeries(),d=[],Q=p.length,Ct,ar=0;ar<Q;++ar){for(var en=Number.MAX_VALUE,tn=-1,on=p[ar].indices.length,cn=0;cn<on;++cn){var gn=c.get(a[0],p[ar].indices[cn]),Cn=Math.abs(gn-l);Cn<=en&&(Ct=gn,en=Cn,tn=p[ar].indices[cn])}d.push(tn)}return{dataIndices:d,nestestValue:Ct}},n.prototype.formatTooltip=function(a,l,u){var c=this.getData(),p=c.getName(a),d=c.get(c.mapDimension("value"),a);return createTooltipMarkup("nameValue",{name:p,value:d})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n}(SeriesModel);function themeRiverLayout(t,n){t.eachSeriesByType("themeRiver",function(a){var l=a.getData(),u=a.coordinateSystem,c={},p=u.getRect();c.rect=p;var d=a.get("boundaryGap"),Q=u.getAxis();if(c.boundaryGap=d,Q.orient==="horizontal"){d[0]=parsePercent(d[0],p.height),d[1]=parsePercent(d[1],p.height);var Ct=p.height-d[0]-d[1];doThemeRiverLayout(l,a,Ct)}else{d[0]=parsePercent(d[0],p.width),d[1]=parsePercent(d[1],p.width);var ar=p.width-d[0]-d[1];doThemeRiverLayout(l,a,ar)}l.setLayout("layoutInfo",c)})}function doThemeRiverLayout(t,n,a){if(t.count())for(var l=n.coordinateSystem,u=n.getLayerSeries(),c=t.mapDimension("single"),p=t.mapDimension("value"),d=map$1(u,function(Cn){return map$1(Cn.indices,function(ex){var ix=l.dataToPoint(t.get(c,ex));return ix[1]=t.get(p,ex),ix})}),Q=computeBaseline(d),Ct=Q.y0,ar=a/Q.max,en=u.length,tn=u[0].indices.length,on,cn=0;cn<tn;++cn){on=Ct[cn]*ar,t.setItemLayout(u[0].indices[cn],{layerIndex:0,x:d[0][cn][0],y0:on,y:d[0][cn][1]*ar});for(var gn=1;gn<en;++gn)on+=d[gn-1][cn][1]*ar,t.setItemLayout(u[gn].indices[cn],{layerIndex:gn,x:d[gn][cn][0],y0:on,y:d[gn][cn][1]*ar})}}function computeBaseline(t){for(var n=t.length,a=t[0].length,l=[],u=[],c=0,p=0;p<a;++p){for(var d=0,Q=0;Q<n;++Q)d+=t[Q][p][1];d>c&&(c=d),l.push(d)}for(var Ct=0;Ct<a;++Ct)u[Ct]=(c-l[Ct])/2;c=0;for(var ar=0;ar<a;++ar){var en=l[ar]+u[ar];en>c&&(c=en)}return{y0:u,max:c}}function install$t(t){t.registerChartView(ThemeRiverView),t.registerSeriesModel(ThemeRiverSeriesModel),t.registerLayout(themeRiverLayout),t.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(t){__extends(n,t);function n(a,l,u,c){var p=t.call(this)||this;p.z2=DEFAULT_SECTOR_Z,p.textConfig={inside:!0},getECData(p).seriesIndex=l.seriesIndex;var d=new ZRText({z2:DEFAULT_TEXT_Z,silent:a.getModel().get(["label","silent"])});return p.setTextContent(d),p.updateData(!0,a,l,u,c),p}return n.prototype.updateData=function(a,l,u,c,p){this.node=l,l.piece=this,u=u||this._seriesModel,c=c||this._ecModel;var d=this;getECData(d).dataIndex=l.dataIndex;var Q=l.getModel(),Ct=Q.getModel("emphasis"),ar=l.getLayout(),en=extend({},ar);en.label=null;var tn=l.getVisual("style");tn.lineJoin="bevel";var on=l.getVisual("decal");on&&(tn.decal=createOrUpdatePatternFromDecal(on,p));var cn=getSectorCornerRadius(Q.getModel("itemStyle"),en,!0);extend(en,cn),each$f(SPECIAL_STATES,function(ix){var ax=d.ensureState(ix),ox=Q.getModel([ix,"itemStyle"]);ax.style=ox.getItemStyle();var lx=getSectorCornerRadius(ox,en);lx&&(ax.shape=lx)}),a?(d.setShape(en),d.shape.r=ar.r0,initProps(d,{shape:{r:ar.r}},u,l.dataIndex)):(updateProps$1(d,{shape:en},u),saveOldStyle(d)),d.useStyle(tn),this._updateLabel(u);var gn=Q.getShallow("cursor");gn&&d.attr("cursor",gn),this._seriesModel=u||this._seriesModel,this._ecModel=c||this._ecModel;var Cn=Ct.get("focus"),ex=Cn==="relative"?concatArray(l.getAncestorsIndices(),l.getDescendantIndices()):Cn==="ancestor"?l.getAncestorsIndices():Cn==="descendant"?l.getDescendantIndices():Cn;toggleHoverEmphasis(this,ex,Ct.get("blurScope"),Ct.get("disabled"))},n.prototype._updateLabel=function(a){var l=this,u=this.node.getModel(),c=u.getModel("label"),p=this.node.getLayout(),d=p.endAngle-p.startAngle,Q=(p.startAngle+p.endAngle)/2,Ct=Math.cos(Q),ar=Math.sin(Q),en=this,tn=en.getTextContent(),on=this.node.dataIndex,cn=c.get("minAngle")/180*Math.PI,gn=c.get("show")&&!(cn!=null&&Math.abs(d)<cn);tn.ignore=!gn,each$f(DISPLAY_STATES,function(ex){var ix=ex==="normal"?u.getModel("label"):u.getModel([ex,"label"]),ax=ex==="normal",ox=ax?tn:tn.ensureState(ex),lx=a.getFormattedLabel(on,ex);ax&&(lx=lx||l.node.name),ox.style=createTextStyle$1(ix,{},null,ex!=="normal",!0),lx&&(ox.style.text=lx);var cx=ix.get("show");cx!=null&&!ax&&(ox.ignore=!cx);var dx=Cn(ix,"position"),hx=ax?en:en.states[ex],fx=hx.style.fill;hx.textConfig={outsideFill:ix.get("color")==="inherit"?fx:null,inside:dx!=="outside"};var ux,gx=Cn(ix,"distance")||0,yx=Cn(ix,"align"),_x=Cn(ix,"rotate"),vx=Math.PI*.5,bx=Math.PI*1.5,xx=normalizeRadian(_x==="tangential"?Math.PI/2-Q:Q),Sx=xx>vx&&!isRadianAroundZero(xx-vx)&&xx<bx;dx==="outside"?(ux=p.r+gx,yx=Sx?"right":"left"):!yx||yx==="center"?(d===2*Math.PI&&p.r0===0?ux=0:ux=(p.r+p.r0)/2,yx="center"):yx==="left"?(ux=p.r0+gx,yx=Sx?"right":"left"):yx==="right"&&(ux=p.r-gx,yx=Sx?"left":"right"),ox.style.align=yx,ox.style.verticalAlign=Cn(ix,"verticalAlign")||"middle",ox.x=ux*Ct+p.cx,ox.y=ux*ar+p.cy;var Ax=0;_x==="radial"?Ax=normalizeRadian(-Q)+(Sx?Math.PI:0):_x==="tangential"?Ax=normalizeRadian(Math.PI/2-Q)+(Sx?Math.PI:0):isNumber(_x)&&(Ax=_x*Math.PI/180),ox.rotation=normalizeRadian(Ax)});function Cn(ex,ix){var ax=ex.get(ix);return ax??c.get(ix)}tn.dirtyStyle()},n}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(t){t.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(n,a){a.eachComponent({mainType:"series",subType:"sunburst",query:n},l);function l(u,c){var p=retrieveTargetInfo(n,[ROOT_TO_NODE_ACTION],u);if(p){var d=u.getViewRoot();d&&(n.direction=aboveViewRoot(d,p.node)?"rollUp":"drillDown"),u.resetViewRoot(p.node)}}}),t.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(n,a,l){n=extend({},n),a.eachComponent({mainType:"series",subType:"sunburst",query:n},u);function u(c){var p=retrieveTargetInfo(n,[HIGHLIGHT_ACTION],c);p&&(n.dataIndex=p.node.dataIndex)}l.dispatchAction(extend(n,{type:"highlight"}))}),t.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(n,a,l){n=extend({},n),l.dispatchAction(extend(n,{type:"downplay"}))})}var SunburstView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u,c){var p=this;this.seriesModel=a,this.api=u,this.ecModel=l;var d=a.getData(),Q=d.tree.root,Ct=a.getViewRoot(),ar=this.group,en=a.get("renderLabelForZeroData"),tn=[];Ct.eachNode(function(ix){tn.push(ix)});var on=this._oldChildren||[];cn(tn,on),ex(Q,Ct),this._initEvents(),this._oldChildren=tn;function cn(ix,ax){if(ix.length===0&&ax.length===0)return;new DataDiffer(ax,ix,ox,ox).add(lx).update(lx).remove(curry$1(lx,null)).execute();function ox(cx){return cx.getId()}function lx(cx,dx){var hx=cx==null?null:ix[cx],fx=dx==null?null:ax[dx];gn(hx,fx)}}function gn(ix,ax){if(!en&&ix&&!ix.getValue()&&(ix=null),ix!==Q&&ax!==Q){if(ax&&ax.piece)ix?(ax.piece.updateData(!1,ix,a,l,u),d.setItemGraphicEl(ix.dataIndex,ax.piece)):Cn(ax);else if(ix){var ox=new SunburstPiece(ix,a,l,u);ar.add(ox),d.setItemGraphicEl(ix.dataIndex,ox)}}}function Cn(ix){ix&&ix.piece&&(ar.remove(ix.piece),ix.piece=null)}function ex(ix,ax){ax.depth>0?(p.virtualPiece?p.virtualPiece.updateData(!1,ix,a,l,u):(p.virtualPiece=new SunburstPiece(ix,a,l,u),ar.add(p.virtualPiece)),ax.piece.off("click"),p.virtualPiece.on("click",function(ox){p._rootToNode(ax.parentNode)})):p.virtualPiece&&(ar.remove(p.virtualPiece),p.virtualPiece=null)}},n.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(l){var u=!1,c=a.seriesModel.getViewRoot();c.eachNode(function(p){if(!u&&p.piece&&p.piece===l.target){var d=p.getModel().get("nodeClick");if(d==="rootToNode")a._rootToNode(p);else if(d==="link"){var Q=p.getModel(),Ct=Q.get("link");if(Ct){var ar=Q.get("target",!0)||"_blank";windowOpen(Ct,ar)}}u=!0}})})},n.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},n.prototype.containPoint=function(a,l){var u=l.getData(),c=u.getItemLayout(0);if(c){var p=a[0]-c.cx,d=a[1]-c.cy,Q=Math.sqrt(p*p+d*d);return Q<=c.r&&Q>=c.r0}},n.type="sunburst",n}(ChartView),SunburstSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a,l){var u={name:a.name,children:a.data};completeTreeValue(u);var c=this._levelModels=map$1(a.levels||[],function(Q){return new Model(Q,this,l)},this),p=Tree.createTree(u,this,d);function d(Q){Q.wrapMethod("getItemModel",function(Ct,ar){var en=p.getNodeByDataIndex(ar),tn=c[en.depth];return tn&&(Ct.parentModel=tn),Ct})}return p.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(a){var l=t.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treePathInfo=wrapTreePathInfo(u,this),l},n.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n}(SeriesModel);function completeTreeValue(t){var n=0;each$f(t.children,function(l){completeTreeValue(l);var u=l.value;isArray$1(u)&&(u=u[0]),n+=u});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}var RADIAN=Math.PI/180;function sunburstLayout(t,n,a){n.eachSeriesByType(t,function(l){var u=l.get("center"),c=l.get("radius");isArray$1(c)||(c=[0,c]),isArray$1(u)||(u=[u,u]);var p=a.getWidth(),d=a.getHeight(),Q=Math.min(p,d),Ct=parsePercent(u[0],p),ar=parsePercent(u[1],d),en=parsePercent(c[0],Q/2),tn=parsePercent(c[1],Q/2),on=-l.get("startAngle")*RADIAN,cn=l.get("minAngle")*RADIAN,gn=l.getData().tree.root,Cn=l.getViewRoot(),ex=Cn.depth,ix=l.get("sort");ix!=null&&initChildren(Cn,ix);var ax=0;each$f(Cn.children,function(xx){!isNaN(xx.getValue())&&ax++});var ox=Cn.getValue(),lx=Math.PI/(ox||ax)*2,cx=Cn.depth>0,dx=Cn.height-(cx?-1:1),hx=(tn-en)/(dx||1),fx=l.get("clockwise"),ux=l.get("stillShowZeroSum"),gx=fx?1:-1,yx=function(xx,Sx){if(xx){var Ax=Sx;if(xx!==gn){var Cx=xx.getValue(),Tx=ox===0&&ux?lx:Cx*lx;Tx<cn&&(Tx=cn),Ax=Sx+gx*Tx;var Px=xx.depth-ex-(cx?-1:1),Fx=en+hx*Px,Mx=en+hx*(Px+1),Dx=l.getLevelModel(xx);if(Dx){var Ox=Dx.get("r0",!0),Lx=Dx.get("r",!0),Nx=Dx.get("radius",!0);Nx!=null&&(Ox=Nx[0],Lx=Nx[1]),Ox!=null&&(Fx=parsePercent(Ox,Q/2)),Lx!=null&&(Mx=parsePercent(Lx,Q/2))}xx.setLayout({angle:Tx,startAngle:Sx,endAngle:Ax,clockwise:fx,cx:Ct,cy:ar,r0:Fx,r:Mx})}if(xx.children&&xx.children.length){var Gx=0;each$f(xx.children,function(Ux){Gx+=yx(Ux,Sx+Gx)})}return Ax-Sx}};if(cx){var _x=en,vx=en+hx,bx=Math.PI*2;gn.setLayout({angle:bx,startAngle:on,endAngle:on+bx,clockwise:fx,cx:Ct,cy:ar,r0:_x,r:vx})}yx(Cn,on)})}function initChildren(t,n){var a=t.children||[];t.children=sort(a,n),a.length&&each$f(t.children,function(l){initChildren(l,n)})}function sort(t,n){if(isFunction$1(n)){var a=map$1(t,function(u,c){var p=u.getValue();return{params:{depth:u.depth,height:u.height,dataIndex:u.dataIndex,getValue:function(){return p}},index:c}});return a.sort(function(u,c){return n(u.params,c.params)}),map$1(a,function(u){return t[u.index]})}else{var l=n==="asc";return t.sort(function(u,c){var p=(u.getValue()-c.getValue())*(l?1:-1);return p===0?(u.dataIndex-c.dataIndex)*(l?-1:1):p})}}function sunburstVisual(t){var n={};function a(l,u,c){for(var p=l;p&&p.depth>1;)p=p.parentNode;var d=u.getColorFromPalette(p.name||p.dataIndex+"",n);return l.depth>1&&isString$1(d)&&(d=lift(d,(l.depth-1)/(c-1)*.5)),d}t.eachSeriesByType("sunburst",function(l){var u=l.getData(),c=u.tree;c.eachNode(function(p){var d=p.getModel(),Q=d.getModel("itemStyle").getItemStyle();Q.fill||(Q.fill=a(p,l,c.root.height));var Ct=u.ensureUniqueItemVisual(p.dataIndex,"style");extend(Ct,Q)})})}function install$s(t){t.registerChartView(SunburstView),t.registerSeriesModel(SunburstSeriesModel),t.registerLayout(curry$1(sunburstLayout,"sunburst")),t.registerProcessor(curry$1(dataFilter$1,"sunburst")),t.registerVisual(sunburstVisual),installSunburstAction(t)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(a,l){return createSeriesData(null,this)},n.prototype.getDataParams=function(a,l,u){var c=t.prototype.getDataParams.call(this,a,l);return u&&(c.info=customInnerStore(u).info),c},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n}(SeriesModel);function dataToCoordSize$3(t,n){return n=n||[0,0],map$1(["x","y"],function(a,l){var u=this.getAxis(a),c=n[l],p=t[l]/2;return u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-p)-u.dataToCoord(c+p))},this)}function cartesianPrepareCustom(t){var n=t.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$3,t)}}}function dataToCoordSize$2(t,n){return n=n||[0,0],map$1([0,1],function(a){var l=n[a],u=t[a]/2,c=[],p=[];return c[a]=l-u,p[a]=l+u,c[1-a]=p[1-a]=n[1-a],Math.abs(this.dataToPoint(c)[a]-this.dataToPoint(p)[a])},this)}function geoPrepareCustom(t){var n=t.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:t.getZoom()},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$2,t)}}}function dataToCoordSize$1(t,n){var a=this.getAxis(),l=n instanceof Array?n[0]:n,u=(t instanceof Array?t[0]:t)/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(l-u)-a.dataToCoord(l+u))}function singlePrepareCustom(t){var n=t.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$1,t)}}}function dataToCoordSize(t,n){return n=n||[0,0],map$1(["Radius","Angle"],function(a,l){var u="get"+a+"Axis",c=this[u](),p=n[l],d=t[l]/2,Q=c.type==="category"?c.getBandWidth():Math.abs(c.dataToCoord(p-d)-c.dataToCoord(p+d));return a==="Angle"&&(Q=Q*Math.PI/180),Q},this)}function polarPrepareCustom(t){var n=t.getRadiusAxis(),a=t.getAngleAxis(),l=n.getExtent();return l[0]>l[1]&&l.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:l[1],r0:l[0]},api:{coord:function(u){var c=n.dataToRadius(u[0]),p=a.dataToAngle(u[1]),d=t.coordToPoint([c,p]);return d.push(c,p*Math.PI/180),d},size:bind$1(dataToCoordSize,t)}}}function calendarPrepareCustom(t){var n=t.getRect(),a=t.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(l,u){return t.dataToPoint(l,u)}}}}function isEC4CompatibleStyle(t,n,a,l){return t&&(t.legacy||t.legacy!==!1&&!a&&!l&&n!=="tspan"&&(n==="text"||hasOwn(t,"text")))}function convertFromEC4CompatibleStyle(t,n,a){var l=t,u,c,p;if(n==="text")p=l;else{p={},hasOwn(l,"text")&&(p.text=l.text),hasOwn(l,"rich")&&(p.rich=l.rich),hasOwn(l,"textFill")&&(p.fill=l.textFill),hasOwn(l,"textStroke")&&(p.stroke=l.textStroke),hasOwn(l,"fontFamily")&&(p.fontFamily=l.fontFamily),hasOwn(l,"fontSize")&&(p.fontSize=l.fontSize),hasOwn(l,"fontStyle")&&(p.fontStyle=l.fontStyle),hasOwn(l,"fontWeight")&&(p.fontWeight=l.fontWeight),c={type:"text",style:p,silent:!0},u={};var d=hasOwn(l,"textPosition");a?u.position=d?l.textPosition:"inside":d&&(u.position=l.textPosition),hasOwn(l,"textPosition")&&(u.position=l.textPosition),hasOwn(l,"textOffset")&&(u.offset=l.textOffset),hasOwn(l,"textRotation")&&(u.rotation=l.textRotation),hasOwn(l,"textDistance")&&(u.distance=l.textDistance)}return convertEC4CompatibleRichItem(p,t),each$f(p.rich,function(Q){convertEC4CompatibleRichItem(Q,Q)}),{textConfig:u,textContent:c}}function convertEC4CompatibleRichItem(t,n){n&&(n.font=n.textFont||n.font,hasOwn(n,"textStrokeWidth")&&(t.lineWidth=n.textStrokeWidth),hasOwn(n,"textAlign")&&(t.align=n.textAlign),hasOwn(n,"textVerticalAlign")&&(t.verticalAlign=n.textVerticalAlign),hasOwn(n,"textLineHeight")&&(t.lineHeight=n.textLineHeight),hasOwn(n,"textWidth")&&(t.width=n.textWidth),hasOwn(n,"textHeight")&&(t.height=n.textHeight),hasOwn(n,"textBackgroundColor")&&(t.backgroundColor=n.textBackgroundColor),hasOwn(n,"textPadding")&&(t.padding=n.textPadding),hasOwn(n,"textBorderColor")&&(t.borderColor=n.textBorderColor),hasOwn(n,"textBorderWidth")&&(t.borderWidth=n.textBorderWidth),hasOwn(n,"textBorderRadius")&&(t.borderRadius=n.textBorderRadius),hasOwn(n,"textBoxShadowColor")&&(t.shadowColor=n.textBoxShadowColor),hasOwn(n,"textBoxShadowBlur")&&(t.shadowBlur=n.textBoxShadowBlur),hasOwn(n,"textBoxShadowOffsetX")&&(t.shadowOffsetX=n.textBoxShadowOffsetX),hasOwn(n,"textBoxShadowOffsetY")&&(t.shadowOffsetY=n.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(t,n,a){var l=t;l.textPosition=l.textPosition||a.position||"inside",a.offset!=null&&(l.textOffset=a.offset),a.rotation!=null&&(l.textRotation=a.rotation),a.distance!=null&&(l.textDistance=a.distance);var u=l.textPosition.indexOf("inside")>=0,c=t.fill||"#000";convertToEC4RichItem(l,n);var p=l.textFill==null;return u?p&&(l.textFill=a.insideFill||"#fff",!l.textStroke&&a.insideStroke&&(l.textStroke=a.insideStroke),!l.textStroke&&(l.textStroke=c),l.textStrokeWidth==null&&(l.textStrokeWidth=2)):(p&&(l.textFill=t.fill||a.outsideFill||"#000"),!l.textStroke&&a.outsideStroke&&(l.textStroke=a.outsideStroke)),l.text=n.text,l.rich=n.rich,each$f(n.rich,function(d){convertToEC4RichItem(d,d)}),l}function convertToEC4RichItem(t,n){n&&(hasOwn(n,"fill")&&(t.textFill=n.fill),hasOwn(n,"stroke")&&(t.textStroke=n.fill),hasOwn(n,"lineWidth")&&(t.textStrokeWidth=n.lineWidth),hasOwn(n,"font")&&(t.font=n.font),hasOwn(n,"fontStyle")&&(t.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(t.fontWeight=n.fontWeight),hasOwn(n,"fontSize")&&(t.fontSize=n.fontSize),hasOwn(n,"fontFamily")&&(t.fontFamily=n.fontFamily),hasOwn(n,"align")&&(t.textAlign=n.align),hasOwn(n,"verticalAlign")&&(t.textVerticalAlign=n.verticalAlign),hasOwn(n,"lineHeight")&&(t.textLineHeight=n.lineHeight),hasOwn(n,"width")&&(t.textWidth=n.width),hasOwn(n,"height")&&(t.textHeight=n.height),hasOwn(n,"backgroundColor")&&(t.textBackgroundColor=n.backgroundColor),hasOwn(n,"padding")&&(t.textPadding=n.padding),hasOwn(n,"borderColor")&&(t.textBorderColor=n.borderColor),hasOwn(n,"borderWidth")&&(t.textBorderWidth=n.borderWidth),hasOwn(n,"borderRadius")&&(t.textBorderRadius=n.borderRadius),hasOwn(n,"shadowColor")&&(t.textBoxShadowColor=n.shadowColor),hasOwn(n,"shadowBlur")&&(t.textBoxShadowBlur=n.shadowBlur),hasOwn(n,"shadowOffsetX")&&(t.textBoxShadowOffsetX=n.shadowOffsetX),hasOwn(n,"shadowOffsetY")&&(t.textBoxShadowOffsetY=n.shadowOffsetY),hasOwn(n,"textShadowColor")&&(t.textShadowColor=n.textShadowColor),hasOwn(n,"textShadowBlur")&&(t.textShadowBlur=n.textShadowBlur),hasOwn(n,"textShadowOffsetX")&&(t.textShadowOffsetX=n.textShadowOffsetX),hasOwn(n,"textShadowOffsetY")&&(t.textShadowOffsetY=n.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=1,t},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(t,n,a,l,u){var c=t+"Animation",p=getAnimationConfig(t,l,u)||{},d=transitionInnerStore(n).userDuring;return p.duration>0&&(p.during=d?bind$1(duringCall,{el:n,userDuring:d}):null,p.setToFinal=!0,p.scope=t),extend(p,a[c]),p}function applyUpdateTransition(t,n,a,l){l=l||{};var u=l.dataIndex,c=l.isInit,p=l.clearStyle,d=a.isAnimationEnabled(),Q=transitionInnerStore(t),Ct=n.style;Q.userDuring=n.during;var ar={},en={};if(prepareTransformAllPropsFinal(t,n,en),prepareShapeOrExtraAllPropsFinal("shape",n,en),prepareShapeOrExtraAllPropsFinal("extra",n,en),!c&&d&&(prepareTransformTransitionFrom(t,n,ar),prepareShapeOrExtraTransitionFrom("shape",t,n,ar),prepareShapeOrExtraTransitionFrom("extra",t,n,ar),prepareStyleTransitionFrom(t,n,Ct,ar)),en.style=Ct,applyPropsDirectly(t,en,p),applyMiscProps(t,n),d)if(c){var tn={};each$f(ELEMENT_ANIMATABLE_PROPS,function(cn){var gn=cn?n[cn]:n;gn&&gn.enterFrom&&(cn&&(tn[cn]=tn[cn]||{}),extend(cn?tn[cn]:tn,gn.enterFrom))});var on=getElementAnimationConfig("enter",t,n,a,u);on.duration>0&&t.animateFrom(tn,on)}else applyPropsTransition(t,n,u||0,a,ar);updateLeaveTo(t,n),Ct?t.dirty():t.markRedraw()}function updateLeaveTo(t,n){for(var a=transitionInnerStore(t).leaveToProps,l=0;l<ELEMENT_ANIMATABLE_PROPS.length;l++){var u=ELEMENT_ANIMATABLE_PROPS[l],c=u?n[u]:n;c&&c.leaveTo&&(a||(a=transitionInnerStore(t).leaveToProps={}),u&&(a[u]=a[u]||{}),extend(u?a[u]:a,c.leaveTo))}}function applyLeaveTransition(t,n,a,l){if(t){var u=t.parent,c=transitionInnerStore(t).leaveToProps;if(c){var p=getElementAnimationConfig("update",t,n,a,0);p.done=function(){u.remove(t)},t.animateTo(c,p)}else u.remove(t)}}function isTransitionAll(t){return t==="all"}function applyPropsDirectly(t,n,a){var l=n.style;if(!t.isGroup&&l){if(a){t.useStyle({});for(var u=t.animators,c=0;c<u.length;c++){var p=u[c];p.targetName==="style"&&p.changeTarget(t.style)}}t.setStyle(l)}n&&(n.style=null,n&&t.attr(n),n.style=l)}function applyPropsTransition(t,n,a,l,u){if(u){var c=getElementAnimationConfig("update",t,n,l,a);c.duration>0&&t.animateFrom(u,c)}}function applyMiscProps(t,n){hasOwn(n,"silent")&&(t.silent=n.silent),hasOwn(n,"ignore")&&(t.ignore=n.ignore),t instanceof Displayable&&hasOwn(n,"invisible")&&(t.invisible=n.invisible),t instanceof Path&&hasOwn(n,"autoBatch")&&(t.autoBatch=n.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(t,n){return tmpDuringScope.el[t]=n,this},getTransform:function(t){return tmpDuringScope.el[t]},setShape:function(t,n){var a=tmpDuringScope.el,l=a.shape||(a.shape={});return l[t]=n,a.dirtyShape&&a.dirtyShape(),this},getShape:function(t){var n=tmpDuringScope.el.shape;if(n)return n[t]},setStyle:function(t,n){var a=tmpDuringScope.el,l=a.style;return l&&(l[t]=n,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(t){var n=tmpDuringScope.el.style;if(n)return n[t]},setExtra:function(t,n){var a=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return a[t]=n,this},getExtra:function(t){var n=tmpDuringScope.el.extra;if(n)return n[t]}};function duringCall(){var t=this,n=t.el;if(n){var a=transitionInnerStore(n).userDuring,l=t.userDuring;if(a!==l){t.el=t.userDuring=null;return}tmpDuringScope.el=n,l(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(t,n,a,l){var u=a[t];if(u){var c=n[t],p;if(c){var d=a.transition,Q=u.transition;if(Q)if(!p&&(p=l[t]={}),isTransitionAll(Q))extend(p,c);else for(var Ct=normalizeToArray(Q),ar=0;ar<Ct.length;ar++){var en=Ct[ar],tn=c[en];p[en]=tn}else if(isTransitionAll(d)||indexOf(d,t)>=0){!p&&(p=l[t]={});for(var on=keys(c),ar=0;ar<on.length;ar++){var en=on[ar],tn=c[en];isNonStyleTransitionEnabled(u[en],tn)&&(p[en]=tn)}}}}}function prepareShapeOrExtraAllPropsFinal(t,n,a){var l=n[t];if(l)for(var u=a[t]={},c=keys(l),p=0;p<c.length;p++){var d=c[p];u[d]=cloneValue(l[d])}}function prepareTransformTransitionFrom(t,n,a){for(var l=n.transition,u=isTransitionAll(l)?TRANSFORMABLE_PROPS:normalizeToArray(l||[]),c=0;c<u.length;c++){var p=u[c];if(!(p==="style"||p==="shape"||p==="extra")){var d=t[p];a[p]=d}}}function prepareTransformAllPropsFinal(t,n,a){for(var l=0;l<LEGACY_TRANSFORM_PROPS.length;l++){var u=LEGACY_TRANSFORM_PROPS[l],c=LEGACY_TRANSFORM_PROPS_MAP[u],p=n[u];p&&(a[c[0]]=p[0],a[c[1]]=p[1])}for(var l=0;l<TRANSFORMABLE_PROPS.length;l++){var d=TRANSFORMABLE_PROPS[l];n[d]!=null&&(a[d]=n[d])}}function prepareStyleTransitionFrom(t,n,a,l){if(a){var u=t.style,c;if(u){var p=a.transition,d=n.transition;if(p&&!isTransitionAll(p)){var Q=normalizeToArray(p);!c&&(c=l.style={});for(var Ct=0;Ct<Q.length;Ct++){var ar=Q[Ct],en=u[ar];c[ar]=en}}else if(t.getAnimationStyleProps&&(isTransitionAll(d)||isTransitionAll(p)||indexOf(d,"style")>=0)){var tn=t.getAnimationStyleProps(),on=tn?tn.style:null;if(on){!c&&(c=l.style={});for(var cn=keys(a),Ct=0;Ct<cn.length;Ct++){var ar=cn[Ct];if(on[ar]){var en=u[ar];c[ar]=en}}}}}}}function isNonStyleTransitionEnabled(t,n){return isArrayLike(t)?t!==n:t!=null&&isFinite(t)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(t){t.stopAnimation("keyframe"),t.attr(getStateToRestore(t))}function applyKeyframeAnimation(t,n,a){if(!(!a.isAnimationEnabled()||!n)){if(isArray$1(n)){each$f(n,function(d){applyKeyframeAnimation(t,d,a)});return}var l=n.keyframes,u=n.duration;if(a&&u==null){var c=getAnimationConfig("enter",a,0);u=c&&c.duration}if(!(!l||!u)){var p=getStateToRestore(t);each$f(ELEMENT_ANIMATABLE_PROPS,function(d){if(!(d&&!t[d])){var Q;l.sort(function(Ct,ar){return Ct.percent-ar.percent}),each$f(l,function(Ct){var ar=t.animators,en=d?Ct[d]:Ct;if(en){var tn=keys(en);if(d||(tn=filter(tn,function(gn){return indexOf(KEYFRAME_EXCLUDE_KEYS,gn)<0})),!!tn.length){Q||(Q=t.animate(d,n.loop,!0),Q.scope="keyframe");for(var on=0;on<ar.length;on++)ar[on]!==Q&&ar[on].targetName===Q.targetName&&ar[on].stopTracks(tn);d&&(p[d]=p[d]||{});var cn=d?p[d]:p;each$f(tn,function(gn){cn[gn]=((d?t[d]:t)||{})[gn]}),Q.whenWithKeys(u*Ct.percent,en,tn,Ct.easing)}}}),Q&&Q.delay(n.delay||0).duration(u).start(n.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(t){return t instanceof Path}function isDisplayable(t){return t instanceof Displayable}function copyElement(t,n){n.copyTransform(t),isDisplayable(n)&&isDisplayable(t)&&(n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n.invisible=t.invisible,n.ignore=t.ignore,isPath(n)&&isPath(t)&&n.setShape(t.shape))}var CustomChartView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u,c){this._progressiveEls=null;var p=this._data,d=a.getData(),Q=this.group,Ct=makeRenderItem(a,d,l,u);p||Q.removeAll(),d.diff(p).add(function(en){createOrUpdateItem(u,null,en,Ct(en,c),a,Q,d)}).remove(function(en){var tn=p.getItemGraphicEl(en);tn&&applyLeaveTransition(tn,customInnerStore(tn).option,a)}).update(function(en,tn){var on=p.getItemGraphicEl(tn);createOrUpdateItem(u,on,en,Ct(en,c),a,Q,d)}).execute();var ar=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;ar?Q.setClipPath(ar):Q.removeClipPath(),this._data=d},n.prototype.incrementalPrepareRender=function(a,l,u){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(a,l,u,c,p){var d=l.getData(),Q=makeRenderItem(l,d,u,c),Ct=this._progressiveEls=[];function ar(on){on.isGroup||(on.incremental=!0,on.ensureState("emphasis").hoverLayer=!0)}for(var en=a.start;en<a.end;en++){var tn=createOrUpdateItem(null,null,en,Q(en,p),l,this.group,d);tn&&(tn.traverse(ar),Ct.push(tn))}},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype.filterForExposedEvent=function(a,l,u,c){var p=l.element;if(p==null||u.name===p)return!0;for(;(u=u.__hostTarget||u.parent)&&u!==this.group;)if(u.name===p)return!0;return!1},n.type="custom",n}(ChartView);function createEl$1(t){var n=t.type,a;if(n==="path"){var l=t.shape,u=l.width!=null&&l.height!=null?{x:l.x||0,y:l.y||0,width:l.width,height:l.height}:null,c=getPathData(l);a=makePath(c,null,u,l.layout||"center"),customInnerStore(a).customPathData=c}else if(n==="image")a=new ZRImage({}),customInnerStore(a).customImagePath=t.style.image;else if(n==="text")a=new ZRText({});else if(n==="group")a=new Group$3;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var p=getShapeClass(n);if(!p){var d="";throwError(d)}a=new p}return customInnerStore(a).customGraphicType=n,a.name=t.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function updateElNormal(t,n,a,l,u,c,p){stopPreviousKeyframeAnimationAndRestore(n);var d=u&&u.normal.cfg;d&&n.setTextConfig(d),l&&l.transition==null&&(l.transition=DEFAULT_TRANSITION);var Q=l&&l.style;if(Q){if(n.type==="text"){var Ct=Q;hasOwn(Ct,"textFill")&&(Ct.fill=Ct.textFill),hasOwn(Ct,"textStroke")&&(Ct.stroke=Ct.textStroke)}var ar=void 0,en=isPath(n)?Q.decal:null;t&&en&&(en.dirty=!0,ar=createOrUpdatePatternFromDecal(en,t)),Q.__decalPattern=ar}if(isDisplayable(n)&&Q){var ar=Q.__decalPattern;ar&&(Q.decal=ar)}applyUpdateTransition(n,l,c,{dataIndex:a,isInit:p,clearStyle:!0}),applyKeyframeAnimation(n,l.keyframeAnimation,c)}function updateElOnState(t,n,a,l,u){var c=n.isGroup?null:n,p=u&&u[t].cfg;if(c){var d=c.ensureState(t);if(l===!1){var Q=c.getState(t);Q&&(Q.style=null)}else d.style=l||null;p&&(d.textConfig=p),setDefaultStateProxy(c)}}function updateZ(t,n,a){if(!t.isGroup){var l=t,u=a.currentZ,c=a.currentZLevel;l.z=u,l.zlevel=c;var p=n.z2;p!=null&&(l.z2=p||0);for(var d=0;d<STATES.length;d++)updateZForEachState(l,n,STATES[d])}}function updateZForEachState(t,n,a){var l=a===NORMAL,u=l?n:retrieveStateOption(n,a),c=u?u.z2:null,p;c!=null&&(p=l?t:t.ensureState(a),p.z2=c||0)}function makeRenderItem(t,n,a,l){var u=t.get("renderItem"),c=t.coordinateSystem,p={};c&&(p=c.prepareCustoms?c.prepareCustoms(c):prepareCustoms[c.type](c));for(var d=defaults({getWidth:l.getWidth,getHeight:l.getHeight,getZr:l.getZr,getDevicePixelRatio:l.getDevicePixelRatio,value:ox,style:cx,ordinalRawValue:lx,styleEmphasis:dx,visual:ux,barLayout:gx,currentSeriesIndices:yx,font:_x},p.api||{}),Q={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:p.coordSys,dataInsideLength:n.count(),encode:wrapEncodeDef(t.getData())},Ct,ar,en={},tn={},on={},cn={},gn=0;gn<STATES.length;gn++){var Cn=STATES[gn];on[Cn]=t.getModel(PATH_ITEM_STYLE[Cn]),cn[Cn]=t.getModel(PATH_LABEL[Cn])}function ex(vx){return vx===Ct?ar||(ar=n.getItemModel(vx)):n.getItemModel(vx)}function ix(vx,bx){return n.hasItemOption?vx===Ct?en[bx]||(en[bx]=ex(vx).getModel(PATH_ITEM_STYLE[bx])):ex(vx).getModel(PATH_ITEM_STYLE[bx]):on[bx]}function ax(vx,bx){return n.hasItemOption?vx===Ct?tn[bx]||(tn[bx]=ex(vx).getModel(PATH_LABEL[bx])):ex(vx).getModel(PATH_LABEL[bx]):cn[bx]}return function(vx,bx){return Ct=vx,ar=null,en={},tn={},u&&u(defaults({dataIndexInside:vx,dataIndex:n.getRawIndex(vx),actionType:bx?bx.type:null},Q),d)};function ox(vx,bx){return bx==null&&(bx=Ct),n.getStore().get(n.getDimensionIndex(vx||0),bx)}function lx(vx,bx){bx==null&&(bx=Ct),vx=vx||0;var xx=n.getDimensionInfo(vx);if(!xx){var Sx=n.getDimensionIndex(vx);return Sx>=0?n.getStore().get(Sx,bx):void 0}var Ax=n.get(xx.name,bx),Cx=xx&&xx.ordinalMeta;return Cx?Cx.categories[Ax]:Ax}function cx(vx,bx){bx==null&&(bx=Ct);var xx=n.getItemVisual(bx,"style"),Sx=xx&&xx.fill,Ax=xx&&xx.opacity,Cx=ix(bx,NORMAL).getItemStyle();Sx!=null&&(Cx.fill=Sx),Ax!=null&&(Cx.opacity=Ax);var Tx={inheritColor:isString$1(Sx)?Sx:"#000"},Px=ax(bx,NORMAL),Fx=createTextStyle$1(Px,null,Tx,!1,!0);Fx.text=Px.getShallow("show")?retrieve2(t.getFormattedLabel(bx,NORMAL),getDefaultLabel(n,bx)):null;var Mx=createTextConfig(Px,Tx,!1);return fx(vx,Cx),Cx=convertToEC4StyleForCustomSerise(Cx,Fx,Mx),vx&&hx(Cx,vx),Cx.legacy=!0,Cx}function dx(vx,bx){bx==null&&(bx=Ct);var xx=ix(bx,EMPHASIS).getItemStyle(),Sx=ax(bx,EMPHASIS),Ax=createTextStyle$1(Sx,null,null,!0,!0);Ax.text=Sx.getShallow("show")?retrieve3(t.getFormattedLabel(bx,EMPHASIS),t.getFormattedLabel(bx,NORMAL),getDefaultLabel(n,bx)):null;var Cx=createTextConfig(Sx,null,!0);return fx(vx,xx),xx=convertToEC4StyleForCustomSerise(xx,Ax,Cx),vx&&hx(xx,vx),xx.legacy=!0,xx}function hx(vx,bx){for(var xx in bx)hasOwn(bx,xx)&&(vx[xx]=bx[xx])}function fx(vx,bx){vx&&(vx.textFill&&(bx.textFill=vx.textFill),vx.textPosition&&(bx.textPosition=vx.textPosition))}function ux(vx,bx){if(bx==null&&(bx=Ct),hasOwn(STYLE_VISUAL_TYPE,vx)){var xx=n.getItemVisual(bx,"style");return xx?xx[STYLE_VISUAL_TYPE[vx]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,vx))return n.getItemVisual(bx,vx)}function gx(vx){if(c.type==="cartesian2d"){var bx=c.getBaseAxis();return getLayoutOnAxis(defaults({axis:bx},vx))}}function yx(){return a.getCurrentSeriesIndices()}function _x(vx){return getFont(vx,a)}}function wrapEncodeDef(t){var n={};return each$f(t.dimensions,function(a){var l=t.getDimensionInfo(a);if(!l.isExtraCoord){var u=l.coordDim,c=n[u]=n[u]||[];c[l.coordDimIndex]=t.getDimensionIndex(a)}}),n}function createOrUpdateItem(t,n,a,l,u,c,p){if(!l){c.remove(n);return}var d=doCreateOrUpdateEl(t,n,a,l,u,c);return d&&p.setItemGraphicEl(a,d),d&&toggleHoverEmphasis(d,l.focus,l.blurScope,l.emphasisDisabled),d}function doCreateOrUpdateEl(t,n,a,l,u,c){var p=-1,d=n;n&&doesElNeedRecreate(n,l,u)&&(p=indexOf(c.childrenRef(),n),n=null);var Q=!n,Ct=n;Ct?Ct.clearStates():(Ct=createEl$1(l),d&&copyElement(d,Ct)),l.morph===!1?Ct.disableMorphing=!0:Ct.disableMorphing&&(Ct.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(Ct,a,l,u,Q,attachedTxInfoTmp),doCreateOrUpdateClipPath(Ct,a,l,u,Q),updateElNormal(t,Ct,a,l,attachedTxInfoTmp,u,Q),hasOwn(l,"info")&&(customInnerStore(Ct).info=l.info);for(var ar=0;ar<STATES.length;ar++){var en=STATES[ar];if(en!==NORMAL){var tn=retrieveStateOption(l,en),on=retrieveStyleOptionOnState(l,tn,en);updateElOnState(en,Ct,tn,on,attachedTxInfoTmp)}}return updateZ(Ct,l,u),l.type==="group"&&mergeChildren(t,Ct,a,l,u),p>=0?c.replaceAt(Ct,p):c.add(Ct),Ct}function doesElNeedRecreate(t,n,a){var l=customInnerStore(t),u=n.type,c=n.shape,p=n.style;return a.isUniversalTransitionEnabled()||u!=null&&u!==l.customGraphicType||u==="path"&&hasOwnPathData(c)&&getPathData(c)!==l.customPathData||u==="image"&&hasOwn(p,"image")&&p.image!==l.customImagePath}function doCreateOrUpdateClipPath(t,n,a,l,u){var c=a.clipPath;if(c===!1)t&&t.getClipPath()&&t.removeClipPath();else if(c){var p=t.getClipPath();p&&doesElNeedRecreate(p,c,l)&&(p=null),p||(p=createEl$1(c),t.setClipPath(p)),updateElNormal(null,p,n,c,null,l,u)}}function doCreateOrUpdateAttachedTx(t,n,a,l,u,c){if(!t.isGroup){processTxInfo(a,null,c),processTxInfo(a,EMPHASIS,c);var p=c.normal.conOpt,d=c.emphasis.conOpt,Q=c.blur.conOpt,Ct=c.select.conOpt;if(p!=null||d!=null||Ct!=null||Q!=null){var ar=t.getTextContent();if(p===!1)ar&&t.removeTextContent();else{p=c.normal.conOpt=p||{type:"text"},ar?ar.clearStates():(ar=createEl$1(p),t.setTextContent(ar)),updateElNormal(null,ar,n,p,null,l,u);for(var en=p&&p.style,tn=0;tn<STATES.length;tn++){var on=STATES[tn];if(on!==NORMAL){var cn=c[on].conOpt;updateElOnState(on,ar,cn,retrieveStyleOptionOnState(p,cn,on),null)}}en?ar.dirty():ar.markRedraw()}}}}function processTxInfo(t,n,a){var l=n?retrieveStateOption(t,n):t,u=n?retrieveStyleOptionOnState(t,l,EMPHASIS):t.style,c=t.type,p=l?l.textConfig:null,d=t.textContent,Q=d?n?retrieveStateOption(d,n):d:null;if(u&&(a.isLegacy||isEC4CompatibleStyle(u,c,!!p,!!Q))){a.isLegacy=!0;var Ct=convertFromEC4CompatibleStyle(u,c,!n);!p&&Ct.textConfig&&(p=Ct.textConfig),!Q&&Ct.textContent&&(Q=Ct.textContent)}if(!n&&Q){var ar=Q;!ar.type&&(ar.type="text")}var en=n?a[n]:a.normal;en.cfg=p,en.conOpt=Q}function retrieveStateOption(t,n){return n?t?t[n]:null:t}function retrieveStyleOptionOnState(t,n,a){var l=n&&n.style;return l==null&&a===EMPHASIS&&t&&(l=t.styleEmphasis),l}function mergeChildren(t,n,a,l,u){var c=l.children,p=c?c.length:0,d=l.$mergeChildren,Q=d==="byName"||l.diffChildrenByName,Ct=d===!1;if(!(!p&&!Q&&!Ct)){if(Q){diffGroupChildren({api:t,oldChildren:n.children()||[],newChildren:c||[],dataIndex:a,seriesModel:u,group:n});return}Ct&&n.removeAll();for(var ar=0;ar<p;ar++){var en=c[ar],tn=n.childAt(ar);en?(en.ignore==null&&(en.ignore=!1),doCreateOrUpdateEl(t,tn,a,en,u,n)):tn.ignore=!0}for(var on=n.childCount()-1;on>=ar;on--){var cn=n.childAt(on);removeChildFromGroup(n,cn,u)}}}function removeChildFromGroup(t,n,a){n&&applyLeaveTransition(n,customInnerStore(t).option,a)}function diffGroupChildren(t){new DataDiffer(t.oldChildren,t.newChildren,getKey,getKey,t).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(t,n){var a=t&&t.name;return a??GROUP_DIFF_PREFIX+n}function processAddUpdate(t,n){var a=this.context,l=t!=null?a.newChildren[t]:null,u=n!=null?a.oldChildren[n]:null;doCreateOrUpdateEl(a.api,u,a.dataIndex,l,a.seriesModel,a.group)}function processRemove(t){var n=this.context,a=n.oldChildren[t];a&&applyLeaveTransition(a,customInnerStore(a).option,n.seriesModel)}function getPathData(t){return t&&(t.pathData||t.d)}function hasOwnPathData(t){return t&&(hasOwn(t,"pathData")||hasOwn(t,"d"))}function install$r(t){t.registerChartView(CustomChartView),t.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(n,a,l,u){var c=a.get("value"),p=a.get("status");if(this._axisModel=n,this._axisPointerModel=a,this._api=l,!(!u&&this._lastValue===c&&this._lastStatus===p)){this._lastValue=c,this._lastStatus=p;var d=this._group,Q=this._handle;if(!p||p==="hide"){d&&d.hide(),Q&&Q.hide();return}d&&d.show(),Q&&Q.show();var Ct={};this.makeElOption(Ct,c,n,a,l);var ar=Ct.graphicKey;ar!==this._lastGraphicKey&&this.clear(l),this._lastGraphicKey=ar;var en=this._moveAnimation=this.determineAnimation(n,a);if(!d)d=this._group=new Group$3,this.createPointerEl(d,Ct,n,a),this.createLabelEl(d,Ct,n,a),l.getZr().add(d);else{var tn=curry$1(updateProps,a,en);this.updatePointerEl(d,Ct,tn),this.updateLabelEl(d,Ct,tn,a)}updateMandatoryProps(d,a,!0),this._renderHandle(c)}},t.prototype.remove=function(n){this.clear(n)},t.prototype.dispose=function(n){this.clear(n)},t.prototype.determineAnimation=function(n,a){var l=a.get("animation"),u=n.axis,c=u.type==="category",p=a.get("snap");if(!p&&!c)return!1;if(l==="auto"||l==null){var d=this.animationThreshold;if(c&&u.getBandWidth()>d)return!0;if(p){var Q=getAxisInfo$1(n).seriesDataCount,Ct=u.getExtent();return Math.abs(Ct[0]-Ct[1])/Q>d}return!1}return l===!0},t.prototype.makeElOption=function(n,a,l,u,c){},t.prototype.createPointerEl=function(n,a,l,u){var c=a.pointer;if(c){var p=inner$b(n).pointerEl=new graphic$1[c.type](clone$1(a.pointer));n.add(p)}},t.prototype.createLabelEl=function(n,a,l,u){if(a.label){var c=inner$b(n).labelEl=new ZRText(clone$1(a.label));n.add(c),updateLabelShowHide(c,u)}},t.prototype.updatePointerEl=function(n,a,l){var u=inner$b(n).pointerEl;u&&a.pointer&&(u.setStyle(a.pointer.style),l(u,{shape:a.pointer.shape}))},t.prototype.updateLabelEl=function(n,a,l,u){var c=inner$b(n).labelEl;c&&(c.setStyle(a.label.style),l(c,{x:a.label.x,y:a.label.y}),updateLabelShowHide(c,u))},t.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,l=this._api.getZr(),u=this._handle,c=a.getModel("handle"),p=a.get("status");if(!c.get("show")||!p||p==="hide"){u&&l.remove(u),this._handle=null;return}var d;this._handle||(d=!0,u=this._handle=createIcon(c.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(Ct){stop(Ct.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),l.add(u)),updateMandatoryProps(u,a,!1),u.setStyle(c.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var Q=c.get("size");isArray$1(Q)||(Q=[Q,Q]),u.scaleX=Q[0]/2,u.scaleY=Q[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",c.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,d)}},t.prototype._moveHandleToValue=function(n,a){updateProps(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(n,a){var l=this._handle;if(l){this._dragging=!0;var u=this.updateHandleTransform(getHandleTransProps(l),[n,a],this._axisModel,this._axisPointerModel);this._payloadInfo=u,l.stopAnimation(),l.attr(getHandleTransProps(u)),inner$b(l).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var a=this._payloadInfo,l=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:l.axis.dim,axisIndex:l.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var a=n.getZr(),l=this._group,u=this._handle;a&&l&&(this._lastGraphicKey=null,l&&a.remove(l),u&&a.remove(u),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(n,a,l){return l=l||0,{x:n[l],y:n[1-l],width:a[l],height:a[1-l]}},t}();function updateProps(t,n,a,l){propsEqual(inner$b(a).lastProp,l)||(inner$b(a).lastProp=l,n?updateProps$1(a,l,t):(a.stopAnimation(),a.attr(l)))}function propsEqual(t,n){if(isObject$3(t)&&isObject$3(n)){var a=!0;return each$f(n,function(l,u){a=a&&propsEqual(t[u],l)}),!!a}else return t===n}function updateLabelShowHide(t,n){t[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function updateMandatoryProps(t,n,a){var l=n.get("z"),u=n.get("zlevel");t&&t.traverse(function(c){c.type!=="group"&&(l!=null&&(c.z=l),u!=null&&(c.zlevel=u),c.silent=a)})}function buildElStyle(t){var n=t.get("type"),a=t.getModel(n+"Style"),l;return n==="line"?(l=a.getLineStyle(),l.fill=null):n==="shadow"&&(l=a.getAreaStyle(),l.stroke=null),l}function buildLabelElOption(t,n,a,l,u){var c=a.get("value"),p=getValueLabel(c,n.axis,n.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),d=a.getModel("label"),Q=normalizeCssArray(d.get("padding")||0),Ct=d.getFont(),ar=getBoundingRect(p,Ct),en=u.position,tn=ar.width+Q[1]+Q[3],on=ar.height+Q[0]+Q[2],cn=u.align;cn==="right"&&(en[0]-=tn),cn==="center"&&(en[0]-=tn/2);var gn=u.verticalAlign;gn==="bottom"&&(en[1]-=on),gn==="middle"&&(en[1]-=on/2),confineInContainer(en,tn,on,l);var Cn=d.get("backgroundColor");(!Cn||Cn==="auto")&&(Cn=n.get(["axisLine","lineStyle","color"])),t.label={x:en[0],y:en[1],style:createTextStyle$1(d,{text:p,font:Ct,fill:d.getTextColor(),padding:Q,backgroundColor:Cn}),z2:10}}function confineInContainer(t,n,a,l){var u=l.getWidth(),c=l.getHeight();t[0]=Math.min(t[0]+n,u)-n,t[1]=Math.min(t[1]+a,c)-a,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function getValueLabel(t,n,a,l,u){t=n.scale.parse(t);var c=n.scale.getLabel({value:t},{precision:u.precision}),p=u.formatter;if(p){var d={value:getAxisRawValue(n,{value:t}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$f(l,function(Q){var Ct=a.getSeriesByIndex(Q.seriesIndex),ar=Q.dataIndexInside,en=Ct&&Ct.getDataParams(ar);en&&d.seriesData.push(en)}),isString$1(p)?c=p.replace("{value}",c):isFunction$1(p)&&(c=p(d))}return c}function getTransformedPosition(t,n,a){var l=create$1();return rotate(l,l,a.rotation),translate(l,l,a.position),applyTransform([t.dataToCoord(n),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],l)}function buildCartesianSingleLabelElOption(t,n,a,l,u,c){var p=AxisBuilder.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=u.get(["label","margin"]),buildLabelElOption(n,l,u,c,{position:getTransformedPosition(l.axis,t,a),align:p.textAlign,verticalAlign:p.textVerticalAlign})}function makeLineShape(t,n,a){return a=a||0,{x1:t[a],y1:t[1-a],x2:n[a],y2:n[1-a]}}function makeRectShape(t,n,a){return a=a||0,{x:t[a],y:t[1-a],width:n[a],height:n[1-a]}}function makeSectorShape(t,n,a,l,u,c){return{cx:t,cy:n,r0:a,r:l,startAngle:u,endAngle:c,clockwise:!0}}var CartesianAxisPointer=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,l,u,c,p){var d=u.axis,Q=d.grid,Ct=c.get("type"),ar=getCartesian(Q,d).getOtherAxis(d).getGlobalExtent(),en=d.toGlobalCoord(d.dataToCoord(l,!0));if(Ct&&Ct!=="none"){var tn=buildElStyle(c),on=pointerShapeBuilder$2[Ct](d,en,ar);on.style=tn,a.graphicKey=on.type,a.pointer=on}var cn=layout$2(Q.model,u);buildCartesianSingleLabelElOption(l,a,cn,u,c,p)},n.prototype.getHandleTransform=function(a,l,u){var c=layout$2(l.axis.grid.model,l,{labelInside:!1});c.labelMargin=u.get(["handle","margin"]);var p=getTransformedPosition(l.axis,a,c);return{x:p[0],y:p[1],rotation:c.rotation+(c.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,l,u,c){var p=u.axis,d=p.grid,Q=p.getGlobalExtent(!0),Ct=getCartesian(d,p).getOtherAxis(p).getGlobalExtent(),ar=p.dim==="x"?0:1,en=[a.x,a.y];en[ar]+=l[ar],en[ar]=Math.min(Q[1],en[ar]),en[ar]=Math.max(Q[0],en[ar]);var tn=(Ct[1]+Ct[0])/2,on=[tn,tn];on[ar]=en[ar];var cn=[{verticalAlign:"middle"},{align:"center"}];return{x:en[0],y:en[1],rotation:a.rotation,cursorPoint:on,tooltipOption:cn[ar]}},n}(BaseAxisPointer);function getCartesian(t,n){var a={};return a[n.dim+"AxisIndex"]=n.index,t.getCartesian(a)}var pointerShapeBuilder$2={line:function(t,n,a){var l=makeLineShape([n,a[0]],[n,a[1]],getAxisDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:l}},shadow:function(t,n,a){var l=Math.max(1,t.getBandWidth()),u=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-l/2,a[0]],[l,u],getAxisDimIndex(t))}}};function getAxisDimIndex(t){return t.dim==="x"?0:1}var AxisPointerModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(t,n,a){if(!env.node){var l=n.getZr();inner$a(l).records||(inner$a(l).records={}),initGlobalListeners(l,n);var u=inner$a(l).records[t]||(inner$a(l).records[t]={});u.handler=a}}function initGlobalListeners(t,n){if(inner$a(t).initialized)return;inner$a(t).initialized=!0,a("click",curry$1(doEnter,"click")),a("mousemove",curry$1(doEnter,"mousemove")),a("globalout",onLeave);function a(l,u){t.on(l,function(c){var p=makeDispatchAction$1(n);each$8(inner$a(t).records,function(d){d&&u(d,c,p.dispatchAction)}),dispatchTooltipFinally(p.pendings,n)})}}function dispatchTooltipFinally(t,n){var a=t.showTip.length,l=t.hideTip.length,u;a?u=t.showTip[a-1]:l&&(u=t.hideTip[l-1]),u&&(u.dispatchAction=null,n.dispatchAction(u))}function onLeave(t,n,a){t.handler("leave",null,a)}function doEnter(t,n,a,l){n.handler(t,a,l)}function makeDispatchAction$1(t){var n={showTip:[],hideTip:[]},a=function(l){var u=n[l.type];u?u.push(l):(l.dispatchAction=a,t.dispatchAction(l))};return{dispatchAction:a,pendings:n}}function unregister(t,n){if(!env.node){var a=n.getZr(),l=(inner$a(a).records||{})[t];l&&(inner$a(a).records[t]=null)}}var AxisPointerView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=l.getComponent("tooltip"),p=a.get("triggerOn")||c&&c.get("triggerOn")||"mousemove|click";register("axisPointer",u,function(d,Q,Ct){p!=="none"&&(d==="leave"||p.indexOf(d)>=0)&&Ct({type:"updateAxisPointer",currTrigger:d,x:Q&&Q.offsetX,y:Q&&Q.offsetY})})},n.prototype.remove=function(a,l){unregister("axisPointer",l)},n.prototype.dispose=function(a,l){unregister("axisPointer",l)},n.type="axisPointer",n}(ComponentView);function findPointFromSeries(t,n){var a=[],l=t.seriesIndex,u;if(l==null||!(u=n.getSeriesByIndex(l)))return{point:[]};var c=u.getData(),p=queryDataIndex(c,t);if(p==null||p<0||isArray$1(p))return{point:[]};var d=c.getItemGraphicEl(p),Q=u.coordinateSystem;if(u.getTooltipPosition)a=u.getTooltipPosition(p)||[];else if(Q&&Q.dataToPoint)if(t.isStacked){var Ct=Q.getBaseAxis(),ar=Q.getOtherAxis(Ct),en=ar.dim,tn=Ct.dim,on=en==="x"||en==="radius"?1:0,cn=c.mapDimension(tn),gn=[];gn[on]=c.get(cn,p),gn[1-on]=c.get(c.getCalculationInfo("stackResultDimension"),p),a=Q.dataToPoint(gn)||[]}else a=Q.dataToPoint(c.getValues(map$1(Q.dimensions,function(ex){return c.mapDimension(ex)}),p))||[];else if(d){var Cn=d.getBoundingRect().clone();Cn.applyTransform(d.transform),a=[Cn.x+Cn.width/2,Cn.y+Cn.height/2]}return{point:a,el:d}}var inner$9=makeInner();function axisTrigger(t,n,a){var l=t.currTrigger,u=[t.x,t.y],c=t,p=t.dispatchAction||bind$1(a.dispatchAction,a),d=n.getComponent("axisPointer").coordSysAxesInfo;if(d){illegalPoint(u)&&(u=findPointFromSeries({seriesIndex:c.seriesIndex,dataIndex:c.dataIndex},n).point);var Q=illegalPoint(u),Ct=c.axesInfo,ar=d.axesInfo,en=l==="leave"||illegalPoint(u),tn={},on={},cn={list:[],map:{}},gn={showPointer:curry$1(showPointer,on),showTooltip:curry$1(showTooltip,cn)};each$f(d.coordSysMap,function(ex,ix){var ax=Q||ex.containPoint(u);each$f(d.coordSysAxesInfo[ix],function(ox,lx){var cx=ox.axis,dx=findInputAxisInfo(Ct,ox);if(!en&&ax&&(!Ct||dx)){var hx=dx&&dx.value;hx==null&&!Q&&(hx=cx.pointToData(u)),hx!=null&&processOnAxis(ox,hx,gn,!1,tn)}})});var Cn={};return each$f(ar,function(ex,ix){var ax=ex.linkGroup;ax&&!on[ix]&&each$f(ax.axesInfo,function(ox,lx){var cx=on[lx];if(ox!==ex&&cx){var dx=cx.value;ax.mapper&&(dx=ex.axis.scale.parse(ax.mapper(dx,makeMapperParam(ox),makeMapperParam(ex)))),Cn[ex.key]=dx}})}),each$f(Cn,function(ex,ix){processOnAxis(ar[ix],ex,gn,!0,tn)}),updateModelActually(on,ar,tn),dispatchTooltipActually(cn,u,t,p),dispatchHighDownActually(ar,p,a),tn}}function processOnAxis(t,n,a,l,u){var c=t.axis;if(!(c.scale.isBlank()||!c.containData(n))){if(!t.involveSeries){a.showPointer(t,n);return}var p=buildPayloadsBySeries(n,t),d=p.payloadBatch,Q=p.snapToValue;d[0]&&u.seriesIndex==null&&extend(u,d[0]),!l&&t.snap&&c.containData(Q)&&Q!=null&&(n=Q),a.showPointer(t,n,d),a.showTooltip(t,p,Q)}}function buildPayloadsBySeries(t,n){var a=n.axis,l=a.dim,u=t,c=[],p=Number.MAX_VALUE,d=-1;return each$f(n.seriesModels,function(Q,Ct){var ar=Q.getData().mapDimensionsAll(l),en,tn;if(Q.getAxisTooltipData){var on=Q.getAxisTooltipData(ar,t,a);tn=on.dataIndices,en=on.nestestValue}else{if(tn=Q.getData().indicesOfNearest(ar[0],t,a.type==="category"?.5:null),!tn.length)return;en=Q.getData().get(ar[0],tn[0])}if(!(en==null||!isFinite(en))){var cn=t-en,gn=Math.abs(cn);gn<=p&&((gn<p||cn>=0&&d<0)&&(p=gn,d=cn,u=en,c.length=0),each$f(tn,function(Cn){c.push({seriesIndex:Q.seriesIndex,dataIndexInside:Cn,dataIndex:Q.getData().getRawIndex(Cn)})}))}}),{payloadBatch:c,snapToValue:u}}function showPointer(t,n,a,l){t[n.key]={value:a,payloadBatch:l}}function showTooltip(t,n,a,l){var u=a.payloadBatch,c=n.axis,p=c.model,d=n.axisPointerModel;if(!(!n.triggerTooltip||!u.length)){var Q=n.coordSys.model,Ct=makeKey(Q),ar=t.map[Ct];ar||(ar=t.map[Ct]={coordSysId:Q.id,coordSysIndex:Q.componentIndex,coordSysType:Q.type,coordSysMainType:Q.mainType,dataByAxis:[]},t.list.push(ar)),ar.dataByAxis.push({axisDim:c.dim,axisIndex:p.componentIndex,axisType:p.type,axisId:p.id,value:l,valueLabelOpt:{precision:d.get(["label","precision"]),formatter:d.get(["label","formatter"])},seriesDataIndices:u.slice()})}}function updateModelActually(t,n,a){var l=a.axesInfo=[];each$f(n,function(u,c){var p=u.axisPointerModel.option,d=t[c];d?(!u.useHandle&&(p.status="show"),p.value=d.value,p.seriesDataIndices=(d.payloadBatch||[]).slice()):!u.useHandle&&(p.status="hide"),p.status==="show"&&l.push({axisDim:u.axis.dim,axisIndex:u.axis.model.componentIndex,value:p.value})})}function dispatchTooltipActually(t,n,a,l){if(illegalPoint(n)||!t.list.length){l({type:"hideTip"});return}var u=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};l({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:u.dataIndexInside,dataIndex:u.dataIndex,seriesIndex:u.seriesIndex,dataByCoordSys:t.list})}function dispatchHighDownActually(t,n,a){var l=a.getZr(),u="axisPointerLastHighlights",c=inner$9(l)[u]||{},p=inner$9(l)[u]={};each$f(t,function(Ct,ar){var en=Ct.axisPointerModel.option;en.status==="show"&&Ct.triggerEmphasis&&each$f(en.seriesDataIndices,function(tn){var on=tn.seriesIndex+" | "+tn.dataIndex;p[on]=tn})});var d=[],Q=[];each$f(c,function(Ct,ar){!p[ar]&&Q.push(Ct)}),each$f(p,function(Ct,ar){!c[ar]&&d.push(Ct)}),Q.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:Q}),d.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:d})}function findInputAxisInfo(t,n){for(var a=0;a<(t||[]).length;a++){var l=t[a];if(n.axis.dim===l.axisDim&&n.axis.model.componentIndex===l.axisIndex)return l}}function makeMapperParam(t){var n=t.axis.model,a={},l=a.axisDim=t.axis.dim;return a.axisIndex=a[l+"AxisIndex"]=n.componentIndex,a.axisName=a[l+"AxisName"]=n.name,a.axisId=a[l+"AxisId"]=n.id,a}function illegalPoint(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function install$q(t){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),t.registerComponentModel(AxisPointerModel),t.registerComponentView(AxisPointerView),t.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var a=n.axisPointer.link;a&&!isArray$1(a)&&(n.axisPointer.link=[a])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(n,a){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,a)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(t){use(install$N),use(install$q)}var PolarAxisPointer=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,l,u,c,p){var d=u.axis;d.dim==="angle"&&(this.animationThreshold=Math.PI/18);var Q=d.polar,Ct=Q.getOtherAxis(d),ar=Ct.getExtent(),en=d.dataToCoord(l),tn=c.get("type");if(tn&&tn!=="none"){var on=buildElStyle(c),cn=pointerShapeBuilder$1[tn](d,Q,en,ar);cn.style=on,a.graphicKey=cn.type,a.pointer=cn}var gn=c.get(["label","margin"]),Cn=getLabelPosition(l,u,c,Q,gn);buildLabelElOption(a,u,c,p,Cn)},n}(BaseAxisPointer);function getLabelPosition(t,n,a,l,u){var c=n.axis,p=c.dataToCoord(t),d=l.getAngleAxis().getExtent()[0];d=d/180*Math.PI;var Q=l.getRadiusAxis().getExtent(),Ct,ar,en;if(c.dim==="radius"){var tn=create$1();rotate(tn,tn,d),translate(tn,tn,[l.cx,l.cy]),Ct=applyTransform([p,-u],tn);var on=n.getModel("axisLabel").get("rotate")||0,cn=AxisBuilder.innerTextLayout(d,on*Math.PI/180,-1);ar=cn.textAlign,en=cn.textVerticalAlign}else{var gn=Q[1];Ct=l.coordToPoint([gn+u,p]);var Cn=l.cx,ex=l.cy;ar=Math.abs(Ct[0]-Cn)/gn<.3?"center":Ct[0]>Cn?"left":"right",en=Math.abs(Ct[1]-ex)/gn<.3?"middle":Ct[1]>ex?"top":"bottom"}return{position:Ct,align:ar,verticalAlign:en}}var pointerShapeBuilder$1={line:function(t,n,a,l){return t.dim==="angle"?{type:"Line",shape:makeLineShape(n.coordToPoint([l[0],a]),n.coordToPoint([l[1],a]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r:a}}},shadow:function(t,n,a,l){var u=Math.max(1,t.getBandWidth()),c=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:makeSectorShape(n.cx,n.cy,l[0],l[1],(-a-u/2)*c,(-a+u/2)*c)}:{type:"Sector",shape:makeSectorShape(n.cx,n.cy,a-u/2,a+u/2,0,Math.PI*2)}}},PolarModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.findAxisModel=function(a){var l,u=this.ecModel;return u.eachComponent(a,function(c){c.getCoordSysModel()===this&&(l=c)},this),l},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n}(ComponentModel),PolarAxisModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},n.type="polarAxis",n}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="angleAxis",n}(PolarAxisModel),RadiusAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="radiusAxis",n}(PolarAxisModel),RadiusAxis=function(t){__extends(n,t);function n(a,l){return t.call(this,"radius",a,l)||this}return n.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)[this.dim==="radius"?0:1]},n}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(t){__extends(n,t);function n(a,l){return t.call(this,"angle",a,l||[0,360])||this}return n.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)[this.dim==="radius"?0:1]},n.prototype.calculateCategoryInterval=function(){var a=this,l=a.getLabelModel(),u=a.scale,c=u.getExtent(),p=u.count();if(c[1]-c[0]<1)return 0;var d=c[0],Q=a.dataToCoord(d+1)-a.dataToCoord(d),Ct=Math.abs(Q),ar=getBoundingRect(d==null?"":d+"",l.getFont(),"center","top"),en=Math.max(ar.height,7),tn=en/Ct;isNaN(tn)&&(tn=1/0);var on=Math.max(0,Math.floor(tn)),cn=inner$8(a.model),gn=cn.lastAutoInterval,Cn=cn.lastTickCount;return gn!=null&&Cn!=null&&Math.abs(gn-on)<=1&&Math.abs(Cn-p)<=1&&gn>on?on=gn:(cn.lastTickCount=p,cn.lastAutoInterval=on),on},n}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function t(n){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(n){var a=this.pointToCoord(n);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},t.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},t.prototype.getAxis=function(n){var a="_"+n+"Axis";return this[a]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(n){var a=[],l=this._angleAxis,u=this._radiusAxis;return l.scale.type===n&&a.push(l),u.scale.type===n&&a.push(u),a},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(n){var a=this._angleAxis;return n===a?this._radiusAxis:a},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(n){var a=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},t.prototype.dataToPoint=function(n,a){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],a),this._angleAxis.dataToAngle(n[1],a)])},t.prototype.pointToData=function(n,a){var l=this.pointToCoord(n);return[this._radiusAxis.radiusToData(l[0],a),this._angleAxis.angleToData(l[1],a)]},t.prototype.pointToCoord=function(n){var a=n[0]-this.cx,l=n[1]-this.cy,u=this.getAngleAxis(),c=u.getExtent(),p=Math.min(c[0],c[1]),d=Math.max(c[0],c[1]);u.inverse?p=d-360:d=p+360;var Q=Math.sqrt(a*a+l*l);a/=Q,l/=Q;for(var Ct=Math.atan2(-l,a)/Math.PI*180,ar=Ct<p?1:-1;Ct<p||Ct>d;)Ct+=ar*360;return[Q,Ct]},t.prototype.coordToPoint=function(n){var a=n[0],l=n[1]/180*Math.PI,u=Math.cos(l)*a+this.cx,c=-Math.sin(l)*a+this.cy;return[u,c]},t.prototype.getArea=function(){var n=this.getAngleAxis(),a=this.getRadiusAxis(),l=a.getExtent().slice();l[0]>l[1]&&l.reverse();var u=n.getExtent(),c=Math.PI/180,p=1e-4;return{cx:this.cx,cy:this.cy,r0:l[0],r:l[1],startAngle:-u[0]*c,endAngle:-u[1]*c,clockwise:n.inverse,contain:function(d,Q){var Ct=d-this.cx,ar=Q-this.cy,en=Ct*Ct+ar*ar,tn=this.r,on=this.r0;return tn!==on&&en-p<=tn*tn&&en+p>=on*on}}},t.prototype.convertToPixel=function(n,a,l){var u=getCoordSys$2(a);return u===this?this.dataToPoint(l):null},t.prototype.convertFromPixel=function(n,a,l){var u=getCoordSys$2(a);return u===this?this.pointToData(l):null},t}();function getCoordSys$2(t){var n=t.seriesModel,a=t.polarModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function resizePolar(t,n,a){var l=n.get("center"),u=a.getWidth(),c=a.getHeight();t.cx=parsePercent(l[0],u),t.cy=parsePercent(l[1],c);var p=t.getRadiusAxis(),d=Math.min(u,c)/2,Q=n.get("radius");Q==null?Q=[0,"100%"]:isArray$1(Q)||(Q=[0,Q]);var Ct=[parsePercent(Q[0],d),parsePercent(Q[1],d)];p.inverse?p.setExtent(Ct[1],Ct[0]):p.setExtent(Ct[0],Ct[1])}function updatePolarScale(t,n){var a=this,l=a.getAngleAxis(),u=a.getRadiusAxis();if(l.scale.setExtent(1/0,-1/0),u.scale.setExtent(1/0,-1/0),t.eachSeries(function(d){if(d.coordinateSystem===a){var Q=d.getData();each$f(getDataDimensionsOnAxis(Q,"radius"),function(Ct){u.scale.unionExtentFromData(Q,Ct)}),each$f(getDataDimensionsOnAxis(Q,"angle"),function(Ct){l.scale.unionExtentFromData(Q,Ct)})}}),niceScaleExtent(l.scale,l.model),niceScaleExtent(u.scale,u.model),l.type==="category"&&!l.onBand){var c=l.getExtent(),p=360/l.scale.count();l.inverse?c[1]+=p:c[1]-=p,l.setExtent(c[0],c[1])}}function isAngleAxisModel(t){return t.mainType==="angleAxis"}function setAxis(t,n){var a;if(t.type=n.get("type"),t.scale=createScaleByModel$1(n),t.onBand=n.get("boundaryGap")&&t.type==="category",t.inverse=n.get("inverse"),isAngleAxisModel(n)){t.inverse=t.inverse!==n.get("clockwise");var l=n.get("startAngle"),u=(a=n.get("endAngle"))!==null&&a!==void 0?a:l+(t.inverse?-360:360);t.setExtent(l,u)}n.axis=t,t.model=n}var polarCreator={dimensions:polarDimensions,create:function(t,n){var a=[];return t.eachComponent("polar",function(l,u){var c=new Polar(u+"");c.update=updatePolarScale;var p=c.getRadiusAxis(),d=c.getAngleAxis(),Q=l.findAxisModel("radiusAxis"),Ct=l.findAxisModel("angleAxis");setAxis(p,Q),setAxis(d,Ct),resizePolar(c,l,n),a.push(c),l.coordinateSystem=c,c.model=l}),t.eachSeries(function(l){if(l.get("coordinateSystem")==="polar"){var u=l.getReferringComponents("polar",SINGLE_REFERRING).models[0];l.coordinateSystem=u.coordinateSystem}}),a}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(t,n,a){n[1]>n[0]&&(n=n.slice().reverse());var l=t.coordToPoint([n[0],a]),u=t.coordToPoint([n[1],a]);return{x1:l[0],y1:l[1],x2:u[0],y2:u[1]}}function getRadiusIdx(t){var n=t.getRadiusAxis();return n.inverse?0:1}function fixAngleOverlap(t){var n=t[0],a=t[t.length-1];n&&a&&Math.abs(Math.abs(n.coord-a.coord)-360)<1e-4&&t.pop()}var AngleAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,l){if(this.group.removeAll(),!!a.get("show")){var u=a.axis,c=u.polar,p=c.getRadiusAxis().getExtent(),d=u.getTicksCoords(),Q=u.getMinorTicksCoords(),Ct=map$1(u.getViewLabels(),function(ar){ar=clone$4(ar);var en=u.scale,tn=en.type==="ordinal"?en.getRawOrdinalNumber(ar.tickValue):ar.tickValue;return ar.coord=u.dataToCoord(tn),ar});fixAngleOverlap(Ct),fixAngleOverlap(d),each$f(elementList,function(ar){a.get([ar,"show"])&&(!u.scale.isBlank()||ar==="axisLine")&&angelAxisElementsBuilders[ar](this.group,a,c,d,Q,p,Ct)},this)}},n.type="angleAxis",n}(AxisView),angelAxisElementsBuilders={axisLine:function(t,n,a,l,u,c){var p=n.getModel(["axisLine","lineStyle"]),d=a.getAngleAxis(),Q=Math.PI/180,Ct=d.getExtent(),ar=getRadiusIdx(a),en=ar?0:1,tn,on=Math.abs(Ct[1]-Ct[0])===360?"Circle":"Arc";c[en]===0?tn=new graphic$1[on]({shape:{cx:a.cx,cy:a.cy,r:c[ar],startAngle:-Ct[0]*Q,endAngle:-Ct[1]*Q,clockwise:d.inverse},style:p.getLineStyle(),z2:1,silent:!0}):tn=new Ring({shape:{cx:a.cx,cy:a.cy,r:c[ar],r0:c[en]},style:p.getLineStyle(),z2:1,silent:!0}),tn.style.fill=null,t.add(tn)},axisTick:function(t,n,a,l,u,c){var p=n.getModel("axisTick"),d=(p.get("inside")?-1:1)*p.get("length"),Q=c[getRadiusIdx(a)],Ct=map$1(l,function(ar){return new Line$1({shape:getAxisLineShape(a,[Q,Q+d],ar.coord)})});t.add(mergePath(Ct,{style:defaults(p.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,n,a,l,u,c){if(u.length){for(var p=n.getModel("axisTick"),d=n.getModel("minorTick"),Q=(p.get("inside")?-1:1)*d.get("length"),Ct=c[getRadiusIdx(a)],ar=[],en=0;en<u.length;en++)for(var tn=0;tn<u[en].length;tn++)ar.push(new Line$1({shape:getAxisLineShape(a,[Ct,Ct+Q],u[en][tn].coord)}));t.add(mergePath(ar,{style:defaults(d.getModel("lineStyle").getLineStyle(),defaults(p.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,n,a,l,u,c,p){var d=n.getCategories(!0),Q=n.getModel("axisLabel"),Ct=Q.get("margin"),ar=n.get("triggerEvent");each$f(p,function(en,tn){var on=Q,cn=en.tickValue,gn=c[getRadiusIdx(a)],Cn=a.coordToPoint([gn+Ct,en.coord]),ex=a.cx,ix=a.cy,ax=Math.abs(Cn[0]-ex)/gn<.3?"center":Cn[0]>ex?"left":"right",ox=Math.abs(Cn[1]-ix)/gn<.3?"middle":Cn[1]>ix?"top":"bottom";if(d&&d[cn]){var lx=d[cn];isObject$3(lx)&&lx.textStyle&&(on=new Model(lx.textStyle,Q,Q.ecModel))}var cx=new ZRText({silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(on,{x:Cn[0],y:Cn[1],fill:on.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:en.formattedLabel,align:ax,verticalAlign:ox})});if(t.add(cx),ar){var dx=AxisBuilder.makeAxisEventDataBase(n);dx.targetType="axisLabel",dx.value=en.rawLabel,getECData(cx).eventData=dx}},this)},splitLine:function(t,n,a,l,u,c){var p=n.getModel("splitLine"),d=p.getModel("lineStyle"),Q=d.get("color"),Ct=0;Q=Q instanceof Array?Q:[Q];for(var ar=[],en=0;en<l.length;en++){var tn=Ct++%Q.length;ar[tn]=ar[tn]||[],ar[tn].push(new Line$1({shape:getAxisLineShape(a,c,l[en].coord)}))}for(var en=0;en<ar.length;en++)t.add(mergePath(ar[en],{style:defaults({stroke:Q[en%Q.length]},d.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(t,n,a,l,u,c){if(u.length){for(var p=n.getModel("minorSplitLine"),d=p.getModel("lineStyle"),Q=[],Ct=0;Ct<u.length;Ct++)for(var ar=0;ar<u[Ct].length;ar++)Q.push(new Line$1({shape:getAxisLineShape(a,c,u[Ct][ar].coord)}));t.add(mergePath(Q,{style:d.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(t,n,a,l,u,c){if(l.length){var p=n.getModel("splitArea"),d=p.getModel("areaStyle"),Q=d.get("color"),Ct=0;Q=Q instanceof Array?Q:[Q];for(var ar=[],en=Math.PI/180,tn=-l[0].coord*en,on=Math.min(c[0],c[1]),cn=Math.max(c[0],c[1]),gn=n.get("clockwise"),Cn=1,ex=l.length;Cn<=ex;Cn++){var ix=Cn===ex?l[0].coord:l[Cn].coord,ax=Ct++%Q.length;ar[ax]=ar[ax]||[],ar[ax].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:on,r:cn,startAngle:tn,endAngle:-ix*en,clockwise:gn},silent:!0})),tn=-ix*en}for(var Cn=0;Cn<ar.length;Cn++)t.add(mergePath(ar[Cn],{style:defaults({fill:Q[Cn%Q.length]},d.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,l){if(this.group.removeAll(),!!a.get("show")){var u=this._axisGroup,c=this._axisGroup=new Group$3;this.group.add(c);var p=a.axis,d=p.polar,Q=d.getAngleAxis(),Ct=p.getTicksCoords(),ar=p.getMinorTicksCoords(),en=Q.getExtent()[0],tn=p.getExtent(),on=layoutAxis(d,a,en),cn=new AxisBuilder(a,on);each$f(axisBuilderAttrs$1,cn.add,cn),c.add(cn.getGroup()),groupTransition(u,c,a),each$f(selfBuilderAttrs$1,function(gn){a.get([gn,"show"])&&!p.scale.isBlank()&&axisElementBuilders$1[gn](this.group,a,d,en,tn,Ct,ar)},this)}},n.type="radiusAxis",n}(AxisView),axisElementBuilders$1={splitLine:function(t,n,a,l,u,c){var p=n.getModel("splitLine"),d=p.getModel("lineStyle"),Q=d.get("color"),Ct=0,ar=a.getAngleAxis(),en=Math.PI/180,tn=ar.getExtent(),on=Math.abs(tn[1]-tn[0])===360?"Circle":"Arc";Q=Q instanceof Array?Q:[Q];for(var cn=[],gn=0;gn<c.length;gn++){var Cn=Ct++%Q.length;cn[Cn]=cn[Cn]||[],cn[Cn].push(new graphic$1[on]({shape:{cx:a.cx,cy:a.cy,r:Math.max(c[gn].coord,0),startAngle:-tn[0]*en,endAngle:-tn[1]*en,clockwise:ar.inverse}}))}for(var gn=0;gn<cn.length;gn++)t.add(mergePath(cn[gn],{style:defaults({stroke:Q[gn%Q.length],fill:null},d.getLineStyle()),silent:!0}))},minorSplitLine:function(t,n,a,l,u,c,p){if(p.length){for(var d=n.getModel("minorSplitLine"),Q=d.getModel("lineStyle"),Ct=[],ar=0;ar<p.length;ar++)for(var en=0;en<p[ar].length;en++)Ct.push(new Circle({shape:{cx:a.cx,cy:a.cy,r:p[ar][en].coord}}));t.add(mergePath(Ct,{style:defaults({fill:null},Q.getLineStyle()),silent:!0}))}},splitArea:function(t,n,a,l,u,c){if(c.length){var p=n.getModel("splitArea"),d=p.getModel("areaStyle"),Q=d.get("color"),Ct=0;Q=Q instanceof Array?Q:[Q];for(var ar=[],en=c[0].coord,tn=1;tn<c.length;tn++){var on=Ct++%Q.length;ar[on]=ar[on]||[],ar[on].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:en,r:c[tn].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),en=c[tn].coord}for(var tn=0;tn<ar.length;tn++)t.add(mergePath(ar[tn],{style:defaults({fill:Q[tn%Q.length]},d.getAreaStyle()),silent:!0}))}}};function layoutAxis(t,n,a){return{position:[t.cx,t.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function getAxisKey(t,n){return n.dim+t.model.componentIndex}function barLayoutPolar(t,n,a){var l={},u=calRadialBar(filter(n.getSeriesByType(t),function(c){return!n.isSeriesFiltered(c)&&c.coordinateSystem&&c.coordinateSystem.type==="polar"}));n.eachSeriesByType(t,function(c){if(c.coordinateSystem.type==="polar"){var p=c.getData(),d=c.coordinateSystem,Q=d.getBaseAxis(),Ct=getAxisKey(d,Q),ar=getSeriesStackId(c),en=u[Ct][ar],tn=en.offset,on=en.width,cn=d.getOtherAxis(Q),gn=c.coordinateSystem.cx,Cn=c.coordinateSystem.cy,ex=c.get("barMinHeight")||0,ix=c.get("barMinAngle")||0;l[ar]=l[ar]||[];for(var ax=p.mapDimension(cn.dim),ox=p.mapDimension(Q.dim),lx=isDimensionStacked(p,ax),cx=Q.dim!=="radius"||!c.get("roundCap",!0),dx=cn.model,hx=dx.get("startValue"),fx=cn.dataToCoord(hx||0),ux=0,gx=p.count();ux<gx;ux++){var yx=p.get(ax,ux),_x=p.get(ox,ux),vx=yx>=0?"p":"n",bx=fx;lx&&(l[ar][_x]||(l[ar][_x]={p:fx,n:fx}),bx=l[ar][_x][vx]);var xx=void 0,Sx=void 0,Ax=void 0,Cx=void 0;if(cn.dim==="radius"){var Tx=cn.dataToCoord(yx)-fx,Px=Q.dataToCoord(_x);Math.abs(Tx)<ex&&(Tx=(Tx<0?-1:1)*ex),xx=bx,Sx=bx+Tx,Ax=Px-tn,Cx=Ax-on,lx&&(l[ar][_x][vx]=Sx)}else{var Fx=cn.dataToCoord(yx,cx)-fx,Mx=Q.dataToCoord(_x);Math.abs(Fx)<ix&&(Fx=(Fx<0?-1:1)*ix),xx=Mx+tn,Sx=xx+on,Ax=bx,Cx=bx+Fx,lx&&(l[ar][_x][vx]=Cx)}p.setItemLayout(ux,{cx:gn,cy:Cn,r0:xx,r:Sx,startAngle:-Ax*Math.PI/180,endAngle:-Cx*Math.PI/180,clockwise:Ax>=Cx})}}})}function calRadialBar(t){var n={};each$f(t,function(l,u){var c=l.getData(),p=l.coordinateSystem,d=p.getBaseAxis(),Q=getAxisKey(p,d),Ct=d.getExtent(),ar=d.type==="category"?d.getBandWidth():Math.abs(Ct[1]-Ct[0])/c.count(),en=n[Q]||{bandWidth:ar,remainedWidth:ar,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},tn=en.stacks;n[Q]=en;var on=getSeriesStackId(l);tn[on]||en.autoWidthCount++,tn[on]=tn[on]||{width:0,maxWidth:0};var cn=parsePercent(l.get("barWidth"),ar),gn=parsePercent(l.get("barMaxWidth"),ar),Cn=l.get("barGap"),ex=l.get("barCategoryGap");cn&&!tn[on].width&&(cn=Math.min(en.remainedWidth,cn),tn[on].width=cn,en.remainedWidth-=cn),gn&&(tn[on].maxWidth=gn),Cn!=null&&(en.gap=Cn),ex!=null&&(en.categoryGap=ex)});var a={};return each$f(n,function(l,u){a[u]={};var c=l.stacks,p=l.bandWidth,d=parsePercent(l.categoryGap,p),Q=parsePercent(l.gap,1),Ct=l.remainedWidth,ar=l.autoWidthCount,en=(Ct-d)/(ar+(ar-1)*Q);en=Math.max(en,0),each$f(c,function(gn,Cn){var ex=gn.maxWidth;ex&&ex<en&&(ex=Math.min(ex,Ct),gn.width&&(ex=Math.min(ex,gn.width)),Ct-=ex,gn.width=ex,ar--)}),en=(Ct-d)/(ar+(ar-1)*Q),en=Math.max(en,0);var tn=0,on;each$f(c,function(gn,Cn){gn.width||(gn.width=en),on=gn,tn+=gn.width*(1+Q)}),on&&(tn-=on.width*Q);var cn=-tn/2;each$f(c,function(gn,Cn){a[u][Cn]=a[u][Cn]||{offset:cn,width:gn.width},cn+=gn.width*(1+Q)})}),a}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="polar",n}(ComponentView);function install$o(t){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),t.registerCoordinateSystem("polar",polarCreator),t.registerComponentModel(PolarModel),t.registerComponentView(PolarView),axisModelCreator(t,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(t,"radius",RadiusAxisModel,radiusAxisExtraOption),t.registerComponentView(AngleAxisView),t.registerComponentView(RadiusAxisView),t.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(t,n){n=n||{};var a=t.coordinateSystem,l=t.axis,u={},c=l.position,p=l.orient,d=a.getRect(),Q=[d.x,d.x+d.width,d.y,d.y+d.height],Ct={horizontal:{top:Q[2],bottom:Q[3]},vertical:{left:Q[0],right:Q[1]}};u.position=[p==="vertical"?Ct.vertical[c]:Q[0],p==="horizontal"?Ct.horizontal[c]:Q[3]];var ar={horizontal:0,vertical:1};u.rotation=Math.PI/2*ar[p];var en={top:-1,bottom:1,right:1,left:-1};u.labelDirection=u.tickDirection=u.nameDirection=en[c],t.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(n.labelInside,t.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var tn=n.rotate;return tn==null&&(tn=t.get(["axisLabel","rotate"])),u.labelRotation=c==="top"?-tn:tn,u.z2=1,u}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="SingleAxisPointer",a}return n.prototype.render=function(a,l,u,c){var p=this.group;p.removeAll();var d=this._axisGroup;this._axisGroup=new Group$3;var Q=layout$1(a),Ct=new AxisBuilder(a,Q);each$f(axisBuilderAttrs,Ct.add,Ct),p.add(this._axisGroup),p.add(Ct.getGroup()),each$f(selfBuilderAttrs,function(ar){a.get([ar,"show"])&&axisElementBuilders[ar](this,this.group,this._axisGroup,a)},this),groupTransition(d,this._axisGroup,a),t.prototype.render.call(this,a,l,u,c)},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="singleAxis",n}(AxisView),axisElementBuilders={splitLine:function(t,n,a,l){var u=l.axis;if(!u.scale.isBlank()){var c=l.getModel("splitLine"),p=c.getModel("lineStyle"),d=p.get("color");d=d instanceof Array?d:[d];for(var Q=p.get("width"),Ct=l.coordinateSystem.getRect(),ar=u.isHorizontal(),en=[],tn=0,on=u.getTicksCoords({tickModel:c}),cn=[],gn=[],Cn=0;Cn<on.length;++Cn){var ex=u.toGlobalCoord(on[Cn].coord);ar?(cn[0]=ex,cn[1]=Ct.y,gn[0]=ex,gn[1]=Ct.y+Ct.height):(cn[0]=Ct.x,cn[1]=ex,gn[0]=Ct.x+Ct.width,gn[1]=ex);var ix=new Line$1({shape:{x1:cn[0],y1:cn[1],x2:gn[0],y2:gn[1]},silent:!0});subPixelOptimizeLine(ix.shape,Q);var ax=tn++%d.length;en[ax]=en[ax]||[],en[ax].push(ix)}for(var ox=p.getLineStyle(["color"]),Cn=0;Cn<en.length;++Cn)n.add(mergePath(en[Cn],{style:defaults({stroke:d[Cn%d.length]},ox),silent:!0}))}},splitArea:function(t,n,a,l){rectCoordAxisBuildSplitArea(t,a,l,l)}},SingleAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(t){__extends(n,t);function n(a,l,u,c,p){var d=t.call(this,a,l,u)||this;return d.type=c||"value",d.position=p||"bottom",d}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.pointToData=function(a,l){return this.coordinateSystem.pointToData(a)[0]},n}(Axis),singleDimensions=["single"],Single=function(){function t(n,a,l){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=n,this._init(n,a,l)}return t.prototype._init=function(n,a,l){var u=this.dimension,c=new SingleAxis(u,createScaleByModel$1(n),[0,0],n.get("type"),n.get("position")),p=c.type==="category";c.onBand=p&&n.get("boundaryGap"),c.inverse=n.get("inverse"),c.orient=n.get("orient"),n.axis=c,c.model=n,c.coordinateSystem=this,this._axis=c},t.prototype.update=function(n,a){n.eachSeries(function(l){if(l.coordinateSystem===this){var u=l.getData();each$f(u.mapDimensionsAll(this.dimension),function(c){this._axis.scale.unionExtentFromData(u,c)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var n=this._rect,a=this._axis,l=a.isHorizontal(),u=l?[0,n.width]:[0,n.height],c=a.inverse?1:0;a.setExtent(u[c],u[1-c]),this._updateAxisTransform(a,l?n.x:n.y)},t.prototype._updateAxisTransform=function(n,a){var l=n.getExtent(),u=l[0]+l[1],c=n.isHorizontal();n.toGlobalCoord=c?function(p){return p+a}:function(p){return u-p+a},n.toLocalCoord=c?function(p){return p-a}:function(p){return u-p+a}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(n){var a=this.getRect(),l=this.getAxis(),u=l.orient;return u==="horizontal"?l.contain(l.toLocalCoord(n[0]))&&n[1]>=a.y&&n[1]<=a.y+a.height:l.contain(l.toLocalCoord(n[1]))&&n[0]>=a.y&&n[0]<=a.y+a.height},t.prototype.pointToData=function(n){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(n[a.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(n){var a=this.getAxis(),l=this.getRect(),u=[],c=a.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),u[c]=a.toGlobalCoord(a.dataToCoord(+n)),u[1-c]=c===0?l.y+l.height/2:l.x+l.width/2,u},t.prototype.convertToPixel=function(n,a,l){var u=getCoordSys$1(a);return u===this?this.dataToPoint(l):null},t.prototype.convertFromPixel=function(n,a,l){var u=getCoordSys$1(a);return u===this?this.pointToData(l):null},t}();function getCoordSys$1(t){var n=t.seriesModel,a=t.singleAxisModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function create(t,n){var a=[];return t.eachComponent("singleAxis",function(l,u){var c=new Single(l,t,n);c.name="single_"+u,c.resize(l,n),l.coordinateSystem=c,a.push(c)}),t.eachSeries(function(l){if(l.get("coordinateSystem")==="singleAxis"){var u=l.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];l.coordinateSystem=u&&u.coordinateSystem}}),a}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,l,u,c,p){var d=u.axis,Q=d.coordinateSystem,Ct=getGlobalExtent(Q,1-getPointDimIndex(d)),ar=Q.dataToPoint(l)[0],en=c.get("type");if(en&&en!=="none"){var tn=buildElStyle(c),on=pointerShapeBuilder[en](d,ar,Ct);on.style=tn,a.graphicKey=on.type,a.pointer=on}var cn=layout$1(u);buildCartesianSingleLabelElOption(l,a,cn,u,c,p)},n.prototype.getHandleTransform=function(a,l,u){var c=layout$1(l,{labelInside:!1});c.labelMargin=u.get(["handle","margin"]);var p=getTransformedPosition(l.axis,a,c);return{x:p[0],y:p[1],rotation:c.rotation+(c.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,l,u,c){var p=u.axis,d=p.coordinateSystem,Q=getPointDimIndex(p),Ct=getGlobalExtent(d,Q),ar=[a.x,a.y];ar[Q]+=l[Q],ar[Q]=Math.min(Ct[1],ar[Q]),ar[Q]=Math.max(Ct[0],ar[Q]);var en=getGlobalExtent(d,1-Q),tn=(en[1]+en[0])/2,on=[tn,tn];return on[Q]=ar[Q],{x:ar[0],y:ar[1],rotation:a.rotation,cursorPoint:on,tooltipOption:{verticalAlign:"middle"}}},n}(BaseAxisPointer),pointerShapeBuilder={line:function(t,n,a){var l=makeLineShape([n,a[0]],[n,a[1]],getPointDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:l}},shadow:function(t,n,a){var l=t.getBandWidth(),u=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-l/2,a[0]],[l,u],getPointDimIndex(t))}}};function getPointDimIndex(t){return t.isHorizontal()?0:1}function getGlobalExtent(t,n){var a=t.getRect();return[a[XY$1[n]],a[XY$1[n]]+a[WH$1[n]]]}var SingleView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="single",n}(ComponentView);function install$n(t){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),t.registerComponentView(SingleView),t.registerComponentView(SingleAxisView),t.registerComponentModel(SingleAxisModel),axisModelCreator(t,"single",SingleAxisModel,SingleAxisModel.defaultOption),t.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l,u){var c=getLayoutParams(a);t.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(a,c)},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,a)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n}(ComponentModel);function mergeAndNormalizeLayoutParams$1(t,n){var a=t.cellSize,l;isArray$1(a)?l=a:l=t.cellSize=[a,a],l.length===1&&(l[1]=l[0]);var u=map$1([0,1],function(c){return sizeCalculable(n,c)&&(l[c]="auto"),l[c]!=null&&l[c]!=="auto"});mergeLayoutParam(t,n,{type:"box",ignoreSize:u})}var CalendarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){var c=this.group;c.removeAll();var p=a.coordinateSystem,d=p.getRangeInfo(),Q=p.getOrient(),Ct=l.getLocaleModel();this._renderDayRect(a,d,c),this._renderLines(a,d,Q,c),this._renderYearText(a,d,Q,c),this._renderMonthText(a,Ct,Q,c),this._renderWeekText(a,Ct,d,Q,c)},n.prototype._renderDayRect=function(a,l,u){for(var c=a.coordinateSystem,p=a.getModel("itemStyle").getItemStyle(),d=c.getCellWidth(),Q=c.getCellHeight(),Ct=l.start.time;Ct<=l.end.time;Ct=c.getNextNDay(Ct,1).time){var ar=c.dataToRect([Ct],!1).tl,en=new Rect$2({shape:{x:ar[0],y:ar[1],width:d,height:Q},cursor:"default",style:p});u.add(en)}},n.prototype._renderLines=function(a,l,u,c){var p=this,d=a.coordinateSystem,Q=a.getModel(["splitLine","lineStyle"]).getLineStyle(),Ct=a.get(["splitLine","show"]),ar=Q.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var en=l.start,tn=0;en.time<=l.end.time;tn++){cn(en.formatedDate),tn===0&&(en=d.getDateInfo(l.start.y+"-"+l.start.m));var on=en.date;on.setMonth(on.getMonth()+1),en=d.getDateInfo(on)}cn(d.getNextNDay(l.end.time,1).formatedDate);function cn(gn){p._firstDayOfMonth.push(d.getDateInfo(gn)),p._firstDayPoints.push(d.dataToRect([gn],!1).tl);var Cn=p._getLinePointsOfOneWeek(a,gn,u);p._tlpoints.push(Cn[0]),p._blpoints.push(Cn[Cn.length-1]),Ct&&p._drawSplitline(Cn,Q,c)}Ct&&this._drawSplitline(p._getEdgesPoints(p._tlpoints,ar,u),Q,c),Ct&&this._drawSplitline(p._getEdgesPoints(p._blpoints,ar,u),Q,c)},n.prototype._getEdgesPoints=function(a,l,u){var c=[a[0].slice(),a[a.length-1].slice()],p=u==="horizontal"?0:1;return c[0][p]=c[0][p]-l/2,c[1][p]=c[1][p]+l/2,c},n.prototype._drawSplitline=function(a,l,u){var c=new Polyline$1({z2:20,shape:{points:a},style:l});u.add(c)},n.prototype._getLinePointsOfOneWeek=function(a,l,u){for(var c=a.coordinateSystem,p=c.getDateInfo(l),d=[],Q=0;Q<7;Q++){var Ct=c.getNextNDay(p.time,Q),ar=c.dataToRect([Ct.time],!1);d[2*Ct.day]=ar.tl,d[2*Ct.day+1]=ar[u==="horizontal"?"bl":"tr"]}return d},n.prototype._formatterLabel=function(a,l){return isString$1(a)&&a?formatTplSimple(a,l):isFunction$1(a)?a(l):l.nameMap},n.prototype._yearTextPositionControl=function(a,l,u,c,p){var d=l[0],Q=l[1],Ct=["center","bottom"];c==="bottom"?(Q+=p,Ct=["center","top"]):c==="left"?d-=p:c==="right"?(d+=p,Ct=["center","top"]):Q-=p;var ar=0;return(c==="left"||c==="right")&&(ar=Math.PI/2),{rotation:ar,x:d,y:Q,style:{align:Ct[0],verticalAlign:Ct[1]}}},n.prototype._renderYearText=function(a,l,u,c){var p=a.getModel("yearLabel");if(p.get("show")){var d=p.get("margin"),Q=p.get("position");Q||(Q=u!=="horizontal"?"top":"left");var Ct=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],ar=(Ct[0][0]+Ct[1][0])/2,en=(Ct[0][1]+Ct[1][1])/2,tn=u==="horizontal"?0:1,on={top:[ar,Ct[tn][1]],bottom:[ar,Ct[1-tn][1]],left:[Ct[1-tn][0],en],right:[Ct[tn][0],en]},cn=l.start.y;+l.end.y>+l.start.y&&(cn=cn+"-"+l.end.y);var gn=p.get("formatter"),Cn={start:l.start.y,end:l.end.y,nameMap:cn},ex=this._formatterLabel(gn,Cn),ix=new ZRText({z2:30,style:createTextStyle$1(p,{text:ex}),silent:p.get("silent")});ix.attr(this._yearTextPositionControl(ix,on[Q],u,Q,d)),c.add(ix)}},n.prototype._monthTextPositionControl=function(a,l,u,c,p){var d="left",Q="top",Ct=a[0],ar=a[1];return u==="horizontal"?(ar=ar+p,l&&(d="center"),c==="start"&&(Q="bottom")):(Ct=Ct+p,l&&(Q="middle"),c==="start"&&(d="right")),{x:Ct,y:ar,align:d,verticalAlign:Q}},n.prototype._renderMonthText=function(a,l,u,c){var p=a.getModel("monthLabel");if(p.get("show")){var d=p.get("nameMap"),Q=p.get("margin"),Ct=p.get("position"),ar=p.get("align"),en=[this._tlpoints,this._blpoints];(!d||isString$1(d))&&(d&&(l=getLocaleModel(d)||l),d=l.get(["time","monthAbbr"])||[]);var tn=Ct==="start"?0:1,on=u==="horizontal"?0:1;Q=Ct==="start"?-Q:Q;for(var cn=ar==="center",gn=p.get("silent"),Cn=0;Cn<en[tn].length-1;Cn++){var ex=en[tn][Cn].slice(),ix=this._firstDayOfMonth[Cn];if(cn){var ax=this._firstDayPoints[Cn];ex[on]=(ax[on]+en[0][Cn+1][on])/2}var ox=p.get("formatter"),lx=d[+ix.m-1],cx={yyyy:ix.y,yy:(ix.y+"").slice(2),MM:ix.m,M:+ix.m,nameMap:lx},dx=this._formatterLabel(ox,cx),hx=new ZRText({z2:30,style:extend(createTextStyle$1(p,{text:dx}),this._monthTextPositionControl(ex,cn,u,Ct,Q)),silent:gn});c.add(hx)}}},n.prototype._weekTextPositionControl=function(a,l,u,c,p){var d="center",Q="middle",Ct=a[0],ar=a[1],en=u==="start";return l==="horizontal"?(Ct=Ct+c+(en?1:-1)*p[0]/2,d=en?"right":"left"):(ar=ar+c+(en?1:-1)*p[1]/2,Q=en?"bottom":"top"),{x:Ct,y:ar,align:d,verticalAlign:Q}},n.prototype._renderWeekText=function(a,l,u,c,p){var d=a.getModel("dayLabel");if(d.get("show")){var Q=a.coordinateSystem,Ct=d.get("position"),ar=d.get("nameMap"),en=d.get("margin"),tn=Q.getFirstDayOfWeek();if(!ar||isString$1(ar)){ar&&(l=getLocaleModel(ar)||l);var on=l.get(["time","dayOfWeekShort"]);ar=on||map$1(l.get(["time","dayOfWeekAbbr"]),function(cx){return cx[0]})}var cn=Q.getNextNDay(u.end.time,7-u.lweek).time,gn=[Q.getCellWidth(),Q.getCellHeight()];en=parsePercent(en,Math.min(gn[1],gn[0])),Ct==="start"&&(cn=Q.getNextNDay(u.start.time,-(7+u.fweek)).time,en=-en);for(var Cn=d.get("silent"),ex=0;ex<7;ex++){var ix=Q.getNextNDay(cn,ex),ax=Q.dataToRect([ix.time],!1).center,ox=ex;ox=Math.abs((ex+tn)%7);var lx=new ZRText({z2:30,style:extend(createTextStyle$1(d,{text:ar[ox]}),this._weekTextPositionControl(ax,c,Ct,en,gn)),silent:Cn});p.add(lx)}}},n.type="calendar",n}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function t(n,a,l){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=n}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(n){n=parseDate(n);var a=n.getFullYear(),l=n.getMonth()+1,u=l<10?"0"+l:""+l,c=n.getDate(),p=c<10?"0"+c:""+c,d=n.getDay();return d=Math.abs((d+7-this.getFirstDayOfWeek())%7),{y:a+"",m:u,d:p,day:d,time:n.getTime(),formatedDate:a+"-"+u+"-"+p,date:n}},t.prototype.getNextNDay=function(n,a){return a=a||0,a===0?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+a),this.getDateInfo(n))},t.prototype.update=function(n,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var l=this._rangeInfo.weeks||1,u=["width","height"],c=this._model.getCellSize().slice(),p=this._model.getBoxLayoutParams(),d=this._orient==="horizontal"?[l,7]:[7,l];each$f([0,1],function(en){ar(c,en)&&(p[u[en]]=c[en]*d[en])});var Q={width:a.getWidth(),height:a.getHeight()},Ct=this._rect=getLayoutRect(p,Q);each$f([0,1],function(en){ar(c,en)||(c[en]=Ct[u[en]]/d[en])});function ar(en,tn){return en[tn]!=null&&en[tn]!=="auto"}this._sw=c[0],this._sh=c[1]},t.prototype.dataToPoint=function(n,a){isArray$1(n)&&(n=n[0]),a==null&&(a=!0);var l=this.getDateInfo(n),u=this._rangeInfo,c=l.formatedDate;if(a&&!(l.time>=u.start.time&&l.time<u.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var p=l.day,d=this._getRangeInfo([u.start.time,c]).nthWeek;return this._orient==="vertical"?[this._rect.x+p*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]:[this._rect.x+d*this._sw+this._sw/2,this._rect.y+p*this._sh+this._sh/2]},t.prototype.pointToData=function(n){var a=this.pointToDate(n);return a&&a.time},t.prototype.dataToRect=function(n,a){var l=this.dataToPoint(n,a);return{contentShape:{x:l[0]-(this._sw-this._lineWidth)/2,y:l[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:l,tl:[l[0]-this._sw/2,l[1]-this._sh/2],tr:[l[0]+this._sw/2,l[1]-this._sh/2],br:[l[0]+this._sw/2,l[1]+this._sh/2],bl:[l[0]-this._sw/2,l[1]+this._sh/2]}},t.prototype.pointToDate=function(n){var a=Math.floor((n[0]-this._rect.x)/this._sw)+1,l=Math.floor((n[1]-this._rect.y)/this._sh)+1,u=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(l,a-1,u):this._getDateByWeeksAndDay(a,l-1,u)},t.prototype.convertToPixel=function(n,a,l){var u=getCoordSys(a);return u===this?u.dataToPoint(l):null},t.prototype.convertFromPixel=function(n,a,l){var u=getCoordSys(a);return u===this?u.pointToData(l):null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var n=this._model.get("range"),a;if(isArray$1(n)&&n.length===1&&(n=n[0]),isArray$1(n))a=n;else{var l=n.toString();if(/^\d{4}$/.test(l)&&(a=[l+"-01-01",l+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(l)){var u=this.getDateInfo(l),c=u.date;c.setMonth(c.getMonth()+1);var p=this.getNextNDay(c,-1);a=[u.formatedDate,p.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(l)&&(a=[l,l])}if(!a)return n;var d=this._getRangeInfo(a);return d.start.time>d.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(n){var a=[this.getDateInfo(n[0]),this.getDateInfo(n[1])],l;a[0].time>a[1].time&&(l=!0,a.reverse());var u=Math.floor(a[1].time/PROXIMATE_ONE_DAY)-Math.floor(a[0].time/PROXIMATE_ONE_DAY)+1,c=new Date(a[0].time),p=c.getDate(),d=a[1].date.getDate();c.setDate(p+u-1);var Q=c.getDate();if(Q!==d)for(var Ct=c.getTime()-a[1].time>0?1:-1;(Q=c.getDate())!==d&&(c.getTime()-a[1].time)*Ct>0;)u-=Ct,c.setDate(Q-Ct);var ar=Math.floor((u+a[0].day+6)/7),en=l?-ar+1:ar-1;return l&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:u,weeks:ar,nthWeek:en,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(n,a,l){var u=this._getRangeInfo(l);if(n>u.weeks||n===0&&a<u.fweek||n===u.weeks&&a>u.lweek)return null;var c=(n-1)*7-u.fweek+a,p=new Date(u.start.time);return p.setDate(+u.start.d+c),this.getDateInfo(p)},t.create=function(n,a){var l=[];return n.eachComponent("calendar",function(u){var c=new t(u);l.push(c),u.coordinateSystem=c}),n.eachSeries(function(u){u.get("coordinateSystem")==="calendar"&&(u.coordinateSystem=l[u.get("calendarIndex")||0])}),l},t.dimensions=["time","value"],t}();function getCoordSys(t){var n=t.calendarModel,a=t.seriesModel,l=n?n.coordinateSystem:a?a.coordinateSystem:null;return l}function install$m(t){t.registerComponentModel(CalendarModel),t.registerComponentView(CalendarView),t.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(t,n){var a=t.existing;if(n.id=t.keyInfo.id,!n.type&&a&&(n.type=a.type),n.parentId==null){var l=n.parentOption;l?n.parentId=l.id:a&&(n.parentId=a.parentId)}n.parentOption=null}function isSetLoc(t,n){var a;return each$f(n,function(l){t[l]!=null&&t[l]!=="auto"&&(a=!0)}),a}function mergeNewElOptionToExist(t,n,a){var l=extend({},a),u=t[n],c=a.$action||"merge";c==="merge"?u?(merge(u,l,!0),mergeLayoutParam(u,l,{ignoreSize:!0}),copyLayoutParams(a,u),copyTransitionInfo(a,u),copyTransitionInfo(a,u,"shape"),copyTransitionInfo(a,u,"style"),copyTransitionInfo(a,u,"extra"),a.clipPath=u.clipPath):t[n]=l:c==="replace"?t[n]=l:c==="remove"&&u&&(t[n]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(t,n,a){if(a&&(!t[a]&&n[a]&&(t[a]={}),t=t[a],n=n[a]),!(!t||!n))for(var l=a?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,u=0;u<l.length;u++){var c=l[u];t[c]==null&&n[c]!=null&&(t[c]=n[c])}}function setLayoutInfoToExist(t,n){if(t&&(t.hv=n.hv=[isSetLoc(n,["left","right"]),isSetLoc(n,["top","bottom"])],t.type==="group")){var a=t,l=n;a.width==null&&(a.width=l.width=0),a.height==null&&(a.height=l.height=0)}}var GraphicComponentModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventAutoZ=!0,a}return n.prototype.mergeOption=function(a,l){var u=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,a,l),this.option.elements=u},n.prototype.optionUpdated=function(a,l){var u=this.option,c=(l?u:a).elements,p=u.elements=l?[]:u.elements,d=[];this._flatten(c,d,null);var Q=mappingToExists(p,d,"normalMerge"),Ct=this._elOptionsToUpdate=[];each$f(Q,function(ar,en){var tn=ar.newOption;tn&&(Ct.push(tn),setKeyInfoToNewElOption(ar,tn),mergeNewElOptionToExist(p,en,tn),setLayoutInfoToExist(p[en],tn))},this),u.elements=filter(p,function(ar){return ar&&delete ar.$action,ar!=null})},n.prototype._flatten=function(a,l,u){each$f(a,function(c){if(c){u&&(c.parentOption=u),l.push(c);var p=c.children;p&&p.length&&this._flatten(p,l,c),delete c.children}},this)},n.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},n.type="graphic",n.defaultOption={elements:[]},n}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._elMap=createHashMap()},n.prototype.render=function(a,l,u){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,u)},n.prototype._updateElements=function(a){var l=a.useElOptionsToUpdate();if(l){var u=this._elMap,c=this.group,p=a.get("z"),d=a.get("zlevel");each$f(l,function(Q){var Ct=convertOptionIdName(Q.id,null),ar=Ct!=null?u.get(Ct):null,en=convertOptionIdName(Q.parentId,null),tn=en!=null?u.get(en):c,on=Q.type,cn=Q.style;on==="text"&&cn&&Q.hv&&Q.hv[1]&&(cn.textVerticalAlign=cn.textBaseline=cn.verticalAlign=cn.align=null);var gn=Q.textContent,Cn=Q.textConfig;if(cn&&isEC4CompatibleStyle(cn,on,!!Cn,!!gn)){var ex=convertFromEC4CompatibleStyle(cn,on,!0);!Cn&&ex.textConfig&&(Cn=Q.textConfig=ex.textConfig),!gn&&ex.textContent&&(gn=ex.textContent)}var ix=getCleanedElOption(Q),ax=Q.$action||"merge",ox=ax==="merge",lx=ax==="replace";if(ox){var cx=!ar,dx=ar;cx?dx=createEl(Ct,tn,Q.type,u):(dx&&(inner$7(dx).isNew=!1),stopPreviousKeyframeAnimationAndRestore(dx)),dx&&(applyUpdateTransition(dx,ix,a,{isInit:cx}),updateCommonAttrs(dx,Q,p,d))}else if(lx){removeEl$1(ar,Q,u,a);var hx=createEl(Ct,tn,Q.type,u);hx&&(applyUpdateTransition(hx,ix,a,{isInit:!0}),updateCommonAttrs(hx,Q,p,d))}else ax==="remove"&&(updateLeaveTo(ar,Q),removeEl$1(ar,Q,u,a));var fx=u.get(Ct);if(fx&&gn)if(ox){var ux=fx.getTextContent();ux?ux.attr(gn):fx.setTextContent(new ZRText(gn))}else lx&&fx.setTextContent(new ZRText(gn));if(fx){var gx=Q.clipPath;if(gx){var yx=gx.type,_x=void 0,cx=!1;if(ox){var vx=fx.getClipPath();cx=!vx||inner$7(vx).type!==yx,_x=cx?newEl(yx):vx}else lx&&(cx=!0,_x=newEl(yx));fx.setClipPath(_x),applyUpdateTransition(_x,gx,a,{isInit:cx}),applyKeyframeAnimation(_x,gx.keyframeAnimation,a)}var bx=inner$7(fx);fx.setTextConfig(Cn),bx.option=Q,setEventData(fx,a,Q),setTooltipConfig({el:fx,componentModel:a,itemName:fx.name,itemTooltipOption:Q.tooltip}),applyKeyframeAnimation(fx,Q.keyframeAnimation,a)}})}},n.prototype._relocate=function(a,l){for(var u=a.option.elements,c=this.group,p=this._elMap,d=l.getWidth(),Q=l.getHeight(),Ct=["x","y"],ar=0;ar<u.length;ar++){var en=u[ar],tn=convertOptionIdName(en.id,null),on=tn!=null?p.get(tn):null;if(!(!on||!on.isGroup)){var cn=on.parent,gn=cn===c,Cn=inner$7(on),ex=inner$7(cn);Cn.width=parsePercent(Cn.option.width,gn?d:ex.width)||0,Cn.height=parsePercent(Cn.option.height,gn?Q:ex.height)||0}}for(var ar=u.length-1;ar>=0;ar--){var en=u[ar],tn=convertOptionIdName(en.id,null),on=tn!=null?p.get(tn):null;if(on){var cn=on.parent,ex=inner$7(cn),ix=cn===c?{width:d,height:Q}:{width:ex.width,height:ex.height},ax={},ox=positionElement(on,en,ix,null,{hv:en.hv,boundingMode:en.bounding},ax);if(!inner$7(on).isNew&&ox){for(var lx=en.transition,cx={},dx=0;dx<Ct.length;dx++){var hx=Ct[dx],fx=ax[hx];lx&&(isTransitionAll(lx)||indexOf(lx,hx)>=0)?cx[hx]=fx:on[hx]=fx}updateProps$1(on,cx,a,0)}else on.attr(ax)}}},n.prototype._clear=function(){var a=this,l=this._elMap;l.each(function(u){removeEl$1(u,inner$7(u).option,l,a._lastGraphicModel)}),this._elMap=createHashMap()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n}(ComponentView);function newEl(t){var n=hasOwn(nonShapeGraphicElements,t)?nonShapeGraphicElements[t]:getShapeClass(t),a=new n({});return inner$7(a).type=t,a}function createEl(t,n,a,l){var u=newEl(a);return n.add(u),l.set(t,u),inner$7(u).id=t,inner$7(u).isNew=!0,u}function removeEl$1(t,n,a,l){var u=t&&t.parent;u&&(t.type==="group"&&t.traverse(function(c){removeEl$1(c,n,a,l)}),applyLeaveTransition(t,n,l),a.removeKey(inner$7(t).id))}function updateCommonAttrs(t,n,a,l){t.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",l||0],["z",a||0],["z2",0]],function(u){var c=u[0];hasOwn(n,c)?t[c]=retrieve2(n[c],u[1]):t[c]==null&&(t[c]=u[1])}),each$f(keys(n),function(u){if(u.indexOf("on")===0){var c=n[u];t[u]=isFunction$1(c)?c:null}}),hasOwn(n,"draggable")&&(t.draggable=n.draggable),n.name!=null&&(t.name=n.name),n.id!=null&&(t.id=n.id)}function getCleanedElOption(t){return t=extend({},t),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(n){delete t[n]}),t}function setEventData(t,n,a){var l=getECData(t).eventData;!t.silent&&!t.ignore&&!l&&(l=getECData(t).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:t.name}),l&&(l.info=a.info)}function install$l(t){t.registerComponentModel(GraphicComponentModel),t.registerComponentView(GraphicComponentView),t.registerPreprocessor(function(n){var a=n.graphic;isArray$1(a)?!a[0]||!a[0].elements?n.graphic=[{elements:a}]:n.graphic=[n.graphic[0]]:a&&!a.elements&&(n.graphic=[{elements:[a]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(t){var n=t.get("coordinateSystem");return indexOf(SERIES_COORDS,n)>=0}function getAxisMainType(t){return t+"Axis"}function findEffectedDataZooms(t,n){var a=createHashMap(),l=[],u=createHashMap();t.eachComponent({mainType:"dataZoom",query:n},function(ar){u.get(ar.uid)||d(ar)});var c;do c=!1,t.eachComponent("dataZoom",p);while(c);function p(ar){!u.get(ar.uid)&&Q(ar)&&(d(ar),c=!0)}function d(ar){u.set(ar.uid,!0),l.push(ar),Ct(ar)}function Q(ar){var en=!1;return ar.eachTargetAxis(function(tn,on){var cn=a.get(tn);cn&&cn[on]&&(en=!0)}),en}function Ct(ar){ar.eachTargetAxis(function(en,tn){(a.get(en)||a.set(en,[]))[tn]=!0})}return l}function collectReferCoordSysModelInfo(t){var n=t.ecModel,a={infoList:[],infoMap:createHashMap()};return t.eachTargetAxis(function(l,u){var c=n.getComponent(getAxisMainType(l),u);if(c){var p=c.getCoordSysModel();if(p){var d=p.uid,Q=a.infoMap.get(d);Q||(Q={model:p,axisModels:[]},a.infoList.push(Q),a.infoMap.set(d,Q)),Q.axisModels.push(c)}}}),a}var DataZoomAxisInfo=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},t}(),DataZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return n.prototype.init=function(a,l,u){var c=retrieveRawOption(a);this.settledOption=c,this.mergeDefaultAndTheme(a,u),this._doInit(c)},n.prototype.mergeOption=function(a){var l=retrieveRawOption(a);merge(this.option,a,!0),merge(this.settledOption,l,!0),this._doInit(l)},n.prototype._doInit=function(a){var l=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var u=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(c,p){this._rangePropMode[p]==="value"&&(l[c[0]]=u[c[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var a=this.get("orient",!0),l=this._targetAxisInfoMap=createHashMap(),u=this._fillSpecifiedTargetAxis(l);u?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(l,this._orient)),this._noTarget=!0,l.each(function(c){c.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(a){var l=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(u){var c=this.getReferringComponents(getAxisMainType(u),MULTIPLE_REFERRING);if(c.specified){l=!0;var p=new DataZoomAxisInfo;each$f(c.models,function(d){p.add(d.componentIndex)}),a.set(u,p)}},this),l},n.prototype._fillAutoTargetAxisByOrient=function(a,l){var u=this.ecModel,c=!0;if(c){var p=l==="vertical"?"y":"x",d=u.findComponents({mainType:p+"Axis"});Q(d,p)}if(c){var d=u.findComponents({mainType:"singleAxis",filter:function(ar){return ar.get("orient",!0)===l}});Q(d,"single")}function Q(Ct,ar){var en=Ct[0];if(en){var tn=new DataZoomAxisInfo;if(tn.add(en.componentIndex),a.set(ar,tn),c=!1,ar==="x"||ar==="y"){var on=en.getReferringComponents("grid",SINGLE_REFERRING).models[0];on&&each$f(Ct,function(cn){en.componentIndex!==cn.componentIndex&&on===cn.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&tn.add(cn.componentIndex)})}}}c&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(Ct){if(c){var ar=u.findComponents({mainType:getAxisMainType(Ct),filter:function(tn){return tn.get("type",!0)==="category"}});if(ar[0]){var en=new DataZoomAxisInfo;en.add(ar[0].componentIndex),a.set(Ct,en),c=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(l){!a&&(a=l)},this),a==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var l=this.ecModel.option;this.option.throttle=l.animation&&l.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(a){var l=this._rangePropMode,u=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(c,p){var d=a[c[0]]!=null,Q=a[c[1]]!=null;d&&!Q?l[p]="percent":!d&&Q?l[p]="value":u?l[p]=u[p]:d&&(l[p]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(l,u){a==null&&(a=this.ecModel.getComponent(getAxisMainType(l),u))},this),a},n.prototype.eachTargetAxis=function(a,l){this._targetAxisInfoMap.each(function(u,c){each$f(u.indexList,function(p){a.call(l,c,p)})})},n.prototype.getAxisProxy=function(a,l){var u=this.getAxisModel(a,l);if(u)return u.__dzAxisProxy},n.prototype.getAxisModel=function(a,l){var u=this._targetAxisInfoMap.get(a);if(u&&u.indexMap[l])return this.ecModel.getComponent(getAxisMainType(a),l)},n.prototype.setRawRange=function(a){var l=this.option,u=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(c){(a[c[0]]!=null||a[c[1]]!=null)&&(l[c[0]]=u[c[0]]=a[c[0]],l[c[1]]=u[c[1]]=a[c[1]])},this),this._updateRangeUse(a)},n.prototype.setCalculatedRange=function(a){var l=this.option;each$f(["start","startValue","end","endValue"],function(u){l[u]=a[u]})},n.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},n.prototype.getValueRange=function(a,l){if(a==null&&l==null){var u=this.findRepresentativeAxisProxy();if(u)return u.getDataValueWindow()}else return this.getAxisProxy(a,l).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var l,u=this._targetAxisInfoMap.keys(),c=0;c<u.length;c++)for(var p=u[c],d=this._targetAxisInfoMap.get(p),Q=0;Q<d.indexList.length;Q++){var Ct=this.getAxisProxy(p,d.indexList[Q]);if(Ct.hostedBy(this))return Ct;l||(l=Ct)}return l},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(ComponentModel);function retrieveRawOption(t){var n={};return each$f(["start","end","startValue","endValue","throttle"],function(a){t.hasOwnProperty(a)&&(n[a]=t[a])}),n}var SelectDataZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n}(DataZoomModel),DataZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u,c){this.dataZoomModel=a,this.ecModel=l,this.api=u},n.type="dataZoom",n}(ComponentView),SelectDataZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function t(n,a,l,u){this._dimName=n,this._axisIndex=a,this.ecModel=u,this._dataZoomModel=l}return t.prototype.hostedBy=function(n){return this._dataZoomModel===n},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(a){if(isCoordSupported(a)){var l=getAxisMainType(this._dimName),u=a.getReferringComponents(l,SINGLE_REFERRING).models[0];u&&this._axisIndex===u.componentIndex&&n.push(a)}},this),n},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},t.prototype.calculateDataWindow=function(n){var a=this._dataExtent,l=this.getAxisModel(),u=l.axis.scale,c=this._dataZoomModel.getRangePropMode(),p=[0,100],d=[],Q=[],Ct;each$7(["start","end"],function(tn,on){var cn=n[tn],gn=n[tn+"Value"];c[on]==="percent"?(cn==null&&(cn=p[on]),gn=u.parse(linearMap$2(cn,p,a))):(Ct=!0,gn=gn==null?a[on]:u.parse(gn),cn=linearMap$2(gn,a,p)),Q[on]=gn==null||isNaN(gn)?a[on]:gn,d[on]=cn==null||isNaN(cn)?p[on]:cn}),asc$1(Q),asc$1(d);var ar=this._minMaxSpan;Ct?en(Q,d,a,p,!1):en(d,Q,p,a,!0);function en(tn,on,cn,gn,Cn){var ex=Cn?"Span":"ValueSpan";sliderMove(0,tn,cn,"all",ar["min"+ex],ar["max"+ex]);for(var ix=0;ix<2;ix++)on[ix]=linearMap$2(tn[ix],cn,gn,!0),Cn&&(on[ix]=u.parse(on[ix]))}return{valueWindow:Q,percentWindow:d}},t.prototype.reset=function(n){if(n===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,a),this._updateMinMaxSpan();var l=this.calculateDataWindow(n.settledOption);this._valueWindow=l.valueWindow,this._percentWindow=l.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(n,a){if(n!==this._dataZoomModel)return;var l=this._dimName,u=this.getTargetSeriesModels(),c=n.get("filterMode"),p=this._valueWindow;if(c==="none")return;each$7(u,function(Q){var Ct=Q.getData(),ar=Ct.mapDimensionsAll(l);if(ar.length){if(c==="weakFilter"){var en=Ct.getStore(),tn=map$1(ar,function(on){return Ct.getDimensionIndex(on)},Ct);Ct.filterSelf(function(on){for(var cn,gn,Cn,ex=0;ex<ar.length;ex++){var ix=en.get(tn[ex],on),ax=!isNaN(ix),ox=ix<p[0],lx=ix>p[1];if(ax&&!ox&&!lx)return!0;ax&&(Cn=!0),ox&&(cn=!0),lx&&(gn=!0)}return Cn&&cn&&gn})}else each$7(ar,function(on){if(c==="empty")Q.setData(Ct=Ct.map(on,function(gn){return d(gn)?gn:NaN}));else{var cn={};cn[on]=p,Ct.selectRange(cn)}});each$7(ar,function(on){Ct.setApproximateExtent(p,on)})}});function d(Q){return Q>=p[0]&&Q<=p[1]}},t.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},a=this._dataZoomModel,l=this._dataExtent;each$7(["min","max"],function(u){var c=a.get(u+"Span"),p=a.get(u+"ValueSpan");p!=null&&(p=this.getAxisModel().axis.scale.parse(p)),p!=null?c=linearMap$2(l[0]+p,l,[0,100],!0):c!=null&&(p=linearMap$2(c,[0,100],l,!0)-l[0]),n[u+"Span"]=c,n[u+"ValueSpan"]=p},this)},t.prototype._setAxisModel=function(){var n=this.getAxisModel(),a=this._percentWindow,l=this._valueWindow;if(a){var u=getPixelPrecision(l,[0,500]);u=Math.min(u,20);var c=n.axis.scale.rawExtentInfo;a[0]!==0&&c.setDeterminedMinMax("min",+l[0].toFixed(u)),a[1]!==100&&c.setDeterminedMinMax("max",+l[1].toFixed(u)),c.freeze()}},t}();function calculateDataExtent(t,n,a){var l=[1/0,-1/0];each$7(a,function(p){unionAxisExtentFromData(l,p.getData(),n)});var u=t.getAxisModel(),c=ensureScaleRawExtentInfo(u.axis.scale,u,l).calculate();return[c.min,c.max]}var dataZoomProcessor={getTargetSeries:function(t){function n(u){t.eachComponent("dataZoom",function(c){c.eachTargetAxis(function(p,d){var Q=t.getComponent(getAxisMainType(p),d);u(p,d,Q,c)})})}n(function(u,c,p,d){p.__dzAxisProxy=null});var a=[];n(function(u,c,p,d){p.__dzAxisProxy||(p.__dzAxisProxy=new AxisProxy(u,c,d,t),a.push(p.__dzAxisProxy))});var l=createHashMap();return each$f(a,function(u){each$f(u.getTargetSeriesModels(),function(c){l.set(c.uid,c)})}),l},overallReset:function(t,n){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(l,u){a.getAxisProxy(l,u).reset(a)}),a.eachTargetAxis(function(l,u){a.getAxisProxy(l,u).filterData(a,n)})}),t.eachComponent("dataZoom",function(a){var l=a.findRepresentativeAxisProxy();if(l){var u=l.getDataPercentWindow(),c=l.getDataValueWindow();a.setCalculatedRange({start:u[0],end:u[1],startValue:c[0],endValue:c[1]})}})}};function installDataZoomAction(t){t.registerAction("dataZoom",function(n,a){var l=findEffectedDataZooms(a,n);each$f(l,function(u){u.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}var installed$1=!1;function installCommon$1(t){installed$1||(installed$1=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(t){t.registerComponentModel(SelectDataZoomModel),t.registerComponentView(SelectDataZoomView),installCommon$1(t)}var ToolboxFeature=function(){function t(){}return t}(),features={};function registerFeature(t,n){features[t]=n}function getFeature(t){return features[t]}var ToolboxModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;each$f(this.option.feature,function(l,u){var c=getFeature(u);c&&(c.getDefaultOption&&(c.defaultOption=c.getDefaultOption(a)),merge(l,c.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(ComponentModel);function layout(t,n,a){var l=n.getBoxLayoutParams(),u=n.get("padding"),c={width:a.getWidth(),height:a.getHeight()},p=getLayoutRect(l,c,u);box(n.get("orient"),t,n.get("itemGap"),p.width,p.height),positionElement(t,l,c,u)}function makeBackground(t,n){var a=normalizeCssArray(n.get("padding")),l=n.getItemStyle(["color","opacity"]);return l.fill=n.get("backgroundColor"),t=new Rect$2({shape:{x:t.x-a[3],y:t.y-a[0],width:t.width+a[1]+a[3],height:t.height+a[0]+a[2],r:n.get("borderRadius")},style:l,silent:!0,z2:-1}),t}var ToolboxView=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,l,u,c){var p=this.group;if(p.removeAll(),!a.get("show"))return;var d=+a.get("itemSize"),Q=a.get("orient")==="vertical",Ct=a.get("feature")||{},ar=this._features||(this._features={}),en=[];each$f(Ct,function(cn,gn){en.push(gn)}),new DataDiffer(this._featureNames||[],en).add(tn).update(tn).remove(curry$1(tn,null)).execute(),this._featureNames=en;function tn(cn,gn){var Cn=en[cn],ex=en[gn],ix=Ct[Cn],ax=new Model(ix,a,a.ecModel),ox;if(c&&c.newTitle!=null&&c.featureName===Cn&&(ix.title=c.newTitle),Cn&&!ex){if(isUserFeatureName(Cn))ox={onclick:ax.option.onclick,featureName:Cn};else{var lx=getFeature(Cn);if(!lx)return;ox=new lx}ar[Cn]=ox}else if(ox=ar[ex],!ox)return;ox.uid=getUID("toolbox-feature"),ox.model=ax,ox.ecModel=l,ox.api=u;var cx=ox instanceof ToolboxFeature;if(!Cn&&ex){cx&&ox.dispose&&ox.dispose(l,u);return}if(!ax.get("show")||cx&&ox.unusable){cx&&ox.remove&&ox.remove(l,u);return}on(ax,ox,Cn),ax.setIconStatus=function(dx,hx){var fx=this.option,ux=this.iconPaths;fx.iconStatus=fx.iconStatus||{},fx.iconStatus[dx]=hx,ux[dx]&&(hx==="emphasis"?enterEmphasis:leaveEmphasis)(ux[dx])},ox instanceof ToolboxFeature&&ox.render&&ox.render(ax,l,u,c)}function on(cn,gn,Cn){var ex=cn.getModel("iconStyle"),ix=cn.getModel(["emphasis","iconStyle"]),ax=gn instanceof ToolboxFeature&&gn.getIcons?gn.getIcons():cn.get("icon"),ox=cn.get("title")||{},lx,cx;isString$1(ax)?(lx={},lx[Cn]=ax):lx=ax,isString$1(ox)?(cx={},cx[Cn]=ox):cx=ox;var dx=cn.iconPaths={};each$f(lx,function(hx,fx){var ux=createIcon(hx,{},{x:-d/2,y:-d/2,width:d,height:d});ux.setStyle(ex.getItemStyle());var gx=ux.ensureState("emphasis");gx.style=ix.getItemStyle();var yx=new ZRText({style:{text:cx[fx],align:ix.get("textAlign"),borderRadius:ix.get("textBorderRadius"),padding:ix.get("textPadding"),fill:null,font:getFont({fontStyle:ix.get("textFontStyle"),fontFamily:ix.get("textFontFamily"),fontSize:ix.get("textFontSize"),fontWeight:ix.get("textFontWeight")},l)},ignore:!0});ux.setTextContent(yx),setTooltipConfig({el:ux,componentModel:a,itemName:fx,formatterParamsExtra:{title:cx[fx]}}),ux.__title=cx[fx],ux.on("mouseover",function(){var _x=ix.getItemStyle(),vx=Q?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";yx.setStyle({fill:ix.get("textFill")||_x.fill||_x.stroke||"#000",backgroundColor:ix.get("textBackgroundColor")}),ux.setTextConfig({position:ix.get("textPosition")||vx}),yx.ignore=!a.get("showTitle"),u.enterEmphasis(this)}).on("mouseout",function(){cn.get(["iconStatus",fx])!=="emphasis"&&u.leaveEmphasis(this),yx.hide()}),(cn.get(["iconStatus",fx])==="emphasis"?enterEmphasis:leaveEmphasis)(ux),p.add(ux),ux.on("click",bind$1(gn.onclick,gn,l,u,fx)),dx[fx]=ux})}layout(p,a,u),p.add(makeBackground(p.getBoundingRect(),a)),Q||p.eachChild(function(cn){var gn=cn.__title,Cn=cn.ensureState("emphasis"),ex=Cn.textConfig||(Cn.textConfig={}),ix=cn.getTextContent(),ax=ix&&ix.ensureState("emphasis");if(ax&&!isFunction$1(ax)&&gn){var ox=ax.style||(ax.style={}),lx=getBoundingRect(gn,ZRText.makeFont(ox)),cx=cn.x+p.x,dx=cn.y+p.y+d,hx=!1;dx+lx.height>u.getHeight()&&(ex.position="top",hx=!0);var fx=hx?-5-lx.height:d+10;cx+lx.width/2>u.getWidth()?(ex.position=["100%",fx],ox.align="right"):cx-lx.width/2<0&&(ex.position=[0,fx],ox.align="left")}})},n.prototype.updateView=function(a,l,u,c){each$f(this._features,function(p){p instanceof ToolboxFeature&&p.updateView&&p.updateView(p.model,l,u,c)})},n.prototype.remove=function(a,l){each$f(this._features,function(u){u instanceof ToolboxFeature&&u.remove&&u.remove(a,l)}),this.group.removeAll()},n.prototype.dispose=function(a,l){each$f(this._features,function(u){u instanceof ToolboxFeature&&u.dispose&&u.dispose(a,l)})},n.type="toolbox",n}(ComponentView);function isUserFeatureName(t){return t.indexOf("my")===0}var SaveAsImage=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,l){var u=this.model,c=u.get("name")||a.get("title.0.text")||"echarts",p=l.getZr().painter.getType()==="svg",d=p?"svg":u.get("type",!0)||"png",Q=l.getConnectedDataURL({type:d,backgroundColor:u.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:u.get("connectedBackgroundColor"),excludeComponents:u.get("excludeComponents"),pixelRatio:u.get("pixelRatio")}),Ct=env.browser;if(typeof MouseEvent=="function"&&(Ct.newEdge||!Ct.ie&&!Ct.edge)){var ar=document.createElement("a");ar.download=c+"."+d,ar.target="_blank",ar.href=Q;var en=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});ar.dispatchEvent(en)}else if(window.navigator.msSaveOrOpenBlob||p){var tn=Q.split(","),on=tn[0].indexOf("base64")>-1,cn=p?decodeURIComponent(tn[1]):tn[1];on&&(cn=window.atob(cn));var gn=c+"."+d;if(window.navigator.msSaveOrOpenBlob){for(var Cn=cn.length,ex=new Uint8Array(Cn);Cn--;)ex[Cn]=cn.charCodeAt(Cn);var ix=new Blob([ex]);window.navigator.msSaveOrOpenBlob(ix,gn)}else{var ax=document.createElement("iframe");document.body.appendChild(ax);var ox=ax.contentWindow,lx=ox.document;lx.open("image/svg+xml","replace"),lx.write(cn),lx.close(),ox.focus(),lx.execCommand("SaveAs",!0,gn),document.body.removeChild(ax)}}else{var cx=u.get("lang"),dx='<body style="margin:0;"><img src="'+Q+'" style="max-width:100%;" title="'+(cx&&cx[0]||"")+'" /></body>',hx=window.open();hx.document.write(dx),hx.document.title=c}},n.getDefaultOption=function(a){var l={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return l},n}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getIcons=function(){var a=this.model,l=a.get("icon"),u={};return each$f(a.get("type"),function(c){l[c]&&(u[c]=l[c])}),u},n.getDefaultOption=function(a){var l={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return l},n.prototype.onclick=function(a,l,u){var c=this.model,p=c.get(["seriesIndex",u]);if(seriesOptGenreator[u]){var d={series:[]},Q=function(en){var tn=en.subType,on=en.id,cn=seriesOptGenreator[u](tn,on,en,c);cn&&(defaults(cn,en.option),d.series.push(cn));var gn=en.coordinateSystem;if(gn&&gn.type==="cartesian2d"&&(u==="line"||u==="bar")){var Cn=gn.getAxesByScale("ordinal")[0];if(Cn){var ex=Cn.dim,ix=ex+"Axis",ax=en.getReferringComponents(ix,SINGLE_REFERRING).models[0],ox=ax.componentIndex;d[ix]=d[ix]||[];for(var lx=0;lx<=ox;lx++)d[ix][ox]=d[ix][ox]||{};d[ix][ox].boundaryGap=u==="bar"}}};each$f(radioTypes,function(en){indexOf(en,u)>=0&&each$f(en,function(tn){c.setIconStatus(tn,"normal")})}),c.setIconStatus(u,"emphasis"),a.eachComponent({mainType:"series",query:p==null?null:{seriesIndex:p}},Q);var Ct,ar=u;u==="stack"&&(Ct=merge({stack:c.option.title.tiled,tiled:c.option.title.stack},c.option.title),c.get(["iconStatus",u])!=="emphasis"&&(ar="tiled")),l.dispatchAction({type:"changeMagicType",currentType:ar,newOption:d,newTitle:Ct,featureName:"magicType"})}},n}(ToolboxFeature),seriesOptGenreator={line:function(t,n,a,l){if(t==="bar")return merge({id:n,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","line"])||{},!0)},bar:function(t,n,a,l){if(t==="line")return merge({id:n,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","bar"])||{},!0)},stack:function(t,n,a,l){var u=a.get("stack")===INNER_STACK_KEYWORD;if(t==="line"||t==="bar")return l.setIconStatus("stack",u?"normal":"emphasis"),merge({id:n,stack:u?"":INNER_STACK_KEYWORD},l.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,n){n.mergeOption(t.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(t){var n={},a=[],l=[];return t.eachRawSeries(function(u){var c=u.coordinateSystem;if(c&&(c.type==="cartesian2d"||c.type==="polar")){var p=c.getBaseAxis();if(p.type==="category"){var d=p.dim+"_"+p.index;n[d]||(n[d]={categoryAxis:p,valueAxis:c.getOtherAxis(p),series:[]},l.push({axisDim:p.dim,axisIndex:p.index})),n[d].series.push(u)}else a.push(u)}else a.push(u)}),{seriesGroupByCategoryAxis:n,other:a,meta:l}}function assembleSeriesWithCategoryAxis(t){var n=[];return each$f(t,function(a,l){var u=a.categoryAxis,c=a.valueAxis,p=c.dim,d=[" "].concat(map$1(a.series,function(on){return on.name})),Q=[u.model.getCategories()];each$f(a.series,function(on){var cn=on.getRawData();Q.push(on.getRawData().mapArray(cn.mapDimension(p),function(gn){return gn}))});for(var Ct=[d.join(ITEM_SPLITER)],ar=0;ar<Q[0].length;ar++){for(var en=[],tn=0;tn<Q.length;tn++)en.push(Q[tn][ar]);Ct.push(en.join(ITEM_SPLITER))}n.push(Ct.join(`
`))}),n.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(t){return map$1(t,function(n){var a=n.getRawData(),l=[n.name],u=[];return a.each(a.dimensions,function(){for(var c=arguments.length,p=arguments[c-1],d=a.getName(p),Q=0;Q<c-1;Q++)u[Q]=arguments[Q];l.push((d?d+ITEM_SPLITER:"")+u.join(ITEM_SPLITER))}),l.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(t){var n=groupSeries(t);return{value:filter([assembleSeriesWithCategoryAxis(n.seriesGroupByCategoryAxis),assembleOtherSeries(n.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:n.meta}}function trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(t){var n=t.slice(0,t.indexOf(`
`));if(n.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()).split(itemSplitRegex),l=[],u=map$1(a,function(Q){return{name:Q,data:[]}}),c=0;c<n.length;c++){var p=trim(n[c]).split(itemSplitRegex);l.push(p.shift());for(var d=0;d<p.length;d++)u[d]&&(u[d].data[c]=p[d])}return{series:u,categories:l}}function parseListContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()),l=[],u=0;u<n.length;u++){var c=trim(n[u]);if(c){var p=c.split(itemSplitRegex),d="",Q=void 0,Ct=!1;isNaN(p[0])?(Ct=!0,d=p[0],p=p.slice(1),l[u]={name:d,value:[]},Q=l[u].value):Q=l[u]=[];for(var ar=0;ar<p.length;ar++)Q.push(+p[ar]);Q.length===1&&(Ct?l[u].value=Q[0]:l[u]=Q[0])}}return{name:a,data:l}}function parseContents(t,n){var a=t.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),l={series:[]};return each$f(a,function(u,c){if(isTSVFormat(u)){var p=parseTSVContents(u),d=n[c],Q=d.axisDim+"Axis";d&&(l[Q]=l[Q]||[],l[Q][d.axisIndex]={data:p.categories},l.series=l.series.concat(p.series))}else{var p=parseListContents(u);l.series.push(p)}}),l}var DataView$1=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,l){setTimeout(function(){l.dispatchAction({type:"hideTip"})});var u=l.getDom(),c=this.model;this._dom&&u.removeChild(this._dom);var p=document.createElement("div");p.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",p.style.backgroundColor=c.get("backgroundColor")||"#fff";var d=document.createElement("h4"),Q=c.get("lang")||[];d.innerHTML=Q[0]||c.get("title"),d.style.cssText="margin:10px 20px",d.style.color=c.get("textColor");var Ct=document.createElement("div"),ar=document.createElement("textarea");Ct.style.cssText="overflow:auto";var en=c.get("optionToContent"),tn=c.get("contentToOption"),on=getContentFromModel(a);if(isFunction$1(en)){var cn=en(l.getOption());isString$1(cn)?Ct.innerHTML=cn:isDom(cn)&&Ct.appendChild(cn)}else{ar.readOnly=c.get("readOnly");var gn=ar.style;gn.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",gn.color=c.get("textColor"),gn.borderColor=c.get("textareaBorderColor"),gn.backgroundColor=c.get("textareaColor"),ar.value=on.value,Ct.appendChild(ar)}var Cn=on.meta,ex=document.createElement("div");ex.style.cssText="position:absolute;bottom:5px;left:0;right:0";var ix="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",ax=document.createElement("div"),ox=document.createElement("div");ix+=";background-color:"+c.get("buttonColor"),ix+=";color:"+c.get("buttonTextColor");var lx=this;function cx(){u.removeChild(p),lx._dom=null}addEventListener(ax,"click",cx),addEventListener(ox,"click",function(){if(tn==null&&en!=null||tn!=null&&en==null){cx();return}var dx;try{isFunction$1(tn)?dx=tn(Ct,l.getOption()):dx=parseContents(ar.value,Cn)}catch(hx){throw cx(),new Error("Data view format error "+hx)}dx&&l.dispatchAction({type:"changeDataView",newOption:dx}),cx()}),ax.innerHTML=Q[1],ox.innerHTML=Q[2],ox.style.cssText=ax.style.cssText=ix,!c.get("readOnly")&&ex.appendChild(ox),ex.appendChild(ax),p.appendChild(d),p.appendChild(Ct),p.appendChild(ex),Ct.style.height=u.clientHeight-80+"px",u.appendChild(p),this._dom=p},n.prototype.remove=function(a,l){this._dom&&l.getDom().removeChild(this._dom)},n.prototype.dispose=function(a,l){this.remove(a,l)},n.getDefaultOption=function(a){var l={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return l},n}(ToolboxFeature);function tryMergeDataOption(t,n){return map$1(t,function(a,l){var u=n&&n[l];if(isObject$3(u)&&!isArray$1(u)){var c=isObject$3(a)&&!isArray$1(a);c||(a={value:a});var p=u.name!=null&&a.name==null;return a=defaults(a,u),p&&delete a.name,a}else return a})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,n){var a=[];each$f(t.newOption.series,function(l){var u=n.getSeriesByName(l.name)[0];if(!u)a.push(extend({type:"scatter"},l));else{var c=u.get("data");a.push({name:l.name,data:tryMergeDataOption(l.data,c)})}}),n.mergeOption(defaults({series:a},t.newOption))});var each$6=each$f,inner$6=makeInner();function push(t,n){var a=getStoreSnapshots(t);each$6(n,function(l,u){for(var c=a.length-1;c>=0;c--){var p=a[c];if(p[u])break}if(c<0){var d=t.queryComponents({mainType:"dataZoom",subType:"select",id:u})[0];if(d){var Q=d.getPercentRange();a[0][u]={dataZoomId:u,start:Q[0],end:Q[1]}}}}),a.push(n)}function pop(t){var n=getStoreSnapshots(t),a=n[n.length-1];n.length>1&&n.pop();var l={};return each$6(a,function(u,c){for(var p=n.length-1;p>=0;p--)if(u=n[p][c],u){l[c]=u;break}}),l}function clear(t){inner$6(t).snapshots=null}function count(t){return getStoreSnapshots(t).length}function getStoreSnapshots(t){var n=inner$6(t);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var RestoreOption=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,l){clear(a),l.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(a){var l={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return l},n}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,n){n.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function t(n,a,l){var u=this;this._targetInfoList=[];var c=parseFinder(a,n);each$f(targetInfoBuilders,function(p,d){(!l||!l.include||indexOf(l.include,d)>=0)&&p(c,u._targetInfoList)})}return t.prototype.setOutputRanges=function(n,a){return this.matchOutputRanges(n,a,function(l,u,c){if((l.coordRanges||(l.coordRanges=[])).push(u),!l.coordRange){l.coordRange=u;var p=coordConvert[l.brushType](0,c,u);l.__rangeOffset={offset:diffProcessor[l.brushType](p.values,l.range,[1,1]),xyMinMax:p.xyMinMax}}}),n},t.prototype.matchOutputRanges=function(n,a,l){each$f(n,function(u){var c=this.findTargetInfo(u,a);c&&c!==!0&&each$f(c.coordSyses,function(p){var d=coordConvert[u.brushType](1,p,u.range,!0);l(u,d.values,p,a)})},this)},t.prototype.setInputRanges=function(n,a){each$f(n,function(l){var u=this.findTargetInfo(l,a);if(l.range=l.range||[],u&&u!==!0){l.panelId=u.panelId;var c=coordConvert[l.brushType](0,u.coordSys,l.coordRange),p=l.__rangeOffset;l.range=p?diffProcessor[l.brushType](c.values,p.offset,getScales(c.xyMinMax,p.xyMinMax)):c.values}},this)},t.prototype.makePanelOpts=function(n,a){return map$1(this._targetInfoList,function(l){var u=l.getPanelRect();return{panelId:l.panelId,defaultBrushType:a?a(l):null,clipPath:makeRectPanelClipPath(u),isTargetByCursor:makeRectIsTargetByCursor(u,n,l.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(u)}})},t.prototype.controlSeries=function(n,a,l){var u=this.findTargetInfo(n,l);return u===!0||u&&indexOf(u.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(n,a){for(var l=this._targetInfoList,u=parseFinder(a,n),c=0;c<l.length;c++){var p=l[c],d=n.panelId;if(d){if(p.panelId===d)return p}else for(var Q=0;Q<targetInfoMatchers.length;Q++)if(targetInfoMatchers[Q](u,p))return p}return!0},t}();function formatMinMax(t){return t[0]>t[1]&&t.reverse(),t}function parseFinder(t,n){return parseFinder$1(t,n,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(t,n){var a=t.xAxisModels,l=t.yAxisModels,u=t.gridModels,c=createHashMap(),p={},d={};!a&&!l&&!u||(each$f(a,function(Q){var Ct=Q.axis.grid.model;c.set(Ct.id,Ct),p[Ct.id]=!0}),each$f(l,function(Q){var Ct=Q.axis.grid.model;c.set(Ct.id,Ct),d[Ct.id]=!0}),each$f(u,function(Q){c.set(Q.id,Q),p[Q.id]=!0,d[Q.id]=!0}),c.each(function(Q){var Ct=Q.coordinateSystem,ar=[];each$f(Ct.getCartesians(),function(en,tn){(indexOf(a,en.getAxis("x").model)>=0||indexOf(l,en.getAxis("y").model)>=0)&&ar.push(en)}),n.push({panelId:"grid--"+Q.id,gridModel:Q,coordSysModel:Q,coordSys:ar[0],coordSyses:ar,getPanelRect:panelRectBuilders.grid,xAxisDeclared:p[Q.id],yAxisDeclared:d[Q.id]})}))},geo:function(t,n){each$f(t.geoModels,function(a){var l=a.coordinateSystem;n.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:l,coordSyses:[l],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(t,n){var a=t.xAxisModel,l=t.yAxisModel,u=t.gridModel;return!u&&a&&(u=a.axis.grid.model),!u&&l&&(u=l.axis.grid.model),u&&u===n.gridModel},function(t,n){var a=t.geoModel;return a&&a===n.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,n=t.getBoundingRect().clone();return n.applyTransform(getTransform$1(t)),n}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(t,n,a,l){var u=t?n.pointToData([a[0][0],a[1][0]],l):n.dataToPoint([a[0][0],a[1][0]],l),c=t?n.pointToData([a[0][1],a[1][1]],l):n.dataToPoint([a[0][1],a[1][1]],l),p=[formatMinMax([u[0],c[0]]),formatMinMax([u[1],c[1]])];return{values:p,xyMinMax:p}},polygon:function(t,n,a,l){var u=[[1/0,-1/0],[1/0,-1/0]],c=map$1(a,function(p){var d=t?n.pointToData(p,l):n.dataToPoint(p,l);return u[0][0]=Math.min(u[0][0],d[0]),u[1][0]=Math.min(u[1][0],d[1]),u[0][1]=Math.max(u[0][1],d[0]),u[1][1]=Math.max(u[1][1],d[1]),d});return{values:c,xyMinMax:u}}};function axisConvert(t,n,a,l){var u=a.getAxis(["x","y"][t]),c=formatMinMax(map$1([0,1],function(d){return n?u.coordToData(u.toLocalCoord(l[d]),!0):u.toGlobalCoord(u.dataToCoord(l[d]))})),p=[];return p[t]=c,p[1-t]=[NaN,NaN],{values:c,xyMinMax:p}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(t,n,a){return[[t[0][0]-a[0]*n[0][0],t[0][1]-a[0]*n[0][1]],[t[1][0]-a[1]*n[1][0],t[1][1]-a[1]*n[1][1]]]},polygon:function(t,n,a){return map$1(t,function(l,u){return[l[0]-a[0]*n[u][0],l[1]-a[1]*n[u][1]]})}};function axisDiffProcessor(t,n,a,l){return[n[0]-l[t]*a[0],n[1]-l[t]*a[1]]}function getScales(t,n){var a=getSize(t),l=getSize(n),u=[a[0]/l[0],a[1]/l[1]];return isNaN(u[0])&&(u[0]=1),isNaN(u[1])&&(u[1]=1),u}function getSize(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,l,u,c){this._brushController||(this._brushController=new BrushController(u.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(a,l,this,c,u),updateBackBtnStatus(a,l)},n.prototype.onclick=function(a,l,u){handlers[u].call(this)},n.prototype.remove=function(a,l){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(a,l){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(a){var l=a.areas;if(!a.isEnd||!l.length)return;var u={},c=this.ecModel;this._brushController.updateCovers([]);var p=new BrushTargetManager(makeAxisFinder(this.model),c,{include:["grid"]});p.matchOutputRanges(l,c,function(Ct,ar,en){if(en.type==="cartesian2d"){var tn=Ct.brushType;tn==="rect"?(d("x",en,ar[0]),d("y",en,ar[1])):d({lineX:"x",lineY:"y"}[tn],en,ar)}}),push(c,u),this._dispatchZoomAction(u);function d(Ct,ar,en){var tn=ar.getAxis(Ct),on=tn.model,cn=Q(Ct,on,c),gn=cn.findRepresentativeAxisProxy(on).getMinMaxSpan();(gn.minValueSpan!=null||gn.maxValueSpan!=null)&&(en=sliderMove(0,en.slice(),tn.scale.getExtent(),0,gn.minValueSpan,gn.maxValueSpan)),cn&&(u[cn.id]={dataZoomId:cn.id,startValue:en[0],endValue:en[1]})}function Q(Ct,ar,en){var tn;return en.eachComponent({mainType:"dataZoom",subType:"select"},function(on){var cn=on.getAxisModel(Ct,ar.componentIndex);cn&&(tn=on)}),tn}},n.prototype._dispatchZoomAction=function(a){var l=[];each$5(a,function(u,c){l.push(clone$4(u))}),l.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:l})},n.getDefaultOption=function(a){var l={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return l},n}(ToolboxFeature),handlers={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(t){var n={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return n.xAxisIndex==null&&n.xAxisId==null&&(n.xAxisIndex="all"),n.yAxisIndex==null&&n.yAxisId==null&&(n.yAxisIndex="all"),n}function updateBackBtnStatus(t,n){t.setIconStatus("back",count(n)>1?"emphasis":"normal")}function updateZoomBtnStatus(t,n,a,l,u){var c=a._isZoomActive;l&&l.type==="takeGlobalCursor"&&(c=l.key==="dataZoomSelect"?l.dataZoomSelectActive:!1),a._isZoomActive=c,t.setIconStatus("zoom",c?"emphasis":"normal");var p=new BrushTargetManager(makeAxisFinder(t),n,{include:["grid"]}),d=p.makePanelOpts(u,function(Q){return Q.xAxisDeclared&&!Q.yAxisDeclared?"lineX":!Q.xAxisDeclared&&Q.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(d).enableBrush(c&&d.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(t){var n=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!n||n.get(a)==null)return;var l=n.getModel(a),u=[],c=makeAxisFinder(l),p=parseFinder$1(t,c);each$5(p.xAxisModels,function(Q){return d(Q,"xAxis","xAxisIndex")}),each$5(p.yAxisModels,function(Q){return d(Q,"yAxis","yAxisIndex")});function d(Q,Ct,ar){var en=Q.componentIndex,tn={type:"select",$fromToolbox:!0,filterMode:l.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+Ct+en};tn[ar]=en,u.push(tn)}return u});function install$j(t){t.registerComponentModel(ToolboxModel),t.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n}(ComponentModel);function shouldTooltipConfine(t){var n=t.get("confine");return n!=null?!!n:t.get("renderMode")==="richText"}function testStyle(t){if(env.domSupported){for(var n=document.documentElement.style,a=0,l=t.length;a<l;a++)if(t[a]in n)return t[a]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(t,n){if(!t)return n;n=toCamelCase(n,!0);var a=t.indexOf(n);return t=a===-1?n:"-"+t.slice(0,a)+"-"+n,t.toLowerCase()}function getComputedStyle$1(t,n){var a=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return a?a[n]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function assembleArrow(t,n,a){if(!isString$1(a)||a==="inside")return"";var l=t.get("backgroundColor"),u=t.get("borderWidth");n=convertToColorString(n);var c=mirrorPos(a),p=Math.max(Math.round(u)*1.5,6),d="",Q=CSS_TRANSFORM_VENDOR+":",Ct;indexOf(["left","right"],c)>-1?(d+="top:50%",Q+="translateY(-50%) rotate("+(Ct=c==="left"?-225:-45)+"deg)"):(d+="left:50%",Q+="translateX(-50%) rotate("+(Ct=c==="top"?225:45)+"deg)");var ar=Ct*Math.PI/180,en=p+u,tn=en*Math.abs(Math.cos(ar))+en*Math.abs(Math.sin(ar)),on=Math.round(((tn-Math.SQRT2*u)/2+Math.SQRT2*u-(tn-en)/2)*100)/100;d+=";"+c+":-"+on+"px";var cn=n+" solid "+u+"px;",gn=["position:absolute;width:"+p+"px;height:"+p+"px;z-index:-1;",d+";"+Q+";","border-bottom:"+cn,"border-right:"+cn,"background-color:"+l+";"];return'<div style="'+gn.join("")+'"></div>'}function assembleTransition(t,n){var a="cubic-bezier(0.23,1,0.32,1)",l=" "+t/2+"s "+a,u="opacity"+l+",visibility"+l;return n||(l=" "+t+"s "+a,u+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+l:",left"+l+",top"+l),CSS_TRANSITION_VENDOR+":"+u}function assembleTransform(t,n,a){var l=t.toFixed(0)+"px",u=n.toFixed(0)+"px";if(!env.transformSupported)return a?"top:"+u+";left:"+l+";":[["top",u],["left",l]];var c=env.transform3dSupported,p="translate"+(c?"3d":"")+"("+l+","+u+(c?",0":"")+")";return a?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+p+";":[["top",0],["left",0],[TRANSFORM_VENDOR,p]]}function assembleFont(t){var n=[],a=t.get("fontSize"),l=t.getTextColor();l&&n.push("color:"+l),n.push("font:"+t.getFont());var u=retrieve2(t.get("lineHeight"),Math.round(a*3/2));a&&n.push("line-height:"+u+"px");var c=t.get("textShadowColor"),p=t.get("textShadowBlur")||0,d=t.get("textShadowOffsetX")||0,Q=t.get("textShadowOffsetY")||0;return c&&p&&n.push("text-shadow:"+d+"px "+Q+"px "+p+"px "+c),each$f(["decoration","align"],function(Ct){var ar=t.get(Ct);ar&&n.push("text-"+Ct+":"+ar)}),n.join(";")}function assembleCssText(t,n,a){var l=[],u=t.get("transitionDuration"),c=t.get("backgroundColor"),p=t.get("shadowBlur"),d=t.get("shadowColor"),Q=t.get("shadowOffsetX"),Ct=t.get("shadowOffsetY"),ar=t.getModel("textStyle"),en=getPaddingFromTooltipModel(t,"html"),tn=Q+"px "+Ct+"px "+p+"px "+d;return l.push("box-shadow:"+tn),n&&u&&l.push(assembleTransition(u,a)),c&&l.push("background-color:"+c),each$f(["width","color","radius"],function(on){var cn="border-"+on,gn=toCamelCase(cn),Cn=t.get(gn);Cn!=null&&l.push(cn+":"+Cn+(on==="color"?"":"px"))}),l.push(assembleFont(ar)),en!=null&&l.push("padding:"+normalizeCssArray(en).join("px ")+"px"),l.join(";")+";"}function makeStyleCoord$1(t,n,a,l,u){var c=n&&n.painter;if(a){var p=c&&c.getViewportRoot();p&&transformLocalCoord(t,p,a,l,u)}else{t[0]=l,t[1]=u;var d=c&&c.getViewportRootOffset();d&&(t[0]+=d.offsetLeft,t[1]+=d.offsetTop)}t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var TooltipHTMLContent=function(){function t(n,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var l=document.createElement("div");l.domBelongToZr=!0,this.el=l;var u=this._zr=n.getZr(),c=a.appendTo,p=c&&(isString$1(c)?document.querySelector(c):isDom(c)?c:isFunction$1(c)&&c(n.getDom()));makeStyleCoord$1(this._styleCoord,u,p,n.getWidth()/2,n.getHeight()/2),(p||n.getDom()).appendChild(l),this._api=n,this._container=p;var d=this;l.onmouseenter=function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0},l.onmousemove=function(Q){if(Q=Q||window.event,!d._enterable){var Ct=u.handler,ar=u.painter.getViewportRoot();normalizeEvent(ar,Q,!0),Ct.dispatch("mousemove",Q)}},l.onmouseleave=function(){d._inContent=!1,d._enterable&&d._show&&d.hideLater(d._hideDelay)}}return t.prototype.update=function(n){if(!this._container){var a=this._api.getDom(),l=getComputedStyle$1(a,"position"),u=a.style;u.position!=="absolute"&&l!=="absolute"&&(u.position="relative")}var c=n.get("alwaysShowContent");c&&this._moveIfResized(),this._alwaysShowContent=c,this.el.className=n.get("className")||""},t.prototype.show=function(n,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var l=this.el,u=l.style,c=this._styleCoord;l.innerHTML?u.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide)+assembleTransform(c[0],c[1],!0)+("border-color:"+convertToColorString(a)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):u.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(n,a,l,u,c){var p=this.el;if(n==null){p.innerHTML="";return}var d="";if(isString$1(c)&&l.get("trigger")==="item"&&!shouldTooltipConfine(l)&&(d=assembleArrow(l,u,c)),isString$1(n))p.innerHTML=n+d;else if(n){p.innerHTML="",isArray$1(n)||(n=[n]);for(var Q=0;Q<n.length;Q++)isDom(n[Q])&&n[Q].parentNode!==p&&p.appendChild(n[Q]);if(d&&p.childNodes.length){var Ct=document.createElement("div");Ct.innerHTML=d,p.appendChild(Ct)}}},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},t.prototype.moveTo=function(n,a){if(this.el){var l=this._styleCoord;if(makeStyleCoord$1(l,this._zr,this._container,n,a),l[0]!=null&&l[1]!=null){var u=this.el.style,c=assembleTransform(l[0],l[1]);each$f(c,function(p){u[p[0]]=p[1]})}}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){var n=this,a=this.el.style;a.visibility="hidden",a.opacity="0",env.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el.parentNode;n&&n.removeChild(this.el),this.el=this._container=null},t}(),TooltipRichContent=function(){function t(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return t.prototype.update=function(n){var a=n.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(n,a,l,u,c){var p=this;isObject$3(n)&&throwError(""),this.el&&this._zr.remove(this.el);var d=l.getModel("textStyle");this.el=new ZRText({style:{rich:a.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:u,textShadowColor:d.get("textShadowColor"),fill:l.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(l,"richText"),verticalAlign:"top",align:"left"},z:l.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(Ct){p.el.style[Ct]=l.get(Ct)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(Ct){p.el.style[Ct]=d.get(Ct)||0}),this._zr.add(this.el);var Q=this;this.el.on("mouseover",function(){Q._enterable&&(clearTimeout(Q._hideTimeout),Q._show=!0),Q._inContent=!0}),this.el.on("mouseout",function(){Q._enterable&&Q._show&&Q.hideLater(Q._hideDelay),Q._inContent=!1})},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el,a=this.el.getBoundingRect(),l=calcShadowOuterSize(n.style);return[a.width+l.left+l.right,a.height+l.top+l.bottom]},t.prototype.moveTo=function(n,a){var l=this.el;if(l){var u=this._styleCoord;makeStyleCoord(u,this._zr,n,a),n=u[0],a=u[1];var c=l.style,p=mathMaxWith0(c.borderWidth||0),d=calcShadowOuterSize(c);l.x=n+p+d.left,l.y=a+p+d.top,l.markRedraw()}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function mathMaxWith0(t){return Math.max(0,t)}function calcShadowOuterSize(t){var n=mathMaxWith0(t.shadowBlur||0),a=mathMaxWith0(t.shadowOffsetX||0),l=mathMaxWith0(t.shadowOffsetY||0);return{left:mathMaxWith0(n-a),right:mathMaxWith0(n+a),top:mathMaxWith0(n-l),bottom:mathMaxWith0(n+l)}}function makeStyleCoord(t,n,a,l){t[0]=a,t[1]=l,t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l){if(!(env.node||!l.getDom())){var u=a.getComponent("tooltip"),c=this._renderMode=getTooltipRenderMode(u.get("renderMode"));this._tooltipContent=c==="richText"?new TooltipRichContent(l):new TooltipHTMLContent(l,{appendTo:u.get("appendToBody",!0)?"body":u.get("appendTo",!0)})}},n.prototype.render=function(a,l,u){if(!(env.node||!u.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=l,this._api=u;var c=this._tooltipContent;c.update(a),c.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var a=this._tooltipModel,l=a.get("triggerOn");register("itemTooltip",this._api,bind$1(function(u,c,p){l!=="none"&&(l.indexOf(u)>=0?this._tryShow(c,p):u==="leave"&&this._hide(p))},this))},n.prototype._keepShow=function(){var a=this._tooltipModel,l=this._ecModel,u=this._api,c=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&c!=="none"&&c!=="click"){var p=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!u.isDisposed()&&p.manuallyShowTip(a,l,u,{x:p._lastX,y:p._lastY,dataByCoordSys:p._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(a,l,u,c){if(!(c.from===this.uid||env.node||!u.getDom())){var p=makeDispatchAction(c,u);this._ticket="";var d=c.dataByCoordSys,Q=findComponentReference(c,l,u);if(Q){var Ct=Q.el.getBoundingRect().clone();Ct.applyTransform(Q.el.transform),this._tryShow({offsetX:Ct.x+Ct.width/2,offsetY:Ct.y+Ct.height/2,target:Q.el,position:c.position,positionDefault:"bottom"},p)}else if(c.tooltip&&c.x!=null&&c.y!=null){var ar=proxyRect;ar.x=c.x,ar.y=c.y,ar.update(),getECData(ar).tooltipConfig={name:null,option:c.tooltip},this._tryShow({offsetX:c.x,offsetY:c.y,target:ar},p)}else if(d)this._tryShow({offsetX:c.x,offsetY:c.y,position:c.position,dataByCoordSys:d,tooltipOption:c.tooltipOption},p);else if(c.seriesIndex!=null){if(this._manuallyAxisShowTip(a,l,u,c))return;var en=findPointFromSeries(c,l),tn=en.point[0],on=en.point[1];tn!=null&&on!=null&&this._tryShow({offsetX:tn,offsetY:on,target:en.el,position:c.position,positionDefault:"bottom"},p)}else c.x!=null&&c.y!=null&&(u.dispatchAction({type:"updateAxisPointer",x:c.x,y:c.y}),this._tryShow({offsetX:c.x,offsetY:c.y,position:c.position,target:u.getZr().findHover(c.x,c.y).target},p))}},n.prototype.manuallyHideTip=function(a,l,u,c){var p=this._tooltipContent;this._tooltipModel&&p.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,c.from!==this.uid&&this._hide(makeDispatchAction(c,u))},n.prototype._manuallyAxisShowTip=function(a,l,u,c){var p=c.seriesIndex,d=c.dataIndex,Q=l.getComponent("axisPointer").coordSysAxesInfo;if(!(p==null||d==null||Q==null)){var Ct=l.getSeriesByIndex(p);if(Ct){var ar=Ct.getData(),en=buildTooltipModel([ar.getItemModel(d),Ct,(Ct.coordinateSystem||{}).model],this._tooltipModel);if(en.get("trigger")==="axis")return u.dispatchAction({type:"updateAxisPointer",seriesIndex:p,dataIndex:d,position:c.position}),!0}}},n.prototype._tryShow=function(a,l){var u=a.target,c=this._tooltipModel;if(c){this._lastX=a.offsetX,this._lastY=a.offsetY;var p=a.dataByCoordSys;if(p&&p.length)this._showAxisTooltip(p,a);else if(u){var d=getECData(u);if(d.ssrType==="legend")return;this._lastDataByCoordSys=null;var Q,Ct;findEventDispatcher(u,function(ar){if(getECData(ar).dataIndex!=null)return Q=ar,!0;if(getECData(ar).tooltipConfig!=null)return Ct=ar,!0},!0),Q?this._showSeriesItemTooltip(a,Q,l):Ct?this._showComponentItemTooltip(a,Ct,l):this._hide(l)}else this._lastDataByCoordSys=null,this._hide(l)}},n.prototype._showOrMove=function(a,l){var u=a.get("showDelay");l=bind$1(l,this),clearTimeout(this._showTimout),u>0?this._showTimout=setTimeout(l,u):l()},n.prototype._showAxisTooltip=function(a,l){var u=this._ecModel,c=this._tooltipModel,p=[l.offsetX,l.offsetY],d=buildTooltipModel([l.tooltipOption],c),Q=this._renderMode,Ct=[],ar=createTooltipMarkup("section",{blocks:[],noHeader:!0}),en=[],tn=new TooltipMarkupStyleCreator;each$f(a,function(ix){each$f(ix.dataByAxis,function(ax){var ox=u.getComponent(ax.axisDim+"Axis",ax.axisIndex),lx=ax.value;if(!(!ox||lx==null)){var cx=getValueLabel(lx,ox.axis,u,ax.seriesDataIndices,ax.valueLabelOpt),dx=createTooltipMarkup("section",{header:cx,noHeader:!trim$1(cx),sortBlocks:!0,blocks:[]});ar.blocks.push(dx),each$f(ax.seriesDataIndices,function(hx){var fx=u.getSeriesByIndex(hx.seriesIndex),ux=hx.dataIndexInside,gx=fx.getDataParams(ux);if(!(gx.dataIndex<0)){gx.axisDim=ax.axisDim,gx.axisIndex=ax.axisIndex,gx.axisType=ax.axisType,gx.axisId=ax.axisId,gx.axisValue=getAxisRawValue(ox.axis,{value:lx}),gx.axisValueLabel=cx,gx.marker=tn.makeTooltipMarker("item",convertToColorString(gx.color),Q);var yx=normalizeTooltipFormatResult(fx.formatTooltip(ux,!0,null)),_x=yx.frag;if(_x){var vx=buildTooltipModel([fx],c).get("valueFormatter");dx.blocks.push(vx?extend({valueFormatter:vx},_x):_x)}yx.text&&en.push(yx.text),Ct.push(gx)}})}})}),ar.blocks.reverse(),en.reverse();var on=l.position,cn=d.get("order"),gn=buildTooltipMarkup(ar,tn,Q,cn,u.get("useUTC"),d.get("textStyle"));gn&&en.unshift(gn);var Cn=Q==="richText"?`

`:"<br/>",ex=en.join(Cn);this._showOrMove(d,function(){this._updateContentNotChangedOnAxis(a,Ct)?this._updatePosition(d,on,p[0],p[1],this._tooltipContent,Ct):this._showTooltipContent(d,ex,Ct,Math.random()+"",p[0],p[1],on,null,tn)})},n.prototype._showSeriesItemTooltip=function(a,l,u){var c=this._ecModel,p=getECData(l),d=p.seriesIndex,Q=c.getSeriesByIndex(d),Ct=p.dataModel||Q,ar=p.dataIndex,en=p.dataType,tn=Ct.getData(en),on=this._renderMode,cn=a.positionDefault,gn=buildTooltipModel([tn.getItemModel(ar),Ct,Q&&(Q.coordinateSystem||{}).model],this._tooltipModel,cn?{position:cn}:null),Cn=gn.get("trigger");if(!(Cn!=null&&Cn!=="item")){var ex=Ct.getDataParams(ar,en),ix=new TooltipMarkupStyleCreator;ex.marker=ix.makeTooltipMarker("item",convertToColorString(ex.color),on);var ax=normalizeTooltipFormatResult(Ct.formatTooltip(ar,!1,en)),ox=gn.get("order"),lx=gn.get("valueFormatter"),cx=ax.frag,dx=cx?buildTooltipMarkup(lx?extend({valueFormatter:lx},cx):cx,ix,on,ox,c.get("useUTC"),gn.get("textStyle")):ax.text,hx="item_"+Ct.name+"_"+ar;this._showOrMove(gn,function(){this._showTooltipContent(gn,dx,ex,hx,a.offsetX,a.offsetY,a.position,a.target,ix)}),u({type:"showTip",dataIndexInside:ar,dataIndex:tn.getRawIndex(ar),seriesIndex:d,from:this.uid})}},n.prototype._showComponentItemTooltip=function(a,l,u){var c=this._renderMode==="html",p=getECData(l),d=p.tooltipConfig,Q=d.option||{},Ct=Q.encodeHTMLContent;if(isString$1(Q)){var ar=Q;Q={content:ar,formatter:ar},Ct=!0}Ct&&c&&Q.content&&(Q=clone$4(Q),Q.content=encodeHTML(Q.content));var en=[Q],tn=this._ecModel.getComponent(p.componentMainType,p.componentIndex);tn&&en.push(tn),en.push({formatter:Q.content});var on=a.positionDefault,cn=buildTooltipModel(en,this._tooltipModel,on?{position:on}:null),gn=cn.get("content"),Cn=Math.random()+"",ex=new TooltipMarkupStyleCreator;this._showOrMove(cn,function(){var ix=clone$4(cn.get("formatterParams")||{});this._showTooltipContent(cn,gn,ix,Cn,a.offsetX,a.offsetY,a.position,l,ex)}),u({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(a,l,u,c,p,d,Q,Ct,ar){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var en=this._tooltipContent;en.setEnterable(a.get("enterable"));var tn=a.get("formatter");Q=Q||a.get("position");var on=l,cn=this._getNearestPoint([p,d],u,a.get("trigger"),a.get("borderColor")),gn=cn.color;if(tn)if(isString$1(tn)){var Cn=a.ecModel.get("useUTC"),ex=isArray$1(u)?u[0]:u,ix=ex&&ex.axisType&&ex.axisType.indexOf("time")>=0;on=tn,ix&&(on=format$1(ex.axisValue,on,Cn)),on=formatTpl(on,u,!0)}else if(isFunction$1(tn)){var ax=bind$1(function(ox,lx){ox===this._ticket&&(en.setContent(lx,ar,a,gn,Q),this._updatePosition(a,Q,p,d,en,u,Ct))},this);this._ticket=c,on=tn(u,c,ax)}else on=tn;en.setContent(on,ar,a,gn,Q),en.show(a,gn),this._updatePosition(a,Q,p,d,en,u,Ct)}},n.prototype._getNearestPoint=function(a,l,u,c){if(u==="axis"||isArray$1(l))return{color:c||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(l))return{color:c||l.color||l.borderColor}},n.prototype._updatePosition=function(a,l,u,c,p,d,Q){var Ct=this._api.getWidth(),ar=this._api.getHeight();l=l||a.get("position");var en=p.getSize(),tn=a.get("align"),on=a.get("verticalAlign"),cn=Q&&Q.getBoundingRect().clone();if(Q&&cn.applyTransform(Q.transform),isFunction$1(l)&&(l=l([u,c],d,p.el,cn,{viewSize:[Ct,ar],contentSize:en.slice()})),isArray$1(l))u=parsePercent(l[0],Ct),c=parsePercent(l[1],ar);else if(isObject$3(l)){var gn=l;gn.width=en[0],gn.height=en[1];var Cn=getLayoutRect(gn,{width:Ct,height:ar});u=Cn.x,c=Cn.y,tn=null,on=null}else if(isString$1(l)&&Q){var ex=calcTooltipPosition(l,cn,en,a.get("borderWidth"));u=ex[0],c=ex[1]}else{var ex=refixTooltipPosition(u,c,p,Ct,ar,tn?null:20,on?null:20);u=ex[0],c=ex[1]}if(tn&&(u-=isCenterAlign(tn)?en[0]/2:tn==="right"?en[0]:0),on&&(c-=isCenterAlign(on)?en[1]/2:on==="bottom"?en[1]:0),shouldTooltipConfine(a)){var ex=confineTooltipPosition(u,c,p,Ct,ar);u=ex[0],c=ex[1]}p.moveTo(u,c)},n.prototype._updateContentNotChangedOnAxis=function(a,l){var u=this._lastDataByCoordSys,c=this._cbParamsList,p=!!u&&u.length===a.length;return p&&each$f(u,function(d,Q){var Ct=d.dataByAxis||[],ar=a[Q]||{},en=ar.dataByAxis||[];p=p&&Ct.length===en.length,p&&each$f(Ct,function(tn,on){var cn=en[on]||{},gn=tn.seriesDataIndices||[],Cn=cn.seriesDataIndices||[];p=p&&tn.value===cn.value&&tn.axisType===cn.axisType&&tn.axisId===cn.axisId&&gn.length===Cn.length,p&&each$f(gn,function(ex,ix){var ax=Cn[ix];p=p&&ex.seriesIndex===ax.seriesIndex&&ex.dataIndex===ax.dataIndex}),c&&each$f(tn.seriesDataIndices,function(ex){var ix=ex.seriesIndex,ax=l[ix],ox=c[ix];ax&&ox&&ox.data!==ax.data&&(p=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=l,!!p},n.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},n.prototype.dispose=function(a,l){env.node||!l.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",l))},n.type="tooltip",n}(ComponentView);function buildTooltipModel(t,n,a){var l=n.ecModel,u;a?(u=new Model(a,l,l),u=new Model(n.option,u,l)):u=n;for(var c=t.length-1;c>=0;c--){var p=t[c];p&&(p instanceof Model&&(p=p.get("tooltip",!0)),isString$1(p)&&(p={formatter:p}),p&&(u=new Model(p,u,l)))}return u}function makeDispatchAction(t,n){return t.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(t,n,a,l,u,c,p){var d=a.getSize(),Q=d[0],Ct=d[1];return c!=null&&(t+Q+c+2>l?t-=Q+c:t+=c),p!=null&&(n+Ct+p>u?n-=Ct+p:n+=p),[t,n]}function confineTooltipPosition(t,n,a,l,u){var c=a.getSize(),p=c[0],d=c[1];return t=Math.min(t+p,l)-p,n=Math.min(n+d,u)-d,t=Math.max(t,0),n=Math.max(n,0),[t,n]}function calcTooltipPosition(t,n,a,l){var u=a[0],c=a[1],p=Math.ceil(Math.SQRT2*l)+8,d=0,Q=0,Ct=n.width,ar=n.height;switch(t){case"inside":d=n.x+Ct/2-u/2,Q=n.y+ar/2-c/2;break;case"top":d=n.x+Ct/2-u/2,Q=n.y-c-p;break;case"bottom":d=n.x+Ct/2-u/2,Q=n.y+ar+p;break;case"left":d=n.x-u-p,Q=n.y+ar/2-c/2;break;case"right":d=n.x+Ct+p,Q=n.y+ar/2-c/2}return[d,Q]}function isCenterAlign(t){return t==="center"||t==="middle"}function findComponentReference(t,n,a){var l=preParseFinder(t).queryOptionMap,u=l.keys()[0];if(!(!u||u==="series")){var c=queryReferringComponents(n,u,l.get(u),{useDefault:!1,enableAll:!1,enableNone:!1}),p=c.models[0];if(p){var d=a.getViewOfComponentModel(p),Q;if(d.group.traverse(function(Ct){var ar=getECData(Ct).tooltipConfig;if(ar&&ar.name===t.name)return Q=Ct,!0}),Q)return{componentMainType:u,componentIndex:p.componentIndex,el:Q}}}}function install$i(t){use(install$q),t.registerComponentModel(TooltipModel),t.registerComponentView(TooltipView),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(t,n){var a=normalizeToArray(t?t.brush:[]);if(a.length){var l=[];each$f(a,function(Q){var Ct=Q.hasOwnProperty("toolbox")?Q.toolbox:[];Ct instanceof Array&&(l=l.concat(Ct))});var u=t&&t.toolbox;isArray$1(u)&&(u=u[0]),u||(u={feature:{}},t.toolbox=[u]);var c=u.feature||(u.feature={}),p=c.brush||(c.brush={}),d=p.type||(p.type=[]);d.push.apply(d,l),removeDuplicate(d),n&&!d.length&&d.push.apply(d,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(t){var n={};each$f(t,function(a){n[a]=1}),t.length=0,each$f(n,function(a,l){t.push(l)})}var each$4=each$f;function hasKeys(t){if(t){for(var n in t)if(t.hasOwnProperty(n))return!0}}function createVisualMappings(t,n,a){var l={};return each$4(n,function(c){var p=l[c]=u();each$4(t[c],function(d,Q){if(VisualMapping.isValidType(Q)){var Ct={type:Q,visual:d};a&&a(Ct,c),p[Q]=new VisualMapping(Ct),Q==="opacity"&&(Ct=clone$4(Ct),Ct.type="colorAlpha",p.__hidden.__alphaForOpacity=new VisualMapping(Ct))}})}),l;function u(){var c=function(){};c.prototype.__hidden=c.prototype;var p=new c;return p}}function replaceVisualOption(t,n,a){var l;each$f(a,function(u){n.hasOwnProperty(u)&&hasKeys(n[u])&&(l=!0)}),l&&each$f(a,function(u){n.hasOwnProperty(u)&&hasKeys(n[u])?t[u]=clone$4(n[u]):delete t[u]})}function applyVisual(t,n,a,l,u,c){var p={};each$f(t,function(en){var tn=VisualMapping.prepareVisualTypes(n[en]);p[en]=tn});var d;function Q(en){return getItemVisualFromData(a,d,en)}function Ct(en,tn){setItemVisualFromData(a,d,en,tn)}a.each(ar);function ar(en,tn){d=en;var on=a.getRawDataItem(d);if(!(on&&on.visualMap===!1))for(var cn=l.call(u,en),gn=n[cn],Cn=p[cn],ex=0,ix=Cn.length;ex<ix;ex++){var ax=Cn[ex];gn[ax]&&gn[ax].applyVisual(en,Q,Ct)}}}function incrementalApplyVisual(t,n,a,l){var u={};return each$f(t,function(c){var p=VisualMapping.prepareVisualTypes(n[c]);u[c]=p}),{progress:function(p,d){var Q;l!=null&&(Q=d.getDimensionIndex(l));function Ct(lx){return getItemVisualFromData(d,en,lx)}function ar(lx,cx){setItemVisualFromData(d,en,lx,cx)}for(var en,tn=d.getStore();(en=p.next())!=null;){var on=d.getRawDataItem(en);if(!(on&&on.visualMap===!1))for(var cn=l!=null?tn.get(Q,en):en,gn=a(cn),Cn=n[gn],ex=u[gn],ix=0,ax=ex.length;ix<ax;ix++){var ox=ex[ix];Cn[ox]&&Cn[ox].applyVisual(cn,Ct,ar)}}}}}function makeBrushCommonSelectorForSeries(t){var n=t.brushType,a={point:function(l){return selector[n].point(l,a,t)},rect:function(l){return selector[n].rect(l,a,t)}};return a}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])},rect:function(t,n,a){return t&&a.boundingRect.intersect(t)}},polygon:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])&&contain(a.range,t[0],t[1])},rect:function(t,n,a){var l=a.range;if(!t||l.length<=1)return!1;var u=t.x,c=t.y,p=t.width,d=t.height,Q=l[0];if(contain(l,u,c)||contain(l,u+p,c)||contain(l,u,c+d)||contain(l,u+p,c+d)||BoundingRect.create(t).contain(Q[0],Q[1])||linePolygonIntersect(u,c,u+p,c,l)||linePolygonIntersect(u,c,u,c+d,l)||linePolygonIntersect(u+p,c,u+p,c+d,l)||linePolygonIntersect(u,c+d,u+p,c+d,l))return!0}}};function getLineSelectors(t){var n=["x","y"],a=["width","height"];return{point:function(l,u,c){if(l){var p=c.range,d=l[t];return inLineRange(d,p)}},rect:function(l,u,c){if(l){var p=c.range,d=[l[n[t]],l[n[t]]+l[a[t]]];return d[1]<d[0]&&d.reverse(),inLineRange(d[0],p)||inLineRange(d[1],p)||inLineRange(p[0],d)||inLineRange(p[1],d)}}}}function inLineRange(t,n){return n[0]<=t&&t<=n[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(t){t.eachComponent({mainType:"brush"},function(n){var a=n.brushTargetManager=new BrushTargetManager(n.option,t);a.setInputRanges(n.areas,t)})}function brushVisual(t,n,a){var l=[],u,c;t.eachComponent({mainType:"brush"},function(p){a&&a.type==="takeGlobalCursor"&&p.setBrushOption(a.key==="brush"?a.brushOption:{brushType:!1})}),layoutCovers(t),t.eachComponent({mainType:"brush"},function(p,d){var Q={brushId:p.id,brushIndex:d,brushName:p.name,areas:clone$4(p.areas),selected:[]};l.push(Q);var Ct=p.option,ar=Ct.brushLink,en=[],tn=[],on=[],cn=!1;d||(u=Ct.throttleType,c=Ct.throttleDelay);var gn=map$1(p.areas,function(lx){var cx=boundingRectBuilders[lx.brushType],dx=defaults({boundingRect:cx?cx(lx):void 0},lx);return dx.selectors=makeBrushCommonSelectorForSeries(dx),dx}),Cn=createVisualMappings(p.option,STATE_LIST,function(lx){lx.mappingMethod="fixed"});isArray$1(ar)&&each$f(ar,function(lx){en[lx]=1});function ex(lx){return ar==="all"||!!en[lx]}function ix(lx){return!!lx.length}t.eachSeries(function(lx,cx){var dx=on[cx]=[];lx.subType==="parallel"?ax(lx,cx):ox(lx,cx,dx)});function ax(lx,cx){var dx=lx.coordinateSystem;cn=cn||dx.hasAxisBrushed(),ex(cx)&&dx.eachActiveState(lx.getData(),function(hx,fx){hx==="active"&&(tn[fx]=1)})}function ox(lx,cx,dx){if(!(!lx.brushSelector||brushModelNotControll(p,cx))&&(each$f(gn,function(fx){p.brushTargetManager.controlSeries(fx,lx,t)&&dx.push(fx),cn=cn||ix(dx)}),ex(cx)&&ix(dx))){var hx=lx.getData();hx.each(function(fx){checkInRange(lx,dx,hx,fx)&&(tn[fx]=1)})}}t.eachSeries(function(lx,cx){var dx={seriesId:lx.id,seriesIndex:cx,seriesName:lx.name,dataIndex:[]};Q.selected.push(dx);var hx=on[cx],fx=lx.getData(),ux=ex(cx)?function(gx){return tn[gx]?(dx.dataIndex.push(fx.getRawIndex(gx)),"inBrush"):"outOfBrush"}:function(gx){return checkInRange(lx,hx,fx,gx)?(dx.dataIndex.push(fx.getRawIndex(gx)),"inBrush"):"outOfBrush"};(ex(cx)?cn:ix(hx))&&applyVisual(STATE_LIST,Cn,fx,ux)})}),dispatchAction$1(n,u,c,l,a)}function dispatchAction$1(t,n,a,l,u){if(u){var c=t.getZr();if(!c[DISPATCH_FLAG]){c[DISPATCH_METHOD]||(c[DISPATCH_METHOD]=doDispatch);var p=createOrUpdate(c,DISPATCH_METHOD,a,n);p(t,l)}}}function doDispatch(t,n){if(!t.isDisposed()){var a=t.getZr();a[DISPATCH_FLAG]=!0,t.dispatchAction({type:"brushSelect",batch:n}),a[DISPATCH_FLAG]=!1}}function checkInRange(t,n,a,l){for(var u=0,c=n.length;u<c;u++){var p=n[u];if(t.brushSelector(l,a,p.selectors,p))return!0}}function brushModelNotControll(t,n){var a=t.option.seriesIndex;return a!=null&&a!=="all"&&(isArray$1(a)?indexOf(a,n)<0:n!==a)}var boundingRectBuilders={rect:function(t){return getBoundingRectFromMinMax(t.range)},polygon:function(t){for(var n,a=t.range,l=0,u=a.length;l<u;l++){n=n||[[1/0,-1/0],[1/0,-1/0]];var c=a[l];c[0]<n[0][0]&&(n[0][0]=c[0]),c[0]>n[0][1]&&(n[0][1]=c[0]),c[1]<n[1][0]&&(n[1][0]=c[1]),c[1]>n[1][1]&&(n[1][1]=c[1])}return n&&getBoundingRectFromMinMax(n)}};function getBoundingRectFromMinMax(t){return new BoundingRect(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var BrushView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l){this.ecModel=a,this.api=l,this.model,(this._brushController=new BrushController(l.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},n.prototype.render=function(a,l,u,c){this.model=a,this._updateController(a,l,u,c)},n.prototype.updateTransform=function(a,l,u,c){layoutCovers(l),this._updateController(a,l,u,c)},n.prototype.updateVisual=function(a,l,u,c){this.updateTransform(a,l,u,c)},n.prototype.updateView=function(a,l,u,c){this._updateController(a,l,u,c)},n.prototype._updateController=function(a,l,u,c){(!c||c.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(u)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(a){var l=this.model.id,u=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:l,areas:clone$4(u),$from:l}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:l,areas:clone$4(u),$from:l})},n.type="brush",n}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.areas=[],a.brushOption={},a}return n.prototype.optionUpdated=function(a,l){var u=this.option;!l&&replaceVisualOption(u,a,["inBrush","outOfBrush"]);var c=u.inBrush=u.inBrush||{};u.outOfBrush=u.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},c.hasOwnProperty("liftZ")||(c.liftZ=5)},n.prototype.setAreas=function(a){a&&(this.areas=map$1(a,function(l){return generateBrushOption(this.option,l)},this))},n.prototype.setBrushOption=function(a){this.brushOption=generateBrushOption(this.option,a),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n}(ComponentModel);function generateBrushOption(t,n){return merge({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Model(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},n,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,l,u){var c,p,d;l.eachComponent({mainType:"brush"},function(Q){c=Q.brushType,p=Q.brushOption.brushMode||"single",d=d||!!Q.areas.length}),this._brushType=c,this._brushMode=p,each$f(a.get("type",!0),function(Q){a.setIconStatus(Q,(Q==="keep"?p==="multiple":Q==="clear"?d:Q===c)?"emphasis":"normal")})},n.prototype.updateView=function(a,l,u){this.render(a,l,u)},n.prototype.getIcons=function(){var a=this.model,l=a.get("icon",!0),u={};return each$f(a.get("type",!0),function(c){l[c]&&(u[c]=l[c])}),u},n.prototype.onclick=function(a,l,u){var c=this._brushType,p=this._brushMode;u==="clear"?(l.dispatchAction({type:"axisAreaSelect",intervals:[]}),l.dispatchAction({type:"brush",command:"clear",areas:[]})):l.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:u==="keep"?c:c===u?!1:u,brushMode:u==="keep"?p==="multiple"?"single":"multiple":p}})},n.getDefaultOption=function(a){var l={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])};return l},n}(ToolboxFeature);function install$h(t){t.registerComponentView(BrushView),t.registerComponentModel(BrushModel),t.registerPreprocessor(brushPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,brushVisual),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,a){a.eachComponent({mainType:"brush",query:n},function(l){l.setAreas(n.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n}(ComponentModel),TitleView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,l,u){if(this.group.removeAll(),!!a.get("show")){var c=this.group,p=a.getModel("textStyle"),d=a.getModel("subtextStyle"),Q=a.get("textAlign"),Ct=retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),ar=new ZRText({style:createTextStyle$1(p,{text:a.get("text"),fill:p.getTextColor()},{disableBox:!0}),z2:10}),en=ar.getBoundingRect(),tn=a.get("subtext"),on=new ZRText({style:createTextStyle$1(d,{text:tn,fill:d.getTextColor(),y:en.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),cn=a.get("link"),gn=a.get("sublink"),Cn=a.get("triggerEvent",!0);ar.silent=!cn&&!Cn,on.silent=!gn&&!Cn,cn&&ar.on("click",function(){windowOpen(cn,"_"+a.get("target"))}),gn&&on.on("click",function(){windowOpen(gn,"_"+a.get("subtarget"))}),getECData(ar).eventData=getECData(on).eventData=Cn?{componentType:"title",componentIndex:a.componentIndex}:null,c.add(ar),tn&&c.add(on);var ex=c.getBoundingRect(),ix=a.getBoxLayoutParams();ix.width=ex.width,ix.height=ex.height;var ax=getLayoutRect(ix,{width:u.getWidth(),height:u.getHeight()},a.get("padding"));Q||(Q=a.get("left")||a.get("right"),Q==="middle"&&(Q="center"),Q==="right"?ax.x+=ax.width:Q==="center"&&(ax.x+=ax.width/2)),Ct||(Ct=a.get("top")||a.get("bottom"),Ct==="center"&&(Ct="middle"),Ct==="bottom"?ax.y+=ax.height:Ct==="middle"&&(ax.y+=ax.height/2),Ct=Ct||"top"),c.x=ax.x,c.y=ax.y,c.markRedraw();var ox={align:Q,verticalAlign:Ct};ar.setStyle(ox),on.setStyle(ox),ex=c.getBoundingRect();var lx=ax.margin,cx=a.getItemStyle(["color","opacity"]);cx.fill=a.get("backgroundColor");var dx=new Rect$2({shape:{x:ex.x-lx[3],y:ex.y-lx[0],width:ex.width+lx[1]+lx[3],height:ex.height+lx[0]+lx[2],r:a.get("borderRadius")},style:cx,subPixelOptimize:!0,silent:!0});c.add(dx)}},n.type="title",n}(ComponentView);function install$g(t){t.registerComponentModel(TitleModel),t.registerComponentView(TitleView)}var TimelineModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode="box",a}return n.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),this._initData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var l=this._data.count();this.option.loop?a=(a%l+l)%l:(a>=l&&(a=l-1),a<0&&(a=0)),this.option.currentIndex=a},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(a){this.option.autoPlay=!!a},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var a=this.option,l=a.data||[],u=a.axisType,c=this._names=[],p;u==="category"?(p=[],each$f(l,function(Ct,ar){var en=convertOptionIdName(getDataItemValue(Ct),""),tn;isObject$3(Ct)?(tn=clone$4(Ct),tn.value=ar):tn=ar,p.push(tn),c.push(en)})):p=l;var d={category:"ordinal",time:"time",value:"number"}[u]||"number",Q=this._data=new SeriesData([{name:"value",type:d}],this);Q.initData(p,c)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n}(ComponentModel),SliderTimelineModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline.slider",n.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline",n}(ComponentView),TimelineAxis=function(t){__extends(n,t);function n(a,l,u,c){var p=t.call(this,a,l,u)||this;return p.type=c||"value",p}return n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},n}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,l){this.api=l},n.prototype.render=function(a,l,u){if(this.model=a,this.api=u,this.ecModel=l,this.group.removeAll(),a.get("show",!0)){var c=this._layout(a,u),p=this._createGroup("_mainGroup"),d=this._createGroup("_labelGroup"),Q=this._axis=this._createAxis(c,a);a.formatTooltip=function(Ct){var ar=Q.scale.getLabel({value:Ct});return createTooltipMarkup("nameValue",{noName:!0,value:ar})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(Ct){this["_render"+Ct](c,p,Q,a)},this),this._renderAxisLabel(c,d,Q,a),this._position(c,a)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(a,l){var u=a.get(["label","position"]),c=a.get("orient"),p=getViewRect(a,l),d;u==null||u==="auto"?d=c==="horizontal"?p.y+p.height/2<l.getHeight()/2?"-":"+":p.x+p.width/2<l.getWidth()/2?"+":"-":isString$1(u)?d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[c][u]:d=u;var Q={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},Ct={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},ar={horizontal:0,vertical:PI/2},en=c==="vertical"?p.height:p.width,tn=a.getModel("controlStyle"),on=tn.get("show",!0),cn=on?tn.get("itemSize"):0,gn=on?tn.get("itemGap"):0,Cn=cn+gn,ex=a.get(["label","rotate"])||0;ex=ex*PI/180;var ix,ax,ox,lx=tn.get("position",!0),cx=on&&tn.get("showPlayBtn",!0),dx=on&&tn.get("showPrevBtn",!0),hx=on&&tn.get("showNextBtn",!0),fx=0,ux=en;lx==="left"||lx==="bottom"?(cx&&(ix=[0,0],fx+=Cn),dx&&(ax=[fx,0],fx+=Cn),hx&&(ox=[ux-cn,0],ux-=Cn)):(cx&&(ix=[ux-cn,0],ux-=Cn),dx&&(ax=[0,0],fx+=Cn),hx&&(ox=[ux-cn,0],ux-=Cn));var gx=[fx,ux];return a.get("inverse")&&gx.reverse(),{viewRect:p,mainLength:en,orient:c,rotation:ar[c],labelRotation:ex,labelPosOpt:d,labelAlign:a.get(["label","align"])||Q[c],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||Ct[c],playPosition:ix,prevBtnPosition:ax,nextBtnPosition:ox,axisExtent:gx,controlSize:cn,controlGap:gn}},n.prototype._position=function(a,l){var u=this._mainGroup,c=this._labelGroup,p=a.viewRect;if(a.orient==="vertical"){var d=create$1(),Q=p.x,Ct=p.y+p.height;translate(d,d,[-Q,-Ct]),rotate(d,d,-PI/2),translate(d,d,[Q,Ct]),p=p.clone(),p.applyTransform(d)}var ar=ix(p),en=ix(u.getBoundingRect()),tn=ix(c.getBoundingRect()),on=[u.x,u.y],cn=[c.x,c.y];cn[0]=on[0]=ar[0][0];var gn=a.labelPosOpt;if(gn==null||isString$1(gn)){var Cn=gn==="+"?0:1;ax(on,en,ar,1,Cn),ax(cn,tn,ar,1,1-Cn)}else{var Cn=gn>=0?0:1;ax(on,en,ar,1,Cn),cn[1]=on[1]+gn}u.setPosition(on),c.setPosition(cn),u.rotation=c.rotation=a.rotation,ex(u),ex(c);function ex(ox){ox.originX=ar[0][0]-ox.x,ox.originY=ar[1][0]-ox.y}function ix(ox){return[[ox.x,ox.x+ox.width],[ox.y,ox.y+ox.height]]}function ax(ox,lx,cx,dx,hx){ox[dx]+=cx[dx][hx]-lx[dx][hx]}},n.prototype._createAxis=function(a,l){var u=l.getData(),c=l.get("axisType"),p=createScaleByModel(l,c);p.getTicks=function(){return u.mapArray(["value"],function(Ct){return{value:Ct}})};var d=u.getDataExtent("value");p.setExtent(d[0],d[1]),p.calcNiceTicks();var Q=new TimelineAxis("value",p,a.axisExtent,c);return Q.model=l,Q},n.prototype._createGroup=function(a){var l=this[a]=new Group$3;return this.group.add(l),l},n.prototype._renderAxisLine=function(a,l,u,c){var p=u.getExtent();if(c.get(["lineStyle","show"])){var d=new Line$1({shape:{x1:p[0],y1:0,x2:p[1],y2:0},style:extend({lineCap:"round"},c.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});l.add(d);var Q=this._progressLine=new Line$1({shape:{x1:p[0],x2:this._currentPointer?this._currentPointer.x:p[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:d.style.lineWidth},c.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});l.add(Q)}},n.prototype._renderAxisTick=function(a,l,u,c){var p=this,d=c.getData(),Q=u.scale.getTicks();this._tickSymbols=[],each$f(Q,function(Ct){var ar=u.dataToCoord(Ct.value),en=d.getItemModel(Ct.value),tn=en.getModel("itemStyle"),on=en.getModel(["emphasis","itemStyle"]),cn=en.getModel(["progress","itemStyle"]),gn={x:ar,y:0,onclick:bind$1(p._changeTimeline,p,Ct.value)},Cn=giveSymbol(en,tn,l,gn);Cn.ensureState("emphasis").style=on.getItemStyle(),Cn.ensureState("progress").style=cn.getItemStyle(),enableHoverEmphasis(Cn);var ex=getECData(Cn);en.get("tooltip")?(ex.dataIndex=Ct.value,ex.dataModel=c):ex.dataIndex=ex.dataModel=null,p._tickSymbols.push(Cn)})},n.prototype._renderAxisLabel=function(a,l,u,c){var p=this,d=u.getLabelModel();if(d.get("show")){var Q=c.getData(),Ct=u.getViewLabels();this._tickLabels=[],each$f(Ct,function(ar){var en=ar.tickValue,tn=Q.getItemModel(en),on=tn.getModel("label"),cn=tn.getModel(["emphasis","label"]),gn=tn.getModel(["progress","label"]),Cn=u.dataToCoord(ar.tickValue),ex=new ZRText({x:Cn,y:0,rotation:a.labelRotation-a.rotation,onclick:bind$1(p._changeTimeline,p,en),silent:!1,style:createTextStyle$1(on,{text:ar.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});ex.ensureState("emphasis").style=createTextStyle$1(cn),ex.ensureState("progress").style=createTextStyle$1(gn),l.add(ex),enableHoverEmphasis(ex),labelDataIndexStore(ex).dataIndex=en,p._tickLabels.push(ex)})}},n.prototype._renderControl=function(a,l,u,c){var p=a.controlSize,d=a.rotation,Q=c.getModel("controlStyle").getItemStyle(),Ct=c.getModel(["emphasis","controlStyle"]).getItemStyle(),ar=c.getPlayState(),en=c.get("inverse",!0);tn(a.nextBtnPosition,"next",bind$1(this._changeTimeline,this,en?"-":"+")),tn(a.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,en?"+":"-")),tn(a.playPosition,ar?"stop":"play",bind$1(this._handlePlayClick,this,!ar),!0);function tn(on,cn,gn,Cn){if(on){var ex=parsePercent$1(retrieve2(c.get(["controlStyle",cn+"BtnSize"]),p),p),ix=[0,-ex/2,ex,ex],ax=makeControlIcon(c,cn+"Icon",ix,{x:on[0],y:on[1],originX:p/2,originY:0,rotation:Cn?-d:0,rectHover:!0,style:Q,onclick:gn});ax.ensureState("emphasis").style=Ct,l.add(ax),enableHoverEmphasis(ax)}}},n.prototype._renderCurrentPointer=function(a,l,u,c){var p=c.getData(),d=c.getCurrentIndex(),Q=p.getItemModel(d).getModel("checkpointStyle"),Ct=this,ar={onCreate:function(en){en.draggable=!0,en.drift=bind$1(Ct._handlePointerDrag,Ct),en.ondragend=bind$1(Ct._handlePointerDragend,Ct),pointerMoveTo(en,Ct._progressLine,d,u,c,!0)},onUpdate:function(en){pointerMoveTo(en,Ct._progressLine,d,u,c)}};this._currentPointer=giveSymbol(Q,Q,this._mainGroup,{},this._currentPointer,ar)},n.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},n.prototype._handlePointerDrag=function(a,l,u){this._clearTimer(),this._pointerChangeTimeline([u.offsetX,u.offsetY])},n.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},n.prototype._pointerChangeTimeline=function(a,l){var u=this._toAxisCoord(a)[0],c=this._axis,p=asc$2(c.getExtent().slice());u>p[1]&&(u=p[1]),u<p[0]&&(u=p[0]),this._currentPointer.x=u,this._currentPointer.markRedraw();var d=this._progressLine;d&&(d.shape.x2=u,d.dirty());var Q=this._findNearestTick(u),Ct=this.model;(l||Q!==Ct.getCurrentIndex()&&Ct.get("realtime"))&&this._changeTimeline(Q)},n.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var l=a.model;a._changeTimeline(l.getCurrentIndex()+(l.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(a){var l=this._mainGroup.getLocalTransform();return applyTransform(a,l,!0)},n.prototype._findNearestTick=function(a){var l=this.model.getData(),u=1/0,c,p=this._axis;return l.each(["value"],function(d,Q){var Ct=p.dataToCoord(d),ar=Math.abs(Ct-a);ar<u&&(u=ar,c=Q)}),c},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(a){var l=this.model.getCurrentIndex();a==="+"?a=l+1:a==="-"&&(a=l-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},n.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),l=this._tickSymbols,u=this._tickLabels;if(l)for(var c=0;c<l.length;c++)l&&l[c]&&l[c].toggleState("progress",c<a);if(u)for(var c=0;c<u.length;c++)u&&u[c]&&u[c].toggleState("progress",labelDataIndexStore(u[c]).dataIndex<=a)},n.type="timeline.slider",n}(TimelineView);function createScaleByModel(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},t.get("padding"))}function makeControlIcon(t,n,a,l){var u=l.style,c=createIcon(t.get(["controlStyle",n]),l||{},new BoundingRect(a[0],a[1],a[2],a[3]));return u&&c.setStyle(u),c}function giveSymbol(t,n,a,l,u,c){var p=n.get("color");if(u)u.setColor(p),a.add(u),c&&c.onUpdate(u);else{var d=t.get("symbol");u=createSymbol$1(d,-1,-1,2,2,p),u.setStyle("strokeNoScale",!0),a.add(u),c&&c.onCreate(u)}var Q=n.getItemStyle(["color"]);u.setStyle(Q),l=merge({rectHover:!0,z2:100},l,!0);var Ct=normalizeSymbolSize(t.get("symbolSize"));l.scaleX=Ct[0]/2,l.scaleY=Ct[1]/2;var ar=normalizeSymbolOffset(t.get("symbolOffset"),Ct);ar&&(l.x=(l.x||0)+ar[0],l.y=(l.y||0)+ar[1]);var en=t.get("symbolRotate");return l.rotation=(en||0)*Math.PI/180||0,u.attr(l),u.updateTransform(),u}function pointerMoveTo(t,n,a,l,u,c){if(!t.dragging){var p=u.getModel("checkpointStyle"),d=l.dataToCoord(u.getData().get("value",a));if(c||!p.get("animation",!0))t.attr({x:d,y:0}),n&&n.attr({shape:{x2:d}});else{var Q={duration:p.get("animationDuration",!0),easing:p.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:d,y:0},Q),n&&n.animateTo({shape:{x2:d}},Q)}}}function installTimelineAction(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,a,l){var u=a.getComponent("timeline");return u&&n.currentIndex!=null&&(u.setCurrentIndex(n.currentIndex),!u.get("loop",!0)&&u.isIndexMax()&&u.getPlayState()&&(u.setPlayState(!1),l.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),a.resetOption("timeline",{replaceMerge:u.get("replaceMerge",!0)}),defaults({currentIndex:u.option.currentIndex},n)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,a){var l=a.getComponent("timeline");l&&n.playState!=null&&l.setPlayState(n.playState)})}function timelinePreprocessor(t){var n=t&&t.timeline;isArray$1(n)||(n=n?[n]:[]),each$f(n,function(a){a&&compatibleEC2(a)})}function compatibleEC2(t){var n=t.type,a={number:"value",time:"time"};if(a[n]&&(t.axisType=a[n],delete t.type),transferItem(t),has$1(t,"controlPosition")){var l=t.controlStyle||(t.controlStyle={});has$1(l,"position")||(l.position=t.controlPosition),l.position==="none"&&!has$1(l,"show")&&(l.show=!1,delete l.position),delete t.controlPosition}each$f(t.data||[],function(u){isObject$3(u)&&!isArray$1(u)&&(!has$1(u,"value")&&has$1(u,"name")&&(u.value=u.name),transferItem(u))})}function transferItem(t){var n=t.itemStyle||(t.itemStyle={}),a=n.emphasis||(n.emphasis={}),l=t.label||t.label||{},u=l.normal||(l.normal={}),c={normal:1,emphasis:1};each$f(l,function(p,d){!c[d]&&!has$1(u,d)&&(u[d]=p)}),a.label&&!has$1(l,"emphasis")&&(l.emphasis=a.label,delete a.label)}function has$1(t,n){return t.hasOwnProperty(n)}function install$f(t){t.registerComponentModel(SliderTimelineModel),t.registerComponentView(SliderTimelineView),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(t),t.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(t,n){if(!t)return!1;for(var a=isArray$1(t)?t:[t],l=0;l<a.length;l++)if(a[l]&&a[l][n])return!0;return!1}function fillLabel(t){defaultEmphasis(t,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.createdBySelf=!1,a}return n.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),this._mergeOption(a,u,!1,!0)},n.prototype.isAnimationEnabled=function(){if(env.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},n.prototype.mergeOption=function(a,l){this._mergeOption(a,l,!1,!1)},n.prototype._mergeOption=function(a,l,u,c){var p=this.mainType;u||l.eachSeries(function(d){var Q=d.get(this.mainType,!0),Ct=inner$5(d)[p];if(!Q||!Q.data){inner$5(d)[p]=null;return}Ct?Ct._mergeOption(Q,l,!0):(c&&fillLabel(Q),each$f(Q.data,function(ar){ar instanceof Array?(fillLabel(ar[0]),fillLabel(ar[1])):fillLabel(ar)}),Ct=this.createMarkerModelFromSeries(Q,this,l),extend(Ct,{mainType:this.mainType,seriesIndex:d.seriesIndex,name:d.name,createdBySelf:!0}),Ct.__hostSeries=d),inner$5(d)[p]=Ct},this)},n.prototype.formatTooltip=function(a,l,u){var c=this.getData(),p=this.getRawValue(a),d=c.getName(a);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:d,value:p,noName:!d,noValue:p==null})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(a){this._data=a},n.prototype.getDataParams=function(a,l){var u=DataFormatMixin.prototype.getDataParams.call(this,a,l),c=this.__hostSeries;return c&&(u.seriesId=c.id,u.seriesName=c.name,u.seriesType=c.subType),u},n.getMarkerModelFromSeries=function(a,l){return inner$5(a)[l]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,l,u){return new n(a,l,u)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n}(MarkerModel);function hasXOrY(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function hasXAndY(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function markerTypeCalculatorWithExtent(t,n,a,l,u,c){var p=[],d=isDimensionStacked(n,l),Q=d?n.getCalculationInfo("stackResultDimension"):l,Ct=numCalculate(n,Q,t),ar=n.indicesOfNearest(Q,Ct)[0];p[u]=n.get(a,ar),p[c]=n.get(Q,ar);var en=n.get(l,ar),tn=getPrecision(n.get(l,ar));return tn=Math.min(tn,20),tn>=0&&(p[c]=+p[c].toFixed(tn)),[p,en]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(t,n){if(n){var a=t.getData(),l=t.coordinateSystem,u=l&&l.dimensions;if(!hasXAndY(n)&&!isArray$1(n.coord)&&isArray$1(u)){var c=getAxisInfo(n,a,l,t);if(n=clone$4(n),n.type&&markerTypeCalculator[n.type]&&c.baseAxis&&c.valueAxis){var p=indexOf(u,c.baseAxis.dim),d=indexOf(u,c.valueAxis.dim),Q=markerTypeCalculator[n.type](a,c.baseDataDim,c.valueDataDim,p,d);n.coord=Q[0],n.value=Q[1]}else n.coord=[n.xAxis!=null?n.xAxis:n.radiusAxis,n.yAxis!=null?n.yAxis:n.angleAxis]}if(n.coord==null||!isArray$1(u))n.coord=[];else for(var Ct=n.coord,ar=0;ar<2;ar++)markerTypeCalculator[Ct[ar]]&&(Ct[ar]=numCalculate(a,a.mapDimension(u[ar]),Ct[ar]));return n}}function getAxisInfo(t,n,a,l){var u={};return t.valueIndex!=null||t.valueDim!=null?(u.valueDataDim=t.valueIndex!=null?n.getDimension(t.valueIndex):t.valueDim,u.valueAxis=a.getAxis(dataDimToCoordDim(l,u.valueDataDim)),u.baseAxis=a.getOtherAxis(u.valueAxis),u.baseDataDim=n.mapDimension(u.baseAxis.dim)):(u.baseAxis=l.getBaseAxis(),u.valueAxis=a.getOtherAxis(u.baseAxis),u.baseDataDim=n.mapDimension(u.baseAxis.dim),u.valueDataDim=n.mapDimension(u.valueAxis.dim)),u}function dataDimToCoordDim(t,n){var a=t.getData().getDimensionInfo(n);return a&&a.coordDim}function dataFilter(t,n){return t&&t.containData&&n.coord&&!hasXOrY(n)?t.containData(n.coord):!0}function zoneFilter(t,n,a){return t&&t.containZone&&n.coord&&a.coord&&!hasXOrY(n)&&!hasXOrY(a)?t.containZone(n.coord,a.coord):!0}function createMarkerDimValueGetter(t,n){return t?function(a,l,u,c){var p=c<2?a.coord&&a.coord[c]:a.value;return parseDataValue(p,n[c])}:function(a,l,u,c){return parseDataValue(a.value,n[c])}}function numCalculate(t,n,a){if(a==="average"){var l=0,u=0;return t.each(n,function(c,p){isNaN(c)||(l+=c,u++)}),l/u}else return a==="median"?t.getMedian(n):t.getDataExtent(n)[a==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this.markerGroupMap=createHashMap()},n.prototype.render=function(a,l,u){var c=this,p=this.markerGroupMap;p.each(function(d){inner$4(d).keep=!1}),l.eachSeries(function(d){var Q=MarkerModel.getMarkerModelFromSeries(d,c.type);Q&&c.renderSeries(d,Q,l,u)}),p.each(function(d){!inner$4(d).keep&&c.group.remove(d.group)})},n.prototype.markKeep=function(a){inner$4(a).keep=!0},n.prototype.toggleBlurSeries=function(a,l){var u=this;each$f(a,function(c){var p=MarkerModel.getMarkerModelFromSeries(c,u.type);if(p){var d=p.getData();d.eachItemGraphicEl(function(Q){Q&&(l?enterBlur(Q):leaveBlur(Q))})}})},n.type="marker",n}(ComponentView);function updateMarkerLayout(t,n,a){var l=n.coordinateSystem;t.each(function(u){var c=t.getItemModel(u),p,d=parsePercent(c.get("x"),a.getWidth()),Q=parsePercent(c.get("y"),a.getHeight());if(!isNaN(d)&&!isNaN(Q))p=[d,Q];else if(n.getMarkerPosition)p=n.getMarkerPosition(t.getValues(t.dimensions,u));else if(l){var Ct=t.get(l.dimensions[0],u),ar=t.get(l.dimensions[1],u);p=l.dataToPoint([Ct,ar])}isNaN(d)||(p[0]=d),isNaN(Q)||(p[1]=Q),t.setItemLayout(u,p)})}var MarkPointView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,l,u){l.eachSeries(function(c){var p=MarkerModel.getMarkerModelFromSeries(c,"markPoint");p&&(updateMarkerLayout(p.getData(),c,u),this.markerGroupMap.get(c.id).updateLayout())},this)},n.prototype.renderSeries=function(a,l,u,c){var p=a.coordinateSystem,d=a.id,Q=a.getData(),Ct=this.markerGroupMap,ar=Ct.get(d)||Ct.set(d,new SymbolDraw),en=createData(p,a,l);l.setData(en),updateMarkerLayout(l.getData(),a,c),en.each(function(tn){var on=en.getItemModel(tn),cn=on.getShallow("symbol"),gn=on.getShallow("symbolSize"),Cn=on.getShallow("symbolRotate"),ex=on.getShallow("symbolOffset"),ix=on.getShallow("symbolKeepAspect");if(isFunction$1(cn)||isFunction$1(gn)||isFunction$1(Cn)||isFunction$1(ex)){var ax=l.getRawValue(tn),ox=l.getDataParams(tn);isFunction$1(cn)&&(cn=cn(ax,ox)),isFunction$1(gn)&&(gn=gn(ax,ox)),isFunction$1(Cn)&&(Cn=Cn(ax,ox)),isFunction$1(ex)&&(ex=ex(ax,ox))}var lx=on.getModel("itemStyle").getItemStyle(),cx=getVisualFromData(Q,"color");lx.fill||(lx.fill=cx),en.setItemVisual(tn,{symbol:cn,symbolSize:gn,symbolRotate:Cn,symbolOffset:ex,symbolKeepAspect:ix,style:lx})}),ar.updateData(en),this.group.add(ar.group),en.eachItemGraphicEl(function(tn){tn.traverse(function(on){getECData(on).dataModel=l})}),this.markKeep(ar),ar.group.silent=l.get("silent")||a.get("silent")},n.type="markPoint",n}(MarkerView);function createData(t,n,a){var l;t?l=map$1(t&&t.dimensions,function(d){var Q=n.getData().getDimensionInfo(n.getData().mapDimension(d))||{};return extend(extend({},Q),{name:d,ordinalMeta:null})}):l=[{name:"value",type:"float"}];var u=new SeriesData(l,a),c=map$1(a.get("data"),curry$1(dataTransform,n));t&&(c=filter(c,curry$1(dataFilter,t)));var p=createMarkerDimValueGetter(!!t,l);return u.initData(c,null,p),u}function install$e(t){t.registerComponentModel(MarkPointModel),t.registerComponentView(MarkPointView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}var MarkLineModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,l,u){return new n(a,l,u)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n}(MarkerModel),inner$3=makeInner(),markLineTransform=function(t,n,a,l){var u=t.getData(),c;if(isArray$1(l))c=l;else{var p=l.type;if(p==="min"||p==="max"||p==="average"||p==="median"||l.xAxis!=null||l.yAxis!=null){var d=void 0,Q=void 0;if(l.yAxis!=null||l.xAxis!=null)d=n.getAxis(l.yAxis!=null?"y":"x"),Q=retrieve(l.yAxis,l.xAxis);else{var Ct=getAxisInfo(l,u,n,t);d=Ct.valueAxis;var ar=getStackedDimension(u,Ct.valueDataDim);Q=numCalculate(u,ar,p)}var en=d.dim==="x"?0:1,tn=1-en,on=clone$4(l),cn={coord:[]};on.type=null,on.coord=[],on.coord[tn]=-1/0,cn.coord[tn]=1/0;var gn=a.get("precision");gn>=0&&isNumber(Q)&&(Q=+Q.toFixed(Math.min(gn,20))),on.coord[en]=cn.coord[en]=Q,c=[on,cn,{type:p,valueIndex:l.valueIndex,value:Q}]}else c=[]}var Cn=[dataTransform(t,c[0]),dataTransform(t,c[1]),extend({},c[2])];return Cn[2].type=Cn[2].type||null,merge(Cn[2],Cn[0]),merge(Cn[2],Cn[1]),Cn};function isInfinity$1(t){return!isNaN(t)&&!isFinite(t)}function ifMarkLineHasOnlyDim(t,n,a,l){var u=1-t,c=l.dimensions[t];return isInfinity$1(n[u])&&isInfinity$1(a[u])&&n[t]===a[t]&&l.getAxis(c).containData(n[t])}function markLineFilter(t,n){if(t.type==="cartesian2d"){var a=n[0].coord,l=n[1].coord;if(a&&l&&(ifMarkLineHasOnlyDim(1,a,l,t)||ifMarkLineHasOnlyDim(0,a,l,t)))return!0}return dataFilter(t,n[0])&&dataFilter(t,n[1])}function updateSingleMarkerEndLayout(t,n,a,l,u){var c=l.coordinateSystem,p=t.getItemModel(n),d,Q=parsePercent(p.get("x"),u.getWidth()),Ct=parsePercent(p.get("y"),u.getHeight());if(!isNaN(Q)&&!isNaN(Ct))d=[Q,Ct];else{if(l.getMarkerPosition)d=l.getMarkerPosition(t.getValues(t.dimensions,n));else{var ar=c.dimensions,en=t.get(ar[0],n),tn=t.get(ar[1],n);d=c.dataToPoint([en,tn])}if(isCoordinateSystemType(c,"cartesian2d")){var on=c.getAxis("x"),cn=c.getAxis("y"),ar=c.dimensions;isInfinity$1(t.get(ar[0],n))?d[0]=on.toGlobalCoord(on.getExtent()[a?0:1]):isInfinity$1(t.get(ar[1],n))&&(d[1]=cn.toGlobalCoord(cn.getExtent()[a?0:1]))}isNaN(Q)||(d[0]=Q),isNaN(Ct)||(d[1]=Ct)}t.setItemLayout(n,d)}var MarkLineView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,l,u){l.eachSeries(function(c){var p=MarkerModel.getMarkerModelFromSeries(c,"markLine");if(p){var d=p.getData(),Q=inner$3(p).from,Ct=inner$3(p).to;Q.each(function(ar){updateSingleMarkerEndLayout(Q,ar,!0,c,u),updateSingleMarkerEndLayout(Ct,ar,!1,c,u)}),d.each(function(ar){d.setItemLayout(ar,[Q.getItemLayout(ar),Ct.getItemLayout(ar)])}),this.markerGroupMap.get(c.id).updateLayout()}},this)},n.prototype.renderSeries=function(a,l,u,c){var p=a.coordinateSystem,d=a.id,Q=a.getData(),Ct=this.markerGroupMap,ar=Ct.get(d)||Ct.set(d,new LineDraw);this.group.add(ar.group);var en=createList$1(p,a,l),tn=en.from,on=en.to,cn=en.line;inner$3(l).from=tn,inner$3(l).to=on,l.setData(cn);var gn=l.get("symbol"),Cn=l.get("symbolSize"),ex=l.get("symbolRotate"),ix=l.get("symbolOffset");isArray$1(gn)||(gn=[gn,gn]),isArray$1(Cn)||(Cn=[Cn,Cn]),isArray$1(ex)||(ex=[ex,ex]),isArray$1(ix)||(ix=[ix,ix]),en.from.each(function(ox){ax(tn,ox,!0),ax(on,ox,!1)}),cn.each(function(ox){var lx=cn.getItemModel(ox).getModel("lineStyle").getLineStyle();cn.setItemLayout(ox,[tn.getItemLayout(ox),on.getItemLayout(ox)]),lx.stroke==null&&(lx.stroke=tn.getItemVisual(ox,"style").fill),cn.setItemVisual(ox,{fromSymbolKeepAspect:tn.getItemVisual(ox,"symbolKeepAspect"),fromSymbolOffset:tn.getItemVisual(ox,"symbolOffset"),fromSymbolRotate:tn.getItemVisual(ox,"symbolRotate"),fromSymbolSize:tn.getItemVisual(ox,"symbolSize"),fromSymbol:tn.getItemVisual(ox,"symbol"),toSymbolKeepAspect:on.getItemVisual(ox,"symbolKeepAspect"),toSymbolOffset:on.getItemVisual(ox,"symbolOffset"),toSymbolRotate:on.getItemVisual(ox,"symbolRotate"),toSymbolSize:on.getItemVisual(ox,"symbolSize"),toSymbol:on.getItemVisual(ox,"symbol"),style:lx})}),ar.updateData(cn),en.line.eachItemGraphicEl(function(ox){getECData(ox).dataModel=l,ox.traverse(function(lx){getECData(lx).dataModel=l})});function ax(ox,lx,cx){var dx=ox.getItemModel(lx);updateSingleMarkerEndLayout(ox,lx,cx,a,c);var hx=dx.getModel("itemStyle").getItemStyle();hx.fill==null&&(hx.fill=getVisualFromData(Q,"color")),ox.setItemVisual(lx,{symbolKeepAspect:dx.get("symbolKeepAspect"),symbolOffset:retrieve2(dx.get("symbolOffset",!0),ix[cx?0:1]),symbolRotate:retrieve2(dx.get("symbolRotate",!0),ex[cx?0:1]),symbolSize:retrieve2(dx.get("symbolSize"),Cn[cx?0:1]),symbol:retrieve2(dx.get("symbol",!0),gn[cx?0:1]),style:hx})}this.markKeep(ar),ar.group.silent=l.get("silent")||a.get("silent")},n.type="markLine",n}(MarkerView);function createList$1(t,n,a){var l;t?l=map$1(t&&t.dimensions,function(Ct){var ar=n.getData().getDimensionInfo(n.getData().mapDimension(Ct))||{};return extend(extend({},ar),{name:Ct,ordinalMeta:null})}):l=[{name:"value",type:"float"}];var u=new SeriesData(l,a),c=new SeriesData(l,a),p=new SeriesData([],a),d=map$1(a.get("data"),curry$1(markLineTransform,n,t,a));t&&(d=filter(d,curry$1(markLineFilter,t)));var Q=createMarkerDimValueGetter(!!t,l);return u.initData(map$1(d,function(Ct){return Ct[0]}),null,Q),c.initData(map$1(d,function(Ct){return Ct[1]}),null,Q),p.initData(map$1(d,function(Ct){return Ct[2]})),p.hasItemOption=!0,{from:u,to:c,line:p}}function install$d(t){t.registerComponentModel(MarkLineModel),t.registerComponentView(MarkLineView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markLine")&&(n.markLine=n.markLine||{})})}var MarkAreaModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,l,u){return new n(a,l,u)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(t,n,a,l){var u=l[0],c=l[1];if(!(!u||!c)){var p=dataTransform(t,u),d=dataTransform(t,c),Q=p.coord,Ct=d.coord;Q[0]=retrieve(Q[0],-1/0),Q[1]=retrieve(Q[1],-1/0),Ct[0]=retrieve(Ct[0],1/0),Ct[1]=retrieve(Ct[1],1/0);var ar=mergeAll([{},p,d]);return ar.coord=[p.coord,d.coord],ar.x0=p.x,ar.y0=p.y,ar.x1=d.x,ar.y1=d.y,ar}};function isInfinity(t){return!isNaN(t)&&!isFinite(t)}function ifMarkAreaHasOnlyDim(t,n,a,l){var u=1-t;return isInfinity(n[u])&&isInfinity(a[u])}function markAreaFilter(t,n){var a=n.coord[0],l=n.coord[1],u={coord:a,x:n.x0,y:n.y0},c={coord:l,x:n.x1,y:n.y1};return isCoordinateSystemType(t,"cartesian2d")?a&&l&&(ifMarkAreaHasOnlyDim(1,a,l)||ifMarkAreaHasOnlyDim(0,a,l))?!0:zoneFilter(t,u,c):dataFilter(t,u)||dataFilter(t,c)}function getSingleMarkerEndPoint(t,n,a,l,u){var c=l.coordinateSystem,p=t.getItemModel(n),d,Q=parsePercent(p.get(a[0]),u.getWidth()),Ct=parsePercent(p.get(a[1]),u.getHeight());if(!isNaN(Q)&&!isNaN(Ct))d=[Q,Ct];else{if(l.getMarkerPosition){var ar=t.getValues(["x0","y0"],n),en=t.getValues(["x1","y1"],n),tn=c.clampData(ar),on=c.clampData(en),cn=[];a[0]==="x0"?cn[0]=tn[0]>on[0]?en[0]:ar[0]:cn[0]=tn[0]>on[0]?ar[0]:en[0],a[1]==="y0"?cn[1]=tn[1]>on[1]?en[1]:ar[1]:cn[1]=tn[1]>on[1]?ar[1]:en[1],d=l.getMarkerPosition(cn,a,!0)}else{var gn=t.get(a[0],n),Cn=t.get(a[1],n),ex=[gn,Cn];c.clampData&&c.clampData(ex,ex),d=c.dataToPoint(ex,!0)}if(isCoordinateSystemType(c,"cartesian2d")){var ix=c.getAxis("x"),ax=c.getAxis("y"),gn=t.get(a[0],n),Cn=t.get(a[1],n);isInfinity(gn)?d[0]=ix.toGlobalCoord(ix.getExtent()[a[0]==="x0"?0:1]):isInfinity(Cn)&&(d[1]=ax.toGlobalCoord(ax.getExtent()[a[1]==="y0"?0:1]))}isNaN(Q)||(d[0]=Q),isNaN(Ct)||(d[1]=Ct)}return d}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,l,u){l.eachSeries(function(c){var p=MarkerModel.getMarkerModelFromSeries(c,"markArea");if(p){var d=p.getData();d.each(function(Q){var Ct=map$1(dimPermutations,function(en){return getSingleMarkerEndPoint(d,Q,en,c,u)});d.setItemLayout(Q,Ct);var ar=d.getItemGraphicEl(Q);ar.setShape("points",Ct)})}},this)},n.prototype.renderSeries=function(a,l,u,c){var p=a.coordinateSystem,d=a.id,Q=a.getData(),Ct=this.markerGroupMap,ar=Ct.get(d)||Ct.set(d,{group:new Group$3});this.group.add(ar.group),this.markKeep(ar);var en=createList(p,a,l);l.setData(en),en.each(function(tn){var on=map$1(dimPermutations,function(hx){return getSingleMarkerEndPoint(en,tn,hx,a,c)}),cn=p.getAxis("x").scale,gn=p.getAxis("y").scale,Cn=cn.getExtent(),ex=gn.getExtent(),ix=[cn.parse(en.get("x0",tn)),cn.parse(en.get("x1",tn))],ax=[gn.parse(en.get("y0",tn)),gn.parse(en.get("y1",tn))];asc$2(ix),asc$2(ax);var ox=!(Cn[0]>ix[1]||Cn[1]<ix[0]||ex[0]>ax[1]||ex[1]<ax[0]),lx=!ox;en.setItemLayout(tn,{points:on,allClipped:lx});var cx=en.getItemModel(tn).getModel("itemStyle").getItemStyle(),dx=getVisualFromData(Q,"color");cx.fill||(cx.fill=dx,isString$1(cx.fill)&&(cx.fill=modifyAlpha(cx.fill,.4))),cx.stroke||(cx.stroke=dx),en.setItemVisual(tn,"style",cx)}),en.diff(inner$2(ar).data).add(function(tn){var on=en.getItemLayout(tn);if(!on.allClipped){var cn=new Polygon({shape:{points:on.points}});en.setItemGraphicEl(tn,cn),ar.group.add(cn)}}).update(function(tn,on){var cn=inner$2(ar).data.getItemGraphicEl(on),gn=en.getItemLayout(tn);gn.allClipped?cn&&ar.group.remove(cn):(cn?updateProps$1(cn,{shape:{points:gn.points}},l,tn):cn=new Polygon({shape:{points:gn.points}}),en.setItemGraphicEl(tn,cn),ar.group.add(cn))}).remove(function(tn){var on=inner$2(ar).data.getItemGraphicEl(tn);ar.group.remove(on)}).execute(),en.eachItemGraphicEl(function(tn,on){var cn=en.getItemModel(on),gn=en.getItemVisual(on,"style");tn.useStyle(en.getItemVisual(on,"style")),setLabelStyle(tn,getLabelStatesModels(cn),{labelFetcher:l,labelDataIndex:on,defaultText:en.getName(on)||"",inheritColor:isString$1(gn.fill)?modifyAlpha(gn.fill,1):"#000"}),setStatesStylesFromModel(tn,cn),toggleHoverEmphasis(tn,null,null,cn.get(["emphasis","disabled"])),getECData(tn).dataModel=l}),inner$2(ar).data=en,ar.group.silent=l.get("silent")||a.get("silent")},n.type="markArea",n}(MarkerView);function createList(t,n,a){var l,u,c=["x0","y0","x1","y1"];if(t){var p=map$1(t&&t.dimensions,function(Ct){var ar=n.getData(),en=ar.getDimensionInfo(ar.mapDimension(Ct))||{};return extend(extend({},en),{name:Ct,ordinalMeta:null})});u=map$1(c,function(Ct,ar){return{name:Ct,type:p[ar%2].type}}),l=new SeriesData(u,a)}else u=[{name:"value",type:"float"}],l=new SeriesData(u,a);var d=map$1(a.get("data"),curry$1(markAreaTransform,n,t,a));t&&(d=filter(d,curry$1(markAreaFilter,t)));var Q=t?function(Ct,ar,en,tn){var on=Ct.coord[Math.floor(tn/2)][tn%2];return parseDataValue(on,u[tn])}:function(Ct,ar,en,tn){return parseDataValue(Ct.value,u[tn])};return l.initData(d,null,Q),l.hasItemOption=!0,l}function install$c(t){t.registerComponentModel(MarkAreaModel),t.registerComponentView(MarkAreaView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markArea")&&(n.markArea=n.markArea||{})})}var getDefaultSelectorOptions=function(t,n){if(n==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(n==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),a.selected=a.selected||{},this._updateSelector(a)},n.prototype.mergeOption=function(a,l){t.prototype.mergeOption.call(this,a,l),this._updateSelector(a)},n.prototype._updateSelector=function(a){var l=a.selector,u=this.ecModel;l===!0&&(l=a.selector=["all","inverse"]),isArray$1(l)&&each$f(l,function(c,p){isString$1(c)&&(c={type:c}),l[p]=merge(c,getDefaultSelectorOptions(u,c.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get("selectedMode")==="single"){for(var l=!1,u=0;u<a.length;u++){var c=a[u].get("name");if(this.isSelected(c)){this.select(c),l=!0;break}}!l&&this.select(a[0].get("name"))}},n.prototype._updateData=function(a){var l=[],u=[];a.eachRawSeries(function(Q){var Ct=Q.name;u.push(Ct);var ar;if(Q.legendVisualProvider){var en=Q.legendVisualProvider,tn=en.getAllNames();a.isSeriesFiltered(Q)||(u=u.concat(tn)),tn.length?l=l.concat(tn):ar=!0}else ar=!0;ar&&isNameSpecified(Q)&&l.push(Q.name)}),this._availableNames=u;var c=this.get("data")||l,p=createHashMap(),d=map$1(c,function(Q){return(isString$1(Q)||isNumber(Q))&&(Q={name:Q}),p.get(Q.name)?null:(p.set(Q.name,!0),new Model(Q,this,this.ecModel))},this);this._data=filter(d,function(Q){return!!Q})},n.prototype.getData=function(){return this._data},n.prototype.select=function(a){var l=this.option.selected,u=this.get("selectedMode");if(u==="single"){var c=this._data;each$f(c,function(p){l[p.get("name")]=!1})}l[a]=!0},n.prototype.unSelect=function(a){this.get("selectedMode")!=="single"&&(this.option.selected[a]=!1)},n.prototype.toggleSelected=function(a){var l=this.option.selected;l.hasOwnProperty(a)||(l[a]=!0),this[l[a]?"unSelect":"select"](a)},n.prototype.allSelect=function(){var a=this._data,l=this.option.selected;each$f(a,function(u){l[u.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var a=this._data,l=this.option.selected;each$f(a,function(u){var c=u.get("name",!0);l.hasOwnProperty(c)||(l[c]=!0),l[c]=!l[c]})},n.prototype.isSelected=function(a){var l=this.option.selected;return!(l.hasOwnProperty(a)&&!l[a])&&indexOf(this._availableNames,a)>=0},n.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!1,a}return n.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(a,l,u){var c=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var p=a.get("align"),d=a.get("orient");(!p||p==="auto")&&(p=a.get("left")==="right"&&d==="vertical"?"right":"left");var Q=a.get("selector",!0),Ct=a.get("selectorPosition",!0);Q&&(!Ct||Ct==="auto")&&(Ct=d==="horizontal"?"end":"start"),this.renderInner(p,a,l,u,Q,d,Ct);var ar=a.getBoxLayoutParams(),en={width:u.getWidth(),height:u.getHeight()},tn=a.get("padding"),on=getLayoutRect(ar,en,tn),cn=this.layoutInner(a,p,on,c,Q,Ct),gn=getLayoutRect(defaults({width:cn.width,height:cn.height},ar),en,tn);this.group.x=gn.x-cn.x,this.group.y=gn.y-cn.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(cn,a))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(a,l,u,c,p,d,Q){var Ct=this.getContentGroup(),ar=createHashMap(),en=l.get("selectedMode"),tn=[];u.eachRawSeries(function(on){!on.get("legendHoverLink")&&tn.push(on.id)}),each$3(l.getData(),function(on,cn){var gn=on.get("name");if(!this.newlineDisabled&&(gn===""||gn===`
`)){var Cn=new Group$1;Cn.newline=!0,Ct.add(Cn);return}var ex=u.getSeriesByName(gn)[0];if(!ar.get(gn))if(ex){var ix=ex.getData(),ax=ix.getVisual("legendLineStyle")||{},ox=ix.getVisual("legendIcon"),lx=ix.getVisual("style"),cx=this._createItem(ex,gn,cn,on,l,a,ax,lx,ox,en,c);cx.on("click",curry(dispatchSelectAction,gn,null,c,tn)).on("mouseover",curry(dispatchHighlightAction,ex.name,null,c,tn)).on("mouseout",curry(dispatchDownplayAction,ex.name,null,c,tn)),u.ssr&&cx.eachChild(function(dx){var hx=getECData(dx);hx.seriesIndex=ex.seriesIndex,hx.dataIndex=cn,hx.ssrType="legend"}),ar.set(gn,!0)}else u.eachRawSeries(function(dx){if(!ar.get(gn)&&dx.legendVisualProvider){var hx=dx.legendVisualProvider;if(!hx.containName(gn))return;var fx=hx.indexOfName(gn),ux=hx.getItemVisual(fx,"style"),gx=hx.getItemVisual(fx,"legendIcon"),yx=parse(ux.fill);yx&&yx[3]===0&&(yx[3]=.2,ux=extend(extend({},ux),{fill:stringify(yx,"rgba")}));var _x=this._createItem(dx,gn,cn,on,l,a,{},ux,gx,en,c);_x.on("click",curry(dispatchSelectAction,null,gn,c,tn)).on("mouseover",curry(dispatchHighlightAction,null,gn,c,tn)).on("mouseout",curry(dispatchDownplayAction,null,gn,c,tn)),u.ssr&&_x.eachChild(function(vx){var bx=getECData(vx);bx.seriesIndex=dx.seriesIndex,bx.dataIndex=cn,bx.ssrType="legend"}),ar.set(gn,!0)}},this)},this),p&&this._createSelector(p,l,c,d,Q)},n.prototype._createSelector=function(a,l,u,c,p){var d=this.getSelectorGroup();each$3(a,function(Ct){var ar=Ct.type,en=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){u.dispatchAction({type:ar==="all"?"legendAllSelect":"legendInverseSelect",legendId:l.id})}});d.add(en);var tn=l.getModel("selectorLabel"),on=l.getModel(["emphasis","selectorLabel"]);setLabelStyle(en,{normal:tn,emphasis:on},{defaultText:Ct.title}),enableHoverEmphasis(en)})},n.prototype._createItem=function(a,l,u,c,p,d,Q,Ct,ar,en,tn){var on=a.visualDrawType,cn=p.get("itemWidth"),gn=p.get("itemHeight"),Cn=p.isSelected(l),ex=c.get("symbolRotate"),ix=c.get("symbolKeepAspect"),ax=c.get("icon");ar=ax||ar||"roundRect";var ox=getLegendStyle(ar,c,Q,Ct,on,Cn,tn),lx=new Group$1,cx=c.getModel("textStyle");if(isFunction$1(a.getLegendIcon)&&(!ax||ax==="inherit"))lx.add(a.getLegendIcon({itemWidth:cn,itemHeight:gn,icon:ar,iconRotate:ex,itemStyle:ox.itemStyle,lineStyle:ox.lineStyle,symbolKeepAspect:ix}));else{var dx=ax==="inherit"&&a.getData().getVisual("symbol")?ex==="inherit"?a.getData().getVisual("symbolRotate"):ex:0;lx.add(getDefaultLegendIcon({itemWidth:cn,itemHeight:gn,icon:ar,iconRotate:dx,itemStyle:ox.itemStyle,symbolKeepAspect:ix}))}var hx=d==="left"?cn+5:-5,fx=d,ux=p.get("formatter"),gx=l;isString$1(ux)&&ux?gx=ux.replace("{name}",l??""):isFunction$1(ux)&&(gx=ux(l));var yx=Cn?cx.getTextColor():c.get("inactiveColor");lx.add(new ZRText({style:createTextStyle$1(cx,{text:gx,x:hx,y:gn/2,fill:yx,align:fx,verticalAlign:"middle"},{inheritColor:yx})}));var _x=new Rect$2({shape:lx.getBoundingRect(),style:{fill:"transparent"}}),vx=c.getModel("tooltip");return vx.get("show")&&setTooltipConfig({el:_x,componentModel:p,itemName:l,itemTooltipOption:vx.option}),lx.add(_x),lx.eachChild(function(bx){bx.silent=!0}),_x.silent=!en,this.getContentGroup().add(lx),enableHoverEmphasis(lx),lx.__legendDataIndex=u,lx},n.prototype.layoutInner=function(a,l,u,c,p,d){var Q=this.getContentGroup(),Ct=this.getSelectorGroup();box(a.get("orient"),Q,a.get("itemGap"),u.width,u.height);var ar=Q.getBoundingRect(),en=[-ar.x,-ar.y];if(Ct.markRedraw(),Q.markRedraw(),p){box("horizontal",Ct,a.get("selectorItemGap",!0));var tn=Ct.getBoundingRect(),on=[-tn.x,-tn.y],cn=a.get("selectorButtonGap",!0),gn=a.getOrient().index,Cn=gn===0?"width":"height",ex=gn===0?"height":"width",ix=gn===0?"y":"x";d==="end"?on[gn]+=ar[Cn]+cn:en[gn]+=tn[Cn]+cn,on[1-gn]+=ar[ex]/2-tn[ex]/2,Ct.x=on[0],Ct.y=on[1],Q.x=en[0],Q.y=en[1];var ax={x:0,y:0};return ax[Cn]=ar[Cn]+cn+tn[Cn],ax[ex]=Math.max(ar[ex],tn[ex]),ax[ix]=Math.min(0,tn[ix]+on[1-gn]),ax}else return Q.x=en[0],Q.y=en[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(ComponentView);function getLegendStyle(t,n,a,l,u,c,p){function d(Cn,ex){Cn.lineWidth==="auto"&&(Cn.lineWidth=ex.lineWidth>0?2:0),each$3(Cn,function(ix,ax){Cn[ax]==="inherit"&&(Cn[ax]=ex[ax])})}var Q=n.getModel("itemStyle"),Ct=Q.getItemStyle(),ar=t.lastIndexOf("empty",0)===0?"fill":"stroke",en=Q.getShallow("decal");Ct.decal=!en||en==="inherit"?l.decal:createOrUpdatePatternFromDecal(en,p),Ct.fill==="inherit"&&(Ct.fill=l[u]),Ct.stroke==="inherit"&&(Ct.stroke=l[ar]),Ct.opacity==="inherit"&&(Ct.opacity=(u==="fill"?l:a).opacity),d(Ct,l);var tn=n.getModel("lineStyle"),on=tn.getLineStyle();if(d(on,a),Ct.fill==="auto"&&(Ct.fill=l.fill),Ct.stroke==="auto"&&(Ct.stroke=l.fill),on.stroke==="auto"&&(on.stroke=l.fill),!c){var cn=n.get("inactiveBorderWidth"),gn=Ct[ar];Ct.lineWidth=cn==="auto"?l.lineWidth>0&&gn?2:0:Ct.lineWidth,Ct.fill=n.get("inactiveColor"),Ct.stroke=n.get("inactiveBorderColor"),on.stroke=tn.get("inactiveColor"),on.lineWidth=tn.get("inactiveWidth")}return{itemStyle:Ct,lineStyle:on}}function getDefaultLegendIcon(t){var n=t.icon||"roundRect",a=createSymbol$1(n,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return a.setStyle(t.itemStyle),a.rotation=(t.iconRotate||0)*Math.PI/180,a.setOrigin([t.itemWidth/2,t.itemHeight/2]),n.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}function dispatchSelectAction(t,n,a,l){dispatchDownplayAction(t,n,a,l),a.dispatchAction({type:"legendToggleSelect",name:t??n}),dispatchHighlightAction(t,n,a,l)}function isUseHoverLayer(t){for(var n=t.getZr().storage.getDisplayList(),a,l=0,u=n.length;l<u&&!(a=n[l].states.emphasis);)l++;return a&&a.hoverLayer}function dispatchHighlightAction(t,n,a,l){isUseHoverLayer(a)||a.dispatchAction({type:"highlight",seriesName:t,name:n,excludeSeriesId:l})}function dispatchDownplayAction(t,n,a,l){isUseHoverLayer(a)||a.dispatchAction({type:"downplay",seriesName:t,name:n,excludeSeriesId:l})}function legendFilter(t){var n=t.findComponents({mainType:"legend"});n&&n.length&&t.filterSeries(function(a){for(var l=0;l<n.length;l++)if(!n[l].isSelected(a.name))return!1;return!0})}function legendSelectActionHandler(t,n,a){var l=t==="allSelect"||t==="inverseSelect",u={},c=[];a.eachComponent({mainType:"legend",query:n},function(d){l?d[t]():d[t](n.name),makeSelectedMap(d,u),c.push(d.componentIndex)});var p={};return a.eachComponent("legend",function(d){each$f(u,function(Q,Ct){d[Q?"select":"unSelect"](Ct)}),makeSelectedMap(d,p)}),l?{selected:p,legendIndex:c}:{name:n.name,selected:p}}function makeSelectedMap(t,n){var a=n||{};return each$f(t.getData(),function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=t.isSelected(u);hasOwn(a,u)?a[u]=a[u]&&c:a[u]=c}}),a}function installLegendAction(t){t.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),t.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),t.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(t){t.registerComponentModel(LegendModel),t.registerComponentView(LegendView),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),t.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(t)}var ScrollableLegendModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},n.prototype.init=function(a,l,u){var c=getLayoutParams(a);t.prototype.init.call(this,a,l,u),mergeAndNormalizeLayoutParams(this,a,c)},n.prototype.mergeOption=function(a,l){t.prototype.mergeOption.call(this,a,l),mergeAndNormalizeLayoutParams(this,this.option,a)},n.type="legend.scroll",n.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n}(LegendModel);function mergeAndNormalizeLayoutParams(t,n,a){var l=t.getOrient(),u=[1,1];u[l.index]=0,mergeLayoutParam(n,a,{type:"box",ignoreSize:!!u})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!0,a._currentIndex=0,a}return n.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},n.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(a,l,u,c,p,d,Q){var Ct=this;t.prototype.renderInner.call(this,a,l,u,c,p,d,Q);var ar=this._controllerGroup,en=l.get("pageIconSize",!0),tn=isArray$1(en)?en:[en,en];cn("pagePrev",0);var on=l.getModel("pageTextStyle");ar.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:on.getTextColor(),font:on.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),cn("pageNext",1);function cn(gn,Cn){var ex=gn+"DataIndex",ix=createIcon(l.get("pageIcons",!0)[l.getOrient().name][Cn],{onclick:bind$1(Ct._pageGo,Ct,ex,l,c)},{x:-tn[0]/2,y:-tn[1]/2,width:tn[0],height:tn[1]});ix.name=gn,ar.add(ix)}},n.prototype.layoutInner=function(a,l,u,c,p,d){var Q=this.getSelectorGroup(),Ct=a.getOrient().index,ar=WH[Ct],en=XY[Ct],tn=WH[1-Ct],on=XY[1-Ct];p&&box("horizontal",Q,a.get("selectorItemGap",!0));var cn=a.get("selectorButtonGap",!0),gn=Q.getBoundingRect(),Cn=[-gn.x,-gn.y],ex=clone$4(u);p&&(ex[ar]=u[ar]-gn[ar]-cn);var ix=this._layoutContentAndController(a,c,ex,Ct,ar,tn,on,en);if(p){if(d==="end")Cn[Ct]+=ix[ar]+cn;else{var ax=gn[ar]+cn;Cn[Ct]-=ax,ix[en]-=ax}ix[ar]+=gn[ar]+cn,Cn[1-Ct]+=ix[on]+ix[tn]/2-gn[tn]/2,ix[tn]=Math.max(ix[tn],gn[tn]),ix[on]=Math.min(ix[on],gn[on]+Cn[1-Ct]),Q.x=Cn[0],Q.y=Cn[1],Q.markRedraw()}return ix},n.prototype._layoutContentAndController=function(a,l,u,c,p,d,Q,Ct){var ar=this.getContentGroup(),en=this._containerGroup,tn=this._controllerGroup;box(a.get("orient"),ar,a.get("itemGap"),c?u.width:null,c?null:u.height),box("horizontal",tn,a.get("pageButtonItemGap",!0));var on=ar.getBoundingRect(),cn=tn.getBoundingRect(),gn=this._showController=on[p]>u[p],Cn=[-on.x,-on.y];l||(Cn[c]=ar[Ct]);var ex=[0,0],ix=[-cn.x,-cn.y],ax=retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));if(gn){var ox=a.get("pageButtonPosition",!0);ox==="end"?ix[c]+=u[p]-cn[p]:ex[c]+=cn[p]+ax}ix[1-c]+=on[d]/2-cn[d]/2,ar.setPosition(Cn),en.setPosition(ex),tn.setPosition(ix);var lx={x:0,y:0};if(lx[p]=gn?u[p]:on[p],lx[d]=Math.max(on[d],cn[d]),lx[Q]=Math.min(0,cn[Q]+ix[1-c]),en.__rectSize=u[p],gn){var cx={x:0,y:0};cx[p]=Math.max(u[p]-cn[p]-ax,0),cx[d]=lx[d],en.setClipPath(new Rect$2({shape:cx})),en.__rectSize=cx[p]}else tn.eachChild(function(hx){hx.attr({invisible:!0,silent:!0})});var dx=this._getPageInfo(a);return dx.pageIndex!=null&&updateProps$1(ar,{x:dx.contentPosition[0],y:dx.contentPosition[1]},gn?a:null),this._updatePageInfoView(a,dx),lx},n.prototype._pageGo=function(a,l,u){var c=this._getPageInfo(l)[a];c!=null&&u.dispatchAction({type:"legendScroll",scrollDataIndex:c,legendId:l.id})},n.prototype._updatePageInfoView=function(a,l){var u=this._controllerGroup;each$f(["pagePrev","pageNext"],function(ar){var en=ar+"DataIndex",tn=l[en]!=null,on=u.childOfName(ar);on&&(on.setStyle("fill",tn?a.get("pageIconColor",!0):a.get("pageIconInactiveColor",!0)),on.cursor=tn?"pointer":"default")});var c=u.childOfName("pageText"),p=a.get("pageFormatter"),d=l.pageIndex,Q=d!=null?d+1:0,Ct=l.pageCount;c&&p&&c.setStyle("text",isString$1(p)?p.replace("{current}",Q==null?"":Q+"").replace("{total}",Ct==null?"":Ct+""):p({current:Q,total:Ct}))},n.prototype._getPageInfo=function(a){var l=a.get("scrollDataIndex",!0),u=this.getContentGroup(),c=this._containerGroup.__rectSize,p=a.getOrient().index,d=WH[p],Q=XY[p],Ct=this._findTargetItemIndex(l),ar=u.children(),en=ar[Ct],tn=ar.length,on=tn?1:0,cn={contentPosition:[u.x,u.y],pageCount:on,pageIndex:on-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!en)return cn;var gn=ox(en);cn.contentPosition[p]=-gn.s;for(var Cn=Ct+1,ex=gn,ix=gn,ax=null;Cn<=tn;++Cn)ax=ox(ar[Cn]),(!ax&&ix.e>ex.s+c||ax&&!lx(ax,ex.s))&&(ix.i>ex.i?ex=ix:ex=ax,ex&&(cn.pageNextDataIndex==null&&(cn.pageNextDataIndex=ex.i),++cn.pageCount)),ix=ax;for(var Cn=Ct-1,ex=gn,ix=gn,ax=null;Cn>=-1;--Cn)ax=ox(ar[Cn]),(!ax||!lx(ix,ax.s))&&ex.i<ix.i&&(ix=ex,cn.pagePrevDataIndex==null&&(cn.pagePrevDataIndex=ex.i),++cn.pageCount,++cn.pageIndex),ex=ax;return cn;function ox(cx){if(cx){var dx=cx.getBoundingRect(),hx=dx[Q]+cx[Q];return{s:hx,e:hx+dx[d],i:cx.__legendDataIndex}}}function lx(cx,dx){return cx.e>=dx&&cx.s<=dx+c}},n.prototype._findTargetItemIndex=function(a){if(!this._showController)return 0;var l,u=this.getContentGroup(),c;return u.eachChild(function(p,d){var Q=p.__legendDataIndex;c==null&&Q!=null&&(c=d),Q===a&&(l=d)}),l??c},n.type="legend.scroll",n}(LegendView);function installScrollableLegendAction(t){t.registerAction("legendScroll","legendscroll",function(n,a){var l=n.scrollDataIndex;l!=null&&a.eachComponent({mainType:"legend",subType:"scroll",query:n},function(u){u.setScrollDataIndex(l)})})}function install$a(t){use(install$b),t.registerComponentModel(ScrollableLegendModel),t.registerComponentView(ScrollableLegendView),installScrollableLegendAction(t)}function install$9(t){use(install$b),use(install$a)}var InsideZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.inside",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(t,n,a){inner$1(t).coordSysRecordMap.each(function(l){var u=l.dataZoomInfoMap.get(n.uid);u&&(u.getRange=a)})}function disposeCoordSysRecordIfNeeded(t,n){for(var a=inner$1(t).coordSysRecordMap,l=a.keys(),u=0;u<l.length;u++){var c=l[u],p=a.get(c),d=p.dataZoomInfoMap;if(d){var Q=n.uid,Ct=d.get(Q);Ct&&(d.removeKey(Q),d.keys().length||disposeCoordSysRecord(a,p))}}}function disposeCoordSysRecord(t,n){if(n){t.removeKey(n.model.uid);var a=n.controller;a&&a.dispose()}}function createCoordSysRecord(t,n){var a={model:n,containsPoint:curry$1(containsPoint,n),dispatchAction:curry$1(dispatchAction,t),dataZoomInfoMap:null,controller:null},l=a.controller=new RoamController(t.getZr());return each$f(["pan","zoom","scrollMove"],function(u){l.on(u,function(c){var p=[];a.dataZoomInfoMap.each(function(d){if(c.isAvailableBehavior(d.model.option)){var Q=(d.getRange||{})[u],Ct=Q&&Q(d.dzReferCoordSysInfo,a.model.mainType,a.controller,c);!d.model.get("disabled",!0)&&Ct&&p.push({dataZoomId:d.model.id,start:Ct[0],end:Ct[1]})}}),p.length&&a.dispatchAction(p)})}),a}function dispatchAction(t,n){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function containsPoint(t,n,a,l){return t.coordinateSystem.containPoint([a,l])}function mergeControllerParams(t){var n,a="type_",l={type_true:2,type_move:1,type_false:0,type_undefined:-1},u=!0;return t.each(function(c){var p=c.model,d=p.get("disabled",!0)?!1:p.get("zoomLock",!0)?"move":!0;l[a+d]>l[a+n]&&(n=d),u=u&&p.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!u}}}function installDataZoomRoamProcessor(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(n,a){var l=inner$1(a),u=l.coordSysRecordMap||(l.coordSysRecordMap=createHashMap());u.each(function(c){c.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(c){var p=collectReferCoordSysModelInfo(c);each$f(p.infoList,function(d){var Q=d.model.uid,Ct=u.get(Q)||u.set(Q,createCoordSysRecord(a,d.model)),ar=Ct.dataZoomInfoMap||(Ct.dataZoomInfoMap=createHashMap());ar.set(c.uid,{dzReferCoordSysInfo:d,model:c,getRange:null})})}),u.each(function(c){var p=c.controller,d,Q=c.dataZoomInfoMap;if(Q){var Ct=Q.keys()[0];Ct!=null&&(d=Q.get(Ct))}if(!d){disposeCoordSysRecord(u,c);return}var ar=mergeControllerParams(Q);p.enable(ar.controlType,ar.opt),p.setPointerChecker(c.containsPoint),createOrUpdate(c,"dispatchAction",d.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return n.prototype.render=function(a,l,u){if(t.prototype.render.apply(this,arguments),a.noTarget()){this._clear();return}this.range=a.getPercentRange(),setViewInfoToCoordSysRecord(u,a,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n}(DataZoomView),getRangeHandlers={zoom:function(t,n,a,l){var u=this.range,c=u.slice(),p=t.axisModels[0];if(p){var d=getDirectionInfo[n](null,[l.originX,l.originY],p,a,t),Q=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(c[1]-c[0])+c[0],Ct=Math.max(1/l.scale,0);c[0]=(c[0]-Q)*Ct+Q,c[1]=(c[1]-Q)*Ct+Q;var ar=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,c,[0,100],0,ar.minSpan,ar.maxSpan),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}},pan:makeMover(function(t,n,a,l,u,c){var p=getDirectionInfo[l]([c.oldX,c.oldY],[c.newX,c.newY],n,u,a);return p.signal*(t[1]-t[0])*p.pixel/p.pixelLength}),scrollMove:makeMover(function(t,n,a,l,u,c){var p=getDirectionInfo[l]([0,0],[c.scrollDelta,c.scrollDelta],n,u,a);return p.signal*(t[1]-t[0])*c.scrollDelta})};function makeMover(t){return function(n,a,l,u){var c=this.range,p=c.slice(),d=n.axisModels[0];if(d){var Q=t(p,d,n,a,l,u);if(sliderMove(Q,p,[0,100],"all"),this.range=p,c[0]!==p[0]||c[1]!==p[1])return p}}}var getDirectionInfo={grid:function(t,n,a,l,u){var c=a.axis,p={},d=u.model.coordinateSystem.getRect();return t=t||[0,0],c.dim==="x"?(p.pixel=n[0]-t[0],p.pixelLength=d.width,p.pixelStart=d.x,p.signal=c.inverse?1:-1):(p.pixel=n[1]-t[1],p.pixelLength=d.height,p.pixelStart=d.y,p.signal=c.inverse?-1:1),p},polar:function(t,n,a,l,u){var c=a.axis,p={},d=u.model.coordinateSystem,Q=d.getRadiusAxis().getExtent(),Ct=d.getAngleAxis().getExtent();return t=t?d.pointToCoord(t):[0,0],n=d.pointToCoord(n),a.mainType==="radiusAxis"?(p.pixel=n[0]-t[0],p.pixelLength=Q[1]-Q[0],p.pixelStart=Q[0],p.signal=c.inverse?1:-1):(p.pixel=n[1]-t[1],p.pixelLength=Ct[1]-Ct[0],p.pixelStart=Ct[0],p.signal=c.inverse?-1:1),p},singleAxis:function(t,n,a,l,u){var c=a.axis,p=u.model.coordinateSystem.getRect(),d={};return t=t||[0,0],c.orient==="horizontal"?(d.pixel=n[0]-t[0],d.pixelLength=p.width,d.pixelStart=p.x,d.signal=c.inverse?1:-1):(d.pixel=n[1]-t[1],d.pixelLength=p.height,d.pixelStart=p.y,d.signal=c.inverse?-1:1),d}};function install$8(t){installCommon$1(t),t.registerComponentModel(InsideZoomModel),t.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(t)}var SliderZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._displayables={},a}return n.prototype.init=function(a,l){this.api=l,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},n.prototype.render=function(a,l,u,c){if(t.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),a.get("show")===!1){this.group.removeAll();return}if(a.noTarget()){this._clear(),this.group.removeAll();return}(!c||c.type!=="dataZoom"||c.from!==this.uid)&&this._buildView(),this._updateView()},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var l=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(l),this._positionGroup()},n.prototype._resetLocation=function(){var a=this.dataZoomModel,l=this.api,u=a.get("brushSelect"),c=u?DEFAULT_MOVE_HANDLE_SIZE:0,p=this._findCoordRect(),d={width:l.getWidth(),height:l.getHeight()},Q=this._orient===HORIZONTAL?{right:d.width-p.x-p.width,top:d.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-c,width:p.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:p.y,width:DEFAULT_FILLER_SIZE,height:p.height},Ct=getLayoutParams(a.option);each$f(["right","top","width","height"],function(en){Ct[en]==="ph"&&(Ct[en]=Q[en])});var ar=getLayoutRect(Ct,d);this._location={x:ar.x,y:ar.y},this._size=[ar.width,ar.height],this._orient===VERTICAL&&this._size.reverse()},n.prototype._positionGroup=function(){var a=this.group,l=this._location,u=this._orient,c=this.dataZoomModel.getFirstTargetAxisModel(),p=c&&c.get("inverse"),d=this._displayables.sliderGroup,Q=(this._dataShadowInfo||{}).otherAxisInverse;d.attr(u===HORIZONTAL&&!p?{scaleY:Q?1:-1,scaleX:1}:u===HORIZONTAL&&p?{scaleY:Q?1:-1,scaleX:-1}:u===VERTICAL&&!p?{scaleY:Q?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:Q?-1:1,scaleX:-1,rotation:Math.PI/2});var Ct=a.getBoundingRect([d]);a.x=l.x-Ct.x,a.y=l.y-Ct.y,a.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var a=this.dataZoomModel,l=this._size,u=this._displayables.sliderGroup,c=a.get("brushSelect");u.add(new Rect({silent:!0,shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var p=new Rect({shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),d=this.api.getZr();c?(p.on("mousedown",this._onBrushStart,this),p.cursor="crosshair",d.on("mousemove",this._onBrush),d.on("mouseup",this._onBrushEnd)):(d.off("mousemove",this._onBrush),d.off("mouseup",this._onBrushEnd)),u.add(p)},n.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!a)return;var l=this._size,u=this._shadowSize||[],c=a.series,p=c.getRawData(),d=c.getShadowDim&&c.getShadowDim(),Q=d&&p.getDimensionInfo(d)?c.getShadowDim():a.otherDim;if(Q==null)return;var Ct=this._shadowPolygonPts,ar=this._shadowPolylinePts;if(p!==this._shadowData||Q!==this._shadowDim||l[0]!==u[0]||l[1]!==u[1]){var en=p.getDataExtent(Q),tn=(en[1]-en[0])*.3;en=[en[0]-tn,en[1]+tn];var on=[0,l[1]],cn=[0,l[0]],gn=[[l[0],0],[0,0]],Cn=[],ex=cn[1]/(p.count()-1),ix=0,ax=Math.round(p.count()/l[0]),ox;p.each([Q],function(fx,ux){if(ax>0&&ux%ax){ix+=ex;return}var gx=fx==null||isNaN(fx)||fx==="",yx=gx?0:linearMap$2(fx,en,on,!0);gx&&!ox&&ux?(gn.push([gn[gn.length-1][0],0]),Cn.push([Cn[Cn.length-1][0],0])):!gx&&ox&&(gn.push([ix,0]),Cn.push([ix,0])),gn.push([ix,yx]),Cn.push([ix,yx]),ix+=ex,ox=gx}),Ct=this._shadowPolygonPts=gn,ar=this._shadowPolylinePts=Cn}this._shadowData=p,this._shadowDim=Q,this._shadowSize=[l[0],l[1]];var lx=this.dataZoomModel;function cx(fx){var ux=lx.getModel(fx?"selectedDataBackground":"dataBackground"),gx=new Group$3,yx=new Polygon({shape:{points:Ct},segmentIgnoreThreshold:1,style:ux.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),_x=new Polyline$1({shape:{points:ar},segmentIgnoreThreshold:1,style:ux.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return gx.add(yx),gx.add(_x),gx}for(var dx=0;dx<3;dx++){var hx=cx(dx===1);this._displayables.sliderGroup.add(hx),this._displayables.dataShadowSegs.push(hx)}},n.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,l=a.get("showDataShadow");if(l!==!1){var u,c=this.ecModel;return a.eachTargetAxis(function(p,d){var Q=a.getAxisProxy(p,d).getTargetSeriesModels();each$f(Q,function(Ct){if(!u&&!(l!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,Ct.get("type"))<0)){var ar=c.getComponent(getAxisMainType(p),d).axis,en=getOtherDim(p),tn,on=Ct.coordinateSystem;en!=null&&on.getOtherAxis&&(tn=on.getOtherAxis(ar).inverse),en=Ct.getData().mapDimension(en),u={thisAxis:ar,series:Ct,thisDim:p,otherDim:en,otherAxisInverse:tn}}},this)},this),u}},n.prototype._renderHandle=function(){var a=this.group,l=this._displayables,u=l.handles=[null,null],c=l.handleLabels=[null,null],p=this._displayables.sliderGroup,d=this._size,Q=this.dataZoomModel,Ct=this.api,ar=Q.get("borderRadius")||0,en=Q.get("brushSelect"),tn=l.filler=new Rect({silent:en,style:{fill:Q.get("fillerColor")},textConfig:{position:"inside"}});p.add(tn),p.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:d[0],height:d[1],r:ar},style:{stroke:Q.get("dataBackgroundColor")||Q.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(ax){var ox=Q.get("handleIcon");!symbolBuildProxies[ox]&&ox.indexOf("path://")<0&&ox.indexOf("image://")<0&&(ox="path://"+ox);var lx=createSymbol$1(ox,-1,0,2,2,null,!0);lx.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,ax),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var cx=lx.getBoundingRect(),dx=Q.get("handleSize");this._handleHeight=parsePercent(dx,this._size[1]),this._handleWidth=cx.width/cx.height*this._handleHeight,lx.setStyle(Q.getModel("handleStyle").getItemStyle()),lx.style.strokeNoScale=!0,lx.rectHover=!0,lx.ensureState("emphasis").style=Q.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(lx);var hx=Q.get("handleColor");hx!=null&&(lx.style.fill=hx),p.add(u[ax]=lx);var fx=Q.getModel("textStyle"),ux=Q.get("handleLabel")||{},gx=ux.show||!1;a.add(c[ax]=new ZRText({silent:!0,invisible:!gx,style:createTextStyle$1(fx,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:fx.getTextColor(),font:fx.getFont()}),z2:10}))},this);var on=tn;if(en){var cn=parsePercent(Q.get("moveHandleSize"),d[1]),gn=l.moveHandle=new Rect$2({style:Q.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:d[1]-.5,height:cn}}),Cn=cn*.8,ex=l.moveHandleIcon=createSymbol$1(Q.get("moveHandleIcon"),-Cn/2,-Cn/2,Cn,Cn,"#fff",!0);ex.silent=!0,ex.y=d[1]+cn/2-.5,gn.ensureState("emphasis").style=Q.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var ix=Math.min(d[1]/2,Math.max(cn,10));on=l.moveZone=new Rect$2({invisible:!0,shape:{y:d[1]-ix,height:cn+ix}}),on.on("mouseover",function(){Ct.enterEmphasis(gn)}).on("mouseout",function(){Ct.leaveEmphasis(gn)}),p.add(gn),p.add(ex),p.add(on)}on.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),l=this._getViewExtent();this._handleEnds=[linearMap$2(a[0],[0,100],l,!0),linearMap$2(a[1],[0,100],l,!0)]},n.prototype._updateInterval=function(a,l){var u=this.dataZoomModel,c=this._handleEnds,p=this._getViewExtent(),d=u.findRepresentativeAxisProxy().getMinMaxSpan(),Q=[0,100];sliderMove(l,c,p,u.get("zoomLock")?"all":a,d.minSpan!=null?linearMap$2(d.minSpan,Q,p,!0):null,d.maxSpan!=null?linearMap$2(d.maxSpan,Q,p,!0):null);var Ct=this._range,ar=this._range=asc$2([linearMap$2(c[0],p,Q,!0),linearMap$2(c[1],p,Q,!0)]);return!Ct||Ct[0]!==ar[0]||Ct[1]!==ar[1]},n.prototype._updateView=function(a){var l=this._displayables,u=this._handleEnds,c=asc$2(u.slice()),p=this._size;each$f([0,1],function(on){var cn=l.handles[on],gn=this._handleHeight;cn.attr({scaleX:gn/2,scaleY:gn/2,x:u[on]+(on?-1:1),y:p[1]/2-gn/2})},this),l.filler.setShape({x:c[0],y:0,width:c[1]-c[0],height:p[1]});var d={x:c[0],width:c[1]-c[0]};l.moveHandle&&(l.moveHandle.setShape(d),l.moveZone.setShape(d),l.moveZone.getBoundingRect(),l.moveHandleIcon&&l.moveHandleIcon.attr("x",d.x+d.width/2));for(var Q=l.dataShadowSegs,Ct=[0,c[0],c[1],p[0]],ar=0;ar<Q.length;ar++){var en=Q[ar],tn=en.getClipPath();tn||(tn=new Rect$2,en.setClipPath(tn)),tn.setShape({x:Ct[ar],y:0,width:Ct[ar+1]-Ct[ar],height:p[1]})}this._updateDataInfo(a)},n.prototype._updateDataInfo=function(a){var l=this.dataZoomModel,u=this._displayables,c=u.handleLabels,p=this._orient,d=["",""];if(l.get("showDetail")){var Q=l.findRepresentativeAxisProxy();if(Q){var Ct=Q.getAxisModel().axis,ar=this._range,en=a?Q.calculateDataWindow({start:ar[0],end:ar[1]}).valueWindow:Q.getDataValueWindow();d=[this._formatLabel(en[0],Ct),this._formatLabel(en[1],Ct)]}}var tn=asc$2(this._handleEnds.slice());on.call(this,0),on.call(this,1);function on(cn){var gn=getTransform$1(u.handles[cn].parent,this.group),Cn=transformDirection(cn===0?"right":"left",gn),ex=this._handleWidth/2+LABEL_GAP,ix=applyTransform([tn[cn]+(cn===0?-ex:ex),this._size[1]/2],gn);c[cn].setStyle({x:ix[0],y:ix[1],verticalAlign:p===HORIZONTAL?"middle":Cn,align:p===HORIZONTAL?Cn:"center",text:d[cn]})}},n.prototype._formatLabel=function(a,l){var u=this.dataZoomModel,c=u.get("labelFormatter"),p=u.get("labelPrecision");(p==null||p==="auto")&&(p=l.getPixelPrecision());var d=a==null||isNaN(a)?"":l.type==="category"||l.type==="time"?l.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(p,20));return isFunction$1(c)?c(a,d):isString$1(c)?c.replace("{value}",d):d},n.prototype._showDataInfo=function(a){var l=this.dataZoomModel.get("handleLabel")||{},u=l.show||!1,c=this.dataZoomModel.getModel(["emphasis","handleLabel"]),p=c.get("show")||!1,d=a||this._dragging?p:u,Q=this._displayables,Ct=Q.handleLabels;Ct[0].attr("invisible",!d),Ct[1].attr("invisible",!d),Q.moveHandle&&this.api[d?"enterEmphasis":"leaveEmphasis"](Q.moveHandle,1)},n.prototype._onDragMove=function(a,l,u,c){this._dragging=!0,stop(c.event);var p=this._displayables.sliderGroup.getLocalTransform(),d=applyTransform([l,u],p,!0),Q=this._updateInterval(a,d[0]),Ct=this.dataZoomModel.get("realtime");this._updateView(!Ct),Q&&Ct&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var a=this.dataZoomModel.get("realtime");!a&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(a){var l=this._size,u=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(u[0]<0||u[0]>l[0]||u[1]<0||u[1]>l[1])){var c=this._handleEnds,p=(c[0]+c[1])/2,d=this._updateInterval("all",u[0]-p);this._updateView(),d&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(a){var l=a.offsetX,u=a.offsetY;this._brushStart=new Point(l,u),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(a){if(this._brushing){var l=this._displayables.brushRect;if(this._brushing=!1,!!l){l.attr("ignore",!0);var u=l.shape,c=+new Date;if(!(c-this._brushStartTime<200&&Math.abs(u.width)<5)){var p=this._getViewExtent(),d=[0,100];this._range=asc$2([linearMap$2(u.x,p,d,!0),linearMap$2(u.x+u.width,p,d,!0)]),this._handleEnds=[u.x,u.x+u.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(a){this._brushing&&(stop(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},n.prototype._updateBrushRect=function(a,l){var u=this._displayables,c=this.dataZoomModel,p=u.brushRect;p||(p=u.brushRect=new Rect({silent:!0,style:c.getModel("brushStyle").getItemStyle()}),u.sliderGroup.add(p)),p.attr("ignore",!1);var d=this._brushStart,Q=this._displayables.sliderGroup,Ct=Q.transformCoordToLocal(a,l),ar=Q.transformCoordToLocal(d.x,d.y),en=this._size;Ct[0]=Math.max(Math.min(en[0],Ct[0]),0),p.setShape({x:ar[0],y:0,width:Ct[0]-ar[0],height:en[1]})},n.prototype._dispatchZoomAction=function(a){var l=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?REALTIME_ANIMATION_CONFIG:null,start:l[0],end:l[1]})},n.prototype._findCoordRect=function(){var a,l=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!a&&l.length){var u=l[0].model.coordinateSystem;a=u.getRect&&u.getRect()}if(!a){var c=this.api.getWidth(),p=this.api.getHeight();a={x:c*.2,y:p*.2,width:c*.6,height:p*.6}}return a},n.type="dataZoom.slider",n}(DataZoomView);function getOtherDim(t){var n={x:"y",y:"x",radius:"angle",angle:"radius"};return n[t]}function getCursor$1(t){return t==="vertical"?"ns-resize":"ew-resize"}function install$7(t){t.registerComponentModel(SliderZoomModel),t.registerComponentView(SliderZoomView),installCommon$1(t)}function install$6(t){use(install$8),use(install$7)}var visualDefault={get:function(t,n,a){var l=clone$4((defaultOption[t]||{})[n]);return a&&isArray$1(l)?l[l.length-1]:l}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return n.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u)},n.prototype.optionUpdated=function(a,l){var u=this.option;!l&&replaceVisualOption(u,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(a){var l=this.stateList;a=bind$1(a,this),this.controllerVisuals=createVisualMappings(this.option.controller,l,a),this.targetVisuals=createVisualMappings(this.option.target,l,a)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,l=[];return a==null||a==="all"?this.ecModel.eachSeries(function(u,c){l.push(c)}):l=normalizeToArray(a),l},n.prototype.eachTargetSeries=function(a,l){each$f(this.getTargetSeriesIndices(),function(u){var c=this.ecModel.getSeriesByIndex(u);c&&a.call(l,c)},this)},n.prototype.isTargetSeries=function(a){var l=!1;return this.eachTargetSeries(function(u){u===a&&(l=!0)}),l},n.prototype.formatValueText=function(a,l,u){var c=this.option,p=c.precision,d=this.dataBound,Q=c.formatter,Ct;u=u||["<",">"],isArray$1(a)&&(a=a.slice(),Ct=!0);var ar=l?a:Ct?[en(a[0]),en(a[1])]:en(a);if(isString$1(Q))return Q.replace("{value}",Ct?ar[0]:ar).replace("{value2}",Ct?ar[1]:ar);if(isFunction$1(Q))return Ct?Q(a[0],a[1]):Q(a);if(Ct)return a[0]===d[0]?u[0]+" "+ar[1]:a[1]===d[1]?u[1]+" "+ar[0]:ar[0]+" - "+ar[1];return ar;function en(tn){return tn===d[0]?"min":tn===d[1]?"max":(+tn).toFixed(Math.min(p,20))}},n.prototype.resetExtent=function(){var a=this.option,l=asc([a.min,a.max]);this._dataExtent=l},n.prototype.getDataDimensionIndex=function(a){var l=this.option.dimension;if(l!=null)return a.getDimensionIndex(l);for(var u=a.dimensions,c=u.length-1;c>=0;c--){var p=u[c],d=a.getDimensionInfo(p);if(!d.isCalculationCoord)return d.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var a=this.ecModel,l=this.option,u={inRange:l.inRange,outOfRange:l.outOfRange},c=l.target||(l.target={}),p=l.controller||(l.controller={});merge(c,u),merge(p,u);var d=this.isCategory();Q.call(this,c),Q.call(this,p),Ct.call(this,c,"inRange","outOfRange"),ar.call(this,p);function Q(en){isArray(l.color)&&!en.inRange&&(en.inRange={color:l.color.slice().reverse()}),en.inRange=en.inRange||{color:a.get("gradientColor")}}function Ct(en,tn,on){var cn=en[tn],gn=en[on];cn&&!gn&&(gn=en[on]={},each$2(cn,function(Cn,ex){if(VisualMapping.isValidType(ex)){var ix=visualDefault.get(ex,"inactive",d);ix!=null&&(gn[ex]=ix,ex==="color"&&!gn.hasOwnProperty("opacity")&&!gn.hasOwnProperty("colorAlpha")&&(gn.opacity=[0,0]))}}))}function ar(en){var tn=(en.inRange||{}).symbol||(en.outOfRange||{}).symbol,on=(en.inRange||{}).symbolSize||(en.outOfRange||{}).symbolSize,cn=this.get("inactiveColor"),gn=this.getItemSymbol(),Cn=gn||"roundRect";each$2(this.stateList,function(ex){var ix=this.itemSize,ax=en[ex];ax||(ax=en[ex]={color:d?cn:[cn]}),ax.symbol==null&&(ax.symbol=tn&&clone$4(tn)||(d?Cn:[Cn])),ax.symbolSize==null&&(ax.symbolSize=on&&clone$4(on)||(d?ix[0]:[ix[0],ix[0]])),ax.symbol=mapVisual(ax.symbol,function(cx){return cx==="none"?Cn:cx});var ox=ax.symbolSize;if(ox!=null){var lx=-1/0;eachVisual(ox,function(cx){cx>lx&&(lx=cx)}),ax.symbolSize=mapVisual(ox,function(cx){return linearMap$1(cx,[0,lx],[0,ix[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(a){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(a){return null},n.prototype.getVisualMeta=function(a){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(a,l){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(u){u.mappingMethod="linear",u.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=DEFAULT_BAR_BOUND[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var a=this.getExtent(),l=this.option.range;!l||l.auto?(a.auto=1,this.option.range=a):isArray$1(l)&&(l[0]>l[1]&&l.reverse(),l[0]=Math.max(l[0],a[0]),l[1]=Math.min(l[1],a[1]))},n.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(a){var l=this.option.controller[a].symbolSize;l&&l[0]!==l[1]&&(l[0]=l[1]/3)},this)},n.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},n.prototype.getSelected=function(){var a=this.getExtent(),l=asc$2((this.get("range")||[]).slice());return l[0]>a[1]&&(l[0]=a[1]),l[1]>a[1]&&(l[1]=a[1]),l[0]<a[0]&&(l[0]=a[0]),l[1]<a[0]&&(l[1]=a[0]),l},n.prototype.getValueState=function(a){var l=this.option.range,u=this.getExtent();return(l[0]<=u[0]||l[0]<=a)&&(l[1]>=u[1]||a<=l[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var l=[];return this.eachTargetSeries(function(u){var c=[],p=u.getData();p.each(this.getDataDimensionIndex(p),function(d,Q){a[0]<=d&&d<=a[1]&&c.push(Q)},this),l.push({seriesId:u.id,dataIndex:c})},this),l},n.prototype.getVisualMeta=function(a){var l=getColorStopValues(this,"outOfRange",this.getExtent()),u=getColorStopValues(this,"inRange",this.option.range.slice()),c=[];function p(on,cn){c.push({value:on,color:a(on,cn)})}for(var d=0,Q=0,Ct=u.length,ar=l.length;Q<ar&&(!u.length||l[Q]<=u[0]);Q++)l[Q]<u[d]&&p(l[Q],"outOfRange");for(var en=1;d<Ct;d++,en=0)en&&c.length&&p(u[d],"outOfRange"),p(u[d],"inRange");for(var en=1;Q<ar;Q++)(!u.length||u[u.length-1]<l[Q])&&(en&&(c.length&&p(c[c.length-1].value,"outOfRange"),en=0),p(l[Q],"outOfRange"));var tn=c.length;return{stops:c,outerColors:[tn?c[0].color:"transparent",tn?c[tn-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(VisualMapModel);function getColorStopValues(t,n,a){if(a[0]===a[1])return a.slice();for(var l=200,u=(a[1]-a[0])/l,c=a[0],p=[],d=0;d<=l&&c<a[1];d++)p.push(c),c+=u;return p.push(a[1]),p}var VisualMapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return n.prototype.init=function(a,l){this.ecModel=a,this.api=l},n.prototype.render=function(a,l,u,c){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,l,u,c)},n.prototype.renderBackground=function(a){var l=this.visualMapModel,u=normalizeCssArray(l.get("padding")||0),c=a.getBoundingRect();a.add(new Rect$2({z2:-1,silent:!0,shape:{x:c.x-u[3],y:c.y-u[0],width:c.width+u[3]+u[1],height:c.height+u[0]+u[2]},style:{fill:l.get("backgroundColor"),stroke:l.get("borderColor"),lineWidth:l.get("borderWidth")}}))},n.prototype.getControllerVisual=function(a,l,u){u=u||{};var c=u.forceState,p=this.visualMapModel,d={};if(l==="color"){var Q=p.get("contentColor");d.color=Q}function Ct(on){return d[on]}function ar(on,cn){d[on]=cn}var en=p.controllerVisuals[c||p.getValueState(a)],tn=VisualMapping.prepareVisualTypes(en);return each$f(tn,function(on){var cn=en[on];u.convertOpacityToAlpha&&on==="opacity"&&(on="colorAlpha",cn=en.__alphaForOpacity),VisualMapping.dependsOn(on,l)&&cn&&cn.applyVisual(a,Ct,ar)}),d[l]},n.prototype.positionGroup=function(a){var l=this.visualMapModel,u=this.api;positionElement(a,l.getBoxLayoutParams(),{width:u.getWidth(),height:u.getHeight()})},n.prototype.doRender=function(a,l,u,c){},n.type="visualMap",n}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(t,n,a){var l=t.option,u=l.align;if(u!=null&&u!=="auto")return u;for(var c={width:n.getWidth(),height:n.getHeight()},p=l.orient==="horizontal"?1:0,d=paramsSet[p],Q=[0,null,10],Ct={},ar=0;ar<3;ar++)Ct[paramsSet[1-p][ar]]=Q[ar],Ct[d[ar]]=ar===2?a[0]:l[d[ar]];var en=[["x","width",3],["y","height",0]][p],tn=getLayoutRect(Ct,c,l.padding);return d[(tn.margin[en[2]]||0)+tn[en[0]]+tn[en[1]]*.5<c[en[1]]*.5?0:1]}function makeHighDownBatch(t,n){return each$f(t||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(n?n.componentIndex:"")}),t}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return n.prototype.init=function(a,l){t.prototype.init.call(this,a,l),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(a,l,u,c){(!c||c.type!=="selectDataRange"||c.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,l=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(l);var u=a.get("text");this._renderEndsText(l,u,0),this._renderEndsText(l,u,1),this._updateView(!0),this.renderBackground(l),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(l)},n.prototype._renderEndsText=function(a,l,u){if(l){var c=l[1-u];c=c!=null?c+"":"";var p=this.visualMapModel,d=p.get("textGap"),Q=p.itemSize,Ct=this._shapes.mainGroup,ar=this._applyTransform([Q[0]/2,u===0?-d:Q[1]+d],Ct),en=this._applyTransform(u===0?"bottom":"top",Ct),tn=this._orient,on=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(on,{x:ar[0],y:ar[1],verticalAlign:tn==="horizontal"?"middle":en,align:tn==="horizontal"?en:"center",text:c})}))}},n.prototype._renderBar=function(a){var l=this.visualMapModel,u=this._shapes,c=l.itemSize,p=this._orient,d=this._useHandle,Q=getItemAlign(l,this.api,c),Ct=u.mainGroup=this._createBarGroup(Q),ar=new Group$3;Ct.add(ar),ar.add(u.outOfRange=createPolygon()),ar.add(u.inRange=createPolygon(null,d?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),ar.setClipPath(new Rect$2({shape:{x:0,y:0,width:c[0],height:c[1],r:3}}));var en=l.textStyleModel.getTextRect(""),tn=mathMax(en.width,en.height);d&&(u.handleThumbs=[],u.handleLabels=[],u.handleLabelPoints=[],this._createHandle(l,Ct,0,c,tn,p),this._createHandle(l,Ct,1,c,tn,p)),this._createIndicator(l,Ct,c,tn,p),a.add(Ct)},n.prototype._createHandle=function(a,l,u,c,p,d){var Q=bind$1(this._dragHandle,this,u,!1),Ct=bind$1(this._dragHandle,this,u,!0),ar=parsePercent$1(a.get("handleSize"),c[0]),en=createSymbol$1(a.get("handleIcon"),-ar/2,-ar/2,ar,ar,null,!0),tn=getCursor(this._orient);en.attr({cursor:tn,draggable:!0,drift:Q,ondragend:Ct,onmousemove:function(ex){stop(ex.event)}}),en.x=c[0]/2,en.useStyle(a.getModel("handleStyle").getItemStyle()),en.setStyle({strokeNoScale:!0,strokeFirst:!0}),en.style.lineWidth*=2,en.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(en,!0),l.add(en);var on=this.visualMapModel.textStyleModel,cn=new ZRText({cursor:tn,draggable:!0,drift:Q,onmousemove:function(ex){stop(ex.event)},ondragend:Ct,style:createTextStyle$1(on,{x:0,y:0,text:""})});cn.ensureState("blur").style={opacity:.1},cn.stateTransition={duration:200},this.group.add(cn);var gn=[ar,0],Cn=this._shapes;Cn.handleThumbs[u]=en,Cn.handleLabelPoints[u]=gn,Cn.handleLabels[u]=cn},n.prototype._createIndicator=function(a,l,u,c,p){var d=parsePercent$1(a.get("indicatorSize"),u[0]),Q=createSymbol$1(a.get("indicatorIcon"),-d/2,-d/2,d,d,null,!0);Q.attr({cursor:"move",invisible:!0,silent:!0,x:u[0]/2});var Ct=a.getModel("indicatorStyle").getItemStyle();if(Q instanceof ZRImage){var ar=Q.style;Q.useStyle(extend({image:ar.image,x:ar.x,y:ar.y,width:ar.width,height:ar.height},Ct))}else Q.useStyle(Ct);l.add(Q);var en=this.visualMapModel.textStyleModel,tn=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(en,{x:0,y:0,text:""})});this.group.add(tn);var on=[(p==="horizontal"?c/2:HOVER_LINK_OUT)+u[0]/2,0],cn=this._shapes;cn.indicator=Q,cn.indicatorLabel=tn,cn.indicatorLabelPoint=on,this._firstShowIndicator=!0},n.prototype._dragHandle=function(a,l,u,c){if(this._useHandle){if(this._dragging=!l,!l){var p=this._applyTransform([u,c],this._shapes.mainGroup,!0);this._updateInterval(a,p[1]),this._hideIndicator(),this._updateView()}l===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),l?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},n.prototype._resetInterval=function(){var a=this.visualMapModel,l=this._dataInterval=a.getSelected(),u=a.getExtent(),c=[0,a.itemSize[1]];this._handleEnds=[linearMap(l[0],u,c,!0),linearMap(l[1],u,c,!0)]},n.prototype._updateInterval=function(a,l){l=l||0;var u=this.visualMapModel,c=this._handleEnds,p=[0,u.itemSize[1]];sliderMove(l,c,p,a,0);var d=u.getExtent();this._dataInterval=[linearMap(c[0],p,d,!0),linearMap(c[1],p,d,!0)]},n.prototype._updateView=function(a){var l=this.visualMapModel,u=l.getExtent(),c=this._shapes,p=[0,l.itemSize[1]],d=a?p:this._handleEnds,Q=this._createBarVisual(this._dataInterval,u,d,"inRange"),Ct=this._createBarVisual(u,u,p,"outOfRange");c.inRange.setStyle({fill:Q.barColor}).setShape("points",Q.barPoints),c.outOfRange.setStyle({fill:Ct.barColor}).setShape("points",Ct.barPoints),this._updateHandle(d,Q)},n.prototype._createBarVisual=function(a,l,u,c){var p={forceState:c,convertOpacityToAlpha:!0},d=this._makeColorGradient(a,p),Q=[this.getControllerVisual(a[0],"symbolSize",p),this.getControllerVisual(a[1],"symbolSize",p)],Ct=this._createBarPoints(u,Q);return{barColor:new LinearGradient(0,0,0,1,d),barPoints:Ct,handlesColor:[d[0].color,d[d.length-1].color]}},n.prototype._makeColorGradient=function(a,l){var u=100,c=[],p=(a[1]-a[0])/u;c.push({color:this.getControllerVisual(a[0],"color",l),offset:0});for(var d=1;d<u;d++){var Q=a[0]+p*d;if(Q>a[1])break;c.push({color:this.getControllerVisual(Q,"color",l),offset:d/u})}return c.push({color:this.getControllerVisual(a[1],"color",l),offset:1}),c},n.prototype._createBarPoints=function(a,l){var u=this.visualMapModel.itemSize;return[[u[0]-l[0],a[0]],[u[0],a[0]],[u[0],a[1]],[u[0]-l[1],a[1]]]},n.prototype._createBarGroup=function(a){var l=this._orient,u=this.visualMapModel.get("inverse");return new Group$3(l==="horizontal"&&!u?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:l==="horizontal"&&u?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:l==="vertical"&&!u?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},n.prototype._updateHandle=function(a,l){if(this._useHandle){var u=this._shapes,c=this.visualMapModel,p=u.handleThumbs,d=u.handleLabels,Q=c.itemSize,Ct=c.getExtent(),ar=this._applyTransform("left",u.mainGroup);each$1([0,1],function(en){var tn=p[en];tn.setStyle("fill",l.handlesColor[en]),tn.y=a[en];var on=linearMap(a[en],[0,Q[1]],Ct,!0),cn=this.getControllerVisual(on,"symbolSize");tn.scaleX=tn.scaleY=cn/Q[0],tn.x=Q[0]-cn/2;var gn=applyTransform(u.handleLabelPoints[en],getTransform$1(tn,this.group));if(this._orient==="horizontal"){var Cn=ar==="left"||ar==="top"?(Q[0]-cn)/2:(Q[0]-cn)/-2;gn[1]+=Cn}d[en].setStyle({x:gn[0],y:gn[1],text:c.formatValueText(this._dataInterval[en]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",u.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(a,l,u,c){var p=this.visualMapModel,d=p.getExtent(),Q=p.itemSize,Ct=[0,Q[1]],ar=this._shapes,en=ar.indicator;if(en){en.attr("invisible",!1);var tn={convertOpacityToAlpha:!0},on=this.getControllerVisual(a,"color",tn),cn=this.getControllerVisual(a,"symbolSize"),gn=linearMap(a,d,Ct,!0),Cn=Q[0]-cn/2,ex={x:en.x,y:en.y};en.y=gn,en.x=Cn;var ix=applyTransform(ar.indicatorLabelPoint,getTransform$1(en,this.group)),ax=ar.indicatorLabel;ax.attr("invisible",!1);var ox=this._applyTransform("left",ar.mainGroup),lx=this._orient,cx=lx==="horizontal";ax.setStyle({text:(u||"")+p.formatValueText(l),verticalAlign:cx?ox:"middle",align:cx?"center":ox});var dx={x:Cn,y:gn,style:{fill:on}},hx={style:{x:ix[0],y:ix[1]}};if(p.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var fx={duration:100,easing:"cubicInOut",additive:!0};en.x=ex.x,en.y=ex.y,en.animateTo(dx,fx),ax.animateTo(hx,fx)}else en.attr(dx),ax.attr(hx);this._firstShowIndicator=!1;var ux=this._shapes.handleLabels;if(ux)for(var gx=0;gx<ux.length;gx++)this.api.enterBlur(ux[gx])}},n.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(l){if(a._hovering=!0,!a._dragging){var u=a.visualMapModel.itemSize,c=a._applyTransform([l.offsetX,l.offsetY],a._shapes.mainGroup,!0,!0);c[1]=mathMin(mathMax(0,c[1]),u[1]),a._doHoverLinkToSeries(c[1],0<=c[0]&&c[0]<=u[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(a,l){var u=this.visualMapModel,c=u.itemSize;if(u.option.hoverLink){var p=[0,c[1]],d=u.getExtent();a=mathMin(mathMax(p[0],a),p[1]);var Q=getHalfHoverLinkSize(u,d,p),Ct=[a-Q,a+Q],ar=linearMap(a,p,d,!0),en=[linearMap(Ct[0],p,d,!0),linearMap(Ct[1],p,d,!0)];Ct[0]<p[0]&&(en[0]=-1/0),Ct[1]>p[1]&&(en[1]=1/0),l&&(en[0]===-1/0?this._showIndicator(ar,en[1],"< ",Q):en[1]===1/0?this._showIndicator(ar,en[0],"> ",Q):this._showIndicator(ar,ar," ",Q));var tn=this._hoverLinkDataIndices,on=[];(l||useHoverLinkOnHandle(u))&&(on=this._hoverLinkDataIndices=u.findTargetDataIndices(en));var cn=compressBatches(tn,on);this._dispatchHighDown("downplay",makeHighDownBatch(cn[0],u)),this._dispatchHighDown("highlight",makeHighDownBatch(cn[1],u))}},n.prototype._hoverLinkFromSeriesMouseOver=function(a){var l;if(findEventDispatcher(a.target,function(Q){var Ct=getECData(Q);if(Ct.dataIndex!=null)return l=Ct,!0},!0),!!l){var u=this.ecModel.getSeriesByIndex(l.seriesIndex),c=this.visualMapModel;if(c.isTargetSeries(u)){var p=u.getData(l.dataType),d=p.getStore().get(c.getDataDimensionIndex(p),l.dataIndex);isNaN(d)||this._showIndicator(d,d)}}},n.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var l=this._shapes.handleLabels;if(l)for(var u=0;u<l.length;u++)this.api.leaveBlur(l[u])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(a,this.visualMapModel)),a.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(a,l,u,c){var p=getTransform$1(l,c?null:this.group);return isArray$1(a)?applyTransform(a,p,u):transformDirection(a,p,u)},n.prototype._dispatchHighDown=function(a,l){l&&l.length&&this.api.dispatchAction({type:a,batch:l})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(VisualMapView);function createPolygon(t,n,a,l){return new Polygon({shape:{points:t},draggable:!!a,cursor:n,drift:a,onmousemove:function(u){stop(u.event)},ondragend:l})}function getHalfHoverLinkSize(t,n,a){var l=HOVER_LINK_SIZE/2,u=t.get("hoverLinkDataSize");return u&&(l=linearMap(u,n,a,!0)/2),l}function useHoverLinkOnHandle(t){var n=t.get("hoverLinkOnHandle");return!!(n??t.get("realtime"))}function getCursor(t){return t==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(t,n){n.eachComponent({mainType:"visualMap",query:t},function(a){a.setSelected(t.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(t,n){var a=[];return n.eachComponent("visualMap",function(l){var u=t.pipelineContext;!l.isTargetSeries(t)||u&&u.large||a.push(incrementalApplyVisual(l.stateList,l.targetVisuals,bind$1(l.getValueState,l),l.getDataDimensionIndex(t.getData())))}),a}},{createOnAllSeries:!0,reset:function(t,n){var a=t.getData(),l=[];n.eachComponent("visualMap",function(u){if(u.isTargetSeries(t)){var c=u.getVisualMeta(bind$1(getColorVisual,null,t,u))||{stops:[],outerColors:[]},p=u.getDataDimensionIndex(a);p>=0&&(c.dimension=p,l.push(c))}}),t.getData().setVisual("visualMeta",l)}}];function getColorVisual(t,n,a,l){for(var u=n.targetVisuals[l],c=VisualMapping.prepareVisualTypes(u),p={color:getVisualFromData(t.getData(),"color")},d=0,Q=c.length;d<Q;d++){var Ct=c[d],ar=u[Ct==="opacity"?"__alphaForOpacity":Ct];ar&&ar.applyVisual(a,en,tn)}return p.color;function en(on){return p[on]}function tn(on,cn){p[on]=cn}}var each=each$f;function visualMapPreprocessor(t){var n=t&&t.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(a){if(a){has(a,"splitList")&&!has(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var l=a.pieces;l&&isArray$1(l)&&each(l,function(u){isObject$3(u)&&(has(u,"start")&&!has(u,"min")&&(u.min=u.start),has(u,"end")&&!has(u,"max")&&(u.max=u.end))})}})}function has(t,n){return t&&t.hasOwnProperty&&t.hasOwnProperty(n)}var installed=!1;function installCommon(t){installed||(installed=!0,t.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),t.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(n){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,n)}),t.registerPreprocessor(visualMapPreprocessor))}function install$5(t){t.registerComponentModel(ContinuousModel),t.registerComponentView(ContinuousView),installCommon(t)}var PiecewiseModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._pieceList=[],a}return n.prototype.optionUpdated=function(a,l){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var u=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(a,l);var c=this.option.categories;this.resetVisual(function(p,d){u==="categories"?(p.mappingMethod="category",p.categories=clone$4(c)):(p.dataExtent=this.getExtent(),p.mappingMethod="piecewise",p.pieceList=map$1(this._pieceList,function(Q){return Q=clone$4(Q),d!=="inRange"&&(Q.visual=null),Q}))})},n.prototype.completeVisualOption=function(){var a=this.option,l={},u=VisualMapping.listVisualTypes(),c=this.isCategory();each$f(a.pieces,function(d){each$f(u,function(Q){d.hasOwnProperty(Q)&&(l[Q]=1)})}),each$f(l,function(d,Q){var Ct=!1;each$f(this.stateList,function(ar){Ct=Ct||p(a,ar,Q)||p(a.target,ar,Q)},this),!Ct&&each$f(this.stateList,function(ar){(a[ar]||(a[ar]={}))[Q]=visualDefault.get(Q,ar==="inRange"?"active":"inactive",c)})},this);function p(d,Q,Ct){return d&&d[Q]&&d[Q].hasOwnProperty(Ct)}t.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(a,l){var u=this.option,c=this._pieceList,p=(l?u:a).selected||{};if(u.selected=p,each$f(c,function(Q,Ct){var ar=this.getSelectedMapKey(Q);p.hasOwnProperty(ar)||(p[ar]=!0)},this),u.selectedMode==="single"){var d=!1;each$f(c,function(Q,Ct){var ar=this.getSelectedMapKey(Q);p[ar]&&(d?p[ar]=!1:d=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(a){this.option.selected=clone$4(a)},n.prototype.getValueState=function(a){var l=VisualMapping.findPieceIndex(a,this._pieceList);return l!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[l])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var l=[],u=this._pieceList;return this.eachTargetSeries(function(c){var p=[],d=c.getData();d.each(this.getDataDimensionIndex(d),function(Q,Ct){var ar=VisualMapping.findPieceIndex(Q,u);ar===a&&p.push(Ct)},this),l.push({seriesId:c.id,dataIndex:p})},this),l},n.prototype.getRepresentValue=function(a){var l;if(this.isCategory())l=a.value;else if(a.value!=null)l=a.value;else{var u=a.interval||[];l=u[0]===-1/0&&u[1]===1/0?0:(u[0]+u[1])/2}return l},n.prototype.getVisualMeta=function(a){if(this.isCategory())return;var l=[],u=["",""],c=this;function p(ar,en){var tn=c.getRepresentValue({interval:ar});en||(en=c.getValueState(tn));var on=a(tn,en);ar[0]===-1/0?u[0]=on:ar[1]===1/0?u[1]=on:l.push({value:ar[0],color:on},{value:ar[1],color:on})}var d=this._pieceList.slice();if(!d.length)d.push({interval:[-1/0,1/0]});else{var Q=d[0].interval[0];Q!==-1/0&&d.unshift({interval:[-1/0,Q]}),Q=d[d.length-1].interval[1],Q!==1/0&&d.push({interval:[Q,1/0]})}var Ct=-1/0;return each$f(d,function(ar){var en=ar.interval;en&&(en[0]>Ct&&p([Ct,en[0]],"outOfRange"),p(en.slice()),Ct=en[1])},this),{stops:l,outerColors:u}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(VisualMapModel),resetMethods={splitNumber:function(t){var n=this.option,a=Math.min(n.precision,20),l=this.getExtent(),u=n.splitNumber;u=Math.max(parseInt(u,10),1),n.splitNumber=u;for(var c=(l[1]-l[0])/u;+c.toFixed(a)!==c&&a<5;)a++;n.precision=a,c=+c.toFixed(a),n.minOpen&&t.push({interval:[-1/0,l[0]],close:[0,0]});for(var p=0,d=l[0];p<u;d+=c,p++){var Q=p===u-1?l[1]:d+c;t.push({interval:[d,Q],close:[1,1]})}n.maxOpen&&t.push({interval:[l[1],1/0],close:[0,0]}),reformIntervals(t),each$f(t,function(Ct,ar){Ct.index=ar,Ct.text=this.formatValueText(Ct.interval)},this)},categories:function(t){var n=this.option;each$f(n.categories,function(a){t.push({text:this.formatValueText(a,!0),value:a})},this),normalizeReverse(n,t)},pieces:function(t){var n=this.option;each$f(n.pieces,function(a,l){isObject$3(a)||(a={value:a});var u={text:"",index:l};if(a.label!=null&&(u.text=a.label),a.hasOwnProperty("value")){var c=u.value=a.value;u.interval=[c,c],u.close=[1,1]}else{for(var p=u.interval=[],d=u.close=[0,0],Q=[1,0,1],Ct=[-1/0,1/0],ar=[],en=0;en<2;en++){for(var tn=[["gte","gt","min"],["lte","lt","max"]][en],on=0;on<3&&p[en]==null;on++)p[en]=a[tn[on]],d[en]=Q[on],ar[en]=on===2;p[en]==null&&(p[en]=Ct[en])}ar[0]&&p[1]===1/0&&(d[0]=0),ar[1]&&p[0]===-1/0&&(d[1]=0),p[0]===p[1]&&d[0]&&d[1]&&(u.value=p[0])}u.visual=VisualMapping.retrieveVisuals(a),t.push(u)},this),normalizeReverse(n,t),reformIntervals(t),each$f(t,function(a){var l=a.close,u=[["<",""][l[1]],[">",""][l[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,u)},this)}};function normalizeReverse(t,n){var a=t.inverse;(t.orient==="vertical"?!a:a)&&n.reverse()}var PiecewiseVisualMapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.doRender=function(){var a=this.group;a.removeAll();var l=this.visualMapModel,u=l.get("textGap"),c=l.textStyleModel,p=c.getFont(),d=c.getTextColor(),Q=this._getItemAlign(),Ct=l.itemSize,ar=this._getViewData(),en=ar.endsText,tn=retrieve(l.get("showLabel",!0),!en),on=!l.get("selectedMode");en&&this._renderEndsText(a,en[0],Ct,tn,Q),each$f(ar.viewPieceList,function(cn){var gn=cn.piece,Cn=new Group$3;Cn.onclick=bind$1(this._onItemClick,this,gn),this._enableHoverLink(Cn,cn.indexInModelPieceList);var ex=l.getRepresentValue(gn);if(this._createItemSymbol(Cn,ex,[0,0,Ct[0],Ct[1]],on),tn){var ix=this.visualMapModel.getValueState(ex);Cn.add(new ZRText({style:{x:Q==="right"?-u:Ct[0]+u,y:Ct[1]/2,text:gn.text,verticalAlign:"middle",align:Q,font:p,fill:d,opacity:ix==="outOfRange"?.5:1},silent:on}))}a.add(Cn)},this),en&&this._renderEndsText(a,en[1],Ct,tn,Q),box(l.get("orient"),a,l.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},n.prototype._enableHoverLink=function(a,l){var u=this;a.on("mouseover",function(){return c("highlight")}).on("mouseout",function(){return c("downplay")});var c=function(p){var d=u.visualMapModel;d.option.hoverLink&&u.api.dispatchAction({type:p,batch:makeHighDownBatch(d.findTargetDataIndices(l),d)})}},n.prototype._getItemAlign=function(){var a=this.visualMapModel,l=a.option;if(l.orient==="vertical")return getItemAlign(a,this.api,a.itemSize);var u=l.align;return(!u||u==="auto")&&(u="left"),u},n.prototype._renderEndsText=function(a,l,u,c,p){if(l){var d=new Group$3,Q=this.visualMapModel.textStyleModel;d.add(new ZRText({style:createTextStyle$1(Q,{x:c?p==="right"?u[0]:0:u[0]/2,y:u[1]/2,verticalAlign:"middle",align:c?p:"center",text:l})})),a.add(d)}},n.prototype._getViewData=function(){var a=this.visualMapModel,l=map$1(a.getPieceList(),function(d,Q){return{piece:d,indexInModelPieceList:Q}}),u=a.get("text"),c=a.get("orient"),p=a.get("inverse");return(c==="horizontal"?p:!p)?l.reverse():u&&(u=u.slice().reverse()),{viewPieceList:l,endsText:u}},n.prototype._createItemSymbol=function(a,l,u,c){var p=createSymbol$1(this.getControllerVisual(l,"symbol"),u[0],u[1],u[2],u[3],this.getControllerVisual(l,"color"));p.silent=c,a.add(p)},n.prototype._onItemClick=function(a){var l=this.visualMapModel,u=l.option,c=u.selectedMode;if(c){var p=clone$4(u.selected),d=l.getSelectedMapKey(a);c==="single"||c===!0?(p[d]=!0,each$f(p,function(Q,Ct){p[Ct]=Ct===d})):p[d]=!p[d],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:p})}},n.type="visualMap.piecewise",n}(VisualMapView);function install$4(t){t.registerComponentModel(PiecewiseModel),t.registerComponentView(PiecewiseVisualMapView),installCommon(t)}function install$3(t){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(t,n){var a=t.getModel("aria");if(!a.get("enabled"))return;var l=clone$4(DEFAULT_OPTION);merge(l.label,t.getLocaleModel().get("aria"),!1),merge(a.option,l,!1),u(),c();function u(){var Ct=a.getModel("decal"),ar=Ct.get("show");if(ar){var en=createHashMap();t.eachSeries(function(tn){if(!tn.isColorBySeries()){var on=en.get(tn.type);on||(on={},en.set(tn.type,on)),inner(tn).scope=on}}),t.eachRawSeries(function(tn){if(t.isSeriesFiltered(tn))return;if(isFunction$1(tn.enableAriaDecal)){tn.enableAriaDecal();return}var on=tn.getData();if(tn.isColorBySeries()){var ix=getDecalFromPalette(tn.ecModel,tn.name,decalPaletteScope,t.getSeriesCount()),ax=on.getVisual("decal");on.setVisual("decal",ox(ax,ix))}else{var cn=tn.getRawData(),gn={},Cn=inner(tn).scope;on.each(function(lx){var cx=on.getRawIndex(lx);gn[cx]=lx});var ex=cn.count();cn.each(function(lx){var cx=gn[lx],dx=cn.getName(lx)||lx+"",hx=getDecalFromPalette(tn.ecModel,dx,Cn,ex),fx=on.getItemVisual(cx,"decal");on.setItemVisual(cx,"decal",ox(fx,hx))})}function ox(lx,cx){var dx=lx?extend(extend({},cx),lx):cx;return dx.dirty=!0,dx}})}}function c(){var Ct=n.getZr().dom;if(Ct){var ar=t.getLocaleModel().get("aria"),en=a.getModel("label");if(en.option=defaults(en.option,ar),!!en.get("enabled")){if(Ct.setAttribute("role","img"),en.get("description")){Ct.setAttribute("aria-label",en.get("description"));return}var tn=t.getSeriesCount(),on=en.get(["data","maxCount"])||10,cn=en.get(["series","maxCount"])||10,gn=Math.min(tn,cn),Cn;if(!(tn<1)){var ex=d();if(ex){var ix=en.get(["general","withTitle"]);Cn=p(ix,{title:ex})}else Cn=en.get(["general","withoutTitle"]);var ax=[],ox=tn>1?en.get(["series","multiple","prefix"]):en.get(["series","single","prefix"]);Cn+=p(ox,{seriesCount:tn}),t.eachSeries(function(hx,fx){if(fx<gn){var ux=void 0,gx=hx.get("name"),yx=gx?"withName":"withoutName";ux=tn>1?en.get(["series","multiple",yx]):en.get(["series","single",yx]),ux=p(ux,{seriesId:hx.seriesIndex,seriesName:hx.get("name"),seriesType:Q(hx.subType)});var _x=hx.getData();if(_x.count()>on){var vx=en.get(["data","partialData"]);ux+=p(vx,{displayCnt:on})}else ux+=en.get(["data","allData"]);for(var bx=en.get(["data","separator","middle"]),xx=en.get(["data","separator","end"]),Sx=en.get(["data","excludeDimensionId"]),Ax=[],Cx=0;Cx<_x.count();Cx++)if(Cx<on){var Tx=_x.getName(Cx),Px=Sx?filter(_x.getValues(Cx),function(Mx,Dx){return indexOf(Sx,Dx)===-1}):_x.getValues(Cx),Fx=en.get(["data",Tx?"withName":"withoutName"]);Ax.push(p(Fx,{name:Tx,value:Px.join(bx)}))}ux+=Ax.join(bx)+xx,ax.push(ux)}});var lx=en.getModel(["series","multiple","separator"]),cx=lx.get("middle"),dx=lx.get("end");Cn+=ax.join(cx)+dx,Ct.setAttribute("aria-label",Cn)}}}}function p(Ct,ar){if(!isString$1(Ct))return Ct;var en=Ct;return each$f(ar,function(tn,on){en=en.replace(new RegExp("\\{\\s*"+on+"\\s*\\}","g"),tn)}),en}function d(){var Ct=t.get("title");return Ct&&Ct.length&&(Ct=Ct[0]),Ct&&Ct.text}function Q(Ct){var ar=t.getLocaleModel().get(["series","typeNames"]);return ar[Ct]||ar.chart}}function ariaPreprocessor(t){if(!(!t||!t.aria)){var n=t.aria;n.show!=null&&(n.enabled=n.show),n.label=n.label||{},each$f(["description","general","series","data"],function(a){n[a]!=null&&(n.label[a]=n[a])})}}function install$2(t){t.registerPreprocessor(ariaPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function t(n){var a=this._condVal=isString$1(n)?new RegExp(n):isRegExp(n)?n:null;if(a==null){var l="";throwError(l)}}return t.prototype.evaluate=function(n){var a=typeof n;return isString$1(a)?this._condVal.test(n):isNumber(a)?this._condVal.test(n+""):!1},t}(),ConstConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),AndConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(!n[a].evaluate())return!1;return!0},t}(),OrConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(n[a].evaluate())return!0;return!1},t}(),NotConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),RelationalConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){for(var n=!!this.valueParser,a=this.getValue,l=a(this.valueGetterParam),u=n?this.valueParser(l):null,c=0;c<this.subCondList.length;c++)if(!this.subCondList[c].evaluate(n?u:l))return!1;return!0},t}();function parseOption(t,n){if(t===!0||t===!1){var a=new ConstConditionInternal;return a.value=t,a}var l="";return isObjectNotArray(t)||throwError(l),t.and?parseAndOrOption("and",t,n):t.or?parseAndOrOption("or",t,n):t.not?parseNotOption(t,n):parseRelationalOption(t,n)}function parseAndOrOption(t,n,a){var l=n[t],u="";isArray$1(l)||throwError(u),l.length||throwError(u);var c=t==="and"?new AndConditionInternal:new OrConditionInternal;return c.children=map$1(l,function(p){return parseOption(p,a)}),c.children.length||throwError(u),c}function parseNotOption(t,n){var a=t.not,l="";isObjectNotArray(a)||throwError(l);var u=new NotConditionInternal;return u.child=parseOption(a,n),u.child||throwError(l),u}function parseRelationalOption(t,n){for(var a="",l=n.prepareGetValue(t),u=[],c=keys(t),p=t.parser,d=p?getRawValueParser(p):null,Q=0;Q<c.length;Q++){var Ct=c[Q];if(!(Ct==="parser"||n.valueGetterAttrMap.get(Ct))){var ar=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,Ct)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[Ct]:Ct,en=t[Ct],tn=d?d(en):en,on=createFilterComparator(ar,tn)||ar==="reg"&&new RegExpEvaluator(tn);on||throwError(a),u.push(on)}}u.length||throwError(a);var cn=new RelationalConditionInternal;return cn.valueGetterParam=l,cn.valueParser=d,cn.getValue=n.getValue,cn.subCondList=u,cn}function isObjectNotArray(t){return isObject$3(t)&&!isArrayLike(t)}var ConditionalExpressionParsed=function(){function t(n,a){this._cond=parseOption(n,a)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function parseConditionalExpression(t,n){return new ConditionalExpressionParsed(t,n)}var filterTransform={type:"echarts:filter",transform:function(t){for(var n=t.upstream,a,l=parseConditionalExpression(t.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(d){var Q="",Ct=d.dimension;hasOwn(d,"dimension")||throwError(Q);var ar=n.getDimensionInfo(Ct);return ar||throwError(Q),{dimIdx:ar.index}},getValue:function(d){return n.retrieveValueFromItem(a,d.dimIdx)}}),u=[],c=0,p=n.count();c<p;c++)a=n.getRawDataItem(c),l.evaluate()&&u.push(a);return{data:u}}},sortTransform={type:"echarts:sort",transform:function(t){var n=t.upstream,a=t.config,l="",u=normalizeToArray(a);u.length||throwError(l);var c=[];each$f(u,function(ar){var en=ar.dimension,tn=ar.order,on=ar.parser,cn=ar.incomparable;if(en==null&&throwError(l),tn!=="asc"&&tn!=="desc"&&throwError(l),cn&&cn!=="min"&&cn!=="max"){var gn="";throwError(gn)}if(tn!=="asc"&&tn!=="desc"){var Cn="";throwError(Cn)}var ex=n.getDimensionInfo(en);ex||throwError(l);var ix=on?getRawValueParser(on):null;on&&!ix&&throwError(l),c.push({dimIdx:ex.index,parser:ix,comparator:new SortOrderComparator(tn,cn)})});var p=n.sourceFormat;p!==SOURCE_FORMAT_ARRAY_ROWS&&p!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(l);for(var d=[],Q=0,Ct=n.count();Q<Ct;Q++)d.push(n.getRawDataItem(Q));return d.sort(function(ar,en){for(var tn=0;tn<c.length;tn++){var on=c[tn],cn=n.retrieveValueFromItem(ar,on.dimIdx),gn=n.retrieveValueFromItem(en,on.dimIdx);on.parser&&(cn=on.parser(cn),gn=on.parser(gn));var Cn=on.comparator.evaluate(cn,gn);if(Cn!==0)return Cn}return 0}),{data:d}}};function install$1(t){t.registerTransform(filterTransform),t.registerTransform(sortTransform)}var DatasetModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.prototype.init=function(a,l,u){t.prototype.init.call(this,a,l,u),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},n.prototype.mergeOption=function(a,l){t.prototype.mergeOption.call(this,a,l),disableTransformOptionMerge(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},n}(ComponentModel),DatasetView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.type="dataset",n}(ComponentView);function install(t){t.registerComponentModel(DatasetModel),t.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(t,n){return Math.abs(t-n)<1e-5}function pathToBezierCurves(t){var n=t.data,a=t.len(),l=[],u,c=0,p=0,d=0,Q=0;function Ct(_x,vx){u&&u.length>2&&l.push(u),u=[_x,vx]}function ar(_x,vx,bx,xx){aroundEqual(_x,bx)&&aroundEqual(vx,xx)||u.push(_x,vx,bx,xx,bx,xx)}function en(_x,vx,bx,xx,Sx,Ax){var Cx=Math.abs(vx-_x),Tx=Math.tan(Cx/4)*4/3,Px=vx<_x?-1:1,Fx=Math.cos(_x),Mx=Math.sin(_x),Dx=Math.cos(vx),Ox=Math.sin(vx),Lx=Fx*Sx+bx,Nx=Mx*Ax+xx,Gx=Dx*Sx+bx,Ux=Ox*Ax+xx,Hx=Sx*Tx*Px,Vx=Ax*Tx*Px;u.push(Lx-Hx*Mx,Nx+Vx*Fx,Gx+Hx*Ox,Ux-Vx*Dx,Gx,Ux)}for(var tn,on,cn,gn,Cn=0;Cn<a;){var ex=n[Cn++],ix=Cn===1;switch(ix&&(c=n[Cn],p=n[Cn+1],d=c,Q=p,(ex===CMD.L||ex===CMD.C||ex===CMD.Q)&&(u=[d,Q])),ex){case CMD.M:c=d=n[Cn++],p=Q=n[Cn++],Ct(d,Q);break;case CMD.L:tn=n[Cn++],on=n[Cn++],ar(c,p,tn,on),c=tn,p=on;break;case CMD.C:u.push(n[Cn++],n[Cn++],n[Cn++],n[Cn++],c=n[Cn++],p=n[Cn++]);break;case CMD.Q:tn=n[Cn++],on=n[Cn++],cn=n[Cn++],gn=n[Cn++],u.push(c+2/3*(tn-c),p+2/3*(on-p),cn+2/3*(tn-cn),gn+2/3*(on-gn),cn,gn),c=cn,p=gn;break;case CMD.A:var ax=n[Cn++],ox=n[Cn++],lx=n[Cn++],cx=n[Cn++],dx=n[Cn++],hx=n[Cn++]+dx;Cn+=1;var fx=!n[Cn++];tn=Math.cos(dx)*lx+ax,on=Math.sin(dx)*cx+ox,ix?(d=tn,Q=on,Ct(d,Q)):ar(c,p,tn,on),c=Math.cos(hx)*lx+ax,p=Math.sin(hx)*cx+ox;for(var ux=(fx?-1:1)*Math.PI/2,gx=dx;fx?gx>hx:gx<hx;gx+=ux){var yx=fx?Math.max(gx+ux,hx):Math.min(gx+ux,hx);en(gx,yx,ax,ox,lx,cx)}break;case CMD.R:d=c=n[Cn++],Q=p=n[Cn++],tn=d+n[Cn++],on=Q+n[Cn++],Ct(tn,Q),ar(tn,Q,tn,on),ar(tn,on,d,on),ar(d,on,d,Q),ar(d,Q,tn,Q);break;case CMD.Z:u&&ar(c,p,d,Q),c=d,p=Q;break}}return u&&u.length>2&&l.push(u),l}function adpativeBezier(t,n,a,l,u,c,p,d,Q,Ct){if(aroundEqual(t,a)&&aroundEqual(n,l)&&aroundEqual(u,p)&&aroundEqual(c,d)){Q.push(p,d);return}var ar=2/Ct,en=ar*ar,tn=p-t,on=d-n,cn=Math.sqrt(tn*tn+on*on);tn/=cn,on/=cn;var gn=a-t,Cn=l-n,ex=u-p,ix=c-d,ax=gn*gn+Cn*Cn,ox=ex*ex+ix*ix;if(ax<en&&ox<en){Q.push(p,d);return}var lx=tn*gn+on*Cn,cx=-tn*ex-on*ix,dx=ax-lx*lx,hx=ox-cx*cx;if(dx<en&&lx>=0&&hx<en&&cx>=0){Q.push(p,d);return}var fx=[],ux=[];cubicSubdivide(t,a,u,p,.5,fx),cubicSubdivide(n,l,c,d,.5,ux),adpativeBezier(fx[0],ux[0],fx[1],ux[1],fx[2],ux[2],fx[3],ux[3],Q,Ct),adpativeBezier(fx[4],ux[4],fx[5],ux[5],fx[6],ux[6],fx[7],ux[7],Q,Ct)}function pathToPolygons(t,n){var a=pathToBezierCurves(t),l=[];n=n||1;for(var u=0;u<a.length;u++){var c=a[u],p=[],d=c[0],Q=c[1];p.push(d,Q);for(var Ct=2;Ct<c.length;){var ar=c[Ct++],en=c[Ct++],tn=c[Ct++],on=c[Ct++],cn=c[Ct++],gn=c[Ct++];adpativeBezier(d,Q,ar,en,tn,on,cn,gn,p,n),d=cn,Q=gn}l.push(p)}return l}function getDividingGrids(t,n,a){var l=t[n],u=t[1-n],c=Math.abs(l/u),p=Math.ceil(Math.sqrt(c*a)),d=Math.floor(a/p);d===0&&(d=1,p=a);for(var Q=[],Ct=0;Ct<p;Ct++)Q.push(d);var ar=p*d,en=a-ar;if(en>0)for(var Ct=0;Ct<en;Ct++)Q[Ct%p]+=1;return Q}function divideSector(t,n,a){for(var l=t.r0,u=t.r,c=t.startAngle,p=t.endAngle,d=Math.abs(p-c),Q=d*u,Ct=u-l,ar=Q>Math.abs(Ct),en=getDividingGrids([Q,Ct],ar?0:1,n),tn=(ar?d:Ct)/en.length,on=0;on<en.length;on++)for(var cn=(ar?Ct:d)/en[on],gn=0;gn<en[on];gn++){var Cn={};ar?(Cn.startAngle=c+tn*on,Cn.endAngle=c+tn*(on+1),Cn.r0=l+cn*gn,Cn.r=l+cn*(gn+1)):(Cn.startAngle=c+cn*gn,Cn.endAngle=c+cn*(gn+1),Cn.r0=l+tn*on,Cn.r=l+tn*(on+1)),Cn.clockwise=t.clockwise,Cn.cx=t.cx,Cn.cy=t.cy,a.push(Cn)}}function divideRect(t,n,a){for(var l=t.width,u=t.height,c=l>u,p=getDividingGrids([l,u],c?0:1,n),d=c?"width":"height",Q=c?"height":"width",Ct=c?"x":"y",ar=c?"y":"x",en=t[d]/p.length,tn=0;tn<p.length;tn++)for(var on=t[Q]/p[tn],cn=0;cn<p[tn];cn++){var gn={};gn[Ct]=tn*en,gn[ar]=cn*on,gn[d]=en,gn[Q]=on,gn.x+=t.x,gn.y+=t.y,a.push(gn)}}function crossProduct2d(t,n,a,l){return t*l-a*n}function lineLineIntersect(t,n,a,l,u,c,p,d){var Q=a-t,Ct=l-n,ar=p-u,en=d-c,tn=crossProduct2d(ar,en,Q,Ct);if(Math.abs(tn)<1e-6)return null;var on=t-u,cn=n-c,gn=crossProduct2d(on,cn,ar,en)/tn;return gn<0||gn>1?null:new Point(gn*Q+t,gn*Ct+n)}function projPtOnLine(t,n,a){var l=new Point;Point.sub(l,a,n),l.normalize();var u=new Point;Point.sub(u,t,n);var c=u.dot(l);return c}function addToPoly(t,n){var a=t[t.length-1];a&&a[0]===n[0]&&a[1]===n[1]||t.push(n)}function splitPolygonByLine(t,n,a){for(var l=t.length,u=[],c=0;c<l;c++){var p=t[c],d=t[(c+1)%l],Q=lineLineIntersect(p[0],p[1],d[0],d[1],n.x,n.y,a.x,a.y);Q&&u.push({projPt:projPtOnLine(Q,n,a),pt:Q,idx:c})}if(u.length<2)return[{points:t},{points:t}];u.sort(function(Cn,ex){return Cn.projPt-ex.projPt});var Ct=u[0],ar=u[u.length-1];if(ar.idx<Ct.idx){var en=Ct;Ct=ar,ar=en}for(var tn=[Ct.pt.x,Ct.pt.y],on=[ar.pt.x,ar.pt.y],cn=[tn],gn=[on],c=Ct.idx+1;c<=ar.idx;c++)addToPoly(cn,t[c].slice());addToPoly(cn,on),addToPoly(cn,tn);for(var c=ar.idx+1;c<=Ct.idx+l;c++)addToPoly(gn,t[c%l].slice());return addToPoly(gn,tn),addToPoly(gn,on),[{points:cn},{points:gn}]}function binaryDividePolygon(t){var n=t.points,a=[],l=[];fromPoints(n,a,l);var u=new BoundingRect(a[0],a[1],l[0]-a[0],l[1]-a[1]),c=u.width,p=u.height,d=u.x,Q=u.y,Ct=new Point,ar=new Point;return c>p?(Ct.x=ar.x=d+c/2,Ct.y=Q,ar.y=Q+p):(Ct.y=ar.y=Q+p/2,Ct.x=d,ar.x=d+c),splitPolygonByLine(n,Ct,ar)}function binaryDivideRecursive(t,n,a,l){if(a===1)l.push(n);else{var u=Math.floor(a/2),c=t(n);binaryDivideRecursive(t,c[0],u,l),binaryDivideRecursive(t,c[1],a-u,l)}return l}function clone(t,n){for(var a=[],l=0;l<n;l++)a.push(clonePath(t));return a}function copyPathProps(t,n){n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel}function polygonConvert(t){for(var n=[],a=0;a<t.length;)n.push([t[a++],t[a++]]);return n}function split(t,n){var a=[],l=t.shape,u;switch(t.type){case"rect":divideRect(l,n,a),u=Rect$2;break;case"sector":divideSector(l,n,a),u=Sector;break;case"circle":divideSector({r0:0,r:l.r,startAngle:0,endAngle:Math.PI*2,cx:l.cx,cy:l.cy},n,a),u=Sector;break;default:var c=t.getComputedTransform(),p=c?Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1],c[2]*c[2]+c[3]*c[3])):1,d=map$1(pathToPolygons(t.getUpdatedPathProxy(),p),function(ex){return polygonConvert(ex)}),Q=d.length;if(Q===0)binaryDivideRecursive(binaryDividePolygon,{points:d[0]},n,a);else if(Q===n)for(var Ct=0;Ct<Q;Ct++)a.push({points:d[Ct]});else{var ar=0,en=map$1(d,function(ex){var ix=[],ax=[];fromPoints(ex,ix,ax);var ox=(ax[1]-ix[1])*(ax[0]-ix[0]);return ar+=ox,{poly:ex,area:ox}});en.sort(function(ex,ix){return ix.area-ex.area});for(var tn=n,Ct=0;Ct<Q;Ct++){var on=en[Ct];if(tn<=0)break;var cn=Ct===Q-1?tn:Math.ceil(on.area/ar*n);cn<0||(binaryDivideRecursive(binaryDividePolygon,{points:on.poly},cn,a),tn-=cn)}}u=Polygon;break}if(!u)return clone(t,n);for(var gn=[],Ct=0;Ct<a.length;Ct++){var Cn=new u;Cn.setShape(a[Ct]),copyPathProps(t,Cn),gn.push(Cn)}return gn}function alignSubpath(t,n){var a=t.length,l=n.length;if(a===l)return[t,n];for(var u=[],c=[],p=a<l?t:n,d=Math.min(a,l),Q=Math.abs(l-a)/6,Ct=(d-2)/6,ar=Math.ceil(Q/Ct)+1,en=[p[0],p[1]],tn=Q,on=2;on<d;){var cn=p[on-2],gn=p[on-1],Cn=p[on++],ex=p[on++],ix=p[on++],ax=p[on++],ox=p[on++],lx=p[on++];if(tn<=0){en.push(Cn,ex,ix,ax,ox,lx);continue}for(var cx=Math.min(tn,ar-1)+1,dx=1;dx<=cx;dx++){var hx=dx/cx;cubicSubdivide(cn,Cn,ix,ox,hx,u),cubicSubdivide(gn,ex,ax,lx,hx,c),cn=u[3],gn=c[3],en.push(u[1],c[1],u[2],c[2],cn,gn),Cn=u[5],ex=c[5],ix=u[6],ax=c[6]}tn-=cx-1}return p===t?[en,n]:[t,en]}function createSubpath(t,n){for(var a=t.length,l=t[a-2],u=t[a-1],c=[],p=0;p<n.length;)c[p++]=l,c[p++]=u;return c}function alignBezierCurves(t,n){for(var a,l,u,c=[],p=[],d=0;d<Math.max(t.length,n.length);d++){var Q=t[d],Ct=n[d],ar=void 0,en=void 0;Q?Ct?(a=alignSubpath(Q,Ct),ar=a[0],en=a[1],l=ar,u=en):(en=createSubpath(u||Q,Q),ar=Q):(ar=createSubpath(l||Ct,Ct),en=Ct),c.push(ar),p.push(en)}return[c,p]}function centroid(t){for(var n=0,a=0,l=0,u=t.length,c=0,p=u-2;c<u;p=c,c+=2){var d=t[p],Q=t[p+1],Ct=t[c],ar=t[c+1],en=d*ar-Ct*Q;n+=en,a+=(d+Ct)*en,l+=(Q+ar)*en}return n===0?[t[0]||0,t[1]||0]:[a/n/3,l/n/3,n]}function findBestRingOffset(t,n,a,l){for(var u=(t.length-2)/6,c=1/0,p=0,d=t.length,Q=d-2,Ct=0;Ct<u;Ct++){for(var ar=Ct*6,en=0,tn=0;tn<d;tn+=2){var on=tn===0?ar:(ar+tn-2)%Q+2,cn=t[on]-a[0],gn=t[on+1]-a[1],Cn=n[tn]-l[0],ex=n[tn+1]-l[1],ix=Cn-cn,ax=ex-gn;en+=ix*ix+ax*ax}en<c&&(c=en,p=Ct)}return p}function reverse(t){for(var n=[],a=t.length,l=0;l<a;l+=2)n[l]=t[a-l-2],n[l+1]=t[a-l-1];return n}function findBestMorphingRotation(t,n,a,l){for(var u=[],c,p=0;p<t.length;p++){var d=t[p],Q=n[p],Ct=centroid(d),ar=centroid(Q);c==null&&(c=Ct[2]<0!=ar[2]<0);var en=[],tn=[],on=0,cn=1/0,gn=[],Cn=d.length;c&&(d=reverse(d));for(var ex=findBestRingOffset(d,Q,Ct,ar)*6,ix=Cn-2,ax=0;ax<ix;ax+=2){var ox=(ex+ax)%ix+2;en[ax+2]=d[ox]-Ct[0],en[ax+3]=d[ox+1]-Ct[1]}en[0]=d[ex]-Ct[0],en[1]=d[ex+1]-Ct[1];for(var lx=l/a,cx=-l/2;cx<=l/2;cx+=lx){for(var dx=Math.sin(cx),hx=Math.cos(cx),fx=0,ax=0;ax<d.length;ax+=2){var ux=en[ax],gx=en[ax+1],yx=Q[ax]-ar[0],_x=Q[ax+1]-ar[1],vx=yx*hx-_x*dx,bx=yx*dx+_x*hx;gn[ax]=vx,gn[ax+1]=bx;var xx=vx-ux,Sx=bx-gx;fx+=xx*xx+Sx*Sx}if(fx<cn){cn=fx,on=cx;for(var Ax=0;Ax<gn.length;Ax++)tn[Ax]=gn[Ax]}}u.push({from:en,to:tn,fromCp:Ct,toCp:ar,rotation:-on})}return u}function isCombineMorphing(t){return t.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(t,n,a){var l=SAVED_METHOD_PREFIX+n,u=t[l]||t[n];t[l]||(t[l]=t[n]);var c=a.replace,p=a.after,d=a.before;t[n]=function(){var Q=arguments,Ct;return d&&d.apply(this,Q),c?Ct=c.apply(this,Q):Ct=u.apply(this,Q),p&&p.apply(this,Q),Ct}}function restoreMethod(t,n){var a=SAVED_METHOD_PREFIX+n;t[a]&&(t[n]=t[a],t[a]=null)}function applyTransformOnBeziers(t,n){for(var a=0;a<t.length;a++)for(var l=t[a],u=0;u<l.length;){var c=l[u],p=l[u+1];l[u++]=n[0]*c+n[2]*p+n[4],l[u++]=n[1]*c+n[3]*p+n[5]}}function prepareMorphPath(t,n){var a=t.getUpdatedPathProxy(),l=n.getUpdatedPathProxy(),u=alignBezierCurves(pathToBezierCurves(a),pathToBezierCurves(l)),c=u[0],p=u[1],d=t.getComputedTransform(),Q=n.getComputedTransform();function Ct(){this.transform=null}d&&applyTransformOnBeziers(c,d),Q&&applyTransformOnBeziers(p,Q),saveAndModifyMethod(n,"updateTransform",{replace:Ct}),n.transform=null;var ar=findBestMorphingRotation(c,p,10,Math.PI),en=[];saveAndModifyMethod(n,"buildPath",{replace:function(tn){for(var on=n.__morphT,cn=1-on,gn=[],Cn=0;Cn<ar.length;Cn++){var ex=ar[Cn],ix=ex.from,ax=ex.to,ox=ex.rotation*on,lx=ex.fromCp,cx=ex.toCp,dx=Math.sin(ox),hx=Math.cos(ox);lerp$1(gn,lx,cx,on);for(var fx=0;fx<ix.length;fx+=2){var ux=ix[fx],gx=ix[fx+1],yx=ax[fx],_x=ax[fx+1],vx=ux*cn+yx*on,bx=gx*cn+_x*on;en[fx]=vx*hx-bx*dx+gn[0],en[fx+1]=vx*dx+bx*hx+gn[1]}var xx=en[0],Sx=en[1];tn.moveTo(xx,Sx);for(var fx=2;fx<ix.length;){var yx=en[fx++],_x=en[fx++],Ax=en[fx++],Cx=en[fx++],Tx=en[fx++],Px=en[fx++];xx===yx&&Sx===_x&&Ax===Tx&&Cx===Px?tn.lineTo(Tx,Px):tn.bezierCurveTo(yx,_x,Ax,Cx,Tx,Px),xx=Tx,Sx=Px}}}})}function morphPath(t,n,a){if(!t||!n)return n;var l=a.done,u=a.during;prepareMorphPath(t,n),n.__morphT=0;function c(){restoreMethod(n,"buildPath"),restoreMethod(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()}return n.animateTo({__morphT:1},defaults({during:function(p){n.dirtyShape(),u&&u(p)},done:function(){c(),l&&l()}},a)),n}function hilbert(t,n,a,l,u,c){var p=16;t=u===a?0:Math.round(32767*(t-a)/(u-a)),n=c===l?0:Math.round(32767*(n-l)/(c-l));for(var d=0,Q,Ct=(1<<p)/2;Ct>0;Ct/=2){var ar=0,en=0;(t&Ct)>0&&(ar=1),(n&Ct)>0&&(en=1),d+=Ct*Ct*(3*ar^en),en===0&&(ar===1&&(t=Ct-1-t,n=Ct-1-n),Q=t,t=n,n=Q)}return d}function sortPaths(t){var n=1/0,a=1/0,l=-1/0,u=-1/0,c=map$1(t,function(d){var Q=d.getBoundingRect(),Ct=d.getComputedTransform(),ar=Q.x+Q.width/2+(Ct?Ct[4]:0),en=Q.y+Q.height/2+(Ct?Ct[5]:0);return n=Math.min(ar,n),a=Math.min(en,a),l=Math.max(ar,l),u=Math.max(en,u),[ar,en]}),p=map$1(c,function(d,Q){return{cp:d,z:hilbert(d[0],d[1],n,a,l,u),path:t[Q]}});return p.sort(function(d,Q){return d.z-Q.z}).map(function(d){return d.path})}function defaultDividePath(t){return split(t.path,t.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(t,n,a){var l=[];function u(lx){for(var cx=0;cx<lx.length;cx++){var dx=lx[cx];isCombineMorphing(dx)?u(dx.childrenRef()):dx instanceof Path&&l.push(dx)}}u(t);var c=l.length;if(!c)return createEmptyReturn();var p=a.dividePath||defaultDividePath,d=p({path:n,count:c});if(d.length!==c)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();l=sortPaths(l),d=sortPaths(d);for(var Q=a.done,Ct=a.during,ar=a.individualDelay,en=new Transformable,tn=0;tn<c;tn++){var on=l[tn],cn=d[tn];cn.parent=n,cn.copyTransform(en),ar||prepareMorphPath(on,cn)}n.__isCombineMorphing=!0,n.childrenRef=function(){return d};function gn(lx){for(var cx=0;cx<d.length;cx++)d[cx].addSelfToZr(lx)}saveAndModifyMethod(n,"addSelfToZr",{after:function(lx){gn(lx)}}),saveAndModifyMethod(n,"removeSelfFromZr",{after:function(lx){for(var cx=0;cx<d.length;cx++)d[cx].removeSelfFromZr(lx)}});function Cn(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,restoreMethod(n,"addSelfToZr"),restoreMethod(n,"removeSelfFromZr")}var ex=d.length;if(ar)for(var ix=ex,ax=function(){ix--,ix===0&&(Cn(),Q&&Q())},tn=0;tn<ex;tn++){var ox=ar?defaults({delay:(a.delay||0)+ar(tn,ex,l[tn],d[tn]),done:ax},a):a;morphPath(l[tn],d[tn],ox)}else n.__morphT=0,n.animateTo({__morphT:1},defaults({during:function(lx){for(var cx=0;cx<ex;cx++){var dx=d[cx];dx.__morphT=n.__morphT,dx.dirtyShape()}Ct&&Ct(lx)},done:function(){Cn();for(var lx=0;lx<t.length;lx++)restoreMethod(t[lx],"updateTransform");Q&&Q()}},a));return n.__zr&&gn(n.__zr),{fromIndividuals:l,toIndividuals:d,count:ex}}function separateMorph(t,n,a){var l=n.length,u=[],c=a.dividePath||defaultDividePath;function p(on){for(var cn=0;cn<on.length;cn++){var gn=on[cn];isCombineMorphing(gn)?p(gn.childrenRef()):gn instanceof Path&&u.push(gn)}}if(isCombineMorphing(t)){p(t.childrenRef());var d=u.length;if(d<l)for(var Q=0,Ct=d;Ct<l;Ct++)u.push(clonePath(u[Q++%d]));u.length=l}else{u=c({path:t,count:l});for(var ar=t.getComputedTransform(),Ct=0;Ct<u.length;Ct++)u[Ct].setLocalTransform(ar);if(u.length!==l)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}u=sortPaths(u),n=sortPaths(n);for(var en=a.individualDelay,Ct=0;Ct<l;Ct++){var tn=en?defaults({delay:(a.delay||0)+en(Ct,l,u[Ct],n[Ct])},a):a;morphPath(u[Ct],n[Ct],tn)}return{fromIndividuals:u,toIndividuals:n,count:n.length}}function isMultiple(t){return isArray$1(t[0])}function prepareMorphBatches(t,n){for(var a=[],l=t.length,u=0;u<l;u++)a.push({one:t[u],many:[]});for(var u=0;u<n.length;u++){var c=n[u].length,p=void 0;for(p=0;p<c;p++)a[p%l].many.push(n[u][p])}for(var d=0,u=l-1;u>=0;u--)if(!a[u].many.length){var Q=a[d].many;if(Q.length<=1)if(d)d=0;else return a;var c=Q.length,Ct=Math.ceil(c/2);a[u].many=Q.slice(Ct,c),a[d].many=Q.slice(0,Ct),d++}return a}var pathDividers={clone:function(t){for(var n=[],a=1-Math.pow(1-t.path.style.opacity,1/t.count),l=0;l<t.count;l++){var u=clonePath(t.path);u.setStyle("opacity",a),n.push(u)}return n},split:null};function applyMorphAnimation(t,n,a,l,u,c){if(!t.length||!n.length)return;var p=getAnimationConfig("update",l,u);if(!(p&&p.duration>0))return;var d=l.getModel("universalTransition").get("delay"),Q=Object.assign({setToFinal:!0},p),Ct,ar;isMultiple(t)&&(Ct=t,ar=n),isMultiple(n)&&(Ct=n,ar=t);function en(ex,ix,ax,ox,lx){var cx=ex.many,dx=ex.one;if(cx.length===1&&!lx){var hx=ix?cx[0]:dx,fx=ix?dx:cx[0];if(isCombineMorphing(hx))en({many:[hx],one:fx},!0,ax,ox,!0);else{var ux=d?defaults({delay:d(ax,ox)},Q):Q;morphPath(hx,fx,ux),c(hx,fx,hx,fx,ux)}}else for(var gx=defaults({dividePath:pathDividers[a],individualDelay:d&&function(Sx,Ax,Cx,Tx){return d(Sx+ax,ox)}},Q),yx=ix?combineMorph(cx,dx,gx):separateMorph(dx,cx,gx),_x=yx.fromIndividuals,vx=yx.toIndividuals,bx=_x.length,xx=0;xx<bx;xx++){var ux=d?defaults({delay:d(xx,bx)},Q):Q;c(_x[xx],vx[xx],ix?cx[xx]:ex.one,ix?ex.one:cx[xx],ux)}}for(var tn=Ct?Ct===t:t.length>n.length,on=Ct?prepareMorphBatches(ar,Ct):prepareMorphBatches(tn?n:t,[tn?t:n]),cn=0,gn=0;gn<on.length;gn++)cn+=on[gn].many.length;for(var Cn=0,gn=0;gn<on.length;gn++)en(on[gn],tn,Cn,cn),Cn+=on[gn].many.length}function getPathList(t){if(!t)return[];if(isArray$1(t)){for(var n=[],a=0;a<t.length;a++)n.push(getPathList(t[a]));return n}var l=[];return t.traverse(function(u){u instanceof Path&&!u.disableMorphing&&!u.invisible&&!u.ignore&&l.push(u)}),l}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(t,n){for(var a=t.dimensions,l=0;l<a.length;l++){var u=t.getDimensionInfo(a[l]);if(u&&u.otherDims[n]===0)return a[l]}}function getValueByDimension(t,n,a){var l=t.getDimensionInfo(a),u=l&&l.ordinalMeta;if(l){var c=t.get(l.name,n);return u&&u.categories[c]||c+""}}function getGroupId(t,n,a,l){var u=l?"itemChildGroupId":"itemGroupId",c=getDimension(t,u);if(c){var p=getValueByDimension(t,n,c);return p}var d=t.getRawDataItem(n),Q=l?"childGroupId":"groupId";if(d&&d[Q])return d[Q]+"";if(!l)return a||t.getId(n)}function flattenDataDiffItems(t){var n=[];return each$f(t,function(a){var l=a.data,u=a.dataGroupId;if(!(l.count()>DATA_COUNT_THRESHOLD))for(var c=l.getIndices(),p=0;p<c.length;p++)n.push({data:l,groupId:getGroupId(l,p,u,!1),childGroupId:getGroupId(l,p,u,!0),divide:a.divide,dataIndex:p})}),n}function fadeInElement(t,n,a){t.traverse(function(l){l instanceof Path&&initProps(l,{style:{opacity:0}},n,{dataIndex:a,isFrom:!0})})}function removeEl(t){if(t.parent){var n=t.getComputedTransform();t.setLocalTransform(n),t.parent.remove(t)}}function stopAnimation(t){t.stopAnimation(),t.isGroup&&t.traverse(function(n){n.stopAnimation()})}function animateElementStyles(t,n,a){var l=getAnimationConfig("update",a,n);l&&t.traverse(function(u){if(u instanceof Displayable){var c=getOldStyle(u);c&&u.animateFrom({style:c},l)}})}function isAllIdSame(t,n){var a=t.length;if(a!==n.length)return!1;for(var l=0;l<a;l++){var u=t[l],c=n[l];if(u.data.getId(u.dataIndex)!==c.data.getId(c.dataIndex))return!1}return!0}function transitionBetween(t,n,a){var l=flattenDataDiffItems(t),u=flattenDataDiffItems(n);function c(ax,ox,lx,cx,dx){(lx||ax)&&ox.animateFrom({style:lx&&lx!==ax?extend(extend({},lx.style),ax.style):ax.style},dx)}var p=!1,d=TRANSITION_NONE,Q=createHashMap(),Ct=createHashMap();l.forEach(function(ax){ax.groupId&&Q.set(ax.groupId,!0),ax.childGroupId&&Ct.set(ax.childGroupId,!0)});for(var ar=0;ar<u.length;ar++){var en=u[ar].groupId;if(Ct.get(en)){d=TRANSITION_P2C;break}var tn=u[ar].childGroupId;if(tn&&Q.get(tn)){d=TRANSITION_C2P;break}}function on(ax,ox){return function(lx){var cx=lx.data,dx=lx.dataIndex;return ox?cx.getId(dx):ax?d===TRANSITION_P2C?lx.childGroupId:lx.groupId:d===TRANSITION_C2P?lx.childGroupId:lx.groupId}}var cn=isAllIdSame(l,u),gn={};if(!cn)for(var ar=0;ar<u.length;ar++){var Cn=u[ar],ex=Cn.data.getItemGraphicEl(Cn.dataIndex);ex&&(gn[ex.id]=!0)}function ix(ax,ox){var lx=l[ox],cx=u[ax],dx=cx.data.hostModel,hx=lx.data.getItemGraphicEl(lx.dataIndex),fx=cx.data.getItemGraphicEl(cx.dataIndex);if(hx===fx){fx&&animateElementStyles(fx,cx.dataIndex,dx);return}hx&&gn[hx.id]||fx&&(stopAnimation(fx),hx?(stopAnimation(hx),removeEl(hx),p=!0,applyMorphAnimation(getPathList(hx),getPathList(fx),cx.divide,dx,ax,c)):fadeInElement(fx,dx,ax))}new DataDiffer(l,u,on(!0,cn),on(!1,cn),null,"multiple").update(ix).updateManyToOne(function(ax,ox){var lx=u[ax],cx=lx.data,dx=cx.hostModel,hx=cx.getItemGraphicEl(lx.dataIndex),fx=filter(map$1(ox,function(ux){return l[ux].data.getItemGraphicEl(l[ux].dataIndex)}),function(ux){return ux&&ux!==hx&&!gn[ux.id]});hx&&(stopAnimation(hx),fx.length?(each$f(fx,function(ux){stopAnimation(ux),removeEl(ux)}),p=!0,applyMorphAnimation(getPathList(fx),getPathList(hx),lx.divide,dx,ax,c)):fadeInElement(hx,dx,lx.dataIndex))}).updateOneToMany(function(ax,ox){var lx=l[ox],cx=lx.data.getItemGraphicEl(lx.dataIndex);if(!(cx&&gn[cx.id])){var dx=filter(map$1(ax,function(fx){return u[fx].data.getItemGraphicEl(u[fx].dataIndex)}),function(fx){return fx&&fx!==cx}),hx=u[ax[0]].data.hostModel;dx.length&&(each$f(dx,function(fx){return stopAnimation(fx)}),cx?(stopAnimation(cx),removeEl(cx),p=!0,applyMorphAnimation(getPathList(cx),getPathList(dx),lx.divide,hx,ax[0],c)):each$f(dx,function(fx){return fadeInElement(fx,hx,ax[0])}))}}).updateManyToMany(function(ax,ox){new DataDiffer(ox,ax,function(lx){return l[lx].data.getId(l[lx].dataIndex)},function(lx){return u[lx].data.getId(u[lx].dataIndex)}).update(function(lx,cx){ix(ax[lx],ox[cx])}).execute()}).execute(),p&&each$f(n,function(ax){var ox=ax.data,lx=ox.hostModel,cx=lx&&a.getViewOfSeriesModel(lx),dx=getAnimationConfig("update",lx,0);cx&&lx.isAnimationEnabled()&&dx&&dx.duration>0&&cx.group.traverse(function(hx){hx instanceof Path&&!hx.animators.length&&hx.animateFrom({style:{opacity:0}},dx)})})}function getSeriesTransitionKey(t){var n=t.getModel("universalTransition").get("seriesKey");return n||t.id}function convertArraySeriesKeyToString(t){return isArray$1(t)?t.sort().join(","):t}function getDivideShapeFromData(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(t,n){var a=createHashMap(),l=createHashMap(),u=createHashMap();return each$f(t.oldSeries,function(c,p){var d=t.oldDataGroupIds[p],Q=t.oldData[p],Ct=getSeriesTransitionKey(c),ar=convertArraySeriesKeyToString(Ct);l.set(ar,{dataGroupId:d,data:Q}),isArray$1(Ct)&&each$f(Ct,function(en){u.set(en,{key:ar,dataGroupId:d,data:Q})})}),each$f(n.updatedSeries,function(c){if(c.isUniversalTransitionEnabled()&&c.isAnimationEnabled()){var p=c.get("dataGroupId"),d=c.getData(),Q=getSeriesTransitionKey(c),Ct=convertArraySeriesKeyToString(Q),ar=l.get(Ct);if(ar)a.set(Ct,{oldSeries:[{dataGroupId:ar.dataGroupId,divide:getDivideShapeFromData(ar.data),data:ar.data}],newSeries:[{dataGroupId:p,divide:getDivideShapeFromData(d),data:d}]});else if(isArray$1(Q)){var en=[];each$f(Q,function(cn){var gn=l.get(cn);gn.data&&en.push({dataGroupId:gn.dataGroupId,divide:getDivideShapeFromData(gn.data),data:gn.data})}),en.length&&a.set(Ct,{oldSeries:en,newSeries:[{dataGroupId:p,data:d,divide:getDivideShapeFromData(d)}]})}else{var tn=u.get(Q);if(tn){var on=a.get(tn.key);on||(on={oldSeries:[{dataGroupId:tn.dataGroupId,data:tn.data,divide:getDivideShapeFromData(tn.data)}],newSeries:[]},a.set(tn.key,on)),on.newSeries.push({dataGroupId:p,data:d,divide:getDivideShapeFromData(d)})}}}}),a}function querySeries(t,n){for(var a=0;a<t.length;a++){var l=n.seriesIndex!=null&&n.seriesIndex===t[a].seriesIndex||n.seriesId!=null&&n.seriesId===t[a].id;if(l)return a}}function transitionSeriesFromOpt(t,n,a,l){var u=[],c=[];each$f(normalizeToArray(t.from),function(p){var d=querySeries(n.oldSeries,p);d>=0&&u.push({dataGroupId:n.oldDataGroupIds[d],data:n.oldData[d],divide:getDivideShapeFromData(n.oldData[d]),groupIdDim:p.dimension})}),each$f(normalizeToArray(t.to),function(p){var d=querySeries(a.updatedSeries,p);if(d>=0){var Q=a.updatedSeries[d].getData();c.push({dataGroupId:n.oldDataGroupIds[d],data:Q,divide:getDivideShapeFromData(Q),groupIdDim:p.dimension})}}),u.length>0&&c.length>0&&transitionBetween(u,c,l)}function installUniversalTransition(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,l){each$f(normalizeToArray(l.seriesTransition),function(u){each$f(normalizeToArray(u.to),function(c){for(var p=l.updatedSeries,d=0;d<p.length;d++)(c.seriesIndex!=null&&c.seriesIndex===p[d].seriesIndex||c.seriesId!=null&&c.seriesId===p[d].id)&&(p[d][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(n,a,l){var u=getUniversalTransitionGlobalStore(a);if(u.oldSeries&&l.updatedSeries&&l.optionChanged){var c=l.seriesTransition;if(c)each$f(normalizeToArray(c),function(on){transitionSeriesFromOpt(on,u,l,a)});else{var p=findTransitionSeriesBatches(u,l);each$f(p.keys(),function(on){var cn=p.get(on);transitionBetween(cn.oldSeries,cn.newSeries,a)})}each$f(l.updatedSeries,function(on){on[SERIES_UNIVERSAL_TRANSITION_PROP]&&(on[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var d=n.getSeries(),Q=u.oldSeries=[],Ct=u.oldDataGroupIds=[],ar=u.oldData=[],en=0;en<d.length;en++){var tn=d[en].getData();tn.count()<DATA_COUNT_THRESHOLD&&(Q.push(d[en]),Ct.push(d[en].get("dataGroupId")),ar.push(tn))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={},hasRequiredId;function requireId(){return hasRequiredId||(hasRequiredId=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1,a=function(){return"".concat(n++)};t.default=a}(id)),id}var sensors={},object={},debounce={},hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,c=null;return function(){for(var p=this,d=arguments.length,Q=new Array(d),Ct=0;Ct<d;Ct++)Q[Ct]=arguments[Ct];clearTimeout(c),c=setTimeout(function(){l.apply(p,Q)},u)}};t.default=n}(debounce)),debounce}var constant={},hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant;hasRequiredConstant=1,Object.defineProperty(constant,"__esModule",{value:!0}),constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var t="size-sensor-id";constant.SizeSensorId=t;var n="size-sensor-object";constant.SensorClassName=n;var a="-1";return constant.SensorTabIndex=a,constant}var hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,Object.defineProperty(object,"__esModule",{value:!0}),object.createSensor=void 0;var t=a(requireDebounce()),n=requireConstant();function a(u){return u&&u.__esModule?u:{default:u}}var l=function(c,p){var d=void 0,Q=[],Ct=function(){getComputedStyle(c).position==="static"&&(c.style.position="relative");var gn=document.createElement("object");return gn.onload=function(){gn.contentDocument.defaultView.addEventListener("resize",ar),ar()},gn.style.display="block",gn.style.position="absolute",gn.style.top="0",gn.style.left="0",gn.style.height="100%",gn.style.width="100%",gn.style.overflow="hidden",gn.style.pointerEvents="none",gn.style.zIndex="-1",gn.style.opacity="0",gn.setAttribute("class",n.SensorClassName),gn.setAttribute("tabindex",n.SensorTabIndex),gn.type="text/html",c.appendChild(gn),gn.data="about:blank",gn},ar=(0,t.default)(function(){Q.forEach(function(cn){cn(c)})}),en=function(gn){d||(d=Ct()),Q.indexOf(gn)===-1&&Q.push(gn)},tn=function(){d&&d.parentNode&&(d.contentDocument&&d.contentDocument.defaultView.removeEventListener("resize",ar),d.parentNode.removeChild(d),c.removeAttribute(n.SizeSensorId),d=void 0,Q=[],p&&p())},on=function(gn){var Cn=Q.indexOf(gn);Cn!==-1&&Q.splice(Cn,1),Q.length===0&&d&&tn()};return{element:c,bind:en,destroy:tn,unbind:on}};return object.createSensor=l,object}var resizeObserver={},hasRequiredResizeObserver;function requireResizeObserver(){if(hasRequiredResizeObserver)return resizeObserver;hasRequiredResizeObserver=1,Object.defineProperty(resizeObserver,"__esModule",{value:!0}),resizeObserver.createSensor=void 0;var t=requireConstant(),n=a(requireDebounce());function a(u){return u&&u.__esModule?u:{default:u}}var l=function(c,p){var d=void 0,Q=[],Ct=(0,n.default)(function(){Q.forEach(function(cn){cn(c)})}),ar=function(){var gn=new ResizeObserver(Ct);return gn.observe(c),Ct(),gn},en=function(gn){d||(d=ar()),Q.indexOf(gn)===-1&&Q.push(gn)},tn=function(){d.disconnect(),Q=[],d=void 0,c.removeAttribute(t.SizeSensorId),p&&p()},on=function(gn){var Cn=Q.indexOf(gn);Cn!==-1&&Q.splice(Cn,1),Q.length===0&&d&&tn()};return{element:c,bind:en,destroy:tn,unbind:on}};return resizeObserver.createSensor=l,resizeObserver}var hasRequiredSensors;function requireSensors(){if(hasRequiredSensors)return sensors;hasRequiredSensors=1,Object.defineProperty(sensors,"__esModule",{value:!0}),sensors.createSensor=void 0;var t=requireObject(),n=requireResizeObserver(),a=typeof ResizeObserver<"u"?n.createSensor:t.createSensor;return sensors.createSensor=a,sensors}var hasRequiredSensorPool;function requireSensorPool(){if(hasRequiredSensorPool)return sensorPool;hasRequiredSensorPool=1,Object.defineProperty(sensorPool,"__esModule",{value:!0}),sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var t=l(requireId()),n=requireSensors(),a=requireConstant();function l(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={};sensorPool.Sensors=u;function c(Q){Q&&u[Q]&&delete u[Q]}var p=function(Ct){var ar=Ct.getAttribute(a.SizeSensorId);if(ar&&u[ar])return u[ar];var en=(0,t.default)();Ct.setAttribute(a.SizeSensorId,en);var tn=(0,n.createSensor)(Ct,function(){return c(en)});return u[en]=tn,tn};sensorPool.getSensor=p;var d=function(Ct){var ar=Ct.element.getAttribute(a.SizeSensorId);Ct.destroy(),c(ar)};return sensorPool.removeSensor=d,sensorPool}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ver=lib.clear=lib.bind=void 0;var t=requireSensorPool(),n=function(c,p){var d=(0,t.getSensor)(c);return d.bind(p),function(){d.unbind(p)}};lib.bind=n;var a=function(c){var p=(0,t.getSensor)(c);(0,t.removeSensor)(p)};lib.clear=a;var l="1.0.2";return lib.ver=l,lib}var libExports=requireLib();function pick(t,n){var a={};return n.forEach(function(l){a[l]=t[l]}),a}function isFunction(t){return typeof t=="function"}function isString(t){return typeof t=="string"}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var l,u,c;if(Array.isArray(n)){if(l=n.length,l!=a.length)return!1;for(u=l;u--!==0;)if(!t(n[u],a[u]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(c=Object.keys(n),l=c.length,l!==Object.keys(a).length)return!1;for(u=l;u--!==0;)if(!Object.prototype.hasOwnProperty.call(a,c[u]))return!1;for(u=l;u--!==0;){var p=c[u];if(!t(n[p],a[p]))return!1}return!0}return n!==n&&a!==a}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const isEqual=getDefaultExportFromCjs(fastDeepEqualExports);var EChartsReactCore=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.echarts=a.echarts,l.ele=null,l.isInitialResize=!0,l}return n.prototype.componentDidMount=function(){this.renderNewEcharts()},n.prototype.componentDidUpdate=function(a){var l=this.props.shouldSetOption;if(!(isFunction(l)&&!l(a,this.props))){if(!isEqual(a.theme,this.props.theme)||!isEqual(a.opts,this.props.opts)||!isEqual(a.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var u=["option","notMerge","lazyUpdate","showLoading","loadingOption"];isEqual(pick(this.props,u),pick(a,u))||this.updateEChartsOption(),(!isEqual(a.style,this.props.style)||!isEqual(a.className,this.props.className))&&this.resize()}},n.prototype.componentWillUnmount=function(){this.dispose()},n.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},n.prototype.dispose=function(){if(this.ele){try{libExports.clear(this.ele)}catch(a){console.warn(a)}this.echarts.dispose(this.ele)}},n.prototype.renderNewEcharts=function(){var a=this,l=this.props,u=l.onEvents,c=l.onChartReady,p=this.updateEChartsOption();this.bindEvents(p,u||{}),isFunction(c)&&c(p),this.ele&&libExports.bind(this.ele,function(){a.resize()})},n.prototype.bindEvents=function(a,l){function u(p,d){isString(p)&&isFunction(d)&&a.on(p,function(Q){d(Q,a)})}for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&u(c,l[c])},n.prototype.updateEChartsOption=function(){var a=this.props,l=a.option,u=a.notMerge,c=u===void 0?!1:u,p=a.lazyUpdate,d=p===void 0?!1:p,Q=a.showLoading,Ct=a.loadingOption,ar=Ct===void 0?null:Ct,en=this.getEchartsInstance();return en.setOption(l,c,d),Q?en.showLoading(ar):en.hideLoading(),en},n.prototype.resize=function(){var a=this.getEchartsInstance();if(!this.isInitialResize)try{a.resize()}catch(l){console.warn(l)}this.isInitialResize=!1},n.prototype.render=function(){var a=this,l=this.props,u=l.style,c=l.className,p=c===void 0?"":c,d=__assign({height:300},u);return React.createElement("div",{ref:function(Q){a.ele=Q},style:d,className:"echarts-for-react "+p})},n}(reactExports.PureComponent),EChartsReact=function(t){__extends(n,t);function n(a){var l=t.call(this,a)||this;return l.echarts=echarts,l}return n}(EChartsReactCore);const MyEChartsPlot=({freq_new:t,mag_new:n})=>{const a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#aaa"}},formatter:function(l){const u=l[0],c=u.value[0],p=u.value[1];let d="";return c>=1e9?d=(c/1e9).toFixed(3)+" GHz":c>=1e6?d=(c/1e6).toFixed(3)+" MHz":c>=1e3?d=(c/1e3).toFixed(3)+" kHz":d=c.toFixed(2)+" Hz",`
      <strong>Frequency:</strong> ${d}<br/>
      <strong>Amplitude:</strong> ${p.toPrecision(6)} dB
    `}},xAxis:{min:t[0],max:t[t.length-1],type:"log",name:"freq (Hz)",minorSplitLine:{show:!0},axisLabel:{formatter:function(l){return l>=1e9?(l/1e9).toFixed(2)+"G":l>=1e6?(l/1e6).toFixed(2)+"M":l>=1e3?(l/1e3).toFixed(2)+"k":l.toFixed(2)}}},yAxis:{type:"value",name:"amplitude (dB)"},series:[{data:t.map((l,u)=>[l,n[u]]),type:"line",smooth:!1,lineStyle:{width:2}}]};return jsxRuntimeExports.jsx(EChartsReact,{option:a,style:{width:"100%",height:"400px"}})},Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiContainer"})}),initialSchematic={settings:{defaultZoom:.75,gridSize:32,width:2432,height:1792,maxZoom:2},shapes:[{image:"origin.svg",x:0,y:0,fixed:!0,offset:[-32,-32]},{image:"gnd.svg",connectors:[[0,0]],x:192,y:128,offset:[-100,-180]},{image:"vin.svg",connectors:[[0,0]],x:-192,y:0,offset:[-64,0]},{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:-96,y:-64,label:{text:"L0",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:64,y:-64,label:{text:"R0",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:192,y:32,label:{text:"C0",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},{image:"vprobe.svg",connectors:[[0,0]],x:0,y:-160,offset:[-10,-90],label:{text:"X0",class:"circuit_label",x:0,y:-30}}],wires:[{start:{connectorID:0,shapeID:1},end:{shapeID:5,connectorID:1},points:[]},{start:{connectorID:0,shapeID:5},end:{shapeID:4,connectorID:1},points:[[192,-64]]},{start:{connectorID:0,shapeID:4},end:{shapeID:3,connectorID:1},points:[]},{start:{connectorID:0,shapeID:3},end:{shapeID:2,connectorID:0},points:[[-192,-64]]},{start:{connectorID:0,shapeID:6},end:{shapeID:3,connectorID:1},points:[[0,-64]]}]},initialComponents={L0:{type:"inductor",value:1,unit:"uH"},R0:{type:"resistor",value:10,unit:"K"},C0:{type:"capacitor",value:10,unit:"fF"}},initialSettings={fmin:1,fminUnit:"MHz",fmax:100,fmaxUnit:"GHz",resolution:100};var urlContainsState=!1;function stateFromURL(){const t=new URL(window.location.href),n=t.searchParams.get("components"),a=t.searchParams.get("settings"),l=t.searchParams.get("schematic");var u=initialComponents,c=initialSettings,p=initialSchematic;if(n&&(urlContainsState=!0,u=n.split("__").reduce((d,Q)=>{const[Ct,ar,en,tn]=Q.split("_");return d[Ct]={type:ar,value:parseFloat(en),unit:tn},d},{})),a&&(urlContainsState=!0,c=a.split("__").reduce((d,Q)=>{const[Ct,ar]=Q.split("_");return d[Ct]=isNaN(ar)?ar:parseFloat(ar),d},{})),l){urlContainsState=!0;const d=Uint8Array.from(atob(decodeURIComponent(l)),Ct=>Ct.charCodeAt(0)),Q=pako.inflate(d,{to:"string"});p=JSON.parse(Q)}return[u,c,p]}const[modifiedComponents,modifiedSettings,modifiedSchematic]=stateFromURL();function new_calculate_tf(textResult,fRange,numSteps,components){if(textResult=="")return{freq_new:[],mag_new:[]};var complex_freq=textResult,rep;for(const t in components)rep=RegExp(t,"g"),complex_freq=complex_freq.replace(rep,components[t]);const re=/s/gi,reDollar=/\$/gi,re2=/\^/gi;var res=complex_freq.replace(re2,"**");const re3=/sqrt/gi;res=res.replace(re3,"$");var fstepdB_20=Math.log10(fRange.fmax/fRange.fmin)/numSteps,fstep=10**fstepdB_20,absNew,evalNew;const freq=[],mag=[];try{for(var f=fRange.fmin;f<fRange.fmax;f=f*fstep){freq.push(f);const mathString=res.replace(re,2*Math.PI*f).replace(reDollar,"Math.sqrt");evalNew=eval(mathString),absNew=Math.abs(evalNew),mag.push(20*Math.log10(absNew))}}catch(t){console.log("oh no",t)}return{freq_new:freq,mag_new:mag}}function compToURL(t,n){return`${t}_${n.type}_${n.value}_${n.unit}`}function App(){const[t,n]=reactExports.useState([]),[a,l]=reactExports.useState({}),[u,c]=reactExports.useState({text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:""}),[p,d]=reactExports.useState(modifiedComponents),[Q,Ct]=reactExports.useState(modifiedSettings),[ar,en]=reactExports.useState({pointer:0,state:[modifiedSchematic]}),[tn,on]=reactExports.useState(!1),cn=()=>{window.location.href=window.location.origin+window.location.pathname};reactExports.useEffect(()=>{const cx=setTimeout(()=>{urlContainsState&&on(!0)},1e3);return()=>clearTimeout(cx)},[]);function gn(){return jsxRuntimeExports.jsx(Snackbar,{open:tn,autoHideDuration:1e4,onClose:()=>on(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Some settings were loaded from the URL. Please click here to reset to the default state.",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200},onClick:cn})})}const Cn={fmin:Q.fmin*units.frequency[Q.fminUnit],fmax:Q.fmax*units.frequency[Q.fmaxUnit]},ex={};for(const cx in p)ex[cx]=p[cx].value*units[p[cx].type][p[cx].unit];const{freq_new:ix,mag_new:ax}=new_calculate_tf(u.complexResponse,Cn,Q.resolution,ex);function ox(){const cx=new URL(window.location.href);cx.searchParams.set("components",Object.keys(p).map(ux=>compToURL(ux,p[ux])).join("__")),cx.searchParams.set("settings",Object.keys(Q).map(ux=>`${ux}_${Q[ux]}`).join("__"));const dx=JSON.stringify(ar.state[ar.pointer]),hx=pako.deflate(dx,{to:"string"}),fx=encodeURIComponent(btoa(String.fromCharCode(...hx)));return cx.searchParams.set("schematic",fx),window.history.pushState({},"",cx.toString()),cx.toString()}async function lx(){const[cx,dx]=await calcBilinear(u.solver);c({...u,bilinearRaw:cx,bilinearMathML:`<math>${dx}</math>`})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(gn,{}),jsxRuntimeExports.jsx(NavBar,{stateToURL:ox}),jsxRuntimeExports.jsx("div",{className:"w-100 p-2 bg-green pb-5",children:jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{px:{xs:0,sm:2}},children:[jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col",children:jsxRuntimeExports.jsx("p",{className:"my-0",children:"This free online circuit solver tool can calculate the transfer function of circuits built from resistors, capacitors, inductors and op-amps. The user can quickly explore different topologies and find their Laplace transform"})})}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-0",id:"schematic",children:[jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(VisioJSSchematic,{setResults:c,setNodes:n,history:ar,setHistory:en,setComponentValues:d,setFullyConnectedComponents:l})}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(ComponentAdjuster,{componentValues:p,setComponentValues:d})})]}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-3",id:"schematic",children:[jsxRuntimeExports.jsx(ChoseTF,{setResults:c,nodes:t,fullyConnectedComponents:a,componentValuesSolved:ex}),u.text!=""&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace Transform",textResult:u.text,mathML:u.mathML,caclDone:u.text!=""}),u.numericText!=null&&jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace Transform (numeric)",textResult:u.numericText,mathML:u.numericML,caclDone:u.text!=""}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(MyEChartsPlot,{freq_new:ix,mag_new:ax})}),jsxRuntimeExports.jsx(FreqAdjusters,{settings:Q,setSettings:Ct}),u.bilinearMathML==""?jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:1,children:jsxRuntimeExports.jsx(Button,{variant:"contained",color:"info",sx:{m:3},onClick:async()=>{lx()},children:"Calculate bilinear transform"})}):jsxRuntimeExports.jsx(DisplayMathML,{title:"Bilinear Transform",textResult:u.bilinearRaw,mathML:u.bilinearMathML,caclDone:u.text!=""})]})]}),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1",children:jsxRuntimeExports.jsx(ReleaseNotes,{})},"releaseNotes"),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1 shadow-sm rounded bg-lightgreen",children:jsxRuntimeExports.jsx($,{"website-id":"12350","page-id":"7"})},"comments")]})},"wrapper"),jsxRuntimeExports.jsx(Footer,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}))});export default X$();
