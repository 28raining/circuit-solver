var Z$=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var Y$=Z$((K$,module)=>{function _mergeNamespaces(t,n){for(var a=0;a<n.length;a++){const s=n[a];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(s,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var n=t.default;if(typeof n=="function"){var a=function s(){var l=!1;try{l=this instanceof s}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var l=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(a,s,l.get?l:{enumerable:!0,get:function(){return t[s]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,l,u){var c=null;if(u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),"key"in l){u={};for(var d in l)d!=="key"&&(u[d]=l[d])}else u=l;return l=u.ref,{$$typeof:t,type:s,key:c,ref:l!==void 0?l:null,props:u}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),Ct=Symbol.for("react.suspense"),ar=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),tn=Symbol.iterator;function on(Ax){return Ax===null||typeof Ax!="object"?null:(Ax=tn&&Ax[tn]||Ax["@@iterator"],typeof Ax=="function"?Ax:null)}var cn={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dn=Object.assign,Cn={};function In(Ax,Nx,Ux){this.props=Ax,this.context=Nx,this.refs=Cn,this.updater=Ux||cn}In.prototype.isReactComponent={},In.prototype.setState=function(Ax,Nx){if(typeof Ax!="object"&&typeof Ax!="function"&&Ax!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ax,Nx,"setState")},In.prototype.forceUpdate=function(Ax){this.updater.enqueueForceUpdate(this,Ax,"forceUpdate")};function ix(){}ix.prototype=In.prototype;function ax(Ax,Nx,Ux){this.props=Ax,this.context=Nx,this.refs=Cn,this.updater=Ux||cn}var ox=ax.prototype=new ix;ox.constructor=ax,dn(ox,In.prototype),ox.isPureReactComponent=!0;var sx=Array.isArray,ux={H:null,A:null,T:null,S:null,V:null},cx=Object.prototype.hasOwnProperty;function hx(Ax,Nx,Ux,Rx,Ox,Px){return Ux=Px.ref,{$$typeof:t,type:Ax,key:Nx,ref:Ux!==void 0?Ux:null,props:Px}}function gx(Ax,Nx){return hx(Ax.type,Nx,void 0,void 0,void 0,Ax.props)}function fx(Ax){return typeof Ax=="object"&&Ax!==null&&Ax.$$typeof===t}function dx(Ax){var Nx={"=":"=0",":":"=2"};return"$"+Ax.replace(/[=:]/g,function(Ux){return Nx[Ux]})}var mx=/\/+/g;function vx(Ax,Nx){return typeof Ax=="object"&&Ax!==null&&Ax.key!=null?dx(""+Ax.key):Nx.toString(36)}function bx(){}function xx(Ax){switch(Ax.status){case"fulfilled":return Ax.value;case"rejected":throw Ax.reason;default:switch(typeof Ax.status=="string"?Ax.then(bx,bx):(Ax.status="pending",Ax.then(function(Nx){Ax.status==="pending"&&(Ax.status="fulfilled",Ax.value=Nx)},function(Nx){Ax.status==="pending"&&(Ax.status="rejected",Ax.reason=Nx)})),Ax.status){case"fulfilled":return Ax.value;case"rejected":throw Ax.reason}}throw Ax}function _x(Ax,Nx,Ux,Rx,Ox){var Px=typeof Ax;(Px==="undefined"||Px==="boolean")&&(Ax=null);var $x=!1;if(Ax===null)$x=!0;else switch(Px){case"bigint":case"string":case"number":$x=!0;break;case"object":switch(Ax.$$typeof){case t:case n:$x=!0;break;case en:return $x=Ax._init,_x($x(Ax._payload),Nx,Ux,Rx,Ox)}}if($x)return Ox=Ox(Ax),$x=Rx===""?"."+vx(Ax,0):Rx,sx(Ox)?(Ux="",$x!=null&&(Ux=$x.replace(mx,"$&/")+"/"),_x(Ox,Nx,Ux,"",function(qx){return qx})):Ox!=null&&(fx(Ox)&&(Ox=gx(Ox,Ux+(Ox.key==null||Ax&&Ax.key===Ox.key?"":(""+Ox.key).replace(mx,"$&/")+"/")+$x)),Nx.push(Ox)),1;$x=0;var Lx=Rx===""?".":Rx+":";if(sx(Ax))for(var zx=0;zx<Ax.length;zx++)Rx=Ax[zx],Px=Lx+vx(Rx,zx),$x+=_x(Rx,Nx,Ux,Px,Ox);else if(zx=on(Ax),typeof zx=="function")for(Ax=zx.call(Ax),zx=0;!(Rx=Ax.next()).done;)Rx=Rx.value,Px=Lx+vx(Rx,zx++),$x+=_x(Rx,Nx,Ux,Px,Ox);else if(Px==="object"){if(typeof Ax.then=="function")return _x(xx(Ax),Nx,Ux,Rx,Ox);throw Nx=String(Ax),Error("Objects are not valid as a React child (found: "+(Nx==="[object Object]"?"object with keys {"+Object.keys(Ax).join(", ")+"}":Nx)+"). If you meant to render a collection of children, use an array instead.")}return $x}function Ex(Ax,Nx,Ux){if(Ax==null)return Ax;var Rx=[],Ox=0;return _x(Ax,Rx,"","",function(Px){return Nx.call(Ux,Px,Ox++)}),Rx}function Tx(Ax){if(Ax._status===-1){var Nx=Ax._result;Nx=Nx(),Nx.then(function(Ux){(Ax._status===0||Ax._status===-1)&&(Ax._status=1,Ax._result=Ux)},function(Ux){(Ax._status===0||Ax._status===-1)&&(Ax._status=2,Ax._result=Ux)}),Ax._status===-1&&(Ax._status=0,Ax._result=Nx)}if(Ax._status===1)return Ax._result.default;throw Ax._result}var Cx=typeof reportError=="function"?reportError:function(Ax){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Nx=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ax=="object"&&Ax!==null&&typeof Ax.message=="string"?String(Ax.message):String(Ax),error:Ax});if(!window.dispatchEvent(Nx))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ax);return}console.error(Ax)};function Mx(){}return react_production.Children={map:Ex,forEach:function(Ax,Nx,Ux){Ex(Ax,function(){Nx.apply(this,arguments)},Ux)},count:function(Ax){var Nx=0;return Ex(Ax,function(){Nx++}),Nx},toArray:function(Ax){return Ex(Ax,function(Nx){return Nx})||[]},only:function(Ax){if(!fx(Ax))throw Error("React.Children.only expected to receive a single React element child.");return Ax}},react_production.Component=In,react_production.Fragment=a,react_production.Profiler=l,react_production.PureComponent=ax,react_production.StrictMode=s,react_production.Suspense=Ct,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ux,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Ax){return ux.H.useMemoCache(Ax)}},react_production.cache=function(Ax){return function(){return Ax.apply(null,arguments)}},react_production.cloneElement=function(Ax,Nx,Ux){if(Ax==null)throw Error("The argument must be a React element, but you passed "+Ax+".");var Rx=dn({},Ax.props),Ox=Ax.key,Px=void 0;if(Nx!=null)for($x in Nx.ref!==void 0&&(Px=void 0),Nx.key!==void 0&&(Ox=""+Nx.key),Nx)!cx.call(Nx,$x)||$x==="key"||$x==="__self"||$x==="__source"||$x==="ref"&&Nx.ref===void 0||(Rx[$x]=Nx[$x]);var $x=arguments.length-2;if($x===1)Rx.children=Ux;else if(1<$x){for(var Lx=Array($x),zx=0;zx<$x;zx++)Lx[zx]=arguments[zx+2];Rx.children=Lx}return hx(Ax.type,Ox,void 0,void 0,Px,Rx)},react_production.createContext=function(Ax){return Ax={$$typeof:c,_currentValue:Ax,_currentValue2:Ax,_threadCount:0,Provider:null,Consumer:null},Ax.Provider=Ax,Ax.Consumer={$$typeof:u,_context:Ax},Ax},react_production.createElement=function(Ax,Nx,Ux){var Rx,Ox={},Px=null;if(Nx!=null)for(Rx in Nx.key!==void 0&&(Px=""+Nx.key),Nx)cx.call(Nx,Rx)&&Rx!=="key"&&Rx!=="__self"&&Rx!=="__source"&&(Ox[Rx]=Nx[Rx]);var $x=arguments.length-2;if($x===1)Ox.children=Ux;else if(1<$x){for(var Lx=Array($x),zx=0;zx<$x;zx++)Lx[zx]=arguments[zx+2];Ox.children=Lx}if(Ax&&Ax.defaultProps)for(Rx in $x=Ax.defaultProps,$x)Ox[Rx]===void 0&&(Ox[Rx]=$x[Rx]);return hx(Ax,Px,void 0,void 0,null,Ox)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Ax){return{$$typeof:d,render:Ax}},react_production.isValidElement=fx,react_production.lazy=function(Ax){return{$$typeof:en,_payload:{_status:-1,_result:Ax},_init:Tx}},react_production.memo=function(Ax,Nx){return{$$typeof:ar,type:Ax,compare:Nx===void 0?null:Nx}},react_production.startTransition=function(Ax){var Nx=ux.T,Ux={};ux.T=Ux;try{var Rx=Ax(),Ox=ux.S;Ox!==null&&Ox(Ux,Rx),typeof Rx=="object"&&Rx!==null&&typeof Rx.then=="function"&&Rx.then(Mx,Cx)}catch(Px){Cx(Px)}finally{ux.T=Nx}},react_production.unstable_useCacheRefresh=function(){return ux.H.useCacheRefresh()},react_production.use=function(Ax){return ux.H.use(Ax)},react_production.useActionState=function(Ax,Nx,Ux){return ux.H.useActionState(Ax,Nx,Ux)},react_production.useCallback=function(Ax,Nx){return ux.H.useCallback(Ax,Nx)},react_production.useContext=function(Ax){return ux.H.useContext(Ax)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Ax,Nx){return ux.H.useDeferredValue(Ax,Nx)},react_production.useEffect=function(Ax,Nx,Ux){var Rx=ux.H;if(typeof Ux=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Rx.useEffect(Ax,Nx)},react_production.useId=function(){return ux.H.useId()},react_production.useImperativeHandle=function(Ax,Nx,Ux){return ux.H.useImperativeHandle(Ax,Nx,Ux)},react_production.useInsertionEffect=function(Ax,Nx){return ux.H.useInsertionEffect(Ax,Nx)},react_production.useLayoutEffect=function(Ax,Nx){return ux.H.useLayoutEffect(Ax,Nx)},react_production.useMemo=function(Ax,Nx){return ux.H.useMemo(Ax,Nx)},react_production.useOptimistic=function(Ax,Nx){return ux.H.useOptimistic(Ax,Nx)},react_production.useReducer=function(Ax,Nx,Ux){return ux.H.useReducer(Ax,Nx,Ux)},react_production.useRef=function(Ax){return ux.H.useRef(Ax)},react_production.useState=function(Ax){return ux.H.useState(Ax)},react_production.useSyncExternalStore=function(Ax,Nx,Ux){return ux.H.useSyncExternalStore(Ax,Nx,Ux)},react_production.useTransition=function(){return ux.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function n(Ex,Tx){var Cx=Ex.length;Ex.push(Tx);e:for(;0<Cx;){var Mx=Cx-1>>>1,Ax=Ex[Mx];if(0<l(Ax,Tx))Ex[Mx]=Tx,Ex[Cx]=Ax,Cx=Mx;else break e}}function a(Ex){return Ex.length===0?null:Ex[0]}function s(Ex){if(Ex.length===0)return null;var Tx=Ex[0],Cx=Ex.pop();if(Cx!==Tx){Ex[0]=Cx;e:for(var Mx=0,Ax=Ex.length,Nx=Ax>>>1;Mx<Nx;){var Ux=2*(Mx+1)-1,Rx=Ex[Ux],Ox=Ux+1,Px=Ex[Ox];if(0>l(Rx,Cx))Ox<Ax&&0>l(Px,Rx)?(Ex[Mx]=Px,Ex[Ox]=Cx,Mx=Ox):(Ex[Mx]=Rx,Ex[Ux]=Cx,Mx=Ux);else if(Ox<Ax&&0>l(Px,Cx))Ex[Mx]=Px,Ex[Ox]=Cx,Mx=Ox;else break e}}return Tx}function l(Ex,Tx){var Cx=Ex.sortIndex-Tx.sortIndex;return Cx!==0?Cx:Ex.id-Tx.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var Ct=[],ar=[],en=1,tn=null,on=3,cn=!1,dn=!1,Cn=!1,In=!1,ix=typeof setTimeout=="function"?setTimeout:null,ax=typeof clearTimeout=="function"?clearTimeout:null,ox=typeof setImmediate<"u"?setImmediate:null;function sx(Ex){for(var Tx=a(ar);Tx!==null;){if(Tx.callback===null)s(ar);else if(Tx.startTime<=Ex)s(ar),Tx.sortIndex=Tx.expirationTime,n(Ct,Tx);else break;Tx=a(ar)}}function ux(Ex){if(Cn=!1,sx(Ex),!dn)if(a(Ct)!==null)dn=!0,cx||(cx=!0,vx());else{var Tx=a(ar);Tx!==null&&_x(ux,Tx.startTime-Ex)}}var cx=!1,hx=-1,gx=5,fx=-1;function dx(){return In?!0:!(t.unstable_now()-fx<gx)}function mx(){if(In=!1,cx){var Ex=t.unstable_now();fx=Ex;var Tx=!0;try{e:{dn=!1,Cn&&(Cn=!1,ax(hx),hx=-1),cn=!0;var Cx=on;try{t:{for(sx(Ex),tn=a(Ct);tn!==null&&!(tn.expirationTime>Ex&&dx());){var Mx=tn.callback;if(typeof Mx=="function"){tn.callback=null,on=tn.priorityLevel;var Ax=Mx(tn.expirationTime<=Ex);if(Ex=t.unstable_now(),typeof Ax=="function"){tn.callback=Ax,sx(Ex),Tx=!0;break t}tn===a(Ct)&&s(Ct),sx(Ex)}else s(Ct);tn=a(Ct)}if(tn!==null)Tx=!0;else{var Nx=a(ar);Nx!==null&&_x(ux,Nx.startTime-Ex),Tx=!1}}break e}finally{tn=null,on=Cx,cn=!1}Tx=void 0}}finally{Tx?vx():cx=!1}}}var vx;if(typeof ox=="function")vx=function(){ox(mx)};else if(typeof MessageChannel<"u"){var bx=new MessageChannel,xx=bx.port2;bx.port1.onmessage=mx,vx=function(){xx.postMessage(null)}}else vx=function(){ix(mx,0)};function _x(Ex,Tx){hx=ix(function(){Ex(t.unstable_now())},Tx)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ex){Ex.callback=null},t.unstable_forceFrameRate=function(Ex){0>Ex||125<Ex?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gx=0<Ex?Math.floor(1e3/Ex):5},t.unstable_getCurrentPriorityLevel=function(){return on},t.unstable_next=function(Ex){switch(on){case 1:case 2:case 3:var Tx=3;break;default:Tx=on}var Cx=on;on=Tx;try{return Ex()}finally{on=Cx}},t.unstable_requestPaint=function(){In=!0},t.unstable_runWithPriority=function(Ex,Tx){switch(Ex){case 1:case 2:case 3:case 4:case 5:break;default:Ex=3}var Cx=on;on=Ex;try{return Tx()}finally{on=Cx}},t.unstable_scheduleCallback=function(Ex,Tx,Cx){var Mx=t.unstable_now();switch(typeof Cx=="object"&&Cx!==null?(Cx=Cx.delay,Cx=typeof Cx=="number"&&0<Cx?Mx+Cx:Mx):Cx=Mx,Ex){case 1:var Ax=-1;break;case 2:Ax=250;break;case 5:Ax=1073741823;break;case 4:Ax=1e4;break;default:Ax=5e3}return Ax=Cx+Ax,Ex={id:en++,callback:Tx,priorityLevel:Ex,startTime:Cx,expirationTime:Ax,sortIndex:-1},Cx>Mx?(Ex.sortIndex=Cx,n(ar,Ex),a(Ct)===null&&Ex===a(ar)&&(Cn?(ax(hx),hx=-1):Cn=!0,_x(ux,Cx-Mx))):(Ex.sortIndex=Ax,n(Ct,Ex),dn||cn||(dn=!0,cx||(cx=!0,vx()))),Ex},t.unstable_shouldYield=dx,t.unstable_wrapCallback=function(Ex){var Tx=on;return function(){var Cx=on;on=Tx;try{return Ex.apply(this,arguments)}finally{on=Cx}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function n(Ct){var ar="https://react.dev/errors/"+Ct;if(1<arguments.length){ar+="?args[]="+encodeURIComponent(arguments[1]);for(var en=2;en<arguments.length;en++)ar+="&args[]="+encodeURIComponent(arguments[en])}return"Minified React error #"+Ct+"; visit "+ar+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(Ct,ar,en){var tn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:tn==null?null:""+tn,children:Ct,containerInfo:ar,implementation:en}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(Ct,ar){if(Ct==="font")return"";if(typeof ar=="string")return ar==="use-credentials"?ar:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(Ct,ar){var en=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ar||ar.nodeType!==1&&ar.nodeType!==9&&ar.nodeType!==11)throw Error(n(299));return u(Ct,ar,null,en)},reactDom_production.flushSync=function(Ct){var ar=c.T,en=s.p;try{if(c.T=null,s.p=2,Ct)return Ct()}finally{c.T=ar,s.p=en,s.d.f()}},reactDom_production.preconnect=function(Ct,ar){typeof Ct=="string"&&(ar?(ar=ar.crossOrigin,ar=typeof ar=="string"?ar==="use-credentials"?ar:"":void 0):ar=null,s.d.C(Ct,ar))},reactDom_production.prefetchDNS=function(Ct){typeof Ct=="string"&&s.d.D(Ct)},reactDom_production.preinit=function(Ct,ar){if(typeof Ct=="string"&&ar&&typeof ar.as=="string"){var en=ar.as,tn=d(en,ar.crossOrigin),on=typeof ar.integrity=="string"?ar.integrity:void 0,cn=typeof ar.fetchPriority=="string"?ar.fetchPriority:void 0;en==="style"?s.d.S(Ct,typeof ar.precedence=="string"?ar.precedence:void 0,{crossOrigin:tn,integrity:on,fetchPriority:cn}):en==="script"&&s.d.X(Ct,{crossOrigin:tn,integrity:on,fetchPriority:cn,nonce:typeof ar.nonce=="string"?ar.nonce:void 0})}},reactDom_production.preinitModule=function(Ct,ar){if(typeof Ct=="string")if(typeof ar=="object"&&ar!==null){if(ar.as==null||ar.as==="script"){var en=d(ar.as,ar.crossOrigin);s.d.M(Ct,{crossOrigin:en,integrity:typeof ar.integrity=="string"?ar.integrity:void 0,nonce:typeof ar.nonce=="string"?ar.nonce:void 0})}}else ar==null&&s.d.M(Ct)},reactDom_production.preload=function(Ct,ar){if(typeof Ct=="string"&&typeof ar=="object"&&ar!==null&&typeof ar.as=="string"){var en=ar.as,tn=d(en,ar.crossOrigin);s.d.L(Ct,en,{crossOrigin:tn,integrity:typeof ar.integrity=="string"?ar.integrity:void 0,nonce:typeof ar.nonce=="string"?ar.nonce:void 0,type:typeof ar.type=="string"?ar.type:void 0,fetchPriority:typeof ar.fetchPriority=="string"?ar.fetchPriority:void 0,referrerPolicy:typeof ar.referrerPolicy=="string"?ar.referrerPolicy:void 0,imageSrcSet:typeof ar.imageSrcSet=="string"?ar.imageSrcSet:void 0,imageSizes:typeof ar.imageSizes=="string"?ar.imageSizes:void 0,media:typeof ar.media=="string"?ar.media:void 0})}},reactDom_production.preloadModule=function(Ct,ar){if(typeof Ct=="string")if(ar){var en=d(ar.as,ar.crossOrigin);s.d.m(Ct,{as:typeof ar.as=="string"&&ar.as!=="script"?ar.as:void 0,crossOrigin:en,integrity:typeof ar.integrity=="string"?ar.integrity:void 0})}else s.d.m(Ct)},reactDom_production.requestFormReset=function(Ct){s.d.r(Ct)},reactDom_production.unstable_batchedUpdates=function(Ct,ar){return Ct(ar)},reactDom_production.useFormState=function(Ct,ar,en){return c.H.useFormState(Ct,ar,en)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),n=requireReact(),a=requireReactDom();function s(gn){var ex="https://react.dev/errors/"+gn;if(1<arguments.length){ex+="?args[]="+encodeURIComponent(arguments[1]);for(var lx=2;lx<arguments.length;lx++)ex+="&args[]="+encodeURIComponent(arguments[lx])}return"Minified React error #"+gn+"; visit "+ex+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(gn){return!(!gn||gn.nodeType!==1&&gn.nodeType!==9&&gn.nodeType!==11)}function u(gn){var ex=gn,lx=gn;if(gn.alternate)for(;ex.return;)ex=ex.return;else{gn=ex;do ex=gn,(ex.flags&4098)!==0&&(lx=ex.return),gn=ex.return;while(gn)}return ex.tag===3?lx:null}function c(gn){if(gn.tag===13){var ex=gn.memoizedState;if(ex===null&&(gn=gn.alternate,gn!==null&&(ex=gn.memoizedState)),ex!==null)return ex.dehydrated}return null}function d(gn){if(u(gn)!==gn)throw Error(s(188))}function Ct(gn){var ex=gn.alternate;if(!ex){if(ex=u(gn),ex===null)throw Error(s(188));return ex!==gn?null:gn}for(var lx=gn,px=ex;;){var yx=lx.return;if(yx===null)break;var Sx=yx.alternate;if(Sx===null){if(px=yx.return,px!==null){lx=px;continue}break}if(yx.child===Sx.child){for(Sx=yx.child;Sx;){if(Sx===lx)return d(yx),gn;if(Sx===px)return d(yx),ex;Sx=Sx.sibling}throw Error(s(188))}if(lx.return!==px.return)lx=yx,px=Sx;else{for(var Ix=!1,Gx=yx.child;Gx;){if(Gx===lx){Ix=!0,lx=yx,px=Sx;break}if(Gx===px){Ix=!0,px=yx,lx=Sx;break}Gx=Gx.sibling}if(!Ix){for(Gx=Sx.child;Gx;){if(Gx===lx){Ix=!0,lx=Sx,px=yx;break}if(Gx===px){Ix=!0,px=Sx,lx=yx;break}Gx=Gx.sibling}if(!Ix)throw Error(s(189))}}if(lx.alternate!==px)throw Error(s(190))}if(lx.tag!==3)throw Error(s(188));return lx.stateNode.current===lx?gn:ex}function ar(gn){var ex=gn.tag;if(ex===5||ex===26||ex===27||ex===6)return gn;for(gn=gn.child;gn!==null;){if(ex=ar(gn),ex!==null)return ex;gn=gn.sibling}return null}var en=Object.assign,tn=Symbol.for("react.element"),on=Symbol.for("react.transitional.element"),cn=Symbol.for("react.portal"),dn=Symbol.for("react.fragment"),Cn=Symbol.for("react.strict_mode"),In=Symbol.for("react.profiler"),ix=Symbol.for("react.provider"),ax=Symbol.for("react.consumer"),ox=Symbol.for("react.context"),sx=Symbol.for("react.forward_ref"),ux=Symbol.for("react.suspense"),cx=Symbol.for("react.suspense_list"),hx=Symbol.for("react.memo"),gx=Symbol.for("react.lazy"),fx=Symbol.for("react.activity"),dx=Symbol.for("react.memo_cache_sentinel"),mx=Symbol.iterator;function vx(gn){return gn===null||typeof gn!="object"?null:(gn=mx&&gn[mx]||gn["@@iterator"],typeof gn=="function"?gn:null)}var bx=Symbol.for("react.client.reference");function xx(gn){if(gn==null)return null;if(typeof gn=="function")return gn.$$typeof===bx?null:gn.displayName||gn.name||null;if(typeof gn=="string")return gn;switch(gn){case dn:return"Fragment";case In:return"Profiler";case Cn:return"StrictMode";case ux:return"Suspense";case cx:return"SuspenseList";case fx:return"Activity"}if(typeof gn=="object")switch(gn.$$typeof){case cn:return"Portal";case ox:return(gn.displayName||"Context")+".Provider";case ax:return(gn._context.displayName||"Context")+".Consumer";case sx:var ex=gn.render;return gn=gn.displayName,gn||(gn=ex.displayName||ex.name||"",gn=gn!==""?"ForwardRef("+gn+")":"ForwardRef"),gn;case hx:return ex=gn.displayName||null,ex!==null?ex:xx(gn.type)||"Memo";case gx:ex=gn._payload,gn=gn._init;try{return xx(gn(ex))}catch{}}return null}var _x=Array.isArray,Ex=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tx=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Cx={pending:!1,data:null,method:null,action:null},Mx=[],Ax=-1;function Nx(gn){return{current:gn}}function Ux(gn){0>Ax||(gn.current=Mx[Ax],Mx[Ax]=null,Ax--)}function Rx(gn,ex){Ax++,Mx[Ax]=gn.current,gn.current=ex}var Ox=Nx(null),Px=Nx(null),$x=Nx(null),Lx=Nx(null);function zx(gn,ex){switch(Rx($x,ex),Rx(Px,gn),Rx(Ox,null),ex.nodeType){case 9:case 11:gn=(gn=ex.documentElement)&&(gn=gn.namespaceURI)?yN(gn):0;break;default:if(gn=ex.tagName,ex=ex.namespaceURI)ex=yN(ex),gn=xN(ex,gn);else switch(gn){case"svg":gn=1;break;case"math":gn=2;break;default:gn=0}}Ux(Ox),Rx(Ox,gn)}function qx(){Ux(Ox),Ux(Px),Ux($x)}function jx(gn){gn.memoizedState!==null&&Rx(Lx,gn);var ex=Ox.current,lx=xN(ex,gn.type);ex!==lx&&(Rx(Px,gn),Rx(Ox,lx))}function Hx(gn){Px.current===gn&&(Ux(Ox),Ux(Px)),Lx.current===gn&&(Ux(Lx),KC._currentValue=Cx)}var Vx=Object.prototype.hasOwnProperty,nE=t.unstable_scheduleCallback,Wx=t.unstable_cancelCallback,tE=t.unstable_shouldYield,lE=t.unstable_requestPaint,iE=t.unstable_now,Xx=t.unstable_getCurrentPriorityLevel,CE=t.unstable_ImmediatePriority,RE=t.unstable_UserBlockingPriority,SE=t.unstable_NormalPriority,EE=t.unstable_LowPriority,FE=t.unstable_IdlePriority,AE=t.log,ZE=t.unstable_setDisableYieldValue,Dx=null,kx=null;function Yx(gn){if(typeof AE=="function"&&ZE(gn),kx&&typeof kx.setStrictMode=="function")try{kx.setStrictMode(Dx,gn)}catch{}}var Kx=Math.clz32?Math.clz32:gE,aE=Math.log,eE=Math.LN2;function gE(gn){return gn>>>=0,gn===0?32:31-(aE(gn)/eE|0)|0}var dE=256,bE=4194304;function xE(gn){var ex=gn&42;if(ex!==0)return ex;switch(gn&-gn){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return gn&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return gn&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return gn}}function OE(gn,ex,lx){var px=gn.pendingLanes;if(px===0)return 0;var yx=0,Sx=gn.suspendedLanes,Ix=gn.pingedLanes;gn=gn.warmLanes;var Gx=px&134217727;return Gx!==0?(px=Gx&~Sx,px!==0?yx=xE(px):(Ix&=Gx,Ix!==0?yx=xE(Ix):lx||(lx=Gx&~gn,lx!==0&&(yx=xE(lx))))):(Gx=px&~Sx,Gx!==0?yx=xE(Gx):Ix!==0?yx=xE(Ix):lx||(lx=px&~gn,lx!==0&&(yx=xE(lx)))),yx===0?0:ex!==0&&ex!==yx&&(ex&Sx)===0&&(Sx=yx&-yx,lx=ex&-ex,Sx>=lx||Sx===32&&(lx&4194048)!==0)?ex:yx}function PE(gn,ex){return(gn.pendingLanes&~(gn.suspendedLanes&~gn.pingedLanes)&ex)===0}function sE(gn,ex){switch(gn){case 1:case 2:case 4:case 8:case 64:return ex+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ex+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hE(){var gn=dE;return dE<<=1,(dE&4194048)===0&&(dE=256),gn}function TE(){var gn=bE;return bE<<=1,(bE&62914560)===0&&(bE=4194304),gn}function vE(gn){for(var ex=[],lx=0;31>lx;lx++)ex.push(gn);return ex}function IE(gn,ex){gn.pendingLanes|=ex,ex!==268435456&&(gn.suspendedLanes=0,gn.pingedLanes=0,gn.warmLanes=0)}function DE(gn,ex,lx,px,yx,Sx){var Ix=gn.pendingLanes;gn.pendingLanes=lx,gn.suspendedLanes=0,gn.pingedLanes=0,gn.warmLanes=0,gn.expiredLanes&=lx,gn.entangledLanes&=lx,gn.errorRecoveryDisabledLanes&=lx,gn.shellSuspendCounter=0;var Gx=gn.entanglements,Qx=gn.expirationTimes,cE=gn.hiddenUpdates;for(lx=Ix&~lx;0<lx;){var yE=31-Kx(lx),wE=1<<yE;Gx[yE]=0,Qx[yE]=-1;var fE=cE[yE];if(fE!==null)for(cE[yE]=null,yE=0;yE<fE.length;yE++){var pE=fE[yE];pE!==null&&(pE.lane&=-536870913)}lx&=~wE}px!==0&&Bx(gn,px,0),Sx!==0&&yx===0&&gn.tag!==0&&(gn.suspendedLanes|=Sx&~(Ix&~ex))}function Bx(gn,ex,lx){gn.pendingLanes|=ex,gn.suspendedLanes&=~ex;var px=31-Kx(ex);gn.entangledLanes|=ex,gn.entanglements[px]=gn.entanglements[px]|1073741824|lx&4194090}function Fx(gn,ex){var lx=gn.entangledLanes|=ex;for(gn=gn.entanglements;lx;){var px=31-Kx(lx),yx=1<<px;yx&ex|gn[px]&ex&&(gn[px]|=ex),lx&=~yx}}function Zx(gn){switch(gn){case 2:gn=1;break;case 8:gn=4;break;case 32:gn=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:gn=128;break;case 268435456:gn=134217728;break;default:gn=0}return gn}function Jx(gn){return gn&=-gn,2<gn?8<gn?(gn&134217727)!==0?32:268435456:8:2}function mE(){var gn=Tx.p;return gn!==0?gn:(gn=window.event,gn===void 0?32:kN(gn.type))}function NE(gn,ex){var lx=Tx.p;try{return Tx.p=gn,ex()}finally{Tx.p=lx}}var $E=Math.random().toString(36).slice(2),LE="__reactFiber$"+$E,BE="__reactProps$"+$E,jE="__reactContainer$"+$E,JE="__reactEvents$"+$E,YE="__reactListeners$"+$E,AS="__reactHandles$"+$E,NS="__reactResources$"+$E,dS="__reactMarker$"+$E;function US(gn){delete gn[LE],delete gn[BE],delete gn[JE],delete gn[YE],delete gn[AS]}function LS(gn){var ex=gn[LE];if(ex)return ex;for(var lx=gn.parentNode;lx;){if(ex=lx[jE]||lx[LE]){if(lx=ex.alternate,ex.child!==null||lx!==null&&lx.child!==null)for(gn=SN(gn);gn!==null;){if(lx=gn[LE])return lx;gn=SN(gn)}return ex}gn=lx,lx=gn.parentNode}return null}function zS(gn){if(gn=gn[LE]||gn[jE]){var ex=gn.tag;if(ex===5||ex===6||ex===13||ex===26||ex===27||ex===3)return gn}return null}function qE(gn){var ex=gn.tag;if(ex===5||ex===26||ex===27||ex===6)return gn.stateNode;throw Error(s(33))}function ME(gn){var ex=gn[NS];return ex||(ex=gn[NS]={hoistableStyles:new Map,hoistableScripts:new Map}),ex}function GE(gn){gn[dS]=!0}var _S=new Set,hS={};function aS(gn,ex){tS(gn,ex),tS(gn+"Capture",ex)}function tS(gn,ex){for(hS[gn]=ex,gn=0;gn<ex.length;gn++)_S.add(ex[gn])}var nS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jS={},vS={};function qS(gn){return Vx.call(vS,gn)?!0:Vx.call(jS,gn)?!1:nS.test(gn)?vS[gn]=!0:(jS[gn]=!0,!1)}function $S(gn,ex,lx){if(qS(ex))if(lx===null)gn.removeAttribute(ex);else{switch(typeof lx){case"undefined":case"function":case"symbol":gn.removeAttribute(ex);return;case"boolean":var px=ex.toLowerCase().slice(0,5);if(px!=="data-"&&px!=="aria-"){gn.removeAttribute(ex);return}}gn.setAttribute(ex,""+lx)}}function gT(gn,ex,lx){if(lx===null)gn.removeAttribute(ex);else{switch(typeof lx){case"undefined":case"function":case"symbol":case"boolean":gn.removeAttribute(ex);return}gn.setAttribute(ex,""+lx)}}function SS(gn,ex,lx,px){if(px===null)gn.removeAttribute(lx);else{switch(typeof px){case"undefined":case"function":case"symbol":case"boolean":gn.removeAttribute(lx);return}gn.setAttributeNS(ex,lx,""+px)}}var oT,rM;function QS(gn){if(oT===void 0)try{throw Error()}catch(lx){var ex=lx.stack.trim().match(/\n( *(at )?)/);oT=ex&&ex[1]||"",rM=-1<lx.stack.indexOf(`
    at`)?" (<anonymous>)":-1<lx.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oT+gn+rM}var ZS=!1;function mT(gn,ex){if(!gn||ZS)return"";ZS=!0;var lx=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var px={DetermineComponentFrameRoot:function(){try{if(ex){var wE=function(){throw Error()};if(Object.defineProperty(wE.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wE,[])}catch(pE){var fE=pE}Reflect.construct(gn,[],wE)}else{try{wE.call()}catch(pE){fE=pE}gn.call(wE.prototype)}}else{try{throw Error()}catch(pE){fE=pE}(wE=gn())&&typeof wE.catch=="function"&&wE.catch(function(){})}}catch(pE){if(pE&&fE&&typeof pE.stack=="string")return[pE.stack,fE.stack]}return[null,null]}};px.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var yx=Object.getOwnPropertyDescriptor(px.DetermineComponentFrameRoot,"name");yx&&yx.configurable&&Object.defineProperty(px.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Sx=px.DetermineComponentFrameRoot(),Ix=Sx[0],Gx=Sx[1];if(Ix&&Gx){var Qx=Ix.split(`
`),cE=Gx.split(`
`);for(yx=px=0;px<Qx.length&&!Qx[px].includes("DetermineComponentFrameRoot");)px++;for(;yx<cE.length&&!cE[yx].includes("DetermineComponentFrameRoot");)yx++;if(px===Qx.length||yx===cE.length)for(px=Qx.length-1,yx=cE.length-1;1<=px&&0<=yx&&Qx[px]!==cE[yx];)yx--;for(;1<=px&&0<=yx;px--,yx--)if(Qx[px]!==cE[yx]){if(px!==1||yx!==1)do if(px--,yx--,0>yx||Qx[px]!==cE[yx]){var yE=`
`+Qx[px].replace(" at new "," at ");return gn.displayName&&yE.includes("<anonymous>")&&(yE=yE.replace("<anonymous>",gn.displayName)),yE}while(1<=px&&0<=yx);break}}}finally{ZS=!1,Error.prepareStackTrace=lx}return(lx=gn?gn.displayName||gn.name:"")?QS(lx):""}function TT(gn){switch(gn.tag){case 26:case 27:case 5:return QS(gn.type);case 16:return QS("Lazy");case 13:return QS("Suspense");case 19:return QS("SuspenseList");case 0:case 15:return mT(gn.type,!1);case 11:return mT(gn.type.render,!1);case 1:return mT(gn.type,!0);case 31:return QS("Activity");default:return""}}function lA(gn){try{var ex="";do ex+=TT(gn),gn=gn.return;while(gn);return ex}catch(lx){return`
Error generating stack: `+lx.message+`
`+lx.stack}}function VS(gn){switch(typeof gn){case"bigint":case"boolean":case"number":case"string":case"undefined":return gn;case"object":return gn;default:return""}}function uA(gn){var ex=gn.type;return(gn=gn.nodeName)&&gn.toLowerCase()==="input"&&(ex==="checkbox"||ex==="radio")}function sC(gn){var ex=uA(gn)?"checked":"value",lx=Object.getOwnPropertyDescriptor(gn.constructor.prototype,ex),px=""+gn[ex];if(!gn.hasOwnProperty(ex)&&typeof lx<"u"&&typeof lx.get=="function"&&typeof lx.set=="function"){var yx=lx.get,Sx=lx.set;return Object.defineProperty(gn,ex,{configurable:!0,get:function(){return yx.call(this)},set:function(Ix){px=""+Ix,Sx.call(this,Ix)}}),Object.defineProperty(gn,ex,{enumerable:lx.enumerable}),{getValue:function(){return px},setValue:function(Ix){px=""+Ix},stopTracking:function(){gn._valueTracker=null,delete gn[ex]}}}}function AA(gn){gn._valueTracker||(gn._valueTracker=sC(gn))}function nM(gn){if(!gn)return!1;var ex=gn._valueTracker;if(!ex)return!0;var lx=ex.getValue(),px="";return gn&&(px=uA(gn)?gn.checked?"true":"false":gn.value),gn=px,gn!==lx?(ex.setValue(gn),!0):!1}function CA(gn){if(gn=gn||(typeof document<"u"?document:void 0),typeof gn>"u")return null;try{return gn.activeElement||gn.body}catch{return gn.body}}var lC=/[\n"\\]/g;function sT(gn){return gn.replace(lC,function(ex){return"\\"+ex.charCodeAt(0).toString(16)+" "})}function cR(gn,ex,lx,px,yx,Sx,Ix,Gx){gn.name="",Ix!=null&&typeof Ix!="function"&&typeof Ix!="symbol"&&typeof Ix!="boolean"?gn.type=Ix:gn.removeAttribute("type"),ex!=null?Ix==="number"?(ex===0&&gn.value===""||gn.value!=ex)&&(gn.value=""+VS(ex)):gn.value!==""+VS(ex)&&(gn.value=""+VS(ex)):Ix!=="submit"&&Ix!=="reset"||gn.removeAttribute("value"),ex!=null?fR(gn,Ix,VS(ex)):lx!=null?fR(gn,Ix,VS(lx)):px!=null&&gn.removeAttribute("value"),yx==null&&Sx!=null&&(gn.defaultChecked=!!Sx),yx!=null&&(gn.checked=yx&&typeof yx!="function"&&typeof yx!="symbol"),Gx!=null&&typeof Gx!="function"&&typeof Gx!="symbol"&&typeof Gx!="boolean"?gn.name=""+VS(Gx):gn.removeAttribute("name")}function uC(gn,ex,lx,px,yx,Sx,Ix,Gx){if(Sx!=null&&typeof Sx!="function"&&typeof Sx!="symbol"&&typeof Sx!="boolean"&&(gn.type=Sx),ex!=null||lx!=null){if(!(Sx!=="submit"&&Sx!=="reset"||ex!=null))return;lx=lx!=null?""+VS(lx):"",ex=ex!=null?""+VS(ex):lx,Gx||ex===gn.value||(gn.value=ex),gn.defaultValue=ex}px=px??yx,px=typeof px!="function"&&typeof px!="symbol"&&!!px,gn.checked=Gx?gn.checked:!!px,gn.defaultChecked=!!px,Ix!=null&&typeof Ix!="function"&&typeof Ix!="symbol"&&typeof Ix!="boolean"&&(gn.name=Ix)}function fR(gn,ex,lx){ex==="number"&&CA(gn.ownerDocument)===gn||gn.defaultValue===""+lx||(gn.defaultValue=""+lx)}function MA(gn,ex,lx,px){if(gn=gn.options,ex){ex={};for(var yx=0;yx<lx.length;yx++)ex["$"+lx[yx]]=!0;for(lx=0;lx<gn.length;lx++)yx=ex.hasOwnProperty("$"+gn[lx].value),gn[lx].selected!==yx&&(gn[lx].selected=yx),yx&&px&&(gn[lx].defaultSelected=!0)}else{for(lx=""+VS(lx),ex=null,yx=0;yx<gn.length;yx++){if(gn[yx].value===lx){gn[yx].selected=!0,px&&(gn[yx].defaultSelected=!0);return}ex!==null||gn[yx].disabled||(ex=gn[yx])}ex!==null&&(ex.selected=!0)}}function gD(gn,ex,lx){if(ex!=null&&(ex=""+VS(ex),ex!==gn.value&&(gn.value=ex),lx==null)){gn.defaultValue!==ex&&(gn.defaultValue=ex);return}gn.defaultValue=lx!=null?""+VS(lx):""}function mD(gn,ex,lx,px){if(ex==null){if(px!=null){if(lx!=null)throw Error(s(92));if(_x(px)){if(1<px.length)throw Error(s(93));px=px[0]}lx=px}lx==null&&(lx=""),ex=lx}lx=VS(ex),gn.defaultValue=lx,px=gn.textContent,px===lx&&px!==""&&px!==null&&(gn.value=px)}function RA(gn,ex){if(ex){var lx=gn.firstChild;if(lx&&lx===gn.lastChild&&lx.nodeType===3){lx.nodeValue=ex;return}}gn.textContent=ex}var VN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vD(gn,ex,lx){var px=ex.indexOf("--")===0;lx==null||typeof lx=="boolean"||lx===""?px?gn.setProperty(ex,""):ex==="float"?gn.cssFloat="":gn[ex]="":px?gn.setProperty(ex,lx):typeof lx!="number"||lx===0||VN.has(ex)?ex==="float"?gn.cssFloat=lx:gn[ex]=(""+lx).trim():gn[ex]=lx+"px"}function yD(gn,ex,lx){if(ex!=null&&typeof ex!="object")throw Error(s(62));if(gn=gn.style,lx!=null){for(var px in lx)!lx.hasOwnProperty(px)||ex!=null&&ex.hasOwnProperty(px)||(px.indexOf("--")===0?gn.setProperty(px,""):px==="float"?gn.cssFloat="":gn[px]="");for(var yx in ex)px=ex[yx],ex.hasOwnProperty(yx)&&lx[yx]!==px&&vD(gn,yx,px)}else for(var Sx in ex)ex.hasOwnProperty(Sx)&&vD(gn,Sx,ex[Sx])}function pR(gn){if(gn.indexOf("-")===-1)return!1;switch(gn){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iM(gn){return jN.test(""+gn)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":gn}var dR=null;function hR(gn){return gn=gn.target||gn.srcElement||window,gn.correspondingUseElement&&(gn=gn.correspondingUseElement),gn.nodeType===3?gn.parentNode:gn}var IA=null,DA=null;function xD(gn){var ex=zS(gn);if(ex&&(gn=ex.stateNode)){var lx=gn[BE]||null;e:switch(gn=ex.stateNode,ex.type){case"input":if(cR(gn,lx.value,lx.defaultValue,lx.defaultValue,lx.checked,lx.defaultChecked,lx.type,lx.name),ex=lx.name,lx.type==="radio"&&ex!=null){for(lx=gn;lx.parentNode;)lx=lx.parentNode;for(lx=lx.querySelectorAll('input[name="'+sT(""+ex)+'"][type="radio"]'),ex=0;ex<lx.length;ex++){var px=lx[ex];if(px!==gn&&px.form===gn.form){var yx=px[BE]||null;if(!yx)throw Error(s(90));cR(px,yx.value,yx.defaultValue,yx.defaultValue,yx.checked,yx.defaultChecked,yx.type,yx.name)}}for(ex=0;ex<lx.length;ex++)px=lx[ex],px.form===gn.form&&nM(px)}break e;case"textarea":gD(gn,lx.value,lx.defaultValue);break e;case"select":ex=lx.value,ex!=null&&MA(gn,!!lx.multiple,ex,!1)}}}var gR=!1;function _D(gn,ex,lx){if(gR)return gn(ex,lx);gR=!0;try{var px=gn(ex);return px}finally{if(gR=!1,(IA!==null||DA!==null)&&(zM(),IA&&(ex=IA,gn=DA,DA=IA=null,xD(ex),gn)))for(ex=0;ex<gn.length;ex++)xD(gn[ex])}}function cC(gn,ex){var lx=gn.stateNode;if(lx===null)return null;var px=lx[BE]||null;if(px===null)return null;lx=px[ex];e:switch(ex){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(px=!px.disabled)||(gn=gn.type,px=!(gn==="button"||gn==="input"||gn==="select"||gn==="textarea")),gn=!px;break e;default:gn=!1}if(gn)return null;if(lx&&typeof lx!="function")throw Error(s(231,ex,typeof lx));return lx}var AT=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mR=!1;if(AT)try{var fC={};Object.defineProperty(fC,"passive",{get:function(){mR=!0}}),window.addEventListener("test",fC,fC),window.removeEventListener("test",fC,fC)}catch{mR=!1}var UT=null,vR=null,aM=null;function ED(){if(aM)return aM;var gn,ex=vR,lx=ex.length,px,yx="value"in UT?UT.value:UT.textContent,Sx=yx.length;for(gn=0;gn<lx&&ex[gn]===yx[gn];gn++);var Ix=lx-gn;for(px=1;px<=Ix&&ex[lx-px]===yx[Sx-px];px++);return aM=yx.slice(gn,1<px?1-px:void 0)}function oM(gn){var ex=gn.keyCode;return"charCode"in gn?(gn=gn.charCode,gn===0&&ex===13&&(gn=13)):gn=ex,gn===10&&(gn=13),32<=gn||gn===13?gn:0}function sM(){return!0}function bD(){return!1}function YS(gn){function ex(lx,px,yx,Sx,Ix){this._reactName=lx,this._targetInst=yx,this.type=px,this.nativeEvent=Sx,this.target=Ix,this.currentTarget=null;for(var Gx in gn)gn.hasOwnProperty(Gx)&&(lx=gn[Gx],this[Gx]=lx?lx(Sx):Sx[Gx]);return this.isDefaultPrevented=(Sx.defaultPrevented!=null?Sx.defaultPrevented:Sx.returnValue===!1)?sM:bD,this.isPropagationStopped=bD,this}return en(ex.prototype,{preventDefault:function(){this.defaultPrevented=!0;var lx=this.nativeEvent;lx&&(lx.preventDefault?lx.preventDefault():typeof lx.returnValue!="unknown"&&(lx.returnValue=!1),this.isDefaultPrevented=sM)},stopPropagation:function(){var lx=this.nativeEvent;lx&&(lx.stopPropagation?lx.stopPropagation():typeof lx.cancelBubble!="unknown"&&(lx.cancelBubble=!0),this.isPropagationStopped=sM)},persist:function(){},isPersistent:sM}),ex}var cA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(gn){return gn.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lM=YS(cA),pC=en({},cA,{view:0,detail:0}),ZN=YS(pC),yR,xR,dC,uM=en({},pC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ER,button:0,buttons:0,relatedTarget:function(gn){return gn.relatedTarget===void 0?gn.fromElement===gn.srcElement?gn.toElement:gn.fromElement:gn.relatedTarget},movementX:function(gn){return"movementX"in gn?gn.movementX:(gn!==dC&&(dC&&gn.type==="mousemove"?(yR=gn.screenX-dC.screenX,xR=gn.screenY-dC.screenY):xR=yR=0,dC=gn),yR)},movementY:function(gn){return"movementY"in gn?gn.movementY:xR}}),SD=YS(uM),YN=en({},uM,{dataTransfer:0}),WN=YS(YN),XN=en({},pC,{relatedTarget:0}),_R=YS(XN),KN=en({},cA,{animationName:0,elapsedTime:0,pseudoElement:0}),QN=YS(KN),JN=en({},cA,{clipboardData:function(gn){return"clipboardData"in gn?gn.clipboardData:window.clipboardData}}),eL=YS(JN),tL=en({},cA,{data:0}),wD=YS(tL),rL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aL(gn){var ex=this.nativeEvent;return ex.getModifierState?ex.getModifierState(gn):(gn=iL[gn])?!!ex[gn]:!1}function ER(){return aL}var oL=en({},pC,{key:function(gn){if(gn.key){var ex=rL[gn.key]||gn.key;if(ex!=="Unidentified")return ex}return gn.type==="keypress"?(gn=oM(gn),gn===13?"Enter":String.fromCharCode(gn)):gn.type==="keydown"||gn.type==="keyup"?nL[gn.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ER,charCode:function(gn){return gn.type==="keypress"?oM(gn):0},keyCode:function(gn){return gn.type==="keydown"||gn.type==="keyup"?gn.keyCode:0},which:function(gn){return gn.type==="keypress"?oM(gn):gn.type==="keydown"||gn.type==="keyup"?gn.keyCode:0}}),sL=YS(oL),lL=en({},uM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TD=YS(lL),uL=en({},pC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ER}),cL=YS(uL),fL=en({},cA,{propertyName:0,elapsedTime:0,pseudoElement:0}),pL=YS(fL),dL=en({},uM,{deltaX:function(gn){return"deltaX"in gn?gn.deltaX:"wheelDeltaX"in gn?-gn.wheelDeltaX:0},deltaY:function(gn){return"deltaY"in gn?gn.deltaY:"wheelDeltaY"in gn?-gn.wheelDeltaY:"wheelDelta"in gn?-gn.wheelDelta:0},deltaZ:0,deltaMode:0}),hL=YS(dL),gL=en({},cA,{newState:0,oldState:0}),mL=YS(gL),vL=[9,13,27,32],bR=AT&&"CompositionEvent"in window,hC=null;AT&&"documentMode"in document&&(hC=document.documentMode);var yL=AT&&"TextEvent"in window&&!hC,AD=AT&&(!bR||hC&&8<hC&&11>=hC),CD=" ",MD=!1;function RD(gn,ex){switch(gn){case"keyup":return vL.indexOf(ex.keyCode)!==-1;case"keydown":return ex.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ID(gn){return gn=gn.detail,typeof gn=="object"&&"data"in gn?gn.data:null}var OA=!1;function xL(gn,ex){switch(gn){case"compositionend":return ID(ex);case"keypress":return ex.which!==32?null:(MD=!0,CD);case"textInput":return gn=ex.data,gn===CD&&MD?null:gn;default:return null}}function _L(gn,ex){if(OA)return gn==="compositionend"||!bR&&RD(gn,ex)?(gn=ED(),aM=vR=UT=null,OA=!1,gn):null;switch(gn){case"paste":return null;case"keypress":if(!(ex.ctrlKey||ex.altKey||ex.metaKey)||ex.ctrlKey&&ex.altKey){if(ex.char&&1<ex.char.length)return ex.char;if(ex.which)return String.fromCharCode(ex.which)}return null;case"compositionend":return AD&&ex.locale!=="ko"?null:ex.data;default:return null}}var EL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DD(gn){var ex=gn&&gn.nodeName&&gn.nodeName.toLowerCase();return ex==="input"?!!EL[gn.type]:ex==="textarea"}function OD(gn,ex,lx,px){IA?DA?DA.push(px):DA=[px]:IA=px,ex=WM(ex,"onChange"),0<ex.length&&(lx=new lM("onChange","change",null,lx,px),gn.push({event:lx,listeners:ex}))}var gC=null,mC=null;function bL(gn){dN(gn,0)}function cM(gn){var ex=qE(gn);if(nM(ex))return gn}function PD(gn,ex){if(gn==="change")return ex}var ND=!1;if(AT){var SR;if(AT){var wR="oninput"in document;if(!wR){var LD=document.createElement("div");LD.setAttribute("oninput","return;"),wR=typeof LD.oninput=="function"}SR=wR}else SR=!1;ND=SR&&(!document.documentMode||9<document.documentMode)}function $D(){gC&&(gC.detachEvent("onpropertychange",BD),mC=gC=null)}function BD(gn){if(gn.propertyName==="value"&&cM(mC)){var ex=[];OD(ex,mC,gn,hR(gn)),_D(bL,ex)}}function SL(gn,ex,lx){gn==="focusin"?($D(),gC=ex,mC=lx,gC.attachEvent("onpropertychange",BD)):gn==="focusout"&&$D()}function wL(gn){if(gn==="selectionchange"||gn==="keyup"||gn==="keydown")return cM(mC)}function TL(gn,ex){if(gn==="click")return cM(ex)}function AL(gn,ex){if(gn==="input"||gn==="change")return cM(ex)}function CL(gn,ex){return gn===ex&&(gn!==0||1/gn===1/ex)||gn!==gn&&ex!==ex}var JS=typeof Object.is=="function"?Object.is:CL;function vC(gn,ex){if(JS(gn,ex))return!0;if(typeof gn!="object"||gn===null||typeof ex!="object"||ex===null)return!1;var lx=Object.keys(gn),px=Object.keys(ex);if(lx.length!==px.length)return!1;for(px=0;px<lx.length;px++){var yx=lx[px];if(!Vx.call(ex,yx)||!JS(gn[yx],ex[yx]))return!1}return!0}function kD(gn){for(;gn&&gn.firstChild;)gn=gn.firstChild;return gn}function FD(gn,ex){var lx=kD(gn);gn=0;for(var px;lx;){if(lx.nodeType===3){if(px=gn+lx.textContent.length,gn<=ex&&px>=ex)return{node:lx,offset:ex-gn};gn=px}e:{for(;lx;){if(lx.nextSibling){lx=lx.nextSibling;break e}lx=lx.parentNode}lx=void 0}lx=kD(lx)}}function UD(gn,ex){return gn&&ex?gn===ex?!0:gn&&gn.nodeType===3?!1:ex&&ex.nodeType===3?UD(gn,ex.parentNode):"contains"in gn?gn.contains(ex):gn.compareDocumentPosition?!!(gn.compareDocumentPosition(ex)&16):!1:!1}function qD(gn){gn=gn!=null&&gn.ownerDocument!=null&&gn.ownerDocument.defaultView!=null?gn.ownerDocument.defaultView:window;for(var ex=CA(gn.document);ex instanceof gn.HTMLIFrameElement;){try{var lx=typeof ex.contentWindow.location.href=="string"}catch{lx=!1}if(lx)gn=ex.contentWindow;else break;ex=CA(gn.document)}return ex}function TR(gn){var ex=gn&&gn.nodeName&&gn.nodeName.toLowerCase();return ex&&(ex==="input"&&(gn.type==="text"||gn.type==="search"||gn.type==="tel"||gn.type==="url"||gn.type==="password")||ex==="textarea"||gn.contentEditable==="true")}var ML=AT&&"documentMode"in document&&11>=document.documentMode,PA=null,AR=null,yC=null,CR=!1;function GD(gn,ex,lx){var px=lx.window===lx?lx.document:lx.nodeType===9?lx:lx.ownerDocument;CR||PA==null||PA!==CA(px)||(px=PA,"selectionStart"in px&&TR(px)?px={start:px.selectionStart,end:px.selectionEnd}:(px=(px.ownerDocument&&px.ownerDocument.defaultView||window).getSelection(),px={anchorNode:px.anchorNode,anchorOffset:px.anchorOffset,focusNode:px.focusNode,focusOffset:px.focusOffset}),yC&&vC(yC,px)||(yC=px,px=WM(AR,"onSelect"),0<px.length&&(ex=new lM("onSelect","select",null,ex,lx),gn.push({event:ex,listeners:px}),ex.target=PA)))}function fA(gn,ex){var lx={};return lx[gn.toLowerCase()]=ex.toLowerCase(),lx["Webkit"+gn]="webkit"+ex,lx["Moz"+gn]="moz"+ex,lx}var NA={animationend:fA("Animation","AnimationEnd"),animationiteration:fA("Animation","AnimationIteration"),animationstart:fA("Animation","AnimationStart"),transitionrun:fA("Transition","TransitionRun"),transitionstart:fA("Transition","TransitionStart"),transitioncancel:fA("Transition","TransitionCancel"),transitionend:fA("Transition","TransitionEnd")},MR={},zD={};AT&&(zD=document.createElement("div").style,"AnimationEvent"in window||(delete NA.animationend.animation,delete NA.animationiteration.animation,delete NA.animationstart.animation),"TransitionEvent"in window||delete NA.transitionend.transition);function pA(gn){if(MR[gn])return MR[gn];if(!NA[gn])return gn;var ex=NA[gn],lx;for(lx in ex)if(ex.hasOwnProperty(lx)&&lx in zD)return MR[gn]=ex[lx];return gn}var VD=pA("animationend"),HD=pA("animationiteration"),jD=pA("animationstart"),RL=pA("transitionrun"),IL=pA("transitionstart"),DL=pA("transitioncancel"),ZD=pA("transitionend"),YD=new Map,RR="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");RR.push("scrollEnd");function vT(gn,ex){YD.set(gn,ex),aS(ex,[gn])}var WD=new WeakMap;function lT(gn,ex){if(typeof gn=="object"&&gn!==null){var lx=WD.get(gn);return lx!==void 0?lx:(ex={value:gn,source:ex,stack:lA(ex)},WD.set(gn,ex),ex)}return{value:gn,source:ex,stack:lA(ex)}}var uT=[],LA=0,IR=0;function fM(){for(var gn=LA,ex=IR=LA=0;ex<gn;){var lx=uT[ex];uT[ex++]=null;var px=uT[ex];uT[ex++]=null;var yx=uT[ex];uT[ex++]=null;var Sx=uT[ex];if(uT[ex++]=null,px!==null&&yx!==null){var Ix=px.pending;Ix===null?yx.next=yx:(yx.next=Ix.next,Ix.next=yx),px.pending=yx}Sx!==0&&XD(lx,yx,Sx)}}function pM(gn,ex,lx,px){uT[LA++]=gn,uT[LA++]=ex,uT[LA++]=lx,uT[LA++]=px,IR|=px,gn.lanes|=px,gn=gn.alternate,gn!==null&&(gn.lanes|=px)}function DR(gn,ex,lx,px){return pM(gn,ex,lx,px),dM(gn)}function $A(gn,ex){return pM(gn,null,null,ex),dM(gn)}function XD(gn,ex,lx){gn.lanes|=lx;var px=gn.alternate;px!==null&&(px.lanes|=lx);for(var yx=!1,Sx=gn.return;Sx!==null;)Sx.childLanes|=lx,px=Sx.alternate,px!==null&&(px.childLanes|=lx),Sx.tag===22&&(gn=Sx.stateNode,gn===null||gn._visibility&1||(yx=!0)),gn=Sx,Sx=Sx.return;return gn.tag===3?(Sx=gn.stateNode,yx&&ex!==null&&(yx=31-Kx(lx),gn=Sx.hiddenUpdates,px=gn[yx],px===null?gn[yx]=[ex]:px.push(ex),ex.lane=lx|536870912),Sx):null}function dM(gn){if(50<zC)throw zC=0,FI=null,Error(s(185));for(var ex=gn.return;ex!==null;)gn=ex,ex=gn.return;return gn.tag===3?gn.stateNode:null}var BA={};function OL(gn,ex,lx,px){this.tag=gn,this.key=lx,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=ex,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=px,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eT(gn,ex,lx,px){return new OL(gn,ex,lx,px)}function PR(gn){return gn=gn.prototype,!(!gn||!gn.isReactComponent)}function CT(gn,ex){var lx=gn.alternate;return lx===null?(lx=eT(gn.tag,ex,gn.key,gn.mode),lx.elementType=gn.elementType,lx.type=gn.type,lx.stateNode=gn.stateNode,lx.alternate=gn,gn.alternate=lx):(lx.pendingProps=ex,lx.type=gn.type,lx.flags=0,lx.subtreeFlags=0,lx.deletions=null),lx.flags=gn.flags&65011712,lx.childLanes=gn.childLanes,lx.lanes=gn.lanes,lx.child=gn.child,lx.memoizedProps=gn.memoizedProps,lx.memoizedState=gn.memoizedState,lx.updateQueue=gn.updateQueue,ex=gn.dependencies,lx.dependencies=ex===null?null:{lanes:ex.lanes,firstContext:ex.firstContext},lx.sibling=gn.sibling,lx.index=gn.index,lx.ref=gn.ref,lx.refCleanup=gn.refCleanup,lx}function KD(gn,ex){gn.flags&=65011714;var lx=gn.alternate;return lx===null?(gn.childLanes=0,gn.lanes=ex,gn.child=null,gn.subtreeFlags=0,gn.memoizedProps=null,gn.memoizedState=null,gn.updateQueue=null,gn.dependencies=null,gn.stateNode=null):(gn.childLanes=lx.childLanes,gn.lanes=lx.lanes,gn.child=lx.child,gn.subtreeFlags=0,gn.deletions=null,gn.memoizedProps=lx.memoizedProps,gn.memoizedState=lx.memoizedState,gn.updateQueue=lx.updateQueue,gn.type=lx.type,ex=lx.dependencies,gn.dependencies=ex===null?null:{lanes:ex.lanes,firstContext:ex.firstContext}),gn}function hM(gn,ex,lx,px,yx,Sx){var Ix=0;if(px=gn,typeof gn=="function")PR(gn)&&(Ix=1);else if(typeof gn=="string")Ix=N$(gn,lx,Ox.current)?26:gn==="html"||gn==="head"||gn==="body"?27:5;else e:switch(gn){case fx:return gn=eT(31,lx,ex,yx),gn.elementType=fx,gn.lanes=Sx,gn;case dn:return dA(lx.children,yx,Sx,ex);case Cn:Ix=8,yx|=24;break;case In:return gn=eT(12,lx,ex,yx|2),gn.elementType=In,gn.lanes=Sx,gn;case ux:return gn=eT(13,lx,ex,yx),gn.elementType=ux,gn.lanes=Sx,gn;case cx:return gn=eT(19,lx,ex,yx),gn.elementType=cx,gn.lanes=Sx,gn;default:if(typeof gn=="object"&&gn!==null)switch(gn.$$typeof){case ix:case ox:Ix=10;break e;case ax:Ix=9;break e;case sx:Ix=11;break e;case hx:Ix=14;break e;case gx:Ix=16,px=null;break e}Ix=29,lx=Error(s(130,gn===null?"null":typeof gn,"")),px=null}return ex=eT(Ix,lx,ex,yx),ex.elementType=gn,ex.type=px,ex.lanes=Sx,ex}function dA(gn,ex,lx,px){return gn=eT(7,gn,px,ex),gn.lanes=lx,gn}function NR(gn,ex,lx){return gn=eT(6,gn,null,ex),gn.lanes=lx,gn}function LR(gn,ex,lx){return ex=eT(4,gn.children!==null?gn.children:[],gn.key,ex),ex.lanes=lx,ex.stateNode={containerInfo:gn.containerInfo,pendingChildren:null,implementation:gn.implementation},ex}var kA=[],FA=0,gM=null,mM=0,cT=[],fT=0,hA=null,MT=1,RT="";function gA(gn,ex){kA[FA++]=mM,kA[FA++]=gM,gM=gn,mM=ex}function QD(gn,ex,lx){cT[fT++]=MT,cT[fT++]=RT,cT[fT++]=hA,hA=gn;var px=MT;gn=RT;var yx=32-Kx(px)-1;px&=~(1<<yx),lx+=1;var Sx=32-Kx(ex)+yx;if(30<Sx){var Ix=yx-yx%5;Sx=(px&(1<<Ix)-1).toString(32),px>>=Ix,yx-=Ix,MT=1<<32-Kx(ex)+yx|lx<<yx|px,RT=Sx+gn}else MT=1<<Sx|lx<<yx|px,RT=gn}function $R(gn){gn.return!==null&&(gA(gn,1),QD(gn,1,0))}function BR(gn){for(;gn===gM;)gM=kA[--FA],kA[FA]=null,mM=kA[--FA],kA[FA]=null;for(;gn===hA;)hA=cT[--fT],cT[fT]=null,RT=cT[--fT],cT[fT]=null,MT=cT[--fT],cT[fT]=null}var HS=null,yS=null,iS=!1,mA=null,_T=!1,kR=Error(s(519));function vA(gn){var ex=Error(s(418,""));throw EC(lT(ex,gn)),kR}function JD(gn){var ex=gn.stateNode,lx=gn.type,px=gn.memoizedProps;switch(ex[LE]=gn,ex[BE]=px,lx){case"dialog":QE("cancel",ex),QE("close",ex);break;case"iframe":case"object":case"embed":QE("load",ex);break;case"video":case"audio":for(lx=0;lx<HC.length;lx++)QE(HC[lx],ex);break;case"source":QE("error",ex);break;case"img":case"image":case"link":QE("error",ex),QE("load",ex);break;case"details":QE("toggle",ex);break;case"input":QE("invalid",ex),uC(ex,px.value,px.defaultValue,px.checked,px.defaultChecked,px.type,px.name,!0),AA(ex);break;case"select":QE("invalid",ex);break;case"textarea":QE("invalid",ex),mD(ex,px.value,px.defaultValue,px.children),AA(ex)}lx=px.children,typeof lx!="string"&&typeof lx!="number"&&typeof lx!="bigint"||ex.textContent===""+lx||px.suppressHydrationWarning===!0||vN(ex.textContent,lx)?(px.popover!=null&&(QE("beforetoggle",ex),QE("toggle",ex)),px.onScroll!=null&&QE("scroll",ex),px.onScrollEnd!=null&&QE("scrollend",ex),px.onClick!=null&&(ex.onclick=XM),ex=!0):ex=!1,ex||vA(gn)}function eO(gn){for(HS=gn.return;HS;)switch(HS.tag){case 5:case 13:_T=!1;return;case 27:case 3:_T=!0;return;default:HS=HS.return}}function xC(gn){if(gn!==HS)return!1;if(!iS)return eO(gn),iS=!0,!1;var ex=gn.tag,lx;if((lx=ex!==3&&ex!==27)&&((lx=ex===5)&&(lx=gn.type,lx=!(lx!=="form"&&lx!=="button")||tD(gn.type,gn.memoizedProps)),lx=!lx),lx&&yS&&vA(gn),eO(gn),ex===13){if(gn=gn.memoizedState,gn=gn!==null?gn.dehydrated:null,!gn)throw Error(s(317));e:{for(gn=gn.nextSibling,ex=0;gn;){if(gn.nodeType===8)if(lx=gn.data,lx==="/$"){if(ex===0){yS=xT(gn.nextSibling);break e}ex--}else lx!=="$"&&lx!=="$!"&&lx!=="$?"||ex++;gn=gn.nextSibling}yS=null}}else ex===27?(ex=yS,rA(gn.type)?(gn=aD,aD=null,yS=gn):yS=ex):yS=HS?xT(gn.stateNode.nextSibling):null;return!0}function _C(){yS=HS=null,iS=!1}function tO(){var gn=mA;return gn!==null&&(KS===null?KS=gn:KS.push.apply(KS,gn),mA=null),gn}function EC(gn){mA===null?mA=[gn]:mA.push(gn)}var FR=Nx(null),yA=null,IT=null;function qT(gn,ex,lx){Rx(FR,ex._currentValue),ex._currentValue=lx}function DT(gn){gn._currentValue=FR.current,Ux(FR)}function UR(gn,ex,lx){for(;gn!==null;){var px=gn.alternate;if((gn.childLanes&ex)!==ex?(gn.childLanes|=ex,px!==null&&(px.childLanes|=ex)):px!==null&&(px.childLanes&ex)!==ex&&(px.childLanes|=ex),gn===lx)break;gn=gn.return}}function qR(gn,ex,lx,px){var yx=gn.child;for(yx!==null&&(yx.return=gn);yx!==null;){var Sx=yx.dependencies;if(Sx!==null){var Ix=yx.child;Sx=Sx.firstContext;e:for(;Sx!==null;){var Gx=Sx;Sx=yx;for(var Qx=0;Qx<ex.length;Qx++)if(Gx.context===ex[Qx]){Sx.lanes|=lx,Gx=Sx.alternate,Gx!==null&&(Gx.lanes|=lx),UR(Sx.return,lx,gn),px||(Ix=null);break e}Sx=Gx.next}}else if(yx.tag===18){if(Ix=yx.return,Ix===null)throw Error(s(341));Ix.lanes|=lx,Sx=Ix.alternate,Sx!==null&&(Sx.lanes|=lx),UR(Ix,lx,gn),Ix=null}else Ix=yx.child;if(Ix!==null)Ix.return=yx;else for(Ix=yx;Ix!==null;){if(Ix===gn){Ix=null;break}if(yx=Ix.sibling,yx!==null){yx.return=Ix.return,Ix=yx;break}Ix=Ix.return}yx=Ix}}function bC(gn,ex,lx,px){gn=null;for(var yx=ex,Sx=!1;yx!==null;){if(!Sx){if((yx.flags&524288)!==0)Sx=!0;else if((yx.flags&262144)!==0)break}if(yx.tag===10){var Ix=yx.alternate;if(Ix===null)throw Error(s(387));if(Ix=Ix.memoizedProps,Ix!==null){var Gx=yx.type;JS(yx.pendingProps.value,Ix.value)||(gn!==null?gn.push(Gx):gn=[Gx])}}else if(yx===Lx.current){if(Ix=yx.alternate,Ix===null)throw Error(s(387));Ix.memoizedState.memoizedState!==yx.memoizedState.memoizedState&&(gn!==null?gn.push(KC):gn=[KC])}yx=yx.return}gn!==null&&qR(ex,gn,lx,px),ex.flags|=262144}function vM(gn){for(gn=gn.firstContext;gn!==null;){if(!JS(gn.context._currentValue,gn.memoizedValue))return!0;gn=gn.next}return!1}function xA(gn){yA=gn,IT=null,gn=gn.dependencies,gn!==null&&(gn.firstContext=null)}function GS(gn){return rO(yA,gn)}function yM(gn,ex){return yA===null&&xA(gn),rO(gn,ex)}function rO(gn,ex){var lx=ex._currentValue;if(ex={context:ex,memoizedValue:lx,next:null},IT===null){if(gn===null)throw Error(s(308));IT=ex,gn.dependencies={lanes:0,firstContext:ex},gn.flags|=524288}else IT=IT.next=ex;return lx}var PL=typeof AbortController<"u"?AbortController:function(){var gn=[],ex=this.signal={aborted:!1,addEventListener:function(lx,px){gn.push(px)}};this.abort=function(){ex.aborted=!0,gn.forEach(function(lx){return lx()})}},NL=t.unstable_scheduleCallback,LL=t.unstable_NormalPriority,CS={$$typeof:ox,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function GR(){return{controller:new PL,data:new Map,refCount:0}}function SC(gn){gn.refCount--,gn.refCount===0&&NL(LL,function(){gn.controller.abort()})}var wC=null,zR=0,UA=0,qA=null;function $L(gn,ex){if(wC===null){var lx=wC=[];zR=0,UA=jI(),qA={status:"pending",value:void 0,then:function(px){lx.push(px)}}}return zR++,ex.then(nO,nO),ex}function nO(){if(--zR===0&&wC!==null){qA!==null&&(qA.status="fulfilled");var gn=wC;wC=null,UA=0,qA=null;for(var ex=0;ex<gn.length;ex++)(0,gn[ex])()}}function BL(gn,ex){var lx=[],px={status:"pending",value:null,reason:null,then:function(yx){lx.push(yx)}};return gn.then(function(){px.status="fulfilled",px.value=ex;for(var yx=0;yx<lx.length;yx++)(0,lx[yx])(ex)},function(yx){for(px.status="rejected",px.reason=yx,yx=0;yx<lx.length;yx++)(0,lx[yx])(void 0)}),px}var iO=Ex.S;Ex.S=function(gn,ex){typeof ex=="object"&&ex!==null&&typeof ex.then=="function"&&$L(gn,ex),iO!==null&&iO(gn,ex)};var _A=Nx(null);function VR(){var gn=_A.current;return gn!==null?gn:pS.pooledCache}function xM(gn,ex){ex===null?Rx(_A,_A.current):Rx(_A,ex.pool)}function aO(){var gn=VR();return gn===null?null:{parent:CS._currentValue,pool:gn}}var TC=Error(s(460)),oO=Error(s(474)),_M=Error(s(542)),HR={then:function(){}};function sO(gn){return gn=gn.status,gn==="fulfilled"||gn==="rejected"}function EM(){}function lO(gn,ex,lx){switch(lx=gn[lx],lx===void 0?gn.push(ex):lx!==ex&&(ex.then(EM,EM),ex=lx),ex.status){case"fulfilled":return ex.value;case"rejected":throw gn=ex.reason,cO(gn),gn;default:if(typeof ex.status=="string")ex.then(EM,EM);else{if(gn=pS,gn!==null&&100<gn.shellSuspendCounter)throw Error(s(482));gn=ex,gn.status="pending",gn.then(function(px){if(ex.status==="pending"){var yx=ex;yx.status="fulfilled",yx.value=px}},function(px){if(ex.status==="pending"){var yx=ex;yx.status="rejected",yx.reason=px}})}switch(ex.status){case"fulfilled":return ex.value;case"rejected":throw gn=ex.reason,cO(gn),gn}throw AC=ex,TC}}var AC=null;function uO(){if(AC===null)throw Error(s(459));var gn=AC;return AC=null,gn}function cO(gn){if(gn===TC||gn===_M)throw Error(s(483))}var GT=!1;function jR(gn){gn.updateQueue={baseState:gn.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ZR(gn,ex){gn=gn.updateQueue,ex.updateQueue===gn&&(ex.updateQueue={baseState:gn.baseState,firstBaseUpdate:gn.firstBaseUpdate,lastBaseUpdate:gn.lastBaseUpdate,shared:gn.shared,callbacks:null})}function zT(gn){return{lane:gn,tag:0,payload:null,callback:null,next:null}}function VT(gn,ex,lx){var px=gn.updateQueue;if(px===null)return null;if(px=px.shared,(oS&2)!==0){var yx=px.pending;return yx===null?ex.next=ex:(ex.next=yx.next,yx.next=ex),px.pending=ex,ex=dM(gn),XD(gn,null,lx),ex}return pM(gn,px,ex,lx),dM(gn)}function CC(gn,ex,lx){if(ex=ex.updateQueue,ex!==null&&(ex=ex.shared,(lx&4194048)!==0)){var px=ex.lanes;px&=gn.pendingLanes,lx|=px,ex.lanes=lx,Fx(gn,lx)}}function YR(gn,ex){var lx=gn.updateQueue,px=gn.alternate;if(px!==null&&(px=px.updateQueue,lx===px)){var yx=null,Sx=null;if(lx=lx.firstBaseUpdate,lx!==null){do{var Ix={lane:lx.lane,tag:lx.tag,payload:lx.payload,callback:null,next:null};Sx===null?yx=Sx=Ix:Sx=Sx.next=Ix,lx=lx.next}while(lx!==null);Sx===null?yx=Sx=ex:Sx=Sx.next=ex}else yx=Sx=ex;lx={baseState:px.baseState,firstBaseUpdate:yx,lastBaseUpdate:Sx,shared:px.shared,callbacks:px.callbacks},gn.updateQueue=lx;return}gn=lx.lastBaseUpdate,gn===null?lx.firstBaseUpdate=ex:gn.next=ex,lx.lastBaseUpdate=ex}var WR=!1;function MC(){if(WR){var gn=qA;if(gn!==null)throw gn}}function RC(gn,ex,lx,px){WR=!1;var yx=gn.updateQueue;GT=!1;var Sx=yx.firstBaseUpdate,Ix=yx.lastBaseUpdate,Gx=yx.shared.pending;if(Gx!==null){yx.shared.pending=null;var Qx=Gx,cE=Qx.next;Qx.next=null,Ix===null?Sx=cE:Ix.next=cE,Ix=Qx;var yE=gn.alternate;yE!==null&&(yE=yE.updateQueue,Gx=yE.lastBaseUpdate,Gx!==Ix&&(Gx===null?yE.firstBaseUpdate=cE:Gx.next=cE,yE.lastBaseUpdate=Qx))}if(Sx!==null){var wE=yx.baseState;Ix=0,yE=cE=Qx=null,Gx=Sx;do{var fE=Gx.lane&-536870913,pE=fE!==Gx.lane;if(pE?(eS&fE)===fE:(px&fE)===fE){fE!==0&&fE===UA&&(WR=!0),yE!==null&&(yE=yE.next={lane:0,tag:Gx.tag,payload:Gx.payload,callback:null,next:null});e:{var HE=gn,zE=Gx;fE=ex;var cS=lx;switch(zE.tag){case 1:if(HE=zE.payload,typeof HE=="function"){wE=HE.call(cS,wE,fE);break e}wE=HE;break e;case 3:HE.flags=HE.flags&-65537|128;case 0:if(HE=zE.payload,fE=typeof HE=="function"?HE.call(cS,wE,fE):HE,fE==null)break e;wE=en({},wE,fE);break e;case 2:GT=!0}}fE=Gx.callback,fE!==null&&(gn.flags|=64,pE&&(gn.flags|=8192),pE=yx.callbacks,pE===null?yx.callbacks=[fE]:pE.push(fE))}else pE={lane:fE,tag:Gx.tag,payload:Gx.payload,callback:Gx.callback,next:null},yE===null?(cE=yE=pE,Qx=wE):yE=yE.next=pE,Ix|=fE;if(Gx=Gx.next,Gx===null){if(Gx=yx.shared.pending,Gx===null)break;pE=Gx,Gx=pE.next,pE.next=null,yx.lastBaseUpdate=pE,yx.shared.pending=null}}while(!0);yE===null&&(Qx=wE),yx.baseState=Qx,yx.firstBaseUpdate=cE,yx.lastBaseUpdate=yE,Sx===null&&(yx.shared.lanes=0),QT|=Ix,gn.lanes=Ix,gn.memoizedState=wE}}function fO(gn,ex){if(typeof gn!="function")throw Error(s(191,gn));gn.call(ex)}function pO(gn,ex){var lx=gn.callbacks;if(lx!==null)for(gn.callbacks=null,gn=0;gn<lx.length;gn++)fO(lx[gn],ex)}var GA=Nx(null),bM=Nx(0);function dO(gn,ex){gn=kT,Rx(bM,gn),Rx(GA,ex),kT=gn|ex.baseLanes}function XR(){Rx(bM,kT),Rx(GA,GA.current)}function KR(){kT=bM.current,Ux(GA),Ux(bM)}var HT=0,WE=null,lS=null,wS=null,SM=!1,zA=!1,EA=!1,wM=0,IC=0,VA=null,kL=0;function ES(){throw Error(s(321))}function QR(gn,ex){if(ex===null)return!1;for(var lx=0;lx<ex.length&&lx<gn.length;lx++)if(!JS(gn[lx],ex[lx]))return!1;return!0}function JR(gn,ex,lx,px,yx,Sx){return HT=Sx,WE=ex,ex.memoizedState=null,ex.updateQueue=null,ex.lanes=0,Ex.H=gn===null||gn.memoizedState===null?KO:QO,EA=!1,Sx=lx(px,yx),EA=!1,zA&&(Sx=gO(ex,lx,px,yx)),hO(gn),Sx}function hO(gn){Ex.H=IM;var ex=lS!==null&&lS.next!==null;if(HT=0,wS=lS=WE=null,SM=!1,IC=0,VA=null,ex)throw Error(s(300));gn===null||IS||(gn=gn.dependencies,gn!==null&&vM(gn)&&(IS=!0))}function gO(gn,ex,lx,px){WE=gn;var yx=0;do{if(zA&&(VA=null),IC=0,zA=!1,25<=yx)throw Error(s(301));if(yx+=1,wS=lS=null,gn.updateQueue!=null){var Sx=gn.updateQueue;Sx.lastEffect=null,Sx.events=null,Sx.stores=null,Sx.memoCache!=null&&(Sx.memoCache.index=0)}Ex.H=HL,Sx=ex(lx,px)}while(zA);return Sx}function FL(){var gn=Ex.H,ex=gn.useState()[0];return ex=typeof ex.then=="function"?DC(ex):ex,gn=gn.useState()[0],(lS!==null?lS.memoizedState:null)!==gn&&(WE.flags|=1024),ex}function eI(){var gn=wM!==0;return wM=0,gn}function tI(gn,ex,lx){ex.updateQueue=gn.updateQueue,ex.flags&=-2053,gn.lanes&=~lx}function rI(gn){if(SM){for(gn=gn.memoizedState;gn!==null;){var ex=gn.queue;ex!==null&&(ex.pending=null),gn=gn.next}SM=!1}HT=0,wS=lS=WE=null,zA=!1,IC=wM=0,VA=null}function WS(){var gn={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wS===null?WE.memoizedState=wS=gn:wS=wS.next=gn,wS}function TS(){if(lS===null){var gn=WE.alternate;gn=gn!==null?gn.memoizedState:null}else gn=lS.next;var ex=wS===null?WE.memoizedState:wS.next;if(ex!==null)wS=ex,lS=gn;else{if(gn===null)throw WE.alternate===null?Error(s(467)):Error(s(310));lS=gn,gn={memoizedState:lS.memoizedState,baseState:lS.baseState,baseQueue:lS.baseQueue,queue:lS.queue,next:null},wS===null?WE.memoizedState=wS=gn:wS=wS.next=gn}return wS}function nI(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function DC(gn){var ex=IC;return IC+=1,VA===null&&(VA=[]),gn=lO(VA,gn,ex),ex=WE,(wS===null?ex.memoizedState:wS.next)===null&&(ex=ex.alternate,Ex.H=ex===null||ex.memoizedState===null?KO:QO),gn}function TM(gn){if(gn!==null&&typeof gn=="object"){if(typeof gn.then=="function")return DC(gn);if(gn.$$typeof===ox)return GS(gn)}throw Error(s(438,String(gn)))}function iI(gn){var ex=null,lx=WE.updateQueue;if(lx!==null&&(ex=lx.memoCache),ex==null){var px=WE.alternate;px!==null&&(px=px.updateQueue,px!==null&&(px=px.memoCache,px!=null&&(ex={data:px.data.map(function(yx){return yx.slice()}),index:0})))}if(ex==null&&(ex={data:[],index:0}),lx===null&&(lx=nI(),WE.updateQueue=lx),lx.memoCache=ex,lx=ex.data[ex.index],lx===void 0)for(lx=ex.data[ex.index]=Array(gn),px=0;px<gn;px++)lx[px]=dx;return ex.index++,lx}function OT(gn,ex){return typeof ex=="function"?ex(gn):ex}function AM(gn){var ex=TS();return aI(ex,lS,gn)}function aI(gn,ex,lx){var px=gn.queue;if(px===null)throw Error(s(311));px.lastRenderedReducer=lx;var yx=gn.baseQueue,Sx=px.pending;if(Sx!==null){if(yx!==null){var Ix=yx.next;yx.next=Sx.next,Sx.next=Ix}ex.baseQueue=yx=Sx,px.pending=null}if(Sx=gn.baseState,yx===null)gn.memoizedState=Sx;else{ex=yx.next;var Gx=Ix=null,Qx=null,cE=ex,yE=!1;do{var wE=cE.lane&-536870913;if(wE!==cE.lane?(eS&wE)===wE:(HT&wE)===wE){var fE=cE.revertLane;if(fE===0)Qx!==null&&(Qx=Qx.next={lane:0,revertLane:0,action:cE.action,hasEagerState:cE.hasEagerState,eagerState:cE.eagerState,next:null}),wE===UA&&(yE=!0);else if((HT&fE)===fE){cE=cE.next,fE===UA&&(yE=!0);continue}else wE={lane:0,revertLane:cE.revertLane,action:cE.action,hasEagerState:cE.hasEagerState,eagerState:cE.eagerState,next:null},Qx===null?(Gx=Qx=wE,Ix=Sx):Qx=Qx.next=wE,WE.lanes|=fE,QT|=fE;wE=cE.action,EA&&lx(Sx,wE),Sx=cE.hasEagerState?cE.eagerState:lx(Sx,wE)}else fE={lane:wE,revertLane:cE.revertLane,action:cE.action,hasEagerState:cE.hasEagerState,eagerState:cE.eagerState,next:null},Qx===null?(Gx=Qx=fE,Ix=Sx):Qx=Qx.next=fE,WE.lanes|=wE,QT|=wE;cE=cE.next}while(cE!==null&&cE!==ex);if(Qx===null?Ix=Sx:Qx.next=Gx,!JS(Sx,gn.memoizedState)&&(IS=!0,yE&&(lx=qA,lx!==null)))throw lx;gn.memoizedState=Sx,gn.baseState=Ix,gn.baseQueue=Qx,px.lastRenderedState=Sx}return yx===null&&(px.lanes=0),[gn.memoizedState,px.dispatch]}function oI(gn){var ex=TS(),lx=ex.queue;if(lx===null)throw Error(s(311));lx.lastRenderedReducer=gn;var px=lx.dispatch,yx=lx.pending,Sx=ex.memoizedState;if(yx!==null){lx.pending=null;var Ix=yx=yx.next;do Sx=gn(Sx,Ix.action),Ix=Ix.next;while(Ix!==yx);JS(Sx,ex.memoizedState)||(IS=!0),ex.memoizedState=Sx,ex.baseQueue===null&&(ex.baseState=Sx),lx.lastRenderedState=Sx}return[Sx,px]}function mO(gn,ex,lx){var px=WE,yx=TS(),Sx=iS;if(Sx){if(lx===void 0)throw Error(s(407));lx=lx()}else lx=ex();var Ix=!JS((lS||yx).memoizedState,lx);Ix&&(yx.memoizedState=lx,IS=!0),yx=yx.queue;var Gx=xO.bind(null,px,yx,gn);if(OC(2048,8,Gx,[gn]),yx.getSnapshot!==ex||Ix||wS!==null&&wS.memoizedState.tag&1){if(px.flags|=2048,HA(9,CM(),yO.bind(null,px,yx,lx,ex),null),pS===null)throw Error(s(349));Sx||(HT&124)!==0||vO(px,ex,lx)}return lx}function vO(gn,ex,lx){gn.flags|=16384,gn={getSnapshot:ex,value:lx},ex=WE.updateQueue,ex===null?(ex=nI(),WE.updateQueue=ex,ex.stores=[gn]):(lx=ex.stores,lx===null?ex.stores=[gn]:lx.push(gn))}function yO(gn,ex,lx,px){ex.value=lx,ex.getSnapshot=px,_O(ex)&&EO(gn)}function xO(gn,ex,lx){return lx(function(){_O(ex)&&EO(gn)})}function _O(gn){var ex=gn.getSnapshot;gn=gn.value;try{var lx=ex();return!JS(gn,lx)}catch{return!0}}function EO(gn){var ex=$A(gn,2);ex!==null&&aT(ex,gn,2)}function sI(gn){var ex=WS();if(typeof gn=="function"){var lx=gn;if(gn=lx(),EA){Yx(!0);try{lx()}finally{Yx(!1)}}}return ex.memoizedState=ex.baseState=gn,ex.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OT,lastRenderedState:gn},ex}function bO(gn,ex,lx,px){return gn.baseState=lx,aI(gn,lS,typeof px=="function"?px:OT)}function UL(gn,ex,lx,px,yx){if(RM(gn))throw Error(s(485));if(gn=ex.action,gn!==null){var Sx={payload:yx,action:gn,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ix){Sx.listeners.push(Ix)}};Ex.T!==null?lx(!0):Sx.isTransition=!1,px(Sx),lx=ex.pending,lx===null?(Sx.next=ex.pending=Sx,SO(ex,Sx)):(Sx.next=lx.next,ex.pending=lx.next=Sx)}}function SO(gn,ex){var lx=ex.action,px=ex.payload,yx=gn.state;if(ex.isTransition){var Sx=Ex.T,Ix={};Ex.T=Ix;try{var Gx=lx(yx,px),Qx=Ex.S;Qx!==null&&Qx(Ix,Gx),wO(gn,ex,Gx)}catch(cE){lI(gn,ex,cE)}finally{Ex.T=Sx}}else try{Sx=lx(yx,px),wO(gn,ex,Sx)}catch(cE){lI(gn,ex,cE)}}function wO(gn,ex,lx){lx!==null&&typeof lx=="object"&&typeof lx.then=="function"?lx.then(function(px){TO(gn,ex,px)},function(px){return lI(gn,ex,px)}):TO(gn,ex,lx)}function TO(gn,ex,lx){ex.status="fulfilled",ex.value=lx,AO(ex),gn.state=lx,ex=gn.pending,ex!==null&&(lx=ex.next,lx===ex?gn.pending=null:(lx=lx.next,ex.next=lx,SO(gn,lx)))}function lI(gn,ex,lx){var px=gn.pending;if(gn.pending=null,px!==null){px=px.next;do ex.status="rejected",ex.reason=lx,AO(ex),ex=ex.next;while(ex!==px)}gn.action=null}function AO(gn){gn=gn.listeners;for(var ex=0;ex<gn.length;ex++)(0,gn[ex])()}function CO(gn,ex){return ex}function MO(gn,ex){if(iS){var lx=pS.formState;if(lx!==null){e:{var px=WE;if(iS){if(yS){t:{for(var yx=yS,Sx=_T;yx.nodeType!==8;){if(!Sx){yx=null;break t}if(yx=xT(yx.nextSibling),yx===null){yx=null;break t}}Sx=yx.data,yx=Sx==="F!"||Sx==="F"?yx:null}if(yx){yS=xT(yx.nextSibling),px=yx.data==="F!";break e}}vA(px)}px=!1}px&&(ex=lx[0])}}return lx=WS(),lx.memoizedState=lx.baseState=ex,px={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CO,lastRenderedState:ex},lx.queue=px,lx=YO.bind(null,WE,px),px.dispatch=lx,px=sI(!1),Sx=dI.bind(null,WE,!1,px.queue),px=WS(),yx={state:ex,dispatch:null,action:gn,pending:null},px.queue=yx,lx=UL.bind(null,WE,yx,Sx,lx),yx.dispatch=lx,px.memoizedState=gn,[ex,lx,!1]}function RO(gn){var ex=TS();return IO(ex,lS,gn)}function IO(gn,ex,lx){if(ex=aI(gn,ex,CO)[0],gn=AM(OT)[0],typeof ex=="object"&&ex!==null&&typeof ex.then=="function")try{var px=DC(ex)}catch(Ix){throw Ix===TC?_M:Ix}else px=ex;ex=TS();var yx=ex.queue,Sx=yx.dispatch;return lx!==ex.memoizedState&&(WE.flags|=2048,HA(9,CM(),qL.bind(null,yx,lx),null)),[px,Sx,gn]}function qL(gn,ex){gn.action=ex}function OO(gn){var ex=TS(),lx=lS;if(lx!==null)return IO(ex,lx,gn);TS(),ex=ex.memoizedState,lx=TS();var px=lx.queue.dispatch;return lx.memoizedState=gn,[ex,px,!1]}function HA(gn,ex,lx,px){return gn={tag:gn,create:lx,deps:px,inst:ex,next:null},ex=WE.updateQueue,ex===null&&(ex=nI(),WE.updateQueue=ex),lx=ex.lastEffect,lx===null?ex.lastEffect=gn.next=gn:(px=lx.next,lx.next=gn,gn.next=px,ex.lastEffect=gn),gn}function CM(){return{destroy:void 0,resource:void 0}}function PO(){return TS().memoizedState}function MM(gn,ex,lx,px){var yx=WS();px=px===void 0?null:px,WE.flags|=gn,yx.memoizedState=HA(1|ex,CM(),lx,px)}function OC(gn,ex,lx,px){var yx=TS();px=px===void 0?null:px;var Sx=yx.memoizedState.inst;lS!==null&&px!==null&&QR(px,lS.memoizedState.deps)?yx.memoizedState=HA(ex,Sx,lx,px):(WE.flags|=gn,yx.memoizedState=HA(1|ex,Sx,lx,px))}function NO(gn,ex){MM(8390656,8,gn,ex)}function LO(gn,ex){OC(2048,8,gn,ex)}function $O(gn,ex){return OC(4,2,gn,ex)}function BO(gn,ex){return OC(4,4,gn,ex)}function kO(gn,ex){if(typeof ex=="function"){gn=gn();var lx=ex(gn);return function(){typeof lx=="function"?lx():ex(null)}}if(ex!=null)return gn=gn(),ex.current=gn,function(){ex.current=null}}function FO(gn,ex,lx){lx=lx!=null?lx.concat([gn]):null,OC(4,4,kO.bind(null,ex,gn),lx)}function uI(){}function UO(gn,ex){var lx=TS();ex=ex===void 0?null:ex;var px=lx.memoizedState;return ex!==null&&QR(ex,px[1])?px[0]:(lx.memoizedState=[gn,ex],gn)}function qO(gn,ex){var lx=TS();ex=ex===void 0?null:ex;var px=lx.memoizedState;if(ex!==null&&QR(ex,px[1]))return px[0];if(px=gn(),EA){Yx(!0);try{gn()}finally{Yx(!1)}}return lx.memoizedState=[px,ex],px}function cI(gn,ex,lx){return lx===void 0||(HT&1073741824)!==0?gn.memoizedState=ex:(gn.memoizedState=lx,gn=VP(),WE.lanes|=gn,QT|=gn,lx)}function GO(gn,ex,lx,px){return JS(lx,ex)?lx:GA.current!==null?(gn=cI(gn,lx,px),JS(gn,ex)||(IS=!0),gn):(HT&42)===0?(IS=!0,gn.memoizedState=lx):(gn=VP(),WE.lanes|=gn,QT|=gn,ex)}function zO(gn,ex,lx,px,yx){var Sx=Tx.p;Tx.p=Sx!==0&&8>Sx?Sx:8;var Ix=Ex.T,Gx={};Ex.T=Gx,dI(gn,!1,ex,lx);try{var Qx=yx(),cE=Ex.S;if(cE!==null&&cE(Gx,Qx),Qx!==null&&typeof Qx=="object"&&typeof Qx.then=="function"){var yE=BL(Qx,px);PC(gn,ex,yE,iT(gn))}else PC(gn,ex,px,iT(gn))}catch(wE){PC(gn,ex,{then:function(){},status:"rejected",reason:wE},iT())}finally{Tx.p=Sx,Ex.T=Ix}}function GL(){}function fI(gn,ex,lx,px){if(gn.tag!==5)throw Error(s(476));var yx=VO(gn).queue;zO(gn,yx,ex,Cx,lx===null?GL:function(){return HO(gn),lx(px)})}function VO(gn){var ex=gn.memoizedState;if(ex!==null)return ex;ex={memoizedState:Cx,baseState:Cx,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:OT,lastRenderedState:Cx},next:null};var lx={};return ex.next={memoizedState:lx,baseState:lx,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:OT,lastRenderedState:lx},next:null},gn.memoizedState=ex,gn=gn.alternate,gn!==null&&(gn.memoizedState=ex),ex}function HO(gn){var ex=VO(gn).next.queue;PC(gn,ex,{},iT())}function pI(){return GS(KC)}function jO(){return TS().memoizedState}function ZO(){return TS().memoizedState}function zL(gn){for(var ex=gn.return;ex!==null;){switch(ex.tag){case 24:case 3:var lx=iT();gn=zT(lx);var px=VT(ex,gn,lx);px!==null&&(aT(px,ex,lx),CC(px,ex,lx)),ex={cache:GR()},gn.payload=ex;return}ex=ex.return}}function VL(gn,ex,lx){var px=iT();lx={lane:px,revertLane:0,action:lx,hasEagerState:!1,eagerState:null,next:null},RM(gn)?WO(ex,lx):(lx=DR(gn,ex,lx,px),lx!==null&&(aT(lx,gn,px),XO(lx,ex,px)))}function YO(gn,ex,lx){var px=iT();PC(gn,ex,lx,px)}function PC(gn,ex,lx,px){var yx={lane:px,revertLane:0,action:lx,hasEagerState:!1,eagerState:null,next:null};if(RM(gn))WO(ex,yx);else{var Sx=gn.alternate;if(gn.lanes===0&&(Sx===null||Sx.lanes===0)&&(Sx=ex.lastRenderedReducer,Sx!==null))try{var Ix=ex.lastRenderedState,Gx=Sx(Ix,lx);if(yx.hasEagerState=!0,yx.eagerState=Gx,JS(Gx,Ix))return pM(gn,ex,yx,0),pS===null&&fM(),!1}catch{}finally{}if(lx=DR(gn,ex,yx,px),lx!==null)return aT(lx,gn,px),XO(lx,ex,px),!0}return!1}function dI(gn,ex,lx,px){if(px={lane:2,revertLane:jI(),action:px,hasEagerState:!1,eagerState:null,next:null},RM(gn)){if(ex)throw Error(s(479))}else ex=DR(gn,lx,px,2),ex!==null&&aT(ex,gn,2)}function RM(gn){var ex=gn.alternate;return gn===WE||ex!==null&&ex===WE}function WO(gn,ex){zA=SM=!0;var lx=gn.pending;lx===null?ex.next=ex:(ex.next=lx.next,lx.next=ex),gn.pending=ex}function XO(gn,ex,lx){if((lx&4194048)!==0){var px=ex.lanes;px&=gn.pendingLanes,lx|=px,ex.lanes=lx,Fx(gn,lx)}}var IM={readContext:GS,use:TM,useCallback:ES,useContext:ES,useEffect:ES,useImperativeHandle:ES,useLayoutEffect:ES,useInsertionEffect:ES,useMemo:ES,useReducer:ES,useRef:ES,useState:ES,useDebugValue:ES,useDeferredValue:ES,useTransition:ES,useSyncExternalStore:ES,useId:ES,useHostTransitionStatus:ES,useFormState:ES,useActionState:ES,useOptimistic:ES,useMemoCache:ES,useCacheRefresh:ES},KO={readContext:GS,use:TM,useCallback:function(gn,ex){return WS().memoizedState=[gn,ex===void 0?null:ex],gn},useContext:GS,useEffect:NO,useImperativeHandle:function(gn,ex,lx){lx=lx!=null?lx.concat([gn]):null,MM(4194308,4,kO.bind(null,ex,gn),lx)},useLayoutEffect:function(gn,ex){return MM(4194308,4,gn,ex)},useInsertionEffect:function(gn,ex){MM(4,2,gn,ex)},useMemo:function(gn,ex){var lx=WS();ex=ex===void 0?null:ex;var px=gn();if(EA){Yx(!0);try{gn()}finally{Yx(!1)}}return lx.memoizedState=[px,ex],px},useReducer:function(gn,ex,lx){var px=WS();if(lx!==void 0){var yx=lx(ex);if(EA){Yx(!0);try{lx(ex)}finally{Yx(!1)}}}else yx=ex;return px.memoizedState=px.baseState=yx,gn={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:yx},px.queue=gn,gn=gn.dispatch=VL.bind(null,WE,gn),[px.memoizedState,gn]},useRef:function(gn){var ex=WS();return gn={current:gn},ex.memoizedState=gn},useState:function(gn){gn=sI(gn);var ex=gn.queue,lx=YO.bind(null,WE,ex);return ex.dispatch=lx,[gn.memoizedState,lx]},useDebugValue:uI,useDeferredValue:function(gn,ex){var lx=WS();return cI(lx,gn,ex)},useTransition:function(){var gn=sI(!1);return gn=zO.bind(null,WE,gn.queue,!0,!1),WS().memoizedState=gn,[!1,gn]},useSyncExternalStore:function(gn,ex,lx){var px=WE,yx=WS();if(iS){if(lx===void 0)throw Error(s(407));lx=lx()}else{if(lx=ex(),pS===null)throw Error(s(349));(eS&124)!==0||vO(px,ex,lx)}yx.memoizedState=lx;var Sx={value:lx,getSnapshot:ex};return yx.queue=Sx,NO(xO.bind(null,px,Sx,gn),[gn]),px.flags|=2048,HA(9,CM(),yO.bind(null,px,Sx,lx,ex),null),lx},useId:function(){var gn=WS(),ex=pS.identifierPrefix;if(iS){var lx=RT,px=MT;lx=(px&~(1<<32-Kx(px)-1)).toString(32)+lx,ex=""+ex+"R"+lx,lx=wM++,0<lx&&(ex+="H"+lx.toString(32)),ex+=""}else lx=kL++,ex=""+ex+"r"+lx.toString(32)+"";return gn.memoizedState=ex},useHostTransitionStatus:pI,useFormState:MO,useActionState:MO,useOptimistic:function(gn){var ex=WS();ex.memoizedState=ex.baseState=gn;var lx={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return ex.queue=lx,ex=dI.bind(null,WE,!0,lx),lx.dispatch=ex,[gn,ex]},useMemoCache:iI,useCacheRefresh:function(){return WS().memoizedState=zL.bind(null,WE)}},QO={readContext:GS,use:TM,useCallback:UO,useContext:GS,useEffect:LO,useImperativeHandle:FO,useInsertionEffect:$O,useLayoutEffect:BO,useMemo:qO,useReducer:AM,useRef:PO,useState:function(){return AM(OT)},useDebugValue:uI,useDeferredValue:function(gn,ex){var lx=TS();return GO(lx,lS.memoizedState,gn,ex)},useTransition:function(){var gn=AM(OT)[0],ex=TS().memoizedState;return[typeof gn=="boolean"?gn:DC(gn),ex]},useSyncExternalStore:mO,useId:jO,useHostTransitionStatus:pI,useFormState:RO,useActionState:RO,useOptimistic:function(gn,ex){var lx=TS();return bO(lx,lS,gn,ex)},useMemoCache:iI,useCacheRefresh:ZO},HL={readContext:GS,use:TM,useCallback:UO,useContext:GS,useEffect:LO,useImperativeHandle:FO,useInsertionEffect:$O,useLayoutEffect:BO,useMemo:qO,useReducer:oI,useRef:PO,useState:function(){return oI(OT)},useDebugValue:uI,useDeferredValue:function(gn,ex){var lx=TS();return lS===null?cI(lx,gn,ex):GO(lx,lS.memoizedState,gn,ex)},useTransition:function(){var gn=oI(OT)[0],ex=TS().memoizedState;return[typeof gn=="boolean"?gn:DC(gn),ex]},useSyncExternalStore:mO,useId:jO,useHostTransitionStatus:pI,useFormState:OO,useActionState:OO,useOptimistic:function(gn,ex){var lx=TS();return lS!==null?bO(lx,lS,gn,ex):(lx.baseState=gn,[gn,lx.queue.dispatch])},useMemoCache:iI,useCacheRefresh:ZO},jA=null,NC=0;function DM(gn){var ex=NC;return NC+=1,jA===null&&(jA=[]),lO(jA,gn,ex)}function LC(gn,ex){ex=ex.props.ref,gn.ref=ex!==void 0?ex:null}function OM(gn,ex){throw ex.$$typeof===tn?Error(s(525)):(gn=Object.prototype.toString.call(ex),Error(s(31,gn==="[object Object]"?"object with keys {"+Object.keys(ex).join(", ")+"}":gn)))}function JO(gn){var ex=gn._init;return ex(gn._payload)}function eP(gn){function ex(oE,rE){if(gn){var uE=oE.deletions;uE===null?(oE.deletions=[rE],oE.flags|=16):uE.push(rE)}}function lx(oE,rE){if(!gn)return null;for(;rE!==null;)ex(oE,rE),rE=rE.sibling;return null}function px(oE){for(var rE=new Map;oE!==null;)oE.key!==null?rE.set(oE.key,oE):rE.set(oE.index,oE),oE=oE.sibling;return rE}function yx(oE,rE){return oE=CT(oE,rE),oE.index=0,oE.sibling=null,oE}function Sx(oE,rE,uE){return oE.index=uE,gn?(uE=oE.alternate,uE!==null?(uE=uE.index,uE<rE?(oE.flags|=67108866,rE):uE):(oE.flags|=67108866,rE)):(oE.flags|=1048576,rE)}function Ix(oE){return gn&&oE.alternate===null&&(oE.flags|=67108866),oE}function Gx(oE,rE,uE,_E){return rE===null||rE.tag!==6?(rE=NR(uE,oE.mode,_E),rE.return=oE,rE):(rE=yx(rE,uE),rE.return=oE,rE)}function Qx(oE,rE,uE,_E){var kE=uE.type;return kE===dn?yE(oE,rE,uE.props.children,_E,uE.key):rE!==null&&(rE.elementType===kE||typeof kE=="object"&&kE!==null&&kE.$$typeof===gx&&JO(kE)===rE.type)?(rE=yx(rE,uE.props),LC(rE,uE),rE.return=oE,rE):(rE=hM(uE.type,uE.key,uE.props,null,oE.mode,_E),LC(rE,uE),rE.return=oE,rE)}function cE(oE,rE,uE,_E){return rE===null||rE.tag!==4||rE.stateNode.containerInfo!==uE.containerInfo||rE.stateNode.implementation!==uE.implementation?(rE=LR(uE,oE.mode,_E),rE.return=oE,rE):(rE=yx(rE,uE.children||[]),rE.return=oE,rE)}function yE(oE,rE,uE,_E,kE){return rE===null||rE.tag!==7?(rE=dA(uE,oE.mode,_E,kE),rE.return=oE,rE):(rE=yx(rE,uE),rE.return=oE,rE)}function wE(oE,rE,uE){if(typeof rE=="string"&&rE!==""||typeof rE=="number"||typeof rE=="bigint")return rE=NR(""+rE,oE.mode,uE),rE.return=oE,rE;if(typeof rE=="object"&&rE!==null){switch(rE.$$typeof){case on:return uE=hM(rE.type,rE.key,rE.props,null,oE.mode,uE),LC(uE,rE),uE.return=oE,uE;case cn:return rE=LR(rE,oE.mode,uE),rE.return=oE,rE;case gx:var _E=rE._init;return rE=_E(rE._payload),wE(oE,rE,uE)}if(_x(rE)||vx(rE))return rE=dA(rE,oE.mode,uE,null),rE.return=oE,rE;if(typeof rE.then=="function")return wE(oE,DM(rE),uE);if(rE.$$typeof===ox)return wE(oE,yM(oE,rE),uE);OM(oE,rE)}return null}function fE(oE,rE,uE,_E){var kE=rE!==null?rE.key:null;if(typeof uE=="string"&&uE!==""||typeof uE=="number"||typeof uE=="bigint")return kE!==null?null:Gx(oE,rE,""+uE,_E);if(typeof uE=="object"&&uE!==null){switch(uE.$$typeof){case on:return uE.key===kE?Qx(oE,rE,uE,_E):null;case cn:return uE.key===kE?cE(oE,rE,uE,_E):null;case gx:return kE=uE._init,uE=kE(uE._payload),fE(oE,rE,uE,_E)}if(_x(uE)||vx(uE))return kE!==null?null:yE(oE,rE,uE,_E,null);if(typeof uE.then=="function")return fE(oE,rE,DM(uE),_E);if(uE.$$typeof===ox)return fE(oE,rE,yM(oE,uE),_E);OM(oE,uE)}return null}function pE(oE,rE,uE,_E,kE){if(typeof _E=="string"&&_E!==""||typeof _E=="number"||typeof _E=="bigint")return oE=oE.get(uE)||null,Gx(rE,oE,""+_E,kE);if(typeof _E=="object"&&_E!==null){switch(_E.$$typeof){case on:return oE=oE.get(_E.key===null?uE:_E.key)||null,Qx(rE,oE,_E,kE);case cn:return oE=oE.get(_E.key===null?uE:_E.key)||null,cE(rE,oE,_E,kE);case gx:var XE=_E._init;return _E=XE(_E._payload),pE(oE,rE,uE,_E,kE)}if(_x(_E)||vx(_E))return oE=oE.get(uE)||null,yE(rE,oE,_E,kE,null);if(typeof _E.then=="function")return pE(oE,rE,uE,DM(_E),kE);if(_E.$$typeof===ox)return pE(oE,rE,uE,yM(rE,_E),kE);OM(rE,_E)}return null}function HE(oE,rE,uE,_E){for(var kE=null,XE=null,UE=rE,VE=rE=0,PS=null;UE!==null&&VE<uE.length;VE++){UE.index>VE?(PS=UE,UE=null):PS=UE.sibling;var rS=fE(oE,UE,uE[VE],_E);if(rS===null){UE===null&&(UE=PS);break}gn&&UE&&rS.alternate===null&&ex(oE,UE),rE=Sx(rS,rE,VE),XE===null?kE=rS:XE.sibling=rS,XE=rS,UE=PS}if(VE===uE.length)return lx(oE,UE),iS&&gA(oE,VE),kE;if(UE===null){for(;VE<uE.length;VE++)UE=wE(oE,uE[VE],_E),UE!==null&&(rE=Sx(UE,rE,VE),XE===null?kE=UE:XE.sibling=UE,XE=UE);return iS&&gA(oE,VE),kE}for(UE=px(UE);VE<uE.length;VE++)PS=pE(UE,oE,VE,uE[VE],_E),PS!==null&&(gn&&PS.alternate!==null&&UE.delete(PS.key===null?VE:PS.key),rE=Sx(PS,rE,VE),XE===null?kE=PS:XE.sibling=PS,XE=PS);return gn&&UE.forEach(function(sA){return ex(oE,sA)}),iS&&gA(oE,VE),kE}function zE(oE,rE,uE,_E){if(uE==null)throw Error(s(151));for(var kE=null,XE=null,UE=rE,VE=rE=0,PS=null,rS=uE.next();UE!==null&&!rS.done;VE++,rS=uE.next()){UE.index>VE?(PS=UE,UE=null):PS=UE.sibling;var sA=fE(oE,UE,rS.value,_E);if(sA===null){UE===null&&(UE=PS);break}gn&&UE&&sA.alternate===null&&ex(oE,UE),rE=Sx(sA,rE,VE),XE===null?kE=sA:XE.sibling=sA,XE=sA,UE=PS}if(rS.done)return lx(oE,UE),iS&&gA(oE,VE),kE;if(UE===null){for(;!rS.done;VE++,rS=uE.next())rS=wE(oE,rS.value,_E),rS!==null&&(rE=Sx(rS,rE,VE),XE===null?kE=rS:XE.sibling=rS,XE=rS);return iS&&gA(oE,VE),kE}for(UE=px(UE);!rS.done;VE++,rS=uE.next())rS=pE(UE,oE,VE,rS.value,_E),rS!==null&&(gn&&rS.alternate!==null&&UE.delete(rS.key===null?VE:rS.key),rE=Sx(rS,rE,VE),XE===null?kE=rS:XE.sibling=rS,XE=rS);return gn&&UE.forEach(function(j$){return ex(oE,j$)}),iS&&gA(oE,VE),kE}function cS(oE,rE,uE,_E){if(typeof uE=="object"&&uE!==null&&uE.type===dn&&uE.key===null&&(uE=uE.props.children),typeof uE=="object"&&uE!==null){switch(uE.$$typeof){case on:e:{for(var kE=uE.key;rE!==null;){if(rE.key===kE){if(kE=uE.type,kE===dn){if(rE.tag===7){lx(oE,rE.sibling),_E=yx(rE,uE.props.children),_E.return=oE,oE=_E;break e}}else if(rE.elementType===kE||typeof kE=="object"&&kE!==null&&kE.$$typeof===gx&&JO(kE)===rE.type){lx(oE,rE.sibling),_E=yx(rE,uE.props),LC(_E,uE),_E.return=oE,oE=_E;break e}lx(oE,rE);break}else ex(oE,rE);rE=rE.sibling}uE.type===dn?(_E=dA(uE.props.children,oE.mode,_E,uE.key),_E.return=oE,oE=_E):(_E=hM(uE.type,uE.key,uE.props,null,oE.mode,_E),LC(_E,uE),_E.return=oE,oE=_E)}return Ix(oE);case cn:e:{for(kE=uE.key;rE!==null;){if(rE.key===kE)if(rE.tag===4&&rE.stateNode.containerInfo===uE.containerInfo&&rE.stateNode.implementation===uE.implementation){lx(oE,rE.sibling),_E=yx(rE,uE.children||[]),_E.return=oE,oE=_E;break e}else{lx(oE,rE);break}else ex(oE,rE);rE=rE.sibling}_E=LR(uE,oE.mode,_E),_E.return=oE,oE=_E}return Ix(oE);case gx:return kE=uE._init,uE=kE(uE._payload),cS(oE,rE,uE,_E)}if(_x(uE))return HE(oE,rE,uE,_E);if(vx(uE)){if(kE=vx(uE),typeof kE!="function")throw Error(s(150));return uE=kE.call(uE),zE(oE,rE,uE,_E)}if(typeof uE.then=="function")return cS(oE,rE,DM(uE),_E);if(uE.$$typeof===ox)return cS(oE,rE,yM(oE,uE),_E);OM(oE,uE)}return typeof uE=="string"&&uE!==""||typeof uE=="number"||typeof uE=="bigint"?(uE=""+uE,rE!==null&&rE.tag===6?(lx(oE,rE.sibling),_E=yx(rE,uE),_E.return=oE,oE=_E):(lx(oE,rE),_E=NR(uE,oE.mode,_E),_E.return=oE,oE=_E),Ix(oE)):lx(oE,rE)}return function(oE,rE,uE,_E){try{NC=0;var kE=cS(oE,rE,uE,_E);return jA=null,kE}catch(UE){if(UE===TC||UE===_M)throw UE;var XE=eT(29,UE,null,oE.mode);return XE.lanes=_E,XE.return=oE,XE}finally{}}}var ZA=eP(!0),tP=eP(!1),pT=Nx(null),ET=null;function jT(gn){var ex=gn.alternate;Rx(RS,RS.current&1),Rx(pT,gn),ET===null&&(ex===null||GA.current!==null||ex.memoizedState!==null)&&(ET=gn)}function rP(gn){if(gn.tag===22){if(Rx(RS,RS.current),Rx(pT,gn),ET===null){var ex=gn.alternate;ex!==null&&ex.memoizedState!==null&&(ET=gn)}}else ZT()}function ZT(){Rx(RS,RS.current),Rx(pT,pT.current)}function PT(gn){Ux(pT),ET===gn&&(ET=null),Ux(RS)}var RS=Nx(0);function PM(gn){for(var ex=gn;ex!==null;){if(ex.tag===13){var lx=ex.memoizedState;if(lx!==null&&(lx=lx.dehydrated,lx===null||lx.data==="$?"||iD(lx)))return ex}else if(ex.tag===19&&ex.memoizedProps.revealOrder!==void 0){if((ex.flags&128)!==0)return ex}else if(ex.child!==null){ex.child.return=ex,ex=ex.child;continue}if(ex===gn)break;for(;ex.sibling===null;){if(ex.return===null||ex.return===gn)return null;ex=ex.return}ex.sibling.return=ex.return,ex=ex.sibling}return null}function hI(gn,ex,lx,px){ex=gn.memoizedState,lx=lx(px,ex),lx=lx==null?ex:en({},ex,lx),gn.memoizedState=lx,gn.lanes===0&&(gn.updateQueue.baseState=lx)}var gI={enqueueSetState:function(gn,ex,lx){gn=gn._reactInternals;var px=iT(),yx=zT(px);yx.payload=ex,lx!=null&&(yx.callback=lx),ex=VT(gn,yx,px),ex!==null&&(aT(ex,gn,px),CC(ex,gn,px))},enqueueReplaceState:function(gn,ex,lx){gn=gn._reactInternals;var px=iT(),yx=zT(px);yx.tag=1,yx.payload=ex,lx!=null&&(yx.callback=lx),ex=VT(gn,yx,px),ex!==null&&(aT(ex,gn,px),CC(ex,gn,px))},enqueueForceUpdate:function(gn,ex){gn=gn._reactInternals;var lx=iT(),px=zT(lx);px.tag=2,ex!=null&&(px.callback=ex),ex=VT(gn,px,lx),ex!==null&&(aT(ex,gn,lx),CC(ex,gn,lx))}};function nP(gn,ex,lx,px,yx,Sx,Ix){return gn=gn.stateNode,typeof gn.shouldComponentUpdate=="function"?gn.shouldComponentUpdate(px,Sx,Ix):ex.prototype&&ex.prototype.isPureReactComponent?!vC(lx,px)||!vC(yx,Sx):!0}function iP(gn,ex,lx,px){gn=ex.state,typeof ex.componentWillReceiveProps=="function"&&ex.componentWillReceiveProps(lx,px),typeof ex.UNSAFE_componentWillReceiveProps=="function"&&ex.UNSAFE_componentWillReceiveProps(lx,px),ex.state!==gn&&gI.enqueueReplaceState(ex,ex.state,null)}function bA(gn,ex){var lx=ex;if("ref"in ex){lx={};for(var px in ex)px!=="ref"&&(lx[px]=ex[px])}if(gn=gn.defaultProps){lx===ex&&(lx=en({},lx));for(var yx in gn)lx[yx]===void 0&&(lx[yx]=gn[yx])}return lx}var NM=typeof reportError=="function"?reportError:function(gn){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ex=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof gn=="object"&&gn!==null&&typeof gn.message=="string"?String(gn.message):String(gn),error:gn});if(!window.dispatchEvent(ex))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",gn);return}console.error(gn)};function aP(gn){NM(gn)}function oP(gn){console.error(gn)}function sP(gn){NM(gn)}function LM(gn,ex){try{var lx=gn.onUncaughtError;lx(ex.value,{componentStack:ex.stack})}catch(px){setTimeout(function(){throw px})}}function lP(gn,ex,lx){try{var px=gn.onCaughtError;px(lx.value,{componentStack:lx.stack,errorBoundary:ex.tag===1?ex.stateNode:null})}catch(yx){setTimeout(function(){throw yx})}}function mI(gn,ex,lx){return lx=zT(lx),lx.tag=3,lx.payload={element:null},lx.callback=function(){LM(gn,ex)},lx}function uP(gn){return gn=zT(gn),gn.tag=3,gn}function cP(gn,ex,lx,px){var yx=lx.type.getDerivedStateFromError;if(typeof yx=="function"){var Sx=px.value;gn.payload=function(){return yx(Sx)},gn.callback=function(){lP(ex,lx,px)}}var Ix=lx.stateNode;Ix!==null&&typeof Ix.componentDidCatch=="function"&&(gn.callback=function(){lP(ex,lx,px),typeof yx!="function"&&(JT===null?JT=new Set([this]):JT.add(this));var Gx=px.stack;this.componentDidCatch(px.value,{componentStack:Gx!==null?Gx:""})})}function jL(gn,ex,lx,px,yx){if(lx.flags|=32768,px!==null&&typeof px=="object"&&typeof px.then=="function"){if(ex=lx.alternate,ex!==null&&bC(ex,lx,yx,!0),lx=pT.current,lx!==null){switch(lx.tag){case 13:return ET===null?qI():lx.alternate===null&&xS===0&&(xS=3),lx.flags&=-257,lx.flags|=65536,lx.lanes=yx,px===HR?lx.flags|=16384:(ex=lx.updateQueue,ex===null?lx.updateQueue=new Set([px]):ex.add(px),zI(gn,px,yx)),!1;case 22:return lx.flags|=65536,px===HR?lx.flags|=16384:(ex=lx.updateQueue,ex===null?(ex={transitions:null,markerInstances:null,retryQueue:new Set([px])},lx.updateQueue=ex):(lx=ex.retryQueue,lx===null?ex.retryQueue=new Set([px]):lx.add(px)),zI(gn,px,yx)),!1}throw Error(s(435,lx.tag))}return zI(gn,px,yx),qI(),!1}if(iS)return ex=pT.current,ex!==null?((ex.flags&65536)===0&&(ex.flags|=256),ex.flags|=65536,ex.lanes=yx,px!==kR&&(gn=Error(s(422),{cause:px}),EC(lT(gn,lx)))):(px!==kR&&(ex=Error(s(423),{cause:px}),EC(lT(ex,lx))),gn=gn.current.alternate,gn.flags|=65536,yx&=-yx,gn.lanes|=yx,px=lT(px,lx),yx=mI(gn.stateNode,px,yx),YR(gn,yx),xS!==4&&(xS=2)),!1;var Sx=Error(s(520),{cause:px});if(Sx=lT(Sx,lx),GC===null?GC=[Sx]:GC.push(Sx),xS!==4&&(xS=2),ex===null)return!0;px=lT(px,lx),lx=ex;do{switch(lx.tag){case 3:return lx.flags|=65536,gn=yx&-yx,lx.lanes|=gn,gn=mI(lx.stateNode,px,gn),YR(lx,gn),!1;case 1:if(ex=lx.type,Sx=lx.stateNode,(lx.flags&128)===0&&(typeof ex.getDerivedStateFromError=="function"||Sx!==null&&typeof Sx.componentDidCatch=="function"&&(JT===null||!JT.has(Sx))))return lx.flags|=65536,yx&=-yx,lx.lanes|=yx,yx=uP(yx),cP(yx,gn,lx,px),YR(lx,yx),!1}lx=lx.return}while(lx!==null);return!1}var fP=Error(s(461)),IS=!1;function BS(gn,ex,lx,px){ex.child=gn===null?tP(ex,null,lx,px):ZA(ex,gn.child,lx,px)}function pP(gn,ex,lx,px,yx){lx=lx.render;var Sx=ex.ref;if("ref"in px){var Ix={};for(var Gx in px)Gx!=="ref"&&(Ix[Gx]=px[Gx])}else Ix=px;return xA(ex),px=JR(gn,ex,lx,Ix,Sx,yx),Gx=eI(),gn!==null&&!IS?(tI(gn,ex,yx),NT(gn,ex,yx)):(iS&&Gx&&$R(ex),ex.flags|=1,BS(gn,ex,px,yx),ex.child)}function dP(gn,ex,lx,px,yx){if(gn===null){var Sx=lx.type;return typeof Sx=="function"&&!PR(Sx)&&Sx.defaultProps===void 0&&lx.compare===null?(ex.tag=15,ex.type=Sx,hP(gn,ex,Sx,px,yx)):(gn=hM(lx.type,null,px,ex,ex.mode,yx),gn.ref=ex.ref,gn.return=ex,ex.child=gn)}if(Sx=gn.child,!wI(gn,yx)){var Ix=Sx.memoizedProps;if(lx=lx.compare,lx=lx!==null?lx:vC,lx(Ix,px)&&gn.ref===ex.ref)return NT(gn,ex,yx)}return ex.flags|=1,gn=CT(Sx,px),gn.ref=ex.ref,gn.return=ex,ex.child=gn}function hP(gn,ex,lx,px,yx){if(gn!==null){var Sx=gn.memoizedProps;if(vC(Sx,px)&&gn.ref===ex.ref)if(IS=!1,ex.pendingProps=px=Sx,wI(gn,yx))(gn.flags&131072)!==0&&(IS=!0);else return ex.lanes=gn.lanes,NT(gn,ex,yx)}return vI(gn,ex,lx,px,yx)}function gP(gn,ex,lx){var px=ex.pendingProps,yx=px.children,Sx=gn!==null?gn.memoizedState:null;if(px.mode==="hidden"){if((ex.flags&128)!==0){if(px=Sx!==null?Sx.baseLanes|lx:lx,gn!==null){for(yx=ex.child=gn.child,Sx=0;yx!==null;)Sx=Sx|yx.lanes|yx.childLanes,yx=yx.sibling;ex.childLanes=Sx&~px}else ex.childLanes=0,ex.child=null;return mP(gn,ex,px,lx)}if((lx&536870912)!==0)ex.memoizedState={baseLanes:0,cachePool:null},gn!==null&&xM(ex,Sx!==null?Sx.cachePool:null),Sx!==null?dO(ex,Sx):XR(),rP(ex);else return ex.lanes=ex.childLanes=536870912,mP(gn,ex,Sx!==null?Sx.baseLanes|lx:lx,lx)}else Sx!==null?(xM(ex,Sx.cachePool),dO(ex,Sx),ZT(),ex.memoizedState=null):(gn!==null&&xM(ex,null),XR(),ZT());return BS(gn,ex,yx,lx),ex.child}function mP(gn,ex,lx,px){var yx=VR();return yx=yx===null?null:{parent:CS._currentValue,pool:yx},ex.memoizedState={baseLanes:lx,cachePool:yx},gn!==null&&xM(ex,null),XR(),rP(ex),gn!==null&&bC(gn,ex,px,!0),null}function $M(gn,ex){var lx=ex.ref;if(lx===null)gn!==null&&gn.ref!==null&&(ex.flags|=4194816);else{if(typeof lx!="function"&&typeof lx!="object")throw Error(s(284));(gn===null||gn.ref!==lx)&&(ex.flags|=4194816)}}function vI(gn,ex,lx,px,yx){return xA(ex),lx=JR(gn,ex,lx,px,void 0,yx),px=eI(),gn!==null&&!IS?(tI(gn,ex,yx),NT(gn,ex,yx)):(iS&&px&&$R(ex),ex.flags|=1,BS(gn,ex,lx,yx),ex.child)}function vP(gn,ex,lx,px,yx,Sx){return xA(ex),ex.updateQueue=null,lx=gO(ex,px,lx,yx),hO(gn),px=eI(),gn!==null&&!IS?(tI(gn,ex,Sx),NT(gn,ex,Sx)):(iS&&px&&$R(ex),ex.flags|=1,BS(gn,ex,lx,Sx),ex.child)}function yP(gn,ex,lx,px,yx){if(xA(ex),ex.stateNode===null){var Sx=BA,Ix=lx.contextType;typeof Ix=="object"&&Ix!==null&&(Sx=GS(Ix)),Sx=new lx(px,Sx),ex.memoizedState=Sx.state!==null&&Sx.state!==void 0?Sx.state:null,Sx.updater=gI,ex.stateNode=Sx,Sx._reactInternals=ex,Sx=ex.stateNode,Sx.props=px,Sx.state=ex.memoizedState,Sx.refs={},jR(ex),Ix=lx.contextType,Sx.context=typeof Ix=="object"&&Ix!==null?GS(Ix):BA,Sx.state=ex.memoizedState,Ix=lx.getDerivedStateFromProps,typeof Ix=="function"&&(hI(ex,lx,Ix,px),Sx.state=ex.memoizedState),typeof lx.getDerivedStateFromProps=="function"||typeof Sx.getSnapshotBeforeUpdate=="function"||typeof Sx.UNSAFE_componentWillMount!="function"&&typeof Sx.componentWillMount!="function"||(Ix=Sx.state,typeof Sx.componentWillMount=="function"&&Sx.componentWillMount(),typeof Sx.UNSAFE_componentWillMount=="function"&&Sx.UNSAFE_componentWillMount(),Ix!==Sx.state&&gI.enqueueReplaceState(Sx,Sx.state,null),RC(ex,px,Sx,yx),MC(),Sx.state=ex.memoizedState),typeof Sx.componentDidMount=="function"&&(ex.flags|=4194308),px=!0}else if(gn===null){Sx=ex.stateNode;var Gx=ex.memoizedProps,Qx=bA(lx,Gx);Sx.props=Qx;var cE=Sx.context,yE=lx.contextType;Ix=BA,typeof yE=="object"&&yE!==null&&(Ix=GS(yE));var wE=lx.getDerivedStateFromProps;yE=typeof wE=="function"||typeof Sx.getSnapshotBeforeUpdate=="function",Gx=ex.pendingProps!==Gx,yE||typeof Sx.UNSAFE_componentWillReceiveProps!="function"&&typeof Sx.componentWillReceiveProps!="function"||(Gx||cE!==Ix)&&iP(ex,Sx,px,Ix),GT=!1;var fE=ex.memoizedState;Sx.state=fE,RC(ex,px,Sx,yx),MC(),cE=ex.memoizedState,Gx||fE!==cE||GT?(typeof wE=="function"&&(hI(ex,lx,wE,px),cE=ex.memoizedState),(Qx=GT||nP(ex,lx,Qx,px,fE,cE,Ix))?(yE||typeof Sx.UNSAFE_componentWillMount!="function"&&typeof Sx.componentWillMount!="function"||(typeof Sx.componentWillMount=="function"&&Sx.componentWillMount(),typeof Sx.UNSAFE_componentWillMount=="function"&&Sx.UNSAFE_componentWillMount()),typeof Sx.componentDidMount=="function"&&(ex.flags|=4194308)):(typeof Sx.componentDidMount=="function"&&(ex.flags|=4194308),ex.memoizedProps=px,ex.memoizedState=cE),Sx.props=px,Sx.state=cE,Sx.context=Ix,px=Qx):(typeof Sx.componentDidMount=="function"&&(ex.flags|=4194308),px=!1)}else{Sx=ex.stateNode,ZR(gn,ex),Ix=ex.memoizedProps,yE=bA(lx,Ix),Sx.props=yE,wE=ex.pendingProps,fE=Sx.context,cE=lx.contextType,Qx=BA,typeof cE=="object"&&cE!==null&&(Qx=GS(cE)),Gx=lx.getDerivedStateFromProps,(cE=typeof Gx=="function"||typeof Sx.getSnapshotBeforeUpdate=="function")||typeof Sx.UNSAFE_componentWillReceiveProps!="function"&&typeof Sx.componentWillReceiveProps!="function"||(Ix!==wE||fE!==Qx)&&iP(ex,Sx,px,Qx),GT=!1,fE=ex.memoizedState,Sx.state=fE,RC(ex,px,Sx,yx),MC();var pE=ex.memoizedState;Ix!==wE||fE!==pE||GT||gn!==null&&gn.dependencies!==null&&vM(gn.dependencies)?(typeof Gx=="function"&&(hI(ex,lx,Gx,px),pE=ex.memoizedState),(yE=GT||nP(ex,lx,yE,px,fE,pE,Qx)||gn!==null&&gn.dependencies!==null&&vM(gn.dependencies))?(cE||typeof Sx.UNSAFE_componentWillUpdate!="function"&&typeof Sx.componentWillUpdate!="function"||(typeof Sx.componentWillUpdate=="function"&&Sx.componentWillUpdate(px,pE,Qx),typeof Sx.UNSAFE_componentWillUpdate=="function"&&Sx.UNSAFE_componentWillUpdate(px,pE,Qx)),typeof Sx.componentDidUpdate=="function"&&(ex.flags|=4),typeof Sx.getSnapshotBeforeUpdate=="function"&&(ex.flags|=1024)):(typeof Sx.componentDidUpdate!="function"||Ix===gn.memoizedProps&&fE===gn.memoizedState||(ex.flags|=4),typeof Sx.getSnapshotBeforeUpdate!="function"||Ix===gn.memoizedProps&&fE===gn.memoizedState||(ex.flags|=1024),ex.memoizedProps=px,ex.memoizedState=pE),Sx.props=px,Sx.state=pE,Sx.context=Qx,px=yE):(typeof Sx.componentDidUpdate!="function"||Ix===gn.memoizedProps&&fE===gn.memoizedState||(ex.flags|=4),typeof Sx.getSnapshotBeforeUpdate!="function"||Ix===gn.memoizedProps&&fE===gn.memoizedState||(ex.flags|=1024),px=!1)}return Sx=px,$M(gn,ex),px=(ex.flags&128)!==0,Sx||px?(Sx=ex.stateNode,lx=px&&typeof lx.getDerivedStateFromError!="function"?null:Sx.render(),ex.flags|=1,gn!==null&&px?(ex.child=ZA(ex,gn.child,null,yx),ex.child=ZA(ex,null,lx,yx)):BS(gn,ex,lx,yx),ex.memoizedState=Sx.state,gn=ex.child):gn=NT(gn,ex,yx),gn}function xP(gn,ex,lx,px){return _C(),ex.flags|=256,BS(gn,ex,lx,px),ex.child}var yI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xI(gn){return{baseLanes:gn,cachePool:aO()}}function _I(gn,ex,lx){return gn=gn!==null?gn.childLanes&~lx:0,ex&&(gn|=dT),gn}function _P(gn,ex,lx){var px=ex.pendingProps,yx=!1,Sx=(ex.flags&128)!==0,Ix;if((Ix=Sx)||(Ix=gn!==null&&gn.memoizedState===null?!1:(RS.current&2)!==0),Ix&&(yx=!0,ex.flags&=-129),Ix=(ex.flags&32)!==0,ex.flags&=-33,gn===null){if(iS){if(yx?jT(ex):ZT(),iS){var Gx=yS,Qx;if(Qx=Gx){e:{for(Qx=Gx,Gx=_T;Qx.nodeType!==8;){if(!Gx){Gx=null;break e}if(Qx=xT(Qx.nextSibling),Qx===null){Gx=null;break e}}Gx=Qx}Gx!==null?(ex.memoizedState={dehydrated:Gx,treeContext:hA!==null?{id:MT,overflow:RT}:null,retryLane:536870912,hydrationErrors:null},Qx=eT(18,null,null,0),Qx.stateNode=Gx,Qx.return=ex,ex.child=Qx,HS=ex,yS=null,Qx=!0):Qx=!1}Qx||vA(ex)}if(Gx=ex.memoizedState,Gx!==null&&(Gx=Gx.dehydrated,Gx!==null))return iD(Gx)?ex.lanes=32:ex.lanes=536870912,null;PT(ex)}return Gx=px.children,px=px.fallback,yx?(ZT(),yx=ex.mode,Gx=BM({mode:"hidden",children:Gx},yx),px=dA(px,yx,lx,null),Gx.return=ex,px.return=ex,Gx.sibling=px,ex.child=Gx,yx=ex.child,yx.memoizedState=xI(lx),yx.childLanes=_I(gn,Ix,lx),ex.memoizedState=yI,px):(jT(ex),EI(ex,Gx))}if(Qx=gn.memoizedState,Qx!==null&&(Gx=Qx.dehydrated,Gx!==null)){if(Sx)ex.flags&256?(jT(ex),ex.flags&=-257,ex=bI(gn,ex,lx)):ex.memoizedState!==null?(ZT(),ex.child=gn.child,ex.flags|=128,ex=null):(ZT(),yx=px.fallback,Gx=ex.mode,px=BM({mode:"visible",children:px.children},Gx),yx=dA(yx,Gx,lx,null),yx.flags|=2,px.return=ex,yx.return=ex,px.sibling=yx,ex.child=px,ZA(ex,gn.child,null,lx),px=ex.child,px.memoizedState=xI(lx),px.childLanes=_I(gn,Ix,lx),ex.memoizedState=yI,ex=yx);else if(jT(ex),iD(Gx)){if(Ix=Gx.nextSibling&&Gx.nextSibling.dataset,Ix)var cE=Ix.dgst;Ix=cE,px=Error(s(419)),px.stack="",px.digest=Ix,EC({value:px,source:null,stack:null}),ex=bI(gn,ex,lx)}else if(IS||bC(gn,ex,lx,!1),Ix=(lx&gn.childLanes)!==0,IS||Ix){if(Ix=pS,Ix!==null&&(px=lx&-lx,px=(px&42)!==0?1:Zx(px),px=(px&(Ix.suspendedLanes|lx))!==0?0:px,px!==0&&px!==Qx.retryLane))throw Qx.retryLane=px,$A(gn,px),aT(Ix,gn,px),fP;Gx.data==="$?"||qI(),ex=bI(gn,ex,lx)}else Gx.data==="$?"?(ex.flags|=192,ex.child=gn.child,ex=null):(gn=Qx.treeContext,yS=xT(Gx.nextSibling),HS=ex,iS=!0,mA=null,_T=!1,gn!==null&&(cT[fT++]=MT,cT[fT++]=RT,cT[fT++]=hA,MT=gn.id,RT=gn.overflow,hA=ex),ex=EI(ex,px.children),ex.flags|=4096);return ex}return yx?(ZT(),yx=px.fallback,Gx=ex.mode,Qx=gn.child,cE=Qx.sibling,px=CT(Qx,{mode:"hidden",children:px.children}),px.subtreeFlags=Qx.subtreeFlags&65011712,cE!==null?yx=CT(cE,yx):(yx=dA(yx,Gx,lx,null),yx.flags|=2),yx.return=ex,px.return=ex,px.sibling=yx,ex.child=px,px=yx,yx=ex.child,Gx=gn.child.memoizedState,Gx===null?Gx=xI(lx):(Qx=Gx.cachePool,Qx!==null?(cE=CS._currentValue,Qx=Qx.parent!==cE?{parent:cE,pool:cE}:Qx):Qx=aO(),Gx={baseLanes:Gx.baseLanes|lx,cachePool:Qx}),yx.memoizedState=Gx,yx.childLanes=_I(gn,Ix,lx),ex.memoizedState=yI,px):(jT(ex),lx=gn.child,gn=lx.sibling,lx=CT(lx,{mode:"visible",children:px.children}),lx.return=ex,lx.sibling=null,gn!==null&&(Ix=ex.deletions,Ix===null?(ex.deletions=[gn],ex.flags|=16):Ix.push(gn)),ex.child=lx,ex.memoizedState=null,lx)}function EI(gn,ex){return ex=BM({mode:"visible",children:ex},gn.mode),ex.return=gn,gn.child=ex}function BM(gn,ex){return gn=eT(22,gn,null,ex),gn.lanes=0,gn.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},gn}function bI(gn,ex,lx){return ZA(ex,gn.child,null,lx),gn=EI(ex,ex.pendingProps.children),gn.flags|=2,ex.memoizedState=null,gn}function EP(gn,ex,lx){gn.lanes|=ex;var px=gn.alternate;px!==null&&(px.lanes|=ex),UR(gn.return,ex,lx)}function SI(gn,ex,lx,px,yx){var Sx=gn.memoizedState;Sx===null?gn.memoizedState={isBackwards:ex,rendering:null,renderingStartTime:0,last:px,tail:lx,tailMode:yx}:(Sx.isBackwards=ex,Sx.rendering=null,Sx.renderingStartTime=0,Sx.last=px,Sx.tail=lx,Sx.tailMode=yx)}function bP(gn,ex,lx){var px=ex.pendingProps,yx=px.revealOrder,Sx=px.tail;if(BS(gn,ex,px.children,lx),px=RS.current,(px&2)!==0)px=px&1|2,ex.flags|=128;else{if(gn!==null&&(gn.flags&128)!==0)e:for(gn=ex.child;gn!==null;){if(gn.tag===13)gn.memoizedState!==null&&EP(gn,lx,ex);else if(gn.tag===19)EP(gn,lx,ex);else if(gn.child!==null){gn.child.return=gn,gn=gn.child;continue}if(gn===ex)break e;for(;gn.sibling===null;){if(gn.return===null||gn.return===ex)break e;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}px&=1}switch(Rx(RS,px),yx){case"forwards":for(lx=ex.child,yx=null;lx!==null;)gn=lx.alternate,gn!==null&&PM(gn)===null&&(yx=lx),lx=lx.sibling;lx=yx,lx===null?(yx=ex.child,ex.child=null):(yx=lx.sibling,lx.sibling=null),SI(ex,!1,yx,lx,Sx);break;case"backwards":for(lx=null,yx=ex.child,ex.child=null;yx!==null;){if(gn=yx.alternate,gn!==null&&PM(gn)===null){ex.child=yx;break}gn=yx.sibling,yx.sibling=lx,lx=yx,yx=gn}SI(ex,!0,lx,null,Sx);break;case"together":SI(ex,!1,null,null,void 0);break;default:ex.memoizedState=null}return ex.child}function NT(gn,ex,lx){if(gn!==null&&(ex.dependencies=gn.dependencies),QT|=ex.lanes,(lx&ex.childLanes)===0)if(gn!==null){if(bC(gn,ex,lx,!1),(lx&ex.childLanes)===0)return null}else return null;if(gn!==null&&ex.child!==gn.child)throw Error(s(153));if(ex.child!==null){for(gn=ex.child,lx=CT(gn,gn.pendingProps),ex.child=lx,lx.return=ex;gn.sibling!==null;)gn=gn.sibling,lx=lx.sibling=CT(gn,gn.pendingProps),lx.return=ex;lx.sibling=null}return ex.child}function wI(gn,ex){return(gn.lanes&ex)!==0?!0:(gn=gn.dependencies,!!(gn!==null&&vM(gn)))}function ZL(gn,ex,lx){switch(ex.tag){case 3:zx(ex,ex.stateNode.containerInfo),qT(ex,CS,gn.memoizedState.cache),_C();break;case 27:case 5:jx(ex);break;case 4:zx(ex,ex.stateNode.containerInfo);break;case 10:qT(ex,ex.type,ex.memoizedProps.value);break;case 13:var px=ex.memoizedState;if(px!==null)return px.dehydrated!==null?(jT(ex),ex.flags|=128,null):(lx&ex.child.childLanes)!==0?_P(gn,ex,lx):(jT(ex),gn=NT(gn,ex,lx),gn!==null?gn.sibling:null);jT(ex);break;case 19:var yx=(gn.flags&128)!==0;if(px=(lx&ex.childLanes)!==0,px||(bC(gn,ex,lx,!1),px=(lx&ex.childLanes)!==0),yx){if(px)return bP(gn,ex,lx);ex.flags|=128}if(yx=ex.memoizedState,yx!==null&&(yx.rendering=null,yx.tail=null,yx.lastEffect=null),Rx(RS,RS.current),px)break;return null;case 22:case 23:return ex.lanes=0,gP(gn,ex,lx);case 24:qT(ex,CS,gn.memoizedState.cache)}return NT(gn,ex,lx)}function SP(gn,ex,lx){if(gn!==null)if(gn.memoizedProps!==ex.pendingProps)IS=!0;else{if(!wI(gn,lx)&&(ex.flags&128)===0)return IS=!1,ZL(gn,ex,lx);IS=(gn.flags&131072)!==0}else IS=!1,iS&&(ex.flags&1048576)!==0&&QD(ex,mM,ex.index);switch(ex.lanes=0,ex.tag){case 16:e:{gn=ex.pendingProps;var px=ex.elementType,yx=px._init;if(px=yx(px._payload),ex.type=px,typeof px=="function")PR(px)?(gn=bA(px,gn),ex.tag=1,ex=yP(null,ex,px,gn,lx)):(ex.tag=0,ex=vI(null,ex,px,gn,lx));else{if(px!=null){if(yx=px.$$typeof,yx===sx){ex.tag=11,ex=pP(null,ex,px,gn,lx);break e}else if(yx===hx){ex.tag=14,ex=dP(null,ex,px,gn,lx);break e}}throw ex=xx(px)||px,Error(s(306,ex,""))}}return ex;case 0:return vI(gn,ex,ex.type,ex.pendingProps,lx);case 1:return px=ex.type,yx=bA(px,ex.pendingProps),yP(gn,ex,px,yx,lx);case 3:e:{if(zx(ex,ex.stateNode.containerInfo),gn===null)throw Error(s(387));px=ex.pendingProps;var Sx=ex.memoizedState;yx=Sx.element,ZR(gn,ex),RC(ex,px,null,lx);var Ix=ex.memoizedState;if(px=Ix.cache,qT(ex,CS,px),px!==Sx.cache&&qR(ex,[CS],lx,!0),MC(),px=Ix.element,Sx.isDehydrated)if(Sx={element:px,isDehydrated:!1,cache:Ix.cache},ex.updateQueue.baseState=Sx,ex.memoizedState=Sx,ex.flags&256){ex=xP(gn,ex,px,lx);break e}else if(px!==yx){yx=lT(Error(s(424)),ex),EC(yx),ex=xP(gn,ex,px,lx);break e}else{switch(gn=ex.stateNode.containerInfo,gn.nodeType){case 9:gn=gn.body;break;default:gn=gn.nodeName==="HTML"?gn.ownerDocument.body:gn}for(yS=xT(gn.firstChild),HS=ex,iS=!0,mA=null,_T=!0,lx=tP(ex,null,px,lx),ex.child=lx;lx;)lx.flags=lx.flags&-3|4096,lx=lx.sibling}else{if(_C(),px===yx){ex=NT(gn,ex,lx);break e}BS(gn,ex,px,lx)}ex=ex.child}return ex;case 26:return $M(gn,ex),gn===null?(lx=CN(ex.type,null,ex.pendingProps,null))?ex.memoizedState=lx:iS||(lx=ex.type,gn=ex.pendingProps,px=KM($x.current).createElement(lx),px[LE]=ex,px[BE]=gn,FS(px,lx,gn),GE(px),ex.stateNode=px):ex.memoizedState=CN(ex.type,gn.memoizedProps,ex.pendingProps,gn.memoizedState),null;case 27:return jx(ex),gn===null&&iS&&(px=ex.stateNode=wN(ex.type,ex.pendingProps,$x.current),HS=ex,_T=!0,yx=yS,rA(ex.type)?(aD=yx,yS=xT(px.firstChild)):yS=yx),BS(gn,ex,ex.pendingProps.children,lx),$M(gn,ex),gn===null&&(ex.flags|=4194304),ex.child;case 5:return gn===null&&iS&&((yx=px=yS)&&(px=E$(px,ex.type,ex.pendingProps,_T),px!==null?(ex.stateNode=px,HS=ex,yS=xT(px.firstChild),_T=!1,yx=!0):yx=!1),yx||vA(ex)),jx(ex),yx=ex.type,Sx=ex.pendingProps,Ix=gn!==null?gn.memoizedProps:null,px=Sx.children,tD(yx,Sx)?px=null:Ix!==null&&tD(yx,Ix)&&(ex.flags|=32),ex.memoizedState!==null&&(yx=JR(gn,ex,FL,null,null,lx),KC._currentValue=yx),$M(gn,ex),BS(gn,ex,px,lx),ex.child;case 6:return gn===null&&iS&&((gn=lx=yS)&&(lx=b$(lx,ex.pendingProps,_T),lx!==null?(ex.stateNode=lx,HS=ex,yS=null,gn=!0):gn=!1),gn||vA(ex)),null;case 13:return _P(gn,ex,lx);case 4:return zx(ex,ex.stateNode.containerInfo),px=ex.pendingProps,gn===null?ex.child=ZA(ex,null,px,lx):BS(gn,ex,px,lx),ex.child;case 11:return pP(gn,ex,ex.type,ex.pendingProps,lx);case 7:return BS(gn,ex,ex.pendingProps,lx),ex.child;case 8:return BS(gn,ex,ex.pendingProps.children,lx),ex.child;case 12:return BS(gn,ex,ex.pendingProps.children,lx),ex.child;case 10:return px=ex.pendingProps,qT(ex,ex.type,px.value),BS(gn,ex,px.children,lx),ex.child;case 9:return yx=ex.type._context,px=ex.pendingProps.children,xA(ex),yx=GS(yx),px=px(yx),ex.flags|=1,BS(gn,ex,px,lx),ex.child;case 14:return dP(gn,ex,ex.type,ex.pendingProps,lx);case 15:return hP(gn,ex,ex.type,ex.pendingProps,lx);case 19:return bP(gn,ex,lx);case 31:return px=ex.pendingProps,lx=ex.mode,px={mode:px.mode,children:px.children},gn===null?(lx=BM(px,lx),lx.ref=ex.ref,ex.child=lx,lx.return=ex,ex=lx):(lx=CT(gn.child,px),lx.ref=ex.ref,ex.child=lx,lx.return=ex,ex=lx),ex;case 22:return gP(gn,ex,lx);case 24:return xA(ex),px=GS(CS),gn===null?(yx=VR(),yx===null&&(yx=pS,Sx=GR(),yx.pooledCache=Sx,Sx.refCount++,Sx!==null&&(yx.pooledCacheLanes|=lx),yx=Sx),ex.memoizedState={parent:px,cache:yx},jR(ex),qT(ex,CS,yx)):((gn.lanes&lx)!==0&&(ZR(gn,ex),RC(ex,null,null,lx),MC()),yx=gn.memoizedState,Sx=ex.memoizedState,yx.parent!==px?(yx={parent:px,cache:px},ex.memoizedState=yx,ex.lanes===0&&(ex.memoizedState=ex.updateQueue.baseState=yx),qT(ex,CS,px)):(px=Sx.cache,qT(ex,CS,px),px!==yx.cache&&qR(ex,[CS],lx,!0))),BS(gn,ex,ex.pendingProps.children,lx),ex.child;case 29:throw ex.pendingProps}throw Error(s(156,ex.tag))}function LT(gn){gn.flags|=4}function wP(gn,ex){if(ex.type!=="stylesheet"||(ex.state.loading&4)!==0)gn.flags&=-16777217;else if(gn.flags|=16777216,!ON(ex)){if(ex=pT.current,ex!==null&&((eS&4194048)===eS?ET!==null:(eS&62914560)!==eS&&(eS&536870912)===0||ex!==ET))throw AC=HR,oO;gn.flags|=8192}}function kM(gn,ex){ex!==null&&(gn.flags|=4),gn.flags&16384&&(ex=gn.tag!==22?TE():536870912,gn.lanes|=ex,KA|=ex)}function $C(gn,ex){if(!iS)switch(gn.tailMode){case"hidden":ex=gn.tail;for(var lx=null;ex!==null;)ex.alternate!==null&&(lx=ex),ex=ex.sibling;lx===null?gn.tail=null:lx.sibling=null;break;case"collapsed":lx=gn.tail;for(var px=null;lx!==null;)lx.alternate!==null&&(px=lx),lx=lx.sibling;px===null?ex||gn.tail===null?gn.tail=null:gn.tail.sibling=null:px.sibling=null}}function mS(gn){var ex=gn.alternate!==null&&gn.alternate.child===gn.child,lx=0,px=0;if(ex)for(var yx=gn.child;yx!==null;)lx|=yx.lanes|yx.childLanes,px|=yx.subtreeFlags&65011712,px|=yx.flags&65011712,yx.return=gn,yx=yx.sibling;else for(yx=gn.child;yx!==null;)lx|=yx.lanes|yx.childLanes,px|=yx.subtreeFlags,px|=yx.flags,yx.return=gn,yx=yx.sibling;return gn.subtreeFlags|=px,gn.childLanes=lx,ex}function YL(gn,ex,lx){var px=ex.pendingProps;switch(BR(ex),ex.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mS(ex),null;case 1:return mS(ex),null;case 3:return lx=ex.stateNode,px=null,gn!==null&&(px=gn.memoizedState.cache),ex.memoizedState.cache!==px&&(ex.flags|=2048),DT(CS),qx(),lx.pendingContext&&(lx.context=lx.pendingContext,lx.pendingContext=null),(gn===null||gn.child===null)&&(xC(ex)?LT(ex):gn===null||gn.memoizedState.isDehydrated&&(ex.flags&256)===0||(ex.flags|=1024,tO())),mS(ex),null;case 26:return lx=ex.memoizedState,gn===null?(LT(ex),lx!==null?(mS(ex),wP(ex,lx)):(mS(ex),ex.flags&=-16777217)):lx?lx!==gn.memoizedState?(LT(ex),mS(ex),wP(ex,lx)):(mS(ex),ex.flags&=-16777217):(gn.memoizedProps!==px&&LT(ex),mS(ex),ex.flags&=-16777217),null;case 27:Hx(ex),lx=$x.current;var yx=ex.type;if(gn!==null&&ex.stateNode!=null)gn.memoizedProps!==px&&LT(ex);else{if(!px){if(ex.stateNode===null)throw Error(s(166));return mS(ex),null}gn=Ox.current,xC(ex)?JD(ex):(gn=wN(yx,px,lx),ex.stateNode=gn,LT(ex))}return mS(ex),null;case 5:if(Hx(ex),lx=ex.type,gn!==null&&ex.stateNode!=null)gn.memoizedProps!==px&&LT(ex);else{if(!px){if(ex.stateNode===null)throw Error(s(166));return mS(ex),null}if(gn=Ox.current,xC(ex))JD(ex);else{switch(yx=KM($x.current),gn){case 1:gn=yx.createElementNS("http://www.w3.org/2000/svg",lx);break;case 2:gn=yx.createElementNS("http://www.w3.org/1998/Math/MathML",lx);break;default:switch(lx){case"svg":gn=yx.createElementNS("http://www.w3.org/2000/svg",lx);break;case"math":gn=yx.createElementNS("http://www.w3.org/1998/Math/MathML",lx);break;case"script":gn=yx.createElement("div"),gn.innerHTML="<script><\/script>",gn=gn.removeChild(gn.firstChild);break;case"select":gn=typeof px.is=="string"?yx.createElement("select",{is:px.is}):yx.createElement("select"),px.multiple?gn.multiple=!0:px.size&&(gn.size=px.size);break;default:gn=typeof px.is=="string"?yx.createElement(lx,{is:px.is}):yx.createElement(lx)}}gn[LE]=ex,gn[BE]=px;e:for(yx=ex.child;yx!==null;){if(yx.tag===5||yx.tag===6)gn.appendChild(yx.stateNode);else if(yx.tag!==4&&yx.tag!==27&&yx.child!==null){yx.child.return=yx,yx=yx.child;continue}if(yx===ex)break e;for(;yx.sibling===null;){if(yx.return===null||yx.return===ex)break e;yx=yx.return}yx.sibling.return=yx.return,yx=yx.sibling}ex.stateNode=gn;e:switch(FS(gn,lx,px),lx){case"button":case"input":case"select":case"textarea":gn=!!px.autoFocus;break e;case"img":gn=!0;break e;default:gn=!1}gn&&LT(ex)}}return mS(ex),ex.flags&=-16777217,null;case 6:if(gn&&ex.stateNode!=null)gn.memoizedProps!==px&&LT(ex);else{if(typeof px!="string"&&ex.stateNode===null)throw Error(s(166));if(gn=$x.current,xC(ex)){if(gn=ex.stateNode,lx=ex.memoizedProps,px=null,yx=HS,yx!==null)switch(yx.tag){case 27:case 5:px=yx.memoizedProps}gn[LE]=ex,gn=!!(gn.nodeValue===lx||px!==null&&px.suppressHydrationWarning===!0||vN(gn.nodeValue,lx)),gn||vA(ex)}else gn=KM(gn).createTextNode(px),gn[LE]=ex,ex.stateNode=gn}return mS(ex),null;case 13:if(px=ex.memoizedState,gn===null||gn.memoizedState!==null&&gn.memoizedState.dehydrated!==null){if(yx=xC(ex),px!==null&&px.dehydrated!==null){if(gn===null){if(!yx)throw Error(s(318));if(yx=ex.memoizedState,yx=yx!==null?yx.dehydrated:null,!yx)throw Error(s(317));yx[LE]=ex}else _C(),(ex.flags&128)===0&&(ex.memoizedState=null),ex.flags|=4;mS(ex),yx=!1}else yx=tO(),gn!==null&&gn.memoizedState!==null&&(gn.memoizedState.hydrationErrors=yx),yx=!0;if(!yx)return ex.flags&256?(PT(ex),ex):(PT(ex),null)}if(PT(ex),(ex.flags&128)!==0)return ex.lanes=lx,ex;if(lx=px!==null,gn=gn!==null&&gn.memoizedState!==null,lx){px=ex.child,yx=null,px.alternate!==null&&px.alternate.memoizedState!==null&&px.alternate.memoizedState.cachePool!==null&&(yx=px.alternate.memoizedState.cachePool.pool);var Sx=null;px.memoizedState!==null&&px.memoizedState.cachePool!==null&&(Sx=px.memoizedState.cachePool.pool),Sx!==yx&&(px.flags|=2048)}return lx!==gn&&lx&&(ex.child.flags|=8192),kM(ex,ex.updateQueue),mS(ex),null;case 4:return qx(),gn===null&&XI(ex.stateNode.containerInfo),mS(ex),null;case 10:return DT(ex.type),mS(ex),null;case 19:if(Ux(RS),yx=ex.memoizedState,yx===null)return mS(ex),null;if(px=(ex.flags&128)!==0,Sx=yx.rendering,Sx===null)if(px)$C(yx,!1);else{if(xS!==0||gn!==null&&(gn.flags&128)!==0)for(gn=ex.child;gn!==null;){if(Sx=PM(gn),Sx!==null){for(ex.flags|=128,$C(yx,!1),gn=Sx.updateQueue,ex.updateQueue=gn,kM(ex,gn),ex.subtreeFlags=0,gn=lx,lx=ex.child;lx!==null;)KD(lx,gn),lx=lx.sibling;return Rx(RS,RS.current&1|2),ex.child}gn=gn.sibling}yx.tail!==null&&iE()>qM&&(ex.flags|=128,px=!0,$C(yx,!1),ex.lanes=4194304)}else{if(!px)if(gn=PM(Sx),gn!==null){if(ex.flags|=128,px=!0,gn=gn.updateQueue,ex.updateQueue=gn,kM(ex,gn),$C(yx,!0),yx.tail===null&&yx.tailMode==="hidden"&&!Sx.alternate&&!iS)return mS(ex),null}else 2*iE()-yx.renderingStartTime>qM&&lx!==536870912&&(ex.flags|=128,px=!0,$C(yx,!1),ex.lanes=4194304);yx.isBackwards?(Sx.sibling=ex.child,ex.child=Sx):(gn=yx.last,gn!==null?gn.sibling=Sx:ex.child=Sx,yx.last=Sx)}return yx.tail!==null?(ex=yx.tail,yx.rendering=ex,yx.tail=ex.sibling,yx.renderingStartTime=iE(),ex.sibling=null,gn=RS.current,Rx(RS,px?gn&1|2:gn&1),ex):(mS(ex),null);case 22:case 23:return PT(ex),KR(),px=ex.memoizedState!==null,gn!==null?gn.memoizedState!==null!==px&&(ex.flags|=8192):px&&(ex.flags|=8192),px?(lx&536870912)!==0&&(ex.flags&128)===0&&(mS(ex),ex.subtreeFlags&6&&(ex.flags|=8192)):mS(ex),lx=ex.updateQueue,lx!==null&&kM(ex,lx.retryQueue),lx=null,gn!==null&&gn.memoizedState!==null&&gn.memoizedState.cachePool!==null&&(lx=gn.memoizedState.cachePool.pool),px=null,ex.memoizedState!==null&&ex.memoizedState.cachePool!==null&&(px=ex.memoizedState.cachePool.pool),px!==lx&&(ex.flags|=2048),gn!==null&&Ux(_A),null;case 24:return lx=null,gn!==null&&(lx=gn.memoizedState.cache),ex.memoizedState.cache!==lx&&(ex.flags|=2048),DT(CS),mS(ex),null;case 25:return null;case 30:return null}throw Error(s(156,ex.tag))}function WL(gn,ex){switch(BR(ex),ex.tag){case 1:return gn=ex.flags,gn&65536?(ex.flags=gn&-65537|128,ex):null;case 3:return DT(CS),qx(),gn=ex.flags,(gn&65536)!==0&&(gn&128)===0?(ex.flags=gn&-65537|128,ex):null;case 26:case 27:case 5:return Hx(ex),null;case 13:if(PT(ex),gn=ex.memoizedState,gn!==null&&gn.dehydrated!==null){if(ex.alternate===null)throw Error(s(340));_C()}return gn=ex.flags,gn&65536?(ex.flags=gn&-65537|128,ex):null;case 19:return Ux(RS),null;case 4:return qx(),null;case 10:return DT(ex.type),null;case 22:case 23:return PT(ex),KR(),gn!==null&&Ux(_A),gn=ex.flags,gn&65536?(ex.flags=gn&-65537|128,ex):null;case 24:return DT(CS),null;case 25:return null;default:return null}}function TP(gn,ex){switch(BR(ex),ex.tag){case 3:DT(CS),qx();break;case 26:case 27:case 5:Hx(ex);break;case 4:qx();break;case 13:PT(ex);break;case 19:Ux(RS);break;case 10:DT(ex.type);break;case 22:case 23:PT(ex),KR(),gn!==null&&Ux(_A);break;case 24:DT(CS)}}function BC(gn,ex){try{var lx=ex.updateQueue,px=lx!==null?lx.lastEffect:null;if(px!==null){var yx=px.next;lx=yx;do{if((lx.tag&gn)===gn){px=void 0;var Sx=lx.create,Ix=lx.inst;px=Sx(),Ix.destroy=px}lx=lx.next}while(lx!==yx)}}catch(Gx){fS(ex,ex.return,Gx)}}function YT(gn,ex,lx){try{var px=ex.updateQueue,yx=px!==null?px.lastEffect:null;if(yx!==null){var Sx=yx.next;px=Sx;do{if((px.tag&gn)===gn){var Ix=px.inst,Gx=Ix.destroy;if(Gx!==void 0){Ix.destroy=void 0,yx=ex;var Qx=lx,cE=Gx;try{cE()}catch(yE){fS(yx,Qx,yE)}}}px=px.next}while(px!==Sx)}}catch(yE){fS(ex,ex.return,yE)}}function AP(gn){var ex=gn.updateQueue;if(ex!==null){var lx=gn.stateNode;try{pO(ex,lx)}catch(px){fS(gn,gn.return,px)}}}function CP(gn,ex,lx){lx.props=bA(gn.type,gn.memoizedProps),lx.state=gn.memoizedState;try{lx.componentWillUnmount()}catch(px){fS(gn,ex,px)}}function kC(gn,ex){try{var lx=gn.ref;if(lx!==null){switch(gn.tag){case 26:case 27:case 5:var px=gn.stateNode;break;case 30:px=gn.stateNode;break;default:px=gn.stateNode}typeof lx=="function"?gn.refCleanup=lx(px):lx.current=px}}catch(yx){fS(gn,ex,yx)}}function bT(gn,ex){var lx=gn.ref,px=gn.refCleanup;if(lx!==null)if(typeof px=="function")try{px()}catch(yx){fS(gn,ex,yx)}finally{gn.refCleanup=null,gn=gn.alternate,gn!=null&&(gn.refCleanup=null)}else if(typeof lx=="function")try{lx(null)}catch(yx){fS(gn,ex,yx)}else lx.current=null}function MP(gn){var ex=gn.type,lx=gn.memoizedProps,px=gn.stateNode;try{e:switch(ex){case"button":case"input":case"select":case"textarea":lx.autoFocus&&px.focus();break e;case"img":lx.src?px.src=lx.src:lx.srcSet&&(px.srcset=lx.srcSet)}}catch(yx){fS(gn,gn.return,yx)}}function TI(gn,ex,lx){try{var px=gn.stateNode;m$(px,gn.type,lx,ex),px[BE]=ex}catch(yx){fS(gn,gn.return,yx)}}function RP(gn){return gn.tag===5||gn.tag===3||gn.tag===26||gn.tag===27&&rA(gn.type)||gn.tag===4}function AI(gn){e:for(;;){for(;gn.sibling===null;){if(gn.return===null||RP(gn.return))return null;gn=gn.return}for(gn.sibling.return=gn.return,gn=gn.sibling;gn.tag!==5&&gn.tag!==6&&gn.tag!==18;){if(gn.tag===27&&rA(gn.type)||gn.flags&2||gn.child===null||gn.tag===4)continue e;gn.child.return=gn,gn=gn.child}if(!(gn.flags&2))return gn.stateNode}}function CI(gn,ex,lx){var px=gn.tag;if(px===5||px===6)gn=gn.stateNode,ex?(lx.nodeType===9?lx.body:lx.nodeName==="HTML"?lx.ownerDocument.body:lx).insertBefore(gn,ex):(ex=lx.nodeType===9?lx.body:lx.nodeName==="HTML"?lx.ownerDocument.body:lx,ex.appendChild(gn),lx=lx._reactRootContainer,lx!=null||ex.onclick!==null||(ex.onclick=XM));else if(px!==4&&(px===27&&rA(gn.type)&&(lx=gn.stateNode,ex=null),gn=gn.child,gn!==null))for(CI(gn,ex,lx),gn=gn.sibling;gn!==null;)CI(gn,ex,lx),gn=gn.sibling}function FM(gn,ex,lx){var px=gn.tag;if(px===5||px===6)gn=gn.stateNode,ex?lx.insertBefore(gn,ex):lx.appendChild(gn);else if(px!==4&&(px===27&&rA(gn.type)&&(lx=gn.stateNode),gn=gn.child,gn!==null))for(FM(gn,ex,lx),gn=gn.sibling;gn!==null;)FM(gn,ex,lx),gn=gn.sibling}function IP(gn){var ex=gn.stateNode,lx=gn.memoizedProps;try{for(var px=gn.type,yx=ex.attributes;yx.length;)ex.removeAttributeNode(yx[0]);FS(ex,px,lx),ex[LE]=gn,ex[BE]=lx}catch(Sx){fS(gn,gn.return,Sx)}}var $T=!1,bS=!1,MI=!1,DP=typeof WeakSet=="function"?WeakSet:Set,DS=null;function XL(gn,ex){if(gn=gn.containerInfo,JI=nR,gn=qD(gn),TR(gn)){if("selectionStart"in gn)var lx={start:gn.selectionStart,end:gn.selectionEnd};else e:{lx=(lx=gn.ownerDocument)&&lx.defaultView||window;var px=lx.getSelection&&lx.getSelection();if(px&&px.rangeCount!==0){lx=px.anchorNode;var yx=px.anchorOffset,Sx=px.focusNode;px=px.focusOffset;try{lx.nodeType,Sx.nodeType}catch{lx=null;break e}var Ix=0,Gx=-1,Qx=-1,cE=0,yE=0,wE=gn,fE=null;t:for(;;){for(var pE;wE!==lx||yx!==0&&wE.nodeType!==3||(Gx=Ix+yx),wE!==Sx||px!==0&&wE.nodeType!==3||(Qx=Ix+px),wE.nodeType===3&&(Ix+=wE.nodeValue.length),(pE=wE.firstChild)!==null;)fE=wE,wE=pE;for(;;){if(wE===gn)break t;if(fE===lx&&++cE===yx&&(Gx=Ix),fE===Sx&&++yE===px&&(Qx=Ix),(pE=wE.nextSibling)!==null)break;wE=fE,fE=wE.parentNode}wE=pE}lx=Gx===-1||Qx===-1?null:{start:Gx,end:Qx}}else lx=null}lx=lx||{start:0,end:0}}else lx=null;for(eD={focusedElem:gn,selectionRange:lx},nR=!1,DS=ex;DS!==null;)if(ex=DS,gn=ex.child,(ex.subtreeFlags&1024)!==0&&gn!==null)gn.return=ex,DS=gn;else for(;DS!==null;){switch(ex=DS,Sx=ex.alternate,gn=ex.flags,ex.tag){case 0:break;case 11:case 15:break;case 1:if((gn&1024)!==0&&Sx!==null){gn=void 0,lx=ex,yx=Sx.memoizedProps,Sx=Sx.memoizedState,px=lx.stateNode;try{var HE=bA(lx.type,yx,lx.elementType===lx.type);gn=px.getSnapshotBeforeUpdate(HE,Sx),px.__reactInternalSnapshotBeforeUpdate=gn}catch(zE){fS(lx,lx.return,zE)}}break;case 3:if((gn&1024)!==0){if(gn=ex.stateNode.containerInfo,lx=gn.nodeType,lx===9)nD(gn);else if(lx===1)switch(gn.nodeName){case"HEAD":case"HTML":case"BODY":nD(gn);break;default:gn.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((gn&1024)!==0)throw Error(s(163))}if(gn=ex.sibling,gn!==null){gn.return=ex.return,DS=gn;break}DS=ex.return}}function OP(gn,ex,lx){var px=lx.flags;switch(lx.tag){case 0:case 11:case 15:WT(gn,lx),px&4&&BC(5,lx);break;case 1:if(WT(gn,lx),px&4)if(gn=lx.stateNode,ex===null)try{gn.componentDidMount()}catch(Ix){fS(lx,lx.return,Ix)}else{var yx=bA(lx.type,ex.memoizedProps);ex=ex.memoizedState;try{gn.componentDidUpdate(yx,ex,gn.__reactInternalSnapshotBeforeUpdate)}catch(Ix){fS(lx,lx.return,Ix)}}px&64&&AP(lx),px&512&&kC(lx,lx.return);break;case 3:if(WT(gn,lx),px&64&&(gn=lx.updateQueue,gn!==null)){if(ex=null,lx.child!==null)switch(lx.child.tag){case 27:case 5:ex=lx.child.stateNode;break;case 1:ex=lx.child.stateNode}try{pO(gn,ex)}catch(Ix){fS(lx,lx.return,Ix)}}break;case 27:ex===null&&px&4&&IP(lx);case 26:case 5:WT(gn,lx),ex===null&&px&4&&MP(lx),px&512&&kC(lx,lx.return);break;case 12:WT(gn,lx);break;case 13:WT(gn,lx),px&4&&LP(gn,lx),px&64&&(gn=lx.memoizedState,gn!==null&&(gn=gn.dehydrated,gn!==null&&(lx=a$.bind(null,lx),S$(gn,lx))));break;case 22:if(px=lx.memoizedState!==null||$T,!px){ex=ex!==null&&ex.memoizedState!==null||bS,yx=$T;var Sx=bS;$T=px,(bS=ex)&&!Sx?XT(gn,lx,(lx.subtreeFlags&8772)!==0):WT(gn,lx),$T=yx,bS=Sx}break;case 30:break;default:WT(gn,lx)}}function PP(gn){var ex=gn.alternate;ex!==null&&(gn.alternate=null,PP(ex)),gn.child=null,gn.deletions=null,gn.sibling=null,gn.tag===5&&(ex=gn.stateNode,ex!==null&&US(ex)),gn.stateNode=null,gn.return=null,gn.dependencies=null,gn.memoizedProps=null,gn.memoizedState=null,gn.pendingProps=null,gn.stateNode=null,gn.updateQueue=null}var gS=null,XS=!1;function BT(gn,ex,lx){for(lx=lx.child;lx!==null;)NP(gn,ex,lx),lx=lx.sibling}function NP(gn,ex,lx){if(kx&&typeof kx.onCommitFiberUnmount=="function")try{kx.onCommitFiberUnmount(Dx,lx)}catch{}switch(lx.tag){case 26:bS||bT(lx,ex),BT(gn,ex,lx),lx.memoizedState?lx.memoizedState.count--:lx.stateNode&&(lx=lx.stateNode,lx.parentNode.removeChild(lx));break;case 27:bS||bT(lx,ex);var px=gS,yx=XS;rA(lx.type)&&(gS=lx.stateNode,XS=!1),BT(gn,ex,lx),ZC(lx.stateNode),gS=px,XS=yx;break;case 5:bS||bT(lx,ex);case 6:if(px=gS,yx=XS,gS=null,BT(gn,ex,lx),gS=px,XS=yx,gS!==null)if(XS)try{(gS.nodeType===9?gS.body:gS.nodeName==="HTML"?gS.ownerDocument.body:gS).removeChild(lx.stateNode)}catch(Sx){fS(lx,ex,Sx)}else try{gS.removeChild(lx.stateNode)}catch(Sx){fS(lx,ex,Sx)}break;case 18:gS!==null&&(XS?(gn=gS,bN(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn,lx.stateNode),tM(gn)):bN(gS,lx.stateNode));break;case 4:px=gS,yx=XS,gS=lx.stateNode.containerInfo,XS=!0,BT(gn,ex,lx),gS=px,XS=yx;break;case 0:case 11:case 14:case 15:bS||YT(2,lx,ex),bS||YT(4,lx,ex),BT(gn,ex,lx);break;case 1:bS||(bT(lx,ex),px=lx.stateNode,typeof px.componentWillUnmount=="function"&&CP(lx,ex,px)),BT(gn,ex,lx);break;case 21:BT(gn,ex,lx);break;case 22:bS=(px=bS)||lx.memoizedState!==null,BT(gn,ex,lx),bS=px;break;default:BT(gn,ex,lx)}}function LP(gn,ex){if(ex.memoizedState===null&&(gn=ex.alternate,gn!==null&&(gn=gn.memoizedState,gn!==null&&(gn=gn.dehydrated,gn!==null))))try{tM(gn)}catch(lx){fS(ex,ex.return,lx)}}function KL(gn){switch(gn.tag){case 13:case 19:var ex=gn.stateNode;return ex===null&&(ex=gn.stateNode=new DP),ex;case 22:return gn=gn.stateNode,ex=gn._retryCache,ex===null&&(ex=gn._retryCache=new DP),ex;default:throw Error(s(435,gn.tag))}}function RI(gn,ex){var lx=KL(gn);ex.forEach(function(px){var yx=o$.bind(null,gn,px);lx.has(px)||(lx.add(px),px.then(yx,yx))})}function tT(gn,ex){var lx=ex.deletions;if(lx!==null)for(var px=0;px<lx.length;px++){var yx=lx[px],Sx=gn,Ix=ex,Gx=Ix;e:for(;Gx!==null;){switch(Gx.tag){case 27:if(rA(Gx.type)){gS=Gx.stateNode,XS=!1;break e}break;case 5:gS=Gx.stateNode,XS=!1;break e;case 3:case 4:gS=Gx.stateNode.containerInfo,XS=!0;break e}Gx=Gx.return}if(gS===null)throw Error(s(160));NP(Sx,Ix,yx),gS=null,XS=!1,Sx=yx.alternate,Sx!==null&&(Sx.return=null),yx.return=null}if(ex.subtreeFlags&13878)for(ex=ex.child;ex!==null;)$P(ex,gn),ex=ex.sibling}var yT=null;function $P(gn,ex){var lx=gn.alternate,px=gn.flags;switch(gn.tag){case 0:case 11:case 14:case 15:tT(ex,gn),rT(gn),px&4&&(YT(3,gn,gn.return),BC(3,gn),YT(5,gn,gn.return));break;case 1:tT(ex,gn),rT(gn),px&512&&(bS||lx===null||bT(lx,lx.return)),px&64&&$T&&(gn=gn.updateQueue,gn!==null&&(px=gn.callbacks,px!==null&&(lx=gn.shared.hiddenCallbacks,gn.shared.hiddenCallbacks=lx===null?px:lx.concat(px))));break;case 26:var yx=yT;if(tT(ex,gn),rT(gn),px&512&&(bS||lx===null||bT(lx,lx.return)),px&4){var Sx=lx!==null?lx.memoizedState:null;if(px=gn.memoizedState,lx===null)if(px===null)if(gn.stateNode===null){e:{px=gn.type,lx=gn.memoizedProps,yx=yx.ownerDocument||yx;t:switch(px){case"title":Sx=yx.getElementsByTagName("title")[0],(!Sx||Sx[dS]||Sx[LE]||Sx.namespaceURI==="http://www.w3.org/2000/svg"||Sx.hasAttribute("itemprop"))&&(Sx=yx.createElement(px),yx.head.insertBefore(Sx,yx.querySelector("head > title"))),FS(Sx,px,lx),Sx[LE]=gn,GE(Sx),px=Sx;break e;case"link":var Ix=IN("link","href",yx).get(px+(lx.href||""));if(Ix){for(var Gx=0;Gx<Ix.length;Gx++)if(Sx=Ix[Gx],Sx.getAttribute("href")===(lx.href==null||lx.href===""?null:lx.href)&&Sx.getAttribute("rel")===(lx.rel==null?null:lx.rel)&&Sx.getAttribute("title")===(lx.title==null?null:lx.title)&&Sx.getAttribute("crossorigin")===(lx.crossOrigin==null?null:lx.crossOrigin)){Ix.splice(Gx,1);break t}}Sx=yx.createElement(px),FS(Sx,px,lx),yx.head.appendChild(Sx);break;case"meta":if(Ix=IN("meta","content",yx).get(px+(lx.content||""))){for(Gx=0;Gx<Ix.length;Gx++)if(Sx=Ix[Gx],Sx.getAttribute("content")===(lx.content==null?null:""+lx.content)&&Sx.getAttribute("name")===(lx.name==null?null:lx.name)&&Sx.getAttribute("property")===(lx.property==null?null:lx.property)&&Sx.getAttribute("http-equiv")===(lx.httpEquiv==null?null:lx.httpEquiv)&&Sx.getAttribute("charset")===(lx.charSet==null?null:lx.charSet)){Ix.splice(Gx,1);break t}}Sx=yx.createElement(px),FS(Sx,px,lx),yx.head.appendChild(Sx);break;default:throw Error(s(468,px))}Sx[LE]=gn,GE(Sx),px=Sx}gn.stateNode=px}else DN(yx,gn.type,gn.stateNode);else gn.stateNode=RN(yx,px,gn.memoizedProps);else Sx!==px?(Sx===null?lx.stateNode!==null&&(lx=lx.stateNode,lx.parentNode.removeChild(lx)):Sx.count--,px===null?DN(yx,gn.type,gn.stateNode):RN(yx,px,gn.memoizedProps)):px===null&&gn.stateNode!==null&&TI(gn,gn.memoizedProps,lx.memoizedProps)}break;case 27:tT(ex,gn),rT(gn),px&512&&(bS||lx===null||bT(lx,lx.return)),lx!==null&&px&4&&TI(gn,gn.memoizedProps,lx.memoizedProps);break;case 5:if(tT(ex,gn),rT(gn),px&512&&(bS||lx===null||bT(lx,lx.return)),gn.flags&32){yx=gn.stateNode;try{RA(yx,"")}catch(pE){fS(gn,gn.return,pE)}}px&4&&gn.stateNode!=null&&(yx=gn.memoizedProps,TI(gn,yx,lx!==null?lx.memoizedProps:yx)),px&1024&&(MI=!0);break;case 6:if(tT(ex,gn),rT(gn),px&4){if(gn.stateNode===null)throw Error(s(162));px=gn.memoizedProps,lx=gn.stateNode;try{lx.nodeValue=px}catch(pE){fS(gn,gn.return,pE)}}break;case 3:if(eR=null,yx=yT,yT=QM(ex.containerInfo),tT(ex,gn),yT=yx,rT(gn),px&4&&lx!==null&&lx.memoizedState.isDehydrated)try{tM(ex.containerInfo)}catch(pE){fS(gn,gn.return,pE)}MI&&(MI=!1,BP(gn));break;case 4:px=yT,yT=QM(gn.stateNode.containerInfo),tT(ex,gn),rT(gn),yT=px;break;case 12:tT(ex,gn),rT(gn);break;case 13:tT(ex,gn),rT(gn),gn.child.flags&8192&&gn.memoizedState!==null!=(lx!==null&&lx.memoizedState!==null)&&($I=iE()),px&4&&(px=gn.updateQueue,px!==null&&(gn.updateQueue=null,RI(gn,px)));break;case 22:yx=gn.memoizedState!==null;var Qx=lx!==null&&lx.memoizedState!==null,cE=$T,yE=bS;if($T=cE||yx,bS=yE||Qx,tT(ex,gn),bS=yE,$T=cE,rT(gn),px&8192)e:for(ex=gn.stateNode,ex._visibility=yx?ex._visibility&-2:ex._visibility|1,yx&&(lx===null||Qx||$T||bS||SA(gn)),lx=null,ex=gn;;){if(ex.tag===5||ex.tag===26){if(lx===null){Qx=lx=ex;try{if(Sx=Qx.stateNode,yx)Ix=Sx.style,typeof Ix.setProperty=="function"?Ix.setProperty("display","none","important"):Ix.display="none";else{Gx=Qx.stateNode;var wE=Qx.memoizedProps.style,fE=wE!=null&&wE.hasOwnProperty("display")?wE.display:null;Gx.style.display=fE==null||typeof fE=="boolean"?"":(""+fE).trim()}}catch(pE){fS(Qx,Qx.return,pE)}}}else if(ex.tag===6){if(lx===null){Qx=ex;try{Qx.stateNode.nodeValue=yx?"":Qx.memoizedProps}catch(pE){fS(Qx,Qx.return,pE)}}}else if((ex.tag!==22&&ex.tag!==23||ex.memoizedState===null||ex===gn)&&ex.child!==null){ex.child.return=ex,ex=ex.child;continue}if(ex===gn)break e;for(;ex.sibling===null;){if(ex.return===null||ex.return===gn)break e;lx===ex&&(lx=null),ex=ex.return}lx===ex&&(lx=null),ex.sibling.return=ex.return,ex=ex.sibling}px&4&&(px=gn.updateQueue,px!==null&&(lx=px.retryQueue,lx!==null&&(px.retryQueue=null,RI(gn,lx))));break;case 19:tT(ex,gn),rT(gn),px&4&&(px=gn.updateQueue,px!==null&&(gn.updateQueue=null,RI(gn,px)));break;case 30:break;case 21:break;default:tT(ex,gn),rT(gn)}}function rT(gn){var ex=gn.flags;if(ex&2){try{for(var lx,px=gn.return;px!==null;){if(RP(px)){lx=px;break}px=px.return}if(lx==null)throw Error(s(160));switch(lx.tag){case 27:var yx=lx.stateNode,Sx=AI(gn);FM(gn,Sx,yx);break;case 5:var Ix=lx.stateNode;lx.flags&32&&(RA(Ix,""),lx.flags&=-33);var Gx=AI(gn);FM(gn,Gx,Ix);break;case 3:case 4:var Qx=lx.stateNode.containerInfo,cE=AI(gn);CI(gn,cE,Qx);break;default:throw Error(s(161))}}catch(yE){fS(gn,gn.return,yE)}gn.flags&=-3}ex&4096&&(gn.flags&=-4097)}function BP(gn){if(gn.subtreeFlags&1024)for(gn=gn.child;gn!==null;){var ex=gn;BP(ex),ex.tag===5&&ex.flags&1024&&ex.stateNode.reset(),gn=gn.sibling}}function WT(gn,ex){if(ex.subtreeFlags&8772)for(ex=ex.child;ex!==null;)OP(gn,ex.alternate,ex),ex=ex.sibling}function SA(gn){for(gn=gn.child;gn!==null;){var ex=gn;switch(ex.tag){case 0:case 11:case 14:case 15:YT(4,ex,ex.return),SA(ex);break;case 1:bT(ex,ex.return);var lx=ex.stateNode;typeof lx.componentWillUnmount=="function"&&CP(ex,ex.return,lx),SA(ex);break;case 27:ZC(ex.stateNode);case 26:case 5:bT(ex,ex.return),SA(ex);break;case 22:ex.memoizedState===null&&SA(ex);break;case 30:SA(ex);break;default:SA(ex)}gn=gn.sibling}}function XT(gn,ex,lx){for(lx=lx&&(ex.subtreeFlags&8772)!==0,ex=ex.child;ex!==null;){var px=ex.alternate,yx=gn,Sx=ex,Ix=Sx.flags;switch(Sx.tag){case 0:case 11:case 15:XT(yx,Sx,lx),BC(4,Sx);break;case 1:if(XT(yx,Sx,lx),px=Sx,yx=px.stateNode,typeof yx.componentDidMount=="function")try{yx.componentDidMount()}catch(cE){fS(px,px.return,cE)}if(px=Sx,yx=px.updateQueue,yx!==null){var Gx=px.stateNode;try{var Qx=yx.shared.hiddenCallbacks;if(Qx!==null)for(yx.shared.hiddenCallbacks=null,yx=0;yx<Qx.length;yx++)fO(Qx[yx],Gx)}catch(cE){fS(px,px.return,cE)}}lx&&Ix&64&&AP(Sx),kC(Sx,Sx.return);break;case 27:IP(Sx);case 26:case 5:XT(yx,Sx,lx),lx&&px===null&&Ix&4&&MP(Sx),kC(Sx,Sx.return);break;case 12:XT(yx,Sx,lx);break;case 13:XT(yx,Sx,lx),lx&&Ix&4&&LP(yx,Sx);break;case 22:Sx.memoizedState===null&&XT(yx,Sx,lx),kC(Sx,Sx.return);break;case 30:break;default:XT(yx,Sx,lx)}ex=ex.sibling}}function II(gn,ex){var lx=null;gn!==null&&gn.memoizedState!==null&&gn.memoizedState.cachePool!==null&&(lx=gn.memoizedState.cachePool.pool),gn=null,ex.memoizedState!==null&&ex.memoizedState.cachePool!==null&&(gn=ex.memoizedState.cachePool.pool),gn!==lx&&(gn!=null&&gn.refCount++,lx!=null&&SC(lx))}function DI(gn,ex){gn=null,ex.alternate!==null&&(gn=ex.alternate.memoizedState.cache),ex=ex.memoizedState.cache,ex!==gn&&(ex.refCount++,gn!=null&&SC(gn))}function ST(gn,ex,lx,px){if(ex.subtreeFlags&10256)for(ex=ex.child;ex!==null;)kP(gn,ex,lx,px),ex=ex.sibling}function kP(gn,ex,lx,px){var yx=ex.flags;switch(ex.tag){case 0:case 11:case 15:ST(gn,ex,lx,px),yx&2048&&BC(9,ex);break;case 1:ST(gn,ex,lx,px);break;case 3:ST(gn,ex,lx,px),yx&2048&&(gn=null,ex.alternate!==null&&(gn=ex.alternate.memoizedState.cache),ex=ex.memoizedState.cache,ex!==gn&&(ex.refCount++,gn!=null&&SC(gn)));break;case 12:if(yx&2048){ST(gn,ex,lx,px),gn=ex.stateNode;try{var Sx=ex.memoizedProps,Ix=Sx.id,Gx=Sx.onPostCommit;typeof Gx=="function"&&Gx(Ix,ex.alternate===null?"mount":"update",gn.passiveEffectDuration,-0)}catch(Qx){fS(ex,ex.return,Qx)}}else ST(gn,ex,lx,px);break;case 13:ST(gn,ex,lx,px);break;case 23:break;case 22:Sx=ex.stateNode,Ix=ex.alternate,ex.memoizedState!==null?Sx._visibility&2?ST(gn,ex,lx,px):FC(gn,ex):Sx._visibility&2?ST(gn,ex,lx,px):(Sx._visibility|=2,YA(gn,ex,lx,px,(ex.subtreeFlags&10256)!==0)),yx&2048&&II(Ix,ex);break;case 24:ST(gn,ex,lx,px),yx&2048&&DI(ex.alternate,ex);break;default:ST(gn,ex,lx,px)}}function YA(gn,ex,lx,px,yx){for(yx=yx&&(ex.subtreeFlags&10256)!==0,ex=ex.child;ex!==null;){var Sx=gn,Ix=ex,Gx=lx,Qx=px,cE=Ix.flags;switch(Ix.tag){case 0:case 11:case 15:YA(Sx,Ix,Gx,Qx,yx),BC(8,Ix);break;case 23:break;case 22:var yE=Ix.stateNode;Ix.memoizedState!==null?yE._visibility&2?YA(Sx,Ix,Gx,Qx,yx):FC(Sx,Ix):(yE._visibility|=2,YA(Sx,Ix,Gx,Qx,yx)),yx&&cE&2048&&II(Ix.alternate,Ix);break;case 24:YA(Sx,Ix,Gx,Qx,yx),yx&&cE&2048&&DI(Ix.alternate,Ix);break;default:YA(Sx,Ix,Gx,Qx,yx)}ex=ex.sibling}}function FC(gn,ex){if(ex.subtreeFlags&10256)for(ex=ex.child;ex!==null;){var lx=gn,px=ex,yx=px.flags;switch(px.tag){case 22:FC(lx,px),yx&2048&&II(px.alternate,px);break;case 24:FC(lx,px),yx&2048&&DI(px.alternate,px);break;default:FC(lx,px)}ex=ex.sibling}}var UC=8192;function WA(gn){if(gn.subtreeFlags&UC)for(gn=gn.child;gn!==null;)FP(gn),gn=gn.sibling}function FP(gn){switch(gn.tag){case 26:WA(gn),gn.flags&UC&&gn.memoizedState!==null&&$$(yT,gn.memoizedState,gn.memoizedProps);break;case 5:WA(gn);break;case 3:case 4:var ex=yT;yT=QM(gn.stateNode.containerInfo),WA(gn),yT=ex;break;case 22:gn.memoizedState===null&&(ex=gn.alternate,ex!==null&&ex.memoizedState!==null?(ex=UC,UC=16777216,WA(gn),UC=ex):WA(gn));break;default:WA(gn)}}function UP(gn){var ex=gn.alternate;if(ex!==null&&(gn=ex.child,gn!==null)){ex.child=null;do ex=gn.sibling,gn.sibling=null,gn=ex;while(gn!==null)}}function qC(gn){var ex=gn.deletions;if((gn.flags&16)!==0){if(ex!==null)for(var lx=0;lx<ex.length;lx++){var px=ex[lx];DS=px,GP(px,gn)}UP(gn)}if(gn.subtreeFlags&10256)for(gn=gn.child;gn!==null;)qP(gn),gn=gn.sibling}function qP(gn){switch(gn.tag){case 0:case 11:case 15:qC(gn),gn.flags&2048&&YT(9,gn,gn.return);break;case 3:qC(gn);break;case 12:qC(gn);break;case 22:var ex=gn.stateNode;gn.memoizedState!==null&&ex._visibility&2&&(gn.return===null||gn.return.tag!==13)?(ex._visibility&=-3,UM(gn)):qC(gn);break;default:qC(gn)}}function UM(gn){var ex=gn.deletions;if((gn.flags&16)!==0){if(ex!==null)for(var lx=0;lx<ex.length;lx++){var px=ex[lx];DS=px,GP(px,gn)}UP(gn)}for(gn=gn.child;gn!==null;){switch(ex=gn,ex.tag){case 0:case 11:case 15:YT(8,ex,ex.return),UM(ex);break;case 22:lx=ex.stateNode,lx._visibility&2&&(lx._visibility&=-3,UM(ex));break;default:UM(ex)}gn=gn.sibling}}function GP(gn,ex){for(;DS!==null;){var lx=DS;switch(lx.tag){case 0:case 11:case 15:YT(8,lx,ex);break;case 23:case 22:if(lx.memoizedState!==null&&lx.memoizedState.cachePool!==null){var px=lx.memoizedState.cachePool.pool;px!=null&&px.refCount++}break;case 24:SC(lx.memoizedState.cache)}if(px=lx.child,px!==null)px.return=lx,DS=px;else e:for(lx=gn;DS!==null;){px=DS;var yx=px.sibling,Sx=px.return;if(PP(px),px===lx){DS=null;break e}if(yx!==null){yx.return=Sx,DS=yx;break e}DS=Sx}}}var QL={getCacheForType:function(gn){var ex=GS(CS),lx=ex.data.get(gn);return lx===void 0&&(lx=gn(),ex.data.set(gn,lx)),lx}},JL=typeof WeakMap=="function"?WeakMap:Map,oS=0,pS=null,KE=null,eS=0,sS=0,nT=null,KT=!1,XA=!1,OI=!1,kT=0,xS=0,QT=0,wA=0,NI=0,dT=0,KA=0,GC=null,KS=null,LI=!1,$I=0,qM=1/0,GM=null,JT=null,kS=0,eA=null,QA=null,JA=0,BI=0,kI=null,zP=null,zC=0,FI=null;function iT(){if((oS&2)!==0&&eS!==0)return eS&-eS;if(Ex.T!==null){var gn=UA;return gn!==0?gn:jI()}return mE()}function VP(){dT===0&&(dT=(eS&536870912)===0||iS?hE():536870912);var gn=pT.current;return gn!==null&&(gn.flags|=32),dT}function aT(gn,ex,lx){(gn===pS&&(sS===2||sS===9)||gn.cancelPendingCommit!==null)&&(eC(gn,0),tA(gn,eS,dT,!1)),IE(gn,lx),((oS&2)===0||gn!==pS)&&(gn===pS&&((oS&2)===0&&(wA|=lx),xS===4&&tA(gn,eS,dT,!1)),wT(gn))}function HP(gn,ex,lx){if((oS&6)!==0)throw Error(s(327));var px=!lx&&(ex&124)===0&&(ex&gn.expiredLanes)===0||PE(gn,ex),yx=px?r$(gn,ex):GI(gn,ex,!0),Sx=px;do{if(yx===0){XA&&!px&&tA(gn,ex,0,!1);break}else{if(lx=gn.current.alternate,Sx&&!e$(lx)){yx=GI(gn,ex,!1),Sx=!1;continue}if(yx===2){if(Sx=ex,gn.errorRecoveryDisabledLanes&Sx)var Ix=0;else Ix=gn.pendingLanes&-536870913,Ix=Ix!==0?Ix:Ix&536870912?536870912:0;if(Ix!==0){ex=Ix;e:{var Gx=gn;yx=GC;var Qx=Gx.current.memoizedState.isDehydrated;if(Qx&&(eC(Gx,Ix).flags|=256),Ix=GI(Gx,Ix,!1),Ix!==2){if(OI&&!Qx){Gx.errorRecoveryDisabledLanes|=Sx,wA|=Sx,yx=4;break e}Sx=KS,KS=yx,Sx!==null&&(KS===null?KS=Sx:KS.push.apply(KS,Sx))}yx=Ix}if(Sx=!1,yx!==2)continue}}if(yx===1){eC(gn,0),tA(gn,ex,0,!0);break}e:{switch(px=gn,Sx=yx,Sx){case 0:case 1:throw Error(s(345));case 4:if((ex&4194048)!==ex)break;case 6:tA(px,ex,dT,!KT);break e;case 2:KS=null;break;case 3:case 5:break;default:throw Error(s(329))}if((ex&62914560)===ex&&(yx=$I+300-iE(),10<yx)){if(tA(px,ex,dT,!KT),OE(px,0,!0)!==0)break e;px.timeoutHandle=_N(jP.bind(null,px,lx,KS,GM,LI,ex,dT,wA,KA,KT,Sx,2,-0,0),yx);break e}jP(px,lx,KS,GM,LI,ex,dT,wA,KA,KT,Sx,0,-0,0)}}break}while(!0);wT(gn)}function jP(gn,ex,lx,px,yx,Sx,Ix,Gx,Qx,cE,yE,wE,fE,pE){if(gn.timeoutHandle=-1,wE=ex.subtreeFlags,(wE&8192||(wE&16785408)===16785408)&&(XC={stylesheets:null,count:0,unsuspend:L$},FP(ex),wE=B$(),wE!==null)){gn.cancelPendingCommit=wE(JP.bind(null,gn,ex,Sx,lx,px,yx,Ix,Gx,Qx,yE,1,fE,pE)),tA(gn,Sx,Ix,!cE);return}JP(gn,ex,Sx,lx,px,yx,Ix,Gx,Qx)}function e$(gn){for(var ex=gn;;){var lx=ex.tag;if((lx===0||lx===11||lx===15)&&ex.flags&16384&&(lx=ex.updateQueue,lx!==null&&(lx=lx.stores,lx!==null)))for(var px=0;px<lx.length;px++){var yx=lx[px],Sx=yx.getSnapshot;yx=yx.value;try{if(!JS(Sx(),yx))return!1}catch{return!1}}if(lx=ex.child,ex.subtreeFlags&16384&&lx!==null)lx.return=ex,ex=lx;else{if(ex===gn)break;for(;ex.sibling===null;){if(ex.return===null||ex.return===gn)return!0;ex=ex.return}ex.sibling.return=ex.return,ex=ex.sibling}}return!0}function tA(gn,ex,lx,px){ex&=~NI,ex&=~wA,gn.suspendedLanes|=ex,gn.pingedLanes&=~ex,px&&(gn.warmLanes|=ex),px=gn.expirationTimes;for(var yx=ex;0<yx;){var Sx=31-Kx(yx),Ix=1<<Sx;px[Sx]=-1,yx&=~Ix}lx!==0&&Bx(gn,lx,ex)}function zM(){return(oS&6)===0?(VC(0),!1):!0}function UI(){if(KE!==null){if(sS===0)var gn=KE.return;else gn=KE,IT=yA=null,rI(gn),jA=null,NC=0,gn=KE;for(;gn!==null;)TP(gn.alternate,gn),gn=gn.return;KE=null}}function eC(gn,ex){var lx=gn.timeoutHandle;lx!==-1&&(gn.timeoutHandle=-1,y$(lx)),lx=gn.cancelPendingCommit,lx!==null&&(gn.cancelPendingCommit=null,lx()),UI(),pS=gn,KE=lx=CT(gn.current,null),eS=ex,sS=0,nT=null,KT=!1,XA=PE(gn,ex),OI=!1,KA=dT=NI=wA=QT=xS=0,KS=GC=null,LI=!1,(ex&8)!==0&&(ex|=ex&32);var px=gn.entangledLanes;if(px!==0)for(gn=gn.entanglements,px&=ex;0<px;){var yx=31-Kx(px),Sx=1<<yx;ex|=gn[yx],px&=~Sx}return kT=ex,fM(),lx}function ZP(gn,ex){WE=null,Ex.H=IM,ex===TC||ex===_M?(ex=uO(),sS=3):ex===oO?(ex=uO(),sS=4):sS=ex===fP?8:ex!==null&&typeof ex=="object"&&typeof ex.then=="function"?6:1,nT=ex,KE===null&&(xS=1,LM(gn,lT(ex,gn.current)))}function YP(){var gn=Ex.H;return Ex.H=IM,gn===null?IM:gn}function WP(){var gn=Ex.A;return Ex.A=QL,gn}function qI(){xS=4,KT||(eS&4194048)!==eS&&pT.current!==null||(XA=!0),(QT&134217727)===0&&(wA&134217727)===0||pS===null||tA(pS,eS,dT,!1)}function GI(gn,ex,lx){var px=oS;oS|=2;var yx=YP(),Sx=WP();(pS!==gn||eS!==ex)&&(GM=null,eC(gn,ex)),ex=!1;var Ix=xS;e:do try{if(sS!==0&&KE!==null){var Gx=KE,Qx=nT;switch(sS){case 8:UI(),Ix=6;break e;case 3:case 2:case 9:case 6:pT.current===null&&(ex=!0);var cE=sS;if(sS=0,nT=null,tC(gn,Gx,Qx,cE),lx&&XA){Ix=0;break e}break;default:cE=sS,sS=0,nT=null,tC(gn,Gx,Qx,cE)}}t$(),Ix=xS;break}catch(yE){ZP(gn,yE)}while(!0);return ex&&gn.shellSuspendCounter++,IT=yA=null,oS=px,Ex.H=yx,Ex.A=Sx,KE===null&&(pS=null,eS=0,fM()),Ix}function t$(){for(;KE!==null;)XP(KE)}function r$(gn,ex){var lx=oS;oS|=2;var px=YP(),yx=WP();pS!==gn||eS!==ex?(GM=null,qM=iE()+500,eC(gn,ex)):XA=PE(gn,ex);e:do try{if(sS!==0&&KE!==null){ex=KE;var Sx=nT;t:switch(sS){case 1:sS=0,nT=null,tC(gn,ex,Sx,1);break;case 2:case 9:if(sO(Sx)){sS=0,nT=null,KP(ex);break}ex=function(){sS!==2&&sS!==9||pS!==gn||(sS=7),wT(gn)},Sx.then(ex,ex);break e;case 3:sS=7;break e;case 4:sS=5;break e;case 7:sO(Sx)?(sS=0,nT=null,KP(ex)):(sS=0,nT=null,tC(gn,ex,Sx,7));break;case 5:var Ix=null;switch(KE.tag){case 26:Ix=KE.memoizedState;case 5:case 27:var Gx=KE;if(!Ix||ON(Ix)){sS=0,nT=null;var Qx=Gx.sibling;if(Qx!==null)KE=Qx;else{var cE=Gx.return;cE!==null?(KE=cE,VM(cE)):KE=null}break t}}sS=0,nT=null,tC(gn,ex,Sx,5);break;case 6:sS=0,nT=null,tC(gn,ex,Sx,6);break;case 8:UI(),xS=6;break e;default:throw Error(s(462))}}n$();break}catch(yE){ZP(gn,yE)}while(!0);return IT=yA=null,Ex.H=px,Ex.A=yx,oS=lx,KE!==null?0:(pS=null,eS=0,fM(),xS)}function n$(){for(;KE!==null&&!tE();)XP(KE)}function XP(gn){var ex=SP(gn.alternate,gn,kT);gn.memoizedProps=gn.pendingProps,ex===null?VM(gn):KE=ex}function KP(gn){var ex=gn,lx=ex.alternate;switch(ex.tag){case 15:case 0:ex=vP(lx,ex,ex.pendingProps,ex.type,void 0,eS);break;case 11:ex=vP(lx,ex,ex.pendingProps,ex.type.render,ex.ref,eS);break;case 5:rI(ex);default:TP(lx,ex),ex=KE=KD(ex,kT),ex=SP(lx,ex,kT)}gn.memoizedProps=gn.pendingProps,ex===null?VM(gn):KE=ex}function tC(gn,ex,lx,px){IT=yA=null,rI(ex),jA=null,NC=0;var yx=ex.return;try{if(jL(gn,yx,ex,lx,eS)){xS=1,LM(gn,lT(lx,gn.current)),KE=null;return}}catch(Sx){if(yx!==null)throw KE=yx,Sx;xS=1,LM(gn,lT(lx,gn.current)),KE=null;return}ex.flags&32768?(iS||px===1?gn=!0:XA||(eS&536870912)!==0?gn=!1:(KT=gn=!0,(px===2||px===9||px===3||px===6)&&(px=pT.current,px!==null&&px.tag===13&&(px.flags|=16384))),QP(ex,gn)):VM(ex)}function VM(gn){var ex=gn;do{if((ex.flags&32768)!==0){QP(ex,KT);return}gn=ex.return;var lx=YL(ex.alternate,ex,kT);if(lx!==null){KE=lx;return}if(ex=ex.sibling,ex!==null){KE=ex;return}KE=ex=gn}while(ex!==null);xS===0&&(xS=5)}function QP(gn,ex){do{var lx=WL(gn.alternate,gn);if(lx!==null){lx.flags&=32767,KE=lx;return}if(lx=gn.return,lx!==null&&(lx.flags|=32768,lx.subtreeFlags=0,lx.deletions=null),!ex&&(gn=gn.sibling,gn!==null)){KE=gn;return}KE=gn=lx}while(gn!==null);xS=6,KE=null}function JP(gn,ex,lx,px,yx,Sx,Ix,Gx,Qx){gn.cancelPendingCommit=null;do HM();while(kS!==0);if((oS&6)!==0)throw Error(s(327));if(ex!==null){if(ex===gn.current)throw Error(s(177));if(Sx=ex.lanes|ex.childLanes,Sx|=IR,DE(gn,lx,Sx,Ix,Gx,Qx),gn===pS&&(KE=pS=null,eS=0),QA=ex,eA=gn,JA=lx,BI=Sx,kI=yx,zP=px,(ex.subtreeFlags&10256)!==0||(ex.flags&10256)!==0?(gn.callbackNode=null,gn.callbackPriority=0,s$(SE,function(){return iN(),null})):(gn.callbackNode=null,gn.callbackPriority=0),px=(ex.flags&13878)!==0,(ex.subtreeFlags&13878)!==0||px){px=Ex.T,Ex.T=null,yx=Tx.p,Tx.p=2,Ix=oS,oS|=4;try{XL(gn,ex,lx)}finally{oS=Ix,Tx.p=yx,Ex.T=px}}kS=1,eN(),tN(),rN()}}function eN(){if(kS===1){kS=0;var gn=eA,ex=QA,lx=(ex.flags&13878)!==0;if((ex.subtreeFlags&13878)!==0||lx){lx=Ex.T,Ex.T=null;var px=Tx.p;Tx.p=2;var yx=oS;oS|=4;try{$P(ex,gn);var Sx=eD,Ix=qD(gn.containerInfo),Gx=Sx.focusedElem,Qx=Sx.selectionRange;if(Ix!==Gx&&Gx&&Gx.ownerDocument&&UD(Gx.ownerDocument.documentElement,Gx)){if(Qx!==null&&TR(Gx)){var cE=Qx.start,yE=Qx.end;if(yE===void 0&&(yE=cE),"selectionStart"in Gx)Gx.selectionStart=cE,Gx.selectionEnd=Math.min(yE,Gx.value.length);else{var wE=Gx.ownerDocument||document,fE=wE&&wE.defaultView||window;if(fE.getSelection){var pE=fE.getSelection(),HE=Gx.textContent.length,zE=Math.min(Qx.start,HE),cS=Qx.end===void 0?zE:Math.min(Qx.end,HE);!pE.extend&&zE>cS&&(Ix=cS,cS=zE,zE=Ix);var oE=FD(Gx,zE),rE=FD(Gx,cS);if(oE&&rE&&(pE.rangeCount!==1||pE.anchorNode!==oE.node||pE.anchorOffset!==oE.offset||pE.focusNode!==rE.node||pE.focusOffset!==rE.offset)){var uE=wE.createRange();uE.setStart(oE.node,oE.offset),pE.removeAllRanges(),zE>cS?(pE.addRange(uE),pE.extend(rE.node,rE.offset)):(uE.setEnd(rE.node,rE.offset),pE.addRange(uE))}}}}for(wE=[],pE=Gx;pE=pE.parentNode;)pE.nodeType===1&&wE.push({element:pE,left:pE.scrollLeft,top:pE.scrollTop});for(typeof Gx.focus=="function"&&Gx.focus(),Gx=0;Gx<wE.length;Gx++){var _E=wE[Gx];_E.element.scrollLeft=_E.left,_E.element.scrollTop=_E.top}}nR=!!JI,eD=JI=null}finally{oS=yx,Tx.p=px,Ex.T=lx}}gn.current=ex,kS=2}}function tN(){if(kS===2){kS=0;var gn=eA,ex=QA,lx=(ex.flags&8772)!==0;if((ex.subtreeFlags&8772)!==0||lx){lx=Ex.T,Ex.T=null;var px=Tx.p;Tx.p=2;var yx=oS;oS|=4;try{OP(gn,ex.alternate,ex)}finally{oS=yx,Tx.p=px,Ex.T=lx}}kS=3}}function rN(){if(kS===4||kS===3){kS=0,lE();var gn=eA,ex=QA,lx=JA,px=zP;(ex.subtreeFlags&10256)!==0||(ex.flags&10256)!==0?kS=5:(kS=0,QA=eA=null,nN(gn,gn.pendingLanes));var yx=gn.pendingLanes;if(yx===0&&(JT=null),Jx(lx),ex=ex.stateNode,kx&&typeof kx.onCommitFiberRoot=="function")try{kx.onCommitFiberRoot(Dx,ex,void 0,(ex.current.flags&128)===128)}catch{}if(px!==null){ex=Ex.T,yx=Tx.p,Tx.p=2,Ex.T=null;try{for(var Sx=gn.onRecoverableError,Ix=0;Ix<px.length;Ix++){var Gx=px[Ix];Sx(Gx.value,{componentStack:Gx.stack})}}finally{Ex.T=ex,Tx.p=yx}}(JA&3)!==0&&HM(),wT(gn),yx=gn.pendingLanes,(lx&4194090)!==0&&(yx&42)!==0?gn===FI?zC++:(zC=0,FI=gn):zC=0,VC(0)}}function nN(gn,ex){(gn.pooledCacheLanes&=ex)===0&&(ex=gn.pooledCache,ex!=null&&(gn.pooledCache=null,SC(ex)))}function HM(gn){return eN(),tN(),rN(),iN()}function iN(){if(kS!==5)return!1;var gn=eA,ex=BI;BI=0;var lx=Jx(JA),px=Ex.T,yx=Tx.p;try{Tx.p=32>lx?32:lx,Ex.T=null,lx=kI,kI=null;var Sx=eA,Ix=JA;if(kS=0,QA=eA=null,JA=0,(oS&6)!==0)throw Error(s(331));var Gx=oS;if(oS|=4,qP(Sx.current),kP(Sx,Sx.current,Ix,lx),oS=Gx,VC(0,!1),kx&&typeof kx.onPostCommitFiberRoot=="function")try{kx.onPostCommitFiberRoot(Dx,Sx)}catch{}return!0}finally{Tx.p=yx,Ex.T=px,nN(gn,ex)}}function aN(gn,ex,lx){ex=lT(lx,ex),ex=mI(gn.stateNode,ex,2),gn=VT(gn,ex,2),gn!==null&&(IE(gn,2),wT(gn))}function fS(gn,ex,lx){if(gn.tag===3)aN(gn,gn,lx);else for(;ex!==null;){if(ex.tag===3){aN(ex,gn,lx);break}else if(ex.tag===1){var px=ex.stateNode;if(typeof ex.type.getDerivedStateFromError=="function"||typeof px.componentDidCatch=="function"&&(JT===null||!JT.has(px))){gn=lT(lx,gn),lx=uP(2),px=VT(ex,lx,2),px!==null&&(cP(lx,px,ex,gn),IE(px,2),wT(px));break}}ex=ex.return}}function zI(gn,ex,lx){var px=gn.pingCache;if(px===null){px=gn.pingCache=new JL;var yx=new Set;px.set(ex,yx)}else yx=px.get(ex),yx===void 0&&(yx=new Set,px.set(ex,yx));yx.has(lx)||(OI=!0,yx.add(lx),gn=i$.bind(null,gn,ex,lx),ex.then(gn,gn))}function i$(gn,ex,lx){var px=gn.pingCache;px!==null&&px.delete(ex),gn.pingedLanes|=gn.suspendedLanes&lx,gn.warmLanes&=~lx,pS===gn&&(eS&lx)===lx&&(xS===4||xS===3&&(eS&62914560)===eS&&300>iE()-$I?(oS&2)===0&&eC(gn,0):NI|=lx,KA===eS&&(KA=0)),wT(gn)}function oN(gn,ex){ex===0&&(ex=TE()),gn=$A(gn,ex),gn!==null&&(IE(gn,ex),wT(gn))}function a$(gn){var ex=gn.memoizedState,lx=0;ex!==null&&(lx=ex.retryLane),oN(gn,lx)}function o$(gn,ex){var lx=0;switch(gn.tag){case 13:var px=gn.stateNode,yx=gn.memoizedState;yx!==null&&(lx=yx.retryLane);break;case 19:px=gn.stateNode;break;case 22:px=gn.stateNode._retryCache;break;default:throw Error(s(314))}px!==null&&px.delete(ex),oN(gn,lx)}function s$(gn,ex){return nE(gn,ex)}var jM=null,rC=null,VI=!1,ZM=!1,HI=!1,TA=0;function wT(gn){gn!==rC&&gn.next===null&&(rC===null?jM=rC=gn:rC=rC.next=gn),ZM=!0,VI||(VI=!0,u$())}function VC(gn,ex){if(!HI&&ZM){HI=!0;do for(var lx=!1,px=jM;px!==null;){if(gn!==0){var yx=px.pendingLanes;if(yx===0)var Sx=0;else{var Ix=px.suspendedLanes,Gx=px.pingedLanes;Sx=(1<<31-Kx(42|gn)+1)-1,Sx&=yx&~(Ix&~Gx),Sx=Sx&201326741?Sx&201326741|1:Sx?Sx|2:0}Sx!==0&&(lx=!0,cN(px,Sx))}else Sx=eS,Sx=OE(px,px===pS?Sx:0,px.cancelPendingCommit!==null||px.timeoutHandle!==-1),(Sx&3)===0||PE(px,Sx)||(lx=!0,cN(px,Sx));px=px.next}while(lx);HI=!1}}function l$(){sN()}function sN(){ZM=VI=!1;var gn=0;TA!==0&&(v$()&&(gn=TA),TA=0);for(var ex=iE(),lx=null,px=jM;px!==null;){var yx=px.next,Sx=lN(px,ex);Sx===0?(px.next=null,lx===null?jM=yx:lx.next=yx,yx===null&&(rC=lx)):(lx=px,(gn!==0||(Sx&3)!==0)&&(ZM=!0)),px=yx}VC(gn)}function lN(gn,ex){for(var lx=gn.suspendedLanes,px=gn.pingedLanes,yx=gn.expirationTimes,Sx=gn.pendingLanes&-62914561;0<Sx;){var Ix=31-Kx(Sx),Gx=1<<Ix,Qx=yx[Ix];Qx===-1?((Gx&lx)===0||(Gx&px)!==0)&&(yx[Ix]=sE(Gx,ex)):Qx<=ex&&(gn.expiredLanes|=Gx),Sx&=~Gx}if(ex=pS,lx=eS,lx=OE(gn,gn===ex?lx:0,gn.cancelPendingCommit!==null||gn.timeoutHandle!==-1),px=gn.callbackNode,lx===0||gn===ex&&(sS===2||sS===9)||gn.cancelPendingCommit!==null)return px!==null&&px!==null&&Wx(px),gn.callbackNode=null,gn.callbackPriority=0;if((lx&3)===0||PE(gn,lx)){if(ex=lx&-lx,ex===gn.callbackPriority)return ex;switch(px!==null&&Wx(px),Jx(lx)){case 2:case 8:lx=RE;break;case 32:lx=SE;break;case 268435456:lx=FE;break;default:lx=SE}return px=uN.bind(null,gn),lx=nE(lx,px),gn.callbackPriority=ex,gn.callbackNode=lx,ex}return px!==null&&px!==null&&Wx(px),gn.callbackPriority=2,gn.callbackNode=null,2}function uN(gn,ex){if(kS!==0&&kS!==5)return gn.callbackNode=null,gn.callbackPriority=0,null;var lx=gn.callbackNode;if(HM()&&gn.callbackNode!==lx)return null;var px=eS;return px=OE(gn,gn===pS?px:0,gn.cancelPendingCommit!==null||gn.timeoutHandle!==-1),px===0?null:(HP(gn,px,ex),lN(gn,iE()),gn.callbackNode!=null&&gn.callbackNode===lx?uN.bind(null,gn):null)}function cN(gn,ex){if(HM())return null;HP(gn,ex,!0)}function u$(){x$(function(){(oS&6)!==0?nE(CE,l$):sN()})}function jI(){return TA===0&&(TA=hE()),TA}function fN(gn){return gn==null||typeof gn=="symbol"||typeof gn=="boolean"?null:typeof gn=="function"?gn:iM(""+gn)}function pN(gn,ex){var lx=ex.ownerDocument.createElement("input");return lx.name=ex.name,lx.value=ex.value,gn.id&&lx.setAttribute("form",gn.id),ex.parentNode.insertBefore(lx,ex),gn=new FormData(gn),lx.parentNode.removeChild(lx),gn}function c$(gn,ex,lx,px,yx){if(ex==="submit"&&lx&&lx.stateNode===yx){var Sx=fN((yx[BE]||null).action),Ix=px.submitter;Ix&&(ex=(ex=Ix[BE]||null)?fN(ex.formAction):Ix.getAttribute("formAction"),ex!==null&&(Sx=ex,Ix=null));var Gx=new lM("action","action",null,px,yx);gn.push({event:Gx,listeners:[{instance:null,listener:function(){if(px.defaultPrevented){if(TA!==0){var Qx=Ix?pN(yx,Ix):new FormData(yx);fI(lx,{pending:!0,data:Qx,method:yx.method,action:Sx},null,Qx)}}else typeof Sx=="function"&&(Gx.preventDefault(),Qx=Ix?pN(yx,Ix):new FormData(yx),fI(lx,{pending:!0,data:Qx,method:yx.method,action:Sx},Sx,Qx))},currentTarget:yx}]})}}for(var ZI=0;ZI<RR.length;ZI++){var YI=RR[ZI],f$=YI.toLowerCase(),p$=YI[0].toUpperCase()+YI.slice(1);vT(f$,"on"+p$)}vT(VD,"onAnimationEnd"),vT(HD,"onAnimationIteration"),vT(jD,"onAnimationStart"),vT("dblclick","onDoubleClick"),vT("focusin","onFocus"),vT("focusout","onBlur"),vT(RL,"onTransitionRun"),vT(IL,"onTransitionStart"),vT(DL,"onTransitionCancel"),vT(ZD,"onTransitionEnd"),tS("onMouseEnter",["mouseout","mouseover"]),tS("onMouseLeave",["mouseout","mouseover"]),tS("onPointerEnter",["pointerout","pointerover"]),tS("onPointerLeave",["pointerout","pointerover"]),aS("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),aS("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),aS("onBeforeInput",["compositionend","keypress","textInput","paste"]),aS("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),aS("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),aS("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var HC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(HC));function dN(gn,ex){ex=(ex&4)!==0;for(var lx=0;lx<gn.length;lx++){var px=gn[lx],yx=px.event;px=px.listeners;e:{var Sx=void 0;if(ex)for(var Ix=px.length-1;0<=Ix;Ix--){var Gx=px[Ix],Qx=Gx.instance,cE=Gx.currentTarget;if(Gx=Gx.listener,Qx!==Sx&&yx.isPropagationStopped())break e;Sx=Gx,yx.currentTarget=cE;try{Sx(yx)}catch(yE){NM(yE)}yx.currentTarget=null,Sx=Qx}else for(Ix=0;Ix<px.length;Ix++){if(Gx=px[Ix],Qx=Gx.instance,cE=Gx.currentTarget,Gx=Gx.listener,Qx!==Sx&&yx.isPropagationStopped())break e;Sx=Gx,yx.currentTarget=cE;try{Sx(yx)}catch(yE){NM(yE)}yx.currentTarget=null,Sx=Qx}}}}function QE(gn,ex){var lx=ex[JE];lx===void 0&&(lx=ex[JE]=new Set);var px=gn+"__bubble";lx.has(px)||(hN(ex,gn,2,!1),lx.add(px))}function WI(gn,ex,lx){var px=0;ex&&(px|=4),hN(lx,gn,px,ex)}var YM="_reactListening"+Math.random().toString(36).slice(2);function XI(gn){if(!gn[YM]){gn[YM]=!0,_S.forEach(function(lx){lx!=="selectionchange"&&(d$.has(lx)||WI(lx,!1,gn),WI(lx,!0,gn))});var ex=gn.nodeType===9?gn:gn.ownerDocument;ex===null||ex[YM]||(ex[YM]=!0,WI("selectionchange",!1,ex))}}function hN(gn,ex,lx,px){switch(kN(ex)){case 2:var yx=U$;break;case 8:yx=q$;break;default:yx=cD}lx=yx.bind(null,ex,lx,gn),yx=void 0,!mR||ex!=="touchstart"&&ex!=="touchmove"&&ex!=="wheel"||(yx=!0),px?yx!==void 0?gn.addEventListener(ex,lx,{capture:!0,passive:yx}):gn.addEventListener(ex,lx,!0):yx!==void 0?gn.addEventListener(ex,lx,{passive:yx}):gn.addEventListener(ex,lx,!1)}function KI(gn,ex,lx,px,yx){var Sx=px;if((ex&1)===0&&(ex&2)===0&&px!==null)e:for(;;){if(px===null)return;var Ix=px.tag;if(Ix===3||Ix===4){var Gx=px.stateNode.containerInfo;if(Gx===yx)break;if(Ix===4)for(Ix=px.return;Ix!==null;){var Qx=Ix.tag;if((Qx===3||Qx===4)&&Ix.stateNode.containerInfo===yx)return;Ix=Ix.return}for(;Gx!==null;){if(Ix=LS(Gx),Ix===null)return;if(Qx=Ix.tag,Qx===5||Qx===6||Qx===26||Qx===27){px=Sx=Ix;continue e}Gx=Gx.parentNode}}px=px.return}_D(function(){var cE=Sx,yE=hR(lx),wE=[];e:{var fE=YD.get(gn);if(fE!==void 0){var pE=lM,HE=gn;switch(gn){case"keypress":if(oM(lx)===0)break e;case"keydown":case"keyup":pE=sL;break;case"focusin":HE="focus",pE=_R;break;case"focusout":HE="blur",pE=_R;break;case"beforeblur":case"afterblur":pE=_R;break;case"click":if(lx.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pE=SD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pE=WN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pE=cL;break;case VD:case HD:case jD:pE=QN;break;case ZD:pE=pL;break;case"scroll":case"scrollend":pE=ZN;break;case"wheel":pE=hL;break;case"copy":case"cut":case"paste":pE=eL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pE=TD;break;case"toggle":case"beforetoggle":pE=mL}var zE=(ex&4)!==0,cS=!zE&&(gn==="scroll"||gn==="scrollend"),oE=zE?fE!==null?fE+"Capture":null:fE;zE=[];for(var rE=cE,uE;rE!==null;){var _E=rE;if(uE=_E.stateNode,_E=_E.tag,_E!==5&&_E!==26&&_E!==27||uE===null||oE===null||(_E=cC(rE,oE),_E!=null&&zE.push(jC(rE,_E,uE))),cS)break;rE=rE.return}0<zE.length&&(fE=new pE(fE,HE,null,lx,yE),wE.push({event:fE,listeners:zE}))}}if((ex&7)===0){e:{if(fE=gn==="mouseover"||gn==="pointerover",pE=gn==="mouseout"||gn==="pointerout",fE&&lx!==dR&&(HE=lx.relatedTarget||lx.fromElement)&&(LS(HE)||HE[jE]))break e;if((pE||fE)&&(fE=yE.window===yE?yE:(fE=yE.ownerDocument)?fE.defaultView||fE.parentWindow:window,pE?(HE=lx.relatedTarget||lx.toElement,pE=cE,HE=HE?LS(HE):null,HE!==null&&(cS=u(HE),zE=HE.tag,HE!==cS||zE!==5&&zE!==27&&zE!==6)&&(HE=null)):(pE=null,HE=cE),pE!==HE)){if(zE=SD,_E="onMouseLeave",oE="onMouseEnter",rE="mouse",(gn==="pointerout"||gn==="pointerover")&&(zE=TD,_E="onPointerLeave",oE="onPointerEnter",rE="pointer"),cS=pE==null?fE:qE(pE),uE=HE==null?fE:qE(HE),fE=new zE(_E,rE+"leave",pE,lx,yE),fE.target=cS,fE.relatedTarget=uE,_E=null,LS(yE)===cE&&(zE=new zE(oE,rE+"enter",HE,lx,yE),zE.target=uE,zE.relatedTarget=cS,_E=zE),cS=_E,pE&&HE)t:{for(zE=pE,oE=HE,rE=0,uE=zE;uE;uE=nC(uE))rE++;for(uE=0,_E=oE;_E;_E=nC(_E))uE++;for(;0<rE-uE;)zE=nC(zE),rE--;for(;0<uE-rE;)oE=nC(oE),uE--;for(;rE--;){if(zE===oE||oE!==null&&zE===oE.alternate)break t;zE=nC(zE),oE=nC(oE)}zE=null}else zE=null;pE!==null&&gN(wE,fE,pE,zE,!1),HE!==null&&cS!==null&&gN(wE,cS,HE,zE,!0)}}e:{if(fE=cE?qE(cE):window,pE=fE.nodeName&&fE.nodeName.toLowerCase(),pE==="select"||pE==="input"&&fE.type==="file")var kE=PD;else if(DD(fE))if(ND)kE=AL;else{kE=wL;var XE=SL}else pE=fE.nodeName,!pE||pE.toLowerCase()!=="input"||fE.type!=="checkbox"&&fE.type!=="radio"?cE&&pR(cE.elementType)&&(kE=PD):kE=TL;if(kE&&(kE=kE(gn,cE))){OD(wE,kE,lx,yE);break e}XE&&XE(gn,fE,cE),gn==="focusout"&&cE&&fE.type==="number"&&cE.memoizedProps.value!=null&&fR(fE,"number",fE.value)}switch(XE=cE?qE(cE):window,gn){case"focusin":(DD(XE)||XE.contentEditable==="true")&&(PA=XE,AR=cE,yC=null);break;case"focusout":yC=AR=PA=null;break;case"mousedown":CR=!0;break;case"contextmenu":case"mouseup":case"dragend":CR=!1,GD(wE,lx,yE);break;case"selectionchange":if(ML)break;case"keydown":case"keyup":GD(wE,lx,yE)}var UE;if(bR)e:{switch(gn){case"compositionstart":var VE="onCompositionStart";break e;case"compositionend":VE="onCompositionEnd";break e;case"compositionupdate":VE="onCompositionUpdate";break e}VE=void 0}else OA?RD(gn,lx)&&(VE="onCompositionEnd"):gn==="keydown"&&lx.keyCode===229&&(VE="onCompositionStart");VE&&(AD&&lx.locale!=="ko"&&(OA||VE!=="onCompositionStart"?VE==="onCompositionEnd"&&OA&&(UE=ED()):(UT=yE,vR="value"in UT?UT.value:UT.textContent,OA=!0)),XE=WM(cE,VE),0<XE.length&&(VE=new wD(VE,gn,null,lx,yE),wE.push({event:VE,listeners:XE}),UE?VE.data=UE:(UE=ID(lx),UE!==null&&(VE.data=UE)))),(UE=yL?xL(gn,lx):_L(gn,lx))&&(VE=WM(cE,"onBeforeInput"),0<VE.length&&(XE=new wD("onBeforeInput","beforeinput",null,lx,yE),wE.push({event:XE,listeners:VE}),XE.data=UE)),c$(wE,gn,cE,lx,yE)}dN(wE,ex)})}function jC(gn,ex,lx){return{instance:gn,listener:ex,currentTarget:lx}}function WM(gn,ex){for(var lx=ex+"Capture",px=[];gn!==null;){var yx=gn,Sx=yx.stateNode;if(yx=yx.tag,yx!==5&&yx!==26&&yx!==27||Sx===null||(yx=cC(gn,lx),yx!=null&&px.unshift(jC(gn,yx,Sx)),yx=cC(gn,ex),yx!=null&&px.push(jC(gn,yx,Sx))),gn.tag===3)return px;gn=gn.return}return[]}function nC(gn){if(gn===null)return null;do gn=gn.return;while(gn&&gn.tag!==5&&gn.tag!==27);return gn||null}function gN(gn,ex,lx,px,yx){for(var Sx=ex._reactName,Ix=[];lx!==null&&lx!==px;){var Gx=lx,Qx=Gx.alternate,cE=Gx.stateNode;if(Gx=Gx.tag,Qx!==null&&Qx===px)break;Gx!==5&&Gx!==26&&Gx!==27||cE===null||(Qx=cE,yx?(cE=cC(lx,Sx),cE!=null&&Ix.unshift(jC(lx,cE,Qx))):yx||(cE=cC(lx,Sx),cE!=null&&Ix.push(jC(lx,cE,Qx)))),lx=lx.return}Ix.length!==0&&gn.push({event:ex,listeners:Ix})}var h$=/\r\n?/g,g$=/\u0000|\uFFFD/g;function mN(gn){return(typeof gn=="string"?gn:""+gn).replace(h$,`
`).replace(g$,"")}function vN(gn,ex){return ex=mN(ex),mN(gn)===ex}function XM(){}function uS(gn,ex,lx,px,yx,Sx){switch(lx){case"children":typeof px=="string"?ex==="body"||ex==="textarea"&&px===""||RA(gn,px):(typeof px=="number"||typeof px=="bigint")&&ex!=="body"&&RA(gn,""+px);break;case"className":gT(gn,"class",px);break;case"tabIndex":gT(gn,"tabindex",px);break;case"dir":case"role":case"viewBox":case"width":case"height":gT(gn,lx,px);break;case"style":yD(gn,px,Sx);break;case"data":if(ex!=="object"){gT(gn,"data",px);break}case"src":case"href":if(px===""&&(ex!=="a"||lx!=="href")){gn.removeAttribute(lx);break}if(px==null||typeof px=="function"||typeof px=="symbol"||typeof px=="boolean"){gn.removeAttribute(lx);break}px=iM(""+px),gn.setAttribute(lx,px);break;case"action":case"formAction":if(typeof px=="function"){gn.setAttribute(lx,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Sx=="function"&&(lx==="formAction"?(ex!=="input"&&uS(gn,ex,"name",yx.name,yx,null),uS(gn,ex,"formEncType",yx.formEncType,yx,null),uS(gn,ex,"formMethod",yx.formMethod,yx,null),uS(gn,ex,"formTarget",yx.formTarget,yx,null)):(uS(gn,ex,"encType",yx.encType,yx,null),uS(gn,ex,"method",yx.method,yx,null),uS(gn,ex,"target",yx.target,yx,null)));if(px==null||typeof px=="symbol"||typeof px=="boolean"){gn.removeAttribute(lx);break}px=iM(""+px),gn.setAttribute(lx,px);break;case"onClick":px!=null&&(gn.onclick=XM);break;case"onScroll":px!=null&&QE("scroll",gn);break;case"onScrollEnd":px!=null&&QE("scrollend",gn);break;case"dangerouslySetInnerHTML":if(px!=null){if(typeof px!="object"||!("__html"in px))throw Error(s(61));if(lx=px.__html,lx!=null){if(yx.children!=null)throw Error(s(60));gn.innerHTML=lx}}break;case"multiple":gn.multiple=px&&typeof px!="function"&&typeof px!="symbol";break;case"muted":gn.muted=px&&typeof px!="function"&&typeof px!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(px==null||typeof px=="function"||typeof px=="boolean"||typeof px=="symbol"){gn.removeAttribute("xlink:href");break}lx=iM(""+px),gn.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",lx);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":px!=null&&typeof px!="function"&&typeof px!="symbol"?gn.setAttribute(lx,""+px):gn.removeAttribute(lx);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":px&&typeof px!="function"&&typeof px!="symbol"?gn.setAttribute(lx,""):gn.removeAttribute(lx);break;case"capture":case"download":px===!0?gn.setAttribute(lx,""):px!==!1&&px!=null&&typeof px!="function"&&typeof px!="symbol"?gn.setAttribute(lx,px):gn.removeAttribute(lx);break;case"cols":case"rows":case"size":case"span":px!=null&&typeof px!="function"&&typeof px!="symbol"&&!isNaN(px)&&1<=px?gn.setAttribute(lx,px):gn.removeAttribute(lx);break;case"rowSpan":case"start":px==null||typeof px=="function"||typeof px=="symbol"||isNaN(px)?gn.removeAttribute(lx):gn.setAttribute(lx,px);break;case"popover":QE("beforetoggle",gn),QE("toggle",gn),$S(gn,"popover",px);break;case"xlinkActuate":SS(gn,"http://www.w3.org/1999/xlink","xlink:actuate",px);break;case"xlinkArcrole":SS(gn,"http://www.w3.org/1999/xlink","xlink:arcrole",px);break;case"xlinkRole":SS(gn,"http://www.w3.org/1999/xlink","xlink:role",px);break;case"xlinkShow":SS(gn,"http://www.w3.org/1999/xlink","xlink:show",px);break;case"xlinkTitle":SS(gn,"http://www.w3.org/1999/xlink","xlink:title",px);break;case"xlinkType":SS(gn,"http://www.w3.org/1999/xlink","xlink:type",px);break;case"xmlBase":SS(gn,"http://www.w3.org/XML/1998/namespace","xml:base",px);break;case"xmlLang":SS(gn,"http://www.w3.org/XML/1998/namespace","xml:lang",px);break;case"xmlSpace":SS(gn,"http://www.w3.org/XML/1998/namespace","xml:space",px);break;case"is":$S(gn,"is",px);break;case"innerText":case"textContent":break;default:(!(2<lx.length)||lx[0]!=="o"&&lx[0]!=="O"||lx[1]!=="n"&&lx[1]!=="N")&&(lx=HN.get(lx)||lx,$S(gn,lx,px))}}function QI(gn,ex,lx,px,yx,Sx){switch(lx){case"style":yD(gn,px,Sx);break;case"dangerouslySetInnerHTML":if(px!=null){if(typeof px!="object"||!("__html"in px))throw Error(s(61));if(lx=px.__html,lx!=null){if(yx.children!=null)throw Error(s(60));gn.innerHTML=lx}}break;case"children":typeof px=="string"?RA(gn,px):(typeof px=="number"||typeof px=="bigint")&&RA(gn,""+px);break;case"onScroll":px!=null&&QE("scroll",gn);break;case"onScrollEnd":px!=null&&QE("scrollend",gn);break;case"onClick":px!=null&&(gn.onclick=XM);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hS.hasOwnProperty(lx))e:{if(lx[0]==="o"&&lx[1]==="n"&&(yx=lx.endsWith("Capture"),ex=lx.slice(2,yx?lx.length-7:void 0),Sx=gn[BE]||null,Sx=Sx!=null?Sx[lx]:null,typeof Sx=="function"&&gn.removeEventListener(ex,Sx,yx),typeof px=="function")){typeof Sx!="function"&&Sx!==null&&(lx in gn?gn[lx]=null:gn.hasAttribute(lx)&&gn.removeAttribute(lx)),gn.addEventListener(ex,px,yx);break e}lx in gn?gn[lx]=px:px===!0?gn.setAttribute(lx,""):$S(gn,lx,px)}}}function FS(gn,ex,lx){switch(ex){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":QE("error",gn),QE("load",gn);var px=!1,yx=!1,Sx;for(Sx in lx)if(lx.hasOwnProperty(Sx)){var Ix=lx[Sx];if(Ix!=null)switch(Sx){case"src":px=!0;break;case"srcSet":yx=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,ex));default:uS(gn,ex,Sx,Ix,lx,null)}}yx&&uS(gn,ex,"srcSet",lx.srcSet,lx,null),px&&uS(gn,ex,"src",lx.src,lx,null);return;case"input":QE("invalid",gn);var Gx=Sx=Ix=yx=null,Qx=null,cE=null;for(px in lx)if(lx.hasOwnProperty(px)){var yE=lx[px];if(yE!=null)switch(px){case"name":yx=yE;break;case"type":Ix=yE;break;case"checked":Qx=yE;break;case"defaultChecked":cE=yE;break;case"value":Sx=yE;break;case"defaultValue":Gx=yE;break;case"children":case"dangerouslySetInnerHTML":if(yE!=null)throw Error(s(137,ex));break;default:uS(gn,ex,px,yE,lx,null)}}uC(gn,Sx,Gx,Qx,cE,Ix,yx,!1),AA(gn);return;case"select":QE("invalid",gn),px=Ix=Sx=null;for(yx in lx)if(lx.hasOwnProperty(yx)&&(Gx=lx[yx],Gx!=null))switch(yx){case"value":Sx=Gx;break;case"defaultValue":Ix=Gx;break;case"multiple":px=Gx;default:uS(gn,ex,yx,Gx,lx,null)}ex=Sx,lx=Ix,gn.multiple=!!px,ex!=null?MA(gn,!!px,ex,!1):lx!=null&&MA(gn,!!px,lx,!0);return;case"textarea":QE("invalid",gn),Sx=yx=px=null;for(Ix in lx)if(lx.hasOwnProperty(Ix)&&(Gx=lx[Ix],Gx!=null))switch(Ix){case"value":px=Gx;break;case"defaultValue":yx=Gx;break;case"children":Sx=Gx;break;case"dangerouslySetInnerHTML":if(Gx!=null)throw Error(s(91));break;default:uS(gn,ex,Ix,Gx,lx,null)}mD(gn,px,yx,Sx),AA(gn);return;case"option":for(Qx in lx)if(lx.hasOwnProperty(Qx)&&(px=lx[Qx],px!=null))switch(Qx){case"selected":gn.selected=px&&typeof px!="function"&&typeof px!="symbol";break;default:uS(gn,ex,Qx,px,lx,null)}return;case"dialog":QE("beforetoggle",gn),QE("toggle",gn),QE("cancel",gn),QE("close",gn);break;case"iframe":case"object":QE("load",gn);break;case"video":case"audio":for(px=0;px<HC.length;px++)QE(HC[px],gn);break;case"image":QE("error",gn),QE("load",gn);break;case"details":QE("toggle",gn);break;case"embed":case"source":case"link":QE("error",gn),QE("load",gn);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(cE in lx)if(lx.hasOwnProperty(cE)&&(px=lx[cE],px!=null))switch(cE){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,ex));default:uS(gn,ex,cE,px,lx,null)}return;default:if(pR(ex)){for(yE in lx)lx.hasOwnProperty(yE)&&(px=lx[yE],px!==void 0&&QI(gn,ex,yE,px,lx,void 0));return}}for(Gx in lx)lx.hasOwnProperty(Gx)&&(px=lx[Gx],px!=null&&uS(gn,ex,Gx,px,lx,null))}function m$(gn,ex,lx,px){switch(ex){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var yx=null,Sx=null,Ix=null,Gx=null,Qx=null,cE=null,yE=null;for(pE in lx){var wE=lx[pE];if(lx.hasOwnProperty(pE)&&wE!=null)switch(pE){case"checked":break;case"value":break;case"defaultValue":Qx=wE;default:px.hasOwnProperty(pE)||uS(gn,ex,pE,null,px,wE)}}for(var fE in px){var pE=px[fE];if(wE=lx[fE],px.hasOwnProperty(fE)&&(pE!=null||wE!=null))switch(fE){case"type":Sx=pE;break;case"name":yx=pE;break;case"checked":cE=pE;break;case"defaultChecked":yE=pE;break;case"value":Ix=pE;break;case"defaultValue":Gx=pE;break;case"children":case"dangerouslySetInnerHTML":if(pE!=null)throw Error(s(137,ex));break;default:pE!==wE&&uS(gn,ex,fE,pE,px,wE)}}cR(gn,Ix,Gx,Qx,cE,yE,Sx,yx);return;case"select":pE=Ix=Gx=fE=null;for(Sx in lx)if(Qx=lx[Sx],lx.hasOwnProperty(Sx)&&Qx!=null)switch(Sx){case"value":break;case"multiple":pE=Qx;default:px.hasOwnProperty(Sx)||uS(gn,ex,Sx,null,px,Qx)}for(yx in px)if(Sx=px[yx],Qx=lx[yx],px.hasOwnProperty(yx)&&(Sx!=null||Qx!=null))switch(yx){case"value":fE=Sx;break;case"defaultValue":Gx=Sx;break;case"multiple":Ix=Sx;default:Sx!==Qx&&uS(gn,ex,yx,Sx,px,Qx)}ex=Gx,lx=Ix,px=pE,fE!=null?MA(gn,!!lx,fE,!1):!!px!=!!lx&&(ex!=null?MA(gn,!!lx,ex,!0):MA(gn,!!lx,lx?[]:"",!1));return;case"textarea":pE=fE=null;for(Gx in lx)if(yx=lx[Gx],lx.hasOwnProperty(Gx)&&yx!=null&&!px.hasOwnProperty(Gx))switch(Gx){case"value":break;case"children":break;default:uS(gn,ex,Gx,null,px,yx)}for(Ix in px)if(yx=px[Ix],Sx=lx[Ix],px.hasOwnProperty(Ix)&&(yx!=null||Sx!=null))switch(Ix){case"value":fE=yx;break;case"defaultValue":pE=yx;break;case"children":break;case"dangerouslySetInnerHTML":if(yx!=null)throw Error(s(91));break;default:yx!==Sx&&uS(gn,ex,Ix,yx,px,Sx)}gD(gn,fE,pE);return;case"option":for(var HE in lx)if(fE=lx[HE],lx.hasOwnProperty(HE)&&fE!=null&&!px.hasOwnProperty(HE))switch(HE){case"selected":gn.selected=!1;break;default:uS(gn,ex,HE,null,px,fE)}for(Qx in px)if(fE=px[Qx],pE=lx[Qx],px.hasOwnProperty(Qx)&&fE!==pE&&(fE!=null||pE!=null))switch(Qx){case"selected":gn.selected=fE&&typeof fE!="function"&&typeof fE!="symbol";break;default:uS(gn,ex,Qx,fE,px,pE)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zE in lx)fE=lx[zE],lx.hasOwnProperty(zE)&&fE!=null&&!px.hasOwnProperty(zE)&&uS(gn,ex,zE,null,px,fE);for(cE in px)if(fE=px[cE],pE=lx[cE],px.hasOwnProperty(cE)&&fE!==pE&&(fE!=null||pE!=null))switch(cE){case"children":case"dangerouslySetInnerHTML":if(fE!=null)throw Error(s(137,ex));break;default:uS(gn,ex,cE,fE,px,pE)}return;default:if(pR(ex)){for(var cS in lx)fE=lx[cS],lx.hasOwnProperty(cS)&&fE!==void 0&&!px.hasOwnProperty(cS)&&QI(gn,ex,cS,void 0,px,fE);for(yE in px)fE=px[yE],pE=lx[yE],!px.hasOwnProperty(yE)||fE===pE||fE===void 0&&pE===void 0||QI(gn,ex,yE,fE,px,pE);return}}for(var oE in lx)fE=lx[oE],lx.hasOwnProperty(oE)&&fE!=null&&!px.hasOwnProperty(oE)&&uS(gn,ex,oE,null,px,fE);for(wE in px)fE=px[wE],pE=lx[wE],!px.hasOwnProperty(wE)||fE===pE||fE==null&&pE==null||uS(gn,ex,wE,fE,px,pE)}var JI=null,eD=null;function KM(gn){return gn.nodeType===9?gn:gn.ownerDocument}function yN(gn){switch(gn){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xN(gn,ex){if(gn===0)switch(ex){case"svg":return 1;case"math":return 2;default:return 0}return gn===1&&ex==="foreignObject"?0:gn}function tD(gn,ex){return gn==="textarea"||gn==="noscript"||typeof ex.children=="string"||typeof ex.children=="number"||typeof ex.children=="bigint"||typeof ex.dangerouslySetInnerHTML=="object"&&ex.dangerouslySetInnerHTML!==null&&ex.dangerouslySetInnerHTML.__html!=null}var rD=null;function v$(){var gn=window.event;return gn&&gn.type==="popstate"?gn===rD?!1:(rD=gn,!0):(rD=null,!1)}var _N=typeof setTimeout=="function"?setTimeout:void 0,y$=typeof clearTimeout=="function"?clearTimeout:void 0,EN=typeof Promise=="function"?Promise:void 0,x$=typeof queueMicrotask=="function"?queueMicrotask:typeof EN<"u"?function(gn){return EN.resolve(null).then(gn).catch(_$)}:_N;function _$(gn){setTimeout(function(){throw gn})}function rA(gn){return gn==="head"}function bN(gn,ex){var lx=ex,px=0,yx=0;do{var Sx=lx.nextSibling;if(gn.removeChild(lx),Sx&&Sx.nodeType===8)if(lx=Sx.data,lx==="/$"){if(0<px&&8>px){lx=px;var Ix=gn.ownerDocument;if(lx&1&&ZC(Ix.documentElement),lx&2&&ZC(Ix.body),lx&4)for(lx=Ix.head,ZC(lx),Ix=lx.firstChild;Ix;){var Gx=Ix.nextSibling,Qx=Ix.nodeName;Ix[dS]||Qx==="SCRIPT"||Qx==="STYLE"||Qx==="LINK"&&Ix.rel.toLowerCase()==="stylesheet"||lx.removeChild(Ix),Ix=Gx}}if(yx===0){gn.removeChild(Sx),tM(ex);return}yx--}else lx==="$"||lx==="$?"||lx==="$!"?yx++:px=lx.charCodeAt(0)-48;else px=0;lx=Sx}while(lx);tM(ex)}function nD(gn){var ex=gn.firstChild;for(ex&&ex.nodeType===10&&(ex=ex.nextSibling);ex;){var lx=ex;switch(ex=ex.nextSibling,lx.nodeName){case"HTML":case"HEAD":case"BODY":nD(lx),US(lx);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(lx.rel.toLowerCase()==="stylesheet")continue}gn.removeChild(lx)}}function E$(gn,ex,lx,px){for(;gn.nodeType===1;){var yx=lx;if(gn.nodeName.toLowerCase()!==ex.toLowerCase()){if(!px&&(gn.nodeName!=="INPUT"||gn.type!=="hidden"))break}else if(px){if(!gn[dS])switch(ex){case"meta":if(!gn.hasAttribute("itemprop"))break;return gn;case"link":if(Sx=gn.getAttribute("rel"),Sx==="stylesheet"&&gn.hasAttribute("data-precedence"))break;if(Sx!==yx.rel||gn.getAttribute("href")!==(yx.href==null||yx.href===""?null:yx.href)||gn.getAttribute("crossorigin")!==(yx.crossOrigin==null?null:yx.crossOrigin)||gn.getAttribute("title")!==(yx.title==null?null:yx.title))break;return gn;case"style":if(gn.hasAttribute("data-precedence"))break;return gn;case"script":if(Sx=gn.getAttribute("src"),(Sx!==(yx.src==null?null:yx.src)||gn.getAttribute("type")!==(yx.type==null?null:yx.type)||gn.getAttribute("crossorigin")!==(yx.crossOrigin==null?null:yx.crossOrigin))&&Sx&&gn.hasAttribute("async")&&!gn.hasAttribute("itemprop"))break;return gn;default:return gn}}else if(ex==="input"&&gn.type==="hidden"){var Sx=yx.name==null?null:""+yx.name;if(yx.type==="hidden"&&gn.getAttribute("name")===Sx)return gn}else return gn;if(gn=xT(gn.nextSibling),gn===null)break}return null}function b$(gn,ex,lx){if(ex==="")return null;for(;gn.nodeType!==3;)if((gn.nodeType!==1||gn.nodeName!=="INPUT"||gn.type!=="hidden")&&!lx||(gn=xT(gn.nextSibling),gn===null))return null;return gn}function iD(gn){return gn.data==="$!"||gn.data==="$?"&&gn.ownerDocument.readyState==="complete"}function S$(gn,ex){var lx=gn.ownerDocument;if(gn.data!=="$?"||lx.readyState==="complete")ex();else{var px=function(){ex(),lx.removeEventListener("DOMContentLoaded",px)};lx.addEventListener("DOMContentLoaded",px),gn._reactRetry=px}}function xT(gn){for(;gn!=null;gn=gn.nextSibling){var ex=gn.nodeType;if(ex===1||ex===3)break;if(ex===8){if(ex=gn.data,ex==="$"||ex==="$!"||ex==="$?"||ex==="F!"||ex==="F")break;if(ex==="/$")return null}}return gn}var aD=null;function SN(gn){gn=gn.previousSibling;for(var ex=0;gn;){if(gn.nodeType===8){var lx=gn.data;if(lx==="$"||lx==="$!"||lx==="$?"){if(ex===0)return gn;ex--}else lx==="/$"&&ex++}gn=gn.previousSibling}return null}function wN(gn,ex,lx){switch(ex=KM(lx),gn){case"html":if(gn=ex.documentElement,!gn)throw Error(s(452));return gn;case"head":if(gn=ex.head,!gn)throw Error(s(453));return gn;case"body":if(gn=ex.body,!gn)throw Error(s(454));return gn;default:throw Error(s(451))}}function ZC(gn){for(var ex=gn.attributes;ex.length;)gn.removeAttributeNode(ex[0]);US(gn)}var hT=new Map,TN=new Set;function QM(gn){return typeof gn.getRootNode=="function"?gn.getRootNode():gn.nodeType===9?gn:gn.ownerDocument}var FT=Tx.d;Tx.d={f:w$,r:T$,D:A$,C:C$,L:M$,m:R$,X:D$,S:I$,M:O$};function w$(){var gn=FT.f(),ex=zM();return gn||ex}function T$(gn){var ex=zS(gn);ex!==null&&ex.tag===5&&ex.type==="form"?HO(ex):FT.r(gn)}var iC=typeof document>"u"?null:document;function AN(gn,ex,lx){var px=iC;if(px&&typeof ex=="string"&&ex){var yx=sT(ex);yx='link[rel="'+gn+'"][href="'+yx+'"]',typeof lx=="string"&&(yx+='[crossorigin="'+lx+'"]'),TN.has(yx)||(TN.add(yx),gn={rel:gn,crossOrigin:lx,href:ex},px.querySelector(yx)===null&&(ex=px.createElement("link"),FS(ex,"link",gn),GE(ex),px.head.appendChild(ex)))}}function A$(gn){FT.D(gn),AN("dns-prefetch",gn,null)}function C$(gn,ex){FT.C(gn,ex),AN("preconnect",gn,ex)}function M$(gn,ex,lx){FT.L(gn,ex,lx);var px=iC;if(px&&gn&&ex){var yx='link[rel="preload"][as="'+sT(ex)+'"]';ex==="image"&&lx&&lx.imageSrcSet?(yx+='[imagesrcset="'+sT(lx.imageSrcSet)+'"]',typeof lx.imageSizes=="string"&&(yx+='[imagesizes="'+sT(lx.imageSizes)+'"]')):yx+='[href="'+sT(gn)+'"]';var Sx=yx;switch(ex){case"style":Sx=aC(gn);break;case"script":Sx=oC(gn)}hT.has(Sx)||(gn=en({rel:"preload",href:ex==="image"&&lx&&lx.imageSrcSet?void 0:gn,as:ex},lx),hT.set(Sx,gn),px.querySelector(yx)!==null||ex==="style"&&px.querySelector(YC(Sx))||ex==="script"&&px.querySelector(WC(Sx))||(ex=px.createElement("link"),FS(ex,"link",gn),GE(ex),px.head.appendChild(ex)))}}function R$(gn,ex){FT.m(gn,ex);var lx=iC;if(lx&&gn){var px=ex&&typeof ex.as=="string"?ex.as:"script",yx='link[rel="modulepreload"][as="'+sT(px)+'"][href="'+sT(gn)+'"]',Sx=yx;switch(px){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Sx=oC(gn)}if(!hT.has(Sx)&&(gn=en({rel:"modulepreload",href:gn},ex),hT.set(Sx,gn),lx.querySelector(yx)===null)){switch(px){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(lx.querySelector(WC(Sx)))return}px=lx.createElement("link"),FS(px,"link",gn),GE(px),lx.head.appendChild(px)}}}function I$(gn,ex,lx){FT.S(gn,ex,lx);var px=iC;if(px&&gn){var yx=ME(px).hoistableStyles,Sx=aC(gn);ex=ex||"default";var Ix=yx.get(Sx);if(!Ix){var Gx={loading:0,preload:null};if(Ix=px.querySelector(YC(Sx)))Gx.loading=5;else{gn=en({rel:"stylesheet",href:gn,"data-precedence":ex},lx),(lx=hT.get(Sx))&&oD(gn,lx);var Qx=Ix=px.createElement("link");GE(Qx),FS(Qx,"link",gn),Qx._p=new Promise(function(cE,yE){Qx.onload=cE,Qx.onerror=yE}),Qx.addEventListener("load",function(){Gx.loading|=1}),Qx.addEventListener("error",function(){Gx.loading|=2}),Gx.loading|=4,JM(Ix,ex,px)}Ix={type:"stylesheet",instance:Ix,count:1,state:Gx},yx.set(Sx,Ix)}}}function D$(gn,ex){FT.X(gn,ex);var lx=iC;if(lx&&gn){var px=ME(lx).hoistableScripts,yx=oC(gn),Sx=px.get(yx);Sx||(Sx=lx.querySelector(WC(yx)),Sx||(gn=en({src:gn,async:!0},ex),(ex=hT.get(yx))&&sD(gn,ex),Sx=lx.createElement("script"),GE(Sx),FS(Sx,"link",gn),lx.head.appendChild(Sx)),Sx={type:"script",instance:Sx,count:1,state:null},px.set(yx,Sx))}}function O$(gn,ex){FT.M(gn,ex);var lx=iC;if(lx&&gn){var px=ME(lx).hoistableScripts,yx=oC(gn),Sx=px.get(yx);Sx||(Sx=lx.querySelector(WC(yx)),Sx||(gn=en({src:gn,async:!0,type:"module"},ex),(ex=hT.get(yx))&&sD(gn,ex),Sx=lx.createElement("script"),GE(Sx),FS(Sx,"link",gn),lx.head.appendChild(Sx)),Sx={type:"script",instance:Sx,count:1,state:null},px.set(yx,Sx))}}function CN(gn,ex,lx,px){var yx=(yx=$x.current)?QM(yx):null;if(!yx)throw Error(s(446));switch(gn){case"meta":case"title":return null;case"style":return typeof lx.precedence=="string"&&typeof lx.href=="string"?(ex=aC(lx.href),lx=ME(yx).hoistableStyles,px=lx.get(ex),px||(px={type:"style",instance:null,count:0,state:null},lx.set(ex,px)),px):{type:"void",instance:null,count:0,state:null};case"link":if(lx.rel==="stylesheet"&&typeof lx.href=="string"&&typeof lx.precedence=="string"){gn=aC(lx.href);var Sx=ME(yx).hoistableStyles,Ix=Sx.get(gn);if(Ix||(yx=yx.ownerDocument||yx,Ix={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Sx.set(gn,Ix),(Sx=yx.querySelector(YC(gn)))&&!Sx._p&&(Ix.instance=Sx,Ix.state.loading=5),hT.has(gn)||(lx={rel:"preload",as:"style",href:lx.href,crossOrigin:lx.crossOrigin,integrity:lx.integrity,media:lx.media,hrefLang:lx.hrefLang,referrerPolicy:lx.referrerPolicy},hT.set(gn,lx),Sx||P$(yx,gn,lx,Ix.state))),ex&&px===null)throw Error(s(528,""));return Ix}if(ex&&px!==null)throw Error(s(529,""));return null;case"script":return ex=lx.async,lx=lx.src,typeof lx=="string"&&ex&&typeof ex!="function"&&typeof ex!="symbol"?(ex=oC(lx),lx=ME(yx).hoistableScripts,px=lx.get(ex),px||(px={type:"script",instance:null,count:0,state:null},lx.set(ex,px)),px):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,gn))}}function aC(gn){return'href="'+sT(gn)+'"'}function YC(gn){return'link[rel="stylesheet"]['+gn+"]"}function MN(gn){return en({},gn,{"data-precedence":gn.precedence,precedence:null})}function P$(gn,ex,lx,px){gn.querySelector('link[rel="preload"][as="style"]['+ex+"]")?px.loading=1:(ex=gn.createElement("link"),px.preload=ex,ex.addEventListener("load",function(){return px.loading|=1}),ex.addEventListener("error",function(){return px.loading|=2}),FS(ex,"link",lx),GE(ex),gn.head.appendChild(ex))}function oC(gn){return'[src="'+sT(gn)+'"]'}function WC(gn){return"script[async]"+gn}function RN(gn,ex,lx){if(ex.count++,ex.instance===null)switch(ex.type){case"style":var px=gn.querySelector('style[data-href~="'+sT(lx.href)+'"]');if(px)return ex.instance=px,GE(px),px;var yx=en({},lx,{"data-href":lx.href,"data-precedence":lx.precedence,href:null,precedence:null});return px=(gn.ownerDocument||gn).createElement("style"),GE(px),FS(px,"style",yx),JM(px,lx.precedence,gn),ex.instance=px;case"stylesheet":yx=aC(lx.href);var Sx=gn.querySelector(YC(yx));if(Sx)return ex.state.loading|=4,ex.instance=Sx,GE(Sx),Sx;px=MN(lx),(yx=hT.get(yx))&&oD(px,yx),Sx=(gn.ownerDocument||gn).createElement("link"),GE(Sx);var Ix=Sx;return Ix._p=new Promise(function(Gx,Qx){Ix.onload=Gx,Ix.onerror=Qx}),FS(Sx,"link",px),ex.state.loading|=4,JM(Sx,lx.precedence,gn),ex.instance=Sx;case"script":return Sx=oC(lx.src),(yx=gn.querySelector(WC(Sx)))?(ex.instance=yx,GE(yx),yx):(px=lx,(yx=hT.get(Sx))&&(px=en({},lx),sD(px,yx)),gn=gn.ownerDocument||gn,yx=gn.createElement("script"),GE(yx),FS(yx,"link",px),gn.head.appendChild(yx),ex.instance=yx);case"void":return null;default:throw Error(s(443,ex.type))}else ex.type==="stylesheet"&&(ex.state.loading&4)===0&&(px=ex.instance,ex.state.loading|=4,JM(px,lx.precedence,gn));return ex.instance}function JM(gn,ex,lx){for(var px=lx.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),yx=px.length?px[px.length-1]:null,Sx=yx,Ix=0;Ix<px.length;Ix++){var Gx=px[Ix];if(Gx.dataset.precedence===ex)Sx=Gx;else if(Sx!==yx)break}Sx?Sx.parentNode.insertBefore(gn,Sx.nextSibling):(ex=lx.nodeType===9?lx.head:lx,ex.insertBefore(gn,ex.firstChild))}function oD(gn,ex){gn.crossOrigin==null&&(gn.crossOrigin=ex.crossOrigin),gn.referrerPolicy==null&&(gn.referrerPolicy=ex.referrerPolicy),gn.title==null&&(gn.title=ex.title)}function sD(gn,ex){gn.crossOrigin==null&&(gn.crossOrigin=ex.crossOrigin),gn.referrerPolicy==null&&(gn.referrerPolicy=ex.referrerPolicy),gn.integrity==null&&(gn.integrity=ex.integrity)}var eR=null;function IN(gn,ex,lx){if(eR===null){var px=new Map,yx=eR=new Map;yx.set(lx,px)}else yx=eR,px=yx.get(lx),px||(px=new Map,yx.set(lx,px));if(px.has(gn))return px;for(px.set(gn,null),lx=lx.getElementsByTagName(gn),yx=0;yx<lx.length;yx++){var Sx=lx[yx];if(!(Sx[dS]||Sx[LE]||gn==="link"&&Sx.getAttribute("rel")==="stylesheet")&&Sx.namespaceURI!=="http://www.w3.org/2000/svg"){var Ix=Sx.getAttribute(ex)||"";Ix=gn+Ix;var Gx=px.get(Ix);Gx?Gx.push(Sx):px.set(Ix,[Sx])}}return px}function DN(gn,ex,lx){gn=gn.ownerDocument||gn,gn.head.insertBefore(lx,ex==="title"?gn.querySelector("head > title"):null)}function N$(gn,ex,lx){if(lx===1||ex.itemProp!=null)return!1;switch(gn){case"meta":case"title":return!0;case"style":if(typeof ex.precedence!="string"||typeof ex.href!="string"||ex.href==="")break;return!0;case"link":if(typeof ex.rel!="string"||typeof ex.href!="string"||ex.href===""||ex.onLoad||ex.onError)break;switch(ex.rel){case"stylesheet":return gn=ex.disabled,typeof ex.precedence=="string"&&gn==null;default:return!0}case"script":if(ex.async&&typeof ex.async!="function"&&typeof ex.async!="symbol"&&!ex.onLoad&&!ex.onError&&ex.src&&typeof ex.src=="string")return!0}return!1}function ON(gn){return!(gn.type==="stylesheet"&&(gn.state.loading&3)===0)}var XC=null;function L$(){}function $$(gn,ex,lx){if(XC===null)throw Error(s(475));var px=XC;if(ex.type==="stylesheet"&&(typeof lx.media!="string"||matchMedia(lx.media).matches!==!1)&&(ex.state.loading&4)===0){if(ex.instance===null){var yx=aC(lx.href),Sx=gn.querySelector(YC(yx));if(Sx){gn=Sx._p,gn!==null&&typeof gn=="object"&&typeof gn.then=="function"&&(px.count++,px=tR.bind(px),gn.then(px,px)),ex.state.loading|=4,ex.instance=Sx,GE(Sx);return}Sx=gn.ownerDocument||gn,lx=MN(lx),(yx=hT.get(yx))&&oD(lx,yx),Sx=Sx.createElement("link"),GE(Sx);var Ix=Sx;Ix._p=new Promise(function(Gx,Qx){Ix.onload=Gx,Ix.onerror=Qx}),FS(Sx,"link",lx),ex.instance=Sx}px.stylesheets===null&&(px.stylesheets=new Map),px.stylesheets.set(ex,gn),(gn=ex.state.preload)&&(ex.state.loading&3)===0&&(px.count++,ex=tR.bind(px),gn.addEventListener("load",ex),gn.addEventListener("error",ex))}}function B$(){if(XC===null)throw Error(s(475));var gn=XC;return gn.stylesheets&&gn.count===0&&lD(gn,gn.stylesheets),0<gn.count?function(ex){var lx=setTimeout(function(){if(gn.stylesheets&&lD(gn,gn.stylesheets),gn.unsuspend){var px=gn.unsuspend;gn.unsuspend=null,px()}},6e4);return gn.unsuspend=ex,function(){gn.unsuspend=null,clearTimeout(lx)}}:null}function tR(){if(this.count--,this.count===0){if(this.stylesheets)lD(this,this.stylesheets);else if(this.unsuspend){var gn=this.unsuspend;this.unsuspend=null,gn()}}}var rR=null;function lD(gn,ex){gn.stylesheets=null,gn.unsuspend!==null&&(gn.count++,rR=new Map,ex.forEach(k$,gn),rR=null,tR.call(gn))}function k$(gn,ex){if(!(ex.state.loading&4)){var lx=rR.get(gn);if(lx)var px=lx.get(null);else{lx=new Map,rR.set(gn,lx);for(var yx=gn.querySelectorAll("link[data-precedence],style[data-precedence]"),Sx=0;Sx<yx.length;Sx++){var Ix=yx[Sx];(Ix.nodeName==="LINK"||Ix.getAttribute("media")!=="not all")&&(lx.set(Ix.dataset.precedence,Ix),px=Ix)}px&&lx.set(null,px)}yx=ex.instance,Ix=yx.getAttribute("data-precedence"),Sx=lx.get(Ix)||px,Sx===px&&lx.set(null,yx),lx.set(Ix,yx),this.count++,px=tR.bind(this),yx.addEventListener("load",px),yx.addEventListener("error",px),Sx?Sx.parentNode.insertBefore(yx,Sx.nextSibling):(gn=gn.nodeType===9?gn.head:gn,gn.insertBefore(yx,gn.firstChild)),ex.state.loading|=4}}var KC={$$typeof:ox,Provider:null,Consumer:null,_currentValue:Cx,_currentValue2:Cx,_threadCount:0};function F$(gn,ex,lx,px,yx,Sx,Ix,Gx){this.tag=1,this.containerInfo=gn,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vE(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vE(0),this.hiddenUpdates=vE(null),this.identifierPrefix=px,this.onUncaughtError=yx,this.onCaughtError=Sx,this.onRecoverableError=Ix,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Gx,this.incompleteTransitions=new Map}function PN(gn,ex,lx,px,yx,Sx,Ix,Gx,Qx,cE,yE,wE){return gn=new F$(gn,ex,lx,Ix,Gx,Qx,cE,wE),ex=1,Sx===!0&&(ex|=24),Sx=eT(3,null,null,ex),gn.current=Sx,Sx.stateNode=gn,ex=GR(),ex.refCount++,gn.pooledCache=ex,ex.refCount++,Sx.memoizedState={element:px,isDehydrated:lx,cache:ex},jR(Sx),gn}function NN(gn){return gn?(gn=BA,gn):BA}function LN(gn,ex,lx,px,yx,Sx){yx=NN(yx),px.context===null?px.context=yx:px.pendingContext=yx,px=zT(ex),px.payload={element:lx},Sx=Sx===void 0?null:Sx,Sx!==null&&(px.callback=Sx),lx=VT(gn,px,ex),lx!==null&&(aT(lx,gn,ex),CC(lx,gn,ex))}function $N(gn,ex){if(gn=gn.memoizedState,gn!==null&&gn.dehydrated!==null){var lx=gn.retryLane;gn.retryLane=lx!==0&&lx<ex?lx:ex}}function uD(gn,ex){$N(gn,ex),(gn=gn.alternate)&&$N(gn,ex)}function BN(gn){if(gn.tag===13){var ex=$A(gn,67108864);ex!==null&&aT(ex,gn,67108864),uD(gn,67108864)}}var nR=!0;function U$(gn,ex,lx,px){var yx=Ex.T;Ex.T=null;var Sx=Tx.p;try{Tx.p=2,cD(gn,ex,lx,px)}finally{Tx.p=Sx,Ex.T=yx}}function q$(gn,ex,lx,px){var yx=Ex.T;Ex.T=null;var Sx=Tx.p;try{Tx.p=8,cD(gn,ex,lx,px)}finally{Tx.p=Sx,Ex.T=yx}}function cD(gn,ex,lx,px){if(nR){var yx=fD(px);if(yx===null)KI(gn,ex,px,iR,lx),FN(gn,px);else if(z$(yx,gn,ex,lx,px))px.stopPropagation();else if(FN(gn,px),ex&4&&-1<G$.indexOf(gn)){for(;yx!==null;){var Sx=zS(yx);if(Sx!==null)switch(Sx.tag){case 3:if(Sx=Sx.stateNode,Sx.current.memoizedState.isDehydrated){var Ix=xE(Sx.pendingLanes);if(Ix!==0){var Gx=Sx;for(Gx.pendingLanes|=2,Gx.entangledLanes|=2;Ix;){var Qx=1<<31-Kx(Ix);Gx.entanglements[1]|=Qx,Ix&=~Qx}wT(Sx),(oS&6)===0&&(qM=iE()+500,VC(0))}}break;case 13:Gx=$A(Sx,2),Gx!==null&&aT(Gx,Sx,2),zM(),uD(Sx,2)}if(Sx=fD(px),Sx===null&&KI(gn,ex,px,iR,lx),Sx===yx)break;yx=Sx}yx!==null&&px.stopPropagation()}else KI(gn,ex,px,null,lx)}}function fD(gn){return gn=hR(gn),pD(gn)}var iR=null;function pD(gn){if(iR=null,gn=LS(gn),gn!==null){var ex=u(gn);if(ex===null)gn=null;else{var lx=ex.tag;if(lx===13){if(gn=c(ex),gn!==null)return gn;gn=null}else if(lx===3){if(ex.stateNode.current.memoizedState.isDehydrated)return ex.tag===3?ex.stateNode.containerInfo:null;gn=null}else ex!==gn&&(gn=null)}}return iR=gn,null}function kN(gn){switch(gn){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xx()){case CE:return 2;case RE:return 8;case SE:case EE:return 32;case FE:return 268435456;default:return 32}default:return 32}}var dD=!1,nA=null,iA=null,aA=null,QC=new Map,JC=new Map,oA=[],G$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FN(gn,ex){switch(gn){case"focusin":case"focusout":nA=null;break;case"dragenter":case"dragleave":iA=null;break;case"mouseover":case"mouseout":aA=null;break;case"pointerover":case"pointerout":QC.delete(ex.pointerId);break;case"gotpointercapture":case"lostpointercapture":JC.delete(ex.pointerId)}}function eM(gn,ex,lx,px,yx,Sx){return gn===null||gn.nativeEvent!==Sx?(gn={blockedOn:ex,domEventName:lx,eventSystemFlags:px,nativeEvent:Sx,targetContainers:[yx]},ex!==null&&(ex=zS(ex),ex!==null&&BN(ex)),gn):(gn.eventSystemFlags|=px,ex=gn.targetContainers,yx!==null&&ex.indexOf(yx)===-1&&ex.push(yx),gn)}function z$(gn,ex,lx,px,yx){switch(ex){case"focusin":return nA=eM(nA,gn,ex,lx,px,yx),!0;case"dragenter":return iA=eM(iA,gn,ex,lx,px,yx),!0;case"mouseover":return aA=eM(aA,gn,ex,lx,px,yx),!0;case"pointerover":var Sx=yx.pointerId;return QC.set(Sx,eM(QC.get(Sx)||null,gn,ex,lx,px,yx)),!0;case"gotpointercapture":return Sx=yx.pointerId,JC.set(Sx,eM(JC.get(Sx)||null,gn,ex,lx,px,yx)),!0}return!1}function UN(gn){var ex=LS(gn.target);if(ex!==null){var lx=u(ex);if(lx!==null){if(ex=lx.tag,ex===13){if(ex=c(lx),ex!==null){gn.blockedOn=ex,NE(gn.priority,function(){if(lx.tag===13){var px=iT();px=Zx(px);var yx=$A(lx,px);yx!==null&&aT(yx,lx,px),uD(lx,px)}});return}}else if(ex===3&&lx.stateNode.current.memoizedState.isDehydrated){gn.blockedOn=lx.tag===3?lx.stateNode.containerInfo:null;return}}}gn.blockedOn=null}function aR(gn){if(gn.blockedOn!==null)return!1;for(var ex=gn.targetContainers;0<ex.length;){var lx=fD(gn.nativeEvent);if(lx===null){lx=gn.nativeEvent;var px=new lx.constructor(lx.type,lx);dR=px,lx.target.dispatchEvent(px),dR=null}else return ex=zS(lx),ex!==null&&BN(ex),gn.blockedOn=lx,!1;ex.shift()}return!0}function qN(gn,ex,lx){aR(gn)&&lx.delete(ex)}function V$(){dD=!1,nA!==null&&aR(nA)&&(nA=null),iA!==null&&aR(iA)&&(iA=null),aA!==null&&aR(aA)&&(aA=null),QC.forEach(qN),JC.forEach(qN)}function oR(gn,ex){gn.blockedOn===ex&&(gn.blockedOn=null,dD||(dD=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,V$)))}var sR=null;function GN(gn){sR!==gn&&(sR=gn,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sR===gn&&(sR=null);for(var ex=0;ex<gn.length;ex+=3){var lx=gn[ex],px=gn[ex+1],yx=gn[ex+2];if(typeof px!="function"){if(pD(px||lx)===null)continue;break}var Sx=zS(lx);Sx!==null&&(gn.splice(ex,3),ex-=3,fI(Sx,{pending:!0,data:yx,method:lx.method,action:px},px,yx))}}))}function tM(gn){function ex(Qx){return oR(Qx,gn)}nA!==null&&oR(nA,gn),iA!==null&&oR(iA,gn),aA!==null&&oR(aA,gn),QC.forEach(ex),JC.forEach(ex);for(var lx=0;lx<oA.length;lx++){var px=oA[lx];px.blockedOn===gn&&(px.blockedOn=null)}for(;0<oA.length&&(lx=oA[0],lx.blockedOn===null);)UN(lx),lx.blockedOn===null&&oA.shift();if(lx=(gn.ownerDocument||gn).$$reactFormReplay,lx!=null)for(px=0;px<lx.length;px+=3){var yx=lx[px],Sx=lx[px+1],Ix=yx[BE]||null;if(typeof Sx=="function")Ix||GN(lx);else if(Ix){var Gx=null;if(Sx&&Sx.hasAttribute("formAction")){if(yx=Sx,Ix=Sx[BE]||null)Gx=Ix.formAction;else if(pD(yx)!==null)continue}else Gx=Ix.action;typeof Gx=="function"?lx[px+1]=Gx:(lx.splice(px,3),px-=3),GN(lx)}}}function hD(gn){this._internalRoot=gn}lR.prototype.render=hD.prototype.render=function(gn){var ex=this._internalRoot;if(ex===null)throw Error(s(409));var lx=ex.current,px=iT();LN(lx,px,gn,ex,null,null)},lR.prototype.unmount=hD.prototype.unmount=function(){var gn=this._internalRoot;if(gn!==null){this._internalRoot=null;var ex=gn.containerInfo;LN(gn.current,2,null,gn,null,null),zM(),ex[jE]=null}};function lR(gn){this._internalRoot=gn}lR.prototype.unstable_scheduleHydration=function(gn){if(gn){var ex=mE();gn={blockedOn:null,target:gn,priority:ex};for(var lx=0;lx<oA.length&&ex!==0&&ex<oA[lx].priority;lx++);oA.splice(lx,0,gn),lx===0&&UN(gn)}};var zN=n.version;if(zN!=="19.1.1")throw Error(s(527,zN,"19.1.1"));Tx.findDOMNode=function(gn){var ex=gn._reactInternals;if(ex===void 0)throw typeof gn.render=="function"?Error(s(188)):(gn=Object.keys(gn).join(","),Error(s(268,gn)));return gn=Ct(ex),gn=gn!==null?ar(gn):null,gn=gn===null?null:gn.stateNode,gn};var H$={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ex,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uR.isDisabled&&uR.supportsFiber)try{Dx=uR.inject(H$),kx=uR}catch{}}return reactDomClient_production.createRoot=function(gn,ex){if(!l(gn))throw Error(s(299));var lx=!1,px="",yx=aP,Sx=oP,Ix=sP,Gx=null;return ex!=null&&(ex.unstable_strictMode===!0&&(lx=!0),ex.identifierPrefix!==void 0&&(px=ex.identifierPrefix),ex.onUncaughtError!==void 0&&(yx=ex.onUncaughtError),ex.onCaughtError!==void 0&&(Sx=ex.onCaughtError),ex.onRecoverableError!==void 0&&(Ix=ex.onRecoverableError),ex.unstable_transitionCallbacks!==void 0&&(Gx=ex.unstable_transitionCallbacks)),ex=PN(gn,1,!1,null,null,lx,px,yx,Sx,Ix,Gx,null),gn[jE]=ex.current,XI(gn),new hD(ex)},reactDomClient_production.hydrateRoot=function(gn,ex,lx){if(!l(gn))throw Error(s(299));var px=!1,yx="",Sx=aP,Ix=oP,Gx=sP,Qx=null,cE=null;return lx!=null&&(lx.unstable_strictMode===!0&&(px=!0),lx.identifierPrefix!==void 0&&(yx=lx.identifierPrefix),lx.onUncaughtError!==void 0&&(Sx=lx.onUncaughtError),lx.onCaughtError!==void 0&&(Ix=lx.onCaughtError),lx.onRecoverableError!==void 0&&(Gx=lx.onRecoverableError),lx.unstable_transitionCallbacks!==void 0&&(Qx=lx.unstable_transitionCallbacks),lx.formState!==void 0&&(cE=lx.formState)),ex=PN(gn,1,!0,ex,lx??null,px,yx,Sx,Ix,Gx,Qx,cE),ex.context=NN(null),lx=ex.current,px=iT(),px=Zx(px),yx=zT(px),yx.callback=null,VT(lx,yx,px),lx=px,ex.current.lanes=lx,IE(ex,lx),wT(ex),gn[jE]=ex.current,XI(gn),new lR(ex)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(t){let n=t.length;for(;--n>=0;)t[n]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(t,n,a,s,l){this.static_tree=t,this.extra_bits=n,this.extra_base=a,this.elems=s,this.max_length=l,this.has_stree=t&&t.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}const d_code=t=>t<256?_dist_code[t]:_dist_code[256+(t>>>7)],put_short=(t,n)=>{t.pending_buf[t.pending++]=n&255,t.pending_buf[t.pending++]=n>>>8&255},send_bits=(t,n,a)=>{t.bi_valid>Buf_size-a?(t.bi_buf|=n<<t.bi_valid&65535,put_short(t,t.bi_buf),t.bi_buf=n>>Buf_size-t.bi_valid,t.bi_valid+=a-Buf_size):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=a)},send_code=(t,n,a)=>{send_bits(t,a[n*2],a[n*2+1])},bi_reverse=(t,n)=>{let a=0;do a|=t&1,t>>>=1,a<<=1;while(--n>0);return a>>>1},bi_flush=t=>{t.bi_valid===16?(put_short(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},gen_bitlen=(t,n)=>{const a=n.dyn_tree,s=n.max_code,l=n.stat_desc.static_tree,u=n.stat_desc.has_stree,c=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,Ct=n.stat_desc.max_length;let ar,en,tn,on,cn,dn,Cn=0;for(on=0;on<=MAX_BITS$1;on++)t.bl_count[on]=0;for(a[t.heap[t.heap_max]*2+1]=0,ar=t.heap_max+1;ar<HEAP_SIZE$1;ar++)en=t.heap[ar],on=a[a[en*2+1]*2+1]+1,on>Ct&&(on=Ct,Cn++),a[en*2+1]=on,!(en>s)&&(t.bl_count[on]++,cn=0,en>=d&&(cn=c[en-d]),dn=a[en*2],t.opt_len+=dn*(on+cn),u&&(t.static_len+=dn*(l[en*2+1]+cn)));if(Cn!==0){do{for(on=Ct-1;t.bl_count[on]===0;)on--;t.bl_count[on]--,t.bl_count[on+1]+=2,t.bl_count[Ct]--,Cn-=2}while(Cn>0);for(on=Ct;on!==0;on--)for(en=t.bl_count[on];en!==0;)tn=t.heap[--ar],!(tn>s)&&(a[tn*2+1]!==on&&(t.opt_len+=(on-a[tn*2+1])*a[tn*2],a[tn*2+1]=on),en--)}},gen_codes=(t,n,a)=>{const s=new Array(MAX_BITS$1+1);let l=0,u,c;for(u=1;u<=MAX_BITS$1;u++)l=l+a[u-1]<<1,s[u]=l;for(c=0;c<=n;c++){let d=t[c*2+1];d!==0&&(t[c*2]=bi_reverse(s[d]++,d))}},tr_static_init=()=>{let t,n,a,s,l;const u=new Array(MAX_BITS$1+1);for(a=0,s=0;s<LENGTH_CODES$1-1;s++)for(base_length[s]=a,t=0;t<1<<extra_lbits[s];t++)_length_code[a++]=s;for(_length_code[a-1]=s,l=0,s=0;s<16;s++)for(base_dist[s]=l,t=0;t<1<<extra_dbits[s];t++)_dist_code[l++]=s;for(l>>=7;s<D_CODES$1;s++)for(base_dist[s]=l<<7,t=0;t<1<<extra_dbits[s]-7;t++)_dist_code[256+l++]=s;for(n=0;n<=MAX_BITS$1;n++)u[n]=0;for(t=0;t<=143;)static_ltree[t*2+1]=8,t++,u[8]++;for(;t<=255;)static_ltree[t*2+1]=9,t++,u[9]++;for(;t<=279;)static_ltree[t*2+1]=7,t++,u[7]++;for(;t<=287;)static_ltree[t*2+1]=8,t++,u[8]++;for(gen_codes(static_ltree,L_CODES$1+1,u),t=0;t<D_CODES$1;t++)static_dtree[t*2+1]=5,static_dtree[t*2]=bi_reverse(t,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=t=>{let n;for(n=0;n<L_CODES$1;n++)t.dyn_ltree[n*2]=0;for(n=0;n<D_CODES$1;n++)t.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES$1;n++)t.bl_tree[n*2]=0;t.dyn_ltree[END_BLOCK*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bi_windup=t=>{t.bi_valid>8?put_short(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},smaller=(t,n,a,s)=>{const l=n*2,u=a*2;return t[l]<t[u]||t[l]===t[u]&&s[n]<=s[a]},pqdownheap=(t,n,a)=>{const s=t.heap[a];let l=a<<1;for(;l<=t.heap_len&&(l<t.heap_len&&smaller(n,t.heap[l+1],t.heap[l],t.depth)&&l++,!smaller(n,s,t.heap[l],t.depth));)t.heap[a]=t.heap[l],a=l,l<<=1;t.heap[a]=s},compress_block=(t,n,a)=>{let s,l,u=0,c,d;if(t.sym_next!==0)do s=t.pending_buf[t.sym_buf+u++]&255,s+=(t.pending_buf[t.sym_buf+u++]&255)<<8,l=t.pending_buf[t.sym_buf+u++],s===0?send_code(t,l,n):(c=_length_code[l],send_code(t,c+LITERALS$1+1,n),d=extra_lbits[c],d!==0&&(l-=base_length[c],send_bits(t,l,d)),s--,c=d_code(s),send_code(t,c,a),d=extra_dbits[c],d!==0&&(s-=base_dist[c],send_bits(t,s,d)));while(u<t.sym_next);send_code(t,END_BLOCK,n)},build_tree=(t,n)=>{const a=n.dyn_tree,s=n.stat_desc.static_tree,l=n.stat_desc.has_stree,u=n.stat_desc.elems;let c,d,Ct=-1,ar;for(t.heap_len=0,t.heap_max=HEAP_SIZE$1,c=0;c<u;c++)a[c*2]!==0?(t.heap[++t.heap_len]=Ct=c,t.depth[c]=0):a[c*2+1]=0;for(;t.heap_len<2;)ar=t.heap[++t.heap_len]=Ct<2?++Ct:0,a[ar*2]=1,t.depth[ar]=0,t.opt_len--,l&&(t.static_len-=s[ar*2+1]);for(n.max_code=Ct,c=t.heap_len>>1;c>=1;c--)pqdownheap(t,a,c);ar=u;do c=t.heap[1],t.heap[1]=t.heap[t.heap_len--],pqdownheap(t,a,1),d=t.heap[1],t.heap[--t.heap_max]=c,t.heap[--t.heap_max]=d,a[ar*2]=a[c*2]+a[d*2],t.depth[ar]=(t.depth[c]>=t.depth[d]?t.depth[c]:t.depth[d])+1,a[c*2+1]=a[d*2+1]=ar,t.heap[1]=ar++,pqdownheap(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],gen_bitlen(t,n),gen_codes(a,Ct,t.bl_count)},scan_tree=(t,n,a)=>{let s,l=-1,u,c=n[1],d=0,Ct=7,ar=4;for(c===0&&(Ct=138,ar=3),n[(a+1)*2+1]=65535,s=0;s<=a;s++)u=c,c=n[(s+1)*2+1],!(++d<Ct&&u===c)&&(d<ar?t.bl_tree[u*2]+=d:u!==0?(u!==l&&t.bl_tree[u*2]++,t.bl_tree[REP_3_6*2]++):d<=10?t.bl_tree[REPZ_3_10*2]++:t.bl_tree[REPZ_11_138*2]++,d=0,l=u,c===0?(Ct=138,ar=3):u===c?(Ct=6,ar=3):(Ct=7,ar=4))},send_tree=(t,n,a)=>{let s,l=-1,u,c=n[1],d=0,Ct=7,ar=4;for(c===0&&(Ct=138,ar=3),s=0;s<=a;s++)if(u=c,c=n[(s+1)*2+1],!(++d<Ct&&u===c)){if(d<ar)do send_code(t,u,t.bl_tree);while(--d!==0);else u!==0?(u!==l&&(send_code(t,u,t.bl_tree),d--),send_code(t,REP_3_6,t.bl_tree),send_bits(t,d-3,2)):d<=10?(send_code(t,REPZ_3_10,t.bl_tree),send_bits(t,d-3,3)):(send_code(t,REPZ_11_138,t.bl_tree),send_bits(t,d-11,7));d=0,l=u,c===0?(Ct=138,ar=3):u===c?(Ct=6,ar=3):(Ct=7,ar=4)}},build_bl_tree=t=>{let n;for(scan_tree(t,t.dyn_ltree,t.l_desc.max_code),scan_tree(t,t.dyn_dtree,t.d_desc.max_code),build_tree(t,t.bl_desc),n=BL_CODES$1-1;n>=3&&t.bl_tree[bl_order[n]*2+1]===0;n--);return t.opt_len+=3*(n+1)+5+5+4,n},send_all_trees=(t,n,a,s)=>{let l;for(send_bits(t,n-257,5),send_bits(t,a-1,5),send_bits(t,s-4,4),l=0;l<s;l++)send_bits(t,t.bl_tree[bl_order[l]*2+1],3);send_tree(t,t.dyn_ltree,n-1),send_tree(t,t.dyn_dtree,a-1)},detect_data_type=t=>{let n=4093624447,a;for(a=0;a<=31;a++,n>>>=1)if(n&1&&t.dyn_ltree[a*2]!==0)return Z_BINARY;if(t.dyn_ltree[18]!==0||t.dyn_ltree[20]!==0||t.dyn_ltree[26]!==0)return Z_TEXT;for(a=32;a<LITERALS$1;a++)if(t.dyn_ltree[a*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=t=>{static_init_done||(tr_static_init(),static_init_done=!0),t.l_desc=new TreeDesc(t.dyn_ltree,static_l_desc),t.d_desc=new TreeDesc(t.dyn_dtree,static_d_desc),t.bl_desc=new TreeDesc(t.bl_tree,static_bl_desc),t.bi_buf=0,t.bi_valid=0,init_block(t)},_tr_stored_block$1=(t,n,a,s)=>{send_bits(t,(STORED_BLOCK<<1)+(s?1:0),3),bi_windup(t),put_short(t,a),put_short(t,~a),a&&t.pending_buf.set(t.window.subarray(n,n+a),t.pending),t.pending+=a},_tr_align$1=t=>{send_bits(t,STATIC_TREES<<1,3),send_code(t,END_BLOCK,static_ltree),bi_flush(t)},_tr_flush_block$1=(t,n,a,s)=>{let l,u,c=0;t.level>0?(t.strm.data_type===Z_UNKNOWN$1&&(t.strm.data_type=detect_data_type(t)),build_tree(t,t.l_desc),build_tree(t,t.d_desc),c=build_bl_tree(t),l=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=l&&(l=u)):l=u=a+5,a+4<=l&&n!==-1?_tr_stored_block$1(t,n,a,s):t.strategy===Z_FIXED$1||u===l?(send_bits(t,(STATIC_TREES<<1)+(s?1:0),3),compress_block(t,static_ltree,static_dtree)):(send_bits(t,(DYN_TREES<<1)+(s?1:0),3),send_all_trees(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),compress_block(t,t.dyn_ltree,t.dyn_dtree)),init_block(t),s&&bi_windup(t)},_tr_tally$1=(t,n,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,n===0?t.dyn_ltree[a*2]++:(t.matches++,n--,t.dyn_ltree[(_length_code[a]+LITERALS$1+1)*2]++,t.dyn_dtree[d_code(n)*2]++),t.sym_next===t.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(t,n,a,s)=>{let l=t&65535|0,u=t>>>16&65535|0,c=0;for(;a!==0;){c=a>2e3?2e3:a,a-=c;do l=l+n[s++]|0,u=u+l|0;while(--c);l%=65521,u%=65521}return l|u<<16|0};var adler32_1=adler32;const makeTable=()=>{let t,n=[];for(var a=0;a<256;a++){t=a;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;n[a]=t}return n},crcTable=new Uint32Array(makeTable()),crc32=(t,n,a,s)=>{const l=crcTable,u=s+a;t^=-1;for(let c=s;c<u;c++)t=t>>>8^l[(t^n[c])&255];return t^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(t,n)=>(t.msg=messages[n],n),rank=t=>t*2-(t>4?9:0),zero=t=>{let n=t.length;for(;--n>=0;)t[n]=0},slide_hash=t=>{let n,a,s,l=t.w_size;n=t.hash_size,s=n;do a=t.head[--s],t.head[s]=a>=l?a-l:0;while(--n);n=l,s=n;do a=t.prev[--s],t.prev[s]=a>=l?a-l:0;while(--n)};let HASH_ZLIB=(t,n,a)=>(n<<t.hash_shift^a)&t.hash_mask,HASH=HASH_ZLIB;const flush_pending=t=>{const n=t.state;let a=n.pending;a>t.avail_out&&(a=t.avail_out),a!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+a),t.next_out),t.next_out+=a,n.pending_out+=a,t.total_out+=a,t.avail_out-=a,n.pending-=a,n.pending===0&&(n.pending_out=0))},flush_block_only=(t,n)=>{_tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,flush_pending(t.strm)},put_byte=(t,n)=>{t.pending_buf[t.pending++]=n},putShortMSB=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=n&255},read_buf=(t,n,a,s)=>{let l=t.avail_in;return l>s&&(l=s),l===0?0:(t.avail_in-=l,n.set(t.input.subarray(t.next_in,t.next_in+l),a),t.state.wrap===1?t.adler=adler32_1(t.adler,n,l,a):t.state.wrap===2&&(t.adler=crc32_1(t.adler,n,l,a)),t.next_in+=l,t.total_in+=l,l)},longest_match=(t,n)=>{let a=t.max_chain_length,s=t.strstart,l,u,c=t.prev_length,d=t.nice_match;const Ct=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,ar=t.window,en=t.w_mask,tn=t.prev,on=t.strstart+MAX_MATCH;let cn=ar[s+c-1],dn=ar[s+c];t.prev_length>=t.good_match&&(a>>=2),d>t.lookahead&&(d=t.lookahead);do if(l=n,!(ar[l+c]!==dn||ar[l+c-1]!==cn||ar[l]!==ar[s]||ar[++l]!==ar[s+1])){s+=2,l++;do;while(ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&s<on);if(u=MAX_MATCH-(on-s),s=on-MAX_MATCH,u>c){if(t.match_start=n,c=u,u>=d)break;cn=ar[s+c-1],dn=ar[s+c]}}while((n=tn[n&en])>Ct&&--a!==0);return c<=t.lookahead?c:t.lookahead},fill_window=t=>{const n=t.w_size;let a,s,l;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-MIN_LOOKAHEAD)&&(t.window.set(t.window.subarray(n,n+n-s),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),slide_hash(t),s+=n),t.strm.avail_in===0)break;if(a=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=a,t.lookahead+t.insert>=MIN_MATCH)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=HASH(t,t.ins_h,t.window[l+1]);t.insert&&(t.ins_h=HASH(t,t.ins_h,t.window[l+MIN_MATCH-1]),t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&t.strm.avail_in!==0)},deflate_stored=(t,n)=>{let a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s,l,u,c=0,d=t.strm.avail_in;do{if(s=65535,u=t.bi_valid+42>>3,t.strm.avail_out<u||(u=t.strm.avail_out-u,l=t.strstart-t.block_start,s>l+t.strm.avail_in&&(s=l+t.strm.avail_in),s>u&&(s=u),s<a&&(s===0&&n!==Z_FINISH$3||n===Z_NO_FLUSH$2||s!==l+t.strm.avail_in)))break;c=n===Z_FINISH$3&&s===l+t.strm.avail_in?1:0,_tr_stored_block(t,0,0,c),t.pending_buf[t.pending-4]=s,t.pending_buf[t.pending-3]=s>>8,t.pending_buf[t.pending-2]=~s,t.pending_buf[t.pending-1]=~s>>8,flush_pending(t.strm),l&&(l>s&&(l=s),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+l),t.strm.next_out),t.strm.next_out+=l,t.strm.avail_out-=l,t.strm.total_out+=l,t.block_start+=l,s-=l),s&&(read_buf(t.strm,t.strm.output,t.strm.next_out,s),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s)}while(c===0);return d-=t.strm.avail_in,d&&(d>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=d&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-d,t.strm.next_in),t.strstart),t.strstart+=d,t.insert+=d>t.w_size-t.insert?t.w_size-t.insert:d),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),c?BS_FINISH_DONE:n!==Z_NO_FLUSH$2&&n!==Z_FINISH$3&&t.strm.avail_in===0&&t.strstart===t.block_start?BS_BLOCK_DONE:(u=t.window_size-t.strstart,t.strm.avail_in>u&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,u+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),u>t.strm.avail_in&&(u=t.strm.avail_in),u&&(read_buf(t.strm,t.window,t.strstart,u),t.strstart+=u,t.insert+=u>t.w_size-t.insert?t.w_size-t.insert:u),t.high_water<t.strstart&&(t.high_water=t.strstart),u=t.bi_valid+42>>3,u=t.pending_buf_size-u>65535?65535:t.pending_buf_size-u,a=u>t.w_size?t.w_size:u,l=t.strstart-t.block_start,(l>=a||(l||n===Z_FINISH$3)&&n!==Z_NO_FLUSH$2&&t.strm.avail_in===0&&l<=u)&&(s=l>u?u:l,c=n===Z_FINISH$3&&t.strm.avail_in===0&&s===l?1:0,_tr_stored_block(t,t.block_start,s,c),t.block_start+=s,flush_pending(t.strm)),c?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(t,n)=>{let a,s;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),a!==0&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a)),t.match_length>=MIN_MATCH)if(s=_tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+1]);else s=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(t,n)=>{let a,s,l;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,a!==0&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){l=t.strstart+t.lookahead-MIN_MATCH,s=_tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=l&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,s&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}else if(t.match_available){if(s=_tr_tally(t,0,t.window[t.strstart-1]),s&&flush_block_only(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=_tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(t,n)=>{let a,s,l,u;const c=t.window;for(;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(l=t.strstart-1,s=c[l],s===c[++l]&&s===c[++l]&&s===c[++l])){u=t.strstart+MAX_MATCH;do;while(s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&l<u);t.match_length=MAX_MATCH-(u-l),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(a=_tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(t,n)=>{let a;for(;;){if(t.lookahead===0&&(fill_window(t),t.lookahead===0)){if(n===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(t.match_length=0,a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(t,n,a,s,l){this.good_length=t,this.max_lazy=n,this.nice_length=a,this.max_chain=s,this.func=l}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=t=>{t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==INIT_STATE&&n.status!==GZIP_STATE&&n.status!==EXTRA_STATE&&n.status!==NAME_STATE&&n.status!==COMMENT_STATE&&n.status!==HCRC_STATE&&n.status!==BUSY_STATE&&n.status!==FINISH_STATE?1:0},deflateResetKeep=t=>{if(deflateStateCheck(t))return err(t,Z_STREAM_ERROR$2);t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?GZIP_STATE:n.wrap?INIT_STATE:BUSY_STATE,t.adler=n.wrap===2?0:1,n.last_flush=-2,_tr_init(n),Z_OK$3},deflateReset=t=>{const n=deflateResetKeep(t);return n===Z_OK$3&&lm_init(t.state),n},deflateSetHeader=(t,n)=>deflateStateCheck(t)||t.state.wrap!==2?Z_STREAM_ERROR$2:(t.state.gzhead=n,Z_OK$3),deflateInit2=(t,n,a,s,l,u)=>{if(!t)return Z_STREAM_ERROR$2;let c=1;if(n===Z_DEFAULT_COMPRESSION$1&&(n=6),s<0?(c=0,s=-s):s>15&&(c=2,s-=16),l<1||l>MAX_MEM_LEVEL||a!==Z_DEFLATED$2||s<8||s>15||n<0||n>9||u<0||u>Z_FIXED||s===8&&c!==1)return err(t,Z_STREAM_ERROR$2);s===8&&(s=9);const d=new DeflateState;return t.state=d,d.strm=t,d.status=INIT_STATE,d.wrap=c,d.gzhead=null,d.w_bits=s,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=l+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+MIN_MATCH-1)/MIN_MATCH),d.window=new Uint8Array(d.w_size*2),d.head=new Uint16Array(d.hash_size),d.prev=new Uint16Array(d.w_size),d.lit_bufsize=1<<l+6,d.pending_buf_size=d.lit_bufsize*4,d.pending_buf=new Uint8Array(d.pending_buf_size),d.sym_buf=d.lit_bufsize,d.sym_end=(d.lit_bufsize-1)*3,d.level=n,d.strategy=u,d.method=a,deflateReset(t)},deflateInit=(t,n)=>deflateInit2(t,n,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(t,n)=>{if(deflateStateCheck(t)||n>Z_BLOCK$1||n<0)return t?err(t,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const a=t.state;if(!t.output||t.avail_in!==0&&!t.input||a.status===FINISH_STATE&&n!==Z_FINISH$3)return err(t,t.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const s=a.last_flush;if(a.last_flush=n,a.pending!==0){if(flush_pending(t),t.avail_out===0)return a.last_flush=-1,Z_OK$3}else if(t.avail_in===0&&rank(n)<=rank(s)&&n!==Z_FINISH$3)return err(t,Z_BUF_ERROR$1);if(a.status===FINISH_STATE&&t.avail_in!==0)return err(t,Z_BUF_ERROR$1);if(a.status===INIT_STATE&&a.wrap===0&&(a.status=BUSY_STATE),a.status===INIT_STATE){let l=Z_DEFLATED$2+(a.w_bits-8<<4)<<8,u=-1;if(a.strategy>=Z_HUFFMAN_ONLY||a.level<2?u=0:a.level<6?u=1:a.level===6?u=2:u=3,l|=u<<6,a.strstart!==0&&(l|=PRESET_DICT),l+=31-l%31,putShortMSB(a,l),a.strstart!==0&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),t.adler=1,a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===GZIP_STATE){if(t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead)put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,a.gzhead.time&255),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,a.gzhead.extra.length&255),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE;else if(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===EXTRA_STATE){if(a.gzhead.extra){let l=a.pending,u=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+u>a.pending_buf_size;){let d=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+d),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex+=d,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0,u-=d}let c=new Uint8Array(a.gzhead.extra);a.pending_buf.set(c.subarray(a.gzindex,a.gzindex+u),a.pending),a.pending+=u,a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=NAME_STATE}if(a.status===NAME_STATE){if(a.gzhead.name){let l=a.pending,u;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0}a.gzindex<a.gzhead.name.length?u=a.gzhead.name.charCodeAt(a.gzindex++)&255:u=0,put_byte(a,u)}while(u!==0);a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=COMMENT_STATE}if(a.status===COMMENT_STATE){if(a.gzhead.comment){let l=a.pending,u;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0}a.gzindex<a.gzhead.comment.length?u=a.gzhead.comment.charCodeAt(a.gzindex++)&255:u=0,put_byte(a,u)}while(u!==0);a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l))}a.status=HCRC_STATE}if(a.status===HCRC_STATE){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(flush_pending(t),a.pending!==0))return a.last_flush=-1,Z_OK$3;put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),t.adler=0}if(a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(t.avail_in!==0||a.lookahead!==0||n!==Z_NO_FLUSH$2&&a.status!==FINISH_STATE){let l=a.level===0?deflate_stored(a,n):a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,n):a.strategy===Z_RLE?deflate_rle(a,n):configuration_table[a.level].func(a,n);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(a.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return t.avail_out===0&&(a.last_flush=-1),Z_OK$3;if(l===BS_BLOCK_DONE&&(n===Z_PARTIAL_FLUSH?_tr_align(a):n!==Z_BLOCK$1&&(_tr_stored_block(a,0,0,!1),n===Z_FULL_FLUSH$1&&(zero(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),t.avail_out===0))return a.last_flush=-1,Z_OK$3}return n!==Z_FINISH$3?Z_OK$3:a.wrap<=0?Z_STREAM_END$3:(a.wrap===2?(put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,t.total_in&255),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=t=>{if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const n=t.state.status;return t.state=null,n===BUSY_STATE?err(t,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(t,n)=>{let a=n.length;if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const s=t.state,l=s.wrap;if(l===2||l===1&&s.status!==INIT_STATE||s.lookahead)return Z_STREAM_ERROR$2;if(l===1&&(t.adler=adler32_1(t.adler,n,a,0)),s.wrap=0,a>=s.w_size){l===0&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0);let Ct=new Uint8Array(s.w_size);Ct.set(n.subarray(a-s.w_size,a),0),n=Ct,a=s.w_size}const u=t.avail_in,c=t.next_in,d=t.input;for(t.avail_in=a,t.next_in=0,t.input=n,fill_window(s);s.lookahead>=MIN_MATCH;){let Ct=s.strstart,ar=s.lookahead-(MIN_MATCH-1);do s.ins_h=HASH(s,s.ins_h,s.window[Ct+MIN_MATCH-1]),s.prev[Ct&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=Ct,Ct++;while(--ar);s.strstart=Ct,s.lookahead=MIN_MATCH-1,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,t.next_in=c,t.input=d,t.avail_in=u,s.wrap=l,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var assign$1=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const s in a)_has(a,s)&&(t[s]=a[s])}}return t},flattenChunks=t=>{let n=0;for(let s=0,l=t.length;s<l;s++)n+=t[s].length;const a=new Uint8Array(n);for(let s=0,l=0,u=t.length;s<u;s++){let c=t[s];a.set(c,l),l+=c.length}return a},common$1={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let t=0;t<256;t++)_utf8len[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,a,s,l,u,c=t.length,d=0;for(l=0;l<c;l++)a=t.charCodeAt(l),(a&64512)===55296&&l+1<c&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),d+=a<128?1:a<2048?2:a<65536?3:4;for(n=new Uint8Array(d),u=0,l=0;u<d;l++)a=t.charCodeAt(l),(a&64512)===55296&&l+1<c&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),a<128?n[u++]=a:a<2048?(n[u++]=192|a>>>6,n[u++]=128|a&63):a<65536?(n[u++]=224|a>>>12,n[u++]=128|a>>>6&63,n[u++]=128|a&63):(n[u++]=240|a>>>18,n[u++]=128|a>>>12&63,n[u++]=128|a>>>6&63,n[u++]=128|a&63);return n};const buf2binstring=(t,n)=>{if(n<65534&&t.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let a="";for(let s=0;s<n;s++)a+=String.fromCharCode(t[s]);return a};var buf2string=(t,n)=>{const a=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let s,l;const u=new Array(a*2);for(l=0,s=0;s<a;){let c=t[s++];if(c<128){u[l++]=c;continue}let d=_utf8len[c];if(d>4){u[l++]=65533,s+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&s<a;)c=c<<6|t[s++]&63,d--;if(d>1){u[l++]=65533;continue}c<65536?u[l++]=c:(c-=65536,u[l++]=55296|c>>10&1023,u[l++]=56320|c&1023)}return buf2binstring(u,l)},utf8border=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let a=n-1;for(;a>=0&&(t[a]&192)===128;)a--;return a<0||a===0?n:a+_utf8len[t[a]]>n?a:n},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(t){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=deflate_1$2.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(a!==Z_OK$2)throw new Error(messages[a]);if(n.header&&deflate_1$2.deflateSetHeader(this.strm,n.header),n.dictionary){let s;if(typeof n.dictionary=="string"?s=strings.string2buf(n.dictionary):toString$1.call(n.dictionary)==="[object ArrayBuffer]"?s=new Uint8Array(n.dictionary):s=n.dictionary,a=deflate_1$2.deflateSetDictionary(this.strm,s),a!==Z_OK$2)throw new Error(messages[a]);this._dict_set=!0}}Deflate$1.prototype.push=function(t,n){const a=this.strm,s=this.options.chunkSize;let l,u;if(this.ended)return!1;for(n===~~n?u=n:u=n===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof t=="string"?a.input=strings.string2buf(t):toString$1.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(u===Z_SYNC_FLUSH||u===Z_FULL_FLUSH)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(l=deflate_1$2.deflate(a,u),l===Z_STREAM_END$2)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),l=deflate_1$2.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===Z_OK$2;if(a.avail_out===0){this.onData(a.output);continue}if(u>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(t){this.chunks.push(t)};Deflate$1.prototype.onEnd=function(t){t===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function deflate$1(t,n){const a=new Deflate$1(n);if(a.push(t,!0),a.err)throw a.msg||messages[a.err];return a.result}function deflateRaw$1(t,n){return n=n||{},n.raw=!0,deflate$1(t,n)}function gzip$1(t,n){return n=n||{},n.gzip=!0,deflate$1(t,n)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(n,a){let s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx;const mx=n.state;s=n.next_in,fx=n.input,l=s+(n.avail_in-5),u=n.next_out,dx=n.output,c=u-(a-n.avail_out),d=u+(n.avail_out-257),Ct=mx.dmax,ar=mx.wsize,en=mx.whave,tn=mx.wnext,on=mx.window,cn=mx.hold,dn=mx.bits,Cn=mx.lencode,In=mx.distcode,ix=(1<<mx.lenbits)-1,ax=(1<<mx.distbits)-1;e:do{dn<15&&(cn+=fx[s++]<<dn,dn+=8,cn+=fx[s++]<<dn,dn+=8),ox=Cn[cn&ix];t:for(;;){if(sx=ox>>>24,cn>>>=sx,dn-=sx,sx=ox>>>16&255,sx===0)dx[u++]=ox&65535;else if(sx&16){ux=ox&65535,sx&=15,sx&&(dn<sx&&(cn+=fx[s++]<<dn,dn+=8),ux+=cn&(1<<sx)-1,cn>>>=sx,dn-=sx),dn<15&&(cn+=fx[s++]<<dn,dn+=8,cn+=fx[s++]<<dn,dn+=8),ox=In[cn&ax];r:for(;;){if(sx=ox>>>24,cn>>>=sx,dn-=sx,sx=ox>>>16&255,sx&16){if(cx=ox&65535,sx&=15,dn<sx&&(cn+=fx[s++]<<dn,dn+=8,dn<sx&&(cn+=fx[s++]<<dn,dn+=8)),cx+=cn&(1<<sx)-1,cx>Ct){n.msg="invalid distance too far back",mx.mode=BAD$1;break e}if(cn>>>=sx,dn-=sx,sx=u-c,cx>sx){if(sx=cx-sx,sx>en&&mx.sane){n.msg="invalid distance too far back",mx.mode=BAD$1;break e}if(hx=0,gx=on,tn===0){if(hx+=ar-sx,sx<ux){ux-=sx;do dx[u++]=on[hx++];while(--sx);hx=u-cx,gx=dx}}else if(tn<sx){if(hx+=ar+tn-sx,sx-=tn,sx<ux){ux-=sx;do dx[u++]=on[hx++];while(--sx);if(hx=0,tn<ux){sx=tn,ux-=sx;do dx[u++]=on[hx++];while(--sx);hx=u-cx,gx=dx}}}else if(hx+=tn-sx,sx<ux){ux-=sx;do dx[u++]=on[hx++];while(--sx);hx=u-cx,gx=dx}for(;ux>2;)dx[u++]=gx[hx++],dx[u++]=gx[hx++],dx[u++]=gx[hx++],ux-=3;ux&&(dx[u++]=gx[hx++],ux>1&&(dx[u++]=gx[hx++]))}else{hx=u-cx;do dx[u++]=dx[hx++],dx[u++]=dx[hx++],dx[u++]=dx[hx++],ux-=3;while(ux>2);ux&&(dx[u++]=dx[hx++],ux>1&&(dx[u++]=dx[hx++]))}}else if((sx&64)===0){ox=In[(ox&65535)+(cn&(1<<sx)-1)];continue r}else{n.msg="invalid distance code",mx.mode=BAD$1;break e}break}}else if((sx&64)===0){ox=Cn[(ox&65535)+(cn&(1<<sx)-1)];continue t}else if(sx&32){mx.mode=TYPE$1;break e}else{n.msg="invalid literal/length code",mx.mode=BAD$1;break e}break}}while(s<l&&u<d);ux=dn>>3,s-=ux,dn-=ux<<3,cn&=(1<<dn)-1,n.next_in=s,n.next_out=u,n.avail_in=s<l?5+(l-s):5-(s-l),n.avail_out=u<d?257+(d-u):257-(u-d),mx.hold=cn,mx.bits=dn};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(t,n,a,s,l,u,c,d)=>{const Ct=d.bits;let ar=0,en=0,tn=0,on=0,cn=0,dn=0,Cn=0,In=0,ix=0,ax=0,ox,sx,ux,cx,hx,gx=null,fx;const dx=new Uint16Array(MAXBITS+1),mx=new Uint16Array(MAXBITS+1);let vx=null,bx,xx,_x;for(ar=0;ar<=MAXBITS;ar++)dx[ar]=0;for(en=0;en<s;en++)dx[n[a+en]]++;for(cn=Ct,on=MAXBITS;on>=1&&dx[on]===0;on--);if(cn>on&&(cn=on),on===0)return l[u++]=1<<24|64<<16|0,l[u++]=1<<24|64<<16|0,d.bits=1,0;for(tn=1;tn<on&&dx[tn]===0;tn++);for(cn<tn&&(cn=tn),In=1,ar=1;ar<=MAXBITS;ar++)if(In<<=1,In-=dx[ar],In<0)return-1;if(In>0&&(t===CODES$1||on!==1))return-1;for(mx[1]=0,ar=1;ar<MAXBITS;ar++)mx[ar+1]=mx[ar]+dx[ar];for(en=0;en<s;en++)n[a+en]!==0&&(c[mx[n[a+en]]++]=en);if(t===CODES$1?(gx=vx=c,fx=20):t===LENS$1?(gx=lbase,vx=lext,fx=257):(gx=dbase,vx=dext,fx=0),ax=0,en=0,ar=tn,hx=u,dn=cn,Cn=0,ux=-1,ix=1<<cn,cx=ix-1,t===LENS$1&&ix>ENOUGH_LENS$1||t===DISTS$1&&ix>ENOUGH_DISTS$1)return 1;for(;;){bx=ar-Cn,c[en]+1<fx?(xx=0,_x=c[en]):c[en]>=fx?(xx=vx[c[en]-fx],_x=gx[c[en]-fx]):(xx=96,_x=0),ox=1<<ar-Cn,sx=1<<dn,tn=sx;do sx-=ox,l[hx+(ax>>Cn)+sx]=bx<<24|xx<<16|_x|0;while(sx!==0);for(ox=1<<ar-1;ax&ox;)ox>>=1;if(ox!==0?(ax&=ox-1,ax+=ox):ax=0,en++,--dx[ar]===0){if(ar===on)break;ar=n[a+c[en]]}if(ar>cn&&(ax&cx)!==ux){for(Cn===0&&(Cn=cn),hx+=tn,dn=ar-Cn,In=1<<dn;dn+Cn<on&&(In-=dx[dn+Cn],!(In<=0));)dn++,In<<=1;if(ix+=1<<dn,t===LENS$1&&ix>ENOUGH_LENS$1||t===DISTS$1&&ix>ENOUGH_DISTS$1)return 1;ux=ax&cx,l[ux]=cn<<24|dn<<16|hx-u|0}}return ax!==0&&(l[hx+ax]=ar-Cn<<24|64<<16|0),d.bits=cn,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT$1=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<HEAD||n.mode>SYNC?1:0},inflateResetKeep=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=HEAD,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(ENOUGH_LENS),n.distcode=n.distdyn=new Int32Array(ENOUGH_DISTS),n.sane=1,n.back=-1,Z_OK$1},inflateReset=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,inflateResetKeep(t)},inflateReset2=(t,n)=>{let a;if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const s=t.state;return n<0?(a=0,n=-n):(a=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Z_STREAM_ERROR$1:(s.window!==null&&s.wbits!==n&&(s.window=null),s.wrap=a,s.wbits=n,inflateReset(t))},inflateInit2=(t,n)=>{if(!t)return Z_STREAM_ERROR$1;const a=new InflateState;t.state=a,a.strm=t,a.window=null,a.mode=HEAD;const s=inflateReset2(t,n);return s!==Z_OK$1&&(t.state=null),s},inflateInit=t=>inflateInit2(t,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=t=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(inftrees(LENS,t.lens,0,288,lenfix,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;inftrees(DISTS,t.lens,0,32,distfix,0,t.work,{bits:5}),virgin=!1}t.lencode=lenfix,t.lenbits=9,t.distcode=distfix,t.distbits=5},updatewindow=(t,n,a,s)=>{let l;const u=t.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),s>=u.wsize?(u.window.set(n.subarray(a-u.wsize,a),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>s&&(l=s),u.window.set(n.subarray(a-s,a-s+l),u.wnext),s-=l,s?(u.window.set(n.subarray(a-s,a),0),u.wnext=s,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0},inflate$2=(t,n)=>{let a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In=0,ix,ax,ox,sx,ux,cx,hx,gx;const fx=new Uint8Array(4);let dx,mx;const vx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(t)||!t.output||!t.input&&t.avail_in!==0)return Z_STREAM_ERROR$1;a=t.state,a.mode===TYPE&&(a.mode=TYPEDO),c=t.next_out,l=t.output,Ct=t.avail_out,u=t.next_in,s=t.input,d=t.avail_in,ar=a.hold,en=a.bits,tn=d,on=Ct,gx=Z_OK$1;e:for(;;)switch(a.mode){case HEAD:if(a.wrap===0){a.mode=TYPEDO;break}for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.wrap&2&&ar===35615){a.wbits===0&&(a.wbits=15),a.check=0,fx[0]=ar&255,fx[1]=ar>>>8&255,a.check=crc32_1(a.check,fx,2,0),ar=0,en=0,a.mode=FLAGS;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((ar&255)<<8)+(ar>>8))%31){t.msg="incorrect header check",a.mode=BAD;break}if((ar&15)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(ar>>>=4,en-=4,hx=(ar&15)+8,a.wbits===0&&(a.wbits=hx),hx>15||hx>a.wbits){t.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=ar&512?DICTID:TYPE,ar=0,en=0;break;case FLAGS:for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.flags=ar,(a.flags&255)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(a.flags&57344){t.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=ar>>8&1),a.flags&512&&a.wrap&4&&(fx[0]=ar&255,fx[1]=ar>>>8&255,a.check=crc32_1(a.check,fx,2,0)),ar=0,en=0,a.mode=TIME;case TIME:for(;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.head&&(a.head.time=ar),a.flags&512&&a.wrap&4&&(fx[0]=ar&255,fx[1]=ar>>>8&255,fx[2]=ar>>>16&255,fx[3]=ar>>>24&255,a.check=crc32_1(a.check,fx,4,0)),ar=0,en=0,a.mode=OS;case OS:for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.head&&(a.head.xflags=ar&255,a.head.os=ar>>8),a.flags&512&&a.wrap&4&&(fx[0]=ar&255,fx[1]=ar>>>8&255,a.check=crc32_1(a.check,fx,2,0)),ar=0,en=0,a.mode=EXLEN;case EXLEN:if(a.flags&1024){for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.length=ar,a.head&&(a.head.extra_len=ar),a.flags&512&&a.wrap&4&&(fx[0]=ar&255,fx[1]=ar>>>8&255,a.check=crc32_1(a.check,fx,2,0)),ar=0,en=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(a.flags&1024&&(cn=a.length,cn>d&&(cn=d),cn&&(a.head&&(hx=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(s.subarray(u,u+cn),hx)),a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,cn,u)),d-=cn,u+=cn,a.length-=cn),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(a.flags&2048){if(d===0)break e;cn=0;do hx=s[u+cn++],a.head&&hx&&a.length<65536&&(a.head.name+=String.fromCharCode(hx));while(hx&&cn<d);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,cn,u)),d-=cn,u+=cn,hx)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT$1;case COMMENT$1:if(a.flags&4096){if(d===0)break e;cn=0;do hx=s[u+cn++],a.head&&hx&&a.length<65536&&(a.head.comment+=String.fromCharCode(hx));while(hx&&cn<d);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,cn,u)),d-=cn,u+=cn,hx)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(a.flags&512){for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.wrap&4&&ar!==(a.check&65535)){t.msg="header crc mismatch",a.mode=BAD;break}ar=0,en=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}t.adler=a.check=zswap32(ar),ar=0,en=0,a.mode=DICT;case DICT:if(a.havedict===0)return t.next_out=c,t.avail_out=Ct,t.next_in=u,t.avail_in=d,a.hold=ar,a.bits=en,Z_NEED_DICT$1;t.adler=a.check=1,a.mode=TYPE;case TYPE:if(n===Z_BLOCK||n===Z_TREES)break e;case TYPEDO:if(a.last){ar>>>=en&7,en-=en&7,a.mode=CHECK;break}for(;en<3;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}switch(a.last=ar&1,ar>>>=1,en-=1,ar&3){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,n===Z_TREES){ar>>>=2,en-=2;break e}break;case 2:a.mode=TABLE;break;case 3:t.msg="invalid block type",a.mode=BAD}ar>>>=2,en-=2;break;case STORED:for(ar>>>=en&7,en-=en&7;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if((ar&65535)!==(ar>>>16^65535)){t.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=ar&65535,ar=0,en=0,a.mode=COPY_,n===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(cn=a.length,cn){if(cn>d&&(cn=d),cn>Ct&&(cn=Ct),cn===0)break e;l.set(s.subarray(u,u+cn),c),d-=cn,u+=cn,Ct-=cn,c+=cn,a.length-=cn;break}a.mode=TYPE;break;case TABLE:for(;en<14;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.nlen=(ar&31)+257,ar>>>=5,en-=5,a.ndist=(ar&31)+1,ar>>>=5,en-=5,a.ncode=(ar&15)+4,ar>>>=4,en-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;en<3;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.lens[vx[a.have++]]=ar&7,ar>>>=3,en-=3}for(;a.have<19;)a.lens[vx[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,dx={bits:a.lenbits},gx=inftrees(CODES,a.lens,0,19,a.lencode,0,a.work,dx),a.lenbits=dx.bits,gx){t.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;In=a.lencode[ar&(1<<a.lenbits)-1],ix=In>>>24,ax=In>>>16&255,ox=In&65535,!(ix<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(ox<16)ar>>>=ix,en-=ix,a.lens[a.have++]=ox;else{if(ox===16){for(mx=ix+2;en<mx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(ar>>>=ix,en-=ix,a.have===0){t.msg="invalid bit length repeat",a.mode=BAD;break}hx=a.lens[a.have-1],cn=3+(ar&3),ar>>>=2,en-=2}else if(ox===17){for(mx=ix+3;en<mx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=ix,en-=ix,hx=0,cn=3+(ar&7),ar>>>=3,en-=3}else{for(mx=ix+7;en<mx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=ix,en-=ix,hx=0,cn=11+(ar&127),ar>>>=7,en-=7}if(a.have+cn>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=BAD;break}for(;cn--;)a.lens[a.have++]=hx}}if(a.mode===BAD)break;if(a.lens[256]===0){t.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,dx={bits:a.lenbits},gx=inftrees(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,dx),a.lenbits=dx.bits,gx){t.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,dx={bits:a.distbits},gx=inftrees(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,dx),a.distbits=dx.bits,gx){t.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,n===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(d>=6&&Ct>=258){t.next_out=c,t.avail_out=Ct,t.next_in=u,t.avail_in=d,a.hold=ar,a.bits=en,inffast(t,on),c=t.next_out,l=t.output,Ct=t.avail_out,u=t.next_in,s=t.input,d=t.avail_in,ar=a.hold,en=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;In=a.lencode[ar&(1<<a.lenbits)-1],ix=In>>>24,ax=In>>>16&255,ox=In&65535,!(ix<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(ax&&(ax&240)===0){for(sx=ix,ux=ax,cx=ox;In=a.lencode[cx+((ar&(1<<sx+ux)-1)>>sx)],ix=In>>>24,ax=In>>>16&255,ox=In&65535,!(sx+ix<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=sx,en-=sx,a.back+=sx}if(ar>>>=ix,en-=ix,a.back+=ix,a.length=ox,ax===0){a.mode=LIT;break}if(ax&32){a.back=-1,a.mode=TYPE;break}if(ax&64){t.msg="invalid literal/length code",a.mode=BAD;break}a.extra=ax&15,a.mode=LENEXT;case LENEXT:if(a.extra){for(mx=a.extra;en<mx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.length+=ar&(1<<a.extra)-1,ar>>>=a.extra,en-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;In=a.distcode[ar&(1<<a.distbits)-1],ix=In>>>24,ax=In>>>16&255,ox=In&65535,!(ix<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if((ax&240)===0){for(sx=ix,ux=ax,cx=ox;In=a.distcode[cx+((ar&(1<<sx+ux)-1)>>sx)],ix=In>>>24,ax=In>>>16&255,ox=In&65535,!(sx+ix<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=sx,en-=sx,a.back+=sx}if(ar>>>=ix,en-=ix,a.back+=ix,ax&64){t.msg="invalid distance code",a.mode=BAD;break}a.offset=ox,a.extra=ax&15,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(mx=a.extra;en<mx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.offset+=ar&(1<<a.extra)-1,ar>>>=a.extra,en-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(Ct===0)break e;if(cn=on-Ct,a.offset>cn){if(cn=a.offset-cn,cn>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=BAD;break}cn>a.wnext?(cn-=a.wnext,dn=a.wsize-cn):dn=a.wnext-cn,cn>a.length&&(cn=a.length),Cn=a.window}else Cn=l,dn=c-a.offset,cn=a.length;cn>Ct&&(cn=Ct),Ct-=cn,a.length-=cn;do l[c++]=Cn[dn++];while(--cn);a.length===0&&(a.mode=LEN);break;case LIT:if(Ct===0)break e;l[c++]=a.length,Ct--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;en<32;){if(d===0)break e;d--,ar|=s[u++]<<en,en+=8}if(on-=Ct,t.total_out+=on,a.total+=on,a.wrap&4&&on&&(t.adler=a.check=a.flags?crc32_1(a.check,l,on,c-on):adler32_1(a.check,l,on,c-on)),on=Ct,a.wrap&4&&(a.flags?ar:zswap32(ar))!==a.check){t.msg="incorrect data check",a.mode=BAD;break}ar=0,en=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.wrap&4&&ar!==(a.total&4294967295)){t.msg="incorrect length check",a.mode=BAD;break}ar=0,en=0}a.mode=DONE;case DONE:gx=Z_STREAM_END$1;break e;case BAD:gx=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return t.next_out=c,t.avail_out=Ct,t.next_in=u,t.avail_in=d,a.hold=ar,a.bits=en,(a.wsize||on!==t.avail_out&&a.mode<BAD&&(a.mode<CHECK||n!==Z_FINISH$1))&&updatewindow(t,t.output,t.next_out,on-t.avail_out),tn-=t.avail_in,on-=t.avail_out,t.total_in+=tn,t.total_out+=on,a.total+=on,a.wrap&4&&on&&(t.adler=a.check=a.flags?crc32_1(a.check,l,on,t.next_out-on):adler32_1(a.check,l,on,t.next_out-on)),t.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(tn===0&&on===0||n===Z_FINISH$1)&&gx===Z_OK$1&&(gx=Z_BUF_ERROR),gx},inflateEnd=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;let n=t.state;return n.window&&(n.window=null),t.state=null,Z_OK$1},inflateGetHeader=(t,n)=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const a=t.state;return(a.wrap&2)===0?Z_STREAM_ERROR$1:(a.head=n,n.done=!1,Z_OK$1)},inflateSetDictionary=(t,n)=>{const a=n.length;let s,l,u;return inflateStateCheck(t)||(s=t.state,s.wrap!==0&&s.mode!==DICT)?Z_STREAM_ERROR$1:s.mode===DICT&&(l=1,l=adler32_1(l,n,a,0),l!==s.check)?Z_DATA_ERROR$1:(u=updatewindow(t,n,a,a),u?(s.mode=MEM,Z_MEM_ERROR$1):(s.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(t){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=inflate_1$2.inflateInit2(this.strm,n.windowBits);if(a!==Z_OK)throw new Error(messages[a]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=strings.string2buf(n.dictionary):toString.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=inflate_1$2.inflateSetDictionary(this.strm,n.dictionary),a!==Z_OK)))throw new Error(messages[a])}Inflate$1.prototype.push=function(t,n){const a=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let u,c,d;if(this.ended)return!1;for(n===~~n?c=n:c=n===!0?Z_FINISH:Z_NO_FLUSH,toString.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),u=inflate_1$2.inflate(a,c),u===Z_NEED_DICT&&l&&(u=inflate_1$2.inflateSetDictionary(a,l),u===Z_OK?u=inflate_1$2.inflate(a,c):u===Z_DATA_ERROR&&(u=Z_NEED_DICT));a.avail_in>0&&u===Z_STREAM_END&&a.state.wrap>0&&t[a.next_in]!==0;)inflate_1$2.inflateReset(a),u=inflate_1$2.inflate(a,c);switch(u){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(u),this.ended=!0,!1}if(d=a.avail_out,a.next_out&&(a.avail_out===0||u===Z_STREAM_END))if(this.options.to==="string"){let Ct=strings.utf8border(a.output,a.next_out),ar=a.next_out-Ct,en=strings.buf2string(a.output,Ct);a.next_out=ar,a.avail_out=s-ar,ar&&a.output.set(a.output.subarray(Ct,Ct+ar),0),this.onData(en)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(u===Z_OK&&d===0)){if(u===Z_STREAM_END)return u=inflate_1$2.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(t){this.chunks.push(t)};Inflate$1.prototype.onEnd=function(t){t===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function inflate$1(t,n){const a=new Inflate$1(n);if(a.push(t),a.err)throw a.msg||messages[a.err];return a.result}function inflateRaw$1(t,n){return n=n||{},n.raw=!0,inflate$1(t,n)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function hn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Vl(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Oo(t){let n,a,s;t.length!==2?(n=hn,a=(d,Ct)=>hn(t(d),Ct),s=(d,Ct)=>t(d)-Ct):(n=t===hn||t===Vl?t:$g,a=t,s=t);function l(d,Ct,ar=0,en=d.length){if(ar<en){if(n(Ct,Ct)!==0)return en;do{const tn=ar+en>>>1;a(d[tn],Ct)<0?ar=tn+1:en=tn}while(ar<en)}return ar}function u(d,Ct,ar=0,en=d.length){if(ar<en){if(n(Ct,Ct)!==0)return en;do{const tn=ar+en>>>1;a(d[tn],Ct)<=0?ar=tn+1:en=tn}while(ar<en)}return ar}function c(d,Ct,ar=0,en=d.length){const tn=l(d,Ct,ar,en-1);return tn>ar&&s(d[tn-1],Ct)>-s(d[tn],Ct)?tn-1:tn}return{left:l,center:c,right:u}}function $g(){return 0}function ji(t){return t===null?NaN:+t}function*Tg(t,n){if(n===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(yield a);else{let a=-1;for(let s of t)(s=n(s,++a,t))!=null&&(s=+s)>=s&&(yield s)}}const Gl=Oo(hn),Ft=Gl.right,Ag=Gl.left,Sg=Oo(ji).center;function Eg(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let a=t.length;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid length");if(!a||!n)return t;const s=lf(n),l=t.slice();return s(t,l,0,a,1),s(l,t,0,a,1),s(t,l,0,a,1),t}const Zl=Ql(lf),kg=Ql(Ng);function Ql(t){return function(n,a,s=a){if(!((a=+a)>=0))throw new RangeError("invalid rx");if(!((s=+s)>=0))throw new RangeError("invalid ry");let{data:l,width:u,height:c}=n;if(!((u=Math.floor(u))>=0))throw new RangeError("invalid width");if(!((c=Math.floor(c!==void 0?c:l.length/u))>=0))throw new RangeError("invalid height");if(!u||!c||!a&&!s)return n;const d=a&&t(a),Ct=s&&t(s),ar=l.slice();return d&&Ct?(we$1(d,ar,l,u,c),we$1(d,l,ar,u,c),we$1(d,ar,l,u,c),xe(Ct,l,ar,u,c),xe(Ct,ar,l,u,c),xe(Ct,l,ar,u,c)):d?(we$1(d,l,ar,u,c),we$1(d,ar,l,u,c),we$1(d,l,ar,u,c)):Ct&&(xe(Ct,l,ar,u,c),xe(Ct,ar,l,u,c),xe(Ct,l,ar,u,c)),n}}function we$1(t,n,a,s,l){for(let u=0,c=s*l;u<c;)t(n,a,u,u+=s,1)}function xe(t,n,a,s,l){for(let u=0,c=s*l;u<s;++u)t(n,a,u,u+c,s)}function Ng(t){const n=lf(t);return(a,s,l,u,c)=>{l<<=2,u<<=2,c<<=2,n(a,s,l+0,u+0,c),n(a,s,l+1,u+1,c),n(a,s,l+2,u+2,c),n(a,s,l+3,u+3,c)}}function lf(t){const n=Math.floor(t);if(n===t)return Rg(t);const a=t-n,s=2*t+1;return(l,u,c,d,Ct)=>{if(!((d-=Ct)>=c))return;let ar=n*u[c];const en=Ct*n,tn=en+Ct;for(let on=c,cn=c+en;on<cn;on+=Ct)ar+=u[Math.min(d,on)];for(let on=c,cn=d;on<=cn;on+=Ct)ar+=u[Math.min(d,on+en)],l[on]=(ar+a*(u[Math.max(c,on-tn)]+u[Math.min(d,on+tn)]))/s,ar-=u[Math.max(c,on-en)]}}function Rg(t){const n=2*t+1;return(a,s,l,u,c)=>{if(!((u-=c)>=l))return;let d=t*s[l];const Ct=c*t;for(let ar=l,en=l+Ct;ar<en;ar+=c)d+=s[Math.min(u,ar)];for(let ar=l,en=u;ar<=en;ar+=c)d+=s[Math.min(u,ar+Ct)],a[ar]=d/n,d-=s[Math.max(l,ar-Ct)]}}function Yo(t,n){let a=0;if(n===void 0)for(let s of t)s!=null&&(s=+s)>=s&&++a;else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(l=+l)>=l&&++a}return a}function Ig(t){return t.length|0}function Cg(t){return!(t>0)}function Pg(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Dg(t){return n=>t(...n)}function zg(...t){const n=typeof t[t.length-1]=="function"&&Dg(t.pop());t=t.map(Pg);const a=t.map(Ig),s=t.length-1,l=new Array(s+1).fill(0),u=[];if(s<0||a.some(Cg))return u;for(;;){u.push(l.map((d,Ct)=>t[Ct][d]));let c=s;for(;++l[c]===a[c];){if(c===0)return n?u.map(n):u;l[c--]=0}}}function Og(t,n){var a=0,s=0;return Float64Array.from(t,n===void 0?l=>a+=+l||0:l=>a+=+n(l,s++,t)||0)}function Kl(t,n){let a=0,s,l=0,u=0;if(n===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(s=c-l,l+=s/++a,u+=s*(c-l));else{let c=-1;for(let d of t)(d=n(d,++c,t))!=null&&(d=+d)>=d&&(s=d-l,l+=s/++a,u+=s*(d-l))}if(a>1)return u/(a-1)}function Jl(t,n){const a=Kl(t,n);return a&&Math.sqrt(a)}function Er(t,n){let a,s;if(n===void 0)for(const l of t)l!=null&&(a===void 0?l>=l&&(a=s=l):(a>l&&(a=l),s<l&&(s=l)));else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(a===void 0?u>=u&&(a=s=u):(a>u&&(a=u),s<u&&(s=u)))}return[a,s]}class bn{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const a=this._partials;let s=0;for(let l=0;l<this._n&&l<32;l++){const u=a[l],c=n+u,d=Math.abs(n)<Math.abs(u)?n-(c-u):u-(c-n);d&&(a[s++]=d),n=c}return a[s]=n,this._n=s+1,this}valueOf(){const n=this._partials;let a=this._n,s,l,u,c=0;if(a>0){for(c=n[--a];a>0&&(s=c,l=n[--a],c=s+l,u=l-(c-s),!u););a>0&&(u<0&&n[a-1]<0||u>0&&n[a-1]>0)&&(l=u*2,s=c+l,l==s-c&&(c=s))}return c}}function Yg(t,n){const a=new bn;if(n===void 0)for(let s of t)(s=+s)&&a.add(s);else{let s=-1;for(let l of t)(l=+n(l,++s,t))&&a.add(l)}return+a}function Fg(t,n){const a=new bn;let s=-1;return Float64Array.from(t,n===void 0?l=>a.add(+l||0):l=>a.add(+n(l,++s,t)||0))}class Pr extends Map{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const[s,l]of n)this.set(s,l)}get(n){return super.get(hu(this,n))}has(n){return super.has(hu(this,n))}set(n,a){return super.set(nh(this,n),a)}delete(n){return super.delete(th(this,n))}}class ie extends Set{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const s of n)this.add(s)}has(n){return super.has(hu(this,n))}add(n){return super.add(nh(this,n))}delete(n){return super.delete(th(this,n))}}function hu({_intern:t,_key:n},a){const s=n(a);return t.has(s)?t.get(s):a}function nh({_intern:t,_key:n},a){const s=n(a);return t.has(s)?t.get(s):(t.set(s,a),a)}function th({_intern:t,_key:n},a){const s=n(a);return t.has(s)&&(a=t.get(s),t.delete(s)),a}function eh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qe(t){return t}function rh(t,...n){return er(t,qe,qe,n)}function ih(t,...n){return er(t,Array.from,qe,n)}function oh(t,n){for(let a=1,s=n.length;a<s;++a)t=t.flatMap(l=>l.pop().map(([u,c])=>[...l,u,c]));return t}function qg(t,...n){return oh(ih(t,...n),n)}function Lg(t,n,...a){return oh(uh(t,n,...a),a)}function ah(t,n,...a){return er(t,qe,n,a)}function uh(t,n,...a){return er(t,Array.from,n,a)}function Bg(t,...n){return er(t,qe,fh,n)}function Ug(t,...n){return er(t,Array.from,fh,n)}function fh(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function er(t,n,a,s){return(function l(u,c){if(c>=s.length)return a(u);const d=new Pr,Ct=s[c++];let ar=-1;for(const en of u){const tn=Ct(en,++ar,u),on=d.get(tn);on?on.push(en):d.set(tn,[en])}for(const[en,tn]of d)d.set(en,l(tn,c));return n(d)})(t,0)}function ch(t,n){return Array.from(n,a=>t[a])}function du(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[a]=n;if(a&&a.length!==2||n.length>1){const s=Uint32Array.from(t,(l,u)=>u);return n.length>1?(n=n.map(l=>t.map(l)),s.sort((l,u)=>{for(const c of n){const d=Le(c[l],c[u]);if(d)return d}})):(a=t.map(a),s.sort((l,u)=>Le(a[l],a[u]))),ch(t,s)}return t.sort(hf(a))}function hf(t=hn){if(t===hn)return Le;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,a)=>{const s=t(n,a);return s||s===0?s:(t(a,a)===0)-(t(n,n)===0)}}function Le(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function Xg(t,n,a){return(n.length!==2?du(ah(t,n,a),(([s,l],[u,c])=>hn(l,c)||hn(s,u))):du(rh(t,a),(([s,l],[u,c])=>n(l,c)||hn(s,u)))).map(([s])=>s)}var Hg=Array.prototype,jg=Hg.slice;function Aa(t){return()=>t}const Wg=Math.sqrt(50),Vg=Math.sqrt(10),Gg=Math.sqrt(2);function Wi(t,n,a){const s=(n-t)/Math.max(0,a),l=Math.floor(Math.log10(s)),u=s/Math.pow(10,l),c=u>=Wg?10:u>=Vg?5:u>=Gg?2:1;let d,Ct,ar;return l<0?(ar=Math.pow(10,-l)/c,d=Math.round(t*ar),Ct=Math.round(n*ar),d/ar<t&&++d,Ct/ar>n&&--Ct,ar=-ar):(ar=Math.pow(10,l)*c,d=Math.round(t/ar),Ct=Math.round(n/ar),d*ar<t&&++d,Ct*ar>n&&--Ct),Ct<d&&.5<=a&&a<2?Wi(t,n,a*2):[d,Ct,ar]}function oe$1(t,n,a){if(n=+n,t=+t,a=+a,!(a>0))return[];if(t===n)return[t];const s=n<t,[l,u,c]=s?Wi(n,t,a):Wi(t,n,a);if(!(u>=l))return[];const d=u-l+1,Ct=new Array(d);if(s)if(c<0)for(let ar=0;ar<d;++ar)Ct[ar]=(u-ar)/-c;else for(let ar=0;ar<d;++ar)Ct[ar]=(u-ar)*c;else if(c<0)for(let ar=0;ar<d;++ar)Ct[ar]=(l+ar)/-c;else for(let ar=0;ar<d;++ar)Ct[ar]=(l+ar)*c;return Ct}function ae$1(t,n,a){return n=+n,t=+t,a=+a,Wi(t,n,a)[2]}function Vi(t,n,a){n=+n,t=+t,a=+a;const s=n<t,l=s?ae$1(n,t,a):ae$1(t,n,a);return(s?-1:1)*(l<0?1/-l:l)}function df(t,n,a){let s;for(;;){const l=ae$1(t,n,a);if(l===s||l===0||!isFinite(l))return[t,n];l>0?(t=Math.floor(t/l)*l,n=Math.ceil(n/l)*l):l<0&&(t=Math.ceil(t*l)/l,n=Math.floor(n*l)/l),s=l}}function gf(t){return Math.max(1,Math.ceil(Math.log(Yo(t))/Math.LN2)+1)}function Nc(){var t=qe,n=Er,a=gf;function s(l){Array.isArray(l)||(l=Array.from(l));var u,c=l.length,d,Ct,ar=new Array(c);for(u=0;u<c;++u)ar[u]=t(l[u],u,l);var en=n(ar),tn=en[0],on=en[1],cn=a(ar,tn,on);if(!Array.isArray(cn)){const ox=on,sx=+cn;if(n===Er&&([tn,on]=df(tn,on,sx)),cn=oe$1(tn,on,sx),cn[0]<=tn&&(Ct=ae$1(tn,on,sx)),cn[cn.length-1]>=on)if(ox>=on&&n===Er){const ux=ae$1(tn,on,sx);isFinite(ux)&&(ux>0?on=(Math.floor(on/ux)+1)*ux:ux<0&&(on=(Math.ceil(on*-ux)+1)/-ux))}else cn.pop()}for(var dn=cn.length,Cn=0,In=dn;cn[Cn]<=tn;)++Cn;for(;cn[In-1]>on;)--In;(Cn||In<dn)&&(cn=cn.slice(Cn,In),dn=In-Cn);var ix=new Array(dn+1),ax;for(u=0;u<=dn;++u)ax=ix[u]=[],ax.x0=u>0?cn[u-1]:tn,ax.x1=u<dn?cn[u]:on;if(isFinite(Ct)){if(Ct>0)for(u=0;u<c;++u)(d=ar[u])!=null&&tn<=d&&d<=on&&ix[Math.min(dn,Math.floor((d-tn)/Ct))].push(l[u]);else if(Ct<0){for(u=0;u<c;++u)if((d=ar[u])!=null&&tn<=d&&d<=on){const ox=Math.floor((tn-d)*Ct);ix[Math.min(dn,ox+(cn[ox]<=d))].push(l[u])}}}else for(u=0;u<c;++u)(d=ar[u])!=null&&tn<=d&&d<=on&&ix[Ft(cn,d,0,dn)].push(l[u]);return ix}return s.value=function(l){return arguments.length?(t=typeof l=="function"?l:Aa(l),s):t},s.domain=function(l){return arguments.length?(n=typeof l=="function"?l:Aa([l[0],l[1]]),s):n},s.thresholds=function(l){return arguments.length?(a=typeof l=="function"?l:Aa(Array.isArray(l)?jg.call(l):l),s):a},s}function Dr(t,n){let a;if(n===void 0)for(const s of t)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(a<l||a===void 0&&l>=l)&&(a=l)}return a}function pf(t,n){let a,s=-1,l=-1;if(n===void 0)for(const u of t)++l,u!=null&&(a<u||a===void 0&&u>=u)&&(a=u,s=l);else for(let u of t)(u=n(u,++l,t))!=null&&(a<u||a===void 0&&u>=u)&&(a=u,s=l);return s}function Gi(t,n){let a;if(n===void 0)for(const s of t)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(a>l||a===void 0&&l>=l)&&(a=l)}return a}function mf(t,n){let a,s=-1,l=-1;if(n===void 0)for(const u of t)++l,u!=null&&(a>u||a===void 0&&u>=u)&&(a=u,s=l);else for(let u of t)(u=n(u,++l,t))!=null&&(a>u||a===void 0&&u>=u)&&(a=u,s=l);return s}function Fo(t,n,a=0,s=1/0,l){if(n=Math.floor(n),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(t.length-1,s)),!(a<=n&&n<=s))return t;for(l=l===void 0?Le:hf(l);s>a;){if(s-a>600){const Ct=s-a+1,ar=n-a+1,en=Math.log(Ct),tn=.5*Math.exp(2*en/3),on=.5*Math.sqrt(en*tn*(Ct-tn)/Ct)*(ar-Ct/2<0?-1:1),cn=Math.max(a,Math.floor(n-ar*tn/Ct+on)),dn=Math.min(s,Math.floor(n+(Ct-ar)*tn/Ct+on));Fo(t,n,cn,dn,l)}const u=t[n];let c=a,d=s;for(ur(t,a,n),l(t[s],u)>0&&ur(t,a,s);c<d;){for(ur(t,c,d),++c,--d;l(t[c],u)<0;)++c;for(;l(t[d],u)>0;)--d}l(t[a],u)===0?ur(t,a,d):(++d,ur(t,d,s)),d<=n&&(a=d+1),n<=d&&(s=d-1)}return t}function ur(t,n,a){const s=t[n];t[n]=t[a],t[a]=s}function sh(t,n=hn){let a,s=!1;if(n.length===1){let l;for(const u of t){const c=n(u);(s?hn(c,l)>0:hn(c,c)===0)&&(a=u,l=c,s=!0)}}else for(const l of t)(s?n(l,a)>0:n(l,l)===0)&&(a=l,s=!0);return a}function zr(t,n,a){if(t=Float64Array.from(Tg(t,a)),!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return Gi(t);if(n>=1)return Dr(t);var s,l=(s-1)*n,u=Math.floor(l),c=Dr(Fo(t,u).subarray(0,u+1)),d=Gi(t.subarray(u+1));return c+(d-c)*(l-u)}}function lh(t,n,a=ji){if(!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return+a(t[0],0,t);if(n>=1)return+a(t[s-1],s-1,t);var s,l=(s-1)*n,u=Math.floor(l),c=+a(t[u],u,t),d=+a(t[u+1],u+1,t);return c+(d-c)*(l-u)}}function hh(t,n,a=ji){if(!isNaN(n=+n)){if(s=Float64Array.from(t,(d,Ct)=>ji(a(t[Ct],Ct,t))),n<=0)return mf(s);if(n>=1)return pf(s);var s,l=Uint32Array.from(t,(d,Ct)=>Ct),u=s.length-1,c=Math.floor(u*n);return Fo(l,c,0,u,(d,Ct)=>Le(s[d],s[Ct])),c=sh(l.subarray(0,c+1),d=>s[d]),c>=0?c:-1}}function Zg(t,n,a){const s=Yo(t),l=zr(t,.75)-zr(t,.25);return s&&l?Math.ceil((a-n)/(2*l*Math.pow(s,-1/3))):1}function Qg(t,n,a){const s=Yo(t),l=Jl(t);return s&&l?Math.ceil((a-n)*Math.cbrt(s)/(3.49*l)):1}function Kg(t,n){let a=0,s=0;if(n===void 0)for(let l of t)l!=null&&(l=+l)>=l&&(++a,s+=l);else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(u=+u)>=u&&(++a,s+=u)}if(a)return s/a}function Jg(t,n){return zr(t,.5,n)}function np(t,n){return hh(t,.5,n)}function*tp(t){for(const n of t)yield*n}function yf(t){return Array.from(tp(t))}function ep(t,n){const a=new Pr;if(n===void 0)for(let u of t)u!=null&&u>=u&&a.set(u,(a.get(u)||0)+1);else{let u=-1;for(let c of t)(c=n(c,++u,t))!=null&&c>=c&&a.set(c,(a.get(c)||0)+1)}let s,l=0;for(const[u,c]of a)c>l&&(l=c,s=u);return s}function rp(t,n=ip){const a=[];let s,l=!1;for(const u of t)l&&a.push(n(s,u)),s=u,l=!0;return a}function ip(t,n){return[t,n]}function zt(t,n,a){t=+t,n=+n,a=(l=arguments.length)<2?(n=t,t=0,1):l<3?1:+a;for(var s=-1,l=Math.max(0,Math.ceil((n-t)/a))|0,u=new Array(l);++s<l;)u[s]=t+s*a;return u}function op(t,n=hn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let a=Array.from(t);const s=new Float64Array(a.length);n.length!==2&&(a=a.map(n),n=hn);const l=(d,Ct)=>n(a[d],a[Ct]);let u,c;return t=Uint32Array.from(a,(d,Ct)=>Ct),t.sort(n===hn?(d,Ct)=>Le(a[d],a[Ct]):hf(l)),t.forEach((d,Ct)=>{const ar=l(d,u===void 0?d:u);ar>=0?((u===void 0||ar>0)&&(u=d,c=Ct),s[d]=c):s[d]=NaN}),s}function ap(t,n=hn){let a,s=!1;if(n.length===1){let l;for(const u of t){const c=n(u);(s?hn(c,l)<0:hn(c,c)===0)&&(a=u,l=c,s=!0)}}else for(const l of t)(s?n(l,a)<0:n(l,l)===0)&&(a=l,s=!0);return a}function dh(t,n=hn){if(n.length===1)return mf(t,n);let a,s=-1,l=-1;for(const u of t)++l,(s<0?n(u,u)===0:n(u,a)<0)&&(a=u,s=l);return s}function up(t,n=hn){if(n.length===1)return pf(t,n);let a,s=-1,l=-1;for(const u of t)++l,(s<0?n(u,u)===0:n(u,a)>0)&&(a=u,s=l);return s}function fp(t,n){const a=dh(t,n);return a<0?void 0:a}const cp=gh(Math.random);function gh(t){return function(n,a=0,s=n.length){let l=s-(a=+a);for(;l;){const u=t()*l--|0,c=n[l+a];n[l+a]=n[u+a],n[u+a]=c}return n}}function sp(t,n){let a=0;if(n===void 0)for(let s of t)(s=+s)&&(a+=s);else{let s=-1;for(let l of t)(l=+n(l,++s,t))&&(a+=l)}return a}function ph(t){if(!(u=t.length))return[];for(var n=-1,a=Gi(t,lp),s=new Array(a);++n<a;)for(var l=-1,u,c=s[n]=new Array(u);++l<u;)c[l]=t[l][n];return s}function lp(t){return t.length}function hp(){return ph(arguments)}function dp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const s of t)if(!n(s,++a,t))return!1;return!0}function gp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const s of t)if(n(s,++a,t))return!0;return!1}function pp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");const a=[];let s=-1;for(const l of t)n(l,++s,t)&&a.push(l);return a}function mp(t,n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(t,(a,s)=>n(a,s,t))}function yp(t,n,a){if(typeof n!="function")throw new TypeError("reducer is not a function");const s=t[Symbol.iterator]();let l,u,c=-1;if(arguments.length<3){if({done:l,value:a}=s.next(),l)return;++c}for(;{done:l,value:u}=s.next(),!l;)a=n(a,u,++c,t);return a}function _p(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function vp(t,...n){t=new ie(t);for(const a of n)for(const s of a)t.delete(s);return t}function bp(t,n){const a=n[Symbol.iterator](),s=new ie;for(const l of t){if(s.has(l))return!1;let u,c;for(;({value:u,done:c}=a.next())&&!c;){if(Object.is(l,u))return!1;s.add(u)}}return!0}function wp(t,...n){t=new ie(t),n=n.map(xp);e:for(const a of t)for(const s of n)if(!s.has(a)){t.delete(a);continue e}return t}function xp(t){return t instanceof ie?t:new ie(t)}function mh(t,n){const a=t[Symbol.iterator](),s=new Set;for(const l of n){const u=Rc(l);if(s.has(u))continue;let c,d;for(;{value:c,done:d}=a.next();){if(d)return!1;const Ct=Rc(c);if(s.add(Ct),Object.is(u,Ct))break}}return!0}function Rc(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Mp(t,n){return mh(n,t)}function $p(...t){const n=new ie;for(const a of t)for(const s of a)n.add(s);return n}function Tp(t){return t}var Pi=1,Di=2,gu=3,mr=4,Ic=1e-6;function Ap(t){return"translate("+t+",0)"}function Sp(t){return"translate(0,"+t+")"}function Ep(t){return n=>+t(n)}function kp(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),a=>+t(a)+n}function Np(){return!this.__axis}function qo(t,n){var a=[],s=null,l=null,u=6,c=6,d=3,Ct=typeof window<"u"&&window.devicePixelRatio>1?0:.5,ar=t===Pi||t===mr?-1:1,en=t===mr||t===Di?"x":"y",tn=t===Pi||t===gu?Ap:Sp;function on(cn){var dn=s??(n.ticks?n.ticks.apply(n,a):n.domain()),Cn=l??(n.tickFormat?n.tickFormat.apply(n,a):Tp),In=Math.max(u,0)+d,ix=n.range(),ax=+ix[0]+Ct,ox=+ix[ix.length-1]+Ct,sx=(n.bandwidth?kp:Ep)(n.copy(),Ct),ux=cn.selection?cn.selection():cn,cx=ux.selectAll(".domain").data([null]),hx=ux.selectAll(".tick").data(dn,n).order(),gx=hx.exit(),fx=hx.enter().append("g").attr("class","tick"),dx=hx.select("line"),mx=hx.select("text");cx=cx.merge(cx.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),hx=hx.merge(fx),dx=dx.merge(fx.append("line").attr("stroke","currentColor").attr(en+"2",ar*u)),mx=mx.merge(fx.append("text").attr("fill","currentColor").attr(en,ar*In).attr("dy",t===Pi?"0em":t===gu?"0.71em":"0.32em")),cn!==ux&&(cx=cx.transition(cn),hx=hx.transition(cn),dx=dx.transition(cn),mx=mx.transition(cn),gx=gx.transition(cn).attr("opacity",Ic).attr("transform",function(vx){return isFinite(vx=sx(vx))?tn(vx+Ct):this.getAttribute("transform")}),fx.attr("opacity",Ic).attr("transform",function(vx){var bx=this.parentNode.__axis;return tn((bx&&isFinite(bx=bx(vx))?bx:sx(vx))+Ct)})),gx.remove(),cx.attr("d",t===mr||t===Di?c?"M"+ar*c+","+ax+"H"+Ct+"V"+ox+"H"+ar*c:"M"+Ct+","+ax+"V"+ox:c?"M"+ax+","+ar*c+"V"+Ct+"H"+ox+"V"+ar*c:"M"+ax+","+Ct+"H"+ox),hx.attr("opacity",1).attr("transform",function(vx){return tn(sx(vx)+Ct)}),dx.attr(en+"2",ar*u),mx.attr(en,ar*In).text(Cn),ux.filter(Np).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Di?"start":t===mr?"end":"middle"),ux.each(function(){this.__axis=sx})}return on.scale=function(cn){return arguments.length?(n=cn,on):n},on.ticks=function(){return a=Array.from(arguments),on},on.tickArguments=function(cn){return arguments.length?(a=cn==null?[]:Array.from(cn),on):a.slice()},on.tickValues=function(cn){return arguments.length?(s=cn==null?null:Array.from(cn),on):s&&s.slice()},on.tickFormat=function(cn){return arguments.length?(l=cn,on):l},on.tickSize=function(cn){return arguments.length?(u=c=+cn,on):u},on.tickSizeInner=function(cn){return arguments.length?(u=+cn,on):u},on.tickSizeOuter=function(cn){return arguments.length?(c=+cn,on):c},on.tickPadding=function(cn){return arguments.length?(d=+cn,on):d},on.offset=function(cn){return arguments.length?(Ct=+cn,on):Ct},on}function Rp(t){return qo(Pi,t)}function Ip(t){return qo(Di,t)}function Cp(t){return qo(gu,t)}function Pp(t){return qo(mr,t)}var Dp={value:()=>{}};function pe$1(){for(var t=0,n=arguments.length,a={},s;t<n;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new zi(a)}function zi(t){this._=t}function zp(t,n){return t.trim().split(/^|\s+/).map(function(a){var s="",l=a.indexOf(".");if(l>=0&&(s=a.slice(l+1),a=a.slice(0,l)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}zi.prototype=pe$1.prototype={constructor:zi,on:function(t,n){var a=this._,s=zp(t+"",a),l,u=-1,c=s.length;if(arguments.length<2){for(;++u<c;)if((l=(t=s[u]).type)&&(l=Op(a[l],t.name)))return l;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<c;)if(l=(t=s[u]).type)a[l]=Cc(a[l],t.name,n);else if(n==null)for(l in a)a[l]=Cc(a[l],t.name,null);return this},copy:function(){var t={},n=this._;for(var a in n)t[a]=n[a].slice();return new zi(t)},call:function(t,n){if((l=arguments.length-2)>0)for(var a=new Array(l),s=0,l,u;s<l;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],s=0,l=u.length;s<l;++s)u[s].value.apply(n,a)},apply:function(t,n,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],l=0,u=s.length;l<u;++l)s[l].value.apply(n,a)}};function Op(t,n){for(var a=0,s=t.length,l;a<s;++a)if((l=t[a]).name===n)return l.value}function Cc(t,n,a){for(var s=0,l=t.length;s<l;++s)if(t[s].name===n){t[s]=Dp,t=t.slice(0,s).concat(t.slice(s+1));break}return a!=null&&t.push({name:n,value:a}),t}var pu="http://www.w3.org/1999/xhtml";const mu={svg:"http://www.w3.org/2000/svg",xhtml:pu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kr(t){var n=t+="",a=n.indexOf(":");return a>=0&&(n=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),mu.hasOwnProperty(n)?{space:mu[n],local:t}:t}function Yp(t){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===pu&&n.documentElement.namespaceURI===pu?n.createElement(t):n.createElementNS(a,t)}}function Fp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Lo(t){var n=Kr(t);return(n.local?Fp:Yp)(n)}function qp(){}function Bo(t){return t==null?qp:function(){return this.querySelector(t)}}function Lp(t){typeof t!="function"&&(t=Bo(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,d=s[l]=new Array(c),Ct,ar,en=0;en<c;++en)(Ct=u[en])&&(ar=t.call(Ct,Ct.__data__,en,u))&&("__data__"in Ct&&(ar.__data__=Ct.__data__),d[en]=ar);return new qn(s,this._parents)}function yh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Bp(){return[]}function _f(t){return t==null?Bp:function(){return this.querySelectorAll(t)}}function Up(t){return function(){return yh(t.apply(this,arguments))}}function Xp(t){typeof t=="function"?t=Up(t):t=_f(t);for(var n=this._groups,a=n.length,s=[],l=[],u=0;u<a;++u)for(var c=n[u],d=c.length,Ct,ar=0;ar<d;++ar)(Ct=c[ar])&&(s.push(t.call(Ct,Ct.__data__,ar,c)),l.push(Ct));return new qn(s,l)}function vf(t){return function(){return this.matches(t)}}function _h(t){return function(n){return n.matches(t)}}var Hp=Array.prototype.find;function jp(t){return function(){return Hp.call(this.children,t)}}function Wp(){return this.firstElementChild}function Vp(t){return this.select(t==null?Wp:jp(typeof t=="function"?t:_h(t)))}var Gp=Array.prototype.filter;function Zp(){return Array.from(this.children)}function Qp(t){return function(){return Gp.call(this.children,t)}}function Kp(t){return this.selectAll(t==null?Zp:Qp(typeof t=="function"?t:_h(t)))}function Jp(t){typeof t!="function"&&(t=vf(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,d=s[l]=[],Ct,ar=0;ar<c;++ar)(Ct=u[ar])&&t.call(Ct,Ct.__data__,ar,u)&&d.push(Ct);return new qn(s,this._parents)}function vh(t){return new Array(t.length)}function n2(){return new qn(this._enter||this._groups.map(vh),this._parents)}function Zi(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Zi.prototype={constructor:Zi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function t2(t){return function(){return t}}function e2(t,n,a,s,l,u){for(var c=0,d,Ct=n.length,ar=u.length;c<ar;++c)(d=n[c])?(d.__data__=u[c],s[c]=d):a[c]=new Zi(t,u[c]);for(;c<Ct;++c)(d=n[c])&&(l[c]=d)}function r2(t,n,a,s,l,u,c){var d,Ct,ar=new Map,en=n.length,tn=u.length,on=new Array(en),cn;for(d=0;d<en;++d)(Ct=n[d])&&(on[d]=cn=c.call(Ct,Ct.__data__,d,n)+"",ar.has(cn)?l[d]=Ct:ar.set(cn,Ct));for(d=0;d<tn;++d)cn=c.call(t,u[d],d,u)+"",(Ct=ar.get(cn))?(s[d]=Ct,Ct.__data__=u[d],ar.delete(cn)):a[d]=new Zi(t,u[d]);for(d=0;d<en;++d)(Ct=n[d])&&ar.get(on[d])===Ct&&(l[d]=Ct)}function i2(t){return t.__data__}function o2(t,n){if(!arguments.length)return Array.from(this,i2);var a=n?r2:e2,s=this._parents,l=this._groups;typeof t!="function"&&(t=t2(t));for(var u=l.length,c=new Array(u),d=new Array(u),Ct=new Array(u),ar=0;ar<u;++ar){var en=s[ar],tn=l[ar],on=tn.length,cn=a2(t.call(en,en&&en.__data__,ar,s)),dn=cn.length,Cn=d[ar]=new Array(dn),In=c[ar]=new Array(dn),ix=Ct[ar]=new Array(on);a(en,tn,Cn,In,ix,cn,n);for(var ax=0,ox=0,sx,ux;ax<dn;++ax)if(sx=Cn[ax]){for(ax>=ox&&(ox=ax+1);!(ux=In[ox])&&++ox<dn;);sx._next=ux||null}}return c=new qn(c,s),c._enter=d,c._exit=Ct,c}function a2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function u2(){return new qn(this._exit||this._groups.map(vh),this._parents)}function f2(t,n,a){var s=this.enter(),l=this,u=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),n!=null&&(l=n(l),l&&(l=l.selection())),a==null?u.remove():a(u),s&&l?s.merge(l).order():l}function c2(t){for(var n=t.selection?t.selection():t,a=this._groups,s=n._groups,l=a.length,u=s.length,c=Math.min(l,u),d=new Array(l),Ct=0;Ct<c;++Ct)for(var ar=a[Ct],en=s[Ct],tn=ar.length,on=d[Ct]=new Array(tn),cn,dn=0;dn<tn;++dn)(cn=ar[dn]||en[dn])&&(on[dn]=cn);for(;Ct<l;++Ct)d[Ct]=a[Ct];return new qn(d,this._parents)}function s2(){for(var t=this._groups,n=-1,a=t.length;++n<a;)for(var s=t[n],l=s.length-1,u=s[l],c;--l>=0;)(c=s[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function l2(t){t||(t=h2);function n(tn,on){return tn&&on?t(tn.__data__,on.__data__):!tn-!on}for(var a=this._groups,s=a.length,l=new Array(s),u=0;u<s;++u){for(var c=a[u],d=c.length,Ct=l[u]=new Array(d),ar,en=0;en<d;++en)(ar=c[en])&&(Ct[en]=ar);Ct.sort(n)}return new qn(l,this._parents).order()}function h2(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function d2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function g2(){return Array.from(this)}function p2(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var s=t[n],l=0,u=s.length;l<u;++l){var c=s[l];if(c)return c}return null}function m2(){let t=0;for(const n of this)++t;return t}function y2(){return!this.node()}function _2(t){for(var n=this._groups,a=0,s=n.length;a<s;++a)for(var l=n[a],u=0,c=l.length,d;u<c;++u)(d=l[u])&&t.call(d,d.__data__,u,l);return this}function v2$1(t){return function(){this.removeAttribute(t)}}function b2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w2(t,n){return function(){this.setAttribute(t,n)}}function x2(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function M2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function $2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function T2(t,n){var a=Kr(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((n==null?a.local?b2:v2$1:typeof n=="function"?a.local?$2:M2:a.local?x2:w2)(a,n))}function bf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A2(t){return function(){this.style.removeProperty(t)}}function S2(t,n,a){return function(){this.style.setProperty(t,n,a)}}function E2(t,n,a){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function k2(t,n,a){return arguments.length>1?this.each((n==null?A2:typeof n=="function"?E2:S2)(t,n,a??"")):ue$1(this.node(),t)}function ue$1(t,n){return t.style.getPropertyValue(n)||bf(t).getComputedStyle(t,null).getPropertyValue(n)}function N2(t){return function(){delete this[t]}}function R2(t,n){return function(){this[t]=n}}function I2(t,n){return function(){var a=n.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function C2(t,n){return arguments.length>1?this.each((n==null?N2:typeof n=="function"?I2:R2)(t,n)):this.node()[t]}function bh(t){return t.trim().split(/^|\s+/)}function wf(t){return t.classList||new wh(t)}function wh(t){this._node=t,this._names=bh(t.getAttribute("class")||"")}wh.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xh(t,n){for(var a=wf(t),s=-1,l=n.length;++s<l;)a.add(n[s])}function Mh(t,n){for(var a=wf(t),s=-1,l=n.length;++s<l;)a.remove(n[s])}function P2(t){return function(){xh(this,t)}}function D2(t){return function(){Mh(this,t)}}function z2(t,n){return function(){(n.apply(this,arguments)?xh:Mh)(this,t)}}function O2(t,n){var a=bh(t+"");if(arguments.length<2){for(var s=wf(this.node()),l=-1,u=a.length;++l<u;)if(!s.contains(a[l]))return!1;return!0}return this.each((typeof n=="function"?z2:n?P2:D2)(a,n))}function Y2(){this.textContent=""}function F2(t){return function(){this.textContent=t}}function q2(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function L2(t){return arguments.length?this.each(t==null?Y2:(typeof t=="function"?q2:F2)(t)):this.node().textContent}function B2(){this.innerHTML=""}function U2(t){return function(){this.innerHTML=t}}function X2(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function H2(t){return arguments.length?this.each(t==null?B2:(typeof t=="function"?X2:U2)(t)):this.node().innerHTML}function j2(){this.nextSibling&&this.parentNode.appendChild(this)}function W2(){return this.each(j2)}function V2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G2(){return this.each(V2)}function Z2(t){var n=typeof t=="function"?t:Lo(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Q2(){return null}function K2(t,n){var a=typeof t=="function"?t:Lo(t),s=n==null?Q2:typeof n=="function"?n:Bo(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})}function J2(){var t=this.parentNode;t&&t.removeChild(this)}function nm(){return this.each(J2)}function tm(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function em(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function rm(t){return this.select(t?em:tm)}function im(t){return arguments.length?this.property("__data__",t):this.node().__data__}function om(t){return function(n){t.call(this,n,this.__data__)}}function am(t){return t.trim().split(/^|\s+/).map(function(n){var a="",s=n.indexOf(".");return s>=0&&(a=n.slice(s+1),n=n.slice(0,s)),{type:n,name:a}})}function um(t){return function(){var n=this.__on;if(n){for(var a=0,s=-1,l=n.length,u;a<l;++a)u=n[a],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):n[++s]=u;++s?n.length=s:delete this.__on}}}function fm(t,n,a){return function(){var s=this.__on,l,u=om(n);if(s){for(var c=0,d=s.length;c<d;++c)if((l=s[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=a),l.value=n;return}}this.addEventListener(t.type,u,a),l={type:t.type,name:t.name,value:n,listener:u,options:a},s?s.push(l):this.__on=[l]}}function cm(t,n,a){var s=am(t+""),l,u=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var Ct=0,ar=d.length,en;Ct<ar;++Ct)for(l=0,en=d[Ct];l<u;++l)if((c=s[l]).type===en.type&&c.name===en.name)return en.value}return}for(d=n?fm:um,l=0;l<u;++l)this.each(d(s[l],n,a));return this}function $h(t,n,a){var s=bf(t),l=s.CustomEvent;typeof l=="function"?l=new l(n,a):(l=s.document.createEvent("Event"),a?(l.initEvent(n,a.bubbles,a.cancelable),l.detail=a.detail):l.initEvent(n,!1,!1)),t.dispatchEvent(l)}function sm(t,n){return function(){return $h(this,t,n)}}function lm(t,n){return function(){return $h(this,t,n.apply(this,arguments))}}function hm(t,n){return this.each((typeof n=="function"?lm:sm)(t,n))}function*dm(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var s=t[n],l=0,u=s.length,c;l<u;++l)(c=s[l])&&(yield c)}var xf=[null];function qn(t,n){this._groups=t,this._parents=n}function me$1(){return new qn([[document.documentElement]],xf)}function gm(){return this}qn.prototype=me$1.prototype={constructor:qn,select:Lp,selectAll:Xp,selectChild:Vp,selectChildren:Kp,filter:Jp,data:o2,enter:n2,exit:u2,join:f2,merge:c2,selection:gm,order:s2,sort:l2,call:d2,nodes:g2,node:p2,size:m2,empty:y2,each:_2,attr:T2,style:k2,property:C2,classed:O2,text:L2,html:H2,raise:W2,lower:G2,append:Z2,insert:K2,remove:nm,clone:rm,datum:im,on:cm,dispatch:hm,[Symbol.iterator]:dm};function X$1(t){return typeof t=="string"?new qn([[document.querySelector(t)]],[document.documentElement]):new qn([[t]],xf)}function pm(t){return X$1(Lo(t).call(document.documentElement))}var mm=0;function Th(){return new yu}function yu(){this._="@"+(++mm).toString(36)}yu.prototype=Th.prototype={constructor:yu,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Ah(t){let n;for(;n=t.sourceEvent;)t=n;return t}function wn(t,n){if(t=Ah(t),n===void 0&&(n=t.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var s=a.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var l=n.getBoundingClientRect();return[t.clientX-l.left-n.clientLeft,t.clientY-l.top-n.clientTop]}}return[t.pageX,t.pageY]}function ym(t,n){return t.target&&(t=Ah(t),n===void 0&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,a=>wn(a,n))}function _m(t){return typeof t=="string"?new qn([document.querySelectorAll(t)],[document.documentElement]):new qn([yh(t)],xf)}const vm={passive:!1},Or={capture:!0,passive:!1};function Sa(t){t.stopImmediatePropagation()}function De(t){t.preventDefault(),t.stopImmediatePropagation()}function Uo(t){var n=t.document.documentElement,a=X$1(t).on("dragstart.drag",De,Or);"onselectstart"in n?a.on("selectstart.drag",De,Or):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xo(t,n){var a=t.document.documentElement,s=X$1(t).on("dragstart.drag",null);n&&(s.on("click.drag",De,Or),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in a?s.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const hi=t=>()=>t;function _u(t,{sourceEvent:n,subject:a,target:s,identifier:l,active:u,x:c,y:d,dx:Ct,dy:ar,dispatch:en}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:Ct,enumerable:!0,configurable:!0},dy:{value:ar,enumerable:!0,configurable:!0},_:{value:en}})}_u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function bm(t){return!t.ctrlKey&&!t.button}function wm(){return this.parentNode}function xm(t,n){return n??{x:t.x,y:t.y}}function Mm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sh(){var t=bm,n=wm,a=xm,s=Mm,l={},u=pe$1("start","drag","end"),c=0,d,Ct,ar,en,tn=0;function on(sx){sx.on("mousedown.drag",cn).filter(s).on("touchstart.drag",In).on("touchmove.drag",ix,vm).on("touchend.drag touchcancel.drag",ax).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function cn(sx,ux){if(!(en||!t.call(this,sx,ux))){var cx=ox(this,n.call(this,sx,ux),sx,ux,"mouse");cx&&(X$1(sx.view).on("mousemove.drag",dn,Or).on("mouseup.drag",Cn,Or),Uo(sx.view),Sa(sx),ar=!1,d=sx.clientX,Ct=sx.clientY,cx("start",sx))}}function dn(sx){if(De(sx),!ar){var ux=sx.clientX-d,cx=sx.clientY-Ct;ar=ux*ux+cx*cx>tn}l.mouse("drag",sx)}function Cn(sx){X$1(sx.view).on("mousemove.drag mouseup.drag",null),Xo(sx.view,ar),De(sx),l.mouse("end",sx)}function In(sx,ux){if(t.call(this,sx,ux)){var cx=sx.changedTouches,hx=n.call(this,sx,ux),gx=cx.length,fx,dx;for(fx=0;fx<gx;++fx)(dx=ox(this,hx,sx,ux,cx[fx].identifier,cx[fx]))&&(Sa(sx),dx("start",sx,cx[fx]))}}function ix(sx){var ux=sx.changedTouches,cx=ux.length,hx,gx;for(hx=0;hx<cx;++hx)(gx=l[ux[hx].identifier])&&(De(sx),gx("drag",sx,ux[hx]))}function ax(sx){var ux=sx.changedTouches,cx=ux.length,hx,gx;for(en&&clearTimeout(en),en=setTimeout(function(){en=null},500),hx=0;hx<cx;++hx)(gx=l[ux[hx].identifier])&&(Sa(sx),gx("end",sx,ux[hx]))}function ox(sx,ux,cx,hx,gx,fx){var dx=u.copy(),mx=wn(fx||cx,ux),vx,bx,xx;if((xx=a.call(sx,new _u("beforestart",{sourceEvent:cx,target:on,identifier:gx,active:c,x:mx[0],y:mx[1],dx:0,dy:0,dispatch:dx}),hx))!=null)return vx=xx.x-mx[0]||0,bx=xx.y-mx[1]||0,function _x(Ex,Tx,Cx){var Mx=mx,Ax;switch(Ex){case"start":l[gx]=_x,Ax=c++;break;case"end":delete l[gx],--c;case"drag":mx=wn(Cx||Tx,ux),Ax=c;break}dx.call(Ex,sx,new _u(Ex,{sourceEvent:Tx,subject:xx,target:on,identifier:gx,active:Ax,x:mx[0]+vx,y:mx[1]+bx,dx:mx[0]-Mx[0],dy:mx[1]-Mx[1],dispatch:dx}),hx)}}return on.filter=function(sx){return arguments.length?(t=typeof sx=="function"?sx:hi(!!sx),on):t},on.container=function(sx){return arguments.length?(n=typeof sx=="function"?sx:hi(sx),on):n},on.subject=function(sx){return arguments.length?(a=typeof sx=="function"?sx:hi(sx),on):a},on.touchable=function(sx){return arguments.length?(s=typeof sx=="function"?sx:hi(!!sx),on):s},on.on=function(){var sx=u.on.apply(u,arguments);return sx===u?on:sx},on.clickDistance=function(sx){return arguments.length?(tn=(sx=+sx)*sx,on):Math.sqrt(tn)},on}function rr(t,n,a){t.prototype=n.prototype=a,a.constructor=t}function Jr(t,n){var a=Object.create(t.prototype);for(var s in n)a[s]=n[s];return a}function Xt(){}var fe$1=.7,Be=1/fe$1,ze="\\s*([+-]?\\d+)\\s*",Yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$m=/^#([0-9a-f]{3,8})$/,Tm=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Am=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),Sm=new RegExp(`^rgba\\(${ze},${ze},${ze},${Yr}\\)$`),Em=new RegExp(`^rgba\\(${dt},${dt},${dt},${Yr}\\)$`),km=new RegExp(`^hsl\\(${Yr},${dt},${dt}\\)$`),Nm=new RegExp(`^hsla\\(${Yr},${dt},${dt},${Yr}\\)$`),Pc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rr(Xt,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dc,formatHex:Dc,formatHex8:Rm,formatHsl:Im,formatRgb:zc,toString:zc});function Dc(){return this.rgb().formatHex()}function Rm(){return this.rgb().formatHex8()}function Im(){return Eh(this).formatHsl()}function zc(){return this.rgb().formatRgb()}function qt(t){var n,a;return t=(t+"").trim().toLowerCase(),(n=$m.exec(t))?(a=n[1].length,n=parseInt(n[1],16),a===6?Oc(n):a===3?new xn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?di(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?di(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Tm.exec(t))?new xn(n[1],n[2],n[3],1):(n=Am.exec(t))?new xn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Sm.exec(t))?di(n[1],n[2],n[3],n[4]):(n=Em.exec(t))?di(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=km.exec(t))?qc(n[1],n[2]/100,n[3]/100,1):(n=Nm.exec(t))?qc(n[1],n[2]/100,n[3]/100,n[4]):Pc.hasOwnProperty(t)?Oc(Pc[t]):t==="transparent"?new xn(NaN,NaN,NaN,0):null}function Oc(t){return new xn(t>>16&255,t>>8&255,t&255,1)}function di(t,n,a,s){return s<=0&&(t=n=a=NaN),new xn(t,n,a,s)}function Mf(t){return t instanceof Xt||(t=qt(t)),t?(t=t.rgb(),new xn(t.r,t.g,t.b,t.opacity)):new xn}function Ue(t,n,a,s){return arguments.length===1?Mf(t):new xn(t,n,a,s??1)}function xn(t,n,a,s){this.r=+t,this.g=+n,this.b=+a,this.opacity=+s}rr(xn,Ue,Jr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fe$1:Math.pow(fe$1,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xn(te$1(this.r),te$1(this.g),te$1(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yc,formatHex:Yc,formatHex8:Cm,formatRgb:Fc,toString:Fc}));function Yc(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Cm(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fc(){const t=Qi(this.opacity);return`${t===1?"rgb(":"rgba("}${te$1(this.r)}, ${te$1(this.g)}, ${te$1(this.b)}${t===1?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function te$1(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return t=te$1(t),(t<16?"0":"")+t.toString(16)}function qc(t,n,a,s){return s<=0?t=n=a=NaN:a<=0||a>=1?t=n=NaN:n<=0&&(t=NaN),new rt$1(t,n,a,s)}function Eh(t){if(t instanceof rt$1)return new rt$1(t.h,t.s,t.l,t.opacity);if(t instanceof Xt||(t=qt(t)),!t)return new rt$1;if(t instanceof rt$1)return t;t=t.rgb();var n=t.r/255,a=t.g/255,s=t.b/255,l=Math.min(n,a,s),u=Math.max(n,a,s),c=NaN,d=u-l,Ct=(u+l)/2;return d?(n===u?c=(a-s)/d+(a<s)*6:a===u?c=(s-n)/d+2:c=(n-a)/d+4,d/=Ct<.5?u+l:2-u-l,c*=60):d=Ct>0&&Ct<1?0:c,new rt$1(c,d,Ct,t.opacity)}function Ki(t,n,a,s){return arguments.length===1?Eh(t):new rt$1(t,n,a,s??1)}function rt$1(t,n,a,s){this.h=+t,this.s=+n,this.l=+a,this.opacity=+s}rr(rt$1,Ki,Jr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe$1:Math.pow(fe$1,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*n,l=2*a-s;return new xn(Ea(t>=240?t-240:t+120,l,s),Ea(t,l,s),Ea(t<120?t+240:t-120,l,s),this.opacity)},clamp(){return new rt$1(Lc(this.h),gi(this.s),gi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${t===1?"hsl(":"hsla("}${Lc(this.h)}, ${gi(this.s)*100}%, ${gi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lc(t){return t=(t||0)%360,t<0?t+360:t}function gi(t){return Math.max(0,Math.min(1,t||0))}function Ea(t,n,a){return(t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n)*255}const kh=Math.PI/180,Nh=180/Math.PI,Ji=18,Rh=.96422,Ih=1,Ch=.82521,Ph=4/29,Oe=6/29,Dh=3*Oe*Oe,Pm=Oe*Oe*Oe;function zh(t){if(t instanceof at$1)return new at$1(t.l,t.a,t.b,t.opacity);if(t instanceof lt$1)return Yh(t);t instanceof xn||(t=Mf(t));var n=Ia(t.r),a=Ia(t.g),s=Ia(t.b),l=ka((.2225045*n+.7168786*a+.0606169*s)/Ih),u,c;return n===a&&a===s?u=c=l:(u=ka((.4360747*n+.3850649*a+.1430804*s)/Rh),c=ka((.0139322*n+.0971045*a+.7141733*s)/Ch)),new at$1(116*l-16,500*(u-l),200*(l-c),t.opacity)}function Dm(t,n){return new at$1(t,0,0,n??1)}function no(t,n,a,s){return arguments.length===1?zh(t):new at$1(t,n,a,s??1)}function at$1(t,n,a,s){this.l=+t,this.a=+n,this.b=+a,this.opacity=+s}rr(at$1,no,Jr(Xt,{brighter(t){return new at$1(this.l+Ji*(t??1),this.a,this.b,this.opacity)},darker(t){return new at$1(this.l-Ji*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,a=isNaN(this.b)?t:t-this.b/200;return n=Rh*Na(n),t=Ih*Na(t),a=Ch*Na(a),new xn(Ra(3.1338561*n-1.6168667*t-.4906146*a),Ra(-.9787684*n+1.9161415*t+.033454*a),Ra(.0719453*n-.2289914*t+1.4052427*a),this.opacity)}}));function ka(t){return t>Pm?Math.pow(t,1/3):t/Dh+Ph}function Na(t){return t>Oe?t*t*t:Dh*(t-Ph)}function Ra(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ia(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oh(t){if(t instanceof lt$1)return new lt$1(t.h,t.c,t.l,t.opacity);if(t instanceof at$1||(t=zh(t)),t.a===0&&t.b===0)return new lt$1(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Nh;return new lt$1(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zm(t,n,a,s){return arguments.length===1?Oh(t):new lt$1(a,n,t,s??1)}function to(t,n,a,s){return arguments.length===1?Oh(t):new lt$1(t,n,a,s??1)}function lt$1(t,n,a,s){this.h=+t,this.c=+n,this.l=+a,this.opacity=+s}function Yh(t){if(isNaN(t.h))return new at$1(t.l,0,0,t.opacity);var n=t.h*kh;return new at$1(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}rr(lt$1,to,Jr(Xt,{brighter(t){return new lt$1(this.h,this.c,this.l+Ji*(t??1),this.opacity)},darker(t){return new lt$1(this.h,this.c,this.l-Ji*(t??1),this.opacity)},rgb(){return Yh(this).rgb()}}));var Fh=-.14861,$f=1.78277,Tf=-.29227,Ho=-.90649,Fr=1.97294,Bc=Fr*Ho,Uc=Fr*$f,Xc=$f*Tf-Ho*Fh;function Om(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);t instanceof xn||(t=Mf(t));var n=t.r/255,a=t.g/255,s=t.b/255,l=(Xc*s+Bc*n-Uc*a)/(Xc+Bc-Uc),u=s-l,c=(Fr*(a-l)-Tf*u)/Ho,d=Math.sqrt(c*c+u*u)/(Fr*l*(1-l)),Ct=d?Math.atan2(c,u)*Nh-120:NaN;return new ee(Ct<0?Ct+360:Ct,d,l,t.opacity)}function ut(t,n,a,s){return arguments.length===1?Om(t):new ee(t,n,a,s??1)}function ee(t,n,a,s){this.h=+t,this.s=+n,this.l=+a,this.opacity=+s}rr(ee,ut,Jr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe$1:Math.pow(fe$1,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*kh,n=+this.l,a=isNaN(this.s)?0:this.s*n*(1-n),s=Math.cos(t),l=Math.sin(t);return new xn(255*(n+a*(Fh*s+$f*l)),255*(n+a*(Tf*s+Ho*l)),255*(n+a*(Fr*s)),this.opacity)}}));function qh(t,n,a,s,l){var u=t*t,c=u*t;return((1-3*t+3*u-c)*n+(4-6*u+3*c)*a+(1+3*t+3*u-3*c)*s+c*l)/6}function Lh(t){var n=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,n-1):Math.floor(a*n),l=t[s],u=t[s+1],c=s>0?t[s-1]:2*l-u,d=s<n-1?t[s+2]:2*u-l;return qh((a-s/n)*n,c,l,u,d)}}function Bh(t){var n=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*n),l=t[(s+n-1)%n],u=t[s%n],c=t[(s+1)%n],d=t[(s+2)%n];return qh((a-s/n)*n,l,u,c,d)}}const jo=t=>()=>t;function Uh(t,n){return function(a){return t+a*n}}function Ym(t,n,a){return t=Math.pow(t,a),n=Math.pow(n,a)-t,a=1/a,function(s){return Math.pow(t+s*n,a)}}function Wo(t,n){var a=n-t;return a?Uh(t,a>180||a<-180?a-360*Math.round(a/360):a):jo(isNaN(t)?n:t)}function Fm(t){return(t=+t)==1?Mn:function(n,a){return a-n?Ym(n,a,t):jo(isNaN(n)?a:n)}}function Mn(t,n){var a=n-t;return a?Uh(t,a):jo(isNaN(t)?n:t)}const qr=(function t(n){var a=Fm(n);function s(l,u){var c=a((l=Ue(l)).r,(u=Ue(u)).r),d=a(l.g,u.g),Ct=a(l.b,u.b),ar=Mn(l.opacity,u.opacity);return function(en){return l.r=c(en),l.g=d(en),l.b=Ct(en),l.opacity=ar(en),l+""}}return s.gamma=t,s})(1);function Xh(t){return function(n){var a=n.length,s=new Array(a),l=new Array(a),u=new Array(a),c,d;for(c=0;c<a;++c)d=Ue(n[c]),s[c]=d.r||0,l[c]=d.g||0,u[c]=d.b||0;return s=t(s),l=t(l),u=t(u),d.opacity=1,function(Ct){return d.r=s(Ct),d.g=l(Ct),d.b=u(Ct),d+""}}}var Hh=Xh(Lh),qm=Xh(Bh);function Af(t,n){n||(n=[]);var a=t?Math.min(n.length,t.length):0,s=n.slice(),l;return function(u){for(l=0;l<a;++l)s[l]=t[l]*(1-u)+n[l]*u;return s}}function jh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lm(t,n){return(jh(n)?Af:Wh)(t,n)}function Wh(t,n){var a=n?n.length:0,s=t?Math.min(a,t.length):0,l=new Array(s),u=new Array(a),c;for(c=0;c<s;++c)l[c]=Ht(t[c],n[c]);for(;c<a;++c)u[c]=n[c];return function(d){for(c=0;c<s;++c)u[c]=l[c](d);return u}}function Vh(t,n){var a=new Date;return t=+t,n=+n,function(s){return a.setTime(t*(1-s)+n*s),a}}function Kn(t,n){return t=+t,n=+n,function(a){return t*(1-a)+n*a}}function Gh(t,n){var a={},s={},l;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(l in n)l in t?a[l]=Ht(t[l],n[l]):s[l]=n[l];return function(u){for(l in a)s[l]=a[l](u);return s}}var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ca=new RegExp(vu.source,"g");function Bm(t){return function(){return t}}function Um(t){return function(n){return t(n)+""}}function Sf(t,n){var a=vu.lastIndex=Ca.lastIndex=0,s,l,u,c=-1,d=[],Ct=[];for(t=t+"",n=n+"";(s=vu.exec(t))&&(l=Ca.exec(n));)(u=l.index)>a&&(u=n.slice(a,u),d[c]?d[c]+=u:d[++c]=u),(s=s[0])===(l=l[0])?d[c]?d[c]+=l:d[++c]=l:(d[++c]=null,Ct.push({i:c,x:Kn(s,l)})),a=Ca.lastIndex;return a<n.length&&(u=n.slice(a),d[c]?d[c]+=u:d[++c]=u),d.length<2?Ct[0]?Um(Ct[0].x):Bm(n):(n=Ct.length,function(ar){for(var en=0,tn;en<n;++en)d[(tn=Ct[en]).i]=tn.x(ar);return d.join("")})}function Ht(t,n){var a=typeof n,s;return n==null||a==="boolean"?jo(n):(a==="number"?Kn:a==="string"?(s=qt(n))?(n=s,qr):Sf:n instanceof qt?qr:n instanceof Date?Vh:jh(n)?Af:Array.isArray(n)?Wh:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Gh:Kn)(t,n)}function Xm(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}function Hm(t,n){var a=Wo(+t,+n);return function(s){var l=a(s);return l-360*Math.floor(l/360)}}function Vo(t,n){return t=+t,n=+n,function(a){return Math.round(t*(1-a)+n*a)}}var Hc=180/Math.PI,bu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zh(t,n,a,s,l,u){var c,d,Ct;return(c=Math.sqrt(t*t+n*n))&&(t/=c,n/=c),(Ct=t*a+n*s)&&(a-=t*Ct,s-=n*Ct),(d=Math.sqrt(a*a+s*s))&&(a/=d,s/=d,Ct/=d),t*s<n*a&&(t=-t,n=-n,Ct=-Ct,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(n,t)*Hc,skewX:Math.atan(Ct)*Hc,scaleX:c,scaleY:d}}var pi;function jm(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?bu:Zh(n.a,n.b,n.c,n.d,n.e,n.f)}function Wm(t){return t==null||(pi||(pi=document.createElementNS("http://www.w3.org/2000/svg","g")),pi.setAttribute("transform",t),!(t=pi.transform.baseVal.consolidate()))?bu:(t=t.matrix,Zh(t.a,t.b,t.c,t.d,t.e,t.f))}function Qh(t,n,a,s){function l(ar){return ar.length?ar.pop()+" ":""}function u(ar,en,tn,on,cn,dn){if(ar!==tn||en!==on){var Cn=cn.push("translate(",null,n,null,a);dn.push({i:Cn-4,x:Kn(ar,tn)},{i:Cn-2,x:Kn(en,on)})}else(tn||on)&&cn.push("translate("+tn+n+on+a)}function c(ar,en,tn,on){ar!==en?(ar-en>180?en+=360:en-ar>180&&(ar+=360),on.push({i:tn.push(l(tn)+"rotate(",null,s)-2,x:Kn(ar,en)})):en&&tn.push(l(tn)+"rotate("+en+s)}function d(ar,en,tn,on){ar!==en?on.push({i:tn.push(l(tn)+"skewX(",null,s)-2,x:Kn(ar,en)}):en&&tn.push(l(tn)+"skewX("+en+s)}function Ct(ar,en,tn,on,cn,dn){if(ar!==tn||en!==on){var Cn=cn.push(l(cn)+"scale(",null,",",null,")");dn.push({i:Cn-4,x:Kn(ar,tn)},{i:Cn-2,x:Kn(en,on)})}else(tn!==1||on!==1)&&cn.push(l(cn)+"scale("+tn+","+on+")")}return function(ar,en){var tn=[],on=[];return ar=t(ar),en=t(en),u(ar.translateX,ar.translateY,en.translateX,en.translateY,tn,on),c(ar.rotate,en.rotate,tn,on),d(ar.skewX,en.skewX,tn,on),Ct(ar.scaleX,ar.scaleY,en.scaleX,en.scaleY,tn,on),ar=en=null,function(cn){for(var dn=-1,Cn=on.length,In;++dn<Cn;)tn[(In=on[dn]).i]=In.x(cn);return tn.join("")}}}var Kh=Qh(jm,"px, ","px)","deg)"),Jh=Qh(Wm,", ",")",")"),Vm=1e-12;function jc(t){return((t=Math.exp(t))+1/t)/2}function Gm(t){return((t=Math.exp(t))-1/t)/2}function Zm(t){return((t=Math.exp(2*t))-1)/(t+1)}const n0=(function t(n,a,s){function l(u,c){var d=u[0],Ct=u[1],ar=u[2],en=c[0],tn=c[1],on=c[2],cn=en-d,dn=tn-Ct,Cn=cn*cn+dn*dn,In,ix;if(Cn<Vm)ix=Math.log(on/ar)/n,In=function(hx){return[d+hx*cn,Ct+hx*dn,ar*Math.exp(n*hx*ix)]};else{var ax=Math.sqrt(Cn),ox=(on*on-ar*ar+s*Cn)/(2*ar*a*ax),sx=(on*on-ar*ar-s*Cn)/(2*on*a*ax),ux=Math.log(Math.sqrt(ox*ox+1)-ox),cx=Math.log(Math.sqrt(sx*sx+1)-sx);ix=(cx-ux)/n,In=function(hx){var gx=hx*ix,fx=jc(ux),dx=ar/(a*ax)*(fx*Zm(n*gx+ux)-Gm(ux));return[d+dx*cn,Ct+dx*dn,ar*fx/jc(n*gx+ux)]}}return In.duration=ix*1e3*n/Math.SQRT2,In}return l.rho=function(u){var c=Math.max(.001,+u),d=c*c,Ct=d*d;return t(c,d,Ct)},l})(Math.SQRT2,2,4);function t0(t){return function(n,a){var s=t((n=Ki(n)).h,(a=Ki(a)).h),l=Mn(n.s,a.s),u=Mn(n.l,a.l),c=Mn(n.opacity,a.opacity);return function(d){return n.h=s(d),n.s=l(d),n.l=u(d),n.opacity=c(d),n+""}}}const Qm=t0(Wo);var Km=t0(Mn);function Jm(t,n){var a=Mn((t=no(t)).l,(n=no(n)).l),s=Mn(t.a,n.a),l=Mn(t.b,n.b),u=Mn(t.opacity,n.opacity);return function(c){return t.l=a(c),t.a=s(c),t.b=l(c),t.opacity=u(c),t+""}}function e0(t){return function(n,a){var s=t((n=to(n)).h,(a=to(a)).h),l=Mn(n.c,a.c),u=Mn(n.l,a.l),c=Mn(n.opacity,a.opacity);return function(d){return n.h=s(d),n.c=l(d),n.l=u(d),n.opacity=c(d),n+""}}}const ny=e0(Wo);var ty=e0(Mn);function r0(t){return(function n(a){a=+a;function s(l,u){var c=t((l=ut(l)).h,(u=ut(u)).h),d=Mn(l.s,u.s),Ct=Mn(l.l,u.l),ar=Mn(l.opacity,u.opacity);return function(en){return l.h=c(en),l.s=d(en),l.l=Ct(Math.pow(en,a)),l.opacity=ar(en),l+""}}return s.gamma=n,s})(1)}const ey=r0(Wo);var Go=r0(Mn);function i0(t,n){n===void 0&&(n=t,t=Ht);for(var a=0,s=n.length-1,l=n[0],u=new Array(s<0?0:s);a<s;)u[a]=t(l,l=n[++a]);return function(c){var d=Math.max(0,Math.min(s-1,Math.floor(c*=s)));return u[d](c-d)}}function ry(t,n){for(var a=new Array(n),s=0;s<n;++s)a[s]=t(s/(n-1));return a}var Xe=0,yr=0,fr=0,o0=1e3,eo,_r,ro=0,ce$1=0,Zo=0,Lr=typeof performance=="object"&&performance.now?performance:Date,a0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ni(){return ce$1||(a0(iy),ce$1=Lr.now()+Zo)}function iy(){ce$1=0}function Br(){this._call=this._time=this._next=null}Br.prototype=Qo.prototype={constructor:Br,restart:function(t,n,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?ni():+a)+(n==null?0:+n),!this._next&&_r!==this&&(_r?_r._next=this:eo=this,_r=this),this._call=t,this._time=a,wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,wu())}};function Qo(t,n,a){var s=new Br;return s.restart(t,n,a),s}function u0(){ni(),++Xe;for(var t=eo,n;t;)(n=ce$1-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Xe}function Wc(){ce$1=(ro=Lr.now())+Zo,Xe=yr=0;try{u0()}finally{Xe=0,ay(),ce$1=0}}function oy(){var t=Lr.now(),n=t-ro;n>o0&&(Zo-=n,ro=t)}function ay(){for(var t,n=eo,a,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(a=n._next,n._next=null,n=t?t._next=a:eo=a);_r=t,wu(s)}function wu(t){if(!Xe){yr&&(yr=clearTimeout(yr));var n=t-ce$1;n>24?(t<1/0&&(yr=setTimeout(Wc,t-Lr.now()-Zo)),fr&&(fr=clearInterval(fr))):(fr||(ro=Lr.now(),fr=setInterval(oy,o0)),Xe=1,a0(Wc))}}function xu(t,n,a){var s=new Br;return n=n==null?0:+n,s.restart(l=>{s.stop(),t(l+n)},n,a),s}function uy(t,n,a){var s=new Br,l=n;return n==null?(s.restart(t,n,a),s):(s._restart=s.restart,s.restart=function(u,c,d){c=+c,d=d==null?ni():+d,s._restart(function Ct(ar){ar+=l,s._restart(Ct,l+=c,d),u(ar)},c,d)},s.restart(t,n,a),s)}var fy=pe$1("start","end","cancel","interrupt"),cy=[],f0=0,Mu=1,$u=2,Oi=3,Vc=4,Tu=5,Yi=6;function Ko(t,n,a,s,l,u){var c=t.__transition;if(!c)t.__transition={};else if(a in c)return;sy(t,a,{name:n,index:s,group:l,on:fy,tween:cy,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:f0})}function Ef(t,n){var a=ft(t,n);if(a.state>f0)throw new Error("too late; already scheduled");return a}function _t(t,n){var a=ft(t,n);if(a.state>Oi)throw new Error("too late; already running");return a}function ft(t,n){var a=t.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function sy(t,n,a){var s=t.__transition,l;s[n]=a,a.timer=Qo(u,0,a.time);function u(ar){a.state=Mu,a.timer.restart(c,a.delay,a.time),a.delay<=ar&&c(ar-a.delay)}function c(ar){var en,tn,on,cn;if(a.state!==Mu)return Ct();for(en in s)if(cn=s[en],cn.name===a.name){if(cn.state===Oi)return xu(c);cn.state===Vc?(cn.state=Yi,cn.timer.stop(),cn.on.call("interrupt",t,t.__data__,cn.index,cn.group),delete s[en]):+en<n&&(cn.state=Yi,cn.timer.stop(),cn.on.call("cancel",t,t.__data__,cn.index,cn.group),delete s[en])}if(xu(function(){a.state===Oi&&(a.state=Vc,a.timer.restart(d,a.delay,a.time),d(ar))}),a.state=$u,a.on.call("start",t,t.__data__,a.index,a.group),a.state===$u){for(a.state=Oi,l=new Array(on=a.tween.length),en=0,tn=-1;en<on;++en)(cn=a.tween[en].value.call(t,t.__data__,a.index,a.group))&&(l[++tn]=cn);l.length=tn+1}}function d(ar){for(var en=ar<a.duration?a.ease.call(null,ar/a.duration):(a.timer.restart(Ct),a.state=Tu,1),tn=-1,on=l.length;++tn<on;)l[tn].call(t,en);a.state===Tu&&(a.on.call("end",t,t.__data__,a.index,a.group),Ct())}function Ct(){a.state=Yi,a.timer.stop(),delete s[n];for(var ar in s)return;delete t.__transition}}function re$1(t,n){var a=t.__transition,s,l,u=!0,c;if(a){n=n==null?null:n+"";for(c in a){if((s=a[c]).name!==n){u=!1;continue}l=s.state>$u&&s.state<Tu,s.state=Yi,s.timer.stop(),s.on.call(l?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[c]}u&&delete t.__transition}}function ly(t){return this.each(function(){re$1(this,t)})}function hy(t,n){var a,s;return function(){var l=_t(this,t),u=l.tween;if(u!==a){s=a=u;for(var c=0,d=s.length;c<d;++c)if(s[c].name===n){s=s.slice(),s.splice(c,1);break}}l.tween=s}}function dy(t,n,a){var s,l;if(typeof a!="function")throw new Error;return function(){var u=_t(this,t),c=u.tween;if(c!==s){l=(s=c).slice();for(var d={name:n,value:a},Ct=0,ar=l.length;Ct<ar;++Ct)if(l[Ct].name===n){l[Ct]=d;break}Ct===ar&&l.push(d)}u.tween=l}}function gy(t,n){var a=this._id;if(t+="",arguments.length<2){for(var s=ft(this.node(),a).tween,l=0,u=s.length,c;l<u;++l)if((c=s[l]).name===t)return c.value;return null}return this.each((n==null?hy:dy)(a,t,n))}function kf(t,n,a){var s=t._id;return t.each(function(){var l=_t(this,s);(l.value||(l.value={}))[n]=a.apply(this,arguments)}),function(l){return ft(l,s).value[n]}}function c0(t,n){var a;return(typeof n=="number"?Kn:n instanceof qt?qr:(a=qt(n))?(n=a,qr):Sf)(t,n)}function py(t){return function(){this.removeAttribute(t)}}function my(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yy(t,n,a){var s,l=a+"",u;return function(){var c=this.getAttribute(t);return c===l?null:c===s?u:u=n(s=c,a)}}function _y(t,n,a){var s,l=a+"",u;return function(){var c=this.getAttributeNS(t.space,t.local);return c===l?null:c===s?u:u=n(s=c,a)}}function vy(t,n,a){var s,l,u;return function(){var c,d=a(this),Ct;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),Ct=d+"",c===Ct?null:c===s&&Ct===l?u:(l=Ct,u=n(s=c,d)))}}function by(t,n,a){var s,l,u;return function(){var c,d=a(this),Ct;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),Ct=d+"",c===Ct?null:c===s&&Ct===l?u:(l=Ct,u=n(s=c,d)))}}function wy(t,n){var a=Kr(t),s=a==="transform"?Jh:c0;return this.attrTween(t,typeof n=="function"?(a.local?by:vy)(a,s,kf(this,"attr."+t,n)):n==null?(a.local?my:py)(a):(a.local?_y:yy)(a,s,n))}function xy(t,n){return function(a){this.setAttribute(t,n.call(this,a))}}function My(t,n){return function(a){this.setAttributeNS(t.space,t.local,n.call(this,a))}}function $y(t,n){var a,s;function l(){var u=n.apply(this,arguments);return u!==s&&(a=(s=u)&&My(t,u)),a}return l._value=n,l}function Ty(t,n){var a,s;function l(){var u=n.apply(this,arguments);return u!==s&&(a=(s=u)&&xy(t,u)),a}return l._value=n,l}function Ay(t,n){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var s=Kr(t);return this.tween(a,(s.local?$y:Ty)(s,n))}function Sy(t,n){return function(){Ef(this,t).delay=+n.apply(this,arguments)}}function Ey(t,n){return n=+n,function(){Ef(this,t).delay=n}}function ky(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Sy:Ey)(n,t)):ft(this.node(),n).delay}function Ny(t,n){return function(){_t(this,t).duration=+n.apply(this,arguments)}}function Ry(t,n){return n=+n,function(){_t(this,t).duration=n}}function Iy(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ny:Ry)(n,t)):ft(this.node(),n).duration}function Cy(t,n){if(typeof n!="function")throw new Error;return function(){_t(this,t).ease=n}}function Py(t){var n=this._id;return arguments.length?this.each(Cy(n,t)):ft(this.node(),n).ease}function Dy(t,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;_t(this,t).ease=a}}function zy(t){if(typeof t!="function")throw new Error;return this.each(Dy(this._id,t))}function Oy(t){typeof t!="function"&&(t=vf(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,d=s[l]=[],Ct,ar=0;ar<c;++ar)(Ct=u[ar])&&t.call(Ct,Ct.__data__,ar,u)&&d.push(Ct);return new gt(s,this._parents,this._name,this._id)}function Yy(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,a=t._groups,s=n.length,l=a.length,u=Math.min(s,l),c=new Array(s),d=0;d<u;++d)for(var Ct=n[d],ar=a[d],en=Ct.length,tn=c[d]=new Array(en),on,cn=0;cn<en;++cn)(on=Ct[cn]||ar[cn])&&(tn[cn]=on);for(;d<s;++d)c[d]=n[d];return new gt(c,this._parents,this._name,this._id)}function Fy(t){return(t+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function qy(t,n,a){var s,l,u=Fy(n)?Ef:_t;return function(){var c=u(this,t),d=c.on;d!==s&&(l=(s=d).copy()).on(n,a),c.on=l}}function Ly(t,n){var a=this._id;return arguments.length<2?ft(this.node(),a).on.on(t):this.each(qy(a,t,n))}function By(t){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==t)return;n&&n.removeChild(this)}}function Uy(){return this.on("end.remove",By(this._id))}function Xy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=Bo(t));for(var s=this._groups,l=s.length,u=new Array(l),c=0;c<l;++c)for(var d=s[c],Ct=d.length,ar=u[c]=new Array(Ct),en,tn,on=0;on<Ct;++on)(en=d[on])&&(tn=t.call(en,en.__data__,on,d))&&("__data__"in en&&(tn.__data__=en.__data__),ar[on]=tn,Ko(ar[on],n,a,on,ar,ft(en,a)));return new gt(u,this._parents,n,a)}function Hy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=_f(t));for(var s=this._groups,l=s.length,u=[],c=[],d=0;d<l;++d)for(var Ct=s[d],ar=Ct.length,en,tn=0;tn<ar;++tn)if(en=Ct[tn]){for(var on=t.call(en,en.__data__,tn,Ct),cn,dn=ft(en,a),Cn=0,In=on.length;Cn<In;++Cn)(cn=on[Cn])&&Ko(cn,n,a,Cn,on,dn);u.push(on),c.push(en)}return new gt(u,c,n,a)}var jy=me$1.prototype.constructor;function Wy(){return new jy(this._groups,this._parents)}function Vy(t,n){var a,s,l;return function(){var u=ue$1(this,t),c=(this.style.removeProperty(t),ue$1(this,t));return u===c?null:u===a&&c===s?l:l=n(a=u,s=c)}}function s0(t){return function(){this.style.removeProperty(t)}}function Gy(t,n,a){var s,l=a+"",u;return function(){var c=ue$1(this,t);return c===l?null:c===s?u:u=n(s=c,a)}}function Zy(t,n,a){var s,l,u;return function(){var c=ue$1(this,t),d=a(this),Ct=d+"";return d==null&&(Ct=d=(this.style.removeProperty(t),ue$1(this,t))),c===Ct?null:c===s&&Ct===l?u:(l=Ct,u=n(s=c,d))}}function Qy(t,n){var a,s,l,u="style."+n,c="end."+u,d;return function(){var Ct=_t(this,t),ar=Ct.on,en=Ct.value[u]==null?d||(d=s0(n)):void 0;(ar!==a||l!==en)&&(s=(a=ar).copy()).on(c,l=en),Ct.on=s}}function Ky(t,n,a){var s=(t+="")=="transform"?Kh:c0;return n==null?this.styleTween(t,Vy(t,s)).on("end.style."+t,s0(t)):typeof n=="function"?this.styleTween(t,Zy(t,s,kf(this,"style."+t,n))).each(Qy(this._id,t)):this.styleTween(t,Gy(t,s,n),a).on("end.style."+t,null)}function Jy(t,n,a){return function(s){this.style.setProperty(t,n.call(this,s),a)}}function n_(t,n,a){var s,l;function u(){var c=n.apply(this,arguments);return c!==l&&(s=(l=c)&&Jy(t,c,a)),s}return u._value=n,u}function t_(t,n,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,n_(t,n,a??""))}function e_(t){return function(){this.textContent=t}}function r_(t){return function(){var n=t(this);this.textContent=n??""}}function i_(t){return this.tween("text",typeof t=="function"?r_(kf(this,"text",t)):e_(t==null?"":t+""))}function o_(t){return function(n){this.textContent=t.call(this,n)}}function a_(t){var n,a;function s(){var l=t.apply(this,arguments);return l!==a&&(n=(a=l)&&o_(l)),n}return s._value=t,s}function u_(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,a_(t))}function f_(){for(var t=this._name,n=this._id,a=h0(),s=this._groups,l=s.length,u=0;u<l;++u)for(var c=s[u],d=c.length,Ct,ar=0;ar<d;++ar)if(Ct=c[ar]){var en=ft(Ct,n);Ko(Ct,t,a,ar,c,{time:en.time+en.delay+en.duration,delay:0,duration:en.duration,ease:en.ease})}return new gt(s,this._parents,t,a)}function c_(){var t,n,a=this,s=a._id,l=a.size();return new Promise(function(u,c){var d={value:c},Ct={value:function(){--l===0&&u()}};a.each(function(){var ar=_t(this,s),en=ar.on;en!==t&&(n=(t=en).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(Ct)),ar.on=n}),l===0&&u()})}var s_=0;function gt(t,n,a,s){this._groups=t,this._parents=n,this._name=a,this._id=s}function l0(t){return me$1().transition(t)}function h0(){return++s_}var bt=me$1.prototype;gt.prototype=l0.prototype={constructor:gt,select:Xy,selectAll:Hy,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Oy,merge:Yy,selection:Wy,transition:f_,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Ly,attr:wy,attrTween:Ay,style:Ky,styleTween:t_,text:i_,textTween:u_,remove:Uy,tween:gy,delay:ky,duration:Iy,ease:Py,easeVarying:zy,end:c_,[Symbol.iterator]:bt[Symbol.iterator]};const l_=t=>+t;function h_(t){return t*t}function d_(t){return t*(2-t)}function Gc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function g_(t){return t*t*t}function p_(t){return--t*t*t+1}function Au(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Nf=3,m_=(function t(n){n=+n;function a(s){return Math.pow(s,n)}return a.exponent=t,a})(Nf),y_=(function t(n){n=+n;function a(s){return 1-Math.pow(1-s,n)}return a.exponent=t,a})(Nf),Zc=(function t(n){n=+n;function a(s){return((s*=2)<=1?Math.pow(s,n):2-Math.pow(2-s,n))/2}return a.exponent=t,a})(Nf),d0=Math.PI,g0=d0/2;function __(t){return+t==1?1:1-Math.cos(t*g0)}function v_(t){return Math.sin(t*g0)}function Qc(t){return(1-Math.cos(d0*t))/2}function Lt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function b_(t){return Lt(1-+t)}function w_(t){return 1-Lt(t)}function Kc(t){return((t*=2)<=1?Lt(1-t):2-Lt(t-1))/2}function x_(t){return 1-Math.sqrt(1-t*t)}function M_(t){return Math.sqrt(1- --t*t)}function Jc(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Su=4/11,$_=6/11,T_=8/11,A_=3/4,S_=9/11,E_=10/11,k_=15/16,N_=21/22,R_=63/64,mi=1/Su/Su;function I_(t){return 1-Ur(1-t)}function Ur(t){return(t=+t)<Su?mi*t*t:t<T_?mi*(t-=$_)*t+A_:t<E_?mi*(t-=S_)*t+k_:mi*(t-=N_)*t+R_}function C_(t){return((t*=2)<=1?1-Ur(1-t):Ur(t-1)+1)/2}var Rf=1.70158,P_=(function t(n){n=+n;function a(s){return(s=+s)*s*(n*(s-1)+s)}return a.overshoot=t,a})(Rf),D_=(function t(n){n=+n;function a(s){return--s*s*((s+1)*n+s)+1}return a.overshoot=t,a})(Rf),ns=(function t(n){n=+n;function a(s){return((s*=2)<1?s*s*((n+1)*s-n):(s-=2)*s*((n+1)*s+n)+2)/2}return a.overshoot=t,a})(Rf),He=2*Math.PI,If=1,Cf=.3,z_=(function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return n*Lt(- --u)*Math.sin((s-u)/a)}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l})(If,Cf),ts=(function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return 1-n*Lt(u=+u)*Math.sin((u+s)/a)}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l})(If,Cf),O_=(function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return((u=u*2-1)<0?n*Lt(-u)*Math.sin((s-u)/a):2-n*Lt(u)*Math.sin((s+u)/a))/2}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l})(If,Cf),Y_={time:null,delay:0,duration:250,ease:Au};function F_(t,n){for(var a;!(a=t.__transition)||!(a=a[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return a}function q_(t){var n,a;t instanceof gt?(n=t._id,t=t._name):(n=h0(),(a=Y_).time=ni(),t=t==null?null:t+"");for(var s=this._groups,l=s.length,u=0;u<l;++u)for(var c=s[u],d=c.length,Ct,ar=0;ar<d;++ar)(Ct=c[ar])&&Ko(Ct,t,n,ar,c,a||F_(Ct,n));return new gt(s,this._parents,t,n)}me$1.prototype.interrupt=ly;me$1.prototype.transition=q_;var L_=[null];function B_(t,n){var a=t.__transition,s,l;if(a){n=n==null?null:n+"";for(l in a)if((s=a[l]).state>Mu&&s.name===n)return new gt([[t]],L_,n,+l)}return null}const Pa=t=>()=>t;function U_(t,{sourceEvent:n,target:a,selection:s,mode:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:s,enumerable:!0,configurable:!0},mode:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function X_(t){t.stopImmediatePropagation()}function Da(t){t.preventDefault(),t.stopImmediatePropagation()}var es={name:"drag"},za={name:"space"},Me={name:"handle"},$e={name:"center"};const{abs:rs,max:Sn,min:En}=Math;function is(t){return[+t[0],+t[1]]}function Eu(t){return[is(t[0]),is(t[1])]}var Fi={name:"x",handles:["w","e"].map(Xr),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},qi={name:"y",handles:["n","s"].map(Xr),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},H_={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Xr),input:function(t){return t==null?null:Eu(t)},output:function(t){return t}},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},os={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},as={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},j_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},W_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Xr(t){return{type:t}}function V_(t){return!t.ctrlKey&&!t.button}function G_(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Z_(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Q_(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function K_(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function J_(){return Pf(Fi)}function nv(){return Pf(qi)}function tv(){return Pf(H_)}function Pf(t){var n=G_,a=V_,s=Z_,l=!0,u=pe$1("start","brush","end"),c=6,d;function Ct(In){var ix=In.property("__brush",Cn).selectAll(".overlay").data([Xr("overlay")]);ix.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(ix).each(function(){var ox=Oa(this).extent;X$1(this).attr("x",ox[0][0]).attr("y",ox[0][1]).attr("width",ox[1][0]-ox[0][0]).attr("height",ox[1][1]-ox[0][1])}),In.selectAll(".selection").data([Xr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ax=In.selectAll(".handle").data(t.handles,function(ox){return ox.type});ax.exit().remove(),ax.enter().append("rect").attr("class",function(ox){return"handle handle--"+ox.type}).attr("cursor",function(ox){return wt[ox.type]}),In.each(ar).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",on).filter(s).on("touchstart.brush",on).on("touchmove.brush",cn).on("touchend.brush touchcancel.brush",dn).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Ct.move=function(In,ix,ax){In.tween?In.on("start.brush",function(ox){en(this,arguments).beforestart().start(ox)}).on("interrupt.brush end.brush",function(ox){en(this,arguments).end(ox)}).tween("brush",function(){var ox=this,sx=ox.__brush,ux=en(ox,arguments),cx=sx.selection,hx=t.input(typeof ix=="function"?ix.apply(this,arguments):ix,sx.extent),gx=Ht(cx,hx);function fx(dx){sx.selection=dx===1&&hx===null?null:gx(dx),ar.call(ox),ux.brush()}return cx!==null&&hx!==null?fx:fx(1)}):In.each(function(){var ox=this,sx=arguments,ux=ox.__brush,cx=t.input(typeof ix=="function"?ix.apply(ox,sx):ix,ux.extent),hx=en(ox,sx).beforestart();re$1(ox),ux.selection=cx===null?null:cx,ar.call(ox),hx.start(ax).brush(ax).end(ax)})},Ct.clear=function(In,ix){Ct.move(In,null,ix)};function ar(){var In=X$1(this),ix=Oa(this).selection;ix?(In.selectAll(".selection").style("display",null).attr("x",ix[0][0]).attr("y",ix[0][1]).attr("width",ix[1][0]-ix[0][0]).attr("height",ix[1][1]-ix[0][1]),In.selectAll(".handle").style("display",null).attr("x",function(ax){return ax.type[ax.type.length-1]==="e"?ix[1][0]-c/2:ix[0][0]-c/2}).attr("y",function(ax){return ax.type[0]==="s"?ix[1][1]-c/2:ix[0][1]-c/2}).attr("width",function(ax){return ax.type==="n"||ax.type==="s"?ix[1][0]-ix[0][0]+c:c}).attr("height",function(ax){return ax.type==="e"||ax.type==="w"?ix[1][1]-ix[0][1]+c:c})):In.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function en(In,ix,ax){var ox=In.__brush.emitter;return ox&&(!ax||!ox.clean)?ox:new tn(In,ix,ax)}function tn(In,ix,ax){this.that=In,this.args=ix,this.state=In.__brush,this.active=0,this.clean=ax}tn.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(In,ix){return this.starting?(this.starting=!1,this.emit("start",In,ix)):this.emit("brush",In),this},brush:function(In,ix){return this.emit("brush",In,ix),this},end:function(In,ix){return--this.active===0&&(delete this.state.emitter,this.emit("end",In,ix)),this},emit:function(In,ix,ax){var ox=X$1(this.that).datum();u.call(In,this.that,new U_(In,{sourceEvent:ix,target:Ct,selection:t.output(this.state.selection),mode:ax,dispatch:u}),ox)}};function on(In){if(d&&!In.touches||!a.apply(this,arguments))return;var ix=this,ax=In.target.__data__.type,ox=(l&&In.metaKey?ax="overlay":ax)==="selection"?es:l&&In.altKey?$e:Me,sx=t===qi?null:j_[ax],ux=t===Fi?null:W_[ax],cx=Oa(ix),hx=cx.extent,gx=cx.selection,fx=hx[0][0],dx,mx,vx=hx[0][1],bx,xx,_x=hx[1][0],Ex,Tx,Cx=hx[1][1],Mx,Ax,Nx=0,Ux=0,Rx,Ox=sx&&ux&&l&&In.shiftKey,Px,$x,Lx=Array.from(In.touches||[In],iE=>{const Xx=iE.identifier;return iE=wn(iE,ix),iE.point0=iE.slice(),iE.identifier=Xx,iE});re$1(ix);var zx=en(ix,arguments,!0).beforestart();if(ax==="overlay"){gx&&(Rx=!0);const iE=[Lx[0],Lx[1]||Lx[0]];cx.selection=gx=[[dx=t===qi?fx:En(iE[0][0],iE[1][0]),bx=t===Fi?vx:En(iE[0][1],iE[1][1])],[Ex=t===qi?_x:Sn(iE[0][0],iE[1][0]),Mx=t===Fi?Cx:Sn(iE[0][1],iE[1][1])]],Lx.length>1&&nE(In)}else dx=gx[0][0],bx=gx[0][1],Ex=gx[1][0],Mx=gx[1][1];mx=dx,xx=bx,Tx=Ex,Ax=Mx;var qx=X$1(ix).attr("pointer-events","none"),jx=qx.selectAll(".overlay").attr("cursor",wt[ax]);if(In.touches)zx.moved=Vx,zx.ended=Wx;else{var Hx=X$1(In.view).on("mousemove.brush",Vx,!0).on("mouseup.brush",Wx,!0);l&&Hx.on("keydown.brush",tE,!0).on("keyup.brush",lE,!0),Uo(In.view)}ar.call(ix),zx.start(In,ox.name);function Vx(iE){for(const Xx of iE.changedTouches||[iE])for(const CE of Lx)CE.identifier===Xx.identifier&&(CE.cur=wn(Xx,ix));if(Ox&&!Px&&!$x&&Lx.length===1){const Xx=Lx[0];rs(Xx.cur[0]-Xx[0])>rs(Xx.cur[1]-Xx[1])?$x=!0:Px=!0}for(const Xx of Lx)Xx.cur&&(Xx[0]=Xx.cur[0],Xx[1]=Xx.cur[1]);Rx=!0,Da(iE),nE(iE)}function nE(iE){const Xx=Lx[0],CE=Xx.point0;var RE;switch(Nx=Xx[0]-CE[0],Ux=Xx[1]-CE[1],ox){case za:case es:{sx&&(Nx=Sn(fx-dx,En(_x-Ex,Nx)),mx=dx+Nx,Tx=Ex+Nx),ux&&(Ux=Sn(vx-bx,En(Cx-Mx,Ux)),xx=bx+Ux,Ax=Mx+Ux);break}case Me:{Lx[1]?(sx&&(mx=Sn(fx,En(_x,Lx[0][0])),Tx=Sn(fx,En(_x,Lx[1][0])),sx=1),ux&&(xx=Sn(vx,En(Cx,Lx[0][1])),Ax=Sn(vx,En(Cx,Lx[1][1])),ux=1)):(sx<0?(Nx=Sn(fx-dx,En(_x-dx,Nx)),mx=dx+Nx,Tx=Ex):sx>0&&(Nx=Sn(fx-Ex,En(_x-Ex,Nx)),mx=dx,Tx=Ex+Nx),ux<0?(Ux=Sn(vx-bx,En(Cx-bx,Ux)),xx=bx+Ux,Ax=Mx):ux>0&&(Ux=Sn(vx-Mx,En(Cx-Mx,Ux)),xx=bx,Ax=Mx+Ux));break}case $e:{sx&&(mx=Sn(fx,En(_x,dx-Nx*sx)),Tx=Sn(fx,En(_x,Ex+Nx*sx))),ux&&(xx=Sn(vx,En(Cx,bx-Ux*ux)),Ax=Sn(vx,En(Cx,Mx+Ux*ux)));break}}Tx<mx&&(sx*=-1,RE=dx,dx=Ex,Ex=RE,RE=mx,mx=Tx,Tx=RE,ax in os&&jx.attr("cursor",wt[ax=os[ax]])),Ax<xx&&(ux*=-1,RE=bx,bx=Mx,Mx=RE,RE=xx,xx=Ax,Ax=RE,ax in as&&jx.attr("cursor",wt[ax=as[ax]])),cx.selection&&(gx=cx.selection),Px&&(mx=gx[0][0],Tx=gx[1][0]),$x&&(xx=gx[0][1],Ax=gx[1][1]),(gx[0][0]!==mx||gx[0][1]!==xx||gx[1][0]!==Tx||gx[1][1]!==Ax)&&(cx.selection=[[mx,xx],[Tx,Ax]],ar.call(ix),zx.brush(iE,ox.name))}function Wx(iE){if(X_(iE),iE.touches){if(iE.touches.length)return;d&&clearTimeout(d),d=setTimeout(function(){d=null},500)}else Xo(iE.view,Rx),Hx.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);qx.attr("pointer-events","all"),jx.attr("cursor",wt.overlay),cx.selection&&(gx=cx.selection),Q_(gx)&&(cx.selection=null,ar.call(ix)),zx.end(iE,ox.name)}function tE(iE){switch(iE.keyCode){case 16:{Ox=sx&&ux;break}case 18:{ox===Me&&(sx&&(Ex=Tx-Nx*sx,dx=mx+Nx*sx),ux&&(Mx=Ax-Ux*ux,bx=xx+Ux*ux),ox=$e,nE(iE));break}case 32:{(ox===Me||ox===$e)&&(sx<0?Ex=Tx-Nx:sx>0&&(dx=mx-Nx),ux<0?Mx=Ax-Ux:ux>0&&(bx=xx-Ux),ox=za,jx.attr("cursor",wt.selection),nE(iE));break}default:return}Da(iE)}function lE(iE){switch(iE.keyCode){case 16:{Ox&&(Px=$x=Ox=!1,nE(iE));break}case 18:{ox===$e&&(sx<0?Ex=Tx:sx>0&&(dx=mx),ux<0?Mx=Ax:ux>0&&(bx=xx),ox=Me,nE(iE));break}case 32:{ox===za&&(iE.altKey?(sx&&(Ex=Tx-Nx*sx,dx=mx+Nx*sx),ux&&(Mx=Ax-Ux*ux,bx=xx+Ux*ux),ox=$e):(sx<0?Ex=Tx:sx>0&&(dx=mx),ux<0?Mx=Ax:ux>0&&(bx=xx),ox=Me),jx.attr("cursor",wt[ax]),nE(iE));break}default:return}Da(iE)}}function cn(In){en(this,arguments).moved(In)}function dn(In){en(this,arguments).ended(In)}function Cn(){var In=this.__brush||{selection:null};return In.extent=Eu(n.apply(this,arguments)),In.dim=t,In}return Ct.extent=function(In){return arguments.length?(n=typeof In=="function"?In:Pa(Eu(In)),Ct):n},Ct.filter=function(In){return arguments.length?(a=typeof In=="function"?In:Pa(!!In),Ct):a},Ct.touchable=function(In){return arguments.length?(s=typeof In=="function"?In:Pa(!!In),Ct):s},Ct.handleSize=function(In){return arguments.length?(c=+In,Ct):c},Ct.keyModifiers=function(In){return arguments.length?(l=!!In,Ct):l},Ct.on=function(){var In=u.on.apply(u,arguments);return In===u?Ct:In},Ct}var us=Math.abs,Te=Math.cos,Ae=Math.sin,p0=Math.PI,yi=p0/2,fs$1=p0*2,cs=Math.max,Ya=1e-12;function Fa(t,n){return Array.from({length:n-t},(a,s)=>t+s)}function ev(t){return function(n,a){return t(n.source.value+n.target.value,a.source.value+a.target.value)}}function rv(){return Df(!1,!1)}function iv(){return Df(!1,!0)}function ov(){return Df(!0,!1)}function Df(t,n){var a=0,s=null,l=null,u=null;function c(d){var Ct=d.length,ar=new Array(Ct),en=Fa(0,Ct),tn=new Array(Ct*Ct),on=new Array(Ct),cn=0,dn;d=Float64Array.from({length:Ct*Ct},n?(Cn,In)=>d[In%Ct][In/Ct|0]:(Cn,In)=>d[In/Ct|0][In%Ct]);for(let Cn=0;Cn<Ct;++Cn){let In=0;for(let ix=0;ix<Ct;++ix)In+=d[Cn*Ct+ix]+t*d[ix*Ct+Cn];cn+=ar[Cn]=In}cn=cs(0,fs$1-a*Ct)/cn,dn=cn?a:fs$1/Ct;{let Cn=0;s&&en.sort((In,ix)=>s(ar[In],ar[ix]));for(const In of en){const ix=Cn;if(t){const ax=Fa(~Ct+1,Ct).filter(ox=>ox<0?d[~ox*Ct+In]:d[In*Ct+ox]);l&&ax.sort((ox,sx)=>l(ox<0?-d[~ox*Ct+In]:d[In*Ct+ox],sx<0?-d[~sx*Ct+In]:d[In*Ct+sx]));for(const ox of ax)if(ox<0){const sx=tn[~ox*Ct+In]||(tn[~ox*Ct+In]={source:null,target:null});sx.target={index:In,startAngle:Cn,endAngle:Cn+=d[~ox*Ct+In]*cn,value:d[~ox*Ct+In]}}else{const sx=tn[In*Ct+ox]||(tn[In*Ct+ox]={source:null,target:null});sx.source={index:In,startAngle:Cn,endAngle:Cn+=d[In*Ct+ox]*cn,value:d[In*Ct+ox]}}on[In]={index:In,startAngle:ix,endAngle:Cn,value:ar[In]}}else{const ax=Fa(0,Ct).filter(ox=>d[In*Ct+ox]||d[ox*Ct+In]);l&&ax.sort((ox,sx)=>l(d[In*Ct+ox],d[In*Ct+sx]));for(const ox of ax){let sx;if(In<ox?(sx=tn[In*Ct+ox]||(tn[In*Ct+ox]={source:null,target:null}),sx.source={index:In,startAngle:Cn,endAngle:Cn+=d[In*Ct+ox]*cn,value:d[In*Ct+ox]}):(sx=tn[ox*Ct+In]||(tn[ox*Ct+In]={source:null,target:null}),sx.target={index:In,startAngle:Cn,endAngle:Cn+=d[In*Ct+ox]*cn,value:d[In*Ct+ox]},In===ox&&(sx.source=sx.target)),sx.source&&sx.target&&sx.source.value<sx.target.value){const ux=sx.source;sx.source=sx.target,sx.target=ux}}on[In]={index:In,startAngle:ix,endAngle:Cn,value:ar[In]}}Cn+=dn}}return tn=Object.values(tn),tn.groups=on,u?tn.sort(u):tn}return c.padAngle=function(d){return arguments.length?(a=cs(0,d),c):a},c.sortGroups=function(d){return arguments.length?(s=d,c):s},c.sortSubgroups=function(d){return arguments.length?(l=d,c):l},c.sortChords=function(d){return arguments.length?(d==null?u=null:(u=ev(d))._=d,c):u&&u._},c}const ku=Math.PI,Nu=2*ku,Zt=1e-6,av=Nu-Zt;function m0(t){this._+=t[0];for(let n=1,a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function uv(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return m0;const a=10**n;return function(s){this._+=s[0];for(let l=1,u=s.length;l<u;++l)this._+=Math.round(arguments[l]*a)/a+s[l]}}let ti=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m0:uv(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,l,u){this._append`C${+t},${+n},${+a},${+s},${this._x1=+l},${this._y1=+u}`}arcTo(t,n,a,s,l){if(t=+t,n=+n,a=+a,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,c=this._y1,d=a-t,Ct=s-n,ar=u-t,en=c-n,tn=ar*ar+en*en;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(tn>Zt)if(!(Math.abs(en*d-Ct*ar)>Zt)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let on=a-u,cn=s-c,dn=d*d+Ct*Ct,Cn=on*on+cn*cn,In=Math.sqrt(dn),ix=Math.sqrt(tn),ax=l*Math.tan((ku-Math.acos((dn+tn-Cn)/(2*In*ix)))/2),ox=ax/ix,sx=ax/In;Math.abs(ox-1)>Zt&&this._append`L${t+ox*ar},${n+ox*en}`,this._append`A${l},${l},0,0,${+(en*on>ar*cn)},${this._x1=t+sx*d},${this._y1=n+sx*Ct}`}}arc(t,n,a,s,l,u){if(t=+t,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(s),d=a*Math.sin(s),Ct=t+c,ar=n+d,en=1^u,tn=u?s-l:l-s;this._x1===null?this._append`M${Ct},${ar}`:(Math.abs(this._x1-Ct)>Zt||Math.abs(this._y1-ar)>Zt)&&this._append`L${Ct},${ar}`,a&&(tn<0&&(tn=tn%Nu+Nu),tn>av?this._append`A${a},${a},0,1,${en},${t-c},${n-d}A${a},${a},0,1,${en},${this._x1=Ct},${this._y1=ar}`:tn>Zt&&this._append`A${a},${a},0,${+(tn>=ku)},${en},${this._x1=t+a*Math.cos(l)},${this._y1=n+a*Math.sin(l)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}};function Jo(){return new ti}Jo.prototype=ti.prototype;function fv(t=3){return new ti(+t)}var cv=Array.prototype.slice;function Vt(t){return function(){return t}}function sv(t){return t.source}function lv(t){return t.target}function ss(t){return t.radius}function hv(t){return t.startAngle}function dv(t){return t.endAngle}function gv(){return 0}function pv(){return 10}function y0(t){var n=sv,a=lv,s=ss,l=ss,u=hv,c=dv,d=gv,Ct=null;function ar(){var en,tn=n.apply(this,arguments),on=a.apply(this,arguments),cn=d.apply(this,arguments)/2,dn=cv.call(arguments),Cn=+s.apply(this,(dn[0]=tn,dn)),In=u.apply(this,dn)-yi,ix=c.apply(this,dn)-yi,ax=+l.apply(this,(dn[0]=on,dn)),ox=u.apply(this,dn)-yi,sx=c.apply(this,dn)-yi;if(Ct||(Ct=en=Jo()),cn>Ya&&(us(ix-In)>cn*2+Ya?ix>In?(In+=cn,ix-=cn):(In-=cn,ix+=cn):In=ix=(In+ix)/2,us(sx-ox)>cn*2+Ya?sx>ox?(ox+=cn,sx-=cn):(ox-=cn,sx+=cn):ox=sx=(ox+sx)/2),Ct.moveTo(Cn*Te(In),Cn*Ae(In)),Ct.arc(0,0,Cn,In,ix),In!==ox||ix!==sx)if(t){var ux=+t.apply(this,arguments),cx=ax-ux,hx=(ox+sx)/2;Ct.quadraticCurveTo(0,0,cx*Te(ox),cx*Ae(ox)),Ct.lineTo(ax*Te(hx),ax*Ae(hx)),Ct.lineTo(cx*Te(sx),cx*Ae(sx))}else Ct.quadraticCurveTo(0,0,ax*Te(ox),ax*Ae(ox)),Ct.arc(0,0,ax,ox,sx);if(Ct.quadraticCurveTo(0,0,Cn*Te(In),Cn*Ae(In)),Ct.closePath(),en)return Ct=null,en+""||null}return t&&(ar.headRadius=function(en){return arguments.length?(t=typeof en=="function"?en:Vt(+en),ar):t}),ar.radius=function(en){return arguments.length?(s=l=typeof en=="function"?en:Vt(+en),ar):s},ar.sourceRadius=function(en){return arguments.length?(s=typeof en=="function"?en:Vt(+en),ar):s},ar.targetRadius=function(en){return arguments.length?(l=typeof en=="function"?en:Vt(+en),ar):l},ar.startAngle=function(en){return arguments.length?(u=typeof en=="function"?en:Vt(+en),ar):u},ar.endAngle=function(en){return arguments.length?(c=typeof en=="function"?en:Vt(+en),ar):c},ar.padAngle=function(en){return arguments.length?(d=typeof en=="function"?en:Vt(+en),ar):d},ar.source=function(en){return arguments.length?(n=en,ar):n},ar.target=function(en){return arguments.length?(a=en,ar):a},ar.context=function(en){return arguments.length?(Ct=en??null,ar):Ct},ar}function mv(){return y0()}function yv(){return y0(pv)}var _v=Array.prototype,_0=_v.slice;function vv(t,n){return t-n}function bv(t){for(var n=0,a=t.length,s=t[a-1][1]*t[0][0]-t[a-1][0]*t[0][1];++n<a;)s+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return s}const Pt=t=>()=>t;function wv(t,n){for(var a=-1,s=n.length,l;++a<s;)if(l=xv(t,n[a]))return l;return 0}function xv(t,n){for(var a=n[0],s=n[1],l=-1,u=0,c=t.length,d=c-1;u<c;d=u++){var Ct=t[u],ar=Ct[0],en=Ct[1],tn=t[d],on=tn[0],cn=tn[1];if(Mv(Ct,tn,n))return 0;en>s!=cn>s&&a<(on-ar)*(s-en)/(cn-en)+ar&&(l=-l)}return l}function Mv(t,n,a){var s;return $v(t,n,a)&&Tv(t[s=+(t[0]===n[0])],a[s],n[s])}function $v(t,n,a){return(n[0]-t[0])*(a[1]-t[1])===(a[0]-t[0])*(n[1]-t[1])}function Tv(t,n,a){return t<=n&&n<=a||a<=n&&n<=t}function Av(){}var xt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ru(){var t=1,n=1,a=gf,s=Ct;function l(ar){var en=a(ar);if(Array.isArray(en))en=en.slice().sort(vv);else{const tn=Er(ar,Sv);for(en=oe$1(...df(tn[0],tn[1],en),en);en[en.length-1]>=tn[1];)en.pop();for(;en[1]<tn[0];)en.shift()}return en.map(tn=>u(ar,tn))}function u(ar,en){const tn=en==null?NaN:+en;if(isNaN(tn))throw new Error(`invalid value: ${en}`);var on=[],cn=[];return c(ar,tn,function(dn){s(dn,ar,tn),bv(dn)>0?on.push([dn]):cn.push(dn)}),cn.forEach(function(dn){for(var Cn=0,In=on.length,ix;Cn<In;++Cn)if(wv((ix=on[Cn])[0],dn)!==-1){ix.push(dn);return}}),{type:"MultiPolygon",value:en,coordinates:on}}function c(ar,en,tn){var on=new Array,cn=new Array,dn,Cn,In,ix,ax,ox;for(dn=Cn=-1,ix=Gt(ar[0],en),xt[ix<<1].forEach(sx);++dn<t-1;)In=ix,ix=Gt(ar[dn+1],en),xt[In|ix<<1].forEach(sx);for(xt[ix<<0].forEach(sx);++Cn<n-1;){for(dn=-1,ix=Gt(ar[Cn*t+t],en),ax=Gt(ar[Cn*t],en),xt[ix<<1|ax<<2].forEach(sx);++dn<t-1;)In=ix,ix=Gt(ar[Cn*t+t+dn+1],en),ox=ax,ax=Gt(ar[Cn*t+dn+1],en),xt[In|ix<<1|ax<<2|ox<<3].forEach(sx);xt[ix|ax<<3].forEach(sx)}for(dn=-1,ax=ar[Cn*t]>=en,xt[ax<<2].forEach(sx);++dn<t-1;)ox=ax,ax=Gt(ar[Cn*t+dn+1],en),xt[ax<<2|ox<<3].forEach(sx);xt[ax<<3].forEach(sx);function sx(ux){var cx=[ux[0][0]+dn,ux[0][1]+Cn],hx=[ux[1][0]+dn,ux[1][1]+Cn],gx=d(cx),fx=d(hx),dx,mx;(dx=cn[gx])?(mx=on[fx])?(delete cn[dx.end],delete on[mx.start],dx===mx?(dx.ring.push(hx),tn(dx.ring)):on[dx.start]=cn[mx.end]={start:dx.start,end:mx.end,ring:dx.ring.concat(mx.ring)}):(delete cn[dx.end],dx.ring.push(hx),cn[dx.end=fx]=dx):(dx=on[fx])?(mx=cn[gx])?(delete on[dx.start],delete cn[mx.end],dx===mx?(dx.ring.push(hx),tn(dx.ring)):on[mx.start]=cn[dx.end]={start:mx.start,end:dx.end,ring:mx.ring.concat(dx.ring)}):(delete on[dx.start],dx.ring.unshift(cx),on[dx.start=gx]=dx):on[gx]=cn[fx]={start:gx,end:fx,ring:[cx,hx]}}}function d(ar){return ar[0]*2+ar[1]*(t+1)*4}function Ct(ar,en,tn){ar.forEach(function(on){var cn=on[0],dn=on[1],Cn=cn|0,In=dn|0,ix=qa(en[In*t+Cn]);cn>0&&cn<t&&Cn===cn&&(on[0]=ls(cn,qa(en[In*t+Cn-1]),ix,tn)),dn>0&&dn<n&&In===dn&&(on[1]=ls(dn,qa(en[(In-1)*t+Cn]),ix,tn))})}return l.contour=u,l.size=function(ar){if(!arguments.length)return[t,n];var en=Math.floor(ar[0]),tn=Math.floor(ar[1]);if(!(en>=0&&tn>=0))throw new Error("invalid size");return t=en,n=tn,l},l.thresholds=function(ar){return arguments.length?(a=typeof ar=="function"?ar:Array.isArray(ar)?Pt(_0.call(ar)):Pt(ar),l):a},l.smooth=function(ar){return arguments.length?(s=ar?Ct:Av,l):s===Ct},l}function Sv(t){return isFinite(t)?t:NaN}function Gt(t,n){return t==null?!1:+t>=n}function qa(t){return t==null||isNaN(t=+t)?-1/0:t}function ls(t,n,a,s){const l=s-n,u=a-n,c=isFinite(l)||isFinite(u)?l/u:Math.sign(l)/Math.sign(u);return isNaN(c)?t:t+c-.5}function Ev(t){return t[0]}function kv(t){return t[1]}function Nv(){return 1}function Rv(){var t=Ev,n=kv,a=Nv,s=960,l=500,u=20,c=2,d=u*3,Ct=s+d*2>>c,ar=l+d*2>>c,en=Pt(20);function tn(ax){var ox=new Float32Array(Ct*ar),sx=Math.pow(2,-c),ux=-1;for(const bx of ax){var cx=(t(bx,++ux,ax)+d)*sx,hx=(n(bx,ux,ax)+d)*sx,gx=+a(bx,ux,ax);if(gx&&cx>=0&&cx<Ct&&hx>=0&&hx<ar){var fx=Math.floor(cx),dx=Math.floor(hx),mx=cx-fx-.5,vx=hx-dx-.5;ox[fx+dx*Ct]+=(1-mx)*(1-vx)*gx,ox[fx+1+dx*Ct]+=mx*(1-vx)*gx,ox[fx+1+(dx+1)*Ct]+=mx*vx*gx,ox[fx+(dx+1)*Ct]+=(1-mx)*vx*gx}}return Zl({data:ox,width:Ct,height:ar},u*sx),ox}function on(ax){var ox=tn(ax),sx=en(ox),ux=Math.pow(2,2*c);return Array.isArray(sx)||(sx=oe$1(Number.MIN_VALUE,Dr(ox)/ux,sx)),Ru().size([Ct,ar]).thresholds(sx.map(cx=>cx*ux))(ox).map((cx,hx)=>(cx.value=+sx[hx],cn(cx)))}on.contours=function(ax){var ox=tn(ax),sx=Ru().size([Ct,ar]),ux=Math.pow(2,2*c),cx=hx=>{hx=+hx;var gx=cn(sx.contour(ox,hx*ux));return gx.value=hx,gx};return Object.defineProperty(cx,"max",{get:()=>Dr(ox)/ux}),cx};function cn(ax){return ax.coordinates.forEach(dn),ax}function dn(ax){ax.forEach(Cn)}function Cn(ax){ax.forEach(In)}function In(ax){ax[0]=ax[0]*Math.pow(2,c)-d,ax[1]=ax[1]*Math.pow(2,c)-d}function ix(){return d=u*3,Ct=s+d*2>>c,ar=l+d*2>>c,on}return on.x=function(ax){return arguments.length?(t=typeof ax=="function"?ax:Pt(+ax),on):t},on.y=function(ax){return arguments.length?(n=typeof ax=="function"?ax:Pt(+ax),on):n},on.weight=function(ax){return arguments.length?(a=typeof ax=="function"?ax:Pt(+ax),on):a},on.size=function(ax){if(!arguments.length)return[s,l];var ox=+ax[0],sx=+ax[1];if(!(ox>=0&&sx>=0))throw new Error("invalid size");return s=ox,l=sx,ix()},on.cellSize=function(ax){if(!arguments.length)return 1<<c;if(!((ax=+ax)>=1))throw new Error("invalid cell size");return c=Math.floor(Math.log(ax)/Math.LN2),ix()},on.thresholds=function(ax){return arguments.length?(en=typeof ax=="function"?ax:Array.isArray(ax)?Pt(_0.call(ax)):Pt(ax),on):en},on.bandwidth=function(ax){if(!arguments.length)return Math.sqrt(u*(u+1));if(!((ax=+ax)>=0))throw new Error("invalid bandwidth");return u=(Math.sqrt(4*ax*ax+1)-1)/2,ix()},on}const kt=11102230246251565e-32,kn=134217729,Iv=(3+8*kt)*kt;function La(t,n,a,s,l){let u,c,d,Ct,ar=n[0],en=s[0],tn=0,on=0;en>ar==en>-ar?(u=ar,ar=n[++tn]):(u=en,en=s[++on]);let cn=0;if(tn<t&&on<a)for(en>ar==en>-ar?(c=ar+u,d=u-(c-ar),ar=n[++tn]):(c=en+u,d=u-(c-en),en=s[++on]),u=c,d!==0&&(l[cn++]=d);tn<t&&on<a;)en>ar==en>-ar?(c=u+ar,Ct=c-u,d=u-(c-Ct)+(ar-Ct),ar=n[++tn]):(c=u+en,Ct=c-u,d=u-(c-Ct)+(en-Ct),en=s[++on]),u=c,d!==0&&(l[cn++]=d);for(;tn<t;)c=u+ar,Ct=c-u,d=u-(c-Ct)+(ar-Ct),ar=n[++tn],u=c,d!==0&&(l[cn++]=d);for(;on<a;)c=u+en,Ct=c-u,d=u-(c-Ct)+(en-Ct),en=s[++on],u=c,d!==0&&(l[cn++]=d);return(u!==0||cn===0)&&(l[cn++]=u),cn}function Cv(t,n){let a=n[0];for(let s=1;s<t;s++)a+=n[s];return a}function ei(t){return new Float64Array(t)}const Pv=(3+16*kt)*kt,Dv=(2+12*kt)*kt,zv=(9+64*kt)*kt*kt,Se$1=ei(4),hs=ei(8),ds=ei(12),gs=ei(16),Pn=ei(4);function Ov(t,n,a,s,l,u,c){let d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx;const fx=t-l,dx=a-l,mx=n-u,vx=s-u;sx=fx*vx,on=kn*fx,cn=on-(on-fx),dn=fx-cn,on=kn*vx,Cn=on-(on-vx),In=vx-Cn,ux=dn*In-(sx-cn*Cn-dn*Cn-cn*In),cx=mx*dx,on=kn*mx,cn=on-(on-mx),dn=mx-cn,on=kn*dx,Cn=on-(on-dx),In=dx-Cn,hx=dn*In-(cx-cn*Cn-dn*Cn-cn*In),ix=ux-hx,tn=ux-ix,Se$1[0]=ux-(ix+tn)+(tn-hx),ax=sx+ix,tn=ax-sx,ox=sx-(ax-tn)+(ix-tn),ix=ox-cx,tn=ox-ix,Se$1[1]=ox-(ix+tn)+(tn-cx),gx=ax+ix,tn=gx-ax,Se$1[2]=ax-(gx-tn)+(ix-tn),Se$1[3]=gx;let bx=Cv(4,Se$1),xx=Dv*c;if(bx>=xx||-bx>=xx||(tn=t-fx,d=t-(fx+tn)+(tn-l),tn=a-dx,ar=a-(dx+tn)+(tn-l),tn=n-mx,Ct=n-(mx+tn)+(tn-u),tn=s-vx,en=s-(vx+tn)+(tn-u),d===0&&Ct===0&&ar===0&&en===0)||(xx=zv*c+Iv*Math.abs(bx),bx+=fx*en+vx*d-(mx*ar+dx*Ct),bx>=xx||-bx>=xx))return bx;sx=d*vx,on=kn*d,cn=on-(on-d),dn=d-cn,on=kn*vx,Cn=on-(on-vx),In=vx-Cn,ux=dn*In-(sx-cn*Cn-dn*Cn-cn*In),cx=Ct*dx,on=kn*Ct,cn=on-(on-Ct),dn=Ct-cn,on=kn*dx,Cn=on-(on-dx),In=dx-Cn,hx=dn*In-(cx-cn*Cn-dn*Cn-cn*In),ix=ux-hx,tn=ux-ix,Pn[0]=ux-(ix+tn)+(tn-hx),ax=sx+ix,tn=ax-sx,ox=sx-(ax-tn)+(ix-tn),ix=ox-cx,tn=ox-ix,Pn[1]=ox-(ix+tn)+(tn-cx),gx=ax+ix,tn=gx-ax,Pn[2]=ax-(gx-tn)+(ix-tn),Pn[3]=gx;const _x=La(4,Se$1,4,Pn,hs);sx=fx*en,on=kn*fx,cn=on-(on-fx),dn=fx-cn,on=kn*en,Cn=on-(on-en),In=en-Cn,ux=dn*In-(sx-cn*Cn-dn*Cn-cn*In),cx=mx*ar,on=kn*mx,cn=on-(on-mx),dn=mx-cn,on=kn*ar,Cn=on-(on-ar),In=ar-Cn,hx=dn*In-(cx-cn*Cn-dn*Cn-cn*In),ix=ux-hx,tn=ux-ix,Pn[0]=ux-(ix+tn)+(tn-hx),ax=sx+ix,tn=ax-sx,ox=sx-(ax-tn)+(ix-tn),ix=ox-cx,tn=ox-ix,Pn[1]=ox-(ix+tn)+(tn-cx),gx=ax+ix,tn=gx-ax,Pn[2]=ax-(gx-tn)+(ix-tn),Pn[3]=gx;const Ex=La(_x,hs,4,Pn,ds);sx=d*en,on=kn*d,cn=on-(on-d),dn=d-cn,on=kn*en,Cn=on-(on-en),In=en-Cn,ux=dn*In-(sx-cn*Cn-dn*Cn-cn*In),cx=Ct*ar,on=kn*Ct,cn=on-(on-Ct),dn=Ct-cn,on=kn*ar,Cn=on-(on-ar),In=ar-Cn,hx=dn*In-(cx-cn*Cn-dn*Cn-cn*In),ix=ux-hx,tn=ux-ix,Pn[0]=ux-(ix+tn)+(tn-hx),ax=sx+ix,tn=ax-sx,ox=sx-(ax-tn)+(ix-tn),ix=ox-cx,tn=ox-ix,Pn[1]=ox-(ix+tn)+(tn-cx),gx=ax+ix,tn=gx-ax,Pn[2]=ax-(gx-tn)+(ix-tn),Pn[3]=gx;const Tx=La(Ex,ds,4,Pn,gs);return gs[Tx-1]}function _i(t,n,a,s,l,u){const c=(n-u)*(a-l),d=(t-l)*(s-u),Ct=c-d,ar=Math.abs(c+d);return Math.abs(Ct)>=Pv*ar?Ct:-Ov(t,n,a,s,l,u,ar)}const ps=Math.pow(2,-52),vi=new Uint32Array(512);class io{static from(n,a=Bv,s=Uv){const l=n.length,u=new Float64Array(l*2);for(let c=0;c<l;c++){const d=n[c];u[2*c]=a(d),u[2*c+1]=s(d)}return new io(u)}constructor(n){const a=n.length>>1;if(a>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const s=Math.max(2*a-5,0);this._triangles=new Uint32Array(s*3),this._halfedges=new Int32Array(s*3),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:n,_hullPrev:a,_hullNext:s,_hullTri:l,_hullHash:u}=this,c=n.length>>1;let d=1/0,Ct=1/0,ar=-1/0,en=-1/0;for(let fx=0;fx<c;fx++){const dx=n[2*fx],mx=n[2*fx+1];dx<d&&(d=dx),mx<Ct&&(Ct=mx),dx>ar&&(ar=dx),mx>en&&(en=mx),this._ids[fx]=fx}const tn=(d+ar)/2,on=(Ct+en)/2;let cn,dn,Cn;for(let fx=0,dx=1/0;fx<c;fx++){const mx=Ba(tn,on,n[2*fx],n[2*fx+1]);mx<dx&&(cn=fx,dx=mx)}const In=n[2*cn],ix=n[2*cn+1];for(let fx=0,dx=1/0;fx<c;fx++){if(fx===cn)continue;const mx=Ba(In,ix,n[2*fx],n[2*fx+1]);mx<dx&&mx>0&&(dn=fx,dx=mx)}let ax=n[2*dn],ox=n[2*dn+1],sx=1/0;for(let fx=0;fx<c;fx++){if(fx===cn||fx===dn)continue;const dx=qv(In,ix,ax,ox,n[2*fx],n[2*fx+1]);dx<sx&&(Cn=fx,sx=dx)}let ux=n[2*Cn],cx=n[2*Cn+1];if(sx===1/0){for(let mx=0;mx<c;mx++)this._dists[mx]=n[2*mx]-n[0]||n[2*mx+1]-n[1];Ie$1(this._ids,this._dists,0,c-1);const fx=new Uint32Array(c);let dx=0;for(let mx=0,vx=-1/0;mx<c;mx++){const bx=this._ids[mx],xx=this._dists[bx];xx>vx&&(fx[dx++]=bx,vx=xx)}this.hull=fx.subarray(0,dx),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(_i(In,ix,ax,ox,ux,cx)<0){const fx=dn,dx=ax,mx=ox;dn=Cn,ax=ux,ox=cx,Cn=fx,ux=dx,cx=mx}const hx=Lv(In,ix,ax,ox,ux,cx);this._cx=hx.x,this._cy=hx.y;for(let fx=0;fx<c;fx++)this._dists[fx]=Ba(n[2*fx],n[2*fx+1],hx.x,hx.y);Ie$1(this._ids,this._dists,0,c-1),this._hullStart=cn;let gx=3;s[cn]=a[Cn]=dn,s[dn]=a[cn]=Cn,s[Cn]=a[dn]=cn,l[cn]=0,l[dn]=1,l[Cn]=2,u.fill(-1),u[this._hashKey(In,ix)]=cn,u[this._hashKey(ax,ox)]=dn,u[this._hashKey(ux,cx)]=Cn,this.trianglesLen=0,this._addTriangle(cn,dn,Cn,-1,-1,-1);for(let fx=0,dx,mx;fx<this._ids.length;fx++){const vx=this._ids[fx],bx=n[2*vx],xx=n[2*vx+1];if(fx>0&&Math.abs(bx-dx)<=ps&&Math.abs(xx-mx)<=ps||(dx=bx,mx=xx,vx===cn||vx===dn||vx===Cn))continue;let _x=0;for(let Ax=0,Nx=this._hashKey(bx,xx);Ax<this._hashSize&&(_x=u[(Nx+Ax)%this._hashSize],!(_x!==-1&&_x!==s[_x]));Ax++);_x=a[_x];let Ex=_x,Tx;for(;Tx=s[Ex],_i(bx,xx,n[2*Ex],n[2*Ex+1],n[2*Tx],n[2*Tx+1])>=0;)if(Ex=Tx,Ex===_x){Ex=-1;break}if(Ex===-1)continue;let Cx=this._addTriangle(Ex,vx,s[Ex],-1,-1,l[Ex]);l[vx]=this._legalize(Cx+2),l[Ex]=Cx,gx++;let Mx=s[Ex];for(;Tx=s[Mx],_i(bx,xx,n[2*Mx],n[2*Mx+1],n[2*Tx],n[2*Tx+1])<0;)Cx=this._addTriangle(Mx,vx,Tx,l[vx],-1,l[Mx]),l[vx]=this._legalize(Cx+2),s[Mx]=Mx,gx--,Mx=Tx;if(Ex===_x)for(;Tx=a[Ex],_i(bx,xx,n[2*Tx],n[2*Tx+1],n[2*Ex],n[2*Ex+1])<0;)Cx=this._addTriangle(Tx,vx,Ex,-1,l[Ex],l[Tx]),this._legalize(Cx+2),l[Tx]=Cx,s[Ex]=Ex,gx--,Ex=Tx;this._hullStart=a[vx]=Ex,s[Ex]=a[Mx]=vx,s[vx]=Mx,u[this._hashKey(bx,xx)]=vx,u[this._hashKey(n[2*Ex],n[2*Ex+1])]=Ex}this.hull=new Uint32Array(gx);for(let fx=0,dx=this._hullStart;fx<gx;fx++)this.hull[fx]=dx,dx=s[dx];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,a){return Math.floor(Yv(n-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:a,_halfedges:s,coords:l}=this;let u=0,c=0;for(;;){const d=s[n],Ct=n-n%3;if(c=Ct+(n+2)%3,d===-1){if(u===0)break;n=vi[--u];continue}const ar=d-d%3,en=Ct+(n+1)%3,tn=ar+(d+2)%3,on=a[c],cn=a[n],dn=a[en],Cn=a[tn];if(Fv(l[2*on],l[2*on+1],l[2*cn],l[2*cn+1],l[2*dn],l[2*dn+1],l[2*Cn],l[2*Cn+1])){a[n]=Cn,a[d]=on;const In=s[tn];if(In===-1){let ax=this._hullStart;do{if(this._hullTri[ax]===tn){this._hullTri[ax]=n;break}ax=this._hullPrev[ax]}while(ax!==this._hullStart)}this._link(n,In),this._link(d,s[c]),this._link(c,tn);const ix=ar+(d+1)%3;u<vi.length&&(vi[u++]=ix)}else{if(u===0)break;n=vi[--u]}}return c}_link(n,a){this._halfedges[n]=a,a!==-1&&(this._halfedges[a]=n)}_addTriangle(n,a,s,l,u,c){const d=this.trianglesLen;return this._triangles[d]=n,this._triangles[d+1]=a,this._triangles[d+2]=s,this._link(d,l),this._link(d+1,u),this._link(d+2,c),this.trianglesLen+=3,d}}function Yv(t,n){const a=t/(Math.abs(t)+Math.abs(n));return(n>0?3-a:1+a)/4}function Ba(t,n,a,s){const l=t-a,u=n-s;return l*l+u*u}function Fv(t,n,a,s,l,u,c,d){const Ct=t-c,ar=n-d,en=a-c,tn=s-d,on=l-c,cn=u-d,dn=Ct*Ct+ar*ar,Cn=en*en+tn*tn,In=on*on+cn*cn;return Ct*(tn*In-Cn*cn)-ar*(en*In-Cn*on)+dn*(en*cn-tn*on)<0}function qv(t,n,a,s,l,u){const c=a-t,d=s-n,Ct=l-t,ar=u-n,en=c*c+d*d,tn=Ct*Ct+ar*ar,on=.5/(c*ar-d*Ct),cn=(ar*en-d*tn)*on,dn=(c*tn-Ct*en)*on;return cn*cn+dn*dn}function Lv(t,n,a,s,l,u){const c=a-t,d=s-n,Ct=l-t,ar=u-n,en=c*c+d*d,tn=Ct*Ct+ar*ar,on=.5/(c*ar-d*Ct),cn=t+(ar*en-d*tn)*on,dn=n+(c*tn-Ct*en)*on;return{x:cn,y:dn}}function Ie$1(t,n,a,s){if(s-a<=20)for(let l=a+1;l<=s;l++){const u=t[l],c=n[u];let d=l-1;for(;d>=a&&n[t[d]]>c;)t[d+1]=t[d--];t[d+1]=u}else{const l=a+s>>1;let u=a+1,c=s;cr(t,l,u),n[t[a]]>n[t[s]]&&cr(t,a,s),n[t[u]]>n[t[s]]&&cr(t,u,s),n[t[a]]>n[t[u]]&&cr(t,a,u);const d=t[u],Ct=n[d];for(;;){do u++;while(n[t[u]]<Ct);do c--;while(n[t[c]]>Ct);if(c<u)break;cr(t,u,c)}t[a+1]=t[c],t[c]=d,s-u+1>=c-a?(Ie$1(t,n,u,s),Ie$1(t,n,a,c-1)):(Ie$1(t,n,a,c-1),Ie$1(t,n,u,s))}}function cr(t,n,a){const s=t[n];t[n]=t[a],t[a]=s}function Bv(t){return t[0]}function Uv(t){return t[1]}const ms=1e-6;let ne$1=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,a){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,a){this._+=`L${this._x1=+n},${this._y1=+a}`}arc(n,a,s){n=+n,a=+a,s=+s;const l=n+s,u=a;if(s<0)throw new Error("negative radius");this._x1===null?this._+=`M${l},${u}`:(Math.abs(this._x1-l)>ms||Math.abs(this._y1-u)>ms)&&(this._+="L"+l+","+u),s&&(this._+=`A${s},${s},0,1,1,${n-s},${a}A${s},${s},0,1,1,${this._x1=l},${this._y1=u}`)}rect(n,a,s,l){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${+s}v${+l}h${-s}Z`}value(){return this._||null}};class Iu{constructor(){this._=[]}moveTo(n,a){this._.push([n,a])}closePath(){this._.push(this._[0].slice())}lineTo(n,a){this._.push([n,a])}value(){return this._.length?this._:null}}class v0{constructor(n,[a,s,l,u]=[0,0,960,500]){if(!((l=+l)>=(a=+a))||!((u=+u)>=(s=+s)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=l,this.xmin=a,this.ymax=u,this.ymin=s,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:a,triangles:s},vectors:l}=this;let u,c;const d=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2);for(let Cn=0,In=0,ix=s.length,ax,ox;Cn<ix;Cn+=3,In+=2){const sx=s[Cn]*2,ux=s[Cn+1]*2,cx=s[Cn+2]*2,hx=n[sx],gx=n[sx+1],fx=n[ux],dx=n[ux+1],mx=n[cx],vx=n[cx+1],bx=fx-hx,xx=dx-gx,_x=mx-hx,Ex=vx-gx,Tx=(bx*Ex-xx*_x)*2;if(Math.abs(Tx)<1e-9){if(u===void 0){u=c=0;for(const Mx of a)u+=n[Mx*2],c+=n[Mx*2+1];u/=a.length,c/=a.length}const Cx=1e9*Math.sign((u-hx)*Ex-(c-gx)*_x);ax=(hx+mx)/2-Cx*Ex,ox=(gx+vx)/2+Cx*_x}else{const Cx=1/Tx,Mx=bx*bx+xx*xx,Ax=_x*_x+Ex*Ex;ax=hx+(Ex*Mx-xx*Ax)*Cx,ox=gx+(bx*Ax-_x*Mx)*Cx}d[In]=ax,d[In+1]=ox}let Ct=a[a.length-1],ar,en=Ct*4,tn,on=n[2*Ct],cn,dn=n[2*Ct+1];l.fill(0);for(let Cn=0;Cn<a.length;++Cn)Ct=a[Cn],ar=en,tn=on,cn=dn,en=Ct*4,on=n[2*Ct],dn=n[2*Ct+1],l[ar+2]=l[en]=cn-dn,l[ar+3]=l[en+1]=on-tn}render(n){const a=n==null?n=new ne$1:void 0,{delaunay:{halfedges:s,inedges:l,hull:u},circumcenters:c,vectors:d}=this;if(u.length<=1)return null;for(let en=0,tn=s.length;en<tn;++en){const on=s[en];if(on<en)continue;const cn=Math.floor(en/3)*2,dn=Math.floor(on/3)*2,Cn=c[cn],In=c[cn+1],ix=c[dn],ax=c[dn+1];this._renderSegment(Cn,In,ix,ax,n)}let Ct,ar=u[u.length-1];for(let en=0;en<u.length;++en){Ct=ar,ar=u[en];const tn=Math.floor(l[ar]/3)*2,on=c[tn],cn=c[tn+1],dn=Ct*4,Cn=this._project(on,cn,d[dn+2],d[dn+3]);Cn&&this._renderSegment(on,cn,Cn[0],Cn[1],n)}return a&&a.value()}renderBounds(n){const a=n==null?n=new ne$1:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(n,a){const s=a==null?a=new ne$1:void 0,l=this._clip(n);if(l===null||!l.length)return;a.moveTo(l[0],l[1]);let u=l.length;for(;l[0]===l[u-2]&&l[1]===l[u-1]&&u>1;)u-=2;for(let c=2;c<u;c+=2)(l[c]!==l[c-2]||l[c+1]!==l[c-1])&&a.lineTo(l[c],l[c+1]);return a.closePath(),s&&s.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let a=0,s=n.length/2;a<s;++a){const l=this.cellPolygon(a);l&&(l.index=a,yield l)}}cellPolygon(n){const a=new Iu;return this.renderCell(n,a),a.value()}_renderSegment(n,a,s,l,u){let c;const d=this._regioncode(n,a),Ct=this._regioncode(s,l);d===0&&Ct===0?(u.moveTo(n,a),u.lineTo(s,l)):(c=this._clipSegment(n,a,s,l,d,Ct))&&(u.moveTo(c[0],c[1]),u.lineTo(c[2],c[3]))}contains(n,a,s){return a=+a,a!==a||(s=+s,s!==s)?!1:this.delaunay._step(n,a,s)===n}*neighbors(n){const a=this._clip(n);if(a)for(const s of this.delaunay.neighbors(n)){const l=this._clip(s);if(l){e:for(let u=0,c=a.length;u<c;u+=2)for(let d=0,Ct=l.length;d<Ct;d+=2)if(a[u]===l[d]&&a[u+1]===l[d+1]&&a[(u+2)%c]===l[(d+Ct-2)%Ct]&&a[(u+3)%c]===l[(d+Ct-1)%Ct]){yield s;break e}}}}_cell(n){const{circumcenters:a,delaunay:{inedges:s,halfedges:l,triangles:u}}=this,c=s[n];if(c===-1)return null;const d=[];let Ct=c;do{const ar=Math.floor(Ct/3);if(d.push(a[ar*2],a[ar*2+1]),Ct=Ct%3===2?Ct-2:Ct+1,u[Ct]!==n)break;Ct=l[Ct]}while(Ct!==c&&Ct!==-1);return d}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(n);if(a===null)return null;const{vectors:s}=this,l=n*4;return this._simplify(s[l]||s[l+1]?this._clipInfinite(n,a,s[l],s[l+1],s[l+2],s[l+3]):this._clipFinite(n,a))}_clipFinite(n,a){const s=a.length;let l=null,u,c,d=a[s-2],Ct=a[s-1],ar,en=this._regioncode(d,Ct),tn,on=0;for(let cn=0;cn<s;cn+=2)if(u=d,c=Ct,d=a[cn],Ct=a[cn+1],ar=en,en=this._regioncode(d,Ct),ar===0&&en===0)tn=on,on=0,l?l.push(d,Ct):l=[d,Ct];else{let dn,Cn,In,ix,ax;if(ar===0){if((dn=this._clipSegment(u,c,d,Ct,ar,en))===null)continue;[Cn,In,ix,ax]=dn}else{if((dn=this._clipSegment(d,Ct,u,c,en,ar))===null)continue;[ix,ax,Cn,In]=dn,tn=on,on=this._edgecode(Cn,In),tn&&on&&this._edge(n,tn,on,l,l.length),l?l.push(Cn,In):l=[Cn,In]}tn=on,on=this._edgecode(ix,ax),tn&&on&&this._edge(n,tn,on,l,l.length),l?l.push(ix,ax):l=[ix,ax]}if(l)tn=on,on=this._edgecode(l[0],l[1]),tn&&on&&this._edge(n,tn,on,l,l.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(n,a,s,l,u,c){const d=u<c;for(d&&([n,a,s,l,u,c]=[s,l,n,a,c,u]);;){if(u===0&&c===0)return d?[s,l,n,a]:[n,a,s,l];if(u&c)return null;let Ct,ar,en=u||c;en&8?(Ct=n+(s-n)*(this.ymax-a)/(l-a),ar=this.ymax):en&4?(Ct=n+(s-n)*(this.ymin-a)/(l-a),ar=this.ymin):en&2?(ar=a+(l-a)*(this.xmax-n)/(s-n),Ct=this.xmax):(ar=a+(l-a)*(this.xmin-n)/(s-n),Ct=this.xmin),u?(n=Ct,a=ar,u=this._regioncode(n,a)):(s=Ct,l=ar,c=this._regioncode(s,l))}}_clipInfinite(n,a,s,l,u,c){let d=Array.from(a),Ct;if((Ct=this._project(d[0],d[1],s,l))&&d.unshift(Ct[0],Ct[1]),(Ct=this._project(d[d.length-2],d[d.length-1],u,c))&&d.push(Ct[0],Ct[1]),d=this._clipFinite(n,d))for(let ar=0,en=d.length,tn,on=this._edgecode(d[en-2],d[en-1]);ar<en;ar+=2)tn=on,on=this._edgecode(d[ar],d[ar+1]),tn&&on&&(ar=this._edge(n,tn,on,d,ar),en=d.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(n,a,s,l,u){for(;a!==s;){let c,d;switch(a){case 5:a=4;continue;case 4:a=6,c=this.xmax,d=this.ymin;break;case 6:a=2;continue;case 2:a=10,c=this.xmax,d=this.ymax;break;case 10:a=8;continue;case 8:a=9,c=this.xmin,d=this.ymax;break;case 9:a=1;continue;case 1:a=5,c=this.xmin,d=this.ymin;break}(l[u]!==c||l[u+1]!==d)&&this.contains(n,c,d)&&(l.splice(u,0,c,d),u+=2)}return u}_project(n,a,s,l){let u=1/0,c,d,Ct;if(l<0){if(a<=this.ymin)return null;(c=(this.ymin-a)/l)<u&&(Ct=this.ymin,d=n+(u=c)*s)}else if(l>0){if(a>=this.ymax)return null;(c=(this.ymax-a)/l)<u&&(Ct=this.ymax,d=n+(u=c)*s)}if(s>0){if(n>=this.xmax)return null;(c=(this.xmax-n)/s)<u&&(d=this.xmax,Ct=a+(u=c)*l)}else if(s<0){if(n<=this.xmin)return null;(c=(this.xmin-n)/s)<u&&(d=this.xmin,Ct=a+(u=c)*l)}return[d,Ct]}_edgecode(n,a){return(n===this.xmin?1:n===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(n,a){return(n<this.xmin?1:n>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let a=0;a<n.length;a+=2){const s=(a+2)%n.length,l=(a+4)%n.length;(n[a]===n[s]&&n[s]===n[l]||n[a+1]===n[s+1]&&n[s+1]===n[l+1])&&(n.splice(s,2),a-=2)}n.length||(n=null)}return n}}const Xv=2*Math.PI,Ee$1=Math.pow;function Hv(t){return t[0]}function jv(t){return t[1]}function Wv(t){const{triangles:n,coords:a}=t;for(let s=0;s<n.length;s+=3){const l=2*n[s],u=2*n[s+1],c=2*n[s+2];if((a[c]-a[l])*(a[u+1]-a[l+1])-(a[u]-a[l])*(a[c+1]-a[l+1])>1e-10)return!1}return!0}function Vv(t,n,a){return[t+Math.sin(t+n)*a,n+Math.cos(t-n)*a]}class zf{static from(n,a=Hv,s=jv,l){return new zf("length"in n?Gv(n,a,s,l):Float64Array.from(Zv(n,a,s,l)))}constructor(n){this._delaunator=new io(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,a=this.points;if(n.hull&&n.hull.length>2&&Wv(n)){this.collinear=Int32Array.from({length:a.length/2},(on,cn)=>cn).sort((on,cn)=>a[2*on]-a[2*cn]||a[2*on+1]-a[2*cn+1]);const Ct=this.collinear[0],ar=this.collinear[this.collinear.length-1],en=[a[2*Ct],a[2*Ct+1],a[2*ar],a[2*ar+1]],tn=1e-8*Math.hypot(en[3]-en[1],en[2]-en[0]);for(let on=0,cn=a.length/2;on<cn;++on){const dn=Vv(a[2*on],a[2*on+1],tn);a[2*on]=dn[0],a[2*on+1]=dn[1]}this._delaunator=new io(a)}else delete this.collinear;const s=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,u=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let Ct=0,ar=s.length;Ct<ar;++Ct){const en=u[Ct%3===2?Ct-2:Ct+1];(s[Ct]===-1||c[en]===-1)&&(c[en]=Ct)}for(let Ct=0,ar=l.length;Ct<ar;++Ct)d[l[Ct]]=Ct;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],c[l[0]]=1,l.length===2&&(c[l[1]]=0,this.triangles[1]=l[1],this.triangles[2]=l[1]))}voronoi(n){return new v0(this,n)}*neighbors(n){const{inedges:a,hull:s,_hullIndex:l,halfedges:u,triangles:c,collinear:d}=this;if(d){const tn=d.indexOf(n);tn>0&&(yield d[tn-1]),tn<d.length-1&&(yield d[tn+1]);return}const Ct=a[n];if(Ct===-1)return;let ar=Ct,en=-1;do{if(yield en=c[ar],ar=ar%3===2?ar-2:ar+1,c[ar]!==n)return;if(ar=u[ar],ar===-1){const tn=s[(l[n]+1)%s.length];tn!==en&&(yield tn);return}}while(ar!==Ct)}find(n,a,s=0){if(n=+n,n!==n||(a=+a,a!==a))return-1;const l=s;let u;for(;(u=this._step(s,n,a))>=0&&u!==s&&u!==l;)s=u;return u}_step(n,a,s){const{inedges:l,hull:u,_hullIndex:c,halfedges:d,triangles:Ct,points:ar}=this;if(l[n]===-1||!ar.length)return(n+1)%(ar.length>>1);let en=n,tn=Ee$1(a-ar[n*2],2)+Ee$1(s-ar[n*2+1],2);const on=l[n];let cn=on;do{let dn=Ct[cn];const Cn=Ee$1(a-ar[dn*2],2)+Ee$1(s-ar[dn*2+1],2);if(Cn<tn&&(tn=Cn,en=dn),cn=cn%3===2?cn-2:cn+1,Ct[cn]!==n)break;if(cn=d[cn],cn===-1){if(cn=u[(c[n]+1)%u.length],cn!==dn&&Ee$1(a-ar[cn*2],2)+Ee$1(s-ar[cn*2+1],2)<tn)return cn;break}}while(cn!==on);return en}render(n){const a=n==null?n=new ne$1:void 0,{points:s,halfedges:l,triangles:u}=this;for(let c=0,d=l.length;c<d;++c){const Ct=l[c];if(Ct<c)continue;const ar=u[c]*2,en=u[Ct]*2;n.moveTo(s[ar],s[ar+1]),n.lineTo(s[en],s[en+1])}return this.renderHull(n),a&&a.value()}renderPoints(n,a){a===void 0&&(!n||typeof n.moveTo!="function")&&(a=n,n=null),a=a==null?2:+a;const s=n==null?n=new ne$1:void 0,{points:l}=this;for(let u=0,c=l.length;u<c;u+=2){const d=l[u],Ct=l[u+1];n.moveTo(d+a,Ct),n.arc(d,Ct,a,0,Xv)}return s&&s.value()}renderHull(n){const a=n==null?n=new ne$1:void 0,{hull:s,points:l}=this,u=s[0]*2,c=s.length;n.moveTo(l[u],l[u+1]);for(let d=1;d<c;++d){const Ct=2*s[d];n.lineTo(l[Ct],l[Ct+1])}return n.closePath(),a&&a.value()}hullPolygon(){const n=new Iu;return this.renderHull(n),n.value()}renderTriangle(n,a){const s=a==null?a=new ne$1:void 0,{points:l,triangles:u}=this,c=u[n*=3]*2,d=u[n+1]*2,Ct=u[n+2]*2;return a.moveTo(l[c],l[c+1]),a.lineTo(l[d],l[d+1]),a.lineTo(l[Ct],l[Ct+1]),a.closePath(),s&&s.value()}*trianglePolygons(){const{triangles:n}=this;for(let a=0,s=n.length/3;a<s;++a)yield this.trianglePolygon(a)}trianglePolygon(n){const a=new Iu;return this.renderTriangle(n,a),a.value()}}function Gv(t,n,a,s){const l=t.length,u=new Float64Array(l*2);for(let c=0;c<l;++c){const d=t[c];u[c*2]=n.call(s,d,c,t),u[c*2+1]=a.call(s,d,c,t)}return u}function*Zv(t,n,a,s){let l=0;for(const u of t)yield n.call(s,u,l,t),yield a.call(s,u,l,t),++l}var ys={},Ua={},Xa=34,sr=10,Ha=13;function b0(t){return new Function("d","return {"+t.map(function(n,a){return JSON.stringify(n)+": d["+a+'] || ""'}).join(",")+"}")}function Qv(t,n){var a=b0(t);return function(s,l){return n(a(s),l,t)}}function _s(t){var n=Object.create(null),a=[];return t.forEach(function(s){for(var l in s)l in n||a.push(n[l]=l)}),a}function Hn(t,n){var a=t+"",s=a.length;return s<n?new Array(n-s+1).join(0)+a:a}function Kv(t){return t<0?"-"+Hn(-t,6):t>9999?"+"+Hn(t,6):Hn(t,4)}function Jv(t){var n=t.getUTCHours(),a=t.getUTCMinutes(),s=t.getUTCSeconds(),l=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Kv(t.getUTCFullYear())+"-"+Hn(t.getUTCMonth()+1,2)+"-"+Hn(t.getUTCDate(),2)+(l?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(s,2)+"."+Hn(l,3)+"Z":s?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(s,2)+"Z":a||n?"T"+Hn(n,2)+":"+Hn(a,2)+"Z":"")}function na(t){var n=new RegExp('["'+t+`
\r]`),a=t.charCodeAt(0);function s(tn,on){var cn,dn,Cn=l(tn,function(In,ix){if(cn)return cn(In,ix-1);dn=In,cn=on?Qv(In,on):b0(In)});return Cn.columns=dn||[],Cn}function l(tn,on){var cn=[],dn=tn.length,Cn=0,In=0,ix,ax=dn<=0,ox=!1;tn.charCodeAt(dn-1)===sr&&--dn,tn.charCodeAt(dn-1)===Ha&&--dn;function sx(){if(ax)return Ua;if(ox)return ox=!1,ys;var cx,hx=Cn,gx;if(tn.charCodeAt(hx)===Xa){for(;Cn++<dn&&tn.charCodeAt(Cn)!==Xa||tn.charCodeAt(++Cn)===Xa;);return(cx=Cn)>=dn?ax=!0:(gx=tn.charCodeAt(Cn++))===sr?ox=!0:gx===Ha&&(ox=!0,tn.charCodeAt(Cn)===sr&&++Cn),tn.slice(hx+1,cx-1).replace(/""/g,'"')}for(;Cn<dn;){if((gx=tn.charCodeAt(cx=Cn++))===sr)ox=!0;else if(gx===Ha)ox=!0,tn.charCodeAt(Cn)===sr&&++Cn;else if(gx!==a)continue;return tn.slice(hx,cx)}return ax=!0,tn.slice(hx,dn)}for(;(ix=sx())!==Ua;){for(var ux=[];ix!==ys&&ix!==Ua;)ux.push(ix),ix=sx();on&&(ux=on(ux,In++))==null||cn.push(ux)}return cn}function u(tn,on){return tn.map(function(cn){return on.map(function(dn){return en(cn[dn])}).join(t)})}function c(tn,on){return on==null&&(on=_s(tn)),[on.map(en).join(t)].concat(u(tn,on)).join(`
`)}function d(tn,on){return on==null&&(on=_s(tn)),u(tn,on).join(`
`)}function Ct(tn){return tn.map(ar).join(`
`)}function ar(tn){return tn.map(en).join(t)}function en(tn){return tn==null?"":tn instanceof Date?Jv(tn):n.test(tn+="")?'"'+tn.replace(/"/g,'""')+'"':tn}return{parse:s,parseRows:l,format:c,formatBody:d,formatRows:Ct,formatRow:ar,formatValue:en}}var ye$1=na(","),w0=ye$1.parse,nb=ye$1.parseRows,tb=ye$1.format,eb=ye$1.formatBody,rb$1=ye$1.formatRows,ib=ye$1.formatRow,ob=ye$1.formatValue,_e=na("	"),x0=_e.parse,ab=_e.parseRows,ub=_e.format,fb=_e.formatBody,cb=_e.formatRows,sb=_e.formatRow,lb$1=_e.formatValue;function hb(t){for(var n in t){var a=t[n].trim(),s,l;if(!a)a=null;else if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(!isNaN(s=+a))a=s;else if(l=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))db&&l[4]&&!l[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a);else continue;t[n]=a}return t}const db=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function gb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function pb(t,n){return fetch(t,n).then(gb)}function mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function yb(t,n){return fetch(t,n).then(mb)}function _b$1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ta(t,n){return fetch(t,n).then(_b$1)}function M0(t){return function(n,a,s){return arguments.length===2&&typeof a=="function"&&(s=a,a=void 0),ta(n,a).then(function(l){return t(l,s)})}}function vb(t,n,a,s){arguments.length===3&&typeof a=="function"&&(s=a,a=void 0);var l=na(t);return ta(n,a).then(function(u){return l.parse(u,s)})}var bb=M0(w0),wb=M0(x0);function xb(t,n){return new Promise(function(a,s){var l=new Image;for(var u in n)l[u]=n[u];l.onerror=s,l.onload=function(){a(l)},l.src=t})}function Mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function $b(t,n){return fetch(t,n).then(Mb)}function Of(t){return(n,a)=>ta(n,a).then(s=>new DOMParser().parseFromString(s,t))}const $0=Of("application/xml");var Tb=Of("text/html"),Ab=Of("image/svg+xml");function Sb(t,n){var a,s=1;t==null&&(t=0),n==null&&(n=0);function l(){var u,c=a.length,d,Ct=0,ar=0;for(u=0;u<c;++u)d=a[u],Ct+=d.x,ar+=d.y;for(Ct=(Ct/c-t)*s,ar=(ar/c-n)*s,u=0;u<c;++u)d=a[u],d.x-=Ct,d.y-=ar}return l.initialize=function(u){a=u},l.x=function(u){return arguments.length?(t=+u,l):t},l.y=function(u){return arguments.length?(n=+u,l):n},l.strength=function(u){return arguments.length?(s=+u,l):s},l}function Eb(t){const n=+this._x.call(null,t),a=+this._y.call(null,t);return T0(this.cover(n,a),n,a,t)}function T0(t,n,a,s){if(isNaN(n)||isNaN(a))return t;var l,u=t._root,c={data:s},d=t._x0,Ct=t._y0,ar=t._x1,en=t._y1,tn,on,cn,dn,Cn,In,ix,ax;if(!u)return t._root=c,t;for(;u.length;)if((Cn=n>=(tn=(d+ar)/2))?d=tn:ar=tn,(In=a>=(on=(Ct+en)/2))?Ct=on:en=on,l=u,!(u=u[ix=In<<1|Cn]))return l[ix]=c,t;if(cn=+t._x.call(null,u.data),dn=+t._y.call(null,u.data),n===cn&&a===dn)return c.next=u,l?l[ix]=c:t._root=c,t;do l=l?l[ix]=new Array(4):t._root=new Array(4),(Cn=n>=(tn=(d+ar)/2))?d=tn:ar=tn,(In=a>=(on=(Ct+en)/2))?Ct=on:en=on;while((ix=In<<1|Cn)===(ax=(dn>=on)<<1|cn>=tn));return l[ax]=u,l[ix]=c,t}function kb(t){var n,a,s=t.length,l,u,c=new Array(s),d=new Array(s),Ct=1/0,ar=1/0,en=-1/0,tn=-1/0;for(a=0;a<s;++a)isNaN(l=+this._x.call(null,n=t[a]))||isNaN(u=+this._y.call(null,n))||(c[a]=l,d[a]=u,l<Ct&&(Ct=l),l>en&&(en=l),u<ar&&(ar=u),u>tn&&(tn=u));if(Ct>en||ar>tn)return this;for(this.cover(Ct,ar).cover(en,tn),a=0;a<s;++a)T0(this,c[a],d[a],t[a]);return this}function Nb(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var a=this._x0,s=this._y0,l=this._x1,u=this._y1;if(isNaN(a))l=(a=Math.floor(t))+1,u=(s=Math.floor(n))+1;else{for(var c=l-a||1,d=this._root,Ct,ar;a>t||t>=l||s>n||n>=u;)switch(ar=(n<s)<<1|t<a,Ct=new Array(4),Ct[ar]=d,d=Ct,c*=2,ar){case 0:l=a+c,u=s+c;break;case 1:a=l-c,u=s+c;break;case 2:l=a+c,s=u-c;break;case 3:a=l-c,s=u-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=a,this._y0=s,this._x1=l,this._y1=u,this}function Rb(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Ib(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yn(t,n,a,s,l){this.node=t,this.x0=n,this.y0=a,this.x1=s,this.y1=l}function Cb(t,n,a){var s,l=this._x0,u=this._y0,c,d,Ct,ar,en=this._x1,tn=this._y1,on=[],cn=this._root,dn,Cn;for(cn&&on.push(new Yn(cn,l,u,en,tn)),a==null?a=1/0:(l=t-a,u=n-a,en=t+a,tn=n+a,a*=a);dn=on.pop();)if(!(!(cn=dn.node)||(c=dn.x0)>en||(d=dn.y0)>tn||(Ct=dn.x1)<l||(ar=dn.y1)<u))if(cn.length){var In=(c+Ct)/2,ix=(d+ar)/2;on.push(new Yn(cn[3],In,ix,Ct,ar),new Yn(cn[2],c,ix,In,ar),new Yn(cn[1],In,d,Ct,ix),new Yn(cn[0],c,d,In,ix)),(Cn=(n>=ix)<<1|t>=In)&&(dn=on[on.length-1],on[on.length-1]=on[on.length-1-Cn],on[on.length-1-Cn]=dn)}else{var ax=t-+this._x.call(null,cn.data),ox=n-+this._y.call(null,cn.data),sx=ax*ax+ox*ox;if(sx<a){var ux=Math.sqrt(a=sx);l=t-ux,u=n-ux,en=t+ux,tn=n+ux,s=cn.data}}return s}function Pb(t){if(isNaN(en=+this._x.call(null,t))||isNaN(tn=+this._y.call(null,t)))return this;var n,a=this._root,s,l,u,c=this._x0,d=this._y0,Ct=this._x1,ar=this._y1,en,tn,on,cn,dn,Cn,In,ix;if(!a)return this;if(a.length)for(;;){if((dn=en>=(on=(c+Ct)/2))?c=on:Ct=on,(Cn=tn>=(cn=(d+ar)/2))?d=cn:ar=cn,n=a,!(a=a[In=Cn<<1|dn]))return this;if(!a.length)break;(n[In+1&3]||n[In+2&3]||n[In+3&3])&&(s=n,ix=In)}for(;a.data!==t;)if(l=a,!(a=a.next))return this;return(u=a.next)&&delete a.next,l?(u?l.next=u:delete l.next,this):n?(u?n[In]=u:delete n[In],(a=n[0]||n[1]||n[2]||n[3])&&a===(n[3]||n[2]||n[1]||n[0])&&!a.length&&(s?s[ix]=a:this._root=a),this):(this._root=u,this)}function Db(t){for(var n=0,a=t.length;n<a;++n)this.remove(t[n]);return this}function zb(){return this._root}function Ob(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Yb(t){var n=[],a,s=this._root,l,u,c,d,Ct;for(s&&n.push(new Yn(s,this._x0,this._y0,this._x1,this._y1));a=n.pop();)if(!t(s=a.node,u=a.x0,c=a.y0,d=a.x1,Ct=a.y1)&&s.length){var ar=(u+d)/2,en=(c+Ct)/2;(l=s[3])&&n.push(new Yn(l,ar,en,d,Ct)),(l=s[2])&&n.push(new Yn(l,u,en,ar,Ct)),(l=s[1])&&n.push(new Yn(l,ar,c,d,en)),(l=s[0])&&n.push(new Yn(l,u,c,ar,en))}return this}function Fb(t){var n=[],a=[],s;for(this._root&&n.push(new Yn(this._root,this._x0,this._y0,this._x1,this._y1));s=n.pop();){var l=s.node;if(l.length){var u,c=s.x0,d=s.y0,Ct=s.x1,ar=s.y1,en=(c+Ct)/2,tn=(d+ar)/2;(u=l[0])&&n.push(new Yn(u,c,d,en,tn)),(u=l[1])&&n.push(new Yn(u,en,d,Ct,tn)),(u=l[2])&&n.push(new Yn(u,c,tn,en,ar)),(u=l[3])&&n.push(new Yn(u,en,tn,Ct,ar))}a.push(s)}for(;s=a.pop();)t(s.node,s.x0,s.y0,s.x1,s.y1);return this}function qb(t){return t[0]}function Lb(t){return arguments.length?(this._x=t,this):this._x}function Bb(t){return t[1]}function Ub(t){return arguments.length?(this._y=t,this):this._y}function ea(t,n,a){var s=new Yf(n??qb,a??Bb,NaN,NaN,NaN,NaN);return t==null?s:s.addAll(t)}function Yf(t,n,a,s,l,u){this._x=t,this._y=n,this._x0=a,this._y0=s,this._x1=l,this._y1=u,this._root=void 0}function vs(t){for(var n={data:t.data},a=n;t=t.next;)a=a.next={data:t.data};return n}var Xn=ea.prototype=Yf.prototype;Xn.copy=function(){var t=new Yf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,a,s;if(!n)return t;if(!n.length)return t._root=vs(n),t;for(a=[{source:n,target:t._root=new Array(4)}];n=a.pop();)for(var l=0;l<4;++l)(s=n.source[l])&&(s.length?a.push({source:s,target:n.target[l]=new Array(4)}):n.target[l]=vs(s));return t};Xn.add=Eb;Xn.addAll=kb;Xn.cover=Nb;Xn.data=Rb;Xn.extent=Ib;Xn.find=Cb;Xn.remove=Pb;Xn.removeAll=Db;Xn.root=zb;Xn.size=Ob;Xn.visit=Yb;Xn.visitAfter=Fb;Xn.x=Lb;Xn.y=Ub;function vn(t){return function(){return t}}function Ot(t){return(t()-.5)*1e-6}function Xb(t){return t.x+t.vx}function Hb(t){return t.y+t.vy}function jb(t){var n,a,s,l=1,u=1;typeof t!="function"&&(t=vn(t==null?1:+t));function c(){for(var ar,en=n.length,tn,on,cn,dn,Cn,In,ix=0;ix<u;++ix)for(tn=ea(n,Xb,Hb).visitAfter(d),ar=0;ar<en;++ar)on=n[ar],Cn=a[on.index],In=Cn*Cn,cn=on.x+on.vx,dn=on.y+on.vy,tn.visit(ax);function ax(ox,sx,ux,cx,hx){var gx=ox.data,fx=ox.r,dx=Cn+fx;if(gx){if(gx.index>on.index){var mx=cn-gx.x-gx.vx,vx=dn-gx.y-gx.vy,bx=mx*mx+vx*vx;bx<dx*dx&&(mx===0&&(mx=Ot(s),bx+=mx*mx),vx===0&&(vx=Ot(s),bx+=vx*vx),bx=(dx-(bx=Math.sqrt(bx)))/bx*l,on.vx+=(mx*=bx)*(dx=(fx*=fx)/(In+fx)),on.vy+=(vx*=bx)*dx,gx.vx-=mx*(dx=1-dx),gx.vy-=vx*dx)}return}return sx>cn+dx||cx<cn-dx||ux>dn+dx||hx<dn-dx}}function d(ar){if(ar.data)return ar.r=a[ar.data.index];for(var en=ar.r=0;en<4;++en)ar[en]&&ar[en].r>ar.r&&(ar.r=ar[en].r)}function Ct(){if(n){var ar,en=n.length,tn;for(a=new Array(en),ar=0;ar<en;++ar)tn=n[ar],a[tn.index]=+t(tn,ar,n)}}return c.initialize=function(ar,en){n=ar,s=en,Ct()},c.iterations=function(ar){return arguments.length?(u=+ar,c):u},c.strength=function(ar){return arguments.length?(l=+ar,c):l},c.radius=function(ar){return arguments.length?(t=typeof ar=="function"?ar:vn(+ar),Ct(),c):t},c}function Wb(t){return t.index}function bs(t,n){var a=t.get(n);if(!a)throw new Error("node not found: "+n);return a}function Vb(t){var n=Wb,a=tn,s,l=vn(30),u,c,d,Ct,ar,en=1;t==null&&(t=[]);function tn(In){return 1/Math.min(d[In.source.index],d[In.target.index])}function on(In){for(var ix=0,ax=t.length;ix<en;++ix)for(var ox=0,sx,ux,cx,hx,gx,fx,dx;ox<ax;++ox)sx=t[ox],ux=sx.source,cx=sx.target,hx=cx.x+cx.vx-ux.x-ux.vx||Ot(ar),gx=cx.y+cx.vy-ux.y-ux.vy||Ot(ar),fx=Math.sqrt(hx*hx+gx*gx),fx=(fx-u[ox])/fx*In*s[ox],hx*=fx,gx*=fx,cx.vx-=hx*(dx=Ct[ox]),cx.vy-=gx*dx,ux.vx+=hx*(dx=1-dx),ux.vy+=gx*dx}function cn(){if(c){var In,ix=c.length,ax=t.length,ox=new Map(c.map((ux,cx)=>[n(ux,cx,c),ux])),sx;for(In=0,d=new Array(ix);In<ax;++In)sx=t[In],sx.index=In,typeof sx.source!="object"&&(sx.source=bs(ox,sx.source)),typeof sx.target!="object"&&(sx.target=bs(ox,sx.target)),d[sx.source.index]=(d[sx.source.index]||0)+1,d[sx.target.index]=(d[sx.target.index]||0)+1;for(In=0,Ct=new Array(ax);In<ax;++In)sx=t[In],Ct[In]=d[sx.source.index]/(d[sx.source.index]+d[sx.target.index]);s=new Array(ax),dn(),u=new Array(ax),Cn()}}function dn(){if(c)for(var In=0,ix=t.length;In<ix;++In)s[In]=+a(t[In],In,t)}function Cn(){if(c)for(var In=0,ix=t.length;In<ix;++In)u[In]=+l(t[In],In,t)}return on.initialize=function(In,ix){c=In,ar=ix,cn()},on.links=function(In){return arguments.length?(t=In,cn(),on):t},on.id=function(In){return arguments.length?(n=In,on):n},on.iterations=function(In){return arguments.length?(en=+In,on):en},on.strength=function(In){return arguments.length?(a=typeof In=="function"?In:vn(+In),dn(),on):a},on.distance=function(In){return arguments.length?(l=typeof In=="function"?In:vn(+In),Cn(),on):l},on}const Gb=1664525,Zb=1013904223,ws=4294967296;function Qb(){let t=1;return()=>(t=(Gb*t+Zb)%ws)/ws}function Kb(t){return t.x}function Jb(t){return t.y}var nw=10,tw=Math.PI*(3-Math.sqrt(5));function ew(t){var n,a=1,s=.001,l=1-Math.pow(s,1/300),u=0,c=.6,d=new Map,Ct=Qo(tn),ar=pe$1("tick","end"),en=Qb();t==null&&(t=[]);function tn(){on(),ar.call("tick",n),a<s&&(Ct.stop(),ar.call("end",n))}function on(Cn){var In,ix=t.length,ax;Cn===void 0&&(Cn=1);for(var ox=0;ox<Cn;++ox)for(a+=(u-a)*l,d.forEach(function(sx){sx(a)}),In=0;In<ix;++In)ax=t[In],ax.fx==null?ax.x+=ax.vx*=c:(ax.x=ax.fx,ax.vx=0),ax.fy==null?ax.y+=ax.vy*=c:(ax.y=ax.fy,ax.vy=0);return n}function cn(){for(var Cn=0,In=t.length,ix;Cn<In;++Cn){if(ix=t[Cn],ix.index=Cn,ix.fx!=null&&(ix.x=ix.fx),ix.fy!=null&&(ix.y=ix.fy),isNaN(ix.x)||isNaN(ix.y)){var ax=nw*Math.sqrt(.5+Cn),ox=Cn*tw;ix.x=ax*Math.cos(ox),ix.y=ax*Math.sin(ox)}(isNaN(ix.vx)||isNaN(ix.vy))&&(ix.vx=ix.vy=0)}}function dn(Cn){return Cn.initialize&&Cn.initialize(t,en),Cn}return cn(),n={tick:on,restart:function(){return Ct.restart(tn),n},stop:function(){return Ct.stop(),n},nodes:function(Cn){return arguments.length?(t=Cn,cn(),d.forEach(dn),n):t},alpha:function(Cn){return arguments.length?(a=+Cn,n):a},alphaMin:function(Cn){return arguments.length?(s=+Cn,n):s},alphaDecay:function(Cn){return arguments.length?(l=+Cn,n):+l},alphaTarget:function(Cn){return arguments.length?(u=+Cn,n):u},velocityDecay:function(Cn){return arguments.length?(c=1-Cn,n):1-c},randomSource:function(Cn){return arguments.length?(en=Cn,d.forEach(dn),n):en},force:function(Cn,In){return arguments.length>1?(In==null?d.delete(Cn):d.set(Cn,dn(In)),n):d.get(Cn)},find:function(Cn,In,ix){var ax=0,ox=t.length,sx,ux,cx,hx,gx;for(ix==null?ix=1/0:ix*=ix,ax=0;ax<ox;++ax)hx=t[ax],sx=Cn-hx.x,ux=In-hx.y,cx=sx*sx+ux*ux,cx<ix&&(gx=hx,ix=cx);return gx},on:function(Cn,In){return arguments.length>1?(ar.on(Cn,In),n):ar.on(Cn)}}}function rw(){var t,n,a,s,l=vn(-30),u,c=1,d=1/0,Ct=.81;function ar(cn){var dn,Cn=t.length,In=ea(t,Kb,Jb).visitAfter(tn);for(s=cn,dn=0;dn<Cn;++dn)n=t[dn],In.visit(on)}function en(){if(t){var cn,dn=t.length,Cn;for(u=new Array(dn),cn=0;cn<dn;++cn)Cn=t[cn],u[Cn.index]=+l(Cn,cn,t)}}function tn(cn){var dn=0,Cn,In,ix=0,ax,ox,sx;if(cn.length){for(ax=ox=sx=0;sx<4;++sx)(Cn=cn[sx])&&(In=Math.abs(Cn.value))&&(dn+=Cn.value,ix+=In,ax+=In*Cn.x,ox+=In*Cn.y);cn.x=ax/ix,cn.y=ox/ix}else{Cn=cn,Cn.x=Cn.data.x,Cn.y=Cn.data.y;do dn+=u[Cn.data.index];while(Cn=Cn.next)}cn.value=dn}function on(cn,dn,Cn,In){if(!cn.value)return!0;var ix=cn.x-n.x,ax=cn.y-n.y,ox=In-dn,sx=ix*ix+ax*ax;if(ox*ox/Ct<sx)return sx<d&&(ix===0&&(ix=Ot(a),sx+=ix*ix),ax===0&&(ax=Ot(a),sx+=ax*ax),sx<c&&(sx=Math.sqrt(c*sx)),n.vx+=ix*cn.value*s/sx,n.vy+=ax*cn.value*s/sx),!0;if(!(cn.length||sx>=d)){(cn.data!==n||cn.next)&&(ix===0&&(ix=Ot(a),sx+=ix*ix),ax===0&&(ax=Ot(a),sx+=ax*ax),sx<c&&(sx=Math.sqrt(c*sx)));do cn.data!==n&&(ox=u[cn.data.index]*s/sx,n.vx+=ix*ox,n.vy+=ax*ox);while(cn=cn.next)}}return ar.initialize=function(cn,dn){t=cn,a=dn,en()},ar.strength=function(cn){return arguments.length?(l=typeof cn=="function"?cn:vn(+cn),en(),ar):l},ar.distanceMin=function(cn){return arguments.length?(c=cn*cn,ar):Math.sqrt(c)},ar.distanceMax=function(cn){return arguments.length?(d=cn*cn,ar):Math.sqrt(d)},ar.theta=function(cn){return arguments.length?(Ct=cn*cn,ar):Math.sqrt(Ct)},ar}function iw(t,n,a){var s,l=vn(.1),u,c;typeof t!="function"&&(t=vn(+t)),n==null&&(n=0),a==null&&(a=0);function d(ar){for(var en=0,tn=s.length;en<tn;++en){var on=s[en],cn=on.x-n||1e-6,dn=on.y-a||1e-6,Cn=Math.sqrt(cn*cn+dn*dn),In=(c[en]-Cn)*u[en]*ar/Cn;on.vx+=cn*In,on.vy+=dn*In}}function Ct(){if(s){var ar,en=s.length;for(u=new Array(en),c=new Array(en),ar=0;ar<en;++ar)c[ar]=+t(s[ar],ar,s),u[ar]=isNaN(c[ar])?0:+l(s[ar],ar,s)}}return d.initialize=function(ar){s=ar,Ct()},d.strength=function(ar){return arguments.length?(l=typeof ar=="function"?ar:vn(+ar),Ct(),d):l},d.radius=function(ar){return arguments.length?(t=typeof ar=="function"?ar:vn(+ar),Ct(),d):t},d.x=function(ar){return arguments.length?(n=+ar,d):n},d.y=function(ar){return arguments.length?(a=+ar,d):a},d}function ow(t){var n=vn(.1),a,s,l;typeof t!="function"&&(t=vn(t==null?0:+t));function u(d){for(var Ct=0,ar=a.length,en;Ct<ar;++Ct)en=a[Ct],en.vx+=(l[Ct]-en.x)*s[Ct]*d}function c(){if(a){var d,Ct=a.length;for(s=new Array(Ct),l=new Array(Ct),d=0;d<Ct;++d)s[d]=isNaN(l[d]=+t(a[d],d,a))?0:+n(a[d],d,a)}}return u.initialize=function(d){a=d,c()},u.strength=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),c(),u):n},u.x=function(d){return arguments.length?(t=typeof d=="function"?d:vn(+d),c(),u):t},u}function aw(t){var n=vn(.1),a,s,l;typeof t!="function"&&(t=vn(t==null?0:+t));function u(d){for(var Ct=0,ar=a.length,en;Ct<ar;++Ct)en=a[Ct],en.vy+=(l[Ct]-en.y)*s[Ct]*d}function c(){if(a){var d,Ct=a.length;for(s=new Array(Ct),l=new Array(Ct),d=0;d<Ct;++d)s[d]=isNaN(l[d]=+t(a[d],d,a))?0:+n(a[d],d,a)}}return u.initialize=function(d){a=d,c()},u.strength=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),c(),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:vn(+d),c(),u):t},u}function uw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function oo(t,n){if((a=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var a,s=t.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+t.slice(a+1)]}function je(t){return t=oo(Math.abs(t)),t?t[1]:NaN}function fw(t,n){return function(a,s){for(var l=a.length,u=[],c=0,d=t[0],Ct=0;l>0&&d>0&&(Ct+d+1>s&&(d=Math.max(1,s-Ct)),u.push(a.substring(l-=d,l+d)),!((Ct+=d+1)>s));)d=t[c=(c+1)%t.length];return u.reverse().join(n)}}function cw(t){return function(n){return n.replace(/[0-9]/g,function(a){return t[+a]})}}var sw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function We(t){if(!(n=sw.exec(t)))throw new Error("invalid format: "+t);var n;return new ra({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}We.prototype=ra.prototype;function ra(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lw(t){e:for(var n=t.length,a=1,s=-1,l;a<n;++a)switch(t[a]){case".":s=l=a;break;case"0":s===0&&(s=a),l=a;break;default:if(!+t[a])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(l+1):t}var A0;function hw(t,n){var a=oo(t,n);if(!a)return t+"";var s=a[0],l=a[1],u=l-(A0=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,c=s.length;return u===c?s:u>c?s+new Array(u-c+1).join("0"):u>0?s.slice(0,u)+"."+s.slice(u):"0."+new Array(1-u).join("0")+oo(t,Math.max(0,n+u-1))[0]}function xs(t,n){var a=oo(t,n);if(!a)return t+"";var s=a[0],l=a[1];return l<0?"0."+new Array(-l).join("0")+s:s.length>l+1?s.slice(0,l+1)+"."+s.slice(l+1):s+new Array(l-s.length+2).join("0")}const Ms={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uw,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>xs(t*100,n),r:xs,s:hw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $s(t){return t}var Ts=Array.prototype.map,As=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function S0(t){var n=t.grouping===void 0||t.thousands===void 0?$s:fw(Ts.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",l=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?$s:cw(Ts.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"":t.minus+"",Ct=t.nan===void 0?"NaN":t.nan+"";function ar(tn){tn=We(tn);var on=tn.fill,cn=tn.align,dn=tn.sign,Cn=tn.symbol,In=tn.zero,ix=tn.width,ax=tn.comma,ox=tn.precision,sx=tn.trim,ux=tn.type;ux==="n"?(ax=!0,ux="g"):Ms[ux]||(ox===void 0&&(ox=12),sx=!0,ux="g"),(In||on==="0"&&cn==="=")&&(In=!0,on="0",cn="=");var cx=Cn==="$"?a:Cn==="#"&&/[boxX]/.test(ux)?"0"+ux.toLowerCase():"",hx=Cn==="$"?s:/[%p]/.test(ux)?c:"",gx=Ms[ux],fx=/[defgprs%]/.test(ux);ox=ox===void 0?6:/[gprs]/.test(ux)?Math.max(1,Math.min(21,ox)):Math.max(0,Math.min(20,ox));function dx(mx){var vx=cx,bx=hx,xx,_x,Ex;if(ux==="c")bx=gx(mx)+bx,mx="";else{mx=+mx;var Tx=mx<0||1/mx<0;if(mx=isNaN(mx)?Ct:gx(Math.abs(mx),ox),sx&&(mx=lw(mx)),Tx&&+mx==0&&dn!=="+"&&(Tx=!1),vx=(Tx?dn==="("?dn:d:dn==="-"||dn==="("?"":dn)+vx,bx=(ux==="s"?As[8+A0/3]:"")+bx+(Tx&&dn==="("?")":""),fx){for(xx=-1,_x=mx.length;++xx<_x;)if(Ex=mx.charCodeAt(xx),48>Ex||Ex>57){bx=(Ex===46?l+mx.slice(xx+1):mx.slice(xx))+bx,mx=mx.slice(0,xx);break}}}ax&&!In&&(mx=n(mx,1/0));var Cx=vx.length+mx.length+bx.length,Mx=Cx<ix?new Array(ix-Cx+1).join(on):"";switch(ax&&In&&(mx=n(Mx+mx,Mx.length?ix-bx.length:1/0),Mx=""),cn){case"<":mx=vx+mx+bx+Mx;break;case"=":mx=vx+Mx+mx+bx;break;case"^":mx=Mx.slice(0,Cx=Mx.length>>1)+vx+mx+bx+Mx.slice(Cx);break;default:mx=Mx+vx+mx+bx;break}return u(mx)}return dx.toString=function(){return tn+""},dx}function en(tn,on){var cn=ar((tn=We(tn),tn.type="f",tn)),dn=Math.max(-8,Math.min(8,Math.floor(je(on)/3)))*3,Cn=Math.pow(10,-dn),In=As[8+dn/3];return function(ix){return cn(Cn*ix)+In}}return{format:ar,formatPrefix:en}}var bi,ia,Ff;E0({thousands:",",grouping:[3],currency:["$",""]});function E0(t){return bi=S0(t),ia=bi.format,Ff=bi.formatPrefix,bi}function k0(t){return Math.max(0,-je(Math.abs(t)))}function N0(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(je(n)/3)))*3-je(Math.abs(t)))}function R0(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,je(n)-je(t))+1}var U$1=1e-6,Hr=1e-12,K$1=Math.PI,mn=K$1/2,ao=K$1/4,Ln=K$1*2,an=180/K$1,H$1=K$1/180,nn=Math.abs,ir=Math.atan,Bn=Math.atan2,B$1=Math.cos,wi=Math.ceil,I0=Math.exp,Cu=Math.hypot,uo=Math.log,ja=Math.pow,q$1=Math.sin,nt=Math.sign||function(t){return t>0?1:t<0?-1:0},$n=Math.sqrt,qf=Math.tan;function C0(t){return t>1?0:t<-1?K$1:Math.acos(t)}function Un(t){return t>1?mn:t<-1?-mn:Math.asin(t)}function Ss(t){return(t=q$1(t/2))*t}function ln(){}function fo(t,n){t&&ks.hasOwnProperty(t.type)&&ks[t.type](t,n)}var Es={Feature:function(t,n){fo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,s=-1,l=a.length;++s<l;)fo(a[s].geometry,n)}},ks={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)t=a[s],n.point(t[0],t[1],t[2])},LineString:function(t,n){Pu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)Pu(a[s],n,0)},Polygon:function(t,n){Ns(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)Ns(a[s],n)},GeometryCollection:function(t,n){for(var a=t.geometries,s=-1,l=a.length;++s<l;)fo(a[s],n)}};function Pu(t,n,a){var s=-1,l=t.length-a,u;for(n.lineStart();++s<l;)u=t[s],n.point(u[0],u[1],u[2]);n.lineEnd()}function Ns(t,n){var a=-1,s=t.length;for(n.polygonStart();++a<s;)Pu(t[a],n,1);n.polygonEnd()}function it(t,n){t&&Es.hasOwnProperty(t.type)?Es[t.type](t,n):fo(t,n)}var co=new bn,so=new bn,P0,D0,Du,zu,Ou,pt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){co=new bn,pt.lineStart=dw,pt.lineEnd=gw},polygonEnd:function(){var t=+co;so.add(t<0?Ln+t:t),this.lineStart=this.lineEnd=this.point=ln},sphere:function(){so.add(Ln)}};function dw(){pt.point=pw}function gw(){z0(P0,D0)}function pw(t,n){pt.point=z0,P0=t,D0=n,t*=H$1,n*=H$1,Du=t,zu=B$1(n=n/2+ao),Ou=q$1(n)}function z0(t,n){t*=H$1,n*=H$1,n=n/2+ao;var a=t-Du,s=a>=0?1:-1,l=s*a,u=B$1(n),c=q$1(n),d=Ou*c,Ct=zu*u+d*B$1(l),ar=d*s*q$1(l);co.add(Bn(ar,Ct)),Du=t,zu=u,Ou=c}function mw(t){return so=new bn,it(t,pt),so*2}function lo(t){return[Bn(t[1],t[0]),Un(t[2])]}function se$1(t){var n=t[0],a=t[1],s=B$1(a);return[s*B$1(n),s*q$1(n),q$1(a)]}function xi(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ve(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Wa(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Mi(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ho(t){var n=$n(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var sn,Wn,pn,Gn,Qt,O0,Y0,Ye,kr,Dt,Nt,$t={point:Yu,lineStart:Rs,lineEnd:Is,polygonStart:function(){$t.point=q0,$t.lineStart=yw,$t.lineEnd=_w,kr=new bn,pt.polygonStart()},polygonEnd:function(){pt.polygonEnd(),$t.point=Yu,$t.lineStart=Rs,$t.lineEnd=Is,co<0?(sn=-(pn=180),Wn=-(Gn=90)):kr>U$1?Gn=90:kr<-U$1&&(Wn=-90),Nt[0]=sn,Nt[1]=pn},sphere:function(){sn=-(pn=180),Wn=-(Gn=90)}};function Yu(t,n){Dt.push(Nt=[sn=t,pn=t]),n<Wn&&(Wn=n),n>Gn&&(Gn=n)}function F0(t,n){var a=se$1([t*H$1,n*H$1]);if(Ye){var s=Ve(Ye,a),l=[s[1],-s[0],0],u=Ve(l,s);ho(u),u=lo(u);var c=t-Qt,d=c>0?1:-1,Ct=u[0]*an*d,ar,en=nn(c)>180;en^(d*Qt<Ct&&Ct<d*t)?(ar=u[1]*an,ar>Gn&&(Gn=ar)):(Ct=(Ct+360)%360-180,en^(d*Qt<Ct&&Ct<d*t)?(ar=-u[1]*an,ar<Wn&&(Wn=ar)):(n<Wn&&(Wn=n),n>Gn&&(Gn=n))),en?t<Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t):pn>=sn?(t<sn&&(sn=t),t>pn&&(pn=t)):t>Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t)}else Dt.push(Nt=[sn=t,pn=t]);n<Wn&&(Wn=n),n>Gn&&(Gn=n),Ye=a,Qt=t}function Rs(){$t.point=F0}function Is(){Nt[0]=sn,Nt[1]=pn,$t.point=Yu,Ye=null}function q0(t,n){if(Ye){var a=t-Qt;kr.add(nn(a)>180?a+(a>0?360:-360):a)}else O0=t,Y0=n;pt.point(t,n),F0(t,n)}function yw(){pt.lineStart()}function _w(){q0(O0,Y0),pt.lineEnd(),nn(kr)>U$1&&(sn=-(pn=180)),Nt[0]=sn,Nt[1]=pn,Ye=null}function Vn(t,n){return(n-=t)<0?n+360:n}function vw(t,n){return t[0]-n[0]}function Cs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function bw(t){var n,a,s,l,u,c,d;if(Gn=pn=-(sn=Wn=1/0),Dt=[],it(t,$t),a=Dt.length){for(Dt.sort(vw),n=1,s=Dt[0],u=[s];n<a;++n)l=Dt[n],Cs(s,l[0])||Cs(s,l[1])?(Vn(s[0],l[1])>Vn(s[0],s[1])&&(s[1]=l[1]),Vn(l[0],s[1])>Vn(s[0],s[1])&&(s[0]=l[0])):u.push(s=l);for(c=-1/0,a=u.length-1,n=0,s=u[a];n<=a;s=l,++n)l=u[n],(d=Vn(s[1],l[0]))>c&&(c=d,sn=l[0],pn=s[1])}return Dt=Nt=null,sn===1/0||Wn===1/0?[[NaN,NaN],[NaN,NaN]]:[[sn,Wn],[pn,Gn]]}var vr,go,po,mo,yo,_o,vo,bo,Fu,qu,Lu,L0,B0,Dn,zn,On,ot={sphere:ln,point:Lf,lineStart:Ps,lineEnd:Ds,polygonStart:function(){ot.lineStart=Mw,ot.lineEnd=$w},polygonEnd:function(){ot.lineStart=Ps,ot.lineEnd=Ds}};function Lf(t,n){t*=H$1,n*=H$1;var a=B$1(n);ri(a*B$1(t),a*q$1(t),q$1(n))}function ri(t,n,a){++vr,po+=(t-po)/vr,mo+=(n-mo)/vr,yo+=(a-yo)/vr}function Ps(){ot.point=ww}function ww(t,n){t*=H$1,n*=H$1;var a=B$1(n);Dn=a*B$1(t),zn=a*q$1(t),On=q$1(n),ot.point=xw,ri(Dn,zn,On)}function xw(t,n){t*=H$1,n*=H$1;var a=B$1(n),s=a*B$1(t),l=a*q$1(t),u=q$1(n),c=Bn($n((c=zn*u-On*l)*c+(c=On*s-Dn*u)*c+(c=Dn*l-zn*s)*c),Dn*s+zn*l+On*u);go+=c,_o+=c*(Dn+(Dn=s)),vo+=c*(zn+(zn=l)),bo+=c*(On+(On=u)),ri(Dn,zn,On)}function Ds(){ot.point=Lf}function Mw(){ot.point=Tw}function $w(){U0(L0,B0),ot.point=Lf}function Tw(t,n){L0=t,B0=n,t*=H$1,n*=H$1,ot.point=U0;var a=B$1(n);Dn=a*B$1(t),zn=a*q$1(t),On=q$1(n),ri(Dn,zn,On)}function U0(t,n){t*=H$1,n*=H$1;var a=B$1(n),s=a*B$1(t),l=a*q$1(t),u=q$1(n),c=zn*u-On*l,d=On*s-Dn*u,Ct=Dn*l-zn*s,ar=Cu(c,d,Ct),en=Un(ar),tn=ar&&-en/ar;Fu.add(tn*c),qu.add(tn*d),Lu.add(tn*Ct),go+=en,_o+=en*(Dn+(Dn=s)),vo+=en*(zn+(zn=l)),bo+=en*(On+(On=u)),ri(Dn,zn,On)}function Aw(t){vr=go=po=mo=yo=_o=vo=bo=0,Fu=new bn,qu=new bn,Lu=new bn,it(t,ot);var n=+Fu,a=+qu,s=+Lu,l=Cu(n,a,s);return l<Hr&&(n=_o,a=vo,s=bo,go<U$1&&(n=po,a=mo,s=yo),l=Cu(n,a,s),l<Hr)?[NaN,NaN]:[Bn(a,n)*an,Un(s/l)*an]}function ke$1(t){return function(){return t}}function Bu(t,n){function a(s,l){return s=t(s,l),n(s[0],s[1])}return t.invert&&n.invert&&(a.invert=function(s,l){return s=n.invert(s,l),s&&t.invert(s[0],s[1])}),a}function Uu(t,n){return nn(t)>K$1&&(t-=Math.round(t/Ln)*Ln),[t,n]}Uu.invert=Uu;function Bf(t,n,a){return(t%=Ln)?n||a?Bu(Os(t),Ys(n,a)):Os(t):n||a?Ys(n,a):Uu}function zs(t){return function(n,a){return n+=t,nn(n)>K$1&&(n-=Math.round(n/Ln)*Ln),[n,a]}}function Os(t){var n=zs(t);return n.invert=zs(-t),n}function Ys(t,n){var a=B$1(t),s=q$1(t),l=B$1(n),u=q$1(n);function c(d,Ct){var ar=B$1(Ct),en=B$1(d)*ar,tn=q$1(d)*ar,on=q$1(Ct),cn=on*a+en*s;return[Bn(tn*l-cn*u,en*a-on*s),Un(cn*l+tn*u)]}return c.invert=function(d,Ct){var ar=B$1(Ct),en=B$1(d)*ar,tn=q$1(d)*ar,on=q$1(Ct),cn=on*l-tn*u;return[Bn(tn*l+on*u,en*a+cn*s),Un(cn*a-en*s)]},c}function X0(t){t=Bf(t[0]*H$1,t[1]*H$1,t.length>2?t[2]*H$1:0);function n(a){return a=t(a[0]*H$1,a[1]*H$1),a[0]*=an,a[1]*=an,a}return n.invert=function(a){return a=t.invert(a[0]*H$1,a[1]*H$1),a[0]*=an,a[1]*=an,a},n}function H0(t,n,a,s,l,u){if(a){var c=B$1(n),d=q$1(n),Ct=s*a;l==null?(l=n+s*Ln,u=n-Ct/2):(l=Fs(c,l),u=Fs(c,u),(s>0?l<u:l>u)&&(l+=s*Ln));for(var ar,en=l;s>0?en>u:en<u;en-=Ct)ar=lo([c,-d*B$1(en),-d*q$1(en)]),t.point(ar[0],ar[1])}}function Fs(t,n){n=se$1(n),n[0]-=t,ho(n);var a=C0(-n[1]);return((-n[2]<0?-a:a)+Ln-U$1)%Ln}function Sw(){var t=ke$1([0,0]),n=ke$1(90),a=ke$1(2),s,l,u={point:c};function c(Ct,ar){s.push(Ct=l(Ct,ar)),Ct[0]*=an,Ct[1]*=an}function d(){var Ct=t.apply(this,arguments),ar=n.apply(this,arguments)*H$1,en=a.apply(this,arguments)*H$1;return s=[],l=Bf(-Ct[0]*H$1,-Ct[1]*H$1,0).invert,H0(u,ar,en,1),Ct={type:"Polygon",coordinates:[s]},s=l=null,Ct}return d.center=function(Ct){return arguments.length?(t=typeof Ct=="function"?Ct:ke$1([+Ct[0],+Ct[1]]),d):t},d.radius=function(Ct){return arguments.length?(n=typeof Ct=="function"?Ct:ke$1(+Ct),d):n},d.precision=function(Ct){return arguments.length?(a=typeof Ct=="function"?Ct:ke$1(+Ct),d):a},d}function j0(){var t=[],n;return{point:function(a,s,l){n.push([a,s,l])},lineStart:function(){t.push(n=[])},lineEnd:ln,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var a=t;return t=[],n=null,a}}}function Li(t,n){return nn(t[0]-n[0])<U$1&&nn(t[1]-n[1])<U$1}function $i(t,n,a,s){this.x=t,this.z=n,this.o=a,this.e=s,this.v=!1,this.n=this.p=null}function W0(t,n,a,s,l){var u=[],c=[],d,Ct;if(t.forEach(function(dn){if(!((Cn=dn.length-1)<=0)){var Cn,In=dn[0],ix=dn[Cn],ax;if(Li(In,ix)){if(!In[2]&&!ix[2]){for(l.lineStart(),d=0;d<Cn;++d)l.point((In=dn[d])[0],In[1]);l.lineEnd();return}ix[0]+=2*U$1}u.push(ax=new $i(In,dn,null,!0)),c.push(ax.o=new $i(In,null,ax,!1)),u.push(ax=new $i(ix,dn,null,!1)),c.push(ax.o=new $i(ix,null,ax,!0))}}),!!u.length){for(c.sort(n),qs(u),qs(c),d=0,Ct=c.length;d<Ct;++d)c[d].e=a=!a;for(var ar=u[0],en,tn;;){for(var on=ar,cn=!0;on.v;)if((on=on.n)===ar)return;en=on.z,l.lineStart();do{if(on.v=on.o.v=!0,on.e){if(cn)for(d=0,Ct=en.length;d<Ct;++d)l.point((tn=en[d])[0],tn[1]);else s(on.x,on.n.x,1,l);on=on.n}else{if(cn)for(en=on.p.z,d=en.length-1;d>=0;--d)l.point((tn=en[d])[0],tn[1]);else s(on.x,on.p.x,-1,l);on=on.p}on=on.o,en=on.z,cn=!cn}while(!on.v);l.lineEnd()}}}function qs(t){if(n=t.length){for(var n,a=0,s=t[0],l;++a<n;)s.n=l=t[a],l.p=s,s=l;s.n=l=t[0],l.p=s}}function Va(t){return nn(t[0])<=K$1?t[0]:nt(t[0])*((nn(t[0])+K$1)%Ln-K$1)}function V0(t,n){var a=Va(n),s=n[1],l=q$1(s),u=[q$1(a),-B$1(a),0],c=0,d=0,Ct=new bn;l===1?s=mn+U$1:l===-1&&(s=-mn-U$1);for(var ar=0,en=t.length;ar<en;++ar)if(on=(tn=t[ar]).length)for(var tn,on,cn=tn[on-1],dn=Va(cn),Cn=cn[1]/2+ao,In=q$1(Cn),ix=B$1(Cn),ax=0;ax<on;++ax,dn=sx,In=cx,ix=hx,cn=ox){var ox=tn[ax],sx=Va(ox),ux=ox[1]/2+ao,cx=q$1(ux),hx=B$1(ux),gx=sx-dn,fx=gx>=0?1:-1,dx=fx*gx,mx=dx>K$1,vx=In*cx;if(Ct.add(Bn(vx*fx*q$1(dx),ix*hx+vx*B$1(dx))),c+=mx?gx+fx*Ln:gx,mx^dn>=a^sx>=a){var bx=Ve(se$1(cn),se$1(ox));ho(bx);var xx=Ve(u,bx);ho(xx);var _x=(mx^gx>=0?-1:1)*Un(xx[2]);(s>_x||s===_x&&(bx[0]||bx[1]))&&(d+=mx^gx>=0?1:-1)}}return(c<-U$1||c<U$1&&Ct<-Hr)^d&1}function G0(t,n,a,s){return function(l){var u=n(l),c=j0(),d=n(c),Ct=!1,ar,en,tn,on={point:cn,lineStart:Cn,lineEnd:In,polygonStart:function(){on.point=ix,on.lineStart=ax,on.lineEnd=ox,en=[],ar=[]},polygonEnd:function(){on.point=cn,on.lineStart=Cn,on.lineEnd=In,en=yf(en);var sx=V0(ar,s);en.length?(Ct||(l.polygonStart(),Ct=!0),W0(en,kw,sx,a,l)):sx&&(Ct||(l.polygonStart(),Ct=!0),l.lineStart(),a(null,null,1,l),l.lineEnd()),Ct&&(l.polygonEnd(),Ct=!1),en=ar=null},sphere:function(){l.polygonStart(),l.lineStart(),a(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function cn(sx,ux){t(sx,ux)&&l.point(sx,ux)}function dn(sx,ux){u.point(sx,ux)}function Cn(){on.point=dn,u.lineStart()}function In(){on.point=cn,u.lineEnd()}function ix(sx,ux){tn.push([sx,ux]),d.point(sx,ux)}function ax(){d.lineStart(),tn=[]}function ox(){ix(tn[0][0],tn[0][1]),d.lineEnd();var sx=d.clean(),ux=c.result(),cx,hx=ux.length,gx,fx,dx;if(tn.pop(),ar.push(tn),tn=null,!!hx){if(sx&1){if(fx=ux[0],(gx=fx.length-1)>0){for(Ct||(l.polygonStart(),Ct=!0),l.lineStart(),cx=0;cx<gx;++cx)l.point((dx=fx[cx])[0],dx[1]);l.lineEnd()}return}hx>1&&sx&2&&ux.push(ux.pop().concat(ux.shift())),en.push(ux.filter(Ew))}}return on}}function Ew(t){return t.length>1}function kw(t,n){return((t=t.x)[0]<0?t[1]-mn-U$1:mn-t[1])-((n=n.x)[0]<0?n[1]-mn-U$1:mn-n[1])}const Xu=G0(function(){return!0},Nw,Iw,[-K$1,-mn]);function Nw(t){var n=NaN,a=NaN,s=NaN,l;return{lineStart:function(){t.lineStart(),l=1},point:function(u,c){var d=u>0?K$1:-K$1,Ct=nn(u-n);nn(Ct-K$1)<U$1?(t.point(n,a=(a+c)/2>0?mn:-mn),t.point(s,a),t.lineEnd(),t.lineStart(),t.point(d,a),t.point(u,a),l=0):s!==d&&Ct>=K$1&&(nn(n-s)<U$1&&(n-=s*U$1),nn(u-d)<U$1&&(u-=d*U$1),a=Rw(n,a,u,c),t.point(s,a),t.lineEnd(),t.lineStart(),t.point(d,a),l=0),t.point(n=u,a=c),s=d},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-l}}}function Rw(t,n,a,s){var l,u,c=q$1(t-a);return nn(c)>U$1?ir((q$1(n)*(u=B$1(s))*q$1(a)-q$1(s)*(l=B$1(n))*q$1(t))/(l*u*c)):(n+s)/2}function Iw(t,n,a,s){var l;if(t==null)l=a*mn,s.point(-K$1,l),s.point(0,l),s.point(K$1,l),s.point(K$1,0),s.point(K$1,-l),s.point(0,-l),s.point(-K$1,-l),s.point(-K$1,0),s.point(-K$1,l);else if(nn(t[0]-n[0])>U$1){var u=t[0]<n[0]?K$1:-K$1;l=a*u/2,s.point(-u,l),s.point(0,l),s.point(u,l)}else s.point(n[0],n[1])}function Z0(t){var n=B$1(t),a=2*H$1,s=n>0,l=nn(n)>U$1;function u(en,tn,on,cn){H0(cn,t,a,on,en,tn)}function c(en,tn){return B$1(en)*B$1(tn)>n}function d(en){var tn,on,cn,dn,Cn;return{lineStart:function(){dn=cn=!1,Cn=1},point:function(In,ix){var ax=[In,ix],ox,sx=c(In,ix),ux=s?sx?0:ar(In,ix):sx?ar(In+(In<0?K$1:-K$1),ix):0;if(!tn&&(dn=cn=sx)&&en.lineStart(),sx!==cn&&(ox=Ct(tn,ax),(!ox||Li(tn,ox)||Li(ax,ox))&&(ax[2]=1)),sx!==cn)Cn=0,sx?(en.lineStart(),ox=Ct(ax,tn),en.point(ox[0],ox[1])):(ox=Ct(tn,ax),en.point(ox[0],ox[1],2),en.lineEnd()),tn=ox;else if(l&&tn&&s^sx){var cx;!(ux&on)&&(cx=Ct(ax,tn,!0))&&(Cn=0,s?(en.lineStart(),en.point(cx[0][0],cx[0][1]),en.point(cx[1][0],cx[1][1]),en.lineEnd()):(en.point(cx[1][0],cx[1][1]),en.lineEnd(),en.lineStart(),en.point(cx[0][0],cx[0][1],3)))}sx&&(!tn||!Li(tn,ax))&&en.point(ax[0],ax[1]),tn=ax,cn=sx,on=ux},lineEnd:function(){cn&&en.lineEnd(),tn=null},clean:function(){return Cn|(dn&&cn)<<1}}}function Ct(en,tn,on){var cn=se$1(en),dn=se$1(tn),Cn=[1,0,0],In=Ve(cn,dn),ix=xi(In,In),ax=In[0],ox=ix-ax*ax;if(!ox)return!on&&en;var sx=n*ix/ox,ux=-n*ax/ox,cx=Ve(Cn,In),hx=Mi(Cn,sx),gx=Mi(In,ux);Wa(hx,gx);var fx=cx,dx=xi(hx,fx),mx=xi(fx,fx),vx=dx*dx-mx*(xi(hx,hx)-1);if(!(vx<0)){var bx=$n(vx),xx=Mi(fx,(-dx-bx)/mx);if(Wa(xx,hx),xx=lo(xx),!on)return xx;var _x=en[0],Ex=tn[0],Tx=en[1],Cx=tn[1],Mx;Ex<_x&&(Mx=_x,_x=Ex,Ex=Mx);var Ax=Ex-_x,Nx=nn(Ax-K$1)<U$1,Ux=Nx||Ax<U$1;if(!Nx&&Cx<Tx&&(Mx=Tx,Tx=Cx,Cx=Mx),Ux?Nx?Tx+Cx>0^xx[1]<(nn(xx[0]-_x)<U$1?Tx:Cx):Tx<=xx[1]&&xx[1]<=Cx:Ax>K$1^(_x<=xx[0]&&xx[0]<=Ex)){var Rx=Mi(fx,(-dx+bx)/mx);return Wa(Rx,hx),[xx,lo(Rx)]}}}function ar(en,tn){var on=s?t:K$1-t,cn=0;return en<-on?cn|=1:en>on&&(cn|=2),tn<-on?cn|=4:tn>on&&(cn|=8),cn}return G0(c,d,u,s?[0,-t]:[-K$1,t-K$1])}function Cw(t,n,a,s,l,u){var c=t[0],d=t[1],Ct=n[0],ar=n[1],en=0,tn=1,on=Ct-c,cn=ar-d,dn;if(dn=a-c,!(!on&&dn>0)){if(dn/=on,on<0){if(dn<en)return;dn<tn&&(tn=dn)}else if(on>0){if(dn>tn)return;dn>en&&(en=dn)}if(dn=l-c,!(!on&&dn<0)){if(dn/=on,on<0){if(dn>tn)return;dn>en&&(en=dn)}else if(on>0){if(dn<en)return;dn<tn&&(tn=dn)}if(dn=s-d,!(!cn&&dn>0)){if(dn/=cn,cn<0){if(dn<en)return;dn<tn&&(tn=dn)}else if(cn>0){if(dn>tn)return;dn>en&&(en=dn)}if(dn=u-d,!(!cn&&dn<0)){if(dn/=cn,cn<0){if(dn>tn)return;dn>en&&(en=dn)}else if(cn>0){if(dn<en)return;dn<tn&&(tn=dn)}return en>0&&(t[0]=c+en*on,t[1]=d+en*cn),tn<1&&(n[0]=c+tn*on,n[1]=d+tn*cn),!0}}}}}var br=1e9,Ti=-br;function oa(t,n,a,s){function l(ar,en){return t<=ar&&ar<=a&&n<=en&&en<=s}function u(ar,en,tn,on){var cn=0,dn=0;if(ar==null||(cn=c(ar,tn))!==(dn=c(en,tn))||Ct(ar,en)<0^tn>0)do on.point(cn===0||cn===3?t:a,cn>1?s:n);while((cn=(cn+tn+4)%4)!==dn);else on.point(en[0],en[1])}function c(ar,en){return nn(ar[0]-t)<U$1?en>0?0:3:nn(ar[0]-a)<U$1?en>0?2:1:nn(ar[1]-n)<U$1?en>0?1:0:en>0?3:2}function d(ar,en){return Ct(ar.x,en.x)}function Ct(ar,en){var tn=c(ar,1),on=c(en,1);return tn!==on?tn-on:tn===0?en[1]-ar[1]:tn===1?ar[0]-en[0]:tn===2?ar[1]-en[1]:en[0]-ar[0]}return function(ar){var en=ar,tn=j0(),on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx={point:gx,lineStart:vx,lineEnd:bx,polygonStart:dx,polygonEnd:mx};function gx(_x,Ex){l(_x,Ex)&&en.point(_x,Ex)}function fx(){for(var _x=0,Ex=0,Tx=cn.length;Ex<Tx;++Ex)for(var Cx=cn[Ex],Mx=1,Ax=Cx.length,Nx=Cx[0],Ux,Rx,Ox=Nx[0],Px=Nx[1];Mx<Ax;++Mx)Ux=Ox,Rx=Px,Nx=Cx[Mx],Ox=Nx[0],Px=Nx[1],Rx<=s?Px>s&&(Ox-Ux)*(s-Rx)>(Px-Rx)*(t-Ux)&&++_x:Px<=s&&(Ox-Ux)*(s-Rx)<(Px-Rx)*(t-Ux)&&--_x;return _x}function dx(){en=tn,on=[],cn=[],cx=!0}function mx(){var _x=fx(),Ex=cx&&_x,Tx=(on=yf(on)).length;(Ex||Tx)&&(ar.polygonStart(),Ex&&(ar.lineStart(),u(null,null,1,ar),ar.lineEnd()),Tx&&W0(on,d,_x,u,ar),ar.polygonEnd()),en=ar,on=cn=dn=null}function vx(){hx.point=xx,cn&&cn.push(dn=[]),ux=!0,sx=!1,ax=ox=NaN}function bx(){on&&(xx(Cn,In),ix&&sx&&tn.rejoin(),on.push(tn.result())),hx.point=gx,sx&&en.lineEnd()}function xx(_x,Ex){var Tx=l(_x,Ex);if(cn&&dn.push([_x,Ex]),ux)Cn=_x,In=Ex,ix=Tx,ux=!1,Tx&&(en.lineStart(),en.point(_x,Ex));else if(Tx&&sx)en.point(_x,Ex);else{var Cx=[ax=Math.max(Ti,Math.min(br,ax)),ox=Math.max(Ti,Math.min(br,ox))],Mx=[_x=Math.max(Ti,Math.min(br,_x)),Ex=Math.max(Ti,Math.min(br,Ex))];Cw(Cx,Mx,t,n,a,s)?(sx||(en.lineStart(),en.point(Cx[0],Cx[1])),en.point(Mx[0],Mx[1]),Tx||en.lineEnd(),cx=!1):Tx&&(en.lineStart(),en.point(_x,Ex),cx=!1)}ax=_x,ox=Ex,sx=Tx}return hx}}function Pw(){var t=0,n=0,a=960,s=500,l,u,c;return c={stream:function(d){return l&&u===d?l:l=oa(t,n,a,s)(u=d)},extent:function(d){return arguments.length?(t=+d[0][0],n=+d[0][1],a=+d[1][0],s=+d[1][1],l=u=null,c):[[t,n],[a,s]]}}}var Hu,ju,Bi,Ui,Ge={sphere:ln,point:ln,lineStart:Dw,lineEnd:ln,polygonStart:ln,polygonEnd:ln};function Dw(){Ge.point=Ow,Ge.lineEnd=zw}function zw(){Ge.point=Ge.lineEnd=ln}function Ow(t,n){t*=H$1,n*=H$1,ju=t,Bi=q$1(n),Ui=B$1(n),Ge.point=Yw}function Yw(t,n){t*=H$1,n*=H$1;var a=q$1(n),s=B$1(n),l=nn(t-ju),u=B$1(l),c=q$1(l),d=s*c,Ct=Ui*a-Bi*s*u,ar=Bi*a+Ui*s*u;Hu.add(Bn($n(d*d+Ct*Ct),ar)),ju=t,Bi=a,Ui=s}function Q0(t){return Hu=new bn,it(t,Ge),+Hu}var Wu=[null,null],Fw={type:"LineString",coordinates:Wu};function wo(t,n){return Wu[0]=t,Wu[1]=n,Q0(Fw)}var Ls={Feature:function(t,n){return xo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,s=-1,l=a.length;++s<l;)if(xo(a[s].geometry,n))return!0;return!1}},Bs={Sphere:function(){return!0},Point:function(t,n){return Us(t.coordinates,n)},MultiPoint:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Us(a[s],n))return!0;return!1},LineString:function(t,n){return Xs(t.coordinates,n)},MultiLineString:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Xs(a[s],n))return!0;return!1},Polygon:function(t,n){return Hs(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Hs(a[s],n))return!0;return!1},GeometryCollection:function(t,n){for(var a=t.geometries,s=-1,l=a.length;++s<l;)if(xo(a[s],n))return!0;return!1}};function xo(t,n){return t&&Bs.hasOwnProperty(t.type)?Bs[t.type](t,n):!1}function Us(t,n){return wo(t,n)===0}function Xs(t,n){for(var a,s,l,u=0,c=t.length;u<c;u++){if(s=wo(t[u],n),s===0||u>0&&(l=wo(t[u],t[u-1]),l>0&&a<=l&&s<=l&&(a+s-l)*(1-Math.pow((a-s)/l,2))<Hr*l))return!0;a=s}return!1}function Hs(t,n){return!!V0(t.map(qw),K0(n))}function qw(t){return t=t.map(K0),t.pop(),t}function K0(t){return[t[0]*H$1,t[1]*H$1]}function Lw(t,n){return(t&&Ls.hasOwnProperty(t.type)?Ls[t.type]:xo)(t,n)}function js(t,n,a){var s=zt(t,n-U$1,a).concat(n);return function(l){return s.map(function(u){return[l,u]})}}function Ws(t,n,a){var s=zt(t,n-U$1,a).concat(n);return function(l){return s.map(function(u){return[u,l]})}}function J0(){var t,n,a,s,l,u,c,d,Ct=10,ar=Ct,en=90,tn=360,on,cn,dn,Cn,In=2.5;function ix(){return{type:"MultiLineString",coordinates:ax()}}function ax(){return zt(wi(s/en)*en,a,en).map(dn).concat(zt(wi(d/tn)*tn,c,tn).map(Cn)).concat(zt(wi(n/Ct)*Ct,t,Ct).filter(function(ox){return nn(ox%en)>U$1}).map(on)).concat(zt(wi(u/ar)*ar,l,ar).filter(function(ox){return nn(ox%tn)>U$1}).map(cn))}return ix.lines=function(){return ax().map(function(ox){return{type:"LineString",coordinates:ox}})},ix.outline=function(){return{type:"Polygon",coordinates:[dn(s).concat(Cn(c).slice(1),dn(a).reverse().slice(1),Cn(d).reverse().slice(1))]}},ix.extent=function(ox){return arguments.length?ix.extentMajor(ox).extentMinor(ox):ix.extentMinor()},ix.extentMajor=function(ox){return arguments.length?(s=+ox[0][0],a=+ox[1][0],d=+ox[0][1],c=+ox[1][1],s>a&&(ox=s,s=a,a=ox),d>c&&(ox=d,d=c,c=ox),ix.precision(In)):[[s,d],[a,c]]},ix.extentMinor=function(ox){return arguments.length?(n=+ox[0][0],t=+ox[1][0],u=+ox[0][1],l=+ox[1][1],n>t&&(ox=n,n=t,t=ox),u>l&&(ox=u,u=l,l=ox),ix.precision(In)):[[n,u],[t,l]]},ix.step=function(ox){return arguments.length?ix.stepMajor(ox).stepMinor(ox):ix.stepMinor()},ix.stepMajor=function(ox){return arguments.length?(en=+ox[0],tn=+ox[1],ix):[en,tn]},ix.stepMinor=function(ox){return arguments.length?(Ct=+ox[0],ar=+ox[1],ix):[Ct,ar]},ix.precision=function(ox){return arguments.length?(In=+ox,on=js(u,l,90),cn=Ws(n,t,In),dn=js(d,c,90),Cn=Ws(s,a,In),ix):In},ix.extentMajor([[-180,-90+U$1],[180,90-U$1]]).extentMinor([[-180,-80-U$1],[180,80+U$1]])}function Bw(){return J0()()}function Uw(t,n){var a=t[0]*H$1,s=t[1]*H$1,l=n[0]*H$1,u=n[1]*H$1,c=B$1(s),d=q$1(s),Ct=B$1(u),ar=q$1(u),en=c*B$1(a),tn=c*q$1(a),on=Ct*B$1(l),cn=Ct*q$1(l),dn=2*Un($n(Ss(u-s)+c*Ct*Ss(l-a))),Cn=q$1(dn),In=dn?function(ix){var ax=q$1(ix*=dn)/Cn,ox=q$1(dn-ix)/Cn,sx=ox*en+ax*on,ux=ox*tn+ax*cn,cx=ox*d+ax*ar;return[Bn(ux,sx)*an,Bn(cx,$n(sx*sx+ux*ux))*an]}:function(){return[a*an,s*an]};return In.distance=dn,In}const jr=t=>t;var Ga=new bn,Vu=new bn,n1,t1,Gu,Zu,Tt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){Tt.lineStart=Xw,Tt.lineEnd=jw},polygonEnd:function(){Tt.lineStart=Tt.lineEnd=Tt.point=ln,Ga.add(nn(Vu)),Vu=new bn},result:function(){var t=Ga/2;return Ga=new bn,t}};function Xw(){Tt.point=Hw}function Hw(t,n){Tt.point=e1,n1=Gu=t,t1=Zu=n}function e1(t,n){Vu.add(Zu*t-Gu*n),Gu=t,Zu=n}function jw(){e1(n1,t1)}var Ze=1/0,Mo=Ze,Wr=-Ze,$o=Wr,To={point:Ww,lineStart:ln,lineEnd:ln,polygonStart:ln,polygonEnd:ln,result:function(){var t=[[Ze,Mo],[Wr,$o]];return Wr=$o=-(Mo=Ze=1/0),t}};function Ww(t,n){t<Ze&&(Ze=t),t>Wr&&(Wr=t),n<Mo&&(Mo=n),n>$o&&($o=n)}var Qu=0,Ku=0,wr=0,Ao=0,So=0,Ce=0,Ju=0,nf=0,xr=0,r1,i1,ct,st,Jn={point:le$1,lineStart:Vs,lineEnd:Gs,polygonStart:function(){Jn.lineStart=Zw,Jn.lineEnd=Qw},polygonEnd:function(){Jn.point=le$1,Jn.lineStart=Vs,Jn.lineEnd=Gs},result:function(){var t=xr?[Ju/xr,nf/xr]:Ce?[Ao/Ce,So/Ce]:wr?[Qu/wr,Ku/wr]:[NaN,NaN];return Qu=Ku=wr=Ao=So=Ce=Ju=nf=xr=0,t}};function le$1(t,n){Qu+=t,Ku+=n,++wr}function Vs(){Jn.point=Vw}function Vw(t,n){Jn.point=Gw,le$1(ct=t,st=n)}function Gw(t,n){var a=t-ct,s=n-st,l=$n(a*a+s*s);Ao+=l*(ct+t)/2,So+=l*(st+n)/2,Ce+=l,le$1(ct=t,st=n)}function Gs(){Jn.point=le$1}function Zw(){Jn.point=Kw}function Qw(){o1(r1,i1)}function Kw(t,n){Jn.point=o1,le$1(r1=ct=t,i1=st=n)}function o1(t,n){var a=t-ct,s=n-st,l=$n(a*a+s*s);Ao+=l*(ct+t)/2,So+=l*(st+n)/2,Ce+=l,l=st*t-ct*n,Ju+=l*(ct+t),nf+=l*(st+n),xr+=l*3,le$1(ct=t,st=n)}function a1(t){this._context=t}a1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ln);break}}},result:ln};var tf=new bn,Za,u1,f1,Mr,$r,Vr={point:ln,lineStart:function(){Vr.point=Jw},lineEnd:function(){Za&&c1(u1,f1),Vr.point=ln},polygonStart:function(){Za=!0},polygonEnd:function(){Za=null},result:function(){var t=+tf;return tf=new bn,t}};function Jw(t,n){Vr.point=c1,u1=Mr=t,f1=$r=n}function c1(t,n){Mr-=t,$r-=n,tf.add($n(Mr*Mr+$r*$r)),Mr=t,$r=n}let Zs,Eo,Qs,Ks;class Js{constructor(n){this._append=n==null?s1:n3(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,a){switch(this._point){case 0:{this._append`M${n},${a}`,this._point=1;break}case 1:{this._append`L${n},${a}`;break}default:{if(this._append`M${n},${a}`,this._radius!==Qs||this._append!==Eo){const s=this._radius,l=this._;this._="",this._append`m0,${s}a${s},${s} 0 1,1 0,${-2*s}a${s},${s} 0 1,1 0,${2*s}z`,Qs=s,Eo=this._append,Ks=this._,this._=l}this._+=Ks;break}}}result(){const n=this._;return this._="",n.length?n:null}}function s1(t){let n=1;this._+=t[0];for(const a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function n3(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return s1;if(n!==Zs){const a=10**n;Zs=n,Eo=function(s){let l=1;this._+=s[0];for(const u=s.length;l<u;++l)this._+=Math.round(arguments[l]*a)/a+s[l]}}return Eo}function t3(t,n){let a=3,s=4.5,l,u;function c(d){return d&&(typeof s=="function"&&u.pointRadius(+s.apply(this,arguments)),it(d,l(u))),u.result()}return c.area=function(d){return it(d,l(Tt)),Tt.result()},c.measure=function(d){return it(d,l(Vr)),Vr.result()},c.bounds=function(d){return it(d,l(To)),To.result()},c.centroid=function(d){return it(d,l(Jn)),Jn.result()},c.projection=function(d){return arguments.length?(l=d==null?(t=null,jr):(t=d).stream,c):t},c.context=function(d){return arguments.length?(u=d==null?(n=null,new Js(a)):new a1(n=d),typeof s!="function"&&u.pointRadius(s),c):n},c.pointRadius=function(d){return arguments.length?(s=typeof d=="function"?d:(u.pointRadius(+d),+d),c):s},c.digits=function(d){if(!arguments.length)return a;if(d==null)a=null;else{const Ct=Math.floor(d);if(!(Ct>=0))throw new RangeError(`invalid digits: ${d}`);a=Ct}return n===null&&(u=new Js(a)),c},c.projection(t).digits(a).context(n)}function e3(t){return{stream:ii(t)}}function ii(t){return function(n){var a=new ef;for(var s in t)a[s]=t[s];return a.stream=n,a}}function ef(){}ef.prototype={constructor:ef,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Uf(t,n,a){var s=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),s!=null&&t.clipExtent(null),it(a,t.stream(To)),n(To.result()),s!=null&&t.clipExtent(s),t}function aa(t,n,a){return Uf(t,function(s){var l=n[1][0]-n[0][0],u=n[1][1]-n[0][1],c=Math.min(l/(s[1][0]-s[0][0]),u/(s[1][1]-s[0][1])),d=+n[0][0]+(l-c*(s[1][0]+s[0][0]))/2,Ct=+n[0][1]+(u-c*(s[1][1]+s[0][1]))/2;t.scale(150*c).translate([d,Ct])},a)}function Xf(t,n,a){return aa(t,[[0,0],n],a)}function Hf(t,n,a){return Uf(t,function(s){var l=+n,u=l/(s[1][0]-s[0][0]),c=(l-u*(s[1][0]+s[0][0]))/2,d=-u*s[0][1];t.scale(150*u).translate([c,d])},a)}function jf(t,n,a){return Uf(t,function(s){var l=+n,u=l/(s[1][1]-s[0][1]),c=-u*s[0][0],d=(l-u*(s[1][1]+s[0][1]))/2;t.scale(150*u).translate([c,d])},a)}var nl=16,r3=B$1(30*H$1);function tl(t,n){return+n?o3(t,n):i3(t)}function i3(t){return ii({point:function(n,a){n=t(n,a),this.stream.point(n[0],n[1])}})}function o3(t,n){function a(s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In){var ix=ar-s,ax=en-l,ox=ix*ix+ax*ax;if(ox>4*n&&Cn--){var sx=c+on,ux=d+cn,cx=Ct+dn,hx=$n(sx*sx+ux*ux+cx*cx),gx=Un(cx/=hx),fx=nn(nn(cx)-1)<U$1||nn(u-tn)<U$1?(u+tn)/2:Bn(ux,sx),dx=t(fx,gx),mx=dx[0],vx=dx[1],bx=mx-s,xx=vx-l,_x=ax*bx-ix*xx;(_x*_x/ox>n||nn((ix*bx+ax*xx)/ox-.5)>.3||c*on+d*cn+Ct*dn<r3)&&(a(s,l,u,c,d,Ct,mx,vx,fx,sx/=hx,ux/=hx,cx,Cn,In),In.point(mx,vx),a(mx,vx,fx,sx,ux,cx,ar,en,tn,on,cn,dn,Cn,In))}}return function(s){var l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In={point:ix,lineStart:ax,lineEnd:sx,polygonStart:function(){s.polygonStart(),In.lineStart=ux},polygonEnd:function(){s.polygonEnd(),In.lineStart=ax}};function ix(gx,fx){gx=t(gx,fx),s.point(gx[0],gx[1])}function ax(){tn=NaN,In.point=ox,s.lineStart()}function ox(gx,fx){var dx=se$1([gx,fx]),mx=t(gx,fx);a(tn,on,en,cn,dn,Cn,tn=mx[0],on=mx[1],en=gx,cn=dx[0],dn=dx[1],Cn=dx[2],nl,s),s.point(tn,on)}function sx(){In.point=ix,s.lineEnd()}function ux(){ax(),In.point=cx,In.lineEnd=hx}function cx(gx,fx){ox(l=gx,fx),u=tn,c=on,d=cn,Ct=dn,ar=Cn,In.point=ox}function hx(){a(tn,on,en,cn,dn,Cn,u,c,l,d,Ct,ar,nl,s),In.lineEnd=sx,sx()}return In}}var a3=ii({point:function(t,n){this.stream.point(t*H$1,n*H$1)}});function u3(t){return ii({point:function(n,a){var s=t(n,a);return this.stream.point(s[0],s[1])}})}function f3(t,n,a,s,l){function u(c,d){return c*=s,d*=l,[n+t*c,a-t*d]}return u.invert=function(c,d){return[(c-n)/t*s,(a-d)/t*l]},u}function el(t,n,a,s,l,u){if(!u)return f3(t,n,a,s,l);var c=B$1(u),d=q$1(u),Ct=c*t,ar=d*t,en=c/t,tn=d/t,on=(d*a-c*n)/t,cn=(d*n+c*a)/t;function dn(Cn,In){return Cn*=s,In*=l,[Ct*Cn-ar*In+n,a-ar*Cn-Ct*In]}return dn.invert=function(Cn,In){return[s*(en*Cn-tn*In+on),l*(cn-tn*Cn-en*In)]},dn}function vt(t){return Wf(function(){return t})()}function Wf(t){var n,a=150,s=480,l=250,u=0,c=0,d=0,Ct=0,ar=0,en,tn=0,on=1,cn=1,dn=null,Cn=Xu,In=null,ix,ax,ox,sx=jr,ux=.5,cx,hx,gx,fx,dx;function mx(_x){return gx(_x[0]*H$1,_x[1]*H$1)}function vx(_x){return _x=gx.invert(_x[0],_x[1]),_x&&[_x[0]*an,_x[1]*an]}mx.stream=function(_x){return fx&&dx===_x?fx:fx=a3(u3(en)(Cn(cx(sx(dx=_x)))))},mx.preclip=function(_x){return arguments.length?(Cn=_x,dn=void 0,xx()):Cn},mx.postclip=function(_x){return arguments.length?(sx=_x,In=ix=ax=ox=null,xx()):sx},mx.clipAngle=function(_x){return arguments.length?(Cn=+_x?Z0(dn=_x*H$1):(dn=null,Xu),xx()):dn*an},mx.clipExtent=function(_x){return arguments.length?(sx=_x==null?(In=ix=ax=ox=null,jr):oa(In=+_x[0][0],ix=+_x[0][1],ax=+_x[1][0],ox=+_x[1][1]),xx()):In==null?null:[[In,ix],[ax,ox]]},mx.scale=function(_x){return arguments.length?(a=+_x,bx()):a},mx.translate=function(_x){return arguments.length?(s=+_x[0],l=+_x[1],bx()):[s,l]},mx.center=function(_x){return arguments.length?(u=_x[0]%360*H$1,c=_x[1]%360*H$1,bx()):[u*an,c*an]},mx.rotate=function(_x){return arguments.length?(d=_x[0]%360*H$1,Ct=_x[1]%360*H$1,ar=_x.length>2?_x[2]%360*H$1:0,bx()):[d*an,Ct*an,ar*an]},mx.angle=function(_x){return arguments.length?(tn=_x%360*H$1,bx()):tn*an},mx.reflectX=function(_x){return arguments.length?(on=_x?-1:1,bx()):on<0},mx.reflectY=function(_x){return arguments.length?(cn=_x?-1:1,bx()):cn<0},mx.precision=function(_x){return arguments.length?(cx=tl(hx,ux=_x*_x),xx()):$n(ux)},mx.fitExtent=function(_x,Ex){return aa(mx,_x,Ex)},mx.fitSize=function(_x,Ex){return Xf(mx,_x,Ex)},mx.fitWidth=function(_x,Ex){return Hf(mx,_x,Ex)},mx.fitHeight=function(_x,Ex){return jf(mx,_x,Ex)};function bx(){var _x=el(a,0,0,on,cn,tn).apply(null,n(u,c)),Ex=el(a,s-_x[0],l-_x[1],on,cn,tn);return en=Bf(d,Ct,ar),hx=Bu(n,Ex),gx=Bu(en,hx),cx=tl(hx,ux),xx()}function xx(){return fx=dx=null,mx}return function(){return n=t.apply(this,arguments),mx.invert=n.invert&&vx,bx()}}function Vf(t){var n=0,a=K$1/3,s=Wf(t),l=s(n,a);return l.parallels=function(u){return arguments.length?s(n=u[0]*H$1,a=u[1]*H$1):[n*an,a*an]},l}function c3(t){var n=B$1(t);function a(s,l){return[s*n,q$1(l)/n]}return a.invert=function(s,l){return[s/n,Un(l*n)]},a}function l1(t,n){var a=q$1(t),s=(a+q$1(n))/2;if(nn(s)<U$1)return c3(t);var l=1+a*(2*s-a),u=$n(l)/s;function c(d,Ct){var ar=$n(l-2*s*q$1(Ct))/s;return[ar*q$1(d*=s),u-ar*B$1(d)]}return c.invert=function(d,Ct){var ar=u-Ct,en=Bn(d,nn(ar))*nt(ar);return ar*s<0&&(en-=K$1*nt(d)*nt(ar)),[en/s,Un((l-(d*d+ar*ar)*s*s)/(2*s))]},c}function ko(){return Vf(l1).scale(155.424).center([0,33.6442])}function h1(){return ko().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function s3(t){var n=t.length;return{point:function(a,s){for(var l=-1;++l<n;)t[l].point(a,s)},sphere:function(){for(var a=-1;++a<n;)t[a].sphere()},lineStart:function(){for(var a=-1;++a<n;)t[a].lineStart()},lineEnd:function(){for(var a=-1;++a<n;)t[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<n;)t[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<n;)t[a].polygonEnd()}}}function l3(){var t,n,a=h1(),s,l=ko().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u,c=ko().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,Ct,ar={point:function(on,cn){Ct=[on,cn]}};function en(on){var cn=on[0],dn=on[1];return Ct=null,s.point(cn,dn),Ct||(u.point(cn,dn),Ct)||(d.point(cn,dn),Ct)}en.invert=function(on){var cn=a.scale(),dn=a.translate(),Cn=(on[0]-dn[0])/cn,In=(on[1]-dn[1])/cn;return(In>=.12&&In<.234&&Cn>=-.425&&Cn<-.214?l:In>=.166&&In<.234&&Cn>=-.214&&Cn<-.115?c:a).invert(on)},en.stream=function(on){return t&&n===on?t:t=s3([a.stream(n=on),l.stream(on),c.stream(on)])},en.precision=function(on){return arguments.length?(a.precision(on),l.precision(on),c.precision(on),tn()):a.precision()},en.scale=function(on){return arguments.length?(a.scale(on),l.scale(on*.35),c.scale(on),en.translate(a.translate())):a.scale()},en.translate=function(on){if(!arguments.length)return a.translate();var cn=a.scale(),dn=+on[0],Cn=+on[1];return s=a.translate(on).clipExtent([[dn-.455*cn,Cn-.238*cn],[dn+.455*cn,Cn+.238*cn]]).stream(ar),u=l.translate([dn-.307*cn,Cn+.201*cn]).clipExtent([[dn-.425*cn+U$1,Cn+.12*cn+U$1],[dn-.214*cn-U$1,Cn+.234*cn-U$1]]).stream(ar),d=c.translate([dn-.205*cn,Cn+.212*cn]).clipExtent([[dn-.214*cn+U$1,Cn+.166*cn+U$1],[dn-.115*cn-U$1,Cn+.234*cn-U$1]]).stream(ar),tn()},en.fitExtent=function(on,cn){return aa(en,on,cn)},en.fitSize=function(on,cn){return Xf(en,on,cn)},en.fitWidth=function(on,cn){return Hf(en,on,cn)},en.fitHeight=function(on,cn){return jf(en,on,cn)};function tn(){return t=n=null,en}return en.scale(1070)}function d1(t){return function(n,a){var s=B$1(n),l=B$1(a),u=t(s*l);return u===1/0?[2,0]:[u*l*q$1(n),u*q$1(a)]}}function oi(t){return function(n,a){var s=$n(n*n+a*a),l=t(s),u=q$1(l),c=B$1(l);return[Bn(n*u,s*c),Un(s&&a*u/s)]}}var Gf=d1(function(t){return $n(2/(1+t))});Gf.invert=oi(function(t){return 2*Un(t/2)});function h3(){return vt(Gf).scale(124.75).clipAngle(180-.001)}var Zf=d1(function(t){return(t=C0(t))&&t/q$1(t)});Zf.invert=oi(function(t){return t});function d3(){return vt(Zf).scale(79.4188).clipAngle(180-.001)}function ai(t,n){return[t,uo(qf((mn+n)/2))]}ai.invert=function(t,n){return[t,2*ir(I0(n))-mn]};function g3(){return g1(ai).scale(961/Ln)}function g1(t){var n=vt(t),a=n.center,s=n.scale,l=n.translate,u=n.clipExtent,c=null,d,Ct,ar;n.scale=function(tn){return arguments.length?(s(tn),en()):s()},n.translate=function(tn){return arguments.length?(l(tn),en()):l()},n.center=function(tn){return arguments.length?(a(tn),en()):a()},n.clipExtent=function(tn){return arguments.length?(tn==null?c=d=Ct=ar=null:(c=+tn[0][0],d=+tn[0][1],Ct=+tn[1][0],ar=+tn[1][1]),en()):c==null?null:[[c,d],[Ct,ar]]};function en(){var tn=K$1*s(),on=n(X0(n.rotate()).invert([0,0]));return u(c==null?[[on[0]-tn,on[1]-tn],[on[0]+tn,on[1]+tn]]:t===ai?[[Math.max(on[0]-tn,c),d],[Math.min(on[0]+tn,Ct),ar]]:[[c,Math.max(on[1]-tn,d)],[Ct,Math.min(on[1]+tn,ar)]])}return en()}function Ai(t){return qf((mn+t)/2)}function p1(t,n){var a=B$1(t),s=t===n?q$1(t):uo(a/B$1(n))/uo(Ai(n)/Ai(t)),l=a*ja(Ai(t),s)/s;if(!s)return ai;function u(c,d){l>0?d<-mn+U$1&&(d=-mn+U$1):d>mn-U$1&&(d=mn-U$1);var Ct=l/ja(Ai(d),s);return[Ct*q$1(s*c),l-Ct*B$1(s*c)]}return u.invert=function(c,d){var Ct=l-d,ar=nt(s)*$n(c*c+Ct*Ct),en=Bn(c,nn(Ct))*nt(Ct);return Ct*s<0&&(en-=K$1*nt(c)*nt(Ct)),[en/s,2*ir(ja(l/ar,1/s))-mn]},u}function p3(){return Vf(p1).scale(109.5).parallels([30,30])}function Gr(t,n){return[t,n]}Gr.invert=Gr;function m3(){return vt(Gr).scale(152.63)}function m1(t,n){var a=B$1(t),s=t===n?q$1(t):(a-B$1(n))/(n-t),l=a/s+t;if(nn(s)<U$1)return Gr;function u(c,d){var Ct=l-d,ar=s*c;return[Ct*q$1(ar),l-Ct*B$1(ar)]}return u.invert=function(c,d){var Ct=l-d,ar=Bn(c,nn(Ct))*nt(Ct);return Ct*s<0&&(ar-=K$1*nt(c)*nt(Ct)),[ar/s,l-nt(s)*$n(c*c+Ct*Ct)]},u}function y3(){return Vf(m1).scale(131.154).center([0,13.9389])}var Nr=1.340264,Rr=-.081106,Ir=893e-6,Cr=.003796,No=$n(3)/2,_3=12;function Qf(t,n){var a=Un(No*q$1(n)),s=a*a,l=s*s*s;return[t*B$1(a)/(No*(Nr+3*Rr*s+l*(7*Ir+9*Cr*s))),a*(Nr+Rr*s+l*(Ir+Cr*s))]}Qf.invert=function(t,n){for(var a=n,s=a*a,l=s*s*s,u=0,c,d,Ct;u<_3&&(d=a*(Nr+Rr*s+l*(Ir+Cr*s))-n,Ct=Nr+3*Rr*s+l*(7*Ir+9*Cr*s),a-=c=d/Ct,s=a*a,l=s*s*s,!(nn(c)<Hr));++u);return[No*t*(Nr+3*Rr*s+l*(7*Ir+9*Cr*s))/B$1(a),Un(q$1(a)/No)]};function v3$1(){return vt(Qf).scale(177.158)}function Kf(t,n){var a=B$1(n),s=B$1(t)*a;return[a*q$1(t)/s,q$1(n)/s]}Kf.invert=oi(ir);function b3(){return vt(Kf).scale(144.049).clipAngle(60)}function w3(){var t=1,n=0,a=0,s=1,l=1,u=0,c,d,Ct=null,ar,en,tn,on=1,cn=1,dn=ii({point:function(sx,ux){var cx=ox([sx,ux]);this.stream.point(cx[0],cx[1])}}),Cn=jr,In,ix;function ax(){return on=t*s,cn=t*l,In=ix=null,ox}function ox(sx){var ux=sx[0]*on,cx=sx[1]*cn;if(u){var hx=cx*c-ux*d;ux=ux*c+cx*d,cx=hx}return[ux+n,cx+a]}return ox.invert=function(sx){var ux=sx[0]-n,cx=sx[1]-a;if(u){var hx=cx*c+ux*d;ux=ux*c-cx*d,cx=hx}return[ux/on,cx/cn]},ox.stream=function(sx){return In&&ix===sx?In:In=dn(Cn(ix=sx))},ox.postclip=function(sx){return arguments.length?(Cn=sx,Ct=ar=en=tn=null,ax()):Cn},ox.clipExtent=function(sx){return arguments.length?(Cn=sx==null?(Ct=ar=en=tn=null,jr):oa(Ct=+sx[0][0],ar=+sx[0][1],en=+sx[1][0],tn=+sx[1][1]),ax()):Ct==null?null:[[Ct,ar],[en,tn]]},ox.scale=function(sx){return arguments.length?(t=+sx,ax()):t},ox.translate=function(sx){return arguments.length?(n=+sx[0],a=+sx[1],ax()):[n,a]},ox.angle=function(sx){return arguments.length?(u=sx%360*H$1,d=q$1(u),c=B$1(u),ax()):u*an},ox.reflectX=function(sx){return arguments.length?(s=sx?-1:1,ax()):s<0},ox.reflectY=function(sx){return arguments.length?(l=sx?-1:1,ax()):l<0},ox.fitExtent=function(sx,ux){return aa(ox,sx,ux)},ox.fitSize=function(sx,ux){return Xf(ox,sx,ux)},ox.fitWidth=function(sx,ux){return Hf(ox,sx,ux)},ox.fitHeight=function(sx,ux){return jf(ox,sx,ux)},ox}function Jf(t,n){var a=n*n,s=a*a;return[t*(.8707-.131979*a+s*(-.013791+s*(.003971*a-.001529*s))),n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))]}Jf.invert=function(t,n){var a=n,s=25,l;do{var u=a*a,c=u*u;a-=l=(a*(1.007226+u*(.015085+c*(-.044475+.028874*u-.005916*c)))-n)/(1.007226+u*(.015085*3+c*(-.044475*7+.028874*9*u-.005916*11*c)))}while(nn(l)>U$1&&--s>0);return[t/(.8707+(u=a*a)*(-.131979+u*(-.013791+u*u*u*(.003971-.001529*u)))),a]};function x3(){return vt(Jf).scale(175.295)}function nc(t,n){return[B$1(n)*q$1(t),q$1(n)]}nc.invert=oi(Un);function M3(){return vt(nc).scale(249.5).clipAngle(90+U$1)}function tc(t,n){var a=B$1(n),s=1+B$1(t)*a;return[a*q$1(t)/s,q$1(n)/s]}tc.invert=oi(function(t){return 2*ir(t)});function $3(){return vt(tc).scale(250).clipAngle(142)}function ec(t,n){return[uo(qf((mn+n)/2)),-t]}ec.invert=function(t,n){return[-n,2*ir(I0(t))-mn]};function T3(){var t=g1(ec),n=t.center,a=t.rotate;return t.center=function(s){return arguments.length?n([-s[1],s[0]]):(s=n(),[s[1],-s[0]])},t.rotate=function(s){return arguments.length?a([s[0],s[1],s.length>2?s[2]+90:90]):(s=a(),[s[0],s[1],s[2]-90])},a([0,0,90]).scale(159.155)}function A3(t,n){return t.parent===n.parent?1:2}function S3(t){return t.reduce(E3,0)/t.length}function E3(t,n){return t+n.x}function k3(t){return 1+t.reduce(N3,0)}function N3(t,n){return Math.max(t,n.y)}function R3(t){for(var n;n=t.children;)t=n[0];return t}function I3(t){for(var n;n=t.children;)t=n[n.length-1];return t}function C3(){var t=A3,n=1,a=1,s=!1;function l(u){var c,d=0;u.eachAfter(function(on){var cn=on.children;cn?(on.x=S3(cn),on.y=k3(cn)):(on.x=c?d+=t(on,c):0,on.y=0,c=on)});var Ct=R3(u),ar=I3(u),en=Ct.x-t(Ct,ar)/2,tn=ar.x+t(ar,Ct)/2;return u.eachAfter(s?function(on){on.x=(on.x-u.x)*n,on.y=(u.y-on.y)*a}:function(on){on.x=(on.x-en)/(tn-en)*n,on.y=(1-(u.y?on.y/u.y:1))*a})}return l.separation=function(u){return arguments.length?(t=u,l):t},l.size=function(u){return arguments.length?(s=!1,n=+u[0],a=+u[1],l):s?null:[n,a]},l.nodeSize=function(u){return arguments.length?(s=!0,n=+u[0],a=+u[1],l):s?[n,a]:null},l}function P3(t){var n=0,a=t.children,s=a&&a.length;if(!s)n=1;else for(;--s>=0;)n+=a[s].value;t.value=n}function D3(){return this.eachAfter(P3)}function z3(t,n){let a=-1;for(const s of this)t.call(n,s,++a,this);return this}function O3(t,n){for(var a=this,s=[a],l,u,c=-1;a=s.pop();)if(t.call(n,a,++c,this),l=a.children)for(u=l.length-1;u>=0;--u)s.push(l[u]);return this}function Y3(t,n){for(var a=this,s=[a],l=[],u,c,d,Ct=-1;a=s.pop();)if(l.push(a),u=a.children)for(c=0,d=u.length;c<d;++c)s.push(u[c]);for(;a=l.pop();)t.call(n,a,++Ct,this);return this}function F3(t,n){let a=-1;for(const s of this)if(t.call(n,s,++a,this))return s}function q3(t){return this.eachAfter(function(n){for(var a=+t(n.data)||0,s=n.children,l=s&&s.length;--l>=0;)a+=s[l].value;n.value=a})}function L3(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function B3(t){for(var n=this,a=U3(n,t),s=[n];n!==a;)n=n.parent,s.push(n);for(var l=s.length;t!==a;)s.splice(l,0,t),t=t.parent;return s}function U3(t,n){if(t===n)return t;var a=t.ancestors(),s=n.ancestors(),l=null;for(t=a.pop(),n=s.pop();t===n;)l=t,t=a.pop(),n=s.pop();return l}function X3(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function H3(){return Array.from(this)}function j3(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function W3(){var t=this,n=[];return t.each(function(a){a!==t&&n.push({source:a.parent,target:a})}),n}function*V3(){var t=this,n,a=[t],s,l,u;do for(n=a.reverse(),a=[];t=n.pop();)if(yield t,s=t.children)for(l=0,u=s.length;l<u;++l)a.push(s[l]);while(a.length)}function rc(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=Q3)):n===void 0&&(n=Z3);for(var a=new he(t),s,l=[a],u,c,d,Ct;s=l.pop();)if((c=n(s.data))&&(Ct=(c=Array.from(c)).length))for(s.children=c,d=Ct-1;d>=0;--d)l.push(u=c[d]=new he(c[d])),u.parent=s,u.depth=s.depth+1;return a.eachBefore(y1)}function G3(){return rc(this).eachBefore(K3)}function Z3(t){return t.children}function Q3(t){return Array.isArray(t)?t[1]:null}function K3(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function y1(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function he(t){this.data=t,this.depth=this.height=0,this.parent=null}he.prototype=rc.prototype={constructor:he,count:D3,each:z3,eachAfter:Y3,eachBefore:O3,find:F3,sum:q3,sort:L3,path:B3,ancestors:X3,descendants:H3,leaves:j3,links:W3,copy:G3,[Symbol.iterator]:V3};function Xi(t){return t==null?null:_1(t)}function _1(t){if(typeof t!="function")throw new Error;return t}function Kt(){return 0}function Re(t){return function(){return t}}const J3=1664525,n6=1013904223,rl=4294967296;function ic(){let t=1;return()=>(t=(J3*t+n6)%rl)/rl}function t6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function e6(t,n){let a=t.length,s,l;for(;a;)l=n()*a--|0,s=t[a],t[a]=t[l],t[l]=s;return t}function r6(t){return v1$1(t,ic())}function v1$1(t,n){for(var a=0,s=(t=e6(Array.from(t),n)).length,l=[],u,c;a<s;)u=t[a],c&&b1(c,u)?++a:(c=o6(l=i6(l,u)),a=0);return c}function i6(t,n){var a,s;if(Qa(n,t))return[n];for(a=0;a<t.length;++a)if(Si(n,t[a])&&Qa(Tr(t[a],n),t))return[t[a],n];for(a=0;a<t.length-1;++a)for(s=a+1;s<t.length;++s)if(Si(Tr(t[a],t[s]),n)&&Si(Tr(t[a],n),t[s])&&Si(Tr(t[s],n),t[a])&&Qa(w1(t[a],t[s],n),t))return[t[a],t[s],n];throw new Error}function Si(t,n){var a=t.r-n.r,s=n.x-t.x,l=n.y-t.y;return a<0||a*a<s*s+l*l}function b1(t,n){var a=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,s=n.x-t.x,l=n.y-t.y;return a>0&&a*a>s*s+l*l}function Qa(t,n){for(var a=0;a<n.length;++a)if(!b1(t,n[a]))return!1;return!0}function o6(t){switch(t.length){case 1:return a6(t[0]);case 2:return Tr(t[0],t[1]);case 3:return w1(t[0],t[1],t[2])}}function a6(t){return{x:t.x,y:t.y,r:t.r}}function Tr(t,n){var a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,Ct=u-a,ar=c-s,en=d-l,tn=Math.sqrt(Ct*Ct+ar*ar);return{x:(a+u+Ct/tn*en)/2,y:(s+c+ar/tn*en)/2,r:(tn+l+d)/2}}function w1(t,n,a){var s=t.x,l=t.y,u=t.r,c=n.x,d=n.y,Ct=n.r,ar=a.x,en=a.y,tn=a.r,on=s-c,cn=s-ar,dn=l-d,Cn=l-en,In=Ct-u,ix=tn-u,ax=s*s+l*l-u*u,ox=ax-c*c-d*d+Ct*Ct,sx=ax-ar*ar-en*en+tn*tn,ux=cn*dn-on*Cn,cx=(dn*sx-Cn*ox)/(ux*2)-s,hx=(Cn*In-dn*ix)/ux,gx=(cn*ox-on*sx)/(ux*2)-l,fx=(on*ix-cn*In)/ux,dx=hx*hx+fx*fx-1,mx=2*(u+cx*hx+gx*fx),vx=cx*cx+gx*gx-u*u,bx=-(Math.abs(dx)>1e-6?(mx+Math.sqrt(mx*mx-4*dx*vx))/(2*dx):vx/mx);return{x:s+cx+hx*bx,y:l+gx+fx*bx,r:bx}}function il(t,n,a){var s=t.x-n.x,l,u,c=t.y-n.y,d,Ct,ar=s*s+c*c;ar?(u=n.r+a.r,u*=u,Ct=t.r+a.r,Ct*=Ct,u>Ct?(l=(ar+Ct-u)/(2*ar),d=Math.sqrt(Math.max(0,Ct/ar-l*l)),a.x=t.x-l*s-d*c,a.y=t.y-l*c+d*s):(l=(ar+u-Ct)/(2*ar),d=Math.sqrt(Math.max(0,u/ar-l*l)),a.x=n.x+l*s-d*c,a.y=n.y+l*c+d*s)):(a.x=n.x+a.r,a.y=n.y)}function ol(t,n){var a=t.r+n.r-1e-6,s=n.x-t.x,l=n.y-t.y;return a>0&&a*a>s*s+l*l}function al(t){var n=t._,a=t.next._,s=n.r+a.r,l=(n.x*a.r+a.x*n.r)/s,u=(n.y*a.r+a.y*n.r)/s;return l*l+u*u}function Ei(t){this._=t,this.next=null,this.previous=null}function x1(t,n){if(!(u=(t=t6(t)).length))return 0;var a,s,l,u,c,d,Ct,ar,en,tn,on;if(a=t[0],a.x=0,a.y=0,!(u>1))return a.r;if(s=t[1],a.x=-s.r,s.x=a.r,s.y=0,!(u>2))return a.r+s.r;il(s,a,l=t[2]),a=new Ei(a),s=new Ei(s),l=new Ei(l),a.next=l.previous=s,s.next=a.previous=l,l.next=s.previous=a;e:for(Ct=3;Ct<u;++Ct){il(a._,s._,l=t[Ct]),l=new Ei(l),ar=s.next,en=a.previous,tn=s._.r,on=a._.r;do if(tn<=on){if(ol(ar._,l._)){s=ar,a.next=s,s.previous=a,--Ct;continue e}tn+=ar._.r,ar=ar.next}else{if(ol(en._,l._)){a=en,a.next=s,s.previous=a,--Ct;continue e}on+=en._.r,en=en.previous}while(ar!==en.next);for(l.previous=a,l.next=s,a.next=s.previous=s=l,c=al(a);(l=l.next)!==s;)(d=al(l))<c&&(a=l,c=d);s=a.next}for(a=[s._],l=s;(l=l.next)!==s;)a.push(l._);for(l=v1$1(a,n),Ct=0;Ct<u;++Ct)a=t[Ct],a.x-=l.x,a.y-=l.y;return l.r}function u6(t){return x1(t,ic()),t}function f6(t){return Math.sqrt(t.value)}function c6(){var t=null,n=1,a=1,s=Kt;function l(u){const c=ic();return u.x=n/2,u.y=a/2,t?u.eachBefore(ul(t)).eachAfter(Ka(s,.5,c)).eachBefore(fl(1)):u.eachBefore(ul(f6)).eachAfter(Ka(Kt,1,c)).eachAfter(Ka(s,u.r/Math.min(n,a),c)).eachBefore(fl(Math.min(n,a)/(2*u.r))),u}return l.radius=function(u){return arguments.length?(t=Xi(u),l):t},l.size=function(u){return arguments.length?(n=+u[0],a=+u[1],l):[n,a]},l.padding=function(u){return arguments.length?(s=typeof u=="function"?u:Re(+u),l):s},l}function ul(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Ka(t,n,a){return function(s){if(l=s.children){var l,u,c=l.length,d=t(s)*n||0,Ct;if(d)for(u=0;u<c;++u)l[u].r+=d;if(Ct=x1(l,a),d)for(u=0;u<c;++u)l[u].r-=d;s.r=Ct+d}}}function fl(t){return function(n){var a=n.parent;n.r*=t,a&&(n.x=a.x+t*n.x,n.y=a.y+t*n.y)}}function M1(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ui(t,n,a,s,l){for(var u=t.children,c,d=-1,Ct=u.length,ar=t.value&&(s-n)/t.value;++d<Ct;)c=u[d],c.y0=a,c.y1=l,c.x0=n,c.x1=n+=c.value*ar}function s6(){var t=1,n=1,a=0,s=!1;function l(c){var d=c.height+1;return c.x0=c.y0=a,c.x1=t,c.y1=n/d,c.eachBefore(u(n,d)),s&&c.eachBefore(M1),c}function u(c,d){return function(Ct){Ct.children&&ui(Ct,Ct.x0,c*(Ct.depth+1)/d,Ct.x1,c*(Ct.depth+2)/d);var ar=Ct.x0,en=Ct.y0,tn=Ct.x1-a,on=Ct.y1-a;tn<ar&&(ar=tn=(ar+tn)/2),on<en&&(en=on=(en+on)/2),Ct.x0=ar,Ct.y0=en,Ct.x1=tn,Ct.y1=on}}return l.round=function(c){return arguments.length?(s=!!c,l):s},l.size=function(c){return arguments.length?(t=+c[0],n=+c[1],l):[t,n]},l.padding=function(c){return arguments.length?(a=+c,l):a},l}var l6={depth:-1},cl={},Ja={};function h6(t){return t.id}function d6(t){return t.parentId}function g6(){var t=h6,n=d6,a;function s(l){var u=Array.from(l),c=t,d=n,Ct,ar,en,tn,on,cn,dn,Cn,In=new Map;if(a!=null){const ix=u.map((sx,ux)=>p6(a(sx,ux,l))),ax=ix.map(sl),ox=new Set(ix).add("");for(const sx of ax)ox.has(sx)||(ox.add(sx),ix.push(sx),ax.push(sl(sx)),u.push(Ja));c=(sx,ux)=>ix[ux],d=(sx,ux)=>ax[ux]}for(en=0,Ct=u.length;en<Ct;++en)ar=u[en],cn=u[en]=new he(ar),(dn=c(ar,en,l))!=null&&(dn+="")&&(Cn=cn.id=dn,In.set(Cn,In.has(Cn)?cl:cn)),(dn=d(ar,en,l))!=null&&(dn+="")&&(cn.parent=dn);for(en=0;en<Ct;++en)if(cn=u[en],dn=cn.parent){if(on=In.get(dn),!on)throw new Error("missing: "+dn);if(on===cl)throw new Error("ambiguous: "+dn);on.children?on.children.push(cn):on.children=[cn],cn.parent=on}else{if(tn)throw new Error("multiple roots");tn=cn}if(!tn)throw new Error("no root");if(a!=null){for(;tn.data===Ja&&tn.children.length===1;)tn=tn.children[0],--Ct;for(let ix=u.length-1;ix>=0&&(cn=u[ix],cn.data===Ja);--ix)cn.data=null}if(tn.parent=l6,tn.eachBefore(function(ix){ix.depth=ix.parent.depth+1,--Ct}).eachBefore(y1),tn.parent=null,Ct>0)throw new Error("cycle");return tn}return s.id=function(l){return arguments.length?(t=Xi(l),s):t},s.parentId=function(l){return arguments.length?(n=Xi(l),s):n},s.path=function(l){return arguments.length?(a=Xi(l),s):a},s}function p6(t){t=`${t}`;let n=t.length;return rf(t,n-1)&&!rf(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function sl(t){let n=t.length;if(n<2)return"";for(;--n>1&&!rf(t,n););return t.slice(0,n)}function rf(t,n){if(t[n]==="/"){let a=0;for(;n>0&&t[--n]==="\\";)++a;if((a&1)===0)return!0}return!1}function m6(t,n){return t.parent===n.parent?1:2}function nu(t){var n=t.children;return n?n[0]:t.t}function tu(t){var n=t.children;return n?n[n.length-1]:t.t}function y6(t,n,a){var s=a/(n.i-t.i);n.c-=s,n.s+=a,t.c+=s,n.z+=a,n.m+=a}function _6(t){for(var n=0,a=0,s=t.children,l=s.length,u;--l>=0;)u=s[l],u.z+=n,u.m+=n,n+=u.s+(a+=u.c)}function v6(t,n,a){return t.a.parent===n.parent?t.a:a}function Hi(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Hi.prototype=Object.create(he.prototype);function b6(t){for(var n=new Hi(t,0),a,s=[n],l,u,c,d;a=s.pop();)if(u=a._.children)for(a.children=new Array(d=u.length),c=d-1;c>=0;--c)s.push(l=a.children[c]=new Hi(u[c],c)),l.parent=a;return(n.parent=new Hi(null,0)).children=[n],n}function w6(){var t=m6,n=1,a=1,s=null;function l(ar){var en=b6(ar);if(en.eachAfter(u),en.parent.m=-en.z,en.eachBefore(c),s)ar.eachBefore(Ct);else{var tn=ar,on=ar,cn=ar;ar.eachBefore(function(ax){ax.x<tn.x&&(tn=ax),ax.x>on.x&&(on=ax),ax.depth>cn.depth&&(cn=ax)});var dn=tn===on?1:t(tn,on)/2,Cn=dn-tn.x,In=n/(on.x+dn+Cn),ix=a/(cn.depth||1);ar.eachBefore(function(ax){ax.x=(ax.x+Cn)*In,ax.y=ax.depth*ix})}return ar}function u(ar){var en=ar.children,tn=ar.parent.children,on=ar.i?tn[ar.i-1]:null;if(en){_6(ar);var cn=(en[0].z+en[en.length-1].z)/2;on?(ar.z=on.z+t(ar._,on._),ar.m=ar.z-cn):ar.z=cn}else on&&(ar.z=on.z+t(ar._,on._));ar.parent.A=d(ar,on,ar.parent.A||tn[0])}function c(ar){ar._.x=ar.z+ar.parent.m,ar.m+=ar.parent.m}function d(ar,en,tn){if(en){for(var on=ar,cn=ar,dn=en,Cn=on.parent.children[0],In=on.m,ix=cn.m,ax=dn.m,ox=Cn.m,sx;dn=tu(dn),on=nu(on),dn&&on;)Cn=nu(Cn),cn=tu(cn),cn.a=ar,sx=dn.z+ax-on.z-In+t(dn._,on._),sx>0&&(y6(v6(dn,ar,tn),ar,sx),In+=sx,ix+=sx),ax+=dn.m,In+=on.m,ox+=Cn.m,ix+=cn.m;dn&&!tu(cn)&&(cn.t=dn,cn.m+=ax-ix),on&&!nu(Cn)&&(Cn.t=on,Cn.m+=In-ox,tn=ar)}return tn}function Ct(ar){ar.x*=n,ar.y=ar.depth*a}return l.separation=function(ar){return arguments.length?(t=ar,l):t},l.size=function(ar){return arguments.length?(s=!1,n=+ar[0],a=+ar[1],l):s?null:[n,a]},l.nodeSize=function(ar){return arguments.length?(s=!0,n=+ar[0],a=+ar[1],l):s?[n,a]:null},l}function ua(t,n,a,s,l){for(var u=t.children,c,d=-1,Ct=u.length,ar=t.value&&(l-a)/t.value;++d<Ct;)c=u[d],c.x0=n,c.x1=s,c.y0=a,c.y1=a+=c.value*ar}var $1=(1+Math.sqrt(5))/2;function T1(t,n,a,s,l,u){for(var c=[],d=n.children,Ct,ar,en=0,tn=0,on=d.length,cn,dn,Cn=n.value,In,ix,ax,ox,sx,ux,cx;en<on;){cn=l-a,dn=u-s;do In=d[tn++].value;while(!In&&tn<on);for(ix=ax=In,ux=Math.max(dn/cn,cn/dn)/(Cn*t),cx=In*In*ux,sx=Math.max(ax/cx,cx/ix);tn<on;++tn){if(In+=ar=d[tn].value,ar<ix&&(ix=ar),ar>ax&&(ax=ar),cx=In*In*ux,ox=Math.max(ax/cx,cx/ix),ox>sx){In-=ar;break}sx=ox}c.push(Ct={value:In,dice:cn<dn,children:d.slice(en,tn)}),Ct.dice?ui(Ct,a,s,l,Cn?s+=dn*In/Cn:u):ua(Ct,a,s,Cn?a+=cn*In/Cn:l,u),Cn-=In,en=tn}return c}const A1=(function t(n){function a(s,l,u,c,d){T1(n,s,l,u,c,d)}return a.ratio=function(s){return t((s=+s)>1?s:1)},a})($1);function x6(){var t=A1,n=!1,a=1,s=1,l=[0],u=Kt,c=Kt,d=Kt,Ct=Kt,ar=Kt;function en(on){return on.x0=on.y0=0,on.x1=a,on.y1=s,on.eachBefore(tn),l=[0],n&&on.eachBefore(M1),on}function tn(on){var cn=l[on.depth],dn=on.x0+cn,Cn=on.y0+cn,In=on.x1-cn,ix=on.y1-cn;In<dn&&(dn=In=(dn+In)/2),ix<Cn&&(Cn=ix=(Cn+ix)/2),on.x0=dn,on.y0=Cn,on.x1=In,on.y1=ix,on.children&&(cn=l[on.depth+1]=u(on)/2,dn+=ar(on)-cn,Cn+=c(on)-cn,In-=d(on)-cn,ix-=Ct(on)-cn,In<dn&&(dn=In=(dn+In)/2),ix<Cn&&(Cn=ix=(Cn+ix)/2),t(on,dn,Cn,In,ix))}return en.round=function(on){return arguments.length?(n=!!on,en):n},en.size=function(on){return arguments.length?(a=+on[0],s=+on[1],en):[a,s]},en.tile=function(on){return arguments.length?(t=_1(on),en):t},en.padding=function(on){return arguments.length?en.paddingInner(on).paddingOuter(on):en.paddingInner()},en.paddingInner=function(on){return arguments.length?(u=typeof on=="function"?on:Re(+on),en):u},en.paddingOuter=function(on){return arguments.length?en.paddingTop(on).paddingRight(on).paddingBottom(on).paddingLeft(on):en.paddingTop()},en.paddingTop=function(on){return arguments.length?(c=typeof on=="function"?on:Re(+on),en):c},en.paddingRight=function(on){return arguments.length?(d=typeof on=="function"?on:Re(+on),en):d},en.paddingBottom=function(on){return arguments.length?(Ct=typeof on=="function"?on:Re(+on),en):Ct},en.paddingLeft=function(on){return arguments.length?(ar=typeof on=="function"?on:Re(+on),en):ar},en}function M6(t,n,a,s,l){var u=t.children,c,d=u.length,Ct,ar=new Array(d+1);for(ar[0]=Ct=c=0;c<d;++c)ar[c+1]=Ct+=u[c].value;en(0,d,t.value,n,a,s,l);function en(tn,on,cn,dn,Cn,In,ix){if(tn>=on-1){var ax=u[tn];ax.x0=dn,ax.y0=Cn,ax.x1=In,ax.y1=ix;return}for(var ox=ar[tn],sx=cn/2+ox,ux=tn+1,cx=on-1;ux<cx;){var hx=ux+cx>>>1;ar[hx]<sx?ux=hx+1:cx=hx}sx-ar[ux-1]<ar[ux]-sx&&tn+1<ux&&--ux;var gx=ar[ux]-ox,fx=cn-gx;if(In-dn>ix-Cn){var dx=cn?(dn*fx+In*gx)/cn:In;en(tn,ux,gx,dn,Cn,dx,ix),en(ux,on,fx,dx,Cn,In,ix)}else{var mx=cn?(Cn*fx+ix*gx)/cn:ix;en(tn,ux,gx,dn,Cn,In,mx),en(ux,on,fx,dn,mx,In,ix)}}}function $6(t,n,a,s,l){(t.depth&1?ua:ui)(t,n,a,s,l)}const T6=(function t(n){function a(s,l,u,c,d){if((Ct=s._squarify)&&Ct.ratio===n)for(var Ct,ar,en,tn,on=-1,cn,dn=Ct.length,Cn=s.value;++on<dn;){for(ar=Ct[on],en=ar.children,tn=ar.value=0,cn=en.length;tn<cn;++tn)ar.value+=en[tn].value;ar.dice?ui(ar,l,u,c,Cn?u+=(d-u)*ar.value/Cn:d):ua(ar,l,u,Cn?l+=(c-l)*ar.value/Cn:c,d),Cn-=ar.value}else s._squarify=Ct=T1(n,s,l,u,c,d),Ct.ratio=n}return a.ratio=function(s){return t((s=+s)>1?s:1)},a})($1);function A6(t){for(var n=-1,a=t.length,s,l=t[a-1],u=0;++n<a;)s=l,l=t[n],u+=s[1]*l[0]-s[0]*l[1];return u/2}function S6(t){for(var n=-1,a=t.length,s=0,l=0,u,c=t[a-1],d,Ct=0;++n<a;)u=c,c=t[n],Ct+=d=u[0]*c[1]-c[0]*u[1],s+=(u[0]+c[0])*d,l+=(u[1]+c[1])*d;return Ct*=3,[s/Ct,l/Ct]}function E6(t,n,a){return(n[0]-t[0])*(a[1]-t[1])-(n[1]-t[1])*(a[0]-t[0])}function k6(t,n){return t[0]-n[0]||t[1]-n[1]}function ll(t){const n=t.length,a=[0,1];let s=2,l;for(l=2;l<n;++l){for(;s>1&&E6(t[a[s-2]],t[a[s-1]],t[l])<=0;)--s;a[s++]=l}return a.slice(0,s)}function N6(t){if((a=t.length)<3)return null;var n,a,s=new Array(a),l=new Array(a);for(n=0;n<a;++n)s[n]=[+t[n][0],+t[n][1],n];for(s.sort(k6),n=0;n<a;++n)l[n]=[s[n][0],-s[n][1]];var u=ll(s),c=ll(l),d=c[0]===u[0],Ct=c[c.length-1]===u[u.length-1],ar=[];for(n=u.length-1;n>=0;--n)ar.push(t[s[u[n]][2]]);for(n=+d;n<c.length-Ct;++n)ar.push(t[s[c[n]][2]]);return ar}function R6(t,n){for(var a=t.length,s=t[a-1],l=n[0],u=n[1],c=s[0],d=s[1],Ct,ar,en=!1,tn=0;tn<a;++tn)s=t[tn],Ct=s[0],ar=s[1],ar>u!=d>u&&l<(c-Ct)*(u-ar)/(d-ar)+Ct&&(en=!en),c=Ct,d=ar;return en}function I6(t){for(var n=-1,a=t.length,s=t[a-1],l,u,c=s[0],d=s[1],Ct=0;++n<a;)l=c,u=d,s=t[n],c=s[0],d=s[1],l-=c,u-=d,Ct+=Math.hypot(l,u);return Ct}const An=Math.random,C6=(function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,arguments.length===1?(l=s,s=0):l-=s,function(){return n()*l+s}}return a.source=t,a})(An),P6=(function t(n){function a(s,l){return arguments.length<2&&(l=s,s=0),s=Math.floor(s),l=Math.floor(l)-s,function(){return Math.floor(n()*l+s)}}return a.source=t,a})(An),oc=(function t(n){function a(s,l){var u,c;return s=s==null?0:+s,l=l==null?1:+l,function(){var d;if(u!=null)d=u,u=null;else do u=n()*2-1,d=n()*2-1,c=u*u+d*d;while(!c||c>1);return s+l*d*Math.sqrt(-2*Math.log(c)/c)}}return a.source=t,a})(An),D6=(function t(n){var a=oc.source(n);function s(){var l=a.apply(this,arguments);return function(){return Math.exp(l())}}return s.source=t,s})(An),S1=(function t(n){function a(s){return(s=+s)<=0?()=>0:function(){for(var l=0,u=s;u>1;--u)l+=n();return l+u*n()}}return a.source=t,a})(An),z6=(function t(n){var a=S1.source(n);function s(l){if((l=+l)==0)return n;var u=a(l);return function(){return u()/l}}return s.source=t,s})(An),O6=(function t(n){function a(s){return function(){return-Math.log1p(-n())/s}}return a.source=t,a})(An),Y6=(function t(n){function a(s){if((s=+s)<0)throw new RangeError("invalid alpha");return s=1/-s,function(){return Math.pow(1-n(),s)}}return a.source=t,a})(An),F6=(function t(n){function a(s){if((s=+s)<0||s>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+s)}}return a.source=t,a})(An),E1=(function t(n){function a(s){if((s=+s)<0||s>1)throw new RangeError("invalid p");return s===0?()=>1/0:s===1?()=>1:(s=Math.log1p(-s),function(){return 1+Math.floor(Math.log1p(-n())/s)})}return a.source=t,a})(An),ac=(function t(n){var a=oc.source(n)();function s(l,u){if((l=+l)<0)throw new RangeError("invalid k");if(l===0)return()=>0;if(u=u==null?1:+u,l===1)return()=>-Math.log1p(-n())*u;var c=(l<1?l+1:l)-1/3,d=1/(3*Math.sqrt(c)),Ct=l<1?()=>Math.pow(n(),1/l):()=>1;return function(){do{do var ar=a(),en=1+d*ar;while(en<=0);en*=en*en;var tn=1-n()}while(tn>=1-.0331*ar*ar*ar*ar&&Math.log(tn)>=.5*ar*ar+c*(1-en+Math.log(en)));return c*en*Ct()*u}}return s.source=t,s})(An),k1=(function t(n){var a=ac.source(n);function s(l,u){var c=a(l),d=a(u);return function(){var Ct=c();return Ct===0?0:Ct/(Ct+d())}}return s.source=t,s})(An),N1=(function t(n){var a=E1.source(n),s=k1.source(n);function l(u,c){return u=+u,(c=+c)>=1?()=>u:c<=0?()=>0:function(){for(var d=0,Ct=u,ar=c;Ct*ar>16&&Ct*(1-ar)>16;){var en=Math.floor((Ct+1)*ar),tn=s(en,Ct-en+1)();tn<=ar?(d+=en,Ct-=en,ar=(ar-tn)/(1-tn)):(Ct=en-1,ar/=tn)}for(var on=ar<.5,cn=on?ar:1-ar,dn=a(cn),Cn=dn(),In=0;Cn<=Ct;++In)Cn+=dn();return d+(on?In:Ct-In)}}return l.source=t,l})(An),q6=(function t(n){function a(s,l,u){var c;return(s=+s)==0?c=d=>-Math.log(d):(s=1/s,c=d=>Math.pow(d,s)),l=l==null?0:+l,u=u==null?1:+u,function(){return l+u*c(-Math.log1p(-n()))}}return a.source=t,a})(An),L6=(function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,function(){return s+l*Math.tan(Math.PI*n())}}return a.source=t,a})(An),B6=(function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,function(){var u=n();return s+l*Math.log(u/(1-u))}}return a.source=t,a})(An),U6=(function t(n){var a=ac.source(n),s=N1.source(n);function l(u){return function(){for(var c=0,d=u;d>16;){var Ct=Math.floor(.875*d),ar=a(Ct)();if(ar>d)return c+s(Ct-1,d/ar)();c+=Ct,d-=ar}for(var en=-Math.log1p(-n()),tn=0;en<=d;++tn)en-=Math.log1p(-n());return c+tn}}return l.source=t,l})(An),X6=1664525,H6=1013904223,hl=1/4294967296;function j6(t=Math.random()){let n=(0<=t&&t<1?t/hl:Math.abs(t))|0;return()=>(n=X6*n+H6|0,hl*(n>>>0))}function et(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function It(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const of=Symbol("implicit");function uc(){var t=new Pr,n=[],a=[],s=of;function l(u){let c=t.get(u);if(c===void 0){if(s!==of)return s;t.set(u,c=n.push(u)-1)}return a[c%a.length]}return l.domain=function(u){if(!arguments.length)return n.slice();n=[],t=new Pr;for(const c of u)t.has(c)||t.set(c,n.push(c)-1);return l},l.range=function(u){return arguments.length?(a=Array.from(u),l):a.slice()},l.unknown=function(u){return arguments.length?(s=u,l):s},l.copy=function(){return uc(n,a).unknown(s)},et.apply(l,arguments),l}function fc(){var t=uc().unknown(void 0),n=t.domain,a=t.range,s=0,l=1,u,c,d=!1,Ct=0,ar=0,en=.5;delete t.unknown;function tn(){var on=n().length,cn=l<s,dn=cn?l:s,Cn=cn?s:l;u=(Cn-dn)/Math.max(1,on-Ct+ar*2),d&&(u=Math.floor(u)),dn+=(Cn-dn-u*(on-Ct))*en,c=u*(1-Ct),d&&(dn=Math.round(dn),c=Math.round(c));var In=zt(on).map(function(ix){return dn+u*ix});return a(cn?In.reverse():In)}return t.domain=function(on){return arguments.length?(n(on),tn()):n()},t.range=function(on){return arguments.length?([s,l]=on,s=+s,l=+l,tn()):[s,l]},t.rangeRound=function(on){return[s,l]=on,s=+s,l=+l,d=!0,tn()},t.bandwidth=function(){return c},t.step=function(){return u},t.round=function(on){return arguments.length?(d=!!on,tn()):d},t.padding=function(on){return arguments.length?(Ct=Math.min(1,ar=+on),tn()):Ct},t.paddingInner=function(on){return arguments.length?(Ct=Math.min(1,on),tn()):Ct},t.paddingOuter=function(on){return arguments.length?(ar=+on,tn()):ar},t.align=function(on){return arguments.length?(en=Math.max(0,Math.min(1,on)),tn()):en},t.copy=function(){return fc(n(),[s,l]).round(d).paddingInner(Ct).paddingOuter(ar).align(en)},et.apply(tn(),arguments)}function R1(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return R1(n())},t}function W6(){return R1(fc.apply(null,arguments).paddingInner(1))}function V6(t){return function(){return t}}function Ro(t){return+t}var dl=[0,1];function Fn(t){return t}function af(t,n){return(n-=t=+t)?function(a){return(a-t)/n}:V6(isNaN(n)?NaN:.5)}function G6(t,n){var a;return t>n&&(a=t,t=n,n=a),function(s){return Math.max(t,Math.min(n,s))}}function Z6(t,n,a){var s=t[0],l=t[1],u=n[0],c=n[1];return l<s?(s=af(l,s),u=a(c,u)):(s=af(s,l),u=a(u,c)),function(d){return u(s(d))}}function Q6(t,n,a){var s=Math.min(t.length,n.length)-1,l=new Array(s),u=new Array(s),c=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++c<s;)l[c]=af(t[c],t[c+1]),u[c]=a(n[c],n[c+1]);return function(d){var Ct=Ft(t,d,1,s)-1;return u[Ct](l[Ct](d))}}function fi(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fa(){var t=dl,n=dl,a=Ht,s,l,u,c=Fn,d,Ct,ar;function en(){var on=Math.min(t.length,n.length);return c!==Fn&&(c=G6(t[0],t[on-1])),d=on>2?Q6:Z6,Ct=ar=null,tn}function tn(on){return on==null||isNaN(on=+on)?u:(Ct||(Ct=d(t.map(s),n,a)))(s(c(on)))}return tn.invert=function(on){return c(l((ar||(ar=d(n,t.map(s),Kn)))(on)))},tn.domain=function(on){return arguments.length?(t=Array.from(on,Ro),en()):t.slice()},tn.range=function(on){return arguments.length?(n=Array.from(on),en()):n.slice()},tn.rangeRound=function(on){return n=Array.from(on),a=Vo,en()},tn.clamp=function(on){return arguments.length?(c=on?!0:Fn,en()):c!==Fn},tn.interpolate=function(on){return arguments.length?(a=on,en()):a},tn.unknown=function(on){return arguments.length?(u=on,tn):u},function(on,cn){return s=on,l=cn,en()}}function cc(){return fa()(Fn,Fn)}function I1(t,n,a,s){var l=Vi(t,n,a),u;switch(s=We(s??",f"),s.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(n));return s.precision==null&&!isNaN(u=N0(l,c))&&(s.precision=u),Ff(s,c)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(u=R0(l,Math.max(Math.abs(t),Math.abs(n))))&&(s.precision=u-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(u=k0(l))&&(s.precision=u-(s.type==="%")*2);break}}return ia(s)}function jt(t){var n=t.domain;return t.ticks=function(a){var s=n();return oe$1(s[0],s[s.length-1],a??10)},t.tickFormat=function(a,s){var l=n();return I1(l[0],l[l.length-1],a??10,s)},t.nice=function(a){a==null&&(a=10);var s=n(),l=0,u=s.length-1,c=s[l],d=s[u],Ct,ar,en=10;for(d<c&&(ar=c,c=d,d=ar,ar=l,l=u,u=ar);en-- >0;){if(ar=ae$1(c,d,a),ar===Ct)return s[l]=c,s[u]=d,n(s);if(ar>0)c=Math.floor(c/ar)*ar,d=Math.ceil(d/ar)*ar;else if(ar<0)c=Math.ceil(c*ar)/ar,d=Math.floor(d*ar)/ar;else break;Ct=ar}return t},t}function C1(){var t=cc();return t.copy=function(){return fi(t,C1())},et.apply(t,arguments),jt(t)}function P1(t){var n;function a(s){return s==null||isNaN(s=+s)?n:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(t=Array.from(s,Ro),a):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return P1(t).unknown(n)},t=arguments.length?Array.from(t,Ro):[0,1],jt(a)}function D1(t,n){t=t.slice();var a=0,s=t.length-1,l=t[a],u=t[s],c;return u<l&&(c=a,a=s,s=c,c=l,l=u,u=c),t[a]=n.floor(l),t[s]=n.ceil(u),t}function gl(t){return Math.log(t)}function pl(t){return Math.exp(t)}function K6(t){return-Math.log(-t)}function J6(t){return-Math.exp(-t)}function n5(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t5(t){return t===10?n5:t===Math.E?Math.exp:n=>Math.pow(t,n)}function e5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function ml(t){return(n,a)=>-t(-n,a)}function sc(t){const n=t(gl,pl),a=n.domain;let s=10,l,u;function c(){return l=e5(s),u=t5(s),a()[0]<0?(l=ml(l),u=ml(u),t(K6,J6)):t(gl,pl),n}return n.base=function(d){return arguments.length?(s=+d,c()):s},n.domain=function(d){return arguments.length?(a(d),c()):a()},n.ticks=d=>{const Ct=a();let ar=Ct[0],en=Ct[Ct.length-1];const tn=en<ar;tn&&([ar,en]=[en,ar]);let on=l(ar),cn=l(en),dn,Cn;const In=d==null?10:+d;let ix=[];if(!(s%1)&&cn-on<In){if(on=Math.floor(on),cn=Math.ceil(cn),ar>0){for(;on<=cn;++on)for(dn=1;dn<s;++dn)if(Cn=on<0?dn/u(-on):dn*u(on),!(Cn<ar)){if(Cn>en)break;ix.push(Cn)}}else for(;on<=cn;++on)for(dn=s-1;dn>=1;--dn)if(Cn=on>0?dn/u(-on):dn*u(on),!(Cn<ar)){if(Cn>en)break;ix.push(Cn)}ix.length*2<In&&(ix=oe$1(ar,en,In))}else ix=oe$1(on,cn,Math.min(cn-on,In)).map(u);return tn?ix.reverse():ix},n.tickFormat=(d,Ct)=>{if(d==null&&(d=10),Ct==null&&(Ct=s===10?"s":","),typeof Ct!="function"&&(!(s%1)&&(Ct=We(Ct)).precision==null&&(Ct.trim=!0),Ct=ia(Ct)),d===1/0)return Ct;const ar=Math.max(1,s*d/n.ticks().length);return en=>{let tn=en/u(Math.round(l(en)));return tn*s<s-.5&&(tn*=s),tn<=ar?Ct(en):""}},n.nice=()=>a(D1(a(),{floor:d=>u(Math.floor(l(d))),ceil:d=>u(Math.ceil(l(d)))})),n}function z1(){const t=sc(fa()).domain([1,10]);return t.copy=()=>fi(t,z1()).base(t.base()),et.apply(t,arguments),t}function yl(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function _l(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function lc(t){var n=1,a=t(yl(n),_l(n));return a.constant=function(s){return arguments.length?t(yl(n=+s),_l(n)):n},jt(a)}function O1(){var t=lc(fa());return t.copy=function(){return fi(t,O1()).constant(t.constant())},et.apply(t,arguments)}function vl(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function r5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i5(t){return t<0?-t*t:t*t}function hc(t){var n=t(Fn,Fn),a=1;function s(){return a===1?t(Fn,Fn):a===.5?t(r5,i5):t(vl(a),vl(1/a))}return n.exponent=function(l){return arguments.length?(a=+l,s()):a},jt(n)}function dc(){var t=hc(fa());return t.copy=function(){return fi(t,dc()).exponent(t.exponent())},et.apply(t,arguments),t}function o5(){return dc.apply(null,arguments).exponent(.5)}function bl(t){return Math.sign(t)*t*t}function a5(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Y1(){var t=cc(),n=[0,1],a=!1,s;function l(u){var c=a5(t(u));return isNaN(c)?s:a?Math.round(c):c}return l.invert=function(u){return t.invert(bl(u))},l.domain=function(u){return arguments.length?(t.domain(u),l):t.domain()},l.range=function(u){return arguments.length?(t.range((n=Array.from(u,Ro)).map(bl)),l):n.slice()},l.rangeRound=function(u){return l.range(u).round(!0)},l.round=function(u){return arguments.length?(a=!!u,l):a},l.clamp=function(u){return arguments.length?(t.clamp(u),l):t.clamp()},l.unknown=function(u){return arguments.length?(s=u,l):s},l.copy=function(){return Y1(t.domain(),n).round(a).clamp(t.clamp()).unknown(s)},et.apply(l,arguments),jt(l)}function F1(){var t=[],n=[],a=[],s;function l(){var c=0,d=Math.max(1,n.length);for(a=new Array(d-1);++c<d;)a[c-1]=lh(t,c/d);return u}function u(c){return c==null||isNaN(c=+c)?s:n[Ft(a,c)]}return u.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:[d>0?a[d-1]:t[0],d<a.length?a[d]:t[t.length-1]]},u.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let d of c)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(hn),l()},u.range=function(c){return arguments.length?(n=Array.from(c),l()):n.slice()},u.unknown=function(c){return arguments.length?(s=c,u):s},u.quantiles=function(){return a.slice()},u.copy=function(){return F1().domain(t).range(n).unknown(s)},et.apply(u,arguments)}function q1(){var t=0,n=1,a=1,s=[.5],l=[0,1],u;function c(Ct){return Ct!=null&&Ct<=Ct?l[Ft(s,Ct,0,a)]:u}function d(){var Ct=-1;for(s=new Array(a);++Ct<a;)s[Ct]=((Ct+1)*n-(Ct-a)*t)/(a+1);return c}return c.domain=function(Ct){return arguments.length?([t,n]=Ct,t=+t,n=+n,d()):[t,n]},c.range=function(Ct){return arguments.length?(a=(l=Array.from(Ct)).length-1,d()):l.slice()},c.invertExtent=function(Ct){var ar=l.indexOf(Ct);return ar<0?[NaN,NaN]:ar<1?[t,s[0]]:ar>=a?[s[a-1],n]:[s[ar-1],s[ar]]},c.unknown=function(Ct){return arguments.length&&(u=Ct),c},c.thresholds=function(){return s.slice()},c.copy=function(){return q1().domain([t,n]).range(l).unknown(u)},et.apply(jt(c),arguments)}function L1(){var t=[.5],n=[0,1],a,s=1;function l(u){return u!=null&&u<=u?n[Ft(t,u,0,s)]:a}return l.domain=function(u){return arguments.length?(t=Array.from(u),s=Math.min(t.length,n.length-1),l):t.slice()},l.range=function(u){return arguments.length?(n=Array.from(u),s=Math.min(t.length,n.length-1),l):n.slice()},l.invertExtent=function(u){var c=n.indexOf(u);return[t[c-1],t[c]]},l.unknown=function(u){return arguments.length?(a=u,l):a},l.copy=function(){return L1().domain(t).range(n).unknown(a)},et.apply(l,arguments)}const eu=new Date,ru=new Date;function _n(t,n,a,s){function l(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return l.floor=u=>(t(u=new Date(+u)),u),l.ceil=u=>(t(u=new Date(u-1)),n(u,1),t(u),u),l.round=u=>{const c=l(u),d=l.ceil(u);return u-c<d-u?c:d},l.offset=(u,c)=>(n(u=new Date(+u),c==null?1:Math.floor(c)),u),l.range=(u,c,d)=>{const Ct=[];if(u=l.ceil(u),d=d==null?1:Math.floor(d),!(u<c)||!(d>0))return Ct;let ar;do Ct.push(ar=new Date(+u)),n(u,d),t(u);while(ar<u&&u<c);return Ct},l.filter=u=>_n(c=>{if(c>=c)for(;t(c),!u(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;n(c,-1),!u(c););else for(;--d>=0;)for(;n(c,1),!u(c););}),a&&(l.count=(u,c)=>(eu.setTime(+u),ru.setTime(+c),t(eu),t(ru),Math.floor(a(eu,ru))),l.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?l.filter(s?c=>s(c)%u===0:c=>l.count(0,c)%u===0):l)),l}const Qe=_n(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Qe.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_n(n=>{n.setTime(Math.floor(n/t)*t)},(n,a)=>{n.setTime(+n+a*t)},(n,a)=>(a-n)/t):Qe);const wl=Qe.range,At=1e3,tt=At*60,St=tt*60,Rt=St*24,gc=Rt*7,xl=Rt*30,iu=Rt*365,Et=_n(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*At)},(t,n)=>(n-t)/At,t=>t.getUTCSeconds()),Ml=Et.range,ca=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At)},(t,n)=>{t.setTime(+t+n*tt)},(t,n)=>(n-t)/tt,t=>t.getMinutes()),u5=ca.range,sa=_n(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*tt)},(t,n)=>(n-t)/tt,t=>t.getUTCMinutes()),f5=sa.range,la=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At-t.getMinutes()*tt)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getHours()),c5=la.range,ha=_n(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getUTCHours()),s5=ha.range,or=_n(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*tt)/Rt,t=>t.getDate()-1),l5=or.range,ci=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Rt,t=>t.getUTCDate()-1),h5=ci.range,pc=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Rt,t=>Math.floor(t/Rt)),d5=pc.range;function ve$1(t){return _n(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,a)=>{n.setDate(n.getDate()+a*7)},(n,a)=>(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*tt)/gc)}const Ke=ve$1(0),Zr=ve$1(1),B1=ve$1(2),U1=ve$1(3),de$1=ve$1(4),X1=ve$1(5),H1=ve$1(6),$l=Ke.range,g5=Zr.range,p5=B1.range,m5=U1.range,y5=de$1.range,_5=X1.range,v5=H1.range;function be$1(t){return _n(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCDate(n.getUTCDate()+a*7)},(n,a)=>(a-n)/gc)}const Je=be$1(0),Qr=be$1(1),j1=be$1(2),W1=be$1(3),ge$1=be$1(4),V1=be$1(5),G1=be$1(6),Tl=Je.range,b5=Qr.range,w5=j1.range,x5=W1.range,M5=ge$1.range,$5=V1.range,T5=G1.range,da=_n(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),A5=da.range,ga=_n(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),S5=ga.range,mt=_n(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());mt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,a)=>{n.setFullYear(n.getFullYear()+a*t)});const E5=mt.range,yt=_n(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCFullYear(n.getUTCFullYear()+a*t)});const k5=yt.range;function Z1(t,n,a,s,l,u){const c=[[Et,1,At],[Et,5,5*At],[Et,15,15*At],[Et,30,30*At],[u,1,tt],[u,5,5*tt],[u,15,15*tt],[u,30,30*tt],[l,1,St],[l,3,3*St],[l,6,6*St],[l,12,12*St],[s,1,Rt],[s,2,2*Rt],[a,1,gc],[n,1,xl],[n,3,3*xl],[t,1,iu]];function d(ar,en,tn){const on=en<ar;on&&([ar,en]=[en,ar]);const cn=tn&&typeof tn.range=="function"?tn:Ct(ar,en,tn),dn=cn?cn.range(ar,+en+1):[];return on?dn.reverse():dn}function Ct(ar,en,tn){const on=Math.abs(en-ar)/tn,cn=Oo(([,,In])=>In).right(c,on);if(cn===c.length)return t.every(Vi(ar/iu,en/iu,tn));if(cn===0)return Qe.every(Math.max(Vi(ar,en,tn),1));const[dn,Cn]=c[on/c[cn-1][2]<c[cn][2]/on?cn-1:cn];return dn.every(Cn)}return[d,Ct]}const[Q1,K1]=Z1(yt,ga,Je,pc,ha,sa),[J1,nd]=Z1(mt,da,Ke,or,la,ca);function ou(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function au(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lr(t,n,a){return{y:t,m:n,d:a,H:0,M:0,S:0,L:0}}function td(t){var n=t.dateTime,a=t.date,s=t.time,l=t.periods,u=t.days,c=t.shortDays,d=t.months,Ct=t.shortMonths,ar=hr(l),en=dr(l),tn=hr(u),on=dr(u),cn=hr(c),dn=dr(c),Cn=hr(d),In=dr(d),ix=hr(Ct),ax=dr(Ct),ox={a:Tx,A:Cx,b:Mx,B:Ax,c:null,d:Rl,e:Rl,f:K5,g:f8,G:s8,H:G5,I:Z5,j:Q5,L:ed,m:J5,M:n8,p:Nx,q:Ux,Q:Pl,s:Dl,S:t8,u:e8,U:r8,V:i8,w:o8,W:a8,x:null,X:null,y:u8,Y:c8,Z:l8,"%":Cl},sx={a:Rx,A:Ox,b:Px,B:$x,c:null,d:Il,e:Il,f:p8,g:T8,G:S8,H:h8,I:d8,j:g8,L:id$1,m:m8,M:y8,p:Lx,q:zx,Q:Pl,s:Dl,S:_8,u:v8,U:b8,V:w8,w:x8,W:M8,x:null,X:null,y:$8,Y:A8,Z:E8,"%":Cl},ux={a:dx,A:mx,b:vx,B:bx,c:xx,d:kl,e:kl,f:H5,g:El,G:Sl,H:Nl,I:Nl,j:L5,L:X5,m:q5,M:B5,p:fx,q:F5,Q:W5,s:V5,S:U5,u:P5,U:D5,V:z5,w:C5,W:O5,x:_x,X:Ex,y:El,Y:Sl,Z:Y5,"%":j5};ox.x=cx(a,ox),ox.X=cx(s,ox),ox.c=cx(n,ox),sx.x=cx(a,sx),sx.X=cx(s,sx),sx.c=cx(n,sx);function cx(qx,jx){return function(Hx){var Vx=[],nE=-1,Wx=0,tE=qx.length,lE,iE,Xx;for(Hx instanceof Date||(Hx=new Date(+Hx));++nE<tE;)qx.charCodeAt(nE)===37&&(Vx.push(qx.slice(Wx,nE)),(iE=Al[lE=qx.charAt(++nE)])!=null?lE=qx.charAt(++nE):iE=lE==="e"?" ":"0",(Xx=jx[lE])&&(lE=Xx(Hx,iE)),Vx.push(lE),Wx=nE+1);return Vx.push(qx.slice(Wx,nE)),Vx.join("")}}function hx(qx,jx){return function(Hx){var Vx=lr(1900,void 0,1),nE=gx(Vx,qx,Hx+="",0),Wx,tE;if(nE!=Hx.length)return null;if("Q"in Vx)return new Date(Vx.Q);if("s"in Vx)return new Date(Vx.s*1e3+("L"in Vx?Vx.L:0));if(jx&&!("Z"in Vx)&&(Vx.Z=0),"p"in Vx&&(Vx.H=Vx.H%12+Vx.p*12),Vx.m===void 0&&(Vx.m="q"in Vx?Vx.q:0),"V"in Vx){if(Vx.V<1||Vx.V>53)return null;"w"in Vx||(Vx.w=1),"Z"in Vx?(Wx=au(lr(Vx.y,0,1)),tE=Wx.getUTCDay(),Wx=tE>4||tE===0?Qr.ceil(Wx):Qr(Wx),Wx=ci.offset(Wx,(Vx.V-1)*7),Vx.y=Wx.getUTCFullYear(),Vx.m=Wx.getUTCMonth(),Vx.d=Wx.getUTCDate()+(Vx.w+6)%7):(Wx=ou(lr(Vx.y,0,1)),tE=Wx.getDay(),Wx=tE>4||tE===0?Zr.ceil(Wx):Zr(Wx),Wx=or.offset(Wx,(Vx.V-1)*7),Vx.y=Wx.getFullYear(),Vx.m=Wx.getMonth(),Vx.d=Wx.getDate()+(Vx.w+6)%7)}else("W"in Vx||"U"in Vx)&&("w"in Vx||(Vx.w="u"in Vx?Vx.u%7:"W"in Vx?1:0),tE="Z"in Vx?au(lr(Vx.y,0,1)).getUTCDay():ou(lr(Vx.y,0,1)).getDay(),Vx.m=0,Vx.d="W"in Vx?(Vx.w+6)%7+Vx.W*7-(tE+5)%7:Vx.w+Vx.U*7-(tE+6)%7);return"Z"in Vx?(Vx.H+=Vx.Z/100|0,Vx.M+=Vx.Z%100,au(Vx)):ou(Vx)}}function gx(qx,jx,Hx,Vx){for(var nE=0,Wx=jx.length,tE=Hx.length,lE,iE;nE<Wx;){if(Vx>=tE)return-1;if(lE=jx.charCodeAt(nE++),lE===37){if(lE=jx.charAt(nE++),iE=ux[lE in Al?jx.charAt(nE++):lE],!iE||(Vx=iE(qx,Hx,Vx))<0)return-1}else if(lE!=Hx.charCodeAt(Vx++))return-1}return Vx}function fx(qx,jx,Hx){var Vx=ar.exec(jx.slice(Hx));return Vx?(qx.p=en.get(Vx[0].toLowerCase()),Hx+Vx[0].length):-1}function dx(qx,jx,Hx){var Vx=cn.exec(jx.slice(Hx));return Vx?(qx.w=dn.get(Vx[0].toLowerCase()),Hx+Vx[0].length):-1}function mx(qx,jx,Hx){var Vx=tn.exec(jx.slice(Hx));return Vx?(qx.w=on.get(Vx[0].toLowerCase()),Hx+Vx[0].length):-1}function vx(qx,jx,Hx){var Vx=ix.exec(jx.slice(Hx));return Vx?(qx.m=ax.get(Vx[0].toLowerCase()),Hx+Vx[0].length):-1}function bx(qx,jx,Hx){var Vx=Cn.exec(jx.slice(Hx));return Vx?(qx.m=In.get(Vx[0].toLowerCase()),Hx+Vx[0].length):-1}function xx(qx,jx,Hx){return gx(qx,n,jx,Hx)}function _x(qx,jx,Hx){return gx(qx,a,jx,Hx)}function Ex(qx,jx,Hx){return gx(qx,s,jx,Hx)}function Tx(qx){return c[qx.getDay()]}function Cx(qx){return u[qx.getDay()]}function Mx(qx){return Ct[qx.getMonth()]}function Ax(qx){return d[qx.getMonth()]}function Nx(qx){return l[+(qx.getHours()>=12)]}function Ux(qx){return 1+~~(qx.getMonth()/3)}function Rx(qx){return c[qx.getUTCDay()]}function Ox(qx){return u[qx.getUTCDay()]}function Px(qx){return Ct[qx.getUTCMonth()]}function $x(qx){return d[qx.getUTCMonth()]}function Lx(qx){return l[+(qx.getUTCHours()>=12)]}function zx(qx){return 1+~~(qx.getUTCMonth()/3)}return{format:function(qx){var jx=cx(qx+="",ox);return jx.toString=function(){return qx},jx},parse:function(qx){var jx=hx(qx+="",!1);return jx.toString=function(){return qx},jx},utcFormat:function(qx){var jx=cx(qx+="",sx);return jx.toString=function(){return qx},jx},utcParse:function(qx){var jx=hx(qx+="",!0);return jx.toString=function(){return qx},jx}}}var Al={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,N5=/^%/,R5=/[\\^$*+?|[\]().{}]/g;function rn(t,n,a){var s=t<0?"-":"",l=(s?-t:t)+"",u=l.length;return s+(u<a?new Array(a-u+1).join(n)+l:l)}function I5(t){return t.replace(R5,"\\$&")}function hr(t){return new RegExp("^(?:"+t.map(I5).join("|")+")","i")}function dr(t){return new Map(t.map((n,a)=>[n.toLowerCase(),a]))}function C5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.w=+s[0],a+s[0].length):-1}function P5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.u=+s[0],a+s[0].length):-1}function D5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.U=+s[0],a+s[0].length):-1}function z5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.V=+s[0],a+s[0].length):-1}function O5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.W=+s[0],a+s[0].length):-1}function Sl(t,n,a){var s=Tn.exec(n.slice(a,a+4));return s?(t.y=+s[0],a+s[0].length):-1}function El(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Y5(t,n,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function F5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.q=s[0]*3-3,a+s[0].length):-1}function q5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.m=s[0]-1,a+s[0].length):-1}function kl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.d=+s[0],a+s[0].length):-1}function L5(t,n,a){var s=Tn.exec(n.slice(a,a+3));return s?(t.m=0,t.d=+s[0],a+s[0].length):-1}function Nl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.H=+s[0],a+s[0].length):-1}function B5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.M=+s[0],a+s[0].length):-1}function U5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.S=+s[0],a+s[0].length):-1}function X5(t,n,a){var s=Tn.exec(n.slice(a,a+3));return s?(t.L=+s[0],a+s[0].length):-1}function H5(t,n,a){var s=Tn.exec(n.slice(a,a+6));return s?(t.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function j5(t,n,a){var s=N5.exec(n.slice(a,a+1));return s?a+s[0].length:-1}function W5(t,n,a){var s=Tn.exec(n.slice(a));return s?(t.Q=+s[0],a+s[0].length):-1}function V5(t,n,a){var s=Tn.exec(n.slice(a));return s?(t.s=+s[0],a+s[0].length):-1}function Rl(t,n){return rn(t.getDate(),n,2)}function G5(t,n){return rn(t.getHours(),n,2)}function Z5(t,n){return rn(t.getHours()%12||12,n,2)}function Q5(t,n){return rn(1+or.count(mt(t),t),n,3)}function ed(t,n){return rn(t.getMilliseconds(),n,3)}function K5(t,n){return ed(t,n)+"000"}function J5(t,n){return rn(t.getMonth()+1,n,2)}function n8(t,n){return rn(t.getMinutes(),n,2)}function t8(t,n){return rn(t.getSeconds(),n,2)}function e8(t){var n=t.getDay();return n===0?7:n}function r8(t,n){return rn(Ke.count(mt(t)-1,t),n,2)}function rd(t){var n=t.getDay();return n>=4||n===0?de$1(t):de$1.ceil(t)}function i8(t,n){return t=rd(t),rn(de$1.count(mt(t),t)+(mt(t).getDay()===4),n,2)}function o8(t){return t.getDay()}function a8(t,n){return rn(Zr.count(mt(t)-1,t),n,2)}function u8(t,n){return rn(t.getFullYear()%100,n,2)}function f8(t,n){return t=rd(t),rn(t.getFullYear()%100,n,2)}function c8(t,n){return rn(t.getFullYear()%1e4,n,4)}function s8(t,n){var a=t.getDay();return t=a>=4||a===0?de$1(t):de$1.ceil(t),rn(t.getFullYear()%1e4,n,4)}function l8(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+rn(n/60|0,"0",2)+rn(n%60,"0",2)}function Il(t,n){return rn(t.getUTCDate(),n,2)}function h8(t,n){return rn(t.getUTCHours(),n,2)}function d8(t,n){return rn(t.getUTCHours()%12||12,n,2)}function g8(t,n){return rn(1+ci.count(yt(t),t),n,3)}function id$1(t,n){return rn(t.getUTCMilliseconds(),n,3)}function p8(t,n){return id$1(t,n)+"000"}function m8(t,n){return rn(t.getUTCMonth()+1,n,2)}function y8(t,n){return rn(t.getUTCMinutes(),n,2)}function _8(t,n){return rn(t.getUTCSeconds(),n,2)}function v8(t){var n=t.getUTCDay();return n===0?7:n}function b8(t,n){return rn(Je.count(yt(t)-1,t),n,2)}function od(t){var n=t.getUTCDay();return n>=4||n===0?ge$1(t):ge$1.ceil(t)}function w8(t,n){return t=od(t),rn(ge$1.count(yt(t),t)+(yt(t).getUTCDay()===4),n,2)}function x8(t){return t.getUTCDay()}function M8(t,n){return rn(Qr.count(yt(t)-1,t),n,2)}function $8(t,n){return rn(t.getUTCFullYear()%100,n,2)}function T8(t,n){return t=od(t),rn(t.getUTCFullYear()%100,n,2)}function A8(t,n){return rn(t.getUTCFullYear()%1e4,n,4)}function S8(t,n){var a=t.getUTCDay();return t=a>=4||a===0?ge$1(t):ge$1.ceil(t),rn(t.getUTCFullYear()%1e4,n,4)}function E8(){return"+0000"}function Cl(){return"%"}function Pl(t){return+t}function Dl(t){return Math.floor(+t/1e3)}var Ne$1,mc,ad,pa,yc;ud({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ud(t){return Ne$1=td(t),mc=Ne$1.format,ad=Ne$1.parse,pa=Ne$1.utcFormat,yc=Ne$1.utcParse,Ne$1}var fd="%Y-%m-%dT%H:%M:%S.%LZ";function k8(t){return t.toISOString()}var N8=Date.prototype.toISOString?k8:pa(fd);function R8(t){var n=new Date(t);return isNaN(n)?null:n}var I8=+new Date("2000-01-01T00:00:00.000Z")?R8:yc(fd);function C8(t){return new Date(t)}function P8(t){return t instanceof Date?+t:+new Date(+t)}function _c$1(t,n,a,s,l,u,c,d,Ct,ar){var en=cc(),tn=en.invert,on=en.domain,cn=ar(".%L"),dn=ar(":%S"),Cn=ar("%I:%M"),In=ar("%I %p"),ix=ar("%a %d"),ax=ar("%b %d"),ox=ar("%B"),sx=ar("%Y");function ux(cx){return(Ct(cx)<cx?cn:d(cx)<cx?dn:c(cx)<cx?Cn:u(cx)<cx?In:s(cx)<cx?l(cx)<cx?ix:ax:a(cx)<cx?ox:sx)(cx)}return en.invert=function(cx){return new Date(tn(cx))},en.domain=function(cx){return arguments.length?on(Array.from(cx,P8)):on().map(C8)},en.ticks=function(cx){var hx=on();return t(hx[0],hx[hx.length-1],cx??10)},en.tickFormat=function(cx,hx){return hx==null?ux:ar(hx)},en.nice=function(cx){var hx=on();return(!cx||typeof cx.range!="function")&&(cx=n(hx[0],hx[hx.length-1],cx??10)),cx?on(D1(hx,cx)):en},en.copy=function(){return fi(en,_c$1(t,n,a,s,l,u,c,d,Ct,ar))},en}function D8(){return et.apply(_c$1(J1,nd,mt,da,Ke,or,la,ca,Et,mc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function z8(){return et.apply(_c$1(Q1,K1,yt,ga,Je,ci,ha,sa,Et,pa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ma(){var t=0,n=1,a,s,l,u,c=Fn,d=!1,Ct;function ar(tn){return tn==null||isNaN(tn=+tn)?Ct:c(l===0?.5:(tn=(u(tn)-a)*l,d?Math.max(0,Math.min(1,tn)):tn))}ar.domain=function(tn){return arguments.length?([t,n]=tn,a=u(t=+t),s=u(n=+n),l=a===s?0:1/(s-a),ar):[t,n]},ar.clamp=function(tn){return arguments.length?(d=!!tn,ar):d},ar.interpolator=function(tn){return arguments.length?(c=tn,ar):c};function en(tn){return function(on){var cn,dn;return arguments.length?([cn,dn]=on,c=tn(cn,dn),ar):[c(0),c(1)]}}return ar.range=en(Ht),ar.rangeRound=en(Vo),ar.unknown=function(tn){return arguments.length?(Ct=tn,ar):Ct},function(tn){return u=tn,a=tn(t),s=tn(n),l=a===s?0:1/(s-a),ar}}function Wt(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cd(){var t=jt(ma()(Fn));return t.copy=function(){return Wt(t,cd())},It.apply(t,arguments)}function sd(){var t=sc(ma()).domain([1,10]);return t.copy=function(){return Wt(t,sd()).base(t.base())},It.apply(t,arguments)}function ld(){var t=lc(ma());return t.copy=function(){return Wt(t,ld()).constant(t.constant())},It.apply(t,arguments)}function vc(){var t=hc(ma());return t.copy=function(){return Wt(t,vc()).exponent(t.exponent())},It.apply(t,arguments)}function O8(){return vc.apply(null,arguments).exponent(.5)}function hd(){var t=[],n=Fn;function a(s){if(s!=null&&!isNaN(s=+s))return n((Ft(t,s,1)-1)/(t.length-1))}return a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(hn),a},a.interpolator=function(s){return arguments.length?(n=s,a):n},a.range=function(){return t.map((s,l)=>n(l/(t.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(l,u)=>zr(t,u/s))},a.copy=function(){return hd(n).domain(t)},It.apply(a,arguments)}function ya(){var t=0,n=.5,a=1,s=1,l,u,c,d,Ct,ar=Fn,en,tn=!1,on;function cn(Cn){return isNaN(Cn=+Cn)?on:(Cn=.5+((Cn=+en(Cn))-u)*(s*Cn<s*u?d:Ct),ar(tn?Math.max(0,Math.min(1,Cn)):Cn))}cn.domain=function(Cn){return arguments.length?([t,n,a]=Cn,l=en(t=+t),u=en(n=+n),c=en(a=+a),d=l===u?0:.5/(u-l),Ct=u===c?0:.5/(c-u),s=u<l?-1:1,cn):[t,n,a]},cn.clamp=function(Cn){return arguments.length?(tn=!!Cn,cn):tn},cn.interpolator=function(Cn){return arguments.length?(ar=Cn,cn):ar};function dn(Cn){return function(In){var ix,ax,ox;return arguments.length?([ix,ax,ox]=In,ar=i0(Cn,[ix,ax,ox]),cn):[ar(0),ar(.5),ar(1)]}}return cn.range=dn(Ht),cn.rangeRound=dn(Vo),cn.unknown=function(Cn){return arguments.length?(on=Cn,cn):on},function(Cn){return en=Cn,l=Cn(t),u=Cn(n),c=Cn(a),d=l===u?0:.5/(u-l),Ct=u===c?0:.5/(c-u),s=u<l?-1:1,cn}}function dd(){var t=jt(ya()(Fn));return t.copy=function(){return Wt(t,dd())},It.apply(t,arguments)}function gd(){var t=sc(ya()).domain([.1,1,10]);return t.copy=function(){return Wt(t,gd()).base(t.base())},It.apply(t,arguments)}function pd(){var t=lc(ya());return t.copy=function(){return Wt(t,pd()).constant(t.constant())},It.apply(t,arguments)}function bc(){var t=hc(ya());return t.copy=function(){return Wt(t,bc()).exponent(t.exponent())},It.apply(t,arguments)}function Y8(){return bc.apply(null,arguments).exponent(.5)}function G$1(t){for(var n=t.length/6|0,a=new Array(n),s=0;s<n;)a[s]="#"+t.slice(s*6,++s*6);return a}const F8=G$1("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),q8=G$1("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),L8=G$1("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),B8=G$1("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),U8=G$1("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),X8=G$1("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),H8=G$1("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),j8=G$1("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),W8=G$1("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),V8=G$1("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),G8=G$1("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),un=t=>Hh(t[t.length-1]);var md=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(G$1);const Z8=un(md);var yd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(G$1);const Q8=un(yd);var _d=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(G$1);const K8=un(_d);var vd=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(G$1);const J8=un(vd);var bd=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(G$1);const n4=un(bd);var wd=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(G$1);const t4=un(wd);var xd=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(G$1);const e4=un(xd);var Md=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(G$1);const r4=un(Md);var $d=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(G$1);const i4=un($d);var Td=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(G$1);const o4=un(Td);var Ad=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(G$1);const a4=un(Ad);var Sd=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(G$1);const u4=un(Sd);var Ed=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(G$1);const f4=un(Ed);var kd=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(G$1);const c4=un(kd);var Nd=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(G$1);const s4=un(Nd);var Rd=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(G$1);const l4=un(Rd);var Id=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(G$1);const h4=un(Id);var Cd=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(G$1);const d4=un(Cd);var Pd=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(G$1);const g4=un(Pd);var Dd=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(G$1);const p4=un(Dd);var zd=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(G$1);const m4=un(zd);var Od=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(G$1);const y4=un(Od);var Yd=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(G$1);const _4=un(Yd);var Fd=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(G$1);const v4=un(Fd);var qd=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(G$1);const b4=un(qd);var Ld=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(G$1);const w4=un(Ld);var Bd=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(G$1);const x4=un(Bd);function M4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const $4=Go(ut(300,.5,0),ut(-240,.5,1));var T4=Go(ut(-100,.75,.35),ut(80,1.5,.8)),A4=Go(ut(260,.75,.35),ut(80,1.5,.8)),ki=ut();function S4(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return ki.h=360*t-100,ki.s=1.5-1.5*n,ki.l=.8-.9*n,ki+""}var Ni=Ue(),E4=Math.PI/3,k4=Math.PI*2/3;function N4(t){var n;return t=(.5-t)*Math.PI,Ni.r=255*(n=Math.sin(t))*n,Ni.g=255*(n=Math.sin(t+E4))*n,Ni.b=255*(n=Math.sin(t+k4))*n,Ni+""}function R4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function _a$1(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}const I4=_a$1(G$1("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var C4=_a$1(G$1("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P4=_a$1(G$1("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D4=_a$1(G$1("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function V$1(t){return function(){return t}}const zl=Math.abs,Nn=Math.atan2,Mt=Math.cos,z4=Math.max,Fe$1=Math.min,jn$1=Math.sin,fn=Math.sqrt,Rn=1e-12,Bt=Math.PI,Io=Bt/2,Yt=2*Bt;function O4(t){return t>1?0:t<-1?Bt:Math.acos(t)}function Ol(t){return t>=1?Io:t<=-1?-Io:Math.asin(t)}function si(t){let n=3;return t.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);n=s}return t},()=>new ti(n)}function Y4(t){return t.innerRadius}function F4(t){return t.outerRadius}function q4(t){return t.startAngle}function L4(t){return t.endAngle}function B4(t){return t&&t.padAngle}function U4(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=tn*Ct-en*ar;if(!(on*on<Rn))return on=(en*(n-u)-tn*(t-l))/on,[t+on*Ct,n+on*ar]}function Ri(t,n,a,s,l,u,c){var d=t-a,Ct=n-s,ar=(c?u:-u)/fn(d*d+Ct*Ct),en=ar*Ct,tn=-ar*d,on=t+en,cn=n+tn,dn=a+en,Cn=s+tn,In=(on+dn)/2,ix=(cn+Cn)/2,ax=dn-on,ox=Cn-cn,sx=ax*ax+ox*ox,ux=l-u,cx=on*Cn-dn*cn,hx=(ox<0?-1:1)*fn(z4(0,ux*ux*sx-cx*cx)),gx=(cx*ox-ax*hx)/sx,fx=(-cx*ax-ox*hx)/sx,dx=(cx*ox+ax*hx)/sx,mx=(-cx*ax+ox*hx)/sx,vx=gx-In,bx=fx-ix,xx=dx-In,_x=mx-ix;return vx*vx+bx*bx>xx*xx+_x*_x&&(gx=dx,fx=mx),{cx:gx,cy:fx,x01:-en,y01:-tn,x11:gx*(l/ux-1),y11:fx*(l/ux-1)}}function X4(){var t=Y4,n=F4,a=V$1(0),s=null,l=q4,u=L4,c=B4,d=null,Ct=si(ar);function ar(){var en,tn,on=+t.apply(this,arguments),cn=+n.apply(this,arguments),dn=l.apply(this,arguments)-Io,Cn=u.apply(this,arguments)-Io,In=zl(Cn-dn),ix=Cn>dn;if(d||(d=en=Ct()),cn<on&&(tn=cn,cn=on,on=tn),!(cn>Rn))d.moveTo(0,0);else if(In>Yt-Rn)d.moveTo(cn*Mt(dn),cn*jn$1(dn)),d.arc(0,0,cn,dn,Cn,!ix),on>Rn&&(d.moveTo(on*Mt(Cn),on*jn$1(Cn)),d.arc(0,0,on,Cn,dn,ix));else{var ax=dn,ox=Cn,sx=dn,ux=Cn,cx=In,hx=In,gx=c.apply(this,arguments)/2,fx=gx>Rn&&(s?+s.apply(this,arguments):fn(on*on+cn*cn)),dx=Fe$1(zl(cn-on)/2,+a.apply(this,arguments)),mx=dx,vx=dx,bx,xx;if(fx>Rn){var _x=Ol(fx/on*jn$1(gx)),Ex=Ol(fx/cn*jn$1(gx));(cx-=_x*2)>Rn?(_x*=ix?1:-1,sx+=_x,ux-=_x):(cx=0,sx=ux=(dn+Cn)/2),(hx-=Ex*2)>Rn?(Ex*=ix?1:-1,ax+=Ex,ox-=Ex):(hx=0,ax=ox=(dn+Cn)/2)}var Tx=cn*Mt(ax),Cx=cn*jn$1(ax),Mx=on*Mt(ux),Ax=on*jn$1(ux);if(dx>Rn){var Nx=cn*Mt(ox),Ux=cn*jn$1(ox),Rx=on*Mt(sx),Ox=on*jn$1(sx),Px;if(In<Bt)if(Px=U4(Tx,Cx,Rx,Ox,Nx,Ux,Mx,Ax)){var $x=Tx-Px[0],Lx=Cx-Px[1],zx=Nx-Px[0],qx=Ux-Px[1],jx=1/jn$1(O4(($x*zx+Lx*qx)/(fn($x*$x+Lx*Lx)*fn(zx*zx+qx*qx)))/2),Hx=fn(Px[0]*Px[0]+Px[1]*Px[1]);mx=Fe$1(dx,(on-Hx)/(jx-1)),vx=Fe$1(dx,(cn-Hx)/(jx+1))}else mx=vx=0}hx>Rn?vx>Rn?(bx=Ri(Rx,Ox,Tx,Cx,cn,vx,ix),xx=Ri(Nx,Ux,Mx,Ax,cn,vx,ix),d.moveTo(bx.cx+bx.x01,bx.cy+bx.y01),vx<dx?d.arc(bx.cx,bx.cy,vx,Nn(bx.y01,bx.x01),Nn(xx.y01,xx.x01),!ix):(d.arc(bx.cx,bx.cy,vx,Nn(bx.y01,bx.x01),Nn(bx.y11,bx.x11),!ix),d.arc(0,0,cn,Nn(bx.cy+bx.y11,bx.cx+bx.x11),Nn(xx.cy+xx.y11,xx.cx+xx.x11),!ix),d.arc(xx.cx,xx.cy,vx,Nn(xx.y11,xx.x11),Nn(xx.y01,xx.x01),!ix))):(d.moveTo(Tx,Cx),d.arc(0,0,cn,ax,ox,!ix)):d.moveTo(Tx,Cx),!(on>Rn)||!(cx>Rn)?d.lineTo(Mx,Ax):mx>Rn?(bx=Ri(Mx,Ax,Nx,Ux,on,-mx,ix),xx=Ri(Tx,Cx,Rx,Ox,on,-mx,ix),d.lineTo(bx.cx+bx.x01,bx.cy+bx.y01),mx<dx?d.arc(bx.cx,bx.cy,mx,Nn(bx.y01,bx.x01),Nn(xx.y01,xx.x01),!ix):(d.arc(bx.cx,bx.cy,mx,Nn(bx.y01,bx.x01),Nn(bx.y11,bx.x11),!ix),d.arc(0,0,on,Nn(bx.cy+bx.y11,bx.cx+bx.x11),Nn(xx.cy+xx.y11,xx.cx+xx.x11),ix),d.arc(xx.cx,xx.cy,mx,Nn(xx.y11,xx.x11),Nn(xx.y01,xx.x01),!ix))):d.arc(0,0,on,ux,sx,ix)}if(d.closePath(),en)return d=null,en+""||null}return ar.centroid=function(){var en=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,tn=(+l.apply(this,arguments)+ +u.apply(this,arguments))/2-Bt/2;return[Mt(tn)*en,jn$1(tn)*en]},ar.innerRadius=function(en){return arguments.length?(t=typeof en=="function"?en:V$1(+en),ar):t},ar.outerRadius=function(en){return arguments.length?(n=typeof en=="function"?en:V$1(+en),ar):n},ar.cornerRadius=function(en){return arguments.length?(a=typeof en=="function"?en:V$1(+en),ar):a},ar.padRadius=function(en){return arguments.length?(s=en==null?null:typeof en=="function"?en:V$1(+en),ar):s},ar.startAngle=function(en){return arguments.length?(l=typeof en=="function"?en:V$1(+en),ar):l},ar.endAngle=function(en){return arguments.length?(u=typeof en=="function"?en:V$1(+en),ar):u},ar.padAngle=function(en){return arguments.length?(c=typeof en=="function"?en:V$1(+en),ar):c},ar.context=function(en){return arguments.length?(d=en??null,ar):d},ar}var H4=Array.prototype.slice;function va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ud(t){this._context=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function ba(t){return new Ud(t)}function wc(t){return t[0]}function xc(t){return t[1]}function Mc(t,n){var a=V$1(!0),s=null,l=ba,u=null,c=si(d);t=typeof t=="function"?t:t===void 0?wc:V$1(t),n=typeof n=="function"?n:n===void 0?xc:V$1(n);function d(Ct){var ar,en=(Ct=va(Ct)).length,tn,on=!1,cn;for(s==null&&(u=l(cn=c())),ar=0;ar<=en;++ar)!(ar<en&&a(tn=Ct[ar],ar,Ct))===on&&((on=!on)?u.lineStart():u.lineEnd()),on&&u.point(+t(tn,ar,Ct),+n(tn,ar,Ct));if(cn)return u=null,cn+""||null}return d.x=function(Ct){return arguments.length?(t=typeof Ct=="function"?Ct:V$1(+Ct),d):t},d.y=function(Ct){return arguments.length?(n=typeof Ct=="function"?Ct:V$1(+Ct),d):n},d.defined=function(Ct){return arguments.length?(a=typeof Ct=="function"?Ct:V$1(!!Ct),d):a},d.curve=function(Ct){return arguments.length?(l=Ct,s!=null&&(u=l(s)),d):l},d.context=function(Ct){return arguments.length?(Ct==null?s=u=null:u=l(s=Ct),d):s},d}function Xd(t,n,a){var s=null,l=V$1(!0),u=null,c=ba,d=null,Ct=si(ar);t=typeof t=="function"?t:t===void 0?wc:V$1(+t),n=typeof n=="function"?n:V$1(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?xc:V$1(+a);function ar(tn){var on,cn,dn,Cn=(tn=va(tn)).length,In,ix=!1,ax,ox=new Array(Cn),sx=new Array(Cn);for(u==null&&(d=c(ax=Ct())),on=0;on<=Cn;++on){if(!(on<Cn&&l(In=tn[on],on,tn))===ix)if(ix=!ix)cn=on,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),dn=on-1;dn>=cn;--dn)d.point(ox[dn],sx[dn]);d.lineEnd(),d.areaEnd()}ix&&(ox[on]=+t(In,on,tn),sx[on]=+n(In,on,tn),d.point(s?+s(In,on,tn):ox[on],a?+a(In,on,tn):sx[on]))}if(ax)return d=null,ax+""||null}function en(){return Mc().defined(l).curve(c).context(u)}return ar.x=function(tn){return arguments.length?(t=typeof tn=="function"?tn:V$1(+tn),s=null,ar):t},ar.x0=function(tn){return arguments.length?(t=typeof tn=="function"?tn:V$1(+tn),ar):t},ar.x1=function(tn){return arguments.length?(s=tn==null?null:typeof tn=="function"?tn:V$1(+tn),ar):s},ar.y=function(tn){return arguments.length?(n=typeof tn=="function"?tn:V$1(+tn),a=null,ar):n},ar.y0=function(tn){return arguments.length?(n=typeof tn=="function"?tn:V$1(+tn),ar):n},ar.y1=function(tn){return arguments.length?(a=tn==null?null:typeof tn=="function"?tn:V$1(+tn),ar):a},ar.lineX0=ar.lineY0=function(){return en().x(t).y(n)},ar.lineY1=function(){return en().x(t).y(a)},ar.lineX1=function(){return en().x(s).y(n)},ar.defined=function(tn){return arguments.length?(l=typeof tn=="function"?tn:V$1(!!tn),ar):l},ar.curve=function(tn){return arguments.length?(c=tn,u!=null&&(d=c(u)),ar):c},ar.context=function(tn){return arguments.length?(tn==null?u=d=null:d=c(u=tn),ar):u},ar}function j4(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function W4(t){return t}function V4(){var t=W4,n=j4,a=null,s=V$1(0),l=V$1(Yt),u=V$1(0);function c(d){var Ct,ar=(d=va(d)).length,en,tn,on=0,cn=new Array(ar),dn=new Array(ar),Cn=+s.apply(this,arguments),In=Math.min(Yt,Math.max(-Yt,l.apply(this,arguments)-Cn)),ix,ax=Math.min(Math.abs(In)/ar,u.apply(this,arguments)),ox=ax*(In<0?-1:1),sx;for(Ct=0;Ct<ar;++Ct)(sx=dn[cn[Ct]=Ct]=+t(d[Ct],Ct,d))>0&&(on+=sx);for(n!=null?cn.sort(function(ux,cx){return n(dn[ux],dn[cx])}):a!=null&&cn.sort(function(ux,cx){return a(d[ux],d[cx])}),Ct=0,tn=on?(In-ar*ox)/on:0;Ct<ar;++Ct,Cn=ix)en=cn[Ct],sx=dn[en],ix=Cn+(sx>0?sx*tn:0)+ox,dn[en]={data:d[en],index:Ct,value:sx,startAngle:Cn,endAngle:ix,padAngle:ax};return dn}return c.value=function(d){return arguments.length?(t=typeof d=="function"?d:V$1(+d),c):t},c.sortValues=function(d){return arguments.length?(n=d,a=null,c):n},c.sort=function(d){return arguments.length?(a=d,n=null,c):a},c.startAngle=function(d){return arguments.length?(s=typeof d=="function"?d:V$1(+d),c):s},c.endAngle=function(d){return arguments.length?(l=typeof d=="function"?d:V$1(+d),c):l},c.padAngle=function(d){return arguments.length?(u=typeof d=="function"?d:V$1(+d),c):u},c}var Hd=$c(ba);function jd(t){this._curve=t}jd.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function $c(t){function n(a){return new jd(t(a))}return n._curve=t,n}function Ar(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(a){return arguments.length?n($c(a)):n()._curve},t}function Yl(){return Ar(Mc().curve(Hd))}function Fl(){var t=Xd().curve(Hd),n=t.curve,a=t.lineX0,s=t.lineX1,l=t.lineY0,u=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Ar(a())},delete t.lineX0,t.lineEndAngle=function(){return Ar(s())},delete t.lineX1,t.lineInnerRadius=function(){return Ar(l())},delete t.lineY0,t.lineOuterRadius=function(){return Ar(u())},delete t.lineY1,t.curve=function(c){return arguments.length?n($c(c)):n()._curve},t}function Sr(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class Wd{constructor(n,a){this._context=n,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,a){switch(n=+n,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,a,n,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,n,this._y0,n,a);break}}this._x0=n,this._y0=a}}class G4{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,a){if(n=+n,a=+a,this._point===0)this._point=1;else{const s=Sr(this._x0,this._y0),l=Sr(this._x0,this._y0=(this._y0+a)/2),u=Sr(n,this._y0),c=Sr(n,a);this._context.moveTo(...s),this._context.bezierCurveTo(...l,...u,...c)}this._x0=n,this._y0=a}}function Vd(t){return new Wd(t,!0)}function Gd(t){return new Wd(t,!1)}function Z4(t){return new G4(t)}function Q4(t){return t.source}function K4(t){return t.target}function wa(t){let n=Q4,a=K4,s=wc,l=xc,u=null,c=null,d=si(Ct);function Ct(){let ar;const en=H4.call(arguments),tn=n.apply(this,en),on=a.apply(this,en);if(u==null&&(c=t(ar=d())),c.lineStart(),en[0]=tn,c.point(+s.apply(this,en),+l.apply(this,en)),en[0]=on,c.point(+s.apply(this,en),+l.apply(this,en)),c.lineEnd(),ar)return c=null,ar+""||null}return Ct.source=function(ar){return arguments.length?(n=ar,Ct):n},Ct.target=function(ar){return arguments.length?(a=ar,Ct):a},Ct.x=function(ar){return arguments.length?(s=typeof ar=="function"?ar:V$1(+ar),Ct):s},Ct.y=function(ar){return arguments.length?(l=typeof ar=="function"?ar:V$1(+ar),Ct):l},Ct.context=function(ar){return arguments.length?(ar==null?u=c=null:c=t(u=ar),Ct):u},Ct}function J4(){return wa(Vd)}function n7(){return wa(Gd)}function t7(){const t=wa(Z4);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const e7=fn(3),Zd={draw(t,n){const a=fn(n+Fe$1(n/28,.75))*.59436,s=a/2,l=s*e7;t.moveTo(0,a),t.lineTo(0,-a),t.moveTo(-l,-s),t.lineTo(l,s),t.moveTo(-l,s),t.lineTo(l,-s)}},xa={draw(t,n){const a=fn(n/Bt);t.moveTo(a,0),t.arc(0,0,a,0,Yt)}},Qd={draw(t,n){const a=fn(n/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},Kd=fn(1/3),r7=Kd*2,Jd={draw(t,n){const a=fn(n/r7),s=a*Kd;t.moveTo(0,-a),t.lineTo(s,0),t.lineTo(0,a),t.lineTo(-s,0),t.closePath()}},ng={draw(t,n){const a=fn(n)*.62625;t.moveTo(0,-a),t.lineTo(a,0),t.lineTo(0,a),t.lineTo(-a,0),t.closePath()}},tg={draw(t,n){const a=fn(n-Fe$1(n/7,2))*.87559;t.moveTo(-a,0),t.lineTo(a,0),t.moveTo(0,a),t.lineTo(0,-a)}},eg={draw(t,n){const a=fn(n),s=-a/2;t.rect(s,s,a,a)}},rg={draw(t,n){const a=fn(n)*.4431;t.moveTo(a,a),t.lineTo(a,-a),t.lineTo(-a,-a),t.lineTo(-a,a),t.closePath()}},i7=.8908130915292852,ig=jn$1(Bt/10)/jn$1(7*Bt/10),o7=jn$1(Yt/10)*ig,a7=-Mt(Yt/10)*ig,og={draw(t,n){const a=fn(n*i7),s=o7*a,l=a7*a;t.moveTo(0,-a),t.lineTo(s,l);for(let u=1;u<5;++u){const c=Yt*u/5,d=Mt(c),Ct=jn$1(c);t.lineTo(Ct*a,-d*a),t.lineTo(d*s-Ct*l,Ct*s+d*l)}t.closePath()}},uu=fn(3),ag={draw(t,n){const a=-fn(n/(uu*3));t.moveTo(0,a*2),t.lineTo(-uu*a,-a),t.lineTo(uu*a,-a),t.closePath()}},u7=fn(3),ug={draw(t,n){const a=fn(n)*.6824,s=a/2,l=a*u7/2;t.moveTo(0,-a),t.lineTo(l,s),t.lineTo(-l,s),t.closePath()}},Zn=-.5,Qn=fn(3)/2,uf=1/fn(12),f7=(uf/2+1)*3,fg={draw(t,n){const a=fn(n/f7),s=a/2,l=a*uf,u=s,c=a*uf+a,d=-u,Ct=c;t.moveTo(s,l),t.lineTo(u,c),t.lineTo(d,Ct),t.lineTo(Zn*s-Qn*l,Qn*s+Zn*l),t.lineTo(Zn*u-Qn*c,Qn*u+Zn*c),t.lineTo(Zn*d-Qn*Ct,Qn*d+Zn*Ct),t.lineTo(Zn*s+Qn*l,Zn*l-Qn*s),t.lineTo(Zn*u+Qn*c,Zn*c-Qn*u),t.lineTo(Zn*d+Qn*Ct,Zn*Ct-Qn*d),t.closePath()}},ff={draw(t,n){const a=fn(n-Fe$1(n/6,1.7))*.6189;t.moveTo(-a,-a),t.lineTo(a,a),t.moveTo(-a,a),t.lineTo(a,-a)}},ql=[xa,Qd,Jd,eg,og,ag,fg],c7=[xa,tg,ff,ug,Zd,rg,ng];function s7(t,n){let a=null,s=si(l);t=typeof t=="function"?t:V$1(t||xa),n=typeof n=="function"?n:V$1(n===void 0?64:+n);function l(){let u;if(a||(a=u=s()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),u)return a=null,u+""||null}return l.type=function(u){return arguments.length?(t=typeof u=="function"?u:V$1(u),l):t},l.size=function(u){return arguments.length?(n=typeof u=="function"?u:V$1(+u),l):n},l.context=function(u){return arguments.length?(a=u??null,l):a},l}function Ut(){}function Co(t,n,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+a)/6)}function Ma(t){this._context=t}Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Co(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function l7(t){return new Ma(t)}function cg(t){this._context=t}cg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function h7(t){return new cg(t)}function sg(t){this._context=t}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function d7(t){return new sg(t)}function lg(t,n){this._basis=new Ma(t),this._beta=n}lg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,a=t.length-1;if(a>0)for(var s=t[0],l=n[0],u=t[a]-s,c=n[a]-l,d=-1,Ct;++d<=a;)Ct=d/a,this._basis.point(this._beta*t[d]+(1-this._beta)*(s+Ct*u),this._beta*n[d]+(1-this._beta)*(l+Ct*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const g7=(function t(n){function a(s){return n===1?new Ma(s):new lg(s,n)}return a.beta=function(s){return t(+s)},a})(.85);function Po(t,n,a){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-a),t._x2,t._y2)}function Tc(t,n){this._context=t,this._k=(1-n)/6}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Po(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const p7=(function t(n){function a(s){return new Tc(s,n)}return a.tension=function(s){return t(+s)},a})(0);function Ac(t,n){this._context=t,this._k=(1-n)/6}Ac.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const m7=(function t(n){function a(s){return new Ac(s,n)}return a.tension=function(s){return t(+s)},a})(0);function Sc(t,n){this._context=t,this._k=(1-n)/6}Sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const y7=(function t(n){function a(s){return new Sc(s,n)}return a.tension=function(s){return t(+s)},a})(0);function Ec(t,n,a){var s=t._x1,l=t._y1,u=t._x2,c=t._y2;if(t._l01_a>Rn){var d=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,Ct=3*t._l01_a*(t._l01_a+t._l12_a);s=(s*d-t._x0*t._l12_2a+t._x2*t._l01_2a)/Ct,l=(l*d-t._y0*t._l12_2a+t._y2*t._l01_2a)/Ct}if(t._l23_a>Rn){var ar=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,en=3*t._l23_a*(t._l23_a+t._l12_a);u=(u*ar+t._x1*t._l23_2a-n*t._l12_2a)/en,c=(c*ar+t._y1*t._l23_2a-a*t._l12_2a)/en}t._context.bezierCurveTo(s,l,u,c,t._x2,t._y2)}function hg(t,n){this._context=t,this._alpha=n}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const _7=(function t(n){function a(s){return n?new hg(s,n):new Tc(s,0)}return a.alpha=function(s){return t(+s)},a})(.5);function dg(t,n){this._context=t,this._alpha=n}dg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const v7=(function t(n){function a(s){return n?new dg(s,n):new Ac(s,0)}return a.alpha=function(s){return t(+s)},a})(.5);function gg(t,n){this._context=t,this._alpha=n}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const b7=(function t(n){function a(s){return n?new gg(s,n):new Sc(s,0)}return a.alpha=function(s){return t(+s)},a})(.5);function pg(t){this._context=t}pg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function w7(t){return new pg(t)}function Ll(t){return t<0?-1:1}function Bl(t,n,a){var s=t._x1-t._x0,l=n-t._x1,u=(t._y1-t._y0)/(s||l<0&&-0),c=(a-t._y1)/(l||s<0&&-0),d=(u*l+c*s)/(s+l);return(Ll(u)+Ll(c))*Math.min(Math.abs(u),Math.abs(c),.5*Math.abs(d))||0}function Ul(t,n){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-n)/2:n}function fu(t,n,a){var s=t._x0,l=t._y0,u=t._x1,c=t._y1,d=(u-s)/3;t._context.bezierCurveTo(s+d,l+d*n,u-d,c-d*a,u,c)}function Do(t){this._context=t}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fu(this,this._t0,Ul(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var a=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,fu(this,Ul(this,a=Bl(this,t,n)),a);break;default:fu(this,this._t0,a=Bl(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=a}}};function mg(t){this._context=new yg(t)}(mg.prototype=Object.create(Do.prototype)).point=function(t,n){Do.prototype.point.call(this,n,t)};function yg(t){this._context=t}yg.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,a,s,l,u){this._context.bezierCurveTo(n,t,s,a,u,l)}};function x7(t){return new Do(t)}function M7(t){return new mg(t)}function _g(t){this._context=t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),a===2)this._context.lineTo(t[1],n[1]);else for(var s=Xl(t),l=Xl(n),u=0,c=1;c<a;++u,++c)this._context.bezierCurveTo(s[0][u],l[0][u],s[1][u],l[1][u],t[c],n[c]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Xl(t){var n,a=t.length-1,s,l=new Array(a),u=new Array(a),c=new Array(a);for(l[0]=0,u[0]=2,c[0]=t[0]+2*t[1],n=1;n<a-1;++n)l[n]=1,u[n]=4,c[n]=4*t[n]+2*t[n+1];for(l[a-1]=2,u[a-1]=7,c[a-1]=8*t[a-1]+t[a],n=1;n<a;++n)s=l[n]/u[n-1],u[n]-=s,c[n]-=s*c[n-1];for(l[a-1]=c[a-1]/u[a-1],n=a-2;n>=0;--n)l[n]=(c[n]-l[n+1])/u[n];for(u[a-1]=(t[a]+l[a-1])/2,n=0;n<a-1;++n)u[n]=2*t[n+1]-l[n+1];return[l,u]}function $7(t){return new _g(t)}function $a(t,n){this._context=t,this._t=n}$a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=t,this._y=n}};function T7(t){return new $a(t,.5)}function A7(t){return new $a(t,0)}function S7(t){return new $a(t,1)}function nr(t,n){if((c=t.length)>1)for(var a=1,s,l,u=t[n[0]],c,d=u.length;a<c;++a)for(l=u,u=t[n[a]],s=0;s<d;++s)u[s][1]+=u[s][0]=isNaN(l[s][1])?l[s][0]:l[s][1]}function tr(t){for(var n=t.length,a=new Array(n);--n>=0;)a[n]=n;return a}function E7(t,n){return t[n]}function k7(t){const n=[];return n.key=t,n}function N7(){var t=V$1([]),n=tr,a=nr,s=E7;function l(u){var c=Array.from(t.apply(this,arguments),k7),d,Ct=c.length,ar=-1,en;for(const tn of u)for(d=0,++ar;d<Ct;++d)(c[d][ar]=[0,+s(tn,c[d].key,ar,u)]).data=tn;for(d=0,en=va(n(c));d<Ct;++d)c[en[d]].index=d;return a(c,en),c}return l.keys=function(u){return arguments.length?(t=typeof u=="function"?u:V$1(Array.from(u)),l):t},l.value=function(u){return arguments.length?(s=typeof u=="function"?u:V$1(+u),l):s},l.order=function(u){return arguments.length?(n=u==null?tr:typeof u=="function"?u:V$1(Array.from(u)),l):n},l.offset=function(u){return arguments.length?(a=u??nr,l):a},l}function R7(t,n){if((s=t.length)>0){for(var a,s,l=0,u=t[0].length,c;l<u;++l){for(c=a=0;a<s;++a)c+=t[a][l][1]||0;if(c)for(a=0;a<s;++a)t[a][l][1]/=c}nr(t,n)}}function I7(t,n){if((Ct=t.length)>0)for(var a,s=0,l,u,c,d,Ct,ar=t[n[0]].length;s<ar;++s)for(c=d=0,a=0;a<Ct;++a)(u=(l=t[n[a]][s])[1]-l[0])>0?(l[0]=c,l[1]=c+=u):u<0?(l[1]=d,l[0]=d+=u):(l[0]=0,l[1]=u)}function C7(t,n){if((l=t.length)>0){for(var a=0,s=t[n[0]],l,u=s.length;a<u;++a){for(var c=0,d=0;c<l;++c)d+=t[c][a][1]||0;s[a][1]+=s[a][0]=-d/2}nr(t,n)}}function P7(t,n){if(!(!((c=t.length)>0)||!((u=(l=t[n[0]]).length)>0))){for(var a=0,s=1,l,u,c;s<u;++s){for(var d=0,Ct=0,ar=0;d<c;++d){for(var en=t[n[d]],tn=en[s][1]||0,on=en[s-1][1]||0,cn=(tn-on)/2,dn=0;dn<d;++dn){var Cn=t[n[dn]],In=Cn[s][1]||0,ix=Cn[s-1][1]||0;cn+=In-ix}Ct+=tn,ar+=cn*tn}l[s-1][1]+=l[s-1][0]=a,Ct&&(a-=ar/Ct)}l[s-1][1]+=l[s-1][0]=a,nr(t,n)}}function vg(t){var n=t.map(D7);return tr(t).sort(function(a,s){return n[a]-n[s]})}function D7(t){for(var n=-1,a=0,s=t.length,l,u=-1/0;++n<s;)(l=+t[n][1])>u&&(u=l,a=n);return a}function bg(t){var n=t.map(wg);return tr(t).sort(function(a,s){return n[a]-n[s]})}function wg(t){for(var n=0,a=-1,s=t.length,l;++a<s;)(l=+t[a][1])&&(n+=l);return n}function z7(t){return bg(t).reverse()}function O7(t){var n=t.length,a,s,l=t.map(wg),u=vg(t),c=0,d=0,Ct=[],ar=[];for(a=0;a<n;++a)s=u[a],c<d?(c+=l[s],Ct.push(s)):(d+=l[s],ar.push(s));return ar.reverse().concat(Ct)}function Y7(t){return tr(t).reverse()}const Ii=t=>()=>t;function F7(t,{sourceEvent:n,target:a,transform:s,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:l}})}function ht(t,n,a){this.k=t,this.x=n,this.y=a}ht.prototype={constructor:ht,scale:function(t){return t===1?this:new ht(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new ht(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var li=new ht(1,0,0);Pe$1.prototype=ht.prototype;function Pe$1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return li;return t.__zoom}function cu(t){t.stopImmediatePropagation()}function gr(t){t.preventDefault(),t.stopImmediatePropagation()}function q7(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function L7(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hl(){return this.__zoom||li}function B7(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function U7(){return navigator.maxTouchPoints||"ontouchstart"in this}function X7(t,n,a){var s=t.invertX(n[0][0])-a[0][0],l=t.invertX(n[1][0])-a[1][0],u=t.invertY(n[0][1])-a[0][1],c=t.invertY(n[1][1])-a[1][1];return t.translate(l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function xg(){var t=q7,n=L7,a=X7,s=B7,l=U7,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,Ct=n0,ar=pe$1("start","zoom","end"),en,tn,on,cn=500,dn=150,Cn=0,In=10;function ix(xx){xx.property("__zoom",Hl).on("wheel.zoom",gx,{passive:!1}).on("mousedown.zoom",fx).on("dblclick.zoom",dx).filter(l).on("touchstart.zoom",mx).on("touchmove.zoom",vx).on("touchend.zoom touchcancel.zoom",bx).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}ix.transform=function(xx,_x,Ex,Tx){var Cx=xx.selection?xx.selection():xx;Cx.property("__zoom",Hl),xx!==Cx?ux(xx,_x,Ex,Tx):Cx.interrupt().each(function(){cx(this,arguments).event(Tx).start().zoom(null,typeof _x=="function"?_x.apply(this,arguments):_x).end()})},ix.scaleBy=function(xx,_x,Ex,Tx){ix.scaleTo(xx,function(){var Cx=this.__zoom.k,Mx=typeof _x=="function"?_x.apply(this,arguments):_x;return Cx*Mx},Ex,Tx)},ix.scaleTo=function(xx,_x,Ex,Tx){ix.transform(xx,function(){var Cx=n.apply(this,arguments),Mx=this.__zoom,Ax=Ex==null?sx(Cx):typeof Ex=="function"?Ex.apply(this,arguments):Ex,Nx=Mx.invert(Ax),Ux=typeof _x=="function"?_x.apply(this,arguments):_x;return a(ox(ax(Mx,Ux),Ax,Nx),Cx,c)},Ex,Tx)},ix.translateBy=function(xx,_x,Ex,Tx){ix.transform(xx,function(){return a(this.__zoom.translate(typeof _x=="function"?_x.apply(this,arguments):_x,typeof Ex=="function"?Ex.apply(this,arguments):Ex),n.apply(this,arguments),c)},null,Tx)},ix.translateTo=function(xx,_x,Ex,Tx,Cx){ix.transform(xx,function(){var Mx=n.apply(this,arguments),Ax=this.__zoom,Nx=Tx==null?sx(Mx):typeof Tx=="function"?Tx.apply(this,arguments):Tx;return a(li.translate(Nx[0],Nx[1]).scale(Ax.k).translate(typeof _x=="function"?-_x.apply(this,arguments):-_x,typeof Ex=="function"?-Ex.apply(this,arguments):-Ex),Mx,c)},Tx,Cx)};function ax(xx,_x){return _x=Math.max(u[0],Math.min(u[1],_x)),_x===xx.k?xx:new ht(_x,xx.x,xx.y)}function ox(xx,_x,Ex){var Tx=_x[0]-Ex[0]*xx.k,Cx=_x[1]-Ex[1]*xx.k;return Tx===xx.x&&Cx===xx.y?xx:new ht(xx.k,Tx,Cx)}function sx(xx){return[(+xx[0][0]+ +xx[1][0])/2,(+xx[0][1]+ +xx[1][1])/2]}function ux(xx,_x,Ex,Tx){xx.on("start.zoom",function(){cx(this,arguments).event(Tx).start()}).on("interrupt.zoom end.zoom",function(){cx(this,arguments).event(Tx).end()}).tween("zoom",function(){var Cx=this,Mx=arguments,Ax=cx(Cx,Mx).event(Tx),Nx=n.apply(Cx,Mx),Ux=Ex==null?sx(Nx):typeof Ex=="function"?Ex.apply(Cx,Mx):Ex,Rx=Math.max(Nx[1][0]-Nx[0][0],Nx[1][1]-Nx[0][1]),Ox=Cx.__zoom,Px=typeof _x=="function"?_x.apply(Cx,Mx):_x,$x=Ct(Ox.invert(Ux).concat(Rx/Ox.k),Px.invert(Ux).concat(Rx/Px.k));return function(Lx){if(Lx===1)Lx=Px;else{var zx=$x(Lx),qx=Rx/zx[2];Lx=new ht(qx,Ux[0]-zx[0]*qx,Ux[1]-zx[1]*qx)}Ax.zoom(null,Lx)}})}function cx(xx,_x,Ex){return!Ex&&xx.__zooming||new hx(xx,_x)}function hx(xx,_x){this.that=xx,this.args=_x,this.active=0,this.sourceEvent=null,this.extent=n.apply(xx,_x),this.taps=0}hx.prototype={event:function(xx){return xx&&(this.sourceEvent=xx),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(xx,_x){return this.mouse&&xx!=="mouse"&&(this.mouse[1]=_x.invert(this.mouse[0])),this.touch0&&xx!=="touch"&&(this.touch0[1]=_x.invert(this.touch0[0])),this.touch1&&xx!=="touch"&&(this.touch1[1]=_x.invert(this.touch1[0])),this.that.__zoom=_x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(xx){var _x=X$1(this.that).datum();ar.call(xx,this.that,new F7(xx,{sourceEvent:this.sourceEvent,target:ix,transform:this.that.__zoom,dispatch:ar}),_x)}};function gx(xx,..._x){if(!t.apply(this,arguments))return;var Ex=cx(this,_x).event(xx),Tx=this.__zoom,Cx=Math.max(u[0],Math.min(u[1],Tx.k*Math.pow(2,s.apply(this,arguments)))),Mx=wn(xx);if(Ex.wheel)(Ex.mouse[0][0]!==Mx[0]||Ex.mouse[0][1]!==Mx[1])&&(Ex.mouse[1]=Tx.invert(Ex.mouse[0]=Mx)),clearTimeout(Ex.wheel);else{if(Tx.k===Cx)return;Ex.mouse=[Mx,Tx.invert(Mx)],re$1(this),Ex.start()}gr(xx),Ex.wheel=setTimeout(Ax,dn),Ex.zoom("mouse",a(ox(ax(Tx,Cx),Ex.mouse[0],Ex.mouse[1]),Ex.extent,c));function Ax(){Ex.wheel=null,Ex.end()}}function fx(xx,..._x){if(on||!t.apply(this,arguments))return;var Ex=xx.currentTarget,Tx=cx(this,_x,!0).event(xx),Cx=X$1(xx.view).on("mousemove.zoom",Ux,!0).on("mouseup.zoom",Rx,!0),Mx=wn(xx,Ex),Ax=xx.clientX,Nx=xx.clientY;Uo(xx.view),cu(xx),Tx.mouse=[Mx,this.__zoom.invert(Mx)],re$1(this),Tx.start();function Ux(Ox){if(gr(Ox),!Tx.moved){var Px=Ox.clientX-Ax,$x=Ox.clientY-Nx;Tx.moved=Px*Px+$x*$x>Cn}Tx.event(Ox).zoom("mouse",a(ox(Tx.that.__zoom,Tx.mouse[0]=wn(Ox,Ex),Tx.mouse[1]),Tx.extent,c))}function Rx(Ox){Cx.on("mousemove.zoom mouseup.zoom",null),Xo(Ox.view,Tx.moved),gr(Ox),Tx.event(Ox).end()}}function dx(xx,..._x){if(t.apply(this,arguments)){var Ex=this.__zoom,Tx=wn(xx.changedTouches?xx.changedTouches[0]:xx,this),Cx=Ex.invert(Tx),Mx=Ex.k*(xx.shiftKey?.5:2),Ax=a(ox(ax(Ex,Mx),Tx,Cx),n.apply(this,_x),c);gr(xx),d>0?X$1(this).transition().duration(d).call(ux,Ax,Tx,xx):X$1(this).call(ix.transform,Ax,Tx,xx)}}function mx(xx,..._x){if(t.apply(this,arguments)){var Ex=xx.touches,Tx=Ex.length,Cx=cx(this,_x,xx.changedTouches.length===Tx).event(xx),Mx,Ax,Nx,Ux;for(cu(xx),Ax=0;Ax<Tx;++Ax)Nx=Ex[Ax],Ux=wn(Nx,this),Ux=[Ux,this.__zoom.invert(Ux),Nx.identifier],Cx.touch0?!Cx.touch1&&Cx.touch0[2]!==Ux[2]&&(Cx.touch1=Ux,Cx.taps=0):(Cx.touch0=Ux,Mx=!0,Cx.taps=1+!!en);en&&(en=clearTimeout(en)),Mx&&(Cx.taps<2&&(tn=Ux[0],en=setTimeout(function(){en=null},cn)),re$1(this),Cx.start())}}function vx(xx,..._x){if(this.__zooming){var Ex=cx(this,_x).event(xx),Tx=xx.changedTouches,Cx=Tx.length,Mx,Ax,Nx,Ux;for(gr(xx),Mx=0;Mx<Cx;++Mx)Ax=Tx[Mx],Nx=wn(Ax,this),Ex.touch0&&Ex.touch0[2]===Ax.identifier?Ex.touch0[0]=Nx:Ex.touch1&&Ex.touch1[2]===Ax.identifier&&(Ex.touch1[0]=Nx);if(Ax=Ex.that.__zoom,Ex.touch1){var Rx=Ex.touch0[0],Ox=Ex.touch0[1],Px=Ex.touch1[0],$x=Ex.touch1[1],Lx=(Lx=Px[0]-Rx[0])*Lx+(Lx=Px[1]-Rx[1])*Lx,zx=(zx=$x[0]-Ox[0])*zx+(zx=$x[1]-Ox[1])*zx;Ax=ax(Ax,Math.sqrt(Lx/zx)),Nx=[(Rx[0]+Px[0])/2,(Rx[1]+Px[1])/2],Ux=[(Ox[0]+$x[0])/2,(Ox[1]+$x[1])/2]}else if(Ex.touch0)Nx=Ex.touch0[0],Ux=Ex.touch0[1];else return;Ex.zoom("touch",a(ox(Ax,Nx,Ux),Ex.extent,c))}}function bx(xx,..._x){if(this.__zooming){var Ex=cx(this,_x).event(xx),Tx=xx.changedTouches,Cx=Tx.length,Mx,Ax;for(cu(xx),on&&clearTimeout(on),on=setTimeout(function(){on=null},cn),Mx=0;Mx<Cx;++Mx)Ax=Tx[Mx],Ex.touch0&&Ex.touch0[2]===Ax.identifier?delete Ex.touch0:Ex.touch1&&Ex.touch1[2]===Ax.identifier&&delete Ex.touch1;if(Ex.touch1&&!Ex.touch0&&(Ex.touch0=Ex.touch1,delete Ex.touch1),Ex.touch0)Ex.touch0[1]=this.__zoom.invert(Ex.touch0[0]);else if(Ex.end(),Ex.taps===2&&(Ax=wn(Ax,this),Math.hypot(tn[0]-Ax[0],tn[1]-Ax[1])<In)){var Nx=X$1(this).on("dblclick.zoom");Nx&&Nx.apply(this,arguments)}}}return ix.wheelDelta=function(xx){return arguments.length?(s=typeof xx=="function"?xx:Ii(+xx),ix):s},ix.filter=function(xx){return arguments.length?(t=typeof xx=="function"?xx:Ii(!!xx),ix):t},ix.touchable=function(xx){return arguments.length?(l=typeof xx=="function"?xx:Ii(!!xx),ix):l},ix.extent=function(xx){return arguments.length?(n=typeof xx=="function"?xx:Ii([[+xx[0][0],+xx[0][1]],[+xx[1][0],+xx[1][1]]]),ix):n},ix.scaleExtent=function(xx){return arguments.length?(u[0]=+xx[0],u[1]=+xx[1],ix):[u[0],u[1]]},ix.translateExtent=function(xx){return arguments.length?(c[0][0]=+xx[0][0],c[1][0]=+xx[1][0],c[0][1]=+xx[0][1],c[1][1]=+xx[1][1],ix):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},ix.constrain=function(xx){return arguments.length?(a=xx,ix):a},ix.duration=function(xx){return arguments.length?(d=+xx,ix):d},ix.interpolate=function(xx){return arguments.length?(Ct=xx,ix):Ct},ix.on=function(){var xx=ar.on.apply(ar,arguments);return xx===ar?ix:xx},ix.clickDistance=function(xx){return arguments.length?(Cn=(xx=+xx)*xx,ix):Math.sqrt(Cn)},ix.tapDistance=function(xx){return arguments.length?(In=+xx,ix):In},ix}const H7=Object.freeze(Object.defineProperty({__proto__:null,Adder:bn,Delaunay:zf,FormatSpecifier:ra,InternMap:Pr,InternSet:ie,Node:he,Path:ti,Voronoi:v0,ZoomTransform:ht,active:B_,arc:X4,area:Xd,areaRadial:Fl,ascending:hn,autoType:hb,axisBottom:Cp,axisLeft:Pp,axisRight:Ip,axisTop:Rp,bin:Nc,bisect:Ft,bisectCenter:Sg,bisectLeft:Ag,bisectRight:Ft,bisector:Oo,blob:pb,blur:Eg,blur2:Zl,blurImage:kg,brush:tv,brushSelection:K_,brushX:J_,brushY:nv,buffer:yb,chord:rv,chordDirected:ov,chordTranspose:iv,cluster:C3,color:qt,contourDensity:Rv,contours:Ru,count:Yo,create:pm,creator:Lo,cross:zg,csv:bb,csvFormat:tb,csvFormatBody:eb,csvFormatRow:ib,csvFormatRows:rb$1,csvFormatValue:ob,csvParse:w0,csvParseRows:nb,cubehelix:ut,cumsum:Og,curveBasis:l7,curveBasisClosed:h7,curveBasisOpen:d7,curveBumpX:Vd,curveBumpY:Gd,curveBundle:g7,curveCardinal:p7,curveCardinalClosed:m7,curveCardinalOpen:y7,curveCatmullRom:_7,curveCatmullRomClosed:v7,curveCatmullRomOpen:b7,curveLinear:ba,curveLinearClosed:w7,curveMonotoneX:x7,curveMonotoneY:M7,curveNatural:$7,curveStep:T7,curveStepAfter:S7,curveStepBefore:A7,descending:Vl,deviation:Jl,difference:vp,disjoint:bp,dispatch:pe$1,drag:Sh,dragDisable:Uo,dragEnable:Xo,dsv:vb,dsvFormat:na,easeBack:ns,easeBackIn:P_,easeBackInOut:ns,easeBackOut:D_,easeBounce:Ur,easeBounceIn:I_,easeBounceInOut:C_,easeBounceOut:Ur,easeCircle:Jc,easeCircleIn:x_,easeCircleInOut:Jc,easeCircleOut:M_,easeCubic:Au,easeCubicIn:g_,easeCubicInOut:Au,easeCubicOut:p_,easeElastic:ts,easeElasticIn:z_,easeElasticInOut:O_,easeElasticOut:ts,easeExp:Kc,easeExpIn:b_,easeExpInOut:Kc,easeExpOut:w_,easeLinear:l_,easePoly:Zc,easePolyIn:m_,easePolyInOut:Zc,easePolyOut:y_,easeQuad:Gc,easeQuadIn:h_,easeQuadInOut:Gc,easeQuadOut:d_,easeSin:Qc,easeSinIn:__,easeSinInOut:Qc,easeSinOut:v_,every:dp,extent:Er,fcumsum:Fg,filter:pp,flatGroup:qg,flatRollup:Lg,forceCenter:Sb,forceCollide:jb,forceLink:Vb,forceManyBody:rw,forceRadial:iw,forceSimulation:ew,forceX:ow,forceY:aw,get format(){return ia},formatDefaultLocale:E0,formatLocale:S0,get formatPrefix(){return Ff},formatSpecifier:We,fsum:Yg,geoAlbers:h1,geoAlbersUsa:l3,geoArea:mw,geoAzimuthalEqualArea:h3,geoAzimuthalEqualAreaRaw:Gf,geoAzimuthalEquidistant:d3,geoAzimuthalEquidistantRaw:Zf,geoBounds:bw,geoCentroid:Aw,geoCircle:Sw,geoClipAntimeridian:Xu,geoClipCircle:Z0,geoClipExtent:Pw,geoClipRectangle:oa,geoConicConformal:p3,geoConicConformalRaw:p1,geoConicEqualArea:ko,geoConicEqualAreaRaw:l1,geoConicEquidistant:y3,geoConicEquidistantRaw:m1,geoContains:Lw,geoDistance:wo,geoEqualEarth:v3$1,geoEqualEarthRaw:Qf,geoEquirectangular:m3,geoEquirectangularRaw:Gr,geoGnomonic:b3,geoGnomonicRaw:Kf,geoGraticule:J0,geoGraticule10:Bw,geoIdentity:w3,geoInterpolate:Uw,geoLength:Q0,geoMercator:g3,geoMercatorRaw:ai,geoNaturalEarth1:x3,geoNaturalEarth1Raw:Jf,geoOrthographic:M3,geoOrthographicRaw:nc,geoPath:t3,geoProjection:vt,geoProjectionMutator:Wf,geoRotation:X0,geoStereographic:$3,geoStereographicRaw:tc,geoStream:it,geoTransform:e3,geoTransverseMercator:T3,geoTransverseMercatorRaw:ec,gray:Dm,greatest:sh,greatestIndex:up,group:rh,groupSort:Xg,groups:ih,hcl:to,hierarchy:rc,histogram:Nc,hsl:Ki,html:Tb,image:xb,index:Bg,indexes:Ug,interpolate:Ht,interpolateArray:Lm,interpolateBasis:Lh,interpolateBasisClosed:Bh,interpolateBlues:y4,interpolateBrBG:Z8,interpolateBuGn:o4,interpolateBuPu:a4,interpolateCividis:M4,interpolateCool:A4,interpolateCubehelix:ey,interpolateCubehelixDefault:$4,interpolateCubehelixLong:Go,interpolateDate:Vh,interpolateDiscrete:Xm,interpolateGnBu:u4,interpolateGreens:_4,interpolateGreys:v4,interpolateHcl:ny,interpolateHclLong:ty,interpolateHsl:Qm,interpolateHslLong:Km,interpolateHue:Hm,interpolateInferno:P4,interpolateLab:Jm,interpolateMagma:C4,interpolateNumber:Kn,interpolateNumberArray:Af,interpolateObject:Gh,interpolateOrRd:f4,interpolateOranges:x4,interpolatePRGn:Q8,interpolatePiYG:K8,interpolatePlasma:D4,interpolatePuBu:s4,interpolatePuBuGn:c4,interpolatePuOr:J8,interpolatePuRd:l4,interpolatePurples:b4,interpolateRainbow:S4,interpolateRdBu:n4,interpolateRdGy:t4,interpolateRdPu:h4,interpolateRdYlBu:e4,interpolateRdYlGn:r4,interpolateReds:w4,interpolateRgb:qr,interpolateRgbBasis:Hh,interpolateRgbBasisClosed:qm,interpolateRound:Vo,interpolateSinebow:N4,interpolateSpectral:i4,interpolateString:Sf,interpolateTransformCss:Kh,interpolateTransformSvg:Jh,interpolateTurbo:R4,interpolateViridis:I4,interpolateWarm:T4,interpolateYlGn:g4,interpolateYlGnBu:d4,interpolateYlOrBr:p4,interpolateYlOrRd:m4,interpolateZoom:n0,interrupt:re$1,intersection:wp,interval:uy,isoFormat:N8,isoParse:I8,json:$b,lab:no,lch:zm,least:ap,leastIndex:dh,line:Mc,lineRadial:Yl,link:wa,linkHorizontal:J4,linkRadial:t7,linkVertical:n7,local:Th,map:mp,matcher:vf,max:Dr,maxIndex:pf,mean:Kg,median:Jg,medianIndex:np,merge:yf,min:Gi,minIndex:mf,mode:ep,namespace:Kr,namespaces:mu,nice:df,now:ni,pack:c6,packEnclose:r6,packSiblings:u6,pairs:rp,partition:s6,path:Jo,pathRound:fv,permute:ch,pie:V4,piecewise:i0,pointRadial:Sr,pointer:wn,pointers:ym,polygonArea:A6,polygonCentroid:S6,polygonContains:R6,polygonHull:N6,polygonLength:I6,precisionFixed:k0,precisionPrefix:N0,precisionRound:R0,quadtree:ea,quantile:zr,quantileIndex:hh,quantileSorted:lh,quantize:ry,quickselect:Fo,radialArea:Fl,radialLine:Yl,randomBates:z6,randomBernoulli:F6,randomBeta:k1,randomBinomial:N1,randomCauchy:L6,randomExponential:O6,randomGamma:ac,randomGeometric:E1,randomInt:P6,randomIrwinHall:S1,randomLcg:j6,randomLogNormal:D6,randomLogistic:B6,randomNormal:oc,randomPareto:Y6,randomPoisson:U6,randomUniform:C6,randomWeibull:q6,range:zt,rank:op,reduce:yp,reverse:_p,rgb:Ue,ribbon:mv,ribbonArrow:yv,rollup:ah,rollups:uh,scaleBand:fc,scaleDiverging:dd,scaleDivergingLog:gd,scaleDivergingPow:bc,scaleDivergingSqrt:Y8,scaleDivergingSymlog:pd,scaleIdentity:P1,scaleImplicit:of,scaleLinear:C1,scaleLog:z1,scaleOrdinal:uc,scalePoint:W6,scalePow:dc,scaleQuantile:F1,scaleQuantize:q1,scaleRadial:Y1,scaleSequential:cd,scaleSequentialLog:sd,scaleSequentialPow:vc,scaleSequentialQuantile:hd,scaleSequentialSqrt:O8,scaleSequentialSymlog:ld,scaleSqrt:o5,scaleSymlog:O1,scaleThreshold:L1,scaleTime:D8,scaleUtc:z8,scan:fp,schemeAccent:q8,schemeBlues:Od,schemeBrBG:md,schemeBuGn:Td,schemeBuPu:Ad,schemeCategory10:F8,schemeDark2:L8,schemeGnBu:Sd,schemeGreens:Yd,schemeGreys:Fd,schemeObservable10:B8,schemeOrRd:Ed,schemeOranges:Bd,schemePRGn:yd,schemePaired:U8,schemePastel1:X8,schemePastel2:H8,schemePiYG:_d,schemePuBu:Nd,schemePuBuGn:kd,schemePuOr:vd,schemePuRd:Rd,schemePurples:qd,schemeRdBu:bd,schemeRdGy:wd,schemeRdPu:Id,schemeRdYlBu:xd,schemeRdYlGn:Md,schemeReds:Ld,schemeSet1:j8,schemeSet2:W8,schemeSet3:V8,schemeSpectral:$d,schemeTableau10:G8,schemeYlGn:Pd,schemeYlGnBu:Cd,schemeYlOrBr:Dd,schemeYlOrRd:zd,select:X$1,selectAll:_m,selection:me$1,selector:Bo,selectorAll:_f,shuffle:cp,shuffler:gh,some:gp,sort:du,stack:N7,stackOffsetDiverging:I7,stackOffsetExpand:R7,stackOffsetNone:nr,stackOffsetSilhouette:C7,stackOffsetWiggle:P7,stackOrderAppearance:vg,stackOrderAscending:bg,stackOrderDescending:z7,stackOrderInsideOut:O7,stackOrderNone:tr,stackOrderReverse:Y7,stratify:g6,style:ue$1,subset:Mp,sum:sp,superset:mh,svg:Ab,symbol:s7,symbolAsterisk:Zd,symbolCircle:xa,symbolCross:Qd,symbolDiamond:Jd,symbolDiamond2:ng,symbolPlus:tg,symbolSquare:eg,symbolSquare2:rg,symbolStar:og,symbolTimes:ff,symbolTriangle:ag,symbolTriangle2:ug,symbolWye:fg,symbolX:ff,symbols:ql,symbolsFill:ql,symbolsStroke:c7,text:ta,thresholdFreedmanDiaconis:Zg,thresholdScott:Qg,thresholdSturges:gf,tickFormat:I1,tickIncrement:ae$1,tickStep:Vi,ticks:oe$1,timeDay:or,timeDays:l5,get timeFormat(){return mc},timeFormatDefaultLocale:ud,timeFormatLocale:td,timeFriday:X1,timeFridays:_5,timeHour:la,timeHours:c5,timeInterval:_n,timeMillisecond:Qe,timeMilliseconds:wl,timeMinute:ca,timeMinutes:u5,timeMonday:Zr,timeMondays:g5,timeMonth:da,timeMonths:A5,get timeParse(){return ad},timeSaturday:H1,timeSaturdays:v5,timeSecond:Et,timeSeconds:Ml,timeSunday:Ke,timeSundays:$l,timeThursday:de$1,timeThursdays:y5,timeTickInterval:nd,timeTicks:J1,timeTuesday:B1,timeTuesdays:p5,timeWednesday:U1,timeWednesdays:m5,timeWeek:Ke,timeWeeks:$l,timeYear:mt,timeYears:E5,timeout:xu,timer:Qo,timerFlush:u0,transition:l0,transpose:ph,tree:w6,treemap:x6,treemapBinary:M6,treemapDice:ui,treemapResquarify:T6,treemapSlice:ua,treemapSliceDice:$6,treemapSquarify:A1,tsv:wb,tsvFormat:ub,tsvFormatBody:fb,tsvFormatRow:sb,tsvFormatRows:cb,tsvFormatValue:lb$1,tsvParse:x0,tsvParseRows:ab,union:$p,unixDay:pc,unixDays:d5,utcDay:ci,utcDays:h5,get utcFormat(){return pa},utcFriday:V1,utcFridays:$5,utcHour:ha,utcHours:s5,utcMillisecond:Qe,utcMilliseconds:wl,utcMinute:sa,utcMinutes:f5,utcMonday:Qr,utcMondays:b5,utcMonth:ga,utcMonths:S5,get utcParse(){return yc},utcSaturday:G1,utcSaturdays:T5,utcSecond:Et,utcSeconds:Ml,utcSunday:Je,utcSundays:Tl,utcThursday:ge$1,utcThursdays:M5,utcTickInterval:K1,utcTicks:Q1,utcTuesday:j1,utcTuesdays:w5,utcWednesday:W1,utcWednesdays:x5,utcWeek:Je,utcWeeks:Tl,utcYear:yt,utcYears:k5,variance:Kl,window:bf,xml:$0,zip:hp,zoom:xg,zoomIdentity:li,zoomTransform:Pe$1},Symbol.toStringTag,{value:"Module"}));function kc(t){const n=t.attr("transform"),a=n&&n.match(/translate\(([^,]+),\s*([^)]+)\)/);return a?[parseFloat(a[1]),parseFloat(a[2])]:[0,0]}function Ta(t){const n=t&&t.match(/rotate\(([^)]+)\)/);return n?parseFloat(n[1]):0}function Mg(t,n,a){const s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),u=s*Math.sin(l+a*Math.PI/180);return[s*Math.cos(l+a*Math.PI/180),u]}function cf(t,n,a,s,l){const[u,c]=[s.shapes[n].x,s.shapes[n].y];var d=s.shapes[n].connectors[a][0],Ct=s.shapes[n].connectors[a][1];const ar=t.attr("transform"),en=ar?Ta(ar):s.shapes[n].rotation!=null?s.shapes[n].rotation:0,[tn,on]=Mg(d,Ct,en);return l([u+tn,c+on])}const pr={gridSize:16,width:2432,height:1792,defaultZoom:1,maxZoom:2};function j7(t){t.shapes||(t.shapes=[]),t.wires||(t.wires=[]),t.settings||(t.settings={});for(const n in pr)if(t.settings[n]===void 0&&(t.settings[n]=pr[n]),typeof pr[n]=="object")for(const a in pr[n])t.settings[n][a]===void 0&&(t.settings[n][a]=pr[n][a]);return t}function zo(t,n,a,s,l,u,c){var d,Ct=10,ar=[];const en=s.select("path");var tn=[];{const ax=Jo();ax.moveTo(...n[0]),tn.push(n[0]);var on,cn,dn,Cn=n;for(d=1;d<Cn.length;d++)if(on=Cn[d-1],cn=Cn[d],on[0]==cn[0]||on[1]==cn[1])tn.push(cn);else{var In=a([(cn[0]-on[0])/2,0])[0];tn.push([on[0]+In,on[1]]),tn.push([on[0]+In,cn[1]]),tn.push(cn)}for(d=1;d<tn.length-1;d++)on=tn[d-1],dn=tn[d],cn=tn[d+1],on[0]==dn[0]&&dn[0]==cn[0]||on[1]==dn[1]&&dn[1]==cn[1]?(tn.splice(d,1),d--):ar.push([tn[d][0],tn[d][1]]);tn.map(ox=>ax.lineTo(ox[0],ox[1])),en.attr("d",ax.toString())}if(s.selectAll(".visiojs_elbow").remove(),l)for(var ix=0;ix<ar.length;ix++){on=ar[ix];const ax=ix,ox=s.append("rect").attr("class","visiojs_elbow").attr("x",on[0]-Ct/2).attr("y",on[1]-Ct/2).attr("width",Ct).attr("height",Ct).attr("fill","url(#visiojs_elbow_fill)");u({elbowID:ax,elbow:ox,wireID:c,start:n[0],end:n[n.length-1],redrawWire:sx=>zo(t,sx,a,s,l,u,c)})}return ar}function W7({d3:t,snapAndClipToGrid:n,elbSvg:a,wireID:s,initialState:l,elbowID:u,redrawWire:c,start:d,end:Ct,stateChanged:ar}){var en={x:0,y:0},tn=[],on={x:0,y:0};const cn=t.drag().clickDistance(10).on("start",dn=>{[on.x,on.y]=[dn.x,dn.y]}).on("drag",dn=>{const Cn=n([dn.x-on.x,dn.y-on.y]),In={x:Cn[0],y:Cn[1]};if(In.x===en.x&&In.y===en.y)return;en={...In};const ix=l.wires[s].points.map((ox,sx)=>sx===u?[ox[0]+In.x,ox[1]+In.y]:(sx===u-1||sx===u+1)&&ox[0]===l.wires[s].points[u][0]?[ox[0]+In.x,ox[1]]:(sx===u-1||sx===u+1)&&ox[1]===l.wires[s].points[u][1]?[ox[0],ox[1]+In.y]:ox);var ax=[d,Ct];ax.splice(1,0,...ix),tn=[...c(ax)]}).on("end",()=>{l.wires[s].points=[...tn],ar(l)});a.call(cn)}function V7(t,n,a){const s=document.elementFromPoint(t,n);if(s&&s.classList.contains("visiojs_connector")&&s.id!="visiojs_tempconn"){const l=s.id.split("_");a.shapeID=Number(l[1]),a.connectorID=Number(l[2])}else a.shapeID=null,a.connectorID=null}function jl(t,n,a,s,l,u,c,d,Ct,ar,en){const tn=ar,on=[l,u],cn=Ct([(t-tn.x)/tn.k,(n-tn.y)/tn.k]);var dn=[on,...s,cn];zo("manhattan",dn,Ct,a,null,ox=>moveElbow(ox),en.wires.length);const Cn=X$1("#visiojs_tempconn");Cn.attr("cx",cn[0]).attr("cy",cn[1]).style("visibility","visible");const In=Cn.node().getBoundingClientRect(),ix=In.left+5,ax=In.top+5;V7(ix,ax,d),d.shapeID!=null?(c.classed("visiojs_good_wire",!0),c.classed("visiojs_bad_wire",!1)):(c.classed("visiojs_good_wire",!1),c.classed("visiojs_bad_wire",!0))}const sf=({prevEvent:t,group:n,shapeID:a,connectorID:s,x:l,y:u,endLine:c,wireMidPoints:d=[],lineGroup:Ct=null,line:ar=null,snapAndClipToGrid:en,wireStart:tn,svg:on,initialState:cn,stateChanged:dn})=>{t.stopPropagation(),t.preventDefault();var[Cn,In]=kc(n);const ix=Ta(n.attr("transform")),[ax,ox]=Mg(l,u,ix);[Cn,In]=en([Cn+ax,In+ox]),tn.shapeID=a,tn.connectorID=s;const sx={shapeID:null,connectorID:null},ux=X$1("#visiojs_wires");Ct===null&&(Ct=ux.insert("g")),ar===null&&(ar=Ct.append("path").attr("class","visiojs_wire"));var cx=X$1("#visiojs_tempconn");cx.empty()&&(cx=Ct.append("circle").attr("r",10).attr("cx",0).attr("cy",0).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id","visiojs_tempconn").style("visibility","hidden")),ar.attr("stroke-dasharray","5,5"),ar.classed("visiojs_bad_wire",!0),on.on("touchmove.drawline",function(hx){const gx=hx.touches[0];hx.preventDefault();const[fx,dx]=wn(gx,on.node());jl(fx,dx,Ct,d,Cn,In,ar,sx,en,Pe$1(on.node()),cn)}),on.on("mousemove.drawline",function(hx){const[gx,fx]=wn(hx,on.node());jl(gx,fx,Ct,d,Cn,In,ar,sx,en,Pe$1(on.node()),cn)}),X$1(window).on("keydown.endline",hx=>{hx.key==="Escape"&&(sx.shapeID=null,sx.connectorID=null,c(hx,d,Ct,sx))}),on.on("dblclick.endline",hx=>{c(hx,d,Ct,sx)}),on.on("click.endline",hx=>{if(sx.shapeID!=null&&!(sx.connectorID==s&&sx.shapeID==a))c(hx,d,Ct,sx),dn(cn);else{const[gx,fx]=wn(hx,on.node()),dx=Pe$1(on.node()),mx=en([(gx-dx.x)/dx.k,(fx-dx.y)/dx.k]);d.push(mx)}}),on.on("touchend.endline",hx=>{const gx=hx.changedTouches[0];if(console.log("touch endline"),sx.shapeID!=null)console.log("single click + hover"),c(hx,d,Ct,sx),dn(cn);else{const[fx,dx]=wn(gx,on.node()),mx=Pe$1(on.node());d.push(en([(fx-mx.x)/mx.k,(dx-mx.y)/mx.k])),console.log("add a point",d),cx.on("touchstart",function(vx){console.log("cvb mousedown on connector",a,s),sf({prevEvent:vx,group:n,shapeID:a,connectorID:s,x:l,y:u,endLine:c,wireMidPoints:d,lineGroup:Ct,line:ar,snapAndClipToGrid:en,wireStart:tn,svg:on,initialState:cn,stateChanged:dn})})}})},G7={clickStartX:0,clickStartY:0,objStartX:0,objStartY:0,shapeDom:null,shapeID:null},Z7=(t,n,a,s,l)=>()=>Sh().clickDistance(10).on("start",function(u){t.clickStartX=u.x,t.clickStartY=u.y,t.shapeDom=X$1(this),t.shapeID=Number(t.shapeDom.attr("id").split("_")[1]),[t.objStartX,t.objStartY]=kc(t.shapeDom)}).on("end",function(u){const c=u.x-t.clickStartX,d=u.y-t.clickStartY,[Ct,ar]=n([t.objStartX+c,t.objStartY+d]);Ct==t.objStartX&&ar==t.objStartY||(s({shapeID:t.shapeID,save:!0}),l(a))}).on("drag",function(u){const c=u.x-t.clickStartX,d=u.y-t.clickStartY,[Ct,ar]=n([t.objStartX+c,t.objStartY+d]);if(Ct==a.shapes[t.shapeID].x&&ar==a.shapes[t.shapeID].y)return;const en={x:Ct-a.shapes[t.shapeID].x,y:ar-a.shapes[t.shapeID].y},tn=Ta(t.shapeDom.attr("transform"));t.shapeDom.attr("transform",`translate(${Ct}, ${ar}) rotate(${tn})`);const on=[];for(const cn in a.shapes[t.shapeID].connectors)on.push(cf(t.shapeDom,t.shapeID,cn,a,n));a.shapes[t.shapeID].x=Ct,a.shapes[t.shapeID].y=ar,s({shapeID:t.shapeID,origXY:on,delta:en})});async function su({id:t,data:n,selectIt:a=!1,selected:s,wireStart:l,snapAndClipToGrid:u,initialState:c,redrawWireOnShape:d,stateChanged:Ct,drawWire:ar}){const en=`shape_${t}`,tn=X$1("#visiojs_shapes");X$1("#visiojs_top");var on=X$1(`#${en}`);if(n===null){on.remove();return}const cn=n.image,dn=n.x,Cn=n.y,In=n.connectors===void 0?[]:n.connectors,ix=n.rotation,ax=n.label,ox=n.fixed===void 0?!1:n.fixed,sx=n.offset===void 0?[0,0]:n.offset;if(on.empty()){on=tn.append("g").attr("id",en).attr("class","visiojs_shape visiojs_selected_outline");const hx=on.append("g").attr("id",`${en}_image`);var ux;if(cn.endsWith(".svg")){const gx=(await $0(cn)).documentElement;hx.node().appendChild(gx),ux=X$1(gx)}else ux=hx.append("image").attr("href",cn);hx.attr("transform",`translate(${sx[0]}, ${sx[1]})`),n.width&&ux.attr("width",n.width),n.height&&ux.attr("height",n.height),a&&s.push(en),Q7(on,t,c,d,a,Ct),ax&&on.append("text").attr("stroke","none").attr("x",ax.x).attr("y",ax.y).text(ax.text).attr("class",`visiojs_label ${ax.class}`);for(let gx=0;gx<In.length;gx++){const fx=In[gx];K7({x:fx[0],y:fx[1],group:on,shapeID:t,connectorID:gx,wireStart:l,snapAndClipToGrid:u,initialState:c,drawWire:ar,stateChanged:Ct})}ox===!1&&(on.style("cursor","pointer"),on.on("mouseover",function(){l.shapeID===null&&(s.includes(en)||ux.attr("opacity",.5))}),on.on("mouseout",function(){ux.attr("opacity",1)}),on.on("click",function(gx){if(l.shapeID!==null)return;gx.stopPropagation();const fx=document.elementsFromPoint(gx.x,gx.y);for(const mx of fx)if(mx.classList.contains("visiojs_wire")){mx.parentElement.dispatchEvent(new MouseEvent("click",gx));return}ux.attr("opacity",1);const dx=s.indexOf(en);dx===-1?(s.push(en),on.selectAll(".visiojs_hover_rect").style("opacity","1"),on.selectAll(".visiojs_hover_rotate").style("visibility",null)):(s.splice(dx,1),on.selectAll(".visiojs_hover_rect").style("opacity","0"),on.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),ux.attr("opacity",.5))}),on.call(Z7(G7,u,c,d,Ct)()))}var cx="";ix&&(cx=`rotate(${ix})`),on.attr("transform",`translate(${dn}, ${Cn}) ${cx}`)}function Q7(t,n,a,s,l,u){const c=t.node().getBBox(),d=t.append("rect").attr("x",c.x-5).attr("y",c.y-5).attr("width",c.width+10).attr("height",c.height+10).attr("class","visiojs_hover_rect");l||d.style("opacity","0");const[Ct,ar]=[c.x+c.width+10,c.y-10],en=t.append("g").attr("width","16").attr("height","16").attr("fill","currentColor").attr("viewBox","0 0 16 16").attr("transform",`translate(${Ct}, ${ar})`).attr("class","visiojs_hover_rotate");l||en.style("visibility","hidden"),en.append("path").attr("fill-rule","evenodd").attr("d","M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"),en.append("path").attr("d","M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"),en.append("rect").attr("x","0").attr("y","0").attr("width","16").attr("height","16").attr("fill","transparent"),en.on("click",function(tn){tn.stopPropagation();const on=Ta(t.attr("transform")),[cn,dn]=kc(t),Cn=(on+90)%360;t.attr("transform",`translate(${cn}, ${dn}) rotate(${Cn})`),a.shapes[t.attr("id").split("_")[1]].rotation=Cn,s({shapeID:n,save:!0}),u(a)})}const K7=({x:t,y:n,group:a,shapeID:s,connectorID:l,wireStart:u,snapAndClipToGrid:c,initialState:d,drawWire:Ct,stateChanged:ar})=>{const en=X$1("#visiojs_top");function tn(on,cn,dn,Cn){if(u.shapeID!==null){if(on.stopPropagation(),X$1("#visiojs_tempconn").remove(),en.on("mousemove.drawline",null),en.on("dblclick.endline",null),en.on("click.endline",null),X$1(window).on(".endline",null),Cn.shapeID===null)dn.remove();else if(Cn.shapeID==u.shapeID&&Cn.connectorID==u.connectorID)dn.remove();else{const ix={start:{...u},end:{...Cn},points:cn};var In=d.wires.indexOf(null);In==-1?(In=d.wires.length,d.wires.push(ix)):d.wires[In]=ix,dn.remove();const ax=Ct(In);d.wires[In].points=ax}u.shapeID=null,u.connectorID=null}}a.append("circle").attr("r",8).attr("cx",t).attr("cy",n).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id",`connector_${s}_${l}`).on("mouseover",function(){X$1(this).transition().duration(200).attr("r",16)}).on("mouseout",function(){X$1(this).transition().duration(200).attr("r",8)}).on("mousedown",function(on){X$1(this).transition().duration(200).attr("r",8),u.shapeID===null&&sf({prevEvent:on,group:a,shapeID:s,connectorID:l,x:t,y:n,endLine:tn,snapAndClipToGrid:c,wireStart:u,svg:en,initialState:d,stateChanged:ar})}).on("touchstart",function(on){X$1(this).transition().duration(200).attr("r",8),u.shapeID===null&&sf({prevEvent:on,group:a,shapeID:s,connectorID:l,x:t,y:n,endLine:tn,snapAndClipToGrid:c,wireStart:u,svg:en,initialState:d,stateChanged:ar})})};function J7(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lu,Wl;function nx(){return Wl||(Wl=1,lu=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,l,u;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(l=s;l--!==0;)if(!t(n[l],a[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(u=Object.keys(n),s=u.length,s!==Object.keys(a).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;for(l=s;l--!==0;){var c=u[l];if(!t(n[c],a[c]))return!1}return!0}return n!==n&&a!==a}),lu}var tx=nx();const Ci=J7(tx),rx=({initialState:t,stateChanged:n=()=>{}})=>{var a,s,l,u={connectorID:null,shapeID:null},c=[],d,Ct,ar,en,tn,on=!1;t=j7(t);const cn={...t.settings};function dn(fx=!0){tn=cn.gridSize,a=X$1("#visiojs_top"),d=X$1("#visiojs_wholeThing"),d.empty()&&(d=a.append("g").attr("id","visiojs_wholeThing")),a.on("."),a.attr("tabindex",0),a.on("click",function(){In()}),a.on("dragover",function(Tx){Tx.preventDefault()}),a.on("drop",function(Tx){Tx.preventDefault();const Cx=Tx.dataTransfer.getData("application/json"),Mx=JSON.parse(Cx),Ax=wn(Tx,d.node()),[Nx,Ux]=Ax;var[Rx,Ox]=Cn([Nx,Ux]);cx(Mx,Rx,Ox)}),X$1(window).on("keydown.delete",Tx=>{(Tx.key==="Backspace"||Tx.key==="Delete")&&document.activeElement===a.node()&&(console.log("deleting"),hx())}),X$1(window).on("resize",function(){dn(!1)});const dx=a.node().getBoundingClientRect();s=Math.round(dx.width/tn)*tn,l=Math.round(dx.height/tn)*tn;var mx=X$1("#visiojs_svgDefs");if(mx.empty()){mx=a.append("defs").attr("id","visiojs_svgDefs");const Tx=mx.append("linearGradient").attr("id","visiojs_connector_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);Tx.append("stop").attr("offset","0%").attr("stop-color","#4f6870"),Tx.append("stop").attr("offset","100%").attr("stop-color","#678792");const Cx=mx.append("linearGradient").attr("id","visiojs_elbow_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);Cx.append("stop").attr("offset","0%").attr("stop-color","#cacaca"),Cx.append("stop").attr("offset","100%").attr("stop-color","#fdfdfd")}ox(d,cn.width,cn.height,tn),Ct=X$1("#visiojs_wires"),Ct.empty()&&(Ct=d.append("g").attr("id","visiojs_wires")),ar=X$1("#visiojs_shapes"),ar.empty()&&(ar=d.append("g").attr("id","visiojs_shapes"));const vx=Math.min(s/cn.width,l/cn.height),bx=xg().scaleExtent([vx,cn.maxZoom]).clickDistance(10).translateExtent([[-cn.width/2,-cn.height/2],[cn.width/2,cn.height/2]]).on("zoom",Tx=>d.attr("transform",Tx.transform)),xx=li.translate(s/2,l/2).scale(cn.defaultZoom);a.call(bx.transform,xx),ax(),fx&&n(t);const _x=100,Ex=X$1("#visiojs_toggle_button").empty()?a.append("foreignObject").attr("y",5).attr("width",_x).attr("height",50).attr("id","visiojs_toggle_button_foreign").append("xhtml:body").style("margin","0px").style("background","transparent").append("button").attr("id","visiojs_toggle_button").text("Enable Zoom"):X$1("#visiojs_toggle_button");X$1("#visiojs_toggle_button_foreign").attr("x",dx.width-_x-3),Ex.on("click",function(){on?(a.on(".zoom",null),Ex.text("Enable Zoom"),Ex.attr("class",null),on=!1):(a.call(bx).on("dblclick.zoom",null),Ex.text("Disable Zoom"),Ex.attr("class","visiojs_toggle_button_active"),on=!0)})}function Cn(fx,dx=!0){return dx?[Math.min(Math.max(Math.round(fx[0]/tn)*tn,-cn.width/2),cn.width/2),Math.min(Math.max(Math.round(fx[1]/tn)*tn,-cn.height/2),cn.height/2)]:[Math.round(fx[0]/tn)*tn,Math.round(fx[1]/tn)*tn]}function In(){d.selectAll(".visiojs_hover_rect").style("opacity","0"),d.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),d.selectAll(".visiojs_selected_wire").classed("visiojs_selected_wire",!1),d.selectAll(".visiojs_selected_connector").classed("visiojs_selected_connector",!1),d.selectAll(".visiojs_elbow").remove(),c.length=0,X$1("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")}function ix(fx){const dx=Ct;var mx=t.wires[fx];if(!mx)return;var vx=X$1(`#shape_${mx.start.shapeID}`);if(vx.empty()){console.log("ERROR - cannot find shapeID",mx.start.shapeID);return}var bx=X$1(`#shape_${mx.end.shapeID}`);if(bx.empty()){console.log("ERROR - cannot find shapeID",mx.end.shapeID);return}const xx=`wire_${fx}`;var _x=X$1(`#${xx}`),Ex;_x.empty()?(_x=dx.insert("g").attr("id",`wire_${fx}`),Ex=_x.insert("path").attr("class","visiojs_wire")):Ex=_x.select("path");const Tx=cf(vx,mx.start.shapeID,mx.start.connectorID,t,Cn),Cx=cf(bx,mx.end.shapeID,mx.end.connectorID,t,Cn),Mx=[Tx,...mx.points,Cx],Ax=zo("manhattan",Mx,Cn,_x,null,Nx=>ux(Nx),fx);return _x.on("click",function(Nx){if(Nx.stopPropagation(),u.shapeID!==null)return;var Ux=d.select(`#connector_${mx.start.shapeID}_${mx.start.connectorID}`),Rx=d.select(`#connector_${mx.end.shapeID}_${mx.end.connectorID}`);X$1("#visiojs_shapes").style("pointer-events","none").style("opacity","0.9");const Ox=[Tx,...mx.points,Cx];zo("manhattan",Ox,Cn,_x,!0,$x=>ux($x),fx),Ex.classed("visiojs_selected_wire",!0),_x.raise(),Ux.classed("visiojs_selected_connector",!0),Rx.classed("visiojs_selected_connector",!0);const Px=c.indexOf(xx);Px===-1?c.push(xx):(c.splice(Px,1),Ex.classed("visiojs_selected_wire",!1),Ux.classed("visiojs_selected_connector",!1),Rx.classed("visiojs_selected_connector",!1),_x.lower(),en.lower(),_x.selectAll(".visiojs_elbow").remove(),c.filter($x=>$x.startsWith("wire")).length==0&&(console.log("re-enabling pointer events on shapes"),X$1("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")))}),Ax}function ax(){for(let fx=0;fx<t.shapes.length;fx++){const dx=t.shapes[fx];dx&&su({id:fx,data:dx,selected:c,wireStart:u,snapAndClipToGrid:Cn,initialState:t,redrawWireOnShape:sx,stateChanged:n,drawWire:ix})}for(let fx=0;fx<t.wires.length;fx++)ix(fx)}function ox(fx,dx,mx,vx){if(!X$1("#visiojs_grid").empty())return;en=fx.append("g").attr("id","visiojs_grid");const bx=[];for(let xx=-dx/2;xx<dx/2;xx+=vx)bx.push({x1:xx,y1:-mx/2,x2:xx,y2:mx/2});for(let xx=-mx/2;xx<mx/2;xx+=vx)bx.push({x1:-dx/2,y1:xx,x2:dx/2,y2:xx});en.selectAll("line.grid-line").data(bx).join("line").attr("class","visiojs_grid_line").attr("x1",xx=>xx.x1).attr("y1",xx=>xx.y1).attr("x2",xx=>xx.x2).attr("y2",xx=>xx.y2)}function sx({shapeID:fx,save:dx=!1,origXY:mx=[],delta:vx={}}){for(const xx in t.wires){if(!t.wires[xx])continue;const _x=t.wires[xx].start.shapeID==fx,Ex=t.wires[xx].end.shapeID==fx;var bx=t.wires[xx].start.connectorID;if(Ex&&(bx=t.wires[xx].end.connectorID),_x||Ex){if(mx.length>0&&t.wires[xx].points.length>0){const Cx=mx[bx],Mx=t.wires[xx].points[0],Ax=t.wires[xx].points[t.wires[xx].points.length-1];_x?Cx[0]==Mx[0]?Mx[0]+=vx.x:Mx[1]+=vx.y:Ex&&(Cx[0]==Ax[0]?Ax[0]+=vx.x:Ax[1]+=vx.y)}const Tx=ix(xx);dx&&(t.wires[xx].points=Tx)}}}const ux=fx=>{W7({d3:H7,snapAndClipToGrid:Cn,elbSvg:fx.elbow,wireID:fx.wireID,initialState:t,elbowID:fx.elbowID,redrawWire:fx.redrawWire,start:fx.start,end:fx.end,stateChanged:n})};function cx(fx,dx=null,mx=null){In(),a.node().focus();const vx=JSON.parse(JSON.stringify(fx));dx!==null&&(vx.x=dx),mx!==null&&(vx.y=mx);var bx=t.shapes.indexOf(null);bx==-1?(bx=t.shapes.length,t.shapes.push(vx)):t.shapes[bx]=vx,n(t),su({id:bx,data:vx,selected:c,selectIt:!0,wireStart:u,snapAndClipToGrid:Cn,initialState:t,redrawWireOnShape:sx,stateChanged:n,drawWire:ix})}function hx(){for(const fx of c){X$1(`#${fx}`).remove();const dx=fx.split("_");dx[0]=="shape"?(t.shapes[dx[1]]=null,t.wires=t.wires.map((mx,vx)=>mx&&(mx.start.shapeID==dx[1]||mx.end.shapeID==dx[1]?(X$1(`#wire_${vx}`).remove(),null):mx))):dx[0]=="wire"&&(t.wires[dx[1]]=null)}n(t),In()}function gx(fx){In();const dx=JSON.parse(JSON.stringify(t));if(t.shapes=JSON.parse(JSON.stringify(fx.shapes)),t.wires=JSON.parse(JSON.stringify(fx.wires)),Ci(dx.shapes,t.shapes))if(Ci(dx.wires,t.wires))console.log("it's all the same");else{if(t.wires.length<dx.wires.length){X$1(`#wire_${dx.wires.length-1}`).remove();return}for(const vx in t.wires)Ci(dx.wires[vx],t.wires[vx])||ix(vx)}else{console.log("shapes are different");var mx=!1;if(t.shapes.length<dx.shapes.length){X$1(`#shape_${dx.shapes.length-1}`).remove();return}for(const vx in t.shapes)Ci(dx.shapes[vx],t.shapes[vx])||(console.log("delta in id ",vx),mx=!0,su({id:vx,data:t.shapes[vx],selected:c,wireStart:u,snapAndClipToGrid:Cn,initialState:t,redrawWireOnShape:sx,stateChanged:n,drawWire:ix}),sx({shapeID:vx}));if(mx)return;console.log("ERROR - some shape change but not sure what was changed?")}}return{addShape:cx,deleteSelected:hx,redraw:gx,init:dn}};function elementMapper(t){const n=t.image.split(".")[0],a=t.label?t.label.text:"";return t.image=="vin.svg"?{type:"vin",name:"vin"}:t.image=="iin.svg"?{type:"iin",name:"iin"}:t.image=="gnd.svg"?{type:"gnd",name:"gnd"}:{type:n,name:a}}function createNodeMap(t,n){var a=[];const s={},l={};var u=[];t.shapes.map(In=>{if(In!==null&&"connectors"in In){var ix=elementMapper(In);s[ix.name]={type:ix.type,portConnections:Array(In.connectors.length).fill(!1)}}});var c,d,Ct,ar=null,en=[];for(const In of t.wires){if(In==null)continue;const ix=elementMapper(t.shapes[In.start.shapeID]),ax=elementMapper(t.shapes[In.end.shapeID]);c={...ix,port:In.start.connectorID},d={...ax,port:In.end.connectorID},s[ix.name].portConnections[In.start.connectorID]=!0,s[ax.name].portConnections[In.end.connectorID]=!0,en.push([c,d])}var tn;do{tn=!1;e:for(Ct in en)for(const In in en[Ct]){const ix=en[Ct][In];for(const ax in en){if(ax==Ct)continue;const ox=en[ax];for(const sx in ox){const ux=ox[sx];if(ix.name==ux.name&&ix.port==ux.port){en[ax]=[...en[ax],...en[Ct]],en.splice(Ct,1),tn=!0;break e}}}}}while(tn);e:for(const In in en){const ix=en[In];for(const ax of ix)if(ax.type=="gnd"){en.splice(In,1);break e}}for(const In in en)for(let ix=0;ix<en[In].length;ix++){const ax=en[In][ix];for(let ox=ix+1;ox<en[In].length;ox++){const sx=en[In][ox];ax.name==sx.name&&ax.port==sx.port&&(en[In].splice(ox,1),ox--)}}a=en;for(const[In,ix]of Object.entries(s))if(ix.portConnections.includes(!1))for(const ax in a)a[ax]=a[ax].filter(ox=>ox.name!=In);for(const In in a)for(const ix of a[In])(ix.type=="vin"||ix.type=="iin")&&(ar=In);if(ar!==null){for(var on=[ar],cn=a[ar].map(In=>In.name),dn,Cn=0;Cn<cn.length;Cn++)for(const In in a)if(!on.includes(In)){dn=!1;for(const ix of a[In])cn.includes(ix.name)&&(dn||on.push(In),dn=!0,cn.push(...a[In].map(ax=>ax.name).filter(ax=>!cn.includes(ax))))}u=on.map(In=>a[In]),u.forEach((In,ix)=>{In.forEach(ax=>{ax.name in l||(l[ax.name]={ports:Array(n[ax.type].connectors.length).fill(null),type:ax.type}),l[ax.name].ports[ax.port]=ix})})}return{nodeMap:u,components:s,fullyConnectedComponents:l}}function r(t){var n,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(a=r(t[n]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function clsx(){for(var t,n,a=0,s="",l=arguments.length;a<l;a++)(t=arguments[a])&&(n=r(t))&&(s&&(s+=" "),s+=n);return s}function resolveProps(t,n,a=!1){const s={...n};for(const l in t)if(Object.prototype.hasOwnProperty.call(t,l)){const u=l;if(u==="components"||u==="slots")s[u]={...t[u],...s[u]};else if(u==="componentsProps"||u==="slotProps"){const c=t[u],d=n[u];if(!d)s[u]=c||{};else if(!c)s[u]=d;else{s[u]={...d};for(const Ct in c)if(Object.prototype.hasOwnProperty.call(c,Ct)){const ar=Ct;s[u][ar]=resolveProps(c[ar],d[ar],a)}}}else u==="className"&&a&&n.className?s.className=clsx(t?.className,n?.className):u==="style"&&a&&n.style?s.style={...t?.style,...n?.style}:s[u]===void 0&&(s[u]=t[u])}return s}function composeClasses(t,n,a=void 0){const s={};for(const l in t){const u=t[l];let c="",d=!0;for(let Ct=0;Ct<u.length;Ct+=1){const ar=u[Ct];ar&&(c+=(d===!0?"":" ")+n(ar),d=!1,a&&a[ar]&&(c+=" "+a[ar]))}s[l]=c}return s}const defaultGenerator=t=>t,createClassNameGenerator=()=>{let t=defaultGenerator;return{configure(n){t=n},generate(n){return t(n)},reset(){t=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function formatMuiErrorMessage(t,...n){const a=new URL(`https://mui.com/production-error/?code=${t}`);return n.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${t}; visit ${a} for the full message.`}function capitalize(t){if(typeof t!="string")throw new Error(formatMuiErrorMessage(7));return t.charAt(0).toUpperCase()+t.slice(1)}function createChainedFunction(...t){return t.reduce((n,a)=>a==null?n:function(...l){n.apply(this,l),a.apply(this,l)},()=>{})}var reactIs$1={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),Ct=Symbol.for("react.suspense"),ar=Symbol.for("react.suspense_list"),en=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),on=Symbol.for("react.view_transition"),cn=Symbol.for("react.client.reference");function dn(Cn){if(typeof Cn=="object"&&Cn!==null){var In=Cn.$$typeof;switch(In){case t:switch(Cn=Cn.type,Cn){case a:case l:case s:case Ct:case ar:case on:return Cn;default:switch(Cn=Cn&&Cn.$$typeof,Cn){case c:case d:case tn:case en:return Cn;case u:return Cn;default:return In}}case n:return In}}}return reactIs_production.ContextConsumer=u,reactIs_production.ContextProvider=c,reactIs_production.Element=t,reactIs_production.ForwardRef=d,reactIs_production.Fragment=a,reactIs_production.Lazy=tn,reactIs_production.Memo=en,reactIs_production.Portal=n,reactIs_production.Profiler=l,reactIs_production.StrictMode=s,reactIs_production.Suspense=Ct,reactIs_production.SuspenseList=ar,reactIs_production.isContextConsumer=function(Cn){return dn(Cn)===u},reactIs_production.isContextProvider=function(Cn){return dn(Cn)===c},reactIs_production.isElement=function(Cn){return typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===t},reactIs_production.isForwardRef=function(Cn){return dn(Cn)===d},reactIs_production.isFragment=function(Cn){return dn(Cn)===a},reactIs_production.isLazy=function(Cn){return dn(Cn)===tn},reactIs_production.isMemo=function(Cn){return dn(Cn)===en},reactIs_production.isPortal=function(Cn){return dn(Cn)===n},reactIs_production.isProfiler=function(Cn){return dn(Cn)===l},reactIs_production.isStrictMode=function(Cn){return dn(Cn)===s},reactIs_production.isSuspense=function(Cn){return dn(Cn)===Ct},reactIs_production.isSuspenseList=function(Cn){return dn(Cn)===ar},reactIs_production.isValidElementType=function(Cn){return typeof Cn=="string"||typeof Cn=="function"||Cn===a||Cn===l||Cn===s||Cn===Ct||Cn===ar||typeof Cn=="object"&&Cn!==null&&(Cn.$$typeof===tn||Cn.$$typeof===en||Cn.$$typeof===c||Cn.$$typeof===u||Cn.$$typeof===d||Cn.$$typeof===cn||Cn.getModuleId!==void 0)},reactIs_production.typeOf=dn,reactIs_production}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production()),reactIs$1.exports}var reactIsExports=requireReactIs$1();function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function deepClone(t){if(reactExports.isValidElement(t)||reactIsExports.isValidElementType(t)||!isPlainObject(t))return t;const n={};return Object.keys(t).forEach(a=>{n[a]=deepClone(t[a])}),n}function deepmerge(t,n,a={clone:!0}){const s=a.clone?{...t}:t;return isPlainObject(t)&&isPlainObject(n)&&Object.keys(n).forEach(l=>{reactExports.isValidElement(n[l])||reactIsExports.isValidElementType(n[l])?s[l]=n[l]:isPlainObject(n[l])&&Object.prototype.hasOwnProperty.call(t,l)&&isPlainObject(t[l])?s[l]=deepmerge(t[l],n[l],a):a.clone?s[l]=isPlainObject(n[l])?deepClone(n[l]):n[l]:s[l]=n[l]}),s}function merge$1(t,n){return n?deepmerge(t,n,{clone:!1}):t}function sortContainerQueries(t,n){if(!t.containerQueries)return n;const a=Object.keys(n).filter(s=>s.startsWith("@container")).sort((s,l)=>{const u=/min-width:\s*([0-9.]+)/;return+(s.match(u)?.[1]||0)-+(l.match(u)?.[1]||0)});return a.length?a.reduce((s,l)=>{const u=n[l];return delete s[l],s[l]=u,s},{...n}):n}function isCqShorthand(t,n){return n==="@"||n.startsWith("@")&&(t.some(a=>n.startsWith(`@${a}`))||!!n.match(/^@\d/))}function getContainerQuery(t,n){const a=n.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,l]=a,u=Number.isNaN(+s)?s||0:+s;return t.containerQueries(l).up(u)}function cssContainerQueries(t){const n=(u,c)=>u.replace("@media",c?`@container ${c}`:"@container");function a(u,c){u.up=(...d)=>n(t.breakpoints.up(...d),c),u.down=(...d)=>n(t.breakpoints.down(...d),c),u.between=(...d)=>n(t.breakpoints.between(...d),c),u.only=(...d)=>n(t.breakpoints.only(...d),c),u.not=(...d)=>{const Ct=n(t.breakpoints.not(...d),c);return Ct.includes("not all and")?Ct.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):Ct}}const s={},l=u=>(a(s,u),s);return a(l),{...t,containerQueries:l}}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${values$1[t]}px)`},defaultContainerQueries={containerQueries:t=>({up:n=>{let a=typeof n=="number"?n:values$1[n]||n;return typeof a=="number"&&(a=`${a}px`),t?`@container ${t} (min-width:${a})`:`@container (min-width:${a})`}})};function handleBreakpoints(t,n,a){const s=t.theme||{};if(Array.isArray(n)){const u=s.breakpoints||defaultBreakpoints;return n.reduce((c,d,Ct)=>(c[u.up(u.keys[Ct])]=a(n[Ct]),c),{})}if(typeof n=="object"){const u=s.breakpoints||defaultBreakpoints;return Object.keys(n).reduce((c,d)=>{if(isCqShorthand(u.keys,d)){const Ct=getContainerQuery(s.containerQueries?s:defaultContainerQueries,d);Ct&&(c[Ct]=a(n[d],d))}else if(Object.keys(u.values||values$1).includes(d)){const Ct=u.up(d);c[Ct]=a(n[d],d)}else{const Ct=d;c[Ct]=n[Ct]}return c},{})}return a(n)}function createEmptyBreakpointObject(t={}){return t.keys?.reduce((a,s)=>{const l=t.up(s);return a[l]={},a},{})||{}}function removeUnusedBreakpoints(t,n){return t.reduce((a,s)=>{const l=a[s];return(!l||Object.keys(l).length===0)&&delete a[s],a},n)}function mergeBreakpointsInOrder(t,...n){const a=createEmptyBreakpointObject(t),s=[a,...n].reduce((l,u)=>deepmerge(l,u),{});return removeUnusedBreakpoints(Object.keys(a),s)}function computeBreakpointsBase(t,n){if(typeof t!="object")return{};const a={},s=Object.keys(n);return Array.isArray(t)?s.forEach((l,u)=>{u<t.length&&(a[l]=!0)}):s.forEach(l=>{t[l]!=null&&(a[l]=!0)}),a}function resolveBreakpointValues({values:t,breakpoints:n,base:a}){const s=a||computeBreakpointsBase(t,n),l=Object.keys(s);if(l.length===0)return t;let u;return l.reduce((c,d,Ct)=>(Array.isArray(t)?(c[d]=t[Ct]!=null?t[Ct]:t[u],u=Ct):typeof t=="object"?(c[d]=t[d]!=null?t[d]:t[u],u=d):c[d]=t,c),{})}function getPath(t,n,a=!0){if(!n||typeof n!="string")return null;if(t&&t.vars&&a){const s=`vars.${n}`.split(".").reduce((l,u)=>l&&l[u]?l[u]:null,t);if(s!=null)return s}return n.split(".").reduce((s,l)=>s&&s[l]!=null?s[l]:null,t)}function getStyleValue$1(t,n,a,s=a){let l;return typeof t=="function"?l=t(a):Array.isArray(t)?l=t[a]||s:l=getPath(t,a)||s,n&&(l=n(l,s,t)),l}function style$2(t){const{prop:n,cssProperty:a=t.prop,themeKey:s,transform:l}=t,u=c=>{if(c[n]==null)return null;const d=c[n],Ct=c.theme,ar=getPath(Ct,s)||{};return handleBreakpoints(c,d,tn=>{let on=getStyleValue$1(ar,l,tn);return tn===on&&typeof tn=="string"&&(on=getStyleValue$1(ar,l,`${n}${tn==="default"?"":capitalize(tn)}`,tn)),a===!1?on:{[a]:on}})};return u.propTypes={},u.filterProps=[n],u}function memoize$1(t){const n={};return a=>(n[a]===void 0&&(n[a]=t(a)),n[a])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$1(t=>{if(t.length>2)if(aliases[t])t=aliases[t];else return[t];const[n,a]=t.split(""),s=properties[n],l=directions[a]||"";return Array.isArray(l)?l.map(u=>s+u):[s+l]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(t,n,a,s){const l=getPath(t,n,!0)??a;return typeof l=="number"||typeof l=="string"?u=>typeof u=="string"?u:typeof l=="string"?l.startsWith("var(")&&u===0?0:l.startsWith("var(")&&u===1?l:`calc(${u} * ${l})`:l*u:Array.isArray(l)?u=>{if(typeof u=="string")return u;const c=Math.abs(u),d=l[c];return u>=0?d:typeof d=="number"?-d:typeof d=="string"&&d.startsWith("var(")?`calc(-1 * ${d})`:`-${d}`}:typeof l=="function"?l:()=>{}}function createUnarySpacing(t){return createUnaryUnit(t,"spacing",8)}function getValue(t,n){return typeof n=="string"||n==null?n:t(n)}function getStyleFromPropValue(t,n){return a=>t.reduce((s,l)=>(s[l]=getValue(n,a),s),{})}function resolveCssProperty(t,n,a,s){if(!n.includes(a))return null;const l=getCssProperties(a),u=getStyleFromPropValue(l,s),c=t[a];return handleBreakpoints(t,c,u)}function style$1(t,n){const a=createUnarySpacing(t.theme);return Object.keys(t).map(s=>resolveCssProperty(t,n,s,a)).reduce(merge$1,{})}function margin(t){return style$1(t,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(t){return style$1(t,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function compose(...t){const n=t.reduce((s,l)=>(l.filterProps.forEach(u=>{s[u]=l}),s),{}),a=s=>Object.keys(s).reduce((l,u)=>n[u]?merge$1(l,n[u](s)):l,{});return a.propTypes={},a.filterProps=t.reduce((s,l)=>s.concat(l.filterProps),[]),a}function borderTransform(t){return typeof t!="number"?t:`${t}px solid`}function createBorderStyle(t,n){return style$2({prop:t,themeKey:"borders",transform:n})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const n=createUnaryUnit(t.theme,"shape.borderRadius",4),a=s=>({borderRadius:getValue(n,s)});return handleBreakpoints(t,t.borderRadius,a)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=t=>{if(t.gap!==void 0&&t.gap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({gap:getValue(n,s)});return handleBreakpoints(t,t.gap,a)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({columnGap:getValue(n,s)});return handleBreakpoints(t,t.columnGap,a)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({rowGap:getValue(n,s)});return handleBreakpoints(t,t.rowGap,a)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(t,n){return n==="grey"?n:t}const color$1=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor$1=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor$1);function sizingTransform(t){return t<=1&&t!==0?`${t*100}%`:t}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const n=a=>{const s=t.theme?.breakpoints?.values?.[a]||values$1[a];return s?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:sizingTransform(a)}};return handleBreakpoints(t,t.maxWidth,n)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...t){const n=t.reduce((s,l)=>s.concat(Object.keys(l)),[]),a=new Set(n);return t.every(s=>a.size===Object.keys(s).length)}function callIfFn(t,n){return typeof t=="function"?t(n):t}function unstable_createStyleFunctionSx(){function t(a,s,l,u){const c={[a]:s,theme:l},d=u[a];if(!d)return{[a]:s};const{cssProperty:Ct=a,themeKey:ar,transform:en,style:tn}=d;if(s==null)return null;if(ar==="typography"&&s==="inherit")return{[a]:s};const on=getPath(l,ar)||{};return tn?tn(c):handleBreakpoints(c,s,dn=>{let Cn=getStyleValue$1(on,en,dn);return dn===Cn&&typeof dn=="string"&&(Cn=getStyleValue$1(on,en,`${a}${dn==="default"?"":capitalize(dn)}`,dn)),Ct===!1?Cn:{[Ct]:Cn}})}function n(a){const{sx:s,theme:l={},nested:u}=a||{};if(!s)return null;const c=l.unstable_sxConfig??defaultSxConfig;function d(Ct){let ar=Ct;if(typeof Ct=="function")ar=Ct(l);else if(typeof Ct!="object")return Ct;if(!ar)return null;const en=createEmptyBreakpointObject(l.breakpoints),tn=Object.keys(en);let on=en;return Object.keys(ar).forEach(cn=>{const dn=callIfFn(ar[cn],l);if(dn!=null)if(typeof dn=="object")if(c[cn])on=merge$1(on,t(cn,dn,l,c));else{const Cn=handleBreakpoints({theme:l},dn,In=>({[cn]:In}));objectsHaveSameKeys(Cn,dn)?on[cn]=n({sx:dn,theme:l,nested:!0}):on=merge$1(on,Cn)}else on=merge$1(on,t(cn,dn,l,c))}),!u&&l.modularCssLayers?{"@layer sx":sortContainerQueries(l,removeUnusedBreakpoints(tn,on))}:sortContainerQueries(l,removeUnusedBreakpoints(tn,on))}return Array.isArray(s)?s.map(d):d(s)}return n}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const splitProps=t=>{const n={systemProps:{},otherProps:{}},a=t?.theme?.unstable_sxConfig??defaultSxConfig;return Object.keys(t).forEach(s=>{a[s]?n.systemProps[s]=t[s]:n.otherProps[s]=t[s]}),n};function extendSxProp$1(t){const{sx:n,...a}=t,{systemProps:s,otherProps:l}=splitProps(a);let u;return Array.isArray(n)?u=[s,...n]:typeof n=="function"?u=(...c)=>{const d=n(...c);return isPlainObject(d)?{...s,...d}:s}:u={...s,...n},{...l,sx:u}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_extends.apply(null,arguments)}function sheetForTag(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function createStyleElement(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var StyleSheet=(function(){function t(a){var s=this;this._insertTag=function(l){var u;s.tags.length===0?s.insertionPoint?u=s.insertionPoint.nextSibling:s.prepend?u=s.container.firstChild:u=s.before:u=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(l,u),s.tags.push(l)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(s){s.forEach(this._insertTag)},n.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var u=sheetForTag(l);try{u.insertRule(s,u.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(s));this.ctr++},n.flush=function(){this.tags.forEach(function(s){var l;return(l=s.parentNode)==null?void 0:l.removeChild(s)}),this.tags=[],this.ctr=0},t})(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$4=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(t,n){return charat(t,0)^45?(((n<<2^charat(t,0))<<2^charat(t,1))<<2^charat(t,2))<<2^charat(t,3):0}function trim$2(t){return t.trim()}function match(t,n){return(t=n.exec(t))?t[0]:t}function replace(t,n,a){return t.replace(n,a)}function indexof(t,n){return t.indexOf(n)}function charat(t,n){return t.charCodeAt(n)|0}function substr(t,n,a){return t.slice(n,a)}function strlen(t){return t.length}function sizeof(t){return t.length}function append$1(t,n){return n.push(t),t}function combine(t,n){return t.map(n).join("")}var line=1,column=1,length$1=0,position$1=0,character=0,characters="";function node(t,n,a,s,l,u,c){return{value:t,root:n,parent:a,type:s,props:l,children:u,line,column,length:c,return:""}}function copy$2(t,n){return assign(node("",null,null,"",null,null,0),t,{length:-t.length},n)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length$1?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice$1(t,n){return substr(characters,t,n)}function token(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(t){return line=column=1,length$1=strlen(characters=t),position$1=0,[]}function dealloc(t){return characters="",t}function delimit(t){return trim$2(slice$1(position$1-1,delimiter(t===91?t+2:t===40?t+1:t)))}function whitespace(t){for(;(character=peek())&&character<33;)next();return token(t)>2||token(character)>3?"":" "}function escaping(t,n){for(;--n&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(t,caret()+(n<6&&peek()==32&&next()==32))}function delimiter(t){for(;next();)switch(character){case t:return position$1;case 34:case 39:t!==34&&t!==39&&delimiter(character);break;case 40:t===41&&delimiter(t);break;case 92:next();break}return position$1}function commenter(t,n){for(;next()&&t+character!==57;)if(t+character===84&&peek()===47)break;return"/*"+slice$1(n,position$1-1)+"*"+from(t===47?t:next())}function identifier(t){for(;!token(peek());)next();return slice$1(t,position$1)}function compile(t){return dealloc(parse$1("",null,null,null,[""],t=alloc(t),0,[0],t))}function parse$1(t,n,a,s,l,u,c,d,Ct){for(var ar=0,en=0,tn=c,on=0,cn=0,dn=0,Cn=1,In=1,ix=1,ax=0,ox="",sx=l,ux=u,cx=s,hx=ox;In;)switch(dn=ax,ax=next()){case 40:if(dn!=108&&charat(hx,tn-1)==58){indexof(hx+=replace(delimit(ax),"&","&\f"),"&\f")!=-1&&(ix=-1);break}case 34:case 39:case 91:hx+=delimit(ax);break;case 9:case 10:case 13:case 32:hx+=whitespace(dn);break;case 92:hx+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append$1(comment(commenter(next(),caret()),n,a),Ct);break;default:hx+="/"}break;case 123*Cn:d[ar++]=strlen(hx)*ix;case 125*Cn:case 59:case 0:switch(ax){case 0:case 125:In=0;case 59+en:ix==-1&&(hx=replace(hx,/\f/g,"")),cn>0&&strlen(hx)-tn&&append$1(cn>32?declaration(hx+";",s,a,tn-1):declaration(replace(hx," ","")+";",s,a,tn-2),Ct);break;case 59:hx+=";";default:if(append$1(cx=ruleset(hx,n,a,ar,en,l,d,ox,sx=[],ux=[],tn),u),ax===123)if(en===0)parse$1(hx,n,cx,cx,sx,u,tn,d,ux);else switch(on===99&&charat(hx,3)===110?100:on){case 100:case 108:case 109:case 115:parse$1(t,cx,cx,s&&append$1(ruleset(t,cx,cx,0,0,l,d,ox,l,sx=[],tn),ux),l,ux,tn,d,s?sx:ux);break;default:parse$1(hx,cx,cx,cx,[""],ux,0,d,ux)}}ar=en=cn=0,Cn=ix=1,ox=hx="",tn=c;break;case 58:tn=1+strlen(hx),cn=dn;default:if(Cn<1){if(ax==123)--Cn;else if(ax==125&&Cn++==0&&prev()==125)continue}switch(hx+=from(ax),ax*Cn){case 38:ix=en>0?1:(hx+="\f",-1);break;case 44:d[ar++]=(strlen(hx)-1)*ix,ix=1;break;case 64:peek()===45&&(hx+=delimit(next())),on=peek(),en=tn=strlen(ox=hx+=identifier(caret())),ax++;break;case 45:dn===45&&strlen(hx)==2&&(Cn=0)}}return u}function ruleset(t,n,a,s,l,u,c,d,Ct,ar,en){for(var tn=l-1,on=l===0?u:[""],cn=sizeof(on),dn=0,Cn=0,In=0;dn<s;++dn)for(var ix=0,ax=substr(t,tn+1,tn=abs$4(Cn=c[dn])),ox=t;ix<cn;++ix)(ox=trim$2(Cn>0?on[ix]+" "+ax:replace(ax,/&\f/g,on[ix])))&&(Ct[In++]=ox);return node(t,n,a,l===0?RULESET:d,Ct,ar,en)}function comment(t,n,a){return node(t,n,a,COMMENT,from(char()),substr(t,2,-2),0)}function declaration(t,n,a,s){return node(t,n,a,DECLARATION,substr(t,0,s),substr(t,s+1,-1),s)}function serialize(t,n){for(var a="",s=sizeof(t),l=0;l<s;l++)a+=n(t[l],l,t,n)||"";return a}function stringify$1(t,n,a,s){switch(t.type){case LAYER:if(t.children.length)break;case IMPORT:case DECLARATION:return t.return=t.return||t.value;case COMMENT:return"";case KEYFRAMES:return t.return=t.value+"{"+serialize(t.children,s)+"}";case RULESET:t.value=t.props.join(",")}return strlen(a=serialize(t.children,s))?t.return=t.value+"{"+a+"}":""}function middleware(t){var n=sizeof(t);return function(a,s,l,u){for(var c="",d=0;d<n;d++)c+=t[d](a,s,l,u)||"";return c}}function rulesheet(t){return function(n){n.root||(n=n.return)&&t(n)}}function memoize(t){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=t(a)),n[a]}}var identifierWithPointTracking=function(n,a,s){for(var l=0,u=0;l=u,u=peek(),l===38&&u===12&&(a[s]=1),!token(u);)next();return slice$1(n,position$1)},toRules=function(n,a){var s=-1,l=44;do switch(token(l)){case 0:l===38&&peek()===12&&(a[s]=1),n[s]+=identifierWithPointTracking(position$1-1,a,s);break;case 2:n[s]+=delimit(l);break;case 4:if(l===44){n[++s]=peek()===58?"&\f":"",a[s]=n[s].length;break}default:n[s]+=from(l)}while(l=next());return n},getRules=function(n,a){return dealloc(toRules(alloc(n),a))},fixedElements=new WeakMap,compat=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,s=n.parent,l=n.column===s.column&&n.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!fixedElements.get(s))&&!l){fixedElements.set(n,!0);for(var u=[],c=getRules(a,u),d=s.props,Ct=0,ar=0;Ct<c.length;Ct++)for(var en=0;en<d.length;en++,ar++)n.props[ar]=u[Ct]?c[Ct].replace(/&\f/g,d[en]):d[en]+" "+c[Ct]}}},removeLabel=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function prefix(t,n){switch(hash$2(t,n)){case 5103:return WEBKIT+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+t+MOZ+t+MS+t+t;case 6828:case 4268:return WEBKIT+t+MS+t+t;case 6165:return WEBKIT+t+MS+"flex-"+t+t;case 5187:return WEBKIT+t+replace(t,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+t;case 5443:return WEBKIT+t+MS+"flex-item-"+replace(t,/flex-|-self/,"")+t;case 4675:return WEBKIT+t+MS+"flex-line-pack"+replace(t,/align-content|flex-|-self/,"")+t;case 5548:return WEBKIT+t+MS+replace(t,"shrink","negative")+t;case 5292:return WEBKIT+t+MS+replace(t,"basis","preferred-size")+t;case 6060:return WEBKIT+"box-"+replace(t,"-grow","")+WEBKIT+t+MS+replace(t,"grow","positive")+t;case 4554:return WEBKIT+replace(t,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+t;case 6187:return replace(replace(replace(t,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),t,"")+t;case 5495:case 3959:return replace(t,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(t,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+t+t;case 4095:case 3583:case 4068:case 2532:return replace(t,/(.+)-inline(.+)/,WEBKIT+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(t)-1-n>6)switch(charat(t,n+1)){case 109:if(charat(t,n+4)!==45)break;case 102:return replace(t,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~indexof(t,"stretch")?prefix(replace(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(charat(t,n+1)!==115)break;case 6444:switch(charat(t,strlen(t)-3-(~indexof(t,"!important")&&10))){case 107:return replace(t,":",":"+WEBKIT)+t;case 101:return replace(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(t,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+t}break;case 5936:switch(charat(t,n+11)){case 114:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return WEBKIT+t+MS+t+t}return t}var prefixer=function(n,a,s,l){if(n.length>-1&&!n.return)switch(n.type){case DECLARATION:n.return=prefix(n.value,n.length);break;case KEYFRAMES:return serialize([copy$2(n,{value:replace(n.value,"@","@"+WEBKIT)})],l);case RULESET:if(n.length)return combine(n.props,function(u){switch(match(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy$2(n,{props:[replace(u,/:(read-\w+)/,":"+MOZ+"$1")]})],l);case"::placeholder":return serialize([copy$2(n,{props:[replace(u,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$2(n,{props:[replace(u,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$2(n,{props:[replace(u,/:(plac\w+)/,MS+"input-$1")]})],l)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(n){var a=n.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(Cn){var In=Cn.getAttribute("data-emotion");In.indexOf(" ")!==-1&&(document.head.appendChild(Cn),Cn.setAttribute("data-s",""))})}var l=n.stylisPlugins||defaultStylisPlugins,u={},c,d=[];c=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(Cn){for(var In=Cn.getAttribute("data-emotion").split(" "),ix=1;ix<In.length;ix++)u[In[ix]]=!0;d.push(Cn)});var Ct,ar=[compat,removeLabel];{var en,tn=[stringify$1,rulesheet(function(Cn){en.insert(Cn)})],on=middleware(ar.concat(l,tn)),cn=function(In){return serialize(compile(In),on)};Ct=function(In,ix,ax,ox){en=ax,cn(In?In+"{"+ix.styles+"}":ix.styles),ox&&(dn.inserted[ix.name]=!0)}}var dn={key:a,sheet:new StyleSheet({key:a,container:c,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:u,registered:{},insert:Ct};return dn.sheet.hydrate(d),dn},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,l=t?Symbol.for("react.strict_mode"):60108,u=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,Ct=t?Symbol.for("react.async_mode"):60111,ar=t?Symbol.for("react.concurrent_mode"):60111,en=t?Symbol.for("react.forward_ref"):60112,tn=t?Symbol.for("react.suspense"):60113,on=t?Symbol.for("react.suspense_list"):60120,cn=t?Symbol.for("react.memo"):60115,dn=t?Symbol.for("react.lazy"):60116,Cn=t?Symbol.for("react.block"):60121,In=t?Symbol.for("react.fundamental"):60117,ix=t?Symbol.for("react.responder"):60118,ax=t?Symbol.for("react.scope"):60119;function ox(ux){if(typeof ux=="object"&&ux!==null){var cx=ux.$$typeof;switch(cx){case n:switch(ux=ux.type,ux){case Ct:case ar:case s:case u:case l:case tn:return ux;default:switch(ux=ux&&ux.$$typeof,ux){case d:case en:case dn:case cn:case c:return ux;default:return cx}}case a:return cx}}}function sx(ux){return ox(ux)===ar}return reactIs_production_min.AsyncMode=Ct,reactIs_production_min.ConcurrentMode=ar,reactIs_production_min.ContextConsumer=d,reactIs_production_min.ContextProvider=c,reactIs_production_min.Element=n,reactIs_production_min.ForwardRef=en,reactIs_production_min.Fragment=s,reactIs_production_min.Lazy=dn,reactIs_production_min.Memo=cn,reactIs_production_min.Portal=a,reactIs_production_min.Profiler=u,reactIs_production_min.StrictMode=l,reactIs_production_min.Suspense=tn,reactIs_production_min.isAsyncMode=function(ux){return sx(ux)||ox(ux)===Ct},reactIs_production_min.isConcurrentMode=sx,reactIs_production_min.isContextConsumer=function(ux){return ox(ux)===d},reactIs_production_min.isContextProvider=function(ux){return ox(ux)===c},reactIs_production_min.isElement=function(ux){return typeof ux=="object"&&ux!==null&&ux.$$typeof===n},reactIs_production_min.isForwardRef=function(ux){return ox(ux)===en},reactIs_production_min.isFragment=function(ux){return ox(ux)===s},reactIs_production_min.isLazy=function(ux){return ox(ux)===dn},reactIs_production_min.isMemo=function(ux){return ox(ux)===cn},reactIs_production_min.isPortal=function(ux){return ox(ux)===a},reactIs_production_min.isProfiler=function(ux){return ox(ux)===u},reactIs_production_min.isStrictMode=function(ux){return ox(ux)===l},reactIs_production_min.isSuspense=function(ux){return ox(ux)===tn},reactIs_production_min.isValidElementType=function(ux){return typeof ux=="string"||typeof ux=="function"||ux===s||ux===ar||ux===u||ux===l||ux===tn||ux===on||typeof ux=="object"&&ux!==null&&(ux.$$typeof===dn||ux.$$typeof===cn||ux.$$typeof===c||ux.$$typeof===d||ux.$$typeof===en||ux.$$typeof===In||ux.$$typeof===ix||ux.$$typeof===ax||ux.$$typeof===Cn)},reactIs_production_min.typeOf=ox,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var t=requireReactIs(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[t.ForwardRef]=s,u[t.Memo]=l;function c(dn){return t.isMemo(dn)?l:u[dn.$$typeof]||n}var d=Object.defineProperty,Ct=Object.getOwnPropertyNames,ar=Object.getOwnPropertySymbols,en=Object.getOwnPropertyDescriptor,tn=Object.getPrototypeOf,on=Object.prototype;function cn(dn,Cn,In){if(typeof Cn!="string"){if(on){var ix=tn(Cn);ix&&ix!==on&&cn(dn,ix,In)}var ax=Ct(Cn);ar&&(ax=ax.concat(ar(Cn)));for(var ox=c(dn),sx=c(Cn),ux=0;ux<ax.length;++ux){var cx=ax[ux];if(!a[cx]&&!(In&&In[cx])&&!(sx&&sx[cx])&&!(ox&&ox[cx])){var hx=en(Cn,cx);try{d(dn,cx,hx)}catch{}}}}return dn}return hoistNonReactStatics_cjs=cn,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(t,n,a){var s="";return a.split(" ").forEach(function(l){t[l]!==void 0?n.push(t[l]+";"):l&&(s+=l+" ")}),s}var registerStyles=function(n,a,s){var l=n.key+"-"+a.name;(s===!1||isBrowser===!1)&&n.registered[l]===void 0&&(n.registered[l]=a.styles)},insertStyles=function(n,a,s){registerStyles(n,a,s);var l=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var u=a;do n.insert(a===u?"."+l:"",u,n.sheet,!0),u=u.next;while(u!==void 0)}};function murmur2(t){for(var n=0,a,s=0,l=t.length;l>=4;++s,l-=4)a=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(l){case 3:n^=(t.charCodeAt(s+2)&255)<<16;case 2:n^=(t.charCodeAt(s+1)&255)<<8;case 1:n^=t.charCodeAt(s)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(n){return n.charCodeAt(1)===45},isProcessableValue=function(n){return n!=null&&typeof n!="boolean"},processStyleName=memoize(function(t){return isCustomProperty(t)?t:t.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(animationRegex,function(s,l,u){return cursor={name:l,styles:u,next:cursor},l})}return unitlessKeys[n]!==1&&!isCustomProperty(n)&&typeof a=="number"&&a!==0?a+"px":a};function handleInterpolation(t,n,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var l=a;if(l.anim===1)return cursor={name:l.name,styles:l.styles,next:cursor},l.name;var u=a;if(u.styles!==void 0){var c=u.next;if(c!==void 0)for(;c!==void 0;)cursor={name:c.name,styles:c.styles,next:cursor},c=c.next;var d=u.styles+";";return d}return createStringFromObject(t,n,a)}case"function":{if(t!==void 0){var Ct=cursor,ar=a(t);return cursor=Ct,handleInterpolation(t,n,ar)}break}}var en=a;if(n==null)return en;var tn=n[en];return tn!==void 0?tn:en}function createStringFromObject(t,n,a){var s="";if(Array.isArray(a))for(var l=0;l<a.length;l++)s+=handleInterpolation(t,n,a[l])+";";else for(var u in a){var c=a[u];if(typeof c!="object"){var d=c;n!=null&&n[d]!==void 0?s+=u+"{"+n[d]+"}":isProcessableValue(d)&&(s+=processStyleName(u)+":"+processStyleValue(u,d)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(n==null||n[c[0]]===void 0))for(var Ct=0;Ct<c.length;Ct++)isProcessableValue(c[Ct])&&(s+=processStyleName(u)+":"+processStyleValue(u,c[Ct])+";");else{var ar=handleInterpolation(t,n,c);switch(u){case"animation":case"animationName":{s+=processStyleName(u)+":"+ar+";";break}default:s+=u+"{"+ar+"}"}}}return s}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,l="";cursor=void 0;var u=t[0];if(u==null||u.raw===void 0)s=!1,l+=handleInterpolation(a,n,u);else{var c=u;l+=c[0]}for(var d=1;d<t.length;d++)if(l+=handleInterpolation(a,n,t[d]),s){var Ct=u;l+=Ct[d]}labelPattern.lastIndex=0;for(var ar="",en;(en=labelPattern.exec(l))!==null;)ar+="-"+en[1];var tn=murmur2(l)+ar;return{name:tn,styles:l,next:cursor}}var syncFallback=function(n){return n()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(n){return reactExports.forwardRef(function(a,s){var l=reactExports.useContext(EmotionCacheContext);return n(a,l,s)})},ThemeContext$1=reactExports.createContext({}),hasOwn$1={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(n,a){var s={};for(var l in a)hasOwn$1.call(a,l)&&(s[l]=a[l]);return s[typePropName]=n,s},Insertion$1=function(n){var a=n.cache,s=n.serialized,l=n.isStringTag;return registerStyles(a,s,l),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,s,l)}),null},Emotion=withEmotionCache(function(t,n,a){var s=t.css;typeof s=="string"&&n.registered[s]!==void 0&&(s=n.registered[s]);var l=t[typePropName],u=[s],c="";typeof t.className=="string"?c=getRegisteredStyles(n.registered,u,t.className):t.className!=null&&(c=t.className+" ");var d=serializeStyles(u,void 0,reactExports.useContext(ThemeContext$1));c+=n.key+"-"+d.name;var Ct={};for(var ar in t)hasOwn$1.call(t,ar)&&ar!=="css"&&ar!==typePropName&&(Ct[ar]=t[ar]);return Ct.className=c,a&&(Ct.ref=a),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:n,serialized:d,isStringTag:typeof l=="string"}),reactExports.createElement(l,Ct))}),Emotion$1=Emotion,jsx=function(n,a){var s=arguments;if(a==null||!hasOwn$1.call(a,"css"))return reactExports.createElement.apply(void 0,s);var l=s.length,u=new Array(l);u[0]=Emotion$1,u[1]=createEmotionProps(n,a);for(var c=2;c<l;c++)u[c]=s[c];return reactExports.createElement.apply(null,u)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(t,n){var a=t.styles,s=serializeStyles([a],void 0,reactExports.useContext(ThemeContext$1)),l=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var u=n.key+"-global",c=new n.sheet.constructor({key:u,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),d=!1,Ct=document.querySelector('style[data-emotion="'+u+" "+s.name+'"]');return n.sheet.tags.length&&(c.before=n.sheet.tags[0]),Ct!==null&&(d=!0,Ct.setAttribute("data-emotion",u),c.hydrate([Ct])),l.current=[c,d],function(){c.flush()}},[n]),useInsertionEffectWithLayoutFallback(function(){var u=l.current,c=u[0],d=u[1];if(d){u[1]=!1;return}if(s.next!==void 0&&insertStyles(n,s.next,!0),c.tags.length){var Ct=c.tags[c.tags.length-1].nextElementSibling;c.before=Ct,c.flush()}n.insert("",s,c,!1)},[n,s.name]),null});function css(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return serializeStyles(n)}function keyframes(){var t=css.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(t){return reactPropsRegex.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(n){return n!=="theme"},getDefaultShouldForwardProp=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(n,a,s){var l;if(a){var u=a.shouldForwardProp;l=n.__emotion_forwardProp&&u?function(c){return n.__emotion_forwardProp(c)&&u(c)}:u}return typeof l!="function"&&s&&(l=n.__emotion_forwardProp),l},Insertion=function(n){var a=n.cache,s=n.serialized,l=n.isStringTag;return registerStyles(a,s,l),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,s,l)}),null},createStyled$1=function t(n,a){var s=n.__emotion_real===n,l=s&&n.__emotion_base||n,u,c;a!==void 0&&(u=a.label,c=a.target);var d=composeShouldForwardProps(n,a,s),Ct=d||getDefaultShouldForwardProp(l),ar=!Ct("as");return function(){var en=arguments,tn=s&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(u!==void 0&&tn.push("label:"+u+";"),en[0]==null||en[0].raw===void 0)tn.push.apply(tn,en);else{var on=en[0];tn.push(on[0]);for(var cn=en.length,dn=1;dn<cn;dn++)tn.push(en[dn],on[dn])}var Cn=withEmotionCache(function(In,ix,ax){var ox=ar&&In.as||l,sx="",ux=[],cx=In;if(In.theme==null){cx={};for(var hx in In)cx[hx]=In[hx];cx.theme=reactExports.useContext(ThemeContext$1)}typeof In.className=="string"?sx=getRegisteredStyles(ix.registered,ux,In.className):In.className!=null&&(sx=In.className+" ");var gx=serializeStyles(tn.concat(ux),ix.registered,cx);sx+=ix.key+"-"+gx.name,c!==void 0&&(sx+=" "+c);var fx=ar&&d===void 0?getDefaultShouldForwardProp(ox):Ct,dx={};for(var mx in In)ar&&mx==="as"||fx(mx)&&(dx[mx]=In[mx]);return dx.className=sx,ax&&(dx.ref=ax),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:ix,serialized:gx,isStringTag:typeof ox=="string"}),reactExports.createElement(ox,dx))});return Cn.displayName=u!==void 0?u:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",Cn.defaultProps=n.defaultProps,Cn.__emotion_real=Cn,Cn.__emotion_base=l,Cn.__emotion_styles=tn,Cn.__emotion_forwardProp=d,Object.defineProperty(Cn,"toString",{value:function(){return"."+c}}),Cn.withComponent=function(In,ix){var ax=t(In,_extends({},a,ix,{shouldForwardProp:composeShouldForwardProps(Cn,ix,!0)}));return ax.apply(void 0,tn)},Cn}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$3=createStyled$1.bind(null);tags.forEach(function(t){styled$3[t]=styled$3(t)});function isEmpty$2(t){return t==null||Object.keys(t).length===0}function GlobalStyles$2(t){const{styles:n,defaultTheme:a={}}=t,s=typeof n=="function"?l=>n(isEmpty$2(l)?a:l):n;return jsxRuntimeExports.jsx(Global,{styles:s})}function styled$2(t,n){return styled$3(t,n)}function internal_mutateStyles(t,n){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=n(t.__emotion_styles))}const wrapper=[];function internal_serializeStyles(t){return wrapper[0]=t,serializeStyles(wrapper)}const sortBreakpointsValues=t=>{const n=Object.keys(t).map(a=>({key:a,val:t[a]}))||[];return n.sort((a,s)=>a.val-s.val),n.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function createBreakpoints(t){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...l}=t,u=sortBreakpointsValues(n),c=Object.keys(u);function d(on){return`@media (min-width:${typeof n[on]=="number"?n[on]:on}${a})`}function Ct(on){return`@media (max-width:${(typeof n[on]=="number"?n[on]:on)-s/100}${a})`}function ar(on,cn){const dn=c.indexOf(cn);return`@media (min-width:${typeof n[on]=="number"?n[on]:on}${a}) and (max-width:${(dn!==-1&&typeof n[c[dn]]=="number"?n[c[dn]]:cn)-s/100}${a})`}function en(on){return c.indexOf(on)+1<c.length?ar(on,c[c.indexOf(on)+1]):d(on)}function tn(on){const cn=c.indexOf(on);return cn===0?d(c[1]):cn===c.length-1?Ct(c[cn]):ar(on,c[c.indexOf(on)+1]).replace("@media","@media not all and")}return{keys:c,values:u,up:d,down:Ct,between:ar,only:en,not:tn,unit:a,...l}}const shape={borderRadius:4};function createSpacing(t=8,n=createUnarySpacing({spacing:t})){if(t.mui)return t;const a=(...s)=>(s.length===0?[1]:s).map(u=>{const c=n(u);return typeof c=="number"?`${c}px`:c}).join(" ");return a.mui=!0,a}function applyStyles$2(t,n){const a=this;if(a.vars){if(!a.colorSchemes?.[t]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(t);return s==="&"?n:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:n})}return a.palette.mode===t?n:{}}function createTheme$1(t={},...n){const{breakpoints:a={},palette:s={},spacing:l,shape:u={},...c}=t,d=createBreakpoints(a),Ct=createSpacing(l);let ar=deepmerge({breakpoints:d,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:Ct,shape:{...shape,...u}},c);return ar=cssContainerQueries(ar),ar.applyStyles=applyStyles$2,ar=n.reduce((en,tn)=>deepmerge(en,tn),ar),ar.unstable_sxConfig={...defaultSxConfig,...c?.unstable_sxConfig},ar.unstable_sx=function(tn){return styleFunctionSx({sx:tn,theme:this})},ar}function isObjectEmpty$2(t){return Object.keys(t).length===0}function useTheme$3(t=null){const n=reactExports.useContext(ThemeContext$1);return!n||isObjectEmpty$2(n)?t:n}const systemDefaultTheme$1=createTheme$1();function useTheme$2(t=systemDefaultTheme$1){return useTheme$3(t)}function wrapGlobalLayer(t){const n=internal_serializeStyles(t);return t!==n&&n.styles?(n.styles.match(/^@layer\s+[^{]*$/)||(n.styles=`@layer global{${n.styles}}`),n):t}function GlobalStyles$1({styles:t,themeId:n,defaultTheme:a={}}){const s=useTheme$2(a),l=n&&s[n]||s;let u=typeof t=="function"?t(l):t;return l.modularCssLayers&&(Array.isArray(u)?u=u.map(c=>wrapGlobalLayer(typeof c=="function"?c(l):c)):u=wrapGlobalLayer(u)),jsxRuntimeExports.jsx(GlobalStyles$2,{styles:u})}function createBox(t={}){const{themeId:n,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:l}=t,u=styled$2("div",{shouldForwardProp:d=>d!=="theme"&&d!=="sx"&&d!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(Ct,ar){const en=useTheme$2(a),{className:tn,component:on="div",...cn}=extendSxProp$1(Ct);return jsxRuntimeExports.jsx(u,{as:on,ref:ar,className:clsx(tn,l?l(s):s),theme:n&&en[n]||en,...cn})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(t,n,a="Mui"){const s=globalStateClasses[n];return s?`${a}-${s}`:`${ClassNameGenerator.generate(t)}-${n}`}function generateUtilityClasses(t,n,a="Mui"){const s={};return n.forEach(l=>{s[l]=generateUtilityClass(t,l,a)}),s}function preprocessStyles(t){const{variants:n,...a}=t,s={variants:n,style:internal_serializeStyles(a),isProcessed:!0};return s.style===a||n&&n.forEach(l=>{typeof l.style!="function"&&(l.style=internal_serializeStyles(l.style))}),s}const systemDefaultTheme=createTheme$1();function shouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function shallowLayer(t,n){return n&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${n}{${String(t.styles)}}`),t}function defaultOverridesResolver(t){return t?(n,a)=>a[t]:null}function attachTheme(t,n,a){t.theme=isObjectEmpty$1(t.theme)?a:t.theme[n]||t.theme}function processStyle(t,n,a){const s=typeof n=="function"?n(t):n;if(Array.isArray(s))return s.flatMap(l=>processStyle(t,l,a));if(Array.isArray(s?.variants)){let l;if(s.isProcessed)l=a?shallowLayer(s.style,a):s.style;else{const{variants:u,...c}=s;l=a?shallowLayer(internal_serializeStyles(c),a):c}return processStyleVariants(t,s.variants,[l],a)}return s?.isProcessed?a?shallowLayer(internal_serializeStyles(s.style),a):s.style:a?shallowLayer(internal_serializeStyles(s),a):s}function processStyleVariants(t,n,a=[],s=void 0){let l;e:for(let u=0;u<n.length;u+=1){const c=n[u];if(typeof c.props=="function"){if(l??={...t,...t.ownerState,ownerState:t.ownerState},!c.props(l))continue}else for(const d in c.props)if(t[d]!==c.props[d]&&t.ownerState?.[d]!==c.props[d])continue e;typeof c.style=="function"?(l??={...t,...t.ownerState,ownerState:t.ownerState},a.push(s?shallowLayer(internal_serializeStyles(c.style(l)),s):c.style(l))):a.push(s?shallowLayer(internal_serializeStyles(c.style),s):c.style)}return a}function createStyled(t={}){const{themeId:n,defaultTheme:a=systemDefaultTheme,rootShouldForwardProp:s=shouldForwardProp,slotShouldForwardProp:l=shouldForwardProp}=t;function u(d){attachTheme(d,n,a)}return(d,Ct={})=>{internal_mutateStyles(d,cx=>cx.filter(hx=>hx!==styleFunctionSx));const{name:ar,slot:en,skipVariantsResolver:tn,skipSx:on,overridesResolver:cn=defaultOverridesResolver(lowercaseFirstLetter(en)),...dn}=Ct,Cn=ar&&ar.startsWith("Mui")||en?"components":"custom",In=tn!==void 0?tn:en&&en!=="Root"&&en!=="root"||!1,ix=on||!1;let ax=shouldForwardProp;en==="Root"||en==="root"?ax=s:en?ax=l:isStringTag(d)&&(ax=void 0);const ox=styled$2(d,{shouldForwardProp:ax,label:generateStyledLabel(),...dn}),sx=cx=>{if(cx.__emotion_real===cx)return cx;if(typeof cx=="function")return function(gx){return processStyle(gx,cx,gx.theme.modularCssLayers?Cn:void 0)};if(isPlainObject(cx)){const hx=preprocessStyles(cx);return function(fx){return hx.variants?processStyle(fx,hx,fx.theme.modularCssLayers?Cn:void 0):fx.theme.modularCssLayers?shallowLayer(hx.style,Cn):hx.style}}return cx},ux=(...cx)=>{const hx=[],gx=cx.map(sx),fx=[];if(hx.push(u),ar&&cn&&fx.push(function(bx){const _x=bx.theme.components?.[ar]?.styleOverrides;if(!_x)return null;const Ex={};for(const Tx in _x)Ex[Tx]=processStyle(bx,_x[Tx],bx.theme.modularCssLayers?"theme":void 0);return cn(bx,Ex)}),ar&&!In&&fx.push(function(bx){const _x=bx.theme?.components?.[ar]?.variants;return _x?processStyleVariants(bx,_x,[],bx.theme.modularCssLayers?"theme":void 0):null}),ix||fx.push(styleFunctionSx),Array.isArray(gx[0])){const vx=gx.shift(),bx=new Array(hx.length).fill(""),xx=new Array(fx.length).fill("");let _x;_x=[...bx,...vx,...xx],_x.raw=[...bx,...vx.raw,...xx],hx.unshift(_x)}const dx=[...hx,...gx,...fx],mx=ox(...dx);return d.muiName&&(mx.muiName=d.muiName),mx};return ox.withConfig&&(ux.withConfig=ox.withConfig),ux}}function generateStyledLabel(t,n){return void 0}function isObjectEmpty$1(t){for(const n in t)return!1;return!0}function isStringTag(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lowercaseFirstLetter(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const styled$1=createStyled();function getThemeProps$1(t){const{theme:n,name:a,props:s}=t;return!n||!n.components||!n.components[a]||!n.components[a].defaultProps?s:resolveProps(n.components[a].defaultProps,s)}function useThemeProps({props:t,name:n,defaultTheme:a,themeId:s}){let l=useTheme$2(a);return s&&(l=l[s]||l),getThemeProps$1({theme:l,name:n,props:t})}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function clamp$1(t,n=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(t,a))}function clampWrapper(t,n=0,a=1){return clamp$1(t,n,a)}function hexToRgb(t){t=t.slice(1);const n=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let a=t.match(n);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,l)=>l<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(t){if(t.type)return t;if(t.charAt(0)==="#")return decomposeColor(hexToRgb(t));const n=t.indexOf("("),a=t.substring(0,n);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(formatMuiErrorMessage(9,t));let s=t.substring(n+1,t.length-1),l;if(a==="color"){if(s=s.split(" "),l=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(l))throw new Error(formatMuiErrorMessage(10,l))}else s=s.split(",");return s=s.map(u=>parseFloat(u)),{type:a,values:s,colorSpace:l}}const colorChannel=t=>{const n=decomposeColor(t);return n.values.slice(0,3).map((a,s)=>n.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},private_safeColorChannel=(t,n)=>{try{return colorChannel(t)}catch{return t}};function recomposeColor(t){const{type:n,colorSpace:a}=t;let{values:s}=t;return n.includes("rgb")?s=s.map((l,u)=>u<3?parseInt(l,10):l):n.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),n.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${n}(${s})`}function hslToRgb(t){t=decomposeColor(t);const{values:n}=t,a=n[0],s=n[1]/100,l=n[2]/100,u=s*Math.min(l,1-l),c=(ar,en=(ar+a/30)%12)=>l-u*Math.max(Math.min(en-3,9-en,1),-1);let d="rgb";const Ct=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(d+="a",Ct.push(n[3])),recomposeColor({type:d,values:Ct})}function getLuminance(t){t=decomposeColor(t);let n=t.type==="hsl"||t.type==="hsla"?decomposeColor(hslToRgb(t)).values:t.values;return n=n.map(a=>(t.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function getContrastRatio(t,n){const a=getLuminance(t),s=getLuminance(n);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function alpha$1(t,n){return t=decomposeColor(t),n=clampWrapper(n),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${n}`:t.values[3]=n,recomposeColor(t)}function private_safeAlpha(t,n,a){try{return alpha$1(t,n)}catch{return t}}function darken(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]*=1-n;else if(t.type.includes("rgb")||t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]*=1-n;return recomposeColor(t)}function private_safeDarken(t,n,a){try{return darken(t,n)}catch{return t}}function lighten(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*n;else if(t.type.includes("rgb"))for(let a=0;a<3;a+=1)t.values[a]+=(255-t.values[a])*n;else if(t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]+=(1-t.values[a])*n;return recomposeColor(t)}function private_safeLighten(t,n,a){try{return lighten(t,n)}catch{return t}}function emphasize(t,n=.15){return getLuminance(t)>.5?darken(t,n):lighten(t,n)}function private_safeEmphasize(t,n,a){try{return emphasize(t,n)}catch{return t}}const ThemeContext=reactExports.createContext(null);function useTheme$1(){return reactExports.useContext(ThemeContext)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(t,n){return typeof n=="function"?n(t):{...t,...n}}function ThemeProvider$2(t){const{children:n,theme:a}=t,s=useTheme$1(),l=reactExports.useMemo(()=>{const u=s===null?{...a}:mergeOuterLocalTheme(s,a);return u!=null&&(u[nested]=s!==null),u},[a,s]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:l,children:n})}const RtlContext=reactExports.createContext();function RtlProvider({value:t,...n}){return jsxRuntimeExports.jsx(RtlContext.Provider,{value:t??!0,...n})}const useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function DefaultPropsProvider({value:t,children:n}){return jsxRuntimeExports.jsx(PropsContext.Provider,{value:t,children:n})}function getThemeProps(t){const{theme:n,name:a,props:s}=t;if(!n||!n.components||!n.components[a])return s;const l=n.components[a];return l.defaultProps?resolveProps(l.defaultProps,s,n.components.mergeClassNameAndStyle):!l.styleOverrides&&!l.variants?resolveProps(l,s,n.components.mergeClassNameAndStyle):s}function useDefaultProps$1({props:t,name:n}){const a=reactExports.useContext(PropsContext);return getThemeProps({props:t,name:n,theme:{components:a}})}let globalId=0;function useGlobalId(t){const[n,a]=reactExports.useState(t),s=t||n;return reactExports.useEffect(()=>{n==null&&(globalId+=1,a(`mui-${globalId}`))},[n]),s}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(t){if(maybeReactUseId!==void 0){const n=maybeReactUseId();return t??n}return useGlobalId(t)}function useLayerOrder(t){const n=useTheme$3(),a=useId()||"",{modularCssLayers:s}=t;let l="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!s||n!==null?l="":typeof s=="string"?l=s.replace(/mui(?!\.)/g,l):l=`@layer ${l};`,useEnhancedEffect(()=>{const u=document.querySelector("head");if(!u)return;const c=u.firstChild;if(l){if(c&&c.hasAttribute?.("data-mui-layer-order")&&c.getAttribute("data-mui-layer-order")===a)return;const d=document.createElement("style");d.setAttribute("data-mui-layer-order",a),d.textContent=l,u.prepend(d)}else u.querySelector(`style[data-mui-layer-order="${a}"]`)?.remove()},[l,a]),l?jsxRuntimeExports.jsx(GlobalStyles$1,{styles:l}):null}const EMPTY_THEME={};function useThemeScoping(t,n,a,s=!1){return reactExports.useMemo(()=>{const l=t&&n[t]||n;if(typeof a=="function"){const u=a(l),c=t?{...n,[t]:u}:u;return s?()=>c:c}return t?{...n,[t]:a}:{...n,...a}},[t,n,a,s])}function ThemeProvider$1(t){const{children:n,theme:a,themeId:s}=t,l=useTheme$3(EMPTY_THEME),u=useTheme$1()||EMPTY_THEME,c=useThemeScoping(s,l,a),d=useThemeScoping(s,u,a,!0),Ct=(s?c[s]:c).direction==="rtl",ar=useLayerOrder(c);return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:d,children:jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:c,children:jsxRuntimeExports.jsx(RtlProvider,{value:Ct,children:jsxRuntimeExports.jsxs(DefaultPropsProvider,{value:s?c[s].components:c.components,children:[ar,n]})})})})}const arg={theme:void 0};function unstable_memoTheme(t){let n,a;return function(l){let u=n;return(u===void 0||l.theme!==a)&&(arg.theme=l.theme,u=preprocessStyles(t(arg)),n=u,a=l.theme),u}}const DEFAULT_MODE_STORAGE_KEY="mode",DEFAULT_COLOR_SCHEME_STORAGE_KEY="color-scheme",DEFAULT_ATTRIBUTE="data-color-scheme";function InitColorSchemeScript(t){const{defaultMode:n="system",defaultLightColorScheme:a="light",defaultDarkColorScheme:s="dark",modeStorageKey:l=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:u=DEFAULT_COLOR_SCHEME_STORAGE_KEY,attribute:c=DEFAULT_ATTRIBUTE,colorSchemeNode:d="document.documentElement",nonce:Ct}=t||{};let ar="",en=c;if(c==="class"&&(en=".%s"),c==="data"&&(en="[data-%s]"),en.startsWith(".")){const on=en.substring(1);ar+=`${d}.classList.remove('${on}'.replace('%s', light), '${on}'.replace('%s', dark));
      ${d}.classList.add('${on}'.replace('%s', colorScheme));`}const tn=en.match(/\[([^\]]+)\]/);if(tn){const[on,cn]=tn[1].split("=");cn||(ar+=`${d}.removeAttribute('${on}'.replace('%s', light));
      ${d}.removeAttribute('${on}'.replace('%s', dark));`),ar+=`
      ${d}.setAttribute('${on}'.replace('%s', colorScheme), ${cn?`${cn}.replace('%s', colorScheme)`:'""'});`}else ar+=`${d}.setAttribute('${en}', colorScheme);`;return jsxRuntimeExports.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?Ct:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${l}') || '${n}';
  const dark = localStorage.getItem('${u}-dark') || '${s}';
  const light = localStorage.getItem('${u}-light') || '${a}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${ar}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function noop$4(){}const localStorageManager=({key:t,storageWindow:n})=>(!n&&typeof window<"u"&&(n=window),{get(a){if(typeof window>"u")return;if(!n)return a;let s;try{s=n.localStorage.getItem(t)}catch{}return s||a},set:a=>{if(n)try{n.localStorage.setItem(t,a)}catch{}},subscribe:a=>{if(!n)return noop$4;const s=l=>{const u=l.newValue;l.key===t&&a(u)};return n.addEventListener("storage",s),()=>{n.removeEventListener("storage",s)}}});function noop$3(){}function getSystemMode(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function processState(t,n){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return n("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return n("dark")}function getColorScheme(t){return processState(t,n=>{if(n==="light")return t.lightColorScheme;if(n==="dark")return t.darkColorScheme})}function useCurrentColorScheme(t){const{defaultMode:n="light",defaultLightColorScheme:a,defaultDarkColorScheme:s,supportedColorSchemes:l=[],modeStorageKey:u=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:c=DEFAULT_COLOR_SCHEME_STORAGE_KEY,storageWindow:d=typeof window>"u"?void 0:window,storageManager:Ct=localStorageManager,noSsr:ar=!1}=t,en=l.join(","),tn=l.length>1,on=reactExports.useMemo(()=>Ct?.({key:u,storageWindow:d}),[Ct,u,d]),cn=reactExports.useMemo(()=>Ct?.({key:`${c}-light`,storageWindow:d}),[Ct,c,d]),dn=reactExports.useMemo(()=>Ct?.({key:`${c}-dark`,storageWindow:d}),[Ct,c,d]),[Cn,In]=reactExports.useState(()=>{const gx=on?.get(n)||n,fx=cn?.get(a)||a,dx=dn?.get(s)||s;return{mode:gx,systemMode:getSystemMode(gx),lightColorScheme:fx,darkColorScheme:dx}}),[ix,ax]=reactExports.useState(ar||!tn);reactExports.useEffect(()=>{ax(!0)},[]);const ox=getColorScheme(Cn),sx=reactExports.useCallback(gx=>{In(fx=>{if(gx===fx.mode)return fx;const dx=gx??n;return on?.set(dx),{...fx,mode:dx,systemMode:getSystemMode(dx)}})},[on,n]),ux=reactExports.useCallback(gx=>{gx?typeof gx=="string"?gx&&!en.includes(gx)?console.error(`\`${gx}\` does not exist in \`theme.colorSchemes\`.`):In(fx=>{const dx={...fx};return processState(fx,mx=>{mx==="light"&&(cn?.set(gx),dx.lightColorScheme=gx),mx==="dark"&&(dn?.set(gx),dx.darkColorScheme=gx)}),dx}):In(fx=>{const dx={...fx},mx=gx.light===null?a:gx.light,vx=gx.dark===null?s:gx.dark;return mx&&(en.includes(mx)?(dx.lightColorScheme=mx,cn?.set(mx)):console.error(`\`${mx}\` does not exist in \`theme.colorSchemes\`.`)),vx&&(en.includes(vx)?(dx.darkColorScheme=vx,dn?.set(vx)):console.error(`\`${vx}\` does not exist in \`theme.colorSchemes\`.`)),dx}):In(fx=>(cn?.set(a),dn?.set(s),{...fx,lightColorScheme:a,darkColorScheme:s}))},[en,cn,dn,a,s]),cx=reactExports.useCallback(gx=>{Cn.mode==="system"&&In(fx=>{const dx=gx?.matches?"dark":"light";return fx.systemMode===dx?fx:{...fx,systemMode:dx}})},[Cn.mode]),hx=reactExports.useRef(cx);return hx.current=cx,reactExports.useEffect(()=>{if(typeof window.matchMedia!="function"||!tn)return;const gx=(...dx)=>hx.current(...dx),fx=window.matchMedia("(prefers-color-scheme: dark)");return fx.addListener(gx),gx(fx),()=>{fx.removeListener(gx)}},[tn]),reactExports.useEffect(()=>{if(tn){const gx=on?.subscribe(mx=>{(!mx||["light","dark","system"].includes(mx))&&sx(mx||n)})||noop$3,fx=cn?.subscribe(mx=>{(!mx||en.match(mx))&&ux({light:mx})})||noop$3,dx=dn?.subscribe(mx=>{(!mx||en.match(mx))&&ux({dark:mx})})||noop$3;return()=>{gx(),fx(),dx()}}},[ux,sx,en,n,d,tn,on,cn,dn]),{...Cn,mode:ix?Cn.mode:void 0,systemMode:ix?Cn.systemMode:void 0,colorScheme:ix?ox:void 0,setMode:sx,setColorScheme:ux}}const DISABLE_CSS_TRANSITION="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function createCssVarsProvider(t){const{themeId:n,theme:a={},modeStorageKey:s=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:l=DEFAULT_COLOR_SCHEME_STORAGE_KEY,disableTransitionOnChange:u=!1,defaultColorScheme:c,resolveTheme:d}=t,Ct={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},ar=reactExports.createContext(void 0),en=()=>reactExports.useContext(ar)||Ct,tn={},on={};function cn(ix){const{children:ax,theme:ox,modeStorageKey:sx=s,colorSchemeStorageKey:ux=l,disableTransitionOnChange:cx=u,storageManager:hx,storageWindow:gx=typeof window>"u"?void 0:window,documentNode:fx=typeof document>"u"?void 0:document,colorSchemeNode:dx=typeof document>"u"?void 0:document.documentElement,disableNestedContext:mx=!1,disableStyleSheetGeneration:vx=!1,defaultMode:bx="system",forceThemeRerender:xx=!1,noSsr:_x}=ix,Ex=reactExports.useRef(!1),Tx=useTheme$1(),Cx=reactExports.useContext(ar),Mx=!!Cx&&!mx,Ax=reactExports.useMemo(()=>ox||(typeof a=="function"?a():a),[ox]),Nx=Ax[n],Ux=Nx||Ax,{colorSchemes:Rx=tn,components:Ox=on,cssVarPrefix:Px}=Ux,$x=Object.keys(Rx).filter(Dx=>!!Rx[Dx]).join(","),Lx=reactExports.useMemo(()=>$x.split(","),[$x]),zx=typeof c=="string"?c:c.light,qx=typeof c=="string"?c:c.dark,jx=Rx[zx]&&Rx[qx]?bx:Rx[Ux.defaultColorScheme]?.palette?.mode||Ux.palette?.mode,{mode:Hx,setMode:Vx,systemMode:nE,lightColorScheme:Wx,darkColorScheme:tE,colorScheme:lE,setColorScheme:iE}=useCurrentColorScheme({supportedColorSchemes:Lx,defaultLightColorScheme:zx,defaultDarkColorScheme:qx,modeStorageKey:sx,colorSchemeStorageKey:ux,defaultMode:jx,storageManager:hx,storageWindow:gx,noSsr:_x});let Xx=Hx,CE=lE;Mx&&(Xx=Cx.mode,CE=Cx.colorScheme);let RE=CE||Ux.defaultColorScheme;Ux.vars&&!xx&&(RE=Ux.defaultColorScheme);const SE=reactExports.useMemo(()=>{const Dx=Ux.generateThemeVars?.()||Ux.vars,kx={...Ux,components:Ox,colorSchemes:Rx,cssVarPrefix:Px,vars:Dx};if(typeof kx.generateSpacing=="function"&&(kx.spacing=kx.generateSpacing()),RE){const Yx=Rx[RE];Yx&&typeof Yx=="object"&&Object.keys(Yx).forEach(Kx=>{Yx[Kx]&&typeof Yx[Kx]=="object"?kx[Kx]={...kx[Kx],...Yx[Kx]}:kx[Kx]=Yx[Kx]})}return d?d(kx):kx},[Ux,RE,Ox,Rx,Px]),EE=Ux.colorSchemeSelector;useEnhancedEffect(()=>{if(CE&&dx&&EE&&EE!=="media"){const Dx=EE;let kx=EE;if(Dx==="class"&&(kx=".%s"),Dx==="data"&&(kx="[data-%s]"),Dx?.startsWith("data-")&&!Dx.includes("%s")&&(kx=`[${Dx}="%s"]`),kx.startsWith("."))dx.classList.remove(...Lx.map(Yx=>kx.substring(1).replace("%s",Yx))),dx.classList.add(kx.substring(1).replace("%s",CE));else{const Yx=kx.replace("%s",CE).match(/\[([^\]]+)\]/);if(Yx){const[Kx,aE]=Yx[1].split("=");aE||Lx.forEach(eE=>{dx.removeAttribute(Kx.replace(CE,eE))}),dx.setAttribute(Kx,aE?aE.replace(/"|'/g,""):"")}else dx.setAttribute(kx,CE)}}},[CE,EE,dx,Lx]),reactExports.useEffect(()=>{let Dx;if(cx&&Ex.current&&fx){const kx=fx.createElement("style");kx.appendChild(fx.createTextNode(DISABLE_CSS_TRANSITION)),fx.head.appendChild(kx),window.getComputedStyle(fx.body),Dx=setTimeout(()=>{fx.head.removeChild(kx)},1)}return()=>{clearTimeout(Dx)}},[CE,cx,fx]),reactExports.useEffect(()=>(Ex.current=!0,()=>{Ex.current=!1}),[]);const FE=reactExports.useMemo(()=>({allColorSchemes:Lx,colorScheme:CE,darkColorScheme:tE,lightColorScheme:Wx,mode:Xx,setColorScheme:iE,setMode:Vx,systemMode:nE}),[Lx,CE,tE,Wx,Xx,iE,Vx,nE,SE.colorSchemeSelector]);let AE=!0;(vx||Ux.cssVariables===!1||Mx&&Tx?.cssVarPrefix===Px)&&(AE=!1);const ZE=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ThemeProvider$1,{themeId:Nx?n:void 0,theme:SE,children:ax}),AE&&jsxRuntimeExports.jsx(GlobalStyles$2,{styles:SE.generateStyleSheets?.()||[]})]});return Mx?ZE:jsxRuntimeExports.jsx(ar.Provider,{value:FE,children:ZE})}const dn=typeof c=="string"?c:c.light,Cn=typeof c=="string"?c:c.dark;return{CssVarsProvider:cn,useColorScheme:en,getInitColorSchemeScript:ix=>InitColorSchemeScript({colorSchemeStorageKey:l,defaultLightColorScheme:dn,defaultDarkColorScheme:Cn,modeStorageKey:s,...ix})}}function createGetCssVar$1(t=""){function n(...s){if(!s.length)return"";const l=s[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${l}${n(...s.slice(1))})`:`, ${l}`}return(s,...l)=>`var(--${t?`${t}-`:""}${s}${n(...l)})`}const assignNestedKeys=(t,n,a,s=[])=>{let l=t;n.forEach((u,c)=>{c===n.length-1?Array.isArray(l)?l[Number(u)]=a:l&&typeof l=="object"&&(l[u]=a):l&&typeof l=="object"&&(l[u]||(l[u]=s.includes(u)?[]:{}),l=l[u])})},walkObjectDeep=(t,n,a)=>{function s(l,u=[],c=[]){Object.entries(l).forEach(([d,Ct])=>{(!a||a&&!a([...u,d]))&&Ct!=null&&(typeof Ct=="object"&&Object.keys(Ct).length>0?s(Ct,[...u,d],Array.isArray(Ct)?[...c,d]:c):n([...u,d],Ct,c))})}s(t)},getCssValue=(t,n)=>typeof n=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>t.includes(s))||t[t.length-1].toLowerCase().includes("opacity")?n:`${n}px`:n;function cssVarsParser(t,n){const{prefix:a,shouldSkipGeneratingVar:s}=n||{},l={},u={},c={};return walkObjectDeep(t,(d,Ct,ar)=>{if((typeof Ct=="string"||typeof Ct=="number")&&(!s||!s(d,Ct))){const en=`--${a?`${a}-`:""}${d.join("-")}`,tn=getCssValue(d,Ct);Object.assign(l,{[en]:tn}),assignNestedKeys(u,d,`var(${en})`,ar),assignNestedKeys(c,d,`var(${en}, ${tn})`,ar)}},d=>d[0]==="vars"),{css:l,vars:u,varsWithDefaults:c}}function prepareCssVars(t,n={}){const{getSelector:a=ix,disableCssColorScheme:s,colorSchemeSelector:l,enableContrastVars:u}=n,{colorSchemes:c={},components:d,defaultColorScheme:Ct="light",...ar}=t,{vars:en,css:tn,varsWithDefaults:on}=cssVarsParser(ar,n);let cn=on;const dn={},{[Ct]:Cn,...In}=c;if(Object.entries(In||{}).forEach(([sx,ux])=>{const{vars:cx,css:hx,varsWithDefaults:gx}=cssVarsParser(ux,n);cn=deepmerge(cn,gx),dn[sx]={css:hx,vars:cx}}),Cn){const{css:sx,vars:ux,varsWithDefaults:cx}=cssVarsParser(Cn,n);cn=deepmerge(cn,cx),dn[Ct]={css:sx,vars:ux}}function ix(sx,ux){let cx=l;if(l==="class"&&(cx=".%s"),l==="data"&&(cx="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(cx=`[${l}="%s"]`),sx){if(cx==="media")return t.defaultColorScheme===sx?":root":{[`@media (prefers-color-scheme: ${c[sx]?.palette?.mode||sx})`]:{":root":ux}};if(cx)return t.defaultColorScheme===sx?`:root, ${cx.replace("%s",String(sx))}`:cx.replace("%s",String(sx))}return":root"}return{vars:cn,generateThemeVars:()=>{let sx={...en};return Object.entries(dn).forEach(([,{vars:ux}])=>{sx=deepmerge(sx,ux)}),sx},generateStyleSheets:()=>{const sx=[],ux=t.defaultColorScheme||"light";function cx(fx,dx){Object.keys(dx).length&&sx.push(typeof fx=="string"?{[fx]:{...dx}}:fx)}cx(a(void 0,{...tn}),tn);const{[ux]:hx,...gx}=dn;if(hx){const{css:fx}=hx,dx=c[ux]?.palette?.mode,mx=!s&&dx?{colorScheme:dx,...fx}:{...fx};cx(a(ux,{...mx}),mx)}return Object.entries(gx).forEach(([fx,{css:dx}])=>{const mx=c[fx]?.palette?.mode,vx=!s&&mx?{colorScheme:mx,...dx}:{...dx};cx(a(fx,{...vx}),vx)}),u&&sx.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),sx}}}function createGetColorSchemeSelector(t){return function(a){return t==="media"?`@media (prefers-color-scheme: ${a})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${a}"] &`:t==="class"?`.${a} &`:t==="data"?`[data-${a}] &`:`${t.replace("%s",a)} &`:"&"}}const defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$2=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemePropsDefault$2=t=>useThemeProps({props:t,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$I=(t,n)=>{const a=Ct=>generateUtilityClass(n,Ct),{classes:s,fixed:l,disableGutters:u,maxWidth:c}=t,d={root:["root",c&&`maxWidth${capitalize(String(c))}`,l&&"fixed",u&&"disableGutters"]};return composeClasses(d,a,s)};function createContainer(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$2,useThemeProps:a=useThemePropsDefault$2,componentName:s="MuiContainer"}=t,l=n(({theme:c,ownerState:d})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!d.disableGutters&&{paddingLeft:c.spacing(2),paddingRight:c.spacing(2),[c.breakpoints.up("sm")]:{paddingLeft:c.spacing(3),paddingRight:c.spacing(3)}}}),({theme:c,ownerState:d})=>d.fixed&&Object.keys(c.breakpoints.values).reduce((Ct,ar)=>{const en=ar,tn=c.breakpoints.values[en];return tn!==0&&(Ct[c.breakpoints.up(en)]={maxWidth:`${tn}${c.breakpoints.unit}`}),Ct},{}),({theme:c,ownerState:d})=>({...d.maxWidth==="xs"&&{[c.breakpoints.up("xs")]:{maxWidth:Math.max(c.breakpoints.values.xs,444)}},...d.maxWidth&&d.maxWidth!=="xs"&&{[c.breakpoints.up(d.maxWidth)]:{maxWidth:`${c.breakpoints.values[d.maxWidth]}${c.breakpoints.unit}`}}}));return reactExports.forwardRef(function(d,Ct){const ar=a(d),{className:en,component:tn="div",disableGutters:on=!1,fixed:cn=!1,maxWidth:dn="lg",classes:Cn,...In}=ar,ix={...ar,component:tn,disableGutters:on,fixed:cn,maxWidth:dn},ax=useUtilityClasses$I(ix,s);return jsxRuntimeExports.jsx(l,{as:tn,ownerState:ix,className:clsx(ax.root,en),ref:Ct,...In})})}function isMuiElement(t,n){return reactExports.isValidElement(t)&&n.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}const filterBreakpointKeys=(t,n)=>t.filter(a=>n.includes(a)),traverseBreakpoints=(t,n,a)=>{const s=t.keys[0];Array.isArray(n)?n.forEach((l,u)=>{a((c,d)=>{u<=t.keys.length-1&&(u===0?Object.assign(c,d):c[t.up(t.keys[u])]=d)},l)}):n&&typeof n=="object"?(Object.keys(n).length>t.keys.length?t.keys:filterBreakpointKeys(t.keys,Object.keys(n))).forEach(u=>{if(t.keys.includes(u)){const c=n[u];c!==void 0&&a((d,Ct)=>{s===u?Object.assign(d,Ct):d[t.up(u)]=Ct},c)}}):(typeof n=="number"||typeof n=="string")&&a((l,u)=>{Object.assign(l,u)},n)};function getSelfSpacingVar(t){return`--Grid-${t}Spacing`}function getParentSpacingVar(t){return`--Grid-parent-${t}Spacing`}const selfColumnsVar="--Grid-columns",parentColumnsVar="--Grid-parent-columns",generateGridSizeStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.size,(s,l)=>{let u={};l==="grow"&&(u={flexBasis:0,flexGrow:1,maxWidth:"100%"}),l==="auto"&&(u={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof l=="number"&&(u={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${l} / var(${parentColumnsVar}) - (var(${parentColumnsVar}) - ${l}) * (var(${getParentSpacingVar("column")}) / var(${parentColumnsVar})))`}),s(a,u)}),a},generateGridOffsetStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.offset,(s,l)=>{let u={};l==="auto"&&(u={marginLeft:"auto"}),typeof l=="number"&&(u={marginLeft:l===0?"0px":`calc(100% * ${l} / var(${parentColumnsVar}) + var(${getParentSpacingVar("column")}) * ${l} / var(${parentColumnsVar}))`}),s(a,u)}),a},generateGridColumnsStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={[selfColumnsVar]:12};return traverseBreakpoints(t.breakpoints,n.columns,(s,l)=>{const u=l??12;s(a,{[selfColumnsVar]:u,"> *":{[parentColumnsVar]:u}})}),a},generateGridRowSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.rowSpacing,(s,l)=>{const u=typeof l=="string"?l:t.spacing?.(l);s(a,{[getSelfSpacingVar("row")]:u,"> *":{[getParentSpacingVar("row")]:u}})}),a},generateGridColumnSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.columnSpacing,(s,l)=>{const u=typeof l=="string"?l:t.spacing?.(l);s(a,{[getSelfSpacingVar("column")]:u,"> *":{[getParentSpacingVar("column")]:u}})}),a},generateGridDirectionStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.direction,(s,l)=>{s(a,{flexDirection:l})}),a},generateGridStyles=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${getSelfSpacingVar("row")}) var(${getSelfSpacingVar("column")})`}}),generateSizeClassNames=t=>{const n=[];return Object.entries(t).forEach(([a,s])=>{s!==!1&&s!==void 0&&n.push(`grid-${a}-${String(s)}`)}),n},generateSpacingClassNames=(t,n="xs")=>{function a(s){return s===void 0?!1:typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"&&s>0}if(a(t))return[`spacing-${n}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const s=[];return Object.entries(t).forEach(([l,u])=>{a(u)&&s.push(`spacing-${l}-${String(u)}`)}),s}return[]},generateDirectionClasses=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([n,a])=>`direction-${n}-${a}`):[`direction-xs-${String(t)}`];function deleteLegacyGridProps(t,n){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,n.keys.forEach(a=>{t[a]!==void 0&&delete t[a]})}const defaultTheme$3=createTheme$1(),defaultCreateStyledComponent$1=styled$1("div",{name:"MuiGrid",slot:"Root"});function useThemePropsDefault$1(t){return useThemeProps({props:t,name:"MuiGrid",defaultTheme:defaultTheme$3})}function createGrid(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$1,useThemeProps:a=useThemePropsDefault$1,useTheme:s=useTheme$2,componentName:l="MuiGrid"}=t,u=(ar,en)=>{const{container:tn,direction:on,spacing:cn,wrap:dn,size:Cn}=ar,In={root:["root",tn&&"container",dn!=="wrap"&&`wrap-xs-${String(dn)}`,...generateDirectionClasses(on),...generateSizeClassNames(Cn),...tn?generateSpacingClassNames(cn,en.breakpoints.keys[0]):[]]};return composeClasses(In,ix=>generateUtilityClass(l,ix),{})};function c(ar,en,tn=()=>!0){const on={};return ar===null||(Array.isArray(ar)?ar.forEach((cn,dn)=>{cn!==null&&tn(cn)&&en.keys[dn]&&(on[en.keys[dn]]=cn)}):typeof ar=="object"?Object.keys(ar).forEach(cn=>{const dn=ar[cn];dn!=null&&tn(dn)&&(on[cn]=dn)}):on[en.keys[0]]=ar),on}const d=n(generateGridColumnsStyles,generateGridColumnSpacingStyles,generateGridRowSpacingStyles,generateGridSizeStyles,generateGridDirectionStyles,generateGridStyles,generateGridOffsetStyles),Ct=reactExports.forwardRef(function(en,tn){const on=s(),cn=a(en),dn=extendSxProp$1(cn);deleteLegacyGridProps(dn,on.breakpoints);const{className:Cn,children:In,columns:ix=12,container:ax=!1,component:ox="div",direction:sx="row",wrap:ux="wrap",size:cx={},offset:hx={},spacing:gx=0,rowSpacing:fx=gx,columnSpacing:dx=gx,unstable_level:mx=0,...vx}=dn,bx=c(cx,on.breakpoints,Nx=>Nx!==!1),xx=c(hx,on.breakpoints),_x=en.columns??(mx?void 0:ix),Ex=en.spacing??(mx?void 0:gx),Tx=en.rowSpacing??en.spacing??(mx?void 0:fx),Cx=en.columnSpacing??en.spacing??(mx?void 0:dx),Mx={...dn,level:mx,columns:_x,container:ax,direction:sx,wrap:ux,spacing:Ex,rowSpacing:Tx,columnSpacing:Cx,size:bx,offset:xx},Ax=u(Mx,on);return jsxRuntimeExports.jsx(d,{ref:tn,as:ox,ownerState:Mx,className:clsx(Ax.root,Cn),...vx,children:reactExports.Children.map(In,Nx=>reactExports.isValidElement(Nx)&&isMuiElement(Nx,["Grid"])&&ax&&Nx.props.container?reactExports.cloneElement(Nx,{unstable_level:Nx.props?.unstable_level??mx+1}):Nx)})});return Ct.muiName="Grid",Ct}const defaultTheme$2=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root"});function useThemePropsDefault(t){return useThemeProps({props:t,name:"MuiStack",defaultTheme:defaultTheme$2})}function joinChildren(t,n){const a=reactExports.Children.toArray(t).filter(Boolean);return a.reduce((s,l,u)=>(s.push(l),u<a.length-1&&s.push(reactExports.cloneElement(n,{key:`separator-${u}`})),s),[])}const getSideFromDirection=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],style=({ownerState:t,theme:n})=>{let a={display:"flex",flexDirection:"column",...handleBreakpoints({theme:n},resolveBreakpointValues({values:t.direction,breakpoints:n.breakpoints.values}),s=>({flexDirection:s}))};if(t.spacing){const s=createUnarySpacing(n),l=Object.keys(n.breakpoints.values).reduce((Ct,ar)=>((typeof t.spacing=="object"&&t.spacing[ar]!=null||typeof t.direction=="object"&&t.direction[ar]!=null)&&(Ct[ar]=!0),Ct),{}),u=resolveBreakpointValues({values:t.direction,base:l}),c=resolveBreakpointValues({values:t.spacing,base:l});typeof u=="object"&&Object.keys(u).forEach((Ct,ar,en)=>{if(!u[Ct]){const on=ar>0?u[en[ar-1]]:"column";u[Ct]=on}}),a=deepmerge(a,handleBreakpoints({theme:n},c,(Ct,ar)=>t.useFlexGap?{gap:getValue(s,Ct)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(ar?u[ar]:t.direction)}`]:getValue(s,Ct)}}))}return a=mergeBreakpointsInOrder(n.breakpoints,a),a};function createStack(t={}){const{createStyledComponent:n=defaultCreateStyledComponent,useThemeProps:a=useThemePropsDefault,componentName:s="MuiStack"}=t,l=()=>composeClasses({root:["root"]},Ct=>generateUtilityClass(s,Ct),{}),u=n(style);return reactExports.forwardRef(function(Ct,ar){const en=a(Ct),tn=extendSxProp$1(en),{component:on="div",direction:cn="column",spacing:dn=0,divider:Cn,children:In,className:ix,useFlexGap:ax=!1,...ox}=tn,sx={direction:cn,spacing:dn,useFlexGap:ax},ux=l();return jsxRuntimeExports.jsx(u,{as:on,ownerState:sx,ref:ar,className:clsx(ux.root,ix),...ox,children:Cn?joinChildren(In,Cn):In})})}const common={black:"#000",white:"#fff"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(t,n,a,s){const l=s.light||s,u=s.dark||s*1.5;t[n]||(t.hasOwnProperty(a)?t[n]=t[a]:n==="light"?t.light=lighten(t.main,l):n==="dark"&&(t.dark=darken(t.main,u)))}function mixLightOrDark(t,n,a,s,l){const u=l.light||l,c=l.dark||l*1.5;n[a]||(n.hasOwnProperty(s)?n[a]=n[s]:a==="light"?n.light=`color-mix(in ${t}, ${n.main}, #fff ${(u*100).toFixed(0)}%)`:a==="dark"&&(n.dark=`color-mix(in ${t}, ${n.main}, #000 ${(c*100).toFixed(0)}%)`))}function getDefaultPrimary(t="light"){return t==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(t="light"){return t==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(t="light"){return t==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(t="light"){return t==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(t="light"){return t==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(t="light"){return t==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function contrastColor$1(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function createPalette(t){const{mode:n="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:l,...u}=t,c=t.primary||getDefaultPrimary(n),d=t.secondary||getDefaultSecondary(n),Ct=t.error||getDefaultError(n),ar=t.info||getDefaultInfo(n),en=t.success||getDefaultSuccess(n),tn=t.warning||getDefaultWarning(n);function on(In){return l?contrastColor$1(In):getContrastRatio(In,dark.text.primary)>=a?dark.text.primary:light.text.primary}const cn=({color:In,name:ix,mainShade:ax=500,lightShade:ox=300,darkShade:sx=700})=>{if(In={...In},!In.main&&In[ax]&&(In.main=In[ax]),!In.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,ix?` (${ix})`:"",ax));if(typeof In.main!="string")throw new Error(formatMuiErrorMessage(12,ix?` (${ix})`:"",JSON.stringify(In.main)));return l?(mixLightOrDark(l,In,"light",ox,s),mixLightOrDark(l,In,"dark",sx,s)):(addLightOrDark(In,"light",ox,s),addLightOrDark(In,"dark",sx,s)),In.contrastText||(In.contrastText=on(In.main)),In};let dn;return n==="light"?dn=getLight():n==="dark"&&(dn=getDark()),deepmerge({common:{...common},mode:n,primary:cn({color:c,name:"primary"}),secondary:cn({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:cn({color:Ct,name:"error"}),warning:cn({color:tn,name:"warning"}),info:cn({color:ar,name:"info"}),success:cn({color:en,name:"success"}),grey,contrastThreshold:a,getContrastText:on,augmentColor:cn,tonalOffset:s,...dn},u)}function prepareTypographyVars(t){const n={};return Object.entries(t).forEach(s=>{const[l,u]=s;typeof u=="object"&&(n[l]=`${u.fontStyle?`${u.fontStyle} `:""}${u.fontVariant?`${u.fontVariant} `:""}${u.fontWeight?`${u.fontWeight} `:""}${u.fontStretch?`${u.fontStretch} `:""}${u.fontSize||""}${u.lineHeight?`/${u.lineHeight} `:""}${u.fontFamily||""}`)}),n}function createMixins(t,n){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...n}}function round$6(t){return Math.round(t*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(t,n){const{fontFamily:a=defaultFontFamily,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:u=400,fontWeightMedium:c=500,fontWeightBold:d=700,htmlFontSize:Ct=16,allVariants:ar,pxToRem:en,...tn}=typeof n=="function"?n(t):n,on=s/14,cn=en||(In=>`${In/Ct*on}rem`),dn=(In,ix,ax,ox,sx)=>({fontFamily:a,fontWeight:In,fontSize:cn(ix),lineHeight:ax,...a===defaultFontFamily?{letterSpacing:`${round$6(ox/ix)}em`}:{},...sx,...ar}),Cn={h1:dn(l,96,1.167,-1.5),h2:dn(l,60,1.2,-.5),h3:dn(u,48,1.167,0),h4:dn(u,34,1.235,.25),h5:dn(u,24,1.334,0),h6:dn(c,20,1.6,.15),subtitle1:dn(u,16,1.75,.15),subtitle2:dn(c,14,1.57,.1),body1:dn(u,16,1.5,.15),body2:dn(u,14,1.43,.15),button:dn(c,14,1.75,.4,caseAllCaps),caption:dn(u,12,1.66,.4),overline:dn(u,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:Ct,pxToRem:cn,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:u,fontWeightMedium:c,fontWeightBold:d,...Cn},tn,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(t){return`${Math.round(t)}ms`}function getAutoHeightDuration(t){if(!t)return 0;const n=t/36;return Math.min(Math.round((4+15*n**.25+n/5)*10),3e3)}function createTransitions(t){const n={...easing,...t.easing},a={...duration,...t.duration};return{getAutoHeightDuration,create:(l=["all"],u={})=>{const{duration:c=a.standard,easing:d=n.easeInOut,delay:Ct=0,...ar}=u;return(Array.isArray(l)?l:[l]).map(en=>`${en} ${typeof c=="string"?c:formatMs(c)} ${d} ${typeof Ct=="string"?Ct:formatMs(Ct)}`).join(",")},...t,easing:n,duration:a}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(t){return isPlainObject(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function stringifyTheme(t={}){const n={...t};function a(s){const l=Object.entries(s);for(let u=0;u<l.length;u++){const[c,d]=l[u];!isSerializable(d)||c.startsWith("unstable_")?delete s[c]:isPlainObject(d)&&(s[c]={...d},a(s[c]))}}return a(n),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(n,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function coefficientToPercentage(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const parseAddition=t=>{if(!Number.isNaN(+t))return+t;const n=t.match(/\d*\.?\d+/g);if(!n)return 0;let a=0;for(let s=0;s<n.length;s+=1)a+=+n[s];return a};function attachColorManipulators(t){Object.assign(t,{alpha(n,a){const s=this||t;return s.colorSpace?`oklch(from ${n} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${n.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:alpha$1(n,parseAddition(a))},lighten(n,a){const s=this||t;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${n}, #fff ${coefficientToPercentage(a)})`:lighten(n,a)},darken(n,a){const s=this||t;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${n}, #000 ${coefficientToPercentage(a)})`:darken(n,a)}})}function createThemeNoVars(t={},...n){const{breakpoints:a,mixins:s={},spacing:l,palette:u={},transitions:c={},typography:d={},shape:Ct,colorSpace:ar,...en}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const tn=createPalette({...u,colorSpace:ar}),on=createTheme$1(t);let cn=deepmerge(on,{mixins:createMixins(on.breakpoints,s),palette:tn,shadows:shadows.slice(),typography:createTypography(tn,d),transitions:createTransitions(c),zIndex:{...zIndex}});return cn=deepmerge(cn,en),cn=n.reduce((dn,Cn)=>deepmerge(dn,Cn),cn),cn.unstable_sxConfig={...defaultSxConfig,...en?.unstable_sxConfig},cn.unstable_sx=function(Cn){return styleFunctionSx({sx:Cn,theme:this})},cn.toRuntimeSource=stringifyTheme,attachColorManipulators(cn),cn}function getOverlayAlpha(t){let n;return t<1?n=5.11916*t**2:n=4.5*Math.log(t+1)+2,Math.round(n*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((t,n)=>{if(n===0)return"none";const a=getOverlayAlpha(n);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function getOpacity(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function getOverlays(t){return t==="dark"?defaultDarkOverlays:[]}function createColorScheme(t){const{palette:n={mode:"light"},opacity:a,overlays:s,colorSpace:l,...u}=t,c=createPalette({...n,colorSpace:l});return{palette:c,opacity:{...getOpacity(c.mode),...a},overlays:s||getOverlays(c.mode),...u}}function shouldSkipGeneratingVar(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const excludeVariablesFromRoot=t=>[...[...Array(25)].map((n,a)=>`--${t?`${t}-`:""}overlays-${a}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],defaultGetSelector=t=>(n,a)=>{const s=t.rootSelector||":root",l=t.colorSchemeSelector;let u=l;if(l==="class"&&(u=".%s"),l==="data"&&(u="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(u=`[${l}="%s"]`),t.defaultColorScheme===n){if(n==="dark"){const c={};return excludeVariablesFromRoot(t.cssVarPrefix).forEach(d=>{c[d]=a[d],delete a[d]}),u==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:c}}:u?{[u.replace("%s",n)]:c,[`${s}, ${u.replace("%s",n)}`]:a}:{[s]:{...a,...c}}}if(u&&u!=="media")return`${s}, ${u.replace("%s",String(n))}`}else if(n){if(u==="media")return{[`@media (prefers-color-scheme: ${String(n)})`]:{[s]:a}};if(u)return u.replace("%s",String(n))}return s};function assignNode(t,n){n.forEach(a=>{t[a]||(t[a]={})})}function setColor(t,n,a){!t[n]&&a&&(t[n]=a)}function toRgb(t){return typeof t!="string"||!t.startsWith("hsl")?t:hslToRgb(t)}function setColorChannel(t,n){`${n}Channel`in t||(t[`${n}Channel`]=private_safeColorChannel(toRgb(t[n])))}function getSpacingVal(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const silent=t=>{try{return t()}catch{}},createGetCssVar=(t="mui")=>createGetCssVar$1(t);function attachColorScheme$1(t,n,a,s,l){if(!a)return;a=a===!0?{}:a;const u=l==="dark"?"dark":"light";if(!s){n[l]=createColorScheme({...a,palette:{mode:u,...a?.palette},colorSpace:t});return}const{palette:c,...d}=createThemeNoVars({...s,palette:{mode:u,...a?.palette},colorSpace:t});return n[l]={...a,palette:c,opacity:{...getOpacity(u),...a?.opacity},overlays:a?.overlays||getOverlays(u)},d}function createThemeWithVars(t={},...n){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:l=!1,cssVarPrefix:u="mui",nativeColor:c=!1,shouldSkipGeneratingVar:d=shouldSkipGeneratingVar,colorSchemeSelector:Ct=a.light&&a.dark?"media":void 0,rootSelector:ar=":root",...en}=t,tn=Object.keys(a)[0],on=s||(a.light&&tn!=="light"?"light":tn),cn=createGetCssVar(u),{[on]:dn,light:Cn,dark:In,...ix}=a,ax={...ix};let ox=dn;if((on==="dark"&&!("dark"in a)||on==="light"&&!("light"in a))&&(ox=!0),!ox)throw new Error(formatMuiErrorMessage(21,on));let sx;c&&(sx="oklch");const ux=attachColorScheme$1(sx,ax,ox,en,on);Cn&&!ax.light&&attachColorScheme$1(sx,ax,Cn,void 0,"light"),In&&!ax.dark&&attachColorScheme$1(sx,ax,In,void 0,"dark");let cx={defaultColorScheme:on,...ux,cssVarPrefix:u,colorSchemeSelector:Ct,rootSelector:ar,getCssVar:cn,colorSchemes:ax,font:{...prepareTypographyVars(ux.typography),...ux.font},spacing:getSpacingVal(en.spacing)};Object.keys(cx.colorSchemes).forEach(mx=>{const vx=cx.colorSchemes[mx].palette,bx=_x=>{const Ex=_x.split("-"),Tx=Ex[1],Cx=Ex[2];return cn(_x,vx[Tx][Cx])};vx.mode==="light"&&(setColor(vx.common,"background","#fff"),setColor(vx.common,"onBackground","#000")),vx.mode==="dark"&&(setColor(vx.common,"background","#000"),setColor(vx.common,"onBackground","#fff"));function xx(_x,Ex,Tx){if(sx){let Cx;return _x===private_safeAlpha&&(Cx=`transparent ${((1-Tx)*100).toFixed(0)}%`),_x===private_safeDarken&&(Cx=`#000 ${(Tx*100).toFixed(0)}%`),_x===private_safeLighten&&(Cx=`#fff ${(Tx*100).toFixed(0)}%`),`color-mix(in ${sx}, ${Ex}, ${Cx})`}return _x(Ex,Tx)}if(assignNode(vx,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),vx.mode==="light"){setColor(vx.Alert,"errorColor",xx(private_safeDarken,vx.error.light,.6)),setColor(vx.Alert,"infoColor",xx(private_safeDarken,vx.info.light,.6)),setColor(vx.Alert,"successColor",xx(private_safeDarken,vx.success.light,.6)),setColor(vx.Alert,"warningColor",xx(private_safeDarken,vx.warning.light,.6)),setColor(vx.Alert,"errorFilledBg",bx("palette-error-main")),setColor(vx.Alert,"infoFilledBg",bx("palette-info-main")),setColor(vx.Alert,"successFilledBg",bx("palette-success-main")),setColor(vx.Alert,"warningFilledBg",bx("palette-warning-main")),setColor(vx.Alert,"errorFilledColor",silent(()=>vx.getContrastText(vx.error.main))),setColor(vx.Alert,"infoFilledColor",silent(()=>vx.getContrastText(vx.info.main))),setColor(vx.Alert,"successFilledColor",silent(()=>vx.getContrastText(vx.success.main))),setColor(vx.Alert,"warningFilledColor",silent(()=>vx.getContrastText(vx.warning.main))),setColor(vx.Alert,"errorStandardBg",xx(private_safeLighten,vx.error.light,.9)),setColor(vx.Alert,"infoStandardBg",xx(private_safeLighten,vx.info.light,.9)),setColor(vx.Alert,"successStandardBg",xx(private_safeLighten,vx.success.light,.9)),setColor(vx.Alert,"warningStandardBg",xx(private_safeLighten,vx.warning.light,.9)),setColor(vx.Alert,"errorIconColor",bx("palette-error-main")),setColor(vx.Alert,"infoIconColor",bx("palette-info-main")),setColor(vx.Alert,"successIconColor",bx("palette-success-main")),setColor(vx.Alert,"warningIconColor",bx("palette-warning-main")),setColor(vx.AppBar,"defaultBg",bx("palette-grey-100")),setColor(vx.Avatar,"defaultBg",bx("palette-grey-400")),setColor(vx.Button,"inheritContainedBg",bx("palette-grey-300")),setColor(vx.Button,"inheritContainedHoverBg",bx("palette-grey-A100")),setColor(vx.Chip,"defaultBorder",bx("palette-grey-400")),setColor(vx.Chip,"defaultAvatarColor",bx("palette-grey-700")),setColor(vx.Chip,"defaultIconColor",bx("palette-grey-700")),setColor(vx.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(vx.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(vx.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(vx.LinearProgress,"primaryBg",xx(private_safeLighten,vx.primary.main,.62)),setColor(vx.LinearProgress,"secondaryBg",xx(private_safeLighten,vx.secondary.main,.62)),setColor(vx.LinearProgress,"errorBg",xx(private_safeLighten,vx.error.main,.62)),setColor(vx.LinearProgress,"infoBg",xx(private_safeLighten,vx.info.main,.62)),setColor(vx.LinearProgress,"successBg",xx(private_safeLighten,vx.success.main,.62)),setColor(vx.LinearProgress,"warningBg",xx(private_safeLighten,vx.warning.main,.62)),setColor(vx.Skeleton,"bg",sx?xx(private_safeAlpha,vx.text.primary,.11):`rgba(${bx("palette-text-primaryChannel")} / 0.11)`),setColor(vx.Slider,"primaryTrack",xx(private_safeLighten,vx.primary.main,.62)),setColor(vx.Slider,"secondaryTrack",xx(private_safeLighten,vx.secondary.main,.62)),setColor(vx.Slider,"errorTrack",xx(private_safeLighten,vx.error.main,.62)),setColor(vx.Slider,"infoTrack",xx(private_safeLighten,vx.info.main,.62)),setColor(vx.Slider,"successTrack",xx(private_safeLighten,vx.success.main,.62)),setColor(vx.Slider,"warningTrack",xx(private_safeLighten,vx.warning.main,.62));const _x=sx?xx(private_safeDarken,vx.background.default,.6825):private_safeEmphasize(vx.background.default,.8);setColor(vx.SnackbarContent,"bg",_x),setColor(vx.SnackbarContent,"color",silent(()=>sx?dark.text.primary:vx.getContrastText(_x))),setColor(vx.SpeedDialAction,"fabHoverBg",private_safeEmphasize(vx.background.paper,.15)),setColor(vx.StepConnector,"border",bx("palette-grey-400")),setColor(vx.StepContent,"border",bx("palette-grey-400")),setColor(vx.Switch,"defaultColor",bx("palette-common-white")),setColor(vx.Switch,"defaultDisabledColor",bx("palette-grey-100")),setColor(vx.Switch,"primaryDisabledColor",xx(private_safeLighten,vx.primary.main,.62)),setColor(vx.Switch,"secondaryDisabledColor",xx(private_safeLighten,vx.secondary.main,.62)),setColor(vx.Switch,"errorDisabledColor",xx(private_safeLighten,vx.error.main,.62)),setColor(vx.Switch,"infoDisabledColor",xx(private_safeLighten,vx.info.main,.62)),setColor(vx.Switch,"successDisabledColor",xx(private_safeLighten,vx.success.main,.62)),setColor(vx.Switch,"warningDisabledColor",xx(private_safeLighten,vx.warning.main,.62)),setColor(vx.TableCell,"border",xx(private_safeLighten,xx(private_safeAlpha,vx.divider,1),.88)),setColor(vx.Tooltip,"bg",xx(private_safeAlpha,vx.grey[700],.92))}if(vx.mode==="dark"){setColor(vx.Alert,"errorColor",xx(private_safeLighten,vx.error.light,.6)),setColor(vx.Alert,"infoColor",xx(private_safeLighten,vx.info.light,.6)),setColor(vx.Alert,"successColor",xx(private_safeLighten,vx.success.light,.6)),setColor(vx.Alert,"warningColor",xx(private_safeLighten,vx.warning.light,.6)),setColor(vx.Alert,"errorFilledBg",bx("palette-error-dark")),setColor(vx.Alert,"infoFilledBg",bx("palette-info-dark")),setColor(vx.Alert,"successFilledBg",bx("palette-success-dark")),setColor(vx.Alert,"warningFilledBg",bx("palette-warning-dark")),setColor(vx.Alert,"errorFilledColor",silent(()=>vx.getContrastText(vx.error.dark))),setColor(vx.Alert,"infoFilledColor",silent(()=>vx.getContrastText(vx.info.dark))),setColor(vx.Alert,"successFilledColor",silent(()=>vx.getContrastText(vx.success.dark))),setColor(vx.Alert,"warningFilledColor",silent(()=>vx.getContrastText(vx.warning.dark))),setColor(vx.Alert,"errorStandardBg",xx(private_safeDarken,vx.error.light,.9)),setColor(vx.Alert,"infoStandardBg",xx(private_safeDarken,vx.info.light,.9)),setColor(vx.Alert,"successStandardBg",xx(private_safeDarken,vx.success.light,.9)),setColor(vx.Alert,"warningStandardBg",xx(private_safeDarken,vx.warning.light,.9)),setColor(vx.Alert,"errorIconColor",bx("palette-error-main")),setColor(vx.Alert,"infoIconColor",bx("palette-info-main")),setColor(vx.Alert,"successIconColor",bx("palette-success-main")),setColor(vx.Alert,"warningIconColor",bx("palette-warning-main")),setColor(vx.AppBar,"defaultBg",bx("palette-grey-900")),setColor(vx.AppBar,"darkBg",bx("palette-background-paper")),setColor(vx.AppBar,"darkColor",bx("palette-text-primary")),setColor(vx.Avatar,"defaultBg",bx("palette-grey-600")),setColor(vx.Button,"inheritContainedBg",bx("palette-grey-800")),setColor(vx.Button,"inheritContainedHoverBg",bx("palette-grey-700")),setColor(vx.Chip,"defaultBorder",bx("palette-grey-700")),setColor(vx.Chip,"defaultAvatarColor",bx("palette-grey-300")),setColor(vx.Chip,"defaultIconColor",bx("palette-grey-300")),setColor(vx.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(vx.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(vx.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(vx.LinearProgress,"primaryBg",xx(private_safeDarken,vx.primary.main,.5)),setColor(vx.LinearProgress,"secondaryBg",xx(private_safeDarken,vx.secondary.main,.5)),setColor(vx.LinearProgress,"errorBg",xx(private_safeDarken,vx.error.main,.5)),setColor(vx.LinearProgress,"infoBg",xx(private_safeDarken,vx.info.main,.5)),setColor(vx.LinearProgress,"successBg",xx(private_safeDarken,vx.success.main,.5)),setColor(vx.LinearProgress,"warningBg",xx(private_safeDarken,vx.warning.main,.5)),setColor(vx.Skeleton,"bg",sx?xx(private_safeAlpha,vx.text.primary,.13):`rgba(${bx("palette-text-primaryChannel")} / 0.13)`),setColor(vx.Slider,"primaryTrack",xx(private_safeDarken,vx.primary.main,.5)),setColor(vx.Slider,"secondaryTrack",xx(private_safeDarken,vx.secondary.main,.5)),setColor(vx.Slider,"errorTrack",xx(private_safeDarken,vx.error.main,.5)),setColor(vx.Slider,"infoTrack",xx(private_safeDarken,vx.info.main,.5)),setColor(vx.Slider,"successTrack",xx(private_safeDarken,vx.success.main,.5)),setColor(vx.Slider,"warningTrack",xx(private_safeDarken,vx.warning.main,.5));const _x=sx?xx(private_safeLighten,vx.background.default,.985):private_safeEmphasize(vx.background.default,.98);setColor(vx.SnackbarContent,"bg",_x),setColor(vx.SnackbarContent,"color",silent(()=>sx?light.text.primary:vx.getContrastText(_x))),setColor(vx.SpeedDialAction,"fabHoverBg",private_safeEmphasize(vx.background.paper,.15)),setColor(vx.StepConnector,"border",bx("palette-grey-600")),setColor(vx.StepContent,"border",bx("palette-grey-600")),setColor(vx.Switch,"defaultColor",bx("palette-grey-300")),setColor(vx.Switch,"defaultDisabledColor",bx("palette-grey-600")),setColor(vx.Switch,"primaryDisabledColor",xx(private_safeDarken,vx.primary.main,.55)),setColor(vx.Switch,"secondaryDisabledColor",xx(private_safeDarken,vx.secondary.main,.55)),setColor(vx.Switch,"errorDisabledColor",xx(private_safeDarken,vx.error.main,.55)),setColor(vx.Switch,"infoDisabledColor",xx(private_safeDarken,vx.info.main,.55)),setColor(vx.Switch,"successDisabledColor",xx(private_safeDarken,vx.success.main,.55)),setColor(vx.Switch,"warningDisabledColor",xx(private_safeDarken,vx.warning.main,.55)),setColor(vx.TableCell,"border",xx(private_safeDarken,xx(private_safeAlpha,vx.divider,1),.68)),setColor(vx.Tooltip,"bg",xx(private_safeAlpha,vx.grey[700],.92))}setColorChannel(vx.background,"default"),setColorChannel(vx.background,"paper"),setColorChannel(vx.common,"background"),setColorChannel(vx.common,"onBackground"),setColorChannel(vx,"divider"),Object.keys(vx).forEach(_x=>{const Ex=vx[_x];_x!=="tonalOffset"&&Ex&&typeof Ex=="object"&&(Ex.main&&setColor(vx[_x],"mainChannel",private_safeColorChannel(toRgb(Ex.main))),Ex.light&&setColor(vx[_x],"lightChannel",private_safeColorChannel(toRgb(Ex.light))),Ex.dark&&setColor(vx[_x],"darkChannel",private_safeColorChannel(toRgb(Ex.dark))),Ex.contrastText&&setColor(vx[_x],"contrastTextChannel",private_safeColorChannel(toRgb(Ex.contrastText))),_x==="text"&&(setColorChannel(vx[_x],"primary"),setColorChannel(vx[_x],"secondary")),_x==="action"&&(Ex.active&&setColorChannel(vx[_x],"active"),Ex.selected&&setColorChannel(vx[_x],"selected")))})}),cx=n.reduce((mx,vx)=>deepmerge(mx,vx),cx);const hx={prefix:u,disableCssColorScheme:l,shouldSkipGeneratingVar:d,getSelector:defaultGetSelector(cx),enableContrastVars:c},{vars:gx,generateThemeVars:fx,generateStyleSheets:dx}=prepareCssVars(cx,hx);return cx.vars=gx,Object.entries(cx.colorSchemes[cx.defaultColorScheme]).forEach(([mx,vx])=>{cx[mx]=vx}),cx.generateThemeVars=fx,cx.generateStyleSheets=dx,cx.generateSpacing=function(){return createSpacing(en.spacing,createUnarySpacing(this))},cx.getColorSchemeSelector=createGetColorSchemeSelector(Ct),cx.spacing=cx.generateSpacing(),cx.shouldSkipGeneratingVar=d,cx.unstable_sxConfig={...defaultSxConfig,...en?.unstable_sxConfig},cx.unstable_sx=function(vx){return styleFunctionSx({sx:vx,theme:this})},cx.toRuntimeSource=stringifyTheme,cx}function attachColorScheme(t,n,a){t.colorSchemes&&a&&(t.colorSchemes[n]={...a!==!0&&a,palette:createPalette({...a===!0?{}:a.palette,mode:n})})}function createTheme(t={},...n){const{palette:a,cssVariables:s=!1,colorSchemes:l=a?void 0:{light:!0},defaultColorScheme:u=a?.mode,...c}=t,d=u||"light",Ct=l?.[d],ar={...l,...a?{[d]:{...typeof Ct!="boolean"&&Ct,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in t))return createThemeNoVars(t,...n);let en=a;"palette"in t||ar[d]&&(ar[d]!==!0?en=ar[d].palette:d==="dark"&&(en={mode:"dark"}));const tn=createThemeNoVars({...t,palette:en},...n);return tn.defaultColorScheme=d,tn.colorSchemes=ar,tn.palette.mode==="light"&&(tn.colorSchemes.light={...ar.light!==!0&&ar.light,palette:tn.palette},attachColorScheme(tn,"dark",ar.dark)),tn.palette.mode==="dark"&&(tn.colorSchemes.dark={...ar.dark!==!0&&ar.dark,palette:tn.palette},attachColorScheme(tn,"light",ar.light)),tn}return!a&&!("light"in ar)&&d==="light"&&(ar.light=!0),createThemeWithVars({...c,colorSchemes:ar,defaultColorScheme:d,...typeof s!="boolean"&&s},...n)}const defaultTheme$1=createTheme(),THEME_ID="$$material";function useTheme(){const t=useTheme$2(defaultTheme$1);return t[THEME_ID]||t}function GlobalStyles(t){return jsxRuntimeExports.jsx(GlobalStyles$1,{...t,defaultTheme:defaultTheme$1,themeId:THEME_ID})}function slotShouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const rootShouldForwardProp=t=>slotShouldForwardProp(t)&&t!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function globalCss(t){return function(a){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof t=="function"?s=>t({theme:s,...a}):t})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(t){return useDefaultProps$1(t)}function getSvgIconUtilityClass(t){return generateUtilityClass("MuiSvgIcon",t)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$H=t=>{const{color:n,fontSize:a,classes:s}=t,l={root:["root",n!=="inherit"&&`color${capitalize(n)}`,`fontSize${capitalize(a)}`]};return composeClasses(l,getSvgIconUtilityClass,s)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color!=="inherit"&&n[`color${capitalize(a.color)}`],n[`fontSize${capitalize(a.fontSize)}`]]}})(memoTheme(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:n=>!n.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,n])=>n&&n.main).map(([n])=>({props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),SvgIcon=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiSvgIcon"}),{children:l,className:u,color:c="inherit",component:d="svg",fontSize:Ct="medium",htmlColor:ar,inheritViewBox:en=!1,titleAccess:tn,viewBox:on="0 0 24 24",...cn}=s,dn=reactExports.isValidElement(l)&&l.type==="svg",Cn={...s,color:c,component:d,fontSize:Ct,instanceFontSize:n.fontSize,inheritViewBox:en,viewBox:on,hasSvgAsChild:dn},In={};en||(In.viewBox=on);const ix=useUtilityClasses$H(Cn);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:d,className:clsx(ix.root,u),focusable:"false",color:ar,"aria-hidden":tn?void 0:!0,role:tn?"img":void 0,ref:a,...In,...cn,...dn&&l.props,ownerState:Cn,children:[dn?l.props.children:l,tn?jsxRuntimeExports.jsx("title",{children:tn}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(t,n){function a(s,l){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":void 0,ref:l,...s,children:t})}return a.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(a))}function debounce$2(t,n=166){let a;function s(...l){const u=()=>{t.apply(this,l)};clearTimeout(a),a=setTimeout(u,n)}return s.clear=()=>{clearTimeout(a)},s}function ownerDocument(t){return t&&t.ownerDocument||document}function ownerWindow(t){return ownerDocument(t).defaultView||window}function setRef(t,n){typeof t=="function"?t(n):t&&(t.current=n)}function useControlled(t){const{controlled:n,default:a,name:s,state:l="value"}=t,{current:u}=reactExports.useRef(n!==void 0),[c,d]=reactExports.useState(a),Ct=u?n:c,ar=reactExports.useCallback(en=>{u||d(en)},[]);return[Ct,ar]}function useEventCallback(t){const n=reactExports.useRef(t);return useEnhancedEffect(()=>{n.current=t}),reactExports.useRef((...a)=>(0,n.current)(...a)).current}function useForkRef(...t){const n=reactExports.useRef(void 0),a=reactExports.useCallback(s=>{const l=t.map(u=>{if(u==null)return null;if(typeof u=="function"){const c=u,d=c(s);return typeof d=="function"?d:()=>{c(null)}}return u.current=s,()=>{u.current=null}});return()=>{l.forEach(u=>u?.())}},t);return reactExports.useMemo(()=>t.every(s=>s==null)?null:s=>{n.current&&(n.current(),n.current=void 0),s!=null&&(n.current=a(s))},t)}function isEventHandler(t,n){const a=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&a>=65&&a<=90&&typeof n=="function"}function mergeSlotProps$1(t,n){if(!t)return n;function a(c,d){const Ct={};return Object.keys(d).forEach(ar=>{isEventHandler(ar,d[ar])&&typeof c[ar]=="function"&&(Ct[ar]=(...en)=>{c[ar](...en),d[ar](...en)})}),Ct}if(typeof t=="function"||typeof n=="function")return c=>{const d=typeof n=="function"?n(c):n,Ct=typeof t=="function"?t({...c,...d}):t,ar=clsx(c?.className,d?.className,Ct?.className),en=a(Ct,d);return{...d,...Ct,...en,...!!ar&&{className:ar},...d?.style&&Ct?.style&&{style:{...d.style,...Ct.style}},...d?.sx&&Ct?.sx&&{sx:[...Array.isArray(d.sx)?d.sx:[d.sx],...Array.isArray(Ct.sx)?Ct.sx:[Ct.sx]]}}};const s=n,l=a(t,s),u=clsx(s?.className,t?.className);return{...n,...t,...l,...!!u&&{className:u},...s?.style&&t?.style&&{style:{...s.style,...t.style}},...s?.sx&&t?.sx&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function isFocusVisible(t){try{return t.matches(":focus-visible")}catch{}return!1}const UNINITIALIZED={};function useLazyRef(t,n){const a=reactExports.useRef(UNINITIALIZED);return a.current===UNINITIALIZED&&(a.current=t(n)),a}class LazyRipple{static create(){return new LazyRipple}static use(){const n=useLazyRef(LazyRipple.create).current,[a,s]=reactExports.useState(!1);return n.shouldMount=a,n.setShouldMount=s,reactExports.useEffect(n.mountEffect,[a]),n}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...n){this.mount().then(()=>this.ref.current?.start(...n))}stop(...n){this.mount().then(()=>this.ref.current?.stop(...n))}pulsate(...n){this.mount().then(()=>this.ref.current?.pulsate(...n))}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let t,n;const a=new Promise((s,l)=>{t=s,n=l});return a.resolve=t,a.reject=n,a}function _objectWithoutPropertiesLoose(t,n){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;a[s]=t[s]}return a}function _setPrototypeOf(t,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},_setPrototypeOf(t,n)}function _inheritsLoose(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,_setPrototypeOf(t,n)}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(n){return n.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=(function(t){_inheritsLoose(n,t);function n(s,l){var u;u=t.call(this,s,l)||this;var c=l,d=c&&!c.isMounting?s.enter:s.appear,Ct;return u.appearStatus=null,s.in?d?(Ct=EXITED,u.appearStatus=ENTERING):Ct=ENTERED:s.unmountOnExit||s.mountOnEnter?Ct=UNMOUNTED:Ct=EXITED,u.state={status:Ct},u.nextCallback=null,u}n.getDerivedStateFromProps=function(l,u){var c=l.in;return c&&u.status===UNMOUNTED?{status:EXITED}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(l){var u=null;if(l!==this.props){var c=this.state.status;this.props.in?c!==ENTERING&&c!==ENTERED&&(u=ENTERING):(c===ENTERING||c===ENTERED)&&(u=EXITING)}this.updateStatus(!1,u)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var l=this.props.timeout,u,c,d;return u=c=d=l,l!=null&&typeof l!="number"&&(u=l.exit,c=l.enter,d=l.appear!==void 0?l.appear:c),{exit:u,enter:c,appear:d}},a.updateStatus=function(l,u){if(l===void 0&&(l=!1),u!==null)if(this.cancelNextCallback(),u===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);c&&forceReflow(c)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},a.performEnter=function(l){var u=this,c=this.props.enter,d=this.context?this.context.isMounting:l,Ct=this.props.nodeRef?[d]:[ReactDOM.findDOMNode(this),d],ar=Ct[0],en=Ct[1],tn=this.getTimeouts(),on=d?tn.appear:tn.enter;if(!l&&!c||config$1.disabled){this.safeSetState({status:ENTERED},function(){u.props.onEntered(ar)});return}this.props.onEnter(ar,en),this.safeSetState({status:ENTERING},function(){u.props.onEntering(ar,en),u.onTransitionEnd(on,function(){u.safeSetState({status:ENTERED},function(){u.props.onEntered(ar,en)})})})},a.performExit=function(){var l=this,u=this.props.exit,c=this.getTimeouts(),d=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!u||config$1.disabled){this.safeSetState({status:EXITED},function(){l.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:EXITING},function(){l.props.onExiting(d),l.onTransitionEnd(c.exit,function(){l.safeSetState({status:EXITED},function(){l.props.onExited(d)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(l,u){u=this.setNextCallback(u),this.setState(l,u)},a.setNextCallback=function(l){var u=this,c=!0;return this.nextCallback=function(d){c&&(c=!1,u.nextCallback=null,l(d))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},a.onTransitionEnd=function(l,u){this.setNextCallback(u);var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),d=l==null&&!this.props.addEndListener;if(!c||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var Ct=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],ar=Ct[0],en=Ct[1];this.props.addEndListener(ar,en)}l!=null&&setTimeout(this.nextCallback,l)},a.render=function(){var l=this.state.status;if(l===UNMOUNTED)return null;var u=this.props,c=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var d=_objectWithoutPropertiesLoose(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof c=="function"?c(l,d):React.cloneElement(React.Children.only(c),d))},n})(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function getChildMapping(t,n){var a=function(u){return n&&reactExports.isValidElement(u)?n(u):u},s=Object.create(null);return t&&reactExports.Children.map(t,function(l){return l}).forEach(function(l){s[l.key]=a(l)}),s}function mergeChildMappings(t,n){t=t||{},n=n||{};function a(en){return en in n?n[en]:t[en]}var s=Object.create(null),l=[];for(var u in t)u in n?l.length&&(s[u]=l,l=[]):l.push(u);var c,d={};for(var Ct in n){if(s[Ct])for(c=0;c<s[Ct].length;c++){var ar=s[Ct][c];d[s[Ct][c]]=a(ar)}d[Ct]=a(Ct)}for(c=0;c<l.length;c++)d[l[c]]=a(l[c]);return d}function getProp(t,n,a){return a[n]!=null?a[n]:t.props[n]}function getInitialChildMapping(t,n){return getChildMapping(t.children,function(a){return reactExports.cloneElement(a,{onExited:n.bind(null,a),in:!0,appear:getProp(a,"appear",t),enter:getProp(a,"enter",t),exit:getProp(a,"exit",t)})})}function getNextChildMapping(t,n,a){var s=getChildMapping(t.children),l=mergeChildMappings(n,s);return Object.keys(l).forEach(function(u){var c=l[u];if(reactExports.isValidElement(c)){var d=u in n,Ct=u in s,ar=n[u],en=reactExports.isValidElement(ar)&&!ar.props.in;Ct&&(!d||en)?l[u]=reactExports.cloneElement(c,{onExited:a.bind(null,c),in:!0,exit:getProp(c,"exit",t),enter:getProp(c,"enter",t)}):!Ct&&d&&!en?l[u]=reactExports.cloneElement(c,{in:!1}):Ct&&d&&reactExports.isValidElement(ar)&&(l[u]=reactExports.cloneElement(c,{onExited:a.bind(null,c),in:ar.props.in,exit:getProp(c,"exit",t),enter:getProp(c,"enter",t)}))}}),l}var values=Object.values||function(t){return Object.keys(t).map(function(n){return t[n]})},defaultProps={component:"div",childFactory:function(n){return n}},TransitionGroup=(function(t){_inheritsLoose(n,t);function n(s,l){var u;u=t.call(this,s,l)||this;var c=u.handleExited.bind(_assertThisInitialized(u));return u.state={contextValue:{isMounting:!0},handleExited:c,firstRender:!0},u}var a=n.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(l,u){var c=u.children,d=u.handleExited,Ct=u.firstRender;return{children:Ct?getInitialChildMapping(l,d):getNextChildMapping(l,c,d),firstRender:!1}},a.handleExited=function(l,u){var c=getChildMapping(this.props.children);l.key in c||(l.props.onExited&&l.props.onExited(u),this.mounted&&this.setState(function(d){var Ct=_extends({},d.children);return delete Ct[l.key],{children:Ct}}))},a.render=function(){var l=this.props,u=l.component,c=l.childFactory,d=_objectWithoutPropertiesLoose(l,["component","childFactory"]),Ct=this.state.contextValue,ar=values(this.state.children).map(c);return delete d.appear,delete d.enter,delete d.exit,u===null?React.createElement(TransitionGroupContext.Provider,{value:Ct},ar):React.createElement(TransitionGroupContext.Provider,{value:Ct},React.createElement(u,d,ar))},n})(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const EMPTY=[];function useOnMount(t){reactExports.useEffect(t,EMPTY)}class Timeout{static create(){return new Timeout}currentId=null;start(n,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},n)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function useTimeout(){const t=useLazyRef(Timeout.create).current;return useOnMount(t.disposeEffect),t}function Ripple(t){const{className:n,classes:a,pulsate:s=!1,rippleX:l,rippleY:u,rippleSize:c,in:d,onExited:Ct,timeout:ar}=t,[en,tn]=reactExports.useState(!1),on=clsx(n,a.ripple,a.rippleVisible,s&&a.ripplePulsate),cn={width:c,height:c,top:-(c/2)+u,left:-(c/2)+l},dn=clsx(a.child,en&&a.childLeaving,s&&a.childPulsate);return!d&&!en&&tn(!0),reactExports.useEffect(()=>{if(!d&&Ct!=null){const Cn=setTimeout(Ct,ar);return()=>{clearTimeout(Cn)}}},[Ct,d,ar]),jsxRuntimeExports.jsx("span",{className:on,style:cn,children:jsxRuntimeExports.jsx("span",{className:dn})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTouchRipple"}),{center:l=!1,classes:u={},className:c,...d}=s,[Ct,ar]=reactExports.useState([]),en=reactExports.useRef(0),tn=reactExports.useRef(null);reactExports.useEffect(()=>{tn.current&&(tn.current(),tn.current=null)},[Ct]);const on=reactExports.useRef(!1),cn=useTimeout(),dn=reactExports.useRef(null),Cn=reactExports.useRef(null),In=reactExports.useCallback(sx=>{const{pulsate:ux,rippleX:cx,rippleY:hx,rippleSize:gx,cb:fx}=sx;ar(dx=>[...dx,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(u.ripple,touchRippleClasses.ripple),rippleVisible:clsx(u.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(u.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(u.child,touchRippleClasses.child),childLeaving:clsx(u.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(u.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:ux,rippleX:cx,rippleY:hx,rippleSize:gx},en.current)]),en.current+=1,tn.current=fx},[u]),ix=reactExports.useCallback((sx={},ux={},cx=()=>{})=>{const{pulsate:hx=!1,center:gx=l||ux.pulsate,fakeElement:fx=!1}=ux;if(sx?.type==="mousedown"&&on.current){on.current=!1;return}sx?.type==="touchstart"&&(on.current=!0);const dx=fx?null:Cn.current,mx=dx?dx.getBoundingClientRect():{width:0,height:0,left:0,top:0};let vx,bx,xx;if(gx||sx===void 0||sx.clientX===0&&sx.clientY===0||!sx.clientX&&!sx.touches)vx=Math.round(mx.width/2),bx=Math.round(mx.height/2);else{const{clientX:_x,clientY:Ex}=sx.touches&&sx.touches.length>0?sx.touches[0]:sx;vx=Math.round(_x-mx.left),bx=Math.round(Ex-mx.top)}if(gx)xx=Math.sqrt((2*mx.width**2+mx.height**2)/3),xx%2===0&&(xx+=1);else{const _x=Math.max(Math.abs((dx?dx.clientWidth:0)-vx),vx)*2+2,Ex=Math.max(Math.abs((dx?dx.clientHeight:0)-bx),bx)*2+2;xx=Math.sqrt(_x**2+Ex**2)}sx?.touches?dn.current===null&&(dn.current=()=>{In({pulsate:hx,rippleX:vx,rippleY:bx,rippleSize:xx,cb:cx})},cn.start(DELAY_RIPPLE,()=>{dn.current&&(dn.current(),dn.current=null)})):In({pulsate:hx,rippleX:vx,rippleY:bx,rippleSize:xx,cb:cx})},[l,In,cn]),ax=reactExports.useCallback(()=>{ix({},{pulsate:!0})},[ix]),ox=reactExports.useCallback((sx,ux)=>{if(cn.clear(),sx?.type==="touchend"&&dn.current){dn.current(),dn.current=null,cn.start(0,()=>{ox(sx,ux)});return}dn.current=null,ar(cx=>cx.length>0?cx.slice(1):cx),tn.current=ux},[cn]);return reactExports.useImperativeHandle(a,()=>({pulsate:ax,start:ix,stop:ox}),[ax,ix,ox]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,u.root,c),ref:Cn,...d,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:Ct})})});function getButtonBaseUtilityClass(t){return generateUtilityClass("MuiButtonBase",t)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$G=t=>{const{disabled:n,focusVisible:a,focusVisibleClassName:s,classes:l}=t,c=composeClasses({root:["root",n&&"disabled",a&&"focusVisible"]},getButtonBaseUtilityClass,l);return a&&s&&(c.root+=` ${s}`),c},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiButtonBase"}),{action:l,centerRipple:u=!1,children:c,className:d,component:Ct="button",disabled:ar=!1,disableRipple:en=!1,disableTouchRipple:tn=!1,focusRipple:on=!1,focusVisibleClassName:cn,LinkComponent:dn="a",onBlur:Cn,onClick:In,onContextMenu:ix,onDragLeave:ax,onFocus:ox,onFocusVisible:sx,onKeyDown:ux,onKeyUp:cx,onMouseDown:hx,onMouseLeave:gx,onMouseUp:fx,onTouchEnd:dx,onTouchMove:mx,onTouchStart:vx,tabIndex:bx=0,TouchRippleProps:xx,touchRippleRef:_x,type:Ex,...Tx}=s,Cx=reactExports.useRef(null),Mx=useLazyRipple(),Ax=useForkRef(Mx.ref,_x),[Nx,Ux]=reactExports.useState(!1);ar&&Nx&&Ux(!1),reactExports.useImperativeHandle(l,()=>({focusVisible:()=>{Ux(!0),Cx.current.focus()}}),[]);const Rx=Mx.shouldMount&&!en&&!ar;reactExports.useEffect(()=>{Nx&&on&&!en&&Mx.pulsate()},[en,on,Nx,Mx]);const Ox=useRippleHandler(Mx,"start",hx,tn),Px=useRippleHandler(Mx,"stop",ix,tn),$x=useRippleHandler(Mx,"stop",ax,tn),Lx=useRippleHandler(Mx,"stop",fx,tn),zx=useRippleHandler(Mx,"stop",EE=>{Nx&&EE.preventDefault(),gx&&gx(EE)},tn),qx=useRippleHandler(Mx,"start",vx,tn),jx=useRippleHandler(Mx,"stop",dx,tn),Hx=useRippleHandler(Mx,"stop",mx,tn),Vx=useRippleHandler(Mx,"stop",EE=>{isFocusVisible(EE.target)||Ux(!1),Cn&&Cn(EE)},!1),nE=useEventCallback(EE=>{Cx.current||(Cx.current=EE.currentTarget),isFocusVisible(EE.target)&&(Ux(!0),sx&&sx(EE)),ox&&ox(EE)}),Wx=()=>{const EE=Cx.current;return Ct&&Ct!=="button"&&!(EE.tagName==="A"&&EE.href)},tE=useEventCallback(EE=>{on&&!EE.repeat&&Nx&&EE.key===" "&&Mx.stop(EE,()=>{Mx.start(EE)}),EE.target===EE.currentTarget&&Wx()&&EE.key===" "&&EE.preventDefault(),ux&&ux(EE),EE.target===EE.currentTarget&&Wx()&&EE.key==="Enter"&&!ar&&(EE.preventDefault(),In&&In(EE))}),lE=useEventCallback(EE=>{on&&EE.key===" "&&Nx&&!EE.defaultPrevented&&Mx.stop(EE,()=>{Mx.pulsate(EE)}),cx&&cx(EE),In&&EE.target===EE.currentTarget&&Wx()&&EE.key===" "&&!EE.defaultPrevented&&In(EE)});let iE=Ct;iE==="button"&&(Tx.href||Tx.to)&&(iE=dn);const Xx={};iE==="button"?(Xx.type=Ex===void 0?"button":Ex,Xx.disabled=ar):(!Tx.href&&!Tx.to&&(Xx.role="button"),ar&&(Xx["aria-disabled"]=ar));const CE=useForkRef(a,Cx),RE={...s,centerRipple:u,component:Ct,disabled:ar,disableRipple:en,disableTouchRipple:tn,focusRipple:on,tabIndex:bx,focusVisible:Nx},SE=useUtilityClasses$G(RE);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:iE,className:clsx(SE.root,d),ownerState:RE,onBlur:Vx,onClick:In,onContextMenu:Px,onFocus:nE,onKeyDown:tE,onKeyUp:lE,onMouseDown:Ox,onMouseLeave:zx,onMouseUp:Lx,onDragLeave:$x,onTouchEnd:jx,onTouchMove:Hx,onTouchStart:qx,ref:CE,tabIndex:ar?-1:bx,type:Ex,...Xx,...Tx,children:[c,Rx?jsxRuntimeExports.jsx(TouchRipple,{ref:Ax,center:u,...xx}):null]})});function useRippleHandler(t,n,a,s=!1){return useEventCallback(l=>(a&&a(l),s||t[n](l),!0))}function hasCorrectMainProperty(t){return typeof t.main=="string"}function checkSimplePaletteColorValues(t,n=[]){if(!hasCorrectMainProperty(t))return!1;for(const a of n)if(!t.hasOwnProperty(a)||typeof t[a]!="string")return!1;return!0}function createSimplePaletteValueFilter(t=[]){return([,n])=>n&&checkSimplePaletteColorValues(n,t)}function getCircularProgressUtilityClass(t){return generateUtilityClass("MuiCircularProgress",t)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const SIZE=44,circularRotateKeyframe=keyframes`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,circularDashKeyframe=keyframes`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,rotateAnimation=typeof circularRotateKeyframe!="string"?css`
        animation: ${circularRotateKeyframe} 1.4s linear infinite;
      `:null,dashAnimation=typeof circularDashKeyframe!="string"?css`
        animation: ${circularDashKeyframe} 1.4s ease-in-out infinite;
      `:null,useUtilityClasses$F=t=>{const{classes:n,variant:a,color:s,disableShrink:l}=t,u={root:["root",a,`color${capitalize(s)}`],svg:["svg"],circle:["circle",`circle${capitalize(a)}`,l&&"circleDisableShrink"]};return composeClasses(u,getCircularProgressUtilityClass,n)},CircularProgressRoot=styled("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:rotateAnimation||{animation:`${circularRotateKeyframe} 1.4s linear infinite`}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}}))]}))),CircularProgressSVG=styled("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),CircularProgressCircle=styled("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.circle,n[`circle${capitalize(a.variant)}`],a.disableShrink&&n.circleDisableShrink]}})(memoTheme(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink,style:dashAnimation||{animation:`${circularDashKeyframe} 1.4s ease-in-out infinite`}}]}))),CircularProgress=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiCircularProgress"}),{className:l,color:u="primary",disableShrink:c=!1,size:d=40,style:Ct,thickness:ar=3.6,value:en=0,variant:tn="indeterminate",...on}=s,cn={...s,color:u,disableShrink:c,size:d,thickness:ar,value:en,variant:tn},dn=useUtilityClasses$F(cn),Cn={},In={},ix={};if(tn==="determinate"){const ax=2*Math.PI*((SIZE-ar)/2);Cn.strokeDasharray=ax.toFixed(3),ix["aria-valuenow"]=Math.round(en),Cn.strokeDashoffset=`${((100-en)/100*ax).toFixed(3)}px`,In.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,{className:clsx(dn.root,l),style:{width:d,height:d,...In,...Ct},ownerState:cn,ref:a,role:"progressbar",...ix,...on,children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:dn.svg,ownerState:cn,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:dn.circle,style:Cn,ownerState:cn,cx:SIZE,cy:SIZE,r:(SIZE-ar)/2,fill:"none",strokeWidth:ar})})})});function getButtonUtilityClass(t){return generateUtilityClass("MuiButton",t)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ButtonGroupContext=reactExports.createContext({}),ButtonGroupButtonContext=reactExports.createContext(void 0),useUtilityClasses$E=t=>{const{color:n,disableElevation:a,fullWidth:s,size:l,variant:u,loading:c,loadingPosition:d,classes:Ct}=t,ar={root:["root",c&&"loading",u,`${u}${capitalize(n)}`,`size${capitalize(l)}`,`${u}Size${capitalize(l)}`,`color${capitalize(n)}`,a&&"disableElevation",s&&"fullWidth",c&&`loadingPosition${capitalize(d)}`],startIcon:["icon","startIcon",`iconSize${capitalize(l)}`],endIcon:["icon","endIcon",`iconSize${capitalize(l)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},en=composeClasses(ar,getButtonUtilityClass,Ct);return{...Ct,...en}},commonIconStyles=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ButtonRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`${a.variant}${capitalize(a.color)}`],n[`size${capitalize(a.size)}`],n[`${a.variant}Size${capitalize(a.size)}`],a.color==="inherit"&&n.colorInherit,a.disableElevation&&n.disableElevation,a.fullWidth&&n.fullWidth,a.loading&&n.loading]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],a=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${buttonClasses.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${buttonClasses.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(t.vars||t).palette[s].main,"--variant-outlinedColor":(t.vars||t).palette[s].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[s].main,.5),"--variant-containedColor":(t.vars||t).palette[s].contrastText,"--variant-containedBg":(t.vars||t).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[s].dark,"--variant-textBg":t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[s].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${buttonClasses.loading}`]:{color:"transparent"}}}]}})),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.startIcon,a.loading&&n.startIconLoadingStart,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...commonIconStyles]})),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.endIcon,a.loading&&n.endIconLoadingEnd,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...commonIconStyles]})),ButtonLoadingIndicator=styled("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ButtonLoadingIconPlaceholder=styled("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Button=reactExports.forwardRef(function(n,a){const s=reactExports.useContext(ButtonGroupContext),l=reactExports.useContext(ButtonGroupButtonContext),u=resolveProps(s,n),c=useDefaultProps({props:u,name:"MuiButton"}),{children:d,color:Ct="primary",component:ar="button",className:en,disabled:tn=!1,disableElevation:on=!1,disableFocusRipple:cn=!1,endIcon:dn,focusVisibleClassName:Cn,fullWidth:In=!1,id:ix,loading:ax=null,loadingIndicator:ox,loadingPosition:sx="center",size:ux="medium",startIcon:cx,type:hx,variant:gx="text",...fx}=c,dx=useId(ix),mx=ox??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":dx,color:"inherit",size:16}),vx={...c,color:Ct,component:ar,disabled:tn,disableElevation:on,disableFocusRipple:cn,fullWidth:In,loading:ax,loadingIndicator:mx,loadingPosition:sx,size:ux,type:hx,variant:gx},bx=useUtilityClasses$E(vx),xx=(cx||ax&&sx==="start")&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:bx.startIcon,ownerState:vx,children:cx||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:bx.loadingIconPlaceholder,ownerState:vx})}),_x=(dn||ax&&sx==="end")&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:bx.endIcon,ownerState:vx,children:dn||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:bx.loadingIconPlaceholder,ownerState:vx})}),Ex=l||"",Tx=typeof ax=="boolean"?jsxRuntimeExports.jsx("span",{className:bx.loadingWrapper,style:{display:"contents"},children:ax&&jsxRuntimeExports.jsx(ButtonLoadingIndicator,{className:bx.loadingIndicator,ownerState:vx,children:mx})}):null;return jsxRuntimeExports.jsxs(ButtonRoot,{ownerState:vx,className:clsx(s.className,bx.root,en,Ex),component:ar,disabled:tn||ax,focusRipple:!cn,focusVisibleClassName:clsx(bx.focusVisible,Cn),ref:a,type:hx,id:ax?dx:ix,...fx,classes:bx,children:[xx,sx!=="end"&&Tx,d,sx==="end"&&Tx,_x]})});function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),useUtilityClasses$D=t=>{const{classes:n,disabled:a,color:s,edge:l,size:u,loading:c}=t,d={root:["root",c&&"loading",a&&"disabled",s!=="default"&&`color${capitalize(s)}`,l&&`edge${capitalize(l)}`,`size${capitalize(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return composeClasses(d,getIconButtonUtilityClass,n)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.loading&&n.loading,a.color!=="default"&&n[`color${capitalize(a.color)}`],a.edge&&n[`edge${capitalize(a.edge)}`],n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:n=>!n.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),memoTheme(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${iconButtonClasses.loading}`]:{color:"transparent"}}))),IconButtonLoadingIndicator=styled("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),IconButton=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiIconButton"}),{edge:l=!1,children:u,className:c,color:d="default",disabled:Ct=!1,disableFocusRipple:ar=!1,size:en="medium",id:tn,loading:on=null,loadingIndicator:cn,...dn}=s,Cn=useId(tn),In=cn??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":Cn,color:"inherit",size:16}),ix={...s,edge:l,color:d,disabled:Ct,disableFocusRipple:ar,loading:on,loadingIndicator:In,size:en},ax=useUtilityClasses$D(ix);return jsxRuntimeExports.jsxs(IconButtonRoot,{id:on?Cn:tn,className:clsx(ax.root,c),centerRipple:!0,focusRipple:!ar,disabled:Ct||on,ref:a,...dn,ownerState:ix,children:[typeof on=="boolean"&&jsxRuntimeExports.jsx("span",{className:ax.loadingWrapper,style:{display:"contents"},children:jsxRuntimeExports.jsx(IconButtonLoadingIndicator,{className:ax.loadingIndicator,ownerState:ix,children:on&&In})}),u]})}),DeleteIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),UndoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"})),RedoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}));function ThemeProviderNoVars({theme:t,...n}){const a=THEME_ID in t?t[THEME_ID]:void 0;return jsxRuntimeExports.jsx(ThemeProvider$1,{...n,themeId:a?THEME_ID:void 0,theme:a||t})}const defaultConfig={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:InternalCssVarsProvider}=createCssVarsProvider({themeId:THEME_ID,theme:()=>createTheme({cssVariables:!0}),colorSchemeStorageKey:defaultConfig.colorSchemeStorageKey,modeStorageKey:defaultConfig.modeStorageKey,defaultColorScheme:{light:defaultConfig.defaultLightColorScheme,dark:defaultConfig.defaultDarkColorScheme},resolveTheme:t=>{const n={...t,typography:createTypography(t.palette,t.typography)};return n.unstable_sx=function(s){return styleFunctionSx({sx:s,theme:this})},n}}),CssVarsProvider=InternalCssVarsProvider;function ThemeProvider({theme:t,...n}){const a=reactExports.useMemo(()=>{if(typeof t=="function")return t;const s=THEME_ID in t?t[THEME_ID]:t;return"colorSchemes"in s?null:"vars"in s?t:{...t,vars:null}},[t]);return a?jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:a,...n}):jsxRuntimeExports.jsx(CssVarsProvider,{theme:t,...n})}const boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});function getReactElementRef(t){return parseInt(reactExports.version,10)>=19?t?.props?.ref||null:t?.ref||null}const reflow=t=>t.scrollTop;function getTransitionProps(t,n){const{timeout:a,easing:s,style:l={}}=t;return{duration:l.transitionDuration??(typeof a=="number"?a:a[n.mode]||0),easing:l.transitionTimingFunction??(typeof s=="object"?s[n.mode]:s),delay:l.transitionDelay}}function getScale(t){return`scale(${t}, ${t**2})`}const styles$2={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(n,a){const{addEndListener:s,appear:l=!0,children:u,easing:c,in:d,onEnter:Ct,onEntered:ar,onEntering:en,onExit:tn,onExited:on,onExiting:cn,style:dn,timeout:Cn="auto",TransitionComponent:In=Transition,...ix}=n,ax=useTimeout(),ox=reactExports.useRef(),sx=useTheme(),ux=reactExports.useRef(null),cx=useForkRef(ux,getReactElementRef(u),a),hx=_x=>Ex=>{if(_x){const Tx=ux.current;Ex===void 0?_x(Tx):_x(Tx,Ex)}},gx=hx(en),fx=hx((_x,Ex)=>{reflow(_x);const{duration:Tx,delay:Cx,easing:Mx}=getTransitionProps({style:dn,timeout:Cn,easing:c},{mode:"enter"});let Ax;Cn==="auto"?(Ax=sx.transitions.getAutoHeightDuration(_x.clientHeight),ox.current=Ax):Ax=Tx,_x.style.transition=[sx.transitions.create("opacity",{duration:Ax,delay:Cx}),sx.transitions.create("transform",{duration:isWebKit154?Ax:Ax*.666,delay:Cx,easing:Mx})].join(","),Ct&&Ct(_x,Ex)}),dx=hx(ar),mx=hx(cn),vx=hx(_x=>{const{duration:Ex,delay:Tx,easing:Cx}=getTransitionProps({style:dn,timeout:Cn,easing:c},{mode:"exit"});let Mx;Cn==="auto"?(Mx=sx.transitions.getAutoHeightDuration(_x.clientHeight),ox.current=Mx):Mx=Ex,_x.style.transition=[sx.transitions.create("opacity",{duration:Mx,delay:Tx}),sx.transitions.create("transform",{duration:isWebKit154?Mx:Mx*.666,delay:isWebKit154?Tx:Tx||Mx*.333,easing:Cx})].join(","),_x.style.opacity=0,_x.style.transform=getScale(.75),tn&&tn(_x)}),bx=hx(on),xx=_x=>{Cn==="auto"&&ax.start(ox.current||0,_x),s&&s(ux.current,_x)};return jsxRuntimeExports.jsx(In,{appear:l,in:d,nodeRef:ux,onEnter:fx,onEntered:dx,onEntering:gx,onExit:vx,onExited:bx,onExiting:mx,addEndListener:xx,timeout:Cn==="auto"?null:Cn,...ix,children:(_x,{ownerState:Ex,...Tx})=>reactExports.cloneElement(u,{style:{opacity:0,transform:getScale(.75),visibility:_x==="exited"&&!d?"hidden":void 0,...styles$2[_x],...dn,...u.props.style},ref:cx,...Tx})})});Grow&&(Grow.muiSupportAuto=!0);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,n){return t.concat([n+"-"+start$1,n+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,n){return t.concat([n,n+"-"+start$1,n+"-"+end$1])},[]),beforeRead="beforeRead",read$1="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read$1,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function isElement(t){var n=getWindow(t).Element;return t instanceof n||t instanceof Element}function isHTMLElement$1(t){var n=getWindow(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var n=getWindow(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function applyStyles(t){var n=t.state;Object.keys(n.elements).forEach(function(a){var s=n.styles[a]||{},l=n.attributes[a]||{},u=n.elements[a];!isHTMLElement$1(u)||!getNodeName(u)||(Object.assign(u.style,s),Object.keys(l).forEach(function(c){var d=l[c];d===!1?u.removeAttribute(c):u.setAttribute(c,d===!0?"":d)}))})}function effect$2(t){var n=t.state,a={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,a.popper),n.styles=a,n.elements.arrow&&Object.assign(n.elements.arrow.style,a.arrow),function(){Object.keys(n.elements).forEach(function(s){var l=n.elements[s],u=n.attributes[s]||{},c=Object.keys(n.styles.hasOwnProperty(s)?n.styles[s]:a[s]),d=c.reduce(function(Ct,ar){return Ct[ar]="",Ct},{});!isHTMLElement$1(l)||!getNodeName(l)||(Object.assign(l.style,d),Object.keys(u).forEach(function(Ct){l.removeAttribute(Ct)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max$3=Math.max,min$2=Math.min,round$5=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,n,a){n===void 0&&(n=!1),a===void 0&&(a=!1);var s=t.getBoundingClientRect(),l=1,u=1;n&&isHTMLElement$1(t)&&(l=t.offsetWidth>0&&round$5(s.width)/t.offsetWidth||1,u=t.offsetHeight>0&&round$5(s.height)/t.offsetHeight||1);var c=isElement(t)?getWindow(t):window,d=c.visualViewport,Ct=!isLayoutViewport()&&a,ar=(s.left+(Ct&&d?d.offsetLeft:0))/l,en=(s.top+(Ct&&d?d.offsetTop:0))/u,tn=s.width/l,on=s.height/u;return{width:tn,height:on,top:en,right:ar+tn,bottom:en+on,left:ar,x:ar,y:en}}function getLayoutRect$1(t){var n=getBoundingClientRect(t),a=t.offsetWidth,s=t.offsetHeight;return Math.abs(n.width-a)<=1&&(a=n.width),Math.abs(n.height-s)<=1&&(s=n.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:s}}function contains(t,n){var a=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(a&&isShadowRoot(a)){var s=n;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function getComputedStyle$2(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement$1(t)||getComputedStyle$2(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var n=/firefox/i.test(getUAString()),a=/Trident/i.test(getUAString());if(a&&isHTMLElement$1(t)){var s=getComputedStyle$2(t);if(s.position==="fixed")return null}var l=getParentNode(t);for(isShadowRoot(l)&&(l=l.host);isHTMLElement$1(l)&&["html","body"].indexOf(getNodeName(l))<0;){var u=getComputedStyle$2(l);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||n&&u.willChange==="filter"||n&&u.filter&&u.filter!=="none")return l;l=l.parentNode}return null}function getOffsetParent(t){for(var n=getWindow(t),a=getTrueOffsetParent(t);a&&isTableElement(a)&&getComputedStyle$2(a).position==="static";)a=getTrueOffsetParent(a);return a&&(getNodeName(a)==="html"||getNodeName(a)==="body"&&getComputedStyle$2(a).position==="static")?n:a||getContainingBlock(t)||n}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,n,a){return max$3(t,min$2(n,a))}function withinMaxClamp(t,n,a){var s=within(t,n,a);return s>a?a:s}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,n){return n.reduce(function(a,s){return a[s]=t,a},{})}var toPaddingObject=function(n,a){return n=typeof n=="function"?n(Object.assign({},a.rects,{placement:a.placement})):n,mergePaddingObject(typeof n!="number"?n:expandToHashMap(n,basePlacements))};function arrow(t){var n,a=t.state,s=t.name,l=t.options,u=a.elements.arrow,c=a.modifiersData.popperOffsets,d=getBasePlacement(a.placement),Ct=getMainAxisFromPlacement(d),ar=[left,right].indexOf(d)>=0,en=ar?"height":"width";if(!(!u||!c)){var tn=toPaddingObject(l.padding,a),on=getLayoutRect$1(u),cn=Ct==="y"?top:left,dn=Ct==="y"?bottom:right,Cn=a.rects.reference[en]+a.rects.reference[Ct]-c[Ct]-a.rects.popper[en],In=c[Ct]-a.rects.reference[Ct],ix=getOffsetParent(u),ax=ix?Ct==="y"?ix.clientHeight||0:ix.clientWidth||0:0,ox=Cn/2-In/2,sx=tn[cn],ux=ax-on[en]-tn[dn],cx=ax/2-on[en]/2+ox,hx=within(sx,cx,ux),gx=Ct;a.modifiersData[s]=(n={},n[gx]=hx,n.centerOffset=hx-cx,n)}}function effect$1(t){var n=t.state,a=t.options,s=a.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=n.elements.popper.querySelector(l),!l)||contains(n.elements.popper,l)&&(n.elements.arrow=l))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,n){var a=t.x,s=t.y,l=n.devicePixelRatio||1;return{x:round$5(a*l)/l||0,y:round$5(s*l)/l||0}}function mapToStyles(t){var n,a=t.popper,s=t.popperRect,l=t.placement,u=t.variation,c=t.offsets,d=t.position,Ct=t.gpuAcceleration,ar=t.adaptive,en=t.roundOffsets,tn=t.isFixed,on=c.x,cn=on===void 0?0:on,dn=c.y,Cn=dn===void 0?0:dn,In=typeof en=="function"?en({x:cn,y:Cn}):{x:cn,y:Cn};cn=In.x,Cn=In.y;var ix=c.hasOwnProperty("x"),ax=c.hasOwnProperty("y"),ox=left,sx=top,ux=window;if(ar){var cx=getOffsetParent(a),hx="clientHeight",gx="clientWidth";if(cx===getWindow(a)&&(cx=getDocumentElement(a),getComputedStyle$2(cx).position!=="static"&&d==="absolute"&&(hx="scrollHeight",gx="scrollWidth")),cx=cx,l===top||(l===left||l===right)&&u===end$1){sx=bottom;var fx=tn&&cx===ux&&ux.visualViewport?ux.visualViewport.height:cx[hx];Cn-=fx-s.height,Cn*=Ct?1:-1}if(l===left||(l===top||l===bottom)&&u===end$1){ox=right;var dx=tn&&cx===ux&&ux.visualViewport?ux.visualViewport.width:cx[gx];cn-=dx-s.width,cn*=Ct?1:-1}}var mx=Object.assign({position:d},ar&&unsetSides),vx=en===!0?roundOffsetsByDPR({x:cn,y:Cn},getWindow(a)):{x:cn,y:Cn};if(cn=vx.x,Cn=vx.y,Ct){var bx;return Object.assign({},mx,(bx={},bx[sx]=ax?"0":"",bx[ox]=ix?"0":"",bx.transform=(ux.devicePixelRatio||1)<=1?"translate("+cn+"px, "+Cn+"px)":"translate3d("+cn+"px, "+Cn+"px, 0)",bx))}return Object.assign({},mx,(n={},n[sx]=ax?Cn+"px":"",n[ox]=ix?cn+"px":"",n.transform="",n))}function computeStyles(t){var n=t.state,a=t.options,s=a.gpuAcceleration,l=s===void 0?!0:s,u=a.adaptive,c=u===void 0?!0:u,d=a.roundOffsets,Ct=d===void 0?!0:d,ar={placement:getBasePlacement(n.placement),variation:getVariation(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:l,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,mapToStyles(Object.assign({},ar,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:c,roundOffsets:Ct})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,mapToStyles(Object.assign({},ar,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ct})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var n=t.state,a=t.instance,s=t.options,l=s.scroll,u=l===void 0?!0:l,c=s.resize,d=c===void 0?!0:c,Ct=getWindow(n.elements.popper),ar=[].concat(n.scrollParents.reference,n.scrollParents.popper);return u&&ar.forEach(function(en){en.addEventListener("scroll",a.update,passive)}),d&&Ct.addEventListener("resize",a.update,passive),function(){u&&ar.forEach(function(en){en.removeEventListener("scroll",a.update,passive)}),d&&Ct.removeEventListener("resize",a.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(n){return hash$1[n]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(n){return hash[n]})}function getWindowScroll(t){var n=getWindow(t),a=n.pageXOffset,s=n.pageYOffset;return{scrollLeft:a,scrollTop:s}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,n){var a=getWindow(t),s=getDocumentElement(t),l=a.visualViewport,u=s.clientWidth,c=s.clientHeight,d=0,Ct=0;if(l){u=l.width,c=l.height;var ar=isLayoutViewport();(ar||!ar&&n==="fixed")&&(d=l.offsetLeft,Ct=l.offsetTop)}return{width:u,height:c,x:d+getWindowScrollBarX(t),y:Ct}}function getDocumentRect(t){var n,a=getDocumentElement(t),s=getWindowScroll(t),l=(n=t.ownerDocument)==null?void 0:n.body,u=max$3(a.scrollWidth,a.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),c=max$3(a.scrollHeight,a.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),d=-s.scrollLeft+getWindowScrollBarX(t),Ct=-s.scrollTop;return getComputedStyle$2(l||a).direction==="rtl"&&(d+=max$3(a.clientWidth,l?l.clientWidth:0)-u),{width:u,height:c,x:d,y:Ct}}function isScrollParent(t){var n=getComputedStyle$2(t),a=n.overflow,s=n.overflowX,l=n.overflowY;return/auto|scroll|overlay|hidden/.test(a+l+s)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement$1(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,n){var a;n===void 0&&(n=[]);var s=getScrollParent(t),l=s===((a=t.ownerDocument)==null?void 0:a.body),u=getWindow(s),c=l?[u].concat(u.visualViewport||[],isScrollParent(s)?s:[]):s,d=n.concat(c);return l?d:d.concat(listScrollParents(getParentNode(c)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,n){var a=getBoundingClientRect(t,!1,n==="fixed");return a.top=a.top+t.clientTop,a.left=a.left+t.clientLeft,a.bottom=a.top+t.clientHeight,a.right=a.left+t.clientWidth,a.width=t.clientWidth,a.height=t.clientHeight,a.x=a.left,a.y=a.top,a}function getClientRectFromMixedType(t,n,a){return n===viewport?rectToClientRect(getViewportRect(t,a)):isElement(n)?getInnerBoundingClientRect(n,a):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var n=listScrollParents(getParentNode(t)),a=["absolute","fixed"].indexOf(getComputedStyle$2(t).position)>=0,s=a&&isHTMLElement$1(t)?getOffsetParent(t):t;return isElement(s)?n.filter(function(l){return isElement(l)&&contains(l,s)&&getNodeName(l)!=="body"}):[]}function getClippingRect(t,n,a,s){var l=n==="clippingParents"?getClippingParents(t):[].concat(n),u=[].concat(l,[a]),c=u[0],d=u.reduce(function(Ct,ar){var en=getClientRectFromMixedType(t,ar,s);return Ct.top=max$3(en.top,Ct.top),Ct.right=min$2(en.right,Ct.right),Ct.bottom=min$2(en.bottom,Ct.bottom),Ct.left=max$3(en.left,Ct.left),Ct},getClientRectFromMixedType(t,c,s));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function computeOffsets(t){var n=t.reference,a=t.element,s=t.placement,l=s?getBasePlacement(s):null,u=s?getVariation(s):null,c=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2,Ct;switch(l){case top:Ct={x:c,y:n.y-a.height};break;case bottom:Ct={x:c,y:n.y+n.height};break;case right:Ct={x:n.x+n.width,y:d};break;case left:Ct={x:n.x-a.width,y:d};break;default:Ct={x:n.x,y:n.y}}var ar=l?getMainAxisFromPlacement(l):null;if(ar!=null){var en=ar==="y"?"height":"width";switch(u){case start$1:Ct[ar]=Ct[ar]-(n[en]/2-a[en]/2);break;case end$1:Ct[ar]=Ct[ar]+(n[en]/2-a[en]/2);break}}return Ct}function detectOverflow(t,n){n===void 0&&(n={});var a=n,s=a.placement,l=s===void 0?t.placement:s,u=a.strategy,c=u===void 0?t.strategy:u,d=a.boundary,Ct=d===void 0?clippingParents:d,ar=a.rootBoundary,en=ar===void 0?viewport:ar,tn=a.elementContext,on=tn===void 0?popper:tn,cn=a.altBoundary,dn=cn===void 0?!1:cn,Cn=a.padding,In=Cn===void 0?0:Cn,ix=mergePaddingObject(typeof In!="number"?In:expandToHashMap(In,basePlacements)),ax=on===popper?reference:popper,ox=t.rects.popper,sx=t.elements[dn?ax:on],ux=getClippingRect(isElement(sx)?sx:sx.contextElement||getDocumentElement(t.elements.popper),Ct,en,c),cx=getBoundingClientRect(t.elements.reference),hx=computeOffsets({reference:cx,element:ox,placement:l}),gx=rectToClientRect(Object.assign({},ox,hx)),fx=on===popper?gx:cx,dx={top:ux.top-fx.top+ix.top,bottom:fx.bottom-ux.bottom+ix.bottom,left:ux.left-fx.left+ix.left,right:fx.right-ux.right+ix.right},mx=t.modifiersData.offset;if(on===popper&&mx){var vx=mx[l];Object.keys(dx).forEach(function(bx){var xx=[right,bottom].indexOf(bx)>=0?1:-1,_x=[top,bottom].indexOf(bx)>=0?"y":"x";dx[bx]+=vx[_x]*xx})}return dx}function computeAutoPlacement(t,n){n===void 0&&(n={});var a=n,s=a.placement,l=a.boundary,u=a.rootBoundary,c=a.padding,d=a.flipVariations,Ct=a.allowedAutoPlacements,ar=Ct===void 0?placements:Ct,en=getVariation(s),tn=en?d?variationPlacements:variationPlacements.filter(function(dn){return getVariation(dn)===en}):basePlacements,on=tn.filter(function(dn){return ar.indexOf(dn)>=0});on.length===0&&(on=tn);var cn=on.reduce(function(dn,Cn){return dn[Cn]=detectOverflow(t,{placement:Cn,boundary:l,rootBoundary:u,padding:c})[getBasePlacement(Cn)],dn},{});return Object.keys(cn).sort(function(dn,Cn){return cn[dn]-cn[Cn]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var n=getOppositePlacement(t);return[getOppositeVariationPlacement(t),n,getOppositeVariationPlacement(n)]}function flip(t){var n=t.state,a=t.options,s=t.name;if(!n.modifiersData[s]._skip){for(var l=a.mainAxis,u=l===void 0?!0:l,c=a.altAxis,d=c===void 0?!0:c,Ct=a.fallbackPlacements,ar=a.padding,en=a.boundary,tn=a.rootBoundary,on=a.altBoundary,cn=a.flipVariations,dn=cn===void 0?!0:cn,Cn=a.allowedAutoPlacements,In=n.options.placement,ix=getBasePlacement(In),ax=ix===In,ox=Ct||(ax||!dn?[getOppositePlacement(In)]:getExpandedFallbackPlacements(In)),sx=[In].concat(ox).reduce(function(Ox,Px){return Ox.concat(getBasePlacement(Px)===auto?computeAutoPlacement(n,{placement:Px,boundary:en,rootBoundary:tn,padding:ar,flipVariations:dn,allowedAutoPlacements:Cn}):Px)},[]),ux=n.rects.reference,cx=n.rects.popper,hx=new Map,gx=!0,fx=sx[0],dx=0;dx<sx.length;dx++){var mx=sx[dx],vx=getBasePlacement(mx),bx=getVariation(mx)===start$1,xx=[top,bottom].indexOf(vx)>=0,_x=xx?"width":"height",Ex=detectOverflow(n,{placement:mx,boundary:en,rootBoundary:tn,altBoundary:on,padding:ar}),Tx=xx?bx?right:left:bx?bottom:top;ux[_x]>cx[_x]&&(Tx=getOppositePlacement(Tx));var Cx=getOppositePlacement(Tx),Mx=[];if(u&&Mx.push(Ex[vx]<=0),d&&Mx.push(Ex[Tx]<=0,Ex[Cx]<=0),Mx.every(function(Ox){return Ox})){fx=mx,gx=!1;break}hx.set(mx,Mx)}if(gx)for(var Ax=dn?3:1,Nx=function(Px){var $x=sx.find(function(Lx){var zx=hx.get(Lx);if(zx)return zx.slice(0,Px).every(function(qx){return qx})});if($x)return fx=$x,"break"},Ux=Ax;Ux>0;Ux--){var Rx=Nx(Ux);if(Rx==="break")break}n.placement!==fx&&(n.modifiersData[s]._skip=!0,n.placement=fx,n.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,n,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-n.height-a.y,right:t.right-n.width+a.x,bottom:t.bottom-n.height+a.y,left:t.left-n.width-a.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(n){return t[n]>=0})}function hide(t){var n=t.state,a=t.name,s=n.rects.reference,l=n.rects.popper,u=n.modifiersData.preventOverflow,c=detectOverflow(n,{elementContext:"reference"}),d=detectOverflow(n,{altBoundary:!0}),Ct=getSideOffsets(c,s),ar=getSideOffsets(d,l,u),en=isAnySideFullyClipped(Ct),tn=isAnySideFullyClipped(ar);n.modifiersData[a]={referenceClippingOffsets:Ct,popperEscapeOffsets:ar,isReferenceHidden:en,hasPopperEscaped:tn},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":en,"data-popper-escaped":tn})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,n,a){var s=getBasePlacement(t),l=[left,top].indexOf(s)>=0?-1:1,u=typeof a=="function"?a(Object.assign({},n,{placement:t})):a,c=u[0],d=u[1];return c=c||0,d=(d||0)*l,[left,right].indexOf(s)>=0?{x:d,y:c}:{x:c,y:d}}function offset(t){var n=t.state,a=t.options,s=t.name,l=a.offset,u=l===void 0?[0,0]:l,c=placements.reduce(function(en,tn){return en[tn]=distanceAndSkiddingToXY(tn,n.rects,u),en},{}),d=c[n.placement],Ct=d.x,ar=d.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=Ct,n.modifiersData.popperOffsets.y+=ar),n.modifiersData[s]=c}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var n=t.state,a=t.name;n.modifiersData[a]=computeOffsets({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var n=t.state,a=t.options,s=t.name,l=a.mainAxis,u=l===void 0?!0:l,c=a.altAxis,d=c===void 0?!1:c,Ct=a.boundary,ar=a.rootBoundary,en=a.altBoundary,tn=a.padding,on=a.tether,cn=on===void 0?!0:on,dn=a.tetherOffset,Cn=dn===void 0?0:dn,In=detectOverflow(n,{boundary:Ct,rootBoundary:ar,padding:tn,altBoundary:en}),ix=getBasePlacement(n.placement),ax=getVariation(n.placement),ox=!ax,sx=getMainAxisFromPlacement(ix),ux=getAltAxis(sx),cx=n.modifiersData.popperOffsets,hx=n.rects.reference,gx=n.rects.popper,fx=typeof Cn=="function"?Cn(Object.assign({},n.rects,{placement:n.placement})):Cn,dx=typeof fx=="number"?{mainAxis:fx,altAxis:fx}:Object.assign({mainAxis:0,altAxis:0},fx),mx=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,vx={x:0,y:0};if(cx){if(u){var bx,xx=sx==="y"?top:left,_x=sx==="y"?bottom:right,Ex=sx==="y"?"height":"width",Tx=cx[sx],Cx=Tx+In[xx],Mx=Tx-In[_x],Ax=cn?-gx[Ex]/2:0,Nx=ax===start$1?hx[Ex]:gx[Ex],Ux=ax===start$1?-gx[Ex]:-hx[Ex],Rx=n.elements.arrow,Ox=cn&&Rx?getLayoutRect$1(Rx):{width:0,height:0},Px=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:getFreshSideObject(),$x=Px[xx],Lx=Px[_x],zx=within(0,hx[Ex],Ox[Ex]),qx=ox?hx[Ex]/2-Ax-zx-$x-dx.mainAxis:Nx-zx-$x-dx.mainAxis,jx=ox?-hx[Ex]/2+Ax+zx+Lx+dx.mainAxis:Ux+zx+Lx+dx.mainAxis,Hx=n.elements.arrow&&getOffsetParent(n.elements.arrow),Vx=Hx?sx==="y"?Hx.clientTop||0:Hx.clientLeft||0:0,nE=(bx=mx?.[sx])!=null?bx:0,Wx=Tx+qx-nE-Vx,tE=Tx+jx-nE,lE=within(cn?min$2(Cx,Wx):Cx,Tx,cn?max$3(Mx,tE):Mx);cx[sx]=lE,vx[sx]=lE-Tx}if(d){var iE,Xx=sx==="x"?top:left,CE=sx==="x"?bottom:right,RE=cx[ux],SE=ux==="y"?"height":"width",EE=RE+In[Xx],FE=RE-In[CE],AE=[top,left].indexOf(ix)!==-1,ZE=(iE=mx?.[ux])!=null?iE:0,Dx=AE?EE:RE-hx[SE]-gx[SE]-ZE+dx.altAxis,kx=AE?RE+hx[SE]+gx[SE]-ZE-dx.altAxis:FE,Yx=cn&&AE?withinMaxClamp(Dx,RE,kx):within(cn?Dx:EE,RE,cn?kx:FE);cx[ux]=Yx,vx[ux]=Yx-RE}n.modifiersData[s]=vx}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement$1(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var n=t.getBoundingClientRect(),a=round$5(n.width)/t.offsetWidth||1,s=round$5(n.height)/t.offsetHeight||1;return a!==1||s!==1}function getCompositeRect(t,n,a){a===void 0&&(a=!1);var s=isHTMLElement$1(n),l=isHTMLElement$1(n)&&isElementScaled(n),u=getDocumentElement(n),c=getBoundingClientRect(t,l,a),d={scrollLeft:0,scrollTop:0},Ct={x:0,y:0};return(s||!s&&!a)&&((getNodeName(n)!=="body"||isScrollParent(u))&&(d=getNodeScroll(n)),isHTMLElement$1(n)?(Ct=getBoundingClientRect(n,!0),Ct.x+=n.clientLeft,Ct.y+=n.clientTop):u&&(Ct.x=getWindowScrollBarX(u))),{x:c.left+d.scrollLeft-Ct.x,y:c.top+d.scrollTop-Ct.y,width:c.width,height:c.height}}function order(t){var n=new Map,a=new Set,s=[];t.forEach(function(u){n.set(u.name,u)});function l(u){a.add(u.name);var c=[].concat(u.requires||[],u.requiresIfExists||[]);c.forEach(function(d){if(!a.has(d)){var Ct=n.get(d);Ct&&l(Ct)}}),s.push(u)}return t.forEach(function(u){a.has(u.name)||l(u)}),s}function orderModifiers(t){var n=order(t);return modifierPhases.reduce(function(a,s){return a.concat(n.filter(function(l){return l.phase===s}))},[])}function debounce$1(t){var n;return function(){return n||(n=new Promise(function(a){Promise.resolve().then(function(){n=void 0,a(t())})})),n}}function mergeByName(t){var n=t.reduce(function(a,s){var l=a[s.name];return a[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,a},{});return Object.keys(n).map(function(a){return n[a]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return!n.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var n=t,a=n.defaultModifiers,s=a===void 0?[]:a,l=n.defaultOptions,u=l===void 0?DEFAULT_OPTIONS:l;return function(d,Ct,ar){ar===void 0&&(ar=u);var en={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,u),modifiersData:{},elements:{reference:d,popper:Ct},attributes:{},styles:{}},tn=[],on=!1,cn={state:en,setOptions:function(ix){var ax=typeof ix=="function"?ix(en.options):ix;Cn(),en.options=Object.assign({},u,en.options,ax),en.scrollParents={reference:isElement(d)?listScrollParents(d):d.contextElement?listScrollParents(d.contextElement):[],popper:listScrollParents(Ct)};var ox=orderModifiers(mergeByName([].concat(s,en.options.modifiers)));return en.orderedModifiers=ox.filter(function(sx){return sx.enabled}),dn(),cn.update()},forceUpdate:function(){if(!on){var ix=en.elements,ax=ix.reference,ox=ix.popper;if(areValidElements(ax,ox)){en.rects={reference:getCompositeRect(ax,getOffsetParent(ox),en.options.strategy==="fixed"),popper:getLayoutRect$1(ox)},en.reset=!1,en.placement=en.options.placement,en.orderedModifiers.forEach(function(dx){return en.modifiersData[dx.name]=Object.assign({},dx.data)});for(var sx=0;sx<en.orderedModifiers.length;sx++){if(en.reset===!0){en.reset=!1,sx=-1;continue}var ux=en.orderedModifiers[sx],cx=ux.fn,hx=ux.options,gx=hx===void 0?{}:hx,fx=ux.name;typeof cx=="function"&&(en=cx({state:en,options:gx,name:fx,instance:cn})||en)}}}},update:debounce$1(function(){return new Promise(function(In){cn.forceUpdate(),In(en)})}),destroy:function(){Cn(),on=!0}};if(!areValidElements(d,Ct))return cn;cn.setOptions(ar).then(function(In){!on&&ar.onFirstUpdate&&ar.onFirstUpdate(In)});function dn(){en.orderedModifiers.forEach(function(In){var ix=In.name,ax=In.options,ox=ax===void 0?{}:ax,sx=In.effect;if(typeof sx=="function"){var ux=sx({state:en,name:ix,instance:cn,options:ox}),cx=function(){};tn.push(ux||cx)}})}function Cn(){tn.forEach(function(In){return In()}),tn=[]}return cn}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function isHostComponent$1(t){return typeof t=="string"}function appendOwnerState(t,n,a){return t===void 0||isHostComponent$1(t)?n:{...n,ownerState:{...n.ownerState,...a}}}function extractEventHandlers(t,n=[]){if(t===void 0)return{};const a={};return Object.keys(t).filter(s=>s.match(/^on[A-Z]/)&&typeof t[s]=="function"&&!n.includes(s)).forEach(s=>{a[s]=t[s]}),a}function omitEventHandlers(t){if(t===void 0)return{};const n={};return Object.keys(t).filter(a=>!(a.match(/^on[A-Z]/)&&typeof t[a]=="function")).forEach(a=>{n[a]=t[a]}),n}function mergeSlotProps(t){const{getSlotProps:n,additionalProps:a,externalSlotProps:s,externalForwardedProps:l,className:u}=t;if(!n){const cn=clsx(a?.className,u,l?.className,s?.className),dn={...a?.style,...l?.style,...s?.style},Cn={...a,...l,...s};return cn.length>0&&(Cn.className=cn),Object.keys(dn).length>0&&(Cn.style=dn),{props:Cn,internalRef:void 0}}const c=extractEventHandlers({...l,...s}),d=omitEventHandlers(s),Ct=omitEventHandlers(l),ar=n(c),en=clsx(ar?.className,a?.className,u,l?.className,s?.className),tn={...ar?.style,...a?.style,...l?.style,...s?.style},on={...ar,...a,...Ct,...d};return en.length>0&&(on.className=en),Object.keys(tn).length>0&&(on.style=tn),{props:on,internalRef:ar.ref}}function resolveComponentProps(t,n,a){return typeof t=="function"?t(n,a):t}function useSlotProps(t){const{elementType:n,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:l=!1,...u}=t,c=l?{}:resolveComponentProps(a,s),{props:d,internalRef:Ct}=mergeSlotProps({...u,externalSlotProps:c}),ar=useForkRef(Ct,c?.ref,t.additionalProps?.ref);return appendOwnerState(n,{...d,ref:ar},s)}function getContainer$1(t){return typeof t=="function"?t():t}const Portal=reactExports.forwardRef(function(n,a){const{children:s,container:l,disablePortal:u=!1}=n,[c,d]=reactExports.useState(null),Ct=useForkRef(reactExports.isValidElement(s)?getReactElementRef(s):null,a);if(useEnhancedEffect(()=>{u||d(getContainer$1(l)||document.body)},[l,u]),useEnhancedEffect(()=>{if(c&&!u)return setRef(a,c),()=>{setRef(a,null)}},[a,c,u]),u){if(reactExports.isValidElement(s)){const ar={ref:Ct};return reactExports.cloneElement(s,ar)}return s}return c&&reactDomExports.createPortal(s,c)});function getPopperUtilityClass(t){return generateUtilityClass("MuiPopper",t)}generateUtilityClasses("MuiPopper",["root"]);function flipPlacement(t,n){if(n==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function resolveAnchorEl$1(t){return typeof t=="function"?t():t}function isHTMLElement(t){return t.nodeType!==void 0}const useUtilityClasses$C=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getPopperUtilityClass,n)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(n,a){const{anchorEl:s,children:l,direction:u,disablePortal:c,modifiers:d,open:Ct,placement:ar,popperOptions:en,popperRef:tn,slotProps:on={},slots:cn={},TransitionProps:dn,ownerState:Cn,...In}=n,ix=reactExports.useRef(null),ax=useForkRef(ix,a),ox=reactExports.useRef(null),sx=useForkRef(ox,tn),ux=reactExports.useRef(sx);useEnhancedEffect(()=>{ux.current=sx},[sx]),reactExports.useImperativeHandle(tn,()=>ox.current,[]);const cx=flipPlacement(ar,u),[hx,gx]=reactExports.useState(cx),[fx,dx]=reactExports.useState(resolveAnchorEl$1(s));reactExports.useEffect(()=>{ox.current&&ox.current.forceUpdate()}),reactExports.useEffect(()=>{s&&dx(resolveAnchorEl$1(s))},[s]),useEnhancedEffect(()=>{if(!fx||!Ct)return;const _x=Cx=>{gx(Cx.placement)};let Ex=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Cx})=>{_x(Cx)}}];d!=null&&(Ex=Ex.concat(d)),en&&en.modifiers!=null&&(Ex=Ex.concat(en.modifiers));const Tx=createPopper(fx,ix.current,{placement:cx,...en,modifiers:Ex});return ux.current(Tx),()=>{Tx.destroy(),ux.current(null)}},[fx,c,d,Ct,en,cx]);const mx={placement:hx};dn!==null&&(mx.TransitionProps=dn);const vx=useUtilityClasses$C(n),bx=cn.root??"div",xx=useSlotProps({elementType:bx,externalSlotProps:on.root,externalForwardedProps:In,additionalProps:{role:"tooltip",ref:ax},ownerState:n,className:vx.root});return jsxRuntimeExports.jsx(bx,{...xx,children:typeof l=="function"?l(mx):l})}),Popper$1=reactExports.forwardRef(function(n,a){const{anchorEl:s,children:l,container:u,direction:c="ltr",disablePortal:d=!1,keepMounted:Ct=!1,modifiers:ar,open:en,placement:tn="bottom",popperOptions:on=defaultPopperOptions,popperRef:cn,style:dn,transition:Cn=!1,slotProps:In={},slots:ix={},...ax}=n,[ox,sx]=reactExports.useState(!0),ux=()=>{sx(!1)},cx=()=>{sx(!0)};if(!Ct&&!en&&(!Cn||ox))return null;let hx;if(u)hx=u;else if(s){const dx=resolveAnchorEl$1(s);hx=dx&&isHTMLElement(dx)?ownerDocument(dx).body:ownerDocument(null).body}const gx=!en&&Ct&&(!Cn||ox)?"none":void 0,fx=Cn?{in:en,onEnter:ux,onExited:cx}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:d,container:hx,children:jsxRuntimeExports.jsx(PopperTooltip,{anchorEl:s,direction:c,disablePortal:d,modifiers:ar,ref:a,open:Cn?!ox:en,placement:tn,popperOptions:on,popperRef:cn,slotProps:In,slots:ix,...ax,style:{position:"fixed",top:0,left:0,display:gx,...dn},TransitionProps:fx,children:l})})}),PopperRoot=styled(Popper$1,{name:"MuiPopper",slot:"Root"})({}),Popper=reactExports.forwardRef(function(n,a){const s=useRtl(),l=useDefaultProps({props:n,name:"MuiPopper"}),{anchorEl:u,component:c,components:d,componentsProps:Ct,container:ar,disablePortal:en,keepMounted:tn,modifiers:on,open:cn,placement:dn,popperOptions:Cn,popperRef:In,transition:ix,slots:ax,slotProps:ox,...sx}=l,ux=ax?.root??d?.Root,cx={anchorEl:u,container:ar,disablePortal:en,keepMounted:tn,modifiers:on,open:cn,placement:dn,popperOptions:Cn,popperRef:In,transition:ix,...sx};return jsxRuntimeExports.jsx(PopperRoot,{as:c,direction:s?"rtl":"ltr",slots:{root:ux},slotProps:ox??Ct,...cx,ref:a})});function useSlot(t,n){const{className:a,elementType:s,ownerState:l,externalForwardedProps:u,internalForwardedProps:c,shouldForwardComponentProp:d=!1,...Ct}=n,{component:ar,slots:en={[t]:void 0},slotProps:tn={[t]:void 0},...on}=u,cn=en[t]||s,dn=resolveComponentProps(tn[t],l),{props:{component:Cn,...In},internalRef:ix}=mergeSlotProps({className:a,...Ct,externalForwardedProps:t==="root"?on:void 0,externalSlotProps:dn}),ax=useForkRef(ix,dn?.ref,n.ref),ox=t==="root"?Cn||ar:Cn,sx=appendOwnerState(cn,{...t==="root"&&!ar&&!en[t]&&c,...t!=="root"&&!en[t]&&c,...In,...ox&&!d&&{as:ox},...ox&&d&&{component:ox},ref:ax},l);return[cn,sx]}function getTooltipUtilityClass(t){return generateUtilityClass("MuiTooltip",t)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function round$4(t){return Math.round(t*1e5)/1e5}const useUtilityClasses$B=t=>{const{classes:n,disableInteractive:a,arrow:s,touch:l,placement:u}=t,c={popper:["popper",!a&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",l&&"touch",`tooltipPlacement${capitalize(u.split("-")[0])}`],arrow:["arrow"]};return composeClasses(c,getTooltipUtilityClass,n)},TooltipPopper=styled(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.popper,!a.disableInteractive&&n.popperInteractive,a.arrow&&n.popperArrow,!a.open&&n.popperClose]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:n})=>!n.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:n})=>!n,style:{pointerEvents:"none"}},{props:({ownerState:n})=>n.arrow,style:{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.tooltip,a.touch&&n.touch,a.arrow&&n.tooltipArrow,n[`tooltipPlacement${capitalize(a.placement.split("-")[0])}`]]}})(memoTheme(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:n})=>n.arrow,style:{position:"relative",margin:0}},{props:({ownerState:n})=>n.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${round$4(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:n})=>!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:n})=>!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:n})=>!!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:n})=>!!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow"})(memoTheme(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(t,n){return(a,...s)=>{n&&n(a,...s),t(a,...s)}}const Tooltip=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTooltip"}),{arrow:l=!1,children:u,classes:c,components:d={},componentsProps:Ct={},describeChild:ar=!1,disableFocusListener:en=!1,disableHoverListener:tn=!1,disableInteractive:on=!1,disableTouchListener:cn=!1,enterDelay:dn=100,enterNextDelay:Cn=0,enterTouchDelay:In=700,followCursor:ix=!1,id:ax,leaveDelay:ox=0,leaveTouchDelay:sx=1500,onClose:ux,onOpen:cx,open:hx,placement:gx="bottom",PopperComponent:fx,PopperProps:dx={},slotProps:mx={},slots:vx={},title:bx,TransitionComponent:xx,TransitionProps:_x,...Ex}=s,Tx=reactExports.isValidElement(u)?u:jsxRuntimeExports.jsx("span",{children:u}),Cx=useTheme(),Mx=useRtl(),[Ax,Nx]=reactExports.useState(),[Ux,Rx]=reactExports.useState(null),Ox=reactExports.useRef(!1),Px=on||ix,$x=useTimeout(),Lx=useTimeout(),zx=useTimeout(),qx=useTimeout(),[jx,Hx]=useControlled({controlled:hx,default:!1,name:"Tooltip",state:"open"});let Vx=jx;const nE=useId(ax),Wx=reactExports.useRef(),tE=useEventCallback(()=>{Wx.current!==void 0&&(document.body.style.WebkitUserSelect=Wx.current,Wx.current=void 0),qx.clear()});reactExports.useEffect(()=>tE,[tE]);const lE=Jx=>{hystersisTimer.clear(),hystersisOpen=!0,Hx(!0),cx&&!Vx&&cx(Jx)},iE=useEventCallback(Jx=>{hystersisTimer.start(800+ox,()=>{hystersisOpen=!1}),Hx(!1),ux&&Vx&&ux(Jx),$x.start(Cx.transitions.duration.shortest,()=>{Ox.current=!1})}),Xx=Jx=>{Ox.current&&Jx.type!=="touchstart"||(Ax&&Ax.removeAttribute("title"),Lx.clear(),zx.clear(),dn||hystersisOpen&&Cn?Lx.start(hystersisOpen?Cn:dn,()=>{lE(Jx)}):lE(Jx))},CE=Jx=>{Lx.clear(),zx.start(ox,()=>{iE(Jx)})},[,RE]=reactExports.useState(!1),SE=Jx=>{isFocusVisible(Jx.target)||(RE(!1),CE(Jx))},EE=Jx=>{Ax||Nx(Jx.currentTarget),isFocusVisible(Jx.target)&&(RE(!0),Xx(Jx))},FE=Jx=>{Ox.current=!0;const mE=Tx.props;mE.onTouchStart&&mE.onTouchStart(Jx)},AE=Jx=>{FE(Jx),zx.clear(),$x.clear(),tE(),Wx.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",qx.start(In,()=>{document.body.style.WebkitUserSelect=Wx.current,Xx(Jx)})},ZE=Jx=>{Tx.props.onTouchEnd&&Tx.props.onTouchEnd(Jx),tE(),zx.start(sx,()=>{iE(Jx)})};reactExports.useEffect(()=>{if(!Vx)return;function Jx(mE){mE.key==="Escape"&&iE(mE)}return document.addEventListener("keydown",Jx),()=>{document.removeEventListener("keydown",Jx)}},[iE,Vx]);const Dx=useForkRef(getReactElementRef(Tx),Nx,a);!bx&&bx!==0&&(Vx=!1);const kx=reactExports.useRef(),Yx=Jx=>{const mE=Tx.props;mE.onMouseMove&&mE.onMouseMove(Jx),cursorPosition={x:Jx.clientX,y:Jx.clientY},kx.current&&kx.current.update()},Kx={},aE=typeof bx=="string";ar?(Kx.title=!Vx&&aE&&!tn?bx:null,Kx["aria-describedby"]=Vx?nE:null):(Kx["aria-label"]=aE?bx:null,Kx["aria-labelledby"]=Vx&&!aE?nE:null);const eE={...Kx,...Ex,...Tx.props,className:clsx(Ex.className,Tx.props.className),onTouchStart:FE,ref:Dx,...ix?{onMouseMove:Yx}:{}},gE={};cn||(eE.onTouchStart=AE,eE.onTouchEnd=ZE),tn||(eE.onMouseOver=composeEventHandler(Xx,eE.onMouseOver),eE.onMouseLeave=composeEventHandler(CE,eE.onMouseLeave),Px||(gE.onMouseOver=Xx,gE.onMouseLeave=CE)),en||(eE.onFocus=composeEventHandler(EE,eE.onFocus),eE.onBlur=composeEventHandler(SE,eE.onBlur),Px||(gE.onFocus=EE,gE.onBlur=SE));const dE={...s,isRtl:Mx,arrow:l,disableInteractive:Px,placement:gx,PopperComponentProp:fx,touch:Ox.current},bE=typeof mx.popper=="function"?mx.popper(dE):mx.popper,xE=reactExports.useMemo(()=>{let Jx=[{name:"arrow",enabled:!!Ux,options:{element:Ux,padding:4}}];return dx.popperOptions?.modifiers&&(Jx=Jx.concat(dx.popperOptions.modifiers)),bE?.popperOptions?.modifiers&&(Jx=Jx.concat(bE.popperOptions.modifiers)),{...dx.popperOptions,...bE?.popperOptions,modifiers:Jx}},[Ux,dx.popperOptions,bE?.popperOptions]),OE=useUtilityClasses$B(dE),PE=typeof mx.transition=="function"?mx.transition(dE):mx.transition,sE={slots:{popper:d.Popper,transition:d.Transition??xx,tooltip:d.Tooltip,arrow:d.Arrow,...vx},slotProps:{arrow:mx.arrow??Ct.arrow,popper:{...dx,...bE??Ct.popper},tooltip:mx.tooltip??Ct.tooltip,transition:{..._x,...PE??Ct.transition}}},[hE,TE]=useSlot("popper",{elementType:TooltipPopper,externalForwardedProps:sE,ownerState:dE,className:clsx(OE.popper,dx?.className)}),[vE,IE]=useSlot("transition",{elementType:Grow,externalForwardedProps:sE,ownerState:dE}),[DE,Bx]=useSlot("tooltip",{elementType:TooltipTooltip,className:OE.tooltip,externalForwardedProps:sE,ownerState:dE}),[Fx,Zx]=useSlot("arrow",{elementType:TooltipArrow,className:OE.arrow,externalForwardedProps:sE,ownerState:dE,ref:Rx});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Tx,eE),jsxRuntimeExports.jsx(hE,{as:fx??Popper,placement:gx,anchorEl:ix?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:Ax,popperRef:kx,open:Ax?Vx:!1,id:nE,transition:!0,...gE,...TE,popperOptions:xE,children:({TransitionProps:Jx})=>jsxRuntimeExports.jsx(vE,{timeout:Cx.transitions.duration.shorter,...Jx,...IE,children:jsxRuntimeExports.jsxs(DE,{...Bx,children:[bx,l?jsxRuntimeExports.jsx(Fx,{...Zx}):null]})})})]})}),Grid$1=createGrid({createStyledComponent:styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:t=>useDefaultProps({props:t,name:"MuiGrid"}),useTheme}),units={resistor:{m:.001,:1,K:1e3,M:1e6,G:1e9},capacitor:{fF:1e-15,pF:1e-12,nF:1e-9,uF:1e-6,mF:.001,F:1},inductor:{fH:1e-15,pH:1e-12,nH:1e-9,uH:1e-6,mH:.001,H:1},frequency:{Hz:1,kHz:1e3,MHz:1e6,GHz:1e9,THz:1e12},vcvs:{"V/V":1},vcis:{"A/V":1}},addShapes={opamp:{image:"opamp.svg",connectors:[[0,-32],[0,32],[128,0]],x:0,y:0,offset:[0,-96],label:{text:"U1",class:"circuit_label",x:96,y:-32}},vcvs:{image:"vcvs.svg",connectors:[[-64,64],[-64,32],[0,-32],[0,128]],x:0,y:0,offset:[-80,-32],label:{text:"A1",class:"circuit_label",x:48,y:24}},vcis:{image:"vcis.svg",connectors:[[-64,64],[-64,32],[0,-32],[0,128]],x:0,y:0,offset:[-80,-32],label:{text:"G1",class:"circuit_label",x:48,y:24}},resistor:{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:0,y:0,label:{text:"R1",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},capacitor:{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:0,y:0,label:{text:"C1",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},inductor:{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:0,y:0,label:{text:"L1",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},vin:{image:"vin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},iin:{image:"iin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},gnd:{image:"gnd.svg",connectors:[[0,0]],x:0,y:0,offset:[-100,-180]},vprobe:{image:"vprobe.svg",label:{text:"X1",class:"circuit_label",x:0,y:-30},connectors:[[0,0]],x:0,y:0,offset:[-10,-90]},iprobe:{image:"iprobe.svg",label:{text:"Y1",class:"circuit_label",x:-64,y:-36},connectors:[[-64,0],[64,0]],x:0,y:0,offset:[-96,-64]}},theme$1=createTheme({palette:{bland:{main:"#fff",light:"#dedfe0",dark:"#dedfe0",contrastText:"#242105"}}}),emptyResults={text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:"",numericML:"",numericText:"",solver:null},shapesWithLabels={resistor:"R",capacitor:"C",inductor:"L",vcvs:"A",vcis:"G",opamp:"U",vprobe:"X",iprobe:"Y"},componentDefaults={resistor:{value:1e3,unit:"K"},capacitor:{value:1,unit:"pF"},inductor:{value:1,unit:"nH"},vcvs:{value:100,unit:"V/V"},vcis:{value:.001,unit:"A/V"}},activeComponents=["opamp","resistor","capacitor","inductor","vcvs","vcis"],probes=["vprobe","iprobe"],initialLabels={};Object.keys(shapesWithLabels).forEach(t=>{initialLabels[t]=`${shapesWithLabels[t]}0`});function calculateNextIndex(t,n,a){if(!t||Object.keys(t).length==0)return initialLabels[n];const s=Object.keys(t).filter(l=>t[l].type==n).map(l=>Number(l.slice(1)));return`${a}${s.length==0?0:Math.max(...s)+1}`}function VisioJSSchematic({setResults:t,setNodes:n,setComponentValues:a,setFullyConnectedComponents:s,history:l,setHistory:u}){const[c,d]=reactExports.useState(initialLabels),[Ct,ar]=reactExports.useState(null),[en,tn]=reactExports.useState({}),on=15,cn=reactExports.useCallback(ax=>{const{nodeMap:ox,components:sx,fullyConnectedComponents:ux}=createNodeMap(ax,addShapes);for(const[hx,gx]of Object.entries(sx))!(hx in en)&&gx.type in componentDefaults&&(sx[hx]={...gx,...componentDefaults[gx.type]});a(hx=>{const gx={...hx};for(const[fx,dx]of Object.entries(sx))!(fx in gx)&&dx.type in componentDefaults&&(gx[fx]={type:dx.type,...componentDefaults[dx.type]});for(const fx in gx)fx in sx||delete gx[fx];return JSON.stringify(hx)==JSON.stringify(gx)?hx:gx}),s(hx=>JSON.stringify(hx)==JSON.stringify(ux)?hx:ux),n(hx=>JSON.stringify(hx)==JSON.stringify(ox)?hx:(t({...emptyResults}),ox)),tn(sx);const cx={};for(const hx in shapesWithLabels)cx[hx]=calculateNextIndex(sx,hx,shapesWithLabels[hx]);d(cx)},[en,a,s,n,t]),dn=reactExports.useCallback(ax=>{u(ox=>{const sx=JSON.parse(JSON.stringify(ax)),ux={...ox};return ux.pointer<ux.state.length-1&&(ux.state=ux.state.slice(0,ux.pointer+1)),ux.state.length==on?ux.state=[...ux.state.slice(1),sx]:ux.state=[...ux.state,sx],ux.pointer=ux.state.length-1,ux}),cn(ax)},[cn,u]),Cn=reactExports.useCallback(()=>{u(ax=>{if(ax.pointer==0)return ax;Ct.redraw(ax.state[ax.pointer-1]);const ox={...ax};return ox.pointer=ox.pointer-1,ox}),cn(l.state[l.pointer-1])},[cn,u,l,Ct]),In=reactExports.useCallback(()=>{u(ax=>{if(ax.pointer>=ax.state.length-1)return ax;Ct.redraw(ax.state[ax.pointer+1]);const ox={...ax};return ox.pointer=ox.pointer+1,ox}),cn(l.state[l.pointer+1])},[cn,u,l,Ct]);reactExports.useEffect(()=>{if(!Ct){var ax=rx({initialState:l.state[0],stateChanged:dn});ar(ax)}},[dn,l,Ct]),reactExports.useEffect(()=>{Ct&&Ct.init()},[Ct]),reactExports.useEffect(()=>{const ax=ox=>{const sx=(ox.ctrlKey||ox.metaKey)&&ox.key.toLowerCase()==="z"&&!ox.shiftKey,ux=(ox.ctrlKey||ox.metaKey)&&ox.key.toLowerCase()==="z"&&ox.shiftKey;sx?(console.log("undo"),ox.preventDefault(),Cn()):ux&&(ox.preventDefault(),In())};return window.addEventListener("keydown",ax),()=>window.removeEventListener("keydown",ax)},[Cn,In]);const ix={};return ix.vin=!("iin"in en||"vin"in en),ix.vprobe=Object.keys(en).filter(ax=>en[ax].type=="vprobe").length<2,jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid$1,{container:!0,size:{xs:12,sm:10},columns:{xs:3,md:9},children:Object.keys(addShapes).map(ax=>{const ox=addShapes[ax];return"label"in ox&&(ox.label.text=c[ax]),jsxRuntimeExports.jsx(Grid$1,{size:1,children:jsxRuntimeExports.jsx(Tooltip,{title:ax=="vin"&&!ix.vin||ax=="iin"&&!ix.vin?"max 1 vin or iin ":ax=="vprobe"&&!ix.vprobe?"max 2 vprobes":"",children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,color:probes.includes(ax)?"secondary":activeComponents.includes(ax)?"info":"success",style:{cursor:"grab",marginRight:"10px",height:"100%"},size:"small",disabled:ax=="vin"||ax=="iin"?!ix.vin:ax=="vprobe"?!ix.vprobe:!1,draggable:"true",onDragStart:sx=>{window.dragData=ox,sx.dataTransfer.setData("application/json",JSON.stringify(ox))},onClick:()=>Ct.addShape(ox),children:ax},ax)})},ax)},ax)})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,size:{xs:12,sm:2},spacing:0,justifyContent:"flex-end",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Ct.deleteSelected(),sx:{p:.5},children:jsxRuntimeExports.jsx(DeleteIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Cn(),disabled:l.pointer==0,sx:{p:.5},children:jsxRuntimeExports.jsx(UndoIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>In(),disabled:l.pointer==l.state.length-1,sx:{p:.5},children:jsxRuntimeExports.jsx(RedoIcon,{})})]}),jsxRuntimeExports.jsx(Grid$1,{container:!0,size:12,children:jsxRuntimeExports.jsx(Grid$1,{size:12,children:jsxRuntimeExports.jsx("div",{style:{border:"1px solid rgb(222, 226, 230)",display:"inline-block",width:"100%"},children:jsxRuntimeExports.jsx("svg",{id:"visiojs_top",className:"visiojs_svg"})})})})]})}function getStyleValue(t){return parseInt(t,10)||0}const styles$1={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(t){for(const n in t)return!1;return!0}function isEmpty$1(t){return isObjectEmpty(t)||t.outerHeightStyle===0&&!t.overflowing}const TextareaAutosize=reactExports.forwardRef(function(n,a){const{onChange:s,maxRows:l,minRows:u=1,style:c,value:d,...Ct}=n,{current:ar}=reactExports.useRef(d!=null),en=reactExports.useRef(null),tn=useForkRef(a,en),on=reactExports.useRef(null),cn=reactExports.useRef(null),dn=reactExports.useCallback(()=>{const ox=en.current,sx=cn.current;if(!ox||!sx)return;const cx=ownerWindow(ox).getComputedStyle(ox);if(cx.width==="0px")return{outerHeightStyle:0,overflowing:!1};sx.style.width=cx.width,sx.value=ox.value||n.placeholder||"x",sx.value.slice(-1)===`
`&&(sx.value+=" ");const hx=cx.boxSizing,gx=getStyleValue(cx.paddingBottom)+getStyleValue(cx.paddingTop),fx=getStyleValue(cx.borderBottomWidth)+getStyleValue(cx.borderTopWidth),dx=sx.scrollHeight;sx.value="x";const mx=sx.scrollHeight;let vx=dx;u&&(vx=Math.max(Number(u)*mx,vx)),l&&(vx=Math.min(Number(l)*mx,vx)),vx=Math.max(vx,mx);const bx=vx+(hx==="border-box"?gx+fx:0),xx=Math.abs(vx-dx)<=1;return{outerHeightStyle:bx,overflowing:xx}},[l,u,n.placeholder]),Cn=useEventCallback(()=>{const ox=en.current,sx=dn();if(!ox||!sx||isEmpty$1(sx))return!1;const ux=sx.outerHeightStyle;return on.current!=null&&on.current!==ux}),In=reactExports.useCallback(()=>{const ox=en.current,sx=dn();if(!ox||!sx||isEmpty$1(sx))return;const ux=sx.outerHeightStyle;on.current!==ux&&(on.current=ux,ox.style.height=`${ux}px`),ox.style.overflow=sx.overflowing?"hidden":""},[dn]),ix=reactExports.useRef(-1);useEnhancedEffect(()=>{const ox=debounce$2(In),sx=en?.current;if(!sx)return;const ux=ownerWindow(sx);ux.addEventListener("resize",ox);let cx;return typeof ResizeObserver<"u"&&(cx=new ResizeObserver(()=>{Cn()&&(cx.unobserve(sx),cancelAnimationFrame(ix.current),In(),ix.current=requestAnimationFrame(()=>{cx.observe(sx)}))}),cx.observe(sx)),()=>{ox.clear(),cancelAnimationFrame(ix.current),ux.removeEventListener("resize",ox),cx&&cx.disconnect()}},[dn,In,Cn]),useEnhancedEffect(()=>{In()});const ax=ox=>{ar||In();const sx=ox.target,ux=sx.value.length,cx=sx.value.endsWith(`
`),hx=sx.selectionStart===ux;cx&&hx&&sx.setSelectionRange(ux,ux),s&&s(ox)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:d,onChange:ax,ref:tn,rows:u,style:c,...Ct}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:n.className,readOnly:!0,ref:cn,tabIndex:-1,style:{...styles$1.shadow,...c,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(t){return typeof t=="string"}function formControlState({props:t,states:n,muiFormControl:a}){return n.reduce((s,l)=>(s[l]=t[l],a&&typeof t[l]>"u"&&(s[l]=a[l]),s),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function isFilled(t,n=!1){return t&&(hasValue(t.value)&&t.value!==""||n&&hasValue(t.defaultValue)&&t.defaultValue!=="")}function isAdornedStart(t){return t.startAdornment}function getInputBaseUtilityClass(t){return generateUtilityClass("MuiInputBase",t)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.formControl&&n.formControl,a.startAdornment&&n.adornedStart,a.endAdornment&&n.adornedEnd,a.error&&n.error,a.size==="small"&&n.sizeSmall,a.multiline&&n.multiline,a.color&&n[`color${capitalize(a.color)}`],a.fullWidth&&n.fullWidth,a.hiddenLabel&&n.hiddenLabel]},inputOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.input,a.size==="small"&&n.inputSizeSmall,a.multiline&&n.inputMultiline,a.type==="search"&&n.inputTypeSearch,a.startAdornment&&n.inputAdornedStart,a.endAdornment&&n.inputAdornedEnd,a.hiddenLabel&&n.inputHiddenLabel]},useUtilityClasses$A=t=>{const{classes:n,color:a,disabled:s,error:l,endAdornment:u,focused:c,formControl:d,fullWidth:Ct,hiddenLabel:ar,multiline:en,readOnly:tn,size:on,startAdornment:cn,type:dn}=t,Cn={root:["root",`color${capitalize(a)}`,s&&"disabled",l&&"error",Ct&&"fullWidth",c&&"focused",d&&"formControl",on&&on!=="medium"&&`size${capitalize(on)}`,en&&"multiline",cn&&"adornedStart",u&&"adornedEnd",ar&&"hiddenLabel",tn&&"readOnly"],input:["input",s&&"disabled",dn==="search"&&"inputTypeSearch",en&&"inputMultiline",on==="small"&&"inputSizeSmall",ar&&"inputHiddenLabel",cn&&"inputAdornedStart",u&&"inputAdornedEnd",tn&&"readOnly"]};return composeClasses(Cn,getInputBaseUtilityClass,n)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:n})=>n.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:n,size:a})=>n.multiline&&a==="small",style:{paddingTop:1}},{props:({ownerState:n})=>n.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},s={opacity:"0 !important"},l=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus::-ms-input-placeholder":l},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:u})=>!u.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:u})=>u.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:u,autoFocus:c,className:d,color:Ct,components:ar={},componentsProps:en={},defaultValue:tn,disabled:on,disableInjectingGlobalStyles:cn,endAdornment:dn,error:Cn,fullWidth:In=!1,id:ix,inputComponent:ax="input",inputProps:ox={},inputRef:sx,margin:ux,maxRows:cx,minRows:hx,multiline:gx=!1,name:fx,onBlur:dx,onChange:mx,onClick:vx,onFocus:bx,onKeyDown:xx,onKeyUp:_x,placeholder:Ex,readOnly:Tx,renderSuffix:Cx,rows:Mx,size:Ax,slotProps:Nx={},slots:Ux={},startAdornment:Rx,type:Ox="text",value:Px,...$x}=s,Lx=ox.value!=null?ox.value:Px,{current:zx}=reactExports.useRef(Lx!=null),qx=reactExports.useRef(),jx=reactExports.useCallback(eE=>{},[]),Hx=useForkRef(qx,sx,ox.ref,jx),[Vx,nE]=reactExports.useState(!1),Wx=useFormControl(),tE=formControlState({props:s,muiFormControl:Wx,states:["color","disabled","error","hiddenLabel","size","required","filled"]});tE.focused=Wx?Wx.focused:Vx,reactExports.useEffect(()=>{!Wx&&on&&Vx&&(nE(!1),dx&&dx())},[Wx,on,Vx,dx]);const lE=Wx&&Wx.onFilled,iE=Wx&&Wx.onEmpty,Xx=reactExports.useCallback(eE=>{isFilled(eE)?lE&&lE():iE&&iE()},[lE,iE]);useEnhancedEffect(()=>{zx&&Xx({value:Lx})},[Lx,Xx,zx]);const CE=eE=>{bx&&bx(eE),ox.onFocus&&ox.onFocus(eE),Wx&&Wx.onFocus?Wx.onFocus(eE):nE(!0)},RE=eE=>{dx&&dx(eE),ox.onBlur&&ox.onBlur(eE),Wx&&Wx.onBlur?Wx.onBlur(eE):nE(!1)},SE=(eE,...gE)=>{if(!zx){const dE=eE.target||qx.current;if(dE==null)throw new Error(formatMuiErrorMessage(1));Xx({value:dE.value})}ox.onChange&&ox.onChange(eE,...gE),mx&&mx(eE,...gE)};reactExports.useEffect(()=>{Xx(qx.current)},[]);const EE=eE=>{qx.current&&eE.currentTarget===eE.target&&qx.current.focus(),vx&&vx(eE)};let FE=ax,AE=ox;gx&&FE==="input"&&(Mx?AE={type:void 0,minRows:Mx,maxRows:Mx,...AE}:AE={type:void 0,maxRows:cx,minRows:hx,...AE},FE=TextareaAutosize);const ZE=eE=>{Xx(eE.animationName==="mui-auto-fill-cancel"?qx.current:{value:"x"})};reactExports.useEffect(()=>{Wx&&Wx.setAdornedStart(!!Rx)},[Wx,Rx]);const Dx={...s,color:tE.color||"primary",disabled:tE.disabled,endAdornment:dn,error:tE.error,focused:tE.focused,formControl:Wx,fullWidth:In,hiddenLabel:tE.hiddenLabel,multiline:gx,size:tE.size,startAdornment:Rx,type:Ox},kx=useUtilityClasses$A(Dx),Yx=Ux.root||ar.Root||InputBaseRoot,Kx=Nx.root||en.root||{},aE=Ux.input||ar.Input||InputBaseInput;return AE={...AE,...Nx.input??en.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!cn&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(Yx,{...Kx,ref:a,onClick:EE,...$x,...!isHostComponent(Yx)&&{ownerState:{...Dx,...Kx.ownerState}},className:clsx(kx.root,Kx.className,d,Tx&&"MuiInputBase-readOnly"),children:[Rx,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(aE,{"aria-invalid":tE.error,"aria-describedby":l,autoComplete:u,autoFocus:c,defaultValue:tn,disabled:tE.disabled,id:ix,onAnimationStart:ZE,name:fx,placeholder:Ex,readOnly:Tx,required:tE.required,rows:Mx,value:Lx,onKeyDown:xx,onKeyUp:_x,type:Ox,...AE,...!isHostComponent(aE)&&{as:FE,ownerState:{...Dx,...AE.ownerState}},ref:Hx,className:clsx(kx.input,AE.className,Tx&&"MuiInputBase-readOnly"),onBlur:RE,onChange:SE,onFocus:CE})}),dn,Cx?Cx({...tE,startAdornment:Rx}):null]})]})});function getInputUtilityClass(t){return generateUtilityClass("MuiInput",t)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])},useUtilityClasses$z=t=>{const{classes:n,disableUnderline:a}=t,l=composeClasses({root:["root",!a&&"underline"],input:["input"]},getInputUtilityClass,n);return{...n,...l}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{let a=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(a=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:s})=>s.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([s])=>({props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[s].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiInput"}),{disableUnderline:l=!1,components:u={},componentsProps:c,fullWidth:d=!1,inputComponent:Ct="input",multiline:ar=!1,slotProps:en,slots:tn={},type:on="text",...cn}=s,dn=useUtilityClasses$z(s),In={root:{ownerState:{disableUnderline:l}}},ix=en??c?deepmerge(en??c,In):In,ax=tn.root??u.Root??InputRoot,ox=tn.input??u.Input??InputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:ax,input:ox},slotProps:ix,fullWidth:d,inputComponent:Ct,multiline:ar,ref:a,type:on,...cn,classes:dn})});Input.muiName="Input";function getFilledInputUtilityClass(t){return generateUtilityClass("MuiFilledInput",t)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},useUtilityClasses$y=t=>{const{classes:n,disableUnderline:a,startAdornment:s,endAdornment:l,size:u,hiddenLabel:c,multiline:d}=t,Ct={root:["root",!a&&"underline",s&&"adornedStart",l&&"adornedEnd",u==="small"&&`size${capitalize(u)}`,c&&"hiddenLabel",d&&"multiline"],input:["input"]},ar=composeClasses(Ct,getFilledInputUtilityClass,n);return{...n,...ar}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${filledInputClasses.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${filledInputClasses.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:u},variants:[{props:({ownerState:c})=>!c.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([c])=>({props:{disableUnderline:!1,color:c},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[c]?.main}`}}})),{props:({ownerState:c})=>c.startAdornment,style:{paddingLeft:12}},{props:({ownerState:c})=>c.endAdornment,style:{paddingRight:12}},{props:({ownerState:c})=>c.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:c,size:d})=>c.multiline&&d==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel&&c.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:n})=>n.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}},{props:({ownerState:n})=>n.hiddenLabel&&n.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:n})=>n.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFilledInput"}),{disableUnderline:l=!1,components:u={},componentsProps:c,fullWidth:d=!1,hiddenLabel:Ct,inputComponent:ar="input",multiline:en=!1,slotProps:tn,slots:on={},type:cn="text",...dn}=s,Cn={...s,disableUnderline:l,fullWidth:d,inputComponent:ar,multiline:en,type:cn},In=useUtilityClasses$y(s),ix={root:{ownerState:Cn},input:{ownerState:Cn}},ax=tn??c?deepmerge(ix,tn??c):ix,ox=on.root??u.Root??FilledInputRoot,sx=on.input??u.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:ox,input:sx},slotProps:ax,fullWidth:d,inputComponent:ar,multiline:en,ref:a,type:cn,...dn,classes:In})});FilledInput.muiName="Input";var _span$2;const NotchedOutlineRoot$1=styled("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{name:"MuiNotchedOutlined",shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:n})=>!n.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:n})=>n.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:n})=>n.withLabel&&n.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(t){const{children:n,classes:a,className:s,label:l,notched:u,...c}=t,d=l!=null&&l!=="",Ct={...t,notched:u,withLabel:d};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:s,ownerState:Ct,...c,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:Ct,children:d?jsxRuntimeExports.jsx("span",{children:l}):_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function getOutlinedInputUtilityClass(t){return generateUtilityClass("MuiOutlinedInput",t)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])},useUtilityClasses$x=t=>{const{classes:n}=t,s=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,n);return{...n,...s}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):n}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette[a].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:14}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:14}},{props:({ownerState:a})=>a.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:a,size:s})=>a.multiline&&s==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):n}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:n})=>n.multiline,style:{padding:0}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiOutlinedInput"}),{components:l={},fullWidth:u=!1,inputComponent:c="input",label:d,multiline:Ct=!1,notched:ar,slots:en={},slotProps:tn={},type:on="text",...cn}=s,dn=useUtilityClasses$x(s),Cn=useFormControl(),In=formControlState({props:s,muiFormControl:Cn,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),ix={...s,color:In.color||"primary",disabled:In.disabled,error:In.error,focused:In.focused,formControl:Cn,fullWidth:u,hiddenLabel:In.hiddenLabel,multiline:Ct,size:In.size,type:on},ax=en.root??l.Root??OutlinedInputRoot,ox=en.input??l.Input??OutlinedInputInput,[sx,ux]=useSlot("notchedOutline",{elementType:NotchedOutlineRoot,className:dn.notchedOutline,shouldForwardComponentProp:!0,ownerState:ix,externalForwardedProps:{slots:en,slotProps:tn},additionalProps:{label:d!=null&&d!==""&&In.required?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[d,"","*"]}):d}});return jsxRuntimeExports.jsx(InputBase,{slots:{root:ax,input:ox},slotProps:tn,renderSuffix:cx=>jsxRuntimeExports.jsx(sx,{...ux,notched:typeof ar<"u"?ar:!!(cx.startAdornment||cx.filled||cx.focused)}),fullWidth:u,inputComponent:c,multiline:Ct,ref:a,type:on,...cn,classes:{...dn,notchedOutline:null}})});OutlinedInput.muiName="Input";function getFormLabelUtilityClasses(t){return generateUtilityClass("MuiFormLabel",t)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),useUtilityClasses$w=t=>{const{classes:n,color:a,focused:s,disabled:l,error:u,filled:c,required:d}=t,Ct={root:["root",`color${capitalize(a)}`,l&&"disabled",u&&"error",c&&"filled",s&&"focused",d&&"required"],asterisk:["asterisk",u&&"error"]};return composeClasses(Ct,getFormLabelUtilityClasses,n)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color==="secondary"&&n.colorSecondary,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${formLabelClasses.focused}`]:{color:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${formLabelClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk"})(memoTheme(({theme:t})=>({[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}))),FormLabel=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormLabel"}),{children:l,className:u,color:c,component:d="label",disabled:Ct,error:ar,filled:en,focused:tn,required:on,...cn}=s,dn=useFormControl(),Cn=formControlState({props:s,muiFormControl:dn,states:["color","required","focused","disabled","error","filled"]}),In={...s,color:Cn.color||"primary",component:d,disabled:Cn.disabled,error:Cn.error,filled:Cn.filled,focused:Cn.focused,required:Cn.required},ix=useUtilityClasses$w(In);return jsxRuntimeExports.jsxs(FormLabelRoot,{as:d,ownerState:In,className:clsx(ix.root,u),ref:a,...cn,children:[l,Cn.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:In,"aria-hidden":!0,className:ix.asterisk,children:["","*"]})]})});function getInputLabelUtilityClasses(t){return generateUtilityClass("MuiInputLabel",t)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const useUtilityClasses$v=t=>{const{classes:n,formControl:a,size:s,shrink:l,disableAnimation:u,variant:c,required:d}=t,Ct={root:["root",a&&"formControl",!u&&"animated",l&&"shrink",s&&s!=="medium"&&`size${capitalize(s)}`,c],asterisk:[d&&"asterisk"]},ar=composeClasses(Ct,getInputLabelUtilityClasses,n);return{...n,...ar}},InputLabelRoot=styled(FormLabel,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${formLabelClasses.asterisk}`]:n.asterisk},n.root,a.formControl&&n.formControl,a.size==="small"&&n.sizeSmall,a.shrink&&n.shrink,!a.disableAnimation&&n.animated,a.focused&&n.focused,n[a.variant]]}})(memoTheme(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:n})=>n.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:n})=>n.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:n})=>!n.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="filled"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:n,ownerState:a,size:s})=>n==="filled"&&a.shrink&&s==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="outlined"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),InputLabel=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiInputLabel",props:n}),{disableAnimation:l=!1,margin:u,shrink:c,variant:d,className:Ct,...ar}=s,en=useFormControl();let tn=c;typeof tn>"u"&&en&&(tn=en.filled||en.focused||en.adornedStart);const on=formControlState({props:s,muiFormControl:en,states:["size","variant","required","focused"]}),cn={...s,disableAnimation:l,formControl:en,shrink:tn,size:on.size,variant:on.variant,required:on.required,focused:on.focused},dn=useUtilityClasses$v(cn);return jsxRuntimeExports.jsx(InputLabelRoot,{"data-shrink":tn,ref:a,className:clsx(dn.root,Ct),...ar,ownerState:cn,classes:dn})});function getFormControlUtilityClasses(t){return generateUtilityClass("MuiFormControl",t)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$u=t=>{const{classes:n,margin:a,fullWidth:s}=t,l={root:["root",a!=="none"&&`margin${capitalize(a)}`,s&&"fullWidth"]};return composeClasses(l,getFormControlUtilityClasses,n)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`margin${capitalize(a.margin)}`],a.fullWidth&&n.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormControl"}),{children:l,className:u,color:c="primary",component:d="div",disabled:Ct=!1,error:ar=!1,focused:en,fullWidth:tn=!1,hiddenLabel:on=!1,margin:cn="none",required:dn=!1,size:Cn="medium",variant:In="outlined",...ix}=s,ax={...s,color:c,component:d,disabled:Ct,error:ar,fullWidth:tn,hiddenLabel:on,margin:cn,required:dn,size:Cn,variant:In},ox=useUtilityClasses$u(ax),[sx,ux]=reactExports.useState(()=>{let _x=!1;return l&&reactExports.Children.forEach(l,Ex=>{if(!isMuiElement(Ex,["Input","Select"]))return;const Tx=isMuiElement(Ex,["Select"])?Ex.props.input:Ex;Tx&&isAdornedStart(Tx.props)&&(_x=!0)}),_x}),[cx,hx]=reactExports.useState(()=>{let _x=!1;return l&&reactExports.Children.forEach(l,Ex=>{isMuiElement(Ex,["Input","Select"])&&(isFilled(Ex.props,!0)||isFilled(Ex.props.inputProps,!0))&&(_x=!0)}),_x}),[gx,fx]=reactExports.useState(!1);Ct&&gx&&fx(!1);const dx=en!==void 0&&!Ct?en:gx;let mx;reactExports.useRef(!1);const vx=reactExports.useCallback(()=>{hx(!0)},[]),bx=reactExports.useCallback(()=>{hx(!1)},[]),xx=reactExports.useMemo(()=>({adornedStart:sx,setAdornedStart:ux,color:c,disabled:Ct,error:ar,filled:cx,focused:dx,fullWidth:tn,hiddenLabel:on,size:Cn,onBlur:()=>{fx(!1)},onFocus:()=>{fx(!0)},onEmpty:bx,onFilled:vx,registerEffect:mx,required:dn,variant:In}),[sx,c,Ct,ar,cx,dx,tn,on,mx,bx,vx,dn,Cn,In]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:xx,children:jsxRuntimeExports.jsx(FormControlRoot,{as:d,ownerState:ax,className:clsx(ox.root,u),ref:a,...ix,children:l})})});function getFormHelperTextUtilityClasses(t){return generateUtilityClass("MuiFormHelperText",t)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _span$1;const useUtilityClasses$t=t=>{const{classes:n,contained:a,size:s,disabled:l,error:u,filled:c,focused:d,required:Ct}=t,ar={root:["root",l&&"disabled",u&&"error",s&&`size${capitalize(s)}`,a&&"contained",d&&"focused",c&&"filled",Ct&&"required"]};return composeClasses(ar,getFormHelperTextUtilityClasses,n)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.size&&n[`size${capitalize(a.size)}`],a.contained&&n.contained,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formHelperTextClasses.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:n})=>n.contained,style:{marginLeft:14,marginRight:14}}]}))),FormHelperText=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormHelperText"}),{children:l,className:u,component:c="p",disabled:d,error:Ct,filled:ar,focused:en,margin:tn,required:on,variant:cn,...dn}=s,Cn=useFormControl(),In=formControlState({props:s,muiFormControl:Cn,states:["variant","size","disabled","error","filled","focused","required"]}),ix={...s,component:c,contained:In.variant==="filled"||In.variant==="outlined",variant:In.variant,size:In.size,disabled:In.disabled,error:In.error,filled:In.filled,focused:In.focused,required:In.required};delete ix.ownerState;const ax=useUtilityClasses$t(ix);return jsxRuntimeExports.jsx(FormHelperTextRoot,{as:c,className:clsx(ax.root,u),ref:a,...dn,ownerState:ix,children:l===" "?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):l})}),ListContext=reactExports.createContext({});function getListUtilityClass(t){return generateUtilityClass("MuiList",t)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$s=t=>{const{classes:n,disablePadding:a,dense:s,subheader:l}=t;return composeClasses({root:["root",!a&&"padding",s&&"dense",l&&"subheader"]},getListUtilityClass,n)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disablePadding&&n.padding,a.dense&&n.dense,a.subheader&&n.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),List=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiList"}),{children:l,className:u,component:c="ul",dense:d=!1,disablePadding:Ct=!1,subheader:ar,...en}=s,tn=reactExports.useMemo(()=>({dense:d}),[d]),on={...s,component:c,dense:d,disablePadding:Ct},cn=useUtilityClasses$s(on);return jsxRuntimeExports.jsx(ListContext.Provider,{value:tn,children:jsxRuntimeExports.jsxs(ListRoot,{as:c,className:clsx(cn.root,u),ref:a,ownerState:on,...en,children:[ar,l]})})});function getScrollbarSize(t=window){const n=t.document.documentElement.clientWidth;return t.innerWidth-n}function nextItem(t,n,a){return t===n?t.firstChild:n&&n.nextElementSibling?n.nextElementSibling:a?null:t.firstChild}function previousItem(t,n,a){return t===n?a?t.firstChild:t.lastChild:n&&n.previousElementSibling?n.previousElementSibling:a?null:t.lastChild}function textCriteriaMatches(t,n){if(n===void 0)return!0;let a=t.innerText;return a===void 0&&(a=t.textContent),a=a.trim().toLowerCase(),a.length===0?!1:n.repeating?a[0]===n.keys[0]:a.startsWith(n.keys.join(""))}function moveFocus(t,n,a,s,l,u){let c=!1,d=l(t,n,n?a:!1);for(;d;){if(d===t.firstChild){if(c)return!1;c=!0}const Ct=s?!1:d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||!textCriteriaMatches(d,u)||Ct)d=l(t,d,a);else return d.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(n,a){const{actions:s,autoFocus:l=!1,autoFocusItem:u=!1,children:c,className:d,disabledItemsFocusable:Ct=!1,disableListWrap:ar=!1,onKeyDown:en,variant:tn="selectedMenu",...on}=n,cn=reactExports.useRef(null),dn=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{l&&cn.current.focus()},[l]),reactExports.useImperativeHandle(s,()=>({adjustStyleForScrollbar:(ox,{direction:sx})=>{const ux=!cn.current.style.width;if(ox.clientHeight<cn.current.clientHeight&&ux){const cx=`${getScrollbarSize(ownerWindow(ox))}px`;cn.current.style[sx==="rtl"?"paddingLeft":"paddingRight"]=cx,cn.current.style.width=`calc(100% + ${cx})`}return cn.current}}),[]);const Cn=ox=>{const sx=cn.current,ux=ox.key;if(ox.ctrlKey||ox.metaKey||ox.altKey){en&&en(ox);return}const hx=ownerDocument(sx).activeElement;if(ux==="ArrowDown")ox.preventDefault(),moveFocus(sx,hx,ar,Ct,nextItem);else if(ux==="ArrowUp")ox.preventDefault(),moveFocus(sx,hx,ar,Ct,previousItem);else if(ux==="Home")ox.preventDefault(),moveFocus(sx,null,ar,Ct,nextItem);else if(ux==="End")ox.preventDefault(),moveFocus(sx,null,ar,Ct,previousItem);else if(ux.length===1){const gx=dn.current,fx=ux.toLowerCase(),dx=performance.now();gx.keys.length>0&&(dx-gx.lastTime>500?(gx.keys=[],gx.repeating=!0,gx.previousKeyMatched=!0):gx.repeating&&fx!==gx.keys[0]&&(gx.repeating=!1)),gx.lastTime=dx,gx.keys.push(fx);const mx=hx&&!gx.repeating&&textCriteriaMatches(hx,gx);gx.previousKeyMatched&&(mx||moveFocus(sx,hx,!1,Ct,nextItem,gx))?ox.preventDefault():gx.previousKeyMatched=!1}en&&en(ox)},In=useForkRef(cn,a);let ix=-1;reactExports.Children.forEach(c,(ox,sx)=>{if(!reactExports.isValidElement(ox)){ix===sx&&(ix+=1,ix>=c.length&&(ix=-1));return}ox.props.disabled||(tn==="selectedMenu"&&ox.props.selected||ix===-1)&&(ix=sx),ix===sx&&(ox.props.disabled||ox.props.muiSkipListHighlight||ox.type.muiSkipListHighlight)&&(ix+=1,ix>=c.length&&(ix=-1))});const ax=reactExports.Children.map(c,(ox,sx)=>{if(sx===ix){const ux={};return u&&(ux.autoFocus=!0),ox.props.tabIndex===void 0&&tn==="selectedMenu"&&(ux.tabIndex=0),reactExports.cloneElement(ox,ux)}return ox});return jsxRuntimeExports.jsx(List,{role:"menu",ref:In,className:d,onKeyDown:Cn,tabIndex:l?0:-1,...on,children:ax})});function isOverflowing(t){const n=ownerDocument(t);return n.body===t?ownerWindow(t).innerWidth>n.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function ariaHidden(t,n){n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function getPaddingRight(t){return parseInt(ownerWindow(t).getComputedStyle(t).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(t){const a=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),s=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return a||s}function ariaHiddenSiblings(t,n,a,s,l){const u=[n,a,...s];[].forEach.call(t.children,c=>{const d=!u.includes(c),Ct=!isAriaHiddenForbiddenOnElement(c);d&&Ct&&ariaHidden(c,l)})}function findIndexOf(t,n){let a=-1;return t.some((s,l)=>n(s)?(a=l,!0):!1),a}function handleContainer(t,n){const a=[],s=t.container;if(!n.disableScrollLock){if(isOverflowing(s)){const c=getScrollbarSize(ownerWindow(s));a.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${getPaddingRight(s)+c}px`;const d=ownerDocument(s).querySelectorAll(".mui-fixed");[].forEach.call(d,Ct=>{a.push({value:Ct.style.paddingRight,property:"padding-right",el:Ct}),Ct.style.paddingRight=`${getPaddingRight(Ct)+c}px`})}let u;if(s.parentNode instanceof DocumentFragment)u=ownerDocument(s).body;else{const c=s.parentElement,d=ownerWindow(s);u=c?.nodeName==="HTML"&&d.getComputedStyle(c).overflowY==="scroll"?c:s}a.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{a.forEach(({value:u,el:c,property:d})=>{u?c.style.setProperty(d,u):c.style.removeProperty(d)})}}function getHiddenSiblings(t){const n=[];return[].forEach.call(t.children,a=>{a.getAttribute("aria-hidden")==="true"&&n.push(a)}),n}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(n,a){let s=this.modals.indexOf(n);if(s!==-1)return s;s=this.modals.length,this.modals.push(n),n.modalRef&&ariaHidden(n.modalRef,!1);const l=getHiddenSiblings(a);ariaHiddenSiblings(a,n.mount,n.modalRef,l,!0);const u=findIndexOf(this.containers,c=>c.container===a);return u!==-1?(this.containers[u].modals.push(n),s):(this.containers.push({modals:[n],container:a,restore:null,hiddenSiblings:l}),s)}mount(n,a){const s=findIndexOf(this.containers,u=>u.modals.includes(n)),l=this.containers[s];l.restore||(l.restore=handleContainer(l,a))}remove(n,a=!0){const s=this.modals.indexOf(n);if(s===-1)return s;const l=findIndexOf(this.containers,c=>c.modals.includes(n)),u=this.containers[l];if(u.modals.splice(u.modals.indexOf(n),1),this.modals.splice(s,1),u.modals.length===0)u.restore&&u.restore(),n.modalRef&&ariaHidden(n.modalRef,a),ariaHiddenSiblings(u.container,n.mount,n.modalRef,u.hiddenSiblings,!1),this.containers.splice(l,1);else{const c=u.modals[u.modals.length-1];c.modalRef&&ariaHidden(c.modalRef,!1)}return s}isTopModal(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(t){const n=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(n)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:n}function isNonTabbableRadio(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const n=s=>t.ownerDocument.querySelector(`input[type="radio"]${s}`);let a=n(`[name="${t.name}"]:checked`);return a||(a=n(`[name="${t.name}"]`)),a!==t}function isNodeMatchingSelectorFocusable(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||isNonTabbableRadio(t))}function defaultGetTabbable(t){const n=[],a=[];return Array.from(t.querySelectorAll(candidatesSelector)).forEach((s,l)=>{const u=getTabIndex(s);u===-1||!isNodeMatchingSelectorFocusable(s)||(u===0?n.push(s):a.push({documentOrder:l,tabIndex:u,node:s}))}),a.sort((s,l)=>s.tabIndex===l.tabIndex?s.documentOrder-l.documentOrder:s.tabIndex-l.tabIndex).map(s=>s.node).concat(n)}function defaultIsEnabled(){return!0}function FocusTrap(t){const{children:n,disableAutoFocus:a=!1,disableEnforceFocus:s=!1,disableRestoreFocus:l=!1,getTabbable:u=defaultGetTabbable,isEnabled:c=defaultIsEnabled,open:d}=t,Ct=reactExports.useRef(!1),ar=reactExports.useRef(null),en=reactExports.useRef(null),tn=reactExports.useRef(null),on=reactExports.useRef(null),cn=reactExports.useRef(!1),dn=reactExports.useRef(null),Cn=useForkRef(getReactElementRef(n),dn),In=reactExports.useRef(null);reactExports.useEffect(()=>{!d||!dn.current||(cn.current=!a)},[a,d]),reactExports.useEffect(()=>{if(!d||!dn.current)return;const ox=ownerDocument(dn.current);return dn.current.contains(ox.activeElement)||(dn.current.hasAttribute("tabIndex")||dn.current.setAttribute("tabIndex","-1"),cn.current&&dn.current.focus()),()=>{l||(tn.current&&tn.current.focus&&(Ct.current=!0,tn.current.focus()),tn.current=null)}},[d]),reactExports.useEffect(()=>{if(!d||!dn.current)return;const ox=ownerDocument(dn.current),sx=hx=>{In.current=hx,!(s||!c()||hx.key!=="Tab")&&ox.activeElement===dn.current&&hx.shiftKey&&(Ct.current=!0,en.current&&en.current.focus())},ux=()=>{const hx=dn.current;if(hx===null)return;if(!ox.hasFocus()||!c()||Ct.current){Ct.current=!1;return}if(hx.contains(ox.activeElement)||s&&ox.activeElement!==ar.current&&ox.activeElement!==en.current)return;if(ox.activeElement!==on.current)on.current=null;else if(on.current!==null)return;if(!cn.current)return;let gx=[];if((ox.activeElement===ar.current||ox.activeElement===en.current)&&(gx=u(dn.current)),gx.length>0){const fx=!!(In.current?.shiftKey&&In.current?.key==="Tab"),dx=gx[0],mx=gx[gx.length-1];typeof dx!="string"&&typeof mx!="string"&&(fx?mx.focus():dx.focus())}else hx.focus()};ox.addEventListener("focusin",ux),ox.addEventListener("keydown",sx,!0);const cx=setInterval(()=>{ox.activeElement&&ox.activeElement.tagName==="BODY"&&ux()},50);return()=>{clearInterval(cx),ox.removeEventListener("focusin",ux),ox.removeEventListener("keydown",sx,!0)}},[a,s,l,c,d,u]);const ix=ox=>{tn.current===null&&(tn.current=ox.relatedTarget),cn.current=!0,on.current=ox.target;const sx=n.props.onFocus;sx&&sx(ox)},ax=ox=>{tn.current===null&&(tn.current=ox.relatedTarget),cn.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:d?0:-1,onFocus:ax,ref:ar,"data-testid":"sentinelStart"}),reactExports.cloneElement(n,{ref:Cn,onFocus:ix}),jsxRuntimeExports.jsx("div",{tabIndex:d?0:-1,onFocus:ax,ref:en,"data-testid":"sentinelEnd"})]})}const styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(n,a){const s=useTheme(),l={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:u,appear:c=!0,children:d,easing:Ct,in:ar,onEnter:en,onEntered:tn,onEntering:on,onExit:cn,onExited:dn,onExiting:Cn,style:In,timeout:ix=l,TransitionComponent:ax=Transition,...ox}=n,sx=reactExports.useRef(null),ux=useForkRef(sx,getReactElementRef(d),a),cx=xx=>_x=>{if(xx){const Ex=sx.current;_x===void 0?xx(Ex):xx(Ex,_x)}},hx=cx(on),gx=cx((xx,_x)=>{reflow(xx);const Ex=getTransitionProps({style:In,timeout:ix,easing:Ct},{mode:"enter"});xx.style.webkitTransition=s.transitions.create("opacity",Ex),xx.style.transition=s.transitions.create("opacity",Ex),en&&en(xx,_x)}),fx=cx(tn),dx=cx(Cn),mx=cx(xx=>{const _x=getTransitionProps({style:In,timeout:ix,easing:Ct},{mode:"exit"});xx.style.webkitTransition=s.transitions.create("opacity",_x),xx.style.transition=s.transitions.create("opacity",_x),cn&&cn(xx)}),vx=cx(dn),bx=xx=>{u&&u(sx.current,xx)};return jsxRuntimeExports.jsx(ax,{appear:c,in:ar,nodeRef:sx,onEnter:gx,onEntered:fx,onEntering:hx,onExit:mx,onExited:vx,onExiting:dx,addEndListener:bx,timeout:ix,...ox,children:(xx,{ownerState:_x,...Ex})=>reactExports.cloneElement(d,{style:{opacity:0,visibility:xx==="exited"&&!ar?"hidden":void 0,...styles[xx],...In,...d.props.style},ref:ux,...Ex})})});function getBackdropUtilityClass(t){return generateUtilityClass("MuiBackdrop",t)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$r=t=>{const{classes:n,invisible:a}=t;return composeClasses({root:["root",a&&"invisible"]},getBackdropUtilityClass,n)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.invisible&&n.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiBackdrop"}),{children:l,className:u,component:c="div",invisible:d=!1,open:Ct,components:ar={},componentsProps:en={},slotProps:tn={},slots:on={},TransitionComponent:cn,transitionDuration:dn,...Cn}=s,In={...s,component:c,invisible:d},ix=useUtilityClasses$r(In),ax={transition:cn,root:ar.Root,...on},ox={...en,...tn},sx={component:c,slots:ax,slotProps:ox},[ux,cx]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:sx,className:clsx(ix.root,u),ownerState:In}),[hx,gx]=useSlot("transition",{elementType:Fade,externalForwardedProps:sx,ownerState:In});return jsxRuntimeExports.jsx(hx,{in:Ct,timeout:dn,...Cn,...gx,children:jsxRuntimeExports.jsx(ux,{"aria-hidden":!0,...cx,classes:ix,ref:a,children:l})})});function getContainer(t){return typeof t=="function"?t():t}function getHasTransition(t){return t?t.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal(t){const{container:n,disableEscapeKeyDown:a=!1,disableScrollLock:s=!1,closeAfterTransition:l=!1,onTransitionEnter:u,onTransitionExited:c,children:d,onClose:Ct,open:ar,rootRef:en}=t,tn=reactExports.useRef({}),on=reactExports.useRef(null),cn=reactExports.useRef(null),dn=useForkRef(cn,en),[Cn,In]=reactExports.useState(!ar),ix=getHasTransition(d);let ax=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(ax=!1);const ox=()=>ownerDocument(on.current),sx=()=>(tn.current.modalRef=cn.current,tn.current.mount=on.current,tn.current),ux=()=>{manager.mount(sx(),{disableScrollLock:s}),cn.current&&(cn.current.scrollTop=0)},cx=useEventCallback(()=>{const _x=getContainer(n)||ox().body;manager.add(sx(),_x),cn.current&&ux()}),hx=()=>manager.isTopModal(sx()),gx=useEventCallback(_x=>{on.current=_x,_x&&(ar&&hx()?ux():cn.current&&ariaHidden(cn.current,ax))}),fx=reactExports.useCallback(()=>{manager.remove(sx(),ax)},[ax]);reactExports.useEffect(()=>()=>{fx()},[fx]),reactExports.useEffect(()=>{ar?cx():(!ix||!l)&&fx()},[ar,fx,ix,l,cx]);const dx=_x=>Ex=>{_x.onKeyDown?.(Ex),!(Ex.key!=="Escape"||Ex.which===229||!hx())&&(a||(Ex.stopPropagation(),Ct&&Ct(Ex,"escapeKeyDown")))},mx=_x=>Ex=>{_x.onClick?.(Ex),Ex.target===Ex.currentTarget&&Ct&&Ct(Ex,"backdropClick")};return{getRootProps:(_x={})=>{const Ex=extractEventHandlers(t);delete Ex.onTransitionEnter,delete Ex.onTransitionExited;const Tx={...Ex,..._x};return{role:"presentation",...Tx,onKeyDown:dx(Tx),ref:dn}},getBackdropProps:(_x={})=>{const Ex=_x;return{"aria-hidden":!0,...Ex,onClick:mx(Ex),open:ar}},getTransitionProps:()=>{const _x=()=>{In(!1),u&&u()},Ex=()=>{In(!0),c&&c(),l&&fx()};return{onEnter:createChainedFunction(_x,d?.props.onEnter??noop$1),onExited:createChainedFunction(Ex,d?.props.onExited??noop$1)}},rootRef:dn,portalRef:gx,isTopModal:hx,exited:Cn,hasTransition:ix}}function getModalUtilityClass(t){return generateUtilityClass("MuiModal",t)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$q=t=>{const{open:n,exited:a,classes:s}=t;return composeClasses({root:["root",!n&&a&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,s)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.open&&a.exited&&n.hidden]}})(memoTheme(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:n})=>!n.open&&n.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Modal=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiModal",props:n}),{BackdropComponent:l=ModalBackdrop,BackdropProps:u,classes:c,className:d,closeAfterTransition:Ct=!1,children:ar,container:en,component:tn,components:on={},componentsProps:cn={},disableAutoFocus:dn=!1,disableEnforceFocus:Cn=!1,disableEscapeKeyDown:In=!1,disablePortal:ix=!1,disableRestoreFocus:ax=!1,disableScrollLock:ox=!1,hideBackdrop:sx=!1,keepMounted:ux=!1,onClose:cx,onTransitionEnter:hx,onTransitionExited:gx,open:fx,slotProps:dx={},slots:mx={},theme:vx,...bx}=s,xx={...s,closeAfterTransition:Ct,disableAutoFocus:dn,disableEnforceFocus:Cn,disableEscapeKeyDown:In,disablePortal:ix,disableRestoreFocus:ax,disableScrollLock:ox,hideBackdrop:sx,keepMounted:ux},{getRootProps:_x,getBackdropProps:Ex,getTransitionProps:Tx,portalRef:Cx,isTopModal:Mx,exited:Ax,hasTransition:Nx}=useModal({...xx,rootRef:a}),Ux={...xx,exited:Ax},Rx=useUtilityClasses$q(Ux),Ox={};if(ar.props.tabIndex===void 0&&(Ox.tabIndex="-1"),Nx){const{onEnter:jx,onExited:Hx}=Tx();Ox.onEnter=jx,Ox.onExited=Hx}const Px={slots:{root:on.Root,backdrop:on.Backdrop,...mx},slotProps:{...cn,...dx}},[$x,Lx]=useSlot("root",{ref:a,elementType:ModalRoot,externalForwardedProps:{...Px,...bx,component:tn},getSlotProps:_x,ownerState:Ux,className:clsx(d,Rx?.root,!Ux.open&&Ux.exited&&Rx?.hidden)}),[zx,qx]=useSlot("backdrop",{ref:u?.ref,elementType:l,externalForwardedProps:Px,shouldForwardComponentProp:!0,additionalProps:u,getSlotProps:jx=>Ex({...jx,onClick:Hx=>{jx?.onClick&&jx.onClick(Hx)}}),className:clsx(u?.className,Rx?.backdrop),ownerState:Ux});return!ux&&!fx&&(!Nx||Ax)?null:jsxRuntimeExports.jsx(Portal,{ref:Cx,container:en,disablePortal:ix,children:jsxRuntimeExports.jsxs($x,{...Lx,children:[!sx&&l?jsxRuntimeExports.jsx(zx,{...qx}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:Cn,disableAutoFocus:dn,disableRestoreFocus:ax,isEnabled:Mx,open:fx,children:reactExports.cloneElement(ar,Ox)})]})})});function getPaperUtilityClass(t){return generateUtilityClass("MuiPaper",t)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$p=t=>{const{square:n,elevation:a,variant:s,classes:l}=t,u={root:["root",s,!n&&"rounded",s==="elevation"&&`elevation${a}`]};return composeClasses(u,getPaperUtilityClass,l)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],!a.square&&n.rounded,a.variant==="elevation"&&n[`elevation${a.elevation}`]]}})(memoTheme(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:n})=>!n.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiPaper"}),l=useTheme(),{className:u,component:c="div",elevation:d=1,square:Ct=!1,variant:ar="elevation",...en}=s,tn={...s,component:c,elevation:d,square:Ct,variant:ar},on=useUtilityClasses$p(tn);return jsxRuntimeExports.jsx(PaperRoot,{as:c,ownerState:tn,className:clsx(on.root,u),ref:a,...en,style:{...ar==="elevation"&&{"--Paper-shadow":(l.vars||l).shadows[d],...l.vars&&{"--Paper-overlay":l.vars.overlays?.[d]},...!l.vars&&l.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha$1("#fff",getOverlayAlpha(d))}, ${alpha$1("#fff",getOverlayAlpha(d))})`}},...en.style}})});function getPopoverUtilityClass(t){return generateUtilityClass("MuiPopover",t)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.height/2:n==="bottom"&&(a=t.height),a}function getOffsetLeft(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.width/2:n==="right"&&(a=t.width),a}function getTransformOriginValue(t){return[t.horizontal,t.vertical].map(n=>typeof n=="number"?`${n}px`:n).join(" ")}function resolveAnchorEl(t){return typeof t=="function"?t():t}const useUtilityClasses$o=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,n)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root"})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiPopover"}),{action:l,anchorEl:u,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:Ct="anchorEl",children:ar,className:en,container:tn,elevation:on=8,marginThreshold:cn=16,open:dn,PaperProps:Cn={},slots:In={},slotProps:ix={},transformOrigin:ax={vertical:"top",horizontal:"left"},TransitionComponent:ox,transitionDuration:sx="auto",TransitionProps:ux={},disableScrollLock:cx=!1,...hx}=s,gx=reactExports.useRef(),fx={...s,anchorOrigin:c,anchorReference:Ct,elevation:on,marginThreshold:cn,transformOrigin:ax,TransitionComponent:ox,transitionDuration:sx,TransitionProps:ux},dx=useUtilityClasses$o(fx),mx=reactExports.useCallback(()=>{if(Ct==="anchorPosition")return d;const jx=resolveAnchorEl(u),Vx=(jx&&jx.nodeType===1?jx:ownerDocument(gx.current).body).getBoundingClientRect();return{top:Vx.top+getOffsetTop(Vx,c.vertical),left:Vx.left+getOffsetLeft(Vx,c.horizontal)}},[u,c.horizontal,c.vertical,d,Ct]),vx=reactExports.useCallback(jx=>({vertical:getOffsetTop(jx,ax.vertical),horizontal:getOffsetLeft(jx,ax.horizontal)}),[ax.horizontal,ax.vertical]),bx=reactExports.useCallback(jx=>{const Hx={width:jx.offsetWidth,height:jx.offsetHeight},Vx=vx(Hx);if(Ct==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Vx)};const nE=mx();let Wx=nE.top-Vx.vertical,tE=nE.left-Vx.horizontal;const lE=Wx+Hx.height,iE=tE+Hx.width,Xx=ownerWindow(resolveAnchorEl(u)),CE=Xx.innerHeight-cn,RE=Xx.innerWidth-cn;if(cn!==null&&Wx<cn){const SE=Wx-cn;Wx-=SE,Vx.vertical+=SE}else if(cn!==null&&lE>CE){const SE=lE-CE;Wx-=SE,Vx.vertical+=SE}if(cn!==null&&tE<cn){const SE=tE-cn;tE-=SE,Vx.horizontal+=SE}else if(iE>RE){const SE=iE-RE;tE-=SE,Vx.horizontal+=SE}return{top:`${Math.round(Wx)}px`,left:`${Math.round(tE)}px`,transformOrigin:getTransformOriginValue(Vx)}},[u,Ct,mx,vx,cn]),[xx,_x]=reactExports.useState(dn),Ex=reactExports.useCallback(()=>{const jx=gx.current;if(!jx)return;const Hx=bx(jx);Hx.top!==null&&jx.style.setProperty("top",Hx.top),Hx.left!==null&&(jx.style.left=Hx.left),jx.style.transformOrigin=Hx.transformOrigin,_x(!0)},[bx]);reactExports.useEffect(()=>(cx&&window.addEventListener("scroll",Ex),()=>window.removeEventListener("scroll",Ex)),[u,cx,Ex]);const Tx=()=>{Ex()},Cx=()=>{_x(!1)};reactExports.useEffect(()=>{dn&&Ex()}),reactExports.useImperativeHandle(l,()=>dn?{updatePosition:()=>{Ex()}}:null,[dn,Ex]),reactExports.useEffect(()=>{if(!dn)return;const jx=debounce$2(()=>{Ex()}),Hx=ownerWindow(resolveAnchorEl(u));return Hx.addEventListener("resize",jx),()=>{jx.clear(),Hx.removeEventListener("resize",jx)}},[u,dn,Ex]);let Mx=sx;const Ax={slots:{transition:ox,...In},slotProps:{transition:ux,paper:Cn,...ix}},[Nx,Ux]=useSlot("transition",{elementType:Grow,externalForwardedProps:Ax,ownerState:fx,getSlotProps:jx=>({...jx,onEntering:(Hx,Vx)=>{jx.onEntering?.(Hx,Vx),Tx()},onExited:Hx=>{jx.onExited?.(Hx),Cx()}}),additionalProps:{appear:!0,in:dn}});sx==="auto"&&!Nx.muiSupportAuto&&(Mx=void 0);const Rx=tn||(u?ownerDocument(resolveAnchorEl(u)).body:void 0),[Ox,{slots:Px,slotProps:$x,...Lx}]=useSlot("root",{ref:a,elementType:PopoverRoot,externalForwardedProps:{...Ax,...hx},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:In.backdrop},slotProps:{backdrop:mergeSlotProps$1(typeof ix.backdrop=="function"?ix.backdrop(fx):ix.backdrop,{invisible:!0})},container:Rx,open:dn},ownerState:fx,className:clsx(dx.root,en)}),[zx,qx]=useSlot("paper",{ref:gx,className:dx.paper,elementType:PopoverPaper,externalForwardedProps:Ax,shouldForwardComponentProp:!0,additionalProps:{elevation:on,style:xx?void 0:{opacity:0}},ownerState:fx});return jsxRuntimeExports.jsx(Ox,{...Lx,...!isHostComponent(Ox)&&{slots:Px,slotProps:$x,disableScrollLock:cx},children:jsxRuntimeExports.jsx(Nx,{...Ux,timeout:Mx,children:jsxRuntimeExports.jsx(zx,{...qx,children:ar})})})});function getMenuUtilityClass(t){return generateUtilityClass("MuiMenu",t)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$n=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,n)},MenuRoot=styled(Popover,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List"})({outline:0}),Menu=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:c,disableAutoFocusItem:d=!1,MenuListProps:Ct={},onClose:ar,open:en,PaperProps:tn={},PopoverClasses:on,transitionDuration:cn="auto",TransitionProps:{onEntering:dn,...Cn}={},variant:In="selectedMenu",slots:ix={},slotProps:ax={},...ox}=s,sx=useRtl(),ux={...s,autoFocus:l,disableAutoFocusItem:d,MenuListProps:Ct,onEntering:dn,PaperProps:tn,transitionDuration:cn,TransitionProps:Cn,variant:In},cx=useUtilityClasses$n(ux),hx=l&&!d&&en,gx=reactExports.useRef(null),fx=(Mx,Ax)=>{gx.current&&gx.current.adjustStyleForScrollbar(Mx,{direction:sx?"rtl":"ltr"}),dn&&dn(Mx,Ax)},dx=Mx=>{Mx.key==="Tab"&&(Mx.preventDefault(),ar&&ar(Mx,"tabKeyDown"))};let mx=-1;reactExports.Children.map(u,(Mx,Ax)=>{reactExports.isValidElement(Mx)&&(Mx.props.disabled||(In==="selectedMenu"&&Mx.props.selected||mx===-1)&&(mx=Ax))});const vx={slots:ix,slotProps:{list:Ct,transition:Cn,paper:tn,...ax}},bx=useSlotProps({elementType:ix.root,externalSlotProps:ax.root,ownerState:ux,className:[cx.root,c]}),[xx,_x]=useSlot("paper",{className:cx.paper,elementType:MenuPaper,externalForwardedProps:vx,shouldForwardComponentProp:!0,ownerState:ux}),[Ex,Tx]=useSlot("list",{className:clsx(cx.list,Ct.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:vx,getSlotProps:Mx=>({...Mx,onKeyDown:Ax=>{dx(Ax),Mx.onKeyDown?.(Ax)}}),ownerState:ux}),Cx=typeof vx.slotProps.transition=="function"?vx.slotProps.transition(ux):vx.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:ar,anchorOrigin:{vertical:"bottom",horizontal:sx?"right":"left"},transformOrigin:sx?RTL_ORIGIN:LTR_ORIGIN,slots:{root:ix.root,paper:xx,backdrop:ix.backdrop,...ix.transition&&{transition:ix.transition}},slotProps:{root:bx,paper:_x,backdrop:typeof ax.backdrop=="function"?ax.backdrop(ux):ax.backdrop,transition:{...Cx,onEntering:(...Mx)=>{fx(...Mx),Cx?.onEntering?.(...Mx)}}},open:en,ref:a,transitionDuration:cn,ownerState:ux,...ox,classes:on,children:jsxRuntimeExports.jsx(Ex,{actions:gx,autoFocus:l&&(mx===-1||d),autoFocusItem:hx,variant:In,...Tx,children:u})})});function getNativeSelectUtilityClasses(t){return generateUtilityClass("MuiNativeSelect",t)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$m=t=>{const{classes:n,variant:a,disabled:s,multiple:l,open:u,error:c}=t,d={select:["select",a,s&&"disabled",l&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(a)}`,u&&"iconOpen",s&&"disabled"]};return composeClasses(d,getNativeSelectUtilityClasses,n)},StyledSelectSelect=styled("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:n})=>n.variant!=="filled"&&n.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.select,n[a.variant],a.error&&n.error,{[`&.${nativeSelectClasses.multiple}`]:n.multiple}]}})({}),StyledSelectIcon=styled("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:n})=>n.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(n,a){const{className:s,disabled:l,error:u,IconComponent:c,inputRef:d,variant:Ct="standard",...ar}=n,en={...n,disabled:l,variant:Ct,error:u},tn=useUtilityClasses$m(en);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:en,className:clsx(tn.select,s),disabled:l,ref:d||a,...ar}),n.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:c,ownerState:en,className:tn.icon})]})});function getSelectUtilityClasses(t){return generateUtilityClass("MuiSelect",t)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`&.${selectClasses.select}`]:n.select},{[`&.${selectClasses.select}`]:n[a.variant]},{[`&.${selectClasses.error}`]:n.error},{[`&.${selectClasses.multiple}`]:n.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:t=>slotShouldForwardProp(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}function isEmpty(t){return t==null||typeof t=="string"&&!t.trim()}const useUtilityClasses$l=t=>{const{classes:n,variant:a,disabled:s,multiple:l,open:u,error:c}=t,d={select:["select",a,s&&"disabled",l&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(a)}`,u&&"iconOpen",s&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(d,getSelectUtilityClasses,n)},SelectInput=reactExports.forwardRef(function(n,a){const{"aria-describedby":s,"aria-label":l,autoFocus:u,autoWidth:c,children:d,className:Ct,defaultOpen:ar,defaultValue:en,disabled:tn,displayEmpty:on,error:cn=!1,IconComponent:dn,inputRef:Cn,labelId:In,MenuProps:ix={},multiple:ax,name:ox,onBlur:sx,onChange:ux,onClose:cx,onFocus:hx,onOpen:gx,open:fx,readOnly:dx,renderValue:mx,required:vx,SelectDisplayProps:bx={},tabIndex:xx,type:_x,value:Ex,variant:Tx="standard",...Cx}=n,[Mx,Ax]=useControlled({controlled:Ex,default:en,name:"Select"}),[Nx,Ux]=useControlled({controlled:fx,default:ar,name:"Select"}),Rx=reactExports.useRef(null),Ox=reactExports.useRef(null),[Px,$x]=reactExports.useState(null),{current:Lx}=reactExports.useRef(fx!=null),[zx,qx]=reactExports.useState(),jx=useForkRef(a,Cn),Hx=reactExports.useCallback(xE=>{Ox.current=xE,xE&&$x(xE)},[]),Vx=Px?.parentNode;reactExports.useImperativeHandle(jx,()=>({focus:()=>{Ox.current.focus()},node:Rx.current,value:Mx}),[Mx]),reactExports.useEffect(()=>{ar&&Nx&&Px&&!Lx&&(qx(c?null:Vx.clientWidth),Ox.current.focus())},[Px,c]),reactExports.useEffect(()=>{u&&Ox.current.focus()},[u]),reactExports.useEffect(()=>{if(!In)return;const xE=ownerDocument(Ox.current).getElementById(In);if(xE){const OE=()=>{getSelection().isCollapsed&&Ox.current.focus()};return xE.addEventListener("click",OE),()=>{xE.removeEventListener("click",OE)}}},[In]);const nE=(xE,OE)=>{xE?gx&&gx(OE):cx&&cx(OE),Lx||(qx(c?null:Vx.clientWidth),Ux(xE))},Wx=xE=>{xE.button===0&&(xE.preventDefault(),Ox.current.focus(),nE(!0,xE))},tE=xE=>{nE(!1,xE)},lE=reactExports.Children.toArray(d),iE=xE=>{const OE=lE.find(PE=>PE.props.value===xE.target.value);OE!==void 0&&(Ax(OE.props.value),ux&&ux(xE,OE))},Xx=xE=>OE=>{let PE;if(OE.currentTarget.hasAttribute("tabindex")){if(ax){PE=Array.isArray(Mx)?Mx.slice():[];const sE=Mx.indexOf(xE.props.value);sE===-1?PE.push(xE.props.value):PE.splice(sE,1)}else PE=xE.props.value;if(xE.props.onClick&&xE.props.onClick(OE),Mx!==PE&&(Ax(PE),ux)){const sE=OE.nativeEvent||OE,hE=new sE.constructor(sE.type,sE);Object.defineProperty(hE,"target",{writable:!0,value:{value:PE,name:ox}}),ux(hE,xE)}ax||nE(!1,OE)}},CE=xE=>{dx||[" ","ArrowUp","ArrowDown","Enter"].includes(xE.key)&&(xE.preventDefault(),nE(!0,xE))},RE=Px!==null&&Nx,SE=xE=>{!RE&&sx&&(Object.defineProperty(xE,"target",{writable:!0,value:{value:Mx,name:ox}}),sx(xE))};delete Cx["aria-invalid"];let EE,FE;const AE=[];let ZE=!1;(isFilled({value:Mx})||on)&&(mx?EE=mx(Mx):ZE=!0);const Dx=lE.map(xE=>{if(!reactExports.isValidElement(xE))return null;let OE;if(ax){if(!Array.isArray(Mx))throw new Error(formatMuiErrorMessage(2));OE=Mx.some(PE=>areEqualValues(PE,xE.props.value)),OE&&ZE&&AE.push(xE.props.children)}else OE=areEqualValues(Mx,xE.props.value),OE&&ZE&&(FE=xE.props.children);return reactExports.cloneElement(xE,{"aria-selected":OE?"true":"false",onClick:Xx(xE),onKeyUp:PE=>{PE.key===" "&&PE.preventDefault(),xE.props.onKeyUp&&xE.props.onKeyUp(PE)},role:"option",selected:OE,value:void 0,"data-value":xE.props.value})});ZE&&(ax?AE.length===0?EE=null:EE=AE.reduce((xE,OE,PE)=>(xE.push(OE),PE<AE.length-1&&xE.push(", "),xE),[]):EE=FE);let kx=zx;!c&&Lx&&Px&&(kx=Vx.clientWidth);let Yx;typeof xx<"u"?Yx=xx:Yx=tn?null:0;const Kx=bx.id||(ox?`mui-component-select-${ox}`:void 0),aE={...n,variant:Tx,value:Mx,open:RE,error:cn},eE=useUtilityClasses$l(aE),gE={...ix.PaperProps,...typeof ix.slotProps?.paper=="function"?ix.slotProps.paper(aE):ix.slotProps?.paper},dE={...ix.MenuListProps,...typeof ix.slotProps?.list=="function"?ix.slotProps.list(aE):ix.slotProps?.list},bE=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:Hx,tabIndex:Yx,role:"combobox","aria-controls":RE?bE:void 0,"aria-disabled":tn?"true":void 0,"aria-expanded":RE?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[In,Kx].filter(Boolean).join(" ")||void 0,"aria-describedby":s,"aria-required":vx?"true":void 0,"aria-invalid":cn?"true":void 0,onKeyDown:CE,onMouseDown:tn||dx?null:Wx,onBlur:SE,onFocus:hx,...bx,ownerState:aE,className:clsx(bx.className,eE.select,Ct),id:Kx,children:isEmpty(EE)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):EE}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":cn,value:Array.isArray(Mx)?Mx.join(","):Mx,name:ox,ref:Rx,"aria-hidden":!0,onChange:iE,tabIndex:-1,disabled:tn,className:eE.nativeInput,autoFocus:u,required:vx,...Cx,ownerState:aE}),jsxRuntimeExports.jsx(SelectIcon,{as:dn,className:eE.icon,ownerState:aE}),jsxRuntimeExports.jsx(Menu,{id:`menu-${ox||""}`,anchorEl:Vx,open:RE,onClose:tE,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...ix,slotProps:{...ix.slotProps,list:{"aria-labelledby":In,role:"listbox","aria-multiselectable":ax?"true":void 0,disableListWrap:!0,id:bE,...dE},paper:{...gE,style:{minWidth:kx,...gE!=null?gE.style:null}}},children:Dx})]})}),ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"})),useUtilityClasses$k=t=>{const{classes:n}=t,s=composeClasses({root:["root"]},getSelectUtilityClasses,n);return{...n,...s}},styledRootConfig={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>rootShouldForwardProp(t)&&t!=="variant"},StyledInput=styled(Input,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiSelect",props:n}),{autoWidth:l=!1,children:u,classes:c={},className:d,defaultOpen:Ct=!1,displayEmpty:ar=!1,IconComponent:en=ArrowDropDownIcon,id:tn,input:on,inputProps:cn,label:dn,labelId:Cn,MenuProps:In,multiple:ix=!1,native:ax=!1,onClose:ox,onOpen:sx,open:ux,renderValue:cx,SelectDisplayProps:hx,variant:gx="outlined",...fx}=s,dx=ax?NativeSelectInput:SelectInput,mx=useFormControl(),vx=formControlState({props:s,muiFormControl:mx,states:["variant","error"]}),bx=vx.variant||gx,xx={...s,variant:bx,classes:c},_x=useUtilityClasses$k(xx),{root:Ex,...Tx}=_x,Cx=on||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:xx}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:dn,ownerState:xx}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:xx})}[bx],Mx=useForkRef(a,getReactElementRef(Cx));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(Cx,{inputComponent:dx,inputProps:{children:u,error:vx.error,IconComponent:en,variant:bx,type:void 0,multiple:ix,...ax?{id:tn}:{autoWidth:l,defaultOpen:Ct,displayEmpty:ar,labelId:Cn,MenuProps:In,onClose:ox,onOpen:sx,open:ux,renderValue:cx,SelectDisplayProps:{id:tn,...hx}},...cn,classes:cn?deepmerge(Tx,cn.classes):Tx,...on?on.props.inputProps:{}},...(ix&&ax||ar)&&bx==="outlined"?{notched:!0}:{},ref:Mx,className:clsx(Cx.props.className,d,_x.root),...!on&&{variant:bx},...fx})})});Select.muiName="Select";function getTextFieldUtilityClass(t){return generateUtilityClass("MuiTextField",t)}generateUtilityClasses("MuiTextField",["root"]);const variantComponent={standard:Input,filled:FilledInput,outlined:OutlinedInput},useUtilityClasses$j=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTextFieldUtilityClass,n)},TextFieldRoot=styled(FormControl,{name:"MuiTextField",slot:"Root"})({}),TextField=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTextField"}),{autoComplete:l,autoFocus:u=!1,children:c,className:d,color:Ct="primary",defaultValue:ar,disabled:en=!1,error:tn=!1,FormHelperTextProps:on,fullWidth:cn=!1,helperText:dn,id:Cn,InputLabelProps:In,inputProps:ix,InputProps:ax,inputRef:ox,label:sx,maxRows:ux,minRows:cx,multiline:hx=!1,name:gx,onBlur:fx,onChange:dx,onFocus:mx,placeholder:vx,required:bx=!1,rows:xx,select:_x=!1,SelectProps:Ex,slots:Tx={},slotProps:Cx={},type:Mx,value:Ax,variant:Nx="outlined",...Ux}=s,Rx={...s,autoFocus:u,color:Ct,disabled:en,error:tn,fullWidth:cn,multiline:hx,required:bx,select:_x,variant:Nx},Ox=useUtilityClasses$j(Rx),Px=useId(Cn),$x=dn&&Px?`${Px}-helper-text`:void 0,Lx=sx&&Px?`${Px}-label`:void 0,zx=variantComponent[Nx],qx={slots:Tx,slotProps:{input:ax,inputLabel:In,htmlInput:ix,formHelperText:on,select:Ex,...Cx}},jx={},Hx=qx.slotProps.inputLabel;Nx==="outlined"&&(Hx&&typeof Hx.shrink<"u"&&(jx.notched=Hx.shrink),jx.label=sx),_x&&((!Ex||!Ex.native)&&(jx.id=void 0),jx["aria-describedby"]=void 0);const[Vx,nE]=useSlot("root",{elementType:TextFieldRoot,shouldForwardComponentProp:!0,externalForwardedProps:{...qx,...Ux},ownerState:Rx,className:clsx(Ox.root,d),ref:a,additionalProps:{disabled:en,error:tn,fullWidth:cn,required:bx,color:Ct,variant:Nx}}),[Wx,tE]=useSlot("input",{elementType:zx,externalForwardedProps:qx,additionalProps:jx,ownerState:Rx}),[lE,iE]=useSlot("inputLabel",{elementType:InputLabel,externalForwardedProps:qx,ownerState:Rx}),[Xx,CE]=useSlot("htmlInput",{elementType:"input",externalForwardedProps:qx,ownerState:Rx}),[RE,SE]=useSlot("formHelperText",{elementType:FormHelperText,externalForwardedProps:qx,ownerState:Rx}),[EE,FE]=useSlot("select",{elementType:Select,externalForwardedProps:qx,ownerState:Rx}),AE=jsxRuntimeExports.jsx(Wx,{"aria-describedby":$x,autoComplete:l,autoFocus:u,defaultValue:ar,fullWidth:cn,multiline:hx,name:gx,rows:xx,maxRows:ux,minRows:cx,type:Mx,value:Ax,id:Px,inputRef:ox,onBlur:fx,onChange:dx,onFocus:mx,placeholder:vx,inputProps:CE,slots:{input:Tx.htmlInput?Xx:void 0},...tE});return jsxRuntimeExports.jsxs(Vx,{...nE,children:[sx!=null&&sx!==""&&jsxRuntimeExports.jsx(lE,{htmlFor:Px,id:Lx,...iE,children:sx}),_x?jsxRuntimeExports.jsx(EE,{"aria-describedby":$x,id:Px,labelId:Lx,value:Ax,input:AE,...FE,children:c}):AE,dn&&jsxRuntimeExports.jsx(RE,{id:$x,...SE,children:dn})]})});function getTypographyUtilityClass(t){return generateUtilityClass("MuiTypography",t)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const v6Colors$1={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$i=t=>{const{align:n,gutterBottom:a,noWrap:s,paragraph:l,variant:u,classes:c}=t,d={root:["root",u,t.align!=="inherit"&&`align${capitalize(n)}`,a&&"gutterBottom",s&&"noWrap",l&&"paragraph"]};return composeClasses(d,getTypographyUtilityClass,c)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.variant&&n[a.variant],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.noWrap&&n.noWrap,a.gutterBottom&&n.gutterBottom,a.paragraph&&n.paragraph]}})(memoTheme(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,a])=>n!=="inherit"&&a&&typeof a=="object").map(([n,a])=>({props:{variant:n},style:a})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette?.text||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${capitalize(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}))),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(n,a){const{color:s,...l}=useDefaultProps({props:n,name:"MuiTypography"}),u=!v6Colors$1[s],c=extendSxProp({...l,...u&&{color:s}}),{align:d="inherit",className:Ct,component:ar,gutterBottom:en=!1,noWrap:tn=!1,paragraph:on=!1,variant:cn="body1",variantMapping:dn=defaultVariantMapping,...Cn}=c,In={...c,align:d,color:s,className:Ct,component:ar,gutterBottom:en,noWrap:tn,paragraph:on,variant:cn,variantMapping:dn},ix=ar||(on?"p":dn[cn]||defaultVariantMapping[cn])||"span",ax=useUtilityClasses$i(In);return jsxRuntimeExports.jsx(TypographyRoot,{as:ix,ref:a,className:clsx(ax.root,Ct),...Cn,ownerState:In,style:{...d!=="inherit"&&{"--Typography-textAlign":d},...Cn.style}})}),Stack=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiStack"})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function getMenuItemUtilityClass(t){return generateUtilityClass("MuiMenuItem",t)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.dense&&n.dense,a.divider&&n.divider,!a.disableGutters&&n.gutters]},useUtilityClasses$h=t=>{const{disabled:n,dense:a,divider:s,disableGutters:l,selected:u,classes:c}=t,Ct=composeClasses({root:["root",a&&"dense",n&&"disabled",!l&&"gutters",s&&"divider",u&&"selected"]},getMenuItemUtilityClass,c);return{...c,...Ct}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:n})=>n.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:n})=>!n.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:n})=>n.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiMenuItem"}),{autoFocus:l=!1,component:u="li",dense:c=!1,divider:d=!1,disableGutters:Ct=!1,focusVisibleClassName:ar,role:en="menuitem",tabIndex:tn,className:on,...cn}=s,dn=reactExports.useContext(ListContext),Cn=reactExports.useMemo(()=>({dense:c||dn.dense||!1,disableGutters:Ct}),[dn.dense,c,Ct]),In=reactExports.useRef(null);useEnhancedEffect(()=>{l&&In.current&&In.current.focus()},[l]);const ix={...s,dense:Cn.dense,divider:d,disableGutters:Ct},ax=useUtilityClasses$h(s),ox=useForkRef(In,a);let sx;return s.disabled||(sx=tn!==void 0?tn:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:Cn,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:ox,role:en,tabIndex:sx,component:u,focusVisibleClassName:clsx(ax.focusVisible,ar),className:clsx(ax.root,on),...cn,ownerState:ix,classes:ax})})});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const useUtilityClasses$g=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getCardUtilityClass,n)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Card=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiCard"}),{className:l,raised:u=!1,...c}=s,d={...s,raised:u},Ct=useUtilityClasses$g(d);return jsxRuntimeExports.jsx(CardRoot,{className:clsx(Ct.root,l),elevation:u?8:void 0,ref:a,ownerState:d,...c})});function ComponentAdjuster({componentValues:t,setComponentValues:n}){function a(l,u){n(c=>({...c,[l]:{...c[l],value:u}}))}function s(l,u){n(c=>({...c,[l]:{...c[l],unit:u}}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:Object.keys(t).map(l=>jsxRuntimeExports.jsx(Grid$1,{size:{md:3},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1,width:"100%"},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:l}),jsxRuntimeExports.jsx(TextField,{name:l,value:t[l].value,sx:{width:"8ch"},size:"small",onChange:u=>a(l,u.target.value)}),jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[l].unit,onChange:u=>s(l,u.target.value),children:Object.keys(units[t[l].type]).map(u=>jsxRuntimeExports.jsx(MenuItem,{value:u,size:"small",children:u},u))})})]})})},l))})}function FreqAdjusters({settings:t,setSettings:n}){function a(s,l){n(u=>({...u,[s]:l}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:[["fmin","fminUnit"],["fmax","fmaxUnit"],["resolution",null]].map(s=>jsxRuntimeExports.jsx(Grid$1,{size:{xs:12,sm:6,md:4},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:s[0]}),jsxRuntimeExports.jsx(TextField,{name:s[0],value:t[s[0]],sx:{width:"8ch"},size:"small",onChange:l=>a(s[0],l.target.value)}),s[1]!==null&&jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[s[1]],onChange:l=>a(s[1],l.target.value),children:Object.keys(units.frequency).map(l=>jsxRuntimeExports.jsx(MenuItem,{value:l,size:"small",children:l},l))})})]})})},s[0]))})}var algebrite={},BigInteger={exports:{}},hasRequiredBigInteger;function requireBigInteger(){return hasRequiredBigInteger||(hasRequiredBigInteger=1,(function(t){var n=(function(a){var s=1e7,l=7,u=9007199254740992,c=dn(u),d="0123456789abcdefghijklmnopqrstuvwxyz",Ct=typeof BigInt=="function";function ar(Dx,kx,Yx,Kx){return typeof Dx>"u"?ar[0]:typeof kx<"u"?+kx==10&&!Yx?AE(Dx):iE(Dx,kx,Yx,Kx):AE(Dx)}function en(Dx,kx){this.value=Dx,this.sign=kx,this.isSmall=!1}en.prototype=Object.create(ar.prototype);function tn(Dx){this.value=Dx,this.sign=Dx<0,this.isSmall=!0}tn.prototype=Object.create(ar.prototype);function on(Dx){this.value=Dx}on.prototype=Object.create(ar.prototype);function cn(Dx){return-u<Dx&&Dx<u}function dn(Dx){return Dx<1e7?[Dx]:Dx<1e14?[Dx%1e7,Math.floor(Dx/1e7)]:[Dx%1e7,Math.floor(Dx/1e7)%1e7,Math.floor(Dx/1e14)]}function Cn(Dx){In(Dx);var kx=Dx.length;if(kx<4&&Ax(Dx,c)<0)switch(kx){case 0:return 0;case 1:return Dx[0];case 2:return Dx[0]+Dx[1]*s;default:return Dx[0]+(Dx[1]+Dx[2]*s)*s}return Dx}function In(Dx){for(var kx=Dx.length;Dx[--kx]===0;);Dx.length=kx+1}function ix(Dx){for(var kx=new Array(Dx),Yx=-1;++Yx<Dx;)kx[Yx]=0;return kx}function ax(Dx){return Dx>0?Math.floor(Dx):Math.ceil(Dx)}function ox(Dx,kx){var Yx=Dx.length,Kx=kx.length,aE=new Array(Yx),eE=0,gE=s,dE,bE;for(bE=0;bE<Kx;bE++)dE=Dx[bE]+kx[bE]+eE,eE=dE>=gE?1:0,aE[bE]=dE-eE*gE;for(;bE<Yx;)dE=Dx[bE]+eE,eE=dE===gE?1:0,aE[bE++]=dE-eE*gE;return eE>0&&aE.push(eE),aE}function sx(Dx,kx){return Dx.length>=kx.length?ox(Dx,kx):ox(kx,Dx)}function ux(Dx,kx){var Yx=Dx.length,Kx=new Array(Yx),aE=s,eE,gE;for(gE=0;gE<Yx;gE++)eE=Dx[gE]-aE+kx,kx=Math.floor(eE/aE),Kx[gE]=eE-kx*aE,kx+=1;for(;kx>0;)Kx[gE++]=kx%aE,kx=Math.floor(kx/aE);return Kx}en.prototype.add=function(Dx){var kx=AE(Dx);if(this.sign!==kx.sign)return this.subtract(kx.negate());var Yx=this.value,Kx=kx.value;return kx.isSmall?new en(ux(Yx,Math.abs(Kx)),this.sign):new en(sx(Yx,Kx),this.sign)},en.prototype.plus=en.prototype.add,tn.prototype.add=function(Dx){var kx=AE(Dx),Yx=this.value;if(Yx<0!==kx.sign)return this.subtract(kx.negate());var Kx=kx.value;if(kx.isSmall){if(cn(Yx+Kx))return new tn(Yx+Kx);Kx=dn(Math.abs(Kx))}return new en(ux(Kx,Math.abs(Yx)),Yx<0)},tn.prototype.plus=tn.prototype.add,on.prototype.add=function(Dx){return new on(this.value+AE(Dx).value)},on.prototype.plus=on.prototype.add;function cx(Dx,kx){var Yx=Dx.length,Kx=kx.length,aE=new Array(Yx),eE=0,gE=s,dE,bE;for(dE=0;dE<Kx;dE++)bE=Dx[dE]-eE-kx[dE],bE<0?(bE+=gE,eE=1):eE=0,aE[dE]=bE;for(dE=Kx;dE<Yx;dE++){if(bE=Dx[dE]-eE,bE<0)bE+=gE;else{aE[dE++]=bE;break}aE[dE]=bE}for(;dE<Yx;dE++)aE[dE]=Dx[dE];return In(aE),aE}function hx(Dx,kx,Yx){var Kx;return Ax(Dx,kx)>=0?Kx=cx(Dx,kx):(Kx=cx(kx,Dx),Yx=!Yx),Kx=Cn(Kx),typeof Kx=="number"?(Yx&&(Kx=-Kx),new tn(Kx)):new en(Kx,Yx)}function gx(Dx,kx,Yx){var Kx=Dx.length,aE=new Array(Kx),eE=-kx,gE=s,dE,bE;for(dE=0;dE<Kx;dE++)bE=Dx[dE]+eE,eE=Math.floor(bE/gE),bE%=gE,aE[dE]=bE<0?bE+gE:bE;return aE=Cn(aE),typeof aE=="number"?(Yx&&(aE=-aE),new tn(aE)):new en(aE,Yx)}en.prototype.subtract=function(Dx){var kx=AE(Dx);if(this.sign!==kx.sign)return this.add(kx.negate());var Yx=this.value,Kx=kx.value;return kx.isSmall?gx(Yx,Math.abs(Kx),this.sign):hx(Yx,Kx,this.sign)},en.prototype.minus=en.prototype.subtract,tn.prototype.subtract=function(Dx){var kx=AE(Dx),Yx=this.value;if(Yx<0!==kx.sign)return this.add(kx.negate());var Kx=kx.value;return kx.isSmall?new tn(Yx-Kx):gx(Kx,Math.abs(Yx),Yx>=0)},tn.prototype.minus=tn.prototype.subtract,on.prototype.subtract=function(Dx){return new on(this.value-AE(Dx).value)},on.prototype.minus=on.prototype.subtract,en.prototype.negate=function(){return new en(this.value,!this.sign)},tn.prototype.negate=function(){var Dx=this.sign,kx=new tn(-this.value);return kx.sign=!Dx,kx},on.prototype.negate=function(){return new on(-this.value)},en.prototype.abs=function(){return new en(this.value,!1)},tn.prototype.abs=function(){return new tn(Math.abs(this.value))},on.prototype.abs=function(){return new on(this.value>=0?this.value:-this.value)};function fx(Dx,kx){var Yx=Dx.length,Kx=kx.length,aE=Yx+Kx,eE=ix(aE),gE=s,dE,bE,xE,OE,PE;for(xE=0;xE<Yx;++xE){OE=Dx[xE];for(var sE=0;sE<Kx;++sE)PE=kx[sE],dE=OE*PE+eE[xE+sE],bE=Math.floor(dE/gE),eE[xE+sE]=dE-bE*gE,eE[xE+sE+1]+=bE}return In(eE),eE}function dx(Dx,kx){var Yx=Dx.length,Kx=new Array(Yx),aE=s,eE=0,gE,dE;for(dE=0;dE<Yx;dE++)gE=Dx[dE]*kx+eE,eE=Math.floor(gE/aE),Kx[dE]=gE-eE*aE;for(;eE>0;)Kx[dE++]=eE%aE,eE=Math.floor(eE/aE);return Kx}function mx(Dx,kx){for(var Yx=[];kx-- >0;)Yx.push(0);return Yx.concat(Dx)}function vx(Dx,kx){var Yx=Math.max(Dx.length,kx.length);if(Yx<=30)return fx(Dx,kx);Yx=Math.ceil(Yx/2);var Kx=Dx.slice(Yx),aE=Dx.slice(0,Yx),eE=kx.slice(Yx),gE=kx.slice(0,Yx),dE=vx(aE,gE),bE=vx(Kx,eE),xE=vx(sx(aE,Kx),sx(gE,eE)),OE=sx(sx(dE,mx(cx(cx(xE,dE),bE),Yx)),mx(bE,2*Yx));return In(OE),OE}function bx(Dx,kx){return-.012*Dx-.012*kx+15e-6*Dx*kx>0}en.prototype.multiply=function(Dx){var kx=AE(Dx),Yx=this.value,Kx=kx.value,aE=this.sign!==kx.sign,eE;if(kx.isSmall){if(Kx===0)return ar[0];if(Kx===1)return this;if(Kx===-1)return this.negate();if(eE=Math.abs(Kx),eE<s)return new en(dx(Yx,eE),aE);Kx=dn(eE)}return bx(Yx.length,Kx.length)?new en(vx(Yx,Kx),aE):new en(fx(Yx,Kx),aE)},en.prototype.times=en.prototype.multiply;function xx(Dx,kx,Yx){return Dx<s?new en(dx(kx,Dx),Yx):new en(fx(kx,dn(Dx)),Yx)}tn.prototype._multiplyBySmall=function(Dx){return cn(Dx.value*this.value)?new tn(Dx.value*this.value):xx(Math.abs(Dx.value),dn(Math.abs(this.value)),this.sign!==Dx.sign)},en.prototype._multiplyBySmall=function(Dx){return Dx.value===0?ar[0]:Dx.value===1?this:Dx.value===-1?this.negate():xx(Math.abs(Dx.value),this.value,this.sign!==Dx.sign)},tn.prototype.multiply=function(Dx){return AE(Dx)._multiplyBySmall(this)},tn.prototype.times=tn.prototype.multiply,on.prototype.multiply=function(Dx){return new on(this.value*AE(Dx).value)},on.prototype.times=on.prototype.multiply;function _x(Dx){var kx=Dx.length,Yx=ix(kx+kx),Kx=s,aE,eE,gE,dE,bE;for(gE=0;gE<kx;gE++){dE=Dx[gE],eE=0-dE*dE;for(var xE=gE;xE<kx;xE++)bE=Dx[xE],aE=2*(dE*bE)+Yx[gE+xE]+eE,eE=Math.floor(aE/Kx),Yx[gE+xE]=aE-eE*Kx;Yx[gE+kx]=eE}return In(Yx),Yx}en.prototype.square=function(){return new en(_x(this.value),!1)},tn.prototype.square=function(){var Dx=this.value*this.value;return cn(Dx)?new tn(Dx):new en(_x(dn(Math.abs(this.value))),!1)},on.prototype.square=function(Dx){return new on(this.value*this.value)};function Ex(Dx,kx){var Yx=Dx.length,Kx=kx.length,aE=s,eE=ix(kx.length),gE=kx[Kx-1],dE=Math.ceil(aE/(2*gE)),bE=dx(Dx,dE),xE=dx(kx,dE),OE,PE,sE,hE,TE,vE,IE;for(bE.length<=Yx&&bE.push(0),xE.push(0),gE=xE[Kx-1],PE=Yx-Kx;PE>=0;PE--){for(OE=aE-1,bE[PE+Kx]!==gE&&(OE=Math.floor((bE[PE+Kx]*aE+bE[PE+Kx-1])/gE)),sE=0,hE=0,vE=xE.length,TE=0;TE<vE;TE++)sE+=OE*xE[TE],IE=Math.floor(sE/aE),hE+=bE[PE+TE]-(sE-IE*aE),sE=IE,hE<0?(bE[PE+TE]=hE+aE,hE=-1):(bE[PE+TE]=hE,hE=0);for(;hE!==0;){for(OE-=1,sE=0,TE=0;TE<vE;TE++)sE+=bE[PE+TE]-aE+xE[TE],sE<0?(bE[PE+TE]=sE+aE,sE=0):(bE[PE+TE]=sE,sE=1);hE+=sE}eE[PE]=OE}return bE=Cx(bE,dE)[0],[Cn(eE),Cn(bE)]}function Tx(Dx,kx){for(var Yx=Dx.length,Kx=kx.length,aE=[],eE=[],gE=s,dE,bE,xE,OE,PE;Yx;){if(eE.unshift(Dx[--Yx]),In(eE),Ax(eE,kx)<0){aE.push(0);continue}bE=eE.length,xE=eE[bE-1]*gE+eE[bE-2],OE=kx[Kx-1]*gE+kx[Kx-2],bE>Kx&&(xE=(xE+1)*gE),dE=Math.ceil(xE/OE);do{if(PE=dx(kx,dE),Ax(PE,eE)<=0)break;dE--}while(dE);aE.push(dE),eE=cx(eE,PE)}return aE.reverse(),[Cn(aE),Cn(eE)]}function Cx(Dx,kx){var Yx=Dx.length,Kx=ix(Yx),aE=s,eE,gE,dE,bE;for(dE=0,eE=Yx-1;eE>=0;--eE)bE=dE*aE+Dx[eE],gE=ax(bE/kx),dE=bE-gE*kx,Kx[eE]=gE|0;return[Kx,dE|0]}function Mx(Dx,kx){var Yx,Kx=AE(kx);if(Ct)return[new on(Dx.value/Kx.value),new on(Dx.value%Kx.value)];var aE=Dx.value,eE=Kx.value,gE;if(eE===0)throw new Error("Cannot divide by zero");if(Dx.isSmall)return Kx.isSmall?[new tn(ax(aE/eE)),new tn(aE%eE)]:[ar[0],Dx];if(Kx.isSmall){if(eE===1)return[Dx,ar[0]];if(eE==-1)return[Dx.negate(),ar[0]];var dE=Math.abs(eE);if(dE<s){Yx=Cx(aE,dE),gE=Cn(Yx[0]);var bE=Yx[1];return Dx.sign&&(bE=-bE),typeof gE=="number"?(Dx.sign!==Kx.sign&&(gE=-gE),[new tn(gE),new tn(bE)]):[new en(gE,Dx.sign!==Kx.sign),new tn(bE)]}eE=dn(dE)}var xE=Ax(aE,eE);if(xE===-1)return[ar[0],Dx];if(xE===0)return[ar[Dx.sign===Kx.sign?1:-1],ar[0]];aE.length+eE.length<=200?Yx=Ex(aE,eE):Yx=Tx(aE,eE),gE=Yx[0];var OE=Dx.sign!==Kx.sign,PE=Yx[1],sE=Dx.sign;return typeof gE=="number"?(OE&&(gE=-gE),gE=new tn(gE)):gE=new en(gE,OE),typeof PE=="number"?(sE&&(PE=-PE),PE=new tn(PE)):PE=new en(PE,sE),[gE,PE]}en.prototype.divmod=function(Dx){var kx=Mx(this,Dx);return{quotient:kx[0],remainder:kx[1]}},on.prototype.divmod=tn.prototype.divmod=en.prototype.divmod,en.prototype.divide=function(Dx){return Mx(this,Dx)[0]},on.prototype.over=on.prototype.divide=function(Dx){return new on(this.value/AE(Dx).value)},tn.prototype.over=tn.prototype.divide=en.prototype.over=en.prototype.divide,en.prototype.mod=function(Dx){return Mx(this,Dx)[1]},on.prototype.mod=on.prototype.remainder=function(Dx){return new on(this.value%AE(Dx).value)},tn.prototype.remainder=tn.prototype.mod=en.prototype.remainder=en.prototype.mod,en.prototype.pow=function(Dx){var kx=AE(Dx),Yx=this.value,Kx=kx.value,aE,eE,gE;if(Kx===0)return ar[1];if(Yx===0)return ar[0];if(Yx===1)return ar[1];if(Yx===-1)return kx.isEven()?ar[1]:ar[-1];if(kx.sign)return ar[0];if(!kx.isSmall)throw new Error("The exponent "+kx.toString()+" is too large.");if(this.isSmall&&cn(aE=Math.pow(Yx,Kx)))return new tn(ax(aE));for(eE=this,gE=ar[1];Kx&!0&&(gE=gE.times(eE),--Kx),Kx!==0;)Kx/=2,eE=eE.square();return gE},tn.prototype.pow=en.prototype.pow,on.prototype.pow=function(Dx){var kx=AE(Dx),Yx=this.value,Kx=kx.value,aE=BigInt(0),eE=BigInt(1),gE=BigInt(2);if(Kx===aE)return ar[1];if(Yx===aE)return ar[0];if(Yx===eE)return ar[1];if(Yx===BigInt(-1))return kx.isEven()?ar[1]:ar[-1];if(kx.isNegative())return new on(aE);for(var dE=this,bE=ar[1];(Kx&eE)===eE&&(bE=bE.times(dE),--Kx),Kx!==aE;)Kx/=gE,dE=dE.square();return bE},en.prototype.modPow=function(Dx,kx){if(Dx=AE(Dx),kx=AE(kx),kx.isZero())throw new Error("Cannot take modPow with modulus 0");var Yx=ar[1],Kx=this.mod(kx);for(Dx.isNegative()&&(Dx=Dx.multiply(ar[-1]),Kx=Kx.modInv(kx));Dx.isPositive();){if(Kx.isZero())return ar[0];Dx.isOdd()&&(Yx=Yx.multiply(Kx).mod(kx)),Dx=Dx.divide(2),Kx=Kx.square().mod(kx)}return Yx},on.prototype.modPow=tn.prototype.modPow=en.prototype.modPow;function Ax(Dx,kx){if(Dx.length!==kx.length)return Dx.length>kx.length?1:-1;for(var Yx=Dx.length-1;Yx>=0;Yx--)if(Dx[Yx]!==kx[Yx])return Dx[Yx]>kx[Yx]?1:-1;return 0}en.prototype.compareAbs=function(Dx){var kx=AE(Dx),Yx=this.value,Kx=kx.value;return kx.isSmall?1:Ax(Yx,Kx)},tn.prototype.compareAbs=function(Dx){var kx=AE(Dx),Yx=Math.abs(this.value),Kx=kx.value;return kx.isSmall?(Kx=Math.abs(Kx),Yx===Kx?0:Yx>Kx?1:-1):-1},on.prototype.compareAbs=function(Dx){var kx=this.value,Yx=AE(Dx).value;return kx=kx>=0?kx:-kx,Yx=Yx>=0?Yx:-Yx,kx===Yx?0:kx>Yx?1:-1},en.prototype.compare=function(Dx){if(Dx===1/0)return-1;if(Dx===-1/0)return 1;var kx=AE(Dx),Yx=this.value,Kx=kx.value;return this.sign!==kx.sign?kx.sign?1:-1:kx.isSmall?this.sign?-1:1:Ax(Yx,Kx)*(this.sign?-1:1)},en.prototype.compareTo=en.prototype.compare,tn.prototype.compare=function(Dx){if(Dx===1/0)return-1;if(Dx===-1/0)return 1;var kx=AE(Dx),Yx=this.value,Kx=kx.value;return kx.isSmall?Yx==Kx?0:Yx>Kx?1:-1:Yx<0!==kx.sign?Yx<0?-1:1:Yx<0?1:-1},tn.prototype.compareTo=tn.prototype.compare,on.prototype.compare=function(Dx){if(Dx===1/0)return-1;if(Dx===-1/0)return 1;var kx=this.value,Yx=AE(Dx).value;return kx===Yx?0:kx>Yx?1:-1},on.prototype.compareTo=on.prototype.compare,en.prototype.equals=function(Dx){return this.compare(Dx)===0},on.prototype.eq=on.prototype.equals=tn.prototype.eq=tn.prototype.equals=en.prototype.eq=en.prototype.equals,en.prototype.notEquals=function(Dx){return this.compare(Dx)!==0},on.prototype.neq=on.prototype.notEquals=tn.prototype.neq=tn.prototype.notEquals=en.prototype.neq=en.prototype.notEquals,en.prototype.greater=function(Dx){return this.compare(Dx)>0},on.prototype.gt=on.prototype.greater=tn.prototype.gt=tn.prototype.greater=en.prototype.gt=en.prototype.greater,en.prototype.lesser=function(Dx){return this.compare(Dx)<0},on.prototype.lt=on.prototype.lesser=tn.prototype.lt=tn.prototype.lesser=en.prototype.lt=en.prototype.lesser,en.prototype.greaterOrEquals=function(Dx){return this.compare(Dx)>=0},on.prototype.geq=on.prototype.greaterOrEquals=tn.prototype.geq=tn.prototype.greaterOrEquals=en.prototype.geq=en.prototype.greaterOrEquals,en.prototype.lesserOrEquals=function(Dx){return this.compare(Dx)<=0},on.prototype.leq=on.prototype.lesserOrEquals=tn.prototype.leq=tn.prototype.lesserOrEquals=en.prototype.leq=en.prototype.lesserOrEquals,en.prototype.isEven=function(){return(this.value[0]&1)===0},tn.prototype.isEven=function(){return(this.value&1)===0},on.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},en.prototype.isOdd=function(){return(this.value[0]&1)===1},tn.prototype.isOdd=function(){return(this.value&1)===1},on.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},en.prototype.isPositive=function(){return!this.sign},tn.prototype.isPositive=function(){return this.value>0},on.prototype.isPositive=tn.prototype.isPositive,en.prototype.isNegative=function(){return this.sign},tn.prototype.isNegative=function(){return this.value<0},on.prototype.isNegative=tn.prototype.isNegative,en.prototype.isUnit=function(){return!1},tn.prototype.isUnit=function(){return Math.abs(this.value)===1},on.prototype.isUnit=function(){return this.abs().value===BigInt(1)},en.prototype.isZero=function(){return!1},tn.prototype.isZero=function(){return this.value===0},on.prototype.isZero=function(){return this.value===BigInt(0)},en.prototype.isDivisibleBy=function(Dx){var kx=AE(Dx);return kx.isZero()?!1:kx.isUnit()?!0:kx.compareAbs(2)===0?this.isEven():this.mod(kx).isZero()},on.prototype.isDivisibleBy=tn.prototype.isDivisibleBy=en.prototype.isDivisibleBy;function Nx(Dx){var kx=Dx.abs();if(kx.isUnit())return!1;if(kx.equals(2)||kx.equals(3)||kx.equals(5))return!0;if(kx.isEven()||kx.isDivisibleBy(3)||kx.isDivisibleBy(5))return!1;if(kx.lesser(49))return!0}function Ux(Dx,kx){for(var Yx=Dx.prev(),Kx=Yx,aE=0,eE,gE,dE;Kx.isEven();)Kx=Kx.divide(2),aE++;e:for(gE=0;gE<kx.length;gE++)if(!Dx.lesser(kx[gE])&&(dE=n(kx[gE]).modPow(Kx,Dx),!(dE.isUnit()||dE.equals(Yx)))){for(eE=aE-1;eE!=0;eE--){if(dE=dE.square().mod(Dx),dE.isUnit())return!1;if(dE.equals(Yx))continue e}return!1}return!0}en.prototype.isPrime=function(Dx){var kx=Nx(this);if(kx!==a)return kx;var Yx=this.abs(),Kx=Yx.bitLength();if(Kx<=64)return Ux(Yx,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var aE=Math.log(2)*Kx.toJSNumber(),eE=Math.ceil(Dx===!0?2*Math.pow(aE,2):aE),gE=[],dE=0;dE<eE;dE++)gE.push(n(dE+2));return Ux(Yx,gE)},on.prototype.isPrime=tn.prototype.isPrime=en.prototype.isPrime,en.prototype.isProbablePrime=function(Dx,kx){var Yx=Nx(this);if(Yx!==a)return Yx;for(var Kx=this.abs(),aE=Dx===a?5:Dx,eE=[],gE=0;gE<aE;gE++)eE.push(n.randBetween(2,Kx.minus(2),kx));return Ux(Kx,eE)},on.prototype.isProbablePrime=tn.prototype.isProbablePrime=en.prototype.isProbablePrime,en.prototype.modInv=function(Dx){for(var kx=n.zero,Yx=n.one,Kx=AE(Dx),aE=this.abs(),eE,gE,dE;!aE.isZero();)eE=Kx.divide(aE),gE=kx,dE=Kx,kx=Yx,Kx=aE,Yx=gE.subtract(eE.multiply(Yx)),aE=dE.subtract(eE.multiply(aE));if(!Kx.isUnit())throw new Error(this.toString()+" and "+Dx.toString()+" are not co-prime");return kx.compare(0)===-1&&(kx=kx.add(Dx)),this.isNegative()?kx.negate():kx},on.prototype.modInv=tn.prototype.modInv=en.prototype.modInv,en.prototype.next=function(){var Dx=this.value;return this.sign?gx(Dx,1,this.sign):new en(ux(Dx,1),this.sign)},tn.prototype.next=function(){var Dx=this.value;return Dx+1<u?new tn(Dx+1):new en(c,!1)},on.prototype.next=function(){return new on(this.value+BigInt(1))},en.prototype.prev=function(){var Dx=this.value;return this.sign?new en(ux(Dx,1),!0):gx(Dx,1,this.sign)},tn.prototype.prev=function(){var Dx=this.value;return Dx-1>-u?new tn(Dx-1):new en(c,!0)},on.prototype.prev=function(){return new on(this.value-BigInt(1))};for(var Rx=[1];2*Rx[Rx.length-1]<=s;)Rx.push(2*Rx[Rx.length-1]);var Ox=Rx.length,Px=Rx[Ox-1];function $x(Dx){return Math.abs(Dx)<=s}en.prototype.shiftLeft=function(Dx){var kx=AE(Dx).toJSNumber();if(!$x(kx))throw new Error(String(kx)+" is too large for shifting.");if(kx<0)return this.shiftRight(-kx);var Yx=this;if(Yx.isZero())return Yx;for(;kx>=Ox;)Yx=Yx.multiply(Px),kx-=Ox-1;return Yx.multiply(Rx[kx])},on.prototype.shiftLeft=tn.prototype.shiftLeft=en.prototype.shiftLeft,en.prototype.shiftRight=function(Dx){var kx,Yx=AE(Dx).toJSNumber();if(!$x(Yx))throw new Error(String(Yx)+" is too large for shifting.");if(Yx<0)return this.shiftLeft(-Yx);for(var Kx=this;Yx>=Ox;){if(Kx.isZero()||Kx.isNegative()&&Kx.isUnit())return Kx;kx=Mx(Kx,Px),Kx=kx[1].isNegative()?kx[0].prev():kx[0],Yx-=Ox-1}return kx=Mx(Kx,Rx[Yx]),kx[1].isNegative()?kx[0].prev():kx[0]},on.prototype.shiftRight=tn.prototype.shiftRight=en.prototype.shiftRight;function Lx(Dx,kx,Yx){kx=AE(kx);for(var Kx=Dx.isNegative(),aE=kx.isNegative(),eE=Kx?Dx.not():Dx,gE=aE?kx.not():kx,dE=0,bE=0,xE=null,OE=null,PE=[];!eE.isZero()||!gE.isZero();)xE=Mx(eE,Px),dE=xE[1].toJSNumber(),Kx&&(dE=Px-1-dE),OE=Mx(gE,Px),bE=OE[1].toJSNumber(),aE&&(bE=Px-1-bE),eE=xE[0],gE=OE[0],PE.push(Yx(dE,bE));for(var sE=Yx(Kx?1:0,aE?1:0)!==0?n(-1):n(0),hE=PE.length-1;hE>=0;hE-=1)sE=sE.multiply(Px).add(n(PE[hE]));return sE}en.prototype.not=function(){return this.negate().prev()},on.prototype.not=tn.prototype.not=en.prototype.not,en.prototype.and=function(Dx){return Lx(this,Dx,function(kx,Yx){return kx&Yx})},on.prototype.and=tn.prototype.and=en.prototype.and,en.prototype.or=function(Dx){return Lx(this,Dx,function(kx,Yx){return kx|Yx})},on.prototype.or=tn.prototype.or=en.prototype.or,en.prototype.xor=function(Dx){return Lx(this,Dx,function(kx,Yx){return kx^Yx})},on.prototype.xor=tn.prototype.xor=en.prototype.xor;var zx=1<<30,qx=(s&-s)*(s&-s)|zx;function jx(Dx){var kx=Dx.value,Yx=typeof kx=="number"?kx|zx:typeof kx=="bigint"?kx|BigInt(zx):kx[0]+kx[1]*s|qx;return Yx&-Yx}function Hx(Dx,kx){if(kx.compareTo(Dx)<=0){var Yx=Hx(Dx,kx.square(kx)),Kx=Yx.p,aE=Yx.e,eE=Kx.multiply(kx);return eE.compareTo(Dx)<=0?{p:eE,e:aE*2+1}:{p:Kx,e:aE*2}}return{p:n(1),e:0}}en.prototype.bitLength=function(){var Dx=this;return Dx.compareTo(n(0))<0&&(Dx=Dx.negate().subtract(n(1))),Dx.compareTo(n(0))===0?n(0):n(Hx(Dx,n(2)).e).add(n(1))},on.prototype.bitLength=tn.prototype.bitLength=en.prototype.bitLength;function Vx(Dx,kx){return Dx=AE(Dx),kx=AE(kx),Dx.greater(kx)?Dx:kx}function nE(Dx,kx){return Dx=AE(Dx),kx=AE(kx),Dx.lesser(kx)?Dx:kx}function Wx(Dx,kx){if(Dx=AE(Dx).abs(),kx=AE(kx).abs(),Dx.equals(kx))return Dx;if(Dx.isZero())return kx;if(kx.isZero())return Dx;for(var Yx=ar[1],Kx,aE;Dx.isEven()&&kx.isEven();)Kx=nE(jx(Dx),jx(kx)),Dx=Dx.divide(Kx),kx=kx.divide(Kx),Yx=Yx.multiply(Kx);for(;Dx.isEven();)Dx=Dx.divide(jx(Dx));do{for(;kx.isEven();)kx=kx.divide(jx(kx));Dx.greater(kx)&&(aE=kx,kx=Dx,Dx=aE),kx=kx.subtract(Dx)}while(!kx.isZero());return Yx.isUnit()?Dx:Dx.multiply(Yx)}function tE(Dx,kx){return Dx=AE(Dx).abs(),kx=AE(kx).abs(),Dx.divide(Wx(Dx,kx)).multiply(kx)}function lE(Dx,kx,Yx){Dx=AE(Dx),kx=AE(kx);var Kx=Yx||Math.random,aE=nE(Dx,kx),eE=Vx(Dx,kx),gE=eE.subtract(aE).add(1);if(gE.isSmall)return aE.add(Math.floor(Kx()*gE));for(var dE=RE(gE,s).value,bE=[],xE=!0,OE=0;OE<dE.length;OE++){var PE=xE?dE[OE]+(OE+1<dE.length?dE[OE+1]/s:0):s,sE=ax(Kx()*PE);bE.push(sE),sE<dE[OE]&&(xE=!1)}return aE.add(ar.fromArray(bE,s,!1))}var iE=function(Dx,kx,Yx,Kx){Yx=Yx||d,Dx=String(Dx),Kx||(Dx=Dx.toLowerCase(),Yx=Yx.toLowerCase());var aE=Dx.length,eE,gE=Math.abs(kx),dE={};for(eE=0;eE<Yx.length;eE++)dE[Yx[eE]]=eE;for(eE=0;eE<aE;eE++){var bE=Dx[eE];if(bE!=="-"&&bE in dE&&dE[bE]>=gE){if(bE==="1"&&gE===1)continue;throw new Error(bE+" is not a valid digit in base "+kx+".")}}kx=AE(kx);var xE=[],OE=Dx[0]==="-";for(eE=OE?1:0;eE<Dx.length;eE++){var bE=Dx[eE];if(bE in dE)xE.push(AE(dE[bE]));else if(bE==="<"){var PE=eE;do eE++;while(Dx[eE]!==">"&&eE<Dx.length);xE.push(AE(Dx.slice(PE+1,eE)))}else throw new Error(bE+" is not a valid character")}return Xx(xE,kx,OE)};function Xx(Dx,kx,Yx){var Kx=ar[0],aE=ar[1],eE;for(eE=Dx.length-1;eE>=0;eE--)Kx=Kx.add(Dx[eE].times(aE)),aE=aE.times(kx);return Yx?Kx.negate():Kx}function CE(Dx,kx){return kx=kx||d,Dx<kx.length?kx[Dx]:"<"+Dx+">"}function RE(Dx,kx){if(kx=n(kx),kx.isZero()){if(Dx.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(kx.equals(-1)){if(Dx.isZero())return{value:[0],isNegative:!1};if(Dx.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-Dx.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var Yx=Array.apply(null,Array(Dx.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return Yx.unshift([1]),{value:[].concat.apply([],Yx),isNegative:!1}}var Kx=!1;if(Dx.isNegative()&&kx.isPositive()&&(Kx=!0,Dx=Dx.abs()),kx.isUnit())return Dx.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(Dx.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Kx};for(var aE=[],eE=Dx,gE;eE.isNegative()||eE.compareAbs(kx)>=0;){gE=eE.divmod(kx),eE=gE.quotient;var dE=gE.remainder;dE.isNegative()&&(dE=kx.minus(dE).abs(),eE=eE.next()),aE.push(dE.toJSNumber())}return aE.push(eE.toJSNumber()),{value:aE.reverse(),isNegative:Kx}}function SE(Dx,kx,Yx){var Kx=RE(Dx,kx);return(Kx.isNegative?"-":"")+Kx.value.map(function(aE){return CE(aE,Yx)}).join("")}en.prototype.toArray=function(Dx){return RE(this,Dx)},tn.prototype.toArray=function(Dx){return RE(this,Dx)},on.prototype.toArray=function(Dx){return RE(this,Dx)},en.prototype.toString=function(Dx,kx){if(Dx===a&&(Dx=10),Dx!==10||kx)return SE(this,Dx,kx);for(var Yx=this.value,Kx=Yx.length,aE=String(Yx[--Kx]),eE="0000000",gE;--Kx>=0;)gE=String(Yx[Kx]),aE+=eE.slice(gE.length)+gE;var dE=this.sign?"-":"";return dE+aE},tn.prototype.toString=function(Dx,kx){return Dx===a&&(Dx=10),Dx!=10||kx?SE(this,Dx,kx):String(this.value)},on.prototype.toString=tn.prototype.toString,on.prototype.toJSON=en.prototype.toJSON=tn.prototype.toJSON=function(){return this.toString()},en.prototype.valueOf=function(){return parseInt(this.toString(),10)},en.prototype.toJSNumber=en.prototype.valueOf,tn.prototype.valueOf=function(){return this.value},tn.prototype.toJSNumber=tn.prototype.valueOf,on.prototype.valueOf=on.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function EE(Dx){if(cn(+Dx)){var kx=+Dx;if(kx===ax(kx))return Ct?new on(BigInt(kx)):new tn(kx);throw new Error("Invalid integer: "+Dx)}var Yx=Dx[0]==="-";Yx&&(Dx=Dx.slice(1));var Kx=Dx.split(/e/i);if(Kx.length>2)throw new Error("Invalid integer: "+Kx.join("e"));if(Kx.length===2){var aE=Kx[1];if(aE[0]==="+"&&(aE=aE.slice(1)),aE=+aE,aE!==ax(aE)||!cn(aE))throw new Error("Invalid integer: "+aE+" is not a valid exponent.");var eE=Kx[0],gE=eE.indexOf(".");if(gE>=0&&(aE-=eE.length-gE-1,eE=eE.slice(0,gE)+eE.slice(gE+1)),aE<0)throw new Error("Cannot include negative exponent part for integers");eE+=new Array(aE+1).join("0"),Dx=eE}var dE=/^([0-9][0-9]*)$/.test(Dx);if(!dE)throw new Error("Invalid integer: "+Dx);if(Ct)return new on(BigInt(Yx?"-"+Dx:Dx));for(var bE=[],xE=Dx.length,OE=l,PE=xE-OE;xE>0;)bE.push(+Dx.slice(PE,xE)),PE-=OE,PE<0&&(PE=0),xE-=OE;return In(bE),new en(bE,Yx)}function FE(Dx){if(Ct)return new on(BigInt(Dx));if(cn(Dx)){if(Dx!==ax(Dx))throw new Error(Dx+" is not an integer.");return new tn(Dx)}return EE(Dx.toString())}function AE(Dx){return typeof Dx=="number"?FE(Dx):typeof Dx=="string"?EE(Dx):typeof Dx=="bigint"?new on(Dx):Dx}for(var ZE=0;ZE<1e3;ZE++)ar[ZE]=AE(ZE),ZE>0&&(ar[-ZE]=AE(-ZE));return ar.one=ar[1],ar.zero=ar[0],ar.minusOne=ar[-1],ar.max=Vx,ar.min=nE,ar.gcd=Wx,ar.lcm=tE,ar.isInstance=function(Dx){return Dx instanceof en||Dx instanceof tn||Dx instanceof on},ar.randBetween=lE,ar.fromArray=function(Dx,kx,Yx){return Xx(Dx.map(AE),AE(kx||10),Yx)},ar})();t.hasOwnProperty("exports")&&(t.exports=n)})(BigInteger)),BigInteger.exports}var hasRequiredAlgebrite;function requireAlgebrite(){return hasRequiredAlgebrite||(hasRequiredAlgebrite=1,(function(exports){(function(){var $,ABS,ADD,ADJ,AND,APPROXRATIO,ARCCOS,ARCCOSH,ARCSIN,ARCSINH,ARCTAN,ARCTANH,ARG,ASSUME_REAL_VARIABLES,ATOMIZE,AUTOEXPAND,BAKE,BESSELJ,BESSELY,BINDING,BINOMIAL,BINOM_check_args,C1,C2,C3,C4,C5,C6,CEILING,CHECK,CHOOSE,CIRCEXP,CLEAR,CLEARALL,CLEARPATTERNS,CLOCK,COEFF,COFACTOR,CONDENSE,CONJ,CONS,CONTRACT,COS,COSH,Condense,DEBUG,DEBUG_ABS,DEBUG_ARG,DEBUG_CLOCKFORM,DEBUG_IMAG,DEBUG_IS,DEBUG_MULTIPLY,DEBUG_POWER,DEBUG_RATIONALIZE,DEBUG_RECT,DEBUG_SIMPLIFY,DECOMP,DEFINT,DEGREE,DENOMINATOR,DERIVATIVE,DET,DET_check_arg,DIM,DIRAC,DIVISORS,DO,DOT,DOUBLE,DRAW,DRAWX,DSOLVE,E,EIGEN,EIGENVAL,EIGENVEC,EIG_N,EIG_check_arg,EIG_yydd,EIG_yyqq,ERF,ERFC,EVAL,EXP,EXPAND,EXPCOS,EXPSIN,Eval,Eval_Eval,Eval_abs,Eval_add,Eval_adj,Eval_and,Eval_approxratio,Eval_arccos,Eval_arccosh,Eval_arcsin,Eval_arcsinh,Eval_arctan,Eval_arctanh,Eval_arg,Eval_besselj,Eval_bessely,Eval_binding,Eval_binomial,Eval_ceiling,Eval_check,Eval_choose,Eval_circexp,Eval_clear,Eval_clearall,Eval_clearpatterns,Eval_clock,Eval_coeff,Eval_cofactor,Eval_condense,Eval_conj,Eval_cons,Eval_contract,Eval_cos,Eval_cosh,Eval_decomp,Eval_defint,Eval_degree,Eval_denominator,Eval_derivative,Eval_det,Eval_dim,Eval_dirac,Eval_divisors,Eval_do,Eval_dsolve,Eval_eigen,Eval_eigenval,Eval_eigenvec,Eval_erf,Eval_erfc,Eval_exp,Eval_expand,Eval_expcos,Eval_expsin,Eval_factor,Eval_factorial,Eval_factorpoly,Eval_filter,Eval_float,Eval_floor,Eval_for,Eval_function_reference,Eval_gamma,Eval_gcd,Eval_hermite,Eval_hilbert,Eval_imag,Eval_index,Eval_inner,Eval_integral,Eval_inv,Eval_invg,Eval_isinteger,Eval_isprime,Eval_laguerre,Eval_lcm,Eval_leading,Eval_legendre,Eval_log,Eval_lookup,Eval_mod,Eval_multiply,Eval_not,Eval_nroots,Eval_number,Eval_numerator,Eval_operator,Eval_or,Eval_outer,Eval_pattern,Eval_patternsinfo,Eval_polar,Eval_power,Eval_predicate,Eval_prime,Eval_print,Eval_print2dascii,Eval_printcomputer,Eval_printhuman,Eval_printlatex,Eval_printlist,Eval_product,Eval_quote,Eval_quotient,Eval_rank,Eval_rationalize,Eval_real,Eval_rect,Eval_roots,Eval_round,Eval_setq,Eval_sgn,Eval_shape,Eval_silentpattern,Eval_simplify,Eval_sin,Eval_sinh,Eval_sqrt,Eval_stop,Eval_subst,Eval_sum,Eval_sym,Eval_symbolsinfo,Eval_tan,Eval_tanh,Eval_taylor,Eval_tensor,Eval_test,Eval_testeq,Eval_testge,Eval_testgt,Eval_testle,Eval_testlt,Eval_transpose,Eval_unit,Eval_user_function,Eval_zero,Evalpoly,FACTOR,FACTORIAL,FACTORPOLY,FILTER,FLOATF,FLOOR,FOR,FORCE_FIXED_PRINTOUT,FUNCTION,Find,GAMMA,GCD,HERMITE,HILBERT,IMAG,INDEX,INNER,INTEGRAL,INV,INVG,INV_check_arg,INV_decomp,ISINTEGER,ISPRIME,LAGUERRE,LAST,LAST_2DASCII_PRINT,LAST_FULL_PRINT,LAST_LATEX_PRINT,LAST_LIST_PRINT,LAST_PLAIN_PRINT,LAST_PRINT,LCM,LEADING,LEGENDRE,LOG,LOOKUP,M,MAXDIM,MAXPRIMETAB,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE,MAX_FIXED_PRINTOUT_DIGITS,MEQUAL,METAA,METAB,METAX,MOD,MSIGN,MULTIPLY,MZERO,N,NIL,NOT,NROOTS,NROOTS_ABS,NROOTS_DELTA,NROOTS_EPSILON,NROOTS_RANDOM,NROOTS_YMAX,NROOTS_divpoly,NSYM,NUM,NUMBER,NUMERATOR,OPERATOR,OR,OUTER,PATTERN,PATTERNSINFO,PI,POLAR,POWER,PRIME,PRINT,PRINT2DASCII,PRINTFULL,PRINTLATEX,PRINTLIST,PRINTMODE_2DASCII,PRINTMODE_COMPUTER,PRINTMODE_HUMAN,PRINTMODE_LATEX,PRINTMODE_LIST,PRINTOUTRESULT,PRINTPLAIN,PRINT_LEAVE_E_ALONE,PRINT_LEAVE_X_ALONE,PRODUCT,QUOTE,QUOTIENT,RANK,RATIONALIZE,REAL,ROOTS,ROUND,SECRETX,SETQ,SGN,SHAPE,SILENTPATTERN,SIMPLIFY,SIN,SINH,SPACE_BETWEEN_COLUMNS,SPACE_BETWEEN_ROWS,SQRT,STOP,STR,SUBST,SUM,SYM,SYMBOLSINFO,SYMBOL_A,SYMBOL_A_UNDERSCORE,SYMBOL_B,SYMBOL_B_UNDERSCORE,SYMBOL_C,SYMBOL_D,SYMBOL_I,SYMBOL_IDENTITY_MATRIX,SYMBOL_J,SYMBOL_N,SYMBOL_R,SYMBOL_S,SYMBOL_T,SYMBOL_X,SYMBOL_X_UNDERSCORE,SYMBOL_Y,SYMBOL_Z,TAN,TANH,TAYLOR,TENSOR,TEST,TESTEQ,TESTGE,TESTGT,TESTLE,TESTLT,TIMING_DEBUGS,TOS,TRACE,TRANSPOSE,T_DOUBLE,T_EQ,T_FUNCTION,T_GTEQ,T_INTEGER,T_LTEQ,T_NEQ,T_NEWLINE,T_QUOTASSIGN,T_STRING,T_SYMBOL,U,UNIT,VERSION,YMAX,YYE,YYRECT,ZERO,__emit_char,__emit_str,__factor_add,__factorial,__is_negative,__is_radical_number,__lcm,__legendre,__legendre2,__legendre3,__normalize_radical_factors,__rationalize_tensor,_print,abs,absValFloat,absval,absval_tensor,add,addSymbolLeftOfAssignment,addSymbolRightOfAssignment,add_all,add_factor_to_accumulator,add_numbers,add_terms,adj,alloc_tensor,allocatedId,any_denominators,approxAll,approxLogs,approxLogsOfRationals,approxOneRatioOnly,approxRadicals,approxRadicalsOfRationals,approxRationalsOfLogs,approxRationalsOfPowersOfE,approxRationalsOfPowersOfPI,approxRationalsOfRadicals,approxSineOfRationalMultiplesOfPI,approxSineOfRationals,approxTrigonometric,approx_just_an_integer,approx_logarithmsOfRationals,approx_radicalOfRatio,approx_ratioOfRadical,approx_rationalOfE,approx_rationalOfPi,approx_rationalsOfLogarithms,approx_sine_of_pi_times_rational,approx_sine_of_rational,approxratioRecursive,arccos,arccosh,arcsin,arcsinh,arctan,arctanh,areunivarpolysfactoredorexpandedform,arg,assignmentFound,avoidCalculatingPowersIntoArctans,bake,bake_poly,bake_poly_term,besselj,bessely,bigInt,bignum_factorial,bignum_float,bignum_power_number,bignum_scan_float,bignum_scan_integer,bignum_truncate,binding,binomial,build_tensor,caaddr,caadr,caar,cadaddr,cadadr,cadar,caddaddr,caddadr,caddar,caddddr,cadddr,caddr,cadr,car,cdaddr,cdadr,cdar,cddaddr,cddar,cdddaddr,cddddr,cdddr,cddr,cdr,ceiling,chainOfUserSymbolsNotFunctionsBeingEvaluated,charTabIndex,chartab,check_esc_flag,check_stack,check_tensor_dimensions,choose,choose_check_args,circexp,clearAlgebraEnvironment,clearRenamedVariablesToAvoidBindingToExternalScope,clear_symbols,clear_term,clockform,cmpGlyphs,cmp_args,cmp_expr,cmp_terms,codeGen,coeff,cofactor,collectLatexStringFromReturnValue,collectUserSymbols,combine_factors,combine_terms,compare_numbers,compare_rationals,compare_tensors,compatible,computeDependenciesFromAlgebra,computeResultsAndJavaScriptFromAlgebra,compute_fa,conjugate,cons,consCount,contract,convert_rational_to_double,copy_tensor,cosine,cosine_of_angle,cosine_of_angle_sum,count,countOccurrencesOfSymbol,count_denominators,counter,countsize,d_scalar_scalar,d_scalar_scalar_1,d_scalar_tensor,d_tensor_scalar,d_tensor_tensor,dabs,darccos,darccosh,darcsin,darcsinh,darctan,darctanh,dbesselj0,dbesseljn,dbessely0,dbesselyn,dcos,dcosh,dd,decomp,decomp_product,decomp_sum,defineSomeHandyConstants,define_user_function,defn,defn_str,degree,denominator,derf,derfc,derivative,derivative_of_integral,det,determinant,dfunction,dhermite,dirac,divide,divide_numbers,divisors,divisors_onstack,divpoly,dlog,do_clearPatterns,do_clearall,do_simplify_nested_radicals,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication,dotprod_unicode,doubleToReasonableString,dpow,dpower,dproduct,dsgn,dsin,dsinh,dsum,dtan,dtanh,dupl,eigen,elelmIndex,elem,emit_denominator,emit_denominators,emit_expr,emit_factor,emit_factorial_function,emit_flat_tensor,emit_fraction,emit_function,emit_index_function,emit_multiply,emit_number,emit_numerators,emit_numerical_fraction,emit_power,emit_string,emit_subexpr,emit_symbol,emit_tensor,emit_tensor_inner,emit_term,emit_top_expr,emit_unsigned_expr,emit_x,equal,equaln,equalq,erfc,errorMessage,esc_flag,evaluatingAsFloats,evaluatingPolar,exec,expand,expand_get_A,expand_get_AF,expand_get_B,expand_get_C,expand_get_CF,expand_tensor,expanding,expcos,exponential,expr_level,expsin,f1,f10,f2,f3,f4,f5,f9,f_equals_a,factor,factor_a,factor_again,factor_b,factor_number,factor_small_number,factor_term,factorial,factorpoly,factors,filter,filter_main,filter_sum,filter_tensor,findDependenciesInScript,findPossibleClockForm,findPossibleExponentialForm,findroot,fixup_fraction,fixup_power,flag,floatToRatioRoutine,frame,functionInvokationsScanningStack,gamma,gamma_of_sum,gammaf,gcd,gcd_main,gcd_numbers,gcd_polys,gcd_powers_with_same_base,gcd_product_product,gcd_product_sum,gcd_sum,gcd_sum_product,gcd_sum_sum,gen,getSimpleRoots,get_binding,get_factor_from_complex_root,get_factor_from_real_root,get_innerprod_factors,get_next_token,get_printname,get_size,get_token,glyph,guess,hasImaginaryCoeff,hasNegativeRationalExponent,hash_addition,hash_function,hash_multiplication,hash_power,hashcode_values,hashed_itab,hermite,hilbert,i1,imag,imaginaryunit,index_function,init,initNRoots,inited,inner,inner_f,input_str,integral,integral_of_form,integral_of_product,integral_of_sum,inv,inverse,invert_number,invg,isNumberOneOverSomething,isNumericAtom,isNumericAtomOrTensor,isSimpleRoot,isSmall,isSymbolLeftOfAssignment,isSymbolReclaimable,isZeroAtom,isZeroAtomOrTensor,isZeroLikeOrNonZeroLikeOrUndetermined,isZeroTensor,is_denominator,is_factor,is_small_integer,is_usr_symbol,isadd,isalnumorunderscore,isalpha,isalphaOrUnderscore,iscomplexnumber,iscomplexnumberdouble,iscons,isdenominator,isdigit,isdouble,iseveninteger,isfactor,isfactorial,isfloating,isfraction,isidentitymatrix,isimaginarynumber,isimaginarynumberdouble,isimaginaryunit,isinnerordot,isinteger,isintegerfactor,isintegerorintegerfloat,isinv,iskeyword,isminusone,isminusoneoversqrttwo,isminusoneovertwo,isminussqrtthreeovertwo,ismultiply,isnegative,isnegativenumber,isnegativeterm,isnonnegativeinteger,isnpi,isone,isoneover,isoneoversqrttwo,isoneovertwo,isplusone,isplustwo,ispolyexpandedform,ispolyexpandedform_expr,ispolyexpandedform_factor,ispolyexpandedform_term,ispolyfactoredorexpandedform,ispolyfactoredorexpandedform_factor,ispolyfactoredorexpandedform_power,isposint,ispositivenumber,ispower,isquarterturn,isrational,isspace,issqrtthree,issqrtthreeovertwo,isstr,issymbol,issymbolic,istensor,istranspose,isunivarpolyfactoredorexpandedform,itab,italu_hashcode,j1,laguerre,laguerre2,lastFoundSymbol,latexErrorSign,lcm,leading,legendre,length,lessp,level,list,logarithm,lookupsTotal,lu_decomp,madd,makePositive,makeSignSameAs,make_hashed_itab,mcmp,mdiv,mdivrem,meta_mode,mgcd,mini_solve,mint,mmod,mmul,mod,monic,move,moveTos,mp_denominator,mp_numerator,mpow,mprime,mroot,msub,multinomial_sum,multiply,multiply_all,multiply_all_noexpand,multiply_consecutive_constants,multiply_denominators,multiply_denominators_factor,multiply_denominators_term,multiply_noexpand,multiply_numbers,n_factor_number,negate,negate_noexpand,negate_number,new_integer,new_string,newline_flag,nil_symbols,normaliseDots,normalisedCoeff,normalize_angle,nroots_a,nroots_b,nroots_c,nroots_df,nroots_dx,nroots_fa,nroots_fb,nroots_x,nroots_y,nterms,numerator,numericRootOfPolynomial,o,one,oneElement,one_as_double,outer,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,parse,parse_internal,parse_p1,parse_p2,parse_time_simplifications,partition,patternHasBeenFound,patternsinfo,polar,polarRectAMinusOneBase,polyform,pop,pop_double,pop_frame,pop_integer,power,power_str,power_sum,power_tensor,predefinedSymbolsInGlobalScope_doNotTrackInDependencies,prime,primetab,print2dascii,printMode,print_ABS_latex,print_ARCCOS_codegen,print_ARCSIN_codegen,print_ARCTAN_codegen,print_BINOMIAL_latex,print_COS_codegen,print_DEFINT_latex,print_DOT_codegen,print_DOT_latex,print_DO_codegen,print_FOR_codegen,print_INV_codegen,print_INV_latex,print_PRODUCT_codegen,print_PRODUCT_latex,print_SETQ_codegen,print_SIN_codegen,print_SQRT_latex,print_SUM_codegen,print_SUM_latex,print_TAN_codegen,print_TESTEQ_latex,print_TESTGE_latex,print_TESTGT_latex,print_TESTLE_latex,print_TESTLT_latex,print_TEST_codegen,print_TEST_latex,print_TRANSPOSE_codegen,print_TRANSPOSE_latex,print_UNIT_codegen,print_a_over_b,print_base_of_denom,print_char,print_denom,print_expo_of_denom,print_expr,print_factor,print_factorial_function,print_glyphs,print_index_function,print_list,print_multiply_sign,print_number,print_power,print_str,print_subexpr,print_tensor,print_tensor_inner,print_tensor_inner_latex,print_tensor_latex,print_term,printchar,printchar_nowrap,printline,promote_tensor,push,pushTryNotToDuplicate,push_double,push_factor,push_frame,push_integer,push_rational,push_symbol,push_term_factors,push_terms,push_zero_matrix,qadd,qdiv,qmul,qpow,qpowf,quickfactor,quickpower,rational,rationalize,rationalize_coefficients,real,reciprocate,rect,recursionLevelNestedRadicalsRemoval,recursiveDependencies,ref,ref1,rememberPrint,remove_negative_exponents,reset_after_error,restore,restoreMetaBindings,rewrite_args,rewrite_args_tensor,roots,roots2,roots3,run,runUserDefinedSimplifications,save,saveMetaBindings,scalar_times_tensor,scan,scan_error,scan_expression,scan_factor,scan_function_call_with_function_name,scan_function_call_without_function_name,scan_index,scan_meta,scan_power,scan_relation,scan_stmt,scan_str,scan_string,scan_subexpr,scan_symbol,scan_tensor,scan_term,scanned,scanningParameters,setM,setSignTo,set_binding,set_component,setq_indexed,sgn,shape,sign,sign_of_term,simfac,simfac_term,simpleComplexityMeasure,simplify,simplifyForCodeGeneration,simplify_1_in_products,simplify_main,simplify_nested_radicals,simplify_polar,simplify_polarRect,simplify_rational_expressions,simplify_rectToClock,simplify_tensor,simplify_trig,sine,sine_of_angle,sine_of_angle_sum,skipRootVariableToBeSolved,sort_stack,square,stack,stackAddsCount,std_symbol,step,step2,stop,strcmp,stringsEmittedByUserPrintouts,subst,subtract,swap,symbol,symbolsDependencies,symbolsHavingReassignments,symbolsInExpressionsWithoutAssignments,symbolsLeftOfAssignment,symbolsRightOfAssignment,symbolsinfo,symnum,symtab,take_care_of_nested_radicals,tangent,taylor,tensor,tensor_plus_tensor,tensor_times_scalar,testApprox,test_flag,token,token_buf,token_str,top,top_level_eval,tos,transform,transpose,transpose_unicode,trigmode,trivial_divide,try_kth_prime,turnErrorMessageToLatex,update_token_buf,userSimplificationsInListForm,userSimplificationsInStringForm,usr_symbol,version,will_be_displayed_as_fraction,ybinomial,ycosh,ydirac,yerf,yerfc,yfloor,yindex,yround,ysinh,yyarg,yybesselj,yybessely,yyceiling,yycondense,yycontract,yycosh,yydegree,yydetg,yydivpoly,yyerf,yyerfc,yyexpand,yyfactorpoly,yyfloat,yyfloor,yyhermite,yyhermite2,yyinvg,yylcm,yylog,yymultiply,yyouter,yypower,yyrationalize,yyround,yysgn,yysimfac,yysinh,yytangent,zero,zzfloat,hasProp={}.hasOwnProperty;for(bigInt=requireBigInteger(),version="1.4.0",NSYM=1e3,DEBUG=!1,PRINTOUTRESULT=!1,PRINTMODE_LATEX="PRINTMODE_LATEX",PRINTMODE_2DASCII="PRINTMODE_2DASCII",PRINTMODE_COMPUTER="PRINTMODE_COMPUTER",PRINTMODE_HUMAN="PRINTMODE_HUMAN",PRINTMODE_LIST="PRINTMODE_LIST",printMode=PRINTMODE_COMPUTER,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0,recursionLevelNestedRadicalsRemoval=0,do_simplify_nested_radicals=!0,avoidCalculatingPowersIntoArctans=!0,rational=(function(){class t{}return t.prototype.a=null,t.prototype.b=null,t}).call(this),U=(function(){class t{toString(){return print_expr(this)}toLatexString(){return collectLatexStringFromReturnValue(this)}constructor(){this.cons={},this.cons.car=null,this.cons.cdr=null,this.q=new rational}}return t.prototype.cons=null,t.prototype.printname="",t.prototype.str="",t.prototype.tensor=null,t.prototype.q=null,t.prototype.d=0,t.prototype.k=0,t.prototype.tag=0,t}).call(this),errorMessage="",CONS=0,NUM=1,DOUBLE=2,STR=3,TENSOR=4,SYM=5,counter=0,ABS=counter++,ADD=counter++,ADJ=counter++,AND=counter++,APPROXRATIO=counter++,ARCCOS=counter++,ARCCOSH=counter++,ARCSIN=counter++,ARCSINH=counter++,ARCTAN=counter++,ARCTANH=counter++,ARG=counter++,ATOMIZE=counter++,BESSELJ=counter++,BESSELY=counter++,BINDING=counter++,BINOMIAL=counter++,CEILING=counter++,CHECK=counter++,CHOOSE=counter++,CIRCEXP=counter++,CLEAR=counter++,CLEARALL=counter++,CLEARPATTERNS=counter++,CLOCK=counter++,COEFF=counter++,COFACTOR=counter++,CONDENSE=counter++,CONJ=counter++,CONTRACT=counter++,COS=counter++,COSH=counter++,DECOMP=counter++,DEFINT=counter++,DEGREE=counter++,DENOMINATOR=counter++,DERIVATIVE=counter++,DET=counter++,DIM=counter++,DIRAC=counter++,DIVISORS=counter++,DO=counter++,DOT=counter++,DRAW=counter++,DSOLVE=counter++,EIGEN=counter++,EIGENVAL=counter++,EIGENVEC=counter++,ERF=counter++,ERFC=counter++,EVAL=counter++,EXP=counter++,EXPAND=counter++,EXPCOS=counter++,EXPSIN=counter++,FACTOR=counter++,FACTORIAL=counter++,FACTORPOLY=counter++,FILTER=counter++,FLOATF=counter++,FLOOR=counter++,FOR=counter++,FUNCTION=counter++,GAMMA=counter++,GCD=counter++,HERMITE=counter++,HILBERT=counter++,IMAG=counter++,INDEX=counter++,INNER=counter++,INTEGRAL=counter++,INV=counter++,INVG=counter++,ISINTEGER=counter++,ISPRIME=counter++,LAGUERRE=counter++,LCM=counter++,LEADING=counter++,LEGENDRE=counter++,LOG=counter++,LOOKUP=counter++,MOD=counter++,MULTIPLY=counter++,NOT=counter++,NROOTS=counter++,NUMBER=counter++,NUMERATOR=counter++,OPERATOR=counter++,OR=counter++,OUTER=counter++,PATTERN=counter++,PATTERNSINFO=counter++,POLAR=counter++,POWER=counter++,PRIME=counter++,PRINT_LEAVE_E_ALONE=counter++,PRINT_LEAVE_X_ALONE=counter++,PRINT=counter++,PRINT2DASCII=counter++,PRINTFULL=counter++,PRINTLATEX=counter++,PRINTLIST=counter++,PRINTPLAIN=counter++,PRODUCT=counter++,QUOTE=counter++,QUOTIENT=counter++,RANK=counter++,RATIONALIZE=counter++,REAL=counter++,ROUND=counter++,YYRECT=counter++,ROOTS=counter++,SETQ=counter++,SGN=counter++,SILENTPATTERN=counter++,SIMPLIFY=counter++,SIN=counter++,SINH=counter++,SHAPE=counter++,SQRT=counter++,STOP=counter++,SUBST=counter++,SUM=counter++,SYMBOLSINFO=counter++,TAN=counter++,TANH=counter++,TAYLOR=counter++,TEST=counter++,TESTEQ=counter++,TESTGE=counter++,TESTGT=counter++,TESTLE=counter++,TESTLT=counter++,TRANSPOSE=counter++,UNIT=counter++,ZERO=counter++,NIL=counter++,LAST=counter++,LAST_PRINT=counter++,LAST_2DASCII_PRINT=counter++,LAST_FULL_PRINT=counter++,LAST_LATEX_PRINT=counter++,LAST_LIST_PRINT=counter++,LAST_PLAIN_PRINT=counter++,AUTOEXPAND=counter++,BAKE=counter++,ASSUME_REAL_VARIABLES=counter++,TRACE=counter++,FORCE_FIXED_PRINTOUT=counter++,MAX_FIXED_PRINTOUT_DIGITS=counter++,YYE=counter++,DRAWX=counter++,METAA=counter++,METAB=counter++,METAX=counter++,SECRETX=counter++,VERSION=counter++,PI=counter++,SYMBOL_A=counter++,SYMBOL_B=counter++,SYMBOL_C=counter++,SYMBOL_D=counter++,SYMBOL_I=counter++,SYMBOL_J=counter++,SYMBOL_N=counter++,SYMBOL_R=counter++,SYMBOL_S=counter++,SYMBOL_T=counter++,SYMBOL_X=counter++,SYMBOL_Y=counter++,SYMBOL_Z=counter++,SYMBOL_IDENTITY_MATRIX=counter++,SYMBOL_A_UNDERSCORE=counter++,SYMBOL_B_UNDERSCORE=counter++,SYMBOL_X_UNDERSCORE=counter++,C1=counter++,C2=counter++,C3=counter++,C4=counter++,C5=counter++,C6=counter++,counter++,E=YYE,TOS=1e5,MAXPRIMETAB=1e4,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10,MAXDIM=24,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"],parse_time_simplifications=!0,chainOfUserSymbolsNotFunctionsBeingEvaluated=[],stringsEmittedByUserPrintouts="",tensor=(function(){class t{constructor(){this.dim=(function(){var a,s,l;for(l=[],a=0,s=MAXDIM;0<=s?a<=s:a>=s;0<=s?a++:a--)l.push(0);return l})(),this.elem=[]}}return t.prototype.ndim=0,t.prototype.dim=null,t.prototype.nelem=0,t.prototype.elem=null,t}).call(this),(function(){class t{}return t.prototype.h=0,t.prototype.w=0,t.prototype.n=0,t.prototype.a=[],t}).call(this),(function(){class t{}return t.prototype.ascent=0,t.prototype.descent=0,t.prototype.width=0,t}).call(this),tos=0,expanding=0,evaluatingAsFloats=0,evaluatingPolar=0,primetab=(function(){var t,n,a,s;for(s=[2],n=3;s.length<MAXPRIMETAB;){for(a=0,t=Math.sqrt(n);a<s.length&&s[a]<=t;){if(n%s[a]===0){a=-1;break}a++}a!==-1&&s.push(n),n+=2}return s[MAXPRIMETAB]=0,s})(),esc_flag=0,trigmode=0,symtab=[],binding=[],isSymbolReclaimable=[],stack=[],frame=0,p0=null,p1=null,p2=null,p3=null,p4=null,p5=null,p6=null,p7=null,p8=null,p9=null,zero=null,one=null,one_as_double=null,imaginaryunit=null,test_flag=0,codeGen=!1,userSimplificationsInListForm=[],userSimplificationsInStringForm=[],transpose_unicode=7488,dotprod_unicode=183,symbol=function(t){return symtab[t]},iscons=function(t){return t.k===CONS},isrational=function(t){return t.k===NUM},isdouble=function(t){return t.k===DOUBLE},isNumericAtom=function(t){return isrational(t)||isdouble(t)},isstr=function(t){return t.k===STR},istensor=function(t){if(t==null)debugger;else return t.k===TENSOR},isNumericAtomOrTensor=function(t){var n,a,s,l,u;if(isNumericAtom(t)||t===symbol(SYMBOL_IDENTITY_MATRIX))return 1;if(!istensor(t)&&!isNumericAtom(t))return 0;for(s=t.tensor.nelem,n=t.tensor.elem,a=l=0,u=s;0<=u?l<u:l>u;a=0<=u?++l:--l)if(!isNumericAtomOrTensor(n[a]))return 0;return 1},issymbol=function(t){return t.k===SYM},iskeyword=function(t){return issymbol(t)&&symnum(t)<NIL},car=function(t){return iscons(t)?t.cons.car:symbol(NIL)},cdr=function(t){return iscons(t)?t.cons.cdr:symbol(NIL)},caar=function(t){return car(car(t))},cadr=function(t){return car(cdr(t))},cdar=function(t){return cdr(car(t))},cddr=function(t){return cdr(cdr(t))},caadr=function(t){return car(car(cdr(t)))},caddr=function(t){return car(cdr(cdr(t)))},cadar=function(t){return car(cdr(car(t)))},cdadr=function(t){return cdr(car(cdr(t)))},cddar=function(t){return cdr(cdr(car(t)))},cdddr=function(t){return cdr(cdr(cdr(t)))},caaddr=function(t){return car(car(cdr(cdr(t))))},cadadr=function(t){return car(cdr(car(cdr(t))))},caddar=function(t){return car(cdr(cdr(car(t))))},cdaddr=function(t){return cdr(car(cdr(cdr(t))))},cadddr=function(t){return car(cdr(cdr(cdr(t))))},cddddr=function(t){return cdr(cdr(cdr(cdr(t))))},caddddr=function(t){return car(cdr(cdr(cdr(cdr(t)))))},cadaddr=function(t){return car(cdr(car(cdr(cdr(t)))))},cddaddr=function(t){return cdr(cdr(car(cdr(cdr(t)))))},caddadr=function(t){return car(cdr(cdr(car(cdr(t)))))},cdddaddr=function(t){return cdr(cdr(cdr(car(cdr(cdr(t))))))},caddaddr=function(t){return car(cdr(cdr(car(cdr(cdr(t))))))},isadd=function(t){return car(t)===symbol(ADD)},ismultiply=function(t){return car(t)===symbol(MULTIPLY)},ispower=function(t){return car(t)===symbol(POWER)},isfactorial=function(t){return car(t)===symbol(FACTORIAL)},isinnerordot=function(t){return car(t)===symbol(INNER)||car(t)===symbol(DOT)},istranspose=function(t){return car(t)===symbol(TRANSPOSE)},isinv=function(t){return car(t)===symbol(INV)},isidentitymatrix=function(t){return t===symbol(SYMBOL_IDENTITY_MATRIX)},MSIGN=function(t){return t.isPositive()?1:t.isZero()?0:-1},MZERO=function(t){return t.isZero()},MEQUAL=function(t,n){if(t==null)debugger;return t.equals(n)},reset_after_error=function(){return moveTos(0),esc_flag=0,frame=TOS,evaluatingAsFloats=0,evaluatingPolar=0},$=exports!==null?exports:this,$.version=version,$.isadd=isadd,$.ismultiply=ismultiply,$.ispower=ispower,$.isfactorial=isfactorial,$.car=car,$.cdr=cdr,$.caar=caar,$.cadr=cadr,$.cdar=cdar,$.cddr=cddr,$.caadr=caadr,$.caddr=caddr,$.cadar=cadar,$.cdadr=cdadr,$.cddar=cddar,$.cdddr=cdddr,$.caaddr=caaddr,$.cadadr=cadadr,$.caddar=caddar,$.cdaddr=cdaddr,$.cadddr=cadddr,$.cddddr=cddddr,$.caddddr=caddddr,$.cadaddr=cadaddr,$.cddaddr=cddaddr,$.caddadr=caddadr,$.cdddaddr=cdddaddr,$.caddaddr=caddaddr,$.symbol=symbol,$.iscons=iscons,$.isrational=isrational,$.isdouble=isdouble,$.isNumericAtom=isNumericAtom,$.isstr=isstr,$.istensor=istensor,$.issymbol=issymbol,$.iskeyword=iskeyword,$.CONS=CONS,$.NUM=NUM,$.DOUBLE=DOUBLE,$.STR=STR,$.TENSOR=TENSOR,$.SYM=SYM,DEBUG_ABS=!1,Eval_abs=function(){return push(cadr(p1)),Eval(),abs()},absValFloat=function(){return Eval(),absval(),Eval(),zzfloat()},abs=function(){var t;if(t=top(),DEBUG_ABS&&console.trace(">>>>  ABS of "+t),numerator(),DEBUG_ABS&&console.log("ABS numerator "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL numerator: "+stack[tos-1]),push(t),denominator(),DEBUG_ABS&&console.log("ABS denominator: "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL denominator: "+stack[tos-1]),divide(),DEBUG_ABS&&console.log("ABSVAL divided: "+stack[tos-1]),DEBUG_ABS)return console.log("<<<<<<<  ABS")},absval=function(){var t,n;if(save(),p1=pop(),n=p1,DEBUG_ABS&&console.log("ABS of "+p1),isZeroAtomOrTensor(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just zero"),push(zero),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(isnegativenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a negative"),push(p1),negate(),restore();return}if(ispositivenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a positive"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(p1===symbol(PI)){DEBUG_ABS&&console.log(" abs: "+p1+" of PI"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ADD)&&(findPossibleClockForm(p1)||findPossibleExponentialForm(p1)||Find(p1,imaginaryunit))){DEBUG_ABS&&console.log(" abs: "+p1+" is a sum"),DEBUG_ABS&&console.log("abs of a sum"),push(p1),rect(),p1=pop(),push(p1),real(),push_integer(2),power(),push(p1),imag(),push_integer(2),power(),add(),push_rational(1,2),power(),simplify_trig(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1)){DEBUG_ABS&&console.log(" abs: "+p1+" is -1 to any power"),evaluatingAsFloats?(DEBUG_ABS&&console.log(" abs: numeric, so result is 1.0"),push_double(1)):(DEBUG_ABS&&console.log(" abs: symbolic, so result is 1"),push_integer(1)),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&ispositivenumber(caddr(p1))){DEBUG_ABS&&console.log(" abs: "+p1+" is something to the power of a positive number"),push(cadr(p1)),abs(),push(caddr(p1)),power(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E)){DEBUG_ABS&&console.log(" abs: "+p1+" is an exponential"),push(caddr(p1)),real(),exponential(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(MULTIPLY)){for(DEBUG_ABS&&console.log(" abs: "+p1+" is a product"),t=!1,p1=cdr(p1);iscons(p1);)push(car(p1)),absval(),t&&multiply(),t=!0,p1=cdr(p1);DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ABS)){DEBUG_ABS&&console.log(" abs: "+p1+" is abs of a abs"),push_symbol(ABS),push(cadr(p1)),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(istensor(p1)){absval_tensor(),restore();return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),DEBUG_ABS&&console.log(" abs: "+p1+" is nothing decomposable"),push_symbol(ABS),push(p1),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore()},absval_tensor=function(){return p1.tensor.ndim!==1&&stop("abs(tensor) with tensor rank > 1"),push(p1),push(p1),conjugate(),inner(),push_rational(1,2),power(),simplify(),Eval()},flag=0,Eval_add=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p2=pop(),push_terms(p2),p1=cdr(p1);return add_terms(tos-t)},stackAddsCount=0,add_terms=function(t){var n,a,s,l,u,c,d,Ct,ar;if(stackAddsCount++,a=0,n=tos-t,DEBUG&&console.log("stack before adding terms #"+stackAddsCount),DEBUG)for(a=u=0,c=tos;0<=c?u<c:u>c;a=0<=c?++u:--u)console.log(print_list(stack[a]));for(a=s=0;s<10&&!(t<2||(flag=0,ar=stack.slice(n,n+t),ar.sort(cmp_terms),stack=stack.slice(0,n).concat(ar).concat(stack.slice(n+t)),flag===0));a=++s)t=combine_terms(n,t);switch(moveTos(n+t),t){case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:break;default:list(t),p1=pop(),push_symbol(ADD),push(p1),cons()}if(DEBUG&&console.log("stack after adding terms #"+stackAddsCount),DEBUG){for(Ct=[],a=l=0,d=tos;0<=d?l<d:l>d;a=0<=d?++l:--l)Ct.push(console.log(print_list(stack[a])));return Ct}},cmp_terms=function(t,n){var a,s,l,u;if(a=0,isNumericAtom(t)&&isNumericAtom(n))return flag=1,0;if(istensor(t)&&istensor(n)){if(t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=s=0,l=t.tensor.ndim;0<=l?s<l:s>l;a=0<=l?++s:--s){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}return flag=1,0}return car(t)===symbol(MULTIPLY)&&(t=cdr(t),isNumericAtom(car(t))&&(t=cdr(t),cdr(t)===symbol(NIL)&&(t=car(t)))),car(n)===symbol(MULTIPLY)&&(n=cdr(n),isNumericAtom(car(n))&&(n=cdr(n),cdr(n)===symbol(NIL)&&(n=car(n)))),u=cmp_expr(t,n),u===0&&(flag=1),u},combine_terms=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox;for(a=0;a<n-1;){if(check_esc_flag(),p3=stack[t+a],p4=stack[t+a+1],istensor(p3)&&istensor(p4)){if(push(p3),push(p4),tensor_plus_tensor(),p1=pop(),p1!==symbol(NIL)){for(stack[t+a]=p1,l=Ct=ar=a+1,en=n-1;ar<=en?Ct<en:Ct>en;l=ar<=en?++Ct:--Ct)stack[t+l]=stack[t+l+1];n--,a--}a++;continue}if(istensor(p3)||istensor(p4)){a++;continue}if(isNumericAtom(p3)&&isNumericAtom(p4)){if(push(p3),push(p4),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(l=s=tn=a,on=n-2;tn<=on?s<on:s>on;l=tn<=on?++s:--s)stack[t+l]=stack[t+l+2];n-=2}else{for(stack[t+a]=p1,l=u=cn=a+1,dn=n-1;cn<=dn?u<dn:u>dn;l=cn<=dn?++u:--u)stack[t+l]=stack[t+l+1];n--}a--,a++;continue}if(isNumericAtom(p3)||isNumericAtom(p4)){a++;continue}if(evaluatingAsFloats?(p1=one_as_double,p2=one_as_double):(p1=one,p2=one),ox=0,car(p3)===symbol(MULTIPLY)&&(p3=cdr(p3),ox=1,isNumericAtom(car(p3))&&(p1=car(p3),p3=cdr(p3),cdr(p3)===symbol(NIL)&&(p3=car(p3),ox=0))),car(p4)===symbol(MULTIPLY)&&(p4=cdr(p4),isNumericAtom(car(p4))&&(p2=car(p4),p4=cdr(p4),cdr(p4)===symbol(NIL)&&(p4=car(p4)))),!equal(p3,p4)){a++;continue}if(push(p1),push(p2),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(l=c=Cn=a,In=n-2;Cn<=In?c<In:c>In;l=Cn<=In?++c:--c)stack[t+l]=stack[t+l+2];n-=2,a--,a++;continue}for(push(p1),ox?(push(symbol(MULTIPLY)),push(p3),cons()):push(p3),multiply(),stack[t+a]=pop(),l=d=ix=a+1,ax=n-1;ix<=ax?d<ax:d>ax;l=ix<=ax?++d:--d)stack[t+l]=stack[t+l+1];n--,a--,a++}return n},push_terms=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else if(!isZeroAtom(t))return push(t)},add=function(){var t;return save(),p2=pop(),p1=pop(),t=tos,push_terms(p1),push_terms(p2),add_terms(tos-t),restore()},add_all=function(t){var n,a,s,l,u;for(a=0,save(),u=tos-t,n=tos,a=s=0,l=t;0<=l?s<l:s>l;a=0<=l?++s:--s)push_terms(stack[u+a]);return add_terms(tos-n),p1=pop(),moveTos(tos-t),push(p1),restore()},subtract=function(){return negate(),add()},Eval_adj=function(){return push(cadr(p1)),Eval(),adj()},adj=function(){var t,n,a,s,l,u,c;for(t=0,a=0,s=0,save(),p1=pop(),istensor(p1)&&p1.tensor.ndim===2&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("adj: square matrix expected"),s=p1.tensor.dim[0],p2=alloc_tensor(s*s),p2.tensor.ndim=2,p2.tensor.dim[0]=s,p2.tensor.dim[1]=s,t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l)for(a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)cofactor(p1,s,t,a),p2.tensor.elem[s*a+t]=pop();return push(p2),restore()},Eval_approxratio=function(){var t;return t=cadr(p1),push(t),approxratioRecursive()},approxratioRecursive=function(){var t,n,a,s,l;if(t=0,save(),p1=pop(),istensor(p1)){for(p4=alloc_tensor(p1.tensor.nelem),p4.tensor.ndim=p1.tensor.ndim,t=a=0,s=p1.tensor.ndim;0<=s?a<s:a>s;t=0<=s?++a:--a)p4.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,l=p1.tensor.nelem;0<=l?n<l:n>l;t=0<=l?++n:--n)push(p1.tensor.elem[t]),approxratioRecursive(),p4.tensor.elem[t]=pop(),check_tensor_dimensions(p4);push(p4)}else p1.k===DOUBLE?(push(p1),approxOneRatioOnly()):iscons(p1)?(push(car(p1)),approxratioRecursive(),push(cdr(p1)),approxratioRecursive(),cons()):push(p1);return restore()},approxOneRatioOnly=function(){var t,n,a,s,l,u;if(zzfloat(),s=pop(),s.k===DOUBLE){l=s.d,a=l.toString().split("."),a.length===2?(t=a[1].length,n=1/Math.pow(10,t),u=floatToRatioRoutine(l,n),push_rational(u[0],u[1])):push_integer(l);return}return push_symbol(APPROXRATIO),push(theArgument),list(2)},floatToRatioRoutine=function(t,n){var a,s,l,u,c,d,Ct;if(l=void 0,s=void 0,a=void 0,d=void 0,u=void 0,c=void 0,Ct=[0,0],isNaN(t))return Ct;if(t===1/0)return Ct[0]=1,Ct[1]=0,Ct;if(t===-1/0)return Ct[0]=-1,Ct[1]=0,Ct;if(t<0?a=-1:a=1,t=Math.abs(t),Math.abs(t-Math.floor(t))<n)return l=t*a,s=1,Ct[0]=l,Ct[1]=s,Ct;if(t<1e-19)return l=a,s=1e19,Ct[0]=l,Ct[1]=s,Ct;if(t>1e19)return l=1e19*a,s=1,Ct[0]=l,Ct[1]=s,Ct;for(d=t,u=0,s=1;d=1/(d-Math.floor(d)),c=s,s=s*Math.floor(d)+u,u=c,l=Math.floor(t*s+.5),Math.abs(t-l/s)>n&&d!==Math.floor(d););return l=a*l,Ct[0]=l,Ct[1]=s,Ct},approx_just_an_integer=0,approx_sine_of_rational=1,approx_sine_of_pi_times_rational=2,approx_rationalOfPi=3,approx_radicalOfRatio=4,approx_ratioOfRadical=6,approx_rationalOfE=7,approx_logarithmsOfRationals=8,approx_rationalsOfLogarithms=9,approxRationalsOfRadicals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix;if(ix=t.toString().split("."),ix.length===2)tn=ix[1].length,cn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+cn),n=null,en=Number.MAX_VALUE,Cn=[2,3,5,6,7,8,10],on=0,Ct=Cn.length;on<Ct;on++)for(u=Cn[on],d=c=1;c<=10;d=++c)l=Math.sqrt(u)/d,Math.abs(l)>1e-10?(dn=t/l,ar=Math.round(dn),s=Math.abs(1-dn/ar)):(dn=1,ar=1,s=Math.abs(t-l)),s<2*cn&&(a=simpleComplexityMeasure(ar,u,d),a<en&&(en=a,In=ar+" * sqrt( "+u+" ) / "+d,n=[In,approx_ratioOfRadical,ar,u,d]));return n},approxRadicalsOfRationals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox;if(ox=t.toString().split("."),ox.length===2)on=ox[1].length,dn=1/Math.pow(10,on);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+dn),n=null,tn=Number.MAX_VALUE,In=[1,2,3,5,6,7,8,10],cn=0,Ct=In.length;cn<Ct;cn++)for(u=In[cn],ix=[1,2,3,5,6,7,8,10],c=0,ar=ix.length;c<ar;c++)d=ix[c],l=Math.sqrt(u/d),Math.abs(l)>1e-10?(Cn=t/l,en=Math.round(Cn),s=Math.abs(1-Cn/en)):(Cn=1,en=1,s=Math.abs(t-l)),s<2*dn&&(a=simpleComplexityMeasure(en,u,d),a<tn&&(tn=a,ax=en+" * (sqrt( "+u+" / "+d+" )",n=[ax,approx_radicalOfRatio,en,u,d]));return n},approxRadicals=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxRationalsOfRadicals(t),a??(n=approxRadicalsOfRationals(t),n??null)},approxLogs=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxRationalsOfLogs(t),a??(n=approxLogsOfRationals(t),n??null)},approxRationalsOfLogs=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=2;tn<=5;u=++tn)for(d=c=1;c<=5;d=++c)l=Math.log(u)/d,Math.abs(l)>1e-10?(cn=t/l,Ct=Math.round(cn),s=Math.abs(1-cn/Ct)):(cn=1,Ct=1,s=Math.abs(t-l)),!(Ct!==1&&Math.abs(Math.floor(Ct/d))===Math.abs(Ct/d))&&s<2.2*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * log( "+u+" ) / "+d,n=[dn,approx_rationalsOfLogarithms,Ct,u,d]));return n},approxLogsOfRationals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=1;tn<=5;u=++tn)for(d=c=1;c<=5;d=++c)l=Math.log(u/d),Math.abs(l)>1e-10?(cn=t/l,Ct=Math.round(cn),s=Math.abs(1-cn/Ct)):(cn=1,Ct=1,s=Math.abs(t-l)),s<1.96*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * log( "+u+" / "+d+" )",n=[dn,approx_logarithmsOfRationals,Ct,u,d]));return n},approxRationalsOfPowersOfE=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=1;tn<=2;u=++tn)for(d=c=1;c<=12;d=++c)l=Math.pow(Math.E,u)/d,Math.abs(l)>1e-10?(cn=t/l,Ct=Math.round(cn),s=Math.abs(1-cn/Ct)):(cn=1,Ct=1,s=Math.abs(t-l)),s<2*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * (e ^ "+u+" ) / "+d,n=[dn,approx_rationalOfE,Ct,u,d]));return n},approxRationalsOfPowersOfPI=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=1;tn<=5;u=++tn)for(d=c=1;c<=12;d=++c)l=Math.pow(Math.PI,u)/d,Math.abs(l)>1e-10?(cn=t/l,Ct=Math.round(cn),s=Math.abs(1-cn/Ct)):(cn=1,Ct=1,s=Math.abs(t-l)),s<2*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * (pi ^ "+u+" ) / "+d+" )",n=[dn,approx_rationalOfPi,Ct,u,d]));return n},approxTrigonometric=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxSineOfRationals(t),a??(n=approxSineOfRationalMultiplesOfPI(t),n??null)},approxSineOfRationals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In;if(In=t.toString().split("."),In.length===2)tn=In[1].length,cn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+cn),n=null,en=Number.MAX_VALUE,c=on=1;on<=4;c=++on)for(Ct=d=1;d<=4;Ct=++d)l=c/Ct,u=Math.sin(l),Math.abs(u)>1e-10?(dn=t/u,ar=Math.round(dn),s=Math.abs(1-dn/ar)):(dn=1,ar=1,s=Math.abs(t-u)),s<2*cn&&(a=simpleComplexityMeasure(ar,c,Ct),a<en&&(en=a,Cn=ar+" * sin( "+c+"/"+Ct+" )",n=[Cn,approx_sine_of_rational,ar,c,Ct]));return n},approxSineOfRationalMultiplesOfPI=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In;if(In=t.toString().split("."),In.length===2)tn=In[1].length,cn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+cn),n=null,en=Number.MAX_VALUE,c=on=1;on<=13;c=++on)for(Ct=d=1;d<=13;Ct=++d)l=c/Ct,u=Math.sin(Math.PI*l),Math.abs(u)>1e-10?(dn=t/u,ar=Math.round(dn),s=Math.abs(1-dn/ar)):(dn=1,ar=1,s=Math.abs(t-u)),s<23*cn&&(a=simpleComplexityMeasure(ar,c,Ct),a<en&&(en=a,Cn=ar+" * sin( "+c+"/"+Ct+" * pi )",n=[Cn,approx_sine_of_pi_times_rational,ar,c,Ct]));return n},approxAll=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on;if(on=t.toString().split("."),on.length===2)en=on[1].length,tn=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+tn),ar=Number.MAX_VALUE,Ct=0,d=null,n=!0,s=approxRadicals(t),s!=null&&(Ct=simpleComplexityMeasure(s),Ct<ar?(n&&console.log("better explanation by approxRadicals: "+s+" complexity: "+Ct),ar=Ct,d=s):n&&console.log("subpar explanation by approxRadicals: "+s+" complexity: "+Ct)),a=approxLogs(t),a!=null&&(Ct=simpleComplexityMeasure(a),Ct<ar?(n&&console.log("better explanation by approxLogs: "+a+" complexity: "+Ct),ar=Ct,d=a):n&&console.log("subpar explanation by approxLogs: "+a+" complexity: "+Ct)),l=approxRationalsOfPowersOfE(t),l!=null&&(Ct=simpleComplexityMeasure(l),Ct<ar?(n&&console.log("better explanation by approxRationalsOfPowersOfE: "+l+" complexity: "+Ct),ar=Ct,d=l):n&&console.log("subpar explanation by approxRationalsOfPowersOfE: "+l+" complexity: "+Ct)),u=approxRationalsOfPowersOfPI(t),u!=null&&(Ct=simpleComplexityMeasure(u),Ct<ar?(n&&console.log("better explanation by approxRationalsOfPowersOfPI: "+u+" complexity: "+Ct),ar=Ct,d=u):n&&console.log("subpar explanation by approxRationalsOfPowersOfPI: "+u+" complexity: "+Ct)),c=approxTrigonometric(t),c!=null&&(Ct=simpleComplexityMeasure(c),Ct<ar?(n&&console.log("better explanation by approxTrigonometric: "+c+" complexity: "+Ct),ar=Ct,d=c):n&&console.log("subpar explanation by approxTrigonometric: "+c+" complexity: "+Ct)),d},simpleComplexityMeasure=function(t,n,a){var s;if(s=null,t instanceof Array){switch(t[1]){case approx_sine_of_pi_times_rational:s=4;break;case approx_rationalOfPi:s=Math.pow(4,Math.abs(t[3]))*Math.abs(t[2]);break;case approx_rationalOfE:s=Math.pow(3,Math.abs(t[3]))*Math.abs(t[2]);break;default:s=0}s+=Math.abs(t[2])*(Math.abs(t[3])+Math.abs(t[4]))}else s+=Math.abs(t)*(Math.abs(n)+Math.abs(a));return t[2]===1?s-=1:s+=1,t[3]===1?s-=1:s+=1,t[4]===1?s-=1:s+=1,s<0&&(s=0),s},testApprox=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx,mx,vx,bx,xx,_x,Ex,Tx,Cx,Mx,Ax,Nx,Ux,Rx,Ox,Px,$x,Lx,zx,qx,jx,Hx,Vx,nE,Wx,tE,lE,iE,Xx,CE,RE,SE,EE;for(Mx=[2,3,5,6,7,8,10],mx=0,dn=Mx.length;mx<dn;mx++)for(a=Mx[mx],Ax=[2,3,5,6,7,8,10],s=0,Cn=Ax.length;s<Cn;s++)c=Ax[s],a!==c&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" ) / "+c),n=a/c,Xx=Math.sqrt(a)/c,Lx=approxRadicals(Xx),qx=Lx[2]*Math.sqrt(Lx[3])/Lx[4],Math.abs(Xx-qx)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" ) / "+c+" . obtained: "+Lx));for(Nx=[2,3,5,6,7,8,10],d=0,In=Nx.length;d<In;d++)for(a=Nx[d],Ux=[2,3,5,6,7,8,10],tn=0,ix=Ux.length;tn<ix;tn++)c=Ux[tn],a!==c&&(console.log("testapproxRadicals testing with 4 digits: 1 * sqrt( "+a+" ) / "+c),n=a/c,xx=Math.sqrt(a)/c,Xx=xx.toFixed(4),Lx=approxRadicals(Xx),qx=Lx[2]*Math.sqrt(Lx[3])/Lx[4],Math.abs(xx-qx)>1e-15&&console.log("fail testapproxRadicals with 4 digits: 1 * sqrt( "+a+" ) / "+c+" . obtained: "+Lx));for(Rx=[2,3,5,6,7,8,10],cx=0,ax=Rx.length;cx<ax;cx++)for(a=Rx[cx],Ox=[2,3,5,6,7,8,10],fx=0,ox=Ox.length;fx<ox;fx++)c=Ox[fx],a!==c&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" / "+c+" )"),n=a/c,Xx=Math.sqrt(a/c),Lx=approxRadicals(Xx),Lx!=null&&(qx=Lx[2]*Math.sqrt(Lx[3]/Lx[4]),Lx[1]===approx_radicalOfRatio&&Math.abs(Xx-qx)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" / "+c+" ) . obtained: "+Lx)));for(Px=[1,2,3,5,6,7,8,10],vx=0,sx=Px.length;vx<sx;vx++)for(a=Px[vx],$x=[1,2,3,5,6,7,8,10],_x=0,ux=$x.length;_x<ux;_x++)c=$x[_x],!(a===1&&c===1)&&(console.log("testapproxRadicals testing with 4 digits:: 1 * sqrt( "+a+" / "+c+" )"),n=a/c,xx=Math.sqrt(a/c),Xx=xx.toFixed(4),Lx=approxRadicals(Xx),qx=Lx[2]*Math.sqrt(Lx[3]/Lx[4]),Lx[1]===approx_radicalOfRatio&&Math.abs(xx-qx)>1e-15&&console.log("fail testapproxRadicals with 4 digits:: 1 * sqrt( "+a+" / "+c+" ) . obtained: "+Lx));for(a=Tx=1;Tx<=5;a=++Tx)for(c=jx=1;jx<=5;c=++jx)console.log("testApproxAll testing: 1 * log("+a+" ) / "+c),n=a/c,Xx=Math.log(a)/c,Lx=approxAll(Xx),qx=Lx[2]*Math.log(Lx[3])/Lx[4],Math.abs(Xx-qx)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" ) / "+c+" . obtained: "+Lx);for(a=Vx=1;Vx<=5;a=++Vx)for(c=Wx=1;Wx<=5;c=++Wx)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" ) / "+c),n=a/c,xx=Math.log(a)/c,Xx=xx.toFixed(4),Lx=approxAll(Xx),qx=Lx[2]*Math.log(Lx[3])/Lx[4],Math.abs(xx-qx)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" ) / "+c+" . obtained: "+Lx);for(a=lE=1;lE<=5;a=++lE)for(c=CE=1;CE<=5;c=++CE)console.log("testApproxAll testing: 1 * log("+a+" / "+c+" )"),n=a/c,Xx=Math.log(a/c),Lx=approxAll(Xx),qx=Lx[2]*Math.log(Lx[3]/Lx[4]),Math.abs(Xx-qx)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" / "+c+" ) . obtained: "+Lx);for(a=SE=1;SE<=5;a=++SE)for(c=l=1;l<=5;c=++l)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" / "+c+" )"),n=a/c,xx=Math.log(a/c),Xx=xx.toFixed(4),Lx=approxAll(Xx),qx=Lx[2]*Math.log(Lx[3]/Lx[4]),Math.abs(xx-qx)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" / "+c+" ) . obtained: "+Lx);for(a=Ct=1;Ct<=2;a=++Ct)for(c=on=1;on<=12;c=++on)console.log("testApproxAll testing: 1 * (e ^ "+a+" ) / "+c),n=a/c,Xx=Math.pow(Math.E,a)/c,Lx=approxAll(Xx),qx=Lx[2]*Math.pow(Math.E,Lx[3])/Lx[4],Math.abs(Xx-qx)>1e-15&&console.log("fail testApproxAll: 1 * (e ^ "+a+" ) / "+c+" . obtained: "+Lx);for(a=hx=1;hx<=2;a=++hx)for(c=dx=1;dx<=12;c=++dx)console.log("approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ "+a+" ) / "+c),n=a/c,xx=Math.pow(Math.E,a)/c,Xx=xx.toFixed(4),Lx=approxRationalsOfPowersOfE(Xx),qx=Lx[2]*Math.pow(Math.E,Lx[3])/Lx[4],Math.abs(xx-qx)>1e-15&&console.log("fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ "+a+" ) / "+c+" . obtained: "+Lx);for(a=bx=1;bx<=2;a=++bx)for(c=Ex=1;Ex<=12;c=++Ex)console.log("testApproxAll testing: 1 * pi ^ "+a+" / "+c),n=a/c,Xx=Math.pow(Math.PI,a)/c,Lx=approxAll(Xx),qx=Lx[2]*Math.pow(Math.PI,Lx[3])/Lx[4],Math.abs(Xx-qx)>1e-15&&console.log("fail testApproxAll: 1 * pi ^ "+a+" / "+c+" ) . obtained: "+Lx);for(a=Cx=1;Cx<=2;a=++Cx)for(c=Hx=1;Hx<=12;c=++Hx)console.log("approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ "+a+" / "+c),n=a/c,xx=Math.pow(Math.PI,a)/c,Xx=xx.toFixed(4),Lx=approxRationalsOfPowersOfPI(Xx),qx=Lx[2]*Math.pow(Math.PI,Lx[3])/Lx[4],Math.abs(xx-qx)>1e-15&&console.log("fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ "+a+" / "+c+" ) . obtained: "+Lx);for(a=nE=1;nE<=4;a=++nE)for(c=tE=1;tE<=4;c=++tE)console.log("testApproxAll testing: 1 * sin( "+a+"/"+c+" )"),n=a/c,Xx=Math.sin(n),Lx=approxAll(Xx),zx=Lx[3]/Lx[4],qx=Lx[2]*Math.sin(zx),Math.abs(Xx-qx)>1e-15&&console.log("fail testApproxAll: 1 * sin( "+a+"/"+c+" ) . obtained: "+Lx);for(a=iE=1;iE<=4;a=++iE)for(c=RE=1;RE<=4;c=++RE)console.log("testApproxAll testing with 5 digits: 1 * sin( "+a+"/"+c+" )"),n=a/c,xx=Math.sin(n),Xx=xx.toFixed(5),Lx=approxAll(Xx),Lx==null&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+c+" ) . obtained:  undefined "),zx=Lx[3]/Lx[4],qx=Lx[2]*Math.sin(zx),t=Math.abs(xx-qx),t>1e-14&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+c+" ) . obtained: "+Lx+" error: "+t);for(a=EE=1;EE<=4;a=++EE)for(c=u=1;u<=4;c=++u)console.log("testApproxAll testing with 4 digits: 1 * sin( "+a+"/"+c+" )"),n=a/c,xx=Math.sin(n),Xx=xx.toFixed(4),Lx=approxAll(Xx),Lx==null&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+c+" ) . obtained:  undefined "),zx=Lx[3]/Lx[4],qx=Lx[2]*Math.sin(zx),t=Math.abs(xx-qx),t>1e-14&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+c+" ) . obtained: "+Lx+" error: "+t);for(Xx=0,approxAll(Xx)[0]!=="0"&&console.log("fail testApproxAll: 0"),Xx=0,approxAll(Xx)[0]!=="0"&&console.log("fail testApproxAll: 0.0"),Xx=0,approxAll(Xx)[0]!=="0"&&console.log("fail testApproxAll: 0.00"),Xx=0,approxAll(Xx)[0]!=="0"&&console.log("fail testApproxAll: 0.000"),Xx=0,approxAll(Xx)[0]!=="0"&&console.log("fail testApproxAll: 0.0000"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1.0"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1.00"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1.000"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1.00000"),Xx=Math.sqrt(2),approxAll(Xx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(2)"),Xx=1.41,approxAll(Xx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: 1.41"),Xx=1.4,approxRadicals(Xx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail approxRadicals: 1.4"),Xx=.6,approxLogs(Xx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.6"),Xx=.69,approxLogs(Xx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.69"),Xx=.7,approxLogs(Xx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.7"),Xx=1.09,approxLogs(Xx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxLogs: 1.09"),Xx=1.09,approxAll(Xx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.09"),Xx=1.098,approxAll(Xx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.098"),Xx=1.1,approxAll(Xx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.1"),Xx=1.11,approxAll(Xx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.11"),Xx=Math.sqrt(3),approxAll(Xx)[0]!=="1 * sqrt( 3 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(3)"),Xx=1,approxAll(Xx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Xx=3.141592,approxAll(Xx)[0]!=="1 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 3.141592"),Xx=31.41592,approxAll(Xx)[0]!=="10 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31.41592"),Xx=314.1592,approxAll(Xx)[0]!=="100 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 314.1592"),Xx=3141592653589793e-8,approxAll(Xx)[0]!=="10000000 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31415926.53589793"),Xx=Math.sqrt(2),approxTrigonometric(Xx)[0]!=="2 * sin( 1/4 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(2)"),Xx=Math.sqrt(3),approxTrigonometric(Xx)[0]!=="2 * sin( 1/3 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(3)"),Xx=(Math.sqrt(6)-Math.sqrt(2))/4,approxAll(Xx)[0]!=="1 * sin( 1/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),Xx=Math.sqrt(2-Math.sqrt(2))/2,approxAll(Xx)[0]!=="1 * sin( 1/8 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),Xx=(Math.sqrt(6)+Math.sqrt(2))/4,approxAll(Xx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),Xx=Math.sqrt(2+Math.sqrt(3))/2,approxAll(Xx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),Xx=(Math.sqrt(5)-1)/4,approxAll(Xx)[0]!=="1 * sin( 1/10 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),Xx=Math.sqrt(10-2*Math.sqrt(5))/4,approxAll(Xx)[0]!=="1 * sin( 1/5 * pi )"&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),Xx=Math.sin(Math.PI/7),approxAll(Xx)[0]!=="1 * sin( 1/7 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),Xx=Math.sin(Math.PI/9),approxAll(Xx)[0]!=="1 * sin( 1/9 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),Xx=1836.15267,approxRationalsOfPowersOfPI(Xx)[0]!=="6 * (pi ^ 5 ) / 1 )"&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267"),a=ar=1;ar<=13;a=++ar)for(c=en=1;en<=13;c=++en)console.log("approxTrigonometric testing: 1 * sin( "+a+"/"+c+" * pi )"),n=a/c,Xx=Math.sin(Math.PI*n),Lx=approxTrigonometric(Xx),zx=Lx[3]/Lx[4],qx=Lx[2]*Math.sin(Math.PI*zx),Math.abs(Xx-qx)>1e-15&&console.log("fail approxTrigonometric: 1 * sin( "+a+"/"+c+" * pi ) . obtained: "+Lx);for(a=cn=1;cn<=13;a=++cn)for(c=gx=1;gx<=13;c=++gx)a===5&&c===11||a===6&&c===11||(console.log("approxTrigonometric testing with 4 digits: 1 * sin( "+a+"/"+c+" * pi )"),n=a/c,xx=Math.sin(Math.PI*n),Xx=xx.toFixed(4),Lx=approxTrigonometric(Xx),zx=Lx[3]/Lx[4],qx=Lx[2]*Math.sin(Math.PI*zx),t=Math.abs(xx-qx),t>1e-14&&console.log("fail approxTrigonometric with 4 digits: 1 * sin( "+a+"/"+c+" * pi ) . obtained: "+Lx+" error: "+t));return console.log("testApprox done")},$.approxRadicals=approxRadicals,$.approxRationalsOfLogs=approxRationalsOfLogs,$.approxAll=approxAll,$.testApprox=testApprox,Eval_arccos=function(){return push(cadr(p1)),Eval(),arccos()},arccos=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.acos(p1.d),n&&stop("arccos function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI/4):(push_rational(1,4),push_symbol(PI),multiply()),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI*3/4):(push_rational(3,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(5*Math.PI/6):(push_rational(5,6),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCCOS),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(Math.PI):push_symbol(PI);break;case-1:evaluatingAsFloats?push_double(Math.PI*2/3):(push_rational(2,3),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;case 1:evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(0):push(zero);break;default:push_symbol(ARCCOS),push(p1),list(2)}return restore()},Eval_arccosh=function(){return push(cadr(p1)),Eval(),arccosh()},arccosh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(COSH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t<1&&stop("arccosh function argument is less than 1.0"),t=Math.log(t+Math.sqrt(t*t-1)),push_double(t),restore();return}if(isplusone(p1)){push(zero),restore();return}return push_symbol(ARCCOSH),push(p1),list(2),restore()},Eval_arcsin=function(){return push(cadr(p1)),Eval(),arcsin()},arcsin=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(SIN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.asin(p1.d),n&&stop("arcsin function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,4),push_symbol(PI),multiply(),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(-Math.PI/4):(push_rational(-1,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(-Math.PI/3):(push_rational(-1,3),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCSIN),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(-Math.PI/2):(push_rational(-1,2),push_symbol(PI),multiply());break;case-1:evaluatingAsFloats?push_double(-Math.PI/6):(push_rational(-1,6),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;default:push_symbol(ARCSIN),push(p1),list(2)}return restore()},Eval_arcsinh=function(){return push(cadr(p1)),Eval(),arcsinh()},arcsinh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(SINH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t=Math.log(t+Math.sqrt(t*t+1)),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCSINH),push(p1),list(2),restore()},Eval_arctan=function(){return push(cadr(p1)),Eval(),arctan()},arctan=function(){var t,n;if(t=0,save(),p1=pop(),car(p1)===symbol(TAN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.atan(p1.d),n&&stop("arctan function error"),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}if(isnegative(p1)){push(p1),negate(),arctan(),negate(),restore();return}if(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&(push(p1),numerator(),p2=pop(),push(p1),denominator(),p3=pop(),car(p2)===symbol(SIN)&&car(p3)===symbol(COS)&&equal(cadr(p2),cadr(p3)))){push(cadr(p2)),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),-1,2)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,3)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),3)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,6),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(equaln(p1,1)){push_rational(1,4),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),1,2)){push_rational(1,3),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}return push_symbol(ARCTAN),push(p1),list(2),restore()},Eval_arctanh=function(){return push(cadr(p1)),Eval(),arctanh()},arctanh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(TANH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,(t<-1||t>1)&&stop("arctanh function argument is not in the interval [-1,1]"),t=Math.log((1+t)/(1-t))/2,push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCTANH),push(p1),list(2),restore()},DEBUG_ARG=!1,Eval_arg=function(){return push(cadr(p1)),Eval(),arg()},arg=function(){return save(),p1=pop(),push(p1),numerator(),yyarg(),push(p1),denominator(),yyarg(),subtract(),restore()},yyarg=function(){if(save(),p1=pop(),ispositivenumber(p1)||p1===symbol(PI))isdouble(p1)||evaluatingAsFloats?push_double(0):push_integer(0);else if(isnegativenumber(p1))isdouble(p1)||evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),negate();else if(issymbol(p1))push_symbol(ARG),push(p1),list(2);else if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),push(caddr(p1)),multiply();else if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))push(caddr(p1)),imag();else if(car(p1)===symbol(POWER)&&isoneovertwo(caddr(p1))){if(DEBUG_ARG&&console.log("arg of a sqrt: "+p1),DEBUG_ARG)debugger;push(cadr(p1)),arg(),DEBUG_ARG&&console.log(" = 1/2 * "+stack[tos-1]),push(caddr(p1)),multiply()}else if(car(p1)===symbol(MULTIPLY))for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),arg(),add(),p1=cdr(p1);else car(p1)===symbol(ADD)?(push(p1),rect(),p1=pop(),push(p1),real(),p2=pop(),push(p1),imag(),p3=pop(),isZeroAtomOrTensor(p2)?(evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),isnegative(p3)&&negate()):(push(p3),push(p2),divide(),arctan(),isnegative(p2)&&(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),isnegative(p3)?subtract():add()))):isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(ARG),push(p1),list(2)):push_integer(0);return restore()},bake=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,l=0,u=0,expanding++,save(),p1=pop(),n=ispolyexpandedform(p1,symbol(SYMBOL_S)),a=ispolyexpandedform(p1,symbol(SYMBOL_T)),s=ispolyexpandedform(p1,symbol(SYMBOL_X)),l=ispolyexpandedform(p1,symbol(SYMBOL_Y)),u=ispolyexpandedform(p1,symbol(SYMBOL_Z)),n===1&&a===0&&s===0&&l===0&&u===0)p2=symbol(SYMBOL_S),bake_poly();else if(n===0&&a===1&&s===0&&l===0&&u===0)p2=symbol(SYMBOL_T),bake_poly();else if(n===0&&a===0&&s===1&&l===0&&u===0)p2=symbol(SYMBOL_X),bake_poly();else if(n===0&&a===0&&s===0&&l===1&&u===0)p2=symbol(SYMBOL_Y),bake_poly();else if(n===0&&a===0&&s===0&&l===0&&u===1)p2=symbol(SYMBOL_Z),bake_poly();else if(iscons(p1)&&car(p1)!==symbol(FOR)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),bake(),p1=cdr(p1);list(tos-t)}else push(p1);return restore(),expanding--},polyform=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2))bake_poly();else if(iscons(p1)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),polyform(),p1=cdr(p1);list(tos-t)}else push(p1);return restore()},bake_poly=function(){var t,n,a,s,l,u;for(n=0,a=0,s=0,l=0,t=tos,s=coeff(p2,p1),n=tos,a=u=s-1;u>=0;a=u+=-1)p1=stack[t+a],bake_poly_term(a);return l=tos-n,l>1&&(list(l),push(symbol(ADD)),swap(),cons()),p1=pop(),moveTos(tos-s),push(p1)},bake_poly_term=function(t){var n,a;if(n=0,a=0,!isZeroAtomOrTensor(p1)){if(t===0){if(car(p1)===symbol(ADD))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return}if(n=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else equaln(p1,1)||push(p1);if(t===1?push(p2):(push(symbol(POWER)),push(p2),push_integer(t),list(3)),a=tos-n,a>1)return list(a),push(symbol(MULTIPLY)),swap(),cons()}},Eval_besselj=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),besselj()},besselj=function(){return save(),yybesselj(),restore()},yybesselj=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=jn(n,p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)&&isZeroAtomOrTensor(p2)){push_integer(1);return}if(isZeroAtomOrTensor(p1)&&!isNaN(n)){push_integer(0);return}if(p2.k===NUM&&MEQUAL(p2.q.b,2)){if(MEQUAL(p2.q.a,1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),sine(),multiply();return}if(MEQUAL(p2.q.a,-1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),cosine(),multiply();return}push_integer(MSIGN(p2.q.a)),p3=pop(),push_integer(2),push(p1),divide(),push(p2),push(p3),subtract(),multiply(),push(p1),push(p2),push(p3),subtract(),besselj(),multiply(),push(p1),push(p2),push_integer(2),push(p3),multiply(),subtract(),besselj(),subtract();return}if(isnegativeterm(p1)){push(p1),negate(),push(p2),power(),push(p1),push(p2),negate(),power(),multiply(),push_symbol(BESSELJ),push(p1),negate(),push(p2),list(3),multiply();return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELJ),push(p1),push(p2),negate(),list(3),multiply();return}return push(symbol(BESSELJ)),push(p1),push(p2),list(3)},Eval_bessely=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),bessely()},bessely=function(){return save(),yybessely(),restore()},yybessely=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=yn(n,p1.d),push_double(t);return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELY),push(p1),push(p2),negate(),list(3),multiply();return}push_symbol(BESSELY),push(p1),push(p2),list(3)},mint=function(t){return bigInt(t)},isSmall=function(t){return t.geq(Number.MIN_SAFE_INTEGER)&&t.leq(Number.MAX_SAFE_INTEGER)},setSignTo=function(t,n){if(t.isPositive()){if(n<0)return t.multiply(bigInt(-1))}else if(n>0)return t.multiply(bigInt(-1));return t},makeSignSameAs=function(t,n){if(t.isPositive()){if(n.isNegative())return t.multiply(bigInt(-1))}else if(n.isPositive())return t.multiply(bigInt(-1));return t},makePositive=function(t){return t.isNegative()?t.multiply(bigInt(-1)):t},add_numbers=function(){var t,n,a;if(t=1,n=1,isrational(stack[tos-1])&&isrational(stack[tos-2])){qadd();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),a=t+n,push_double(a),restore()},multiply_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qmul();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t*n),restore()},divide_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qdiv();return}return save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("divide by zero"),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t/n),restore()},invert_number=function(){var t,n;if(save(),p1=pop(),isZeroAtomOrTensor(p1)&&stop("divide by zero"),isdouble(p1)){push_double(1/p1.d),restore();return}return t=bigInt(p1.q.a),n=bigInt(p1.q.b),n=makeSignSameAs(n,t),t=setSignTo(t,1),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=t,push(p1),restore()},compare_rationals=function(t,n){var a,s,l;return l=0,a=mmul(t.q.a,n.q.b),s=mmul(t.q.b,n.q.a),l=mcmp(a,s),l},compare_numbers=function(t,n){var a,s;return a=0,s=0,isrational(t)&&isrational(n)?compare_rationals(t,n):(isdouble(t)?a=t.d:a=convert_rational_to_double(t),isdouble(n)?s=n.d:s=convert_rational_to_double(n),a<s?-1:a>s?1:0)},negate_number=function(){if(save(),p1=pop(),isZeroAtomOrTensor(p1)){push(p1),restore();return}switch(p1.k){case NUM:p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a.multiply(bigInt.minusOne)),p2.q.b=bigInt(p1.q.b),push(p2);break;case DOUBLE:push_double(-p1.d);break;default:stop("bug caught in mp_negate_number")}return restore()},bignum_truncate=function(){var t;return save(),p1=pop(),t=mdiv(p1.q.a,p1.q.b),p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=bigInt(1),push(p1),restore()},mp_numerator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a),p2.q.b=bigInt(1),push(p2),restore()},mp_denominator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.b),p2.q.b=bigInt(1),push(p2),restore()},bignum_power_number=function(t){var n,a,s;return save(),p1=pop(),n=mpow(p1.q.a,Math.abs(t)),a=mpow(p1.q.b,Math.abs(t)),t<0&&(s=n,n=a,a=s,n=makeSignSameAs(n,a),a=setSignTo(a,1)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=a,push(p1),restore()},convert_rational_to_double=function(t){var n,a;if(t.q==null)debugger;return n=t.q.a.divmod(t.q.b),a=n.quotient+n.remainder/t.q.b.toJSNumber(),a},new_integer=function(t){var n;return n=new U,n.k=NUM,n.q.a=bigInt(t),n.q.b=bigInt(1),n},push_integer=function(t){return DEBUG&&console.log("pushing integer "+t),push(new_integer(t))},push_double=function(t){return save(),p1=new U,p1.k=DOUBLE,p1.d=t,push(p1),restore()},push_rational=function(t,n){var a;return a=new U,a.k=NUM,a.q.a=bigInt(t),a.q.b=bigInt(n),push(a)},pop_integer=function(){var t;switch(t=NaN,save(),p1=pop(),p1.k){case NUM:isinteger(p1)&&isSmall(p1.q.a)&&(t=p1.q.a.toJSNumber());break;case DOUBLE:DEBUG&&console.log("popping integer but double is found"),Math.floor(p1.d)===p1.d&&(DEBUG&&console.log("...altough it's an integer"),t=p1.d)}return restore(),t},bignum_scan_integer=function(t){var n,a,s;return save(),a=0,s=t[a],(s==="+"||s==="-")&&a++,n=bigInt(t.substring(a)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=bigInt(1),push(p1),s==="-"&&negate(),restore()},bignum_scan_float=function(t){return push_double(parseFloat(t))},print_number=function(t,n){var a,s,l;switch(s="",l="",t.k){case NUM:a=t.q.a.toString(),n||a[0]==="-"&&(a=a.substring(1)),printMode===PRINTMODE_LATEX&&isfraction(t)&&(a="\\frac{"+a+"}{"),s+=a,isfraction(t)&&(printMode!==PRINTMODE_LATEX&&(s+="/"),l=t.q.b.toString(),printMode===PRINTMODE_LATEX&&(l+="}"),s+=l);break;case DOUBLE:a=doubleToReasonableString(t.d),n||a[0]==="-"&&(a=a.substring(1)),s+=a}return s},gcd_numbers=function(){return save(),p2=pop(),p1=pop(),p3=new U,p3.k=NUM,p3.q.a=mgcd(p1.q.a,p2.q.a),p3.q.b=mgcd(p1.q.b,p2.q.b),p3.q.a=setSignTo(p3.q.a,1),push(p3),restore()},pop_double=function(){var t;switch(t=0,save(),p1=pop(),p1.k){case NUM:t=convert_rational_to_double(p1);break;case DOUBLE:t=p1.d;break;default:t=0}return restore(),t},bignum_float=function(){var t;return t=0,t=convert_rational_to_double(pop()),push_double(t)},bignum_factorial=function(t){return save(),p1=new U,p1.k=NUM,p1.q.a=__factorial(t),p1.q.b=bigInt(1),push(p1),restore()},__factorial=function(t){var n,a,s,l,u,c;if(s=0,t===0||t===1)return n=bigInt(1),n;if(n=bigInt(2),a=bigInt(0),3<=t)for(s=l=3,u=t;3<=u?l<=u:l>=u;s=3<=u?++l:--l)a=bigInt(s),c=mmul(n,a),n=c;return n},Eval_binomial=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),binomial()},binomial=function(){return save(),ybinomial(),restore()},ybinomial=function(){if(p2=pop(),p1=pop(),BINOM_check_args()===0){push(zero);return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide()},BINOM_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_ceiling=function(){return push(cadr(p1)),Eval(),ceiling()},ceiling=function(){return save(),yyceiling(),restore()},yyceiling=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(CEILING),push(p1),list(2);return}if(isdouble(p1)){t=Math.ceil(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?1:(push_integer(1),add())},Eval_choose=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),choose()},choose=function(){if(save(),p2=pop(),p1=pop(),choose_check_args()===0){push_integer(0),restore();return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide(),restore()},choose_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_circexp=function(){return push(cadr(p1)),Eval(),circexp(),Eval()},circexp=function(){var t,n,a,s;if(n=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),expcos(),restore();return}if(car(p1)===symbol(SIN)){push(cadr(p1)),expsin(),restore();return}if(car(p1)===symbol(TAN)){p1=cadr(p1),push(imaginaryunit),push(p1),multiply(),exponential(),p2=pop(),push(imaginaryunit),push(p1),multiply(),negate(),exponential(),p3=pop(),push(p3),push(p2),subtract(),push(imaginaryunit),multiply(),push(p2),push(p3),add(),divide(),restore();return}if(car(p1)===symbol(COSH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),add(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(SINH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),subtract(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(TANH)){p1=cadr(p1),push(p1),push_integer(2),multiply(),exponential(),p1=pop(),push(p1),push_integer(1),subtract(),push(p1),push_integer(1),add(),divide(),restore();return}if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),circexp(),p1=cdr(p1);list(tos-t),restore();return}if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,s=p1.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)push(p1.tensor.elem[n]),circexp(),p1.tensor.elem[n]=pop();push(p1),restore();return}return push(p1),restore()},Eval_clearall=function(){return do_clearall(),push(symbol(NIL))},do_clearall=function(){return test_flag===0&&clear_term(),do_clearPatterns(),clear_symbols(),defn(),codeGen=!1},clearRenamedVariablesToAvoidBindingToExternalScope=function(){var t,n,a,s;for(s=[],t=n=0,a=symtab.length;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t].printname.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")!==-1?(symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],s.push(isSymbolReclaimable[t]=!0)):s.push(void 0);return s},Eval_clear=function(){var t,n;for(p2=cdr(p1);iscons(p2);)n=car(p2),n.k!==SYM&&stop("symbol error"),t=symtab.indexOf(n),symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],isSymbolReclaimable[t]=!0,p2=cdr(p2);return push(symbol(NIL))},DEBUG_CLOCKFORM=!1,Eval_clock=function(){return push(cadr(p1)),Eval(),clockform()},clockform=function(){return save(),p1=pop(),push(p1),abs(),DEBUG_CLOCKFORM&&console.log("clockform: abs of "+p1+" : "+stack[tos-1]),push_symbol(POWER),push_integer(-1),push(p1),arg(),DEBUG_CLOCKFORM&&console.log("clockform: arg of "+p1+" : "+stack[tos-1]),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),divide(),DEBUG_CLOCKFORM&&console.log("clockform: divide : "+stack[tos-1]),list(3),DEBUG_CLOCKFORM&&console.log("clockform: power : "+stack[tos-1]),multiply(),DEBUG_CLOCKFORM&&console.log("clockform: multiply : "+stack[tos-1]),restore()},Eval_coeff=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p3=pop(),p2=pop(),p1=pop(),p3===symbol(NIL)&&(p3=p2,p2=symbol(SYMBOL_X)),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter()},coeff=function(t,n){var a,s,l,u;for(DEBUG&&console.log("coeff: "+t+" "+n),a=0;;){if(push(n),push(t),push(zero),subst(),Eval(),s=pop(),push(s),a++,push(n),push(s),subtract(),l=pop(),equal(l,zero))return DEBUG&&console.log("coeff: result: "+a),a;push(l),push(t),u=expanding,expanding=1,divide(),expanding=u,n=pop()}},Eval_cofactor=function(){var t,n,a;return t=0,n=0,a=0,push(cadr(p1)),Eval(),p2=pop(),istensor(p2)&&p2.tensor.ndim===2&&p2.tensor.dim[0]===p2.tensor.dim[1]||stop("cofactor: 1st arg: square matrix expected"),a=p2.tensor.dim[0],push(caddr(p1)),Eval(),t=pop_integer(),(t<1||t>a)&&stop("cofactor: 2nd arg: row index expected"),push(cadddr(p1)),Eval(),n=pop_integer(),(n<1||n>a)&&stop("cofactor: 3rd arg: column index expected"),cofactor(p2,a,t-1,n-1)},cofactor=function(t,n,a,s){var l,u,c,d,Ct,ar;for(l=0,c=0,l=d=0,Ct=n;0<=Ct?d<Ct:d>Ct;l=0<=Ct?++d:--d)for(c=u=0,ar=n;0<=ar?u<ar:u>ar;c=0<=ar?++u:--u)l!==a&&c!==s&&push(t.tensor.elem[n*l+c]);if(determinant(n-1),(a+s)%2)return negate()},Eval_condense=function(){return push(cadr(p1)),Eval(),Condense()},Condense=function(){var t;return t=expanding,expanding=0,save(),yycondense(),restore(),expanding=t},yycondense=function(){if(p1=pop(),car(p1)!==symbol(ADD)){push(p1);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),DEBUG&&console.log("calculating gcd between: "+stack[tos-1]+" and "+stack[tos-2]),gcd(),DEBUG&&console.log("partial gcd: "+stack[tos-1]),p3=cdr(p3);for(DEBUG&&console.log("condense: this is the gcd of all the terms: "+stack[tos-1]),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply_noexpand(),add(),p3=cdr(p3);return yyexpand(),push(p2),divide()},Eval_conj=function(){return push(cadr(p1)),Eval(),p1=pop(),push(p1),Find(p1,imaginaryunit)?conjugate():(polar(),conjugate(),clockform())},conjugate=function(){return push(imaginaryunit),push(imaginaryunit),negate(),subst(),Eval()},consCount=0,cons=function(){var t;if(consCount++,DEBUG&&console.log("cons tos: "+tos+" # "+consCount),t=new U,t.k=CONS,t.cons.cdr=pop(),t===t.cons.cdr){debugger;console.log("something wrong p == its cdr")}return t.cons.car=pop(),push(t)},Eval_contract=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),contract()},contract=function(){return save(),yycontract(),restore()},yycontract=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx;if(l=0,u=0,d=0,ar=0,en=0,on=0,dn=0,In=0,ix=0,n=[],a=[],p3=pop(),p2=pop(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("contract: tensor expected, 1st arg is not a tensor"),push(zero);return}for(push(p2),en=pop_integer(),push(p3),on=pop_integer(),In=p1.tensor.ndim,(en<1||en>In||on<1||on>In||en===on||p1.tensor.dim[en-1]!==p1.tensor.dim[on-1])&&stop("contract: index out of range"),en--,on--,dn=p1.tensor.dim[en],ix=1,u=ax=0,sx=In;0<=sx?ax<sx:ax>sx;u=0<=sx?++ax:--ax)u!==en&&u!==on&&(ix*=p1.tensor.dim[u]);for(p2=alloc_tensor(ix),p2.tensor.ndim=In-2,d=0,u=c=0,ux=In;0<=ux?c<ux:c>ux;u=0<=ux?++c:--c)u!==en&&u!==on&&(p2.tensor.dim[d++]=p1.tensor.dim[u]);for(t=p1.tensor.elem,s=p2.tensor.elem,u=Ct=0,cx=In;0<=cx?Ct<cx:Ct>cx;u=0<=cx?++Ct:--Ct)n[u]=0,a[u]=p1.tensor.dim[u];for(u=tn=0,hx=ix;0<=hx?tn<hx:tn>hx;u=0<=hx?++tn:--tn){for(push(zero),d=cn=0,gx=dn;0<=gx?cn<gx:cn>gx;d=0<=gx?++cn:--cn){for(n[en]=d,n[on]=d,l=0,ar=Cn=0,fx=In;0<=fx?Cn<fx:Cn>fx;ar=0<=fx?++Cn:--Cn)l=l*a[ar]+n[ar];push(t[l]),add()}for(s[u]=pop(),d=ox=dx=In-1;dx<=0?ox<=0:ox>=0;d=dx<=0?++ox:--ox)if(!(d===en||d===on)){if(++n[d]<a[d])break;n[d]=0}}return push(ix===1?s[0]:p2)},Eval_cos=function(){return push(cadr(p1)),Eval(),cosine()},cosine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?cosine_of_angle_sum():cosine_of_angle(),restore()},cosine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),cosine(),push(p4),cosine(),multiply(),push(p3),sine(),push(p4),sine(),multiply(),subtract();return}p2=cdr(p2)}return cosine_of_angle()},cosine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCCOS)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cos(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)&&(push(p1),negate(),p1=pop()),car(p1)===symbol(ARCTAN)){push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(COS)),push(p1),list(2);return}switch(n%360){case 90:case 270:return push_integer(0);case 60:case 300:return push_rational(1,2);case 120:case 240:return push_rational(-1,2);case 45:case 315:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 135:case 225:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 30:case 330:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 210:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 0:return push_integer(1);case 180:return push_integer(-1);default:return push(symbol(COS)),push(p1),list(2)}},Eval_cosh=function(){return push(cadr(p1)),Eval(),ycosh()},ycosh=function(){return save(),yycosh(),restore()},yycosh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCCOSH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cosh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}return push_symbol(COSH),push(p1),list(2)},Eval_decomp=function(){var t;return save(),console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!"),t=tos,push(symbol(NIL)),push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),decomp(!1),list(tos-t),restore()},pushTryNotToDuplicate=function(t){if(tos>0&&(DEBUG&&console.log("comparing "+t+" to: "+stack[tos-1]),equal(t,stack[tos-1]))){DEBUG&&console.log("skipping "+t+" because it's already on stack ");return}return push(t)},decomp=function(t){if(save(),p2=pop(),p1=pop(),DEBUG&&console.log("DECOMPOSING "+p1),t){if(!iscons(p1)){DEBUG&&console.log(" ground thing: "+p1),pushTryNotToDuplicate(p1),restore();return}}else if(Find(p1,p2)===0){DEBUG&&console.log(" entire expression is constant"),pushTryNotToDuplicate(p1),restore();return}if(isadd(p1)){decomp_sum(t),restore();return}if(ismultiply(p1)){decomp_product(t),restore();return}for(DEBUG&&console.log(" naive decomp"),p3=cdr(p1),DEBUG&&console.log("startig p3: "+p3);iscons(p3);)t&&push(car(p3)),DEBUG&&console.log("recursive decomposition"),push(car(p3)),DEBUG&&console.log("car(p3): "+car(p3)),push(p2),DEBUG&&console.log("p2: "+p2),decomp(t),p3=cdr(p3);return restore()},decomp_sum=function(t){var n;for(DEBUG&&console.log(" decomposing the sum "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return add_all(tos-n),p3=pop(),pushTryNotToDuplicate(p3),push(p3),negate()},decomp_product=function(t){var n;for(DEBUG&&console.log(" decomposing the product "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return multiply_all(tos-n)},define_user_function=function(){return p3=caadr(p1),p4=cdadr(p1),p5=caddr(p1),issymbol(p3)||stop("function name?"),car(p5)===symbol(EVAL)&&(push(cadr(p5)),Eval(),p5=pop()),push_symbol(FUNCTION),push(p5),push(p4),list(3),p5=pop(),set_binding(p3,p5),push_symbol(NIL)},Eval_function_reference=function(){return push(p1)},Eval_defint=function(){for(push(cadr(p1)),Eval(),p2=pop(),p1=cddr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1),Eval(),p3=pop(),push(car(p1)),p1=cdr(p1),Eval(),p4=pop(),push(car(p1)),p1=cdr(p1),Eval(),p5=pop(),push(p2),push(p3),integral(),p2=pop(),push(p2),push(p3),push(p5),subst(),Eval(),push(p2),push(p3),push(p4),subst(),Eval(),subtract(),p2=pop();return push(p2)},Eval_degree=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),degree()},degree=function(){return save(),p2=pop(),p1=pop(),p3=zero,yydegree(p1),push(p3),restore()},yydegree=function(t){var n;if(equal(t,p2)){if(isZeroAtomOrTensor(p3))return p3=one}else if(car(t)===symbol(POWER)){if(equal(cadr(t),p2)&&isNumericAtom(caddr(t))&&lessp(p3,caddr(t)))return p3=caddr(t)}else if(iscons(t)){for(t=cdr(t),n=[];iscons(t);)yydegree(car(t)),n.push(t=cdr(t));return n}},Eval_denominator=function(){return push(cadr(p1)),Eval(),denominator()},denominator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),denominator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_denominator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?(push(n),reciprocate()):push(one)},Eval_derivative=function(){var t,n,a,s,l;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth derivative: check n")):n=1,push(p3),n>=0)for(a=0,s=n;0<=s?a<s:a>s;0<=s?++a:--a)push(p4),derivative();else for(n=-n,t=0,l=n;0<=l?t<l:t>l;0<=l?++t:--t)push(p4),integral();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},derivative=function(){return save(),p2=pop(),p1=pop(),isNumericAtom(p2)&&stop("undefined function"),istensor(p1)?istensor(p2)?d_tensor_tensor():d_tensor_scalar():istensor(p2)?d_scalar_tensor():d_scalar_scalar(),restore()},d_scalar_scalar=function(){return issymbol(p2)?d_scalar_scalar_1():(push(p1),push(p2),push(symbol(SECRETX)),subst(),push(symbol(SECRETX)),derivative(),push(symbol(SECRETX)),push(p2),subst())},d_scalar_scalar_1=function(){if(equal(p1,p2)){push(one);return}if(!iscons(p1)){push(zero);return}if(isadd(p1)){dsum();return}if(car(p1)===symbol(MULTIPLY)){dproduct();return}if(car(p1)===symbol(POWER)){dpower();return}if(car(p1)===symbol(DERIVATIVE)){dd();return}if(car(p1)===symbol(LOG)){dlog();return}if(car(p1)===symbol(SIN)){dsin();return}if(car(p1)===symbol(COS)){dcos();return}if(car(p1)===symbol(TAN)){dtan();return}if(car(p1)===symbol(ARCSIN)){darcsin();return}if(car(p1)===symbol(ARCCOS)){darccos();return}if(car(p1)===symbol(ARCTAN)){darctan();return}if(car(p1)===symbol(SINH)){dsinh();return}if(car(p1)===symbol(COSH)){dcosh();return}if(car(p1)===symbol(TANH)){dtanh();return}if(car(p1)===symbol(ARCSINH)){darcsinh();return}if(car(p1)===symbol(ARCCOSH)){darccosh();return}if(car(p1)===symbol(ARCTANH)){darctanh();return}if(car(p1)===symbol(ABS)){dabs();return}if(car(p1)===symbol(SGN)){dsgn();return}if(car(p1)===symbol(HERMITE)){dhermite();return}if(car(p1)===symbol(ERF)){derf();return}if(car(p1)===symbol(ERFC)){derfc();return}if(car(p1)===symbol(BESSELJ)){isZeroAtomOrTensor(caddr(p1))?dbesselj0():dbesseljn();return}if(car(p1)===symbol(BESSELY)){isZeroAtomOrTensor(caddr(p1))?dbessely0():dbesselyn();return}if(car(p1)===symbol(INTEGRAL)&&caddr(p1)===p2){derivative_of_integral();return}return dfunction()},dsum=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),derivative(),p1=cdr(p1);return add_all(tos-t)},dproduct=function(){var t,n,a,s,l,u,c;for(t=0,a=0,s=0,s=length(p1)-1,t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l){for(p3=cdr(p1),a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)push(car(p3)),t===a&&(push(p2),derivative()),p3=cdr(p3);multiply_all(s)}return add_all(s)},dpower=function(){return push(caddr(p1)),push(cadr(p1)),divide(),push(cadr(p1)),push(p2),derivative(),multiply(),push(cadr(p1)),logarithm(),push(caddr(p1)),push(p2),derivative(),multiply(),add(),push(p1),multiply()},dlog=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),divide()},dd=function(){return push(cadr(p1)),push(p2),derivative(),p3=pop(),car(p3)===symbol(DERIVATIVE)?(push_symbol(DERIVATIVE),push_symbol(DERIVATIVE),push(cadr(p3)),lessp(caddr(p3),caddr(p1))?(push(caddr(p3)),list(3),push(caddr(p1))):(push(caddr(p1)),list(3),push(caddr(p3))),list(3)):(push(p3),push(caddr(p1)),derivative())},dfunction=function(){return p3=cdr(p1),p3===symbol(NIL)||Find(p3,p2)?(push_symbol(DERIVATIVE),push(p1),push(p2),list(3)):push(zero)},dsin=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),multiply()},dcos=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sine(),multiply(),negate()},dtan=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),push_integer(-2),power(),multiply()},darcsin=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply()},darccos=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply(),negate()},darctan=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),inverse(),multiply(),simplify()},dsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),multiply()},dcosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ysinh(),multiply()},dtanh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),push_integer(-2),power(),multiply()},darcsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(1),add(),push_rational(-1,2),power(),multiply()},darccosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(-1),add(),push_rational(-1,2),power(),multiply()},darctanh=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),inverse(),multiply()},dabs=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sgn(),multiply()},dsgn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),dirac(),multiply(),push_integer(2),multiply()},dhermite=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(2),push(caddr(p1)),multiply(),multiply(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),hermite(),multiply()},derf=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},derfc=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(-2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},dbesselj0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesseljn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),besselj(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),besselj(),multiply(),add(),multiply()},dbessely0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesselyn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),bessely(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),bessely(),multiply(),add(),multiply()},derivative_of_integral=function(){return push(cadr(p1))},DET_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},det=function(){var t,n,a,s,l,u,c;if(n=0,s=0,save(),p1=pop(),DET_check_arg()===0){push_symbol(DET),push(p1),list(2),restore();return}for(s=p1.tensor.nelem,t=p1.tensor.elem,n=l=0,u=s;(0<=u?l<u:l>u)&&isNumericAtom(t[n]);n=0<=u?++l:--l);if(n===s)yydetg();else{for(n=a=0,c=p1.tensor.nelem;0<=c?a<c:a>c;n=0<=c?++a:--a)push(p1.tensor.elem[n]);determinant(p1.tensor.dim[0])}return restore()},determinant=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn;for(s=0,l=0,c=0,d=0,ar=0,on=0,cn=0,dn=0,n=[],s=tos-t*t,l=Ct=0,en=t;0<=en?Ct<en:Ct>en;l=0<=en?++Ct:--Ct)n[l]=l,n[l+t]=0,n[l+t+t]=1;for(cn=1,push(zero);;){for(push_integer(cn===1?1:-1),l=u=0,tn=t;0<=tn?u<tn:u>tn;l=0<=tn?++u:--u)d=t*n[l]+l,push(stack[s+d]),multiply();for(add(),c=t-1,on=0,a=!1;;){if(ar=n[t+c]+n[t+t+c],ar<0){n[t+t+c]=-n[t+t+c],c--;continue}if(ar===c+1){if(c===0){a=!0;break}on++,n[t+t+c]=-n[t+t+c],c--;continue}break}if(a)break;dn=n[c-n[t+c]+on],n[c-n[t+c]+on]=n[c-ar+on],n[c-ar+on]=dn,n[t+c]=ar,cn=-cn}return stack[s]=stack[tos-1],moveTos(s+1)},yydetg=function(){var t,n,a,s;for(t=0,n=0,n=p1.tensor.dim[0],t=a=0,s=n*n;0<=s?a<s:a>s;t=0<=s?++a:--a)push(p1.tensor.elem[t]);return lu_decomp(n),moveTos(tos-n*n),push(p1)},M=function(t,n,a,s){return stack[t+n*a+s]},setM=function(t,n,a,s,l){return stack[t+n*a+s]=l},lu_decomp=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax;for(n=0,a=0,s=0,u=0,a=tos-t*t,p1=one,n=ar=0,en=t-1;0<=en?ar<en:ar>en;n=0<=en?++ar:--ar){if(equal(M(a,t,n,n),zero)){for(s=l=tn=n+1,on=t;(tn<=on?l<on:l>on)&&equal(M(a,t,s,n),zero);s=tn<=on?++l:--l);if(s===t){p1=zero;break}for(u=c=cn=n,dn=t;cn<=dn?c<dn:c>dn;u=cn<=dn?++c:--c)p2=M(a,t,n,u),setM(a,t,n,u,M(a,t,s,u)),setM(a,t,s,u,p2);push(p1),negate(),p1=pop()}for(push(p1),push(M(a,t,n,n)),multiply(),p1=pop(),s=d=Cn=n+1,In=t;Cn<=In?d<In:d>In;s=Cn<=In?++d:--d)for(push(M(a,t,s,n)),push(M(a,t,n,n)),divide(),negate(),p2=pop(),setM(a,t,s,n,zero),u=Ct=ix=n+1,ax=t;ix<=ax?Ct<ax:Ct>ax;u=ix<=ax?++Ct:--Ct)push(M(a,t,n,u)),push(p2),multiply(),push(M(a,t,s,u)),add(),setM(a,t,s,u,pop())}return push(p1),push(M(a,t,t-1,t-1)),multiply(),p1=pop()},Eval_dirac=function(){return push(cadr(p1)),Eval(),dirac()},dirac=function(){return save(),ydirac(),restore()},ydirac=function(){if(p1=pop(),isdouble(p1))if(p1.d===0){push_integer(1);return}else{push_integer(0);return}if(isrational(p1))if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(1);return}else{push_integer(0);return}if(car(p1)===symbol(POWER)){push_symbol(DIRAC),push(cadr(p1)),list(2);return}if(isnegativeterm(p1)){push_symbol(DIRAC),push(p1),negate(),list(2);return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),push_symbol(DIRAC),push(p1),list(2)},divisors=function(){var t,n,a,s,l,u;for(n=0,t=0,a=0,save(),t=tos-1,divisors_onstack(),a=tos-t,u=stack.slice(t,t+a),u.sort(cmp_expr),stack=stack.slice(0,t).concat(u).concat(stack.slice(t+a)),p1=alloc_tensor(a),p1.tensor.ndim=1,p1.tensor.dim[0]=a,n=s=0,l=a;0<=l?s<l:s>l;n=0<=l?++s:--s)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore()},divisors_onstack=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,save(),p1=pop(),t=tos,isNumericAtom(p1))push(p1),factor_small_number();else if(car(p1)===symbol(ADD))push(p1),__factor_add();else if(car(p1)===symbol(MULTIPLY))for(p1=cdr(p1),isNumericAtom(car(p1))&&(push(car(p1)),factor_small_number(),p1=cdr(p1));iscons(p1);)p2=car(p1),car(p2)===symbol(POWER)?(push(cadr(p2)),push(caddr(p2))):(push(p2),push(one)),p1=cdr(p1);else car(p1)===symbol(POWER)?(push(cadr(p1)),push(caddr(p1))):(push(p1),push(one));for(a=tos,push(one),gen(t,a),s=tos-a,n=l=0,u=s;0<=u?l<u:l>u;n=0<=u?++l:--l)stack[t+n]=stack[a+n];return moveTos(t+s),restore()},gen=function(t,n){var a,s,l,u;if(a=0,s=0,save(),p1=pop(),t===n){push(p1),restore();return}if(p2=stack[t+0],p3=stack[t+1],push(p3),a=pop_integer(),!isNaN(a))for(s=l=0,u=Math.abs(a);0<=u?l<=u:l>=u;s=0<=u?++l:--l)push(p1),push(p2),push_integer(sign(a)*s),power(),multiply(),gen(t+2,n);return restore()},__factor_add=function(){for(save(),p1=pop(),p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);if(p2=pop(),isplusone(p2)){push(p1),push(one),restore();return}if(isNumericAtom(p2))push(p2),factor_small_number();else if(car(p2)===symbol(MULTIPLY))for(p3=cdr(p2),isNumericAtom(car(p3))?(push(car(p3)),factor_small_number()):(push(car(p3)),push(one)),p3=cdr(p3);iscons(p3);)push(car(p3)),push(one),p3=cdr(p3);else push(p2),push(one);for(push(p2),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply(),add(),p3=cdr(p3);return push(one),restore()},dpow=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,l=0,u=0,s=pop_double(),a=pop_double(),a===0&&s<0&&stop("divide by zero"),a>=0||s%1===0){l=Math.pow(a,s),push_double(l);return}return l=Math.pow(Math.abs(a),s),u=Math.PI*s,s%.5===0?(t=0,n=Math.sin(u)):(t=Math.cos(u),n=Math.sin(u)),push_double(t*l),push_double(n*l),push(imaginaryunit),multiply(),add()},EIG_N=0,EIG_yydd=[],EIG_yyqq=[],Eval_eigen=function(){return EIG_check_arg()===0&&stop("eigen: argument is not a square matrix"),eigen(EIGEN),p1=usr_symbol("D"),set_binding(p1,p2),p1=usr_symbol("Q"),set_binding(p1,p3),push(symbol(NIL))},Eval_eigenval=function(){if(EIG_check_arg()===0){push_symbol(EIGENVAL),push(p1),list(2);return}return eigen(EIGENVAL),push(p2)},Eval_eigenvec=function(){if(EIG_check_arg()===0){push_symbol(EIGENVEC),push(p1),list(2);return}return eigen(EIGENVEC),push(p3)},EIG_check_arg=function(){var t,n,a,s,l,u,c,d,Ct,ar,en;if(t=0,a=0,push(cadr(p1)),Eval(),yyfloat(),Eval(),p1=pop(),!istensor(p1))return 0;for((p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1])&&stop("eigen: argument is not a square matrix"),EIG_N=p1.tensor.dim[0],t=u=0,c=EIG_N;0<=c?u<c:u>c;t=0<=c?++u:--u)for(a=n=0,d=EIG_N;0<=d?n<d:n>d;a=0<=d?++n:--n)isdouble(p1.tensor.elem[EIG_N*t+a])||stop("eigen: matrix is not numerical");for(t=s=0,Ct=EIG_N-1;0<=Ct?s<Ct:s>Ct;t=0<=Ct?++s:--s)for(a=l=ar=t+1,en=EIG_N;ar<=en?l<en:l>en;a=ar<=en?++l:--l)Math.abs(p1.tensor.elem[EIG_N*t+a].d-p1.tensor.elem[EIG_N*a+t].d)>1e-10&&stop("eigen: matrix is not symmetrical");return 1},eigen=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx;for(n=0,s=0,n=Ct=0,on=EIG_N*EIG_N;0<=on?Ct<on:Ct>on;n=0<=on?++Ct:--Ct)EIG_yydd[n]=0;for(n=a=0,cn=EIG_N*EIG_N;0<=cn?a<cn:a>cn;n=0<=cn?++a:--a)EIG_yyqq[n]=0;for(n=l=0,Cn=EIG_N;0<=Cn?l<Cn:l>Cn;n=0<=Cn?++l:--l)for(EIG_yydd[EIG_N*n+n]=p1.tensor.elem[EIG_N*n+n].d,s=u=In=n+1,ix=EIG_N;In<=ix?u<ix:u>ix;s=In<=ix?++u:--u)EIG_yydd[EIG_N*n+s]=p1.tensor.elem[EIG_N*n+s].d,EIG_yydd[EIG_N*s+n]=p1.tensor.elem[EIG_N*n+s].d;for(n=c=0,ax=EIG_N;0<=ax?c<ax:c>ax;n=0<=ax?++c:--c)for(EIG_yyqq[EIG_N*n+n]=1,s=d=ox=n+1,sx=EIG_N;ox<=sx?d<sx:d>sx;s=ox<=sx?++d:--d)EIG_yyqq[EIG_N*n+s]=0,EIG_yyqq[EIG_N*s+n]=0;for(n=ar=0;ar<100&&step()!==0;n=++ar);if(n===100&&printstr(`
note: eigen did not converge
`),t===EIGEN||t===EIGENVAL)for(push(p1),copy_tensor(),p2=pop(),n=en=0,ux=EIG_N;0<=ux?en<ux:en>ux;n=0<=ux?++en:--en)for(s=tn=0,cx=EIG_N;0<=cx?tn<cx:tn>cx;s=0<=cx?++tn:--tn)push_double(EIG_yydd[EIG_N*n+s]),p2.tensor.elem[EIG_N*n+s]=pop();if(t===EIGEN||t===EIGENVEC){for(push(p1),copy_tensor(),p3=pop(),hx=[],n=gx=0,dn=EIG_N;0<=dn?gx<dn:gx>dn;n=0<=dn?++gx:--gx)hx.push((function(){var fx,dx,mx;for(dx=[],s=mx=0,fx=EIG_N;0<=fx?mx<fx:mx>fx;s=0<=fx?++mx:--mx)push_double(EIG_yyqq[EIG_N*n+s]),dx.push(p3.tensor.elem[EIG_N*n+s]=pop());return dx})());return hx}},step=function(){var t,n,a,s,l,u,c,d;for(n=0,s=0,t=0,n=l=0,u=EIG_N-1;0<=u?l<u:l>u;n=0<=u?++l:--l)for(s=a=c=n+1,d=EIG_N;c<=d?a<d:a>d;s=c<=d?++a:--a)EIG_yydd[EIG_N*n+s]!==0&&(step2(n,s),t++);return t},step2=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn;for(c=0,cn=0,dn=0,a=0,s=0,tn=0,on=0,dn=.5*(EIG_yydd[EIG_N*t+t]-EIG_yydd[EIG_N*n+n])/EIG_yydd[EIG_N*t+n],cn=1/(Math.abs(dn)+Math.sqrt(dn*dn+1)),dn<0&&(cn=-cn),a=1/Math.sqrt(cn*cn+1),tn=cn*a,c=d=0,Ct=EIG_N;0<=Ct?d<Ct:d>Ct;c=0<=Ct?++d:--d)s=EIG_yydd[EIG_N*t+c],on=EIG_yydd[EIG_N*n+c],EIG_yydd[EIG_N*t+c]=a*s+tn*on,EIG_yydd[EIG_N*n+c]=a*on-tn*s;for(c=l=0,ar=EIG_N;0<=ar?l<ar:l>ar;c=0<=ar?++l:--l)s=EIG_yydd[EIG_N*c+t],on=EIG_yydd[EIG_N*c+n],EIG_yydd[EIG_N*c+t]=a*s+tn*on,EIG_yydd[EIG_N*c+n]=a*on-tn*s;for(c=u=0,en=EIG_N;0<=en?u<en:u>en;c=0<=en?++u:--u)s=EIG_yyqq[EIG_N*t+c],on=EIG_yyqq[EIG_N*n+c],EIG_yyqq[EIG_N*t+c]=a*s+tn*on,EIG_yyqq[EIG_N*n+c]=a*on-tn*s;return EIG_yydd[EIG_N*t+n]=0,EIG_yydd[EIG_N*n+t]=0},Eval_erf=function(){return push(cadr(p1)),Eval(),yerf()},yerf=function(){return save(),yyerf(),restore()},yyerf=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=1-erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}if(isnegativeterm(p1)){push_symbol(ERF),push(p1),negate(),list(2),negate();return}push_symbol(ERF),push(p1),list(2)},Eval_erfc=function(){return push(cadr(p1)),Eval(),yerfc()},yerfc=function(){return save(),yyerfc(),restore()},yyerfc=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}push_symbol(ERFC),push(p1),list(2)},erfc=function(t){var n,a,s;return t===0?1:(a=0,s=0,n=0,s=Math.abs(t),a=1/(1+.5*s),n=a*Math.exp(-s*s-1.26551223+a*(1.00002368+a*(.37409196+a*(.09678418+a*(-.18628806+a*(.27886807+a*(-1.13520398+a*(1.48851587+a*(-.82215223+a*.17087277))))))))),t>=0?n:2-n)},Eval=function(){var t;if(check_esc_flag(),save(),p1=pop(),p1==null)debugger;switch(!evaluatingAsFloats&&isfloating(p1)&&(t=!0,evaluatingAsFloats++),p1.k){case CONS:Eval_cons();break;case NUM:evaluatingAsFloats?push_double(convert_rational_to_double(p1)):push(p1);break;case DOUBLE:case STR:push(p1);break;case TENSOR:Eval_tensor();break;case SYM:Eval_sym();break;default:stop("atom?")}return t&&evaluatingAsFloats--,restore()},Eval_sym=function(){var t,n,a,s,l,u;if(iskeyword(p1)){push(p1),push(symbol(LAST)),list(2),Eval();return}else if(p1===symbol(PI)&&evaluatingAsFloats){push_double(Math.PI);return}if(p2=get_binding(p1),DEBUG&&console.log("looked up: "+p1+" which contains: "+p2),push(p2),p1!==p2){if(s=chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(p1),s!==-1){for(t="",n=a=l=s,u=chainOfUserSymbolsNotFunctionsBeingEvaluated.length;l<=u?a<u:a>u;n=l<=u?++a:--a)t+=chainOfUserSymbolsNotFunctionsBeingEvaluated[n].printname+" -> ";t+=p1.printname,stop("recursive evaluation of symbols: "+t);return}return chainOfUserSymbolsNotFunctionsBeingEvaluated.push(p1),Eval(),chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}},Eval_cons=function(){var t;if(t=car(p1),car(t)===symbol(EVAL)){Eval_user_function();return}switch(issymbol(t)||stop("cons?"),symnum(t)){case ABS:return Eval_abs();case ADD:return Eval_add();case ADJ:return Eval_adj();case AND:return Eval_and();case ARCCOS:return Eval_arccos();case ARCCOSH:return Eval_arccosh();case ARCSIN:return Eval_arcsin();case ARCSINH:return Eval_arcsinh();case ARCTAN:return Eval_arctan();case ARCTANH:return Eval_arctanh();case ARG:return Eval_arg();case ATOMIZE:return Eval_atomize();case BESSELJ:return Eval_besselj();case BESSELY:return Eval_bessely();case BINDING:return Eval_binding();case BINOMIAL:return Eval_binomial();case CEILING:return Eval_ceiling();case CHECK:return Eval_check();case CHOOSE:return Eval_choose();case CIRCEXP:return Eval_circexp();case CLEAR:return Eval_clear();case CLEARALL:return Eval_clearall();case CLEARPATTERNS:return Eval_clearpatterns();case CLOCK:return Eval_clock();case COEFF:return Eval_coeff();case COFACTOR:return Eval_cofactor();case CONDENSE:return Eval_condense();case CONJ:return Eval_conj();case CONTRACT:return Eval_contract();case COS:return Eval_cos();case COSH:return Eval_cosh();case DECOMP:return Eval_decomp();case DEGREE:return Eval_degree();case DEFINT:return Eval_defint();case DENOMINATOR:return Eval_denominator();case DERIVATIVE:return Eval_derivative();case DET:return Eval_det();case DIM:return Eval_dim();case DIRAC:return Eval_dirac();case DIVISORS:return Eval_divisors();case DO:return Eval_do();case DOT:return Eval_inner();case DRAW:return Eval_draw();case DSOLVE:return Eval_dsolve();case EIGEN:return Eval_eigen();case EIGENVAL:return Eval_eigenval();case EIGENVEC:return Eval_eigenvec();case ERF:return Eval_erf();case ERFC:return Eval_erfc();case EVAL:return Eval_Eval();case EXP:return Eval_exp();case EXPAND:return Eval_expand();case EXPCOS:return Eval_expcos();case EXPSIN:return Eval_expsin();case FACTOR:return Eval_factor();case FACTORIAL:return Eval_factorial();case FACTORPOLY:return Eval_factorpoly();case FILTER:return Eval_filter();case FLOATF:return Eval_float();case APPROXRATIO:return Eval_approxratio();case FLOOR:return Eval_floor();case FOR:return Eval_for();case FUNCTION:return Eval_function_reference();case GAMMA:return Eval_gamma();case GCD:return Eval_gcd();case HERMITE:return Eval_hermite();case HILBERT:return Eval_hilbert();case IMAG:return Eval_imag();case INDEX:return Eval_index();case INNER:return Eval_inner();case INTEGRAL:return Eval_integral();case INV:return Eval_inv();case INVG:return Eval_invg();case ISINTEGER:return Eval_isinteger();case ISPRIME:return Eval_isprime();case LAGUERRE:return Eval_laguerre();case LCM:return Eval_lcm();case LEADING:return Eval_leading();case LEGENDRE:return Eval_legendre();case LOG:return Eval_log();case LOOKUP:return Eval_lookup();case MOD:return Eval_mod();case MULTIPLY:return Eval_multiply();case NOT:return Eval_not();case NROOTS:return Eval_nroots();case NUMBER:return Eval_number();case NUMERATOR:return Eval_numerator();case OPERATOR:return Eval_operator();case OR:return Eval_or();case OUTER:return Eval_outer();case PATTERN:return Eval_pattern();case PATTERNSINFO:return Eval_patternsinfo();case POLAR:return Eval_polar();case POWER:return Eval_power();case PRIME:return Eval_prime();case PRINT:return Eval_print();case PRINT2DASCII:return Eval_print2dascii();case PRINTFULL:return Eval_printcomputer();case PRINTLATEX:return Eval_printlatex();case PRINTLIST:return Eval_printlist();case PRINTPLAIN:return Eval_printhuman();case PRODUCT:return Eval_product();case QUOTE:return Eval_quote();case QUOTIENT:return Eval_quotient();case RANK:return Eval_rank();case RATIONALIZE:return Eval_rationalize();case REAL:return Eval_real();case ROUND:return Eval_round();case YYRECT:return Eval_rect();case ROOTS:return Eval_roots();case SETQ:return Eval_setq();case SGN:return Eval_sgn();case SILENTPATTERN:return Eval_silentpattern();case SIMPLIFY:return Eval_simplify();case SIN:return Eval_sin();case SINH:return Eval_sinh();case SHAPE:return Eval_shape();case SQRT:return Eval_sqrt();case STOP:return Eval_stop();case SUBST:return Eval_subst();case SUM:return Eval_sum();case SYMBOLSINFO:return Eval_symbolsinfo();case TAN:return Eval_tan();case TANH:return Eval_tanh();case TAYLOR:return Eval_taylor();case TEST:return Eval_test();case TESTEQ:return Eval_testeq();case TESTGE:return Eval_testge();case TESTGT:return Eval_testgt();case TESTLE:return Eval_testle();case TESTLT:return Eval_testlt();case TRANSPOSE:return Eval_transpose();case UNIT:return Eval_unit();case ZERO:return Eval_zero();default:return Eval_user_function()}},Eval_binding=function(){return push(get_binding(cadr(p1)))},Eval_check=function(){var t;return t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(p1):push_integer(t)},Eval_det=function(){return push(cadr(p1)),Eval(),det()},Eval_dim=function(){var t;return push(cadr(p1)),Eval(),p2=pop(),iscons(cddr(p1))?(push(caddr(p1)),Eval(),t=pop_integer()):t=1,istensor(p2)?t<1||t>p2.tensor.ndim?push(p1):push_integer(p2.tensor.dim[t-1]):push_integer(1)},Eval_divisors=function(){return push(cadr(p1)),Eval(),divisors()},Eval_do=function(){var t;for(push(car(p1)),p1=cdr(p1),t=[];iscons(p1);)pop(),push(car(p1)),Eval(),t.push(p1=cdr(p1));return t},Eval_dsolve=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),dsolve()},Eval_Eval=function(){for(push(cadr(p1)),Eval(),p1=cddr(p1);iscons(p1);)push(car(p1)),Eval(),push(cadr(p1)),Eval(),subst(),p1=cddr(p1);return Eval()},Eval_exp=function(){return push(cadr(p1)),Eval(),exponential()},Eval_factorial=function(){return push(cadr(p1)),Eval(),factorial()},Eval_factorpoly=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),factorpoly(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factorpoly(),t.push(p1=cdr(p1));return t},Eval_hermite=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),hermite()},Eval_hilbert=function(){return push(cadr(p1)),Eval(),hilbert()},Eval_index=function(){var t,n,a;if(t=tos,n=p1,p1=cdr(p1),push(car(p1)),Eval(),a=stack[tos-1],isNumericAtom(a)&&stop("trying to access a scalar as a tensor"),!istensor(a)){moveTos(t),push(n);return}for(p1=cdr(p1);iscons(p1);){if(push(car(p1)),Eval(),!isintegerorintegerfloat(stack[tos-1])){moveTos(t),push(n);return}p1=cdr(p1)}return index_function(tos-t)},Eval_inv=function(){return push(cadr(p1)),Eval(),inv()},Eval_invg=function(){return push(cadr(p1)),Eval(),invg()},Eval_isinteger=function(){var t;if(push(cadr(p1)),Eval(),p1=pop(),isrational(p1)){isinteger(p1)?push(one):push(zero);return}if(isdouble(p1)){t=Math.floor(p1.d),t===p1.d?push(one):push(zero);return}return push_symbol(ISINTEGER),push(p1),list(2)},Eval_number=function(){return push(cadr(p1)),Eval(),p1=pop(),p1.k===NUM||p1.k===DOUBLE?push_integer(1):push_integer(0)},Eval_operator=function(){var t;for(t=tos,push_symbol(OPERATOR),p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);return list(tos-t)},Eval_quote=function(){return push(cadr(p1))},Eval_rank=function(){return push(cadr(p1)),Eval(),p1=pop(),istensor(p1)?push_integer(p1.tensor.ndim):push(zero)},Eval_setq=function(){if(caadr(p1)===symbol(INDEX)){setq_indexed();return}if(iscons(cadr(p1))){define_user_function();return}return issymbol(cadr(p1))||stop("symbol assignment: error in symbol"),push(caddr(p1)),Eval(),p2=pop(),set_binding(cadr(p1),p2),push(symbol(NIL))},setq_indexed=function(){var t;for(p4=cadadr(p1),issymbol(p4)||stop("indexed assignment: expected a symbol name"),t=tos,push(caddr(p1)),Eval(),p2=cdadr(p1);iscons(p2);)push(car(p2)),Eval(),p2=cdr(p2);return set_component(tos-t),p3=pop(),set_binding(p4,p3),push(symbol(NIL))},Eval_sqrt=function(){return push(cadr(p1)),Eval(),push_rational(1,2),power()},Eval_stop=function(){return stop("user stop")},Eval_subst=function(){return push(cadddr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadr(p1)),Eval(),subst(),Eval()},Eval_unit=function(){var t,n,a,s;if(t=0,n=0,push(cadr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(n<1){push(p1);return}for(p1=alloc_tensor(n*n),p1.tensor.ndim=2,p1.tensor.dim[0]=n,p1.tensor.dim[1]=n,t=a=0,s=n;0<=s?a<s:a>s;t=0<=s?++a:--a)p1.tensor.elem[n*t+t]=one;return check_tensor_dimensions(p1),push(p1)},Eval_predicate=function(){return save(),p1=top(),car(p1)===symbol(SETQ)&&(pop(),push_symbol(TESTEQ),push(cadr(p1)),push(caddr(p1)),list(3)),Eval(),restore()},Eval_expand=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),expand()},expand=function(){var t;if(save(),p9=pop(),p5=pop(),istensor(p5)){expand_tensor(),restore();return}if(car(p5)===symbol(ADD)){for(push_integer(0),p1=cdr(p5);iscons(p1);)push(car(p1)),push(p9),expand(),add(),p1=cdr(p1);restore();return}if(push(p5),numerator(),p3=pop(),push(p5),denominator(),p2=pop(),remove_negative_exponents(),push(p3),push(p2),push(p9),(isone(p3)||isone(p2))&&(!ispolyexpandedform(p2,p9)||isone(p2))){pop(),pop(),pop(),push(p5),restore();return}if(divpoly(),p7=pop(),push(p3),push(p2),push(p7),multiply(),subtract(),p3=pop(),isZeroAtomOrTensor(p3)){push(p7),restore();return}return push(p2),push(p9),factorpoly(),p2=pop(),expand_get_C(),expand_get_B(),expand_get_A(),istensor(p4)?(push(p4),t=expanding,expanding=1,inv(),expanding=t,push(p3),inner(),push(p2),inner()):(push(p3),push(p4),t=expanding,expanding=1,divide(),expanding=t,push(p2),multiply()),push(p7),add(),restore()},expand_tensor=function(){var t,n,a;for(t=0,push(p5),copy_tensor(),p5=pop(),t=n=0,a=p5.tensor.nelem;0<=a?n<a:n>a;t=0<=a?++n:--n)push(p5.tensor.elem[t]),push(p9),expand(),p5.tensor.elem[t]=pop();return push(p5)},remove_negative_exponents=function(){var t,n,a,s,l,u,c;for(t=0,n=0,a=0,s=0,l=0,t=tos,factors(p2),factors(p3),l=tos-t,a=0,n=u=0,c=l;0<=c?u<c:u>c;n=0<=c?++u:--u)p1=stack[t+n],car(p1)===symbol(POWER)&&cadr(p1)===p9&&(push(caddr(p1)),s=pop_integer(),!isNaN(s)&&s<a&&(a=s));if(moveTos(t),a!==0)return push(p2),push(p9),push_integer(-a),power(),multiply(),p2=pop(),push(p3),push(p9),push_integer(-a),power(),multiply(),p3=pop()},expand_get_C=function(){var t,n,a,s,l,u,c,d,Ct,ar;if(n=0,a=0,l=0,u=0,n=tos,car(p2)===symbol(MULTIPLY))for(p1=cdr(p2);iscons(p1);)p5=car(p1),expand_get_CF(),p1=cdr(p1);else p5=p2,expand_get_CF();if(u=tos-n,u===1){p4=pop();return}for(p4=alloc_tensor(u*u),p4.tensor.ndim=2,p4.tensor.dim[0]=u,p4.tensor.dim[1]=u,t=n,a=c=0,Ct=u;0<=Ct?c<Ct:c>Ct;a=0<=Ct?++c:--c)for(l=s=0,ar=u;0<=ar?s<ar:s>ar;l=0<=ar?++s:--s)push(stack[t+l]),push(p9),push_integer(a),power(),d=expanding,expanding=1,divide(),expanding=d,push(p9),filter(),p4.tensor.elem[u*a+l]=pop();return moveTos(tos-u)},expand_get_CF=function(){var t,n,a,s,l,u,c,d;if(t=0,n=0,a=0,s=0,!!Find(p5,p9)){for(u=expanding,expanding=1,trivial_divide(),expanding=u,car(p5)===symbol(POWER)?(push(caddr(p5)),s=pop_integer(),p6=cadr(p5)):(s=1,p6=p5),push(p6),push(p9),degree(),t=pop_integer(),d=[],n=l=0,c=s;0<=c?l<c:l>c;n=0<=c?++l:--l)d.push((function(){var Ct,ar,en;for(en=[],a=Ct=0,ar=t;0<=ar?Ct<ar:Ct>ar;a=0<=ar?++Ct:--Ct)push(p8),push(p6),push_integer(n),power(),u=expanding,expanding=1,multiply(),expanding=u,push(p9),push_integer(a),power(),u=expanding,expanding=1,multiply(),en.push(expanding=u);return en})());return d}},trivial_divide=function(){var t;if(t=0,car(p2)===symbol(MULTIPLY)){for(t=tos,p0=cdr(p2);iscons(p0);)equal(car(p0),p5)||(push(car(p0)),Eval()),p0=cdr(p0);multiply_all(tos-t)}else push_integer(1);return p8=pop()},expand_get_B=function(){var t,n,a,s,l;if(t=0,n=0,!!istensor(p4)){for(n=p4.tensor.dim[0],p8=alloc_tensor(n),p8.tensor.ndim=1,p8.tensor.dim[0]=n,t=a=0,l=n;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p3),push(p9),push_integer(t),power(),s=expanding,expanding=1,divide(),expanding=s,push(p9),filter(),p8.tensor.elem[t]=pop();return p3=p8}},expand_get_A=function(){var t,n,a,s,l;if(t=0,n=0,a=0,!istensor(p4)){push(p2),reciprocate(),p2=pop();return}if(t=tos,car(p2)===symbol(MULTIPLY))for(p8=cdr(p2);iscons(p8);)p5=car(p8),expand_get_AF(),p8=cdr(p8);else p5=p2,expand_get_AF();for(a=tos-t,p8=alloc_tensor(a),p8.tensor.ndim=1,p8.tensor.dim[0]=a,n=s=0,l=a;0<=l?s<l:s>l;n=0<=l?++s:--s)p8.tensor.elem[n]=stack[t+n];return moveTos(t),p2=p8},expand_get_AF=function(){var t,n,a,s,l,u,c;if(t=0,n=0,a=0,s=1,!!Find(p5,p9)){for(car(p5)===symbol(POWER)&&(push(caddr(p5)),s=pop_integer(),p5=cadr(p5)),push(p5),push(p9),degree(),t=pop_integer(),c=[],n=l=u=s;u<=0?l<0:l>0;n=u<=0?++l:--l)c.push((function(){var d,Ct,ar;for(ar=[],a=d=0,Ct=t;0<=Ct?d<Ct:d>Ct;a=0<=Ct?++d:--d)push(p5),push_integer(n),power(),reciprocate(),push(p9),push_integer(a),power(),ar.push(multiply());return ar})());return c}},Eval_expcos=function(){return push(cadr(p1)),Eval(),expcos()},expcos=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),add(),restore()},Eval_expsin=function(){return push(cadr(p1)),Eval(),expsin()},expsin=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),subtract(),restore()},Eval_factor=function(){var t;for(push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),factor(),p1=cdddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factor_again(),t.push(p1=cdr(p1));return t},factor_again=function(){var t,n;if(save(),p2=pop(),p1=pop(),t=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),factor_term(),p1=cdr(p1);else push(p1),push(p2),factor_term();return n=tos-t,n>1&&multiply_all_noexpand(n),restore()},factor_term=function(){if(save(),factorpoly(),p1=pop(),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return restore()},factor=function(){return save(),p2=pop(),p1=pop(),isinteger(p1)?(push(p1),factor_number()):(push(p1),push(p2),factorpoly()),restore()},factor_small_number=function(){var t,n,a,s,l,u;for(a=0,save(),s=pop_integer(),isNaN(s)&&stop("number too big to factor"),s<0&&(s=-s),a=l=0,u=MAXPRIMETAB;(0<=u?l<u:l>u)&&(t=primetab[a],!(t>s/t));a=0<=u?++l:--l){for(n=0;s%t===0;)s/=t,n++;n&&(push_integer(t),push_integer(n))}return s>1&&(push_integer(s),push_integer(1)),restore()},factorial=function(){var t;if(t=0,save(),p1=pop(),push(p1),t=pop_integer(),t<0||isNaN(t)){push_symbol(FACTORIAL),push(p1),list(2),restore();return}return bignum_factorial(t),restore()},factorpoly=function(){var t,n;return DEBUG&&console.log("factorpoly: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),n=pop(),t=pop(),!Find(t,n)||!ispolyexpandedform(t,n)||!issymbol(n)?push(t):yyfactorpoly(n,t),restore()},yyfactorpoly=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx,mx,vx;for(DEBUG&&(Ct=t,mx=n,console.log("yyfactorpoly: "+Ct+" "+mx)),save(),tn=tos,isfloating(n)&&stop("floating point numbers in polynomial"),ax=tos,d=coeff(t,n)-1,DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" factpoly_expo before rationalize_coefficients: "+d),ix=rationalize_coefficients(tn),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" factpoly_expo  after rationalize_coefficients: "+d),vx="real",fx=null;d>0;)if(DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" factpoly_expo inside while loop: "+d),isZeroAtomOrTensor(stack[ax+0])?(DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" isZeroAtomOrTensor"),a=one,l=zero):vx==="real"?[en,a,l]=get_factor_from_real_root(t,d,ax):vx==="complex"&&([ar,a]=get_factor_from_complex_root(fx,d,ax)),vx==="real")if(en===0){vx="complex";continue}else{for(push(a),push(t),multiply(),push(l),add(),s=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+` success
FACTOR=`+s),push(ix),push(s),multiply_noexpand(),ix=pop(),yydivpoly(d,ax,a,l);d&&isZeroAtomOrTensor(stack[ax+d]);)d--;for(push(zero),on=In=0,ux=d;0<=ux?In<=ux:In>=ux;on=0<=ux?++In:--In)push(stack[ax+on]),push(t),push_integer(on),power(),multiply(),add();fx=pop()}else if(vx==="complex"){if(ar===0)break;if(push(a),push(t),subtract(),push(a),conjugate(),push(t),subtract(),multiply(),dx=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+` success
FACTOR=`+dx),push(ix),sx=pop(),push(ix),push(dx),multiply_noexpand(),ix=pop(),fx==null){for(push(zero),on=cn=0,cx=d;0<=cx?cn<=cx:cn>=cx;on=0<=cx?++cn:--cn)push(stack[ax+on]),push(t),push_integer(on),power(),multiply(),add();fx=pop()}if(c=fx,push(c),push(dx),push(t),divpoly(),fx=pop(),push(fx),push(dx),multiply(),u=pop(),!equal(u,c)){DEBUG&&console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),DEBUG&&console.log("so just returning previousFactorisation times dividend: "+sx+" * "+c),push(sx),push(c),ox=expanding,expanding=0,yycondense(),expanding=ox,multiply_noexpand(),ix=pop(),stack[tn]=ix,moveTos(tn+1),restore();return}for(on=dn=0,hx=d;0<=hx?dn<=hx:dn>=hx;on=0<=hx?++dn:--dn)pop();coeff(t,fx),d-=2}for(DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" building the remaining unfactored part of the polynomial"),push(zero),on=Cn=0,gx=d;0<=gx?Cn<=gx:Cn>=gx;on=0<=gx?++Cn:--Cn)push(stack[ax+on]),push(t),push_integer(on),power(),multiply(),add();return n=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" remaining unfactored part of the polynomial: "+n.toString()),push(n),ox=expanding,expanding=0,yycondense(),expanding=ox,n=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" new poly with extracted common factor: "+n.toString()),d>0&&isnegativeterm(stack[ax+d])&&(push(n),negate(),n=pop(),push(ix),negate_noexpand(),ix=pop()),push(ix),push(n),multiply_noexpand(),ix=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+mx+" result: "+ix),stack[tn]=ix,moveTos(tn+1),restore()},rationalize_coefficients=function(t){var n,a,s,l,u,c,d,Ct,ar;for(l=one,n=s=c=t,d=tos;c<=d?s<d:s>d;n=c<=d?++s:--s)push(stack[n]),denominator(),push(l),lcm(),l=pop();for(n=a=Ct=t,ar=tos;Ct<=ar?a<ar:a>ar;n=Ct<=ar?++a:--a)push(l),push(stack[n]),multiply(),stack[n]=pop();return push(l),reciprocate(),u=pop(),DEBUG&&console.log("rationalize_coefficients result: "+u.toString()),u},get_factor_from_real_root=function(t,n,a){var s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx;if(DEBUG&&console.log("get_factor_from_real_root"),d=0,c=0,s=0,l=0,on=0,cn=0,DEBUG){for(push(zero),d=dn=0,In=n;0<=In?dn<=In:dn>=In;d=0<=In?++dn:--dn)push(stack[a+d]),push(t),push_integer(d),power(),multiply(),add();Cn=pop(),console.log("POLY="+Cn)}if(c=tos,l=tos,push(stack[a+n]),divisors_onstack(),cn=tos-l,s=tos,push(stack[a+0]),divisors_onstack(),on=tos-s,DEBUG){for(console.log("divisors of base term"),d=Ct=0,ix=on;0<=ix?Ct<ix:Ct>ix;d=0<=ix?++Ct:--Ct)console.log(", "+stack[s+d]);for(console.log("divisors of leading term"),d=ar=0,ax=cn;0<=ax?ar<ax:ar>ax;d=0<=ax?++ar:--ar)console.log(", "+stack[l+d])}for(ux=en=0,ox=cn;0<=ox?en<ox:en>ox;ux=0<=ox?++en:--en)for(cx=tn=0,sx=on;0<=sx?tn<sx:tn>sx;cx=0<=sx?++tn:--tn){if(gx=stack[l+ux],hx=stack[s+cx],push(hx),push(gx),divide(),negate(),fx=pop(),u=Evalpoly(n,a,fx),DEBUG&&(console.log("try A="+gx),console.log(", B="+hx),console.log(", root "+t),console.log("=-B/A="+fx),console.log(", POLY("+fx),console.log(")="+u)),isZeroAtomOrTensor(u))return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,gx,hx];if(push(hx),negate(),hx=pop(),push(fx),negate(),fx=pop(),u=Evalpoly(n,a,fx),DEBUG&&(console.log("try A="+gx),console.log(", B="+hx),console.log(", root "+t),console.log("=-B/A="+fx),console.log(", POLY("+fx),console.log(")="+u)),isZeroAtomOrTensor(u))return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,gx,hx]}return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning"),[0,null,null]},get_factor_from_complex_root=function(t,n,a){var s,l,u,c,d,Ct,ar;if(l=0,n<=2)return DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[0,null];if(DEBUG&&console.log("complex root finding for POLY="+t),l=tos,push_integer(-1),push_rational(2,3),power(),rect(),ar=pop(),DEBUG&&console.log("complex root finding: trying with "+ar),push(ar),s=Evalpoly(n,a,ar),DEBUG&&console.log("complex root finding result: "+s),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,ar];if(push_integer(1),push_rational(2,3),power(),rect(),ar=pop(),DEBUG&&console.log("complex root finding: trying with "+ar),push(ar),s=Evalpoly(n,a,ar),DEBUG&&console.log("complex root finding result: "+s),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,ar];for(d=c=-10;c<=10;d=++c)for(Ct=u=1;u<=5;Ct=++u)if(push_integer(d),push_integer(Ct),push(imaginaryunit),multiply(),add(),rect(),ar=pop(),DEBUG&&console.log("complex root finding: trying simple complex combination "+ar),push(ar),s=Evalpoly(n,a,ar),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("found complex root: "+s),[1,ar];return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 0"),[0,null]},yydivpoly=function(t,n,a,s){var l,u,c,d;for(l=zero,u=c=d=t;d<=0?c<0:c>0;u=d<=0?++c:--c)push(stack[n+u]),stack[n+u]=l,push(a),divide(),l=pop(),push(stack[n+u-1]),push(l),push(s),multiply(),subtract(),stack[n+u-1]=pop();if(stack[n+0]=l,DEBUG)return console.log("yydivpoly Q: "+l.toString())},Evalpoly=function(t,n,a){var s,l,u;for(push(zero),s=l=u=t;u<=0?l<=0:l>=0;s=u<=0?++l:--l)push(a),multiply(),push(stack[n+s]),add();return pop()},factors=function(t){var n;if(n=tos,car(t)===symbol(ADD))for(t=cdr(t);iscons(t);)push_term_factors(car(t)),t=cdr(t);else push_term_factors(t);return tos-n},push_term_factors=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else return push(t)},Eval_filter=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),filter(),t.push(p1=cdr(p1));return t},filter=function(){return save(),p2=pop(),p1=pop(),filter_main(),restore()},filter_main=function(){return car(p1)===symbol(ADD)?filter_sum():istensor(p1)?filter_tensor():Find(p1,p2)?push_integer(0):push(p1)},filter_sum=function(){var t;for(push_integer(0),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),filter(),add(),t.push(p1=cdr(p1));return t},filter_tensor=function(){var t,n,a,s,l,u;for(t=0,a=0,a=p1.tensor.nelem,p3=alloc_tensor(a),p3.tensor.ndim=p1.tensor.ndim,t=s=0,l=p1.tensor.ndim;0<=l?s<l:s>l;t=0<=l?++s:--s)p3.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,u=a;0<=u?n<u:n>u;t=0<=u?++n:--n)push(p1.tensor.elem[t]),push(p2),filter(),p3.tensor.elem[t]=pop();return push(p3)},Eval_float=function(){return evaluatingAsFloats++,push(cadr(p1)),Eval(),yyfloat(),Eval(),evaluatingAsFloats--},zzfloat=function(){return save(),evaluatingAsFloats++,Eval(),yyfloat(),Eval(),evaluatingAsFloats--,restore()},yyfloat=function(){var t,n,a,s;if(n=0,t=0,evaluatingAsFloats++,save(),p1=pop(),iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),yyfloat(),p1=cdr(p1);list(tos-t)}else if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,s=p1.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)push(p1.tensor.elem[n]),yyfloat(),p1.tensor.elem[n]=pop();push(p1)}else p1.k===NUM?(push(p1),bignum_float()):p1===symbol(PI)?push_double(Math.PI):p1===symbol(E)?push_double(Math.E):push(p1);return restore(),evaluatingAsFloats--},Eval_floor=function(){return push(cadr(p1)),Eval(),yfloor()},yfloor=function(){return save(),yyfloor(),restore()},yyfloor=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(FLOOR),push(p1),list(2);return}if(isdouble(p1)){t=Math.floor(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}if(p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1))return push_integer(-1),add()},Eval_for=function(){var t,n,a,s,l,u,c;if(t=0,n=0,a=0,s=caddr(p1),issymbol(s)||stop("for: 2nd arg should be the variable to loop over"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(push(caddddr(p1)),Eval(),a=pop_integer(),isNaN(a)){push(p1);return}for(p4=get_binding(s),t=l=u=n,c=a;u<=c?l<=c:l>=c;t=u<=c?++l:--l)push_integer(t),p5=pop(),set_binding(s,p5),push(cadr(p1)),Eval(),pop();return set_binding(s,p4),push_symbol(NIL)},Eval_gamma=function(){return push(cadr(p1)),Eval(),gamma()},gamma=function(){return save(),gammaf(),restore()},gammaf=function(){if(p1=pop(),isrational(p1)&&MEQUAL(p1.q.a,1)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power();return}if(isrational(p1)&&MEQUAL(p1.q.a,3)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power(),push_rational(1,2),multiply();return}if(isnegativeterm(p1)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_integer(-1),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push(p1),multiply(),sine(),push(p1),multiply(),push(p1),negate(),gamma(),multiply(),divide();return}if(car(p1)===symbol(ADD)){gamma_of_sum();return}push_symbol(GAMMA),push(p1),list(2)},gamma_of_sum=function(){if(p3=cdr(p1),isrational(car(p3))&&MEQUAL(car(p3).q.a,1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),push(cadr(p3)),gamma(),multiply();if(isrational(car(p3))&&MEQUAL(car(p3).q.a,-1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),gamma(),push(cadr(p3)),push_integer(-1),add(),divide();push_symbol(GAMMA),push(p1),list(2)},Eval_gcd=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),gcd(),t.push(p1=cdr(p1));return t},gcd=function(){var t;return t=expanding,save(),gcd_main(),restore(),expanding=t},gcd_main=function(){var t;if(expanding=1,p2=pop(),p1=pop(),DEBUG&&console.log("gcd_main: p1: "+p1+" p2: "+p2),equal(p1,p2)){push(p1);return}if(isrational(p1)&&isrational(p2)){push(p1),push(p2),gcd_numbers();return}if(t=areunivarpolysfactoredorexpandedform(p1,p2)){gcd_polys(t);return}if(car(p1)===symbol(ADD)&&car(p2)===symbol(ADD)){gcd_sum_sum();return}if(car(p1)===symbol(ADD)&&(gcd_sum(p1),p1=pop()),car(p2)===symbol(ADD)&&(gcd_sum(p2),p2=pop()),car(p1)===symbol(MULTIPLY)){gcd_sum_product();return}if(car(p2)===symbol(MULTIPLY)){gcd_product_sum();return}if(car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base()},areunivarpolysfactoredorexpandedform=function(t,n){var a;return DEBUG&&console.log("areunivarpolysfactoredorexpandedform: p1: "+t+" p2: "+n),(a=isunivarpolyfactoredorexpandedform(t))&&isunivarpolyfactoredorexpandedform(n,a)?a:!1},gcd_polys=function(t){if(DEBUG&&console.log("gcd_polys: p1: "+p1+" polyVar: "+t),push(p1),push(t),factorpoly(),p1=pop(),push(p2),push(t),factorpoly(),p2=pop(),DEBUG&&console.log("GCD: factored polys:"),DEBUG&&console.log("  p1:"+p1.toString()),DEBUG&&console.log("  p2:"+p2.toString()),(car(p1)===symbol(MULTIPLY)||car(p2)===symbol(MULTIPLY))&&(car(p1)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p1),push(one),list(3),p1=pop()),car(p2)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p2),push(one),list(3),p2=pop())),car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base(),!0},gcd_product_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);){for(p4=cdr(p2);iscons(p4);)push(car(p3)),push(car(p4)),gcd(),multiply(),p4=cdr(p4);t.push(p3=cdr(p3))}return t},gcd_powers_with_same_base=function(){if(car(p1)===symbol(POWER)?(p3=caddr(p1),p1=cadr(p1)):p3=one,car(p2)===symbol(POWER)?(p4=caddr(p2),p2=cadr(p2)):p4=one,!equal(p1,p2)){push(one);return}if(isNumericAtom(p3)&&isNumericAtom(p4)){push(p1),lessp(p3,p4)?push(p3):push(p4),power();return}if(push(p3),push(p4),divide(),p5=pop(),isNumericAtom(p5)){push(p1),car(p3)===symbol(MULTIPLY)&&isNumericAtom(cadr(p3))?p5=cadr(p3):p5=one,car(p4)===symbol(MULTIPLY)&&isNumericAtom(cadr(p4))?p6=cadr(p4):p6=one,lessp(p5,p6)?push(p3):push(p4),power();return}if(push(p3),push(p4),subtract(),p5=pop(),!isNumericAtom(p5)){push(one);return}return push(p1),isnegativenumber(p5)?push(p3):push(p4),power()},gcd_sum_sum=function(){if(length(p1)!==length(p2)){push(one);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);for(p3=pop(),p4=cdr(p2),push(car(p4)),p4=cdr(p4);iscons(p4);)push(car(p4)),gcd(),p4=cdr(p4);return p4=pop(),push(p1),push(p3),divide(),p5=pop(),push(p2),push(p4),divide(),p6=pop(),equal(p5,p6)?(push(p5),push(p3),push(p4),gcd(),multiply()):push(one)},gcd_sum=function(t){var n;for(t=cdr(t),push(car(t)),t=cdr(t),n=[];iscons(t);)push(car(t)),gcd(),n.push(t=cdr(t));return n},gcd_sum_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);)push(car(p3)),push(p2),gcd(),multiply(),t.push(p3=cdr(p3));return t},gcd_product_sum=function(){var t;for(push(one),p4=cdr(p2),t=[];iscons(p4);)push(p1),push(car(p4)),gcd(),multiply(),t.push(p4=cdr(p4));return t},guess=function(){var t;return t=pop(),push(t),Find(t,symbol(SYMBOL_X))?push_symbol(SYMBOL_X):Find(t,symbol(SYMBOL_Y))?push_symbol(SYMBOL_Y):Find(t,symbol(SYMBOL_Z))?push_symbol(SYMBOL_Z):Find(t,symbol(SYMBOL_T))?push_symbol(SYMBOL_T):Find(t,symbol(SYMBOL_S))?push_symbol(SYMBOL_S):push_symbol(SYMBOL_X)},hermite=function(){return save(),yyhermite(),restore()},yyhermite=function(){var t;if(t=0,p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(HERMITE),push(p1),push(p2),list(3);return}return issymbol(p1)?yyhermite2(t):(p3=p1,p1=symbol(SECRETX),yyhermite2(t),p1=p3,push(symbol(SECRETX)),push(p1),subst(),Eval())},yyhermite2=function(t){var n,a,s,l;for(n=0,push_integer(1),push_integer(0),p4=pop(),l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p5=p4,p4=pop(),push(p1),push(p4),multiply(),push_integer(n),push(p5),multiply(),subtract(),push_integer(2),l.push(multiply());return l},hilbert=function(){var t,n,a,s,l,u,c;if(t=0,a=0,s=0,save(),p2=pop(),push(p2),s=pop_integer(),s<2){push_symbol(HILBERT),push(p2),list(2),restore();return}for(push_zero_matrix(s,s),p1=pop(),t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l)for(a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)push_integer(t+a+1),inverse(),p1.tensor.elem[t*s+a]=pop();return push(p1),restore()},DEBUG_IMAG=!1,Eval_imag=function(){return push(cadr(p1)),Eval(),imag()},imag=function(){return save(),rect(),p1=pop(),DEBUG_IMAG&&console.log("IMAGE of "+p1),push(p1),push(p1),conjugate(),DEBUG_IMAG&&console.log(" image: conjugate result: "+stack[tos-1]),subtract(),push_integer(2),divide(),DEBUG_IMAG&&console.log(" image: 1st divide result: "+stack[tos-1]),push(imaginaryunit),divide(),DEBUG_IMAG&&console.log(" image: 2nd divide result: "+stack[tos-1]),restore()},index_function=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx;for(n=0,l=0,c=0,Ct=0,ar=0,sx=0,save(),ox=tos-t,p1=stack[ox],Ct=p1.tensor.ndim,c=t-1,c>Ct&&stop("too many indices for tensor"),l=0,n=en=0,tn=c;0<=tn?en<tn:en>tn;n=0<=tn?++en:--en)push(stack[ox+n+1]),sx=pop_integer(),(sx<1||sx>p1.tensor.dim[n])&&stop("index out of range"),l=l*p1.tensor.dim[n]+sx-1;if(Ct===c){moveTos(tos-t),push(p1.tensor.elem[l]),restore();return}for(n=a=on=c,cn=Ct;on<=cn?a<cn:a>cn;n=on<=cn?++a:--a)l=l*p1.tensor.dim[n]+0;for(ar=1,n=s=dn=c,Cn=Ct;dn<=Cn?s<Cn:s>Cn;n=dn<=Cn?++s:--s)ar*=p1.tensor.dim[n];for(p2=alloc_tensor(ar),p2.tensor.ndim=Ct-c,n=u=In=c,ix=Ct;In<=ix?u<ix:u>ix;n=In<=ix?++u:--u)p2.tensor.dim[n-c]=p1.tensor.dim[n];for(n=d=0,ax=ar;0<=ax?d<ax:d>ax;n=0<=ax?++d:--d)p2.tensor.elem[n]=p1.tensor.elem[l+n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},set_component=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox;for(n=0,l=0,c=0,ar=0,ox=0,save(),t<3&&stop("error in indexed assign"),ax=tos-t,p2=stack[ax],p1=stack[ax+1],istensor(p1)||stop("error in indexed assign: assigning to something that is not a tensor"),ar=p1.tensor.ndim,c=t-2,c>ar&&stop("error in indexed assign"),l=0,n=en=0,tn=c;0<=tn?en<tn:en>tn;n=0<=tn?++en:--en)push(stack[ax+n+2]),ox=pop_integer(),(ox<1||ox>p1.tensor.dim[n])&&stop(`error in indexed assign
`),l=l*p1.tensor.dim[n]+ox-1;for(n=a=on=c,cn=ar;on<=cn?a<cn:a>cn;n=on<=cn?++a:--a)l=l*p1.tensor.dim[n]+0;for(p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,n=s=0,dn=p1.tensor.ndim;0<=dn?s<dn:s>dn;n=0<=dn?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(n=u=0,Cn=p1.tensor.nelem;0<=Cn?u<Cn:u>Cn;n=0<=Cn?++u:--u)p3.tensor.elem[n]=p1.tensor.elem[n];if(check_tensor_dimensions(p1),check_tensor_dimensions(p3),p1=p3,ar===c){istensor(p2)&&stop("error in indexed assign"),p1.tensor.elem[l]=p2,check_tensor_dimensions(p1),moveTos(tos-t),push(p1),restore();return}for(istensor(p2)||stop("error in indexed assign"),ar-c!==p2.tensor.ndim&&stop("error in indexed assign"),n=d=0,In=p2.tensor.ndim;0<=In?d<In:d>In;n=0<=In?++d:--d)p1.tensor.dim[c+n]!==p2.tensor.dim[n]&&stop("error in indexed assign");for(n=Ct=0,ix=p2.tensor.nelem;0<=ix?Ct<ix:Ct>ix;n=0<=ix?++Ct:--Ct)p1.tensor.elem[l+n]=p2.tensor.elem[n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p1),restore()},Eval_inner=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In;for(In=[],In.push(car(cdr(p1))),dn=car(cdr(cdr(p1))),dn===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),u=cdr(cdr(p1));u!==symbol(NIL);)In.push(car(u)),u=cdr(u);if(In.length>2){for(push_symbol(INNER),push(In[In.length-2]),push(In[In.length-1]),list(3),n=c=2,Ct=In.length;2<=Ct?c<Ct:c>Ct;n=2<=Ct?++c:--c)push_symbol(INNER),swap(),push(In[In.length-n-1]),swap(),list(3);p1=pop(),Eval_inner();return}for(d=[],get_innerprod_factors(p1,d),on=[],n=a=0,ar=d.length;0<=ar?a<ar:a>ar;n=0<=ar?++a:--a)d[n]!==symbol(SYMBOL_IDENTITY_MATRIX)&&on.push(d[n]);if(d=on,on=[],d.length>1){for(Cn=0,n=s=0,en=d.length;(0<=en?s<en:s>en)&&n+Cn+1<=d.length-1;n=0<=en?++s:--s){isNumericAtomOrTensor(d[n+Cn])||isNumericAtomOrTensor(d[n+Cn+1])?on.push(d[n+Cn]):(push(d[n+Cn]),Eval(),inv(),push(d[n+Cn+1]),Eval(),subtract(),t=pop(),isZeroAtomOrTensor(t)?Cn+=1:on.push(d[n+Cn]));if(n+Cn===d.length-2&&on.push(d[d.length-1]),n+Cn>=d.length-1)break}d=on}if(push(symbol(INNER)),d.length>0)for(n=l=0,tn=d.length;0<=tn?l<tn:l>tn;n=0<=tn?++l:--l)push(d[n]);else{pop(),push(symbol(SYMBOL_IDENTITY_MATRIX));return}for(list(d.length+1),p1=pop(),p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),cn=[];iscons(p1);)push(car(p1)),Eval(),inner(),cn.push(p1=cdr(p1));return cn},inner=function(){var t,n,a,s;if(save(),p2=pop(),p1=pop(),isnegativeterm(p2)&&isnegativeterm(p1)&&(push(p2),negate(),p2=pop(),push(p1),negate(),p1=pop()),isinnerordot(p1)&&(t=car(cdr(p1)),n=car(cdr(cdr(p1))),a=p2,p1=t,push(n),push(a),inner(),p2=pop()),p1===symbol(SYMBOL_IDENTITY_MATRIX)){push(p2),restore();return}else if(p2===symbol(SYMBOL_IDENTITY_MATRIX)){push(p1),restore();return}if(istensor(p1)&&istensor(p2))inner_f();else{if(!(isNumericAtomOrTensor(p1)||isNumericAtomOrTensor(p2))&&(push(p1),push(p2),inv(),subtract(),s=pop(),isZeroAtomOrTensor(s))){push_symbol(SYMBOL_IDENTITY_MATRIX),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),inner(),add(),p1=cdr(p1);restore();return}if(expanding&&isadd(p2)){for(p2=cdr(p2),push(zero);iscons(p2);)push(p1),push(car(p2)),inner(),add(),p2=cdr(p2);restore();return}if(push(p1),push(p2),istensor(p1)&&isNumericAtom(p2))tensor_times_scalar();else if(isNumericAtom(p1)&&istensor(p2))scalar_times_tensor();else if(isNumericAtom(p1)||isNumericAtom(p2))multiply();else{pop(),pop(),push_symbol(INNER),push(p1),push(p2),list(3),restore();return}}return restore()},inner_f=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx;if(u=0,on=p1.tensor.dim[p1.tensor.ndim-1],on!==p2.tensor.dim[0]){debugger;stop("inner: tensor dimension check")}for(dn=p1.tensor.ndim+p2.tensor.ndim-2,dn>MAXDIM&&stop("inner: rank of result exceeds maximum"),t=p1.tensor.elem,a=p2.tensor.elem,n=1,u=Cn=0,ix=p1.tensor.ndim-1;0<=ix?Cn<ix:Cn>ix;u=0<=ix?++Cn:--Cn)n*=p1.tensor.dim[u];for(s=1,u=c=1,ax=p2.tensor.ndim;1<=ax?c<ax:c>ax;u=1<=ax?++c:--c)s*=p2.tensor.dim[u];for(p3=alloc_tensor(n*s),l=p3.tensor.elem,u=Ct=0,ox=n;0<=ox?Ct<ox:Ct>ox;u=0<=ox?++Ct:--Ct)for(d=en=0,sx=on;0<=sx?en<sx:en>sx;d=0<=sx?++en:--en)if(!isZeroAtomOrTensor(t[u*on+d]))for(ar=tn=0,ux=s;0<=ux?tn<ux:tn>ux;ar=0<=ux?++tn:--tn)push(t[u*on+d]),push(a[d*s+ar]),multiply(),push(l[u*s+ar]),add(),l[u*s+ar]=pop();if(dn===0)return push(p3.tensor.elem[0]);for(p3.tensor.ndim=dn,d=0,u=cn=0,cx=p1.tensor.ndim-1;0<=cx?cn<cx:cn>cx;u=0<=cx?++cn:--cn)p3.tensor.dim[u]=p1.tensor.dim[u];for(d=p1.tensor.ndim-1,u=In=0,hx=p2.tensor.ndim-1;0<=hx?In<hx:In>hx;u=0<=hx?++In:--In)p3.tensor.dim[d+u]=p2.tensor.dim[u+1];return push(p3)},get_innerprod_factors=function(t,n){if(!iscons(t)){add_factor_to_accumulator(t,n);return}if(cdr(t)===symbol(NIL)){t=get_innerprod_factors(car(t),n);return}if(isinnerordot(t)){get_innerprod_factors(car(cdr(t)),n),get_innerprod_factors(cdr(cdr(t)),n);return}return add_factor_to_accumulator(t,n)},add_factor_to_accumulator=function(t,n){if(t!==symbol(NIL))return n.push(t)},itab=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))",0],Eval_integral=function(){var t,n,a,s,l;for(n=0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth integral: check n")):n=1,push(p3),n>=0)for(a=0,s=n;0<=s?a<s:a>s;0<=s?++a:--a)push(p4),integral();else for(n=-n,t=0,l=n;0<=l?t<l:t>l;0<=l?++t:--t)push(p4),derivative();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},integral=function(){return save(),p2=pop(),p1=pop(),car(p1)===symbol(ADD)?integral_of_sum():car(p1)===symbol(MULTIPLY)?integral_of_product():integral_of_form(),p1=pop(),Find(p1,symbol(INTEGRAL))&&stop("integral: sorry, could not find a solution"),push(p1),simplify(),Eval(),restore()},integral_of_sum=function(){var t;for(p1=cdr(p1),push(car(p1)),push(p2),integral(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),integral(),add(),t.push(p1=cdr(p1));return t},integral_of_product=function(){return push(p1),push(p2),partition(),p1=pop(),integral_of_form(),multiply()},integral_of_form=function(){var t,n;if(t=italu_hashcode(p1,p2).toFixed(6),n=hashed_itab[t],!n){push_symbol(INTEGRAL),push(p1),push(p2),list(3);return}return push(p1),push(p2),transform(n,!1),p3=pop(),p3===symbol(NIL)?(push_symbol(INTEGRAL),push(p1),push(p2),list(3)):push(p3)},hashcode_values={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916},italu_hashcode=function(t,n){var a;if(issymbol(t))return equal(t,n)?hashcode_values.x:hashcode_values.constant;if(iscons(t))switch(symnum(car(t))){case ADD:return hash_addition(cdr(t),n);case MULTIPLY:return hash_multiplication(cdr(t),n);case POWER:return hash_power(cadr(t),caddr(t),n);case EXP:return hash_power(symbol(E),cadr(t),n);case SQRT:return push_double(.5),a=pop(),hash_power(cadr(t),a,n);default:return hash_function(t,n)}return hashcode_values.constant},hash_function=function(t,n){var a,s,l;if(!Find(cadr(t),n))return hashcode_values.constant;if(l=car(t),a=italu_hashcode(cadr(t),n),s=hashcode_values[l.printname],!s)throw new Error("Unsupported function "+l.printname);return Math.pow(s,a)},hash_addition=function(t,n){var a,s,l,u,c;for(c={};iscons(t);)l=car(t),t=cdr(t),u=0,Find(l,n)?u=italu_hashcode(l,n):u=hashcode_values.constant,c[u.toFixed(6)]=!0;s=0;for(a in c)hasProp.call(c,a)&&(c[a],s=s+parseFloat(a,10));return s},hash_multiplication=function(t,n){var a,s;for(a=1;iscons(t);)s=car(t),t=cdr(t),Find(s,n)&&(a=a*italu_hashcode(s,n));return a},hash_power=function(t,n,a){var s,l;if(s=hashcode_values.constant,l=hashcode_values.constexp,Find(t,a)&&(s=italu_hashcode(t,a)),Find(n,a))l=italu_hashcode(n,a);else{if(s===hashcode_values.constant)return hashcode_values.constant;isminusone(n)?l=-1:isoneovertwo(n)?l=.5:isminusoneovertwo(n)?l=-.5:equalq(n,2,1)?l=2:equalq(n,-2,1)&&(l=-2)}return Math.pow(s,l)},make_hashed_itab=function(){var t,n,a,s,l,u,c,d;for(c={},l=0,s=itab.length;l<s&&(u=itab[l],!!u);l++)scan_meta(u),t=pop(),d=cadr(t),n=italu_hashcode(d,symbol(METAX)),a=n.toFixed(6),c[a]||(c[a]=[]),c[a].push(u);return console.log("hashed_itab = "+JSON.stringify(c,null,2)),c},$.make_hashed_itab=make_hashed_itab,hashed_itab={"1.144166":["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],"1.095727":["f(x^(-2),-x^(-1))"],"1.023118":["f(x^(-1/2),2*x^(1/2))"],"0.977405":["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],"0.912636":["f(x^2,x^3/3)"],"1.137302":["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],"1.326774":["f(exp(a*x+b),1/a*exp(a*x+b))"],"1.080259":["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],"1.260228":["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],"1.451902":["f(log(a*x),x*log(a*x)-x)"],"0.486192":["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],"0.697274":["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],"0.476307":["f(1/(a+b*x),1/b*log(a+b*x))"],"0.226868":["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],"2.904531":["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],"0.455026":["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],"0.216732":["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],"0.434695":["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],"0.207048":["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],"2.650781":["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],"0.498584":["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],"0.237479":["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],"3.040375":["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],"0.521902":["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],"0.446014":["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],"0.248586":["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],"0.464469":["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],"0.443716":["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],"0.236382":["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],"0.508931":["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],"0.532733":["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],"0.480638":["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],"0.438648":["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],"0.459164":["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],"1.384221":["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],"1.322374":["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],"1.516728":["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],"1.587665":["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],"0.659314":["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],"0.629856":["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],"0.722428":["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],"0.756216":["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],"1.434156":["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],"0.729886":["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],"1.370077":["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],"1.730087":["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],"0.578006":["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],"1.652787":["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],"1.308862":["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],"1.342944":["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],"0.636358":["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"0.652928":["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],"0.764022":["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],"1.620055":["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],"0.332117":["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],"1.571443":["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"1.690994":["f(sin(a*x),-cos(a*x)/a)"],"1.055979":["f(cos(a*x),sin(a*x)/a)"],"1.116714":["f(tan(a*x),-log(cos(a*x))/a)"],"0.895484":["f(1/tan(a*x),log(sin(a*x))/a)"],"0.946989":["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],"0.591368":["f(1/sin(a*x),log(tan(a*x/2))/a)"],"2.859462":["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"1.115091":["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],"1.081452":["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"0.349716":["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],"0.896788":["f(1/cos(a*x)^2,tan(a*x)/a)"],"1.785654":["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],"1.516463":["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],"2.707879":["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],"0.369293":["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],"0.560019":["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],"0.530332":["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],"0.331177":["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],"0.313621":["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],"3.172365":["f(sin(a+b*x),-cos(a+b*x)/b)"],"1.127162":["f(cos(a+b*x),sin(a+b*x)/b)"],"0.352714":["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],"0.454515":["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],"1.615441":["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],"1.543263":["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],"1.008798":["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],"0.963724":["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],"1.611938":["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],"1.791033":["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],"1.123599":["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],"1.387031":["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],"1.325058":["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],"2.108018":["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],"0.403214":["f(1/x*1/(a+log(x)),log(a+log(x)))"],"2.269268":["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],"2.486498":["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],"1.769733":["f(sinh(x),cosh(x))"],"1.883858":["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],"1.690661":["f(x*sinh(x),x*cosh(x)-sinh(x))"],"1.799688":["f(x*cosh(x),x*sinh(x)-cosh(x))"],"3.131954":["f(sinh(x)^2,sinh(2*x)/4-x/2)"],"2.579685":["f(tanh(x)^2,x-tanh(x))"],"3.548923":["f(cosh(x)^2,sinh(2*x)/4+x/2)"],"1.058866":["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],"1.130783":["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],"1.078698":["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],"2.640666":["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],"1.086487":["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],"1.267493":["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],"1.037943":["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.210862":["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],"1.242392":["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]},INV_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},inv=function(){var t,n,a,s;if(save(),p1=pop(),isinv(p1)){push(car(cdr(p1))),restore();return}if(isidentitymatrix(p1)){push(p1),restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),t=[];iscons(p1);)t.push(car(p1)),p1=cdr(p1);for(n=a=s=t.length-1;s<=0?a<=0:a>=0;n=s<=0?++a:--a)push(t[n]),inv(),n!==t.length-1&&inner();restore();return}if(INV_check_arg()===0){push_symbol(INV),push(p1),list(2),restore();return}return isNumericAtomOrTensor(p1)?yyinvg():(push(p1),adj(),push(p1),det(),p2=pop(),isZeroAtomOrTensor(p2)&&stop("inverse of singular matrix"),push(p2),divide()),restore()},invg=function(){if(save(),p1=pop(),INV_check_arg()===0){push_symbol(INVG),push(p1),list(2),restore();return}return yyinvg(),restore()},yyinvg=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn;for(t=0,n=0,s=0,c=0,c=p1.tensor.dim[0],t=tos,n=d=0,Ct=c;0<=Ct?d<Ct:d>Ct;n=0<=Ct?++d:--d)for(s=a=0,ar=c;0<=ar?a<ar:a>ar;s=0<=ar?++a:--a)push(n===s?one:zero);for(n=l=0,en=c*c;0<=en?l<en:l>en;n=0<=en?++l:--l)push(p1.tensor.elem[n]);for(INV_decomp(c),p1=alloc_tensor(c*c),p1.tensor.ndim=2,p1.tensor.dim[0]=c,p1.tensor.dim[1]=c,n=u=0,tn=c*c;0<=tn?u<tn:u>tn;n=0<=tn?++u:--u)p1.tensor.elem[n]=stack[t+n];return moveTos(tos-2*c*c),push(p1)},INV_decomp=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;for(n=0,a=0,s=0,u=0,Cn=0,n=tos-t*t,Cn=n-t*t,dn=[],a=Ct=0,ar=t;0<=ar?Ct<ar:Ct>ar;a=0<=ar?++Ct:--Ct){if(equal(stack[n+t*a+a],zero)){for(s=l=en=a+1,tn=t;(en<=tn?l<tn:l>tn)&&equal(stack[n+t*s+a],zero);s=en<=tn?++l:--l);for(s===t&&stop("inverse of singular matrix"),u=c=0,on=t;0<=on?c<on:c>on;u=0<=on?++c:--c)p2=stack[n+t*a+u],stack[n+t*a+u]=stack[n+t*s+u],stack[n+t*s+u]=p2,p2=stack[Cn+t*a+u],stack[Cn+t*a+u]=stack[Cn+t*s+u],stack[Cn+t*s+u]=p2}for(p2=stack[n+t*a+a],u=d=0,cn=t;0<=cn?d<cn:d>cn;u=0<=cn?++d:--d)u>a&&(push(stack[n+t*a+u]),push(p2),divide(),stack[n+t*a+u]=pop()),push(stack[Cn+t*a+u]),push(p2),divide(),stack[Cn+t*a+u]=pop();dn.push((function(){var In,ix,ax;for(ax=[],s=In=0,ix=t;0<=ix?In<ix:In>ix;s=0<=ix?++In:--In)s!==a&&(p2=stack[n+t*s+a],ax.push((function(){var ox,sx,ux;for(ux=[],u=ox=0,sx=t;0<=sx?ox<sx:ox>sx;u=0<=sx?++ox:--ox)u>a&&(push(stack[n+t*s+u]),push(stack[n+t*a+u]),push(p2),multiply(),subtract(),stack[n+t*s+u]=pop()),push(stack[Cn+t*s+u]),push(stack[Cn+t*a+u]),push(p2),multiply(),subtract(),ux.push(stack[Cn+t*s+u]=pop());return ux})()));return ax})())}return dn},DEBUG_IS=!1,isZeroAtom=function(t){switch(t.k){case NUM:return MZERO(t.q.a);case DOUBLE:return t.d===0;default:return!1}},isZeroTensor=function(t){var n,a,s;if(t.k!==TENSOR)return 0;for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(!isZeroAtomOrTensor(t.tensor.elem[n]))return 0;return 1},isZeroAtomOrTensor=function(t){return isZeroAtom(t)||isZeroTensor(t)},isZeroLikeOrNonZeroLikeOrUndetermined=function(t){var n;if(push(t),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(push(n),zzfloat(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(Find(n,imaginaryunit)){if(push(n),absValFloat(),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1}return null},isnegativenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===-1)return 1;break;case DOUBLE:if(t.d<0)return 1}return 0},ispositivenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===1)return 1;break;case DOUBLE:if(t.d>0)return 1}return 0},isplustwo=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,2)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===2)return 1}return 0},isplusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===1)return 1}return 0},isminusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,-1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===-1)return 1}return 0},isone=function(t){return isplusone(t)||isminusone(t)},isinteger=function(t){return t.k===NUM&&MEQUAL(t.q.b,1)?1:0},isintegerorintegerfloat=function(t){return t.k===DOUBLE?t.d===Math.round(t.d)?1:0:isinteger(t)},isnonnegativeinteger=function(t){return isrational(t)&&MEQUAL(t.q.b,1)&&MSIGN(t.q.a)===1?1:0},isposint=function(t){return isinteger(t)&&MSIGN(t.q.a)===1?1:0},isunivarpolyfactoredorexpandedform=function(t,n){return DEBUG&&console.log("isunivarpolyfactoredorexpandedform: p: "+t+" x: "+n),n==null&&(push(t),guess(),n=pop(),pop()),ispolyfactoredorexpandedform(t,n)&&Find(t,symbol(SYMBOL_X))+Find(t,symbol(SYMBOL_Y))+Find(t,symbol(SYMBOL_Z))===1?n:0},ispolyfactoredorexpandedform=function(t,n){return ispolyfactoredorexpandedform_factor(t,n)},ispolyfactoredorexpandedform_factor=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(DEBUG&&console.log("ispolyfactoredorexpandedform_factor testing "+car(t)),!ispolyfactoredorexpandedform_power(car(t),n))return DEBUG&&console.log("... tested negative:"+car(t)),0;t=cdr(t)}return 1}else return ispolyfactoredorexpandedform_power(t,n)},ispolyfactoredorexpandedform_power=function(t,n){return car(t)===symbol(POWER)?(DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(isposint(caddr(t)),DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+ispolyexpandedform_expr(cadr(t),n)):void 0)),isposint(caddr(t))&&ispolyexpandedform_expr(cadr(t),n)):(DEBUG&&console.log("ispolyfactoredorexpandedform_power not a power, testing if this is exp form: "+t),ispolyexpandedform_expr(t,n))},ispolyexpandedform=function(t,n){return Find(t,n)?ispolyexpandedform_expr(t,n):0},ispolyexpandedform_expr=function(t,n){if(car(t)===symbol(ADD)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_term(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_term(t,n)},ispolyexpandedform_term=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_factor(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_factor(t,n)},ispolyexpandedform_factor=function(t,n){return equal(t,n)?1:car(t)===symbol(POWER)&&equal(cadr(t),n)?isposint(caddr(t))?1:0:Find(t,n)?0:1},isnegativeterm=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},hasNegativeRationalExponent=function(t){return car(t)===symbol(POWER)&&isrational(car(cdr(cdr(t))))&&isnegativenumber(car(cdr(t)))?(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has imaginary component"),1):(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has NO imaginary component"),0)},isimaginarynumberdouble=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isdouble(cadr(t))&&hasNegativeRationalExponent(caddr(t))||equal(t,imaginaryunit)?1:0},isimaginarynumber=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isNumericAtom(cadr(t))&&equal(caddr(t),imaginaryunit)||equal(t,imaginaryunit)||hasNegativeRationalExponent(caddr(t))?(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" is imaginary number"),1):(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" isn't an imaginary number"),0)},iscomplexnumberdouble=function(t){return car(t)===symbol(ADD)&&length(t)===3&&isdouble(cadr(t))&&isimaginarynumberdouble(caddr(t))||isimaginarynumberdouble(t)?1:0},iscomplexnumber=function(t){if(DEBUG_IS)debugger;return car(t)===symbol(ADD)&&length(t)===3&&isNumericAtom(cadr(t))&&isimaginarynumber(caddr(t))||isimaginarynumber(t)?(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),1):(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),0)},iseveninteger=function(t){return isinteger(t)&&t.q.a.isEven()?1:0},isnegative=function(t){return car(t)===symbol(ADD)&&isnegativeterm(cadr(t))||isnegativeterm(t)?1:0},issymbolic=function(t){if(issymbol(t))return 1;for(;iscons(t);){if(issymbolic(car(t)))return 1;t=cdr(t)}return 0},isintegerfactor=function(t){return isinteger(t)||car(t)===symbol(POWER)&&isinteger(cadr(t))&&isinteger(caddr(t))},isNumberOneOverSomething=function(t){return isfraction(t)&&MEQUAL(t.q.a.abs(),1)},isoneover=function(t){return car(t)===symbol(POWER)&&isminusone(caddr(t))},isfraction=function(t){return t.k===NUM&&!MEQUAL(t.q.b,1)},equaln=function(t,n){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,1);case DOUBLE:return t.d===n;default:return!1}},equalq=function(t,n,a){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,a);case DOUBLE:return t.d===n/a;default:return!1}},isoneovertwo=function(t){return equalq(t,1,2)},isminusoneovertwo=function(t){return equalq(t,-1,2)},isoneoversqrttwo=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),2)&&equalq(caddr(t),-1,2)},isminusoneoversqrttwo=function(t){return car(t)===symbol(MULTIPLY)&&equaln(cadr(t),-1)&&isoneoversqrttwo(caddr(t))&&length(t)===3},issqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},isminussqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isminusoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},issqrtthree=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),3)&&isoneovertwo(caddr(t))},isfloating=function(t){if(t.k===DOUBLE||t===symbol(FLOATF))return 1;for(;iscons(t);){if(isfloating(car(t)))return 1;t=cdr(t)}return 0},isimaginaryunit=function(t){return equal(t,imaginaryunit)?1:0},isquarterturn=function(t){var n,a;if(a=0,n=0,car(t)!==symbol(MULTIPLY))return 0;if(equal(cadr(t),imaginaryunit))return caddr(t)!==symbol(PI)||length(t)!==3?0:2;if(!isNumericAtom(cadr(t))||!equal(caddr(t),imaginaryunit)||cadddr(t)!==symbol(PI)||length(t)!==4||(push(cadr(t)),push_integer(2),multiply(),a=pop_integer(),isNaN(a)))return 0;switch(a<1&&(n=1,a=-a),a%4){case 0:a=1;break;case 1:n?a=4:a=3;break;case 2:a=2;break;case 3:n?a=3:a=4}return a},isnpi=function(t){var n;return n=0,t===symbol(PI)?2:!(car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&caddr(t)===symbol(PI)&&length(t)===3)||(push(cadr(t)),push_integer(2),multiply(),n=pop_integer(),isNaN(n))?0:(n<0?n=4- -n%4:n=1+(n-1)%4,n)},$.isZeroAtomOrTensor=isZeroAtomOrTensor,$.isnegativenumber=isnegativenumber,$.isplusone=isplusone,$.isminusone=isminusone,$.isinteger=isinteger,$.isnonnegativeinteger=isnonnegativeinteger,$.isposint=isposint,$.isnegativeterm=isnegativeterm,$.isimaginarynumber=isimaginarynumber,$.iscomplexnumber=iscomplexnumber,$.iseveninteger=iseveninteger,$.isnegative=isnegative,$.issymbolic=issymbolic,$.isintegerfactor=isintegerfactor,$.isoneover=isoneover,$.isfraction=isfraction,$.isoneoversqrttwo=isoneoversqrttwo,$.isminusoneoversqrttwo=isminusoneoversqrttwo,$.isfloating=isfloating,$.isimaginaryunit=isimaginaryunit,$.isquarterturn=isquarterturn,$.isnpi=isnpi,Eval_isprime=function(){return push(cadr(p1)),Eval(),p1=pop(),isnonnegativeinteger(p1)&&mprime(p1.q.a)?push_integer(1):push_integer(0)},Eval_laguerre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),laguerre()},laguerre=function(){var t;if(t=0,save(),p3=pop(),p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(LAGUERRE),push(p1),push(p2),push(p3),list(4),restore();return}return issymbol(p1)?laguerre2(t):(p4=p1,p1=symbol(SECRETX),laguerre2(t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),restore()},laguerre2=function(t){var n,a,s,l;for(n=0,push_integer(1),push_integer(0),p6=pop(),l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p5=p6,p6=pop(),push_integer(2*n+1),push(p1),subtract(),push(p3),add(),push(p6),multiply(),push_integer(n),push(p3),add(),push(p5),multiply(),subtract(),push_integer(n+1),l.push(divide());return l},Eval_lcm=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),lcm(),t.push(p1=cdr(p1));return t},lcm=function(){var t;return t=expanding,save(),yylcm(),restore(),expanding=t},yylcm=function(){return expanding=1,p2=pop(),p1=pop(),push(p1),push(p2),gcd(),push(p1),divide(),push(p2),divide(),inverse()},Eval_leading=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),leading()},leading=function(){return save(),p2=pop(),p1=pop(),push(p1),push(p2),degree(),p3=pop(),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter(),restore()},Eval_legendre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),legendre()},legendre=function(){return save(),__legendre(),restore()},__legendre=function(){var t,n;if(t=0,n=0,p3=pop(),p2=pop(),p1=pop(),push(p2),n=pop_integer(),push(p3),t=pop_integer(),n<0||isNaN(n)||t<0||isNaN(t)){push_symbol(LEGENDRE),push(p1),push(p2),push(p3),list(4);return}return issymbol(p1)?__legendre2(n,t):(p4=p1,p1=symbol(SECRETX),__legendre2(n,t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),__legendre3(t)},__legendre2=function(t,n){var a,s,l,u,c,d;for(a=0,push_integer(1),push_integer(0),p6=pop(),a=l=0,u=t;0<=u?l<u:l>u;a=0<=u?++l:--l)p5=p6,p6=pop(),push_integer(2*a+1),push(p1),multiply(),push(p6),multiply(),push_integer(a),push(p5),multiply(),subtract(),push_integer(a+1),divide();for(d=[],a=s=0,c=n;0<=c?s<c:s>c;a=0<=c?++s:--s)push(p1),d.push(derivative());return d},__legendre3=function(t){if(t!==0&&(car(p1)===symbol(COS)?(push(cadr(p1)),sine(),square()):car(p1)===symbol(SIN)?(push(cadr(p1)),cosine(),square()):(push_integer(1),push(p1),square(),subtract()),push_integer(t),push_rational(1,2),multiply(),power(),multiply(),t%2))return negate()},list=function(t){var n,a,s;for(push(symbol(NIL)),s=[],n=0,a=t;0<=a?n<a:n>a;0<=a?++n:--n)s.push(cons());return s},Eval_log=function(){return push(cadr(p1)),Eval(),logarithm()},logarithm=function(){return save(),yylog(),restore()},yylog=function(){var t;if(t=0,p1=pop(),p1===symbol(E)){push_integer(1);return}if(equaln(p1,1)){push_integer(0);return}if(isnegativenumber(p1)){push(p1),negate(),logarithm(),push(imaginaryunit),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),multiply(),add();return}if(isdouble(p1)){t=Math.log(p1.d),push_double(t);return}if(isfraction(p1)){push(p1),numerator(),logarithm(),push(p1),denominator(),logarithm(),subtract();return}if(car(p1)===symbol(POWER)){push(caddr(p1)),push(cadr(p1)),logarithm(),multiply();return}if(car(p1)===symbol(MULTIPLY)){for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),logarithm(),add(),p1=cdr(p1);return}return push_symbol(LOG),push(p1),list(2)},Eval_lookup=function(){return p1=cadr(p1),!iscons(p1)&&cadr(p1).k===SYM&&(p1=get_binding(p1)),push(p1)},madd=function(t,n){return t.add(n)},msub=function(t,n){return t.subtract(n)},mgcd=function(t,n){return bigInt.gcd(t,n)},new_string=function(t){var n;return n=new U,n.k=STR,n.str=t,n},push_zero_matrix=function(t,n){return push(alloc_tensor(t*n)),stack[tos-1].tensor.ndim=2,stack[tos-1].tensor.dim[0]=t,stack[tos-1].tensor.dim[1]=n},equal=function(t,n){return cmp_expr(t,n)===0?1:0},lessp=function(t,n){return cmp_expr(t,n)<0?1:0},sign=function(t){return t<0?-1:t>0?1:0},cmp_expr=function(t,n){var a;if(a=0,t===n)return 0;if(t===symbol(NIL))return-1;if(n===symbol(NIL))return 1;if(isNumericAtom(t)&&isNumericAtom(n))return sign(compare_numbers(t,n));if(isNumericAtom(t))return-1;if(isNumericAtom(n))return 1;if(isstr(t)&&isstr(n))return sign(strcmp(t.str,n.str));if(isstr(t))return-1;if(isstr(n))return 1;if(issymbol(t)&&issymbol(n))return sign(strcmp(get_printname(t),get_printname(n)));if(issymbol(t))return-1;if(issymbol(n))return 1;if(istensor(t)&&istensor(n))return compare_tensors(t,n);if(istensor(t))return-1;if(istensor(n))return 1;for(;iscons(t)&&iscons(n);){if(a=cmp_expr(car(t),car(n)),a!==0)return a;t=cdr(t),n=cdr(n)}return iscons(n)?-1:iscons(t)?1:0},length=function(t){var n;for(n=0;iscons(t);)t=cdr(t),n++;return n},yyexpand=function(){var t;return t=expanding,expanding=1,Eval(),expanding=t},exponential=function(){return push_symbol(E),swap(),power()},square=function(){return push_integer(2),power()},sort_stack=function(t){var n,a;return n=tos-t,a=stack.slice(n,n+t),a.sort(cmp_expr),stack=stack.slice(0,n).concat(a).concat(stack.slice(n+t))},$.equal=equal,$.length=length,mmul=function(t,n){return t.multiply(n)},mdiv=function(t,n){return t.divide(n)},mmod=function(t,n){return t.mod(n)},mdivrem=function(t,n){var a;return a=t.divmod(n),[a.quotient,a.remainder]},Eval_mod=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),mod()},mod=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("mod function: divide by zero"),!isNumericAtom(p1)||!isNumericAtom(p2)){push_symbol(MOD),push(p1),push(p2),list(3),restore();return}return isdouble(p1)&&(push(p1),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p1=pop()),isdouble(p2)&&(push(p2),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p2=pop()),(!isinteger(p1)||!isinteger(p2))&&stop("mod function: integer arguments expected"),p3=new U,p3.k=NUM,p3.q.a=mmod(p1.q.a,p2.q.a),p3.q.b=mint(1),push(p3),restore()},mpow=function(t,n){return t.pow(n)},mprime=function(t){return t.isProbablePrime()},mroot=function(t,n){var a,s,l,u,c,d,Ct;for(t=t.abs(),a=0,s=0,l=0,n===0&&stop("root index is zero"),l=0;t.shiftRight(l)>0;)l++;if(l===0)return mint(0);for(l=Math.floor((l-1)/n),s=Math.floor(l/32+1),d=bigInt(s),a=u=0,c=s;0<=c?u<c:u>c;a=0<=c?++u:--u)d=d.and(bigInt(1).shiftLeft(a).not());for(;l>=0;){switch(d=d.or(bigInt(1).shiftLeft(l)),Ct=mpow(d,n),mcmp(Ct,t)){case 0:return d;case 1:d=d.and(bigInt(1).shiftLeft(l).not())}l--}return 0},DEBUG_MULTIPLY=!1,Eval_multiply=function(){var t;for(push(cadr(p1)),Eval(),p1=cddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),multiply(),t.push(p1=cdr(p1));return t},multiply=function(){return esc_flag&&stop("escape key stop"),isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?multiply_numbers():(save(),yymultiply(),restore())},yymultiply=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,p2=pop(),p1=pop(),t=tos,isZeroAtom(p1)||isZeroAtom(p2)){evaluatingAsFloats?push_double(0):push(zero);return}if(expanding&&isadd(p1)){for(p1=cdr(p1),evaluatingAsFloats?push_double(0):push(zero);iscons(p1);)push(car(p1)),push(p2),multiply(),add(),p1=cdr(p1);return}if(expanding&&isadd(p2)){for(p2=cdr(p2),evaluatingAsFloats?push_double(0):push(zero);iscons(p2);)push(p1),push(car(p2)),multiply(),add(),p2=cdr(p2);return}if(!istensor(p1)&&istensor(p2)){push(p1),push(p2),scalar_times_tensor();return}if(istensor(p1)&&!istensor(p2)){push(p1),push(p2),tensor_times_scalar();return}for(car(p1)===symbol(MULTIPLY)?p1=cdr(p1):(push(p1),list(1),p1=pop()),car(p2)===symbol(MULTIPLY)?p2=cdr(p2):(push(p2),list(1),p2=pop()),isNumericAtom(car(p1))&&isNumericAtom(car(p2))?(push(car(p1)),push(car(p2)),multiply_numbers(),p1=cdr(p1),p2=cdr(p2)):isNumericAtom(car(p1))?(push(car(p1)),p1=cdr(p1)):isNumericAtom(car(p2))?(push(car(p2)),p2=cdr(p2)):evaluatingAsFloats?push_double(1):push(one),parse_p1(),parse_p2();iscons(p1)&&iscons(p2);){if(caar(p1)===symbol(OPERATOR)&&caar(p2)===symbol(OPERATOR)){push_symbol(OPERATOR),push(cdar(p1)),push(cdar(p2)),append(),cons(),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();continue}switch(cmp_expr(p3,p4)){case-1:push(car(p1)),p1=cdr(p1),parse_p1();break;case 1:push(car(p2)),p2=cdr(p2),parse_p2();break;case 0:combine_factors(t),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();break;default:stop("internal error 2")}}for(;iscons(p1);)push(car(p1)),p1=cdr(p1);for(;iscons(p2);)push(car(p2)),p2=cdr(p2);if(__normalize_radical_factors(t),expanding){for(n=s=l=t,u=tos;l<=u?s<u:s>u;n=l<=u?++s:--s)if(isadd(stack[n])){multiply_all(tos-t);return}}if(a=tos-t,a!==1){if(isrational(stack[t])&&equaln(stack[t],1)){a===2?(p7=pop(),pop(),push(p7)):(stack[t]=symbol(MULTIPLY),list(a));return}return list(a),p7=pop(),push_symbol(MULTIPLY),push(p7),cons()}},parse_p1=function(){if(p3=car(p1),p5=evaluatingAsFloats?one_as_double:one,car(p3)===symbol(POWER))return p5=caddr(p3),p3=cadr(p3)},parse_p2=function(){if(p4=car(p2),p6=evaluatingAsFloats?one_as_double:one,car(p4)===symbol(POWER))return p6=caddr(p4),p4=cadr(p4)},combine_factors=function(t){return push(p4),push(p5),push(p6),add(),power(),p7=pop(),isNumericAtom(p7)?(push(stack[t]),push(p7),multiply_numbers(),stack[t]=pop()):car(p7)===symbol(MULTIPLY)&&isNumericAtom(cadr(p7))&&cdddr(p7)===symbol(NIL)?(push(stack[t]),push(cadr(p7)),multiply_numbers(),stack[t]=pop(),push(caddr(p7))):push(p7)},multiply_noexpand=function(){var t;return t=expanding,expanding=0,multiply(),expanding=t},multiply_all=function(t){var n,a,s,l;if(a=0,t!==1){if(t===0){push(evaluatingAsFloats?one_as_double:one);return}for(n=tos-t,push(stack[n]),a=s=1,l=t;1<=l?s<l:s>l;a=1<=l?++s:--s)push(stack[n+a]),multiply();return stack[n]=pop(),moveTos(n+1)}},multiply_all_noexpand=function(t){var n;return n=expanding,expanding=0,multiply_all(t),expanding=n},divide=function(){return isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?divide_numbers():(inverse(),multiply())},inverse=function(){return isNumericAtom(stack[tos-1])?invert_number():(push_integer(-1),power())},reciprocate=function(){return inverse()},negate=function(){return isNumericAtom(stack[tos-1])?negate_number():(evaluatingAsFloats?push_double(-1):push_integer(-1),multiply())},negate_noexpand=function(){var t;return t=expanding,expanding=0,negate(),expanding=t},__normalize_radical_factors=function(t){var n,a,s,l,u,c,d,Ct,ar,en;if(n=0,!(isplusone(stack[t])||isminusone(stack[t])||isdouble(stack[t]))){for(n=l=u=t+1,c=tos;(u<=c?l<c:l>c)&&!__is_radical_number(stack[n]);n=u<=c?++l:--l);if(n!==tos){for(save(),push(stack[t]),mp_numerator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors numerator: "+stack[tos-1]),p1=pop(),n=a=d=t+1,Ct=tos;(d<=Ct?a<Ct:a>Ct)&&!(isplusone(p1)||isminusone(p1));n=d<=Ct?++a:--a)__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),isnegativenumber(p4)&&(push(p1),push(p3),divide(),p5=pop(),isinteger(p5)&&(p1=p5,push_symbol(POWER),push(p3),push(evaluatingAsFloats?one_as_double:one),push(p4),add(),list(3),stack[n]=pop())));for(push(stack[t]),mp_denominator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors denominator: "+stack[tos-1]),p2=pop(),n=s=ar=t+1,en=tos;(ar<=en?s<en:s>en)&&!isplusone(p2);n=ar<=en?++s:--s)if(__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),!isnegativenumber(p4)&&(push(p2),push(p3),divide(),p5=pop(),!!isinteger(p5)))){if(DEBUG_MULTIPLY&&console.log("__new radical p5: "+p5.toString()),DEBUG_MULTIPLY&&console.log("__new radical top stack: "+stack[tos-1]),p2=p5,push_symbol(POWER),push(p3),push(p4),DEBUG_MULTIPLY&&console.log("__new radical p3: "+p3.toString()),DEBUG_MULTIPLY&&console.log("__new radical p4: "+p4.toString()),push(one),subtract(),dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&isinteger(p3)&&!isinteger(stack[tos-1])&&isnegativenumber(stack[tos-1])){pop(),pop(),pop(),push(p1),push(p3),divide(),p1=pop();break}DEBUG_MULTIPLY&&console.log("__new radical exponent: "+stack[tos-1]),list(3),stack[n]=pop()}return push(p1),push(p2),divide(),stack[t]=pop(),restore()}}},__is_radical_number=function(t){return car(t)===symbol(POWER)&&isNumericAtom(cadr(t))&&isfraction(caddr(t))&&!isminusone(cadr(t))},NROOTS_YMAX=101,NROOTS_DELTA=1e-6,NROOTS_EPSILON=1e-9,NROOTS_ABS=function(t){return Math.sqrt(t.r*t.r+t.i*t.i)},NROOTS_RANDOM=function(){return 4*Math.random()-2},numericRootOfPolynomial=(function(){class t{}return t.prototype.r=0,t.prototype.i=0,t}).call(this),nroots_a=new numericRootOfPolynomial,nroots_b=new numericRootOfPolynomial,nroots_x=new numericRootOfPolynomial,nroots_y=new numericRootOfPolynomial,nroots_fa=new numericRootOfPolynomial,nroots_fb=new numericRootOfPolynomial,nroots_dx=new numericRootOfPolynomial,nroots_df=new numericRootOfPolynomial,nroots_c=[],initNRoots=o=0,ref=NROOTS_YMAX;0<=ref?o<ref:o>ref;initNRoots=0<=ref?++o:--o)nroots_c[initNRoots]=new numericRootOfPolynomial;for(Eval_nroots=function(){var t,n,a,s,l,u,c,d,Ct;for(t=0,n=0,l=0,c=0,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("nroots: polynomial?"),t=tos,c=coeff(p2,p1),c>NROOTS_YMAX&&stop("nroots: degree?"),n=a=0,d=c;0<=d?a<d:a>d;n=0<=d?++a:--a)push(stack[t+n]),real(),yyfloat(),Eval(),p1=pop(),push(stack[t+n]),imag(),yyfloat(),Eval(),p2=pop(),(!isdouble(p1)||!isdouble(p2))&&stop("nroots: coefficients?"),nroots_c[n].r=p1.d,nroots_c[n].i=p2.d;for(moveTos(t),monic(c),l=s=c;s>1;l=s+=-1)findroot(l),Math.abs(nroots_a.r)<NROOTS_DELTA&&(nroots_a.r=0),Math.abs(nroots_a.i)<NROOTS_DELTA&&(nroots_a.i=0),push_double(nroots_a.r),push_double(nroots_a.i),push(imaginaryunit),multiply(),add(),NROOTS_divpoly(l);if(c=tos-t,c>1){for(sort_stack(c),p1=alloc_tensor(c),p1.tensor.ndim=1,p1.tensor.dim[0]=c,n=u=0,Ct=c;0<=Ct?u<Ct:u>Ct;n=0<=Ct?++u:--u)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1)}},monic=function(t){var n,a,s,l;for(a=0,l=0,nroots_y.r=nroots_c[t-1].r,nroots_y.i=nroots_c[t-1].i,l=nroots_y.r*nroots_y.r+nroots_y.i*nroots_y.i,a=n=0,s=t-1;0<=s?n<s:n>s;a=0<=s?++n:--n)nroots_c[a].r=(nroots_c[a].r*nroots_y.r+nroots_c[a].i*nroots_y.i)/l,nroots_c[a].i=(nroots_c[a].i*nroots_y.r-nroots_c[a].r*nroots_y.i)/l;return nroots_c[t-1].r=1,nroots_c[t-1].i=0},findroot=function(t){var n,a,s,l;if(l=0,NROOTS_ABS(nroots_c[0])<NROOTS_DELTA){nroots_a.r=0,nroots_a.i=0;return}for(n=0;n<100;++n)for(nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),compute_fa(t),nroots_b.r=nroots_a.r,nroots_b.i=nroots_a.i,nroots_fb.r=nroots_fa.r,nroots_fb.i=nroots_fa.i,nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),a=0;a<1e3;++a){if(compute_fa(t),s=NROOTS_ABS(nroots_fa),DEBUG&&console.log("nrabs: "+s),s<NROOTS_EPSILON)return;if(NROOTS_ABS(nroots_fa)<NROOTS_ABS(nroots_fb)&&(nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_a.r=nroots_b.r,nroots_a.i=nroots_b.i,nroots_b.r=nroots_x.r,nroots_b.i=nroots_x.i,nroots_x.r=nroots_fa.r,nroots_x.i=nroots_fa.i,nroots_fa.r=nroots_fb.r,nroots_fa.i=nroots_fb.i,nroots_fb.r=nroots_x.r,nroots_fb.i=nroots_x.i),nroots_dx.r=nroots_b.r-nroots_a.r,nroots_dx.i=nroots_b.i-nroots_a.i,nroots_df.r=nroots_fb.r-nroots_fa.r,nroots_df.i=nroots_fb.i-nroots_fa.i,l=nroots_df.r*nroots_df.r+nroots_df.i*nroots_df.i,l===0)break;nroots_y.r=(nroots_dx.r*nroots_df.r+nroots_dx.i*nroots_df.i)/l,nroots_y.i=(nroots_dx.i*nroots_df.r-nroots_dx.r*nroots_df.i)/l,nroots_a.r=nroots_b.r-(nroots_y.r*nroots_fb.r-nroots_y.i*nroots_fb.i),nroots_a.i=nroots_b.i-(nroots_y.r*nroots_fb.i+nroots_y.i*nroots_fb.r)}return stop("nroots: convergence error")},compute_fa=function(t){var n,a,s,l,u;for(a=0,u=0,nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_fa.r=nroots_c[0].r+nroots_c[1].r*nroots_x.r-nroots_c[1].i*nroots_x.i,nroots_fa.i=nroots_c[0].i+nroots_c[1].r*nroots_x.i+nroots_c[1].i*nroots_x.r,l=[],a=n=2,s=t;2<=s?n<s:n>s;a=2<=s?++n:--n)u=nroots_a.r*nroots_x.r-nroots_a.i*nroots_x.i,nroots_x.i=nroots_a.r*nroots_x.i+nroots_a.i*nroots_x.r,nroots_x.r=u,nroots_fa.r+=nroots_c[a].r*nroots_x.r-nroots_c[a].i*nroots_x.i,l.push(nroots_fa.i+=nroots_c[a].r*nroots_x.i+nroots_c[a].i*nroots_x.r);return l},NROOTS_divpoly=function(t){var n,a,s,l,u,c;for(s=0,s=n=l=t-1;l<=0?n<0:n>0;s=l<=0?++n:--n)nroots_c[s-1].r+=nroots_c[s].r*nroots_a.r-nroots_c[s].i*nroots_a.i,nroots_c[s-1].i+=nroots_c[s].i*nroots_a.r+nroots_c[s].r*nroots_a.i;for(NROOTS_ABS(nroots_c[0])>NROOTS_DELTA&&stop("nroots: residual error"),c=[],s=a=0,u=t-1;0<=u?a<u:a>u;s=0<=u?++a:--a)nroots_c[s].r=nroots_c[s+1].r,c.push(nroots_c[s].i=nroots_c[s+1].i);return c},Eval_numerator=function(){return push(cadr(p1)),Eval(),numerator()},numerator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),numerator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_numerator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?push(one):push(n)},Eval_outer=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),outer(),t.push(p1=cdr(p1));return t},outer=function(){return save(),p2=pop(),p1=pop(),istensor(p1)&&istensor(p2)?yyouter():(push(p1),push(p2),istensor(p1)?tensor_times_scalar():istensor(p2)?scalar_times_tensor():multiply()),restore()},yyouter=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on;for(t=0,a=0,l=0,d=0,Ct=0,d=p1.tensor.ndim+p2.tensor.ndim,d>MAXDIM&&stop("outer: rank of result exceeds maximum"),Ct=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(Ct),p3.tensor.ndim=d,t=n=0,ar=p1.tensor.ndim;0<=ar?n<ar:n>ar;t=0<=ar?++n:--n)p3.tensor.dim[t]=p1.tensor.dim[t];for(a=t,t=s=0,en=p2.tensor.ndim;0<=en?s<en:s>en;t=0<=en?++s:--s)p3.tensor.dim[a+t]=p2.tensor.dim[t];for(l=0,t=u=0,tn=p1.tensor.nelem;0<=tn?u<tn:u>tn;t=0<=tn?++u:--u)for(a=c=0,on=p2.tensor.nelem;0<=on?c<on:c>on;a=0<=on?++c:--c)push(p1.tensor.elem[t]),push(p2.tensor.elem[a]),multiply(),p3.tensor.elem[l++]=pop();return push(p3)},partition=function(){for(save(),p2=pop(),p1=pop(),push_integer(1),p3=pop(),p4=p3,p1=cdr(p1);iscons(p1);)Find(car(p1),p2)?(push(p4),push(car(p1)),multiply(),p4=pop()):(push(p3),push(car(p1)),multiply(),p3=pop()),p1=cdr(p1);return push(p3),push(p4),restore()},Eval_silentpattern=function(){return Eval_pattern(),pop(),push_symbol(NIL)},Eval_pattern=function(){var t,n,a,s,l;return iscons(cdr(p1))||stop("pattern needs at least a template and a transformed version"),t=car(cdr(p1)),a=car(cdr(cdr(p1))),a===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),iscons(cdr(cdr(p1)))?l=car(cdr(cdr(cdr(p1)))):l=symbol(NIL),equal(t,a)&&stop("recursive pattern"),s="template: "+print_list(t),s+=" tests: "+print_list(l),DEBUG&&console.log("pattern stringkey: "+s),n=userSimplificationsInStringForm.indexOf(s),n===-1?(userSimplificationsInStringForm.push(s),userSimplificationsInListForm.push(cdr(p1))):(DEBUG&&console.log("pattern already exists, replacing. "+cdr(p1)),userSimplificationsInStringForm[n]=s,userSimplificationsInListForm[n]=cdr(p1)),push_symbol(PATTERN),push(cdr(p1)),list(2)},do_clearPatterns=function(){return userSimplificationsInListForm=[],userSimplificationsInStringForm=[]},Eval_clearpatterns=function(){return do_clearPatterns(),push_symbol(NIL)},Eval_patternsinfo=function(){var t;return t=patternsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},patternsinfo=function(){var t,n,a;for(a="",t=0,n=userSimplificationsInListForm.length;t<n;t++)userSimplificationsInListForm[t],a+=userSimplificationsInListForm+`
`;return a},Eval_polar=function(){return push(cadr(p1)),Eval(),polar()},polar=function(){return evaluatingPolar++,save(),p1=pop(),push(p1),abs(),push(imaginaryunit),push(p1),arg(),multiply(),exponential(),multiply(),evaluatingPolar--,restore()},n_factor_number=0,factor_number=function(){var t;if(t=0,save(),p1=pop(),equaln(p1,0)||equaln(p1,1)||equaln(p1,-1)){push(p1),restore();return}return n_factor_number=p1.q.a,t=tos,factor_a(),tos-t>1&&(list(tos-t),push_symbol(MULTIPLY),swap(),cons()),restore()},factor_a=function(){var t,n;for(n=0,n_factor_number.isNegative()&&(n_factor_number=setSignTo(n_factor_number,1),push_integer(-1)),n=t=0;t<1e4;n=++t)if(try_kth_prime(n),n_factor_number.compare(1)===0)return;return factor_b()},try_kth_prime=function(t){var n,a,s,l;for(n=0,a=mint(primetab[t]),n=0;;){if(n_factor_number.compare(1)===0){n&&push_factor(a,n);return}if([s,l]=mdivrem(n_factor_number,a),l.isZero())n++,n_factor_number=s;else break}if(n&&push_factor(a,n),mcmp(s,a)===-1)return push_factor(n_factor_number,1),n_factor_number=mint(1)},factor_b=function(){var t,n,a,s,l,u,c;for(a=0,s=0,t=mint(1),u=mint(5),c=mint(2),a=1,s=1;;){if(mprime(n_factor_number))return push_factor(n_factor_number,1),0;for(;;){if(esc_flag&&stop("esc"),l=msub(c,u),l=setSignTo(l,1),n=mgcd(l,n_factor_number),MEQUAL(n,1)){--a===0&&(c=u,s*=2,a=s),l=mmul(u,u),u=madd(l,t),l=mmod(u,n_factor_number),u=l;continue}if(push_factor(n,1),mcmp(n,n_factor_number)===0)return-1;l=mdiv(n_factor_number,n),n_factor_number=l,l=mmod(u,n_factor_number),u=l,l=mmod(c,n_factor_number),c=l;break}}},push_factor=function(t,n){if(p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=mint(1),push(p1),n>1)return push_symbol(POWER),swap(),p1=new U,p1.k=NUM,p1.q.a=mint(n),p1.q.b=mint(1),push(p1),list(3)},DEBUG_POWER=!1,Eval_power=function(){if(DEBUG_POWER)debugger;return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),power()},power=function(){return save(),yypower(),restore()},yypower=function(){var t,n,a,s,l,u,c;if(DEBUG_POWER)debugger;if(c=0,p2=pop(),p1=pop(),s=p2,a=p1,DEBUG_POWER&&console.log("POWER: "+p1+" ^ "+p2),equal(p1,one)||isZeroAtomOrTensor(p2)){evaluatingAsFloats?push_double(1):push(one),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(equal(p2,one)){push(p1),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusone(p2)){evaluatingAsFloats?push_double(1):push(one),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusoneovertwo(p2)){push(imaginaryunit),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&!isdouble(p1)&&isrational(p2)&&!isinteger(p2)&&ispositivenumber(p2)&&!evaluatingAsFloats){DEBUG_POWER&&console.log("   power: -1 ^ rational"),DEBUG_POWER&&console.log(" trick: p2.q.a , p2.q.b "+p2.q.a+" , "+p2.q.b),p2.q.a<p2.q.b?(push_symbol(POWER),push(p1),push(p2),list(3)):(push_symbol(MULTIPLY),push(p1),push_symbol(POWER),push(p1),push_rational(p2.q.a.mod(p2.q.b),p2.q.b),list(3),list(3),DEBUG_POWER&&console.log(" trick applied : "+stack[tos-1])),rect(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isrational(p1)&&isrational(p2)){DEBUG_POWER&&console.log("   power: isrational(p1) && isrational(p2)"),push(p1),push(p2),qpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isNumericAtom(p1)&&isNumericAtom(p2)){DEBUG_POWER&&console.log("   power: both base and exponent are either rational or double "),DEBUG_POWER&&console.log("POWER - isNumericAtom(p1) && isNumericAtom(p2)"),push(p1),push(p2),dpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(istensor(p1)){DEBUG_POWER&&console.log("   power: istensor(p1) "),power_tensor(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(car(p1)===symbol(ABS)&&iseveninteger(p2)&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))){DEBUG_POWER&&console.log("   power: even power of absolute of real value "),push(cadr(p1)),push(p2),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&car(p2)===symbol(LOG)){push(cadr(p2)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&isdouble(p2)){DEBUG_POWER&&console.log("   power: p1 == symbol(E) && isdouble(p2) "),push_double(Math.exp(p2.d)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&Find(p2,imaginaryunit)!==0&&Find(p2,symbol(PI))!==0&&!evaluatingPolar&&(push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER&&console.log("   power: turning complex exponential to rect: "+stack[tos-1]),rect(),n=pop(),Find(n,symbol(PI))===0)){DEBUG_POWER&&console.log("   power: turned complex exponential to rect: "+n),push(n);return}if(car(p1)===symbol(MULTIPLY)&&isinteger(p2)){for(DEBUG_POWER&&console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),p1=cdr(p1),push(car(p1)),push(p2),power(),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),power(),multiply(),p1=cdr(p1);DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(u=!1,isNumericAtom(cadr(p1))&&(u=sign(compare_numbers(cadr(p1),zero))),car(p1)===symbol(POWER)&&(isinteger(p2)||u)){push(cadr(p1)),push(caddr(p1)),push(p2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(t=!1,iseveninteger(caddr(p1))&&(push(caddr(p1)),push(p2),multiply(),l=pop(),isone(l)&&(t=!0)),car(p1)===symbol(POWER)&&t){DEBUG_POWER&&console.log("   power: car(p1) == symbol(POWER) && b_isEven_and_c_isItsInverse "),push(cadr(p1)),abs(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(expanding&&isadd(p1)&&isNumericAtom(p2)&&(push(p2),c=pop_integer(),c>1&&!isNaN(c))){DEBUG_POWER&&console.log("   power: expanding && isadd(p1) && isNumericAtom(p2) "),power_sum(c),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(trigmode===1&&car(p1)===symbol(SIN)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 1 && car(p1) == symbol(SIN) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),cosine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(trigmode===2&&car(p1)===symbol(COS)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 2 && car(p1) == symbol(COS) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),sine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(iscomplexnumber(p1)){if(DEBUG_POWER&&console.log(" power - handling the case (a + ib) ^ n"),isinteger(p2)){push(p1),conjugate(),p3=pop(),push(p3),push(p3),push(p1),multiply(),divide(),isone(p2)||(push(p2),negate(),power()),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isNumericAtom(p2)){push(p1),abs(),push(p2),power(),push_integer(-1),push(p1),arg(),push(p2),multiply(),evaluatingAsFloats||iscomplexnumberdouble(p1)&&isdouble(p2)?push_double(Math.PI):push(symbol(PI)),divide(),power(),multiply(),avoidCalculatingPowersIntoArctans&&Find(stack[tos-1],symbol(ARCTAN))&&(pop(),push_symbol(POWER),push(p1),push(p2),list(3)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}}if(simplify_polar()){DEBUG_POWER&&console.log("   power: using simplify_polar");return}if(DEBUG_POWER&&console.log("   power: nothing can be done "),push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER)return console.log("   power of "+a+" ^ "+s+": "+stack[tos-1])},power_sum=function(t){var n,a,s,l,u,c,d,Ct,ar,en;for(n=[],a=0,l=0,c=0,c=length(p1)-1,push_frame(c*(t+1)),p1=cdr(p1),a=s=0,Ct=c;0<=Ct?s<Ct:s>Ct;a=0<=Ct?++s:--s){for(l=u=0,ar=t;0<=ar?u<=ar:u>=ar;l=0<=ar?++u:--u)push(car(p1)),push_integer(l),power(),stack[frame+a*(t+1)+l]=pop();p1=cdr(p1)}for(push_integer(t),factorial(),p1=pop(),a=d=0,en=c;0<=en?d<en:d>en;a=0<=en?++d:--d)n[a]=0;return push(zero),multinomial_sum(c,t,n,0,t),pop_frame(c*(t+1))},multinomial_sum=function(t,n,a,s,l){var u,c,d,Ct,ar,en,tn;if(c=0,s<t-1){for(c=u=0,ar=l;0<=ar?u<=ar:u>=ar;c=0<=ar?++u:--u)a[s]=c,multinomial_sum(t,n,a,s+1,l-c);return}for(a[s]=l,push(p1),c=d=0,en=t;0<=en?d<en:d>en;c=0<=en?++d:--d)push_integer(a[c]),factorial(),divide();for(c=Ct=0,tn=t;0<=tn?Ct<tn:Ct>tn;c=0<=tn?++Ct:--Ct)push(stack[frame+c*(n+1)+a[c]]),multiply();return add()},simplify_polar=function(){var t;switch(t=0,t=isquarterturn(p2),t){case 0:break;case 1:return push_integer(1),1;case 2:return push_integer(-1),1;case 3:return push(imaginaryunit),1;case 4:return push(imaginaryunit),negate(),1}if(car(p2)===symbol(ADD)){for(p3=cdr(p2);iscons(p3)&&(t=isquarterturn(car(p3)),!t);)p3=cdr(p3);switch(t){case 0:return 0;case 1:push_integer(1);break;case 2:push_integer(-1);break;case 3:push(imaginaryunit);break;case 4:push(imaginaryunit),negate()}return push(p2),push(car(p3)),subtract(),exponential(),multiply(),1}return 0},Eval_prime=function(){return push(cadr(p1)),Eval(),prime()},prime=function(){var t;return t=0,t=pop_integer(),(t<1||t>MAXPRIMETAB)&&stop("prime: Argument out of range."),t=primetab[t-1],push_integer(t)},power_str="^",codeGen=!1,Eval_print=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),printMode),push(symbol(NIL))},Eval_print2dascii=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_2DASCII),push(symbol(NIL))},Eval_printcomputer=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_COMPUTER),push(symbol(NIL))},Eval_printlatex=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_LATEX),push(symbol(NIL))},Eval_printhuman=function(){var t;return t=test_flag,test_flag=0,stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_HUMAN),test_flag=t,push(symbol(NIL))},Eval_printlist=function(){var t;return t=_print(cdr(p1),PRINTMODE_LIST),stringsEmittedByUserPrintouts+=t,push(symbol(NIL))},_print=function(t,n){var a,s;for(a="";iscons(t);)push(car(t)),Eval(),p2=pop(),s=printMode,n===PRINTMODE_COMPUTER?(printMode=PRINTMODE_COMPUTER,a=printline(p2),rememberPrint(a,LAST_FULL_PRINT)):n===PRINTMODE_HUMAN?(printMode=PRINTMODE_HUMAN,a=printline(p2),rememberPrint(a,LAST_PLAIN_PRINT)):n===PRINTMODE_2DASCII?(printMode=PRINTMODE_2DASCII,a=print2dascii(p2),rememberPrint(a,LAST_2DASCII_PRINT)):n===PRINTMODE_LATEX?(printMode=PRINTMODE_LATEX,a=printline(p2),rememberPrint(a,LAST_LATEX_PRINT)):n===PRINTMODE_LIST&&(printMode=PRINTMODE_LIST,a=print_list(p2),rememberPrint(a,LAST_LIST_PRINT)),printMode=s,t=cdr(t);return DEBUG&&console.log("emttedString from display: "+stringsEmittedByUserPrintouts),a},rememberPrint=function(t,n){var a;return scan('"'+t+'"'),a=pop(),set_binding(symbol(n),a)},print_str=function(t){return DEBUG&&console.log("emttedString from print_str: "+stringsEmittedByUserPrintouts),t},print_char=function(t){return t},collectLatexStringFromReturnValue=function(t){var n,a,s;return n=printMode,printMode=PRINTMODE_LATEX,a=codeGen,codeGen=!1,s=print_expr(t),s=s.replace(/_/g,"\\_"),printMode=n,codeGen=a,DEBUG&&console.log("emttedString from collectLatexStringFromReturnValue: "+stringsEmittedByUserPrintouts),s},printline=function(t){var n;return n="",n+=print_expr(t),n},print_base_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||lessp(t,zero)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_expo_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_denom=function(t,n){var a;return a="",save(),p1=cadr(t),p2=caddr(t),isminusone(p2)?(a+=print_base_of_denom(p1),restore(),a):(n===1&&(a+=print_char("(")),push(p2),negate(),p2=pop(),a+=print_power(p1,p2),n===1&&(a+=print_char(")")),restore(),a)},print_a_over_b=function(t){var n,a,s;for(n="",flag=0,s=0,a=0,save(),s=0,a=0,p1=cdr(t),p2=car(p1),isrational(p2)?(push(p2),mp_numerator(),absval(),p3=pop(),push(p2),mp_denominator(),p4=pop(),isplusone(p3)||s++,isplusone(p4)||a++,p1=cdr(p1)):(p3=one,p4=one);iscons(p1);)p2=car(p1),is_denominator(p2)?a++:s++,p1=cdr(p1);if(printMode===PRINTMODE_LATEX&&(n+=print_str("\\frac{")),s===0)n+=print_char("1");else for(flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p3)||(n+=print_factor(p3),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)||(flag&&(n+=print_multiply_sign()),n+=print_factor(p2),flag=1),p1=cdr(p1);for(printMode===PRINTMODE_LATEX?n+=print_str("}{"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" / "):n+=print_str("/"),a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char("(")),flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p4)||(n+=print_factor(p4),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)&&(flag&&(n+=print_multiply_sign()),n+=print_denom(p2,a),flag=1),p1=cdr(p1);return a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char(")")),printMode===PRINTMODE_LATEX&&(n+=print_str("}")),restore(),n},print_expr=function(t){var n;if(n="",isadd(t))for(t=cdr(t),sign_of_term(car(t))==="-"&&(n+=print_str("-")),n+=print_term(car(t)),t=cdr(t);iscons(t);)sign_of_term(car(t))==="+"?printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" + "):n+=print_str("+"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" - "):n+=print_str("-"),n+=print_term(car(t)),t=cdr(t);else sign_of_term(t)==="-"&&(n+=print_str("-")),n+=print_term(t);return n},sign_of_term=function(t){var n;return n="",car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&lessp(cadr(t),zero)||isNumericAtom(t)&&lessp(t,zero)?n+="-":n+="+",n},print_term=function(t){var n,a,s,l,u;if(n="",car(t)===symbol(MULTIPLY)&&any_denominators(t))return n+=print_a_over_b(t),n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),isminusone(car(t))&&(t=cdr(t)),u=!1,isNumericAtom(car(t))&&(u=!0),s=!1,printMode===PRINTMODE_LATEX&&iscons(cdr(t))&&isNumberOneOverSomething(car(t))&&(s=!0,a=car(t).q.b.toString()),s?(l=n,n=""):n+=print_factor(car(t)),t=cdr(t);iscons(t);)printMode===PRINTMODE_LATEX&&u&&caar(t)===symbol(POWER)&&isNumericAtom(car(cdr(car(t))))&&(isfraction(car(cdr(cdr(car(t)))))||(n+=" \\cdot ")),n+=print_multiply_sign(),n+=print_factor(car(t),!1,!0),u=!1,isNumericAtom(car(t))&&(u=!0),t=cdr(t);s&&(n=l+"\\frac{"+n+"}{"+a+"}")}else n+=print_factor(t);return n},print_subexpr=function(t){var n;return n="",n+=print_char("("),n+=print_expr(t),n+=print_char(")"),n},print_factorial_function=function(t){var n;return n="",t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?n+=print_subexpr(t):n+=print_expr(t),n+=print_char("!"),n},print_ABS_latex=function(t){var n;return n="",n+=print_str("\\left |"),n+=print_expr(cadr(t)),n+=print_str(" \\right |"),n},print_BINOMIAL_latex=function(t){var n;return n="",n+=print_str("\\binom{"),n+=print_expr(cadr(t)),n+=print_str("}{"),n+=print_expr(caddr(t)),n+=print_str("} "),n},print_DOT_latex=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=print_str(" \\cdot "),n+=print_expr(caddr(t)),n},print_DOT_codegen=function(t){var n;return n="dot(",n+=print_expr(cadr(t)),n+=", ",n+=print_expr(caddr(t)),n+=")",n},print_SIN_codegen=function(t){var n;return n="Math.sin(",n+=print_expr(cadr(t)),n+=")",n},print_COS_codegen=function(t){var n;return n="Math.cos(",n+=print_expr(cadr(t)),n+=")",n},print_TAN_codegen=function(t){var n;return n="Math.tan(",n+=print_expr(cadr(t)),n+=")",n},print_ARCSIN_codegen=function(t){var n;return n="Math.asin(",n+=print_expr(cadr(t)),n+=")",n},print_ARCCOS_codegen=function(t){var n;return n="Math.acos(",n+=print_expr(cadr(t)),n+=")",n},print_ARCTAN_codegen=function(t){var n;return n="Math.atan(",n+=print_expr(cadr(t)),n+=")",n},print_SQRT_latex=function(t){var n;return n="",n+=print_str("\\sqrt{"),n+=print_expr(cadr(t)),n+=print_str("} "),n},print_TRANSPOSE_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^T"),n},print_TRANSPOSE_codegen=function(t){var n;return n="",n+=print_str("transpose("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_UNIT_codegen=function(t){var n;return n="",n+=print_str("identity("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_INV_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^{-1}"),n},print_INV_codegen=function(t){var n;return n="",n+=print_str("inv("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_DEFINT_latex=function(t){var n,a,s,l,u,c,d,Ct,ar;for(n="",a=car(cdr(t)),t=cdr(t),c=t,u=0;iscons(cdr(cdr(t)));)u++,Ct=cdr(cdr(t)),n+=print_str("\\int^{"),n+=print_expr(car(cdr(Ct))),n+=print_str("}_{"),n+=print_expr(car(Ct)),n+=print_str("} \\! "),t=cdr(Ct);for(n+=print_expr(a),n+=print_str(" \\,"),t=c,s=l=1,d=u;1<=d?l<=d:l>=d;s=1<=d?++l:--l)ar=cdr(t),n+=print_str(" \\mathrm{d} "),n+=print_expr(car(ar)),s<u&&(n+=print_str(" \\, ")),t=cdr(cdr(ar));return n},print_tensor=function(t){var n;return n="",n+=print_tensor_inner(t,0,0)[1],n},print_tensor_inner=function(t,n,a){var s,l,u,c,d,Ct,ar;if(s="",s+=print_str("["),n<t.tensor.ndim-1)for(l=u=0,d=t.tensor.dim[n];0<=d?u<d:u>d;l=0<=d?++u:--u)[a,ar]=print_tensor_inner(t,n+1,a),s+=ar,l!==t.tensor.dim[n]-1&&(s+=print_str(","));else for(l=c=0,Ct=t.tensor.dim[n];0<=Ct?c<Ct:c>Ct;l=0<=Ct?++c:--c)s+=print_expr(t.tensor.elem[a]),l!==t.tensor.dim[n]-1&&(s+=print_str(",")),a++;return s+=print_str("]"),[a,s]},print_tensor_latex=function(t){var n;return n="",t.tensor.ndim<=2&&(n+=print_tensor_inner_latex(!0,t,0,0)[1]),n},print_tensor_inner_latex=function(t,n,a,s){var l,u,c,d,Ct,ar,en;if(l="",t&&(l+="\\begin{bmatrix} "),a<n.tensor.ndim-1)for(u=c=0,Ct=n.tensor.dim[a];0<=Ct?c<Ct:c>Ct;u=0<=Ct?++c:--c)[s,en]=print_tensor_inner_latex(0,n,a+1,s),l+=en,u!==n.tensor.dim[a]-1&&(l+=print_str(" \\\\ "));else for(u=d=0,ar=n.tensor.dim[a];0<=ar?d<ar:d>ar;u=0<=ar?++d:--d)l+=print_expr(n.tensor.elem[s]),u!==n.tensor.dim[a]-1&&(l+=print_str(" & ")),s++;return t&&(l+=" \\end{bmatrix}"),[s,l]},print_SUM_latex=function(t){var n;return n="\\sum_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_SUM_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var holderSum = 0;  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    holderSum += "+print_expr(a)+"; }  return holderSum;})()",n},print_TEST_latex=function(t){var n;for(n="\\left\\{ \\begin{array}{ll}",t=cdr(t);iscons(t);){if(cdr(t)===symbol(NIL)){n+="{",n+=print_expr(car(t)),n+="} & otherwise ",n+=" \\\\\\\\";break}n+="{",n+=print_expr(cadr(t)),n+="} & if & ",n+=print_expr(car(t)),n+=" \\\\\\\\",t=cddr(t)}return n=n.substring(0,n.length-4),n+="\\end{array} \\right."},print_TEST_codegen=function(t){var n,a;for(n="(function(){",t=cdr(t),a=0;iscons(t);){if(cdr(t)===symbol(NIL)){n+="else {",n+="return ("+print_expr(car(t))+");",n+="}";break}a&&(n+=" else "),n+="if ("+print_expr(car(t))+"){",n+="return ("+print_expr(cadr(t))+");",n+="}",a++,t=cddr(t)}return n+="})()",n},print_TESTLT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" < ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTLE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\leq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" > ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\geq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTEQ_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" = ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_FOR_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    "+print_expr(a)+" } })()",n},print_DO_codegen=function(t){var n;for(n="",t=cdr(t);iscons(t);)n+=print_expr(car(t)),t=cdr(t);return n},print_SETQ_codegen=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=" = ",n+=print_expr(caddr(t)),n+="; ",n},print_PRODUCT_latex=function(t){var n;return n="\\prod_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_PRODUCT_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var holderProduct = 1;  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    holderProduct *= "+print_expr(a)+"; }  return holderProduct;})()",n},print_power=function(t,n){var a,s,l,u;if(a="",DEBUG&&console.log("power base: "+t+"  exponent: "+n),isoneovertwo(n))if(equaln(t,2)){if(codeGen)return a+=print_str("Math.SQRT2"),a}else{if(printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt{"),a+=print_expr(t),a+=print_str("}"),a;if(codeGen)return a+=print_str("Math.sqrt("),a+=print_expr(t),a+=print_str(")"),a}if(equaln(get_binding(symbol(PRINT_LEAVE_E_ALONE)),1)&&t===symbol(E))return codeGen?(a+=print_str("Math.exp("),a+=print_expo_of_denom(n),a+=print_str(")"),a):(printMode===PRINTMODE_LATEX?(a+=print_str("e^{"),a+=print_expr(n),a+=print_str("}")):(a+=print_str("exp("),a+=print_expr(n),a+=print_str(")")),a);if(codeGen)return a+=print_str("Math.pow("),a+=print_base_of_denom(t),a+=print_str(", "),a+=print_expo_of_denom(n),a+=print_str(")"),a;if(equaln(get_binding(symbol(PRINT_LEAVE_X_ALONE)),0)||t.printname!=="x"){if(t!==symbol(E)){if(isminusone(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):a+=print_expr(t),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a;if(isnegativeterm(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),push(n),push_integer(-1),multiply(),l=pop(),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_power(t,l),a+=print_str(")")):a+=print_power(t,l),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a}if(isfraction(n)&&printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt"),push(n),denominator(),s=pop(),isplustwo(s)||(a+=print_str("["),a+=print_expr(s),a+=print_str("]")),a+=print_str("{"),push(n),numerator(),u=pop(),n=u,a+=print_power(t,n),a+=print_str("}"),a}return printMode===PRINTMODE_LATEX&&isplusone(n)?a+=print_expr(t):(isadd(t)||isnegativenumber(t)?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(printMode!==PRINTMODE_LATEX&&(a+=print_str("(")),a+=print_factor(t,!0),printMode!==PRINTMODE_LATEX&&(a+=print_str(")"))):isNumericAtom(t)&&(lessp(t,zero)||isfraction(t))?(a+=print_str("("),a+=print_factor(t),a+=print_str(")")):a+=print_factor(t),printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str(power_str):a+=print_str("^"),printMode===PRINTMODE_LATEX?print_expr(n).length>1?(a+=print_str("{"),a+=print_expr(n),a+=print_str("}")):a+=print_expr(n):iscons(n)||isfraction(n)||isNumericAtom(n)&&lessp(n,zero)?(a+=print_str("("),a+=print_expr(n),a+=print_str(")")):a+=print_factor(n)),a},print_index_function=function(t){var n;if(n="",t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?n+=print_subexpr(car(t)):n+=print_expr(car(t)),n+=print_str("["),t=cdr(t),iscons(t))for(n+=print_expr(car(t)),t=cdr(t);iscons(t);)n+=print_str(","),n+=print_expr(car(t)),t=cdr(t);return n+=print_str("]"),n},print_factor=function(t,n,a){var s,l,u,c,d,Ct;if(s="",isNumericAtom(t))return a&&lessp(t,zero)&&(s+="("),s+=print_number(t,a),a&&lessp(t,zero)&&(s+=")"),s;if(isstr(t))return s+=print_str('"'),s+=print_str(t.str),s+=print_str('"'),s;if(istensor(t))return printMode===PRINTMODE_LATEX?s+=print_tensor_latex(t):s+=print_tensor(t),s;if(car(t)===symbol(MULTIPLY))return n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?s+=print_str(" \\left ("):s+=print_str("(")),s+=print_expr(t),n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?s+=print_str(" \\right ) "):s+=print_str(")")),s;if(isadd(t))return n||(s+=print_str("(")),s+=print_expr(t),n||(s+=print_str(")")),s;if(car(t)===symbol(POWER))return l=cadr(t),u=caddr(t),s+=print_power(l,u),s;if(car(t)===symbol(FUNCTION))return c=cadr(t),codeGen||(d=caddr(t),s+=print_str("function "),DEBUG&&console.log("emittedString from print_factor "+stringsEmittedByUserPrintouts),Ct=print_list(d),s+=Ct,s+=print_str(" -> ")),s+=print_expr(c),s;if(car(t)===symbol(PATTERN))return s+=print_expr(caadr(t)),printMode===PRINTMODE_LATEX?s+=print_str(" \\rightarrow "):printMode===PRINTMODE_HUMAN&&!test_flag?s+=print_str(" -> "):s+=print_str("->"),s+=print_expr(car(cdr(cadr(t)))),s;if(car(t)===symbol(INDEX)&&issymbol(cadr(t)))return s+=print_index_function(t),s;if(car(t)===symbol(FACTORIAL))return s+=print_factorial_function(t),s;if(car(t)===symbol(ABS)&&printMode===PRINTMODE_LATEX)return s+=print_ABS_latex(t),s;if(car(t)===symbol(SQRT)&&printMode===PRINTMODE_LATEX)return s+=print_SQRT_latex(t),s;if(car(t)===symbol(TRANSPOSE)){if(printMode===PRINTMODE_LATEX)return s+=print_TRANSPOSE_latex(t),s;if(codeGen)return s+=print_TRANSPOSE_codegen(t),s}else if(car(t)===symbol(UNIT)){if(codeGen)return s+=print_UNIT_codegen(t),s}else if(car(t)===symbol(INV)){if(printMode===PRINTMODE_LATEX)return s+=print_INV_latex(t),s;if(codeGen)return s+=print_INV_codegen(t),s}else{if(car(t)===symbol(BINOMIAL)&&printMode===PRINTMODE_LATEX)return s+=print_BINOMIAL_latex(t),s;if(car(t)===symbol(DEFINT)&&printMode===PRINTMODE_LATEX)return s+=print_DEFINT_latex(t),s;if(isinnerordot(t)){if(printMode===PRINTMODE_LATEX)return s+=print_DOT_latex(t),s;if(codeGen)return s+=print_DOT_codegen(t),s}else if(car(t)===symbol(SIN)){if(codeGen)return s+=print_SIN_codegen(t),s}else if(car(t)===symbol(COS)){if(codeGen)return s+=print_COS_codegen(t),s}else if(car(t)===symbol(TAN)){if(codeGen)return s+=print_TAN_codegen(t),s}else if(car(t)===symbol(ARCSIN)){if(codeGen)return s+=print_ARCSIN_codegen(t),s}else if(car(t)===symbol(ARCCOS)){if(codeGen)return s+=print_ARCCOS_codegen(t),s}else if(car(t)===symbol(ARCTAN)){if(codeGen)return s+=print_ARCTAN_codegen(t),s}else if(car(t)===symbol(SUM)){if(printMode===PRINTMODE_LATEX)return s+=print_SUM_latex(t),s;if(codeGen)return s+=print_SUM_codegen(t),s}else if(car(t)===symbol(PRODUCT)){if(printMode===PRINTMODE_LATEX)return s+=print_PRODUCT_latex(t),s;if(codeGen)return s+=print_PRODUCT_codegen(t),s}else if(car(t)===symbol(FOR)){if(codeGen)return s+=print_FOR_codegen(t),s}else if(car(t)===symbol(DO)){if(codeGen)return s+=print_DO_codegen(t),s}else if(car(t)===symbol(TEST)){if(codeGen)return s+=print_TEST_codegen(t),s;if(printMode===PRINTMODE_LATEX)return s+=print_TEST_latex(t),s}else if(car(t)===symbol(TESTLT)){if(codeGen)return s+="(("+print_expr(cadr(t))+") < ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTLT_latex(t),s}else if(car(t)===symbol(TESTLE)){if(codeGen)return s+="(("+print_expr(cadr(t))+") <= ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTLE_latex(t),s}else if(car(t)===symbol(TESTGT)){if(codeGen)return s+="(("+print_expr(cadr(t))+") > ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTGT_latex(t),s}else if(car(t)===symbol(TESTGE)){if(codeGen)return s+="(("+print_expr(cadr(t))+") >= ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTGE_latex(t),s}else if(car(t)===symbol(TESTEQ)){if(codeGen)return s+="(("+print_expr(cadr(t))+") === ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTEQ_latex(t),s}else if(car(t)===symbol(FLOOR)){if(codeGen)return s+="Math.floor("+print_expr(cadr(t))+")",s;if(printMode===PRINTMODE_LATEX)return s+=" \\lfloor {"+print_expr(cadr(t))+"} \\rfloor ",s}else if(car(t)===symbol(CEILING)){if(codeGen)return s+="Math.ceiling("+print_expr(cadr(t))+")",s;if(printMode===PRINTMODE_LATEX)return s+=" \\lceil {"+print_expr(cadr(t))+"} \\rceil ",s}else if(car(t)===symbol(ROUND)){if(codeGen)return s+="Math.round("+print_expr(cadr(t))+")",s}else if(car(t)===symbol(SETQ))return codeGen?(s+=print_SETQ_codegen(t),s):(s+=print_expr(cadr(t)),s+=print_str("="),s+=print_expr(caddr(t)),s)}if(iscons(t)){if(s+=print_factor(car(t)),t=cdr(t),n||(s+=print_str("(")),iscons(t))for(s+=print_expr(car(t)),t=cdr(t);iscons(t);)s+=print_str(","),s+=print_expr(car(t)),t=cdr(t);return n||(s+=print_str(")")),s}return t===symbol(DERIVATIVE)?s+=print_char("d"):t===symbol(E)?codeGen?s+=print_str("Math.E"):s+=print_str("e"):t===symbol(PI)?printMode===PRINTMODE_LATEX?s+=print_str("\\pi"):s+=print_str("pi"):s+=print_str(get_printname(t)),s},print_list=function(t){var n;switch(n="",t.k){case CONS:if(n+="(",n+=print_list(car(t)),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}for(t=cdr(t);iscons(t);)if(n+=" ",n+=print_list(car(t)),t=cdr(t),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}t!==symbol(NIL)&&(n+=" . ",n+=print_list(t)),n+=")";break;case STR:n+=t.str;break;case NUM:case DOUBLE:n+=print_number(t,!0);break;case SYM:n+=get_printname(t);break;default:n+="<tensor>"}return n},print_multiply_sign=function(){var t;if(t="",printMode===PRINTMODE_LATEX)if(printMode===PRINTMODE_HUMAN&&!test_flag)t+=print_str(" ");else return t;return printMode===PRINTMODE_HUMAN&&!test_flag&&!codeGen?t+=print_str(" "):t+=print_str("*"),t},is_denominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&isnegativeterm(caddr(t))?1:0},any_denominators=function(t){var n;for(t=cdr(t);iscons(t);){if(n=car(t),is_denominator(n))return 1;t=cdr(t)}return 0},YMAX=1e4,glyph=(function(){class t{}return t.prototype.c=0,t.prototype.x=0,t.prototype.y=0,t}).call(this),chartab=[],charTabIndex=i1=0,ref1=YMAX;0<=ref1?i1<ref1:i1>ref1;charTabIndex=0<=ref1?++i1:--i1)chartab[charTabIndex]=new glyph;for(yindex=0,level=0,emit_x=0,expr_level=0,printchar_nowrap=function(t){var n;return n="",n+=t,n},printchar=function(t){return printchar_nowrap(t)},print2dascii=function(t){var n,a,s,l;if(a=0,s=0,l=0,save(),yindex=0,level=0,emit_x=0,emit_top_expr(t),[a,s,l]=get_size(0,yindex),s>100){printline(t),restore();return}return n=print_glyphs(),restore(),n},emit_top_expr=function(t){if(car(t)===symbol(SETQ)){emit_expr(cadr(t)),__emit_str(" = "),emit_expr(caddr(t));return}return istensor(t)?emit_tensor(t):emit_expr(t)},will_be_displayed_as_fraction=function(t){if(level>0)return 0;if(isfraction(t))return 1;if(car(t)!==symbol(MULTIPLY))return 0;if(isfraction(cadr(t)))return 1;for(;iscons(t);){if(isdenominator(car(t)))return 1;t=cdr(t)}return 0},emit_expr=function(t){if(expr_level++,car(t)===symbol(ADD))for(t=cdr(t),__is_negative(car(t))&&(__emit_char("-"),will_be_displayed_as_fraction(car(t))&&__emit_char(" ")),emit_term(car(t)),t=cdr(t);iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),t=cdr(t);else __is_negative(t)&&(__emit_char("-"),will_be_displayed_as_fraction(t)&&__emit_char(" ")),emit_term(t);return expr_level--},emit_unsigned_expr=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),emit_term(car(t)),t=cdr(t),n=[];iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),n.push(t=cdr(t));return n}else return emit_term(t)},__is_negative=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},emit_term=function(t){var n;return car(t)===symbol(MULTIPLY)?(n=count_denominators(t),n&&level===0?emit_fraction(t,n):emit_multiply(t,n)):emit_factor(t)},isdenominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&__is_negative(caddr(t))?1:0},count_denominators=function(t){var n,a;for(n=0,t=cdr(t);iscons(t);)a=car(t),isdenominator(a)&&n++,t=cdr(t);return n},emit_multiply=function(t,n){var a;if(n===0){for(t=cdr(t),(isplusone(car(t))||isminusone(car(t)))&&(t=cdr(t)),emit_factor(car(t)),t=cdr(t),a=[];iscons(t);)__emit_char(" "),emit_factor(car(t)),a.push(t=cdr(t));return a}else return emit_numerators(t),__emit_char("/"),n>1||isfraction(cadr(t))?(__emit_char("("),emit_denominators(t),__emit_char(")")):emit_denominators(t)},emit_fraction=function(t,n){var a,s,l,u,c;for(a=0,s=0,l=0,u=0,c=0,save(),p3=one,p4=one,isrational(cadr(t))&&(push(cadr(t)),mp_numerator(),absval(),p3=pop(),push(cadr(t)),mp_denominator(),p4=pop()),isdouble(cadr(t))&&(push(cadr(t)),absval(),p3=pop()),isplusone(p3)?u=0:u=1,p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||u++,p1=cdr(p1);for(c=emit_x,s=yindex,a=0,isplusone(p3)||(emit_number(p3,0),a++),p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||(a>0&&__emit_char(" "),u===1?emit_expr(p2):emit_factor(p2),a++),p1=cdr(p1);for(a===0&&__emit_char("1"),l=yindex,a=0,isplusone(p4)||(emit_number(p4,0),a++,n++),p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)&&(a>0&&__emit_char(" "),emit_denominator(p2,n),a++),p1=cdr(p1);return fixup_fraction(c,s,l),restore()},emit_numerators=function(t){var n;for(save(),n=0,p1=one,t=cdr(t),isrational(car(t))?(push(car(t)),mp_numerator(),absval(),p1=pop(),t=cdr(t)):isdouble(car(t))&&(push(car(t)),absval(),p1=pop(),t=cdr(t)),n=0,isplusone(p1)||(emit_number(p1,0),n++);iscons(t);)isdenominator(car(t))||(n>0&&__emit_char(" "),emit_factor(car(t)),n++),t=cdr(t);return n===0&&__emit_char("1"),restore()},emit_denominators=function(t){var n;for(save(),n=0,t=cdr(t),isfraction(car(t))&&(push(car(t)),mp_denominator(),p1=pop(),emit_number(p1,0),n++,t=cdr(t));iscons(t);)isdenominator(car(t))&&(n>0&&__emit_char(" "),emit_denominator(car(t),0),n++),t=cdr(t);return restore()},emit_factor=function(t){if(istensor(t)){emit_flat_tensor(t);return}if(isdouble(t)){emit_number(t,0);return}if(car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)){emit_subexpr(t);return}if(car(t)===symbol(POWER)){emit_power(t);return}if(iscons(t)){emit_function(t);return}if(isNumericAtom(t)){level===0?emit_numerical_fraction(t):emit_number(t,0);return}if(issymbol(t)){emit_symbol(t);return}isstr(t)&&emit_string(t)},emit_numerical_fraction=function(t){var n,a,s;if(n=0,a=0,s=0,save(),push(t),mp_numerator(),absval(),p3=pop(),push(t),mp_denominator(),p4=pop(),isplusone(p4)){emit_number(p3,0),restore();return}return s=emit_x,n=yindex,emit_number(p3,0),a=yindex,emit_number(p4,0),fixup_fraction(s,n,a),restore()},isfactor=function(t){return iscons(t)&&car(t)!==symbol(ADD)&&car(t)!==symbol(MULTIPLY)&&car(t)!==symbol(POWER)||issymbol(t)?1:isfraction(t)||isnegativenumber(t)?0:isNumericAtom(t)?1:0},emit_power=function(t){var n,a,s;if(n=0,a=0,s=0,cadr(t)===symbol(E)){__emit_str("exp("),emit_expr(caddr(t)),__emit_char(")");return}if(level>0){isminusone(caddr(t))?(__emit_char("1"),__emit_char("/"),isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t))):(isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),__emit_char("^"),isfactor(caddr(t))?emit_factor(caddr(t)):emit_subexpr(caddr(t)));return}if(__is_negative(caddr(t))){s=emit_x,n=yindex,__emit_char("1"),a=yindex,emit_denominator(t,1),fixup_fraction(s,n,a);return}return n=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),a=yindex,level++,emit_expr(caddr(t)),level--,fixup_power(n,a)},emit_denominator=function(t,n){var a,s;if(a=0,s=0,isminusone(caddr(t))){n===1?emit_expr(cadr(t)):emit_factor(cadr(t));return}return a=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),s=yindex,level++,emit_unsigned_expr(caddr(t)),level--,fixup_power(a,s)},emit_function=function(t){if(car(t)===symbol(INDEX)&&issymbol(cadr(t))){emit_index_function(t);return}if(car(t)===symbol(FACTORIAL)){emit_factorial_function(t);return}if(car(t)===symbol(DERIVATIVE)?__emit_char("d"):emit_symbol(car(t)),__emit_char("("),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char(")")},emit_index_function=function(t){if(t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?emit_subexpr(car(t)):emit_expr(car(t)),__emit_char("["),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char("]")},emit_factorial_function=function(t){return t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?emit_subexpr(t):emit_expr(t),__emit_char("!")},emit_subexpr=function(t){return __emit_char("("),emit_expr(t),__emit_char(")")},emit_symbol=function(t){var n,a,s,l,u;if(n=0,t===symbol(E)){__emit_str("exp(1)");return}for(s=get_printname(t),u=[],n=a=0,l=s.length;0<=l?a<l:a>l;n=0<=l?++a:--a)u.push(__emit_char(s[n]));return u},emit_string=function(t){var n,a,s,l;for(n=0,s=t.str,__emit_char('"'),n=a=0,l=s.length;0<=l?a<l:a>l;n=0<=l?++a:--a)__emit_char(s[n]);return __emit_char('"')},fixup_fraction=function(t,n,a){var s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;for(s=0,l=0,en=0,cn=0,u=0,tn=0,dn=0,c=0,on=0,Cn=0,[u,tn,dn]=get_size(n,a),[c,on,Cn]=get_size(a,yindex),on>tn?s=(on-tn)/2:s=0,s++,cn=dn+u-1,l=-cn-1,move(n,a,s,l),on>tn?s=-tn:s=-tn+(tn-on)/2,s++,l=-Cn+1,move(a,yindex,s,l),on>tn?en=on:en=tn,en+=2,emit_x=t,ar=[],d=0,Ct=en;0<=Ct?d<Ct:d>Ct;0<=Ct?++d:--d)ar.push(__emit_char("-"));return ar},fixup_power=function(t,n){var a,s,l,u,c,d,Ct;return a=0,s=0,u=0,d=0,l=0,c=0,Ct=0,[s,u,d]=get_size(t,n),[l,c,Ct]=get_size(n,yindex),a=-Ct-l+1,a+=d-1,move(n,yindex,0,a)},move=function(t,n,a,s){var l,u,c,d,Ct;for(l=0,Ct=[],l=u=c=t,d=n;c<=d?u<d:u>d;l=c<=d?++u:--u)chartab[l].x+=a,Ct.push(chartab[l].y+=s);return Ct},get_size=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on;for(s=0,d=chartab[t].x,u=chartab[t].x,Ct=chartab[t].y,c=chartab[t].y,s=l=ar=t+1,en=n;ar<=en?l<en:l>en;s=ar<=en?++l:--l)chartab[s].x<d&&(d=chartab[s].x),chartab[s].x>u&&(u=chartab[s].x),chartab[s].y<Ct&&(Ct=chartab[s].y),chartab[s].y>c&&(c=chartab[s].y);return a=c-Ct+1,tn=u-d+1,on=Ct,[a,tn,on]},__emit_char=function(t){if(yindex!==YMAX){if(chartab[yindex]==null)debugger;return chartab[yindex].c=t,chartab[yindex].x=emit_x,chartab[yindex].y=0,yindex++,emit_x++}},__emit_str=function(t){var n,a,s,l;for(n=0,l=[],n=a=0,s=t.length;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(__emit_char(t[n]));return l},emit_number=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn;switch(tn="",a=0,t.k){case NUM:for(tn=t.q.a.toString(),tn[0]==="-"&&n===0&&(tn=tn.substring(1)),a=s=0,c=tn.length;0<=c?s<c:s>c;a=0<=c?++s:--s)__emit_char(tn[a]);if(tn=t.q.b.toString(),tn==="1")break;for(__emit_char("/"),ar=[],a=l=0,d=tn.length;0<=d?l<d:l>d;a=0<=d?++l:--l)ar.push(__emit_char(tn[a]));return ar;case DOUBLE:for(tn=doubleToReasonableString(t.d),tn[0]==="-"&&n===0&&(tn=tn.substring(1)),en=[],a=u=0,Ct=tn.length;0<=Ct?u<Ct:u>Ct;a=0<=Ct?++u:--u)en.push(__emit_char(tn[a]));return en}},cmpGlyphs=function(t,n){return t.y<n.y?-1:t.y>n.y?1:t.x<n.x?-1:t.x>n.x?1:0},print_glyphs=function(){var t,n,a,s,l,u,c;for(n=0,t="",l=chartab.slice(0,yindex),l.sort(cmpGlyphs),chartab=[].concat(l).concat(chartab.slice(yindex)),u=0,c=chartab[0].y,n=a=0,s=yindex;0<=s?a<s:a>s;n=0<=s?++a:--a){for(;chartab[n].y>c;)t+=printchar(`
`),u=0,c++;for(;chartab[n].x>u;)t+=printchar_nowrap(" "),u++;t+=printchar_nowrap(chartab[n].c),u++}return t},N=100,oneElement=(function(){class t{}return t.prototype.x=0,t.prototype.y=0,t.prototype.h=0,t.prototype.w=0,t.prototype.index=0,t.prototype.count=0,t}).call(this),elem=[],elelmIndex=j1=0;j1<1e4;elelmIndex=++j1)elem[elelmIndex]=new oneElement;SPACE_BETWEEN_COLUMNS=3,SPACE_BETWEEN_ROWS=1,emit_tensor=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx;if(d=0,en=0,cn=0,on=0,ux=0,cx=0,c=0,sx=0,a=0,s=0,l=0,u=0,ox=0,n=0,t.tensor.ndim>2){emit_flat_tensor(t);return}if(cn=t.tensor.dim[0],t.tensor.ndim===2?on=t.tensor.dim[1]:on=1,en=cn*on,en>N){emit_flat_tensor(t);return}for(ux=emit_x,d=Ct=0,Cn=en;0<=Cn?Ct<Cn:Ct>Cn;d=0<=Cn?++Ct:--Ct)elem[d].index=yindex,elem[d].x=emit_x,emit_expr(t.tensor.elem[d]),elem[d].count=yindex-elem[d].index,[elem[d].h,elem[d].w,elem[d].y]=get_size(elem[d].index,yindex);for(l=0,u=0,d=ar=0,In=en;0<=In?ar<In:ar>In;d=0<=In?++ar:--ar)elem[d].h>l&&(l=elem[d].h),elem[d].w>u&&(u=elem[d].w);for(c=cn*l+(cn-1)*SPACE_BETWEEN_ROWS,sx=on*u+(on-1)*SPACE_BETWEEN_COLUMNS,cx=-(c/2),ox=tn=0,ix=cn;0<=ix?tn<ix:tn>ix;ox=0<=ix?++tn:--tn)for(n=dn=0,ax=on;0<=ax?dn<ax:dn>ax;n=0<=ax?++dn:--dn)d=ox*on+n,a=ux-elem[d].x,s=cx-elem[d].y,move(elem[d].index,elem[d].index+elem[d].count,a,s),a=0,n>0&&(a=n*(u+SPACE_BETWEEN_COLUMNS)),s=0,ox>0&&(s=ox*(l+SPACE_BETWEEN_ROWS)),a+=(u-elem[d].w)/2,s+=(l-elem[d].h)/2,move(elem[d].index,elem[d].index+elem[d].count,a,s);return emit_x=ux+sx},emit_flat_tensor=function(t){return emit_tensor_inner(t,0,0)},emit_tensor_inner=function(t,n,a){var s,l,u;for(s=0,__emit_char("("),s=l=0,u=t.tensor.dim[n];0<=u?l<u:l>u;s=0<=u?++l:--l)n+1===t.tensor.ndim?(emit_expr(t.tensor.elem[a]),a=a+1):a=emit_tensor_inner(t,n+1,a),s+1<t.tensor.dim[n]&&__emit_char(",");return __emit_char(")"),a},Eval_product=function(){var t,n,a,s,l,u,c,d,Ct;if(n=0,s=0,l=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),s=pop_integer(),isNaN(s)){push(p1);return}if(push(caddddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}for(c=get_binding(a),push_integer(1),n=u=d=s,Ct=l;d<=Ct?u<=Ct:u>=Ct;n=d<=Ct?++u:--u)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),DEBUG&&(console.log("product - factor 1: "+stack[tos-1].toString()),console.log("product - factor 2: "+stack[tos-2].toString())),multiply(),DEBUG&&console.log("product - result: "+stack[tos-1].toString());return set_binding(a,c)},qadd=function(){var t,n,a,s,l,u,c,d;if(u=pop(),l=pop(),n=mmul(l.q.a,u.q.b),a=mmul(l.q.b,u.q.a),c=madd(n,a),MZERO(c)){push(zero);return}return s=mmul(l.q.b,u.q.b),t=mgcd(c,s),t=makeSignSameAs(t,s),d=new U,d.k=NUM,d.q.a=mdiv(c,t),d.q.b=mdiv(s,t),push(d)},qdiv=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p2.q.a)&&stop("divide by zero"),MZERO(p1.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.b),n=mmul(p1.q.b,p2.q.a),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qmul=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p1.q.a)||MZERO(p2.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.a),n=mmul(p1.q.b,p2.q.b),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qpow=function(){return save(),qpowf(),restore()},qpowf=function(){var t,n,a,s,l,u;if(a=0,p2=pop(),p1=pop(),isplusone(p1)||isZeroAtomOrTensor(p2)){push_integer(1);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit);return}if(isZeroAtomOrTensor(p1)){isnegativenumber(p2)&&stop("divide by zero"),push(zero);return}if(isplusone(p2)){push(p1);return}if(isinteger(p2)){if(push(p2),a=pop_integer(),isNaN(a)){push_symbol(POWER),push(p1),push(p2),list(3);return}l=mpow(p1.q.a,Math.abs(a)),u=mpow(p1.q.b,Math.abs(a)),a<0&&(s=l,l=u,u=s,l=makeSignSameAs(l,u),u=makePositive(u)),p3=new U,p3.k=NUM,p3.q.a=l,p3.q.b=u,push(p3);return}if(isminusone(p1)){push(p2),normalize_angle();return}if(isnegativenumber(p1)){push(p1),negate(),push(p2),qpow(),push_integer(-1),push(p2),qpow(),multiply();return}if(!isinteger(p1)){push(p1),mp_numerator(),push(p2),qpow(),push(p1),mp_denominator(),push(p2),negate(),qpow(),multiply();return}if(is_small_integer(p1)){push(p1),push(p2),quickfactor();return}if(!isSmall(p2.q.a)||!isSmall(p2.q.b)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(t=p2.q.a,n=p2.q.b,l=mroot(p1.q.a,n),l===0){push_symbol(POWER),push(p1),push(p2),list(3);return}return u=mpow(l,t),p3=new U,p3.k=NUM,p2.q.a.isNegative()?(p3.q.a=bigInt(1),p3.q.b=u):(p3.q.a=u,p3.q.b=bigInt(1)),push(p3)},normalize_angle=function(){if(save(),p1=pop(),isinteger(p1)){p1.q.a.isOdd()?push_integer(-1):push_integer(1),restore();return}return push(p1),bignum_truncate(),p2=pop(),isnegativenumber(p1)&&(push(p2),push_integer(-1),add(),p2=pop()),push(p1),push(p2),subtract(),p3=pop(),push_symbol(POWER),push_integer(-1),push(p3),list(3),p2.q.a.isOdd()&&negate(),restore()},is_small_integer=function(t){return isSmall(t.q.a)},quickfactor=function(){var t,n,a,s,l,u;for(n=0,save(),p2=pop(),p1=pop(),t=tos,push(p1),factor_small_number(),s=tos-t,u=t,n=a=0,l=s;a<l;n=a+=2)push(stack[u+n]),push(stack[u+n+1]),push(p2),multiply(),quickpower();return multiply_all(tos-t-s),p1=pop(),moveTos(t),push(p1),restore()},quickpower=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),push(p2),bignum_truncate(),p3=pop(),push(p2),push(p3),subtract(),p4=pop(),isZeroAtomOrTensor(p4)||(push_symbol(POWER),push(p1),push(p4),list(3)),push(p3),t=pop_integer(),isNaN(t)){push_symbol(POWER),push(p1),push(p3),list(3),restore();return}if(t===0){restore();return}return push(p1),bignum_power_number(t),restore()},Eval_quotient=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)&&(p1=symbol(SYMBOL_X)),push(p1),divpoly()},divpoly=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,s=0,u=0,c=0,Ct=0,save(),p3=pop(),p2=pop(),p1=pop(),a=tos,t=tos,u=coeff(p3,p1)-1,n=tos,c=coeff(p3,p2)-1,Ct=u-c,push_integer(0),p5=pop();Ct>=0;){for(push(stack[t+u]),push(stack[n+c]),divide(),p4=pop(),s=l=0,d=c;0<=d?l<=d:l>=d;s=0<=d?++l:--l)push(stack[t+Ct+s]),push(stack[n+s]),push(p4),multiply(),subtract(),stack[t+Ct+s]=pop();push(p5),push(p4),push(p3),push_integer(Ct),power(),multiply(),add(),p5=pop(),u--,Ct--}return moveTos(a),push(p5),restore()},DEBUG_RATIONALIZE=!1,Eval_rationalize=function(){return push(cadr(p1)),Eval(),rationalize()},rationalize=function(){var t;return t=expanding,yyrationalize(),expanding=t},yyrationalize=function(){var t,n,a;if(a=pop(),istensor(a)){__rationalize_tensor(a);return}if(expanding=0,car(a)!==symbol(ADD)){push(a);return}for(DEBUG_RATIONALIZE&&console.log("rationalize: this is the input expr: "+a),push(one),multiply_denominators(a),t=pop(),DEBUG_RATIONALIZE&&console.log("rationalize: this is the new denominator: "+t),push(zero),n=cdr(a);iscons(n);)DEBUG_RATIONALIZE&&console.log("term: "+car(n)),push(t),push(car(n)),multiply(),add(),n=cdr(n);if(DEBUG_RATIONALIZE&&console.log("rationalize: original terms times new denominator: "+stack[tos-1]),Condense(),DEBUG_RATIONALIZE&&console.log("rationalize: after factoring: "+stack[tos-1]),push(t),divide(),DEBUG_RATIONALIZE)return console.log("rationalize: after dividing by new denom. (and we're done): "+stack[tos-1])},multiply_denominators=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_term(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_term(t)},multiply_denominators_term=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_factor(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_factor(t)},multiply_denominators_factor=function(t){if(car(t)===symbol(POWER)){if(push(t),t=caddr(t),isnegativenumber(t)){inverse(),__lcm();return}if(car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))){inverse(),__lcm();return}return pop()}},__rationalize_tensor=function(t){var n,a,s,l;if(n=0,push(t),Eval(),t=pop(),!istensor(t)){push(t);return}for(s=t.tensor.nelem,n=a=0,l=s;0<=l?a<l:a>l;n=0<=l?++a:--a)push(t.tensor.elem[n]),rationalize(),t.tensor.elem[n]=pop();return check_tensor_dimensions(t),push(t)},__lcm=function(){return save(),p1=pop(),p2=pop(),push(p1),push(p2),multiply(),push(p1),push(p2),gcd(),divide(),restore()},Eval_real=function(){return push(cadr(p1)),Eval(),real()},real=function(){return save(),rect(),p1=pop(),push(p1),push(p1),conjugate(),add(),push_integer(2),divide(),restore()},DEBUG_RECT=!1,Eval_rect=function(){return push(cadr(p1)),Eval(),rect()},rect=function(){var t;if(save(),p1=pop(),t=p1,DEBUG_RECT&&console.log("RECT of "+t),DEBUG_RECT&&console.log("any clock forms in : "+t+" ? "+findPossibleClockForm(t)),issymbol(p1))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(YYRECT),push(p1),list(2)):push(p1);else if(!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))&&!findPossibleExponentialForm(p1)&&!findPossibleClockForm(p1)&&!(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&Find(p1,imaginaryunit)))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),push(p1);else if(car(p1)===symbol(MULTIPLY)&&isimaginaryunit(cadr(p1))&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))push(p1);else if(car(p1)===symbol(ADD))for(DEBUG_RECT&&console.log(" rect - "+t+" is a sum "),push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),rect(),add(),p1=cdr(p1);else DEBUG_RECT&&console.log(" rect - "+t+" is NOT a sum "),push(p1),abs(),DEBUG_RECT&&console.log(" rect - "+t+" abs: "+stack[tos-1].toString()),push(p1),arg(),DEBUG_RECT&&console.log(" rect - "+t+" arg of "+p1+" : "+stack[tos-1].toString()),p1=pop(),push(p1),cosine(),DEBUG_RECT&&console.log(" rect - "+t+" cosine: "+stack[tos-1].toString()),push(imaginaryunit),push(p1),sine(),DEBUG_RECT&&console.log(" rect - "+t+" sine: "+stack[tos-1].toString()),multiply(),DEBUG_RECT&&console.log(" rect - "+t+" i * sine: "+stack[tos-1].toString()),add(),DEBUG_RECT&&console.log(" rect - "+t+" cos + i * sine: "+stack[tos-1].toString()),multiply();if(restore(),DEBUG_RECT)return console.log("rect of "+t+" : "+stack[tos-1])},Eval_roots=function(){return p2=cadr(p1),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):(push(p2),Eval(),p2=pop(),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):push(p2)),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("roots: 1st argument is not a polynomial in the variable "+p2),push(p1),push(p2),roots()},hasImaginaryCoeff=function(t){var n,a,s;for(a=!1,n=s=t;s>0;n=s+=-1)if(iscomplexnumber(stack[tos-n])){a=!0;break}return a},isSimpleRoot=function(t){var n,a,s;if(t>2){for(a=!0,isZeroAtomOrTensor(stack[tos-t])&&(a=!1),n=s=t-1;s>1;n=s+=-1)if(!isZeroAtomOrTensor(stack[tos-n])){a=!1;break}}else a=!1;return a},normalisedCoeff=function(t,n){var a,s,l,u,c,d,Ct,ar;for(l=coeff(t,n),a=stack[tos-1],d=[],s=u=1,Ct=l;1<=Ct?u<=Ct:u>=Ct;s=1<=Ct?++u:--u)d.push(pop());for(s=c=ar=l-1;ar<=0?c<=0:c>=0;s=ar<=0?++c:--c)push(d[s]),push(a),divide();return l},roots=function(){var t,n,a,s,l,u,c,d;if(t=0,n=0,c=0,DEBUG&&console.log("roots: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),recursionLevelNestedRadicalsRemoval>1){pop(),pop(),push(symbol(NIL)),restore();return}if(t=tos-2,DEBUG&&console.log("roots checking if "+stack[tos-1].toString()+" is a case of simple roots"),p2=pop(),p1=pop(),push(p1),push(p2),a=normalisedCoeff(p2,p1),isSimpleRoot(a)?(DEBUG&&console.log("yes, "+stack[tos-1].toString()+" is a case of simple roots"),l=stack[tos-a],u=stack[tos-1],moveTos(tos-a),pop(),pop(),getSimpleRoots(a,u,l)):(moveTos(tos-a),roots2()),c=tos-t,c===0&&stop("roots: the polynomial is not factorable, try nroots"),c===1){restore();return}for(sort_stack(c),p1=alloc_tensor(c),p1.tensor.ndim=1,p1.tensor.dim[0]=c,n=s=0,d=c;0<=d?s<d:s>d;n=0<=d?++s:--s)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore(),!1},getSimpleRoots=function(t,n,a){var s,l,u,c,d,Ct,ar;if(DEBUG&&console.log("getSimpleRoots"),save(),t=t-1,push(a),push_rational(1,t),power(),push(n),push_rational(1,t),power(),divide(),l=pop(),t%2===0)for(ar=u=1,d=t;u<=d;ar=u+=2)push(l),push_integer(-1),push_rational(ar,t),power(),multiply(),s=pop(),push(s),push(s),negate();else for(ar=c=1,Ct=t;1<=Ct?c<=Ct:c>=Ct;ar=1<=Ct?++c:--c)push(l),push_integer(-1),push_rational(ar,t),power(),multiply(),ar%2===0&&negate();return restore()},roots2=function(){var t;if(save(),DEBUG&&console.log("roots2: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),p2=pop(),p1=pop(),push(p1),push(p2),t=normalisedCoeff(p2,p1),hasImaginaryCoeff(t)?(moveTos(tos-t),pop(),pop()):(moveTos(tos-t),factorpoly(),p1=pop()),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),roots3(),p1=cdr(p1);else push(p1),push(p2),roots3();return restore()},roots3=function(){var t;return save(),p2=pop(),p1=pop(),car(p1)===symbol(POWER)&&ispolyexpandedform(cadr(p1),p2)&&isposint(caddr(p1))?(t=normalisedCoeff(p2,cadr(p1)),mini_solve(t)):ispolyexpandedform(p1,p2)&&(t=normalisedCoeff(p2,p1),mini_solve(t)),restore()},mini_solve=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx,mx,vx,bx,xx,_x,Ex,Tx,Cx,Mx,Ax,Nx,Ux,Rx,Ox,Px,$x,Lx,zx,qx,jx,Hx,Vx,nE,Wx,tE,lE,iE,Xx,CE,RE,SE,EE,FE,AE,ZE,Dx,kx,Yx,Kx,aE,eE;if(save(),t===2){p3=pop(),p4=pop(),push(p4),push(p3),divide(),negate(),restore();return}if(t===3){p3=pop(),p4=pop(),p5=pop(),push(p4),push_integer(2),power(),push_integer(4),push(p3),multiply(),push(p5),multiply(),subtract(),push_rational(1,2),power(),p6=pop(),push(p6),push(p4),subtract(),push(p3),push_integer(2),multiply(),divide(),push(p6),push(p4),add(),negate(),push(p3),divide(),push_rational(1,2),multiply(),restore();return}if(t===4||t===5){if(p3=pop(),p4=pop(),p5=pop(),p6=pop(),push(p5),push(p5),multiply(),vx=pop(),push(vx),push(p5),multiply(),bx=pop(),push(p4),push(p4),multiply(),gx=pop(),push(gx),push(p4),multiply(),dx=pop(),push(dx),push(p6),multiply(),mx=pop(),push(mx),push_integer(-4),multiply(),Nx=pop(),push(dx),push_integer(2),multiply(),l=pop(),push(p3),push(p3),multiply(),ix=pop(),push(ix),push(p3),multiply(),sx=pop(),push_integer(3),push(p3),multiply(),u=pop(),push(ix),push(p6),multiply(),ax=pop(),push(ax),push(p6),multiply(),ox=pop(),push(ax),push_integer(27),multiply(),s=pop(),push(ox),push_integer(-27),multiply(),Mx=pop(),push(u),push_integer(2),multiply(),pop(),push(p3),push(p5),multiply(),hx=pop(),push(hx),push(p4),multiply(),ux=pop(),push(ux),push(p6),multiply(),cx=pop(),push(hx),push_integer(3),multiply(),d=pop(),push_integer(-4),push(p3),push(bx),multiply(),multiply(),Ax=pop(),push(ux),push_integer(9),multiply(),negate(),Ux=pop(),push(cx),push_integer(18),multiply(),a=pop(),push(gx),push(d),subtract(),cn=pop(),push(gx),push(vx),multiply(),fx=pop(),push(p4),negate(),push(u),divide(),Rx=pop(),t===4){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),DEBUG&&console.log("cubic: D0: "+cn.toString()),push(cn),push_integer(3),power(),push_integer(4),multiply(),Ct=pop(),push(cn),simplify(),absValFloat(),dn=pop(),DEBUG&&console.log("cubic: D0 as float: "+dn.toString()),push(a),push(Nx),push(fx),push(Ax),push(Mx),add(),add(),add(),add(),simplify(),absValFloat(),_x=pop(),DEBUG&&console.log("cubic: DETERMINANT: "+_x.toString()),push(l),push(Ux),push(s),add(),add(),Cn=pop(),DEBUG&&console.log("cubic: D1: "+Cn.toString()),push(Cn),push_integer(2),power(),push(Ct),subtract(),push_rational(1,2),power(),simplify(),In=pop(),isZeroAtomOrTensor(_x))if(isZeroAtomOrTensor(dn)){DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is zero"),push(Rx),restore();return}else{DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is not zero"),push(p3),push(p6),push_integer(9),multiply(),multiply(),push(p4),push(p5),multiply(),subtract(),push(cn),push_integer(2),multiply(),divide(),Kx=pop(),push(Kx),push(Kx),push(ux),push_integer(4),multiply(),push(p3),push(p3),push(p6),push_integer(9),multiply(),multiply(),multiply(),negate(),push(dx),negate(),add(),add(),push(p3),push(cn),multiply(),divide(),restore();return}for(n=!1,tE=!1;!n;)push(In),tE&&negate(),push(Cn),add(),push_rational(1,2),multiply(),push_rational(1,3),power(),simplify(),en=pop(),DEBUG&&console.log("cubic: C: "+en.toString()),push(en),simplify(),absValFloat(),on=pop(),DEBUG&&console.log("cubic: C as absval and float: "+on.toString()),isZeroAtomOrTensor(on)?(DEBUG&&console.log(" cubic: C IS ZERO flipping the sign"),tE=!0):n=!0;push(en),push(u),multiply(),c=pop(),push(c),push_integer(2),multiply(),ar=pop(),push(imaginaryunit),push_integer(3),push_rational(1,2),power(),multiply(),lE=pop(),push_integer(1),push(lE),add(),AE=pop(),push_integer(1),push(lE),subtract(),FE=pop(),push(en),push(u),divide(),tn=pop(),push(Rx),push(tn),negate(),push(cn),push(c),divide(),negate(),add(),add(),simplify(),push(Rx),push(tn),push(AE),multiply(),push_integer(2),divide(),push(FE),push(cn),multiply(),push(ar),divide(),add(),add(),simplify(),push(Rx),push(tn),push(FE),multiply(),push_integer(2),divide(),push(AE),push(cn),multiply(),push(ar),divide(),add(),add(),simplify(),restore();return}if(t===5){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),p7=pop(),isZeroAtomOrTensor(p4)&&isZeroAtomOrTensor(p6)&&!isZeroAtomOrTensor(p5)&&!isZeroAtomOrTensor(p7)){for(DEBUG&&console.log("biquadratic case"),push(p3),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(p5),push(symbol(SECRETX)),multiply(),push(p7),add(),add(),push(symbol(SECRETX)),roots(),qx=pop(),ZE=qx.tensor.elem,iE=0,Xx=ZE.length;iE<Xx;iE++)Wx=ZE[iE],push(Wx),push_rational(1,2),power(),simplify(),push(Wx),push_rational(1,2),power(),negate(),simplify();restore();return}if(push(p6),push(p6),multiply(),xx=pop(),push(p7),push(p7),multiply(),Ex=pop(),push(Ex),push(p7),multiply(),Tx=pop(),push_integer(256),push(sx),push(Tx),multiply(),multiply(),push_integer(-192),push(ax),push(Ex),push(p4),multiply(),multiply(),multiply(),push_integer(-128),push(ix),push(vx),push(Ex),multiply(),multiply(),multiply(),push_integer(144),push(ox),push(p5),push(p7),multiply(),multiply(),multiply(),push(Mx),push(xx),multiply(),push_integer(144),push(ux),push(p4),push(Ex),multiply(),multiply(),multiply(),push_integer(-6),push(p3),push(gx),push(xx),push(p7),multiply(),multiply(),multiply(),multiply(),push_integer(-80),push(cx),push(p5),push(p7),multiply(),multiply(),multiply(),push_integer(18),push(cx),push(xx),multiply(),multiply(),push_integer(16),push(hx),push(bx),push(p7),multiply(),multiply(),multiply(),push_integer(-4),push(hx),push(vx),push(xx),multiply(),multiply(),multiply(),push_integer(-27),push(dx),push(p4),push(Ex),multiply(),multiply(),multiply(),push_integer(18),push(mx),push(p5),push(p7),multiply(),multiply(),multiply(),push(Nx),push(xx),multiply(),push_integer(-4),push(fx),push(p5),push(p7),multiply(),multiply(),multiply(),push(fx),push(xx),multiply(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),_x=pop(),DEBUG&&console.log("R_determinant: "+_x.toString()),push(vx),push_integer(-3),push(p4),push(p6),multiply(),multiply(),push_integer(12),push(p3),push(p7),multiply(),multiply(),add(),add(),cn=pop(),DEBUG&&console.log("R_DELTA0: "+cn.toString()),push_integer(2),push(bx),multiply(),push_integer(-9),push(p4),push(p5),push(p6),multiply(),multiply(),multiply(),push_integer(27),push(gx),push(p7),multiply(),multiply(),push_integer(27),push(p3),push(xx),multiply(),multiply(),push_integer(-72),push(hx),push(p7),multiply(),multiply(),add(),add(),add(),add(),Cn=pop(),DEBUG&&console.log("R_DELTA1: "+Cn.toString()),push_integer(8),push(hx),multiply(),push_integer(-3),push(gx),multiply(),add(),push_integer(8),push(ix),multiply(),divide(),Ox=pop(),DEBUG&&console.log("p: "+Ox.toString()),push(dx),push_integer(-4),push(ux),multiply(),push_integer(8),push(ax),multiply(),add(),add(),push_integer(8),push(sx),multiply(),divide(),Px=pop(),DEBUG&&console.log("q: "+Px.toString()),DEBUG&&console.log("tos 1 "+tos),isZeroAtomOrTensor(p4)){for(Ox=p5,Px=p6,$x=p7,push_rational(5,2),push(Ox),multiply(),jx=pop(),push_integer(2),push(Ox),push_integer(2),power(),multiply(),push($x),subtract(),Hx=pop(),push(Ox),push_integer(3),power(),push_integer(2),divide(),push_rational(-1,2),push(Ox),push($x),multiply(),multiply(),push_rational(-1,8),push(Px),push_integer(2),power(),multiply(),add(),add(),Vx=pop(),push(symbol(SECRETX)),push_integer(3),power(),push(jx),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(Hx),push(symbol(SECRETX)),multiply(),push(Vx),add(),add(),add(),DEBUG&&console.log("resolventCubic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),Yx=pop(),DEBUG&&console.log("resolventCubicSolutions: "+Yx),Cx=null,kx=Yx.tensor.elem,EE=0,RE=kx.length;EE<RE;EE++)if(Wx=kx[EE],DEBUG&&console.log("examining solution: "+Wx),push(Wx),push_integer(2),multiply(),push(Ox),add(),absValFloat(),eE=pop(),DEBUG&&console.log("abs value is: "+Wx),!isZeroAtomOrTensor(eE)){Cx=Wx;break}DEBUG&&console.log("chosen solution: "+Cx),push(Cx),push_integer(2),multiply(),push(Ox),add(),push_rational(1,2),power(),simplify(),aE=pop(),push(Px),push_integer(2),multiply(),push(aE),divide(),simplify(),zx=pop(),push(Ox),push_integer(3),multiply(),push(Cx),push_integer(2),multiply(),add(),Lx=pop(),push(aE),push(Lx),push(zx),add(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(aE),push(Lx),push(zx),add(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),push(aE),negate(),push(Lx),push(zx),subtract(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(aE),negate(),push(Lx),push(zx),subtract(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),restore();return}else{for(DEBUG&&console.log("tos 2 "+tos),push_integer(8),push(p5),push(p3),multiply(),multiply(),push_integer(-3),push(p4),push_integer(2),power(),multiply(),add(),push_integer(8),push(p3),push_integer(2),power(),multiply(),divide(),Ox=pop(),DEBUG&&console.log("p for depressed quartic: "+Ox.toString()),push(p4),push_integer(3),power(),push_integer(-4),push(p3),push(p4),push(p5),multiply(),multiply(),multiply(),push_integer(8),push(p6),push(p3),push_integer(2),power(),multiply(),multiply(),add(),add(),push_integer(8),push(p3),push_integer(3),power(),multiply(),divide(),Px=pop(),DEBUG&&console.log("q for depressed quartic: "+Px.toString()),push(p4),push_integer(4),power(),push_integer(-3),multiply(),push_integer(256),push(sx),push(p7),multiply(),multiply(),push_integer(-64),push(ax),push(p4),multiply(),multiply(),push_integer(16),push(gx),push(p3),push(p5),multiply(),multiply(),multiply(),add(),add(),add(),push_integer(256),push(p3),push_integer(4),power(),multiply(),divide(),$x=pop(),DEBUG&&console.log("r for depressed quartic: "+$x.toString()),DEBUG&&console.log("tos 4 "+tos),push(symbol(SECRETX)),push_integer(4),power(),DEBUG&&console.log("4 * x^4: "+stack[tos-1].toString()),push(Ox),push(symbol(SECRETX)),push_integer(2),power(),multiply(),DEBUG&&console.log("R_p * x^2: "+stack[tos-1].toString()),push(Px),push(symbol(SECRETX)),multiply(),DEBUG&&console.log("R_q * x: "+stack[tos-1].toString()),push($x),DEBUG&&console.log("R_r: "+stack[tos-1].toString()),add(),add(),add(),simplify(),DEBUG&&console.log("solving depressed quartic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),nE=pop(),DEBUG&&console.log("depressedSolutions: "+nE),Dx=nE.tensor.elem,SE=0,CE=Dx.length;SE<CE;SE++)Wx=Dx[SE],push(Wx),push(p4),push_integer(4),push(p3),multiply(),divide(),subtract(),simplify(),DEBUG&&console.log("solution from depressed: "+stack[tos-1].toString());restore();return}}}return moveTos(tos-t),restore()},Eval_round=function(){return push(cadr(p1)),Eval(),yround()},yround=function(){return save(),yyround(),restore()},yyround=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(ROUND),push(p1),list(2);return}if(isdouble(p1)){t=Math.round(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return push(p1),yyfloat(),p1=pop(),push_integer(Math.round(p1.d))},T_INTEGER=1001,T_DOUBLE=1002,T_SYMBOL=1003,T_FUNCTION=1004,T_NEWLINE=1006,T_STRING=1007,T_GTEQ=1008,T_LTEQ=1009,T_EQ=1010,T_NEQ=1011,T_QUOTASSIGN=1012,token="",newline_flag=0,meta_mode=0,input_str=0,scan_str=0,token_str=0,token_buf=0,lastFoundSymbol=null,symbolsRightOfAssignment=null,symbolsLeftOfAssignment=null,isSymbolLeftOfAssignment=null,scanningParameters=null,functionInvokationsScanningStack=null,skipRootVariableToBeSolved=!1,assignmentFound=null,scanned="",scan=function(t){return DEBUG&&console.log("#### scanning "+t),lastFoundSymbol=null,symbolsRightOfAssignment=[],symbolsLeftOfAssignment=[],isSymbolLeftOfAssignment=!0,scanningParameters=[],functionInvokationsScanningStack=[""],assignmentFound=!1,scanned=t,meta_mode=0,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,assignmentFound||(symbolsInExpressionsWithoutAssignments=symbolsInExpressionsWithoutAssignments.concat(symbolsLeftOfAssignment)),token_str-input_str)},scan_meta=function(t){return scanned=t,meta_mode=1,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,token_str-input_str)},scan_stmt=function(){var t,n,a,s,l,u,c,d,Ct;if(scan_relation(),t=!1,token===T_QUOTASSIGN&&(t=!0),(token===T_QUOTASSIGN||token==="=")&&(Ct=lastFoundSymbol,DEBUG&&console.log("assignment!"),assignmentFound=!0,isSymbolLeftOfAssignment=!1,get_next_token(),push_symbol(SETQ),swap(),t&&push_symbol(QUOTE),scan_relation(),t&&list(2),list(3),isSymbolLeftOfAssignment=!0,codeGen)){if(s=symbolsRightOfAssignment.indexOf(Ct),s!==-1&&(symbolsRightOfAssignment.splice(s,1),symbolsHavingReassignments.push(Ct)),DEBUG)for(console.log("locally, "+Ct+" depends on: "),l=0,u=symbolsRightOfAssignment.length;l<u;l++)a=symbolsRightOfAssignment[l],console.log("  "+a);for(symbolsDependencies[Ct]==null&&(symbolsDependencies[Ct]=[]),n=symbolsDependencies[Ct],d=0,c=symbolsRightOfAssignment.length;d<c;d++)a=symbolsRightOfAssignment[d],n.indexOf(a)===-1&&n.push(a);return symbolsRightOfAssignment=[]}},scan_relation=function(){switch(scan_expression(),token){case T_EQ:return push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3);case T_NEQ:return push_symbol(NOT),swap(),push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3),list(2);case T_LTEQ:return push_symbol(TESTLE),swap(),get_next_token(),scan_expression(),list(3);case T_GTEQ:return push_symbol(TESTGE),swap(),get_next_token(),scan_expression(),list(3);case"<":return push_symbol(TESTLT),swap(),get_next_token(),scan_expression(),list(3);case">":return push_symbol(TESTGT),swap(),get_next_token(),scan_expression(),list(3)}},scan_expression=function(){var t;switch(t=tos,token){case"+":get_next_token(),scan_term();break;case"-":get_next_token(),scan_term(),negate();break;default:scan_term()}for(;newline_flag===0&&(token==="+"||token==="-");)token==="+"?(get_next_token(),scan_term()):(get_next_token(),scan_term(),negate());if(tos-t>1)return list(tos-t),push_symbol(ADD),swap(),cons()},is_factor=function(){if((typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode)return 1;switch(token){case"*":case"/":return 1;case"(":case T_SYMBOL:case T_FUNCTION:case T_INTEGER:case T_DOUBLE:case T_STRING:return newline_flag?(scan_str=token_str,0):1}return 0},simplify_1_in_products=function(t,n){if(t>n&&isrational(stack[t-1])&&equaln(stack[t-1],1))return pop()},multiply_consecutive_constants=function(t,n){if(t>n+1&&isNumericAtom(stack[t-2])&&isNumericAtom(stack[t-1]))return multiply()},scan_term=function(){var t;for(t=tos,scan_factor(),parse_time_simplifications&&simplify_1_in_products(tos,t);is_factor();)token==="*"?(get_next_token(),scan_factor()):token==="/"?(simplify_1_in_products(tos,t),get_next_token(),scan_factor(),inverse()):(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode?(get_next_token(),push_symbol(INNER),swap(),scan_factor(),list(3)):scan_factor(),parse_time_simplifications&&(multiply_consecutive_constants(tos,t),simplify_1_in_products(tos,t));if(t===tos)return push_integer(1);if(tos-t>1)return list(tos-t),push_symbol(MULTIPLY),swap(),cons()},scan_power=function(){if(token==="^")return get_next_token(),push_symbol(POWER),swap(),scan_factor(),list(3)},scan_index=function(t){for(get_next_token(),push_symbol(INDEX),swap(),scan_expression();token===",";)get_next_token(),scan_expression();return token!=="]"&&scan_error("] expected"),get_next_token(),list(tos-t)},scan_factor=function(){var t,n;for(n=tos,t=!1,token==="("?scan_subexpr():token===T_SYMBOL?scan_symbol():token===T_FUNCTION?scan_function_call_with_function_name():token==="["?scan_tensor():token===T_INTEGER?(t=!0,bignum_scan_integer(token_buf),get_next_token()):token===T_DOUBLE?(t=!0,bignum_scan_float(token_buf),get_next_token()):token===T_STRING?scan_string():scan_error("syntax error");token==="["||token==="("&&newline_flag===0&&!t;)token==="["?scan_index(n):token==="("&&scan_function_call_without_function_name();for(;token==="!";)get_next_token(),push_symbol(FACTORIAL),swap(),list(2);for(;(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===transpose_unicode;)get_next_token(),push_symbol(TRANSPOSE),swap(),list(2);return scan_power()},addSymbolRightOfAssignment=function(t){var n,a,s,l;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols right of assignment"),s="",n=a=1,l=functionInvokationsScanningStack.length;1<=l?a<l:a>l;n=1<=l?++a:--a)functionInvokationsScanningStack[n]!==""&&(s+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=s+t,symbolsRightOfAssignment.push(t)}},addSymbolLeftOfAssignment=function(t){var n,a,s,l;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols left of assignment"),s="",n=a=1,l=functionInvokationsScanningStack.length;1<=l?a<l:a>l;n=1<=l?++a:--a)functionInvokationsScanningStack[n]!==""&&(s+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=s+t,symbolsLeftOfAssignment.push(t)}},scan_symbol=function(){if(token!==T_SYMBOL&&scan_error("symbol expected"),meta_mode&&token_buf.length===1)switch(token_buf[0]){case"a":push(symbol(METAA));break;case"b":push(symbol(METAB));break;case"x":push(symbol(METAX));break;default:push(usr_symbol(token_buf))}else push(usr_symbol(token_buf));return scanningParameters.length===0?(DEBUG&&console.log("out of scanning parameters, processing "+token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment&&addSymbolLeftOfAssignment(token_buf)):(DEBUG&&console.log("still scanning parameters, skipping "+token_buf),isSymbolLeftOfAssignment&&addSymbolRightOfAssignment("'"+token_buf)),DEBUG&&console.log("found symbol: "+token_buf+" left of assignment: "+isSymbolLeftOfAssignment),isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token()},scan_string=function(){return push(new_string(token_buf)),get_next_token()},scan_function_call_with_function_name=function(){var t,n,a,s,l,u;if(DEBUG&&console.log("-- scan_function_call_with_function_name start"),s=1,l=new U,l=usr_symbol(token_buf),push(l),t=token_buf,(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.push(token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token(),get_next_token(),scanningParameters.push(!0),token!==")"){for(scan_stmt(),s++;token===",";)get_next_token(),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("sum")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("product")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("for")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("defint")!==-1&&(s===2||s>2&&(s-2)%3===0)&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),scan_stmt(),skipRootVariableToBeSolved=!1,s++;s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_x").test(c)}))}for(scanningParameters.pop(),n=a=0,u=symbolsRightOfAssignment.length;0<=u?a<=u:a>=u;n=0<=u?++a:--a)symbolsRightOfAssignment[n]!=null&&(t==="roots"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="defint"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="sum"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="product"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="for"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"),"")));if(token!==")"&&scan_error(") expected"),get_next_token(),list(s),(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.pop(),t===symbol(PATTERN).printname&&(patternHasBeenFound=!0),DEBUG)return console.log("-- scan_function_call_with_function_name end")},scan_function_call_without_function_name=function(){var t;if(DEBUG&&console.log("-- scan_function_call_without_function_name start"),push_symbol(EVAL),swap(),list(2),t=1,get_next_token(),scanningParameters.push(!0),token!==")")for(scan_stmt(),t++;token===",";)get_next_token(),scan_stmt(),t++;if(scanningParameters.pop(),token!==")"&&scan_error(") expected"),get_next_token(),list(t),DEBUG)return console.log("-- scan_function_call_without_function_name end: "+stack[tos-1])},scan_subexpr=function(){return token!=="("&&scan_error("( expected"),get_next_token(),scan_stmt(),token!==")"&&scan_error(") expected"),get_next_token()},scan_tensor=function(){var t;for(t=0,token!=="["&&scan_error("[ expected"),get_next_token(),scan_stmt(),t=1;token===",";)get_next_token(),scan_stmt(),t++;return build_tensor(t),token!=="]"&&scan_error("] expected"),get_next_token()},scan_error=function(t){for(errorMessage="";input_str!==scan_str&&!((scanned[input_str]===`
`||scanned[input_str]==="\r")&&input_str+1===scan_str);)errorMessage+=scanned[input_str++];for(errorMessage+=" ? ";scanned[input_str]&&scanned[input_str]!==`
`&&scanned[input_str]!=="\r";)errorMessage+=scanned[input_str++];return errorMessage+=`
`,stop(t)},build_tensor=function(t){var n,a,s;for(n=0,save(),p2=alloc_tensor(t),p2.tensor.ndim=1,p2.tensor.dim[0]=t,n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p2.tensor.elem[n]=stack[tos-t+n];return check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},get_next_token=function(){for(newline_flag=0;get_token(),token===T_NEWLINE;)newline_flag=1;if(DEBUG)return console.log("get_next_token token: "+token)},get_token=function(){for(;isspace(scanned[scan_str]);){if(scanned[scan_str]===`
`||scanned[scan_str]==="\r"){token=T_NEWLINE,scan_str++;return}scan_str++}if(token_str=scan_str,scan_str===scanned.length){token="";return}if(isdigit(scanned[scan_str])||scanned[scan_str]==="."){for(;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="."){for(scan_str++;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="e"&&(scanned[scan_str+1]==="+"||scanned[scan_str+1]==="-"||isdigit(scanned[scan_str+1])))for(scan_str+=2;isdigit(scanned[scan_str]);)scan_str++;token=T_DOUBLE}else token=T_INTEGER;update_token_buf(token_str,scan_str);return}if(isalpha(scanned[scan_str])){for(;isalnumorunderscore(scanned[scan_str]);)scan_str++;scanned[scan_str]==="("?token=T_FUNCTION:token=T_SYMBOL,update_token_buf(token_str,scan_str);return}if(scanned[scan_str]==='"'){for(scan_str++;scanned[scan_str]!=='"';)scan_str===scanned.length-1&&(scan_str++,scan_error("runaway string"),scan_str--),scan_str++;scan_str++,token=T_STRING,update_token_buf(token_str+1,scan_str-1);return}if(scanned[scan_str]==="#"||scanned[scan_str]==="-"&&scanned[scan_str+1]==="-"){for(;scanned[scan_str]&&scanned[scan_str]!==`
`&&scanned[scan_str]!=="\r";)scan_str++;scanned[scan_str]&&scan_str++,token=T_NEWLINE;return}if(scanned[scan_str]===":"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_QUOTASSIGN;return}if(scanned[scan_str]==="="&&scanned[scan_str+1]==="="){scan_str+=2,token=T_EQ;return}if(scanned[scan_str]==="!"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_NEQ;return}if(scanned[scan_str]==="<"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_LTEQ;return}if(scanned[scan_str]===">"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_GTEQ;return}return token=scanned[scan_str++]},update_token_buf=function(t,n){return token_buf=scanned.substring(t,n)},$.scan=scan,Eval_sgn=function(){return push(cadr(p1)),Eval(),sgn()},sgn=function(){return save(),yysgn(),restore()},yysgn=function(){if(p1=pop(),isdouble(p1))if(p1.d>0){push_integer(1);return}else if(p1.d===0){push_integer(1);return}else{push_integer(-1);return}if(isrational(p1))if(MSIGN(mmul(p1.q.a,p1.q.b))===-1){push_integer(-1);return}else if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(0);return}else{push_integer(1);return}if(iscomplexnumber(p1)){push_integer(-1),push(p1),absval(),power(),push(p1),multiply();return}if(isnegativeterm(p1)){push_symbol(SGN),push(p1),negate(),list(2),push_integer(-1),multiply();return}return push_symbol(SGN),push(p1),list(2)},Eval_shape=function(){return push(cadr(p1)),Eval(),shape()},shape=function(){var t,n,a,s,l,u,c,d;for(a=0,u=0,t=[],n=[],a=s=0,c=MAXDIM;0<=c?s<c:s>c;a=0<=c?++s:--s)t[a]=0,n[a]=0;if(save(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("transpose: tensor expected, 1st arg is not a tensor"),push(zero),restore();return}for(u=p1.tensor.ndim,p2=alloc_tensor(u),p2.tensor.ndim=1,p2.tensor.dim[0]=u,a=l=0,d=u;0<=d?l<d:l>d;a=0<=d?++l:--l)push_integer(p1.tensor.dim[a]),p2.tensor.elem[a]=pop();return push(p2),restore()},simfac=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(ADD)){for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),simfac_term(),p1=cdr(p1);add_all(tos-t)}else push(p1),simfac_term();return restore()},simfac_term=function(){var t;if(t=0,save(),p1=pop(),car(p1)!==symbol(MULTIPLY)){push(p1),restore();return}for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),p1=cdr(p1);for(;yysimfac(t););return multiply_all_noexpand(tos-t),restore()},yysimfac=function(t){var n,a,s,l,u,c,d,Ct;for(n=0,a=0,n=s=u=t,c=tos;u<=c?s<c:s>c;n=u<=c?++s:--s)for(p1=stack[n],a=l=d=t,Ct=tos;d<=Ct?l<Ct:l>Ct;a=d<=Ct?++l:--l)if(n!==a){if(p2=stack[a],car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&equal(cadr(p1),cadr(p2)))return push(cadr(p1)),push(one),subtract(),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&equal(p1,cadadr(p2)))return push(p1),push_integer(-1),add(),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(FACTORIAL)&&(push(p1),push(cadr(p2)),subtract(),p3=pop(),isplusone(p3)))return push(p1),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(POWER)&&isminusone(caddr(p1))&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3)))return push(cadr(p1)),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)){if(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3))return stack[n]=cadr(p1),stack[a]=one,1;if(isminusone(p3))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(equaln(p3,2))return stack[n]=cadr(p1),push(cadr(p1)),push_integer(-1),add(),stack[a]=pop(),1;if(equaln(p3,-2))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),push(cadr(cadr(p2))),push_integer(-1),add(),reciprocate(),stack[a]=pop(),1}}return 0},DEBUG_SIMPLIFY=!1,Eval_simplify=function(){return push(cadr(p1)),runUserDefinedSimplifications(),Eval(),simplify()},runUserDefinedSimplifications=function(){var t,n,a,s,l,u,c,d,Ct,ar;if(userSimplificationsInListForm.length!==0&&!Find(cadr(p1),symbol(INTEGRAL))){for(Ct=expanding,expanding=!1,DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications passed: "+stack[tos-1].toString()),Eval(),DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications after eval no expanding: "+stack[tos-1].toString()),expanding=Ct,p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("patterns to be checked: "),s=0,l=userSimplificationsInListForm.length;s<l;s++)a=userSimplificationsInListForm[s],DEBUG_SIMPLIFY&&console.log("..."+a);for(t=!0,d=0;t&&d<MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;)for(t=!1,d++,c=0,u=userSimplificationsInListForm.length;c<u;c++){for(a=userSimplificationsInListForm[c],ar=!0,n=0;ar&&n<MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)n++,DEBUG_SIMPLIFY&&console.log("simplify - tos: "+tos+" checking pattern: "+a+" on: "+p1),push_symbol(NIL),ar=transform(a,!0),ar&&(t=!0),p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("p1 at this stage of simplification: "+p1);n===MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&stop("maximum application of single transformation rule exceeded: "+a)}if(d===MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&stop("maximum application of all transformation rules exceeded "),DEBUG_SIMPLIFY&&console.log("METAX = "+get_binding(symbol(METAX))),DEBUG_SIMPLIFY&&console.log("METAA = "+get_binding(symbol(METAA))),DEBUG_SIMPLIFY)return console.log("METAB = "+get_binding(symbol(METAB)))}},simplifyForCodeGeneration=function(){return save(),runUserDefinedSimplifications(),codeGen=!0,simplify_main(),codeGen=!1,restore()},simplify=function(){return save(),simplify_main(),restore()},simplify_main=function(){var args,fbody;if(p1=pop(),codeGen&&car(p1)===symbol(FUNCTION)&&(fbody=cadr(p1),push(fbody),eval(),simplify(),p3=pop(),args=caddr(p1),push_symbol(FUNCTION),push(p3),push(args),list(3),p1=pop()),istensor(p1)){simplify_tensor();return}if(Find(p1,symbol(FACTORIAL))&&(push(p1),simfac(),p2=pop(),push(p1),rationalize(),simfac(),p3=pop(),count(p2)<count(p3)?p1=p2:p1=p3),f10(),DEBUG_SIMPLIFY&&console.log("f10: "+p1.toString()),f1(),DEBUG_SIMPLIFY&&console.log("f1: "+p1.toString()),f2(),DEBUG_SIMPLIFY&&console.log("f2: "+p1.toString()),f3(),DEBUG_SIMPLIFY&&console.log("f3: "+p1.toString()),f4(),DEBUG_SIMPLIFY&&console.log("f4: "+p1.toString()),f5(),DEBUG_SIMPLIFY&&console.log("f5: "+p1.toString()),f9(),DEBUG_SIMPLIFY&&console.log("f9: "+p1.toString()),simplify_polarRect(),do_simplify_nested_radicals&&simplify_nested_radicals()){DEBUG_SIMPLIFY&&console.log("de-nesting successful into: "+p1.toString()),push(p1),simplify();return}return simplify_rectToClock(),simplify_rational_expressions(),push(p1)},simplify_tensor=function(){var t,n,a,s,l;for(t=0,p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;t=0<=s?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p1.tensor.elem[t]),simplify(),p2.tensor.elem[t]=pop();return check_tensor_dimensions(p2),isZeroAtomOrTensor(p2)&&(p2=zero),push(p2)},f1=function(){if(car(p1)===symbol(ADD)&&(push(p1),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},f2=function(){if(car(p1)===symbol(ADD)&&(push(p1),Condense(),p2=pop(),count(p2)<=count(p1)))return p1=p2},f3=function(){if(push(p1),rationalize(),negate(),rationalize(),negate(),rationalize(),p2=pop(),count(p2)<count(p1))return p1=p2},f10=function(){var t,n,a,s;if(a=car(p1),cdr(p1),(a===symbol(MULTIPLY)||isinnerordot(p1))&&car(car(cdr(p1)))===symbol(TRANSPOSE)&&car(car(cdr(cdr(p1))))===symbol(TRANSPOSE)&&(DEBUG_SIMPLIFY&&console.log("maybe collecting a transpose "+p1),t=cadr(car(cdr(p1))),n=cadr(car(cdr(cdr(p1)))),a===symbol(MULTIPLY)?(push(t),push(n),multiply()):isinnerordot(p1)&&(push(n),push(t),inner()),push_integer(1),push_integer(2),s=expanding,expanding=!1,transpose(),expanding=s,p2=pop(),count(p2)<count(p1)&&(p1=p2),DEBUG_SIMPLIFY))return console.log("collecting a transpose "+p2)},f4=function(){if(!isZeroAtomOrTensor(p1)&&(push(p1),rationalize(),inverse(),rationalize(),inverse(),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},simplify_trig=function(){return save(),p1=pop(),f5(),push(p1),restore()},f5=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(p2=p1,trigmode=1,push(p2),Eval(),p3=pop(),trigmode=2,push(p2),Eval(),p4=pop(),trigmode=0,(count(p4)<count(p3)||nterms(p4)<nterms(p3))&&(p3=p4),count(p3)<count(p1)||nterms(p3)<nterms(p1)))return p1=p3},f9=function(){var t,n;if(car(p1)===symbol(ADD)){for(push_integer(0),p2=cdr(p1);iscons(p2);)push(car(p2)),simplify(),add(),t=p1,n=p2,p1=pop(),simplify_rational_expressions(),push(p1),p1=t,p2=n,p2=cdr(p2);if(p2=pop(),count(p2)<count(p1))return p1=p2}},simplify_rational_expressions=function(){var t,n,a,s;if(push(p1),denominator(),t=pop(),!isone(t)&&(push(p1),numerator(),n=pop(),!isone(n)&&(a=areunivarpolysfactoredorexpandedform(n,t))&&(push(n),push(t),gcd(),push(a),factor(),s=pop(),!isone(s)&&(push(n),push(a),factor(),push(s),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),push(t),push(a),factor(),push(s),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),divide(),Condense(),stack[tos-1].toString(),p2=pop(),count(p2)<count(p1)))))return p1=p2},simplify_rectToClock=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(push(p1),Eval(),clockform(),p2=pop(),DEBUG_SIMPLIFY&&console.log("before simplification clockform: "+p1+" after: "+p2),count(p2)<count(p1)))return p1=p2},simplify_polarRect=function(){if(push(p1),polarRectAMinusOneBase(),Eval(),p2=pop(),count(p2)<count(p1))return p1=p2},polarRectAMinusOneBase=function(){var t;if(save(),p1=pop(),isimaginaryunit(p1)){push(p1),restore();return}if(equal(car(p1),symbol(POWER))&&isminusone(cadr(p1)))push(one),negate(),push(caddr(p1)),polarRectAMinusOneBase(),power(),polar(),rect();else if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),polarRectAMinusOneBase(),p1=cdr(p1);list(tos-t)}else push(p1);restore()},nterms=function(t){return car(t)!==symbol(ADD)?1:length(t)-1},simplify_nested_radicals=function(){var t,n,a,s;return recursionLevelNestedRadicalsRemoval>0?(DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1):(push(p1),s=take_care_of_nested_radicals(),a=stack[tos-1],t=expanding,expanding=0,yycondense(),expanding=t,n=pop(),countOccurrencesOfSymbol(symbol(POWER),a)<countOccurrencesOfSymbol(symbol(POWER),n)?push(a):push(n),p1=pop(),s)},take_care_of_nested_radicals=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx,mx,vx,bx,xx,_x,Ex,Tx,Cx,Mx,Ax,Nx,Ux;if(recursionLevelNestedRadicalsRemoval>0)return DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1;if(save(),p1=pop(),equal(car(p1),symbol(POWER)))if(u=cadr(p1),tn=caddr(p1),!isminusone(tn)&&equal(car(u),symbol(ADD))&&isfraction(tn)&&(equalq(tn,1,3)||equalq(tn,1,2))){for(on=cadr(u),push(on),take_care_of_nested_radicals(),pop(),Mx=caddr(u),push(Mx),take_care_of_nested_radicals(),pop(),dx=0,ar=u;cdr(ar)!==symbol(NIL);)dx++,ar=cdr(ar);if(dx>2)return push(p1),restore(),!1;if(Ct=null,d=[],Nx=[],car(Mx)===symbol(MULTIPLY)){if(Ax=cdr(Mx),iscons(Ax))for(;iscons(Ax);)Ex=car(Ax),car(Ex)===symbol(POWER)?(Cn=cadr(Ex),In=caddr(Ex),equalq(In,1,2)&&(Ct==null?(Ct=In,d.push(Cn)):equal(In,Ct)&&d.push(Cn))):Nx.push(Ex),Ax=cdr(Ax)}else car(Mx)===symbol(POWER)&&(Cn=cadr(Mx),In=caddr(Mx),Ct==null&&equalq(In,1,2)&&(Ct=In,d.push(Cn)));if(d.length===0)return push(p1),restore(),!1;for(t=on,push_integer(1),ix=0,ax=d.length;ix<ax;ix++)dn=d[ix],push(dn),multiply();for(a=pop(),push_integer(1),gx=0,ox=Nx.length;gx<ox;gx++)dn=Nx[gx],push(dn),multiply();if(n=pop(),equalq(tn,1,3)){if(push(t),negate(),push(a),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(c),push_integer(3),push(a),multiply(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;if(push(c),push(symbol(SECRETX)),multiply(),push_integer(-3),push(t),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),pop(),push(p1),restore(),!1;push(c),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(3),power(),multiply(),add(),add(),add()}else if(equalq(tn,1,2)){if(push(a),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(c),push_integer(-2),push(t),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;push(c),push(symbol(SECRETX)),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(2),power(),multiply(),add(),add()}if(push(symbol(SECRETX)),recursionLevelNestedRadicalsRemoval++,roots(),recursionLevelNestedRadicalsRemoval--,equal(stack[tos-1],symbol(NIL)))return DEBUG_SIMPLIFY&&console.log("roots bailed out because of too much recursion"),pop(),push(p1),restore(),!1;for(_x=[],Cx=stack[tos-1].tensor.elem,fx=0,sx=Cx.length;fx<sx;fx++)en=Cx[fx],Find(en,symbol(POWER))||_x.push(en);if(pop(),_x.length===0)return push(p1),restore(),!1;for(xx=[],Tx=[],mx=0,ux=_x.length;mx<ux;mx++)dn=_x[mx],push(dn),real(),yyfloat(),xx.push(dn),Tx.push(pop().d);return Ux=Tx.indexOf(Math.max.apply(Math,Tx)),s=xx[Ux],equalq(tn,1,3)?(push(t),push(s),push_integer(3),power(),push_integer(3),push(a),multiply(),push(s),multiply(),add(),divide(),push_rational(1,3),power()):equalq(tn,1,2)&&(push(t),push(s),push_integer(2),power(),push(a),add(),divide(),push_rational(1,2),power()),hx=pop(),hx==null?(push(p1),restore(),!1):(push(hx),push(s),multiply(),equalq(tn,1,3)?(cx=pop(),push(hx),push(a),push_rational(1,2),power(),multiply(),push(cx),add(),simplify()):equalq(tn,1,2)&&(cx=pop(),push(hx),push(a),push_rational(1,2),power(),multiply(),push(cx),add(),simplify(),vx=pop(),push(vx),real(),yyfloat(),bx=pop(),isnegativenumber(bx)?(push(hx),negate(),hx=pop(),push(cx),negate(),cx=pop(),push(hx),push(a),push_rational(1,2),power(),multiply(),push(cx),add(),simplify()):push(vx)),p1=pop(),push(p1),restore(),!0)}else return push(p1),restore(),!1;else if(iscons(p1)){for(cn=tos,l=!1;iscons(p1);)push(car(p1)),l=l||take_care_of_nested_radicals(),p1=cdr(p1);return list(tos-cn),restore(),l}else return push(p1),restore(),!1},Eval_sin=function(){return push(cadr(p1)),Eval(),sine()},sine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?sine_of_angle_sum():sine_of_angle(),restore()},sine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),sine(),push(p4),cosine(),multiply(),push(p3),cosine(),push(p4),sine(),multiply(),add();return}p2=cdr(p2)}return sine_of_angle()},sine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCSIN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sin(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),sine(),negate();return}if(car(p1)===symbol(ARCTAN)){push(cadr(p1)),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power(),multiply();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(SIN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 150:return push_rational(1,2);case 210:case 330:return push_rational(-1,2);case 45:case 135:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 225:case 315:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 60:case 120:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 240:case 300:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 90:return push_integer(1);case 270:return push_integer(-1);default:return push(symbol(SIN)),push(p1),list(2)}},Eval_sinh=function(){return push(cadr(p1)),Eval(),ysinh()},ysinh=function(){return save(),yysinh(),restore()},yysinh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCSINH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sinh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(SINH),push(p1),list(2)},subst=function(){var t,n,a,s,l,u,c,d,Ct;if(save(),l=pop(),c=pop(),c===symbol(NIL)||l===symbol(NIL)){restore();return}if(t=pop(),istensor(t)){for(u=alloc_tensor(t.tensor.nelem),u.tensor.ndim=t.tensor.ndim,n=a=0,d=t.tensor.ndim;0<=d?a<d:a>d;n=0<=d?++a:--a)u.tensor.dim[n]=t.tensor.dim[n];for(n=s=0,Ct=t.tensor.nelem;0<=Ct?s<Ct:s>Ct;n=0<=Ct?++s:--s)push(t.tensor.elem[n]),push(c),push(l),subst(),u.tensor.elem[n]=pop(),check_tensor_dimensions(u);push(u)}else equal(t,c)?push(l):iscons(t)?(push(car(t)),push(c),push(l),subst(),push(cdr(t)),push(c),push(l),subst(),cons()):push(t);return restore()},Eval_sum=function(){var t,n,a,s,l,u,c,d;if(n=0,s=0,l=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),s=pop_integer(),isNaN(s)){push(p1);return}if(push(caddddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}for(p4=get_binding(a),push_integer(0),n=u=c=s,d=l;c<=d?u<=d:u>=d;n=c<=d?++u:--u)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),add();return set_binding(a,p4)},Eval_tan=function(){return push(cadr(p1)),Eval(),tangent()},tangent=function(){return save(),yytangent(),restore()},yytangent=function(){var t,n;if(n=0,t=0,p1=pop(),car(p1)===symbol(ARCTAN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tan(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),tangent(),negate();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(TAN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 210:return push_rational(1,3),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 330:return push_rational(-1,3),push_integer(3),push_rational(1,2),power(),multiply();case 45:case 225:return push_integer(1);case 135:case 315:return push_integer(-1);case 60:case 240:return push_integer(3),push_rational(1,2),power();case 120:case 300:return push_integer(3),push_rational(1,2),power(),negate();default:return push(symbol(TAN)),push(p1),list(2)}},Eval_tanh=function(){var t;if(t=0,push(cadr(p1)),Eval(),p1=pop(),car(p1)===symbol(ARCTANH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tanh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(TANH),push(p1),list(2)},Eval_taylor=function(){return p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(24):push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),taylor()},taylor=function(){var t,n,a,s;if(t=0,n=0,save(),p4=pop(),p3=pop(),p2=pop(),p1=pop(),push(p3),n=pop_integer(),isNaN(n)){push_symbol(TAYLOR),push(p1),push(p2),push(p3),push(p4),list(5),restore();return}for(push(p1),push(p2),push(p4),subst(),Eval(),push_integer(1),p5=pop(),t=a=1,s=n;(1<=s?a<=s:a>=s)&&(push(p1),push(p2),derivative(),p1=pop(),!isZeroAtomOrTensor(p1));t=1<=s?++a:--a)push(p5),push(p2),push(p4),subtract(),multiply(),p5=pop(),push(p1),push(p2),push(p4),subst(),Eval(),push(p5),multiply(),push_integer(t),factorial(),divide(),add();return restore()},Eval_tensor=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,u=0,c=0,check_tensor_dimensions(p1),c=p1.tensor.nelem,u=p1.tensor.ndim,p2=alloc_tensor(c),p2.tensor.ndim=u,a=s=0,d=u;0<=d?s<d:s>d;a=0<=d?++s:--s)p2.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p2.tensor.elem,check_tensor_dimensions(p2),a=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;a=0<=Ct?++l:--l)push(t[a]),Eval(),n[a]=pop();return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),promote_tensor()},tensor_plus_tensor=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn;if(s=0,d=0,Ct=0,save(),p2=pop(),p1=pop(),d=p1.tensor.ndim,d!==p2.tensor.ndim){push(symbol(NIL)),restore();return}for(s=l=0,ar=d;0<=ar?l<ar:l>ar;s=0<=ar?++l:--l)if(p1.tensor.dim[s]!==p2.tensor.dim[s]){push(symbol(NIL)),restore();return}for(Ct=p1.tensor.nelem,p3=alloc_tensor(Ct),p3.tensor.ndim=d,s=u=0,en=d;0<=en?u<en:u>en;s=0<=en?++u:--u)p3.tensor.dim[s]=p1.tensor.dim[s];for(t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,s=c=0,tn=Ct;0<=tn?c<tn:c>tn;s=0<=tn?++c:--c)push(t[s]),push(n[s]),add(),a[s]=pop();return push(p3),restore()},tensor_times_scalar=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,u=0,c=0,save(),p2=pop(),p1=pop(),u=p1.tensor.ndim,c=p1.tensor.nelem,p3=alloc_tensor(c),p3.tensor.ndim=u,a=s=0,d=u;0<=d?s<d:s>d;a=0<=d?++s:--s)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;a=0<=Ct?++l:--l)push(t[a]),push(p2),multiply(),n[a]=pop();return push(p3),restore()},scalar_times_tensor=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,u=0,c=0,save(),p2=pop(),p1=pop(),u=p2.tensor.ndim,c=p2.tensor.nelem,p3=alloc_tensor(c),p3.tensor.ndim=u,a=s=0,d=u;0<=d?s<d:s>d;a=0<=d?++s:--s)p3.tensor.dim[a]=p2.tensor.dim[a];for(t=p2.tensor.elem,n=p3.tensor.elem,a=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;a=0<=Ct?++l:--l)push(p1),push(t[a]),multiply(),n[a]=pop();return push(p3),restore()},check_tensor_dimensions=function(t){if(t.tensor.nelem!==t.tensor.elem.length){console.log("something wrong in tensor dimensions");debugger}},d_tensor_tensor=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on;if(s=0,l=0,Ct=0,ar=0,Ct=p1.tensor.ndim,ar=p1.tensor.nelem,Ct+1>=MAXDIM){push_symbol(DERIVATIVE),push(p1),push(p2),list(3);return}for(p3=alloc_tensor(ar*p2.tensor.nelem),p3.tensor.ndim=Ct+1,s=u=0,en=Ct;0<=en?u<en:u>en;s=0<=en?++u:--u)p3.tensor.dim[s]=p1.tensor.dim[s];for(p3.tensor.dim[Ct]=p2.tensor.dim[0],t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,s=c=0,tn=ar;0<=tn?c<tn:c>tn;s=0<=tn?++c:--c)for(l=d=0,on=p2.tensor.nelem;0<=on?d<on:d>on;l=0<=on?++d:--d)push(t[s]),push(n[l]),derivative(),a[s*p2.tensor.nelem+l]=pop();return push(p3)},d_scalar_tensor=function(){var t,n,a,s,l;for(p3=alloc_tensor(p2.tensor.nelem),p3.tensor.ndim=1,p3.tensor.dim[0]=p2.tensor.dim[0],t=p2.tensor.elem,n=p3.tensor.elem,a=s=0,l=p2.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)push(p1),push(t[a]),derivative(),n[a]=pop();return push(p3)},d_tensor_scalar=function(){var t,n,a,s,l,u,c;for(a=0,p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,a=s=0,u=p1.tensor.ndim;0<=u?s<u:s>u;a=0<=u?++s:--s)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=l=0,c=p1.tensor.nelem;0<=c?l<c:l>c;a=0<=c?++l:--l)push(t[a]),push(p2),derivative(),n[a]=pop();return push(p3)},compare_tensors=function(t,n){var a,s,l,u,c;if(a=0,t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=s=0,u=t.tensor.ndim;0<=u?s<u:s>u;a=0<=u?++s:--s){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}for(a=l=0,c=t.tensor.nelem;0<=c?l<c:l>c;a=0<=c?++l:--l)if(!equal(t.tensor.elem[a],n.tensor.elem[a]))return lessp(t.tensor.elem[a],n.tensor.elem[a])?-1:1;return 0},power_tensor=function(){var t,n,a,s,l,u,c,d;if(t=0,n=0,l=0,n=p1.tensor.ndim-1,p1.tensor.dim[0]!==p1.tensor.dim[n]){push_symbol(POWER),push(p1),push(p2),list(3);return}if(push(p2),l=pop_integer(),isNaN(l)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(l===0){for(p1.tensor.ndim!==2&&stop("power(tensor,0) with tensor rank not equal to 2"),l=p1.tensor.dim[0],p1=alloc_tensor(l*l),p1.tensor.ndim=2,p1.tensor.dim[0]=l,p1.tensor.dim[1]=l,t=a=0,u=l;0<=u?a<u:a>u;t=0<=u?++a:--a)p1.tensor.elem[l*t+t]=one;check_tensor_dimensions(p1),push(p1);return}for(l<0&&(l=-l,push(p1),inv(),p1=pop()),push(p1),d=[],t=s=1,c=l;(1<=c?s<c:s>c)&&(push(p1),inner(),!isZeroAtomOrTensor(stack[tos-1]));t=1<=c?++s:--s)d.push(void 0);return d},copy_tensor=function(){var t,n,a,s,l;for(t=0,save(),p1=pop(),p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;t=0<=s?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;t=0<=l?++a:--a)p2.tensor.elem[t]=p1.tensor.elem[t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),restore()},promote_tensor=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn;if(t=0,n=0,a=0,d=0,c=0,save(),p1=pop(),!istensor(p1)){push(p1),restore();return}for(p2=p1.tensor.elem[0],t=s=1,en=p1.tensor.nelem;1<=en?s<en:s>en;t=1<=en?++s:--s)compatible(p2,p1.tensor.elem[t])||stop("Cannot promote tensor due to inconsistent tensor components.");if(!istensor(p2)){push(p1),restore();return}for(c=p1.tensor.ndim+p2.tensor.ndim,c>MAXDIM&&stop("tensor rank > "+MAXDIM),d=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(d),p3.tensor.ndim=c,t=l=0,tn=p1.tensor.ndim;0<=tn?l<tn:l>tn;t=0<=tn?++l:--l)p3.tensor.dim[t]=p1.tensor.dim[t];for(n=u=0,on=p2.tensor.ndim;0<=on?u<on:u>on;n=0<=on?++u:--u)p3.tensor.dim[t+n]=p2.tensor.dim[n];for(a=0,t=Ct=0,cn=p1.tensor.nelem;0<=cn?Ct<cn:Ct>cn;t=0<=cn?++Ct:--Ct)for(p2=p1.tensor.elem[t],n=ar=0,dn=p2.tensor.nelem;0<=dn?ar<dn:ar>dn;n=0<=dn?++ar:--ar)p3.tensor.elem[a++]=p2.tensor.elem[n];return check_tensor_dimensions(p2),check_tensor_dimensions(p3),push(p3),restore()},compatible=function(t,n){var a,s,l;if(!istensor(t)&&!istensor(n))return 1;if(!istensor(t)||!istensor(n)||t.tensor.ndim!==n.tensor.ndim)return 0;for(a=s=0,l=t.tensor.ndim;0<=l?s<l:s>l;a=0<=l?++s:--s)if(t.tensor.dim[a]!==n.tensor.dim[a])return 0;return 1},Eval_test=function(){var t,n;for(n=p1,p1=cdr(p1);iscons(p1);){if(cdr(p1)===symbol(NIL)){push(car(p1)),Eval();return}if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(p1)),t==null){push(n);return}else if(t){push(cadr(p1)),Eval();return}else p1=cddr(p1)}return push_integer(0)},Eval_testeq=function(){var t,n,a;if(n=p1,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}if(push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}return push(n)},Eval_testge=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>=0?push_integer(1):push_integer(0)},Eval_testgt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>0?push_integer(1):push_integer(0)},Eval_testle=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<=0?push_integer(1):push_integer(0)},Eval_testlt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<0?push_integer(1):push_integer(0)},Eval_not=function(){var t,n;return n=p1,t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(n):push_integer(t?0:1)},Eval_and=function(){var t,n,a,s;for(s=p1,t=cdr(s),a=!1;iscons(t);)if(n=isZeroLikeOrNonZeroLikeOrUndetermined(car(t)),n==null)a=!0,t=cdr(t);else if(n)t=cdr(t);else if(!n){push_integer(0);return}return a?push(s):push_integer(1)},Eval_or=function(){var t,n,a,s;for(s=p1,n=cdr(s),a=!1;iscons(n);)if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(n)),t==null)a=!0,n=cdr(n);else if(t){push_integer(1);return}else t||(n=cdr(n));return a?push(s):push_integer(0)},cmp_args=function(){var t;if(t=0,push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),p1=pop(),p1.k!==NUM&&p1.k!==DOUBLE&&(push(p1),yyfloat(),Eval(),p1=pop()),isZeroAtomOrTensor(p1))return 0;switch(p1.k){case NUM:MSIGN(p1.q.a)===-1?t=-1:t=1;break;case DOUBLE:p1.d<0?t=-1:t=1;break;default:t=null}return t},transform=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax;if(In=0,save(),p1=null,p4=pop(),p3=pop(),DEBUG&&console.log("         !!!!!!!!!   transform on: "+p3),saveMetaBindings(),set_binding(symbol(METAX),p4),In=tos,push_integer(1),push(p3),push(p4),polyform(),push(p4),a=tos-2,decomp(n),en=tos-a,DEBUG)for(console.log("  "+en+" decomposed elements ====== "),l=u=0,tn=en;0<=tn?u<tn:u>tn;l=0<=tn?++u:--u)console.log("  decomposition element "+l+": "+stack[tos-1-l]);if(ix=!1,n){if(!isNumericAtom(p3))if(Cn=t,DEBUG&&console.log("applying transform: "+Cn),DEBUG&&console.log("scanning table entry "+Cn),push(Cn),push(symbol(SYMBOL_A_UNDERSCORE)),push(symbol(METAA)),subst(),push(symbol(SYMBOL_B_UNDERSCORE)),push(symbol(METAB)),subst(),push(symbol(SYMBOL_X_UNDERSCORE)),push(symbol(METAX)),subst(),p1=pop(),p5=car(p1),DEBUG&&console.log("template expression: "+p5),p6=cadr(p1),p7=cddr(p1),f_equals_a(In,n))ix=!0;else{for(DEBUG&&console.log("p3 at this point: "+p3),ax=[],DEBUG&&console.log("car(p3): "+car(p3)),on=p3,iscons(on)&&(ax.push(car(p3)),on=cdr(p3));iscons(on);)cn=car(on),on=cdr(on),DEBUG&&console.log("tos before recursive transform: "+tos),push(cn),push_symbol(NIL),DEBUG&&console.log("testing: "+cn),DEBUG&&console.log("about to try to simplify other term: "+cn),dn=transform(t,n),ix=ix||dn,ax.push(pop()),DEBUG&&console.log("tried to simplify other term: "+cn+" ...successful?: "+dn+" ...transformed: "+ax[ax.length-1]);if(ax.length!==0){for(Ct=0,c=ax.length;Ct<c;Ct++)l=ax[Ct],push(l);list(ax.length),p6=pop()}}}else for(ar=0,d=t.length;ar<d;ar++){if(s=t[ar],DEBUG&&(console.log("scanning table entry "+s),(s+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")!==-1))debugger;if(s&&(scan_meta(s),p1=pop(),p5=cadr(p1),p6=caddr(p1),p7=cdddr(p1),f_equals_a(In,n))){ix=!0;break}}return moveTos(In),ix?(push(p6),Eval(),p1=pop(),ix=!0):n?p1=p3:p1=symbol(NIL),restoreMetaBindings(),push(p1),restore(),ix},saveMetaBindings=function(){return push(get_binding(symbol(METAA))),push(get_binding(symbol(METAB))),push(get_binding(symbol(METAX)))},restoreMetaBindings=function(){return set_binding(symbol(METAX),pop()),set_binding(symbol(METAB),pop()),set_binding(symbol(METAA),pop())},f_equals_a=function(t,n){var a,s,l,u,c,d,Ct,ar,en;for(a=0,s=0,a=l=d=t,Ct=tos;d<=Ct?l<Ct:l>Ct;a=d<=Ct?++l:--l)for(set_binding(symbol(METAA),stack[a]),DEBUG&&console.log("  binding METAA to "+get_binding(symbol(METAA))),s=u=ar=t,en=tos;ar<=en?u<en:u>en;s=ar<=en?++u:--u){for(set_binding(symbol(METAB),stack[s]),DEBUG&&console.log("  binding METAB to "+get_binding(symbol(METAB))),p1=p7;iscons(p1)&&(push(car(p1)),Eval(),p2=pop(),!isZeroAtomOrTensor(p2));)p1=cdr(p1);if(!iscons(p1)&&(push(p3),DEBUG&&console.log("about to evaluate template expression: "+p5+" binding METAA to "+get_binding(symbol(METAA))+" and binding METAB to "+get_binding(symbol(METAB))+" and binding METAX to "+get_binding(symbol(METAX))),push(p5),n&&(c=expanding,expanding=!1),Eval(),n&&(expanding=c),DEBUG&&console.log("  comparing "+stack[tos-1]+" to: "+stack[tos-2]),subtract(),p1=pop(),isZeroAtomOrTensor(p1)))return DEBUG&&(console.log("binding METAA to "+get_binding(symbol(METAA))),console.log("binding METAB to "+get_binding(symbol(METAB))),console.log("binding METAX to "+get_binding(symbol(METAX))),console.log("comparing "+p3+" to: "+p5)),1}return 0},Eval_transpose=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),transpose()},transpose=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx,mx,vx,bx;for(c=0,ar=0,en=0,tn=0,cn=0,In=0,ix=0,bx=0,a=[],s=[],c=on=0,ux=MAXDIM;0<=ux?on<ux:on>ux;c=0<=ux?++on:--on)a[c]=0,s[c]=0;if(save(),p3=pop(),p2=pop(),p1=pop(),isNumericAtom(p1)){push(p1),restore();return}if((isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2))&&isidentitymatrix(p1)){push(p1),restore();return}if(istranspose(p1)&&(d=car(cdr(cdr(p1))),Ct=car(cdr(cdr(cdr(p1)))),equal(d,p3)&&equal(Ct,p2)||equal(Ct,p3)&&equal(d,p2)||equal(d,symbol(NIL))&&equal(Ct,symbol(NIL))&&(isplusone(p3)&&isplustwo(p2)||isplusone(p2)&&isplustwo(p3)))){push(car(cdr(p1))),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),add(),p1=cdr(p1);restore();return}if(expanding&&ismultiply(p1)){for(p1=cdr(p1),push(one);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),multiply(),p1=cdr(p1);restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),n=[];iscons(p1);)n.push([car(p1),p2,p3]),p1=cdr(p1);for(u=dn=cx=n.length-1;cx<=0?dn<=0:dn>=0;u=cx<=0?++dn:--dn)push(n[u][0]),push(n[u][1]),push(n[u][2]),transpose(),u!==n.length-1&&inner();restore();return}if(!istensor(p1)){if(!isZeroAtomOrTensor(p1)){push_symbol(TRANSPOSE),push(p1),(!isplusone(p2)||!isplustwo(p3))&&(!isplusone(p3)||!isplustwo(p2))?(push(p2),push(p3),list(4)):list(2),restore();return}push(zero),restore();return}if(In=p1.tensor.ndim,ix=p1.tensor.nelem,In===1){push(p1),restore();return}for(push(p2),tn=pop_integer(),push(p3),cn=pop_integer(),(tn<1||tn>In||cn<1||cn>In)&&stop("transpose: index out of range"),tn--,cn--,p2=alloc_tensor(ix),p2.tensor.ndim=In,c=Cn=0,hx=In;0<=hx?Cn<hx:Cn>hx;c=0<=hx?++Cn:--Cn)p2.tensor.dim[c]=p1.tensor.dim[c];for(p2.tensor.dim[tn]=p1.tensor.dim[cn],p2.tensor.dim[cn]=p1.tensor.dim[tn],t=p1.tensor.elem,l=p2.tensor.elem,c=ax=0,gx=In;0<=gx?ax<gx:ax>gx;c=0<=gx?++ax:--ax)a[c]=0,s[c]=p1.tensor.dim[c];for(c=ox=0,fx=ix;0<=fx?ox<fx:ox>fx;c=0<=fx?++ox:--ox){for(bx=a[tn],a[tn]=a[cn],a[cn]=bx,bx=s[tn],s[tn]=s[cn],s[cn]=bx,en=0,ar=sx=0,dx=In;0<=dx?sx<dx:sx>dx;ar=0<=dx?++sx:--sx)en=en*s[ar]+a[ar];for(bx=a[tn],a[tn]=a[cn],a[cn]=bx,bx=s[tn],s[tn]=s[cn],s[cn]=bx,l[en]=t[c],ar=vx=mx=In-1;(mx<=0?vx<=0:vx>=0)&&!(++a[ar]<s[ar]);ar=mx<=0?++vx:--vx)a[ar]=0}return push(p2),restore()},Eval_user_function=function(){var t,n;if(DEBUG&&console.log("Eval_user_function evaluating: "+car(p1)),car(p1)===symbol(SYMBOL_D)&&get_binding(symbol(SYMBOL_D))===symbol(SYMBOL_D)){Eval_derivative();return}if(push(car(p1)),Eval(),t=pop(),isNumericAtom(t)?stop("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):istensor(t)?stop("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):isstr(t)&&stop("expected function, found string instead."),p3=car(cdr(t)),p4=car(cdr(cdr(t))),p5=cdr(p1),car(t)!==symbol(FUNCTION)||t===car(p1)){for(n=tos,push(t),p1=p5;iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);list(tos-n);return}for(p1=p4,p2=p5,n=tos;iscons(p1)&&iscons(p2);)push(car(p1)),push(car(p2)),p1=cdr(p1),p2=cdr(p2);return list(tos-n),p6=pop(),push(p3),iscons(p6)&&(push(p6),rewrite_args()),Eval()},rewrite_args=function(){var t,n;if(n=0,save(),p2=pop(),p1=pop(),istensor(p1))return n=rewrite_args_tensor(),restore(),n;if(iscons(p1)){for(t=tos,car(p1)===car(p2)?(push_symbol(EVAL),push(car(cdr(p2))),list(2)):push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),n+=rewrite_args(),p1=cdr(p1);return list(tos-t),restore(),n}if(!issymbol(p1))return push(p1),restore(),0;for(p3=p2;iscons(p3);){if(p1===car(p3))return push(cadr(p3)),restore(),1;p3=cddr(p3)}return p3=get_binding(p1),push(p3),p1!==p3&&(push(p2),n=rewrite_args(),n===0&&(pop(),push(p1))),restore(),n},rewrite_args_tensor=function(){var t,n,a,s;for(a=0,t=0,push(p1),copy_tensor(),p1=pop(),t=n=0,s=p1.tensor.nelem;0<=s?n<s:n>s;t=0<=s?++n:--n)push(p1.tensor.elem[t]),push(p2),a+=rewrite_args(),p1.tensor.elem[t]=pop();return check_tensor_dimensions(p1),push(p1),a},Eval_zero=function(){var t,n,a,s,l,u,c,d;for(t=0,n=[],s=0,u=0,t=a=0,c=MAXDIM;0<=c?a<c:a>c;t=0<=c?++a:--a)n[t]=0;for(s=1,u=0,p2=cdr(p1);iscons(p2);){if(push(car(p2)),Eval(),t=pop_integer(),t<1||isNaN(t)){push(zero);return}s*=t,n[u++]=t,p2=cdr(p2)}if(u===0){push(zero);return}for(p1=alloc_tensor(s),p1.tensor.ndim=u,t=l=0,d=u;0<=d?l<d:l>d;t=0<=d?++l:--l)p1.tensor.dim[t]=n[t];return push(p1)},allocatedId=0,alloc_tensor=function(t){var n,a,s,l;for(n=0,s=new U,s.k=TENSOR,s.tensor=new tensor,s.tensor.nelem=t,n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)s.tensor.elem[n]=zero;return s.tensor.allocatedId=allocatedId,allocatedId++,check_tensor_dimensions(s),s},Find=function(t,n){var a,s,l;if(a=0,equal(t,n))return 1;if(istensor(t)){for(a=s=0,l=t.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)if(Find(t.tensor.elem[a],n))return 1;return 0}for(;iscons(t);){if(Find(car(t),n))return 1;t=cdr(t)}return 0},findPossibleClockForm=function(t){var n,a,s;if(n=0,isimaginaryunit(t))return 0;if(car(t)===symbol(POWER)&&!isinteger(caddr(p1))&&Find(cadr(t),imaginaryunit)||car(t)===symbol(POWER)&&equaln(cadr(t),-1)&&!isinteger(caddr(p1)))return 1;if(istensor(t)){for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(findPossibleClockForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleClockForm(car(t)))return 1;t=cdr(t)}return 0},findPossibleExponentialForm=function(t){var n,a,s;if(n=0,car(t)===symbol(POWER)&&cadr(t)===symbol(E))return Find(caddr(t),imaginaryunit);if(istensor(t)){for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(findPossibleExponentialForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleExponentialForm(car(t)))return 1;t=cdr(t)}return 0},$.Find=Find,init=function(){var t,n,a;if(t=0,flag=0,reset_after_error(),chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!flag){for(flag=1,t=n=0,a=NSYM;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],isSymbolReclaimable[t]=!1;return defn()}},defn_str=['version="'+version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"],defn=function(){var t,n,a,s,l;for(p0=symbol(NIL),p1=symbol(NIL),p2=symbol(NIL),p3=symbol(NIL),p4=symbol(NIL),p5=symbol(NIL),p6=symbol(NIL),p7=symbol(NIL),p8=symbol(NIL),p9=symbol(NIL),std_symbol("abs",ABS),std_symbol("add",ADD),std_symbol("adj",ADJ),std_symbol("and",AND),std_symbol("approxratio",APPROXRATIO),std_symbol("arccos",ARCCOS),std_symbol("arccosh",ARCCOSH),std_symbol("arcsin",ARCSIN),std_symbol("arcsinh",ARCSINH),std_symbol("arctan",ARCTAN),std_symbol("arctanh",ARCTANH),std_symbol("arg",ARG),std_symbol("atomize",ATOMIZE),std_symbol("besselj",BESSELJ),std_symbol("bessely",BESSELY),std_symbol("binding",BINDING),std_symbol("binomial",BINOMIAL),std_symbol("ceiling",CEILING),std_symbol("check",CHECK),std_symbol("choose",CHOOSE),std_symbol("circexp",CIRCEXP),std_symbol("clear",CLEAR),std_symbol("clearall",CLEARALL),std_symbol("clearpatterns",CLEARPATTERNS),std_symbol("clock",CLOCK),std_symbol("coeff",COEFF),std_symbol("cofactor",COFACTOR),std_symbol("condense",CONDENSE),std_symbol("conj",CONJ),std_symbol("contract",CONTRACT),std_symbol("cos",COS),std_symbol("cosh",COSH),std_symbol("decomp",DECOMP),std_symbol("defint",DEFINT),std_symbol("deg",DEGREE),std_symbol("denominator",DENOMINATOR),std_symbol("det",DET),std_symbol("derivative",DERIVATIVE),std_symbol("dim",DIM),std_symbol("dirac",DIRAC),std_symbol("divisors",DIVISORS),std_symbol("do",DO),std_symbol("dot",DOT),std_symbol("draw",DRAW),std_symbol("dsolve",DSOLVE),std_symbol("erf",ERF),std_symbol("erfc",ERFC),std_symbol("eigen",EIGEN),std_symbol("eigenval",EIGENVAL),std_symbol("eigenvec",EIGENVEC),std_symbol("eval",EVAL),std_symbol("exp",EXP),std_symbol("expand",EXPAND),std_symbol("expcos",EXPCOS),std_symbol("expsin",EXPSIN),std_symbol("factor",FACTOR),std_symbol("factorial",FACTORIAL),std_symbol("factorpoly",FACTORPOLY),std_symbol("filter",FILTER),std_symbol("float",FLOATF),std_symbol("floor",FLOOR),std_symbol("for",FOR),std_symbol("function",FUNCTION),std_symbol("Gamma",GAMMA),std_symbol("gcd",GCD),std_symbol("hermite",HERMITE),std_symbol("hilbert",HILBERT),std_symbol("imag",IMAG),std_symbol("component",INDEX),std_symbol("inner",INNER),std_symbol("integral",INTEGRAL),std_symbol("inv",INV),std_symbol("invg",INVG),std_symbol("isinteger",ISINTEGER),std_symbol("isprime",ISPRIME),std_symbol("laguerre",LAGUERRE),std_symbol("lcm",LCM),std_symbol("leading",LEADING),std_symbol("legendre",LEGENDRE),std_symbol("log",LOG),std_symbol("lookup",LOOKUP),std_symbol("mod",MOD),std_symbol("multiply",MULTIPLY),std_symbol("not",NOT),std_symbol("nroots",NROOTS),std_symbol("number",NUMBER),std_symbol("numerator",NUMERATOR),std_symbol("operator",OPERATOR),std_symbol("or",OR),std_symbol("outer",OUTER),std_symbol("pattern",PATTERN),std_symbol("patternsinfo",PATTERNSINFO),std_symbol("polar",POLAR),std_symbol("power",POWER),std_symbol("prime",PRIME),std_symbol("print",PRINT),std_symbol("print2dascii",PRINT2DASCII),std_symbol("printcomputer",PRINTFULL),std_symbol("printlatex",PRINTLATEX),std_symbol("printlist",PRINTLIST),std_symbol("printhuman",PRINTPLAIN),std_symbol("printLeaveEAlone",PRINT_LEAVE_E_ALONE),std_symbol("printLeaveXAlone",PRINT_LEAVE_X_ALONE),std_symbol("product",PRODUCT),std_symbol("quote",QUOTE),std_symbol("quotient",QUOTIENT),std_symbol("rank",RANK),std_symbol("rationalize",RATIONALIZE),std_symbol("real",REAL),std_symbol("rect",YYRECT),std_symbol("roots",ROOTS),std_symbol("round",ROUND),std_symbol("equals",SETQ),std_symbol("sgn",SGN),std_symbol("silentpattern",SILENTPATTERN),std_symbol("simplify",SIMPLIFY),std_symbol("sin",SIN),std_symbol("sinh",SINH),std_symbol("shape",SHAPE),std_symbol("sqrt",SQRT),std_symbol("stop",STOP),std_symbol("subst",SUBST),std_symbol("sum",SUM),std_symbol("symbolsinfo",SYMBOLSINFO),std_symbol("tan",TAN),std_symbol("tanh",TANH),std_symbol("taylor",TAYLOR),std_symbol("test",TEST),std_symbol("testeq",TESTEQ),std_symbol("testge",TESTGE),std_symbol("testgt",TESTGT),std_symbol("testle",TESTLE),std_symbol("testlt",TESTLT),std_symbol("transpose",TRANSPOSE),std_symbol("unit",UNIT),std_symbol("zero",ZERO),std_symbol("nil",NIL),std_symbol("autoexpand",AUTOEXPAND),std_symbol("bake",BAKE),std_symbol("assumeRealVariables",ASSUME_REAL_VARIABLES),std_symbol("last",LAST),std_symbol("lastprint",LAST_PRINT),std_symbol("last2dasciiprint",LAST_2DASCII_PRINT),std_symbol("lastfullprint",LAST_FULL_PRINT),std_symbol("lastlatexprint",LAST_LATEX_PRINT),std_symbol("lastlistprint",LAST_LIST_PRINT),std_symbol("lastplainprint",LAST_PLAIN_PRINT),std_symbol("trace",TRACE),std_symbol("forceFixedPrintout",FORCE_FIXED_PRINTOUT),std_symbol("maxFixedPrintoutDigits",MAX_FIXED_PRINTOUT_DIGITS),std_symbol("~",YYE),std_symbol("$DRAWX",DRAWX),std_symbol("$METAA",METAA),std_symbol("$METAB",METAB),std_symbol("$METAX",METAX),std_symbol("$SECRETX",SECRETX),std_symbol("version",VERSION),std_symbol("pi",PI),std_symbol("a",SYMBOL_A),std_symbol("b",SYMBOL_B),std_symbol("c",SYMBOL_C),std_symbol("d",SYMBOL_D),std_symbol("i",SYMBOL_I),std_symbol("j",SYMBOL_J),std_symbol("n",SYMBOL_N),std_symbol("r",SYMBOL_R),std_symbol("s",SYMBOL_S),std_symbol("t",SYMBOL_T),std_symbol("x",SYMBOL_X),std_symbol("y",SYMBOL_Y),std_symbol("z",SYMBOL_Z),std_symbol("I",SYMBOL_IDENTITY_MATRIX),std_symbol("a_",SYMBOL_A_UNDERSCORE),std_symbol("b_",SYMBOL_B_UNDERSCORE),std_symbol("x_",SYMBOL_X_UNDERSCORE),std_symbol("$C1",C1),std_symbol("$C2",C2),std_symbol("$C3",C3),std_symbol("$C4",C4),std_symbol("$C5",C5),std_symbol("$C6",C6),defineSomeHandyConstants(),s=codeGen,codeGen=!1,n=a=0,l=defn_str.length;0<=l?a<l:a>l;n=0<=l?++a:--a)t=defn_str[n],scan(t),DEBUG&&(console.log("... evaling "+t),console.log("top of stack:"),console.log(print_list(stack[tos-1]))),Eval(),pop();return codeGen=s},defineSomeHandyConstants=function(){return zero=new_integer(0),one=new_integer(1),push_double(1),one_as_double=pop(),push_symbol(POWER),DEBUG&&console.log(print_list(stack[tos-1])),push_integer(-1),DEBUG&&console.log(print_list(stack[tos-1])),push_rational(1,2),DEBUG&&console.log(print_list(stack[tos-1])),list(3),DEBUG&&console.log(print_list(stack[tos-1])),imaginaryunit=pop()},mcmp=function(t,n){return t.compare(n)},strcmp=function(t,n){return t===n?0:t>n?1:-1},doubleToReasonableString=function(t){var n,a;return codeGen?""+t:(isZeroAtomOrTensor(get_binding(symbol(FORCE_FIXED_PRINTOUT)))?(a=""+t,printMode===PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):a=a.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"*10^($1)"):a=a.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)")):(push(get_binding(symbol(MAX_FIXED_PRINTOUT_DIGITS))),n=pop_integer(),a=""+t.toFixed(n),a=a.replace(/(\.\d*?[1-9])0+$/gm,"$1"),a=a.replace(/\.0+$/gm,""),a.indexOf(".")===-1&&(a+=".0"),parseFloat(a)!==t&&(a=t.toFixed(n)+"...")),a)},clear_term=function(){},isspace=function(t){return t==null?!1:t===" "||t==="	"||t===`
`||t==="\v"||t==="\f"||t==="\r"},isdigit=function(t){return t==null?!1:/^\d+$/.test(t)},isalpha=function(t){return t==null?!1:t.search(/[^A-Za-z]/)===-1},isalphaOrUnderscore=function(t){return t==null?!1:t.search(/[^A-Za-z_]/)===-1},isalnumorunderscore=function(t){return t==null?!1:isalphaOrUnderscore(t)||isdigit(t)},count=function(t){var n;if(iscons(t))for(n=0;iscons(t);)n+=count(car(t))+1,t=cdr(t);else n=1;return n},countOccurrencesOfSymbol=function(t,n){var a;if(a=0,iscons(n))for(;iscons(n);)a+=countOccurrencesOfSymbol(t,car(n)),n=cdr(n);else equal(t,n)&&(a=1);return a},countsize=function(t){var n,a,s,l;if(s=0,istensor(t))for(n=a=0,l=t.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)s+=t.tensor.elem[n];else if(iscons(t))for(;iscons(t);)s+=count(car(t))+1,t=cdr(t);else s=1;return s},stop=function(t){var n;throw errorMessage+="Stop: ",errorMessage+=t,n=errorMessage,errorMessage="",moveTos(0),new Error(n)},findDependenciesInScript=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn,In,ix,ax,ox,sx,ux,cx,hx,gx,fx,dx,mx,vx,bx,xx,_x,Ex,Tx,Cx,Mx,Ax,Nx,Ux,Rx,Ox,Px,$x,Lx,zx,qx,jx,Hx,Vx,nE,Wx;for(DEBUG&&console.log("stringToBeParsed: "+t),qx=new Date().getTime(),codeGen=!0,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,dn=0,s="",a="",dx=0,d={affectsVariables:[],affectedBy:[]},$x=t;;){try{errorMessage="",check_stack(),DEBUG&&console.log("findDependenciesInScript: scanning"),dx=scan(t.substring(dn)),DEBUG&&console.log("scanned"),pop(),check_stack()}catch(tE){ar=tE,PRINTOUTRESULT&&console.log(ar),errorMessage=ar+"",reset_after_error();break}if(dx===0)break;dn+=dx}zx="",DEBUG&&console.log("all local dependencies ----------------"),zx+="All local dependencies: ";for(Cn in symbolsDependencies){for(nE=symbolsDependencies[Cn],DEBUG&&console.log("variable "+Cn+" depends on: "),d.affectsVariables.push(Cn),zx+=" variable "+Cn+" depends on: ",In=0,ix=nE.length;In<ix;In++)on=nE[In],DEBUG&&console.log("    "+on),on[0]!=="'"&&d.affectedBy.push(on),zx+=on+", ";zx+="; "}for(zx+=". ",DEBUG&&console.log("Symbols with reassignments ----------------"),zx+="Symbols with reassignments: ",fx=0,ax=symbolsHavingReassignments.length;fx<ax;fx++)Cn=symbolsHavingReassignments[fx],d.affectedBy.indexOf(Cn)===-1&&(d.affectedBy.push(Cn),zx+=Cn+", ");for(zx+=". ",DEBUG&&console.log("Symbols in expressions without assignments ----------------"),zx+="Symbols in expressions without assignments: ",mx=0,ox=symbolsInExpressionsWithoutAssignments.length;mx<ox;mx++)Cn=symbolsInExpressionsWithoutAssignments[mx],d.affectedBy.indexOf(Cn)===-1&&(d.affectedBy.push(Cn),zx+=Cn+", ");if(zx+=". ",d.affectedBy.push("PATTERN_DEPENDENCY"),patternHasBeenFound&&(d.affectsVariables.push("PATTERN_DEPENDENCY"),zx+=" - PATTERN_DEPENDENCY inserted - "),DEBUG&&console.log("All dependencies recursively ----------------"),zx+="All dependencies recursively: ",Px=["",""],tn="",Mx="",errorMessage===""&&!n){try{s="",a="",Px=run(t,!0),s="",a=""}catch(tE){ar=tE,PRINTOUTRESULT&&console.log(ar),errorMessage=ar+"",init()}if(errorMessage==="")for(Cn in symbolsDependencies){for(codeGen=!0,DEBUG&&console.log("  variable "+Cn+" is: "+get_binding(usr_symbol(Cn)).toString()),codeGen=!1,DEBUG&&console.log("  variable "+Cn+" depends on: "),zx+=" variable "+Cn+" depends on: ",Ax=[],Wx=[],u=[],recursiveDependencies(Cn,Ax,[],Wx,[],u),bx=0,sx=Wx.length;bx<sx;bx++)on=Wx[bx],DEBUG&&console.log("    --> cycle through "+on);for(Tx=0,ux=Ax.length;Tx<ux;Tx++)on=Ax[Tx],DEBUG&&console.log("    "+on),zx+=on+", ";for(zx+="; ",Cx=0,cx=u.length;Cx<cx;Cx++)on=u[Cx],zx+=" "+on+", ";for(DEBUG&&console.log("  code generation:"+Cn+" is: "+get_binding(usr_symbol(Cn)).toString()),push(get_binding(usr_symbol(Cn))),Ux=[],Rx=[],Ox=0,hx=Ax.length;Ox<hx;Ox++)Ct=Ax[Ox],Ct[0]==="'"&&(c=Ct.substring(1),_x=usr_symbol(c),vx=usr_symbol("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+c),Ux.push(_x),Rx.push(vx),push(_x),push(vx),subst(),DEBUG&&console.log("after substitution: "+stack[tos-1]));try{simplifyForCodeGeneration()}catch(tE){ar=tE,PRINTOUTRESULT&&console.log(ar),errorMessage=ar+"",init()}for(cn=Lx=0,Nx=Ux.length;0<=Nx?Lx<Nx:Lx>Nx;cn=0<=Nx?++Lx:--Lx)push(Rx[cn]),push(Ux[cn]),subst();if(clearRenamedVariablesToAvoidBindingToExternalScope(),errorMessage===""){if(jx=pop(),Vx=[],collectUserSymbols(jx,Vx),s="",a="",codeGen=!0,en=jx.toString(),codeGen=!1,xx=printMode,printMode=PRINTMODE_LATEX,l=jx.toString(),printMode=xx,Wx.indexOf(Cn)!==-1)tn+="// "+Cn+" is part of a cyclic dependency, no code generated.",Mx+="#"+Cn+" is part of a cyclic dependency, no code generated.";else if(Vx=Vx.filter(function(tE){return predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(tE+"")===-1}),Vx=Vx.filter(function(tE){return Ax.indexOf(tE+"")!==-1||Ax.indexOf("'"+tE)!==-1}),Vx.length!==0){for(Ex="(",Hx=0,gx=Vx.length;Hx<gx;Hx++)on=Vx[Hx],on.printname!==Cn&&(Ex+=on.printname+", ");Ex=Ex.replace(/, $/gm,""),Ex+=")",tn+=Cn+" = function "+Ex+" { return ( "+en+" ); }",Mx+=Cn+Ex+" = "+l}else tn+=Cn+" = "+en+";",Mx+=Cn+" = "+l;tn+=`
`,Mx+=`
`,DEBUG&&console.log("    "+tn)}}}return tn=tn.replace(/\n$/gm,""),Mx=Mx.replace(/\n$/gm,""),symbolsDependencies={},symbolsHavingReassignments=[],patternHasBeenFound=!1,symbolsInExpressionsWithoutAssignments=[],DEBUG&&console.log("testable string: "+zx),TIMING_DEBUGS&&console.log("findDependenciesInScript time for: "+$x+" : "+(new Date().getTime()-qx)+"ms"),[zx,Px[0],tn,Mx,Px[1],errorMessage,d]},recursiveDependencies=function(t,n,a,s,l,u){var c,d,Ct,ar,en,tn,on,cn;if(a.push(t),symbolsDependencies[l[l.length-1]]!=null&&symbolsDependencies[l[l.length-1]].indexOf("'"+t)!==-1)return DEBUG&&console.log("can't keep following the chain of "+t+" because it's actually a variable bound to a parameter"),n.indexOf("'"+t)===-1&&n.indexOf(t)===-1&&n.push(t),n;if(l.push(t),symbolsDependencies[t]==null)return n.indexOf(t)===-1&&n.push(t),n;for(cn=symbolsDependencies[t],ar=0,en=cn.length;ar<en;ar++)if(d=cn[ar],l.indexOf(d)!==-1){for(DEBUG&&console.log("  found cycle:"),c="",on=0,tn=l.length;on<tn;on++)Ct=l[on],s.indexOf(Ct)===-1&&s.push(Ct),DEBUG&&console.log(Ct+" --> "),c+=Ct+" --> ";DEBUG&&console.log(" ... then "+d+" again"),c+=" ... then "+d+" again",u.push(c),s.indexOf(d)===-1&&s.push(d)}else recursiveDependencies(d,n,a,s,l,u),l.pop();return n},inited=!1,latexErrorSign="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}",turnErrorMessageToLatex=function(t){return t=t.replace(/\n/g,""),t=t.replace(/_/g,"} \\_ \\text{"),t=t.replace(new RegExp(String.fromCharCode(transpose_unicode),"g"),"}{}^{T}\\text{"),t=t.replace(new RegExp(String.fromCharCode(dotprod_unicode),"g"),"}\\cdot \\text{"),t=t.replace("Stop:","}  \\quad \\text{Stop:"),t=t.replace("->","}  \\rightarrow \\text{"),t=t.replace("?","}\\enspace "+latexErrorSign+" \\enspace  \\text{"),t="$$\\text{"+t.replace(/\n/g,"")+"}$$",t},normaliseDots=function(t){return t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("\uD800","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t},TIMING_DEBUGS=!1,run=function(t,n=!1){var a,s,l,u,c,d,Ct,ar,en,tn,on;if(tn=new Date().getTime(),t=normaliseDots(t),t==="selftest"){selftest();return}for(inited||(inited=!0,init()),Ct=0,d=0,s="",a="";;){try{errorMessage="",check_stack(),Ct=scan(t.substring(d)),p1=pop(),check_stack()}catch(cn){c=cn,PRINTOUTRESULT&&console.log(c),s+=c.message,n&&(en=turnErrorMessageToLatex(c.message),a+=en),reset_after_error();break}if(Ct===0)break;d+=Ct,push(p1);try{stringsEmittedByUserPrintouts="",top_level_eval(),p2=pop(),check_stack(),isstr(p2)&&(DEBUG&&console.log(p2.str),DEBUG&&console.log(`
`)),p2===symbol(NIL)?(u=stringsEmittedByUserPrintouts,n&&(l="$$"+stringsEmittedByUserPrintouts+"$$")):(u=print_expr(p2),u+=`
`,n&&(l="$$"+collectLatexStringFromReturnValue(p2)+"$$",DEBUG&&console.log("collectedLatexResult: "+l))),s+=u,n&&(a+=l),PRINTOUTRESULT&&(DEBUG&&console.log("printline"),DEBUG&&console.log(u)),PRINTOUTRESULT&&(DEBUG&&console.log("display:"),print2dascii(p2)),n&&(a+=`
`)}catch(cn){c=cn,u=c.message,n&&(l=turnErrorMessageToLatex(c.message)),PRINTOUTRESULT&&console.log(u),s+=u,u!==""&&(s+=`
`),n&&(a+=l,a+=`
`),init()}}return s[s.length-1]===`
`&&(s=s.substring(0,s.length-1)),n&&a[a.length-1]===`
`&&(a=a.substring(0,a.length-1)),n?(DEBUG&&console.log("allReturnedLatexStrings: "+a),ar=[s,a]):ar=s,TIMING_DEBUGS&&(on="run time on: "+t+" : "+(new Date().getTime()-tn)+"ms",console.log(on)),s="",a="",ar},check_stack=function(){if(tos!==0){debugger;stop("stack error")}if(frame!==TOS){debugger;stop("frame error")}if(chainOfUserSymbolsNotFunctionsBeingEvaluated.length!==0){debugger;stop("symbols evaluation still ongoing?")}if(evaluatingAsFloats!==0){debugger;stop("numeric evaluation still ongoing?")}if(evaluatingPolar!==0){debugger;return stop("evaluation of polar still ongoing?")}},top_level_eval=function(){var t,n,a;if(DEBUG&&console.log("#### top level eval"),trigmode=0,a=symbol(AUTOEXPAND),isZeroAtomOrTensor(get_binding(a))?expanding=0:expanding=1,n=top(),Eval(),t=top(),t!==symbol(NIL)&&(set_binding(symbol(LAST),t),isZeroAtomOrTensor(get_binding(symbol(BAKE)))||(bake(),t=top()),!((n===symbol(SYMBOL_I)||n===symbol(SYMBOL_J))&&isimaginaryunit(t)))){if(isimaginaryunit(get_binding(symbol(SYMBOL_J))))return push(imaginaryunit),push_symbol(SYMBOL_J),subst();if(isimaginaryunit(get_binding(symbol(SYMBOL_I))))return push(imaginaryunit),push_symbol(SYMBOL_I),subst()}},check_esc_flag=function(){if(esc_flag)return stop("esc key")},clearAlgebraEnvironment=function(){return do_clearall()},computeDependenciesFromAlgebra=function(t){var n,a,s,l,u,c,d;if(DEBUG&&console.log("computeDependenciesFromAlgebra!!!"),a=!0,t=normaliseDots(t),!a){for(userSimplificationsInListForm=[],d="",s=0,l=userSimplificationsInListForm.length;s<l;s++)n=userSimplificationsInListForm[s],d+="silentpattern("+car(n)+","+car(cdr(n))+","+car(cdr(cdr(n)))+`)
`;do_clearall(),t=d+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}if(DEBUG){for(console.log("computeDependenciesFromAlgebra: patterns in the list --------------- "),c=0,u=userSimplificationsInListForm.length;c<u;c++)n=userSimplificationsInListForm[c],console.log(car(n)+","+cdr(n)+")");console.log("...end of list --------------- ")}return findDependenciesInScript(t,!0)[6]},computeResultsAndJavaScriptFromAlgebra=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,cn,dn,Cn;if(l=!0,dn=new Date().getTime(),TIMING_DEBUGS&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+t+" at: "+new Date),t=normaliseDots(t),on=t,DEBUG){for(console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- "),u=0,d=userSimplificationsInListForm.length;u<d;u++)s=userSimplificationsInListForm[u],console.log(car(s)+","+cdr(s)+")");console.log("...end of list --------------- ")}if(!l){for(userSimplificationsInListForm=[],Cn="",ar=0,Ct=userSimplificationsInListForm.length;ar<Ct;ar++)s=userSimplificationsInListForm[ar],Cn+="silentpattern("+car(s)+","+car(cdr(s))+","+car(cdr(cdr(s)))+`)
`;do_clearall(),t=Cn+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}return[cn,tn,n,en,c,errorMessage,a]=findDependenciesInScript(t),(en!==""||errorMessage!=="")&&(tn+=`
`+en,errorMessage!==""&&(tn+=`
`+errorMessage),tn=tn.replace(/\n/g,`

`),c+=`
$$`+en+"$$",errorMessage!==""&&(c+=turnErrorMessageToLatex(errorMessage)),c=c.replace(/\n/g,`

`)),c=c.replace(/\n*/,""),c=c.replace(/\$\$\$\$\n*/g,""),n=n.replace(/Math\./g,""),n=n.replace(/\n/g,`

`),TIMING_DEBUGS&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+on+" : "+(new Date().getTime()-dn)+"ms"),{code:n,result:c,latexResult:c,dependencyInfo:a}},(exports!==null?exports:this).run=run,(exports!==null?exports:this).findDependenciesInScript=findDependenciesInScript,(exports!==null?exports:this).computeDependenciesFromAlgebra=computeDependenciesFromAlgebra,(exports!==null?exports:this).computeResultsAndJavaScriptFromAlgebra=computeResultsAndJavaScriptFromAlgebra,(exports!==null?exports:this).clearAlgebraEnvironment=clearAlgebraEnvironment,tos=0,nil_symbols=0,push=function(t){if(t==null)debugger;if(t.isZero!=null)debugger;return t===symbol(NIL)&&(nil_symbols++,DEBUG&&console.log("pushing symbol(NIL) #"+nil_symbols)),tos>=frame&&stop("stack overflow"),stack[tos++]=t},moveTos=function(t){if(tos<=t){tos=t;return}for(;tos>t;)stack[tos]=null,tos--},top=function(){return stack[tos-1]},pop=function(){var t;if(tos===0){debugger;stop("stack underflow")}if(stack[tos-1]==null)debugger;return t=stack[--tos],stack[tos]=null,t},push_frame=function(t){var n,a,s,l;if(n=0,frame-=t,frame<tos){debugger;stop("frame overflow, circular reference?")}for(l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(stack[frame+n]=symbol(NIL));return l},pop_frame=function(t){if(frame+=t,frame>TOS)return stop("frame underflow")},save=function(){if(frame-=10,frame<tos){debugger;stop("frame overflow, circular reference?")}return stack[frame+0]=p0,stack[frame+1]=p1,stack[frame+2]=p2,stack[frame+3]=p3,stack[frame+4]=p4,stack[frame+5]=p5,stack[frame+6]=p6,stack[frame+7]=p7,stack[frame+8]=p8,stack[frame+9]=p9},restore=function(){return frame>TOS-10&&stop("frame underflow"),p0=stack[frame+0],p1=stack[frame+1],p2=stack[frame+2],p3=stack[frame+3],p4=stack[frame+4],p5=stack[frame+5],p6=stack[frame+6],p7=stack[frame+7],p8=stack[frame+8],p9=stack[frame+9],frame+=10},swap=function(){var t,n;return t=pop(),n=pop(),push(t),push(n)},dupl=function(){var t;return t=pop(),push(t),push(t)},$.dupl=dupl,$.swap=swap,$.restore=restore,$.save=save,$.push=push,$.pop=pop,Eval_symbolsinfo=function(){var t;return t=symbolsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},symbolsinfo=function(){var t,n,a,s,l,u,c;for(u="",n=a=s=NIL+1,l=symtab.length;s<=l?a<l:a>l;n=s<=l?++a:--a){if(symtab[n].printname===""){if(isSymbolReclaimable[n]===!1)break;continue}c=symtab[n]+"",t=(binding[n]+"").substring(0,4),u+="symbol: "+c+" size: "+countsize(binding[n])+" value: "+t+`...
`}return u},std_symbol=function(t,n,a){var s;if(s=symtab[n],s==null)debugger;return s.printname=t,a!=null?s.latexPrint=a:s.latexPrint=t},usr_symbol=function(t){var n,a,s;for(n=0,n=a=0,s=NSYM;0<=s?a<s:a>s;n=0<=s?++a:--a){if(t===symtab[n].printname)return symtab[n];if(symtab[n].printname==="")break}return n===NSYM&&stop("symbol table overflow"),symtab[n]=new U,symtab[n].k=SYM,symtab[n].printname=t,binding[n]=symtab[n],isSymbolReclaimable[n]=!1,symtab[n]},get_printname=function(t){return t.k!==SYM&&stop("symbol error"),t.printname},set_binding=function(t,n){var a;if(t.k!==SYM&&stop("symbol error"),a=symtab.indexOf(t),symtab.indexOf(t,a+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> set_binding lookup "+a),isSymbolReclaimable[a]=!1,binding[a]=n},get_binding=function(t){var n;if(t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> get_binding lookup "+n),binding[n]},is_usr_symbol=function(t){var n;return t.k!==SYM?!1:(n=symnum(t),n>PI&&n!==SYMBOL_I&&n!==SYMBOL_IDENTITY_MATRIX)},lookupsTotal=0,symnum=function(t){var n;if(lookupsTotal++,t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> symnum lookup "+n+" lookup # "+lookupsTotal),n},push_symbol=function(t){return push(symtab[t])},clear_symbols=function(){var t,n,a,s,l;for(l=[],t=n=a=NIL+1,s=NSYM;a<=s?n<s:n>s;t=a<=s?++n:--n){if(symtab[t].printname===""){if(isSymbolReclaimable[t]===!1)break;continue}symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],l.push(isSymbolReclaimable[t]=!1)}return l},collectUserSymbols=function(t,n=[]){var a,s,l;if(is_usr_symbol(t)&&n.indexOf(t)===-1){n.push(t);return}if(istensor(t)){for(a=s=0,l=t.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)collectUserSymbols(t.tensor.elem[a],n);return}for(;iscons(t);)collectUserSymbols(car(t),n),t=cdr(t)},$.get_binding=get_binding,$.set_binding=set_binding,$.usr_symbol=usr_symbol,$.symbolsinfo=symbolsinfo,$.collectUserSymbols=collectUserSymbols,inited||(inited=!0,init()),$.init=init,parse_internal=function(t){return typeof t=="string"?scan(t):typeof t=="number"?t%1===0?push_integer(t):push_double(t):t instanceof U?push(t):(console.warn("unknown argument type",t),push(symbol(NIL)))},parse=function(t){var n,a;try{parse_internal(t),n=pop(),check_stack()}catch(s){throw a=s,reset_after_error(),a}return n},exec=function(t,...n){var a,s,l,u,c,d;for(l=get_binding(usr_symbol(t)),check_stack(),push(l),u=0,c=n.length;u<c;u++)a=n[u],parse_internal(a);list(1+n.length),p1=pop(),push(p1);try{top_level_eval(),d=pop(),check_stack()}catch(Ct){throw s=Ct,reset_after_error(),s}return d},$.exec=exec,$.parse=parse,(function(){var t,n,a,s,l;for(t=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"],l=[],a=0,s=t.length;a<s;a++)n=t[a],l.push($[n]=exec.bind(this,n));return l})()}).call(algebrite)})(algebrite)),algebrite}var algebriteExports=requireAlgebrite();function nthRoot(t,n){if(typeof t!="bigint"||typeof n!="number"||Math.floor(n)!==n||n<1||n>Number.MAX_SAFE_INTEGER)throw new RangeError;if(n===1)return t;const a=Number(t+0n);if(a===0)return 0n;if(a<0){if(n%2===0)throw new RangeError;return-BigInt(nthRoot(-t,n))}const s=Number.MAX_SAFE_INTEGER+1,l=Math.floor(s/(n===2?2:Math.pow(2,1+Math.ceil(Math.log2(Math.log2(s))))));if(a<l){const en=Math.floor(n===2?Math.sqrt(a+.5):Math.exp(Math.log(a+.5)/n));return BigInt(en)}const u=n===2?Math.sqrt(a):Math.exp(Math.log(a)/n);if(u<l){if(Math.floor(u-u/l)===Math.floor(u+u/l))return BigInt(Math.floor(u));const en=BigInt(Math.floor(u+.5));return t<en**BigInt(n)?en-1n:en}const c=t.toString(16).length*4;if(c<=n)return 1n;const d=Math.floor((Math.floor(c/n)+1)/2);let Ct=BigInt(nthRoot(t>>BigInt(d*n),n))+1n<<BigInt(d),ar=-1n;do ar=Ct,n===2?Ct=Ct+t/Ct>>1n:Ct=(BigInt(n-1)*Ct+t/Ct**BigInt(n-1))/BigInt(n);while(Ct<ar);return ar}function BitSet(t){const n=Math.ceil(t/256)*8;this.data=new Uint32Array(n),this.data64=new BigUint64Array(this.data.buffer),this.size=t}BitSet.prototype.nextSetBit=function(t){if((t|0)>=(this.size|0))return-1;const n=this.data;let a=t>>5,s=t&31;for(;n[a]>>s===0;){if(a+=1,a===n.length)return-1;s=0}return s+=31-Math.clz32(n[a]>>s&-(n[a]>>s)),a*32+s};BitSet.prototype.toggle=function(t){if((t|0)>=(this.size|0))throw new RangeError;this.data[t>>5]^=1<<(t&31)};BitSet.prototype.xor=function(t){const n=this.data64,a=t.data64,s=n.length|0;if(s!==a.length||s%2!==0)throw new RangeError;for(let l=0;l<s;l+=2)n[l+0]^=a[l+0],n[l+1]^=a[l+1]};BitSet.prototype.clear=function(){for(let t=0;t<this.data.length;t+=1)this.data[t]=0};BitSet.prototype.toString=function(){return this.data.map(t=>(t>>>0).toString(2).padStart(32,"0").split("").reverse().join("")).join("").slice(0,this.size)};function solve(t,n=!1){const a=new Array(t).fill(null),s=new Array(t).fill(void 0);let l=null,u=1;const c={next:function(Ct){for(;;){if(u===1)return u=0,{value:l,done:!1};u=1;const ar=Ct[0],en=Ct[1];let tn=null;if(n)tn=ar;else{tn=new BitSet(t);for(let on=0;on<ar.length;on++){const cn=ar[on],dn=t-1-cn;tn.toggle(dn)}}for(let on=tn.nextSetBit(0);on!==-1&&tn!=null;on=tn==null?-1:tn.nextSetBit(on+1)){const cn=a[on];cn!=null?(tn.xor(cn),tn.toggle(on)):(s[on]=en,a[on]=tn,tn=null)}if(tn!=null){const on=[];for(let cn=tn.nextSetBit(0);cn!==-1;cn=tn.nextSetBit(cn+1))on.push(s[cn]);on.push(en),l=on}else l=null}}};return c[globalThis.Symbol.iterator]=function(){return this},c}function SparseGF2Matrix(t,n){this.rows=new Array(t).fill(null),this.columns=new Array(n).fill(null).map(a=>[])}SparseGF2Matrix.prototype.addRow=function(t,n){function a(l){const u=l.slice(0);u.sort((d,Ct)=>d-Ct);let c=-1;for(let d=0;d<u.length;d++)d===0||u[c]!==u[d]?(c+=1,u[c]=u[d]):c-=1;return u.slice(0,c+1)}const s=a(t);this.rows[n]=s;for(let l=0;l<s.length;l++)this.columns[s[l]].push(n)};SparseGF2Matrix.prototype.deleteColumn=function(t){const n=this.columns[t];if(n!=null){for(let a=0;a<n.length;a++){let s=n[a];const l=this.rows[s].indexOf(t);console.assert(l!==-1),this.rows[s].splice(l,1)}this.columns[t]=null}};SparseGF2Matrix.prototype.deleteRow=function(t){const n=this.rows[t];if(n!=null){for(let a=0;a<n.length;a++){const s=n[a];this.columns[s]=this.columns[s].filter(l=>l!=t)}this.rows[t]=null}};SparseGF2Matrix.prototype.reduce=function(t,n){const a=this.rows[t];console.assert(a.length===1);const s=a[0],l=this.columns[s];for(let u=l.length-1;u>=0;u--)if(l[u]!==t){const c=l[u],d=this.rows[c],Ct=d.indexOf(s);console.assert(Ct!==-1),d.splice(Ct,1),l.splice(u,1),n.push({a:c,b:t})}console.assert(l.length===1&&l[0]===t),this.columns[s]=null,this.rows[t]=null};function sparseSolve(t){if(t<1024*2)return solve(t);function n(cn,dn){return cn.sort((Cn,In)=>Cn-In),cn[Math.max(cn.length-dn,0)]}function a(cn,dn){const Cn=cn.columns.map(ix=>ix==null?0:ix.length),In=n(Cn,dn);for(let ix=0;ix<cn.columns.length;ix++){const ax=cn.columns[ix];ax!=null&&ax.length>=In&&cn.deleteColumn(ix)}}function s(cn,dn){const Cn=[];for(let In=0;In<cn.rows.length;In++){const ix=cn.rows[In];ix!=null&&ix.length===1&&Cn.push(In)}for(let In=0;In<Cn.length;In++){const ix=Cn[In],ax=cn.rows[ix];ax!=null&&ax.length===1?(cn.reduce(ix,c),dn[ax[0]]=!0):console.assert(ax!=null&&ax.length===0)}return Cn.length}const l=[],u=[],c=[];let d=null,Ct=null,ar=-1;function en(){const dn=new SparseGF2Matrix(l.length,t);for(let fx=0;fx<l.length;fx++)dn.addRow(l[fx].filter(dx=>dx>=2585),fx);const Cn=new Array(t).fill(!1),In=128;let ix=-1;do{ix=dn.columns.reduce((dx,mx)=>dx+(mx==null?0:1),0);const fx=Math.ceil(dn.rows.length/In)-s(dn,Cn);fx>0&&a(dn,fx)}while(ix>0);const ax=new Array(t).fill(0);let ox=0;for(let fx=0;fx<dn.columns.length;fx++)Cn[fx]?ax[fx]=-1:(ax[fx]=ox,ox+=1);const sx=ox,ux=[];function cx(fx){let dx=null;ux.length>0?(dx=ux.pop(),dx.clear()):dx=new BitSet(sx);for(let mx=0;mx<fx.length;mx++){const vx=ax[fx[mx]];vx!==-1&&dx.toggle(sx-1-vx)}return dx}d=l.map(fx=>null);const hx=dn.rows.map(fx=>fx!=null?1/0:-1);for(let fx=c.length-1;fx>=0;fx-=1)hx[c[fx].a]!==-1?hx[c[fx].b]===-1&&(hx[c[fx].b]=fx):c[fx]=null;const gx=function(fx,dx){return d[fx]==null&&(console.assert(hx[fx]>=dx),d[fx]=cx(l[fx])),d[fx]};for(let fx=0;fx<c.length;fx++)c[fx]!=null&&(gx(c[fx].a,fx).xor(gx(c[fx].b,fx)),hx[c[fx].b]<=fx&&(ux.push(d[c[fx].b]),d[c[fx].b]=null));for(let fx=0;fx<dn.rows.length;fx++)dn.rows[fx]!=null?(console.assert(dn.rows[fx].length===0),d[fx]=gx(fx,1/0)):d[fx]=null;Ct=solve(sx,!0),Ct.next()}let tn=!0;const on={next:function(dn){if(tn)return tn=!1,{value:null,done:!1};if(Ct==null){if(l.length<t+32)return l.push(dn[0]),u.push(dn[1]),{value:null,done:!1};en()}for(let Cn=ar+1;Cn<d.length;Cn++){ar=Cn;const In=d[Cn];if(In!=null){const ix=Ct.next([In,Cn]).value;if(ix!=null){const ax=new Array(l.length).fill(0);for(let sx=0;sx<ix.length;sx++){if(ax[ix[sx]]!==0)throw new RangeError;ax[ix[sx]]=1}for(let sx=c.length-1;sx>=0;sx--)c[sx]!=null&&ax[c[sx].a]===1&&(ax[c[sx].b]=1-ax[c[sx].b]);const ox=[];for(let sx=0;sx<ax.length;sx++)ax[sx]===1&&ox.push(u[sx]);return{value:ox,done:!1}}}}}};return on[globalThis.Symbol.iterator]=function(){return this},on}solve.solve=solve;solve.sparseSolve=sparseSolve;sparseSolve.solve=solve;sparseSolve.sparseSolve=sparseSolve;function modPowSmall$1(t,n,a){let s=1;for(;n!==0;)n%2===0?(n/=2,t=t*t,t=t-Math.floor(t/a)*a):(n-=1,s=s*t,s=s-Math.floor(s/a)*a);return s}function legendre$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,s=0;t!==0;){for(;(t&1)===0;)t>>=1,s=n&7,(s===3||s===5)&&(a=-a);s=n,n=t,t=s,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function sqrtMod(t,n){if(console.assert(n*n<=Number.MAX_SAFE_INTEGER),legendre$1(t,n)!==1)return-1;let a=n-1,s=0;for(;a%2===0;)a/=2,s+=1;if(s===1)return modPowSmall$1(t,(n+1)/4,n);let l=2;for(;l<=n&&legendre$1(l,n)!==-1;)l+=1;let u=modPowSmall$1(l,a,n),c=modPowSmall$1(t,(a+1)/2,n),d=modPowSmall$1(t,a,n),Ct=s,ar=0;for(;(d-1)%n!==0;){ar=d*d%n;let en=1;for(;en<=Ct&&(ar-1)%n!==0;)ar=ar*ar%n,en+=1;const tn=modPowSmall$1(u,1<<Ct-en-1,n);c=c*tn%n,u=tn*tn%n,d=d*u%n,Ct=en}return c}const wasmCode$2=new Uint8Array([0,97,115,109,1,0,0,0,1,28,4,96,2,126,126,1,126,96,4,126,126,126,126,1,126,96,3,126,126,127,1,126,96,2,126,127,1,126,3,5,4,0,1,2,3,7,29,2,9,103,99,100,66,105,110,97,114,121,0,0,13,80,111,108,108,97,114,100,115,82,104,111,54,52,0,3,10,246,6,4,98,2,2,126,1,127,32,0,80,4,64,32,1,15,11,32,1,80,4,64,32,0,15,11,32,0,32,1,132,122,33,3,32,0,32,0,122,136,33,0,32,1,32,1,122,136,33,1,3,64,32,1,32,0,125,32,0,32,1,125,32,0,32,1,84,34,4,27,33,2,32,0,32,1,32,4,27,33,1,32,2,32,2,122,136,34,0,66,0,82,13,0,11,32,1,32,3,134,11,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,160,4,2,8,126,5,127,32,0,33,4,65,2,33,13,3,64,32,13,65,192,0,72,4,64,32,4,66,2,32,0,32,4,126,125,126,33,4,32,13,32,13,106,33,13,12,1,11,11,32,4,33,6,66,2,33,7,66,127,32,0,130,66,1,124,33,4,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,4,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,4,32,0,32,4,125,34,8,125,32,0,66,0,32,4,32,8,84,27,124,33,4,32,7,66,1,136,33,7,12,1,11,11,66,127,32,0,130,66,1,124,33,7,3,64,32,1,66,0,82,4,64,32,1,66,1,131,167,4,64,32,5,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,5,86,27,124,33,5,11,32,7,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,7,86,27,124,33,7,32,1,66,1,136,33,1,12,1,11,11,65,1,33,13,66,1,33,4,32,3,33,1,3,64,32,2,32,11,79,4,64,32,1,33,7,3,64,32,1,32,1,32,0,32,6,16,1,34,1,32,0,32,5,125,34,8,125,32,0,66,0,32,1,32,8,84,27,124,33,1,32,11,65,1,106,34,11,32,13,65,3,108,65,2,118,77,4,126,66,1,33,4,32,11,33,12,32,1,5,32,7,32,1,125,32,1,32,7,125,32,1,32,7,84,27,33,8,32,4,66,1,81,4,126,32,8,5,32,4,32,8,32,0,32,6,16,1,11,33,4,32,11,65,255,0,113,69,32,11,32,13,70,114,32,14,114,4,126,2,126,32,0,32,4,80,13,0,26,32,4,32,0,80,13,0,26,32,0,32,4,132,122,33,9,32,4,32,4,122,136,33,8,32,0,32,0,122,136,33,4,3,64,32,4,32,8,125,32,8,32,4,125,32,4,32,8,86,34,15,27,33,10,32,8,32,4,32,15,27,33,4,32,10,32,10,122,136,34,8,66,0,82,13,0,11,32,4,32,9,134,11,34,4,66,1,82,4,64,32,0,32,4,82,4,64,32,4,15,11,32,14,4,64,32,0,15,11,65,1,33,14,32,12,33,11,32,3,33,1,11,66,1,33,4,32,11,33,12,32,1,5,32,3,11,11,33,3,32,11,32,13,71,13,0,11,32,13,65,1,116,33,13,12,1,11,11,66,0,11,63,1,2,126,32,0,66,2,88,4,64,66,0,15,11,32,0,66,1,131,80,4,64,66,2,15,11,3,64,32,2,66,1,124,34,2,66,42,86,4,64,66,0,15,11,32,0,32,2,32,1,16,2,34,3,32,0,81,13,0,11,32,3,11]),wasmModule$2=new WebAssembly.Module(wasmCode$2),exports$1=new WebAssembly.Instance(wasmModule$2).exports,PollardsRho64=exports$1.PollardsRho64,wasmCode$1=new Uint8Array([0,97,115,109,1,0,0,0,1,14,2,96,4,126,126,126,126,1,126,96,1,126,1,127,3,3,2,0,1,7,21,1,17,105,115,80,114,111,98,97,98,108,121,80,114,105,109,101,54,52,0,1,10,160,5,2,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,237,3,2,10,126,2,127,32,0,66,2,84,4,64,65,0,15,11,32,0,66,1,131,80,4,64,32,0,66,2,81,15,11,32,0,66,1,125,34,5,122,33,10,32,5,32,10,136,33,9,32,0,33,5,65,2,33,11,3,64,32,11,65,192,0,72,4,64,32,5,66,2,32,0,32,5,126,125,126,33,5,32,11,32,11,106,33,11,12,1,11,11,66,1,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,2,32,0,32,6,125,34,8,125,32,0,66,0,32,2,32,8,84,27,124,33,2,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,2,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,6,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,1,33,8,66,127,32,0,130,66,1,124,33,7,32,0,33,6,3,64,32,8,66,0,82,4,64,32,8,66,1,131,167,4,64,32,1,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,1,86,27,124,33,1,11,32,7,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,7,86,27,124,33,7,32,8,66,1,136,33,8,12,1,11,11,32,1,33,0,3,64,32,9,66,0,82,4,64,32,9,66,1,131,167,4,64,32,0,32,3,32,6,32,5,16,0,33,0,11,32,9,66,1,136,33,9,32,3,32,3,32,6,32,5,16,0,33,3,12,1,11,11,3,64,32,12,172,32,10,83,4,64,32,0,32,0,32,6,32,5,16,0,34,4,32,2,81,32,0,32,2,82,113,32,0,32,6,32,2,125,82,113,4,64,65,0,15,11,32,4,33,0,32,12,65,1,106,33,12,12,1,11,11,32,2,32,4,82,4,64,65,0,15,11,65,1,11]),wasmModule$1=new WebAssembly.Module(wasmCode$1),exports=new WebAssembly.Instance(wasmModule$1).exports,isProbablyPrime64=exports.isProbablyPrime64;function modInverse$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(Number(n)<=2**30-1)return BigInt(modInverseSmall$1(Number(t),Number(n)));if(t<0n||t>=n||n<=0n)throw new RangeError;let a=t,s=n,l=1n,u=0n;for(;s!==0n;){const c=(a-a%s)/s,d=a-c*s;a=s,s=d;const Ct=l-c*u;l=u,u=Ct}return a!==1n?0n:l<0n?l+n:l}function modInverseSmall$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;const a=1073741823;if(t<0||t>=n||n<=0||n>a)throw new RangeError;let s=t&a,l=n&a,u=1,c=0;for(;l!==0;){const d=Math.floor(s/l),Ct=s%l;s=l,l=Ct;const ar=u-d*c;u=c,c=ar}return s!==1?0:u<0?u+n:u}function ChineseRemainderTheorem$1(t,n,a,s){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint"||typeof s!="bigint")throw new TypeError;const l=modInverse$1(a%s,s);return t+(n-t)*l%s*a}function squareRootsModuloOddPrimesProduct(t,n,a=1){let s=[];s.push(0n);let l=1n;for(let u=0;u<n.length;u+=1){const c=BigInt(Math.pow(n[u],a));if(Number(c)>Number.MAX_SAFE_INTEGER)throw new RangeError;const d=BigInt(squareRootModuloOddPrime(Number(t%c),n[u],a)),Ct=[];for(let ar=0;ar<s.length;ar+=1){const en=s[ar];Ct.push(ChineseRemainderTheorem$1(en,d,l,c)),Ct.push(ChineseRemainderTheorem$1(en,-d,l,c))}l*=c,s=Ct}return s}function squareRootsModuloTwo(t,n=1){if(n>=3){if(t%8===1){const a=Math.pow(2,n),s=+squareRootsModuloTwo(t,n-1)[0],l=a/4-s,u=s*s%a!==t%a?l:s;return[u,a/2-u,a/2+u,a-u]}return[]}return n>=2?t%4===1?[1,3]:[]:n>=1?[1]:[]}function squareRootModuloOddPrime(t,n,a=1){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;const s=Math.pow(n,a);if(!(t>0&&t<s&&n>0&&n%2!==0&&a>=1&&+t%+n!==0&&s<Math.floor(Math.sqrt(Number.MAX_SAFE_INTEGER*4))))throw new RangeError;if(a>1){const u=squareRootModuloOddPrime(t%Math.pow(n,a-1),n,a-1);let c=modInverseSmall$1(2*u,s)%s,d=(t-u*u)%s;c=c>s/2?c-s:c,d=d>s/2?d-s:d;let Ct=u+d*c%s;return Ct>=s&&(Ct-=s),Ct<0&&(Ct+=s),Math.min(Ct,s-Ct)}const l=sqrtMod(t,n)|0;return Math.min(l,n-l)}function bitLength$2(t){return t.toString(16).length*4}function sqrt(t){if(t<BigInt((Number.MAX_SAFE_INTEGER+1)/2))return BigInt(Math.floor(Math.sqrt(Number(BigInt(t))+.5)));const n=BigInt(bitLength$2(t)>>2);let s=sqrt(t>>n*2n)+1n<<n,l=s+1n;for(;s<l;)l=s,s=l+t/l>>1n;return l}function getSmoothFactorization(t,n){let a=BigInt(t);if(a===0n)return[0];const s=[];a<0n&&(s.push(-1),a=-a);let l=0;for(;l<n.length;){const u=n[l];for(;a%BigInt(u)===0n;)a/=BigInt(u),s.push(u);l+=1}return a===1n?s:null}function CongruenceOfsquareOfXminusYmoduloN(t,n,a){this.X=t,this.Y=n,this.N=a}CongruenceOfsquareOfXminusYmoduloN.prototype.toString=function(){return"X**2  Y (mod N)".replaceAll("X",this.X).replaceAll("N",this.N).replaceAll("Y",this.Y.join(" * "))};function isQuadraticResidueModuloPrime(t,n){if(typeof t!="bigint"||typeof n!="number")throw new TypeError;if(n===2)return!0;const a=Number(BigInt(t)%BigInt(n));return a===0?!0:legendre(a,n)===1}function significand(t){const n=Number(t);if(Math.abs(n)<1/0)return n/2**Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),s=Number(t>>BigInt(a));return s/2**Math.floor(Math.log2(Math.abs(s)))}function exponent(t){const n=Number(t);if(Math.abs(n)<1/0)return Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),s=Number(t>>BigInt(a));return a+Math.floor(Math.log2(Math.abs(s)))}function log2$1(t){return Math.log2(significand(t))+exponent(t)}function L$1(t){const n=log2$1(t)*Math.log(2);return Math.exp(Math.sqrt(n*Math.log(n)))}function modPow$2(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;let s=n,l=t,u=1n;for(;s!==0n;)BigInt.asUintN(1,s)===1n&&(s-=1n,u=u*l%a),s>>=1n,l=l*l%a;return u}function primes$1(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let s=3;s<=t;s+=2)if(n[s]&&(a.push(s),s<=Math.floor(t/s)))for(let l=s*s;l<=t;l+=2*s)n[l]=!1;return a}//!copy-paste
function FastModBigInt(t){const n=[];for(;t!==0n;){const a=Number(BigInt.asUintN(51,t));n.push(a),t>>=51n}return new Float64Array(n)}function FastMod(t,n,a){n=-0+n,a=-0+a;const s=t.length-1;let l=t[s];if(l=l-Math.floor(l*a)*n,s>0){const u=0x8000000000000-Math.floor(0x8000000000000*a)*n;let c=s;do c-=1,l=l*u+t[c],l=l-Math.floor(l*a)*n;while(c!==0)}return-0+l}function exp2(t){let n=Math.floor(Math.pow(2,Math.floor(t))*Math.exp(Math.LN2*(t-Math.floor(t))));return n%2===0&&(n+=1),n}function QuadraticPolynomial(t,n,a,s,l){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const u=n*n-a;if(l&&a%4n!==1n)throw new RangeError;if(u%((l?4n:1n)*t)!==0n)throw new TypeError;const c=u/(l?4n*t:t);this.A=t,this.B=n,this.C=c,this.AFactors=s;const d=significand(n)/significand(t)*Math.pow(2,exponent(n)-exponent(t)),Ct=Math.sqrt(significand(a)/Math.pow(significand(t),2))*Math.pow(2,exponent(a)/2-exponent(t));this.x1=(l?1/2:1)*(-d-Ct),this.x2=(l?1/2:1)*(-d+Ct),this.log2a=log2$1(t),this.useQ2Form=l}QuadraticPolynomial.generator=function(t,n,a){const s=function(ax,ox){return ax.length===0?[]:ox===0?[[]]:ox===1?ax.map(sx=>[sx]):s(ax.slice(1),ox-1).map(sx=>[ax[0]].concat(sx)).concat(s(ax.slice(1),ox))},l=function(ax,ox){return Math.round(Math.pow(significand(ax),1/ox)*Math.pow(2,exponent(ax)/ox))},u=function(ax,ox){return ax<ox?ox:ax},c=a%8n===1n,d=u(1n,c?BigInt(sqrt(a/2n))/BigInt(t):BigInt(sqrt(2n*a))/BigInt(t)),Ct=log2$1(d),ar=Math.log2(n[n.length-1]),en=2,tn=Math.max(en,Math.ceil(Ct/Math.min(Ct<180?14.5:ar,ar)/en)*en);console.debug("k: ",tn,"useQ2Form: ",c);const on=l(d,tn);let cn=0;const dn=function(){let ax=0;do if(ax=on-on%2+1+(cn%2===0?cn:-1-cn),cn+=1,on+cn>n[n.length-1]&&on-cn<n[0])throw new RangeError;while(indexOf$1(n,ax)===-1);return ax};let Cn=[];const In=[],ix=[];return QuadraticSieveFactorization.polynomialsCounter=0,{next:function(){for(;In.length===0;){for(;Cn.length===0;){const fx=[];for(let dx=0;dx<en;dx+=1)fx.push(dn());console.assert(tn%en===0),Cn=s(ix,tn/en-1).map(dx=>[fx].concat(dx)),ix.push(fx)}const ox=Cn.pop().reduce((fx,dx)=>fx.concat(dx),[]),sx=BigInt(ox.reduce((fx,dx)=>fx*BigInt(dx),1n));if(modInverse$1(sx%a,a)===0n)return this.next();const cx=sx;let hx=squareRootsModuloOddPrimesProduct(a,ox,1);for(let fx=0;fx<hx.length;fx+=1)if(hx[fx]=hx[fx]<0n?hx[fx]+cx:hx[fx],hx[fx]<0n||hx[fx]>=cx)throw new Error;c&&(hx=hx.map(fx=>fx%2n===0n?fx-cx:fx)),hx=hx.slice(0,hx.length/2);const gx=c?[2,2].concat(ox):ox.slice(0);gx.sort((fx,dx)=>fx-dx);for(let fx=0;fx<hx.length;fx+=1){const dx=hx[fx];In.push(new QuadraticPolynomial(cx,dx,a,gx,c))}}return QuadraticSieveFactorization.polynomialsCounter+=1,In.shift()}}};QuadraticPolynomial.prototype.X=function(t){return this.A*BigInt((this.useQ2Form?2:1)*t)+this.B};QuadraticPolynomial.prototype.Y=function(t,n,a){if(typeof t!="number")throw new TypeError;const s=this.A*(t*t>=2**53?BigInt(t)*BigInt(t):BigInt(t*t))+this.B*BigInt((this.useQ2Form?1:2)*t)+this.C;if(n===void 0&&a===void 0)return s;if(s%n!==0n)return null;const l=getSmoothFactorization(s/n,a);return l==null?null:l.length===1&&l[0]===0?l:this.AFactors.concat(l)};QuadraticPolynomial.prototype.log2AbsY=function(t){if(typeof t!="number")throw new TypeError;return Math.log2(Math.abs((t-this.x1)*(t-this.x2)))+this.log2a};function thresholdApproximationInterval(t,n,a,s){let l=s>2048?s>262144?1024:256:1;for(;l>=2&&Math.abs(t.log2AbsY(n+l)-a)>.5;)l=Math.floor(l/2);return n+l}const wasmCode=typeof Uint8Array<"u"?new Uint8Array([0,97,115,109,1,0,0,0,1,28,3,96,8,127,127,127,127,127,127,127,127,1,127,96,2,127,127,1,127,96,6,127,127,127,127,127,127,0,2,15,1,3,101,110,118,6,109,101,109,111,114,121,2,0,0,3,5,4,0,1,2,0,7,85,4,16,115,105,110,103,108,101,66,108,111,99,107,83,105,101,118,101,0,0,15,102,105,110,100,83,109,111,111,116,104,69,110,116,114,121,0,1,24,117,112,100,97,116,101,87,104,101,101,108,115,73,110,116,101,114,110,97,108,78,101,120,116,0,2,17,104,97,110,100,108,101,83,109,97,108,108,87,104,101,101,108,115,0,3,10,154,8,4,226,1,1,4,127,32,2,32,5,106,33,8,32,0,32,4,106,33,0,32,1,32,4,106,33,1,32,2,32,4,106,33,2,32,3,32,4,65,2,117,106,33,3,3,64,32,2,32,8,71,4,64,32,0,40,2,0,33,5,32,1,40,2,0,33,4,32,2,40,2,0,33,10,32,3,45,0,0,33,11,3,64,32,4,32,6,72,4,64,32,4,45,0,0,32,11,106,33,9,32,5,32,5,45,0,0,32,11,106,58,0,0,32,4,32,9,58,0,0,32,5,32,10,106,33,5,32,4,32,10,106,33,4,12,1,11,11,32,5,32,6,72,4,64,32,5,32,5,45,0,0,32,11,106,58,0,0,32,5,32,10,106,33,9,32,4,33,5,32,9,33,4,11,32,0,32,5,32,7,107,54,2,0,32,1,32,4,32,7,107,54,2,0,32,0,65,4,106,33,0,32,1,65,4,106,33,1,32,2,65,4,106,33,2,32,3,65,1,106,33,3,12,1,11,11,65,0,11,42,1,1,123,32,0,253,15,33,2,32,1,65,16,107,33,1,3,64,32,1,65,16,106,34,1,253,0,4,0,32,2,253,44,253,100,69,13,0,11,32,1,11,173,1,2,5,123,1,127,32,5,253,17,33,6,3,64,32,11,32,0,65,2,116,72,4,64,32,3,32,3,253,0,4,0,34,8,32,1,253,0,4,0,34,7,32,6,253,177,1,32,7,32,6,253,55,32,2,253,0,4,0,34,9,253,78,253,174,1,34,7,253,177,1,32,8,32,7,253,57,32,9,253,78,253,174,1,34,8,32,4,253,0,4,0,34,10,32,7,253,177,1,32,10,32,7,253,57,32,9,253,78,253,174,1,34,7,253,182,1,253,11,4,0,32,4,32,8,32,7,253,184,1,253,11,4,0,32,1,65,16,106,33,1,32,2,65,16,106,33,2,32,3,65,16,106,33,3,32,4,65,16,106,33,4,32,11,65,16,106,33,11,12,1,11,11,11,217,4,2,10,127,5,123,32,6,32,7,70,4,64,0,11,32,5,33,8,3,64,32,13,32,0,65,2,116,72,4,64,32,1,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,1,253,0,4,16,65,16,253,171,1,253,80,33,20,32,2,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,2,253,0,4,16,65,16,253,171,1,253,80,33,21,32,3,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,3,253,0,4,16,65,16,253,171,1,253,80,33,19,32,4,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,4,253,0,4,16,65,16,253,171,1,253,80,33,22,32,6,65,4,107,33,10,253,12,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,33,18,3,64,32,18,32,20,32,10,65,4,106,34,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,253,151,1,33,18,32,7,32,10,74,13,0,11,32,18,32,22,253,52,253,100,4,64,32,6,33,10,3,64,32,7,32,10,74,4,64,32,20,32,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,32,22,253,52,253,100,34,11,4,64,65,0,33,9,3,64,32,11,65,3,32,11,104,34,12,116,115,33,11,32,9,65,1,32,12,65,1,118,34,9,65,1,113,65,2,116,32,9,65,1,117,114,116,115,33,9,32,11,13,0,11,32,9,33,11,32,10,40,2,0,33,14,3,64,32,11,104,34,9,65,2,116,33,15,32,11,65,1,32,9,116,115,33,11,32,4,32,15,106,40,2,0,34,12,32,3,32,15,106,40,2,0,34,9,32,2,32,15,106,40,2,0,34,16,32,14,107,108,79,32,12,32,9,32,1,32,15,106,40,2,0,34,17,32,14,107,108,79,114,65,0,65,1,32,16,32,17,27,27,4,64,32,8,65,2,116,32,13,32,15,106,65,2,117,34,12,54,2,0,32,8,65,1,106,65,2,116,32,10,32,6,107,65,2,117,34,9,54,2,0,32,8,65,2,106,33,8,32,16,32,17,70,4,64,32,8,65,2,116,32,12,54,2,0,32,8,65,1,106,65,2,116,32,9,54,2,0,32,8,65,2,106,33,8,11,11,32,11,13,0,11,11,32,10,65,4,106,33,10,12,1,11,11,11,32,1,65,32,106,33,1,32,2,65,32,106,33,2,32,3,65,32,106,33,3,32,4,65,32,106,33,4,32,13,65,32,106,33,13,12,1,11,11,32,8,32,5,107,11]):null;let wasmModule=null;function instantiateWasm(t){wasmModule==null&&(wasmModule=new WebAssembly.Module(wasmCode));const n=Math.ceil(t/2**16),a=new WebAssembly.Memory({initial:n,maximum:n}),s=a.buffer,l=new WebAssembly.Instance(wasmModule,{env:{memory:a}}).exports;return Object.assign({},l,{memory:{buffer:s}})}function congruencesUsingQuadraticSieve(t,n,a){if(typeof n!="bigint")throw new TypeError;let s=Number(a||0);s===0&&(s=3*2**14,s=Math.min(s,Math.ceil(Math.pow(+t[t.length-1],1.15))),s=Math.max(s,t[t.length-1]+1),Number(n)>2**285?s=Math.floor(s/3.2/1.5):Number(n)>2**240?s=Math.floor(s/1.6/1.5):s=Math.floor(s/1.5));const l=Math.ceil(s/(typeof navigator<"u"&&navigator.hardwareConcurrency===12?2.75*2**20:6*2**20));console.debug("q",l);const u=Math.ceil(Math.ceil(s/l)/2**15)*2**15,c=u*l;console.debug("sieveSize",c);const d=0,Ct=255,ar=2**0,en=Math.log2(t.length===0?Math.sqrt(2):+t[t.length-1]),tn=en+Math.min(Math.log2(n<2**240?50:n<2**285?400:1e3),en);console.debug("largePrimesThreshold",tn);const on=new Map,cn=Number(n)>2**285,dn=Math.min(2*en+Math.min(Math.log2(200),en),64);cn&&console.log("doubleLargePrimesThreshold",dn);const Cn=[];for(let sE=0;sE<t.length;sE+=1){const hE=+t[sE];for(let TE=1,vE=hE;vE<=c||TE===1;TE+=1,vE*=hE){const IE=Number(n%BigInt(vE));if(IE%hE===0)TE===1&&Cn.push({step:vE,p:hE,root:0});else if(hE===2){const DE=squareRootsModuloTwo(IE,TE);for(let Bx=0;Bx<Math.ceil(DE.length/2);Bx+=1)Cn.push({step:vE,p:hE,root:DE[Bx]|0})}else{const DE=squareRootModuloOddPrime(IE,hE,TE);Cn.push({step:vE,p:hE,root:DE|0})}}}Cn.sort((sE,hE)=>+sE.step-+hE.step);const In=Cn.length;for(;Cn.length%16!==0;)Cn.push(Cn.at(-1));console.debug("wheels",Cn.length),console.debug("max wheel",Cn.at(-1).step);const ix=new Float64Array(Cn.length);let ax=0n;const ox=[],sx=Cn.length;console.assert(u%4===0);let ux=0;ux+=u*1,ux+=sx*4,ux+=sx*4,ux+=sx*4,ux+=sx*1,ux+=16*1024*4,ux+=sx*4,ux+=sx*4,ux+=512*4,ux+=30*sx*4,ux+=sx*4,ux+=sx*4;const cx=instantiateWasm(ux),hx=cx.singleBlockSieve,gx=cx.findSmoothEntry,fx=cx.updateWheelsInternalNext,dx=cx.handleSmallWheels,mx=cx.memory.buffer;let vx=0;const bx=function(sE){return vx+=sE,new Uint8Array(mx,vx-sE,sE)},xx=function(sE){return vx+=sE*4,new Int32Array(mx,vx-sE*4,sE)},_x=bx(u),Ex=xx(sx),Tx=xx(sx),Cx=xx(sx),Mx=bx(sx),Ax=xx(16*1024),Nx=xx(sx),Ux=xx(sx),Rx=xx(512),Ox=xx(30*sx),Px=xx(sx),$x=xx(sx);for(let sE=0;sE<sx;sE+=1){const hE=Cn[sE],TE=sE>=In?0:Math.log2(hE.p)*(hE.step===2||hE.root===0?.5:1),vE=Math.round(TE*ar)|0;if(vE>=2**8||hE.step>=2**32)throw new RangeError;Cx[sE]=hE.step,Mx[sE]=vE,Nx[sE]=hE.root,ix[sE]=TE}const Lx=function(sE,hE,TE,vE){const IE=on.get(sE);if(IE==null)on.set(sE,{polynomial:hE,x:TE,pb:vE.slice(0)}),QuadraticSieveFactorization.lpRels+=1;else{const DE=BigInt(sE),Bx=modInverse$1(DE,n);if(Bx===0n)return new CongruenceOfsquareOfXminusYmoduloN(DE,[0],n);{const Fx=hE.X(TE),Zx=hE.Y(TE,DE,vE),Jx=IE.polynomial.X(IE.x),mE=IE.polynomial.Y(IE.x,DE,IE.pb),NE=Bx*Jx*Fx%n;if(Zx!=null&&mE!=null){const $E=Zx.concat(mE);return new CongruenceOfsquareOfXminusYmoduloN(NE,$E,n)}else console.count("bad lp")}}return null},zx=QuadraticPolynomial.generator(c/2,t,n);let qx=null;function jx(sE){let hE=sE;for(let TE=2;TE<32;TE+=TE)hE=Math.imul(hE,2-Math.imul(sE,hE));return hE}function Hx(sE,hE){if(sE%2===0){if(sE!==2**Math.round(Math.log2(sE)))throw new RangeError;return{a:2**32/sE|0,b:0}}const TE=jx(sE);let vE=Math.floor(hE/sE);return vE=vE<2**16?vE:vE|65535,console.assert(vE<=Math.floor((2**32-1)/sE)),{a:TE,b:vE}}for(let sE=0;sE<sx;sE+=1){const hE=Cx[sE],TE=Hx(hE,Cn.at(-1).step+c);Px[sE]=TE.a,$x[sE]=TE.b}let Vx=0n,nE=[];const Wx=function(sE,hE){if(hE=-0+hE,!(BigInt(sE.A)===BigInt(ax))){const Fx=FastModBigInt((sE.useQ2Form?2n:1n)*sE.A),Zx=sE.B<0n?-1:1,Jx=FastModBigInt(sE.B<0n?-sE.B:sE.B);ox.length=0;for(let mE=0;mE<sx;mE+=1){const NE=-0+Cx[mE],$E=(1+2**-52)/NE,LE=-0+FastMod(Fx,NE,$E),BE=modInverseSmall$1(LE,NE)|0;Ux[mE]=BE,BE===0&&ox.push(mE);let jE=-0+FastMod(Jx,NE,$E);jE=Zx<0?-jE:jE;const JE=-0+Nx[mE];let YE=(NE-jE+(NE-JE))*BE-hE,AS=(NE-jE+JE)*BE-hE;YE=YE-Math.floor(YE*$E)*NE,AS=AS-Math.floor(AS*$E)*NE;const NS=Math.min(YE,AS),dS=Math.max(YE,AS);Ex[mE]=NS,Tx[mE]=dS}Vx=0n,nE.length=0}if(Vx===0n)Vx=sE.B;else{let Fx=sE.B-Vx;Vx=sE.B;let Zx=0;if(Fx<0n&&(Fx+=(sE.useQ2Form?2n:1n)*sE.A,Zx=1),Fx<0n||Fx>=sE.A*2n)throw new RangeError;let Jx=nE.indexOf(Fx);if(Jx===-1){nE.push(Fx);const mE=FastModBigInt(Fx<0n?-Fx:Fx);Jx=nE.length-1;const NE=Jx*sx;for(let $E=0;$E<sx;$E+=1){const LE=-0+Cx[$E],BE=-0+Ux[$E],jE=(1+2**-52)/LE,JE=FastMod(mE,LE,jE);let YE=(LE-JE)*BE;YE=YE+c,YE=YE-Math.floor(YE*jE)*LE,YE=LE-YE,Ox[NE+$E]=YE}}fx(sx,Ox.byteOffset+Jx*sx*4,Cx.byteOffset,Ex.byteOffset,Tx.byteOffset,Zx)}const vE=Number(sE.A&BigInt(2**29-1)),IE=Number(sE.B&BigInt(2**29-1)),DE=Number(sE.C&BigInt(2**29-1)),Bx=modInverseSmall$1(vE,2**29);for(let Fx=0;Fx<ox.length;Fx+=1){const Zx=ox[Fx];if(Ex[Zx]=c,Tx[Zx]=c,sE.useQ2Form){const Jx=Cx[Zx];if(Jx%2===0){const mE=Nx[Zx];for(let NE=0;NE<(Jx===2?1:2);NE+=1){const $E=NE===0?mE:Jx-mE;console.assert((-IE-$E)%2===0),console.assert((-IE+$E)%2===0);let LE=Math.imul((-IE-$E)/2,Bx)-hE&Jx-1,BE=Math.imul((-IE+$E)/2,Bx)-hE&Jx-1,jE=Math.imul(Math.imul(vE,LE+hE)+IE,LE+hE)+DE&Jx-1,JE=Math.imul(Math.imul(vE,BE+hE)+IE,BE+hE)+DE&Jx-1;if(jE===0&&JE===0&&(Ex[Zx]=Math.min(LE,BE),Tx[Zx]=Math.max(LE,BE)),Jx===2)if(LE!==BE)Mx[Zx]=Math.round(1*ar)|0,ix[Zx]=1;else throw new Error}}}}ax=sE.A},tE=function(sE,hE){for(;hE!==0;){const TE=+sE%+hE;sE=hE,hE=TE}return sE},lE=function(sE,hE){return Math.floor(sE/tE(sE,hE))*hE},Xx=function(){let sE=1,hE=0;for(;hE<sx&&lE(sE,Cx[hE])<=u/4;)sE=lE(sE,Cx[hE]),hE+=1;return hE}(),CE=function(sE,hE,TE){if(typeof TE!="number"||typeof hE!="number")throw new TypeError;if(TE>sE.length)throw new RangeError;for(let vE=hE;vE<TE;vE+=hE)sE.copyWithin(vE,0,Math.min(TE-vE,hE))};QuadraticSieveFactorization.smallSegmentTime=0,QuadraticSieveFactorization.largeSegmentTime=0;const RE=function(sE){let hE=1;_x[0]=d;for(let Zx=0;Zx<Xx;Zx+=1){const Jx=+lE(hE,Cx[Zx]);CE(_x,hE,Jx),hE=Jx;const mE=Cx[Zx],NE=Mx[Zx],$E=Ex[Zx]|0;if($E!==c)for(let BE=($E+Jx-sE%Jx)%mE;BE<Jx;BE+=mE)_x[BE]=_x[BE]+NE|0;const LE=Tx[Zx]|0;if(LE!==c)for(let BE=(LE+Jx-sE%Jx)%mE;BE<Jx;BE+=mE)_x[BE]=_x[BE]+NE|0}CE(_x,hE,u);const TE=typeof navigator<"u"&&navigator.hardwareConcurrency===12?1:1.5,vE=Math.min(0+sx-Xx,Math.floor(192*TE*(n>2**285?4:n>2**240?2:1))),IE=Math.floor(32768*TE),DE=performance.now();let Bx=0;for(;Bx+IE<=u;)Bx+=IE,hx(Ex.byteOffset,Tx.byteOffset,Cx.byteOffset,Mx.byteOffset,Xx*4,Xx*4+vE*4,Bx,0);QuadraticSieveFactorization.smallSegmentTime+=performance.now()-DE;const Fx=performance.now();hx(Ex.byteOffset,Tx.byteOffset,Cx.byteOffset,Mx.byteOffset,Xx*4,sx*4,u,u),QuadraticSieveFactorization.largeSegmentTime+=performance.now()-Fx},SE=[],EE=[],FE=[],AE=function(sE,hE){if(typeof sE!="number")throw new TypeError;const TE=Math.max(d,(Math.round((hE.log2AbsY(0)-(cn?dn:tn))*ar+d)|0)-9);let vE=0,IE=0;for(;vE<u;){IE=TE;const Bx=u;for(;vE<Bx;){if(vE<Bx-1){const Zx=_x[Bx-1];for(_x[Bx-1]=Ct;(vE&15)!==0&&IE>_x[vE];)vE+=1;if((vE&15)===0){vE=gx(IE,vE);for(var DE=0;IE>_x[vE];)vE+=1,DE+=1;DE>=16&&console.error("too big c",DE)}_x[Bx-1]=Zx}const Fx=hE.log2AbsY(vE+sE)-(_x[vE]-d)*(1/ar);(Fx<tn||cn&&Fx>=en*2&&Fx<dn)&&(SE.push(vE+sE),EE.push(-0+(_x[vE]-d)*(1/ar))),vE+=1}}};function ZE(sE){SE.length>512&&(console.warn("too many smooth entries: "+SE.length+" N = "+n),SE.length=512);for(let vE=0;vE<SE.length;vE+=1)Rx[vE]=SE[vE]-sE-c;for(let vE=0;vE<Xx;vE+=1){const IE=Cx[vE];if(Ex[vE]!==c){let DE=Ex[vE]+(0-c)%IE;Ex[vE]=DE<=0?DE+IE:DE}else Ex[vE]=0;if(Tx[vE]!==c){let DE=Tx[vE]+(0-c)%IE;Tx[vE]=DE<=0?DE+IE:DE}else Tx[vE]=0}const hE=SE.length===0?0:dx(sx,Ex.byteOffset,Tx.byteOffset,Px.byteOffset,$x.byteOffset,Ax.byteOffset>>2,Rx.byteOffset,Rx.byteOffset+SE.length*4),TE=new Float64Array(SE.length);for(let vE=0;vE<hE;vE+=2){const IE=Ax[vE],DE=Ax[vE+1],Bx=Cx[IE];TE[DE]+=+ix[IE],FE[DE].push(Bx)}for(let vE=0;vE<SE.length;vE+=1){const IE=Math.abs(EE[vE]-TE[vE]);IE>=9&&IE<100&&console.error(IE),EE[vE]=TE[vE]}}function Dx(){this.a=[],this.b=[],this.length=0}Dx.prototype.push=function(sE){this.a.push(sE),this.length=this.a.length+this.b.length},Dx.prototype.shift=function(hE){if(this.b.length===0)for(;this.a.length>0;)this.b.push(this.a.pop());var hE=this.b.pop();return this.length=this.a.length+this.b.length,hE};function kx(){this.edges=0,this.components=0,this.vertices=0,this._edges=new Map,this._edgesArray=[],this._g=new Map}kx.prototype._insertVertex=function(sE){if(!this._g.has(sE))return this._g.set(sE,sE),this.vertices+=1,this.components+=1,sE;let hE=this._g.get(sE);for(;this._g.get(hE)!==hE;)hE=this._g.get(hE);let TE=sE;for(;TE!==hE;){const vE=this._g.get(TE);this._g.set(TE,hE),TE=vE}return hE};const Yx=function(sE,hE){return BigInt.asUintN(64,(BigInt(Math.min(sE,hE))<<32n)+BigInt(Math.max(sE,hE)))};kx.prototype.insertEdge=function(sE,hE,TE){const vE=Yx(sE,hE);if(this._edges.get(vE)!==void 0){console.count("same p1p2");return}this._edges.set(vE,TE),this._edgesArray.push({p1:sE,p2:hE}),sE!==hE&&this._edgesArray.push({p1:hE,p2:sE}),this.edges+=1;const IE=this._insertVertex(sE),DE=this._insertVertex(hE);IE<DE&&(this.components-=1,this._g.set(DE,IE)),IE>DE&&(this.components-=1,this._g.set(IE,DE))},kx.prototype.iterateCycles=function(sE){const hE=new Map;this._edgesArray.sort((DE,Bx)=>DE.p1-Bx.p1||DE.p2-Bx.p2);const TE=[];for(let DE of this._g.keys())this._g.get(DE)===DE&&TE.push(DE),hE.set(DE,{explored:!1,finished:!1,parent:0});TE.sort((DE,Bx)=>DE-Bx);const vE=this._edgesArray.map(DE=>DE.p1),IE=function(DE){const Bx=[];for(;DE!==0;)Bx.push(DE),DE=hE.get(DE).parent;return Bx};for(const DE of TE){const Bx=new Dx,Fx=hE.get(DE);for(console.assert(Fx.explored===!1&&Fx.parent===0),Fx.explored=!0,Fx.parent=0,Bx.push(DE);Bx.length>0;){const Zx=Bx.shift(),Jx=indexOf$1(vE,Zx);for(let mE=Jx;mE>=0&&this._edgesArray[mE].p1===Zx;mE-=1){const NE=this._edgesArray[mE],$E=hE.get(NE.p2);if($E.explored){if($E.finished)continue;const LE=IE(NE.p2),BE=IE(NE.p1);let jE=0;for(;LE.length-1-jE>=0&&BE.length-1-jE>=0&&LE[LE.length-1-jE]===BE[BE.length-1-jE];)jE+=1;console.assert(jE>0);const JE=LE.slice(0,LE.length-(jE-1)).reverse().concat(BE.slice(0,BE.length-(jE-1))),YE=[];for(let dS=1;dS<JE.length;dS+=1)YE.push({p1:JE[dS-1],p2:JE[dS]});const AS=this._edges,NS=YE.map(dS=>AS.get(Yx(dS.p1,dS.p2)));sE(YE,NS)}else $E.explored=!0,$E.parent=NE.p1,Bx.push(NE.p2)}hE.get(Zx).finished=!0}}};const Kx=function(sE,hE){let TE=1n,vE=1n,IE=[];for(let Bx=0;Bx<sE.length;Bx+=1){const Fx=sE[Bx],Zx=hE[Bx],Jx=Zx.polynomial.X(Zx.x),mE=Zx.polynomial.Y(Zx.x,BigInt(Fx.p1)*BigInt(Fx.p2),Zx.pb);vE=Jx*vE%n,IE==null||mE==null?IE=null:IE=IE.concat(mE),TE=TE*BigInt(Fx.p2)%n}const DE=modInverse$1(TE,n);if(DE===0n)eE.push(new CongruenceOfsquareOfXminusYmoduloN(TE,[0],n));else if(IE!=null){vE=DE*vE%n;const Bx=new CongruenceOfsquareOfXminusYmoduloN(vE,IE,n);if((vE**2n-IE.reduce((Fx,Zx)=>Fx*BigInt(Zx),1n))%n!==0n)throw new Error;eE.push(Bx)}else console.count("BAD CYCLE")};let aE=new kx;const eE=[];let gE=0;function dE(sE,hE,TE,vE,IE){if(aE==null)return;aE.insertEdge(sE,hE,{polynomial:vE,x:TE,pb:IE.slice(0)});const DE=aE.edges+aE.components-aE.vertices;aE.edges%1e4===0&&console.debug("graph:",aE.edges,aE.components,aE.vertices,DE),DE>t.length+64-gE&&(console.debug("graph:",aE.edges,aE.components,aE.vertices,DE),console.time("collectGraphRelations"),aE.iterateCycles(Kx),console.timeEnd("collectGraphRelations"),console.log(eE.length),aE=null)}function bE(sE,hE,TE){let vE=abs$3(hE.Y(sE));for(let Jx=TE.length-1;Jx>=0;Jx-=1){const mE=TE[Jx];for(;vE%BigInt(mE)===0n;)vE/=BigInt(mE)}const IE=BigInt(vE);if(Number(IE)>=2**64||isProbablyPrime64(IE))return;const DE=Number(PollardsRho64(IE,2**18));if(DE===0||DE===1){console.count("cannot factor");return}if(BigInt(IE)%BigInt(DE)!==BigInt(0)||!(DE>1&&BigInt(DE)<BigInt(IE)))throw new Error;const Bx=Math.floor(Number(BigInt(IE)/BigInt(DE))),Fx=Math.min(Bx,DE),Zx=Math.max(Bx,DE);Math.log2(Fx)>en&&Fx<=1073741823&&Zx<=1073741823&&dE(Fx|0,Zx|0,sE,hE,TE)}QuadraticSieveFactorization.lpCounter=0,QuadraticSieveFactorization.lpRels=0;let xE=-1,OE=0;const PE={next:function(){for(gE+=1;OE<32||2*OE*c<=Math.pow(t[t.length-1],2);){if(eE.length!==0)return{value:eE.pop(),done:!1};xE===c&&(OE+=1,xE=-1);const hE=-c/2;if(xE===-1){qx=zx.next(),Wx(qx,hE),SE.length=0,EE.length=0;for(let TE=0;TE<c;TE+=u)RE(TE),AE(hE+TE,qx);for(let TE=0;TE<SE.length;TE+=1)TE<FE.length?FE[TE].length=0:FE.push([]);ZE(hE)}for(let TE=xE+1;TE<SE.length;TE+=1){const vE=SE[TE],IE=+EE[TE],DE=FE[TE],Bx=+qx.log2AbsY(vE);let Fx=null;if(Bx-IE<=en){const Zx=qx.X(vE);let Jx=qx.Y(vE,1n,DE);Jx==null&&(Jx=qx.Y(vE,1n,DE.concat(ox.map(mE=>Cx[mE])))),Jx!=null?Fx=new CongruenceOfsquareOfXminusYmoduloN(Zx,Jx,n):console.count("wrong entry",exp2(Bx-IE))}else if(Bx-IE<2*en){const Zx=exp2(Bx-IE);Fx=Lx(Zx,qx,vE,DE),Fx!=null?QuadraticSieveFactorization.lpCounter+=1:cn&&Zx<=1073741823&&(qx.Y(vE,BigInt(Zx),DE)!=null?dE(1,Zx|0,vE,qx,DE):(console.count("wrong?"),console.log(qx.Y(vE),Zx)))}else cn&&Bx-IE<3*en?bE(vE,qx,DE):console.count("too big",(Bx-IE)/en);if(Fx!=null)return xE=TE,{value:Fx,done:!1}}xE=c}return{value:void 0,done:!0}}};return PE[globalThis.Symbol.iterator]=function(){return this},PE}function gcd$2(t,n){for(;n!==0n;){const a=BigInt(t)%BigInt(n);t=n,n=a}return t}function abs$3(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function indexOf$1(t,n){if(typeof n!="number"||(n|0)!==n)throw new TypeError;let a=0,s=t.length-1;for(;a<s;){const l=Math.ceil((a+s)/2);(t[l]|0)>(n|0)?s=l-1:a=l}return(t[a]|0)===(n|0)?a:-1}function computeY(t,n,a){const s=new Array(t.length+1).fill(0);for(let u=0;u<n.length;u+=1){const c=n[u].v;for(let d=0;d<c.length;d+=1)s[c[d]]+=1}let l=1n;for(let u=0;u<s.length;u+=1){if(s[u]%2!==0)throw new RangeError;if(u!==0){const c=t[u-1],d=s[u]/2;d>0&&(d<=2?l=l*BigInt(Math.pow(c,d))%a:l=l*modPow$2(BigInt(c),BigInt(d),a)%a)}}return l}function legendre(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,s=0;t!==0;){for(;(t&1)===0;)t>>=1,s=n&7,(s===3||s===5)&&(a=-a);s=n,n=t,t=s,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function getBestMultiplier(t,n){const a=new Array(150).fill(0);for(let c=1;c<a.length;c+=1)a[c]=-Math.log(c)/2;for(let c=0;c<n.length&&c<300;c+=1){const d=n[c];if(d===2)for(let Ct=1;Ct<a.length;Ct+=1)a[Ct]+=[0,3,0,.5,0,1,0,.5][Ct*Number(t%8n)%8]*Math.log(2);else{const Ct=legendre(Number(t%BigInt(d)),d),ar=2/(d-1)*Math.log(d);for(let en=1;en<a.length;en+=1)a[en]+=Ct*legendre(en,d)===1?ar:0}}let s=0,l=1;for(let c=1;c<=a.length;c+=1){var u=+a[c];+u>+s&&(s=u,l=c)}return l}function QuadraticSieveFactorization(t){if(typeof t!="bigint")throw new TypeError;const n=Math.floor(((performance.memory||{jsHeapSizeLimit:0}).jsHeapSizeLimit||0)/2**32<.99?2**23.5:2**23.75),a=Math.min(n,(1<<25)-1),l=Math.max(Math.min(Math.floor(Math.sqrt(L$1(t)/(Number(t)>2**285?24*2.5:Number(t)>2**240?12:6))),a),512),u=primes$1(l);let c=1n;for(c=Number(t)>2**64?BigInt(getBestMultiplier(t,u)):1n;;c+=1n){if(c!==1n&&console.debug("multiplier",c),c!==1n&&t%c===0n)return console.error("k"),BigInt(c);const d=c*t,Ct=u.filter(Cn=>isQuadraticResidueModuloPrime(d,Cn));for(let Cn=0;Cn<Ct.length;Cn+=1)if(Number(t%BigInt(Ct[Cn]))===0)return BigInt(Ct[Cn]);const ar=congruencesUsingQuadraticSieve(Ct,d),en=solve.sparseSolve(1+Ct.length);en.next();let tn=null;const on=performance.now();let cn=0,dn=on;for(;(tn=ar.next().value)!=null;)if(tn.Y.length===1&&tn.Y[0]===0){const Cn=BigInt(gcd$2(abs$3(tn.X),t));if(Cn!==1n&&Cn!==t)return Cn}else{const Cn=function(){throw new TypeError(t)},In=tn.Y.map(ax=>ax===-1?0:1+indexOf$1(Ct,ax)||Cn()),ix=en.next([In,{c:tn,v:In}]).value;{const ax=performance.now();cn+=1,(ax-dn>5e3||ix!=null)&&(console.debug("congruences found: ",cn,"/",Ct.length,"expected time: ",Math.round((ax-on)/cn*Ct.length),"large prime congruences: ",QuadraticSieveFactorization.lpCounter+"("+QuadraticSieveFactorization.lpRels+")","polynomials used: ",QuadraticSieveFactorization.polynomialsCounter),dn=ax)}if(ix!=null){let ax=1n;for(let ux=0;ux<ix.length;ux+=1)ax=ax*ix[ux].c.X%t;let ox=computeY(Ct,ix,t);const sx=BigInt(gcd$2(abs$3(ax+ox),t));if(sx!==1n&&sx!==t)return sx}}}}QuadraticSieveFactorization.testables={congruencesUsingQuadraticSieve,squareRootModuloOddPrime,isQuadraticResidueModuloPrime,solve,QuadraticPolynomial,thresholdApproximationInterval};function log2(t){return BigInt(t.toString(16).length*4)}function modPow$1(t,n,a){let s=1n;for(;n!==0n;)BigInt.asUintN(1,n)===1n&&(n-=1n,s=s*t%a),n>>=1n,t=t*t%a;return s}function primes(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let s=3;s<=t;s+=2)if(n[s]&&(a.push(s),s<=Math.floor(t/s)))for(let l=s*s;l<=t;l+=2*s)n[l]=!1;return a}function getBases(t){if(typeof t!="bigint")throw new TypeError;if(t<2047n)return[2];if(t<1373653n)return[2,3];if(t<25326001n)return[2,3,5];if(t<3215031751n)return[2,3,5,7];if(t<2152302898747n)return[2,3,5,7,11];if(t<3474749660383n)return[2,3,5,7,11,13];if(t<341550071728321n)return[2,3,5,7,11,13,17];if(t<3825123056546413051n)return[2,3,5,7,11,13,17,19,23];if(t<318665857834031151167461n)return[2,3,5,7,11,13,17,19,23,29,31,37];if(t<3317044064679887385961981n)return[2,3,5,7,11,13,17,19,23,29,31,37,41];const n=Number(log2(t))*Math.log(2);return primes(Math.floor(1/Math.log(2)*n*Math.log(n)))}function isPrime$3(t){if(typeof t!="bigint")throw new RangeError;if(t<0n)throw new RangeError;if(t<2n)return!1;const n=[2,3,5,7,11,13,17,19,23,29,31,37,41],a=Number(t%304250263527210n);for(let c=0;c<n.length;c+=1){const d=n[c];if(a-Math.floor(a/d)*d===0)return t===BigInt(d)}if(t<1849)return!0;let s=0,l=t-1n;for(;l%2n===0n;)l/=2n,s+=1;const u=getBases(t);for(const c of u){let d=modPow$1(BigInt(c),l,t);if(d!==1n){for(let Ct=s-1;Ct>0&&d!==t-1n;Ct-=1)d=d*d%t;if(d!==t-1n)return!1}}return!0}function bitLength$1(t){if(typeof t=="number"){var n=t|0;if(n===t&&n>=0)return 32-Math.clz32(n)}const a=t.toString(16),s=0+a.charCodeAt(0)-48;if(s<=0)throw new RangeError;return(a.length-1)*4+(32-Math.clz32(Math.min(s,8)))}const SPLIT=Math.pow(2,Math.ceil(Math.log2((Number.MAX_SAFE_INTEGER+1)*2)/2))+1;function fma(t,n,a){var s=SPLIT*t,l=s-(s-t),u=t-l,c=SPLIT*n,d=c-(c-n),Ct=n-d,ar=l*d+a+l*Ct+u*d+u*Ct;return ar}function modMultiplySmall(t,n,a){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;if(!(t>=0&&n>=0&&t<a&&n<a&&a<=Number.MAX_SAFE_INTEGER))throw new RangeError;var s=t*n;if(s<=Number.MAX_SAFE_INTEGER)return s-Math.floor(s/a)*a;var l=fma(t,n,-s),u=s/a-(1+Number.MAX_SAFE_INTEGER)+(1+Number.MAX_SAFE_INTEGER),c=0-fma(u,a,-s);l>0&&(l-=a),c<0&&(c+=a);var d=l+c;return d<0&&(d+=a),d}function modPowSmall(t,n,a){let s=1;for(;n!==0;){let l=Math.floor(n/2);n!==l+l&&(s=modMultiplySmall(s,t,a)),n=l,t=modMultiplySmall(t,t,a)}return s}function range(t,n){var a=[];for(let s=t;s<=n;s+=1)a.push(s);return a}function isPrimeSmall(t){if(typeof t!="number")throw new TypeError;if(t>Number.MAX_SAFE_INTEGER)throw new RangeError;if(t<2)throw new RangeError;if(+primeFactorUsingWheel(t,2*1024)<t)return!1;if(t<Math.pow(1024,2))return!0;let n=0,a=t-1;for(;a%2===0;)a/=2,n+=1;const s=[10,20,24,31,40,41,48,48,61,61,61,78,81],l=[2,3,5,7,11,13,17,17,19,19,19,23,29];let u=0;const c=Math.ceil(Math.log2(t));for(;c>s[u]&&u<s.length;)u+=1;let d=null;u<s.length?d=l.slice(0,u+1):d=range(2,Math.floor(1/Math.log(2)*Math.log(t)*Math.log(Math.log(t)))),console.assert(t>d[d.length-1]);for(const Ct of d){const ar=modPowSmall(Ct,a,t);if(ar!==1){for(let en=0,tn=ar;tn!==t-1;en+=1,tn=modMultiplySmall(tn,tn,t))if(en===n-1)return!1}}return!0}function factorByPollardRhoSmall(t){if(typeof t!="number")throw new TypeError;function n(c,d){for(;d!==0;){var Ct=c-Math.floor(c/d)*d;c=d,d=Ct}return c}function a(c,d,Ct){var ar=modMultiplySmall(c,c,Ct)-d;return ar<0?ar+Ct:ar}function s(c,d,Ct){if(c%d===0)return d;for(var ar=d,en=2,tn=d;;){for(var on=1,cn=tn,dn=!1,Cn=1;dn||Cn<=en;Cn+=1)if(tn=a(tn,Ct,c),Cn===en/2&&(cn=tn),Cn>en/2&&(on=dn?Math.abs(tn-ar):modMultiplySmall(on,Math.abs(tn-ar),c),dn||Cn===en||Cn%128===0)){var In=n(on,c);if(In!==1)if(!dn)tn=cn,dn=!0;else return In;on=1,cn=tn}en*=2,ar=tn}return 1}var l=1,u=t;do l+=1,u=s(t,l,1);while(u===t);return u}function factorByPollardRhoBig(t,n){function a(Ct){if(typeof Ct!="bigint")throw new TypeError;return Ct<0n?-Ct:Ct}function s(Ct,ar){if(typeof Ct!="bigint"||typeof ar!="bigint")throw new RangeError;for(;ar!==0n;){var en=BigInt(Ct)%ar;Ct=ar,ar=en}return Ct}function l(Ct,ar,en){if(typeof Ct!="bigint"||typeof ar!="bigint"||typeof en!="bigint")throw new RangeError;var tn=Ct*Ct%en-ar;return tn<0n?tn+en:tn}function u(Ct,ar,en,tn){if(typeof Ct!="bigint"||typeof ar!="bigint")throw new RangeError;if(Ct%ar===0n)return ar;for(var on=ar,cn=2,dn=ar;cn<=Math.pow(2,tn);){for(var Cn=1n,In=dn,ix=!1,ax=1;ix||ax<=cn;ax+=1)if(dn=l(dn,en,Ct),ax===cn/2&&(In=dn),ax>cn/2){const sx=a(BigInt(dn)-on);if(Cn=ix?sx:Cn*sx%Ct,ix||ax===cn||ax%128===0){var ox=s(Cn,Ct);if(ox!==1n)if(!ix)dn=In,ix=!0;else return ox;Cn=1n,In=dn}}cn*=2,on=dn}return 1n}var c=1,d=t;do c+=1,d=u(t,BigInt(c),1n,n);while(BigInt(d)===BigInt(t));return d}var WHEEL3=[1,2,2,4,2,4,2,4,6,2,6];function remainder(t,n){return t-Math.floor(t/n)*n}function primeFactorUsingWheel(t,n=void 0){if(typeof t!="number")throw new RangeError;var a=WHEEL3,s=3;n==null&&(n=Math.floor(Math.sqrt(Number(t)+.5)));for(var l=2,u=0;l<=n;){if(remainder(t,l)===0)return l;l+=a[u],u+=1,u===a.length&&(u=s)}return t}function someFactor(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));if(n<1)throw new TypeError("primeFactor cannot be called for numbers less than 2");if(n===1)return t;if(n<=Number.MAX_SAFE_INTEGER){var a=primeFactorUsingWheel(n,1024);if(a<n||n<=1024*1024)return BigInt(a);if(n%2===0)return 2n}//! optimize n = f**2
var s=BigInt(nthRoot(BigInt(t),2));if(s**2n===t)return s;if(n>5){var l=s+1n,u=l*l-BigInt(t),c=BigInt(nthRoot(BigInt(u),2));if(c*c===u)return l-c}//! optimize n = f**3
for(var d=bitLength$1(BigInt(t)),Ct=3;Ct<=d/10;Ct+=2){var ar=BigInt(nthRoot(BigInt(t),Ct));if(ar**BigInt(Ct)===BigInt(t))return ar}var en=n<=Number.MAX_SAFE_INTEGER;if(en&&isPrimeSmall(n)||!en&&isPrime$3(t))return t;if(n<=Number.MAX_SAFE_INTEGER)return factorByPollardRhoSmall(n);{var tn=Math.floor(Math.log(function(Cn){const In=Math.max(0,Cn.toString(16).length*4-48),ix=(Math.log2(Number(BigInt(Cn)>>BigInt(In)))+In)*Math.LN2;return Math.exp(Math.sqrt(ix*Math.log(ix)))}(t)));n<2**64&&(tn=1/0),globalThis.ArrayBuffer==null&&(tn=1/0),n>=2**128?tn-=3:n>=2**96?tn-=2:tn-=1;var on=factorByPollardRhoBig(t,tn);if(on!==1n)return on;if(globalThis.onerror!=null){var d=bitLength$1(t),cn=new TypeError("big size of someFactor bitLength("+t+") === "+d);globalThis.onerror(cn.message,"",0,0,cn)}return QuadraticSieveFactorization(t)}}function countTrailingZeros(t,n){t=BigInt(t);const a=BigInt(n);if(t<0n||a<0n)throw new RangeError;if(t===a)return 1;if(t===0n)throw new TypeError;if(a===2n){for(var l=32;BigInt.asUintN(l,t)===0n;)l*=2;for(var u=0,s=Math.floor(l/2);s>=32;s=Math.floor(s/2))BigInt.asUintN(s,t)===0n&&(u=+u+s,t>>=BigInt(s));const tn=function(on){const cn=+on;return 32-(Math.clz32(cn&-cn)+1)};return u=+u+tn(Number(BigInt.asUintN(32,t))),u}for(var l=1;t%a**BigInt(l)===0n;)l*=2;for(var u=0,s=l/2;s>=1;s/=2){var c=a**BigInt(s),d=BigInt(t)/c,Ct=BigInt(t)-d*BigInt(c);Ct===0n&&(u=+u+s,t=d)}return u}primeFactor._rationalNumberToDecimalString=function(t,n,a){const s=function(cn,dn){if(cn=BigInt(cn),cn%2n===0n||cn%5n===0n)throw new RangeError("should be called with denominator not divible by 2 or 5");const Cn=cn;let In=0;if(Cn!==1n){let ix=1n;do In+=1,ix=10n*ix%Cn;while(In<=dn&&ix!==1n)}return In},l=function(cn,dn,Cn,In){let ix=+dn+cn.length-1;cn=cn.replace(/0+$/g,"");const ax=Math.max(0,Math.max(ix+1,In)-cn.length);return ix<=-1&&(cn=String("0".repeat(0-ix))+String(cn),ix=0),cn=String(cn)+String("0".repeat(ax)),cn=String(cn)+String("0".repeat(Math.max(Cn-(cn.length-(ix+1)),0))),cn.slice(0,ix+1)+(cn.length>ix+1?"."+cn.slice(ix+1):"")},u=function(cn,dn,Cn){const In=+dn+cn.length-1;return In<-6||In>=Cn?l(cn,-(cn.length-1),0,Cn)+"e"+(In<0?"-":"")+Math.abs(In).toString():l(cn,dn,0,Cn)},c=function(cn,dn,Cn){return Cn.significantDigits!=null?u(cn,dn,Cn.significantDigits):l(cn,dn,Cn.fractionDigits,0)};t=BigInt(t),n=BigInt(n);let d=1;n<0n&&(n=-BigInt(n),d=-d),t<0n&&(t=-BigInt(t),d=-d);const Ct=function(cn,dn){let Cn=Math.floor((bitLength$1(cn)-1-bitLength$1(dn))/Math.log2(10));for(;BigInt(Cn<0?10n**BigInt(-Cn)*cn:cn)>=BigInt(Cn>0?10n**BigInt(Cn)*dn:dn);)Cn+=1;return Cn-1},ar=primeFactor._countTrailingZeros(n,2),en=primeFactor._countTrailingZeros(n,5);if(ar>0&&t%2n===0n)throw new RangeError("not implemented");if(en>0&&t%5n===0n)throw new RangeError("not implemented");const tn=n/(2n**BigInt(ar)*5n**BigInt(en)),on=+Math.max(ar,en);if((a.fractionDigits!=null&&on<=a.fractionDigits||a.significantDigits!=null&&on+(Ct(t,n)+1)-primeFactor._countTrailingZeros(t,10)<=a.significantDigits)&&t%tn===0n){const cn=on,dn=(10n**BigInt(cn)*t/n).toString(),Cn=a.fractionDigits!=null?{fractionDigits:on}:{significantDigits:on+(Ct(t,n)+1)<=a.significantDigits?on+(Ct(t,n)+1):on+(Ct(t,n)+1)-primeFactor._countTrailingZeros(t,10)};return(d<0?"-":"")+c(dn,-cn,Cn)}else{const cn=+(a.fractionDigits!=null?a.fractionDigits:a.significantDigits-(Ct(t,n)+1)),dn=cn>0?10n**BigInt(cn)*t:t,Cn=cn<0?10n**BigInt(-cn)*n:n,In=((dn+Cn/2n)/Cn).toString();let ix=(d<0?"-":"")+c(In,-cn,a);const ax=+s(tn,ix.length);if(ax!==0&&ax<=ix.length){const ox=ix.indexOf(".");let sx=ox+1+on-(ix.indexOf("e")!==-1?-Number(String(ix.slice(ix.indexOf("e")+1)))-0:0)-primeFactor._countTrailingZeros(t,10);if(sx<ox+1){sx=ox+1;//!?
}const ux=ix.indexOf("e")!==-1?ix.indexOf("e"):ix.length;ox!==-1&&(sx+ax<ux||sx+ax===ux&&+ix.charCodeAt(sx)<53)&&(ix=ix.slice(0,sx)+"("+ix.slice(sx,sx+ax)+")"+ix.slice(sx+ax))}return!/[^0\.]/.test(ix)&&d>=0&&t!==0n&&(ix="+"+ix),ix}};function primeFactor(t){t=BigInt(t);var n=BigInt(someFactor(t));if(n===t)return n;var a=primeFactor(n);return a}function modInverseBig(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;console.assert(t>=0n),console.assert(n>0n),t>=n&&(t=t%n);let a=t,s=n,l=1n,u=0n;for(;s!==0n;){const d=BigInt(BigInt(a)/s),Ct=a-d*s;a=s,s=Ct;const ar=l-d*u;l=u,u=ar}let c=l;return c=c<0n?c+n:c,console.assert(c>=0n&&c<n),c}function modInverseSmall(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;if(n<0)throw new RangeError;console.assert(t>=0),t>=n&&(t=t%n);let a=t,s=n,l=1,u=0;for(;s!==0;){const d=Math.floor(a/s),Ct=a-d*s;a=s,s=Ct;const ar=l-d*u;l=u,u=ar}let c=l;return c=c<0?c+n:c,console.assert(c>=0&&c<n),c}function modInverse(t,n){return typeof n=="number"?modInverseSmall(typeof t=="number"?t:Number(BigInt(t)%BigInt(n)),n):modInverseBig(BigInt(t),BigInt(n))}primeFactor._bitLength=bitLength$1;primeFactor._isPrime=function(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));return n<=Number.MAX_SAFE_INTEGER?isPrimeSmall(n):isPrime$3(t)};primeFactor._countTrailingZeros=countTrailingZeros;primeFactor._someFactor=someFactor;primeFactor._modInverse=modInverse;primeFactor._integerNthRoot=function(t,n){return nthRoot(BigInt(t),n)};primeFactor.testables={factorByPollardRhoSmall,factorByPollardRhoBig};(function(){function t(){}t.BigInt=function(fx){return BigInt(fx)},t.asIntN=function(fx,dx){return BigInt.asIntN(fx,dx)},t.asUintN=function(fx,dx){return BigInt.asUintN(fx,dx)},t.toNumber=function(fx){return Number(fx)},t.add=function(fx,dx){return fx+dx},t.subtract=function(fx,dx){return fx-dx},t.multiply=function(fx,dx){return fx*dx},t.divide=function(fx,dx){return fx/dx},t.remainder=function(fx,dx){return fx%dx},t.unaryMinus=function(fx){return-fx},t.equal=function(fx,dx){return fx===dx},t.lessThan=function(fx,dx){return fx<dx},t.greaterThan=function(fx,dx){return fx>dx},t.notEqual=function(fx,dx){return fx!==dx},t.lessThanOrEqual=function(fx,dx){return fx<=dx},t.greaterThanOrEqual=function(fx,dx){return fx>=dx},t.exponentiate=function(fx,dx){if(typeof fx!="bigint"||typeof dx!="bigint")throw new TypeError;var mx=Number(dx);if(mx<0)throw new RangeError;if(mx>Number.MAX_SAFE_INTEGER){var vx=Number(fx);if(vx===0||vx===-1||vx===1)return vx===-1&&Number(dx%BigInt(2))===0?-fx:fx;throw new RangeError}if(fx===BigInt(2))return BigInt(1)<<dx;if(mx===0)return BigInt(1);for(var bx=fx;mx%2===0;)mx=Math.floor(mx/2),bx*=bx;var xx=bx;if(mx-=1,mx>=2){for(;mx>=2;){var _x=Math.floor(mx/2);_x*2!==mx&&(xx*=bx),mx=_x,bx*=bx}xx*=bx}return xx},t.signedRightShift=function(fx,dx){return fx>>dx},t.leftShift=function(fx,dx){return fx<<dx},Symbol.hasInstance!=null&&Object.defineProperty(t,Symbol.hasInstance,{value:function(fx){return typeof fx=="bigint"}});var n=Symbol.hasInstance!=null&&typeof BigInt<"u"&&BigInt(Number.MAX_SAFE_INTEGER)+BigInt(2)-BigInt(2)===BigInt(Number.MAX_SAFE_INTEGER);if(n&&(-BigInt("0xffffffffffffffffffffffffffffffff")>>BigInt(64)).toString()!=="-18446744073709551616"&&(t.signedRightShift=function(fx,dx){var mx=BigInt(1)<<dx;return fx>=BigInt(0)?fx/mx:(fx-mx+BigInt(1))/mx}),n)try{BigInt(Number.MAX_SAFE_INTEGER+1)}catch{t.BigInt=function(dx){if(typeof dx=="number"){for(var mx=0,vx=dx;vx>=Number.MAX_SAFE_INTEGER+1;)vx/=Number.MAX_SAFE_INTEGER+1,mx+=Math.round(Math.log2(Number.MAX_SAFE_INTEGER+1));if(mx!==0)return BigInt(vx)<<BigInt(mx)}return BigInt(dx)}}for(var a=t,s=function(fx){return function(dx,mx){return fx(dx,mx)}},l=new Array(33),u=0;u<l.length;u+=1)l[u]=void 0;function c(){this.a=void 0,this.aKey=0,this.b=void 0,this.bKey=0,this.last=0}c.prototype.get=function(fx){if(this.aKey===fx)return this.last=0,this.a;if(this.bKey===fx)return this.last=1,this.b},c.prototype.set=function(fx,dx){this.last===0?(this.bKey=fx,this.b=dx,this.last=1):(this.aKey=fx,this.a=dx,this.last=0)};var d=new c,Ct=s(function(fx){return a.toNumber(fx)}),ar=function(fx){if(typeof fx=="number"){if(fx>=-16&&fx<=16){var dx=l[fx+16];return dx==null&&(dx=a.BigInt(fx),l[fx+16]=dx),dx}var dx=d.get(fx);return dx==null&&(dx=a.BigInt(fx),d.set(fx,dx)),dx}return fx},en=void 0,tn=void 0,on=function(){en=a.BigInt(-9007199254740991),tn=a.BigInt(9007199254740991)},cn=function(fx){return!a.lessThan(fx,en)&&!a.greaterThan(fx,tn)?a.toNumber(fx):fx},dn=s(function(fx,dx){if(typeof fx=="string"||typeof dx=="string")return fx+dx;if(typeof fx=="number"&&fx===0)return dx;if(typeof dx=="number"&&dx===0)return fx;var mx=ar(fx),vx=ar(dx),bx=a.add(mx,vx);return typeof fx=="number"&&typeof dx=="number"?bx:cn(bx)}),Cn=s(function(fx,dx){if(typeof fx=="number"&&fx===0)return sx(dx);if(typeof dx=="number"&&dx===0)return fx;var mx=ar(fx),vx=ar(dx),bx=a.subtract(mx,vx);return typeof fx=="number"&&typeof dx=="number"?bx:cn(bx)}),In=s(function(fx,dx){if(typeof fx=="number"&&fx===0)return 0;if(typeof fx=="number"&&fx===1)return dx;if(typeof fx=="number"&&fx===-1)return a.unaryMinus(dx);if(typeof dx=="number"&&dx===0)return 0;if(typeof dx=="number"&&dx===1)return fx;if(typeof dx=="number"&&dx===-1)return a.unaryMinus(fx);var mx=ar(fx),vx=ar(dx);return a.multiply(mx,vx)}),ix=s(function(fx,dx){if(typeof fx=="number")return 0;if(typeof dx=="number"&&dx===1)return fx;if(typeof dx=="number"&&dx===-1)return a.unaryMinus(fx);var mx=ar(fx),vx=ar(dx);return cn(a.divide(mx,vx))}),ax=s(function(fx,dx){if(typeof fx=="number")return fx;if(typeof dx=="number"&&dx===1||typeof dx=="number"&&dx===-1)return 0;var mx=ar(fx),vx=ar(dx);return cn(a.remainder(mx,vx))}),ox=s(function(fx,dx){if(typeof dx=="number"){if(dx===0)return 1;if(dx===1)return fx;if(dx===2)return In(fx,fx);if(typeof fx=="number"&&Math.abs(fx)>2&&dx>=0){if(dx>42&&fx%2===0)return In(ox(2,dx),ox(fx/2,dx));var mx=Math.floor(Math.log(9007199254740991)/Math.log(Math.abs(fx)+.5));if(mx>=2)return In(Math.pow(fx,dx%mx),ox(Math.pow(fx,mx),Math.floor(dx/mx)))}}var vx=ar(fx),bx=ar(dx),xx=a.exponentiate(vx,bx);return typeof fx=="number"&&Math.abs(fx)<=1?cn(xx):xx}),sx=s(function(fx){var dx=ar(fx);return a.unaryMinus(dx)}),ux=s(function(fx,dx){return typeof fx=="number"||typeof dx=="number"?!1:a.equal(fx,dx)}),cx=s(function(fx,dx){return typeof fx=="number"?fx<a.toNumber(dx):typeof dx=="number"?a.toNumber(fx)<dx:a.lessThan(fx,dx)}),hx=s(function(fx,dx){return typeof fx=="number"?fx>a.toNumber(dx):typeof dx=="number"?a.toNumber(fx)>dx:a.greaterThan(fx,dx)});function gx(){}gx.BigInt=function(fx){if(typeof fx=="number"||typeof fx=="string"||typeof fx=="bigint"){var dx=0+(typeof fx=="number"?fx:Number(fx));if(dx>=-9007199254740991&&dx<=9007199254740991)return dx}return cn(a.BigInt(fx))},gx.asIntN=function(fx,dx){return cn(a.asIntN(fx,a.BigInt(dx)))},gx.asUintN=function(fx,dx){if(typeof dx=="number"&&dx>=0&&fx>=0&&fx<=53){var mx=Math.pow(2,fx);return dx-Math.floor(dx/mx)*mx}return cn(a.asUintN(fx,a.BigInt(dx)))},gx.toNumber=function(fx){return typeof fx=="number"?fx:Ct(fx)},gx.add=function(fx,dx){if(typeof fx=="number"&&typeof dx=="number"){var mx=fx+dx;if(mx>=-9007199254740991&&mx<=9007199254740991)return mx}return dn(fx,dx)},gx.subtract=function(fx,dx){if(typeof fx=="number"&&typeof dx=="number"){var mx=fx-dx;if(mx>=-9007199254740991&&mx<=9007199254740991)return mx}return Cn(fx,dx)},gx.multiply=function(fx,dx){if(typeof fx=="number"&&typeof dx=="number"){var mx=0+fx*dx;if(mx>=-9007199254740991&&mx<=9007199254740991)return mx}return In(fx,dx)},gx.divide=function(fx,dx){return typeof fx=="number"&&typeof dx=="number"&&dx!==0?fx===0?0:fx>0&&dx>0||fx<0&&dx<0?0+Math.floor(fx/dx):0-Math.floor((0-fx)/dx):ix(fx,dx)},gx.remainder=function(fx,dx){return typeof fx=="number"&&typeof dx=="number"&&dx!==0?0+fx%dx:ax(fx,dx)},gx.unaryMinus=function(fx){return typeof fx=="number"?0-fx:sx(fx)},gx.equal=function(fx,dx){return typeof fx=="number"&&typeof dx=="number"?fx===dx:ux(fx,dx)},gx.lessThan=function(fx,dx){return typeof fx=="number"&&typeof dx=="number"?fx<dx:cx(fx,dx)},gx.greaterThan=function(fx,dx){return typeof fx=="number"&&typeof dx=="number"?fx>dx:hx(fx,dx)},gx.notEqual=function(fx,dx){return!gx.equal(fx,dx)},gx.lessThanOrEqual=function(fx,dx){return!gx.greaterThan(fx,dx)},gx.greaterThanOrEqual=function(fx,dx){return!gx.lessThan(fx,dx)},gx.exponentiate=function(fx,dx){if(typeof fx=="number"&&typeof dx=="number"&&dx>=0&&(dx<53||fx>=-1&&fx<=1)){var mx=0+Math.pow(fx,dx);if(mx>=-9007199254740991&&mx<=9007199254740991)return mx}return ox(fx,dx)},gx.signedRightShift=function(fx,dx){return cn(a.signedRightShift(ar(fx),ar(dx)))},gx.leftShift=function(fx,dx){if(typeof dx=="number"&&dx>=0){if(typeof fx=="number"){var mx=dx===0?fx:fx*Math.pow(2,dx);if(mx>=-9007199254740991&&mx<=9007199254740991)return mx}return a.leftShift(ar(fx),ar(dx))}return cn(a.leftShift(ar(fx),ar(dx)))},Symbol.hasInstance!=null&&Object.defineProperty(gx,Symbol.hasInstance,{value:function(fx){return typeof fx=="number"||fx instanceof a}}),globalThis.SmallBigInt=gx,globalThis.JSBI=n?t:globalThis.JSBI||globalThis.BigInteger,a=globalThis.JSBI,on()})();function Matrix$1(t){this.a=t}Matrix$1.Zero=function(t,n){for(var a=new Array(n),s=0;s<n;s+=1)a[s]=Expression.ZERO;for(var l=new Array(t),u=0;u<t;u+=1)l[u]=a;return new Matrix$1(l)};Matrix$1.I=function(t){return Matrix$1.Zero(t,t).map(function(n,a,s){return a===s?Expression.ONE:Expression.ZERO})};Matrix$1.prototype.rows=function(){return this.a.length};Matrix$1.prototype.cols=function(){return this.a.length>0?this.a[0].length:0};Matrix$1.prototype.e=function(t,n){return this.a[t][n]};Matrix$1.prototype.isSquare=function(){return this.rows()>0&&this.rows()===this.cols()};Matrix$1.prototype.map=function(t){for(var n=this.rows(),a=this.cols(),s=new Array(n),l=-1;++l<n;){for(var u=new Array(a),c=-1;++c<a;){var d=t.call(void 0,this.e(l,c),l,c,this);u[c]=d.simplifyExpression()}s[l]=u}return new Matrix$1(s)};Matrix$1.prototype.transpose=function(){var t=this;return Matrix$1.Zero(t.cols(),t.rows()).map(function(n,a,s){return t.e(s,a)})};Matrix$1.prototype.scale=function(t){return this.map(function(n,a,s){return n.multiply(t)})};Matrix$1.prototype.multiply=function(t){var n=this;if(n.cols()!==t.rows())throw new RangeError("DimensionMismatchException");return Matrix$1.Zero(n.rows(),t.cols()).map(function(a,s,l){for(var u=t.rows(),c=-1;++c<u;){//! this code is used to show not simplified expressions
var d=n.e(s,c).multiply(t.e(c,l));a=c===0?d:a.add(d)}return a})};Matrix$1.prototype.add=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())throw new RangeError("MatrixDimensionMismatchException");return n.map(function(a,s,l){return a.add(t.e(s,l))})};Matrix$1.prototype.augment=function(t){if(this.rows()!==t.rows())throw new RangeError("NonSquareMatrixException");var n=this;return Matrix$1.Zero(n.rows(),n.cols()+t.cols()).map(function(a,s,l){return l<n.cols()?n.e(s,l):t.e(s,l-n.cols())})};Matrix$1.prototype.rowReduce=function(t,n,a,s){for(var l=this.rows(),u=this.cols(),c=new Array(l),d=-1;++d<l;)if(t===d){for(var Ct=new Array(u),ar=s==null?this.e(t,a).divide(this.e(n,a)):void 0,en=-1;++en<u;){var tn=void 0;s==null?tn=this.e(t,en).subtract(ar.multiply(this.e(n,en))):tn=this.e(n,a).multiply(this.e(t,en)).subtract(this.e(t,a).multiply(this.e(n,en))).divide(s),Ct[en]=tn.simplifyExpression()}c[d]=Ct}else c[d]=this.a[d];return new Matrix$1(c)};Matrix$1.prototype.swapRows=function(t,n,a){var s=this;return s.map(function(l,u,c){return u===t?s.e(n,c):u===n?a?s.e(t,c).negate():s.e(t,c):l})};var notEqualsZero=function(t,n){if(n!=null){//!update from 2018-16-07
return n.andZero(t).isFalse()}return!t.equals(Expression.ZERO)};Matrix$1.check=function(t,n,a,s,l){for(var u=a;u<s;u+=1)if(t!=="solving"||notEqualsZero(n.e(u,n.cols()-1),l)){for(var c=t==="solving"?n.cols()-1:t==="determinant"?n.cols():t==="inverse"?Math.floor(n.cols()/2):-1,d=0;d<c&&n.e(u,d).equals(Expression.ZERO);)d+=1;if(d===c)return u}return-1};Matrix$1.toRowEchelonStep=function(t,n,a,s,l,u,c){var d=void 0,Ct=void 0,ar=0;if(s!==n&&(d=t,t=t.swapRows(n,s,u.usage==="determinant"),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:u.usage==="determinant"?"swap-negate":"swap",targetRow:n,pivotRow:s,pivotColumn:a})),u.method===Matrix$1.GaussJordan&&(t.e(n,a).equals(Expression.ONE)||(d=t,Ct=Expression.ONE.divide(t.e(n,a)),t=t.map(function(tn,on,cn){return on!==n?tn:tn.multiply(Ct)}),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:"divide",targetRow:n,pivotRow:n,pivotColumn:a}))),u.method===Matrix$1.Gauss||u.method===Matrix$1.GaussJordan){for(ar=n;++ar<t.rows();)if(!t.e(ar,a).equals(Expression.ZERO)){d=t,t=t.rowReduce(ar,n,a),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:"reduce",targetRow:ar,pivotRow:n,pivotColumn:a});var en=Matrix$1.check(u.usage,t,ar,ar+1,c);if(en!==-1)return{stoppedAtRow:en,matrix:t}}}if(u.method===Matrix$1.GaussMontante){for(d=t,ar=-1;++ar<t.rows();)ar!==n&&(t=t.rowReduce(ar,n,a,l));u.callback!=null&&u.callback({previousPivot:l,newMatrix:t,oldMatrix:d,type:"pivot",targetRow:-1,pivotRow:n,pivotColumn:a});var en=Matrix$1.check(u.usage,t,0,t.rows(),c);if(en!==-1)return{stoppedAtRow:en,matrix:t}}return{stoppedAtRow:-1,matrix:t}};Matrix$1.toRowEchelonBackSubstitution=function(t,n,a){if(a.method===Matrix$1.GaussJordan)for(;--n>=0;){for(var s=0;s<t.cols()&&t.e(n,s).equals(Expression.ZERO);)s+=1;if(s<t.cols()){for(var l=n;--l>=0;)if(!t.e(l,s).equals(Expression.ZERO)){var u=t;t=t.rowReduce(l,n,s),a.callback!=null&&a.callback({previousPivot:void 0,newMatrix:t,oldMatrix:u,type:"reduce",targetRow:l,pivotRow:n,pivotColumn:s})}}}return t};var isConditionValid=function(t,n){for(var a=0;a<n.rows();a++)for(var s=0;s<n.cols();s++){var l=n.e(a,s);if(!Polynomial._isIntegerLike(l)){if(Polynomial._isIntegerLike(l.getNumerator())){//!!! for performance
l=l.getDenominator().inverse()}if(t.andZero(l).isFalse()&&t.andNotZero(l).isFalse())return!1}}return!0};Matrix$1.Gauss="Gauss";Matrix$1.GaussJordan="Gauss-Jordan";Matrix$1.GaussMontante="Gauss-Montante";function ToRowEchelonOptions(t,n,a){if(n!=="determinant"&&n!=="inverse"&&n!=="solving"&&n!=="LU-decomposition"&&n!==""&&n!=="row-reduction")throw new RangeError;if(t!==Matrix$1.Gauss&&t!==Matrix$1.GaussJordan&&t!==Matrix$1.GaussMontante)throw new RangeError;this.method=t,this.usage=n,this.callback=a}Matrix$1.ToRowEchelonOptions=ToRowEchelonOptions;var COLUMN_LOOP=0,ZERO=1,NOT_ZERO=2;Matrix$1.prototype.toRowEchelon=function(t,n,a){var s=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(s,0,-1,-1,Expression.ONE,COLUMN_LOOP,void 0)};Matrix$1.prototype.toRowEchelonXXX=function(t,n,a,s){var l=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(l,0,-1,-1,Expression.ONE,COLUMN_LOOP,s)};Matrix$1.prototype.toRowEchelonInternal=function(t,n,a,s,l,u,c){var d=this;c!=null&&!c.isTrue()&&(d=d.map(function(In,ix,ax){return c.updateExpression(In)}),l=c.updateExpression(l));var Ct=Matrix$1.check(t.usage,d,0,d.rows(),c);if(Ct!==-1)return{stoppedAtRow:Ct,matrix:d,condition:c};for(;;)switch(u){case COLUMN_LOOP:if(a+=1,a>=d.cols())return d=Matrix$1.toRowEchelonBackSubstitution(d,n,t),{stoppedAtRow:-1,matrix:d,condition:c};if(a>n&&(t.usage==="determinant"||t.usage==="inverse"))return a>=Math.floor(d.cols()/2)&&t.usage==="inverse"?(d=Matrix$1.toRowEchelonBackSubstitution(d,n,t),{stoppedAtRow:-1,matrix:d,condition:c}):{stoppedAtRow:n,matrix:d,condition:c};s=n-1,u=ZERO;break;case ZERO:if(c==null)s+=1,s<d.rows()?d.e(s,a).equals(Expression.ZERO)?u=ZERO:u=NOT_ZERO:u=COLUMN_LOOP;else{s>=n&&(d=n>=d.rows()||d.e(n,a).equals(Expression.ZERO)?d:d.map(function(ix,ax,ox){return c.updateExpression(ix)}),l=c.updateExpression(l));var ar=!1;if(s===n-1){//!
for(var en=n;en<d.rows()&&!((c.andZero(d.e(en,a)).isFalse()||t.usage==="LU-decomposition")&&!d.e(en,a).equals(Expression.ZERO));)en+=1;en<d.rows()&&(s=en,ar=!0)}//!
if(ar)u=NOT_ZERO;else if(s+=1,s<d.rows()){var tn=d.e(s,a),on=c.andNotZero(tn),cn=c.andZero(tn);if(!cn.isFalse()){//!new 2020-01-03
if(!isConditionValid(cn,d)){debugger;cn=Condition.FALSE;//!!!
c=on;//!
}//!
}if(cn.isFalse())u=NOT_ZERO;else if(on.isFalse())u=ZERO;else{if(t.usage==="row-reduction"){var Cn=Matrix$1.toRowEchelonStep(d,n,a,s,l,Object.assign({},t,{callback:null}),c),dn=Cn.matrix.slice(s+1,d.rows(),a,d.cols()).map(function(ax,ox,sx){return cn.updateExpression(ax)});if(dn.eql(Matrix$1.Zero(dn.rows(),dn.cols())))return d.toRowEchelonInternal(t,n,a,s,l,NOT_ZERO,c)}return{matrix:d,c1:on,a1:function(){return d.toRowEchelonInternal(t,n,a,s,l,NOT_ZERO,on)},c2:cn,a2:function(){return d.toRowEchelonInternal(t,n,a,s,l,ZERO,cn)}}}}else u=COLUMN_LOOP}break;case NOT_ZERO:var Cn=Matrix$1.toRowEchelonStep(d,n,a,s,l,t,c),Ct=Cn.stoppedAtRow;if(d=Cn.matrix,Ct!==-1)return{stoppedAtRow:Ct,matrix:d,condition:c};l=d.e(n,a),n+=1,u=COLUMN_LOOP;break}};Matrix$1.prototype.determinant=function(){var t=this.rows();if(!this.isSquare()||t===0)throw new RangeError("NonSquareMatrixException");var n,a,s,n=this.toRowEchelon(Matrix$1.GaussMontante,"determinant",void 0),a=n.stoppedAtRow,s=n.matrix;return a!==-1?Expression.ZERO:s.e(t-1,t-1)};Matrix$1.prototype.rank=function(){for(var t=this.toRowEchelon(Matrix$1.GaussMontante,"",void 0).matrix,n=0,a=0,s=0;a<t.rows();){for(;s<t.cols()&&t.e(a,s).equals(Expression.ZERO);)s+=1;s<t.cols()&&(n+=1),a+=1}return n};Matrix$1.prototype.inverse=function(){if(!this.isSquare())throw new RangeError("NonSquareMatrixException");if(this.rows()===2){var t=this.e(0,0),n=this.e(0,1),a=this.e(1,0),s=this.e(1,1),l=t.multiply(s).subtract(n.multiply(a));if(l.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");return Matrix$1.Zero(this.rows(),this.rows()).map(function(c,d,Ct){return(d===0?Ct===0?s:n.negate():Ct===0?a.negate():t).divide(l)})}var u=this.augment(Matrix$1.I(this.rows()));return u=u.toRowEchelon(Matrix$1.GaussMontante,"inverse",void 0).matrix,Matrix$1.Zero(u.rows(),u.rows()).map(function(c,d,Ct){var ar=u.e(d,d);if(ar.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");var en=u.e(d,Ct+u.rows());return ar.equals(Expression.ONE)?en:en.divide(ar)})};Matrix$1.prototype.toString=function(t){var n="",a=this.rows(),s=this.cols();if(a===0&&s===0)throw new RangeError;var l=-1;for(n+="{";++l<a;){l!==0&&(n+=","),n+="{";for(var u=-1;++u<s;)u!==0&&(n+=","),n+=this.e(l,u).toString(t);n+="}"}return n+="}",n};Matrix$1.prototype.negate=function(){return this.map(function(t,n,a){return t.negate()})};Matrix$1.prototype.subtract=function(t){return this.add(t.negate())};Matrix$1.prototype.getElements=function(){for(var t=this.rows(),n=this.cols(),a=new Array(t),s=0;s<t;s+=1){for(var l=new Array(n),u=0;u<n;u+=1)l[u]=this.e(s,u).toString();a[s]=l}return a};Matrix$1.prototype.slice=function(t,n,a,s){var l=this;return Matrix$1.Zero(n-t,s-a).map(function(u,c,d){return l.e(c+t,d+a)})};Matrix$1.prototype.isExact=function(){for(var t=this.rows(),n=this.cols(),a=0;a<t;a+=1)for(var s=0;s<n;s+=1)if(!this.e(a,s).isExact())return!1;return!0};Matrix$1.prototype.eql=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())return!1;for(var a=0;a<n.rows();a+=1)for(var s=0;s<n.cols();s+=1)if(!n.e(a,s).equals(t.e(a,s)))return!1;return!0};Matrix$1.prototype.pow=function(t){if(!(t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError;var n=function(a,s,l){return s<1?l:2*Math.floor(s/2)!==s?n(a,s-1,l.multiply(a)):n(a.multiply(a),Math.floor(s/2),l)};return n(this,t,Matrix$1.I(this.rows()))};Matrix$1.split=function(t){t=t.replace(/\b(sin|cos)\x20/g,"$1");var n=[],a=t;if(/^\s*\[[^\[\]]*\]\s*$/.exec(a)!=null){//!
a=a.replace(/\[/g," "),a=a.replace(/\]/g," ")}//!
if(a.replace(/^\s+|\s+$/g,"")!==""){a=a.replace(/;/g,`
`),a=a.replace(/\r/g,`
`);var s=[];n.push(s);for(var l=0,u=void 0;(u=/^\s*\S+/.exec(a.slice(l)))!=null;){var c=u[0];c.indexOf(`
`)!==-1&&s.length!==0&&(s=[],n.push(s),c=c.replace(/\n/g," ")),s.push(c),l+=c.length}}//!new 2023-05-07
for(var d=0;d<n.length;d++)n[d].length===1&&/,/.test(n[d][0])&&(n[d]=n[d][0].split(","));return n};Matrix$1.padRows=function(t,n){for(var a=t.length,s=0,l=0;l<t.length;l+=1)s=Math.max(s,t[l].length);for(var u=new Array(a),c=0;c<a;c+=1){for(var d=t[c],Ct=new Array(s),ar=0;ar<s;ar+=1)Ct[ar]=ar<d.length?n!=null?n(d[ar]):d[ar]:Expression.ZERO;u[c]=Ct}return new Matrix$1(u)};Matrix$1.solveByGaussNext=function(t,n){for(var a=new Array(t.cols()-1),s=0;s<t.cols()-1;s+=1)a[s]=-1;for(var l=t.rows()-1;l>=0;l-=1){for(var u=0;u<t.cols()-1&&t.e(l,u).equals(Expression.ZERO);)u+=1;if(u<t.cols()-1){a[u]=l;for(var c=t,s=u+1;s<t.cols()-1;s+=1)if(!t.e(l,s).equals(Expression.ZERO)){var d=a[s];d!==-1&&(t=t.rowReduce(l,d,s))}var Ct=t;if(!t.e(l,u).equals(Expression.ONE)){var ar=t.e(l,u);t=t.map(function(en,tn,on){return tn===l?en.divide(ar):en})}n?.(t,c,Ct,l,u)}}return t};Matrix$1.getPivotRow=function(t,n){for(var a=t.rows()-1;a>=0&&t.e(a,n).equals(Expression.ZERO);)a-=1;if(a>=0){for(var s=n-1;s>=0&&t.e(a,s).equals(Expression.ZERO);)s-=1;if(s<0)return a}return-1};Matrix$1.getSolutionSet=function(t){for(var n={basisVectors:[],variables:[]},a=0;a<t.cols()-1;a+=1)if(Matrix$1.getPivotRow(t,a)===-1){for(var s=new Array(t.cols()-1),l=0;l<t.cols()-1;l+=1){var u=Matrix$1.getPivotRow(t,l);s[l]=u!==-1?t.e(u,a).negate():l===a?Expression.ONE:Expression.ZERO}var c=new Vector(s);n.basisVectors.push(c),n.variables.push(a)}return n};Matrix$1.prototype.minorMatrix=function(t,n){var a=this;return Matrix$1.Zero(this.rows()-1,this.cols()-1).map(function(s,l,u){return a.e(l<t?l:l+1,u<n?u:u+1)})};Matrix$1.toRowEchelonWithCallback=function(t,n,a,s,l){var u=t.toRowEchelonXXX(n,a,s,Condition.TRUE),c=function(d){d.c1==null&&d.c2==null?l(d):(c(d.a1()),c(d.a2()))};c(u)};Matrix$1.prototype.isDiagonal=function(){return this.eql(this.map(function(t,n,a){return n!==a?Expression.ZERO:t}))};Matrix$1.prototype.isScalar=function(){var t=this;return this.eql(this.map(function(n,a,s){return a!==s?Expression.ZERO:t.e(0,0)}))};Matrix$1.prototype.isNilpotent=function(){var t=this.map(function(n,a,s){return s<=a?Expression.ZERO:n});if(this.eql(t)){//! This method only tests if it nilpotent based on a property and so may return false for the positive result
return!0}return this.pow(this.cols()).eql(Matrix$1.Zero(this.cols(),this.cols()))};Matrix$1.prototype.isJordanMatrix=function(){var t=this;return this.eql(this.map(function(n,a,s){return a===s?n:s===a+1&&t.e(a,a).equals(t.e(a+1,a+1))&&!t.e(a,s).equals(Expression.ZERO)?Expression.ONE:Expression.ZERO}))};Matrix$1.prototype.isZero=function(){return this.eql(Matrix$1.Zero(this.rows(),this.cols()))};function Vector(t){this.elements=t}Vector.prototype.e=function(t){return this.elements[t]};Vector.prototype.dimensions=function(){return this.elements.length};Vector.prototype.rows=function(){return this.dimensions()};Vector.prototype.cols=function(){return 1};Vector.prototype.isExact=function(){for(var t=0;t<this.dimensions();t+=1)if(!this.e(t).isExact())return!1;return!0};Vector.prototype.toString=function(t){return Matrix$1.prototype.toString.call(this,t)};Vector.prototype.dot=function(t){let n=Expression.ZERO;for(let s=0;s<Math.max(this.dimensions(),t.dimensions());s+=1){var a=this.e(s).multiply(t.e(s).complexConjugate());n=n===Expression.ZERO?a:n.add(a)}return n};Vector.prototype.toUnitVector=function(){var t=this.dot(this).squareRoot();return this.scale(t.inverse())};Vector.prototype.scale=function(t){return new Vector(this.elements.map(n=>t.multiply(n)))};Vector.prototype.subtract=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions(),a=new Array(n);for(let s=0;s<n;s+=1)a[s]=this.e(s).subtract(t.e(s));return new Vector(a)};Vector.prototype.eql=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions();for(var a=0;a<n;a+=1)if(!this.e(a).equals(t.e(a)))return!1;return!0};Vector.Zero=function(t){return new Vector(new Array(t).fill(Expression.ZERO))};Matrix$1.Vector=Vector;Matrix$1.prototype.row=function(t){const n=new Array(this.cols());for(let a=0;a<this.cols();a+=1)n[a]=this.e(t,a);return new Vector(n)};Matrix$1.prototype.col=function(t){const n=new Array(this.rows());for(let a=0;a<this.rows();a+=1)n[a]=this.e(a,t);return new Vector(n)};function Heap(t){this.data=[],this.compareTo=t}Heap.prototype.push=function(t){var n=this.data,a=this.compareTo;n.push(t);for(var s=n.length,l=s-1,u=n[l],c=-1;l>0&&a(u,n[c=Math.floor((l-1)/2)])<0;)n[l]=n[c],l=c;n[l]=u};Heap.prototype.pop=function(){var t=this.data,n=this.compareTo,a=t.length;if(a!==0){if(a===1)return t.pop();var s=t[0];t[0]=t.pop(),--a;var l=0;if(l<a){var u=t[l];do{var c=a,d=u,Ct=l*2;++Ct<a&&n(t[Ct],d)<0&&(c=Ct,d=t[c]),++Ct<a&&n(t[Ct],d)<0&&(c=Ct,d=t[c]),t[l]=d,l=c}while(l<a)}return s}};Heap.prototype.peek=function(){var t=this.data;return t.length>0?t[0]:void 0};Heap.prototype.size=function(){var t=this.data;return t.length};Heap.prototype.replace=function(t){return this.data.push(t),this.pop()};const DefaultYField={ONE:1,sub:function(t,n){return t-n},mul:function(t,n){return t*n},div:function(t,n){return t/n},scale:function(t,n){return t*Number(n)}};let yField=DefaultYField;function NewtonInterpolation(){let t=function(){let Ct=[],ar=[],en=!0,tn=yField.ONE,on=yField.ONE,cn=!0;const dn={next:function(Cn){for(;;){if(cn)return cn=!1,{value:on,done:!1};const[In,ix]=Cn;if(en&&Ct.length>=2&&Ct[Ct.length-1]-Ct[Ct.length-2]!==In-Ct[Ct.length-1]){const ox=Ct[Ct.length-1]-Ct[Ct.length-2];tn=yField.ONE;for(let sx=1;sx<ar.length;sx+=1)tn=yField.scale(tn,ox*sx),ar[sx]=yField.div(ar[sx],tn);en=!1}let ax=ix;for(let ox=0;ox<ar.length;ox+=1){let sx=yField.sub(ax,ar[ox]);en||(sx=yField.div(sx,yField.scale(yField.ONE,In-Ct[Ct.length-1-ox]))),ar[ox]=ax,ax=sx}if(ar.push(ax),Ct.push(In),on=ar[ar.length-1],en&&Ct.length>=2){const ox=ar.length-1,sx=Ct[Ct.length-1]-Ct[Ct.length-2];tn=yField.scale(tn,sx*ox),on=yField.div(on,tn)}return{value:on,done:!1}}}};return dn[globalThis.Symbol.iterator]=function(){return this},dn};const n=yField.sub(yField.ONE,yField.ONE),a=yField.ONE;let s=t();s.next();let l=[a],u=[],c=!0;const d={next:function(Ct){for(;;){if(c)return c=!1,{value:u,done:!1};const[ar,en]=Ct,tn=yField.sub(n,s.next([ar,en]).value);u.push(n);for(let on=l.length-1;on>=0;on-=1)u[on]=yField.sub(u[on],yField.mul(l[on],tn));l.push(n);for(let on=l.length-1;on>=0;on-=1)l[on]=yField.sub(on>=1?l[on-1]:n,yField.scale(l[on],ar));return{value:u,done:!1}}}};return d[globalThis.Symbol.iterator]=function(){return this},d}NewtonInterpolation.setField=function(t){yField=t||DefaultYField};globalThis.NewtonInterpolation=NewtonInterpolation;var seedrandom$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom=seedrandom$1.exports,hasRequiredSeedrandom;function requireSeedrandom(){return hasRequiredSeedrandom||(hasRequiredSeedrandom=1,(function(t){(function(n,a,s){var l=256,u=6,c=52,d="random",Ct=s.pow(l,u),ar=s.pow(2,c),en=ar*2,tn=l-1,on;function cn(sx,ux,cx){var hx=[];ux=ux==!0?{entropy:!0}:ux||{};var gx=ix(In(ux.entropy?[sx,ox(a)]:sx??ax(),3),hx),fx=new dn(hx),dx=function(){for(var mx=fx.g(u),vx=Ct,bx=0;mx<ar;)mx=(mx+bx)*l,vx*=l,bx=fx.g(1);for(;mx>=en;)mx/=2,vx/=2,bx>>>=1;return(mx+bx)/vx};return dx.int32=function(){return fx.g(4)|0},dx.quick=function(){return fx.g(4)/4294967296},dx.double=dx,ix(ox(fx.S),a),(ux.pass||cx||function(mx,vx,bx,xx){return xx&&(xx.S&&Cn(xx,fx),mx.state=function(){return Cn(fx,{})}),bx?(s[d]=mx,vx):mx})(dx,gx,"global"in ux?ux.global:this==s,ux.state)}function dn(sx){var ux,cx=sx.length,hx=this,gx=0,fx=hx.i=hx.j=0,dx=hx.S=[];for(cx||(sx=[cx++]);gx<l;)dx[gx]=gx++;for(gx=0;gx<l;gx++)dx[gx]=dx[fx=tn&fx+sx[gx%cx]+(ux=dx[gx])],dx[fx]=ux;(hx.g=function(mx){for(var vx,bx=0,xx=hx.i,_x=hx.j,Ex=hx.S;mx--;)vx=Ex[xx=tn&xx+1],bx=bx*l+Ex[tn&(Ex[xx]=Ex[_x=tn&_x+vx])+(Ex[_x]=vx)];return hx.i=xx,hx.j=_x,bx})(l)}function Cn(sx,ux){return ux.i=sx.i,ux.j=sx.j,ux.S=sx.S.slice(),ux}function In(sx,ux){var cx=[],hx=typeof sx,gx;if(ux&&hx=="object")for(gx in sx)try{cx.push(In(sx[gx],ux-1))}catch{}return cx.length?cx:hx=="string"?sx:sx+"\0"}function ix(sx,ux){for(var cx=sx+"",hx,gx=0;gx<cx.length;)ux[tn&gx]=tn&(hx^=ux[tn&gx]*19)+cx.charCodeAt(gx++);return ox(ux)}function ax(){try{var sx;return on&&(sx=on.randomBytes)?sx=sx(l):(sx=new Uint8Array(l),(n.crypto||n.msCrypto).getRandomValues(sx)),ox(sx)}catch{var ux=n.navigator,cx=ux&&ux.plugins;return[+new Date,n,cx,n.screen,ox(a)]}}function ox(sx){return String.fromCharCode.apply(0,sx)}if(ix(s.random(),a),t.exports){t.exports=cn;try{on=require$$0}catch{}}else s["seed"+d]=cn})(typeof self<"u"?self:seedrandom,[],Math)})(seedrandom$1)),seedrandom$1.exports}requireSeedrandom();function combinations(t,n){const a=t.length;let s=new Array(n+1).fill(-1),l=new Array(n).fill(void 0),u=0,c={next:function(){for(;u>=0;)if(u<n){const d=s[u];d<a-n+u?(s[u]=d+1,l[u]=t[d+1],u+=1,s[u]=d+1):u-=1}else return u-=1,{value:l.slice(0),done:!1};return{value:void 0,done:!0}}};return c[globalThis.Symbol.iterator]=function(){return this},c}function modulo(t,n){return t-Math.floor(t/n)*n}function check(t){if(typeof t!="number"||Math.abs(t)>Number.MAX_SAFE_INTEGER)throw new RangeError}function schoolbook(t,n){const a=new Array(t.length===0||n.length===0?0:t.length-1+n.length-1+1);for(let s=0;s<a.length;s+=1){const l=Math.max(0,s-(n.length-1)),u=Math.min(s,t.length-1);let c=t[l]*n[s-l];for(let d=l+1;d<=u;d+=1)c+=t[d]*n[s-d];a[s]=c}return a}function absMax(t){let n=0;for(let a=0;a<t.length;a+=1)n=Math.max(n,Math.abs(t[a]));return n}function multiply(t,n){return check(absMax(t)*absMax(n)*Math.min(t.length,n.length)),schoolbook(t,n)}function IntPolynomial(t){let n=t.length;for(;n>0&&t[n-1]==0;)n-=1;t.length=n,check(absMax(t)),this.coefficients=t}IntPolynomial.prototype.add=function(t){const n=this.coefficients,a=t.coefficients,s=new Array(Math.max(n.length,a.length));for(let l=0;l<s.length;l+=1)l<n.length&&l<a.length?s[l]=n[l]+a[l]:l<n.length?s[l]=n[l]:s[l]=a[l];return new IntPolynomial(s)};IntPolynomial.prototype.subtract=function(t){return this.add(t.negate())};IntPolynomial.prototype.multiply=function(t){const n=this.coefficients,a=t.coefficients;return new IntPolynomial(multiply(n,a))};IntPolynomial.prototype.divideAndRemainderModP=function(t,n){const a=this.coefficients,s=t.coefficients;if(a.length<s.length)return{quotient:new IntPolynomial([]),remainder:this.mod(n)};if(s.length===0)throw new RangeError;const l=s[s.length-1];if(l!=1)throw new RangeError;check(n*n*s.length);const u=new Array(a.length);for(let ar=0;ar<a.length;ar+=1)u[ar]=a[ar];let c=u.length-1;const d=new Array(a.length-s.length+1),Ct=l-l;for(let ar=0;ar<d.length;ar+=1)d[ar]=Ct;for(;c>=s.length-1;){const ar=c-s.length+1,en=modulo(u[c],n);if(d[ar]=en,en!=0)if(en==1)for(let tn=0;tn<s.length;tn+=1)u[tn+ar]-=s[tn];else for(let tn=0;tn<s.length;tn+=1)u[tn+ar]-=en*s[tn];for(;c>=0&&modulo(u[c],n)==0;)u[c]=Ct,c-=1}for(let ar=0;ar<=c;ar+=1)u[ar]=modulo(u[ar],n);return{quotient:new IntPolynomial(d),remainder:new IntPolynomial(u)}};IntPolynomial.prototype.negate=function(t){return new IntPolynomial(this.coefficients.map(n=>n-n-n))};IntPolynomial.prototype.scale=function(t){return new IntPolynomial(this.coefficients.map(n=>n*t))};IntPolynomial.prototype.getDegree=function(){return this.coefficients.length-1};IntPolynomial.prototype.getLeadingCoefficient=function(){if(this.coefficients.length===0)throw new RangeError;return this.coefficients[this.coefficients.length-1]};IntPolynomial.prototype.getCoefficient=function(t){if(t>=this.coefficients.length)throw new RangeError;return this.coefficients[t]};IntPolynomial.prototype.derive=function(t){let n=new Array(this.coefficients.length-1);for(let a=0;a<n.length;a+=1)n[a]=(a+1)*this.coefficients[a+1];return new IntPolynomial(n)};IntPolynomial.prototype.mod=function(t){return new IntPolynomial(this.coefficients.map(n=>modulo(n,t)))};IntPolynomial.prototype.toString=function(){let t="",n=this.coefficients;for(let a=n.length-1;a>=0;a-=1)t+=n[a]>=0&&a!==n.length?"+":"",t+=n[a].toString(),a===1?t+="x":a!==0&&(t+="x^",t+=a);return t};IntPolynomial.from=function(t){return new IntPolynomial(t)};function toInt(t,n){return n instanceof Expression.Integer?Expression.Integer.fromBigInt(t):t}function fromInt(t){return t instanceof Expression.Integer?t:Expression.Integer.fromBigInt(t)}function toIntPolynomial(t,n){if(n instanceof Expression.Integer)return t.mod(n);for(var a=Expression.Integer.fromBigInt(n),s=new Array(t.getDegree()+1),l=0;l<s.length;l+=1)s[l]=t.getCoefficient(l).modulo(a).toBigInt();return IntPolynomial.from(s)}function fromIntPolynomial(t){for(var n=new Array(t.getDegree()+1),a=0;a<n.length;a+=1)n[a]=Expression.Integer.fromBigInt(t.getCoefficient(a));return Polynomial$1.from(n)}const isPrime$2=primeFactor._isPrime;function ExtendedEuclideanAlgorithm(t,n,a){t=t.mod(a),n=n.mod(a);let[s,l]=[t,n];const u=Polynomial$1.of(Expression.ZERO),c=Polynomial$1.of(a.divide(a));let[d,Ct]=[c,u],[ar,en]=[u,c];for(;l.getDegree()>=0;){const Cn=l.getLeadingCoefficient().modInverse(a),In=s.scale(Cn).mod(a).divideAndRemainderModP(l.scale(Cn).mod(a),a),ix=In.quotient;[s,l]=[l,In.remainder.scale(l.getLeadingCoefficient()).mod(a)],[d,Ct]=[Ct,d.subtract(ix.multiply(Ct)).mod(a)],[ar,en]=[en,ar.subtract(ix.multiply(en)).mod(a)]}const tn=s.getLeadingCoefficient().modInverse(a),on=s.scale(tn).mod(a),cn=d.scale(tn).mod(a),dn=ar.scale(tn).mod(a);return{U:cn,V:dn,gcd:on}}function modPow(t,n,a,s){let l=t,u=null;for(;!n.equals(Expression.ZERO);)n.remainder(Expression.TWO).equals(Expression.ZERO)?(n=n.truncatingDivide(Expression.TWO),l=l.multiply(l).mod(s).divideAndRemainderModP(a,s).remainder):(n=n.subtract(Expression.ONE),u==null?u=l:u=u.multiply(l).mod(s).divideAndRemainderModP(a,s).remainder);return u}function distinctDegreeFactorization(t,n){t=t.mod(n);let a=1;const s=[];let l=t;l=toMonic(l,n);const u=n,c=t.constructor.from([toInt(0,n),toInt(1,n)]);let d=modPow(c,fromInt(u),l,u);for(;l.getDegree()>=2*a;){const Ct=d.subtract(c).divideAndRemainderModP(l,u).remainder,ar=gcdOfPolynomialsOverFiniteField(l,Ct,u);ar.getDegree()!==0&&(s.push({factor:ar,degree:a}),l=l.divideAndRemainderModP(ar,u).quotient),a=a+1,d=modPow(d,fromInt(u),l,u)}return l.getDegree()>0&&s.push({factor:l,degree:l.getDegree()}),s.length===0&&s.push({factor:t,degree:1}),s}function randomBigInt0(t,n=Math.random){if(console.assert(Math.floor(t)===t),t<=52)return Math.floor(n()*2**t);const a=Math.ceil(t/104)*52;return(BigInt(randomBigInt0(t-a,n))<<BigInt(a))+BigInt(randomBigInt0(a,n))}function randomBigInt(t,n=Math.random){if(Number(t)<=2**52)return Math.floor(n()*Number(t));var a=Expression.Integer.fromBigInt(t).bitLength();return BigInt(randomBigInt0(a,n))*BigInt(t)>>BigInt(a)}function CantorZassenhausAlgorithm(t,n,a){t=t.mod(n),t=toMonic(t,n);const s=t.getDegree(),l=a,u=s/l,c=n;let d=[];d.push(t);const Ct=Math.seedrandom!=null?new Math.seedrandom("hello."):Math.random;for(;d.length<u;){const ar=t.constructor.from(new Array(s).fill(c).map(dn=>toInt(randomBigInt(fromInt(dn).toBigInt(),Ct),dn))),en=t.constructor.from([toInt(1,n)]),tn=fromInt(c)._pow(l).subtract(Expression.ONE).truncatingDivide(Expression.TWO),on=modPow(ar,tn,t,c).subtract(en).divideAndRemainderModP(t,c).remainder,cn=[];for(const dn of d){const Cn=gcdOfPolynomialsOverFiniteField(on,dn,c);Cn.getDegree()!==0&&Cn.getDegree()!==dn.getDegree()?(cn.push(Cn),cn.push(dn.divideAndRemainderModP(Cn,c).quotient)):cn.push(dn)}d=cn}return d}function factorizeOverTheFiniteField(t,n){if(!isFactorizationOverZpSquareFree(t,n))throw new RangeError("implemented only for square-free polynomials");let a=[];const s=distinctDegreeFactorization(t,n);for(const l of s){const u=CantorZassenhausAlgorithm(l.factor,n,l.degree);a=a.concat(u)}return a}function toMonic(t,n){if(t.getDegree()<0)return t;const a=toInt(fromInt(t.getLeadingCoefficient()).modInverse(fromInt(n)).toBigInt(),n);return t.scale(a).mod(n)}function gcdOfPolynomialsOverFiniteField(t,n,a){for(t=t.mod(a),n=n.mod(a),n=toMonic(n,a);n.getDegree()>=0;){let s=t.divideAndRemainderModP(n,a).remainder;s=toMonic(s,a),t=n,n=s}return t}function _gcdOfPolynomialsOverFiniteField0(t,n,a){return fromIntPolynomial(gcdOfPolynomialsOverFiniteField(toIntPolynomial(t,a),toIntPolynomial(n,a),a))}function isFactorizationOverZpSquareFree(t,n){const a=t;return gcdOfPolynomialsOverFiniteField(a,a.derive().mod(n),n).getDegree()===0}function factorizeOverTheIntegers(t,n=!0){const a=t;let s=null,l=null,u=null,c=!0,d=0,Ct=null,ar=0,en=0,tn=1,on=null;const cn={next:function(){if(t.getDegree()===0)return{value:null,done:!0};for(;t.getDegree()>1&&t.getCoefficient(0).equals(Expression.ZERO);){const ox=Polynomial$1.of(Expression.ZERO,Expression.ONE);return t=t.divideAndRemainder(ox,"undefined").quotient,{value:ox,done:!1}}if(t.getCoefficient(0).abs().bitLength()-t.getLeadingCoefficient().abs().bitLength()<-42){s==null&&(s=factorizeOverTheIntegers(t._exponentiateRoots(-1),n));const ox=s.next().value;return ox!=null?{value:ox._exponentiateRoots(-1),done:!1}:{value:null,done:!0}}if(t.isEven()&&a.getDegree()>=4){l==null&&(l=factorizeOverTheIntegers(t._exponentiateRoots(2),n));const ox=l.next().value;if(ox!=null){const sx=ox._exponentiateRoots(.5);return t=t.divideAndRemainder(sx,"undefined").quotient,{value:sx,done:!1}}}function dn(ox){return ox-Math.log2(Math.sqrt(Math.PI*Math.ceil(ox/2)))}function Cn(ox){return dn(ox.getDegree())+ox._log2hypot()}function In(ox){return Cn(ox)*.5}const ix=function(ox){return c?In(ox):Cn(ox)},ax=function(ox){let sx=ox,ux=sx;do{do sx=Expression.Integer.fromBigInt(sx).add(Expression.TWO).toBigInt();while(!isPrime$2(sx));n?ux=sx:ux=Expression.Integer.fromBigInt(sx)}while(t.getLeadingCoefficient().remainder(Expression.Integer.fromBigInt(sx)).equals(Expression.ZERO)||!isFactorizationOverZpSquareFree(toIntPolynomial(t,ux),ux));return ux};if(Ct==null){const ox=1+ix(t.scale(t.getLeadingCoefficient().abs()));n?d=ax(1):d=ax(Expression.TWO._pow(Math.ceil(ox)).add(Expression.ONE).toBigInt());const sx=n?2:0;if(sx!==0){let ux=d,cx=1/0;for(let hx=0;hx<sx&&cx>1;hx+=1){let gx=0;const fx=distinctDegreeFactorization(toIntPolynomial(t,d),d);for(const dx of fx)console.assert(dx.factor.getDegree()%dx.degree===0),gx+=dx.factor.getDegree()/dx.degree;cx>gx&&(ux=d,cx=gx),d=ax(d)}d=ux}if(Ct=factorizeOverTheFiniteField(toIntPolynomial(t,d),d).map(ux=>n?fromIntPolynomial(ux):ux),n&&Ct.length>15&&(c=!1),n){const ux=Math.ceil(ox/Math.log2(d)),cx=Expression.Integer.fromNumber(d);Ct[Ct.length-1]=Ct[Ct.length-1].scale(t.getLeadingCoefficient().modulo(cx)).mod(cx),Ct=HenselLifting(t,Ct,cx,ux),ar=cx._pow(ux),Ct=Ct.map(hx=>hx.scale(hx.getLeadingCoefficient().modulo(ar).modInverse(ar)).mod(ar))}else ar=d}//!new 2022-07-27
if(t.isEven()&&a.getDegree()>=4){if(u==null){for(let ox=0;ox<Ct.length;ox+=1)if(Ct[ox]!=null){Ct[ox].mod(ar);const sx=Ct[ox]._scaleRoots(Expression.ONE.negate()).mod(ar);let ux=!1;for(let cx=ox+1;cx<Ct.length&&!ux;cx+=1)Ct[cx]!=null&&Ct[cx].mod(ar).equals(sx)&&(Ct[cx]=null,ux=!0);if(!ux)return{value:null,done:!0}}Ct=Ct.filter(ox=>ox!=null);for(let ox=0;ox<Math.pow(2,Ct.length-1)&&u==null;ox+=1){const sx=Ct.map((cx,hx)=>Math.floor(ox/2**hx)%2===0?cx:cx._scaleRoots(Expression.ONE.negate()));let ux=!0;{const cx=t.getLeadingCoefficient();let hx=Expression.ZERO,gx=Expression.ZERO,fx=cx;for(const mx of sx){const vx=mx.getCoefficient(2),bx=mx.getCoefficient(1),xx=mx.getCoefficient(0);hx=hx.multiply(xx).add(gx.multiply(bx)).add(fx.multiply(vx)).modulo(ar),gx=gx.multiply(xx).add(fx.multiply(bx)).modulo(ar),fx=fx.multiply(xx).modulo(ar)}let dx=Polynomial$1.of(fx,gx,hx).mod2(ar);dx=dx.multiply(dx._scaleRoots(Expression.ONE.negate())),ux=dx.getCoefficient(2).abs().equals(t.getCoefficient(2).multiply(t.getLeadingCoefficient()).abs())}if(ux){const cx=productModQ(sx,ar).scale(t.getLeadingCoefficient()).mod2(ar).primitivePart(),hx=cx._scaleRoots(Expression.ONE.negate());cx.multiply(hx).equals(t)&&(u=[],u.push(cx),u.push(hx))}}}if(u!=null)for(;u.length>0;)return{value:u.pop(),done:!1};return{value:null,done:!0}}//!!! (number of factors depends on the choise of prime numbers)
for(;tn<=(c?Ct.length-1:Math.floor(Ct.length/2));tn+=1){on=combinations(Ct,tn);let ox=null;for(;(ox=on.next().value)!=null;){en+=1;const sx=t.getLeadingCoefficient();let ux=sx;for(const cx of ox)ux=ux.multiply(cx.getCoefficient(0)).modulo(ar);if(ux=Polynomial$1.of(ux).mod2(ar).getCoefficient(0),t.getCoefficient(0).multiply(sx).remainder(ux).equals(Expression.ZERO)){let cx=productModQ(ox,ar);console.assert(cx.getLeadingCoefficient().equals(Expression.ONE)),cx=cx.scale(sx),cx=cx.mod2(ar),console.assert(cx.getDegree()<t.getDegree());const hx=t.scale(sx).divideAndRemainder(cx,"undefined");if(hx!=null&&hx.remainder.getDegree()<0){cx=cx.primitivePart(),Ct=Ct.filter(gx=>ox.indexOf(gx)===-1),on=combinations(Ct,tn);//!?
return t=hx.quotient,en>16&&console.debug(en),{value:cx,done:!1}}}}}if(en>16&&console.debug(en),a.getDegree()>t.getDegree()){const ox=t.primitivePart();return t=Polynomial$1.of(t.getContent()),{value:ox,done:!1}}return{value:null,done:!0}}};return cn[globalThis.Symbol.iterator]=function(){return this},cn}function HenselLift(t,n,a,s,l,u,c){console.assert(u.isDivisibleBy(c));const d=t.subtract(n.multiply(a)).scale(u.inverse()).mod(c),Ct=l.multiply(d).mod(c).divideAndRemainderModP(n.mod(c),c),ar=Ct.quotient,en=Ct.remainder,tn=s.multiply(d).add(a.mod(c).multiply(ar)).mod(c),on=n.add(en.scale(u)),cn=a.add(tn.scale(u));return[on,cn]}function QuadraticHenselLift(t,n,a,s,l){const u=l.divide(l),c=Polynomial$1.of(u).subtract(a.multiply(t)).subtract(s.multiply(n)).scale(l.inverse()).mod(l),d=s.multiply(c).mod(l).divideAndRemainderModP(t.mod(l),l),Ct=d.quotient,ar=a.multiply(c).add(n.mod(l).multiply(Ct)).mod(l),en=d.remainder,tn=a.add(ar.scale(l)),on=s.add(en.scale(l));return[tn,on]}function HenselLiftingOfTwoFactors(t,n,a,s,l){const u=ExtendedEuclideanAlgorithm(n,a,s);console.assert(u.gcd.getDegree()===0);let c=u.U,d=u.V;if(!(s instanceof Expression.Polynomial)){const en=s;let tn=1;for(;tn<l/4;){[n,a]=HenselLift(t,n,a,c,d,s,s),[c,d]=QuadraticHenselLift(n,a,c,d,s),s=s.multiply(s),tn*=2;{let dn=1;for(;tn*dn<l;)dn*=2;(tn-1)*dn>=l&&(tn-=1,s=s.divide(en))}}let on=tn,cn=s;for(;tn<l;)[n,a]=HenselLift(t,n,a,c,d,cn,s),cn=cn.multiply(s),tn+=on;if(tn!==l){const dn=en._pow(l);n=n.mod(dn),a=a.mod(dn)}return[n,a]}let ar=s;for(let en=1;en<l;en+=1)[n,a]=HenselLift(t,n,a,c,d,ar,s),ar=ar.multiply(s);return[n,a]}function productModQ(t,n){return console.assert(t.length>0),t.length>1?productModQ(t.slice(0,Math.ceil(t.length/2)),n).multiply(productModQ(t.slice(Math.ceil(t.length/2)),n)).mod(n):t[0]}function HenselLifting(t,n,a,s){if(n.length===1)return[t];const l=Math.ceil(n.length/2),u=n.slice(0,l),c=n.slice(l),[d,Ct]=HenselLiftingOfTwoFactors(t,productModQ(u,a),productModQ(c,a),a,s);return HenselLifting(d,u,a,s).concat(HenselLifting(Ct,c,a,s))}factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0=_gcdOfPolynomialsOverFiniteField0;function factorizeMultivariateIntegerPolynomial(t){function n(on){var cn=[];on=on.primitivePart();var dn=on.getDegree()>1?on.hasIntegerCoefficients()?factorizeOverTheIntegers(on).next().value:on.factorize():null;return dn!=null?(cn=cn.concat(n(dn)),cn=cn.concat(n(on.divideAndRemainder(dn,"throw").quotient))):cn.push(on),cn}for(var a=0,s=0;s<=t.getDegree();s+=1)t.getCoefficient(s).equals(Expression.ZERO)||(a=Math.max(a,t.getCoefficient(s).polynomial.getDegree()));for(var l=0;;l+=1){var u=t.map(on=>on.polynomial.calcAt(Expression.Integer.fromNumber(l)));if(u.getDegree()===t.getDegree()&&u.isSquareFreePolynomial()){var c=Array.from(n(u)).map(cn=>cn.map(dn=>new Expression.Polynomial(Polynomial$1.of(dn))));if(c.length<2)return null;var d=new Expression.Polynomial(Polynomial$1.of(u.getContent()));c[c.length-1]=c[c.length-1].scale(d);const on=new Expression.Polynomial(Polynomial$1.of(Expression.Integer.fromNumber(0-l),Expression.ONE));var Ct=on._pow(a+1);c=HenselLifting(t,c,on,a+1),console.assert(t.subtract(productModQ(c,Ct)).mod(Ct).toString()==="0");for(var ar=1;ar<=c.length-1;ar+=1)for(var en of combinations(c,ar)){var tn=productModQ(en,Ct);if(tn=tn.scale(t.getLeadingCoefficient()).mod(Ct),tn._hasIntegerLikeCoefficients()&&(tn=tn.primitivePart(),t.scale(t.getLeadingCoefficient()._pow(t.getDegree()-tn.getDegree()+1)).isDivisibleBy(tn)))return tn}}}}factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial=factorizeMultivariateIntegerPolynomial;factorizeOverTheIntegers.testables={gcdOfPolynomialsOverFiniteField,distinctDegreeFactorization,CantorZassenhausAlgorithm,isFactorizationOverZpSquareFree,factorizeOverTheFiniteField,modPow,randomBigInt,ExtendedEuclideanAlgorithm,HenselLift,QuadraticHenselLift,HenselLiftingOfTwoFactors,HenselLifting,productModQ};const isPrime$1=primeFactor._isPrime,freeze=t=>t;function PolynomialData(t){this.degrees=new Array(t),this.coefficients=new Array(t),this.size=0}PolynomialData.prototype.add=function(t,n){const a=this.size;if(!(Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError("NotSupportedError");if(a>0&&!(t<this.degrees[a-1])||a>=this.degrees.length||a>=this.coefficients.length)throw new RangeError;this.degrees[a]=t,this.coefficients[a]=n,this.size=a+1};PolynomialData.prototype.degree=function(t){return this.degrees[t]};PolynomialData.prototype.coefficient=function(t){return this.coefficients[t]};PolynomialData.prototype.trim=function(){return this.size<Math.max(this.degrees.length,this.coefficients.length)&&(this.degrees.length=this.size,this.coefficients.length=this.size),this};function Polynomial$1(t){this.a=t.trim()}Polynomial$1.of=function(){for(var t=new PolynomialData(arguments.length),n=arguments.length-1;n>=0;n-=1){var a=arguments[n];a.equals(Expression.ZERO)||t.add(n,a)}return new Polynomial$1(t)};Polynomial$1.from=function(t){for(var n=new PolynomialData(t.length),a=t.length-1;a>=0;a-=1){var s=a,l=t[a];l.equals(Expression.ZERO)||n.add(s,l)}return new Polynomial$1(n)};Polynomial$1.ZERO=Polynomial$1.of();Polynomial$1.prototype.getDegree=function(){return this.a.size===0?-1:this.a.degree(0)};Polynomial$1.prototype.getCoefficient=function(t){for(var n=0,a=this.a.size;n<a;){var s=n+Math.floor((a-n)/2),l=this.a.degree(s);if(l>t)n=s+1;else if(l<t)a=s;else return this.a.coefficient(s)}return Expression.ZERO};Polynomial$1.prototype.getLeadingCoefficient=function(){return this.a.size===0?Expression.ZERO:this.a.coefficient(0)};Polynomial$1.prototype.map=function(t){if(t.length!==1)throw new RangeError("deprecated");const n=new PolynomialData(this.a.size);for(let a=0;a<this.a.size;a+=1){const s=this.a.degree(a),l=this.a.coefficient(a),u=t(l);u.equals(Expression.ZERO)||n.add(s,u)}return new Polynomial$1(n)};Polynomial$1.prototype.equals=function(t){if(t===Expression.ZERO)return this.a.size===0;if(this.a.size!==t.a.size)return!1;for(var n=0,a=0;n<this.a.size&&a<t.a.size;){if(this.a.degree(n)!==t.a.degree(a)||!this.a.coefficient(n).equals(t.a.coefficient(a)))return!1;n+=1,a+=1}return!0};function _join(t,n,a){const s=new PolynomialData(t.a.size+n.a.size);let l=-1,u=-2,c=Expression.ZERO,d=-1,Ct=-2,ar=Expression.ZERO;for(;u!==-1||Ct!==-1;){const en=Math.max(u,Ct);if(en!==-2){const tn=a(u>=Ct?c:Expression.ZERO,Ct>=u?ar:Expression.ZERO);(u!==Ct||!tn.equals(Expression.ZERO))&&s.add(en,tn)}u===en&&(l+=1,l<t.a.size?(u=t.a.degree(l),c=t.a.coefficient(l)):(u=-1,c=Expression.ZERO)),Ct===en&&(d+=1,d<n.a.size?(Ct=n.a.degree(d),ar=n.a.coefficient(d)):(Ct=-1,ar=Expression.ZERO))}return new Polynomial$1(s)}Polynomial$1.prototype.add=function(t){return t.a.size===0?this:this.a.size===0?t:_join(this,t,function(n,a){return n===Expression.ZERO?a:a===Expression.ZERO?n:n.add(a)})};function split_at(t,n){var a=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n));return[a.quotient,a.remainder]}const KARATSUBA_THRESHOLD=12;function karatsuba(t,n){if(t.a.size<KARATSUBA_THRESHOLD||n.a.size<KARATSUBA_THRESHOLD)return t.multiply(n);const a=n.a.size>t.a.size?n.a.degree(Math.floor(n.a.size/2)):t.a.degree(Math.floor(t.a.size/2)),[s,l]=split_at(t,a),[u,c]=split_at(n,a),d=karatsuba(l,c),Ct=karatsuba(l.add(s),c.add(u)),ar=karatsuba(s,u);return ar.shift(a*2).add(Ct.subtract(ar).subtract(d).shift(a)).add(d)}function coefficientsBound(t,n=!1){function a(c,d){if(d.a.size<4)return c+1;const Ct=Math.floor(d.a.size/2);return c===0?Ct:c===Ct?Ct+1:c===Ct+1?d.a.size-1:c+1}let s=Expression.ZERO,l=Expression.ZERO;for(let c=0;c<t.a.size;c=n?a(c,t):c+1){const d=t.a.coefficient(c);d.compareTo(s)>0?s=d:d.compareTo(l)<0&&(l=d)}return(l.negate().compareTo(s)<0?s:l.negate()).bitLength()}let supportsLargeBigintCache;function supportsLargeBigint(){if(supportsLargeBigintCache==null)try{supportsLargeBigintCache=Expression.ONE.leftShift(2**20).compareTo(Expression.ZERO)>0}catch{supportsLargeBigintCache=!1}return supportsLargeBigintCache}function hasFastBigIntMultiplication(){return supportsLargeBigint()}function multiplyByKroneckerSubstitution(t,n){function a(tn,on){function cn(ix,ax,ox){const sx=ox-ax;if(sx>=2){const ux=Math.ceil(sx/2);return cn(ix,ax+ux,ox).leftShift(on*ux).add(cn(ix,ax,ax+ux))}else return sx===1?ix[ax]:Expression.ZERO}const dn=new Array(tn.getDegree()+1);for(let ix=0;ix<=tn.getDegree();ix+=1)dn[ix]=tn.getCoefficient(ix);const Cn=Expression.ONE.leftShift(on),In=Expression.ONE.negate();for(let ix=0;ix<dn.length;ix+=1)dn[ix].compareTo(Expression.ZERO)<0&&(dn[ix]=Cn.add(dn[ix]),dn[ix+1]=dn[ix+1].add(In));return cn(dn,0,dn.length)}function s(tn,on,cn){const dn=cn,Cn=new Array(dn);function In(sx,ux,cx){const hx=cx-ux;if(hx>=2){const gx=Math.ceil(hx/2),fx=sx.leftShift(0-on*gx),dx=sx.asUintN(on*gx);In(dx,ux,ux+gx),In(fx,ux+gx,cx)}else console.assert(hx===1),Cn[ux]=sx}In(tn,0,dn);const ix=Expression.ONE.leftShift(on),ax=ix.negate(),ox=ix.leftShift(-1);for(let sx=0;sx<Cn.length;sx+=1){let ux=Cn[sx];ux.compareTo(ox)>=0&&(Cn[sx]=ux.add(ax),Cn[sx+1]=Cn[sx+1].add(Expression.ONE))}return Polynomial$1.from(Cn)}const l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());l>1&&(t=t._exponentiateRoots(l),n=n._exponentiateRoots(l));let u=!1;if(t.getLeadingCoefficient().sign()<=0){if(t.getLeadingCoefficient().sign()===0)return t.multiply(n);t=t.negate(),u=!u}if(n.getLeadingCoefficient().sign()<=0){if(n.getLeadingCoefficient().sign()===0)return t.multiply(n);n=n.negate(),u=!u}const c=coefficientsBound(t),d=coefficientsBound(n),Ct=Math.ceil((Math.max(c,d)*2+Math.ceil(Math.log2(Math.min(t.getDegree()+1,n.getDegree()+1)))+1)/1)*1;let ar=Expression.ZERO;const en=(t.getDegree()+n.getDegree()+1)*Ct;return en>=2**30||en>=2**20&&!supportsLargeBigint()?ar=karatsuba(t,n):ar=s(a(t,Ct).multiply(a(n,Ct)),Ct,t.getDegree()+n.getDegree()+1),l>1&&(ar=ar._exponentiateRoots(1/l)),u&&(ar=ar.negate()),ar}function multiplyInternal(t,n,a){var s=t.getDegree()+n.getDegree()+1;if((t.a.size+n.a.size+Math.min(t.a.size,n.a.size))*4>=s){for(var l=new Array(s).fill(Expression.ZERO),u=0;u<t.a.size;u+=1)for(var c=t.a.degree(u),d=t.a.coefficient(u),Ct=0;Ct<n.a.size;Ct+=1){var ar=n.a.degree(Ct),en=n.a.coefficient(Ct),tn=c+ar,on=a?d.multiply(en):en.multiply(d);l[tn]=l[tn].add(on)}return Polynomial$1.from(l)}else{for(var l=new FastAdditionPolynomial,u=0;u<t.a.size;u+=1){var c=t.a.degree(u),d=t.a.coefficient(u);l.add(d,c,n,a)}return l.toPolynomial()}}globalThis.counter9=0;Polynomial$1.prototype.multiply=function(t){if(this.a.size===0||t.a.size===0)return Polynomial$1.ZERO;if(t.a.size===1&&t.a.coefficient(0)instanceof Expression.Integer)return this.shift(t.a.degree(0)).scale(t.a.coefficient(0));if(this.a.size>=16&&t.a.size>=16&&this.hasIntegerCoefficients()&&t.hasIntegerCoefficients()){var n=this,a=t,s=Math.gcd(n.getGCDOfTermDegrees(),a.getGCDOfTermDegrees()),l=Math.min(n.getDegree(),a.getDegree()),u=Math.min((n.a.size-1)/n.getDegree(),(a.a.size-1)/a.getDegree());const c=coefficientsBound(n,!0),d=coefficientsBound(a,!0);if(Math.max(c,d)>=32&&Math.max(c,d)<=256&&u>=.8&&l>=16||hasFastBigIntMultiplication()&&l*u>=64||hasFastBigIntMultiplication()&&l*u*Math.min(c,d)*Math.pow(u*s,2)>=64*1024)return globalThis.counter9+=1,multiplyByKroneckerSubstitution(n,a)}return t.a.size>=KARATSUBA_THRESHOLD&&this.a.size>=KARATSUBA_THRESHOLD?karatsuba(this,t):this.a.size<=t.a.size?multiplyInternal(this,t,!0):multiplyInternal(t,this,!1)};Polynomial$1.prototype.shift=function(t){if(!(t>=0))throw new TypeError;if(t===0)return this;for(var n=new PolynomialData(this.a.size),a=0;a<this.a.size;a+=1)n.add(this.a.degree(a)+t,this.a.coefficient(a));return new Polynomial$1(n)};function FastAdditionPolynomial(){this.maxHeap=new Heap((t,n)=>n.degree-t.degree),this.degree=-1,this.leadingCoefficient=Expression.ZERO}FastAdditionPolynomial.prototype.add=function(t,n,a,s){let l=0;var u={next:function(){if(l===a.a.size)return;const ar=a.a.degree(l),en=a.a.coefficient(l);return l+=1,freeze({degree:ar+n,coefficient:en===Expression.ONE?t:t===Expression.ONE?en:s?t.multiply(en):en.multiply(t),iterator:u})}},c=u.next();if(c.degree>this.degree&&this.degree!==-1)throw new RangeError;if(c.degree<this.degree)this.maxHeap.push(c);else{for(this.degree===-1?(this.leadingCoefficient=c.coefficient,this.degree=c.degree):this.leadingCoefficient=this.leadingCoefficient.add(c.coefficient),c=c.iterator.next(),c!=null&&this.maxHeap.push(c);this.maxHeap.size()>0&&(this.degree===this.maxHeap.peek().degree||this.leadingCoefficient.equals(Expression.ZERO));){var d=this.maxHeap.peek();this.leadingCoefficient=this.leadingCoefficient.add(d.coefficient),this.degree=d.degree;var Ct=d.iterator.next();Ct!=null?this.maxHeap.replace(Ct):this.maxHeap.pop()}this.maxHeap.size()===0&&this.leadingCoefficient.equals(Expression.ZERO)&&(this.degree=-1)}};FastAdditionPolynomial.prototype.getDegree=function(){return this.degree};FastAdditionPolynomial.prototype.getLeadingCoefficient=function(){return this.leadingCoefficient};FastAdditionPolynomial.prototype.toPolynomial=function(){for(var t=[],n=Polynomial$1.of(Expression.ONE);this.getDegree()>=0;){var a=this.getDegree(),s=this.getLeadingCoefficient();this.add(s.negate(),a,n,!0),t.push({degree:a,coefficient:s})}return Polynomial$1.fromTerms(t)};Polynomial$1.prototype.divideAndRemainder=function(t,n,a){if(n=n||void 0,t.equals(Polynomial$1.ZERO))throw new TypeError("ArithmeticException");if(this.getDegree()<t.getDegree())return{quotient:Polynomial$1.ZERO,remainder:this};if(t.a.size===1&&t.a.coefficient(0).equals(Expression.ONE)&&(n==null||this._hasIntegerLikeCoefficients())){if(t.a.degree(0)===0)return{quotient:this,remainder:Polynomial$1.ZERO};for(var s=t.a.degree(0),l=0;this.a.degree(l)>=s&&l<this.a.size;)l+=1;for(var u=new PolynomialData(l),c=0;c<l;c+=1)u.add(this.a.degree(c)-s,this.a.coefficient(c));for(var d=new PolynomialData(this.a.size-l),c=l;c<this.a.size;c+=1)d.add(this.a.degree(c),this.a.coefficient(c));return{quotient:new Polynomial$1(u),remainder:new Polynomial$1(d)}}const Ct=t.getLeadingCoefficient(),ar=Ct instanceof Expression.ExpressionWithPolynomialRoot?Ct.inverse():void 0;if(t.a.size===1&&t.a.degree(0)===0&&ar==null&&(n==null||n==="throw"))return{quotient:this.map(function(In){var ix=In.divide(Ct);if(n!=null&&ix instanceof Expression.Division)throw new RangeError;return ix}),remainder:Polynomial$1.ZERO};var en=[],tn=this.a.size/this.getDegree()<1/4&&a==null,on=this;tn&&(on=new FastAdditionPolynomial,on.add(Expression.ONE,0,this,!0));const cn=t.negate();for(;on.getDegree()>=t.getDegree();){var dn=on.getDegree()-t.getDegree(),Cn=on.getLeadingCoefficient(),u=ar==null?Cn.divide(Ct):Cn.multiply(ar);if(a!=null&&(u=a(u)),n!=null&&u instanceof Expression.Division){if(n==="throw")throw new TypeError(this.toString()+" "+t.toString());if(n==="undefined")return;throw new TypeError}if(en.push({degree:dn,coefficient:u}),tn?on.add(u,dn,cn,!0):u instanceof Expression.Integer?on=on.add(cn.shift(dn).scale(u)):on=on.add(Polynomial$1.of(u).shift(dn).multiply(cn)),a!=null)for(;on.getDegree()>=0&&a(on.getLeadingCoefficient()).equals(Expression.ZERO);)on=on.subtract(Polynomial$1.of(on.getLeadingCoefficient()).shift(on.getDegree()));if(on.getDegree()-t.getDegree()===dn){throw new TypeError("there is a some problem with the expression evaluation");//!
}}return tn&&(on=on.toPolynomial()),{quotient:Polynomial$1.fromTerms(en),remainder:on}};Polynomial$1.prototype.divideAndRemainderModP=function(t,n){const a=t.getLeadingCoefficient();if(!(a instanceof Expression.Polynomial)&&!a.equals(Expression.ONE)||a instanceof Expression.Polynomial&&a.polynomial.getDegree()!==0)throw new RangeError;const s=this.divideAndRemainder(t,"throw",l=>l.modulo(n));return{quotient:s.quotient,remainder:s.remainder.mod(n)}};Polynomial$1.pseudoRemainder=function(t,n){var a=t.getDegree()-n.getDegree();if(a<0)throw new RangeError;return t.scale(n.getLeadingCoefficient()._pow(a+1)).divideAndRemainder(n,"throw").remainder};Polynomial$1.polynomialGCD=function(t,n){let a=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(a>1)return Polynomial$1.polynomialGCD(t._exponentiateRoots(a),n._exponentiateRoots(a))._exponentiateRoots(1/a);//!optimization 2021-03-15
if(n.getDegree()>0&&t.getDegree()>0){var s=function(cn){for(var dn=0;cn.getCoefficient(dn).equals(Expression.ZERO);)dn+=1;return dn},l=s(n),u=s(t);if(l!==0||u!==0)return Polynomial$1.polynomialGCD(t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(u),void 0).quotient,n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(l),void 0).quotient).shift(Math.min(l,u))}//!
if(t.getDegree()<n.getDegree()){//!!!
var c=t;t=n,n=c}if(n.equals(Polynomial$1.ZERO))return t;//!
if(t.getDegree()===1&&n.getDegree()===0)return Polynomial$1.of(n.getCoefficient(0).gcd(t.getCoefficient(0)).gcd(t.getCoefficient(1)));//!
var d=t.getContent(),Ct=n.getContent(),ar=t.divideAndRemainder(Polynomial$1.of(d),"throw").quotient,en=n.divideAndRemainder(Polynomial$1.of(Ct),"throw").quotient,tn=gcdOfPrimitivePolynomials(ar,en),on=d.gcd(Ct);return Polynomial$1.of(on).multiply(tn)};function hasQuadraticInteger(t){return t instanceof Expression.NthRoot?!(t instanceof Expression.Integer):t instanceof Expression.ExponentiationOfMinusOne?!0:t instanceof Expression.BinaryOperation?hasQuadraticInteger(t.a)||hasQuadraticInteger(t.b):(t instanceof Expression.Integer||t instanceof Expression.Symbol||t instanceof Expression.Complex,!1)}var getY=function(t,n){for(var a={},s=0;s<t.a.size;s++){var l=t.a.coefficient(s),u=Expression.getVariable(l,{avoidNthRoots:!0});if(u!=null){if(u instanceof Expression.ExpressionWithPolynomialRoot){return null;//!?
}if(Expression.isConstant(u)&&u!==Expression.E&&u!==Expression.PI)return null;if(u instanceof Expression.Polynomial){return null;//!?
}u instanceof Expression.Symbol&&(a[u.symbol]?u=null:a[u.symbol]=!0);for(var c=0;c<t.a.size&&u!=null;c+=1)Expression._getReplacement(t.a.coefficient(c),u).equals(u)||(u=null);for(var c=0;c<n.a.size&&u!=null;c+=1)Expression._getReplacement(n.a.coefficient(c),u).equals(u)||(u=null);if(u!=null)return u}}return null};Polynomial$1._getY=getY;function gcdOfPrimitivePolynomials(t,n){return console.assert(t.getDegree()>=n.getDegree()),t.hasIntegerCoefficients()&&n.hasIntegerCoefficients()&&n.getDegree()>2?t.isDivisibleBy(n)?n:gcdByModularAlgorithm(t,n):n.getDegree()>1&&(getY(t,n)!=null||getY(n,t)!=null)?gcdByMultivariateModularAlgorithm(t,n):n.getDegree()>2?gcdUsingPseudoRemainderSequence(t,n,"subresultant").primitivePart():!t._testCoefficients(a=>hasQuadraticInteger(a))&&!n._testCoefficients(a=>hasQuadraticInteger(a))&&n.getDegree()>0?gcdUsingPseudoRemainderSequence(t,n,"primitive"):n.getDegree()===0?Polynomial$1.of(Expression.ONE):gcdUsingRemainderSequence(t,n).primitivePart()}function gcdUsingRemainderSequence(t,n){for(;!n.equals(Polynomial$1.ZERO);){const a=t.divideAndRemainder(n).remainder;t=n,n=a}return t}function gcdUsingPseudoRemainderSequence(t,n,a){let s=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(s>1)return gcdUsingPseudoRemainderSequence(t._exponentiateRoots(s),n._exponentiateRoots(s),a)._exponentiateRoots(1/s);for(var l of Polynomial$1._pseudoRemainderSequence(t,n,a)){var u=l.R;t=n,n=u}var c=t;return c}Polynomial$1._gcdUsingPseudoRemainderSequence=gcdUsingPseudoRemainderSequence;function ChineseRemainderTheorem(t,n){const a=t.remainder(n).modInverse(n);return function(s,l){return s.add(l.subtract(s.modulo(n)).multiply(a).modulo(n).multiply(t))}}globalThis.ChineseRemainderTheorem=ChineseRemainderTheorem;function ChineseRemainderTheoremForPolynomialCoefficients(t,n,a,s){const l=ChineseRemainderTheorem(a,s);return _join(t,n,(u,c)=>l(u,c))}globalThis.ChineseRemainderTheoremForPolynomialCoefficients=ChineseRemainderTheoremForPolynomialCoefficients;Polynomial$1.prototype._exponentiateRoots=function(t){if(t===-1){if(this.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;for(var n=new PolynomialData(this.a.size),a=this.a.size-1;a>=0;a-=1)n.add(this.getDegree()-this.a.degree(a),this.a.coefficient(a));var s=new Polynomial$1(n);if(s.getLeadingCoefficient()instanceof Expression.Integer&&s.getLeadingCoefficient().sign()<0){s=s.negate();//!!!
}return s}const l=Math.floor(1/t+.5);if(Math.floor(t)===t&&t>=2||1/l===t&&l>=2){for(var n=new PolynomialData(this.a.size),u=0;u<this.a.size;u+=1){if(Math.floor(t)===t&&this.a.degree(u)%t!==0)throw new RangeError;n.add(Math.floor(t)===t?this.a.degree(u)/t:this.a.degree(u)*l,this.a.coefficient(u))}return new Polynomial$1(n)}throw new RangeError(t)};Polynomial$1.prototype._scaleRoots=function(t){const n=t.getNumerator(),a=t.getDenominator(),s=this.getDegree();let l=Expression.ONE,u=0;const c=new PolynomialData(this.a.size);for(let d=0;d<this.a.size;d+=1){const Ct=this.a.degree(d),ar=this.a.coefficient(d);l=l.multiply(n._pow(s-Ct-u)),u=s-Ct,c.add(Ct,l.multiply(a._pow(Ct)).multiply(ar))}return new Polynomial$1(c)};Polynomial$1.prototype._translateRoots=function(t){if(t.equals(Expression.ONE.negate())){const a=this,s=a.getDegree(),l=new Array(s+1);for(let u=0;u<=s;u+=1)l[u]=a.getCoefficient(u);for(let u=0;u<=s-1;u+=1)for(let c=s-1;c>=u;c-=1)l[c]=l[c].add(l[c+1]);return Polynomial$1.from(l)}if(t.equals(Expression.ZERO))return this;var n=t.getNumerator()._pow(this.getDegree());return this._scaleRoots(t.negate().inverse())._translateRoots(Expression.ONE.negate())._scaleRoots(t.negate()).map(a=>a.divide(n))};Polynomial$1.prototype.mod=function(t){return this.map(n=>n.modulo(t))};Polynomial$1.prototype.mod2=function(t){return this.mod(t).map(n=>n.subtract(t).add(n).compareTo(Expression.ZERO)<0?n:n.subtract(t))};Polynomial$1.prototype._pow=function(t){var n=function(a,s,l){if(s<0)throw new RangeError;if(s>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return s<1?l:2*Math.floor(s/2)!==s?n(a,s-1,l.multiply(a)):n(a.multiply(a),Math.floor(s/2),l)};return n(this,t,Polynomial$1.of(Expression.ONE))};function gcdByModularAlgorithm(t,n){{const Ct=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(Ct>1)return console.debug("g > 1"),gcdByModularAlgorithm(t._exponentiateRoots(Ct),n._exponentiateRoots(Ct))._exponentiateRoots(1/Ct)}//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const a=t.getLeadingCoefficient().abs().gcd(n.getLeadingCoefficient().abs());if(t.getCoefficient(0).equals(Expression.ZERO)||n.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;if(a.compareTo(t.getCoefficient(0).abs().gcd(n.getCoefficient(0).abs()))>0)return gcdByModularAlgorithm(t._exponentiateRoots(-1),n._exponentiateRoots(-1))._exponentiateRoots(-1);console.assert(t.hasIntegerCoefficients()&&t.getContent().abs().equals(Expression.ONE)&&t.getDegree()>0),console.assert(n.hasIntegerCoefficients()&&n.getContent().abs().equals(Expression.ONE)&&n.getDegree()>0);let s=Math.min(t.getDegree(),n.getDegree());const l=function(){const Ct=a,ar=Math.min(t._log2OfBoundForCoefficientsOfFactor(s,Ct),n._log2OfBoundForCoefficientsOfFactor(s,Ct));return Expression.TWO._pow(1+Math.ceil(ar))};let u=l(),c=Expression.Integer.fromBigInt(Math.min(Math.max(u.toNumber(),1024),Math.floor(Math.sqrt((Number.MAX_SAFE_INTEGER+1)/(1+Math.min(t.getDegree(),n.getDegree())))))),d=0;for(;;){let Ct=null,ar=Expression.ZERO;for(;ar.compareTo(u)<0;){if(d+=1,d>50&&c._pow(d-50).compareTo(u)>=0)throw new TypeError("!!!");do c=c.subtract(Expression.ONE);while(!isPrime$1(c.toBigInt())||a.remainder(c).equals(Expression.ZERO));const en=factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0(t,n,c.toBigInt());console.assert(en.getLeadingCoefficient().equals(Expression.ONE));const tn=en.scale(a.remainder(c)).mod(c);if(tn.getDegree()<1)return Polynomial$1.of(Expression.ONE);if(tn.getDegree()>2/3*t.getDegree(),!(tn.getDegree()>s)){if(Ct!=null&&tn.getDegree()<Ct.getDegree()&&(Ct=null),Ct==null)Ct=tn.mod2(c),ar=c,s=tn.getDegree(),u=l();else if(tn.getDegree()===Ct.getDegree()){const on=Ct;if(Ct=ChineseRemainderTheoremForPolynomialCoefficients(Ct,tn,ar,c),ar=ar.multiply(c),Ct=Ct.mod2(ar),ar.compareTo(u)<0&&on.equals(Ct)){if(Ct=Ct.primitivePart(),t.isDivisibleBy(Ct)&&n.isDivisibleBy(Ct))return Ct;Ct=on}}}}if(Ct=Ct.primitivePart(),t.isDivisibleBy(Ct)&&n.isDivisibleBy(Ct))return Ct}}Polynomial$1._gcdByModularAlgorithm=gcdByModularAlgorithm;function gcdByMultivariateModularAlgorithm(t,n){{const ix=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(ix>1)return console.debug("g > 1"),gcdByMultivariateModularAlgorithm(t._exponentiateRoots(ix),n._exponentiateRoots(ix))._exponentiateRoots(1/ix)}if(!t.getContent().equals(Expression.ONE)||!n.getContent().equals(Expression.ONE))return Polynomial$1.polynomialGCD(t,n);const a=getY(t,n)||getY(n,t);if(a==null)return Polynomial$1.polynomialGCD(t,n);//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const s=Math.min(t.getDegree(),n.getDegree());t=t.map(ix=>new Expression.Polynomial(Polynomial$1.toPolynomial(ix,a))),n=n.map(ix=>new Expression.Polynomial(Polynomial$1.toPolynomial(ix,a)));const l=function(ix){const ax=new Expression.Polynomial(Polynomial$1.of(new Expression.Polynomial(Polynomial$1.of(Expression.ZERO,Expression.ONE))));return ix.map(ox=>new Expression.Polynomial(ox.polynomial.map(sx=>new Expression.Polynomial(Polynomial$1.of(sx))))).calcAt(ax).polynomial},u=l(t),c=l(n),d=u.getContent().gcd(c.getContent()).polynomial.primitivePart();if(!d.equals(Polynomial$1.of(Expression.ONE))){const ix=function(ax){return ax.map(ox=>new Expression.Polynomial(ox.polynomial.divideAndRemainder(d,d._hasIntegerLikeCoefficients()?"throw":void 0).quotient)).calcAt(new Expression.Polynomial(Polynomial$1.of(a))).polynomial};return gcdByMultivariateModularAlgorithm(ix(u),ix(c)).multiply(d)}if(console.assert(d.equals(Polynomial$1.of(Expression.ONE))),u.getDegree()===0||c.getDegree()===0)return Polynomial$1.of(Expression.ONE);const Ct=Polynomial$1.polynomialGCD(u.getLeadingCoefficient().polynomial,c.getLeadingCoefficient().polynomial),ar=function(){NewtonInterpolation.setField(Expression._FIELD);const ix=NewtonInterpolation();return ix.next(),ix},en=t._hasIntegerLikeCoefficients()&&n._hasIntegerLikeCoefficients();let tn=Expression.ZERO,on=0,cn=null,dn=1/0,Cn=null;for(;;){do tn=Expression.Integer.fromNumber(tn.toNumber()+1),tn.toNumber()-s>2&&console.error("!",tn.toNumber()-s);while(Ct.calcAt(tn).equals(Expression.ZERO));var In=Polynomial$1.polynomialGCD(t.calcAt(tn).polynomial,n.calcAt(tn).polynomial);if(In.getDegree()===0)return Polynomial$1.of(Expression.ONE);if(In.getDegree()>dn)continue;const ix=Ct.calcAt(tn);if(In=In.scale(ix).scale(In.getLeadingCoefficient().inverse()),en&&!In._hasIntegerLikeCoefficients())continue;(on===s+1||In.getDegree()<dn)&&(on=0,Cn=ar());const ax=cn;if(cn=Polynomial$1.from(Cn.next([tn.toNumber(),new Expression.Polynomial(In)]).value),on+=1,dn=In.getDegree(),en&&cn!=null&&!cn._hasIntegerLikeCoefficients())debugger;if(ax!=null&&ax.equals(cn)||on===s+1)if(!en||cn._hasIntegerLikeCoefficients()){if(cn=l(l(cn).primitivePart()),(!en||cn.getContent().equals(Expression.ONE))&&t.isDivisibleBy(cn)&&n.isDivisibleBy(cn))return cn=cn.map(ox=>ox.polynomial.calcAt(a)),cn.getLeadingCoefficient().isNegative()&&(cn=cn.negate()),en||(cn=cn.primitivePart()),cn;cn=ax}else debugger}}Polynomial$1._gcdByMultivariateModularAlgorithm=gcdByMultivariateModularAlgorithm;Polynomial$1.prototype.calcAt=function(t){//!!!
if(t instanceof Expression.Division&&t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer&&this.hasIntegerCoefficients()){var c=this.getDegree(),n=this._scaleRoots(t.getDenominator());return n.calcAt(t.getNumerator()).divide(t.getDenominator()._pow(c))}if((t instanceof Expression.Symbol||t instanceof Expression.NthRoot)&&this.hasIntegerCoefficients()){for(var a=Expression.ZERO,s=0;s<this.a.size;s+=1){var l=this.a.degree(s),u=this.a.coefficient(s);a=a.add(u.multiply(t._pow(l)))}return a}for(var c=Expression.ZERO,d=-1,s=0;s<this.a.size;s+=1){var l=this.a.degree(s),u=this.a.coefficient(s);c.equals(Expression.ZERO)?c=u:c=Expression.pow(t,d-l).multiply(c).add(u),d=l}return c.equals(Expression.ZERO)||(c=Expression.pow(t,d-0).multiply(c)),c};Polynomial$1.prototype.getContent=function(){if(this.a.size===0)return Expression.ONE;for(var t=Expression.ONE,n=Expression.ZERO,a=0;a<this.a.size;a+=1){const c=a%2===0?a/2:this.a.size-(a+1)/2;var s=this.a.coefficient(c);t=t.lcm(s.getDenominator()),n=n.gcd(s.getNumerator())}var l=n.divide(t),u=this.a.coefficient(0);return u.isNegative()&&!n.isNegative()||n.isNegative()&&!u.isNegative()?l.negate():l};Polynomial$1.prototype.negate=function(){return this.map(t=>t.negate())};Polynomial$1.prototype.subtract=function(t){return this.add(t.negate())};Polynomial$1.prototype.scale=function(t){if(t.equals(Expression.ONE))return this;if(Expression.has(t,Expression.Matrix)||Expression.has(t,Expression.MatrixSymbol))throw new TypeError;return this.map(n=>n.multiply(t))};Polynomial$1.fromTerms=function(t){for(var n=new PolynomialData(t.length),a=0;a<t.length;a+=1){var s=t[a];n.add(s.degree,s.coefficient)}return new Polynomial$1(n)};Polynomial$1.toPolynomial=function(t,n){if(t instanceof Expression.Division)throw new RangeError;var a=Expression.getCoefficients(t,n);return Polynomial$1.fromTerms(a)};Polynomial$1.prototype.toExpression=function(t){for(var n=void 0,a=0;a<this.a.size;a+=1){var s=this.a.degree(a),l=this.a.coefficient(a),u=s===0?void 0:s===1?t:new Expression.Exponentiation(t,Expression.Integer.fromNumber(s)),c=u==null?l:l.equals(Expression.ONE)?u:new Expression.Multiplication(l,u);n=n==null?c:new Expression.Addition(n,c)}return n??Expression.ZERO};Polynomial$1.prototype.doRationalRootTest=function(){var t=this;if(t.getCoefficient(0).equals(Expression.ZERO)){return Expression.ZERO;//!TODO: test
}var n=t.getLeadingCoefficient(),a=t.getCoefficient(0);a=Expression._expandTrigonometry(a);//!
if(t.getDegree()===1)return a.negate().divide(n);var s=t.hasIntegerCoefficients(),l=null,u=null;if(s){if(l=t.calcAt(Expression.ONE),l.equals(Expression.ZERO))return Expression.ONE;if(u=t.calcAt(Expression.ONE.negate()),u.equals(Expression.ZERO))return Expression.ONE.negate()}var c=function(on,cn){return!(l!=null&&(cn.subtract(on).equals(Expression.ZERO)||!l.remainder(cn.subtract(on)).equals(Expression.ZERO))||u!=null&&(cn.add(on).equals(Expression.ZERO)||!u.remainder(cn.add(on)).equals(Expression.ZERO)))};//!new 2020-01-13
if(s&&n.abs().bitLength()+a.abs().bitLength()>8){const on=function(dn,Cn){Cn.compareTo(Expression.ZERO)<0&&(Cn=Cn.negate(),dn=dn.negate());var In=Cn.truncatingDivide(Expression.TWO);return dn.compareTo(Expression.ONE)<0&&(In=In.negate()),dn.add(In).truncatingDivide(Cn)},cn=function(dn,Cn){const In=dn instanceof Expression.ExpressionPolynomialRoot?dn.root._root.toDecimal(Cn.abs().bitLength()):dn.toDecimal(Cn.abs().bitLength()),ix=In.a.add(In.b).divide(Expression.TWO);return on(Cn.multiply(ix.getNumerator()),ix.getDenominator())};for(var d=t.getZeros(),Ct=0;Ct<d.length;Ct+=1){var ar=d[Ct];if(Ct===0||ar!==d[Ct-1]){var en=ar.root!=null?cn(ar,n).divide(n):ar.getNumerator()instanceof Expression.Integer&&ar.getDenominator()instanceof Expression.Integer?ar:Expression.ZERO;if(c(en.getNumerator(),en.getDenominator())&&t.calcAt(en).equals(Expression.ZERO))return en}}return null}var tn=null;return Expression.everyDivisor(a,function(on){return Expression.everyDivisor(n,function(cn){for(var dn=-3;(dn+=2)<3;){var Cn=dn===-1?on.negate():on;if(c(Cn,cn)){var In=Polynomial$1.of(Cn.negate(),cn),ix=t.divideAndRemainder(In,"undefined"),ax=ix?.remainder.map(function(ox){return ox.simplifyExpression()});if(ax!=null&&ax.equals(Polynomial$1.ZERO))return tn=Cn.divide(cn),!1}}return!0})}),tn};Polynomial$1.prototype._testCoefficients=function(t){for(var n=0;n<this.a.size;n+=1)if(!t(this.a.coefficient(n)))return!1;return!0};Polynomial$1.prototype.hasIntegerCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Integer)};Polynomial$1.prototype.hasComplexCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Complex||t instanceof Expression.Integer)};const isIntegerLike=function(t){return t instanceof Expression.Integer?!0:t instanceof Expression.Symbol?t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?!1:(t instanceof Expression.PolynomialRootSymbol,!0):t instanceof Expression.Addition||t instanceof Expression.Multiplication?isIntegerLike(t.a)&&isIntegerLike(t.b):t instanceof Expression.Exponentiation?isIntegerLike(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.TWO)>=0:t instanceof Expression.Polynomial?t.polynomial._hasIntegerLikeCoefficients():!1};Polynomial$1._isIntegerLike=isIntegerLike;Polynomial$1.prototype._hasIntegerLikeCoefficients=function(){return this._testCoefficients(t=>Polynomial$1._isIntegerLike(t))};Polynomial$1.prototype._canBeFactored=function(t){if(!this.hasIntegerCoefficients()||this.getCoefficient(0).equals(Expression.ZERO))return!0;var n=this.getContent();if(!n.equals(Expression.ONE)&&!n.equals(Expression.ONE.negate()))return this.scale(n.inverse())._canBeFactored();var a=this.subtract(Polynomial$1.of(this.getLeadingCoefficient()).shift(this.getDegree())).getContent(),s=null;do s=a.gcd(this.getLeadingCoefficient()),a=a.truncatingDivide(s);while(!s.equals(Expression.ONE));var s=null;for(a=a.abs();!a.equals(Expression.ONE);){var l=a.primeFactor();if(!this.getCoefficient(0).remainder(l._pow(2)).equals(Expression.ZERO))return!1;a=a.truncatingDivide(l)}return!(t==null&&!this._translateRoots(Expression.Integer.fromNumber(3).negate())._canBeFactored(1))};Polynomial$1.prototype.isEven=function(){return this.getGCDOfTermDegrees()%2===0};var counter=0;Polynomial$1.prototype.getGCDOfTermDegrees=function(){if(this.equals(Polynomial$1.ZERO))return 0;for(var t=this.getDegree(),n=1;n<=this.getDegree()&&t>=2;n+=1)this.getCoefficient(n).equals(Expression.ZERO)||(t=Math.gcd(t,n));return t};Polynomial$1.prototype.getroots=function(t){t=t||void 0;var n=this,a=[];//!new 2018-12-24
for(var s=Expression.ONE,l=Expression.ZERO;l!=null;){var l=Expression.getConjugate(n.getLeadingCoefficient());l!=null&&(n=n.scale(l),s=s.multiply(l))}//!
//!new 2020-07-11
n=n.map(function(qE){return qE.simplifyExpression()});//!
var u=n.getContent();for(u.equals(Expression.ONE)||(n=n.scale(u.getDenominator()).divideAndRemainder(Polynomial$1.of(u.getNumerator()),"throw").quotient),s.equals(Expression.ONE)||(u=u.divide(s));n.getCoefficient(0).equals(Expression.ZERO);)n=n.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient,a.push(Expression.ZERO);if((!u.equals(Expression.ONE)&&!u.equals(Expression.ONE.negate())||a.length>0)&&(a.length>0&&typeof hit=="function"&&hit({getroots:{special:"0"}}),t?.({content:u,roots:a,newPolynomial:n,type:"factorOutTheGreatestCommonFactor"})),n.getDegree()===1)return a.push(n.getCoefficient(0).negate().divide(n.getCoefficient(1))),n=Polynomial$1.of(n.getLeadingCoefficient()),typeof hit=="function"&&hit({getroots:{linear:""}}),t?.({content:u,roots:a,newPolynomial:n,type:"solveLinearEquation"}),a;var c=function(qE,ME){if(!(ME instanceof Expression.ExpressionWithPolynomialRoot)){if(ME instanceof Expression.ExpressionPolynomialRoot)return ME._nthRoot(qE);if(ME instanceof Expression.Division){var GE=c(qE,ME.a),_S=c(qE,ME.b);return GE==null||_S==null?void 0:GE.divide(_S)}if(ME instanceof Expression.Exponentiation){var hS=Expression.Integer.fromNumber(qE);if(ME.b instanceof Expression.Integer&&ME.b.remainder(hS).equals(Expression.ZERO)||ME.a instanceof Expression.Integer||ME.a===Expression.E||ME.b instanceof Expression.Division&&ME.b.a instanceof Expression.Integer&&ME.b.a.remainder(hS).equals(Expression.ZERO))return ME.a.pow(ME.b.divide(hS))}if(ME instanceof Expression.Multiplication){var aS=c(qE,ME.a),tS=c(qE,ME.b);return aS==null||tS==null?void 0:aS.multiply(tS)}if(ME instanceof Expression.Complex||Expression.isConstant(ME)&&Expression.has(ME,Expression.Complex)){var nS=Expression.getComplexNumberParts(ME),jS=nS.real,vS=nS.imaginary;if(qE===2){var qS=jS.multiply(jS).add(vS.multiply(vS)).squareRoot(),$S=c(2,jS.add(qS).divide(Expression.TWO));if($S!=null){var gT=vS.divide(Expression.TWO.multiply($S)),SS=$S.add(gT.multiply(Expression.I));return SS}}if(jS.equals(Expression.ZERO)&&qE%2===0){var nS=c(Math.floor(qE/2),ME);if(nS!=null)return c(2,nS)}if(jS.equals(Expression.ZERO)&&qE%2===1){var nS=c(qE,vS);if(nS!=null)return nS.multiply(qE%4===1?Expression.I:Expression.I.negate())}//!new 2020-07-24
if(ME instanceof Expression.Complex&&!vS.equals(Expression.ZERO)){var oT=jS._pow(2).add(vS._pow(2)).squareRoot();try{var rM=Expression.TWO.multiply(vS.divide(oT.add(jS)).arctan());return oT._nthRoot(qE).multiply(Expression.I.multiply(rM.divide(Expression.Integer.fromNumber(qE))).exp())}catch(lC){console.debug(lC)}}}if(ME instanceof Expression.Addition){for(var QS=void 0,ZS=0,SS=Expression.ONE,mT=Expression.ONE,TT=ME;!TT.equals(Expression.ONE)&&!TT.equals(Expression.ONE.negate());){var lA=Expression.simpleDivisor(TT);ZS===0?(QS=lA,ZS+=1):lA.equals(QS)?(ZS+=1,ZS===qE&&(ZS=0,SS=SS.multiply(QS))):ZS!==0&&(mT=mT.multiply(Expression.pow(QS,ZS)),QS=lA,ZS=1),TT=TT.divide(lA)}if(SS!==Expression.ONE){ZS!==0&&(mT=mT.multiply(Expression.pow(QS,ZS))),TT.equals(Expression.ONE.negate())&&(mT=mT.multiply(TT));var VS=c(qE,mT);if(VS!=null)return SS.multiply(VS)}}if(ME instanceof Expression.Exponentiation&&ME.a instanceof Expression.Symbol){var gT=ME.b.divide(Expression.Integer.fromNumber(qE));return gT.equals(Expression.ONE)?ME.a:new Expression.Exponentiation(ME.a,gT)}if(!Expression.isConstant(ME)&&ME.isNegative()&&(qE===2||qE%2!==0)){ME=ME.negate();var nS=c(qE,ME);return nS==null?null:Expression.ONE.negate()._nthRoot(qE).multiply(nS)}if((ME instanceof Expression.Integer||ME instanceof Expression.Complex)&&ME.isNegative()&&qE%2===0){var nS=ME instanceof Expression.Integer?ME._nthRoot(2):c(2,ME);return nS==null?null:c(qE/2,nS)}if(Expression.has(ME,Expression.Sin)||Expression.has(ME,Expression.Cos)){var uA=c(2,Expression._replaceSinCos(ME));if(uA!=null)return Expression._replaceBySinCos(uA).simplifyExpression()}var sC=void 0;try{sC=ME._nthRoot(qE)}catch(lC){console.error(lC)}if(sC==null){var $S=ME,AA=Expression.getConjugateExpression($S.getNumerator());if((qE===3||qE===2)&&AA instanceof Expression.Integer){if(qE===2&&Expression._isPositive(ME.negate()))return Expression.I.multiply(c(2,ME.negate()));var $S=ME,uA=new Expression.Symbol("x")._pow(qE).subtract($S).getNumerator(),nM=Polynomial$1.toPolynomial(Expression.getConjugateExpression(uA),new Expression.Symbol("x")),CA=nM.getZeros();for(const uC of CA)if(uC._pow(qE).equals(ME))return uC;return null}}return sC}},d=function(qE,ME,GE){if(qE===1)return ME;var _S=c(qE,ME);return _S==null&&(ME instanceof Expression.Integer||typeof hit=="function"&&hit({nthRoot:(qE===2?"squareRoot":qE+"-root")+":"+ME.toString()+":"+GE.toString()})),_S},Ct=function(qE,ME,GE){for(var _S=ME.getroots(t!=null?function(aS){var tS=Object.assign({},aS,{content:u.multiply(aS.content),roots:qE.concat(aS.roots),newPolynomialVariable:GE});t(tS)}:void 0),hS=0;hS<_S.length;hS+=1)qE.push(_S[hS])};if(n.getDegree()>=2){var ar=n.getGCDOfTermDegrees();if(ar>=2){var en=ar===n.getDegree();typeof hit=="function"&&(ar===n.getDegree()?hit({getroots:{allZeros:""}}):hit({getroots:ar%2===0?n.getDegree()===4?{biquadratic:""}:{even:""}:{xyz:n.toString()}}));for(var tn=new Array(Math.floor((n.getDegree()+ar)/ar)),on=0,cn=0;cn<=n.getDegree();cn+=ar)tn[on]=n.getCoefficient(cn),on+=1;var dn=Polynomial$1.from(tn),Cn=[];en?Cn=dn.getroots():(t?.({content:u,roots:a,newPolynomial:dn,type:"t = x^g",g:ar,newPolynomialVariable:new Expression.Symbol("t")}),Ct(Cn,dn,new Expression.Symbol("t")));for(var In=n.getDegree(),on=0;on<Cn.length;on+=1){var ix=Cn[on],ax=d(ar,ix,n);if(ax!=null){var ox=null;if((!en||ar>=5||!n.hasIntegerCoefficients())&&(ar<=24&&(17896830>>ar)%2===1||ar===48)){ox=Polynomial$1.of(Expression.ONE).shift(ar).add(Polynomial$1.of(ix.negate()));for(var sx=Expression.E.pow(Expression.I.multiply(Expression.TWO.multiply(Expression.PI)).divide(Expression.Integer.fromNumber(ar))),ux=Expression.ONE,cn=0;cn<ar;cn+=1){var cx=ux.multiply(ax);ux=ux.multiply(sx),a.push(cx)}}else a.push(ax),ox=Polynomial$1.of(ax.negate(),Expression.ONE),ar%2===0&&(a.push(ax.negate()),ox=Polynomial$1.of(ax.multiply(ax).negate(),Expression.ZERO,Expression.ONE));var hx=n.divideAndRemainder(ox).quotient;console.assert(n.subtract(hx.multiply(ox)).map(ME=>ME.simplifyExpression()).getDegree()<0),n=hx}}if(!en)t?.({content:u,roots:a,newPolynomial:n,type:"x = t^(1/g)",g:ar});else{var gx=ar===2?"applyDifferenceOfSquaresRule":ar===3?"applyDifferenceOfCubesRule":"applyDifferenceOfNthPowersRule";t?.({content:u,roots:a,newPolynomial:n,type:gx,g:ar})}var fx=!0;return In!==n.getDegree()&&fx&&n.getDegree()>0&&Ct(a,n),a}}//! new: solution of quadratic equations
if(n.getDegree()===2){var dx=n.getCoefficient(2),mx=n.getCoefficient(1),sx=n.getCoefficient(0),vx=mx.multiply(mx).subtract(Expression.TWO.multiply(Expression.TWO).multiply(dx).multiply(sx));vx=vx.simplifyExpression();var bx=d(2,vx,n);if(typeof hit=="function"&&hit({getroots:{quadratic:bx==null?vx instanceof Expression.Integer?vx.compareTo(Expression.ZERO):"?"+vx.toString():"OK"}}),bx!=null){if(bx.equals(Expression.ZERO)){var xx=mx.negate().divide(Expression.TWO.multiply(dx));a.push(xx),a.push(xx)}else{var _x=mx.negate().subtract(bx).divide(Expression.TWO.multiply(dx)),Ex=mx.negate().add(bx).divide(Expression.TWO.multiply(dx));a.push(_x),a.push(Ex)}return n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveQuadraticEquation"}),a}}if(n.getDegree()>=4&&n.getDegree()%2===0){for(var Tx=Math.floor(n.getDegree()/2),Cx=1;Cx<Tx+1&&n.getCoefficient(Tx+Cx).equals(Expression.ZERO)&&n.getCoefficient(Tx-Cx).equals(Expression.ZERO);)Cx+=1;if(Cx<Tx+1&&!n.getCoefficient(Tx+Cx).equals(Expression.ZERO)&&!n.getCoefficient(Tx-Cx).equals(Expression.ZERO)){for(var Mx=Expression.Integer.fromNumber(Cx),Ax=n.getCoefficient(Tx+Cx).divide(n.getCoefficient(Tx-Cx)),Nx=!0,cn=2;cn<Tx+1&&Nx;cn+=1)Nx=Nx&&n.getCoefficient(Tx+cn).pow(Mx).subtract(n.getCoefficient(Tx-cn).pow(Mx).multiply(Ax.pow(Expression.Integer.fromNumber(cn)))).equals(Expression.ZERO);if(Nx&&typeof hit=="function"&&hit({getroots:{quasiPalindromic:n.getDegree()}}),Nx&&n.getDegree()<=Math.log2(Number.MAX_SAFE_INTEGER+1)){for(var Ux=function(qE,ME){var GE=function(aS,tS){return tS===0?1:Math.floor(aS*GE(aS-1,tS-1)/tS)},_S=function(aS,tS,nS){return aS-2*tS>=0?_S(aS-2*tS,1,qE).scale(Expression.Integer.fromNumber(GE(aS,tS)).multiply(nS).negate()).add(_S(aS,tS+1,nS.multiply(qE))):Polynomial$1.of(Expression.ONE).shift(aS)},hS=function(aS,tS){return tS<=aS?_S(aS-tS,1,qE).scale(ME.getCoefficient(tS)).add(hS(aS,tS+1)):Polynomial$1.ZERO};return hS(Math.floor(ME.getDegree()/2),0)},Rx=Cx===1?Ax:d(Cx,Ax,n),Ox=Ux(Rx,n),Px=Ox.getroots(),cn=0;cn<Px.length;cn+=1){for(var $x=Px[cn],Lx=Polynomial$1.of(Expression.ONE,$x.negate(),Rx),zx=Lx.getroots(),Cx=0;Cx<zx.length;Cx+=1){var cx=zx[Cx];a.push(cx)}n=n.divideAndRemainder(Lx.scale(Lx.getLeadingCoefficient().inverse())).quotient}return t?.({content:u,roots:a,newPolynomial:n,type:"solvePalindromicEquaion"}),a}}}if(n.getDegree()>=2){var In=n.getDegree(),qx=function(ME){for(var GE=0;GE<=ME.getDegree();GE+=1)if(ME.getCoefficient(GE).equals(Expression.ZERO))return!0;return!1};if(!qx(n)){for(var ar=n.getCoefficient(In-1).divide(n.getCoefficient(In)).divide(Expression.Integer.fromNumber(In)),fx=!0,on=n.getDegree()-1;on>=1&&fx;on-=1)fx=ar.equals(n.getCoefficient(on-1).divide(n.getCoefficient(on)).multiply(Expression.Integer.fromNumber(In-on+1)).divide(Expression.Integer.fromNumber(on)));if(fx){for(var cx=ar.negate(),on=0;on<In;on+=1)a.push(cx);return n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"(ax+b)**n"}),a}}}if(n.getDegree()>=2){var cx=n.doRationalRootTest();if(cx!=null)return n=n.divideAndRemainder(Polynomial$1.of(cx.negate(),Expression.ONE)).quotient,a.push(cx),typeof hit=="function"&&hit({getroots:{rational:""}}),t?.({content:u,roots:a,newPolynomial:n,type:"useTheRationalRootTest"}),n.getDegree()>0&&Ct(a,n),a}if(!n.hasIntegerCoefficients()&&n.getDegree()===3){var jx=n._getShiftToDepressed();if(!jx.equals(Expression.ZERO)){var Hx=n._translateRoots(jx);if(Hx.hasIntegerCoefficients()){var Vx=Hx.getroots();if(Vx.length===0){Vx=Hx.getZeros();debugger}if(Vx.length===n.getDegree()){for(const qE of Vx)a.push(qE.subtract(jx));return n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else debugger}}}if(n.hasIntegerCoefficients()){var In=n.getDegree(),dx=n.getLeadingCoefficient(),mx=n.getCoefficient(In-1);if(!mx.equals(Expression.ZERO)){var jx=mx.divide(Expression.Integer.fromNumber(In).multiply(dx)),nE=n._translateRoots(jx),Wx=[];if(t!=null){var tE=t;t=function(hS){tE({content:u.multiply(nE.getLeadingCoefficient().divide(n.getLeadingCoefficient()).inverse()),roots:a,newPolynomial:nE,type:"eliminationOfTheSubDominantTerm",b:mx,n:In,a:dx,newPolynomialVariable:new Expression.Symbol("t")}),tE(hS),t=tE}}if(Ct(Wx,nE,new Expression.Symbol("t")),Wx.length>0){for(const hS of Wx)a.push(hS.subtract(jx));Wx.length===nE.getDegree()?n=Polynomial$1.of(n.getLeadingCoefficient()):console.warn("TODO:")}return a}}if(n.getDegree()===3){var dx=n.getCoefficient(3),mx=n.getCoefficient(2),sx=n.getCoefficient(1),ox=n.getCoefficient(0),lE=Expression.Integer.fromNumber(3),jx=mx.divide(lE.multiply(dx)),Ux=function(vS){return vS.subtract(jx)},iE=n._translateRoots(jx),nE=iE.scale(iE.getLeadingCoefficient().inverse()),Hx=nE.getCoefficient(1),dn=nE.getCoefficient(0),Xx=Hx.divide(lE)._pow(3).add(dn.divide(Expression.TWO)._pow(2));typeof hit=="function"&&hit({getroots:{cubic:(Xx instanceof Expression.Integer?Xx.compareTo(Expression.ZERO):"?")+"-"+(Hx instanceof Expression.Integer?Hx.compareTo(Expression.ZERO):"?")}});var CE=Expression.ONE.negate().divide(Expression.TWO),RE=Expression.I.multiply(lE.squareRoot()).divide(Expression.TWO),SE=CE.subtract(RE),EE=CE.add(RE);if(dn.equals(Expression.ZERO)&&Hx.equals(Expression.ZERO)){var cx=Ux(Expression.ZERO);return a.push(cx),a.push(cx),a.push(cx),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(dn.equals(Expression.ZERO)){a.push(Ux(Expression.ZERO));var iE=d(2,Hx.negate(),n);return a.push(Ux(iE)),a.push(Ux(iE.negate())),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Hx.equals(Expression.ZERO)){var iE=d(3,dn.negate(),n);return a.push(Ux(iE)),a.push(Ux(iE.multiply(SE))),a.push(Ux(iE.multiply(EE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Xx.equals(Expression.ZERO)){var FE=lE.multiply(dn).divide(Expression.TWO.multiply(Hx)).negate(),AE=Ux(FE);a.push(AE),a.push(AE);var ZE=FE.multiply(Expression.TWO).negate(),Dx=Ux(ZE);return a.push(Dx),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else{var iE=d(2,Xx,n);if(iE!=null){var kx=d(3,dn.negate().divide(Expression.TWO).add(iE),n);if(kx!=null&&!(kx instanceof Expression.ExpressionPolynomialRoot)&&!(kx instanceof Expression.ExpressionWithPolynomialRoot)){var Yx=function(qS){return Ux(qS.subtract(Hx.divide(lE.multiply(qS))))};return a.push(Yx(kx)),a.push(Yx(kx.multiply(SE))),a.push(Yx(kx.multiply(EE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}}}}//!2018-12-23
if(n.getDegree()>2){var iE=n.squareFreeFactors(),Kx=iE.a0,aE=iE.a1;if(Kx.getDegree()>0){for(var eE=Kx,gE=Kx.getroots(function(ME){eE=ME.newPolynomial}),dE=null,cn=0;cn<gE.length;cn+=1){var cx=gE[cn];a.push(cx),(dE==null||!dE.equals(cx))&&a.push(cx),dE=cx}for(var bE=aE,xE=aE.getroots(function(ME){bE=ME.newPolynomial}),cn=0;cn<xE.length;cn+=1)a.push(xE[cn]);if(eE!=null&&(n=bE.multiply(eE).multiply(Polynomial$1.polynomialGCD(eE,n))),gE.length>0||xE.length>0)return typeof hit=="function"&&hit({getroots:{squareFreeFactorization:n.toString()}}),t?.({content:u,roots:a,newPolynomial:n,type:"squareFreeFactorization"}),a}}//!
if(n.getDegree()>=4){var ar=n.factorize();if(ar!=null){for(var jx=n.divideAndRemainder(ar).quotient,OE=null,PE=ar.getroots(function(GE){OE=GE.newPolynomial.scale(GE.content)}),cn=0;cn<PE.length;cn+=1)a.push(PE[cn]);PE.length>0&&(n=n.divideAndRemainder(ar.divideAndRemainder(OE).quotient).quotient);for(var sE=null,hE=jx.getroots(function(GE){sE=GE.newPolynomial.scale(GE.content)}),cn=0;cn<hE.length;cn+=1)a.push(hE[cn]);return hE.length>0&&(n=n.divideAndRemainder(jx.divideAndRemainder(sE).quotient).quotient),(hE.length>0||PE.length>0)&&(typeof hit=="function"&&hit({getroots:{methodOfKronecker:n.toString()}}),t?.({content:u,roots:a,newPolynomial:n,type:"methodOfKronecker"})),a}}if(n.getDegree()>=3){for(var cn=0;cn<=n.getDegree();cn+=1)if(Expression.has(n.getCoefficient(cn),Expression.SquareRoot)){var sx=null;if(Expression._map(function(GE){return sx==null&&GE instanceof Expression.SquareRoot&&GE.a instanceof Expression.Integer&&(sx=GE),GE},n.getCoefficient(cn)),sx!=null){var iE=new Expression.Symbol("_t"),Hx=n.map(function(tS){var nS=Expression.ZERO;for(var jS of tS.summands()){var vS=Expression.ONE;for(var qS of jS.factors())if(qS.equals(sx))vS=vS.multiply(iE);else if(qS instanceof Expression.Integer){for(var $S=0;qS.gcd(sx.a).equals(sx.a);)$S+=2,qS=qS.divide(sx.a);vS=vS.multiply(qS.multiply(iE._pow($S)))}else vS=vS.multiply(qS);nS=nS.add(vS)}return nS}),dx="_x"+ ++counter,TE=Polynomial$1.toPolynomial(Hx.calcAt(new Expression.Symbol(dx)),iE);//!2020-12-11
var ar=TE.getGCDOfTermDegrees();if(ar>=2){for(var tn=new Array(Math.floor((TE.getDegree()+ar)/ar)),on=0,vE=0;vE<=TE.getDegree();vE+=ar)tn[on]=TE.getCoefficient(vE).multiply(sx._pow(vE-on)),on+=1;TE=Polynomial$1.from(tn)}//!
if(TE.getDegree()>1){for(var IE=[],DE=null;(DE=TE.doRationalRootTest())!=null;)IE.push(DE),TE=TE.divideAndRemainder(Polynomial$1.of(DE.negate(),Expression.ONE),"throw").quotient;for(var Bx=a.length,Cx=0;Cx<IE.length;Cx+=1)for(var Fx=Polynomial$1.toPolynomial(IE[Cx].subtract(sx).getNumerator(),new Expression.Symbol(dx)).getroots(),on=0;on<Fx.length;on+=1){var cx=Fx[on];a.push(cx),n=n.divideAndRemainder(Polynomial$1.of(cx.negate(),Expression.ONE)).quotient}if(a.length>Bx)return typeof hit=="function"&&hit({getroots:{methodOfIntroducingANewVariable:""}}),t?.({content:u,roots:a,newPolynomial:n,type:"methodOfIntroducingANewVariable",t:sx}),Ct(a,n),a}}}}if(n.getDegree()===4){var Zx=n.getCoefficient(4),Hx=n.scale(Zx.inverse()),mx=Hx.getCoefficient(3),Jx=new Expression.Symbol("$y"),Ux=function(tS){return tS.subtract(mx.divide(Expression.Integer.fromNumber(4)))},mE=Hx.calcAt(Ux(Jx)),NE=Polynomial$1.toPolynomial(mE.getNumerator(),Jx),Hx=NE.getCoefficient(2),dn=NE.getCoefficient(1),$E=NE.getCoefficient(0);const hS=Polynomial$1.of(dn._pow(2).negate(),Hx._pow(2).subtract(Expression.TWO.add(Expression.TWO).multiply($E)),Expression.TWO.multiply(Hx),Expression.ONE),aS=hS.getCoefficient(1).equals(Expression.ZERO)&&hS.getCoefficient(2).equals(Expression.ZERO)||hS.getCoefficient(0).equals(Expression.ZERO)?hS.getroots():[hS.doRationalRootTest()||Expression.ZERO];for(const tS of aS){const nS=c(2,tS);if(!tS.equals(Expression.ZERO)&&nS!=null){const jS=nS.negate(),vS=Hx.add(nS._pow(2)).add(dn.divide(nS)).divide(Expression.TWO),qS=Hx.add(nS._pow(2)).subtract(dn.divide(nS)).divide(Expression.TWO),$S=Polynomial$1.of(vS,jS,Expression.ONE),gT=Polynomial$1.of(qS,nS,Expression.ONE);var LE=Polynomial$1.of(Expression.ONE);for(const SS of $S.getroots()){const oT=Ux(SS);a.push(oT),LE=LE.multiply(Polynomial$1.of(oT.negate(),Expression.ONE))}for(const SS of gT.getroots()){const oT=Ux(SS);a.push(oT),LE=LE.multiply(Polynomial$1.of(oT.negate(),Expression.ONE))}if(LE.getDegree()>0)return n=n.divideAndRemainder(LE).quotient,t?.({content:u,roots:a,newPolynomial:n,type:"solveQuarticEcuation"}),Ct(a,n),a}}}if(!n.hasIntegerCoefficients()&&n.getDegree()>2){var BE=new Expression.Symbol("$$"),mE=n.calcAt(BE),sx=Expression.getConjugate(mE);if(sx!=null){for(var jE=Polynomial$1.toPolynomial(sx.multiply(mE),BE).getSquareFreePolynomial().getroots(function(GE){GE.newPolynomial}),cn=0;cn<jE.length;cn+=1){var cx=jE[cn];n.calcAt(cx).equals(Expression.ZERO)?(a.push(cx),n=n.divideAndRemainder(Polynomial$1.of(cx.negate(),Expression.ONE)).quotient):console.debug(cx)}return jE.length>0&&(t?.({content:u,roots:a,newPolynomial:n,type:"multiplyByConjugates",t:sx}),Ct(a,n)),a}}n.getDegree()>=0&&typeof hit=="function"&&hit({getroots:{other:n.getDegree()}});//!2023-05-08 new TODO: !?
if(n.hasIntegerCoefficients()&&n.getDegree()>=4&&n.getDegree()%2===0&&n.getDegree()<=12){var Lx=new Expression.Symbol("u"),JE=new Expression.Symbol("v"),YE=n.calcAt(Lx.add(JE)),AS=n.calcAt(Lx.subtract(JE)),NS=Polynomial$1.resultant(Polynomial$1.toPolynomial(YE,Lx),Polynomial$1.toPolynomial(AS,Lx));NS=Polynomial$1.toPolynomial(NS,JE);for(var dS=function(ME){for(var GE=[],_S=ME.factorize();_S!=null&&ME.getDegree()>1;)_S.getDegree()<=2&&(GE=GE.concat(_S.getroots())),ME=ME.divideAndRemainder(_S).quotient,_S=ME.factorize();return GE},US=Expression.unique(dS(NS.primitivePart())),cn=0;cn<US.length;cn++){var JE=US[cn],ar=Polynomial$1.polynomialGCD(n._translateRoots(JE),n._translateRoots(JE.negate()));if(ar.getDegree()<=3){var LS=ar.getroots();if(LS.length>0){for(var zS=Polynomial$1.of(Expression.ONE),cn=0;cn<LS.length;cn+=1){var Lx=LS[cn],cx=Lx.add(JE);a.push(cx),zS=zS.multiply(Polynomial$1.of(cx.negate(),Expression.ONE))}var iE=n.divideAndRemainder(zS);if(!iE.remainder.equals(Polynomial$1.ZERO))throw new TypeError;return n=iE.quotient,Ct(a,n),a}}}}return a};Polynomial$1.prototype.derive=function(){for(var t=new PolynomialData(this.a.size),n=0;n<this.a.size;n+=1){var a=this.a.degree(n),s=this.a.coefficient(n);if(a>=1){var l=Expression.Integer.fromNumber(a).multiply(s);l.equals(Expression.ZERO)||t.add(a-1,l)}}return new Polynomial$1(t)};Polynomial$1.prototype.getSquareFreePolynomial=function(){return this.divideAndRemainder(this.squareFreeFactors().a0).quotient};Polynomial$1.prototype.isSquareFreePolynomial=function(){return this.squareFreeFactors().a0.equals(Polynomial$1.of(Expression.ONE))};Polynomial$1.prototype.squareFreeFactors=function(){for(var t=this,n=0;t.getCoefficient(n).equals(Expression.ZERO);)n+=1;if(t=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n),"throw").quotient,t.getDegree()!==0){var a=t,s=a.derive(),l=Polynomial$1.polynomialGCD(a,s);if(l.getDegree()!==0){Expression.isConstant(l.getLeadingCoefficient())&&(l=l.scale(l.getLeadingCoefficient().inverse())),a.hasIntegerCoefficients()&&(l=l.scale(l.getContent().inverse()));var u=a.divideAndRemainder(l,a._hasIntegerLikeCoefficients()?"throw":void 0).quotient,c=Polynomial$1.polynomialGCD(u,l),d=u.divideAndRemainder(c,u._hasIntegerLikeCoefficients()?"throw":void 0).quotient;return{a1:d.shift(n===1?1:0),a0:l.shift(n>1?n-1:0)}}}return{a1:t.shift(n===1?1:0),a0:Polynomial$1.of(Expression.ONE).shift(n>1?n-1:0)}};Polynomial$1.testables={multiplyByKroneckerSubstitution};Polynomial$1.prototype._findGoodSubstitution=function(){var t=function(a){for(var s=a.getCoefficient(0).abs(),l=0;l<a.getDegree();l+=1)s=s.gcd(a.getCoefficient(l).abs());s=s.abs();for(var u=Expression.ONE;!s.equals(Expression.ONE);){var c=s.primeFactor();if(!a.getLeadingCoefficient().remainder(c).equals(Expression.ZERO)){for(var d=!0,l=0;l<a.getDegree()&&d;l+=1){var Ct=c._pow(a.getDegree()-l);d=a.getCoefficient(l).gcd(Ct).abs().equals(Ct)}d&&(u=u.multiply(c),a=a._scaleRoots(c.inverse()).primitivePart())}s=s.truncatingDivide(c)}return u},n=t(this);return n.divide(t(this._scaleRoots(n.inverse())._exponentiateRoots(-1)))};Polynomial$1.prototype._tryGoodSubstitution=function(){return this._scaleRoots(this._findGoodSubstitution())};Polynomial$1.prototype._getShiftToDepressed=function(){var t=this.getDegree(),n=this.getLeadingCoefficient(),a=this.getCoefficient(t-1),s=a.divide(Expression.Integer.fromNumber(t).multiply(n));return s};Polynomial$1.prototype._factorizeOverTheIntegers=function(){return factorizeOverTheIntegers(this)};Polynomial$1.prototype._factorizeMultivariateIntegerPolynomial=function(){var t=Polynomial$1._getY(this,this),n=Date.now();const a=function(u,c){return u.map(d=>new Expression.Polynomial(Polynomial$1.toPolynomial(d,new Expression.Symbol(c))))};var s=factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial(a(this,t.symbol)),l=Date.now();return l-n>4&&console.log("_factorizeMultivariateIntegerPolynomial",l-n,this.toString()),s==null?null:(s=s.map(u=>u.polynomial.calcAt(t)),s.getLeadingCoefficient().isNegative()&&(s=s.negate()),s)};Polynomial$1.prototype.factorize=function(){if(this.getCoefficient(0).equals(Expression.ZERO))return Polynomial$1.of(Expression.ZERO,Expression.ONE);var t=this.getContent();if(!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate()))throw new RangeError;if(this.getDegree()===1)return null;if(this.getDegree()===2){var n=function(Cn){console.assert(Cn.getDegree()===2);var In=Cn.getCoefficient(2),ix=Cn.getCoefficient(1),ax=Cn.getCoefficient(0);return ix.multiply(ix).subtract(Expression.Integer.fromNumber(4).multiply(In).multiply(ax))}(this);if(n instanceof Expression.Integer&&!n._isPerfectSquare())return null}var a=this.squareFreeFactors();if(a.a0.getDegree()>0)return a.a1.getDegree()>0?a.a1:a.a0;if(this.getDegree()<2)return null;//!new
var s,l;this.hasIntegerCoefficients();var u=this.getDegree(),c=this.getCoefficient(u-1);if(!c.equals(Expression.ZERO)&&!this.hasIntegerCoefficients()){var d=this.getLeadingCoefficient(),Ct=c.divide(Expression.Integer.fromNumber(u).multiply(d)),ar=this._translateRoots(Ct);if(ar.hasIntegerCoefficients()){ar=ar.primitivePart();var en=ar.factorize();return en!=null?en._translateRoots(Ct.negate()).primitivePart():null}else console.warn("???")}//!
//!new
if(this.isEven()&&this.hasIntegerCoefficients()&&(!this.getCoefficient(0).abs()._isPerfectSquare()||!this.getCoefficient(this.getDegree()).abs()._isPerfectSquare())){var l=this._exponentiateRoots(2).factorize();return l!=null?l._exponentiateRoots(1/2):null}var tn=this.getGCDOfTermDegrees();if(tn>2){var l=this._exponentiateRoots(tn).factorize();if(l!=null)return l._exponentiateRoots(1/tn)}//!
if(!this.hasIntegerCoefficients()||this.getDegree()<4&&this.getLeadingCoefficient().abs().bitLength()+this.getCoefficient(0).abs().bitLength()<9){var on=this.doRationalRootTest();if(on!=null)return Polynomial$1.of(on.getNumerator(),on.getDenominator().negate());if(this.getDegree()<4)return null}//!
var cn=this;return cn.hasIntegerCoefficients()?cn._factorizeOverTheIntegers().next().value:cn._hasIntegerLikeCoefficients()&&Polynomial$1._getY(cn,cn)!=null?cn._factorizeMultivariateIntegerPolynomial():null};Polynomial$1.prototype.primitivePart=function(){return this.scale(this.getContent().inverse())};Polynomial$1.prototype.modularInverse=function(t){if(t.getDegree()<9&&this.getDegree()<t.getDegree()&&!1||this.getDegree()<t.getDegree()&&t.getDegree()<=3){for(var n=t.getDegree(),a=this,s=Polynomial$1.of(n%2===1?Expression.ONE:Expression.ONE.negate());a.getDegree()>0;){var l=function(hx,gx){for(var fx=hx,dx=Polynomial$1.ZERO;fx.getDegree()>=gx.getDegree();){var mx=fx.getLeadingCoefficient();dx=dx.scale(gx.getLeadingCoefficient()),fx=fx.scale(gx.getLeadingCoefficient());var vx=Polynomial$1.of(mx.negate()).shift(fx.getDegree()-gx.getDegree());dx=dx.add(vx),fx=fx.add(gx.multiply(vx))}return{Q:dx,R:fx}},u=l(t.negate(),a);a=u.R,s=s.multiply(u.Q)}s=s.divideAndRemainder(t).remainder;var c,en,d=s;if(t.getDegree()<=3)return s}var Ct=t,ar=Math.gcd(this.getGCDOfTermDegrees(),Ct.getGCDOfTermDegrees());if(ar>1)return this._exponentiateRoots(ar).modularInverse(Ct._exponentiateRoots(ar)).primitivePart()._exponentiateRoots(1/ar);this.hasIntegerCoefficients()&&Ct.hasIntegerCoefficients();var en=this,tn=Ct,ux=en.getDegree()>=Ct.getDegree()?Polynomial$1.pseudoRemainder(en,Ct).primitivePart():en,on=Polynomial$1.of(Expression.ZERO),cn=Polynomial$1.of(Expression.ONE),dn=(en._hasIntegerLikeCoefficients()&&Ct._hasIntegerLikeCoefficients(),"primitive");for(var u of Polynomial$1._pseudoRemainderSequence(tn,ux,dn)){var Cn=ux.getLeadingCoefficient()._pow(tn.getDegree()-ux.getDegree()+1),In=u.q,ix=u.,ax=on.scale(Cn).subtract(In.multiply(cn));{var ar=ax.getContent().gcd(ix);ax=ax.divideAndRemainder(Polynomial$1.of(ar),"throw").quotient,cn=cn.scale(ix.divide(ar))}[on,cn]=[cn,ax];var ox=u.R;[tn,ux]=[ux,ox]}var sx=tn;if(sx.getDegree()!==0)throw new TypeError;on=on.primitivePart().scale(Ct.getLeadingCoefficient()._pow(Math.max(on.getDegree()+en.getDegree()-Ct.getDegree()+1,0)));var ux=on.multiply(en).divideAndRemainder(Ct,"throw").remainder;if(ux.getDegree()!==0)throw new TypeError;return d!=null&&console.log("!",d.toString(),on.toString()),on};const SUBQUADRATIC_GCD_THRESHOLD=32*1024,SUBQUADRATIC_HALFGCD_THRESHOLD=4096;let SMALL_GCD_MAX=0n,DIGITSIZE=0,smallgcd=null,smallgcdext=null,wasmHelper=null,jsHelper=null;if(typeof WebAssembly<"u"){const t=new Uint8Array([0,97,115,109,1,0,0,0,1,20,3,96,0,1,126,96,2,126,126,1,126,96,5,126,126,126,126,127,1,127,3,8,7,1,1,2,0,0,0,0,6,21,4,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,7,47,7,6,117,54,52,103,99,100,0,0,9,117,54,52,103,99,100,101,120,116,0,1,6,104,101,108,112,101,114,0,2,1,65,0,3,1,66,0,4,1,67,0,5,1,68,0,6,10,141,4,7,37,1,1,126,32,1,66,0,82,4,64,3,64,32,0,32,1,130,33,2,32,1,33,0,32,2,34,1,66,0,82,13,0,11,11,32,0,11,97,1,6,126,66,1,33,6,66,1,33,3,32,1,66,0,82,4,64,3,64,32,0,32,0,32,1,128,34,7,32,1,126,125,33,4,32,1,33,0,32,6,32,2,32,7,126,125,33,1,32,5,32,3,32,7,126,125,33,7,32,2,33,6,32,3,33,5,32,1,33,2,32,7,33,3,32,4,34,1,66,0,82,13,0,11,11,32,6,36,0,32,5,36,1,32,0,11,238,2,2,7,126,2,127,66,1,33,9,66,1,33,7,32,0,66,127,82,32,2,66,127,82,113,4,64,3,64,32,0,32,6,124,33,8,32,0,32,9,124,33,6,32,2,32,5,124,33,5,32,2,32,7,124,33,7,32,12,65,1,113,4,64,32,8,33,9,32,6,33,8,32,9,33,6,32,5,33,9,32,7,33,5,32,9,33,7,11,3,64,32,5,32,6,32,8,32,7,128,34,11,32,5,126,125,34,9,86,4,64,32,12,65,1,106,33,12,32,8,32,7,32,11,126,125,33,10,32,0,32,2,32,11,126,125,33,11,32,5,33,8,32,7,33,6,32,2,33,0,32,10,33,5,32,9,33,7,32,11,33,2,12,1,11,11,32,6,32,0,125,33,9,32,8,32,0,125,33,6,32,5,32,2,125,33,5,32,7,32,2,125,33,7,32,12,65,1,113,4,64,32,9,33,8,32,6,33,9,32,8,33,6,32,5,33,8,32,7,33,5,32,8,33,7,11,32,4,32,0,32,9,124,34,8,32,0,32,6,124,34,10,32,8,32,10,86,27,121,167,34,13,32,4,32,13,72,27,34,13,4,64,32,1,32,1,32,4,32,13,107,34,4,172,34,8,136,34,10,32,8,134,125,33,1,32,3,32,3,32,8,136,34,11,32,8,134,125,33,3,32,9,32,10,126,32,6,32,11,126,124,32,0,32,13,172,34,8,134,124,33,0,32,5,32,10,126,32,7,32,11,126,124,32,2,32,8,134,124,33,2,11,32,13,13,0,11,11,32,9,36,0,32,6,36,1,32,5,36,2,32,7,36,3,65,0,11,4,0,35,0,11,4,0,35,1,11,4,0,35,2,11,4,0,35,3,11]);try{const n=new WebAssembly.Instance(new WebAssembly.Module(t)).exports;n.helper(1n,0n,1n,0n)!=null&&(wasmHelper=function(a,s,l,u,c){return n.helper(a,s,l,u,c),[n.A(),n.B(),n.C(),n.D()]},DIGITSIZE=64,SMALL_GCD_MAX=BigInt.asUintN(64,-1n)),n.u64gcd(0n,0n)===0n&&(smallgcd=n.u64gcd),n.u64gcdext(0n,0n)===0n&&(smallgcdext=function(a,s){const l=n.u64gcdext(a,s);return[n.A(),n.B(),l]})}catch(n){console.log(n)}}function AsmModule(t){var n=t.Math.floor,a=t.Math.max,s=t.Math.clz32,l=-0,u=-0,c=-0,d=-0;function Ct(ix,ax){ix=+ix,ax=+ax;for(var ox=-0,sx=-0;ax>-0;)sx=+n(ix/ax),ox=ix-sx*ax,ix=ax,ax=ox;return+ix}function ar(ix,ax){ix=+ix,ax=+ax;for(var ox=-0,sx=-0,ux=1,cx=-0,hx=-0,gx=1,fx=-0,dx=-0;ax>-0;)sx=+n(ix/ax),ox=ix-sx*ax,ix=ax,ax=ox,fx=ux-sx*hx,dx=cx-sx*gx,ux=hx,cx=gx,hx=fx,gx=dx;return l=ux,u=cx,+ix}function en(ix){ix=+ix;for(var ax=0;ix>=4294967296;)ix=ix*23283064365386963e-26,ax=ax+32|0;return ax=ax+(32-(s(~~ix)|0))|0,ax|0}function tn(ix){ix=ix|0;for(var ax=1;(ix|0)<0;)ix=ix+32|0,ax=ax*23283064365386963e-26;for(;(ix|0)>=32;)ix=ix-32|0,ax=ax*4294967296;return ax=ax*+(1<<ix>>>0),+ax}function on(ix,ax,ox,sx,ux){ix=+ix,ax=+ax,ox=+ox,sx=+sx,ux=ux|0;var cx=1,hx=-0,gx=-0,fx=1,dx=0,mx=0,vx=-0,bx=-0,xx=-0,_x=-0,Ex=-0,Tx=-0,Cx=0,Mx=-0,Ax=-0,Nx=-0,Ux=-0,Rx=-0;if(ox!=-0)do{do vx=n(ix/ox),bx=ix-vx*ox,xx=gx,_x=fx,Ex=cx-vx*gx,Tx=hx-vx*fx,mx=-0<=bx+Ex&bx+Ex<ox+gx&-0<=bx+Tx&bx+Tx<ox+fx,mx&&(ix=ox,ox=bx,cx=xx,hx=_x,gx=Ex,fx=Tx);while(mx);Cx=53-(en(ix+a(cx,hx))|0)|0,dx=(Cx|0)<0?Cx:(Cx|0)>(ux|0)?ux:Cx,(Cx|0)!=0&&(Mx=+tn(ux-dx|0),Ax=+tn(dx-ux|0),Nx=+n(ax*Ax),Ux=+n(sx*Ax),ax=ax-Nx*Mx,sx=sx-Ux*Mx,ux=ux-dx|0,Rx=+tn(dx),ix=cx*Nx+hx*Ux+ix*Rx,ox=gx*Nx+fx*Ux+ox*Rx)}while((dx|0)!=0);return l=cx,u=hx,c=gx,d=fx,0}function cn(){return l}function dn(){return u}function Cn(){return c}function In(){return d}return{f64gcdext:ar,f64gcd:Ct,helper:on,A:cn,B:dn,C:Cn,D:In}}if(DIGITSIZE===0){const t=AsmModule(globalThis);jsHelper=function(n,a,s,l,u){return t.helper(n,a,s,l,u),[BigInt(t.A()),BigInt(t.B()),BigInt(t.C()),BigInt(t.D())]},DIGITSIZE=53,SMALL_GCD_MAX=BigInt.asUintN(53,-1n),smallgcd=function(n,a){return BigInt(t.f64gcd(Number(BigInt(n)),Number(BigInt(a))))},smallgcdext=function(n,a){const s=t.f64gcdext(Number(BigInt(n)),Number(BigInt(a)));return[BigInt(t.A()),BigInt(t.B()),BigInt(s)]}}function bitLength(t){const n=t.toString(16),a=n.charCodeAt(0)-0-48;if(a<=0)throw new RangeError;return(n.length-1)*4+(32-Math.clz32(Math.min(a,8)))}const frexpf64=typeof Float64Array<"u"?new Float64Array(1):null,frexpi32=typeof Float64Array<"u"?new Int32Array(frexpf64.buffer):null;let previousValue=0;function bitLength2(t){if(previousValue<=1024){const a=-0+Number(BigInt(t));if(frexpf64!=null){frexpf64[0]=a;const u=(frexpi32[1]>>20)-1023;if(u<1024&&frexpi32[0]!==0||(frexpi32[1]&1048575)!==0)return previousValue=u+1,previousValue}const s=Math.log2(a)+1024*4-1024*4,l=Math.ceil(s);if(s!==l)return previousValue=l,previousValue}previousValue<DIGITSIZE&&(previousValue=DIGITSIZE);const n=-0+Number(t>>BigInt(previousValue-DIGITSIZE));if(n>=1&&n<=9007199254740992){let a=+n,s=0;for(;a>1073741824;)a=Math.floor(a/1073741824),s+=30;return s+=32-Math.clz32(a),previousValue=previousValue-DIGITSIZE+s,previousValue}return previousValue=bitLength(t),previousValue}function helper$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(wasmHelper!=null){if(DIGITSIZE!==64)throw new RangeError;const a=BigInt.asUintN(64,t>>64n),s=BigInt.asUintN(64,t),l=BigInt.asUintN(64,n>>64n),u=BigInt.asUintN(64,n);return wasmHelper(a,s,l,u,64)}else{if(DIGITSIZE!==53)throw new RangeError;const a=-0+Number(t>>53n),s=-0+Number(BigInt.asUintN(53,t)),l=-0+Number(n>>53n),u=-0+Number(BigInt.asUintN(53,n));return jsHelper(a,s,l,u,53)}}function abs$2(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function max$2(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;return t<n?n:t}function halfgcd(t,n,a=!0,s=!0,l=!1){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;a=a||s;let u=1n,c=0n,d=0n,Ct=1n,ar=0;if(t<0n&&(t=-t,a&&(u=-u,c=-c,ar+=1)),n<0n&&(n=-n,a&&(d=-d,Ct=-Ct,ar+=1)),t<n){const cn=t;if(t=n,n=cn,a){const dn=u;u=d,d=dn;const Cn=c;c=Ct,Ct=Cn,ar+=1}}let en=!1;s&&BigInt.asUintN(SUBQUADRATIC_HALFGCD_THRESHOLD,t)===t&&(en=!0);let tn=!1,on=0;for(;(s||t>SMALL_GCD_MAX)&&n!==0n;){if(!en&&!s&&BigInt.asUintN(SUBQUADRATIC_GCD_THRESHOLD*(a?1/16:1),n)===n){en=!0;continue}if(ar+=1,!en){s&&ar===1&&(on=bitLength(t));const Cn=s?bitLength(max$2(abs$2(d),abs$2(Ct))):0;let In=s?Math.max(0,Math.ceil((on-Cn-Cn)*(1/2))):a?0:Math.floor(bitLength(t)*2/3),ix=BigInt(In);if(ar!==1&&s){if(In<256){en=!0;continue}let xx=8;for(;t+u>>ix!==t+c>>ix||n+d>>ix!==n+Ct>>ix;)In+=xx,ix=BigInt(In),xx+=xx}const[ax,ox,sx,ux,cx,hx]=halfgcd(t>>ix,n>>ix),[gx,fx,dx,mx,vx,bx]=[BigInt(ax),BigInt(ox),BigInt(sx),BigInt(ux),BigInt(cx),BigInt(hx)];if(fx!==0n){if(a)if(ar===1)u=gx,c=fx,d=dx,Ct=mx;else{const Cx=gx*c+fx*Ct,Mx=dx*c+mx*Ct;if(c=Cx,Ct=Mx,s){const Ax=gx*u+fx*d,Nx=dx*u+mx*d;u=Ax,d=Nx}}const xx=BigInt.asUintN(In,t),_x=BigInt.asUintN(In,n),Ex=gx*xx+fx*_x+(vx<<ix),Tx=dx*xx+mx*_x+(bx<<ix);if(t=Ex,n=Tx,t<0n||n<0n)throw new TypeError("assertion");continue}}if(en&&!tn){let Cn=Math.max(0,bitLength2(t)-DIGITSIZE*2),In=Cn===0?0n:BigInt(Cn);if(ar!==1&&s&&(t+u>>In!==t+c>>In||n+d>>In!==n+Ct>>In)){if(!l)break;do Cn+=8,In=BigInt(Cn);while(t+u>>In!==t+c>>In||n+d>>In!==n+Ct>>In);if(n>>In===0n){tn=!0;continue}}const[ix,ax,ox,sx]=helper$1(Cn===0?t:t>>In,Cn===0?n:n>>In),[ux,cx,hx,gx]=[BigInt(ix),BigInt(ax),BigInt(ox),BigInt(sx)];if(cx!==0n){if(a)if(ar===1)u=ux,c=cx,d=hx,Ct=gx;else{const mx=ux*c+cx*Ct,vx=hx*c+gx*Ct;if(c=mx,Ct=vx,s){const bx=ux*u+cx*d,xx=hx*u+gx*d;u=bx,d=xx}}const fx=ux*t+cx*n,dx=hx*t+gx*n;if(t=fx,n=dx,t<0n||n<0n)throw new TypeError("assertion");continue}}const cn=t/n,dn=t-cn*n;if(a){const Cn=u-cn*d,In=c-cn*Ct;if(s&&!(0n<=dn+Cn&&dn+Cn<n+d&&0n<=dn+In&&dn+In<n+Ct))break;u=d,c=Ct,d=Cn,Ct=In}t=n,n=dn}return[u,c,d,Ct,t,n]}function LehmersGCD(t,n){const[a,s,l,u,c,d]=halfgcd(t,n,!1,!1);return t=BigInt(c),n=BigInt(d),n!==0n&&(t=BigInt.asUintN(64,smallgcd(t,n))),t}function LehmersGCDExt(t,n){const[a,s,l,u,c,d]=halfgcd(t,n,!0,!1),Ct=t,ar=n;let en=BigInt(a),tn=BigInt(s);BigInt(l);let on=BigInt(u);if(t=BigInt(c),n=BigInt(d),d!==0n){const[cn,dn,Cn]=smallgcdext(t,n);t=BigInt.asUintN(64,Cn),n=0n,tn=cn*tn+dn*on}return en=Ct===0n?0n:(t-tn*ar)/Ct,[en,tn,t]}function gcd$1(t,n){return LehmersGCD(BigInt(t),BigInt(n))}function gcdext(t,n){return LehmersGCDExt(BigInt(t),BigInt(n))}function invmod(t,n){const[a,s,l,u,c,d]=halfgcd(n,t,!0,!1);if(BigInt(d)!==0n){const[ar,en,tn]=smallgcdext(c,d);if(BigInt.asUintN(64,tn)!==1n)return 0n;const on=ar*BigInt(s)+en*BigInt(u);return on<0n?on+n:on}if(BigInt(c)!==1n)return 0n;const Ct=BigInt(s);return Ct<0n?Ct+n:Ct}function halfgcdWrapper(t,n){return halfgcd(t,n,!0,!0,!0)}gcd$1.halfgcd=halfgcdWrapper;gcd$1.gcdext=gcdext;gcd$1.invmod=invmod;function abs$1(t){return t<0n?0n-t:t}function ngcd(t,n){return BigInt(gcd$1(BigInt(t),BigInt(n)))}function QuadraticInteger(t,n,a,s=!1){let l=BigInt(t),u=BigInt(n);const c=typeof a=="number"?a:Number(BigInt(a));if(s&&c%4===0)throw new RangeError;if(s&&l%2n===0n&&u%2n===0n&&(s=!1,l/=2n,u/=2n),s&&(l%2n===0n||u%2n===0n))throw new RangeError;this.a=l,this.b=u,this.D=c,this.overTwo=s}QuadraticInteger.prototype.multiply=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=BigInt(n.a)*t.a+BigInt(n.b)*t.b*BigInt(t.D),s=BigInt(n.a)*t.b+BigInt(n.b)*t.a,l=(n.overTwo?1:0)+(t.overTwo?1:0);l>0&&a%2n===0n&&s%2n===0n;)a/=2n,s/=2n,l-=1;return new QuadraticInteger(a,s,n.D,l===1)};QuadraticInteger.prototype.conjugate=function(t){return new QuadraticInteger(this.a,-BigInt(this.b),this.D,this.overTwo)};QuadraticInteger.prototype.norm=function(){const t=BigInt(this.a),n=BigInt(this.b),a=+this.D;var s=t*t,l=n*n,u=s-l*BigInt(a);if(this.overTwo){if(u%4n!==0n)throw new RangeError("assertion");u/=4n}return u};QuadraticInteger.prototype.truncatingDivideInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).truncatingDivide(this)};QuadraticInteger.prototype.truncatingDivide=function(t){if(!(t instanceof QuadraticInteger)){if(!t instanceof Expression.Integer)throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=n.multiply(t.conjugate()),s=t.norm();s%2n===0n&&a.a%2n===0n&&a.b%2n===0n;)a=new QuadraticInteger(a.a/2n,a.b/2n,a.D,a.overTwo),s/=2n;return!a.overTwo&&a.D%4===1&&a.a%2n!==0n&&a.b%2n!==0n&&s%2n===0n&&(a=new QuadraticInteger(a.a,a.b,a.D,!0),s/=2n),BigInt(a.a)%s===0n&&BigInt(a.b)%s===0n?new QuadraticInteger(BigInt(a.a)/s,BigInt(a.b)/s,n.D,a.overTwo):null};QuadraticInteger.prototype.negate=function(){return new QuadraticInteger(-BigInt(this.a),-BigInt(this.b),this.D,this.overTwo)};function factors(t){if(t<1n)throw new TypeError;var n=t>1n?BigInt(primeFactor(t)):1n,a=1n,s=1n,l=null,u=1n,c={done:!1,value:null,next:function(){if(n===1n)return this.value=null,this.done=!0,this;if(l==null){if(t%n===0n)return a=a*n,t=t/n,this.value=a,this.done=!1,this;l=factors(t),u=a}return u===a?(u=1n,s=l.next().value):u=u*n,this.value=s==null?null:s*u,this.done=s==null,this}};return c[Symbol.iterator]=function(){return this},c}QuadraticInteger._factors=function(t){return factors(BigInt(t))};QuadraticInteger._complexIntegerPrimeFactor=function(t,n){t=BigInt(t),n=BigInt(n);function a(Ct){var ar=33751571,en=(ar>>Number(Ct%32n))%2;return en===1}function s(Ct,ar){if(typeof Ct!="bigint"||typeof ar!="bigint")throw new TypeError;return Ct*Ct+ar*ar}function l(Ct,ar,en,tn){if(typeof en!="bigint"||typeof tn!="bigint")throw new TypeError;var on=en*en+tn*tn,cn=Ct*en+ar*tn,dn=ar*en-Ct*tn;return cn%on===0n&&dn%on===0n}var u=s(t,n);for(var c of QuadraticInteger._factors(u)){let Ct=0n;for(var d=c;d>0n;){if(a(d)){const ar=BigInt(nthRoot(BigInt(d),2));if(ar*ar===BigInt(d)&&s(ar,Ct)>1n&&l(t,n,ar,Ct))return Ct===0n?new Expression.Complex(Expression.ZERO,Expression.Integer.fromBigInt(ar)):new Expression.Complex(Expression.Integer.fromBigInt(ar),Expression.Integer.fromBigInt(Ct))}Ct=Ct+1n,d=c-Ct*Ct}}if(u>1n)throw new TypeError;return new Expression.Complex(Expression.Integer.fromBigInt(t),Expression.Integer.fromBigInt(n))};function jacobiSymbol(t,n){if(t<0||n%2==0)throw new Error("Invalid value. k = "+t+", n = "+n);t%=n;for(var a=1;t>0;){for(;t%2==0;){t/=2;var s=n%8;(s==3||s==5)&&(a=-a)}var l=n;n=t,t=l,t%4==3&&n%4==3&&(a=-a),t%=n}return n==1?a:0}function LegendreSymbol(t,n){return jacobiSymbol(t,n)}function quadraticIntegers(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const s=Number(BigInt(n))%4===1;for(;;){var l=BigInt(a)*a*n;const d=-t*(s?4n:1n)+l,Ct=t*(s?4n:1n)+l;if(Number(Ct)>Number.MAX_SAFE_INTEGER||Number(d)>Number.MAX_SAFE_INTEGER)throw new RangeError(t);var c=d;if(c>=0n){var u=BigInt(nthRoot(BigInt(c),2));if(c===u**2n)return new QuadraticInteger(u,a,n,s)}var c=Ct;if(c>=0n){var u=BigInt(nthRoot(BigInt(c),2));if(c===u**2n)return new QuadraticInteger(u,a,n,s)}a=a+1n}}QuadraticInteger._fundamentalUnit=function(t){return quadraticIntegers(1n,t,1n)};QuadraticInteger.prototype.primeFactor=function(){var t=this.a,n=this.b,a=BigInt(this.D),l=ngcd(t,a),s=ngcd(t,n);if(s!==1n&&s!==-1n)return s!==a?Expression.Integer.fromBigInt(s).primeFactor():new QuadraticInteger(0n,1n,a);if(l===a)return new QuadraticInteger(0n,1n,a);var l=s,u=this.norm();if(u===1n||u===-1n){var c=QuadraticInteger._fundamentalUnit(a),d=c.conjugate(),Ct=this;return BigInt(Ct.b)*Ct.a<1n?Ct.a<0n?d.negate():d:c}for(var ar=this,en=QuadraticInteger._factors(abs$1(u)),tn=en.next().value;tn!=null;tn=en.next().value){if(a%4n===1n&&tn===2n||a===37n&&(tn===7n||tn===14n||tn===3n||tn===11n)||isPrime(tn)&&a%tn!==0n&&tn!==2n&&LegendreSymbol(Number(a),Number(BigInt(tn)))!==1)continue;var on=quadraticIntegers(tn,a,0n),Ct=ar.truncatingDivide(on);if(Ct!=null)return this.equals(on)?on:on.primeFactor();const cn=on.conjugate();var Ct=ar.truncatingDivide(cn);if(Ct!=null)return this.equals(cn)?cn:cn.primeFactor()}return this};QuadraticInteger.prototype.toString=function(){var t=this.a.toString()+"+"+this.b.toString()+"sqrt("+this.D+")";return this.overTwo&&(t="("+t+")/2"),t};QuadraticInteger.prototype.isUnit=function(){var t=this.norm();return t===1n||t===-1n};QuadraticInteger.prototype.equals=function(t){var n=this;if(!(t instanceof QuadraticInteger)){if(t.equals(Expression.ZERO))return n.a===0n&&n.b===0n;if(t.equals(Expression.ONE))return n.a===1n&&n.b===0n;throw new TypeError}return BigInt(n.a)===t.a&&BigInt(n.b)===t.b&&+n.D==+t.D&&!!n.overTwo==!!t.overTwo};QuadraticInteger.prototype.subtract=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;var a=BigInt(n.a),s=BigInt(n.b),l=BigInt(t.a),u=BigInt(t.b);return!!n.overTwo!=!!t.overTwo&&(n.overTwo&&(l*=2n,u*=2n),t.overTwo&&(a*=2n,s*=2n)),new QuadraticInteger(a-l,s-u,n.D,n.overTwo||t.overTwo)};QuadraticInteger.prototype.isDivisibleBy=function(t){return this.truncatingDivide(t)!=null};QuadraticInteger.prototype.isDivisibleByInteger=function(t){return t.truncatingDivide(this)!=null};QuadraticInteger.prototype.remainder=function(t){if(!(t instanceof QuadraticInteger)){if(t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.SquareRoot)return this.remainder(new QuadraticInteger(Expression.ZERO.toBigInt(),t.a.toBigInt(),t.b.a.toBigInt()));if(!(t instanceof Expression.Integer))throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;var a=n.multiply(t.conjugate()),s=t.norm();if(s===1n||s===-1n)return n.subtract(n);var l=(a.a-BigInt(a.a)%s)/s,u=(a.b-BigInt(a.b)%s)/s;const c=BigInt(n.a),d=BigInt(t.a);if(l===0n&&u===0n){if(c>d&&d>0n)return n.subtract(t.multiply(new QuadraticInteger((c-c%d)/d,0n,n.D)));if(c>-d&&d<0n)return n.subtract(t.multiply(new QuadraticInteger((c-c%-d)/-d,0n,n.D)));if(t.b===0n)return new QuadraticInteger(1n,0n,n.D)}var Ct=new QuadraticInteger(l,u,n.D),ar=n.subtract(t.multiply(Ct));return ar};QuadraticInteger.prototype.remainderInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).remainder(this)};QuadraticInteger.prototype.toExpression=function(){return Expression.Integer.fromBigInt(this.a).add(Expression.Integer.fromBigInt(this.b).multiply(Expression.Integer.fromNumber(this.D).squareRoot())).divide(this.overTwo?Expression.TWO:Expression.ONE)};QuadraticInteger.prototype.abs=function(){return this.a<=0n&&this.b<=0n||this.a<0n&&this.norm()>0n||this.b<0n&&this.norm()<0n?this.negate():this};QuadraticInteger.prototype.isValid=function(){return this.D,this.D,!(this.D===6||this.D%4===1||[2,3,5,6,7,11,13,17,19,21,29,33,37,41,57,73].indexOf(this.D)===-1)};QuadraticInteger.prototype.isPositive=function(){var t=this;return t.a>0n&&t.b>0n||t.a>0n&&t.norm()>0n||t.b>0n&&t.norm()<0n};function toQuadraticInteger(t){if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.SquareRoot&&t.a.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),Expression.ONE.toBigInt(),t.a.a.toBigInt());if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.Multiplication&&t.a.a instanceof Expression.Integer&&t.a.b instanceof Expression.SquareRoot&&t.a.b.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),t.a.a.toBigInt(),t.a.b.a.toBigInt());if(t instanceof Expression.Division&&t.getDenominator().equals(Expression.TWO)){var n=toQuadraticInteger(t.getNumerator());if(n!=null)return n.truncatingDivide(new QuadraticInteger(2,0,n.D))}}//!
QuadraticInteger.toQuadraticInteger=toQuadraticInteger;QuadraticInteger.gcd=function(t,n){for(var a=t,s=n;!s.equals(Expression.ZERO);){var l=a.remainder(s);if(!(BigInt(abs$1(l.norm()))<=BigInt(abs$1(s.norm()))))throw new TypeError("norm");a=s,s=l}return a};function isPrime(t){return BigInt(primeFactor(t))===BigInt(t)}globalThis.QuadraticInteger=QuadraticInteger;QuadraticInteger._checkFactorization=function t(n){typeof n=="string"&&(n=QuadraticInteger.toQuadraticInteger(RPN(n)));for(var a=[],s=n;Math.abs(Number(BigInt(s.norm())))>1;){var l=s.primeFactor();a.push(l),s=s.truncatingDivide(l)}(s.a.toString()!=="1"||s.b.toString()!=="0")&&a.unshift(s),console.log(n+"="+a.map(u=>"("+u.toString()+")").join(""))};const factory=function(t){const n=BigInt(t),a=Math.log2(t),s=1/Math.log2(t),l=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)),u=/^\s*([+\-])?(\d+)?\.?(\d+)?(?:e([+\-]?\d+))?\s*$/;function c(Rx,Ox){this.significand=Rx,this.exponent=Ox}c.BigFloat=c.BigDecimal=function(Rx){if(Rx instanceof c)return Rx;if(typeof Rx=="string"){if(t!==10)throw new Error;const Px=u.exec(Rx);if(Px==null)throw new RangeError(Rx);const $x=Number(Px[4]||"0");return d(BigInt((Px[1]||"")+(Px[2]||"")+(Px[3]||"")),cn(Math.abs($x)<Number.MAX_SAFE_INTEGER?$x:BigInt(Px[4]||"0"),(Px[3]||"").length))}if(typeof Rx=="number"&&Math.floor(Rx)!==Rx&&t===2){const Px=Tx(Rx),Lx=Rx/2**Px*(Number.MAX_SAFE_INTEGER+1)/2,zx=Px-(l-1);return d(BigInt(Lx),zx)}return d(BigInt(Rx),0)},c.toNumber=function(Rx){return Number(BigInt(c.toBigInt(Rx)))},c.toBigInt=function(Rx){const Ox=Rx.exponent,Px=typeof Ox=="number"?Ox:Number(BigInt(Ox));if(Px===0)return Rx.significand;if(Px<0){const $x=cx(Rx.significand,0-Px);if(ux($x,0-Px)!==BigInt(Rx.significand))throw new RangeError("The BigDecimal "+Rx.toString()+" cannot be converted to a BigInt because it is not an integer");return $x}return ux(Rx.significand,Px)};function d(Rx,Ox){return new c(Rx,Ox)}function Ct(Rx){return Rx<0n?0n-Rx:Rx}function ar(Rx){const Ox=Rx.toString(16),Px=+Ox.charCodeAt(0)-48;if(Px<=0)throw new RangeError;return(Ox.length-1)*4+(32-Math.clz32(Math.min(Px,8)))}function en(Rx){const Ox=ar(Rx)-l,Px=Number(Rx>>BigInt(Ox));return Math.log2(Px)+Ox}function tn(Rx){if(Rx=Ct(Rx),t===2)return ar(Rx);const Ox=Number(BigInt(Rx));if(Ox<(Number.MAX_SAFE_INTEGER+1)/16)return Math.floor(Math.log2(Ox+.5)*s)+1;const Px=(Ox<1/0?Math.log2(Ox):en(Rx))*s;if(Math.floor(Px*(1-32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(Px)&&Math.floor(Px*(1+32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(Px))return Math.floor(Px)+1;const $x=Math.floor(Px+.5);return Rx>=BigInt(ox($x))?$x+1:$x}function on(Rx,Ox){if(typeof Rx=="number"&&typeof Ox=="number"){const Lx=Rx+Ox;if(Math.abs(Lx)<=+Number.MAX_SAFE_INTEGER)return Lx}const Px=BigInt(Rx)+BigInt(Ox),$x=Number(Px);return Math.abs($x)<=+Number.MAX_SAFE_INTEGER?$x:Px}function cn(Rx,Ox){return on(Rx,typeof Ox=="number"?0-Ox:-BigInt(Ox))}const dn=Math.ceil(.5*Math.log2(Number.MAX_SAFE_INTEGER+1)/Math.log2(t)-1),Cn=BigInt(t**dn);function In(Rx,Ox){if(Ox==null||Ox.maximumSignificantDigits!=null){if(Rx.significand===0n)return Rx.exponent===0?Rx:d(0n,0);const Px=Rx.significand;let $x=dn,Lx=Cn;if(Px%Lx===0n){for(;Px%(Lx*Lx)===0n;)Lx*=Lx,$x*=2;const zx=Px/Lx;return d(zx,on(Rx.exponent,$x))}}return Rx}function ix(Rx){let Ox={},Px=0;return function($x){let Lx=Ox[$x];return Lx==null&&(Px>100&&(Ox={},Px=0),Lx=Rx($x),Ox[$x]=Lx,Px+=1),Lx}}const ax=ix(function(Rx){return BigInt(Rx)}),ox=ix(function(Rx){return n**BigInt(Rx)});function sx(Rx,Ox){if(Ox!=null){let Px=0;const $x=BigInt(Rx.significand),Lx=Rx.exponent,zx=Ox.maximumSignificantDigits;if(zx!=null){if(!(zx>0))throw new RangeError("maximumSignificantDigits should be positive");if($x===0n)return d(0n,0);Px=tn($x)-zx}const qx=Ox.maximumFractionDigits;if(qx!=null){if(!(qx>=0))throw new RangeError("maximumFractionDigits should be non-negative");Px=0-on(Lx,qx)}if(Px>0){const jx=Ox.roundingMode;let Hx=0n;if(jx==="floor")t===2?Hx=$x>>ax(Px):$x>=0n?Hx=$x/ox(Px):Hx=($x+1n)/ox(Px)-1n;else if(jx==="down")t===2?$x>=0n?Hx=$x>>ax(Px):Hx=-(-$x>>ax(Px)):Hx=$x/ox(Px);else if(jx==="ceil")t===2?Hx=-(-$x>>ax(Px)):$x<0n?Hx=$x/ox(Px):Hx=($x-1n)/ox(Px)+1n;else if(jx==="up")t===2?$x>=0n?Hx=-(-$x>>ax(Px)):Hx=$x>>ax(Px):$x>=0n?Hx=($x-1n)/ox(Px)+1n:Hx=($x+1n)/ox(Px)-1n;else{let Vx=0n,nE=0n;if(t===2){const Wx=ax(Px);Vx=1n<<Wx,$x>=0n?Hx=$x>>Wx:Hx=-(-$x>>Wx),nE=($x-(Hx<<Wx))*2n}else Vx=ox(Px),Hx=$x/Vx,nE=($x-Vx*Hx)*2n;if(nE!==0n){if(jx==="half-up")nE+=nE<0n?-1n:1n;else if(jx==="half-down")nE+=0n;else if(jx==="half-even")nE+=Hx%2n;else throw new RangeError("supported roundingMode (floor/ceil/up/down/half-even/half-up/half-down) is not given");nE>Vx&&(Hx+=1n),-nE>Vx&&(Hx-=1n)}}return d(Hx,on(Lx,Px))}}return Rx}c.unaryMinus=function(Rx){return d(-BigInt(Rx.significand),Rx.exponent)},c.add=function(Rx,Ox,Px=null){const $x=BigInt(Rx.significand),Lx=BigInt(Ox.significand),zx=Rx.exponent,qx=Ox.exponent,jx=cn(zx,qx),Hx=typeof jx=="number"?jx:Number(BigInt(jx));if(Hx!==0){if($x===0n)return sx(Ox,Px);if(Lx===0n)return sx(Rx,Px);const Vx=Px!=null?Px.maximumSignificantDigits+1:0;if(Hx>0)return Vx!==0&&Hx>tn(Lx)+Vx?sx(d(ux($x,Vx)+(Lx<0n?-1n:1n),cn(zx,Vx)),Px):sx(d(ux($x,Hx)+Lx,qx),Px);if(Hx<0)return Vx!==0&&0-Hx>tn($x)+Vx?sx(d(($x<0n?-1n:1n)+ux(Lx,Vx),cn(qx,Vx)),Px):sx(d($x+ux(Lx,0-Hx),zx),Px)}return sx(d($x+Lx,zx),Px)},c.subtract=function(Rx,Ox,Px=null){return c.add(Rx,c.unaryMinus(Ox),Px)},c.multiply=function(Rx,Ox,Px=null){return In(sx(d(BigInt(Rx.significand)*BigInt(Ox.significand),on(Rx.exponent,Ox.exponent)),Px),Px)};function ux(Rx,Ox){if(typeof Rx!="bigint")throw new TypeError;return t===2?Rx<<ax(Ox):ox(Ox)*Rx}function cx(Rx,Ox){if(typeof Rx!="bigint")throw new TypeError;return t===2?Rx>>ax(Ox):Rx/ox(Ox)}c.divide=function(Rx,Ox,Px=null){if(Rx.significand===0n)return Rx;const $x=cn(Rx.exponent,Ox.exponent);let Lx=0;Px!=null&&Px.maximumSignificantDigits!=null?Lx=Px.maximumSignificantDigits+(tn(Ox.significand)-tn(Rx.significand)):Px!=null&&Px.maximumFractionDigits!=null?Lx=on(Px.maximumFractionDigits,$x):Lx=Math.ceil(tn(Ox.significand)*a)+1;let zx=BigInt(Lx>0?ux(Rx.significand,Lx):Rx.significand),qx=BigInt(Lx<0?ux(Ox.significand,0-Lx):Ox.significand);qx<0n&&(zx=-zx,qx=-qx);let jx=0n;if(Px!=null&&Px.roundingMode==="floor")zx>=0n?jx=zx/qx:jx=(zx+1n)/qx-1n;else if(Px!=null&&Px.roundingMode==="ceil")zx<=0n?jx=zx/qx:jx=(zx-1n)/qx+1n;else{zx<0n?jx=(zx+1n)/qx-1n:jx=zx/qx;const Hx=zx-qx*jx;if(console.assert(Hx>=0n),Hx!==0n){if(Px==null)throw new RangeError("rounding is not given for inexact operation");jx*=n**2n,Lx=on(Lx,2),Hx*2n<qx?jx+=1n:Hx*2n===qx?jx+=n**2n/2n:jx+=n**2n/2n+1n}}return sx(d(jx,cn($x,Lx)),Px)};function hx(Rx,Ox){const Px=BigInt(Rx.significand),$x=BigInt(Ox.significand),Lx=Rx.exponent,zx=Ox.exponent,qx=cn(Lx,zx),jx=typeof qx=="number"?+qx:Number(BigInt(qx));if(jx===0)return Px<$x?-1:Px>$x?1:0;if(Px<=0n&&$x>=0n)return Px===0n&&$x===0n?0:-1;if(Px>=0n&&$x<=0n)return Px===0n&&$x===0n?0:1;if(t!==2||jx>=9007199254740992||jx<=-9007199254740992){const nE=on(qx,tn(Px)-tn($x)),Wx=typeof nE=="number"?nE:Number(BigInt(nE));if(Wx!==0)return Px<0n&&$x<0n?Wx>0?-1:1:Wx<0?-1:1}else{const nE=jx>=0?Px:Px>>ax(0-jx),Wx=jx<=0?$x:$x>>ax(jx);if(nE<Wx)return-1;if(Wx<nE)return 1}const Hx=jx<=0?Px:ux(Px,jx),Vx=jx>=0?$x:ux($x,0-jx);return Hx<Vx?-1:Hx>Vx?1:0}c.lessThan=function(Rx,Ox){return hx(Rx,Ox)<0},c.greaterThan=function(Rx,Ox){return hx(Rx,Ox)>0},c.equal=function(Rx,Ox){return hx(Rx,Ox)===0},c.round=function(Rx,Ox){return sx(Rx,Ox)},c.prototype.toString=function(){//! https://tc39.es/ecma262/#sec-number.prototype.tostring
if(t!==10)throw new Error;if(arguments.length!==0)throw new RangeError("not implemented");const Rx=c.BigDecimal(this);let Ox=Rx.significand.toString();//! https://tc39.es/ecma262/#sec-numeric-types-number-tostring
if(Ox==="0")return"0";let Px="";Ox.charCodeAt(0)===45&&(Ox=Ox.slice(1),Px="-");const $x=on(Rx.exponent,Ox.length-1),Lx=typeof $x=="number"?$x:Number(BigInt($x));return Lx>-7&&Lx<21?Px+gx(Ox,Lx+1-Ox.length,0,0):Px+gx(Ox,-(Ox.length-1),0,0)+"e"+(Lx>=0?"+":"")+$x.toString()};function gx(Rx,Ox,Px,$x){let Lx=Rx.length-1+Ox;Lx<=-1&&(Rx=String("0".repeat(0-Lx))+Rx,$x+=0-Lx,Lx=0);let zx=Rx.length-(Lx+1),qx=Rx.length;for(;zx>Px&&qx>=$x&&qx>=1&&0+Rx.charCodeAt(qx-1)===48;)qx-=1,zx-=1;qx<Rx.length&&(Rx=Rx.slice(0,qx));const jx=Math.max(Math.max(0,Px-zx),Math.max(0,$x-Rx.length));return jx!==0&&(Rx+=String("0".repeat(jx))),Rx.length>Lx+1?Rx.slice(0,Lx+1)+"."+Rx.slice(Lx+1):Rx}function fx(Rx,Ox,Px){const $x=on(Ox,Rx.length-1),Lx=typeof $x=="number"?$x:Number(BigInt($x));return Lx<-6||Lx>=+Px?gx(Rx,-(Rx.length-1),0,Px)+"e"+(Lx<0?"":"+")+$x.toString():gx(Rx,typeof Ox=="number"?Ox:Number(BigInt(Ox)),0,Px)}function dx(Rx,Ox,Px){return gx(Rx,Ox,Px,0)}function mx(Rx,Ox,Px){const $x=on(Ox,Rx.length-1),Lx=typeof $x=="number"?$x:Number(BigInt($x));return gx(Rx,-(Rx.length-1),0,Px+1)+"e"+(Lx<0?"":"+")+$x.toString()}c.prototype.toFixed=function(Rx,Ox="half-up"){if(Math.floor(Rx)!==Rx)throw new RangeError;const Px=t===10?d(this.significand,on(this.exponent,Rx)):c.multiply(c.BigDecimal(10n**BigInt(Rx)),this),$x=Px.significand<0n?"-":"",Lx=c.round(Px,{maximumFractionDigits:0,roundingMode:Ox}),zx=c.abs(Lx);return $x+dx(c.toBigInt(zx).toString(),0-Rx,Rx)};function vx(Rx,Ox,Px){if(t===10){const tE=c.round(c.abs(Rx),{maximumSignificantDigits:Ox,roundingMode:Px});return{significand:tE.significand.toString(),exponent:BigInt(tE.exponent)}}const $x=function(tE,lE,iE){if(lE<0n)return c.divide(c.BigDecimal(1),$x(tE,-BigInt(lE),iE),iE);let Xx;for(;lE>=1n;)lE%2n===0n?(tE=c.multiply(tE,tE,iE),lE/=2n):(Xx=Xx==null?tE:c.multiply(tE,Xx,iE),lE-=1n);return Xx??c.BigDecimal(1)},Lx=function(tE,lE,iE){if(!c.greaterThan(tE,c.BigDecimal(0)))throw new RangeError;if(c.lessThan(tE,c.BigDecimal(1)))return 0n-Lx(c.divide(c.BigDecimal(1),tE,iE),lE,iE);const Xx=_x(tE),CE=BigInt(Math.max(0,ar(Xx)-l)),RE=BigInt(Math.floor(Number(Xx>>CE)/Math.log2(lE)*a))<<CE;return RE<3n?RE:RE+Lx(c.divide(tE,$x(c.BigDecimal(lE),RE,iE),iE),lE,iE)},zx=Rx.significand<0n?-1:1,qx=function(tE){return c.round(zx>=0?tE:c.unaryMinus(tE),{maximumFractionDigits:0,roundingMode:Px})};if(c.equal(Rx,c.BigDecimal(0)))return{significand:"0",exponent:0n};const jx=c.BigDecimal(10),Hx=Math.pow(2,Math.ceil(Math.log2(ar(Ct(BigInt(Rx.exponent))+1n)*s)));let Vx={maximumSignificantDigits:Math.max(Hx,t===2?32:8),roundingMode:"half-even"},nE,Wx=0n;do{let tE=c.abs(Rx);if(Wx=0n-Lx(tE,10,Vx),tE=c.multiply($x(jx,Wx,Vx),tE,Vx),c.lessThan(tE,jx)||(Wx-=1n,tE=c.divide(tE,jx,Vx)),c.lessThan(tE,c.BigDecimal(1))&&(Wx+=1n,tE=c.multiply(tE,jx,Vx)),!c.lessThan(tE,c.BigDecimal(1))&&c.lessThan(tE,jx))if(Wx+=BigInt(Ox-1),Vx.maximumSignificantDigits>(Math.abs(Number(Wx))+Ox)*Math.log2(10)+tn(Rx.significand))tE=c.abs(Rx),tE=c.multiply(tE,$x(jx,Wx,Vx),Vx),nE=c.toBigInt(c.abs(qx(tE))).toString();else{tE=c.multiply(tE,$x(jx,BigInt(Ox-1),Vx),Vx),tE=c.abs(tE);const lE=c.multiply(c.multiply(c.BigDecimal(Ct(Wx)+BigInt(Ox)),xx(t,0-Vx.maximumSignificantDigits)),tE);c.equal(qx(c.add(tE,lE)),qx(c.subtract(tE,lE)))&&(nE=c.toBigInt(c.abs(qx(tE))).toString())}Vx={maximumSignificantDigits:Vx.maximumSignificantDigits*2,roundingMode:"half-even"}}while(nE==null);return{significand:nE,exponent:-Wx}}c.prototype.toPrecision=function(Rx,Ox="half-up"){const Px=vx(this,Rx,Ox);return(c.lessThan(this,c.BigDecimal(0))?"-":"")+fx(Px.significand,Px.exponent,Rx)},c.prototype.toExponential=function(Rx,Ox="half-up"){const Px=vx(this,Rx+1,Ox);return(c.lessThan(this,c.BigDecimal(0))?"-":"")+mx(Px.significand,Px.exponent,Rx)};function bx(Rx,Ox){if(+Rx!==t)throw new RangeError("a should be BASE");return d(1n,Ox)}function xx(Rx,Ox){return bx(Rx,Ox)}function _x(Rx){if(Rx.significand===0n)throw new RangeError;return BigInt(tn(Rx.significand))+BigInt(Rx.exponent)}c.abs=function(Rx){return Rx.significand<0n?c.unaryMinus(Rx):Rx},c.sign=function(Rx){return Rx.significand<0n?-1:Rx.significand>0n?1:0},c.max=function(Rx,Ox){if(arguments.length>2)throw new RangeError("not implemented");return c.lessThan(Rx,Ox)?Ox:Rx},c.min=function(Rx,Ox){if(arguments.length>2)throw new RangeError("not implemented");return c.greaterThan(Rx,Ox)?Ox:Rx};function Ex(Rx){let Ox=1;for(;!c.equal(c.round(Rx,{maximumSignificantDigits:Ox,roundingMode:"half-even"}),Rx);)Ox*=2;let Px=Ox/2,$x=Ox;for(;$x-1>Px;){const Lx=Px+Math.floor(($x-Px)/2);c.equal(c.round(Rx,{maximumSignificantDigits:Lx,roundingMode:"half-even"}),Rx)?$x=Lx:Px=Lx}return $x}function Tx(Rx){const Ox=Math.floor(Math.log(Math.abs(Rx))/Math.log(2))-1;return Math.abs(Rx)/2**Ox>=2?Ox+1:Ox}function Cx(Rx,Ox,Px){function $x(Lx){return Px==="exp"?Math.ceil(Number(BigInt(c.toBigInt(c.round(Lx,{maximumFractionDigits:0,roundingMode:"half-even"}))))/Math.log(t)):Px==="log"?Math.ceil(Math.log2(Math.ceil(Math.max(Number(_x(Lx)),1)*Math.log(t)))*s):1}return function(Lx,zx){if(c.equal(Lx,c.BigDecimal(Rx)))return Ox(Lx,{maximumSignificantDigits:1,roundingMode:"half-even"});let qx=c.BigDecimal(0),jx=0,Hx=c.BigDecimal(0);do{if(jx>4*(10/t)&&zx.maximumSignificantDigits!=null&&zx.roundingMode==="half-even"&&Px!=="sin"&&Px!=="cos")throw console.error(Lx,zx),new Error;jx+=1;const Vx={maximumSignificantDigits:Math.ceil(Math.max(zx.maximumSignificantDigits||zx.maximumFractionDigits+1+$x(Lx)-1,Ex(Lx))*Math.pow(2,Math.ceil((jx-1)/3)))+2+(t===2?1:0),roundingMode:"half-even"};if(qx=void 0,t===2&&Math.max(Vx.maximumSignificantDigits+2,Ex(Lx)+1)<=Math.log2(Number.MAX_SAFE_INTEGER+1)){const nE=Lx.exponent,Wx=typeof nE=="number"?nE:Number(BigInt(nE)),tE=Number(BigInt(Lx.significand))*t**Wx;if(Px!=="sin"&&Px!=="cos"&&Px!=="tan"||Math.abs(tE)<=Math.PI/4){const lE=Math[Px](tE),iE=(Number.MIN_VALUE*1.25>Number.MIN_VALUE?Number.MIN_VALUE:Number.MIN_VALUE*(Number.MAX_SAFE_INTEGER+1)/2)||2**-1022,Xx=Math.abs(lE);Xx<1/0&&Xx>iE&&(qx=c.BigDecimal(lE))}}qx==null&&(qx=Ox(Lx,Vx)),Hx=c.multiply(bx(t,-BigInt(Vx.maximumSignificantDigits)),c.abs(qx))}while(!c.equal(c.round(c.subtract(qx,Hx),zx),c.round(c.add(qx,Hx),zx)));return c.round(qx,zx)}}function Mx(Rx,Ox){let Px=c.add(Rx,c.BigDecimal(1)),$x=Rx;for(;c.lessThan($x,Px);)Px=$x,$x=c.divide(c.add(c.divide(Rx,$x,Ox),$x),c.BigDecimal(2),Ox);return $x}c.log=Cx(1,function(Ox,Px){if(!c.greaterThan(Ox,c.BigDecimal(0)))throw new RangeError;const $x={maximumSignificantDigits:Px.maximumSignificantDigits+Math.ceil(Math.log2(Px.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};{//! ln(f * BASE**k) = ln(f) + k * ln(BASE), where (1/BASE) <= f <= BASE
let nE=_x(Ox)-1n,Wx=c.multiply(bx(t,-nE),Ox),tE=c.round(c.multiply(Wx,Wx),{maximumSignificantDigits:3,roundingMode:"half-even"});if(c.greaterThan(tE,bx(t,1n))&&(nE+=1n,Wx=c.multiply(bx(t,-1n),Wx)),c.lessThan(tE,bx(t,-1n))&&(nE-=1n,Wx=c.multiply(bx(t,1n),Wx)),nE!==0n)return c.add(c.log(Wx,$x),c.multiply(c.BigDecimal(2n*nE),c.log(Mx(c.BigDecimal(t),$x),$x)))}//! log(x) = log((1 + g) / (1 - g)) = 2*(g + g**3/3 + g**5/5 + ...)
const Lx=c.divide(c.subtract(Ox,c.BigDecimal(1)),c.add(Ox,c.BigDecimal(1)),$x);let zx=1,qx=c.BigDecimal(1),jx=qx,Hx=c.BigDecimal(0);const Vx=c.multiply(Lx,Lx,$x);for(;!c.equal(Hx,jx);)zx+=2,qx=c.multiply(qx,c.BigDecimal(zx-2)),qx=c.multiply(qx,Vx),qx=c.divide(qx,c.BigDecimal(zx),$x),Hx=jx,jx=c.add(jx,qx,$x);return c.multiply(c.multiply(c.BigDecimal(2),Lx),jx)},"log");function Ax(Rx){return c.divide(c.BigDecimal(Math.floor(Rx*(Number.MAX_SAFE_INTEGER+1))),c.add(c.BigDecimal(Number.MAX_SAFE_INTEGER),c.BigDecimal(1)),{maximumSignificantDigits:Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*s+.5),roundingMode:"half-even"})}c.exp=Cx(0,function(Ox,Px){//! k = round(x / ln(BASE));
//! exp(x) = exp(x - k * ln(BASE) + k * ln(BASE)) = exp(x - k * ln(BASE)) * BASE**k
const $x={maximumSignificantDigits:Px.maximumSignificantDigits+Math.ceil(Math.log2(Px.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};if(!c.equal(Ox,c.BigDecimal(0))){const Hx=Ax(Math.log(t)),Vx=c.round(c.divide(Ox,Hx,{maximumSignificantDigits:Math.max(Number(_x(Ox)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!c.equal(Vx,c.BigDecimal(0))){const nE=c.log(c.BigDecimal(t),{maximumSignificantDigits:$x.maximumSignificantDigits+Number(_x(Vx)),roundingMode:"half-even"}),Wx=c.round(c.divide(Ox,nE,{maximumSignificantDigits:Math.max(Number(_x(Ox)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!c.equal(Wx,c.BigDecimal(0))){const tE=c.subtract(Ox,c.multiply(Wx,nE));return c.multiply(bx(t,c.toBigInt(Wx)),c.exp(tE,$x))}}}let Lx=0,zx=c.BigDecimal(1),qx=zx,jx=c.BigDecimal(0);for(;!c.equal(jx,qx);)Lx+=1,zx=c.multiply(zx,Ox),zx=c.divide(zx,c.BigDecimal(Lx),$x),jx=qx,qx=c.add(qx,zx,$x);return qx},"exp");function Nx(Rx,Ox){const Px=Ax(Math.PI/4);if(c.greaterThan(c.abs(Rx),Px)){const $x={maximumSignificantDigits:Ox.maximumSignificantDigits+Ex(Rx)+Number(_x(Rx))+1+Math.ceil(42*s),roundingMode:"half-even"},Lx=c.multiply(c.BigDecimal(2),c.atan(c.BigDecimal(1),$x)),zx=c.round(c.divide(Rx,Lx,{maximumSignificantDigits:Math.max(Number(_x(Rx)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});return{remainder:c.subtract(Rx,c.multiply(zx,Lx)),k:(Number(c.toBigInt(zx)%4n)+4)%4}}return{remainder:Rx,k:0}}function Ux(Rx,Ox,Px){const $x=Nx(Rx,Ox),Lx=$x.remainder,zx=($x.k+(Px?3:0))%4,qx={maximumSignificantDigits:Ox.maximumSignificantDigits+Math.ceil(Math.log2(Ox.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};let jx=zx===1||zx===3?1:0,Hx=c.BigDecimal(1),Vx=Hx,nE=c.BigDecimal(0);const Wx=c.multiply(Lx,Lx);for(;!c.equal(nE,Vx);)jx+=2,Hx=c.multiply(Hx,Wx),Hx=c.divide(Hx,c.BigDecimal(-jx*(jx-1)),qx),nE=Vx,Vx=c.add(Vx,Hx,qx);return(zx===1||zx===2)&&(Vx=c.unaryMinus(Vx)),zx===1||zx===3?c.multiply(Lx,Vx):Vx}return c.sin=Cx(0,function(Rx,Ox){return Ux(Rx,Ox,!0)},"sin"),c.cos=Cx(0,function(Rx,Ox){return Ux(Rx,Ox,!1)},"cos"),c.atan=Cx(0,function(Rx,Ox){if(c.greaterThan(c.abs(Rx),c.BigDecimal(1))){const Vx={maximumFractionDigits:Ox.maximumSignificantDigits+1,roundingMode:"half-even"},nE=c.multiply(c.atan(c.BigDecimal(1),Vx),c.BigDecimal(2));return c.multiply(c.BigDecimal(c.lessThan(Rx,c.BigDecimal(0))?-1:1),c.subtract(nE,c.atan(c.divide(c.BigDecimal(1),c.abs(Rx),Vx),Vx)))}const Px={maximumSignificantDigits:Ox.maximumSignificantDigits+Math.ceil(Math.log2(Ox.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};let $x=0;const Lx=c.multiply(Rx,Rx),zx=c.add(c.BigDecimal(1),Lx);let qx=c.divide(c.BigDecimal(1),zx,Px),jx=qx,Hx=c.BigDecimal(0);for(;!c.equal(Hx,jx);)$x+=1,qx=c.multiply(qx,c.multiply(c.BigDecimal(2*$x),Lx)),qx=c.divide(qx,c.multiply(c.BigDecimal(2*$x+1),zx),Px),Hx=jx,jx=c.add(jx,qx,Px);return c.multiply(Rx,jx)},"atan"),c.sqrt=function(Rx,Ox){if(c.lessThan(Rx,c.BigDecimal(0)))throw new RangeError;if(c.equal(Rx,c.BigDecimal(0)))return Rx;const Px=_x(Rx)/2n,$x=bx(t,Px),Lx=c.multiply(Rx,bx(t,-(2n*Px))),zx=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*s)-1,qx=c.toNumber(c.round(c.multiply(Lx,bx(t,zx)),{maximumFractionDigits:0,roundingMode:"half-even"}))/t**zx,jx=Math.sqrt(qx),Hx=2*(Ox.maximumSignificantDigits||Ox.maximumFractionDigits+Math.ceil(Ex(Rx)/2)||1);let Vx=c.multiply(c.BigDecimal(Math.sign(jx)*Math.floor(Math.abs(jx)*t**zx+.5)),bx(t,-zx));const nE=function(Wx,tE){return c.divide(c.add(Lx,c.multiply(Wx,Wx)),c.multiply(c.BigDecimal(2),Wx),tE)};for(let Wx=Math.max(zx-1,1);Wx<=Hx;Wx*=2)Vx=nE(Vx,{maximumSignificantDigits:Wx,roundingMode:"half-even"});return Vx=nE(Vx,Ox),c.multiply(Vx,$x)},c},BigDecimal=factory(10),BigFloat=factory(2),BASE=2;function MakeMath(t,n){function a(){}a.nextAfter=function(l,u){if(u==null)throw new RangeError;if(u.roundingMode!=="floor"&&u.roundingMode!=="ceil")throw new RangeError;var c=t.round(l,u);if(!t.equal(l,c))return c;var d=function(Ct,ar,en,tn){var on=t.multiply(t.BigDecimal(tn.roundingMode==="floor"?-1:1),s(-ar)),cn=t.multiply(t.abs(en),on);return t.add(Ct,cn,tn)};if(u.maximumFractionDigits!=null)return d(l,u.maximumFractionDigits,t.BigDecimal(1),u);if(u.maximumSignificantDigits!=null)return d(l,u.maximumSignificantDigits,l,u);throw new RangeError};var s=function(l){var u=t.round(t.BigDecimal(n),{maximumSignificantDigits:1,roundingMode:"half-even"}),c=u;if(l<0)return t.divide(t.BigDecimal(1),s(-l),null);for(var d=t.BigDecimal(1);l>=1;)l%2===0?(c=t.multiply(c,c),l=l/2):(d=d==null?c:t.multiply(c,d),l=l-1);return d};return a}const BigDecimalMath=MakeMath(BigDecimal,10),BigFloatMath=MakeMath(BigFloat,2);function Interval(t,n){if(BigFloat.greaterThan(t,n))throw new TypeError;this.a=t,this.b=n}Interval._rounding=function(t,n){return t==null?null:t.maximumFractionDigits!=null?{maximumFractionDigits:t.maximumFractionDigits,roundingMode:n}:{maximumSignificantDigits:t.maximumSignificantDigits,roundingMode:n}};Interval.unaryMinus=function(t){return new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a))};Interval.add=function(t,n,a=null){return new Interval(BigFloat.add(t.a,n.a,Interval._rounding(a,"floor")),BigFloat.add(t.b,n.b,Interval._rounding(a,"ceil")))};Interval.subtract=function(t,n,a=null){return new Interval(BigFloat.subtract(t.a,n.b,Interval._rounding(a,"floor")),BigFloat.subtract(t.b,n.a,Interval._rounding(a,"ceil")))};Interval._multiply=function(t,n,a,s,l){const u=BigFloat.sign,c=u(t),d=u(n),Ct=u(a),ar=u(s);if(c>=0)return Ct>=0?l(t,a,n,s):ar<=0?l(n,a,t,s):l(n,a,n,s);if(d<=0)return ar<=0?l(n,s,t,a):Ct>=0?l(t,s,n,a):l(t,s,t,a);if(Ct>=0)return l(t,s,n,s);if(ar<=0)return l(n,a,t,a);var en=l(t,s,t,a),tn=l(n,a,n,s);return new Interval(BigFloat.min(en.a,tn.a),BigFloat.max(en.b,tn.b))};Interval.multiply=function(t,n,a=null){var s=Interval._rounding(a,"floor"),l=Interval._rounding(a,"ceil");if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var u=BigFloat.multiply(t.a,n.a);return new Interval(BigFloat.round(u,s),BigFloat.round(u,l))}var c=function(d,Ct,ar,en){return new Interval(BigFloat.multiply(d,Ct,s),BigFloat.multiply(ar,en,l))};return Interval._multiply(t.a,t.b,n.a,n.b,c)};Interval.divide=function(t,n,a){var s=Interval._rounding(a,"floor"),l=Interval._rounding(a,"ceil");if(BigFloat.sign(n.a)<=0&&BigFloat.sign(n.b)>=0){if(BigFloat.equal(n.a,n.b))throw new RangeError;return"CANNOT_DIVIDE"}if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var u=BigFloat.divide(t.a,n.a,s),c=BigFloat.subtract(t.a,BigFloat.multiply(n.a,u));return new Interval(u,BigFloat.equal(c,BigFloat.BigFloat(0))?u:BigFloatMath.nextAfter(u,l))}var d=function(Ct,ar,en,tn){return new Interval(BigFloat.divide(Ct,tn,s),BigFloat.divide(en,ar,l))};return Interval._multiply(t.a,t.b,n.a,n.b,d)};Interval.sqrt=function(t,n){if(BigFloat.sign(t.a)<0&&BigFloat.sign(t.b)>=0)return"CANNOT_DIVIDE";if(BigFloat.equal(t.a,t.b)){var a=BigFloat.sqrt(t.a,Interval._rounding(n,"floor")),s=BigFloat.equal(BigFloat.multiply(a,a),t.b)?a:BigFloatMath.nextAfter(a,Interval._rounding(n,"ceil"));return new Interval(a,s)}return Interval._map(t,function(l,u){return BigFloat.sqrt(l,u)},n)};Interval.exp=function(t,n){return Interval._map(t,BigFloat.exp,n)};Interval.log=function(t,n){return BigFloat.sign(t.a)<=0&&BigFloat.sign(t.b)>0?"CANNOT_DIVIDE":BigFloat.equal(t.a,t.b)&&BigFloat.equal(t.b,BigFloat.BigFloat(1))?new Interval(BigFloat.BigFloat(0),BigFloat.BigFloat(0)):Interval._map(t,BigFloat.log,n)};Interval.atan=function(t,n){return Interval._map(t,BigFloat.atan,n)};Interval._mapValue=function(t,n,a){var s=n(t,Interval._rounding(a,"floor")),l=s,u=s;return BigFloat.equal(t,BigFloat.BigFloat(0))||(u=BigFloatMath.nextAfter(s,Interval._rounding(a,"ceil"))),new Interval(l,u)};Interval._map=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n,a);var s=n(t.a,Interval._rounding(a,"floor")),l=n(t.b,Interval._rounding(a,"ceil"));return new Interval(s,l)};Interval._trigonometry=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n==="sin"?BigFloat.sin:BigFloat.cos,a);var s=Object.assign({},Interval._rounding(a,"floor"),{roundingMode:"half-even"}),l=BigFloat.multiply(BigFloat.BigFloat(8),BigFloat.atan(BigFloat.BigFloat(1),s));if(!BigFloat.lessThan(BigFloat.subtract(t.b,t.a),l))return new Interval(BigFloat.BigFloat(-1),BigFloat.BigFloat(1));var u=function(dn,Cn){return n==="sin"?BigFloat.sin(dn,Cn):BigFloat.cos(dn,Cn)},c=BigFloat.divide(BigFloat.add(t.a,t.b),BigFloat.BigFloat(2),s),d=function(dn){var Cn=BigFloat.multiply(BigFloat.divide(BigFloat.BigFloat(dn),BigFloat.BigFloat(4),s),l),In=BigFloat.round(BigFloat.divide(BigFloat.subtract(c,Cn,s),l,s),{maximumFractionDigits:0,roundingMode:"half-even"});return BigFloat.add(BigFloat.multiply(l,In),Cn)},Ct=d(n==="sin"?3:2),ar=d(n==="sin"?1:0);const en=Interval._rounding(a,"floor"),tn=Interval._rounding(a,"ceil");var on=BigFloat.lessThan(Ct,t.a)?u(t.a,en):BigFloat.greaterThan(Ct,t.b)?u(t.b,en):BigFloat.BigFloat(-1),cn=BigFloat.lessThan(ar,t.a)?u(t.a,tn):BigFloat.greaterThan(ar,t.b)?u(t.b,tn):BigFloat.BigFloat(1);return new Interval(on,cn)};Interval.sin=function(t,n){return Interval._trigonometry(t,"sin",n)};Interval.cos=function(t,n){return Interval._trigonometry(t,"cos",n)};Interval.fromIntegers=function(t,n){var a=BigFloat.BigFloat(t),s=BigFloat.BigFloat(n);return console.assert(!BigFloat.lessThan(s,a)),new Interval(a,s)};Interval.abs=function(t){return BigFloat.lessThan(t.a,BigFloat.BigFloat(0))?BigFloat.lessThan(t.b,BigFloat.BigFloat(0))?new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a)):new Interval(BigFloat.BigFloat(0),BigFloat.max(BigFloat.unaryMinus(t.a),t.b)):t};Interval.exponentiate=function(t,n,a){for(var s=void 0;n>=1;)n===2*Math.floor(n/2)?(t=Interval.multiply(t,t,a),n=Math.floor(n/2)):(s=s==null?t:Interval.multiply(t,s,a),n-=1);return s};Interval.formatToDecimal=function(t,n){var a=BigFloat.sign(t.a),s=BigFloat.sign(t.b),l=(a||s)===(s||a)?a||s:0;t=Interval.abs(t);var u=function(ar,en){return n.fractionDigits!=null?ar.toFixed(n.fractionDigits,en):ar.toPrecision(n.significantDigits,en)},c=u(t.a,"half-up"),d=BigFloat.equal(t.a,t.b)?c:u(t.b,"half-down"),Ct=function(ar){return!/[^0\.]/.test(ar)};if(c===d&&(l!==0||Ct(c)&&Ct(d)))return(l<0?"-":l>0&&Ct(c)&&Ct(d)?"+":"")+c};Interval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};var calcAt=function(t,n,a){for(var s=evaluateExpression(Expression.ZERO,a),l=t.getDegree();l>=0;l--){s=Interval.multiply(s,n,a);var u=evaluateExpression(t.getCoefficient(l),a);if(u==="CANNOT_DIVIDE"||u==null)return u;s=Interval.add(s,u,a)}return s},evaluateExpression=function(t,n){if(t instanceof Expression.Integer){var a=t.value;return Interval.fromIntegers(a,a)}else if(t instanceof Expression.NthRoot){var s=t.a,a=t.n,l=evaluateExpression(s,n);return l==="CANNOT_DIVIDE"||l==null?l:a==2?Interval.sqrt(l,n):Interval.exp(Interval.divide(Interval.log(l,n),Interval.fromIntegers(a,a),n),n)}else if(t instanceof Expression.BinaryOperation){if(t instanceof Expression.Addition&&Expression.has(t,Expression.PolynomialRootSymbol)){var u=Expression.getVariable(t),c=Polynomial.toPolynomial(t,u);if(c.hasIntegerCoefficients()){var d=evaluateExpression(u,n);return calcAt(c,d,n)}}if(t.a===Expression.E&&t.getS()==="^"){var Ct=evaluateExpression(t.b,n);return Ct==="CANNOT_DIVIDE"||Ct==null?Ct:Interval.exp(Ct,n)}var s=evaluateExpression(t.a,n);if(s==="CANNOT_DIVIDE"||s==null)return s;var Ct=evaluateExpression(t.b,n);if(Ct==="CANNOT_DIVIDE"||Ct==null)return Ct;var ar=t.getS();if(ar==="+")return Interval.add(s,Ct,n);if(ar==="-")return Interval.subtract(s,Ct,n);if(ar==="*")return Interval.multiply(s,Ct,n);if(ar==="/")return Interval.divide(s,Ct,n);if(ar==="^"){if(!(t.b instanceof Expression.Integer)||t.b.toNumber()<=0||t.b.toNumber()>Number.MAX_SAFE_INTEGER){var en=Interval.log(s,n);return en==="CANNOT_DIVIDE"?en:Interval.exp(Interval.multiply(en,Ct,n),n)}var a=t.b.toNumber();return Interval.exponentiate(s,a,n)}}else if(t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot){var tn=(t instanceof Expression.ExpressionPolynomialRoot?t.root:t).toDecimal(n.maximumSignificantDigits||n.maximumFractionDigits);const cn=tn.a.getDenominator().multiply(tn.b.getDenominator()).value;return Interval.divide(Interval.fromIntegers(tn.b.getDenominator().multiply(tn.a.getNumerator()).value,tn.a.getDenominator().multiply(tn.b.getNumerator()).value),Interval.fromIntegers(cn,cn),n)}else{if(t===Expression.E)return Interval.exp(Interval.fromIntegers(1,1),n);if(t===Expression.PI)return Interval.multiply(Interval.fromIntegers(4,4),Interval.atan(Interval.fromIntegers(1,1),n));if(t instanceof Expression.Function){var on=evaluateExpression((t instanceof Expression.Sin||t instanceof Expression.Cos)&&t.a instanceof Expression.Radians?t.a.value:t.a,n);if(on==="CANNOT_DIVIDE"||on==null)return on;if(t instanceof Expression.Sin)return Interval.sin(on,n);if(t instanceof Expression.Cos)return Interval.cos(on,n);if(t instanceof Expression.Logarithm)return Interval.log(on,n);if(t instanceof Expression.Arctan)return Interval.atan(on,n)}else if(t instanceof Expression.ExpressionWithPolynomialRoot)return evaluateExpression(t.e,n)}},decimalToString=function(t){return t.replace(/[eE]/g,"*10^")},complexToString=function(t,n){return t+(/^[\-\+]/.test(n)?n.replace(/^([\-\+])[\s\S]+/g,"$1"):t!==""?"+":"")+(n!=="1"&&n!=="-1"?n.replace(/^[\-\+]/g,"")+"*i":"i")},toDecimalStringInternal$1=function(t,n,a,s){if(a=a||decimalToString,s=s||complexToString,n.fractionDigits==null&&n.significantDigits==null||n.fractionDigits!=null&&n.significantDigits!=null)throw new RangeError;if(n.fractionDigits!=null&&(n.fractionDigits<0||n.fractionDigits>Number.MAX_SAFE_INTEGER)||n.significantDigits!=null&&(n.significantDigits<1||n.significantDigits>Number.MAX_SAFE_INTEGER)||n.roundingMode!=null)throw new RangeError;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex)){var l=t.getNumerator(),u=t.getDenominator();if((u instanceof Expression.Integer||Expression.has(u,Expression.PolynomialRootSymbol)||Expression.has(u,Expression.ExpressionPolynomialRoot)||Expression._isPositive(u))&&(l instanceof Expression.Addition||l instanceof Expression.Multiplication||l instanceof Expression.Complex)){const dn=Expression.getComplexNumberParts(l);let Cn=dn.real,In=dn.imaginary;if(!In.equals(Expression.ZERO)){Cn=Cn.divide(u),In=In.divide(u);var c=Cn.equals(Expression.ZERO)?"":toDecimalStringInternal$1(Cn,n,a,s),d=toDecimalStringInternal$1(In,n,a,s);return s(c,d)}}}if(t instanceof Expression.Integer||t instanceof Expression.Division&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Integer)return a(primeFactor._rationalNumberToDecimalString(t.getNumerator().toBigInt(),t.getDenominator().toBigInt(),n));console.assert(BASE%2===0);var Ct=void 0,ar=1;//!new
//!
for(var en=Expression.has(t,Expression.Function)||Expression.has(t,Expression.Exponentiation);Ct==null;){if(ar>6e4&&ar>(n.fractionDigits||n.significantDigits)*4*Math.log2(10)){debugger;throw new TypeError}const dn=en?{maximumSignificantDigits:ar}:{maximumFractionDigits:ar-1};var tn=evaluateExpression(t,dn);if(tn==null)return;if(tn!=="CANNOT_DIVIDE"&&(Ct=Interval.formatToDecimal(tn,n)),tn!=="CANNOT_DIVIDE"&&Ct==null&&n.fractionDigits!=null&&ar===1){var on=BigFloat.max(BigFloat.abs(tn.a),BigFloat.abs(tn.b)).toFixed(0).length;ar=Math.max(Math.ceil((on+n.fractionDigits+1)*Math.log2(10)/2),2)}if(tn!=="CANNOT_DIVIDE"&&Ct==null&&n.significantDigits!=null&&ar===1&&BigFloat.sign(tn.a)===BigFloat.sign(tn.b)){var cn=BigFloat.log(BigFloat.min(BigFloat.abs(tn.a),BigFloat.abs(tn.b)),{maximumSignificantDigits:1,roundingMode:"half-even"}).toFixed(0).length;ar=Math.max(Math.ceil(cn*Math.log2(10)/2),1)}ar*=2}return a(Ct)};toDecimalStringInternal$1.testables={BigDecimalMath,BigDecimal,BigFloat,Interval};function gcdOfSafeIntegers(t,n){for(t=Math.abs(t),n=Math.abs(n);n!==0;){const a=t-Math.floor(t/n)*n;t=n,n=a}return t}Math.gcd=function(t,n){if(typeof t!="number"&&typeof n!="number")throw new RangeError;const a=1073741823;if((t|0)===t&&Math.abs(t)<=a&&(n|0)===n&&Math.abs(n)<=a){let s=Math.abs(t),l=Math.abs(n);for(;l!==0;){const u=s%l;s=l,l=u}return s}return gcdOfSafeIntegers(t,n)};function integerMin(t,n){return t.compareTo(n)<0?t:n}function bigIntGCDWrapper2(t,n){if(Math.abs(SmallBigInt.toNumber(t))>=1/0&&Math.abs(SmallBigInt.toNumber(n))>=1/0){var a=integerMin(Expression.Integer.fromBigInt(t).abs(),Expression.Integer.fromBigInt(n).abs()).bitLength();if(a=Math.pow(2,Math.ceil(Math.log2(a))),a>=128*1024&&a>lastMaxSize){lastMaxSize=a;var s=new TypeError("big size of gcd "+a);globalThis.onerror!=null&&globalThis.onerror(s.message,"",0,0,s)}}return gcd$1(SmallBigInt.BigInt(t),SmallBigInt.BigInt(n))}function bigIntGCDWrapper(t,n){return typeof t=="number"&&typeof n=="number"?Math.gcd(t,n):bigIntGCDWrapper2(t,n)}var pow=function(t,n,a){if(!(n>=0))throw new RangeError;if(n>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return n<1?a:2*Math.floor(n/2)!==n?pow(t,n-1,a.multiply(t)):pow(t.multiply(t),Math.floor(n/2),a)},binomialCoefficient=function(t,n){return n===0?Expression.ONE:t.multiply(binomialCoefficient(t.subtract(Expression.ONE),n-1)).divide(Integer$2.fromNumber(n))},matrixInN=function(t,n){var a=-1;//!
var s=t.map(function(sx,ux,cx){return ux===cx?sx:Expression.ZERO}),l=t.subtract(s);if(l.isNilpotent()&&s.multiply(l).eql(l.multiply(s))){for(var u=0;u<s.cols();u+=1)if(s.e(u,u).equals(Expression.ZERO)){for(var c=1;!l.pow(c).map(function(ux,cx,hx){return cx!==u?Expression.ZERO:ux}).isZero();){if(c>=l.cols())throw new TypeError("assertion");c+=1}a=Math.max(a,c-1)}for(var d=Matrix$1.Zero(l.cols(),l.cols()),u=0;u<l.cols()&&(u===0||!l.isZero());u+=1){var Ct=s.map(function(cx,hx,gx){return hx===gx?cx.equals(Expression.ZERO)?Expression.ZERO:cx.pow(n.subtract(Expression.Integer.fromNumber(u))):Expression.ZERO});d=d.add(Ct.multiply(l.pow(u)).scale(binomialCoefficient(n,u)))}var In=new Expression.Matrix(d);if(a>0){var ar=[];ar.push(new ExpressionWithCondition(In,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var en=1;en<=a;en+=1)ar.push(new ExpressionWithCondition(new Expression.Matrix(t.pow(en)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(en)))));return new Expression.Cases(ar)}return a!==-1?new ExpressionWithCondition(In,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):In}//!
for(var tn=function(sx){return sx instanceof Expression.Symbol||sx instanceof Exponentiation$1&&getBase(sx)instanceof Integer$2&&getBase(sx).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(sx).inverse())?!0:isConstant$1(sx)||isConstant$1(sx.divide(Expression.E))},on=t,cn="aa",dn=t.map(function(sx,ux,cx){return new Expression.Symbol(cn+"_("+ux+","+cx+")")}),Cn=dn.map(function(sx,ux,cx){return Expression.ZERO}),In=void 0,ix=-1;!dn.eql(Cn);)ix+=1,Cn=dn,In=dn.multiply(on),dn=In.map(function(sx,ux,cx){var hx=dn.e(ux,cx)instanceof Expression.Symbol&&dn.e(ux,cx).symbol.slice(0,cn.length)===cn;if(!hx)return dn.e(ux,cx);if(!(sx instanceof Integer$2)){var gx=Polynomial$1.toPolynomial(sx.getNumerator(),n).getDegree(),fx=dn.e(ux,cx),dx=Polynomial$1.toPolynomial(sx.getNumerator(),fx),mx=dx.getLeadingCoefficient().divide(sx.getDenominator());if(gx!==0&&dx.getDegree()===1&&on.e(ux,cx).equals(Expression.ZERO)&&(mx instanceof Integer$2||mx instanceof Expression.Complex||tn(mx))){var vx=mx.pow(n).divide(mx.pow(Integer$2.fromNumber(gx+1))).multiply(binomialCoefficient(n.subtract(Expression.ONE),gx)),bx=sx.subtract(mx.multiply(fx)).divide(vx);if(bx instanceof Integer$2)return console.log("!",sx.toString()),bx.multiply(mx.pow(n).divide(mx.pow(Integer$2.fromNumber(gx+2))).multiply(binomialCoefficient(n.subtract(Expression.ONE),gx+1)))}}if(sx.equals(dn.e(ux,cx)))return on.e(ux,cx);if(dn.e(ux,cx)instanceof Expression.Symbol&&dn.e(ux,cx).symbol===cn+"_("+ux+","+cx+")"&&!sx.equals(Expression.ZERO)){var fx=dn.e(ux,cx),dx=Polynomial$1.toPolynomial(sx.getNumerator(),fx),mx=dx.getLeadingCoefficient().divide(sx.getDenominator()),xx=dx.getCoefficient(0).divide(sx.getDenominator());if(!Expression.has(xx,Expression.Symbol)&&sx.equals(mx.multiply(fx).add(xx))){var _x=mx.equals(Expression.ONE)?xx.multiply(n.subtract(Expression.TWO)):xx.multiply(Expression.ONE.subtract(mx.pow(n.subtract(Expression.TWO))).divide(Expression.ONE.subtract(mx)));return mx.pow(n.subtract(Expression.TWO)).multiply(on.e(ux,cx)).add(_x)}}if(dn.e(ux,cx)instanceof Expression.Symbol&&dn.e(ux,cx).symbol===cn+"_("+ux+","+cx+")"&&sx.equals(Expression.ZERO)){//!TODO: conditions.push(iteration); //? n > 0 && n <= 3 , n > 3 - ?
return a=ix,Expression.ZERO}var Ex=sx.subtract(dn.e(ux,cx));if(Ex instanceof Integer$2)return on.e(ux,cx).add(Ex.multiply(n.subtract(Expression.TWO)));var Tx=function(Mx){if(!tn(Mx))return Expression.ZERO;var Ax=dn.e(ux,cx);return Mx.pow(n.subtract(Expression.ONE)).add(Mx.multiply(Ax))};if(!sx.equals(Expression.ZERO)){var fx=dn.e(ux,cx),dx=Polynomial$1.toPolynomial(sx.getNumerator(),fx),mx=dx.getLeadingCoefficient().divide(sx.getDenominator()),Cx=mx;if(sx.equals(Tx(Cx)))return Cx.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(on.e(ux,cx)));var Cx=mx.negate();if(sx.equals(Tx(Cx)))return Cx.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(on.e(ux,cx)))}return dn.e(ux,cx)});for(var en=0;en<dn.rows();en+=1)for(var ax=0;ax<dn.cols();ax+=1){var ox=dn.e(en,ax);if(ox instanceof Expression.Symbol&&ox.symbol.slice(0,cn.length)===cn)return}if(a>0){var ar=[];ar.push(new ExpressionWithCondition(new Expression.Matrix(In),Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var en=1;en<=a;en+=1)ar.push(new ExpressionWithCondition(new Expression.Matrix(on.pow(en)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(en)))));return new Expression.Cases(ar)}var ox=new Expression.Matrix(In);return a!==-1?new ExpressionWithCondition(ox,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):ox},isPositiveQuick=function(t){return t instanceof Integer$2?t.compareTo(Expression.ZERO)>0:t instanceof NthRoot?isPositiveQuick(t.a):(t instanceof Multiplication$1||t instanceof Division$1)&&!t.a.equals(Expression.ONE.negate())&&!t.b.equals(Expression.ONE.negate())?isPositiveQuick(t.a)&&isPositiveQuick(t.b)||isPositiveQuick(t.a.negate())&&isPositiveQuick(t.b.negate()):t instanceof Addition$1?isPositiveQuick(t.a)&&isPositiveQuick(t.b):t instanceof Expression.PolynomialRootSymbol?isPositiveQuick(t.interval.a)&&isPositiveQuick(t.interval.b):t instanceof Expression.Multiplication&&t.a.equals(Expression.ONE.negate())&&t.b instanceof Expression.PolynomialRootSymbol?!isPositiveQuick(t.b.interval.a)&&!isPositiveQuick(t.b.interval.b):t instanceof Expression.Abs},isPositive=function(t){if(t.equals(Expression.ZERO))return!1;if(isPositiveQuick(t))return!0;if(isPositiveQuick(t.negate()))return!1;if(t instanceof Expression.Symbol&&!(t instanceof Expression.PolynomialRootSymbol)&&!(t instanceof Expression.ExpressionPolynomialRoot)&&!(t instanceof Expression.ExpressionWithPolynomialRoot))return t===Expression.PI||t===Expression.E;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex))return!1;if(t instanceof Addition$1||t instanceof Expression.Cos||t instanceof Expression.Sin||t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication||t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot||t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.Division){var n=toDecimalStringInternal$1(t,{significantDigits:1}),a=n==null?NaN:Number(n.replace(/\((\d+)\)/g,"$1").replace(/\*10\^/g,"e"));if(!Number.isNaN(a))return a>0}if(t instanceof Expression.ExponentiationOfMinusOne)return!1;if(t instanceof Expression.Exponentiation&&getExponent(t)instanceof Expression.Integer)return isPositive(t.a);if(Expression.has(t,Expression.Symbol))return!1;if(t instanceof Expression.Logarithm)return isPositive(t.a.subtract(Expression.ONE));throw new TypeError("!"+t)};Expression._isPositive=isPositive;var isIntegerOrN=function(t){return t instanceof Integer$2||t instanceof Expression.Symbol&&(t.symbol==="n"||t.symbol==="k")?!0:t instanceof Expression.Addition||t instanceof Expression.Multiplication||t instanceof Expression.Exponentiation?isIntegerOrN(t.a)&&isIntegerOrN(t.b):!1},isGoodPolynomial=function(t){if(t instanceof Expression.Exponentiation)return!1;var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(n instanceof Expression.Symbol){var a=Polynomial$1.toPolynomial(t,n);if(a.getDegree()===1&&a.getCoefficient(0)instanceof Expression.Integer&&a.getCoefficient(1)instanceof Expression.Integer&&a.getContent().equals(Expression.ONE))return!0}return!1};const isMatrixSymbolTranspose=function(t){if(t instanceof Expression.Exponentiation&&getBase(t)instanceof Expression.MatrixSymbol){const n=getExponent(t);if(n instanceof Expression.Symbol&&n.symbol==="T"||n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&n.b.symbol==="T")return!0}return!1};Expression.prototype.powExpression=function(t){var n=this;if(n===Expression.INFINITY&&Expression.isScalar(t)){if(Expression.isReal(t)){if(t.compareTo(Expression.ONE)>0)throw new RangeError("NotSupportedError");if(t.compareTo(Expression.ONE)===0)return Expression.ONE;if(t.compareTo(Expression.ONE.negate())>0)return Expression.ZERO;throw new RangeError("NotSupportedError")}var a=Expression.getComplexNumberParts(t);if(Expression.isReal(a.real)&&Expression.isReal(a.imaginary)){var s=a.real._pow(2).add(a.imaginary._pow(2));if(s.compareTo(Expression.ONE)<0)return Expression.ZERO}}if(n instanceof Expression.Symbol&&(n.symbol==="t"||n.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.transpose();if(n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&(n.b.symbol==="t"||n.b.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.pow(n.a).transpose();//!
if(n instanceof Division$1&&n.a instanceof Integer$2&&n.b instanceof Integer$2&&t!==Expression.E&&!(t instanceof Expression.Symbol)&&!Expression.has(t,Expression.Symbol)){typeof hit=="function"&&hit({powExpression:n.toString()});var l=n.b.toNumber(),u=n.a.truncatingDivide(n.b),c=n.a.subtract(u.multiply(n.b));return u.equals(Expression.ZERO)?t.pow(c)._nthRoot(l):t.pow(u).multiply(t.pow(c)._nthRoot(l))}//!
if(t instanceof Expression.Integer&&n===Expression.CIRCLE)return new Expression.Degrees(t);//!new 2017-05-08
{if(t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&integerPrimeFactor(t).compareTo(t)===0){var d=function(vx){if(vx instanceof Expression.Symbol)return!0;if(vx instanceof Addition$1)return d(vx.a)&&d(vx.b);if((vx instanceof Integer$2||vx instanceof NthRoot)&&(t===Expression.E||t instanceof Integer$2&&vx instanceof NthRoot))return!0;if(vx instanceof Multiplication$1||vx instanceof Exponentiation$1){for(var bx of vx.factors()){var xx=getBase(bx);if(!(xx instanceof Integer$2||xx instanceof NthRoot||xx instanceof Expression.Symbol)&&!d(xx))return!1}return!0}if((t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0)&&vx instanceof Division$1&&vx.b instanceof Integer$2){//!new 2019-08-08
return d(vx.a)}return!1};if(n.getNumerator()instanceof Addition$1&&(n.getNumerator().a.isNegative()||n.getNumerator().b.isNegative()))return Expression.ONE.divide(t.pow(n.getNumerator().a.negate().divide(n.getDenominator())).divide(t.pow(n.getNumerator().b.divide(n.getDenominator()))));if(d(n)){if(n.isNegative())return Expression.ONE.divide(new Expression.Exponentiation(t,n.negate()));//!new
return n instanceof Expression.ExpressionWithPolynomialRoot?t.pow(n.upgrade()):new Expression.Exponentiation(t,n)}}if(t instanceof Integer$2&&t.compareTo(Expression.ONE)>0){if(n instanceof Addition$1&&(n.a instanceof Integer$2||n.b instanceof Integer$2))return t.pow(n.a).multiply(t.pow(n.b));var Ct=integerPrimeFactor(t);if(Ct.equals(t)){if(n instanceof Division$1&&n.b instanceof Integer$2){var l=n.b.toNumber();if(l>=2&&l<=Number.MAX_SAFE_INTEGER)return t.pow(n.a)._nthRoot(l)}//!new 2020-18-01
if(n instanceof Division$1&&isIntegerOrN(n.a)&&isIntegerOrN(n.b)&&t.compareTo(Expression.ONE)>0)return new Expression.Exponentiation(t,n);//!
}else if(!Expression.has(n,Expression.Logarithm)){var ar=primeFactor._countTrailingZeros(t.toBigInt(),Ct.toBigInt());return Ct.pow(n.multiply(Integer$2.fromNumber(ar))).multiply(t.divide(Ct._pow(ar)).pow(n))}}}//!
{if(t instanceof Integer$2&&t.equals(Expression.ONE))return Expression.ONE;if(t instanceof Division$1||t instanceof Multiplication$1&&(n.getDenominator().equals(Expression.ONE)||isPositive(t.a)||isPositive(t.b))){if(t instanceof Division$1)return t.a.pow(n).divide(t.b.pow(n));if(t instanceof Multiplication$1)return t.a.pow(n).multiply(t.b.pow(n))}}var en=n.getNumerator(),tn=n.getDenominator();if(t===Expression.E&&en instanceof Multiplication$1&&en.a instanceof Expression.Complex&&en.a.real.equals(Expression.ZERO)&&en.b instanceof Expression.Symbol){var on=n.multiply(Expression.I.negate());return on.cos().add(Expression.I.multiply(on.sin()))}if(t===Expression.E&&getConstant$1(en)instanceof Expression.Complex&&tn instanceof Expression.Integer){var cn=getConstant$1(en);if(cn.real.equals(Expression.ZERO)){var on=n.multiply(Expression.I.negate());return on=Expression.has(n,Expression.Symbol)?on:new Expression.Radians(on),on.cos().add(Expression.I.multiply(on.sin()))}return t.pow(cn.real.divide(tn)).multiply(t.pow(cn.imaginary.multiply(Expression.I).multiply(en.divide(cn)).divide(tn)))}if(t===Expression.E&&en instanceof Expression.Addition&&tn instanceof Expression.Integer)return t.pow(en.a.divide(tn)).multiply(t.pow(en.b.divide(tn)));if(t instanceof Expression.Matrix&&(isIntegerOrN(n)||n===Expression.INFINITY)){if(!t.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var dn=matrixInN(t.matrix,n);if(dn!=null){var Cn=t.matrix.map(function(vx,bx,xx){return bx===xx?vx:Expression.ZERO}),In=t.matrix.subtract(Cn);return t.matrix.isDiagonal()||In.isNilpotent()&&Cn.multiply(In).eql(In.multiply(Cn))&&Expression.callback!=null&&Expression.callback(new Expression.Event("DpN-matrix-pow",t)),dn}//! 2018-08-26
{var ix=Expression.getEigenvalues(t.matrix);if(ix.length===t.matrix.cols()){var ax=Expression.getEigenvectors(t.matrix,ix);if(ax.filter(vx=>vx!=null).length===t.matrix.cols()){var a=Expression.diagonalize(t.matrix,ix,ax),ox=a.L,sx=matrixInN(ox,n);if(sx!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-diagonalization",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",t)),new Expression.Matrix(a.T).multiply(sx).multiply(new Expression.Matrix(a.T_INVERSED))}else{var a=Expression.getFormaDeJordan(t.matrix,ix),ux=matrixInN(a.J,n);if(ux!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-Jordan-normal-form",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",t)),new Expression.Matrix(a.P).multiply(ux).multiply(new Expression.Matrix(a.P_INVERSED))}}}//!
}if(Expression.ExponentiationOfMinusOne!=null&&(t instanceof Integer$2&&t.compareTo(Expression.ZERO)<0||t.equals(Expression.E.negate()))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n).multiply(t.negate().pow(n));if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n.a).multiply(Expression.ONE.negate().pow(n.b)).multiply(t.negate().pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(Expression.ExponentiationOfImaginaryUnit!=null){if(t instanceof Expression.Complex&&t.equals(Expression.I.negate()))return Expression.ONE.negate().pow(n).multiply(t.negate().pow(n));if(t instanceof Expression.Complex&&(t.equals(Expression.I)||t.real.compareTo(Expression.ZERO)>0&&t.primeFactor().equals(t))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfImaginaryUnit(t,n);if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&!t.imaginary.equals(Expression.ONE)){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return t.imaginary.pow(n).multiply(Expression.I.pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex){var cx=t.primeFactor();return t.divide(cx).pow(n).multiply(cx.pow(n))}if(t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Expression.Symbol&&(n.getNumerator().symbol==="n"||n.getNumerator().symbol==="k")||t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Addition$1)return t.pow(Expression.ONE.divide(n.getDenominator())).pow(n.getNumerator())}if(t===Expression.E&&n instanceof Expression.Matrix){if(!n.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var ix=Expression.getEigenvalues(n.matrix);if(ix.length===n.matrix.cols()){var a=Expression.getFormaDeJordan(n.matrix,ix),Cn=a.J.map(function(Ex,Tx,Cx){return Tx===Cx?Ex:Expression.ZERO}),In=a.J.map(function(Ex,Tx,Cx){return Tx!==Cx?Ex:Expression.ZERO}),hx=function(Ex){for(var Tx=Matrix$1.Zero(Ex.cols(),Ex.cols()),Cx=Tx,Mx=Matrix$1.I(Ex.cols()),Ax=0,Nx=1;!Mx.eql(Tx);){var Ux=Mx.scale(Expression.ONE.divide(Integer$2.fromNumber(Nx)));Cx=Cx.add(Ux),Mx=Mx.multiply(Ex),Ax+=1,Nx*=Ax}return Cx};return Expression.callback!=null&&Expression.callback(new Expression.Event("exponential-using-Jordan-canonical-form",n)),new Expression.Matrix(a.P.multiply(Cn.map(function(Ex,Tx,Cx){return Tx===Cx?Expression.E.pow(Ex):Expression.ZERO}).multiply(hx(In))).multiply(a.P_INVERSED))}}//!2019-04-22
if(t instanceof NthRoot&&t.a instanceof Integer$2)return t.a.pow(n.divide(Expression.Integer.fromNumber(t.n)));{if(t===Expression.E&&isConstant$1(n)&&!has$2(n,Expression.Complex)&&!has$2(n,Expression.Logarithm))return new Expression.Exponentiation(t,n);if((t instanceof Expression.Symbol||Expression.has(t,Expression.Symbol))&&n instanceof Expression.Division&&n.getDenominator()instanceof Integer$2)return t.pow(n.getNumerator())._nthRoot(n.getDenominator().toNumber());if(t instanceof Expression.Symbol&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n);if(t===Expression.E&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Exponentiation$1&&getBase(t)===Expression.E)return getBase(t).pow(getExponent(t).multiply(n));if(isGoodPolynomial(t)&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n)}if(t instanceof Expression.Matrix&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Expression.Matrix&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer)return t.pow(n.a).pow(n.b);if(t instanceof Expression.Matrix&&n instanceof Expression.Division){if(n.getNumerator().equals(Expression.ONE)&&n.getDenominator()instanceof Expression.Symbol&&(n.getDenominator().symbol==="n"||n.getDenominator().symbol==="k"))return t._nthRoot(n.getDenominator());if(isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return t.pow(n.getNumerator()).pow(Expression.ONE.divide(n.getDenominator()))}if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k")){var gx=QuadraticInteger.toQuadraticInteger(t);if(gx!=null&&Number(gx.a.toString())>0&&gx.D>0&&(gx.isValid()||!0)){if(Number(gx.b.toString())>0)return new Expression.ExponentiationOfQuadraticInteger(t,n);if(Number(gx.b.toString())<0){var fx=gx.conjugate().toExpression();return t.multiply(fx).pow(n).divide(fx.pow(n))}}if(gx!=null&&Number(gx.a.toString())<0)return Expression.ONE.negate().pow(n).multiply(gx.toExpression().negate().pow(n))}{if(isIntegerOrN(n)){if(n instanceof Addition$1){for(var dx of n.summands())if(dx.isNegative())return t.pow(n.subtract(dx)).divide(t.pow(dx.negate()))}if(n.isNegative())return Expression.ONE.divide(t.pow(n.negate()));if(Expression.isConstant(t)&&!getConstant$1(n).equals(Expression.ONE))return t.pow(getConstant$1(n)).pow(n.divide(getConstant$1(n)));var mx=t instanceof Expression.Symbol||t instanceof Expression.Addition&&!(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos));if(mx)return new Expression.Exponentiation(t,n)}if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(t).getNumerator())&&isIntegerOrN(getExponent(t).getDenominator())||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t))&&isIntegerOrN(n)||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t).inverse())&&isIntegerOrN(n.inverse()))return getBase(t).pow(getExponent(t).multiply(n))}if(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos))return Expression._replaceBySinCos(Expression._replaceSinCos(t).pow(n));if(t===Expression.E&&n instanceof Expression.Logarithm)return n.a;if(t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Integer$2&&n.b instanceof Expression.Logarithm||t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Symbol&&n.b instanceof Expression.Logarithm)return t.pow(n.b).pow(n.a);if(t instanceof Expression.Integer&&Expression.has(n,Expression.Logarithm))return Expression.E.pow(t.logarithm().multiply(n));//!new 2020-12-11
if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.TWO)>=0&&isIntegerOrN(n))return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2022-07-26
if(t===Expression.E&&n instanceof Expression.ComplexConjugate&&n.a instanceof Expression.Symbol)return new Expression.Exponentiation(t,n);throw new RangeError("NotSupportedError")};Expression.prototype.compare4Addition=function(t){var n=this;if(n instanceof Integer$2&&t instanceof Integer$2)return n.compareTo(t);if(n instanceof Expression.Symbol&&t instanceof Integer$2)return 1;if(n instanceof Integer$2&&t instanceof Expression.Symbol)return-1;if(n instanceof Expression.Symbol&&t instanceof Expression.Symbol)return n.symbol<t.symbol?-1:t.symbol<n.symbol?1:0;//!
if(n instanceof Expression.Matrix&&t instanceof MatrixSymbol)return 1;if(n instanceof MatrixSymbol&&t instanceof Expression.Matrix)return-1;if(n instanceof Expression.Matrix&&t instanceof Expression.Matrix)return 0;//!new 2016-12-17
if(n instanceof Addition$1||t instanceof Addition$1)return Addition$1.compare4Addition(n,t);//!new 2016-10-09
if(n instanceof Multiplication$1||t instanceof Multiplication$1)return Multiplication$1.compare4Addition(n,t);//!new 2018-10-11
if(n instanceof Integer$2&&t instanceof Expression.Function)return-1;//!new 2018-11-12
if(n instanceof Division$1&&t instanceof Division$1)return n.a.compare4Addition(t.a)||n.b.compare4Addition(t.b);if(n instanceof Expression&&t instanceof Division$1)return 1;if(n instanceof Division$1&&t instanceof Expression||n instanceof Expression.Matrix)return-1;if(t instanceof Expression.Matrix)return 1;//!2019-02-18
if(n instanceof Integer$2&&t instanceof Expression.Complex)return-1;if(n instanceof Expression.Complex&&t instanceof Integer$2)return 1;//!
if(n.equals(t)){return 0;//!
}if(n instanceof Expression.Exponentiation||t instanceof Expression.Exponentiation)return getBase(n).compare4Addition(getBase(t))||0-getExponent(n).compare4Addition(getExponent(t));//!new 2017-02-10
if(t instanceof Expression.Symbol)return-1;//!
throw new RangeError};var compare$1=function(t,n){return t.compare4Addition(n)},compare4Multiplication=function(t,n){return t.compare4Multiplication(n)},getBase=function(t){return t instanceof Exponentiation$1?t.a:t},getExponent=function(t){return t instanceof Exponentiation$1?t.b:Expression.ONE},getConstant$1=function(t,n=void 0){if(t instanceof Integer$2)return t;if(t instanceof Expression.Complex)return t;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return t}else if(t instanceof Multiplication$1){var a=void 0,s=t;for(var l of s.factors()){var u=getConstant$1(l,n);a=a==null?u:u.multiply(a)}if(a!=null)return a}else if(t instanceof Addition$1){var a=void 0;for(var s of t.summands()){var u=getConstant$1(s,n);a=a==null?u:complexGCD(u,a)}if(a!=null)return a}return Expression.ONE},getTerm=function(t,n){if(!(t instanceof Integer$2)){{if(t instanceof Expression.Complex)return;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return}else if(t instanceof Multiplication$1){var a=[];for(var s of t.factors()){var l=getTerm(s,n);l!=null&&a.push(l)}for(var u=void 0,c=a.length-1;c>=0;c-=1)u=u==null?a[c]:new Multiplication$1(u,a[c]);return u}else if(t instanceof Addition$1)return t.divide(getConstant$1(t))}return t}};Expression.getConstant=getConstant$1;var multiplyByInteger=function(t,n){return t.compareTo(Expression.ZERO)===0?t:t.compareTo(Expression.ONE)===0?n:new Multiplication$1(t,n)};Expression.prototype.multiplyExpression=function(t){var n=this;if(t instanceof Expression&&n instanceof Multiplication$1)return t.multiply(n.a).multiply(n.b);if(t instanceof Multiplication$1&&n instanceof Expression){var a=compare4Multiplication2(t.b,n);return a===0?t.a.multiply(t.b.multiply(n)):a>0?t.a.multiply(n).multiply(t.b):new Multiplication$1(t,n)}//!
//!
var a=0;if(t instanceof Integer$2&&n instanceof Expression.Symbol)return multiplyByInteger(t,n);if(t instanceof Expression.Symbol&&n instanceof Integer$2)return multiplyByInteger(n,t);if(t instanceof Expression.Symbol&&n instanceof Expression.Symbol)return a=compare4Multiplication(t,n),a===0?t.pow(Expression.TWO):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Integer$2&&n instanceof Exponentiation$1)return multiplyByInteger(t,n);if(t instanceof Exponentiation$1&&n instanceof Integer$2)return multiplyByInteger(n,t);//!new 2022-06-20
if((getBase(t)instanceof Expression.MatrixSymbol||getBase(n)instanceof Expression.MatrixSymbol)&&(a=compare4Multiplication(getBase(t),getBase(n)),a===0&&(getExponent(t).equals(new Expression.Symbol("T"))||getExponent(n).equals(new Expression.Symbol("T")))))return new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Expression.Symbol)return a=compare4Multiplication(getBase(t),n),a===0?n.pow(getExponent(t).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Expression.Symbol&&n instanceof Exponentiation$1)return a=compare4Multiplication(t,getBase(n)),a===0?t.pow(getExponent(n).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Exponentiation$1)return a=compare4Multiplication(getBase(t),getBase(n)),a===0?getBase(t).pow(getExponent(t).add(getExponent(n))):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof SquareRoot&&n instanceof SquareRoot){if(t.a instanceof Integer$2&&n.a instanceof Exponentiation$1)return new Multiplication$1(t,n);var s=t.a.gcd(n.a);return s.multiply(t.a.divide(s).multiply(n.a.divide(s)).squareRoot())}if(t instanceof NthRoot&&t.n===3&&n instanceof NthRoot&&n.n===3)return t.a.multiply(n.a)._nthRoot(3);if(t instanceof NthRoot&&n instanceof NthRoot){//!2021-02-02 - hack
if(t.a instanceof Integer$2&&!(n.a instanceof Integer$2)&&t.n<n.n&&getVariable(n.a)._pow(2).gcd(t.a).equals(t.a)&&Expression.isConstant(t)&&Expression.isConstant(n))return n.multiply(t);//!
var l=Math.gcd(t.n,n.n);if(!(t.a instanceof Integer$2)&&(!(n.a instanceof Integer$2)||!t.a._pow(2).gcd(n.a).equals(Expression.ONE)||getVariable(t.a)._pow(2).gcd(n.a).equals(getVariable(t.a)._pow(2)))||!t.a.gcd(n.a).equals(Expression.ONE)){var u=Expression.pow(t.a,n.n/l).multiply(Expression.pow(n.a,t.n/l)),c=t.n/l*n.n;return u._nthRoot(c)}return!(t.a instanceof Integer$2)&&t.n===2&&n.a instanceof Integer$2&&n.n===4&&!(getConstant$1(t.a.getNumerator()).multiply(n.a)._nthRoot(n.n)instanceof NthRoot)?t.a.multiply(n.a._nthRoot(2))._nthRoot(2):t.n<n.n?new Multiplication$1(t,n):t.n>n.n?new Multiplication$1(n,t):t.a.multiply(n.a)._nthRoot(t.n)}//!
if(t instanceof MatrixSymbol&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&n instanceof MatrixSymbol)return new Multiplication$1(t,n);if(has$2(t,MatrixSymbol)&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&has$2(n,MatrixSymbol))return new Multiplication$1(t,n);//!
if(t instanceof Integer$2&&n instanceof Expression){if(t.compareTo(Expression.ZERO)===0)return t;if(t.compareTo(Expression.ONE)===0)return n}if(t instanceof Expression&&n instanceof Integer$2){if(n.compareTo(Expression.ZERO)===0)return n;if(n.compareTo(Expression.ONE)===0)return t}var d=t instanceof Expression.Complex&&n instanceof Expression.ExponentiationOfImaginaryUnit?-1:t instanceof Expression.ExponentiationOfImaginaryUnit&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n));if(d===0)return getBase(t).pow(getExponent(t).add(getExponent(n)));if(d<0)return new Multiplication$1(t,n);if(d>0)return new Multiplication$1(n,t)};function Iterator(){}Object.defineProperty(Iterator.prototype,"done",{get:function(){return this.value==null}});Iterator.prototype[globalThis.Symbol.iterator]=function(){return this};function TermFactorsIterator(t){this.value=void 0,this.e=t,this.hasPolynomialRoot=!1}TermFactorsIterator.prototype=Object.create(Iterator.prototype);TermFactorsIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e instanceof Integer$2||this.e instanceof Expression.Complex||this.e instanceof Expression.ExpressionPolynomialRoot?null:this.e,this.hasPolynomialRoot=this.e instanceof Expression.ExpressionPolynomialRoot,this.e=this.e instanceof Multiplication$1?this.e.a:void 0,this};function termFactors(t){return new TermFactorsIterator(t)}var compare4Addition=function(t,n){for(var a=termFactors(t),s=termFactors(n),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=0-compare$1(getBase(l),getBase(u));if(c===0&&(c=compare$1(getExponent(l),getExponent(u))),c!==0)return c;l=a.next().value,u=s.next().value}for(;l==null&&a.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(u);)u=s.next().value;for(;u==null&&s.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(l);)l=a.next().value;//!new 2020-02-13
if(l instanceof Expression.Matrix||u instanceof Expression.Matrix)return n instanceof Integer$2&&t instanceof Multiplication$1?1:t instanceof Integer$2&&n instanceof Multiplication$1?-1:l!=null&&a.next().value!=null?1:u!=null&&s.next().value!=null?-1:0;//!
return l!=null?1:u!=null?-1:0},addSimilar=function(t,n){if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return t.add(n);for(var a=getConstant$1(t),s=getConstant$1(n),l=termFactors(getTerm(t)),u=termFactors(getTerm(n)),c=l.next().value,d=u.next().value,Ct=Expression.ONE,ar=!1;c!=null||d!=null;){var en=null;if(c instanceof Expression.Matrix&&c.matrix.isScalar()&&isScalar(c.matrix.e(0,0))&&!c.matrix.e(0,0).equals(Expression.ZERO)&&d instanceof Expression.Matrix&&d.matrix.isScalar()&&isScalar(d.matrix.e(0,0))&&!d.matrix.e(0,0).equals(Expression.ZERO)&&c.matrix.rows()===d.matrix.rows()&&c.matrix.cols()===d.matrix.cols()&&!c.equals(d)){var en=function(on,cn){return on.matrix.e(0,0).multiply(cn).multiply(on.inverse())};return addSimilar(en(c,t),en(d,n))}else if(!ar&&(c instanceof Expression.Matrix||d instanceof Expression.Matrix)&&(c==null||d==null||!c.equals(d)))ar=!0,en=(c==null?a:c.multiply(a)).add(d==null?s:d.multiply(s)),a=Expression.ONE,s=Expression.ONE;else{if(!c.equals(d))return null;en=c}Ct=en.multiply(Ct);//!TODO: depends on the iteration order !!!
c=l.next().value,d=u.next().value}return ar||(Ct=a.add(s).multiply(Ct)),Ct};Expression.getComplexNumberParts=function(t){if(t instanceof Expression.Division){var n=Expression.getComplexNumberParts(t.getNumerator());return{real:n.real.divide(t.getDenominator()),imaginary:n.imaginary.divide(t.getDenominator())}}if(!Expression.has(t,Expression.Complex))return{real:t,imaginary:Expression.ZERO};var a=[],s=[];for(var l of t.summands()){var u=void 0;for(let Ct of l.factors())u==null&&Ct instanceof Expression.Complex&&(u=Ct);if(u==null)a.push(l);else if(u.real.equals(Expression.ZERO))s.push(l.multiply(Expression.I.negate()));else{var c=null;if(l!==u)for(var d of l.factors())d!==u&&(c=c==null?d:c.multiply(d));c==null?(a.push(u.real),s.push(u.imaginary)):(a.push(c.multiply(u.real)),s.push(c.multiply(u.imaginary)))}}return{real:_sum(a),imaginary:_sum(s)}};Expression.prototype.addExpression=function(t){var n=this;if(t.equals(Expression.ZERO))return n;if(n.equals(Expression.ZERO))return t;//!2019-02-16
if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return t.a.add(a).multiply(t.b)}else if(t instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return Expression.ONE.add(a).multiply(t)}if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(n.a).multiply(n.b)}else if(n instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(Expression.ONE).multiply(n)}//!2019-02-16
//!new 2019-09-30
//!new 2020-12-26
if((has2(t,Expression.Complex)||has2(n,Expression.Complex))&&(has2(t,Expression.ExpressionPolynomialRoot)||has2(n,Expression.ExpressionPolynomialRoot))){var s=Expression.getComplexNumberParts(t),l=Expression.getComplexNumberParts(n),u=s.real.add(l.real),c=s.imaginary.add(l.imaginary);if(c.equals(Expression.ZERO))return u;if(!(c instanceof Expression.Addition))return u.equals(Expression.ZERO)?c.multiply(Expression.I):!has2(u,Expression.ExpressionPolynomialRoot)&&!has2(c,Expression.ExpressionPolynomialRoot)?u.add(c.multiply(Expression.I)):new Expression.Addition(u,c.multiply(Expression.I))}//!
for(var d=t.summands(),Ct=n.summands(),ar=d.next().value,en=0,tn=Ct.next().value,on=[];ar!=null&&tn!=null;){var cn=compare4Addition(ar,tn);if(cn<0)on.push(ar),ar=d.next().value;else if(cn>0)on.push(tn),tn=Ct.next().value;else{if(has2(ar,Expression.Matrix)||has2(tn,Expression.Matrix)){var dn=addSimilar(ar,tn);dn!=null?dn.equals(Expression.ZERO)||on.push(dn):(on.push(ar),on.push(tn))}else{const ax=getConstant$1(ar,!0),ox=getConstant$1(tn,!0),sx=getTerm(ar,!0)||Expression.ONE,ux=getTerm(tn,!0)||Expression.ONE,cx=(sx.equals(ux)?ax:ax.multiply(sx.divide(ux))).add(ox),hx=ux===Expression.ONE?cx:cx instanceof Expression.Addition?new Expression.Multiplication(cx,ux):cx.multiply(ux);en=0,hx.equals(Expression.ZERO)||(Expression.has(hx,Expression.ExpressionPolynomialRoot)?Expression.has(ar,Expression.ExpressionPolynomialRoot)?(ar=hx,en=1):(tn=hx,en=2):on.push(hx))}en!==1&&(ar=d.next().value),en!==2&&(tn=Ct.next().value)}}for(;ar!=null;)on.push(ar),ar=d.next().value;for(;tn!=null;)on.push(tn),tn=Ct.next().value;if(on.length===0)return Expression.ZERO;for(var Cn=on[on.length-1],In=on.length-2;In>=0;In-=1){var ix=on[In];Cn=new Addition$1(Cn,ix)}return Cn};var divideByInteger=function(t,n){if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");var a=[];for(var s of t.summands()){var l=Expression.ONE,u=void 0;for(var c of s.factors()){var d=c;d instanceof Integer$2||d instanceof Expression.Complex||d instanceof Expression.ExpressionPolynomialRoot?u!=null?(console.warn("!"),u=u.multiply(d)):u=d:l===Expression.ONE?l=d:l=d.multiply(l)}if(!(u instanceof Expression.Complex)&&!(u instanceof Integer$2)&&!(u instanceof Expression.ExpressionPolynomialRoot))throw new RangeError;var Ct=null;u instanceof Expression.ExpressionPolynomialRoot?Ct=u.divide(n).multiply(l):Ct=u.truncatingDivide(n).multiply(l),a.push(Ct)}return _sum(a)};Expression.getCoefficients=function(t,n){if(t.equals(Expression.ZERO))return[];var a=[];for(var s of t.summands()){var l=Expression.ZERO,u=Expression.ONE;for(var c of s.factors()){var d=c;for(var Ct of getVariableInternal(d))Ct.v.equals(n)?l=l.add(Ct.e):u=u.multiply(Ct.e===Expression.ONE?Ct.v:Ct.v.pow(Ct.e))}var ar=l.toNumber();a.push({degree:ar,coefficient:u})}a.sort((on,cn)=>cn.degree-on.degree);for(var en=-1,tn=0;tn<a.length;tn+=1){var s=a[tn];(en===-1||s.degree!==a[en].degree)&&(en+=1,a[en]={degree:s.degree,coefficient:[]}),a[en].coefficient.push(s.coefficient)}a.length=en+1;for(var tn=0;tn<a.length;tn+=1)a[tn]={degree:a[tn].degree,coefficient:_sum(a[tn].coefficient)};return a};var getFirstAdditionOperand=function(t){for(var n=t;n instanceof Addition$1;)n=n.a;return n},getLastMultiplicationOperand=function(t){for(var n=t;n instanceof Multiplication$1;)n=n.b;return n};function VIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.v=t}VIterator.prototype=Object.create(Iterator.prototype);VIterator.prototype.next=function(){return this.value=this.v,this.v=void 0,this};function VariablesIterator(t,n){if(n==null)throw new TypeError;this.value=void 0,this.v=t,this.additions=n}VariablesIterator.prototype=Object.create(Iterator.prototype);VariablesIterator.prototype.next=function(){var t=this.additions.next().value,n=null;if(t==null)n=null;else if(t instanceof Expression.Symbol)n={v:new Exponentiation$1(this.v,t),e:Expression.ONE};else if(t instanceof Expression.NthRoot){//!new 2019-11-30
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Expression.Exponentiation){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Multiplication$1&&t.a instanceof Integer$2)n={v:new Exponentiation$1(this.v,t.b),e:t.a};else if(t instanceof Multiplication$1)n={v:new Exponentiation$1(this.v,getTerm(t)),e:getConstant$1(t)};else if(t instanceof Integer$2)n={v:this.v,e:t};else if(t instanceof Expression.Division&&t.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
n={v:this.v,e:t}}else if(t instanceof Expression.Division&&t.a instanceof NthRoot&&t.b instanceof Integer$2){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t.getNumerator()),e:Expression.ONE.divide(t.getDenominator())}}else if(t instanceof Expression.Division&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
this.v instanceof Integer$2?n={v:new Exponentiation$1(this.v,t.a.b),e:t.divide(t.a.b)}:n={v:this.v,e:t}}else if(t instanceof Division$1&&t.b instanceof Integer$2){var a=getTerm(t.a);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else if(t instanceof Division$1&&t.a instanceof Integer$2&&t.b instanceof Expression.Symbol&&(this.v instanceof Integer$2||this.v instanceof Expression.Symbol||isGoodPolynomial(this.v))){var a=Expression.ONE.divide(t.b);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else throw new RangeError;return this.value=n,this};function NumeratorSummandsIterator(t){this.value=void 0,this.internal=t.getNumerator().summands(),this.denominator=t.getDenominator()}NumeratorSummandsIterator.prototype=Object.create(Iterator.prototype);NumeratorSummandsIterator.prototype.next=function(){var t=this.internal.next().value;return this.value=t==null?null:t.divide(this.denominator),this};var getVariableInternal=function(t){if(t instanceof Expression.ExponentiationOfMinusOne)return new VIterator({v:t,e:Expression.ONE});if(t instanceof Expression.ExponentiationOfImaginaryUnit)return new VIterator({v:t,e:Expression.ONE});var n=getBase(t),a=getExponent(t);//!new 2017-05-08
if(!(a instanceof Integer$2)){var s=new NumeratorSummandsIterator(a);return new VariablesIterator(n,s)}//!
return new VIterator({v:n,e:a})},getVariable=function(t,n=null){if(n==null||!n.avoidNthRoots){for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot)return s}var l=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;//!?
if(!(l instanceof Expression.Complex)&&!(l instanceof Integer$2)&&!(n!=null&&n.avoidNthRoots&&l instanceof NthRoot))return l};Expression.getVariable=getVariable;var lastMaxSize=1,integerGCD=function(t,n){if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&(t=t.imaginary),n instanceof Expression.Complex&&n.real.equals(Expression.ZERO)&&(n=n.imaginary),t instanceof Expression.Integer&&n instanceof Expression.Integer)return Expression.Integer.fromBigInt(bigIntGCDWrapper(t.value,n.value));for(var a=t,s=n;!s.equals(Expression.ZERO);){var l=a.remainder(s);a=s,s=l}return a},complexGCD=function(t,n){if(t instanceof Expression.ExpressionPolynomialRoot){var a=t.root.getAlphaExpression();return complexGCD(Expression.getConstant(a.getNumerator()),n)}if(n instanceof Expression.ExpressionPolynomialRoot){var a=n.root.getAlphaExpression();return complexGCD(t,Expression.getConstant(a.getNumerator()))}var a=integerGCD(t,n);return a instanceof Expression.Complex&&a.real.compareTo(Expression.ZERO)===0?a.imaginary:(a instanceof Expression.Integer&&a.compareTo(Expression.ZERO)<0&&(a=a.negate()),a)},nthRootCommonFactor=function(t,n){if(t instanceof Expression.NthRoot&&n instanceof Expression.NthRoot){var a=t.n/Math.gcd(t.n,n.n)*n.n,s=t.radicand.gcd(n.radicand),l=Math.min(a/t.n,a/n.n),u=Math.gcd(a,l);return s._pow(l/u)._nthRoot(a/u)}return null},gcd=function(t,n,a){if(a==null){//!TODO: (2020-06-13)
return getTerm(t)instanceof Expression.NthRoot&&getTerm(n)instanceof Expression.NthRoot?gcd(getConstant$1(t),getConstant$1(n)).multiply(gcd(t.divide(getConstant$1(t)),n.divide(getConstant$1(n)))):complexGCD(getConstant$1(t,!0),getConstant$1(n,!0))}var s=getReplacement(t,getReplacement(n,a));//!new 2023-03-11
var s=getReplacement(t,getReplacement(n,a,"any"),"any");if(s instanceof Replacement){var l=s.apply(t),u=s.apply(n);if(!l.getDenominator().equals(Expression.ONE)){if(!(l.getDenominator()instanceof Expression.Integer))throw new TypeError;l=l.getNumerator()}if(!u.getDenominator().equals(Expression.ONE)){if(!(u.getDenominator()instanceof Expression.Integer))throw new TypeError;u=u.getNumerator()}var c=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(l,a),Polynomial$1.toPolynomial(u,a)).calcAt(a),d=s.undo(c);return getTerm(d)==null||(d=getTerm(d),console.log("c1",d.toString(),getTerm(d))),d}return s.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(t,a),Polynomial$1.toPolynomial(n,a)).calcAt(a):substitute(substitute(t,a,s,inverseReplacement(s,a)).gcd(substitute(n,a,s,inverseReplacement(s,a))),a,inverseReplacement(s,a),s)},getConjugateFactor=function(t){var n=-1/0;for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot){var l=s.degree;n<l&&(n=l),s.a instanceof Integer$2||(n=1/0)}var u=void 0;for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot){var l=s.degree,c=s.a instanceof Integer$2?s.a:null;if(c==null&&(c=QuadraticInteger.toQuadraticInteger(s.a),c!=null&&u==null)){for(var d=c.primeFactor();d.toExpression()instanceof Expression.SquareRoot;)c=c.truncatingDivide(d),d=c.primeFactor();c=d}if(c==null)throw new TypeError;if(n===1/0&&!(s.a instanceof Integer$2)&&(n=l),n%l===0)if(u==null&&(u=c),c!=null){var Ct=integerGCD(u,c);if(!Ct.isUnit()){u=Ct;//!
}Ct.isUnit()&&!(Ct instanceof Integer$2)&&(u.isUnit()||c.isUnit())&&(u=Ct)}else throw new TypeError}//!new 2020-12-16 - ExpressionParser.parse('1/(x+cbrt(18)+cbrt(12))')
u!=null&&u instanceof Integer$2&&(u=u.primeFactor());//!
return{p:u,degree:n}},getConjugate=function(t){var n=void 0;if(n=Expression.getComplexNumberParts(t),n!=null&&!n.imaginary.equals(Expression.ZERO))return n.real.subtract(n.imaginary.multiply(Expression.I));if(n=Expression.getNthRootConjugate(t),n!=null){if(n.equals(t)&&t instanceof Addition$1)throw new TypeError;return n}};Expression.getConjugate=getConjugate;Expression.getConjugateExpression=function(t){try{var n=Expression.getConjugate(t);return n!=null?Expression.getConjugateExpression(n.multiply(t)):t}catch(a){console.error(a)}return null};var getPolynomialRelativeToNthRoot=function(t,n,a){var s=Polynomial$1.of();for(var l of t.summands()){var u=0,c=Expression.ONE;for(var d of l.factors())if(d instanceof NthRoot&&(a===d.degree||a%d.degree===0&&n instanceof Integer$2)){var Ct=d.a instanceof Integer$2?d.a:null;if(Ct==null&&(Ct=QuadraticInteger.toQuadraticInteger(d.a)),Ct!=null){var ar=0,en=Ct;if(n.isUnit()){if(en.isUnit())for(ar=1,en=en.truncatingDivide(n);en.primeFactor().equals(n);)ar+=1,en=en.truncatingDivide(n);else if(!(en instanceof Integer$2)){var tn=en.truncatingDivide(n);if(!(tn instanceof Expression.Integer)&&Number.isNaN(Number(tn.a.toString())*Number(tn.b.toString())))throw new TypeError;(tn instanceof Expression.Integer||Number(tn.a.toString())*Number(tn.b.toString())>=0)&&(ar=1,en=tn)}}else for(;en.isDivisibleBy(n)&&ar<d.degree;)en=en.truncatingDivide(n),ar+=1;en=en.toExpression(),c=c.multiply(en._nthRoot(d.degree)),u+=ar*(a/d.degree)}else throw new TypeError}else c=c.multiply(d);s=s.add(Polynomial$1.of(c).shift(u))}return s};Expression.getNthRootConjugate=function(t){if(t instanceof Integer$2)return null;if(t instanceof NthRoot)return t._pow(t.n-1);if(t instanceof Multiplication$1&&t.a instanceof Integer$2)return Expression.getNthRootConjugate(t.b);//!2019-10-20 a workaround
if(t instanceof Addition$1&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.a.b instanceof NthRoot&&t.a.b.n===3&&t.b instanceof Multiplication$1&&t.b.a instanceof Integer$2&&t.b.b instanceof NthRoot&&t.b.b.n===3)return t.a._pow(2).subtract(t.a.multiply(t.b)).add(t.b._pow(2));//!
var n=getConjugateFactor(t),a=n.p,s=n.degree;if(a==null)return;var l=getPolynomialRelativeToNthRoot(t,a,s);l=l.divideAndRemainder(Polynomial$1.of(l.getContent()),"throw").quotient;//!new
const u=a.toExpression(),c=Polynomial$1.of(Expression.ONE).shift(s).subtract(Polynomial$1.of(u));return l.modularInverse(c).primitivePart().calcAt(u._nthRoot(s))};Expression.collectLinearEquationVariables=function(t){if(t instanceof Division$1)throw new RangeError;var n=[];for(var a of t.summands()){var s=void 0,l=Expression.ONE,u="";for(var c of a.factors())c instanceof Expression.Symbol&&s==null?s=c:(!(c instanceof Integer$2)&&!(c instanceof NthRoot)&&s==null&&(s=u),l=l.multiply(c));s==null&&(s=u);var d=s===u?"":s.toString();n.push({c:l,v:d})}return n};var has$2=function(t,n){if(t instanceof n)return!0;if(t instanceof BinaryOperation$1){if(t instanceof Addition$1){for(;t instanceof Addition$1;){if(has$2(t.b,n))return!0;t=t.a}return has$2(t,n)}return has$2(t.b,n)?!0:has$2(t.a,n)}return t instanceof Negation?has$2(t.b,n):t instanceof Expression.Function?has$2(t.a,n):!1};Expression.has=has$2;var has2=function(t,n){do{var a=null;t instanceof Addition$1?(a=t.b,t=t.a):(a=t,t=null);do{var s=null;if(a instanceof Multiplication$1?(s=a.b,a=a.a):(s=a,a=null),s instanceof n)return!0}while(a!=null)}while(t!=null);return!1},inverseReplacement=function(t,n){for(var a=n;!t.equals(n);)if(t instanceof Expression.Exponentiation&&t.b instanceof Multiplication$1&&n instanceof Exponentiation$1)a=a.pow(t.b.a.inverse()),t=t.pow(t.b.a.inverse());else if(t instanceof Expression.Exponentiation)a=a.pow(getExponent(t).inverse()),t=getBase(t);else if(t instanceof Addition$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.subtract(t.b),t=t.a}else if(t instanceof Multiplication$1){if(!(t.a instanceof Integer$2))throw new RangeError;a=a.divide(t.a),t=t.b}else if(t instanceof Division$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.multiply(t.b),t=t.a}else if(Expression.E===t||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&getBase(n).equals(t)){//!new 2019-09-23
a=a.pow(getExponent(n)),t=n}else throw new TypeError;return a},h$2=function(t,n,a){for(var s of t.summands())for(var l of s.factors())getBase(a).equals(getBase(l))&&(n=n.lcm(getExponent(l).getDenominator()));return n};Replacement._counter=0;function Replacement(t){this.from=getBase(t),this.to=new Expression.Symbol("$t"+ ++Replacement._counter).pow(getExponent(t).getDenominator())}Replacement.prototype.apply=function(t){var n=this.from,a=this.to,s=getVariable(n),l=Polynomial$1.toPolynomial(n.subtract(a),s);return Expression._map(function(u){if(!Expression.has(u,Expression.Division)){var c=Polynomial$1.toPolynomial(u,s);return c.divideAndRemainder(l).remainder.calcAt(s)}return u},t)};Replacement.prototype.undo1=function(t){var n=this.from,a=this.to,s=getBase(this.to),l=Polynomial$1.toPolynomial(n.subtract(a),s);return Polynomial$1.toPolynomial(t,s).divideAndRemainder(l).remainder.calcAt(s)};Replacement.prototype.undo=function(t){var n=getBase(this.to),a=this.from.pow(getExponent(this.to).inverse());return Expression._map(function(s){return s.equals(n)?a:s},t)};Replacement.prototype.equals=function(){return!0};var getReplacement=function(t,n,a){if(n instanceof Replacement)return n;for(var s of t.summands())for(var l of s.factors())if(l instanceof Expression.Exponentiation&&(Expression.has(l.a,Expression.Symbol)||l.a instanceof Integer$2&&l.a.compareTo(Expression.ONE)>0)&&l.b instanceof Expression.Division){if(getBase(n).equals(l.a))n=new Expression.Exponentiation(l.a,getConstant$1(l.b.b).lcm(getExponent(n).getNumerator()).divide(getExponent(n).getDenominator()));else if(getBase(n)instanceof Expression.Symbol){if(l.a instanceof Expression.Addition&&l.a.a.divide(getBase(n))instanceof Integer$2&&l.a.b instanceof Integer$2&&l.b instanceof Division$1&&l.b.a instanceof Integer$2&&l.b.b instanceof Integer$2){var u=l.b.getDenominator();u=h$2(t,u,l);//!
var c=getBase(n).pow(u).subtract(l.a.b).divide(l.a.a.divide(getBase(n)));return c}else if(a==="any"||a!=null&&a.equals(l.a))return new Replacement(l)}}return n};Expression._getReplacement=getReplacement;var substitute=function(t,n,a,s){if(t.equals(n))return a;if(t instanceof Expression.Exponentiation){if(t.equals(s))return n;if(getBase(t).equals(getBase(s))){//!new 2019-09-23
return n.pow(getExponent(t).divide(getExponent(s)))}}if(t instanceof Expression.Addition)return substitute(t.a,n,a,s).add(substitute(t.b,n,a,s));if(t instanceof Expression.Multiplication)return substitute(t.a,n,a,s).multiply(substitute(t.b,n,a,s));if(t instanceof Expression.Exponentiation){var l=substitute(t.a,n,a,s),u=substitute(t.b,n,a,s);return l instanceof Expression.Exponentiation&&getBase(l).equals(getBase(s))&&getExponent(s).getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)?getBase(l).pow(getExponent(l).multiply(u)):l.pow(u)}//! for sin.js:
return t instanceof Division$1?substitute(t.a,n,a,s).divide(substitute(t.b,n,a,s)):t instanceof Expression.Sin?substitute(t.a,n,a,s).sin():t instanceof Expression.Cos?substitute(t.a,n,a,s).cos():t};Expression._substitute=substitute;Expression.prototype.divideExpression=function(t){var n=this;if(simplifyIdentityMatrixPower){if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)return t.b.equals(n)?t.a:t.a.divide(n).multiply(t.b);if(t instanceof IdentityMatrix)return Expression.ONE.divide(n).multiply(t);if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix)return t.divide(n.a).multiply(n.b);if(n instanceof IdentityMatrix)return t.multiply(n)}if(has$2(n,MatrixSymbol)){//!?
var a=getBase(n)instanceof MatrixSymbol?n.pow(Expression.ONE.negate()):new Expression.Exponentiation(n,Expression.ONE.negate());if(t.equals(Expression.ONE)){if(n instanceof Multiplication$1){//!?
return Expression.callback!=null&&Expression.callback(new Expression.Event("property-inverse-of-multiplication",{matrix:"{{0}}"})),t.multiply(Expression.ONE.divide(n.b).multiply(Expression.ONE.divide(n.a)))}if(n instanceof Addition$1&&!has$2(n,Expression.Matrix)){var s=Expression.simpleDivisor(n);if(s!=null&&!s.equals(Expression.ONE)&&isScalar(s)&&!gcd(s,n).equals(Expression.ONE))return t.multiply(Expression.ONE.divide(s).multiply(Expression.ONE.divide(n.divide(s))))}return a}}if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return new Expression.Matrix(t.matrix.multiply(n.matrix.inverse()));if(t instanceof Expression.Matrix&&n instanceof Expression)return t.multiply(n.inverse());if(t instanceof Expression&&n instanceof Expression.Matrix)return Expression.callback!=null&&Expression.callback(new Expression.Event(n.matrix.getDeterminantEventType("inverse").type,n)),new Expression.Matrix(n.matrix.inverse()).multiply(t);if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");if(t.equals(Expression.ZERO))return Expression.ZERO;if(n.equals(Expression.ONE))return t;//!!! new (2021-04-05)
var l=getTerm(n);if(l instanceof Expression.Exponentiation&&getBase(l)===Expression.E&&getExponent(l)instanceof Expression.ExpressionPolynomialRoot){if(getTerm(t)instanceof Expression.Exponentiation&&getExponent(getTerm(t))instanceof Expression.ExpressionPolynomialRoot&&(t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication)&&(n instanceof Expression.Exponentiation||n instanceof Expression.Multiplication))return getExponent(getTerm(t)).subtract(getExponent(getTerm(n))).exp().multiply(getConstant$1(t).divide(getConstant$1(n)));if(getExponent(getTerm(n)).isNegative())return t.multiply(l.inverse()).divide(n.divide(l))}//!!!
//!!! new (21.12.2013)
{var u=getConjugate(n);if(u!=null){if(u.equals(Expression.ONE)){//!
if(Expression.isConstant(n))return t.multiply(Expression._map(function(cx){return cx instanceof NthRoot?Expression.toPolynomialRoot(cx):cx},n).inverse());//!
throw new TypeError}return u instanceof Expression.Multiplication&&u.a instanceof Expression.Complex&&(u=u.a),t.multiply(u).divide(n.multiply(u))}}if(Expression.has(t,Expression.Complex)){//!new 2017-11-25
var a=Expression.getComplexNumberParts(t);if(a!=null&&!a.imaginary.equals(Expression.ZERO)){var c=a.real,d=a.imaginary,Ct=(c.equals(Expression.ZERO)?n:c.gcd(n)).gcd(d)._abs();return Ct.equals(Expression.ONE)||(t=c.divide(Ct).add(d.divide(Ct).multiply(Expression.I)),n=n.divide(Ct)),n.isNegative()&&(t=t.negate(),n=n.negate()),n.equals(Expression.ONE)?t:new Division$1(t,n)}}//!
//!2020-06-07
if(!getConstant$1(n).equals(n)&&t.divide(getConstant$1(t)).equals(n.divide(getConstant$1(n))))return getConstant$1(t).divide(getConstant$1(n));var ar=n instanceof Integer$2?void 0:getVariable(t);has$2(ar,MatrixSymbol)&&isScalar(n)&&(ar=getVariable(n));//!2019-06-16
if(ar!=null){var en=ar;ar=getVariable(ar);var tn=getReplacement(n,getReplacement(t,ar,en),"any");if(tn instanceof Replacement){var c=tn.apply(t),d=tn.apply(n),on=c.divide(d),cn=tn.undo1(on.getNumerator()),dn=tn.undo1(on.getDenominator());//!new 2023-03-11:
var Ct=cn.gcd(dn);return Ct.equals(Expression.ONE)||(cn=cn.divide(Ct),dn=dn.divide(Ct)),cn=tn.undo(cn),dn=tn.undo(dn),dn.equals(Expression.ONE)?cn:new Expression.Division(cn,dn)}if(!tn.equals(ar)){var Cn=inverseReplacement(tn,ar),c=substitute(t,ar,tn,Cn),d=substitute(n,ar,tn,Cn),In=c.divide(d);return c=substitute(In.getNumerator(),ar,Cn,tn),d=substitute(In.getDenominator(),ar,Cn,tn),d.equals(Expression.ONE)?c:new Expression.Division(c,d)}}var ix=void 0,ax=void 0;if(ar!=null&&(ix=Polynomial$1.toPolynomial(t,ar),ax=Polynomial$1.toPolynomial(n,ar),ix.getDegree()===0&&ax.getDegree()===0&&(ar=void 0)),ar==null){var Ct=complexGCD(getConstant$1(t,!0),getConstant$1(n,!0));if(!Ct.equals(Expression.ONE))return t=divideByInteger(t,Ct),n=divideByInteger(n,Ct),t.divide(n)}else{//!TODO: remove - performance optimization
var In=ix.divideAndRemainder(ax,"undefined");if(In!=null&&In.remainder.equals(Polynomial$1.ZERO))return In.quotient.calcAt(ar);//!
var Ct=Polynomial$1.polynomialGCD(ix,ax);if(Ct.getDegree()!==0||!Ct.getLeadingCoefficient().equals(Expression.ONE)){var ox=ix.divideAndRemainder(Ct,"throw").quotient,sx=ax.divideAndRemainder(Ct,"throw").quotient;return ox.calcAt(ar).divide(sx.calcAt(ar))}}var ux=getConstant$1(getFirstAdditionOperand(n));return ux.compareTo(Expression.ZERO)<0?t.negate().divide(n.negate()):has$2(n,MatrixSymbol)?new Expression.Multiplication(t,new Expression.Exponentiation(n,Expression.ONE.negate())):new Division$1(t,n)};function Expression(){throw new TypeError("Do not call for better performance")}Expression.callback=void 0;Expression.Event=function(t,n,a){a=a??void 0,this.type=t,this.data=n,this.second=a};Expression.prototype.compare4Multiplication=function(t){throw new TypeError(this.toString())};Expression.prototype.compare4MultiplicationInteger=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationSymbol=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationNthRoot=function(t){throw new TypeError};Expression.prototype.negate=function(){return Expression.ONE.negate().multiply(this)};Expression.prototype.add=function(t){return t.addExpression(this)};Expression.prototype.subtract=function(t){return this.add(t.negate())};Expression.prototype.divide=function(t){//!2019-04-22
if(!(t instanceof Expression.Matrix)){if(this.equals(t)){//!TODO: remove - a hack to avoid some exceptions
return Expression.ONE}if(this.equals(t.negate()))return Expression.ONE.negate()}return t.divideExpression(this)};Expression.prototype.multiply=function(t){return t.multiplyExpression(this)};Expression.prototype.pow=function(t){return t.powExpression(this)};Expression.prototype.getDenominator=function(){return this instanceof Division$1?this.b:Expression.ONE};Expression.prototype.getNumerator=function(){return this instanceof Division$1?this.a:this};Expression.prototype.inverse=function(){return Expression.ONE.divide(this)};Expression.prototype.exp=function(){return Expression.E.pow(this)};var variables=function(t){var n=[];for(var a of t.summands())for(var s of a.factors())for(var l of getVariableInternal(s))l.v instanceof Integer$2||n.push(l.v);return n},getCommonVariable=function(t,n){for(var a=variables(t),s=variables(n),l=0;l<a.length;l+=1)if(a[l]instanceof NthRoot)return a[l];for(var l=0;l<s.length;l+=1)if(s[l]instanceof NthRoot)return s[l];for(var l=0;l<a.length;l+=1)a[l]instanceof Addition$1&&(a=a.concat(variables(a[l])),a[l]=null);for(var l=0;l<s.length;l+=1)s[l]instanceof Addition$1&&(s=s.concat(variables(s[l])),s[l]=null);for(var l=0;l<a.length;l+=1)for(var u=0;u<s.length;u+=1)if(a[l]!=null&&s[u]!=null&&a[l].equals(s[u]))return a[l];return null};Expression.prototype.gcd=function(t){if(this.equals(Expression.ONE))return this;if(this instanceof Integer$2&&t instanceof Integer$2)return integerGCD(this,t);if(!(this instanceof Integer$2)&&!(t instanceof Integer$2)){var n=getTerm(this),a=getTerm(t);if(n!=null&&a!=null&&n.equals(a))return getConstant$1(this).gcd(getConstant$1(t)).multiply(a);//!2020-11-05 more workarounds:
if(n=getTerm(getFirstAdditionOperand(this)),a=getTerm(getFirstAdditionOperand(t)),n!=null&&a!=null&&n.equals(a)){var s=getConstant$1(getFirstAdditionOperand(this)),l=getConstant$1(getFirstAdditionOperand(t));if(s instanceof Integer$2&&l instanceof Integer$2){var u=s.truncatingDivide(l);if(u instanceof Expression.Integer&&u.multiply(l).equals(s))return this.subtract(t.multiply(u)).gcd(t);var u=l.truncatingDivide(s);if(u instanceof Expression.Integer&&u.multiply(s).equals(l))return this.gcd(t.subtract(this.multiply(u)))}}}if(this.equals(Expression.ZERO)||t.equals(Expression.ZERO))return this.add(t);//!
var c=gcd(this,t,getCommonVariable(this,t));return c};Expression.prototype.lcm=function(t){return t.equals(Expression.ONE)?this:this.divide(this.gcd(t)).multiply(t)};//!new 2020-07-21
Expression.prototype.polynomialGCD=function(t){var n=this,a=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(a instanceof Expression.Symbol){var s=getReplacement(n,getReplacement(t,a));return s.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(n,a),Polynomial$1.toPolynomial(t,a)).calcAt(a):substitute(substitute(n,a,s,inverseReplacement(s,a)).polynomialGCD(substitute(t,a,s,inverseReplacement(s,a))),a,inverseReplacement(s,a),s)}return n.gcd(t)};var precedence={binary:{".^":5,"^":5,"*":3,"/":3,"+":2,"-":2},unary:{"-":5}};Expression.Symbol=function(t){this.symbol=t};Expression.Symbol.prototype=Object.create(Expression.prototype);Expression.Symbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationSymbol(this)};Expression.Symbol.prototype.compare4MultiplicationInteger=function(t){return-1};Expression.Symbol.prototype.compare4MultiplicationSymbol=function(t){return t.symbol<this.symbol?-1:this.symbol<t.symbol?1:0};Expression.Symbol.prototype.compare4MultiplicationNthRoot=function(t){return-1};Expression.Symbol.prototype.toString=function(t){if(this.symbol===""){return"e";//!
}return this.symbol};Expression.Symbol.prototype._pow=function(t){return t>1?new Expression.Exponentiation(this,Expression.Integer.fromNumber(t)):Expression.prototype._pow.call(this,t)};Expression.prototype.addInteger=function(t){return this.addExpression(t)};Expression.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:this.multiplyExpression(t)};Expression.prototype.divideInteger=function(t){return this.divideExpression(t)};var simplifyIdentityMatrixPower=!0;//! TODO:
function Integer$2(t){this.value=t}Integer$2.prototype=Object.create(Expression.prototype);Integer$2.prototype.powExpression=function(t){var n=this;if(t instanceof IdentityMatrix)return new IdentityMatrix(t.symbol);if(t instanceof MatrixSymbol)return n.equals(Expression.ZERO)?Expression.ONE:n.equals(Expression.ONE)?t:new Exponentiation$1(t,n);//!new 2019-12-16
if(t instanceof Exponentiation$1&&getExponent(t)instanceof Integer$2&&n instanceof Integer$2)return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2020-03-02
if(t instanceof Exponentiation$1&&getTerm(getExponent(t))instanceof Expression.Symbol)return getBase(t).pow(getExponent(t).multiply(n));//!
if(n.compareTo(Expression.ZERO)<0)return Expression.ONE.divide(t.pow(n.negate()));if(t instanceof Expression.Matrix){n.compareTo(Expression.ONE)>0&&(t.matrix.isDiagonal()||Expression.callback!=null&&Expression.callback(new Expression.Event("pow",t,new Expression.Matrix(Matrix$1.I(1).map(function(){return n})))));var a=function(u,c){return c.toNumber()>Number.MAX_SAFE_INTEGER?a(u,c.truncatingDivide(Expression.TWO)).pow(2).multiply(u.pow(c.remainder(Expression.TWO).toNumber())):u.pow(c.toNumber())};return new Expression.Matrix(a(t.matrix,n))}if(n.equals(Expression.ZERO))return Expression.ONE;if(n.equals(Expression.ONE))return t;if(t instanceof Expression.Symbol)return new Exponentiation$1(t,n);if(t instanceof Exponentiation$1){var s=t.b.multiply(n);if(s.getNumerator()instanceof Integer$2&&s.getDenominator()instanceof Integer$2){var l=s.getNumerator().truncatingDivide(s.getDenominator());if(l.compareTo(Expression.ZERO)>0)return t.a.pow(l).multiply(t.a.pow(s.subtract(l)))}return t.a.pow(t.b.multiply(n))}return t instanceof Integer$2&&(t.compareTo(Expression.ZERO)===0||t.compareTo(Expression.ONE)===0||t.compareTo(Expression.ONE.negate())===0)?n.remainder(Expression.TWO).compareTo(Expression.ZERO)===0?t.multiply(t):t:(t.equals(Expression.I)&&(n=n.remainder(Expression.TWO.add(Expression.TWO))),Expression.pow(t,n.toNumber()))};Integer$2.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationInteger(this)};Integer$2.prototype.compare4MultiplicationInteger=function(t){return t.compareTo(this)};Integer$2.prototype.compare4MultiplicationSymbol=function(t){return 1};Integer$2.prototype.compare4MultiplicationNthRoot=function(t){return 1};Integer$2.prototype.negate=function(){return new Integer$2(SmallBigInt.unaryMinus(this.value))};Integer$2.prototype.isUnit=function(){return this.equals(Expression.ONE)||this.equals(Expression.ONE.negate())};Expression.prototype.toExpression=function(){return this};Integer$2.prototype.compareTo=function(t){if(t instanceof Expression.Integer){var n=t.value,a=this.value;return SmallBigInt.lessThan(a,n)?-1:SmallBigInt.lessThan(n,a)?1:0}return Expression.prototype.compareTo.call(this,t)};Integer$2.prototype.abs=function(){return SmallBigInt.toNumber(this.value)<0?this.negate():this};Integer$2.prototype.sign=function(){return Math.sign(SmallBigInt.toNumber(this.value))};Integer$2.prototype.add=function(t){return this===Expression.ZERO?t:t.addInteger(this)};Integer$2.prototype.addInteger=function(t){return new Integer$2(SmallBigInt.add(t.value,this.value))};Integer$2.prototype.multiply=function(t){return t.multiplyInteger(this)};Integer$2.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:new Integer$2(SmallBigInt.multiply(t.value,this.value))};Integer$2.prototype.divide=function(t){return t.divideInteger(this)};//! for performance only
Integer$2.prototype.divideInteger=function(t){var n=this,a=t.value,s=n.value;if(SmallBigInt.toNumber(s)===0)throw new TypeError("ArithmeticException");if(typeof s=="number"&&s===1){return t;//!!!
}var l=SmallBigInt.divide(a,s),u=SmallBigInt.subtract(a,SmallBigInt.multiply(l,s));if(SmallBigInt.toNumber(u)===0)return new Integer$2(l);var c=SmallBigInt.BigInt(bigIntGCDWrapper(u,s));return a=SmallBigInt.divide(a,c),s=SmallBigInt.divide(s,c),SmallBigInt.toNumber(s)<0&&(a=SmallBigInt.unaryMinus(a),s=SmallBigInt.unaryMinus(s)),new Division$1(new Integer$2(a),new Integer$2(s))};Integer$2.prototype.truncatingDivide=function(t){return t.equals(Expression.ONE)?this:t.truncatingDivideInteger(this)};Integer$2.prototype.truncatingDivideInteger=function(t){var n=this;return new Integer$2(SmallBigInt.divide(t.value,n.value))};Integer$2.prototype.isDivisibleBy=function(t){return t.isDivisibleByInteger(this)};Integer$2.prototype.isDivisibleByInteger=function(t){return t.remainder(this).equals(Expression.ZERO)};Integer$2.prototype.remainder=function(t){return t.remainderInteger(this)};Integer$2.prototype.remainderInteger=function(t){var n=this,a=SmallBigInt.remainder(t.value,n.value);return a===1?Expression.ONE:new Integer$2(a)};Integer$2.prototype.primeFactor=function(){return integerPrimeFactor(this)};Integer$2.prototype.toNumber=function(){return SmallBigInt.toNumber(this.value)};Integer$2.prototype.toBigInt=function(){return this.value};Integer$2.prototype.toString=function(t){return this.value.toString()};Integer$2.prototype.valueOf=function(){return console.error("!"),this};Integer$2.prototype.leftShift=function(t){return new Integer$2(SmallBigInt.leftShift(this.value,t))};Integer$2.prototype.asUintN=function(t){return new Integer$2(SmallBigInt.asUintN(t,this.value))};Integer$2.fromNumber=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromString=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromBigInt=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Expression.ZERO=Integer$2.fromNumber(0);Expression.ONE=Integer$2.fromNumber(1);Expression.TWO=Integer$2.fromNumber(2);Expression.TEN=Integer$2.fromNumber(10);Expression.Matrix=function(t){this.matrix=t};Expression.Matrix.fromArray=function(t){return new Expression.Matrix(Matrix$1.padRows(t,null))};Expression.Matrix.prototype=Object.create(Expression.prototype);Expression.Matrix.prototype.augment=function(t){return t instanceof Expression.IdentityMatrix?new Expression.Matrix(this.matrix.augment(Matrix$1.I(this.matrix.cols()))):new Expression.Matrix(this.matrix.augment(t.matrix))};Expression.Matrix.prototype.equals=function(t){//!new 2019-12-03
if(t===Expression.ZERO)return this.matrix.isSquare()&&this.matrix.eql(this.matrix.map(function(n,a,s){return Expression.ZERO}));//!
return t instanceof Expression.Matrix?this.matrix.eql(t.matrix):!1};Expression.Matrix.prototype.compare4Multiplication=function(t){if(t instanceof Expression.Matrix)return 0;if(t instanceof MatrixSymbol){if(this.matrix.isSquare()&&this.matrix.isDiagonal()){const n=this.matrix.e(0,0);if(this.matrix.eql(Matrix$1.Zero(this.matrix.rows(),this.matrix.cols()).map((a,s,l)=>s===l?n:Expression.ZERO)))return 1}return-1}return 1};Expression.Matrix.prototype.compare4MultiplicationNthRoot=function(t){return 1};Expression.Matrix.prototype.multiply=function(t){return t.multiplyMatrix(this)};Expression.prototype.multiplyMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null)return new Expression.Matrix(t.matrix.scale(n));if(t.equals(Expression.ZERO)){//!TODO: TEST, TODO: sizes are lost
return t}return this.multiplyExpression(t)};Expression.Matrix.prototype.multiplyExpression=function(t){var n=getIdentityMatrixCoefficient(t);return n!=null?new Expression.Matrix(this.matrix.scale(n)):Expression.prototype.multiplyExpression.call(this,t)};Expression.Matrix.prototype.multiplyMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("multiply",t,this)),new Expression.Matrix(t.matrix.multiply(this.matrix))};Expression.Matrix.prototype.compare4MultiplicationSymbol=function(t){return 1};Expression.Matrix.prototype.multiplyDivision=Expression.Matrix.prototype.multiplyExpression;Expression.Matrix.prototype.add=function(t){return t.addMatrix(this)};Expression.Matrix.prototype.addMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("add",t,this)),new Expression.Matrix(t.matrix.add(this.matrix))};var isScalar=function(t){return t instanceof Integer$2||t instanceof Expression.Complex?!0:t instanceof MatrixSymbol?!1:t instanceof Expression.ExpressionWithPolynomialRoot?isScalar(t.e):t instanceof Expression.Symbol?!0:t instanceof BinaryOperation$1?isScalar(t.a)&&isScalar(t.b):t instanceof Negation?isScalar(t.b):t instanceof Expression.Function?isScalar(t.a):t instanceof Expression.NonSimplifiedExpression?isScalar(t.unwrap()):!1};Expression.isScalar=isScalar;var getIdentityMatrixCoefficient=function(t){var n=void 0;if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)n=t.a;else if(t instanceof IdentityMatrix)n=Expression.ONE;else if(isScalar(t))n=t;else if(t instanceof Addition$1&&Expression.has(t,IdentityMatrix)){var a=getIdentityMatrixCoefficient(t.a),s=getIdentityMatrixCoefficient(t.b);a!=null&&s!=null&&(n=a.add(s))}return n};Expression.prototype.addMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null){if(t.matrix.isSquare())return new Expression.Matrix(Matrix$1.I(t.matrix.rows()).scale(n)).add(t);throw new RangeError("NonSquareMatrixException")}return this.addExpression(t)};Expression.Matrix.prototype.addExpression=function(t){var n=getIdentityMatrixCoefficient(t);if(n!=null){if(this.matrix.isSquare())return this.add(new Expression.Matrix(Matrix$1.I(this.matrix.rows()).scale(n)));throw new RangeError("NonSquareMatrixException")}return Expression.prototype.addExpression.call(this,t)};Expression.Matrix.prototype.toString=function(t){return this.matrix.toString(setTopLevel(!0,t))};Expression.Matrix.prototype.isExact=function(){return this.matrix.isExact()};function BinaryOperation$1(t,n){this.a=t,this.b=n}BinaryOperation$1.prototype=Object.create(Expression.prototype);BinaryOperation$1.prototype.isNegation=function(){return this instanceof Multiplication$1&&this.a instanceof Integer$2&&this.a.equals(Expression.ONE.negate())};var setTopLevel=function(t,n){return n==null?{isTopLevel:t}:Object.assign({},n,{isTopLevel:t})};Expression.setTopLevel=setTopLevel;BinaryOperation$1.prototype.toString=function(t){var n=this.a,a=this.b,s=!1;this instanceof Addition$1&&a.isNegative()&&(s=!0,a=a.negateCarefully());var l=n.getPrecedence()+(n.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),u=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=a.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(l=l||n.isUnaryPlusMinus()),u=u||a.isUnaryPlusMinus(),u=u||this.unwrap()instanceof Exponentiation$1&&a.unwrap()instanceof Exponentiation$1,l=l||this.unwrap()instanceof Exponentiation$1&&n.unwrap()instanceof Expression.Function;var c=s?"-":this.getS();return this.isNegation()?"-"+(u?"(":"")+a.toString(setTopLevel(u,t))+(u?")":""):(l?"(":"")+n.toString(setTopLevel(l||t==null||t.isTopLevel,t))+(l?")":"")+c+(u?"(":"")+a.toString(setTopLevel(u,t))+(u?")":"")};Expression.prototype.unwrap=function(){return this};function Exponentiation$1(t,n){BinaryOperation$1.call(this,t,n)}Exponentiation$1.prototype=Object.create(BinaryOperation$1.prototype);Exponentiation$1.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationExponentiation(this)};Exponentiation$1.prototype.compare4MultiplicationInteger=function(t){return-1};Exponentiation$1.prototype.compare4MultiplicationExponentiation=function(t){var n=this;return getBase(t).compare4Multiplication(getBase(n))||getExponent(t).compare4Multiplication(getExponent(n))};BinaryOperation$1.prototype.compare4MultiplicationExponentiation=function(){return-1};function Multiplication$1(t,n){BinaryOperation$1.call(this,t,n)}Multiplication$1.prototype=Object.create(BinaryOperation$1.prototype);Multiplication$1.prototype.multiply=function(t){return t.multiplyExpression(this)};var compare4Multiplication2=function(t,n){if(t instanceof NthRoot&&n instanceof NthRoot){var a=t.multiply(n);if(a instanceof Expression.Multiplication){if(a.equals(new Expression.Multiplication(t,n)))return-1;if(a.equals(new Expression.Multiplication(n,t)))return 1}return 0}return t instanceof Integer$2&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Integer$2?1:t instanceof Expression.Complex&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n))};function Negation(t){this.b=t}Negation.prototype=Object.create(Expression.prototype);Expression.prototype.equalsNegation=function(t){return!1};Negation.prototype.equalsNegation=function(t){return this.b.equals(t.b)};Negation.prototype.equals=function(t){return t.equalsNegation()};Negation.prototype.toString=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"-"+(a?"(":"")+n.toString(setTopLevel(a,t))+(a?")":"")};function Subtraction(t,n){BinaryOperation$1.call(this,t,n)}Subtraction.prototype=Object.create(BinaryOperation$1.prototype);Subtraction.prototype.getS=function(){return"-"};function Addition$1(t,n){BinaryOperation$1.call(this,t,n)}Addition$1.prototype=Object.create(BinaryOperation$1.prototype);Addition$1.prototype.multiply=function(t){return t.multiplyAddition(this)};var _multiplyAddition=function(t,n,a){var s=[];for(var l of n.summands()){var u=a?t.multiply(l):l.multiply(t);s.push(u)}return _sum(s)},_sum=function(t){var n=t.length;if(n===0)return Expression.ZERO;for(;n>1;){for(var a=0;2*a<n;a+=1)t[a]=2*a+1<n?t[2*a+1].add(t[2*a]):t[2*a];n=Math.ceil(n/2)}return t[0]};Expression.prototype.multiplyAddition=function(t){return _multiplyAddition(this,t,!1)};Addition$1.prototype.multiplyExpression=function(t){return _multiplyAddition(t,this,!0)};function Division$1(t,n){BinaryOperation$1.call(this,t,n)}Division$1.prototype=Object.create(BinaryOperation$1.prototype);Division$1.prototype.multiply=function(t){return t.multiplyDivision(this)};Expression.prototype.multiplyDivision=function(t){return t.a.multiply(this).divide(t.b)};Division$1.prototype.multiplyDivision=function(t){return t.a.multiply(this.a).divide(t.b.multiply(this.b))};Division$1.prototype.multiplyExpression=function(t){return t.multiply(this.a).divide(this.b)};Division$1.prototype.add=function(t){return t.addDivision(this)};Expression.prototype.addDivision=function(t){return t.a.add(this.multiply(t.b)).divide(t.b)};Division$1.prototype.addDivision=function(t){return t.b.equals(this.b)?t.a.add(this.a).divide(this.b):t.a.multiply(this.b).add(t.b.multiply(this.a)).divide(t.b.multiply(this.b))};Division$1.prototype.addExpression=function(t){return t.multiply(this.b).add(this.a).divide(this.b)};Division$1.prototype.divide=function(t){return this.a.divide(this.b.multiply(t))};Division$1.prototype.divideExpression=function(t){return t.multiply(this.b).divide(this.a)};Division$1.prototype.multiplyAddition=function(t){return t.multiply(this.a).divide(this.b)};Expression.prototype.equals=function(t){throw new RangeError};Expression.prototype.equalsInteger=function(t){return this instanceof Expression.ExpressionWithPolynomialRoot||this instanceof Expression.ExpressionPolynomialRoot?this.equals(t):!1};const _isNumberTypeUsedForSmall=SmallBigInt.BigInt(0)===0;Integer$2.prototype.equals=function(t){return t===Expression.ZERO&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===0:t===Expression.ONE&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===1:t.equalsInteger(this)};Integer$2.prototype.equalsInteger=function(t){return t.compareTo(this)===0};Expression.Symbol.prototype.equals=function(t){return t instanceof Expression.Symbol&&this.symbol===t.symbol};BinaryOperation$1.prototype.equals=function(t){if(t instanceof Addition$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(t instanceof Addition$1&&this instanceof Multiplication$1&&Expression.has(this,Expression.ExpressionPolynomialRoot)||this instanceof Addition$1&&t instanceof Multiplication$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(this instanceof Addition$1&&t instanceof Addition$1){for(var n=this,a=t,s=n.summands(),l=a.summands(),u=s.next().value,t=l.next().value;u!=null&&t!=null;){if(!u.equals(t))return!1;u=s.next().value,t=l.next().value}return u!=null?!1:t==null}return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):t instanceof BinaryOperation$1&&this.getS()===t.getS()&&this.a.equals(t.a)&&this.b.equals(t.b)};function MatrixSymbol(t){Expression.Symbol.call(this,t)}MatrixSymbol.prototype=Object.create(Expression.Symbol.prototype);Exponentiation$1.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationMatrixSymbol(this)};Expression.prototype.compare4MultiplicationMatrixSymbol=function(t){return 1};Addition$1.prototype.compare4MultiplicationMatrixSymbol=function(t){return-1};Expression.Matrix.prototype.compare4MultiplicationMatrixSymbol=function(t){return t instanceof IdentityMatrix?1:-1};MatrixSymbol.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=Expression.Symbol.prototype.compare4MultiplicationSymbol.call(this,t);return n===1?-1:n};MatrixSymbol.prototype.compare4MultiplicationSymbol=function(t){return-1};MatrixSymbol.prototype.equals=function(t){return t instanceof MatrixSymbol&&Expression.Symbol.prototype.equals.call(this,t)};MatrixSymbol.prototype.transpose=function(){return new Expression.Exponentiation(this,new Expression.Symbol("T"))};Expression.MatrixSymbol=MatrixSymbol;function IdentityMatrix(t){MatrixSymbol.call(this,t)}IdentityMatrix.prototype=Object.create(MatrixSymbol.prototype);IdentityMatrix.prototype.multiplyAddition=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyAddition.call(this,t)};IdentityMatrix.prototype.addMatrix=function(t){return t.add(new Expression.Matrix(Matrix$1.I(t.matrix.rows())))};IdentityMatrix.prototype.add=function(t){return t.addIdentityMatrix(this)};Expression.prototype.addIdentityMatrix=function(t){return this.addExpression(t)};Expression.Matrix.prototype.addIdentityMatrix=function(t){return new Expression.Matrix(Matrix$1.I(this.matrix.rows())).add(this)};IdentityMatrix.prototype.multiplyDivision=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyExpression.call(this,t)};IdentityMatrix.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=this;return t instanceof IdentityMatrix?t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0:1};Expression.IdentityMatrix=IdentityMatrix;BinaryOperation$1.prototype.getS=function(){throw new TypeError("abstract")};Exponentiation$1.prototype.getS=function(){return"^"};Multiplication$1.prototype.getS=function(){return"*"};Negation.prototype.getS=function(){return"-"};Addition$1.prototype.getS=function(){return"+"};Division$1.prototype.getS=function(){return"/"};Expression.Function=function(t,n){this.name=t,this.a=n};Expression.Function.prototype=Object.create(Expression.prototype);Expression.Function.prototype.toString=function(t){return this.name+"("+this.a.toString(setTopLevel(!0,t))+")"};Expression.Function.prototype.equals=function(t){return t instanceof Expression.Function&&this.name===t.name&&this.a.equals(t.a)};Negation.prototype.isUnaryPlusMinus=function(){return!0};BinaryOperation$1.prototype.isUnaryPlusMinus=function(){return this.isNegation()};Expression.Function.prototype.isUnaryPlusMinus=function(){return!1;//!
};Expression.prototype.isUnaryPlusMinus=function(){return!1};Integer$2.prototype.isUnaryPlusMinus=function(){return this.compareTo(Expression.ZERO)<0};Negation.prototype.getPrecedence=function(){return precedence.unary["-"]};BinaryOperation$1.prototype.getPrecedence=function(){return this.isNegation()?precedence.unary["-"]:precedence.binary[this.getS()]};Expression.Function.prototype.getPrecedence=function(){return precedence.unary["-"]};Expression.prototype.getPrecedence=function(){return 1e3};Integer$2.prototype.getPrecedence=function(){return this.compareTo(Expression.ZERO)<0?precedence.unary["-"]:1e3};//! Note: this function is more for canonical order(?) or output(?), to check if a numeric expression is negative you should use Expression#sign()
Expression.prototype.isNegative=function(){var t=this;if(t instanceof Integer$2)return t.compareTo(Expression.ZERO)<0;if(t instanceof Expression.Complex)return t.real.compareTo(Expression.ZERO)<0||t.real.compareTo(Expression.ZERO)===0&&t.imaginary.compareTo(Expression.ZERO)<0;if(t instanceof Addition$1){var n=t;do n=n.a;while(n instanceof Addition$1);return n.isNegative()}return t instanceof Multiplication$1||t instanceof Division$1?t.a.isNegative()!==t.b.isNegative():t instanceof Negation?!0:t instanceof Expression.Radians?t.value.isNegative():!1};Expression.prototype.negateCarefully=function(){if(this instanceof Integer$2)return this.negate();if(this instanceof Addition$1)return new Addition$1(this.a.negateCarefully(),this.b.negateCarefully());if(this instanceof Multiplication$1)return this.b.isNegative()?new Multiplication$1(this.a,this.b.negateCarefully()):this.a.negateCarefully().equals(Expression.ONE)?this.b:new Multiplication$1(this.a.negateCarefully(),this.b);if(this instanceof Division$1)return this.b.isNegative()?new Division$1(this.a,this.b.negateCarefully()):new Division$1(this.a.negateCarefully(),this.b);if(this instanceof Negation){return this.b;//!
}return this.negate()};function NthRoot(t,n,a){Expression.Function.call(this,t,n),this.n=a,this.degree=a,this.radicand=n,console.assert(t===(a===2?"sqrt":a+"-root"))}NthRoot.prototype=Object.create(Expression.Function.prototype);NthRoot.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationNthRoot(this)};NthRoot.prototype.compare4MultiplicationInteger=function(t){return-1};NthRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};NthRoot.prototype.compare4MultiplicationNthRoot=function(t){return t.n<this.n?-1:t.n>this.n?1:0};NthRoot.prototype.toString=function(t){var n=this.a.getPrecedence()<=this.getPrecedence();return(n?"(":"")+this.a.toString(setTopLevel(n||t==null||t.isTopLevel,t))+(n?")":"")+"^"+(this.n===2?"0.5":"(1/"+this.n+")")};var isCommutative=function(t){return!Expression.has(t,Expression.Matrix)&&!Expression.has(t,Expression.MatrixSymbol)};NthRoot.prototype.getDegree=function(){return console.error("deprecated"),this.n};NthRoot.prototype.multiplyExpression=function(t){if(t instanceof Multiplication$1&&isCommutative(this)&&this.a instanceof Expression.Integer){for(var n of t.factors())if(n instanceof NthRoot&&n.a instanceof Expression.Integer&&compare4Multiplication2(n,this)===0){var a=!1,s=Expression.ONE;for(var l of t.factors()){var u=l;!a&&n===l&&(u=n.multiply(this),a=!0),s=s.multiply(u)}return s}}return Expression.prototype.multiplyExpression.call(this,t)};NthRoot.prototype.equals=function(t){return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):Expression.Function.prototype.equals.call(this,t)};//!new
NthRoot.prototype._pow=function(t){var n=Math.gcd(this.n,t);return n>1?this.n===n?this.a._pow(t/n):this.a._nthRoot(this.n/n)._pow(t/n):Expression.prototype._pow.call(this,t)};function isPerfectCube(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(3).toBigInt(),SmallBigInt.BigInt(3)),t.toBigInt()))===0}function isPerfectSquare(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(2).toBigInt(),SmallBigInt.BigInt(2)),t.toBigInt()))===0}var makeRoot=function(t,n){return n===1?t:n===2?new SquareRoot(t):new NthRoot(n+"-root",t,n)};NthRoot.makeRoot=makeRoot;Expression.prototype._nthRoot=function(t){if(typeof t=="number"){if(t<1||t>Number.MAX_SAFE_INTEGER||Math.floor(t)!==t)throw new RangeError("NotSupportedError")}else if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");var n=this;if(t===2&&n instanceof Addition$1){if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,$x=n.b,s=$x.multiply($x).subtract(a.multiply(a));s instanceof Integer$2&&!isPerfectSquare(s.abs())&&(s=null);var l=s instanceof Integer$2&&s.compareTo(Expression.ZERO)>=0?s.squareRoot():void 0;if(l!=null&&l instanceof Integer$2){var u=$x.add(l),c=u.compareTo(Expression.ZERO)>=0?u.squareRoot().divide(Expression.TWO.squareRoot()):void 0;if(c!=null){var d=a.divide(Expression.TWO.multiply(c));return c.add(d)}}}if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&(n.b instanceof SquareRoot||n.b instanceof Multiplication$1&&n.b.a instanceof Integer$2&&n.b.b instanceof SquareRoot)){var c=n.a,d=n.b,u=c.multiply(c),Ct=d.multiply(d),ar=u.gcd(Ct).squareRoot();if(!ar.equals(Expression.ONE)){var $x=c.divide(ar).add(d.divide(ar)).squareRoot().multiply(ar.squareRoot());return typeof hit=="function"&&hit({rootFromAddition:n.toString()}),$x}}if(Expression._isPositive(n)){var en=getConjugateFactor(n);if(en.p!=null){var l=en.p.toExpression()._nthRoot(en.degree),tn=getPolynomialRelativeToNthRoot(n,en.p,en.degree),a=tn.getCoefficient(1).multiply(l.toExpression()),$x=tn.getCoefficient(0),on=$x.multiply($x).subtract(a.multiply(a)),cn=function(Wx){var tE=Wx.divide(getConstant$1(Wx)),lE=Expression.getConjugate(tE);return lE!=null&&lE.multiply(tE)instanceof Integer$2&&isPerfectSquare(lE.multiply(tE).abs())};if(on instanceof Integer$2||cn(on)){var dn=on.squareRoot(),u=$x.add(dn);if(u instanceof Integer$2||cn(u)){var c=u.squareRoot().divide(Expression.TWO.squareRoot()),d=a.divide(Expression.TWO.multiply(c));return c.add(d)}}}}else if(Expression._isPositive(n.negate())&&t===2)return Expression.I.multiply(n.negate()._nthRoot(2))}if(t===3&&n instanceof Addition$1&&(n.a instanceof SquareRoot&&n.a.a instanceof Integer$2||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,$x=n.b,Cn=a.multiply(a).subtract($x.multiply($x));if(isPerfectCube(Cn)){var l=new Expression.Symbol("t"),In=Expression.Integer.fromNumber(9),ix=Expression.Integer.fromNumber(27),ax=Expression.pow(In.multiply(l).add($x.subtract(l)),2).multiply($x.subtract(l)).subtract(ix.multiply(l).multiply(Expression.pow(a,2))),ox=Polynomial$1.toPolynomial(ax,l);ox=ox.scale(ox.getContent().inverse());var l=ox.doRationalRootTest();if(l!=null){var c=l._nthRoot(3),d=a.divide(a.abs()).multiply($x.subtract(l).divide(Expression.Integer.fromNumber(3).multiply(c))._nthRoot(2));return c.add(d)}}}if(n instanceof NthRoot)return typeof hit=="function"&&hit({rootFromRoot:""}),n.a._nthRoot(n.n*t);if((n instanceof Division$1||n instanceof Multiplication$1)&&(t%2!==0||n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0||n.b instanceof Integer$2&&n.b.compareTo(Expression.ZERO)>0||n.a instanceof Integer$2&&isConstant$1(n.b)||isConstant$1(n)||isPositive(n.a)||isPositive(n.b)||isPositive(n.b.negate()))){if(n instanceof Division$1)return n.a._nthRoot(t).divide(n.b._nthRoot(t));if(n instanceof Multiplication$1)return n.a._nthRoot(t).multiply(n.b._nthRoot(t))}var sx=n instanceof Integer$2?n:null,ux=QuadraticInteger.toQuadraticInteger(n);//!
if(ux==null&&n instanceof Expression.Addition&&n.a instanceof Multiplication$1&&n.b instanceof Multiplication$1){var ar=n.a.pow(Expression.TWO).gcd(n.b.pow(Expression.TWO)).squareRoot();if(!ar.equals(Expression.ONE))return ar._nthRoot(t).multiply(n.divide(ar)._nthRoot(t))}//!
if(ux!=null){if(t!==2&&t%2===0){var en=n.squareRoot();if(!(en instanceof Expression.SquareRoot))return en._nthRoot(t/2)}if((t===2||t===3)&&ux.isValid())if(ux.isPositive()){sx=ux;//!new 2020-12-31
if(ux.norm!=null&&Math.abs(Number(ux.norm().toString()))>Number.MAX_SAFE_INTEGER&&t!==3){sx=null;//!
}//!
}else return Expression.ONE.negate()._nthRoot(t).multiply(this.negate()._nthRoot(t))}if(sx!=null){if(n=sx,n instanceof Integer$2&&n.compareTo(Expression.ZERO)<0){if(t%2===0){if(t===2)return Expression.I.multiply(this.negate()._nthRoot(t));throw new RangeError("NotSupportedError")}return this.negate()._nthRoot(t).negate()}if(n.equals(Expression.ZERO))return this;for(var cx=[],hx=n;!hx.equals(Expression.ONE);){var Cn=hx.primeFactor();if(Cn instanceof QuadraticInteger){if(t!==2&&t!==3)throw new TypeError;if(Number(Cn.a.toString())<0&&Number(Cn.b.toString())>0||Number(Cn.a.toString())>0&&Number(Cn.b.toString())<0){var c=t%2===0?Cn.abs():Cn;return n.toExpression().divide(c.toExpression()._pow(t))._nthRoot(t).multiply(c.toExpression())}var gx=Cn.norm();if(Number(Cn.b.toString())!==0&&Number(Cn.a.toString())!==0&&Number(gx.toString())>=0&&isPerfectSquare(Integer$2.fromBigInt(gx))&&t===2)return n.toExpression().divide(Cn.toExpression())._nthRoot(2).multiply(Cn.toExpression()._nthRoot(2))}var fx=hx instanceof Expression.Integer&&Cn instanceof Expression.Integer?primeFactor._countTrailingZeros(hx.value,Cn.value):-1,dx=0;if(fx!==-1)dx=fx,hx=hx.truncatingDivide(Cn._pow(fx));else if(hx.isUnit())for(;!hx.equals(Expression.ONE);)hx=hx.truncatingDivide(Cn),dx+=1;else for(;hx.isDivisibleBy(Cn);)hx=hx.truncatingDivide(Cn),dx+=1;Cn=Cn.toExpression();var mx=t;Cn instanceof NthRoot&&(mx*=Cn.n,Cn=Cn.a);var l=Math.gcd(mx,dx);for(mx/=l,dx/=l;dx!==0;){var ar=dx>=mx?mx:1,vx=Math.floor(dx/ar),xx=Math.floor(mx/ar);cx.push(Object.freeze({degree:xx,radicand:Expression.pow(Cn,vx)})),dx=dx-ar*vx}}var bx=Expression.ONE;cx.sort((Hx,Vx)=>Hx.degree-Vx.degree);for(var xx=-1,hx=0;hx<cx.length;hx+=1)xx===-1||cx[hx].degree!==cx[xx].degree?(xx+=1,cx[xx]=cx[hx]):cx[xx]=Object.freeze({degree:cx[hx].degree,radicand:cx[xx].radicand.multiply(cx[hx].radicand)});cx.length=xx+1;for(var _x=null,Ex=0;Ex<cx.length;Ex+=1){var Tx=cx[Ex].degree;if(Tx!==1){var Cx=cx[Ex].radicand,n=makeRoot(Cx,Tx);bx!==Expression.ONE?bx=new Expression.Multiplication(bx,n):bx=n}else _x=cx[Ex].radicand}return _x!=null&&(bx=_x.multiply(bx)),bx}if(n instanceof Expression.Matrix){typeof hit=="function"&&hit(t===2?{squareRoot:"matrix"}:{nthRoot:"Matrix^(1/"+t+")"});var Mx=Expression.getEigenvalues(n.matrix),Ax=typeof t=="number"?Expression.Integer.fromNumber(t):t;if(Mx.length===n.matrix.cols()){var Nx=Expression.getEigenvectors(n.matrix,Mx);if(Nx.filter(Hx=>Hx!=null).length===n.matrix.cols()){n.matrix.isDiagonal()||(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-diagonalization",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",n)));var en=Expression.diagonalize(n.matrix,Mx,Nx),Ux=en.L,Rx=Ux.map(function(Vx,nE,Wx){return nE===Wx?Vx.pow(Expression.ONE.divide(Ax)):Vx});return new Expression.Matrix(en.T.multiply(Rx).multiply(en.T_INVERSED))}else{n.matrix.isJordanMatrix()?Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-matrix-nth-root",n)):(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-Jordan-normal-form",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",n)));var Ox=function(Vx,nE){var Wx=Vx.map(function(tE,lE,iE){if(lE>iE)return Expression.ZERO;if(lE===iE)return Vx.e(lE,iE).pow(Expression.ONE.divide(nE));if(Vx.e(lE,lE+1).equals(Expression.ZERO))return Expression.ZERO;if(!Vx.e(lE,lE+1).equals(Expression.ONE))throw new TypeError("assertion");for(var Xx=iE-lE,CE=0;CE<Xx;CE+=1)if(!Vx.e(iE-1-CE,iE-CE).equals(Expression.ONE))return Expression.ZERO;for(var RE=Expression.ONE,CE=0;CE<Xx;CE+=1)RE=RE.multiply(Expression.ONE.divide(nE).subtract(Expression.Integer.fromNumber(CE))).divide(Expression.Integer.fromNumber(CE+1));return RE.divide(Vx.e(lE,lE)._pow(Xx)).multiply(Vx.e(lE,lE).pow(Expression.ONE.divide(nE)))});return Wx},en=Expression.getFormaDeJordan(n.matrix,Mx),Px=Ox(en.J,Ax);return new Expression.Matrix(en.P.multiply(Px).multiply(en.P_INVERSED))}}}//!2019-04-22
if(n instanceof Exponentiation$1&&n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0)if(n.b instanceof Expression.Symbol){if(n.a instanceof Expression.Integer&&integerPrimeFactor(n.a).equals(n.a))return new Expression.Exponentiation(n.a,n.b.divide(Expression.Integer.fromNumber(t)))}else return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));//!2019-16-06
if(n instanceof Exponentiation$1&&n.a===Expression.E||n instanceof Exponentiation$1&&getBase(n)instanceof Expression.Logarithm&&getBase(n).a instanceof Expression.Integer)return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));if(n instanceof IdentityMatrix)return n;//!2019-17-06
if(n instanceof Expression.Symbol)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(n instanceof Exponentiation$1&&(n.a instanceof Expression.Symbol||isGoodPolynomial(n.a))&&(t%2===1||n.b.getNumerator()instanceof Integer$2&&n.b.getNumerator().remainder(Expression.TWO).equals(Expression.ONE))){var d=n.b.divide(Expression.Integer.fromNumber(t));return d.equals(Expression.ONE)?n.a:new Expression.Exponentiation(n.a,d)}//!2019-06-20
var $x=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if($x instanceof Expression.Symbol||$x instanceof Expression.Logarithm&&$x.a instanceof Expression.Integer&&(t===2||t===3||!0)){var ox=Polynomial$1.toPolynomial(n,$x),Lx=ox.getContent();if(Lx.isNegative()&&(Lx=Lx.negate()),isPositive(Lx)&&!Lx.equals(Expression.ONE))return n.divide(Lx)._nthRoot(t).multiply(Lx._nthRoot(t));if(ox.getDegree()===1&&ox.getCoefficient(0)instanceof Integer$2&&!ox.getCoefficient(0).equals(Expression.ZERO)&&ox.getCoefficient(1)instanceof Integer$2)if(ox.getCoefficient(1).compareTo(Expression.ZERO)>0){var Ax=t instanceof Expression.Symbol?t:Expression.Integer.fromNumber(t);return new Expression.Exponentiation(n,Expression.ONE.divide(Ax))}else{//!TODO: fix
if(t%2!==0)return Expression.ONE.negate()._nthRoot(t).multiply(new Expression.Exponentiation(n.negate(),Expression.ONE.divide(Expression.Integer.fromNumber(t))))}if(ox.getDegree()>1&&!ox.getCoefficient(0).equals(Expression.ZERO)){var Ax=ox.getDegree(),l=$x.multiply(ox.getCoefficient(Ax)._nthRoot(Ax)).add(ox.getCoefficient(0)._nthRoot(Ax));if(n.equals(l._pow(Ax))){//!TODO: remove
if(Ax>=t&&(t%2!==0||Expression._isPositive($x)))return l.pow(Expression.ONE).multiply(l._pow(Ax-t)._nthRoot(t));//!
if(t%2!==0||Expression._isPositive($x))return new Expression.Exponentiation(l,Expression.Integer.fromNumber(Ax).divide(Expression.Integer.fromNumber(t)))}if(ox.getDegree()>1&&ox.getSquareFreePolynomial().equals(ox)&&t===2)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(ox.getDegree()>1&&t===3){var Cn=simpleDivisor(n);return n.divide(Cn)._nthRoot(t).multiply(Cn._nthRoot(t))}}}if(t%2!==0&&n instanceof Expression.ExponentiationOfMinusOne)return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));if(n instanceof Addition$1&&n.b instanceof NthRoot&&n.a instanceof NthRoot){var ar=nthRootCommonFactor(n.a,n.b);if(!ar.equals(Expression.ONE))return ar._nthRoot(t).multiply(n.divide(ar)._nthRoot(t))}if(n instanceof Exponentiation$1&&t===3&&getExponent(n).equals(Integer$2.fromNumber(3)))return getBase(n);if(n instanceof Exponentiation$1&&t===2&&getExponent(n).equals(Integer$2.fromNumber(2))){if(isPositive(getBase(n)))return getBase(n);if(isPositive(getBase(n).negate()))return getBase(n).negate()}if(t===2&&!(n.getDenominator()instanceof Expression.Integer)){var zx=simpleDivisor(n.getDenominator());if(zx.complexConjugate().multiply(zx).equals(n.getDenominator()))return n.getNumerator()._nthRoot(t).divide(zx.abs())}var zx=simpleDivisor(n);if(!zx.equals(n)&&(console.log(zx.toString()),isPositive(zx)&&(!(zx instanceof Addition$1)||!(n.divide(zx)instanceof Addition$1))&&!(zx._nthRoot(t)instanceof NthRoot)))return zx._nthRoot(t).multiply(n.divide(zx)._nthRoot(t));const qx=!0,jx=function(Hx){return Expression.isConstant(Hx)&&!Expression.has(Hx,Expression.Sin)&&!Expression.has(Hx,Expression.Cos)};if(typeof t=="number"&&!isPositive(n)&&qx&&jx(n)&&t===2){const Hx=Expression.getComplexNumberParts(n),Vx=Hx.real,nE=Hx.imaginary,Wx=Vx._pow(2).add(nE._pow(2)).squareRoot(),tE=Vx.add(Wx).divide(Expression.TWO).squareRoot(),lE=Expression.Integer.fromNumber(nE.sign()).multiply(Vx.negate().add(Wx).divide(Expression.TWO).squareRoot());return tE.add(lE.multiply(Expression.I))}if(typeof t=="number"&&(isPositive(n)||jx(n)&&t===2)){var en=Expression.toPolynomialRoot(makeRoot(n,t));if(en!=null)return en}if(typeof t=="number"&&isPositive(n.negate())){var en=Expression.toPolynomialRoot(makeRoot(n.negate(),t));if(en!=null)return en.negate()}if(getBase(n)instanceof Expression.Symbol&&getBase(n).symbol.startsWith("$t")&&typeof t=="number")return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));//!new
if(Expression.isReal(n)&&typeof t=="number"&&isPositive(n))return new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse());//!
if(t===2&&!(this instanceof Expression.Exponentiation)){var Cn=simpleDivisor(this);if(Cn.complexConjugate().multiply(Cn).equals(this))return Cn.abs()}if(t===2&&!(this instanceof Expression.Exponentiation))return console.log(this.toString()),Expression.has(this,Expression.Symbol)?new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse()):NthRoot.makeRoot(this,t);throw new RangeError("NotSupportedError")};function SquareRoot(t){NthRoot.call(this,"sqrt",t,2)}SquareRoot.prototype=Object.create(NthRoot.prototype);//!
SquareRoot.prototype.divideInteger=function(t){return t.multiply(this).divide(this.a)};Expression.prototype.squareRoot=function(){return this._nthRoot(2)};Expression.Rank=function(t){Expression.Function.call(this,"rank",t)};Expression.Rank.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rank=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
Expression.callback!=null&&Expression.callback(new Expression.Event("rank",t));var n=[],a=void 0;if(Matrix$1.toRowEchelonWithCallback(t.matrix,Matrix$1.GaussMontante,"",void 0,function(s){var l=s.condition;if(l.isTrue())a=s.matrix.rank();else{var u=s.matrix;n.push(new ExpressionWithCondition(Integer$2.fromNumber(u.rank()),l))}}),n.length!==0)return new Expression.Cases(n);//!
return Integer$2.fromNumber(a)};Expression.Determinant=function(t){Expression.Function.call(this,"determinant",t)};Expression.Determinant.prototype=Object.create(Expression.Function.prototype);function isSquareMatrix(t){return!!(t instanceof Expression.Matrix&&t.matrix.isSquare()||t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))}Expression.prototype.determinant=function(){var t=this;if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().multiply(t.b.determinant());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().pow(t.b);if(t instanceof Expression.MatrixSymbol)return new Expression.Determinant(t);if(isMatrixSymbolTranspose(t))return t.transpose().determinant();if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event(t.matrix.getDeterminantEventType("determinant").type,t)),t.matrix.determinant()};Expression.RowReduce=function(t){Expression.Function.call(this,"row-reduce",t)};Expression.RowReduce.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rowReduce=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event("row-reduce".type,t)),new Expression.Matrix(t.matrix.toRowEchelon(Matrix$1.GaussJordan,"",null).matrix)};Expression.Transpose=function(t){Expression.Function.call(this,"transpose",t)};Expression.Transpose.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transpose=function(){var t=this;if(t instanceof Expression.Multiplication)return Expression.callback!=null&&Expression.callback(new Expression.Event("property-transpose-of-multiplication",{matrix:"{{0}}"})),t.b.transpose().multiply(t.a.transpose());if(t instanceof Expression.Addition)return t.a.transpose().add(t.b.transpose());if(isScalar(t))return t;if(!(getBase(t)instanceof MatrixSymbol)&&t instanceof Expression.Exponentiation&&t.b.equals(Expression.ONE.negate()))return t.a.transpose().pow(t.b);if(t instanceof Expression.Exponentiation&&t.b.equals(new Expression.Symbol("T")))return t.a;if(getBase(t)instanceof MatrixSymbol){var n=getExponent(t).multiply(new Expression.Symbol("T")),a=Polynomial$1.toPolynomial(n,new Expression.Symbol("T"));return a.getDegree()>=2&&(n=n.subtract(a.getCoefficient(2).multiply(new Expression.Symbol("T")._pow(2))).add(a.getCoefficient(2))),new Expression.Exponentiation(getBase(t),n)}if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.transpose())};Expression.Adjugate=function(t){Expression.Function.call(this,"adjugate",t)};Expression.Adjugate.prototype=Object.create(Expression.Function.prototype);Expression.prototype.adjugate=function(){var t=this;const n=function(){Expression.callback!=null&&Expression.callback(new Expression.Event("property-adjugate-of-multiplication",{matrix:"{{0}}"}))};if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return n(),t.b.adjugate().multiply(t.a.adjugate());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return n(),t.a.adjugate().pow(t.b);if(isMatrixSymbolTranspose(t))return n(),t.transpose().adjugate().transpose();if(t instanceof Expression.MatrixSymbol)return t.determinant().multiply(t.inverse());if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");if(Expression.callback!=null&&Expression.callback(new Expression.Event("adjugate",t)),t.matrix.rows()===1&&t.matrix.cols()===1)return new Expression.Matrix(Matrix$1.I(1));var a=t.matrix.determinant();if(Expression.isScalar(a)&&!a.equals(Expression.ZERO))return new Expression.Matrix(t.matrix.inverse().scale(a));var s=t.matrix.map(function(u,c,d,Ct){return(c+d-2*Math.floor((c+d)/2)===1?Expression.ONE.negate():Expression.ONE).multiply(Ct.minorMatrix(c,d).determinant())}),l=new Expression.Matrix(s.transpose());return l};Expression.NoAnswerExpression=function(t,n,a){Expression.Function.call(this,n,t),this.second=a};Expression.NoAnswerExpression.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transformNoAnswerExpression=function(t,n){if(n=n??void 0,!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return t==="solve"&&Expression.callback!=null&&Expression.callback(new Expression.Event("solve",this)),new Expression.NoAnswerExpression(this,t,n)};Expression.NoAnswerExpression.prototype.multiply=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.add=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.toString=function(t){return this.second==null?Expression.Function.prototype.toString.call(this,t):this.a.toString(setTopLevel(!0,t))+" "+this.name+" "+this.second.toString(setTopLevel(!0,t))};Expression.ElementWisePower=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.ElementWisePower.prototype=Object.create(BinaryOperation$1.prototype);Expression.ElementWisePower.prototype.getS=function(){return".^"};Expression.prototype.elementWisePower=function(t){if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(this.matrix.map(function(n,a,s){return n.pow(t)}))};Expression.prototype.isRightToLeftAssociative=function(){var t=this;return t instanceof Integer$2?t.compareTo(Expression.ZERO)<0:t instanceof Negation?!0:t instanceof BinaryOperation$1?t.isNegation()?!0:t instanceof Exponentiation$1:!1};var integerPrimeFactor=function(t){return Integer$2.fromBigInt(primeFactor(t.value))},simpleDivisor=function(t){if(t instanceof Division$1)throw new RangeError;if(t instanceof Expression.Matrix)throw new RangeError;if(t instanceof Expression.Symbol)return t;if(t instanceof Integer$2){var n=t,a=n.compareTo(Expression.ZERO)<0?n.negate():n;return a.compareTo(Expression.ONE)>0?integerPrimeFactor(a):null}if(t instanceof Expression.Complex){var s=t.primeFactor();return!s.equals(t)&&t.divide(s)instanceof Expression.Integer&&(s=s.multiply(Expression.I)),s}var l=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(l instanceof NthRoot&&l.a instanceof Integer$2&&l.n===2){var u=getPolynomialRelativeToNthRoot(t,l.a,l.n),s=u.getContent();if(!s.equals(Expression.ONE)&&!s.equals(Expression.ONE.negate()))return simpleDivisor(s)}if(l!=null){l=getVariable(l);//!?TODO: FIX
var c=getReplacement(t,l);if(!c.equals(l))return substitute(simpleDivisor(substitute(t,l,c,inverseReplacement(c,l))),l,inverseReplacement(c,l),c);var d=Polynomial$1.toPolynomial(t,l),Ct=d.getContent(),ar=simpleDivisor(Ct);if(ar!=null)return ar;var en=getConstant$1(d.getLeadingCoefficient());if(en instanceof Expression.Complex&&en.real.equals(Expression.ZERO)){return Expression.I;//!?
}if(d.getCoefficient(0).equals(Expression.ZERO))return l;if(d.getDegree()>=2){var tn=d.doRationalRootTest();if(tn!=null){var ar=l.multiply(tn.getDenominator()).subtract(tn.getNumerator());return ar}}if(d.getDegree()>=2&&d._hasIntegerLikeCoefficients()){var ar=d.factorize();if(ar!=null)return simpleDivisor(ar.calcAt(l))}if(d.getDegree()>=2&&!d._hasIntegerLikeCoefficients()){var ar=d.squareFreeFactors();if(ar.a0.getDegree()!==0)return ar.a0.scale(ar.a0.getLeadingCoefficient().inverse()).calcAt(l)}if(t=d.calcAt(l),t.isNegative()){t=t.negate();//!?
}return t}throw new RangeError};Expression.simpleDivisor=simpleDivisor;Expression.everyDivisor=function(t,n){if(t.equals(Expression.ZERO))return!0;if(!n(Expression.ONE))return!1;for(var a=[],s=function(u,c,d){if(c>=0){for(var Ct=a[c],ar=u;ar<=Ct.e;ar+=1)if(!s(0,c-1,d.multiply(Expression.pow(Ct.d,ar))))return!1}else if(!n(d))return!1;return!0};!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate());){var l=simpleDivisor(t);if((a.length===0||!a[a.length-1].d.equals(l))&&a.push({d:l,e:0}),a[a.length-1].e+=1,!s(a[a.length-1].e,a.length-1,Expression.ONE))return!1;t=t.divide(l)}return!0};Expression.Integer=Integer$2;Expression.NthRoot=NthRoot;Expression.SquareRoot=SquareRoot;Expression.Negation=Negation;Expression.Subtraction=Subtraction;Expression.BinaryOperation=BinaryOperation$1;Expression.Exponentiation=Exponentiation$1;Expression.Multiplication=Multiplication$1;Expression.Addition=Addition$1;Expression.Division=Division$1;Expression.pow=function(t,n){return t._pow(n)};Expression.prototype._pow=function(t){return pow(this,t,Expression.ONE)};Expression.Integer.prototype._pow=function(t){return typeof t=="number"&&Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER?new Integer$2(SmallBigInt.exponentiate(this.value,SmallBigInt.BigInt(t))):Expression.prototype._pow.call(this,t)};Expression.Integer.prototype._nthRoot=function(t){if(typeof t=="number"&&t===2&&this.equals(this.abs())&&isPerfectSquare(this))return this._integerNthRoot(2);if(typeof t=="number"&&t===3&&isPerfectCube(this))return this._integerNthRoot(3);if(typeof t=="number"&&t===2&&this.equals(this.abs())){for(var n=this,a=Expression.ONE,s=Expression.ONE;!isPerfectSquare(n);){var l=Integer$2.fromBigInt(primeFactor(n.toBigInt())),u=primeFactor._countTrailingZeros(n.toBigInt(),l.toBigInt());n=n.divide(l._pow(u)),u%2===1&&(s=s.multiply(l),u-=1),a=a.multiply(l._pow(u/2))}return n.squareRoot().multiply(a).multiply(new SquareRoot(s))}return Expression.prototype._nthRoot.call(this,t)};Expression.Integer.prototype._isPerfectSquare=function(){return this.sign()<0?!1:isPerfectSquare(this)};Integer$2.prototype._integerNthRoot=function(t){return new Integer$2(SmallBigInt.BigInt(primeFactor._integerNthRoot(this.toBigInt(),t)))};Integer$2.prototype.bitLength=function(){return primeFactor._bitLength(this.toBigInt())};Integer$2.prototype.modInverse=function(t){return Expression.Integer.fromBigInt(primeFactor._modInverse(this.toBigInt(),t.toBigInt()))};Integer$2.prototype.modulo=function t(n){const a=this.remainder(n);return a.compareTo(Expression.ZERO)<0?a.add(n):a};Expression.Equality=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Equality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Equality.prototype.getS=function(){return"="};Expression.Inequality=function(t,n,a){BinaryOperation$1.call(this,t,n),this.sign=a};Expression.Inequality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Inequality.prototype.getS=function(){return this.sign};function AdditionIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}AdditionIterator.prototype=Object.create(Iterator.prototype);AdditionIterator.prototype.next=function(){return this.value=this.e instanceof Addition$1?this.e.b:this.e,this.e=this.e instanceof Addition$1?this.e.a:void 0,this};function MultiplicationIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}MultiplicationIterator.prototype=Object.create(Iterator.prototype);MultiplicationIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e,this.e=this.e instanceof Multiplication$1?this.e.a:null,this};Expression.prototype.summands=function(){return new AdditionIterator(this)};Expression.prototype.factors=function(){return new MultiplicationIterator(this)};var splitX=function(t){var n=void 0,a=void 0,s=void 0,l=void 0;for(var u of t.summands()){var c=0;for(var d of u.factors()){var Ct=d,ar=getBase(d);getExponent(d);var en=ar instanceof Expression.Symbol?ar.toString():"";en==="X"&&c===0?(c=1,l=Ct):isScalar(Ct)?n=n==null?Ct:Ct.multiply(n):(c===0&&(s=s==null?Ct:Ct.multiply(s)),c===1&&(a=a==null?Ct:Ct.multiply(a)))}}return n=n??Expression.ONE,{s:n,l:a,r:s,x:l}};Expression.splitX=splitX;var groupX=function(t,n){var a=splitX(t),s=splitX(n),l=a.s,u=a.l,c=a.r,d=s.s,Ct=s.l,ar=s.r;if(c==null&&ar==null&&a.x.equals(s.x))return u=u??new IdentityMatrix("I"),Ct=Ct??new IdentityMatrix("I"),new Multiplication$1(l.multiply(u).add(d.multiply(Ct)),a.x);if(u==null&&Ct==null&&a.x.equals(s.x))return c=c??new IdentityMatrix("I"),ar=ar??new IdentityMatrix("I"),new Multiplication$1(a.x,l.multiply(c).add(d.multiply(ar)))},getExpressionWithX=function(t){if(t instanceof Division$1)if(t.getDenominator()instanceof Expression.Integer){t=t.getNumerator();//!
}else return{withX:void 0,withoutX:void 0};var n=void 0,a=void 0;for(var s of t.summands()){var l=s,u=!1;for(var c of s.factors()){var d=c,Ct=getBase(d);//!new2019-12-03
if(Ct instanceof Addition$1&&getExponent(d).isNegative()){var ar=null;for(var en of t.summands())en!==s&&(ar=ar==null?en:ar.add(en));var tn=getExponent(d).negate(),on=ar.multiply(Ct.pow(tn)).add(s.multiply(new Expression.Exponentiation(Ct,tn))),cn=on.transformEquality(Expression.ZERO),dn=getExponent(cn.a)instanceof Expression.Symbol?cn.a:getBase(cn.a),Cn=Polynomial$1.toPolynomial(Ct,dn).divideAndRemainder(Polynomial$1.toPolynomial(cn.a.subtract(cn.b),dn)).remainder.calcAt(dn),In=Cn instanceof Expression.Matrix?Cn.determinant():null;if(!Expression.isConstant(In))return{withX:void 0,withoutX:void 0};if(In.equals(Expression.ZERO))return{withX:Expression.ZERO,withoutX:Expression.ONE};return getExpressionWithX(on);//!hack
}//!
//!2020-06-14
if(Ct instanceof MatrixSymbol&&getExponent(d).isNegative()){var tn=getExponent(d).negate(),on=s.b.equals(d)?t.multiply(Ct.pow(tn)):Array.from(Ct.pow(tn).multiply(s).factors()).length<Array.from(s.factors()).length?Ct.pow(tn).multiply(t):null;if(on!=null)return getExpressionWithX(on)}if(Ct instanceof Expression.Division){//! 2023-02-12  (X/9) TODO: ???
if(Ct.getDenominator()instanceof Expression.Integer)return getExpressionWithX(Ct.getDenominator().multiply(t))}//!
if(!(Ct instanceof Integer$2)&&!(Ct instanceof Expression.Symbol)&&!(Ct instanceof Expression.Matrix)&&!(Ct instanceof NthRoot)){if(Ct instanceof Expression.Determinant&&Ct.a.toString()==="X")return{withX:null,withoutX:null};if(Expression.has(Ct,Expression.MatrixSymbol))throw new RangeError("NotSupportedError")}if(Ct instanceof Expression.Symbol){var ix=Ct.toString();if(ix==="X"){if(u)return{withX:null,withoutX:null};u=!0}}}if(u)if(n!=null){if(n=groupX(n,l),n==null)return{withX:null,withoutX:null}}else n=l;u||(a=a==null?l.negate():a.subtract(l))}return{withX:n,withoutX:a}},isConstant$1=function(t){return t instanceof Expression.BinaryOperation?isConstant$1(t.b)&&isConstant$1(t.a):t instanceof Expression.Integer||t instanceof Expression.PolynomialRootSymbol?!0:t instanceof Expression.ExpressionWithPolynomialRoot?isConstant$1(t.e):t instanceof Expression.ExpressionPolynomialRoot?!0:t instanceof Expression.Symbol?t===Expression.E||t===Expression.PI:t instanceof Expression.Complex?!0:t instanceof Expression.NthRoot||t instanceof Expression.Sin||t instanceof Expression.Cos||t instanceof Expression.Arctan?isConstant$1(t.a):t instanceof Expression.Radians?isConstant$1(t.value):t instanceof Expression.Logarithm?isConstant$1(t.a):t===Expression.E||t===Expression.PI};Expression.isConstant=isConstant$1;Expression.getMultivariatePolynomial=function(t){if(!(t instanceof Expression.Division)){var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if((n instanceof NthRoot||n instanceof Integer$2||n instanceof Expression.Complex)&&(n=void 0),n!=null){n instanceof Expression.Addition&&(n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v);var a=getReplacement(t,n);if(!a.equals(n)&&(t=substitute(t,n,a,inverseReplacement(a,n)),t instanceof Expression.Division&&t.b instanceof Expression.Integer)){t=t.a;//!
}var s=Polynomial$1.toPolynomial(t,n);if(s.getDegree()===0){console.warn("Expression.getMultivariatePolynomial");return}for(var l=0;l<=s.getDegree();l+=1){var u=s.getCoefficient(l);if(!isConstant$1(u)){var c=Expression.getMultivariatePolynomial(u);if(c==null)return}}return{p:s.map(function(d){return substitute(d,n,inverseReplacement(a,n),a)}),v:inverseReplacement(a,n)}}}};Expression.isSingleVariablePolynomial=function(t){var n=Expression.getMultivariatePolynomial(t);if(n==null)return!1;for(var a=n.p,s=0;s<=a.getDegree();s+=1){var l=a.getCoefficient(s);if(!isConstant$1(l))return!1}return!0};Expression.prototype.transformEquality=function(t){var n=this.subtract(t),a=getExpressionWithX(n),s=a.withX,l=a.withoutX;if(s==null){if(n.getDenominator()instanceof Integer$2&&!(n.getNumerator()instanceof Expression.Matrix)&&!Expression.has(n,Expression.MatrixSymbol)&&!n.equals(Expression.ZERO)){typeof n.upgrade=="function"&&(n=n.upgrade());var u=new Expression.Symbol("x"),a={p:Polynomial$1.toPolynomial(n.getNumerator(),u),v:u};if((a.p.getDegree()===0||Expression.has(n,Expression.Function))&&(a=Expression.getMultivariatePolynomial(n.getNumerator())),a!=null&&a.v instanceof Expression.Symbol){var c=a.p,d=a.v,Ct=Matrix$1.Zero(1,c.getDegree()+1).map(function(sx,ux,cx){return c.getCoefficient(c.getDegree()-cx)});return new Expression.NoAnswerExpression(new Expression.Matrix(Ct),"polynomial-roots",{polynomial:c,variable:d})}}if(n instanceof Expression.Matrix&&this instanceof Expression.Matrix&&(t instanceof Expression.Matrix||t instanceof Expression.IdentityMatrix))return Expression.SystemOfEquations.from([{left:this,right:t}]);{//!new 2019-11-27
return Expression.SystemOfEquations.from([{left:this,right:t}])}}l==null&&(l=Expression.ZERO);var ar=s,en=l,tn=!1,on=s;for(var cn of on.factors()){var dn=cn,Cn=getBase(dn),In=!1;if(Cn instanceof Expression.Symbol){var ix=Cn.toString();ix==="X"&&(In=!0,tn=!0)}if(In)ar=dn;else{if(dn instanceof Expression.Matrix&&(dn.matrix.cols()!==dn.matrix.rows()||dn.determinant().equals(Expression.ZERO)))return Expression.SystemOfEquations.from([{left:s,right:l}]);var ax=dn.inverse();tn?en=ax.multiply(en):en=en.multiply(ax)}}return ar instanceof Expression.Exponentiation&&getExponent(ar).equals(Expression.ONE.negate())&&en instanceof Expression.Matrix&&!en.determinant().equals(Expression.ZERO)&&(ar=ar.inverse(),en=en.inverse()),new Expression.Equality(ar,en)};Expression.prototype.transformInequality=function(t,n){var a=this;return new Expression.Inequality(a,t,n)};Expression.simplifications=[];Expression.prototype.simplifyExpression=function(){for(var t=this,n=0;n<Expression.simplifications.length;n+=1)t=Expression.simplifications[n](t);return t};Expression.prototype.isExact=function(){return!Expression.has(this,Expression.PolynomialRootSymbol)&&!Expression.has(this,Expression.ExpressionPolynomialRoot)};Expression.PI=new Expression.Symbol("");Expression.E=new Expression.Symbol("");Expression.I=new Expression.Symbol("");Expression.CIRCLE=new Expression.Symbol("");Expression.INFINITY=new Expression.Symbol("");Expression.prototype.addPosition=function(){return this};//! 2018-09-30
Expression.SystemOfEquations=function(t){throw new TypeError};Expression.SystemOfEquations.from=function(t){return new Expression.NoAnswerExpression({matrix:null},"system-of-equations",{equations:t})};Expression.ExponentiationOfMinusOne=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfMinusOne.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfMinusOne.prototype.divideExpression=function(t){return t.multiply(this)};Expression.ExponentiationOfImaginaryUnit=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfImaginaryUnit.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfImaginaryUnit.prototype.divideExpression=function(t){var n=getConjugate(getBase(this)).pow(getExponent(this));return t.multiply(n).divide(this.multiply(n))};Expression.ExponentiationOfQuadraticInteger=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfQuadraticInteger.prototype=Object.create(Expression.ExponentiationOfImaginaryUnit.prototype);Expression.ExponentiationOfQuadraticInteger.prototype.divideExpression=function(t){return Expression.Exponentiation.prototype.divideExpression.call(this,t)};//!
Expression.Division.prototype.negate=function(){return new Expression.Division(this.a.negate(),this.b)};Expression.Polynomial=function(t){this.polynomial=t};Expression.Polynomial.prototype=Object.create(Expression.prototype);Expression.Polynomial.prototype.gcd=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial));if(t.equals(Expression.ZERO))return this;throw new TypeError};Expression.Polynomial.prototype.equals=function(t){return t.equalsPolynomial(this)};Expression.Polynomial.prototype.equalsPolynomial=function(t){return t.polynomial.equals(this.polynomial)};Expression.prototype.equalsPolynomial=function(t){return t.polynomial.equals(Polynomial$1.ZERO)&&this.equals(Expression.ZERO)||t.polynomial.getDegree()===0&&this.equals(t.polynomial.getCoefficient(0))};Expression.Polynomial.prototype.multiply=function(t){return t===Expression.ONE?this:t.multiplyPolynomial(this)};Expression.Polynomial.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.multiply(this.polynomial))};Expression.Division.prototype.multiplyPolynomial=function(t){return this.multiplyExpression(t)};Expression.Integer.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.scale(this))};Expression.Polynomial.prototype.multiplyInteger=function(t){return new Expression.Polynomial(this.polynomial.scale(t))};Expression.Polynomial.prototype.divide=function(t){return t.equals(Expression.ONE)?this:t.equals(Expression.ONE.negate())?this.negate():t instanceof Expression.Integer?new Expression.Polynomial(this.polynomial.scale(t.inverse())):t.dividePolynomial(this)};Expression.Division.prototype.dividePolynomial=function(t){return this.divideExpression(t)};Expression.Polynomial.prototype.dividePolynomial=function(t){var n=this,a=t.polynomial,s=n.polynomial;if(a.getDegree()<0&&s.getDegree()>=0)return new Expression.Polynomial(a);var l=a.divideAndRemainder(s);if(l.remainder.equals(Polynomial$1.ZERO))return new Expression.Polynomial(l.quotient);var u=a.getContent();if(!u.getDenominator().equals(Expression.ONE))return n.multiply(u.getDenominator()).dividePolynomial(t.multiply(u.getDenominator()));var c=s.getContent();if(!c.getDenominator().equals(Expression.ONE))return n.multiply(c.getDenominator()).dividePolynomial(t.multiply(c.getDenominator()));var d=Polynomial$1.polynomialGCD(a,s);return n.polynomial.equals(d)?new Expression.Polynomial(t.polynomial.divideAndRemainder(d).quotient):new Expression.Division(new Expression.Polynomial(t.polynomial.divideAndRemainder(d).quotient),new Expression.Polynomial(n.polynomial.divideAndRemainder(d).quotient))};Expression.Polynomial.prototype.negate=function(){return new Expression.Polynomial(this.polynomial.negate())};Expression.Polynomial.prototype.add=function(t){return t.addPolynomial(this)};Expression.Polynomial.prototype.addPolynomial=function(t){return new Expression.Polynomial(t.polynomial.add(this.polynomial))};Expression.prototype.addPolynomial=function(t){if(this.equals(Expression.ZERO))return t;throw new RangeError};Expression.Polynomial.prototype.getPrecedence=function(){for(var t=this.polynomial.getDegree(),n=0,a=0;a<=t;a+=1)this.polynomial.getCoefficient(a).equals(Expression.ZERO)||(n+=1);return(n<2?this.polynomial.getLeadingCoefficient().equals(Expression.ONE)?new Expression.Symbol("x"):new Expression.Multiplication(Expression.ONE,Expression.ONE):new Expression.Addition(Expression.ONE,Expression.ONE)).getPrecedence()};Expression.Polynomial.prototype.modulo=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.divideAndRemainder(t.polynomial).remainder);throw new TypeError};Expression.Polynomial.prototype.modInverse=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.primitivePart().modularInverse(t.polynomial).primitivePart().scale(this.polynomial.getContent().inverse()));throw new TypeError};Expression.Polynomial.prototype.isDivisibleBy=function(t){if(t instanceof Expression.Polynomial)return this.polynomial.isDivisibleBy(t.polynomial);throw new TypeError};Expression.unique=function(t){for(var n=[],a=0;a<t.length;a+=1){for(var s=t[a],l=!1,u=0;u<n.length;u+=1)n[u]===s&&(l=!0);l||n.push(s)}return n};Expression.Multiplication.prototype.compare4Multiplication=function(t){var n=this;if(t instanceof Addition$1)return 0-t.compare4Multiplication(n);for(var a=n.factors(),s=t.factors(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Multiplication(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Multiplication.compare4Addition=function(t,n){for(var a=t.factors(),s=n.factors(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Addition(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Multiplication.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4Addition=function(t){if(t instanceof Expression.Function)return this.name<t.name?-1:t.name<this.name?1:this.a.compare4Addition(t.a);if(t instanceof Multiplication$1){var n=this;return Multiplication$1.compare4Addition(n,t)}if(t instanceof Addition$1){var n=this;return Addition$1.compare4Addition(n,t)}return 1};Expression.NthRoot.prototype.compare4Addition=function(t){return t.compare4AdditionNthRoot(this)};Expression.prototype.compare4AdditionNthRoot=function(t){return Expression.Function.prototype.compare4Addition.call(t,this)};Expression.NthRoot.prototype.compare4AdditionNthRoot=function(t){return this.n-t.n||t.a.compare4Addition(this.a)};Expression.prototype.compare4AdditionSymbol=function(t){var n=this;return n instanceof Expression.Function?-1:Expression.prototype.compare4Addition.call(t,n)};Expression.Symbol.prototype.compare4Addition=function(t){return t.compare4AdditionSymbol(this)};Expression.Symbol.prototype.compare4AdditionSymbol=function(t){var n=this;return t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0};Expression.Function.prototype.compare4Multiplication=function(t){return t instanceof Expression.NthRoot?1:t instanceof Expression.Function?this.name<t.name?-1:t.name<this.name?1:getBase(this.a).compare4Multiplication(getBase(t.a))||getExponent(this.a).compare4AdditionSymbol(getExponent(t.a)):t instanceof Expression.MatrixSymbol?-1:1};Expression.Function.prototype.compare4MultiplicationInteger=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4MultiplicationSymbol=function(t){return-1};Expression.Function.prototype.compare4MultiplicationNthRoot=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.pow=function(t){if(this instanceof Expression.NthRoot)return Expression.prototype.pow.call(this,t);if(t instanceof Expression.Integer)return t.compareTo(Expression.ONE)>0?new Expression.Exponentiation(this,t):Expression.prototype.pow.call(this,t);if(isIntegerOrN(t)&&t instanceof Expression.Symbol)return new Expression.Exponentiation(this,t);throw new RangeError("NotSupportedError")};function ExpressionWithCondition(t,n){this.e=t,this.condition=n}ExpressionWithCondition.prototype=Object.create(Expression.prototype);ExpressionWithCondition.prototype.toString=function(){return this.e.toString()+"; "+this.condition.toString()};ExpressionWithCondition.prototype.toMathML=function(t){return this.e.toMathML(t)+"<mtext>; </mtext>"+this.condition.toMathML(t)};ExpressionWithCondition.prototype.multiplyExpression=ExpressionWithCondition.prototype.multiplyMatrix=function(t){return new ExpressionWithCondition(t.multiply(this.e),this.condition)};ExpressionWithCondition.prototype.multiply=function(t){return t.multiplyExpressionWithCondition(this)};ExpressionWithCondition.prototype.multiplyExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.multiplyExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.multiply(this),t.condition)};ExpressionWithCondition.prototype.add=function(t){return t.addExpressionWithCondition(this)};ExpressionWithCondition.prototype.addExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.addExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.add(this),t.condition)};Expression.ExpressionWithCondition=ExpressionWithCondition;Addition$1.prototype.compare4MultiplicationNthRoot=function(t){return 1};Multiplication$1.prototype.compare4MultiplicationNthRoot=function(t){return-1};function Cases(t){this.cases=t}Cases.prototype=Object.create(Expression.prototype);Cases.prototype._cross=function(t,n){for(var a=this,s=[],l=0;l<t.cases.length;l+=1)for(var u=0;u<a.cases.length;u+=1){var c=t.cases[l].condition.and(a.cases[u].condition);if(!c.isFalse()){var d=n(t.cases[l].e,a.cases[u].e);s.push(new ExpressionWithCondition(d,c))}}return new Expression.Cases(s)};Cases.prototype.multiply=function(t){return t.multiplyCases(this)};Cases.prototype.multiplyCases=function(t){return this._cross(t,function(n,a){return n.multiply(a)})};Cases.prototype.toString=function(){for(var t="",n=0;n<this.cases.length;n+=1)t+="("+this.cases[n].toString()+"),";return"{{"+t.slice(0,-1)+"}}"};Expression.prototype.multiplyCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.multiply(n)}))};Cases.prototype.multiplyExpression=Cases.prototype.multiplyMatrix=function(t){return new Cases(this.cases.map(function(n){return t.multiply(n)}))};Cases.prototype.add=function(t){return t.addCases(this)};Cases.prototype.addCases=function(t){return this._cross(t,function(n,a){return n.add(a)})};Expression.prototype.addCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.add(n)}))};Cases.prototype.equals=function(t){var n=this;if(n===t)return!0;if(!(t instanceof Cases))return!1;throw new TypeError};Cases.prototype.toMathML=function(t){var n="";n+="<mrow>",n+="<mo>{</mo>",n+='<mtable columnalign="left">';for(var a=0;a<this.cases.length;a+=1){var s=this.cases[a];n+="<mtr>",n+="<mtd>",n+=s.e.toMathML(t),n+="</mtd>",n+="<mtd>",n+=s.condition.toMathML(t),n+="</mtd>",n+="</mtr>"}return n+="</mtable>",n+="</mrow>",n};Expression.Cases=Cases;Expression.Factorial=function(t){this.n=t};Expression.Factorial.prototype=Object.create(Expression.prototype);Expression.prototype.factorial=function(){var t=this;if(!(t instanceof Expression.Integer))throw new TypeError("NotSupportedError");if(t.compareTo(Expression.ZERO)<0)throw new TypeError("NotSupportedError");for(var n=Expression.ONE,a=t;a.compareTo(Expression.ONE)>=0;a=a.subtract(Expression.ONE))n=n.multiply(a);return n};Expression.prototype._abs=function(){return this.isNegative()?this.negate():this};Expression.Comma=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Comma.prototype=Object.create(BinaryOperation$1.prototype);Expression.Comma.prototype.getS=function(){return", "};Expression.prototype.transformComma=function(t){var n=this,a=function(u){if(u instanceof Expression.Equality)return[{left:u.a,right:u.b}];if(u instanceof Expression.NoAnswerExpression&&u.name==="system-of-equations")return u.second.equations;if(u instanceof Expression.Inequality)return[{left:u.a,right:u.b,sign:u.sign}];if(u instanceof Expression.NoAnswerExpression&&u.name==="polynomial-roots"){var c=u.second.polynomial.calcAt(u.second.variable);return[{left:c,right:Expression.ZERO}]}return null},s=a(n),l=a(t);if(s!=null&&l!=null)return Expression.SystemOfEquations.from(s.concat(l));if(s==null&&l==null)return new Expression.List((n instanceof Expression.List?n.list:[n]).concat(t instanceof Expression.List?t.list:[t]));throw new TypeError("NotSupportedError")};Expression.List=function(t){this.list=t};Expression.List.prototype=Object.create(Expression.prototype);Expression.List.prototype.min=function(){return this.list.reduce((t,n)=>t.compareTo(n)>0?n:t)};Expression.List.prototype.max=function(){return this.list.reduce((t,n)=>t.compareTo(n)<0?n:t)};Expression.List.prototype.gcd=function(){return this.list.reduce((t,n)=>t.gcd(n))};function atan2(t,n){if(n.equals(Expression.ZERO)){if(t.equals(Expression.ZERO))throw new RangeError;const s=Expression.PI.divide(Expression.TWO);return t.isNegative()?s.negate():s}const a=t.divide(n).arctan();return n.isNegative()?t.isNegative()?a.subtract(Expression.PI):a.add(Expression.PI):a}Expression.prototype.complexArgument=function(){var t=Expression.getComplexNumberParts(this);if(t==null)throw new TypeError;return atan2(t.imaginary,t.real)};Expression.Logarithm=function(t){Expression.Function.call(this,"log",t)};Expression.Logarithm.prototype=Object.create(Expression.Function.prototype);Expression.prototype.logarithm=function(){var t=this;if(t instanceof Expression.Integer){if(t.compareTo(Expression.ZERO)<=0){if(t.compareTo(Expression.ZERO)===0)throw new TypeError("ArithmeticException");return t.equals(Expression.ONE.negate())?Expression.I.multiply(Expression.PI):t.abs().logarithm().add(t.divide(t.abs()).logarithm())}if(t.compareTo(Expression.ONE)===0)return Expression.ZERO;var n=integerPrimeFactor(t);if(n.equals(t))return new Expression.Logarithm(t);var a=primeFactor._countTrailingZeros(t.toBigInt(),n.toBigInt());return n.logarithm().multiply(Integer$2.fromNumber(a)).add(t.truncatingDivide(n._pow(a)).logarithm())}if(t instanceof Expression.Division){var s=t.getNumerator(),l=t.getDenominator();if(l instanceof Integer$2||isConstant$1(s))return s.logarithm().subtract(l.logarithm())}if(t instanceof Expression.Multiplication){var ux=t.a;if(isConstant$1(ux))return ux.logarithm().add(t.divide(ux).logarithm());var ux=getConstant$1(t);if(ux instanceof Integer$2&&!ux.equals(Expression.ONE))return ux.logarithm().add(t.divide(ux).logarithm());if(t.b instanceof Expression.MatrixSymbol)return t.a.logarithm().add(t.b.logarithm())}if(t instanceof Expression.ExpressionWithPolynomialRoot&&(t=t.upgrade()),t instanceof Expression.ExpressionPolynomialRoot){var u=t.root.upgrade().getAlpha().polynomial.getGCDOfTermDegrees();if(u>1)return t._pow(u).logarithm().divide(Expression.Integer.fromNumber(u))}if(t instanceof Expression.Symbol)return t===Expression.E?Expression.ONE:new Expression.Logarithm(t);if(t instanceof Expression.NthRoot){var c=t.a,s=t.n;if(c instanceof Expression.Integer&&c.compareTo(Expression.ONE)>0||isPositive(c))return c.logarithm().divide(Expression.Integer.fromNumber(s))}if(t instanceof Expression.Exponentiation){var d=getBase(t),Ct=getExponent(t);if(d===Expression.E)return Ct;if(d instanceof Expression.MatrixSymbol&&Ct instanceof Integer$2||d instanceof Expression.Integer)return d.logarithm().multiply(Ct)}if(t instanceof Expression.Matrix){var ar=t.matrix;if(ar.isDiagonal())return new Expression.Matrix(ar.map(function(hx,gx,fx){return gx===fx?hx.logarithm():Expression.ZERO}));var en=Expression.getEigenvalues(ar);if(en.length===ar.cols()){var tn=Expression.getEigenvectors(ar,en);if(tn.filter(hx=>hx!=null).length===ar.cols()){Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-diagonalization",new Expression.Matrix(ar)));var on=Expression.diagonalize(ar,en,tn);return new Expression.Matrix(on.T).multiply(new Expression.Matrix(on.L).logarithm()).multiply(new Expression.Matrix(on.T_INVERSED))}else{var on=Expression.getFormaDeJordan(ar,en),cn=on.J,dn=function(gx){for(var fx=gx.map(function(xx,_x,Ex){return _x!==Ex?xx.divide(gx.e(_x,_x)):Expression.ZERO}),dx=gx.map(function(xx,_x,Ex){return _x===Ex?xx.logarithm():Expression.ZERO}),mx=gx.cols(),vx=1;vx<mx;vx+=1){var bx=fx.pow(vx).scale(Expression.ONE.divide(Expression.Integer.fromNumber(vx)));dx=vx%2===1?dx.add(bx):dx.subtract(bx)}return dx},Cn=dn(cn);return Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-Jordan-canonical-form",new Expression.Matrix(ar))),new Expression.Matrix(on.P).multiply(new Expression.Matrix(Cn)).multiply(new Expression.Matrix(on.P_INVERSED))}}}if(t instanceof Expression.Addition){var ux=getConstant$1(t);if(!ux.equals(Expression.ONE))return ux.logarithm().add(t.divide(ux).logarithm());if(t.a instanceof Expression.Symbol&&t.b instanceof Expression.Integer)return new Expression.Logarithm(t);var In=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(In instanceof Expression.Symbol){var n=Polynomial$1.toPolynomial(t,In),ux=n.getContent();if(ux.isNegative()&&(ux=ux.negate()),isPositive(ux)&&!ux.equals(Expression.ONE))return t.divide(ux).logarithm().add(ux.logarithm());var ix=n.getSquareFreePolynomial(),s=Math.floor(n.getDegree()/ix.getDegree());if(s>1&&ix.calcAt(In)._pow(s).equals(t))return Expression.Integer.fromNumber(s).multiply(ix.calcAt(In).logarithm())}if(isGoodPolynomial(t))return new Expression.Logarithm(t)}var ax=QuadraticInteger.toQuadraticInteger(t);if(ax!=null&&(Number(ax.a.toString())>0||Number(ax.b.toString())>0)&&ax.D>0&&(ax.isValid()||ax.D===5||ax.D===37)){var ox=ax.primeFactor();if(ox.toExpression().equals(Expression.TWO)&&(ax=ax.truncatingDivide(ox),ox=ax.primeFactor()),!ox.equals(ax))return ox.toExpression().logarithm().add(t.divide(ox.toExpression()).logarithm());if(Number(ax.a.toString())>0&&Number(ax.b.toString())>0)return new Expression.Logarithm(t);if(Number(ax.a.toString())<0||Number(ax.b.toString())<0){var sx=ax.conjugate().toExpression();return sx.isNegative()&&(sx=sx.negate()),t.multiply(sx).logarithm().subtract(sx.logarithm())}}if(t instanceof Addition$1&&t.b instanceof NthRoot&&t.a instanceof NthRoot){var u=nthRootCommonFactor(t.a,t.b);if(!u.equals(Expression.ONE)&&isPositive(u))return u.logarithm().add(t.divide(u).logarithm())}var ux=Expression.getComplexNumberParts(t);if(ux!=null&&!ux.imaginary.equals(Expression.ZERO)){const hx=atan2(ux.imaginary,ux.real);return t.divide(Expression.I.multiply(hx).exp()).logarithm().add(Expression.I.multiply(hx))}if(Expression.isConstant(t)){var cx=simpleDivisor(t);if(!cx.equals(t))return cx.logarithm().add(t.divide(cx).logarithm())}throw new TypeError("NotSupportedError")};//!new
NthRoot.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;Expression.Symbol.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;//!new
Expression.prototype.complexConjugate=function(){throw new TypeError("NotSupportedError")};Expression.Integer.prototype.complexConjugate=function(){return this};Expression.Division.prototype.complexConjugate=function(){return this.getNumerator().complexConjugate().divide(this.getDenominator().complexConjugate())};Expression.Multiplication.prototype.complexConjugate=function(){return this.a.complexConjugate().multiply(this.b.complexConjugate())};Expression.Addition.prototype.complexConjugate=function(){return this.a.complexConjugate().add(this.b.complexConjugate())};Expression.Function.prototype.complexConjugate=function(){if(this.a instanceof Integer$2||Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Matrix.prototype.complexConjugate=function(){var t=this;return new Expression.Matrix(t.matrix.map(n=>n.complexConjugate()))};Expression.Symbol.prototype.complexConjugate=function(){return this===Expression.E||this===Expression.PI||Expression.isReal(this)?this:new Expression.ComplexConjugate(this)};Expression.Exponentiation.prototype.complexConjugate=function(){if(getBase(this)===Expression.E)return getBase(this).pow(getExponent(this).complexConjugate());if(isIntegerOrN(getExponent(this)))return getBase(this).complexConjugate().pow(getExponent(this));if(isMatrixSymbolTranspose(this))return new Expression.Exponentiation(getBase(this).complexConjugate(),getExponent(this));if(Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Logarithm.prototype.complexConjugate=function(){return this.a.complexConjugate().logarithm()};Expression.ComplexConjugate=function(t){Expression.Function.call(this,"conjugate",t)};Expression.ComplexConjugate.prototype=Object.create(Expression.Function.prototype);Expression.ComplexConjugate.prototype.complexConjugate=function(){return this.a};Expression.ComplexArgument=function(t){Expression.Function.call(this,"arg",t)};Expression.ComplexArgument.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix=function(t,n){Expression.Function.call(this,"augment",null),this.a=t,this.b=n};Expression.AugmentedMatrix.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix.prototype.toString=function(t){return"("+this.a.toString(t)+"|"+this.b.toString(t)+")"};Expression.AugmentedMatrix.prototype.toMathML=function(t){return"<mrow><mo>(</mo>"+this.a.toMathML(t)+"<mo>|</mo>"+this.b.toMathML(t)+"<mo>)</mo></mrow>"};Expression.Abs=function(t){Expression.Function.call(this,"abs",t)};Expression.Abs.prototype=Object.create(Expression.Function.prototype);Expression.Abs.prototype.toMathML=function(t){return'<mrow><mo stretchy="false">|</mo>'+this.a.toMathML(t)+'<mo stretchy="false">|</mo></mrow>'};Expression.Abs.prototype.complexConjugate=function(){return this};Expression.Abs.prototype.pow=function(t){return t instanceof Expression.Integer?this.a.pow(t).abs():Expression.Function.prototype.pow.call(this,t)};Expression.Matrix.prototype.pseudoinverse=function(){if(this.matrix.isSquare()){const n=this.matrix.determinant();if(Expression.isConstant(n)&&!n.equals(Expression.ZERO))return new Expression.Matrix(this.matrix.inverse())}Expression.callback!=null&&Expression.callback(new Expression.Event("pseudoinverse",this));const t=Expression.SVD(this.matrix);return new Expression.Matrix(t.Vstar.conjugateTranspose().multiply(t.Sigma.map(n=>n.equals(Expression.ZERO)?Expression.ZERO:n.inverse()).transpose()).multiply(t.U.conjugateTranspose()))};Expression.Pseudoinverse=function(t){Expression.Function.call(this,"pseudoinverse",t)};Expression.Pseudoinverse.prototype=Object.create(Expression.Function.prototype);Expression.prototype.factor=function(){var t=this,n=new Expression.Symbol("x"),a=Polynomial$1.toPolynomial(t,n),s=[];s.push(Polynomial$1.of(a.getContent())),a=a.primitivePart();function l(u){for(var c=null;u.getDegree()>1&&(c=u.factorize())!=null&&!c.equals(u);)l(c),u=u.divideAndRemainder(c,"throw").quotient;u.getDegree()>=0&&s.push(u)}return l(a),s.map(u=>new Expression.Polynomial(u)).reduce((u,c)=>new Expression.Multiplication(u,c))};function Derivative(t,n){Expression.Symbol.call(this,t),this.variable=n}Derivative.prototype=Object.create(Expression.Symbol.prototype);Expression.Derivative=Derivative;Expression.prototype.derivative=function(t=void 0){if(t==null)throw new RangeError;var n=this;if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(l=>l.derivative(t)));if(n instanceof Expression.Exponentiation){if(getBase(n)===Expression.E)return n.multiply(getExponent(n).derivative(t));if(getExponent(n)instanceof Expression.Integer)return getExponent(n).multiply(getBase(n).pow(getExponent(n).subtract(Expression.ONE))).multiply(getBase(n).derivative(t));if(getExponent(n).equals(t)&&Expression.isConstant(getBase(n)))return n.multiply(getBase(n).logarithm())}if(n instanceof Expression.Symbol)return n.symbol.toLowerCase()===n.symbol?n.equals(t)?Expression.ONE:Expression.ZERO:new Expression.Derivative(n);if(n instanceof Expression.Multiplication)return n.a.derivative(t).multiply(n.b).add(n.a.multiply(n.b.derivative(t)));if(n instanceof Expression.Addition)return n.a.derivative(t).add(n.b.derivative(t));if(n instanceof Expression.Division){var a=n.getNumerator(),s=n.getDenominator();return s.multiply(a.derivative(t)).subtract(a.multiply(s.derivative(t))).divide(s.multiply(s))}if(n instanceof Expression.Sin)return n.a.cos().multiply(n.a.derivative(t));if(n instanceof Expression.Cos)return n.a.sin().negate().multiply(n.a.derivative(t));if(n instanceof Expression.Logarithm)return n.a.derivative(t).divide(n.a);if(Expression.isConstant(n))return Expression.ZERO;throw new RangeError("NotSupportedError")};function GF2(t){this.a=t}GF2.prototype=Object.create(Expression.prototype);Expression.GF2=GF2;Expression.GF2.prototype.toString=function(t){return"GF2("+this.a.toString(Expression.setTopLevel(!0,t))+")"};function GF2Value(t){this.value=t}Expression.GF2Value=GF2Value;GF2Value.prototype=Object.create(Expression.prototype);Expression.GF2Value.prototype.equals=function(t){if(Expression.ZERO===t){return this.value===0;//!
}return!1};Expression.GF2Value.prototype.negate=function(){return new GF2Value(this.value===0?0:2-this.value)};GF2Value.prototype.add=function(t){if(t===Expression.ZERO)return new GF2Value(this.value);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value-2+t.value;return new GF2Value(n>=0?n:n+2)};GF2Value.prototype.multiply=function(t){if(t===Expression.ZERO)return new GF2Value(0);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value*t.value;return new GF2Value(n-2*Math.floor(n/2))};GF2Value.prototype.divide=function(t){return new GF2Value(this.value)};Expression.prototype.GF2=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.map(function(n,a,s){if(!(n.equals(Expression.ZERO)||n.equals(Expression.ONE)))throw new TypeError;return new Expression.GF2Value(n.equals(Expression.ZERO)?0:1)}))};GF2Value.prototype.toString=function(t){return this.value.toString()};var Integer$1=Expression.Integer,Addition=Expression.Addition,Multiplication=Expression.Multiplication,Division=Expression.Division,Exponentiation=Expression.Exponentiation,BinaryOperation=Expression.BinaryOperation,separateSinCos=function(t){if(!(t instanceof Multiplication))throw new TypeError;var n=void 0,a=void 0,s=t;for(var l of s.factors()){var u=l;u instanceof Sin||u instanceof Cos||u instanceof Exponentiation&&(u.a instanceof Sin||u.a instanceof Cos)?n=n==null?u:n.multiply(u):a=a==null?u:a.multiply(u)}return{sinCos:n??Expression.ONE,other:a??Expression.ONE}},expandMainOp=function(t){return t},contractTrigonometryInternal=function(t,n){var a=t.a,s=n.a;if(t instanceof Sin&&n instanceof Sin)return a.subtract(s).cos().divide(Expression.TWO).subtract(a.add(s).cos().divide(Expression.TWO));if(t instanceof Sin&&n instanceof Cos)return a.add(s).sin().divide(Expression.TWO).add(a.subtract(s).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Sin)return a.add(s).sin().divide(Expression.TWO).subtract(a.subtract(s).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Cos)return a.subtract(s).cos().divide(Expression.TWO).add(a.add(s).cos().divide(Expression.TWO));throw new TypeError},contractTrigonometryPower=function(t){var n=t.a;if(!(n instanceof Sin)&&!(n instanceof Cos))return t;var a=contractTrigonometryInternal(n,n).multiply(t.divide(n.multiply(n)));return contractTrigonometryRules(a.getNumerator()).divide(a.getDenominator())},contractTrigonometryProduct=function(t){for(var n=t.factors(),a=n.next().value,s=n.next().value,l=Expression.ONE,u=n.next().value;u!=null;)l=u.multiply(l),u=n.next().value;if(a instanceof Exponentiation)return a=contractTrigonometryPower(a),contractTrigonometryRules(a.multiply(s).multiply(l));if(s instanceof Exponentiation)return s=contractTrigonometryPower(s),contractTrigonometryRules(a.multiply(s).multiply(l));var c=contractTrigonometryInternal(a,s);return contractTrigonometryRules(c.multiply(l))},contractTrigonometryRules=function(t){var n=expandMainOp(t);if(n instanceof Exponentiation)return contractTrigonometryPower(n);if(n instanceof Multiplication){var a=separateSinCos(n),s=a.other,l=a.sinCos;if(l.equals(Expression.ONE)||l instanceof Sin||l instanceof Cos)return n;if(l instanceof Exponentiation)return expandMainOp(s.multiply(contractTrigonometryPower(l)));if(l instanceof Multiplication)return expandMainOp(s.multiply(contractTrigonometryProduct(l)));throw new TypeError}if(n instanceof Addition){var u=Expression.ZERO,c=n;for(var d of c.summands())d instanceof Multiplication||d instanceof Exponentiation?u=u.add(contractTrigonometryRules(d)):u=u.add(d);return u}return n},map$3=function(t,n){if(n instanceof Integer$1)return t(n);if(n instanceof Addition)return t(map$3(t,n.a).add(map$3(t,n.b)));if(n instanceof Multiplication)return t(map$3(t,n.a).multiply(map$3(t,n.b)));if(n instanceof Division)return t(map$3(t,n.a).divide(map$3(t,n.b)));if(n instanceof Exponentiation)return t(map$3(t,n.a).pow(map$3(t,n.b)));if(n instanceof Sin)return t(map$3(t,n.a).sin());if(n instanceof Cos)return t(map$3(t,n.a).cos());if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(function(a,s,l){return map$3(t,a)}));if(n instanceof Expression.Polynomial)return new Expression.Polynomial(n.polynomial.map(function(a,s){return map$3(t,a)}));if(n instanceof Expression.GF2Value)return n;if(n instanceof Expression.NthRoot)return t(n);if(n instanceof Expression.Negation||n instanceof Expression.Complex||n instanceof Expression.NonSimplifiedExpression||n instanceof Expression.Degrees||n instanceof Expression.Radians)return n;if(n instanceof Expression.Symbol)return t(n);if(n instanceof Expression.Arctan)return t(map$3(t,n.a).arctan());if(n instanceof Expression.Logarithm)return t(map$3(t,n.a).logarithm());if(n instanceof Expression.Determinant)return t(map$3(t,n.a).determinant());if(n instanceof Expression.Inequality)return t(map$3(t,n.a).transformInequality(map$3(t,n.b),n.sign));if(n instanceof Expression.ComplexConjugate)return t(map$3(t,n.a).complexConjugate());if(n instanceof Expression.Abs)return t(map$3(t,n.a).abs());throw new TypeError};Expression._map=map$3;var expandTrigonometryRulesInternal=function(t,n,a){if(a==="cos")return expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"cos")).subtract(expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"sin")));if(a==="sin")return expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"cos")).add(expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"sin")));throw new TypeError(a)},expandTrigonometryRules=function(t,n){if(t instanceof Addition)return expandTrigonometryRulesInternal(t.a,t.b,n);if(t instanceof Multiplication){var a=Expression.ONE;for(var s of t.factors())s instanceof Expression.Integer&&(a=a.multiply(s));var l=a,u=t.divide(a);if(!(l instanceof Integer$1))throw new TypeError;if(l.equals(Expression.ONE)){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}if(l.compareTo(Expression.ONE.negate())===0){if(n==="cos")return expandTrigonometryRules(u,n);if(n==="sin")return expandTrigonometryRules(u,n).negate()}var c=l.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate();return expandTrigonometryRulesInternal(c.multiply(u),l.subtract(c).multiply(u),n)}else if(t instanceof Division){var d=simplifyConstantValue(t,n);if(d!=null)return d;var l=t.a,u=t.b;if(l instanceof Addition)return expandTrigonometryRulesInternal(l.a.divide(u),l.b.divide(u),n)}if(t instanceof Expression.Symbol||t instanceof Expression.Exponentiation&&t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0||t instanceof Expression.Degrees||t instanceof Expression.Radians||t instanceof Expression.Complex||t instanceof Expression.Arctan){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}throw new TypeError},expandTrigonometry=function(t){return map$3(function(n){return n instanceof Sin?expandTrigonometryRules(n.a,"sin"):n instanceof Cos?expandTrigonometryRules(n.a,"cos"):n},t)};Expression._expandTrigonometry=expandTrigonometry;//!
var contractTrigonometry=function(t){return map$3(function(n){if(n instanceof Multiplication||n instanceof Exponentiation||n instanceof Addition){//! Addition - ?
return contractTrigonometryRules(n)}return n instanceof Division?contractTrigonometryRules(n.getNumerator()).divide(n.getDenominator()):n},t)},hasTrigonometry=function(t){return t instanceof BinaryOperation?hasTrigonometry(t.a)||hasTrigonometry(t.b):t instanceof Cos||t instanceof Sin},simplifyTrigonometry=function(t){if(!hasTrigonometry(t))return t;//!new
var n=null,a=null;if(Expression._map(function(u){if(u instanceof Expression.Sin||u instanceof Expression.Cos){var c=u.a;if(c instanceof Division){var d=c.getNumerator(),Ct=c.getDenominator();if(!Ct.equals(Expression.ONE))for(var ar of d.summands()){var en=ar.gcd(Ct);if(!en.equals(Ct))for(var tn of ar.factors())tn instanceof Expression.Symbol&&tn!==Expression.PI&&(a=Ct.divide(en),n=tn)}}}return u},t),n!=null&&a!=null)return t=Expression._substitute(t,n,n.multiply(a),n.divide(a)),t=simplifyTrigonometry(t),t=Expression._substitute(t,n,n.divide(a),n.multiply(a)),t;//!
var s=t.getNumerator();s=expandTrigonometry(s),s=contractTrigonometry(s);var l=t.getDenominator();return l=expandTrigonometry(l),l=contractTrigonometry(l),s.divide(l)};Expression.Division.prototype.compare4Multiplication=function(t){return t instanceof Division?this.a.compare4Multiplication(t.a)||this.b.compare4Multiplication(t.b):-1};Expression.Division.prototype.compare4MultiplicationSymbol=function(){return 1};Expression.Division.prototype.compare4MultiplicationInteger=function(){return 1};Expression.Division.prototype.compare4MultiplicationNthRoot=function(){return 1};Expression.simplifyTrigonometry=simplifyTrigonometry;function Sin(t){Expression.Function.call(this,"sin",t)}Sin.prototype=Object.create(Expression.Function.prototype);var simplifyConstantValueInternal=function(t,n){if(n=n||Expression.ZERO,t>=360||t<=-360)throw new RangeError;if(t<0&&(t=0-t,n=n.negate()),t>=180){t=t-180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}if(t>90){t=0-t,n=n.negate(),t=t+180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}console.assert(t>=0&&t<=90),console.assert(n.getNumerator().abs().compareTo(n.getDenominator())<0);function s(In){var ix=simplifyConstantValueInternal(In*2);return ix==null?null:Expression.TWO.add(Expression.TWO.multiply(ix)).squareRoot().divide(Expression.TWO)}function l(In,ix){var ax=simplifyConstantValueInternal(In),ox=simplifyConstantValueInternal(ix),sx=simplifyConstantValueInternal(90-In),ux=simplifyConstantValueInternal(90-ix);return ax.multiply(ox).subtract(sx.multiply(ux))}function u(){return Expression.ONE.add(Expression.TWO.add(Expression.TWO).add(Expression.ONE).squareRoot()).divide(Expression.TWO)}if(n.equals(Expression.ZERO)){if(t===0)return Expression.ONE;if(t===30)return Expression.ONE.add(Expression.TWO).squareRoot().divide(Expression.TWO);if(t===45)return Expression.ONE.divide(Expression.TWO.squareRoot());if(t===60)return Expression.ONE.divide(Expression.TWO);if(t===90)return Expression.ZERO;if(t===15||t===75)return s(t);if(t===36)return u().divide(Expression.TWO);if(t===72)return u().subtract(Expression.ONE).divide(Expression.TWO);if(t===18)return Expression.TWO.add(u()).squareRoot().divide(Expression.TWO);if(t===54)return Expression.TWO.add(Expression.ONE).subtract(u()).squareRoot().divide(Expression.TWO);if(t%3===0){var c=90-Math.floor(t/3)%6*15,d=-(c-t);return l(c,d)}}if(n.multiply(Expression.TWO).getDenominator().equals(Expression.ONE)){var Ct=t+n.multiply(Expression.TWO).toNumber()/2;if(Ct===7.5)return l(30,-22.5);if(Ct===22.5)return s(Ct);if(Ct===37.5)return l(60,-22.5);if(Ct===52.5)return l(30,22.5);if(Ct===67.5)return s(Ct);if(Ct===82.5)return l(60,22.5)}if(t%1===0){var ar=Integer$1.fromNumber(t).add(n).divide(Integer$1.fromNumber(60)),en=ar.getDenominator().toNumber(),c=ar.getNumerator().toNumber();if(en>Number.MAX_SAFE_INTEGER||c>Number.MAX_SAFE_INTEGER)return;var tn=function(ax){const ox=Polynomial.of(Expression.ZERO,Expression.ONE);let sx=Polynomial.of(Expression.ONE),ux=ox,cx=1;for(;cx<ax;){let hx=Polynomial.of(Expression.TWO).multiply(ox).multiply(ux).subtract(sx);sx=ux,ux=hx,cx+=1}return ux},on=tn(en).subtract(Polynomial.of(simplifyConstantValueInternal(60*(c%6),Expression.ZERO)));on=on.scale(on.getContent().inverse());var cn=Math.cos((t+n.getNumerator().toNumber()/n.getDenominator().toNumber())/180*Math.PI),a=Math.floor(cn*2**24+.5),dn=Expression.Integer.fromNumber(2**24),Cn={a:Expression.Integer.fromNumber(a-1).divide(dn),b:Expression.Integer.fromNumber(a+1).divide(dn)};return Expression.ExpressionPolynomialRoot.create(on,Cn)}},simplifyConstantValue=function(t,n){var a=void 0,s=void 0;if(t instanceof Integer$1&&t.compareTo(Expression.ZERO)===0)a=Expression.ZERO,s=Expression.ONE;else if(t===Expression.PI)a=Expression.ONE,s=Expression.ONE;else if(t instanceof Multiplication&&t.a instanceof Integer$1&&t.b===Expression.PI)a=t.a,s=Expression.ONE;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a===Expression.PI)a=Expression.ONE,s=t.b;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b===Expression.PI)a=t.a.a,s=t.b;else if(t instanceof Expression.Degrees){var l=t.value.simplify();if(l=l.multiply(Expression.PI).divide(Integer$1.fromNumber(180)),n==="sin")return l.sin();if(n==="cos")return l.cos()}if(a!=null&&s!=null){var u=a.multiply(Integer$1.fromNumber(180)).truncatingDivide(s),c=a.multiply(Integer$1.fromNumber(180)).subtract(u.multiply(s)).divide(s),d=u.remainder(Integer$1.fromNumber(360)).toNumber();if(n==="sin")d=90-d,c=c.negate(),d>=270&&(d-=360);else if(n!=="cos")throw new TypeError;return simplifyConstantValueInternal(d,c)}if(t instanceof Expression.Radians&&t.value.equals(Expression.ZERO))return simplifyConstantValue(t.value,n);if(Expression.has(t,Expression.Complex)){if(n==="sin")return Expression.I.multiply(t.divide(Expression.I).sinh());if(n==="cos")return t.divide(Expression.I).cosh()}if(t instanceof Expression.Arctan){Expression.callback!=null&&Expression.callback(new Expression.Event("trigonometric-function-of-inverse-trigonometric-function-arg",new Expression.Matrix(Matrix.I(1))));var a=t.a;if(n==="sin")return a.getNumerator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot());if(n==="cos")return a.getDenominator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot())}if(t instanceof Expression.ExpressionWithPolynomialRoot)return simplifyConstantValue(t.upgrade(),n)};Expression.prototype.cosh=function(){var t=this;return t.exp().add(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.sinh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.tanh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(t.exp().add(t.negate().exp()))};Expression.prototype.coth=function(){var t=this;return t.exp().add(t.negate().exp()).divide(t.exp().subtract(t.negate().exp()))};Expression.prototype.arccos=function(){var t=this;return t.arcsin().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcsin=function(){var t=this;return t.divide(t.pow(Expression.TWO).subtract(Expression.ONE).negate().squareRoot()).arctan()};Expression.prototype.arccot=function(){var t=this;return t.arctan().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcosh=function(){var t=this;return t.add(t.multiply(t).subtract(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.arsinh=function(){var t=this;return t.add(t.multiply(t).add(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.artanh=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE).negate()).logarithm().divide(Expression.TWO)};Expression.prototype.arcoth=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE)).logarithm().divide(Expression.TWO)};Expression.isRealAlgebraicNumber=function t(n){return n instanceof Expression.Integer||n instanceof Expression.NthRoot&&typeof n.n=="number"&&n.n%1===0&&t(n.a)&&(n.n%2!==0||Expression._isPositive(n.a))||n instanceof Expression.Division&&t(n.getNumerator())&&t(n.getDenominator())||n instanceof Expression.Addition&&t(n.a)&&t(n.b)||n instanceof Expression.Multiplication&&t(n.a)&&t(n.b)};var isArgumentValid=function(t,n){if(t instanceof Expression.Radians)return Expression.isRealAlgebraicNumber(t.value);if(t instanceof Expression.Degrees)return simplifyConstantValue(t,n)!=null;if(t instanceof Expression.Symbol)return Expression.isScalar(t);if(t instanceof Expression.Exponentiation)return t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0;if(t instanceof Addition)return isArgumentValid(t.a,n)&&isArgumentValid(t.b,n);if(t instanceof Expression.Arctan)return!0;if(t instanceof Multiplication){if(t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol||t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Arctan||Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol&&(t.a instanceof Expression.NthRoot&&t.a.a instanceof Integer$1||t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b instanceof Expression.NthRoot&&t.a.b.a instanceof Integer$1))return!0;var a=Expression.getConstant(t),s=t.divide(a);if(Expression.isScalar(t)&&(a instanceof Integer$1||a instanceof Expression.Complex)&&(s instanceof Multiplication||s instanceof Expression.Symbol||s instanceof Expression.Exponentiation)){for(var l of s.factors())if(!(l instanceof Expression.NthRoot)&&!(l instanceof Expression.Symbol)&&!(l instanceof Expression.Exponentiation&&l.a instanceof Expression.Symbol&&Expression.isScalar(l.a)&&l.b instanceof Expression.Integer&&l.b.compareTo(Expression.ONE)>0))return!1;return!0;//!?
}}return t instanceof Division&&t.b instanceof Integer$1?isArgumentValid(t.a):t instanceof Expression.Complex};Expression.prototype.sin=function(){var t=this,n=simplifyConstantValue(t,"sin");if(n!=null)return n;if(t.isNegative())return t.negate().sin().negate();if(!isArgumentValid(t,"sin"))throw new RangeError("NotSupportedError");return new Sin(t)};function Cos(t){Expression.Function.call(this,"cos",t)}Cos.prototype=Object.create(Expression.Function.prototype);Expression.prototype.cos=function(){var t=this,n=simplifyConstantValue(t,"cos");if(n!=null)return n;if(t.isNegative())return t.negate().cos();if(!isArgumentValid(t,"cos"))throw new RangeError("NotSupportedError");return new Cos(t)};Expression.simplifications.push(Expression.simplifyTrigonometry);Expression.Sin=Sin;Expression.Cos=Cos;Expression.Addition.prototype.compare4Addition=function(t){var n=this;return Expression.Addition.compare4Addition(n,t)};Expression.Multiplication.prototype.compare4MultiplicationInteger=function(t){return-1};//!!!
Expression.Addition.prototype.compare4Multiplication=function(t){if(t instanceof Integer$1)return-1;if(t instanceof Expression.MatrixSymbol)return 1;for(var n=this,a=n.summands(),s=t.summands(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Multiplication(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Addition.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Addition.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Addition.compare4Addition=function(t,n){for(var a=t.summands(),s=n.summands(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Addition(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};//!!!
Expression.Unit=function(t){this.value=t};Expression.Unit.prototype=Object.create(Expression.prototype);Expression.Unit.prototype.toString=function(t){var n=this.value,a=!(n instanceof Expression.Integer);return(a?"(":"")+n.toString(t)+(a?")":"")+this.unitSymbol()};Expression.Unit.prototype.equals=function(t){return t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()&&this.value.equals(t.value)};Expression.Unit.prototype.compare4AdditionSymbol=function(t){return t.compare4Addition(this.value)};Expression.Unit.prototype.compare4Addition=function(t){return this.value.compare4Addition(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4Multiplication=function(t){return this.value.compare4Multiplication(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4MultiplicationSymbol=function(t){return t.compare4Multiplication(this.value)};Expression.Unit.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Unit.prototype.negate=function(){return this.create(this.value.negate())};Expression.Unit.prototype.multiply=function(t){return this.create(this.value.multiply(t))};Expression.Unit.prototype.multiplyInteger=function(t){return this.create(t.multiply(this.value))};Expression.Unit.prototype.add=function(t){if(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()){var n=this.value.add(t.value);if(n.equals(Expression.ZERO)){return n;//!?
}return this.create(n);//!?
}return Expression.prototype.add.call(this,t)};//!new 2017-04-26
Expression.Degrees=function(t){Expression.Unit.call(this,t)};Expression.Degrees.prototype=Object.create(Expression.Unit.prototype);Expression.Degrees.prototype.unitSymbol=function(){return""};Expression.Degrees.prototype.create=function(t){return new Expression.Degrees(t)};//!new 2019-12-27
Expression.Radians=function(t){this.value=t};Expression.Radians.prototype=Object.create(Expression.Unit.prototype);Expression.Radians.prototype.unitSymbol=function(){return" rad"};Expression.Radians.prototype.create=function(t){return new Expression.Radians(t)};//!new 2019-11-23
Expression.Matrix.prototype.sin=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().subtract(n.negate().multiply(t).exp()).divide(a.multiply(n))};Expression.Matrix.prototype.cos=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().add(n.negate().multiply(t).exp()).divide(a)};//!
(function(){var t=new Expression.Symbol("_i");function n(s){return Expression._map(function(l){if(l instanceof Expression.Sin){var u=l.a;return t.multiply(u).exp().subtract(t.multiply(u).negate().exp()).divide(Expression.TWO.multiply(Expression.I))}if(l instanceof Expression.Cos){var u=l.a;return t.multiply(u).exp().add(t.multiply(u).negate().exp()).divide(Expression.TWO)}return l},s)}function a(s){return Expression._map(function(l){if(l instanceof Expression.Exponentiation&&l.a===Expression.E){var u=l.b,c=Polynomial.toPolynomial(u.getNumerator(),t).scale(u.getDenominator().inverse());if(c.getDegree()===1){var d=c.getCoefficient(0),Ct=c.getCoefficient(1);return Ct.cos().add(Expression.I.multiply(Ct.sin())).multiply(d.exp())}if(c.getDegree()>1)throw new TypeError("!?")}return l},s)}Expression._replaceSinCos=n,Expression._replaceBySinCos=a})();function Arctan(t){Expression.Function.call(this,"arctan",t)}Arctan.prototype=Object.create(Expression.Function.prototype);Expression.Arctan=Arctan;function getlowestfraction(t){var n=1e-15,a,s,l,u,c,d,Ct,ar;for(ar=t,Ct=Math.floor(ar),s=1,c=0,a=Ct,u=1;ar-Ct>n*u*u;)ar=1/(ar-Ct),Ct=Math.floor(ar),l=s,s=a,d=c,c=u,a=l+Ct*s,u=d+Ct*c;return a+"/"+u}Expression.prototype.arctan=function(){var t=this;if(t.isNegative())return t.negate().arctan().negate();if(Expression.isConstant(t)&&!(t instanceof Expression.Logarithm)){if(t instanceof Expression.Complex)return Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I));var n=Number(toDecimalStringInternal$1(t,{fractionDigits:15}));console.assert(!Number.isNaN(n));var a=getlowestfraction(Math.atan(n)/Math.PI).split("/"),s=Expression.Integer.fromNumber(Number(a[0])).divide(Expression.Integer.fromNumber(a[1])).multiply(Expression.PI);if(s.getDenominator().toNumber()<1e4&&s.tan().subtract(t).equals(Expression.ZERO))return s;throw new RangeError("NotSupportedError")}if(t instanceof Division){var l=t.getNumerator(),u=t.getDenominator();if(u.subtract(Expression.ONE).subtract(l).multiply(u.subtract(Expression.ONE).add(l)).subtract(Expression.ONE).equals(Expression.ZERO)){var c=Expression.TWO.multiply(t).divide(Expression.ONE.subtract(t._pow(2)));return new Arctan(c).divide(Expression.TWO)}}return t instanceof Expression.Matrix?t.matrix.isDiagonal()?new Expression.Matrix(t.matrix.map(function(d,Ct,ar){return Ct===ar?d.arctan():Expression.ZERO})):Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I)):new Arctan(t)};Expression.prototype.tan=function(){var t=this,n=t.multiply(Expression.TWO);return n.sin().divide(n.cos().add(Expression.ONE))};Expression.prototype.cot=function(){var t=this;if(t instanceof Expression.Matrix)return t.cos().divide(t.sin());var n=t.multiply(Expression.TWO);return n.cos().add(Expression.ONE).divide(n.sin())};Expression.Radians.prototype.complexConjugate=function(){return new Expression.Radians(this.value.complexConjugate())};Expression.Sin.prototype.complexConjugate=function(){return this.a.complexConjugate().sin()};Expression.Cos.prototype.complexConjugate=function(){return this.a.complexConjugate().cos()};Expression.Sin.prototype.compare4MultiplicationExponentiation=function(){return-1};var Integer=Expression.Integer;function Complex(t,n){if(!(t instanceof Integer)||!(n instanceof Integer)||n.compareTo(Expression.ZERO)===0)throw new RangeError;this.real=t,this.imaginary=n}Complex.prototype=Object.create(Expression.prototype);Expression.I=new Complex(Expression.ZERO,Expression.ONE);Expression.Complex=Complex;Complex.prototype.add=function(t){return t.addComplex(this)};Expression.prototype.addComplex=function(t){return this.addExpression(t)};Integer.prototype.addComplex=function(t){return new Complex(t.real.add(this),t.imaginary)};Complex.prototype.addComplex=function(t){var n=t.real.add(this.real),a=t.imaginary.add(this.imaginary);return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Complex.prototype.addInteger=function(t){return new Complex(t.add(this.real),this.imaginary)};Complex.prototype.equals=function(t){return!!(t instanceof Complex&&this.real.equals(t.real)&&this.imaginary.equals(t.imaginary))};Complex.prototype.compare4AdditionSymbol=function(t){return 1};Complex.prototype.compare4MultiplicationNthRoot=function(t){return 1};Complex.prototype.compare4Addition=function(t){return t instanceof Complex?this.equals(t)?0:this.real.compareTo(t.real)||this.imaginary.compareTo(t.imaginary):t instanceof Integer?1:t instanceof Expression.Division?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Exponentiation?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Matrix?Expression.prototype.compare4Addition.call(this,t):-1};Complex.prototype.compare4Multiplication=function(t){return t instanceof Complex?t.equals(this)?0:this.real.abs().compareTo(t.real.abs())||this.imaginary.abs().compareTo(t.imaginary.abs()):t.compare4MultiplicationComplex(this)};Expression.prototype.compare4MultiplicationComplex=function(t){return-1};Complex.prototype.compare4MultiplicationSymbol=function(t){return 1};Complex.prototype.multiply=function(t){return t.multiplyComplex(this)};Complex.prototype.multiplyComplex=function(t){var n=t.real.multiply(this.real).subtract(t.imaginary.multiply(this.imaginary)),a=t.real.multiply(this.imaginary).add(t.imaginary.multiply(this.real));return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Expression.prototype.multiplyComplex=function(t){return this.multiplyExpression(t)};Integer.prototype.multiplyComplex=function(t){return this.compareTo(Expression.ZERO)===0?this:new Complex(t.real.multiply(this),t.imaginary.multiply(this))};Complex.prototype.multiplyInteger=function(t){return t.compareTo(Expression.ZERO)===0?t:new Complex(t.multiply(this.real),t.multiply(this.imaginary))};Complex.prototype.conjugate=function(){return new Complex(this.real,this.imaginary.negate())};Complex.prototype.getPrecedence=function(){return this.real.equals(Expression.ZERO)?this.imaginary.equals(Expression.ONE)?1e3:3:2};Complex.prototype.truncatingDivide=function(t){return t instanceof Integer?new Complex(this.real.truncatingDivide(t),this.imaginary.truncatingDivide(t)):this.multiply(t.conjugate()).truncatingDivide(t.multiply(t.conjugate()))};Complex.prototype.toStringInternal=function(t,n,a,s,l,u,c,d){if(this.real.equals(Expression.ZERO))return this.imaginary.equals(Expression.ONE)?a:this.imaginary.equals(Expression.ONE.negate())?u+s+a+c:u+d(this.imaginary,t)+n+a+c;var Ct=this.imaginary.isNegative(),ar=Ct?this.imaginary.negateCarefully():this.imaginary,en=ar.equals(Expression.ONE)?a:u+d(ar,t)+n+a+c,tn=d(this.real,t);return u+tn+(Ct?s:l)+en+c};Complex.prototype.toString=function(t){return this.toStringInternal(t,"","i","-","+","","",function(n,a){return n.toString(a)})};Complex.prototype.compare4MultiplicationInteger=function(t){return 1};Complex.prototype.remainderInteger=function(t){return Complex.prototype.remainder.call(t,this)};Complex.prototype.remainder=function(t){function n(en){return en instanceof Expression.Integer?en.multiply(en):en.multiply(en.conjugate())}function a(en,tn){tn.compareTo(Expression.ZERO)<0&&(tn=tn.negate(),en=en.negate());var on=tn.truncatingDivide(Expression.TWO);return en.compareTo(Expression.ONE)<0&&(on=on.negate()),en.add(on).truncatingDivide(tn)}var s=this,l=t instanceof Expression.Integer?s:s.multiply(t.conjugate()),u=t instanceof Expression.Integer?t:t.multiply(t.conjugate()),c=a(l instanceof Complex?l.real:l,u),d=a(l instanceof Complex?l.imaginary:Expression.ZERO,u),Ct=d.compareTo(Expression.ZERO)===0?c:new Complex(c,d),ar=s.subtract(t.multiply(Ct));if(n(ar).compareTo(n(t))>=0)throw new TypeError;return ar};Complex.prototype.primeFactor=function(){return QuadraticInteger._complexIntegerPrimeFactor(this.real.toBigInt(),this.imaginary.toBigInt())};Expression.Complex=Complex;Expression.Complex.prototype.complexConjugate=function(){return this.conjugate()};Expression.Complex.prototype.compare4MultiplicationExponentiation=function(){return 1};function SomePolynomialRoot(t,n,a){this.e=t,this.polynomial=n,this.rootSymbol=a}SomePolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);function alpha(){return new Expression.Symbol("alpha")}function isSameRoot(t,n){return t.polynomial.equals(n.polynomial)&&t.rootSymbol===n.rootSymbol}SomePolynomialRoot.create=function(t){const n=alpha();return new SomePolynomialRoot(n,t,n)};SomePolynomialRoot.prototype.isExact=function(){return!1};function simplifyExpressionWithPolynomialRoot$1(t,n){if(t instanceof Expression.Integer)return t;var a=Polynomial$1.toPolynomial(t.getNumerator(),alpha()),s=Polynomial$1.toPolynomial(t.getDenominator(),alpha()),l=!1;if(s.getDegree()>=n.getDegree()*2&&(a=a.divideAndRemainder(n).remainder,l=!0),s.getDegree()>=n.getDegree()*2&&(s=s.divideAndRemainder(n).remainder,l=!0),a.isDivisibleBy(n))return Expression.ZERO;if(s.getDegree()>0){var u=s.modularInverse(n).primitivePart();s=s.multiply(u).divideAndRemainder(n).remainder,a=a.multiply(u).divideAndRemainder(n).remainder,l=!0}if(!l)return new SomePolynomialRoot(t,n);var c=a.calcAt(alpha()).divide(s.calcAt(alpha()));return c instanceof Expression.Integer?c:new SomePolynomialRoot(c,n)}SomePolynomialRoot.prototype.negate=function(){return new SomePolynomialRoot(this.e.negate(),this.polynomial)};SomePolynomialRoot.prototype.equals=function(t){return t===Expression.ZERO?!1:this.subtract(t).equals(Expression.ZERO)};SomePolynomialRoot.prototype.simplifyExpression=function(){return this};SomePolynomialRoot.prototype.toString=function(t){throw new TypeError};SomePolynomialRoot.prototype.toMathML=function(t){throw new TypeError};SomePolynomialRoot.prototype.multiply=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t),this.polynomial)};SomePolynomialRoot.prototype.add=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.add(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.add(t),this.polynomial)};SomePolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot$1(this.e.inverse(),this.polynomial)};SomePolynomialRoot.prototype.divide=function(t){return t instanceof SomePolynomialRoot&&isSameRoot(this,t)?simplifyExpressionWithPolynomialRoot$1(this.e.divide(t.e),this.polynomial):this.multiply(t.inverse())};SomePolynomialRoot.prototype.divideExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.divide(this.e),this.polynomial)};SomePolynomialRoot.prototype.multiplyExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.multiply(this.e),this.polynomial)};SomePolynomialRoot.prototype.addExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.add(this.e),this.polynomial)};SomePolynomialRoot.prototype.getPrecedence=function(){throw new TypeError};SomePolynomialRoot.prototype.isRightToLeftAssociative=function(){throw new TypeError};SomePolynomialRoot.prototype.isUnaryPlusMinus=function(){throw new TypeError};SomePolynomialRoot.prototype.isNegative=function(){throw new TypeError};SomePolynomialRoot.prototype._nthRoot=function(t){throw new TypeError};SomePolynomialRoot.prototype.pow=function(t){throw new TypeError};SomePolynomialRoot.prototype._pow=function(t){throw new TypeError};SomePolynomialRoot.prototype.calcAt=function(t,n){var a=function(u){for(var c=Polynomial$1.toPolynomial(u,alpha()),d=Expression.ZERO,Ct=Date.now();n.length<=c.getDegree();)n.push(n[n.length-1].multiply(t));var ar=Date.now();ar-Ct>10&&console.log("xPows",ar-Ct);for(var en=0;en<=c.getDegree();en+=1)d=d.add(c.getCoefficient(en).multiply(n[en]));return d},s=this.e,l=a(s.getNumerator()).divide(a(s.getDenominator()));return l};var LEFT_TO_RIGHT=0,RIGHT_TO_LEFT=1,COMMA_PRECEDENCE=1,EQUALITY_PRECEDENCE=2,ADDITIVE_PRECEDENCE=3,MULTIPLICATIVE_PRECEDENCE=4,UNARY_PRECEDENCE=6,UNARY_PRECEDENCE_PLUS_ONE=UNARY_PRECEDENCE+1,UNARY_PRECEDENCE_PLUS_TWO=UNARY_PRECEDENCE+2;function Operator(t,n,a,s,l){this.name=t,this.arity=n,this.rightToLeftAssociative=a,this.precedence=s,this.i=l}Operator.trigonometry=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n=prepareTrigonometricArgument(n),n[t]()})};Operator.simple=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n[t]()})};var UNARY_PLUS=new Operator("+",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t}),UNARY_MINUS=new Operator("-",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.negate()}),prepareTrigonometricArgument=function(t){if(t instanceof Expression.Integer)return new Expression.Degrees(t);if(t instanceof Expression.NonSimplifiedExpression){const n=function(a){return a instanceof Expression.NonSimplifiedExpression?n(a.e):a instanceof Expression.Integer?!0:a instanceof Expression.Negation?n(a.b):a instanceof Expression.Multiplication||a instanceof Expression.Addition?n(a.a)&&n(a.b):!1};if(n(t))return toDegrees(t)}return t},toDegrees=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Degrees(t)):new Expression.Degrees(t)},toRadians=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Radians(t)):new Expression.Radians(t)},notSupported=function(t){throw new TypeError},conjugateTranspose=function(t){return t.transpose().complexConjugate()},inequalityOperator=function(t,n){return new Operator(t,2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(a,s){return a.transformInequality(s,n)})},operations=[new Operator("=",2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(t,n){return t.transformEquality(n)}),inequalityOperator("","!="),inequalityOperator("!=","!="),inequalityOperator(">",">"),inequalityOperator("<","<"),inequalityOperator("",">="),inequalityOperator("","<="),new Operator(";",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator(",",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator("+",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.add(n)}),new Operator("-",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.subtract(n)}),new Operator("*",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("/",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.divide(n)}),new Operator("\\",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.inverse().multiply(n)}),new Operator("^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator("**",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator(".^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.elementWisePower(n)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.squareRoot()}),new Operator("sqrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("radical",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(3)}),new Operator("cbrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t._nthRoot(3)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(4)}),new Operator("rank",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rank()}),new Operator("adj",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("adjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("inverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.inverse()}),new Operator("det",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("determinant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("row-reduce",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rowReduce()}),new Operator("transpose",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transpose()}),new Operator("'",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){if(Expression.isScalar(t)){var n=null;if(Expression._map(function(s){return s instanceof Expression.Symbol&&!Expression.isConstant(s)&&(n=s),s},t.simplify()),n!=null)return t.simplify().derivative(n)}return t.transpose()}),new Operator("^*",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("^{*}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("solve",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transformNoAnswerExpression("solve")}),new Operator("GF2",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.GF2()}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("deg",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("rad",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toRadians(t)}),new Operator("exp",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.exp()}),new Operator("log",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("lg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm().divide(Expression.TEN.logarithm())}),new Operator("ln",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("abs",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.abs()}),new Operator("min",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.min()}),new Operator("max",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.max()}),new Operator("gcd",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.gcd()}),new Operator("conjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("overline",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("arg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexArgument()}),new Operator("\\left",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\right",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\mathrm",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("frac",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t,n){return t.divide(n)}),new Operator("\\cdot",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("\\times",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){return t.factorial()}),new Operator("!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("!!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("pseudoinverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.pseudoinverse()}),new Operator("root of",1,RIGHT_TO_LEFT,EQUALITY_PRECEDENCE,function(t){var n=Expression.getMultivariatePolynomial(t.simplify());return SomePolynomialRoot.create(n.p)}),new Operator("near",2,RIGHT_TO_LEFT,COMMA_PRECEDENCE,function(t,n){if(t instanceof Expression.Integer)return t;if(t instanceof SomePolynomialRoot&&t.e.toString()==="alpha"){const Ct=n.simplify(),ar=t.polynomial;var a=ar.getZeros(),s=1/0,l=null,u=function(tn,on){return tn.subtract(on)};for(var c of a){var d=Math.abs(Number(u(Ct,c).toString({rounding:{fractionDigits:2*ar.getDegree()+Math.ceil(ar._log2hypot())}})));(l==null||d<s)&&(s=d,l=c)}const en=l.upgrade();return n instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(en):en}throw new TypeError}),new Operator("factor",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.simplify().factor()}),new Operator("derivative",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;return t.list[0].derivative(t.list[1])}return t.derivative()}),new Operator("'(x)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("'(t)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("t"))}),new Operator("'_{x}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("resultant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;var n=new Expression.Symbol("x"),a=Polynomial.toPolynomial(t.list[0],n),s=Polynomial.toPolynomial(t.list[1],n);return new Expression.Polynomial(Polynomial.resultant(a,s))}})];function OperationSearchCache(){this.map={},this.re=null}OperationSearchCache.prototype.append=function(t){this.map[t.name.toLowerCase()]=t,this.re=null};OperationSearchCache.prototype.getByName=function(t){return this.map[t.toLowerCase()]};OperationSearchCache.prototype.getRegExp=function(){var t=function(s){return s.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&")};if(this.re==null){var n=[];for(var a in this.map)Object.prototype.hasOwnProperty.call(this.map,a)&&n.push(a);n.sort(function(l,u){return l<u&&u.lastIndexOf(l,0)!==0||l.lastIndexOf(u,0)===0?-1:1});const s="\0";this.re=new RegExp("^(?:"+t(n.join(s)).split(s).join("|").replace(/\|ch\|/g,"|ch(?!i)|").replace(/\|th\|/g,"|th(?!eta)|")+")","i")}return this.re};var operationSearchCache=new OperationSearchCache,trigonometryFunctions={},i$1=-1;for(;++i$1<operations.length;)operationSearchCache.append(operations[i$1]);for(const t of"cos sin tan cot".split(" "))operationSearchCache.append(Operator.trigonometry(t)),trigonometryFunctions[t]=!0;for(const t of"cosh sinh tanh coth arccos arcsin arctan arccot arcosh arsinh artanh arcoth".split(" "))operationSearchCache.append(Operator.simple(t));var nextToken=function(t){var n=null;do n=t.next();while(n.type==="whitespace");return n},parsePunctuator=function(t,n,a){if(n.type!=="punctuator"||n.value!==a)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input, '"+a+"' expected"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"', '"+a+"' expected");return n=nextToken(t),n};function ParseResult(t,n){this.result=t,this.token=n}var parseMatrix=function(t,n,a){for(var s="{",l="}",u=[],c=!0;c;){n=parsePunctuator(t,n,s);for(var d=[],Ct=!0;Ct;){var ar=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=ar.token,d.push(ar.result),n.type==="punctuator"&&n.value===","?(Ct=!0,n=nextToken(t)):Ct=!1}n=parsePunctuator(t,n,l),u.push(d),n.type==="punctuator"&&n.value===","?(c=!0,n=nextToken(t)):c=!1}return n=parsePunctuator(t,n,"}"),new ParseResult(a.wrap(Expression.Matrix.fromArray(u)),n)},parseLaTeXMatrix=function(t,n,a,s){for(var l=[],u=!0;u||n.type==="punctuator"&&n.value===s;){u?u=!1:n=nextToken(t);for(var c=[],d=!0;d||n.type==="punctuator"&&n.value==="&";){d?d=!1:n=nextToken(t);var Ct=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=Ct.token,c.push(Ct.result)}l.push(c)}return new ParseResult(a.wrap(Expression.Matrix.fromArray(l)),n)},parseLaTeXArgument=function(t,n,a){return parseExpression(t,n,a,0,void 0)},getVulgarFraction=function(t){var n=normalizeVulgarFractions(t).replace(/[\u2044]/g,"/"),a=Expression.Integer.fromString(n.slice(0,n.indexOf("/"))).divide(Expression.Integer.fromString(n.slice(n.indexOf("/")+1)));return a},getDecimalFraction=function(t,n,a,s){var l=Expression.ZERO,u=Expression.ONE;if(t!=null&&(l=Expression.Integer.fromString(t)),n!=null){var c=Expression.pow(Expression.TEN,n.length);l=l.multiply(c).add(Expression.Integer.fromString(n)),u=u.multiply(c)}if(a!=null){var c=Expression.pow(Expression.TEN,a.length).subtract(Expression.ONE);l=l.multiply(c).add(Expression.Integer.fromString(a)),u=u.multiply(c)}if(s!=null){var d=0+Number(s),c=Expression.pow(Expression.TEN,d<0?-d:d);d<0?u=u.multiply(c):l=l.multiply(c)}var Ct=l.divide(u);return Ct};ExpressionParser._getDecimalFraction=getDecimalFraction;var parseDecimalFraction=function(t,n,a){var s=!0,l=void 0;if(n.type==="integerLiteral")l=Expression.Integer.fromString(n.value),l=a.wrap(l),n=nextToken(t);else if(n.type==="numericLiteral"){var u=n.value,c=decimalFractionWithGroups.exec(u);s=!1,a.needsWrap?l=new Expression.DecimalFraction(c[1],c[2],c[3],c[4]):l=getDecimalFraction(c[1],c[2],c[3],c[4]),l=a.wrap(l),n=nextToken(t)}//!
if((s||l==null)&&n.type==="vulgarFraction"){var d=a.wrap(getVulgarFraction(n.value));l!=null?l=l.add(d).addPosition(t.previousPosition,t.previousPosition,t.input):l=d,n=nextToken(t)}return l!=null?new ParseResult(l,n):void 0},whiteSpaces=/^\s+/,punctuators=/^(?:[,&(){}|@]|\\\\|(?:\\begin|\\end)(?:\{(?:[bvp]?matrix|gathered)\})?)/,integerLiteral=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))(?!,(?:\d|\(\d+\)))/,integerLiteralWithoutComma=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))/,decimalFraction=/^(?=[.,]?\d)\d*(?:(?:[.]|[.,](?=\d|\(\d+\)))\d*(?:\(\d+\))?)?(?:(?:[eE]|)[\+\-]?\d+)?/,decimalFractionWithoutComma=new RegExp(decimalFraction.source.replace(/,/g,""));const greek="alpha beta gamma delta epsilon zeta eta theta iota kappa lambda mu nu xi omicron pi rho varsigma sigma tau upsilon phi chi psi omega".split(" "),ARABIC_MATHEMATIC_LETTER=/(?:[\u0627\u066E\u062D\u062F\u0633\u0634\u0635\u0639\u0637\u06BE\u062A]|\u062d\u0640\u0640\u0640\u0640)(?![\u0600-\u06FF])/;var symbols=new RegExp(/^(?:GREEK|circ||[a-zA-Z---]|ARABIC_MATHEMATIC_LETTER)(?:\_[0-9]+|\_\([a-z0-9]+,[a-z0-9]+\)|[\u2080-\u2089]+)?/.source.replace(/GREEK/g,greek.join("|")).replace(/ARABIC_MATHEMATIC_LETTER/g,ARABIC_MATHEMATIC_LETTER.source)),superscripts=/^[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]+/,vulgarFractions=/^[\u00BC-\u00BE\u2150-\u215E]/,other=/^(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|\S)/,decimalFractionWithGroups=/^(\d+)?(?:[.,](\d+)?(?:\((\d+)\))?)?(?:(?:[eE]|)([\+\-]?\d+))?$/,normalizeSuperscripts=function(t){return t.replace(/[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]/g,function(n){var a=n.charCodeAt(0);if(a===178)return"2";if(a===179)return"3";if(a===185)return"1";var s=a-8304;return"0i  456789+-=()n".slice(s,s+1)})},normalizeVulgarFractions=function(t){return t.replace(/[\u00BC-\u00BE\u2150-\u215E]/g,function(n){var a=n.charCodeAt(0),s=a-8528<0?(a-188)*2:(3+a-8528)*2;return"141234171911132315253545165618385878".slice(s,s+2).replace(/^\S/g,"$&").replace(/1\u20441/g,"110")})},normalizeSubscripts=function(t){for(var n=t.length-1;n>=0&&t.charCodeAt(n)>=8320&&t.charCodeAt(n)<=8329;)n-=1;return n===t.length-1?t:t.slice(0,n+1)+"_"+t.slice(n+1).replace(/[\u2080-\u2089]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-8320+48)})},normalizeGreek=function(t){var n=t.indexOf("_"),a=n===-1?t.length:n;if(a>1){var s=t.slice(0,a),l=greek.indexOf(s);if(l!==-1)return String.fromCharCode(945+l)+t.slice(a)}return t},parseExpression=function(t,n,a,s,l){var u=!0,c=!1,d=void 0,Ct=void 0;//!
for(;n.type!=="EOF"&&u;){var ar=void 0,en=void 0,tn=n.type==="operator"||n.type==="punctuator"&&n.value===","?operationSearchCache.getByName(n.value):null;if(tn!=null&&(ar=l==null&&tn.name==="+"?UNARY_PLUS:l==null&&tn.name==="-"?UNARY_MINUS:tn),ar!=null&&ar.name==="frac")if(!(l==null&&s<=UNARY_PRECEDENCE_PLUS_ONE||s<MULTIPLICATIVE_PRECEDENCE))u=!1;else{n=nextToken(t),d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var on=d.result;n=d.token,d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var cn=d.result;n=d.token,en=ar.i(on,cn),u=!0}else if(ar!=null)if(!(l!=null&&(ar.arity!==1||ar.rightToLeftAssociative!==RIGHT_TO_LEFT||s<MULTIPLICATIVE_PRECEDENCE)||l==null&&ar.arity===1&&ar.rightToLeftAssociative===RIGHT_TO_LEFT)||s>ar.precedence+(ar.rightToLeftAssociative===RIGHT_TO_LEFT?0:-1))u=!1;else{var dn=t.previousPosition;if(n=nextToken(t),ar.arity===1&&ar.rightToLeftAssociative!==RIGHT_TO_LEFT)ExpressionParser.startPosition=dn,ExpressionParser.endPosition=dn+ar.name.length,ExpressionParser.input=t.input,l=ar.i(l).addPosition(dn,ar.name.length,t.input);else if(ar.arity===1&&ar.rightToLeftAssociative===RIGHT_TO_LEFT&&ar.precedence===UNARY_PRECEDENCE_PLUS_ONE&&ar.name.length>1&&trigonometryFunctions[ar.name]===!0&&(n.type==="operator"&&n.value==="^"||n.type==="superscript"&&/^\d+$/.test(normalizeSuperscripts(n.value)))){//!new 2017-11-04
var Cn=t.position,In=0,ix=null;n.type==="superscript"?(ix=Expression.Integer.fromString(normalizeSuperscripts(n.value)),In=t.position-t.previousPosition,n=nextToken(t)):(In=1,n=nextToken(t),n.type!=="integerLiteral"&&!(n.type==="punctuator"&&(n.value==="{"||n.value==="("))?u=!1:(d=parseExpression(t,n,a,UNARY_PRECEDENCE,void 0),ix=d.result,n=d.token)),u&&(d=parseExpression(t,n,a,ar.precedence,void 0),Ct=d.result,n=d.token,en=ar.i(Ct).addPosition(dn,ar.name.length,t.input).pow(ix).addPosition(Cn,In,t.input))}else if(d=parseExpression(t,n,a,ar.precedence,void 0),Ct=d.result,n=d.token,ExpressionParser.startPosition=dn,ExpressionParser.endPosition=dn+ar.name.length,ExpressionParser.input=t.input,ar.arity===1)en=ar.i(Ct).addPosition(dn,ar.name.length,t.input);else if(ar.arity===2)l=ar.i(l,Ct).addPosition(dn,ar.name.length,t.input);else throw new RangeError}else if(l==null||s<MULTIPLICATIVE_PRECEDENCE||s===UNARY_PRECEDENCE_PLUS_ONE&&c&&n.type==="symbol")if((d=parseDecimalFraction(t,n,a))!=null)en=d.result,n=d.token,c=!0;else if(n.type==="punctuator"&&n.value==="(")n=parsePunctuator(t,n,"("),d=parseExpression(t,n,a,0,void 0),en=d.result,n=d.token,n=parsePunctuator(t,n,")");else if(n.type==="punctuator"&&n.value==="{")n=parsePunctuator(t,n,"{"),n.type==="punctuator"&&n.value==="{"?(d=parseMatrix(t,n,a),en=d.result,n=d.token):(d=parseLaTeXArgument(t,n,a),en=d.result,n=d.token,n=parsePunctuator(t,n,"}"));else if(n.type==="punctuator"&&(n.value==="\\begin{bmatrix}"||n.value==="\\begin{vmatrix}"||n.value==="\\begin{pmatrix}"||n.value==="\\begin{matrix}"||n.value==="\\begin{gathered}")){var ax=n.value.slice(7,-1);if(n=nextToken(t),d=parseLaTeXMatrix(t,n,a,"\\\\"),en=d.result,n=d.token,n.type==="punctuator"&&n.value==="\\end{"+ax+"}"&&(n=nextToken(t)),ax==="vmatrix"){en=en.determinant();//!
}}else if(n.type==="symbol"){var ox=n.value;ox=normalizeSubscripts(ox),ox=normalizeGreek(ox),en=a.get(ox),en=a.wrap(en),n=nextToken(t)}else if(n.type==="punctuator"&&n.value==="|")if(l==null||Expression.isScalar(l)){//!
if(n=parsePunctuator(t,n,"|"),d=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0),en=d.result,n=d.token,n=parsePunctuator(t,n,"|"),Expression.isScalar(en))en=en.abs();else{en=en.determinant();//!
}}else s<COMMA_PRECEDENCE?(n=parsePunctuator(t,n,"|"),d=parseExpression(t,n,a,0,void 0),en=d.result,n=d.token,en=l.augment(en),l=void 0):u=!1;else n.type==="punctuator"&&n.value===""?(n=nextToken(t),n=parsePunctuator(t,n,"("),d=parseLaTeXMatrix(t,n,a,"@"),en=d.result,n=d.token,n=parsePunctuator(t,n,")")):u=!1;else u=!1;//!TODO: fix
if(!u&&l!=null&&s<=UNARY_PRECEDENCE+0&&n.type==="superscript"){var sx=ExpressionParser.parse(normalizeSuperscripts(n.value),a);l=l.pow(sx).addPosition(t.previousPosition,t.previousPosition,t.input),n=nextToken(t),u=!0;//!
}if(!u&&n.type==="operator"&&n.value==="\\"&&(u=!0,n=nextToken(t)),en!=null)if(l!=null){var ux=t.position;d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,en);var cx=d.result;n=d.token,l=l.multiply(cx).addPosition(ux,1,t.input)}else l=en}if(l==null)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"'");return new ParseResult(l,n)};const decimalNumberRegExp$1=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit$1=function(t){let n=0;for(;decimalNumberRegExp$1.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10},map$2={":":"/","[":"(","]":")","":"*","":"*","":"/","":"^",:"",:"A",:"B",:"C",:"T",:"A",:"B",:"C",:"T","":",","":",","":" ","":"-","":"-","":"-","":"-","":"-","":"-","":"*","":" ","":"*","":",","":" ","":"e","":"i","":"-","":"/","":"*","":"","":"","":"*","":"|","":"","":"","":"0","":"(","":")",:"-",:"1",:"7",:"3",:"9",:"2",:"5",:"8",:"6",:"4"},isBidiControl=function(t){return t===1564||t===8206||t===8207||t>=8234&&t<=8238||t>=8294&&t<=8297};var getCodePointReplacement=function(t){if(t>=65281&&t<=65374)return t-65281+33;var n=replaceSimpleDigit$1(t);if(n!==-1)return n+48;if(isBidiControl(t))return 32;if(t>=0&&t<=65535){var a=map$2[String.fromCharCode(t)];if(a!=null&&a.length===1)return a.charCodeAt(0)}return-1},replaceSomeChars=function(t){for(var n=0,a="",s=0;s<t.length;){const c=t.codePointAt(s);var l=c<=65535?1:2;if(c>127||c===58||c===91||c===93){var u=getCodePointReplacement(c);if(u!==-1){if(!(u>=0&&u<=65535))throw new RangeError;a+=t.slice(n,s),a+=String.fromCharCode(u),n=s+l}}s+=l}return a+=t.slice(n),a},config=[{type:"integerLiteral",re:integerLiteral,state:0},{type:"integerLiteral",re:integerLiteralWithoutComma,state:1},{type:"numericLiteral",re:decimalFraction,state:0},{type:"numericLiteral",re:decimalFractionWithoutComma,state:1},{type:"whitespace",re:whiteSpaces,state:-1},{type:"punctuator",re:punctuators,state:-1},{type:"operator",re:null,state:-1},{type:"symbol",re:symbols,state:-1},{type:"vulgarFraction",re:vulgarFractions,state:-1},{type:"superscript",re:superscripts,state:-1},{type:"OTHER",re:other,state:-1}],stateConfigs=[{start:"(",end:")"},{start:"{",end:"}"}];function Token(t,n){this.type=t,this.value=n}Token.EOF=new Token("EOF","");function Tokenizer(t,n,a){this._preparedInput=replaceSomeChars(t.slice(n)),this.input=t,this._preparedInputPosition=0,this.previousPosition=n,this.position=n,this.states=a}Tokenizer.prototype.next=function(){if(this.previousPosition=this.position,this.position>=this.input.length)return Token.EOF;for(var t=0;t<config.length;t+=1){var n=config[t],a=n.type,s=n.re,l=n.state;if(s==null&&a==="operator"&&(s=operationSearchCache.getRegExp()),l===-1||l===(this.states==null?0:this.states.value)){var u=s.exec(this._preparedInput.slice(this._preparedInputPosition));if(u!=null){var c=u[0];if(a==="punctuator")for(var d=0;d<stateConfigs.length;d+=1){var l=stateConfigs[d];c===l.start?this.states={previous:this.states,value:d}:c===l.end&&this.states!=null&&this.states.value===d&&(this.states=this.states.previous)}for(var d=0;d<c.length;d+=c.codePointAt(d)<=65535?1:2)this.position+=this.input.codePointAt(this.position)<=65535?1:2;return this._preparedInputPosition+=c.length,new Token(a,c)}}}throw new TypeError};var fs={};//!TODO: remove!!!
function ExpressionParser(){}ExpressionParser.parse=function(t,n){if(n=n??new ExpressionParser.Context(void 0,!1),ExpressionParser.startPosition=-1,ExpressionParser.endPosition=-1,ExpressionParser.input=t,typeof t!="string")throw new RangeError;if(typeof hit=="function"&&n.getter!=null)for(var a=/[a-z][a-z][a-z\-]+/gi,s=null;(s=a.exec(t))!=null;){var l=s[0];!(l in fs)&&l.indexOf("-")===-1&&(fs[l]=!0,hit({fs:l}))}var u=new Tokenizer(t,0,null),c=nextToken(u),d=parseExpression(u,c,n,0,void 0);if(c=d.token,c.type!=="EOF")throw ExpressionParser.startPosition=u.previousPosition,ExpressionParser.endPosition=u.position,ExpressionParser.input=u.input,new RangeError("UserError: unexpected '"+u.input.slice(u.previousPosition,u.position)+"'");return d.result};globalThis.Tokenizer=Tokenizer;ExpressionParser.startPosition=-1;ExpressionParser.endPosition=-1;ExpressionParser.input="";var getConstant=function(t){return t==="pi"||t===""||t===""?Expression.PI:t==="e"||t===""?Expression.E:t==="i"||t===""?Expression.I:t==="I"||t==="U"||t==="E"?new Expression.IdentityMatrix(t):t==="circ"?Expression.CIRCLE:t===""?Expression.INFINITY:new Expression.Symbol(t)};ExpressionParser.Context=function(t,n){this.getter=t,this.needsWrap=n??!0};ExpressionParser.Context.prototype.get=function(t){if(this.getter!=null){var n=this.getter(t);if(n!=null)return n}return getConstant(t)};ExpressionParser.Context.prototype.wrap=function(t){return this.needsWrap?new Expression.NonSimplifiedExpression(t):t};ExpressionParser.addOperation=function(t,n){var a=n===1?new Operator(t,n,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(s){return s.transformNoAnswerExpression(t)}):new Operator(t,n,RIGHT_TO_LEFT,MULTIPLICATIVE_PRECEDENCE,function(s,l){return s.transformNoAnswerExpression(t,l)});operationSearchCache.append(a)};ExpressionParser.addDenotations=function(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n],s=operationSearchCache.getByName(n),l={};l[n]=!0;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];if(l[c]==null){l[c]=!0;var d=new Operator(c,s.arity,s.rightToLeftAssociative,s.precedence,s.i);operationSearchCache.append(d),trigonometryFunctions[n]&&(trigonometryFunctions[c]=!0)}}}};var idCounter=0;function NonSimplifiedExpression(t,n,a,s){this.e=t,this.position=n??-1,this.length=a??-1,this.input=s??"",this.id=idCounter+=1}NonSimplifiedExpression.prototype=Object.create(Expression.prototype);NonSimplifiedExpression.prototype.negate=function(){return new NonSimplifiedExpression(new Expression.Negation(this))};NonSimplifiedExpression.prototype.add=function(t){return new NonSimplifiedExpression(new Expression.Addition(this,t))};NonSimplifiedExpression.prototype.subtract=function(t){return new NonSimplifiedExpression(new Expression.Subtraction(this,t))};NonSimplifiedExpression.prototype.divide=function(t){return new NonSimplifiedExpression(new Expression.Division(this,t))};NonSimplifiedExpression.prototype.multiply=function(t){return new NonSimplifiedExpression(new Expression.Multiplication(this,t))};NonSimplifiedExpression.prototype.pow=function(t){return new NonSimplifiedExpression(new Expression.Exponentiation(this,t))};NonSimplifiedExpression.prototype.exp=function(){return new NonSimplifiedExpression(Expression.E).pow(this)};NonSimplifiedExpression.prototype.logarithm=function(){return new NonSimplifiedExpression(new Expression.Logarithm(this))};NonSimplifiedExpression.prototype.inverse=function(){return new NonSimplifiedExpression(new Expression.Exponentiation(this,Expression.ONE.negate()))};NonSimplifiedExpression.prototype.factorial=function(){return new NonSimplifiedExpression(new Expression.Factorial(this))};NonSimplifiedExpression.prototype.addExpression=function(t){throw new TypeError};NonSimplifiedExpression.prototype.squareRoot=function(){return new NonSimplifiedExpression(new Expression.SquareRoot(this))};NonSimplifiedExpression.prototype._nthRoot=function(t){return new NonSimplifiedExpression(new Expression.NthRoot(t+"-root",this,t))};NonSimplifiedExpression.prototype.abs=function(){return new NonSimplifiedExpression(new Expression.Function("abs",this))};NonSimplifiedExpression.prototype.cos=function(){return new NonSimplifiedExpression(new Expression.Function("cos",this))};NonSimplifiedExpression.prototype.sin=function(){return new NonSimplifiedExpression(new Expression.Function("sin",this))};NonSimplifiedExpression.prototype.tan=function(){return new NonSimplifiedExpression(new Expression.Function("tan",this))};NonSimplifiedExpression.prototype.cot=function(){return new NonSimplifiedExpression(new Expression.Function("cot",this))};NonSimplifiedExpression.prototype.cosh=function(){return new NonSimplifiedExpression(new Expression.Function("cosh",this))};NonSimplifiedExpression.prototype.sinh=function(){return new NonSimplifiedExpression(new Expression.Function("sinh",this))};NonSimplifiedExpression.prototype.tanh=function(){return new NonSimplifiedExpression(new Expression.Function("tanh",this))};NonSimplifiedExpression.prototype.coth=function(){return new NonSimplifiedExpression(new Expression.Function("coth",this))};NonSimplifiedExpression.prototype.arccos=function(){return new NonSimplifiedExpression(new Expression.Function("arccos",this))};NonSimplifiedExpression.prototype.arcsin=function(){return new NonSimplifiedExpression(new Expression.Function("arcsin",this))};NonSimplifiedExpression.prototype.arctan=function(){return new NonSimplifiedExpression(new Expression.Function("arctan",this))};NonSimplifiedExpression.prototype.arccot=function(){return new NonSimplifiedExpression(new Expression.Function("arccot",this))};NonSimplifiedExpression.prototype.arcosh=function(){return new NonSimplifiedExpression(new Expression.Function("arcosh",this))};NonSimplifiedExpression.prototype.arsinh=function(){return new NonSimplifiedExpression(new Expression.Function("arsinh",this))};NonSimplifiedExpression.prototype.artanh=function(){return new NonSimplifiedExpression(new Expression.Function("artanh",this))};NonSimplifiedExpression.prototype.arcoth=function(){return new NonSimplifiedExpression(new Expression.Function("arcoth",this))};NonSimplifiedExpression.prototype.rank=function(){return new NonSimplifiedExpression(new Expression.Rank(this))};NonSimplifiedExpression.prototype.determinant=function(){return new NonSimplifiedExpression(new Expression.Determinant(this))};Expression.Pseudoinverse.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pseudoinverse()};NonSimplifiedExpression.prototype.pseudoinverse=function(){return new NonSimplifiedExpression(new Expression.Pseudoinverse(this))};NonSimplifiedExpression.prototype.rowReduce=function(){return new NonSimplifiedExpression(new Expression.RowReduce(this))};NonSimplifiedExpression.prototype.GF2=function(){return new NonSimplifiedExpression(new Expression.GF2(this))};NonSimplifiedExpression.prototype.transpose=function(){return new NonSimplifiedExpression(new Expression.Transpose(this))};NonSimplifiedExpression.prototype.complexConjugate=function(){return new NonSimplifiedExpression(new Expression.ComplexConjugate(this))};NonSimplifiedExpression.prototype.complexArgument=function(){return new NonSimplifiedExpression(new Expression.ComplexArgument(this))};NonSimplifiedExpression.prototype.adjugate=function(){return new NonSimplifiedExpression(new Expression.Adjugate(this))};NonSimplifiedExpression.prototype.elementWisePower=function(t){return new NonSimplifiedExpression(new Expression.ElementWisePower(this,t))};NonSimplifiedExpression.prototype.transformNoAnswerExpression=function(t,n){return new NonSimplifiedExpression(new Expression.NoAnswerExpression(this,t,n))};NonSimplifiedExpression.prototype.transformEquality=function(t){return new NonSimplifiedExpression(new Expression.Equality(this,t))};NonSimplifiedExpression.prototype.transformInequality=function(t,n){return new NonSimplifiedExpression(new Expression.Inequality(this,t,n))};NonSimplifiedExpression.prototype.transformComma=function(t){return new NonSimplifiedExpression(new Expression.Comma(this,t))};NonSimplifiedExpression.prototype.derivative=function(t){return new NonSimplifiedExpression(new Expression.Derivative(this,t))};NonSimplifiedExpression.prototype.addPosition=function(t,n,a){return new NonSimplifiedExpression(this.e,t,n,a)};var prepare$1=function(t,n){var a=t.simplify();return ExpressionParser.startPosition=n.position,ExpressionParser.endPosition=n.position+n.length,ExpressionParser.input=n.input,a};Expression.prototype.simplifyInternal=function(t){return this};Expression.Exponentiation.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pow(prepare$1(this.b,t))};Expression.Multiplication.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).multiply(prepare$1(this.b,t))};Expression.Addition.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).add(prepare$1(this.b,t))};Expression.Division.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).divide(prepare$1(this.b,t))};Expression.SquareRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).squareRoot()};Expression.NthRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)._nthRoot(this.n)};Expression.Function.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)[this.name]()};Expression.Logarithm.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).logarithm()};Expression.Rank.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rank()};Expression.Determinant.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).determinant()};Expression.RowReduce.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rowReduce()};Expression.GF2.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).GF2()};Expression.Transpose.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transpose()};Expression.ComplexConjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexConjugate()};Expression.ComplexArgument.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexArgument()};Expression.Adjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).adjugate()};Expression.NoAnswerExpression.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformNoAnswerExpression(this.name,this.second==null?void 0:prepare$1(this.second,t))};Expression.Equality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformEquality(prepare$1(this.b,t))};Expression.Inequality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformInequality(prepare$1(this.b,t),this.sign)};Expression.Matrix.prototype.simplifyInternal=function(t){return new Expression.Matrix(this.matrix.map(function(n,a,s){return prepare$1(n,t)}))};Expression.Radians.prototype.simplifyInternal=function(t){return new Expression.Radians(prepare$1(this.value,t))};Expression.Comma.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformComma(prepare$1(this.b,t))};Expression.Derivative.prototype.simplifyInternal=function(t){return prepare$1(this.symbol,t).derivative(this.variable)};Expression.prototype.simplify=function(){return this};NonSimplifiedExpression.prototype.simplify=function(){return this.e.simplify().simplifyInternal(this).simplifyExpression()};NonSimplifiedExpression.prototype.toString=function(t){return this.e.toString(t)};NonSimplifiedExpression.prototype.equals=function(t){return this.simplify().equals(t.simplify())};//!
NonSimplifiedExpression.prototype.unwrap=function(){return this.e};Expression.Negation.prototype.simplifyInternal=function(t){return prepare$1(this.b,t).negate()};Expression.Subtraction.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).subtract(prepare$1(this.b,t))};NonSimplifiedExpression.prototype.isUnaryPlusMinus=function(){return this.e.isUnaryPlusMinus()};NonSimplifiedExpression.prototype.getPrecedence=function(){return this.e.getPrecedence()};Expression.ElementWisePower.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).elementWisePower(prepare$1(this.b,t))};Expression.Factorial.prototype.simplifyInternal=function(t){return prepare$1(this.n,t).factorial()};NonSimplifiedExpression.prototype.getId=function(){return"e"+this.id.toString()};Expression.prototype.getIds=function(){return""};Expression.BinaryOperation.prototype.getIds=function(){var t=this.a.getIds(),n=this.b.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.getIds=function(){var t=this.getId(),n=this.e.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.isNegative=function(){return!1};NonSimplifiedExpression.prototype.negateCarefully=function(){return new NonSimplifiedExpression(this.e.negateCarefully())};NonSimplifiedExpression.prototype.isRightToLeftAssociative=function(){return this.e.isRightToLeftAssociative()};NonSimplifiedExpression.prototype.isExact=function(){return this.e.isExact()};Expression.DecimalFraction=function(t,n,a,s){this.integer=t,this.transient=n,this.repetend=a,this.exponent=s};Expression.DecimalFraction.prototype=Object.create(Expression.prototype);Expression.DecimalFraction.prototype.getPrecedence=function(){return 1e3};Expression.DecimalFraction.prototype.simplifyInternal=function(){return ExpressionParser._getDecimalFraction(this.integer,this.transient,this.repetend,this.exponent)};Expression.DecimalFraction.prototype.toString=function(){return(this.integer||"0")+"."+(this.transient||"")+(this.repetend!=null?"("+this.repetend+")":"")+(this.exponent!=null?"E"+this.exponent:"")};NonSimplifiedExpression.prototype.augment=function(t){return new NonSimplifiedExpression(new Expression.AugmentedMatrix(this,t))};Expression.AugmentedMatrix.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).augment(prepare$1(this.b,t))};Expression.NonSimplifiedExpression=NonSimplifiedExpression;function SimpleFloat(t,n){this.significand=t,this.exponent=n}SimpleFloat.create=function(t){var n=t.getNumerator(),a=t.getDenominator();if(!(n instanceof Expression.Integer)||!(a instanceof Expression.Integer))throw new TypeError;var s=0;if(a!==Expression.ONE&&(s=a.bitLength()-1,!Expression.TWO._pow(s).equals(a)))throw new TypeError;return new SimpleFloat(n,0-s)};SimpleFloat.prototype.toExpression=function(){return this.significand.multiply(this.exponent>=0?Expression.TWO._pow(this.exponent):Expression.TWO._pow(-this.exponent).inverse())};SimpleFloat.prototype.multiply=function(t){return new SimpleFloat(this.significand.multiply(t.significand),this.exponent+t.exponent)};SimpleFloat.prototype.add=function(t){const n=Math.min(this.exponent,t.exponent);return new SimpleFloat(this.significand.leftShift(this.exponent-n).add(t.significand.leftShift(t.exponent-n)),n)};SimpleFloat.prototype.negate=function(){return new SimpleFloat(this.significand.negate(),this.exponent)};SimpleFloat.prototype.sign=function(){return this.significand.sign()};SimpleFloat.prototype.toString=function(){return this.significand.toString()+"*2**"+this.exponent};SimpleFloat.prototype.round=function(t,n){if(this.exponent!==0-n){if(t==="floor"){var a=new SimpleFloat(this.significand.leftShift(this.exponent+n),0-n);if(a.add(this.negate()).sign()>0)throw new Error;return a}if(t==="ceil"){var a=new SimpleFloat(this.significand.negate().leftShift(this.exponent+n).negate(),0-n);if(a.add(this.negate()).sign()<0)throw new Error;return a}throw new RangeError}return this};var isRational=function(t){return t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer},isPowerOf2=function(t){return Expression.TWO._pow(t.bitLength()-1).equals(t)};function SimpleInterval(t,n){if(!(t instanceof SimpleFloat)||!(n instanceof SimpleFloat)||t.add(n.negate()).sign()>0)throw new TypeError;this.a=t,this.b=n}SimpleInterval.from=function(t){return new SimpleInterval(SimpleFloat.create(t.a),SimpleFloat.create(t.b))};SimpleInterval.prototype.toExpressionsInterval=function(){return{a:this.a.toExpression(),b:this.b.toExpression()}};SimpleInterval.prototype.negate=function(){return new SimpleInterval(this.b.negate(),this.a.negate())};SimpleInterval.prototype.add=function(t){return new SimpleInterval(this.a.add(t.a),this.b.add(t.b))};SimpleInterval.prototype.multiply=function(t){var n=function(ox){return ox.sign()};const a=function(ox,sx,ux,cx){return new SimpleInterval(ox.multiply(sx),ux.multiply(cx))},s=this.a,l=this.b,u=t.a,c=t.b,d=n(s),Ct=n(l),ar=n(u),en=n(c);if(d>=0)return ar>=0?a(s,u,l,c):en<=0?a(l,u,s,c):a(l,u,l,c);if(Ct<=0)return en<=0?a(l,c,s,u):ar>=0?a(s,c,l,u):a(s,c,s,u);if(ar>=0)return a(s,c,l,c);if(en<=0)return a(l,u,s,u);const tn=s.multiply(u),on=l.multiply(u),cn=s.multiply(c),dn=l.multiply(c);var Cn=function(ox,sx){return ox.subtract(sx).sign()<0?ox:sx},In=function(ox,sx){return ox.subtract(sx).sign()<0?sx:ox};const ix=Cn(Cn(tn,on),Cn(cn,dn)),ax=In(In(tn,on),In(cn,dn));return new SimpleInterval(ix,ax)};SimpleInterval.prototype.scale=function(t){return this.multiply(SimpleInterval.from({a:t,b:t}))};SimpleInterval.prototype.inverse=function(t){var n=function(c){return c.sign()};if(n(this.a)<0&&n(this.b)>0)throw new TypeError;if(t==null){debugger;throw new TypeError}var a=this.toExpressionsInterval();//!TODO: REMOVE
var s=Expression.TWO._pow(t+Math.max(a.b.getNumerator().abs().bitLength(),a.a.getNumerator().abs().bitLength())),l=function(c,d,Ct){if(Ct==="floor")return d.sign()<0&&(c=c.negate(),d=d.negate()),c.sign()>=0?c.truncatingDivide(d):c.add(Expression.ONE).truncatingDivide(d).subtract(Expression.ONE);if(Ct==="ceil")return l(c.negate(),d,"floor").negate();throw new TypeError},u=function(c,d,Ct){return l(c,d.getNumerator(),Ct).divide(c).multiply(d.getDenominator())};return SimpleInterval.from({a:u(s,a.b,"floor"),b:u(s,a.a,"ceil")})};SimpleInterval.prototype._pow=function(t){return t%2===0?t===0?SimpleInterval.from({a:Expression.ONE,b:Expression.ONE}):this.multiply(this)._pow(t/2):new SimpleInterval(this.a._pow(t),this.b._pow(t))};SimpleInterval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};SimpleInterval.prototype.round=function(t){return new SimpleInterval(this.a.round("floor",t),this.b.round("ceil",t))};const intersection=function(t,n){var a=function(u,c){return u.subtract(c).getNumerator().sign()},s=function(u,c){return a(u,c)<0?c:u},l=function(u,c){return a(u,c)<0?u:c};return a(n.a,t.b)>0||a(t.a,n.b)>0?null:{a:s(t.a,n.a),b:l(t.b,n.b)}},toSimpleInterval=function(t,n){if(t instanceof Expression.Integer)return SimpleInterval.from({a:t,b:t});if(t instanceof Expression.BinaryOperation){var a=toSimpleInterval(t.a,n),s=toSimpleInterval(t.b,n),l=t.getS();if(l==="+")return a.add(s);if(l==="-")return a.add(s.negate());if(l==="*")return a.multiply(s);if(l==="/")return a.multiply(s.inverse(n));if(l==="^"){if(t.b instanceof Expression.Integer){var u=t.b.toBigInt();return a._pow(u)}}else debugger}else if(t instanceof Expression.NthRoot){const en=t.n;if(console.assert(en>=2&&en%1===0),t.a instanceof Expression.Integer&&t.a.sign()>0){var a=t.a,c=Expression.TWO._pow(n),d=a.multiply(c._pow(en))._integerNthRoot(en);return SimpleInterval.from({a:d.divide(c),b:d.add(Expression.ONE).divide(c)})}var a=toSimpleInterval(t.a,n);if(en%2===0)for(var Ct=2;a.a.sign()<0&&a.b.sign()>0;)a=toSimpleInterval(t.a,n*Ct),Ct*=2;var ar=function(on,cn,dn){var Cn=Expression.TWO._pow(n),In=dn==="floor"?on.getNumerator().sign()>=0?Expression.ZERO:Expression.ONE.negate():on.getNumerator().sign()<0?Expression.ZERO:Expression.ONE;return on.getNumerator().multiply(on.getDenominator()._pow(cn-1)).multiply(Cn._pow(cn))._integerNthRoot(cn).add(In).divide(Cn.multiply(on.getDenominator()))};return a=a.toExpressionsInterval(),SimpleInterval.from({a:ar(a.a,en,"floor"),b:ar(a.b,en,"ceil")})}if(t instanceof PolynomialRoot||t instanceof Expression.PolynomialRootSymbol)return SimpleInterval.from(t.toDecimal(n));if(t instanceof Expression.ExpressionPolynomialRoot)return SimpleInterval.from(t.root.toDecimal(n));debugger;throw new TypeError("?")};function Helper(t){this.squareFreeFactors=[];var n=null;const a=Polynomial$1.of(Expression.ONE);do n=t.squareFreeFactors(),n.a1.equals(a)||this.squareFreeFactors.push(n.a1),n.a0.getDegree()!==0?t=n.a0:t=null;while(t!=null)}Helper.prototype.calcAt=function(t){var n=Expression.ONE;for(var a of this.squareFreeFactors)n=n.multiply(a.calcAt(t));return n};Helper.prototype.numberOfRoots=function(t){var n=0,a=[];for(var s of this.squareFreeFactors){var l=s.numberOfRoots(t.toExpressionsInterval());n+=l,l>0&&a.push(s)}return this.squareFreeFactors=a,n};Helper.get=function(t,n){return t.squareFreeFactors.length===1?t.squareFreeFactors[0]:null};var calculateNewInterval=function(t,n,a){if(!t.hasIntegerCoefficients())throw new RangeError("just a check");t=new Helper(t);//!?!?TODO: REMOVE
var s=8,l=n(s);for(l=l.round(s);l.a.sign()!==l.b.sign()&&!t.calcAt(Expression.ZERO).equals(Expression.ZERO)||t.numberOfRoots(l)>1;)if(s*=2,l=n(s),l=l.round(s),s>1024)throw new Error;var u=l;return t=Helper.get(t,l),new PolynomialRoot(t,u.toExpressionsInterval(),a)};function PolynomialRoot(t,n,a={}){if(!t.hasIntegerCoefficients())throw new TypeError;if(t.getLeadingCoefficient().sign()<0)return new PolynomialRoot(t.negate(),n);var s=t.getContent();if(!s.equals(Expression.ONE))return new PolynomialRoot(t.scale(s.inverse()),n);if(!a.skipFactorization){//!
var l=function(){const d=t._factorizeOverTheIntegers();for(let Ct=d.next().value;Ct!=null;Ct=d.next().value)if(Ct.numberOfRoots(n)!==0)return Ct;return null};let c=t.isSquareFreePolynomial()?l():t.factorize();if(c!=null&&!c.equals(t)){if(c.numberOfRoots(n)!==0)return new PolynomialRoot(c,n);var u=t.divideAndRemainder(c,"throw").quotient;return new PolynomialRoot(u,n)}}if(n instanceof SimpleInterval)throw new TypeError;if(n.a.subtract(n.b).getNumerator().sign()>0)throw new TypeError;if(!a.skipFactorization){//!
if(t.numberOfRoots(n)!==1)throw new TypeError}if(!t.getContent().equals(Expression.ONE))throw new TypeError;this.polynomial=t,this.interval=n}PolynomialRoot.prototype.toDecimal=function(t){return t<=0?this.interval:this.polynomial.getZero(this.interval,t)};PolynomialRoot.prototype.toString=function(){return"[root of "+this.polynomial+" near "+this.interval.a.add(this.interval.b).divide(Expression.TWO).toString()+"]"};PolynomialRoot.prototype.scale=function(t){var n=this.polynomial._scaleRoots(t).primitivePart();if(!isRational(t)){var a=this;return n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(l){return toSimpleInterval(a,l).multiply(toSimpleInterval(t,l))})}if(!isPowerOf2(t.getDenominator())){var a=this;return calculateNewInterval(n,function(u){return toSimpleInterval(a,u).multiply(toSimpleInterval(t,u))})}var s=SimpleInterval.from(this.interval).scale(t).toExpressionsInterval();return new PolynomialRoot(n,s,{skipFactorization:!0})};PolynomialRoot.prototype.translate=function(t){var n=this.polynomial._translateRoots(t).primitivePart(),a=this;return isRational(t)?calculateNewInterval(n,function(s){return toSimpleInterval(a,s).add(toSimpleInterval(t,s))},{skipFactorization:!0}):(n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(s){return toSimpleInterval(a,s).add(toSimpleInterval(t,s))}))};PolynomialRoot.prototype.multiply=function(t){var n=this;{let d=Math.gcd(n.polynomial.getGCDOfTermDegrees(),t.polynomial.getGCDOfTermDegrees());if(d>1){var a=n._pow(d).multiply(t._pow(d))._nthRoot(d);return d%2===0&&n.sign()*t.sign()<0&&(a=a.negate()),a}}const s=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),l=d=>new Expression.Polynomial(Polynomial$1.of(d));var u=t.polynomial._exponentiateRoots(-1).map(l)._scaleRoots(s),c=Polynomial$1.resultant(n.polynomial.map(l),u).polynomial.primitivePart();return calculateNewInterval(c,function(d){return toSimpleInterval(n,d).multiply(toSimpleInterval(t,d))})};PolynomialRoot.prototype.add=function(t){var n=this;if(n.polynomial.isEven()&&n.polynomial.equals(t.polynomial)&&n.equals(t.negate()))return new PolynomialRoot(Polynomial$1.of(Expression.ONE).shift(1),{a:Expression.ONE.negate(),b:Expression.ONE});const a=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),s=c=>new Expression.Polynomial(Polynomial$1.of(c));var l=t.polynomial._scaleRoots(Expression.ONE.negate()).map(s)._translateRoots(a),u=Polynomial$1.resultant(n.polynomial.map(s),l).polynomial.primitivePart();return calculateNewInterval(u,function(c){return toSimpleInterval(n,c).add(toSimpleInterval(t,c))})};PolynomialRoot.prototype.negate=function(){return new PolynomialRoot(this.polynomial._scaleRoots(Expression.ONE.negate()),{b:this.interval.a.negate(),a:this.interval.b.negate()})};PolynomialRoot.prototype.inverse=function(){var t=this.polynomial._exponentiateRoots(-1);console.assert(this.interval.a.getNumerator().sign()===this.interval.b.getNumerator().sign());var n=this;return calculateNewInterval(t,function(a){return toSimpleInterval(n,a).inverse(a)})};PolynomialRoot.prototype.sign=function(){if(this.polynomial.getCoefficient(0).equals(Expression.ZERO)&&this.interval.a.getNumerator().sign()<=0&&this.interval.b.getNumerator().sign()>=0)return 0;if(this.interval.a.getNumerator().sign()>=0)return 1;if(this.interval.b.getNumerator().sign()<=0)return-1;throw new TypeError("should not happen")};PolynomialRoot.prototype._pow=function(t){var n=function(l,u,c){if(!(u>=0))throw new RangeError;if(u>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return u<1?c:2*Math.floor(u/2)!==u?n(l,u-1,c.multiply(l)):n(l._pow(2),Math.floor(u/2),c)};if(t===0)return new PolynomialRoot(Polynomial$1.of(Expression.ONE.negate(),Expression.ONE),SimpleInterval.from({a:Expression.ZERO,b:Expression.TWO}));var a=Math.gcd(t,this.polynomial.getGCDOfTermDegrees());if(a===1)return n(this,t-1,this);if(a<t)return this._pow(a)._pow(t/a);var s=void 0;return t%2===0&&this.interval.b.getNumerator().sign()<=0?s={a:this.interval.b._pow(t),b:this.interval.a._pow(t)}:s={a:this.interval.a._pow(t),b:this.interval.b._pow(t)},new PolynomialRoot(this.polynomial._exponentiateRoots(t),s)};const $=function(){return new Expression.Symbol("")};PolynomialRoot.prototype._nthRoot=function(t){var n=this.polynomial._exponentiateRoots(1/t),a=this;return calculateNewInterval(n,function(s){return toSimpleInterval(Expression.NthRoot.makeRoot(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),a)),t),s)})};PolynomialRoot.prototype.equals=function(t){if(this===t)return!0;if(this.polynomial.getDegree()!==t.polynomial.getDegree())return!1;if(this.polynomial.equals(t.polynomial)&&this.interval.a.equals(t.interval.a)&&this.interval.b.equals(t.interval.b))return!0;const n=intersection(this.interval,t.interval);if(n==null)return!1;if(this.polynomial.equals(t.polynomial)){const s=this.polynomial.numberOfRoots(n);if(s===1)return!0;if(s===0)return!1;throw new TypeError}if(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial).getDegree()===0)return!1;var a=this.add(t.negate()).interval;return a.a.getNumerator().sign()<=0&&a.b.getNumerator().sign()>=0};PolynomialRoot._calculateNewInterval=calculateNewInterval;LazyPolynomialRoot._calculateNewInterval=calculateNewInterval;PolynomialRoot._toSimpleInterval=toSimpleInterval;LazyPolynomialRoot._toSimpleInterval=toSimpleInterval;var _isSimpleForUpgrade=function(t,n){if(t instanceof Expression.Multiplication){return!0;//!?
}return t instanceof Expression.Addition&&!(t.a instanceof Expression.Addition)?_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n):t.equals(n)||t instanceof Expression.Integer||t instanceof Expression.Complex||t instanceof Expression.NthRoot||t instanceof Expression.Exponentiation&&_isSimpleForUpgrade(t.a,n)&&t.b instanceof Expression.Integer||t instanceof Expression.Multiplication&&_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n)||t instanceof Expression.Division&&_isSimpleForUpgrade(t.getNumerator(),n)&&t.b instanceof Expression.Integer};PolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;LazyPolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;function LazyPolynomialRoot(t,n,a){if(!(t instanceof Polynomial$1))throw new TypeError;if(!(n instanceof Polynomial$1)||n.getDegree()!==0)throw new TypeError;if(!t._testCoefficients(s=>!(s instanceof Expression.Division)))throw new TypeError;console.assert(a instanceof PolynomialRoot),this._p1=t,this._p2=n,this._root=a}LazyPolynomialRoot.prototype.toDecimal=function(t){var n=function(Ct,ar,en){for(var tn=toSimpleInterval(Expression.ZERO,en),on=Ct.getDegree();on>=0;on--){tn=tn.multiply(ar);var cn=toSimpleInterval(Ct.getCoefficient(on),Math.max(1,en));tn=tn.add(cn)}return tn},a=toSimpleInterval(this._root,t),s=this._p1,l=this._p2,u=n(s,a,t),c=n(l,a,t),d=u.multiply(c.inverse(t));return d.toExpressionsInterval()};LazyPolynomialRoot.prototype.toString=function(){return"["+this.getAlphaExpression()+", where "+this._root+"]"};function makeExpressionWithPolynomialRoot(t,n,a){var s=a;if(n.getDegree()!==0||!(n.getCoefficient(0)instanceof Expression.Integer)){const ar=n.modularInverse(a.polynomial).primitivePart(),en=n.multiply(ar).divideAndRemainder(a.polynomial).remainder;if(n.getDegree()>0){var u=en.getContent().getDenominator();return makeExpressionWithPolynomialRoot(t.multiply(ar).scale(u),en.scale(u),a)}}var l=function(ar,en){if(!(en.getLeadingCoefficient()instanceof Expression.Integer)){var tn=Expression.getConjugate(en.getLeadingCoefficient());return l(ar.scale(tn),en.scale(tn))}var on=ar.getContent().gcd(en.getContent());return on.equals(Expression.ONE)||(ar=ar.scale(on.inverse()),en=en.scale(on.inverse())),[ar,en]};if(t.equals(Polynomial$1.ZERO))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)];if(t.getDegree()===0&&n.getDegree()===0)return l(t,n);//!
var u=function(ar){return ar.divideAndRemainder(s.polynomial).remainder};t=u(t),n=u(n);var c=t.map(ar=>ar.getDenominator().inverse()).getContent().getDenominator();if(t=t.scale(c),n=n.scale(c),!t.hasIntegerCoefficients()){var d=!0;if(a instanceof PolynomialRoot){var Ct=new LazyPolynomialRoot(t,Polynomial$1.of(Expression.ONE),a).toDecimal(53);//!new - trying to optimize (!)
d=Ct.b.sign()>=0&&Ct.a.sign()<=0}if(d&&t.hasRoot(s))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)]}return l(t,n)}PolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;LazyPolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;function simplifyExpressionWithPolynomialRoot(t,n,a){const s=makeExpressionWithPolynomialRoot(t,n,a);return new LazyPolynomialRoot(s[0],s[1],a)}PolynomialRoot.create=function(t,n,a){return new PolynomialRoot(t,n,a)};LazyPolynomialRoot.create=function(t,n,a){return fromRoot(new PolynomialRoot(t,n,a))};function fromRoot(t){return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),t)}LazyPolynomialRoot.prototype.scale=function(t){console.assert(Expression.isRealAlgebraicNumber(t));var n=this._p1.scale(t.getNumerator()),a=this._p2.scale(t.getDenominator());return t instanceof Expression.Integer?new LazyPolynomialRoot(n,a,this._root):simplifyExpressionWithPolynomialRoot(n,a,this._root)};LazyPolynomialRoot.prototype.translate=function(t){return console.assert(Expression.isRealAlgebraicNumber(t)),simplifyExpressionWithPolynomialRoot(this._p1.scale(t.getDenominator()).add(this._p2.scale(t.getNumerator())),this._p2.scale(t.getDenominator()),this._root)};var toPolynomialWithIntegerCoefficients=function(t){if(!t.hasIntegerCoefficients()){var n=new Expression.Symbol("$$"),a=t.calcAt(n),s=Expression.getConjugateExpression(a);if(s!=null&&!s.equals(a))return Polynomial$1.toPolynomial(s,n)}return t};function upgrade(t,n,a){if(n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getCoefficient(1).equals(Expression.ONE)&&a.getDegree()===0)return a.getCoefficient(0).equals(Expression.ONE)?t:t.scale(a.getCoefficient(0).inverse());if(n.equals(Polynomial$1.ZERO))return PolynomialRoot.create(Polynomial$1.of(Expression.ZERO,Expression.ONE),{a:Expression.ZERO,b:Expression.ZERO});if(n.getDegree()===0&&a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)){const d=n.getCoefficient(0);return PolynomialRoot.create(Polynomial$1.of(d.negate(),Expression.ONE),{a:d,b:d})}if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===n.getGCDOfTermDegrees()&&n.getLeadingCoefficient().equals(Expression.ONE)&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getDegree()===t.polynomial.getGCDOfTermDegrees())return t._pow(n.getDegree());if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===1&&n.getCoefficient(1).equals(Expression.ONE))return t.translate(n.getCoefficient(0));if(a.getDegree()===0&&n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO))return t.scale(n.getCoefficient(1).divide(a.getCoefficient(0)));var s=Expression.ONE;a.getDegree()===0&&a.hasIntegerCoefficients()&&(s=a.getLeadingCoefficient(),a=Polynomial$1.of(Expression.ONE));var l=n.subtract(Polynomial$1.of(new Expression.Symbol("")).multiply(a));l=toPolynomialWithIntegerCoefficients(l);const u=d=>new Expression.Polynomial(Polynomial$1.of(d));l=l.map(d=>new Expression.Polynomial(Polynomial$1.toPolynomial(d,new Expression.Symbol(""))));var c=Polynomial$1.resultant(l,t.polynomial.map(u)).polynomial.primitivePart();return s!==Expression.ONE&&(c=c._scaleRoots(s.inverse()).primitivePart()),PolynomialRoot._calculateNewInterval(c,function(d){return toSimpleInterval(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(n,a.scale(s),t)),d)})}LazyPolynomialRoot.prototype.multiply=function(t){if(this._root.equals(t._root))return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p1),this._p2.multiply(t._p2),this._root);var n=upgrade(this._root,this._p1,this._p2).multiply(upgrade(t._root,t._p1,t._p2));return fromRoot(n)};LazyPolynomialRoot.prototype.add=function(t){if(this._root.equals(t._root)){var n=t._p2.getContent().gcd(this._p2.getContent());return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p2.scale(n.inverse())).add(t._p1.multiply(this._p2.scale(n.inverse()))),this._p2.scale(n.inverse()).multiply(t._p2.scale(n.inverse())).scale(n),this._root)}var a=upgrade(this._root,this._p1,this._p2).add(upgrade(t._root,t._p1,t._p2));return fromRoot(a)};LazyPolynomialRoot.prototype.negate=function(){return new LazyPolynomialRoot(this._p1.negate(),this._p2,this._root)};LazyPolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot(this._p2,this._p1,this._root)};LazyPolynomialRoot.prototype.sign=function(){if(this._p1.equals(Polynomial$1.ZERO))return 0;let t=1;for(;;){var n=this.toDecimal(t);if(n.a.getNumerator().sign()>=0)return 1;if(n.b.getNumerator().sign()<=0)return-1;t*=2,t>8&&console.debug("hm...")}};LazyPolynomialRoot.prototype._pow=function(t){return simplifyExpressionWithPolynomialRoot(this._p1._pow(t),this._p2._pow(t),this._root)};LazyPolynomialRoot.prototype._nthRoot=function(t){if(this._p2.getDegree()===0&&this._p2.getCoefficient(0).equals(Expression.ONE)&&this._p1.getDegree()===1&&this._p1.getCoefficient(0).equals(Expression.ZERO)&&this._p1.getCoefficient(1).equals(Expression.ONE)){var n=this._root._nthRoot(t);return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),n)}var a=function(u,c){var d=u.getSquareFreePolynomial();return d._pow(c).equals(u)?d:null},s=a(this._p1,t);const l=this._p2.getCoefficient(0);return s!=null&&this._p2.getDegree()===0&&l instanceof Expression.Integer&&l.sign()>0?simplifyExpressionWithPolynomialRoot(s,Polynomial$1.of(l._nthRoot(t)),this._root):this.upgrade()._nthRoot(t)};LazyPolynomialRoot.prototype.equals=function(t){if(this._root.equals(t._root))return this._p1.equals(t._p1)&&this._p2.equals(t._p2)||this.add(t.negate()).sign()===0;//!TODO: remove (hack to avoid error)
if(toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(this),{significantDigits:3})!==toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(t),{significantDigits:3}))return!1;//!
var n=upgrade(this._root,this._p1,this._p2).equals(upgrade(t._root,t._p1,t._p2));return n};PolynomialRoot.prototype.upgrade=function(){return this};LazyPolynomialRoot.prototype.upgrade=function(){return fromRoot(upgrade(this._root,this._p1,this._p2))};PolynomialRoot.prototype._calc=function(t){return upgrade(this,t.calcAt($()))};LazyPolynomialRoot.prototype._calc=function(t){var n=t.calcAt(this.getAlphaExpression());return simplifyExpressionWithPolynomialRoot(Polynomial$1.toPolynomial(n.getNumerator(),$()),Polynomial$1.toPolynomial(n.getDenominator(),$()),this._root)};PolynomialRoot.prototype.getAlpha=function(t){return{polynomial:this.polynomial,interval:this.interval}};LazyPolynomialRoot.prototype.getAlpha=function(t){return this._root.getAlpha()};PolynomialRoot.prototype.getAlphaExpression=function(t){return $()};LazyPolynomialRoot.prototype.getAlphaExpression=function(t){return this._p1.calcAt($()).divide(this._p2.calcAt($()))};PolynomialRoot.prototype.getAlphaPolynomial=function(t){return Polynomial$1.of(Expression.ZERO,Expression.ONE)};LazyPolynomialRoot.prototype.getAlphaPolynomial=function(t){return[this._p1,this._p2]};globalThis.testables=globalThis.testables||{};globalThis.testables.LazyPolynomialRoot=LazyPolynomialRoot;globalThis.testables.PolynomialRoot=PolynomialRoot;globalThis.testables.toSimpleInterval=toSimpleInterval;globalThis.testables.SimpleInterval=SimpleInterval;console.assert(Object.keys(PolynomialRoot).join(" ")===Object.keys(LazyPolynomialRoot).join(" ")),console.assert(Object.keys(PolynomialRoot.prototype).join(" ")===Object.keys(LazyPolynomialRoot.prototype).join(" ")),console.assert(PolynomialRoot.prototype.__proto__===LazyPolynomialRoot.prototype.__proto__);Expression.PolynomialRootSymbol=function(){throw new TypeError};function ExpressionWithPolynomialRoot(){throw new TypeError}Expression.ExpressionWithPolynomialRoot=ExpressionWithPolynomialRoot;function ExpressionPolynomialRoot(t){const n=t.getAlpha(),[a,s]=t.getAlphaPolynomial(),l=n.polynomial,u=n.interval;if(a.getDegree()<=0&&s.getDegree()<=0)return a.getCoefficient(0).divide(s.getCoefficient(0));if(l.getDegree()===1||l.getDegree()===2||l.getDegree()===4&&!1||l.getDegree()===l.getGCDOfTermDegrees()){var c=l.getDegree()===l.getGCDOfTermDegrees()&&l.getDegree()%2===1?[l.getCoefficient(0).negate().divide(l.getLeadingCoefficient())._nthRoot(l.getDegree())]:l.getroots();for(var d of c)if(!Expression.has(d,ExpressionPolynomialRoot)&&(Expression._isPositive(d.subtract(u.a))&&Expression._isPositive(d.subtract(u.b).negate())||d.equals(u.b)||d.equals(u.a))){if(a.getDegree()===1&&a.getCoefficient(0).equals(Expression.ZERO)&&a.getCoefficient(1).equals(Expression.ONE)&&s.getDegree()===0&&s.getCoefficient(0).equals(Expression.ONE))return d;var Ct=a.calcAt(d),ar=s.calcAt(d);return Ct.divide(ar)}}if(l.getDegree()<3)throw new TypeError;if(l.getDegree()/l.getGCDOfTermDegrees()>4096)throw new Error;Expression.Symbol.call(this,null),this.root=t,Object.freeze(this)}ExpressionPolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);ExpressionPolynomialRoot.create=function(t,n,a){return new ExpressionPolynomialRoot(LazyPolynomialRoot.create(t,n,a))};ExpressionPolynomialRoot.prototype.multiplyInteger=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiply=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiplyExpression=function(t){return t.equals(Expression.ONE)?this:Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiply(t):Expression.Symbol.prototype.multiplyExpression.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyAddition=function(t){return Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiplyExpression(t):Expression.Symbol.prototype.multiplyAddition.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyComplex=function(t){return this.multiply(t)};Expression.prototype.multiplyPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?n:n.equals(Expression.ONE)?t:new ExpressionPolynomialRoot(t.root.scale(n))}return this instanceof Expression.Complex&&!this.imaginary.equals(Expression.ONE)?this.imaginary.multiply(t).multiply(Expression.I).add(this.real.multiply(t)):this.multiplyExpression(t)};ExpressionPolynomialRoot.prototype._pow=function(t){return new ExpressionPolynomialRoot(this.root._pow(t))};ExpressionPolynomialRoot.prototype.pow=function(t){return t instanceof Expression.Integer?this._pow(t.toNumber()):t instanceof Expression.Division&&t.getDenominator()instanceof Expression.Integer?this._nthRoot(t.getDenominator().toNumber()).pow(t.getNumerator()):Expression.Symbol.prototype.pow.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.multiply(n.root))};ExpressionPolynomialRoot.prototype.add=function(t){return t.addPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.addPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.add(n.root))};Expression.prototype.addPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?t:new ExpressionPolynomialRoot(t.root.translate(n))}return this.addExpression(t)};ExpressionPolynomialRoot.prototype.addExpression=function(t){return this.add(t);//!?
};ExpressionPolynomialRoot.prototype.divide=function(t){return t instanceof Expression.Exponentiation?t.divideExpression(this):t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Exponentiation?this.multiply(t.a.inverse()).divide(t.b):this.multiply(t.inverse())};ExpressionPolynomialRoot.prototype.divideExpression=function(t){return t.equals(Expression.ZERO)?t:t.multiply(this.inverse())};ExpressionPolynomialRoot.prototype.inverse=function(){return new ExpressionPolynomialRoot(this.root.inverse())};ExpressionPolynomialRoot.prototype.sign=function(){return this.root.sign()};var toRadicalExpression=function(t){t=t.upgrade();const n=t.getAlpha();if(n.polynomial.getDegree()===1)return n.polynomial.getroots()[0];var a=n.polynomial.getGCDOfTermDegrees();if(a>1){const u=toRadicalExpression(t._pow(a));if(u!=null){const c=Expression.NthRoot.makeRoot(u,a);return a%2===1||t.sign()>0?c:new Expression.Negation(c)}}var s=n.polynomial._getShiftToDepressed();if(!s.equals(Expression.ZERO)){var l=toRadicalExpression(t.translate(s));if(l!=null)return new Expression.Addition(l,s.negate())}return null};function EmptyMap(){}EmptyMap.prototype.has=function(){return!1};EmptyMap.prototype.set=function(){};EmptyMap.prototype.get=function(){return null};function weakMap(){return typeof WeakMap<"u"?new WeakMap:new EmptyMap}const cache2rounding=weakMap(),DEFAULT_ROUNDING={fractionDigits:3};ExpressionPolynomialRoot.prototype._toDecimalString=function(t){t=t||{};const n=t.rounding||DEFAULT_ROUNDING;let a=cache2rounding.get(n);a==null&&(a=weakMap(),cache2rounding.set(n,a));var s=a.get(this);return s!=null||(s=toDecimalStringInternal$1(this,n),a.set(this,s)),s};ExpressionPolynomialRoot.prototype.toString=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toString(t)}return this._toDecimalString(t)};ExpressionPolynomialRoot.prototype.equals=function(t){return t instanceof ExpressionPolynomialRoot?this.root.equals(t.root):t instanceof Expression.Integer&&t.equals(Expression.ZERO)||!Expression.isRealAlgebraicNumber(t)?!1:this.subtract(t).equals(Expression.ZERO)};ExpressionPolynomialRoot.prototype.compare4MultiplicationComplex=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4MultiplicationNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype.compare4Multiplication=function(t){return t instanceof Expression.Complex||t instanceof Expression.Integer?1:t instanceof ExpressionPolynomialRoot||t instanceof Expression.NthRoot?0:t instanceof Expression.Symbol?-1:Expression.Symbol.prototype.compare4Multiplication.call(this,t)};ExpressionPolynomialRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};ExpressionPolynomialRoot.prototype.compare4Addition=function(t){return t instanceof ExpressionPolynomialRoot?0:t instanceof Expression.Symbol?1:t instanceof Expression.NthRoot||Expression.isRealAlgebraicNumber(t)?0:Expression.Symbol.prototype.compare4Addition.call(this,t)};ExpressionPolynomialRoot.prototype.compare4AdditionSymbol=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4AdditionNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype._nthRoot=function(t){if(this.root.sign()<0&&t%2===0){if(t!==2)throw new RangeError("NotSupportedError");return Expression.I.multiply(this.negate()._nthRoot(t))}return new ExpressionPolynomialRoot(this.root._nthRoot(t))};ExpressionPolynomialRoot.prototype.upgrade=function(){return new ExpressionPolynomialRoot(this.root.upgrade())};ExpressionPolynomialRoot.prototype.isNegative=function(){return this.root.sign()<0};Expression.prototype.upgrade=function(){return this};ExpressionPolynomialRoot.prototype.isExact=function(){{var t=this._toRadicalExpression();if(t!=null)return!0}return!1};ExpressionPolynomialRoot.prototype.negate=function(){return new ExpressionPolynomialRoot(this.root.negate())};ExpressionPolynomialRoot.prototype.simplifyExpression=function(){return this};ExpressionPolynomialRoot.prototype.toMathML=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toMathML(t)}return Expression._decimalToMathML(this._toDecimalString(t))};const cache=weakMap();ExpressionPolynomialRoot.prototype._toRadicalExpression=function(){if(cache.has(this))return cache.get(this);var t=this.root.getAlpha().polynomial;if(t.getDegree()/t.getGCDOfTermDegrees()<10&&LazyPolynomialRoot._isSimpleForUpgrade(this.root.getAlphaExpression(),new Expression.Symbol(""))){var n=toRadicalExpression(this.root);if(n!=null)return cache.set(this,n),n}cache.set(this,null)};ExpressionPolynomialRoot.prototype.getPrecedence=function(){{var t=this._toRadicalExpression();if(t!=null)return t.getPrecedence()}return 1e3};ExpressionPolynomialRoot.prototype.isRightToLeftAssociative=function(){return!0};ExpressionPolynomialRoot.prototype.isUnaryPlusMinus=function(){return!0};ExpressionPolynomialRoot.prototype._calc=function(t){return new ExpressionPolynomialRoot(this.root._calc(t))};Expression.ExpressionPolynomialRoot=ExpressionPolynomialRoot;Expression.toPolynomialRoot=function(t){var n=t instanceof Expression.NthRoot?t.a:t,a=t instanceof Expression.NthRoot?t.n:1,s=new Expression.Symbol("x");if(!(n.getDenominator()instanceof Expression.Integer))throw new TypeError;var l=Polynomial$1.toPolynomial(Expression.getConjugateExpression(s._pow(a).subtract(n).getNumerator()),s);if(l.getDegree()<=8){var u=l.factorize();if(u!=null&&u.getDegree()<l.getDegree()&&u.getDegree()===4){var c=Polynomial$1.polynomialGCD(u,Polynomial$1.toPolynomial(s._pow(a).subtract(n),s)).getroots();for(const ar of c)if(ar._pow(a).equals(n))return Expression._isPositive(ar)||a%2!==0?ar:ar.negate()}}for(;l.getDegree()>0;){var u=l.factorize()||l;const en=a===2&&Expression.has(t.radicand,Expression.Complex);var d=u.getZeros(en);if(a%2===0&&d.length===2&&Expression._isPositive(d[1])&&Expression._isPositive(n))return d[1];for(var Ct of d)if((Ct.root!=null&&Expression._isPositive(Ct)||en&&Expression._isPositive(Expression.getComplexNumberParts(Ct).real))&&Ct._pow(a).equals(n))return Ct;l=l.divideAndRemainder(u,"throw").quotient}console.error(t.toString())};Polynomial$1.prototype.signVariations=function(){let t=0,n=0;for(let a=this.a.size-1;a>=0;a-=1){const s=this.a.coefficient(a).sign();s!==0&&(n===0?n=s:n!==s&&(n=s,t+=1))}return t};Polynomial$1.prototype._getNonNegativeRealRootIntervals=function(){const t=this.getPositiveRealRootsBound();if(t.equals(Expression.ZERO))return[];const n=this._scaleRoots(t.inverse()),a=(this.getCoefficient(0).equals(Expression.ZERO)?1:0)+this.signVariations(),s=function(l,u,c){const d=c.getCoefficient(0).equals(Expression.ZERO),ar=(d?c.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient:c)._exponentiateRoots(-1)._translateRoots(Expression.ONE.negate());let en=ar.signVariations();if(en===1&&d){en=NaN;//!?
}if(en===0&&d)return[{a:l,b:l}];if(en===1&&ar.getCoefficient(0).equals(Expression.ZERO)){en=NaN;//!?
}if(en===1)return[{a:l,b:u}];if(en!==0){var tn=c._scaleRoots(Expression.TWO),on=l.add(u).divide(Expression.TWO),cn=s(l,on,tn);if(cn.length>=a){return cn;//!
}var dn=tn._translateRoots(Expression.ONE.negate()),Cn=s(on,u,dn);return cn.concat(Cn)}return[]};return s(Expression.ZERO,Expression.ONE,n).map(l=>({a:l.a.multiply(t),b:l.b.multiply(t)}))};Polynomial$1.prototype.getRootIntervals=function(){return this._scaleRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().map(t=>({a:t.b.negate(),b:t.a.negate()})).reverse().concat(this._getNonNegativeRealRootIntervals())};Polynomial$1.prototype.getPositiveRealRootsBound=function(){let t=null;const n=this.getDegree(),a=this.getLeadingCoefficient();for(let s=0;s<=this.getDegree()-1;s+=1){const l=this.getCoefficient(s).negate().truncatingDivide(a);if(l.sign()>=0){const u=Expression.TWO.multiply(l._integerNthRoot(n-s).add(Expression.ONE));(t==null||t.compareTo(u)<0)&&(t=u)}}if(t==null)return Expression.ZERO;//!2020-12-19
t=Expression.TWO._pow(t.getNumerator().bitLength()-t.getDenominator().bitLength()+1);//!
return t};Polynomial$1.prototype.getZero=function(t,n){var a=function(sx,ux){return ux.compareTo(Expression.ZERO)<0&&(sx=sx.negate(),ux=ux.negate()),sx.compareTo(Expression.ZERO)>=0?sx.truncatingDivide(ux):sx.add(Expression.ONE).truncatingDivide(ux).subtract(Expression.ONE)},s=function(sx,ux){var cx=sx.getNumerator().multiply(ux),hx=sx.getDenominator();return a(cx,hx)};const l=function(sx){return Math.sign(sx.getNumerator().compareTo(Expression.ZERO))},u=Expression.TWO,c=Expression.pow(u,n);if(!(c instanceof Expression.Integer))throw new RangeError("epsilon^-1 is not an integer");var d=t.a,Ct=t.b;if(c.multiply(d.getDenominator().multiply(Ct.getNumerator()).subtract(Ct.getDenominator().multiply(d.getNumerator()))).compareTo(Ct.getDenominator().multiply(d.getDenominator()))>0){var ar=n>=16/Math.log10(u.toNumber())?this.getZero(t,Math.floor(n/4)):t;d=ar.a,Ct=ar.b,this.getDegree();var en=this._scaleRoots(c);en=en.primitivePart();const sx=s(d,c).add(Expression.ONE),ux=s(Ct,c);console.assert(sx.multiply(d.getDenominator()).subtract(d.getNumerator().multiply(c)).compareTo(Expression.ZERO)>=0),console.assert(ux.multiply(Ct.getDenominator()).subtract(Ct.getNumerator().multiply(c)).compareTo(Expression.ZERO)<=0);let cx=en.calcAt(sx),hx=en.calcAt(ux);const gx=l(hx),fx=l(cx);if(fx===0)return{a:sx.divide(c),b:sx.divide(c)};if(gx===0)return{a:ux.divide(c),b:ux.divide(c)};if(fx===gx){if(fx!==(l(this.calcAt(d))||l(this.calcAt(Ct).negate())||fx))return{a:d,b:sx.divide(c)};if(gx!==l(this.calcAt(Ct)))return{a:ux.divide(c),b:Ct};throw new RangeError}d=sx,Ct=ux;for(var tn=0,on=en.derive(),cn=Ct.subtract(d);cn.compareTo(Expression.ONE)>0;){var dn=d.add(cn.truncatingDivide(Expression.TWO));if(tn%3!==2&&cn.compareTo(d.abs())<0){var Cn=tn%3===1?d:Ct,In=Cn===d?cx:Cn===Ct?hx:void 0,ix=on.calcAt(Cn);ix.equals(Expression.ZERO)||(Cn=Cn.subtract(In.truncatingDivide(ix)),Cn.compareTo(d)<=0&&(Cn=d.add(Expression.ONE)),Cn.compareTo(Ct)>=0&&(Cn=Ct.subtract(Expression.ONE)),dn=Cn)}tn+=1;var ax=en.calcAt(dn),ox=l(ax);ox===gx?(Ct=dn,hx=ax):ox===fx?(d=dn,cx=ax):(d=dn,Ct=dn,cx=ax,hx=ax),cn=Ct.subtract(d)}d=d.divide(c),Ct=Ct.divide(c)}return{a:d,b:Ct}};Polynomial$1.prototype.hasRoot=function(t){var n=this;if(n.equals(Polynomial$1.ZERO))return!0;//!new 2021-02-20 (TODO: CHECK)
if(!n.hasIntegerCoefficients()&&n.hasComplexCoefficients())return n.map(tn=>tn instanceof Expression.Integer?tn:tn.real).hasRoot(t)&&n.map(tn=>tn instanceof Expression.Integer?Expression.ZERO:tn.imaginary).hasRoot(t);//!
if(!n.hasIntegerCoefficients()&&!n.hasComplexCoefficients()&&!n._testCoefficients(tn=>!Expression.has(tn,Expression.Complex))&&n._testCoefficients(tn=>Expression.isConstant(tn)))return n.map(tn=>Expression.getComplexNumberParts(tn).real).hasRoot(t)&&n.map(tn=>Expression.getComplexNumberParts(tn).imaginary).hasRoot(t);var a=t.polynomial,s=null;//!
if(!n.hasIntegerCoefficients()){var l=new Expression.Symbol("~"),u=n.calcAt(l),c=Expression.getMultivariatePolynomial(u);c!=null&&!c.v.equals(l)&&c.v instanceof Expression.Symbol&&(s=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(c.p.getContent(),l),a))}s==null&&(s=Polynomial$1.polynomialGCD(n,a));//!
if(s.getDegree()<1)return!1;var d=t.interval;if(!s.hasIntegerCoefficients()){var l=new Expression.Symbol("$$"),Ct=s.calcAt(l),ar=Expression.getComplexNumberParts(Ct);ar!=null&&!ar.imaginary.equals(Expression.ZERO)&&(s=Polynomial$1.toPolynomial(ar.real.subtract(ar.imaginary.multiply(Expression.I)).multiply(Ct),l).getSquareFreePolynomial())}var en=s._translateRoots(d.a.negate()).signVariations()-s._translateRoots(d.b.negate()).signVariations();return en%2===1};Polynomial$1.prototype.numberOfRoots=function(t=null){if(!this.hasIntegerCoefficients())throw new RangeError;t==null&&(t={a:this._scaleRoots(Expression.ONE.negate()).getPositiveRealRootsBound().negate(),b:this.getPositiveRealRootsBound()});var n=this;t.a.equals(Expression.ZERO)||(n=n._scaleRoots(t.a.inverse())._translateRoots(Expression.ONE.negate()),t={a:Expression.ZERO,b:t.b.divide(t.a).subtract(Expression.ONE)},t.b.getNumerator().sign()<0&&(t={a:t.a,b:t.b.negate()},n=n._scaleRoots(Expression.ONE.negate()))),console.assert(t.a.equals(Expression.ZERO));for(var a=0;n.getCoefficient(a).equals(Expression.ZERO);)a+=1;if(a>1)throw new RangeError;return a>0&&(n=n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(a),"throw").quotient),(a>0?1:0)+n._exponentiateRoots(-1)._scaleRoots(t.b)._translateRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().length};Polynomial$1.prototype.getZeros=function(t=!1){if(this.getCoefficient(0).equals(Expression.ZERO)){if(this.getLeadingCoefficient().equals(Expression.ZERO))throw new TypeError;for(var n=0;this.getCoefficient(n).equals(Expression.ZERO);)n+=1;var l=this.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n)).quotient.getZeros(t);return l.concat(new Array(n).fill(Expression.ZERO))}var a=this.getContent(),s=this.scale(a.getDenominator()).divideAndRemainder(Polynomial$1.of(a.getNumerator()),"throw").quotient,l=s.squareFreeFactors(),u=l.a0,c=l.a1;if(u.getDegree()!==0){for(var d=c.getZeros(t),Ct=u.getZeros(t),ax=[],ar=void 0,n=0;n<Ct.length;n+=1){var en=Ct[n];en!==ar&&(ax.push(en),ar=en),ax.push(en)}return d.concat(ax)}var tn=s;if(tn.getDegree()===0)return[];//!
tn=tn.scale(tn.getContent().inverse());//!
if(!s.hasIntegerCoefficients()){var on=function(Rx){if(!Rx.hasIntegerCoefficients()){var Ox=new Expression.Symbol("$$"),Px=Rx.calcAt(Ox),$x=Expression.getConjugateExpression(Px);if($x!=null&&!$x.equals(Px))return Polynomial$1.toPolynomial($x,Ox);for(var Lx=0;Lx<Rx.getDegree();Lx+=1){var $x=Rx.getCoefficient(Lx);if($x instanceof Expression.ExpressionPolynomialRoot){var zx=$x.root.upgrade().getAlpha(),qx=new Expression.Symbol("$a"),jx=Polynomial$1.toPolynomial(Rx.map(Wx=>Wx===$x?qx:Wx).calcAt(new Expression.Symbol("$$")),qx),Hx=zx.polynomial,Vx=Polynomial$1.toPolynomial(Polynomial$1.resultant(jx,Hx),new Expression.Symbol("$$")).primitivePart();return on(Vx)}}}return Rx};const Ux=on(s);if(!Ux.equals(s)){var ax=[],l=Ux.getZeros(t);console.time("checking roots");for(var n=0;n<l.length;n+=1){var en=l[n];(en instanceof ExpressionPolynomialRoot&&en.root.getAlphaExpression().equals(new Expression.Symbol(""))?s.hasRoot(en.root.getAlpha()):en instanceof ExpressionWithPolynomialRoot&&en.e===en.root?s.hasRoot(en.root):(en instanceof ExpressionWithPolynomialRoot?en._calc(s):s.calcAt(en)).equals(Expression.ZERO))?ax.push(en):console.debug(en.root)}return console.timeEnd("checking roots"),ax}//!new
var cn=Polynomial$1.of(Expression.ONE).shift(s.getDegree()).subtract(Polynomial$1.of(s.getLeadingCoefficient())).getroots();if(cn.length!==0){cn=cn[0];var dn=s.getCoefficient(s.getDegree()-1).divide(cn._pow(s.getDegree()-1)).subtract(Expression.ZERO).divide(Expression.Integer.fromNumber(s.getDegree())),Cn=new Expression.Symbol("$$"),In=Polynomial$1.toPolynomial(tn.calcAt(Cn.subtract(dn).divide(cn)).getNumerator(),Cn);if(In.hasIntegerCoefficients())return In.getZeros(t).map(function(Rx){return Rx.subtract(dn).divide(cn)})}//!
return console.debug("not all roots were found!!!"),[]}//!new
tn.getDegree();//!
for(var ix=tn.getRootIntervals(),ax=new Array(ix.length),n=0;n<ix.length;n+=1){var en=tn.getZero(ix[n],0);if(en.a.equals(en.b))ax[n]=en.a;else{//! p, not f, as f may have roots with multiplicity > 1
{const Ox=ExpressionPolynomialRoot.create(tn,en,{skipFactorization:!0});ax[n]=Ox}}}//!new
if(ix.length!==tn.getDegree()&&t){//!new
if(tn.getDegree()>=4){var ox=tn.factorize();if(ox!=null)return ox.getZeros(t).concat(tn.divideAndRemainder(ox,"throw").quotient.getZeros(t))}//!
if(tn.isEven()){const Px=tn._exponentiateRoots(2).getZeros(t);for(var en of Px){var sx=function(Lx){var nE=Expression.getComplexNumberParts(Lx),zx=nE.real,qx=nE.imaginary,jx=zx._pow(2).add(qx._pow(2)).squareRoot(),Hx=zx.add(jx).divide(Expression.TWO).squareRoot(),Vx=qx.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate(),nE=zx.negate().add(jx).divide(Expression.TWO),Wx=Vx.multiply(nE.squareRoot());return Hx.add(Wx.multiply(Expression.I))};if(!Expression._isPositive(en)){var ux=sx(en.e!=null?en.upgrade():en);ax.push(ux),ax.push(ux.negate())}}return ax}var cx=tn.calcAt(new Expression.Symbol("a").add(new Expression.Symbol("b").multiply(Expression.I))),hx=Expression.getComplexNumberParts(cx);const Ux=hx.real,Rx=hx.imaginary.divide(new Expression.Symbol("b")),Ox=function(Px){var $x=Px.squareFreeFactors();if($x.a0.getDegree()!==0)return Ox($x.a0).concat(Ox($x.a1));var Lx=Px.factorize();if(Lx!=null){var $x=Ox(Lx),zx=Px.divideAndRemainder(Lx,"throw").quotient;return zx._getNonNegativeRealRootIntervals().length===0?$x:$x.concat(Ox(zx))}return Px.getZeros(!1)};//!TODO: 
//!new 2021-01-03
if(ax.length<tn.getDegree()){var gx=function(Px,$x){var Lx=Polynomial$1.toPolynomial(Ux,new Expression.Symbol(Px)),zx=Polynomial$1.toPolynomial(Rx,new Expression.Symbol(Px));return Polynomial$1.toPolynomial(Polynomial$1.resultant(Lx,zx),new Expression.Symbol($x)).primitivePart()},fx=Ox(gx("a","b"));fx=fx.filter(Px=>Expression._isPositive(Px));//!?
fx=fx.map(Px=>Px instanceof ExpressionWithPolynomialRoot&&Px.root.polynomial.getDegree()/Px.root.polynomial.getGCDOfTermDegrees()<=2?Px.upgrade():Px);//!new
{var dx=Polynomial$1.toPolynomial(Ux,new Expression.Symbol("a")).map(Px=>Polynomial$1.toPolynomial(Px,new Expression.Symbol("b"))),mx=Polynomial$1.toPolynomial(Rx,new Expression.Symbol("a")).map(Px=>Polynomial$1.toPolynomial(Px,new Expression.Symbol("b"))),vx=void 0,bx=Polynomial$1.ZERO;for(var xx of fx){var _x=null;if((!(xx instanceof ExpressionWithPolynomialRoot)||!xx.e.equals(xx.root))&&(!(xx instanceof ExpressionPolynomialRoot)||!xx.root.getAlphaExpression().equals(new Expression.Symbol("")))){var Ex=dx.map($x=>$x.calcAt(xx)),Tx=mx.map($x=>$x.calcAt(xx));_x=Polynomial$1.polynomialGCD(Ex,Tx)}else{const $x=(xx instanceof ExpressionPolynomialRoot?xx.root.upgrade().getAlpha():xx.root).polynomial;bx.equals($x)||(vx=polynomialGCDModuloPolynomial(dx,mx,$x),vx=vx.map(Lx=>Lx.polynomial),bx=$x),_x=vx.map(Lx=>xx._calc(Lx))}if(_x.getDegree()>=3){console.log("g!!!",_x.toString());var Cx=this;window.setTimeout(function(){throw new TypeError("good test: "+Cx.toString())},0)}const Px=function($x){var Lx=$x.getCoefficient(1).divide($x.getCoefficient(2)),zx=$x.getCoefficient(0).divide($x.getCoefficient(2)),qx=Lx.divide(Expression.TWO).negate(),jx=qx._pow(2).subtract(zx).squareRoot(),Hx=qx.subtract(jx),Vx=qx.add(jx);return[Hx,Vx]};if(_x.getDegree()<=2){const $x=_x.getDegree()===2?Px(_x):_x.getroots();for(var Mx of $x)if(!Expression.has(Mx,Expression.Complex)){var Ax=Mx.add(xx.multiply(Expression.I));ax.push(Ax),ax.push(Ax.complexConjugate())}}}}if(ax.length<tn.getDegree()){ax=ax.filter(Px=>Expression.isReal(Px));var Nx=Ox(gx("b","a"));//!
for(var Mx of Nx)for(var xx of fx){var Ax=Mx.add(xx.multiply(Expression.I));tn.calcAt(Ax).equals(Expression.ZERO)&&(ax.push(Ax),ax.push(Ax.complexConjugate()))}}}}//!
return ax};function pseudoRemainderSequence(t,n,a="primitive",s=!1){Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees())>1&&console.error("g > 1");let u=!0,c=Expression.ONE;var d={next:function(){if(console.assert(t.getDegree()>=n.getDegree()),!n.equals(Polynomial$1.ZERO)){const Ct=t.getDegree()-n.getDegree(),ar=n.getLeadingCoefficient()._pow(Ct+1),en=t.scale(s?ar.abs():ar).divideAndRemainder(n,n._hasIntegerLikeCoefficients()?"throw":void 0),tn=en.quotient,on=en.remainder;let cn=Expression.ONE;if(a==="trivial")cn=Expression.ONE;else if(a==="primitive")cn=on.getContent();else if(a==="subresultant")cn=u?Expression.ONE:t.getLeadingCoefficient().multiply(c._pow(Ct)),u=!1,c=Ct===0?c:n.getLeadingCoefficient()._pow(Ct).divide(c._pow(Ct).divide(c));else throw new RangeError(a);const dn=on.map(In=>In.divide(s?cn.abs().negate():cn)),Cn={R:dn,q:tn,:cn};return t=n,n=dn,{value:Cn,done:!1}}return{value:void 0,done:!0}}};return d[globalThis.Symbol.iterator]=function(){return this},d}Polynomial$1._pseudoRemainderSequence=pseudoRemainderSequence;Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence=function(t,n){function a(In,ix){if(In.getLeadingCoefficient()instanceof Expression.Polynomial||ix.getLeadingCoefficient()instanceof Expression.Polynomial)return{variables:[],A:In,B:ix};for(var ax={},ox=[],sx=function(hx){for(var gx of hx.summands())for(var fx of gx.factors())fx instanceof Expression.Exponentiation&&(fx=fx.a),fx instanceof Expression.Symbol&&Object.getPrototypeOf(fx)===Expression.Symbol.prototype&&ax[fx.symbol]==null&&(ox.push(fx),ax[fx.symbol]=!0)},ux=0;ux<In.a.size;ux+=1)sx(In.a.coefficient(ux));for(var ux=0;ux<ix.a.size;ux+=1)sx(ix.a.coefficient(ux));var cx=function(hx,gx){if(gx===ox.length)return console.assert(hx.hasIntegerCoefficients()),hx;var fx=ox[gx];return hx.map(dx=>new Expression.Polynomial(cx(Polynomial$1.toPolynomial(dx,fx),gx+1)))};return{variables:ox,A:cx(In,0),B:cx(ix,0)}}function s(In,ix){if(ix.equals(Expression.ZERO)){return ix;//!?
}return In.length===0?ix:ix.polynomial.map(ax=>s(In.slice(1),ax)).calcAt(In[0])}if(t.getDegree()===Polynomial$1.ZERO.getDegree()||n.getDegree()===Polynomial$1.ZERO.getDegree())return Expression.ZERO;var l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(l>1){var u=Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t._exponentiateRoots(l),n._exponentiateRoots(l));return u._pow(l)}var c=a(t,n);t=c.A,n=c.B;var d=t,Ct=n,ar=Date.now(),en=1;if(t.getDegree()<n.getDegree()){const In=t;t=n,n=In,en*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}const tn=[];for(var u of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var on=u.R,cn=u.;if(n.getDegree()>0)if(on.getDegree()<0){for(;tn.length>0;)tn.pop();tn.push({base:Expression.ZERO,exponent:1})}else{if(!cn.equals(Expression.ONE))if(tn.length>0){const ix=tn.pop();tn.push({base:ix.base,exponent:ix.exponent+2*n.getDegree()}),tn.push({base:cn.divide(ix.base._pow(2)),exponent:n.getDegree()})}else tn.push({base:cn,exponent:n.getDegree()});tn.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()-on.getDegree()-n.getDegree()*(t.getDegree()-n.getDegree()+1)}),en*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}else console.assert(n.getDegree()===0&&on.getDegree()<0),tn.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()});t=n,n=on}let dn=en===-1?Expression.ONE.negate():Expression.ONE;for(const In of tn)In.exponent<0?dn=dn.divide(In.base._pow(-In.exponent)):In.exponent>0&&(dn=dn.multiply(In.base._pow(In.exponent)));var Cn=Date.now();return Cn-ar>250&&console.log(Cn-ar,d.toString(),Ct.toString()),dn=s(c.variables,dn),dn};Expression._FIELD={ONE:Expression.ONE,sub:function(t,n){return t.subtract(n)},mul:function(t,n){return t.multiply(n)},div:function(t,n){return t.divide(n)},scale:function(t,n){return t.multiply(Expression.Integer.fromBigInt(n))}};Polynomial$1.resultant=function(t,n){return Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t,n)};function GramSchmidtOrthogonalization$1(t){for(var n=Matrix$1.fromVectors(t).transpose(),a=n,s=a.multiply(a.conjugateTranspose()).augment(a).toRowEchelon(Matrix$1.Gauss,"row-reduction").matrix,l=s.slice(0,s.rows(),a.rows(),s.cols()),u=new Array(l.rows()),c=0;c<l.rows();c+=1)u[c]=l.row(c);return u}globalThis.GramSchmidtOrthogonalization=GramSchmidtOrthogonalization$1;Expression.Complex.prototype.abs=function(){return this.multiply(this.conjugate()).squareRoot()};Expression.Division.prototype.abs=function(){return this.getNumerator().abs().divide(this.getDenominator().abs())};Expression.prototype.abs=function(){const t=function(l){if(l instanceof Expression.Addition){for(var u of l.summands())for(var c of u.factors())if(!(c instanceof Expression.Symbol&&!(c instanceof Expression.MatrixSymbol)||c instanceof Expression.Integer))return!1;return!0}return!1},n=this;if(n instanceof Expression.Symbol&&!(n instanceof Expression.PolynomialRootSymbol)&&!(n instanceof Expression.ExpressionPolynomialRoot)&&!(n instanceof Expression.ExpressionWithPolynomialRoot))return n===Expression.PI||n===Expression.E?n:new Expression.Abs(this);if(this instanceof Expression.ComplexConjugate)return this.a.abs();if(this instanceof Expression.Multiplication)return this.a.abs().multiply(this.b.abs());if(this instanceof Expression.Abs)return this;if(this.isNegative())return this.negate().abs();if(this instanceof Expression.Exponentiation&&(this.a instanceof Expression.Symbol||t(this.a))&&this.b instanceof Expression.Integer)return this.a.multiply(this.a.complexConjugate()).multiply(this.a.pow(this.b.subtract(Expression.TWO)).abs());var a=Expression.simpleDivisor(this);if(a!=null&&!a.equals(Expression.ONE)&&!a.equals(this))return this.divide(a).divide(a)instanceof Expression.Division?a.abs().multiply(this.divide(a).abs()):new Expression.Exponentiation(a,Expression.TWO).abs().multiply(this.divide(a).divide(a).abs());if(t(this))return new Expression.Abs(this);if(t(this.complexConjugate()))return this.complexConjugate().abs();if(Expression.isConstant(this)){var s=Expression.getComplexNumberParts(this);if(!s.imaginary.equals(Expression.ZERO))return this.multiply(this.complexConjugate()).squareRoot()}return this.compareTo(Expression.ZERO)<0?this.negate():this};Expression.prototype.compareTo=function(t){if(t.equals(Expression.ZERO)){if(Expression._isPositive(this))return 1;if(Expression._isPositive(this.negate()))return-1;throw new TypeError(this.toString())}return this.subtract(t).getNumerator().compareTo(Expression.ZERO)};Expression.prototype.sign=function(){return this.compareTo(Expression.ZERO)};Expression.prototype.round=function(){return ExpressionParser.parse(toDecimalStringInternal$1(this,{fractionDigits:0}))};Polynomial$1.prototype._log2hypot=function(){let t=Expression.ZERO;for(let l=0;l<this.a.size;l+=1){const u=this.a.coefficient(l).abs();u.compareTo(t)>0&&(t=u)}const n=Math.max(t.bitLength()-970/2,0),a=Expression.TWO._pow(n);let s=0;for(let l=0;l<this.a.size;l+=1)s+=Math.pow(this.a.coefficient(l).truncatingDivide(a).toNumber(),2);return n+Math.log2(Math.sqrt(s))};Polynomial$1.prototype._log2OfBoundForCoefficientsOfFactor=function(t,n){if(t==null&&(t=this.getDegree()),t===0)return 0;n==null&&(n=this.getLeadingCoefficient().abs());var a=function(c){var d=c.bitLength();return d<=53?Math.log2(c.toNumber()):d-53+Math.log2(c.truncatingDivide(Expression.TWO._pow(d-53)).toNumber())},s=function(c){return c-Math.log2(Math.sqrt(Math.PI*Math.ceil(c/2)))},l=t,u=s(l)+(a(n.abs())-a(this.getLeadingCoefficient().abs()))+this._log2hypot();return u};Polynomial$1.prototype.isDivisibleBy=function(t){var n=void 0,a=Expression.ONE;this._hasIntegerLikeCoefficients()&&t._hasIntegerLikeCoefficients()&&(n="undefined",a=t.getContent());var s=this.scale(a).divideAndRemainder(t,n);return s!=null&&s.remainder.equals(Polynomial$1.ZERO)};function polynomialGCDModuloPolynomial(t,n,a){function s(d,Ct){var ar=d.map(tn=>new Expression.Polynomial(tn.polynomial.divideAndRemainder(Ct).remainder)),en=ar.map(tn=>tn.polynomial.getContent()).getContent().inverse();return ar.scale(new Expression.Polynomial(Polynomial$1.of(en)))}function l(d,Ct){return d.getDegree()<0?d:s(d.scale(new Expression.Polynomial(d.getLeadingCoefficient().polynomial.primitivePart().modularInverse(Ct).primitivePart())),Ct)}if(t=t.map(d=>new Expression.Polynomial(d)),n=n.map(d=>new Expression.Polynomial(d)),t.getDegree()<n.getDegree()){var u=t;t=n,n=u}if(n.getDegree()>=0&&s(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(s(t,a).map(d=>d.polynomial),s(n,a).map(d=>d.polynomial),a);for(var u of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var c=u.R;if(t=n,n=c,n.getDegree()>=0&&s(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(s(t,a).map(Ct=>Ct.polynomial),s(n,a).map(Ct=>Ct.polynomial),a)}return l(s(t,a),a)}globalThis.testables=globalThis.testables||{};globalThis.testables.polynomialGCDModuloPolynomial=polynomialGCDModuloPolynomial;Expression.getSolutionSet=function t(n){var a=n.augment(Matrix$1.Zero(n.cols(),1)),s=a.toRowEchelon(Matrix$1.GaussMontante,"solving",void 0),l=Matrix$1.solveByGaussNext(s.matrix),u=Matrix$1.getSolutionSet(l).basisVectors;return u};Expression.getFormaDeJordan=function(t,n,a){function s(vx){for(var bx=0,xx=Matrix$1.Zero(en,en),_x=0;_x<vx.length;_x+=1){var Ex=vx[_x];xx=xx.map(function(Tx,Cx,Mx){return Cx>=bx&&Cx<bx+Ex.size?Cx===Mx?Ex.eigenvalue:Cx!==bx+Ex.size-1&&Mx===Cx+1?Expression.ONE:Expression.ZERO:Tx}),bx+=Ex.size}return xx}function l(vx,bx){var xx=vx.multiply(bx);return xx.eql(Matrix$1.Zero(xx.rows(),1))}function u(vx,bx){return Matrix$1.fromVectors(vx.concat(bx)).rank()===vx.length+bx.length}if(arguments.length>3||arguments[2]!==!0&&arguments[2]!==void 0)throw new TypeError;var c=Expression.unique(n);//!TODO: remove
if(c.length===t.rows()){var d=Expression.getEigenvectors(t,n),Ct=Expression.diagonalize(t,n,d),dx=Ct.T,fx=Ct.L,mx=Ct.T_INVERSED;return{P:dx,J:fx,P_INVERSED:mx}}//!
for(var ar=t,en=ar.rows(),tn=[],on=[],cn=0;cn<c.length;cn+=1){for(var dn=[],Cn=c[cn],In=n.reduce((vx,bx)=>vx+(bx===Cn?1:0),0),ix=ar.subtract(Matrix$1.I(en).scale(Cn)),ax=1;ix.pow(ax).rank()>en-In;)ax+=1;for(ax+=1;--ax>=1;)for(var ox=Expression.getSolutionSet(ix.pow(ax)),sx=0;sx<ox.length;sx+=1){var ux=ox[sx];if(!l(ix.pow(ax-1),ux)){for(var cx=[],hx=ux,gx=0;gx<ax;gx+=1)cx.push(hx),hx=ix.multiply(hx).col(0);cx.reverse(),u(dn,cx)&&(tn=tn.concat(cx),dn=dn.concat(cx),on.push({size:ax,eigenvalue:Cn}))}}}var fx=s(on);if(tn.length!==en)throw new TypeError("assertion failed");var dx=Matrix$1.fromVectors(tn),mx=dx.isExact()?dx.inverse():a?null:getInverse$1(ar,n,dx);if(!a&&dx.isExact()&&ar.toString()!==dx.multiply(fx).multiply(mx).toString())throw new TypeError("assertion failed");return{P:dx,J:fx,P_INVERSED:mx}};var getInverse$1=function(t,n,a){var s=t.transpose(),l=Expression.getFormaDeJordan(s,n,!0),u=l.J,c=l.P,d=t.cols(),Ct=Matrix$1.Zero(d,d).map(function(en,tn,on){function cn(){for(var Cn=tn;Cn-1>=0&&Cn<d&&u.e(Cn-1,Cn).equals(Expression.ONE);)Cn-=1;for(var In=tn;In+1<d&&u.e(In,In+1).equals(Expression.ONE);)In+=1;return{s:Cn,e:In}}var dn=cn();return dn.s+dn.e===tn+on?Expression.ONE:Expression.ZERO}),ar=c.multiply(Ct).transpose();return Expression._unscaleInverseMatrix(ar,a)};Expression._getInverse=getInverse$1;globalThis.factorsMap=new Map;Expression.getPolynomialRootsWithSteps=function(t,n){var a=t.getroots(n);//!2018-05-28
//!2018-07-11
var s=[];if(typeof t.getZeros=="function"&&a.length!==t.getDegree()){for(var l=Polynomial$1.of(Expression.ONE),u=0;u<a.length;u+=1)l=l.multiply(Polynomial$1.of(a[u].negate(),Expression.ONE));var c=t.divideAndRemainder(l).quotient;globalThis.factorsMap=new Map;const ar=function(en){var tn=en.primitivePart();if(!tn.hasIntegerCoefficients())return en.getZeros(!0);en=tn;var on=en.squareFreeFactors(),cn=on.a0,dn=on.a1;if(cn.getDegree()!==0){for(var Cn=ar(dn),In=ar(cn),ix=[],ax=void 0,ox=0;ox<In.length;ox+=1){var sx=In[ox];sx!==ax&&(ix.push(sx),ax=sx),ix.push(sx)}return Cn.concat(ix)}var ux=en.factorize();if(ux==null&&(ux=en),!ux.equals(en))return ar(ux).concat(ar(en.divideAndRemainder(ux,"throw").quotient));const cx=ux.getZeros(!0);for(const hx of cx)globalThis.factorsMap.set(hx,ux);return cx};s=ar(c),n!=null&&s.length===c.getDegree()&&n({content:Expression.ONE,roots:a.concat(s),newPolynomial:Polynomial$1.of(t.getLeadingCoefficient()),type:"realRootIsolationAndNewton'sMethod"})}//!
for(var u=0;u<a.length;u+=1)for(var d=a[u],Ct=0;Ct<a.length;Ct+=1)a[Ct].equals(d)&&(a[Ct]=d);return a.concat(s)};Expression.getEigenvalues=function(t,n){if(!t.isSquare())throw new RangeError("NonSquareMatrixException");var a=function(Ct){var ar=Expression.ZERO,en=Expression.ONE;return Ct.map(function(tn){return Expression.isScalar(tn)&&(ar=ar.gcd(tn.getNumerator()),en=en.lcm(tn.getDenominator())),Expression.ZERO}),ar.divide(en)},s=Expression.ONE,l=Expression.ONE;n==null&&(s=a(t),s.equals(Expression.ZERO)?s=Expression.ONE:(l=s.inverse(),t=t.scale(l)));var u=t.map(function(Ct,ar,en){var tn=ar===en?Polynomial$1.of(Ct,Expression.ONE.negate()):Ct.equals(Expression.ZERO)?Polynomial$1.ZERO:Polynomial$1.of(Ct);return new Expression.Polynomial(tn)}).determinant();u=u.polynomial,u=u._scaleRoots(s),u=u.scale(s._pow(t.cols()));//!new (sin/cos)
u=u.map(function(Ct){return Ct.simplifyExpression()});var c=u;//!TODO: fix
n?.(c),console.time("p3");var d=Expression.getPolynomialRootsWithSteps(c,n);return console.timeEnd("p3"),d};Expression.isRational=function(t){return t instanceof Expression.Integer||t instanceof Expression.BinaryOperation&&Expression.isRational(t.a)&&Expression.isRational(t.b)};Expression.isRationalMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isRational(t.e(n,a)))return!1;return!0};Expression.getEigenvectors=function(t,n,a=!1){n==null&&(n=Expression.getEigenvalues(t));const s=new Array(n.length).fill(null),l=Expression.unique(n),u=function(cn,dn){for(var Cn=0,In=0;In<n.length&&Cn<dn.length;In+=1)n[In]===cn&&(s[In]=dn[Cn],Cn+=1);if(Cn<dn.length)throw new TypeError("wrong eigenvalues argument: the eigenvalue should appear multiple times")};if(!a&&t.isSquare()&&Expression.isRationalMatrix(t)){const cn=new Map;for(const dn of l){const Cn=globalThis.factorsMap.get(dn);if(Cn==null||Cn.getDegree()<=1){const In=Expression.getEigenvectors(t,n.filter(ix=>ix===dn),!0);u(dn,In)}else{var c=cn.get(Cn);if(c==null){const ix=SomePolynomialRoot.create(Cn);c=Expression.getEigenvectors(t,n.filter(ax=>ax===dn).map(ax=>ix),!0),cn.set(Cn,c)}var d=[];d.push(Expression.ONE);const In=function(ix){return ix instanceof SomePolynomialRoot?ix.calcAt(dn,d):ix};u(dn,c.map(ix=>new Matrix$1.Vector(ix.elements.map(ax=>In(ax)))))}}return s}var Ct=function(cn){var dn=Expression.ZERO,Cn=Expression.ONE;return cn.map(function(In){return Expression.isScalar(In)&&(dn=dn.gcd(In.getNumerator()),Cn=Cn.lcm(In.getDenominator())),Expression.ZERO}),dn.divide(Cn)},ar=Expression.ONE,en=Expression.ONE;ar=Ct(t),ar.equals(Expression.ZERO)&&(ar=Expression.ONE),en=ar.inverse();for(var tn=0;tn<l.length;tn+=1){const cn=l[tn];var on=t.cols(),c=Expression.getSolutionSet(t.scale(en).subtract(Matrix$1.I(on).scale(cn.multiply(en))));u(cn,c);let Cn=null;if(tn+1<l.length)try{Cn=cn.complexConjugate()}catch(In){console.error(In)}if(tn+1<l.length&&Cn!=null&&Cn.equals(l[tn+1])&&t.eql(t.map(In=>In.complexConjugate()))){const In=function(ix){return new Matrix$1.Vector(ix.elements.map(ax=>ax.complexConjugate()))};u(l[tn+1],c.map(ix=>In(ix))),tn+=1}}return s};var getInverse=function(t,n,a){var s=t.transpose(),l=Expression.getEigenvectors(s,n),u=Matrix$1.fromVectors(l).transpose();return _unscaleInverseMatrix(u,a)},_unscaleInverseMatrix=function(t,n){var a=function(u,c){var d=u.rows();return Matrix$1.Zero(d,d).map(function(Ct,ar,en){if(ar!==en)return Expression.ZERO;for(var tn=d,on=-1;++on<tn;){var cn=u.e(ar,on).multiply(c.e(on,en));Ct=on===0?cn:Ct.add(cn)}return Ct})},s=a(t,n),l=s.map(function(u,c,d){return c===d?u.inverse():Expression.ZERO});return l.multiply(t)};Expression._unscaleInverseMatrix=_unscaleInverseMatrix;Expression.diagonalize=function(t,n,a){if(arguments.length>3)throw new TypeError;if(!t.isSquare())throw new RangeError("NonSquareMatrixException");if(n.length!==t.cols())throw new RangeError;if(a.filter(d=>d!=null).length!==t.cols())throw new RangeError;//!!!
var s=Matrix$1.I(t.cols()).map(function(d,Ct,ar){return Ct===ar?n[Ct]:Expression.ZERO}),l=Matrix$1.fromVectors(a),u=function(){return n.map(d=>!Expression.has(d,Expression.Exponentiation)).reduce((d,Ct)=>d||Ct)},c=l.isExact()&&u()?l.inverse():getInverse(t,n,l);return{T:l,L:s,T_INVERSED:c}};Expression.LUDecomposition=function(t){for(var n=t.rows(),a=t,s=Matrix$1.I(n),l=Matrix$1.I(n),u=!1,c=0,d=0;d<t.cols();d+=1)if(c<n){var Ct=c;if(a.e(c,d).equals(Expression.ZERO)){for(var ar=c+1;ar<n&&Ct===c;ar+=1)a.e(ar,d).equals(Expression.ZERO)||(Ct=ar);if(Ct!==c){var en=Matrix$1.I(n);en=en.map(function(on,cn,dn){return cn===c?en.e(Ct,dn):cn===Ct?en.e(c,dn):on}),a=en.multiply(a),s=en.multiply(s.subtract(Matrix$1.I(n))).add(Matrix$1.I(n)),l=en.multiply(l),u=!0}}if(!a.e(c,d).equals(Expression.ZERO)){var tn=Matrix$1.I(n).map(function(on,cn,dn){return dn===c&&cn>=c+1?a.e(cn,d).divide(a.e(c,d)).negate():on});a=tn.multiply(a),s=s.multiply(tn),c+=1}}return s=s.map(function(on,cn,dn){return cn===dn?on:on.negate()}),{swapFlag:u,P:new Expression.Matrix(l),A:new Expression.Matrix(t),L:new Expression.Matrix(s),U:new Expression.Matrix(a)}};Expression.isReal=function(t){var n=function(a){return a instanceof Expression.Integer?!0:a instanceof Expression.NthRoot?n(a.a):a instanceof Expression.BinaryOperation&&n(a.a)&&n(a.b)||a===Expression.E||a===Expression.PI?!0:a instanceof Expression.Function?n(a.a):a instanceof Expression.PolynomialRootSymbol?!0:a instanceof Expression.ExpressionWithPolynomialRoot?n(a.e):!!(a instanceof Expression.ExpressionPolynomialRoot||!(a instanceof Expression.Symbol)&&!(a instanceof Expression.Exponentiation)&&a.complexConjugate().equals(a))};return n(t)};Expression.isRealMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isReal(t.e(n,a)))return!1;return!0};Expression.CholeskyDecomposition=function(t){var n=t;if(!n.isSquare())throw new RangeError("NonSquareMatrixException");for(var a=n.rows(),s=Expression.isRealMatrix(n),l=0;l<a;l+=1)for(var u=l;u<a;u+=1)if(!n.e(l,u).equals(n.e(u,l).complexConjugate()))throw s?new RangeError("NonSymmetricMatrixException"):new RangeError("NonHermitianMatrixException");for(var c=new Array(a),l=0;l<a;l+=1){c[l]=new Array(a);for(var u=0;u<a;u+=1)c[l][u]=Expression.ZERO}for(var u=0;u<a;u+=1)for(var l=u;l<a;l+=1){var d=null;if(u===l){for(var Ct=null,ar=0;ar<u;ar+=1){var en=c[u][ar].multiply(c[u][ar].complexConjugate());Ct=Ct==null?en:Ct.add(en)}var tn=Ct==null?n.e(u,u):n.e(u,u).subtract(Ct);if(!Expression._isPositive(tn))throw new RangeError("NonPositiveDefiniteMatrix");d=tn.squareRoot()}else{for(var Ct=null,ar=0;ar<u;ar+=1){var tn=c[l][ar].multiply(c[u][ar].complexConjugate());Ct=Ct==null?tn:Ct.add(tn)}d=(Ct==null?n.e(l,u):n.e(l,u).subtract(Ct)).divide(c[u][u])}c[l][u]=d,console.log("l_%d%d = %s",l+1,u+1,c[l][u].toString())}return{L:Matrix$1.padRows(c,null)}};Matrix$1.prototype.conjugateTranspose=function(){return this.transpose().map(t=>t.complexConjugate())};Matrix$1.fromVectors=function(t){if(t.length===0)throw new RangeError;for(var n=t[0].dimensions(),a=0;a<t.length;a+=1)if(t[a].dimensions()!==n)throw new RangeError;return Matrix$1.Zero(n,t.length).map((s,l,u)=>t[u].e(l))};Expression.SVD=function(t){var n=function(sx,ux){return ux.length>1&&(ux=GramSchmidtOrthogonalization(ux)),ux.map(cx=>cx.toUnitVector())},a=t.conjugateTranspose().multiply(t),s=Expression.getEigenvalues(a);//!
var l=Expression.unique(s),u=l.map(sx=>sx instanceof Expression.ExpressionWithPolynomialRoot||sx instanceof Expression.ExpressionPolynomialRoot?sx.upgrade():sx);s=s.map(sx=>u[l.indexOf(sx)]);//!
s=s.slice(0).reverse().sort(function(sx,ux){var cx=sx.subtract(ux);return Expression.isReal(cx)?Expression._isPositive(cx.negate())?1:-1:NaN});var c=[],d=[];const Ct=Expression.unique(s);var ar=Expression.getEigenvectors(a,s);for(var en of Ct){var tn=ar.filter((sx,ux)=>s[ux]===en);c=c.concat(n(a,tn));var on=en.squareRoot(),cn=c.length-d.length;d=d.concat(new Array(cn).fill(on))}var dn=Matrix$1.Zero(t.rows(),t.cols()).map((sx,ux,cx)=>ux===cx&&ux<d.length?d[ux]:Expression.ZERO);console.time("U");for(var Cn=[],In=0;In<dn.rows()&&In<dn.cols()&&!dn.e(In,In).equals(Expression.ZERO);In+=1){var ix=t.multiply(c[In]).col(0).scale(dn.e(In,In).inverse());Cn.push(ix)}if(Cn.length<t.rows()){console.time("U1");var ax=t.multiply(t.conjugateTranspose()),ar=Expression.getEigenvectors(ax,new Array(t.rows()).fill(Expression.ZERO),!0).filter(ux=>ux!=null),ox=n(ax,ar);console.timeEnd("U1"),console.assert(Cn.length+ox.length===t.rows()),Cn=Cn.concat(ox)}return console.timeEnd("U"),Cn=Matrix$1.fromVectors(Cn),c=Matrix$1.fromVectors(c),{U:Cn,Sigma:dn,Vstar:c.conjugateTranspose()}};Expression.QRDecomposition=function(t){for(var n=t,a=new Array(n.cols()),s=0;s<n.cols();s+=1)a[s]=n.col(s);var l=GramSchmidtOrthogonalization(a).filter(d=>!d.eql(Matrix$1.Vector.Zero(d.dimensions()))),u=Matrix$1.fromVectors(l.map(d=>d.toUnitVector())),c=u.conjugateTranspose().multiply(n);return console.log(u),{Q:u,R:c}};function Condition$1(t){Object.freeze(t),this.array=t}Condition$1.NEZ=" != 0";Condition$1.EQZ=" == 0";Condition$1.GTZ=" > 0";Condition$1.prototype._and=function(t,n){if(t!==Condition$1.NEZ&&t!==Condition$1.EQZ&&t!==Condition$1.GTZ)throw new TypeError;if(n==null)throw new RangeError;if(this===Condition$1.FALSE)return this;var a=function(Ct,ar,en){for(var tn=0;tn<Ct.length;tn+=1)if(Ct[tn].operator===ar&&Ct[tn].expression.equals(en))return!0;return!1};if(n instanceof Expression.GF2Value)return this._and(t,n.value===0?Expression.ZERO:Expression.ONE);var s=function(Ct,ar){if(a(Ct,ar.operator,ar.expression)){//!TODO: it should work even without this (?)
return Ct}if(a(Ct,ar.operator===Condition$1.EQZ?Condition$1.NEZ:Condition$1.EQZ,ar.expression))return null;var en=ar.expression;//!
//!new 2019-12-15:
//!substitute:  x = 0, sin(x) != 0
(Expression.has(en,Expression.Sin)||Expression.has(en,Expression.Cos)||Expression.has(en,Expression.Exponentiation)||Expression.has(en,Expression.Arctan)||Expression.has(en,Expression.Logarithm)||Expression.has(en,Expression.Abs))&&Ct.length>0&&(en=Expression._map(function(Wx){if(Wx instanceof Expression.Function&&!(Wx instanceof Expression.NthRoot)||Wx instanceof Expression.Exponentiation&&(!(Wx.b instanceof Expression.Integer)||!(Wx.a instanceof Expression.Symbol))){var tE=Wx instanceof Expression.Exponentiation?Wx.b:Wx.a,lE=null,iE=null;if(tE instanceof Expression.Symbol)lE=tE,iE=Ct;else if(lE=new Expression.Symbol("arg"),iE=s(Ct,{expression:lE.subtract(tE),operator:Condition$1.EQZ}),iE==null){//! TODO: fix, should not happen
return Wx}for(var Xx=0;Xx<iE.length;Xx+=1){var CE=iE[Xx];if(CE.operator===Condition$1.EQZ){var RE=Polynomial$1.toPolynomial(CE.expression,lE);if(RE.getDegree()===1){var SE=RE.getCoefficient(0).negate().divide(RE.getCoefficient(1));if(!Expression.has(SE,Expression.Function)&&(SE.compare4Addition(lE)<0&&!(SE instanceof Expression.Division)||Expression.isConstant(SE)||Expression.isConstant(SE.divide(Expression.PI)))){if(Wx instanceof Expression.Exponentiation)return Wx.a.pow(SE);if(Wx instanceof Expression.Arctan)return SE.arctan();if(Wx instanceof Expression.Logarithm)return SE.logarithm();if(Wx instanceof Expression.Abs)return SE.abs();if(SE=Expression.isConstant(SE)&&!SE.equals(Expression.ZERO)&&!(SE instanceof Expression.Radians)&&!Expression.has(SE,Expression.Symbol)?new Expression.Radians(SE):SE,Wx instanceof Expression.Sin)return SE.sin();if(Wx instanceof Expression.Cos)return SE.cos();throw new TypeError("NotSupportedError")}}}}return Wx}return Wx},en),ar={expression:en,operator:ar.operator});//!
//!new
if(en.isNegative()&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:en.negate(),operator:ar.operator});if(en instanceof Expression.Exponentiation&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:en.a,operator:ar.operator});if(en instanceof Expression.Addition&&en.a instanceof Expression.Exponentiation&&Expression.isConstant(en.b)&&en.a.b.getDenominator()instanceof Expression.Integer&&!en.a.b.getDenominator().equals(Expression.ONE))return en.a.b.getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)&&!en.b.isNegative()?s(Ct,{expression:Expression.ONE,operator:ar.operator}):s(Ct,{expression:en.a.a.pow(en.a.b.getNumerator()).subtract(en.b.negate().pow(en.a.b.getDenominator())),operator:ar.operator});if(ar.expression instanceof Expression.Multiplication&&ar.expression.b instanceof Expression.IdentityMatrix)return s(Ct,{expression:ar.expression.a,operator:ar.operator});if(ar.expression instanceof Expression.Division){var tn=Ct;return tn=s(tn,{expression:ar.expression.a,operator:ar.operator}),tn==null?null:(tn=s(tn,{expression:ar.expression.b,operator:Condition$1.NEZ}),tn)}if(ar.expression instanceof Expression.Integer||ar.expression instanceof Expression.Complex)return ar.operator===Condition$1.NEZ&&ar.expression.equals(Expression.ZERO)||ar.operator===Condition$1.EQZ&&!ar.expression.equals(Expression.ZERO)||ar.operator===Condition$1.GTZ&&ar.expression.equals(Expression.ZERO)||ar.operator===Condition$1.GTZ&&ar.expression instanceof Expression.Integer&&ar.expression.compareTo(Expression.ZERO)<0?null:Ct;if(Expression.isConstant(ar.expression)&&!ar.expression.equals(Expression.ZERO)){if(ar.operator===Condition$1.NEZ)return Ct;if(ar.operator===Condition$1.EQZ)return null}if(ar.expression instanceof Expression.Matrix&&ar.expression.matrix.isZero()){if(ar.operator===Condition$1.EQZ)return Ct;if(ar.operator===Condition$1.NEZ)return null}if(ar.expression instanceof Expression.NthRoot)return s(Ct,{expression:ar.expression.a,operator:ar.operator});if(Expression.has(ar.expression,Expression.Abs)){if(ar.expression instanceof Expression.Abs&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:ar.expression.a,operator:ar.operator});if(ar.expression instanceof Expression.Abs&&ar.operator===Condition$1.GTZ)return Ct;if(ar.expression.negate()instanceof Expression.Abs&&ar.operator===Condition$1.GTZ)return null}if(Expression.has(ar.expression,Expression.ComplexConjugate)&&!Expression.has(ar.expression.complexConjugate(),Expression.ComplexConjugate))return s(Ct,{expression:ar.expression.complexConjugate(),operator:ar.operator});if(ar.expression instanceof Expression.Multiplication){if(ar.operator===Condition$1.EQZ&&ar.expression.a instanceof Expression.Integer&&!ar.expression.a.equals(Expression.ZERO))return ar={expression:ar.expression.b,operator:ar.operator},s(Ct,ar);if(ar.operator===Condition$1.NEZ){var tn=Ct;return tn=s(tn,{expression:ar.expression.a,operator:Condition$1.NEZ}),tn==null?null:(tn=s(tn,{expression:ar.expression.b,operator:Condition$1.NEZ}),tn)}}var Cn=Expression.getMultivariatePolynomial(ar.expression);if(Cn!=null){//!new 2018-12-24
var on=Expression.getNthRootConjugate(Cn.p.getLeadingCoefficient());if(on!=null&&Expression.isConstant(on))return s(Ct,{expression:on.multiply(ar.expression),operator:ar.operator});//!
var cn=Cn.p.getContent();if(!cn.equals(Expression.ONE)&&!cn.equals(Expression.ONE.negate())){if(ar.operator===Condition$1.NEZ){var tn=s(Ct,{expression:ar.expression.divide(cn),operator:Condition$1.NEZ});return tn==null?null:s(tn,{expression:cn,operator:Condition$1.NEZ})}for(;Cn!=null;){if(ar.operator===Condition$1.EQZ){var dn=Cn.p.getSquareFreePolynomial();if(dn.getDegree()!==Cn.p.getDegree())return s(Ct,{expression:ar.expression.divide(Cn.p.divideAndRemainder(dn).quotient.calcAt(Cn.v)),operator:Condition$1.EQZ})}cn=Cn.p.getContent(),Cn=Expression.getMultivariatePolynomial(cn)}//!new
if(Expression.isConstant(cn)&&!cn.equals(Expression.ONE)&&!cn.equals(Expression.ONE.negate()))return s(Ct,{expression:ar.expression.divide(cn),operator:Condition$1.EQZ})}if(Cn!=null&&Cn.p.getDegree()>1&&Cn.p.getCoefficient(0).equals(Expression.ZERO)&&ar.operator===Condition$1.NEZ){var tn=s(Ct,{expression:Cn.v,operator:Condition$1.NEZ});return tn==null?null:s(tn,{expression:ar.expression.divide(Cn.v),operator:Condition$1.NEZ})}}//!new 2019-12-24:
var Cn=Expression.getMultivariatePolynomial(ar.expression);if(Cn!=null&&Cn.p.getDegree()>1){var dn=Cn.p.getSquareFreePolynomial();if(dn.getDegree()!==Cn.p.getDegree()&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:dn.calcAt(Cn.v),operator:ar.operator})}//!
for(var In=function(Wx,tE,lE,iE){if(Wx==null)return null;for(var Xx=lE+1;Xx<tE.length;Xx+=1)if(Wx=s(Wx,tE[Xx]),Wx==null)return null;return iE!=null&&(Wx=s(Wx,iE)),Wx},ix=[],ax=0;ax<Ct.length;ax+=1){var ox=Ct[ax];//!new 2020-01-01:
if((Expression.has(ox.expression,Expression.Sin)||Expression.has(ox.expression,Expression.Cos))&&(Expression.has(ar.expression,Expression.Sin)||Expression.has(ar.expression,Expression.Cos))){var sx={operator:ox.operator,expression:Expression._replaceSinCos(ox.expression)},ux={operator:ar.operator,expression:Expression._replaceSinCos(ar.expression)},cx=s([],sx);if(cx==null)return null;var tn=s(cx,ux);if(tn==null)return null;if(tn.length===0)return[];if(tn.length===1)return In(ix,Ct,ax,{operator:tn[0].operator,expression:Expression._replaceBySinCos(tn[0].expression)});for(var ax=0;ax<tn.length;ax++)if(!Expression.has(tn[ax],Expression.Exponentiation)&&tn[ax].expression.gcd(ar.expression).equals(tn[ax].expression))return ix=s(ix,ox),In(ix,Ct,ax,{operator:tn[ax].operator,expression:Expression._replaceBySinCos(tn[ax].expression)})}//!
if((Expression.has(ox.expression,Expression.Function)||Expression.has(ox.expression,Expression.Exponentiation))&&!(Expression.has(ar.expression,Expression.Function)||Expression.has(ar.expression,Expression.Exponentiation)))return In(s(ix,ar),Ct,ax,ox);if((ox.operator===Condition$1.NEZ&&ar.operator===Condition$1.EQZ||ox.operator===Condition$1.EQZ&&ar.operator===Condition$1.NEZ)&&(Expression.isSingleVariablePolynomial(ox.expression.multiply(ar.expression))||!0)){for(var hx=ox.expression.polynomialGCD(ar.expression);!hx.equals(Expression.ONE)&&!hx.equals(Expression.ONE.negate());)return ox.operator===Condition$1.EQZ?ox={operator:ox.operator,expression:ox.expression.divide(hx)}:ar={operator:ar.operator,expression:ar.expression.divide(hx)},ix=s(ix,ox),ix==null?null:In(ix,Ct,ax,ar);if(ox.operator===Condition$1.EQZ&&Expression.isConstant(ox.expression)||ar.operator===Condition$1.EQZ&&Expression.isConstant(ar.expression))return null}var gx=!0,fx=Expression.isSingleVariablePolynomial(ox.expression)&&Expression.isSingleVariablePolynomial(ar.expression)&&Expression.isSingleVariablePolynomial(ox.expression.multiply(ar.expression));if(ox.operator===Condition$1.NEZ&&ar.operator===Condition$1.EQZ&&fx)ar=ar;else if(ox.operator===Condition$1.EQZ&&ar.operator===Condition$1.NEZ&&fx)ar=ox;else if(ox.operator===Condition$1.EQZ&&ar.operator===Condition$1.EQZ&&fx){var hx=ox.expression.polynomialGCD(ar.expression);return hx instanceof Expression.Integer?null:(ar={operator:ar.operator,expression:hx},In(ix,Ct,ax,ar))}else if(ox.operator===Condition$1.NEZ&&ar.operator===Condition$1.NEZ&&fx){var hx=ox.expression.gcd(ar.expression);ox={operator:ox.operator,expression:ox.expression.divide(hx)},Expression.isConstant(ox.expression)||ix.push(ox)}else{//!new 2020-16-02
var dx=function(Wx){if(Wx instanceof Expression.Multiplication&&Wx.a instanceof Expression.Matrix)return Wx.a.multiply(dx(Wx.b));var tE=Expression.getConstant(Wx);for(var lE of Wx.divide(tE).factors())lE instanceof Expression.NthRoot&&Expression.isConstant(lE.a)&&(tE=tE.multiply(lE));return tE},mx=function(Wx,tE){var lE=tE.divide(dx(tE)),iE=Expression.ZERO;for(var Xx of Wx.summands()){var CE=Xx.divide(dx(Xx));CE.equals(lE)&&(iE=iE.add(Xx))}return iE},vx=function(Wx){var tE=function(SE){return SE instanceof Expression.Exponentiation?SE.b:Expression.ONE},lE=function(SE){return SE instanceof Expression.Exponentiation?SE.a:SE},iE=function(SE){var EE=Expression.ZERO;for(var FE of SE.factors())if(!Expression.isConstant(FE)){var SE=tE(FE);EE=EE.add(SE)}return EE},Xx=function(SE,EE){var FE=iE(SE).subtract(iE(EE)),AE=FE.isNegative()?-1:FE.negate().isNegative()?1:0;if(AE!==0)return AE;for(var ZE=function(aE){return Array.from(aE.divide(Expression.getConstant(aE)).factors()).reverse().filter(eE=>!Expression.isConstant(eE)).values()},Dx=ZE(SE),kx=ZE(EE),Yx=Dx.next().value,Kx=kx.next().value;Yx!=null&&Kx!=null;){var AE=0-lE(Yx).compare4Multiplication(lE(Kx))||tE(Yx).compare4Multiplication(tE(Kx));if(AE!==0)return AE;Yx=Dx.next().value,Kx=kx.next().value}return Yx!=null?1:Kx!=null?-1:0},CE=null;for(var RE of Wx.summands())(CE==null||Xx(RE,CE)>0)&&(CE=RE);return CE};if(gx&&ox.operator===Condition$1.EQZ){var bx=vx(ox.expression),Cn=bx.divide(dx(bx))._abs();bx=mx(ox.expression,bx);var xx=ar.expression,_x=0;for(var Ex of ar.expression.summands())Ex.gcd(Cn)._abs().equals(Cn)&&(xx=xx.subtract(Ex.divide(bx).multiply(ox.expression)),_x+=1);if(_x>0)return In(s(ix,ox),Ct,ax,{expression:xx,operator:ar.operator})}if(gx&&ar.operator===Condition$1.EQZ){var bx=vx(ar.expression),Cn=bx.divide(dx(bx))._abs();bx=mx(ar.expression,bx);for(var Ex of ox.expression.summands())if(Ex.gcd(Cn)._abs().equals(Cn)){var Tx=ox.expression.subtract(Ex.divide(bx).multiply(ar.expression));return ox.operator===Condition$1.EQZ?In(s(ix,{expression:Tx,operator:ox.operator}),Ct,ax,ar):In(s(ix,ar),Ct,ax,{expression:Tx,operator:ox.operator})}}if(gx&&ox.operator===Condition$1.NEZ&&ar.operator===Condition$1.EQZ){var bx=vx(ox.expression),Cn=bx.divide(Expression.getConstant(bx));for(var Ex of ar.expression.summands())if(Ex.gcd(Cn).equals(Cn)||Ex.gcd(Cn).equals(Cn.negate())){var Cx=Ex.divide(bx);if(Cx instanceof Expression.Integer&&!Cx.equals(Expression.ZERO)){var Mx=ar.expression.subtract(Cx.multiply(ox.expression)),Ax={expression:Mx,operator:Condition$1.NEZ},Nx=!1;{//! 2020-07-05
for(var Nx=!1,Ux=0;Ux<Ct.length;Ux++){var Rx=Ct[Ux];if(Rx.operator===Condition$1.EQZ){var hx=Rx.expression.gcd(Ax.expression);!hx.equals(Expression.ONE)&&!hx.equals(Expression.ONE.negate())&&(Nx=!0)}}}if(Nx)return In(s(s(ix,ox),Ax),Ct,ax-1,ar)}}}//!
{var Cn=null,Ox=null,Px=null,$x=null,Lx=Expression.getMultivariatePolynomial(ox.expression),zx=Expression.getMultivariatePolynomial(ar.expression);if(ar.operator===Condition$1.EQZ&&zx!=null&&zx.p.getDegree()!==1){var tn=Expression.getMultivariatePolynomial(zx.p.getCoefficient(0));if(tn!=null){var qx=tn.v;qx instanceof Expression.Symbol&&tn.p.getDegree()===1&&(zx={p:Polynomial$1.toPolynomial(ar.expression,qx),v:qx})}}if(Lx!=null&&zx!=null){//!new 2019-24-12
//!?
ar.operator===Condition$1.EQZ&&zx!=null&&zx.p.getDegree()===1&&ox.operator===Condition$1.EQZ&&Lx!=null&&Lx.p.getDegree()===1&&(Expression._getReplacement(ar.expression,Lx.v).equals(Lx.v)&&Polynomial$1.toPolynomial(ar.expression,Lx.v).getDegree()===0&&(Lx=null),Expression._getReplacement(ox.expression,zx.v).equals(zx.v)&&Polynomial$1.toPolynomial(ox.expression,zx.v).getDegree()===0&&(zx=null),Lx!=null&&zx!=null&&(Lx.p.getCoefficient(1)instanceof Expression.Integer||(Lx=null),zx.p.getCoefficient(1)instanceof Expression.Integer||(zx=null)),Lx!=null&&zx!=null&&Lx.v.compare4Addition(zx.v)<0&&(Lx=null)),ar.operator===Condition$1.EQZ&&zx!=null&&zx.p.getDegree()===1&&(Px=zx,Cn=ox.expression,Ox=ox.operator,$x=ar),ox.operator===Condition$1.EQZ&&Lx!=null&&Lx.p.getDegree()===1&&(Px=Lx,Cn=ar.expression,Ox=ar.operator,$x=ox)}if(Px!=null){var jx=!1;if(jx=jx||Px.p.getDegree()===1&&Expression.isConstant(Px.p.getCoefficient(1))&&Expression.isConstant(Px.p.getCoefficient(0)),jx=jx||Px.p.getDegree()===1&&Expression.isConstant(Px.p.getCoefficient(0))&&!Px.p.getCoefficient(0).equals(Expression.ZERO)&&Expression.has(Cn,Expression.Exponentiation),jx){var Hx=Px.p.getCoefficient(0).negate().divide(Px.p.getCoefficient(1)),Ex=Expression._substitute(Cn,Px.v,Hx,{uniqueObject:1});if(Ex.equals(Cn))ix.push(ox);else{var tn={operator:Ox,expression:Ex};return ix=s(ix,tn),ix==null?null:In(ix,Ct,ax,$x)}}else ix.push(ox)}else ix.push(ox)}}}if(ix.push(ar),gx){new Condition$1(ix);for(var ax=0;ax<ix.length;ax+=1){var ar=ix[ax];if(ar.operator===Condition$1.EQZ){var Vx=ar.expression,hx=null;for(var nE of Vx.summands()){var Ex=nE.divide(Expression.getConstant(nE));hx==null?hx=Ex:hx=hx.gcd(Ex)}if(!hx.equals(Expression.ONE)&&Vx instanceof Expression.Addition&&new Condition$1(ix.slice(0,ax).concat(ix.slice(ax+1))).andZero(hx).isFalse())return s(ix,{expression:hx,operator:Condition$1.NEZ})}}}return ix};//!new 2021-10-06
if(n instanceof Expression.Division)return this._and(t,n.getNumerator()).andNotZero(n.getDenominator());var l=this;if(t===Condition$1.EQZ){const Ct=function(en){var tn=void 0;for(var on of en.summands())for(var cn of on.factors()){var dn=cn instanceof Expression.Exponentiation?cn.a:cn;dn instanceof Expression.Symbol&&(tn==null||dn.symbol<tn.symbol)&&(tn=dn)}return tn},ar=Ct(n);if(ar!=null&&Polynomial$1.of(n)._hasIntegerLikeCoefficients()){const en=Polynomial$1.toPolynomial(n,ar);for(var u of this.array)if(u.operator===Condition$1.EQZ&&Polynomial$1.of(u.expression)._hasIntegerLikeCoefficients()&&Ct(u.expression).symbol>=ar.symbol){const tn=Polynomial$1.toPolynomial(u.expression,ar);if(tn.getDegree()>=1){var c=Polynomial$1.polynomialGCD(en,tn);if(c.getDegree()===0){const on=Polynomial$1.resultant(en,tn);if(l=l.andZero(on),l.isFalse())return l}}}}}//!
var d=s(l.array,{operator:t,expression:n});return d==null?Condition$1.FALSE:d.length===0?Condition$1.TRUE:new Condition$1(d)};Condition$1.prototype.andNotZero=function(t){return this._and(Condition$1.NEZ,t)};Condition$1.prototype.andZero=function(t){return this._and(Condition$1.EQZ,t)};Condition$1.prototype.andGreaterZero=function(t){return this._and(Condition$1.GTZ,t)};Condition$1.prototype.and=function(t){if(!(t instanceof Condition$1))throw new TypeError;for(var n=this,a=0;a<t.array.length;a+=1)n=n._and(t.array[a].operator,t.array[a].expression);return n};Condition$1.prototype.isFalse=function(){return this===Condition$1.FALSE};Condition$1.prototype.isTrue=function(){return this===Condition$1.TRUE};Condition$1.prototype.toString=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1)n+=(a!==0?", ":"")+this.array[a].expression.toString(t)+this.array[a].operator;return n};Condition$1.TRUE=new Condition$1(new Array(0));Condition$1.FALSE=new Condition$1(void 0);Condition$1.prototype.getSolutionFor=function(t){var n=this;if(n.array==null)return null;for(var a=0;a<n.array.length;a+=1){var s=n.array[a];if(s.operator===Condition$1.EQZ){var l=Polynomial$1.toPolynomial(s.expression,t);if(l.getDegree()===1)return l.getroots()[0]}}return null};Condition$1.prototype.updateExpression=function(t,n){return this.andNotZero(t).isFalse()?Expression.ZERO:t};//!TODO: remove
Polynomial$1.prototype.toString=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toString(t)};Polynomial$1.prototype.toMathML=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toMathML(t)};Expression.Polynomial.prototype.toString=function(t){return this.polynomial.toString(t)};Expression.Polynomial.prototype.toMathML=function(t){return this.polynomial.toMathML(t)};var printPartOfAddition=function(t,n,a,s,l){if(a.equals(Expression.ZERO))return t&&n?Expression.ZERO.toMathML():"";var u=!1;a.isNegative()&&!n&&(u=!0,a=a.negateCarefully());var c=new Expression.Multiplication(Expression.ZERO,Expression.ZERO).getPrecedence(),d=a.getPrecedence()<c,Ct=a.equals(Expression.ONE);return(!n&&u?'<mo form="infix">&minus;</mo>':"")+(!n&&!u?'<mo form="infix">+</mo>':"")+(Ct?"":"<mrow>")+(Ct||!d?"":"<mrow><mo>(</mo>")+(Ct?"":a.toMathML(l))+(Ct||!d?"":"<mo>)</mo></mrow>")+(Ct?"":"<mo>&sdot;</mo>")+s.toMathML(l)+(Ct?"":"</mrow>")},decimalToMathML=function(t){const n=/^([+\-])?(\d+\.?\d*(?:\(\d+\)\d*)?)(?:[eE]\+?(\-?\d+))?$/.exec(t),a={sign:n[1]||"",significand:n[2]||"",exponent:n[3]||""};return(a.exponent!==""?"<mrow>":"")+(a.sign!==""?"<mrow>":"")+(a.sign==="+"?"<mo>+</mo>":"")+(a.sign==="-"?"<mo>&minus;</mo>":"")+"<mn>"+numberFormat.format(a.significand.replace(/[\(\)]/g,"")).replace(/^[\s\S]+$/g,function(s){var l=a.significand.indexOf("("),u=a.significand.lastIndexOf(")");if(l===-1||u===-1)return s;const c=numberFormat.format("0").trim().length;var d=s.length-(a.significand.length-l-1-1)*c,Ct=s.length-(a.significand.length-u-1)*c;return s.slice(0,d)+'<span style="text-decoration:overline;">'+s.slice(d,Ct)+"</span>"+s.slice(Ct)})+"</mn>"+(a.sign!==""?"</mrow>":"")+(a.exponent!==""?'<mo lspace="0" rspace="0">&sdot;</mo><msup><mn>'+numberFormat.format("10")+"</mn>"+decimalToMathML(a.exponent)+"</msup>":"")+(a.exponent!==""?"</mrow>":"")},complexToMathML=function(t,n){if(n.replace(/<[^>]+>/g,"")==="1")return"<mrow>"+t+"<mo>+</mo><mi>&ii;</mi></mrow>";if(n.replace(/<[^>]+>/g,"").replace(/&minus;/g,"-")==="-1")return"<mrow>"+t+"<mo>&minus;</mo><mi>&ii;</mi></mrow>";if(t==="")return"<mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow>";var a="+";return/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/.test(n)&&(a="-",n=n.replace(/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/g,"<mn>$1</mn>")),"<mrow>"+t+"<mo>"+(a==="-"?"&minus;":"+")+"</mo><mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow></mrow>"};Expression._decimalToMathML=decimalToMathML;Expression._complexToMathML=complexToMathML;function isConstant(t){return t instanceof Expression.NonSimplifiedExpression||t instanceof Expression.Matrix||t instanceof Expression.Polynomial?!1:Expression.isConstant(t)}var groupByTerm=function(t){if(t instanceof Expression.Division||t instanceof Expression.Addition){var n=t.getNumerator(),a=t.getDenominator(),s=a instanceof Expression.Integer?a:(Expression.getMultivariatePolynomial(a)||{p:{getContent:function(){return Expression.ONE}}}).p.getContent(),l=a.divide(s);if(isConstant(s)){var u=[];for(var c of n.summands())u.push(c);var d={};u.reverse();for(var Ct=0;Ct<u.length;Ct+=1){var c=u[Ct],ar=Expression.ONE;for(var en of c.factors())isConstant(en)&&(ar=ar.multiply(en));var tn=c.divide(ar),on="_"+tn.toString();d[on]=d[on]||{constant:Expression.ZERO,term:tn},d[on].constant=d[on].constant.add(ar.divide(s))}var cn=null;for(var on in d)if(Object.prototype.hasOwnProperty.call(d,on)){var ar=d[on].constant,tn=d[on].term,dn=!1;cn!=null&&ar.isNegative()&&(ar=ar.negate(),dn=!0);var Cn=new NonSimplifiedExpression(tn.equals(Expression.ONE)?ar:ar.equals(Expression.ONE)?d[on].term:new Expression.Multiplication(ar,d[on].term));cn=cn==null?Cn:new Expression.Addition(cn,dn?new Expression.Multiplication(Expression.ONE.negate(),Cn):Cn)}return l.equals(Expression.ONE)||(cn=new Expression.Division(cn,l)),new NonSimplifiedExpression(cn)}}},getRounding=function(t){var n=t?.rounding;return t!=null&&n==null&&t.fractionDigits!=null&&t.fractionDigits!==-1&&(console.debug("deprecated fractionDigits, use rounding instead"),n={fractionDigits:t.fractionDigits}),n};Expression.toDecimalString=function(t,n){var a=getRounding(n);if(a!=null){if(isConstant(t))return toDecimalStringInternal$1(t,a,decimalToMathML,complexToMathML);if(!Expression.has(t,NonSimplifiedExpression)){var s=groupByTerm(t);if(s!=null)return s.toMathML(n)}}};var getPrecedence=function(t,n){var a=getRounding(n);return a!=null&&isConstant(t.unwrap())&&Expression.has(t.unwrap(),Expression.Complex)&&!t.unwrap().equals(Expression.I)?new Expression.Addition(Expression.ONE,Expression.ONE).getPrecedence():t.getPrecedence()};Expression.idCounter=0;Expression.id=function(){return(Expression.idCounter+=1).toString()};Expression.escapeHTML=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Expression.defaultOptions={useMatrixContainer:!1};Expression.Matrix.prototype.toMathML=function(t){var n=this.matrix;t=Expression.setTopLevel(!0,t);var a=t.useMatrixContainer==null&&Expression.defaultOptions.useMatrixContainer?!0:t.useMatrixContainer,s=t.useBraces==null?void 0:t.useBraces,l=t.columnlines==null?0:t.columnlines,u=t.variableNames==null?void 0:t.variableNames,c=t.verticalStrike==null?-1:t.verticalStrike,d=t.horizontalStrike==null?-1:t.horizontalStrike,Ct=t.cellIdGenerator==null?void 0:t.cellIdGenerator,ar=t.pivotCell==null?void 0:t.pivotCell,en=t.isLUDecomposition2==null?void 0:t.isLUDecomposition2,tn=t.highlightRow==null?-1:t.highlightRow,on=t.highlightCol==null?-1:t.highlightCol;t=Object.assign({},t,{useBraces:void 0,columnlines:void 0,variableNames:void 0,verticalStrike:void 0,horizontalStrike:void 0,cellIdGenerator:void 0,pivotCell:void 0,isLUDecomposition2:void 0,highlightRow:void 0,highlightCol:void 0});var cn="",dn=n.rows(),Cn=n.cols(),In=-1,ix=t.idPrefix+"-"+Expression.id();a&&(cn+='<munder accentunder="true">',cn+='<mrow id="'+ix+'" data-matrix="'+Expression.escapeHTML(n.toString())+'" draggable="true" tabindex="0" contextmenu="matrix-menu">'),cn+=s==null?"<mrow><mo>(</mo>":"<mrow>"+(s[0]===" "?"":"<mo>"+s[0]+"</mo>");//! 2017-07-06 rowspacing="0ex" was added to make it look better with Native MathML (when it is supported) and to have the same style as in mathml.css
//!  rowspacing="0ex" is also needed when verticalStrike !== -1 and <menclose> is used inside
for(cn+="<mtable"+(u!=null?' columnalign="right"':"")+">";++In<dn;){var ax=-1;if(u!=null){for(var ox="",sx=!1;++ax<Cn-1;)ox+="<mtd>",ox+=printPartOfAddition(ax===Cn-2,!sx,n.e(In,ax),new Expression.Symbol(u[ax]),t),ox+="</mtd>",sx=sx||!n.e(In,ax).equals(Expression.ZERO);ox+="<mtd><mo>=</mo></mtd><mtd>"+n.e(In,Cn-1).toMathML(t)+"</mtd>",(sx||!n.e(In,Cn-1).equals(Expression.ZERO))&&(cn+="<mtr>",cn+=ox,cn+="</mtr>")}else{for(cn+="<mtr>";++ax<Cn;){var ux="",cx="";l!==0&&Cn-1>0&&(cx+=Cn+l===ax?"border-left: 1px solid;":""),ar!=null&&In===ar.i&&ax===ar.j&&(cx+="border: 1px solid; border-radius: 50%;",cx+="font-weight: bolder"),d===In&&c===ax?(cx+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto, linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5",ux="true"):(c===ax&&(cx+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto; opacity: 0.5",ux="true"),d===In&&(cx+="background: linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5;",ux="true"));var hx=Ct!=null?Ct(In,ax):"";cn+=('<mtd id="'+hx+'" aria-hidden="'+ux+'" style="'+cx+'">').replace(/\s+[a-z\-]+\=""/g,"");var gx=ax<In&&en||tn===In&&(l===0||ax<=Cn-1+l)||on===ax;gx&&(cn+='<mrow style="background: #80FF80; color: #3C78C2">'),cn+=n.e(In,ax).toMathML(t),gx&&(cn+="</mrow>"),cn+="</mtd>"}cn+="</mtr>"}}return cn+="</mtable>",cn+=s==null?"<mo>)</mo></mrow>":(s[1]===" "?"":"<mo>"+s[1]+"</mo>")+"</mrow>",a&&(cn+="</mrow>",cn+="<mtext>",cn+='<button type="button" class="matrix-menu-show" data-for-matrix="'+ix+'" aria-haspopup="true" title="'+i18n.matrixMenu.title+'"></button>',cn+="</mtext>",cn+="</munder>"),cn};Expression.Determinant.prototype.toMathML=function(t){var n=this;return n.a instanceof Expression.Matrix||n.a instanceof NonSimplifiedExpression&&n.a.e instanceof Expression.Matrix?(t=Object.assign({},t,{useBraces:["|","|"]}),n.a.toMathML(t)):Expression.Function.prototype.toMathML.call(this,t)};Expression.Transpose.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+"<mi>T</mi></msup>"};Expression.ComplexConjugate.prototype.toMathML=function(t){var n=this;return'<mover accent="true">'+n.a.toMathML(t)+"<mo></mo></mover>"};Expression.Pseudoinverse.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+'<mi><span title="pseudoinverse">+</span></mi></msup>'};Expression.SquareRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??"<msqrt>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"</msqrt>"};Expression.NthRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??(console.assert(typeof this.n=="number"&&Math.floor(this.n)===this.n&&this.n>=3),"<mroot>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"<mn>"+numberFormat.format(this.n.toString())+"</mn></mroot>")};Expression.denotations={};Expression.Function.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,s=!(a.a instanceof Expression.Matrix)&&!(a.a instanceof NonSimplifiedExpression&&a.a.e instanceof Expression.Matrix);return"<mrow><mi>"+(Expression.denotations[a.name]||a.name)+"</mi><mo>&af;</mo>"+(s?"<mrow><mo>(</mo>":"")+a.a.toMathML(Expression.setTopLevel(!0,t))+(s?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Division.prototype.toMathML=function(t){if(t!=null&&t.nofractions)return Expression.BinaryOperation.prototype.toMathML.call(this,t);var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,s=a.getDenominator(),l=a.getNumerator();return"<mfrac>"+l.toMathML(Expression.setTopLevel(!0,t))+s.toMathML(Expression.setTopLevel(!0,t))+"</mfrac>"};Expression.numberFormat={format:function(t){return t.toString()}};const decimalNumberRegExp=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit=function(t){let n=0;for(;decimalNumberRegExp.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10};let cachedFormatData={format:null,decimalSeparator:".",decimalZeroOffset:0};var numberFormat={format:function(t){var n=function(){var d=Expression.numberFormat.format(1.5).trim(),Ct=/[,\.]/.exec(d);return Ct==null?(console.error(d),"."):Ct[0]},a=function(){var d=Expression.numberFormat.format(0).trim().codePointAt(0),Ct=replaceSimpleDigit(d)===0;return Ct?d-48:(console.error(d),0)};cachedFormatData.format!==Expression.numberFormat&&(cachedFormatData={format:Expression.numberFormat,decimalSeparator:n(),decimalZeroOffset:a()});var s=t.indexOf(".");if(s!==-1)return numberFormat.format(t.slice(0,s))+cachedFormatData.decimalSeparator+numberFormat.format(t.slice(s+1));var l=cachedFormatData.decimalZeroOffset;if(l===0)return t;for(var u="",c=0;c<t.length;c+=1)u+=String.fromCodePoint(l+t.charCodeAt(c));return u}};Expression.Integer.prototype.toMathML=function(t){var n=this,a=n.compareTo(Expression.ZERO)<0?"-":"",s=n.compareTo(Expression.ZERO)<0?n.negate():n,l=s.value.toString(),u=numberFormat.format(l);return a==="-"?"<mrow><mo>&minus;</mo><mn>"+u+"</mn></mrow>":"<mn>"+u+"</mn>"};Expression.BinaryOperation.prototype.toMathML=function(t){t=t??{},t!=null&&t.rounding!=null&&this.unwrap()instanceof Expression.Exponentiation&&this.unwrap().a.unwrap()instanceof Expression.Symbol&&this.unwrap().a.unwrap()!==Expression.E&&this.unwrap().a.unwrap()!==Expression.PI&&!(this.unwrap().a.unwrap()instanceof Expression.PolynomialRootSymbol)&&!(this.unwrap().a.unwrap()instanceof Expression.ExpressionPolynomialRoot)&&(this.unwrap().b.unwrap()instanceof Expression.Integer||this.unwrap().b.unwrap()instanceof Expression.Negation&&this.unwrap().b.unwrap().b.unwrap()instanceof Expression.Integer)&&(t=Object.assign({},t,{rounding:null}));var n=Expression.toDecimalString(this,t);if(n!=null)return n;//!2019-05-16
if(this instanceof Expression.Addition&&t.printId==null){var a=function(sx){for(var ux=[];sx.unwrap()instanceof Expression.Addition;)ux.push(sx.unwrap().b),sx=sx.unwrap().a;return ux.push(sx),ux},tn=[],d=null;for(var s of a(this)){if(d!=null){var l=!1;d.isNegative()&&(l=!0,d=d.negateCarefully());var u=this.getPrecedence()>=getPrecedence(d,t);u=u||d.isUnaryPlusMinus(),tn.push((u?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(u,t))+(u?"<mo>)</mo></mrow>":"")),tn.push(l?"<mo>&minus;</mo>":"<mo>+</mo>")}d=s}tn=tn.reverse().join("");var c=d,u=c.getPrecedence()+(c.isRightToLeftAssociative()?-1:0)<this.getPrecedence();return t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(u=u||c.isUnaryPlusMinus()),tn=(u?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(u||t==null||t.isTopLevel,t))+(u?"<mo>)</mo></mrow>":"")+tn,"<mrow>"+tn+"</mrow>"}//!
var c=this.a,d=this.b,Ct=!1;this instanceof Expression.Addition&&d.isNegative()&&(Ct=!0,d=d.negateCarefully());var ar=c.getPrecedence()+(c.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),en=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=d.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(ar=ar||c.isUnaryPlusMinus()),en=en||d.isUnaryPlusMinus(),en=en||this.unwrap()instanceof Expression.Exponentiation&&d.unwrap()instanceof Expression.Exponentiation,ar=ar||this.unwrap()instanceof Expression.Exponentiation&&c.unwrap()instanceof Expression.Function,ar=ar||t.rounding!=null&&isConstant(c.unwrap())&&Expression.has(c.unwrap(),Expression.Complex);var tn=Ct?"-":this.getS();if(this instanceof Expression.Exponentiation){if(c.unwrap()===Expression.E&&d.unwrap()instanceof Expression.Matrix)return"<mrow><mi>exp</mi><mo>&af;</mo>"+d.toMathML(t)+"</mrow>";var on=t;return c.unwrap()instanceof Expression.Matrix||(on=Object.assign({},t||{},{nofractions:!0})),"<msup>"+(ar?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(ar||t==null||t.isTopLevel,t))+(ar?"<mo>)</mo></mrow>":"")+(en?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(en,on))+(en?"<mo>)</mo></mrow>":"")+"</msup>"}if(this.isNegation())return"<mrow><mo>&minus;</mo>"+(en?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(en,t))+(en?"<mo>)</mo></mrow>":"")+"</mrow>";var cn=function(ix){return ix instanceof Expression.Exponentiation&&(ix.b.unwrap()instanceof Expression.Integer||ix.b.unwrap()instanceof Expression.Symbol&&ix.b.unwrap().symbol==="T")?ix.a.unwrap():ix},dn=function(ix){return!ar&&!en&&(ix.a.unwrap()instanceof Expression.Integer||cn(ix.a.unwrap())instanceof Expression.Symbol||ix.a.unwrap()instanceof Expression.Multiplication&&cn(ix.a.unwrap().b.unwrap())instanceof Expression.Symbol)&&(cn(ix.b.unwrap())instanceof Expression.Symbol||t.rounding==null&&ix.b.unwrap()instanceof Expression.SquareRoot)};//!2020-08-02
if(this instanceof Expression.Multiplication&&t.printId==null){for(var Cn=!0,s=this;s!=null;s=s instanceof Expression.Multiplication?s.a.unwrap():null){var In=s instanceof Expression.Multiplication?s.b.unwrap():s;cn(In).unwrap()instanceof Expression.Symbol&&Expression.isScalar(In)||(Cn=!1),In instanceof Expression.ExpressionWithPolynomialRoot&&(Cn=!1),In instanceof Expression.ExpressionPolynomialRoot&&(Cn=!1)}if(Cn){for(var tn=[],s=this;s!=null;s=s instanceof Expression.Multiplication?s.a.unwrap():null){var In=s instanceof Expression.Multiplication?s.b.unwrap():s;tn.push(In.toMathML(Expression.setTopLevel(u,t)))}return tn=tn.reverse().join("<mo>&it;</mo>"),"<mrow>"+tn+"</mrow>"}}return"<mrow>"+(ar?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(ar||t==null||t.isTopLevel,t))+(ar?"<mo>)</mo></mrow>":"")+(tn==="*"?dn(this)?"<mo>&it;</mo>":"<mo>&sdot;</mo>":tn==="-"?"<mo>&minus;</mo>":tn==="/"?"<mo>&#x2215;</mo>":this instanceof Expression.Comma?'<mo lspace="0em" rspace="0.55em">,</mo>':"<mo>"+tn+"</mo>")+(en?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(en,t))+(en?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Symbol.prototype.toMathML=function(t){var n=this,a=n.symbol,s=a.indexOf("_");if(s!==-1){for(var l=a.slice(s+1).replace(/^\(|\)$/g,"").split(","),u="",c=0;c<l.length;c+=1)u+=c!==0?"<mo>,</mo>":"",u+=/^\d+$/.exec(l[c])!=null?Expression.Integer.fromString(l[c]).toMathML():"<mi>"+l[c]+"</mi>";l.length>1&&(u="<mrow>"+u+"</mrow>");var d=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a.slice(0,s));return"<msub><mi"+(d?' mathvariant="bold-italic"':"")+">"+a.slice(0,s)+"</mi>"+u+"</msub>"}var d=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a);return"<mi"+(d?' mathvariant="bold-italic"':"")+">"+(this instanceof Expression.IdentityMatrix&&typeof i18n<"u"?'<span class="dotted-underline" title="'+i18n.identityMatrix+'" aria-label="'+i18n.identityMatrix+'">'+a+"</span>":a)+"</mi>"};Expression.Negation.prototype.toMathML=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"<mrow><mo>&minus;</mo>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Factorial.prototype.toMathML=function(t){var n=this.n.unwrap(),a=!(n instanceof Expression.Integer&&n.compareTo(Expression.ZERO)>0);return"<mrow>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"<mo>!</mo></mrow>"};Condition$1.prototype.toMathML=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1){var s=this.array[a];n+=a!==0?'<mo lspace="0em" rspace="0.55em">,</mo>':"",n+="<mrow>";var l="<mo>"+(s.operator===Condition$1.NEZ?"&ne;":s.operator===Condition$1.EQZ?"=":s.operator===Condition$1.GTZ?"&gt;":"???")+"</mo>";if(s.expression instanceof Expression.Addition&&s.expression.a instanceof Expression.Symbol&&s.expression.b instanceof Expression.Integer){var u=s.expression.a,c=s.expression.b.negate();n+=u.toMathML(t)+l+c.toMathML(t)}else n+=s.expression.toMathML(t)+l+Expression.ZERO.toMathML();n+="</mrow>"}return this.array.length===1?n:"<mrow>"+n+"</mrow>"};Expression.Complex.prototype.toMathML=function(t){return this.toStringInternal(t,"<mo>&it;</mo>","<mi>&ii;</mi>","<mo>&minus;</mo>","<mo>+</mo>","<mrow>","</mrow>",function(n,a){return n.toMathML(a)})};Expression.GF2.prototype.toMathML=function(t){return this.a.toMathML(t)};Expression.GF2Value.prototype.toMathML=function(t){return"<mrow><mn>"+this.value.toString()+"</mn></mrow>"};Expression.Degrees.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>&deg;</mi></mrow>"};Expression.Radians.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>rad</mi></mrow>"};NonSimplifiedExpression.prototype.toMathML=function(t){return t!=null&&t.printId!=null?'<mrow id="'+this.getId()+'">'+this.e.toMathML(t)+"</mrow>":this.e.toMathML(t)};Expression.prototype.toMathML=function(t){throw new TypeError};Expression.DecimalFraction.prototype.toMathML=function(t){return decimalToMathML(this.toString())};primeFactor._isPrime;function simplify_algebra(t){var n=t.replace(/([CRL]+)([0-9]*)/g,"$1_$2"),a=ExpressionParser.parse(n),s=a.toString(),l=s.replace(/([CRL]+)_([0-9]*)/g,"$1$2");return[l,a.toMathML()]}function removeFenced(t){return t.replaceAll(/<mfenced>/g,"<mrow><mo>(</mo>").replaceAll(/<\/mfenced>/g,"<mo>)</mo></mrow>")}async function solveWithSymPy(t,n,a,s,l,u,c){const d=`${[...Object.keys(a),"s"].join(", ")} = symbols("${[...Object.keys(a),"s"].join(" ")}", positive=True, real=True)`,Ct=t.replaceAll("^","**"),ar=`
${d}
${n.length==1?`mna_vo_vi = 1/(${n[0]})`:`
mna = Matrix([${Ct}])
mna_inv = mna.inv()
${l.length==0?`mna_vo_vi = mna_inv[${s[0]-1}, ${s[1]-1}]`:`mna_vo_vi = mna_inv[${s[0]-1}, ${s[1]-1}] - mna_inv[${l[0]-1}, ${l[1]-1}]`}`}
mna_vo_vi_complex = mna_vo_vi.subs(s, s*I)

result_simplified = simplify(mna_vo_vi)
result_numeric = result_simplified.subs(${JSON.stringify(u).replaceAll('"',"")})
result_numeric_simplified = simplify(result_numeric)
result_numeric_complex = result_numeric_simplified.subs(s, s*I)
rx = Abs(result_numeric_complex)

str(result_simplified), mathml(result_simplified, printer='presentation'), str(rx), mathml(result_numeric_simplified, printer='presentation'), str(result_numeric_simplified)
`,[en,tn,on,cn,dn]=await c.runPythonAsync(ar),Cn=cn,In=dn.replaceAll("**","^");return[en,removeFenced(tn),on,removeFenced(Cn),In]}async function solveWithAlgebrite(t,n,a,s){try{algebriteExports.eval("clearall"),n.length==1?algebriteExports.eval(`mna_vo_vi = 1/(${n[0]})`):(algebriteExports.eval(`mna = [${t}]`),algebriteExports.eval("inv_mna = inv(mna)"),s.length==0?algebriteExports.eval(`mna_vo_vi = inv_mna[${a[0]}][${a[1]}]`):algebriteExports.eval(`mna_vo_vi = inv_mna[${a[0]}][${a[1]}] - inv_mna[${s[0]}][${s[1]}]`));var l=algebriteExports.eval("mna_vo_vi").toString();const[u,c]=simplify_algebra(l);algebriteExports.eval("complex_response = subst(s*i,s,mna_vo_vi)"),algebriteExports.eval("abs_complex_response = abs(complex_response)");const d=algebriteExports.eval("abs_complex_response").toString();return[u,c,d]}catch(u){return console.log("Building MNA matrix failed with this error:",u),["","",""]}}async function build_and_solve_mna(t,n,a,s,l,u){var c,d,Ct;const ar=a[n[0]].type==="iprobe",en=a,tn=Object.values(en).filter(xx=>xx.type==="iprobe").length,on=Object.values(en).filter(xx=>xx.type==="opamp").length,cn=Object.values(en).filter(xx=>xx.type==="vcvs").length,dn=on+cn;if("vin"in en)d=en.vin.ports[0];else if("iin"in en)Ct=en.iin.ports[0];else{console.log("no iin or vin");return}const Cn="vin"in en?"vin":"iin",In=Cn=="vin"?1:0;var ix=new Array(t+In+dn+tn);for(c=0;c<ix.length;c++)ix[c]=new Array(ix.length).fill("0");var ax;for(const xx in en){const _x=en[xx];if(["inductor","capacitor","resistor"].includes(_x.type)){_x.type=="resistor"?ax=xx:_x.type=="inductor"?ax=`(s*${xx})`:ax=`1/(s*${xx})`;for(const Ex of _x.ports)Ex!==null&&(ix[Ex][Ex]+=`+${ax}^(-1)`);_x.ports.includes(null)||(ix[_x.ports[0]][_x.ports[1]]+=`-${ax}^(-1)`,ix[_x.ports[1]][_x.ports[0]]+=`-${ax}^(-1)`)}}Cn=="vin"&&(ix[t][d]="1",ix[d][t]="1");var ox=0,sx=0;for(const xx in en){const _x=en[xx];_x.type==="opamp"?(_x.ports[0]!=null&&(ix[t+In+ox][_x.ports[0]]="1"),_x.ports[1]!=null&&(ix[t+In+ox][_x.ports[1]]="-1"),_x.ports[2]!=null&&(ix[_x.ports[2]][t+In+ox]="1"),ox++):_x.type==="vcvs"?(_x.ports[0]!=null&&(ix[t+In+ox][_x.ports[0]]=`+${xx}`),_x.ports[1]!=null&&(ix[t+In+ox][_x.ports[1]]=`-${xx}`),_x.ports[2]!=null&&(ix[t+In+ox][_x.ports[2]]+="+1"),_x.ports[3]!=null&&(ix[t+In+ox][_x.ports[3]]+="-1"),_x.ports[2]!=null&&(ix[_x.ports[2]][t+In+ox]="1"),_x.ports[3]!=null&&(ix[_x.ports[3]][t+In+ox]="-1"),ox++):_x.type==="vcis"?(_x.ports[2]!=null&&_x.ports[0]!=null&&(ix[_x.ports[2]][_x.ports[0]]+=`-${xx}`),_x.ports[2]!=null&&_x.ports[1]!=null&&(ix[_x.ports[2]][_x.ports[1]]+=`+${xx}`),_x.ports[3]!=null&&_x.ports[0]!=null&&(ix[_x.ports[3]][_x.ports[0]]+=`+${xx}`),_x.ports[3]!=null&&_x.ports[1]!=null&&(ix[_x.ports[3]][_x.ports[1]]+=`-${xx}`)):_x.type==="iprobe"&&(ix[t+In+dn+sx][_x.ports[0]]="1",ix[_x.ports[0]][t+In+dn+sx]="1",ix[t+In+dn+sx][_x.ports[1]]="-1",ix[_x.ports[1]][t+In+dn+sx]="-1",sx++)}var ux=[];for(c=0;c<ix.length;c++)ux.push("["+ix[c].join(",")+"]");const cx=ux.join(",");var hx=[],gx=[];if(ar)Cn=="vin"?hx.push(ix.length,t+1):hx.push(ix.length,Ct+1);else{const xx=en[n[0]].ports[0];if(Cn=="vin"?hx.push(xx+1,t+1):hx.push(xx+1,Ct+1),n.length==2){const _x=en[n[1]].ports[0];Cn=="vin"?gx.push(_x+1,t+1):gx.push(_x+1,Ct+1)}}var fx,dx,mx,vx,bx;return u==="algebrite"?[dx,mx,vx]=solveWithAlgebrite(cx,ix,hx,gx):[dx,mx,vx,fx,bx]=await solveWithSymPy(cx,ix,en,hx,gx,s,l),[dx,mx,vx,fx,bx]}async function calcBilinear(t){if(t){const n=`
T, Z = symbols("T Z")
bilinear = result_simplified.subs(s,(2/T)*(Z-1)/(Z+1))
bilinear_simp = simplify(bilinear)
str(bilinear_simp), mathml(bilinear_simp, printer='presentation')
`,[a,s]=await t.runPythonAsync(n);return[a,removeFenced(s)]}else{algebriteExports.eval("bilinear = subst((2/T)*(Z-1)/(Z+1),s,mna_vo_vi)");try{return simplify_algebra(algebriteExports.eval("bilinear").toString())}catch(n){return console.log(n),["","<mtext>Having trouble calculating bilinear transform</mtext>"]}}}function getAppBarUtilityClass(t){return generateUtilityClass("MuiAppBar",t)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$f=t=>{const{color:n,position:a,classes:s}=t,l={root:["root",`color${capitalize(n)}`,`position${capitalize(a)}`]};return composeClasses(l,getAppBarUtilityClass,s)},joinVars=(t,n)=>t?`${t?.replace(")","")}, ${n})`:n,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`position${capitalize(a.position)}`],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([n])=>({props:{color:n},style:{"--AppBar-background":(t.vars??t).palette[n].main,"--AppBar-color":(t.vars??t).palette[n].contrastText}})),{props:n=>n.enableColorOnDark===!0&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:n=>n.enableColorOnDark===!1&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?joinVars(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?joinVars(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAppBar"}),{className:l,color:u="primary",enableColorOnDark:c=!1,position:d="fixed",...Ct}=s,ar={...s,color:u,position:d,enableColorOnDark:c},en=useUtilityClasses$f(ar);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:ar,elevation:4,className:clsx(en.root,l,d==="fixed"&&"mui-fixed"),ref:a,...Ct})});function getToolbarUtilityClass(t){return generateUtilityClass("MuiToolbar",t)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses$e=t=>{const{classes:n,disableGutters:a,variant:s}=t;return composeClasses({root:["root",!a&&"gutters",s]},getToolbarUtilityClass,n)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disableGutters&&n.gutters,n[a.variant]]}})(memoTheme(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiToolbar"}),{className:l,component:u="div",disableGutters:c=!1,variant:d="regular",...Ct}=s,ar={...s,component:u,disableGutters:c,variant:d},en=useUtilityClasses$e(ar);return jsxRuntimeExports.jsx(ToolbarRoot,{as:u,className:clsx(en.root,l),ref:a,ownerState:ar,...Ct})});function useSnackbar(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:a=!1,onClose:s,open:l,resumeHideDuration:u}=t,c=useTimeout();reactExports.useEffect(()=>{if(!l)return;function ix(ax){ax.defaultPrevented||ax.key==="Escape"&&s?.(ax,"escapeKeyDown")}return document.addEventListener("keydown",ix),()=>{document.removeEventListener("keydown",ix)}},[l,s]);const d=useEventCallback((ix,ax)=>{s?.(ix,ax)}),Ct=useEventCallback(ix=>{!s||ix==null||c.start(ix,()=>{d(null,"timeout")})});reactExports.useEffect(()=>(l&&Ct(n),c.clear),[l,n,Ct,c]);const ar=ix=>{s?.(ix,"clickaway")},en=c.clear,tn=reactExports.useCallback(()=>{n!=null&&Ct(u??n*.5)},[n,u,Ct]),on=ix=>ax=>{const ox=ix.onBlur;ox?.(ax),tn()},cn=ix=>ax=>{const ox=ix.onFocus;ox?.(ax),en()},dn=ix=>ax=>{const ox=ix.onMouseEnter;ox?.(ax),en()},Cn=ix=>ax=>{const ox=ix.onMouseLeave;ox?.(ax),tn()};return reactExports.useEffect(()=>{if(!a&&l)return window.addEventListener("focus",tn),window.addEventListener("blur",en),()=>{window.removeEventListener("focus",tn),window.removeEventListener("blur",en)}},[a,l,tn,en]),{getRootProps:(ix={})=>{const ax={...extractEventHandlers(t),...extractEventHandlers(ix)};return{role:"presentation",...ix,...ax,onBlur:on(ax),onFocus:cn(ax),onMouseEnter:dn(ax),onMouseLeave:Cn(ax)}},onClickAway:ar}}function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:n,disableReactTree:a=!1,mouseEvent:s="onClick",onClickAway:l,touchEvent:u="onTouchEnd"}=t,c=reactExports.useRef(!1),d=reactExports.useRef(null),Ct=reactExports.useRef(!1),ar=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{Ct.current=!0},0),()=>{Ct.current=!1}),[]);const en=useForkRef(getReactElementRef(n),d),tn=useEventCallback(dn=>{const Cn=ar.current;ar.current=!1;const In=ownerDocument(d.current);if(!Ct.current||!d.current||"clientX"in dn&&clickedRootScrollbar(dn,In))return;if(c.current){c.current=!1;return}let ix;dn.composedPath?ix=dn.composedPath().includes(d.current):ix=!In.documentElement.contains(dn.target)||d.current.contains(dn.target),!ix&&(a||!Cn)&&l(dn)}),on=dn=>Cn=>{ar.current=!0;const In=n.props[dn];In&&In(Cn)},cn={ref:en};return u!==!1&&(cn[u]=on(u)),reactExports.useEffect(()=>{if(u!==!1){const dn=mapEventPropToEvent(u),Cn=ownerDocument(d.current),In=()=>{c.current=!0};return Cn.addEventListener(dn,tn),Cn.addEventListener("touchmove",In),()=>{Cn.removeEventListener(dn,tn),Cn.removeEventListener("touchmove",In)}}},[tn,u]),s!==!1&&(cn[s]=on(s)),reactExports.useEffect(()=>{if(s!==!1){const dn=mapEventPropToEvent(s),Cn=ownerDocument(d.current);return Cn.addEventListener(dn,tn),()=>{Cn.removeEventListener(dn,tn)}}},[tn,s]),reactExports.cloneElement(n,cn)}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const useUtilityClasses$d=t=>{const{classes:n}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,n)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98;return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(emphasize(t.palette.background.default,n)),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:emphasize(t.palette.background.default,n),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiSnackbarContent"}),{action:l,className:u,message:c,role:d="alert",...Ct}=s,ar=s,en=useUtilityClasses$d(ar);return jsxRuntimeExports.jsxs(SnackbarContentRoot,{role:d,elevation:6,className:clsx(en.root,u),ownerState:ar,ref:a,...Ct,children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:en.message,ownerState:ar,children:c}),l?jsxRuntimeExports.jsx(SnackbarContentAction,{className:en.action,ownerState:ar,children:l}):null]})});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const useUtilityClasses$c=t=>{const{classes:n,anchorOrigin:a}=t,s={root:["root",`anchorOrigin${capitalize(a.vertical)}${capitalize(a.horizontal)}`]};return composeClasses(s,getSnackbarUtilityClass,n)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`anchorOrigin${capitalize(a.anchorOrigin.vertical)}${capitalize(a.anchorOrigin.horizontal)}`]]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Snackbar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiSnackbar"}),l=useTheme(),u={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{action:c,anchorOrigin:{vertical:d,horizontal:Ct}={vertical:"bottom",horizontal:"left"},autoHideDuration:ar=null,children:en,className:tn,ClickAwayListenerProps:on,ContentProps:cn,disableWindowBlurListener:dn=!1,message:Cn,onBlur:In,onClose:ix,onFocus:ax,onMouseEnter:ox,onMouseLeave:sx,open:ux,resumeHideDuration:cx,slots:hx={},slotProps:gx={},TransitionComponent:fx,transitionDuration:dx=u,TransitionProps:{onEnter:mx,onExited:vx,...bx}={},...xx}=s,_x={...s,anchorOrigin:{vertical:d,horizontal:Ct},autoHideDuration:ar,disableWindowBlurListener:dn,TransitionComponent:fx,transitionDuration:dx},Ex=useUtilityClasses$c(_x),{getRootProps:Tx,onClickAway:Cx}=useSnackbar({..._x}),[Mx,Ax]=reactExports.useState(!0),Nx=nE=>{Ax(!0),vx&&vx(nE)},Ux=(nE,Wx)=>{Ax(!1),mx&&mx(nE,Wx)},Rx={slots:{transition:fx,...hx},slotProps:{content:cn,clickAwayListener:on,transition:bx,...gx}},[Ox,Px]=useSlot("root",{ref:a,className:[Ex.root,tn],elementType:SnackbarRoot,getSlotProps:Tx,externalForwardedProps:{...Rx,...xx},ownerState:_x}),[$x,{ownerState:Lx,...zx}]=useSlot("clickAwayListener",{elementType:ClickAwayListener,externalForwardedProps:Rx,getSlotProps:nE=>({onClickAway:(...Wx)=>{const tE=Wx[0];nE.onClickAway?.(...Wx),!tE?.defaultMuiPrevented&&Cx(...Wx)}}),ownerState:_x}),[qx,jx]=useSlot("content",{elementType:SnackbarContent,shouldForwardComponentProp:!0,externalForwardedProps:Rx,additionalProps:{message:Cn,action:c},ownerState:_x}),[Hx,Vx]=useSlot("transition",{elementType:Grow,externalForwardedProps:Rx,getSlotProps:nE=>({onEnter:(...Wx)=>{nE.onEnter?.(...Wx),Ux(...Wx)},onExited:(...Wx)=>{nE.onExited?.(...Wx),Nx(...Wx)}}),additionalProps:{appear:!0,in:ux,timeout:dx,direction:d==="top"?"down":"up"},ownerState:_x});return!ux&&Mx?null:jsxRuntimeExports.jsx($x,{...zx,...hx.clickAwayListener&&{ownerState:Lx},children:jsxRuntimeExports.jsx(Ox,{...Px,children:jsxRuntimeExports.jsx(Hx,{...Vx,children:en||jsxRuntimeExports.jsx(qx,{...jx})})})})}),CircuitSolverSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20stroke='rgb(184,%20255,%20241)'%20fill='none'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20Outer%20rounded%20rectangle%20--%3e%3crect%20x='5'%20y='5'%20width='90'%20height='90'%20rx='10'%20ry='10'%20/%3e%3c!--%20Top%20vertical%20lines%20--%3e%3cline%20x1='20'%20y1='5'%20x2='20'%20y2='30'%20/%3e%3cline%20x1='50'%20y1='5'%20x2='50'%20y2='30'%20/%3e%3cline%20x1='80'%20y1='5'%20x2='80'%20y2='30'%20/%3e%3c!--%20Bottom%20vertical%20lines%20--%3e%3cline%20x1='30'%20y1='95'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='95'%20x2='70'%20y2='70'%20/%3e%3c!--%20Horizontal%20traces%20--%3e%3cline%20x1='5'%20y1='50'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='95'%20y2='50'%20/%3e%3c!--%20Connect%20top%20to%20mid%20circles%20--%3e%3cline%20x1='20'%20y1='30'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='50'%20y1='30'%20x2='50'%20y2='50'%20/%3e%3cline%20x1='80'%20y1='30'%20x2='70'%20y2='50'%20/%3e%3c!--%20Connect%20mid%20to%20bottom%20circles%20--%3e%3cline%20x1='30'%20y1='50'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='70'%20y2='70'%20/%3e%3c!--%20Pads%20(circles)%20--%3e%3ccircle%20cx='20'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='50'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='80'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='70'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='70'%20r='5'%20/%3e%3c/svg%3e",SaveIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),HomeIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}));function NavBar({stateToURL:t}){const[n,a]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(ThemeProvider,{theme:theme$1,children:[jsxRuntimeExports.jsx(Snackbar,{open:n,autoHideDuration:1e4,onClose:()=>a(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Shareable URL copied to clipboard! Your whole website state is in the URL",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200}})}),jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:1},children:jsxRuntimeExports.jsxs(Toolbar,{style:{minHeight:0},children:[jsxRuntimeExports.jsx("img",{src:CircuitSolverSVG,alt:"Smith Chart",width:"30",height:"30",style:{marginRight:"12px"}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:"bold",display:{xs:"none",sm:"block"}},children:"ONLINE CIRCUIT SOLVER"}),jsxRuntimeExports.jsx("div",{style:{flexGrow:1,display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Tooltip,{title:"Copy shareable URL",placement:"bottom",children:jsxRuntimeExports.jsx(IconButton,{"aria-label":"download",color:"bland",onClick:()=>{const s=t();navigator.clipboard.writeText(s).then(()=>{a(!0)})},children:jsxRuntimeExports.jsx(SaveIcon,{})})})}),jsxRuntimeExports.jsxs(Stack,{spacing:1,direction:{sm:"column",xs:"column",md:"row"},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com",children:jsxRuntimeExports.jsx(HomeIcon,{})}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://onlinesmithchart.com",children:"Smith Chart"}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com/circuitSolver",children:"Circuit Solver"})]})]})})})]})}function getToggleButtonUtilityClass(t){return generateUtilityClass("MuiToggleButton",t)}const toggleButtonClasses=generateUtilityClasses("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ToggleButtonGroupContext=reactExports.createContext({}),ToggleButtonGroupButtonContext=reactExports.createContext(void 0);function isValueSelected(t,n){return n===void 0||t===void 0?!1:Array.isArray(n)?n.includes(t):t===n}const useUtilityClasses$b=t=>{const{classes:n,fullWidth:a,selected:s,disabled:l,size:u,color:c}=t,d={root:["root",s&&"selected",l&&"disabled",a&&"fullWidth",`size${capitalize(u)}`,c]};return composeClasses(d,getToggleButtonUtilityClass,n)},ToggleButtonRoot=styled(ButtonBase,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${toggleButtonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${toggleButtonClasses.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${toggleButtonClasses.selected}`]:{color:(t.vars||t).palette[n].main,backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[n].main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}))),ToggleButton=reactExports.forwardRef(function t(n,a){const{value:s,...l}=reactExports.useContext(ToggleButtonGroupContext),u=reactExports.useContext(ToggleButtonGroupButtonContext),c=resolveProps({...l,selected:isValueSelected(n.value,s)},n),d=useDefaultProps({props:c,name:"MuiToggleButton"}),{children:Ct,className:ar,color:en="standard",disabled:tn=!1,disableFocusRipple:on=!1,fullWidth:cn=!1,onChange:dn,onClick:Cn,selected:In,size:ix="medium",value:ax,...ox}=d,sx={...d,color:en,disabled:tn,disableFocusRipple:on,fullWidth:cn,size:ix},ux=useUtilityClasses$b(sx),cx=gx=>{Cn&&(Cn(gx,ax),gx.defaultPrevented)||dn&&dn(gx,ax)},hx=u||"";return jsxRuntimeExports.jsx(ToggleButtonRoot,{className:clsx(l.className,ux.root,ar,hx),disabled:tn,focusRipple:!on,ref:a,onClick:cx,onChange:dn,value:ax,ownerState:sx,"aria-pressed":In,...ox,children:Ct})});function getValidReactChildren(t){return reactExports.Children.toArray(t).filter(n=>reactExports.isValidElement(n))}function getToggleButtonGroupUtilityClass(t){return generateUtilityClass("MuiToggleButtonGroup",t)}const toggleButtonGroupClasses=generateUtilityClasses("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),useUtilityClasses$a=t=>{const{classes:n,orientation:a,fullWidth:s,disabled:l}=t,u={root:["root",a,s&&"fullWidth"],grouped:["grouped",`grouped${capitalize(a)}`,l&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(u,getToggleButtonGroupUtilityClass,n)},ToggleButtonGroupRoot=styled("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${toggleButtonGroupClasses.grouped}`]:n.grouped},{[`& .${toggleButtonGroupClasses.grouped}`]:n[`grouped${capitalize(a.orientation)}`]},{[`& .${toggleButtonGroupClasses.firstButton}`]:n.firstButton},{[`& .${toggleButtonGroupClasses.lastButton}`]:n.lastButton},{[`& .${toggleButtonGroupClasses.middleButton}`]:n.middleButton},n.root,a.orientation==="vertical"&&n.vertical,a.fullWidth&&n.fullWidth]}})(memoTheme(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderTop:0,marginTop:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),ToggleButtonGroup=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiToggleButtonGroup"}),{children:l,className:u,color:c="standard",disabled:d=!1,exclusive:Ct=!1,fullWidth:ar=!1,onChange:en,orientation:tn="horizontal",size:on="medium",value:cn,...dn}=s,Cn={...s,disabled:d,fullWidth:ar,orientation:tn,size:on},In=useUtilityClasses$a(Cn),ix=reactExports.useCallback((hx,gx)=>{if(!en)return;const fx=cn&&cn.indexOf(gx);let dx;cn&&fx>=0?(dx=cn.slice(),dx.splice(fx,1)):dx=cn?cn.concat(gx):[gx],en(hx,dx)},[en,cn]),ax=reactExports.useCallback((hx,gx)=>{en&&en(hx,cn===gx?null:gx)},[en,cn]),ox=reactExports.useMemo(()=>({className:In.grouped,onChange:Ct?ax:ix,value:cn,size:on,fullWidth:ar,color:c,disabled:d}),[In.grouped,Ct,ax,ix,cn,on,ar,c,d]),sx=getValidReactChildren(l),ux=sx.length,cx=hx=>{const gx=hx===0,fx=hx===ux-1;return gx&&fx?"":gx?In.firstButton:fx?In.lastButton:In.middleButton};return jsxRuntimeExports.jsx(ToggleButtonGroupRoot,{role:"group",className:clsx(In.root,u),ref:a,ownerState:Cn,...dn,children:jsxRuntimeExports.jsx(ToggleButtonGroupContext.Provider,{value:ox,children:sx.map((hx,gx)=>jsxRuntimeExports.jsx(ToggleButtonGroupButtonContext.Provider,{value:cx(gx),children:hx},gx))})})}),scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function t(n,a,s){let l=Promise.resolve();if(a&&a.length>0){let ar=function(en){return Promise.all(en.map(tn=>Promise.resolve(tn).then(on=>({status:"fulfilled",value:on}),on=>({status:"rejected",reason:on}))))};var c=ar;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),Ct=d?.nonce||d?.getAttribute("nonce");l=ar(a.map(en=>{if(en=assetsURL(en),en in seen)return;seen[en]=!0;const tn=en.endsWith(".css"),on=tn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${en}"]${on}`))return;const cn=document.createElement("link");if(cn.rel=tn?"stylesheet":scriptRel,tn||(cn.as="script"),cn.crossOrigin="",cn.href=en,Ct&&cn.setAttribute("nonce",Ct),document.head.appendChild(cn),tn)return new Promise((dn,Cn)=>{cn.addEventListener("load",dn),cn.addEventListener("error",()=>Cn(new Error(`Unable to preload CSS for ${en}`)))})}))}function u(d){const Ct=new Event("vite:preloadError",{cancelable:!0});if(Ct.payload=d,window.dispatchEvent(Ct),!Ct.defaultPrevented)throw d}return l.then(d=>{for(const Ct of d||[])Ct.status==="rejected"&&u(Ct.reason);return n().catch(u)})};var oe=Object.defineProperty,o=(t,n)=>oe(t,"name",{value:n,configurable:!0}),A=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,a)=>(typeof require<"u"?require:n)[a]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),W=(()=>{for(var t=new Uint8Array(128),n=0;n<64;n++)t[n<26?n+65:n<52?n+71:n<62?n-4:n*4-205]=n;return a=>{for(var s=a.length,l=new Uint8Array((s-(a[s-1]=="=")-(a[s-2]=="="))*3/4|0),u=0,c=0;u<s;){var d=t[a.charCodeAt(u++)],Ct=t[a.charCodeAt(u++)],ar=t[a.charCodeAt(u++)],en=t[a.charCodeAt(u++)];l[c++]=d<<2|Ct>>4,l[c++]=Ct<<4|ar>>2,l[c++]=ar<<6|en}return l}})();function se(t){return!isNaN(parseFloat(t))&&isFinite(t)}o(se,"_isNumber");function S(t){return t.charAt(0).toUpperCase()+t.substring(1)}o(S,"_capitalize");function L(t){return function(){return this[t]}}o(L,"_getter");var E$1=["isConstructor","isEval","isNative","isToplevel"],P=["columnNumber","lineNumber"],k$2=["fileName","functionName","source"],ae=["args"],ce=["evalOrigin"],R=E$1.concat(P,k$2,ae,ce);function p(t){if(t)for(var n=0;n<R.length;n++)t[R[n]]!==void 0&&this["set"+S(R[n])](t[R[n]])}o(p,"StackFrame");p.prototype={getArgs:o(function(){return this.args},"getArgs"),setArgs:o(function(t){if(Object.prototype.toString.call(t)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=t},"setArgs"),getEvalOrigin:o(function(){return this.evalOrigin},"getEvalOrigin"),setEvalOrigin:o(function(t){if(t instanceof p)this.evalOrigin=t;else if(t instanceof Object)this.evalOrigin=new p(t);else throw new TypeError("Eval Origin must be an Object or StackFrame")},"setEvalOrigin"),toString:o(function(){var t=this.getFileName()||"",n=this.getLineNumber()||"",a=this.getColumnNumber()||"",s=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+n+":"+a+")":"[eval]:"+n+":"+a:s?s+" ("+t+":"+n+":"+a+")":t+":"+n+":"+a},"toString")};p.fromString=o(function(t){var n=t.indexOf("("),a=t.lastIndexOf(")"),s=t.substring(0,n),l=t.substring(n+1,a).split(","),u=t.substring(a+1);if(u.indexOf("@")===0)var c=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(u,""),d=c[1],Ct=c[2],ar=c[3];return new p({functionName:s,args:l||void 0,fileName:d,lineNumber:Ct||void 0,columnNumber:ar||void 0})},"StackFrame$$fromString");for(b$1=0;b$1<E$1.length;b$1++)p.prototype["get"+S(E$1[b$1])]=L(E$1[b$1]),p.prototype["set"+S(E$1[b$1])]=(function(t){return function(n){this[t]=!!n}})(E$1[b$1]);var b$1;for(v$1=0;v$1<P.length;v$1++)p.prototype["get"+S(P[v$1])]=L(P[v$1]),p.prototype["set"+S(P[v$1])]=(function(t){return function(n){if(!se(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}})(P[v$1]);var v$1;for(h$1=0;h$1<k$2.length;h$1++)p.prototype["get"+S(k$2[h$1])]=L(k$2[h$1]),p.prototype["set"+S(k$2[h$1])]=(function(t){return function(n){this[t]=String(n)}})(k$2[h$1]);var h$1,O=p;function le(){var t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:o(function(a){if(a.stack&&a.stack.match(t))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:o(function(a){if(a.indexOf(":")===-1)return[a];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,l=s.exec(a.replace(/[()]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:o(function(a){var s=a.stack.split(`
`).filter(function(l){return!!l.match(t)},this);return s.map(function(l){l.indexOf("(eval ")>-1&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=l.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),c=u.match(/ (\(.+\)$)/);u=c?u.replace(c[0],""):u;var d=this.extractLocation(c?c[1]:u),Ct=c&&u||void 0,ar=["eval","<anonymous>"].indexOf(d[0])>-1?void 0:d[0];return new O({functionName:Ct,fileName:ar,lineNumber:d[1],columnNumber:d[2],source:l})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:o(function(a){var s=a.stack.split(`
`).filter(function(l){return!l.match(n)},this);return s.map(function(l){if(l.indexOf(" > eval")>-1&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return new O({functionName:l});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,c=l.match(u),d=c&&c[1]?c[1]:void 0,Ct=this.extractLocation(l.replace(u,""));return new O({functionName:d,fileName:Ct[0],lineNumber:Ct[1],columnNumber:Ct[2],source:l})},this)},"ErrorStackParser$$parseFFOrSafari")}}o(le,"ErrorStackParser");var de=new le,$$1=de,g$1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,T=g$1&&typeof module<"u"&&typeof module.exports<"u"&&typeof A<"u"&&typeof __dirname<"u",j=g$1&&!T,ue=typeof Deno<"u",H=!g$1&&!ue,V=H&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",z=H&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var x=typeof read=="function"&&typeof load=="function",J,D,Y,q,U;async function C$1(){if(!g$1||(J=(await __vitePreload(async()=>{const{default:u}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{default:u}},void 0)).default,q=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),U=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),Y=(await __vitePreload(async()=>{const{default:u}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{default:u}},void 0)).default,D=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),M=D.sep,typeof A<"u"))return;let t=q,n=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),a=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),s=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),l={fs:t,crypto:n,ws:a,child_process:s};globalThis.require=function(u){return l[u]}}o(C$1,"initNodeModules");function fe(t,n){return D.resolve(n||".",t)}o(fe,"node_resolvePath");function me(t,n){return n===void 0&&(n=location),new URL(t,n).toString()}o(me,"browser_resolvePath");var N;g$1?N=fe:x?N=o(t=>t,"resolvePath"):N=me;var M;g$1||(M="/");function pe(t,n){return t.startsWith("file://")&&(t=t.slice(7)),t.includes("://")?{response:fetch(t)}:{binary:U.readFile(t).then(a=>new Uint8Array(a.buffer,a.byteOffset,a.byteLength))}}o(pe,"node_getBinaryResponse");function ge(t,n){if(t.startsWith("file://")&&(t=t.slice(7)),t.includes("://"))throw new Error("Shell cannot fetch urls");return{binary:Promise.resolve(new Uint8Array(readbuffer(t)))}}o(ge,"shell_getBinaryResponse");function ye(t,n){let a=new URL(t,location);return{response:fetch(a,n?{integrity:n}:{})}}o(ye,"browser_getBinaryResponse");var F;g$1?F=pe:x?F=ge:F=ye;async function K(t,n){let{response:a,binary:s}=F(t,n);if(s)return s;let l=await a;if(!l.ok)throw new Error(`Failed to load '${t}': request failed.`);return new Uint8Array(await l.arrayBuffer())}o(K,"loadBinaryFile");var I;if(V)I=o(async t=>await import(t),"loadScript");else if(z)I=o(async t=>{try{globalThis.importScripts(t)}catch(n){if(n instanceof TypeError)await import(t);else throw n}},"loadScript");else if(g$1)I=be;else if(x)I=load;else throw new Error("Cannot determine runtime environment");async function be(t){t.startsWith("file://")&&(t=t.slice(7)),t.includes("://")?Y.runInThisContext(await(await fetch(t)).text()):await import(J.pathToFileURL(t).href)}o(be,"nodeLoadScript");async function G(t){if(g$1){await C$1();let n=await U.readFile(t,{encoding:"utf8"});return JSON.parse(n)}else if(x){let n=read(t);return JSON.parse(n)}else return await(await fetch(t)).json()}o(G,"loadLockFile");async function X(){if(T)return __dirname;let t;try{throw new Error}catch(s){t=s}let n=$$1.parse(t)[0].fileName;if(g$1&&!n.startsWith("file://")&&(n=`file://${n}`),j){let s=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),[]);return(await __vitePreload(async()=>{const{fileURLToPath:l}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{fileURLToPath:l}},void 0)).fileURLToPath(s.dirname(n))}let a=n.lastIndexOf(M);if(a===-1)throw new Error("Could not extract indexURL path from pyodide module location");return n.slice(0,a)}o(X,"calculateDirname");function Q(t){return t.substring(0,t.lastIndexOf("/")+1)||globalThis.location?.toString()||"."}o(Q,"calculateInstallBaseUrl");function Z(t){let n=t.FS,a=t.FS.filesystems.MEMFS,s=t.PATH,l={DIR_MODE:16895,FILE_MODE:33279,mount:o(function(u){if(!u.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return a.mount.apply(null,arguments)},"mount"),syncfs:o(async(u,c,d)=>{try{let Ct=l.getLocalSet(u),ar=await l.getRemoteSet(u),en=c?ar:Ct,tn=c?Ct:ar;await l.reconcile(u,en,tn),d(null)}catch(Ct){d(Ct)}},"syncfs"),getLocalSet:o(u=>{let c=Object.create(null);function d(en){return en!=="."&&en!==".."}o(d,"isRealDir");function Ct(en){return tn=>s.join2(en,tn)}o(Ct,"toAbsolute");let ar=n.readdir(u.mountpoint).filter(d).map(Ct(u.mountpoint));for(;ar.length;){let en=ar.pop(),tn=n.stat(en);n.isDir(tn.mode)&&ar.push.apply(ar,n.readdir(en).filter(d).map(Ct(en))),c[en]={timestamp:tn.mtime,mode:tn.mode}}return{type:"local",entries:c}},"getLocalSet"),getRemoteSet:o(async u=>{let c=Object.create(null),d=await ve(u.opts.fileSystemHandle);for(let[Ct,ar]of d)Ct!=="."&&(c[s.join2(u.mountpoint,Ct)]={timestamp:ar.kind==="file"?new Date((await ar.getFile()).lastModified):new Date,mode:ar.kind==="file"?l.FILE_MODE:l.DIR_MODE});return{type:"remote",entries:c,handles:d}},"getRemoteSet"),loadLocalEntry:o(u=>{let c=n.lookupPath(u).node,d=n.stat(u);if(n.isDir(d.mode))return{timestamp:d.mtime,mode:d.mode};if(n.isFile(d.mode))return c.contents=a.getFileDataAsTypedArray(c),{timestamp:d.mtime,mode:d.mode,contents:c.contents};throw new Error("node type not supported")},"loadLocalEntry"),storeLocalEntry:o((u,c)=>{if(n.isDir(c.mode))n.mkdirTree(u,c.mode);else if(n.isFile(c.mode))n.writeFile(u,c.contents,{canOwn:!0});else throw new Error("node type not supported");n.chmod(u,c.mode),n.utime(u,c.timestamp,c.timestamp)},"storeLocalEntry"),removeLocalEntry:o(u=>{var c=n.stat(u);n.isDir(c.mode)?n.rmdir(u):n.isFile(c.mode)&&n.unlink(u)},"removeLocalEntry"),loadRemoteEntry:o(async u=>{if(u.kind==="file"){let c=await u.getFile();return{contents:new Uint8Array(await c.arrayBuffer()),mode:l.FILE_MODE,timestamp:new Date(c.lastModified)}}else{if(u.kind==="directory")return{mode:l.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+u.kind)}},"loadRemoteEntry"),storeRemoteEntry:o(async(u,c,d)=>{let Ct=u.get(s.dirname(c)),ar=n.isFile(d.mode)?await Ct.getFileHandle(s.basename(c),{create:!0}):await Ct.getDirectoryHandle(s.basename(c),{create:!0});if(ar.kind==="file"){let en=await ar.createWritable();await en.write(d.contents),await en.close()}u.set(c,ar)},"storeRemoteEntry"),removeRemoteEntry:o(async(u,c)=>{await u.get(s.dirname(c)).removeEntry(s.basename(c)),u.delete(c)},"removeRemoteEntry"),reconcile:o(async(u,c,d)=>{let Ct=0,ar=[];Object.keys(c.entries).forEach(function(on){let cn=c.entries[on],dn=d.entries[on];(!dn||n.isFile(cn.mode)&&cn.timestamp.getTime()>dn.timestamp.getTime())&&(ar.push(on),Ct++)}),ar.sort();let en=[];if(Object.keys(d.entries).forEach(function(on){c.entries[on]||(en.push(on),Ct++)}),en.sort().reverse(),!Ct)return;let tn=c.type==="remote"?c.handles:d.handles;for(let on of ar){let cn=s.normalize(on.replace(u.mountpoint,"/")).substring(1);if(d.type==="local"){let dn=tn.get(cn),Cn=await l.loadRemoteEntry(dn);l.storeLocalEntry(on,Cn)}else{let dn=l.loadLocalEntry(on);await l.storeRemoteEntry(tn,cn,dn)}}for(let on of en)if(d.type==="local")l.removeLocalEntry(on);else{let cn=s.normalize(on.replace(u.mountpoint,"/")).substring(1);await l.removeRemoteEntry(tn,cn)}},"reconcile")};t.FS.filesystems.NATIVEFS_ASYNC=l}o(Z,"initializeNativeFS");var ve=o(async t=>{let n=[];async function a(l){for await(let u of l.values())n.push(u),u.kind==="directory"&&await a(u)}o(a,"collect"),await a(t);let s=new Map;s.set(".",t);for(let l of n){let u=(await t.resolve(l)).join("/");s.set(u,l)}return s},"getFsHandles");W("AGFzbQEAAAABDANfAGAAAW9gAW8BfwMDAgECByECD2NyZWF0ZV9zZW50aW5lbAAAC2lzX3NlbnRpbmVsAAEKEwIHAPsBAPsbCwkAIAD7GvsUAAs=");var Se=(async function(){globalThis.navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&typeof navigator.maxTouchPoints<"u"&&navigator.maxTouchPoints>1)})();async function te(){let t=await Se;if(t)return t.exports;let n=Symbol("error marker");return{create_sentinel:o(()=>n,"create_sentinel"),is_sentinel:o(a=>a===n,"is_sentinel")}}o(te,"getSentinelImport");function ne(t){let n={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:Ne(t),print:t.stdout,printErr:t.stderr,onExit(a){n.exitCode=a},thisProgram:t._sysExecutable,arguments:t.args,API:{config:t},locateFile:o(a=>t.indexURL+a,"locateFile"),instantiateWasm:Fe(t.indexURL)};return n}o(ne,"createSettings");function we(t){return function(n){let a="/";try{n.FS.mkdirTree(t)}catch(s){console.error(`Error occurred while making a home directory '${t}':`),console.error(s),console.error(`Using '${a}' for a home directory instead`),t=a}n.FS.chdir(t)}}o(we,"createHomeDirectory");function Ee(t){return function(n){Object.assign(n.ENV,t)}}o(Ee,"setEnvironment");function Pe(t){return t?[async n=>{n.addRunDependency("fsInitHook");try{await t(n.FS,{sitePackages:n.API.sitePackages})}finally{n.removeRunDependency("fsInitHook")}}]:[]}o(Pe,"callFsInitHook");function ke(t){let n=t.HEAPU32[t._Py_Version>>>2],a=n>>>24&255,s=n>>>16&255,l=n>>>8&255;return[a,s,l]}o(ke,"computeVersionTuple");function Ie(t){let n=K(t);return async a=>{a.API.pyVersionTuple=ke(a);let[s,l]=a.API.pyVersionTuple;a.FS.mkdirTree("/lib"),a.API.sitePackages=`/lib/python${s}.${l}/site-packages`,a.FS.mkdirTree(a.API.sitePackages),a.addRunDependency("install-stdlib");try{let u=await n;a.FS.writeFile(`/lib/python${s}${l}.zip`,u)}catch(u){console.error("Error occurred while installing the standard library:"),console.error(u)}finally{a.removeRunDependency("install-stdlib")}}}o(Ie,"installStdlib");function Ne(t){let n;return t.stdLibURL!=null?n=t.stdLibURL:n=t.indexURL+"python_stdlib.zip",[Ie(n),we(t.env.HOME),Ee(t.env),Z,...Pe(t.fsInit)]}o(Ne,"getFileSystemInitializationFuncs");function Fe(t){if(typeof WasmOffsetConverter<"u")return;let{binary:n,response:a}=F(t+"pyodide.asm.wasm"),s=te();return function(l,u){return(async function(){l.sentinel=await s;try{let c;a?c=await WebAssembly.instantiateStreaming(a,l):c=await WebAssembly.instantiate(await n,l);let{instance:d,module:Ct}=c;u(d,Ct)}catch(c){console.warn("wasm instantiation failed!"),console.warn(c)}})(),{}}}o(Fe,"getInstantiateWasmFunc");var re="0.28.2";function _(t){return t===void 0||t.endsWith("/")?t:t+"/"}o(_,"withTrailingSlash");var B=re;async function at(t={}){if(t.lockFileContents&&t.lockFileURL)throw new Error("Can't pass both lockFileContents and lockFileURL");await C$1();let n=t.indexURL||await X();n=_(N(n));let a=t;if(a.packageBaseUrl=_(a.packageBaseUrl),a.cdnUrl=_(a.packageBaseUrl??`https://cdn.jsdelivr.net/pyodide/v${B}/full/`),!t.lockFileContents){let tn=t.lockFileURL??n+"pyodide-lock.json";a.lockFileContents=G(tn),a.packageBaseUrl??=Q(tn)}a.indexURL=n,a.packageCacheDir&&(a.packageCacheDir=_(N(a.packageCacheDir)));let s={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,args:[],env:{},packages:[],packageCacheDir:a.packageBaseUrl,enableRunUntilComplete:!0,checkAPIVersion:!0,BUILD_ID:"941a75c165c70d9d65a059137df0382b4c6a7747ff5f3de2b264ce4a2fb36cf5"},l=Object.assign(s,a);l.env.HOME??="/home/pyodide",l.env.PYTHONINSPECT??="1";let u=ne(l),c=u.API;if(c.lockFilePromise=Promise.resolve(a.lockFileContents),typeof _createPyodideModule!="function"){let tn=`${l.indexURL}pyodide.asm.js`;await I(tn)}let d;if(t._loadSnapshot){let tn=await t._loadSnapshot;ArrayBuffer.isView(tn)?d=tn:d=new Uint8Array(tn),u.noInitialRun=!0,u.INITIAL_MEMORY=d.length}let Ct=await _createPyodideModule(u);if(u.exitCode!==void 0)throw new Ct.ExitStatus(u.exitCode);if(t.pyproxyToStringRepr&&c.setPyProxyToStringMethod(!0),t.convertNullToNone&&c.setCompatNullToNone(!0),c.version!==B&&l.checkAPIVersion)throw new Error(`Pyodide version does not match: '${B}' <==> '${c.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);Ct.locateFile=tn=>{throw tn.endsWith(".so")?new Error(`Failed to find dynamic library "${tn}"`):new Error(`Unexpected call to locateFile("${tn}")`)};let ar;d&&(ar=c.restoreSnapshot(d));let en=c.finalizeBootstrap(ar,t._snapshotDeserializer);return c.sys.path.insert(0,""),c._pyodide.set_excepthook(),await c.packageIndexReady,c.initializeStreams(l.stdin,l.stdout,l.stderr),en}o(at,"loadPyodide");async function initPyodideAndSympy(){const t=await at({indexURL:`https://cdn.jsdelivr.net/pyodide/v${B}/full/`});await t.loadPackage("sympy");var n=`
from sympy import Matrix, symbols, simplify, Abs, I, fraction, solve
from sympy.printing.mathml import mathml`;return await t.runPythonAsync(n),t}const HtmlTooltip=styled(({className:t,...n})=>jsxRuntimeExports.jsx(Tooltip,{...n,classes:{popper:t}}))(({theme:t})=>({[`& .${tooltipClasses.tooltip}`]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"}}));function formatMathML(t,n,a){return`<math><mfrac><mrow><mi>${n}</mi></mrow><mrow><msub><mi>${a[0]=="vin"?"V":"I"}</mi><mi>in</mi></msub></mrow></mfrac><mo>=</mo>${t}</math>`}function ChoseTF({setResults:t,nodes:n,fullyConnectedComponents:a,componentValuesSolved:s}){const[l,u]=reactExports.useState("algebrite"),[c,d]=reactExports.useState(!1),[Ct,ar]=reactExports.useState(null),en=[],tn=[];for(const dn in a)["vin","iin"].includes(a[dn].type)&&tn.push(a[dn].type);for(const dn in a)["vprobe","iprobe"].includes(a[dn].type)&&en.push(dn);const on=en.filter(dn=>a[dn].type=="vprobe");on.length==2&&(en.push(`${on[0]}-${on[1]}`),en.push(`${on[1]}-${on[0]}`));const cn={};for(const dn in a)dn in s&&(cn[dn]=s[dn]);return jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[tn.length==0||en.length==0?jsxRuntimeExports.jsx(Box,{sx:{color:"red"},children:jsxRuntimeExports.jsxs("p",{children:["No path found from ",jsxRuntimeExports.jsx("b",{children:"vin"})," or ",jsxRuntimeExports.jsx("b",{children:"iin"})," to ",jsxRuntimeExports.jsx("b",{children:"vprobe"})," or ",jsxRuntimeExports.jsx("b",{children:"iprobe"})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Grid$1,{size:12,children:"Calculate..."}),en.map(dn=>{const Cn=dn.includes("-")?dn.split("-"):[dn];return jsxRuntimeExports.jsx(Grid$1,{size:{xs:4,sm:2,lg:1},children:jsxRuntimeExports.jsx(Button,{variant:"contained",loading:c,color:"info",fullWidth:!0,sx:{py:1,justifyContent:"center",fontSize:"1.4em"},onClick:async()=>{d(!0),t({...emptyResults});const[In,ix,ax,ox,sx]=await build_and_solve_mna(n.length,Cn,a,cn,Ct,l),ux=formatMathML(ix,dn,tn),cx=formatMathML(ox,dn,tn);t({text:In,mathML:ux,complexResponse:ax,bilinearRaw:"",bilinearMathML:"",numericML:cx,numericText:sx,solver:Ct}),d(!1)},children:jsxRuntimeExports.jsx("math",{xmlns:"http://www.w3.org/1998/Math/MathML",children:jsxRuntimeExports.jsxs("mfrac",{children:[jsxRuntimeExports.jsx("mi",{children:dn}),tn[0]=="vin"?jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"V"}),jsxRuntimeExports.jsx("mi",{children:"in"})]}):jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"I"}),jsxRuntimeExports.jsx("mi",{children:"in"})]})]})})},dn)},dn)})]}),jsxRuntimeExports.jsx(Box,{display:"flex",gap:1,children:jsxRuntimeExports.jsxs(ToggleButtonGroup,{color:"primary",value:l,exclusive:!0,children:[jsxRuntimeExports.jsx(HtmlTooltip,{title:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h6",{children:"Chose Algebra solver"}),"These are JavaScript based solvers. It's already loaded and is fine for most cases"]}),children:jsxRuntimeExports.jsx(ToggleButton,{value:"algebrite",onClick:()=>{t({...emptyResults}),ar(null),u("algebrite")},children:c?jsxRuntimeExports.jsx(CircularProgress,{size:20,color:"inherit"}):"Algebrite + Yaffle"})}),jsxRuntimeExports.jsx(HtmlTooltip,{title:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h6",{children:"Chose Algebra solver"}),"This is a Python based solver. Chosing this will download 10MB of files and run Python inside the browser, enabling more features such as giving a pretty numeric result, and more advanced algebraic simplification."]}),children:jsxRuntimeExports.jsx(ToggleButton,{value:"sympy",onClick:async()=>{d(!0),t({...emptyResults});const dn=await initPyodideAndSympy();ar(dn),d(!1),u("sympy")},children:c?jsxRuntimeExports.jsx(CircularProgress,{size:20,color:"inherit"}):"SymPy"})})]})})]})}var bundle_min$1={exports:{}},bundle_min=bundle_min$1.exports,hasRequiredBundle_min;function requireBundle_min(){return hasRequiredBundle_min||(hasRequiredBundle_min=1,(function(t,n){(function(a,s){t.exports=s()})(bundle_min,(()=>(()=>{var a={4582:(c,d)=>{function Ct(tn,on){return on===void 0&&(on=Object),on&&typeof on.freeze=="function"?on.freeze(tn):tn}var ar=Ct({HTML:"text/html",isHTML:function(tn){return tn===ar.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),en=Ct({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(tn){return tn===en.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});d.assign=function(tn,on){if(tn===null||typeof tn!="object")throw new TypeError("target is not an object");for(var cn in on)Object.prototype.hasOwnProperty.call(on,cn)&&(tn[cn]=on[cn]);return tn},d.find=function(tn,on,cn){if(cn===void 0&&(cn=Array.prototype),tn&&typeof cn.find=="function")return cn.find.call(tn,on);for(var dn=0;dn<tn.length;dn++)if(Object.prototype.hasOwnProperty.call(tn,dn)){var Cn=tn[dn];if(on.call(void 0,Cn,dn,tn))return Cn}},d.freeze=Ct,d.MIME_TYPE=ar,d.NAMESPACE=en},5752:(c,d,Ct)=>{var ar=Ct(4582),en=Ct(4722),tn=Ct(6559),on=Ct(4466),cn=en.DOMImplementation,dn=ar.NAMESPACE,Cn=on.ParseError,In=on.XMLReader;function ix(gx){return gx.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function ax(gx){this.options=gx||{locator:{}}}function ox(){this.cdata=!1}function sx(gx,fx){fx.lineNumber=gx.lineNumber,fx.columnNumber=gx.columnNumber}function ux(gx){if(gx)return`
@`+(gx.systemId||"")+"#[line:"+gx.lineNumber+",col:"+gx.columnNumber+"]"}function cx(gx,fx,dx){return typeof gx=="string"?gx.substr(fx,dx):gx.length>=fx+dx||fx?new java.lang.String(gx,fx,dx)+"":gx}function hx(gx,fx){gx.currentElement?gx.currentElement.appendChild(fx):gx.doc.appendChild(fx)}ax.prototype.parseFromString=function(gx,fx){var dx=this.options,mx=new In,vx=dx.domBuilder||new ox,bx=dx.errorHandler,xx=dx.locator,_x=dx.xmlns||{},Ex=/\/x?html?$/.test(fx),Tx=Ex?tn.HTML_ENTITIES:tn.XML_ENTITIES;xx&&vx.setDocumentLocator(xx),mx.errorHandler=(function(Mx,Ax,Nx){if(!Mx){if(Ax instanceof ox)return Ax;Mx=Ax}var Ux={},Rx=Mx instanceof Function;function Ox(Px){var $x=Mx[Px];!$x&&Rx&&($x=Mx.length==2?function(Lx){Mx(Px,Lx)}:Mx),Ux[Px]=$x&&function(Lx){$x("[xmldom "+Px+"]	"+Lx+ux(Nx))}||function(){}}return Nx=Nx||{},Ox("warning"),Ox("error"),Ox("fatalError"),Ux})(bx,vx,xx),mx.domBuilder=dx.domBuilder||vx,Ex&&(_x[""]=dn.HTML),_x.xml=_x.xml||dn.XML;var Cx=dx.normalizeLineEndings||ix;return gx&&typeof gx=="string"?mx.parse(Cx(gx),_x,Tx):mx.errorHandler.error("invalid doc source"),vx.doc},ox.prototype={startDocument:function(){this.doc=new cn().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(gx,fx,dx,mx){var vx=this.doc,bx=vx.createElementNS(gx,dx||fx),xx=mx.length;hx(this,bx),this.currentElement=bx,this.locator&&sx(this.locator,bx);for(var _x=0;_x<xx;_x++){gx=mx.getURI(_x);var Ex=mx.getValue(_x),Tx=(dx=mx.getQName(_x),vx.createAttributeNS(gx,dx));this.locator&&sx(mx.getLocator(_x),Tx),Tx.value=Tx.nodeValue=Ex,bx.setAttributeNode(Tx)}},endElement:function(gx,fx,dx){var mx=this.currentElement;mx.tagName,this.currentElement=mx.parentNode},startPrefixMapping:function(gx,fx){},endPrefixMapping:function(gx){},processingInstruction:function(gx,fx){var dx=this.doc.createProcessingInstruction(gx,fx);this.locator&&sx(this.locator,dx),hx(this,dx)},ignorableWhitespace:function(gx,fx,dx){},characters:function(gx,fx,dx){if(gx=cx.apply(this,arguments)){if(this.cdata)var mx=this.doc.createCDATASection(gx);else mx=this.doc.createTextNode(gx);this.currentElement?this.currentElement.appendChild(mx):/^\s*$/.test(gx)&&this.doc.appendChild(mx),this.locator&&sx(this.locator,mx)}},skippedEntity:function(gx){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(gx){(this.locator=gx)&&(gx.lineNumber=0)},comment:function(gx,fx,dx){gx=cx.apply(this,arguments);var mx=this.doc.createComment(gx);this.locator&&sx(this.locator,mx),hx(this,mx)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(gx,fx,dx){var mx=this.doc.implementation;if(mx&&mx.createDocumentType){var vx=mx.createDocumentType(gx,fx,dx);this.locator&&sx(this.locator,vx),hx(this,vx),this.doc.doctype=vx}},warning:function(gx){console.warn("[xmldom warning]	"+gx,ux(this.locator))},error:function(gx){console.error("[xmldom error]	"+gx,ux(this.locator))},fatalError:function(gx){throw new Cn(gx,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(gx){ox.prototype[gx]=function(){return null}})),d.DOMParser=ax},4722:(c,d,Ct)=>{var ar=Ct(4582),en=ar.find,tn=ar.NAMESPACE;function on(Bx){return Bx!==""}function cn(Bx,Fx){return Bx.hasOwnProperty(Fx)||(Bx[Fx]=!0),Bx}function dn(Bx){if(!Bx)return[];var Fx=(function(Zx){return Zx?Zx.split(/[\t\n\f\r ]+/).filter(on):[]})(Bx);return Object.keys(Fx.reduce(cn,{}))}function Cn(Bx,Fx){for(var Zx in Bx)Object.prototype.hasOwnProperty.call(Bx,Zx)&&(Fx[Zx]=Bx[Zx])}function In(Bx,Fx){var Zx=Bx.prototype;if(!(Zx instanceof Fx)){let mE=function(){};var Jx=mE;mE.prototype=Fx.prototype,Cn(Zx,mE=new mE),Bx.prototype=Zx=mE}Zx.constructor!=Bx&&(typeof Bx!="function"&&console.error("unknown Class:"+Bx),Zx.constructor=Bx)}var ix={},ax=ix.ELEMENT_NODE=1,ox=ix.ATTRIBUTE_NODE=2,sx=ix.TEXT_NODE=3,ux=ix.CDATA_SECTION_NODE=4,cx=ix.ENTITY_REFERENCE_NODE=5,hx=ix.ENTITY_NODE=6,gx=ix.PROCESSING_INSTRUCTION_NODE=7,fx=ix.COMMENT_NODE=8,dx=ix.DOCUMENT_NODE=9,mx=ix.DOCUMENT_TYPE_NODE=10,vx=ix.DOCUMENT_FRAGMENT_NODE=11,bx=ix.NOTATION_NODE=12,xx={},_x={},Ex=(xx.INDEX_SIZE_ERR=(_x[1]="Index size error",1),xx.DOMSTRING_SIZE_ERR=(_x[2]="DOMString size error",2),xx.HIERARCHY_REQUEST_ERR=(_x[3]="Hierarchy request error",3)),Tx=(xx.WRONG_DOCUMENT_ERR=(_x[4]="Wrong document",4),xx.INVALID_CHARACTER_ERR=(_x[5]="Invalid character",5),xx.NO_DATA_ALLOWED_ERR=(_x[6]="No data allowed",6),xx.NO_MODIFICATION_ALLOWED_ERR=(_x[7]="No modification allowed",7),xx.NOT_FOUND_ERR=(_x[8]="Not found",8)),Cx=(xx.NOT_SUPPORTED_ERR=(_x[9]="Not supported",9),xx.INUSE_ATTRIBUTE_ERR=(_x[10]="Attribute in use",10));function Mx(Bx,Fx){if(Fx instanceof Error)var Zx=Fx;else Zx=this,Error.call(this,_x[Bx]),this.message=_x[Bx],Error.captureStackTrace&&Error.captureStackTrace(this,Mx);return Zx.code=Bx,Fx&&(this.message=this.message+": "+Fx),Zx}function Ax(){}function Nx(Bx,Fx){this._node=Bx,this._refresh=Fx,Ux(this)}function Ux(Bx){var Fx=Bx._node._inc||Bx._node.ownerDocument._inc;if(Bx._inc!==Fx){var Zx=Bx._refresh(Bx._node);if(IE(Bx,"length",Zx.length),!Bx.$$length||Zx.length<Bx.$$length)for(var Jx=Zx.length;Jx in Bx;Jx++)Object.prototype.hasOwnProperty.call(Bx,Jx)&&delete Bx[Jx];Cn(Zx,Bx),Bx._inc=Fx}}function Rx(){}function Ox(Bx,Fx){for(var Zx=Bx.length;Zx--;)if(Bx[Zx]===Fx)return Zx}function Px(Bx,Fx,Zx,Jx){if(Jx?Fx[Ox(Fx,Jx)]=Zx:Fx[Fx.length++]=Zx,Bx){Zx.ownerElement=Bx;var mE=Bx.ownerDocument;mE&&(Jx&&Vx(mE,Bx,Jx),(function(NE,$E,LE){NE&&NE._inc++,LE.namespaceURI===tn.XMLNS&&($E._nsMap[LE.prefix?LE.localName:""]=LE.value)})(mE,Bx,Zx))}}function $x(Bx,Fx,Zx){var Jx=Ox(Fx,Zx);if(!(Jx>=0))throw new Mx(Tx,new Error(Bx.tagName+"@"+Zx));for(var mE=Fx.length-1;Jx<mE;)Fx[Jx]=Fx[++Jx];if(Fx.length=mE,Bx){var NE=Bx.ownerDocument;NE&&(Vx(NE,Bx,Zx),Zx.ownerElement=null)}}function Lx(){}function zx(){}function qx(Bx){return(Bx=="<"?"&lt;":Bx==">"&&"&gt;")||Bx=="&"&&"&amp;"||Bx=='"'&&"&quot;"||"&#"+Bx.charCodeAt()+";"}function jx(Bx,Fx){if(Fx(Bx))return!0;if(Bx=Bx.firstChild)do if(jx(Bx,Fx))return!0;while(Bx=Bx.nextSibling)}function Hx(){this.ownerDocument=this}function Vx(Bx,Fx,Zx,Jx){Bx&&Bx._inc++,Zx.namespaceURI===tn.XMLNS&&delete Fx._nsMap[Zx.prefix?Zx.localName:""]}function nE(Bx,Fx,Zx){if(Bx&&Bx._inc){Bx._inc++;var Jx=Fx.childNodes;if(Zx)Jx[Jx.length++]=Zx;else{for(var mE=Fx.firstChild,NE=0;mE;)Jx[NE++]=mE,mE=mE.nextSibling;Jx.length=NE,delete Jx[Jx.length]}}}function Wx(Bx,Fx){var Zx=Fx.previousSibling,Jx=Fx.nextSibling;return Zx?Zx.nextSibling=Jx:Bx.firstChild=Jx,Jx?Jx.previousSibling=Zx:Bx.lastChild=Zx,Fx.parentNode=null,Fx.previousSibling=null,Fx.nextSibling=null,nE(Bx.ownerDocument,Bx),Fx}function tE(Bx){return Bx&&Bx.nodeType===zx.DOCUMENT_TYPE_NODE}function lE(Bx){return Bx&&Bx.nodeType===zx.ELEMENT_NODE}function iE(Bx){return Bx&&Bx.nodeType===zx.TEXT_NODE}function Xx(Bx,Fx){var Zx=Bx.childNodes||[];if(en(Zx,lE)||tE(Fx))return!1;var Jx=en(Zx,tE);return!(Fx&&Jx&&Zx.indexOf(Jx)>Zx.indexOf(Fx))}function CE(Bx,Fx){var Zx=Bx.childNodes||[];if(en(Zx,(function(mE){return lE(mE)&&mE!==Fx})))return!1;var Jx=en(Zx,tE);return!(Fx&&Jx&&Zx.indexOf(Jx)>Zx.indexOf(Fx))}function RE(Bx,Fx,Zx){var Jx=Bx.childNodes||[],mE=Fx.childNodes||[];if(Fx.nodeType===zx.DOCUMENT_FRAGMENT_NODE){var NE=mE.filter(lE);if(NE.length>1||en(mE,iE))throw new Mx(Ex,"More than one element or text in fragment");if(NE.length===1&&!Xx(Bx,Zx))throw new Mx(Ex,"Element in fragment can not be inserted before doctype")}if(lE(Fx)&&!Xx(Bx,Zx))throw new Mx(Ex,"Only one element can be added and only after doctype");if(tE(Fx)){if(en(Jx,tE))throw new Mx(Ex,"Only one doctype is allowed");var $E=en(Jx,lE);if(Zx&&Jx.indexOf($E)<Jx.indexOf(Zx))throw new Mx(Ex,"Doctype can only be inserted before an element");if(!Zx&&$E)throw new Mx(Ex,"Doctype can not be appended since element is present")}}function SE(Bx,Fx,Zx){var Jx=Bx.childNodes||[],mE=Fx.childNodes||[];if(Fx.nodeType===zx.DOCUMENT_FRAGMENT_NODE){var NE=mE.filter(lE);if(NE.length>1||en(mE,iE))throw new Mx(Ex,"More than one element or text in fragment");if(NE.length===1&&!CE(Bx,Zx))throw new Mx(Ex,"Element in fragment can not be inserted before doctype")}if(lE(Fx)&&!CE(Bx,Zx))throw new Mx(Ex,"Only one element can be added and only after doctype");if(tE(Fx)){if(en(Jx,(function(LE){return tE(LE)&&LE!==Zx})))throw new Mx(Ex,"Only one doctype is allowed");var $E=en(Jx,lE);if(Zx&&Jx.indexOf($E)<Jx.indexOf(Zx))throw new Mx(Ex,"Doctype can only be inserted before an element")}}function EE(Bx,Fx,Zx,Jx){(function(BE,jE,JE){if(!(function(YE){return YE&&(YE.nodeType===zx.DOCUMENT_NODE||YE.nodeType===zx.DOCUMENT_FRAGMENT_NODE||YE.nodeType===zx.ELEMENT_NODE)})(BE))throw new Mx(Ex,"Unexpected parent node type "+BE.nodeType);if(JE&&JE.parentNode!==BE)throw new Mx(Tx,"child not in parent");if(!(function(YE){return YE&&(lE(YE)||iE(YE)||tE(YE)||YE.nodeType===zx.DOCUMENT_FRAGMENT_NODE||YE.nodeType===zx.COMMENT_NODE||YE.nodeType===zx.PROCESSING_INSTRUCTION_NODE)})(jE)||tE(jE)&&BE.nodeType!==zx.DOCUMENT_NODE)throw new Mx(Ex,"Unexpected node type "+jE.nodeType+" for parent node type "+BE.nodeType)})(Bx,Fx,Zx),Bx.nodeType===zx.DOCUMENT_NODE&&(Jx||RE)(Bx,Fx,Zx);var mE=Fx.parentNode;if(mE&&mE.removeChild(Fx),Fx.nodeType===vx){var NE=Fx.firstChild;if(NE==null)return Fx;var $E=Fx.lastChild}else NE=$E=Fx;var LE=Zx?Zx.previousSibling:Bx.lastChild;NE.previousSibling=LE,$E.nextSibling=Zx,LE?LE.nextSibling=NE:Bx.firstChild=NE,Zx==null?Bx.lastChild=$E:Zx.previousSibling=$E;do NE.parentNode=Bx;while(NE!==$E&&(NE=NE.nextSibling));return nE(Bx.ownerDocument||Bx,Bx),Fx.nodeType==vx&&(Fx.firstChild=Fx.lastChild=null),Fx}function FE(){this._nsMap={}}function AE(){}function ZE(){}function Dx(){}function kx(){}function Yx(){}function Kx(){}function aE(){}function eE(){}function gE(){}function dE(){}function bE(){}function xE(){}function OE(Bx,Fx){var Zx=[],Jx=this.nodeType==9&&this.documentElement||this,mE=Jx.prefix,NE=Jx.namespaceURI;if(NE&&mE==null&&(mE=Jx.lookupPrefix(NE))==null)var $E=[{namespace:NE,prefix:null}];return hE(this,Zx,Bx,Fx,$E),Zx.join("")}function PE(Bx,Fx,Zx){var Jx=Bx.prefix||"",mE=Bx.namespaceURI;if(!mE||Jx==="xml"&&mE===tn.XML||mE===tn.XMLNS)return!1;for(var NE=Zx.length;NE--;){var $E=Zx[NE];if($E.prefix===Jx)return $E.namespace!==mE}return!0}function sE(Bx,Fx,Zx){Bx.push(" ",Fx,'="',Zx.replace(/[<>&"\t\n\r]/g,qx),'"')}function hE(Bx,Fx,Zx,Jx,mE){if(mE||(mE=[]),Jx){if(!(Bx=Jx(Bx)))return;if(typeof Bx=="string")return void Fx.push(Bx)}switch(Bx.nodeType){case ax:var NE=Bx.attributes,$E=NE.length,LE=Bx.firstChild,BE=Bx.tagName,jE=BE;if(!(Zx=tn.isHTML(Bx.namespaceURI)||Zx)&&!Bx.prefix&&Bx.namespaceURI){for(var JE,YE=0;YE<NE.length;YE++)if(NE.item(YE).name==="xmlns"){JE=NE.item(YE).value;break}if(!JE){for(var AS=mE.length-1;AS>=0;AS--)if((NS=mE[AS]).prefix===""&&NS.namespace===Bx.namespaceURI){JE=NS.namespace;break}}if(JE!==Bx.namespaceURI)for(AS=mE.length-1;AS>=0;AS--){var NS;if((NS=mE[AS]).namespace===Bx.namespaceURI){NS.prefix&&(jE=NS.prefix+":"+BE);break}}}Fx.push("<",jE);for(var dS=0;dS<$E;dS++)(US=NE.item(dS)).prefix=="xmlns"?mE.push({prefix:US.localName,namespace:US.value}):US.nodeName=="xmlns"&&mE.push({prefix:"",namespace:US.value});for(dS=0;dS<$E;dS++){var US,LS,zS;PE(US=NE.item(dS),0,mE)&&(sE(Fx,(LS=US.prefix||"")?"xmlns:"+LS:"xmlns",zS=US.namespaceURI),mE.push({prefix:LS,namespace:zS})),hE(US,Fx,Zx,Jx,mE)}if(BE===jE&&PE(Bx,0,mE)&&(sE(Fx,(LS=Bx.prefix||"")?"xmlns:"+LS:"xmlns",zS=Bx.namespaceURI),mE.push({prefix:LS,namespace:zS})),LE||Zx&&!/^(?:meta|link|img|br|hr|input)$/i.test(BE)){if(Fx.push(">"),Zx&&/^script$/i.test(BE))for(;LE;)LE.data?Fx.push(LE.data):hE(LE,Fx,Zx,Jx,mE.slice()),LE=LE.nextSibling;else for(;LE;)hE(LE,Fx,Zx,Jx,mE.slice()),LE=LE.nextSibling;Fx.push("</",jE,">")}else Fx.push("/>");return;case dx:case vx:for(LE=Bx.firstChild;LE;)hE(LE,Fx,Zx,Jx,mE.slice()),LE=LE.nextSibling;return;case ox:return sE(Fx,Bx.name,Bx.value);case sx:return Fx.push(Bx.data.replace(/[<&>]/g,qx));case ux:return Fx.push("<![CDATA[",Bx.data,"]]>");case fx:return Fx.push("<!--",Bx.data,"-->");case mx:var qE=Bx.publicId,ME=Bx.systemId;if(Fx.push("<!DOCTYPE ",Bx.name),qE)Fx.push(" PUBLIC ",qE),ME&&ME!="."&&Fx.push(" ",ME),Fx.push(">");else if(ME&&ME!=".")Fx.push(" SYSTEM ",ME,">");else{var GE=Bx.internalSubset;GE&&Fx.push(" [",GE,"]"),Fx.push(">")}return;case gx:return Fx.push("<?",Bx.target," ",Bx.data,"?>");case cx:return Fx.push("&",Bx.nodeName,";");default:Fx.push("??",Bx.nodeName)}}function TE(Bx,Fx,Zx){var Jx;switch(Fx.nodeType){case ax:(Jx=Fx.cloneNode(!1)).ownerDocument=Bx;case vx:break;case ox:Zx=!0}if(Jx||(Jx=Fx.cloneNode(!1)),Jx.ownerDocument=Bx,Jx.parentNode=null,Zx)for(var mE=Fx.firstChild;mE;)Jx.appendChild(TE(Bx,mE,Zx)),mE=mE.nextSibling;return Jx}function vE(Bx,Fx,Zx){var Jx=new Fx.constructor;for(var mE in Fx)if(Object.prototype.hasOwnProperty.call(Fx,mE)){var NE=Fx[mE];typeof NE!="object"&&NE!=Jx[mE]&&(Jx[mE]=NE)}switch(Fx.childNodes&&(Jx.childNodes=new Ax),Jx.ownerDocument=Bx,Jx.nodeType){case ax:var $E=Fx.attributes,LE=Jx.attributes=new Rx,BE=$E.length;LE._ownerElement=Jx;for(var jE=0;jE<BE;jE++)Jx.setAttributeNode(vE(Bx,$E.item(jE),!0));break;case ox:Zx=!0}if(Zx)for(var JE=Fx.firstChild;JE;)Jx.appendChild(vE(Bx,JE,Zx)),JE=JE.nextSibling;return Jx}function IE(Bx,Fx,Zx){Bx[Fx]=Zx}xx.INVALID_STATE_ERR=(_x[11]="Invalid state",11),xx.SYNTAX_ERR=(_x[12]="Syntax error",12),xx.INVALID_MODIFICATION_ERR=(_x[13]="Invalid modification",13),xx.NAMESPACE_ERR=(_x[14]="Invalid namespace",14),xx.INVALID_ACCESS_ERR=(_x[15]="Invalid access",15),Mx.prototype=Error.prototype,Cn(xx,Mx),Ax.prototype={length:0,item:function(Bx){return Bx>=0&&Bx<this.length?this[Bx]:null},toString:function(Bx,Fx){for(var Zx=[],Jx=0;Jx<this.length;Jx++)hE(this[Jx],Zx,Bx,Fx);return Zx.join("")},filter:function(Bx){return Array.prototype.filter.call(this,Bx)},indexOf:function(Bx){return Array.prototype.indexOf.call(this,Bx)}},Nx.prototype.item=function(Bx){return Ux(this),this[Bx]||null},In(Nx,Ax),Rx.prototype={length:0,item:Ax.prototype.item,getNamedItem:function(Bx){for(var Fx=this.length;Fx--;){var Zx=this[Fx];if(Zx.nodeName==Bx)return Zx}},setNamedItem:function(Bx){var Fx=Bx.ownerElement;if(Fx&&Fx!=this._ownerElement)throw new Mx(Cx);var Zx=this.getNamedItem(Bx.nodeName);return Px(this._ownerElement,this,Bx,Zx),Zx},setNamedItemNS:function(Bx){var Fx,Zx=Bx.ownerElement;if(Zx&&Zx!=this._ownerElement)throw new Mx(Cx);return Fx=this.getNamedItemNS(Bx.namespaceURI,Bx.localName),Px(this._ownerElement,this,Bx,Fx),Fx},removeNamedItem:function(Bx){var Fx=this.getNamedItem(Bx);return $x(this._ownerElement,this,Fx),Fx},removeNamedItemNS:function(Bx,Fx){var Zx=this.getNamedItemNS(Bx,Fx);return $x(this._ownerElement,this,Zx),Zx},getNamedItemNS:function(Bx,Fx){for(var Zx=this.length;Zx--;){var Jx=this[Zx];if(Jx.localName==Fx&&Jx.namespaceURI==Bx)return Jx}return null}},Lx.prototype={hasFeature:function(Bx,Fx){return!0},createDocument:function(Bx,Fx,Zx){var Jx=new Hx;if(Jx.implementation=this,Jx.childNodes=new Ax,Jx.doctype=Zx||null,Zx&&Jx.appendChild(Zx),Fx){var mE=Jx.createElementNS(Bx,Fx);Jx.appendChild(mE)}return Jx},createDocumentType:function(Bx,Fx,Zx){var Jx=new Kx;return Jx.name=Bx,Jx.nodeName=Bx,Jx.publicId=Fx||"",Jx.systemId=Zx||"",Jx}},zx.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(Bx,Fx){return EE(this,Bx,Fx)},replaceChild:function(Bx,Fx){EE(this,Bx,Fx,SE),Fx&&this.removeChild(Fx)},removeChild:function(Bx){return Wx(this,Bx)},appendChild:function(Bx){return this.insertBefore(Bx,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Bx){return vE(this.ownerDocument||this,this,Bx)},normalize:function(){for(var Bx=this.firstChild;Bx;){var Fx=Bx.nextSibling;Fx&&Fx.nodeType==sx&&Bx.nodeType==sx?(this.removeChild(Fx),Bx.appendData(Fx.data)):(Bx.normalize(),Bx=Fx)}},isSupported:function(Bx,Fx){return this.ownerDocument.implementation.hasFeature(Bx,Fx)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(Bx){for(var Fx=this;Fx;){var Zx=Fx._nsMap;if(Zx){for(var Jx in Zx)if(Object.prototype.hasOwnProperty.call(Zx,Jx)&&Zx[Jx]===Bx)return Jx}Fx=Fx.nodeType==ox?Fx.ownerDocument:Fx.parentNode}return null},lookupNamespaceURI:function(Bx){for(var Fx=this;Fx;){var Zx=Fx._nsMap;if(Zx&&Object.prototype.hasOwnProperty.call(Zx,Bx))return Zx[Bx];Fx=Fx.nodeType==ox?Fx.ownerDocument:Fx.parentNode}return null},isDefaultNamespace:function(Bx){return this.lookupPrefix(Bx)==null}},Cn(ix,zx),Cn(ix,zx.prototype),Hx.prototype={nodeName:"#document",nodeType:dx,doctype:null,documentElement:null,_inc:1,insertBefore:function(Bx,Fx){if(Bx.nodeType==vx){for(var Zx=Bx.firstChild;Zx;){var Jx=Zx.nextSibling;this.insertBefore(Zx,Fx),Zx=Jx}return Bx}return EE(this,Bx,Fx),Bx.ownerDocument=this,this.documentElement===null&&Bx.nodeType===ax&&(this.documentElement=Bx),Bx},removeChild:function(Bx){return this.documentElement==Bx&&(this.documentElement=null),Wx(this,Bx)},replaceChild:function(Bx,Fx){EE(this,Bx,Fx,SE),Bx.ownerDocument=this,Fx&&this.removeChild(Fx),lE(Bx)&&(this.documentElement=Bx)},importNode:function(Bx,Fx){return TE(this,Bx,Fx)},getElementById:function(Bx){var Fx=null;return jx(this.documentElement,(function(Zx){if(Zx.nodeType==ax&&Zx.getAttribute("id")==Bx)return Fx=Zx,!0})),Fx},getElementsByClassName:function(Bx){var Fx=dn(Bx);return new Nx(this,(function(Zx){var Jx=[];return Fx.length>0&&jx(Zx.documentElement,(function(mE){if(mE!==Zx&&mE.nodeType===ax){var NE=mE.getAttribute("class");if(NE){var $E=Bx===NE;if(!$E){var LE=dn(NE);$E=Fx.every((BE=LE,function(jE){return BE&&BE.indexOf(jE)!==-1}))}$E&&Jx.push(mE)}}var BE})),Jx}))},createElement:function(Bx){var Fx=new FE;return Fx.ownerDocument=this,Fx.nodeName=Bx,Fx.tagName=Bx,Fx.localName=Bx,Fx.childNodes=new Ax,(Fx.attributes=new Rx)._ownerElement=Fx,Fx},createDocumentFragment:function(){var Bx=new dE;return Bx.ownerDocument=this,Bx.childNodes=new Ax,Bx},createTextNode:function(Bx){var Fx=new Dx;return Fx.ownerDocument=this,Fx.appendData(Bx),Fx},createComment:function(Bx){var Fx=new kx;return Fx.ownerDocument=this,Fx.appendData(Bx),Fx},createCDATASection:function(Bx){var Fx=new Yx;return Fx.ownerDocument=this,Fx.appendData(Bx),Fx},createProcessingInstruction:function(Bx,Fx){var Zx=new bE;return Zx.ownerDocument=this,Zx.tagName=Zx.nodeName=Zx.target=Bx,Zx.nodeValue=Zx.data=Fx,Zx},createAttribute:function(Bx){var Fx=new AE;return Fx.ownerDocument=this,Fx.name=Bx,Fx.nodeName=Bx,Fx.localName=Bx,Fx.specified=!0,Fx},createEntityReference:function(Bx){var Fx=new gE;return Fx.ownerDocument=this,Fx.nodeName=Bx,Fx},createElementNS:function(Bx,Fx){var Zx=new FE,Jx=Fx.split(":"),mE=Zx.attributes=new Rx;return Zx.childNodes=new Ax,Zx.ownerDocument=this,Zx.nodeName=Fx,Zx.tagName=Fx,Zx.namespaceURI=Bx,Jx.length==2?(Zx.prefix=Jx[0],Zx.localName=Jx[1]):Zx.localName=Fx,mE._ownerElement=Zx,Zx},createAttributeNS:function(Bx,Fx){var Zx=new AE,Jx=Fx.split(":");return Zx.ownerDocument=this,Zx.nodeName=Fx,Zx.name=Fx,Zx.namespaceURI=Bx,Zx.specified=!0,Jx.length==2?(Zx.prefix=Jx[0],Zx.localName=Jx[1]):Zx.localName=Fx,Zx}},In(Hx,zx),FE.prototype={nodeType:ax,hasAttribute:function(Bx){return this.getAttributeNode(Bx)!=null},getAttribute:function(Bx){var Fx=this.getAttributeNode(Bx);return Fx&&Fx.value||""},getAttributeNode:function(Bx){return this.attributes.getNamedItem(Bx)},setAttribute:function(Bx,Fx){var Zx=this.ownerDocument.createAttribute(Bx);Zx.value=Zx.nodeValue=""+Fx,this.setAttributeNode(Zx)},removeAttribute:function(Bx){var Fx=this.getAttributeNode(Bx);Fx&&this.removeAttributeNode(Fx)},appendChild:function(Bx){return Bx.nodeType===vx?this.insertBefore(Bx,null):(function(Fx,Zx){return Zx.parentNode&&Zx.parentNode.removeChild(Zx),Zx.parentNode=Fx,Zx.previousSibling=Fx.lastChild,Zx.nextSibling=null,Zx.previousSibling?Zx.previousSibling.nextSibling=Zx:Fx.firstChild=Zx,Fx.lastChild=Zx,nE(Fx.ownerDocument,Fx,Zx),Zx})(this,Bx)},setAttributeNode:function(Bx){return this.attributes.setNamedItem(Bx)},setAttributeNodeNS:function(Bx){return this.attributes.setNamedItemNS(Bx)},removeAttributeNode:function(Bx){return this.attributes.removeNamedItem(Bx.nodeName)},removeAttributeNS:function(Bx,Fx){var Zx=this.getAttributeNodeNS(Bx,Fx);Zx&&this.removeAttributeNode(Zx)},hasAttributeNS:function(Bx,Fx){return this.getAttributeNodeNS(Bx,Fx)!=null},getAttributeNS:function(Bx,Fx){var Zx=this.getAttributeNodeNS(Bx,Fx);return Zx&&Zx.value||""},setAttributeNS:function(Bx,Fx,Zx){var Jx=this.ownerDocument.createAttributeNS(Bx,Fx);Jx.value=Jx.nodeValue=""+Zx,this.setAttributeNode(Jx)},getAttributeNodeNS:function(Bx,Fx){return this.attributes.getNamedItemNS(Bx,Fx)},getElementsByTagName:function(Bx){return new Nx(this,(function(Fx){var Zx=[];return jx(Fx,(function(Jx){Jx===Fx||Jx.nodeType!=ax||Bx!=="*"&&Jx.tagName!=Bx||Zx.push(Jx)})),Zx}))},getElementsByTagNameNS:function(Bx,Fx){return new Nx(this,(function(Zx){var Jx=[];return jx(Zx,(function(mE){mE===Zx||mE.nodeType!==ax||Bx!=="*"&&mE.namespaceURI!==Bx||Fx!=="*"&&mE.localName!=Fx||Jx.push(mE)})),Jx}))}},Hx.prototype.getElementsByTagName=FE.prototype.getElementsByTagName,Hx.prototype.getElementsByTagNameNS=FE.prototype.getElementsByTagNameNS,In(FE,zx),AE.prototype.nodeType=ox,In(AE,zx),ZE.prototype={data:"",substringData:function(Bx,Fx){return this.data.substring(Bx,Bx+Fx)},appendData:function(Bx){Bx=this.data+Bx,this.nodeValue=this.data=Bx,this.length=Bx.length},insertData:function(Bx,Fx){this.replaceData(Bx,0,Fx)},appendChild:function(Bx){throw new Error(_x[Ex])},deleteData:function(Bx,Fx){this.replaceData(Bx,Fx,"")},replaceData:function(Bx,Fx,Zx){Zx=this.data.substring(0,Bx)+Zx+this.data.substring(Bx+Fx),this.nodeValue=this.data=Zx,this.length=Zx.length}},In(ZE,zx),Dx.prototype={nodeName:"#text",nodeType:sx,splitText:function(Bx){var Fx=this.data,Zx=Fx.substring(Bx);Fx=Fx.substring(0,Bx),this.data=this.nodeValue=Fx,this.length=Fx.length;var Jx=this.ownerDocument.createTextNode(Zx);return this.parentNode&&this.parentNode.insertBefore(Jx,this.nextSibling),Jx}},In(Dx,ZE),kx.prototype={nodeName:"#comment",nodeType:fx},In(kx,ZE),Yx.prototype={nodeName:"#cdata-section",nodeType:ux},In(Yx,ZE),Kx.prototype.nodeType=mx,In(Kx,zx),aE.prototype.nodeType=bx,In(aE,zx),eE.prototype.nodeType=hx,In(eE,zx),gE.prototype.nodeType=cx,In(gE,zx),dE.prototype.nodeName="#document-fragment",dE.prototype.nodeType=vx,In(dE,zx),bE.prototype.nodeType=gx,In(bE,zx),xE.prototype.serializeToString=function(Bx,Fx,Zx){return OE.call(Bx,Fx,Zx)},zx.prototype.toString=OE;try{if(Object.defineProperty){let Bx=function(Fx){switch(Fx.nodeType){case ax:case vx:var Zx=[];for(Fx=Fx.firstChild;Fx;)Fx.nodeType!==7&&Fx.nodeType!==8&&Zx.push(Bx(Fx)),Fx=Fx.nextSibling;return Zx.join("");default:return Fx.nodeValue}};var DE=Bx;Object.defineProperty(Nx.prototype,"length",{get:function(){return Ux(this),this.$$length}}),Object.defineProperty(zx.prototype,"textContent",{get:function(){return Bx(this)},set:function(Fx){switch(this.nodeType){case ax:case vx:for(;this.firstChild;)this.removeChild(this.firstChild);(Fx||String(Fx))&&this.appendChild(this.ownerDocument.createTextNode(Fx));break;default:this.data=Fx,this.value=Fx,this.nodeValue=Fx}}}),IE=function(Fx,Zx,Jx){Fx["$$"+Zx]=Jx}}}catch{}d.DocumentType=Kx,d.DOMException=Mx,d.DOMImplementation=Lx,d.Element=FE,d.Node=zx,d.NodeList=Ax,d.XMLSerializer=xE},6559:(c,d,Ct)=>{var ar=Ct(4582).freeze;d.XML_ENTITIES=ar({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),d.HTML_ENTITIES=ar({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),d.entityMap=d.HTML_ENTITIES},8978:(c,d,Ct)=>{var ar=Ct(4722);d.DOMImplementation=ar.DOMImplementation,d.XMLSerializer=ar.XMLSerializer,d.DOMParser=Ct(5752).DOMParser},4466:(c,d,Ct)=>{var ar=Ct(4582).NAMESPACE,en=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,tn=new RegExp("[\\-\\.0-9"+en.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),on=new RegExp("^"+en.source+tn.source+"*(?::"+en.source+tn.source+"*)?$");function cn(gx,fx){this.message=gx,this.locator=fx,Error.captureStackTrace&&Error.captureStackTrace(this,cn)}function dn(){}function Cn(gx,fx){return fx.lineNumber=gx.lineNumber,fx.columnNumber=gx.columnNumber,fx}function In(gx,fx,dx,mx,vx,bx){function xx(Ax,Nx,Ux){dx.attributeNames.hasOwnProperty(Ax)&&bx.fatalError("Attribute "+Ax+" redefined"),dx.addValue(Ax,Nx.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,vx),Ux)}for(var _x,Ex=++fx,Tx=0;;){var Cx=gx.charAt(Ex);switch(Cx){case"=":if(Tx===1)_x=gx.slice(fx,Ex),Tx=3;else{if(Tx!==2)throw new Error("attribute equal must after attrName");Tx=3}break;case"'":case'"':if(Tx===3||Tx===1){if(Tx===1&&(bx.warning('attribute value must after "="'),_x=gx.slice(fx,Ex)),fx=Ex+1,!((Ex=gx.indexOf(Cx,fx))>0))throw new Error("attribute value no end '"+Cx+"' match");xx(_x,Mx=gx.slice(fx,Ex),fx-1),Tx=5}else{if(Tx!=4)throw new Error('attribute value must after "="');xx(_x,Mx=gx.slice(fx,Ex),fx),bx.warning('attribute "'+_x+'" missed start quot('+Cx+")!!"),fx=Ex+1,Tx=5}break;case"/":switch(Tx){case 0:dx.setTagName(gx.slice(fx,Ex));case 5:case 6:case 7:Tx=7,dx.closed=!0;case 4:case 1:break;case 2:dx.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return bx.error("unexpected end of input"),Tx==0&&dx.setTagName(gx.slice(fx,Ex)),Ex;case">":switch(Tx){case 0:dx.setTagName(gx.slice(fx,Ex));case 5:case 6:case 7:break;case 4:case 1:(Mx=gx.slice(fx,Ex)).slice(-1)==="/"&&(dx.closed=!0,Mx=Mx.slice(0,-1));case 2:Tx===2&&(Mx=_x),Tx==4?(bx.warning('attribute "'+Mx+'" missed quot(")!'),xx(_x,Mx,fx)):(ar.isHTML(mx[""])&&Mx.match(/^(?:disabled|checked|selected)$/i)||bx.warning('attribute "'+Mx+'" missed value!! "'+Mx+'" instead!!'),xx(Mx,Mx,fx));break;case 3:throw new Error("attribute value missed!!")}return Ex;case"":Cx=" ";default:if(Cx<=" ")switch(Tx){case 0:dx.setTagName(gx.slice(fx,Ex)),Tx=6;break;case 1:_x=gx.slice(fx,Ex),Tx=2;break;case 4:var Mx=gx.slice(fx,Ex);bx.warning('attribute "'+Mx+'" missed quot(")!!'),xx(_x,Mx,fx);case 5:Tx=6}else switch(Tx){case 2:dx.tagName,ar.isHTML(mx[""])&&_x.match(/^(?:disabled|checked|selected)$/i)||bx.warning('attribute "'+_x+'" missed value!! "'+_x+'" instead2!!'),xx(_x,_x,fx),fx=Ex,Tx=1;break;case 5:bx.warning('attribute space is required"'+_x+'"!!');case 6:Tx=1,fx=Ex;break;case 3:Tx=4,fx=Ex;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Ex++}}function ix(gx,fx,dx){for(var mx=gx.tagName,vx=null,bx=gx.length;bx--;){var xx=gx[bx],_x=xx.qName,Ex=xx.value;if((Ax=_x.indexOf(":"))>0)var Tx=xx.prefix=_x.slice(0,Ax),Cx=_x.slice(Ax+1),Mx=Tx==="xmlns"&&Cx;else Cx=_x,Tx=null,Mx=_x==="xmlns"&&"";xx.localName=Cx,Mx!==!1&&(vx==null&&(vx={},sx(dx,dx={})),dx[Mx]=vx[Mx]=Ex,xx.uri=ar.XMLNS,fx.startPrefixMapping(Mx,Ex))}for(bx=gx.length;bx--;)(Tx=(xx=gx[bx]).prefix)&&(Tx==="xml"&&(xx.uri=ar.XML),Tx!=="xmlns"&&(xx.uri=dx[Tx||""]));var Ax;(Ax=mx.indexOf(":"))>0?(Tx=gx.prefix=mx.slice(0,Ax),Cx=gx.localName=mx.slice(Ax+1)):(Tx=null,Cx=gx.localName=mx);var Nx=gx.uri=dx[Tx||""];if(fx.startElement(Nx,Cx,mx,gx),!gx.closed)return gx.currentNSMap=dx,gx.localNSMap=vx,!0;if(fx.endElement(Nx,Cx,mx),vx)for(Tx in vx)Object.prototype.hasOwnProperty.call(vx,Tx)&&fx.endPrefixMapping(Tx)}function ax(gx,fx,dx,mx,vx){if(/^(?:script|textarea)$/i.test(dx)){var bx=gx.indexOf("</"+dx+">",fx),xx=gx.substring(fx+1,bx);if(/[&<]/.test(xx))return/^script$/i.test(dx)?(vx.characters(xx,0,xx.length),bx):(xx=xx.replace(/&#?\w+;/g,mx),vx.characters(xx,0,xx.length),bx)}return fx+1}function ox(gx,fx,dx,mx){var vx=mx[dx];return vx==null&&((vx=gx.lastIndexOf("</"+dx+">"))<fx&&(vx=gx.lastIndexOf("</"+dx)),mx[dx]=vx),vx<fx}function sx(gx,fx){for(var dx in gx)Object.prototype.hasOwnProperty.call(gx,dx)&&(fx[dx]=gx[dx])}function ux(gx,fx,dx,mx){if(gx.charAt(fx+2)==="-")return gx.charAt(fx+3)==="-"?(vx=gx.indexOf("-->",fx+4))>fx?(dx.comment(gx,fx+4,vx-fx-4),vx+3):(mx.error("Unclosed comment"),-1):-1;if(gx.substr(fx+3,6)=="CDATA["){var vx=gx.indexOf("]]>",fx+9);return dx.startCDATA(),dx.characters(gx,fx+9,vx-fx-9),dx.endCDATA(),vx+3}var bx=(function(Mx,Ax){var Nx,Ux=[],Rx=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Rx.lastIndex=Ax,Rx.exec(Mx);Nx=Rx.exec(Mx);)if(Ux.push(Nx),Nx[1])return Ux})(gx,fx),xx=bx.length;if(xx>1&&/!doctype/i.test(bx[0][0])){var _x=bx[1][0],Ex=!1,Tx=!1;xx>3&&(/^public$/i.test(bx[2][0])?(Ex=bx[3][0],Tx=xx>4&&bx[4][0]):/^system$/i.test(bx[2][0])&&(Tx=bx[3][0]));var Cx=bx[xx-1];return dx.startDTD(_x,Ex,Tx),dx.endDTD(),Cx.index+Cx[0].length}return-1}function cx(gx,fx,dx){var mx=gx.indexOf("?>",fx);if(mx){var vx=gx.substring(fx,mx).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return vx?(vx[0].length,dx.processingInstruction(vx[1],vx[2]),mx+2):-1}return-1}function hx(){this.attributeNames={}}cn.prototype=new Error,cn.prototype.name=cn.name,dn.prototype={parse:function(gx,fx,dx){var mx=this.domBuilder;mx.startDocument(),sx(fx,fx={}),(function(vx,bx,xx,_x,Ex){function Tx(EE){var FE=EE.slice(1,-1);return Object.hasOwnProperty.call(xx,FE)?xx[FE]:FE.charAt(0)==="#"?(function(AE){if(AE>65535){var ZE=55296+((AE-=65536)>>10),Dx=56320+(1023&AE);return String.fromCharCode(ZE,Dx)}return String.fromCharCode(AE)})(parseInt(FE.substr(1).replace("x","0x"))):(Ex.error("entity not found:"+EE),EE)}function Cx(EE){if(EE>$x){var FE=vx.substring($x,EE).replace(/&#?\w+;/g,Tx);Rx&&Mx($x),_x.characters(FE,0,EE-$x),$x=EE}}function Mx(EE,FE){for(;EE>=Nx&&(FE=Ux.exec(vx));)Ax=FE.index,Nx=Ax+FE[0].length,Rx.lineNumber++;Rx.columnNumber=EE-Ax+1}for(var Ax=0,Nx=0,Ux=/.*(?:\r\n?|\n)|.*$/g,Rx=_x.locator,Ox=[{currentNSMap:bx}],Px={},$x=0;;){try{var Lx=vx.indexOf("<",$x);if(Lx<0){if(!vx.substr($x).match(/^\s*$/)){var zx=_x.doc,qx=zx.createTextNode(vx.substr($x));zx.appendChild(qx),_x.currentElement=qx}return}switch(Lx>$x&&Cx(Lx),vx.charAt(Lx+1)){case"/":var jx=vx.indexOf(">",Lx+3),Hx=vx.substring(Lx+2,jx).replace(/[ \t\n\r]+$/g,""),Vx=Ox.pop();jx<0?(Hx=vx.substring(Lx+2).replace(/[\s<].*/,""),Ex.error("end tag name: "+Hx+" is not complete:"+Vx.tagName),jx=Lx+1+Hx.length):Hx.match(/\s</)&&(Hx=Hx.replace(/[\s<].*/,""),Ex.error("end tag name: "+Hx+" maybe not complete"),jx=Lx+1+Hx.length);var nE=Vx.localNSMap,Wx=Vx.tagName==Hx;if(Wx||Vx.tagName&&Vx.tagName.toLowerCase()==Hx.toLowerCase()){if(_x.endElement(Vx.uri,Vx.localName,Hx),nE)for(var tE in nE)Object.prototype.hasOwnProperty.call(nE,tE)&&_x.endPrefixMapping(tE);Wx||Ex.fatalError("end tag name: "+Hx+" is not match the current start tagName:"+Vx.tagName)}else Ox.push(Vx);jx++;break;case"?":Rx&&Mx(Lx),jx=cx(vx,Lx,_x);break;case"!":Rx&&Mx(Lx),jx=ux(vx,Lx,_x,Ex);break;default:Rx&&Mx(Lx);var lE=new hx,iE=Ox[Ox.length-1].currentNSMap,Xx=(jx=In(vx,Lx,lE,iE,Tx,Ex),lE.length);if(!lE.closed&&ox(vx,jx,lE.tagName,Px)&&(lE.closed=!0,xx.nbsp||Ex.warning("unclosed xml attribute")),Rx&&Xx){for(var CE=Cn(Rx,{}),RE=0;RE<Xx;RE++){var SE=lE[RE];Mx(SE.offset),SE.locator=Cn(Rx,{})}_x.locator=CE,ix(lE,_x,iE)&&Ox.push(lE),_x.locator=Rx}else ix(lE,_x,iE)&&Ox.push(lE);ar.isHTML(lE.uri)&&!lE.closed?jx=ax(vx,jx,lE.tagName,Tx,_x):jx++}}catch(EE){if(EE instanceof cn)throw EE;Ex.error("element parse error: "+EE),jx=-1}jx>$x?$x=jx:Cx(Math.max(Lx,$x)+1)}})(gx,fx,dx,mx,this.errorHandler),mx.endDocument()}},hx.prototype={setTagName:function(gx){if(!on.test(gx))throw new Error("invalid tagName:"+gx);this.tagName=gx},addValue:function(gx,fx,dx){if(!on.test(gx))throw new Error("invalid attribute:"+gx);this.attributeNames[gx]=this.length,this[this.length++]={qName:gx,value:fx,offset:dx}},length:0,getLocalName:function(gx){return this[gx].localName},getLocator:function(gx){return this[gx].locator},getQName:function(gx){return this[gx].qName},getURI:function(gx){return this[gx].uri},getValue:function(gx){return this[gx].value}},d.XMLReader=dn,d.ParseError=cn},8917:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidNumberOfChildrenError=void 0;var ar=Ct(6200);Object.defineProperty(d,"InvalidNumberOfChildrenError",{enumerable:!0,get:function(){return ar.InvalidNumberOfChildrenError}})},6200:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidNumberOfChildrenError=void 0;class Ct extends Error{constructor(en,tn,on,cn="exactly"){super(`${en} tag must have ${cn} ${tn} children. It's actually ${on}`),this.name="InvalidNumberOfChildrenError"}}d.InvalidNumberOfChildrenError=Ct},4279:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,cn,dn){dn===void 0&&(dn=cn);var Cn=Object.getOwnPropertyDescriptor(on,cn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[cn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,cn,dn){dn===void 0&&(dn=cn),tn[dn]=on[cn]}),en=this&&this.__exportStar||function(tn,on){for(var cn in tn)cn==="default"||Object.prototype.hasOwnProperty.call(on,cn)||ar(on,tn,cn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(828),d),en(Ct(5975),d),en(Ct(799),d),en(Ct(2424),d)},5975:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.JoinWithManySeparators=void 0;class Ct{constructor(en){this._separators=en}static join(en,tn,on=""){const cn=tn.length>0?tn:on!==void 0?[on]:[];return new Ct(cn)._join(en)}_join(en){return en.reduce(((tn,on,cn,dn)=>tn+on+(cn===dn.length-1?"":this._get(cn))),"")}_get(en){return this._separators[en]?this._separators[en]:this._separators[this._separators.length-1]}}d.JoinWithManySeparators=Ct},799:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mathMLElementToLaTeXConverter=void 0;const ar=Ct(5443);d.mathMLElementToLaTeXConverter=en=>new ar.MathMLElementToLatexConverterAdapter(en).toLatexConverter()},2424:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.normalizeWhiteSpaces=void 0,d.normalizeWhiteSpaces=Ct=>Ct.replace(/\s+/g," ")},7192:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BracketWrapper=void 0;const ar=Ct(1855);d.BracketWrapper=class{constructor(){this._open="{",this._close="}"}wrap(en){return new ar.Wrapper(this._open,this._close).wrap(en)}}},5025:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericWrapper=void 0;const ar=Ct(1855);d.GenericWrapper=class{constructor(en,tn){this._open="\\left"+en,this._close="\\right"+tn}wrap(en){return new ar.Wrapper(this._open,this._close).wrap(en)}}},828:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericWrapper=d.ParenthesisWrapper=d.BracketWrapper=void 0;var ar=Ct(7192);Object.defineProperty(d,"BracketWrapper",{enumerable:!0,get:function(){return ar.BracketWrapper}});var en=Ct(1168);Object.defineProperty(d,"ParenthesisWrapper",{enumerable:!0,get:function(){return en.ParenthesisWrapper}});var tn=Ct(5025);Object.defineProperty(d,"GenericWrapper",{enumerable:!0,get:function(){return tn.GenericWrapper}})},1168:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ParenthesisWrapper=void 0;const ar=Ct(1855);d.ParenthesisWrapper=class{constructor(){this._open="\\left(",this._close="\\right)"}wrap(en){return new ar.Wrapper(this._open,this._close).wrap(en)}wrapIfMoreThanOneChar(en){return en.length<=1?en:this.wrap(en)}}},1855:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Wrapper=void 0,d.Wrapper=class{constructor(Ct,ar){this._open=Ct,this._close=ar}wrap(Ct){return this._open+Ct+this._close}}},2697:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.VoidMathMLElement=void 0,d.VoidMathMLElement=class{constructor(){this.name="void",this.value="",this.children=[],this.attributes={}}}},4760:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericSpacingWrapper=void 0;const ar=Ct(4279);d.GenericSpacingWrapper=class{constructor(en){this._mathmlElement=en}convert(){return this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}}},9376:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericUnderOver=void 0;const ar=Ct(799),en=Ct(8917),tn=Ct(472);d.GenericUnderOver=class{constructor(dn){this._mathmlElement=dn}convert(){const{name:dn,children:Cn}=this._mathmlElement,In=Cn.length;if(In!==2)throw new en.InvalidNumberOfChildrenError(dn,2,In);const ix=(0,ar.mathMLElementToLaTeXConverter)(Cn[0]).convert(),ax=(0,ar.mathMLElementToLaTeXConverter)(Cn[1]).convert();return this._applyCommand(ix,ax)}_applyCommand(dn,Cn){const In=this._mathmlElement.name.match(/under/)?cn.Under:cn.Over;return new on(In).apply(dn,Cn)}};class on{constructor(Cn){this._type=Cn}apply(Cn,In){return tn.latexAccents.includes(In)?`${In}{${Cn}}`:`${this._defaultCommand}{${In}}{${Cn}}`}get _defaultCommand(){return this._type===cn.Under?"\\underset":"\\overset"}}var cn;(function(dn){dn[dn.Under=0]="Under",dn[dn.Over=1]="Over"})(cn||(cn={}))},6959:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Void=d.MSpace=d.MRow=d.GenericUnderOver=d.GenericSpacingWrapper=d.MTr=d.MTable=d.MUnderover=d.MText=d.MMultiscripts=d.MSubsup=d.MSub=d.MSup=d.MPhantom=d.MError=d.MEnclose=d.MAction=d.MRoot=d.MFrac=d.MFenced=d.MSqrt=d.MN=d.MO=d.MI=d.Math=void 0;var ar=Ct(393);Object.defineProperty(d,"Math",{enumerable:!0,get:function(){return ar.Math}});var en=Ct(7037);Object.defineProperty(d,"MI",{enumerable:!0,get:function(){return en.MI}});var tn=Ct(3487);Object.defineProperty(d,"MO",{enumerable:!0,get:function(){return tn.MO}});var on=Ct(4464);Object.defineProperty(d,"MN",{enumerable:!0,get:function(){return on.MN}});var cn=Ct(8686);Object.defineProperty(d,"MSqrt",{enumerable:!0,get:function(){return cn.MSqrt}});var dn=Ct(9511);Object.defineProperty(d,"MFenced",{enumerable:!0,get:function(){return dn.MFenced}});var Cn=Ct(6440);Object.defineProperty(d,"MFrac",{enumerable:!0,get:function(){return Cn.MFrac}});var In=Ct(6052);Object.defineProperty(d,"MRoot",{enumerable:!0,get:function(){return In.MRoot}});var ix=Ct(1678);Object.defineProperty(d,"MAction",{enumerable:!0,get:function(){return ix.MAction}});var ax=Ct(2631);Object.defineProperty(d,"MEnclose",{enumerable:!0,get:function(){return ax.MEnclose}});var ox=Ct(1840);Object.defineProperty(d,"MError",{enumerable:!0,get:function(){return ox.MError}});var sx=Ct(7443);Object.defineProperty(d,"MPhantom",{enumerable:!0,get:function(){return sx.MPhantom}});var ux=Ct(6926);Object.defineProperty(d,"MSup",{enumerable:!0,get:function(){return ux.MSup}});var cx=Ct(2564);Object.defineProperty(d,"MSub",{enumerable:!0,get:function(){return cx.MSub}});var hx=Ct(1358);Object.defineProperty(d,"MSubsup",{enumerable:!0,get:function(){return hx.MSubsup}});var gx=Ct(8303);Object.defineProperty(d,"MMultiscripts",{enumerable:!0,get:function(){return gx.MMultiscripts}});var fx=Ct(3951);Object.defineProperty(d,"MText",{enumerable:!0,get:function(){return fx.MText}});var dx=Ct(1222);Object.defineProperty(d,"MUnderover",{enumerable:!0,get:function(){return dx.MUnderover}});var mx=Ct(2350);Object.defineProperty(d,"MTable",{enumerable:!0,get:function(){return mx.MTable}});var vx=Ct(1586);Object.defineProperty(d,"MTr",{enumerable:!0,get:function(){return vx.MTr}});var bx=Ct(4760);Object.defineProperty(d,"GenericSpacingWrapper",{enumerable:!0,get:function(){return bx.GenericSpacingWrapper}});var xx=Ct(9376);Object.defineProperty(d,"GenericUnderOver",{enumerable:!0,get:function(){return xx.GenericUnderOver}});var _x=Ct(6346);Object.defineProperty(d,"MRow",{enumerable:!0,get:function(){return _x.MRow}});var Ex=Ct(3700);Object.defineProperty(d,"MSpace",{enumerable:!0,get:function(){return Ex.MSpace}});var Tx=Ct(9165);Object.defineProperty(d,"Void",{enumerable:!0,get:function(){return Tx.Void}})},1678:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MAction=void 0;const ar=Ct(799);d.MAction=class{constructor(en){this._mathmlElement=en}convert(){const{children:en}=this._mathmlElement;return this._isToggle()?en.map((tn=>(0,ar.mathMLElementToLaTeXConverter)(tn))).map((tn=>tn.convert())).join(" \\Longrightarrow "):(0,ar.mathMLElementToLaTeXConverter)(en[0]).convert()}_isToggle(){const{actiontype:en}=this._mathmlElement.attributes;return en==="toggle"||!en}}},393:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Math=void 0;const ar=Ct(799),en=Ct(2424);d.Math=class{constructor(tn){this._mathmlElement=tn}convert(){const tn=this._mathmlElement.children.map((on=>(0,ar.mathMLElementToLaTeXConverter)(on))).map((on=>on.convert())).join(" ");return(0,en.normalizeWhiteSpaces)(tn)}}},2631:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MEnclose=void 0;const ar=Ct(799);d.MEnclose=class{constructor(en){this._mathmlElement=en}convert(){const en=this._mathmlElement.children.map((tn=>(0,ar.mathMLElementToLaTeXConverter)(tn))).map((tn=>tn.convert())).join(" ");return this._notation==="actuarial"?`\\overline{\\left.${en}\\right|}`:this._notation==="radical"?`\\sqrt{${en}}`:["box","roundedbox","circle"].includes(this._notation)?`\\boxed{${en}}`:this._notation==="left"?`\\left|${en}`:this._notation==="right"?`${en}\\right|`:this._notation==="top"?`\\overline{${en}}`:this._notation==="bottom"?`\\underline{${en}}`:this._notation==="updiagonalstrike"?`\\cancel{${en}}`:this._notation==="downdiagonalstrike"?`\\bcancel{${en}}`:this._notation==="updiagonalarrow"?`\\cancelto{}{${en}}`:["verticalstrike","horizontalstrike"].includes(this._notation)?`\\hcancel{${en}}`:this._notation==="madruwb"?`\\underline{${en}\\right|}`:this._notation==="phasorangle"?`{\\angle \\underline{${en}}}`:`\\overline{\\left.\\right)${en}}`}get _notation(){return this._mathmlElement.attributes.notation||"longdiv"}}},1840:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MError=void 0;const ar=Ct(799);d.MError=class{constructor(en){this._mathmlElement=en}convert(){return`\\color{red}{${this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}}`}}},9511:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MFenced=void 0;const ar=Ct(799),en=Ct(4279);d.MFenced=class{constructor(dn){this._mathmlElement=dn,this.open=this._mathmlElement.attributes.open||"",this.close=this._mathmlElement.attributes.close||""}convert(){const dn=this._mathmlElement.children.map((ox=>(0,ar.mathMLElementToLaTeXConverter)(ox))).map((ox=>ox.convert()));if(this._isThereRelativeOfName(this._mathmlElement.children,"mtable"))return new on(this.open,this.close).apply(dn);const Cn=this._mathmlElement.attributes.separators,In=Cn!==void 0,ix=Cn?Array.from(Cn):[],ax=In?"":",";return new tn(this.open,this.close,ix,ax).apply(dn)}_isThereRelativeOfName(dn,Cn){return dn.some((In=>In.name===Cn||this._isThereRelativeOfName(In.children,Cn)))}};class tn{constructor(Cn,In,ix,ax){this.separators=ix,this.defaultSeparator=ax,this.open=Cn||"(",this.close=In||")"}apply(Cn){const In=en.JoinWithManySeparators.join(Cn,this.separators,this.defaultSeparator);return new en.GenericWrapper(this.open,this.close).wrap(In)}}class on{constructor(Cn,In){this._genericCommand="matrix",this.separators=new cn(Cn,In)}apply(Cn){const In=this._command,ix=`\\begin{${In}}
${Cn.join("")}
\\end{${In}}`;return In===this._genericCommand?this.separators.wrap(ix):ix}get _command(){return this.separators.areParentheses()?"pmatrix":this.separators.areSquareBrackets()?"bmatrix":this.separators.areBrackets()?"Bmatrix":this.separators.areDivides()?"vmatrix":this.separators.areParallels()?"Vmatrix":this.separators.areNotEqual()?this._genericCommand:"bmatrix"}}class cn{constructor(Cn,In){this.open=Cn,this.close=In}wrap(Cn){return new en.GenericWrapper(this.open,this.close).wrap(Cn)}areParentheses(){return this._compare("(",")")}areSquareBrackets(){return this._compare("[","]")}areBrackets(){return this._compare("{","}")}areDivides(){return this._compare("|","|")}areParallels(){return this._compare("||","||")}areNotEqual(){return this.open!==this.close}_compare(Cn,In){return this.open===Cn&&this.close===In}}},6440:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MFrac=void 0;const ar=Ct(8917),en=Ct(4279);d.MFrac=class{constructor(tn){this._mathmlElement=tn}convert(){const{children:tn,name:on}=this._mathmlElement,cn=tn.length;if(cn!==2)throw new ar.InvalidNumberOfChildrenError(on,2,cn);const dn=(0,en.mathMLElementToLaTeXConverter)(tn[0]).convert(),Cn=(0,en.mathMLElementToLaTeXConverter)(tn[1]).convert();return this._isBevelled()?`${this._wrapIfMoreThanOneChar(dn)}/${this._wrapIfMoreThanOneChar(Cn)}`:`\\frac{${dn}}{${Cn}}`}_wrapIfMoreThanOneChar(tn){return new en.ParenthesisWrapper().wrapIfMoreThanOneChar(tn)}_isBevelled(){return!!this._mathmlElement.attributes.bevelled}}},7037:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MI=void 0;const ar=Ct(4279),en=Ct(5406),tn=Ct(6122);d.MI=class{constructor(cn){this.utf8Converter=new tn.HashUTF8ToLtXConverter,this._mathmlElement=cn}convert(){const cn=(0,ar.normalizeWhiteSpaces)(this._mathmlElement.value);if(cn===" ")return on.apply(cn);const dn=cn.trim(),Cn=on.apply(dn),In=this.utf8Converter.convert(Cn);return In!==Cn?In:this.wrapInMathVariant(Cn,this.getMathVariant(this._mathmlElement.attributes))}getMathVariant(cn){if(cn&&cn.mathvariant)return cn.mathvariant}wrapInMathVariant(cn,dn){switch(dn){case"bold":return`\\mathbf{${cn}}`;case"italic":return`\\mathit{${cn}}`;case"bold-italic":return`\\mathbf{\\mathit{${cn}}}`;case"double-struck":return`\\mathbb{${cn}}`;case"bold-fraktur":return`\\mathbf{\\mathfrak{${cn}}}`;case"script":return`\\mathcal{${cn}}`;case"bold-script":return`\\mathbf{\\mathcal{${cn}}}`;case"fraktur":return`\\mathfrak{${cn}}`;case"sans-serif":return`\\mathsf{${cn}}`;case"bold-sans-serif":return`\\mathbf{\\mathsf{${cn}}}`;case"sans-serif-italic":return`\\mathsf{\\mathit{${cn}}}`;case"sans-serif-bold-italic":return`\\mathbf{\\mathsf{\\mathit{${cn}}}}`;case"monospace":return`\\mathtt{${cn}}`;default:return cn}}};class on{constructor(dn){this._value=dn}static apply(dn){return new on(dn)._apply()}_apply(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new tn.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return en.allMathSymbolsByChar[this._value]}_findByGlyph(){return en.allMathSymbolsByGlyph[this._value]}_findByNumber(){return en.mathNumberByGlyph[this._value]}}},8303:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MMultiscripts=void 0;const ar=Ct(4279),en=Ct(8917);d.MMultiscripts=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,cn=on.length;if(cn<3)throw new en.InvalidNumberOfChildrenError(tn,3,cn,"at least");const dn=(0,ar.mathMLElementToLaTeXConverter)(on[0]).convert();return this._prescriptLatex()+this._wrapInParenthesisIfThereIsSpace(dn)+this._postscriptLatex()}_prescriptLatex(){const{children:tn}=this._mathmlElement;let on,cn;if(this._isPrescripts(tn[1]))on=tn[2],cn=tn[3];else{if(!this._isPrescripts(tn[3]))return"";on=tn[4],cn=tn[5]}return`\\_{${(0,ar.mathMLElementToLaTeXConverter)(on).convert()}}^{${(0,ar.mathMLElementToLaTeXConverter)(cn).convert()}}`}_postscriptLatex(){const{children:tn}=this._mathmlElement;if(this._isPrescripts(tn[1]))return"";const on=tn[1],cn=tn[2];return`_{${(0,ar.mathMLElementToLaTeXConverter)(on).convert()}}^{${(0,ar.mathMLElementToLaTeXConverter)(cn).convert()}}`}_wrapInParenthesisIfThereIsSpace(tn){return tn.match(/\s+/g)?new ar.ParenthesisWrapper().wrap(tn):tn}_isPrescripts(tn){return tn?.name==="mprescripts"}}},4464:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MN=void 0;const ar=Ct(4279),en=Ct(5406);d.MN=class{constructor(tn){this._mathmlElement=tn}convert(){const tn=(0,ar.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return en.mathNumberByGlyph[tn]||tn}}},3487:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MO=void 0;const ar=Ct(4279),en=Ct(5406);d.MO=class{constructor(on){this._mathmlElement=on}convert(){const on=(0,ar.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return tn.operate(on)}};class tn{constructor(cn){this._value=cn}static operate(cn){return new tn(cn)._operate()}_operate(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new en.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return en.allMathOperatorsByChar[this._value]}_findByGlyph(){return en.allMathOperatorsByGlyph[this._value]}_findByNumber(){return en.mathNumberByGlyph[this._value]}}},7443:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MPhantom=void 0,d.MPhantom=class{constructor(Ct){this._mathmlElement=Ct}convert(){return""}}},6052:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MRoot=void 0;const ar=Ct(4279),en=Ct(8917);d.MRoot=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,cn=on.length;if(cn!==2)throw new en.InvalidNumberOfChildrenError(tn,2,cn);const dn=(0,ar.mathMLElementToLaTeXConverter)(on[0]).convert();return`\\sqrt[${(0,ar.mathMLElementToLaTeXConverter)(on[1]).convert()}]{${dn}}`}}},6346:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MRow=void 0;const ar=Ct(4279);d.MRow=class{constructor(en){this._mathmlElement=en}convert(){return this._isLinearSystemPattern()?this._convertAsLinearSystem():this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}_isLinearSystemPattern(){const{children:en}=this._mathmlElement;if(en.length!==3)return!1;const tn=en[0],on=tn.name==="mo"&&tn.value.trim()==="{",cn=en[1].name==="mtable",dn=en[2],Cn=dn.name==="mo"&&dn.value.trim()==="";return on&&cn&&Cn}_convertAsLinearSystem(){return`\\begin{cases} ${this._mathmlElement.children[1].children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" \\\\ ")} \\end{cases}`}}},3700:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSpace=void 0,d.MSpace=class{constructor(Ct){this._mathmlElement=Ct}convert(){const{linebreak:Ct}=this._mathmlElement.attributes;return Ct==="newline"?" \\\\ ":" "}}},8686:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSqrt=void 0;const ar=Ct(4279);d.MSqrt=class{constructor(en){this._mathmlElement=en}convert(){return`\\sqrt{${this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}}`}}},2564:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSub=void 0;const ar=Ct(4279),en=Ct(8917);d.MSub=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,cn=on.length;if(cn!==2)throw new en.InvalidNumberOfChildrenError(tn,2,cn);const dn=on[0],Cn=on[1];return`${this._handleBaseChild(dn)}_${this._handleSubscriptChild(Cn)}`}_handleBaseChild(tn){const on=tn.children,cn=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return on.length<=1?cn:new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(cn)}_handleSubscriptChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}}},1358:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSubsup=void 0;const ar=Ct(4279),en=Ct(8917);d.MSubsup=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,cn=on.length;if(cn!==3)throw new en.InvalidNumberOfChildrenError(tn,3,cn);const dn=on[0],Cn=on[1],In=on[2];return`${this._handleBaseChild(dn)}_${this._handleSubscriptChild(Cn)}^${this._handleSuperscriptChild(In)}`}_handleBaseChild(tn){const on=tn.children,cn=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return on.length<=1?cn:new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(cn)}_handleSubscriptChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}_handleSuperscriptChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}}},6926:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSup=void 0;const ar=Ct(4279),en=Ct(8917);d.MSup=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,cn=on.length;if(cn!==2)throw new en.InvalidNumberOfChildrenError(tn,2,cn);const dn=on[0],Cn=on[1];return`${this._handleBaseChild(dn)}^${this._handleExponentChild(Cn)}`}_handleBaseChild(tn){const on=tn.children,cn=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return on.length<=1?cn:new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(cn)}_handleExponentChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}}},2350:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MTable=void 0;const ar=Ct(4279);d.MTable=class{constructor(en){this._mathmlElement=en,this._addFlagRecursiveIfName(this._mathmlElement.children,"mtable","innerTable")}convert(){const en=this._mathmlElement.children.map((tn=>(0,ar.mathMLElementToLaTeXConverter)(tn))).map((tn=>tn.convert())).join(` \\\\
`);return this._hasFlag("innerTable")?this._wrap(en):en}_wrap(en){return`\\begin{matrix}${en}\\end{matrix}`}_addFlagRecursiveIfName(en,tn,on){en.forEach((cn=>{cn.name===tn&&(cn.attributes[on]=on),this._addFlagRecursiveIfName(cn.children,tn,on)}))}_hasFlag(en){return!!this._mathmlElement.attributes[en]}}},3951:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MText=void 0;const ar=Ct(7037);d.MText=class{constructor(tn){this._mathmlElement=tn}convert(){const{attributes:tn,value:on}=this._mathmlElement;return[...on].map((cn=>/^[a-zA-Z0-9]$/.test(cn)||cn===" "?{value:cn,isAlphanumeric:!0}:{value:cn,isAlphanumeric:!1})).reduce(((cn,dn)=>{if(dn.isAlphanumeric){const Cn=cn[cn.length-1];if(Cn&&Cn.isAlphanumeric)return Cn.value+=dn.value,cn}return[...cn,dn]}),[]).map((cn=>cn.isAlphanumeric?new en(tn.mathvariant).apply(cn.value):new ar.MI({name:"mi",attributes:{},children:[],value:cn.value}).convert())).join("")}};class en{constructor(on){this._mathvariant=on||"normal"}apply(on){return this._commands.reduce(((cn,dn,Cn)=>Cn===0?`${dn}{${on}}`:`${dn}{${cn}}`),"")}get _commands(){switch(this._mathvariant){case"bold":return["\\textbf"];case"italic":return["\\textit"];case"bold-italic":return["\\textit","\\textbf"];case"double-struck":return["\\mathbb"];case"monospace":return["\\mathtt"];case"bold-fraktur":case"fraktur":return["\\mathfrak"];default:return["\\text"]}}}},1586:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MTr=void 0;const ar=Ct(4279);d.MTr=class{constructor(en){this._mathmlElement=en}convert(){return this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" & ")}}},1222:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MUnderover=void 0;const ar=Ct(4279),en=Ct(8917);d.MUnderover=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,cn=on.length;if(cn!==3)throw new en.InvalidNumberOfChildrenError(tn,3,cn);return`${(0,ar.mathMLElementToLaTeXConverter)(on[0]).convert()}_{${(0,ar.mathMLElementToLaTeXConverter)(on[1]).convert()}}^{${(0,ar.mathMLElementToLaTeXConverter)(on[2]).convert()}}`}}},9165:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Void=void 0,d.Void=class{constructor(Ct){this._mathmlElement=Ct}convert(){return""}}},5443:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(Cn,In,ix,ax){ax===void 0&&(ax=ix);var ox=Object.getOwnPropertyDescriptor(In,ix);ox&&!("get"in ox?!In.__esModule:ox.writable||ox.configurable)||(ox={enumerable:!0,get:function(){return In[ix]}}),Object.defineProperty(Cn,ax,ox)}:function(Cn,In,ix,ax){ax===void 0&&(ax=ix),Cn[ax]=In[ix]}),en=this&&this.__setModuleDefault||(Object.create?function(Cn,In){Object.defineProperty(Cn,"default",{enumerable:!0,value:In})}:function(Cn,In){Cn.default=In}),tn=this&&this.__importStar||function(Cn){if(Cn&&Cn.__esModule)return Cn;var In={};if(Cn!=null)for(var ix in Cn)ix!=="default"&&Object.prototype.hasOwnProperty.call(Cn,ix)&&ar(In,Cn,ix);return en(In,Cn),In};Object.defineProperty(d,"__esModule",{value:!0}),d.MathMLElementToLatexConverterAdapter=void 0;const on=tn(Ct(6959)),cn=Ct(2697);d.MathMLElementToLatexConverterAdapter=class{constructor(Cn){this._mathMLElement=Cn??new cn.VoidMathMLElement}toLatexConverter(){const{name:Cn}=this._mathMLElement;return new(dn[Cn]||on.GenericSpacingWrapper)(this._mathMLElement)}};const dn={math:on.Math,mi:on.MI,mo:on.MO,mn:on.MN,msqrt:on.MSqrt,mfenced:on.MFenced,mfrac:on.MFrac,mroot:on.MRoot,maction:on.MAction,menclose:on.MEnclose,merror:on.MError,mphantom:on.MPhantom,msup:on.MSup,msub:on.MSub,msubsup:on.MSubsup,mmultiscripts:on.MMultiscripts,mtext:on.MText,munderover:on.MUnderover,mtable:on.MTable,mtr:on.MTr,mover:on.GenericUnderOver,munder:on.GenericUnderOver,mrow:on.MRow,mspace:on.MSpace,mpadded:on.GenericSpacingWrapper,void:on.Void}},5243:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ErrorHandler=void 0,d.ErrorHandler=class{constructor(){this._errors=[],this.errorLocator={}}fixError(Ct,ar){return this._isMissingAttributeValueError(ar)?(this._errors.push(ar),this._fixMissingAttribute(ar,Ct)):Ct}isThereAnyErrors(){return this._errors.length>0}cleanErrors(){this._errors=[]}_fixMissingAttribute(Ct,ar){const en=Ct.split('"')[1];if(en)return ar.replace(this._matchMissingValueForAttribute(en),"");for(;this._mathGenericMissingValue().exec(ar);)ar=ar.replace(this._mathGenericMissingValue(),"$1$3");return ar}_matchMissingValueForAttribute(Ct){return new RegExp(`(${Ct}=(?!("|')))|(${Ct}(?!("|')))`,"gm")}_mathGenericMissingValue(){return/(\<.* )(\w+=(?!\"|\'))(.*\>)/gm}_isMissingAttributeValueError(Ct){return!!Ct.includes("attribute")&&!!Ct.includes("missed")||Ct.includes("attribute value missed")}}},9208:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,cn,dn){dn===void 0&&(dn=cn);var Cn=Object.getOwnPropertyDescriptor(on,cn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[cn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,cn,dn){dn===void 0&&(dn=cn),tn[dn]=on[cn]}),en=this&&this.__exportStar||function(tn,on){for(var cn in tn)cn==="default"||Object.prototype.hasOwnProperty.call(on,cn)||ar(on,tn,cn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(9548),d),en(Ct(5243),d),en(Ct(1101),d)},1101:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ElementsToMathMLAdapter=void 0,d.ElementsToMathMLAdapter=class{convert(Ct){return Ct.filter((ar=>ar.tagName!==void 0)).map((ar=>this._convertElement(ar)))}_convertElement(Ct){return{name:Ct.tagName,attributes:this._convertElementAttributes(Ct.attributes),value:this._hasElementChild(Ct)?"":Ct.textContent||"",children:this._hasElementChild(Ct)?this.convert(Array.from(Ct.childNodes)):[]}}_convertElementAttributes(Ct){return Array.from(Ct).reduce(((ar,en)=>Object.assign({[en.nodeName]:en.nodeValue===en.nodeName?"":en.nodeValue},ar)),{})}_hasElementChild(Ct){const ar=Ct.childNodes;return!!ar&&ar.length!==0&&this._isThereAnyNoTextNode(ar)}_isThereAnyNoTextNode(Ct){return Array.from(Ct).some((ar=>ar.nodeName!=="#text"))}}},9548:function(c,d,Ct){var ar=this&&this.__importDefault||function(tn){return tn&&tn.__esModule?tn:{default:tn}};Object.defineProperty(d,"__esModule",{value:!0}),d.XmlToMathMLAdapter=void 0;const en=ar(Ct(8978));d.XmlToMathMLAdapter=class{constructor(tn,on){this._xml="",this._elementsConvertor=tn,this._errorHandler=on,this._xmlDOM=new en.default.DOMParser({locator:this._errorHandler.errorLocator,errorHandler:this._fixError.bind(this)})}convert(tn){return this._xml=this._removeLineBreaks(tn),this._xml=this._removeMsWordPrefixes(this._xml),this._elementsConvertor.convert(this._mathMLElements)}_fixError(tn){this._xml=this._errorHandler.fixError(this._xml,tn)}_removeLineBreaks(tn){return tn.replace(/\n|\r\n|\r/g,"")}_removeMsWordPrefixes(tn){return tn.replace(/mml:/g,"")}get _mathMLElements(){let tn=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math");return this._errorHandler.isThereAnyErrors()&&(this._errorHandler.cleanErrors(),tn=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math")),Array.from(tn)}}},7941:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,cn,dn){dn===void 0&&(dn=cn);var Cn=Object.getOwnPropertyDescriptor(on,cn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[cn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,cn,dn){dn===void 0&&(dn=cn),tn[dn]=on[cn]}),en=this&&this.__exportStar||function(tn,on){for(var cn in tn)cn==="default"||Object.prototype.hasOwnProperty.call(on,cn)||ar(on,tn,cn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(8585),d)},8585:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.makeToMathElementsConverter=void 0;const ar=Ct(9208);d.makeToMathElementsConverter=()=>{const en=new ar.ElementsToMathMLAdapter,tn=new ar.ErrorHandler;return new ar.XmlToMathMLAdapter(en,tn)}},8672:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,cn,dn){dn===void 0&&(dn=cn);var Cn=Object.getOwnPropertyDescriptor(on,cn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[cn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,cn,dn){dn===void 0&&(dn=cn),tn[dn]=on[cn]}),en=this&&this.__exportStar||function(tn,on){for(var cn in tn)cn==="default"||Object.prototype.hasOwnProperty.call(on,cn)||ar(on,tn,cn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(3798),d)},3798:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MathMLToLaTeX=void 0;const ar=Ct(5443),en=Ct(7941);d.MathMLToLaTeX=class{static convert(tn){return(0,en.makeToMathElementsConverter)().convert(tn).map((on=>new ar.MathMLElementToLatexConverterAdapter(on).toLatexConverter())).map((on=>on.convert())).join("").trim()}}},2965:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathOperatorsByChar=void 0,d.allMathOperatorsByChar={_:"\\underline","&#x23E1;":"\\underbrace","&#x23E0;":"\\overbrace","&#x23DF;":"\\underbrace","&#x23DE;":"\\overbrace","&#x23DD;":"\\underbrace","&#x23DC;":"\\overbrace","&#x23B5;":"\\underbrace","&#x23B4;":"\\overbrace","&#x20DC;":"\\square","&#x20DB;":"\\square","&#x2064;":"","&#x2057;":"''''","&#x203E;":"\\bar","&#x2037;":"```","&#x2036;":"``","&#x2035;":"`","&#x2034;":"'''","&#x2033;":"''","&#x201F;":"``","&#x201E;":",,","&#x201B;":"`","&#x201A;":",","&#x302;":"\\hat","&#x2F7;":"\\sim","&#x2DD;":"\\sim","&#x2DC;":"\\sim","&#x2DA;":"\\circ","&#x2D9;":"\\cdot","&#x2D8;":"","&#x2CD;":"\\_","&#x2CB;":"","&#x2CA;":"","&#x2C9;":"","&#x2C7;":"","&#x2C6;":"\\hat","&#xBA;":"o","&#xB9;":"1","&#xB8;":"","&#xB4;":"","&#xB3;":"3","&#xB2;":"2","&#xB0;":"\\circ","&#xAF;":"\\bar","&#xAA;":"a","&#xA8;":"\\cdot\\cdot","~":"\\sim","`":"`","^":"\\hat","--":"--","++":"++","&amp;":"\\&","&#x2061;":"","&#x221C;":"\\sqrt[4]{}","&#x221B;":"\\sqrt[3]{}","&#x221A;":"\\sqrt{}","&#x2146;":"d","&#x2145;":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","&#x266F;":"\\#","&#x266E;":"","&#x266D;":"","&#x2032;":"'","&lt;>":"<>","**":"\\star\\star","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x2299;":"\\bigodot","&#xAC;":"\\neg","&#x2222;":"\\measuredangle","&#x2221;":"\\measuredangle","&#x2220;":"\\angle","&#xF7;":"\\div","/":"/","&#x2216;":"\\backslash","\\":"\\backslash","%":"\\%","&#x2297;":"\\bigotimes","&#xB7;":"\\cdot","&#x2A3F;":"\\coprod","&#x2A2F;":"\\times","&#x22C5;":"\\cdot","&#x22A1;":"\\boxdot","&#x22A0;":"\\boxtimes","&#x2062;":"","&#x2043;":"-","&#x2022;":"\\cdot","&#xD7;":"\\times",".":".","*":"\\star","&#x222A;":"\\cup","&#x2229;":"\\cap","&#x2210;":"\\coprod","&#x220F;":"\\prod","&#x2240;":"","&#x2AFF;":"","&#x2AFC;":"\\mid\\mid\\mid","&#x2A09;":"\\times","&#x2A08;":"","&#x2A07;":"","&#x2A06;":"\\sqcup","&#x2A05;":"\\sqcap","&#x2A02;":"\\otimes","&#x2A00;":"\\odot","&#x22C2;":"\\cap","&#x22C1;":"\\vee","&#x22C0;":"\\wedge","&#x2A04;":"\\uplus","&#x2A03;":"\\cup","&#x22C3;":"\\cup","&#x2A1C;":"\\underline{\\int}","&#x2A1B;":"\\overline{\\int}","&#x2A1A;":"\\int","&#x2A19;":"\\int","&#x2A18;":"\\int","&#x2A17;":"\\int","&#x2A16;":"\\oint","&#x2A15;":"\\oint","&#x2A14;":"\\int","&#x2A13;":"\\int","&#x2A12;":"\\int","&#x2A11;":"\\int","&#x2A10;":"\\int","&#x2A0F;":"\\bcancel{\\int}","&#x2A0E;":"","&#x2A0D;":"\\hcancel{\\int}","&#x2A0C;":"\\iiiint","&#x2233;":"\\oint","&#x2232;":"\\oint","&#x2231;":"\\int","&#x2230;":"\\oiint","&#x222F;":"\\oiint","&#x222E;":"\\oint","&#x222B;":"\\int","&#x2A01;":"\\oplus","&#x2298;":"\\oslash","&#x2296;":"\\ominus","&#x2295;":"\\oplus","&#x222D;":"\\iiint","&#x222C;":"\\iint","&#x2A0B;":"","&#x2A0A;":"","&#x2211;":"\\sum","&#x229F;":"\\boxminus","&#x229E;":"\\boxplus","&#x2214;":"\\dot{+}","&#x2213;":"+-","&#x2212;":"-","&#xB1;":"\\pm","-":"-","+":"+","&#x2B46;":"\\Rrightarrow","&#x2B45;":"\\Lleftarrow","&#x29F4;":":\\rightarrow","&#x29EF;":"","&#x29DF;":"\\bullet-\\bullet","&#x299F;":"\\angle","&#x299E;":"\\measuredangle","&#x299D;":"\\measuredangle","&#x299C;":"\\perp","&#x299B;":"\\measuredangle","&#x299A;":"","&#x2999;":"\\vdots","&#x297F;":"","&#x297E;":"","&#x297D;":"\\prec","&#x297C;":"\\succ","&#x297B;":"\\underset{\\rightarrow}{\\supset}","&#x297A;":"","&#x2979;":"\\underset{\\rightarrow}{\\subset}","&#x2978;":"\\underset{\\rightarrow}{>}","&#x2977;":"","&#x2976;":"\\underset{\\leftarrow}{<}","&#x2975;":"\\underset{\\approx}{\\rightarrow}","&#x2974;":"\\underset{\\sim}{\\rightarrow}","&#x2973;":"\\underset{\\sim}{\\leftarrow}","&#x2972;":"\\overset{\\sim}{\\rightarrow}","&#x2971;":"\\overset{=}{\\rightarrow}","&#x2970;":"","&#x296F;":"","&#x296E;":"","&#x296D;":"\\overline{\\rightharpoondown}","&#x296C;":"\\underline{\\rightharpoonup}","&#x296B;":"\\overline{\\leftharpoondown}","&#x296A;":"\\underline{\\leftharpoonup}","&#x2969;":"\\rightleftharpoons","&#x2968;":"\\rightleftharpoons","&#x2967;":"\\rightleftharpoons","&#x2966;":"\\rightleftharpoons","&#x2965;":"\\Downarrow","&#x2964;":"\\Rightarrow","&#x2963;":"\\Uparrow","&#x2962;":"\\Leftarrow","&#x2961;":"\\downarrow","&#x2960;":"\\uparrow","&#x295F;":"\\rightarrow","&#x295E;":"\\leftarrow","&#x295D;":"\\downarrow","&#x295C;":"\\uparrow","&#x295B;":"\\rightarrow","&#x295A;":"\\leftarrow","&#x2959;":"\\downarrow","&#x2958;":"\\uparrow","&#x2957;":"\\rightarrow","&#x2956;":"\\leftarrow","&#x2955;":"\\downarrow","&#x2954;":"\\uparrow","&#x2953;":"\\rightarrow","&#x2952;":"\\leftarrow","&#x2951;":"\\updownarrow","&#x2950;":"\\leftrightarrow","&#x294F;":"\\updownarrow","&#x294E;":"\\leftrightarrow","&#x294D;":"\\updownarrow","&#x294C;":"\\updownarrow","&#x294B;":"\\leftrightarrow","&#x294A;":"\\leftrightarrow","&#x2949;":"","&#x2948;":"\\leftrightarrow","&#x2947;":"\\nrightarrow","&#x2946;":"","&#x2945;":"","&#x2944;":"\\rightleftarrows","&#x2943;":"\\leftrightarrows","&#x2942;":"\\rightleftarrows","&#x2941;":"\\circlearrowright","&#x2940;":"\\circlearrowleft","&#x293F;":"\\rightarrow","&#x293E;":"\\leftarrow","&#x293D;":"","&#x293C;":"","&#x293B;":"","&#x293A;":"","&#x2939;":"","&#x2938;":"","&#x2937;":"\\Rsh","&#x2936;":"\\Lsh","&#x2935;":"\\downarrow","&#x2934;":"\\uparrow","&#x2933;":"\\leadsto","&#x2932;":"","&#x2931;":"","&#x2930;":"","&#x292F;":"","&#x292E;":"","&#x292D;":"","&#x292C;":"\\times","&#x292B;":"\\times","&#x292A;":"","&#x2929;":"","&#x2928;":"","&#x2927;":"","&#x2926;":"","&#x2925;":"","&#x2924;":"","&#x2923;":"","&#x2922;":"","&#x2921;":"","&#x2920;":"\\mapsto\\cdot","&#x291F;":"\\cdot\\leftarrow","&#x291E;":"\\rightarrow\\cdot","&#x291D;":"\\leftarrow","&#x291C;":"\\rightarrow","&#x291B;":"\\leftarrow","&#x291A;":"\\rightarrow","&#x2919;":"\\leftarrow","&#x2918;":"\\rightarrow","&#x2917;":"\\rightarrow","&#x2916;":"\\rightarrow","&#x2915;":"\\rightarrow","&#x2914;":"\\rightarrow","&#x2913;":"\\downarrow","&#x2912;":"\\uparrow","&#x2911;":"\\rightarrow","&#x2910;":"\\rightarrow","&#x290F;":"\\rightarrow","&#x290E;":"\\leftarrow","&#x290D;":"\\rightarrow","&#x290C;":"\\leftarrow","&#x290B;":"\\Downarrow","&#x290A;":"\\Uparrow","&#x2909;":"\\uparrow","&#x2908;":"\\downarrow","&#x2907;":"\\Rightarrow","&#x2906;":"\\Leftarrow","&#x2905;":"\\mapsto","&#x2904;":"\\nLeftrightarrow","&#x2903;":"\\nRightarrow","&#x2902;":"\\nLeftarrow","&#x2901;":"\\rightsquigarrow","&#x2900;":"\\rightsquigarrow","&#x27FF;":"\\rightsquigarrow","&#x27FE;":"\\Rightarrow","&#x27FD;":"\\Leftarrow","&#x27FC;":"\\mapsto","&#x27FB;":"\\leftarrow","&#x27FA;":"\\Longleftrightarrow","&#x27F9;":"\\Longrightarrow","&#x27F8;":"\\Longleftarrow","&#x27F7;":"\\leftrightarrow","&#x27F6;":"\\rightarrow","&#x27F5;":"\\leftarrow","&#x27F1;":"\\Downarrow","&#x27F0;":"\\Uparrow","&#x22B8;":"\\rightarrow","&#x21FF;":"\\leftrightarrow","&#x21FE;":"\\rightarrow","&#x21FD;":"\\leftarrow","&#x21FC;":"\\nleftrightarrow","&#x21FB;":"\\nrightarrow","&#x21FA;":"\\nleftarrow","&#x21F9;":"\\nleftrightarrow","&#x21F8;":"\\nrightarrow","&#x21F7;":"\\nleftarrow","&#x21F6;":"\\Rrightarrow","&#x21F5;":"","&#x21F4;":"\\rightarrow","&#x21F3;":"\\Updownarrow","&#x21F2;":"\\searrow","&#x21F1;":"\\nwarrow","&#x21F0;":"\\Leftarrow","&#x21EF;":"\\Uparrow","&#x21EE;":"\\Uparrow","&#x21ED;":"\\Uparrow","&#x21EC;":"\\Uparrow","&#x21EB;":"\\Uparrow","&#x21EA;":"\\Uparrow","&#x21E9;":"\\Downarrow","&#x21E8;":"\\Rightarrow","&#x21E7;":"\\Uparrow","&#x21E6;":"\\Leftarrow","&#x21E5;":"\\rightarrow","&#x21E4;":"\\leftarrow","&#x21E3;":"\\downarrow","&#x21E2;":"\\rightarrow","&#x21E1;":"\\uparrow","&#x21E0;":"\\leftarrow","&#x21DF;":"\\downarrow","&#x21DE;":"\\uparrow","&#x21DD;":"\\rightsquigarrow","&#x21DC;":"\\leftarrow","&#x21DB;":"\\Rrightarrow","&#x21DA;":"\\Lleftarrow","&#x21D9;":"\\swarrow","&#x21D8;":"\\searrow","&#x21D7;":"\\nearrow","&#x21D6;":"\\nwarrow","&#x21D5;":"\\Updownarrow","&#x21D4;":"\\Leftrightarrow","&#x21D3;":"\\Downarrow","&#x21D2;":"\\Rightarrow","&#x21D1;":"\\Uparrow","&#x21D0;":"\\Leftarrow","&#x21CF;":"\\nRightarrow","&#x21CE;":"\\nLeftrightarrow","&#x21CD;":"\\nLeftarrow","&#x21CC;":"\\rightleftharpoons","&#x21CB;":"\\leftrightharpoons","&#x21CA;":"\\downdownarrows","&#x21C9;":"\\rightrightarrows","&#x21C8;":"\\upuparrows","&#x21C7;":"\\leftleftarrows","&#x21C6;":"\\leftrightarrows","&#x21C5;":"","&#x21C4;":"\\rightleftarrows","&#x21C3;":"\\downharpoonleft","&#x21C2;":"\\downharpoonright","&#x21C1;":"\\rightharpoondown","&#x21C0;":"\\rightharpoonup","&#x21BF;":"\\upharpoonleft","&#x21BE;":"\\upharpoonright","&#x21BD;":"\\leftharpoondown","&#x21BC;":"\\leftharpoonup","&#x21BB;":"\\circlearrowright","&#x21BA;":"\\circlearrowleft","&#x21B9;":"\\leftrightarrows","&#x21B8;":"\\overline{\\nwarrow}","&#x21B7;":"\\curvearrowright","&#x21B6;":"\\curvearrowleft","&#x21B5;":"\\swarrow","&#x21B4;":"\\searrow","&#x21B3;":"\\Rsh","&#x21B2;":"\\Lsh","&#x21B1;":"\\Rsh","&#x21B0;":"\\Lsh","&#x21AF;":"\\swarrow","&#x21AE;":"","&#x21AD;":"\\leftrightsquigarrow","&#x21AC;":"\\looparrowright","&#x21AB;":"\\looparrowleft","&#x21AA;":"\\hookrightarrow","&#x21A9;":"\\hookleftarrow","&#x21A8;":"\\underline{\\updownarrow}","&#x21A7;":"\\downarrow","&#x21A6;":"\\rightarrowtail","&#x21A5;":"\\uparrow","&#x21A4;":"\\leftarrowtail","&#x21A3;":"\\rightarrowtail","&#x21A2;":"\\leftarrowtail","&#x21A1;":"\\downarrow","&#x21A0;":"\\twoheadrightarrow","&#x219F;":"\\uparrow","&#x219E;":"\\twoheadleftarrow","&#x219D;":"\\nearrow","&#x219C;":"\\nwarrow","&#x219B;":"","&#x219A;":"","&#x2199;":"\\swarrow","&#x2198;":"\\searrow","&#x2197;":"\\nearrow","&#x2196;":"\\nwarrow","&#x2195;":"\\updownarrow","&#x2194;":"\\leftrightarrow","&#x2193;":"\\downarrow","&#x2192;":"\\rightarrow","&#x2191;":"\\uparrow","&#x2190;":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\left|\\right.","&#x2AFE;":"","&#x2AFD;":"//","&#x2AFB;":"///","&#x2AFA;":"","&#x2AF9;":"","&#x2AF8;":"","&#x2AF7;":"","&#x2AF6;":"\\vdots","&#x2AF5;":"","&#x2AF4;":"","&#x2AF3;":"","&#x2AF2;":"\\nparallel","&#x2AF1;":"","&#x2AF0;":"","&#x2AEF;":"","&#x2AEE;":"\\bcancel{\\mid}","&#x2AED;":"","&#x2AEC;":"","&#x2AEB;":"","&#x2AEA;":"","&#x2AE9;":"","&#x2AE8;":"\\underline{\\perp}","&#x2AE7;":"\\overline{\\top}","&#x2AE6;":"","&#x2AE5;":"","&#x2AE4;":"","&#x2AE3;":"","&#x2AE2;":"","&#x2AE1;":"","&#x2AE0;":"\\perp","&#x2ADF;":"\\top","&#x2ADE;":"\\dashv","&#x2ADD;&#x338;":"","&#x2ADD;":"","&#x2ADB;":"\\pitchfork","&#x2ADA;":"","&#x2AD9;":"","&#x2AD8;":"","&#x2AD7;":"","&#x2AD6;":"","&#x2AD5;":"","&#x2AD4;":"","&#x2AD3;":"","&#x2AD2;":"","&#x2AD1;":"","&#x2AD0;":"","&#x2ACF;":"","&#x2ACE;":"","&#x2ACD;":"","&#x2ACC;":"\\underset{\\neq}{\\supset}","&#x2ACB;":"\\underset{\\neq}{\\subset}","&#x2ACA;":"\\underset{\\approx}{\\supset}","&#x2AC9;":"\\underset{\\approx}{\\subset}","&#x2AC8;":"\\underset{\\sim}{\\supset}","&#x2AC7;":"\\underset{\\sim}{\\subset}","&#x2AC6;":"\\supseteqq","&#x2AC5;":"\\subseteqq","&#x2AC4;":"\\dot{\\supseteq}","&#x2AC3;":"\\dot{\\subseteq}","&#x2AC2;":"\\underset{\\times}{\\supset}","&#x2AC1;":"\\underset{\\times}{\\subset}","&#x2AC0;":"\\underset{+}{\\supset}","&#x2ABF;":"\\underset{+}{\\subset}","&#x2ABE;":"","&#x2ABD;":"","&#x2ABC;":"\\gg ","&#x2ABB;":"\\ll","&#x2ABA;":"\\underset{\\cancel{\\approx}}{\\succ}","&#x2AB9;":"\\underset{\\cancel{\\approx}}{\\prec}","&#x2AB8;":"\\underset{\\approx}{\\succ}","&#x2AB7;":"\\underset{\\approx}{\\prec}","&#x2AB6;":"\\underset{\\cancel{=}}{\\succ}","&#x2AB5;":"\\underset{\\cancel{=}}{\\prec}","&#x2AB4;":"\\underset{=}{\\succ}","&#x2AB3;":"\\underset{=}{\\prec}","&#x2AB2;":"","&#x2AB1;":"","&#x2AAE;":"","&#x2AAD;":"\\underline{\\hcancel{>}}","&#x2AAC;":"\\underline{\\hcancel{>}}","&#x2AAB;":"\\hcancel{>}","&#x2AAA;":"\\hcancel{<}","&#x2AA9;":"","&#x2AA8;":"","&#x2AA7;":"\\vartriangleright","&#x2AA6;":"\\vartriangleleft","&#x2AA5;":"><","&#x2AA4;":"><","&#x2AA3;":"\\underline{\\ll}","&#x2AA2;&#x338;":"\\cancel{\\gg}","&#x2AA2;":"\\gg","&#x2AA1;&#x338;":"\\cancel{\\ll}","&#x2AA1;":"\\ll","&#x2AA0;":"\\overset{\\sim}{\\geqq}","&#x2A9F;":"\\overset{\\sim}{\\leqq}","&#x2A9E;":"\\overset{\\sim}{>}","&#x2A9D;":"\\overset{\\sim}{<}","&#x2A9C;":"","&#x2A9B;":"","&#x2A9A;":"\\overset{=}{>}","&#x2A99;":"\\overset{=}{<}","&#x2A98;":"","&#x2A97;":"","&#x2A96;":"","&#x2A95;":"","&#x2A94;":"","&#x2A93;":"","&#x2A92;":"\\underset{=}{\\gtrless}","&#x2A91;":"\\underset{=}{\\lessgtr}","&#x2A90;":"\\underset{<}{\\gtrsim}","&#x2A8F;":"\\underset{>}{\\lesssim}","&#x2A8E;":"\\underset{\\simeq}{>}","&#x2A8D;":"\\underset{\\simeq}{<}","&#x2A8C;":"\\gtreqqless","&#x2A8B;":"\\lesseqqgtr","&#x2A8A;":"\\underset{\\cancel{\\approx}}{>}","&#x2A89;":"\\underset{\\approx}{<}","&#x2A86;":"\\underset{\\approx}{>}","&#x2A85;":"\\underset{\\approx}{<}","&#x2A84;":"","&#x2A83;":"","&#x2A82;":"","&#x2A81;":"","&#x2A80;":"","&#x2A7F;":"","&#x2A7E;&#x338;":"\\bcancel{\\geq}","&#x2A7E;":"\\geq","&#x2A7D;&#x338;":"\\bcancel{\\leq}","&#x2A7D;":"\\leq","&#x2A7C;":"","&#x2A7B;":"","&#x2A7A;":"","&#x2A79;":"","&#x2A78;":"\\overset{\\dots}{\\equiv}","&#x2A77;":"","&#x2A76;":"===","&#x2A75;":"==","&#x2A74;":"::=","&#x2A73;":"","&#x2A72;":"\\underset{=}{+}","&#x2A71;":"\\overset{=}{+}","&#x2A70;":"\\overset{\\approx}{=}","&#x2A6F;":"\\overset{\\wedge}{=}","&#x2A6E;":"\\overset{*}{=}","&#x2A6D;":"\\dot{\\approx}","&#x2A6C;":"","&#x2A6B;":"","&#x2A6A;":"\\dot{\\sim}","&#x2A69;":"","&#x2A68;":"","&#x2A67;":"\\dot{\\equiv}","&#x2A66;":"\\underset{\\cdot}{=}","&#x2A65;":"","&#x2A64;":"","&#x2A63;":"\\underset{=}{\\vee}","&#x2A62;":"\\overset{=}{\\vee}","&#x2A61;":"ul(vv)","&#x2A60;":"\\underset{=}{\\wedge}","&#x2A5F;":"\\underline{\\wedge}","&#x2A5E;":"\\overset{=}{\\wedge}","&#x2A5D;":"\\hcancel{\\vee}","&#x2A5C;":"\\hcancel{\\wedge}","&#x2A5B;":"","&#x2A5A;":"","&#x2A59;":"","&#x2A58;":"\\vee","&#x2A57;":"\\wedge","&#x2A56;":"","&#x2A55;":"","&#x2A54;":"","&#x2A53;":"","&#x2A52;":"\\dot{\\vee}","&#x2A51;":"\\dot{\\wedge}","&#x2A50;":"","&#x2A4F;":"","&#x2A4E;":"","&#x2A4D;":"\\overline{\\cap}","&#x2A4C;":"\\overline{\\cup}","&#x2A4B;":"","&#x2A4A;":"","&#x2A49;":"","&#x2A48;":"","&#x2A47;":"","&#x2A46;":"","&#x2A45;":"","&#x2A44;":"","&#x2A43;":"\\overline{\\cap}","&#x2A42;":"\\overline{\\cup}","&#x2A41;":"","&#x2A40;":"","&#x2A3E;":"","&#x2A3D;":"\\llcorner","&#x2A3C;":"\\lrcorner","&#x2A3B;":"","&#x2A3A;":"","&#x2A39;":"","&#x2A38;":"","&#x2A37;":"","&#x2A36;":"\\hat{\\otimes}","&#x2A35;":"","&#x2A34;":"","&#x2A33;":"","&#x2A32;":"\\underline{\\times}","&#x2A31;":"\\underline{\\times}","&#x2A30;":"\\dot{\\times}","&#x2A2E;":"","&#x2A2D;":"","&#x2A2C;":"","&#x2A2B;":"","&#x2A2A;":"","&#x2A29;":"","&#x2A28;":"","&#x2A27;":"","&#x2A26;":"\\underset{\\sim}{+}","&#x2A25;":"\\underset{\\circ}{+}","&#x2A24;":"\\overset{\\sim}{+}","&#x2A23;":"\\hat{+}","&#x2A22;":"\\dot{+}","&#x2A21;":"\\upharpoonright","&#x2A20;":">>","&#x2A1F;":"","&#x2A1E;":"\\triangleleft","&#x2A1D;":"\\bowtie","&#x29FF;":"","&#x29FE;":"+","&#x29FB;":"\\hcancel{|||}","&#x29FA;":"\\hcancel{||}","&#x29F9;":"\\backslash","&#x29F8;":"/","&#x29F7;":"hcancel{\backslash}","&#x29F6;":"","&#x29F5;":"\\backslash","&#x29F2;":"\\Phi","&#x29F1;":"","&#x29F0;":"","&#x29EE;":"","&#x29ED;":"","&#x29EC;":"","&#x29EB;":"\\lozenge","&#x29EA;":"","&#x29E9;":"","&#x29E8;":"","&#x29E7;":"\\ddagger","&#x29E2;":"\\sqcup\\sqcup","&#x29E1;":"","&#x29E0;":"\\square","&#x29DE;":"","&#x29DD;":"","&#x29DC;":"","&#x29DB;":"\\{\\{","&#x29D9;":"\\{","&#x29D8;":"\\}","&#x29D7;":"","&#x29D6;":"","&#x29D5;":"\\bowtie","&#x29D4;":"\\bowtie","&#x29D3;":"\\bowtie","&#x29D2;":"\\bowtie","&#x29D1;":"\\bowtie","&#x29D0;&#x338;":"| \\not\\triangleright","&#x29D0;":"| \\triangleright","&#x29CF;&#x338;":"\\not\\triangleleft |","&#x29CF;":"\\triangleleft |","&#x29CE;":"","&#x29CD;":"\\triangle","&#x29CC;":"","&#x29CB;":"\\underline{\\triangle}","&#x29CA;":"\\dot{\\triangle}","&#x29C9;":"","&#x29C8;":"\\boxed{\\circ}","&#x29C7;":"\\boxed{\\circ}","&#x29C6;":"\\boxed{\\rightarrow}","&#x29C5;":"\\bcancel{\\square}","&#x29C4;":"\\cancel{\\square}","&#x29C3;":"\\odot","&#x29C2;":"\\odot","&#x29BF;":"\\odot","&#x29BE;":"\\odot","&#x29BD;":"\\varnothing","&#x29BC;":"\\oplus","&#x29BB;":"\\otimes","&#x29BA;":"","&#x29B9;":"\\varnothing","&#x29B8;":"\\varnothing","&#x29B7;":"\\ominus","&#x29B6;":"\\ominus","&#x29B5;":"\\ominus","&#x29B4;":"\\vec{\\varnothing}","&#x29B3;":"\\vec{\\varnothing}","&#x29B2;":"\\dot{\\varnothing}","&#x29B1;":"\\overline{\\varnothing}","&#x29B0;":"\\varnothing","&#x29AF;":"","&#x29AE;":"","&#x29AD;":"","&#x29AC;":"","&#x29AB;":"","&#x29AA;":"","&#x29A9;":"","&#x29A8;":"","&#x29A7;":"","&#x29A6;":"","&#x29A5;":"","&#x29A4;":"","&#x29A3;":"","&#x29A2;":"","&#x29A1;":"\\not\\lor","&#x29A0;":"\\bcancel{>}","&#x2982;":":","&#x2981;":"\\circ","&#x2758;":"|","&#x25B2;":"\\bigtriangleup","&#x22FF;":"\\Epsilon","&#x22FE;":"\\overline{\\ni}","&#x22FD;":"\\overline{\\ni}","&#x22FC;":"\\in","&#x22FB;":"\\in","&#x22FA;":"\\in","&#x22F9;":"\\underline{\\in}","&#x22F8;":"\\underline{\\in}","&#x22F7;":"\\overline{\\in}","&#x22F6;":"\\overline{\\in}","&#x22F5;":"\\dot{\\in}","&#x22F4;":"\\in","&#x22F3;":"\\in","&#x22F2;":"\\in","&#x22F0;":"\\ddots","&#x22E9;":"\\underset{\\sim}{\\succ}","&#x22E8;":"\\underset{\\sim}{\\prec}","&#x22E7;":"\\underset{\\not\\sim}{>}","&#x22E6;":"\\underset{\\not\\sim}{<}","&#x22E5;":"\\not\\sqsupseteq","&#x22E4;":"\\not\\sqsubseteq","&#x22E3;":"\\not\\sqsupseteq","&#x22E2;":"\\not\\sqsubseteq","&#x22E1;":"\\nsucc","&#x22E0;":"\\nprec","&#x22DF;":"\\succ","&#x22DE;":"\\prec","&#x22DD;":"\\overline{>}","&#x22DC;":"\\overline{<}","&#x22DB;":"\\underset{>}{\\leq}","&#x22DA;":"\\underset{<}{\\geq}","&#x22D5;":"\\#","&#x22D3;":"\\cup","&#x22D2;":"\\cap","&#x22D1;":"\\supset","&#x22D0;":"\\subset","&#x22CF;":"\\wedge","&#x22CE;":"\\vee","&#x22CD;":"\\simeq","&#x22C8;":"\\bowtie","&#x22C7;":"\\ast","&#x22C6;":"\\star","&#x22C4;":"\\diamond","&#x22BF;":"\\triangle","&#x22BE;":"\\measuredangle","&#x22BD;":"\\overline{\\lor}","&#x22BC;":"\\overline{\\land}","&#x22BB;":"\\underline{\\lor}","&#x22BA;":"\\top","&#x22B9;":"","&#x22B7;":"\\circ\\multimap","&#x22B6;":"\\circ\\multimap","&#x22B3;":"\\triangleright","&#x22B2;":"\\triangleleft","&#x22B1;":"\\succ","&#x22B0;":"\\prec","&#x22AB;":"|\\models","&#x22AA;":"|\\models","&#x22A7;":"\\models","&#x22A6;":"\\vdash","&#x229D;":"\\ominus","&#x229C;":"\\ominus","&#x229B;":"\\odot","&#x229A;":"\\odot","&#x2294;":"\\sqcup","&#x2293;":"\\sqcap","&#x2292;":"\\sqsupseteq","&#x2291;":"\\sqsubseteq","&#x2290;&#x338;":"\\not\\sqsupset","&#x2290;":"\\sqsupset","&#x228F;&#x338;":"\\not\\sqsubset","&#x228F;":"\\sqsubset","&#x228E;":"\\cup","&#x228D;":"\\cup","&#x228C;":"\\cup","&#x227F;&#x338;":"\\not\\succsim","&#x227F;":"\\succsim","&#x227E;":"\\precsim","&#x2279;":"\\not\\overset{>}{<}","&#x2278;":"\\not\\overset{>}{<}","&#x2277;":"\\overset{>}{<}","&#x2276;":"\\overset{<}{>}","&#x2275;":"\\not\\geg","&#x2274;":"\\not\\leq","&#x2273;":"\\geg","&#x2272;":"\\leq","&#x226C;":"","&#x2267;":"\\geg","&#x2266;&#x338;":"\\not\\leq","&#x2266;":"\\leq","&#x2263;":"\\overset{=}{=} ","&#x225E;":"\\overset{m}{=} ","&#x225D;":"\\overset{def}{=}","&#x2258;":"=","&#x2256;":"=","&#x2255;":"=:","&#x2253;":"\\doteq","&#x2252;":"\\doteq","&#x2251;":"\\doteq","&#x2250;":"\\doteq","&#x224F;&#x338;":"","&#x224F;":"","&#x224E;&#x338;":"","&#x224E;":"","&#x224C;":"\\approx","&#x224B;":"\\approx","&#x224A;":"\\approx","&#x2242;&#x338;":"\\neq","&#x2242;":"=","&#x223F;":"\\sim","&#x223E;":"\\infty","&#x223D;&#x331;":"\\sim","&#x223D;":"\\sim","&#x223B;":"\\sim","&#x223A;":":-:","&#x2239;":"-:","&#x2238;":"\\bot","&#x2237;":"::","&#x2236;":":","&#x2223;":"|","&#x221F;":"\\llcorner","&#x2219;":"\\cdot","&#x2218;":"\\circ","&#x2217;":"*","&#x2215;":"/","&#x220E;":"\\square","&#x220D;":"\\ni","&#x220A;":"\\in","&#x2206;":"\\Delta","&#x2044;":"/","&#x2AB0;&#x338;":"\\nsucceq","&#x2AB0;":"\\succeq","&#x2AAF;&#x338;":"\\npreceq","&#x2AAF;":"\\preceq","&#x2A88;":"\\ngeqslant","&#x2A87;":"\\nleqslant","&#x29F3;":"\\Phi","&#x29E6;":"\\models","&#x29E5;":"\\not\\equiv","&#x29E4;":"\\approx\\neq","&#x29E3;":"\\neq","&#x29C1;":"\\circle","&#x29C0;":"\\circle","&#x25E6;":"\\circle","&#x25D7;":"\\circle","&#x25D6;":"\\circle","&#x25CF;":"\\circle","&#x25CE;":"\\circledcirc","&#x25CD;":"\\circledcirc","&#x25CC;":"\\circledcirc","&#x25C9;":"\\circledcirc","&#x25C8;":"\\diamond","&#x25C7;":"\\diamond","&#x25C6;":"\\diamond","&#x25C5;":"\\triangleleft","&#x25C4;":"\\triangleleft","&#x25C3;":"\\triangleleft","&#x25C2;":"\\triangleleft","&#x25C1;":"\\triangleleft","&#x25C0;":"\\triangleleft","&#x25BF;":"\\triangledown","&#x25BE;":"\\triangledown","&#x25BD;":"\\triangledown","&#x25BC;":"\\triangledown","&#x25B9;":"\\triangleright","&#x25B8;":"\\triangleright","&#x25B7;":"\\triangleright","&#x25B6;":"\\triangleright","&#x25B5;":"\\triangle","&#x25B4;":"\\triangle","&#x25B3;":"\\triangle","&#x25B1;":"\\square","&#x25B0;":"\\square","&#x25AF;":"\\square","&#x25AE;":"\\square","&#x25AD;":"\\square","&#x25AB;":"\\square","&#x25AA;":"\\square","&#x25A1;":"\\square","&#x25A0;":"\\square","&#x22ED;":"\\not\\triangleright","&#x22EC;":"\\not\\triangleleft","&#x22EB;":"\\not\\triangleright","&#x22EA;":"\\not\\triangleleft","&#x22D9;":"\\ggg","&#x22D8;":"\\lll","&#x22D7;":"*>","&#x22D6;":"<*","&#x22D4;":"\\pitchfork","&#x22CC;":"","&#x22CB;":"","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#x22B5;":"\\triangleright","&#x22B4;":"","&#x22A5;":"\\bot","&#x2281;":"\\nsucc","&#x2280;":"\\preceq","&#x227D;":"\\succeq","&#x227C;":"\\preceq","&#x227B;":"\\succ","&#x227A;":"\\prec","&#x2271;":"\\geq/","&#x2270;":"\\leq/","&#x226D;":"\\neq","&#x226B;&#x338;":"\\not\\gg","&#x226B;":"\\gg","&#x226A;&#x338;":"\\not\\ll","&#x226A;":"\\ll","&#x2269;":"\\ngeqslant","&#x2268;":"\\nleqslant","&#x2261;":"\\equiv","&#x225F;":"\\doteq","&#x225C;":"\\triangleq","&#x225B;":"\\doteq","&#x225A;":"\\triangleq","&#x2259;":"\\triangleq","&#x2257;":"\\doteq","&#x2254;":":=","&#x224D;":"\\asymp","&#x2247;":"\\ncong","&#x2246;":"\\ncong","&#x2245;":"\\cong","&#x2244;":"\\not\\simeq","&#x2243;":"\\simeq","&#x2241;":"\\not\\sim","&#x2226;":"\\not\\parallel","&#x2225;":"\\parallel","&#x2224;":"\\not|","&#x221D;":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","&#x2260;":"\\neq","&#x2262;":"\\equiv /","&#x2249;":"\\approx /","&#x223C;":"sim","&#x2248;":"\\approx","&#x226E;":"</","&lt;":"<","&#x226F;":">/",">=":">=",">":">","&#x2265;":"\\geq","&#x2264;":"\\leq","&lt;=":"<=","&#x228B;":"\\supsetneq","&#x228A;":"\\subsetneq","&#x2289;":"\\nsupseteq","&#x2288;":"\\nsubseteq","&#x2287;":"\\supseteq","&#x2286;":"\\subseteq","&#x2285;":"\\not\\supset","&#x2284;":"\\not\\subset","&#x2283;&#x20D2;":"\\supset |","&#x2283;":"\\supset","&#x2282;&#x20D2;":"\\subset |","&#x2282;":"\\subset","&#x220C;":"\\not\\in","&#x2209;":"\\notin","&#x2208;":"\\in","&#x2201;":"C","&#x2204;":"\\nexists","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x2227;":"\\land","&amp;&amp;":"\\&\\&","&#x2228;":"\\lor","&#x22AF;":"\\cancel{\\vDash}","&#x22AE;":"\\cancel{\\Vdash}","&#x22AD;":"\\nvDash","&#x22AC;":"\\nvDash","&#x22A9;":"\\Vdash","&#x22A8;":"\\vDash","&#x22A4;":"\\top","&#x22A3;":"\\dashv","&#x22A2;":"\\vdash","&#x220B;":"\\ni","&#x22F1;":"\\ddots","&#x22EF;":"\\hdots","&#x22EE;":"\\vdots","&#x2026;":"\\hdots","&#x3F6;":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","&#x2235;":"\\because","&#x2234;":"\\therefore ","&#x2063;":"",",":",",";":";","&#x29FD;":"\\}","&#x29FC;":"\\{","&#x2998;":"\\]","&#x2997;":"\\[","&#x2996;":"\\ll","&#x2995;":"\\gg","&#x2994;":"\\gg","&#x2993;":"\\ll","&#x2992;":"\\gg","&#x2991;":"\\ll","&#x2990;":"\\]","&#x298F;":"\\]","&#x298E;":"\\]","&#x298D;":"\\[","&#x298C;":"\\[","&#x298B;":"\\]","&#x298A;":"\\triangleright","&#x2989;":"\\triangleleft","&#x2988;":"|\\)","&#x2987;":"\\(|","&#x2986;":"|\\)","&#x2985;":"\\(\\(","&#x2984;":"|\\}","&#x2983;":"\\{|","&#x2980;":"\\||","&#x27EF;":"\\left. \\right]","&#x27EE;":"\\left[ \\right.","&#x27ED;":"\\left. \\right]]","&#x27EC;":"\\left[[ \\right.","&#x27EB;":"\\gg","&#x27EA;":"\\ll","&#x27E9;":"\\rangle","&#x27E8;":"\\langle","&#x27E7;":"\\left. \\right]]","&#x27E6;":"\\left[[ \\right.","&#x2773;":"\\left.\\right)","&#x2772;":"\\left(\\right.","&#x232A;":"\\rangle","&#x2329;":"\\langle","&#x230B;":"\\rfloor","&#x230A;":"\\lfloor","&#x2309;":"\\rceil","&#x2308;":"\\lceil","&#x2016;":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","&#x201D;":'"',"&#x201C;":"``","&#x2019;":"'","&#x2018;":"`","%CE%B1":"\\alpha","%CE%B2":"\\beta","%CE%B3":"\\gamma","%CE%93":"\\Gamma","%CE%B4":"\\delta","%CE%94":"\\Delta","%CF%B5":"\\epsilon","%CE%B6":"\\zeta","%CE%B7":"\\eta","%CE%B8":"\\theta","%CE%98":"\\Theta","%CE%B9":"\\iota","%CE%BA":"\\kappa","%CE%BB":"\\lambda","%CE%BC":"\\mu","%CE%BD":"\\nu","%CE%BF":"\\omicron","%CF%80":"\\pi","%CE%A0":"\\Pi","%CF%81":"\\pho","%CF%83":"\\sigma","%CE%A3":"\\Sigma","%CF%84":"\\tau","%CF%85":"\\upsilon","%CE%A5":"\\Upsilon","%CF%95":"\\phi","%CE%A6":"\\Phi","%CF%87":"\\chi","%CF%88":"\\psi","%CE%A8":"\\Psi","%CF%89":"\\omega","%CE%A9":"\\Omega"}},9039:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathOperatorsByGlyph=void 0,d.allMathOperatorsByGlyph={_:"\\underline","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\square","":"\\square","":"","":"''''","":"\\overline","":"```","":"``","":"`","":"'''","":"''","":"``","":",,","":"`","":",","^":"\\hat","":"\\sim","":"\\sim","":"\\sim","":"\\circ","":"\\cdot","":" ","":"\\_","":"","":"","":"","":"","":"\\hat",:"o","":"1","":",","":"","":"3","":"2","":"\\circ","":"\\bar",:"a","":"\\nrightarrow","":"\\cdot\\cdot","~":"\\sim","`":"`","--":"--","++":"++","&":"\\&","":"\\sqrt[4]{}","":"\\sqrt[3]{}","":"\\sqrt{}","":"d","":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","":"\\#","":"","":"","":"'","<>":"<>","**":"\\star\\star","":"\\nabla","":"\\partial","":"\\bigodot","":"\\neg","":"\\measuredangle","":"\\measuredangle","":"\\angle","":"\\div","/":"/","":"\\backslash","\\":"\\backslash","%":"\\%","":"\\bigotimes","":"\\cdot","":"\\coprod","":"\\times","":"\\cdot","":"\\boxdot","":"\\boxtimes","":"","":"-","":"\\cdot",".":".","*":"\\star","":"\\cup","":"\\cap","":"\\coprod","":"\\prod","":"","":"","":"\\mid\\mid\\mid","":"\\times","":"","":"","":"\\sqcup","":"\\sqcap","":"\\otimes","":"\\odot","":"\\cap","":"\\vee","":"\\wedge","":"\\uplus","":"\\cup","":"\\cup","":"\\underline{\\int}","":"\\overline{\\int}","":"\\int","":"\\int","":"\\int","":"\\int","":"\\oint","":"\\oint","":"\\int","":"\\int","":"\\int","":"\\int","":"\\int","":"\\bcancel{\\int}","":"","":"\\hcancel{\\int}","":"\\iiiint","":"\\oint","":"\\oint","":"\\int","":"\\oiint","":"\\oiint","":"\\oint","":"\\int","":"\\oplus","":"\\oslash","":"\\ominus","":"\\oplus","":"\\iiint","":"\\iint","":"","":"","":"\\sum","":"\\boxminus","":"\\boxplus","":"\\dot{+}","":"+-","":"-","":"\\pm","-":"-","+":"+","":"\\Rrightarrow","":"\\Lleftarrow","":":\\rightarrow","":"","":"\\bullet-\\bullet","":"\\angle","":"\\measuredangle","":"\\measuredangle","":"\\perp","":"\\measuredangle","":"","":"\\vdots","":"","":"","":"\\prec","":"\\succ","":"\\underset{\\rightarrow}{\\supset}","":"","":"\\underset{\\rightarrow}{\\subset}","":"\\underset{\\rightarrow}{>}","":"","":"\\underset{\\leftarrow}{<}","":"\\underset{\\approx}{\\rightarrow}","":"\\underset{\\sim}{\\rightarrow}","":"\\underset{\\sim}{\\leftarrow}","":"\\overset{\\sim}{\\rightarrow}","":"\\overset{=}{\\rightarrow}","":"","":"","":"","":"\\overline{\\rightharpoondown}","":"\\underline{\\rightharpoonup}","":"\\overline{\\leftharpoondown}","":"\\underline{\\leftharpoonup}","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\leftrightarrow","":"","":"\\leftrightarrow","":"\\nrightarrow","":"","":"","":"\\rightleftarrows","":"\\leftrightarrows","":"\\rightleftarrows","":"\\circlearrowright","":"\\circlearrowleft","":"\\rightarrow","":"\\leftarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":" ","":" ","":" ","":" ","":" ","":"\\times","":"\\times","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":"\\mapsto\\cdot","":"\\cdot\\leftarrow","":"\\rightarrow\\cdot","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\uparrow","":"\\downarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\nLeftrightarrow","":"\\nRightarrow","":"\\nLeftarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\leftarrow","":"\\Longleftrightarrow","":"\\Longrightarrow","":"\\Longleftarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\rightarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\Rrightarrow","":"","":"\\rightarrow","":"\\Updownarrow","":"\\searrow","":"\\nwarrow","":"\\Leftarrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightsquigarrow","":"\\leftarrow","":"\\Rrightarrow","":"\\Lleftarrow","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\Updownarrow","":"\\Leftrightarrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\nRightarrow","":"\\nLeftrightarrow","":"\\nLeftarrow","":"\\rightleftharpoons","":"\\leftrightharpoons","":"\\downdownarrows","":"\\rightrightarrows","":"\\upuparrows","":"\\leftleftarrows","":"\\leftrightarrows","":"","":"\\rightleftarrows","":"\\downharpoonleft","":"\\downharpoonright","":"\\rightharpoondown","":"\\rightharpoonup","":"\\upharpoonleft","":"\\upharpoonright","":"\\leftharpoondown","":"\\leftharpoonup","":"\\circlearrowright","":"\\circlearrowleft","":"\\leftrightarrows","":"\\overline{\\nwarrow}","":"\\curvearrowright","":"\\curvearrowleft","":"\\swarrow","":"\\searrow","":"\\Rsh","":"\\Lsh","":"\\Rsh","":"\\Lsh","":"\\swarrow","":"","":"\\leftrightsquigarrow","":"\\looparrowright","":"\\looparrowleft","":"\\hookrightarrow","":"\\hookleftarrow","":"\\underline{\\updownarrow}","":"\\downarrow","":"\\rightarrowtail","":"\\uparrow","":"\\leftarrowtail","":"\\rightarrowtail","":"\\leftarrowtail","":"\\downarrow","":"\\twoheadrightarrow","":"\\uparrow","":"\\twoheadleftarrow","":"\\nearrow","":"\\nwarrow","":"","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\mid","":"","":"//","":"///","":"","":"","":"","":"","":"\\vdots","":"","":"","":"","":"\\nparallel","":"","":"","":"","":"\\bcancel{\\mid}","":"","":"","":"","":"","":"","":"\\underline{\\perp}","":"\\overline{\\top}","":"","":"","":"","":"","":"","":"","":"\\perp","":"\\top","":"\\dashv","":"","":"","":"\\pitchfork","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\underset{\\neq}{\\supset}","":"\\underset{\\neq}{\\subset}","":"\\underset{\\approx}{\\supset}","":"\\underset{\\approx}{\\subset}","":"\\underset{\\sim}{\\supset}","":"\\underset{\\sim}{\\subset}","":"\\supseteqq","":"\\subseteqq","":"\\dot{\\supseteq}","":"\\dot{\\subseteq}","":"\\underset{\\times}{\\supset}","":"\\underset{\\times}{\\subset}","":"\\underset{+}{\\supset}","":"\\underset{+}{\\subset}","":"","":"","":"\\gg ","":"\\ll","":"\\underset{\\cancel{\\approx}}{\\succ}","":"\\underset{\\cancel{\\approx}}{\\prec}","":"\\underset{\\approx}{\\succ}","":"\\underset{\\approx}{\\prec}","":"\\underset{\\cancel{=}}{\\succ}","":"\\underset{\\cancel{=}}{\\prec}","":"\\underset{=}{\\succ}","":"\\underset{=}{\\prec}","":"","":"","":"","":"\\underline{\\hcancel{>}}","":"\\underline{\\hcancel{>}}","":"\\hcancel{>}","":"\\hcancel{<}","":"","":"","":"\\vartriangleright","":"\\vartriangleleft","":"><","":"><","":"\\underline{\\ll}","":"\\cancel{\\gg}","":"\\gg","":"\\cancel{\\ll}","":"\\ll","":"\\overset{\\sim}{\\geqq}","":"\\overset{\\sim}{\\leqq}","":"\\overset{\\sim}{>}","":"\\overset{\\sim}{<}","":"","":"","":"\\overset{=}{>}","":"\\overset{=}{<}","":"","":"","":"","":"","":"","":"","":"\\underset{=}{\\gtrless}","":"\\underset{=}{\\lessgtr}","":"\\underset{<}{\\gtrsim}","":"\\underset{>}{\\lesssim}","":"\\underset{\\simeq}{>}","":"\\underset{\\simeq}{<}","":"\\gtreqqless","":"\\lesseqqgtr","":"\\underset{\\cancel{\\approx}}{>}","":"\\underset{\\approx}{<}","":"\\underset{\\approx}{>}","":"\\underset{\\approx}{<}","":"","":"","":"","":"","":"","":"","":"\\bcancel{\\geq}","":"\\geq","":"\\bcancel{\\leq}","":"\\leq","":"","":"","":"","":"","":"\\overset{\\dots}{\\equiv}","":"","":"===","":"==","":"::=","":"","":"\\underset{=}{+}","":"\\overset{=}{+}","":"\\overset{\\approx}{=}","":"\\overset{\\wedge}{=}","":"\\overset{*}{=}","":"\\dot{\\approx}","":"","":"","":"\\dot{\\sim}","":"","":"","":"\\dot{\\equiv}","":"\\underset{\\cdot}{=}","":"","":"","":"\\underset{=}{\\vee}","":"\\overset{=}{\\vee}","":"ul(vv)","":"\\underset{=}{\\wedge}","":"\\underline{\\wedge}","":"\\overset{=}{\\wedge}","":"\\hcancel{\\vee}","":"\\hcancel{\\wedge}","":"","":"","":"","":"\\vee","":"\\wedge","":"","":"","":"","":"","":"\\dot{\\vee}","":"\\dot{\\wedge}","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"","":"","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"\\llcorner","":"\\lrcorner","":"","":"","":"","":"","":"","":"\\hat{\\otimes}","":"","":"","":"","":"\\underline{\\times}","":"\\underline{\\times}","":"\\dot{\\times}","":"\\bigodot","":"\\bigodot","":"","":"","":"","":"","":"","":"","":"\\Box","":"\\underset{\\sim}{+}","":"\\underset{\\circ}{+}","":"\\overset{\\sim}{+}","":"\\hat{+}","":"\\dot{+}","":"\\upharpoonright","":">>","":"","":"\\triangleleft","":"\\bowtie","":"","":"+","":"\\hcancel{|||}","":"\\hcancel{||}","":"\\backslash","":"/","":"hcancel{\backslash}","":"","":"\\backslash","":"\\Phi","":"","":"","":"","":"","":"","":"\\lozenge","":"","":"","":"","":"\\ddagger","":"\\sqcup\\sqcup","":"","":"\\square","":"","":"","":"","":"\\{\\{","":"\\{","":"\\}","":"","":"","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"| \\not\\triangleright","":"| \\triangleright","":"\\not\\triangleleft |","":"\\triangleleft |","":"","":"\\triangle","":"","":"\\underline{\\triangle}","":"\\dot{\\triangle}","":"","":"\\boxed{\\circ}","":"\\boxed{\\circ}","":"\\boxed{\\rightarrow}","":"\\bcancel{\\square}","":"\\cancel{\\square}","":"\\odot","":"\\odot","":"\\odot","":"\\odot","":"\\varnothing","":"\\oplus","":"\\otimes","":"","":"\\varnothing","":"\\varnothing","":"\\ominus","":"\\ominus","":"\\ominus","":"\\vec{\\varnothing}","":"\\vec{\\varnothing}","":"\\dot{\\varnothing}","":"\\overline{\\varnothing}","":"\\varnothing","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"","":"","":"","":"","":"\\ulcorner","":"\\measuredangle","":"\\not\\lor","":"\\bcancel{>}","":":","":"\\cdot","":"\\mid","":"\\bigtriangleup","":"\\Epsilon","":"\\overline{\\ni}","":"\\overline{\\ni}","":"\\in","":"\\in","":"\\in","":"\\underline{\\in}","":"\\underline{\\in}","":"\\overline{\\in}","":"\\overline{\\in}","":"\\dot{\\in}","":"\\in","":"\\in","":"\\in","":"\\ddots","":":","":"\\underset{\\sim}{\\succ}","":"\\underset{\\sim}{\\prec}","":"\\underset{\\not\\sim}{>}","":"\\underset{\\not\\sim}{<}","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\nsucc","":"\\nprec","":"\\succ","":"\\prec","":"\\overline{>}","":"\\overline{<}","":"\\underset{>}{\\leq}","":"\\underset{<}{\\geq}","":"\\#","":"\\cup","":"\\cap","":"\\supset","":"\\subset","":"\\wedge","":"\\vee","":"\\simeq","":"\\Join","":"\\ast","":"\\star","":"\\diamond","":"\\triangle","":"\\measuredangle","":"\\overline{\\lor}","":"\\overline{\\land}","":"\\underline{\\lor}","":"\\top",:"\\pm",:"+","":"","":"\\circ\\multimap","":"\\circ\\multimap","":"\\triangleright","":"\\triangleleft","":"\\succ","":"\\prec","":"|\\models","":"|\\models","":"\\models","":"\\vdash","":"\\ominus","":"\\ominus","":"\\odot","":"\\odot","":"\\sqcup","":"\\sqcap","":"\\sqsupseteq","":"\\sqsubseteq","":"\\not\\sqsupset","":"\\sqsupset","":"\\not\\sqsubset","":"\\sqsubset","":"\\cup","":"\\cup","":"\\cup","":"\\not\\succsim","":"\\succsim","":"\\precsim","":"\\not\\overset{>}{<}","":"\\not\\overset{>}{<}","":"\\overset{>}{<}","":"\\overset{<}{>}","":"\\not\\geg","":"\\not\\leq","":"\\geg","":"\\leq","":"","":"\\geg","":"\\not\\leq","":"\\leq","":"\\overset{=}{=} ","":"\\overset{m}{=} ","":"\\overset{def}{=}","":"=","":"=","":"=:","":"\\doteq","":"\\doteq","":"\\doteq","":"\\doteq","":"","":"","":"","":"","":"\\approx","":"\\approx","":"\\approx","":"\\neq","":"=","":"\\sim","":"\\infty","":"\\sim","":"\\sim","":"\\sim","":":-:","":"-:","":"\\bot","":"::","":":","":"\\mid","":"\\llcorner","":"\\circ","":"*","":"/","":"\\square","":"\\ni","":"\\in","":"\\Delta","":"/","":"\\nsucceq","":"\\succeq","":"\\npreceq","":"\\preceq","":"\\ngeqslant","":"\\nleqslant","":"\\Phi","":"\\models","":"\\not\\equiv","":"\\approx\\neq","":"\\neq","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\diamond","":"\\diamond","":"\\diamond","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangle","":"\\triangle","":"\\triangle","":"\\square","":"\\blacksquare","":"\\square","":"\\blacksquare","":"\\square","":"\\square","":"\\square","":"\\square","":"\\blacksquare","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\ggg","":"\\lll","":"*>","":"<*","":"\\pitchfork","":"","":"\\bowtie","":"\\ltimes","":"\\rtimes","":"\\triangleright","\\triangleleft":"","":"\\bot","":"\\nsucc","":"\\preceq","":"\\succeq","":"\\preceq","":"\\succ","":"\\prec","":"\\geq/","":"\\leq/","":"\\neq","":"\\not\\gg","":"\\gg","":"\\not\\ll","":"\\ll","":"\\ngeqslant","":"\\nleqslant","":"\\equiv","":"\\doteq","":"\\triangleq","":"\\doteq","":"\\triangleq","":"\\triangleq","":"\\doteq","":":=","":"\\asymp","":"\\ncong","":"\\ncong","":"\\cong","":"\\not\\simeq","":"\\simeq","":"\\not\\sim","":"\\not\\parallel","":"\\parallel","":"\\not|","":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","":"\\neq","":"\\equiv /","":"\\approx /","":"sim","":"\\approx","":"</","<":"<","":">/",">=":">=",">":">","":"\\geq","":"\\leq","<=":"<=","":"\\supsetneq","":"\\subsetneq","":"\\nsupseteq","":"\\nsubseteq","":"\\supseteq","":"\\subseteq","":"\\not\\supset","":"\\not\\subset","":"\\supset |","":"\\supset","":"\\subset |","":"\\subset","":"\\not\\in","":"\\notin","":"\\in","":"C","":"\\nexists","":"\\exists","":"\\forall","":"\\land","&&":"\\&\\&","":"\\lor","":"\\cancel{\\vDash}","":"\\cancel{\\Vdash}","":"\\nvDash","":"\\nvDash","":"\\Vdash","":"\\vDash","":"\\top","":"\\dashv","":"\\vdash","":"\\ni","":"\\ddots","":"\\hdots","":"\\vdots","":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","":"\\because","":"\\therefore ","":"\\llbracket",",":",",";":";","":"\\}","":"\\{","":"\\]","":"\\[","":"\\ll","":"\\gg","":"\\gg","":"\\ll","":"\\gg","":"\\ll","":"\\]","":"\\]","":"\\]","":"\\[","":"\\[","":"\\]","":"\\triangleright","":"\\triangleleft","":"|\\)","":"\\(|","":"|\\)","":"\\(\\(","":"|\\}","":"\\{|","":"\\||","":"\\left. \\right]","":"\\left[ \\right.","":"\\left. \\right]]","":"\\left[[ \\right.","":"\\gg","":"\\ll","":"\\)|","":"\\(|","":"\\left.\\right)","":"\\left(\\right.","":"\\rangle","":"\\langle","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil","":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","":'\\"',"":"\\text{``}","":"'","":"`",:"\\alpha",:"\\beta",:"\\gamma",:"\\Gamma",:"\\delta",:"\\Delta","":"\\epsilon",:"\\zeta",:"\\eta",:"\\theta",:"\\Theta",:"\\iota",:"\\kappa",:"\\lambda",:"\\nu",:"\\omicron",:"\\pi",:"\\Pi",:"\\rho",:"\\sigma",:"\\Sigma",:"\\tau",:"\\upsilon",:"\\Upsilon",:"\\phi",:"\\Phi",:"\\chi",:"\\psi",:"\\Psi",:"\\omega",:"\\Omega",:"\\Omega","":"\\emptyset","":"\\circlearrowleft","":"\\circlearrowright","":"\\times","":"\\dfrac{1}{2}",:"\\mu",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",:"\\varepsilon",T:"T","":"\\cdot",:"P","":"\\infty",:"\\nabla",:"\\eta","":"^{+}","":"^{-}","":"^{=}","":"^{(}","":"^{)}","":"\\)|","":"\\langle","":";","":"\\circ","":"\\perp","":"\\times","":"-","":"\\gg","":"\\uparrow","":"\\downarrow","":"\\leftarrow","":"\\rightarrow","":"-","":"\\mid","":"\\mid",:"\\hbar","":"\\rightarrow","":"\\cdot","":"\\mid","":"\\pounds","":"\\yen","":"\\times","":"\\checkmark",:"^{n}","":"\\ll",:"\\prime","":"\\dagger","":"\\mid",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\text{e}",:"r","":"\\ddagger",:"i",:"\\Upsilon","":"\\delta","":"\\cdot",:"\\theta","":"\\phi",:"\\prod",:"o",:"\\hbar","":"\\Lambda","":"\\mid","":"\\euro",:"\\bar{u}",:"\\varphi","":"c","":"\\epsilon",:"\\mathsf{X}","":"_{n}"}},8249:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathSymbolsByChar=void 0,d.allMathSymbolsByChar={"&#xA0;":"\\textrm{ }","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x21D4;":"\\iff","&#x21D2;":"=>","&#xAC;":"\\neg","&#x2124;":"\\mathbb{Z}","&#x211D;":"\\mathbb{R}","&#x211A;":"\\mathbb{Q}","&#x2115;":"\\mathbb{N}","&#x2102;":"CC","&#x25A1;":"\\square","&#x22C4;":"\\diamond","&#x25B3;":"\\triangle","&#x2322;":"\\frown","&#x2220;":"\\angle","&#x22F1;":"\\ddots","&#x22EE;":"\\vdots","&#x2235;":"\\because","&#x2234;":"\\therefore","&#x2135;":"\\aleph","&#x2205;":"\\oslash","&#xB1;":"\\pm","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x222E;":"\\oint","&#x222B;":"\\int","&#x22C3;":"\\cup","&#x222A;":"\\cup","&#x22C2;":"\\cap","&#x2229;":"\\cap","&#x22C1;":"\\vee","&#x2228;":"\\vee","&#x22C0;":"\\wedge","&#x2227;":"\\wedge","&#x220F;":"\\prod","&#x2211;":"\\sum","&#x2299;":"\\bigodot","&#x2297;":"\\bigoplus","&#x2295;":"o+","&#x2218;":"@","&#x22C8;":"\\bowtie","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#xF7;":"\\div","&#xD7;":"\\times","\\":"\\backslash","&#x22C6;":"\\star","&#x2217;":"\\star","&#x22C5;":"\\cdot","&#x3A9;":"\\Omega","&#x3C9;":"\\omega","&#x3A8;":"\\Psi","&#x3C8;":"\\psi","&#x3C7;":"\\chi","&#x3C6;":"\\varphi","&#x3A6;":"\\Phi","&#x3D5;":"\\phi","&#x3C5;":"\\upsilon","&#x3C4;":"\\tau","&#x3A3;":"\\Sigma","&#x3C3;":"\\sigma","&#x3C1;":"\\rho","&#x3A0;":"\\Pi","&#x3C0;":"\\pi","&#x39E;":"\\Xi","&#x3BE;":"\\xi","&#x3BD;":"\\nu","&#x3BC;":"\\mu","&#x39B;":"\\Lambda","&#x3BB;":"\\lambda","&#x3BA;":"\\kappa","&#x3B9;":"\\iota","&#x3D1;":"\\vartheta","&#x398;":"\\Theta","&#x3B8;":"\\theta","&#x3B7;":"\\eta","&#x3B6;":"\\zeta","&#x25B;":"\\varepsilon","&#x3B5;":"\\epsilon","&#x394;":"\\Delta","&#x3B4;":"\\delta","&#x393;":"\\Gamma","&#x3B3;":"\\gamma","&#x3B2;":"\\beta","&#x3B1;":"\\alpha","&#x221E;":"\\infty","":"\\text{\\textdir TRT}","":"\\text{\\textdir LTR}"}},8171:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathSymbolsByGlyph=void 0,d.allMathSymbolsByGlyph={" ":"\\textrm{ }","":"\\exists","":"\\forall","":"\\iff","":"\\Rightarrow","":"\\neg","":"\\square","":"\\diamond","":"\\triangle","":"\\frown","":"\\angle","":"\\ddots","":"\\vdots","":"\\because","":"\\therefore",:"\\aleph","":"\\emptyset","":"\\pm","":"\\nabla","":"\\partial","":"\\oint","":"\\int","":"\\cup","":"\\cup","":"\\cap","":"\\cap","":"\\vee","":"\\vee","":"\\wedge","":"\\wedge","":"\\prod","":"\\sum","":"\\bigodot","":"\\bigoplus","":"o+","":"@","":"\\bowtie","":"\\rtimes","":"\\ltimes","":"\\div","":"\\times","\\":"\\backslash","":"\\star","":"\\star","":"\\cdot",:"\\Omega",:"\\omega",:"\\Psi",:"\\psi",:"\\chi",:"\\varphi",:"\\Phi",:"\\phi",:"\\upsilon",:"\\tau",:"\\Sigma",:"\\sigma",:"\\rho",:"\\Pi",:"\\pi",:"\\Xi",:"\\xi",:"\\nu",:"\\mu",:"\\Lambda",:"\\lambda",:"\\kappa",:"\\iota",:"\\vartheta",:"\\Theta",:"\\theta",:"\\eta",:"\\zeta",:"\\varepsilon",:"\\epsilon",:"\\Delta",:"\\delta",:"\\Gamma",:"\\gamma",:"\\beta",:"\\alpha","":"\\infty","":"\\epsilon",:"\\mu","":"^{2}",:"\\imath","":"\\blacksquare",:"\\mathbf{m}",:"\\Omega","":"\\circlearrowleft","":"\\circlearrowright",:" ","":"\\yen","":"^{(}","":"^{)}",:"\\ss",:"\\hbar","":"\\ominus","":"\\bigtriangleup","'":"\\nrightarrow","":"\\dagger",:"\\prime",:" ","":" ",:"\\wp",:" ",:"^{n}","":"\\checkmark","":"\\times","":"\\dfrac{1}{2}",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",T:"T","":"\\cdot",:"P",:"\\nabla",:"\\eta",:"\\gamma",:"\\hbar",:"\\varepsilon","":"\\_{D}","":"\\lambda","":"\\rangle","":"\\langle","":";","":"x","":"y","":"z","":"i","":"j","":"k","":"m","":"e","":"r",:"\\eta","":"\\beta","":"\\omega","":"\\wp","":"\\pi",:"\\epsilon",:"\\epsilon","":"\\epsilon",:"\\pi",:"\\nu",:"\\theta","":"\\psi","":"\\theta",:"\\phi","":"\\Gamma",:"\\ell",:"\\upsilon","":"\\varphi","":"\\theta",:"\\Phi","":"\\varphi","":"i",:"o",:"o",:"f","":"\\rho","":"x","":"p","":"q","":"s","":"t","":"u","":"v","":"w","":"a","":"b","":"c","":"d","":"f","":"g","":"l","":"n","":"o","":"w","":"v",:"m","":"\\circ","":"\\perp","":"\\times","":"\\mid",:"\\Phi","":"\\mid",:"\\hbar",:" ","":"\\llbracket",:"\\hat{e}","":"\\cent","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","|":"\\mid","":"\\mid","":"\\heartsuit",:"0",:"Y",:"x","":"z","":"y","":"x",:"p",:"a","":"\\pounds",m:"m","":"\\Xi","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","&":"\\&","":"\\parallel","%":"\\%","":"\\text{``}",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil",:"\\varepsilon","":"\\text{e}",:"r","":"\\nrightarrow","":"\\hat{}","":"\\overline","":"\\rightarrow","":"\\ddagger","":"\\cdot","":"\\square","":"\\Delta",:"i","":"\\angle",:"\\Upsilon","":"\\downarrow","":"\\uparrow","":"\\gg","":"\\top","":"/","":"\\delta","":"\\cdot","":":","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\cdot",:"\\theta","":"\\measuredangle","":",","":"\\overline","":"\\llbracket","":"\\phi",:"\\prod",:"o","":"\\approx","":"\\leq",:"\\hbar","":"\\Lambda",:"\\pm","":"-",:"+","":"\\neq","":"\\leftarrow","":"\\mid","":"\\euro","":" ",:"\\bar{u}","":"\\parallel","":"\\leftrightarrow","":"\\sqrt{}","":"c","":"\\epsilon","":"\\cdot","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\ll",:"\\mathsf{X}","":"\\mid","":"\\rangle","":"_{n}","":"\\square","":"\\circle","":'\\"'}},5406:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,cn,dn){dn===void 0&&(dn=cn);var Cn=Object.getOwnPropertyDescriptor(on,cn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[cn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,cn,dn){dn===void 0&&(dn=cn),tn[dn]=on[cn]}),en=this&&this.__exportStar||function(tn,on){for(var cn in tn)cn==="default"||Object.prototype.hasOwnProperty.call(on,cn)||ar(on,tn,cn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(2965),d),en(Ct(9039),d),en(Ct(8249),d),en(Ct(8171),d),en(Ct(472),d),en(Ct(4320),d),en(Ct(6122),d)},472:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.latexAccents=void 0,d.latexAccents=["\\hat","\\bar","\\underbrace","\\overbrace"]},4320:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mathNumberByGlyph=void 0,d.mathNumberByGlyph={"":"_{0}","":"_{1}","":"_{2}","":"_{3}","":"_{4}","":"_{5}","":"_{6}","":"_{7}","":"_{8}","":"_{9}","":"^{0}","":"^{1}","":"^{2}","":"^{3}","":"^{4}","":"^{5}","":"^{6}","":"^{7}","":"^{8}","":"^{9}",:"^{n}","":"_{n}","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","":"\\dfrac{1}{2}","":"\\dfrac{1}{3}","":"\\dfrac{2}{3}","":"\\dfrac{1}{4}","":"\\dfrac{3}{4}","":"\\dfrac{1}{5}","":"\\dfrac{2}{5}","":"\\dfrac{3}{5}","":"\\dfrac{4}{5}","":"\\dfrac{1}{6}","":"\\dfrac{5}{6}","":"\\dfrac{1}{7}","":"\\dfrac{1}{8}","":"\\dfrac{3}{8}","":"\\dfrac{5}{8}","":"\\dfrac{7}{8}","":"\\dfrac{1}{9}","":"\\dfrac{1}{10}"}},6122:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.HashUTF8ToLtXConverter=void 0,d.HashUTF8ToLtXConverter=class{convert(tn){if(tn.match(/[a-z0-9]/i))return tn;const on=Ct[tn];return on?this.convertAccentCharToLtX(on)||tn:this.convertSpecialCharToLtX(tn)||tn}convertAccentCharToLtX(tn){const{char:on,accent:cn}=tn,dn=ar[cn];return dn?`\\${dn}{${on}}`:null}convertSpecialCharToLtX(tn){const on=en[tn];if(!on)return null;const{letter:cn,fontCmd:dn}=on;return`\\${dn}{${cn}}`}};const Ct={:{char:"a",accent:""},:{char:"a",accent:"`"},:{char:"a",accent:"^"},:{char:"a",accent:"~"},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:"-"},:{char:"a",accent:"-"},:{char:"e",accent:""},:{char:"e",accent:"`"},:{char:"e",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"i",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:"-"},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:"^"},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:""},:{char:"i",accent:"-"},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:"^"},:{char:"o",accent:"~"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"-"},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:"^"},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:""},:{char:"u",accent:"-"},:{char:"y",accent:""},:{char:"y",accent:"`"},:{char:"y",accent:"^"},:{char:"y",accent:""},:{char:"y",accent:"-"},:{char:"A",accent:""},:{char:"A",accent:"`"},:{char:"A",accent:"^"},:{char:"A",accent:"~"},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:"-"},:{char:"A",accent:"-"},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"^"},:{char:"E",accent:""},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"-"},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:"^"},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:""},:{char:"I",accent:"-"},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:"^"},:{char:"O",accent:"~"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"-"},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:"^"},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:""},:{char:"U",accent:"-"},:{char:"Y",accent:""},:{char:"Y",accent:"`"},:{char:"Y",accent:"^"},:{char:"Y",accent:""},:{char:"Y",accent:"-"},:{char:"n",accent:"~"},:{char:"N",accent:"~"},:{char:"c",accent:""},:{char:"C",accent:""},:{char:"v",accent:"~"},:{char:"V",accent:"~"},:{char:"j",accent:"^"},:{char:"J",accent:"^"},:{char:"z",accent:""},:{char:"Z",accent:""},:{char:"Z",accent:"^"},:{char:"z",accent:"^"},:{char:"Z",accent:""},:{char:"z",accent:""},:{char:"z",accent:""}},ar={"":"acute","`":"grave","^":"hat","~":"tilde","":"ddot","":"mathring","":"breve","":"check","":"H","":"dot","-":"bar","":"hat","":"tilde"},en={"":{letter:"A",fontCmd:"mathbf"},"":{letter:"B",fontCmd:"mathbf"},"":{letter:"C",fontCmd:"mathbf"},"":{letter:"D",fontCmd:"mathbf"},"":{letter:"E",fontCmd:"mathbf"},:{letter:"E",fontCmd:"mathbf"},"":{letter:"F",fontCmd:"mathbf"},"":{letter:"G",fontCmd:"mathbf"},"":{letter:"H",fontCmd:"mathbf"},"":{letter:"I",fontCmd:"mathbf"},"":{letter:"J",fontCmd:"mathbf"},"":{letter:"K",fontCmd:"mathbf"},"":{letter:"L",fontCmd:"mathbf"},"":{letter:"M",fontCmd:"mathbf"},"":{letter:"N",fontCmd:"mathbf"},"":{letter:"O",fontCmd:"mathbf"},"":{letter:"P",fontCmd:"mathbf"},"":{letter:"Q",fontCmd:"mathbf"},"":{letter:"R",fontCmd:"mathbf"},"":{letter:"S",fontCmd:"mathbf"},"":{letter:"T",fontCmd:"mathbf"},"":{letter:"U",fontCmd:"mathbf"},"":{letter:"V",fontCmd:"mathbf"},"":{letter:"W",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"Y",fontCmd:"mathbf"},"":{letter:"Z",fontCmd:"mathbf"},"":{letter:"0",fontCmd:"mathbf"},"":{letter:"1",fontCmd:"mathbf"},"":{letter:"2",fontCmd:"mathbf"},"":{letter:"3",fontCmd:"mathbf"},"":{letter:"4",fontCmd:"mathbf"},"":{letter:"5",fontCmd:"mathbf"},"":{letter:"6",fontCmd:"mathbf"},"":{letter:"7",fontCmd:"mathbf"},"":{letter:"8",fontCmd:"mathbf"},"":{letter:"9",fontCmd:"mathbf"},"":{letter:"A",fontCmd:"mathit"},"":{letter:"B",fontCmd:"mathit"},"":{letter:"C",fontCmd:"mathit"},"":{letter:"D",fontCmd:"mathit"},"":{letter:"E",fontCmd:"mathit"},"":{letter:"F",fontCmd:"mathit"},"":{letter:"G",fontCmd:"mathit"},"":{letter:"H",fontCmd:"mathit"},"":{letter:"I",fontCmd:"mathit"},:{letter:"I",fontCmd:"mathit"},"":{letter:"J",fontCmd:"mathit"},"":{letter:"K",fontCmd:"mathit"},"":{letter:"L",fontCmd:"mathit"},"":{letter:"M",fontCmd:"mathit"},"":{letter:"N",fontCmd:"mathit"},"":{letter:"O",fontCmd:"mathit"},"":{letter:"P",fontCmd:"mathit"},"":{letter:"Q",fontCmd:"mathit"},"":{letter:"R",fontCmd:"mathit"},"":{letter:"S",fontCmd:"mathit"},"":{letter:"T",fontCmd:"mathit"},"":{letter:"U",fontCmd:"mathit"},"":{letter:"V",fontCmd:"mathit"},"":{letter:"W",fontCmd:"mathit"},"":{letter:"X",fontCmd:"mathit"},"":{letter:"Y",fontCmd:"mathit"},"":{letter:"Z",fontCmd:"mathit"},"":{letter:"A",fontCmd:"mathbb"},"":{letter:"B",fontCmd:"mathbb"},:{letter:"C",fontCmd:"mathbb"},"":{letter:"D",fontCmd:"mathbb"},"":{letter:"E",fontCmd:"mathbb"},"":{letter:"F",fontCmd:"mathbb"},"":{letter:"G",fontCmd:"mathbb"},:{letter:"H",fontCmd:"mathbb"},"":{letter:"I",fontCmd:"mathbb"},"":{letter:"J",fontCmd:"mathbb"},"":{letter:"K",fontCmd:"mathbb"},"":{letter:"L",fontCmd:"mathbb"},"":{letter:"M",fontCmd:"mathbb"},:{letter:"N",fontCmd:"mathbb"},"":{letter:"O",fontCmd:"mathbb"},:{letter:"P",fontCmd:"mathbb"},:{letter:"Q",fontCmd:"mathbb"},:{letter:"R",fontCmd:"mathbb"},"":{letter:"S",fontCmd:"mathbb"},"":{letter:"T",fontCmd:"mathbb"},"":{letter:"U",fontCmd:"mathbb"},"":{letter:"V",fontCmd:"mathbb"},"":{letter:"W",fontCmd:"mathbb"},"":{letter:"X",fontCmd:"mathbb"},"":{letter:"Y",fontCmd:"mathbb"},:{letter:"Z",fontCmd:"mathbb"},"":{letter:"0",fontCmd:"mathbb"},"":{letter:"1",fontCmd:"mathbb"},"":{letter:"2",fontCmd:"mathbb"},"":{letter:"3",fontCmd:"mathbb"},"":{letter:"4",fontCmd:"mathbb"},"":{letter:"5",fontCmd:"mathbb"},"":{letter:"6",fontCmd:"mathbb"},"":{letter:"7",fontCmd:"mathbb"},"":{letter:"8",fontCmd:"mathbb"},"":{letter:"9",fontCmd:"mathbb"},"":{letter:"A",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathcal"},:{letter:"B",fontCmd:"mathcal"},"":{letter:"C",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},:{letter:"E",fontCmd:"mathcal"},:{letter:"F",fontCmd:"mathcal"},"":{letter:"F",fontCmd:"mathcal"},"":{letter:"G",fontCmd:"mathcal"},:{letter:"H",fontCmd:"mathcal"},:{letter:"I",fontCmd:"mathcal"},"":{letter:"J",fontCmd:"mathcal"},"":{letter:"K",fontCmd:"mathcal"},:{letter:"L",fontCmd:"mathcal"},"":{letter:"L",fontCmd:"mathcal"},:{letter:"M",fontCmd:"mathcal"},"":{letter:"N",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"P",fontCmd:"mathcal"},"":{letter:"Q",fontCmd:"mathcal"},:{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"S",fontCmd:"mathcal"},"":{letter:"T",fontCmd:"mathcal"},"":{letter:"U",fontCmd:"mathcal"},"":{letter:"V",fontCmd:"mathcal"},"":{letter:"W",fontCmd:"mathcal"},"":{letter:"X",fontCmd:"mathcal"},"":{letter:"Y",fontCmd:"mathcal"},"":{letter:"Z",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathfrak"},"":{letter:"B",fontCmd:"mathfrak"},:{letter:"C",fontCmd:"mathfrak"},"":{letter:"D",fontCmd:"mathfrak"},"":{letter:"E",fontCmd:"mathfrak"},"":{letter:"F",fontCmd:"mathfrak"},"":{letter:"G",fontCmd:"mathfrak"},:{letter:"H",fontCmd:"mathfrak"},:{letter:"I",fontCmd:"mathfrak"},"":{letter:"J",fontCmd:"mathfrak"},"":{letter:"K",fontCmd:"mathfrak"},"":{letter:"L",fontCmd:"mathfrak"},"":{letter:"M",fontCmd:"mathfrak"},"":{letter:"N",fontCmd:"mathfrak"},"":{letter:"O",fontCmd:"mathfrak"},"":{letter:"P",fontCmd:"mathfrak"},"":{letter:"Q",fontCmd:"mathfrak"},:{letter:"R",fontCmd:"mathfrak"},"":{letter:"S",fontCmd:"mathfrak"},"":{letter:"T",fontCmd:"mathfrak"},"":{letter:"U",fontCmd:"mathfrak"},"":{letter:"V",fontCmd:"mathfrak"},"":{letter:"W",fontCmd:"mathfrak"},"":{letter:"X",fontCmd:"mathfrak"},"":{letter:"Y",fontCmd:"mathfrak"},:{letter:"Z",fontCmd:"mathfrak"},"":{letter:"A",fontCmd:"mathsf"},:{letter:"A",fontCmd:"mathsf"},"":{letter:"B",fontCmd:"mathsf"},:{letter:"B",fontCmd:"mathsf"},"":{letter:"C",fontCmd:"mathsf"},"":{letter:"D",fontCmd:"mathsf"},"":{letter:"E",fontCmd:"mathsf"},"":{letter:"F",fontCmd:"mathsf"},"":{letter:"G",fontCmd:"mathsf"},"":{letter:"H",fontCmd:"mathsf"},"":{letter:"I",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"K",fontCmd:"mathsf"},:{letter:"K",fontCmd:"mathsf"},"":{letter:"L",fontCmd:"mathsf"},"":{letter:"M",fontCmd:"mathsf"},"":{letter:"N",fontCmd:"mathsf"},"":{letter:"O",fontCmd:"mathsf"},"":{letter:"P",fontCmd:"mathsf"},"":{letter:"Q",fontCmd:"mathsf"},"":{letter:"R",fontCmd:"mathsf"},"":{letter:"S",fontCmd:"mathsf"},"":{letter:"T",fontCmd:"mathsf"},"":{letter:"U",fontCmd:"mathsf"},"":{letter:"V",fontCmd:"mathsf"},"":{letter:"W",fontCmd:"mathsf"},"":{letter:"X",fontCmd:"mathsf"},:{letter:"X",fontCmd:"mathsf"},"":{letter:"Y",fontCmd:"mathsf"},"":{letter:"Z",fontCmd:"mathsf"},"":{letter:"A",fontCmd:"mathtt"},"":{letter:"B",fontCmd:"mathtt"},"":{letter:"\\Gamma",fontCmd:"mathtt"},"":{letter:"\\Delta",fontCmd:"mathtt"},"":{letter:"E",fontCmd:"mathtt"},"":{letter:"F",fontCmd:"mathtt"},"":{letter:"G",fontCmd:"mathtt"},"":{letter:"\\Theta",fontCmd:"mathtt"},"":{letter:"I",fontCmd:"mathtt"},"":{letter:"J",fontCmd:"mathtt"},"":{letter:"\\Lambda",fontCmd:"mathtt"},"":{letter:"L",fontCmd:"mathtt"},"":{letter:"M",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"O",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"Q",fontCmd:"mathtt"},"":{letter:"R",fontCmd:"mathtt"},"":{letter:"S",fontCmd:"mathtt"},"":{letter:"T",fontCmd:"mathtt"},"":{letter:"U",fontCmd:"mathtt"},"":{letter:"\\Phi",fontCmd:"mathtt"},"":{letter:"W",fontCmd:"mathtt"},"":{letter:"\\Psi",fontCmd:"mathtt"},"":{letter:"\\Omega",fontCmd:"mathtt"}}}},s={};function l(c){var d=s[c];if(d!==void 0)return d.exports;var Ct=s[c]={exports:{}};return a[c].call(Ct.exports,Ct,Ct.exports,l),Ct.exports}var u={};return(()=>{var c=u;Object.defineProperty(c,"__esModule",{value:!0}),c.MathMLToLaTeX=void 0;var d=l(8672);Object.defineProperty(c,"MathMLToLaTeX",{enumerable:!0,get:function(){return d.MathMLToLaTeX}})})(),u})()))})(bundle_min$1)),bundle_min$1.exports}var bundle_minExports=requireBundle_min();function DangerousSetIn({mathMLString:t}){return jsxRuntimeExports.jsx("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:{__html:t}})}function DisplayMathML({title:t,mathML:n,textResult:a,caclDone:s}){const[l,u]=reactExports.useState(!1),[c,d]=reactExports.useState(!1);return s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Snackbar,{open:l,autoHideDuration:1e4,onClose:()=>u(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["LaTeX copied to your clipboard. Here's a free online latex editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://latexeditor.lagrida.com/",target:"_blank",children:"https://latexeditor.lagrida.com/"})]})})}),jsxRuntimeExports.jsx(Snackbar,{open:c,autoHideDuration:1e4,onClose:()=>d(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["MathML copied to your clipboard. Here's a free online MathML editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://codepen.io/bqlou/pen/yOgbmb",target:"_blank",children:"https://codepen.io/bqlou/pen/yOgbmb"})]})})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,children:[jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:10},children:[jsxRuntimeExports.jsx(Grid$1,{size:12,sx:{my:2},children:jsxRuntimeExports.jsx("h3",{children:t})}),jsxRuntimeExports.jsx(Grid$1,{size:12,style:{overflow:"auto"},sx:{fontSize:"1.6em",minHeight:"55px"},children:jsxRuntimeExports.jsx(DangerousSetIn,{mathMLString:n})})]}),jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:2},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{const Ct=bundle_minExports.MathMLToLaTeX.convert(n);navigator.clipboard.writeText(Ct),u(!0)},children:"Copy LaTeX"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{navigator.clipboard.writeText(n),d(!0)},children:"Copy MathML"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{var Ct=encodeURIComponent(a),ar=`https://www.wolframalpha.com/input?i2d=true&i=${Ct}`;window.open(ar,"_blank")},children:"Wolfram Alpha"})]})]})]}):null}const GitHubIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}));function getLinkUtilityClass(t){return generateUtilityClass("MuiLink",t)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),getTextDecoration=({theme:t,ownerState:n})=>{const a=n.color;if("colorSpace"in t&&t.colorSpace){const u=getPath(t,`palette.${a}.main`)||getPath(t,`palette.${a}`)||n.color;return t.alpha(u,.4)}const s=getPath(t,`palette.${a}.main`,!1)||getPath(t,`palette.${a}`,!1)||n.color,l=getPath(t,`palette.${a}.mainChannel`)||getPath(t,`palette.${a}Channel`);return"vars"in t&&l?`rgba(${l} / 0.4)`:alpha$1(s,.4)},v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},useUtilityClasses$9=t=>{const{classes:n,component:a,focusVisible:s,underline:l}=t,u={root:["root",`underline${capitalize(l)}`,a==="button"&&"button",s&&"focusVisible"]};return composeClasses(u,getLinkUtilityClass,n)},LinkRoot=styled(Typography,{name:"MuiLink",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`underline${capitalize(a.underline)}`],a.component==="button"&&n.button]}})(memoTheme(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:n,ownerState:a})=>n==="always"&&a.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:n,ownerState:a})=>n==="always"&&a.color==="inherit",style:t.colorSpace?{textDecorationColor:t.alpha("currentColor",.4)}:null},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{underline:"always",color:n},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette[n].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses.focusVisible}`]:{outline:"auto"}}}]}))),Link=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiLink"}),l=useTheme(),{className:u,color:c="primary",component:d="a",onBlur:Ct,onFocus:ar,TypographyClasses:en,underline:tn="always",variant:on="inherit",sx:cn,...dn}=s,[Cn,In]=reactExports.useState(!1),ix=ux=>{isFocusVisible(ux.target)||In(!1),Ct&&Ct(ux)},ax=ux=>{isFocusVisible(ux.target)&&In(!0),ar&&ar(ux)},ox={...s,color:c,component:d,focusVisible:Cn,underline:tn,variant:on},sx=useUtilityClasses$9(ox);return jsxRuntimeExports.jsx(LinkRoot,{color:c,className:clsx(sx.root,u),classes:en,component:d,onBlur:ix,onFocus:ax,ref:a,ownerState:ox,variant:on,...dn,sx:[...v6Colors[c]===void 0?[{color:c}]:[],...Array.isArray(cn)?cn:[cn]],style:{...dn.style,...tn==="always"&&c!=="inherit"&&!v6Colors[c]&&{"--Link-underlineColor":getTextDecoration({theme:l,ownerState:ox})}}})});function Footer(){return jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1,mt:0},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:2},children:jsxRuntimeExports.jsx(Toolbar,{children:jsxRuntimeExports.jsxs(Stack,{spacing:1,sx:{width:"100%"},direction:{xs:"column",sm:"row"},children:[jsxRuntimeExports.jsxs(Typography,{sx:{flexGrow:1},children:[" ",new Date().getFullYear()," Will Kelsey. This work is licensed under a Creative Commons Attribution 4.0 International License. You may not resell this tool"]}),jsxRuntimeExports.jsx(Typography,{sx:{px:2},children:"v2.0"}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(GitHubIcon,{sx:{height:"24px",width:"24px",mr:1}}),jsxRuntimeExports.jsx(Link,{href:"https://github.com/28raining/circuit-solver",target:"_blank",color:"inherit",children:"https://github.com/28raining/circuit-solver"})]})]})})})})}function getCollapseUtilityClass(t){return generateUtilityClass("MuiCollapse",t)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const useUtilityClasses$8=t=>{const{orientation:n,classes:a}=t,s={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return composeClasses(s,getCollapseUtilityClass,a)},CollapseRoot=styled("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.state==="entered"&&n.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&n.hidden]}})(memoTheme(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:n})=>n.state==="exited"&&!n.in&&n.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),CollapseWrapper=styled("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),CollapseWrapperInner=styled("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Collapse=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiCollapse"}),{addEndListener:l,children:u,className:c,collapsedSize:d="0px",component:Ct,easing:ar,in:en,onEnter:tn,onEntered:on,onEntering:cn,onExit:dn,onExited:Cn,onExiting:In,orientation:ix="vertical",style:ax,timeout:ox=duration.standard,TransitionComponent:sx=Transition,...ux}=s,cx={...s,orientation:ix,collapsedSize:d},hx=useUtilityClasses$8(cx),gx=useTheme(),fx=useTimeout(),dx=reactExports.useRef(null),mx=reactExports.useRef(),vx=typeof d=="number"?`${d}px`:d,bx=ix==="horizontal",xx=bx?"width":"height",_x=reactExports.useRef(null),Ex=useForkRef(a,_x),Tx=$x=>Lx=>{if($x){const zx=_x.current;Lx===void 0?$x(zx):$x(zx,Lx)}},Cx=()=>dx.current?dx.current[bx?"clientWidth":"clientHeight"]:0,Mx=Tx(($x,Lx)=>{dx.current&&bx&&(dx.current.style.position="absolute"),$x.style[xx]=vx,tn&&tn($x,Lx)}),Ax=Tx(($x,Lx)=>{const zx=Cx();dx.current&&bx&&(dx.current.style.position="");const{duration:qx,easing:jx}=getTransitionProps({style:ax,timeout:ox,easing:ar},{mode:"enter"});if(ox==="auto"){const Hx=gx.transitions.getAutoHeightDuration(zx);$x.style.transitionDuration=`${Hx}ms`,mx.current=Hx}else $x.style.transitionDuration=typeof qx=="string"?qx:`${qx}ms`;$x.style[xx]=`${zx}px`,$x.style.transitionTimingFunction=jx,cn&&cn($x,Lx)}),Nx=Tx(($x,Lx)=>{$x.style[xx]="auto",on&&on($x,Lx)}),Ux=Tx($x=>{$x.style[xx]=`${Cx()}px`,dn&&dn($x)}),Rx=Tx(Cn),Ox=Tx($x=>{const Lx=Cx(),{duration:zx,easing:qx}=getTransitionProps({style:ax,timeout:ox,easing:ar},{mode:"exit"});if(ox==="auto"){const jx=gx.transitions.getAutoHeightDuration(Lx);$x.style.transitionDuration=`${jx}ms`,mx.current=jx}else $x.style.transitionDuration=typeof zx=="string"?zx:`${zx}ms`;$x.style[xx]=vx,$x.style.transitionTimingFunction=qx,In&&In($x)}),Px=$x=>{ox==="auto"&&fx.start(mx.current||0,$x),l&&l(_x.current,$x)};return jsxRuntimeExports.jsx(sx,{in:en,onEnter:Mx,onEntered:Nx,onEntering:Ax,onExit:Ux,onExited:Rx,onExiting:Ox,addEndListener:Px,nodeRef:_x,timeout:ox==="auto"?null:ox,...ux,children:($x,{ownerState:Lx,...zx})=>jsxRuntimeExports.jsx(CollapseRoot,{as:Ct,className:clsx(hx.root,c,{entered:hx.entered,exited:!en&&vx==="0px"&&hx.hidden}[$x]),style:{[bx?"minWidth":"minHeight"]:vx,...ax},ref:Ex,ownerState:{...cx,state:$x},...zx,children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:{...cx,state:$x},className:hx.wrapper,ref:dx,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:{...cx,state:$x},className:hx.wrapperInner,children:u})})})})});Collapse&&(Collapse.muiSupportAuto=!0);const AccordionContext=reactExports.createContext({});function getAccordionUtilityClass(t){return generateUtilityClass("MuiAccordion",t)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),useUtilityClasses$7=t=>{const{classes:n,square:a,expanded:s,disabled:l,disableGutters:u}=t;return composeClasses({root:["root",!a&&"rounded",s&&"expanded",l&&"disabled",!u&&"gutters"],heading:["heading"],region:["region"]},getAccordionUtilityClass,n)},AccordionRoot=styled(Paper,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${accordionClasses.region}`]:n.region},n.root,!a.square&&n.rounded,!a.disableGutters&&n.gutters]}})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${accordionClasses.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${accordionClasses.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),memoTheme(({theme:t})=>({variants:[{props:n=>!n.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:n=>!n.disableGutters,style:{[`&.${accordionClasses.expanded}`]:{margin:"16px 0"}}}]}))),AccordionHeading=styled("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),AccordionRegion=styled("div",{name:"MuiAccordion",slot:"Region"})({}),Accordion=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordion"}),{children:l,className:u,defaultExpanded:c=!1,disabled:d=!1,disableGutters:Ct=!1,expanded:ar,onChange:en,square:tn=!1,slots:on={},slotProps:cn={},TransitionComponent:dn,TransitionProps:Cn,...In}=s,[ix,ax]=useControlled({controlled:ar,default:c,name:"Accordion",state:"expanded"}),ox=reactExports.useCallback(Ax=>{ax(!ix),en&&en(Ax,!ix)},[ix,en,ax]),[sx,...ux]=reactExports.Children.toArray(l),cx=reactExports.useMemo(()=>({expanded:ix,disabled:d,disableGutters:Ct,toggle:ox}),[ix,d,Ct,ox]),hx={...s,square:tn,disabled:d,disableGutters:Ct,expanded:ix},gx=useUtilityClasses$7(hx),fx={transition:dn,...on},dx={transition:Cn,...cn},mx={slots:fx,slotProps:dx},[vx,bx]=useSlot("root",{elementType:AccordionRoot,externalForwardedProps:{...mx,...In},className:clsx(gx.root,u),shouldForwardComponentProp:!0,ownerState:hx,ref:a,additionalProps:{square:tn}}),[xx,_x]=useSlot("heading",{elementType:AccordionHeading,externalForwardedProps:mx,className:gx.heading,ownerState:hx}),[Ex,Tx]=useSlot("transition",{elementType:Collapse,externalForwardedProps:mx,ownerState:hx}),[Cx,Mx]=useSlot("region",{elementType:AccordionRegion,externalForwardedProps:mx,ownerState:hx,className:gx.region,additionalProps:{"aria-labelledby":sx.props.id,id:sx.props["aria-controls"],role:"region"}});return jsxRuntimeExports.jsxs(vx,{...bx,children:[jsxRuntimeExports.jsx(xx,{..._x,children:jsxRuntimeExports.jsx(AccordionContext.Provider,{value:cx,children:sx})}),jsxRuntimeExports.jsx(Ex,{in:ix,timeout:"auto",...Tx,children:jsxRuntimeExports.jsx(Cx,{...Mx,children:ux})})]})});function getAccordionSummaryUtilityClass(t){return generateUtilityClass("MuiAccordionSummary",t)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),useUtilityClasses$6=t=>{const{classes:n,expanded:a,disabled:s,disableGutters:l}=t;return composeClasses({root:["root",a&&"expanded",s&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},getAccordionSummaryUtilityClass,n)},AccordionSummaryRoot=styled(ButtonBase,{name:"MuiAccordionSummary",slot:"Root"})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${accordionSummaryClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${accordionSummaryClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${accordionSummaryClasses.expanded}`]:{minHeight:64}}}]}})),AccordionSummaryContent=styled("span",{name:"MuiAccordionSummary",slot:"Content"})(memoTheme(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:n=>!n.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{margin:"20px 0"}}}]}))),AccordionSummaryExpandIconWrapper=styled("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(memoTheme(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{transform:"rotate(180deg)"}}))),AccordionSummary=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordionSummary"}),{children:l,className:u,expandIcon:c,focusVisibleClassName:d,onClick:Ct,slots:ar,slotProps:en,...tn}=s,{disabled:on=!1,disableGutters:cn,expanded:dn,toggle:Cn}=reactExports.useContext(AccordionContext),In=dx=>{Cn&&Cn(dx),Ct&&Ct(dx)},ix={...s,expanded:dn,disabled:on,disableGutters:cn},ax=useUtilityClasses$6(ix),ox={slots:ar,slotProps:en},[sx,ux]=useSlot("root",{ref:a,shouldForwardComponentProp:!0,className:clsx(ax.root,u),elementType:AccordionSummaryRoot,externalForwardedProps:{...ox,...tn},ownerState:ix,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:on,"aria-expanded":dn,focusVisibleClassName:clsx(ax.focusVisible,d)},getSlotProps:dx=>({...dx,onClick:mx=>{dx.onClick?.(mx),In(mx)}})}),[cx,hx]=useSlot("content",{className:ax.content,elementType:AccordionSummaryContent,externalForwardedProps:ox,ownerState:ix}),[gx,fx]=useSlot("expandIconWrapper",{className:ax.expandIconWrapper,elementType:AccordionSummaryExpandIconWrapper,externalForwardedProps:ox,ownerState:ix});return jsxRuntimeExports.jsxs(sx,{...ux,children:[jsxRuntimeExports.jsx(cx,{...hx,children:l}),c&&jsxRuntimeExports.jsx(gx,{...fx,children:c})]})});function getAccordionDetailsUtilityClass(t){return generateUtilityClass("MuiAccordionDetails",t)}generateUtilityClasses("MuiAccordionDetails",["root"]);const useUtilityClasses$5=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,n)},AccordionDetailsRoot=styled("div",{name:"MuiAccordionDetails",slot:"Root"})(memoTheme(({theme:t})=>({padding:t.spacing(1,2,2)}))),AccordionDetails=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordionDetails"}),{className:l,...u}=s,c=s,d=useUtilityClasses$5(c);return jsxRuntimeExports.jsx(AccordionDetailsRoot,{className:clsx(d.root,l),ref:a,ownerState:c,...u})}),ArrowDownwardIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),TableContext=reactExports.createContext();function getTableUtilityClass(t){return generateUtilityClass("MuiTable",t)}generateUtilityClasses("MuiTable",["root","stickyHeader"]);const useUtilityClasses$4=t=>{const{classes:n,stickyHeader:a}=t;return composeClasses({root:["root",a&&"stickyHeader"]},getTableUtilityClass,n)},TableRoot=styled("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:n})=>n.stickyHeader,style:{borderCollapse:"separate"}}]}))),defaultComponent$3="table",Table=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTable"}),{className:l,component:u=defaultComponent$3,padding:c="normal",size:d="medium",stickyHeader:Ct=!1,...ar}=s,en={...s,component:u,padding:c,size:d,stickyHeader:Ct},tn=useUtilityClasses$4(en),on=reactExports.useMemo(()=>({padding:c,size:d,stickyHeader:Ct}),[c,d,Ct]);return jsxRuntimeExports.jsx(TableContext.Provider,{value:on,children:jsxRuntimeExports.jsx(TableRoot,{as:u,role:u===defaultComponent$3?null:"table",ref:a,className:clsx(tn.root,l),ownerState:en,...ar})})}),Tablelvl2Context=reactExports.createContext();function getTableBodyUtilityClass(t){return generateUtilityClass("MuiTableBody",t)}generateUtilityClasses("MuiTableBody",["root"]);const useUtilityClasses$3=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableBodyUtilityClass,n)},TableBodyRoot=styled("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),tablelvl2$1={variant:"body"},defaultComponent$2="tbody",TableBody=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableBody"}),{className:l,component:u=defaultComponent$2,...c}=s,d={...s,component:u},Ct=useUtilityClasses$3(d);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2$1,children:jsxRuntimeExports.jsx(TableBodyRoot,{className:clsx(Ct.root,l),as:u,ref:a,role:u===defaultComponent$2?null:"rowgroup",ownerState:d,...c})})});function getTableCellUtilityClass(t){return generateUtilityClass("MuiTableCell",t)}const tableCellClasses=generateUtilityClasses("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),useUtilityClasses$2=t=>{const{classes:n,variant:a,align:s,padding:l,size:u,stickyHeader:c}=t,d={root:["root",a,c&&"stickyHeader",s!=="inherit"&&`align${capitalize(s)}`,l!=="normal"&&`padding${capitalize(l)}`,`size${capitalize(u)}`]};return composeClasses(d,getTableCellUtilityClass,n)},TableCellRoot=styled("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`size${capitalize(a.size)}`],a.padding!=="normal"&&n[`padding${capitalize(a.padding)}`],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${tableCellClasses.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:n})=>n.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),TableCell=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableCell"}),{align:l="inherit",className:u,component:c,padding:d,scope:Ct,size:ar,sortDirection:en,variant:tn,...on}=s,cn=reactExports.useContext(TableContext),dn=reactExports.useContext(Tablelvl2Context),Cn=dn&&dn.variant==="head";let In;c?In=c:In=Cn?"th":"td";let ix=Ct;In==="td"?ix=void 0:!ix&&Cn&&(ix="col");const ax=tn||dn&&dn.variant,ox={...s,align:l,component:In,padding:d||(cn&&cn.padding?cn.padding:"normal"),size:ar||(cn&&cn.size?cn.size:"medium"),sortDirection:en,stickyHeader:ax==="head"&&cn&&cn.stickyHeader,variant:ax},sx=useUtilityClasses$2(ox);let ux=null;return en&&(ux=en==="asc"?"ascending":"descending"),jsxRuntimeExports.jsx(TableCellRoot,{as:In,ref:a,className:clsx(sx.root,u),"aria-sort":ux,scope:ix,ownerState:ox,...on})});function getTableHeadUtilityClass(t){return generateUtilityClass("MuiTableHead",t)}generateUtilityClasses("MuiTableHead",["root"]);const useUtilityClasses$1=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableHeadUtilityClass,n)},TableHeadRoot=styled("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),tablelvl2={variant:"head"},defaultComponent$1="thead",TableHead=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableHead"}),{className:l,component:u=defaultComponent$1,...c}=s,d={...s,component:u},Ct=useUtilityClasses$1(d);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2,children:jsxRuntimeExports.jsx(TableHeadRoot,{as:u,className:clsx(Ct.root,l),ref:a,role:u===defaultComponent$1?null:"rowgroup",ownerState:d,...c})})});function getTableRowUtilityClass(t){return generateUtilityClass("MuiTableRow",t)}const tableRowClasses=generateUtilityClasses("MuiTableRow",["root","selected","hover","head","footer"]),useUtilityClasses=t=>{const{classes:n,selected:a,hover:s,head:l,footer:u}=t;return composeClasses({root:["root",a&&"selected",s&&"hover",l&&"head",u&&"footer"]},getTableRowUtilityClass,n)},TableRowRoot=styled("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.head&&n.head,a.footer&&n.footer]}})(memoTheme(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${tableRowClasses.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${tableRowClasses.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),defaultComponent="tr",TableRow=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableRow"}),{className:l,component:u=defaultComponent,hover:c=!1,selected:d=!1,...Ct}=s,ar=reactExports.useContext(Tablelvl2Context),en={...s,component:u,hover:c,selected:d,head:ar&&ar.variant==="head",footer:ar&&ar.variant==="footer"},tn=useUtilityClasses(en);return jsxRuntimeExports.jsx(TableRowRoot,{as:u,ref:a,className:clsx(tn.root,l),role:u===defaultComponent?null:"row",ownerState:en,...Ct})});function ReleaseNotes(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Accordion,{className:"bg-lightgreen",children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ArrowDownwardIcon,{}),"aria-controls":"panel1-content",id:"panel1-header",children:jsxRuntimeExports.jsx(Typography,{component:"span",children:"Release Notes"})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsxs(Table,{size:"small",sx:{"& .MuiTableCell-root":{border:"1px solid #ccc"}},children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#f5f5f5"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Version"}),jsxRuntimeExports.jsx(TableCell,{children:"Date"}),jsxRuntimeExports.jsx(TableCell,{children:"Notes"})]})}),jsxRuntimeExports.jsx(TableBody,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"v2.0"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"July 2025"})}),jsxRuntimeExports.jsxs(TableCell,{children:[jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Site moved from will-kelsey.com/circuitSolver to onlinecircuitsolver.com"}),jsxRuntimeExports.jsxs("li",{children:["The user 'reactions' to the old site were: 27 angry, 3 laugh, 3 sad, 5 wow, 15 love and 29 superb. The angry people weren't leaving comments but I think the reasons were:",jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"It doesn't work on touch devices including ipad"}),jsxRuntimeExports.jsx("li",{children:"It could crash, like when you drag one componenct directly on top of another"}),jsxRuntimeExports.jsx("li",{children:"Limited features compared to industial tools"})]}),"Now it works on touch because I developed visiojs (https://www.npmjs.com/package/visiojs). Also visiojs replaces draw2d which was the source of all the crashing. This site isn't feature rich - it's original purpose was to create Laplace transforms. But it does run MNA in the background so many more features could be added"]}),jsxRuntimeExports.jsx("li",{children:"Moved to React + MUI + NPM. This allows: running lint, more maintainable code, smaller file size, many micro-benefits from joining the mainstream"}),jsxRuntimeExports.jsx("li",{children:"As well as a re-write, the following new features are added:"}),jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:"Adding 2 vprobes"})})]}),"There is one open item I want to do, which is add Python SymPy. Currently the algebraic solver is Algebrite + Yaffle - and they do an amazing job to inverse and simplify an algebraic matrix. However, SymPy can simplify better, and can swap out the algebra to make pretty numberic results"]})]})})]})})]})})}function b(t){if(document.querySelector(`script[src="${t}"]`))return;const n=document.createElement("script");n.src=t,n.async=!0,n.type="module",document.head.appendChild(n)}function h(t,n){for(const[a,s]of Object.entries(n))s!=null&&t.setAttribute(a,s.toString())}const E=["loaded","comment:published","comment:edited","comment:deleted","comment:voted","comment:flagged","reaction","rating","auth:login:clicked","profile:clicked"];class y{static script(n){n=n||"https://talk.hyvor.com",b(`${n}/embed/embed.js`)}static comments(n,a,s){y.script(n.instance);const l=document.createElement("hyvor-talk-comments");for(let[u,c]of Object.entries(n))if(c!=null){if(u==="translations"&&typeof c=="object"){for(let[d,Ct]of Object.entries(c))d=d.replace("_","-"),l.setAttribute(`t-${d}`,Ct);continue}u==="settings"&&(c=JSON.stringify(c)),l.setAttribute(u,c)}return s&&E.forEach(u=>{l.addEventListener(u,c=>{s(u,c.detail)})}),a.appendChild(l),l}}const k$1="https://talk.hyvor.com";class w{static script(n){n=n||k$1,b(`${n}/embed/comment-counts.js`)}static commentCount(n,a){w.script(n.instance);const s=document.createElement("hyvor-talk-comment-count");return h(s,n),a.appendChild(s),s}static load(n={},a=null){w.script(),customElements.whenDefined("hyvor-talk-comment-count").then(()=>{window.hyvorTalkCommentCounts.load(n,a)})}}class C{static script(n){n=n||k$1,b(`${n}/embed/newsletter.js`)}static form(n,a){C.script(n.instance);const s=document.createElement("hyvor-talk-newsletter");return h(s,n),a.appendChild(s),s}}const g=["loaded","subscription:created","subscription:success","subscription:updated"];class v{static script(n){n=n||k$1,b(`${n}/embed/memberships.js`)}static memberships(n,a,s){v.script(n.instance);const l=document.createElement("hyvor-talk-memberships");return h(l,n),s&&g.forEach(u=>{l.addEventListener(u,c=>{s(u,c.detail)})}),a=a||document.body,a.appendChild(l),l}static gatedContent(n,a){const s=document.createElement("hyvor-talk-gated-content");return h(s,n),a.appendChild(s),s}}const $=reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),{on:l,...u}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=y.comments(u,a.current,(c,d)=>{var Ct;const ar=(Ct=t.on)==null?void 0:Ct[c];ar&&typeof ar=="function"&&ar(d)}),()=>{var c;(c=s.current)==null||c.remove()}),[]),React.createElement("div",{className:"ht-comments-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=w.commentCount(t,a.current),()=>{var l;(l=s.current)==null||l.remove()}),[]),React.createElement("span",{className:"ht-comment-count-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=C.form(t,a.current),()=>{var l;(l=s.current)==null||l.remove()}),[]),React.createElement("div",{className:"ht-newsletter-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),{on:l,...u}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=v.memberships(u,a.current,(c,d)=>{var Ct;const ar=(Ct=t.on)==null?void 0:Ct[c];ar&&typeof ar=="function"&&ar(d)}),()=>{var c;(c=s.current)==null||c.remove()}),[]),React.createElement("div",{className:"ht-memberships-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>{const l={...t};return l._key&&(l.key=l._key,delete l._key),s.current=v.gatedContent(l,a.current),()=>{var u;(u=s.current)==null||u.remove()}},[]),React.createElement("div",{className:"ht-gated-content-wrap",ref:a})});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},extendStatics(t,n)};function __extends(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(n){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},__assign.apply(this,arguments)},Browser=(function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t})(),Env=(function(){function t(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t})(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(t,n){var a=n.browser,s=t.match(/Firefox\/([\d.]+)/),l=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),u=t.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(t);s&&(a.firefox=!0,a.version=s[1]),l&&(a.ie=!0,a.version=l[1]),u&&(a.edge=!0,a.version=u[1],a.newEdge=+u[1].split(".")[0]>18),c&&(a.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,n.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11),n.domSupported=typeof document<"u";var d=document.documentElement.style;n.transform3dSupported=(a.ie&&"transition"in d||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in d)&&!("OTransition"in d),n.transformSupported=n.transform3dSupported||a.ie&&+a.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(t){var n={};if(typeof JSON>"u")return n;for(var a=0;a<t.length;a++){var s=String.fromCharCode(a+32),l=(t.charCodeAt(a)-OFFSET)/SCALE;n[s]=l}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var t,n;return function(a,s){if(!t){var l=platformApi.createCanvas();t=l&&l.getContext("2d")}if(t)return n!==s&&(n=t.font=s||DEFAULT_FONT),t.measureText(a);a=a||"",s=s||DEFAULT_FONT;var u=/((?:\d+)?\.?\d*)px/.exec(s),c=u&&+u[1]||DEFAULT_FONT_SIZE,d=0;if(s.indexOf("mono")>=0)d=c*a.length;else for(var Ct=0;Ct<a.length;Ct++){var ar=DEFAULT_TEXT_WIDTH_MAP[a[Ct]];d+=ar==null?c:ar*c}return{width:d}}})(),loadImage:function(t,n,a){var s=new Image;return s.onload=n,s.onerror=a,s.src=t,s}};function setPlatformAPI(t){for(var n in platformApi)t[n]&&(platformApi[n]=t[n])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,n){return t["[object "+n+"]"]=!0,t},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,n){return t["[object "+n+"Array]"]=!0,t},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];typeof console<"u"&&console.error.apply(console,t)}function clone$4(t){if(t==null||typeof t!="object")return t;var n=t,a=objToString.call(t);if(a==="[object Array]"){if(!isPrimitive(t)){n=[];for(var s=0,l=t.length;s<l;s++)n[s]=clone$4(t[s])}}else if(TYPED_ARRAY[a]){if(!isPrimitive(t)){var u=t.constructor;if(u.from)n=u.from(t);else{n=new u(t.length);for(var s=0,l=t.length;s<l;s++)n[s]=t[s]}}}else if(!BUILTIN_OBJECT[a]&&!isPrimitive(t)&&!isDom(t)){n={};for(var c in t)t.hasOwnProperty(c)&&c!==protoKey&&(n[c]=clone$4(t[c]))}return n}function merge(t,n,a){if(!isObject$3(n)||!isObject$3(t))return a?clone$4(n):t;for(var s in n)if(n.hasOwnProperty(s)&&s!==protoKey){var l=t[s],u=n[s];isObject$3(u)&&isObject$3(l)&&!isArray$1(u)&&!isArray$1(l)&&!isDom(u)&&!isDom(l)&&!isBuiltInObject(u)&&!isBuiltInObject(l)&&!isPrimitive(u)&&!isPrimitive(l)?merge(l,u,a):(a||!(s in t))&&(t[s]=clone$4(n[s]))}return t}function mergeAll(t,n){for(var a=t[0],s=1,l=t.length;s<l;s++)a=merge(a,t[s],n);return a}function extend(t,n){if(Object.assign)Object.assign(t,n);else for(var a in n)n.hasOwnProperty(a)&&a!==protoKey&&(t[a]=n[a]);return t}function defaults(t,n,a){for(var s=keys(n),l=0,u=s.length;l<u;l++){var c=s[l];(a?n[c]!=null:t[c]==null)&&(t[c]=n[c])}return t}var createCanvas=platformApi.createCanvas;function indexOf(t,n){if(t){if(t.indexOf)return t.indexOf(n);for(var a=0,s=t.length;a<s;a++)if(t[a]===n)return a}return-1}function inherits(t,n){var a=t.prototype;function s(){}s.prototype=n.prototype,t.prototype=new s;for(var l in a)a.hasOwnProperty(l)&&(t.prototype[l]=a[l]);t.prototype.constructor=t,t.superClass=n}function mixin(t,n,a){if(t="prototype"in t?t.prototype:t,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var s=Object.getOwnPropertyNames(n),l=0;l<s.length;l++){var u=s[l];u!=="constructor"&&(a?n[u]!=null:t[u]==null)&&(t[u]=n[u])}else defaults(t,n,a)}function isArrayLike(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function each$f(t,n,a){if(t&&n)if(t.forEach&&t.forEach===nativeForEach)t.forEach(n,a);else if(t.length===+t.length)for(var s=0,l=t.length;s<l;s++)n.call(a,t[s],s,t);else for(var u in t)t.hasOwnProperty(u)&&n.call(a,t[u],u,t)}function map$1(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.map&&t.map===nativeMap)return t.map(n,a);for(var s=[],l=0,u=t.length;l<u;l++)s.push(n.call(a,t[l],l,t));return s}function reduce(t,n,a,s){if(t&&n){for(var l=0,u=t.length;l<u;l++)a=n.call(s,a,t[l],l,t);return a}}function filter(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.filter&&t.filter===nativeFilter)return t.filter(n,a);for(var s=[],l=0,u=t.length;l<u;l++)n.call(a,t[l],l,t)&&s.push(t[l]);return s}function find(t,n,a){if(t&&n){for(var s=0,l=t.length;s<l;s++)if(n.call(a,t[s],s,t))return t[s]}}function keys(t){if(!t)return[];if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n}function bindPolyfill(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return function(){return t.apply(n,a.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$1(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return t.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(t){return Array.isArray?Array.isArray(t):objToString.call(t)==="[object Array]"}function isFunction$1(t){return typeof t=="function"}function isString$1(t){return typeof t=="string"}function isStringSafe(t){return objToString.call(t)==="[object String]"}function isNumber(t){return typeof t=="number"}function isObject$3(t){var n=typeof t;return n==="function"||!!t&&n==="object"}function isBuiltInObject(t){return!!BUILTIN_OBJECT[objToString.call(t)]}function isTypedArray(t){return!!TYPED_ARRAY[objToString.call(t)]}function isDom(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function isGradientObject(t){return t.colorStops!=null}function isImagePatternObject(t){return t.image!=null}function isRegExp(t){return objToString.call(t)==="[object RegExp]"}function eqNaN(t){return t!==t}function retrieve(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,s=t.length;a<s;a++)if(t[a]!=null)return t[a]}function retrieve2(t,n){return t??n}function retrieve3(t,n,a){return t??n??a}function slice(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return nativeSlice.apply(t,n)}function normalizeCssArray$1(t){if(typeof t=="number")return[t,t,t,t];var n=t.length;return n===2?[t[0],t[1],t[0],t[1]]:n===3?[t[0],t[1],t[2],t[1]]:t}function assert(t,n){if(!t)throw new Error(n)}function trim$1(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(t){t[primitiveKey]=!0}function isPrimitive(t){return t[primitiveKey]}var MapPolyfill=(function(){function t(){this.data={}}return t.prototype.delete=function(n){var a=this.has(n);return a&&delete this.data[n],a},t.prototype.has=function(n){return this.data.hasOwnProperty(n)},t.prototype.get=function(n){return this.data[n]},t.prototype.set=function(n,a){return this.data[n]=a,this},t.prototype.keys=function(){return keys(this.data)},t.prototype.forEach=function(n){var a=this.data;for(var s in a)a.hasOwnProperty(s)&&n(a[s],s)},t})(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=(function(){function t(n){var a=isArray$1(n);this.data=maybeNativeMap();var s=this;n instanceof t?n.each(l):n&&each$f(n,l);function l(u,c){a?s.set(u,c):s.set(c,u)}}return t.prototype.hasKey=function(n){return this.data.has(n)},t.prototype.get=function(n){return this.data.get(n)},t.prototype.set=function(n,a){return this.data.set(n,a),a},t.prototype.each=function(n,a){this.data.forEach(function(s,l){n.call(a,s,l)})},t.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},t.prototype.removeKey=function(n){this.data.delete(n)},t})();function createHashMap(t){return new HashMap(t)}function concatArray(t,n){for(var a=new t.constructor(t.length+n.length),s=0;s<t.length;s++)a[s]=t[s];for(var l=t.length,s=0;s<n.length;s++)a[s+l]=n[s];return a}function createObject(t,n){var a;if(Object.create)a=Object.create(t);else{var s=function(){};s.prototype=t,a=new s}return n&&extend(a,n),a}function disableUserSelect(t){var n=t.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(t,n){return t.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$1,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString:isString$1,isStringSafe,isTypedArray,keys,logError,map:map$1,merge,mergeAll,mixin,noop,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));function create$2(t,n){return t==null&&(t=0),n==null&&(n=0),[t,n]}function copy$1(t,n){return t[0]=n[0],t[1]=n[1],t}function clone$3(t){return[t[0],t[1]]}function set$1(t,n,a){return t[0]=n,t[1]=a,t}function add(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function scaleAndAdd$1(t,n,a,s){return t[0]=n[0]+a[0]*s,t[1]=n[1]+a[1]*s,t}function sub(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function len(t){return Math.sqrt(lenSquare(t))}var length=len;function lenSquare(t){return t[0]*t[0]+t[1]*t[1]}var lengthSquare=lenSquare;function mul$1(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function div(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function dot(t,n){return t[0]*n[0]+t[1]*n[1]}function scale$2(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function normalize$3(t,n){var a=len(n);return a===0?(t[0]=0,t[1]=0):(t[0]=n[0]/a,t[1]=n[1]/a),t}function distance(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}var dist$1=distance;function distanceSquare(t,n){return(t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1])}var distSquare=distanceSquare;function negate(t,n){return t[0]=-n[0],t[1]=-n[1],t}function lerp$1(t,n,a,s){return t[0]=n[0]+s*(a[0]-n[0]),t[1]=n[1]+s*(a[1]-n[1]),t}function applyTransform$1(t,n,a){var s=n[0],l=n[1];return t[0]=a[0]*s+a[2]*l+a[4],t[1]=a[1]*s+a[3]*l+a[5],t}function min$1(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function max$1(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=(function(){function t(n,a){this.target=n,this.topTarget=a&&a.topTarget}return t})(),Draggable=(function(){function t(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(n){for(var a=n.target;a&&!a.draggable;)a=a.parent||a.__hostTarget;a&&(this._draggingTarget=a,a.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(a,n),"dragstart",n.event))},t.prototype._drag=function(n){var a=this._draggingTarget;if(a){var s=n.offsetX,l=n.offsetY,u=s-this._x,c=l-this._y;this._x=s,this._y=l,a.drift(u,c,n),this.handler.dispatchToElement(new Param(a,n),"drag",n.event);var d=this.handler.findHover(s,l,a).target,Ct=this._dropTarget;this._dropTarget=d,a!==d&&(Ct&&d!==Ct&&this.handler.dispatchToElement(new Param(Ct,n),"dragleave",n.event),d&&d!==Ct&&this.handler.dispatchToElement(new Param(d,n),"dragenter",n.event))}},t.prototype._dragEnd=function(n){var a=this._draggingTarget;a&&(a.dragging=!1),this.handler.dispatchToElement(new Param(a,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},t})(),Eventful=(function(){function t(n){n&&(this._$eventProcessor=n)}return t.prototype.on=function(n,a,s,l){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof a=="function"&&(l=s,s=a,a=null),!s||!n)return this;var c=this._$eventProcessor;a!=null&&c&&c.normalizeQuery&&(a=c.normalizeQuery(a)),u[n]||(u[n]=[]);for(var d=0;d<u[n].length;d++)if(u[n][d].h===s)return this;var Ct={h:s,query:a,ctx:l||this,callAtLast:s.zrEventfulCallAtLast},ar=u[n].length-1,en=u[n][ar];return en&&en.callAtLast?u[n].splice(ar,0,Ct):u[n].push(Ct),this},t.prototype.isSilent=function(n){var a=this._$handlers;return!a||!a[n]||!a[n].length},t.prototype.off=function(n,a){var s=this._$handlers;if(!s)return this;if(!n)return this._$handlers={},this;if(a){if(s[n]){for(var l=[],u=0,c=s[n].length;u<c;u++)s[n][u].h!==a&&l.push(s[n][u]);s[n]=l}s[n]&&s[n].length===0&&delete s[n]}else delete s[n];return this},t.prototype.trigger=function(n){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=a.length,d=l.length,Ct=0;Ct<d;Ct++){var ar=l[Ct];if(!(u&&u.filter&&ar.query!=null&&!u.filter(n,ar.query)))switch(c){case 0:ar.h.call(ar.ctx);break;case 1:ar.h.call(ar.ctx,a[0]);break;case 2:ar.h.call(ar.ctx,a[0],a[1]);break;default:ar.h.apply(ar.ctx,a);break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},t.prototype.triggerWithContext=function(n){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=a.length,d=a[c-1],Ct=l.length,ar=0;ar<Ct;ar++){var en=l[ar];if(!(u&&u.filter&&en.query!=null&&!u.filter(n,en.query)))switch(c){case 0:en.h.call(d);break;case 1:en.h.call(d,a[0]);break;case 2:en.h.call(d,a[0],a[1]);break;default:en.h.apply(d,a.slice(1,c-1));break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},t})(),LN2=Math.log(2);function determinant(t,n,a,s,l,u){var c=s+"-"+l,d=t.length;if(u.hasOwnProperty(c))return u[c];if(n===1){var Ct=Math.round(Math.log((1<<d)-1&~l)/LN2);return t[a][Ct]}for(var ar=s|1<<a,en=a+1;s&1<<en;)en++;for(var tn=0,on=0,cn=0;on<d;on++){var dn=1<<on;dn&l||(tn+=(cn%2?-1:1)*t[a][on]*determinant(t,n-1,en,ar,l|dn,u),cn++)}return u[c]=tn,tn}function buildTransformer(t,n){var a=[[t[0],t[1],1,0,0,0,-n[0]*t[0],-n[0]*t[1]],[0,0,0,t[0],t[1],1,-n[1]*t[0],-n[1]*t[1]],[t[2],t[3],1,0,0,0,-n[2]*t[2],-n[2]*t[3]],[0,0,0,t[2],t[3],1,-n[3]*t[2],-n[3]*t[3]],[t[4],t[5],1,0,0,0,-n[4]*t[4],-n[4]*t[5]],[0,0,0,t[4],t[5],1,-n[5]*t[4],-n[5]*t[5]],[t[6],t[7],1,0,0,0,-n[6]*t[6],-n[6]*t[7]],[0,0,0,t[6],t[7],1,-n[7]*t[6],-n[7]*t[7]]],s={},l=determinant(a,8,0,0,0,s);if(l!==0){for(var u=[],c=0;c<8;c++)for(var d=0;d<8;d++)u[d]==null&&(u[d]=0),u[d]+=((c+d)%2?-1:1)*determinant(a,7,c===0?1:0,1<<c,1<<d,s)/l*n[c];return function(Ct,ar,en){var tn=ar*u[6]+en*u[7]+1;Ct[0]=(ar*u[0]+en*u[1]+u[2])/tn,Ct[1]=(ar*u[3]+en*u[4]+u[5])/tn}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(t,n,a,s,l){return transformCoordWithViewport(_calcOut$1,n,s,l,!0)&&transformCoordWithViewport(t,a,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(t,n,a,s,l){if(n.getBoundingClientRect&&env.domSupported&&!isCanvasEl(n)){var u=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(n,u),d=preparePointerTransformer(c,u,l);if(d)return d(t,a,s),!0}return!1}function prepareCoordMarkers(t,n){var a=n.markers;if(a)return a;a=n.markers=[];for(var s=["left","right"],l=["top","bottom"],u=0;u<4;u++){var c=document.createElement("div"),d=c.style,Ct=u%2,ar=(u>>1)%2;d.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[Ct]+":0",l[ar]+":0",s[1-Ct]+":auto",l[1-ar]+":auto",""].join("!important;"),t.appendChild(c),a.push(c)}return a}function preparePointerTransformer(t,n,a){for(var s=a?"invTrans":"trans",l=n[s],u=n.srcCoords,c=[],d=[],Ct=!0,ar=0;ar<4;ar++){var en=t[ar].getBoundingClientRect(),tn=2*ar,on=en.left,cn=en.top;c.push(on,cn),Ct=Ct&&u&&on===u[tn]&&cn===u[tn+1],d.push(t[ar].offsetLeft,t[ar].offsetTop)}return Ct&&l?l:(n.srcCoords=c,n[s]=a?buildTransformer(d,c):buildTransformer(c,d))}function isCanvasEl(t){return t.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(t){return t==null?"":(t+"").replace(replaceReg,function(n,a){return replaceMap[a]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(t,n,a,s){return a=a||{},s?calculateZrXY(t,n,a):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(a.zrX=n.layerX,a.zrY=n.layerY):n.offsetX!=null?(a.zrX=n.offsetX,a.zrY=n.offsetY):calculateZrXY(t,n,a),a}function calculateZrXY(t,n,a){if(env.domSupported&&t.getBoundingClientRect){var s=n.clientX,l=n.clientY;if(isCanvasEl(t)){var u=t.getBoundingClientRect();a.zrX=s-u.left,a.zrY=l-u.top;return}else if(transformCoordWithViewport(_calcOut,t,s,l)){a.zrX=_calcOut[0],a.zrY=_calcOut[1];return}}a.zrX=a.zrY=0}function getNativeEvent(t){return t||window.event}function normalizeEvent(t,n,a){if(n=getNativeEvent(n),n.zrX!=null)return n;var s=n.type,l=s&&s.indexOf("touch")>=0;if(l){var c=s!=="touchend"?n.targetTouches[0]:n.changedTouches[0];c&&clientToLocal(t,c,n,a)}else{clientToLocal(t,n,n,a);var u=getWheelDeltaMayPolyfill(n);n.zrDelta=u?u/120:-(n.detail||0)/3}var d=n.button;return n.which==null&&d!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=d&1?1:d&2?3:d&4?2:0),n}function getWheelDeltaMayPolyfill(t){var n=t.wheelDelta;if(n)return n;var a=t.deltaX,s=t.deltaY;if(a==null||s==null)return n;var l=Math.abs(s!==0?s:a),u=s>0?-1:s<0?1:a>0?-1:1;return 3*l*u}function addEventListener(t,n,a,s){t.addEventListener(n,a,s)}function removeEventListener(t,n,a,s){t.removeEventListener(n,a,s)}var stop=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(t){return t.which===2||t.which===3}var GestureMgr=(function(){function t(){this._track=[]}return t.prototype.recognize=function(n,a,s){return this._doTrack(n,a,s),this._recognize(n)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(n,a,s){var l=n.touches;if(l){for(var u={points:[],touches:[],target:a,event:n},c=0,d=l.length;c<d;c++){var Ct=l[c],ar=clientToLocal(s,Ct,{});u.points.push([ar.zrX,ar.zrY]),u.touches.push(Ct)}this._track.push(u)}},t.prototype._recognize=function(n){for(var a in recognizers)if(recognizers.hasOwnProperty(a)){var s=recognizers[a](this._track,n);if(s)return s}},t})();function dist(t){var n=t[1][0]-t[0][0],a=t[1][1]-t[0][1];return Math.sqrt(n*n+a*a)}function center$1(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var recognizers={pinch:function(t,n){var a=t.length;if(a){var s=(t[a-1]||{}).points,l=(t[a-2]||{}).points||s;if(l&&l.length>1&&s&&s.length>1){var u=dist(s)/dist(l);!isFinite(u)&&(u=1),n.pinchScale=u;var c=center$1(s);return n.pinchX=c[0],n.pinchY=c[1],{type:"pinch",target:t[0].target,event:n}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function copy(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function mul(t,n,a){var s=n[0]*a[0]+n[2]*a[1],l=n[1]*a[0]+n[3]*a[1],u=n[0]*a[2]+n[2]*a[3],c=n[1]*a[2]+n[3]*a[3],d=n[0]*a[4]+n[2]*a[5]+n[4],Ct=n[1]*a[4]+n[3]*a[5]+n[5];return t[0]=s,t[1]=l,t[2]=u,t[3]=c,t[4]=d,t[5]=Ct,t}function translate(t,n,a){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4]+a[0],t[5]=n[5]+a[1],t}function rotate(t,n,a,s){s===void 0&&(s=[0,0]);var l=n[0],u=n[2],c=n[4],d=n[1],Ct=n[3],ar=n[5],en=Math.sin(a),tn=Math.cos(a);return t[0]=l*tn+d*en,t[1]=-l*en+d*tn,t[2]=u*tn+Ct*en,t[3]=-u*en+tn*Ct,t[4]=tn*(c-s[0])+en*(ar-s[1])+s[0],t[5]=tn*(ar-s[1])-en*(c-s[0])+s[1],t}function scale$1(t,n,a){var s=a[0],l=a[1];return t[0]=n[0]*s,t[1]=n[1]*l,t[2]=n[2]*s,t[3]=n[3]*l,t[4]=n[4]*s,t[5]=n[5]*l,t}function invert(t,n){var a=n[0],s=n[2],l=n[4],u=n[1],c=n[3],d=n[5],Ct=a*c-u*s;return Ct?(Ct=1/Ct,t[0]=c*Ct,t[1]=-u*Ct,t[2]=-s*Ct,t[3]=a*Ct,t[4]=(s*d-c*l)*Ct,t[5]=(u*l-a*d)*Ct,t):null}function clone$2(t){var n=create$1();return copy(n,t),n}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=(function(){function t(n,a){this.x=n||0,this.y=a||0}return t.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(n,a){return this.x=n,this.y=a,this},t.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},t.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},t.prototype.scale=function(n){this.x*=n,this.y*=n},t.prototype.scaleAndAdd=function(n,a){this.x+=n.x*a,this.y+=n.y*a},t.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},t.prototype.dot=function(n){return this.x*n.x+this.y*n.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},t.prototype.distance=function(n){var a=this.x-n.x,s=this.y-n.y;return Math.sqrt(a*a+s*s)},t.prototype.distanceSquare=function(n){var a=this.x-n.x,s=this.y-n.y;return a*a+s*s},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(n){if(n){var a=this.x,s=this.y;return this.x=n[0]*a+n[2]*s+n[4],this.y=n[1]*a+n[3]*s+n[5],this}},t.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},t.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},t.set=function(n,a,s){n.x=a,n.y=s},t.copy=function(n,a){n.x=a.x,n.y=a.y},t.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},t.lenSquare=function(n){return n.x*n.x+n.y*n.y},t.dot=function(n,a){return n.x*a.x+n.y*a.y},t.add=function(n,a,s){n.x=a.x+s.x,n.y=a.y+s.y},t.sub=function(n,a,s){n.x=a.x-s.x,n.y=a.y-s.y},t.scale=function(n,a,s){n.x=a.x*s,n.y=a.y*s},t.scaleAndAdd=function(n,a,s,l){n.x=a.x+s.x*l,n.y=a.y+s.y*l},t.lerp=function(n,a,s,l){var u=1-l;n.x=u*a.x+l*s.x,n.y=u*a.y+l*s.y},t})(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=(function(){function t(n,a,s,l){s<0&&(n=n+s,s=-s),l<0&&(a=a+l,l=-l),this.x=n,this.y=a,this.width=s,this.height=l}return t.prototype.union=function(n){var a=mathMin$a(n.x,this.x),s=mathMin$a(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(n.x+n.width,this.x+this.width)-a:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(n.y+n.height,this.y+this.height)-s:this.height=n.height,this.x=a,this.y=s},t.prototype.applyTransform=function(n){t.applyTransform(this,this,n)},t.prototype.calculateTransform=function(n){var a=this,s=n.width/a.width,l=n.height/a.height,u=create$1();return translate(u,u,[-a.x,-a.y]),scale$1(u,u,[s,l]),translate(u,u,[n.x,n.y]),u},t.prototype.intersect=function(n,a){if(!n)return!1;n instanceof t||(n=t.create(n));var s=this,l=s.x,u=s.x+s.width,c=s.y,d=s.y+s.height,Ct=n.x,ar=n.x+n.width,en=n.y,tn=n.y+n.height,on=!(u<Ct||ar<l||d<en||tn<c);if(a){var cn=1/0,dn=0,Cn=Math.abs(u-Ct),In=Math.abs(ar-l),ix=Math.abs(d-en),ax=Math.abs(tn-c),ox=Math.min(Cn,In),sx=Math.min(ix,ax);u<Ct||ar<l?ox>dn&&(dn=ox,Cn<In?Point.set(maxTv$1,-Cn,0):Point.set(maxTv$1,In,0)):ox<cn&&(cn=ox,Cn<In?Point.set(minTv$1,Cn,0):Point.set(minTv$1,-In,0)),d<en||tn<c?sx>dn&&(dn=sx,ix<ax?Point.set(maxTv$1,0,-ix):Point.set(maxTv$1,0,ax)):ox<cn&&(cn=ox,ix<ax?Point.set(minTv$1,0,ix):Point.set(minTv$1,0,-ax))}return a&&Point.copy(a,on?minTv$1:maxTv$1),on},t.prototype.contain=function(n,a){var s=this;return n>=s.x&&n<=s.x+s.width&&a>=s.y&&a<=s.y+s.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(n){t.copy(this,n)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(n){return new t(n.x,n.y,n.width,n.height)},t.copy=function(n,a){n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height},t.applyTransform=function(n,a,s){if(!s){n!==a&&t.copy(n,a);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){var l=s[0],u=s[3],c=s[4],d=s[5];n.x=a.x*l+c,n.y=a.y*u+d,n.width=a.width*l,n.height=a.height*u,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=a.x,lt.y=rt.y=a.y,rb.x=rt.x=a.x+a.width,rb.y=lb.y=a.y+a.height,lt.transform(s),rt.transform(s),rb.transform(s),lb.transform(s),n.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var Ct=mathMax$a(lt.x,rb.x,lb.x,rt.x),ar=mathMax$a(lt.y,rb.y,lb.y,rt.y);n.width=Ct-n.x,n.height=ar-n.y},t})(),SILENT="silent";function makeEventPacket(t,n,a){return{type:t,event:a,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.handler=null,a}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n})(Eventful),HoveredResult=(function(){function t(n,a){this.x=n,this.y=a}return t})(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this)||this;return d._hovered=new HoveredResult(0,0),d.storage=a,d.painter=s,d.painterRoot=u,d._pointerSize=c,l=l||new EmptyProxy,d.proxy=null,d.setHandlerProxy(l),d._draggingMgr=new Draggable(d),d}return n.prototype.setHandlerProxy=function(a){this.proxy&&this.proxy.dispose(),a&&(each$f(handlerNames,function(s){a.on&&a.on(s,this[s],this)},this),a.handler=this),this.proxy=a},n.prototype.mousemove=function(a){var s=a.zrX,l=a.zrY,u=isOutsideBoundary(this,s,l),c=this._hovered,d=c.target;d&&!d.__zr&&(c=this.findHover(c.x,c.y),d=c.target);var Ct=this._hovered=u?new HoveredResult(s,l):this.findHover(s,l),ar=Ct.target,en=this.proxy;en.setCursor&&en.setCursor(ar?ar.cursor:"default"),d&&ar!==d&&this.dispatchToElement(c,"mouseout",a),this.dispatchToElement(Ct,"mousemove",a),ar&&ar!==d&&this.dispatchToElement(Ct,"mouseover",a)},n.prototype.mouseout=function(a){var s=a.zrEventControl;s!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",a),s!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:a})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(a,s){var l=this[a];l&&l.call(this,s)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(a){var s=this.proxy;s.setCursor&&s.setCursor(a)},n.prototype.dispatchToElement=function(a,s,l){a=a||{};var u=a.target;if(!(u&&u.silent)){for(var c="on"+s,d=makeEventPacket(s,a,l);u&&(u[c]&&(d.cancelBubble=!!u[c].call(u,d)),u.trigger(s,d),u=u.__hostTarget?u.__hostTarget:u.parent,!d.cancelBubble););d.cancelBubble||(this.trigger(s,d),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(Ct){typeof Ct[c]=="function"&&Ct[c].call(Ct,d),Ct.trigger&&Ct.trigger(s,d)}))}},n.prototype.findHover=function(a,s,l){var u=this.storage.getDisplayList(),c=new HoveredResult(a,s);if(setHoverTarget(u,c,a,s,l),this._pointerSize&&!c.target){for(var d=[],Ct=this._pointerSize,ar=Ct/2,en=new BoundingRect(a-ar,s-ar,Ct,Ct),tn=u.length-1;tn>=0;tn--){var on=u[tn];on!==l&&!on.ignore&&!on.ignoreCoarsePointer&&(!on.parent||!on.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(on.getBoundingRect()),on.transform&&tmpRect$1.applyTransform(on.transform),tmpRect$1.intersect(en)&&d.push(on))}if(d.length)for(var cn=4,dn=Math.PI/12,Cn=Math.PI*2,In=0;In<ar;In+=cn)for(var ix=0;ix<Cn;ix+=dn){var ax=a+In*Math.cos(ix),ox=s+In*Math.sin(ix);if(setHoverTarget(d,c,ax,ox,l),c.target)return c}}return c},n.prototype.processGesture=function(a,s){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;s==="start"&&l.clear();var u=l.recognize(a,this.findHover(a.zrX,a.zrY,null).target,this.proxy.dom);if(s==="end"&&l.clear(),u){var c=u.type;a.gestureEvent=c;var d=new HoveredResult;d.target=u.target,this.dispatchToElement(d,c,u.event)}},n})(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Handler.prototype[t]=function(n){var a=n.zrX,s=n.zrY,l=isOutsideBoundary(this,a,s),u,c;if((t!=="mouseup"||!l)&&(u=this.findHover(a,s),c=u.target),t==="mousedown")this._downEl=c,this._downPoint=[n.zrX,n.zrY],this._upEl=c;else if(t==="mouseup")this._upEl=c;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,t,n)}});function isHover(t,n,a){if(t[t.rectHover?"rectContain":"contain"](n,a)){for(var s=t,l=void 0,u=!1;s;){if(s.ignoreClip&&(u=!0),!u){var c=s.getClipPath();if(c&&!c.contain(n,a))return!1}s.silent&&(l=!0);var d=s.__hostTarget;s=d||s.parent}return l?SILENT:!0}return!1}function setHoverTarget(t,n,a,s,l){for(var u=t.length-1;u>=0;u--){var c=t[u],d=void 0;if(c!==l&&!c.ignore&&(d=isHover(c,a,s))&&(!n.topTarget&&(n.topTarget=c),d!==SILENT)){n.target=c;break}}}function isOutsideBoundary(t,n,a){var s=t.painter;return n<0||n>s.getWidth()||a<0||a>s.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(t){for(var n=0;t>=DEFAULT_MIN_MERGE;)n|=t&1,t>>=1;return t+n}function makeAscendingRun(t,n,a,s){var l=n+1;if(l===a)return 1;if(s(t[l++],t[n])<0){for(;l<a&&s(t[l],t[l-1])<0;)l++;reverseRun(t,n,l)}else for(;l<a&&s(t[l],t[l-1])>=0;)l++;return l-n}function reverseRun(t,n,a){for(a--;n<a;){var s=t[n];t[n++]=t[a],t[a--]=s}}function binaryInsertionSort(t,n,a,s,l){for(s===n&&s++;s<a;s++){for(var u=t[s],c=n,d=s,Ct;c<d;)Ct=c+d>>>1,l(u,t[Ct])<0?d=Ct:c=Ct+1;var ar=s-c;switch(ar){case 3:t[c+3]=t[c+2];case 2:t[c+2]=t[c+1];case 1:t[c+1]=t[c];break;default:for(;ar>0;)t[c+ar]=t[c+ar-1],ar--}t[c]=u}}function gallopLeft(t,n,a,s,l,u){var c=0,d=0,Ct=1;if(u(t,n[a+l])>0){for(d=s-l;Ct<d&&u(t,n[a+l+Ct])>0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d),c+=l,Ct+=l}else{for(d=l+1;Ct<d&&u(t,n[a+l-Ct])<=0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d);var ar=c;c=l-Ct,Ct=l-ar}for(c++;c<Ct;){var en=c+(Ct-c>>>1);u(t,n[a+en])>0?c=en+1:Ct=en}return Ct}function gallopRight(t,n,a,s,l,u){var c=0,d=0,Ct=1;if(u(t,n[a+l])<0){for(d=l+1;Ct<d&&u(t,n[a+l-Ct])<0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d);var ar=c;c=l-Ct,Ct=l-ar}else{for(d=s-l;Ct<d&&u(t,n[a+l+Ct])>=0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d),c+=l,Ct+=l}for(c++;c<Ct;){var en=c+(Ct-c>>>1);u(t,n[a+en])<0?Ct=en:c=en+1}return Ct}function TimSort(t,n){var a=DEFAULT_MIN_GALLOPING,s,l,u=0,c=[];s=[],l=[];function d(cn,dn){s[u]=cn,l[u]=dn,u+=1}function Ct(){for(;u>1;){var cn=u-2;if(cn>=1&&l[cn-1]<=l[cn]+l[cn+1]||cn>=2&&l[cn-2]<=l[cn]+l[cn-1])l[cn-1]<l[cn+1]&&cn--;else if(l[cn]>l[cn+1])break;en(cn)}}function ar(){for(;u>1;){var cn=u-2;cn>0&&l[cn-1]<l[cn+1]&&cn--,en(cn)}}function en(cn){var dn=s[cn],Cn=l[cn],In=s[cn+1],ix=l[cn+1];l[cn]=Cn+ix,cn===u-3&&(s[cn+1]=s[cn+2],l[cn+1]=l[cn+2]),u--;var ax=gallopRight(t[In],t,dn,Cn,0,n);dn+=ax,Cn-=ax,Cn!==0&&(ix=gallopLeft(t[dn+Cn-1],t,In,ix,ix-1,n),ix!==0&&(Cn<=ix?tn(dn,Cn,In,ix):on(dn,Cn,In,ix)))}function tn(cn,dn,Cn,In){var ix=0;for(ix=0;ix<dn;ix++)c[ix]=t[cn+ix];var ax=0,ox=Cn,sx=cn;if(t[sx++]=t[ox++],--In===0){for(ix=0;ix<dn;ix++)t[sx+ix]=c[ax+ix];return}if(dn===1){for(ix=0;ix<In;ix++)t[sx+ix]=t[ox+ix];t[sx+In]=c[ax];return}for(var ux=a,cx,hx,gx;;){cx=0,hx=0,gx=!1;do if(n(t[ox],c[ax])<0){if(t[sx++]=t[ox++],hx++,cx=0,--In===0){gx=!0;break}}else if(t[sx++]=c[ax++],cx++,hx=0,--dn===1){gx=!0;break}while((cx|hx)<ux);if(gx)break;do{if(cx=gallopRight(t[ox],c,ax,dn,0,n),cx!==0){for(ix=0;ix<cx;ix++)t[sx+ix]=c[ax+ix];if(sx+=cx,ax+=cx,dn-=cx,dn<=1){gx=!0;break}}if(t[sx++]=t[ox++],--In===0){gx=!0;break}if(hx=gallopLeft(c[ax],t,ox,In,0,n),hx!==0){for(ix=0;ix<hx;ix++)t[sx+ix]=t[ox+ix];if(sx+=hx,ox+=hx,In-=hx,In===0){gx=!0;break}}if(t[sx++]=c[ax++],--dn===1){gx=!0;break}ux--}while(cx>=DEFAULT_MIN_GALLOPING||hx>=DEFAULT_MIN_GALLOPING);if(gx)break;ux<0&&(ux=0),ux+=2}if(a=ux,a<1&&(a=1),dn===1){for(ix=0;ix<In;ix++)t[sx+ix]=t[ox+ix];t[sx+In]=c[ax]}else{if(dn===0)throw new Error;for(ix=0;ix<dn;ix++)t[sx+ix]=c[ax+ix]}}function on(cn,dn,Cn,In){var ix=0;for(ix=0;ix<In;ix++)c[ix]=t[Cn+ix];var ax=cn+dn-1,ox=In-1,sx=Cn+In-1,ux=0,cx=0;if(t[sx--]=t[ax--],--dn===0){for(ux=sx-(In-1),ix=0;ix<In;ix++)t[ux+ix]=c[ix];return}if(In===1){for(sx-=dn,ax-=dn,cx=sx+1,ux=ax+1,ix=dn-1;ix>=0;ix--)t[cx+ix]=t[ux+ix];t[sx]=c[ox];return}for(var hx=a;;){var gx=0,fx=0,dx=!1;do if(n(c[ox],t[ax])<0){if(t[sx--]=t[ax--],gx++,fx=0,--dn===0){dx=!0;break}}else if(t[sx--]=c[ox--],fx++,gx=0,--In===1){dx=!0;break}while((gx|fx)<hx);if(dx)break;do{if(gx=dn-gallopRight(c[ox],t,cn,dn,dn-1,n),gx!==0){for(sx-=gx,ax-=gx,dn-=gx,cx=sx+1,ux=ax+1,ix=gx-1;ix>=0;ix--)t[cx+ix]=t[ux+ix];if(dn===0){dx=!0;break}}if(t[sx--]=c[ox--],--In===1){dx=!0;break}if(fx=In-gallopLeft(t[ax],c,0,In,In-1,n),fx!==0){for(sx-=fx,ox-=fx,In-=fx,cx=sx+1,ux=ox+1,ix=0;ix<fx;ix++)t[cx+ix]=c[ux+ix];if(In<=1){dx=!0;break}}if(t[sx--]=t[ax--],--dn===0){dx=!0;break}hx--}while(gx>=DEFAULT_MIN_GALLOPING||fx>=DEFAULT_MIN_GALLOPING);if(dx)break;hx<0&&(hx=0),hx+=2}if(a=hx,a<1&&(a=1),In===1){for(sx-=dn,ax-=dn,cx=sx+1,ux=ax+1,ix=dn-1;ix>=0;ix--)t[cx+ix]=t[ux+ix];t[sx]=c[ox]}else{if(In===0)throw new Error;for(ux=sx-(In-1),ix=0;ix<In;ix++)t[ux+ix]=c[ix]}}return{mergeRuns:Ct,forceMergeRuns:ar,pushRun:d}}function sort$2(t,n,a,s){a||(a=0),s||(s=t.length);var l=s-a;if(!(l<2)){var u=0;if(l<DEFAULT_MIN_MERGE){u=makeAscendingRun(t,a,s,n),binaryInsertionSort(t,a,s,a+u,n);return}var c=TimSort(t,n),d=minRunLength(l);do{if(u=makeAscendingRun(t,a,s,n),u<d){var Ct=l;Ct>d&&(Ct=d),binaryInsertionSort(t,a,a+Ct,a+u,n),u=Ct}c.pushRun(a,u),c.mergeRuns(),l-=u,a+=u}while(l!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(t,n){return t.zlevel===n.zlevel?t.z===n.z?t.z2-n.z2:t.z-n.z:t.zlevel-n.zlevel}var Storage=(function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return t.prototype.traverse=function(n,a){for(var s=0;s<this._roots.length;s++)this._roots[s].traverse(n,a)},t.prototype.getDisplayList=function(n,a){a=a||!1;var s=this._displayList;return(n||!s.length)&&this.updateDisplayList(a),s},t.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var a=this._roots,s=this._displayList,l=0,u=a.length;l<u;l++)this._updateAndAddDisplayable(a[l],null,n);s.length=this._displayListLen,sort$2(s,shapeCompareFunc)},t.prototype._updateAndAddDisplayable=function(n,a,s){if(!(n.ignore&&!s)){n.beforeUpdate(),n.update(),n.afterUpdate();var l=n.getClipPath();if(n.ignoreClip)a=null;else if(l){a?a=a.slice():a=[];for(var u=l,c=n;u;)u.parent=c,u.updateTransform(),a.push(u),c=u,u=u.getClipPath()}if(n.childrenRef){for(var d=n.childrenRef(),Ct=0;Ct<d.length;Ct++){var ar=d[Ct];n.__dirty&&(ar.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(ar,a,s)}n.__dirty=0}else{var en=n;a&&a.length?en.__clipPaths=a:en.__clipPaths&&en.__clipPaths.length>0&&(en.__clipPaths=[]),isNaN(en.z)&&(logInvalidZError(),en.z=0),isNaN(en.z2)&&(logInvalidZError(),en.z2=0),isNaN(en.zlevel)&&(logInvalidZError(),en.zlevel=0),this._displayList[this._displayListLen++]=en}var tn=n.getDecalElement&&n.getDecalElement();tn&&this._updateAndAddDisplayable(tn,a,s);var on=n.getTextGuideLine();on&&this._updateAndAddDisplayable(on,a,s);var cn=n.getTextContent();cn&&this._updateAndAddDisplayable(cn,a,s)}},t.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},t.prototype.delRoot=function(n){if(n instanceof Array){for(var a=0,s=n.length;a<s;a++)this.delRoot(n[a]);return}var l=indexOf(this._roots,n);l>=0&&this._roots.splice(l,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t})(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var easingFuncs={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)))},elasticOut:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/s)+1)},elasticInOut:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)):a*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)*.5+1)},backIn:function(t){var n=1.70158;return t*t*((n+1)*t-n)},backOut:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},backInOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)},bounceIn:function(t){return 1-easingFuncs.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?easingFuncs.bounceIn(t*2)*.5:easingFuncs.bounceOut(t*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(t){return t>-EPSILON$4&&t<EPSILON$4}function isNotAroundZero$1(t){return t>EPSILON$4||t<-EPSILON$4}function cubicAt(t,n,a,s,l){var u=1-l;return u*u*(u*t+3*l*n)+l*l*(l*s+3*u*a)}function cubicDerivativeAt(t,n,a,s,l){var u=1-l;return 3*(((n-t)*u+2*(a-n)*l)*u+(s-a)*l*l)}function cubicRootAt(t,n,a,s,l,u){var c=s+3*(n-a)-t,d=3*(a-n*2+t),Ct=3*(n-t),ar=t-l,en=d*d-3*c*Ct,tn=d*Ct-9*c*ar,on=Ct*Ct-3*d*ar,cn=0;if(isAroundZero$1(en)&&isAroundZero$1(tn))if(isAroundZero$1(d))u[0]=0;else{var dn=-Ct/d;dn>=0&&dn<=1&&(u[cn++]=dn)}else{var Cn=tn*tn-4*en*on;if(isAroundZero$1(Cn)){var In=tn/en,dn=-d/c+In,ix=-In/2;dn>=0&&dn<=1&&(u[cn++]=dn),ix>=0&&ix<=1&&(u[cn++]=ix)}else if(Cn>0){var ax=mathSqrt$3(Cn),ox=en*d+1.5*c*(-tn+ax),sx=en*d+1.5*c*(-tn-ax);ox<0?ox=-mathPow$2(-ox,ONE_THIRD):ox=mathPow$2(ox,ONE_THIRD),sx<0?sx=-mathPow$2(-sx,ONE_THIRD):sx=mathPow$2(sx,ONE_THIRD);var dn=(-d-(ox+sx))/(3*c);dn>=0&&dn<=1&&(u[cn++]=dn)}else{var ux=(2*en*d-3*c*tn)/(2*mathSqrt$3(en*en*en)),cx=Math.acos(ux)/3,hx=mathSqrt$3(en),gx=Math.cos(cx),dn=(-d-2*hx*gx)/(3*c),ix=(-d+hx*(gx+THREE_SQRT*Math.sin(cx)))/(3*c),fx=(-d+hx*(gx-THREE_SQRT*Math.sin(cx)))/(3*c);dn>=0&&dn<=1&&(u[cn++]=dn),ix>=0&&ix<=1&&(u[cn++]=ix),fx>=0&&fx<=1&&(u[cn++]=fx)}}return cn}function cubicExtrema(t,n,a,s,l){var u=6*a-12*n+6*t,c=9*n+3*s-3*t-9*a,d=3*n-3*t,Ct=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var ar=-d/u;ar>=0&&ar<=1&&(l[Ct++]=ar)}}else{var en=u*u-4*c*d;if(isAroundZero$1(en))l[0]=-u/(2*c);else if(en>0){var tn=mathSqrt$3(en),ar=(-u+tn)/(2*c),on=(-u-tn)/(2*c);ar>=0&&ar<=1&&(l[Ct++]=ar),on>=0&&on<=1&&(l[Ct++]=on)}}return Ct}function cubicSubdivide(t,n,a,s,l,u){var c=(n-t)*l+t,d=(a-n)*l+n,Ct=(s-a)*l+a,ar=(d-c)*l+c,en=(Ct-d)*l+d,tn=(en-ar)*l+ar;u[0]=t,u[1]=c,u[2]=ar,u[3]=tn,u[4]=tn,u[5]=en,u[6]=Ct,u[7]=s}function cubicProjectPoint(t,n,a,s,l,u,c,d,Ct,ar,en){var tn,on=.005,cn=1/0,dn,Cn,In,ix;_v0[0]=Ct,_v0[1]=ar;for(var ax=0;ax<1;ax+=.05)_v1[0]=cubicAt(t,a,l,c,ax),_v1[1]=cubicAt(n,s,u,d,ax),In=distSquare(_v0,_v1),In<cn&&(tn=ax,cn=In);cn=1/0;for(var ox=0;ox<32&&!(on<EPSILON_NUMERIC);ox++)dn=tn-on,Cn=tn+on,_v1[0]=cubicAt(t,a,l,c,dn),_v1[1]=cubicAt(n,s,u,d,dn),In=distSquare(_v1,_v0),dn>=0&&In<cn?(tn=dn,cn=In):(_v2[0]=cubicAt(t,a,l,c,Cn),_v2[1]=cubicAt(n,s,u,d,Cn),ix=distSquare(_v2,_v0),Cn<=1&&ix<cn?(tn=Cn,cn=ix):on*=.5);return en&&(en[0]=cubicAt(t,a,l,c,tn),en[1]=cubicAt(n,s,u,d,tn)),mathSqrt$3(cn)}function cubicLength(t,n,a,s,l,u,c,d,Ct){for(var ar=t,en=n,tn=0,on=1/Ct,cn=1;cn<=Ct;cn++){var dn=cn*on,Cn=cubicAt(t,a,l,c,dn),In=cubicAt(n,s,u,d,dn),ix=Cn-ar,ax=In-en;tn+=Math.sqrt(ix*ix+ax*ax),ar=Cn,en=In}return tn}function quadraticAt$1(t,n,a,s){var l=1-s;return l*(l*t+2*s*n)+s*s*a}function quadraticDerivativeAt(t,n,a,s){return 2*((1-s)*(n-t)+s*(a-n))}function quadraticRootAt(t,n,a,s,l){var u=t-2*n+a,c=2*(n-t),d=t-s,Ct=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var ar=-d/c;ar>=0&&ar<=1&&(l[Ct++]=ar)}}else{var en=c*c-4*u*d;if(isAroundZero$1(en)){var ar=-c/(2*u);ar>=0&&ar<=1&&(l[Ct++]=ar)}else if(en>0){var tn=mathSqrt$3(en),ar=(-c+tn)/(2*u),on=(-c-tn)/(2*u);ar>=0&&ar<=1&&(l[Ct++]=ar),on>=0&&on<=1&&(l[Ct++]=on)}}return Ct}function quadraticExtremum(t,n,a){var s=t+a-2*n;return s===0?.5:(t-n)/s}function quadraticSubdivide(t,n,a,s,l){var u=(n-t)*s+t,c=(a-n)*s+n,d=(c-u)*s+u;l[0]=t,l[1]=u,l[2]=d,l[3]=d,l[4]=c,l[5]=a}function quadraticProjectPoint(t,n,a,s,l,u,c,d,Ct){var ar,en=.005,tn=1/0;_v0[0]=c,_v0[1]=d;for(var on=0;on<1;on+=.05){_v1[0]=quadraticAt$1(t,a,l,on),_v1[1]=quadraticAt$1(n,s,u,on);var cn=distSquare(_v0,_v1);cn<tn&&(ar=on,tn=cn)}tn=1/0;for(var dn=0;dn<32&&!(en<EPSILON_NUMERIC);dn++){var Cn=ar-en,In=ar+en;_v1[0]=quadraticAt$1(t,a,l,Cn),_v1[1]=quadraticAt$1(n,s,u,Cn);var cn=distSquare(_v1,_v0);if(Cn>=0&&cn<tn)ar=Cn,tn=cn;else{_v2[0]=quadraticAt$1(t,a,l,In),_v2[1]=quadraticAt$1(n,s,u,In);var ix=distSquare(_v2,_v0);In<=1&&ix<tn?(ar=In,tn=ix):en*=.5}}return Ct&&(Ct[0]=quadraticAt$1(t,a,l,ar),Ct[1]=quadraticAt$1(n,s,u,ar)),mathSqrt$3(tn)}function quadraticLength(t,n,a,s,l,u,c){for(var d=t,Ct=n,ar=0,en=1/c,tn=1;tn<=c;tn++){var on=tn*en,cn=quadraticAt$1(t,a,l,on),dn=quadraticAt$1(n,s,u,on),Cn=cn-d,In=dn-Ct;ar+=Math.sqrt(Cn*Cn+In*In),d=cn,Ct=dn}return ar}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(t){var n=t&&regexp.exec(t);if(n){var a=n[1].split(","),s=+trim$1(a[0]),l=+trim$1(a[1]),u=+trim$1(a[2]),c=+trim$1(a[3]);if(isNaN(s+l+u+c))return;var d=[];return function(Ct){return Ct<=0?0:Ct>=1?1:cubicRootAt(0,s,u,1,Ct,d)&&cubicAt(0,l,c,1,d[0])}}}var Clip=(function(){function t(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return t.prototype.step=function(n,a){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=a;return}var s=this._life,l=n-this._startTime-this._pausedTime,u=l/s;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,d=c?c(u):u;if(this.onframe(d),u===1)if(this.loop){var Ct=l%s;this._startTime=n-Ct,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction$1(n)?n:easingFuncs[n]||createCubicEasingFunc(n)},t})(),Entry=(function(){function t(n){this.value=n}return t})(),LinkedList=(function(){function t(){this._len=0}return t.prototype.insert=function(n){var a=new Entry(n);return this.insertEntry(a),a},t.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},t.prototype.remove=function(n){var a=n.prev,s=n.next;a?a.next=s:this.head=s,s?s.prev=a:this.tail=a,n.next=n.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t})(),LRU=(function(){function t(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return t.prototype.put=function(n,a){var s=this._list,l=this._map,u=null;if(l[n]==null){var c=s.len(),d=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var Ct=s.head;s.remove(Ct),delete l[Ct.key],u=Ct.value,this._lastRemovedEntry=Ct}d?d.value=a:d=new Entry(a),d.key=n,s.insertEntry(d),l[n]=d}return u},t.prototype.get=function(n){var a=this._map[n],s=this._list;if(a!=null)return a!==s.tail&&(s.remove(a),s.insertEntry(a)),a.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t})(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(t){return t=Math.round(t),t<0?0:t>255?255:t}function clampCssAngle(t){return t=Math.round(t),t<0?0:t>360?360:t}function clampCssFloat(t){return t<0?0:t>1?1:t}function parseCssInt(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(t,n,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?t+(n-t)*a*6:a*2<1?n:a*3<2?t+(n-t)*(2/3-a)*6:t}function lerpNumber(t,n,a){return t+(n-t)*a}function setRgba(t,n,a,s,l){return t[0]=n,t[1]=a,t[2]=s,t[3]=l,t}function copyRgba(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(t,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(t,lastRemovedArr||n.slice())}function parse(t,n){if(t){n=n||[];var a=colorCache.get(t);if(a)return copyRgba(n,a);t=t+"";var s=t.replace(/ /g,"").toLowerCase();if(s in kCSSColorTable)return copyRgba(n,kCSSColorTable[s]),putToCache(t,n),n;var l=s.length;if(s.charAt(0)==="#"){if(l===4||l===5){var u=parseInt(s.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,l===5?parseInt(s.slice(4),16)/15:1),putToCache(t,n),n}else if(l===7||l===9){var u=parseInt(s.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&16711680)>>16,(u&65280)>>8,u&255,l===9?parseInt(s.slice(7),16)/255:1),putToCache(t,n),n}return}var c=s.indexOf("("),d=s.indexOf(")");if(c!==-1&&d+1===l){var Ct=s.substr(0,c),ar=s.substr(c+1,d-(c+1)).split(","),en=1;switch(Ct){case"rgba":if(ar.length!==4)return ar.length===3?setRgba(n,+ar[0],+ar[1],+ar[2],1):setRgba(n,0,0,0,1);en=parseCssFloat(ar.pop());case"rgb":if(ar.length>=3)return setRgba(n,parseCssInt(ar[0]),parseCssInt(ar[1]),parseCssInt(ar[2]),ar.length===3?en:parseCssFloat(ar[3])),putToCache(t,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(ar.length!==4){setRgba(n,0,0,0,1);return}return ar[3]=parseCssFloat(ar[3]),hsla2rgba(ar,n),putToCache(t,n),n;case"hsl":if(ar.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(ar,n),putToCache(t,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(t,n){var a=(parseFloat(t[0])%360+360)%360/360,s=parseCssFloat(t[1]),l=parseCssFloat(t[2]),u=l<=.5?l*(s+1):l+s-l*s,c=l*2-u;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(c,u,a+1/3)*255),clampCssByte(cssHueToRgb(c,u,a)*255),clampCssByte(cssHueToRgb(c,u,a-1/3)*255),1),t.length===4&&(n[3]=t[3]),n}function rgba2hsla(t){if(t){var n=t[0]/255,a=t[1]/255,s=t[2]/255,l=Math.min(n,a,s),u=Math.max(n,a,s),c=u-l,d=(u+l)/2,Ct,ar;if(c===0)Ct=0,ar=0;else{d<.5?ar=c/(u+l):ar=c/(2-u-l);var en=((u-n)/6+c/2)/c,tn=((u-a)/6+c/2)/c,on=((u-s)/6+c/2)/c;n===u?Ct=on-tn:a===u?Ct=1/3+en-on:s===u&&(Ct=2/3+tn-en),Ct<0&&(Ct+=1),Ct>1&&(Ct-=1)}var cn=[Ct*360,ar,d];return t[3]!=null&&cn.push(t[3]),cn}}function lift(t,n){var a=parse(t);if(a){for(var s=0;s<3;s++)n<0?a[s]=a[s]*(1-n)|0:a[s]=(255-a[s])*n+a[s]|0,a[s]>255?a[s]=255:a[s]<0&&(a[s]=0);return stringify(a,a.length===4?"rgba":"rgb")}}function toHex(t){var n=parse(t);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function fastLerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){a=a||[];var s=t*(n.length-1),l=Math.floor(s),u=Math.ceil(s),c=n[l],d=n[u],Ct=s-l;return a[0]=clampCssByte(lerpNumber(c[0],d[0],Ct)),a[1]=clampCssByte(lerpNumber(c[1],d[1],Ct)),a[2]=clampCssByte(lerpNumber(c[2],d[2],Ct)),a[3]=clampCssFloat(lerpNumber(c[3],d[3],Ct)),a}}var fastMapToColor=fastLerp;function lerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){var s=t*(n.length-1),l=Math.floor(s),u=Math.ceil(s),c=parse(n[l]),d=parse(n[u]),Ct=s-l,ar=stringify([clampCssByte(lerpNumber(c[0],d[0],Ct)),clampCssByte(lerpNumber(c[1],d[1],Ct)),clampCssByte(lerpNumber(c[2],d[2],Ct)),clampCssFloat(lerpNumber(c[3],d[3],Ct))],"rgba");return a?{color:ar,leftIndex:l,rightIndex:u,value:s}:ar}}var mapToColor=lerp;function modifyHSL(t,n,a,s){var l=parse(t);if(t)return l=rgba2hsla(l),n!=null&&(l[0]=clampCssAngle(n)),a!=null&&(l[1]=parseCssFloat(a)),s!=null&&(l[2]=parseCssFloat(s)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(t,n){var a=parse(t);if(a&&n!=null)return a[3]=clampCssFloat(n),stringify(a,"rgba")}function stringify(t,n){if(!(!t||!t.length)){var a=t[0]+","+t[1]+","+t[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(a+=","+t[3]),n+"("+a+")"}}function lum(t,n){var a=parse(t);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*n:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(t){if(isString$1(t)){var n=liftedColorCache.get(t);return n||(n=lift(t,-.1),liftedColorCache.put(t,n)),n}else if(isGradientObject(t)){var a=extend({},t);return a.colorStops=map$1(t.colorStops,function(s){return{offset:s.offset,color:lift(s.color,-.1)}}),a}return t}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(t){var n;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var a=parse(t);a&&(t="rgb("+a[0]+","+a[1]+","+a[2]+")",n=a[3])}return{color:t,opacity:n??1}}var EPSILON$3=1e-4;function isAroundZero(t){return t<EPSILON$3&&t>-EPSILON$3}function round3(t){return mathRound$1(t*1e3)/1e3}function round4(t){return mathRound$1(t*1e4)/1e4}function getMatrixStr(t){return"matrix("+round3(t[0])+","+round3(t[1])+","+round3(t[2])+","+round3(t[3])+","+round4(t[4])+","+round4(t[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(t,n,a){return a==="top"?t+=n/2:a==="bottom"&&(t-=n/2),t}function hasShadow(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function getShadowKey(t){var n=t.style,a=t.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),a[0],a[1]].join(",")}function isImagePattern(t){return t&&!!t.image}function isSVGPattern(t){return t&&!!t.svgElement}function isPattern(t){return isImagePattern(t)||isSVGPattern(t)}function isLinearGradient(t){return t.type==="linear"}function isRadialGradient(t){return t.type==="radial"}function isGradient(t){return t&&(t.type==="linear"||t.type==="radial")}function getIdURL(t){return"url(#"+t+")"}function getPathPrecision(t){var n=t.getGlobalScale(),a=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(a)/Math.log(10)),1)}function getSRTTransformString(t){var n=t.x||0,a=t.y||0,s=(t.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(t.scaleX,1),u=retrieve2(t.scaleY,1),c=t.skewX||0,d=t.skewY||0,Ct=[];return(n||a)&&Ct.push("translate("+n+"px,"+a+"px)"),s&&Ct.push("rotate("+s+")"),(l!==1||u!==1)&&Ct.push("scale("+l+","+u+")"),(c||d)&&Ct.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(d*RADIAN_TO_DEGREE)+"deg)"),Ct.join(" ")}var encodeBase64=(function(){return env.hasGlobalWindow&&isFunction$1(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}})(),arraySlice=Array.prototype.slice;function interpolateNumber$1(t,n,a){return(n-t)*a+t}function interpolate1DArray(t,n,a,s){for(var l=n.length,u=0;u<l;u++)t[u]=interpolateNumber$1(n[u],a[u],s);return t}function interpolate2DArray(t,n,a,s){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){t[c]||(t[c]=[]);for(var d=0;d<u;d++)t[c][d]=interpolateNumber$1(n[c][d],a[c][d],s)}return t}function add1DArray(t,n,a,s){for(var l=n.length,u=0;u<l;u++)t[u]=n[u]+a[u]*s;return t}function add2DArray(t,n,a,s){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){t[c]||(t[c]=[]);for(var d=0;d<u;d++)t[c][d]=n[c][d]+a[c][d]*s}return t}function fillColorStops(t,n){for(var a=t.length,s=n.length,l=a>s?n:t,u=Math.min(a,s),c=l[u-1]||{color:[0,0,0,0],offset:0},d=u;d<Math.max(a,s);d++)l.push({offset:c.offset,color:c.color.slice()})}function fillArray(t,n,a){var s=t,l=n;if(!(!s.push||!l.push)){var u=s.length,c=l.length;if(u!==c){var d=u>c;if(d)s.length=c;else for(var Ct=u;Ct<c;Ct++)s.push(a===1?l[Ct]:arraySlice.call(l[Ct]))}for(var ar=s[0]&&s[0].length,Ct=0;Ct<s.length;Ct++)if(a===1)isNaN(s[Ct])&&(s[Ct]=l[Ct]);else for(var en=0;en<ar;en++)isNaN(s[Ct][en])&&(s[Ct][en]=l[Ct][en])}}function cloneValue(t){if(isArrayLike(t)){var n=t.length;if(isArrayLike(t[0])){for(var a=[],s=0;s<n;s++)a.push(arraySlice.call(t[s]));return a}return arraySlice.call(t)}return t}function rgba2String(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function guessArrayDim(t){return isArrayLike(t&&t[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(t){return t===VALUE_TYPE_LINEAR_GRADIENT||t===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(t){return t===VALUE_TYPE_1D_ARRAY||t===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=(function(){function t(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(n,a,s){this._needsSort=!0;var l=this.keyframes,u=l.length,c=!1,d=VALUE_TYPE_UNKOWN,Ct=a;if(isArrayLike(a)){var ar=guessArrayDim(a);d=ar,(ar===1&&!isNumber(a[0])||ar===2&&!isNumber(a[0][0]))&&(c=!0)}else if(isNumber(a)&&!eqNaN(a))d=VALUE_TYPE_NUMBER;else if(isString$1(a))if(!isNaN(+a))d=VALUE_TYPE_NUMBER;else{var en=parse(a);en&&(Ct=en,d=VALUE_TYPE_COLOR)}else if(isGradientObject(a)){var tn=extend({},Ct);tn.colorStops=map$1(a.colorStops,function(cn){return{offset:cn.offset,color:parse(cn.color)}}),isLinearGradient(a)?d=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(a)&&(d=VALUE_TYPE_RADIAL_GRADIENT),Ct=tn}u===0?this.valType=d:(d!==this.valType||d===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var on={time:n,value:Ct,rawValue:a,percent:0};return s&&(on.easing=s,on.easingFunc=isFunction$1(s)?s:easingFuncs[s]||createCubicEasingFunc(s)),l.push(on),on},t.prototype.prepare=function(n,a){var s=this.keyframes;this._needsSort&&s.sort(function(Cn,In){return Cn.time-In.time});for(var l=this.valType,u=s.length,c=s[u-1],d=this.discrete,Ct=isArrayValueType(l),ar=isGradientValueType(l),en=0;en<u;en++){var tn=s[en],on=tn.value,cn=c.value;tn.percent=tn.time/n,d||(Ct&&en!==u-1?fillArray(on,cn,l):ar&&fillColorStops(on.colorStops,cn.colorStops))}if(!d&&l!==VALUE_TYPE_RADIAL_GRADIENT&&a&&this.needsAnimate()&&a.needsAnimate()&&l===a.valType&&!a._finished){this._additiveTrack=a;for(var dn=s[0].value,en=0;en<u;en++)l===VALUE_TYPE_NUMBER?s[en].additiveValue=s[en].value-dn:l===VALUE_TYPE_COLOR?s[en].additiveValue=add1DArray([],s[en].value,dn,-1):isArrayValueType(l)&&(s[en].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],s[en].value,dn,-1):add2DArray([],s[en].value,dn,-1))}},t.prototype.step=function(n,a){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var s=this._additiveTrack!=null,l=s?"additiveValue":"value",u=this.valType,c=this.keyframes,d=c.length,Ct=this.propName,ar=u===VALUE_TYPE_COLOR,en,tn=this._lastFr,on=Math.min,cn,dn;if(d===1)cn=dn=c[0];else{if(a<0)en=0;else if(a<this._lastFrP){var Cn=on(tn+1,d-1);for(en=Cn;en>=0&&!(c[en].percent<=a);en--);en=on(en,d-2)}else{for(en=tn;en<d&&!(c[en].percent>a);en++);en=on(en-1,d-2)}dn=c[en+1],cn=c[en]}if(cn&&dn){this._lastFr=en,this._lastFrP=a;var In=dn.percent-cn.percent,ix=In===0?1:on((a-cn.percent)/In,1);dn.easingFunc&&(ix=dn.easingFunc(ix));var ax=s?this._additiveValue:ar?tmpRgba:n[Ct];if((isArrayValueType(u)||ar)&&!ax&&(ax=this._additiveValue=[]),this.discrete)n[Ct]=ix<1?cn.rawValue:dn.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(ax,cn[l],dn[l],ix):interpolate2DArray(ax,cn[l],dn[l],ix);else if(isGradientValueType(u)){var ox=cn[l],sx=dn[l],ux=u===VALUE_TYPE_LINEAR_GRADIENT;n[Ct]={type:ux?"linear":"radial",x:interpolateNumber$1(ox.x,sx.x,ix),y:interpolateNumber$1(ox.y,sx.y,ix),colorStops:map$1(ox.colorStops,function(hx,gx){var fx=sx.colorStops[gx];return{offset:interpolateNumber$1(hx.offset,fx.offset,ix),color:rgba2String(interpolate1DArray([],hx.color,fx.color,ix))}}),global:sx.global},ux?(n[Ct].x2=interpolateNumber$1(ox.x2,sx.x2,ix),n[Ct].y2=interpolateNumber$1(ox.y2,sx.y2,ix)):n[Ct].r=interpolateNumber$1(ox.r,sx.r,ix)}else if(ar)interpolate1DArray(ax,cn[l],dn[l],ix),s||(n[Ct]=rgba2String(ax));else{var cx=interpolateNumber$1(cn[l],dn[l],ix);s?this._additiveValue=cx:n[Ct]=cx}s&&this._addToTarget(n)}}},t.prototype._addToTarget=function(n){var a=this.valType,s=this.propName,l=this._additiveValue;a===VALUE_TYPE_NUMBER?n[s]=n[s]+l:a===VALUE_TYPE_COLOR?(parse(n[s],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),n[s]=rgba2String(tmpRgba)):a===VALUE_TYPE_1D_ARRAY?add1DArray(n[s],n[s],l,1):a===VALUE_TYPE_2D_ARRAY&&add2DArray(n[s],n[s],l,1)},t})(),Animator=(function(){function t(n,a,s,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=a,a&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=s}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(n){this._target=n},t.prototype.when=function(n,a,s){return this.whenWithKeys(n,a,keys(a),s)},t.prototype.whenWithKeys=function(n,a,s,l){for(var u=this._tracks,c=0;c<s.length;c++){var d=s[c],Ct=u[d];if(!Ct){Ct=u[d]=new Track(d);var ar=void 0,en=this._getAdditiveTrack(d);if(en){var tn=en.keyframes,on=tn[tn.length-1];ar=on&&on.value,en.valType===VALUE_TYPE_COLOR&&ar&&(ar=rgba2String(ar))}else ar=this._target[d];if(ar==null)continue;n>0&&Ct.addKeyframe(0,cloneValue(ar),l),this._trackKeys.push(d)}Ct.addKeyframe(n,cloneValue(a[d]),l)}return this._maxTime=Math.max(this._maxTime,n),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var a=n.length,s=0;s<a;s++)n[s].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,a=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,a)for(var s=0;s<a.length;s++)a[s].call(this)},t.prototype._setTracksFinished=function(){for(var n=this._tracks,a=this._trackKeys,s=0;s<a.length;s++)n[a[s]].setFinished()},t.prototype._getAdditiveTrack=function(n){var a,s=this._additiveAnimators;if(s)for(var l=0;l<s.length;l++){var u=s[l].getTrack(n);u&&(a=u)}return a},t.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var a=this,s=[],l=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],d=this._tracks[c],Ct=this._getAdditiveTrack(c),ar=d.keyframes,en=ar.length;if(d.prepare(l,Ct),d.needsAnimate())if(!this._allowDiscrete&&d.discrete){var tn=ar[en-1];tn&&(a._target[d.propName]=tn.rawValue),d.setFinished()}else s.push(d)}if(s.length||this._force){var on=new Clip({life:l,loop:this._loop,delay:this._delay||0,onframe:function(cn){a._started=2;var dn=a._additiveAnimators;if(dn){for(var Cn=!1,In=0;In<dn.length;In++)if(dn[In]._clip){Cn=!0;break}Cn||(a._additiveAnimators=null)}for(var In=0;In<s.length;In++)s[In].step(a._target,cn);var ix=a._onframeCbs;if(ix)for(var In=0;In<ix.length;In++)ix[In](a._target,cn)},ondestroy:function(){a._doneCallback()}});this._clip=on,this.animation&&this.animation.addClip(on),n&&on.setEasing(n)}else this._doneCallback();return this}},t.prototype.stop=function(n){if(this._clip){var a=this._clip;n&&a.onframe(1),this._abortedCallback()}},t.prototype.delay=function(n){return this._delay=n,this},t.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},t.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},t.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(n){return this._tracks[n]},t.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(a){return n._tracks[a]})},t.prototype.stopTracks=function(n,a){if(!n.length||!this._clip)return!0;for(var s=this._tracks,l=this._trackKeys,u=0;u<n.length;u++){var c=s[n[u]];c&&!c.isFinished()&&(a?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var d=!0,u=0;u<l.length;u++)if(!s[l[u]].isFinished()){d=!1;break}return d&&this._abortedCallback(),d},t.prototype.saveTo=function(n,a,s){if(n){a=a||this._trackKeys;for(var l=0;l<a.length;l++){var u=a[l],c=this._tracks[u];if(!(!c||c.isFinished())){var d=c.keyframes,Ct=d[s?0:d.length-1];Ct&&(n[u]=cloneValue(Ct.rawValue))}}}},t.prototype.__changeFinalValue=function(n,a){a=a||keys(n);for(var s=0;s<a.length;s++){var l=a[s],u=this._tracks[l];if(u){var c=u.keyframes;if(c.length>1){var d=c.pop();u.addKeyframe(d.time,n[l]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},t})();function getTime(){return new Date().getTime()}var Animation=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s._running=!1,s._time=0,s._pausedTime=0,s._pauseStart=0,s._paused=!1,a=a||{},s.stage=a.stage||{},s}return n.prototype.addClip=function(a){a.animation&&this.removeClip(a),this._head?(this._tail.next=a,a.prev=this._tail,a.next=null,this._tail=a):this._head=this._tail=a,a.animation=this},n.prototype.addAnimator=function(a){a.animation=this;var s=a.getClip();s&&this.addClip(s)},n.prototype.removeClip=function(a){if(a.animation){var s=a.prev,l=a.next;s?s.next=l:this._head=l,l?l.prev=s:this._tail=s,a.next=a.prev=a.animation=null}},n.prototype.removeAnimator=function(a){var s=a.getClip();s&&this.removeClip(s),a.animation=null},n.prototype.update=function(a){for(var s=getTime()-this._pausedTime,l=s-this._time,u=this._head;u;){var c=u.next,d=u.step(s,l);d&&(u.ondestroy(),this.removeClip(u)),u=c}this._time=s,a||(this.trigger("frame",l),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var a=this;this._running=!0;function s(){a._running&&(requestAnimationFrame$1(s),!a._paused&&a.update())}requestAnimationFrame$1(s)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var a=this._head;a;){var s=a.next;a.prev=a.next=a.animation=null,a=s}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(a,s){s=s||{},this.start();var l=new Animator(a,s.loop);return this.addAnimator(l),l},n})(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=(function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],a={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},s=map$1(t,function(l){var u=l.replace("mouse","pointer");return a.hasOwnProperty(u)?u:l});return{mouse:t,touch:n,pointer:s}})(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(t){var n=t.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function markTouch(t){t&&(t.zrByTouch=!0)}function normalizeGlobalEvent(t,n){return normalizeEvent(t.dom,new FakeGlobalEvent(t,n),!0)}function isLocalEl(t,n){for(var a=n,s=!1;a&&a.nodeType!==9&&!(s=a.domBelongToZr||a!==n&&a===t.painterRoot);)a=a.parentNode;return s}var FakeGlobalEvent=(function(){function t(n,a){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=a.type,this.target=this.currentTarget=n.dom,this.pointerType=a.pointerType,this.clientX=a.clientX,this.clientY=a.clientY}return t})(),localDOMHandlers={mousedown:function(t){t=normalizeEvent(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=normalizeEvent(this.dom,t);var n=this.__mayPointerCapture;n&&(t.zrX!==n[0]||t.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=normalizeEvent(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=normalizeEvent(this.dom,t);var n=t.toElement||t.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){wheelEventSupported=!0,t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){wheelEventSupported||(t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),localDOMHandlers.mousemove.call(this,t),localDOMHandlers.mousedown.call(this,t)},touchmove:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"change"),localDOMHandlers.mousemove.call(this,t)},touchend:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"end"),localDOMHandlers.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,t)},pointerdown:function(t){localDOMHandlers.mousedown.call(this,t)},pointermove:function(t){isPointerFromTouch(t)||localDOMHandlers.mousemove.call(this,t)},pointerup:function(t){localDOMHandlers.mouseup.call(this,t)},pointerout:function(t){isPointerFromTouch(t)||localDOMHandlers.mouseout.call(this,t)}};each$f(["click","dblclick","contextmenu"],function(t){localDOMHandlers[t]=function(n){n=normalizeEvent(this.dom,n),this.trigger(t,n)}});var globalDOMHandlers={pointermove:function(t){isPointerFromTouch(t)||globalDOMHandlers.mousemove.call(this,t)},pointerup:function(t){globalDOMHandlers.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),n&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function mountLocalDOMEventListeners(t,n){var a=n.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(s){mountSingleDOMEventListener(n,s,function(l){a[s].call(t,l)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(s){mountSingleDOMEventListener(n,s,function(l){a[s].call(t,l),setTouchTimer(n)})}),each$f(localNativeListenerNames.mouse,function(s){mountSingleDOMEventListener(n,s,function(l){l=getNativeEvent(l),n.touching||a[s].call(t,l)})}))}function mountGlobalDOMEventListeners(t,n){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,a):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,a);function a(s){function l(u){u=getNativeEvent(u),isLocalEl(t,u.target)||(u=normalizeGlobalEvent(t,u),n.domHandlers[s].call(t,u))}mountSingleDOMEventListener(n,s,l,{capture:!0})}}function mountSingleDOMEventListener(t,n,a,s){t.mounted[n]=a,t.listenerOpts[n]=s,addEventListener(t.domTarget,n,a,s)}function unmountDOMEventListeners(t){var n=t.mounted;for(var a in n)n.hasOwnProperty(a)&&removeEventListener(t.domTarget,a,n[a],t.listenerOpts[a]);t.mounted={}}var DOMHandlerScope=(function(){function t(n,a){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=a}return t})(),HandlerDomProxy=(function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this;return l.__pointerCapturing=!1,l.dom=a,l.painterRoot=s,l._localHandlerScope=new DOMHandlerScope(a,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},n.prototype.__togglePointerCapture=function(a){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+a){this.__pointerCapturing=a;var s=this._globalHandlerScope;a?mountGlobalDOMEventListeners(this,s):unmountDOMEventListeners(s)}},n})(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(t){return t>EPSILON$2||t<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=(function(){function t(){}return t.prototype.getLocalTransform=function(n){return t.getLocalTransform(this,n)},t.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},t.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},t.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},t.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},t.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},t.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,a=this.needLocalTransform(),s=this.transform;if(!(a||n)){s&&(mIdentity(s),this.invTransform=null);return}s=s||create$1(),a?this.getLocalTransform(s):mIdentity(s),n&&(a?mul(s,n,s):copy(s,n)),this.transform=s,this._resolveGlobalScaleRatio(s)},t.prototype._resolveGlobalScaleRatio=function(n){var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(scaleTmp);var s=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-s)*a+s)/scaleTmp[0]||0,c=((scaleTmp[1]-l)*a+l)/scaleTmp[1]||0;n[0]*=u,n[1]*=u,n[2]*=c,n[3]*=c}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,n)},t.prototype.getComputedTransform=function(){for(var n=this,a=[];n;)a.push(n),n=n.parent;for(;n=a.pop();)n.updateTransform();return this.transform},t.prototype.setLocalTransform=function(n){if(n){var a=n[0]*n[0]+n[1]*n[1],s=n[2]*n[2]+n[3]*n[3],l=Math.atan2(n[1],n[0]),u=Math.PI/2+l-Math.atan2(n[3],n[2]);s=Math.sqrt(s)*Math.cos(u),a=Math.sqrt(a),this.skewX=u,this.skewY=0,this.rotation=-l,this.x=+n[4],this.y=+n[5],this.scaleX=a,this.scaleY=s,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,a=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create$1(),mul(tmpTransform,n.invTransform,a),a=tmpTransform);var s=this.originX,l=this.originY;(s||l)&&(originTransform[4]=s,originTransform[5]=l,mul(tmpTransform,a,originTransform),tmpTransform[4]-=s,tmpTransform[5]-=l,a=tmpTransform),this.setLocalTransform(a)}},t.prototype.getGlobalScale=function(n){var a=this.transform;return n=n||[],a?(n[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n[1]=Math.sqrt(a[2]*a[2]+a[3]*a[3]),a[0]<0&&(n[0]=-n[0]),a[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},t.prototype.transformCoordToLocal=function(n,a){var s=[n,a],l=this.invTransform;return l&&applyTransform$1(s,s,l),s},t.prototype.transformCoordToGlobal=function(n,a){var s=[n,a],l=this.transform;return l&&applyTransform$1(s,s,l),s},t.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},t.prototype.copyTransform=function(n){copyTransform(this,n)},t.getLocalTransform=function(n,a){a=a||[];var s=n.originX||0,l=n.originY||0,u=n.scaleX,c=n.scaleY,d=n.anchorX,Ct=n.anchorY,ar=n.rotation||0,en=n.x,tn=n.y,on=n.skewX?Math.tan(n.skewX):0,cn=n.skewY?Math.tan(-n.skewY):0;if(s||l||d||Ct){var dn=s+d,Cn=l+Ct;a[4]=-dn*u-on*Cn*c,a[5]=-Cn*c-cn*dn*u}else a[4]=a[5]=0;return a[0]=u,a[3]=c,a[1]=cn*u,a[2]=on*c,ar&&rotate(a,a,ar),a[4]+=s+en,a[5]+=l+tn,a},t.initDefaultProps=(function(){var n=t.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0})(),t})(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(t,n){for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var s=TRANSFORMABLE_PROPS[a];t[s]=n[s]}}var textWidthCache={};function getWidth(t,n){n=n||DEFAULT_FONT;var a=textWidthCache[n];a||(a=textWidthCache[n]=new LRU(500));var s=a.get(t);return s==null&&(s=platformApi.measureText(t,n).width,a.put(t,s)),s}function innerGetBoundingRect(t,n,a,s){var l=getWidth(t,n),u=getLineHeight(n),c=adjustTextX(0,l,a),d=adjustTextY(0,u,s),Ct=new BoundingRect(c,d,l,u);return Ct}function getBoundingRect(t,n,a,s){var l=((t||"")+"").split(`
`),u=l.length;if(u===1)return innerGetBoundingRect(l[0],n,a,s);for(var c=new BoundingRect(0,0,0,0),d=0;d<l.length;d++){var Ct=innerGetBoundingRect(l[d],n,a,s);d===0?c.copy(Ct):c.union(Ct)}return c}function adjustTextX(t,n,a){return a==="right"?t-=n:a==="center"&&(t-=n/2),t}function adjustTextY(t,n,a){return a==="middle"?t-=n/2:a==="bottom"&&(t-=n),t}function getLineHeight(t){return getWidth("",t)}function parsePercent$1(t,n){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*n:parseFloat(t):t}function calculateTextPosition(t,n,a){var s=n.position||"inside",l=n.distance!=null?n.distance:5,u=a.height,c=a.width,d=u/2,Ct=a.x,ar=a.y,en="left",tn="top";if(s instanceof Array)Ct+=parsePercent$1(s[0],a.width),ar+=parsePercent$1(s[1],a.height),en=null,tn=null;else switch(s){case"left":Ct-=l,ar+=d,en="right",tn="middle";break;case"right":Ct+=l+c,ar+=d,tn="middle";break;case"top":Ct+=c/2,ar-=l,en="center",tn="bottom";break;case"bottom":Ct+=c/2,ar+=u+l,en="center";break;case"inside":Ct+=c/2,ar+=d,en="center",tn="middle";break;case"insideLeft":Ct+=l,ar+=d,tn="middle";break;case"insideRight":Ct+=c-l,ar+=d,en="right",tn="middle";break;case"insideTop":Ct+=c/2,ar+=l,en="center";break;case"insideBottom":Ct+=c/2,ar+=u-l,en="center",tn="bottom";break;case"insideTopLeft":Ct+=l,ar+=l;break;case"insideTopRight":Ct+=c-l,ar+=l,en="right";break;case"insideBottomLeft":Ct+=l,ar+=u-l,tn="bottom";break;case"insideBottomRight":Ct+=c-l,ar+=u-l,en="right",tn="bottom";break}return t=t||{},t.x=Ct,t.y=ar,t.align=en,t.verticalAlign=tn,t}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=!0,t},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=(function(){function t(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return t.prototype._init=function(n){this.attr(n)},t.prototype.drift=function(n,a,s){switch(this.draggable){case"horizontal":a=0;break;case"vertical":n=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=n,l[5]+=a,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(n){var a=this._textContent;if(a&&(!a.ignore||n)){this.textConfig||(this.textConfig={});var s=this.textConfig,l=s.local,u=a.innerTransformable,c=void 0,d=void 0,Ct=!1;u.parent=l?this:null;var ar=!1;if(u.copyTransform(a),s.position!=null){var en=tmpBoundingRect;s.layoutRect?en.copy(s.layoutRect):en.copy(this.getBoundingRect()),l||en.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,s,en):calculateTextPosition(tmpTextPosCalcRes,s,en),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,d=tmpTextPosCalcRes.verticalAlign;var tn=s.origin;if(tn&&s.rotation!=null){var on=void 0,cn=void 0;tn==="center"?(on=en.width*.5,cn=en.height*.5):(on=parsePercent$1(tn[0],en.width),cn=parsePercent$1(tn[1],en.height)),ar=!0,u.originX=-u.x+on+(l?0:en.x),u.originY=-u.y+cn+(l?0:en.y)}}s.rotation!=null&&(u.rotation=s.rotation);var dn=s.offset;dn&&(u.x+=dn[0],u.y+=dn[1],ar||(u.originX=-dn[0],u.originY=-dn[1]));var Cn=s.inside==null?typeof s.position=="string"&&s.position.indexOf("inside")>=0:s.inside,In=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ix=void 0,ax=void 0,ox=void 0;Cn&&this.canBeInsideText()?(ix=s.insideFill,ax=s.insideStroke,(ix==null||ix==="auto")&&(ix=this.getInsideTextFill()),(ax==null||ax==="auto")&&(ax=this.getInsideTextStroke(ix),ox=!0)):(ix=s.outsideFill,ax=s.outsideStroke,(ix==null||ix==="auto")&&(ix=this.getOutsideFill()),(ax==null||ax==="auto")&&(ax=this.getOutsideStroke(ix),ox=!0)),ix=ix||"#000",(ix!==In.fill||ax!==In.stroke||ox!==In.autoStroke||c!==In.align||d!==In.verticalAlign)&&(Ct=!0,In.fill=ix,In.stroke=ax,In.autoStroke=ox,In.align=c,In.verticalAlign=d,a.setDefaultTextStyle(In)),a.__dirty|=REDRAW_BIT,Ct&&a.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(n){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},t.prototype.getOutsideStroke=function(n){var a=this.__zr&&this.__zr.getBackgroundColor(),s=typeof a=="string"&&parse(a);s||(s=[255,255,255,1]);for(var l=s[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)s[c]=s[c]*l+(u?0:255)*(1-l);return s[3]=1,stringify(s,"rgba")},t.prototype.traverse=function(n,a){},t.prototype.attrKV=function(n,a){n==="textConfig"?this.setTextConfig(a):n==="textContent"?this.setTextContent(a):n==="clipPath"?this.setClipPath(a):n==="extra"?(this.extra=this.extra||{},extend(this.extra,a)):this[n]=a},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(n,a){if(typeof n=="string")this.attrKV(n,a);else if(isObject$3(n))for(var s=n,l=keys(s),u=0;u<l.length;u++){var c=l[u];this.attrKV(c,n[c])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var a=this._normalState,s=0;s<this.animators.length;s++){var l=this.animators[s],u=l.__fromStateTransition;if(!(l.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var c=l.targetName,d=c?a[c]:a;l.saveTo(d)}}},t.prototype._innerSaveToNormal=function(n){var a=this._normalState;a||(a=this._normalState={}),n.textConfig&&!a.textConfig&&(a.textConfig=this.textConfig),this._savePrimaryToNormal(n,a,PRIMARY_STATES_KEYS$1)},t.prototype._savePrimaryToNormal=function(n,a,s){for(var l=0;l<s.length;l++){var u=s[l];n[u]!=null&&!(u in a)&&(a[u]=this[u])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(n){return this.states[n]},t.prototype.ensureState=function(n){var a=this.states;return a[n]||(a[n]={}),a[n]},t.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},t.prototype.useState=function(n,a,s,l){var u=n===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&u)){var d=this.currentStates,Ct=this.stateTransition;if(!(indexOf(d,n)>=0&&(a||d.length===1))){var ar;if(this.stateProxy&&!u&&(ar=this.stateProxy(n)),ar||(ar=this.states&&this.states[n]),!ar&&!u){logError("State "+n+" not exists.");return}u||this.saveCurrentToNormalState(ar);var en=!!(ar&&ar.hoverLayer||l);en&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,ar,this._normalState,a,!s&&!this.__inHover&&Ct&&Ct.duration>0,Ct);var tn=this._textContent,on=this._textGuide;return tn&&tn.useState(n,a,s,en),on&&on.useState(n,a,s,en),u?(this.currentStates=[],this._normalState={}):a?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!en&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),ar}}},t.prototype.useStates=function(n,a,s){if(!n.length)this.clearStates();else{var l=[],u=this.currentStates,c=n.length,d=c===u.length;if(d){for(var Ct=0;Ct<c;Ct++)if(n[Ct]!==u[Ct]){d=!1;break}}if(d)return;for(var Ct=0;Ct<c;Ct++){var ar=n[Ct],en=void 0;this.stateProxy&&(en=this.stateProxy(ar,n)),en||(en=this.states[ar]),en&&l.push(en)}var tn=l[c-1],on=!!(tn&&tn.hoverLayer||s);on&&this._toggleHoverLayerFlag(!0);var cn=this._mergeStates(l),dn=this.stateTransition;this.saveCurrentToNormalState(cn),this._applyStateObj(n.join(","),cn,this._normalState,!1,!a&&!this.__inHover&&dn&&dn.duration>0,dn);var Cn=this._textContent,In=this._textGuide;Cn&&Cn.useStates(n,a,on),In&&In.useStates(n,a,on),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!on&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},t.prototype.isSilent=function(){for(var n=this.silent,a=this.parent;!n&&a;){if(a.silent){n=!0;break}a=a.parent}return n},t.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var a=this.animators[n];a.targetName&&a.changeTarget(this[a.targetName])}},t.prototype.removeState=function(n){var a=indexOf(this.currentStates,n);if(a>=0){var s=this.currentStates.slice();s.splice(a,1),this.useStates(s)}},t.prototype.replaceState=function(n,a,s){var l=this.currentStates.slice(),u=indexOf(l,n),c=indexOf(l,a)>=0;u>=0?c?l.splice(u,1):l[u]=a:s&&!c&&l.push(a),this.useStates(l)},t.prototype.toggleState=function(n,a){a?this.useState(n,!0):this.removeState(n)},t.prototype._mergeStates=function(n){for(var a={},s,l=0;l<n.length;l++){var u=n[l];extend(a,u),u.textConfig&&(s=s||{},extend(s,u.textConfig))}return s&&(a.textConfig=s),a},t.prototype._applyStateObj=function(n,a,s,l,u,c){var d=!(a&&l);a&&a.textConfig?(this.textConfig=extend({},l?this.textConfig:s.textConfig),extend(this.textConfig,a.textConfig)):d&&s.textConfig&&(this.textConfig=s.textConfig);for(var Ct={},ar=!1,en=0;en<PRIMARY_STATES_KEYS$1.length;en++){var tn=PRIMARY_STATES_KEYS$1[en],on=u&&DEFAULT_ANIMATABLE_MAP[tn];a&&a[tn]!=null?on?(ar=!0,Ct[tn]=a[tn]):this[tn]=a[tn]:d&&s[tn]!=null&&(on?(ar=!0,Ct[tn]=s[tn]):this[tn]=s[tn])}if(!u)for(var en=0;en<this.animators.length;en++){var cn=this.animators[en],dn=cn.targetName;cn.getLoop()||cn.__changeFinalValue(dn?(a||s)[dn]:a||s)}ar&&this._transitionState(n,Ct,c)},t.prototype._attachComponent=function(n){if(!(n.__zr&&!n.__hostTarget)&&n!==this){var a=this.__zr;a&&n.addSelfToZr(a),n.__zr=a,n.__hostTarget=this}},t.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},t.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(n){var a=this._textContent;a!==n&&(a&&a!==n&&this.removeTextContent(),n.innerTransformable=new Transformable,this._attachComponent(n),this._textContent=n,this.markRedraw())},t.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var a=this._textContent,s=this._textGuide;a&&(a.__inHover=n),s&&(s.__inHover=n)},t.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var a=this.animators;if(a)for(var s=0;s<a.length;s++)n.animation.addAnimator(a[s]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var a=this.animators;if(a)for(var s=0;s<a.length;s++)n.animation.removeAnimator(a[s]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},t.prototype.animate=function(n,a,s){var l=n?this[n]:this,u=new Animator(l,a,s);return n&&(u.targetName=n),this.addAnimator(u,n),u},t.prototype.addAnimator=function(n,a){var s=this.__zr,l=this;n.during(function(){l.updateDuringAnimation(a)}).done(function(){var u=l.animators,c=indexOf(u,n);c>=0&&u.splice(c,1)}),this.animators.push(n),s&&s.animation.addAnimator(n),s&&s.wakeUp()},t.prototype.updateDuringAnimation=function(n){this.markRedraw()},t.prototype.stopAnimation=function(n,a){for(var s=this.animators,l=s.length,u=[],c=0;c<l;c++){var d=s[c];!n||n===d.scope?d.stop(a):u.push(d)}return this.animators=u,this},t.prototype.animateTo=function(n,a,s){animateTo(this,n,a,s)},t.prototype.animateFrom=function(n,a,s){animateTo(this,n,a,s,!0)},t.prototype._transitionState=function(n,a,s,l){for(var u=animateTo(this,a,s,l),c=0;c<u.length;c++)u[c].__fromStateTransition=n},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=(function(){var n=t.prototype;n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;function a(s,l,u,c){Object.defineProperty(n,s,{get:function(){if(!this[l]){var Ct=this[l]=[];d(this,Ct)}return this[l]},set:function(Ct){this[u]=Ct[0],this[c]=Ct[1],this[l]=Ct,d(this,Ct)}});function d(Ct,ar){Object.defineProperty(ar,0,{get:function(){return Ct[u]},set:function(en){Ct[u]=en}}),Object.defineProperty(ar,1,{get:function(){return Ct[c]},set:function(en){Ct[c]=en}})}}Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))})(),t})();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(t,n,a,s,l){a=a||{};var u=[];animateToShallow(t,"",t,n,a,s,u,l);var c=u.length,d=!1,Ct=a.done,ar=a.aborted,en=function(){d=!0,c--,c<=0&&(d?Ct&&Ct():ar&&ar())},tn=function(){c--,c<=0&&(d?Ct&&Ct():ar&&ar())};c||Ct&&Ct(),u.length>0&&a.during&&u[0].during(function(dn,Cn){a.during(Cn)});for(var on=0;on<u.length;on++){var cn=u[on];en&&cn.done(en),tn&&cn.aborted(tn),a.force&&cn.duration(a.duration),cn.start(a.easing)}return u}function copyArrShallow(t,n,a){for(var s=0;s<a;s++)t[s]=n[s]}function is2DArray(t){return isArrayLike(t[0])}function copyValue(t,n,a){if(isArrayLike(n[a]))if(isArrayLike(t[a])||(t[a]=[]),isTypedArray(n[a])){var s=n[a].length;t[a].length!==s&&(t[a]=new n[a].constructor(s),copyArrShallow(t[a],n[a],s))}else{var l=n[a],u=t[a],c=l.length;if(is2DArray(l))for(var d=l[0].length,Ct=0;Ct<c;Ct++)u[Ct]?copyArrShallow(u[Ct],l[Ct],d):u[Ct]=Array.prototype.slice.call(l[Ct]);else copyArrShallow(u,l,c);u.length=l.length}else t[a]=n[a]}function isValueSame(t,n){return t===n||isArrayLike(t)&&isArrayLike(n)&&is1DArraySame(t,n)}function is1DArraySame(t,n){var a=t.length;if(a!==n.length)return!1;for(var s=0;s<a;s++)if(t[s]!==n[s])return!1;return!0}function animateToShallow(t,n,a,s,l,u,c,d){for(var Ct=keys(s),ar=l.duration,en=l.delay,tn=l.additive,on=l.setToFinal,cn=!isObject$3(u),dn=t.animators,Cn=[],In=0;In<Ct.length;In++){var ix=Ct[In],ax=s[ix];if(ax!=null&&a[ix]!=null&&(cn||u[ix]))if(isObject$3(ax)&&!isArrayLike(ax)&&!isGradientObject(ax)){if(n){d||(a[ix]=ax,t.updateDuringAnimation(n));continue}animateToShallow(t,ix,a[ix],ax,l,u&&u[ix],c,d)}else Cn.push(ix);else d||(a[ix]=ax,t.updateDuringAnimation(n),Cn.push(ix))}var ox=Cn.length;if(!tn&&ox)for(var sx=0;sx<dn.length;sx++){var ux=dn[sx];if(ux.targetName===n){var cx=ux.stopTracks(Cn);if(cx){var hx=indexOf(dn,ux);dn.splice(hx,1)}}}if(l.force||(Cn=filter(Cn,function(mx){return!isValueSame(s[mx],a[mx])}),ox=Cn.length),ox>0||l.force&&!c.length){var gx=void 0,fx=void 0,dx=void 0;if(d){fx={},on&&(gx={});for(var sx=0;sx<ox;sx++){var ix=Cn[sx];fx[ix]=a[ix],on?gx[ix]=s[ix]:a[ix]=s[ix]}}else if(on){dx={};for(var sx=0;sx<ox;sx++){var ix=Cn[sx];dx[ix]=cloneValue(a[ix]),copyValue(a,s,ix)}}var ux=new Animator(a,!1,!1,tn?filter(dn,function(vx){return vx.targetName===n}):null);ux.targetName=n,l.scope&&(ux.scope=l.scope),on&&gx&&ux.whenWithKeys(0,gx,Cn),dx&&ux.whenWithKeys(0,dx,Cn),ux.whenWithKeys(ar??500,d?fx:s,Cn).delay(en||0),t.addAnimator(ux,n),c.push(ux)}}var Group$3=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.isGroup=!0,s._children=[],s.attr(a),s}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(a){return this._children[a]},n.prototype.childOfName=function(a){for(var s=this._children,l=0;l<s.length;l++)if(s[l].name===a)return s[l]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},n.prototype.addBefore=function(a,s){if(a&&a!==this&&a.parent!==this&&s&&s.parent===this){var l=this._children,u=l.indexOf(s);u>=0&&(l.splice(u,0,a),this._doAdd(a))}return this},n.prototype.replace=function(a,s){var l=indexOf(this._children,a);return l>=0&&this.replaceAt(s,l),this},n.prototype.replaceAt=function(a,s){var l=this._children,u=l[s];if(a&&a!==this&&a.parent!==this&&a!==u){l[s]=a,u.parent=null;var c=this.__zr;c&&u.removeSelfFromZr(c),this._doAdd(a)}return this},n.prototype._doAdd=function(a){a.parent&&a.parent.remove(a),a.parent=this;var s=this.__zr;s&&s!==a.__zr&&a.addSelfToZr(s),s&&s.refresh()},n.prototype.remove=function(a){var s=this.__zr,l=this._children,u=indexOf(l,a);return u<0?this:(l.splice(u,1),a.parent=null,s&&a.removeSelfFromZr(s),s&&s.refresh(),this)},n.prototype.removeAll=function(){for(var a=this._children,s=this.__zr,l=0;l<a.length;l++){var u=a[l];s&&u.removeSelfFromZr(s),u.parent=null}return a.length=0,this},n.prototype.eachChild=function(a,s){for(var l=this._children,u=0;u<l.length;u++){var c=l[u];a.call(s,c,u)}return this},n.prototype.traverse=function(a,s){for(var l=0;l<this._children.length;l++){var u=this._children[l],c=a.call(s,u);u.isGroup&&!c&&u.traverse(a,s)}return this},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.addSelfToZr(a)}},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.removeSelfFromZr(a)}},n.prototype.getBoundingRect=function(a){for(var s=new BoundingRect(0,0,0,0),l=a||this._children,u=[],c=null,d=0;d<l.length;d++){var Ct=l[d];if(!(Ct.ignore||Ct.invisible)){var ar=Ct.getBoundingRect(),en=Ct.getLocalTransform(u);en?(BoundingRect.applyTransform(s,ar,en),c=c||s.clone(),c.union(s)):(c=c||ar.clone(),c.union(ar))}}return c||s},n})(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(t){delete instances$1[t]}function isDarkMode(t){if(!t)return!1;if(typeof t=="string")return lum(t,1)<DARK_MODE_THRESHOLD;if(t.colorStops){for(var n=t.colorStops,a=0,s=n.length,l=0;l<s;l++)a+=lum(n[l].color,1);return a/=s,a<DARK_MODE_THRESHOLD}return!1}var ZRender=(function(){function t(n,a,s){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,s=s||{},this.dom=a,this.id=n;var u=new Storage,c=s.renderer||"canvas";painterCtors[c]||(c=keys(painterCtors)[0]),s.useDirtyRect=s.useDirtyRect==null?!1:s.useDirtyRect;var d=new painterCtors[c](a,u,s,n),Ct=s.ssr||d.ssrOnly;this.storage=u,this.painter=d;var ar=!env.node&&!env.worker&&!Ct?new HandlerDomProxy(d.getViewportRoot(),d.root):null,en=s.useCoarsePointer,tn=en==null||en==="auto"?env.touchEventsSupported:!!en,on=44,cn;tn&&(cn=retrieve2(s.pointerSize,on)),this.handler=new Handler(u,d,ar,d.root,cn),this.animation=new Animation({stage:{update:Ct?null:function(){return l._flush(!0)}}}),Ct||this.animation.start()}return t.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},t.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(n,a){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,a),this.refresh())},t.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(n){this._darkMode=n},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(n){var a,s=getTime();this._needsRefresh&&(a=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately());var l=getTime();a?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-s})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},t.prototype.findHover=function(n,a){if(!this._disposed)return this.handler.findHover(n,a)},t.prototype.on=function(n,a,s){return this._disposed||this.handler.on(n,a,s),this},t.prototype.off=function(n,a){this._disposed||this.handler.off(n,a)},t.prototype.trigger=function(n,a){this._disposed||this.handler.trigger(n,a)},t.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),a=0;a<n.length;a++)n[a]instanceof Group$3&&n[a].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},t})();function init$2(t,n){var a=new ZRender(guid(),t,n);return instances$1[a.id]=a,a}function dispose$1(t){t.dispose()}function disposeAll(){for(var t in instances$1)instances$1.hasOwnProperty(t)&&instances$1[t].dispose();instances$1={}}function getInstance(t){return instances$1[t]}function registerPainter(t,n){painterCtors[t]=n}var ssrDataGetter;function getElementSSRData(t){if(typeof ssrDataGetter=="function")return ssrDataGetter(t)}function registerSSRDataGetter(t){ssrDataGetter=t}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(t){return t.replace(/^\s+|\s+$/g,"")}function linearMap$2(t,n,a,s){var l=n[0],u=n[1],c=a[0],d=a[1],Ct=u-l,ar=d-c;if(Ct===0)return ar===0?c:(c+d)/2;if(s)if(Ct>0){if(t<=l)return c;if(t>=u)return d}else{if(t>=l)return c;if(t<=u)return d}else{if(t===l)return c;if(t===u)return d}return(t-l)/Ct*ar+c}function parsePercent(t,n){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return isString$1(t)?_trim(t).match(/%$/)?parseFloat(t)/100*n:parseFloat(t):t==null?NaN:+t}function round$3(t,n,a){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),t=(+t).toFixed(n),a?t:+t}function asc$2(t){return t.sort(function(n,a){return n-a}),t}function getPrecision(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var n=1,a=0;a<15;a++,n*=10)if(Math.round(t*n)/n===t)return a}return getPrecisionSafe(t)}function getPrecisionSafe(t){var n=t.toString().toLowerCase(),a=n.indexOf("e"),s=a>0?+n.slice(a+1):0,l=a>0?a:n.length,u=n.indexOf("."),c=u<0?0:l-1-u;return Math.max(0,c-s)}function getPixelPrecision(t,n){var a=Math.log,s=Math.LN10,l=Math.floor(a(t[1]-t[0])/s),u=Math.round(a(Math.abs(n[1]-n[0]))/s),c=Math.min(Math.max(-l+u,0),20);return isFinite(c)?c:20}function getPercentWithPrecision(t,n,a){if(!t[n])return 0;var s=getPercentSeats(t,a);return s[n]||0}function getPercentSeats(t,n){var a=reduce(t,function(cn,dn){return cn+(isNaN(dn)?0:dn)},0);if(a===0)return[];for(var s=Math.pow(10,n),l=map$1(t,function(cn){return(isNaN(cn)?0:cn)/a*s*100}),u=s*100,c=map$1(l,function(cn){return Math.floor(cn)}),d=reduce(c,function(cn,dn){return cn+dn},0),Ct=map$1(l,function(cn,dn){return cn-c[dn]});d<u;){for(var ar=Number.NEGATIVE_INFINITY,en=null,tn=0,on=Ct.length;tn<on;++tn)Ct[tn]>ar&&(ar=Ct[tn],en=tn);++c[en],Ct[en]=0,++d}return map$1(c,function(cn){return cn/s})}function addSafe(t,n){var a=Math.max(getPrecision(t),getPrecision(n)),s=t+n;return a>ROUND_SUPPORTED_PRECISION_MAX?s:round$3(s,a)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(t){var n=Math.PI*2;return(t%n+n)%n}function isRadianAroundZero(t){return t>-RADIAN_EPSILON&&t<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(t){if(t instanceof Date)return t;if(isString$1(t)){var n=TIME_REG.exec(t);if(!n)return new Date(NaN);if(n[8]){var a=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(a-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,a,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function quantity(t){return Math.pow(10,quantityExponent(t))}function quantityExponent(t){if(t===0)return 0;var n=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,n)>=10&&n++,n}function nice(t,n){var a=quantityExponent(t),s=Math.pow(10,a),l=t/s,u;return n?l<1.5?u=1:l<2.5?u=2:l<4?u=3:l<7?u=5:u=10:l<1?u=1:l<2?u=2:l<3?u=3:l<5?u=5:u=10,t=u*s,a>=-20?+t.toFixed(a<0?-a:0):t}function quantile(t,n){var a=(t.length-1)*n+1,s=Math.floor(a),l=+t[s-1],u=a-s;return u?l+u*(t[s]-l):l}function reformIntervals(t){t.sort(function(Ct,ar){return d(Ct,ar,0)?-1:1});for(var n=-1/0,a=1,s=0;s<t.length;){for(var l=t[s].interval,u=t[s].close,c=0;c<2;c++)l[c]<=n&&(l[c]=n,u[c]=c?1:1-a),n=l[c],a=u[c];l[0]===l[1]&&u[0]*u[1]!==1?t.splice(s,1):s++}return t;function d(Ct,ar,en){return Ct.interval[en]<ar.interval[en]||Ct.interval[en]===ar.interval[en]&&(Ct.close[en]-ar.close[en]===(en?-1:1)||!en&&d(Ct,ar,1))}}function numericToNumber(t){var n=parseFloat(t);return n==t&&(n!==0||!isString$1(t)||t.indexOf("x")<=0)?n:NaN}function isNumeric(t){return!isNaN(numericToNumber(t))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(t,n){return n===0?t:getGreatestCommonDividor(n,t%n)}function getLeastCommonMultiple(t,n){return t==null?n:n==null?t:t*n/getGreatestCommonDividor(t,n)}function throwError(t){throw new Error(t)}function interpolateNumber(t,n,a){return(n-t)*a+t}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(t){return t instanceof Array?t:t==null?[]:[t]}function defaultEmphasis(t,n,a){if(t){t[n]=t[n]||{},t.emphasis=t.emphasis||{},t.emphasis[n]=t.emphasis[n]||{};for(var s=0,l=a.length;s<l;s++){var u=a[s];!t.emphasis[n].hasOwnProperty(u)&&t[n].hasOwnProperty(u)&&(t.emphasis[n][u]=t[n][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(t){return isObject$3(t)&&!isArray$1(t)&&!(t instanceof Date)?t.value:t}function isDataItemOption(t){return isObject$3(t)&&!(t instanceof Array)}function mappingToExists(t,n,a){var s=a==="normalMerge",l=a==="replaceMerge",u=a==="replaceAll";t=t||[],n=(n||[]).slice();var c=createHashMap();each$f(n,function(Ct,ar){if(!isObject$3(Ct)){n[ar]=null;return}});var d=prepareResult(t,c,a);return(s||l)&&mappingById(d,t,c,n),s&&mappingByName(d,n),s||l?mappingByIndex(d,n,l):u&&mappingInReplaceAllMode(d,n),makeIdAndName(d),d}function prepareResult(t,n,a){var s=[];if(a==="replaceAll")return s;for(var l=0;l<t.length;l++){var u=t[l];u&&u.id!=null&&n.set(u.id,l),s.push({existing:a==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return s}function mappingById(t,n,a,s){each$f(s,function(l,u){if(!(!l||l.id==null)){var c=makeComparableKey(l.id),d=a.get(c);if(d!=null){var Ct=t[d];assert(!Ct.newOption,'Duplicated option on id "'+c+'".'),Ct.newOption=l,Ct.existing=n[d],s[u]=null}}})}function mappingByName(t,n){each$f(n,function(a,s){if(!(!a||a.name==null))for(var l=0;l<t.length;l++){var u=t[l].existing;if(!t[l].newOption&&u&&(u.id==null||a.id==null)&&!isComponentIdInternal(a)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,a)){t[l].newOption=a,n[s]=null;return}}})}function mappingByIndex(t,n,a){each$f(n,function(s){if(s){for(var l,u=0;(l=t[u])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&s.id!=null&&!keyExistAndEqual("id",s,l.existing));)u++;l?(l.newOption=s,l.brandNew=a):t.push({newOption:s,brandNew:a,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(t,n){each$f(n,function(a){t.push({newOption:a,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(t){var n=createHashMap();each$f(t,function(a){var s=a.existing;s&&n.set(s.id,a)}),each$f(t,function(a){var s=a.newOption;assert(!s||s.id==null||!n.get(s.id)||n.get(s.id)===a,"id duplicates: "+(s&&s.id)),s&&s.id!=null&&n.set(s.id,a),!a.keyInfo&&(a.keyInfo={})}),each$f(t,function(a,s){var l=a.existing,u=a.newOption,c=a.keyInfo;if(isObject$3(u)){if(c.name=u.name!=null?makeComparableKey(u.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+s,l)c.id=makeComparableKey(l.id);else if(u.id!=null)c.id=makeComparableKey(u.id);else{var d=0;do c.id="\0"+c.name+"\0"+d++;while(n.get(c.id))}n.set(c.id,a)}})}function keyExistAndEqual(t,n,a){var s=convertOptionIdName(n[t],null),l=convertOptionIdName(a[t],null);return s!=null&&l!=null&&s===l}function makeComparableKey(t){return convertOptionIdName(t,"")}function convertOptionIdName(t,n){return t==null?n:isString$1(t)?t:isNumber(t)||isStringSafe(t)?t+"":n}function isNameSpecified(t){var n=t.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(t){return t&&t.id!=null&&makeComparableKey(t.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(t){return INTERNAL_COMPONENT_ID_PREFIX+t}function setComponentTypeToKeyInfo(t,n,a){each$f(t,function(s){var l=s.newOption;isObject$3(l)&&(s.keyInfo.mainType=n,s.keyInfo.subType=determineSubType(n,l,s.existing,a))})}function determineSubType(t,n,a,s){var l=n.type?n.type:a?a.subType:s.determineSubType(t,n);return l}function compressBatches(t,n){var a={},s={};return l(t||[],a),l(n||[],s,a),[u(a),u(s)];function l(c,d,Ct){for(var ar=0,en=c.length;ar<en;ar++){var tn=convertOptionIdName(c[ar].seriesId,null);if(tn==null)return;for(var on=normalizeToArray(c[ar].dataIndex),cn=Ct&&Ct[tn],dn=0,Cn=on.length;dn<Cn;dn++){var In=on[dn];cn&&cn[In]?cn[In]=null:(d[tn]||(d[tn]={}))[In]=1}}}function u(c,d){var Ct=[];for(var ar in c)if(c.hasOwnProperty(ar)&&c[ar]!=null)if(d)Ct.push(+ar);else{var en=u(c[ar],!0);en.length&&Ct.push({seriesId:ar,dataIndex:en})}return Ct}}function queryDataIndex(t,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(a){return t.indexOfRawIndex(a)}):t.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(a){return t.indexOfName(a)}):t.indexOfName(n.name)}function makeInner(){var t="__ec_inner_"+innerUniqueIndex++;return function(n){return n[t]||(n[t]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(t,n,a){var s=preParseFinder(n,a),l=s.mainTypeSpecified,u=s.queryOptionMap,c=s.others,d=c,Ct=a?a.defaultMainType:null;return!l&&Ct&&u.set(Ct,{}),u.each(function(ar,en){var tn=queryReferringComponents(t,en,ar,{useDefault:Ct===en,enableAll:a&&a.enableAll!=null?a.enableAll:!0,enableNone:a&&a.enableNone!=null?a.enableNone:!0});d[en+"Models"]=tn.models,d[en+"Model"]=tn.models[0]}),d}function preParseFinder(t,n){var a;if(isString$1(t)){var s={};s[t+"Index"]=0,a=s}else a=t;var l=createHashMap(),u={},c=!1;return each$f(a,function(d,Ct){if(Ct==="dataIndex"||Ct==="dataIndexInside"){u[Ct]=d;return}var ar=Ct.match(/^(\w+)(Index|Id|Name)$/)||[],en=ar[1],tn=(ar[2]||"").toLowerCase();if(!(!en||!tn||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,en)<0)){c=c||!!en;var on=l.get(en)||l.set(en,{});on[tn]=d}}),{mainTypeSpecified:c,queryOptionMap:l,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(t,n,a,s){s=s||SINGLE_REFERRING;var l=a.index,u=a.id,c=a.name,d={models:null,specified:l!=null||u!=null||c!=null};if(!d.specified){var Ct=void 0;return d.models=s.useDefault&&(Ct=t.getComponent(n))?[Ct]:[],d}return l==="none"||l===!1?(assert(s.enableNone,'`"none"` or `false` is not a valid value on index option.'),d.models=[],d):(l==="all"&&(assert(s.enableAll,'`"all"` is not a valid value on index option.'),l=u=c=null),d.models=t.queryComponents({mainType:n,index:l,id:u,name:c}),d)}function setAttribute(t,n,a){t.setAttribute?t.setAttribute(n,a):t[n]=a}function getAttribute(t,n){return t.getAttribute?t.getAttribute(n):t[n]}function getTooltipRenderMode(t){return t==="auto"?env.domSupported?"html":"richText":t||"html"}function groupData(t,n){var a=createHashMap(),s=[];return each$f(t,function(l){var u=n(l);(a.get(u)||(s.push(u),a.set(u,[]))).push(l)}),{keys:s,buckets:a}}function interpolateRawValues(t,n,a,s,l){var u=n==null||n==="auto";if(s==null)return s;if(isNumber(s)){var c=interpolateNumber(a||0,s,l);return round$3(c,u?Math.max(getPrecision(a||0),getPrecision(s)):n)}else{if(isString$1(s))return l<1?a:s;for(var d=[],Ct=a,ar=s,en=Math.max(Ct?Ct.length:0,ar.length),tn=0;tn<en;++tn){var on=t.getDimensionInfo(tn);if(on&&on.type==="ordinal")d[tn]=(l<1&&Ct?Ct:ar)[tn];else{var cn=Ct&&Ct[tn]?Ct[tn]:0,dn=ar[tn],c=interpolateNumber(cn,dn,l);d[tn]=round$3(c,u?Math.max(getPrecision(cn),getPrecision(dn)):n)}}return d}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(t){var n={main:"",sub:""};if(t){var a=t.split(TYPE_DELIMITER);n.main=a[0]||"",n.sub=a[1]||""}return n}function checkClassType(t){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function isExtendedClass(t){return!!(t&&t[IS_EXTENDED_CLASS])}function enableClassExtend(t,n){t.$constructor=t,t.extend=function(a){var s=this,l;return isESClass(s)?l=(function(u){__extends(c,u);function c(){return u.apply(this,arguments)||this}return c})(s):(l=function(){(a.$constructor||s).apply(this,arguments)},inherits(l,this)),extend(l.prototype,a),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=s,l}}function isESClass(t){return isFunction$1(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function mountExtend(t,n){t.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(t){var n=["__\0is_clz",classBase++].join("_");t.prototype[n]=!0,t.isInstance=function(a){return!!(a&&a[n])}}function superCall(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return this.superClass.prototype[n].apply(t,a)}function superApply(t,n,a){return this.superClass.prototype[n].apply(t,a)}function enableClassManagement(t){var n={};t.registerClass=function(s){var l=s.type||s.prototype.type;if(l){checkClassType(l),s.prototype.type=l;var u=parseClassType(l);if(!u.sub)n[u.main]=s;else if(u.sub!==IS_CONTAINER){var c=a(u);c[u.sub]=s}}return s},t.getClass=function(s,l,u){var c=n[s];if(c&&c[IS_CONTAINER]&&(c=l?c[l]:null),u&&!c)throw new Error(l?"Component "+s+"."+(l||"")+" is used but not imported.":s+".type should be specified.");return c},t.getClassesByMainType=function(s){var l=parseClassType(s),u=[],c=n[l.main];return c&&c[IS_CONTAINER]?each$f(c,function(d,Ct){Ct!==IS_CONTAINER&&u.push(d)}):u.push(c),u},t.hasClass=function(s){var l=parseClassType(s);return!!n[l.main]},t.getAllClassMainTypes=function(){var s=[];return each$f(n,function(l,u){s.push(u)}),s},t.hasSubTypes=function(s){var l=parseClassType(s),u=n[l.main];return u&&u[IS_CONTAINER]};function a(s){var l=n[s.main];return(!l||!l[IS_CONTAINER])&&(l=n[s.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(t,n){for(var a=0;a<t.length;a++)t[a][1]||(t[a][1]=t[a][0]);return n=n||!1,function(s,l,u){for(var c={},d=0;d<t.length;d++){var Ct=t[d][1];if(!(l&&indexOf(l,Ct)>=0||u&&indexOf(u,Ct)<0)){var ar=s.getShallow(Ct,n);ar!=null&&(c[t[d][0]]=ar)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=(function(){function t(){}return t.prototype.getAreaStyle=function(n,a){return getAreaStyle(this,n,a)},t})(),globalImageCache=new LRU(50);function findExistImage(t){if(typeof t=="string"){var n=globalImageCache.get(t);return n&&n.image}else return t}function createOrUpdateImage(t,n,a,s,l){if(t)if(typeof t=="string"){if(n&&n.__zrImageSrc===t||!a)return n;var u=globalImageCache.get(t),c={hostEl:a,cb:s,cbPayload:l};return u?(n=u.image,!isImageReady(n)&&u.pending.push(c)):(n=platformApi.loadImage(t,imageOnLoad,imageOnLoad),n.__zrImageSrc=t,globalImageCache.put(t,n.__cachedImgObj={image:n,pending:[c]})),n}else return t;else return n}function imageOnLoad(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<t.pending.length;n++){var a=t.pending[n],s=a.cb;s&&s(this,a.cbPayload),a.hostEl.dirty()}t.pending.length=0}function isImageReady(t){return t&&t.width&&t.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(t,n,a,s,l){var u={};return truncateText2(u,t,n,a,s,l),u.text}function truncateText2(t,n,a,s,l,u){if(!a){t.text="",t.isTruncated=!1;return}var c=(n+"").split(`
`);u=prepareTruncateOptions(a,s,l,u);for(var d=!1,Ct={},ar=0,en=c.length;ar<en;ar++)truncateSingleLine(Ct,c[ar],u),c[ar]=Ct.textLine,d=d||Ct.isTruncated;t.text=c.join(`
`),t.isTruncated=d}function prepareTruncateOptions(t,n,a,s){s=s||{};var l=extend({},s);l.font=n,a=retrieve2(a,"..."),l.maxIterations=retrieve2(s.maxIterations,2);var u=l.minChar=retrieve2(s.minChar,0);l.cnCharWidth=getWidth("",n);var c=l.ascCharWidth=getWidth("a",n);l.placeholder=retrieve2(s.placeholder,"");for(var d=t=Math.max(0,t-1),Ct=0;Ct<u&&d>=c;Ct++)d-=c;var ar=getWidth(a,n);return ar>d&&(a="",ar=0),d=t-ar,l.ellipsis=a,l.ellipsisWidth=ar,l.contentWidth=d,l.containerWidth=t,l}function truncateSingleLine(t,n,a){var s=a.containerWidth,l=a.font,u=a.contentWidth;if(!s){t.textLine="",t.isTruncated=!1;return}var c=getWidth(n,l);if(c<=s){t.textLine=n,t.isTruncated=!1;return}for(var d=0;;d++){if(c<=u||d>=a.maxIterations){n+=a.ellipsis;break}var Ct=d===0?estimateLength(n,u,a.ascCharWidth,a.cnCharWidth):c>0?Math.floor(n.length*u/c):0;n=n.substr(0,Ct),c=getWidth(n,l)}n===""&&(n=a.placeholder),t.textLine=n,t.isTruncated=!0}function estimateLength(t,n,a,s){for(var l=0,u=0,c=t.length;u<c&&l<n;u++){var d=t.charCodeAt(u);l+=0<=d&&d<=127?a:s}return u}function parsePlainText(t,n){t!=null&&(t+="");var a=n.overflow,s=n.padding,l=n.font,u=a==="truncate",c=getLineHeight(l),d=retrieve2(n.lineHeight,c),Ct=!!n.backgroundColor,ar=n.lineOverflow==="truncate",en=!1,tn=n.width,on;tn!=null&&(a==="break"||a==="breakAll")?on=t?wrapText(t,n.font,tn,a==="breakAll",0).lines:[]:on=t?t.split(`
`):[];var cn=on.length*d,dn=retrieve2(n.height,cn);if(cn>dn&&ar){var Cn=Math.floor(dn/d);en=en||on.length>Cn,on=on.slice(0,Cn)}if(t&&u&&tn!=null)for(var In=prepareTruncateOptions(tn,l,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),ix={},ax=0;ax<on.length;ax++)truncateSingleLine(ix,on[ax],In),on[ax]=ix.textLine,en=en||ix.isTruncated;for(var ox=dn,sx=0,ax=0;ax<on.length;ax++)sx=Math.max(getWidth(on[ax],l),sx);tn==null&&(tn=sx);var ux=sx;return s&&(ox+=s[0]+s[2],ux+=s[1]+s[3],tn+=s[1]+s[3]),Ct&&(ux=tn),{lines:on,height:dn,outerWidth:ux,outerHeight:ox,lineHeight:d,calculatedLineHeight:c,contentWidth:sx,contentHeight:cn,width:tn,isTruncated:en}}var RichTextToken=(function(){function t(){}return t})(),RichTextLine=(function(){function t(n){this.tokens=[],n&&(this.tokens=n)}return t})(),RichTextContentBlock=(function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t})();function parseRichText(t,n){var a=new RichTextContentBlock;if(t!=null&&(t+=""),!t)return a;for(var s=n.width,l=n.height,u=n.overflow,c=(u==="break"||u==="breakAll")&&s!=null?{width:s,accumWidth:0,breakAll:u==="breakAll"}:null,d=STYLE_REG.lastIndex=0,Ct;(Ct=STYLE_REG.exec(t))!=null;){var ar=Ct.index;ar>d&&pushTokens(a,t.substring(d,ar),n,c),pushTokens(a,Ct[2],n,c,Ct[1]),d=STYLE_REG.lastIndex}d<t.length&&pushTokens(a,t.substring(d,t.length),n,c);var en=[],tn=0,on=0,cn=n.padding,dn=u==="truncate",Cn=n.lineOverflow==="truncate",In={};function ix(Ax,Nx,Ux){Ax.width=Nx,Ax.lineHeight=Ux,tn+=Ux,on=Math.max(on,Nx)}e:for(var ax=0;ax<a.lines.length;ax++){for(var ox=a.lines[ax],sx=0,ux=0,cx=0;cx<ox.tokens.length;cx++){var hx=ox.tokens[cx],gx=hx.styleName&&n.rich[hx.styleName]||{},fx=hx.textPadding=gx.padding,dx=fx?fx[1]+fx[3]:0,mx=hx.font=gx.font||n.font;hx.contentHeight=getLineHeight(mx);var vx=retrieve2(gx.height,hx.contentHeight);if(hx.innerHeight=vx,fx&&(vx+=fx[0]+fx[2]),hx.height=vx,hx.lineHeight=retrieve3(gx.lineHeight,n.lineHeight,vx),hx.align=gx&&gx.align||n.align,hx.verticalAlign=gx&&gx.verticalAlign||"middle",Cn&&l!=null&&tn+hx.lineHeight>l){var bx=a.lines.length;cx>0?(ox.tokens=ox.tokens.slice(0,cx),ix(ox,ux,sx),a.lines=a.lines.slice(0,ax+1)):a.lines=a.lines.slice(0,ax),a.isTruncated=a.isTruncated||a.lines.length<bx;break e}var xx=gx.width,_x=xx==null||xx==="auto";if(typeof xx=="string"&&xx.charAt(xx.length-1)==="%")hx.percentWidth=xx,en.push(hx),hx.contentWidth=getWidth(hx.text,mx);else{if(_x){var Ex=gx.backgroundColor,Tx=Ex&&Ex.image;Tx&&(Tx=findExistImage(Tx),isImageReady(Tx)&&(hx.width=Math.max(hx.width,Tx.width*vx/Tx.height)))}var Cx=dn&&s!=null?s-ux:null;Cx!=null&&Cx<hx.width?!_x||Cx<dx?(hx.text="",hx.width=hx.contentWidth=0):(truncateText2(In,hx.text,Cx-dx,mx,n.ellipsis,{minChar:n.truncateMinChar}),hx.text=In.text,a.isTruncated=a.isTruncated||In.isTruncated,hx.width=hx.contentWidth=getWidth(hx.text,mx)):hx.contentWidth=getWidth(hx.text,mx)}hx.width+=dx,ux+=hx.width,gx&&(sx=Math.max(sx,hx.lineHeight))}ix(ox,ux,sx)}a.outerWidth=a.width=retrieve2(s,on),a.outerHeight=a.height=retrieve2(l,tn),a.contentHeight=tn,a.contentWidth=on,cn&&(a.outerWidth+=cn[1]+cn[3],a.outerHeight+=cn[0]+cn[2]);for(var ax=0;ax<en.length;ax++){var hx=en[ax],Mx=hx.percentWidth;hx.width=parseInt(Mx,10)/100*a.width}return a}function pushTokens(t,n,a,s,l){var u=n==="",c=l&&a.rich[l]||{},d=t.lines,Ct=c.font||a.font,ar=!1,en,tn;if(s){var on=c.padding,cn=on?on[1]+on[3]:0;if(c.width!=null&&c.width!=="auto"){var dn=parsePercent$1(c.width,s.width)+cn;d.length>0&&dn+s.accumWidth>s.width&&(en=n.split(`
`),ar=!0),s.accumWidth=dn}else{var Cn=wrapText(n,Ct,s.width,s.breakAll,s.accumWidth);s.accumWidth=Cn.accumWidth+cn,tn=Cn.linesWidths,en=Cn.lines}}else en=n.split(`
`);for(var In=0;In<en.length;In++){var ix=en[In],ax=new RichTextToken;if(ax.styleName=l,ax.text=ix,ax.isLineHolder=!ix&&!u,typeof c.width=="number"?ax.width=c.width:ax.width=tn?tn[In]:getWidth(ix,Ct),!In&&!ar){var ox=(d[d.length-1]||(d[0]=new RichTextLine)).tokens,sx=ox.length;sx===1&&ox[0].isLineHolder?ox[0]=ax:(ix||!sx||u)&&ox.push(ax)}else d.push(new RichTextLine([ax]))}}function isAlphabeticLetter(t){var n=t.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(t,n){return t[n]=!0,t},{});function isWordBreakChar(t){return isAlphabeticLetter(t)?!!breakCharMap[t]:!0}function wrapText(t,n,a,s,l){for(var u=[],c=[],d="",Ct="",ar=0,en=0,tn=0;tn<t.length;tn++){var on=t.charAt(tn);if(on===`
`){Ct&&(d+=Ct,en+=ar),u.push(d),c.push(en),d="",Ct="",ar=0,en=0;continue}var cn=getWidth(on,n),dn=s?!1:!isWordBreakChar(on);if(u.length?en+cn>a:l+en+cn>a){en?(d||Ct)&&(dn?(d||(d=Ct,Ct="",ar=0,en=ar),u.push(d),c.push(en-ar),Ct+=on,ar+=cn,d="",en=ar):(Ct&&(d+=Ct,Ct="",ar=0),u.push(d),c.push(en),d=on,en=cn)):dn?(u.push(Ct),c.push(ar),Ct=on,ar=cn):(u.push(on),c.push(cn));continue}en+=cn,dn?(Ct+=on,ar+=cn):(Ct&&(d+=Ct,Ct="",ar=0),d+=on)}return!u.length&&!d&&(d=t,Ct="",ar=0),Ct&&(d+=Ct),d&&(u.push(d),c.push(en)),u.length===1&&(en+=l),{accumWidth:en,lines:u,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype._init=function(a){for(var s=keys(a),l=0;l<s.length;l++){var u=s[l];u==="style"?this.useStyle(a[u]):t.prototype.attrKV.call(this,u,a[u])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(a,s,l,u){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,a,s)||c&&!c[0]&&!c[3])return!1;if(l&&this.__clipPaths){for(var d=0;d<this.__clipPaths.length;++d)if(this.__clipPaths[d].isZeroArea())return!1}if(u&&this.parent)for(var Ct=this.parent;Ct;){if(Ct.ignore)return!1;Ct=Ct.parent}return!0},n.prototype.contain=function(a,s){return this.rectContain(a,s)},n.prototype.traverse=function(a,s){a.call(s,this)},n.prototype.rectContain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();return u.contain(l[0],l[1])},n.prototype.getPaintRect=function(){var a=this._paintRect;if(!this._paintRect||this.__dirty){var s=this.transform,l=this.getBoundingRect(),u=this.style,c=u.shadowBlur||0,d=u.shadowOffsetX||0,Ct=u.shadowOffsetY||0;a=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),s?BoundingRect.applyTransform(a,l,s):a.copy(l),(c||d||Ct)&&(a.width+=c*2+Math.abs(d),a.height+=c*2+Math.abs(Ct),a.x=Math.min(a.x,a.x+d-c),a.y=Math.min(a.y,a.y+Ct-c));var ar=this.dirtyRectTolerance;a.isZero()||(a.x=Math.floor(a.x-ar),a.y=Math.floor(a.y-ar),a.width=Math.ceil(a.width+1+ar*2),a.height=Math.ceil(a.height+1+ar*2))}return a},n.prototype.setPrevPaintRect=function(a){a?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(a)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(a){return this.animate("style",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(a,s){a!=="style"?t.prototype.attrKV.call(this,a,s):this.style?this.setStyle(s):this.useStyle(s)},n.prototype.setStyle=function(a,s){return typeof a=="string"?this.style[a]=s:extend(this.style,a),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(a){a||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(a){return createObject(DEFAULT_COMMON_STYLE,a)},n.prototype.useStyle=function(a){a[STYLE_MAGIC_KEY]||(a=this.createStyle(a)),this.__inHover?this.__hoverStyle=a:this.style=a,this.dirtyStyle()},n.prototype.isStyleObject=function(a){return a[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.style&&!s.style&&(s.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(a,s,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(a,s,l,u,c,d){t.prototype._applyStateObj.call(this,a,s,l,u,c,d);var Ct=!(s&&u),ar;if(s&&s.style?c?u?ar=s.style:(ar=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(ar,s.style)):(ar=this._mergeStyle(this.createStyle(),u?this.style:l.style),this._mergeStyle(ar,s.style)):Ct&&(ar=l.style),ar)if(c){var en=this.style;if(this.style=this.createStyle(Ct?{}:en),Ct)for(var tn=keys(en),on=0;on<tn.length;on++){var cn=tn[on];cn in ar&&(ar[cn]=ar[cn],this.style[cn]=en[cn])}for(var dn=keys(ar),on=0;on<dn.length;on++){var cn=dn[on];this.style[cn]=this.style[cn]}this._transitionState(a,{style:ar},d,this.getAnimationStyleProps())}else this.useStyle(ar);for(var Cn=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,on=0;on<Cn.length;on++){var cn=Cn[on];s&&s[cn]!=null?this[cn]=s[cn]:Ct&&l[cn]!=null&&(this[cn]=l[cn])}},n.prototype._mergeStates=function(a){for(var s=t.prototype._mergeStates.call(this,a),l,u=0;u<a.length;u++){var c=a[u];c.style&&(l=l||{},this._mergeStyle(l,c.style))}return l&&(s.style=l),s},n.prototype._mergeStyle=function(a,s){return extend(a,s),a},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=(function(){var a=n.prototype;a.type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT})(),n})(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(t,n,a){return tmpRect.copy(t.getBoundingRect()),t.transform&&tmpRect.applyTransform(t.transform),viewRect.width=n,viewRect.height=a,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(t,n,a){if(t.length!==0){for(var s=t[0],l=s[0],u=s[0],c=s[1],d=s[1],Ct=1;Ct<t.length;Ct++)s=t[Ct],l=mathMin$9(l,s[0]),u=mathMax$9(u,s[0]),c=mathMin$9(c,s[1]),d=mathMax$9(d,s[1]);n[0]=l,n[1]=c,a[0]=u,a[1]=d}}function fromLine(t,n,a,s,l,u){l[0]=mathMin$9(t,a),l[1]=mathMin$9(n,s),u[0]=mathMax$9(t,a),u[1]=mathMax$9(n,s)}var xDim=[],yDim=[];function fromCubic(t,n,a,s,l,u,c,d,Ct,ar){var en=cubicExtrema,tn=cubicAt,on=en(t,a,l,c,xDim);Ct[0]=1/0,Ct[1]=1/0,ar[0]=-1/0,ar[1]=-1/0;for(var cn=0;cn<on;cn++){var dn=tn(t,a,l,c,xDim[cn]);Ct[0]=mathMin$9(dn,Ct[0]),ar[0]=mathMax$9(dn,ar[0])}on=en(n,s,u,d,yDim);for(var cn=0;cn<on;cn++){var Cn=tn(n,s,u,d,yDim[cn]);Ct[1]=mathMin$9(Cn,Ct[1]),ar[1]=mathMax$9(Cn,ar[1])}Ct[0]=mathMin$9(t,Ct[0]),ar[0]=mathMax$9(t,ar[0]),Ct[0]=mathMin$9(c,Ct[0]),ar[0]=mathMax$9(c,ar[0]),Ct[1]=mathMin$9(n,Ct[1]),ar[1]=mathMax$9(n,ar[1]),Ct[1]=mathMin$9(d,Ct[1]),ar[1]=mathMax$9(d,ar[1])}function fromQuadratic(t,n,a,s,l,u,c,d){var Ct=quadraticExtremum,ar=quadraticAt$1,en=mathMax$9(mathMin$9(Ct(t,a,l),1),0),tn=mathMax$9(mathMin$9(Ct(n,s,u),1),0),on=ar(t,a,l,en),cn=ar(n,s,u,tn);c[0]=mathMin$9(t,l,on),c[1]=mathMin$9(n,u,cn),d[0]=mathMax$9(t,l,on),d[1]=mathMax$9(n,u,cn)}function fromArc(t,n,a,s,l,u,c,d,Ct){var ar=min$1,en=max$1,tn=Math.abs(l-u);if(tn%PI2$8<1e-4&&tn>1e-4){d[0]=t-a,d[1]=n-s,Ct[0]=t+a,Ct[1]=n+s;return}if(start[0]=mathCos$4(l)*a+t,start[1]=mathSin$4(l)*s+n,end[0]=mathCos$4(u)*a+t,end[1]=mathSin$4(u)*s+n,ar(d,start,end),en(Ct,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),l>u&&!c?u+=PI2$8:l<u&&c&&(l+=PI2$8),c){var on=u;u=l,l=on}for(var cn=0;cn<u;cn+=Math.PI/2)cn>l&&(extremity[0]=mathCos$4(cn)*a+t,extremity[1]=mathSin$4(cn)*s+n,ar(d,extremity,d),en(Ct,extremity,Ct))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(t){var n=Math.round(t/PI$8*1e8)/1e8;return n%2*PI$8}function normalizeArcAngles(t,n){var a=modPI2(t[0]);a<0&&(a+=PI2$7);var s=a-t[0],l=t[1];l+=s,!n&&l-a>=PI2$7?l=a+PI2$7:n&&a-l>=PI2$7?l=a-PI2$7:!n&&a>l?l=a+(PI2$7-modPI2(a-l)):n&&a<l&&(l=a-(PI2$7-modPI2(l-a))),t[0]=a,t[1]=l}var PathProxy=(function(){function t(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(n,a,s){s=s||0,s>0&&(this._ux=mathAbs$2(s/devicePixelRatio/n)||0,this._uy=mathAbs$2(s/devicePixelRatio/a)||0)},t.prototype.setDPR=function(n){this.dpr=n},t.prototype.setContext=function(n){this._ctx=n},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(n,a){return this._drawPendingPt(),this.addData(CMD$4.M,n,a),this._ctx&&this._ctx.moveTo(n,a),this._x0=n,this._y0=a,this._xi=n,this._yi=a,this},t.prototype.lineTo=function(n,a){var s=mathAbs$2(n-this._xi),l=mathAbs$2(a-this._yi),u=s>this._ux||l>this._uy;if(this.addData(CMD$4.L,n,a),this._ctx&&u&&this._ctx.lineTo(n,a),u)this._xi=n,this._yi=a,this._pendingPtDist=0;else{var c=s*s+l*l;c>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=a,this._pendingPtDist=c)}return this},t.prototype.bezierCurveTo=function(n,a,s,l,u,c){return this._drawPendingPt(),this.addData(CMD$4.C,n,a,s,l,u,c),this._ctx&&this._ctx.bezierCurveTo(n,a,s,l,u,c),this._xi=u,this._yi=c,this},t.prototype.quadraticCurveTo=function(n,a,s,l){return this._drawPendingPt(),this.addData(CMD$4.Q,n,a,s,l),this._ctx&&this._ctx.quadraticCurveTo(n,a,s,l),this._xi=s,this._yi=l,this},t.prototype.arc=function(n,a,s,l,u,c){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,c),l=tmpAngles[0],u=tmpAngles[1];var d=u-l;return this.addData(CMD$4.A,n,a,s,s,l,d,0,c?0:1),this._ctx&&this._ctx.arc(n,a,s,l,u,c),this._xi=mathCos$3(u)*s+n,this._yi=mathSin$3(u)*s+a,this},t.prototype.arcTo=function(n,a,s,l,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,a,s,l,u),this},t.prototype.rect=function(n,a,s,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,a,s,l),this.addData(CMD$4.R,n,a,s,l),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var n=this._ctx,a=this._x0,s=this._y0;return n&&n.closePath(),this._xi=a,this._yi=s,this},t.prototype.fill=function(n){n&&n.fill(),this.toStatic()},t.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(n){var a=n.length;!(this.data&&this.data.length===a)&&hasTypedArray&&(this.data=new Float32Array(a));for(var s=0;s<a;s++)this.data[s]=n[s];this._len=a},t.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var a=n.length,s=0,l=this._len,u=0;u<a;u++)s+=n[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+s));for(var u=0;u<a;u++)for(var c=n[u].data,d=0;d<c.length;d++)this.data[l++]=c[d];this._len=l},t.prototype.addData=function(n,a,s,l,u,c,d,Ct,ar){if(this._saveData){var en=this.data;this._len+arguments.length>en.length&&(this._expandData(),en=this.data);for(var tn=0;tn<arguments.length;tn++)en[this._len++]=arguments[tn]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],a=0;a<this._len;a++)n[a]=this.data[a];this.data=n}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},t.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,a=0,s=0,l=0,u=0,c;for(c=0;c<this._len;){var d=n[c++],Ct=c===1;switch(Ct&&(a=n[c],s=n[c+1],l=a,u=s),d){case CMD$4.M:a=l=n[c++],s=u=n[c++],min2[0]=l,min2[1]=u,max2[0]=l,max2[1]=u;break;case CMD$4.L:fromLine(a,s,n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.C:fromCubic(a,s,n[c++],n[c++],n[c++],n[c++],n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.Q:fromQuadratic(a,s,n[c++],n[c++],n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.A:var ar=n[c++],en=n[c++],tn=n[c++],on=n[c++],cn=n[c++],dn=n[c++]+cn;c+=1;var Cn=!n[c++];Ct&&(l=mathCos$3(cn)*tn+ar,u=mathSin$3(cn)*on+en),fromArc(ar,en,tn,on,cn,dn,Cn,min2,max2),a=mathCos$3(dn)*tn+ar,s=mathSin$3(dn)*on+en;break;case CMD$4.R:l=a=n[c++],u=s=n[c++];var In=n[c++],ix=n[c++];fromLine(l,u,l+In,u+ix,min2,max2);break;case CMD$4.Z:a=l,s=u;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},t.prototype._calculateLength=function(){var n=this.data,a=this._len,s=this._ux,l=this._uy,u=0,c=0,d=0,Ct=0;this._pathSegLen||(this._pathSegLen=[]);for(var ar=this._pathSegLen,en=0,tn=0,on=0;on<a;){var cn=n[on++],dn=on===1;dn&&(u=n[on],c=n[on+1],d=u,Ct=c);var Cn=-1;switch(cn){case CMD$4.M:u=d=n[on++],c=Ct=n[on++];break;case CMD$4.L:{var In=n[on++],ix=n[on++],ax=In-u,ox=ix-c;(mathAbs$2(ax)>s||mathAbs$2(ox)>l||on===a-1)&&(Cn=Math.sqrt(ax*ax+ox*ox),u=In,c=ix);break}case CMD$4.C:{var sx=n[on++],ux=n[on++],In=n[on++],ix=n[on++],cx=n[on++],hx=n[on++];Cn=cubicLength(u,c,sx,ux,In,ix,cx,hx,10),u=cx,c=hx;break}case CMD$4.Q:{var sx=n[on++],ux=n[on++],In=n[on++],ix=n[on++];Cn=quadraticLength(u,c,sx,ux,In,ix,10),u=In,c=ix;break}case CMD$4.A:var gx=n[on++],fx=n[on++],dx=n[on++],mx=n[on++],vx=n[on++],bx=n[on++],xx=bx+vx;on+=1,dn&&(d=mathCos$3(vx)*dx+gx,Ct=mathSin$3(vx)*mx+fx),Cn=mathMax$8(dx,mx)*mathMin$8(PI2$7,Math.abs(bx)),u=mathCos$3(xx)*dx+gx,c=mathSin$3(xx)*mx+fx;break;case CMD$4.R:{d=u=n[on++],Ct=c=n[on++];var _x=n[on++],Ex=n[on++];Cn=_x*2+Ex*2;break}case CMD$4.Z:{var ax=d-u,ox=Ct-c;Cn=Math.sqrt(ax*ax+ox*ox),u=d,c=Ct;break}}Cn>=0&&(ar[tn++]=Cn,en+=Cn)}return this._pathLen=en,en},t.prototype.rebuildPath=function(n,a){var s=this.data,l=this._ux,u=this._uy,c=this._len,d,Ct,ar,en,tn,on,cn=a<1,dn,Cn,In=0,ix=0,ax,ox=0,sx,ux;if(!(cn&&(this._pathSegLen||this._calculateLength(),dn=this._pathSegLen,Cn=this._pathLen,ax=a*Cn,!ax)))e:for(var cx=0;cx<c;){var hx=s[cx++],gx=cx===1;switch(gx&&(ar=s[cx],en=s[cx+1],d=ar,Ct=en),hx!==CMD$4.L&&ox>0&&(n.lineTo(sx,ux),ox=0),hx){case CMD$4.M:d=ar=s[cx++],Ct=en=s[cx++],n.moveTo(ar,en);break;case CMD$4.L:{tn=s[cx++],on=s[cx++];var fx=mathAbs$2(tn-ar),dx=mathAbs$2(on-en);if(fx>l||dx>u){if(cn){var mx=dn[ix++];if(In+mx>ax){var vx=(ax-In)/mx;n.lineTo(ar*(1-vx)+tn*vx,en*(1-vx)+on*vx);break e}In+=mx}n.lineTo(tn,on),ar=tn,en=on,ox=0}else{var bx=fx*fx+dx*dx;bx>ox&&(sx=tn,ux=on,ox=bx)}break}case CMD$4.C:{var xx=s[cx++],_x=s[cx++],Ex=s[cx++],Tx=s[cx++],Cx=s[cx++],Mx=s[cx++];if(cn){var mx=dn[ix++];if(In+mx>ax){var vx=(ax-In)/mx;cubicSubdivide(ar,xx,Ex,Cx,vx,tmpOutX),cubicSubdivide(en,_x,Tx,Mx,vx,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}In+=mx}n.bezierCurveTo(xx,_x,Ex,Tx,Cx,Mx),ar=Cx,en=Mx;break}case CMD$4.Q:{var xx=s[cx++],_x=s[cx++],Ex=s[cx++],Tx=s[cx++];if(cn){var mx=dn[ix++];if(In+mx>ax){var vx=(ax-In)/mx;quadraticSubdivide(ar,xx,Ex,vx,tmpOutX),quadraticSubdivide(en,_x,Tx,vx,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}In+=mx}n.quadraticCurveTo(xx,_x,Ex,Tx),ar=Ex,en=Tx;break}case CMD$4.A:var Ax=s[cx++],Nx=s[cx++],Ux=s[cx++],Rx=s[cx++],Ox=s[cx++],Px=s[cx++],$x=s[cx++],Lx=!s[cx++],zx=Ux>Rx?Ux:Rx,qx=mathAbs$2(Ux-Rx)>.001,jx=Ox+Px,Hx=!1;if(cn){var mx=dn[ix++];In+mx>ax&&(jx=Ox+Px*(ax-In)/mx,Hx=!0),In+=mx}if(qx&&n.ellipse?n.ellipse(Ax,Nx,Ux,Rx,$x,Ox,jx,Lx):n.arc(Ax,Nx,zx,Ox,jx,Lx),Hx)break e;gx&&(d=mathCos$3(Ox)*Ux+Ax,Ct=mathSin$3(Ox)*Rx+Nx),ar=mathCos$3(jx)*Ux+Ax,en=mathSin$3(jx)*Rx+Nx;break;case CMD$4.R:d=ar=s[cx],Ct=en=s[cx+1],tn=s[cx++],on=s[cx++];var Vx=s[cx++],nE=s[cx++];if(cn){var mx=dn[ix++];if(In+mx>ax){var Wx=ax-In;n.moveTo(tn,on),n.lineTo(tn+mathMin$8(Wx,Vx),on),Wx-=Vx,Wx>0&&n.lineTo(tn+Vx,on+mathMin$8(Wx,nE)),Wx-=nE,Wx>0&&n.lineTo(tn+mathMax$8(Vx-Wx,0),on+nE),Wx-=Vx,Wx>0&&n.lineTo(tn,on+mathMax$8(nE-Wx,0));break e}In+=mx}n.rect(tn,on,Vx,nE);break;case CMD$4.Z:if(cn){var mx=dn[ix++];if(In+mx>ax){var vx=(ax-In)/mx;n.lineTo(ar*(1-vx)+d*vx,en*(1-vx)+Ct*vx);break e}In+=mx}n.closePath(),ar=d,en=Ct}}},t.prototype.clone=function(){var n=new t,a=this.data;return n.data=a.slice?a.slice():Array.prototype.slice.call(a),n._len=this._len,n},t.CMD=CMD$4,t.initDefaultProps=(function(){var n=t.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0})(),t})();function containStroke$4(t,n,a,s,l,u,c){if(l===0)return!1;var d=l,Ct=0,ar=t;if(c>n+d&&c>s+d||c<n-d&&c<s-d||u>t+d&&u>a+d||u<t-d&&u<a-d)return!1;if(t!==a)Ct=(n-s)/(t-a),ar=(t*s-a*n)/(t-a);else return Math.abs(u-t)<=d/2;var en=Ct*u-c+ar,tn=en*en/(Ct*Ct+1);return tn<=d/2*d/2}function containStroke$3(t,n,a,s,l,u,c,d,Ct,ar,en){if(Ct===0)return!1;var tn=Ct;if(en>n+tn&&en>s+tn&&en>u+tn&&en>d+tn||en<n-tn&&en<s-tn&&en<u-tn&&en<d-tn||ar>t+tn&&ar>a+tn&&ar>l+tn&&ar>c+tn||ar<t-tn&&ar<a-tn&&ar<l-tn&&ar<c-tn)return!1;var on=cubicProjectPoint(t,n,a,s,l,u,c,d,ar,en,null);return on<=tn/2}function containStroke$2(t,n,a,s,l,u,c,d,Ct){if(c===0)return!1;var ar=c;if(Ct>n+ar&&Ct>s+ar&&Ct>u+ar||Ct<n-ar&&Ct<s-ar&&Ct<u-ar||d>t+ar&&d>a+ar&&d>l+ar||d<t-ar&&d<a-ar&&d<l-ar)return!1;var en=quadraticProjectPoint(t,n,a,s,l,u,d,Ct,null);return en<=ar/2}var PI2$6=Math.PI*2;function normalizeRadian(t){return t%=PI2$6,t<0&&(t+=PI2$6),t}var PI2$5=Math.PI*2;function containStroke$1(t,n,a,s,l,u,c,d,Ct){if(c===0)return!1;var ar=c;d-=t,Ct-=n;var en=Math.sqrt(d*d+Ct*Ct);if(en-ar>a||en+ar<a)return!1;if(Math.abs(s-l)%PI2$5<1e-4)return!0;if(u){var tn=s;s=normalizeRadian(l),l=normalizeRadian(tn)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$5);var on=Math.atan2(Ct,d);return on<0&&(on+=PI2$5),on>=s&&on<=l||on+PI2$5>=s&&on+PI2$5<=l}function windingLine(t,n,a,s,l,u){if(u>n&&u>s||u<n&&u<s||s===n)return 0;var c=(u-n)/(s-n),d=s<n?1:-1;(c===1||c===0)&&(d=s<n?.5:-.5);var Ct=c*(a-t)+t;return Ct===l?1/0:Ct>l?d:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(t,n){return Math.abs(t-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var t=extrema[0];extrema[0]=extrema[1],extrema[1]=t}function windingCubic(t,n,a,s,l,u,c,d,Ct,ar){if(ar>n&&ar>s&&ar>u&&ar>d||ar<n&&ar<s&&ar<u&&ar<d)return 0;var en=cubicRootAt(n,s,u,d,ar,roots);if(en===0)return 0;for(var tn=0,on=-1,cn=void 0,dn=void 0,Cn=0;Cn<en;Cn++){var In=roots[Cn],ix=In===0||In===1?.5:1,ax=cubicAt(t,a,l,c,In);ax<Ct||(on<0&&(on=cubicExtrema(n,s,u,d,extrema),extrema[1]<extrema[0]&&on>1&&swapExtrema(),cn=cubicAt(n,s,u,d,extrema[0]),on>1&&(dn=cubicAt(n,s,u,d,extrema[1]))),on===2?In<extrema[0]?tn+=cn<n?ix:-ix:In<extrema[1]?tn+=dn<cn?ix:-ix:tn+=d<dn?ix:-ix:In<extrema[0]?tn+=cn<n?ix:-ix:tn+=d<cn?ix:-ix)}return tn}function windingQuadratic(t,n,a,s,l,u,c,d){if(d>n&&d>s&&d>u||d<n&&d<s&&d<u)return 0;var Ct=quadraticRootAt(n,s,u,d,roots);if(Ct===0)return 0;var ar=quadraticExtremum(n,s,u);if(ar>=0&&ar<=1){for(var en=0,tn=quadraticAt$1(n,s,u,ar),on=0;on<Ct;on++){var cn=roots[on]===0||roots[on]===1?.5:1,dn=quadraticAt$1(t,a,l,roots[on]);dn<c||(roots[on]<ar?en+=tn<n?cn:-cn:en+=u<tn?cn:-cn)}return en}else{var cn=roots[0]===0||roots[0]===1?.5:1,dn=quadraticAt$1(t,a,l,roots[0]);return dn<c?0:u<n?cn:-cn}}function windingArc(t,n,a,s,l,u,c,d){if(d-=n,d>a||d<-a)return 0;var Ct=Math.sqrt(a*a-d*d);roots[0]=-Ct,roots[1]=Ct;var ar=Math.abs(s-l);if(ar<1e-4)return 0;if(ar>=PI2$4-1e-4){s=0,l=PI2$4;var en=u?1:-1;return c>=roots[0]+t&&c<=roots[1]+t?en:0}if(s>l){var tn=s;s=l,l=tn}s<0&&(s+=PI2$4,l+=PI2$4);for(var on=0,cn=0;cn<2;cn++){var dn=roots[cn];if(dn+t>c){var Cn=Math.atan2(d,dn),en=u?1:-1;Cn<0&&(Cn=PI2$4+Cn),(Cn>=s&&Cn<=l||Cn+PI2$4>=s&&Cn+PI2$4<=l)&&(Cn>Math.PI/2&&Cn<Math.PI*1.5&&(en=-en),on+=en)}}return on}function containPath(t,n,a,s,l){for(var u=t.data,c=t.len(),d=0,Ct=0,ar=0,en=0,tn=0,on,cn,dn=0;dn<c;){var Cn=u[dn++],In=dn===1;switch(Cn===CMD$3.M&&dn>1&&(a||(d+=windingLine(Ct,ar,en,tn,s,l))),In&&(Ct=u[dn],ar=u[dn+1],en=Ct,tn=ar),Cn){case CMD$3.M:en=u[dn++],tn=u[dn++],Ct=en,ar=tn;break;case CMD$3.L:if(a){if(containStroke$4(Ct,ar,u[dn],u[dn+1],n,s,l))return!0}else d+=windingLine(Ct,ar,u[dn],u[dn+1],s,l)||0;Ct=u[dn++],ar=u[dn++];break;case CMD$3.C:if(a){if(containStroke$3(Ct,ar,u[dn++],u[dn++],u[dn++],u[dn++],u[dn],u[dn+1],n,s,l))return!0}else d+=windingCubic(Ct,ar,u[dn++],u[dn++],u[dn++],u[dn++],u[dn],u[dn+1],s,l)||0;Ct=u[dn++],ar=u[dn++];break;case CMD$3.Q:if(a){if(containStroke$2(Ct,ar,u[dn++],u[dn++],u[dn],u[dn+1],n,s,l))return!0}else d+=windingQuadratic(Ct,ar,u[dn++],u[dn++],u[dn],u[dn+1],s,l)||0;Ct=u[dn++],ar=u[dn++];break;case CMD$3.A:var ix=u[dn++],ax=u[dn++],ox=u[dn++],sx=u[dn++],ux=u[dn++],cx=u[dn++];dn+=1;var hx=!!(1-u[dn++]);on=Math.cos(ux)*ox+ix,cn=Math.sin(ux)*sx+ax,In?(en=on,tn=cn):d+=windingLine(Ct,ar,on,cn,s,l);var gx=(s-ix)*sx/ox+ix;if(a){if(containStroke$1(ix,ax,sx,ux,ux+cx,hx,n,gx,l))return!0}else d+=windingArc(ix,ax,sx,ux,ux+cx,hx,gx,l);Ct=Math.cos(ux+cx)*ox+ix,ar=Math.sin(ux+cx)*sx+ax;break;case CMD$3.R:en=Ct=u[dn++],tn=ar=u[dn++];var fx=u[dn++],dx=u[dn++];if(on=en+fx,cn=tn+dx,a){if(containStroke$4(en,tn,on,tn,n,s,l)||containStroke$4(on,tn,on,cn,n,s,l)||containStroke$4(on,cn,en,cn,n,s,l)||containStroke$4(en,cn,en,tn,n,s,l))return!0}else d+=windingLine(on,tn,on,cn,s,l),d+=windingLine(en,cn,en,tn,s,l);break;case CMD$3.Z:if(a){if(containStroke$4(Ct,ar,en,tn,n,s,l))return!0}else d+=windingLine(Ct,ar,en,tn,s,l);Ct=en,ar=tn;break}}return!a&&!isAroundEqual$1(ar,tn)&&(d+=windingLine(Ct,ar,en,tn,s,l)||0),d!==0}function contain$2(t,n,a){return containPath(t,0,!1,n,a)}function containStroke(t,n,a,s){return containPath(t,n,!0,a,s)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.update=function(){var a=this;t.prototype.update.call(this);var s=this.style;if(s.decal){var l=this._decalEl=this._decalEl||new n;l.buildPath===n.prototype.buildPath&&(l.buildPath=function(Ct){a.buildPath(Ct,a.shape)}),l.silent=!0;var u=l.style;for(var c in s)u[c]!==s[c]&&(u[c]=s[c]);u.fill=s.fill?s.decal:null,u.decal=null,u.shadowColor=null,s.strokeFirst&&(u.stroke=null);for(var d=0;d<pathCopyParams.length;++d)l[pathCopyParams[d]]=this[pathCopyParams[d]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(a){var s=keys(a);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var u=0;u<s.length;u++){var c=s[u],d=a[c];c==="style"?this.style?extend(this.style,d):this.useStyle(d):c==="shape"?extend(this.shape,d):t.prototype.attrKV.call(this,c,d)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var a=this.style.fill;if(a!=="none"){if(isString$1(a)){var s=lum(a,0);return s>.5?DARK_LABEL_COLOR:s>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(a)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(a){var s=this.style.fill;if(isString$1(s)){var l=this.__zr,u=!!(l&&l.isDarkMode()),c=lum(a,0)<DARK_MODE_THRESHOLD;if(u===c)return s}},n.prototype.buildPath=function(a,s,l){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(a){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,a),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},n.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return!(s==null||s==="none"||!(a.lineWidth>0))},n.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},n.prototype.getBoundingRect=function(){var a=this._rect,s=this.style,l=!a;if(l){var u=!1;this.path||(u=!0,this.createPathProxy());var c=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),a=c.getBoundingRect()}if(this._rect=a,this.hasStroke()&&this.path&&this.path.len()>0){var d=this._rectStroke||(this._rectStroke=a.clone());if(this.__dirty||l){d.copy(a);var Ct=s.strokeNoScale?this.getLineScale():1,ar=s.lineWidth;if(!this.hasFill()){var en=this.strokeContainThreshold;ar=Math.max(ar,en??4)}Ct>1e-10&&(d.width+=ar/Ct,d.height+=ar/Ct,d.x-=ar/Ct/2,d.y-=ar/Ct/2)}return d}return a},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect(),c=this.style;if(a=l[0],s=l[1],u.contain(a,s)){var d=this.path;if(this.hasStroke()){var Ct=c.lineWidth,ar=c.strokeNoScale?this.getLineScale():1;if(ar>1e-10&&(this.hasFill()||(Ct=Math.max(Ct,this.strokeContainThreshold)),containStroke(d,Ct/ar,a,s)))return!0}if(this.hasFill())return contain$2(d,a,s)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(a){return this.animate("shape",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():a==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(a,s){a==="shape"?this.setShape(s):t.prototype.attrKV.call(this,a,s)},n.prototype.setShape=function(a,s){var l=this.shape;return l||(l=this.shape={}),typeof a=="string"?l[a]=s:extend(l,a),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(a){return createObject(DEFAULT_PATH_STYLE,a)},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.shape&&!s.shape&&(s.shape=extend({},this.shape))},n.prototype._applyStateObj=function(a,s,l,u,c,d){t.prototype._applyStateObj.call(this,a,s,l,u,c,d);var Ct=!(s&&u),ar;if(s&&s.shape?c?u?ar=s.shape:(ar=extend({},l.shape),extend(ar,s.shape)):(ar=extend({},u?this.shape:l.shape),extend(ar,s.shape)):Ct&&(ar=l.shape),ar)if(c){this.shape=extend({},this.shape);for(var en={},tn=keys(ar),on=0;on<tn.length;on++){var cn=tn[on];typeof ar[cn]=="object"?this.shape[cn]=ar[cn]:en[cn]=ar[cn]}this._transitionState(a,{shape:en},d)}else this.shape=ar,this.dirtyShape()},n.prototype._mergeStates=function(a){for(var s=t.prototype._mergeStates.call(this,a),l,u=0;u<a.length;u++){var c=a[u];c.shape&&(l=l||{},this._mergeStyle(l,c.shape))}return l&&(s.shape=l),s},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(a){var s=(function(u){__extends(c,u);function c(d){var Ct=u.call(this,d)||this;return a.init&&a.init.call(Ct,d),Ct}return c.prototype.getDefaultStyle=function(){return clone$4(a.style)},c.prototype.getDefaultShape=function(){return clone$4(a.shape)},c})(n);for(var l in a)typeof a[l]=="function"&&(s.prototype[l]=a[l]);return s},n.initDefaultProps=(function(){var a=n.prototype;a.type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT})(),n})(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return s!=null&&s!=="none"&&a.lineWidth>0},n.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},n.prototype.createStyle=function(a){return createObject(DEFAULT_TSPAN_STYLE,a)},n.prototype.setBoundingRect=function(a){this._rect=a},n.prototype.getBoundingRect=function(){var a=this.style;if(!this._rect){var s=a.text;s!=null?s+="":s="";var l=getBoundingRect(s,a.font,a.textAlign,a.textBaseline);if(l.x+=a.x||0,l.y+=a.y||0,this.hasStroke()){var u=a.lineWidth;l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u}this._rect=l}return this._rect},n.initDefaultProps=(function(){var a=n.prototype;a.dirtyRectTolerance=10})(),n})(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var ZRImage=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.createStyle=function(a){return createObject(DEFAULT_IMAGE_STYLE,a)},n.prototype._getSize=function(a){var s=this.style,l=s[a];if(l!=null)return l;var u=isImageLike$1(s.image)?s.image:this.__image;if(!u)return 0;var c=a==="width"?"height":"width",d=s[c];return d==null?u[a]:u[a]/u[c]*d},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var a=this.style;return this._rect||(this._rect=new BoundingRect(a.x||0,a.y||0,this.getWidth(),this.getHeight())),this._rect},n})(Displayable);ZRImage.prototype.type="image";function buildPath$2(t,n){var a=n.x,s=n.y,l=n.width,u=n.height,c=n.r,d,Ct,ar,en;l<0&&(a=a+l,l=-l),u<0&&(s=s+u,u=-u),typeof c=="number"?d=Ct=ar=en=c:c instanceof Array?c.length===1?d=Ct=ar=en=c[0]:c.length===2?(d=ar=c[0],Ct=en=c[1]):c.length===3?(d=c[0],Ct=en=c[1],ar=c[2]):(d=c[0],Ct=c[1],ar=c[2],en=c[3]):d=Ct=ar=en=0;var tn;d+Ct>l&&(tn=d+Ct,d*=l/tn,Ct*=l/tn),ar+en>l&&(tn=ar+en,ar*=l/tn,en*=l/tn),Ct+ar>u&&(tn=Ct+ar,Ct*=u/tn,ar*=u/tn),d+en>u&&(tn=d+en,d*=u/tn,en*=u/tn),t.moveTo(a+d,s),t.lineTo(a+l-Ct,s),Ct!==0&&t.arc(a+l-Ct,s+Ct,Ct,-Math.PI/2,0),t.lineTo(a+l,s+u-ar),ar!==0&&t.arc(a+l-ar,s+u-ar,ar,0,Math.PI/2),t.lineTo(a+en,s+u),en!==0&&t.arc(a+en,s+u-en,en,Math.PI/2,Math.PI),t.lineTo(a,s+d),d!==0&&t.arc(a+d,s+d,d,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(t,n,a){if(n){var s=n.x1,l=n.x2,u=n.y1,c=n.y2;t.x1=s,t.x2=l,t.y1=u,t.y2=c;var d=a&&a.lineWidth;return d&&(round$2(s*2)===round$2(l*2)&&(t.x1=t.x2=subPixelOptimize$1(s,d,!0)),round$2(u*2)===round$2(c*2)&&(t.y1=t.y2=subPixelOptimize$1(u,d,!0))),t}}function subPixelOptimizeRect$1(t,n,a){if(n){var s=n.x,l=n.y,u=n.width,c=n.height;t.x=s,t.y=l,t.width=u,t.height=c;var d=a&&a.lineWidth;return d&&(t.x=subPixelOptimize$1(s,d,!0),t.y=subPixelOptimize$1(l,d,!0),t.width=Math.max(subPixelOptimize$1(s+u,d,!1)-t.x,u===0?0:1),t.height=Math.max(subPixelOptimize$1(l+c,d,!1)-t.y,c===0?0:1)),t}}function subPixelOptimize$1(t,n,a){if(!n)return t;var s=round$2(t*2);return(s+round$2(n))%2===0?s/2:(s+(a?1:-1))/2}var RectShape=(function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t})(),subPixelOptimizeOutputShape$1={},Rect$2=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(a,s){var l,u,c,d;if(this.subPixelOptimize){var Ct=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,s,this.style);l=Ct.x,u=Ct.y,c=Ct.width,d=Ct.height,Ct.r=s.r,s=Ct}else l=s.x,u=s.y,c=s.width,d=s.height;s.r?buildPath$2(a,s):a.rect(l,u,c,d)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n})(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.type="text",s._children=[],s._defaultStyle=DEFAULT_RICH_TEXT_COLOR,s.attr(a),s}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var a=0;a<this._children.length;a++){var s=this._children[a];s.zlevel=this.zlevel,s.z=this.z,s.z2=this.z2,s.culling=this.culling,s.cursor=this.cursor,s.invisible=this.invisible}},n.prototype.updateTransform=function(){var a=this.innerTransformable;a?(a.updateTransform(),a.transform&&(this.transform=a.transform)):t.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(a){var s=this.innerTransformable;return s?s.getLocalTransform(a):t.prototype.getLocalTransform.call(this,a)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=a},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var a=new BoundingRect(0,0,0,0),s=this._children,l=[],u=null,c=0;c<s.length;c++){var d=s[c],Ct=d.getBoundingRect(),ar=d.getLocalTransform(l);ar?(a.copy(Ct),a.applyTransform(ar),u=u||a.clone(),u.union(a)):(u=u||Ct.clone(),u.union(Ct))}this._rect=u||a}return this._rect},n.prototype.setDefaultTextStyle=function(a){this._defaultStyle=a||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(a){},n.prototype._mergeStyle=function(a,s){if(!s)return a;var l=s.rich,u=a.rich||l&&{};return extend(a,s),l&&u?(this._mergeRich(u,l),a.rich=u):u&&(a.rich=u),a},n.prototype._mergeRich=function(a,s){for(var l=keys(s),u=0;u<l.length;u++){var c=l[u];a[c]=a[c]||{},extend(a[c],s[c])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(a){var s=this._children[this._childCursor];return(!s||!(s instanceof a))&&(s=new a),this._children[this._childCursor++]=s,s.__zr=this.__zr,s.parent=this,s},n.prototype._updatePlainTexts=function(){var a=this.style,s=a.font||DEFAULT_FONT,l=a.padding,u=getStyleText(a),c=parsePlainText(u,a),d=needDrawBackground(a),Ct=!!a.backgroundColor,ar=c.outerHeight,en=c.outerWidth,tn=c.contentWidth,on=c.lines,cn=c.lineHeight,dn=this._defaultStyle;this.isTruncated=!!c.isTruncated;var Cn=a.x||0,In=a.y||0,ix=a.align||dn.align||"left",ax=a.verticalAlign||dn.verticalAlign||"top",ox=Cn,sx=adjustTextY(In,c.contentHeight,ax);if(d||l){var ux=adjustTextX(Cn,en,ix),cx=adjustTextY(In,ar,ax);d&&this._renderBackground(a,a,ux,cx,en,ar)}sx+=cn/2,l&&(ox=getTextXForPadding(Cn,ix,l),ax==="top"?sx+=l[0]:ax==="bottom"&&(sx-=l[2]));for(var hx=0,gx=!1,fx=getFill("fill"in a?a.fill:(gx=!0,dn.fill)),dx=getStroke("stroke"in a?a.stroke:!Ct&&(!dn.autoStroke||gx)?(hx=DEFAULT_STROKE_LINE_WIDTH,dn.stroke):null),mx=a.textShadowBlur>0,vx=a.width!=null&&(a.overflow==="truncate"||a.overflow==="break"||a.overflow==="breakAll"),bx=c.calculatedLineHeight,xx=0;xx<on.length;xx++){var _x=this._getOrCreateChild(TSpan),Ex=_x.createStyle();_x.useStyle(Ex),Ex.text=on[xx],Ex.x=ox,Ex.y=sx,Ex.textAlign=ix,Ex.textBaseline="middle",Ex.opacity=a.opacity,Ex.strokeFirst=!0,mx&&(Ex.shadowBlur=a.textShadowBlur||0,Ex.shadowColor=a.textShadowColor||"transparent",Ex.shadowOffsetX=a.textShadowOffsetX||0,Ex.shadowOffsetY=a.textShadowOffsetY||0),Ex.stroke=dx,Ex.fill=fx,dx&&(Ex.lineWidth=a.lineWidth||hx,Ex.lineDash=a.lineDash,Ex.lineDashOffset=a.lineDashOffset||0),Ex.font=s,setSeparateFont(Ex,a),sx+=cn,vx&&_x.setBoundingRect(new BoundingRect(adjustTextX(Ex.x,tn,Ex.textAlign),adjustTextY(Ex.y,bx,Ex.textBaseline),tn,bx))}},n.prototype._updateRichTexts=function(){var a=this.style,s=getStyleText(a),l=parseRichText(s,a),u=l.width,c=l.outerWidth,d=l.outerHeight,Ct=a.padding,ar=a.x||0,en=a.y||0,tn=this._defaultStyle,on=a.align||tn.align,cn=a.verticalAlign||tn.verticalAlign;this.isTruncated=!!l.isTruncated;var dn=adjustTextX(ar,c,on),Cn=adjustTextY(en,d,cn),In=dn,ix=Cn;Ct&&(In+=Ct[3],ix+=Ct[0]);var ax=In+u;needDrawBackground(a)&&this._renderBackground(a,a,dn,Cn,c,d);for(var ox=!!a.backgroundColor,sx=0;sx<l.lines.length;sx++){for(var ux=l.lines[sx],cx=ux.tokens,hx=cx.length,gx=ux.lineHeight,fx=ux.width,dx=0,mx=In,vx=ax,bx=hx-1,xx=void 0;dx<hx&&(xx=cx[dx],!xx.align||xx.align==="left");)this._placeToken(xx,a,gx,ix,mx,"left",ox),fx-=xx.width,mx+=xx.width,dx++;for(;bx>=0&&(xx=cx[bx],xx.align==="right");)this._placeToken(xx,a,gx,ix,vx,"right",ox),fx-=xx.width,vx-=xx.width,bx--;for(mx+=(u-(mx-In)-(ax-vx)-fx)/2;dx<=bx;)xx=cx[dx],this._placeToken(xx,a,gx,ix,mx+xx.width/2,"center",ox),mx+=xx.width,dx++;ix+=gx}},n.prototype._placeToken=function(a,s,l,u,c,d,Ct){var ar=s.rich[a.styleName]||{};ar.text=a.text;var en=a.verticalAlign,tn=u+l/2;en==="top"?tn=u+a.height/2:en==="bottom"&&(tn=u+l-a.height/2);var on=!a.isLineHolder&&needDrawBackground(ar);on&&this._renderBackground(ar,s,d==="right"?c-a.width:d==="center"?c-a.width/2:c,tn-a.height/2,a.width,a.height);var cn=!!ar.backgroundColor,dn=a.textPadding;dn&&(c=getTextXForPadding(c,d,dn),tn-=a.height/2-dn[0]-a.innerHeight/2);var Cn=this._getOrCreateChild(TSpan),In=Cn.createStyle();Cn.useStyle(In);var ix=this._defaultStyle,ax=!1,ox=0,sx=getFill("fill"in ar?ar.fill:"fill"in s?s.fill:(ax=!0,ix.fill)),ux=getStroke("stroke"in ar?ar.stroke:"stroke"in s?s.stroke:!cn&&!Ct&&(!ix.autoStroke||ax)?(ox=DEFAULT_STROKE_LINE_WIDTH,ix.stroke):null),cx=ar.textShadowBlur>0||s.textShadowBlur>0;In.text=a.text,In.x=c,In.y=tn,cx&&(In.shadowBlur=ar.textShadowBlur||s.textShadowBlur||0,In.shadowColor=ar.textShadowColor||s.textShadowColor||"transparent",In.shadowOffsetX=ar.textShadowOffsetX||s.textShadowOffsetX||0,In.shadowOffsetY=ar.textShadowOffsetY||s.textShadowOffsetY||0),In.textAlign=d,In.textBaseline="middle",In.font=a.font||DEFAULT_FONT,In.opacity=retrieve3(ar.opacity,s.opacity,1),setSeparateFont(In,ar),ux&&(In.lineWidth=retrieve3(ar.lineWidth,s.lineWidth,ox),In.lineDash=retrieve2(ar.lineDash,s.lineDash),In.lineDashOffset=s.lineDashOffset||0,In.stroke=ux),sx&&(In.fill=sx);var hx=a.contentWidth,gx=a.contentHeight;Cn.setBoundingRect(new BoundingRect(adjustTextX(In.x,hx,In.textAlign),adjustTextY(In.y,gx,In.textBaseline),hx,gx))},n.prototype._renderBackground=function(a,s,l,u,c,d){var Ct=a.backgroundColor,ar=a.borderWidth,en=a.borderColor,tn=Ct&&Ct.image,on=Ct&&!tn,cn=a.borderRadius,dn=this,Cn,In;if(on||a.lineHeight||ar&&en){Cn=this._getOrCreateChild(Rect$2),Cn.useStyle(Cn.createStyle()),Cn.style.fill=null;var ix=Cn.shape;ix.x=l,ix.y=u,ix.width=c,ix.height=d,ix.r=cn,Cn.dirtyShape()}if(on){var ax=Cn.style;ax.fill=Ct||null,ax.fillOpacity=retrieve2(a.fillOpacity,1)}else if(tn){In=this._getOrCreateChild(ZRImage),In.onload=function(){dn.dirtyStyle()};var ox=In.style;ox.image=Ct.image,ox.x=l,ox.y=u,ox.width=c,ox.height=d}if(ar&&en){var ax=Cn.style;ax.lineWidth=ar,ax.stroke=en,ax.strokeOpacity=retrieve2(a.strokeOpacity,1),ax.lineDash=a.borderDash,ax.lineDashOffset=a.borderDashOffset||0,Cn.strokeContainThreshold=0,Cn.hasFill()&&Cn.hasStroke()&&(ax.strokeFirst=!0,ax.lineWidth*=2)}var sx=(Cn||In).style;sx.shadowBlur=a.shadowBlur||0,sx.shadowColor=a.shadowColor||"transparent",sx.shadowOffsetX=a.shadowOffsetX||0,sx.shadowOffsetY=a.shadowOffsetY||0,sx.opacity=retrieve3(a.opacity,s.opacity,1)},n.makeFont=function(a){var s="";return hasSeparateFont(a)&&(s=[a.fontStyle,a.fontWeight,parseFontSize(a.fontSize),a.fontFamily||"sans-serif"].join(" ")),s&&trim$1(s)||a.textFont||a.font},n})(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?DEFAULT_FONT_SIZE+"px":t+"px"}function setSeparateFont(t,n){for(var a=0;a<FONT_PARTS.length;a++){var s=FONT_PARTS[a],l=n[s];l!=null&&(t[s]=l)}}function hasSeparateFont(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function normalizeTextStyle(t){return normalizeStyle(t),each$f(t.rich,normalizeStyle),t}function normalizeStyle(t){if(t){t.font=ZRText.makeFont(t);var n=t.align;n==="middle"&&(n="center"),t.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var a=t.verticalAlign;a==="center"&&(a="middle"),t.verticalAlign=a==null||VALID_TEXT_VERTICAL_ALIGN[a]?a:"top";var s=t.padding;s&&(t.padding=normalizeCssArray$1(t.padding))}}function getStroke(t,n){return t==null||n<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function getFill(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function getTextXForPadding(t,n,a){return n==="right"?t-a[1]:n==="center"?t+a[3]/2-a[1]/2:t+a[3]}function getStyleText(t){var n=t.text;return n!=null&&(n+=""),n}function needDrawBackground(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var getECData=makeInner(),setCommonECData=function(t,n,a,s){if(s){var l=getECData(s);l.dataIndex=a,l.dataType=n,l.seriesIndex=t,l.ssrType="chart",s.type==="group"&&s.traverse(function(u){var c=getECData(u);c.seriesIndex=t,c.dataIndex=a,c.dataType=n,c.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(t){return t!=null&&t!=="none"}function doChangeHoverState(t,n,a){t.onHoverStateChange&&(t.hoverState||0)!==a&&t.onHoverStateChange(n),t.hoverState=a}function singleEnterEmphasis(t){doChangeHoverState(t,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(t){t.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(t){doChangeHoverState(t,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(t){t.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(t){t.selected=!0}function singleLeaveSelect(t){t.selected=!1}function updateElementState(t,n,a){n(t,a)}function traverseUpdateState(t,n,a){updateElementState(t,n,a),t.isGroup&&t.traverse(function(s){updateElementState(s,n,a)})}function setStatesFlag(t,n){switch(n){case"emphasis":t.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":t.hoverState=HOVER_STATE_NORMAL;break;case"blur":t.hoverState=HOVER_STATE_BLUR;break;case"select":t.selected=!0}}function getFromStateStyle(t,n,a,s){for(var l=t.style,u={},c=0;c<n.length;c++){var d=n[c],Ct=l[d];u[d]=Ct??(s&&s[d])}for(var c=0;c<t.animators.length;c++){var ar=t.animators[c];ar.__fromStateTransition&&ar.__fromStateTransition.indexOf(a)<0&&ar.targetName==="style"&&ar.saveTo(u,n)}return u}function createEmphasisDefaultState(t,n,a,s){var l=a&&indexOf(a,"select")>=0,u=!1;if(t instanceof Path){var c=getSavedStates(t),d=l&&c.selectFill||c.normalFill,Ct=l&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(d)||hasFillOrStroke(Ct)){s=s||{};var ar=s.style||{};ar.fill==="inherit"?(u=!0,s=extend({},s),ar=extend({},ar),ar.fill=d):!hasFillOrStroke(ar.fill)&&hasFillOrStroke(d)?(u=!0,s=extend({},s),ar=extend({},ar),ar.fill=liftColor(d)):!hasFillOrStroke(ar.stroke)&&hasFillOrStroke(Ct)&&(u||(s=extend({},s),ar=extend({},ar)),ar.stroke=liftColor(Ct)),s.style=ar}}if(s&&s.z2==null){u||(s=extend({},s));var en=t.z2EmphasisLift;s.z2=t.z2+(en??Z2_EMPHASIS_LIFT)}return s}function createSelectDefaultState(t,n,a){if(a&&a.z2==null){a=extend({},a);var s=t.z2SelectLift;a.z2=t.z2+(s??Z2_SELECT_LIFT)}return a}function createBlurDefaultState(t,n,a){var s=indexOf(t.currentStates,n)>=0,l=t.style.opacity,u=s?null:getFromStateStyle(t,["opacity"],n,{opacity:1});a=a||{};var c=a.style||{};return c.opacity==null&&(a=extend({},a),c=extend({opacity:s?l:u.opacity*.1},c),a.style=c),a}function elementStateProxy(t,n){var a=this.states[t];if(this.style){if(t==="emphasis")return createEmphasisDefaultState(this,t,n,a);if(t==="blur")return createBlurDefaultState(this,t,a);if(t==="select")return createSelectDefaultState(this,t,a)}return a}function setDefaultStateProxy(t){t.stateProxy=elementStateProxy;var n=t.getTextContent(),a=t.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),a&&(a.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleLeaveEmphasis)}function enterEmphasis(t,n){t.__highByOuter|=1<<(n||0),traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasis(t,n){!(t.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(t,singleLeaveEmphasis)}function enterBlur(t){traverseUpdateState(t,singleEnterBlur)}function leaveBlur(t){traverseUpdateState(t,singleLeaveBlur)}function enterSelect(t){traverseUpdateState(t,singleEnterSelect)}function leaveSelect(t){traverseUpdateState(t,singleLeaveSelect)}function shouldSilent(t,n){return t.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(t){var n=t.getModel(),a=[],s=[];n.eachComponent(function(l,u){var c=getComponentStates(u),d=l==="series",Ct=d?t.getViewOfSeriesModel(u):t.getViewOfComponentModel(u);!d&&s.push(Ct),c.isBlured&&(Ct.group.traverse(function(ar){singleLeaveBlur(ar)}),d&&a.push(u)),c.isBlured=!1}),each$f(s,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(a,!1,n)})}function blurSeries(t,n,a,s){var l=s.getModel();a=a||"coordinateSystem";function u(ar,en){for(var tn=0;tn<en.length;tn++){var on=ar.getItemGraphicEl(en[tn]);on&&leaveBlur(on)}}if(t!=null&&!(!n||n==="none")){var c=l.getSeriesByIndex(t),d=c.coordinateSystem;d&&d.master&&(d=d.master);var Ct=[];l.eachSeries(function(ar){var en=c===ar,tn=ar.coordinateSystem;tn&&tn.master&&(tn=tn.master);var on=tn&&d?tn===d:en;if(!(a==="series"&&!en||a==="coordinateSystem"&&!on||n==="series"&&en)){var cn=s.getViewOfSeriesModel(ar);if(cn.group.traverse(function(In){In.__highByOuter&&en&&n==="self"||singleEnterBlur(In)}),isArrayLike(n))u(ar.getData(),n);else if(isObject$3(n))for(var dn=keys(n),Cn=0;Cn<dn.length;Cn++)u(ar.getData(dn[Cn]),n[dn[Cn]]);Ct.push(ar),getComponentStates(ar).isBlured=!0}}),l.eachComponent(function(ar,en){if(ar!=="series"){var tn=s.getViewOfComponentModel(en);tn&&tn.toggleBlurSeries&&tn.toggleBlurSeries(Ct,!0,l)}})}}function blurComponent(t,n,a){if(!(t==null||n==null)){var s=a.getModel().getComponent(t,n);if(s){getComponentStates(s).isBlured=!0;var l=a.getViewOfComponentModel(s);!l||!l.focusBlurEnabled||l.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(t,n,a){var s=t.seriesIndex,l=t.getData(n.dataType);if(l){var u=queryDataIndex(l,n);u=(isArray$1(u)?u[0]:u)||0;var c=l.getItemGraphicEl(u);if(!c)for(var d=l.count(),Ct=0;!c&&Ct<d;)c=l.getItemGraphicEl(Ct++);if(c){var ar=getECData(c);blurSeries(s,ar.focus,ar.blurScope,a)}else{var en=t.get(["emphasis","focus"]),tn=t.get(["emphasis","blurScope"]);en!=null&&blurSeries(s,en,tn,a)}}}function findComponentHighDownDispatchers(t,n,a,s){var l={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||n==null||a==null)return l;var u=s.getModel().getComponent(t,n);if(!u)return l;var c=s.getViewOfComponentModel(u);if(!c||!c.findHighDownDispatchers)return l;for(var d=c.findHighDownDispatchers(a),Ct,ar=0;ar<d.length;ar++)if(getECData(d[ar]).focus==="self"){Ct=!0;break}return{focusSelf:Ct,dispatchers:d}}function handleGlobalMouseOverForHighDown(t,n,a){var s=getECData(t),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a),u=l.dispatchers,c=l.focusSelf;u?(c&&blurComponent(s.componentMainType,s.componentIndex,a),each$f(u,function(d){return enterEmphasisWhenMouseOver(d,n)})):(blurSeries(s.seriesIndex,s.focus,s.blurScope,a),s.focus==="self"&&blurComponent(s.componentMainType,s.componentIndex,a),enterEmphasisWhenMouseOver(t,n))}function handleGlobalMouseOutForHighDown(t,n,a){allLeaveBlur(a);var s=getECData(t),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a).dispatchers;l?each$f(l,function(u){return leaveEmphasisWhenMouseOut(u,n)}):leaveEmphasisWhenMouseOut(t,n)}function toggleSelectionFromPayload(t,n,a){if(isSelectChangePayload(n)){var s=n.dataType,l=t.getData(s),u=queryDataIndex(l,n);isArray$1(u)||(u=[u]),t[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](u,s)}}function updateSeriesElementSelection(t){var n=t.getAllData();each$f(n,function(a){var s=a.data,l=a.type;s.eachItemGraphicEl(function(u,c){t.isSelected(c,l)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(t){var n=[];return t.eachSeries(function(a){var s=a.getAllData();each$f(s,function(l){l.data;var u=l.type,c=a.getSelectedDataIndices();if(c.length>0){var d={dataIndex:c,seriesIndex:a.seriesIndex};u!=null&&(d.dataType=u),n.push(d)}})}),n}function enableHoverEmphasis(t,n,a){setAsHighDownDispatcher(t,!0),traverseUpdateState(t,setDefaultStateProxy),enableHoverFocus(t,n,a)}function disableHoverEmphasis(t){setAsHighDownDispatcher(t,!1)}function toggleHoverEmphasis(t,n,a,s){s?disableHoverEmphasis(t):enableHoverEmphasis(t,n,a)}function enableHoverFocus(t,n,a){var s=getECData(t);n!=null?(s.focus=n,s.blurScope=a):s.focus&&(s.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(t,n,a,s){a=a||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var u=OTHER_STATES[l],c=n.getModel([u,a]),d=t.ensureState(u);d.style=s?s(c):c[defaultStyleGetterMap[a]]()}}function setAsHighDownDispatcher(t,n){var a=n===!1,s=t;t.highDownSilentOnTouch&&(s.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!a||s.__highDownDispatcher)&&(s.__highByOuter=s.__highByOuter||0,s.__highDownDispatcher=!a)}function isHighDownDispatcher(t){return!!(t&&t.__highDownDispatcher)}function enableComponentHighDownFeatures(t,n,a){var s=getECData(t);s.componentMainType=n.mainType,s.componentIndex=n.componentIndex,s.componentHighDownName=a}function getHighlightDigit(t){var n=_highlightKeyMap[t];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[t]=_highlightNextDigit++),n}function isSelectChangePayload(t){var n=t.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(t){var n=t.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(t){var n=getSavedStates(t);n.normalFill=t.style.fill,n.normalStroke=t.style.stroke;var a=t.states.select||{};n.selectFill=a.style&&a.style.fill||null,n.selectStroke=a.style&&a.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(t,n){if(n){var a=t.data,s=t.len(),l,u,c,d,Ct,ar,en=CMD$2.M,tn=CMD$2.C,on=CMD$2.L,cn=CMD$2.R,dn=CMD$2.A,Cn=CMD$2.Q;for(c=0,d=0;c<s;){switch(l=a[c++],d=c,u=0,l){case en:u=1;break;case on:u=1;break;case tn:u=3;break;case Cn:u=2;break;case dn:var In=n[4],ix=n[5],ax=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),ox=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),sx=mathAtan2(-n[1]/ox,n[0]/ax);a[c]*=ax,a[c++]+=In,a[c]*=ox,a[c++]+=ix,a[c++]*=ax,a[c++]*=ox,a[c++]+=sx,a[c++]+=sx,c+=2,d=c;break;case cn:ar[0]=a[c++],ar[1]=a[c++],applyTransform$1(ar,ar,n),a[d++]=ar[0],a[d++]=ar[1],ar[0]+=a[c++],ar[1]+=a[c++],applyTransform$1(ar,ar,n),a[d++]=ar[0],a[d++]=ar[1]}for(Ct=0;Ct<u;Ct++){var ux=points$2[Ct];ux[0]=a[c++],ux[1]=a[c++],applyTransform$1(ux,ux,n),a[d++]=ux[0],a[d++]=ux[1]}}t.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vRatio(t,n){return(t[0]*n[0]+t[1]*n[1])/(vMag(t)*vMag(n))}function vAngle(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(vRatio(t,n))}function processArc(t,n,a,s,l,u,c,d,Ct,ar,en){var tn=Ct*(PI$7/180),on=mathCos$2(tn)*(t-a)/2+mathSin$2(tn)*(n-s)/2,cn=-1*mathSin$2(tn)*(t-a)/2+mathCos$2(tn)*(n-s)/2,dn=on*on/(c*c)+cn*cn/(d*d);dn>1&&(c*=mathSqrt$1(dn),d*=mathSqrt$1(dn));var Cn=(l===u?-1:1)*mathSqrt$1((c*c*(d*d)-c*c*(cn*cn)-d*d*(on*on))/(c*c*(cn*cn)+d*d*(on*on)))||0,In=Cn*c*cn/d,ix=Cn*-d*on/c,ax=(t+a)/2+mathCos$2(tn)*In-mathSin$2(tn)*ix,ox=(n+s)/2+mathSin$2(tn)*In+mathCos$2(tn)*ix,sx=vAngle([1,0],[(on-In)/c,(cn-ix)/d]),ux=[(on-In)/c,(cn-ix)/d],cx=[(-1*on-In)/c,(-1*cn-ix)/d],hx=vAngle(ux,cx);if(vRatio(ux,cx)<=-1&&(hx=PI$7),vRatio(ux,cx)>=1&&(hx=0),hx<0){var gx=Math.round(hx/PI$7*1e6)/1e6;hx=PI$7*2+gx%2*PI$7}en.addData(ar,ax,ox,c,d,sx,hx,tn,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(t){var n=new PathProxy;if(!t)return n;var a=0,s=0,l=a,u=s,c,d=PathProxy.CMD,Ct=t.match(commandReg);if(!Ct)return n;for(var ar=0;ar<Ct.length;ar++){for(var en=Ct[ar],tn=en.charAt(0),on=void 0,cn=en.match(numberReg$1)||[],dn=cn.length,Cn=0;Cn<dn;Cn++)cn[Cn]=parseFloat(cn[Cn]);for(var In=0;In<dn;){var ix=void 0,ax=void 0,ox=void 0,sx=void 0,ux=void 0,cx=void 0,hx=void 0,gx=a,fx=s,dx=void 0,mx=void 0;switch(tn){case"l":a+=cn[In++],s+=cn[In++],on=d.L,n.addData(on,a,s);break;case"L":a=cn[In++],s=cn[In++],on=d.L,n.addData(on,a,s);break;case"m":a+=cn[In++],s+=cn[In++],on=d.M,n.addData(on,a,s),l=a,u=s,tn="l";break;case"M":a=cn[In++],s=cn[In++],on=d.M,n.addData(on,a,s),l=a,u=s,tn="L";break;case"h":a+=cn[In++],on=d.L,n.addData(on,a,s);break;case"H":a=cn[In++],on=d.L,n.addData(on,a,s);break;case"v":s+=cn[In++],on=d.L,n.addData(on,a,s);break;case"V":s=cn[In++],on=d.L,n.addData(on,a,s);break;case"C":on=d.C,n.addData(on,cn[In++],cn[In++],cn[In++],cn[In++],cn[In++],cn[In++]),a=cn[In-2],s=cn[In-1];break;case"c":on=d.C,n.addData(on,cn[In++]+a,cn[In++]+s,cn[In++]+a,cn[In++]+s,cn[In++]+a,cn[In++]+s),a+=cn[In-2],s+=cn[In-1];break;case"S":ix=a,ax=s,dx=n.len(),mx=n.data,c===d.C&&(ix+=a-mx[dx-4],ax+=s-mx[dx-3]),on=d.C,gx=cn[In++],fx=cn[In++],a=cn[In++],s=cn[In++],n.addData(on,ix,ax,gx,fx,a,s);break;case"s":ix=a,ax=s,dx=n.len(),mx=n.data,c===d.C&&(ix+=a-mx[dx-4],ax+=s-mx[dx-3]),on=d.C,gx=a+cn[In++],fx=s+cn[In++],a+=cn[In++],s+=cn[In++],n.addData(on,ix,ax,gx,fx,a,s);break;case"Q":gx=cn[In++],fx=cn[In++],a=cn[In++],s=cn[In++],on=d.Q,n.addData(on,gx,fx,a,s);break;case"q":gx=cn[In++]+a,fx=cn[In++]+s,a+=cn[In++],s+=cn[In++],on=d.Q,n.addData(on,gx,fx,a,s);break;case"T":ix=a,ax=s,dx=n.len(),mx=n.data,c===d.Q&&(ix+=a-mx[dx-4],ax+=s-mx[dx-3]),a=cn[In++],s=cn[In++],on=d.Q,n.addData(on,ix,ax,a,s);break;case"t":ix=a,ax=s,dx=n.len(),mx=n.data,c===d.Q&&(ix+=a-mx[dx-4],ax+=s-mx[dx-3]),a+=cn[In++],s+=cn[In++],on=d.Q,n.addData(on,ix,ax,a,s);break;case"A":ox=cn[In++],sx=cn[In++],ux=cn[In++],cx=cn[In++],hx=cn[In++],gx=a,fx=s,a=cn[In++],s=cn[In++],on=d.A,processArc(gx,fx,a,s,cx,hx,ox,sx,ux,on,n);break;case"a":ox=cn[In++],sx=cn[In++],ux=cn[In++],cx=cn[In++],hx=cn[In++],gx=a,fx=s,a+=cn[In++],s+=cn[In++],on=d.A,processArc(gx,fx,a,s,cx,hx,ox,sx,ux,on,n);break}}(tn==="z"||tn==="Z")&&(on=d.Z,n.addData(on),a=l,s=u),c=on}return n.toStatic(),n}var SVGPath=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.applyTransform=function(a){},n})(Path);function isPathProxy(t){return t.setData!=null}function createPathOptions(t,n){var a=createPathProxyFromString(t),s=extend({},n);return s.buildPath=function(l){if(isPathProxy(l)){l.setData(a.data);var u=l.getContext();u&&l.rebuildPath(u,1)}else{var u=l;a.rebuildPath(u,1)}},s.applyTransform=function(l){transformPath(a,l),this.dirtyShape()},s}function createFromString(t,n){return new SVGPath(createPathOptions(t,n))}function extendFromString(t,n){var a=createPathOptions(t,n),s=(function(l){__extends(u,l);function u(c){var d=l.call(this,c)||this;return d.applyTransform=a.applyTransform,d.buildPath=a.buildPath,d}return u})(SVGPath);return s}function mergePath$1(t,n){for(var a=[],s=t.length,l=0;l<s;l++){var u=t[l];a.push(u.getUpdatedPathProxy(!0))}var c=new Path(n);return c.createPathProxy(),c.buildPath=function(d){if(isPathProxy(d)){d.appendPath(a);var Ct=d.getContext();Ct&&d.rebuildPath(Ct,1)}},c}function clonePath(t,n){n=n||{};var a=new Path;return t.shape&&a.setShape(t.shape),a.setStyle(t.style),n.bakeTransform?transformPath(a.path,t.getComputedTransform()):n.toLocal?a.setLocalTransform(t.getComputedTransform()):a.copyTransform(t),a.buildPath=t.buildPath,a.applyTransform=a.applyTransform,a.z=t.z,a.z2=t.z2,a.zlevel=t.zlevel,a}var CircleShape=(function(){function t(){this.cx=0,this.cy=0,this.r=0}return t})(),Circle=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(a,s){a.moveTo(s.cx+s.r,s.cy),a.arc(s.cx,s.cy,s.r,0,Math.PI*2)},n})(Path);Circle.prototype.type="circle";var EllipseShape=(function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t})(),Ellipse=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(a,s){var l=.5522848,u=s.cx,c=s.cy,d=s.rx,Ct=s.ry,ar=d*l,en=Ct*l;a.moveTo(u-d,c),a.bezierCurveTo(u-d,c-en,u-ar,c-Ct,u,c-Ct),a.bezierCurveTo(u+ar,c-Ct,u+d,c-en,u+d,c),a.bezierCurveTo(u+d,c+en,u+ar,c+Ct,u,c+Ct),a.bezierCurveTo(u-ar,c+Ct,u-d,c+en,u-d,c),a.closePath()},n})(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=tn*Ct-en*ar;if(!(on*on<e))return on=(en*(n-u)-tn*(t-l))/on,[t+on*Ct,n+on*ar]}function computeCornerTangents(t,n,a,s,l,u,c){var d=t-a,Ct=n-s,ar=(c?u:-u)/mathSqrt(d*d+Ct*Ct),en=ar*Ct,tn=-ar*d,on=t+en,cn=n+tn,dn=a+en,Cn=s+tn,In=(on+dn)/2,ix=(cn+Cn)/2,ax=dn-on,ox=Cn-cn,sx=ax*ax+ox*ox,ux=l-u,cx=on*Cn-dn*cn,hx=(ox<0?-1:1)*mathSqrt(mathMax$7(0,ux*ux*sx-cx*cx)),gx=(cx*ox-ax*hx)/sx,fx=(-cx*ax-ox*hx)/sx,dx=(cx*ox+ax*hx)/sx,mx=(-cx*ax+ox*hx)/sx,vx=gx-In,bx=fx-ix,xx=dx-In,_x=mx-ix;return vx*vx+bx*bx>xx*xx+_x*_x&&(gx=dx,fx=mx),{cx:gx,cy:fx,x0:-en,y0:-tn,x1:gx*(l/ux-1),y1:fx*(l/ux-1)}}function normalizeCornerRadius(t){var n;if(isArray$1(t)){var a=t.length;if(!a)return t;a===1?n=[t[0],t[0],0,0]:a===2?n=[t[0],t[0],t[1],t[1]]:a===3?n=t.concat(t[2]):n=t}else n=[t,t,t,t];return n}function buildPath$1(t,n){var a,s=mathMax$7(n.r,0),l=mathMax$7(n.r0||0,0),u=s>0,c=l>0;if(!(!u&&!c)){if(u||(s=l,l=0),l>s){var d=s;s=l,l=d}var Ct=n.startAngle,ar=n.endAngle;if(!(isNaN(Ct)||isNaN(ar))){var en=n.cx,tn=n.cy,on=!!n.clockwise,cn=mathAbs$1(ar-Ct),dn=cn>PI2$3&&cn%PI2$3;if(dn>e&&(cn=dn),!(s>e))t.moveTo(en,tn);else if(cn>PI2$3-e)t.moveTo(en+s*mathCos$1(Ct),tn+s*mathSin$1(Ct)),t.arc(en,tn,s,Ct,ar,!on),l>e&&(t.moveTo(en+l*mathCos$1(ar),tn+l*mathSin$1(ar)),t.arc(en,tn,l,ar,Ct,on));else{var Cn=void 0,In=void 0,ix=void 0,ax=void 0,ox=void 0,sx=void 0,ux=void 0,cx=void 0,hx=void 0,gx=void 0,fx=void 0,dx=void 0,mx=void 0,vx=void 0,bx=void 0,xx=void 0,_x=s*mathCos$1(Ct),Ex=s*mathSin$1(Ct),Tx=l*mathCos$1(ar),Cx=l*mathSin$1(ar),Mx=cn>e;if(Mx){var Ax=n.cornerRadius;Ax&&(a=normalizeCornerRadius(Ax),Cn=a[0],In=a[1],ix=a[2],ax=a[3]);var Nx=mathAbs$1(s-l)/2;if(ox=mathMin$7(Nx,ix),sx=mathMin$7(Nx,ax),ux=mathMin$7(Nx,Cn),cx=mathMin$7(Nx,In),fx=hx=mathMax$7(ox,sx),dx=gx=mathMax$7(ux,cx),(hx>e||gx>e)&&(mx=s*mathCos$1(ar),vx=s*mathSin$1(ar),bx=l*mathCos$1(Ct),xx=l*mathSin$1(Ct),cn<PI$6)){var Ux=intersect(_x,Ex,bx,xx,mx,vx,Tx,Cx);if(Ux){var Rx=_x-Ux[0],Ox=Ex-Ux[1],Px=mx-Ux[0],$x=vx-Ux[1],Lx=1/mathSin$1(mathACos((Rx*Px+Ox*$x)/(mathSqrt(Rx*Rx+Ox*Ox)*mathSqrt(Px*Px+$x*$x)))/2),zx=mathSqrt(Ux[0]*Ux[0]+Ux[1]*Ux[1]);fx=mathMin$7(hx,(s-zx)/(Lx+1)),dx=mathMin$7(gx,(l-zx)/(Lx-1))}}}if(!Mx)t.moveTo(en+_x,tn+Ex);else if(fx>e){var qx=mathMin$7(ix,fx),jx=mathMin$7(ax,fx),Hx=computeCornerTangents(bx,xx,_x,Ex,s,qx,on),Vx=computeCornerTangents(mx,vx,Tx,Cx,s,jx,on);t.moveTo(en+Hx.cx+Hx.x0,tn+Hx.cy+Hx.y0),fx<hx&&qx===jx?t.arc(en+Hx.cx,tn+Hx.cy,fx,mathATan2(Hx.y0,Hx.x0),mathATan2(Vx.y0,Vx.x0),!on):(qx>0&&t.arc(en+Hx.cx,tn+Hx.cy,qx,mathATan2(Hx.y0,Hx.x0),mathATan2(Hx.y1,Hx.x1),!on),t.arc(en,tn,s,mathATan2(Hx.cy+Hx.y1,Hx.cx+Hx.x1),mathATan2(Vx.cy+Vx.y1,Vx.cx+Vx.x1),!on),jx>0&&t.arc(en+Vx.cx,tn+Vx.cy,jx,mathATan2(Vx.y1,Vx.x1),mathATan2(Vx.y0,Vx.x0),!on))}else t.moveTo(en+_x,tn+Ex),t.arc(en,tn,s,Ct,ar,!on);if(!(l>e)||!Mx)t.lineTo(en+Tx,tn+Cx);else if(dx>e){var qx=mathMin$7(Cn,dx),jx=mathMin$7(In,dx),Hx=computeCornerTangents(Tx,Cx,mx,vx,l,-jx,on),Vx=computeCornerTangents(_x,Ex,bx,xx,l,-qx,on);t.lineTo(en+Hx.cx+Hx.x0,tn+Hx.cy+Hx.y0),dx<gx&&qx===jx?t.arc(en+Hx.cx,tn+Hx.cy,dx,mathATan2(Hx.y0,Hx.x0),mathATan2(Vx.y0,Vx.x0),!on):(jx>0&&t.arc(en+Hx.cx,tn+Hx.cy,jx,mathATan2(Hx.y0,Hx.x0),mathATan2(Hx.y1,Hx.x1),!on),t.arc(en,tn,l,mathATan2(Hx.cy+Hx.y1,Hx.cx+Hx.x1),mathATan2(Vx.cy+Vx.y1,Vx.cx+Vx.x1),on),qx>0&&t.arc(en+Vx.cx,tn+Vx.cy,qx,mathATan2(Vx.y1,Vx.x1),mathATan2(Vx.y0,Vx.x0),!on))}else t.lineTo(en+Tx,tn+Cx),t.arc(en,tn,l,ar,Ct,on)}t.closePath()}}}var SectorShape=(function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t})(),Sector=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(a,s){buildPath$1(a,s)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n})(Path);Sector.prototype.type="sector";var RingShape=(function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t})(),Ring=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.PI*2;a.moveTo(l+s.r,u),a.arc(l,u,s.r,0,c,!1),a.moveTo(l+s.r0,u),a.arc(l,u,s.r0,0,c,!0)},n})(Path);Ring.prototype.type="ring";function smoothBezier(t,n,a,s){var l=[],u=[],c=[],d=[],Ct,ar,en,tn;if(s){en=[1/0,1/0],tn=[-1/0,-1/0];for(var on=0,cn=t.length;on<cn;on++)min$1(en,en,t[on]),max$1(tn,tn,t[on]);min$1(en,en,s[0]),max$1(tn,tn,s[1])}for(var on=0,cn=t.length;on<cn;on++){var dn=t[on];if(a)Ct=t[on?on-1:cn-1],ar=t[(on+1)%cn];else if(on===0||on===cn-1){l.push(clone$3(t[on]));continue}else Ct=t[on-1],ar=t[on+1];sub(u,ar,Ct),scale$2(u,u,n);var Cn=distance(dn,Ct),In=distance(dn,ar),ix=Cn+In;ix!==0&&(Cn/=ix,In/=ix),scale$2(c,u,-Cn),scale$2(d,u,In);var ax=add([],dn,c),ox=add([],dn,d);s&&(max$1(ax,ax,en),min$1(ax,ax,tn),max$1(ox,ox,en),min$1(ox,ox,tn)),l.push(ax),l.push(ox)}return a&&l.push(l.shift()),l}function buildPath(t,n,a){var s=n.smooth,l=n.points;if(l&&l.length>=2){if(s){var u=smoothBezier(l,s,a,n.smoothConstraint);t.moveTo(l[0][0],l[0][1]);for(var c=l.length,d=0;d<(a?c:c-1);d++){var Ct=u[d*2],ar=u[d*2+1],en=l[(d+1)%c];t.bezierCurveTo(Ct[0],Ct[1],ar[0],ar[1],en[0],en[1])}}else{t.moveTo(l[0][0],l[0][1]);for(var d=1,tn=l.length;d<tn;d++)t.lineTo(l[d][0],l[d][1])}a&&t.closePath()}}var PolygonShape=(function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t})(),Polygon=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(a,s){buildPath(a,s,!0)},n})(Path);Polygon.prototype.type="polygon";var PolylineShape=(function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t})(),Polyline$1=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(a,s){buildPath(a,s,!1)},n})(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t})(),Line$1=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(a,s){var l,u,c,d;if(this.subPixelOptimize){var Ct=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,s,this.style);l=Ct.x1,u=Ct.y1,c=Ct.x2,d=Ct.y2}else l=s.x1,u=s.y1,c=s.x2,d=s.y2;var ar=s.percent;ar!==0&&(a.moveTo(l,u),ar<1&&(c=l*(1-ar)+c*ar,d=u*(1-ar)+d*ar),a.lineTo(c,d))},n.prototype.pointAt=function(a){var s=this.shape;return[s.x1*(1-a)+s.x2*a,s.y1*(1-a)+s.y2*a]},n})(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t})();function someVectorAt(t,n,a){var s=t.cpx2,l=t.cpy2;return s!=null||l!=null?[(a?cubicDerivativeAt:cubicAt)(t.x1,t.cpx1,t.cpx2,t.x2,n),(a?cubicDerivativeAt:cubicAt)(t.y1,t.cpy1,t.cpy2,t.y2,n)]:[(a?quadraticDerivativeAt:quadraticAt$1)(t.x1,t.cpx1,t.x2,n),(a?quadraticDerivativeAt:quadraticAt$1)(t.y1,t.cpy1,t.y2,n)]}var BezierCurve=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(a,s){var l=s.x1,u=s.y1,c=s.x2,d=s.y2,Ct=s.cpx1,ar=s.cpy1,en=s.cpx2,tn=s.cpy2,on=s.percent;on!==0&&(a.moveTo(l,u),en==null||tn==null?(on<1&&(quadraticSubdivide(l,Ct,c,on,out),Ct=out[1],c=out[2],quadraticSubdivide(u,ar,d,on,out),ar=out[1],d=out[2]),a.quadraticCurveTo(Ct,ar,c,d)):(on<1&&(cubicSubdivide(l,Ct,en,c,on,out),Ct=out[1],en=out[2],c=out[3],cubicSubdivide(u,ar,tn,d,on,out),ar=out[1],tn=out[2],d=out[3]),a.bezierCurveTo(Ct,ar,en,tn,c,d)))},n.prototype.pointAt=function(a){return someVectorAt(this.shape,a,!1)},n.prototype.tangentAt=function(a){var s=someVectorAt(this.shape,a,!0);return normalize$3(s,s)},n})(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=(function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t})(),Arc=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.max(s.r,0),d=s.startAngle,Ct=s.endAngle,ar=s.clockwise,en=Math.cos(d),tn=Math.sin(d);a.moveTo(en*c+l,tn*c+u),a.arc(l,u,c,d,Ct,!ar)},n})(Path);Arc.prototype.type="arc";var CompoundPath=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="compound",a}return n.prototype._updatePathDirty=function(){for(var a=this.shape.paths,s=this.shapeChanged(),l=0;l<a.length;l++)s=s||a[l].shapeChanged();s&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var a=this.shape.paths||[],s=this.getGlobalScale(),l=0;l<a.length;l++)a[l].path||a[l].createPathProxy(),a[l].path.setScale(s[0],s[1],a[l].segmentIgnoreThreshold)},n.prototype.buildPath=function(a,s){for(var l=s.paths||[],u=0;u<l.length;u++)l[u].buildPath(a,l[u].shape,!0)},n.prototype.afterBrush=function(){for(var a=this.shape.paths||[],s=0;s<a.length;s++)a[s].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},n})(Path),Gradient=(function(){function t(n){this.colorStops=n||[]}return t.prototype.addColorStop=function(n,a){this.colorStops.push({offset:n,color:a})},t})(),LinearGradient=(function(t){__extends(n,t);function n(a,s,l,u,c,d){var Ct=t.call(this,c)||this;return Ct.x=a??0,Ct.y=s??0,Ct.x2=l??1,Ct.y2=u??0,Ct.type="linear",Ct.global=d||!1,Ct}return n})(Gradient),RadialGradient=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,u)||this;return d.x=a??.5,d.y=s??.5,d.r=l??.5,d.type="radial",d.global=c||!1,d}return n})(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=(function(){function t(n,a){this._corners=[],this._axes=[],this._origin=[0,0];for(var s=0;s<4;s++)this._corners[s]=new Point;for(var s=0;s<2;s++)this._axes[s]=new Point;n&&this.fromBoundingRect(n,a)}return t.prototype.fromBoundingRect=function(n,a){var s=this._corners,l=this._axes,u=n.x,c=n.y,d=u+n.width,Ct=c+n.height;if(s[0].set(u,c),s[1].set(d,c),s[2].set(d,Ct),s[3].set(u,Ct),a)for(var ar=0;ar<4;ar++)s[ar].transform(a);Point.sub(l[0],s[1],s[0]),Point.sub(l[1],s[3],s[0]),l[0].normalize(),l[1].normalize();for(var ar=0;ar<2;ar++)this._origin[ar]=l[ar].dot(s[0])},t.prototype.intersect=function(n,a){var s=!0,l=!a;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,n,minTv,maxTv,l,1)&&(s=!1,l)||!this._intersectCheckOneSide(n,this,minTv,maxTv,l,-1)&&(s=!1,l)||l||Point.copy(a,s?minTv:maxTv),s},t.prototype._intersectCheckOneSide=function(n,a,s,l,u,c){for(var d=!0,Ct=0;Ct<2;Ct++){var ar=this._axes[Ct];if(this._getProjMinMaxOnAxis(Ct,n._corners,extent),this._getProjMinMaxOnAxis(Ct,a._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(d=!1,u)return d;var en=Math.abs(extent2[0]-extent[1]),tn=Math.abs(extent[0]-extent2[1]);Math.min(en,tn)>l.len()&&(en<tn?Point.scale(l,ar,-en*c):Point.scale(l,ar,tn*c))}else if(s){var en=Math.abs(extent2[0]-extent[1]),tn=Math.abs(extent[0]-extent2[1]);Math.min(en,tn)<s.len()&&(en<tn?Point.scale(s,ar,en*c):Point.scale(s,ar,-tn*c))}}return d},t.prototype._getProjMinMaxOnAxis=function(n,a,s){for(var l=this._axes[n],u=this._origin,c=a[0].dot(l)+u[n],d=c,Ct=c,ar=1;ar<a.length;ar++){var en=a[ar].dot(l)+u[n];d=Math.min(en,d),Ct=Math.max(en,Ct)}s[0]=d,s[1]=Ct},t})(),m=[],IncrementalDisplayable=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.notClear=!0,a.incremental=!0,a._displayables=[],a._temporaryDisplayables=[],a._cursor=0,a}return n.prototype.traverse=function(a,s){a.call(s,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(a,s){s?this._temporaryDisplayables.push(a):this._displayables.push(a),this.markRedraw()},n.prototype.addDisplayables=function(a,s){s=s||!1;for(var l=0;l<a.length;l++)this.addDisplayable(a[l],s)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(a){for(var s=this._cursor;s<this._displayables.length;s++)a&&a(this._displayables[s]);for(var s=0;s<this._temporaryDisplayables.length;s++)a&&a(this._temporaryDisplayables[s])},n.prototype.update=function(){this.updateTransform();for(var a=this._cursor;a<this._displayables.length;a++){var s=this._displayables[a];s.parent=this,s.update(),s.parent=null}for(var a=0;a<this._temporaryDisplayables.length;a++){var s=this._temporaryDisplayables[a];s.parent=this,s.update(),s.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var a=new BoundingRect(1/0,1/0,-1/0,-1/0),s=0;s<this._displayables.length;s++){var l=this._displayables[s],u=l.getBoundingRect().clone();l.needLocalTransform()&&u.applyTransform(l.getLocalTransform(m)),a.union(u)}this._rect=a}return this._rect},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(u.contain(l[0],l[1]))for(var c=0;c<this._displayables.length;c++){var d=this._displayables[c];if(d.contain(a,s))return!0}return!1},n})(Displayable),transitionStore=makeInner();function getAnimationConfig(t,n,a,s,l){var u;if(n&&n.ecModel){var c=n.ecModel.getUpdatePayload();u=c&&c.animation}var d=n&&n.isAnimationEnabled(),Ct=t==="update";if(d){var ar=void 0,en=void 0,tn=void 0;s?(ar=retrieve2(s.duration,200),en=retrieve2(s.easing,"cubicOut"),tn=0):(ar=n.getShallow(Ct?"animationDurationUpdate":"animationDuration"),en=n.getShallow(Ct?"animationEasingUpdate":"animationEasing"),tn=n.getShallow(Ct?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(ar=u.duration),u.easing!=null&&(en=u.easing),u.delay!=null&&(tn=u.delay)),isFunction$1(tn)&&(tn=tn(a,l)),isFunction$1(ar)&&(ar=ar(a));var on={duration:ar||0,delay:tn,easing:en};return on}else return null}function animateOrSetProps(t,n,a,s,l,u,c){var d=!1,Ct;isFunction$1(l)?(c=u,u=l,l=null):isObject$3(l)&&(u=l.cb,c=l.during,d=l.isFrom,Ct=l.removeOpt,l=l.dataIndex);var ar=t==="leave";ar||n.stopAnimation("leave");var en=getAnimationConfig(t,s,l,ar?Ct||{}:null,s&&s.getAnimationDelayParams?s.getAnimationDelayParams(n,l):null);if(en&&en.duration>0){var tn=en.duration,on=en.delay,cn=en.easing,dn={duration:tn,delay:on||0,easing:cn,done:u,force:!!u||!!c,setToFinal:!ar,scope:t,during:c};d?n.animateFrom(a,dn):n.animateTo(a,dn)}else n.stopAnimation(),!d&&n.attr(a),c&&c(1),u&&u()}function updateProps$1(t,n,a,s,l,u){animateOrSetProps("update",t,n,a,s,l,u)}function initProps(t,n,a,s,l,u){animateOrSetProps("enter",t,n,a,s,l,u)}function isElementRemoved(t){if(!t.__zr)return!0;for(var n=0;n<t.animators.length;n++){var a=t.animators[n];if(a.scope==="leave")return!0}return!1}function removeElement(t,n,a,s,l,u){isElementRemoved(t)||animateOrSetProps("leave",t,n,a,s,l,u)}function fadeOutDisplayable(t,n,a,s){t.removeTextContent(),t.removeTextGuideLine(),removeElement(t,{style:{opacity:0}},n,a,s)}function removeElementWithFadeOut(t,n,a){function s(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(l){l.isGroup||fadeOutDisplayable(l,n,a,s)}):fadeOutDisplayable(t,n,a,s)}function saveOldStyle(t){transitionStore(t).oldStyle=t.style}function getOldStyle(t){return transitionStore(t).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(t){return Path.extend(t)}var extendPathFromString=extendFromString;function extendPath(t,n){return extendPathFromString(t,n)}function registerShape(t,n){_customShapeMap[t]=n}function getShapeClass(t){if(_customShapeMap.hasOwnProperty(t))return _customShapeMap[t]}function makePath(t,n,a,s){var l=createFromString(t,n);return a&&(s==="center"&&(a=centerGraphic(a,l.getBoundingRect())),resizePath(l,a)),l}function makeImage(t,n,a){var s=new ZRImage({style:{image:t,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(l){if(a==="center"){var u={width:l.width,height:l.height};s.setStyle(centerGraphic(n,u))}}});return s}function centerGraphic(t,n){var a=n.width/n.height,s=t.height*a,l;s<=t.width?l=t.height:(s=t.width,l=s/a);var u=t.x+t.width/2,c=t.y+t.height/2;return{x:u-s/2,y:c-l/2,width:s,height:l}}var mergePath=mergePath$1;function resizePath(t,n){if(t.applyTransform){var a=t.getBoundingRect(),s=a.calculateTransform(n);t.applyTransform(s)}}function subPixelOptimizeLine(t,n){return subPixelOptimizeLine$1(t,t,{lineWidth:n}),t}function subPixelOptimizeRect(t){return subPixelOptimizeRect$1(t.shape,t.shape,t.style),t}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(t,n){for(var a=identity([]);t&&t!==n;)mul(a,t.getLocalTransform(),a),t=t.parent;return a}function applyTransform(t,n,a){return n&&!isArrayLike(n)&&(n=Transformable.getLocalTransform(n)),a&&(n=invert([],n)),applyTransform$1([],t,n)}function transformDirection(t,n,a){var s=n[4]===0||n[5]===0||n[0]===0?1:Math.abs(2*n[4]/n[0]),l=n[4]===0||n[5]===0||n[2]===0?1:Math.abs(2*n[4]/n[2]),u=[t==="left"?-s:t==="right"?s:0,t==="top"?-l:t==="bottom"?l:0];return u=applyTransform(u,n,a),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(t){return!t.isGroup}function isPath$1(t){return t.shape!=null}function groupTransition(t,n,a){if(!t||!n)return;function s(c){var d={};return c.traverse(function(Ct){isNotGroup(Ct)&&Ct.anid&&(d[Ct.anid]=Ct)}),d}function l(c){var d={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(d.shape=extend({},c.shape)),d}var u=s(t);n.traverse(function(c){if(isNotGroup(c)&&c.anid){var d=u[c.anid];if(d){var Ct=l(c);c.attr(l(d)),updateProps$1(c,Ct,a,getECData(c).dataIndex)}}})}function clipPointsByRect(t,n){return map$1(t,function(a){var s=a[0];s=mathMax$6(s,n.x),s=mathMin$6(s,n.x+n.width);var l=a[1];return l=mathMax$6(l,n.y),l=mathMin$6(l,n.y+n.height),[s,l]})}function clipRectByRect(t,n){var a=mathMax$6(t.x,n.x),s=mathMin$6(t.x+t.width,n.x+n.width),l=mathMax$6(t.y,n.y),u=mathMin$6(t.y+t.height,n.y+n.height);if(s>=a&&u>=l)return{x:a,y:l,width:s-a,height:u-l}}function createIcon(t,n,a){var s=extend({rectHover:!0},n),l=s.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(l.image=t.slice(8),defaults(l,a),new ZRImage(s)):makePath(t.replace("path://",""),s,a,"center")}function linePolygonIntersect(t,n,a,s,l){for(var u=0,c=l[l.length-1];u<l.length;u++){var d=l[u];if(lineLineIntersect$1(t,n,a,s,d[0],d[1],c[0],c[1]))return!0;c=d}}function lineLineIntersect$1(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=crossProduct2d$1(en,tn,Ct,ar);if(nearZero(on))return!1;var cn=t-l,dn=n-u,Cn=crossProduct2d$1(cn,dn,Ct,ar)/on;if(Cn<0||Cn>1)return!1;var In=crossProduct2d$1(cn,dn,en,tn)/on;return!(In<0||In>1)}function crossProduct2d$1(t,n,a,s){return t*s-a*n}function nearZero(t){return t<=1e-6&&t>=-1e-6}function setTooltipConfig(t){var n=t.itemTooltipOption,a=t.componentModel,s=t.itemName,l=isString$1(n)?{formatter:n}:n,u=a.mainType,c=a.componentIndex,d={componentType:u,name:s,$vars:["name"]};d[u+"Index"]=c;var Ct=t.formatterParamsExtra;Ct&&each$f(keys(Ct),function(en){hasOwn(d,en)||(d[en]=Ct[en],d.$vars.push(en))});var ar=getECData(t.el);ar.componentMainType=u,ar.componentIndex=c,ar.tooltipConfig={name:s,option:defaults({content:s,encodeHTMLContent:!0,formatterParams:d},l)}}function traverseElement(t,n){var a;t.isGroup&&(a=n(t)),a||t.traverse(n)}function traverseElements(t,n){if(t)if(isArray$1(t))for(var a=0;a<t.length;a++)traverseElement(t[a],n);else traverseElement(t,n)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(t,n){for(var a=0;a<SPECIAL_STATES.length;a++){var s=SPECIAL_STATES[a],l=n[s],u=t.ensureState(s);u.style=u.style||{},u.style.text=l}var c=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:n.normal}),t.useStates(c,!0)}function getLabelText(t,n,a){var s=t.labelFetcher,l=t.labelDataIndex,u=t.labelDimIndex,c=n.normal,d;s&&(d=s.getFormattedLabel(l,"normal",null,u,c&&c.get("formatter"),a!=null?{interpolatedValue:a}:null)),d==null&&(d=isFunction$1(t.defaultText)?t.defaultText(l,t,a):t.defaultText);for(var Ct={normal:d},ar=0;ar<SPECIAL_STATES.length;ar++){var en=SPECIAL_STATES[ar],tn=n[en];Ct[en]=retrieve2(s?s.getFormattedLabel(l,en,null,u,tn&&tn.get("formatter")):null,d)}return Ct}function setLabelStyle(t,n,a,s){a=a||EMPTY_OBJ;for(var l=t instanceof ZRText,u=!1,c=0;c<DISPLAY_STATES.length;c++){var d=n[DISPLAY_STATES[c]];if(d&&d.getShallow("show")){u=!0;break}}var Ct=l?t:t.getTextContent();if(u){l||(Ct||(Ct=new ZRText,t.setTextContent(Ct)),t.stateProxy&&(Ct.stateProxy=t.stateProxy));var ar=getLabelText(a,n),en=n.normal,tn=!!en.getShallow("show"),on=createTextStyle$1(en,s&&s.normal,a,!1,!l);on.text=ar.normal,l||t.setTextConfig(createTextConfig(en,a,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var cn=SPECIAL_STATES[c],d=n[cn];if(d){var dn=Ct.ensureState(cn),Cn=!!retrieve2(d.getShallow("show"),tn);if(Cn!==tn&&(dn.ignore=!Cn),dn.style=createTextStyle$1(d,s&&s[cn],a,!0,!l),dn.style.text=ar[cn],!l){var In=t.ensureState(cn);In.textConfig=createTextConfig(d,a,!0)}}}Ct.silent=!!en.getShallow("silent"),Ct.style.x!=null&&(on.x=Ct.style.x),Ct.style.y!=null&&(on.y=Ct.style.y),Ct.ignore=!tn,Ct.useStyle(on),Ct.dirty(),a.enableTextSetter&&(labelInner(Ct).setLabelText=function(ix){var ax=getLabelText(a,n,ix);setLabelText(Ct,ax)})}else Ct&&(Ct.ignore=!0);t.dirty()}function getLabelStatesModels(t,n){n=n||"label";for(var a={normal:t.getModel(n)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];a[l]=t.getModel([l,n])}return a}function createTextStyle$1(t,n,a,s,l){var u={};return setTextStyleCommon(u,t,a,s,l),n&&extend(u,n),u}function createTextConfig(t,n,a){n=n||{};var s={},l,u=t.getShallow("rotate"),c=retrieve2(t.getShallow("distance"),a?null:5),d=t.getShallow("offset");return l=t.getShallow("position")||(a?null:"inside"),l==="outside"&&(l=n.defaultOutsidePosition||"top"),l!=null&&(s.position=l),d!=null&&(s.offset=d),u!=null&&(u*=Math.PI/180,s.rotation=u),c!=null&&(s.distance=c),s.outsideFill=t.get("color")==="inherit"?n.inheritColor||null:"auto",s}function setTextStyleCommon(t,n,a,s,l){a=a||EMPTY_OBJ;var u=n.ecModel,c=u&&u.option.textStyle,d=getRichItemNames(n),Ct;if(d){Ct={};for(var ar in d)if(d.hasOwnProperty(ar)){var en=n.getModel(["rich",ar]);setTokenTextStyle(Ct[ar]={},en,c,a,s,l,!1,!0)}}Ct&&(t.rich=Ct);var tn=n.get("overflow");tn&&(t.overflow=tn);var on=n.get("minMargin");on!=null&&(t.margin=on),setTokenTextStyle(t,n,c,a,s,l,!0,!1)}function getRichItemNames(t){for(var n;t&&t!==t.ecModel;){var a=(t.option||EMPTY_OBJ).rich;if(a){n=n||{};for(var s=keys(a),l=0;l<s.length;l++){var u=s[l];n[u]=1}}t=t.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(t,n,a,s,l,u,c,d){a=!l&&a||EMPTY_OBJ;var Ct=s&&s.inheritColor,ar=n.getShallow("color"),en=n.getShallow("textBorderColor"),tn=retrieve2(n.getShallow("opacity"),a.opacity);(ar==="inherit"||ar==="auto")&&(Ct?ar=Ct:ar=null),(en==="inherit"||en==="auto")&&(Ct?en=Ct:en=null),u||(ar=ar||a.color,en=en||a.textBorderColor),ar!=null&&(t.fill=ar),en!=null&&(t.stroke=en);var on=retrieve2(n.getShallow("textBorderWidth"),a.textBorderWidth);on!=null&&(t.lineWidth=on);var cn=retrieve2(n.getShallow("textBorderType"),a.textBorderType);cn!=null&&(t.lineDash=cn);var dn=retrieve2(n.getShallow("textBorderDashOffset"),a.textBorderDashOffset);dn!=null&&(t.lineDashOffset=dn),!l&&tn==null&&!d&&(tn=s&&s.defaultOpacity),tn!=null&&(t.opacity=tn),!l&&!u&&t.fill==null&&s.inheritColor&&(t.fill=s.inheritColor);for(var Cn=0;Cn<TEXT_PROPS_WITH_GLOBAL.length;Cn++){var In=TEXT_PROPS_WITH_GLOBAL[Cn],ix=retrieve2(n.getShallow(In),a[In]);ix!=null&&(t[In]=ix)}for(var Cn=0;Cn<TEXT_PROPS_SELF.length;Cn++){var In=TEXT_PROPS_SELF[Cn],ix=n.getShallow(In);ix!=null&&(t[In]=ix)}if(t.verticalAlign==null){var ax=n.getShallow("baseline");ax!=null&&(t.verticalAlign=ax)}if(!c||!s.disableBox){for(var Cn=0;Cn<TEXT_PROPS_BOX.length;Cn++){var In=TEXT_PROPS_BOX[Cn],ix=n.getShallow(In);ix!=null&&(t[In]=ix)}var ox=n.getShallow("borderType");ox!=null&&(t.borderDash=ox),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&Ct&&(t.backgroundColor=Ct),(t.borderColor==="auto"||t.borderColor==="inherit")&&Ct&&(t.borderColor=Ct)}}function getFont(t,n){var a=n&&n.getModel("textStyle");return trim$1([t.fontStyle||a&&a.getShallow("fontStyle")||"",t.fontWeight||a&&a.getShallow("fontWeight")||"",(t.fontSize||a&&a.getShallow("fontSize")||12)+"px",t.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(t,n,a,s){if(t){var l=labelInner(t);l.prevValue=l.value,l.value=a;var u=n.normal;l.valueAnimation=u.get("valueAnimation"),l.valueAnimation&&(l.precision=u.get("precision"),l.defaultInterpolatedText=s,l.statesModels=n)}}function animateLabelValue(t,n,a,s,l){var u=labelInner(t);if(!u.valueAnimation||u.prevValue===u.value)return;var c=u.defaultInterpolatedText,d=retrieve2(u.interpolatedValue,u.prevValue),Ct=u.value;function ar(en){var tn=interpolateRawValues(a,u.precision,d,Ct,en);u.interpolatedValue=en===1?null:tn;var on=getLabelText({labelDataIndex:n,labelFetcher:l,defaultText:c?c(tn):tn+""},u.statesModels,tn);setLabelText(t,on)}t.percent=0,(u.prevValue==null?initProps:updateProps$1)(t,{percent:1},s,n,null,ar)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=(function(){function t(){}return t.prototype.getTextColor=function(n){var a=this.ecModel;return this.getShallow("color")||(!n&&a?a.get(PATH_COLOR):null)},t.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(n){for(var a={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},s=0;s<textStyleParams.length;s++)a[textStyleParams[s]]=this.getShallow(textStyleParams[s]);return tmpText.useStyle(a),tmpText.update(),tmpText.getBoundingRect()},t})(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=(function(){function t(){}return t.prototype.getLineStyle=function(n){return getLineStyle(this,n)},t})(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=(function(){function t(){}return t.prototype.getItemStyle=function(n,a){return getItemStyle(this,n,a)},t})(),Model=(function(){function t(n,a,s){this.parentModel=a,this.ecModel=s,this.option=n}return t.prototype.init=function(n,a,s){},t.prototype.mergeOption=function(n,a){merge(this.option,n,!0)},t.prototype.get=function(n,a){return n==null?this.option:this._doGet(this.parsePath(n),!a&&this.parentModel)},t.prototype.getShallow=function(n,a){var s=this.option,l=s==null?s:s[n];if(l==null&&!a){var u=this.parentModel;u&&(l=u.getShallow(n))}return l},t.prototype.getModel=function(n,a){var s=n!=null,l=s?this.parsePath(n):null,u=s?this._doGet(l):this.option;return a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new t(u,a,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var n=this.constructor;return new n(clone$4(this.option))},t.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},t.prototype.resolveParentPath=function(n){return n},t.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(n,a){var s=this.option;if(!n)return s;for(var l=0;l<n.length&&!(n[l]&&(s=s&&typeof s=="object"?s[n[l]]:null,s==null));l++);return s==null&&a&&(s=a._doGet(this.resolveParentPath(n),a.parentModel)),s},t})();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(t){return[t||"",base++].join("_")}function enableSubTypeDefaulter(t){var n={};t.registerSubTypeDefaulter=function(a,s){var l=parseClassType(a);n[l.main]=s},t.determineSubType=function(a,s){var l=s.type;if(!l){var u=parseClassType(a).main;t.hasSubTypes(a)&&n[u]&&(l=n[u](s))}return l}}function enableTopologicalTravel(t,n){t.topologicalTravel=function(u,c,d,Ct){if(!u.length)return;var ar=a(c),en=ar.graph,tn=ar.noEntryList,on={};for(each$f(u,function(ax){on[ax]=!0});tn.length;){var cn=tn.pop(),dn=en[cn],Cn=!!on[cn];Cn&&(d.call(Ct,cn,dn.originalDeps.slice()),delete on[cn]),each$f(dn.successor,Cn?ix:In)}each$f(on,function(){var ax="";throw new Error(ax)});function In(ax){en[ax].entryCount--,en[ax].entryCount===0&&tn.push(ax)}function ix(ax){on[ax]=!0,In(ax)}};function a(u){var c={},d=[];return each$f(u,function(Ct){var ar=s(c,Ct),en=ar.originalDeps=n(Ct),tn=l(en,u);ar.entryCount=tn.length,ar.entryCount===0&&d.push(Ct),each$f(tn,function(on){indexOf(ar.predecessor,on)<0&&ar.predecessor.push(on);var cn=s(c,on);indexOf(cn.successor,on)<0&&cn.successor.push(Ct)})}),{graph:c,noEntryList:d}}function s(u,c){return u[c]||(u[c]={predecessor:[],successor:[]}),u[c]}function l(u,c){var d=[];return each$f(u,function(Ct){indexOf(c,Ct)>=0&&d.push(Ct)}),d}}function inheritDefaultOption(t,n){return merge(merge({},t,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?(function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return t.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE})():DEFAULT_LOCALE;function registerLocale(t,n){t=t.toUpperCase(),localeModels[t]=new Model(n),localeStorage[t]=n}function createLocaleObject(t){if(isString$1(t)){var n=localeStorage[t.toUpperCase()]||{};return t===LOCALE_ZH||t===LOCALE_EN?clone$4(n):merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(t){return localeModels[t]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(t,n){return t+="","0000".substr(0,n-t.length)+t}function getPrimaryTimeUnit(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function isPrimaryTimeUnit(t){return t===getPrimaryTimeUnit(t)}function getDefaultFormatPrecisionOfInterval(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(t,n,a,s){var l=parseDate(t),u=l[fullYearGetterName(a)](),c=l[monthGetterName(a)]()+1,d=Math.floor((c-1)/3)+1,Ct=l[dateGetterName(a)](),ar=l["get"+(a?"UTC":"")+"Day"](),en=l[hoursGetterName(a)](),tn=(en-1)%12+1,on=l[minutesGetterName(a)](),cn=l[secondsGetterName(a)](),dn=l[millisecondsGetterName(a)](),Cn=en>=12?"pm":"am",In=Cn.toUpperCase(),ix=s instanceof Model?s:getLocaleModel(s||SYSTEM_LANG)||getDefaultLocaleModel(),ax=ix.getModel("time"),ox=ax.get("month"),sx=ax.get("monthAbbr"),ux=ax.get("dayOfWeek"),cx=ax.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,Cn+"").replace(/{A}/g,In+"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,d+"").replace(/{MMMM}/g,ox[c-1]).replace(/{MMM}/g,sx[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(Ct,2)).replace(/{d}/g,Ct+"").replace(/{eeee}/g,ux[ar]).replace(/{ee}/g,cx[ar]).replace(/{e}/g,ar+"").replace(/{HH}/g,pad(en,2)).replace(/{H}/g,en+"").replace(/{hh}/g,pad(tn+"",2)).replace(/{h}/g,tn+"").replace(/{mm}/g,pad(on,2)).replace(/{m}/g,on+"").replace(/{ss}/g,pad(cn,2)).replace(/{s}/g,cn+"").replace(/{SSS}/g,pad(dn,3)).replace(/{S}/g,dn+"")}function leveledFormat(t,n,a,s,l){var u=null;if(isString$1(a))u=a;else if(isFunction$1(a))u=a(t.value,n,{level:t.level});else{var c=extend({},defaultLeveledFormatter);if(t.level>0)for(var d=0;d<primaryTimeUnits.length;++d)c[primaryTimeUnits[d]]="{primary|"+c[primaryTimeUnits[d]]+"}";var Ct=a?a.inherit===!1?a:defaults(a,c):c,ar=getUnitFromValue(t.value,l);if(Ct[ar])u=Ct[ar];else if(Ct.inherit){for(var en=timeUnits.indexOf(ar),d=en-1;d>=0;--d)if(Ct[ar]){u=Ct[ar];break}u=u||c.none}if(isArray$1(u)){var tn=t.level==null?0:t.level>=0?t.level:u.length+t.level;tn=Math.min(tn,u.length-1),u=u[tn]}}return format$1(new Date(t.value),u,l,s)}function getUnitFromValue(t,n){var a=parseDate(t),s=a[monthGetterName(n)]()+1,l=a[dateGetterName(n)](),u=a[hoursGetterName(n)](),c=a[minutesGetterName(n)](),d=a[secondsGetterName(n)](),Ct=a[millisecondsGetterName(n)](),ar=Ct===0,en=ar&&d===0,tn=en&&c===0,on=tn&&u===0,cn=on&&l===1,dn=cn&&s===1;return dn?"year":cn?"month":on?"day":tn?"hour":en?"minute":ar?"second":"millisecond"}function getUnitValue(t,n,a){var s=isNumber(t)?parseDate(t):t;switch(n=n||getUnitFromValue(t,a),n){case"year":return s[fullYearGetterName(a)]();case"half-year":return s[monthGetterName(a)]()>=6?1:0;case"quarter":return Math.floor((s[monthGetterName(a)]()+1)/4);case"month":return s[monthGetterName(a)]();case"day":return s[dateGetterName(a)]();case"half-day":return s[hoursGetterName(a)]()/24;case"hour":return s[hoursGetterName(a)]();case"minute":return s[minutesGetterName(a)]();case"second":return s[secondsGetterName(a)]();case"millisecond":return s[millisecondsGetterName(a)]()}}function fullYearGetterName(t){return t?"getUTCFullYear":"getFullYear"}function monthGetterName(t){return t?"getUTCMonth":"getMonth"}function dateGetterName(t){return t?"getUTCDate":"getDate"}function hoursGetterName(t){return t?"getUTCHours":"getHours"}function minutesGetterName(t){return t?"getUTCMinutes":"getMinutes"}function secondsGetterName(t){return t?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(t){return t?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(t){return t?"setUTCFullYear":"setFullYear"}function monthSetterName(t){return t?"setUTCMonth":"setMonth"}function dateSetterName(t){return t?"setUTCDate":"setDate"}function hoursSetterName(t){return t?"setUTCHours":"setHours"}function minutesSetterName(t){return t?"setUTCMinutes":"setMinutes"}function secondsSetterName(t){return t?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(t){return t?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(t,n,a,s,l,u,c,d){var Ct=new ZRText({style:{text:t,font:n,align:a,verticalAlign:s,padding:l,rich:u,overflow:c?"truncate":null,lineHeight:d}});return Ct.getBoundingRect()}function addCommas(t){if(!isNumeric(t))return isString$1(t)?t:"-";var n=(t+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(t,n){return t=(t||"").toLowerCase().replace(/-(.)/g,function(a,s){return s.toUpperCase()}),n&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(t,n,a){var s="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(en){return en&&trim$1(en)?en:"-"}function u(en){return!!(en!=null&&!isNaN(en)&&isFinite(en))}var c=n==="time",d=t instanceof Date;if(c||d){var Ct=c?parseDate(t):t;if(isNaN(+Ct)){if(d)return"-"}else return format$1(Ct,s,a)}if(n==="ordinal")return isStringSafe(t)?l(t):isNumber(t)&&u(t)?t+"":"-";var ar=numericToNumber(t);return u(ar)?addCommas(ar):isStringSafe(t)?l(t):typeof t=="boolean"?t+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(t,n){return"{"+t+(n??"")+"}"};function formatTpl(t,n,a){isArray$1(n)||(n=[n]);var s=n.length;if(!s)return"";for(var l=n[0].$vars||[],u=0;u<l.length;u++){var c=TPL_VAR_ALIAS[u];t=t.replace(wrapVar(c),wrapVar(c,0))}for(var d=0;d<s;d++)for(var Ct=0;Ct<l.length;Ct++){var ar=n[d][l[Ct]];t=t.replace(wrapVar(TPL_VAR_ALIAS[Ct],d),a?encodeHTML(ar):ar)}return t}function formatTplSimple(t,n,a){return each$f(n,function(s,l){t=t.replace("{"+l+"}",s)}),t}function getTooltipMarker(t,n){var a=isString$1(t)?{color:t,extraCssText:n}:t||{},s=a.color,l=a.type;n=a.extraCssText;var u=a.renderMode||"html";if(!s)return"";if(u==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(s)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(s)+";"+(n||"")+'"></span>';var c=a.markerId||"markerX";return{renderMode:u,content:"{"+c+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:s}:{width:10,height:10,borderRadius:5,backgroundColor:s}}}function formatTime(t,n,a){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var s=parseDate(n),l=a?"getUTC":"get",u=s[l+"FullYear"](),c=s[l+"Month"]()+1,d=s[l+"Date"](),Ct=s[l+"Hours"](),ar=s[l+"Minutes"](),en=s[l+"Seconds"](),tn=s[l+"Milliseconds"]();return t=t.replace("MM",pad(c,2)).replace("M",c).replace("yyyy",u).replace("yy",pad(u%100+"",2)).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(Ct,2)).replace("h",Ct).replace("mm",pad(ar,2)).replace("m",ar).replace("ss",pad(en,2)).replace("s",en).replace("SSS",pad(tn,3)),t}function capitalFirst(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}function convertToColorString(t,n){return n=n||"transparent",isString$1(t)?t:isObject$3(t)&&t.colorStops&&(t.colorStops[0]||{}).color||n}function windowOpen(t,n){if(n==="_blank"||n==="blank"){var a=window.open();a.opener=null,a.location.href=t}else window.open(t,n)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(t,n,a,s,l){var u=0,c=0;s==null&&(s=1/0),l==null&&(l=1/0);var d=0;n.eachChild(function(Ct,ar){var en=Ct.getBoundingRect(),tn=n.childAt(ar+1),on=tn&&tn.getBoundingRect(),cn,dn;if(t==="horizontal"){var Cn=en.width+(on?-on.x+en.x:0);cn=u+Cn,cn>s||Ct.newline?(u=0,cn=Cn,c+=d+a,d=en.height):d=Math.max(d,en.height)}else{var In=en.height+(on?-on.y+en.y:0);dn=c+In,dn>l||Ct.newline?(u+=d+a,c=0,dn=In,d=en.width):d=Math.max(d,en.width)}Ct.newline||(Ct.x=u,Ct.y=c,Ct.markRedraw(),t==="horizontal"?u=cn+a:c=dn+a)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(t,n,a){var s=n.width,l=n.height,u=parsePercent(t.left,s),c=parsePercent(t.top,l),d=parsePercent(t.right,s),Ct=parsePercent(t.bottom,l);return(isNaN(u)||isNaN(parseFloat(t.left)))&&(u=0),(isNaN(d)||isNaN(parseFloat(t.right)))&&(d=s),(isNaN(c)||isNaN(parseFloat(t.top)))&&(c=0),(isNaN(Ct)||isNaN(parseFloat(t.bottom)))&&(Ct=l),a=normalizeCssArray(a||0),{width:Math.max(d-u-a[1]-a[3],0),height:Math.max(Ct-c-a[0]-a[2],0)}}function getLayoutRect(t,n,a){a=normalizeCssArray(a||0);var s=n.width,l=n.height,u=parsePercent(t.left,s),c=parsePercent(t.top,l),d=parsePercent(t.right,s),Ct=parsePercent(t.bottom,l),ar=parsePercent(t.width,s),en=parsePercent(t.height,l),tn=a[2]+a[0],on=a[1]+a[3],cn=t.aspect;switch(isNaN(ar)&&(ar=s-d-on-u),isNaN(en)&&(en=l-Ct-tn-c),cn!=null&&(isNaN(ar)&&isNaN(en)&&(cn>s/l?ar=s*.8:en=l*.8),isNaN(ar)&&(ar=cn*en),isNaN(en)&&(en=ar/cn)),isNaN(u)&&(u=s-d-ar-on),isNaN(c)&&(c=l-Ct-en-tn),t.left||t.right){case"center":u=s/2-ar/2-a[3];break;case"right":u=s-ar-on;break}switch(t.top||t.bottom){case"middle":case"center":c=l/2-en/2-a[0];break;case"bottom":c=l-en-tn;break}u=u||0,c=c||0,isNaN(ar)&&(ar=s-on-u-(d||0)),isNaN(en)&&(en=l-tn-c-(Ct||0));var dn=new BoundingRect(u+a[3],c+a[0],ar,en);return dn.margin=a,dn}function positionElement(t,n,a,s,l,u){var c=!l||!l.hv||l.hv[0],d=!l||!l.hv||l.hv[1],Ct=l&&l.boundingMode||"all";if(u=u||t,u.x=t.x,u.y=t.y,!c&&!d)return!1;var ar;if(Ct==="raw")ar=t.type==="group"?new BoundingRect(0,0,+n.width||0,+n.height||0):t.getBoundingRect();else if(ar=t.getBoundingRect(),t.needLocalTransform()){var en=t.getLocalTransform();ar=ar.clone(),ar.applyTransform(en)}var tn=getLayoutRect(defaults({width:ar.width,height:ar.height},n),a,s),on=c?tn.x-ar.x:0,cn=d?tn.y-ar.y:0;return Ct==="raw"?(u.x=on,u.y=cn):(u.x+=on,u.y+=cn),u===t&&t.markRedraw(),!0}function sizeCalculable(t,n){return t[HV_NAMES[n][0]]!=null||t[HV_NAMES[n][1]]!=null&&t[HV_NAMES[n][2]]!=null}function fetchLayoutMode(t){var n=t.layoutMode||t.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(t,n,a){var s=a&&a.ignoreSize;!isArray$1(s)&&(s=[s,s]);var l=c(HV_NAMES[0],0),u=c(HV_NAMES[1],1);ar(HV_NAMES[0],t,l),ar(HV_NAMES[1],t,u);function c(en,tn){var on={},cn=0,dn={},Cn=0,In=2;if(each$e(en,function(ox){dn[ox]=t[ox]}),each$e(en,function(ox){d(n,ox)&&(on[ox]=dn[ox]=n[ox]),Ct(on,ox)&&cn++,Ct(dn,ox)&&Cn++}),s[tn])return Ct(n,en[1])?dn[en[2]]=null:Ct(n,en[2])&&(dn[en[1]]=null),dn;if(Cn===In||!cn)return dn;if(cn>=In)return on;for(var ix=0;ix<en.length;ix++){var ax=en[ix];if(!d(on,ax)&&d(t,ax)){on[ax]=t[ax];break}}return on}function d(en,tn){return en.hasOwnProperty(tn)}function Ct(en,tn){return en[tn]!=null&&en[tn]!=="auto"}function ar(en,tn,on){each$e(en,function(cn){tn[cn]=on[cn]})}}function getLayoutParams(t){return copyLayoutParams({},t)}function copyLayoutParams(t,n){return n&&t&&each$e(LOCATION_PARAMS,function(a){n.hasOwnProperty(a)&&(t[a]=n[a])}),t}var inner$l=makeInner(),ComponentModel=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a,s,l)||this;return u.uid=getUID("ec_cpt_model"),u}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l)},n.prototype.mergeDefaultAndTheme=function(a,s){var l=fetchLayoutMode(this),u=l?getLayoutParams(a):{},c=s.getTheme();merge(a,c.get(this.mainType)),merge(a,this.getDefaultOption()),l&&mergeLayoutParam(a,u,l)},n.prototype.mergeOption=function(a,s){merge(this.option,a,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,a,l)},n.prototype.optionUpdated=function(a,s){},n.prototype.getDefaultOption=function(){var a=this.constructor;if(!isExtendedClass(a))return a.defaultOption;var s=inner$l(this);if(!s.defaultOption){for(var l=[],u=a;u;){var c=u.prototype.defaultOption;c&&l.push(c),u=u.superClass}for(var d={},Ct=l.length-1;Ct>=0;Ct--)d=merge(d,l[Ct],!0);s.defaultOption=d}return s.defaultOption},n.prototype.getReferringComponents=function(a,s){var l=a+"Index",u=a+"Id";return queryReferringComponents(this.ecModel,a,{index:this.get(l,!0),id:this.get(u,!0)},s)},n.prototype.getBoxLayoutParams=function(){var a=this;return{left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(a){this.option.zlevel=a},n.protoInitialize=(function(){var a=n.prototype;a.type="component",a.id="",a.name="",a.mainType="",a.subType="",a.componentIndex=0})(),n})(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(t){var n=[];return each$f(ComponentModel.getClassesByMainType(t),function(a){n=n.concat(a.dependencies||a.prototype.dependencies||[])}),n=map$1(n,function(a){return parseClassType(a).main}),t!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(t){innerGlobalModel(t).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(t,n,a){var s={},l=querySeriesUpstreamDatasetModel(n);if(!l||!t)return s;var u=[],c=[],d=n.ecModel,Ct=innerGlobalModel(d).datasetMap,ar=l.uid+"_"+a.seriesLayoutBy,en,tn;t=t.slice(),each$f(t,function(Cn,In){var ix=isObject$3(Cn)?Cn:t[In]={name:Cn};ix.type==="ordinal"&&en==null&&(en=In,tn=dn(ix)),s[ix.name]=[]});var on=Ct.get(ar)||Ct.set(ar,{categoryWayDim:tn,valueWayDim:0});each$f(t,function(Cn,In){var ix=Cn.name,ax=dn(Cn);if(en==null){var ox=on.valueWayDim;cn(s[ix],ox,ax),cn(c,ox,ax),on.valueWayDim+=ax}else if(en===In)cn(s[ix],0,ax),cn(u,0,ax);else{var ox=on.categoryWayDim;cn(s[ix],ox,ax),cn(c,ox,ax),on.categoryWayDim+=ax}});function cn(Cn,In,ix){for(var ax=0;ax<ix;ax++)Cn.push(In+ax)}function dn(Cn){var In=Cn.dimsDef;return In?In.length:1}return u.length&&(s.itemName=u),c.length&&(s.seriesName=c),s}function makeSeriesEncodeForNameBased(t,n,a){var s={},l=querySeriesUpstreamDatasetModel(t);if(!l)return s;var u=n.sourceFormat,c=n.dimensionsDefine,d;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(en,tn){(isObject$3(en)?en.name:en)==="name"&&(d=tn)});var Ct=(function(){for(var en={},tn={},on=[],cn=0,dn=Math.min(5,a);cn<dn;cn++){var Cn=doGuessOrdinal(n.data,u,n.seriesLayoutBy,c,n.startIndex,cn);on.push(Cn);var In=Cn===BE_ORDINAL.Not;if(In&&en.v==null&&cn!==d&&(en.v=cn),(en.n==null||en.n===en.v||!In&&on[en.n]===BE_ORDINAL.Not)&&(en.n=cn),ix(en)&&on[en.n]!==BE_ORDINAL.Not)return en;In||(Cn===BE_ORDINAL.Might&&tn.v==null&&cn!==d&&(tn.v=cn),(tn.n==null||tn.n===tn.v)&&(tn.n=cn))}function ix(ax){return ax.v!=null&&ax.n!=null}return ix(en)?en:ix(tn)?tn:null})();if(Ct){s.value=[Ct.v];var ar=d??Ct.n;s.itemName=[ar],s.seriesName=[ar]}return s}function querySeriesUpstreamDatasetModel(t){var n=t.get("data",!0);if(!n)return queryReferringComponents(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:queryReferringComponents(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(t,n){return doGuessOrdinal(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,n)}function doGuessOrdinal(t,n,a,s,l,u){var c,d=5;if(isTypedArray(t))return BE_ORDINAL.Not;var Ct,ar;if(s){var en=s[u];isObject$3(en)?(Ct=en.name,ar=en.type):isString$1(en)&&(Ct=en)}if(ar!=null)return ar==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var tn=t;if(a===SERIES_LAYOUT_BY_ROW){for(var on=tn[u],cn=0;cn<(on||[]).length&&cn<d;cn++)if((c=sx(on[l+cn]))!=null)return c}else for(var cn=0;cn<tn.length&&cn<d;cn++){var dn=tn[l+cn];if(dn&&(c=sx(dn[u]))!=null)return c}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var Cn=t;if(!Ct)return BE_ORDINAL.Not;for(var cn=0;cn<Cn.length&&cn<d;cn++){var In=Cn[cn];if(In&&(c=sx(In[Ct]))!=null)return c}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var ix=t;if(!Ct)return BE_ORDINAL.Not;var on=ix[Ct];if(!on||isTypedArray(on))return BE_ORDINAL.Not;for(var cn=0;cn<on.length&&cn<d;cn++)if((c=sx(on[cn]))!=null)return c}else if(n===SOURCE_FORMAT_ORIGINAL)for(var ax=t,cn=0;cn<ax.length&&cn<d;cn++){var In=ax[cn],ox=getDataItemValue(In);if(!isArray$1(ox))return BE_ORDINAL.Not;if((c=sx(ox[u]))!=null)return c}function sx(ux){var cx=isString$1(ux);if(ux!=null&&Number.isFinite(Number(ux))&&ux!=="")return cx?BE_ORDINAL.Might:BE_ORDINAL.Not;if(cx&&ux!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(t,n){assert(internalOptionCreatorMap.get(t)==null&&n),internalOptionCreatorMap.set(t,n)}function concatInternalOptions(t,n,a){var s=internalOptionCreatorMap.get(n);if(!s)return a;var l=s(t);return l?a.concat(l):a}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=(function(){function t(){}return t.prototype.getColorFromPalette=function(n,a,s){var l=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,u,n,a,s)},t.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},t})();function getDecalFromPalette(t,n,a,s){var l=normalizeToArray(t.get(["aria","decal","decals"]));return getFromPalette(t,innerDecal,l,null,n,a,s)}function getNearestPalette(t,n){for(var a=t.length,s=0;s<a;s++)if(t[s].length>n)return t[s];return t[a-1]}function getFromPalette(t,n,a,s,l,u,c){u=u||t;var d=n(u),Ct=d.paletteIdx||0,ar=d.paletteNameMap=d.paletteNameMap||{};if(ar.hasOwnProperty(l))return ar[l];var en=c==null||!s?a:getNearestPalette(s,c);if(en=en||a,!(!en||!en.length)){var tn=en[Ct];return l&&(ar[l]=tn),d.paletteIdx=(Ct+1)%en.length,tn}}function clearPalette(t,n){n(t).paletteIdx=0,n(t).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a,s,l,u,c,d){u=u||{},this.option=null,this._theme=new Model(u),this._locale=new Model(c),this._optionManager=d},n.prototype.setOption=function(a,s,l){var u=normalizeSetOptionInput(s);this._optionManager.setOption(a,l,u),this._resetOption(null,u)},n.prototype.resetOption=function(a,s){return this._resetOption(a,normalizeSetOptionInput(s))},n.prototype._resetOption=function(a,s){var l=!1,u=this._optionManager;if(!a||a==="recreate"){var c=u.mountOption(a==="recreate");!this.option||a==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,s)),l=!0}if((a==="timeline"||a==="media")&&this.restoreData(),!a||a==="recreate"||a==="timeline"){var d=u.getTimelineOption(this);d&&(l=!0,this._mergeOption(d,s))}if(!a||a==="recreate"||a==="media"){var Ct=u.getMediaOption(this);Ct.length&&each$f(Ct,function(ar){l=!0,this._mergeOption(ar,s)},this)}return l},n.prototype.mergeOption=function(a){this._mergeOption(a,null)},n.prototype._mergeOption=function(a,s){var l=this.option,u=this._componentsMap,c=this._componentsCount,d=[],Ct=createHashMap(),ar=s&&s.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(a,function(tn,on){tn!=null&&(ComponentModel.hasClass(on)?on&&(d.push(on),Ct.set(on,!0)):l[on]=l[on]==null?clone$4(tn):merge(l[on],tn,!0))}),ar&&ar.each(function(tn,on){ComponentModel.hasClass(on)&&!Ct.get(on)&&(d.push(on),Ct.set(on,!0))}),ComponentModel.topologicalTravel(d,ComponentModel.getAllClassMainTypes(),en,this);function en(tn){var on=concatInternalOptions(this,tn,normalizeToArray(a[tn])),cn=u.get(tn),dn=cn?ar&&ar.get(tn)?"replaceMerge":"normalMerge":"replaceAll",Cn=mappingToExists(cn,on,dn);setComponentTypeToKeyInfo(Cn,tn,ComponentModel),l[tn]=null,u.set(tn,null),c.set(tn,0);var In=[],ix=[],ax=0,ox;each$f(Cn,function(sx,ux){var cx=sx.existing,hx=sx.newOption;if(!hx)cx&&(cx.mergeOption({},this),cx.optionUpdated({},!1));else{var gx=tn==="series",fx=ComponentModel.getClass(tn,sx.keyInfo.subType,!gx);if(!fx)return;if(tn==="tooltip"){if(ox)return;ox=!0}if(cx&&cx.constructor===fx)cx.name=sx.keyInfo.name,cx.mergeOption(hx,this),cx.optionUpdated(hx,!1);else{var dx=extend({componentIndex:ux},sx.keyInfo);cx=new fx(hx,this,this,dx),extend(cx,dx),sx.brandNew&&(cx.__requireNewView=!0),cx.init(hx,this,this),cx.optionUpdated(null,!0)}}cx?(In.push(cx.option),ix.push(cx),ax++):(In.push(void 0),ix.push(void 0))},this),l[tn]=In,u.set(tn,ix),c.set(tn,ax),tn==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var a=clone$4(this.option);return each$f(a,function(s,l){if(ComponentModel.hasClass(l)){for(var u=normalizeToArray(s),c=u.length,d=!1,Ct=c-1;Ct>=0;Ct--)u[Ct]&&!isComponentIdInternal(u[Ct])?d=!0:(u[Ct]=null,!d&&c--);u.length=c,a[l]=u}}),delete a[OPTION_INNER_KEY],a},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(a){this._payload=a},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(a,s){var l=this._componentsMap.get(a);if(l){var u=l[s||0];if(u)return u;if(s==null){for(var c=0;c<l.length;c++)if(l[c])return l[c]}}},n.prototype.queryComponents=function(a){var s=a.mainType;if(!s)return[];var l=a.index,u=a.id,c=a.name,d=this._componentsMap.get(s);if(!d||!d.length)return[];var Ct;return l!=null?(Ct=[],each$f(normalizeToArray(l),function(ar){d[ar]&&Ct.push(d[ar])})):u!=null?Ct=queryByIdOrName("id",u,d):c!=null?Ct=queryByIdOrName("name",c,d):Ct=filter(d,function(ar){return!!ar}),filterBySubType(Ct,a)},n.prototype.findComponents=function(a){var s=a.query,l=a.mainType,u=d(s),c=u?this.queryComponents(u):filter(this._componentsMap.get(l),function(ar){return!!ar});return Ct(filterBySubType(c,a));function d(ar){var en=l+"Index",tn=l+"Id",on=l+"Name";return ar&&(ar[en]!=null||ar[tn]!=null||ar[on]!=null)?{mainType:l,index:ar[en],id:ar[tn],name:ar[on]}:null}function Ct(ar){return a.filter?filter(ar,a.filter):ar}},n.prototype.eachComponent=function(a,s,l){var u=this._componentsMap;if(isFunction$1(a)){var c=s,d=a;u.each(function(tn,on){for(var cn=0;tn&&cn<tn.length;cn++){var dn=tn[cn];dn&&d.call(c,on,dn,dn.componentIndex)}})}else for(var Ct=isString$1(a)?u.get(a):isObject$3(a)?this.findComponents(a):null,ar=0;Ct&&ar<Ct.length;ar++){var en=Ct[ar];en&&s.call(l,en,en.componentIndex)}},n.prototype.getSeriesByName=function(a){var s=convertOptionIdName(a,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&s!=null&&l.name===s})},n.prototype.getSeriesByIndex=function(a){return this._componentsMap.get("series")[a]},n.prototype.getSeriesByType=function(a){return filter(this._componentsMap.get("series"),function(s){return!!s&&s.subType===a})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(a){return!!a})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(a,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];a.call(s,u,l)},this)},n.prototype.eachRawSeries=function(a,s){each$f(this._componentsMap.get("series"),function(l){l&&a.call(s,l,l.componentIndex)})},n.prototype.eachSeriesByType=function(a,s,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];c.subType===a&&s.call(l,c,u)},this)},n.prototype.eachRawSeriesByType=function(a,s,l){return each$f(this.getSeriesByType(a),s,l)},n.prototype.isSeriesFiltered=function(a){return assertSeriesInitialized(this),this._seriesIndicesMap.get(a.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(a,s){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];a.call(s,c,u)&&l.push(u)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},n.prototype.restoreData=function(a){reCreateSeriesIndices(this);var s=this._componentsMap,l=[];s.each(function(u,c){ComponentModel.hasClass(c)&&l.push(c)}),ComponentModel.topologicalTravel(l,ComponentModel.getAllClassMainTypes(),function(u){each$f(s.get(u),function(c){c&&(u!=="series"||!isNotTargetSeries(c,a))&&c.restoreData()})})},n.internalField=(function(){reCreateSeriesIndices=function(a){var s=a._seriesIndices=[];each$f(a._componentsMap.get("series"),function(l){l&&s.push(l.componentIndex)}),a._seriesIndicesMap=createHashMap(s)},assertSeriesInitialized=function(a){},initBase=function(a,s){a.option={},a.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,a._componentsMap=createHashMap({series:[]}),a._componentsCount=createHashMap();var l=s.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(s,a._theme.option),merge(s,globalDefault,!1),a._mergeOption(s,null)}})(),n})(Model);function isNotTargetSeries(t,n){if(n){var a=n.seriesIndex,s=n.seriesId,l=n.seriesName;return a!=null&&t.componentIndex!==a||s!=null&&t.id!==s||l!=null&&t.name!==l}}function mergeTheme(t,n){var a=t.color&&!t.colorLayer;each$f(n,function(s,l){l==="colorLayer"&&a||ComponentModel.hasClass(l)||(typeof s=="object"?t[l]=t[l]?merge(t[l],s,!1):clone$4(s):t[l]==null&&(t[l]=s))})}function queryByIdOrName(t,n,a){if(isArray$1(n)){var s=createHashMap();return each$f(n,function(u){if(u!=null){var c=convertOptionIdName(u,null);c!=null&&s.set(u,!0)}}),filter(a,function(u){return u&&s.get(u[t])})}else{var l=convertOptionIdName(n,null);return filter(a,function(u){return u&&l!=null&&u[t]===l})}}function filterBySubType(t,n){return n.hasOwnProperty("subType")?filter(t,function(a){return a&&a.subType===n.subType}):t}function normalizeSetOptionInput(t){var n=createHashMap();return t&&each$f(normalizeToArray(t.replaceMerge),function(a){n.set(a,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=(function(){function t(n){each$f(availableMethods,function(a){this[a]=bind$1(n[a],n)},this)}return t})(),coordinateSystemCreators={},CoordinateSystemManager=(function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(n,a){var s=[];each$f(coordinateSystemCreators,function(l,u){var c=l.create(n,a);s=s.concat(c||[])}),this._coordinateSystems=s},t.prototype.update=function(n,a){each$f(this._coordinateSystems,function(s){s.update&&s.update(n,a)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(n,a){coordinateSystemCreators[n]=a},t.get=function(n){return coordinateSystemCreators[n]},t})(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=(function(){function t(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return t.prototype.setOption=function(n,a,s){n&&(each$f(normalizeToArray(n.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(n.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),n=clone$4(n);var l=this._optionBackup,u=parseRawOption(n,a,!l);this._newBaseOption=u.baseOption,l?(u.timelineOptions.length&&(l.timelineOptions=u.timelineOptions),u.mediaList.length&&(l.mediaList=u.mediaList),u.mediaDefault&&(l.mediaDefault=u.mediaDefault)):this._optionBackup=u},t.prototype.mountOption=function(n){var a=this._optionBackup;return this._timelineOptions=a.timelineOptions,this._mediaList=a.mediaList,this._mediaDefault=a.mediaDefault,this._currentMediaIndices=[],clone$4(n?a.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(n){var a,s=this._timelineOptions;if(s.length){var l=n.getComponent("timeline");l&&(a=clone$4(s[l.getCurrentIndex()]))}return a},t.prototype.getMediaOption=function(n){var a=this._api.getWidth(),s=this._api.getHeight(),l=this._mediaList,u=this._mediaDefault,c=[],d=[];if(!l.length&&!u)return d;for(var Ct=0,ar=l.length;Ct<ar;Ct++)applyMediaQuery(l[Ct].query,a,s)&&c.push(Ct);return!c.length&&u&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(d=map$1(c,function(en){return clone$4(en===-1?u.option:l[en].option)})),this._currentMediaIndices=c,d},t})();function parseRawOption(t,n,a){var s=[],l,u,c=t.baseOption,d=t.timeline,Ct=t.options,ar=t.media,en=!!t.media,tn=!!(Ct||d||c&&c.timeline);c?(u=c,u.timeline||(u.timeline=d)):((tn||en)&&(t.options=t.media=null),u=t),en&&isArray$1(ar)&&each$f(ar,function(cn){cn&&cn.option&&(cn.query?s.push(cn):l||(l=cn))}),on(u),each$f(Ct,function(cn){return on(cn)}),each$f(s,function(cn){return on(cn.option)});function on(cn){each$f(n,function(dn){dn(cn,a)})}return{baseOption:u,timelineOptions:Ct||[],mediaDefault:l,mediaList:s}}function applyMediaQuery(t,n,a){var s={width:n,height:a,aspectratio:n/a},l=!0;return each$f(t,function(u,c){var d=c.match(QUERY_REG);if(!(!d||!d[1]||!d[2])){var Ct=d[1],ar=d[2].toLowerCase();compare(s[ar],u,Ct)||(l=!1)}}),l}function compare(t,n,a){return a==="min"?t>=n:a==="max"?t<=n:t===n}function indicesEquals(t,n){return t.join(",")===n.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0,s=POSSIBLE_STYLES.length;a<s;a++){var l=POSSIBLE_STYLES[a],u=n.normal,c=n.emphasis;u&&u[l]&&(t[l]=t[l]||{},t[l].normal?merge(t[l].normal,u[l]):t[l].normal=u[l],u[l]=null),c&&c[l]&&(t[l]=t[l]||{},t[l].emphasis?merge(t[l].emphasis,c[l]):t[l].emphasis=c[l],c[l]=null)}}function convertNormalEmphasis(t,n,a){if(t&&t[n]&&(t[n].normal||t[n].emphasis)){var s=t[n].normal,l=t[n].emphasis;s&&(a?(t[n].normal=t[n].emphasis=null,defaults(t[n],s)):t[n]=s),l&&(t.emphasis=t.emphasis||{},t.emphasis[n]=l,l.focus&&(t.emphasis.focus=l.focus),l.blurScope&&(t.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(t){convertNormalEmphasis(t,"itemStyle"),convertNormalEmphasis(t,"lineStyle"),convertNormalEmphasis(t,"areaStyle"),convertNormalEmphasis(t,"label"),convertNormalEmphasis(t,"labelLine"),convertNormalEmphasis(t,"upperLabel"),convertNormalEmphasis(t,"edgeLabel")}function compatTextStyle(t,n){var a=isObject$2(t)&&t[n],s=isObject$2(a)&&a.textStyle;if(s)for(var l=0,u=TEXT_STYLE_OPTIONS.length;l<u;l++){var c=TEXT_STYLE_OPTIONS[l];s.hasOwnProperty(c)&&(a[c]=s[c])}}function compatEC3CommonStyles(t){t&&(removeEC3NormalStatus(t),compatTextStyle(t,"label"),t.emphasis&&compatTextStyle(t.emphasis,"label"))}function processSeries(t){if(isObject$2(t)){compatEC2ItemStyle(t),removeEC3NormalStatus(t),compatTextStyle(t,"label"),compatTextStyle(t,"upperLabel"),compatTextStyle(t,"edgeLabel"),t.emphasis&&(compatTextStyle(t.emphasis,"label"),compatTextStyle(t.emphasis,"upperLabel"),compatTextStyle(t.emphasis,"edgeLabel"));var n=t.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var a=t.markLine;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var s=t.markArea;s&&compatEC3CommonStyles(s);var l=t.data;if(t.type==="graph"){l=l||t.nodes;var u=t.links||t.edges;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);each$f(t.categories,function(ar){removeEC3NormalStatus(ar)})}if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatEC3CommonStyles(l[c]);if(n=t.markPoint,n&&n.data)for(var d=n.data,c=0;c<d.length;c++)compatEC3CommonStyles(d[c]);if(a=t.markLine,a&&a.data)for(var Ct=a.data,c=0;c<Ct.length;c++)isArray$1(Ct[c])?(compatEC3CommonStyles(Ct[c][0]),compatEC3CommonStyles(Ct[c][1])):compatEC3CommonStyles(Ct[c]);t.type==="gauge"?(compatTextStyle(t,"axisLabel"),compatTextStyle(t,"title"),compatTextStyle(t,"detail")):t.type==="treemap"?(convertNormalEmphasis(t.breadcrumb,"itemStyle"),each$f(t.levels,function(ar){removeEC3NormalStatus(ar)})):t.type==="tree"&&removeEC3NormalStatus(t.leaves)}}function toArr(t){return isArray$1(t)?t:t?[t]:[]}function toObj(t){return(isArray$1(t)?t[0]:t)||{}}function globalCompatStyle(t,n){each$d(toArr(t.series),function(s){isObject$2(s)&&processSeries(s)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(a,function(s){each$d(toArr(t[s]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(t.parallel),function(s){var l=s&&s.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(t.calendar),function(s){convertNormalEmphasis(s,"itemStyle"),compatTextStyle(s,"dayLabel"),compatTextStyle(s,"monthLabel"),compatTextStyle(s,"yearLabel")}),each$d(toArr(t.radar),function(s){compatTextStyle(s,"name"),s.name&&s.axisName==null&&(s.axisName=s.name,delete s.name),s.nameGap!=null&&s.axisNameGap==null&&(s.axisNameGap=s.nameGap,delete s.nameGap)}),each$d(toArr(t.geo),function(s){isObject$2(s)&&(compatEC3CommonStyles(s),each$d(toArr(s.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(t.timeline),function(s){compatEC3CommonStyles(s),convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"),convertNormalEmphasis(s,"controlStyle",!0);var l=s.data;isArray$1(l)&&each$f(l,function(u){isObject$3(u)&&(convertNormalEmphasis(u,"label"),convertNormalEmphasis(u,"itemStyle"))})}),each$d(toArr(t.toolbox),function(s){convertNormalEmphasis(s,"iconStyle"),each$d(s.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(t.axisPointer),"label"),compatTextStyle(toObj(t.tooltip).axisPointer,"label")}function get(t,n){for(var a=n.split(","),s=t,l=0;l<a.length&&(s=s&&s[a[l]],s!=null);l++);return s}function set(t,n,a,s){for(var l=n.split(","),u=t,c,d=0;d<l.length-1;d++)c=l[d],u[c]==null&&(u[c]={}),u=u[c];u[l[d]]==null&&(u[l[d]]=a)}function compatLayoutProperties(t){t&&each$f(LAYOUT_PROPERTIES,function(n){n[0]in t&&!(n[1]in t)&&(t[n[1]]=t[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0;a<BAR_ITEM_STYLE_MAP.length;a++){var s=BAR_ITEM_STYLE_MAP[a][1],l=BAR_ITEM_STYLE_MAP[a][0];n[s]!=null&&(n[l]=n[s])}}function compatPieLabel(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function compatSunburstState(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function compatGraphFocus(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function traverseTree(t,n){if(t)for(var a=0;a<t.length;a++)n(t[a]),t[a]&&traverseTree(t[a].children,n)}function globalBackwardCompat(t,n){globalCompatStyle(t,n),t.series=normalizeToArray(t.series),each$f(t.series,function(a){if(isObject$3(a)){var s=a.type;if(s==="line")a.clipOverflow!=null&&(a.clip=a.clipOverflow);else if(s==="pie"||s==="gauge"){a.clockWise!=null&&(a.clockwise=a.clockWise),compatPieLabel(a.label);var l=a.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatPieLabel(l[u]);a.hoverOffset!=null&&(a.emphasis=a.emphasis||{},(a.emphasis.scaleSize=null)&&(a.emphasis.scaleSize=a.hoverOffset))}else if(s==="gauge"){var c=get(a,"pointer.color");c!=null&&set(a,"itemStyle.color",c)}else if(s==="bar"){compatBarItemStyle(a),compatBarItemStyle(a.backgroundStyle),compatBarItemStyle(a.emphasis);var l=a.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)typeof l[u]=="object"&&(compatBarItemStyle(l[u]),compatBarItemStyle(l[u]&&l[u].emphasis))}else if(s==="sunburst"){var d=a.highlightPolicy;d&&(a.emphasis=a.emphasis||{},a.emphasis.focus||(a.emphasis.focus=d)),compatSunburstState(a),traverseTree(a.data,compatSunburstState)}else s==="graph"||s==="sankey"?compatGraphFocus(a):s==="map"&&(a.mapType&&!a.map&&(a.map=a.mapType),a.mapLocation&&defaults(a,a.mapLocation));a.hoverAnimation!=null&&(a.emphasis=a.emphasis||{},a.emphasis&&a.emphasis.scale==null&&(a.emphasis.scale=a.hoverAnimation)),compatLayoutProperties(a)}}),t.dataRange&&(t.visualMap=t.dataRange),each$f(COMPATITABLE_COMPONENTS,function(a){var s=t[a];s&&(isArray$1(s)||(s=[s]),each$f(s,function(l){compatLayoutProperties(l)}))})}function dataStack$1(t){var n=createHashMap();t.eachSeries(function(a){var s=a.get("stack");if(s){var l=n.get(s)||n.set(s,[]),u=a.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:a};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;l.length&&u.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(c)}}),n.each(calculateStack)}function calculateStack(t){each$f(t,function(n,a){var s=[],l=[NaN,NaN],u=[n.stackResultDimension,n.stackedOverDimension],c=n.data,d=n.isStackedByIndex,Ct=n.seriesModel.get("stackStrategy")||"samesign";c.modify(u,function(ar,en,tn){var on=c.get(n.stackedDimension,tn);if(isNaN(on))return l;var cn,dn;d?dn=c.getRawIndex(tn):cn=c.get(n.stackedByDimension,tn);for(var Cn=NaN,In=a-1;In>=0;In--){var ix=t[In];if(d||(dn=ix.data.rawIndexOf(ix.stackedByDimension,cn)),dn>=0){var ax=ix.data.getByRawIndex(ix.stackResultDimension,dn);if(Ct==="all"||Ct==="positive"&&ax>0||Ct==="negative"&&ax<0||Ct==="samesign"&&on>=0&&ax>0||Ct==="samesign"&&on<=0&&ax<0){on=addSafe(on,ax),Cn=ax;break}}}return s[0]=on,s[1]=Cn,s})})}var SourceImpl=(function(){function t(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var a=this.dimensionsDefine=n.dimensionsDefine;if(a)for(var s=0;s<a.length;s++){var l=a[s];l.type==null&&guessOrdinal(this,s)===BE_ORDINAL.Must&&(l.type="ordinal")}}return t})();function isSourceInstance(t){return t instanceof SourceImpl}function createSource(t,n,a){a=a||detectSourceFormat(t);var s=n.seriesLayoutBy,l=determineSourceDimensions(t,a,s,n.sourceHeader,n.dimensions),u=new SourceImpl({data:t,sourceFormat:a,seriesLayoutBy:s,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(n)});return u}function createSourceFromSeriesDataOption(t){return new SourceImpl({data:t,sourceFormat:isTypedArray(t)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(t){return new SourceImpl({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:clone$4(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function detectSourceFormat(t){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(t))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(t)){t.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var a=0,s=t.length;a<s;a++){var l=t[a];if(l!=null){if(isArray$1(l)||isTypedArray(l)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(t)){for(var u in t)if(hasOwn(t,u)&&isArrayLike(t[u])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(t,n,a,s,l){var u,c;if(!t)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:c,dimensionsDetectedCount:u};if(n===SOURCE_FORMAT_ARRAY_ROWS){var d=t;s==="auto"||s==null?arrayRowsTravelFirst(function(ar){ar!=null&&ar!=="-"&&(isString$1(ar)?c==null&&(c=1):c=0)},a,d,10):c=isNumber(s)?s:s?1:0,!l&&c===1&&(l=[],arrayRowsTravelFirst(function(ar,en){l[en]=ar!=null?ar+"":""},a,d,1/0)),u=l?l.length:a===SERIES_LAYOUT_BY_ROW?d.length:d[0]?d[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(t));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(t,function(ar,en){l.push(en)}));else if(n===SOURCE_FORMAT_ORIGINAL){var Ct=getDataItemValue(t[0]);u=isArray$1(Ct)&&Ct.length||1}return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(t){for(var n=0,a;n<t.length&&!(a=t[n++]););if(a)return keys(a)}function normalizeDimensionsOption(t){if(t){var n=createHashMap();return map$1(t,function(a,s){a=isObject$3(a)?a:{name:a};var l={name:a.name,displayName:a.displayName,type:a.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var u=n.get(l.name);return u?l.name+="-"+u.count++:n.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(t,n,a,s){if(n===SERIES_LAYOUT_BY_ROW)for(var l=0;l<a.length&&l<s;l++)t(a[l]?a[l][0]:null,l);else for(var u=a[0]||[],l=0;l<u.length&&l<s;l++)t(u[l],l)}function shouldRetrieveDataByName(t){var n=t.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=(function(){function t(n,a){var s=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=s;var l=this._data=s.data;s.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=a,this._data=l),mountMethods(this,l,s)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(n,a){},t.prototype.appendData=function(n){},t.prototype.clean=function(){},t.protoInitialize=(function(){var n=t.prototype;n.pure=!1,n.persistent=!0})(),t.internalField=(function(){var n;mountMethods=function(c,d,Ct){var ar=Ct.sourceFormat,en=Ct.seriesLayoutBy,tn=Ct.startIndex,on=Ct.dimensionsDefine,cn=providerMethods[getMethodMapKey(ar,en)];if(extend(c,cn),ar===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=a,c.count=l,c.fillStorage=s;else{var dn=getRawSourceItemGetter(ar,en);c.getItem=bind$1(dn,null,d,tn,on);var Cn=getRawSourceDataCounter(ar,en);c.count=bind$1(Cn,null,d,tn,on)}};var a=function(c,d){c=c-this._offset,d=d||[];for(var Ct=this._data,ar=this._dimSize,en=ar*c,tn=0;tn<ar;tn++)d[tn]=Ct[en+tn];return d},s=function(c,d,Ct,ar){for(var en=this._data,tn=this._dimSize,on=0;on<tn;on++){for(var cn=ar[on],dn=cn[0]==null?1/0:cn[0],Cn=cn[1]==null?-1/0:cn[1],In=d-c,ix=Ct[on],ax=0;ax<In;ax++){var ox=en[ax*tn+on];ix[c+ax]=ox,ox<dn&&(dn=ox),ox>Cn&&(Cn=ox)}cn[0]=dn,cn[1]=Cn}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var d=this._data;each$f(c,function(Ct,ar){for(var en=d[ar]||(d[ar]=[]),tn=0;tn<(Ct||[]).length;tn++)en.push(Ct[tn])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:u},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},n);function u(c){for(var d=0;d<c.length;d++)this._data.push(c[d])}})(),t})(),getItemSimply=function(t,n,a,s){return t[s]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a,s){return t[s+n]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a,s,l){s+=n;for(var u=l||[],c=t,d=0;d<c.length;d++){var Ct=c[d];u[d]=Ct?Ct[s]:null}return u},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a,s,l){for(var u=l||[],c=0;c<a.length;c++){var d=a[c].name,Ct=t[d];u[c]=Ct?Ct[s]:null}return u},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(t,n){var a=rawSourceItemGetterMap[getMethodMapKey(t,n)];return a}var countSimply=function(t,n,a){return t.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a){return Math.max(0,t.length-n)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a){var s=t[0];return s?Math.max(0,s.length-n):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a){var s=a[0].name,l=t[s];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(t,n){var a=rawSourceDataCounterMap[getMethodMapKey(t,n)];return a}var getRawValueSimply=function(t,n,a){return t[n]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(t,n,a){return t[a]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(t,n,a){var s=getDataItemValue(t);return s instanceof Array?s[n]:s},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(t){var n=rawSourceValueGetterMap[t];return n}function getMethodMapKey(t,n){return t===SOURCE_FORMAT_ARRAY_ROWS?t+"_"+n:t}function retrieveRawValue(t,n,a){if(t){var s=t.getRawDataItem(n);if(s!=null){var l=t.getStore(),u=l.getSource().sourceFormat;if(a!=null){var c=t.getDimensionIndex(a),d=l.getDimensionProperty(c);return getRawSourceValueGetter(u)(s,c,d)}else{var Ct=s;return u===SOURCE_FORMAT_ORIGINAL&&(Ct=getDataItemValue(s)),Ct}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=(function(){function t(){}return t.prototype.getDataParams=function(n,a){var s=this.getData(a),l=this.getRawValue(n,a),u=s.getRawIndex(n),c=s.getName(n),d=s.getRawDataItem(n),Ct=s.getItemVisual(n,"style"),ar=Ct&&Ct[s.getItemVisual(n,"drawType")||"fill"],en=Ct&&Ct.stroke,tn=this.mainType,on=tn==="series",cn=s.userOutput&&s.userOutput.get();return{componentType:tn,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:on?this.subType:null,seriesIndex:this.seriesIndex,seriesId:on?this.id:null,seriesName:on?this.name:null,name:c,dataIndex:u,data:d,dataType:a,value:l,color:ar,borderColor:en,dimensionNames:cn?cn.fullDimensions:null,encode:cn?cn.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(n,a,s,l,u,c){a=a||"normal";var d=this.getData(s),Ct=this.getDataParams(n,s);if(c&&(Ct.value=c.interpolatedValue),l!=null&&isArray$1(Ct.value)&&(Ct.value=Ct.value[l]),!u){var ar=d.getItemModel(n);u=ar.get(a==="normal"?["label","formatter"]:[a,"label","formatter"])}if(isFunction$1(u))return Ct.status=a,Ct.dimensionIndex=l,u(Ct);if(isString$1(u)){var en=formatTpl(u,Ct);return en.replace(DIMENSION_LABEL_REG,function(tn,on){var cn=on.length,dn=on;dn.charAt(0)==="["&&dn.charAt(cn-1)==="]"&&(dn=+dn.slice(1,cn-1));var Cn=retrieveRawValue(d,n,dn);if(c&&isArray$1(c.interpolatedValue)){var In=d.getDimensionIndex(dn);In>=0&&(Cn=c.interpolatedValue[In])}return Cn!=null?Cn+"":""})}},t.prototype.getRawValue=function(n,a){return retrieveRawValue(this.getData(a),n)},t.prototype.formatTooltip=function(n,a,s){},t})();function normalizeTooltipFormatResult(t){var n,a;return isObject$3(t)?t.type&&(a=t):n=t,{text:n,frag:a}}function createTask(t){return new Task(t)}var Task=(function(){function t(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return t.prototype.perform=function(n){var a=this._upstream,s=n&&n.skip;if(this._dirty&&a){var l=this.context;l.data=l.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!s&&(u=this._plan(this.context));var c=en(this._modBy),d=this._modDataCount||0,Ct=en(n&&n.modBy),ar=n&&n.modDataCount||0;(c!==Ct||d!==ar)&&(u="reset");function en(ax){return!(ax>=1)&&(ax=1),ax}var tn;(this._dirty||u==="reset")&&(this._dirty=!1,tn=this._doReset(s)),this._modBy=Ct,this._modDataCount=ar;var on=n&&n.step;if(a?this._dueEnd=a._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var cn=this._dueIndex,dn=Math.min(on!=null?this._dueIndex+on:1/0,this._dueEnd);if(!s&&(tn||cn<dn)){var Cn=this._progress;if(isArray$1(Cn))for(var In=0;In<Cn.length;In++)this._doProgress(Cn[In],cn,dn,Ct,ar);else this._doProgress(Cn,cn,dn,Ct,ar)}this._dueIndex=dn;var ix=this._settedOutputEnd!=null?this._settedOutputEnd:dn;this._outputDueEnd=ix}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(n,a,s,l,u){iterator.reset(a,s,l,u),this._callingProgress=n,this._callingProgress({start:a,end:s,count:s-a,next:iterator.next},this.context)},t.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var a,s;!n&&this._reset&&(a=this._reset(this.context),a&&a.progress&&(s=a.forceFirstProgress,a=a.progress),isArray$1(a)&&!a.length&&(a=null)),this._progress=a,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),s},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},t})(),iterator=(function(){var t,n,a,s,l,u={reset:function(Ct,ar,en,tn){n=Ct,t=ar,a=en,s=tn,l=Math.ceil(s/a),u.next=a>1&&s>0?d:c}};return u;function c(){return n<t?n++:null}function d(){var Ct=n%l*a+Math.ceil(n/l),ar=n>=t?null:Ct<s?Ct:n;return n++,ar}})();function parseDataValue(t,n){var a=n&&n.type;return a==="ordinal"?t:(a==="time"&&!isNumber(t)&&t!=null&&t!=="-"&&(t=+parseDate(t)),t==null||t===""?NaN:Number(t))}var valueParserMap=createHashMap({number:function(t){return parseFloat(t)},time:function(t){return+parseDate(t)},trim:function(t){return isString$1(t)?trim$1(t):t}});function getRawValueParser(t){return valueParserMap.get(t)}var ORDER_COMPARISON_OP_MAP={lt:function(t,n){return t<n},lte:function(t,n){return t<=n},gt:function(t,n){return t>n},gte:function(t,n){return t>=n}},FilterOrderComparator=(function(){function t(n,a){if(!isNumber(a)){var s="";throwError(s)}this._opFn=ORDER_COMPARISON_OP_MAP[n],this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){return isNumber(n)?this._opFn(n,this._rvalFloat):this._opFn(numericToNumber(n),this._rvalFloat)},t})(),SortOrderComparator=(function(){function t(n,a){var s=n==="desc";this._resultLT=s?1:-1,a==null&&(a=s?"min":"max"),this._incomparable=a==="min"?-1/0:1/0}return t.prototype.evaluate=function(n,a){var s=isNumber(n)?n:numericToNumber(n),l=isNumber(a)?a:numericToNumber(a),u=isNaN(s),c=isNaN(l);if(u&&(s=this._incomparable),c&&(l=this._incomparable),u&&c){var d=isString$1(n),Ct=isString$1(a);d&&(s=Ct?n:0),Ct&&(l=d?a:0)}return s<l?this._resultLT:s>l?-this._resultLT:0},t})(),FilterEqualityComparator=(function(){function t(n,a){this._rval=a,this._isEQ=n,this._rvalTypeof=typeof a,this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){var a=n===this._rval;if(!a){var s=typeof n;s!==this._rvalTypeof&&(s==="number"||this._rvalTypeof==="number")&&(a=numericToNumber(n)===this._rvalFloat)}return this._isEQ?a:!a},t})();function createFilterComparator(t,n){return t==="eq"||t==="ne"?new FilterEqualityComparator(t==="eq",n):hasOwn(ORDER_COMPARISON_OP_MAP,t)?new FilterOrderComparator(t,n):null}var ExternalSource=(function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(n){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(n){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(n,a){},t.prototype.retrieveValueFromItem=function(n,a){},t.prototype.convertValue=function(n,a){return parseDataValue(n,a)},t})();function createExternalSource(t,n){var a=new ExternalSource,s=t.data,l=a.sourceFormat=t.sourceFormat,u=t.startIndex,c="";t.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(c);var d=[],Ct={},ar=t.dimensionsDefine;if(ar)each$f(ar,function(Cn,In){var ix=Cn.name,ax={index:In,name:ix,displayName:Cn.displayName};if(d.push(ax),ix!=null){var ox="";hasOwn(Ct,ix)&&throwError(ox),Ct[ix]=ax}});else for(var en=0;en<t.dimensionsDetectedCount;en++)d.push({index:en});var tn=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(a.getRawDataItem=function(Cn){return tn(s,u,d,Cn)},a.getRawData=bind$1(getRawData,null,t)),a.cloneRawData=bind$1(cloneRawData,null,t);var on=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);a.count=bind$1(on,null,s,u,d);var cn=getRawSourceValueGetter(l);a.retrieveValue=function(Cn,In){var ix=tn(s,u,d,Cn);return dn(ix,In)};var dn=a.retrieveValueFromItem=function(Cn,In){if(Cn!=null){var ix=d[In];if(ix)return cn(Cn,In,ix.name)}};return a.getDimensionInfo=bind$1(getDimensionInfo,null,d,Ct),a.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,d),a}function getRawData(t){var n=t.sourceFormat;if(!isSupportedSourceFormat(n)){var a="";throwError(a)}return t.data}function cloneRawData(t){var n=t.sourceFormat,a=t.data;if(!isSupportedSourceFormat(n)){var s="";throwError(s)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],u=0,c=a.length;u<c;u++)l.push(a[u].slice());return l}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],u=0,c=a.length;u<c;u++)l.push(extend({},a[u]));return l}}function getDimensionInfo(t,n,a){if(a!=null){if(isNumber(a)||!isNaN(a)&&!hasOwn(n,a))return t[a];if(hasOwn(n,a))return n[a]}}function cloneAllDimensionInfo(t){return clone$4(t)}var externalTransformMap=createHashMap();function registerExternalTransform(t){t=clone$4(t);var n=t.type,a="";n||throwError(a);var s=n.split(":");s.length!==2&&throwError(a);var l=!1;s[0]==="echarts"&&(n=s[1],l=!0),t.__isBuiltIn=l,externalTransformMap.set(n,t)}function applyDataTransform(t,n,a){var s=normalizeToArray(t),l=s.length,u="";l||throwError(u);for(var c=0,d=l;c<d;c++){var Ct=s[c];n=applySingleDataTransform(Ct,n),c!==d-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(t,n,a,s){var l="";n.length||throwError(l),isObject$3(t)||throwError(l);var u=t.type,c=externalTransformMap.get(u);c||throwError(l);var d=map$1(n,function(ar){return createExternalSource(ar,c)}),Ct=normalizeToArray(c.transform({upstream:d[0],upstreamList:d,config:clone$4(t.config)}));return map$1(Ct,function(ar,en){var tn="";isObject$3(ar)||throwError(tn),ar.data||throwError(tn);var on=detectSourceFormat(ar.data);isSupportedSourceFormat(on)||throwError(tn);var cn,dn=n[0];if(dn&&en===0&&!ar.dimensions){var Cn=dn.startIndex;Cn&&(ar.data=dn.data.slice(0,Cn).concat(ar.data)),cn={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:Cn,dimensions:dn.metaRawOption.dimensions}}else cn={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:ar.dimensions};return createSource(ar.data,cn,null)})}function isSupportedSourceFormat(t){return t===SOURCE_FORMAT_ARRAY_ROWS||t===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(t){return t>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(t){var n=t.constructor;return n===Array?t.slice():new n(t)}function prepareStore(t,n,a,s,l){var u=dataCtors[a||"float"];if(l){var c=t[n],d=c&&c.length;if(d!==s){for(var Ct=new u(s),ar=0;ar<d;ar++)Ct[ar]=c[ar];t[n]=Ct}}else t[n]=new u(s)}var DataStore=(function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return t.prototype.initData=function(n,a,s){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=n.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=s||u,this._rawExtent=[],shouldRetrieveDataByName(l),this._dimensions=map$1(a,function(c){return{type:c.type,property:c.property}}),this._initDataFromProvider(0,n.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(n,a){var s=this._calcDimNameToIdx,l=this._dimensions,u=s.get(n);if(u!=null){if(l[u].type===a)return u}else u=l.length;return l[u]={type:a},s.set(n,u),this._chunks[u]=new dataCtors[a||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},t.prototype.collectOrdinalMeta=function(n,a){var s=this._chunks[n],l=this._dimensions[n],u=this._rawExtent,c=l.ordinalOffset||0,d=s.length;c===0&&(u[n]=getInitialExtent());for(var Ct=u[n],ar=c;ar<d;ar++){var en=s[ar]=a.parseAndCollect(s[ar]);isNaN(en)||(Ct[0]=Math.min(en,Ct[0]),Ct[1]=Math.max(en,Ct[1]))}l.ordinalMeta=a,l.ordinalOffset=d,l.type="ordinal"},t.prototype.getOrdinalMeta=function(n){var a=this._dimensions[n],s=a.ordinalMeta;return s},t.prototype.getDimensionProperty=function(n){var a=this._dimensions[n];return a&&a.property},t.prototype.appendData=function(n){var a=this._provider,s=this.count();a.appendData(n);var l=a.count();return a.persistent||(l+=s),s<l&&this._initDataFromProvider(s,l,!0),[s,l]},t.prototype.appendValues=function(n,a){for(var s=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,d=this.count(),Ct=d+Math.max(n.length,a||0),ar=0;ar<u;ar++){var en=l[ar];prepareStore(s,ar,en.type,Ct,!0)}for(var tn=[],on=d;on<Ct;on++)for(var cn=on-d,dn=0;dn<u;dn++){var en=l[dn],Cn=defaultDimValueGetters.arrayRows.call(this,n[cn]||tn,en.property,cn,dn);s[dn][on]=Cn;var In=c[dn];Cn<In[0]&&(In[0]=Cn),Cn>In[1]&&(In[1]=Cn)}return this._rawCount=this._count=Ct,{start:d,end:Ct}},t.prototype._initDataFromProvider=function(n,a,s){for(var l=this._provider,u=this._chunks,c=this._dimensions,d=c.length,Ct=this._rawExtent,ar=map$1(c,function(ax){return ax.property}),en=0;en<d;en++){var tn=c[en];Ct[en]||(Ct[en]=getInitialExtent()),prepareStore(u,en,tn.type,a,s)}if(l.fillStorage)l.fillStorage(n,a,u,Ct);else for(var on=[],cn=n;cn<a;cn++){on=l.getItem(cn,on);for(var dn=0;dn<d;dn++){var Cn=u[dn],In=this._dimValueGetter(on,ar[dn],cn,dn);Cn[cn]=In;var ix=Ct[dn];In<ix[0]&&(ix[0]=In),In>ix[1]&&(ix[1]=In)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=a,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(n,a){if(!(a>=0&&a<this._count))return NaN;var s=this._chunks[n];return s?s[this.getRawIndex(a)]:NaN},t.prototype.getValues=function(n,a){var s=[],l=[];if(a==null){a=n,n=[];for(var u=0;u<this._dimensions.length;u++)l.push(u)}else l=n;for(var u=0,c=l.length;u<c;u++)s.push(this.get(l[u],a));return s},t.prototype.getByRawIndex=function(n,a){if(!(a>=0&&a<this._rawCount))return NaN;var s=this._chunks[n];return s?s[a]:NaN},t.prototype.getSum=function(n){var a=this._chunks[n],s=0;if(a)for(var l=0,u=this.count();l<u;l++){var c=this.get(n,l);isNaN(c)||(s+=c)}return s},t.prototype.getMedian=function(n){var a=[];this.each([n],function(u){isNaN(u)||a.push(u)});var s=a.sort(function(u,c){return u-c}),l=this.count();return l===0?0:l%2===1?s[(l-1)/2]:(s[l/2]+s[l/2-1])/2},t.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var a=this._indices,s=a[n];if(s!=null&&s<this._count&&s===n)return n;for(var l=0,u=this._count-1;l<=u;){var c=(l+u)/2|0;if(a[c]<n)l=c+1;else if(a[c]>n)u=c-1;else return c}return-1},t.prototype.indicesOfNearest=function(n,a,s){var l=this._chunks,u=l[n],c=[];if(!u)return c;s==null&&(s=1/0);for(var d=1/0,Ct=-1,ar=0,en=0,tn=this.count();en<tn;en++){var on=this.getRawIndex(en),cn=a-u[on],dn=Math.abs(cn);dn<=s&&((dn<d||dn===d&&cn>=0&&Ct<0)&&(d=dn,Ct=cn,ar=0),cn===Ct&&(c[ar++]=en))}return c.length=ar,c},t.prototype.getIndices=function(){var n,a=this._indices;if(a){var s=a.constructor,l=this._count;if(s===Array){n=new s(l);for(var u=0;u<l;u++)n[u]=a[u]}else n=new s(a.buffer,0,l)}else{var s=getIndicesCtor(this._rawCount);n=new s(this.count());for(var u=0;u<n.length;u++)n[u]=u}return n},t.prototype.filter=function(n,a){if(!this._count)return this;for(var s=this.clone(),l=s.count(),u=getIndicesCtor(s._rawCount),c=new u(l),d=[],Ct=n.length,ar=0,en=n[0],tn=s._chunks,on=0;on<l;on++){var cn=void 0,dn=s.getRawIndex(on);if(Ct===0)cn=a(on);else if(Ct===1){var Cn=tn[en][dn];cn=a(Cn,on)}else{for(var In=0;In<Ct;In++)d[In]=tn[n[In]][dn];d[In]=on,cn=a.apply(null,d)}cn&&(c[ar++]=dn)}return ar<l&&(s._indices=c),s._count=ar,s._extent=[],s._updateGetRawIdx(),s},t.prototype.selectRange=function(n){var a=this.clone(),s=a._count;if(!s)return this;var l=keys(n),u=l.length;if(!u)return this;var c=a.count(),d=getIndicesCtor(a._rawCount),Ct=new d(c),ar=0,en=l[0],tn=n[en][0],on=n[en][1],cn=a._chunks,dn=!1;if(!a._indices){var Cn=0;if(u===1){for(var In=cn[l[0]],ix=0;ix<s;ix++){var ax=In[ix];(ax>=tn&&ax<=on||isNaN(ax))&&(Ct[ar++]=Cn),Cn++}dn=!0}else if(u===2){for(var In=cn[l[0]],ox=cn[l[1]],sx=n[l[1]][0],ux=n[l[1]][1],ix=0;ix<s;ix++){var ax=In[ix],cx=ox[ix];(ax>=tn&&ax<=on||isNaN(ax))&&(cx>=sx&&cx<=ux||isNaN(cx))&&(Ct[ar++]=Cn),Cn++}dn=!0}}if(!dn)if(u===1)for(var ix=0;ix<c;ix++){var hx=a.getRawIndex(ix),ax=cn[l[0]][hx];(ax>=tn&&ax<=on||isNaN(ax))&&(Ct[ar++]=hx)}else for(var ix=0;ix<c;ix++){for(var gx=!0,hx=a.getRawIndex(ix),fx=0;fx<u;fx++){var dx=l[fx],ax=cn[dx][hx];(ax<n[dx][0]||ax>n[dx][1])&&(gx=!1)}gx&&(Ct[ar++]=a.getRawIndex(ix))}return ar<c&&(a._indices=Ct),a._count=ar,a._extent=[],a._updateGetRawIdx(),a},t.prototype.map=function(n,a){var s=this.clone(n);return this._updateDims(s,n,a),s},t.prototype.modify=function(n,a){this._updateDims(this,n,a)},t.prototype._updateDims=function(n,a,s){for(var l=n._chunks,u=[],c=a.length,d=n.count(),Ct=[],ar=n._rawExtent,en=0;en<a.length;en++)ar[a[en]]=getInitialExtent();for(var tn=0;tn<d;tn++){for(var on=n.getRawIndex(tn),cn=0;cn<c;cn++)Ct[cn]=l[a[cn]][on];Ct[c]=tn;var dn=s&&s.apply(null,Ct);if(dn!=null){typeof dn!="object"&&(u[0]=dn,dn=u);for(var en=0;en<dn.length;en++){var Cn=a[en],In=dn[en],ix=ar[Cn],ax=l[Cn];ax&&(ax[on]=In),In<ix[0]&&(ix[0]=In),In>ix[1]&&(ix[1]=In)}}}},t.prototype.lttbDownSample=function(n,a){var s=this.clone([n],!0),l=s._chunks,u=l[n],c=this.count(),d=0,Ct=Math.floor(1/a),ar=this.getRawIndex(0),en,tn,on,cn=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/Ct)+2)*2,c));cn[d++]=ar;for(var dn=1;dn<c-1;dn+=Ct){for(var Cn=Math.min(dn+Ct,c-1),In=Math.min(dn+Ct*2,c),ix=(In+Cn)/2,ax=0,ox=Cn;ox<In;ox++){var sx=this.getRawIndex(ox),ux=u[sx];isNaN(ux)||(ax+=ux)}ax/=In-Cn;var cx=dn,hx=Math.min(dn+Ct,c),gx=dn-1,fx=u[ar];en=-1,on=cx;for(var dx=-1,mx=0,ox=cx;ox<hx;ox++){var sx=this.getRawIndex(ox),ux=u[sx];if(isNaN(ux)){mx++,dx<0&&(dx=sx);continue}tn=Math.abs((gx-ix)*(ux-fx)-(gx-ox)*(ax-fx)),tn>en&&(en=tn,on=sx)}mx>0&&mx<hx-cx&&(cn[d++]=Math.min(dx,on),on=Math.max(dx,on)),cn[d++]=on,ar=on}return cn[d++]=this.getRawIndex(c-1),s._count=d,s._indices=cn,s.getRawIndex=this._getRawIdx,s},t.prototype.minmaxDownSample=function(n,a){for(var s=this.clone([n],!0),l=s._chunks,u=Math.floor(1/a),c=l[n],d=this.count(),Ct=new(getIndicesCtor(this._rawCount))(Math.ceil(d/u)*2),ar=0,en=0;en<d;en+=u){var tn=en,on=c[this.getRawIndex(tn)],cn=en,dn=c[this.getRawIndex(cn)],Cn=u;en+u>d&&(Cn=d-en);for(var In=0;In<Cn;In++){var ix=this.getRawIndex(en+In),ax=c[ix];ax<on&&(on=ax,tn=en+In),ax>dn&&(dn=ax,cn=en+In)}var ox=this.getRawIndex(tn),sx=this.getRawIndex(cn);tn<cn?(Ct[ar++]=ox,Ct[ar++]=sx):(Ct[ar++]=sx,Ct[ar++]=ox)}return s._count=ar,s._indices=Ct,s._updateGetRawIdx(),s},t.prototype.downSample=function(n,a,s,l){for(var u=this.clone([n],!0),c=u._chunks,d=[],Ct=Math.floor(1/a),ar=c[n],en=this.count(),tn=u._rawExtent[n]=getInitialExtent(),on=new(getIndicesCtor(this._rawCount))(Math.ceil(en/Ct)),cn=0,dn=0;dn<en;dn+=Ct){Ct>en-dn&&(Ct=en-dn,d.length=Ct);for(var Cn=0;Cn<Ct;Cn++){var In=this.getRawIndex(dn+Cn);d[Cn]=ar[In]}var ix=s(d),ax=this.getRawIndex(Math.min(dn+l(d,ix)||0,en-1));ar[ax]=ix,ix<tn[0]&&(tn[0]=ix),ix>tn[1]&&(tn[1]=ix),on[cn++]=ax}return u._count=cn,u._indices=on,u._updateGetRawIdx(),u},t.prototype.each=function(n,a){if(this._count)for(var s=n.length,l=this._chunks,u=0,c=this.count();u<c;u++){var d=this.getRawIndex(u);switch(s){case 0:a(u);break;case 1:a(l[n[0]][d],u);break;case 2:a(l[n[0]][d],l[n[1]][d],u);break;default:for(var Ct=0,ar=[];Ct<s;Ct++)ar[Ct]=l[n[Ct]][d];ar[Ct]=u,a.apply(null,ar)}}},t.prototype.getDataExtent=function(n){var a=this._chunks[n],s=getInitialExtent();if(!a)return s;var l=this.count(),u=!this._indices,c;if(u)return this._rawExtent[n].slice();if(c=this._extent[n],c)return c.slice();c=s;for(var d=c[0],Ct=c[1],ar=0;ar<l;ar++){var en=this.getRawIndex(ar),tn=a[en];tn<d&&(d=tn),tn>Ct&&(Ct=tn)}return c=[d,Ct],this._extent[n]=c,c},t.prototype.getRawDataItem=function(n){var a=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(a);for(var s=[],l=this._chunks,u=0;u<l.length;u++)s.push(l[u][a]);return s},t.prototype.clone=function(n,a){var s=new t,l=this._chunks,u=n&&reduce(n,function(d,Ct){return d[Ct]=!0,d},{});if(u)for(var c=0;c<l.length;c++)s._chunks[c]=u[c]?cloneChunk(l[c]):l[c];else s._chunks=l;return this._copyCommonProps(s),a||(s._indices=this._cloneIndices()),s._updateGetRawIdx(),s},t.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$4(this._extent),n._rawExtent=clone$4(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,a=void 0;if(n===Array){var s=this._indices.length;a=new n(s);for(var l=0;l<s;l++)a[l]=this._indices[l]}else a=new n(this._indices);return a}return null},t.prototype._getRawIdxIdentity=function(n){return n},t.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=(function(){function n(a,s,l,u){return parseDataValue(a[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:n,objectRows:function(a,s,l,u){return parseDataValue(a[s],this._dimensions[u])},keyedColumns:n,original:function(a,s,l,u){var c=a&&(a.value==null?a:a.value);return parseDataValue(c instanceof Array?c[u]:c,this._dimensions[u])},typedArray:function(a,s,l,u){return a[u]}}})(),t})(),SourceManager=(function(){function t(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(n,a){this._sourceList=n,this._upstreamSignList=a,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,a=this._getUpstreamSourceManagers(),s=!!a.length,l,u;if(isSeries(n)){var c=n,d=void 0,Ct=void 0,ar=void 0;if(s){var en=a[0];en.prepareSource(),ar=en.getSource(),d=ar.data,Ct=ar.sourceFormat,u=[en._getVersionSign()]}else d=c.get("data",!0),Ct=isTypedArray(d)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var tn=this._getSourceMetaRawOption()||{},on=ar&&ar.metaRawOption||{},cn=retrieve2(tn.seriesLayoutBy,on.seriesLayoutBy)||null,dn=retrieve2(tn.sourceHeader,on.sourceHeader),Cn=retrieve2(tn.dimensions,on.dimensions),In=cn!==on.seriesLayoutBy||!!dn!=!!on.sourceHeader||Cn;l=In?[createSource(d,{seriesLayoutBy:cn,sourceHeader:dn,dimensions:Cn},Ct)]:[]}else{var ix=n;if(s){var ax=this._applyTransform(a);l=ax.sourceList,u=ax.upstreamSignList}else{var ox=ix.get("source",!0);l=[createSource(ox,this._getSourceMetaRawOption(),null)],u=[]}}this._setLocalSource(l,u)},t.prototype._applyTransform=function(n){var a=this._sourceHost,s=a.get("transform",!0),l=a.get("fromTransformResult",!0);if(l!=null){var u="";n.length!==1&&doThrow(u)}var c,d=[],Ct=[];return each$f(n,function(ar){ar.prepareSource();var en=ar.getSource(l||0),tn="";l!=null&&!en&&doThrow(tn),d.push(en),Ct.push(ar._getVersionSign())}),s?c=applyDataTransform(s,d,{datasetIndex:a.componentIndex}):l!=null&&(c=[cloneSourceShallow(d[0])]),{sourceList:c,upstreamSignList:Ct}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),a=0;a<n.length;a++){var s=n[a];if(s._isDirty()||this._upstreamSignList[a]!==s._getVersionSign())return!0}},t.prototype.getSource=function(n){n=n||0;var a=this._sourceList[n];if(!a){var s=this._getUpstreamSourceManagers();return s[0]&&s[0].getSource(n)}return a},t.prototype.getSharedDataStore=function(n){var a=n.makeStoreSchema();return this._innerGetDataStore(a.dimensions,n.source,a.hash)},t.prototype._innerGetDataStore=function(n,a,s){var l=0,u=this._storeList,c=u[l];c||(c=u[l]={});var d=c[s];if(!d){var Ct=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&Ct?d=Ct._innerGetDataStore(n,a,s):(d=new DataStore,d.initData(new DefaultDataProvider(a,n.length),n)),c[s]=d}return d},t.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var a=querySeriesUpstreamDatasetModel(n);return a?[a.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(s){return s.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,a,s,l;if(isSeries(n))a=n.get("seriesLayoutBy",!0),s=n.get("sourceHeader",!0),l=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=n;a=u.get("seriesLayoutBy",!0),s=u.get("sourceHeader",!0),l=u.get("dimensions",!0)}return{seriesLayoutBy:a,sourceHeader:s,dimensions:l}},t})();function disableTransformOptionMerge(t){var n=t.option.transform;n&&setAsPrimitive(t.option.transform)}function isSeries(t){return t.mainType==="series"}function doThrow(t){throw new Error(t)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(t){var n=t.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(t,n){var a=t.color||"#6e7079",s=t.fontSize||12,l=t.fontWeight||"400",u=t.color||"#464646",c=t.fontSize||14,d=t.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(s+"")+"px;color:"+encodeHTML(a)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(d+"")}:{nameStyle:{fontSize:s,fill:a,fontWeight:l},valueStyle:{fontSize:c,fill:u,fontWeight:d}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(t,n){return n.type=t,n}function isSectionFragment(t){return t.type==="section"}function getBuilder(t){return isSectionFragment(t)?buildSection:buildNameValue}function getBlockGapLevel(t){if(isSectionFragment(t)){var n=0,a=t.blocks.length,s=a>1||a>0&&!t.noHeader;return each$f(t.blocks,function(l){var u=getBlockGapLevel(l);u>=n&&(n=u+ +(s&&(!u||isSectionFragment(l)&&!l.noHeader)))}),n}return 0}function buildSection(t,n,a,s){var l=n.noHeader,u=getGap(getBlockGapLevel(n)),c=[],d=n.blocks||[];assert(!d||isArray$1(d)),d=d||[];var Ct=t.orderMode;if(n.sortBlocks&&Ct){d=d.slice();var ar={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(ar,Ct)){var en=new SortOrderComparator(ar[Ct],null);d.sort(function(Cn,In){return en.evaluate(Cn.sortParam,In.sortParam)})}else Ct==="seriesDesc"&&d.reverse()}each$f(d,function(Cn,In){var ix=n.valueFormatter,ax=getBuilder(Cn)(ix?extend(extend({},t),{valueFormatter:ix}):t,Cn,In>0?u.html:0,s);ax!=null&&c.push(ax)});var tn=t.renderMode==="richText"?c.join(u.richText):wrapBlockHTML(s,c.join(""),l?a:u.html);if(l)return tn;var on=makeValueReadable(n.header,"ordinal",t.useUTC),cn=getTooltipTextStyle(s,t.renderMode).nameStyle,dn=getTooltipLineHeight(s);return t.renderMode==="richText"?wrapInlineNameRichText(t,on,cn)+u.richText+tn:wrapBlockHTML(s,'<div style="'+cn+";"+dn+';">'+encodeHTML(on)+"</div>"+tn,a)}function buildNameValue(t,n,a,s){var l=t.renderMode,u=n.noName,c=n.noValue,d=!n.markerType,Ct=n.name,ar=t.useUTC,en=n.valueFormatter||t.valueFormatter||function(sx){return sx=isArray$1(sx)?sx:[sx],map$1(sx,function(ux,cx){return makeValueReadable(ux,isArray$1(cn)?cn[cx]:cn,ar)})};if(!(u&&c)){var tn=d?"":t.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",l),on=u?"":makeValueReadable(Ct,"ordinal",ar),cn=n.valueType,dn=c?[]:en(n.value,n.dataIndex),Cn=!d||!u,In=!d&&u,ix=getTooltipTextStyle(s,l),ax=ix.nameStyle,ox=ix.valueStyle;return l==="richText"?(d?"":tn)+(u?"":wrapInlineNameRichText(t,on,ax))+(c?"":wrapInlineValueRichText(t,dn,Cn,In,ox)):wrapBlockHTML(s,(d?"":tn)+(u?"":wrapInlineNameHTML(on,!d,ax))+(c?"":wrapInlineValueHTML(dn,Cn,In,ox)),a)}}function buildTooltipMarkup(t,n,a,s,l,u){if(t){var c=getBuilder(t),d={useUTC:l,renderMode:a,orderMode:s,markupStyleCreator:n,valueFormatter:t.valueFormatter};return c(d,t,0,u)}}function getGap(t){return{html:HTML_GAPS[t],richText:RICH_TEXT_GAPS[t]}}function wrapBlockHTML(t,n,a){var s='<div style="clear:both"></div>',l="margin: "+a+"px 0 0",u=getTooltipLineHeight(t);return'<div style="'+l+";"+u+';">'+n+s+"</div>"}function wrapInlineNameHTML(t,n,a){var s=n?"margin-left:2px":"";return'<span style="'+a+";"+s+'">'+encodeHTML(t)+"</span>"}function wrapInlineValueHTML(t,n,a,s){var l=a?"10px":"20px",u=n?"float:right;margin-left:"+l:"";return t=isArray$1(t)?t:[t],'<span style="'+u+";"+s+'">'+map$1(t,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(t,n,a){return t.markupStyleCreator.wrapRichTextStyle(n,a)}function wrapInlineValueRichText(t,n,a,s,l){var u=[l],c=s?10:20;return a&&u.push({padding:[0,0,0,c],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,u)}function retrieveVisualColorForTooltipMarker(t,n){var a=t.getData().getItemVisual(n,"style"),s=a[t.visualDrawType];return convertToColorString(s)}function getPaddingFromTooltipModel(t,n){var a=t.get("padding");return a??(n==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=(function(){function t(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(n,a,s){var l=s==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:a,type:n,renderMode:s,markerId:l});return isString$1(u)?u:(this.richTextStyles[l]=u.style,u.content)},t.prototype.wrapRichTextStyle=function(n,a){var s={};isArray$1(a)?each$f(a,function(u){return extend(s,u)}):extend(s,a);var l=this._generateStyleName();return this.richTextStyles[l]=s,"{"+l+"|"+n+"}"},t})();function defaultSeriesFormatTooltip(t){var n=t.series,a=t.dataIndex,s=t.multipleSeries,l=n.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,d=n.getRawValue(a),Ct=isArray$1(d),ar=retrieveVisualColorForTooltipMarker(n,a),en,tn,on,cn;if(c>1||Ct&&!c){var dn=formatTooltipArrayValue(d,n,a,u,ar);en=dn.inlineValues,tn=dn.inlineValueTypes,on=dn.blocks,cn=dn.inlineValues[0]}else if(c){var Cn=l.getDimensionInfo(u[0]);cn=en=retrieveRawValue(l,a,u[0]),tn=Cn.type}else cn=en=Ct?d[0]:d;var In=isNameSpecified(n),ix=In&&n.name||"",ax=l.getName(a),ox=s?ix:ax;return createTooltipMarkup("section",{header:ix,noHeader:s||!In,sortParam:cn,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:ar,name:ox,noName:!trim$1(ox),value:en,valueType:tn,dataIndex:a})].concat(on||[])})}function formatTooltipArrayValue(t,n,a,s,l){var u=n.getData(),c=reduce(t,function(tn,on,cn){var dn=u.getDimensionInfo(cn);return tn=tn||dn&&dn.tooltip!==!1&&dn.displayName!=null},!1),d=[],Ct=[],ar=[];s.length?each$f(s,function(tn){en(retrieveRawValue(u,a,tn),tn)}):each$f(t,en);function en(tn,on){var cn=u.getDimensionInfo(on);!cn||cn.otherDims.tooltip===!1||(c?ar.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:cn.displayName,value:tn,valueType:cn.type})):(d.push(tn),Ct.push(cn.type)))}return{inlineValues:d,inlineValueTypes:Ct,blocks:ar}}var inner$k=makeInner();function getSelectionKey(t,n){return t.getName(n)||t.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._selectedDataIndicesMap={},a}return n.prototype.init=function(a,s,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(a,l);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var c=this.getInitialData(a,l);wrapData(c,this),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.mergeDefaultAndTheme=function(a,s){var l=fetchLayoutMode(this),u=l?getLayoutParams(a):{},c=this.subType;ComponentModel.hasClass(c)&&(c+="Series"),merge(a,s.getTheme().get(this.subType)),merge(a,this.getDefaultOption()),defaultEmphasis(a,"label",["show"]),this.fillDataTextStyle(a.data),l&&mergeLayoutParam(a,u,l)},n.prototype.mergeOption=function(a,s){a=merge(this.option,a,!0),this.fillDataTextStyle(a.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,a,l);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var c=this.getInitialData(a,s);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.fillDataTextStyle=function(a){if(a&&!isTypedArray(a))for(var s=["show"],l=0;l<a.length;l++)a[l]&&a[l].label&&defaultEmphasis(a[l],"label",s)},n.prototype.getInitialData=function(a,s){},n.prototype.appendData=function(a){var s=this.getRawData();s.appendData(a.data)},n.prototype.getData=function(a){var s=getCurrentTask(this);if(s){var l=s.context.data;return a==null||!l.getLinkedData?l:l.getLinkedData(a)}else return inner$k(this).data},n.prototype.getAllData=function(){var a=this.getData();return a&&a.getLinkedDataAll?a.getLinkedDataAll():[{data:a}]},n.prototype.setData=function(a){var s=getCurrentTask(this);if(s){var l=s.context;l.outputData=a,s!==this.dataTask&&(l.data=a)}inner$k(this).data=a},n.prototype.getEncode=function(){var a=this.get("encode",!0);if(a)return createHashMap(a)},n.prototype.getSourceManager=function(){return inner$k(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var a=this.get("colorBy");return a||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},n.prototype.formatTooltip=function(a,s,l){return defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s})},n.prototype.isAnimationEnabled=function(){var a=this.ecModel;if(env.node&&!(a&&a.ssr))return!1;var s=this.getShallow("animation");return s&&this.getData().count()>this.getShallow("animationThreshold")&&(s=!1),!!s},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(a,s,l){var u=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,a,s,l);return c||(c=u.getColorFromPalette(a,s,l)),c},n.prototype.coordDimToDataDim=function(a){return this.getRawData().mapDimensionsAll(a)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(a,s){this._innerSelect(this.getData(s),a)},n.prototype.unselect=function(a,s){var l=this.option.selectedMap;if(l){var u=this.option.selectedMode,c=this.getData(s);if(u==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var d=0;d<a.length;d++){var Ct=a[d],ar=getSelectionKey(c,Ct);l[ar]=!1,this._selectedDataIndicesMap[ar]=-1}}},n.prototype.toggleSelect=function(a,s){for(var l=[],u=0;u<a.length;u++)l[0]=a[u],this.isSelected(a[u],s)?this.unselect(l,s):this.select(l,s)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var a=this._selectedDataIndicesMap,s=keys(a),l=[],u=0;u<s.length;u++){var c=a[s[u]];c>=0&&l.push(c)}return l},n.prototype.isSelected=function(a,s){var l=this.option.selectedMap;if(!l)return!1;var u=this.getData(s);return(l==="all"||l[getSelectionKey(u,a)])&&!u.getItemModel(a).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var a=this.option.universalTransition;return a?a===!0?!0:a&&a.enabled:!1},n.prototype._innerSelect=function(a,s){var l,u,c=this.option,d=c.selectedMode,Ct=s.length;if(!(!d||!Ct)){if(d==="series")c.selectedMap="all";else if(d==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var ar=c.selectedMap,en=0;en<Ct;en++){var tn=s[en],on=getSelectionKey(a,tn);ar[on]=!0,this._selectedDataIndicesMap[on]=a.getRawIndex(tn)}}else if(d==="single"||d===!0){var cn=s[Ct-1],on=getSelectionKey(a,cn);c.selectedMap=(l={},l[on]=!0,l),this._selectedDataIndicesMap=(u={},u[on]=a.getRawIndex(cn),u)}}},n.prototype._initSelectedMapFromData=function(a){if(!this.option.selectedMap){var s=[];a.hasItemOption&&a.each(function(l){var u=a.getRawDataItem(l);u&&u.selected&&s.push(l)}),s.length>0&&this._innerSelect(a,s)}},n.registerClass=function(a){return ComponentModel.registerClass(a)},n.protoInitialize=(function(){var a=n.prototype;a.type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",a.visualDrawType="fill"})(),n})(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(t){var n=t.name;isNameSpecified(t)||(t.name=getSeriesAutoName(t)||n)}function getSeriesAutoName(t){var n=t.getRawData(),a=n.mapDimensionsAll("seriesName"),s=[];return each$f(a,function(l){var u=n.getDimensionInfo(l);u.displayName&&s.push(u.displayName)}),s.join(" ")}function dataTaskCount(t){return t.model.getRawData().count()}function dataTaskReset(t){var n=t.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(t,n){n.outputData&&t.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(t,n){each$f(concatArray(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(a){t.wrapMethod(a,curry$1(onDataChange,n))})}function onDataChange(t,n){var a=getCurrentTask(t);return a&&a.setOutputEnd((n||this).count()),n}function getCurrentTask(t){var n=(t.ecModel||{}).scheduler,a=n&&n.getPipeline(t.uid);if(a){var s=a.currentTask;if(s){var l=s.agentStubMap;l&&(s=l.get(t.uid))}return s}}var ComponentView=(function(){function t(){this.group=new Group$3,this.uid=getUID("viewComponent")}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,s,l){},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,s,l){},t.prototype.updateLayout=function(n,a,s,l){},t.prototype.updateVisual=function(n,a,s,l){},t.prototype.toggleBlurSeries=function(n,a,s){},t.prototype.eachRendered=function(n){var a=this.group;a&&a.traverse(n)},t})();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var t=makeInner();return function(n){var a=t(n),s=n.pipelineContext,l=!!a.large,u=!!a.progressiveRender,c=a.large=!!(s&&s.large),d=a.progressiveRender=!!(s&&s.progressiveRender);return(l!==c||u!==d)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=(function(){function t(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,s,l){},t.prototype.highlight=function(n,a,s,l){var u=n.getData(l&&l.dataType);u&&toggleHighlight(u,l,"emphasis")},t.prototype.downplay=function(n,a,s,l){var u=n.getData(l&&l.dataType);u&&toggleHighlight(u,l,"normal")},t.prototype.remove=function(n,a){this.group.removeAll()},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.updateLayout=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.updateVisual=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.eachRendered=function(n){traverseElements(this.group,n)},t.markUpdateMethod=function(n,a){inner$j(n).updateMethod=a},t.protoInitialize=(function(){var n=t.prototype;n.type="chart"})(),t})();function elSetState(t,n,a){t&&isHighDownDispatcher(t)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(t,a)}function toggleHighlight(t,n,a){var s=queryDataIndex(t,n),l=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;s!=null?each$f(normalizeToArray(s),function(u){elSetState(t.getItemGraphicEl(u),a,l)}):t.eachItemGraphicEl(function(u){elSetState(u,a,l)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(t){return renderPlanner(t.model)}function renderTaskReset(t){var n=t.model,a=t.ecModel,s=t.api,l=t.payload,u=n.pipelineContext.progressiveRender,c=t.view,d=l&&inner$j(l).updateMethod,Ct=u?"incrementalPrepareRender":d&&c[d]?d:"render";return Ct!=="render"&&c[Ct](n,a,s,l),progressMethodMap[Ct]}var progressMethodMap={incrementalPrepareRender:{progress:function(t,n){n.view.incrementalRender(t,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(t,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(t,n,a){var s,l=0,u=0,c=null,d,Ct,ar,en;n=n||0;function tn(){u=new Date().getTime(),c=null,t.apply(Ct,ar||[])}var on=function(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];s=new Date().getTime(),Ct=this,ar=cn;var Cn=en||n,In=en||a;en=null,d=s-(In?l:u)-Cn,clearTimeout(c),In?c=setTimeout(tn,Cn):d>=0?tn():c=setTimeout(tn,-d),l=s};return on.clear=function(){c&&(clearTimeout(c),c=null)},on.debounceNextCall=function(cn){en=cn},on}function createOrUpdate(t,n,a,s){var l=t[n];if(l){var u=l[ORIGIN_METHOD]||l,c=l[THROTTLE_TYPE],d=l[RATE];if(d!==a||c!==s){if(a==null||!s)return t[n]=u;l=t[n]=throttle(u,a,s==="debounce"),l[ORIGIN_METHOD]=u,l[THROTTLE_TYPE]=s,l[RATE]=a}return l}}function clear$1(t,n){var a=t[n];a&&a[ORIGIN_METHOD]&&(a.clear&&a.clear(),t[n]=a[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(t,n){var a=t.visualStyleMapper||defaultStyleMappers[n];return a||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(t,n){var a=t.visualDrawType||defaultColorKey[n];return a||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData(),s=t.visualStyleAccessPath||"itemStyle",l=t.getModel(s),u=getStyleMapper(t,s),c=u(l),d=l.getShallow("decal");d&&(a.setVisual("decal",d),d.dirty=!0);var Ct=getDefaultColorKey(t,s),ar=c[Ct],en=isFunction$1(ar)?ar:null,tn=c.fill==="auto"||c.stroke==="auto";if(!c[Ct]||en||tn){var on=t.getColorFromPalette(t.name,null,n.getSeriesCount());c[Ct]||(c[Ct]=on,a.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction$1(c.fill)?on:c.fill,c.stroke=c.stroke==="auto"||isFunction$1(c.stroke)?on:c.stroke}if(a.setVisual("style",c),a.setVisual("drawType",Ct),!n.isSeriesFiltered(t)&&en)return a.setVisual("colorFromPalette",!1),{dataEach:function(cn,dn){var Cn=t.getDataParams(dn),In=extend({},c);In[Ct]=en(Cn),cn.setItemVisual(dn,"style",In)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!(t.ignoreStyleOnData||n.isSeriesFiltered(t))){var a=t.getData(),s=t.visualStyleAccessPath||"itemStyle",l=getStyleMapper(t,s),u=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(c,d){var Ct=c.getRawDataItem(d);if(Ct&&Ct[s]){sharedModel.option=Ct[s];var ar=l(sharedModel),en=c.ensureUniqueItemVisual(d,"style");extend(en,ar),sharedModel.option.decal&&(c.setItemVisual(d,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in ar&&c.setItemVisual(d,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(t){var n=createHashMap();t.eachSeries(function(a){var s=a.getColorBy();if(!a.isColorBySeries()){var l=a.type+"-"+s,u=n.get(l);u||(u={},n.set(l,u)),inner$i(a).scope=u}}),t.eachSeries(function(a){if(!(a.isColorBySeries()||t.isSeriesFiltered(a))){var s=a.getRawData(),l={},u=a.getData(),c=inner$i(a).scope,d=a.visualStyleAccessPath||"itemStyle",Ct=getDefaultColorKey(a,d);u.each(function(ar){var en=u.getRawIndex(ar);l[en]=ar}),s.each(function(ar){var en=l[ar],tn=u.getItemVisual(en,"colorFromPalette");if(tn){var on=u.ensureUniqueItemVisual(en,"style"),cn=s.getName(ar)||ar+"",dn=s.count();on[Ct]=a.getColorFromPalette(cn,c,dn)}})}})}},PI$5=Math.PI;function defaultLoading(t,n){n=n||{},defaults(n,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var a=new Group$3,s=new Rect$2({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});a.add(s);var l=new ZRText({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),u=new Rect$2({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});a.add(u);var c;return n.showSpinner&&(c=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),a.add(c)),a.resize=function(){var d=l.getBoundingRect().width,Ct=n.showSpinner?n.spinnerRadius:0,ar=(t.getWidth()-Ct*2-(n.showSpinner&&d?10:0)-d)/2-(n.showSpinner&&d?0:5+d/2)+(n.showSpinner?0:d/2)+(d?0:Ct),en=t.getHeight()/2;n.showSpinner&&c.setShape({cx:ar,cy:en}),u.setShape({x:ar-Ct,y:en-Ct,width:Ct*2,height:Ct*2}),s.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}var Scheduler=(function(){function t(n,a,s,l){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=a,s=this._dataProcessorHandlers=s.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=s.concat(l)}return t.prototype.restoreData=function(n,a){n.restoreData(a),this._stageTaskMap.each(function(s){var l=s.overallTask;l&&l.dirty()})},t.prototype.getPerformArgs=function(n,a){if(n.__pipeline){var s=this._pipelineMap.get(n.__pipeline.id),l=s.context,u=!a&&s.progressiveEnabled&&(!l||l.progressiveRender)&&n.__idxInPipeline>s.blockIndex,c=u?s.step:null,d=l&&l.modDataCount,Ct=d!=null?Math.ceil(d/c):null;return{step:c,modBy:Ct,modDataCount:d}}},t.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},t.prototype.updateStreamModes=function(n,a){var s=this._pipelineMap.get(n.uid),l=n.getData(),u=l.count(),c=s.progressiveEnabled&&a.incrementalPrepareRender&&u>=s.threshold,d=n.get("large")&&u>=n.get("largeThreshold"),Ct=n.get("progressiveChunkMode")==="mod"?u:null;n.pipelineContext=s.context={progressiveRender:c,modDataCount:Ct,large:d}},t.prototype.restorePipelines=function(n){var a=this,s=a._pipelineMap=createHashMap();n.eachSeries(function(l){var u=l.getProgressive(),c=l.uid;s.set(c,{id:c,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:u&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),a._pipe(l,l.dataTask)})},t.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,a=this.api.getModel(),s=this.api;each$f(this._allHandlers,function(l){var u=n.get(l.uid)||n.set(l.uid,{}),c="";assert(!(l.reset&&l.overallReset),c),l.reset&&this._createSeriesStageTask(l,u,a,s),l.overallReset&&this._createOverallStageTask(l,u,a,s)},this)},t.prototype.prepareView=function(n,a,s,l){var u=n.renderTask,c=u.context;c.model=a,c.ecModel=s,c.api=l,u.__block=!n.incrementalPrepareRender,this._pipe(a,u)},t.prototype.performDataProcessorTasks=function(n,a){this._performStageTasks(this._dataProcessorHandlers,n,a,{block:!0})},t.prototype.performVisualTasks=function(n,a,s){this._performStageTasks(this._visualHandlers,n,a,s)},t.prototype._performStageTasks=function(n,a,s,l){l=l||{};var u=!1,c=this;each$f(n,function(Ct,ar){if(!(l.visualType&&l.visualType!==Ct.visualType)){var en=c._stageTaskMap.get(Ct.uid),tn=en.seriesTaskMap,on=en.overallTask;if(on){var cn,dn=on.agentStubMap;dn.each(function(In){d(l,In)&&(In.dirty(),cn=!0)}),cn&&on.dirty(),c.updatePayload(on,s);var Cn=c.getPerformArgs(on,l.block);dn.each(function(In){In.perform(Cn)}),on.perform(Cn)&&(u=!0)}else tn&&tn.each(function(In,ix){d(l,In)&&In.dirty();var ax=c.getPerformArgs(In,l.block);ax.skip=!Ct.performRawSeries&&a.isSeriesFiltered(In.context.model),c.updatePayload(In,s),In.perform(ax)&&(u=!0)})}});function d(Ct,ar){return Ct.setDirty&&(!Ct.dirtyMap||Ct.dirtyMap.get(ar.__pipeline.id))}this.unfinished=u||this.unfinished},t.prototype.performSeriesTasks=function(n){var a;n.eachSeries(function(s){a=s.dataTask.perform()||a}),this.unfinished=a||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(n){var a=n.tail;do{if(a.__block){n.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},t.prototype.updatePayload=function(n,a){a!=="remain"&&(n.context.payload=a)},t.prototype._createSeriesStageTask=function(n,a,s,l){var u=this,c=a.seriesTaskMap,d=a.seriesTaskMap=createHashMap(),Ct=n.seriesType,ar=n.getTargetSeries;n.createOnAllSeries?s.eachRawSeries(en):Ct?s.eachRawSeriesByType(Ct,en):ar&&ar(s,l).each(en);function en(tn){var on=tn.uid,cn=d.set(on,c&&c.get(on)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));cn.context={model:tn,ecModel:s,api:l,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:u},u._pipe(tn,cn)}},t.prototype._createOverallStageTask=function(n,a,s,l){var u=this,c=a.overallTask=a.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:s,api:l,overallReset:n.overallReset,scheduler:u};var d=c.agentStubMap,Ct=c.agentStubMap=createHashMap(),ar=n.seriesType,en=n.getTargetSeries,tn=!0,on=!1,cn="";assert(!n.createOnAllSeries,cn),ar?s.eachRawSeriesByType(ar,dn):en?en(s,l).each(dn):(tn=!1,each$f(s.getSeries(),dn));function dn(Cn){var In=Cn.uid,ix=Ct.set(In,d&&d.get(In)||(on=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));ix.context={model:Cn,overallProgress:tn},ix.agent=c,ix.__block=tn,u._pipe(Cn,ix)}on&&c.dirty()},t.prototype._pipe=function(n,a){var s=n.uid,l=this._pipelineMap.get(s);!l.head&&(l.head=a),l.tail&&l.tail.pipe(a),l.tail=a,a.__idxInPipeline=l.count++,a.__pipeline=l},t.wrapStageHandler=function(n,a){return isFunction$1(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),a&&(n.visualType=a),n},t})();function overallTaskReset(t){t.overallReset(t.ecModel,t.api,t.payload)}function stubReset(t){return t.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function seriesTaskReset(t){t.useClearVisual&&t.data.clearAllVisual();var n=t.resetDefines=normalizeToArray(t.reset(t.model,t.ecModel,t.api,t.payload));return n.length>1?map$1(n,function(a,s){return makeSeriesTaskProgress(s)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(t){return function(n,a){var s=a.data,l=a.resetDefines[t];if(l&&l.dataEach)for(var u=n.start;u<n.end;u++)l.dataEach(s,u);else l&&l.progress&&l.progress(n,s)}}function seriesTaskCount(t){return t.data.count()}function detectSeriseType(t){seriesType=null;try{t(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(t){seriesType=t};ecModelMock.eachComponent=function(t){t.mainType==="series"&&t.subType&&(seriesType=t.subType)};function mockMethods(t,n){for(var a in n.prototype)t[a]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=(function(){function t(){}return t.prototype.normalizeQuery=function(n){var a={},s={},l={};if(isString$1(n)){var u=parseClassType(n);a.mainType=u.main||null,a.subType=u.sub||null}else{var c=["Index","Name","Id"],d={name:1,dataIndex:1,dataType:1};each$f(n,function(Ct,ar){for(var en=!1,tn=0;tn<c.length;tn++){var on=c[tn],cn=ar.lastIndexOf(on);if(cn>0&&cn===ar.length-on.length){var dn=ar.slice(0,cn);dn!=="data"&&(a.mainType=dn,a[on.toLowerCase()]=Ct,en=!0)}}d.hasOwnProperty(ar)&&(s[ar]=Ct,en=!0),en||(l[ar]=Ct)})}return{cptQuery:a,dataQuery:s,otherQuery:l}},t.prototype.filter=function(n,a){var s=this.eventInfo;if(!s)return!0;var l=s.targetEl,u=s.packedEvent,c=s.model,d=s.view;if(!c||!d)return!0;var Ct=a.cptQuery,ar=a.dataQuery;return en(Ct,c,"mainType")&&en(Ct,c,"subType")&&en(Ct,c,"index","componentIndex")&&en(Ct,c,"name")&&en(Ct,c,"id")&&en(ar,u,"name")&&en(ar,u,"dataIndex")&&en(ar,u,"dataType")&&(!d.filterForExposedEvent||d.filterForExposedEvent(n,a.otherQuery,l,u));function en(tn,on,cn,dn){return tn[cn]==null||on[dn||cn]===tn[cn]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t})(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData();if(t.legendIcon&&a.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var s={},l={},u=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var d=SYMBOL_PROPS_WITH_CB[c],Ct=t.get(d);isFunction$1(Ct)?(u=!0,l[d]=Ct):s[d]=Ct}if(s.symbol=s.symbol||t.defaultSymbol,a.setVisual(extend({legendIcon:t.legendIcon||s.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},s)),n.isSeriesFiltered(t))return;var ar=keys(l);function en(tn,on){for(var cn=t.getRawValue(on),dn=t.getDataParams(on),Cn=0;Cn<ar.length;Cn++){var In=ar[Cn];tn.setItemVisual(on,In,l[In](cn,dn))}}return{dataEach:u?en:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!t.hasSymbolVisual||n.isSeriesFiltered(t))return;var a=t.getData();function s(l,u){for(var c=l.getItemModel(u),d=0;d<SYMBOL_PROPS.length;d++){var Ct=SYMBOL_PROPS[d],ar=c.getShallow(Ct,!0);ar!=null&&l.setItemVisual(u,Ct,ar)}}return{dataEach:a.hasItemOption?s:null}}};function getItemVisualFromData(t,n,a){switch(a){case"color":var s=t.getItemVisual(n,"style");return s[t.getVisual("drawType")];case"opacity":return t.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(n,a)}}function getVisualFromData(t,n){switch(n){case"color":var a=t.getVisual("style");return a[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(n)}}function setItemVisualFromData(t,n,a,s){switch(a){case"color":var l=t.ensureUniqueItemVisual(n,"style");l[t.getVisual("drawType")]=s,t.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(n,"style").opacity=s;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(n,a,s);break}}function createLegacyDataSelectAction(t,n){function a(s,l){var u=[];return s.eachComponent({mainType:"series",subType:t,query:l},function(c){u.push(c.seriesIndex)}),u}each$f([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(s){n(s[0],function(l,u,c){l=extend({},l),c.dispatchAction(extend(l,{type:s[1],seriesIndex:a(u,l)}))})})}function handleSeriesLegacySelectEvents(t,n,a,s,l){var u=t+n;a.isSilent(u)||s.eachComponent({mainType:"series",subType:"pie"},function(c){for(var d=c.seriesIndex,Ct=c.option.selectedMap,ar=l.selected,en=0;en<ar.length;en++)if(ar[en].seriesIndex===d){var tn=c.getData(),on=queryDataIndex(tn,l.fromActionPayload);a.trigger(u,{type:u,seriesId:c.id,name:isArray$1(on)?tn.getName(on[0]):tn.getName(on),selected:isString$1(Ct)?Ct:extend({},Ct)})}})}function handleLegacySelectEvents(t,n,a){t.on("selectchanged",function(s){var l=a.getModel();s.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,l,s),handleSeriesLegacySelectEvents("pie","selectchanged",n,l,s)):s.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,l,s),handleSeriesLegacySelectEvents("pie","selected",n,l,s)):s.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,l,s),handleSeriesLegacySelectEvents("pie","unselected",n,l,s))})}function findEventDispatcher(t,n,a){for(var s;t&&!(n(t)&&(s=t,a));)t=t.__hostTarget||t.parent;return s}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=(function(){function t(){this._id="__ec_inner_"+wmUniqueIndex++}return t.prototype.get=function(n){return this._guard(n)[this._id]},t.prototype.set=function(n,a){var s=this._guard(n);return supportDefineProperty?Object.defineProperty(s,this._id,{value:a,enumerable:!1,configurable:!0}):s[this._id]=a,this},t.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},t.prototype.has=function(n){return!!this._guard(n)[this._id]},t.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},t})(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,s=n.cy,l=n.width/2,u=n.height/2;t.moveTo(a,s-u),t.lineTo(a+l,s+u),t.lineTo(a-l,s+u),t.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,s=n.cy,l=n.width/2,u=n.height/2;t.moveTo(a,s-u),t.lineTo(a+l,s),t.lineTo(a,s+u),t.lineTo(a-l,s),t.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.x,s=n.y,l=n.width/5*3,u=Math.max(l,n.height),c=l/2,d=c*c/(u-c),Ct=s-u+c+d,ar=Math.asin(d/c),en=Math.cos(ar)*c,tn=Math.sin(ar),on=Math.cos(ar),cn=c*.6,dn=c*.7;t.moveTo(a-en,Ct+d),t.arc(a,Ct,c,Math.PI-ar,Math.PI*2+ar),t.bezierCurveTo(a+en-tn*cn,Ct+d+on*cn,a,s-dn,a,s),t.bezierCurveTo(a,s-dn,a-en+tn*cn,Ct+d+on*cn,a-en,Ct+d),t.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.height,s=n.width,l=n.x,u=n.y,c=s/3*2;t.moveTo(l,u),t.lineTo(l+c,u+a),t.lineTo(l,u+a/4*3),t.lineTo(l-c,u+a),t.lineTo(l,u),t.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(t,n,a,s,l){l.x1=t,l.y1=n+s/2,l.x2=t+a,l.y2=n+s/2},rect:function(t,n,a,s,l){l.x=t,l.y=n,l.width=a,l.height=s},roundRect:function(t,n,a,s,l){l.x=t,l.y=n,l.width=a,l.height=s,l.r=Math.min(a,s)/4},square:function(t,n,a,s,l){var u=Math.min(a,s);l.x=t,l.y=n,l.width=u,l.height=u},circle:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.r=Math.min(a,s)/2},diamond:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.width=a,l.height=s},pin:function(t,n,a,s,l){l.x=t+a/2,l.y=n+s/2,l.width=a,l.height=s},arrow:function(t,n,a,s,l){l.x=t+a/2,l.y=n+s/2,l.width=a,l.height=s},triangle:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.width=a,l.height=s}},symbolBuildProxies={};each$f(symbolCtors,function(t,n){symbolBuildProxies[n]=new t});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,n,a){var s=calculateTextPosition(t,n,a),l=this.shape;return l&&l.symbolType==="pin"&&n.position==="inside"&&(s.y=a.y+a.height*.4),s},buildPath:function(t,n,a){var s=n.symbolType;if(s!=="none"){var l=symbolBuildProxies[s];l||(s="rect",l=symbolBuildProxies[s]),symbolShapeMakers[s](n.x,n.y,n.width,n.height,l.shape),l.buildPath(t,l.shape,a)}}});function symbolPathSetColor(t,n){if(this.type!=="image"){var a=this.style;this.__isEmptyBrush?(a.stroke=t,a.fill=n||"#fff",a.lineWidth=2):this.shape.symbolType==="line"?a.stroke=t:a.fill=t,this.markRedraw()}}function createSymbol$1(t,n,a,s,l,u,c){var d=t.indexOf("empty")===0;d&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var Ct;return t.indexOf("image://")===0?Ct=makeImage(t.slice(8),new BoundingRect(n,a,s,l),c?"center":"cover"):t.indexOf("path://")===0?Ct=makePath(t.slice(7),{},new BoundingRect(n,a,s,l),c?"center":"cover"):Ct=new SymbolClz({shape:{symbolType:t,x:n,y:a,width:s,height:l}}),Ct.__isEmptyBrush=d,Ct.setColor=symbolPathSetColor,u&&Ct.setColor(u),Ct}function normalizeSymbolSize(t){return isArray$1(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function normalizeSymbolOffset(t,n){if(t!=null)return isArray$1(t)||(t=[t,t]),[parsePercent(t[0],n[0])||0,parsePercent(retrieve2(t[1],t[0]),n[1])||0]}function isSafeNum(t){return isFinite(t)}function createLinearGradient(t,n,a){var s=n.x==null?0:n.x,l=n.x2==null?1:n.x2,u=n.y==null?0:n.y,c=n.y2==null?0:n.y2;n.global||(s=s*a.width+a.x,l=l*a.width+a.x,u=u*a.height+a.y,c=c*a.height+a.y),s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:1,u=isSafeNum(u)?u:0,c=isSafeNum(c)?c:0;var d=t.createLinearGradient(s,u,l,c);return d}function createRadialGradient(t,n,a){var s=a.width,l=a.height,u=Math.min(s,l),c=n.x==null?.5:n.x,d=n.y==null?.5:n.y,Ct=n.r==null?.5:n.r;n.global||(c=c*s+a.x,d=d*l+a.y,Ct=Ct*u),c=isSafeNum(c)?c:.5,d=isSafeNum(d)?d:.5,Ct=Ct>=0&&isSafeNum(Ct)?Ct:.5;var ar=t.createRadialGradient(c,d,0,c,d,Ct);return ar}function getCanvasGradient(t,n,a){for(var s=n.type==="radial"?createRadialGradient(t,n,a):createLinearGradient(t,n,a),l=n.colorStops,u=0;u<l.length;u++)s.addColorStop(l[u].offset,l[u].color);return s}function isClipPathChanged(t,n){if(t===n||!t&&!n)return!1;if(!t||!n||t.length!==n.length)return!0;for(var a=0;a<t.length;a++)if(t[a]!==n[a])return!0;return!1}function parseInt10(t){return parseInt(t,10)}function getSize$1(t,n,a){var s=["width","height"][n],l=["clientWidth","clientHeight"][n],u=["paddingLeft","paddingTop"][n],c=["paddingRight","paddingBottom"][n];if(a[s]!=null&&a[s]!=="auto")return parseFloat(a[s]);var d=document.defaultView.getComputedStyle(t);return(t[l]||parseInt10(d[s])||parseInt10(t.style[s]))-(parseInt10(d[u])||0)-(parseInt10(d[c])||0)|0}function normalizeLineDash(t,n){return!t||t==="solid"||!(n>0)?null:t==="dashed"?[4*n,2*n]:t==="dotted"?[n]:isNumber(t)?[t]:isArray$1(t)?t:null}function getLineDash(t){var n=t.style,a=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),s=n.lineDashOffset;if(a){var l=n.strokeNoScale&&t.getLineScale?t.getLineScale():1;l&&l!==1&&(a=map$1(a,function(u){return u/l}),s/=l)}return[a,s]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(t){var n=t.stroke;return!(n==null||n==="none"||!(t.lineWidth>0))}function isValidStrokeFillStyle(t){return typeof t=="string"&&t!=="none"}function styleHasFill(t){var n=t.fill;return n!=null&&n!=="none"}function doFillPath(t,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=a}else t.fill()}function doStrokePath(t,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=a}else t.stroke()}function createCanvasPattern(t,n,a){var s=createOrUpdateImage(n.image,n.__image,a);if(isImageReady(s)){var l=t.createPattern(s,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var u=new DOMMatrix;u.translateSelf(n.x||0,n.y||0),u.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(n.scaleX||1,n.scaleY||1),l.setTransform(u)}return l}}function brushPath(t,n,a,s){var l,u=styleHasStroke(a),c=styleHasFill(a),d=a.strokePercent,Ct=d<1,ar=!n.path;(!n.silent||Ct)&&ar&&n.createPathProxy();var en=n.path||pathProxyForDraw,tn=n.__dirty;if(!s){var on=a.fill,cn=a.stroke,dn=c&&!!on.colorStops,Cn=u&&!!cn.colorStops,In=c&&!!on.image,ix=u&&!!cn.image,ax=void 0,ox=void 0,sx=void 0,ux=void 0,cx=void 0;(dn||Cn)&&(cx=n.getBoundingRect()),dn&&(ax=tn?getCanvasGradient(t,on,cx):n.__canvasFillGradient,n.__canvasFillGradient=ax),Cn&&(ox=tn?getCanvasGradient(t,cn,cx):n.__canvasStrokeGradient,n.__canvasStrokeGradient=ox),In&&(sx=tn||!n.__canvasFillPattern?createCanvasPattern(t,on,n):n.__canvasFillPattern,n.__canvasFillPattern=sx),ix&&(ux=tn||!n.__canvasStrokePattern?createCanvasPattern(t,cn,n):n.__canvasStrokePattern,n.__canvasStrokePattern=sx),dn?t.fillStyle=ax:In&&(sx?t.fillStyle=sx:c=!1),Cn?t.strokeStyle=ox:ix&&(ux?t.strokeStyle=ux:u=!1)}var hx=n.getGlobalScale();en.setScale(hx[0],hx[1],n.segmentIgnoreThreshold);var gx,fx;t.setLineDash&&a.lineDash&&(l=getLineDash(n),gx=l[0],fx=l[1]);var dx=!0;(ar||tn&SHAPE_CHANGED_BIT)&&(en.setDPR(t.dpr),Ct?en.setContext(null):(en.setContext(t),dx=!1),en.reset(),n.buildPath(en,n.shape,s),en.toStatic(),n.pathUpdated()),dx&&en.rebuildPath(t,Ct?d:1),gx&&(t.setLineDash(gx),t.lineDashOffset=fx),s||(a.strokeFirst?(u&&doStrokePath(t,a),c&&doFillPath(t,a)):(c&&doFillPath(t,a),u&&doStrokePath(t,a))),gx&&t.setLineDash([])}function brushImage(t,n,a){var s=n.__image=createOrUpdateImage(a.image,n.__image,n,n.onload);if(!(!s||!isImageReady(s))){var l=a.x||0,u=a.y||0,c=n.getWidth(),d=n.getHeight(),Ct=s.width/s.height;if(c==null&&d!=null?c=d*Ct:d==null&&c!=null?d=c/Ct:c==null&&d==null&&(c=s.width,d=s.height),a.sWidth&&a.sHeight){var ar=a.sx||0,en=a.sy||0;t.drawImage(s,ar,en,a.sWidth,a.sHeight,l,u,c,d)}else if(a.sx&&a.sy){var ar=a.sx,en=a.sy,tn=c-ar,on=d-en;t.drawImage(s,ar,en,tn,on,l,u,c,d)}else t.drawImage(s,l,u,c,d)}}function brushText(t,n,a){var s,l=a.text;if(l!=null&&(l+=""),l){t.font=a.font||DEFAULT_FONT,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline;var u=void 0,c=void 0;t.setLineDash&&a.lineDash&&(s=getLineDash(n),u=s[0],c=s[1]),u&&(t.setLineDash(u),t.lineDashOffset=c),a.strokeFirst?(styleHasStroke(a)&&t.strokeText(l,a.x,a.y),styleHasFill(a)&&t.fillText(l,a.x,a.y)):(styleHasFill(a)&&t.fillText(l,a.x,a.y),styleHasStroke(a)&&t.strokeText(l,a.x,a.y)),u&&t.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(t,n,a,s,l){var u=!1;if(!s&&(a=a||{},n===a))return!1;if(s||n.opacity!==a.opacity){flushPathDrawn(t,l),u=!0;var c=Math.max(Math.min(n.opacity,1),0);t.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(s||n.blend!==a.blend)&&(u||(flushPathDrawn(t,l),u=!0),t.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var d=0;d<SHADOW_NUMBER_PROPS.length;d++){var Ct=SHADOW_NUMBER_PROPS[d];(s||n[Ct]!==a[Ct])&&(u||(flushPathDrawn(t,l),u=!0),t[Ct]=t.dpr*(n[Ct]||0))}return(s||n.shadowColor!==a.shadowColor)&&(u||(flushPathDrawn(t,l),u=!0),t.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(t,n,a,s,l){var u=getStyle(n,l.inHover),c=s?null:a&&getStyle(a,l.inHover)||{};if(u===c)return!1;var d=bindCommonProps(t,u,c,s,l);if((s||u.fill!==c.fill)&&(d||(flushPathDrawn(t,l),d=!0),isValidStrokeFillStyle(u.fill)&&(t.fillStyle=u.fill)),(s||u.stroke!==c.stroke)&&(d||(flushPathDrawn(t,l),d=!0),isValidStrokeFillStyle(u.stroke)&&(t.strokeStyle=u.stroke)),(s||u.opacity!==c.opacity)&&(d||(flushPathDrawn(t,l),d=!0),t.globalAlpha=u.opacity==null?1:u.opacity),n.hasStroke()){var Ct=u.lineWidth,ar=Ct/(u.strokeNoScale&&n.getLineScale?n.getLineScale():1);t.lineWidth!==ar&&(d||(flushPathDrawn(t,l),d=!0),t.lineWidth=ar)}for(var en=0;en<STROKE_PROPS.length;en++){var tn=STROKE_PROPS[en],on=tn[0];(s||u[on]!==c[on])&&(d||(flushPathDrawn(t,l),d=!0),t[on]=u[on]||tn[1])}return d}function bindImageStyle(t,n,a,s,l){return bindCommonProps(t,getStyle(n,l.inHover),a&&getStyle(a,l.inHover),s,l)}function setContextTransform(t,n){var a=n.transform,s=t.dpr||1;a?t.setTransform(s*a[0],s*a[1],s*a[2],s*a[3],s*a[4],s*a[5]):t.setTransform(s,0,0,s,0,0)}function updateClipStatus(t,n,a){for(var s=!1,l=0;l<t.length;l++){var u=t[l];s=s||u.isZeroArea(),setContextTransform(n,u),n.beginPath(),u.buildPath(n,u.shape),n.clip()}a.allClipped=s}function isTransformChanged(t,n){return t&&n?t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||t[4]!==n[4]||t[5]!==n[5]:!(!t&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(t){var n=styleHasFill(t),a=styleHasStroke(t);return!(t.lineDash||!(+n^+a)||n&&typeof t.fill!="string"||a&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function flushPathDrawn(t,n){n.batchFill&&t.fill(),n.batchStroke&&t.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(t,n){return n&&t.__hoverStyle||t.style}function brushSingle(t,n){brush$1(t,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(t,n,a,s){var l=n.transform;if(!n.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var u=n.__clipPaths,c=a.prevElClipPaths,d=!1,Ct=!1;if((!c||isClipPathChanged(u,c))&&(c&&c.length&&(flushPathDrawn(t,a),t.restore(),Ct=d=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),u&&u.length&&(flushPathDrawn(t,a),t.save(),updateClipStatus(u,t,a),d=!0),a.prevElClipPaths=u),a.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var ar=a.prevEl;ar||(Ct=d=!0);var en=n instanceof Path&&n.autoBatch&&canPathBatch(n.style);d||isTransformChanged(l,ar.transform)?(flushPathDrawn(t,a),setContextTransform(t,n)):en||flushPathDrawn(t,a);var tn=getStyle(n,a.inHover);n instanceof Path?(a.lastDrawType!==DRAW_TYPE_PATH&&(Ct=!0,a.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(t,n,ar,Ct,a),(!en||!a.batchFill&&!a.batchStroke)&&t.beginPath(),brushPath(t,n,tn,en),en&&(a.batchFill=tn.fill||"",a.batchStroke=tn.stroke||"")):n instanceof TSpan?(a.lastDrawType!==DRAW_TYPE_TEXT&&(Ct=!0,a.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(t,n,ar,Ct,a),brushText(t,n,tn)):n instanceof ZRImage?(a.lastDrawType!==DRAW_TYPE_IMAGE&&(Ct=!0,a.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(t,n,ar,Ct,a),brushImage(t,n,tn)):n.getTemporalDisplayables&&(a.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(Ct=!0,a.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(t,n,a)),en&&s&&flushPathDrawn(t,a),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),a.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(t,n,a){var s=n.getDisplayables(),l=n.getTemporalDisplayables();t.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover},c,d;for(c=n.getCursor(),d=s.length;c<d;c++){var Ct=s[c];Ct.beforeBrush&&Ct.beforeBrush(),Ct.innerBeforeBrush(),brush$1(t,Ct,u,c===d-1),Ct.innerAfterBrush(),Ct.afterBrush&&Ct.afterBrush(),u.prevEl=Ct}for(var ar=0,en=l.length;ar<en;ar++){var Ct=l[ar];Ct.beforeBrush&&Ct.beforeBrush(),Ct.innerBeforeBrush(),brush$1(t,Ct,u,ar===en-1),Ct.innerAfterBrush(),Ct.afterBrush&&Ct.afterBrush(),u.prevEl=Ct}n.clearTemporalDisplayables(),n.notClear=!0,t.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(t,n){if(t==="none")return null;var a=n.getDevicePixelRatio(),s=n.getZr(),l=s.painter.type==="svg";t.dirty&&decalMap.delete(t);var u=decalMap.get(t);if(u)return u;var c=defaults(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var d={repeat:"repeat"};return Ct(d),d.rotation=c.rotation,d.scaleX=d.scaleY=l?1:1/a,decalMap.set(t,d),t.dirty=!1,d;function Ct(ar){for(var en=[a],tn=!0,on=0;on<decalKeys.length;++on){var cn=c[decalKeys[on]];if(cn!=null&&!isArray$1(cn)&&!isString$1(cn)&&!isNumber(cn)&&typeof cn!="boolean"){tn=!1;break}en.push(cn)}var dn;if(tn){dn=en.join(",")+(l?"-svg":"");var Cn=decalCache.get(dn);Cn&&(l?ar.svgElement=Cn:ar.image=Cn)}var In=normalizeDashArrayX(c.dashArrayX),ix=normalizeDashArrayY(c.dashArrayY),ax=normalizeSymbolArray(c.symbol),ox=getLineBlockLengthX(In),sx=getLineBlockLengthY(ix),ux=!l&&platformApi.createCanvas(),cx=l&&{tag:"g",attrs:{},key:"dcl",children:[]},hx=fx(),gx;ux&&(ux.width=hx.width*a,ux.height=hx.height*a,gx=ux.getContext("2d")),dx(),tn&&decalCache.put(dn,ux||cx),ar.image=ux,ar.svgElement=cx,ar.svgWidth=hx.width,ar.svgHeight=hx.height;function fx(){for(var mx=1,vx=0,bx=ox.length;vx<bx;++vx)mx=getLeastCommonMultiple(mx,ox[vx]);for(var xx=1,vx=0,bx=ax.length;vx<bx;++vx)xx=getLeastCommonMultiple(xx,ax[vx].length);mx*=xx;var _x=sx*ox.length*ax.length;return{width:Math.max(1,Math.min(mx,c.maxTileWidth)),height:Math.max(1,Math.min(_x,c.maxTileHeight))}}function dx(){gx&&(gx.clearRect(0,0,ux.width,ux.height),c.backgroundColor&&(gx.fillStyle=c.backgroundColor,gx.fillRect(0,0,ux.width,ux.height)));for(var mx=0,vx=0;vx<ix.length;++vx)mx+=ix[vx];if(mx<=0)return;for(var bx=-sx,xx=0,_x=0,Ex=0;bx<hx.height;){if(xx%2===0){for(var Tx=_x/2%ax.length,Cx=0,Mx=0,Ax=0;Cx<hx.width*2;){for(var Nx=0,vx=0;vx<In[Ex].length;++vx)Nx+=In[Ex][vx];if(Nx<=0)break;if(Mx%2===0){var Ux=(1-c.symbolSize)*.5,Rx=Cx+In[Ex][Mx]*Ux,Ox=bx+ix[xx]*Ux,Px=In[Ex][Mx]*c.symbolSize,$x=ix[xx]*c.symbolSize,Lx=Ax/2%ax[Tx].length;zx(Rx,Ox,Px,$x,ax[Tx][Lx])}Cx+=In[Ex][Mx],++Ax,++Mx,Mx===In[Ex].length&&(Mx=0)}++Ex,Ex===In.length&&(Ex=0)}bx+=ix[xx],++_x,++xx,xx===ix.length&&(xx=0)}function zx(qx,jx,Hx,Vx,nE){var Wx=l?1:a,tE=createSymbol$1(nE,qx*Wx,jx*Wx,Hx*Wx,Vx*Wx,c.color,c.symbolKeepAspect);if(l){var lE=s.painter.renderOneToVNode(tE);lE&&cx.children.push(lE)}else brushSingle(gx,tE)}}}}function normalizeSymbolArray(t){if(!t||t.length===0)return[["rect"]];if(isString$1(t))return[[t]];for(var n=!0,a=0;a<t.length;++a)if(!isString$1(t[a])){n=!1;break}if(n)return normalizeSymbolArray([t]);for(var s=[],a=0;a<t.length;++a)isString$1(t[a])?s.push([t[a]]):s.push(t[a]);return s}function normalizeDashArrayX(t){if(!t||t.length===0)return[[0,0]];if(isNumber(t)){var n=Math.ceil(t);return[[n,n]]}for(var a=!0,s=0;s<t.length;++s)if(!isNumber(t[s])){a=!1;break}if(a)return normalizeDashArrayX([t]);for(var l=[],s=0;s<t.length;++s)if(isNumber(t[s])){var n=Math.ceil(t[s]);l.push([n,n])}else{var n=map$1(t[s],function(d){return Math.ceil(d)});n.length%2===1?l.push(n.concat(n)):l.push(n)}return l}function normalizeDashArrayY(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(isNumber(t)){var n=Math.ceil(t);return[n,n]}var a=map$1(t,function(s){return Math.ceil(s)});return t.length%2?a.concat(a):a}function getLineBlockLengthX(t){return map$1(t,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(t){for(var n=0,a=0;a<t.length;++a)n+=t[a];return t.length%2===1?n*2:n}function decalVisual(t,n){t.eachRawSeries(function(a){if(!t.isSeriesFiltered(a)){var s=a.getData();s.hasItemVisual()&&s.each(function(c){var d=s.getItemVisual(c,"decal");if(d){var Ct=s.ensureUniqueItemVisual(c,"style");Ct.decal=createOrUpdatePatternFromDecal(d,n)}});var l=s.getVisual("decal");if(l){var u=s.getVisual("style");u.decal=createOrUpdatePatternFromDecal(l,n)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(t,n){implsStore[t]=n}function getImpl(t){return implsStore[t]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,t,n)}}function createRegisterEventWithLowercaseMessageCenter(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return toLowercaseNameAndCallEventful(this,t,n)}}function toLowercaseNameAndCallEventful(t,n,a){return a[0]=a[0]&&a[0].toLowerCase(),Eventful.prototype[n].apply(t,a)}var MessageCenter=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],l=l||{},isString$1(s)&&(s=themeStorage[s]),u._dom=a;var c="canvas",d="auto",Ct=!1;l.ssr&&registerSSRDataGetter(function(on){var cn=getECData(on),dn=cn.dataIndex;if(dn!=null){var Cn=createHashMap();return Cn.set("series_index",cn.seriesIndex),Cn.set("data_index",dn),cn.ssrType&&Cn.set("ssr_type",cn.ssrType),Cn}});var ar=u._zr=init$2(a,{renderer:l.renderer||c,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,Ct),useCoarsePointer:retrieve2(l.useCoarsePointer,d),pointerSize:l.pointerSize});u._ssr=l.ssr,u._throttledZrFlush=throttle(bind$1(ar.flush,ar),17),s=clone$4(s),s&&globalBackwardCompat(s,!0),u._theme=s,u._locale=createLocaleObject(l.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystemManager;var en=u._api=createExtensionAPI(u);function tn(on,cn){return on.__prio-cn.__prio}return sort$2(visualFuncs,tn),sort$2(dataProcessorFuncs,tn),u._scheduler=new Scheduler(u,en,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),ar.animation.on("frame",u._onframe,u),bindRenderedEvent(ar,u),bindMouseEvent(ar,u),setAsPrimitive(u),u}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var a=this._scheduler;if(this[PENDING_UPDATE]){var s=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(Ct){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,Ct}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}else if(a.unfinished){var l=TEST_FRAME_REMAIN_TIME,u=this._model,c=this._api;a.unfinished=!1;do{var d=+new Date;a.performSeriesTasks(u),a.performDataProcessorTasks(u),updateStreamModes(this,u),a.performVisualTasks(u),renderSeries(this,this._model,c,"remain",{}),l-=+new Date-d}while(l>0&&a.unfinished);a.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(a,s,l){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var u,c,d;if(isObject$3(s)&&(l=s.lazyUpdate,u=s.silent,c=s.replaceMerge,d=s.transition,s=s.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||s){var Ct=new OptionManager(this._api),ar=this._theme,en=this._model=new GlobalModel;en.scheduler=this._scheduler,en.ssr=this._ssr,en.init(null,null,null,ar,this._locale,Ct)}this._model.setOption(a,{replaceMerge:c},optionPreprocessorFuncs);var tn={seriesTransition:d,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:u,updateParams:tn},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,tn)}catch(on){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,on}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},n.prototype.setTheme=function(){},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(a){return this.renderToCanvas(a)},n.prototype.renderToCanvas=function(a){a=a||{};var s=this._zr.painter;return s.getRenderedCanvas({backgroundColor:a.backgroundColor||this._model.get("backgroundColor"),pixelRatio:a.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(a){a=a||{};var s=this._zr.painter;return s.renderToString({useViewBox:a.useViewBox})},n.prototype.getSvgDataURL=function(){if(env.svgSupported){var a=this._zr,s=a.storage.getDisplayList();return each$f(s,function(l){l.stopAnimation(null,!0)}),a.painter.toDataURL()}},n.prototype.getDataURL=function(a){if(this._disposed){this.id;return}a=a||{};var s=a.excludeComponents,l=this._model,u=[],c=this;each$f(s,function(Ct){l.eachComponent({mainType:Ct},function(ar){var en=c._componentsMap[ar.__viewId];en.group.ignore||(u.push(en),en.group.ignore=!0)})});var d=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(a).toDataURL("image/"+(a&&a.type||"png"));return each$f(u,function(Ct){Ct.group.ignore=!1}),d},n.prototype.getConnectedDataURL=function(a){if(this._disposed){this.id;return}var s=a.type==="svg",l=this.group,u=Math.min,c=Math.max,d=1/0;if(connectedGroups[l]){var Ct=d,ar=d,en=-d,tn=-d,on=[],cn=a&&a.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(ox,sx){if(ox.group===l){var ux=s?ox.getZr().painter.getSvgDom().innerHTML:ox.renderToCanvas(clone$4(a)),cx=ox.getDom().getBoundingClientRect();Ct=u(cx.left,Ct),ar=u(cx.top,ar),en=c(cx.right,en),tn=c(cx.bottom,tn),on.push({dom:ux,left:cx.left,top:cx.top})}}),Ct*=cn,ar*=cn,en*=cn,tn*=cn;var dn=en-Ct,Cn=tn-ar,In=platformApi.createCanvas(),ix=init$2(In,{renderer:s?"svg":"canvas"});if(ix.resize({width:dn,height:Cn}),s){var ax="";return each$f(on,function(ox){var sx=ox.left-Ct,ux=ox.top-ar;ax+='<g transform="translate('+sx+","+ux+')">'+ox.dom+"</g>"}),ix.painter.getSvgRoot().innerHTML=ax,a.connectedBackgroundColor&&ix.painter.setBackgroundColor(a.connectedBackgroundColor),ix.refreshImmediately(),ix.painter.toDataURL()}else return a.connectedBackgroundColor&&ix.add(new Rect$2({shape:{x:0,y:0,width:dn,height:Cn},style:{fill:a.connectedBackgroundColor}})),each$f(on,function(ox){var sx=new ZRImage({style:{x:ox.left*cn-Ct,y:ox.top*cn-ar,image:ox.dom}});ix.add(sx)}),ix.refreshImmediately(),In.toDataURL("image/"+(a&&a.type||"png"))}else return this.getDataURL(a)},n.prototype.convertToPixel=function(a,s){return doConvertPixel(this,"convertToPixel",a,s)},n.prototype.convertFromPixel=function(a,s){return doConvertPixel(this,"convertFromPixel",a,s)},n.prototype.containPixel=function(a,s){if(this._disposed){this.id;return}var l=this._model,u,c=parseFinder$1(l,a);return each$f(c,function(d,Ct){Ct.indexOf("Models")>=0&&each$f(d,function(ar){var en=ar.coordinateSystem;if(en&&en.containPoint)u=u||!!en.containPoint(s);else if(Ct==="seriesModels"){var tn=this._chartsMap[ar.__viewId];tn&&tn.containPoint&&(u=u||tn.containPoint(s,ar))}},this)},this),!!u},n.prototype.getVisual=function(a,s){var l=this._model,u=parseFinder$1(l,a,{defaultMainType:"series"}),c=u.seriesModel,d=c.getData(),Ct=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?d.indexOfRawIndex(u.dataIndex):null;return Ct!=null?getItemVisualFromData(d,Ct,s):getVisualFromData(d,s)},n.prototype.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},n.prototype.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},n.prototype._initEvents=function(){var a=this;each$f(MOUSE_EVENT_NAMES,function(s){var l=function(u){var c=a.getModel(),d=u.target,Ct,ar=s==="globalout";if(ar?Ct={}:d&&findEventDispatcher(d,function(dn){var Cn=getECData(dn);if(Cn&&Cn.dataIndex!=null){var In=Cn.dataModel||c.getSeriesByIndex(Cn.seriesIndex);return Ct=In&&In.getDataParams(Cn.dataIndex,Cn.dataType,d)||{},!0}else if(Cn.eventData)return Ct=extend({},Cn.eventData),!0},!0),Ct){var en=Ct.componentType,tn=Ct.componentIndex;(en==="markLine"||en==="markPoint"||en==="markArea")&&(en="series",tn=Ct.seriesIndex);var on=en&&tn!=null&&c.getComponent(en,tn),cn=on&&a[on.mainType==="series"?"_chartsMap":"_componentsMap"][on.__viewId];Ct.event=u,Ct.type=s,a._$eventProcessor.eventInfo={targetEl:d,packedEvent:Ct,model:on,view:cn},a.trigger(s,Ct)}};l.zrEventfulCallAtLast=!0,a._zr.on(s,l,a)}),each$f(eventActionMap,function(s,l){a._messageCenter.on(l,function(u){this.trigger(l,u)},a)}),each$f(["selectchanged"],function(s){a._messageCenter.on(s,function(l){this.trigger(s,l)},a)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var a=this.getDom();a&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var s=this,l=s._api,u=s._model;each$f(s._componentsViews,function(c){c.dispose(u,l)}),each$f(s._chartsViews,function(c){c.dispose(u,l)}),s._zr.dispose(),s._dom=s._model=s._chartsMap=s._componentsMap=s._chartsViews=s._componentsViews=s._scheduler=s._api=s._zr=s._throttledZrFlush=s._theme=s._coordSysMgr=s._messageCenter=null,delete instances[s.id]},n.prototype.resize=function(a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(a);var s=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!s){var l=s.resetOption("media"),u=a&&a.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},a&&a.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},n.prototype.showLoading=function(a,s){if(this._disposed){this.id;return}if(isObject$3(a)&&(s=a,a=""),a=a||"default",this.hideLoading(),!!loadingEffects[a]){var l=loadingEffects[a](this._api,s),u=this._zr;this._loadingFX=l,u.add(l)}},n.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(a){var s=extend({},a);return s.type=eventActionMap[a.type],s},n.prototype.dispatchAction=function(a,s){if(this._disposed){this.id;return}if(isObject$3(s)||(s={silent:!!s}),!!actions[a.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(a);return}var l=s.silent;doDispatchAction.call(this,a,l);var u=s.flush;u?this._zr.flush():u!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},n.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(a){if(this._disposed){this.id;return}var s=a.seriesIndex,l=this.getModel(),u=l.getSeriesByIndex(s);u.appendData(a),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=(function(){prepare=function(tn){var on=tn._scheduler;on.restorePipelines(tn._model),on.prepareStageTasks(),prepareView(tn,!0),prepareView(tn,!1),on.plan()},prepareView=function(tn,on){for(var cn=tn._model,dn=tn._scheduler,Cn=on?tn._componentsViews:tn._chartsViews,In=on?tn._componentsMap:tn._chartsMap,ix=tn._zr,ax=tn._api,ox=0;ox<Cn.length;ox++)Cn[ox].__alive=!1;on?cn.eachComponent(function(cx,hx){cx!=="series"&&sx(hx)}):cn.eachSeries(sx);function sx(cx){var hx=cx.__requireNewView;cx.__requireNewView=!1;var gx="_ec_"+cx.id+"_"+cx.type,fx=!hx&&In[gx];if(!fx){var dx=parseClassType(cx.type),mx=on?ComponentView.getClass(dx.main,dx.sub):ChartView.getClass(dx.sub);fx=new mx,fx.init(cn,ax),In[gx]=fx,Cn.push(fx),ix.add(fx.group)}cx.__viewId=fx.__id=gx,fx.__alive=!0,fx.__model=cx,fx.group.__ecComponentInfo={mainType:cx.mainType,index:cx.componentIndex},!on&&dn.prepareView(fx,cx,cn,ax)}for(var ox=0;ox<Cn.length;){var ux=Cn[ox];ux.__alive?ox++:(!on&&ux.renderTask.dispose(),ix.remove(ux.group),ux.dispose(cn,ax),Cn.splice(ox,1),In[ux.__id]===ux&&delete In[ux.__id],ux.__id=ux.group.__ecComponentInfo=null)}},updateDirectly=function(tn,on,cn,dn,Cn){var In=tn._model;if(In.setUpdatePayload(cn),!dn){each$f([].concat(tn._componentsViews).concat(tn._chartsViews),ux);return}var ix={};ix[dn+"Id"]=cn[dn+"Id"],ix[dn+"Index"]=cn[dn+"Index"],ix[dn+"Name"]=cn[dn+"Name"];var ax={mainType:dn,query:ix};Cn&&(ax.subType=Cn);var ox=cn.excludeSeriesId,sx;ox!=null&&(sx=createHashMap(),each$f(normalizeToArray(ox),function(cx){var hx=convertOptionIdName(cx,null);hx!=null&&sx.set(hx,!0)})),In&&In.eachComponent(ax,function(cx){var hx=sx&&sx.get(cx.id)!=null;if(!hx)if(isHighDownPayload(cn))if(cx instanceof SeriesModel)cn.type===HIGHLIGHT_ACTION_TYPE&&!cn.notBlur&&!cx.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(cx,cn,tn._api);else{var gx=findComponentHighDownDispatchers(cx.mainType,cx.componentIndex,cn.name,tn._api),fx=gx.focusSelf,dx=gx.dispatchers;cn.type===HIGHLIGHT_ACTION_TYPE&&fx&&!cn.notBlur&&blurComponent(cx.mainType,cx.componentIndex,tn._api),dx&&each$f(dx,function(mx){cn.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(mx):leaveEmphasis(mx)})}else isSelectChangePayload(cn)&&cx instanceof SeriesModel&&(toggleSelectionFromPayload(cx,cn,tn._api),updateSeriesElementSelection(cx),markStatusToUpdate(tn))},tn),In&&In.eachComponent(ax,function(cx){var hx=sx&&sx.get(cx.id)!=null;hx||ux(tn[dn==="series"?"_chartsMap":"_componentsMap"][cx.__viewId])},tn);function ux(cx){cx&&cx.__alive&&cx[on]&&cx[on](cx.__model,In,tn._api,cn)}},updateMethods={prepareAndUpdate:function(tn){prepare(this),updateMethods.update.call(this,tn,{optionChanged:tn.newOption!=null})},update:function(tn,on){var cn=this._model,dn=this._api,Cn=this._zr,In=this._coordSysMgr,ix=this._scheduler;if(cn){cn.setUpdatePayload(tn),ix.restoreData(cn,tn),ix.performSeriesTasks(cn),In.create(cn,dn),ix.performDataProcessorTasks(cn,tn),updateStreamModes(this,cn),In.update(cn,dn),a(cn),ix.performVisualTasks(cn,tn),render(this,cn,dn,tn,on);var ax=cn.get("backgroundColor")||"transparent",ox=cn.get("darkMode");Cn.setBackgroundColor(ax),ox!=null&&ox!=="auto"&&Cn.setDarkMode(ox),lifecycle.trigger("afterupdate",cn,dn)}},updateTransform:function(tn){var on=this,cn=this._model,dn=this._api;if(cn){cn.setUpdatePayload(tn);var Cn=[];cn.eachComponent(function(ix,ax){if(ix!=="series"){var ox=on.getViewOfComponentModel(ax);if(ox&&ox.__alive)if(ox.updateTransform){var sx=ox.updateTransform(ax,cn,dn,tn);sx&&sx.update&&Cn.push(ox)}else Cn.push(ox)}});var In=createHashMap();cn.eachSeries(function(ix){var ax=on._chartsMap[ix.__viewId];if(ax.updateTransform){var ox=ax.updateTransform(ix,cn,dn,tn);ox&&ox.update&&In.set(ix.uid,1)}else In.set(ix.uid,1)}),a(cn),this._scheduler.performVisualTasks(cn,tn,{setDirty:!0,dirtyMap:In}),renderSeries(this,cn,dn,tn,{},In),lifecycle.trigger("afterupdate",cn,dn)}},updateView:function(tn){var on=this._model;on&&(on.setUpdatePayload(tn),ChartView.markUpdateMethod(tn,"updateView"),a(on),this._scheduler.performVisualTasks(on,tn,{setDirty:!0}),render(this,on,this._api,tn,{}),lifecycle.trigger("afterupdate",on,this._api))},updateVisual:function(tn){var on=this,cn=this._model;cn&&(cn.setUpdatePayload(tn),cn.eachSeries(function(dn){dn.getData().clearAllVisual()}),ChartView.markUpdateMethod(tn,"updateVisual"),a(cn),this._scheduler.performVisualTasks(cn,tn,{visualType:"visual",setDirty:!0}),cn.eachComponent(function(dn,Cn){if(dn!=="series"){var In=on.getViewOfComponentModel(Cn);In&&In.__alive&&In.updateVisual(Cn,cn,on._api,tn)}}),cn.eachSeries(function(dn){var Cn=on._chartsMap[dn.__viewId];Cn.updateVisual(dn,cn,on._api,tn)}),lifecycle.trigger("afterupdate",cn,this._api))},updateLayout:function(tn){updateMethods.update.call(this,tn)}},doConvertPixel=function(tn,on,cn,dn){if(tn._disposed){tn.id;return}for(var Cn=tn._model,In=tn._coordSysMgr.getCoordinateSystems(),ix,ax=parseFinder$1(Cn,cn),ox=0;ox<In.length;ox++){var sx=In[ox];if(sx[on]&&(ix=sx[on](Cn,ax,dn))!=null)return ix}},updateStreamModes=function(tn,on){var cn=tn._chartsMap,dn=tn._scheduler;on.eachSeries(function(Cn){dn.updateStreamModes(Cn,cn[Cn.__viewId])})},doDispatchAction=function(tn,on){var cn=this,dn=this.getModel(),Cn=tn.type,In=tn.escapeConnect,ix=actions[Cn],ax=ix.actionInfo,ox=(ax.update||"update").split(":"),sx=ox.pop(),ux=ox[0]!=null&&parseClassType(ox[0]);this[IN_MAIN_PROCESS_KEY]=!0;var cx=[tn],hx=!1;tn.batch&&(hx=!0,cx=map$1(tn.batch,function(xx){return xx=defaults(extend({},xx),tn),xx.batch=null,xx}));var gx=[],fx,dx=isSelectChangePayload(tn),mx=isHighDownPayload(tn);if(mx&&allLeaveBlur(this._api),each$f(cx,function(xx){if(fx=ix.action(xx,cn._model,cn._api),fx=fx||extend({},xx),fx.type=ax.event||fx.type,gx.push(fx),mx){var _x=preParseFinder(tn),Ex=_x.queryOptionMap,Tx=_x.mainTypeSpecified,Cx=Tx?Ex.keys()[0]:"series";updateDirectly(cn,sx,xx,Cx),markStatusToUpdate(cn)}else dx?(updateDirectly(cn,sx,xx,"series"),markStatusToUpdate(cn)):ux&&updateDirectly(cn,sx,xx,ux.main,ux.sub)}),sx!=="none"&&!mx&&!dx&&!ux)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,tn),this[PENDING_UPDATE]=null):updateMethods[sx].call(this,tn)}catch(xx){throw this[IN_MAIN_PROCESS_KEY]=!1,xx}if(hx?fx={type:ax.event||Cn,escapeConnect:In,batch:gx}:fx=gx[0],this[IN_MAIN_PROCESS_KEY]=!1,!on){var vx=this._messageCenter;if(vx.trigger(fx.type,fx),dx){var bx={type:"selectchanged",escapeConnect:In,selected:getAllSelectedIndices(dn),isFromClick:tn.isFromClick||!1,fromAction:tn.type,fromActionPayload:tn};vx.trigger(bx.type,bx)}}},flushPendingActions=function(tn){for(var on=this._pendingActions;on.length;){var cn=on.shift();doDispatchAction.call(this,cn,tn)}},triggerUpdatedEvent=function(tn){!tn&&this.trigger("updated")},bindRenderedEvent=function(tn,on){tn.on("rendered",function(cn){on.trigger("rendered",cn),tn.animation.isFinished()&&!on[PENDING_UPDATE]&&!on._scheduler.unfinished&&!on._pendingActions.length&&on.trigger("finished")})},bindMouseEvent=function(tn,on){tn.on("mouseover",function(cn){var dn=cn.target,Cn=findEventDispatcher(dn,isHighDownDispatcher);Cn&&(handleGlobalMouseOverForHighDown(Cn,cn,on._api),markStatusToUpdate(on))}).on("mouseout",function(cn){var dn=cn.target,Cn=findEventDispatcher(dn,isHighDownDispatcher);Cn&&(handleGlobalMouseOutForHighDown(Cn,cn,on._api),markStatusToUpdate(on))}).on("click",function(cn){var dn=cn.target,Cn=findEventDispatcher(dn,function(ax){return getECData(ax).dataIndex!=null},!0);if(Cn){var In=Cn.selected?"unselect":"select",ix=getECData(Cn);on._api.dispatchAction({type:In,dataType:ix.dataType,dataIndexInside:ix.dataIndex,seriesIndex:ix.seriesIndex,isFromClick:!0})}})};function a(tn){tn.clearColorPalette(),tn.eachSeries(function(on){on.clearColorPalette()})}function s(tn){var on=[],cn=[],dn=!1;if(tn.eachComponent(function(ax,ox){var sx=ox.get("zlevel")||0,ux=ox.get("z")||0,cx=ox.getZLevelKey();dn=dn||!!cx,(ax==="series"?cn:on).push({zlevel:sx,z:ux,idx:ox.componentIndex,type:ax,key:cx})}),dn){var Cn=on.concat(cn),In,ix;sort$2(Cn,function(ax,ox){return ax.zlevel===ox.zlevel?ax.z-ox.z:ax.zlevel-ox.zlevel}),each$f(Cn,function(ax){var ox=tn.getComponent(ax.type,ax.idx),sx=ax.zlevel,ux=ax.key;In!=null&&(sx=Math.max(In,sx)),ux?(sx===In&&ux!==ix&&sx++,ix=ux):ix&&(sx===In&&sx++,ix=""),In=sx,ox.setZLevel(sx)})}}render=function(tn,on,cn,dn,Cn){s(on),renderComponents(tn,on,cn,dn,Cn),each$f(tn._chartsViews,function(In){In.__alive=!1}),renderSeries(tn,on,cn,dn,Cn),each$f(tn._chartsViews,function(In){In.__alive||In.remove(on,cn)})},renderComponents=function(tn,on,cn,dn,Cn,In){each$f(In||tn._componentsViews,function(ix){var ax=ix.__model;ar(ax,ix),ix.render(ax,on,cn,dn),d(ax,ix),en(ax,ix)})},renderSeries=function(tn,on,cn,dn,Cn,In){var ix=tn._scheduler;Cn=extend(Cn||{},{updatedSeries:on.getSeries()}),lifecycle.trigger("series:beforeupdate",on,cn,Cn);var ax=!1;on.eachSeries(function(ox){var sx=tn._chartsMap[ox.__viewId];sx.__alive=!0;var ux=sx.renderTask;ix.updatePayload(ux,dn),ar(ox,sx),In&&In.get(ox.uid)&&ux.dirty(),ux.perform(ix.getPerformArgs(ux))&&(ax=!0),sx.group.silent=!!ox.get("silent"),c(ox,sx),updateSeriesElementSelection(ox)}),ix.unfinished=ax||ix.unfinished,lifecycle.trigger("series:layoutlabels",on,cn,Cn),lifecycle.trigger("series:transition",on,cn,Cn),on.eachSeries(function(ox){var sx=tn._chartsMap[ox.__viewId];d(ox,sx),en(ox,sx)}),u(tn,on),lifecycle.trigger("series:afterupdate",on,cn,Cn)},markStatusToUpdate=function(tn){tn[STATUS_NEEDS_UPDATE_KEY]=!0,tn.getZr().wakeUp()},applyChangedStates=function(tn){tn[STATUS_NEEDS_UPDATE_KEY]&&(tn.getZr().storage.traverse(function(on){isElementRemoved(on)||l(on)}),tn[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(tn){for(var on=[],cn=tn.currentStates,dn=0;dn<cn.length;dn++){var Cn=cn[dn];Cn==="emphasis"||Cn==="blur"||Cn==="select"||on.push(Cn)}tn.selected&&tn.states.select&&on.push("select"),tn.hoverState===HOVER_STATE_EMPHASIS&&tn.states.emphasis?on.push("emphasis"):tn.hoverState===HOVER_STATE_BLUR&&tn.states.blur&&on.push("blur"),tn.useStates(on)}function u(tn,on){var cn=tn._zr,dn=cn.storage,Cn=0;dn.traverse(function(In){In.isGroup||Cn++}),Cn>on.get("hoverLayerThreshold")&&!env.node&&!env.worker&&on.eachSeries(function(In){if(!In.preventUsingHoverLayer){var ix=tn._chartsMap[In.__viewId];ix.__alive&&ix.eachRendered(function(ax){ax.states.emphasis&&(ax.states.emphasis.hoverLayer=!0)})}})}function c(tn,on){var cn=tn.get("blendMode")||null;on.eachRendered(function(dn){dn.isGroup||(dn.style.blend=cn)})}function d(tn,on){if(!tn.preventAutoZ){var cn=tn.get("z")||0,dn=tn.get("zlevel")||0;on.eachRendered(function(Cn){return Ct(Cn,cn,dn,-1/0),!0})}}function Ct(tn,on,cn,dn){var Cn=tn.getTextContent(),In=tn.getTextGuideLine(),ix=tn.isGroup;if(ix)for(var ax=tn.childrenRef(),ox=0;ox<ax.length;ox++)dn=Math.max(Ct(ax[ox],on,cn,dn),dn);else tn.z=on,tn.zlevel=cn,dn=Math.max(tn.z2,dn);if(Cn&&(Cn.z=on,Cn.zlevel=cn,isFinite(dn)&&(Cn.z2=dn+2)),In){var sx=tn.textGuideLineConfig;In.z=on,In.zlevel=cn,isFinite(dn)&&(In.z2=dn+(sx&&sx.showAbove?1:-1))}return dn}function ar(tn,on){on.eachRendered(function(cn){if(!isElementRemoved(cn)){var dn=cn.getTextContent(),Cn=cn.getTextGuideLine();cn.stateTransition&&(cn.stateTransition=null),dn&&dn.stateTransition&&(dn.stateTransition=null),Cn&&Cn.stateTransition&&(Cn.stateTransition=null),cn.hasState()?(cn.prevStates=cn.currentStates,cn.clearStates()):cn.prevStates&&(cn.prevStates=null)}})}function en(tn,on){var cn=tn.getModel("stateAnimation"),dn=tn.isAnimationEnabled(),Cn=cn.get("duration"),In=Cn>0?{duration:Cn,delay:cn.get("delay"),easing:cn.get("easing")}:null;on.eachRendered(function(ix){if(ix.states&&ix.states.emphasis){if(isElementRemoved(ix))return;if(ix instanceof Path&&savePathStates(ix),ix.__dirty){var ax=ix.prevStates;ax&&ix.useStates(ax)}if(dn){ix.stateTransition=In;var ox=ix.getTextContent(),sx=ix.getTextGuideLine();ox&&(ox.stateTransition=In),sx&&(sx.stateTransition=In)}ix.__dirty&&l(ix)}})}createExtensionAPI=function(tn){return new((function(on){__extends(cn,on);function cn(){return on!==null&&on.apply(this,arguments)||this}return cn.prototype.getCoordinateSystems=function(){return tn._coordSysMgr.getCoordinateSystems()},cn.prototype.getComponentByElement=function(dn){for(;dn;){var Cn=dn.__ecComponentInfo;if(Cn!=null)return tn._model.getComponent(Cn.mainType,Cn.index);dn=dn.parent}},cn.prototype.enterEmphasis=function(dn,Cn){enterEmphasis(dn,Cn),markStatusToUpdate(tn)},cn.prototype.leaveEmphasis=function(dn,Cn){leaveEmphasis(dn,Cn),markStatusToUpdate(tn)},cn.prototype.enterBlur=function(dn){enterBlur(dn),markStatusToUpdate(tn)},cn.prototype.leaveBlur=function(dn){leaveBlur(dn),markStatusToUpdate(tn)},cn.prototype.enterSelect=function(dn){enterSelect(dn),markStatusToUpdate(tn)},cn.prototype.leaveSelect=function(dn){leaveSelect(dn),markStatusToUpdate(tn)},cn.prototype.getModel=function(){return tn.getModel()},cn.prototype.getViewOfComponentModel=function(dn){return tn.getViewOfComponentModel(dn)},cn.prototype.getViewOfSeriesModel=function(dn){return tn.getViewOfSeriesModel(dn)},cn})(ExtensionAPI))(tn)},enableConnect=function(tn){function on(cn,dn){for(var Cn=0;Cn<cn.length;Cn++){var In=cn[Cn];In[CONNECT_STATUS_KEY]=dn}}each$f(eventActionMap,function(cn,dn){tn._messageCenter.on(dn,function(Cn){if(connectedGroups[tn.group]&&tn[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(Cn&&Cn.escapeConnect)return;var In=tn.makeActionFromEvent(Cn),ix=[];each$f(instances,function(ax){ax!==tn&&ax.group===tn.group&&ix.push(ax)}),on(ix,CONNECT_STATUS_PENDING),each$f(ix,function(ax){ax[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&ax.dispatchAction(In)}),on(ix,CONNECT_STATUS_UPDATED)}})})}})(),n})(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(t,n,a){var s=this;function l(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];n&&n.apply&&n.apply(this,u),s.off(t,l)}this.on.call(this,t,l,a)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(t){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(t,n,a){var s=!(a&&a.ssr);if(s){var l=getInstanceByDom(t);if(l)return l}var u=new ECharts(t,n,a);return u.id="ec_"+idBase++,instances[u.id]=u,s&&setAttribute(t,DOM_ATTRIBUTE_KEY,u.id),enableConnect(u),lifecycle.trigger("afterinit",u),u}function connect(t){if(isArray$1(t)){var n=t;t=null,each$f(n,function(a){a.group!=null&&(t=a.group)}),t=t||"g_"+groupIdBase++,each$f(n,function(a){a.group=t})}return connectedGroups[t]=!0,t}function disconnect(t){connectedGroups[t]=!1}var disConnect=disconnect;function dispose(t){isString$1(t)?t=instances[t]:t instanceof ECharts||(t=getInstanceByDom(t)),t instanceof ECharts&&!t.isDisposed()&&t.dispose()}function getInstanceByDom(t){return instances[getAttribute(t,DOM_ATTRIBUTE_KEY)]}function getInstanceById(t){return instances[t]}function registerTheme(t,n){themeStorage[t]=n}function registerPreprocessor(t){indexOf(optionPreprocessorFuncs,t)<0&&optionPreprocessorFuncs.push(t)}function registerProcessor(t,n){normalizeRegister(dataProcessorFuncs,t,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(t){registerUpdateLifecycle("afterinit",t)}function registerPostUpdate(t){registerUpdateLifecycle("afterupdate",t)}function registerUpdateLifecycle(t,n){lifecycle.on(t,n)}function registerAction(t,n,a){isFunction$1(n)&&(a=n,n="");var s=isObject$3(t)?t.type:[t,t={event:n}][0];t.event=(t.event||s).toLowerCase(),n=t.event,!eventActionMap[n]&&(assert(ACTION_REG.test(s)&&ACTION_REG.test(n)),actions[s]||(actions[s]={action:a,actionInfo:t}),eventActionMap[n]=s)}function registerCoordinateSystem(t,n){CoordinateSystemManager.register(t,n)}function getCoordinateSystemDimensions(t){var n=CoordinateSystemManager.get(t);if(n)return n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice()}function registerLayout(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(t,n,a,s,l){if((isFunction$1(n)||isObject$3(n))&&(a=n,n=s),!(indexOf(registeredTasks,a)>=0)){registeredTasks.push(a);var u=Scheduler.wrapStageHandler(a,l);u.__prio=n,u.__raw=a,t.push(u)}}function registerLoading(t,n){loadingEffects[t]=n}function setCanvasCreator(t){setPlatformAPI({createCanvas:t})}function registerMap$1(t,n,a){var s=getImpl("registerMap");s&&s(t,n,a)}function getMap(t){var n=getImpl("getMap");return n&&n(t)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(t){ComponentModel.registerClass(t)},registerComponentView:function(t){ComponentView.registerClass(t)},registerSeriesModel:function(t){SeriesModel.registerClass(t)},registerChartView:function(t){ChartView.registerClass(t)},registerSubTypeDefaulter:function(t,n){ComponentModel.registerSubTypeDefaulter(t,n)},registerPainter:function(t,n){registerPainter(t,n)}};function use(t){if(isArray$1(t)){each$f(t,function(n){use(n)});return}indexOf(extensions,t)>=0||(extensions.push(t),isFunction$1(t)&&(t={install:t}),t.install(extensionRegisters))}function dataIndexMapValueLength(t){return t==null?0:t.length||1}function defaultKeyGetter(t){return t}var DataDiffer=(function(){function t(n,a,s,l,u,c){this._old=n,this._new=a,this._oldKeyGetter=s||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=u,this._diffModeMultiple=c==="multiple"}return t.prototype.add=function(n){return this._add=n,this},t.prototype.update=function(n){return this._update=n,this},t.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},t.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},t.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},t.prototype.remove=function(n){return this._remove=n,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var n=this._old,a=this._new,s={},l=new Array(n.length),u=new Array(a.length);this._initIndexMap(n,null,l,"_oldKeyGetter"),this._initIndexMap(a,s,u,"_newKeyGetter");for(var c=0;c<n.length;c++){var d=l[c],Ct=s[d],ar=dataIndexMapValueLength(Ct);if(ar>1){var en=Ct.shift();Ct.length===1&&(s[d]=Ct[0]),this._update&&this._update(en,c)}else ar===1?(s[d]=null,this._update&&this._update(Ct,c)):this._remove&&this._remove(c)}this._performRestAdd(u,s)},t.prototype._executeMultiple=function(){var n=this._old,a=this._new,s={},l={},u=[],c=[];this._initIndexMap(n,s,u,"_oldKeyGetter"),this._initIndexMap(a,l,c,"_newKeyGetter");for(var d=0;d<u.length;d++){var Ct=u[d],ar=s[Ct],en=l[Ct],tn=dataIndexMapValueLength(ar),on=dataIndexMapValueLength(en);if(tn>1&&on===1)this._updateManyToOne&&this._updateManyToOne(en,ar),l[Ct]=null;else if(tn===1&&on>1)this._updateOneToMany&&this._updateOneToMany(en,ar),l[Ct]=null;else if(tn===1&&on===1)this._update&&this._update(en,ar),l[Ct]=null;else if(tn>1&&on>1)this._updateManyToMany&&this._updateManyToMany(en,ar),l[Ct]=null;else if(tn>1)for(var cn=0;cn<tn;cn++)this._remove&&this._remove(ar[cn]);else this._remove&&this._remove(ar)}this._performRestAdd(c,l)},t.prototype._performRestAdd=function(n,a){for(var s=0;s<n.length;s++){var l=n[s],u=a[l],c=dataIndexMapValueLength(u);if(c>1)for(var d=0;d<c;d++)this._add&&this._add(u[d]);else c===1&&this._add&&this._add(u);a[l]=null}},t.prototype._initIndexMap=function(n,a,s,l){for(var u=this._diffModeMultiple,c=0;c<n.length;c++){var d="_ec_"+this[l](n[c],c);if(u||(s[c]=d),!!a){var Ct=a[d],ar=dataIndexMapValueLength(Ct);ar===0?(a[d]=c,u&&s.push(d)):ar===1?a[d]=[Ct,c]:Ct.push(c)}}},t})(),DimensionUserOuput=(function(){function t(n,a){this._encode=n,this._schema=a}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t})();function summarizeDimensions(t,n){var a={},s=a.encode={},l=createHashMap(),u=[],c=[],d={};each$f(t.dimensions,function(on){var cn=t.getDimensionInfo(on),dn=cn.coordDim;if(dn){var Cn=cn.coordDimIndex;getOrCreateEncodeArr(s,dn)[Cn]=on,cn.isExtraCoord||(l.set(dn,1),mayLabelDimType(cn.type)&&(u[0]=on),getOrCreateEncodeArr(d,dn)[Cn]=t.getDimensionIndex(cn.name)),cn.defaultTooltip&&c.push(on)}VISUAL_DIMENSIONS.each(function(In,ix){var ax=getOrCreateEncodeArr(s,ix),ox=cn.otherDims[ix];ox!=null&&ox!==!1&&(ax[ox]=cn.name)})});var Ct=[],ar={};l.each(function(on,cn){var dn=s[cn];ar[cn]=dn[0],Ct=Ct.concat(dn)}),a.dataDimsOnCoord=Ct,a.dataDimIndicesOnCoord=map$1(Ct,function(on){return t.getDimensionInfo(on).storeDimIndex}),a.encodeFirstDimNotExtra=ar;var en=s.label;en&&en.length&&(u=en.slice());var tn=s.tooltip;return tn&&tn.length?c=tn.slice():c.length||(c=u.slice()),s.defaultedLabel=u,s.defaultedTooltip=c,a.userOutput=new DimensionUserOuput(d,n),a}function getOrCreateEncodeArr(t,n){return t.hasOwnProperty(n)||(t[n]=[]),t[n]}function getDimensionTypeByAxis(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function mayLabelDimType(t){return!(t==="ordinal"||t==="time")}var SeriesDimensionDefine=(function(){function t(n){this.otherDims={},n!=null&&extend(this,n)}return t})(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=(function(){function t(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},t.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},t.prototype.getSourceDimension=function(n){var a=this.source.dimensionsDefine;if(a)return a[n]},t.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,a=shouldRetrieveDataByName(this.source),s=!shouldOmitUnusedDimensions(n),l="",u=[],c=0,d=0;c<n;c++){var Ct=void 0,ar=void 0,en=void 0,tn=this.dimensions[d];if(tn&&tn.storeDimIndex===c)Ct=a?tn.name:null,ar=tn.type,en=tn.ordinalMeta,d++;else{var on=this.getSourceDimension(c);on&&(Ct=a?on.name:null,ar=on.type)}u.push({property:Ct,type:ar,ordinalMeta:en}),a&&Ct!=null&&(!tn||!tn.isCalculationCoord)&&(l+=s?Ct.replace(/\`/g,"`1").replace(/\$/g,"`2"):Ct),l+="$",l+=dimTypeShort[ar]||"f",en&&(l+=en.uid),l+="$"}var cn=this.source,dn=[cn.seriesLayoutBy,cn.startIndex,l].join("$$");return{dimensions:u,hash:dn}},t.prototype.makeOutputDimensionNames=function(){for(var n=[],a=0,s=0;a<this._fullDimCount;a++){var l=void 0,u=this.dimensions[s];if(u&&u.storeDimIndex===a)u.isCalculationCoord||(l=u.name),s++;else{var c=this.getSourceDimension(a);c&&(l=c.name)}n.push(l)}return n},t.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t})();function isSeriesDataSchema(t){return t instanceof SeriesDataSchema}function createDimNameMap(t){for(var n=createHashMap(),a=0;a<(t||[]).length;a++){var s=t[a],l=isObject$3(s)?s.name:s;l!=null&&n.get(l)==null&&n.set(l,a)}return n}function ensureSourceDimNameMap(t){var n=inner$h(t);return n.dimNameMap||(n.dimNameMap=createDimNameMap(t.dimensionsDefine))}function shouldOmitUnusedDimensions(t){return t>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=(function(){function t(n,a){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var s,l=!1;isSeriesDataSchema(n)?(s=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(l=!0,s=n),s=s||["x","y"];for(var u={},c=[],d={},Ct=!1,ar={},en=0;en<s.length;en++){var tn=s[en],on=isString$1(tn)?new SeriesDimensionDefine({name:tn}):tn instanceof SeriesDimensionDefine?tn:new SeriesDimensionDefine(tn),cn=on.name;on.type=on.type||"float",on.coordDim||(on.coordDim=cn,on.coordDimIndex=0);var dn=on.otherDims=on.otherDims||{};c.push(cn),u[cn]=on,ar[cn]!=null&&(Ct=!0),on.createInvertedIndices&&(d[cn]=[]),dn.itemName===0&&(this._nameDimIdx=en),dn.itemId===0&&(this._idDimIdx=en),l&&(on.storeDimIndex=en)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(Ct),this.hostModel=a,this._invertedIndicesMap=d,this._dimOmitted){var Cn=this._dimIdxToName=createHashMap();each$f(c,function(In){Cn.set(u[In].storeDimIndex,In)})}}return t.prototype.getDimension=function(n){var a=this._recognizeDimIndex(n);if(a==null)return n;if(a=n,!this._dimOmitted)return this.dimensions[a];var s=this._dimIdxToName.get(a);if(s!=null)return s;var l=this._schema.getSourceDimension(a);if(l)return l.name},t.prototype.getDimensionIndex=function(n){var a=this._recognizeDimIndex(n);if(a!=null)return a;if(n==null)return-1;var s=this._getDimInfo(n);return s?s.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},t.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},t.prototype._getStoreDimIndex=function(n){var a=this.getDimensionIndex(n);return a},t.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},t.prototype._initGetDimensionInfo=function(n){var a=this._dimInfos;this._getDimInfo=n?function(s){return a.hasOwnProperty(s)?a[s]:void 0}:function(s){return a[s]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(n,a){var s=this._dimSummary;if(a==null)return s.encodeFirstDimNotExtra[n];var l=s.encode[n];return l?l[a]:null},t.prototype.mapDimensionsAll=function(n){var a=this._dimSummary,s=a.encode[n];return(s||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(n,a,s){var l=this,u;if(n instanceof DataStore&&(u=n),!u){var c=this.dimensions,d=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,c.length):n;u=new DataStore;var Ct=map(c,function(ar){return{type:l._dimInfos[ar].type,property:ar}});u.initData(d,Ct,s)}this._store=u,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(n){var a=this._store.appendData(n);this._doInit(a[0],a[1])},t.prototype.appendValues=function(n,a){var s=this._store.appendValues(n,a&&a.length),l=s.start,u=s.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),a)for(var d=l;d<u;d++){var Ct=d-l;this._nameList[d]=a[Ct],c&&makeIdFromName(this,d)}},t.prototype._updateOrdinalMeta=function(){for(var n=this._store,a=this.dimensions,s=0;s<a.length;s++){var l=this._dimInfos[a[s]];l.ordinalMeta&&n.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},t.prototype._doInit=function(n,a){if(!(n>=a)){var s=this._store,l=s.getProvider();this._updateOrdinalMeta();var u=this._nameList,c=this._idList,d=l.getSource().sourceFormat,Ct=d===SOURCE_FORMAT_ORIGINAL;if(Ct&&!l.pure)for(var ar=[],en=n;en<a;en++){var tn=l.getItem(en,ar);if(!this.hasItemOption&&isDataItemOption(tn)&&(this.hasItemOption=!0),tn){var on=tn.name;u[en]==null&&on!=null&&(u[en]=convertOptionIdName(on,null));var cn=tn.id;c[en]==null&&cn!=null&&(c[en]=convertOptionIdName(cn,null))}}if(this._shouldMakeIdFromName())for(var en=n;en<a;en++)makeIdFromName(this,en);prepareInvertedIndex(this)}},t.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.setApproximateExtent=function(n,a){a=this.getDimension(a),this._approximateExtent[a]=n.slice()},t.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},t.prototype.setCalculationInfo=function(n,a){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=a},t.prototype.getName=function(n){var a=this.getRawIndex(n),s=this._nameList[a];return s==null&&this._nameDimIdx!=null&&(s=getIdNameFromStore(this,this._nameDimIdx,a)),s==null&&(s=""),s},t.prototype._getCategory=function(n,a){var s=this._store.get(n,a),l=this._store.getOrdinalMeta(n);return l?l.categories[s]:s},t.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(n,a){var s=this._store,l=this._dimInfos[n];if(l)return s.get(l.storeDimIndex,a)},t.prototype.getByRawIndex=function(n,a){var s=this._store,l=this._dimInfos[n];if(l)return s.getByRawIndex(l.storeDimIndex,a)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},t.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},t.prototype.getValues=function(n,a){var s=this,l=this._store;return isArray$1(n)?l.getValues(map(n,function(u){return s._getStoreDimIndex(u)}),a):l.getValues(n)},t.prototype.hasValue=function(n){for(var a=this._dimSummary.dataDimIndicesOnCoord,s=0,l=a.length;s<l;s++)if(isNaN(this._store.get(a[s],n)))return!1;return!0},t.prototype.indexOfName=function(n){for(var a=0,s=this._store.count();a<s;a++)if(this.getName(a)===n)return a;return-1},t.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},t.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},t.prototype.rawIndexOf=function(n,a){var s=n&&this._invertedIndicesMap[n],l=s&&s[a];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},t.prototype.indicesOfNearest=function(n,a,s){return this._store.indicesOfNearest(this._getStoreDimIndex(n),a,s)},t.prototype.each=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]);var l=s||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(u,l?bind$1(a,l):a)},t.prototype.filterSelf=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]);var l=s||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(u,l?bind$1(a,l):a),this},t.prototype.selectRange=function(n){var a=this,s={},l=keys(n);return each$f(l,function(u){var c=a._getStoreDimIndex(u);s[c]=n[u]}),this._store=this._store.selectRange(s),this},t.prototype.mapArray=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]),s=s||this;var l=[];return this.each(n,function(){l.push(a&&a.apply(this,arguments))},s),l},t.prototype.map=function(n,a,s,l){var u=s||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this),d=cloneListForMapAndSample(this);return d._store=this._store.map(c,u?bind$1(a,u):a),d},t.prototype.modify=function(n,a,s,l){var u=s||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(c,u?bind$1(a,u):a)},t.prototype.downSample=function(n,a,s,l){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(n),a,s,l),u},t.prototype.minmaxDownSample=function(n,a){var s=cloneListForMapAndSample(this);return s._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),a),s},t.prototype.lttbDownSample=function(n,a){var s=cloneListForMapAndSample(this);return s._store=this._store.lttbDownSample(this._getStoreDimIndex(n),a),s},t.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},t.prototype.getItemModel=function(n){var a=this.hostModel,s=this.getRawDataItem(n);return new Model(s,a,a&&a.ecModel)},t.prototype.diff=function(n){var a=this;return new DataDiffer(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(s){return getId(n,s)},function(s){return getId(a,s)})},t.prototype.getVisual=function(n){var a=this._visual;return a&&a[n]},t.prototype.setVisual=function(n,a){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=a},t.prototype.getItemVisual=function(n,a){var s=this._itemVisuals[n],l=s&&s[a];return l??this.getVisual(a)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(n,a){var s=this._itemVisuals,l=s[n];l||(l=s[n]={});var u=l[a];return u==null&&(u=this.getVisual(a),isArray$1(u)?u=u.slice():isObject$1(u)&&(u=extend({},u)),l[a]=u),u},t.prototype.setItemVisual=function(n,a,s){var l=this._itemVisuals[n]||{};this._itemVisuals[n]=l,isObject$1(a)?extend(l,a):l[a]=s},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(n,a){isObject$1(n)?extend(this._layout,n):this._layout[n]=a},t.prototype.getLayout=function(n){return this._layout[n]},t.prototype.getItemLayout=function(n){return this._itemLayouts[n]},t.prototype.setItemLayout=function(n,a,s){this._itemLayouts[n]=s?extend(this._itemLayouts[n]||{},a):a},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(n,a){var s=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(s,this.dataType,n,a),this._graphicEls[n]=a},t.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},t.prototype.eachItemGraphicEl=function(n,a){each$f(this._graphicEls,function(s,l){s&&n&&n.call(a,s,l)})},t.prototype.cloneShallow=function(n){return n||(n=new t(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},t.prototype.wrapMethod=function(n,a){var s=this[n];isFunction$1(s)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var l=s.apply(this,arguments);return a.apply(this,[l].concat(slice(arguments)))})},t.internalField=(function(){prepareInvertedIndex=function(n){var a=n._invertedIndicesMap;each$f(a,function(s,l){var u=n._dimInfos[l],c=u.ordinalMeta,d=n._store;if(c){s=a[l]=new CtorInt32Array(c.categories.length);for(var Ct=0;Ct<s.length;Ct++)s[Ct]=INDEX_NOT_FOUND;for(var Ct=0;Ct<d.count();Ct++)s[d.get(u.storeDimIndex,Ct)]=Ct}})},getIdNameFromStore=function(n,a,s){return convertOptionIdName(n._getCategory(a,s),null)},getId=function(n,a){var s=n._idList[a];return s==null&&n._idDimIdx!=null&&(s=getIdNameFromStore(n,n._idDimIdx,a)),s==null&&(s=ID_PREFIX+a),s},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var a=new t(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(a,n),a},transferProperties=function(n,a){each$f(TRANSFERABLE_PROPERTIES.concat(a.__wrappedMethods||[]),function(s){a.hasOwnProperty(s)&&(n[s]=a[s])}),n.__wrappedMethods=a.__wrappedMethods,each$f(CLONE_PROPERTIES,function(s){n[s]=clone$4(a[s])}),n._calculationInfo=extend({},a._calculationInfo)},makeIdFromName=function(n,a){var s=n._nameList,l=n._idList,u=n._nameDimIdx,c=n._idDimIdx,d=s[a],Ct=l[a];if(d==null&&u!=null&&(s[a]=d=getIdNameFromStore(n,u,a)),Ct==null&&c!=null&&(l[a]=Ct=getIdNameFromStore(n,c,a)),Ct==null&&d!=null){var ar=n._nameRepeatCount,en=ar[d]=(ar[d]||0)+1;Ct=d,en>1&&(Ct+="__ec__"+en),l[a]=Ct}}})(),t})();function createDimensions(t,n){return prepareSeriesDataSchema(t,n).dimensions}function prepareSeriesDataSchema(t,n){isSourceInstance(t)||(t=createSourceFromSeriesDataOption(t)),n=n||{};var a=n.coordDimensions||[],s=n.dimensionsDefine||t.dimensionsDefine||[],l=createHashMap(),u=[],c=getDimCount(t,a,s,n.dimensionsCount),d=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),Ct=s===t.dimensionsDefine,ar=Ct?ensureSourceDimNameMap(t):createDimNameMap(s),en=n.encodeDefine;!en&&n.encodeDefaulter&&(en=n.encodeDefaulter(t,c));for(var tn=createHashMap(en),on=new CtorInt32Array$1(c),cn=0;cn<on.length;cn++)on[cn]=-1;function dn(fx){var dx=on[fx];if(dx<0){var mx=s[fx],vx=isObject$3(mx)?mx:{name:mx},bx=new SeriesDimensionDefine,xx=vx.name;xx!=null&&ar.get(xx)!=null&&(bx.name=bx.displayName=xx),vx.type!=null&&(bx.type=vx.type),vx.displayName!=null&&(bx.displayName=vx.displayName);var _x=u.length;return on[fx]=_x,bx.storeDimIndex=fx,u.push(bx),bx}return u[dx]}if(!d)for(var cn=0;cn<c;cn++)dn(cn);tn.each(function(fx,dx){var mx=normalizeToArray(fx).slice();if(mx.length===1&&!isString$1(mx[0])&&mx[0]<0){tn.set(dx,!1);return}var vx=tn.set(dx,[]);each$f(mx,function(bx,xx){var _x=isString$1(bx)?ar.get(bx):bx;_x!=null&&_x<c&&(vx[xx]=_x,In(dn(_x),dx,xx))})});var Cn=0;each$f(a,function(fx){var dx,mx,vx,bx;if(isString$1(fx))dx=fx,bx={};else{bx=fx,dx=bx.name;var xx=bx.ordinalMeta;bx.ordinalMeta=null,bx=extend({},bx),bx.ordinalMeta=xx,mx=bx.dimsDef,vx=bx.otherDims,bx.name=bx.coordDim=bx.coordDimIndex=bx.dimsDef=bx.otherDims=null}var _x=tn.get(dx);if(_x!==!1){if(_x=normalizeToArray(_x),!_x.length)for(var Ex=0;Ex<(mx&&mx.length||1);Ex++){for(;Cn<c&&dn(Cn).coordDim!=null;)Cn++;Cn<c&&_x.push(Cn++)}each$f(_x,function(Tx,Cx){var Mx=dn(Tx);if(Ct&&bx.type!=null&&(Mx.type=bx.type),In(defaults(Mx,bx),dx,Cx),Mx.name==null&&mx){var Ax=mx[Cx];!isObject$3(Ax)&&(Ax={name:Ax}),Mx.name=Mx.displayName=Ax.name,Mx.defaultTooltip=Ax.defaultTooltip}vx&&defaults(Mx.otherDims,vx)})}});function In(fx,dx,mx){VISUAL_DIMENSIONS.get(dx)!=null?fx.otherDims[dx]=mx:(fx.coordDim=dx,fx.coordDimIndex=mx,l.set(dx,!0))}var ix=n.generateCoord,ax=n.generateCoordCount,ox=ax!=null;ax=ix?ax||1:0;var sx=ix||"value";function ux(fx){fx.name==null&&(fx.name=fx.coordDim)}if(d)each$f(u,function(fx){ux(fx)}),u.sort(function(fx,dx){return fx.storeDimIndex-dx.storeDimIndex});else for(var cx=0;cx<c;cx++){var hx=dn(cx),gx=hx.coordDim;gx==null&&(hx.coordDim=genCoordDimName(sx,l,ox),hx.coordDimIndex=0,(!ix||ax<=0)&&(hx.isExtraCoord=!0),ax--),ux(hx),hx.type==null&&(guessOrdinal(t,cx)===BE_ORDINAL.Must||hx.isExtraCoord&&(hx.otherDims.itemName!=null||hx.otherDims.seriesName!=null))&&(hx.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:t,dimensions:u,fullDimensionCount:c,dimensionOmitted:d})}function removeDuplication(t){for(var n=createHashMap(),a=0;a<t.length;a++){var s=t[a],l=s.name,u=n.get(l)||0;u>0&&(s.name=l+(u-1)),u++,n.set(l,u)}}function getDimCount(t,n,a,s){var l=Math.max(t.dimensionsDetectedCount||1,n.length,a.length,s||0);return each$f(n,function(u){var c;isObject$3(u)&&(c=u.dimsDef)&&(l=Math.max(l,c.length))}),l}function genCoordDimName(t,n,a){if(a||n.hasKey(t)){for(var s=0;n.hasKey(t+s);)s++;t+=s}return n.set(t,!0),t}var CoordSysInfo=(function(){function t(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return t})();function getCoordSysInfoBySeries(t){var n=t.get("coordinateSystem"),a=new CoordSysInfo(n),s=fetchers[n];if(s)return s(t,a,a.axisMap,a.categoryAxisMap),a}var fetchers={cartesian2d:function(t,n,a,s){var l=t.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=t.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"],a.set("x",l),a.set("y",u),isCategory(l)&&(s.set("x",l),n.firstCategoryDimIndex=0),isCategory(u)&&(s.set("y",u),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(t,n,a,s){var l=t.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["single"],a.set("single",l),isCategory(l)&&(s.set("single",l),n.firstCategoryDimIndex=0)},polar:function(t,n,a,s){var l=t.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=l.findAxisModel("radiusAxis"),c=l.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],a.set("radius",u),a.set("angle",c),isCategory(u)&&(s.set("radius",u),n.firstCategoryDimIndex=0),isCategory(c)&&(s.set("angle",c),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(t,n,a,s){n.coordSysDims=["lng","lat"]},parallel:function(t,n,a,s){var l=t.ecModel,u=l.getComponent("parallel",t.get("parallelIndex")),c=n.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(d,Ct){var ar=l.getComponent("parallelAxis",d),en=c[Ct];a.set(en,ar),isCategory(ar)&&(s.set(en,ar),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=Ct))})}};function isCategory(t){return t.get("type")==="category"}function enableDataStack(t,n,a){a=a||{};var s=a.byIndex,l=a.stackedCoordDimension,u,c,d;isLegacyDimensionsInput(n)?u=n:(c=n.schema,u=c.dimensions,d=n.store);var Ct=!!(t&&t.get("stack")),ar,en,tn,on;if(each$f(u,function(ax,ox){isString$1(ax)&&(u[ox]=ax={name:ax}),Ct&&!ax.isExtraCoord&&(!s&&!ar&&ax.ordinalMeta&&(ar=ax),!en&&ax.type!=="ordinal"&&ax.type!=="time"&&(!l||l===ax.coordDim)&&(en=ax))}),en&&!s&&!ar&&(s=!0),en){tn="__\0ecstackresult_"+t.id,on="__\0ecstackedover_"+t.id,ar&&(ar.createInvertedIndices=!0);var cn=en.coordDim,dn=en.type,Cn=0;each$f(u,function(ax){ax.coordDim===cn&&Cn++});var In={name:tn,coordDim:cn,coordDimIndex:Cn,type:dn,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},ix={name:on,coordDim:on,coordDimIndex:Cn+1,type:dn,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};c?(d&&(In.storeDimIndex=d.ensureCalculationDimension(on,dn),ix.storeDimIndex=d.ensureCalculationDimension(tn,dn)),c.appendCalculationDimension(In),c.appendCalculationDimension(ix)):(u.push(In),u.push(ix))}return{stackedDimension:en&&en.name,stackedByDimension:ar&&ar.name,isStackedByIndex:s,stackedOverDimension:on,stackResultDimension:tn}}function isLegacyDimensionsInput(t){return!isSeriesDataSchema(t.schema)}function isDimensionStacked(t,n){return!!n&&n===t.getCalculationInfo("stackedDimension")}function getStackedDimension(t,n){return isDimensionStacked(t,n)?t.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(t,n){var a=t.get("coordinateSystem"),s=CoordinateSystemManager.get(a),l;return n&&n.coordSysDims&&(l=map$1(n.coordSysDims,function(u){var c={name:u},d=n.axisMap.get(u);if(d){var Ct=d.get("type");c.type=getDimensionTypeByAxis(Ct)}return c})),l||(l=s&&(s.getDimensionsInfo?s.getDimensionsInfo():s.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(t,n,a){var s,l;return a&&each$f(t,function(u,c){var d=u.coordDim,Ct=a.categoryAxisMap.get(d);Ct&&(s==null&&(s=c),u.ordinalMeta=Ct.getOrdinalMeta(),n&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(l=!0)}),!l&&s!=null&&(t[s].otherDims.itemName=0),s}function createSeriesData(t,n,a){a=a||{};var s=n.getSourceManager(),l,u=!1;t?(u=!0,l=createSourceFromSeriesDataOption(t)):(l=s.getSource(),u=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(n),d=getCoordSysDimDefs(n,c),Ct=a.useEncodeDefaulter,ar=isFunction$1(Ct)?Ct:Ct?curry$1(makeSeriesEncodeForAxisCoordSys,d,n):null,en={coordDimensions:d,generateCoord:a.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:ar,canOmitUnusedDimensions:!u},tn=prepareSeriesDataSchema(l,en),on=injectOrdinalMeta(tn.dimensions,a.createInvertedIndices,c),cn=u?null:s.getSharedDataStore(tn),dn=enableDataStack(n,{schema:tn,store:cn}),Cn=new SeriesData(tn,n);Cn.setCalculationInfo(dn);var In=on!=null&&isNeedCompleteOrdinalData(l)?function(ix,ax,ox,sx){return sx===on?ox:this.defaultDimValueGetter(ix,ax,ox,sx)}:null;return Cn.hasItemOption=!1,Cn.initData(u?l:cn,null,In),Cn}function isNeedCompleteOrdinalData(t){if(t.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(t.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(t){for(var n=0;n<t.length&&t[n]==null;)n++;return t[n]}var Scale=(function(){function t(n){this._setting=n||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(n){return this._setting[n]},t.prototype.unionExtent=function(n){var a=this._extent;n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1])},t.prototype.unionExtentFromData=function(n,a){this.unionExtent(n.getApproximateExtent(a))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(n,a){var s=this._extent;isNaN(n)||(s[0]=n),isNaN(a)||(s[1]=a)},t.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(n){this._isBlank=n},t})();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=(function(){function t(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase}return t.createByAxisModel=function(n){var a=n.option,s=a.data,l=s&&map$1(s,getName);return new t({categories:l,needCollect:!l,deduplication:a.dedplication!==!1})},t.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},t.prototype.parseAndCollect=function(n){var a,s=this._needCollect;if(!isString$1(n)&&!s)return n;if(s&&!this._deduplication)return a=this.categories.length,this.categories[a]=n,a;var l=this._getOrCreateMap();return a=l.get(n),a==null&&(s?(a=this.categories.length,this.categories[a]=n,l.set(n,a)):a=NaN),a},t.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},t})();function getName(t){return isObject$3(t)&&t.value!=null?t.value:t+""}function isIntervalOrLogScale(t){return t.type==="interval"||t.type==="log"}function intervalScaleNiceTicks(t,n,a,s){var l={},u=t[1]-t[0],c=l.interval=nice(u/n,!0);a!=null&&c<a&&(c=l.interval=a),s!=null&&c>s&&(c=l.interval=s);var d=l.intervalPrecision=getIntervalPrecision(c),Ct=l.niceTickExtent=[round$3(Math.ceil(t[0]/c)*c,d),round$3(Math.floor(t[1]/c)*c,d)];return fixExtent(Ct,t),l}function increaseInterval(t){var n=Math.pow(10,quantityExponent(t)),a=t/n;return a?a===2?a=3:a===3?a=5:a*=2:a=1,round$3(a*n)}function getIntervalPrecision(t){return getPrecision(t)+2}function clamp(t,n,a){t[n]=Math.max(Math.min(t[n],a[1]),a[0])}function fixExtent(t,n){!isFinite(t[0])&&(t[0]=n[0]),!isFinite(t[1])&&(t[1]=n[1]),clamp(t,0,n),clamp(t,1,n),t[0]>t[1]&&(t[0]=t[1])}function contain$1(t,n){return t>=n[0]&&t<=n[1]}function normalize$2(t,n){return n[1]===n[0]?.5:(t-n[0])/(n[1]-n[0])}function scale(t,n){return t*(n[1]-n[0])+n[0]}var OrdinalScale=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;s.type="ordinal";var l=s.getSetting("ordinalMeta");return l||(l=new OrdinalMeta({})),isArray$1(l)&&(l=new OrdinalMeta({categories:map$1(l,function(u){return isObject$3(u)?u.value:u})})),s._ordinalMeta=l,s._extent=s.getSetting("extent")||[0,l.categories.length-1],s}return n.prototype.parse=function(a){return a==null?NaN:isString$1(a)?this._ordinalMeta.getOrdinal(a):Math.round(a)},n.prototype.contain=function(a){return a=this.parse(a),contain$1(a,this._extent)&&this._ordinalMeta.categories[a]!=null},n.prototype.normalize=function(a){return a=this._getTickNumber(this.parse(a)),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=Math.round(scale(a,this._extent)),this.getRawOrdinalNumber(a)},n.prototype.getTicks=function(){for(var a=[],s=this._extent,l=s[0];l<=s[1];)a.push({value:l}),l++;return a},n.prototype.getMinorTicks=function(a){},n.prototype.setSortInfo=function(a){if(a==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var s=a.ordinalNumbers,l=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],c=0,d=this._ordinalMeta.categories.length,Ct=Math.min(d,s.length);c<Ct;++c){var ar=s[c];l[c]=ar,u[ar]=c}for(var en=0;c<d;++c){for(;u[en]!=null;)en++;l.push(en),u[en]=c}},n.prototype._getTickNumber=function(a){var s=this._ticksByOrdinalNumber;return s&&a>=0&&a<s.length?s[a]:a},n.prototype.getRawOrdinalNumber=function(a){var s=this._ordinalNumbersByTick;return s&&a>=0&&a<s.length?s[a]:a},n.prototype.getLabel=function(a){if(!this.isBlank()){var s=this.getRawOrdinalNumber(a.value),l=this._ordinalMeta.categories[s];return l==null?"":l+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},n.prototype.isInExtentRange=function(a){return a=this._getTickNumber(a),this._extent[0]<=a&&this._extent[1]>=a},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n})(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="interval",a._interval=0,a._intervalPrecision=2,a}return n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return contain$1(a,this._extent)},n.prototype.normalize=function(a){return normalize$2(a,this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.prototype.setExtent=function(a,s){var l=this._extent;isNaN(a)||(l[0]=parseFloat(a)),isNaN(s)||(l[1]=parseFloat(s))},n.prototype.unionExtent=function(a){var s=this._extent;a[0]<s[0]&&(s[0]=a[0]),a[1]>s[1]&&(s[1]=a[1]),this.setExtent(s[0],s[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(a)},n.prototype.getTicks=function(a){var s=this._interval,l=this._extent,u=this._niceExtent,c=this._intervalPrecision,d=[];if(!s)return d;var Ct=1e4;l[0]<u[0]&&(a?d.push({value:roundNumber(u[0]-s,c)}):d.push({value:l[0]}));for(var ar=u[0];ar<=u[1]&&(d.push({value:ar}),ar=roundNumber(ar+s,c),ar!==d[d.length-1].value);)if(d.length>Ct)return[];var en=d.length?d[d.length-1].value:u[1];return l[1]>en&&(a?d.push({value:roundNumber(en+s,c)}):d.push({value:l[1]})),d},n.prototype.getMinorTicks=function(a){for(var s=this.getTicks(!0),l=[],u=this.getExtent(),c=1;c<s.length;c++){for(var d=s[c],Ct=s[c-1],ar=0,en=[],tn=d.value-Ct.value,on=tn/a;ar<a-1;){var cn=roundNumber(Ct.value+(ar+1)*on);cn>u[0]&&cn<u[1]&&en.push(cn),ar++}l.push(en)}return l},n.prototype.getLabel=function(a,s){if(a==null)return"";var l=s&&s.precision;l==null?l=getPrecision(a.value)||0:l==="auto"&&(l=this._intervalPrecision);var u=roundNumber(a.value,l,!0);return addCommas(u)},n.prototype.calcNiceTicks=function(a,s,l){a=a||5;var u=this._extent,c=u[1]-u[0];if(isFinite(c)){c<0&&(c=-c,u.reverse());var d=intervalScaleNiceTicks(u,a,s,l);this._intervalPrecision=d.intervalPrecision,this._interval=d.interval,this._niceExtent=d.niceTickExtent}},n.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1])if(s[0]!==0){var l=Math.abs(s[0]);a.fixMax||(s[1]+=l/2),s[0]-=l/2}else s[1]=1;var u=s[1]-s[0];isFinite(u)||(s[0]=0,s[1]=1),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval);var c=this._interval;a.fixMin||(s[0]=roundNumber(Math.floor(s[0]/c)*c)),a.fixMax||(s[1]=roundNumber(Math.ceil(s[1]/c)*c))},n.prototype.setNiceExtent=function(a,s){this._niceExtent=[a,s]},n.type="interval",n})(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(t){return isArray$1(t)?supportFloat32Array?new Float32Array(t):t:new Float32ArrayCtor(t)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(t){return t.get("stack")||STACK_PREFIX+t.seriesIndex}function getAxisKey$1(t){return t.dim+t.index}function getLayoutOnAxis(t){var n=[],a=t.axis,s="axis0";if(a.type==="category"){for(var l=a.getBandWidth(),u=0;u<t.count;u++)n.push(defaults({bandWidth:l,axisKey:s,stackId:STACK_PREFIX+u},t));for(var c=doCalBarWidthAndOffset(n),d=[],u=0;u<t.count;u++){var Ct=c[s][STACK_PREFIX+u];Ct.offsetCenter=Ct.offset+Ct.width/2,d.push(Ct)}return d}}function prepareLayoutBarSeries(t,n){var a=[];return n.eachSeriesByType(t,function(s){isOnCartesian(s)&&a.push(s)}),a}function getValueAxesMinGaps(t){var n={};each$f(t,function(Ct){var ar=Ct.coordinateSystem,en=ar.getBaseAxis();if(!(en.type!=="time"&&en.type!=="value"))for(var tn=Ct.getData(),on=en.dim+"_"+en.index,cn=tn.getDimensionIndex(tn.mapDimension(en.dim)),dn=tn.getStore(),Cn=0,In=dn.count();Cn<In;++Cn){var ix=dn.get(cn,Cn);n[on]?n[on].push(ix):n[on]=[ix]}});var a={};for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];if(l){l.sort(function(Ct,ar){return Ct-ar});for(var u=null,c=1;c<l.length;++c){var d=l[c]-l[c-1];d>0&&(u=u===null?d:Math.min(u,d))}a[s]=u}}return a}function makeColumnLayout(t){var n=getValueAxesMinGaps(t),a=[];return each$f(t,function(s){var l=s.coordinateSystem,u=l.getBaseAxis(),c=u.getExtent(),d;if(u.type==="category")d=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var Ct=u.dim+"_"+u.index,ar=n[Ct],en=Math.abs(c[1]-c[0]),tn=u.scale.getExtent(),on=Math.abs(tn[1]-tn[0]);d=ar?en/on*ar:en}else{var cn=s.getData();d=Math.abs(c[1]-c[0])/cn.count()}var dn=parsePercent(s.get("barWidth"),d),Cn=parsePercent(s.get("barMaxWidth"),d),In=parsePercent(s.get("barMinWidth")||(isInLargeMode(s)?.5:1),d),ix=s.get("barGap"),ax=s.get("barCategoryGap");a.push({bandWidth:d,barWidth:dn,barMaxWidth:Cn,barMinWidth:In,barGap:ix,barCategoryGap:ax,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(s)})}),doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(t){var n={};each$f(t,function(s,l){var u=s.axisKey,c=s.bandWidth,d=n[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},Ct=d.stacks;n[u]=d;var ar=s.stackId;Ct[ar]||d.autoWidthCount++,Ct[ar]=Ct[ar]||{width:0,maxWidth:0};var en=s.barWidth;en&&!Ct[ar].width&&(Ct[ar].width=en,en=Math.min(d.remainedWidth,en),d.remainedWidth-=en);var tn=s.barMaxWidth;tn&&(Ct[ar].maxWidth=tn);var on=s.barMinWidth;on&&(Ct[ar].minWidth=on);var cn=s.barGap;cn!=null&&(d.gap=cn);var dn=s.barCategoryGap;dn!=null&&(d.categoryGap=dn)});var a={};return each$f(n,function(s,l){a[l]={};var u=s.stacks,c=s.bandWidth,d=s.categoryGap;if(d==null){var Ct=keys(u).length;d=Math.max(35-Ct*4,15)+"%"}var ar=parsePercent(d,c),en=parsePercent(s.gap,1),tn=s.remainedWidth,on=s.autoWidthCount,cn=(tn-ar)/(on+(on-1)*en);cn=Math.max(cn,0),each$f(u,function(ix){var ax=ix.maxWidth,ox=ix.minWidth;if(ix.width){var sx=ix.width;ax&&(sx=Math.min(sx,ax)),ox&&(sx=Math.max(sx,ox)),ix.width=sx,tn-=sx+en*sx,on--}else{var sx=cn;ax&&ax<sx&&(sx=Math.min(ax,tn)),ox&&ox>sx&&(sx=ox),sx!==cn&&(ix.width=sx,tn-=sx+en*sx,on--)}}),cn=(tn-ar)/(on+(on-1)*en),cn=Math.max(cn,0);var dn=0,Cn;each$f(u,function(ix,ax){ix.width||(ix.width=cn),Cn=ix,dn+=ix.width*(1+en)}),Cn&&(dn-=Cn.width*en);var In=-dn/2;each$f(u,function(ix,ax){a[l][ax]=a[l][ax]||{bandWidth:c,offset:In,width:ix.width},In+=ix.width*(1+en)})}),a}function retrieveColumnLayout(t,n,a){if(t&&n){var s=t[getAxisKey$1(n)];return s}}function layout$3(t,n){var a=prepareLayoutBarSeries(t,n),s=makeColumnLayout(a);each$f(a,function(l){var u=l.getData(),c=l.coordinateSystem,d=c.getBaseAxis(),Ct=getSeriesStackId$1(l),ar=s[getAxisKey$1(d)][Ct],en=ar.offset,tn=ar.width;u.setLayout({bandWidth:ar.bandWidth,offset:en,size:tn})})}function createProgressiveLayout(t){return{seriesType:t,plan:createRenderPlanner(),reset:function(n){if(isOnCartesian(n)){var a=n.getData(),s=n.coordinateSystem,l=s.getBaseAxis(),u=s.getOtherAxis(l),c=a.getDimensionIndex(a.mapDimension(u.dim)),d=a.getDimensionIndex(a.mapDimension(l.dim)),Ct=n.get("showBackground",!0),ar=a.mapDimension(u.dim),en=a.getCalculationInfo("stackResultDimension"),tn=isDimensionStacked(a,ar)&&!!a.getCalculationInfo("stackedOnSeries"),on=u.isHorizontal(),cn=getValueAxisStart(l,u),dn=isInLargeMode(n),Cn=n.get("barMinHeight")||0,In=en&&a.getDimensionIndex(en),ix=a.getLayout("size"),ax=a.getLayout("offset");return{progress:function(ox,sx){for(var ux=ox.count,cx=dn&&createFloat32Array(ux*3),hx=dn&&Ct&&createFloat32Array(ux*3),gx=dn&&createFloat32Array(ux),fx=s.master.getRect(),dx=on?fx.width:fx.height,mx,vx=sx.getStore(),bx=0;(mx=ox.next())!=null;){var xx=vx.get(tn?In:c,mx),_x=vx.get(d,mx),Ex=cn,Tx=void 0;tn&&(Tx=+xx-vx.get(c,mx));var Cx=void 0,Mx=void 0,Ax=void 0,Nx=void 0;if(on){var Ux=s.dataToPoint([xx,_x]);if(tn){var Rx=s.dataToPoint([Tx,_x]);Ex=Rx[0]}Cx=Ex,Mx=Ux[1]+ax,Ax=Ux[0]-Ex,Nx=ix,Math.abs(Ax)<Cn&&(Ax=(Ax<0?-1:1)*Cn)}else{var Ux=s.dataToPoint([_x,xx]);if(tn){var Rx=s.dataToPoint([_x,Tx]);Ex=Rx[1]}Cx=Ux[0]+ax,Mx=Ex,Ax=ix,Nx=Ux[1]-Ex,Math.abs(Nx)<Cn&&(Nx=(Nx<=0?-1:1)*Cn)}dn?(cx[bx]=Cx,cx[bx+1]=Mx,cx[bx+2]=on?Ax:Nx,hx&&(hx[bx]=on?fx.x:Cx,hx[bx+1]=on?Mx:fx.y,hx[bx+2]=dx),gx[mx]=mx):sx.setItemLayout(mx,{x:Cx,y:Mx,width:Ax,height:Nx}),bx+=3}dn&&sx.setLayout({largePoints:cx,largeDataIndices:gx,largeBackgroundPoints:hx,valueAxisHorizontal:on})}}}}}}function isOnCartesian(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function isInLargeMode(t){return t.pipelineContext&&t.pipelineContext.large}function getValueAxisStart(t,n){var a=n.model.get("startValue");return a||(a=0),n.toGlobalCoord(n.dataToCoord(n.type==="log"?a>0?a:1:a))}var bisect=function(t,n,a,s){for(;a<s;){var l=a+s>>>1;t[l][1]<n?a=l+1:s=l}return a},TimeScale=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="time",s}return n.prototype.getLabel=function(a){var s=this.getSetting("useUTC");return format$1(a.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,s,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(a,s,l){var u=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(a,s,l,c,u)},n.prototype.getTicks=function(){var a=this._interval,s=this._extent,l=[];if(!a)return l;l.push({value:s[0],level:0});var u=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,s);return l=l.concat(c),l.push({value:s[1],level:0}),l},n.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1]&&(s[0]-=ONE_DAY,s[1]+=ONE_DAY),s[1]===-1/0&&s[0]===1/0){var l=new Date;s[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),s[0]=s[1]-ONE_DAY}this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval)},n.prototype.calcNiceTicks=function(a,s,l){a=a||10;var u=this._extent,c=u[1]-u[0];this._approxInterval=c/a,s!=null&&this._approxInterval<s&&(this._approxInterval=s),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var d=scaleIntervals.length,Ct=Math.min(bisect(scaleIntervals,this._approxInterval,0,d),d-1);this._interval=scaleIntervals[Ct][1],this._minLevelUnit=scaleIntervals[Math.max(Ct-1,0)][0]},n.prototype.parse=function(a){return isNumber(a)?a:+parseDate(a)},n.prototype.contain=function(a){return contain$1(this.parse(a),this._extent)},n.prototype.normalize=function(a){return normalize$2(this.parse(a),this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.type="time",n})(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(t,n,a,s){var l=parseDate(n),u=parseDate(a),c=function(dn){return getUnitValue(l,dn,s)===getUnitValue(u,dn,s)},d=function(){return c("year")},Ct=function(){return d()&&c("month")},ar=function(){return Ct()&&c("day")},en=function(){return ar()&&c("hour")},tn=function(){return en()&&c("minute")},on=function(){return tn()&&c("second")},cn=function(){return on()&&c("millisecond")};switch(t){case"year":return d();case"month":return Ct();case"day":return ar();case"hour":return en();case"minute":return tn();case"second":return on();case"millisecond":return cn()}}function getDateInterval(t,n){return t/=ONE_DAY,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function getMonthInterval(t){var n=30*ONE_DAY;return t/=n,t>6?6:t>3?3:t>2?2:1}function getHourInterval(t){return t/=ONE_HOUR,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function getMinutesAndSecondsInterval(t,n){return t/=n?ONE_MINUTE:ONE_SECOND,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function getMillisecondsInterval(t){return nice(t,!0)}function getFirstTimestampOfUnit(t,n,a){var s=new Date(t);switch(getPrimaryTimeUnit(n)){case"year":case"month":s[monthSetterName(a)](0);case"day":s[dateSetterName(a)](1);case"hour":s[hoursSetterName(a)](0);case"minute":s[minutesSetterName(a)](0);case"second":s[secondsSetterName(a)](0),s[millisecondsSetterName(a)](0)}return s.getTime()}function getIntervalTicks(t,n,a,s){var l=1e4,u=timeUnits,c=0;function d(dx,mx,vx,bx,xx,_x,Ex){for(var Tx=new Date(mx),Cx=mx,Mx=Tx[bx]();Cx<vx&&Cx<=s[1];)Ex.push({value:Cx}),Mx+=dx,Tx[xx](Mx),Cx=Tx.getTime();Ex.push({value:Cx,notAdd:!0})}function Ct(dx,mx,vx){var bx=[],xx=!mx.length;if(!isUnitValueSame(getPrimaryTimeUnit(dx),s[0],s[1],a)){xx&&(mx=[{value:getFirstTimestampOfUnit(new Date(s[0]),dx,a)},{value:s[1]}]);for(var _x=0;_x<mx.length-1;_x++){var Ex=mx[_x].value,Tx=mx[_x+1].value;if(Ex!==Tx){var Cx=void 0,Mx=void 0,Ax=void 0,Nx=!1;switch(dx){case"year":Cx=Math.max(1,Math.round(n/ONE_DAY/365)),Mx=fullYearGetterName(a),Ax=fullYearSetterName(a);break;case"half-year":case"quarter":case"month":Cx=getMonthInterval(n),Mx=monthGetterName(a),Ax=monthSetterName(a);break;case"week":case"half-week":case"day":Cx=getDateInterval(n),Mx=dateGetterName(a),Ax=dateSetterName(a),Nx=!0;break;case"half-day":case"quarter-day":case"hour":Cx=getHourInterval(n),Mx=hoursGetterName(a),Ax=hoursSetterName(a);break;case"minute":Cx=getMinutesAndSecondsInterval(n,!0),Mx=minutesGetterName(a),Ax=minutesSetterName(a);break;case"second":Cx=getMinutesAndSecondsInterval(n,!1),Mx=secondsGetterName(a),Ax=secondsSetterName(a);break;case"millisecond":Cx=getMillisecondsInterval(n),Mx=millisecondsGetterName(a),Ax=millisecondsSetterName(a);break}d(Cx,Ex,Tx,Mx,Ax,Nx,bx),dx==="year"&&vx.length>1&&_x===0&&vx.unshift({value:vx[0].value-Cx})}}for(var _x=0;_x<bx.length;_x++)vx.push(bx[_x]);return bx}}for(var ar=[],en=[],tn=0,on=0,cn=0;cn<u.length&&c++<l;++cn){var dn=getPrimaryTimeUnit(u[cn]);if(isPrimaryTimeUnit(u[cn])){Ct(u[cn],ar[ar.length-1]||[],en);var Cn=u[cn+1]?getPrimaryTimeUnit(u[cn+1]):null;if(dn!==Cn){if(en.length){on=tn,en.sort(function(dx,mx){return dx.value-mx.value});for(var In=[],ix=0;ix<en.length;++ix){var ax=en[ix].value;(ix===0||en[ix-1].value!==ax)&&(In.push(en[ix]),ax>=s[0]&&ax<=s[1]&&tn++)}var ox=(s[1]-s[0])/n;if(tn>ox*1.5&&on>ox/1.5||(ar.push(In),tn>ox||t===u[cn]))break}en=[]}}}for(var sx=filter(map$1(ar,function(dx){return filter(dx,function(mx){return mx.value>=s[0]&&mx.value<=s[1]&&!mx.notAdd})}),function(dx){return dx.length>0}),ux=[],cx=sx.length-1,cn=0;cn<sx.length;++cn)for(var hx=sx[cn],gx=0;gx<hx.length;++gx)ux.push({value:hx[gx].value,level:cx-cn});ux.sort(function(dx,mx){return dx.value-mx.value});for(var fx=[],cn=0;cn<ux.length;++cn)(cn===0||ux[cn].value!==ux[cn-1].value)&&fx.push(ux[cn]);return fx}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="log",a.base=10,a._originalScale=new IntervalScale,a._interval=0,a}return n.prototype.getTicks=function(a){var s=this._originalScale,l=this._extent,u=s.getExtent(),c=intervalScaleProto.getTicks.call(this,a);return map$1(c,function(d){var Ct=d.value,ar=round$3(mathPow$1(this.base,Ct));return ar=Ct===l[0]&&this._fixMin?fixRoundingError(ar,u[0]):ar,ar=Ct===l[1]&&this._fixMax?fixRoundingError(ar,u[1]):ar,{value:ar}},this)},n.prototype.setExtent=function(a,s){var l=mathLog$1(this.base);a=mathLog$1(Math.max(0,a))/l,s=mathLog$1(Math.max(0,s))/l,intervalScaleProto.setExtent.call(this,a,s)},n.prototype.getExtent=function(){var a=this.base,s=scaleProto.getExtent.call(this);s[0]=mathPow$1(a,s[0]),s[1]=mathPow$1(a,s[1]);var l=this._originalScale,u=l.getExtent();return this._fixMin&&(s[0]=fixRoundingError(s[0],u[0])),this._fixMax&&(s[1]=fixRoundingError(s[1],u[1])),s},n.prototype.unionExtent=function(a){this._originalScale.unionExtent(a);var s=this.base;a[0]=mathLog$1(a[0])/mathLog$1(s),a[1]=mathLog$1(a[1])/mathLog$1(s),scaleProto.unionExtent.call(this,a)},n.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},n.prototype.calcNiceTicks=function(a){a=a||10;var s=this._extent,l=s[1]-s[0];if(!(l===1/0||l<=0)){var u=quantity(l),c=a/l*u;for(c<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var d=[round$3(mathCeil$1(s[0]/u)*u),round$3(mathFloor$1(s[1]/u)*u)];this._interval=u,this._niceExtent=d}},n.prototype.calcNiceExtent=function(a){intervalScaleProto.calcNiceExtent.call(this,a),this._fixMin=a.fixMin,this._fixMax=a.fixMax},n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return a=mathLog$1(a)/mathLog$1(this.base),contain$1(a,this._extent)},n.prototype.normalize=function(a){return a=mathLog$1(a)/mathLog$1(this.base),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=scale(a,this._extent),mathPow$1(this.base,a)},n.type="log",n})(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(t,n){return roundingErrorFix(t,getPrecision(n))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=(function(){function t(n,a,s){this._prepareParams(n,a,s)}return t.prototype._prepareParams=function(n,a,s){s[1]<s[0]&&(s=[NaN,NaN]),this._dataMin=s[0],this._dataMax=s[1];var l=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&a.getNeedCrossZero&&a.getNeedCrossZero();var u=a.get("min",!0);u==null&&(u=a.get("startValue",!0));var c=this._modelMinRaw=u;isFunction$1(c)?this._modelMinNum=parseAxisModelMinMax(n,c({min:s[0],max:s[1]})):c!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,c));var d=this._modelMaxRaw=a.get("max",!0);if(isFunction$1(d)?this._modelMaxNum=parseAxisModelMinMax(n,d({min:s[0],max:s[1]})):d!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,d)),l)this._axisDataLen=a.getCategories().length;else{var Ct=a.get("boundaryGap"),ar=isArray$1(Ct)?Ct:[Ct||0,Ct||0];typeof ar[0]=="boolean"||typeof ar[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(ar[0],1),parsePercent$1(ar[1],1)]}},t.prototype.calculate=function(){var n=this._isOrdinal,a=this._dataMin,s=this._dataMax,l=this._axisDataLen,u=this._boundaryGapInner,c=n?null:s-a||Math.abs(a),d=this._modelMinRaw==="dataMin"?a:this._modelMinNum,Ct=this._modelMaxRaw==="dataMax"?s:this._modelMaxNum,ar=d!=null,en=Ct!=null;d==null&&(d=n?l?0:NaN:a-u[0]*c),Ct==null&&(Ct=n?l?l-1:NaN:s+u[1]*c),(d==null||!isFinite(d))&&(d=NaN),(Ct==null||!isFinite(Ct))&&(Ct=NaN);var tn=eqNaN(d)||eqNaN(Ct)||n&&!l;this._needCrossZero&&(d>0&&Ct>0&&!ar&&(d=0),d<0&&Ct<0&&!en&&(Ct=0));var on=this._determinedMin,cn=this._determinedMax;return on!=null&&(d=on,ar=!0),cn!=null&&(Ct=cn,en=!0),{min:d,max:Ct,minFixed:ar,maxFixed:en,isBlank:tn}},t.prototype.modifyDataMinMax=function(n,a){this[DATA_MIN_MAX_ATTR[n]]=a},t.prototype.setDeterminedMinMax=function(n,a){var s=DETERMINED_MIN_MAX_ATTR[n];this[s]=a},t.prototype.freeze=function(){this.frozen=!0},t})(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(t,n,a){var s=t.rawExtentInfo;return s||(s=new ScaleRawExtentInfo(t,n,a),t.rawExtentInfo=s,s)}function parseAxisModelMinMax(t,n){return n==null?null:eqNaN(n)?NaN:t.parse(n)}function getScaleExtent(t,n){var a=t.type,s=ensureScaleRawExtentInfo(t,n,t.getExtent()).calculate();t.setBlank(s.isBlank);var l=s.min,u=s.max,c=n.ecModel;if(c&&a==="time"){var d=prepareLayoutBarSeries("bar",c),Ct=!1;if(each$f(d,function(tn){Ct=Ct||tn.getBaseAxis()===n.axis}),Ct){var ar=makeColumnLayout(d),en=adjustScaleForOverflow(l,u,n,ar);l=en.min,u=en.max}}return{extent:[l,u],fixMin:s.minFixed,fixMax:s.maxFixed}}function adjustScaleForOverflow(t,n,a,s){var l=a.axis.getExtent(),u=Math.abs(l[1]-l[0]),c=retrieveColumnLayout(s,a.axis);if(c===void 0)return{min:t,max:n};var d=1/0;each$f(c,function(cn){d=Math.min(cn.offset,d)});var Ct=-1/0;each$f(c,function(cn){Ct=Math.max(cn.offset+cn.width,Ct)}),d=Math.abs(d),Ct=Math.abs(Ct);var ar=d+Ct,en=n-t,tn=1-(d+Ct)/u,on=en/tn-en;return n+=on*(Ct/ar),t-=on*(d/ar),{min:t,max:n}}function niceScaleExtent(t,n){var a=n,s=getScaleExtent(t,a),l=s.extent,u=a.get("splitNumber");t instanceof LogScale&&(t.base=a.get("logBase"));var c=t.type,d=a.get("interval"),Ct=c==="interval"||c==="time";t.setExtent(l[0],l[1]),t.calcNiceExtent({splitNumber:u,fixMin:s.fixMin,fixMax:s.fixMax,minInterval:Ct?a.get("minInterval"):null,maxInterval:Ct?a.get("maxInterval"):null}),d!=null&&t.setInterval&&t.setInterval(d)}function createScaleByModel$1(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Scale.getClass(n)||IntervalScale)}}function ifAxisCrossZero(t){var n=t.scale.getExtent(),a=n[0],s=n[1];return!(a>0&&s>0||a<0&&s<0)}function makeLabelFormatter(t){var n=t.getLabelModel().get("formatter"),a=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?(function(s){return function(l,u){return t.scale.getFormattedLabel(l,u,s)}})(n):isString$1(n)?(function(s){return function(l){var u=t.scale.getLabel(l),c=s.replace("{value}",u??"");return c}})(n):isFunction$1(n)?(function(s){return function(l,u){return a!=null&&(u=l.value-a),s(getAxisRawValue(t,l),u,l.level!=null?{level:l.level}:null)}})(n):function(s){return t.scale.getLabel(s)}}function getAxisRawValue(t,n){return t.type==="category"?t.scale.getLabel(n):n.value}function estimateLabelUnionRect(t){var n=t.model,a=t.scale;if(!(!n.get(["axisLabel","show"])||a.isBlank())){var s,l,u=a.getExtent();a instanceof OrdinalScale?l=a.count():(s=a.getTicks(),l=s.length);var c=t.getLabelModel(),d=makeLabelFormatter(t),Ct,ar=1;l>40&&(ar=Math.ceil(l/40));for(var en=0;en<l;en+=ar){var tn=s?s[en]:{value:u[0]+en},on=d(tn,en),cn=c.getTextRect(on),dn=rotateTextRect(cn,c.get("rotate")||0);Ct?Ct.union(dn):Ct=dn}return Ct}}function rotateTextRect(t,n){var a=n*Math.PI/180,s=t.width,l=t.height,u=s*Math.abs(Math.cos(a))+Math.abs(l*Math.sin(a)),c=s*Math.abs(Math.sin(a))+Math.abs(l*Math.cos(a)),d=new BoundingRect(t.x,t.y,u,c);return d}function getOptionCategoryInterval(t){var n=t.get("interval");return n??"auto"}function shouldShowAllLabels(t){return t.type==="category"&&getOptionCategoryInterval(t.getLabelModel())===0}function getDataDimensionsOnAxis(t,n){var a={};return each$f(t.mapDimensionsAll(n),function(s){a[getStackedDimension(t,s)]=!0}),keys(a)}function unionAxisExtentFromData(t,n,a){n&&each$f(getDataDimensionsOnAxis(n,a),function(s){var l=n.getApproximateExtent(s);l[0]<t[0]&&(t[0]=l[0]),l[1]>t[1]&&(t[1]=l[1])})}var AxisModelCommonMixin=(function(){function t(){}return t.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},t.prototype.getCoordSysModel=function(){},t})();function createList$2(t){return createSeriesData(null,t)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(t,n){var a=n;n instanceof Model||(a=new Model(n));var s=createScaleByModel$1(a);return s.setExtent(t[0],t[1]),niceScaleExtent(s,a),s}function mixinAxisModelCommonMethods(t){mixin(t,AxisModelCommonMixin)}function createTextStyle(t,n){return n=n||{},createTextStyle$1(t,null,null,n.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(t,n){return Math.abs(t-n)<EPSILON}function contain(t,n,a){var s=0,l=t[0];if(!l)return!1;for(var u=1;u<t.length;u++){var c=t[u];s+=windingLine(l[0],l[1],c[0],c[1],n,a),l=c}var d=t[0];return(!isAroundEqual(l[0],d[0])||!isAroundEqual(l[1],d[1]))&&(s+=windingLine(l[0],l[1],d[0],d[1],n,a)),s!==0}var TMP_TRANSFORM=[];function transformPoints(t,n){for(var a=0;a<t.length;a++)applyTransform$1(t[a],t[a],n)}function updateBBoxFromPoints(t,n,a,s){for(var l=0;l<t.length;l++){var u=t[l];s&&(u=s.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(n,n,u),max$1(a,a,u))}}function centroid$1(t){for(var n=0,a=0,s=0,l=t.length,u=t[l-1][0],c=t[l-1][1],d=0;d<l;d++){var Ct=t[d][0],ar=t[d][1],en=u*ar-Ct*c;n+=en,a+=(u+Ct)*en,s+=(c+ar)*en,u=Ct,c=ar}return n?[a/n/3,s/n/3,n]:[t[0][0]||0,t[0][1]||0]}var Region=(function(){function t(n){this.name=n}return t.prototype.setCenter=function(n){this._center=n},t.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},t})(),GeoJSONPolygonGeometry=(function(){function t(n,a){this.type="polygon",this.exterior=n,this.interiors=a}return t})(),GeoJSONLineStringGeometry=(function(){function t(n){this.type="linestring",this.points=n}return t})(),GeoJSONRegion=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a)||this;return u.type="geoJSON",u.geometries=s,u._center=l&&[l[0],l[1]],u}return n.prototype.calcCenter=function(){for(var a=this.geometries,s,l=0,u=0;u<a.length;u++){var c=a[u],d=c.exterior,Ct=d&&d.length;Ct>l&&(s=c,l=Ct)}if(s)return centroid$1(s.exterior);var ar=this.getBoundingRect();return[ar.x+ar.width/2,ar.y+ar.height/2]},n.prototype.getBoundingRect=function(a){var s=this._rect;if(s&&!a)return s;var l=[1/0,1/0],u=[-1/0,-1/0],c=this.geometries;return each$f(c,function(d){d.type==="polygon"?updateBBoxFromPoints(d.exterior,l,u,a):each$f(d.points,function(Ct){updateBBoxFromPoints(Ct,l,u,a)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])||(l[0]=l[1]=u[0]=u[1]=0),s=new BoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]),a||(this._rect=s),s},n.prototype.contain=function(a){var s=this.getBoundingRect(),l=this.geometries;if(!s.contain(a[0],a[1]))return!1;e:for(var u=0,c=l.length;u<c;u++){var d=l[u];if(d.type==="polygon"){var Ct=d.exterior,ar=d.interiors;if(contain(Ct,a[0],a[1])){for(var en=0;en<(ar?ar.length:0);en++)if(contain(ar[en],a[0],a[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(a,s,l,u){var c=this.getBoundingRect(),d=c.width/c.height;l?u||(u=l/d):l=d*u;for(var Ct=new BoundingRect(a,s,l,u),ar=c.calculateTransform(Ct),en=this.geometries,tn=0;tn<en.length;tn++){var on=en[tn];on.type==="polygon"?(transformPoints(on.exterior,ar),each$f(on.interiors,function(cn){transformPoints(cn,ar)})):each$f(on.points,function(cn){transformPoints(cn,ar)})}c=this._rect,c.copy(Ct),this._center=[c.x+c.width/2,c.y+c.height/2]},n.prototype.cloneShallow=function(a){a==null&&(a=this.name);var s=new n(a,this.geometries,this._center);return s._rect=this._rect,s.transformTo=null,s},n})(Region),GeoSVGRegion=(function(t){__extends(n,t);function n(a,s){var l=t.call(this,a)||this;return l.type="geoSVG",l._elOnlyForCalculate=s,l}return n.prototype.calcCenter=function(){for(var a=this._elOnlyForCalculate,s=a.getBoundingRect(),l=[s.x+s.width/2,s.y+s.height/2],u=identity(TMP_TRANSFORM),c=a;c&&!c.isGeoSVGGraphicRoot;)mul(u,c.getLocalTransform(),u),c=c.parent;return invert(u,u),applyTransform$1(l,l,u),l},n})(Region);function decode(t){if(!t.UTF8Encoding)return t;var n=t,a=n.UTF8Scale;a==null&&(a=1024);var s=n.features;return each$f(s,function(l){var u=l.geometry,c=u.encodeOffsets,d=u.coordinates;if(c)switch(u.type){case"LineString":u.coordinates=decodeRing(d,c,a);break;case"Polygon":decodeRings(d,c,a);break;case"MultiLineString":decodeRings(d,c,a);break;case"MultiPolygon":each$f(d,function(Ct,ar){return decodeRings(Ct,c[ar],a)})}}),n.UTF8Encoding=!1,n}function decodeRings(t,n,a){for(var s=0;s<t.length;s++)t[s]=decodeRing(t[s],n[s],a)}function decodeRing(t,n,a){for(var s=[],l=n[0],u=n[1],c=0;c<t.length;c+=2){var d=t.charCodeAt(c)-64,Ct=t.charCodeAt(c+1)-64;d=d>>1^-(d&1),Ct=Ct>>1^-(Ct&1),d+=l,Ct+=u,l=d,u=Ct,s.push([d/a,Ct/a])}return s}function parseGeoJSON(t,n){return t=decode(t),map$1(filter(t.features,function(a){return a.geometry&&a.properties&&a.geometry.coordinates.length>0}),function(a){var s=a.properties,l=a.geometry,u=[];switch(l.type){case"Polygon":var c=l.coordinates;u.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(Ct){Ct[0]&&u.push(new GeoJSONPolygonGeometry(Ct[0],Ct.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(l.coordinates))}var d=new GeoJSONRegion(s[n||"name"],u,s.cp);return d.properties=s,d})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$1,isObject:isObject$3,isString:isString$1,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(t,n){var a=map$1(n,function(s){return t.scale.parse(s)});return t.type==="time"&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}function createAxisLabels(t){var n=t.getLabelModel().get("customValues");if(n){var a=makeLabelFormatter(t),s=t.scale.getExtent(),l=tickValuesToNumbers(t,n),u=filter(l,function(c){return c>=s[0]&&c<=s[1]});return{labels:map$1(u,function(c){var d={value:c};return{formattedLabel:a(d),rawLabel:t.scale.getLabel(d),tickValue:c}})}}return t.type==="category"?makeCategoryLabels(t):makeRealNumberLabels(t)}function createAxisTicks(t,n){var a=t.getTickModel().get("customValues");if(a){var s=t.scale.getExtent(),l=tickValuesToNumbers(t,a);return{ticks:filter(l,function(u){return u>=s[0]&&u<=s[1]})}}return t.type==="category"?makeCategoryTicks(t,n):{ticks:map$1(t.scale.getTicks(),function(u){return u.value})}}function makeCategoryLabels(t){var n=t.getLabelModel(),a=makeCategoryLabelsActually(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}function makeCategoryLabelsActually(t,n){var a=getListCache(t,"labels"),s=getOptionCategoryInterval(n),l=listCacheGet(a,s);if(l)return l;var u,c;return isFunction$1(s)?u=makeLabelsByCustomizedCategoryInterval(t,s):(c=s==="auto"?makeAutoCategoryInterval(t):s,u=makeLabelsByNumericCategoryInterval(t,c)),listCacheSet(a,s,{labels:u,labelCategoryInterval:c})}function makeCategoryTicks(t,n){var a=getListCache(t,"ticks"),s=getOptionCategoryInterval(n),l=listCacheGet(a,s);if(l)return l;var u,c;if((!n.get("show")||t.scale.isBlank())&&(u=[]),isFunction$1(s))u=makeLabelsByCustomizedCategoryInterval(t,s,!0);else if(s==="auto"){var d=makeCategoryLabelsActually(t,t.getLabelModel());c=d.labelCategoryInterval,u=map$1(d.labels,function(Ct){return Ct.tickValue})}else c=s,u=makeLabelsByNumericCategoryInterval(t,c,!0);return listCacheSet(a,s,{ticks:u,tickCategoryInterval:c})}function makeRealNumberLabels(t){var n=t.scale.getTicks(),a=makeLabelFormatter(t);return{labels:map$1(n,function(s,l){return{level:s.level,formattedLabel:a(s,l),rawLabel:t.scale.getLabel(s),tickValue:s.value}})}}function getListCache(t,n){return inner$g(t)[n]||(inner$g(t)[n]=[])}function listCacheGet(t,n){for(var a=0;a<t.length;a++)if(t[a].key===n)return t[a].value}function listCacheSet(t,n,a){return t.push({key:n,value:a}),a}function makeAutoCategoryInterval(t){var n=inner$g(t).autoInterval;return n??(inner$g(t).autoInterval=t.calculateCategoryInterval())}function calculateCategoryInterval(t){var n=fetchAutoCategoryIntervalCalculationParams(t),a=makeLabelFormatter(t),s=(n.axisRotate-n.labelRotate)/180*Math.PI,l=t.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var d=1;c>40&&(d=Math.max(1,Math.floor(c/40)));for(var Ct=u[0],ar=t.dataToCoord(Ct+1)-t.dataToCoord(Ct),en=Math.abs(ar*Math.cos(s)),tn=Math.abs(ar*Math.sin(s)),on=0,cn=0;Ct<=u[1];Ct+=d){var dn=0,Cn=0,In=getBoundingRect(a({value:Ct}),n.font,"center","top");dn=In.width*1.3,Cn=In.height*1.3,on=Math.max(on,dn,7),cn=Math.max(cn,Cn,7)}var ix=on/en,ax=cn/tn;isNaN(ix)&&(ix=1/0),isNaN(ax)&&(ax=1/0);var ox=Math.max(0,Math.floor(Math.min(ix,ax))),sx=inner$g(t.model),ux=t.getExtent(),cx=sx.lastAutoInterval,hx=sx.lastTickCount;return cx!=null&&hx!=null&&Math.abs(cx-ox)<=1&&Math.abs(hx-c)<=1&&cx>ox&&sx.axisExtent0===ux[0]&&sx.axisExtent1===ux[1]?ox=cx:(sx.lastTickCount=c,sx.lastAutoInterval=ox,sx.axisExtent0=ux[0],sx.axisExtent1=ux[1]),ox}function fetchAutoCategoryIntervalCalculationParams(t){var n=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(t,n,a){var s=makeLabelFormatter(t),l=t.scale,u=l.getExtent(),c=t.getLabelModel(),d=[],Ct=Math.max((n||0)+1,1),ar=u[0],en=l.count();ar!==0&&Ct>1&&en/Ct>2&&(ar=Math.round(Math.ceil(ar/Ct)*Ct));var tn=shouldShowAllLabels(t),on=c.get("showMinLabel")||tn,cn=c.get("showMaxLabel")||tn;on&&ar!==u[0]&&Cn(u[0]);for(var dn=ar;dn<=u[1];dn+=Ct)Cn(dn);cn&&dn-Ct!==u[1]&&Cn(u[1]);function Cn(In){var ix={value:In};d.push(a?In:{formattedLabel:s(ix),rawLabel:l.getLabel(ix),tickValue:In})}return d}function makeLabelsByCustomizedCategoryInterval(t,n,a){var s=t.scale,l=makeLabelFormatter(t),u=[];return each$f(s.getTicks(),function(c){var d=s.getLabel(c),Ct=c.value;n(c.value,d)&&u.push(a?Ct:{formattedLabel:l(c),rawLabel:d,tickValue:Ct})}),u}var NORMALIZED_EXTENT=[0,1],Axis=(function(){function t(n,a,s){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=a,this._extent=s||[0,0]}return t.prototype.contain=function(n){var a=this._extent,s=Math.min(a[0],a[1]),l=Math.max(a[0],a[1]);return n>=s&&n<=l},t.prototype.containData=function(n){return this.scale.contain(n)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(n,a){var s=this._extent;s[0]=n,s[1]=a},t.prototype.dataToCoord=function(n,a){var s=this._extent,l=this.scale;return n=l.normalize(n),this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count())),linearMap$2(n,NORMALIZED_EXTENT,s,a)},t.prototype.coordToData=function(n,a){var s=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count()));var u=linearMap$2(n,s,NORMALIZED_EXTENT,a);return this.scale.scale(u)},t.prototype.pointToData=function(n,a){},t.prototype.getTicksCoords=function(n){n=n||{};var a=n.tickModel||this.getTickModel(),s=createAxisTicks(this,a),l=s.ticks,u=map$1(l,function(d){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(d):d),tickValue:d}},this),c=a.get("alignWithLabel");return fixOnBandTicksCoords(this,u,c,n.clamp),u},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),a=n.get("splitNumber");a>0&&a<100||(a=5);var s=this.scale.getMinorTicks(a),l=map$1(s,function(u){return map$1(u,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return l},t.prototype.getViewLabels=function(){return createAxisLabels(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var n=this._extent,a=this.scale.getExtent(),s=a[1]-a[0]+(this.onBand?1:0);s===0&&(s=1);var l=Math.abs(n[1]-n[0]);return Math.abs(l)/s},t.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},t})();function fixExtentWithBands(t,n){var a=t[1]-t[0],s=n,l=a/s/2;t[0]+=l,t[1]-=l}function fixOnBandTicksCoords(t,n,a,s){var l=n.length;if(!t.onBand||a||!l)return;var u=t.getExtent(),c,d;if(l===1)n[0].coord=u[0],c=n[1]={coord:u[1],tickValue:n[0].tickValue};else{var Ct=n[l-1].tickValue-n[0].tickValue,ar=(n[l-1].coord-n[0].coord)/Ct;each$f(n,function(cn){cn.coord-=ar/2});var en=t.scale.getExtent();d=1+en[1]-n[l-1].tickValue,c={coord:n[l-1].coord+ar*d,tickValue:en[1]+1},n.push(c)}var tn=u[0]>u[1];on(n[0].coord,u[0])&&(s?n[0].coord=u[0]:n.shift()),s&&on(u[0],n[0].coord)&&n.unshift({coord:u[0]}),on(u[1],c.coord)&&(s?c.coord=u[1]:n.pop()),s&&on(c.coord,u[1])&&n.push({coord:u[1]});function on(cn,dn){return cn=round$3(cn),dn=round$3(dn),tn?cn>dn:cn<dn}}function extendComponentModel(t){var n=ComponentModel.extend(t);return ComponentModel.registerClass(n),n}function extendComponentView(t){var n=ComponentView.extend(t);return ComponentView.registerClass(n),n}function extendSeriesModel(t){var n=SeriesModel.extend(t);return SeriesModel.registerClass(n),n}function extendChartView(t){var n=ChartView.extend(t);return ChartView.registerClass(n),n}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(t,n,a,s,l){var u=a.width,c=a.height;switch(t){case"top":s.set(a.x+u/2,a.y-n),l.set(0,-1);break;case"bottom":s.set(a.x+u/2,a.y+c+n),l.set(0,1);break;case"left":s.set(a.x-n,a.y+c/2),l.set(-1,0);break;case"right":s.set(a.x+u+n,a.y+c/2),l.set(1,0);break}}function projectPointToArc(t,n,a,s,l,u,c,d,Ct){c-=t,d-=n;var ar=Math.sqrt(c*c+d*d);c/=ar,d/=ar;var en=c*a+t,tn=d*a+n;if(Math.abs(s-l)%PI2$2<1e-4)return Ct[0]=en,Ct[1]=tn,ar-a;if(u){var on=s;s=normalizeRadian(l),l=normalizeRadian(on)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$2);var cn=Math.atan2(d,c);if(cn<0&&(cn+=PI2$2),cn>=s&&cn<=l||cn+PI2$2>=s&&cn+PI2$2<=l)return Ct[0]=en,Ct[1]=tn,ar-a;var dn=a*Math.cos(s)+t,Cn=a*Math.sin(s)+n,In=a*Math.cos(l)+t,ix=a*Math.sin(l)+n,ax=(dn-c)*(dn-c)+(Cn-d)*(Cn-d),ox=(In-c)*(In-c)+(ix-d)*(ix-d);return ax<ox?(Ct[0]=dn,Ct[1]=Cn,Math.sqrt(ax)):(Ct[0]=In,Ct[1]=ix,Math.sqrt(ox))}function projectPointToLine(t,n,a,s,l,u,c,d){var Ct=l-t,ar=u-n,en=a-t,tn=s-n,on=Math.sqrt(en*en+tn*tn);en/=on,tn/=on;var cn=Ct*en+ar*tn,dn=cn/on;d&&(dn=Math.min(Math.max(dn,0),1)),dn*=on;var Cn=c[0]=t+dn*en,In=c[1]=n+dn*tn;return Math.sqrt((Cn-l)*(Cn-l)+(In-u)*(In-u))}function projectPointToRect(t,n,a,s,l,u,c){a<0&&(t=t+a,a=-a),s<0&&(n=n+s,s=-s);var d=t+a,Ct=n+s,ar=c[0]=Math.min(Math.max(l,t),d),en=c[1]=Math.min(Math.max(u,n),Ct);return Math.sqrt((ar-l)*(ar-l)+(en-u)*(en-u))}var tmpPt=[];function nearestPointOnRect(t,n,a){var s=projectPointToRect(n.x,n.y,n.width,n.height,t.x,t.y,tmpPt);return a.set(tmpPt[0],tmpPt[1]),s}function nearestPointOnPath(t,n,a){for(var s=0,l=0,u=0,c=0,d,Ct,ar=1/0,en=n.data,tn=t.x,on=t.y,cn=0;cn<en.length;){var dn=en[cn++];cn===1&&(s=en[cn],l=en[cn+1],u=s,c=l);var Cn=ar;switch(dn){case CMD$1.M:u=en[cn++],c=en[cn++],s=u,l=c;break;case CMD$1.L:Cn=projectPointToLine(s,l,en[cn],en[cn+1],tn,on,tmpPt,!0),s=en[cn++],l=en[cn++];break;case CMD$1.C:Cn=cubicProjectPoint(s,l,en[cn++],en[cn++],en[cn++],en[cn++],en[cn],en[cn+1],tn,on,tmpPt),s=en[cn++],l=en[cn++];break;case CMD$1.Q:Cn=quadraticProjectPoint(s,l,en[cn++],en[cn++],en[cn],en[cn+1],tn,on,tmpPt),s=en[cn++],l=en[cn++];break;case CMD$1.A:var In=en[cn++],ix=en[cn++],ax=en[cn++],ox=en[cn++],sx=en[cn++],ux=en[cn++];cn+=1;var cx=!!(1-en[cn++]);d=Math.cos(sx)*ax+In,Ct=Math.sin(sx)*ox+ix,cn<=1&&(u=d,c=Ct);var hx=(tn-In)*ox/ax+In;Cn=projectPointToArc(In,ix,ox,sx,sx+ux,cx,hx,on,tmpPt),s=Math.cos(sx+ux)*ax+In,l=Math.sin(sx+ux)*ox+ix;break;case CMD$1.R:u=s=en[cn++],c=l=en[cn++];var gx=en[cn++],fx=en[cn++];Cn=projectPointToRect(u,c,gx,fx,tn,on,tmpPt);break;case CMD$1.Z:Cn=projectPointToLine(s,l,u,c,tn,on,tmpPt,!0),s=u,l=c;break}Cn<ar&&(ar=Cn,a.set(tmpPt[0],tmpPt[1]))}return ar}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(t,n){if(t){var a=t.getTextGuideLine(),s=t.getTextContent();if(s&&a){var l=t.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],c=l.candidates||DEFAULT_SEARCH_SPACE,d=s.getBoundingRect().clone();d.applyTransform(s.getComputedTransform());var Ct=1/0,ar=l.anchor,en=t.getComputedTransform(),tn=en&&invert([],en),on=n.get("length2")||0;ar&&pt2.copy(ar);for(var cn=0;cn<c.length;cn++){var dn=c[cn];getCandidateAnchor(dn,0,d,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,on),pt1.transform(tn);var Cn=t.getBoundingRect(),In=ar?ar.distance(pt1):t instanceof Path?nearestPointOnPath(pt1,t.path,pt2):nearestPointOnRect(pt1,Cn,pt2);In<Ct&&(Ct=In,pt1.transform(en),pt2.transform(en),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,n.get("minTurnAngle")),a.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(t,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var a=dir.len(),s=dir2.len();if(!(a<.001||s<.001)){dir.scale(1/a),dir2.scale(1/s);var l=dir.dot(dir2),u=Math.cos(n);if(u<l){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-n));var d=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(d))return;d<0?Point.copy(tmpProjPoint,pt1):d>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(t[1])}}}}function limitSurfaceAngle(t,n,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var s=dir.len(),l=dir2.len();if(!(s<.001||l<.001)){dir.scale(1/s),dir2.scale(1/l);var u=dir.dot(n),c=Math.cos(a);if(u<c){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var Ct=Math.PI/2,ar=Math.acos(dir2.dot(n)),en=Ct+ar-a;if(en>=Ct)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI/2-en));var tn=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(tn))return;tn<0?Point.copy(tmpProjPoint,pt1):tn>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(t[1])}}}}function setLabelLineState(t,n,a,s){var l=a==="normal",u=l?t:t.ensureState(a);u.ignore=n;var c=s.get("smooth");c&&c===!0&&(c=.3),u.shape=u.shape||{},c>0&&(u.shape.smooth=c);var d=s.getModel("lineStyle").getLineStyle();l?t.useStyle(d):u.style=d}function buildLabelLinePath(t,n){var a=n.smooth,s=n.points;if(s)if(t.moveTo(s[0][0],s[0][1]),a>0&&s.length>=3){var l=dist$1(s[0],s[1]),u=dist$1(s[1],s[2]);if(!l||!u){t.lineTo(s[1][0],s[1][1]),t.lineTo(s[2][0],s[2][1]);return}var c=Math.min(l,u)*a,d=lerp$1([],s[1],s[0],c/l),Ct=lerp$1([],s[1],s[2],c/u),ar=lerp$1([],d,Ct,.5);t.bezierCurveTo(d[0],d[1],d[0],d[1],ar[0],ar[1]),t.bezierCurveTo(Ct[0],Ct[1],Ct[0],Ct[1],s[2][0],s[2][1])}else for(var en=1;en<s.length;en++)t.lineTo(s[en][0],s[en][1])}function setLabelLineStyle(t,n,a){var s=t.getTextGuideLine(),l=t.getTextContent();if(!l){s&&t.removeTextGuideLine();return}for(var u=n.normal,c=u.get("show"),d=l.ignore,Ct=0;Ct<DISPLAY_STATES.length;Ct++){var ar=DISPLAY_STATES[Ct],en=n[ar],tn=ar==="normal";if(en){var on=en.get("show"),cn=tn?d:retrieve2(l.states[ar]&&l.states[ar].ignore,d);if(cn||!retrieve2(on,c)){var dn=tn?s:s&&s.states[ar];dn&&(dn.ignore=!0),s&&setLabelLineState(s,!0,ar,en);continue}s||(s=new Polyline$1,t.setTextGuideLine(s),!tn&&(d||!c)&&setLabelLineState(s,!0,"normal",n.normal),t.stateProxy&&(s.stateProxy=t.stateProxy)),setLabelLineState(s,!1,ar,en)}}if(s){defaults(s.style,a),s.style.fill=null;var Cn=u.get("showAbove"),In=t.textGuideLineConfig=t.textGuideLineConfig||{};In.showAbove=Cn||!1,s.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(t,n){n=n||"labelLine";for(var a={normal:t.getModel(n)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];a[l]=t.getModel([l,n])}return a}function prepareLayoutList(t){for(var n=[],a=0;a<t.length;a++){var s=t[a];if(!s.defaultAttr.ignore){var l=s.label,u=l.getComputedTransform(),c=l.getBoundingRect(),d=!u||u[1]<1e-5&&u[2]<1e-5,Ct=l.style.margin||0,ar=c.clone();ar.applyTransform(u),ar.x-=Ct/2,ar.y-=Ct/2,ar.width+=Ct,ar.height+=Ct;var en=d?new OrientedBoundingRect(c,u):null;n.push({label:l,labelLine:s.labelLine,rect:ar,localRect:c,obb:en,priority:s.priority,defaultAttr:s.defaultAttr,layoutOption:s.computedLayoutOption,axisAligned:d,transform:u})}}return n}function shiftLayout(t,n,a,s,l,u){var c=t.length;if(c<2)return;t.sort(function(cx,hx){return cx.rect[n]-hx.rect[n]});for(var d=0,Ct,ar=!1,en=0;en<c;en++){var tn=t[en],on=tn.rect;Ct=on[n]-d,Ct<0&&(on[n]-=Ct,tn.label[n]-=Ct,ar=!0),d=on[n]+on[a]}var cn=t[0],dn=t[c-1],Cn,In;ix(),Cn<0&&sx(-Cn,.8),In<0&&sx(In,.8),ix(),ax(Cn,In,1),ax(In,Cn,-1),ix(),Cn<0&&ux(-Cn),In<0&&ux(In);function ix(){Cn=cn.rect[n]-s,In=l-dn.rect[n]-dn.rect[a]}function ax(cx,hx,gx){if(cx<0){var fx=Math.min(hx,-cx);if(fx>0){ox(fx*gx,0,c);var dx=fx+cx;dx<0&&sx(-dx*gx,1)}else sx(-cx*gx,1)}}function ox(cx,hx,gx){cx!==0&&(ar=!0);for(var fx=hx;fx<gx;fx++){var dx=t[fx],mx=dx.rect;mx[n]+=cx,dx.label[n]+=cx}}function sx(cx,hx){for(var gx=[],fx=0,dx=1;dx<c;dx++){var mx=t[dx-1].rect,vx=Math.max(t[dx].rect[n]-mx[n]-mx[a],0);gx.push(vx),fx+=vx}if(fx){var bx=Math.min(Math.abs(cx)/fx,hx);if(cx>0)for(var dx=0;dx<c-1;dx++){var xx=gx[dx]*bx;ox(xx,0,dx+1)}else for(var dx=c-1;dx>0;dx--){var xx=gx[dx-1]*bx;ox(-xx,dx,c)}}}function ux(cx){var hx=cx<0?-1:1;cx=Math.abs(cx);for(var gx=Math.ceil(cx/(c-1)),fx=0;fx<c-1;fx++)if(hx>0?ox(gx,0,fx+1):ox(-gx,c-fx-1,c),cx-=gx,cx<=0)return}return ar}function shiftLayoutOnX(t,n,a,s){return shiftLayout(t,"x","width",n,a)}function shiftLayoutOnY(t,n,a,s){return shiftLayout(t,"y","height",n,a)}function hideOverlap(t){var n=[];t.sort(function(Cn,In){return In.priority-Cn.priority});var a=new BoundingRect(0,0,0,0);function s(Cn){if(!Cn.ignore){var In=Cn.ensureState("emphasis");In.ignore==null&&(In.ignore=!1)}Cn.ignore=!0}for(var l=0;l<t.length;l++){var u=t[l],c=u.axisAligned,d=u.localRect,Ct=u.transform,ar=u.label,en=u.labelLine;a.copy(u.rect),a.width-=.1,a.height-=.1,a.x+=.05,a.y+=.05;for(var tn=u.obb,on=!1,cn=0;cn<n.length;cn++){var dn=n[cn];if(a.intersect(dn.rect)){if(c&&dn.axisAligned){on=!0;break}if(dn.obb||(dn.obb=new OrientedBoundingRect(dn.localRect,dn.transform)),tn||(tn=new OrientedBoundingRect(d,Ct)),tn.intersect(dn.obb)){on=!0;break}}}on?(s(ar),en&&s(en)):(ar.attr("ignore",u.defaultAttr.ignore),en&&en.attr("ignore",u.defaultAttr.labelGuideIgnore),n.push(u))}}function cloneArr(t){if(t){for(var n=[],a=0;a<t.length;a++)n.push(t[a].slice());return n}}function prepareLayoutCallbackParams(t,n){var a=t.label,s=n&&n.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:cloneArr(s&&s.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(t,n,a){for(var s=0;s<a.length;s++){var l=a[s];n[l]!=null&&(t[l]=n[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=(function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(n,a,s,l,u){var c=l.style,d=l.__hostTarget,Ct=d.textConfig||{},ar=l.getComputedTransform(),en=l.getBoundingRect().plain();BoundingRect.applyTransform(en,en,ar),ar?dummyTransformable.setLocalTransform(ar):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var tn=l.__hostTarget,on;if(tn){on=tn.getBoundingRect().plain();var cn=tn.getComputedTransform();BoundingRect.applyTransform(on,on,cn)}var dn=on&&tn.getTextGuideLine();this._labelList.push({label:l,labelLine:dn,seriesModel:s,dataIndex:n,dataType:a,layoutOption:u,computedLayoutOption:null,rect:en,hostRect:on,priority:on?on.width*on.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:dn&&dn.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:l.cursor,attachedPos:Ct.position,attachedRot:Ct.rotation}})},t.prototype.addLabelsOfSeries=function(n){var a=this;this._chartViewList.push(n);var s=n.__model,l=s.get("labelLayout");(isFunction$1(l)||keys(l).length)&&n.group.traverse(function(u){if(u.ignore)return!0;var c=u.getTextContent(),d=getECData(u);c&&!c.disableLabelLayout&&a._addLabel(d.dataIndex,d.dataType,s,c,l)})},t.prototype.updateLayoutConfig=function(n){var a=n.getWidth(),s=n.getHeight();function l(ox,sx){return function(){updateLabelLinePoints(ox,sx)}}for(var u=0;u<this._labelList.length;u++){var c=this._labelList[u],d=c.label,Ct=d.__hostTarget,ar=c.defaultAttr,en=void 0;isFunction$1(c.layoutOption)?en=c.layoutOption(prepareLayoutCallbackParams(c,Ct)):en=c.layoutOption,en=en||{},c.computedLayoutOption=en;var tn=Math.PI/180;Ct&&Ct.setTextConfig({local:!1,position:en.x!=null||en.y!=null?null:ar.attachedPos,rotation:en.rotate!=null?en.rotate*tn:ar.attachedRot,offset:[en.dx||0,en.dy||0]});var on=!1;if(en.x!=null?(d.x=parsePercent(en.x,a),d.setStyle("x",0),on=!0):(d.x=ar.x,d.setStyle("x",ar.style.x)),en.y!=null?(d.y=parsePercent(en.y,s),d.setStyle("y",0),on=!0):(d.y=ar.y,d.setStyle("y",ar.style.y)),en.labelLinePoints){var cn=Ct.getTextGuideLine();cn&&(cn.setShape({points:en.labelLinePoints}),on=!1)}var dn=labelLayoutInnerStore(d);dn.needsUpdateLabelLine=on,d.rotation=en.rotate!=null?en.rotate*tn:ar.rotation,d.scaleX=ar.scaleX,d.scaleY=ar.scaleY;for(var Cn=0;Cn<LABEL_OPTION_TO_STYLE_KEYS.length;Cn++){var In=LABEL_OPTION_TO_STYLE_KEYS[Cn];d.setStyle(In,en[In]!=null?en[In]:ar.style[In])}if(en.draggable){if(d.draggable=!0,d.cursor="move",Ct){var ix=c.seriesModel;if(c.dataIndex!=null){var ax=c.seriesModel.getData(c.dataType);ix=ax.getItemModel(c.dataIndex)}d.on("drag",l(Ct,ix.getModel("labelLine")))}}else d.off("drag"),d.cursor=ar.cursor}},t.prototype.layout=function(n){var a=n.getWidth(),s=n.getHeight(),l=prepareLayoutList(this._labelList),u=filter(l,function(Ct){return Ct.layoutOption.moveOverlap==="shiftX"}),c=filter(l,function(Ct){return Ct.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,a),shiftLayoutOnY(c,0,s);var d=filter(l,function(Ct){return Ct.layoutOption.hideOverlap});hideOverlap(d)},t.prototype.processLabelsOverall=function(){var n=this;each$f(this._chartViewList,function(a){var s=a.__model,l=a.ignoreLabelLineUpdate,u=s.isAnimationEnabled();a.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var d=!l,Ct=c.getTextContent();!d&&Ct&&(d=labelLayoutInnerStore(Ct).needsUpdateLabelLine),d&&n._updateLabelLine(c,s),u&&n._animateLabels(c,s)})})},t.prototype._updateLabelLine=function(n,a){var s=n.getTextContent(),l=getECData(n),u=l.dataIndex;if(s&&u!=null){var c=a.getData(l.dataType),d=c.getItemModel(u),Ct={},ar=c.getItemVisual(u,"style");if(ar){var en=c.getVisual("drawType");Ct.stroke=ar[en]}var tn=d.getModel("labelLine");setLabelLineStyle(n,getLabelLineStatesModels(d),Ct),updateLabelLinePoints(n,tn)}},t.prototype._animateLabels=function(n,a){var s=n.getTextContent(),l=n.getTextGuideLine();if(s&&(n.forceLabelAnimation||!s.ignore&&!s.invisible&&!n.disableLabelAnimation&&!isElementRemoved(n))){var u=labelLayoutInnerStore(s),c=u.oldLayout,d=getECData(n),Ct=d.dataIndex,ar={x:s.x,y:s.y,rotation:s.rotation},en=a.getData(d.dataType);if(c){s.attr(c);var on=n.prevStates;on&&(indexOf(on,"select")>=0&&s.attr(u.oldLayoutSelect),indexOf(on,"emphasis")>=0&&s.attr(u.oldLayoutEmphasis)),updateProps$1(s,ar,a,Ct)}else if(s.attr(ar),!labelInner(s).valueAnimation){var tn=retrieve2(s.style.opacity,1);s.style.opacity=0,initProps(s,{style:{opacity:tn}},a,Ct)}if(u.oldLayout=ar,s.states.select){var cn=u.oldLayoutSelect={};extendWithKeys(cn,ar,LABEL_LAYOUT_PROPS),extendWithKeys(cn,s.states.select,LABEL_LAYOUT_PROPS)}if(s.states.emphasis){var dn=u.oldLayoutEmphasis={};extendWithKeys(dn,ar,LABEL_LAYOUT_PROPS),extendWithKeys(dn,s.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(s,Ct,en,a,a)}if(l&&!l.ignore&&!l.invisible){var u=labelLineAnimationStore(l),c=u.oldLayout,Cn={points:l.shape.points};c?(l.attr({shape:c}),updateProps$1(l,{shape:Cn},a)):(l.setShape(Cn),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},a)),u.oldLayout=Cn}},t})(),getLabelManager=makeInner();function installLabelLayout(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,s){var l=getLabelManager(a).labelManager;l||(l=getLabelManager(a).labelManager=new LabelManager),l.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(n,a,s){var l=getLabelManager(a).labelManager;s.updatedSeries.forEach(function(u){l.addLabelsOfSeries(a.getViewOfSeriesModel(u))}),l.updateLayoutConfig(a),l.layout(a),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=(function(){function t(){}return t.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},t.prototype.moveTo=function(n,a){this._add("M",n,a)},t.prototype.lineTo=function(n,a){this._add("L",n,a)},t.prototype.bezierCurveTo=function(n,a,s,l,u,c){this._add("C",n,a,s,l,u,c)},t.prototype.quadraticCurveTo=function(n,a,s,l){this._add("Q",n,a,s,l)},t.prototype.arc=function(n,a,s,l,u,c){this.ellipse(n,a,s,s,0,l,u,c)},t.prototype.ellipse=function(n,a,s,l,u,c,d,Ct){var ar=d-c,en=!Ct,tn=Math.abs(ar),on=isAroundZero(tn-PI2$1)||(en?ar>=PI2$1:-ar>=PI2$1),cn=ar>0?ar%PI2$1:ar%PI2$1+PI2$1,dn=!1;on?dn=!0:isAroundZero(tn)?dn=!1:dn=cn>=PI$4==!!en;var Cn=n+s*mathCos(c),In=a+l*mathSin(c);this._start&&this._add("M",Cn,In);var ix=Math.round(u*degree);if(on){var ax=1/this._p,ox=(en?1:-1)*(PI2$1-ax);this._add("A",s,l,ix,1,+en,n+s*mathCos(c+ox),a+l*mathSin(c+ox)),ax>.01&&this._add("A",s,l,ix,0,+en,Cn,In)}else{var sx=n+s*mathCos(d),ux=a+l*mathSin(d);this._add("A",s,l,ix,+dn,+en,sx,ux)}},t.prototype.rect=function(n,a,s,l){this._add("M",n,a),this._add("l",s,0),this._add("l",0,l),this._add("l",-s,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(n,a,s,l,u,c,d,Ct,ar){for(var en=[],tn=this._p,on=1;on<arguments.length;on++){var cn=arguments[on];if(isNaN(cn)){this._invalid=!0;return}en.push(Math.round(cn*tn)/tn)}this._d.push(n+en.join(" ")),this._start=n==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t})(),NONE="none",mathRound=Math.round;function pathHasFill(t){var n=t.fill;return n!=null&&n!==NONE}function pathHasStroke(t){var n=t.stroke;return n!=null&&n!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(t){return"stroke-"+t.toLowerCase()});function mapStyleToAttrs(t,n,a,s){var l=n.opacity==null?1:n.opacity;if(a instanceof ZRImage){t("opacity",l);return}if(pathHasFill(n)){var u=normalizeColor(n.fill);t("fill",u.color);var c=n.fillOpacity!=null?n.fillOpacity*u.opacity*l:u.opacity*l;c<1&&t("fill-opacity",c)}else t("fill",NONE);if(pathHasStroke(n)){var d=normalizeColor(n.stroke);t("stroke",d.color);var Ct=n.strokeNoScale?a.getLineScale():1,ar=Ct?(n.lineWidth||0)/Ct:0,en=n.strokeOpacity!=null?n.strokeOpacity*d.opacity*l:d.opacity*l,tn=n.strokeFirst;if(ar!==1&&t("stroke-width",ar),tn&&t("paint-order",tn?"stroke":"fill"),en<1&&t("stroke-opacity",en),n.lineDash){var on=getLineDash(a),cn=on[0],dn=on[1];cn&&(dn=mathRound(dn||0),t("stroke-dasharray",cn.join(",")),(dn||s)&&t("stroke-dashoffset",dn))}for(var Cn=0;Cn<strokeProps.length;Cn++){var In=strokeProps[Cn];if(n[In]!==DEFAULT_PATH_STYLE[In]){var ix=n[In]||DEFAULT_PATH_STYLE[In];ix&&t(svgStrokeProps[Cn],ix)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(t){return document.createElementNS(SVGNS,t)}function createVNode(t,n,a,s,l){return{tag:t,attrs:a||{},children:s,text:l,key:n}}function createElementOpen(t,n){var a=[];if(n)for(var s in n){var l=n[s],u=s;l!==!1&&(l!==!0&&l!=null&&(u+='="'+l+'"'),a.push(u))}return"<"+t+" "+a.join(" ")+">"}function createElementClose(t){return"</"+t+">"}function vNodeToString(t,n){n=n||{};var a=n.newline?`
`:"";function s(l){var u=l.children,c=l.tag,d=l.attrs,Ct=l.text;return createElementOpen(c,d)+(c!=="style"?encodeHTML(Ct):Ct||"")+(u?""+a+map$1(u,function(ar){return s(ar)}).join(a)+a:"")+createElementClose(c)}return s(t)}function getCssString(t,n,a){a=a||{};var s=a.newline?`
`:"",l=" {"+s,u=s+"}",c=map$1(keys(t),function(Ct){return Ct+l+map$1(keys(t[Ct]),function(ar){return ar+":"+t[Ct][ar]+";"}).join(s)+u}).join(s),d=map$1(keys(n),function(Ct){return"@keyframes "+Ct+l+map$1(keys(n[Ct]),function(ar){return ar+l+map$1(keys(n[Ct][ar]),function(en){var tn=n[Ct][ar][en];return en==="d"&&(tn='path("'+tn+'")'),en+":"+tn+";"}).join(s)+u}).join(s)+u}).join(s);return!c&&!d?"":["<![CDATA[",c,d,"]]>"].join(s)}function createBrushScope(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(t,n,a,s){return createVNode("svg","root",{width:t,height:n,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:s?"0 0 "+t+" "+n:!1},a)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(t,n,a){var s=extend({},t.shape);extend(s,n),t.buildPath(a,s);var l=new SVGPathRebuilder;return l.reset(getPathPrecision(t)),a.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(t,n){var a=n.originX,s=n.originY;(a||s)&&(t[transformOriginKey]=a+"px "+s+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(t,n){var a=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[a]=t,a}function createCompoundPathCSSAnimation(t,n,a){var s=t.shape.paths,l={},u,c;if(each$f(s,function(Ct){var ar=createBrushScope(a.zrId);ar.animation=!0,createCSSAnimation(Ct,{},ar,!0);var en=ar.cssAnims,tn=ar.cssNodes,on=keys(en),cn=on.length;if(cn){c=on[cn-1];var dn=en[c];for(var Cn in dn){var In=dn[Cn];l[Cn]=l[Cn]||{d:""},l[Cn].d+=In.d||""}for(var ix in tn){var ax=tn[ix].animation;ax.indexOf(c)>=0&&(u=ax)}}}),!!u){n.d=!1;var d=addAnimation(l,a);return u.replace(c,d)}}function getEasingFunc(t){return isString$1(t)?EASING_MAP[t]?"cubic-bezier("+EASING_MAP[t]+")":createCubicEasingFunc(t)?t:"":""}function createCSSAnimation(t,n,a,s){var l=t.animators,u=l.length,c=[];if(t instanceof CompoundPath){var d=createCompoundPathCSSAnimation(t,n,a);if(d)c.push(d);else if(!u)return}else if(!u)return;for(var Ct={},ar=0;ar<u;ar++){var en=l[ar],tn=[en.getMaxTime()/1e3+"s"],on=getEasingFunc(en.getClip().easing),cn=en.getDelay();on?tn.push(on):tn.push("linear"),cn&&tn.push(cn/1e3+"s"),en.getLoop()&&tn.push("infinite");var dn=tn.join(" ");Ct[dn]=Ct[dn]||[dn,[]],Ct[dn][1].push(en)}function Cn(ax){var ox=ax[1],sx=ox.length,ux={},cx={},hx={},gx="animation-timing-function";function fx(zx,qx,jx){for(var Hx=zx.getTracks(),Vx=zx.getMaxTime(),nE=0;nE<Hx.length;nE++){var Wx=Hx[nE];if(Wx.needsAnimate()){var tE=Wx.keyframes,lE=Wx.propName;if(jx&&(lE=jx(lE)),lE)for(var iE=0;iE<tE.length;iE++){var Xx=tE[iE],CE=Math.round(Xx.time/Vx*100)+"%",RE=getEasingFunc(Xx.easing),SE=Xx.rawValue;(isString$1(SE)||isNumber(SE))&&(qx[CE]=qx[CE]||{},qx[CE][lE]=Xx.rawValue,RE&&(qx[CE][gx]=RE))}}}}for(var dx=0;dx<sx;dx++){var mx=ox[dx],vx=mx.targetName;vx?vx==="shape"&&fx(mx,cx):!s&&fx(mx,ux)}for(var bx in ux){var xx={};copyTransform(xx,t),extend(xx,ux[bx]);var _x=getSRTTransformString(xx),Ex=ux[bx][gx];hx[bx]=_x?{transform:_x}:{},setTransformOrigin(hx[bx],xx),Ex&&(hx[bx][gx]=Ex)}var Tx,Cx=!0;for(var bx in cx){hx[bx]=hx[bx]||{};var Mx=!Tx,Ex=cx[bx][gx];Mx&&(Tx=new PathProxy);var Ax=Tx.len();Tx.reset(),hx[bx].d=buildPathString(t,cx[bx],Tx);var Nx=Tx.len();if(!Mx&&Ax!==Nx){Cx=!1;break}Ex&&(hx[bx][gx]=Ex)}if(!Cx)for(var bx in hx)delete hx[bx].d;if(!s)for(var dx=0;dx<sx;dx++){var mx=ox[dx],vx=mx.targetName;vx==="style"&&fx(mx,hx,function(Hx){return ANIMATE_STYLE_MAP[Hx]})}for(var Ux=keys(hx),Rx=!0,Ox,dx=1;dx<Ux.length;dx++){var Px=Ux[dx-1],$x=Ux[dx];if(hx[Px][transformOriginKey]!==hx[$x][transformOriginKey]){Rx=!1;break}Ox=hx[Px][transformOriginKey]}if(Rx&&Ox){for(var bx in hx)hx[bx][transformOriginKey]&&delete hx[bx][transformOriginKey];n[transformOriginKey]=Ox}if(filter(Ux,function(zx){return keys(hx[zx]).length>0}).length){var Lx=addAnimation(hx,a);return Lx+" "+ax[0]+" both"}}for(var In in Ct){var d=Cn(Ct[In]);d&&c.push(d)}if(c.length){var ix=a.zrId+"-cls-"+getClassId();a.cssNodes["."+ix]={animation:c.join(",")},n.class=ix}}function createCSSEmphasis(t,n,a){if(!t.ignore)if(t.isSilent()){var s={"pointer-events":"none"};setClassAttribute(s,n,a)}else{var l=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},u=l.fill;if(!u){var c=t.style&&t.style.fill,d=t.states.select&&t.states.select.style&&t.states.select.style.fill,Ct=t.currentStates.indexOf("select")>=0&&d||c;Ct&&(u=liftColor(Ct))}var ar=l.lineWidth;if(ar){var en=!l.strokeNoScale&&t.transform?t.transform[0]:1;ar=ar/en}var s={cursor:"pointer"};u&&(s.fill=u),l.stroke&&(s.stroke=l.stroke),ar&&(s["stroke-width"]=ar),setClassAttribute(s,n,a)}}function setClassAttribute(t,n,a,s){var l=JSON.stringify(t),u=a.cssStyleCache[l];u||(u=a.zrId+"-cls-"+getClassId(),a.cssStyleCache[l]=u,a.cssNodes["."+u+":hover"]=t),n.class=n.class?n.class+" "+u:u}var round$1=Math.round;function isImageLike(t){return t&&isString$1(t.src)}function isCanvasLike(t){return t&&isFunction$1(t.toDataURL)}function setStyleAttrs(t,n,a,s){mapStyleToAttrs(function(l,u){var c=l==="fill"||l==="stroke";c&&isGradient(u)?setGradient(n,t,l,s):c&&isPattern(u)?setPattern(a,t,l,s):t[l]=u,c&&s.ssr&&u==="none"&&(t["pointer-events"]="visible")},n,a,!1),setShadow(a,t,s)}function setMetaData(t,n){var a=getElementSSRData(n);a&&(a.each(function(s,l){s!=null&&(t[(META_DATA_PREFIX+l).toLowerCase()]=s+"")}),n.isSilent()&&(t[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(t){return isAroundZero(t[0]-1)&&isAroundZero(t[1])&&isAroundZero(t[2])&&isAroundZero(t[3]-1)}function noTranslate(t){return isAroundZero(t[4])&&isAroundZero(t[5])}function setTransform(t,n,a){if(n&&!(noTranslate(n)&&noRotateScale(n))){var s=1e4;t.transform=noRotateScale(n)?"translate("+round$1(n[4]*s)/s+" "+round$1(n[5]*s)/s+")":getMatrixStr(n)}}function convertPolyShape(t,n,a){for(var s=t.points,l=[],u=0;u<s.length;u++)l.push(round$1(s[u][0]*a)/a),l.push(round$1(s[u][1]*a)/a);n.points=l.join(" ")}function validatePolyShape(t){return!t.smooth}function createAttrsConvert(t){var n=map$1(t,function(a){return typeof a=="string"?[a,a]:a});return function(a,s,l){for(var u=0;u<n.length;u++){var c=n[u],d=a[c[0]];d!=null&&(s[c[1]]=round$1(d*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(t){for(var n=t.animators,a=0;a<n.length;a++)if(n[a].targetName==="shape")return!0;return!1}function brushSVGPath(t,n){var a=t.style,s=t.shape,l=builtinShapesDef[t.type],u={},c=n.animation,d="path",Ct=t.style.strokePercent,ar=n.compress&&getPathPrecision(t)||4;if(l&&!n.willUpdate&&!(l[1]&&!l[1](s))&&!(c&&hasShapeAnimation(t))&&!(Ct<1)){d=t.type;var en=Math.pow(10,ar);l[0](s,u,en)}else{var tn=!t.path||t.shapeChanged();t.path||t.createPathProxy();var on=t.path;tn&&(on.beginPath(),t.buildPath(on,t.shape),t.pathUpdated());var cn=on.getVersion(),dn=t,Cn=dn.__svgPathBuilder;(dn.__svgPathVersion!==cn||!Cn||Ct!==dn.__svgPathStrokePercent)&&(Cn||(Cn=dn.__svgPathBuilder=new SVGPathRebuilder),Cn.reset(ar),on.rebuildPath(Cn,Ct),Cn.generateStr(),dn.__svgPathVersion=cn,dn.__svgPathStrokePercent=Ct),u.d=Cn.getStr()}return setTransform(u,t.transform),setStyleAttrs(u,a,t,n),setMetaData(u,t),n.animation&&createCSSAnimation(t,u,n),n.emphasis&&createCSSEmphasis(t,u,n),createVNode(d,t.id+"",u)}function brushSVGImage(t,n){var a=t.style,s=a.image;if(s&&!isString$1(s)&&(isImageLike(s)?s=s.src:isCanvasLike(s)&&(s=s.toDataURL())),!!s){var l=a.x||0,u=a.y||0,c=a.width,d=a.height,Ct={href:s,width:c,height:d};return l&&(Ct.x=l),u&&(Ct.y=u),setTransform(Ct,t.transform),setStyleAttrs(Ct,a,t,n),setMetaData(Ct,t),n.animation&&createCSSAnimation(t,Ct,n),createVNode("image",t.id+"",Ct)}}function brushSVGTSpan(t,n){var a=t.style,s=a.text;if(s!=null&&(s+=""),!(!s||isNaN(a.x)||isNaN(a.y))){var l=a.font||DEFAULT_FONT,u=a.x||0,c=adjustTextY$1(a.y||0,getLineHeight(l),a.textBaseline),d=TEXT_ALIGN_TO_ANCHOR[a.textAlign]||a.textAlign,Ct={"dominant-baseline":"central","text-anchor":d};if(hasSeparateFont(a)){var ar="",en=a.fontStyle,tn=parseFontSize(a.fontSize);if(!parseFloat(tn))return;var on=a.fontFamily||DEFAULT_FONT_FAMILY,cn=a.fontWeight;ar+="font-size:"+tn+";font-family:"+on+";",en&&en!=="normal"&&(ar+="font-style:"+en+";"),cn&&cn!=="normal"&&(ar+="font-weight:"+cn+";"),Ct.style=ar}else Ct.style="font: "+l;return s.match(/\s/)&&(Ct["xml:space"]="preserve"),u&&(Ct.x=u),c&&(Ct.y=c),setTransform(Ct,t.transform),setStyleAttrs(Ct,a,t,n),setMetaData(Ct,t),n.animation&&createCSSAnimation(t,Ct,n),createVNode("text",t.id+"",Ct,void 0,s)}}function brush(t,n){if(t instanceof Path)return brushSVGPath(t,n);if(t instanceof ZRImage)return brushSVGImage(t,n);if(t instanceof TSpan)return brushSVGTSpan(t,n)}function setShadow(t,n,a){var s=t.style;if(hasShadow(s)){var l=getShadowKey(t),u=a.shadowCache,c=u[l];if(!c){var d=t.getGlobalScale(),Ct=d[0],ar=d[1];if(!Ct||!ar)return;var en=s.shadowOffsetX||0,tn=s.shadowOffsetY||0,on=s.shadowBlur,cn=normalizeColor(s.shadowColor),dn=cn.opacity,Cn=cn.color,In=on/2/Ct,ix=on/2/ar,ax=In+" "+ix;c=a.zrId+"-s"+a.shadowIdx++,a.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:en/Ct,dy:tn/ar,stdDeviation:ax,"flood-color":Cn,"flood-opacity":dn})]),u[l]=c}n.filter=getIdURL(c)}}function setGradient(t,n,a,s){var l=t[a],u,c={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))u="linearGradient",c.x1=l.x,c.y1=l.y,c.x2=l.x2,c.y2=l.y2;else if(isRadialGradient(l))u="radialGradient",c.cx=retrieve2(l.x,.5),c.cy=retrieve2(l.y,.5),c.r=retrieve2(l.r,.5);else return;for(var d=l.colorStops,Ct=[],ar=0,en=d.length;ar<en;++ar){var tn=round4(d[ar].offset)*100+"%",on=d[ar].color,cn=normalizeColor(on),dn=cn.color,Cn=cn.opacity,In={offset:tn};In["stop-color"]=dn,Cn<1&&(In["stop-opacity"]=Cn),Ct.push(createVNode("stop",ar+"",In))}var ix=createVNode(u,"",c,Ct),ax=vNodeToString(ix),ox=s.gradientCache,sx=ox[ax];sx||(sx=s.zrId+"-g"+s.gradientIdx++,ox[ax]=sx,c.id=sx,s.defs[sx]=createVNode(u,sx,c,Ct)),n[a]=getIdURL(sx)}function setPattern(t,n,a,s){var l=t.style[a],u=t.getBoundingRect(),c={},d=l.repeat,Ct=d==="no-repeat",ar=d==="repeat-x",en=d==="repeat-y",tn;if(isImagePattern(l)){var on=l.imageWidth,cn=l.imageHeight,dn=void 0,Cn=l.image;if(isString$1(Cn)?dn=Cn:isImageLike(Cn)?dn=Cn.src:isCanvasLike(Cn)&&(dn=Cn.toDataURL()),typeof Image>"u"){var In="Image width/height must been given explictly in svg-ssr renderer.";assert(on,In),assert(cn,In)}else if(on==null||cn==null){var ix=function(dx,mx){if(dx){var vx=dx.elm,bx=on||mx.width,xx=cn||mx.height;dx.tag==="pattern"&&(ar?(xx=1,bx/=u.width):en&&(bx=1,xx/=u.height)),dx.attrs.width=bx,dx.attrs.height=xx,vx&&(vx.setAttribute("width",bx),vx.setAttribute("height",xx))}},ax=createOrUpdateImage(dn,null,t,function(dx){Ct||ix(cx,dx),ix(tn,dx)});ax&&ax.width&&ax.height&&(on=on||ax.width,cn=cn||ax.height)}tn=createVNode("image","img",{href:dn,width:on,height:cn}),c.width=on,c.height=cn}else l.svgElement&&(tn=clone$4(l.svgElement),c.width=l.svgWidth,c.height=l.svgHeight);if(tn){var ox,sx;Ct?ox=sx=1:ar?(sx=1,ox=c.width/u.width):en?(ox=1,sx=c.height/u.height):c.patternUnits="userSpaceOnUse",ox!=null&&!isNaN(ox)&&(c.width=ox),sx!=null&&!isNaN(sx)&&(c.height=sx);var ux=getSRTTransformString(l);ux&&(c.patternTransform=ux);var cx=createVNode("pattern","",c,[tn]),hx=vNodeToString(cx),gx=s.patternCache,fx=gx[hx];fx||(fx=s.zrId+"-p"+s.patternIdx++,gx[hx]=fx,c.id=fx,cx=s.defs[fx]=createVNode("pattern",fx,c,[tn])),n[a]=getIdURL(fx)}}function setClipPath(t,n,a){var s=a.clipPathCache,l=a.defs,u=s[t.id];if(!u){u=a.zrId+"-c"+a.clipPathIdx++;var c={id:u};s[t.id]=u,l[u]=createVNode("clipPath",u,c,[brushSVGPath(t,a)])}n["clip-path"]=getIdURL(u)}function createTextNode(t){return document.createTextNode(t)}function insertBefore(t,n,a){t.insertBefore(n,a)}function removeChild(t,n){t.removeChild(n)}function appendChild(t,n){t.appendChild(n)}function parentNode(t){return t.parentNode}function nextSibling(t){return t.nextSibling}function setTextContent(t,n){t.textContent=n}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(t){return t===void 0}function isDef(t){return t!==void 0}function createKeyToOldIdx(t,n,a){for(var s={},l=n;l<=a;++l){var u=t[l].key;u!==void 0&&(s[u]=l)}return s}function sameVnode(t,n){var a=t.key===n.key,s=t.tag===n.tag;return s&&a}function createElm(t){var n,a=t.children,s=t.tag;if(isDef(s)){var l=t.elm=createElement(s);if(updateAttrs(emptyNode,t),isArray$1(a))for(n=0;n<a.length;++n){var u=a[n];u!=null&&appendChild(l,createElm(u))}else isDef(t.text)&&!isObject$3(t.text)&&appendChild(l,createTextNode(t.text))}else t.elm=createTextNode(t.text);return t.elm}function addVnodes(t,n,a,s,l){for(;s<=l;++s){var u=a[s];u!=null&&insertBefore(t,createElm(u),n)}}function removeVnodes(t,n,a,s){for(;a<=s;++a){var l=n[a];if(l!=null)if(isDef(l.tag)){var u=parentNode(l.elm);removeChild(u,l.elm)}else removeChild(t,l.elm)}}function updateAttrs(t,n){var a,s=n.elm,l=t&&t.attrs||{},u=n.attrs||{};if(l!==u){for(a in u){var c=u[a],d=l[a];d!==c&&(c===!0?s.setAttribute(a,""):c===!1?s.removeAttribute(a):a==="style"?s.style.cssText=c:a.charCodeAt(0)!==xChar?s.setAttribute(a,c):a==="xmlns:xlink"||a==="xmlns"?s.setAttributeNS(XMLNS,a,c):a.charCodeAt(3)===colonChar?s.setAttributeNS(XML_NAMESPACE,a,c):a.charCodeAt(5)===colonChar?s.setAttributeNS(XLINKNS,a,c):s.setAttribute(a,c))}for(a in l)a in u||s.removeAttribute(a)}}function updateChildren(t,n,a){for(var s=0,l=0,u=n.length-1,c=n[0],d=n[u],Ct=a.length-1,ar=a[0],en=a[Ct],tn,on,cn,dn;s<=u&&l<=Ct;)c==null?c=n[++s]:d==null?d=n[--u]:ar==null?ar=a[++l]:en==null?en=a[--Ct]:sameVnode(c,ar)?(patchVnode(c,ar),c=n[++s],ar=a[++l]):sameVnode(d,en)?(patchVnode(d,en),d=n[--u],en=a[--Ct]):sameVnode(c,en)?(patchVnode(c,en),insertBefore(t,c.elm,nextSibling(d.elm)),c=n[++s],en=a[--Ct]):sameVnode(d,ar)?(patchVnode(d,ar),insertBefore(t,d.elm,c.elm),d=n[--u],ar=a[++l]):(isUndef(tn)&&(tn=createKeyToOldIdx(n,s,u)),on=tn[ar.key],isUndef(on)?insertBefore(t,createElm(ar),c.elm):(cn=n[on],cn.tag!==ar.tag?insertBefore(t,createElm(ar),c.elm):(patchVnode(cn,ar),n[on]=void 0,insertBefore(t,cn.elm,c.elm))),ar=a[++l]);(s<=u||l<=Ct)&&(s>u?(dn=a[Ct+1]==null?null:a[Ct+1].elm,addVnodes(t,dn,a,l,Ct)):removeVnodes(t,n,s,u))}function patchVnode(t,n){var a=n.elm=t.elm,s=t.children,l=n.children;t!==n&&(updateAttrs(t,n),isUndef(n.text)?isDef(s)&&isDef(l)?s!==l&&updateChildren(a,s,l):isDef(l)?(isDef(t.text)&&setTextContent(a,""),addVnodes(a,null,l,0,l.length-1)):isDef(s)?removeVnodes(a,s,0,s.length-1):isDef(t.text)&&setTextContent(a,""):t.text!==n.text&&(isDef(s)&&removeVnodes(a,s,0,s.length-1),setTextContent(a,n.text)))}function patch(t,n){if(sameVnode(t,n))patchVnode(t,n);else{var a=t.elm,s=parentNode(a);createElm(n),s!==null&&(insertBefore(s,n.elm,nextSibling(a)),removeVnodes(s,[t],0,0))}return n}var svgId=0,SVGPainter=(function(){function t(n,a,s){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=a,this._opts=s=extend({},s),this.root=n,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(s.width,s.height),n&&!s.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(u),n.appendChild(l)}this.resize(s.width,s.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,n),this._oldVNode=n}},t.prototype.renderOneToVNode=function(n){return brush(n,createBrushScope(this._id))},t.prototype.renderToVNode=function(n){n=n||{};var a=this.storage.getDisplayList(!0),s=this._width,l=this._height,u=createBrushScope(this._id);u.animation=n.animation,u.willUpdate=n.willUpdate,u.compress=n.compress,u.emphasis=n.emphasis,u.ssr=this._opts.ssr;var c=[],d=this._bgVNode=createBackgroundVNode(s,l,this._backgroundColor,u);d&&c.push(d);var Ct=n.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(a,u,Ct?Ct.children:c),Ct&&c.push(Ct);var ar=map$1(keys(u.defs),function(on){return u.defs[on]});if(ar.length&&c.push(createVNode("defs","defs",{},ar)),n.animation){var en=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if(en){var tn=createVNode("style","stl",{},[],en);c.push(tn)}}return createSVGVNode(s,l,c,n.useViewBox)},t.prototype.renderToString=function(n){return n=n||{},vNodeToString(this.renderToVNode({animation:retrieve2(n.cssAnimation,!0),emphasis:retrieve2(n.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(n.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(n,a,s){for(var l=n.length,u=[],c=0,d,Ct,ar=0,en=0;en<l;en++){var tn=n[en];if(!tn.invisible){var on=tn.__clipPaths,cn=on&&on.length||0,dn=Ct&&Ct.length||0,Cn=void 0;for(Cn=Math.max(cn-1,dn-1);Cn>=0&&!(on&&Ct&&on[Cn]===Ct[Cn]);Cn--);for(var In=dn-1;In>Cn;In--)c--,d=u[c-1];for(var ix=Cn+1;ix<cn;ix++){var ax={};setClipPath(on[ix],ax,a);var ox=createVNode("g","clip-g-"+ar++,ax,[]);(d?d.children:s).push(ox),u[c++]=ox,d=ox}Ct=on;var sx=brush(tn,a);sx&&(d?d.children:s).push(sx)}}},t.prototype.resize=function(n,a){var s=this._opts,l=this.root,u=this._viewport;if(n!=null&&(s.width=n),a!=null&&(s.height=a),l&&u&&(u.style.display="none",n=getSize$1(l,0,s),a=getSize$1(l,1,s),u.style.display=""),this._width!==n||this._height!==a){if(this._width=n,this._height=a,u){var c=u.style;c.width=n+"px",c.height=a+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var d=this._svgDom;d&&(d.setAttribute("width",n),d.setAttribute("height",a));var Ct=this._bgVNode&&this._bgVNode.elm;Ct&&(Ct.setAttribute("width",n),Ct.setAttribute("height",a))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(n){var a=this.renderToString(),s="data:image/svg+xml;";return n?(a=encodeBase64(a),a&&s+"base64,"+a):s+"charset=UTF-8,"+encodeURIComponent(a)},t})();function createMethodNotSupport(t){return function(){}}function createBackgroundVNode(t,n,a,s){var l;if(a&&a!=="none")if(l=createVNode("rect","bg",{width:t,height:n,x:"0",y:"0"}),isGradient(a))setGradient({fill:a},l.attrs,"fill",s);else if(isPattern(a))setPattern({style:{fill:a},dirty:noop,getBoundingRect:function(){return{width:t,height:n}}},l.attrs,"fill",s);else{var u=normalizeColor(a),c=u.color,d=u.opacity;l.attrs.fill=c,d<1&&(l.attrs["fill-opacity"]=d)}return l}function install$S(t){t.registerPainter("svg",SVGPainter)}function createDom(t,n,a){var s=platformApi.createCanvas(),l=n.getWidth(),u=n.getHeight(),c=s.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=l+"px",c.height=u+"px",s.setAttribute("data-zr-dom-id",t)),s.width=l*a,s.height=u*a,s}var Layer=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var c;l=l||devicePixelRatio,typeof a=="string"?c=createDom(a,s,l):isObject$3(a)&&(c=a,a=c.id),u.id=a,u.dom=c;var d=c.style;return d&&(disableUserSelect(c),c.onselectstart=function(){return!1},d.padding="0",d.margin="0",d.borderWidth="0"),u.painter=s,u.dpr=l,u}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},n.prototype.createRepaintRects=function(a,s,l,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],d=this.maxRepaintRectCount,Ct=!1,ar=new BoundingRect(0,0,0,0);function en(ax){if(!(!ax.isFinite()||ax.isZero()))if(c.length===0){var ox=new BoundingRect(0,0,0,0);ox.copy(ax),c.push(ox)}else{for(var sx=!1,ux=1/0,cx=0,hx=0;hx<c.length;++hx){var gx=c[hx];if(gx.intersect(ax)){var fx=new BoundingRect(0,0,0,0);fx.copy(gx),fx.union(ax),c[hx]=fx,sx=!0;break}else if(Ct){ar.copy(ax),ar.union(gx);var dx=ax.width*ax.height,mx=gx.width*gx.height,vx=ar.width*ar.height,bx=vx-dx-mx;bx<ux&&(ux=bx,cx=hx)}}if(Ct&&(c[cx].union(ax),sx=!0),!sx){var ox=new BoundingRect(0,0,0,0);ox.copy(ax),c.push(ox)}Ct||(Ct=c.length>=d)}}for(var tn=this.__startIndex;tn<this.__endIndex;++tn){var on=a[tn];if(on){var cn=on.shouldBePainted(l,u,!0,!0),dn=on.__isRendered&&(on.__dirty&REDRAW_BIT||!cn)?on.getPrevPaintRect():null;dn&&en(dn);var Cn=cn&&(on.__dirty&REDRAW_BIT||!on.__isRendered)?on.getPaintRect():null;Cn&&en(Cn)}}for(var tn=this.__prevStartIndex;tn<this.__prevEndIndex;++tn){var on=s[tn],cn=on&&on.shouldBePainted(l,u,!0,!0);if(on&&(!cn||!on.__zr)&&on.__isRendered){var dn=on.getPrevPaintRect();dn&&en(dn)}}var In;do{In=!1;for(var tn=0;tn<c.length;){if(c[tn].isZero()){c.splice(tn,1);continue}for(var ix=tn+1;ix<c.length;)c[tn].intersect(c[ix])?(In=!0,c[tn].union(c[ix]),c.splice(ix,1)):ix++;tn++}}while(In);return this._paintRects=c,c},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(a,s){var l=this.dpr,u=this.dom,c=u.style,d=this.domBack;c&&(c.width=a+"px",c.height=s+"px"),u.width=a*l,u.height=s*l,d&&(d.width=a*l,d.height=s*l,l!==1&&this.ctxBack.scale(l,l))},n.prototype.clear=function(a,s,l){var u=this.dom,c=this.ctx,d=u.width,Ct=u.height;s=s||this.clearColor;var ar=this.motionBlur&&!a,en=this.lastFrameAlpha,tn=this.dpr,on=this;ar&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,d/tn,Ct/tn));var cn=this.domBack;function dn(Cn,In,ix,ax){if(c.clearRect(Cn,In,ix,ax),s&&s!=="transparent"){var ox=void 0;if(isGradientObject(s)){var sx=s.global||s.__width===ix&&s.__height===ax;ox=sx&&s.__canvasGradient||getCanvasGradient(c,s,{x:0,y:0,width:ix,height:ax}),s.__canvasGradient=ox,s.__width=ix,s.__height=ax}else isImagePatternObject(s)&&(s.scaleX=s.scaleX||tn,s.scaleY=s.scaleY||tn,ox=createCanvasPattern(c,s,{dirty:function(){on.setUnpainted(),on.painter.refresh()}}));c.save(),c.fillStyle=ox||s,c.fillRect(Cn,In,ix,ax),c.restore()}ar&&(c.save(),c.globalAlpha=en,c.drawImage(cn,Cn,In,ix,ax),c.restore())}!l||ar?dn(0,0,d,Ct):l.length&&each$f(l,function(Cn){dn(Cn.x*tn,Cn.y*tn,Cn.width*tn,Cn.height*tn)})},n})(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function createRoot(t,n){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+t+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var CanvasPainter=(function(){function t(n,a,s,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=s=extend({},s||{}),this.dpr=s.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=n;var c=n.style;c&&(disableUserSelect(n),n.innerHTML=""),this.storage=a;var d=this._zlevelList;this._prevDisplayList=[];var Ct=this._layers;if(u){var en=n,tn=en.width,on=en.height;s.width!=null&&(tn=s.width),s.height!=null&&(on=s.height),this.dpr=s.devicePixelRatio||1,en.width=tn*this.dpr,en.height=on*this.dpr,this._width=tn,this._height=on;var cn=new Layer(en,this,this.dpr);cn.__builtin__=!0,cn.initContext(),Ct[CANVAS_ZLEVEL]=cn,cn.zlevel=CANVAS_ZLEVEL,d.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize$1(n,0,s),this._height=getSize$1(n,1,s);var ar=this._domRoot=createRoot(this._width,this._height);n.appendChild(ar)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.refresh=function(n){var a=this.storage.getDisplayList(!0),s=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,s,n,this._redrawId);for(var u=0;u<l.length;u++){var c=l[u],d=this._layers[c];if(!d.__builtin__&&d.refresh){var Ct=u===0?this._backgroundColor:null;d.refresh(Ct)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(n){var a=n.length,s=this._hoverlayer;if(s&&s.clear(),!!a){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,c=0;c<a;c++){var d=n[c];d.__inHover&&(s||(s=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=s.ctx,u.save()),brush$1(u,d,l,c===a-1))}u&&u.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},t.prototype.paintOne=function(n,a){brushSingle(n,a)},t.prototype._paintList=function(n,a,s,l){if(this._redrawId===l){s=s||!1,this._updateLayerStatus(n);var u=this._doPaintList(n,a,s),c=u.finished,d=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),d&&this._paintHoverList(n),c)this.eachLayer(function(ar){ar.afterBrush&&ar.afterBrush()});else{var Ct=this;requestAnimationFrame$1(function(){Ct._paintList(n,a,s,l)})}}},t.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,a=this._domRoot.width,s=this._domRoot.height;n.clearRect(0,0,a,s),this.eachBuiltinLayer(function(l){l.virtual&&n.drawImage(l.dom,0,0,a,s)})},t.prototype._doPaintList=function(n,a,s){for(var l=this,u=[],c=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var Ct=this._zlevelList[d],ar=this._layers[Ct];ar.__builtin__&&ar!==this._hoverlayer&&(ar.__dirty||s)&&u.push(ar)}for(var en=!0,tn=!1,on=function(Cn){var In=u[Cn],ix=In.ctx,ax=c&&In.createRepaintRects(n,a,cn._width,cn._height),ox=s?In.__startIndex:In.__drawIndex,sx=!s&&In.incremental&&Date.now,ux=sx&&Date.now(),cx=In.zlevel===cn._zlevelList[0]?cn._backgroundColor:null;if(In.__startIndex===In.__endIndex)In.clear(!1,cx,ax);else if(ox===In.__startIndex){var hx=n[ox];(!hx.incremental||!hx.notClear||s)&&In.clear(!1,cx,ax)}ox===-1&&(console.error("For some unknown reason. drawIndex is -1"),ox=In.__startIndex);var gx,fx=function(bx){var xx={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(gx=ox;gx<In.__endIndex;gx++){var _x=n[gx];if(_x.__inHover&&(tn=!0),l._doPaintEl(_x,In,c,bx,xx,gx===In.__endIndex-1),sx){var Ex=Date.now()-ux;if(Ex>15)break}}xx.prevElClipPaths&&ix.restore()};if(ax)if(ax.length===0)gx=In.__endIndex;else for(var dx=cn.dpr,mx=0;mx<ax.length;++mx){var vx=ax[mx];ix.save(),ix.beginPath(),ix.rect(vx.x*dx,vx.y*dx,vx.width*dx,vx.height*dx),ix.clip(),fx(vx),ix.restore()}else ix.save(),fx(),ix.restore();In.__drawIndex=gx,In.__drawIndex<In.__endIndex&&(en=!1)},cn=this,dn=0;dn<u.length;dn++)on(dn);return env.wxa&&each$f(this._layers,function(Cn){Cn&&Cn.ctx&&Cn.ctx.draw&&Cn.ctx.draw()}),{finished:en,needsRefreshHover:tn}},t.prototype._doPaintEl=function(n,a,s,l,u,c){var d=a.ctx;if(s){var Ct=n.getPaintRect();(!l||Ct&&Ct.intersect(l))&&(brush$1(d,n,u,c),n.setPrevPaintRect(Ct))}else brush$1(d,n,u,c)},t.prototype.getLayer=function(n,a){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var s=this._layers[n];return s||(s=new Layer("zr_"+n,this,this.dpr),s.zlevel=n,s.__builtin__=!0,this._layerConfig[n]?merge(s,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(s,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),a&&(s.virtual=a),this.insertLayer(n,s),s.initContext()),s},t.prototype.insertLayer=function(n,a){var s=this._layers,l=this._zlevelList,u=l.length,c=this._domRoot,d=null,Ct=-1;if(!s[n]&&isLayerValid(a)){if(u>0&&n>l[0]){for(Ct=0;Ct<u-1&&!(l[Ct]<n&&l[Ct+1]>n);Ct++);d=s[l[Ct]]}if(l.splice(Ct+1,0,n),s[n]=a,!a.virtual)if(d){var ar=d.dom;ar.nextSibling?c.insertBefore(a.dom,ar.nextSibling):c.appendChild(a.dom)}else c.firstChild?c.insertBefore(a.dom,c.firstChild):c.appendChild(a.dom);a.painter||(a.painter=this)}},t.prototype.eachLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l];n.call(a,this._layers[u],u)}},t.prototype.eachBuiltinLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l],c=this._layers[u];c.__builtin__&&n.call(a,c,u)}},t.prototype.eachOtherLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l],c=this._layers[u];c.__builtin__||n.call(a,c,u)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(tn,on){tn.__dirty=tn.__used=!1});function a(tn){u&&(u.__endIndex!==tn&&(u.__dirty=!0),u.__endIndex=tn)}if(this._singleCanvas)for(var s=1;s<n.length;s++){var l=n[s];if(l.zlevel!==n[s-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var u=null,c=0,d,Ct;for(Ct=0;Ct<n.length;Ct++){var l=n[Ct],ar=l.zlevel,en=void 0;d!==ar&&(d=ar,c=0),l.incremental?(en=this.getLayer(ar+INCREMENTAL_INC,this._needsManuallyCompositing),en.incremental=!0,c=1):en=this.getLayer(ar+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),en.__builtin__||logError("ZLevel "+ar+" has been used by unkown layer "+en.id),en!==u&&(en.__used=!0,en.__startIndex!==Ct&&(en.__dirty=!0),en.__startIndex=Ct,en.incremental?en.__drawIndex=-1:en.__drawIndex=Ct,a(Ct),u=en),l.__dirty&REDRAW_BIT&&!l.__inHover&&(en.__dirty=!0,en.incremental&&en.__drawIndex<0&&(en.__drawIndex=Ct))}a(Ct),this.eachBuiltinLayer(function(tn,on){!tn.__used&&tn.getElementCount()>0&&(tn.__dirty=!0,tn.__startIndex=tn.__endIndex=tn.__drawIndex=0),tn.__dirty&&tn.__drawIndex<0&&(tn.__drawIndex=tn.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(n){n.clear()},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$f(this._layers,function(a){a.setUnpainted()})},t.prototype.configLayer=function(n,a){if(a){var s=this._layerConfig;s[n]?merge(s[n],a,!0):s[n]=a;for(var l=0;l<this._zlevelList.length;l++){var u=this._zlevelList[l];if(u===n||u===n+EL_AFTER_INCREMENTAL_INC){var c=this._layers[u];merge(c,s[n],!0)}}}},t.prototype.delLayer=function(n){var a=this._layers,s=this._zlevelList,l=a[n];l&&(l.dom.parentNode.removeChild(l.dom),delete a[n],s.splice(indexOf(s,n),1))},t.prototype.resize=function(n,a){if(this._domRoot.style){var s=this._domRoot;s.style.display="none";var l=this._opts,u=this.root;if(n!=null&&(l.width=n),a!=null&&(l.height=a),n=getSize$1(u,0,l),a=getSize$1(u,1,l),s.style.display="",this._width!==n||a!==this._height){s.style.width=n+"px",s.style.height=a+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(n,a);this.refresh(!0)}this._width=n,this._height=a}else{if(n==null||a==null)return;this._width=n,this._height=a,this.getLayer(CANVAS_ZLEVEL).resize(n,a)}return this},t.prototype.clearLayer=function(n){var a=this._layers[n];a&&a.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var a=new Layer("image",this,n.pixelRatio||this.dpr);a.initContext(),a.clear(!1,n.backgroundColor||this._backgroundColor);var s=a.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var l=a.dom.width,u=a.dom.height;this.eachLayer(function(tn){tn.__builtin__?s.drawImage(tn.dom,0,0,l,u):tn.renderToCanvas&&(s.save(),tn.renderToCanvas(s),s.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},d=this.storage.getDisplayList(!0),Ct=0,ar=d.length;Ct<ar;Ct++){var en=d[Ct];brush$1(s,en,c,Ct===ar-1)}return a.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t})();function install$R(t){t.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(a){var s=new Group$3,l=createSymbol$1("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);s.add(l),l.setStyle(a.lineStyle);var u=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),d=u==="none"?"circle":u,Ct=a.itemHeight*.8,ar=createSymbol$1(d,(a.itemWidth-Ct)/2,(a.itemHeight-Ct)/2,Ct,Ct,a.itemStyle.fill);s.add(ar),ar.setStyle(a.itemStyle);var en=a.iconRotate==="inherit"?c:a.iconRotate||0;return ar.rotation=en*Math.PI/180,ar.setOrigin([a.itemWidth/2,a.itemHeight/2]),d.indexOf("empty")>-1&&(ar.style.stroke=ar.style.fill,ar.style.fill="#fff",ar.style.lineWidth=2),s},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n})(SeriesModel);function getDefaultLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel"),s=a.length;if(s===1){var l=retrieveRawValue(t,n,a[0]);return l!=null?l+"":null}else if(s){for(var u=[],c=0;c<a.length;c++)u.push(retrieveRawValue(t,n,a[c]));return u.join(" ")}}function getDefaultInterpolatedLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel");if(!isArray$1(n))return n+"";for(var s=[],l=0;l<a.length;l++){var u=t.getDimensionIndex(a[l]);u>=0&&s.push(n[u])}return s.join(" ")}var Symbol$1=(function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this)||this;return c.updateData(a,s,l,u),c}return n.prototype._createSymbol=function(a,s,l,u,c){this.removeAll();var d=createSymbol$1(a,-1,-1,2,2,null,c);d.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),d.drift=driftSymbol,this._symbolType=a,this.add(d)},n.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(a,s){var l=this.childAt(0);l.zlevel=a,l.z=s},n.prototype.setDraggable=function(a,s){var l=this.childAt(0);l.draggable=a,l.cursor=!s&&a?"move":l.cursor},n.prototype.updateData=function(a,s,l,u){this.silent=!1;var c=a.getItemVisual(s,"symbol")||"circle",d=a.hostModel,Ct=n.getSymbolSize(a,s),ar=c!==this._symbolType,en=u&&u.disableAnimation;if(ar){var tn=a.getItemVisual(s,"symbolKeepAspect");this._createSymbol(c,a,s,Ct,tn)}else{var on=this.childAt(0);on.silent=!1;var cn={scaleX:Ct[0]/2,scaleY:Ct[1]/2};en?on.attr(cn):updateProps$1(on,cn,d,s),saveOldStyle(on)}if(this._updateCommon(a,s,Ct,l,u),ar){var on=this.childAt(0);if(!en){var cn={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:on.style.opacity}};on.scaleX=on.scaleY=0,on.style.opacity=0,initProps(on,cn,d,s)}}en&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(a,s,l,u,c){var d=this.childAt(0),Ct=a.hostModel,ar,en,tn,on,cn,dn,Cn,In,ix;if(u&&(ar=u.emphasisItemStyle,en=u.blurItemStyle,tn=u.selectItemStyle,on=u.focus,cn=u.blurScope,Cn=u.labelStatesModels,In=u.hoverScale,ix=u.cursorStyle,dn=u.emphasisDisabled),!u||a.hasItemOption){var ax=u&&u.itemModel?u.itemModel:a.getItemModel(s),ox=ax.getModel("emphasis");ar=ox.getModel("itemStyle").getItemStyle(),tn=ax.getModel(["select","itemStyle"]).getItemStyle(),en=ax.getModel(["blur","itemStyle"]).getItemStyle(),on=ox.get("focus"),cn=ox.get("blurScope"),dn=ox.get("disabled"),Cn=getLabelStatesModels(ax),In=ox.getShallow("scale"),ix=ax.getShallow("cursor")}var sx=a.getItemVisual(s,"symbolRotate");d.attr("rotation",(sx||0)*Math.PI/180||0);var ux=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),l);ux&&(d.x=ux[0],d.y=ux[1]),ix&&d.attr("cursor",ix);var cx=a.getItemVisual(s,"style"),hx=cx.fill;if(d instanceof ZRImage){var gx=d.style;d.useStyle(extend({image:gx.image,x:gx.x,y:gx.y,width:gx.width,height:gx.height},cx))}else d.__isEmptyBrush?d.useStyle(extend({},cx)):d.useStyle(cx),d.style.decal=null,d.setColor(hx,c&&c.symbolInnerColor),d.style.strokeNoScale=!0;var fx=a.getItemVisual(s,"liftZ"),dx=this._z2;fx!=null?dx==null&&(this._z2=d.z2,d.z2+=fx):dx!=null&&(d.z2=dx,this._z2=null);var mx=c&&c.useNameLabel;setLabelStyle(d,Cn,{labelFetcher:Ct,labelDataIndex:s,defaultText:vx,inheritColor:hx,defaultOpacity:cx.opacity});function vx(_x){return mx?a.getName(_x):getDefaultLabel(a,_x)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var bx=d.ensureState("emphasis");bx.style=ar,d.ensureState("select").style=tn,d.ensureState("blur").style=en;var xx=In==null||In===!0?Math.max(1.1,3/this._sizeY):isFinite(In)&&In>0?+In:1;bx.scaleX=this._sizeX*xx,bx.scaleY=this._sizeY*xx,this.setSymbolScale(1),toggleHoverEmphasis(this,on,cn,dn)},n.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},n.prototype.fadeOut=function(a,s,l){var u=this.childAt(0),c=getECData(this).dataIndex,d=l&&l.animation;if(this.silent=u.silent=!0,l&&l.fadeLabel){var Ct=u.getTextContent();Ct&&removeElement(Ct,{style:{opacity:0}},s,{dataIndex:c,removeOpt:d,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:c,cb:a,removeOpt:d})},n.getSymbolSize=function(a,s){return normalizeSymbolSize(a.getItemVisual(s,"symbolSize"))},n})(Group$3);function driftSymbol(t,n){this.parent.drift(t,n)}function symbolNeedsDraw$1(t,n,a,s){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(s.isIgnore&&s.isIgnore(a))&&!(s.clipShape&&!s.clipShape.contain(n[0],n[1]))&&t.getItemVisual(a,"symbol")!=="none"}function normalizeUpdateOpt(t){return t!=null&&!isObject$3(t)&&(t={isIgnore:t}),t||{}}function makeSeriesScope$2(t){var n=t.hostModel,a=n.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=(function(){function t(n){this.group=new Group$3,this._SymbolCtor=n||Symbol$1}return t.prototype.updateData=function(n,a){this._progressiveEls=null,a=normalizeUpdateOpt(a);var s=this.group,l=n.hostModel,u=this._data,c=this._SymbolCtor,d=a.disableAnimation,Ct=makeSeriesScope$2(n),ar={disableAnimation:d},en=a.getSymbolPoint||function(tn){return n.getItemLayout(tn)};u||s.removeAll(),n.diff(u).add(function(tn){var on=en(tn);if(symbolNeedsDraw$1(n,on,tn,a)){var cn=new c(n,tn,Ct,ar);cn.setPosition(on),n.setItemGraphicEl(tn,cn),s.add(cn)}}).update(function(tn,on){var cn=u.getItemGraphicEl(on),dn=en(tn);if(!symbolNeedsDraw$1(n,dn,tn,a)){s.remove(cn);return}var Cn=n.getItemVisual(tn,"symbol")||"circle",In=cn&&cn.getSymbolType&&cn.getSymbolType();if(!cn||In&&In!==Cn)s.remove(cn),cn=new c(n,tn,Ct,ar),cn.setPosition(dn);else{cn.updateData(n,tn,Ct,ar);var ix={x:dn[0],y:dn[1]};d?cn.attr(ix):updateProps$1(cn,ix,l)}s.add(cn),n.setItemGraphicEl(tn,cn)}).remove(function(tn){var on=u.getItemGraphicEl(tn);on&&on.fadeOut(function(){s.remove(on)},l)}).execute(),this._getSymbolPoint=en,this._data=n},t.prototype.updateLayout=function(){var n=this,a=this._data;a&&a.eachItemGraphicEl(function(s,l){var u=n._getSymbolPoint(l);s.setPosition(u),s.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$2(n),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a,s){this._progressiveEls=[],s=normalizeUpdateOpt(s);function l(Ct){Ct.isGroup||(Ct.incremental=!0,Ct.ensureState("emphasis").hoverLayer=!0)}for(var u=n.start;u<n.end;u++){var c=a.getItemLayout(u);if(symbolNeedsDraw$1(a,c,u,s)){var d=new this._SymbolCtor(a,u,this._seriesScope);d.traverse(l),d.setPosition(c),this.group.add(d),a.setItemGraphicEl(u,d),this._progressiveEls.push(d)}}},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype.remove=function(n){var a=this.group,s=this._data;s&&n?s.eachItemGraphicEl(function(l){l.fadeOut(function(){a.remove(l)},s.hostModel)}):a.removeAll()},t})();function prepareDataCoordInfo(t,n,a){var s=t.getBaseAxis(),l=t.getOtherAxis(s),u=getValueStart(l,a),c=s.dim,d=l.dim,Ct=n.mapDimension(d),ar=n.mapDimension(c),en=d==="x"||d==="radius"?1:0,tn=map$1(t.dimensions,function(dn){return n.mapDimension(dn)}),on=!1,cn=n.getCalculationInfo("stackResultDimension");return isDimensionStacked(n,tn[0])&&(on=!0,tn[0]=cn),isDimensionStacked(n,tn[1])&&(on=!0,tn[1]=cn),{dataDimsForPoint:tn,valueStart:u,valueAxisDim:d,baseAxisDim:c,stacked:!!on,valueDim:Ct,baseDim:ar,baseDataOffset:en,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function getValueStart(t,n){var a=0,s=t.scale.getExtent();return n==="start"?a=s[0]:n==="end"?a=s[1]:isNumber(n)&&!isNaN(n)?a=n:s[0]>0?a=s[0]:s[1]<0&&(a=s[1]),a}function getStackedOnPoint(t,n,a,s){var l=NaN;t.stacked&&(l=a.get(a.getCalculationInfo("stackedOverDimension"),s)),isNaN(l)&&(l=t.valueStart);var u=t.baseDataOffset,c=[];return c[u]=a.get(t.baseDim,s),c[1-u]=l,n.dataToPoint(c)}function diffData(t,n){var a=[];return n.diff(t).add(function(s){a.push({cmd:"+",idx:s})}).update(function(s,l){a.push({cmd:"=",idx:l,idx1:s})}).remove(function(s){a.push({cmd:"-",idx:s})}).execute(),a}function lineAnimationDiff(t,n,a,s,l,u,c,d){for(var Ct=diffData(t,n),ar=[],en=[],tn=[],on=[],cn=[],dn=[],Cn=[],In=prepareDataCoordInfo(l,n,c),ix=t.getLayout("points")||[],ax=n.getLayout("points")||[],ox=0;ox<Ct.length;ox++){var sx=Ct[ox],ux=!0,cx=void 0,hx=void 0;switch(sx.cmd){case"=":cx=sx.idx*2,hx=sx.idx1*2;var gx=ix[cx],fx=ix[cx+1],dx=ax[hx],mx=ax[hx+1];(isNaN(gx)||isNaN(fx))&&(gx=dx,fx=mx),ar.push(gx,fx),en.push(dx,mx),tn.push(a[cx],a[cx+1]),on.push(s[hx],s[hx+1]),Cn.push(n.getRawIndex(sx.idx1));break;case"+":var vx=sx.idx,bx=In.dataDimsForPoint,xx=l.dataToPoint([n.get(bx[0],vx),n.get(bx[1],vx)]);hx=vx*2,ar.push(xx[0],xx[1]),en.push(ax[hx],ax[hx+1]);var _x=getStackedOnPoint(In,l,n,vx);tn.push(_x[0],_x[1]),on.push(s[hx],s[hx+1]),Cn.push(n.getRawIndex(vx));break;case"-":ux=!1}ux&&(cn.push(sx),dn.push(dn.length))}dn.sort(function(Px,$x){return Cn[Px]-Cn[$x]});for(var Ex=ar.length,Tx=createFloat32Array(Ex),Cx=createFloat32Array(Ex),Mx=createFloat32Array(Ex),Ax=createFloat32Array(Ex),Nx=[],ox=0;ox<dn.length;ox++){var Ux=dn[ox],Rx=ox*2,Ox=Ux*2;Tx[Rx]=ar[Ox],Tx[Rx+1]=ar[Ox+1],Cx[Rx]=en[Ox],Cx[Rx+1]=en[Ox+1],Mx[Rx]=tn[Ox],Mx[Rx+1]=tn[Ox+1],Ax[Rx]=on[Ox],Ax[Rx+1]=on[Ox+1],Nx[ox]=cn[Ux]}return{current:Tx,next:Cx,stackedOnCurrent:Mx,stackedOnNext:Ax,status:Nx}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(t,n){return isNaN(t)||isNaN(n)}function drawSegment(t,n,a,s,l,u,c,d,Ct){for(var ar,en,tn,on,cn,dn,Cn=a,In=0;In<s;In++){var ix=n[Cn*2],ax=n[Cn*2+1];if(Cn>=l||Cn<0)break;if(isPointNull$1(ix,ax)){if(Ct){Cn+=u;continue}break}if(Cn===a)t[u>0?"moveTo":"lineTo"](ix,ax),tn=ix,on=ax;else{var ox=ix-ar,sx=ax-en;if(ox*ox+sx*sx<.5){Cn+=u;continue}if(c>0){for(var ux=Cn+u,cx=n[ux*2],hx=n[ux*2+1];cx===ix&&hx===ax&&In<s;)In++,ux+=u,Cn+=u,cx=n[ux*2],hx=n[ux*2+1],ix=n[Cn*2],ax=n[Cn*2+1],ox=ix-ar,sx=ax-en;var gx=In+1;if(Ct)for(;isPointNull$1(cx,hx)&&gx<s;)gx++,ux+=u,cx=n[ux*2],hx=n[ux*2+1];var fx=.5,dx=0,mx=0,vx=void 0,bx=void 0;if(gx>=s||isPointNull$1(cx,hx))cn=ix,dn=ax;else{dx=cx-ar,mx=hx-en;var xx=ix-ar,_x=cx-ix,Ex=ax-en,Tx=hx-ax,Cx=void 0,Mx=void 0;if(d==="x"){Cx=Math.abs(xx),Mx=Math.abs(_x);var Ax=dx>0?1:-1;cn=ix-Ax*Cx*c,dn=ax,vx=ix+Ax*Mx*c,bx=ax}else if(d==="y"){Cx=Math.abs(Ex),Mx=Math.abs(Tx);var Nx=mx>0?1:-1;cn=ix,dn=ax-Nx*Cx*c,vx=ix,bx=ax+Nx*Mx*c}else Cx=Math.sqrt(xx*xx+Ex*Ex),Mx=Math.sqrt(_x*_x+Tx*Tx),fx=Mx/(Mx+Cx),cn=ix-dx*c*(1-fx),dn=ax-mx*c*(1-fx),vx=ix+dx*c*fx,bx=ax+mx*c*fx,vx=mathMin$5(vx,mathMax$5(cx,ix)),bx=mathMin$5(bx,mathMax$5(hx,ax)),vx=mathMax$5(vx,mathMin$5(cx,ix)),bx=mathMax$5(bx,mathMin$5(hx,ax)),dx=vx-ix,mx=bx-ax,cn=ix-dx*Cx/Mx,dn=ax-mx*Cx/Mx,cn=mathMin$5(cn,mathMax$5(ar,ix)),dn=mathMin$5(dn,mathMax$5(en,ax)),cn=mathMax$5(cn,mathMin$5(ar,ix)),dn=mathMax$5(dn,mathMin$5(en,ax)),dx=ix-cn,mx=ax-dn,vx=ix+dx*Mx/Cx,bx=ax+mx*Mx/Cx}t.bezierCurveTo(tn,on,cn,dn,ix,ax),tn=vx,on=bx}else t.lineTo(ix,ax)}ar=ix,en=ax,Cn+=u}return In}var ECPolylineShape=(function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t})(),ECPolyline=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-polyline",s}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ECPolylineShape},n.prototype.buildPath=function(a,s){var l=s.points,u=0,c=l.length/2;if(s.connectNulls){for(;c>0&&isPointNull$1(l[c*2-2],l[c*2-1]);c--);for(;u<c&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<c;)u+=drawSegment(a,l,u,c,c,1,s.smooth,s.smoothMonotone,s.connectNulls)+1},n.prototype.getPointOn=function(a,s){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,u=l.data,c=PathProxy.CMD,d,Ct,ar=s==="x",en=[],tn=0;tn<u.length;){var on=u[tn++],cn=void 0,dn=void 0,Cn=void 0,In=void 0,ix=void 0,ax=void 0,ox=void 0;switch(on){case c.M:d=u[tn++],Ct=u[tn++];break;case c.L:if(cn=u[tn++],dn=u[tn++],ox=ar?(a-d)/(cn-d):(a-Ct)/(dn-Ct),ox<=1&&ox>=0){var sx=ar?(dn-Ct)*ox+Ct:(cn-d)*ox+d;return ar?[a,sx]:[sx,a]}d=cn,Ct=dn;break;case c.C:cn=u[tn++],dn=u[tn++],Cn=u[tn++],In=u[tn++],ix=u[tn++],ax=u[tn++];var ux=ar?cubicRootAt(d,cn,Cn,ix,a,en):cubicRootAt(Ct,dn,In,ax,a,en);if(ux>0)for(var cx=0;cx<ux;cx++){var hx=en[cx];if(hx<=1&&hx>=0){var sx=ar?cubicAt(Ct,dn,In,ax,hx):cubicAt(d,cn,Cn,ix,hx);return ar?[a,sx]:[sx,a]}}d=ix,Ct=ax;break}}},n})(Path),ECPolygonShape=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ECPolylineShape),ECPolygon=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-polygon",s}return n.prototype.getDefaultShape=function(){return new ECPolygonShape},n.prototype.buildPath=function(a,s){var l=s.points,u=s.stackedOnPoints,c=0,d=l.length/2,Ct=s.smoothMonotone;if(s.connectNulls){for(;d>0&&isPointNull$1(l[d*2-2],l[d*2-1]);d--);for(;c<d&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<d;){var ar=drawSegment(a,l,c,d,d,1,s.smooth,Ct,s.connectNulls);drawSegment(a,u,c+ar-1,ar,d,-1,s.stackedOnSmooth,Ct,s.connectNulls),c+=ar+1,a.closePath()}},n})(Path);function createGridClipPath(t,n,a,s,l){var u=t.getArea(),c=u.x,d=u.y,Ct=u.width,ar=u.height,en=a.get(["lineStyle","width"])||0;c-=en/2,d-=en/2,Ct+=en,ar+=en,Ct=Math.ceil(Ct),c!==Math.floor(c)&&(c=Math.floor(c),Ct++);var tn=new Rect$2({shape:{x:c,y:d,width:Ct,height:ar}});if(n){var on=t.getBaseAxis(),cn=on.isHorizontal(),dn=on.inverse;cn?(dn&&(tn.shape.x+=Ct),tn.shape.width=0):(dn||(tn.shape.y+=ar),tn.shape.height=0);var Cn=isFunction$1(l)?function(In){l(In,tn)}:null;initProps(tn,{shape:{width:Ct,height:ar,x:c,y:d}},a,null,s,Cn)}return tn}function createPolarClipPath(t,n,a){var s=t.getArea(),l=round$3(s.r0,1),u=round$3(s.r,1),c=new Sector({shape:{cx:round$3(t.cx,1),cy:round$3(t.cy,1),r0:l,r:u,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}});if(n){var d=t.getBaseAxis().dim==="angle";d?c.shape.endAngle=s.startAngle:c.shape.r=l,initProps(c,{shape:{endAngle:s.endAngle,r:u}},a)}return c}function createClipPath(t,n,a,s,l){if(t){if(t.type==="polar")return createPolarClipPath(t,n,a);if(t.type==="cartesian2d")return createGridClipPath(t,n,a,s,l)}else return null;return null}function isCoordinateSystemType(t,n){return t.type===n}function isPointsSame(t,n){if(t.length===n.length){for(var a=0;a<t.length;a++)if(t[a]!==n[a])return;return!0}}function bboxFromPoints(t){for(var n=1/0,a=1/0,s=-1/0,l=-1/0,u=0;u<t.length;){var c=t[u++],d=t[u++];isNaN(c)||(n=Math.min(c,n),s=Math.max(c,s)),isNaN(d)||(a=Math.min(d,a),l=Math.max(d,l))}return[[n,a],[s,l]]}function getBoundingDiff(t,n){var a=bboxFromPoints(t),s=a[0],l=a[1],u=bboxFromPoints(n),c=u[0],d=u[1];return Math.max(Math.abs(s[0]-c[0]),Math.abs(s[1]-c[1]),Math.abs(l[0]-d[0]),Math.abs(l[1]-d[1]))}function getSmooth(t){return isNumber(t)?t:t?.5:0}function getStackedOnPoints(t,n,a){if(!a.valueDim)return[];for(var s=n.count(),l=createFloat32Array(s*2),u=0;u<s;u++){var c=getStackedOnPoint(a,t,n,u);l[u*2]=c[0],l[u*2+1]=c[1]}return l}function turnPointsIntoStep(t,n,a,s,l){var u=a.getBaseAxis(),c=u.dim==="x"||u.dim==="radius"?0:1,d=[],Ct=0,ar=[],en=[],tn=[],on=[];if(l){for(Ct=0;Ct<t.length;Ct+=2){var cn=n||t;!isNaN(cn[Ct])&&!isNaN(cn[Ct+1])&&on.push(t[Ct],t[Ct+1])}t=on}for(Ct=0;Ct<t.length-2;Ct+=2)switch(tn[0]=t[Ct+2],tn[1]=t[Ct+3],en[0]=t[Ct],en[1]=t[Ct+1],d.push(en[0],en[1]),s){case"end":ar[c]=tn[c],ar[1-c]=en[1-c],d.push(ar[0],ar[1]);break;case"middle":var dn=(en[c]+tn[c])/2,Cn=[];ar[c]=Cn[c]=dn,ar[1-c]=en[1-c],Cn[1-c]=tn[1-c],d.push(ar[0],ar[1]),d.push(Cn[0],Cn[1]);break;default:ar[c]=en[c],ar[1-c]=tn[1-c],d.push(ar[0],ar[1])}return d.push(t[Ct++],t[Ct++]),d}function clipColorStops(t,n){var a=[],s=t.length,l,u;function c(en,tn,on){var cn=en.coord,dn=(on-cn)/(tn.coord-cn),Cn=lerp(dn,[en.color,tn.color]);return{coord:on,color:Cn}}for(var d=0;d<s;d++){var Ct=t[d],ar=Ct.coord;if(ar<0)l=Ct;else if(ar>n){u?a.push(c(u,Ct,n)):l&&a.push(c(l,Ct,0),c(l,Ct,n));break}else l&&(a.push(c(l,Ct,0)),l=null),a.push(Ct),u=Ct}return a}function getVisualGradient(t,n,a){var s=t.getVisual("visualMeta");if(!(!s||!s.length||!t.count())&&n.type==="cartesian2d"){for(var l,u,c=s.length-1;c>=0;c--){var d=t.getDimensionInfo(s[c].dimension);if(l=d&&d.coordDim,l==="x"||l==="y"){u=s[c];break}}if(u){var Ct=n.getAxis(l),ar=map$1(u.stops,function(ox){return{coord:Ct.toGlobalCoord(Ct.dataToCoord(ox.value)),color:ox.color}}),en=ar.length,tn=u.outerColors.slice();en&&ar[0].coord>ar[en-1].coord&&(ar.reverse(),tn.reverse());var on=clipColorStops(ar,l==="x"?a.getWidth():a.getHeight()),cn=on.length;if(!cn&&en)return ar[0].coord<0?tn[1]?tn[1]:ar[en-1].color:tn[0]?tn[0]:ar[0].color;var dn=10,Cn=on[0].coord-dn,In=on[cn-1].coord+dn,ix=In-Cn;if(ix<.001)return"transparent";each$f(on,function(ox){ox.offset=(ox.coord-Cn)/ix}),on.push({offset:cn?on[cn-1].offset:.5,color:tn[1]||"transparent"}),on.unshift({offset:cn?on[0].offset:.5,color:tn[0]||"transparent"});var ax=new LinearGradient(0,0,0,0,on,!0);return ax[l]=Cn,ax[l+"2"]=In,ax}}}function getIsIgnoreFunc(t,n,a){var s=t.get("showAllSymbol"),l=s==="auto";if(!(s&&!l)){var u=a.getAxesByScale("ordinal")[0];if(u&&!(l&&canShowAllSymbolForCategory(u,n))){var c=n.mapDimension(u.dim),d={};return each$f(u.getViewLabels(),function(Ct){var ar=u.scale.getRawOrdinalNumber(Ct.tickValue);d[ar]=1}),function(Ct){return!d.hasOwnProperty(n.get(c,Ct))}}}}function canShowAllSymbolForCategory(t,n){var a=t.getExtent(),s=Math.abs(a[1]-a[0])/t.scale.count();isNaN(s)&&(s=0);for(var l=n.count(),u=Math.max(1,Math.round(l/5)),c=0;c<l;c+=u)if(Symbol$1.getSymbolSize(n,c)[t.isHorizontal()?1:0]*1.5>s)return!1;return!0}function isPointNull(t,n){return isNaN(t)||isNaN(n)}function getLastIndexNotNull(t){for(var n=t.length/2;n>0&&isPointNull(t[n*2-2],t[n*2-1]);n--);return n-1}function getPointAtIndex(t,n){return[t[n*2],t[n*2+1]]}function getIndexRange(t,n,a){for(var s=t.length/2,l=a==="x"?0:1,u,c,d=0,Ct=-1,ar=0;ar<s;ar++)if(c=t[ar*2+l],!(isNaN(c)||isNaN(t[ar*2+1-l]))){if(ar===0){u=c;continue}if(u<=n&&c>=n||u>=n&&c<=n){Ct=ar;break}d=ar,u=c}return{range:[d,Ct],t:(n-u)/(c-u)}}function anyStateShowEndLabel(t){if(t.get(["endLabel","show"]))return!0;for(var n=0;n<SPECIAL_STATES.length;n++)if(t.get([SPECIAL_STATES[n],"endLabel","show"]))return!0;return!1}function createLineClipPath(t,n,a,s){if(isCoordinateSystemType(n,"cartesian2d")){var l=s.getModel("endLabel"),u=l.get("valueAnimation"),c=s.getData(),d={lastFrameIndex:0},Ct=anyStateShowEndLabel(s)?function(cn,dn){t._endLabelOnDuring(cn,dn,c,d,u,l,n)}:null,ar=n.getBaseAxis().isHorizontal(),en=createGridClipPath(n,a,s,function(){var cn=t._endLabel;cn&&a&&d.originalX!=null&&cn.attr({x:d.originalX,y:d.originalY})},Ct);if(!s.get("clip",!0)){var tn=en.shape,on=Math.max(tn.width,tn.height);ar?(tn.y-=on,tn.height+=on*2):(tn.x-=on,tn.width+=on*2)}return Ct&&Ct(1,en),en}else return createPolarClipPath(n,a,s)}function getEndLabelStateSpecified(t,n){var a=n.getBaseAxis(),s=a.isHorizontal(),l=a.inverse,u=s?l?"right":"left":"center",c=s?"middle":l?"top":"bottom";return{normal:{align:t.get("align")||u,verticalAlign:t.get("verticalAlign")||c}}}var LineView=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){var a=new Group$3,s=new SymbolDraw;this.group.add(s.group),this._symbolDraw=s,this._lineGroup=a,this._changePolyState=bind$1(this._changePolyState,this)},n.prototype.render=function(a,s,l){var u=a.coordinateSystem,c=this.group,d=a.getData(),Ct=a.getModel("lineStyle"),ar=a.getModel("areaStyle"),en=d.getLayout("points")||[],tn=u.type==="polar",on=this._coordSys,cn=this._symbolDraw,dn=this._polyline,Cn=this._polygon,In=this._lineGroup,ix=!s.ssr&&a.get("animation"),ax=!ar.isEmpty(),ox=ar.get("origin"),sx=prepareDataCoordInfo(u,d,ox),ux=ax&&getStackedOnPoints(u,d,sx),cx=a.get("showSymbol"),hx=a.get("connectNulls"),gx=cx&&!tn&&getIsIgnoreFunc(a,d,u),fx=this._data;fx&&fx.eachItemGraphicEl(function(Px,$x){Px.__temp&&(c.remove(Px),fx.setItemGraphicEl($x,null))}),cx||cn.remove(),c.add(In);var dx=tn?!1:a.get("step"),mx;u&&u.getArea&&a.get("clip",!0)&&(mx=u.getArea(),mx.width!=null?(mx.x-=.1,mx.y-=.1,mx.width+=.2,mx.height+=.2):mx.r0&&(mx.r0-=.5,mx.r+=.5)),this._clipShapeForSymbol=mx;var vx=getVisualGradient(d,u,l)||d.getVisual("style")[d.getVisual("drawType")];if(!(dn&&on.type===u.type&&dx===this._step))cx&&cn.updateData(d,{isIgnore:gx,clipShape:mx,disableAnimation:!0,getSymbolPoint:function(Px){return[en[Px*2],en[Px*2+1]]}}),ix&&this._initSymbolLabelAnimation(d,u,mx),dx&&(ux&&(ux=turnPointsIntoStep(ux,en,u,dx,hx)),en=turnPointsIntoStep(en,null,u,dx,hx)),dn=this._newPolyline(en),ax?Cn=this._newPolygon(en,ux):Cn&&(In.remove(Cn),Cn=this._polygon=null),tn||this._initOrUpdateEndLabel(a,u,convertToColorString(vx)),In.setClipPath(createLineClipPath(this,u,!0,a));else{ax&&!Cn?Cn=this._newPolygon(en,ux):Cn&&!ax&&(In.remove(Cn),Cn=this._polygon=null),tn||this._initOrUpdateEndLabel(a,u,convertToColorString(vx));var bx=In.getClipPath();if(bx){var xx=createLineClipPath(this,u,!1,a);initProps(bx,{shape:xx.shape},a)}else In.setClipPath(createLineClipPath(this,u,!0,a));cx&&cn.updateData(d,{isIgnore:gx,clipShape:mx,disableAnimation:!0,getSymbolPoint:function(Px){return[en[Px*2],en[Px*2+1]]}}),(!isPointsSame(this._stackedOnPoints,ux)||!isPointsSame(this._points,en))&&(ix?this._doUpdateAnimation(d,ux,u,l,dx,ox,hx):(dx&&(ux&&(ux=turnPointsIntoStep(ux,en,u,dx,hx)),en=turnPointsIntoStep(en,null,u,dx,hx)),dn.setShape({points:en}),Cn&&Cn.setShape({points:en,stackedOnPoints:ux})))}var _x=a.getModel("emphasis"),Ex=_x.get("focus"),Tx=_x.get("blurScope"),Cx=_x.get("disabled");if(dn.useStyle(defaults(Ct.getLineStyle(),{fill:"none",stroke:vx,lineJoin:"bevel"})),setStatesStylesFromModel(dn,a,"lineStyle"),dn.style.lineWidth>0&&a.get(["emphasis","lineStyle","width"])==="bolder"){var Mx=dn.getState("emphasis").style;Mx.lineWidth=+dn.style.lineWidth+1}getECData(dn).seriesIndex=a.seriesIndex,toggleHoverEmphasis(dn,Ex,Tx,Cx);var Ax=getSmooth(a.get("smooth")),Nx=a.get("smoothMonotone");if(dn.setShape({smooth:Ax,smoothMonotone:Nx,connectNulls:hx}),Cn){var Ux=d.getCalculationInfo("stackedOnSeries"),Rx=0;Cn.useStyle(defaults(ar.getAreaStyle(),{fill:vx,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),Ux&&(Rx=getSmooth(Ux.get("smooth"))),Cn.setShape({smooth:Ax,stackedOnSmooth:Rx,smoothMonotone:Nx,connectNulls:hx}),setStatesStylesFromModel(Cn,a,"areaStyle"),getECData(Cn).seriesIndex=a.seriesIndex,toggleHoverEmphasis(Cn,Ex,Tx,Cx)}var Ox=this._changePolyState;d.eachItemGraphicEl(function(Px){Px&&(Px.onHoverStateChange=Ox)}),this._polyline.onHoverStateChange=Ox,this._data=d,this._coordSys=u,this._stackedOnPoints=ux,this._points=en,this._step=dx,this._valueOrigin=ox,a.get("triggerLineEvent")&&(this.packEventData(a,dn),Cn&&this.packEventData(a,Cn))},n.prototype.packEventData=function(a,s){getECData(s).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},n.prototype.highlight=function(a,s,l,u){var c=a.getData(),d=queryDataIndex(c,u);if(this._changePolyState("emphasis"),!(d instanceof Array)&&d!=null&&d>=0){var Ct=c.getLayout("points"),ar=c.getItemGraphicEl(d);if(!ar){var en=Ct[d*2],tn=Ct[d*2+1];if(isNaN(en)||isNaN(tn)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(en,tn))return;var on=a.get("zlevel")||0,cn=a.get("z")||0;ar=new Symbol$1(c,d),ar.x=en,ar.y=tn,ar.setZ(on,cn);var dn=ar.getSymbolPath().getTextContent();dn&&(dn.zlevel=on,dn.z=cn,dn.z2=this._polyline.z2+1),ar.__temp=!0,c.setItemGraphicEl(d,ar),ar.stopSymbolAnimation(!0),this.group.add(ar)}ar.highlight()}else ChartView.prototype.highlight.call(this,a,s,l,u)},n.prototype.downplay=function(a,s,l,u){var c=a.getData(),d=queryDataIndex(c,u);if(this._changePolyState("normal"),d!=null&&d>=0){var Ct=c.getItemGraphicEl(d);Ct&&(Ct.__temp?(c.setItemGraphicEl(d,null),this.group.remove(Ct)):Ct.downplay())}else ChartView.prototype.downplay.call(this,a,s,l,u)},n.prototype._changePolyState=function(a){var s=this._polygon;setStatesFlag(this._polyline,a),s&&setStatesFlag(s,a)},n.prototype._newPolyline=function(a){var s=this._polyline;return s&&this._lineGroup.remove(s),s=new ECPolyline({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(s),this._polyline=s,s},n.prototype._newPolygon=function(a,s){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:a,stackedOnPoints:s},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},n.prototype._initSymbolLabelAnimation=function(a,s,l){var u,c,d=s.getBaseAxis(),Ct=d.inverse;s.type==="cartesian2d"?(u=d.isHorizontal(),c=!1):s.type==="polar"&&(u=d.dim==="angle",c=!0);var ar=a.hostModel,en=ar.get("animationDuration");isFunction$1(en)&&(en=en(null));var tn=ar.get("animationDelay")||0,on=isFunction$1(tn)?tn(null):tn;a.eachItemGraphicEl(function(cn,dn){var Cn=cn;if(Cn){var In=[cn.x,cn.y],ix=void 0,ax=void 0,ox=void 0;if(l)if(c){var sx=l,ux=s.pointToCoord(In);u?(ix=sx.startAngle,ax=sx.endAngle,ox=-ux[1]/180*Math.PI):(ix=sx.r0,ax=sx.r,ox=ux[0])}else{var cx=l;u?(ix=cx.x,ax=cx.x+cx.width,ox=cn.x):(ix=cx.y+cx.height,ax=cx.y,ox=cn.y)}var hx=ax===ix?0:(ox-ix)/(ax-ix);Ct&&(hx=1-hx);var gx=isFunction$1(tn)?tn(dn):en*hx+on,fx=Cn.getSymbolPath(),dx=fx.getTextContent();Cn.attr({scaleX:0,scaleY:0}),Cn.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:gx}),dx&&dx.animateFrom({style:{opacity:0}},{duration:300,delay:gx}),fx.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(a,s,l){var u=a.getModel("endLabel");if(anyStateShowEndLabel(a)){var c=a.getData(),d=this._polyline,Ct=c.getLayout("points");if(!Ct){d.removeTextContent(),this._endLabel=null;return}var ar=this._endLabel;ar||(ar=this._endLabel=new ZRText({z2:200}),ar.ignoreClip=!0,d.setTextContent(this._endLabel),d.disableLabelAnimation=!0);var en=getLastIndexNotNull(Ct);en>=0&&(setLabelStyle(d,getLabelStatesModels(a,"endLabel"),{inheritColor:l,labelFetcher:a,labelDataIndex:en,defaultText:function(tn,on,cn){return cn!=null?getDefaultInterpolatedLabel(c,cn):getDefaultLabel(c,tn)},enableTextSetter:!0},getEndLabelStateSpecified(u,s)),d.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(a,s,l,u,c,d,Ct){var ar=this._endLabel,en=this._polyline;if(ar){a<1&&u.originalX==null&&(u.originalX=ar.x,u.originalY=ar.y);var tn=l.getLayout("points"),on=l.hostModel,cn=on.get("connectNulls"),dn=d.get("precision"),Cn=d.get("distance")||0,In=Ct.getBaseAxis(),ix=In.isHorizontal(),ax=In.inverse,ox=s.shape,sx=ax?ix?ox.x:ox.y+ox.height:ix?ox.x+ox.width:ox.y,ux=(ix?Cn:0)*(ax?-1:1),cx=(ix?0:-Cn)*(ax?-1:1),hx=ix?"x":"y",gx=getIndexRange(tn,sx,hx),fx=gx.range,dx=fx[1]-fx[0],mx=void 0;if(dx>=1){if(dx>1&&!cn){var vx=getPointAtIndex(tn,fx[0]);ar.attr({x:vx[0]+ux,y:vx[1]+cx}),c&&(mx=on.getRawValue(fx[0]))}else{var vx=en.getPointOn(sx,hx);vx&&ar.attr({x:vx[0]+ux,y:vx[1]+cx});var bx=on.getRawValue(fx[0]),xx=on.getRawValue(fx[1]);c&&(mx=interpolateRawValues(l,dn,bx,xx,gx.t))}u.lastFrameIndex=fx[0]}else{var _x=a===1||u.lastFrameIndex>0?fx[0]:0,vx=getPointAtIndex(tn,_x);c&&(mx=on.getRawValue(_x)),ar.attr({x:vx[0]+ux,y:vx[1]+cx})}if(c){var Ex=labelInner(ar);typeof Ex.setLabelText=="function"&&Ex.setLabelText(mx)}}},n.prototype._doUpdateAnimation=function(a,s,l,u,c,d,Ct){var ar=this._polyline,en=this._polygon,tn=a.hostModel,on=lineAnimationDiff(this._data,a,this._stackedOnPoints,s,this._coordSys,l,this._valueOrigin),cn=on.current,dn=on.stackedOnCurrent,Cn=on.next,In=on.stackedOnNext;if(c&&(dn=turnPointsIntoStep(on.stackedOnCurrent,on.current,l,c,Ct),cn=turnPointsIntoStep(on.current,null,l,c,Ct),In=turnPointsIntoStep(on.stackedOnNext,on.next,l,c,Ct),Cn=turnPointsIntoStep(on.next,null,l,c,Ct)),getBoundingDiff(cn,Cn)>3e3||en&&getBoundingDiff(dn,In)>3e3){ar.stopAnimation(),ar.setShape({points:Cn}),en&&(en.stopAnimation(),en.setShape({points:Cn,stackedOnPoints:In}));return}ar.shape.__points=on.current,ar.shape.points=cn;var ix={shape:{points:Cn}};on.current!==cn&&(ix.shape.__points=on.next),ar.stopAnimation(),updateProps$1(ar,ix,tn),en&&(en.setShape({points:cn,stackedOnPoints:dn}),en.stopAnimation(),updateProps$1(en,{shape:{stackedOnPoints:In}},tn),ar.shape.points!==en.shape.points&&(en.shape.points=ar.shape.points));for(var ax=[],ox=on.status,sx=0;sx<ox.length;sx++){var ux=ox[sx].cmd;if(ux==="="){var cx=a.getItemGraphicEl(ox[sx].idx1);cx&&ax.push({el:cx,ptIdx:sx})}}ar.animators&&ar.animators.length&&ar.animators[0].during(function(){en&&en.dirtyShape();for(var hx=ar.shape.__points,gx=0;gx<ax.length;gx++){var fx=ax[gx].el,dx=ax[gx].ptIdx*2;fx.x=hx[dx],fx.y=hx[dx+1],fx.markRedraw()}})},n.prototype.remove=function(a){var s=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(u,c){u.__temp&&(s.remove(u),l.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n})(ChartView);function pointsLayout(t,n){return{seriesType:t,plan:createRenderPlanner(),reset:function(a){var s=a.getData(),l=a.coordinateSystem,u=a.pipelineContext,c=n||u.large;if(l){var d=map$1(l.dimensions,function(cn){return s.mapDimension(cn)}).slice(0,2),Ct=d.length,ar=s.getCalculationInfo("stackResultDimension");isDimensionStacked(s,d[0])&&(d[0]=ar),isDimensionStacked(s,d[1])&&(d[1]=ar);var en=s.getStore(),tn=s.getDimensionIndex(d[0]),on=s.getDimensionIndex(d[1]);return Ct&&{progress:function(cn,dn){for(var Cn=cn.end-cn.start,In=c&&createFloat32Array(Cn*Ct),ix=[],ax=[],ox=cn.start,sx=0;ox<cn.end;ox++){var ux=void 0;if(Ct===1){var cx=en.get(tn,ox);ux=l.dataToPoint(cx,null,ax)}else ix[0]=en.get(tn,ox),ix[1]=en.get(on,ox),ux=l.dataToPoint(ix,null,ax);c?(In[sx++]=ux[0],In[sx++]=ux[1]):dn.setItemLayout(ox,ux.slice())}c&&dn.setLayout("points",In)}}}}}}var samplers={average:function(t){for(var n=0,a=0,s=0;s<t.length;s++)isNaN(t[s])||(n+=t[s],a++);return a===0?NaN:n/a},sum:function(t){for(var n=0,a=0;a<t.length;a++)n+=t[a]||0;return n},max:function(t){for(var n=-1/0,a=0;a<t.length;a++)t[a]>n&&(n=t[a]);return isFinite(n)?n:NaN},min:function(t){for(var n=1/0,a=0;a<t.length;a++)t[a]<n&&(n=t[a]);return isFinite(n)?n:NaN},nearest:function(t){return t[0]}},indexSampler=function(t){return Math.round(t.length/2)};function dataSample(t){return{seriesType:t,reset:function(n,a,s){var l=n.getData(),u=n.get("sampling"),c=n.coordinateSystem,d=l.count();if(d>10&&c.type==="cartesian2d"&&u){var Ct=c.getBaseAxis(),ar=c.getOtherAxis(Ct),en=Ct.getExtent(),tn=s.getDevicePixelRatio(),on=Math.abs(en[1]-en[0])*(tn||1),cn=Math.round(d/on);if(isFinite(cn)&&cn>1){u==="lttb"?n.setData(l.lttbDownSample(l.mapDimension(ar.dim),1/cn)):u==="minmax"&&n.setData(l.minmaxDownSample(l.mapDimension(ar.dim),1/cn));var dn=void 0;isString$1(u)?dn=samplers[u]:isFunction$1(u)&&(dn=u),dn&&n.setData(l.downSample(l.mapDimension(ar.dim),1/cn,dn,indexSampler))}}}}}function install$Q(t){t.registerChartView(LineView),t.registerSeriesModel(LineSeriesModel),t.registerLayout(pointsLayout("line",!0)),t.registerVisual({seriesType:"line",reset:function(n){var a=n.getData(),s=n.getModel("lineStyle").getLineStyle();s&&!s.stroke&&(s.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",s)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(a,s,l){var u=this.coordinateSystem;if(u&&u.clampData){var c=u.clampData(a),d=u.dataToPoint(c);if(l)each$f(u.getAxes(),function(on,cn){if(on.type==="category"&&s!=null){var dn=on.getTicksCoords(),Cn=on.getTickModel().get("alignWithLabel"),In=c[cn],ix=s[cn]==="x1"||s[cn]==="y1";if(ix&&!Cn&&(In+=1),dn.length<2)return;if(dn.length===2){d[cn]=on.toGlobalCoord(on.getExtent()[ix?1:0]);return}for(var ax=void 0,ox=void 0,sx=1,ux=0;ux<dn.length;ux++){var cx=dn[ux].coord,hx=ux===dn.length-1?dn[ux-1].tickValue+sx:dn[ux].tickValue;if(hx===In){ox=cx;break}else if(hx<In)ax=cx;else if(ax!=null&&hx>In){ox=(cx+ax)/2;break}ux===1&&(sx=hx-dn[0].tickValue)}ox==null&&(ax?ax&&(ox=dn[dn.length-1].coord):ox=dn[0].coord),d[cn]=on.toGlobalCoord(ox)}});else{var Ct=this.getData(),ar=Ct.getLayout("offset"),en=Ct.getLayout("size"),tn=u.getBaseAxis().isHorizontal()?0:1;d[tn]+=ar+en/2}return d}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n})(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},n.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),s=this.get("largeThreshold");return s>a&&(a=s),a},n.prototype.brushSelector=function(a,s,l){return l.rect(s.getItemLayout(a))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n})(BaseBarSeriesModel),SausageShape=(function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t})(),SausagePath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="sausage",s}return n.prototype.getDefaultShape=function(){return new SausageShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.max(s.r0||0,0),d=Math.max(s.r,0),Ct=(d-c)*.5,ar=c+Ct,en=s.startAngle,tn=s.endAngle,on=s.clockwise,cn=Math.PI*2,dn=on?tn-en<cn:en-tn<cn;dn||(en=tn-(on?cn:-cn));var Cn=Math.cos(en),In=Math.sin(en),ix=Math.cos(tn),ax=Math.sin(tn);dn?(a.moveTo(Cn*c+l,In*c+u),a.arc(Cn*ar+l,In*ar+u,Ct,-Math.PI+en,en,!on)):a.moveTo(Cn*d+l,In*d+u),a.arc(l,u,d,en,tn,!on),a.arc(ix*ar+l,ax*ar+u,Ct,tn-Math.PI*2,tn-Math.PI,!on),c!==0&&a.arc(l,u,c,tn,en,on)},n})(Path);function createSectorCalculateTextPosition(t,n){n=n||{};var a=n.isRoundCap;return function(s,l,u){var c=l.position;if(!c||c instanceof Array)return calculateTextPosition(s,l,u);var d=t(c),Ct=l.distance!=null?l.distance:5,ar=this.shape,en=ar.cx,tn=ar.cy,on=ar.r,cn=ar.r0,dn=(on+cn)/2,Cn=ar.startAngle,In=ar.endAngle,ix=(Cn+In)/2,ax=a?Math.abs(on-cn)/2:0,ox=Math.cos,sx=Math.sin,ux=en+on*ox(Cn),cx=tn+on*sx(Cn),hx="left",gx="top";switch(d){case"startArc":ux=en+(cn-Ct)*ox(ix),cx=tn+(cn-Ct)*sx(ix),hx="center",gx="top";break;case"insideStartArc":ux=en+(cn+Ct)*ox(ix),cx=tn+(cn+Ct)*sx(ix),hx="center",gx="bottom";break;case"startAngle":ux=en+dn*ox(Cn)+adjustAngleDistanceX(Cn,Ct+ax,!1),cx=tn+dn*sx(Cn)+adjustAngleDistanceY(Cn,Ct+ax,!1),hx="right",gx="middle";break;case"insideStartAngle":ux=en+dn*ox(Cn)+adjustAngleDistanceX(Cn,-Ct+ax,!1),cx=tn+dn*sx(Cn)+adjustAngleDistanceY(Cn,-Ct+ax,!1),hx="left",gx="middle";break;case"middle":ux=en+dn*ox(ix),cx=tn+dn*sx(ix),hx="center",gx="middle";break;case"endArc":ux=en+(on+Ct)*ox(ix),cx=tn+(on+Ct)*sx(ix),hx="center",gx="bottom";break;case"insideEndArc":ux=en+(on-Ct)*ox(ix),cx=tn+(on-Ct)*sx(ix),hx="center",gx="top";break;case"endAngle":ux=en+dn*ox(In)+adjustAngleDistanceX(In,Ct+ax,!0),cx=tn+dn*sx(In)+adjustAngleDistanceY(In,Ct+ax,!0),hx="left",gx="middle";break;case"insideEndAngle":ux=en+dn*ox(In)+adjustAngleDistanceX(In,-Ct+ax,!0),cx=tn+dn*sx(In)+adjustAngleDistanceY(In,-Ct+ax,!0),hx="right",gx="middle";break;default:return calculateTextPosition(s,l,u)}return s=s||{},s.x=ux,s.y=cx,s.align=hx,s.verticalAlign=gx,s}}function setSectorTextRotation(t,n,a,s){if(isNumber(s)){t.setTextConfig({rotation:s});return}else if(isArray$1(n)){t.setTextConfig({rotation:0});return}var l=t.shape,u=l.clockwise?l.startAngle:l.endAngle,c=l.clockwise?l.endAngle:l.startAngle,d=(u+c)/2,Ct,ar=a(n);switch(ar){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":Ct=d;break;case"startAngle":case"insideStartAngle":Ct=u;break;case"endAngle":case"insideEndAngle":Ct=c;break;default:t.setTextConfig({rotation:0});return}var en=Math.PI*1.5-Ct;ar==="middle"&&en>Math.PI/2&&en<Math.PI*1.5&&(en-=Math.PI),t.setTextConfig({rotation:en})}function adjustAngleDistanceX(t,n,a){return n*Math.sin(t)*(a?-1:1)}function adjustAngleDistanceY(t,n,a){return n*Math.cos(t)*(a?1:-1)}function getSectorCornerRadius(t,n,a){var s=t.get("borderRadius");if(s==null)return a?{cornerRadius:0}:null;isArray$1(s)||(s=[s,s,s,s]);var l=Math.abs(n.r||0-n.r0||0);return{cornerRadius:map$1(s,function(u){return parsePercent$1(u,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(t,n){var a=t.getArea&&t.getArea();if(isCoordinateSystemType(t,"cartesian2d")){var s=t.getBaseAxis();if(s.type!=="category"||!s.onBand){var l=n.getLayout("bandWidth");s.isHorizontal()?(a.x-=l,a.width+=l*2):(a.y-=l,a.height+=l*2)}}return a}var BarView=(function(t){__extends(n,t);function n(){var a=t.call(this)||this;return a.type=n.type,a._isFirstFrame=!0,a}return n.prototype.render=function(a,s,l,u){this._model=a,this._removeOnRenderedListener(l),this._updateDrawMode(a);var c=a.get("coordinateSystem");(c==="cartesian2d"||c==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,s,l):this._renderNormal(a,s,l,u))},n.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},n.prototype.incrementalRender=function(a,s){this._progressiveEls=[],this._incrementalRenderLarge(a,s)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},n.prototype._renderNormal=function(a,s,l,u){var c=this.group,d=a.getData(),Ct=this._data,ar=a.coordinateSystem,en=ar.getBaseAxis(),tn;ar.type==="cartesian2d"?tn=en.isHorizontal():ar.type==="polar"&&(tn=en.dim==="angle");var on=a.isAnimationEnabled()?a:null,cn=shouldRealtimeSort(a,ar);cn&&this._enableRealtimeSort(cn,d,l);var dn=a.get("clip",!0)||cn,Cn=getClipArea(ar,d);c.removeClipPath();var In=a.get("roundCap",!0),ix=a.get("showBackground",!0),ax=a.getModel("backgroundStyle"),ox=ax.get("borderRadius")||0,sx=[],ux=this._backgroundEls,cx=u&&u.isInitSort,hx=u&&u.type==="changeAxisOrder";function gx(mx){var vx=getLayout[ar.type](d,mx),bx=createBackgroundEl(ar,tn,vx);return bx.useStyle(ax.getItemStyle()),ar.type==="cartesian2d"?bx.setShape("r",ox):bx.setShape("cornerRadius",ox),sx[mx]=bx,bx}d.diff(Ct).add(function(mx){var vx=d.getItemModel(mx),bx=getLayout[ar.type](d,mx,vx);if(ix&&gx(mx),!(!d.hasValue(mx)||!isValidLayout[ar.type](bx))){var xx=!1;dn&&(xx=clip[ar.type](Cn,bx));var _x=elementCreator[ar.type](a,d,mx,bx,tn,on,en.model,!1,In);cn&&(_x.forceLabelAnimation=!0),updateStyle(_x,d,mx,vx,bx,a,tn,ar.type==="polar"),cx?_x.attr({shape:bx}):cn?updateRealtimeAnimation(cn,on,_x,bx,mx,tn,!1,!1):initProps(_x,{shape:bx},a,mx),d.setItemGraphicEl(mx,_x),c.add(_x),_x.ignore=xx}}).update(function(mx,vx){var bx=d.getItemModel(mx),xx=getLayout[ar.type](d,mx,bx);if(ix){var _x=void 0;ux.length===0?_x=gx(vx):(_x=ux[vx],_x.useStyle(ax.getItemStyle()),ar.type==="cartesian2d"?_x.setShape("r",ox):_x.setShape("cornerRadius",ox),sx[mx]=_x);var Ex=getLayout[ar.type](d,mx),Tx=createBackgroundShape(tn,Ex,ar);updateProps$1(_x,{shape:Tx},on,mx)}var Cx=Ct.getItemGraphicEl(vx);if(!d.hasValue(mx)||!isValidLayout[ar.type](xx)){c.remove(Cx);return}var Mx=!1;if(dn&&(Mx=clip[ar.type](Cn,xx),Mx&&c.remove(Cx)),Cx?saveOldStyle(Cx):Cx=elementCreator[ar.type](a,d,mx,xx,tn,on,en.model,!!Cx,In),cn&&(Cx.forceLabelAnimation=!0),hx){var Ax=Cx.getTextContent();if(Ax){var Nx=labelInner(Ax);Nx.prevValue!=null&&(Nx.prevValue=Nx.value)}}else updateStyle(Cx,d,mx,bx,xx,a,tn,ar.type==="polar");cx?Cx.attr({shape:xx}):cn?updateRealtimeAnimation(cn,on,Cx,xx,mx,tn,!0,hx):updateProps$1(Cx,{shape:xx},a,mx,null),d.setItemGraphicEl(mx,Cx),Cx.ignore=Mx,c.add(Cx)}).remove(function(mx){var vx=Ct.getItemGraphicEl(mx);vx&&removeElementWithFadeOut(vx,a,mx)}).execute();var fx=this._backgroundGroup||(this._backgroundGroup=new Group$3);fx.removeAll();for(var dx=0;dx<sx.length;++dx)fx.add(sx[dx]);c.add(fx),this._backgroundEls=sx,this._data=d},n.prototype._renderLarge=function(a,s,l){this._clear(),createLarge$1(a,this.group),this._updateLargeClip(a)},n.prototype._incrementalRenderLarge=function(a,s){this._removeBackground(),createLarge$1(s,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(a){var s=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a),l=this.group;s?l.setClipPath(s):l.removeClipPath()},n.prototype._enableRealtimeSort=function(a,s,l){var u=this;if(s.count()){var c=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(s,a,l),this._isFirstFrame=!1;else{var d=function(Ct){var ar=s.getItemGraphicEl(Ct),en=ar&&ar.shape;return en&&Math.abs(c.isHorizontal()?en.height:en.width)||0};this._onRendered=function(){u._updateSortWithinSameData(s,d,c,l)},l.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(a,s,l){var u=[];return a.each(a.mapDimension(s.dim),function(c,d){var Ct=l(d);Ct=Ct??NaN,u.push({dataIndex:d,mappedValue:Ct,ordinalNumber:c})}),u.sort(function(c,d){return d.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(u,function(c){return c.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(a,s,l){for(var u=l.scale,c=a.mapDimension(l.dim),d=Number.MAX_VALUE,Ct=0,ar=u.getOrdinalMeta().categories.length;Ct<ar;++Ct){var en=a.rawIndexOf(c,u.getRawOrdinalNumber(Ct)),tn=en<0?Number.MIN_VALUE:s(a.indexOfRawIndex(en));if(tn>d)return!0;d=tn}return!1},n.prototype._isOrderDifferentInView=function(a,s){for(var l=s.scale,u=l.getExtent(),c=Math.max(0,u[0]),d=Math.min(u[1],l.getOrdinalMeta().categories.length-1);c<=d;++c)if(a.ordinalNumbers[c]!==l.getRawOrdinalNumber(c))return!0},n.prototype._updateSortWithinSameData=function(a,s,l,u){if(this._isOrderChangedWithinSameData(a,s,l)){var c=this._dataSort(a,l,s);this._isOrderDifferentInView(c,l)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:c}))}},n.prototype._dispatchInitSort=function(a,s,l){var u=s.baseAxis,c=this._dataSort(a,u,function(d){return a.get(a.mapDimension(s.otherAxis.dim),d)});l.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:c})},n.prototype.remove=function(a,s){this._clear(this._model),this._removeOnRenderedListener(s)},n.prototype.dispose=function(a,s){this._removeOnRenderedListener(s)},n.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(a){var s=this.group,l=this._data;a&&a.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,a,getECData(u).dataIndex)})):s.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n})(ChartView),clip={cartesian2d:function(t,n){var a=n.width<0?-1:1,s=n.height<0?-1:1;a<0&&(n.x+=n.width,n.width=-n.width),s<0&&(n.y+=n.height,n.height=-n.height);var l=t.x+t.width,u=t.y+t.height,c=mathMax$4(n.x,t.x),d=mathMin$4(n.x+n.width,l),Ct=mathMax$4(n.y,t.y),ar=mathMin$4(n.y+n.height,u),en=d<c,tn=ar<Ct;return n.x=en&&c>l?d:c,n.y=tn&&Ct>u?ar:Ct,n.width=en?0:d-c,n.height=tn?0:ar-Ct,a<0&&(n.x+=n.width,n.width=-n.width),s<0&&(n.y+=n.height,n.height=-n.height),en||tn},polar:function(t,n){var a=n.r0<=n.r?1:-1;if(a<0){var s=n.r;n.r=n.r0,n.r0=s}var l=mathMin$4(n.r,t.r),u=mathMax$4(n.r0,t.r0);n.r=l,n.r0=u;var c=l-u<0;if(a<0){var s=n.r;n.r=n.r0,n.r0=s}return c}},elementCreator={cartesian2d:function(t,n,a,s,l,u,c,d,Ct){var ar=new Rect$2({shape:extend({},s),z2:1});if(ar.__dataIndex=a,ar.name="item",u){var en=ar.shape,tn=l?"height":"width";en[tn]=0}return ar},polar:function(t,n,a,s,l,u,c,d,Ct){var ar=!l&&Ct?SausagePath:Sector,en=new ar({shape:s,z2:1});en.name="item";var tn=createPolarPositionMapping(l);if(en.calculateTextPosition=createSectorCalculateTextPosition(tn,{isRoundCap:ar===SausagePath}),u){var on=en.shape,cn=l?"r":"endAngle",dn={};on[cn]=l?s.r0:s.startAngle,dn[cn]=s[cn],(d?updateProps$1:initProps)(en,{shape:dn},u)}return en}};function shouldRealtimeSort(t,n){var a=t.get("realtimeSort",!0),s=n.getBaseAxis();if(a&&s.type==="category"&&n.type==="cartesian2d")return{baseAxis:s,otherAxis:n.getOtherAxis(s)}}function updateRealtimeAnimation(t,n,a,s,l,u,c,d){var Ct,ar;u?(ar={x:s.x,width:s.width},Ct={y:s.y,height:s.height}):(ar={y:s.y,height:s.height},Ct={x:s.x,width:s.width}),d||(c?updateProps$1:initProps)(a,{shape:Ct},n,l,null);var en=n?t.baseAxis.model:null;(c?updateProps$1:initProps)(a,{shape:ar},en,l)}function checkPropertiesNotValid(t,n){for(var a=0;a<n.length;a++)if(!isFinite(t[n[a]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(t){return!checkPropertiesNotValid(t,rectPropties)},polar:function(t){return!checkPropertiesNotValid(t,polarPropties)}},getLayout={cartesian2d:function(t,n,a){var s=t.getItemLayout(n),l=a?getLineWidth(a,s):0,u=s.width>0?1:-1,c=s.height>0?1:-1;return{x:s.x+u*l/2,y:s.y+c*l/2,width:s.width-u*l,height:s.height-c*l}},polar:function(t,n,a){var s=t.getItemLayout(n);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function isZeroOnPolar(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function createPolarPositionMapping(t){return(function(n){var a=n?"Arc":"Angle";return function(s){switch(s){case"start":case"insideStart":case"end":case"insideEnd":return s+a;default:return s}}})(t)}function updateStyle(t,n,a,s,l,u,c,d){var Ct=n.getItemVisual(a,"style");if(d){if(!u.get("roundCap")){var en=t.shape,tn=getSectorCornerRadius(s.getModel("itemStyle"),en,!0);extend(en,tn),t.setShape(en)}}else{var ar=s.get(["itemStyle","borderRadius"])||0;t.setShape("r",ar)}t.useStyle(Ct);var on=s.getShallow("cursor");on&&t.attr("cursor",on);var cn=d?c?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":c?l.height>=0?"bottom":"top":l.width>=0?"right":"left",dn=getLabelStatesModels(s);setLabelStyle(t,dn,{labelFetcher:u,labelDataIndex:a,defaultText:getDefaultLabel(u.getData(),a),inheritColor:Ct.fill,defaultOpacity:Ct.opacity,defaultOutsidePosition:cn});var Cn=t.getTextContent();if(d&&Cn){var In=s.get(["label","position"]);t.textConfig.inside=In==="middle"?!0:null,setSectorTextRotation(t,In==="outside"?cn:In,createPolarPositionMapping(c),s.get(["label","rotate"]))}setLabelValueAnimation(Cn,dn,u.getRawValue(a),function(ax){return getDefaultInterpolatedLabel(n,ax)});var ix=s.getModel(["emphasis"]);toggleHoverEmphasis(t,ix.get("focus"),ix.get("blurScope"),ix.get("disabled")),setStatesStylesFromModel(t,s),isZeroOnPolar(l)&&(t.style.fill="none",t.style.stroke="none",each$f(t.states,function(ax){ax.style&&(ax.style.fill=ax.style.stroke="none")}))}function getLineWidth(t,n){var a=t.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var s=t.get(["itemStyle","borderWidth"])||0,l=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),u=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(s,l,u)}var LagePathShape=(function(){function t(){}return t})(),LargePath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="largeBar",s}return n.prototype.getDefaultShape=function(){return new LagePathShape},n.prototype.buildPath=function(a,s){for(var l=s.points,u=this.baseDimIdx,c=1-this.baseDimIdx,d=[],Ct=[],ar=this.barWidth,en=0;en<l.length;en+=3)Ct[u]=ar,Ct[c]=l[en+2],d[u]=l[en+u],d[c]=l[en+c],a.rect(d[0],d[1],Ct[0],Ct[1])},n})(Path);function createLarge$1(t,n,a,s){var l=t.getData(),u=l.getLayout("valueAxisHorizontal")?1:0,c=l.getLayout("largeDataIndices"),d=l.getLayout("size"),Ct=t.getModel("backgroundStyle"),ar=l.getLayout("largeBackgroundPoints");if(ar){var en=new LargePath({shape:{points:ar},incremental:!!s,silent:!0,z2:0});en.baseDimIdx=u,en.largeDataIndices=c,en.barWidth=d,en.useStyle(Ct.getItemStyle()),n.add(en),a&&a.push(en)}var tn=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!s,ignoreCoarsePointer:!0,z2:1});tn.baseDimIdx=u,tn.largeDataIndices=c,tn.barWidth=d,n.add(tn),tn.useStyle(l.getVisual("style")),tn.style.stroke=null,getECData(tn).seriesIndex=t.seriesIndex,t.get("silent")||(tn.on("mousedown",largePathUpdateDataIndex),tn.on("mousemove",largePathUpdateDataIndex)),a&&a.push(tn)}var largePathUpdateDataIndex=throttle(function(t){var n=this,a=largePathFindDataIndex(n,t.offsetX,t.offsetY);getECData(n).dataIndex=a>=0?a:null},30,!1);function largePathFindDataIndex(t,n,a){for(var s=t.baseDimIdx,l=1-s,u=t.shape.points,c=t.largeDataIndices,d=[],Ct=[],ar=t.barWidth,en=0,tn=u.length/3;en<tn;en++){var on=en*3;if(Ct[s]=ar,Ct[l]=u[on+2],d[s]=u[on+s],d[l]=u[on+l],Ct[l]<0&&(d[l]+=Ct[l],Ct[l]=-Ct[l]),n>=d[0]&&n<=d[0]+Ct[0]&&a>=d[1]&&a<=d[1]+Ct[1])return c[en]}return-1}function createBackgroundShape(t,n,a){if(isCoordinateSystemType(a,"cartesian2d")){var s=n,l=a.getArea();return{x:t?s.x:l.x,y:t?l.y:s.y,width:t?s.width:l.width,height:t?l.height:s.height}}else{var l=a.getArea(),u=n;return{cx:l.cx,cy:l.cy,r0:t?l.r0:u.r0,r:t?l.r:u.r,startAngle:t?u.startAngle:0,endAngle:t?u.endAngle:Math.PI*2}}}function createBackgroundEl(t,n,a){var s=t.type==="polar"?Sector:Rect$2;return new s({shape:createBackgroundShape(n,a,t),silent:!0,z2:0})}function install$P(t){t.registerChartView(BarView),t.registerSeriesModel(BarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,a){var s=n.componentType||"series";a.eachComponent({mainType:s,query:n},function(l){n.sortInfo&&l.axis.setCategorySortInfo(n.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getBasicPieLayout(t,n){var a=getViewRect$5(t,n),s=t.get("center"),l=t.get("radius");isArray$1(l)||(l=[0,l]);var u=parsePercent(a.width,n.getWidth()),c=parsePercent(a.height,n.getHeight()),d=Math.min(u,c),Ct=parsePercent(l[0],d/2),ar=parsePercent(l[1],d/2),en,tn,on=t.coordinateSystem;if(on){var cn=on.dataToPoint(s);en=cn[0]||0,tn=cn[1]||0}else isArray$1(s)||(s=[s,s]),en=parsePercent(s[0],u)+a.x,tn=parsePercent(s[1],c)+a.y;return{cx:en,cy:tn,r0:Ct,r:ar}}function pieLayout(t,n,a){n.eachSeriesByType(t,function(s){var l=s.getData(),u=l.mapDimension("value"),c=getViewRect$5(s,a),d=getBasicPieLayout(s,a),Ct=d.cx,ar=d.cy,en=d.r,tn=d.r0,on=-s.get("startAngle")*RADIAN$2,cn=s.get("endAngle"),dn=s.get("padAngle")*RADIAN$2;cn=cn==="auto"?on-PI2:-cn*RADIAN$2;var Cn=s.get("minAngle")*RADIAN$2,In=Cn+dn,ix=0;l.each(u,function(Tx){!isNaN(Tx)&&ix++});var ax=l.getSum(u),ox=Math.PI/(ax||ix)*2,sx=s.get("clockwise"),ux=s.get("roseType"),cx=s.get("stillShowZeroSum"),hx=l.getDataExtent(u);hx[0]=0;var gx=sx?1:-1,fx=[on,cn],dx=gx*dn/2;normalizeArcAngles(fx,!sx),on=fx[0],cn=fx[1];var mx=getSeriesLayoutData(s);mx.startAngle=on,mx.endAngle=cn,mx.clockwise=sx;var vx=Math.abs(cn-on),bx=vx,xx=0,_x=on;if(l.setLayout({viewRect:c,r:en}),l.each(u,function(Tx,Cx){var Mx;if(isNaN(Tx)){l.setItemLayout(Cx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:sx,cx:Ct,cy:ar,r0:tn,r:ux?NaN:en});return}ux!=="area"?Mx=ax===0&&cx?ox:Tx*ox:Mx=vx/ix,Mx<In?(Mx=In,bx-=In):xx+=Tx;var Ax=_x+gx*Mx,Nx=0,Ux=0;dn>Mx?(Nx=_x+gx*Mx/2,Ux=Nx):(Nx=_x+dx,Ux=Ax-dx),l.setItemLayout(Cx,{angle:Mx,startAngle:Nx,endAngle:Ux,clockwise:sx,cx:Ct,cy:ar,r0:tn,r:ux?linearMap$2(Tx,hx,[tn,en]):en}),_x=Ax}),bx<PI2&&ix)if(bx<=.001){var Ex=vx/ix;l.each(u,function(Tx,Cx){if(!isNaN(Tx)){var Mx=l.getItemLayout(Cx);Mx.angle=Ex;var Ax=0,Nx=0;Ex<dn?(Ax=on+gx*(Cx+1/2)*Ex,Nx=Ax):(Ax=on+gx*Cx*Ex+dx,Nx=on+gx*(Cx+1)*Ex-dx),Mx.startAngle=Ax,Mx.endAngle=Nx}})}else ox=bx/xx,_x=on,l.each(u,function(Tx,Cx){if(!isNaN(Tx)){var Mx=l.getItemLayout(Cx),Ax=Mx.angle===In?In:Tx*ox,Nx=0,Ux=0;Ax<dn?(Nx=_x+gx*Ax/2,Ux=Nx):(Nx=_x+dx,Ux=_x+gx*Ax-dx),Mx.startAngle=Nx,Mx.endAngle=Ux,_x+=gx*Ax}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(t){return{seriesType:t,reset:function(n,a){var s=a.findComponents({mainType:"legend"});if(!(!s||!s.length)){var l=n.getData();l.filterSelf(function(u){for(var c=l.getName(u),d=0;d<s.length;d++)if(!s[d].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(t,n,a,s,l,u,c,d,Ct,ar){if(t.length<2)return;function en(Cn){for(var In=Cn.rB,ix=In*In,ax=0;ax<Cn.list.length;ax++){var ox=Cn.list[ax],sx=Math.abs(ox.label.y-a),ux=s+ox.len,cx=ux*ux,hx=Math.sqrt(Math.abs((1-sx*sx/ix)*cx)),gx=n+(hx+ox.len2)*l,fx=gx-ox.label.x,dx=ox.targetTextWidth-fx*l;constrainTextWidth(ox,dx,!0),ox.label.x=gx}}function tn(Cn){for(var In={list:[],maxY:0},ix={list:[],maxY:0},ax=0;ax<Cn.length;ax++)if(Cn[ax].labelAlignTo==="none"){var ox=Cn[ax],sx=ox.label.y>a?ix:In,ux=Math.abs(ox.label.y-a);if(ux>=sx.maxY){var cx=ox.label.x-n-ox.len2*l,hx=s+ox.len,gx=Math.abs(cx)<hx?Math.sqrt(ux*ux/(1-cx*cx/hx/hx)):hx;sx.rB=gx,sx.maxY=ux}sx.list.push(ox)}en(In),en(ix)}for(var on=t.length,cn=0;cn<on;cn++)if(t[cn].position==="outer"&&t[cn].labelAlignTo==="labelLine"){var dn=t[cn].label.x-ar;t[cn].linePoints[1][0]+=dn,t[cn].label.x=ar}shiftLayoutOnY(t,Ct,Ct+c)&&tn(t)}function avoidOverlap(t,n,a,s,l,u,c,d){for(var Ct=[],ar=[],en=Number.MAX_VALUE,tn=-Number.MAX_VALUE,on=0;on<t.length;on++){var cn=t[on].label;isPositionCenter(t[on])||(cn.x<n?(en=Math.min(en,cn.x),Ct.push(t[on])):(tn=Math.max(tn,cn.x),ar.push(t[on])))}for(var on=0;on<t.length;on++){var dn=t[on];if(!isPositionCenter(dn)&&dn.linePoints){if(dn.labelStyleWidth!=null)continue;var cn=dn.label,Cn=dn.linePoints,In=void 0;dn.labelAlignTo==="edge"?cn.x<n?In=Cn[2][0]-dn.labelDistance-c-dn.edgeDistance:In=c+l-dn.edgeDistance-Cn[2][0]-dn.labelDistance:dn.labelAlignTo==="labelLine"?cn.x<n?In=en-c-dn.bleedMargin:In=c+l-tn-dn.bleedMargin:cn.x<n?In=cn.x-c-dn.bleedMargin:In=c+l-cn.x-dn.bleedMargin,dn.targetTextWidth=In,constrainTextWidth(dn,In)}}adjustSingleSide(ar,n,a,s,1,l,u,c,d,tn),adjustSingleSide(Ct,n,a,s,-1,l,u,c,d,en);for(var on=0;on<t.length;on++){var dn=t[on];if(!isPositionCenter(dn)&&dn.linePoints){var cn=dn.label,Cn=dn.linePoints,ix=dn.labelAlignTo==="edge",ax=cn.style.padding,ox=ax?ax[1]+ax[3]:0,sx=cn.style.backgroundColor?0:ox,ux=dn.rect.width+sx,cx=Cn[1][0]-Cn[2][0];ix?cn.x<n?Cn[2][0]=c+dn.edgeDistance+ux+dn.labelDistance:Cn[2][0]=c+l-dn.edgeDistance-ux-dn.labelDistance:(cn.x<n?Cn[2][0]=cn.x+dn.labelDistance:Cn[2][0]=cn.x-dn.labelDistance,Cn[1][0]=Cn[2][0]+cx),Cn[1][1]=Cn[2][1]=cn.y}}}function constrainTextWidth(t,n,a){if(a===void 0&&(a=!1),t.labelStyleWidth==null){var s=t.label,l=s.style,u=t.rect,c=l.backgroundColor,d=l.padding,Ct=d?d[1]+d[3]:0,ar=l.overflow,en=u.width+(c?0:Ct);if(n<en||a){var tn=u.height;if(ar&&ar.match("break")){s.setStyle("backgroundColor",null),s.setStyle("width",n-Ct);var on=s.getBoundingRect();s.setStyle("width",Math.ceil(on.width)),s.setStyle("backgroundColor",c)}else{var cn=n-Ct,dn=n<en?cn:a?cn>t.unconstrainedWidth?null:cn:null;s.setStyle("width",dn)}var Cn=s.getBoundingRect();u.width=Cn.width;var In=(s.style.margin||0)+2.1;u.height=Cn.height+In,u.y-=(u.height-tn)/2}}}function isPositionCenter(t){return t.position==="center"}function pieLabelLayout(t){var n=t.getData(),a=[],s,l,u=!1,c=(t.get("minShowLabelAngle")||0)*RADIAN$1,d=n.getLayout("viewRect"),Ct=n.getLayout("r"),ar=d.width,en=d.x,tn=d.y,on=d.height;function cn(cx){cx.ignore=!0}function dn(cx){if(!cx.ignore)return!0;for(var hx in cx.states)if(cx.states[hx].ignore===!1)return!0;return!1}n.each(function(cx){var hx=n.getItemGraphicEl(cx),gx=hx.shape,fx=hx.getTextContent(),dx=hx.getTextGuideLine(),mx=n.getItemModel(cx),vx=mx.getModel("label"),bx=vx.get("position")||mx.get(["emphasis","label","position"]),xx=vx.get("distanceToLabelLine"),_x=vx.get("alignTo"),Ex=parsePercent(vx.get("edgeDistance"),ar),Tx=vx.get("bleedMargin"),Cx=mx.getModel("labelLine"),Mx=Cx.get("length");Mx=parsePercent(Mx,ar);var Ax=Cx.get("length2");if(Ax=parsePercent(Ax,ar),Math.abs(gx.endAngle-gx.startAngle)<c){each$f(fx.states,cn),fx.ignore=!0,dx&&(each$f(dx.states,cn),dx.ignore=!0);return}if(dn(fx)){var Nx=(gx.startAngle+gx.endAngle)/2,Ux=Math.cos(Nx),Rx=Math.sin(Nx),Ox,Px,$x,Lx;s=gx.cx,l=gx.cy;var zx=bx==="inside"||bx==="inner";if(bx==="center")Ox=gx.cx,Px=gx.cy,Lx="center";else{var qx=(zx?(gx.r+gx.r0)/2*Ux:gx.r*Ux)+s,jx=(zx?(gx.r+gx.r0)/2*Rx:gx.r*Rx)+l;if(Ox=qx+Ux*3,Px=jx+Rx*3,!zx){var Hx=qx+Ux*(Mx+Ct-gx.r),Vx=jx+Rx*(Mx+Ct-gx.r),nE=Hx+(Ux<0?-1:1)*Ax,Wx=Vx;_x==="edge"?Ox=Ux<0?en+Ex:en+ar-Ex:Ox=nE+(Ux<0?-xx:xx),Px=Wx,$x=[[qx,jx],[Hx,Vx],[nE,Wx]]}Lx=zx?"center":_x==="edge"?Ux>0?"right":"left":Ux>0?"left":"right"}var tE=Math.PI,lE=0,iE=vx.get("rotate");if(isNumber(iE))lE=iE*(tE/180);else if(bx==="center")lE=0;else if(iE==="radial"||iE===!0){var Xx=Ux<0?-Nx+tE:-Nx;lE=Xx}else if(iE==="tangential"&&bx!=="outside"&&bx!=="outer"){var CE=Math.atan2(Ux,Rx);CE<0&&(CE=tE*2+CE);var RE=Rx>0;RE&&(CE=tE+CE),lE=CE-tE}if(u=!!lE,fx.x=Ox,fx.y=Px,fx.rotation=lE,fx.setStyle({verticalAlign:"middle"}),zx){fx.setStyle({align:Lx});var FE=fx.states.select;FE&&(FE.x+=fx.x,FE.y+=fx.y)}else{var SE=fx.getBoundingRect().clone();SE.applyTransform(fx.getComputedTransform());var EE=(fx.style.margin||0)+2.1;SE.y-=EE/2,SE.height+=EE,a.push({label:fx,labelLine:dx,position:bx,len:Mx,len2:Ax,minTurnAngle:Cx.get("minTurnAngle"),maxSurfaceAngle:Cx.get("maxSurfaceAngle"),surfaceNormal:new Point(Ux,Rx),linePoints:$x,textAlign:Lx,labelDistance:xx,labelAlignTo:_x,edgeDistance:Ex,bleedMargin:Tx,rect:SE,unconstrainedWidth:SE.width,labelStyleWidth:fx.style.width})}hx.setTextConfig({inside:zx})}}),!u&&t.get("avoidLabelOverlap")&&avoidOverlap(a,s,l,Ct,ar,on,en,tn);for(var Cn=0;Cn<a.length;Cn++){var In=a[Cn],ix=In.label,ax=In.labelLine,ox=isNaN(ix.x)||isNaN(ix.y);if(ix){ix.setStyle({align:In.textAlign}),ox&&(each$f(ix.states,cn),ix.ignore=!0);var sx=ix.states.select;sx&&(sx.x+=ix.x,sx.y+=ix.y)}if(ax){var ux=In.linePoints;ox||!ux?(each$f(ax.states,cn),ax.ignore=!0):(limitTurnAngle(ux,In.minTurnAngle),limitSurfaceAngle(ux,In.surfaceNormal,In.maxSurfaceAngle),ax.setShape({points:ux}),ix.__hostTarget.textGuideLineConfig={anchor:new Point(ux[0][0],ux[0][1])})}}}var PiePiece=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;u.z2=2;var c=new ZRText;return u.setTextContent(c),u.updateData(a,s,l,!0),u}return n.prototype.updateData=function(a,s,l,u){var c=this,d=a.hostModel,Ct=a.getItemModel(s),ar=Ct.getModel("emphasis"),en=a.getItemLayout(s),tn=extend(getSectorCornerRadius(Ct.getModel("itemStyle"),en,!0),en);if(isNaN(tn.startAngle)){c.setShape(tn);return}if(u){c.setShape(tn);var on=d.getShallow("animationType");d.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},d,{dataIndex:s,isFrom:!0}),c.originX=tn.cx,c.originY=tn.cy):on==="scale"?(c.shape.r=en.r0,initProps(c,{shape:{r:en.r}},d,s)):l!=null?(c.setShape({startAngle:l,endAngle:l}),initProps(c,{shape:{startAngle:en.startAngle,endAngle:en.endAngle}},d,s)):(c.shape.endAngle=en.startAngle,updateProps$1(c,{shape:{endAngle:en.endAngle}},d,s))}else saveOldStyle(c),updateProps$1(c,{shape:tn},d,s);c.useStyle(a.getItemVisual(s,"style")),setStatesStylesFromModel(c,Ct);var cn=(en.startAngle+en.endAngle)/2,dn=d.get("selectedOffset"),Cn=Math.cos(cn)*dn,In=Math.sin(cn)*dn,ix=Ct.getShallow("cursor");ix&&c.attr("cursor",ix),this._updateLabel(d,a,s),c.ensureState("emphasis").shape=extend({r:en.r+(ar.get("scale")&&ar.get("scaleSize")||0)},getSectorCornerRadius(ar.getModel("itemStyle"),en)),extend(c.ensureState("select"),{x:Cn,y:In,shape:getSectorCornerRadius(Ct.getModel(["select","itemStyle"]),en)}),extend(c.ensureState("blur"),{shape:getSectorCornerRadius(Ct.getModel(["blur","itemStyle"]),en)});var ax=c.getTextGuideLine(),ox=c.getTextContent();ax&&extend(ax.ensureState("select"),{x:Cn,y:In}),extend(ox.ensureState("select"),{x:Cn,y:In}),toggleHoverEmphasis(this,ar.get("focus"),ar.get("blurScope"),ar.get("disabled"))},n.prototype._updateLabel=function(a,s,l){var u=this,c=s.getItemModel(l),d=c.getModel("labelLine"),Ct=s.getItemVisual(l,"style"),ar=Ct&&Ct.fill,en=Ct&&Ct.opacity;setLabelStyle(u,getLabelStatesModels(c),{labelFetcher:s.hostModel,labelDataIndex:l,inheritColor:ar,defaultOpacity:en,defaultText:a.getFormattedLabel(l,"normal")||s.getName(l)});var tn=u.getTextContent();u.setTextConfig({position:null,rotation:null}),tn.attr({z2:10});var on=a.get(["label","position"]);if(on!=="outside"&&on!=="outer")u.removeTextGuideLine();else{var cn=this.getTextGuideLine();cn||(cn=new Polyline$1,this.setTextGuideLine(cn)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:ar,opacity:retrieve3(d.get(["lineStyle","opacity"]),en,1)})}},n})(Sector),PieView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,s,l,u){var c=a.getData(),d=this._data,Ct=this.group,ar;if(!d&&c.count()>0){for(var en=c.getItemLayout(0),tn=1;isNaN(en&&en.startAngle)&&tn<c.count();++tn)en=c.getItemLayout(tn);en&&(ar=en.startAngle)}if(this._emptyCircleSector&&Ct.remove(this._emptyCircleSector),c.count()===0&&a.get("showEmptyCircle")){var on=getSeriesLayoutData(a),cn=new Sector({shape:extend(getBasicPieLayout(a,l),on)});cn.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=cn,Ct.add(cn)}c.diff(d).add(function(dn){var Cn=new PiePiece(c,dn,ar);c.setItemGraphicEl(dn,Cn),Ct.add(Cn)}).update(function(dn,Cn){var In=d.getItemGraphicEl(Cn);In.updateData(c,dn,ar),In.off("click"),Ct.add(In),c.setItemGraphicEl(dn,In)}).remove(function(dn){var Cn=d.getItemGraphicEl(dn);removeElementWithFadeOut(Cn,a,dn)}).execute(),pieLabelLayout(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},n.prototype.dispose=function(){},n.prototype.containPoint=function(a,s){var l=s.getData(),u=l.getItemLayout(0);if(u){var c=a[0]-u.cx,d=a[1]-u.cy,Ct=Math.sqrt(c*c+d*d);return Ct<=u.r&&Ct>=u.r0}},n.type="pie",n})(ChartView);function createSeriesDataSimply(t,n,a){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:t.getEncode()},n);var s=t.getSource(),l=prepareSeriesDataSchema(s,n).dimensions,u=new SeriesData(l,t);return u.initData(s,a),u}var LegendVisualProvider=(function(){function t(n,a){this._getDataWithEncodedVisual=n,this._getRawData=a}return t.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},t.prototype.containName=function(n){var a=this._getRawData();return a.indexOfName(n)>=0},t.prototype.indexOfName=function(n){var a=this._getDataWithEncodedVisual();return a.indexOfName(n)},t.prototype.getItemVisual=function(n,a){var s=this._getDataWithEncodedVisual();return s.getItemVisual(n,a)},t})(),innerData=makeInner(),PieSeriesModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype.getDataParams=function(a){var s=this.getData(),l=innerData(s),u=l.seats;if(!u){var c=[];s.each(s.mapDimension("value"),function(Ct){c.push(Ct)}),u=l.seats=getPercentSeats(c,s.hostModel.get("percentPrecision"))}var d=t.prototype.getDataParams.call(this,a);return d.percent=u[a]||0,d.$vars.push("percent"),d},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,l=a.emphasis.labelLine;s.show=s.show&&a.label.show,l.show=l.show&&a.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n})(SeriesModel);function negativeDataFilter(t){return{seriesType:t,reset:function(n,a){var s=n.getData();s.filterSelf(function(l){var u=s.mapDimension("value"),c=s.get(u,l);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$O(t){t.registerChartView(PieView),t.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",t.registerAction),t.registerLayout(curry$1(pieLayout,"pie")),t.registerProcessor(dataFilter$1("pie")),t.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},n.prototype.brushSelector=function(a,s,l){return l.point(s.getItemLayout(a))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n})(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=(function(){function t(){}return t})(),LargeSymbolPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(a,s){var l=s.points,u=s.size,c=this.symbolProxy,d=c.shape,Ct=a.getContext?a.getContext():a,ar=Ct&&u[0]<BOOST_SIZE_THRESHOLD,en=this.softClipShape,tn;if(ar){this._ctx=Ct;return}for(this._ctx=null,tn=this._off;tn<l.length;){var on=l[tn++],cn=l[tn++];isNaN(on)||isNaN(cn)||en&&!en.contain(on,cn)||(d.x=on-u[0]/2,d.y=cn-u[1]/2,d.width=u[0],d.height=u[1],c.buildPath(a,d,!0))}this.incremental&&(this._off=tn,this.notClear=!0)},n.prototype.afterBrush=function(){var a=this.shape,s=a.points,l=a.size,u=this._ctx,c=this.softClipShape,d;if(u){for(d=this._off;d<s.length;){var Ct=s[d++],ar=s[d++];isNaN(Ct)||isNaN(ar)||c&&!c.contain(Ct,ar)||u.fillRect(Ct-l[0]/2,ar-l[1]/2,l[0],l[1])}this.incremental&&(this._off=d,this.notClear=!0)}},n.prototype.findDataIndex=function(a,s){for(var l=this.shape,u=l.points,c=l.size,d=Math.max(c[0],4),Ct=Math.max(c[1],4),ar=u.length/2-1;ar>=0;ar--){var en=ar*2,tn=u[en]-d/2,on=u[en+1]-Ct/2;if(a>=tn&&s>=on&&a<=tn+d&&s<=on+Ct)return ar}return-1},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=l[0],s=l[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,l=s.points,u=s.size,c=u[0],d=u[1],Ct=1/0,ar=1/0,en=-1/0,tn=-1/0,on=0;on<l.length;){var cn=l[on++],dn=l[on++];Ct=Math.min(cn,Ct),en=Math.max(cn,en),ar=Math.min(dn,ar),tn=Math.max(dn,tn)}a=this._rect=new BoundingRect(Ct-c/2,ar-d/2,en-Ct+c,tn-ar+d)}return a},n})(Path),LargeSymbolDraw=(function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n,a){this._clear();var s=this._create();s.setShape({points:n.getLayout("points")}),this._setCommon(s,n,a)},t.prototype.updateLayout=function(n){var a=n.getLayout("points");this.group.eachChild(function(s){if(s.startIndex!=null){var l=(s.endIndex-s.startIndex)*2,u=s.startIndex*4*2;a=new Float32Array(a.buffer,u,l)}s.setShape("points",a),s.reset()})},t.prototype.incrementalPrepareUpdate=function(n){this._clear()},t.prototype.incrementalUpdate=function(n,a,s){var l=this._newAdded[0],u=a.getLayout("points"),c=l&&l.shape.points;if(c&&c.length<2e4){var d=c.length,Ct=new Float32Array(d+u.length);Ct.set(c),Ct.set(u,d),l.endIndex=n.end,l.setShape({points:Ct})}else{this._newAdded=[];var ar=this._create();ar.startIndex=n.start,ar.endIndex=n.end,ar.incremental=!0,ar.setShape({points:u}),this._setCommon(ar,a,s)}},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},t.prototype._setCommon=function(n,a,s){var l=a.hostModel;s=s||{};var u=a.getVisual("symbolSize");n.setShape("size",u instanceof Array?u:[u,u]),n.softClipShape=s.clipShape||null,n.symbolProxy=createSymbol$1(a.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var c=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(l.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var d=a.getVisual("style"),Ct=d&&d.fill;Ct&&n.setColor(Ct);var ar=getECData(n);ar.seriesIndex=l.seriesIndex,n.on("mousemove",function(en){ar.dataIndex=null;var tn=n.hoverDataIdx;tn>=0&&(ar.dataIndex=tn+(n.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t})(),ScatterView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.updateData(u,{clipShape:this._getClipShape(a)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(a,s,l){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.incrementalPrepareUpdate(u),this._finished=!1},n.prototype.incrementalRender=function(a,s,l){this._symbolDraw.incrementalUpdate(a,s.getData(),{clipShape:this._getClipShape(s)}),this._finished=a.end===s.getData().count()},n.prototype.updateTransform=function(a,s,l){var u=a.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var c=pointsLayout("").reset(a,s,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},n.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},n.prototype._getClipShape=function(a){if(a.get("clip",!0)){var s=a.coordinateSystem;return s&&s.getArea&&s.getArea(.1)}},n.prototype._updateSymbolDraw=function(a,s){var l=this._symbolDraw,u=s.pipelineContext,c=u.large;return(!l||c!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=c?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=c,this.group.removeAll()),this.group.add(l.group),l},n.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n})(ChartView),GridModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n})(ComponentModel),CartesianAxisModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n})(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(t,n,a,s){each$f(AXIS_TYPES,function(l,u){var c=merge(merge({},axisDefault[u],!0),s,!0),d=(function(Ct){__extends(ar,Ct);function ar(){var en=Ct!==null&&Ct.apply(this,arguments)||this;return en.type=n+"Axis."+u,en}return ar.prototype.mergeDefaultAndTheme=function(en,tn){var on=fetchLayoutMode(this),cn=on?getLayoutParams(en):{},dn=tn.getTheme();merge(en,dn.get(u+"Axis")),merge(en,this.getDefaultOption()),en.type=getAxisType(en),on&&mergeLayoutParam(en,cn,on)},ar.prototype.optionUpdated=function(){var en=this.option;en.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},ar.prototype.getCategories=function(en){var tn=this.option;if(tn.type==="category")return en?tn.data:this.__ordinalMeta.categories},ar.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},ar.type=n+"Axis."+u,ar.defaultOption=c,ar})(a);t.registerComponentModel(d)}),t.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(t){return t.type||(t.data?"category":"value")}var Cartesian=(function(){function t(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return t.prototype.getAxis=function(n){return this._axes[n]},t.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},t.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(a){return a.scale.type===n})},t.prototype.addAxis=function(n){var a=n.dim;this._axes[a]=n,this._dimList.push(a)},t})(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(t){return t.type==="interval"||t.type==="time"}var Cartesian2D=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=cartesian2DDimensions,a}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,s=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(a)||!canCalculateAffineTransform(s))){var l=a.getExtent(),u=s.getExtent(),c=this.dataToPoint([l[0],u[0]]),d=this.dataToPoint([l[1],u[1]]),Ct=l[1]-l[0],ar=u[1]-u[0];if(!(!Ct||!ar)){var en=(d[0]-c[0])/Ct,tn=(d[1]-c[1])/ar,on=c[0]-l[0]*en,cn=c[1]-u[0]*tn,dn=this._transform=[en,0,0,tn,on,cn];this._invTransform=invert([],dn)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(a){var s=this.getAxis("x"),l=this.getAxis("y");return s.contain(s.toLocalCoord(a[0]))&&l.contain(l.toLocalCoord(a[1]))},n.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},n.prototype.containZone=function(a,s){var l=this.dataToPoint(a),u=this.dataToPoint(s),c=this.getArea(),d=new BoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]);return c.intersect(d)},n.prototype.dataToPoint=function(a,s,l){l=l||[];var u=a[0],c=a[1];if(this._transform&&u!=null&&isFinite(u)&&c!=null&&isFinite(c))return applyTransform$1(l,a,this._transform);var d=this.getAxis("x"),Ct=this.getAxis("y");return l[0]=d.toGlobalCoord(d.dataToCoord(u,s)),l[1]=Ct.toGlobalCoord(Ct.dataToCoord(c,s)),l},n.prototype.clampData=function(a,s){var l=this.getAxis("x").scale,u=this.getAxis("y").scale,c=l.getExtent(),d=u.getExtent(),Ct=l.parse(a[0]),ar=u.parse(a[1]);return s=s||[],s[0]=Math.min(Math.max(Math.min(c[0],c[1]),Ct),Math.max(c[0],c[1])),s[1]=Math.min(Math.max(Math.min(d[0],d[1]),ar),Math.max(d[0],d[1])),s},n.prototype.pointToData=function(a,s){var l=[];if(this._invTransform)return applyTransform$1(l,a,this._invTransform);var u=this.getAxis("x"),c=this.getAxis("y");return l[0]=u.coordToData(u.toLocalCoord(a[0]),s),l[1]=c.coordToData(c.toLocalCoord(a[1]),s),l},n.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},n.prototype.getArea=function(a){a=a||0;var s=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),u=Math.min(s[0],s[1])-a,c=Math.min(l[0],l[1])-a,d=Math.max(s[0],s[1])-u+a,Ct=Math.max(l[0],l[1])-c+a;return new BoundingRect(u,c,d,Ct)},n})(Cartesian),Axis2D=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,a,s,l)||this;return d.index=0,d.type=u||"value",d.position=c||"bottom",d}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.getGlobalExtent=function(a){var s=this.getExtent();return s[0]=this.toGlobalCoord(s[0]),s[1]=this.toGlobalCoord(s[1]),a&&s[0]>s[1]&&s.reverse(),s},n.prototype.pointToData=function(a,s){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),s)},n.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},n})(Axis);function layout$2(t,n,a){a=a||{};var s=t.coordinateSystem,l=n.axis,u={},c=l.getAxesOnZeroOf()[0],d=l.position,Ct=c?"onZero":d,ar=l.dim,en=s.getRect(),tn=[en.x,en.x+en.width,en.y,en.y+en.height],on={left:0,right:1,top:0,bottom:1,onZero:2},cn=n.get("offset")||0,dn=ar==="x"?[tn[2]-cn,tn[3]+cn]:[tn[0]-cn,tn[1]+cn];if(c){var Cn=c.toGlobalCoord(c.dataToCoord(0));dn[on.onZero]=Math.max(Math.min(Cn,dn[1]),dn[0])}u.position=[ar==="y"?dn[on[Ct]]:tn[0],ar==="x"?dn[on[Ct]]:tn[3]],u.rotation=Math.PI/2*(ar==="x"?0:1);var In={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=In[d],u.labelOffset=c?dn[on[d]]-dn[on.onZero]:0,n.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(a.labelInside,n.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var ix=n.get(["axisLabel","rotate"]);return u.labelRotate=Ct==="top"?-ix:ix,u.z2=1,u}function isCartesian2DSeries(t){return t.get("coordinateSystem")==="cartesian2d"}function findAxisModels(t){var n={xAxisModel:null,yAxisModel:null};return each$f(n,function(a,s){var l=s.replace(/Model$/,""),u=t.getReferringComponents(l,SINGLE_REFERRING).models[0];n[s]=u}),n}var mathLog=Math.log;function alignScaleTicks(t,n,a){var s=IntervalScale.prototype,l=s.getTicks.call(a),u=s.getTicks.call(a,!0),c=l.length-1,d=s.getInterval.call(a),Ct=getScaleExtent(t,n),ar=Ct.extent,en=Ct.fixMin,tn=Ct.fixMax;if(t.type==="log"){var on=mathLog(t.base);ar=[mathLog(ar[0])/on,mathLog(ar[1])/on]}t.setExtent(ar[0],ar[1]),t.calcNiceExtent({splitNumber:c,fixMin:en,fixMax:tn});var cn=s.getExtent.call(t);en&&(ar[0]=cn[0]),tn&&(ar[1]=cn[1]);var dn=s.getInterval.call(t),Cn=ar[0],In=ar[1];if(en&&tn)dn=(In-Cn)/c;else if(en)for(In=ar[0]+dn*c;In<ar[1]&&isFinite(In)&&isFinite(ar[1]);)dn=increaseInterval(dn),In=ar[0]+dn*c;else if(tn)for(Cn=ar[1]-dn*c;Cn>ar[0]&&isFinite(Cn)&&isFinite(ar[0]);)dn=increaseInterval(dn),Cn=ar[1]-dn*c;else{var ix=t.getTicks().length-1;ix>c&&(dn=increaseInterval(dn));var ax=dn*c;In=Math.ceil(ar[1]/dn)*dn,Cn=round$3(In-ax),Cn<0&&ar[0]>=0?(Cn=0,In=round$3(ax)):In>0&&ar[1]<=0&&(In=0,Cn=-round$3(ax))}var ox=(l[0].value-u[0].value)/d,sx=(l[c].value-u[c].value)/d;s.setExtent.call(t,Cn+dn*ox,In+dn*sx),s.setInterval.call(t,dn),(ox||sx)&&s.setNiceExtent.call(t,Cn+dn,In-dn)}var Grid=(function(){function t(n,a,s){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,a,s),this.model=n}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(n,a){var s=this._axesMap;this._updateScale(n,this.model);function l(c){var d,Ct=keys(c),ar=Ct.length;if(ar){for(var en=[],tn=ar-1;tn>=0;tn--){var on=+Ct[tn],cn=c[on],dn=cn.model,Cn=cn.scale;isIntervalOrLogScale(Cn)&&dn.get("alignTicks")&&dn.get("interval")==null?en.push(cn):(niceScaleExtent(Cn,dn),isIntervalOrLogScale(Cn)&&(d=cn))}en.length&&(d||(d=en.pop(),niceScaleExtent(d.scale,d.model)),each$f(en,function(In){alignScaleTicks(In.scale,In.model,d.scale)}))}}l(s.x),l(s.y);var u={};each$f(s.x,function(c){fixAxisOnZero(s,"y",c,u)}),each$f(s.y,function(c){fixAxisOnZero(s,"x",c,u)}),this.resize(this.model,a)},t.prototype.resize=function(n,a,s){var l=n.getBoxLayoutParams(),u=!s&&n.get("containLabel"),c=getLayoutRect(l,{width:a.getWidth(),height:a.getHeight()});this._rect=c;var d=this._axesList;Ct(),u&&(each$f(d,function(ar){if(!ar.model.get(["axisLabel","inside"])){var en=estimateLabelUnionRect(ar);if(en){var tn=ar.isHorizontal()?"height":"width",on=ar.model.get(["axisLabel","margin"]);c[tn]-=en[tn]+on,ar.position==="top"?c.y+=en.height+on:ar.position==="left"&&(c.x+=en.width+on)}}}),Ct()),each$f(this._coordsList,function(ar){ar.calcAffineTransform()});function Ct(){each$f(d,function(ar){var en=ar.isHorizontal(),tn=en?[0,c.width]:[0,c.height],on=ar.inverse?1:0;ar.setExtent(tn[on],tn[1-on]),updateAxisTransform(ar,en?c.x:c.y)})}},t.prototype.getAxis=function(n,a){var s=this._axesMap[n];if(s!=null)return s[a||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(n,a){if(n!=null&&a!=null){var s="x"+n+"y"+a;return this._coordsMap[s]}isObject$3(n)&&(a=n.yAxisIndex,n=n.xAxisIndex);for(var l=0,u=this._coordsList;l<u.length;l++)if(u[l].getAxis("x").index===n||u[l].getAxis("y").index===a)return u[l]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(n,a,s){var l=this._findConvertTarget(a);return l.cartesian?l.cartesian.dataToPoint(s):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(s)):null},t.prototype.convertFromPixel=function(n,a,s){var l=this._findConvertTarget(a);return l.cartesian?l.cartesian.pointToData(s):l.axis?l.axis.coordToData(l.axis.toLocalCoord(s)):null},t.prototype._findConvertTarget=function(n){var a=n.seriesModel,s=n.xAxisModel||a&&a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=n.yAxisModel||a&&a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=n.gridModel,c=this._coordsList,d,Ct;if(a)d=a.coordinateSystem,indexOf(c,d)<0&&(d=null);else if(s&&l)d=this.getCartesian(s.componentIndex,l.componentIndex);else if(s)Ct=this.getAxis("x",s.componentIndex);else if(l)Ct=this.getAxis("y",l.componentIndex);else if(u){var ar=u.coordinateSystem;ar===this&&(d=this._coordsList[0])}return{cartesian:d,axis:Ct}},t.prototype.containPoint=function(n){var a=this._coordsList[0];if(a)return a.containPoint(n)},t.prototype._initCartesian=function(n,a,s){var l=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},d={x:{},y:{}},Ct={x:0,y:0};if(a.eachComponent("xAxis",ar("x"),this),a.eachComponent("yAxis",ar("y"),this),!Ct.x||!Ct.y){this._axesMap={},this._axesList=[];return}this._axesMap=d,each$f(d.x,function(en,tn){each$f(d.y,function(on,cn){var dn="x"+tn+"y"+cn,Cn=new Cartesian2D(dn);Cn.master=l,Cn.model=n,l._coordsMap[dn]=Cn,l._coordsList.push(Cn),Cn.addAxis(en),Cn.addAxis(on)})});function ar(en){return function(tn,on){if(isAxisUsedInTheGrid(tn,n)){var cn=tn.get("position");en==="x"?cn!=="top"&&cn!=="bottom"&&(cn=c.bottom?"top":"bottom"):cn!=="left"&&cn!=="right"&&(cn=c.left?"right":"left"),c[cn]=!0;var dn=new Axis2D(en,createScaleByModel$1(tn),[0,0],tn.get("type"),cn),Cn=dn.type==="category";dn.onBand=Cn&&tn.get("boundaryGap"),dn.inverse=tn.get("inverse"),tn.axis=dn,dn.model=tn,dn.grid=u,dn.index=on,u._axesList.push(dn),d[en][on]=dn,Ct[en]++}}}},t.prototype._updateScale=function(n,a){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var u=l.model.get("categorySortInfo");l.scale.setSortInfo(u)}}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,d=u.yAxisModel;if(!isAxisUsedInTheGrid(c,a)||!isAxisUsedInTheGrid(d,a))return;var Ct=this.getCartesian(c.componentIndex,d.componentIndex),ar=l.getData(),en=Ct.getAxis("x"),tn=Ct.getAxis("y");s(ar,en),s(ar,tn)}},this);function s(l,u){each$f(getDataDimensionsOnAxis(l,u.dim),function(c){u.scale.unionExtentFromData(l,c)})}},t.prototype.getTooltipAxes=function(n){var a=[],s=[];return each$f(this.getCartesians(),function(l){var u=n!=null&&n!=="auto"?l.getAxis(n):l.getBaseAxis(),c=l.getOtherAxis(u);indexOf(a,u)<0&&a.push(u),indexOf(s,c)<0&&s.push(c)}),{baseAxes:a,otherAxes:s}},t.create=function(n,a){var s=[];return n.eachComponent("grid",function(l,u){var c=new t(l,n,a);c.name="grid_"+u,c.resize(l,a,!0),l.coordinateSystem=c,s.push(c)}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,d=u.yAxisModel,Ct=c.getCoordSysModel(),ar=Ct.coordinateSystem;l.coordinateSystem=ar.getCartesian(c.componentIndex,d.componentIndex)}}),s},t.dimensions=cartesian2DDimensions,t})();function isAxisUsedInTheGrid(t,n){return t.getCoordSysModel()===n}function fixAxisOnZero(t,n,a,s){a.getAxesOnZeroOf=function(){return u?[u]:[]};var l=t[n],u,c=a.model,d=c.get(["axisLine","onZero"]),Ct=c.get(["axisLine","onZeroAxisIndex"]);if(!d)return;if(Ct!=null)canOnZeroToAxis(l[Ct])&&(u=l[Ct]);else for(var ar in l)if(l.hasOwnProperty(ar)&&canOnZeroToAxis(l[ar])&&!s[en(l[ar])]){u=l[ar];break}u&&(s[en(u)]=!0);function en(tn){return tn.dim+"_"+tn.index}}function canOnZeroToAxis(t){return t&&t.type!=="category"&&t.type!=="time"&&ifAxisCrossZero(t)}function updateAxisTransform(t,n){var a=t.getExtent(),s=a[0]+a[1];t.toGlobalCoord=t.dim==="x"?function(l){return l+n}:function(l){return s-l+n},t.toLocalCoord=t.dim==="x"?function(l){return l-n}:function(l){return s-l+n}}var PI$3=Math.PI,AxisBuilder=(function(){function t(n,a){this.group=new Group$3,this.opt=a,this.axisModel=n,defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var s=new Group$3({x:a.position[0],y:a.position[1],rotation:a.rotation});s.updateTransform(),this._transformGroup=s}return t.prototype.hasBuilder=function(n){return!!builders[n]},t.prototype.add=function(n){builders[n](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(n,a,s){var l=remRadian(a-n),u,c;return isRadianAroundZero(l)?(c=s>0?"top":"bottom",u="center"):isRadianAroundZero(l-PI$3)?(c=s>0?"bottom":"top",u="center"):(c="middle",l>0&&l<PI$3?u=s>0?"right":"left":u=s>0?"left":"right"),{rotation:l,textAlign:u,textVerticalAlign:c}},t.makeAxisEventDataBase=function(n){var a={componentType:n.mainType,componentIndex:n.componentIndex};return a[n.mainType+"Index"]=n.componentIndex,a},t.isLabelSilent=function(n){var a=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||a&&a.show)},t})(),builders={axisLine:function(t,n,a,s){var l=n.get(["axisLine","show"]);if(l==="auto"&&t.handleAutoShown&&(l=t.handleAutoShown("axisLine")),!!l){var u=n.axis.getExtent(),c=s.transform,d=[u[0],0],Ct=[u[1],0],ar=d[0]>Ct[0];c&&(applyTransform$1(d,d,c),applyTransform$1(Ct,Ct,c));var en=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),tn=new Line$1({shape:{x1:d[0],y1:d[1],x2:Ct[0],y2:Ct[1]},style:en,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(tn.shape,tn.style.lineWidth),tn.anid="line",a.add(tn);var on=n.get(["axisLine","symbol"]);if(on!=null){var cn=n.get(["axisLine","symbolSize"]);isString$1(on)&&(on=[on,on]),(isString$1(cn)||isNumber(cn))&&(cn=[cn,cn]);var dn=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,cn),Cn=cn[0],In=cn[1];each$f([{rotate:t.rotation+Math.PI/2,offset:dn[0],r:0},{rotate:t.rotation-Math.PI/2,offset:dn[1],r:Math.sqrt((d[0]-Ct[0])*(d[0]-Ct[0])+(d[1]-Ct[1])*(d[1]-Ct[1]))}],function(ix,ax){if(on[ax]!=="none"&&on[ax]!=null){var ox=createSymbol$1(on[ax],-Cn/2,-In/2,Cn,In,en.stroke,!0),sx=ix.r+ix.offset,ux=ar?Ct:d;ox.attr({rotation:ix.rotate,x:ux[0]+sx*Math.cos(t.rotation),y:ux[1]-sx*Math.sin(t.rotation),silent:!0,z2:11}),a.add(ox)}})}}},axisTickLabel:function(t,n,a,s){var l=buildAxisMajorTicks(a,s,n,t),u=buildAxisLabel(a,s,n,t);if(fixMinMaxLabelShow(n,u,l),buildAxisMinorTicks(a,s,n,t.tickDirection),n.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(u,function(d){return{label:d,priority:d.z2,defaultAttr:{ignore:d.ignore}}}));hideOverlap(c)}},axisName:function(t,n,a,s){var l=retrieve(t.axisName,n.get("name"));if(l){var u=n.get("nameLocation"),c=t.nameDirection,d=n.getModel("nameTextStyle"),Ct=n.get("nameGap")||0,ar=n.axis.getExtent(),en=ar[0]>ar[1]?-1:1,tn=[u==="start"?ar[0]-en*Ct:u==="end"?ar[1]+en*Ct:(ar[0]+ar[1])/2,isNameLocationCenter(u)?t.labelOffset+c*Ct:0],on,cn=n.get("nameRotate");cn!=null&&(cn=cn*PI$3/180);var dn;isNameLocationCenter(u)?on=AxisBuilder.innerTextLayout(t.rotation,cn??t.rotation,c):(on=endTextLayout(t.rotation,u,cn||0,ar),dn=t.axisNameAvailableWidth,dn!=null&&(dn=Math.abs(dn/Math.sin(on.rotation)),!isFinite(dn)&&(dn=null)));var Cn=d.getFont(),In=n.get("nameTruncate",!0)||{},ix=In.ellipsis,ax=retrieve(t.nameTruncateMaxWidth,In.maxWidth,dn),ox=new ZRText({x:tn[0],y:tn[1],rotation:on.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(d,{text:l,font:Cn,overflow:"truncate",width:ax,ellipsis:ix,fill:d.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:d.get("align")||on.textAlign,verticalAlign:d.get("verticalAlign")||on.textVerticalAlign}),z2:1});if(setTooltipConfig({el:ox,componentModel:n,itemName:l}),ox.__fullText=l,ox.anid="name",n.get("triggerEvent")){var sx=AxisBuilder.makeAxisEventDataBase(n);sx.targetType="axisName",sx.name=l,getECData(ox).eventData=sx}s.add(ox),ox.updateTransform(),a.add(ox),ox.decomposeTransform()}}};function endTextLayout(t,n,a,s){var l=remRadian(a-t),u,c,d=s[0]>s[1],Ct=n==="start"&&!d||n!=="start"&&d;return isRadianAroundZero(l-PI$3/2)?(c=Ct?"bottom":"top",u="center"):isRadianAroundZero(l-PI$3*1.5)?(c=Ct?"top":"bottom",u="center"):(c="middle",l<PI$3*1.5&&l>PI$3/2?u=Ct?"left":"right":u=Ct?"right":"left"),{rotation:l,textAlign:u,textVerticalAlign:c}}function fixMinMaxLabelShow(t,n,a){if(!shouldShowAllLabels(t.axis)){var s=t.get(["axisLabel","showMinLabel"]),l=t.get(["axisLabel","showMaxLabel"]);n=n||[],a=a||[];var u=n[0],c=n[1],d=n[n.length-1],Ct=n[n.length-2],ar=a[0],en=a[1],tn=a[a.length-1],on=a[a.length-2];s===!1?(ignoreEl(u),ignoreEl(ar)):isTwoLabelOverlapped(u,c)&&(s?(ignoreEl(c),ignoreEl(en)):(ignoreEl(u),ignoreEl(ar))),l===!1?(ignoreEl(d),ignoreEl(tn)):isTwoLabelOverlapped(Ct,d)&&(l?(ignoreEl(Ct),ignoreEl(on)):(ignoreEl(d),ignoreEl(tn)))}}function ignoreEl(t){t&&(t.ignore=!0)}function isTwoLabelOverlapped(t,n){var a=t&&t.getBoundingRect().clone(),s=n&&n.getBoundingRect().clone();if(!(!a||!s)){var l=identity([]);return rotate(l,l,-t.rotation),a.applyTransform(mul([],l,t.getLocalTransform())),s.applyTransform(mul([],l,n.getLocalTransform())),a.intersect(s)}}function isNameLocationCenter(t){return t==="middle"||t==="center"}function createTicks(t,n,a,s,l){for(var u=[],c=[],d=[],Ct=0;Ct<t.length;Ct++){var ar=t[Ct].coord;c[0]=ar,c[1]=0,d[0]=ar,d[1]=a,n&&(applyTransform$1(c,c,n),applyTransform$1(d,d,n));var en=new Line$1({shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:s,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(en.shape,en.style.lineWidth),en.anid=l+"_"+t[Ct].tickValue,u.push(en)}return u}function buildAxisMajorTicks(t,n,a,s){var l=a.axis,u=a.getModel("axisTick"),c=u.get("show");if(c==="auto"&&s.handleAutoShown&&(c=s.handleAutoShown("axisTick")),!(!c||l.scale.isBlank())){for(var d=u.getModel("lineStyle"),Ct=s.tickDirection*u.get("length"),ar=l.getTicksCoords(),en=createTicks(ar,n.transform,Ct,defaults(d.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),tn=0;tn<en.length;tn++)t.add(en[tn]);return en}}function buildAxisMinorTicks(t,n,a,s){var l=a.axis,u=a.getModel("minorTick");if(!(!u.get("show")||l.scale.isBlank())){var c=l.getMinorTicksCoords();if(c.length)for(var d=u.getModel("lineStyle"),Ct=s*u.get("length"),ar=defaults(d.getLineStyle(),defaults(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),en=0;en<c.length;en++)for(var tn=createTicks(c[en],n.transform,Ct,ar,"minorticks_"+en),on=0;on<tn.length;on++)t.add(tn[on])}}function buildAxisLabel(t,n,a,s){var l=a.axis,u=retrieve(s.axisLabelShow,a.get(["axisLabel","show"]));if(!(!u||l.scale.isBlank())){var c=a.getModel("axisLabel"),d=c.get("margin"),Ct=l.getViewLabels(),ar=(retrieve(s.labelRotate,c.get("rotate"))||0)*PI$3/180,en=AxisBuilder.innerTextLayout(s.rotation,ar,s.labelDirection),tn=a.getCategories&&a.getCategories(!0),on=[],cn=AxisBuilder.isLabelSilent(a),dn=a.get("triggerEvent");return each$f(Ct,function(Cn,In){var ix=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(Cn.tickValue):Cn.tickValue,ax=Cn.formattedLabel,ox=Cn.rawLabel,sx=c;if(tn&&tn[ix]){var ux=tn[ix];isObject$3(ux)&&ux.textStyle&&(sx=new Model(ux.textStyle,c,a.ecModel))}var cx=sx.getTextColor()||a.get(["axisLine","lineStyle","color"]),hx=l.dataToCoord(ix),gx=sx.getShallow("align",!0)||en.textAlign,fx=retrieve2(sx.getShallow("alignMinLabel",!0),gx),dx=retrieve2(sx.getShallow("alignMaxLabel",!0),gx),mx=sx.getShallow("verticalAlign",!0)||sx.getShallow("baseline",!0)||en.textVerticalAlign,vx=retrieve2(sx.getShallow("verticalAlignMinLabel",!0),mx),bx=retrieve2(sx.getShallow("verticalAlignMaxLabel",!0),mx),xx=new ZRText({x:hx,y:s.labelOffset+s.labelDirection*d,rotation:en.rotation,silent:cn,z2:10+(Cn.level||0),style:createTextStyle$1(sx,{text:ax,align:In===0?fx:In===Ct.length-1?dx:gx,verticalAlign:In===0?vx:In===Ct.length-1?bx:mx,fill:isFunction$1(cx)?cx(l.type==="category"?ox:l.type==="value"?ix+"":ix,In):cx})});if(xx.anid="label_"+ix,setTooltipConfig({el:xx,componentModel:a,itemName:ax,formatterParamsExtra:{isTruncated:function(){return xx.isTruncated},value:ox,tickIndex:In}}),dn){var _x=AxisBuilder.makeAxisEventDataBase(a);_x.targetType="axisLabel",_x.value=ox,_x.tickIndex=In,l.type==="category"&&(_x.dataIndex=ix),getECData(xx).eventData=_x}n.add(xx),xx.updateTransform(),on.push(xx),t.add(xx),xx.decomposeTransform()}),on}}function collect(t,n){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(a,t,n),a.seriesInvolved&&collectSeriesInfo(a,t),a}function collectAxesInfo(t,n,a){var s=n.getComponent("tooltip"),l=n.getComponent("axisPointer"),u=l.get("link",!0)||[],c=[];each$f(a.getCoordinateSystems(),function(d){if(!d.axisPointerEnabled)return;var Ct=makeKey(d.model),ar=t.coordSysAxesInfo[Ct]={};t.coordSysMap[Ct]=d;var en=d.model,tn=en.getModel("tooltip",s);if(each$f(d.getAxes(),curry$1(Cn,!1,null)),d.getTooltipAxes&&s&&tn.get("show")){var on=tn.get("trigger")==="axis",cn=tn.get(["axisPointer","type"])==="cross",dn=d.getTooltipAxes(tn.get(["axisPointer","axis"]));(on||cn)&&each$f(dn.baseAxes,curry$1(Cn,cn?"cross":!0,on)),cn&&each$f(dn.otherAxes,curry$1(Cn,"cross",!1))}function Cn(In,ix,ax){var ox=ax.model.getModel("axisPointer",l),sx=ox.get("show");if(!(!sx||sx==="auto"&&!In&&!isHandleTrigger(ox))){ix==null&&(ix=ox.get("triggerTooltip")),ox=In?makeAxisPointerModel(ax,tn,l,n,In,ix):ox;var ux=ox.get("snap"),cx=ox.get("triggerEmphasis"),hx=makeKey(ax.model),gx=ix||ux||ax.type==="category",fx=t.axesInfo[hx]={key:hx,axis:ax,coordSys:d,axisPointerModel:ox,triggerTooltip:ix,triggerEmphasis:cx,involveSeries:gx,snap:ux,useHandle:isHandleTrigger(ox),seriesModels:[],linkGroup:null};ar[hx]=fx,t.seriesInvolved=t.seriesInvolved||gx;var dx=getLinkGroupIndex(u,ax);if(dx!=null){var mx=c[dx]||(c[dx]={axesInfo:{}});mx.axesInfo[hx]=fx,mx.mapper=u[dx].mapper,fx.linkGroup=mx}}}})}function makeAxisPointerModel(t,n,a,s,l,u){var c=n.getModel("axisPointer"),d=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],Ct={};each$f(d,function(on){Ct[on]=clone$4(c.get(on))}),Ct.snap=t.type!=="category"&&!!u,c.get("type")==="cross"&&(Ct.type="line");var ar=Ct.label||(Ct.label={});if(ar.show==null&&(ar.show=!1),l==="cross"){var en=c.get(["label","show"]);if(ar.show=en??!0,!u){var tn=Ct.lineStyle=c.get("crossStyle");tn&&defaults(ar,tn.textStyle)}}return t.model.getModel("axisPointer",new Model(Ct,a,s))}function collectSeriesInfo(t,n){n.eachSeries(function(a){var s=a.coordinateSystem,l=a.get(["tooltip","trigger"],!0),u=a.get(["tooltip","show"],!0);!s||l==="none"||l===!1||l==="item"||u===!1||a.get(["axisPointer","show"],!0)===!1||each$f(t.coordSysAxesInfo[makeKey(s.model)],function(c){var d=c.axis;s.getAxis(d.dim)===d&&(c.seriesModels.push(a),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=a.getData().count())})})}function getLinkGroupIndex(t,n){for(var a=n.model,s=n.dim,l=0;l<t.length;l++){var u=t[l]||{};if(checkPropInLink(u[s+"AxisId"],a.id)||checkPropInLink(u[s+"AxisIndex"],a.componentIndex)||checkPropInLink(u[s+"AxisName"],a.name))return l}}function checkPropInLink(t,n){return t==="all"||isArray$1(t)&&indexOf(t,n)>=0||t===n}function fixValue(t){var n=getAxisInfo$1(t);if(n){var a=n.axisPointerModel,s=n.axis.scale,l=a.option,u=a.get("status"),c=a.get("value");c!=null&&(c=s.parse(c));var d=isHandleTrigger(a);u==null&&(l.status=d?"show":"hide");var Ct=s.getExtent().slice();Ct[0]>Ct[1]&&Ct.reverse(),(c==null||c>Ct[1])&&(c=Ct[1]),c<Ct[0]&&(c=Ct[0]),l.value=c,d&&(l.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(t){var n=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(t)]}function getAxisPointerModel(t){var n=getAxisInfo$1(t);return n&&n.axisPointerModel}function isHandleTrigger(t){return!!t.get(["handle","show"])}function makeKey(t){return t.type+"||"+t.id}var axisPointerClazz={},AxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this.axisPointerClass&&fixValue(a),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,l,!0)},n.prototype.updateAxisPointer=function(a,s,l,u){this._doUpdateAxisPointerClass(a,l,!1)},n.prototype.remove=function(a,s){var l=this._axisPointer;l&&l.remove(s)},n.prototype.dispose=function(a,s){this._disposeAxisPointer(s),t.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(a,s,l){var u=n.getAxisPointerClass(this.axisPointerClass);if(u){var c=getAxisPointerModel(a);c?(this._axisPointer||(this._axisPointer=new u)).render(a,c,s,l):this._disposeAxisPointer(s)}},n.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},n.registerAxisPointerClass=function(a,s){axisPointerClazz[a]=s},n.getAxisPointerClass=function(a){return a&&axisPointerClazz[a]},n.type="axis",n})(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(t,n,a,s){var l=a.axis;if(!l.scale.isBlank()){var u=a.getModel("splitArea"),c=u.getModel("areaStyle"),d=c.get("color"),Ct=s.coordinateSystem.getRect(),ar=l.getTicksCoords({tickModel:u,clamp:!0});if(ar.length){var en=d.length,tn=inner$f(t).splitAreaColors,on=createHashMap(),cn=0;if(tn)for(var dn=0;dn<ar.length;dn++){var Cn=tn.get(ar[dn].tickValue);if(Cn!=null){cn=(Cn+(en-1)*dn)%en;break}}var In=l.toGlobalCoord(ar[0].coord),ix=c.getAreaStyle();d=isArray$1(d)?d:[d];for(var dn=1;dn<ar.length;dn++){var ax=l.toGlobalCoord(ar[dn].coord),ox=void 0,sx=void 0,ux=void 0,cx=void 0;l.isHorizontal()?(ox=In,sx=Ct.y,ux=ax-ox,cx=Ct.height,In=ox+ux):(ox=Ct.x,sx=In,ux=Ct.width,cx=ax-sx,In=sx+cx);var hx=ar[dn-1].tickValue;hx!=null&&on.set(hx,cn),n.add(new Rect$2({anid:hx!=null?"area_"+hx:null,shape:{x:ox,y:sx,width:ux,height:cx},style:defaults({fill:d[cn]},ix),autoBatch:!0,silent:!0})),cn=(cn+1)%en}inner$f(t).splitAreaColors=on}}}function rectCoordAxisHandleRemove(t){inner$f(t).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="CartesianAxisPointer",a}return n.prototype.render=function(a,s,l,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var d=a.getCoordSysModel(),Ct=layout$2(d,a),ar=new AxisBuilder(a,extend({handleAutoShown:function(tn){for(var on=d.coordinateSystem.getCartesians(),cn=0;cn<on.length;cn++)if(isIntervalOrLogScale(on[cn].getOtherAxis(a.axis).scale))return!0;return!1}},Ct));each$f(axisBuilderAttrs$3,ar.add,ar),this._axisGroup.add(ar.getGroup()),each$f(selfBuilderAttrs$2,function(tn){a.get([tn,"show"])&&axisElementBuilders$2[tn](this,this._axisGroup,a,d)},this);var en=u&&u.type==="changeAxisOrder"&&u.isInitSort;en||groupTransition(c,this._axisGroup,a),t.prototype.render.call(this,a,s,l,u)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n})(AxisView),axisElementBuilders$2={splitLine:function(t,n,a,s){var l=a.axis;if(!l.scale.isBlank()){var u=a.getModel("splitLine"),c=u.getModel("lineStyle"),d=c.get("color"),Ct=u.get("showMinLine")!==!1,ar=u.get("showMaxLine")!==!1;d=isArray$1(d)?d:[d];for(var en=s.coordinateSystem.getRect(),tn=l.isHorizontal(),on=0,cn=l.getTicksCoords({tickModel:u}),dn=[],Cn=[],In=c.getLineStyle(),ix=0;ix<cn.length;ix++){var ax=l.toGlobalCoord(cn[ix].coord);if(!(ix===0&&!Ct||ix===cn.length-1&&!ar)){var ox=cn[ix].tickValue;tn?(dn[0]=ax,dn[1]=en.y,Cn[0]=ax,Cn[1]=en.y+en.height):(dn[0]=en.x,dn[1]=ax,Cn[0]=en.x+en.width,Cn[1]=ax);var sx=on++%d.length,ux=new Line$1({anid:ox!=null?"line_"+ox:null,autoBatch:!0,shape:{x1:dn[0],y1:dn[1],x2:Cn[0],y2:Cn[1]},style:defaults({stroke:d[sx]},In),silent:!0});subPixelOptimizeLine(ux.shape,In.lineWidth),n.add(ux)}}}},minorSplitLine:function(t,n,a,s){var l=a.axis,u=a.getModel("minorSplitLine"),c=u.getModel("lineStyle"),d=s.coordinateSystem.getRect(),Ct=l.isHorizontal(),ar=l.getMinorTicksCoords();if(ar.length)for(var en=[],tn=[],on=c.getLineStyle(),cn=0;cn<ar.length;cn++)for(var dn=0;dn<ar[cn].length;dn++){var Cn=l.toGlobalCoord(ar[cn][dn].coord);Ct?(en[0]=Cn,en[1]=d.y,tn[0]=Cn,tn[1]=d.y+d.height):(en[0]=d.x,en[1]=Cn,tn[0]=d.x+d.width,tn[1]=Cn);var In=new Line$1({anid:"minor_line_"+ar[cn][dn].tickValue,autoBatch:!0,shape:{x1:en[0],y1:en[1],x2:tn[0],y2:tn[1]},style:on,silent:!0});subPixelOptimizeLine(In.shape,on.lineWidth),n.add(In)}},splitArea:function(t,n,a,s){rectCoordAxisBuildSplitArea(t,n,a,s)}},CartesianXAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="xAxis",n})(CartesianAxisView),CartesianYAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=CartesianXAxisView.type,a}return n.type="yAxis",n})(CartesianAxisView),GridView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="grid",a}return n.prototype.render=function(a,s){this.group.removeAll(),a.get("show")&&this.group.add(new Rect$2({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n})(ComponentView),extraOption={offset:0};function install$N(t){t.registerComponentView(GridView),t.registerComponentModel(GridModel),t.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(t,"x",CartesianAxisModel,extraOption),axisModelCreator(t,"y",CartesianAxisModel,extraOption),t.registerComponentView(CartesianXAxisView),t.registerComponentView(CartesianYAxisView),t.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$M(t){use(install$N),t.registerSeriesModel(ScatterSeriesModel),t.registerChartView(ScatterView),t.registerLayout(pointsLayout("scatter"))}function radarLayout(t){t.eachSeriesByType("radar",function(n){var a=n.getData(),s=[],l=n.coordinateSystem;if(l){var u=l.getIndicatorAxes();each$f(u,function(c,d){a.each(a.mapDimension(u[d].dim),function(Ct,ar){s[ar]=s[ar]||[];var en=l.dataToPoint(Ct,d);s[ar][d]=isValidPoint(en)?en:getValueMissingPoint(l)})}),a.each(function(c){var d=find(s[c],function(Ct){return isValidPoint(Ct)})||getValueMissingPoint(l);s[c].push(d.slice()),a.setItemLayout(c,s[c])})}})}function isValidPoint(t){return!isNaN(t[0])&&!isNaN(t[1])}function getValueMissingPoint(t){return[t.cx,t.cy]}function radarBackwardCompat(t){var n=t.polar;if(n){isArray$1(n)||(n=[n]);var a=[];each$f(n,function(s,l){s.indicator?(s.type&&!s.shape&&(s.shape=s.type),t.radar=t.radar||[],isArray$1(t.radar)||(t.radar=[t.radar]),t.radar.push(s)):a.push(s)}),t.polar=a}each$f(t.series,function(s){s&&s.type==="radar"&&s.polarIndex&&(s.radarIndex=s.polarIndex)})}var RadarView$1=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.coordinateSystem,c=this.group,d=a.getData(),Ct=this._data;function ar(on,cn){var dn=on.getItemVisual(cn,"symbol")||"circle";if(dn!=="none"){var Cn=normalizeSymbolSize(on.getItemVisual(cn,"symbolSize")),In=createSymbol$1(dn,-1,-1,2,2),ix=on.getItemVisual(cn,"symbolRotate")||0;return In.attr({style:{strokeNoScale:!0},z2:100,scaleX:Cn[0]/2,scaleY:Cn[1]/2,rotation:ix*Math.PI/180||0}),In}}function en(on,cn,dn,Cn,In,ix){dn.removeAll();for(var ax=0;ax<cn.length-1;ax++){var ox=ar(Cn,In);ox&&(ox.__dimIdx=ax,on[ax]?(ox.setPosition(on[ax]),graphic$1[ix?"initProps":"updateProps"](ox,{x:cn[ax][0],y:cn[ax][1]},a,In)):ox.setPosition(cn[ax]),dn.add(ox))}}function tn(on){return map$1(on,function(cn){return[u.cx,u.cy]})}d.diff(Ct).add(function(on){var cn=d.getItemLayout(on);if(cn){var dn=new Polygon,Cn=new Polyline$1,In={shape:{points:cn}};dn.shape.points=tn(cn),Cn.shape.points=tn(cn),initProps(dn,In,a,on),initProps(Cn,In,a,on);var ix=new Group$3,ax=new Group$3;ix.add(Cn),ix.add(dn),ix.add(ax),en(Cn.shape.points,cn,ax,d,on,!0),d.setItemGraphicEl(on,ix)}}).update(function(on,cn){var dn=Ct.getItemGraphicEl(cn),Cn=dn.childAt(0),In=dn.childAt(1),ix=dn.childAt(2),ax={shape:{points:d.getItemLayout(on)}};ax.shape.points&&(en(Cn.shape.points,ax.shape.points,ix,d,on,!1),saveOldStyle(In),saveOldStyle(Cn),updateProps$1(Cn,ax,a),updateProps$1(In,ax,a),d.setItemGraphicEl(on,dn))}).remove(function(on){c.remove(Ct.getItemGraphicEl(on))}).execute(),d.eachItemGraphicEl(function(on,cn){var dn=d.getItemModel(cn),Cn=on.childAt(0),In=on.childAt(1),ix=on.childAt(2),ax=d.getItemVisual(cn,"style"),ox=ax.fill;c.add(on),Cn.useStyle(defaults(dn.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:ox})),setStatesStylesFromModel(Cn,dn,"lineStyle"),setStatesStylesFromModel(In,dn,"areaStyle");var sx=dn.getModel("areaStyle"),ux=sx.isEmpty()&&sx.parentModel.isEmpty();In.ignore=ux,each$f(["emphasis","select","blur"],function(gx){var fx=dn.getModel([gx,"areaStyle"]),dx=fx.isEmpty()&&fx.parentModel.isEmpty();In.ensureState(gx).ignore=dx&&ux}),In.useStyle(defaults(sx.getAreaStyle(),{fill:ox,opacity:.7,decal:ax.decal}));var cx=dn.getModel("emphasis"),hx=cx.getModel("itemStyle").getItemStyle();ix.eachChild(function(gx){if(gx instanceof ZRImage){var fx=gx.style;gx.useStyle(extend({image:fx.image,x:fx.x,y:fx.y,width:fx.width,height:fx.height},ax))}else gx.useStyle(ax),gx.setColor(ox),gx.style.strokeNoScale=!0;var dx=gx.ensureState("emphasis");dx.style=clone$4(hx);var mx=d.getStore().get(d.getDimensionIndex(gx.__dimIdx),cn);(mx==null||isNaN(mx))&&(mx=""),setLabelStyle(gx,getLabelStatesModels(dn),{labelFetcher:d.hostModel,labelDataIndex:cn,labelDimIndex:gx.__dimIdx,defaultText:mx,inheritColor:ox,defaultOpacity:ax.opacity})}),toggleHoverEmphasis(on,cx.get("focus"),cx.get("blurScope"),cx.get("disabled"))}),this._data=d},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n})(ChartView),RadarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.coordinateSystem,d=c.getIndicatorAxes(),Ct=this.getData().getName(a),ar=Ct===""?this.name:Ct,en=retrieveVisualColorForTooltipMarker(this,a);return createTooltipMarkup("section",{header:ar,sortBlocks:!0,blocks:map$1(d,function(tn){var on=u.get(u.mapDimension(tn.dim),a);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:en,name:tn.name,value:on,sortParam:on})})})},n.prototype.getTooltipPosition=function(a){if(a!=null){for(var s=this.getData(),l=this.coordinateSystem,u=s.getValues(map$1(l.dimensions,function(ar){return s.mapDimension(ar)}),a),c=0,d=u.length;c<d;c++)if(!isNaN(u[c])){var Ct=l.getIndicatorAxes();return l.coordToPoint(Ct[c].dataToCoord(u[c]),c)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n})(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(t,n){return defaults({show:n},t)}var RadarModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),s=this.get("splitNumber"),l=this.get("scale"),u=this.get("axisLine"),c=this.get("axisTick"),d=this.get("axisLabel"),Ct=this.get("axisName"),ar=this.get(["axisName","show"]),en=this.get(["axisName","formatter"]),tn=this.get("axisNameGap"),on=this.get("triggerEvent"),cn=map$1(this.get("indicator")||[],function(dn){dn.max!=null&&dn.max>0&&!dn.min?dn.min=0:dn.min!=null&&dn.min<0&&!dn.max&&(dn.max=0);var Cn=Ct;dn.color!=null&&(Cn=defaults({color:dn.color},Ct));var In=merge(clone$4(dn),{boundaryGap:a,splitNumber:s,scale:l,axisLine:u,axisTick:c,axisLabel:d,name:dn.text,showName:ar,nameLocation:"end",nameGap:tn,nameTextStyle:Cn,triggerEvent:on},!1);if(isString$1(en)){var ix=In.name;In.name=en.replace("{value}",ix??"")}else isFunction$1(en)&&(In.name=en(In.name,In));var ax=new Model(In,null,this.ecModel);return mixin(ax,AxisModelCommonMixin.prototype),ax.mainType="radar",ax.componentIndex=this.componentIndex,ax},this);this._indicatorModels=cn},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n})(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group;u.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},n.prototype._buildAxes=function(a){var s=a.coordinateSystem,l=s.getIndicatorAxes(),u=map$1(l,function(c){var d=c.model.get("showName")?c.name:"",Ct=new AxisBuilder(c.model,{axisName:d,position:[s.cx,s.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return Ct});each$f(u,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(a){var s=a.coordinateSystem,l=s.getIndicatorAxes();if(!l.length)return;var u=a.get("shape"),c=a.getModel("splitLine"),d=a.getModel("splitArea"),Ct=c.getModel("lineStyle"),ar=d.getModel("areaStyle"),en=c.get("show"),tn=d.get("show"),on=Ct.get("color"),cn=ar.get("color"),dn=isArray$1(on)?on:[on],Cn=isArray$1(cn)?cn:[cn],In=[],ix=[];function ax(_x,Ex,Tx){var Cx=Tx%Ex.length;return _x[Cx]=_x[Cx]||[],Cx}if(u==="circle")for(var ox=l[0].getTicksCoords(),sx=s.cx,ux=s.cy,cx=0;cx<ox.length;cx++){if(en){var hx=ax(In,dn,cx);In[hx].push(new Circle({shape:{cx:sx,cy:ux,r:ox[cx].coord}}))}if(tn&&cx<ox.length-1){var hx=ax(ix,Cn,cx);ix[hx].push(new Ring({shape:{cx:sx,cy:ux,r0:ox[cx].coord,r:ox[cx+1].coord}}))}}else for(var gx,fx=map$1(l,function(_x,Ex){var Tx=_x.getTicksCoords();return gx=gx==null?Tx.length-1:Math.min(Tx.length-1,gx),map$1(Tx,function(Cx){return s.coordToPoint(Cx.coord,Ex)})}),dx=[],cx=0;cx<=gx;cx++){for(var mx=[],vx=0;vx<l.length;vx++)mx.push(fx[vx][cx]);if(mx[0]&&mx.push(mx[0].slice()),en){var hx=ax(In,dn,cx);In[hx].push(new Polyline$1({shape:{points:mx}}))}if(tn&&dx){var hx=ax(ix,Cn,cx-1);ix[hx].push(new Polygon({shape:{points:mx.concat(dx)}}))}dx=mx.slice().reverse()}var bx=Ct.getLineStyle(),xx=ar.getAreaStyle();each$f(ix,function(_x,Ex){this.group.add(mergePath(_x,{style:defaults({stroke:"none",fill:Cn[Ex%Cn.length]},xx),silent:!0}))},this),each$f(In,function(_x,Ex){this.group.add(mergePath(_x,{style:defaults({fill:"none",stroke:dn[Ex%dn.length]},bx),silent:!0}))},this)},n.type="radar",n})(ComponentView),IndicatorAxis=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a,s,l)||this;return u.type="value",u.angle=0,u.name="",u}return n})(Axis),Radar=(function(){function t(n,a,s){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(l,u){var c="indicator_"+u,d=new IndicatorAxis(c,new IntervalScale);return d.name=l.get("name"),d.model=l,l.axis=d,this.dimensions.push(c),d},this),this.resize(n,s)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(n,a){var s=this._indicatorAxes[a];return this.coordToPoint(s.dataToCoord(n),a)},t.prototype.coordToPoint=function(n,a){var s=this._indicatorAxes[a],l=s.angle,u=this.cx+n*Math.cos(l),c=this.cy-n*Math.sin(l);return[u,c]},t.prototype.pointToData=function(n){var a=n[0]-this.cx,s=n[1]-this.cy,l=Math.sqrt(a*a+s*s);a/=l,s/=l;for(var u=Math.atan2(-s,a),c=1/0,d,Ct=-1,ar=0;ar<this._indicatorAxes.length;ar++){var en=this._indicatorAxes[ar],tn=Math.abs(u-en.angle);tn<c&&(d=en,Ct=ar,c=tn)}return[Ct,+(d&&d.coordToData(l))]},t.prototype.resize=function(n,a){var s=n.get("center"),l=a.getWidth(),u=a.getHeight(),c=Math.min(l,u)/2;this.cx=parsePercent(s[0],l),this.cy=parsePercent(s[1],u),this.startAngle=n.get("startAngle")*Math.PI/180;var d=n.get("radius");(isString$1(d)||isNumber(d))&&(d=[0,d]),this.r0=parsePercent(d[0],c),this.r=parsePercent(d[1],c),each$f(this._indicatorAxes,function(Ct,ar){Ct.setExtent(this.r0,this.r);var en=this.startAngle+ar*Math.PI*2/this._indicatorAxes.length;en=Math.atan2(Math.sin(en),Math.cos(en)),Ct.angle=en},this)},t.prototype.update=function(n,a){var s=this._indicatorAxes,l=this._model;each$f(s,function(d){d.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(d,Ct){if(!(d.get("coordinateSystem")!=="radar"||n.getComponent("radar",d.get("radarIndex"))!==l)){var ar=d.getData();each$f(s,function(en){en.scale.unionExtentFromData(ar,ar.mapDimension(en.dim))})}},this);var u=l.get("splitNumber"),c=new IntervalScale;c.setExtent(0,u),c.setInterval(1),each$f(s,function(d,Ct){alignScaleTicks(d.scale,d.model,c)})},t.prototype.convertToPixel=function(n,a,s){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(n,a,s){return console.warn("Not implemented."),null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.create=function(n,a){var s=[];return n.eachComponent("radar",function(l){var u=new t(l,n,a);s.push(u),l.coordinateSystem=u}),n.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=s[l.get("radarIndex")||0])}),s},t.dimensions=[],t})();function install$L(t){t.registerCoordinateSystem("radar",Radar),t.registerComponentModel(RadarModel),t.registerComponentView(RadarView),t.registerVisual({seriesType:"radar",reset:function(n){var a=n.getData();a.each(function(s){a.setItemVisual(s,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function install$K(t){use(install$L),t.registerChartView(RadarView$1),t.registerSeriesModel(RadarSeriesModel),t.registerLayout(radarLayout),t.registerProcessor(dataFilter$1("radar")),t.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(t,n,a){var s=getStore(t);s[n]=a}function release(t,n,a){var s=getStore(t),l=s[n];l===a&&(s[n]=null)}function isTaken(t,n){return!!getStore(t)[n]}function getStore(t){return t[ATTR]||(t[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;s._zr=a;var l=bind$1(s._mousedownHandler,s),u=bind$1(s._mousemoveHandler,s),c=bind$1(s._mouseupHandler,s),d=bind$1(s._mousewheelHandler,s),Ct=bind$1(s._pinchHandler,s);return s.enable=function(ar,en){this.disable(),this._opt=defaults(clone$4(en)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),ar==null&&(ar=!0),(ar===!0||ar==="move"||ar==="pan")&&(a.on("mousedown",l),a.on("mousemove",u),a.on("mouseup",c)),(ar===!0||ar==="scale"||ar==="zoom")&&(a.on("mousewheel",d),a.on("pinch",Ct))},s.disable=function(){a.off("mousedown",l),a.off("mousemove",u),a.off("mouseup",c),a.off("mousewheel",d),a.off("pinch",Ct)},s}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(a){this.pointerChecker=a},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(a){if(!isMiddleOrRightButtonOnMouseUpDown(a)){for(var s=a.target;s;){if(s.draggable)return;s=s.__hostTarget||s.parent}var l=a.offsetX,u=a.offsetY;this.pointerChecker&&this.pointerChecker(a,l,u)&&(this._x=l,this._y=u,this._dragging=!0)}},n.prototype._mousemoveHandler=function(a){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",a,this._opt)||a.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var s=a.offsetX,l=a.offsetY,u=this._x,c=this._y,d=s-u,Ct=l-c;this._x=s,this._y=l,this._opt.preventDefaultMouseMove&&stop(a.event),trigger$1(this,"pan","moveOnMouseMove",a,{dx:d,dy:Ct,oldX:u,oldY:c,newX:s,newY:l,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(a){isMiddleOrRightButtonOnMouseUpDown(a)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(a){var s=isAvailableBehavior("zoomOnMouseWheel",a,this._opt),l=isAvailableBehavior("moveOnMouseWheel",a,this._opt),u=a.wheelDelta,c=Math.abs(u),d=a.offsetX,Ct=a.offsetY;if(!(u===0||!s&&!l)){if(s){var ar=c>3?1.4:c>1?1.2:1.1,en=u>0?ar:1/ar;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",a,{scale:en,originX:d,originY:Ct,isAvailableBehavior:null})}if(l){var tn=Math.abs(u),on=(u>0?1:-1)*(tn>3?.4:tn>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:on,originX:d,originY:Ct,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(a){if(!isTaken(this._zr,"globalPan")){var s=a.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,a,{scale:s,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},n})(Eventful);function checkPointerAndTrigger(t,n,a,s,l){t.pointerChecker&&t.pointerChecker(s,l.originX,l.originY)&&(stop(s.event),trigger$1(t,n,a,s,l))}function trigger$1(t,n,a,s,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,a,s),t.trigger(n,l)}function isAvailableBehavior(t,n,a){var s=a[t];return!t||s&&(!isString$1(s)||n.event[s+"Key"])}function updateViewOnPan(t,n,a){var s=t.target;s.x+=n,s.y+=a,s.dirty()}function updateViewOnZoom(t,n,a,s){var l=t.target,u=t.zoomLimit,c=t.zoom=t.zoom||1;if(c*=n,u){var d=u.min||0,Ct=u.max||1/0;c=Math.max(Math.min(Ct,c),d)}var ar=c/t.zoom;t.zoom=c,l.x-=(a-l.x)*(ar-1),l.y-=(s-l.y)*(ar-1),l.scaleX*=ar,l.scaleY*=ar,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(t,n,a){var s=n.getComponentByElement(t.topTarget),l=s&&s.coordinateSystem;return s&&s!==a&&!IRRELEVANT_EXCLUDES.hasOwnProperty(s.mainType)&&l&&l.model!==a}function parseXML(t){if(isString$1(t)){var n=new DOMParser;t=n.parseFromString(t,"text/xml")}var a=t;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=(function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(n,a){a=a||{};var s=parseXML(n);this._defsUsePending=[];var l=new Group$3;this._root=l;var u=[],c=s.getAttribute("viewBox")||"",d=parseFloat(s.getAttribute("width")||a.width),Ct=parseFloat(s.getAttribute("height")||a.height);isNaN(d)&&(d=null),isNaN(Ct)&&(Ct=null),parseAttributes(s,l,null,!0,!1);for(var ar=s.firstChild;ar;)this._parseNode(ar,l,u,null,!1,!1),ar=ar.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var en,tn;if(c){var on=splitNumberSequence(c);on.length>=4&&(en={x:parseFloat(on[0]||0),y:parseFloat(on[1]||0),width:parseFloat(on[2]),height:parseFloat(on[3])})}if(en&&d!=null&&Ct!=null&&(tn=makeViewBoxTransform(en,{x:0,y:0,width:d,height:Ct}),!a.ignoreViewBox)){var cn=l;l=new Group$3,l.add(cn),cn.scaleX=cn.scaleY=tn.scale,cn.x=tn.x,cn.y=tn.y}return!a.ignoreRootClip&&d!=null&&Ct!=null&&l.setClipPath(new Rect$2({shape:{x:0,y:0,width:d,height:Ct}})),{root:l,width:d,height:Ct,viewBoxRect:en,viewBoxTransform:tn,named:u}},t.prototype._parseNode=function(n,a,s,l,u,c){var d=n.nodeName.toLowerCase(),Ct,ar=l;if(d==="defs"&&(u=!0),d==="text"&&(c=!0),d==="defs"||d==="switch")Ct=a;else{if(!u){var en=nodeParsers[d];if(en&&hasOwn(nodeParsers,d)){Ct=en.call(this,n,a);var tn=n.getAttribute("name");if(tn){var on={name:tn,namedFrom:null,svgNodeTagLower:d,el:Ct};s.push(on),d==="g"&&(ar=on)}else l&&s.push({name:l.name,namedFrom:l,svgNodeTagLower:d,el:Ct});a.add(Ct)}}var cn=paintServerParsers[d];if(cn&&hasOwn(paintServerParsers,d)){var dn=cn.call(this,n),Cn=n.getAttribute("id");Cn&&(this._defs[Cn]=dn)}}if(Ct&&Ct.isGroup)for(var In=n.firstChild;In;)In.nodeType===1?this._parseNode(In,Ct,s,ar,u,c):In.nodeType===3&&c&&this._parseText(In,Ct),In=In.nextSibling},t.prototype._parseText=function(n,a){var s=new TSpan({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),applyTextAlignment(s,a);var l=s.style,u=l.fontSize;u&&u<9&&(l.fontSize=9,s.scaleX*=u/9,s.scaleY*=u/9);var c=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=c;var d=s.getBoundingRect();return this._textX+=d.width,a.add(s),s},t.internalField=(function(){nodeParsers={g:function(n,a){var s=new Group$3;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s},rect:function(n,a){var s=new Rect$2;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),s.silent=!0,s},circle:function(n,a){var s=new Circle;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),s.silent=!0,s},line:function(n,a){var s=new Line$1;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),s.silent=!0,s},ellipse:function(n,a){var s=new Ellipse;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),s.silent=!0,s},polygon:function(n,a){var s=n.getAttribute("points"),l;s&&(l=parsePoints(s));var u=new Polygon({shape:{points:l||[]},silent:!0});return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},polyline:function(n,a){var s=n.getAttribute("points"),l;s&&(l=parsePoints(s));var u=new Polyline$1({shape:{points:l||[]},silent:!0});return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},image:function(n,a){var s=new ZRImage;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),s.silent=!0,s},text:function(n,a){var s=n.getAttribute("x")||"0",l=n.getAttribute("y")||"0",u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0";this._textX=parseFloat(s)+parseFloat(u),this._textY=parseFloat(l)+parseFloat(c);var d=new Group$3;return inheritStyle(a,d),parseAttributes(n,d,this._defsUsePending,!1,!0),d},tspan:function(n,a){var s=n.getAttribute("x"),l=n.getAttribute("y");s!=null&&(this._textX=parseFloat(s)),l!=null&&(this._textY=parseFloat(l));var u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0",d=new Group$3;return inheritStyle(a,d),parseAttributes(n,d,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),d},path:function(n,a){var s=n.getAttribute("d")||"",l=createFromString(s);return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.silent=!0,l}}})(),t})(),paintServerParsers={lineargradient:function(t){var n=parseInt(t.getAttribute("x1")||"0",10),a=parseInt(t.getAttribute("y1")||"0",10),s=parseInt(t.getAttribute("x2")||"10",10),l=parseInt(t.getAttribute("y2")||"0",10),u=new LinearGradient(n,a,s,l);return parsePaintServerUnit(t,u),parseGradientColorStops(t,u),u},radialgradient:function(t){var n=parseInt(t.getAttribute("cx")||"0",10),a=parseInt(t.getAttribute("cy")||"0",10),s=parseInt(t.getAttribute("r")||"0",10),l=new RadialGradient(n,a,s);return parsePaintServerUnit(t,l),parseGradientColorStops(t,l),l}};function parsePaintServerUnit(t,n){var a=t.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(t,n){for(var a=t.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var s=a.getAttribute("offset"),l=void 0;s&&s.indexOf("%")>0?l=parseInt(s,10)/100:s?l=parseFloat(s):l=0;var u={};parseInlineStyle(a,u,u);var c=u.stopColor||a.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:l,color:c})}a=a.nextSibling}}function inheritStyle(t,n){t&&t.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,t.__inheritedStyle))}function parsePoints(t){for(var n=splitNumberSequence(t),a=[],s=0;s<n.length;s+=2){var l=parseFloat(n[s]),u=parseFloat(n[s+1]);a.push([l,u])}return a}function parseAttributes(t,n,a,s,l){var u=n,c=u.__inheritedStyle=u.__inheritedStyle||{},d={};t.nodeType===1&&(parseTransformAttribute(t,n),parseInlineStyle(t,c,d),s||parseAttributeStyle(t,c,d)),u.style=u.style||{},c.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",c.fill,a)),c.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",c.stroke,a)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(Ct){c[Ct]!=null&&(u.style[Ct]=parseFloat(c[Ct]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(Ct){c[Ct]!=null&&(u.style[Ct]=c[Ct])}),l&&(u.__selfStyle=d),c.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(Ct){return parseFloat(Ct)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(u.invisible=!0),c.display==="none"&&(u.ignore=!0)}function applyTextAlignment(t,n){var a=n.__selfStyle;if(a){var s=a.textBaseline,l=s;!s||s==="auto"||s==="baseline"?l="alphabetic":s==="before-edge"||s==="text-before-edge"?l="top":s==="after-edge"||s==="text-after-edge"?l="bottom":(s==="central"||s==="mathematical")&&(l="middle"),t.style.textBaseline=l}var u=n.__inheritedStyle;if(u){var c=u.textAlign,d=c;c&&(c==="middle"&&(d="center"),t.style.textAlign=d)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(t,n,a,s){var l=a&&a.match(urlRegex);if(l){var u=trim$1(l[1]);s.push([t,n,u]);return}return a==="none"&&(a=null),a}function applyDefs(t,n){for(var a=0;a<n.length;a++){var s=n[a];s[0].style[s[1]]=t[s[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(t){return t.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(t,n){var a=t.getAttribute("transform");if(a){a=a.replace(/,/g," ");var s=[],l=null;a.replace(transformRegex,function(tn,on,cn){return s.push(on,cn),""});for(var u=s.length-1;u>0;u-=2){var c=s[u],d=s[u-1],Ct=splitNumberSequence(c);switch(l=l||create$1(),d){case"translate":translate(l,l,[parseFloat(Ct[0]),parseFloat(Ct[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(Ct[0]),parseFloat(Ct[1]||Ct[0])]);break;case"rotate":rotate(l,l,-parseFloat(Ct[0])*DEGREE_TO_ANGLE,[parseFloat(Ct[1]||"0"),parseFloat(Ct[2]||"0")]);break;case"skewX":var ar=Math.tan(parseFloat(Ct[0])*DEGREE_TO_ANGLE);mul(l,[1,0,ar,1,0,0],l);break;case"skewY":var en=Math.tan(parseFloat(Ct[0])*DEGREE_TO_ANGLE);mul(l,[1,en,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(Ct[0]),l[1]=parseFloat(Ct[1]),l[2]=parseFloat(Ct[2]),l[3]=parseFloat(Ct[3]),l[4]=parseFloat(Ct[4]),l[5]=parseFloat(Ct[5]);break}}n.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(t,n,a){var s=t.getAttribute("style");if(s){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(s))!=null;){var u=l[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;c&&(n[c]=l[2]);var d=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;d&&(a[d]=l[2])}}}function parseAttributeStyle(t,n,a){for(var s=0;s<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[s],u=t.getAttribute(l);u!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=u)}for(var s=0;s<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[s],u=t.getAttribute(l);u!=null&&(a[SELF_STYLE_ATTRIBUTES_MAP[l]]=u)}}function makeViewBoxTransform(t,n){var a=n.width/t.width,s=n.height/t.height,l=Math.min(a,s);return{scale:l,x:-(t.x+t.width/2)*l+(n.x+n.width/2),y:-(t.y+t.height/2)*l+(n.y+n.height/2)}}function parseSVG(t,n){var a=new SVGParser;return a.parse(t,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=(function(){function t(n,a){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(a)}return t.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=createRegions(n.named),s=a.regions,l=a.regionsMap;this._regions=s,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(n){var a,s;try{a=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},s=a.root,assert(s!=null)}catch(In){throw new Error(`Invalid svg format
`+In.message)}var l=new Group$3;l.add(s),l.isGeoSVGGraphicRoot=!0;var u=a.width,c=a.height,d=a.viewBoxRect,Ct=this._boundingRect;if(!Ct){var ar=void 0,en=void 0,tn=void 0,on=void 0;if(u!=null?(ar=0,tn=u):d&&(ar=d.x,tn=d.width),c!=null?(en=0,on=c):d&&(en=d.y,on=d.height),ar==null||en==null){var cn=s.getBoundingRect();ar==null&&(ar=cn.x,tn=cn.width),en==null&&(en=cn.y,on=cn.height)}Ct=this._boundingRect=new BoundingRect(ar,en,tn,on)}if(d){var dn=makeViewBoxTransform(d,Ct);s.scaleX=s.scaleY=dn.scale,s.x=dn.x,s.y=dn.y}l.setClipPath(new Rect$2({shape:Ct.plain()}));var Cn=[];return each$f(a.named,function(In){REGION_AVAILABLE_SVG_TAG_MAP.get(In.svgNodeTagLower)!=null&&(Cn.push(In),setSilent(In.el))}),{root:l,boundingRect:Ct,named:Cn}},t.prototype.useGraphic=function(n){var a=this._usedGraphicMap,s=a.get(n);return s||(s=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(n,s),s)},t.prototype.freeGraphic=function(n){var a=this._usedGraphicMap,s=a.get(n);s&&(a.removeKey(n),this._freedGraphics.push(s))},t})();function setSilent(t){t.silent=!1,t.isGroup&&t.traverse(function(n){n.silent=!1})}function createRegions(t){var n=[],a=createHashMap();return each$f(t,function(s){if(s.namedFrom==null){var l=new GeoSVGRegion(s.name,s.el);n.push(l),a.set(s.name,l)}}),{regions:n,regionsMap:a}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(t,n){if(t==="china"){for(var a=0;a<n.length;a++)if(n[a].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(s){return{type:"polygon",exterior:s}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(t,n){if(t==="china"){var a=coordsOffsetMap[n.name];if(a){var s=n.getCenter();s[0]+=a[0]/10.5,s[1]+=-a[1]/(10.5/.75),n.setCenter(s)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(t,n){t==="china"&&n.name===""&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=(function(){function t(n,a,s){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=s,this._geoJSON=parseInput(a)}return t.prototype.load=function(n,a){a=a||DEFAULT_NAME_PROPERTY;var s=this._parsedMap.get(a);if(!s){var l=this._parseToRegions(a);s=this._parsedMap.set(a,{regions:l,boundingRect:calculateBoundingRect(l)})}var u=createHashMap(),c=[];return each$f(s.regions,function(d){var Ct=d.name;n&&hasOwn(n,Ct)&&(d=d.cloneShallow(Ct=n[Ct])),c.push(d),u.set(Ct,d)}),{regions:c,boundingRect:s.boundingRect||new BoundingRect(0,0,0,0),regionsMap:u}},t.prototype._parseToRegions=function(n){var a=this._mapName,s=this._geoJSON,l;try{l=s?parseGeoJSON(s,n):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(a,l),each$f(l,function(u){var c=u.name;fixTextCoords(a,u),fixDiaoyuIsland(a,u);var d=this._specialAreas&&this._specialAreas[c];d&&u.transformTo(d.left,d.top,d.width,d.height)},this),l},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t})();function calculateBoundingRect(t){for(var n,a=0;a<t.length;a++){var s=t[a].getBoundingRect();n=n||s.clone(),n.union(s)}return n}function parseInput(t){return isString$1(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var storage=createHashMap();const geoSourceManager={registerMap:function(t,n,a){if(n.svg){var s=new GeoSVGResource(t,n.svg);storage.set(t,s)}else{var l=n.geoJson||n.geoJSON;l&&!n.features?a=n.specialAreas:l=n;var s=new GeoJSONResource(t,l,a);storage.set(t,s)}},getGeoResource:function(t){return storage.get(t)},getMapForUser:function(t){var n=storage.get(t);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(t,n,a){var s=storage.get(t);if(s)return s.load(n,a)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(t){var n=t.getItemStyle(),a=t.get("areaColor");return a!=null&&(n.fill=a),n}function fixLineStyle(t){var n=t.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=(function(){function t(n){var a=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(n.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Group$3),a.add(this._svgGroup=new Group$3)}return t.prototype.draw=function(n,a,s,l,u){var c=n.mainType==="geo",d=n.getData&&n.getData();c&&a.eachComponent({mainType:"series",subType:"map"},function(ix){!d&&ix.getHostGeoModel()===n&&(d=ix.getData())});var Ct=n.coordinateSystem,ar=this._regionsGroup,en=this.group,tn=Ct.getTransformInfo(),on=tn.raw,cn=tn.roam,dn=!ar.childAt(0)||u;dn?(en.x=cn.x,en.y=cn.y,en.scaleX=cn.scaleX,en.scaleY=cn.scaleY,en.dirty()):updateProps$1(en,cn,n);var Cn=d&&d.getVisual("visualMeta")&&d.getVisual("visualMeta").length>0,In={api:s,geo:Ct,mapOrGeoModel:n,data:d,isVisualEncodedByVisualMap:Cn,isGeo:c,transformInfoRaw:on};Ct.resourceType==="geoJSON"?this._buildGeoJSON(In):Ct.resourceType==="geoSVG"&&this._buildSVG(In),this._updateController(n,a,s),this._updateMapSelectHandler(n,ar,s,l)},t.prototype._buildGeoJSON=function(n){var a=this._regionsGroupByName=createHashMap(),s=createHashMap(),l=this._regionsGroup,u=n.transformInfoRaw,c=n.mapOrGeoModel,d=n.data,Ct=n.geo.projection,ar=Ct&&Ct.stream;function en(cn,dn){return dn&&(cn=dn(cn)),cn&&[cn[0]*u.scaleX+u.x,cn[1]*u.scaleY+u.y]}function tn(cn){for(var dn=[],Cn=!ar&&Ct&&Ct.project,In=0;In<cn.length;++In){var ix=en(cn[In],Cn);ix&&dn.push(ix)}return dn}function on(cn){return{shape:{points:tn(cn)}}}l.removeAll(),each$f(n.geo.regions,function(cn){var dn=cn.name,Cn=a.get(dn),In=s.get(dn)||{},ix=In.dataIdx,ax=In.regionModel;if(!Cn){Cn=a.set(dn,new Group$3),l.add(Cn),ix=d?d.indexOfName(dn):null,ax=n.isGeo?c.getRegionModel(dn):d?d.getItemModel(ix):null;var ox=ax.get("silent",!0);ox!=null&&(Cn.silent=ox),s.set(dn,{dataIdx:ix,regionModel:ax})}var sx=[],ux=[];each$f(cn.geometries,function(gx){if(gx.type==="polygon"){var fx=[gx.exterior].concat(gx.interiors||[]);ar&&(fx=projectPolys(fx,ar)),each$f(fx,function(mx){sx.push(new Polygon(on(mx)))})}else{var dx=gx.points;ar&&(dx=projectPolys(dx,ar,!0)),each$f(dx,function(mx){ux.push(new Polyline$1(on(mx)))})}});var cx=en(cn.getCenter(),Ct&&Ct.project);function hx(gx,fx){if(gx.length){var dx=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:gx}});Cn.add(dx),applyOptionStyleForRegion(n,dx,ix,ax),resetLabelForRegion(n,dx,dn,ax,c,ix,cx),fx&&(fixLineStyle(dx),each$f(dx.states,fixLineStyle))}}hx(sx),hx(ux,!0)}),a.each(function(cn,dn){var Cn=s.get(dn),In=Cn.dataIdx,ix=Cn.regionModel;resetEventTriggerForRegion(n,cn,dn,ix,c,In),resetTooltipForRegion(n,cn,dn,ix,c),resetStateTriggerForRegion(n,cn,dn,ix,c)},this)},t.prototype._buildSVG=function(n){var a=n.geo.map,s=n.transformInfoRaw;this._svgGroup.x=s.x,this._svgGroup.y=s.y,this._svgGroup.scaleX=s.scaleX,this._svgGroup.scaleY=s.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var l=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(c){var d=c.name,Ct=n.mapOrGeoModel,ar=n.data,en=c.svgNodeTagLower,tn=c.el,on=ar?ar.indexOfName(d):null,cn=Ct.getRegionModel(d);OPTION_STYLE_ENABLED_TAG_MAP.get(en)!=null&&tn instanceof Displayable&&applyOptionStyleForRegion(n,tn,on,cn),tn instanceof Displayable&&(tn.culling=!0);var dn=cn.get("silent",!0);if(dn!=null&&(tn.silent=dn),tn.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(en)!=null&&resetLabelForRegion(n,tn,d,cn,Ct,on,null),resetEventTriggerForRegion(n,tn,d,cn,Ct,on),resetTooltipForRegion(n,tn,d,cn,Ct),STATE_TRIGGER_TAG_MAP.get(en)!=null)){var Cn=resetStateTriggerForRegion(n,tn,d,cn,Ct);Cn==="self"&&(u=!0);var In=l.get(d)||l.set(d,[]);In.push(tn)}},this),this._enableBlurEntireSVG(u,n)},t.prototype._enableBlurEntireSVG=function(n,a){if(n&&a.isGeo){var s=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=s.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var c=u.ensureState("blur").style||{};c.opacity==null&&l!=null&&(c.opacity=l),u.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(n,a){if(n==null)return[];var s=a.coordinateSystem;if(s.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var u=l.get(n);return u?[u]:[]}}else if(s.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},t.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},t.prototype._useSVG=function(n){var a=geoSourceManager.getGeoResource(n);if(a&&a.type==="geoSVG"){var s=a.useGraphic(this.uid);this._svgGroup.add(s.root),this._svgGraphicRecord=s,this._svgMapName=n}},t.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var a=geoSourceManager.getGeoResource(n);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(n,a,s){var l=n.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=n.get("scaleLimit"),c.zoom=l.getZoom(),u.enable(n.get("roam")||!1);var d=n.mainType;function Ct(){var ar={type:"geoRoam",componentType:d};return ar[d+"Id"]=n.id,ar}u.off("pan").on("pan",function(ar){this._mouseDownFlag=!1,updateViewOnPan(c,ar.dx,ar.dy),s.dispatchAction(extend(Ct(),{dx:ar.dx,dy:ar.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(ar){this._mouseDownFlag=!1,updateViewOnZoom(c,ar.scale,ar.originX,ar.originY),s.dispatchAction(extend(Ct(),{totalZoom:c.zoom,zoom:ar.scale,originX:ar.originX,originY:ar.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(ar,en,tn){return l.containPoint([en,tn])&&!onIrrelevantElement(ar,s,n)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var a=n.getTextContent();a&&(a.ignore=mapLabelRaw(a).ignore)})},t.prototype._updateMapSelectHandler=function(n,a,s,l){var u=this;a.off("mousedown"),a.off("click"),n.get("selectedMode")&&(a.on("mousedown",function(){u._mouseDownFlag=!0}),a.on("click",function(c){u._mouseDownFlag&&(u._mouseDownFlag=!1)}))},t})();function applyOptionStyleForRegion(t,n,a,s){var l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["blur","itemStyle"]),d=s.getModel(["select","itemStyle"]),Ct=getFixedItemStyle(l),ar=getFixedItemStyle(u),en=getFixedItemStyle(d),tn=getFixedItemStyle(c),on=t.data;if(on){var cn=on.getItemVisual(a,"style"),dn=on.getItemVisual(a,"decal");t.isVisualEncodedByVisualMap&&cn.fill&&(Ct.fill=cn.fill),dn&&(Ct.decal=createOrUpdatePatternFromDecal(dn,t.api))}n.setStyle(Ct),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=ar,n.ensureState("select").style=en,n.ensureState("blur").style=tn,setDefaultStateProxy(n)}function resetLabelForRegion(t,n,a,s,l,u,c){var d=t.data,Ct=t.isGeo,ar=d&&isNaN(d.get(d.mapDimension("value"),u)),en=d&&d.getItemLayout(u);if(Ct||ar||en&&en.showLabel){var tn=Ct?a:u,on=void 0;(!d||u>=0)&&(on=l);var cn=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(s),{labelFetcher:on,labelDataIndex:tn,defaultText:a},cn);var dn=n.getTextContent();if(dn&&(mapLabelRaw(dn).ignore=dn.ignore,n.textConfig&&c)){var Cn=n.getBoundingRect().clone();n.textConfig.layoutRect=Cn,n.textConfig.position=[(c[0]-Cn.x)/Cn.width*100+"%",(c[1]-Cn.y)/Cn.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(t,n,a,s,l,u){t.data?t.data.setItemGraphicEl(u,n):getECData(n).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:a,region:s&&s.option||{}}}function resetTooltipForRegion(t,n,a,s,l){t.data||setTooltipConfig({el:n,componentModel:l,itemName:a,itemTooltipOption:s.get("tooltip")})}function resetStateTriggerForRegion(t,n,a,s,l){n.highDownSilentOnTouch=!!l.get("selectedMode");var u=s.getModel("emphasis"),c=u.get("focus");return toggleHoverEmphasis(n,c,u.get("blurScope"),u.get("disabled")),t.isGeo&&enableComponentHighDownFeatures(n,l,a),c}function projectPolys(t,n,a){var s=[],l;function u(){l=[]}function c(){l.length&&(s.push(l),l=[])}var d=n({polygonStart:u,polygonEnd:c,lineStart:u,lineEnd:c,point:function(Ct,ar){isFinite(Ct)&&isFinite(ar)&&l.push([Ct,ar])},sphere:function(){}});return!a&&d.polygonStart(),each$f(t,function(Ct){d.lineStart();for(var ar=0;ar<Ct.length;ar++)d.point(Ct[ar][0],Ct[ar][1]);d.lineEnd()}),!a&&d.polygonEnd(),s}var MapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var c=this.group;if(c.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===a.id){var d=this._mapDraw;d&&c.add(d.group)}else if(a.needsDrawMap){var d=this._mapDraw||new MapDraw(l);c.add(d.group),d.draw(a,s,l,this,u),this._mapDraw=d}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&s.getComponent("legend")&&this._renderSymbols(a,s,l)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(a,s,l){var u=a.originalData,c=this.group;u.each(u.mapDimension("value"),function(d,Ct){if(!isNaN(d)){var ar=u.getItemLayout(Ct);if(!(!ar||!ar.point)){var en=ar.point,tn=ar.offset,on=new Circle({style:{fill:a.getData().getVisual("style").fill},shape:{cx:en[0]+tn*9,cy:en[1],r:3},silent:!0,z2:8+(tn?0:Z2_EMPHASIS_LIFT+1)});if(!tn){var cn=a.mainSeries.getData(),dn=u.getName(Ct),Cn=cn.indexOfName(dn),In=u.getItemModel(Ct),ix=In.getModel("label"),ax=cn.getItemGraphicEl(Cn);setLabelStyle(on,getLabelStatesModels(In),{labelFetcher:{getFormattedLabel:function(ox,sx){return a.getFormattedLabel(Cn,sx)}},defaultText:dn}),on.disableLabelAnimation=!0,ix.get("position")||on.setTextConfig({position:"bottom"}),ax.onHoverStateChange=function(ox){setStatesFlag(on,ox)}}c.add(on)}}})},n.type="map",n})(ChartView),MapSeries=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(s){if(s!=null){var l=this.getData().getName(s),u=this.coordinateSystem,c=u.getRegion(l);return c&&u.dataToPoint(c.getCenter())}},a}return n.prototype.getInitialData=function(a){for(var s=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),u=[],c=0,d=s.count();c<d;c++){var Ct=s.getName(c);l.set(Ct,c)}var ar=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(ar.regions,function(en){var tn=en.name,on=l.get(tn),cn=en.properties&&en.properties.echartsStyle,dn;on==null?(dn={name:tn},u.push(dn)):dn=s.getRawDataItem(on),cn&&merge(dn,cn)}),s.appendData(u),s},n.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return a!=null?this.ecModel.getComponent("geo",a):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(a){var s=this.getData();return s.get(s.mapDimension("value"),a)},n.prototype.getRegionModel=function(a){var s=this.getData();return s.getItemModel(s.indexOfName(a))},n.prototype.formatTooltip=function(a,s,l){for(var u=this.getData(),c=this.getRawValue(a),d=u.getName(a),Ct=this.seriesGroup,ar=[],en=0;en<Ct.length;en++){var tn=Ct[en].originalData.indexOfName(d),on=u.mapDimension("value");isNaN(Ct[en].originalData.get(on,tn))||ar.push(Ct[en].name)}return createTooltipMarkup("section",{header:ar.join(", "),noHeader:!ar.length,blocks:[createTooltipMarkup("nameValue",{name:d,value:c})]})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.getLegendIcon=function(a){var s=a.icon||"roundRect",l=createSymbol$1(s,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return l.setStyle(a.itemStyle),l.style.stroke="none",s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n})(SeriesModel);function dataStatistics(t,n){var a={};return each$f(t,function(s){s.each(s.mapDimension("value"),function(l,u){var c="ec-"+s.getName(u);a[c]=a[c]||[],isNaN(l)||a[c].push(l)})}),t[0].map(t[0].mapDimension("value"),function(s,l){for(var u="ec-"+t[0].getName(l),c=0,d=1/0,Ct=-1/0,ar=a[u].length,en=0;en<ar;en++)d=Math.min(d,a[u][en]),Ct=Math.max(Ct,a[u][en]),c+=a[u][en];var tn;return n==="min"?tn=d:n==="max"?tn=Ct:n==="average"?tn=c/ar:tn=c,ar===0?NaN:tn})}function mapDataStatistic(t){var n={};t.eachSeriesByType("map",function(a){var s=a.getHostGeoModel(),l=s?"o"+s.id:"i"+a.getMapType();(n[l]=n[l]||[]).push(a)}),each$f(n,function(a,s){for(var l=dataStatistics(map$1(a,function(c){return c.getData()}),a[0].get("mapValueCalculation")),u=0;u<a.length;u++)a[u].originalData=a[u].getData();for(var u=0;u<a.length;u++)a[u].seriesGroup=a,a[u].needsDrawMap=u===0&&!a[u].getHostGeoModel(),a[u].setData(l.cloneShallow()),a[u].mainSeries=a[0]})}function mapSymbolLayout(t){var n={};t.eachSeriesByType("map",function(a){var s=a.getMapType();if(!(a.getHostGeoModel()||n[s])){var l={};each$f(a.seriesGroup,function(c){var d=c.coordinateSystem,Ct=c.originalData;c.get("showLegendSymbol")&&t.getComponent("legend")&&Ct.each(Ct.mapDimension("value"),function(ar,en){var tn=Ct.getName(en),on=d.getRegion(tn);if(!(!on||isNaN(ar))){var cn=l[tn]||0,dn=d.dataToPoint(on.getCenter());l[tn]=cn+1,Ct.setItemLayout(en,{point:dn,offset:cn})}})});var u=a.getData();u.each(function(c){var d=u.getName(c),Ct=u.getItemLayout(c)||{};Ct.showLabel=!l[d],u.setItemLayout(c,Ct)}),n[s]=!0}})}var v2ApplyTransform=applyTransform$1,View=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.type="view",s.dimensions=["x","y"],s._roamTransformable=new Transformable,s._rawTransformable=new Transformable,s.name=a,s}return n.prototype.setBoundingRect=function(a,s,l,u){return this._rect=new BoundingRect(a,s,l,u),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(a,s,l,u){this._transformTo(a,s,l,u),this._viewRect=new BoundingRect(a,s,l,u)},n.prototype._transformTo=function(a,s,l,u){var c=this.getBoundingRect(),d=this._rawTransformable;d.transform=c.calculateTransform(new BoundingRect(a,s,l,u));var Ct=d.parent;d.parent=null,d.decomposeTransform(),d.parent=Ct,this._updateTransform()},n.prototype.setCenter=function(a,s){a&&(this._center=[parsePercent(a[0],s.getWidth()),parsePercent(a[1],s.getHeight())],this._updateCenterAndZoom())},n.prototype.setZoom=function(a){a=a||1;var s=this.zoomLimit;s&&(s.max!=null&&(a=Math.min(s.max,a)),s.min!=null&&(a=Math.max(s.min,a))),this._zoom=a,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),s=a.x+a.width/2,l=a.y+a.height/2;return[s,l]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,a),l=applyTransform$1([],l,a),s.originX=u[0],s.originY=u[1],s.x=l[0]-u[0],s.y=l[1]-u[1],s.scaleX=s.scaleY=c,this._updateTransform()},n.prototype._updateTransform=function(){var a=this._roamTransformable,s=this._rawTransformable;s.parent=a,a.updateTransform(),s.updateTransform(),copy(this.transform||(this.transform=[]),s.transform||create$1()),this._rawTransform=s.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var a=this._rawTransformable,s=this._roamTransformable,l=new Transformable;return l.transform=s.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},n.prototype.dataToPoint=function(a,s,l){var u=s?this._rawTransform:this.transform;return l=l||[],u?v2ApplyTransform(l,a,u):copy$1(l,a)},n.prototype.pointToData=function(a){var s=this.invTransform;return s?v2ApplyTransform([],a,s):[a[0],a[1]]},n.prototype.convertToPixel=function(a,s,l){var u=getCoordSys$4(s);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(a,s,l){var u=getCoordSys$4(s);return u===this?u.pointToData(l):null},n.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},n.dimensions=["x","y"],n})(Transformable);function getCoordSys$4(t){var n=t.seriesModel;return n?n.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=s;var c=l.projection,d=geoSourceManager.load(s,l.nameMap,l.nameProperty),Ct=geoSourceManager.getGeoResource(s);u.resourceType=Ct?Ct.type:null;var ar=u.regions=d.regions,en=GEO_DEFAULT_PARAMS[Ct.type];u._regionsMap=d.regionsMap,u.regions=d.regions,u.projection=c;var tn;if(c)for(var on=0;on<ar.length;on++){var cn=ar[on].getBoundingRect(c);tn=tn||cn.clone(),tn.union(cn)}else tn=d.boundingRect;return u.setBoundingRect(tn.x,tn.y,tn.width,tn.height),u.aspectScale=c?1:retrieve2(l.aspectScale,en.aspectScale),u._invertLongitute=c?!1:en.invertLongitute,u}return n.prototype._transformTo=function(a,s,l,u){var c=this.getBoundingRect(),d=this._invertLongitute;c=c.clone(),d&&(c.y=-c.y-c.height);var Ct=this._rawTransformable;Ct.transform=c.calculateTransform(new BoundingRect(a,s,l,u));var ar=Ct.parent;Ct.parent=null,Ct.decomposeTransform(),Ct.parent=ar,d&&(Ct.scaleY=-Ct.scaleY),this._updateTransform()},n.prototype.getRegion=function(a){return this._regionsMap.get(a)},n.prototype.getRegionByCoord=function(a){for(var s=this.regions,l=0;l<s.length;l++){var u=s[l];if(u.type==="geoJSON"&&u.contain(a))return s[l]}},n.prototype.addGeoCoord=function(a,s){this._nameCoordMap.set(a,s)},n.prototype.getGeoCoord=function(a){var s=this._regionsMap.get(a);return this._nameCoordMap.get(a)||s&&s.getCenter()},n.prototype.dataToPoint=function(a,s,l){if(isString$1(a)&&(a=this.getGeoCoord(a)),a){var u=this.projection;return u&&(a=u.project(a)),a&&this.projectedToPoint(a,s,l)}},n.prototype.pointToData=function(a){var s=this.projection;return s&&(a=s.unproject(a)),a&&this.pointToProjected(a)},n.prototype.pointToProjected=function(a){return t.prototype.pointToData.call(this,a)},n.prototype.projectedToPoint=function(a,s,l){return t.prototype.dataToPoint.call(this,a,s,l)},n.prototype.convertToPixel=function(a,s,l){var u=getCoordSys$3(s);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(a,s,l){var u=getCoordSys$3(s);return u===this?u.pointToData(l):null},n})(View);mixin(Geo,View);function getCoordSys$3(t){var n=t.geoModel,a=t.seriesModel;return n?n.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(t,n){var a=t.get("boundingCoords");if(a!=null){var s=a[0],l=a[1];if(isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])){var u=this.projection;if(u){var c=s[0],d=s[1],Ct=l[0],ar=l[1];s=[1/0,1/0],l=[-1/0,-1/0];var en=function(cx,hx,gx,fx){for(var dx=gx-cx,mx=fx-hx,vx=0;vx<=100;vx++){var bx=vx/100,xx=u.project([cx+dx*bx,hx+mx*bx]);min$1(s,s,xx),max$1(l,l,xx)}};en(c,d,Ct,d),en(Ct,d,Ct,ar),en(Ct,ar,c,ar),en(c,ar,Ct,d)}this.setBoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1])}}var tn=this.getBoundingRect(),on=t.get("layoutCenter"),cn=t.get("layoutSize"),dn=n.getWidth(),Cn=n.getHeight(),In=tn.width/tn.height*this.aspectScale,ix=!1,ax,ox;on&&cn&&(ax=[parsePercent(on[0],dn),parsePercent(on[1],Cn)],ox=parsePercent(cn,Math.min(dn,Cn)),!isNaN(ax[0])&&!isNaN(ax[1])&&!isNaN(ox)&&(ix=!0));var sx;if(ix)sx={},In>1?(sx.width=ox,sx.height=ox/In):(sx.height=ox,sx.width=ox*In),sx.y=ax[1]-sx.height/2,sx.x=ax[0]-sx.width/2;else{var ux=t.getBoxLayoutParams();ux.aspect=In,sx=getLayoutRect(ux,{width:dn,height:Cn})}this.setViewRect(sx.x,sx.y,sx.width,sx.height),this.setCenter(t.get("center"),n),this.setZoom(t.get("zoom"))}function setGeoCoords(t,n){each$f(n.get("geoCoord"),function(a,s){t.addGeoCoord(s,a)})}var GeoCreator=(function(){function t(){this.dimensions=geo2DDimensions}return t.prototype.create=function(n,a){var s=[];function l(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}n.eachComponent("geo",function(c,d){var Ct=c.get("map"),ar=new Geo(Ct+d,Ct,extend({nameMap:c.get("nameMap")},l(c)));ar.zoomLimit=c.get("scaleLimit"),s.push(ar),c.coordinateSystem=ar,ar.model=c,ar.resize=resizeGeo,ar.resize(c,a)}),n.eachSeries(function(c){var d=c.get("coordinateSystem");if(d==="geo"){var Ct=c.get("geoIndex")||0;c.coordinateSystem=s[Ct]}});var u={};return n.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var d=c.getMapType();u[d]=u[d]||[],u[d].push(c)}}),each$f(u,function(c,d){var Ct=map$1(c,function(en){return en.get("nameMap")}),ar=new Geo(d,d,extend({nameMap:mergeAll(Ct)},l(c[0])));ar.zoomLimit=retrieve.apply(null,map$1(c,function(en){return en.get("scaleLimit")})),s.push(ar),ar.resize=resizeGeo,ar.resize(c[0],a),each$f(c,function(en){en.coordinateSystem=ar,setGeoCoords(ar,en)})}),s},t.prototype.getFilledRegions=function(n,a,s,l){for(var u=(n||[]).slice(),c=createHashMap(),d=0;d<u.length;d++)c.set(u[d].name,u[d]);var Ct=geoSourceManager.load(a,s,l);return each$f(Ct.regions,function(ar){var en=ar.name,tn=c.get(en),on=ar.properties&&ar.properties.echartsStyle;tn||(tn={name:en},u.push(tn)),on&&merge(tn,on)}),u},t})(),geoCreator=new GeoCreator,GeoModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s,l){var u=geoSourceManager.getGeoResource(a.map);if(u&&u.type==="geoJSON"){var c=a.itemStyle=a.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(a,l),defaultEmphasis(a,"label",["show"])},n.prototype.optionUpdated=function(){var a=this,s=this.option;s.regions=geoCreator.getFilledRegions(s.regions,s.map,s.nameMap,s.nameProperty);var l={};this._optionModelMap=reduce(s.regions||[],function(u,c){var d=c.name;return d&&(u.set(d,new Model(c,a,a.ecModel)),c.selected&&(l[d]=!0)),u},createHashMap()),s.selectedMap||(s.selectedMap=l)},n.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(a,s){var l=this.getRegionModel(a),u=s==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),c={name:a};if(isFunction$1(u))return c.status=s,u(c);if(isString$1(u))return u.replace("{a}",a??"")},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.select=function(a){var s=this.option,l=s.selectedMode;if(l){l!=="multiple"&&(s.selectedMap=null);var u=s.selectedMap||(s.selectedMap={});u[a]=!0}},n.prototype.unSelect=function(a){var s=this.option.selectedMap;s&&(s[a]=!1)},n.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},n.prototype.isSelected=function(a){var s=this.option.selectedMap;return!!(s&&s[a])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n})(ComponentModel);function getCenterCoord(t,n){return t.pointToProjected?t.pointToProjected(n):t.pointToData(n)}function updateCenterAndZoom(t,n,a,s){var l=t.getZoom(),u=t.getCenter(),c=n.zoom,d=t.projectedToPoint?t.projectedToPoint(u):t.dataToPoint(u);if(n.dx!=null&&n.dy!=null&&(d[0]-=n.dx,d[1]-=n.dy,t.setCenter(getCenterCoord(t,d),s)),c!=null){if(a){var Ct=a.min||0,ar=a.max||1/0;c=Math.max(Math.min(l*c,ar),Ct)/l}t.scaleX*=c,t.scaleY*=c;var en=(n.originX-t.x)*(c-1),tn=(n.originY-t.y)*(c-1);t.x-=en,t.y-=tn,t.updateTransform(),t.setCenter(getCenterCoord(t,d),s),t.setZoom(c*l)}return{center:t.getCenter(),zoom:t.getZoom()}}var GeoView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.focusBlurEnabled=!0,a}return n.prototype.init=function(a,s){this._api=s},n.prototype.render=function(a,s,l,u){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(l));var c=this._mapDraw;c.draw(a,s,l,this,u),c.group.on("click",this._handleRegionClick,this),c.group.silent=a.get("silent"),this.group.add(c.group),this.updateSelectStatus(a,s,l)},n.prototype._handleRegionClick=function(a){var s;findEventDispatcher(a.target,function(l){return(s=getECData(l).eventData)!=null},!0),s&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:s.name})},n.prototype.updateSelectStatus=function(a,s,l){var u=this;this._mapDraw.group.traverse(function(c){var d=getECData(c).eventData;if(d)return u._model.isSelected(d.name)?l.enterSelect(c):l.leaveSelect(c),!0})},n.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n})(ComponentView);function registerMap(t,n,a){geoSourceManager.registerMap(t,n,a)}function install$J(t){t.registerCoordinateSystem("geo",geoCreator),t.registerComponentModel(GeoModel),t.registerComponentView(GeoView),t.registerImpl("registerMap",registerMap),t.registerImpl("getMap",function(a){return geoSourceManager.getMapForUser(a)});function n(a,s){s.update="geo:updateSelectStatus",t.registerAction(s,function(l,u){var c={},d=[];return u.eachComponent({mainType:"geo",query:l},function(Ct){Ct[a](l.name);var ar=Ct.coordinateSystem;each$f(ar.regions,function(tn){c[tn.name]=Ct.isSelected(tn.name)||!1});var en=[];each$f(c,function(tn,on){c[on]&&en.push(on)}),d.push({geoIndex:Ct.componentIndex,name:en})}),{selected:c,allSelected:d,name:l.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,s,l){var u=a.componentType||"series";s.eachComponent({mainType:u,query:a},function(c){var d=c.coordinateSystem;if(d.type==="geo"){var Ct=updateCenterAndZoom(d,a,c.get("scaleLimit"),l);c.setCenter&&c.setCenter(Ct.center),c.setZoom&&c.setZoom(Ct.zoom),u==="series"&&each$f(c.seriesGroup,function(ar){ar.setCenter(Ct.center),ar.setZoom(Ct.zoom)})}})})}function install$I(t){use(install$J),t.registerChartView(MapView),t.registerSeriesModel(MapSeries),t.registerLayout(mapSymbolLayout),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",t.registerAction)}function init(t){var n=t;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a=[n],s,l;s=a.pop();)if(l=s.children,s.isExpand&&l.length)for(var u=l.length,c=u-1;c>=0;c--){var d=l[c];d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},a.push(d)}}function firstWalk(t,n){var a=t.isExpand?t.children:[],s=t.parentNode.children,l=t.hierNode.i?s[t.hierNode.i-1]:null;if(a.length){executeShifts(t);var u=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;l?(t.hierNode.prelim=l.hierNode.prelim+n(t,l),t.hierNode.modifier=t.hierNode.prelim-u):t.hierNode.prelim=u}else l&&(t.hierNode.prelim=l.hierNode.prelim+n(t,l));t.parentNode.hierNode.defaultAncestor=apportion(t,l,t.parentNode.hierNode.defaultAncestor||s[0],n)}function secondWalk(t){var n=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:n},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function separation(t){return arguments.length?t:defaultSeparation}function radialCoordinate(t,n){return t-=Math.PI/2,{x:n*Math.cos(t),y:n*Math.sin(t)}}function getViewRect$4(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function executeShifts(t){for(var n=t.children,a=n.length,s=0,l=0;--a>=0;){var u=n[a];u.hierNode.prelim+=s,u.hierNode.modifier+=s,l+=u.hierNode.change,s+=u.hierNode.shift+l}}function apportion(t,n,a,s){if(n){for(var l=t,u=t,c=u.parentNode.children[0],d=n,Ct=l.hierNode.modifier,ar=u.hierNode.modifier,en=c.hierNode.modifier,tn=d.hierNode.modifier;d=nextRight(d),u=nextLeft(u),d&&u;){l=nextRight(l),c=nextLeft(c),l.hierNode.ancestor=t;var on=d.hierNode.prelim+tn-u.hierNode.prelim-ar+s(d,u);on>0&&(moveSubtree(nextAncestor(d,t,a),t,on),ar+=on,Ct+=on),tn+=d.hierNode.modifier,ar+=u.hierNode.modifier,Ct+=l.hierNode.modifier,en+=c.hierNode.modifier}d&&!nextRight(l)&&(l.hierNode.thread=d,l.hierNode.modifier+=tn-Ct),u&&!nextLeft(c)&&(c.hierNode.thread=u,c.hierNode.modifier+=ar-en,a=t)}return a}function nextRight(t){var n=t.children;return n.length&&t.isExpand?n[n.length-1]:t.hierNode.thread}function nextLeft(t){var n=t.children;return n.length&&t.isExpand?n[0]:t.hierNode.thread}function nextAncestor(t,n,a){return t.hierNode.ancestor.parentNode===n.parentNode?t.hierNode.ancestor:a}function moveSubtree(t,n,a){var s=a/(n.hierNode.i-t.hierNode.i);n.hierNode.change-=s,n.hierNode.shift+=a,n.hierNode.modifier+=a,n.hierNode.prelim+=a,t.hierNode.change+=s}function defaultSeparation(t,n){return t.parentNode===n.parentNode?1:2}var TreeEdgeShape=(function(){function t(){this.parentPoint=[],this.childPoints=[]}return t})(),TreePath=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TreeEdgeShape},n.prototype.buildPath=function(a,s){var l=s.childPoints,u=l.length,c=s.parentPoint,d=l[0],Ct=l[u-1];if(u===1){a.moveTo(c[0],c[1]),a.lineTo(d[0],d[1]);return}var ar=s.orient,en=ar==="TB"||ar==="BT"?0:1,tn=1-en,on=parsePercent(s.forkPosition,1),cn=[];cn[en]=c[en],cn[tn]=c[tn]+(Ct[tn]-c[tn])*on,a.moveTo(c[0],c[1]),a.lineTo(cn[0],cn[1]),a.moveTo(d[0],d[1]),cn[en]=d[en],a.lineTo(cn[0],cn[1]),cn[en]=Ct[en],a.lineTo(cn[0],cn[1]),a.lineTo(Ct[0],Ct[1]);for(var dn=1;dn<u-1;dn++){var Cn=l[dn];a.moveTo(Cn[0],Cn[1]),cn[en]=Cn[en],a.lineTo(cn[0],cn[1])}},n})(Path),TreeView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._mainGroup=new Group$3,a}return n.prototype.init=function(a,s){this._controller=new RoamController(s.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(a,s,l){var u=a.getData(),c=a.layoutInfo,d=this._mainGroup,Ct=a.get("layout");Ct==="radial"?(d.x=c.x+c.width/2,d.y=c.y+c.height/2):(d.x=c.x,d.y=c.y),this._updateViewCoordSys(a,l),this._updateController(a,s,l);var ar=this._data;u.diff(ar).add(function(en){symbolNeedsDraw(u,en)&&updateNode(u,en,null,d,a)}).update(function(en,tn){var on=ar.getItemGraphicEl(tn);if(!symbolNeedsDraw(u,en)){on&&removeNode(ar,tn,on,d,a);return}updateNode(u,en,on,d,a)}).remove(function(en){var tn=ar.getItemGraphicEl(en);tn&&removeNode(ar,en,tn,d,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),a.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function(en,tn){en.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:tn})})}),this._data=u},n.prototype._updateViewCoordSys=function(a,s){var l=a.getData(),u=[];l.each(function(tn){var on=l.getItemLayout(tn);on&&!isNaN(on.x)&&!isNaN(on.y)&&u.push([+on.x,+on.y])});var c=[],d=[];fromPoints(u,c,d);var Ct=this._min,ar=this._max;d[0]-c[0]===0&&(c[0]=Ct?Ct[0]:c[0]-1,d[0]=ar?ar[0]:d[0]+1),d[1]-c[1]===0&&(c[1]=Ct?Ct[1]:c[1]-1,d[1]=ar?ar[1]:d[1]+1);var en=a.coordinateSystem=new View;en.zoomLimit=a.get("scaleLimit"),en.setBoundingRect(c[0],c[1],d[0]-c[0],d[1]-c[1]),en.setCenter(a.get("center"),s),en.setZoom(a.get("zoom")),this.group.attr({x:en.x,y:en.y,scaleX:en.scaleX,scaleY:en.scaleY}),this._min=c,this._max=d},n.prototype._updateController=function(a,s,l){var u=this,c=this._controller,d=this._controllerHost,Ct=this.group;c.setPointerChecker(function(ar,en,tn){var on=Ct.getBoundingRect();return on.applyTransform(Ct.transform),on.contain(en,tn)&&!onIrrelevantElement(ar,l,a)}),c.enable(a.get("roam")),d.zoomLimit=a.get("scaleLimit"),d.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(ar){updateViewOnPan(d,ar.dx,ar.dy),l.dispatchAction({seriesId:a.id,type:"treeRoam",dx:ar.dx,dy:ar.dy})}).on("zoom",function(ar){updateViewOnZoom(d,ar.scale,ar.originX,ar.originY),l.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:ar.scale,originX:ar.originX,originY:ar.originY}),u._updateNodeAndLinkScale(a),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(a){var s=a.getData(),l=this._getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u.setSymbolScale(l)})},n.prototype._getNodeGlobalScale=function(a){var s=a.coordinateSystem;if(s.type!=="view")return 1;var l=this._nodeScaleRatio,u=s.scaleX||1,c=s.getZoom(),d=(c-1)*l+1;return d/u},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n})(ChartView);function symbolNeedsDraw(t,n){var a=t.getItemLayout(n);return a&&!isNaN(a.x)&&!isNaN(a.y)}function updateNode(t,n,a,s,l){var u=!a,c=t.tree.getNodeByDataIndex(n),d=c.getModel(),Ct=c.getVisual("style").fill,ar=c.isExpand===!1&&c.children.length!==0?Ct:"#fff",en=t.tree.root,tn=c.parentNode===en?c:c.parentNode||c,on=t.getItemGraphicEl(tn.dataIndex),cn=tn.getLayout(),dn=on?{x:on.__oldX,y:on.__oldY,rawX:on.__radialOldRawX,rawY:on.__radialOldRawY}:cn,Cn=c.getLayout();u?(a=new Symbol$1(t,n,null,{symbolInnerColor:ar,useNameLabel:!0}),a.x=dn.x,a.y=dn.y):a.updateData(t,n,null,{symbolInnerColor:ar,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=Cn.rawX,a.__radialRawY=Cn.rawY,s.add(a),t.setItemGraphicEl(n,a),a.__oldX=a.x,a.__oldY=a.y,updateProps$1(a,{x:Cn.x,y:Cn.y},l);var In=a.getSymbolPath();if(l.get("layout")==="radial"){var ix=en.children[0],ax=ix.getLayout(),ox=ix.children.length,sx=void 0,ux=void 0;if(Cn.x===ax.x&&c.isExpand===!0&&ix.children.length){var cx={x:(ix.children[0].getLayout().x+ix.children[ox-1].getLayout().x)/2,y:(ix.children[0].getLayout().y+ix.children[ox-1].getLayout().y)/2};sx=Math.atan2(cx.y-ax.y,cx.x-ax.x),sx<0&&(sx=Math.PI*2+sx),ux=cx.x<ax.x,ux&&(sx=sx-Math.PI)}else sx=Math.atan2(Cn.y-ax.y,Cn.x-ax.x),sx<0&&(sx=Math.PI*2+sx),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(ux=Cn.x<ax.x,ux&&(sx=sx-Math.PI)):(ux=Cn.x>ax.x,ux||(sx=sx-Math.PI));var hx=ux?"left":"right",gx=d.getModel("label"),fx=gx.get("rotate"),dx=fx*(Math.PI/180),mx=In.getTextContent();mx&&(In.setTextConfig({position:gx.get("position")||hx,rotation:fx==null?-sx:dx,origin:"center"}),mx.setStyle("verticalAlign","middle"))}var vx=d.get(["emphasis","focus"]),bx=vx==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):vx==="ancestor"?c.getAncestorsIndices():vx==="descendant"?c.getDescendantIndices():null;bx&&(getECData(a).focus=bx),drawEdge(l,c,en,a,dn,cn,Cn,s),a.__edge&&(a.onHoverStateChange=function(xx){if(xx!=="blur"){var _x=c.parentNode&&t.getItemGraphicEl(c.parentNode.dataIndex);_x&&_x.hoverState===HOVER_STATE_BLUR||setStatesFlag(a.__edge,xx)}})}function drawEdge(t,n,a,s,l,u,c,d){var Ct=n.getModel(),ar=t.get("edgeShape"),en=t.get("layout"),tn=t.getOrient(),on=t.get(["lineStyle","curveness"]),cn=t.get("edgeForkPosition"),dn=Ct.getModel("lineStyle").getLineStyle(),Cn=s.__edge;if(ar==="curve")n.parentNode&&n.parentNode!==a&&(Cn||(Cn=s.__edge=new BezierCurve({shape:getEdgeShape(en,tn,on,l,l)})),updateProps$1(Cn,{shape:getEdgeShape(en,tn,on,u,c)},t));else if(ar==="polyline"&&en==="orthogonal"&&n!==a&&n.children&&n.children.length!==0&&n.isExpand===!0){for(var In=n.children,ix=[],ax=0;ax<In.length;ax++){var ox=In[ax].getLayout();ix.push([ox.x,ox.y])}Cn||(Cn=s.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:tn,forkPosition:cn}})),updateProps$1(Cn,{shape:{parentPoint:[c.x,c.y],childPoints:ix}},t)}Cn&&!(ar==="polyline"&&!n.isExpand)&&(Cn.useStyle(defaults({strokeNoScale:!0,fill:null},dn)),setStatesStylesFromModel(Cn,Ct,"lineStyle"),setDefaultStateProxy(Cn),d.add(Cn))}function removeNodeEdge(t,n,a,s,l){var u=n.tree.root,c=getSourceNode(u,t),d=c.source,Ct=c.sourceLayout,ar=n.getItemGraphicEl(t.dataIndex);if(ar){var en=n.getItemGraphicEl(d.dataIndex),tn=en.__edge,on=ar.__edge||(d.isExpand===!1||d.children.length===1?tn:void 0),cn=s.get("edgeShape"),dn=s.get("layout"),Cn=s.get("orient"),In=s.get(["lineStyle","curveness"]);on&&(cn==="curve"?removeElement(on,{shape:getEdgeShape(dn,Cn,In,Ct,Ct),style:{opacity:0}},s,{cb:function(){a.remove(on)},removeOpt:l}):cn==="polyline"&&s.get("layout")==="orthogonal"&&removeElement(on,{shape:{parentPoint:[Ct.x,Ct.y],childPoints:[[Ct.x,Ct.y]]},style:{opacity:0}},s,{cb:function(){a.remove(on)},removeOpt:l}))}}function getSourceNode(t,n){for(var a=n.parentNode===t?n:n.parentNode||n,s;s=a.getLayout(),s==null;)a=a.parentNode===t?a:a.parentNode||a;return{source:a,sourceLayout:s}}function removeNode(t,n,a,s,l){var u=t.tree.getNodeByDataIndex(n),c=t.tree.root,d=getSourceNode(c,u).sourceLayout,Ct={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(a,{x:d.x+1,y:d.y+1},l,{cb:function(){s.remove(a),t.setItemGraphicEl(n,null)},removeOpt:Ct}),a.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:Ct}),u.children.forEach(function(ar){removeNodeEdge(ar,t,s,l,Ct)}),removeNodeEdge(u,t,s,l,Ct)}function getEdgeShape(t,n,a,s,l){var u,c,d,Ct,ar,en,tn,on;if(t==="radial"){ar=s.rawX,tn=s.rawY,en=l.rawX,on=l.rawY;var cn=radialCoordinate(ar,tn),dn=radialCoordinate(ar,tn+(on-tn)*a),Cn=radialCoordinate(en,on+(tn-on)*a),In=radialCoordinate(en,on);return{x1:cn.x||0,y1:cn.y||0,x2:In.x||0,y2:In.y||0,cpx1:dn.x||0,cpy1:dn.y||0,cpx2:Cn.x||0,cpy2:Cn.y||0}}else ar=s.x,tn=s.y,en=l.x,on=l.y,(n==="LR"||n==="RL")&&(u=ar+(en-ar)*a,c=tn,d=en+(ar-en)*a,Ct=on),(n==="TB"||n==="BT")&&(u=ar,c=tn+(on-tn)*a,d=en,Ct=on+(tn-on)*a);return{x1:ar,y1:tn,x2:en,y2:on,cpx1:u,cpy1:c,cpx2:d,cpy2:Ct}}var inner$e=makeInner();function linkSeriesData(t){var n=t.mainData,a=t.datas;a||(a={main:n},t.datasAttr={main:"data"}),t.datas=t.mainData=null,linkAll(n,a,t),each$f(a,function(s){each$f(n.TRANSFERABLE_METHODS,function(l){s.wrapMethod(l,curry$1(transferInjection,t))})}),n.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,t)),each$f(n.CHANGABLE_METHODS,function(s){n.wrapMethod(s,curry$1(changeInjection,t))}),assert(a[n.dataType]===n)}function transferInjection(t,n){if(isMainData(this)){var a=extend({},inner$e(this).datas);a[this.dataType]=n,linkAll(n,a,t)}else linkSingle(n,this.dataType,inner$e(this).mainData,t);return n}function changeInjection(t,n){return t.struct&&t.struct.update(),n}function cloneShallowInjection(t,n){return each$f(inner$e(n).datas,function(a,s){a!==n&&linkSingle(a.cloneShallow(),s,n,t)}),n}function getLinkedData(t){var n=inner$e(this).mainData;return t==null||n==null?n:inner$e(n).datas[t]}function getLinkedDataAll(){var t=inner$e(this).mainData;return t==null?[{data:t}]:map$1(keys(inner$e(t).datas),function(n){return{type:n,data:inner$e(t).datas[n]}})}function isMainData(t){return inner$e(t).mainData===t}function linkAll(t,n,a){inner$e(t).datas={},each$f(n,function(s,l){linkSingle(s,l,t,a)})}function linkSingle(t,n,a,s){inner$e(a).datas[n]=t,inner$e(t).mainData=a,t.dataType=n,s.struct&&(t[s.structAttr]=s.struct,s.struct[s.datasAttr[n]]=t),t.getLinkedData=getLinkedData,t.getLinkedDataAll=getLinkedDataAll}var TreeNode=(function(){function t(n,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=a}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=null),n=n||{},isString$1(n)&&(n={order:n});var l=n.order||"preorder",u=this[n.attr||"children"],c;l==="preorder"&&(c=a.call(s,this));for(var d=0;!c&&d<u.length;d++)u[d].eachNode(n,a,s);l==="postorder"&&a.call(s,this)},t.prototype.updateDepthAndHeight=function(n){var a=0;this.depth=n;for(var s=0;s<this.children.length;s++){var l=this.children[s];l.updateDepthAndHeight(n+1),l.height>a&&(a=l.height)}this.height=a+1},t.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var a=0,s=this.children,l=s.length;a<l;a++){var u=s[a].getNodeById(n);if(u)return u}},t.prototype.contains=function(n){if(n===this)return!0;for(var a=0,s=this.children,l=s.length;a<l;a++){var u=s[a].contains(n);if(u)return u}},t.prototype.getAncestors=function(n){for(var a=[],s=n?this:this.parentNode;s;)a.push(s),s=s.parentNode;return a.reverse(),a},t.prototype.getAncestorsIndices=function(){for(var n=[],a=this;a;)n.push(a.dataIndex),a=a.parentNode;return n.reverse(),n},t.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(a){n.push(a.dataIndex)}),n},t.prototype.getValue=function(n){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},t.prototype.setLayout=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,a)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostTree,s=a.data.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,a)},t.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,a=0;a<n.length;++a)if(n[a]===this)return a;return-1}return-1},t.prototype.isAncestorOf=function(n){for(var a=n.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},t.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},t})(),Tree=(function(){function t(n){this.type="tree",this._nodes=[],this.hostModel=n}return t.prototype.eachNode=function(n,a,s){this.root.eachNode(n,a,s)},t.prototype.getNodeByDataIndex=function(n){var a=this.data.getRawIndex(n);return this._nodes[a]},t.prototype.getNodeById=function(n){return this.root.getNodeById(n)},t.prototype.update=function(){for(var n=this.data,a=this._nodes,s=0,l=a.length;s<l;s++)a[s].dataIndex=-1;for(var s=0,l=n.count();s<l;s++)a[n.getRawIndex(s)].dataIndex=s},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(n,a,s){var l=new t(a),u=[],c=1;d(n);function d(en,tn){var on=en.value;c=Math.max(c,isArray$1(on)?on.length:1),u.push(en);var cn=new TreeNode(convertOptionIdName(en.name,""),l);tn?addChild(cn,tn):l.root=cn,l._nodes.push(cn);var dn=en.children;if(dn)for(var Cn=0;Cn<dn.length;Cn++)d(dn[Cn],cn)}l.root.updateDepthAndHeight(0);var Ct=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:c}).dimensions,ar=new SeriesData(Ct,a);return ar.initData(u),s&&s(ar),linkSeriesData({mainData:ar,struct:l,structAttr:"tree"}),l.update(),l},t})();function addChild(t,n){var a=n.children;t.parentNode!==n&&(a.push(t),t.parentNode=n)}function retrieveTargetInfo(t,n,a){if(t&&indexOf(n,t.type)>=0){var s=a.getData().tree.root,l=t.targetNode;if(isString$1(l)&&(l=s.getNodeById(l)),l&&s.contains(l))return{node:l};var u=t.targetNodeId;if(u!=null&&(l=s.getNodeById(u)))return{node:l}}}function getPathToRoot(t){for(var n=[];t;)t=t.parentNode,t&&n.push(t);return n.reverse()}function aboveViewRoot(t,n){var a=getPathToRoot(t);return indexOf(a,n)>=0}function wrapTreePathInfo(t,n){for(var a=[];t;){var s=t.dataIndex;a.push({name:t.name,dataIndex:s,value:n.getRawValue(s)}),t=t.parentNode}return a.reverse(),a}var TreeSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a){var s={name:a.name,children:a.data},l=a.leaves||{},u=new Model(l,this,this.ecModel),c=Tree.createTree(s,this,d);function d(tn){tn.wrapMethod("getItemModel",function(on,cn){var dn=c.getNodeByDataIndex(cn);return dn&&dn.children.length&&dn.isExpand||(on.parentModel=u),on})}var Ct=0;c.eachNode("preorder",function(tn){tn.depth>Ct&&(Ct=tn.depth)});var ar=a.expandAndCollapse,en=ar&&a.initialTreeDepth>=0?a.initialTreeDepth:Ct;return c.root.eachNode("preorder",function(tn){var on=tn.hostTree.data.getRawDataItem(tn.dataIndex);tn.isExpand=on&&on.collapsed!=null?!on.collapsed:tn.depth<=en}),c.data},n.prototype.getOrient=function(){var a=this.get("orient");return a==="horizontal"?a="LR":a==="vertical"&&(a="TB"),a},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.formatTooltip=function(a,s,l){for(var u=this.getData().tree,c=u.root.children[0],d=u.getNodeByDataIndex(a),Ct=d.getValue(),ar=d.name;d&&d!==c;)ar=d.parentNode.name+"."+ar,d=d.parentNode;return createTooltipMarkup("nameValue",{name:ar,value:Ct,noValue:isNaN(Ct)||Ct==null})},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(l,this),s.collapsed=!l.isExpand,s},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n})(SeriesModel);function eachAfter(t,n,a){for(var s=[t],l=[],u;u=s.pop();)if(l.push(u),u.isExpand){var c=u.children;if(c.length)for(var d=0;d<c.length;d++)s.push(c[d])}for(;u=l.pop();)n(u,a)}function eachBefore(t,n){for(var a=[t],s;s=a.pop();)if(n(s),s.isExpand){var l=s.children;if(l.length)for(var u=l.length-1;u>=0;u--)a.push(l[u])}}function treeLayout(t,n){t.eachSeriesByType("tree",function(a){commonLayout(a,n)})}function commonLayout(t,n){var a=getViewRect$4(t,n);t.layoutInfo=a;var s=t.get("layout"),l=0,u=0,c=null;s==="radial"?(l=2*Math.PI,u=Math.min(a.height,a.width)/2,c=separation(function(ox,sx){return(ox.parentNode===sx.parentNode?1:2)/ox.depth})):(l=a.width,u=a.height,c=separation());var d=t.getData().tree.root,Ct=d.children[0];if(Ct){init(d),eachAfter(Ct,firstWalk,c),d.hierNode.modifier=-Ct.hierNode.prelim,eachBefore(Ct,secondWalk);var ar=Ct,en=Ct,tn=Ct;eachBefore(Ct,function(ox){var sx=ox.getLayout().x;sx<ar.getLayout().x&&(ar=ox),sx>en.getLayout().x&&(en=ox),ox.depth>tn.depth&&(tn=ox)});var on=ar===en?1:c(ar,en)/2,cn=on-ar.getLayout().x,dn=0,Cn=0,In=0,ix=0;if(s==="radial")dn=l/(en.getLayout().x+on+cn),Cn=u/(tn.depth-1||1),eachBefore(Ct,function(ox){In=(ox.getLayout().x+cn)*dn,ix=(ox.depth-1)*Cn;var sx=radialCoordinate(In,ix);ox.setLayout({x:sx.x,y:sx.y,rawX:In,rawY:ix},!0)});else{var ax=t.getOrient();ax==="RL"||ax==="LR"?(Cn=u/(en.getLayout().x+on+cn),dn=l/(tn.depth-1||1),eachBefore(Ct,function(ox){ix=(ox.getLayout().x+cn)*Cn,In=ax==="LR"?(ox.depth-1)*dn:l-(ox.depth-1)*dn,ox.setLayout({x:In,y:ix},!0)})):(ax==="TB"||ax==="BT")&&(dn=l/(en.getLayout().x+on+cn),Cn=u/(tn.depth-1||1),eachBefore(Ct,function(ox){In=(ox.getLayout().x+cn)*dn,ix=ax==="TB"?(ox.depth-1)*Cn:u-(ox.depth-1)*Cn,ox.setLayout({x:In,y:ix},!0)}))}}}function treeVisual(t){t.eachSeriesByType("tree",function(n){var a=n.getData(),s=a.tree;s.eachNode(function(l){var u=l.getModel(),c=u.getModel("itemStyle").getItemStyle(),d=a.ensureUniqueItemVisual(l.dataIndex,"style");extend(d,c)})})}function installTreeAction(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"tree",query:n},function(s){var l=n.dataIndex,u=s.getData().tree,c=u.getNodeByDataIndex(l);c.isExpand=!c.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,a,s){a.eachComponent({mainType:"series",subType:"tree",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,s);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}function install$H(t){t.registerChartView(TreeView),t.registerSeriesModel(TreeSeriesModel),t.registerLayout(treeLayout),t.registerVisual(treeVisual),installTreeAction(t)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(t){for(var n=0;n<actionTypes.length;n++)t.registerAction({type:actionTypes[n],update:"updateView"},noop);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,s){s.eachComponent({mainType:"series",subType:"treemap",query:a},l);function l(u,c){var d=["treemapZoomToNode","treemapRootToNode"],Ct=retrieveTargetInfo(a,d,u);if(Ct){var ar=u.getViewRoot();ar&&(a.direction=aboveViewRoot(ar,Ct.node)?"rollUp":"drillDown"),u.resetViewRoot(Ct.node)}}})}function enableAriaDecalForTree(t){var n=t.getData(),a=n.tree,s={};a.eachNode(function(l){for(var u=l;u&&u.depth>1;)u=u.parentNode;var c=getDecalFromPalette(t.ecModel,u.name||u.dataIndex+"",s);l.setVisual("decal",c)})}var TreemapSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventUsingHoverLayer=!0,a}return n.prototype.getInitialData=function(a,s){var l={name:a.name,children:a.data};completeTreeValue$1(l);var u=a.levels||[],c=this.designatedVisualItemStyle={},d=new Model({itemStyle:c},this,s);u=a.levels=setDefault(u,s);var Ct=map$1(u||[],function(tn){return new Model(tn,d,s)},this),ar=Tree.createTree(l,this,en);function en(tn){tn.wrapMethod("getItemModel",function(on,cn){var dn=ar.getNodeByDataIndex(cn),Cn=dn?Ct[dn.depth]:null;return on.parentModel=Cn||d,on})}return ar.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.getRawValue(a),d=u.getName(a);return createTooltipMarkup("nameValue",{name:d,value:c})},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(l,this),s.treePathInfo=s.treeAncestors,s},n.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,a)},n.prototype.mapIdToIndex=function(a){var s=this._idIndexMap;s||(s=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=s.get(a);return l==null&&s.set(a,l=this._idIndexMapCount++),l},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n})(SeriesModel);function completeTreeValue$1(t){var n=0;each$f(t.children,function(s){completeTreeValue$1(s);var l=s.value;isArray$1(l)&&(l=l[0]),n+=l});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}function setDefault(t,n){var a=normalizeToArray(n.get("color")),s=normalizeToArray(n.get(["aria","decal","decals"]));if(a){t=t||[];var l,u;each$f(t,function(d){var Ct=new Model(d),ar=Ct.get("color"),en=Ct.get("decal");(Ct.get(["itemStyle","color"])||ar&&ar!=="none")&&(l=!0),(Ct.get(["itemStyle","decal"])||en&&en!=="none")&&(u=!0)});var c=t[0]||(t[0]={});return l||(c.color=a.slice()),!u&&s&&(c.decal=s.slice()),t}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=(function(){function t(n){this.group=new Group$3,n.add(this.group)}return t.prototype.render=function(n,a,s,l){var u=n.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!u.get("show")||!s)){var d=u.getModel("itemStyle"),Ct=u.getModel("emphasis"),ar=d.getModel("textStyle"),en=Ct.getModel(["itemStyle","textStyle"]),tn={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(s,tn,ar),this._renderContent(n,tn,d,Ct,ar,en,l),positionElement(c,tn.pos,tn.box)}},t.prototype._prepare=function(n,a,s){for(var l=n;l;l=l.parentNode){var u=convertOptionIdName(l.getModel().get("name"),""),c=s.getTextRect(u),d=Math.max(c.width+TEXT_PADDING*2,a.emptyItemWidth);a.totalWidth+=d+ITEM_GAP,a.renderList.push({node:l,text:u,width:d})}},t.prototype._renderContent=function(n,a,s,l,u,c,d){for(var Ct=0,ar=a.emptyItemWidth,en=n.get(["breadcrumb","height"]),tn=getAvailableSize(a.pos,a.box),on=a.totalWidth,cn=a.renderList,dn=l.getModel("itemStyle").getItemStyle(),Cn=cn.length-1;Cn>=0;Cn--){var In=cn[Cn],ix=In.node,ax=In.width,ox=In.text;on>tn.width&&(on-=ax-ar,ax=ar,ox=null);var sx=new Polygon({shape:{points:makeItemPoints(Ct,0,ax,en,Cn===cn.length-1,Cn===0)},style:defaults(s.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(u,{text:ox})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(d,ix)});sx.disableLabelAnimation=!0,sx.getTextContent().ensureState("emphasis").style=createTextStyle$1(c,{text:ox}),sx.ensureState("emphasis").style=dn,toggleHoverEmphasis(sx,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(sx),packEventData(sx,n,ix),Ct+=ax+ITEM_GAP}},t.prototype.remove=function(){this.group.removeAll()},t})();function makeItemPoints(t,n,a,s,l,u){var c=[[l?t:t-ARRAY_LENGTH,n],[t+a,n],[t+a,n+s],[l?t:t-ARRAY_LENGTH,n+s]];return!u&&c.splice(2,0,[t+a+ARRAY_LENGTH,n+s/2]),!l&&c.push([t,n+s/2]),c}function packEventData(t,n,a){getECData(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,n)}}var AnimationWrap=(function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(n,a,s,l,u){return this._elExistsMap[n.id]?!1:(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:a,duration:s,delay:l,easing:u}),!0)},t.prototype.finished=function(n){return this._finishedCallback=n,this},t.prototype.start=function(){for(var n=this,a=this._storage.length,s=function(){a--,a<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},l=0,u=this._storage.length;l<u;l++){var c=this._storage[l];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:s,aborted:s})}return this},t})();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(t){var n=getStateItemStyle(t);return n.stroke=n.fill=n.lineWidth=null,n},inner$d=makeInner(),TreemapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._state="ready",a._storage=createStorage(),a}return n.prototype.render=function(a,s,l,u){var c=s.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(c,a)<0)){this.seriesModel=a,this.api=l,this.ecModel=s;var d=["treemapZoomToNode","treemapRootToNode"],Ct=retrieveTargetInfo(u,d,a),ar=u&&u.type,en=a.layoutInfo,tn=!this._oldTree,on=this._storage,cn=ar==="treemapRootToNode"&&Ct&&on?{rootNodeGroup:on.nodeGroup[Ct.node.getRawIndex()],direction:u.direction}:null,dn=this._giveContainerGroup(en),Cn=a.get("animation"),In=this._doRender(dn,a,cn);Cn&&!tn&&(!ar||ar==="treemapZoomToNode"||ar==="treemapRootToNode")?this._doAnimation(dn,In,a,cn):In.renderFinally(),this._resetController(l),this._renderBreadcrumb(a,l,Ct)}},n.prototype._giveContainerGroup=function(a){var s=this._containerGroup;return s||(s=this._containerGroup=new Group$2,this._initEvents(s),this.group.add(s)),s.x=a.x,s.y=a.y,s},n.prototype._doRender=function(a,s,l){var u=s.getData().tree,c=this._oldTree,d=createStorage(),Ct=createStorage(),ar=this._storage,en=[];function tn(ax,ox,sx,ux){return renderNode(s,Ct,ar,l,d,en,ax,ox,sx,ux)}Cn(u.root?[u.root]:[],c&&c.root?[c.root]:[],a,u===c||!c,0);var on=In(ar);if(this._oldTree=u,this._storage=Ct,this._controllerHost){var cn=this.seriesModel.layoutInfo,dn=u.root.getLayout();dn.width===cn.width&&dn.height===cn.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:d,willDeleteEls:on,renderFinally:ix};function Cn(ax,ox,sx,ux,cx){ux?(ox=ax,each$f(ax,function(fx,dx){!fx.isRemoved()&&gx(dx,dx)})):new DataDiffer(ox,ax,hx,hx).add(gx).update(gx).remove(curry$1(gx,null)).execute();function hx(fx){return fx.getId()}function gx(fx,dx){var mx=fx!=null?ax[fx]:null,vx=dx!=null?ox[dx]:null,bx=tn(mx,vx,sx,cx);bx&&Cn(mx&&mx.viewChildren||[],vx&&vx.viewChildren||[],bx,ux,cx+1)}}function In(ax){var ox=createStorage();return ax&&each$f(ax,function(sx,ux){var cx=ox[ux];each$f(sx,function(hx){hx&&(cx.push(hx),inner$d(hx).willDelete=!0)})}),ox}function ix(){each$f(on,function(ax){each$f(ax,function(ox){ox.parent&&ox.parent.remove(ox)})}),each$f(en,function(ax){ax.invisible=!0,ax.dirty()})}},n.prototype._doAnimation=function(a,s,l,u){var c=l.get("animationDurationUpdate"),d=l.get("animationEasing"),Ct=(isFunction$1(c)?0:c)||0,ar=(isFunction$1(d)?null:d)||"cubicOut",en=createWrap();each$f(s.willDeleteEls,function(tn,on){each$f(tn,function(cn,dn){if(!cn.invisible){var Cn=cn.parent,In,ix=inner$d(Cn);if(u&&u.direction==="drillDown")In=Cn===u.rootNodeGroup?{shape:{x:0,y:0,width:ix.nodeWidth,height:ix.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var ax=0,ox=0;ix.willDelete||(ax=ix.nodeWidth/2,ox=ix.nodeHeight/2),In=on==="nodeGroup"?{x:ax,y:ox,style:{opacity:0}}:{shape:{x:ax,y:ox,width:0,height:0},style:{opacity:0}}}In&&en.add(cn,In,Ct,0,ar)}})}),each$f(this._storage,function(tn,on){each$f(tn,function(cn,dn){var Cn=s.lastsForAnimation[on][dn],In={};Cn&&(cn instanceof Group$3?Cn.oldX!=null&&(In.x=cn.x,In.y=cn.y,cn.x=Cn.oldX,cn.y=Cn.oldY):(Cn.oldShape&&(In.shape=extend({},cn.shape),cn.setShape(Cn.oldShape)),Cn.fadein?(cn.setStyle("opacity",0),In.style={opacity:1}):cn.style.opacity!==1&&(In.style={opacity:1})),en.add(cn,In,Ct,0,ar))})},this),this._state="animating",en.finished(bind$1(function(){this._state="ready",s.renderFinally()},this)).start()},n.prototype._resetController=function(a){var s=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost),s||(s=this._controller=new RoamController(a.getZr()),s.enable(this.seriesModel.get("roam")),l.zoomLimit=this.seriesModel.get("scaleLimit"),l.zoom=this.seriesModel.get("zoom"),s.on("pan",bind$1(this._onPan,this)),s.on("zoom",bind$1(this._onZoom,this)));var u=new BoundingRect(0,0,a.getWidth(),a.getHeight());s.setPointerChecker(function(c,d,Ct){return u.contain(d,Ct)})},n.prototype._clearController=function(){var a=this._controller;this._controllerHost=null,a&&(a.dispose(),a=null)},n.prototype._onPan=function(a){if(this._state!=="animating"&&(Math.abs(a.dx)>DRAG_THRESHOLD||Math.abs(a.dy)>DRAG_THRESHOLD)){var s=this.seriesModel.getData().tree.root;if(!s)return;var l=s.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+a.dx,y:l.y+a.dy,width:l.width,height:l.height}})}},n.prototype._onZoom=function(a){var s=a.originX,l=a.originY,u=a.scale;if(this._state!=="animating"){var c=this.seriesModel.getData().tree.root;if(!c)return;var d=c.getLayout();if(!d)return;var Ct=new BoundingRect(d.x,d.y,d.width,d.height),ar=null,en=this._controllerHost;ar=en.zoomLimit;var tn=en.zoom=en.zoom||1;if(tn*=u,ar){var on=ar.min||0,cn=ar.max||1/0;tn=Math.max(Math.min(cn,tn),on)}var dn=tn/en.zoom;en.zoom=tn;var Cn=this.seriesModel.layoutInfo;s-=Cn.x,l-=Cn.y;var In=create$1();translate(In,In,[-s,-l]),scale$1(In,In,[dn,dn]),translate(In,In,[s,l]),Ct.applyTransform(In),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:Ct.x,y:Ct.y,width:Ct.width,height:Ct.height}})}},n.prototype._initEvents=function(a){var s=this;a.on("click",function(l){if(s._state==="ready"){var u=s.seriesModel.get("nodeClick",!0);if(u){var c=s.findTarget(l.offsetX,l.offsetY);if(c){var d=c.node;if(d.getLayout().isLeafRoot)s._rootToNode(c);else if(u==="zoomToNode")s._zoomToNode(c);else if(u==="link"){var Ct=d.hostTree.data.getItemModel(d.dataIndex),ar=Ct.get("link",!0),en=Ct.get("target",!0)||"blank";ar&&windowOpen(ar,en)}}}}},this)},n.prototype._renderBreadcrumb=function(a,s,l){var u=this;l||(l=a.get("leafDepth",!0)!=null?{node:a.getViewRoot()}:this.findTarget(s.getWidth()/2,s.getHeight()/2),l||(l={node:a.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,s,l.node,function(c){u._state!=="animating"&&(aboveViewRoot(a.getViewRoot(),c)?u._rootToNode({node:c}):u._zoomToNode({node:c}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype.findTarget=function(a,s){var l,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(c){var d=this._storage.background[c.getRawIndex()];if(d){var Ct=d.transformCoordToLocal(a,s),ar=d.shape;if(ar.x<=Ct[0]&&Ct[0]<=ar.x+ar.width&&ar.y<=Ct[1]&&Ct[1]<=ar.y+ar.height)l={node:c,offsetX:Ct[0],offsetY:Ct[1]};else return!1}},this),l},n.type="treemap",n})(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(t,n,a,s,l,u,c,d,Ct,ar){if(!c)return;var en=c.getLayout(),tn=t.getData(),on=c.getModel();if(tn.setItemGraphicEl(c.dataIndex,null),!en||!en.isInView)return;var cn=en.width,dn=en.height,Cn=en.borderWidth,In=en.invisible,ix=c.getRawIndex(),ax=d&&d.getRawIndex(),ox=c.viewChildren,sx=en.upperHeight,ux=ox&&ox.length,cx=on.getModel("itemStyle"),hx=on.getModel(["emphasis","itemStyle"]),gx=on.getModel(["blur","itemStyle"]),fx=on.getModel(["select","itemStyle"]),dx=cx.get("borderRadius")||0,mx=Px("nodeGroup",Group$2);if(!mx)return;if(Ct.add(mx),mx.x=en.x||0,mx.y=en.y||0,mx.markRedraw(),inner$d(mx).nodeWidth=cn,inner$d(mx).nodeHeight=dn,en.isAboveViewRoot)return mx;var vx=Px("background",Rect$1,ar,Z2_BG);vx&&Ax(mx,vx,ux&&en.upperLabelHeight);var bx=on.getModel("emphasis"),xx=bx.get("focus"),_x=bx.get("blurScope"),Ex=bx.get("disabled"),Tx=xx==="ancestor"?c.getAncestorsIndices():xx==="descendant"?c.getDescendantIndices():xx;if(ux)isHighDownDispatcher(mx)&&setAsHighDownDispatcher(mx,!1),vx&&(setAsHighDownDispatcher(vx,!Ex),tn.setItemGraphicEl(c.dataIndex,vx),enableHoverFocus(vx,Tx,_x));else{var Cx=Px("content",Rect$1,ar,Z2_CONTENT);Cx&&Nx(mx,Cx),vx.disableMorphing=!0,vx&&isHighDownDispatcher(vx)&&setAsHighDownDispatcher(vx,!1),setAsHighDownDispatcher(mx,!Ex),tn.setItemGraphicEl(c.dataIndex,mx);var Mx=on.getShallow("cursor");Mx&&Cx.attr("cursor",Mx),enableHoverFocus(mx,Tx,_x)}return mx;function Ax(zx,qx,jx){var Hx=getECData(qx);if(Hx.dataIndex=c.dataIndex,Hx.seriesIndex=t.seriesIndex,qx.setShape({x:0,y:0,width:cn,height:dn,r:dx}),In)Ux(qx);else{qx.invisible=!1;var Vx=c.getVisual("style"),nE=Vx.stroke,Wx=getItemStyleNormal(cx);Wx.fill=nE;var tE=getStateItemStyle(hx);tE.fill=hx.get("borderColor");var lE=getStateItemStyle(gx);lE.fill=gx.get("borderColor");var iE=getStateItemStyle(fx);if(iE.fill=fx.get("borderColor"),jx){var Xx=cn-2*Cn;Rx(qx,nE,Vx.opacity,{x:Cn,y:0,width:Xx,height:sx})}else qx.removeTextContent();qx.setStyle(Wx),qx.ensureState("emphasis").style=tE,qx.ensureState("blur").style=lE,qx.ensureState("select").style=iE,setDefaultStateProxy(qx)}zx.add(qx)}function Nx(zx,qx){var jx=getECData(qx);jx.dataIndex=c.dataIndex,jx.seriesIndex=t.seriesIndex;var Hx=Math.max(cn-2*Cn,0),Vx=Math.max(dn-2*Cn,0);if(qx.culling=!0,qx.setShape({x:Cn,y:Cn,width:Hx,height:Vx,r:dx}),In)Ux(qx);else{qx.invisible=!1;var nE=c.getVisual("style"),Wx=nE.fill,tE=getItemStyleNormal(cx);tE.fill=Wx,tE.decal=nE.decal;var lE=getStateItemStyle(hx),iE=getStateItemStyle(gx),Xx=getStateItemStyle(fx);Rx(qx,Wx,nE.opacity,null),qx.setStyle(tE),qx.ensureState("emphasis").style=lE,qx.ensureState("blur").style=iE,qx.ensureState("select").style=Xx,setDefaultStateProxy(qx)}zx.add(qx)}function Ux(zx){!zx.invisible&&u.push(zx)}function Rx(zx,qx,jx,Hx){var Vx=on.getModel(Hx?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),nE=convertOptionIdName(on.get("name"),null),Wx=Vx.getShallow("show");setLabelStyle(zx,getLabelStatesModels(on,Hx?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Wx?nE:null,inheritColor:qx,defaultOpacity:jx,labelFetcher:t,labelDataIndex:c.dataIndex});var tE=zx.getTextContent();if(tE){var lE=tE.style,iE=normalizeCssArray$1(lE.padding||0);Hx&&(zx.setTextConfig({layoutRect:Hx}),tE.disableLabelLayout=!0),tE.beforeUpdate=function(){var CE=Math.max((Hx?Hx.width:zx.shape.width)-iE[1]-iE[3],0),RE=Math.max((Hx?Hx.height:zx.shape.height)-iE[0]-iE[2],0);(lE.width!==CE||lE.height!==RE)&&tE.setStyle({width:CE,height:RE})},lE.truncateMinChar=2,lE.lineOverflow="truncate",Ox(lE,Hx,en);var Xx=tE.getState("emphasis");Ox(Xx?Xx.style:null,Hx,en)}}function Ox(zx,qx,jx){var Hx=zx?zx.text:null;if(!qx&&jx.isLeafRoot&&Hx!=null){var Vx=t.get("drillDownIcon",!0);zx.text=Vx?Vx+" "+Hx:Hx}}function Px(zx,qx,jx,Hx){var Vx=ax!=null&&a[zx][ax],nE=l[zx];return Vx?(a[zx][ax]=null,$x(nE,Vx)):In||(Vx=new qx,Vx instanceof Displayable&&(Vx.z2=calculateZ2(jx,Hx)),Lx(nE,Vx)),n[zx][ix]=Vx}function $x(zx,qx){var jx=zx[ix]={};qx instanceof Group$2?(jx.oldX=qx.x,jx.oldY=qx.y):jx.oldShape=extend({},qx.shape)}function Lx(zx,qx){var jx=zx[ix]={},Hx=c.parentNode,Vx=qx instanceof Group$3;if(Hx&&(!s||s.direction==="drillDown")){var nE=0,Wx=0,tE=l.background[Hx.getRawIndex()];!s&&tE&&tE.oldShape&&(nE=tE.oldShape.width,Wx=tE.oldShape.height),Vx?(jx.oldX=0,jx.oldY=Wx):jx.oldShape={x:nE,y:Wx,width:0,height:0}}jx.fadein=!Vx}}function calculateZ2(t,n){return t*Z2_BASE+n}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=(function(){function t(n){var a=n.mappingMethod,s=n.type,l=this.option=clone$4(n);this.type=s,this.mappingMethod=a,this._normalizeData=normalizers[a];var u=t.visualHandlers[s];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[a],a==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):a==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(a!=="linear"||l.dataExtent),normalizeVisualRange(l))}return t.prototype.mapValueToVisual=function(n){var a=this._normalizeData(n);return this._normalizedToVisual(a,n)},t.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},t.listVisualTypes=function(){return keys(t.visualHandlers)},t.isValidType=function(n){return t.visualHandlers.hasOwnProperty(n)},t.eachVisual=function(n,a,s){isObject$3(n)?each$f(n,a,s):a.call(s,n)},t.mapVisual=function(n,a,s){var l,u=isArray$1(n)?[]:isObject$3(n)?{}:(l=!0,null);return t.eachVisual(n,function(c,d){var Ct=a.call(s,c,d);l?u=Ct:u[d]=Ct}),u},t.retrieveVisuals=function(n){var a={},s;return n&&each$c(t.visualHandlers,function(l,u){n.hasOwnProperty(u)&&(a[u]=n[u],s=!0)}),s?a:null},t.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var a=[];each$c(n,function(s,l){a.push(l)}),n=a}else return[];return n.sort(function(s,l){return l==="color"&&s!=="color"&&s.indexOf("color")===0?1:-1}),n},t.dependsOn=function(n,a){return a==="color"?!!(n&&n.indexOf(a)===0):n===a},t.findPieceIndex=function(n,a,s){for(var l,u=1/0,c=0,d=a.length;c<d;c++){var Ct=a[c].value;if(Ct!=null){if(Ct===n||isString$1(Ct)&&Ct===n+"")return c;s&&on(Ct,c)}}for(var c=0,d=a.length;c<d;c++){var ar=a[c],en=ar.interval,tn=ar.close;if(en){if(en[0]===-1/0){if(littleThan(tn[1],n,en[1]))return c}else if(en[1]===1/0){if(littleThan(tn[0],en[0],n))return c}else if(littleThan(tn[0],en[0],n)&&littleThan(tn[1],n,en[1]))return c;s&&on(en[0],c),s&&on(en[1],c)}}if(s)return n===1/0?a.length-1:n===-1/0?0:l;function on(cn,dn){var Cn=Math.abs(cn-n);Cn<u&&(u=Cn,l=dn)}},t.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(a,s){return!s&&(a=this._normalizeData(a)),doMapCategory.call(this,a)}:function(a,s,l){var u=!!l;return!s&&(a=this._normalizeData(a)),l=fastLerp(a,n.parsedVisual,l),u?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),s},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,a)}),colorSaturation:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,a)}),colorLightness:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,null,a)}),colorAlpha:makePartialColorVisualHandler(function(n,a){return modifyAlpha(n,a)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,a,s){var l=this.mapValueToVisual(n);s("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=doMapToArray.call(this,n)),s},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},t})();function preprocessForPiecewise(t){var n=t.pieceList;t.hasSpecialVisual=!1,each$f(n,function(a,s){a.originIndex=s,a.visual!=null&&(t.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(t){var n=t.categories,a=t.categoryMap={},s=t.visual;if(each$c(n,function(c,d){a[c]=d}),!isArray$1(s)){var l=[];isObject$3(s)?each$c(s,function(c,d){var Ct=a[d];l[Ct??CATEGORY_DEFAULT_VISUAL_INDEX]=c}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=s,s=setVisualToOption(t,l)}for(var u=n.length-1;u>=0;u--)s[u]==null&&(delete a[n[u]],n.pop())}function normalizeVisualRange(t,n){var a=t.visual,s=[];isObject$3(a)?each$c(a,function(u){s.push(u)}):a!=null&&s.push(a);var l={color:1,symbol:1};!n&&s.length===1&&!l.hasOwnProperty(t.type)&&(s[1]=s[0]),setVisualToOption(t,s)}function makePartialColorVisualHandler(t){return{applyVisual:function(n,a,s){var l=this.mapValueToVisual(n);s("color",t(a("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(t){var n=this.option.visual;return n[Math.round(linearMap$2(t,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(t){return function(n,a,s){s(t,this.mapValueToVisual(n))}}function doMapCategory(t){var n=this.option.visual;return n[this.option.loop&&t!==CATEGORY_DEFAULT_VISUAL_INDEX?t%n.length:t]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(t){return{linear:function(n){return linearMap$2(n,t,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=linearMap$2(n,t,this.option.visual,!0)),s},fixed:doMapFixed}}function getSpecifiedVisual(t){var n=this.option,a=n.pieceList;if(n.hasSpecialVisual){var s=VisualMapping.findPieceIndex(t,a),l=a[s];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(t,n){return t.visual=n,t.type==="color"&&(t.parsedVisual=map$1(n,function(a){var s=parse(a);return s||[0,0,0,1]})),n}var normalizers={linear:function(t){return linearMap$2(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var n=this.option.pieceList,a=VisualMapping.findPieceIndex(t,n,!0);if(a!=null)return linearMap$2(a,[0,n.length-1],[0,1],!0)},category:function(t){var n=this.option.categories?this.option.categoryMap[t]:t;return n??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(t,n,a){return t?n<=a:n<a}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(t){var n=t.getData().tree,a=n.root;a.isRemoved()||travelTree(a,{},t.getViewRoot().getAncestors(),t)}};function travelTree(t,n,a,s){var l=t.getModel(),u=t.getLayout(),c=t.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var d=l.getModel(ITEM_STYLE_NORMAL),Ct=buildVisuals(d,n,s),ar=c.ensureUniqueItemVisual(t.dataIndex,"style"),en=d.get("borderColor"),tn=d.get("borderColorSaturation"),on;tn!=null&&(on=calculateColor(Ct),en=calculateBorderColor(tn,on)),ar.stroke=en;var cn=t.viewChildren;if(!cn||!cn.length)on=calculateColor(Ct),ar.fill=on;else{var dn=buildVisualMapping(t,l,u,d,Ct,cn);each$f(cn,function(Cn,In){if(Cn.depth>=a.length||Cn===a[Cn.depth]){var ix=mapVisual$1(l,Ct,Cn,In,dn,s);travelTree(Cn,ix,a,s)}})}}}function buildVisuals(t,n,a){var s=extend({},n),l=a.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){l[u]=n[u];var c=t.get(u);l[u]=null,c!=null&&(s[u]=c)}),s}function calculateColor(t){var n=getValueVisualDefine(t,"color");if(n){var a=getValueVisualDefine(t,"colorAlpha"),s=getValueVisualDefine(t,"colorSaturation");return s&&(n=modifyHSL(n,null,null,s)),a&&(n=modifyAlpha(n,a)),n}}function calculateBorderColor(t,n){return n!=null?modifyHSL(n,null,null,t):null}function getValueVisualDefine(t,n){var a=t[n];if(a!=null&&a!=="none")return a}function buildVisualMapping(t,n,a,s,l,u){if(!(!u||!u.length)){var c=getRangeVisual(n,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(n,"colorAlpha")||getRangeVisual(n,"colorSaturation"));if(c){var d=n.get("visualMin"),Ct=n.get("visualMax"),ar=a.dataExtent.slice();d!=null&&d<ar[0]&&(ar[0]=d),Ct!=null&&Ct>ar[1]&&(ar[1]=Ct);var en=n.get("colorMappingBy"),tn={type:c.name,dataExtent:ar,visual:c.range};tn.type==="color"&&(en==="index"||en==="id")?(tn.mappingMethod="category",tn.loop=!0):tn.mappingMethod="linear";var on=new VisualMapping(tn);return inner$c(on).drColorMappingBy=en,on}}}function getRangeVisual(t,n){var a=t.get(n);return isArray$1(a)&&a.length?{name:n,range:a}:null}function mapVisual$1(t,n,a,s,l,u){var c=extend({},n);if(l){var d=l.type,Ct=d==="color"&&inner$c(l).drColorMappingBy,ar=Ct==="index"?s:Ct==="id"?u.mapIdToIndex(a.getId()):a.getValue(t.get("visualDimension"));c[d]=l.mapValueToVisual(ar)}return c}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(t,n,a,s){var l=a.getWidth(),u=a.getHeight(),c=t.option,d=getLayoutRect(t.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),Ct=c.size||[],ar=parsePercent(retrieveValue(d.width,Ct[0]),l),en=parsePercent(retrieveValue(d.height,Ct[1]),u),tn=s&&s.type,on=["treemapZoomToNode","treemapRootToNode"],cn=retrieveTargetInfo(s,on,t),dn=tn==="treemapRender"||tn==="treemapMove"?s.rootRect:null,Cn=t.getViewRoot(),In=getPathToRoot(Cn);if(tn!=="treemapMove"){var ix=tn==="treemapZoomToNode"?estimateRootSize(t,cn,Cn,ar,en):dn?[dn.width,dn.height]:[ar,en],ax=c.sort;ax&&ax!=="asc"&&ax!=="desc"&&(ax="desc");var ox={squareRatio:c.squareRatio,sort:ax,leafDepth:c.leafDepth};Cn.hostTree.clearLayouts();var sx={x:0,y:0,width:ix[0],height:ix[1],area:ix[0]*ix[1]};Cn.setLayout(sx),squarify(Cn,ox,!1,0),sx=Cn.getLayout(),each$b(In,function(cx,hx){var gx=(In[hx+1]||Cn).getValue();cx.setLayout(extend({dataExtent:[gx,gx],borderWidth:0,upperHeight:0},sx))})}var ux=t.getData().tree.root;ux.setLayout(calculateRootPosition(d,dn,cn),!0),t.setLayoutInfo(d),prunning(ux,new BoundingRect(-d.x,-d.y,l,u),In,Cn,0)}};function squarify(t,n,a,s){var l,u;if(!t.isRemoved()){var c=t.getLayout();l=c.width,u=c.height;var d=t.getModel(),Ct=d.get(PATH_BORDER_WIDTH),ar=d.get(PATH_GAP_WIDTH)/2,en=getUpperLabelHeight(d),tn=Math.max(Ct,en),on=Ct-ar,cn=tn-ar;t.setLayout({borderWidth:Ct,upperHeight:tn,upperLabelHeight:en},!0),l=mathMax$3(l-2*on,0),u=mathMax$3(u-on-cn,0);var dn=l*u,Cn=initChildren$1(t,d,dn,n,a,s);if(Cn.length){var In={x:on,y:cn,width:l,height:u},ix=mathMin$3(l,u),ax=1/0,ox=[];ox.area=0;for(var sx=0,ux=Cn.length;sx<ux;){var cx=Cn[sx];ox.push(cx),ox.area+=cx.getLayout().area;var hx=worst(ox,ix,n.squareRatio);hx<=ax?(sx++,ax=hx):(ox.area-=ox.pop().getLayout().area,position(ox,ix,In,ar,!1),ix=mathMin$3(In.width,In.height),ox.length=ox.area=0,ax=1/0)}if(ox.length&&position(ox,ix,In,ar,!0),!a){var gx=d.get("childrenVisibleMin");gx!=null&&dn<gx&&(a=!0)}for(var sx=0,ux=Cn.length;sx<ux;sx++)squarify(Cn[sx],n,a,s+1)}}}function initChildren$1(t,n,a,s,l,u){var c=t.children||[],d=s.sort;d!=="asc"&&d!=="desc"&&(d=null);var Ct=s.leafDepth!=null&&s.leafDepth<=u;if(l&&!Ct)return t.viewChildren=[];c=filter(c,function(cn){return!cn.isRemoved()}),sort$1(c,d);var ar=statistic(n,c,d);if(ar.sum===0)return t.viewChildren=[];if(ar.sum=filterByThreshold(n,a,ar.sum,d,c),ar.sum===0)return t.viewChildren=[];for(var en=0,tn=c.length;en<tn;en++){var on=c[en].getValue()/ar.sum*a;c[en].setLayout({area:on})}return Ct&&(c.length&&t.setLayout({isLeafRoot:!0},!0),c.length=0),t.viewChildren=c,t.setLayout({dataExtent:ar.dataExtent},!0),c}function filterByThreshold(t,n,a,s,l){if(!s)return a;for(var u=t.get("visibleMin"),c=l.length,d=c,Ct=c-1;Ct>=0;Ct--){var ar=l[s==="asc"?c-Ct-1:Ct].getValue();ar/a*n<u&&(d=Ct,a-=ar)}return s==="asc"?l.splice(0,c-d):l.splice(d,c-d),a}function sort$1(t,n){return n&&t.sort(function(a,s){var l=n==="asc"?a.getValue()-s.getValue():s.getValue()-a.getValue();return l===0?n==="asc"?a.dataIndex-s.dataIndex:s.dataIndex-a.dataIndex:l}),t}function statistic(t,n,a){for(var s=0,l=0,u=n.length;l<u;l++)s+=n[l].getValue();var c=t.get("visualDimension"),d;return!n||!n.length?d=[NaN,NaN]:c==="value"&&a?(d=[n[n.length-1].getValue(),n[0].getValue()],a==="asc"&&d.reverse()):(d=[1/0,-1/0],each$b(n,function(Ct){var ar=Ct.getValue(c);ar<d[0]&&(d[0]=ar),ar>d[1]&&(d[1]=ar)})),{sum:s,dataExtent:d}}function worst(t,n,a){for(var s=0,l=1/0,u=0,c=void 0,d=t.length;u<d;u++)c=t[u].getLayout().area,c&&(c<l&&(l=c),c>s&&(s=c));var Ct=t.area*t.area,ar=n*n*a;return Ct?mathMax$3(ar*s/Ct,Ct/(ar*l)):1/0}function position(t,n,a,s,l){var u=n===a.width?0:1,c=1-u,d=["x","y"],Ct=["width","height"],ar=a[d[u]],en=n?t.area/n:0;(l||en>a[Ct[c]])&&(en=a[Ct[c]]);for(var tn=0,on=t.length;tn<on;tn++){var cn=t[tn],dn={},Cn=en?cn.getLayout().area/en:0,In=dn[Ct[c]]=mathMax$3(en-2*s,0),ix=a[d[u]]+a[Ct[u]]-ar,ax=tn===on-1||ix<Cn?ix:Cn,ox=dn[Ct[u]]=mathMax$3(ax-2*s,0);dn[d[c]]=a[d[c]]+mathMin$3(s,In/2),dn[d[u]]=ar+mathMin$3(s,ox/2),ar+=ax,cn.setLayout(dn,!0)}a[d[c]]+=en,a[Ct[c]]-=en}function estimateRootSize(t,n,a,s,l){var u=(n||{}).node,c=[s,l];if(!u||u===a)return c;for(var d,Ct=s*l,ar=Ct*t.option.zoomToNodeRatio;d=u.parentNode;){for(var en=0,tn=d.children,on=0,cn=tn.length;on<cn;on++)en+=tn[on].getValue();var dn=u.getValue();if(dn===0)return c;ar*=en/dn;var Cn=d.getModel(),In=Cn.get(PATH_BORDER_WIDTH),ix=Math.max(In,getUpperLabelHeight(Cn));ar+=4*In*In+(3*In+ix)*Math.pow(ar,.5),ar>MAX_SAFE_INTEGER&&(ar=MAX_SAFE_INTEGER),u=d}ar<Ct&&(ar=Ct);var ax=Math.pow(ar/Ct,.5);return[s*ax,l*ax]}function calculateRootPosition(t,n,a){if(n)return{x:n.x,y:n.y};var s={x:0,y:0};if(!a)return s;var l=a.node,u=l.getLayout();if(!u)return s;for(var c=[u.width/2,u.height/2],d=l;d;){var Ct=d.getLayout();c[0]+=Ct.x,c[1]+=Ct.y,d=d.parentNode}return{x:t.width/2-c[0],y:t.height/2-c[1]}}function prunning(t,n,a,s,l){var u=t.getLayout(),c=a[l],d=c&&c===t;if(!(c&&!d||l===a.length&&t!==s)){t.setLayout({isInView:!0,invisible:!d&&!n.intersect(u),isAboveViewRoot:d},!0);var Ct=new BoundingRect(n.x-u.x,n.y-u.y,n.width,n.height);each$b(t.viewChildren||[],function(ar){prunning(ar,Ct,a,s,l+1)})}}function getUpperLabelHeight(t){return t.get(PATH_UPPER_LABEL_SHOW)?t.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(t){t.registerSeriesModel(TreemapSeriesModel),t.registerChartView(TreemapView),t.registerVisual(treemapVisual),t.registerLayout(treemapLayout),installTreemapAction(t)}function categoryFilter(t){var n=t.findComponents({mainType:"legend"});!n||!n.length||t.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),l=a.getGraph(),u=l.data,c=s.mapArray(s.getName);u.filterSelf(function(d){var Ct=u.getItemModel(d),ar=Ct.getShallow("category");if(ar!=null){isNumber(ar)&&(ar=c[ar]);for(var en=0;en<n.length;en++)if(!n[en].isSelected(ar))return!1}return!0})})}function categoryVisual(t){var n={};t.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),l=a.getData(),u={};s.each(function(c){var d=s.getName(c);u["ec-"+d]=c;var Ct=s.getItemModel(c),ar=Ct.getModel("itemStyle").getItemStyle();ar.fill||(ar.fill=a.getColorFromPalette(d,n)),s.setItemVisual(c,"style",ar);for(var en=["symbol","symbolSize","symbolKeepAspect"],tn=0;tn<en.length;tn++){var on=Ct.getShallow(en[tn],!0);on!=null&&s.setItemVisual(c,en[tn],on)}}),s.count()&&l.each(function(c){var d=l.getItemModel(c),Ct=d.getShallow("category");if(Ct!=null){isString$1(Ct)&&(Ct=u["ec-"+Ct]);var ar=s.getItemVisual(Ct,"style"),en=l.ensureUniqueItemVisual(c,"style");extend(en,ar);for(var tn=["symbol","symbolSize","symbolKeepAspect"],on=0;on<tn.length;on++)l.setItemVisual(c,tn[on],s.getItemVisual(Ct,tn[on]))}})})}function normalize$1(t){return t instanceof Array||(t=[t,t]),t}function graphEdgeVisual(t){t.eachSeriesByType("graph",function(n){var a=n.getGraph(),s=n.getEdgeData(),l=normalize$1(n.get("edgeSymbol")),u=normalize$1(n.get("edgeSymbolSize"));s.setVisual("fromSymbol",l&&l[0]),s.setVisual("toSymbol",l&&l[1]),s.setVisual("fromSymbolSize",u&&u[0]),s.setVisual("toSymbolSize",u&&u[1]),s.setVisual("style",n.getModel("lineStyle").getLineStyle()),s.each(function(c){var d=s.getItemModel(c),Ct=a.getEdgeByIndex(c),ar=normalize$1(d.getShallow("symbol",!0)),en=normalize$1(d.getShallow("symbolSize",!0)),tn=d.getModel("lineStyle").getLineStyle(),on=s.ensureUniqueItemVisual(c,"style");switch(extend(on,tn),on.stroke){case"source":{var cn=Ct.node1.getVisual("style");on.stroke=cn&&cn.fill;break}case"target":{var cn=Ct.node2.getVisual("style");on.stroke=cn&&cn.fill;break}}ar[0]&&Ct.setVisual("fromSymbol",ar[0]),ar[1]&&Ct.setVisual("toSymbol",ar[1]),en[0]&&Ct.setVisual("fromSymbolSize",en[0]),en[1]&&Ct.setVisual("toSymbolSize",en[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(t){return t.get("autoCurveness")||null},createCurveness=function(t,n){var a=getAutoCurvenessParams(t),s=20,l=[];if(isNumber(a))s=a;else if(isArray$1(a)){t.__curvenessList=a;return}n>s&&(s=n);var u=s%2?s+2:s+3;l=[];for(var c=0;c<u;c++)l.push((c%2?c+1:c)/10*(c%2?-1:1));t.__curvenessList=l},getKeyOfEdges=function(t,n,a){var s=[t.id,t.dataIndex].join("."),l=[n.id,n.dataIndex].join(".");return[a.uid,s,l].join(KEY_DELIMITER)},getOppositeKey=function(t){var n=t.split(KEY_DELIMITER);return[n[0],n[2],n[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(t,n){var a=getKeyOfEdges(t.node1,t.node2,n);return n.__edgeMap[a]},getTotalLengthBetweenNodes=function(t,n){var a=getEdgeMapLengthWithKey(getKeyOfEdges(t.node1,t.node2,n),n),s=getEdgeMapLengthWithKey(getKeyOfEdges(t.node2,t.node1,n),n);return a+s},getEdgeMapLengthWithKey=function(t,n){var a=n.__edgeMap;return a[t]?a[t].length:0};function initCurvenessList(t){getAutoCurvenessParams(t)&&(t.__curvenessList=[],t.__edgeMap={},createCurveness(t))}function createEdgeMapForCurveness(t,n,a,s){if(getAutoCurvenessParams(a)){var l=getKeyOfEdges(t,n,a),u=a.__edgeMap,c=u[getOppositeKey(l)];u[l]&&!c?u[l].isForward=!0:c&&u[l]&&(c.isForward=!0,u[l].isForward=!1),u[l]=u[l]||[],u[l].push(s)}}function getCurvenessForEdge(t,n,a,s){var l=getAutoCurvenessParams(n),u=isArray$1(l);if(!l)return null;var c=getEdgeFromMap(t,n);if(!c)return null;for(var d=-1,Ct=0;Ct<c.length;Ct++)if(c[Ct]===a){d=Ct;break}var ar=getTotalLengthBetweenNodes(t,n);createCurveness(n,ar),t.lineStyle=t.lineStyle||{};var en=getKeyOfEdges(t.node1,t.node2,n),tn=n.__curvenessList,on=u||ar%2?0:1;if(c.isForward)return tn[on+d];var cn=getOppositeKey(en),dn=getEdgeMapLengthWithKey(cn,n),Cn=tn[d+dn+on];return s?u?l&&l[0]===0?(dn+on)%2?Cn:-Cn:((dn%2?0:1)+on)%2?Cn:-Cn:(dn+on)%2?Cn:-Cn:tn[d+dn+on]}function simpleLayout(t){var n=t.coordinateSystem;if(!(n&&n.type!=="view")){var a=t.getGraph();a.eachNode(function(s){var l=s.getModel();s.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(a,t)}}function simpleLayoutEdge(t,n){t.eachEdge(function(a,s){var l=retrieve3(a.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(a,n,s,!0),0),u=clone$3(a.node1.getLayout()),c=clone$3(a.node2.getLayout()),d=[u,c];+l&&d.push([(u[0]+c[0])/2-(u[1]-c[1])*l,(u[1]+c[1])/2-(c[0]-u[0])*l]),a.setLayout(d)})}function graphSimpleLayout(t,n){t.eachSeriesByType("graph",function(a){var s=a.get("layout"),l=a.coordinateSystem;if(l&&l.type!=="view"){var u=a.getData(),c=[];each$f(l.dimensions,function(on){c=c.concat(u.mapDimensionsAll(on))});for(var d=0;d<u.count();d++){for(var Ct=[],ar=!1,en=0;en<c.length;en++){var tn=u.get(c[en],d);isNaN(tn)||(ar=!0),Ct.push(tn)}ar?u.setItemLayout(d,l.dataToPoint(Ct)):u.setItemLayout(d,[NaN,NaN])}simpleLayoutEdge(u.graph,a)}else(!s||s==="none")&&simpleLayout(a)})}function getNodeGlobalScale(t){var n=t.coordinateSystem;if(n.type!=="view")return 1;var a=t.option.nodeScaleRatio,s=n.scaleX,l=n.getZoom(),u=(l-1)*a+1;return u/s}function getSymbolSize(t){var n=t.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(t,n,a,s){var l=t.coordinateSystem;if(!(l&&l.type!=="view")){var u=l.getBoundingRect(),c=t.getData(),d=c.graph,Ct=u.width/2+u.x,ar=u.height/2+u.y,en=Math.min(u.width,u.height)/2,tn=c.count();if(c.setLayout({cx:Ct,cy:ar}),!!tn){if(a){var on=l.pointToData(s),cn=on[0],dn=on[1],Cn=[cn-Ct,dn-ar];normalize$3(Cn,Cn),scale$2(Cn,Cn,en),a.setLayout([Ct+Cn[0],ar+Cn[1]],!0);var In=t.get(["circular","rotateLabel"]);rotateNodeLabel(a,In,Ct,ar)}_layoutNodesBasedOn[n](t,d,c,en,Ct,ar,tn),d.eachEdge(function(ix,ax){var ox=retrieve3(ix.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(ix,t,ax),0),sx=clone$3(ix.node1.getLayout()),ux=clone$3(ix.node2.getLayout()),cx,hx=(sx[0]+ux[0])/2,gx=(sx[1]+ux[1])/2;+ox&&(ox*=3,cx=[Ct*ox+hx*(1-ox),ar*ox+gx*(1-ox)]),ix.setLayout([sx,ux,cx])})}}}var _layoutNodesBasedOn={value:function(t,n,a,s,l,u,c){var d=0,Ct=a.getSum("value"),ar=Math.PI*2/(Ct||c);n.eachNode(function(en){var tn=en.getValue("value"),on=ar*(Ct?tn:1)/2;d+=on,en.setLayout([s*Math.cos(d)+l,s*Math.sin(d)+u]),d+=on})},symbolSize:function(t,n,a,s,l,u,c){var d=0;_symbolRadiansHalf.length=c;var Ct=getNodeGlobalScale(t);n.eachNode(function(tn){var on=getSymbolSize(tn);isNaN(on)&&(on=2),on<0&&(on=0),on*=Ct;var cn=Math.asin(on/2/s);isNaN(cn)&&(cn=PI$2/2),_symbolRadiansHalf[tn.dataIndex]=cn,d+=cn*2});var ar=(2*PI$2-d)/c/2,en=0;n.eachNode(function(tn){var on=ar+_symbolRadiansHalf[tn.dataIndex];en+=on,(!tn.getLayout()||!tn.getLayout().fixed)&&tn.setLayout([s*Math.cos(en)+l,s*Math.sin(en)+u]),en+=on})}};function rotateNodeLabel(t,n,a,s){var l=t.getGraphicEl();if(l){var u=t.getModel(),c=u.get(["label","rotate"])||0,d=l.getSymbolPath();if(n){var Ct=t.getLayout(),ar=Math.atan2(Ct[1]-s,Ct[0]-a);ar<0&&(ar=Math.PI*2+ar);var en=Ct[0]<a;en&&(ar=ar-Math.PI);var tn=en?"left":"right";d.setTextConfig({rotation:-ar,position:tn,origin:"center"});var on=d.ensureState("emphasis");extend(on.textConfig||(on.textConfig={}),{position:tn})}else d.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(t){t.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&circularLayout(n,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(t,n,a){for(var s=t,l=n,u=a.rect,c=u.width,d=u.height,Ct=[u.x+c/2,u.y+d/2],ar=a.gravity==null?.1:a.gravity,en=0;en<s.length;en++){var tn=s[en];tn.p||(tn.p=create$2(c*(Math.random()-.5)+Ct[0],d*(Math.random()-.5)+Ct[1])),tn.pp=clone$3(tn.p),tn.edges=null}var on=a.friction==null?.6:a.friction,cn=on,dn,Cn;return{warmUp:function(){cn=on*.8},setFixed:function(In){s[In].fixed=!0},setUnfixed:function(In){s[In].fixed=!1},beforeStep:function(In){dn=In},afterStep:function(In){Cn=In},step:function(In){dn&&dn(s,l);for(var ix=[],ax=s.length,ox=0;ox<l.length;ox++){var sx=l[ox];if(!sx.ignoreForceLayout){var ux=sx.n1,cx=sx.n2;sub(ix,cx.p,ux.p);var hx=len(ix)-sx.d,gx=cx.w/(ux.w+cx.w);isNaN(gx)&&(gx=0),normalize$3(ix,ix),!ux.fixed&&scaleAndAdd(ux.p,ux.p,ix,gx*hx*cn),!cx.fixed&&scaleAndAdd(cx.p,cx.p,ix,-(1-gx)*hx*cn)}}for(var ox=0;ox<ax;ox++){var fx=s[ox];fx.fixed||(sub(ix,Ct,fx.p),scaleAndAdd(fx.p,fx.p,ix,ar*cn))}for(var ox=0;ox<ax;ox++)for(var ux=s[ox],dx=ox+1;dx<ax;dx++){var cx=s[dx];sub(ix,cx.p,ux.p);var hx=len(ix);hx===0&&(set$1(ix,Math.random()-.5,Math.random()-.5),hx=1);var mx=(ux.rep+cx.rep)/hx/hx;!ux.fixed&&scaleAndAdd(ux.pp,ux.pp,ix,mx),!cx.fixed&&scaleAndAdd(cx.pp,cx.pp,ix,-mx)}for(var vx=[],ox=0;ox<ax;ox++){var fx=s[ox];fx.fixed||(sub(vx,fx.p,fx.pp),scaleAndAdd(fx.p,fx.p,vx,cn),copy$1(fx.pp,fx.p))}cn=cn*.992;var bx=cn<.01;Cn&&Cn(s,l,bx),In&&In(bx)}}}function graphForceLayout(t){t.eachSeriesByType("graph",function(n){var a=n.coordinateSystem;if(!(a&&a.type!=="view"))if(n.get("layout")==="force"){var s=n.preservedPoints||{},l=n.getGraph(),u=l.data,c=l.edgeData,d=n.getModel("force"),Ct=d.get("initLayout");n.preservedPoints?u.each(function(ox){var sx=u.getId(ox);u.setItemLayout(ox,s[sx]||[NaN,NaN])}):!Ct||Ct==="none"?simpleLayout(n):Ct==="circular"&&circularLayout(n,"value");var ar=u.getDataExtent("value"),en=c.getDataExtent("value"),tn=d.get("repulsion"),on=d.get("edgeLength"),cn=isArray$1(tn)?tn:[tn,tn],dn=isArray$1(on)?on:[on,on];dn=[dn[1],dn[0]];var Cn=u.mapArray("value",function(ox,sx){var ux=u.getItemLayout(sx),cx=linearMap$2(ox,ar,cn);return isNaN(cx)&&(cx=(cn[0]+cn[1])/2),{w:cx,rep:cx,fixed:u.getItemModel(sx).get("fixed"),p:!ux||isNaN(ux[0])||isNaN(ux[1])?null:ux}}),In=c.mapArray("value",function(ox,sx){var ux=l.getEdgeByIndex(sx),cx=linearMap$2(ox,en,dn);isNaN(cx)&&(cx=(dn[0]+dn[1])/2);var hx=ux.getModel(),gx=retrieve3(ux.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(ux,n,sx,!0),0);return{n1:Cn[ux.node1.dataIndex],n2:Cn[ux.node2.dataIndex],d:cx,curveness:gx,ignoreForceLayout:hx.get("ignoreForceLayout")}}),ix=a.getBoundingRect(),ax=forceLayout(Cn,In,{rect:ix,gravity:d.get("gravity"),friction:d.get("friction")});ax.beforeStep(function(ox,sx){for(var ux=0,cx=ox.length;ux<cx;ux++)ox[ux].fixed&&copy$1(ox[ux].p,l.getNodeByIndex(ux).getLayout())}),ax.afterStep(function(ox,sx,ux){for(var cx=0,hx=ox.length;cx<hx;cx++)ox[cx].fixed||l.getNodeByIndex(cx).setLayout(ox[cx].p),s[u.getId(cx)]=ox[cx].p;for(var cx=0,hx=sx.length;cx<hx;cx++){var gx=sx[cx],fx=l.getEdgeByIndex(cx),dx=gx.n1.p,mx=gx.n2.p,vx=fx.getLayout();vx=vx?vx.slice():[],vx[0]=vx[0]||[],vx[1]=vx[1]||[],copy$1(vx[0],dx),copy$1(vx[1],mx),+gx.curveness&&(vx[2]=[(dx[0]+mx[0])/2-(dx[1]-mx[1])*gx.curveness,(dx[1]+mx[1])/2-(mx[0]-dx[0])*gx.curveness]),fx.setLayout(vx)}}),n.forceLayout=ax,n.preservedPoints=s,ax.step()}else n.forceLayout=null})}function getViewRect$3(t,n,a){var s=extend(t.getBoxLayoutParams(),{aspect:a});return getLayoutRect(s,{width:n.getWidth(),height:n.getHeight()})}function createViewCoordSys(t,n){var a=[];return t.eachSeriesByType("graph",function(s){var l=s.get("coordinateSystem");if(!l||l==="view"){var u=s.getData(),c=u.mapArray(function(In){var ix=u.getItemModel(In);return[+ix.get("x"),+ix.get("y")]}),d=[],Ct=[];fromPoints(c,d,Ct),Ct[0]-d[0]===0&&(Ct[0]+=1,d[0]-=1),Ct[1]-d[1]===0&&(Ct[1]+=1,d[1]-=1);var ar=(Ct[0]-d[0])/(Ct[1]-d[1]),en=getViewRect$3(s,n,ar);isNaN(ar)&&(d=[en.x,en.y],Ct=[en.x+en.width,en.y+en.height]);var tn=Ct[0]-d[0],on=Ct[1]-d[1],cn=en.width,dn=en.height,Cn=s.coordinateSystem=new View;Cn.zoomLimit=s.get("scaleLimit"),Cn.setBoundingRect(d[0],d[1],tn,on),Cn.setViewRect(en.x,en.y,cn,dn),Cn.setCenter(s.get("center"),n),Cn.setZoom(s.get("zoom")),a.push(Cn)}}),a}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t})();(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(StraightLineShape);function isStraightLine(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var ECLinePath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-line",s}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new StraightLineShape},n.prototype.buildPath=function(a,s){isStraightLine(s)?straightLineProto.buildPath.call(this,a,s):bezierCurveProto.buildPath.call(this,a,s)},n.prototype.pointAt=function(a){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,a):bezierCurveProto.pointAt.call(this,a)},n.prototype.tangentAt=function(a){var s=this.shape,l=isStraightLine(s)?[s.x2-s.x1,s.y2-s.y1]:bezierCurveProto.tangentAt.call(this,a);return normalize$3(l,l)},n})(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(t){return"_"+t+"Type"}function makeSymbolTypeValue(t,n,a){var s=n.getItemVisual(a,t);if(!s||s==="none")return s;var l=n.getItemVisual(a,t+"Size"),u=n.getItemVisual(a,t+"Rotate"),c=n.getItemVisual(a,t+"Offset"),d=n.getItemVisual(a,t+"KeepAspect"),Ct=normalizeSymbolSize(l),ar=normalizeSymbolOffset(c||0,Ct);return s+Ct+ar+(u||"")+(d||"")}function createSymbol(t,n,a){var s=n.getItemVisual(a,t);if(!(!s||s==="none")){var l=n.getItemVisual(a,t+"Size"),u=n.getItemVisual(a,t+"Rotate"),c=n.getItemVisual(a,t+"Offset"),d=n.getItemVisual(a,t+"KeepAspect"),Ct=normalizeSymbolSize(l),ar=normalizeSymbolOffset(c||0,Ct),en=createSymbol$1(s,-Ct[0]/2+ar[0],-Ct[1]/2+ar[1],Ct[0],Ct[1],null,d);return en.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,en.name=t,en}}function createLine(t){var n=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(n.shape,t),n}function setLinePoints(t,n){t.x1=n[0][0],t.y1=n[0][1],t.x2=n[1][0],t.y2=n[1][1],t.percent=1;var a=n[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var Line=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u._createLine(a,s,l),u}return n.prototype._createLine=function(a,s,l){var u=a.hostModel,c=a.getItemLayout(s),d=createLine(c);d.shape.percent=0,initProps(d,{shape:{percent:1}},u,s),this.add(d),each$f(SYMBOL_CATEGORIES,function(Ct){var ar=createSymbol(Ct,a,s);this.add(ar),this[makeSymbolTypeKey(Ct)]=makeSymbolTypeValue(Ct,a,s)},this),this._updateCommonStl(a,s,l)},n.prototype.updateData=function(a,s,l){var u=a.hostModel,c=this.childOfName("line"),d=a.getItemLayout(s),Ct={shape:{}};setLinePoints(Ct.shape,d),updateProps$1(c,Ct,u,s),each$f(SYMBOL_CATEGORIES,function(ar){var en=makeSymbolTypeValue(ar,a,s),tn=makeSymbolTypeKey(ar);if(this[tn]!==en){this.remove(this.childOfName(ar));var on=createSymbol(ar,a,s);this.add(on)}this[tn]=en},this),this._updateCommonStl(a,s,l)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(a,s,l){var u=a.hostModel,c=this.childOfName("line"),d=l&&l.emphasisLineStyle,Ct=l&&l.blurLineStyle,ar=l&&l.selectLineStyle,en=l&&l.labelStatesModels,tn=l&&l.emphasisDisabled,on=l&&l.focus,cn=l&&l.blurScope;if(!l||a.hasItemOption){var dn=a.getItemModel(s),Cn=dn.getModel("emphasis");d=Cn.getModel("lineStyle").getLineStyle(),Ct=dn.getModel(["blur","lineStyle"]).getLineStyle(),ar=dn.getModel(["select","lineStyle"]).getLineStyle(),tn=Cn.get("disabled"),on=Cn.get("focus"),cn=Cn.get("blurScope"),en=getLabelStatesModels(dn)}var In=a.getItemVisual(s,"style"),ix=In.stroke;c.useStyle(In),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=d,c.ensureState("blur").style=Ct,c.ensureState("select").style=ar,each$f(SYMBOL_CATEGORIES,function(cx){var hx=this.childOfName(cx);if(hx){hx.setColor(ix),hx.style.opacity=In.opacity;for(var gx=0;gx<SPECIAL_STATES.length;gx++){var fx=SPECIAL_STATES[gx],dx=c.getState(fx);if(dx){var mx=dx.style||{},vx=hx.ensureState(fx),bx=vx.style||(vx.style={});mx.stroke!=null&&(bx[hx.__isEmptyBrush?"stroke":"fill"]=mx.stroke),mx.opacity!=null&&(bx.opacity=mx.opacity)}}hx.markRedraw()}},this);var ax=u.getRawValue(s);setLabelStyle(this,en,{labelDataIndex:s,labelFetcher:{getFormattedLabel:function(cx,hx){return u.getFormattedLabel(cx,hx,a.dataType)}},inheritColor:ix||"#000",defaultOpacity:In.opacity,defaultText:(ax==null?a.getName(s):isFinite(ax)?round$3(ax):ax)+""});var ox=this.getTextContent();if(ox){var sx=en.normal;ox.__align=ox.style.align,ox.__verticalAlign=ox.style.verticalAlign,ox.__position=sx.get("position")||"middle";var ux=sx.get("distance");isArray$1(ux)||(ux=[ux,ux]),ox.__labelDistance=ux}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,on,cn,tn)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.updateLayout=function(a,s){this.setLinePoints(a.getItemLayout(s))},n.prototype.setLinePoints=function(a){var s=this.childOfName("line");setLinePoints(s.shape,a),s.dirty()},n.prototype.beforeUpdate=function(){var a=this,s=a.childOfName("fromSymbol"),l=a.childOfName("toSymbol"),u=a.getTextContent();if(!s&&!l&&(!u||u.ignore))return;for(var c=1,d=this.parent;d;)d.scaleX&&(c/=d.scaleX),d=d.parent;var Ct=a.childOfName("line");if(!this.__dirty&&!Ct.__dirty)return;var ar=Ct.shape.percent,en=Ct.pointAt(0),tn=Ct.pointAt(ar),on=sub([],tn,en);normalize$3(on,on);function cn(dx,mx){var vx=dx.__specifiedRotation;if(vx==null){var bx=Ct.tangentAt(mx);dx.attr("rotation",(mx===1?-1:1)*Math.PI/2-Math.atan2(bx[1],bx[0]))}else dx.attr("rotation",vx)}if(s&&(s.setPosition(en),cn(s,0),s.scaleX=s.scaleY=c*ar,s.markRedraw()),l&&(l.setPosition(tn),cn(l,1),l.scaleX=l.scaleY=c*ar,l.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var dn=void 0,Cn=void 0,In=u.__labelDistance,ix=In[0]*c,ax=In[1]*c,ox=ar/2,sx=Ct.tangentAt(ox),ux=[sx[1],-sx[0]],cx=Ct.pointAt(ox);ux[1]>0&&(ux[0]=-ux[0],ux[1]=-ux[1]);var hx=sx[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var gx=-Math.atan2(sx[1],sx[0]);tn[0]<en[0]&&(gx=Math.PI+gx),u.rotation=gx}var fx=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":fx=-ax,Cn="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":fx=ax,Cn="top";break;default:fx=0,Cn="middle"}switch(u.__position){case"end":u.x=on[0]*ix+tn[0],u.y=on[1]*ax+tn[1],dn=on[0]>.8?"left":on[0]<-.8?"right":"center",Cn=on[1]>.8?"top":on[1]<-.8?"bottom":"middle";break;case"start":u.x=-on[0]*ix+en[0],u.y=-on[1]*ax+en[1],dn=on[0]>.8?"right":on[0]<-.8?"left":"center",Cn=on[1]>.8?"bottom":on[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=ix*hx+en[0],u.y=en[1]+fx,dn=sx[0]<0?"right":"left",u.originX=-ix*hx,u.originY=-fx;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=cx[0],u.y=cx[1]+fx,dn="center",u.originY=-fx;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-ix*hx+tn[0],u.y=tn[1]+fx,dn=sx[0]>=0?"right":"left",u.originX=ix*hx,u.originY=-fx;break}u.scaleX=u.scaleY=c,u.setStyle({verticalAlign:u.__verticalAlign||Cn,align:u.__align||dn})}},n})(Group$3),LineDraw=(function(){function t(n){this.group=new Group$3,this._LineCtor=n||Line}return t.prototype.updateData=function(n){var a=this;this._progressiveEls=null;var s=this,l=s.group,u=s._lineData;s._lineData=n,u||l.removeAll();var c=makeSeriesScope$1(n);n.diff(u).add(function(d){a._doAdd(n,d,c)}).update(function(d,Ct){a._doUpdate(u,n,Ct,d,c)}).remove(function(d){l.remove(u.getItemGraphicEl(d))}).execute()},t.prototype.updateLayout=function(){var n=this._lineData;n&&n.eachItemGraphicEl(function(a,s){a.updateLayout(n,s)},this)},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$1(n),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a){this._progressiveEls=[];function s(d){!d.isGroup&&!isEffectObject(d)&&(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var l=n.start;l<n.end;l++){var u=a.getItemLayout(l);if(lineNeedsDraw(u)){var c=new this._LineCtor(a,l,this._seriesScope);c.traverse(s),this.group.add(c),a.setItemGraphicEl(l,c),this._progressiveEls.push(c)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._doAdd=function(n,a,s){var l=n.getItemLayout(a);if(lineNeedsDraw(l)){var u=new this._LineCtor(n,a,s);n.setItemGraphicEl(a,u),this.group.add(u)}},t.prototype._doUpdate=function(n,a,s,l,u){var c=n.getItemGraphicEl(s);if(!lineNeedsDraw(a.getItemLayout(l))){this.group.remove(c);return}c?c.updateData(a,l,u):c=new this._LineCtor(a,l,u),a.setItemGraphicEl(l,c),this.group.add(c)},t})();function isEffectObject(t){return t.animators&&t.animators.length>0}function makeSeriesScope$1(t){var n=t.hostModel,a=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:getLabelStatesModels(n)}}function isPointNaN(t){return isNaN(t[0])||isNaN(t[1])}function lineNeedsDraw(t){return t&&!isPointNaN(t[0])&&!isPointNaN(t[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(t,n,a){for(var s=t[0],l=t[1],u=t[2],c=1/0,d,Ct=a*a,ar=.1,en=.1;en<=.9;en+=.1){v1[0]=quadraticAt(s[0],l[0],u[0],en),v1[1]=quadraticAt(s[1],l[1],u[1],en);var tn=mathAbs(v2DistSquare(v1,n)-Ct);tn<c&&(c=tn,d=en)}for(var on=0;on<32;on++){var cn=d+ar;v2[0]=quadraticAt(s[0],l[0],u[0],d),v2[1]=quadraticAt(s[1],l[1],u[1],d),v3[0]=quadraticAt(s[0],l[0],u[0],cn),v3[1]=quadraticAt(s[1],l[1],u[1],cn);var tn=v2DistSquare(v2,n)-Ct;if(mathAbs(tn)<.01)break;var dn=v2DistSquare(v3,n)-Ct;ar/=2,tn<0?dn>=0?d=d+ar:d=d-ar:dn>=0?d=d-ar:d=d+ar}return d}function adjustEdge(t,n){var a=[],s=quadraticSubdivide,l=[[],[],[]],u=[[],[]],c=[];n/=2,t.eachEdge(function(d,Ct){var ar=d.getLayout(),en=d.getVisual("fromSymbol"),tn=d.getVisual("toSymbol");ar.__original||(ar.__original=[clone$3(ar[0]),clone$3(ar[1])],ar[2]&&ar.__original.push(clone$3(ar[2])));var on=ar.__original;if(ar[2]!=null){if(copy$1(l[0],on[0]),copy$1(l[1],on[2]),copy$1(l[2],on[1]),en&&en!=="none"){var cn=getSymbolSize(d.node1),dn=intersectCurveCircle(l,on[0],cn*n);s(l[0][0],l[1][0],l[2][0],dn,a),l[0][0]=a[3],l[1][0]=a[4],s(l[0][1],l[1][1],l[2][1],dn,a),l[0][1]=a[3],l[1][1]=a[4]}if(tn&&tn!=="none"){var cn=getSymbolSize(d.node2),dn=intersectCurveCircle(l,on[1],cn*n);s(l[0][0],l[1][0],l[2][0],dn,a),l[1][0]=a[1],l[2][0]=a[2],s(l[0][1],l[1][1],l[2][1],dn,a),l[1][1]=a[1],l[2][1]=a[2]}copy$1(ar[0],l[0]),copy$1(ar[1],l[2]),copy$1(ar[2],l[1])}else{if(copy$1(u[0],on[0]),copy$1(u[1],on[1]),sub(c,u[1],u[0]),normalize$3(c,c),en&&en!=="none"){var cn=getSymbolSize(d.node1);scaleAndAdd$1(u[0],u[0],c,cn*n)}if(tn&&tn!=="none"){var cn=getSymbolSize(d.node2);scaleAndAdd$1(u[1],u[1],c,-cn*n)}copy$1(ar[0],u[0]),copy$1(ar[1],u[1])}})}function isViewCoordSys(t){return t.type==="view"}var GraphView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){var l=new SymbolDraw,u=new LineDraw,c=this.group;this._controller=new RoamController(s.getZr()),this._controllerHost={target:c},c.add(l.group),c.add(u.group),this._symbolDraw=l,this._lineDraw=u,this._firstRender=!0},n.prototype.render=function(a,s,l){var u=this,c=a.coordinateSystem;this._model=a;var d=this._symbolDraw,Ct=this._lineDraw,ar=this.group;if(isViewCoordSys(c)){var en={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?ar.attr(en):updateProps$1(ar,en,a)}adjustEdge(a.getGraph(),getNodeGlobalScale(a));var tn=a.getData();d.updateData(tn);var on=a.getEdgeData();Ct.updateData(on),this._updateNodeAndLinkScale(),this._updateController(a,s,l),clearTimeout(this._layoutTimeout);var cn=a.forceLayout,dn=a.get(["force","layoutAnimation"]);cn&&this._startForceLayoutIteration(cn,dn);var Cn=a.get("layout");tn.graph.eachNode(function(ox){var sx=ox.dataIndex,ux=ox.getGraphicEl(),cx=ox.getModel();if(ux){ux.off("drag").off("dragend");var hx=cx.get("draggable");hx&&ux.on("drag",function(fx){switch(Cn){case"force":cn.warmUp(),!u._layouting&&u._startForceLayoutIteration(cn,dn),cn.setFixed(sx),tn.setItemLayout(sx,[ux.x,ux.y]);break;case"circular":tn.setItemLayout(sx,[ux.x,ux.y]),ox.setLayout({fixed:!0},!0),circularLayout(a,"symbolSize",ox,[fx.offsetX,fx.offsetY]),u.updateLayout(a);break;case"none":default:tn.setItemLayout(sx,[ux.x,ux.y]),simpleLayoutEdge(a.getGraph(),a),u.updateLayout(a);break}}).on("dragend",function(){cn&&cn.setUnfixed(sx)}),ux.setDraggable(hx,!!cx.get("cursor"));var gx=cx.get(["emphasis","focus"]);gx==="adjacency"&&(getECData(ux).focus=ox.getAdjacentDataIndices())}}),tn.graph.eachEdge(function(ox){var sx=ox.getGraphicEl(),ux=ox.getModel().get(["emphasis","focus"]);sx&&ux==="adjacency"&&(getECData(sx).focus={edge:[ox.dataIndex],node:[ox.node1.dataIndex,ox.node2.dataIndex]})});var In=a.get("layout")==="circular"&&a.get(["circular","rotateLabel"]),ix=tn.getLayout("cx"),ax=tn.getLayout("cy");tn.graph.eachNode(function(ox){rotateNodeLabel(ox,In,ix,ax)}),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(a,s){var l=this;(function u(){a.step(function(c){l.updateLayout(l._model),(l._layouting=!c)&&(s?l._layoutTimeout=setTimeout(u,16):u())})})()},n.prototype._updateController=function(a,s,l){var u=this,c=this._controller,d=this._controllerHost,Ct=this.group;if(c.setPointerChecker(function(ar,en,tn){var on=Ct.getBoundingRect();return on.applyTransform(Ct.transform),on.contain(en,tn)&&!onIrrelevantElement(ar,l,a)}),!isViewCoordSys(a.coordinateSystem)){c.disable();return}c.enable(a.get("roam")),d.zoomLimit=a.get("scaleLimit"),d.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(ar){updateViewOnPan(d,ar.dx,ar.dy),l.dispatchAction({seriesId:a.id,type:"graphRoam",dx:ar.dx,dy:ar.dy})}).on("zoom",function(ar){updateViewOnZoom(d,ar.scale,ar.originX,ar.originY),l.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:ar.scale,originX:ar.originX,originY:ar.originY}),u._updateNodeAndLinkScale(),adjustEdge(a.getGraph(),getNodeGlobalScale(a)),u._lineDraw.updateLayout(),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(){var a=this._model,s=a.getData(),l=getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u&&u.setSymbolScale(l)})},n.prototype.updateLayout=function(a){adjustEdge(a.getGraph(),getNodeGlobalScale(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n})(ChartView);function generateNodeKey(t){return"_EC_"+t}var Graph=(function(){function t(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(n,a){n=n==null?""+a:""+n;var s=this._nodesMap;if(!s[generateNodeKey(n)]){var l=new GraphNode(n,a);return l.hostGraph=this,this.nodes.push(l),s[generateNodeKey(n)]=l,l}},t.prototype.getNodeByIndex=function(n){var a=this.data.getRawIndex(n);return this.nodes[a]},t.prototype.getNodeById=function(n){return this._nodesMap[generateNodeKey(n)]},t.prototype.addEdge=function(n,a,s){var l=this._nodesMap,u=this._edgesMap;if(isNumber(n)&&(n=this.nodes[n]),isNumber(a)&&(a=this.nodes[a]),n instanceof GraphNode||(n=l[generateNodeKey(n)]),a instanceof GraphNode||(a=l[generateNodeKey(a)]),!(!n||!a)){var c=n.id+"-"+a.id,d=new GraphEdge(n,a,s);return d.hostGraph=this,this._directed&&(n.outEdges.push(d),a.inEdges.push(d)),n.edges.push(d),n!==a&&a.edges.push(d),this.edges.push(d),u[c]=d,d}},t.prototype.getEdgeByIndex=function(n){var a=this.edgeData.getRawIndex(n);return this.edges[a]},t.prototype.getEdge=function(n,a){n instanceof GraphNode&&(n=n.id),a instanceof GraphNode&&(a=a.id);var s=this._edgesMap;return this._directed?s[n+"-"+a]:s[n+"-"+a]||s[a+"-"+n]},t.prototype.eachNode=function(n,a){for(var s=this.nodes,l=s.length,u=0;u<l;u++)s[u].dataIndex>=0&&n.call(a,s[u],u)},t.prototype.eachEdge=function(n,a){for(var s=this.edges,l=s.length,u=0;u<l;u++)s[u].dataIndex>=0&&s[u].node1.dataIndex>=0&&s[u].node2.dataIndex>=0&&n.call(a,s[u],u)},t.prototype.breadthFirstTraverse=function(n,a,s,l){if(a instanceof GraphNode||(a=this._nodesMap[generateNodeKey(a)]),!!a){for(var u=s==="out"?"outEdges":s==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!n.call(l,a,null))for(var d=[a];d.length;)for(var Ct=d.shift(),ar=Ct[u],c=0;c<ar.length;c++){var en=ar[c],tn=en.node1===Ct?en.node2:en.node1;if(!tn.__visited){if(n.call(l,tn,Ct))return;d.push(tn),tn.__visited=!0}}}},t.prototype.update=function(){for(var n=this.data,a=this.edgeData,s=this.nodes,l=this.edges,u=0,c=s.length;u<c;u++)s[u].dataIndex=-1;for(var u=0,c=n.count();u<c;u++)s[n.getRawIndex(u)].dataIndex=u;a.filterSelf(function(d){var Ct=l[a.getRawIndex(d)];return Ct.node1.dataIndex>=0&&Ct.node2.dataIndex>=0});for(var u=0,c=l.length;u<c;u++)l[u].dataIndex=-1;for(var u=0,c=a.count();u<c;u++)l[a.getRawIndex(u)].dataIndex=u},t.prototype.clone=function(){for(var n=new t(this._directed),a=this.nodes,s=this.edges,l=0;l<a.length;l++)n.addNode(a[l].id,a[l].dataIndex);for(var l=0;l<s.length;l++){var u=s[l];n.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return n},t})(),GraphNode=(function(){function t(n,a){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=n??"",this.dataIndex=a??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.data.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},a=0;a<this.edges.length;a++){var s=this.edges[a];s.dataIndex<0||(n.edge.push(s.dataIndex),n.node.push(s.node1.dataIndex,s.node2.dataIndex))}return n},t.prototype.getTrajectoryDataIndices=function(){for(var n=createHashMap(),a=createHashMap(),s=0;s<this.edges.length;s++){var l=this.edges[s];if(!(l.dataIndex<0)){n.set(l.dataIndex,!0);for(var u=[l.node1],c=[l.node2],d=0;d<u.length;){var Ct=u[d];d++,a.set(Ct.dataIndex,!0);for(var ar=0;ar<Ct.inEdges.length;ar++)n.set(Ct.inEdges[ar].dataIndex,!0),u.push(Ct.inEdges[ar].node1)}for(d=0;d<c.length;){var en=c[d];d++,a.set(en.dataIndex,!0);for(var ar=0;ar<en.outEdges.length;ar++)n.set(en.outEdges[ar].dataIndex,!0),c.push(en.outEdges[ar].node2)}}}return{edge:n.keys(),node:a.keys()}},t})(),GraphEdge=(function(){function t(n,a,s){this.dataIndex=-1,this.node1=n,this.node2=a,this.dataIndex=s??-1}return t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.edgeData.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var n=createHashMap(),a=createHashMap();n.set(this.dataIndex,!0);for(var s=[this.node1],l=[this.node2],u=0;u<s.length;){var c=s[u];u++,a.set(c.dataIndex,!0);for(var d=0;d<c.inEdges.length;d++)n.set(c.inEdges[d].dataIndex,!0),s.push(c.inEdges[d].node1)}for(u=0;u<l.length;){var Ct=l[u];u++,a.set(Ct.dataIndex,!0);for(var d=0;d<Ct.outEdges.length;d++)n.set(Ct.outEdges[d].dataIndex,!0),l.push(Ct.outEdges[d].node2)}return{edge:n.keys(),node:a.keys()}},t})();function createGraphDataProxyMixin(t,n){return{getValue:function(a){var s=this[t][n];return s.getStore().get(s.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,s){this.dataIndex>=0&&this[t][n].setItemVisual(this.dataIndex,a,s)},getVisual:function(a){return this[t][n].getItemVisual(this.dataIndex,a)},setLayout:function(a,s){this.dataIndex>=0&&this[t][n].setItemLayout(this.dataIndex,a,s)},getLayout:function(){return this[t][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][n].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(t,n,a,s,l){for(var u=new Graph(s),c=0;c<t.length;c++)u.addNode(retrieve(t[c].id,t[c].name,c),c);for(var d=[],Ct=[],ar=0,c=0;c<n.length;c++){var en=n[c],tn=en.source,on=en.target;u.addEdge(tn,on,ar)&&(Ct.push(en),d.push(retrieve(convertOptionIdName(en.id,null),tn+" > "+on)),ar++)}var cn=a.get("coordinateSystem"),dn;if(cn==="cartesian2d"||cn==="polar")dn=createSeriesData(t,a);else{var Cn=CoordinateSystemManager.get(cn),In=Cn?Cn.dimensions||[]:[];indexOf(In,"value")<0&&In.concat(["value"]);var ix=prepareSeriesDataSchema(t,{coordDimensions:In,encodeDefine:a.getEncode()}).dimensions;dn=new SeriesData(ix,a),dn.initData(t)}var ax=new SeriesData(["value"],a);return ax.initData(Ct,d),l&&l(dn,ax),linkSeriesData({mainData:dn,struct:u,structAttr:"graph",datas:{node:dn,edge:ax},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments);var s=this;function l(){return s._categoriesData}this.legendVisualProvider=new LegendVisualProvider(l,l),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(a){t.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(a,"edgeLabel",["show"])},n.prototype.getInitialData=function(a,s){var l=a.edges||a.links||[],u=a.data||a.nodes||[],c=this;if(u&&l){initCurvenessList(this);var d=createGraphFromNodeEdge(u,l,this,!0,Ct);return each$f(d.edges,function(ar){createEdgeMapForCurveness(ar.node1,ar.node2,this,ar.dataIndex)},this),d.data}function Ct(ar,en){ar.wrapMethod("getItemModel",function(dn){var Cn=c._categoriesModels,In=dn.getShallow("category"),ix=Cn[In];return ix&&(ix.parentModel=dn.parentModel,dn.parentModel=ix),dn});var tn=Model.prototype.getModel;function on(dn,Cn){var In=tn.call(this,dn,Cn);return In.resolveParentPath=cn,In}en.wrapMethod("getItemModel",function(dn){return dn.resolveParentPath=cn,dn.getModel=on,dn});function cn(dn){if(dn&&(dn[0]==="label"||dn[1]==="label")){var Cn=dn.slice();return dn[0]==="label"?Cn[0]="edgeLabel":dn[1]==="label"&&(Cn[1]="edgeLabel"),Cn}return dn}}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(a,s,l){if(l==="edge"){var u=this.getData(),c=this.getDataParams(a,l),d=u.graph.getEdgeByIndex(a),Ct=u.getName(d.node1.dataIndex),ar=u.getName(d.node2.dataIndex),en=[];return Ct!=null&&en.push(Ct),ar!=null&&en.push(ar),createTooltipMarkup("nameValue",{name:en.join(" > "),value:c.value,noValue:c.value==null})}var tn=defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s});return tn},n.prototype._updateCategoriesData=function(){var a=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),s=new SeriesData(["value"],this);s.initData(a),this._categoriesData=s,this._categoriesModels=s.mapArray(function(l){return s.getItemModel(l)})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n})(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(t){t.registerChartView(GraphView),t.registerSeriesModel(GraphSeriesModel),t.registerProcessor(categoryFilter),t.registerVisual(categoryVisual),t.registerVisual(graphEdgeVisual),t.registerLayout(graphSimpleLayout),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),t.registerLayout(graphForceLayout),t.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),t.registerAction(actionInfo$1,function(n,a,s){a.eachComponent({mainType:"series",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,s);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}var PointerShape=(function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t})(),PointerPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="pointer",s}return n.prototype.getDefaultShape=function(){return new PointerShape},n.prototype.buildPath=function(a,s){var l=Math.cos,u=Math.sin,c=s.r,d=s.width,Ct=s.angle,ar=s.x-l(Ct)*d*(d>=c/3?1:2),en=s.y-u(Ct)*d*(d>=c/3?1:2);Ct=s.angle-Math.PI/2,a.moveTo(ar,en),a.lineTo(s.x+l(Ct)*d,s.y+u(Ct)*d),a.lineTo(s.x+l(s.angle)*c,s.y+u(s.angle)*c),a.lineTo(s.x-l(Ct)*d,s.y-u(Ct)*d),a.lineTo(ar,en)},n})(Path);function parsePosition(t,n){var a=t.get("center"),s=n.getWidth(),l=n.getHeight(),u=Math.min(s,l),c=parsePercent(a[0],n.getWidth()),d=parsePercent(a[1],n.getHeight()),Ct=parsePercent(t.get("radius"),u/2);return{cx:c,cy:d,r:Ct}}function formatLabel(t,n){var a=t==null?"":t+"";return n&&(isString$1(n)?a=n.replace("{value}",a):isFunction$1(n)&&(a=n(t))),a}var GaugeView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this.group.removeAll();var u=a.get(["axisLine","lineStyle","color"]),c=parsePosition(a,l);this._renderMain(a,s,l,u,c),this._data=a.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(a,s,l,u,c){var d=this.group,Ct=a.get("clockwise"),ar=-a.get("startAngle")/180*Math.PI,en=-a.get("endAngle")/180*Math.PI,tn=a.getModel("axisLine"),on=tn.get("roundCap"),cn=on?SausagePath:Sector,dn=tn.get("show"),Cn=tn.getModel("lineStyle"),In=Cn.get("width"),ix=[ar,en];normalizeArcAngles(ix,!Ct),ar=ix[0],en=ix[1];for(var ax=en-ar,ox=ar,sx=[],ux=0;dn&&ux<u.length;ux++){var cx=Math.min(Math.max(u[ux][0],0),1);en=ar+ax*cx;var hx=new cn({shape:{startAngle:ox,endAngle:en,cx:c.cx,cy:c.cy,clockwise:Ct,r0:c.r-In,r:c.r},silent:!0});hx.setStyle({fill:u[ux][1]}),hx.setStyle(Cn.getLineStyle(["color","width"])),sx.push(hx),ox=en}sx.reverse(),each$f(sx,function(fx){return d.add(fx)});var gx=function(fx){if(fx<=0)return u[0][1];var dx;for(dx=0;dx<u.length;dx++)if(u[dx][0]>=fx&&(dx===0?0:u[dx-1][0])<fx)return u[dx][1];return u[dx-1][1]};this._renderTicks(a,s,l,gx,c,ar,en,Ct,In),this._renderTitleAndDetail(a,s,l,gx,c),this._renderAnchor(a,c),this._renderPointer(a,s,l,gx,c,ar,en,Ct,In)},n.prototype._renderTicks=function(a,s,l,u,c,d,Ct,ar,en){for(var tn=this.group,on=c.cx,cn=c.cy,dn=c.r,Cn=+a.get("min"),In=+a.get("max"),ix=a.getModel("splitLine"),ax=a.getModel("axisTick"),ox=a.getModel("axisLabel"),sx=a.get("splitNumber"),ux=ax.get("splitNumber"),cx=parsePercent(ix.get("length"),dn),hx=parsePercent(ax.get("length"),dn),gx=d,fx=(Ct-d)/sx,dx=fx/ux,mx=ix.getModel("lineStyle").getLineStyle(),vx=ax.getModel("lineStyle").getLineStyle(),bx=ix.get("distance"),xx,_x,Ex=0;Ex<=sx;Ex++){if(xx=Math.cos(gx),_x=Math.sin(gx),ix.get("show")){var Tx=bx?bx+en:en,Cx=new Line$1({shape:{x1:xx*(dn-Tx)+on,y1:_x*(dn-Tx)+cn,x2:xx*(dn-cx-Tx)+on,y2:_x*(dn-cx-Tx)+cn},style:mx,silent:!0});mx.stroke==="auto"&&Cx.setStyle({stroke:u(Ex/sx)}),tn.add(Cx)}if(ox.get("show")){var Tx=ox.get("distance")+bx,Mx=formatLabel(round$3(Ex/sx*(In-Cn)+Cn),ox.get("formatter")),Ax=u(Ex/sx),Nx=xx*(dn-cx-Tx)+on,Ux=_x*(dn-cx-Tx)+cn,Rx=ox.get("rotate"),Ox=0;Rx==="radial"?(Ox=-gx+2*Math.PI,Ox>Math.PI/2&&(Ox+=Math.PI)):Rx==="tangential"?Ox=-gx-Math.PI/2:isNumber(Rx)&&(Ox=Rx*Math.PI/180),Ox===0?tn.add(new ZRText({style:createTextStyle$1(ox,{text:Mx,x:Nx,y:Ux,verticalAlign:_x<-.8?"top":_x>.8?"bottom":"middle",align:xx<-.4?"left":xx>.4?"right":"center"},{inheritColor:Ax}),silent:!0})):tn.add(new ZRText({style:createTextStyle$1(ox,{text:Mx,x:Nx,y:Ux,verticalAlign:"middle",align:"center"},{inheritColor:Ax}),silent:!0,originX:Nx,originY:Ux,rotation:Ox}))}if(ax.get("show")&&Ex!==sx){var Tx=ax.get("distance");Tx=Tx?Tx+en:en;for(var Px=0;Px<=ux;Px++){xx=Math.cos(gx),_x=Math.sin(gx);var $x=new Line$1({shape:{x1:xx*(dn-Tx)+on,y1:_x*(dn-Tx)+cn,x2:xx*(dn-hx-Tx)+on,y2:_x*(dn-hx-Tx)+cn},silent:!0,style:vx});vx.stroke==="auto"&&$x.setStyle({stroke:u((Ex+Px/ux)/sx)}),tn.add($x),gx+=dx}gx-=dx}else gx+=fx}},n.prototype._renderPointer=function(a,s,l,u,c,d,Ct,ar,en){var tn=this.group,on=this._data,cn=this._progressEls,dn=[],Cn=a.get(["pointer","show"]),In=a.getModel("progress"),ix=In.get("show"),ax=a.getData(),ox=ax.mapDimension("value"),sx=+a.get("min"),ux=+a.get("max"),cx=[sx,ux],hx=[d,Ct];function gx(dx,mx){var vx=ax.getItemModel(dx),bx=vx.getModel("pointer"),xx=parsePercent(bx.get("width"),c.r),_x=parsePercent(bx.get("length"),c.r),Ex=a.get(["pointer","icon"]),Tx=bx.get("offsetCenter"),Cx=parsePercent(Tx[0],c.r),Mx=parsePercent(Tx[1],c.r),Ax=bx.get("keepAspect"),Nx;return Ex?Nx=createSymbol$1(Ex,Cx-xx/2,Mx-_x,xx,_x,null,Ax):Nx=new PointerPath({shape:{angle:-Math.PI/2,width:xx,r:_x,x:Cx,y:Mx}}),Nx.rotation=-(mx+Math.PI/2),Nx.x=c.cx,Nx.y=c.cy,Nx}function fx(dx,mx){var vx=In.get("roundCap"),bx=vx?SausagePath:Sector,xx=In.get("overlap"),_x=xx?In.get("width"):en/ax.count(),Ex=xx?c.r-_x:c.r-(dx+1)*_x,Tx=xx?c.r:c.r-dx*_x,Cx=new bx({shape:{startAngle:d,endAngle:mx,cx:c.cx,cy:c.cy,clockwise:ar,r0:Ex,r:Tx}});return xx&&(Cx.z2=linearMap$2(ax.get(ox,dx),[sx,ux],[100,0],!0)),Cx}(ix||Cn)&&(ax.diff(on).add(function(dx){var mx=ax.get(ox,dx);if(Cn){var vx=gx(dx,d);initProps(vx,{rotation:-((isNaN(+mx)?hx[0]:linearMap$2(mx,cx,hx,!0))+Math.PI/2)},a),tn.add(vx),ax.setItemGraphicEl(dx,vx)}if(ix){var bx=fx(dx,d),xx=In.get("clip");initProps(bx,{shape:{endAngle:linearMap$2(mx,cx,hx,xx)}},a),tn.add(bx),setCommonECData(a.seriesIndex,ax.dataType,dx,bx),dn[dx]=bx}}).update(function(dx,mx){var vx=ax.get(ox,dx);if(Cn){var bx=on.getItemGraphicEl(mx),xx=bx?bx.rotation:d,_x=gx(dx,xx);_x.rotation=xx,updateProps$1(_x,{rotation:-((isNaN(+vx)?hx[0]:linearMap$2(vx,cx,hx,!0))+Math.PI/2)},a),tn.add(_x),ax.setItemGraphicEl(dx,_x)}if(ix){var Ex=cn[mx],Tx=Ex?Ex.shape.endAngle:d,Cx=fx(dx,Tx),Mx=In.get("clip");updateProps$1(Cx,{shape:{endAngle:linearMap$2(vx,cx,hx,Mx)}},a),tn.add(Cx),setCommonECData(a.seriesIndex,ax.dataType,dx,Cx),dn[dx]=Cx}}).execute(),ax.each(function(dx){var mx=ax.getItemModel(dx),vx=mx.getModel("emphasis"),bx=vx.get("focus"),xx=vx.get("blurScope"),_x=vx.get("disabled");if(Cn){var Ex=ax.getItemGraphicEl(dx),Tx=ax.getItemVisual(dx,"style"),Cx=Tx.fill;if(Ex instanceof ZRImage){var Mx=Ex.style;Ex.useStyle(extend({image:Mx.image,x:Mx.x,y:Mx.y,width:Mx.width,height:Mx.height},Tx))}else Ex.useStyle(Tx),Ex.type!=="pointer"&&Ex.setColor(Cx);Ex.setStyle(mx.getModel(["pointer","itemStyle"]).getItemStyle()),Ex.style.fill==="auto"&&Ex.setStyle("fill",u(linearMap$2(ax.get(ox,dx),cx,[0,1],!0))),Ex.z2EmphasisLift=0,setStatesStylesFromModel(Ex,mx),toggleHoverEmphasis(Ex,bx,xx,_x)}if(ix){var Ax=dn[dx];Ax.useStyle(ax.getItemVisual(dx,"style")),Ax.setStyle(mx.getModel(["progress","itemStyle"]).getItemStyle()),Ax.z2EmphasisLift=0,setStatesStylesFromModel(Ax,mx),toggleHoverEmphasis(Ax,bx,xx,_x)}}),this._progressEls=dn)},n.prototype._renderAnchor=function(a,s){var l=a.getModel("anchor"),u=l.get("show");if(u){var c=l.get("size"),d=l.get("icon"),Ct=l.get("offsetCenter"),ar=l.get("keepAspect"),en=createSymbol$1(d,s.cx-c/2+parsePercent(Ct[0],s.r),s.cy-c/2+parsePercent(Ct[1],s.r),c,c,null,ar);en.z2=l.get("showAbove")?1:0,en.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(en)}},n.prototype._renderTitleAndDetail=function(a,s,l,u,c){var d=this,Ct=a.getData(),ar=Ct.mapDimension("value"),en=+a.get("min"),tn=+a.get("max"),on=new Group$3,cn=[],dn=[],Cn=a.isAnimationEnabled(),In=a.get(["pointer","showAbove"]);Ct.diff(this._data).add(function(ix){cn[ix]=new ZRText({silent:!0}),dn[ix]=new ZRText({silent:!0})}).update(function(ix,ax){cn[ix]=d._titleEls[ax],dn[ix]=d._detailEls[ax]}).execute(),Ct.each(function(ix){var ax=Ct.getItemModel(ix),ox=Ct.get(ar,ix),sx=new Group$3,ux=u(linearMap$2(ox,[en,tn],[0,1],!0)),cx=ax.getModel("title");if(cx.get("show")){var hx=cx.get("offsetCenter"),gx=c.cx+parsePercent(hx[0],c.r),fx=c.cy+parsePercent(hx[1],c.r),dx=cn[ix];dx.attr({z2:In?0:2,style:createTextStyle$1(cx,{x:gx,y:fx,text:Ct.getName(ix),align:"center",verticalAlign:"middle"},{inheritColor:ux})}),sx.add(dx)}var mx=ax.getModel("detail");if(mx.get("show")){var vx=mx.get("offsetCenter"),bx=c.cx+parsePercent(vx[0],c.r),xx=c.cy+parsePercent(vx[1],c.r),_x=parsePercent(mx.get("width"),c.r),Ex=parsePercent(mx.get("height"),c.r),Tx=a.get(["progress","show"])?Ct.getItemVisual(ix,"style").fill:ux,dx=dn[ix],Cx=mx.get("formatter");dx.attr({z2:In?0:2,style:createTextStyle$1(mx,{x:bx,y:xx,text:formatLabel(ox,Cx),width:isNaN(_x)?null:_x,height:isNaN(Ex)?null:Ex,align:"center",verticalAlign:"middle"},{inheritColor:Tx})}),setLabelValueAnimation(dx,{normal:mx},ox,function(Ax){return formatLabel(Ax,Cx)}),Cn&&animateLabelValue(dx,ix,Ct,a,{getFormattedLabel:function(Ax,Nx,Ux,Rx,Ox,Px){return formatLabel(Px?Px.interpolatedValue:ox,Cx)}}),sx.add(dx)}on.add(sx)}),this.group.add(on),this._titleEls=cn,this._detailEls=dn},n.type="gauge",n})(ChartView),GaugeSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="itemStyle",a}return n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n})(SeriesModel);function install$E(t){t.registerChartView(GaugeView),t.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=(function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this,u=l,c=new Polyline$1,d=new ZRText;return u.setTextContent(d),l.setTextGuideLine(c),l.updateData(a,s,!0),l}return n.prototype.updateData=function(a,s,l){var u=this,c=a.hostModel,d=a.getItemModel(s),Ct=a.getItemLayout(s),ar=d.getModel("emphasis"),en=d.get(opacityAccessPath$1);en=en??1,l||saveOldStyle(u),u.useStyle(a.getItemVisual(s,"style")),u.style.lineJoin="round",l?(u.setShape({points:Ct.points}),u.style.opacity=0,initProps(u,{style:{opacity:en}},c,s)):updateProps$1(u,{style:{opacity:en},shape:{points:Ct.points}},c,s),setStatesStylesFromModel(u,d),this._updateLabel(a,s),toggleHoverEmphasis(this,ar.get("focus"),ar.get("blurScope"),ar.get("disabled"))},n.prototype._updateLabel=function(a,s){var l=this,u=this.getTextGuideLine(),c=l.getTextContent(),d=a.hostModel,Ct=a.getItemModel(s),ar=a.getItemLayout(s),en=ar.label,tn=a.getItemVisual(s,"style"),on=tn.fill;setLabelStyle(c,getLabelStatesModels(Ct),{labelFetcher:a.hostModel,labelDataIndex:s,defaultOpacity:tn.opacity,defaultText:a.getName(s)},{normal:{align:en.textAlign,verticalAlign:en.verticalAlign}}),l.setTextConfig({local:!0,inside:!!en.inside,insideStroke:on,outsideFill:on});var cn=en.linePoints;u.setShape({points:cn}),l.textGuideLineConfig={anchor:cn?new Point(cn[0][0],cn[0][1]):null},updateProps$1(c,{style:{x:en.x,y:en.y}},d,s),c.attr({rotation:en.rotation,originX:en.x,originY:en.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(Ct),{stroke:on})},n})(Polygon),FunnelView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._data,d=this.group;u.diff(c).add(function(Ct){var ar=new FunnelPiece(u,Ct);u.setItemGraphicEl(Ct,ar),d.add(ar)}).update(function(Ct,ar){var en=c.getItemGraphicEl(ar);en.updateData(u,Ct),d.add(en),u.setItemGraphicEl(Ct,en)}).remove(function(Ct){var ar=c.getItemGraphicEl(Ct);removeElementWithFadeOut(ar,a,Ct)}).execute(),this._data=u},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n})(ChartView),FunnelSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,l=a.emphasis.labelLine;s.show=s.show&&a.label.show,l.show=l.show&&a.emphasis.label.show},n.prototype.getDataParams=function(a){var s=this.getData(),l=t.prototype.getDataParams.call(this,a),u=s.mapDimension("value"),c=s.getSum(u);return l.percent=c?+(s.get(u,a)/c*100).toFixed(2):0,l.$vars.push("percent"),l},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n})(SeriesModel);function getViewRect$2(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getSortedIndices(t,n){for(var a=t.mapDimension("value"),s=t.mapArray(a,function(Ct){return Ct}),l=[],u=n==="ascending",c=0,d=t.count();c<d;c++)l[c]=c;return isFunction$1(n)?l.sort(n):n!=="none"&&l.sort(function(Ct,ar){return u?s[Ct]-s[ar]:s[ar]-s[Ct]}),l}function labelLayout(t){var n=t.hostModel,a=n.get("orient");t.each(function(s){var l=t.getItemModel(s),u=l.getModel("label"),c=u.get("position"),d=l.getModel("labelLine"),Ct=t.getItemLayout(s),ar=Ct.points,en=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",tn,on,cn,dn;if(en)c==="insideLeft"?(on=(ar[0][0]+ar[3][0])/2+5,cn=(ar[0][1]+ar[3][1])/2,tn="left"):c==="insideRight"?(on=(ar[1][0]+ar[2][0])/2-5,cn=(ar[1][1]+ar[2][1])/2,tn="right"):(on=(ar[0][0]+ar[1][0]+ar[2][0]+ar[3][0])/4,cn=(ar[0][1]+ar[1][1]+ar[2][1]+ar[3][1])/4,tn="center"),dn=[[on,cn],[on,cn]];else{var Cn=void 0,In=void 0,ix=void 0,ax=void 0,ox=d.get("length");c==="left"?(Cn=(ar[3][0]+ar[0][0])/2,In=(ar[3][1]+ar[0][1])/2,ix=Cn-ox,on=ix-5,tn="right"):c==="right"?(Cn=(ar[1][0]+ar[2][0])/2,In=(ar[1][1]+ar[2][1])/2,ix=Cn+ox,on=ix+5,tn="left"):c==="top"?(Cn=(ar[3][0]+ar[0][0])/2,In=(ar[3][1]+ar[0][1])/2,ax=In-ox,cn=ax-5,tn="center"):c==="bottom"?(Cn=(ar[1][0]+ar[2][0])/2,In=(ar[1][1]+ar[2][1])/2,ax=In+ox,cn=ax+5,tn="center"):c==="rightTop"?(Cn=a==="horizontal"?ar[3][0]:ar[1][0],In=a==="horizontal"?ar[3][1]:ar[1][1],a==="horizontal"?(ax=In-ox,cn=ax-5,tn="center"):(ix=Cn+ox,on=ix+5,tn="top")):c==="rightBottom"?(Cn=ar[2][0],In=ar[2][1],a==="horizontal"?(ax=In+ox,cn=ax+5,tn="center"):(ix=Cn+ox,on=ix+5,tn="bottom")):c==="leftTop"?(Cn=ar[0][0],In=a==="horizontal"?ar[0][1]:ar[1][1],a==="horizontal"?(ax=In-ox,cn=ax-5,tn="center"):(ix=Cn-ox,on=ix-5,tn="right")):c==="leftBottom"?(Cn=a==="horizontal"?ar[1][0]:ar[3][0],In=a==="horizontal"?ar[1][1]:ar[2][1],a==="horizontal"?(ax=In+ox,cn=ax+5,tn="center"):(ix=Cn-ox,on=ix-5,tn="right")):(Cn=(ar[1][0]+ar[2][0])/2,In=(ar[1][1]+ar[2][1])/2,a==="horizontal"?(ax=In+ox,cn=ax+5,tn="center"):(ix=Cn+ox,on=ix+5,tn="left")),a==="horizontal"?(ix=Cn,on=ix):(ax=In,cn=ax),dn=[[Cn,In],[ix,ax]]}Ct.label={linePoints:dn,x:on,y:cn,verticalAlign:"middle",textAlign:tn,inside:en}})}function funnelLayout(t,n){t.eachSeriesByType("funnel",function(a){var s=a.getData(),l=s.mapDimension("value"),u=a.get("sort"),c=getViewRect$2(a,n),d=a.get("orient"),Ct=c.width,ar=c.height,en=getSortedIndices(s,u),tn=c.x,on=c.y,cn=d==="horizontal"?[parsePercent(a.get("minSize"),ar),parsePercent(a.get("maxSize"),ar)]:[parsePercent(a.get("minSize"),Ct),parsePercent(a.get("maxSize"),Ct)],dn=s.getDataExtent(l),Cn=a.get("min"),In=a.get("max");Cn==null&&(Cn=Math.min(dn[0],0)),In==null&&(In=dn[1]);var ix=a.get("funnelAlign"),ax=a.get("gap"),ox=d==="horizontal"?Ct:ar,sx=(ox-ax*(s.count()-1))/s.count(),ux=function(xx,_x){if(d==="horizontal"){var Ex=s.get(l,xx)||0,Tx=linearMap$2(Ex,[Cn,In],cn,!0),Cx=void 0;switch(ix){case"top":Cx=on;break;case"center":Cx=on+(ar-Tx)/2;break;case"bottom":Cx=on+(ar-Tx);break}return[[_x,Cx],[_x,Cx+Tx]]}var Mx=s.get(l,xx)||0,Ax=linearMap$2(Mx,[Cn,In],cn,!0),Nx;switch(ix){case"left":Nx=tn;break;case"center":Nx=tn+(Ct-Ax)/2;break;case"right":Nx=tn+Ct-Ax;break}return[[Nx,_x],[Nx+Ax,_x]]};u==="ascending"&&(sx=-sx,ax=-ax,d==="horizontal"?tn+=Ct:on+=ar,en=en.reverse());for(var cx=0;cx<en.length;cx++){var hx=en[cx],gx=en[cx+1],fx=s.getItemModel(hx);if(d==="horizontal"){var dx=fx.get(["itemStyle","width"]);dx==null?dx=sx:(dx=parsePercent(dx,Ct),u==="ascending"&&(dx=-dx));var mx=ux(hx,tn),vx=ux(gx,tn+dx);tn+=dx+ax,s.setItemLayout(hx,{points:mx.concat(vx.slice().reverse())})}else{var bx=fx.get(["itemStyle","height"]);bx==null?bx=sx:(bx=parsePercent(bx,ar),u==="ascending"&&(bx=-bx));var mx=ux(hx,on),vx=ux(gx,on+bx);on+=bx+ax,s.setItemLayout(hx,{points:mx.concat(vx.slice().reverse())})}}labelLayout(s)})}function install$D(t){t.registerChartView(FunnelView),t.registerSeriesModel(FunnelSeriesModel),t.registerLayout(funnelLayout),t.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._dataGroup=new Group$3,a._initialized=!1,a}return n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(a,s,l,u){this._progressiveEls=null;var c=this._dataGroup,d=a.getData(),Ct=this._data,ar=a.coordinateSystem,en=ar.dimensions,tn=makeSeriesScope(a);d.diff(Ct).add(on).update(cn).remove(dn).execute();function on(In){var ix=addEl(d,c,In,en,ar);updateElCommon(ix,d,In,tn)}function cn(In,ix){var ax=Ct.getItemGraphicEl(ix),ox=createLinePoints(d,In,en,ar);d.setItemGraphicEl(In,ax),updateProps$1(ax,{shape:{points:ox}},a,In),saveOldStyle(ax),updateElCommon(ax,d,In,tn)}function dn(In){var ix=Ct.getItemGraphicEl(In);c.remove(ix)}if(!this._initialized){this._initialized=!0;var Cn=createGridClipShape$2(ar,a,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(Cn)}this._data=d},n.prototype.incrementalPrepareRender=function(a,s,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(a,s,l){for(var u=s.getData(),c=s.coordinateSystem,d=c.dimensions,Ct=makeSeriesScope(s),ar=this._progressiveEls=[],en=a.start;en<a.end;en++){var tn=addEl(u,this._dataGroup,en,d,c);tn.incremental=!0,updateElCommon(tn,u,en,Ct),ar.push(tn)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n})(ChartView);function createGridClipShape$2(t,n,a){var s=t.model,l=t.getRect(),u=new Rect$2({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),c=s.get("layout")==="horizontal"?"width":"height";return u.setShape(c,0),initProps(u,{shape:{width:l.width,height:l.height}},n,a),u}function createLinePoints(t,n,a,s){for(var l=[],u=0;u<a.length;u++){var c=a[u],d=t.get(t.mapDimension(c),n);isEmptyValue(d,s.getAxis(c).type)||l.push(s.dataToPoint(d,c))}return l}function addEl(t,n,a,s,l){var u=createLinePoints(t,a,s,l),c=new Polyline$1({shape:{points:u},z2:10});return n.add(c),t.setItemGraphicEl(a,c),c}function makeSeriesScope(t){var n=t.get("smooth",!0);return n===!0&&(n=DEFAULT_SMOOTH),n=numericToNumber(n),eqNaN(n)&&(n=0),{smooth:n}}function updateElCommon(t,n,a,s){t.useStyle(n.getItemVisual(a,"style")),t.style.fill=null,t.setShape("smooth",s.smooth);var l=n.getItemModel(a),u=l.getModel("emphasis");setStatesStylesFromModel(t,l,"lineStyle"),toggleHoverEmphasis(t,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue(t,n){return n==="category"?t==null:t==null||isNaN(t)}var ParallelSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},n.prototype.getRawIndicesByActiveState=function(a){var s=this.coordinateSystem,l=this.getData(),u=[];return s.eachActiveState(l,function(c,d){a===c&&u.push(l.getRawIndex(d))}),u},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n})(SeriesModel);function makeDefaultEncode(t){var n=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(n){var a={};return each$f(n.dimensions,function(s){var l=convertDimNameToNumber(s);a[s]=l}),a}}function convertDimNameToNumber(t){return+t.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(t,n){var a=t.coordinateSystem,s={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(l,u){a.eachActiveState(u,function(c,d){var Ct=s[c];if(c==="normal"&&u.hasItemOption){var ar=u.getItemModel(d).get(opacityAccessPath,!0);ar!=null&&(Ct=ar)}var en=u.ensureUniqueItemVisual(d,"style");en.opacity=Ct},l.start,l.end)}}}};function parallelPreprocessor(t){createParallelIfNeeded(t),mergeAxisOptionFromParallel(t)}function createParallelIfNeeded(t){if(!t.parallel){var n=!1;each$f(t.series,function(a){a&&a.type==="parallel"&&(n=!0)}),n&&(t.parallel=[{}])}}function mergeAxisOptionFromParallel(t){var n=normalizeToArray(t.parallelAxis);each$f(n,function(a){if(isObject$3(a)){var s=a.parallelIndex||0,l=normalizeToArray(t.parallel)[s];l&&l.parallelAxisDefault&&merge(a,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this._model=a,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(u,c){l.getZr().on(c,this._handlers[c]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(a,s){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,u){s.getZr().off(u,l)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},n.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},a))},n.type="parallel",n})(ComponentView),handlers$1={mousedown:function(t){checkTrigger(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var n=this._mouseDownPoint;if(checkTrigger(this,"click")&&n){var a=[t.offsetX,t.offsetY],s=Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2);if(s>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var n=this._model,a=n.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),s=a.behavior;s==="jump"&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand(s==="none"?null:{axisExpandWindow:a.axisExpandWindow,animation:s==="jump"?null:{duration:0}})}}};function checkTrigger(t,n){var a=t._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===n}var ParallelModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(a){var s=this.option;a&&merge(s,a,!0),this._initDimensions()},n.prototype.contains=function(a,s){var l=a.get("parallelIndex");return l!=null&&s.getComponent("parallel",l)===this},n.prototype.setAxisExpand=function(a){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(s){a.hasOwnProperty(s)&&(this.option[s]=a[s])},this)},n.prototype._initDimensions=function(){var a=this.dimensions=[],s=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(u){a.push("dim"+u.get("dim")),s.push(u.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n})(ComponentModel),ParallelAxis=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,a,s,l)||this;return d.type=u||"value",d.axisIndex=c,d}return n.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},n})(Axis);function sliderMove(t,n,a,s,l,u){t=t||0;var c=a[1]-a[0];if(l!=null&&(l=restrict$1(l,[0,c])),u!=null&&(u=Math.max(u,l??0)),s==="all"){var d=Math.abs(n[1]-n[0]);d=restrict$1(d,[0,c]),l=u=restrict$1(d,[l,u]),s=0}n[0]=restrict$1(n[0],a),n[1]=restrict$1(n[1],a);var Ct=getSpanSign(n,s);n[s]+=t;var ar=l||0,en=a.slice();Ct.sign<0?en[0]+=ar:en[1]-=ar,n[s]=restrict$1(n[s],en);var tn;return tn=getSpanSign(n,s),l!=null&&(tn.sign!==Ct.sign||tn.span<l)&&(n[1-s]=n[s]+Ct.sign*l),tn=getSpanSign(n,s),u!=null&&tn.span>u&&(n[1-s]=n[s]+tn.sign*u),n}function getSpanSign(t,n){var a=t[n]-t[1-n];return{span:Math.abs(a),sign:a>0?-1:a<0?1:n?-1:1}}function restrict$1(t,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,t))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=(function(){function t(n,a,s){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,a,s)}return t.prototype._init=function(n,a,s){var l=n.dimensions,u=n.parallelAxisIndex;each$a(l,function(c,d){var Ct=u[d],ar=a.getComponent("parallelAxis",Ct),en=this._axesMap.set(c,new ParallelAxis(c,createScaleByModel$1(ar),[0,0],ar.get("type"),Ct)),tn=en.type==="category";en.onBand=tn&&ar.get("boundaryGap"),en.inverse=ar.get("inverse"),ar.axis=en,en.model=ar,en.coordinateSystem=ar.coordinateSystem=this},this)},t.prototype.update=function(n,a){this._updateAxesFromSeries(this._model,n)},t.prototype.containPoint=function(n){var a=this._makeLayoutInfo(),s=a.axisBase,l=a.layoutBase,u=a.pixelDimIndex,c=n[1-u],d=n[u];return c>=s&&c<=s+a.axisLength&&d>=l&&d<=l+a.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(n,a){a.eachSeries(function(s){if(n.contains(s,a)){var l=s.getData();each$a(this.dimensions,function(u){var c=this._axesMap.get(u);c.scale.unionExtentFromData(l,l.mapDimension(u)),niceScaleExtent(c.scale,c.model)},this)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var n=this._model,a=this._rect,s=["x","y"],l=["width","height"],u=n.get("layout"),c=u==="horizontal"?0:1,d=a[l[c]],Ct=[0,d],ar=this.dimensions.length,en=restrict(n.get("axisExpandWidth"),Ct),tn=restrict(n.get("axisExpandCount")||0,[0,ar]),on=n.get("axisExpandable")&&ar>3&&ar>tn&&tn>1&&en>0&&d>0,cn=n.get("axisExpandWindow"),dn;if(cn)dn=restrict(cn[1]-cn[0],Ct),cn[1]=cn[0]+dn;else{dn=restrict(en*(tn-1),Ct);var Cn=n.get("axisExpandCenter")||mathFloor(ar/2);cn=[en*Cn-dn/2],cn[1]=cn[0]+dn}var In=(d-dn)/(ar-tn);In<3&&(In=0);var ix=[mathFloor(round(cn[0]/en,1))+1,mathCeil(round(cn[1]/en,1))-1],ax=In/en*cn[0];return{layout:u,pixelDimIndex:c,layoutBase:a[s[c]],layoutLength:d,axisBase:a[s[1-c]],axisLength:a[l[1-c]],axisExpandable:on,axisExpandWidth:en,axisCollapseWidth:In,axisExpandWindow:cn,axisCount:ar,winInnerIndices:ix,axisExpandWindow0Pos:ax}},t.prototype._layoutAxes=function(){var n=this._rect,a=this._axesMap,s=this.dimensions,l=this._makeLayoutInfo(),u=l.layout;a.each(function(c){var d=[0,l.axisLength],Ct=c.inverse?1:0;c.setExtent(d[Ct],d[1-Ct])}),each$a(s,function(c,d){var Ct=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(d,l),ar={horizontal:{x:Ct.position,y:l.axisLength},vertical:{x:0,y:Ct.position}},en={horizontal:PI$1/2,vertical:0},tn=[ar[u].x+n.x,ar[u].y+n.y],on=en[u],cn=create$1();rotate(cn,cn,on),translate(cn,cn,tn),this._axesLayout[c]={position:tn,rotation:on,transform:cn,axisNameAvailableWidth:Ct.axisNameAvailableWidth,axisLabelShow:Ct.axisLabelShow,nameTruncateMaxWidth:Ct.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(n){return this._axesMap.get(n)},t.prototype.dataToPoint=function(n,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(n),a)},t.prototype.eachActiveState=function(n,a,s,l){s==null&&(s=0),l==null&&(l=n.count());var u=this._axesMap,c=this.dimensions,d=[],Ct=[];each$f(c,function(In){d.push(n.mapDimension(In)),Ct.push(u.get(In).model)});for(var ar=this.hasAxisBrushed(),en=s;en<l;en++){var tn=void 0;if(!ar)tn="normal";else{tn="active";for(var on=n.getValues(d,en),cn=0,dn=c.length;cn<dn;cn++){var Cn=Ct[cn].getActiveState(on[cn]);if(Cn==="inactive"){tn="inactive";break}}}a(tn,en)}},t.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,a=this._axesMap,s=!1,l=0,u=n.length;l<u;l++)a.get(n[l]).model.getActiveState()!=="normal"&&(s=!0);return s},t.prototype.axisCoordToPoint=function(n,a){var s=this._axesLayout[a];return applyTransform([n,0],s.transform)},t.prototype.getAxisLayout=function(n){return clone$4(this._axesLayout[n])},t.prototype.getSlidedAxisExpandWindow=function(n){var a=this._makeLayoutInfo(),s=a.pixelDimIndex,l=a.axisExpandWindow.slice(),u=l[1]-l[0],c=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:l};var d=n[s]-a.layoutBase-a.axisExpandWindow0Pos,Ct,ar="slide",en=a.axisCollapseWidth,tn=this._model.get("axisExpandSlideTriggerArea"),on=tn[0]!=null;if(en)on&&en&&d<u*tn[0]?(ar="jump",Ct=d-u*tn[2]):on&&en&&d>u*(1-tn[0])?(ar="jump",Ct=d-u*(1-tn[2])):(Ct=d-u*tn[1])>=0&&(Ct=d-u*(1-tn[1]))<=0&&(Ct=0),Ct*=a.axisExpandWidth/en,Ct?sliderMove(Ct,l,c,"all"):ar="none";else{var cn=l[1]-l[0],dn=c[1]*d/cn;l=[mathMax$2(0,dn-cn/2)],l[1]=mathMin$2(c[1],l[0]+cn),l[0]=l[1]-cn}return{axisExpandWindow:l,behavior:ar}},t})();function restrict(t,n){return mathMin$2(mathMax$2(t,n[0]),n[1])}function layoutAxisWithoutExpand(t,n){var a=n.layoutLength/(n.axisCount-1);return{position:a*t,axisNameAvailableWidth:a,axisLabelShow:!0}}function layoutAxisWithExpand(t,n){var a=n.layoutLength,s=n.axisExpandWidth,l=n.axisCount,u=n.axisCollapseWidth,c=n.winInnerIndices,d,Ct=u,ar=!1,en;return t<c[0]?(d=t*u,en=u):t<=c[1]?(d=n.axisExpandWindow0Pos+t*s-n.axisExpandWindow[0],Ct=s,ar=!0):(d=a-(l-1-t)*u,en=u),{position:d,axisNameAvailableWidth:Ct,axisLabelShow:ar,nameTruncateMaxWidth:en}}function createParallelCoordSys(t,n){var a=[];return t.eachComponent("parallel",function(s,l){var u=new Parallel(s,t,n);u.name="parallel_"+l,u.resize(s,n),s.coordinateSystem=u,u.model=s,a.push(u)}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="parallel"){var l=s.getReferringComponents("parallel",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),a}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.activeIntervals=[],a}return n.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(a){var s=this.activeIntervals=clone$4(a);if(s)for(var l=s.length-1;l>=0;l--)asc$2(s[l])},n.prototype.getActiveState=function(a){var s=this.activeIntervals;if(!s.length)return"normal";if(a==null||isNaN(+a))return"inactive";if(s.length===1){var l=s[0];if(l[0]<=a&&a<=l[1])return"active"}else for(var u=0,c=s.length;u<c;u++)if(s[u][0]<=a&&a<=s[u][1])return"active";return"inactive"},n})(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s._track=[],s._covers=[],s._handlers={},s._zr=a,s.group=new Group$3,s._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,u){this._handlers[u]=bind$1(l,this)},s),s}return n.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},n.prototype._doEnableBrush=function(a){var s=this._zr;this._enableGlobalPan||take(s,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,u){s.on(u,l)}),this._brushType=a.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),a,!0)},n.prototype._doDisableBrush=function(){var a=this._zr;release(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,l){a.off(l,s)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(a){if(a&&a.length){var s=this._panels={};each$f(a,function(l){s[l.panelId]=clone$4(l)})}else this._panels=null;return this},n.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var s=this.group;return this._zr.add(s),s.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=s.getLocalTransform(),this},n.prototype.updateCovers=function(a){a=map$1(a,function(on){return merge(clone$4(DEFAULT_BRUSH_OPT),on,!0)});var s="\0-brush-index-",l=this._covers,u=this._covers=[],c=this,d=this._creatingCover;return new DataDiffer(l,a,ar,Ct).add(en).update(en).remove(tn).execute(),this;function Ct(on,cn){return(on.id!=null?on.id:s+cn)+"-"+on.brushType}function ar(on,cn){return Ct(on.__brushOption,cn)}function en(on,cn){var dn=a[on];if(cn!=null&&l[cn]===d)u[on]=l[cn];else{var Cn=u[on]=cn!=null?(l[cn].__brushOption=dn,l[cn]):endCreating(c,createCover(c,dn));updateCoverAfterCreation(c,Cn)}}function tn(on){l[on]!==d&&c.group.remove(l[on])}},n.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n})(Eventful);function createCover(t,n){var a=coverRenderers[n.brushType].createCover(t,n);return a.__brushOption=n,updateZ$1(a,n),t.group.add(a),a}function endCreating(t,n){var a=getCoverRenderer(n);return a.endCreating&&(a.endCreating(t,n),updateZ$1(n,n.__brushOption)),n}function updateCoverShape(t,n){var a=n.__brushOption;getCoverRenderer(n).updateCoverShape(t,n,a.range,a)}function updateZ$1(t,n){var a=n.z;a==null&&(a=COVER_Z),t.traverse(function(s){s.z=a,s.z2=a})}function updateCoverAfterCreation(t,n){getCoverRenderer(n).updateCommon(t,n),updateCoverShape(t,n)}function getCoverRenderer(t){return coverRenderers[t.__brushOption.brushType]}function getPanelByPoint(t,n,a){var s=t._panels;if(!s)return BRUSH_PANEL_GLOBAL;var l,u=t._transform;return each$f(s,function(c){c.isTargetByCursor(n,a,u)&&(l=c)}),l}function getPanelByCover(t,n){var a=t._panels;if(!a)return BRUSH_PANEL_GLOBAL;var s=n.__brushOption.panelId;return s!=null?a[s]:BRUSH_PANEL_GLOBAL}function clearCovers(t){var n=t._covers,a=n.length;return each$f(n,function(s){t.group.remove(s)},t),n.length=0,!!a}function trigger(t,n){var a=map$1(t._covers,function(s){var l=s.__brushOption,u=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:u}});t.trigger("brush",{areas:a,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function shouldShowCover(t){var n=t._track;if(!n.length)return!1;var a=n[n.length-1],s=n[0],l=a[0]-s[0],u=a[1]-s[1],c=mathPow(l*l+u*u,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(t){var n=t.length-1;return n<0&&(n=0),[t[0],t[n]]}function createBaseRectCover(t,n,a,s){var l=new Group$3;return l.add(new Rect$2({name:"main",style:makeStyle(a),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,t,n,l,["n","s","w","e"]),ondragend:curry$1(trigger,n,{isEnd:!0})})),each$f(s,function(u){l.add(new Rect$2({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,t,n,l,u),ondragend:curry$1(trigger,n,{isEnd:!0})}))}),l}function updateBaseRect(t,n,a,s){var l=s.brushStyle.lineWidth||0,u=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),c=a[0][0],d=a[1][0],Ct=c-l/2,ar=d-l/2,en=a[0][1],tn=a[1][1],on=en-u+l/2,cn=tn-u+l/2,dn=en-c,Cn=tn-d,In=dn+l,ix=Cn+l;updateRectShape(t,n,"main",c,d,dn,Cn),s.transformable&&(updateRectShape(t,n,"w",Ct,ar,u,ix),updateRectShape(t,n,"e",on,ar,u,ix),updateRectShape(t,n,"n",Ct,ar,In,u),updateRectShape(t,n,"s",Ct,cn,In,u),updateRectShape(t,n,"nw",Ct,ar,u,u),updateRectShape(t,n,"ne",on,ar,u,u),updateRectShape(t,n,"sw",Ct,cn,u,u),updateRectShape(t,n,"se",on,cn,u,u))}function updateCommon$1(t,n){var a=n.__brushOption,s=a.transformable,l=n.childAt(0);l.useStyle(makeStyle(a)),l.attr({silent:!s,cursor:s?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var c=n.childOfName(u.join("")),d=u.length===1?getGlobalDirection1(t,u[0]):getGlobalDirection2(t,u);c&&c.attr({silent:!s,invisible:!s,cursor:s?CURSOR_MAP[d]+"-resize":null})})}function updateRectShape(t,n,a,s,l,u,c){var d=n.childOfName(a);d&&d.setShape(pointsToRect(clipByPanel(t,n,[[s,l],[s+u,l+c]])))}function makeStyle(t){return defaults({strokeNoScale:!0},t.brushStyle)}function formatRectRange(t,n,a,s){var l=[mathMin$1(t,a),mathMin$1(n,s)],u=[mathMax$1(t,a),mathMax$1(n,s)];return[[l[0],u[0]],[l[1],u[1]]]}function getTransform(t){return getTransform$1(t.group)}function getGlobalDirection1(t,n){var a={w:"left",e:"right",n:"top",s:"bottom"},s={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(a[n],getTransform(t));return s[l]}function getGlobalDirection2(t,n){var a=[getGlobalDirection1(t,n[0]),getGlobalDirection1(t,n[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function driftRect(t,n,a,s,l,u){var c=a.__brushOption,d=t.toRectRange(c.range),Ct=toLocalDelta(n,l,u);each$f(s,function(ar){var en=DIRECTION_MAP[ar];d[en[0]][en[1]]+=Ct[en[0]]}),c.range=t.fromRectRange(formatRectRange(d[0][0],d[1][0],d[0][1],d[1][1])),updateCoverAfterCreation(n,a),trigger(n,{isEnd:!1})}function driftPolygon(t,n,a,s){var l=n.__brushOption.range,u=toLocalDelta(t,a,s);each$f(l,function(c){c[0]+=u[0],c[1]+=u[1]}),updateCoverAfterCreation(t,n),trigger(t,{isEnd:!1})}function toLocalDelta(t,n,a){var s=t.group,l=s.transformCoordToLocal(n,a),u=s.transformCoordToLocal(0,0);return[l[0]-u[0],l[1]-u[1]]}function clipByPanel(t,n,a){var s=getPanelByCover(t,n);return s&&s!==BRUSH_PANEL_GLOBAL?s.clipPath(a,t._transform):clone$4(a)}function pointsToRect(t){var n=mathMin$1(t[0][0],t[1][0]),a=mathMin$1(t[0][1],t[1][1]),s=mathMax$1(t[0][0],t[1][0]),l=mathMax$1(t[0][1],t[1][1]);return{x:n,y:a,width:s-n,height:l-a}}function resetCursor(t,n,a){if(!(!t._brushType||isOutsideZrArea(t,n.offsetX,n.offsetY))){var s=t._zr,l=t._covers,u=getPanelByPoint(t,n,a);if(!t._dragging)for(var c=0;c<l.length;c++){var d=l[c].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||d.panelId===u.panelId)&&coverRenderers[d.brushType].contain(l[c],a[0],a[1]))return}u&&s.setCursorStyle("crosshair")}}function preventDefault(t){var n=t.event;n.preventDefault&&n.preventDefault()}function mainShapeContain(t,n,a){return t.childOfName("main").contain(n,a)}function updateCoverByMouse(t,n,a,s){var l=t._creatingCover,u=t._creatingPanel,c=t._brushOption,d;if(t._track.push(a.slice()),shouldShowCover(t)||l){if(u&&!l){c.brushMode==="single"&&clearCovers(t);var Ct=clone$4(c);Ct.brushType=determineBrushType(Ct.brushType,u),Ct.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,l=t._creatingCover=createCover(t,Ct),t._covers.push(l)}if(l){var ar=coverRenderers[determineBrushType(t._brushType,u)],en=l.__brushOption;en.range=ar.getCreatingRange(clipByPanel(t,l,t._track)),s&&(endCreating(t,l),ar.updateCommon(t,l)),updateCoverShape(t,l),d={isEnd:s}}}else s&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(t,n,a)&&clearCovers(t)&&(d={isEnd:s,removeOnClick:!0});return d}function determineBrushType(t,n){return t==="auto"?n.defaultBrushType:t}var pointerHandlers={mousedown:function(t){if(this._dragging)handleDragEnd(this,t);else if(!t.target||!t.target.draggable){preventDefault(t);var n=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=getPanelByPoint(this,t,n);a&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(t){var n=t.offsetX,a=t.offsetY,s=this.group.transformCoordToLocal(n,a);if(resetCursor(this,t,s),this._dragging){preventDefault(t);var l=updateCoverByMouse(this,t,s,!1);l&&trigger(this,l)}},mouseup:function(t){handleDragEnd(this,t)}};function handleDragEnd(t,n){if(t._dragging){preventDefault(n);var a=n.offsetX,s=n.offsetY,l=t.group.transformCoordToLocal(a,s),u=updateCoverByMouse(t,n,l,!0);t._dragging=!1,t._track=[],t._creatingCover=null,u&&trigger(t,u)}}function isOutsideZrArea(t,n,a){var s=t._zr;return n<0||n>s.getWidth()||a<0||a>s.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(t,n){function a(s){return s}return createBaseRectCover({toRectRange:a,fromRectRange:a},t,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var n=getTrackEnds(t);return formatRectRange(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(t,n,a,s){updateBaseRect(t,n,a,s)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(t,n){var a=new Group$3;return a.add(new Polyline$1({name:"main",style:makeStyle(n),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,n){n.remove(n.childAt(0)),n.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,t,n),ondragend:curry$1(trigger,t,{isEnd:!0})}))},updateCoverShape:function(t,n,a,s){n.childAt(0).setShape({points:clipByPanel(t,n,a)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(t){return{createCover:function(n,a){return createBaseRectCover({toRectRange:function(s){var l=[s,[0,100]];return t&&l.reverse(),l},fromRectRange:function(s){return s[t]}},n,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(n){var a=getTrackEnds(n),s=mathMin$1(a[0][t],a[1][t]),l=mathMax$1(a[0][t],a[1][t]);return[s,l]},updateCoverShape:function(n,a,s,l){var u,c=getPanelByCover(n,a);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)u=c.getLinearBrushOtherExtent(t);else{var d=n._zr;u=[0,[d.getWidth(),d.getHeight()][1-t]]}var Ct=[s,u];t&&Ct.reverse(),updateBaseRect(n,a,Ct,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(t){return t=normalizeRect(t),function(n){return clipPointsByRect(n,t)}}function makeLinearBrushOtherExtent(t,n){return t=normalizeRect(t),function(a){var s=n??a,l=s?t.width:t.height,u=s?t.x:t.y;return[u,u+(l||0)]}}function makeRectIsTargetByCursor(t,n,a){var s=normalizeRect(t);return function(l,u){return s.contain(u[0],u[1])&&!onIrrelevantElement(l,n,a)}}function normalizeRect(t){return BoundingRect.create(t)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){t.prototype.init.apply(this,arguments),(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this))},n.prototype.render=function(a,s,l,u){if(!fromAxisAreaSelect(a,s,u)){this.axisModel=a,this.api=l,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var d=getCoordSysModel(a,s),Ct=d.coordinateSystem,ar=a.getAreaSelectStyle(),en=ar.width,tn=a.axis.dim,on=Ct.getAxisLayout(tn),cn=extend({strokeContainThreshold:en},on),dn=new AxisBuilder(a,cn);each$f(elementList$1,dn.add,dn),this._axisGroup.add(dn.getGroup()),this._refreshBrushController(cn,ar,a,d,en,l),groupTransition(c,this._axisGroup,a)}}},n.prototype._refreshBrushController=function(a,s,l,u,c,d){var Ct=l.axis.getExtent(),ar=Ct[1]-Ct[0],en=Math.min(30,Math.abs(ar)*.1),tn=BoundingRect.create({x:Ct[0],y:-c/2,width:ar,height:c});tn.x-=en,tn.width+=2*en,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(tn),isTargetByCursor:makeRectIsTargetByCursor(tn,d,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(tn,0)}]).enableBrush({brushType:"lineX",brushStyle:s,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},n.prototype._onBrush=function(a){var s=a.areas,l=this.axisModel,u=l.axis,c=map$1(s,function(d){return[u.coordToData(d.range[0],!0),u.coordToData(d.range[1],!0)]});(!l.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:c})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n})(ComponentView);function fromAxisAreaSelect(t,n,a){return a&&a.type==="axisAreaSelect"&&n.findComponents({mainType:"parallelAxis",query:a})[0]===t}function getCoverInfoList(t){var n=t.axis;return map$1(t.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(a[0],!0),n.dataToCoord(a[1],!0)]}})}function getCoordSysModel(t,n){return n.getComponent("parallel",t.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(t){t.registerAction(actionInfo,function(n,a){a.eachComponent({mainType:"parallelAxis",query:n},function(s){s.axis.model.setActiveIntervals(n.intervals)})}),t.registerAction("parallelAxisExpand",function(n,a){a.eachComponent({mainType:"parallel",query:n},function(s){s.setAxisExpand(n)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(t){t.registerComponentView(ParallelView),t.registerComponentModel(ParallelModel),t.registerCoordinateSystem("parallel",parallelCoordSysCreator),t.registerPreprocessor(parallelPreprocessor),t.registerComponentModel(ParallelAxisModel),t.registerComponentView(ParallelAxisView),axisModelCreator(t,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(t)}function install$B(t){use(install$C),t.registerChartView(ParallelView$1),t.registerSeriesModel(ParallelSeriesModel),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t})(),SankeyPath=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SankeyPathShape},n.prototype.buildPath=function(a,s){var l=s.extent;a.moveTo(s.x1,s.y1),a.bezierCurveTo(s.cpx1,s.cpy1,s.cpx2,s.cpy2,s.x2,s.y2),s.orient==="vertical"?(a.lineTo(s.x2+l,s.y2),a.bezierCurveTo(s.cpx2+l,s.cpy2,s.cpx1+l,s.cpy1,s.x1+l,s.y1)):(a.lineTo(s.x2,s.y2+l),a.bezierCurveTo(s.cpx2,s.cpy2+l,s.cpx1,s.cpy1+l,s.x1,s.y1+l)),a.closePath()},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n})(Path),SankeyView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._focusAdjacencyDisabled=!1,a}return n.prototype.render=function(a,s,l){var u=this,c=a.getGraph(),d=this.group,Ct=a.layoutInfo,ar=Ct.width,en=Ct.height,tn=a.getData(),on=a.getData("edge"),cn=a.get("orient");this._model=a,d.removeAll(),d.x=Ct.x,d.y=Ct.y,c.eachEdge(function(dn){var Cn=new SankeyPath,In=getECData(Cn);In.dataIndex=dn.dataIndex,In.seriesIndex=a.seriesIndex,In.dataType="edge";var ix=dn.getModel(),ax=ix.getModel("lineStyle"),ox=ax.get("curveness"),sx=dn.node1.getLayout(),ux=dn.node1.getModel(),cx=ux.get("localX"),hx=ux.get("localY"),gx=dn.node2.getLayout(),fx=dn.node2.getModel(),dx=fx.get("localX"),mx=fx.get("localY"),vx=dn.getLayout(),bx,xx,_x,Ex,Tx,Cx,Mx,Ax;Cn.shape.extent=Math.max(1,vx.dy),Cn.shape.orient=cn,cn==="vertical"?(bx=(cx!=null?cx*ar:sx.x)+vx.sy,xx=(hx!=null?hx*en:sx.y)+sx.dy,_x=(dx!=null?dx*ar:gx.x)+vx.ty,Ex=mx!=null?mx*en:gx.y,Tx=bx,Cx=xx*(1-ox)+Ex*ox,Mx=_x,Ax=xx*ox+Ex*(1-ox)):(bx=(cx!=null?cx*ar:sx.x)+sx.dx,xx=(hx!=null?hx*en:sx.y)+vx.sy,_x=dx!=null?dx*ar:gx.x,Ex=(mx!=null?mx*en:gx.y)+vx.ty,Tx=bx*(1-ox)+_x*ox,Cx=xx,Mx=bx*ox+_x*(1-ox),Ax=Ex),Cn.setShape({x1:bx,y1:xx,x2:_x,y2:Ex,cpx1:Tx,cpy1:Cx,cpx2:Mx,cpy2:Ax}),Cn.useStyle(ax.getItemStyle()),applyCurveStyle(Cn.style,cn,dn);var Nx=""+ix.get("value"),Ux=getLabelStatesModels(ix,"edgeLabel");setLabelStyle(Cn,Ux,{labelFetcher:{getFormattedLabel:function(Px,$x,Lx,zx,qx,jx){return a.getFormattedLabel(Px,$x,"edge",zx,retrieve3(qx,Ux.normal&&Ux.normal.get("formatter"),Nx),jx)}},labelDataIndex:dn.dataIndex,defaultText:Nx}),Cn.setTextConfig({position:"inside"});var Rx=ix.getModel("emphasis");setStatesStylesFromModel(Cn,ix,"lineStyle",function(Px){var $x=Px.getItemStyle();return applyCurveStyle($x,cn,dn),$x}),d.add(Cn),on.setItemGraphicEl(dn.dataIndex,Cn);var Ox=Rx.get("focus");toggleHoverEmphasis(Cn,Ox==="adjacency"?dn.getAdjacentDataIndices():Ox==="trajectory"?dn.getTrajectoryDataIndices():Ox,Rx.get("blurScope"),Rx.get("disabled"))}),c.eachNode(function(dn){var Cn=dn.getLayout(),In=dn.getModel(),ix=In.get("localX"),ax=In.get("localY"),ox=In.getModel("emphasis"),sx=In.get(["itemStyle","borderRadius"])||0,ux=new Rect$2({shape:{x:ix!=null?ix*ar:Cn.x,y:ax!=null?ax*en:Cn.y,width:Cn.dx,height:Cn.dy,r:sx},style:In.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(ux,getLabelStatesModels(In),{labelFetcher:{getFormattedLabel:function(hx,gx){return a.getFormattedLabel(hx,gx,"node")}},labelDataIndex:dn.dataIndex,defaultText:dn.id}),ux.disableLabelAnimation=!0,ux.setStyle("fill",dn.getVisual("color")),ux.setStyle("decal",dn.getVisual("style").decal),setStatesStylesFromModel(ux,In),d.add(ux),tn.setItemGraphicEl(dn.dataIndex,ux),getECData(ux).dataType="node";var cx=ox.get("focus");toggleHoverEmphasis(ux,cx==="adjacency"?dn.getAdjacentDataIndices():cx==="trajectory"?dn.getTrajectoryDataIndices():cx,ox.get("blurScope"),ox.get("disabled"))}),tn.eachItemGraphicEl(function(dn,Cn){var In=tn.getItemModel(Cn);In.get("draggable")&&(dn.drift=function(ix,ax){u._focusAdjacencyDisabled=!0,this.shape.x+=ix,this.shape.y+=ax,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:tn.getRawIndex(Cn),localX:this.shape.x/ar,localY:this.shape.y/en})},dn.ondragend=function(){u._focusAdjacencyDisabled=!1},dn.draggable=!0,dn.cursor="move")}),!this._data&&a.isAnimationEnabled()&&d.setClipPath(createGridClipShape$1(d.getBoundingRect(),a,function(){d.removeClipPath()})),this._data=a.getData()},n.prototype.dispose=function(){},n.type="sankey",n})(ChartView);function applyCurveStyle(t,n,a){switch(t.fill){case"source":t.fill=a.node1.getVisual("color"),t.decal=a.node1.getVisual("style").decal;break;case"target":t.fill=a.node2.getVisual("color"),t.decal=a.node2.getVisual("style").decal;break;case"gradient":var s=a.node1.getVisual("color"),l=a.node2.getVisual("color");isString$1(s)&&isString$1(l)&&(t.fill=new LinearGradient(0,0,+(n==="horizontal"),+(n==="vertical"),[{color:s,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(t,n,a){var s=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(s,{shape:{width:t.width+20}},n,a),s}var SankeySeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){var l=a.edges||a.links||[],u=a.data||a.nodes||[],c=a.levels||[];this.levelModels=[];for(var d=this.levelModels,Ct=0;Ct<c.length;Ct++)c[Ct].depth!=null&&c[Ct].depth>=0&&(d[c[Ct].depth]=new Model(c[Ct],this,s));var ar=createGraphFromNodeEdge(u,l,this,!0,en);return ar.data;function en(tn,on){tn.wrapMethod("getItemModel",function(cn,dn){var Cn=cn.parentModel,In=Cn.getData().getItemLayout(dn);if(In){var ix=In.depth,ax=Cn.levelModels[ix];ax&&(cn.parentModel=ax)}return cn}),on.wrapMethod("getItemModel",function(cn,dn){var Cn=cn.parentModel,In=Cn.getGraph().getEdgeByIndex(dn),ix=In.node1.getLayout();if(ix){var ax=ix.depth,ox=Cn.levelModels[ax];ox&&(cn.parentModel=ox)}return cn})}},n.prototype.setNodePosition=function(a,s){var l=this.option.data||this.option.nodes,u=l[a];u.localX=s[0],u.localY=s[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(a,s,l){function u(cn){return isNaN(cn)||cn==null}if(l==="edge"){var c=this.getDataParams(a,l),d=c.data,Ct=c.value,ar=d.source+" -- "+d.target;return createTooltipMarkup("nameValue",{name:ar,value:Ct,noValue:u(Ct)})}else{var en=this.getGraph().getNodeByIndex(a),tn=en.getLayout().value,on=this.getDataParams(a,l).data.name;return createTooltipMarkup("nameValue",{name:on!=null?on+"":null,value:tn,noValue:u(tn)})}},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(a,s){var l=t.prototype.getDataParams.call(this,a,s);if(l.value==null&&s==="node"){var u=this.getGraph().getNodeByIndex(a),c=u.getLayout().value;l.value=c}return l},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n})(SeriesModel);function sankeyLayout(t,n){t.eachSeriesByType("sankey",function(a){var s=a.get("nodeWidth"),l=a.get("nodeGap"),u=getViewRect$1(a,n);a.layoutInfo=u;var c=u.width,d=u.height,Ct=a.getGraph(),ar=Ct.nodes,en=Ct.edges;computeNodeValues(ar);var tn=filter(ar,function(Cn){return Cn.getLayout().value===0}),on=tn.length!==0?0:a.get("layoutIterations"),cn=a.get("orient"),dn=a.get("nodeAlign");layoutSankey(ar,en,s,l,c,d,on,cn,dn)})}function getViewRect$1(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function layoutSankey(t,n,a,s,l,u,c,d,Ct){computeNodeBreadths(t,n,a,l,u,d,Ct),computeNodeDepths(t,n,u,l,s,c,d),computeEdgeDepths(t,d)}function computeNodeValues(t){each$f(t,function(n){var a=sum(n.outEdges,getEdgeValue),s=sum(n.inEdges,getEdgeValue),l=n.getValue()||0,u=Math.max(a,s,l);n.setLayout({value:u},!0)})}function computeNodeBreadths(t,n,a,s,l,u,c){for(var d=[],Ct=[],ar=[],en=[],tn=0,on=0;on<n.length;on++)d[on]=1;for(var on=0;on<t.length;on++)Ct[on]=t[on].inEdges.length,Ct[on]===0&&ar.push(t[on]);for(var cn=-1;ar.length;){for(var dn=0;dn<ar.length;dn++){var Cn=ar[dn],In=Cn.hostGraph.data.getRawDataItem(Cn.dataIndex),ix=In.depth!=null&&In.depth>=0;ix&&In.depth>cn&&(cn=In.depth),Cn.setLayout({depth:ix?In.depth:tn},!0),u==="vertical"?Cn.setLayout({dy:a},!0):Cn.setLayout({dx:a},!0);for(var ax=0;ax<Cn.outEdges.length;ax++){var ox=Cn.outEdges[ax],sx=n.indexOf(ox);d[sx]=0;var ux=ox.node2,cx=t.indexOf(ux);--Ct[cx]===0&&en.indexOf(ux)<0&&en.push(ux)}}++tn,ar=en,en=[]}for(var on=0;on<d.length;on++)if(d[on]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var hx=cn>tn-1?cn:tn-1;c&&c!=="left"&&adjustNodeWithNodeAlign(t,c,u,hx);var gx=u==="vertical"?(l-a)/hx:(s-a)/hx;scaleNodeBreadths(t,gx,u)}function isNodeDepth(t){var n=t.hostGraph.data.getRawDataItem(t.dataIndex);return n.depth!=null&&n.depth>=0}function adjustNodeWithNodeAlign(t,n,a,s){if(n==="right"){for(var l=[],u=t,c=0;u.length;){for(var d=0;d<u.length;d++){var Ct=u[d];Ct.setLayout({skNodeHeight:c},!0);for(var ar=0;ar<Ct.inEdges.length;ar++){var en=Ct.inEdges[ar];l.indexOf(en.node1)<0&&l.push(en.node1)}}u=l,l=[],++c}each$f(t,function(tn){isNodeDepth(tn)||tn.setLayout({depth:Math.max(0,s-tn.getLayout().skNodeHeight)},!0)})}else n==="justify"&&moveSinksRight(t,s)}function moveSinksRight(t,n){each$f(t,function(a){!isNodeDepth(a)&&!a.outEdges.length&&a.setLayout({depth:n},!0)})}function scaleNodeBreadths(t,n,a){each$f(t,function(s){var l=s.getLayout().depth*n;a==="vertical"?s.setLayout({y:l},!0):s.setLayout({x:l},!0)})}function computeNodeDepths(t,n,a,s,l,u,c){var d=prepareNodesByBreadth(t,c);initializeNodeDepth(d,n,a,s,l,c),resolveCollisions(d,l,a,s,c);for(var Ct=1;u>0;u--)Ct*=.99,relaxRightToLeft(d,Ct,c),resolveCollisions(d,l,a,s,c),relaxLeftToRight(d,Ct,c),resolveCollisions(d,l,a,s,c)}function prepareNodesByBreadth(t,n){var a=[],s=n==="vertical"?"y":"x",l=groupData(t,function(u){return u.getLayout()[s]});return l.keys.sort(function(u,c){return u-c}),each$f(l.keys,function(u){a.push(l.buckets.get(u))}),a}function initializeNodeDepth(t,n,a,s,l,u){var c=1/0;each$f(t,function(d){var Ct=d.length,ar=0;each$f(d,function(tn){ar+=tn.getLayout().value});var en=u==="vertical"?(s-(Ct-1)*l)/ar:(a-(Ct-1)*l)/ar;en<c&&(c=en)}),each$f(t,function(d){each$f(d,function(Ct,ar){var en=Ct.getLayout().value*c;u==="vertical"?(Ct.setLayout({x:ar},!0),Ct.setLayout({dx:en},!0)):(Ct.setLayout({y:ar},!0),Ct.setLayout({dy:en},!0))})}),each$f(n,function(d){var Ct=+d.getValue()*c;d.setLayout({dy:Ct},!0)})}function resolveCollisions(t,n,a,s,l){var u=l==="vertical"?"x":"y";each$f(t,function(c){c.sort(function(Cn,In){return Cn.getLayout()[u]-In.getLayout()[u]});for(var d,Ct,ar,en=0,tn=c.length,on=l==="vertical"?"dx":"dy",cn=0;cn<tn;cn++)Ct=c[cn],ar=en-Ct.getLayout()[u],ar>0&&(d=Ct.getLayout()[u]+ar,l==="vertical"?Ct.setLayout({x:d},!0):Ct.setLayout({y:d},!0)),en=Ct.getLayout()[u]+Ct.getLayout()[on]+n;var dn=l==="vertical"?s:a;if(ar=en-n-dn,ar>0){d=Ct.getLayout()[u]-ar,l==="vertical"?Ct.setLayout({x:d},!0):Ct.setLayout({y:d},!0),en=d;for(var cn=tn-2;cn>=0;--cn)Ct=c[cn],ar=Ct.getLayout()[u]+Ct.getLayout()[on]+n-en,ar>0&&(d=Ct.getLayout()[u]-ar,l==="vertical"?Ct.setLayout({x:d},!0):Ct.setLayout({y:d},!0)),en=Ct.getLayout()[u]}})}function relaxRightToLeft(t,n,a){each$f(t.slice().reverse(),function(s){each$f(s,function(l){if(l.outEdges.length){var u=sum(l.outEdges,weightedTarget,a)/sum(l.outEdges,getEdgeValue);if(isNaN(u)){var c=l.outEdges.length;u=c?sum(l.outEdges,centerTarget,a)/c:0}if(a==="vertical"){var d=l.getLayout().x+(u-center(l,a))*n;l.setLayout({x:d},!0)}else{var Ct=l.getLayout().y+(u-center(l,a))*n;l.setLayout({y:Ct},!0)}}})})}function weightedTarget(t,n){return center(t.node2,n)*t.getValue()}function centerTarget(t,n){return center(t.node2,n)}function weightedSource(t,n){return center(t.node1,n)*t.getValue()}function centerSource(t,n){return center(t.node1,n)}function center(t,n){return n==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function getEdgeValue(t){return t.getValue()}function sum(t,n,a){for(var s=0,l=t.length,u=-1;++u<l;){var c=+n(t[u],a);isNaN(c)||(s+=c)}return s}function relaxLeftToRight(t,n,a){each$f(t,function(s){each$f(s,function(l){if(l.inEdges.length){var u=sum(l.inEdges,weightedSource,a)/sum(l.inEdges,getEdgeValue);if(isNaN(u)){var c=l.inEdges.length;u=c?sum(l.inEdges,centerSource,a)/c:0}if(a==="vertical"){var d=l.getLayout().x+(u-center(l,a))*n;l.setLayout({x:d},!0)}else{var Ct=l.getLayout().y+(u-center(l,a))*n;l.setLayout({y:Ct},!0)}}})})}function computeEdgeDepths(t,n){var a=n==="vertical"?"x":"y";each$f(t,function(s){s.outEdges.sort(function(l,u){return l.node2.getLayout()[a]-u.node2.getLayout()[a]}),s.inEdges.sort(function(l,u){return l.node1.getLayout()[a]-u.node1.getLayout()[a]})}),each$f(t,function(s){var l=0,u=0;each$f(s.outEdges,function(c){c.setLayout({sy:l},!0),l+=c.getLayout().dy}),each$f(s.inEdges,function(c){c.setLayout({ty:u},!0),u+=c.getLayout().dy})})}function sankeyVisual(t){t.eachSeriesByType("sankey",function(n){var a=n.getGraph(),s=a.nodes,l=a.edges;if(s.length){var u=1/0,c=-1/0;each$f(s,function(d){var Ct=d.getLayout().value;Ct<u&&(u=Ct),Ct>c&&(c=Ct)}),each$f(s,function(d){var Ct=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:n.get("color")}),ar=Ct.mapValueToVisual(d.getLayout().value),en=d.getModel().get(["itemStyle","color"]);en!=null?(d.setVisual("color",en),d.setVisual("style",{fill:en})):(d.setVisual("color",ar),d.setVisual("style",{fill:ar}))})}l.length&&each$f(l,function(d){var Ct=d.getModel().get("lineStyle");d.setVisual("style",Ct)})})}function install$A(t){t.registerChartView(SankeyView),t.registerSeriesModel(SankeySeriesModel),t.registerLayout(sankeyLayout),t.registerVisual(sankeyVisual),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"sankey",query:n},function(s){s.setNodePosition(n.dataIndex,[n.localX,n.localY])})})}var WhiskerBoxCommonMixin=(function(){function t(){}return t.prototype._hasEncodeRule=function(n){var a=this.getEncode();return a&&a.get(n)!=null},t.prototype.getInitialData=function(n,a){var s,l=a.getComponent("xAxis",this.get("xAxisIndex")),u=a.getComponent("yAxis",this.get("yAxisIndex")),c=l.get("type"),d=u.get("type"),Ct;c==="category"?(n.layout="horizontal",s=l.getOrdinalMeta(),Ct=!this._hasEncodeRule("x")):d==="category"?(n.layout="vertical",s=u.getOrdinalMeta(),Ct=!this._hasEncodeRule("y")):n.layout=n.layout||"horizontal";var ar=["x","y"],en=n.layout==="horizontal"?0:1,tn=this._baseAxisDim=ar[en],on=ar[1-en],cn=[l,u],dn=cn[en].get("type"),Cn=cn[1-en].get("type"),In=n.data;if(In&&Ct){var ix=[];each$f(In,function(sx,ux){var cx;isArray$1(sx)?(cx=sx.slice(),sx.unshift(ux)):isArray$1(sx.value)?(cx=extend({},sx),cx.value=cx.value.slice(),sx.value.unshift(ux)):cx=sx,ix.push(cx)}),n.data=ix}var ax=this.defaultValueDimensions,ox=[{name:tn,type:getDimensionTypeByAxis(dn),ordinalMeta:s,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:on,type:getDimensionTypeByAxis(Cn),dimsDef:ax.slice()}];return createSeriesDataSimply(this,{coordDimensions:ox,dimensionsCount:ax.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,ox,this)})},t.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},t})(),BoxplotSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n})(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this.group,d=this._data;this._data||c.removeAll();var Ct=a.get("layout")==="horizontal"?1:0;u.diff(d).add(function(ar){if(u.hasValue(ar)){var en=u.getItemLayout(ar),tn=createNormalBox$1(en,u,ar,Ct,!0);u.setItemGraphicEl(ar,tn),c.add(tn)}}).update(function(ar,en){var tn=d.getItemGraphicEl(en);if(!u.hasValue(ar)){c.remove(tn);return}var on=u.getItemLayout(ar);tn?(saveOldStyle(tn),updateNormalBoxData(on,tn,u,ar)):tn=createNormalBox$1(on,u,ar,Ct),c.add(tn),u.setItemGraphicEl(ar,tn)}).remove(function(ar){var en=d.getItemGraphicEl(ar);en&&c.remove(en)}).execute(),this._data=u},n.prototype.remove=function(a){var s=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(u){u&&s.remove(u)})},n.type="boxplot",n})(ChartView),BoxPathShape=(function(){function t(){}return t})(),BoxPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="boxplotBoxPath",s}return n.prototype.getDefaultShape=function(){return new BoxPathShape},n.prototype.buildPath=function(a,s){var l=s.points,u=0;for(a.moveTo(l[u][0],l[u][1]),u++;u<4;u++)a.lineTo(l[u][0],l[u][1]);for(a.closePath();u<l.length;u++)a.moveTo(l[u][0],l[u][1]),u++,a.lineTo(l[u][0],l[u][1])},n})(Path);function createNormalBox$1(t,n,a,s,l){var u=t.ends,c=new BoxPath({shape:{points:l?transInit$1(u,s,t):u}});return updateNormalBoxData(t,c,n,a,l),c}function updateNormalBoxData(t,n,a,s,l){var u=a.hostModel,c=graphic$1[l?"initProps":"updateProps"];c(n,{shape:{points:t.ends}},u,s),n.useStyle(a.getItemVisual(s,"style")),n.style.strokeNoScale=!0,n.z2=100;var d=a.getItemModel(s),Ct=d.getModel("emphasis");setStatesStylesFromModel(n,d),toggleHoverEmphasis(n,Ct.get("focus"),Ct.get("blurScope"),Ct.get("disabled"))}function transInit$1(t,n,a){return map$1(t,function(s){return s=s.slice(),s[n]=a.initBaseline,s})}var each$9=each$f;function boxplotLayout(t){var n=groupSeriesByAxis(t);each$9(n,function(a){var s=a.seriesModels;s.length&&(calculateBase(a),each$9(s,function(l,u){layoutSingleSeries(l,a.boxOffsetList[u],a.boxWidthList[u])}))})}function groupSeriesByAxis(t){var n=[],a=[];return t.eachSeriesByType("boxplot",function(s){var l=s.getBaseAxis(),u=indexOf(a,l);u<0&&(u=a.length,a[u]=l,n[u]={axis:l,seriesModels:[]}),n[u].seriesModels.push(s)}),n}function calculateBase(t){var n=t.axis,a=t.seriesModels,s=a.length,l=t.boxWidthList=[],u=t.boxOffsetList=[],c=[],d;if(n.type==="category")d=n.getBandWidth();else{var Ct=0;each$9(a,function(dn){Ct=Math.max(Ct,dn.getData().count())});var ar=n.getExtent();d=Math.abs(ar[1]-ar[0])/Ct}each$9(a,function(dn){var Cn=dn.get("boxWidth");isArray$1(Cn)||(Cn=[Cn,Cn]),c.push([parsePercent(Cn[0],d)||0,parsePercent(Cn[1],d)||0])});var en=d*.8-2,tn=en/s*.3,on=(en-tn*(s-1))/s,cn=on/2-en/2;each$9(a,function(dn,Cn){u.push(cn),cn+=tn+on,l.push(Math.min(Math.max(on,c[Cn][0]),c[Cn][1]))})}function layoutSingleSeries(t,n,a){var s=t.coordinateSystem,l=t.getData(),u=a/2,c=t.get("layout")==="horizontal"?0:1,d=1-c,Ct=["x","y"],ar=l.mapDimension(Ct[c]),en=l.mapDimensionsAll(Ct[d]);if(ar==null||en.length<5)return;for(var tn=0;tn<l.count();tn++){var on=l.get(ar,tn),cn=ox(on,en[2],tn),dn=ox(on,en[0],tn),Cn=ox(on,en[1],tn),In=ox(on,en[3],tn),ix=ox(on,en[4],tn),ax=[];sx(ax,Cn,!1),sx(ax,In,!0),ax.push(dn,Cn,ix,In),ux(ax,dn),ux(ax,ix),ux(ax,cn),l.setItemLayout(tn,{initBaseline:cn[d],ends:ax})}function ox(cx,hx,gx){var fx=l.get(hx,gx),dx=[];dx[c]=cx,dx[d]=fx;var mx;return isNaN(cx)||isNaN(fx)?mx=[NaN,NaN]:(mx=s.dataToPoint(dx),mx[c]+=n),mx}function sx(cx,hx,gx){var fx=hx.slice(),dx=hx.slice();fx[c]+=u,dx[c]-=u,gx?cx.push(fx,dx):cx.push(dx,fx)}function ux(cx,hx){var gx=hx.slice(),fx=hx.slice();gx[c]-=u,fx[c]+=u,cx.push(gx,fx)}}function prepareBoxplotData(t,n){n=n||{};for(var a=[],s=[],l=n.boundIQR,u=l==="none"||l===0,c=0;c<t.length;c++){var d=asc$2(t[c].slice()),Ct=quantile(d,.25),ar=quantile(d,.5),en=quantile(d,.75),tn=d[0],on=d[d.length-1],cn=(l??1.5)*(en-Ct),dn=u?tn:Math.max(tn,Ct-cn),Cn=u?on:Math.min(on,en+cn),In=n.itemNameFormatter,ix=isFunction$1(In)?In({value:c}):isString$1(In)?In.replace("{value}",c+""):c+"";a.push([ix,dn,Ct,ar,en,Cn]);for(var ax=0;ax<d.length;ax++){var ox=d[ax];if(ox<dn||ox>Cn){var sx=[ix,ox];s.push(sx)}}}return{boxData:a,outliers:s}}var boxplotTransform={type:"echarts:boxplot",transform:function t(n){var a=n.upstream;if(a.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var s="";throwError(s)}var l=prepareBoxplotData(a.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:l.boxData},{data:l.outliers}]}};function install$z(t){t.registerSeriesModel(BoxplotSeriesModel),t.registerChartView(BoxplotView),t.registerLayout(boxplotLayout),t.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(t,n){return n.get(t>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(t,n){return n.get(t===0?dojiBorderColorQuery:t>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(t,n){if(!n.isSeriesFiltered(t)){var a=t.pipelineContext.large;return!a&&{progress:function(s,l){for(var u;(u=s.next())!=null;){var c=l.getItemModel(u),d=l.getItemLayout(u).sign,Ct=c.getItemStyle();Ct.fill=getColor(d,c),Ct.stroke=getBorderColor(d,c)||Ct.fill;var ar=l.ensureUniqueItemVisual(u,"style");extend(ar,Ct)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},n.prototype.incrementalPrepareRender=function(a,s,l){this._clear(),this._updateDrawMode(a)},n.prototype.incrementalRender=function(a,s,l,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,s):this._incrementalRenderNormal(a,s)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},n.prototype._renderNormal=function(a){var s=a.getData(),l=this._data,u=this.group,c=s.getLayout("isSimpleBox"),d=a.get("clip",!0),Ct=a.coordinateSystem,ar=Ct.getArea&&Ct.getArea();this._data||u.removeAll(),s.diff(l).add(function(en){if(s.hasValue(en)){var tn=s.getItemLayout(en);if(d&&isNormalBoxClipped(ar,tn))return;var on=createNormalBox(tn,en,!0);initProps(on,{shape:{points:tn.ends}},a,en),setBoxCommon(on,s,en,c),u.add(on),s.setItemGraphicEl(en,on)}}).update(function(en,tn){var on=l.getItemGraphicEl(tn);if(!s.hasValue(en)){u.remove(on);return}var cn=s.getItemLayout(en);if(d&&isNormalBoxClipped(ar,cn)){u.remove(on);return}on?(updateProps$1(on,{shape:{points:cn.ends}},a,en),saveOldStyle(on)):on=createNormalBox(cn),setBoxCommon(on,s,en,c),u.add(on),s.setItemGraphicEl(en,on)}).remove(function(en){var tn=l.getItemGraphicEl(en);tn&&u.remove(tn)}).execute(),this._data=s},n.prototype._renderLarge=function(a){this._clear(),createLarge(a,this.group);var s=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;s?this.group.setClipPath(s):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(a,s){for(var l=s.getData(),u=l.getLayout("isSimpleBox"),c;(c=a.next())!=null;){var d=l.getItemLayout(c),Ct=createNormalBox(d);setBoxCommon(Ct,l,c,u),Ct.incremental=!0,this.group.add(Ct),this._progressiveEls.push(Ct)}},n.prototype._incrementalRenderLarge=function(a,s){createLarge(s,this.group,this._progressiveEls,!0)},n.prototype.remove=function(a){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n})(ChartView),NormalBoxPathShape=(function(){function t(){}return t})(),NormalBoxPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="normalCandlestickBox",s}return n.prototype.getDefaultShape=function(){return new NormalBoxPathShape},n.prototype.buildPath=function(a,s){var l=s.points;this.__simpleBox?(a.moveTo(l[4][0],l[4][1]),a.lineTo(l[6][0],l[6][1])):(a.moveTo(l[0][0],l[0][1]),a.lineTo(l[1][0],l[1][1]),a.lineTo(l[2][0],l[2][1]),a.lineTo(l[3][0],l[3][1]),a.closePath(),a.moveTo(l[4][0],l[4][1]),a.lineTo(l[5][0],l[5][1]),a.moveTo(l[6][0],l[6][1]),a.lineTo(l[7][0],l[7][1]))},n})(Path);function createNormalBox(t,n,a){var s=t.ends;return new NormalBoxPath({shape:{points:a?transInit(s,t):s},z2:100})}function isNormalBoxClipped(t,n){for(var a=!0,s=0;s<n.ends.length;s++)if(t.contain(n.ends[s][0],n.ends[s][1])){a=!1;break}return a}function setBoxCommon(t,n,a,s){var l=n.getItemModel(a);t.useStyle(n.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=s,setStatesStylesFromModel(t,l);var u=n.getItemLayout(a).sign;each$f(t.states,function(d,Ct){var ar=l.getModel(Ct),en=getColor(u,ar),tn=getBorderColor(u,ar)||en,on=d.style||(d.style={});en&&(on.fill=en),tn&&(on.stroke=tn)});var c=l.getModel("emphasis");toggleHoverEmphasis(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function transInit(t,n){return map$1(t,function(a){return a=a.slice(),a[1]=n.initBaseline,a})}var LargeBoxPathShape=(function(){function t(){}return t})(),LargeBoxPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="largeCandlestickBox",s}return n.prototype.getDefaultShape=function(){return new LargeBoxPathShape},n.prototype.buildPath=function(a,s){for(var l=s.points,u=0;u<l.length;)if(this.__sign===l[u++]){var c=l[u++];a.moveTo(c,l[u++]),a.lineTo(c,l[u++])}else u+=3},n})(Path);function createLarge(t,n,a,s){var l=t.getData(),u=l.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});n.add(c);var d=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});n.add(d);var Ct=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});n.add(Ct),setLargeStyle(1,c,t),setLargeStyle(-1,d,t),setLargeStyle(0,Ct,t),s&&(c.incremental=!0,d.incremental=!0),a&&a.push(c,d)}function setLargeStyle(t,n,a,s){var l=getBorderColor(t,a)||getColor(t,a),u=a.getModel("itemStyle").getItemStyle(SKIP_PROPS);n.useStyle(u),n.style.fill=null,n.style.stroke=l}var CandlestickSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(a,s,l){var u=s.getItemLayout(a);return u&&l.rect(u.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n})(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(t){!t||!isArray$1(t.series)||each$f(t.series,function(n){isObject$3(n)&&n.type==="k"&&(n.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem,a=t.getData(),s=calculateCandleWidth(t,a),l=0,u=1,c=["x","y"],d=a.getDimensionIndex(a.mapDimension(c[l])),Ct=map$1(a.mapDimensionsAll(c[u]),a.getDimensionIndex,a),ar=Ct[0],en=Ct[1],tn=Ct[2],on=Ct[3];if(a.setLayout({candleWidth:s,isSimpleBox:s<=1.3}),d<0||Ct.length<4)return;return{progress:t.pipelineContext.large?dn:cn};function cn(Cn,In){for(var ix,ax=In.getStore();(ix=Cn.next())!=null;){var ox=ax.get(d,ix),sx=ax.get(ar,ix),ux=ax.get(en,ix),cx=ax.get(tn,ix),hx=ax.get(on,ix),gx=Math.min(sx,ux),fx=Math.max(sx,ux),dx=Tx(gx,ox),mx=Tx(fx,ox),vx=Tx(cx,ox),bx=Tx(hx,ox),xx=[];Cx(xx,mx,0),Cx(xx,dx,1),xx.push(Ax(bx),Ax(mx),Ax(vx),Ax(dx));var _x=In.getItemModel(ix),Ex=!!_x.get(["itemStyle","borderColorDoji"]);In.setItemLayout(ix,{sign:getSign(ax,ix,sx,ux,en,Ex),initBaseline:sx>ux?mx[u]:dx[u],ends:xx,brushRect:Mx(cx,hx,ox)})}function Tx(Nx,Ux){var Rx=[];return Rx[l]=Ux,Rx[u]=Nx,isNaN(Ux)||isNaN(Nx)?[NaN,NaN]:n.dataToPoint(Rx)}function Cx(Nx,Ux,Rx){var Ox=Ux.slice(),Px=Ux.slice();Ox[l]=subPixelOptimize(Ox[l]+s/2,1,!1),Px[l]=subPixelOptimize(Px[l]-s/2,1,!0),Rx?Nx.push(Ox,Px):Nx.push(Px,Ox)}function Mx(Nx,Ux,Rx){var Ox=Tx(Nx,Rx),Px=Tx(Ux,Rx);return Ox[l]-=s/2,Px[l]-=s/2,{x:Ox[0],y:Ox[1],width:s,height:Px[1]-Ox[1]}}function Ax(Nx){return Nx[l]=subPixelOptimize(Nx[l],1),Nx}}function dn(Cn,In){for(var ix=createFloat32Array(Cn.count*4),ax=0,ox,sx=[],ux=[],cx,hx=In.getStore(),gx=!!t.get(["itemStyle","borderColorDoji"]);(cx=Cn.next())!=null;){var fx=hx.get(d,cx),dx=hx.get(ar,cx),mx=hx.get(en,cx),vx=hx.get(tn,cx),bx=hx.get(on,cx);if(isNaN(fx)||isNaN(vx)||isNaN(bx)){ix[ax++]=NaN,ax+=3;continue}ix[ax++]=getSign(hx,cx,dx,mx,en,gx),sx[l]=fx,sx[u]=vx,ox=n.dataToPoint(sx,null,ux),ix[ax++]=ox?ox[0]:NaN,ix[ax++]=ox?ox[1]:NaN,sx[u]=bx,ox=n.dataToPoint(sx,null,ux),ix[ax++]=ox?ox[1]:NaN}In.setLayout("largePoints",ix)}}};function getSign(t,n,a,s,l,u){var c;return a>s?c=-1:a<s?c=1:c=u?0:n>0?t.get(l,n-1)<=s?1:-1:1,c}function calculateCandleWidth(t,n){var a=t.getBaseAxis(),s,l=a.type==="category"?a.getBandWidth():(s=a.getExtent(),Math.abs(s[1]-s[0])/n.count()),u=parsePercent(retrieve2(t.get("barMaxWidth"),l),l),c=parsePercent(retrieve2(t.get("barMinWidth"),1),l),d=t.get("barWidth");return d!=null?parsePercent(d,l):Math.max(Math.min(l/2,u),c)}function install$y(t){t.registerChartView(CandlestickView),t.registerSeriesModel(CandlestickSeriesModel),t.registerPreprocessor(candlestickPreprocessor),t.registerVisual(candlestickVisual),t.registerLayout(candlestickLayout)}function updateRipplePath(t,n){var a=n.rippleEffectColor||n.color;t.eachChild(function(s){s.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?a:null,fill:n.brushType==="fill"?a:null}})})}var EffectSymbol=(function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this,u=new Symbol$1(a,s),c=new Group$3;return l.add(u),l.add(c),l.updateData(a,s),l}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(a){for(var s=a.symbolType,l=a.color,u=a.rippleNumber,c=this.childAt(1),d=0;d<u;d++){var Ct=createSymbol$1(s,-1,-1,2,2,l);Ct.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var ar=-d/u*a.period+a.effectOffset;Ct.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(ar).start(),Ct.animateStyle(!0).when(a.period,{opacity:0}).delay(ar).start(),c.add(Ct)}updateRipplePath(c,a)},n.prototype.updateEffectAnimation=function(a){for(var s=this._effectCfg,l=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],c=0;c<u.length;c++){var d=u[c];if(s[d]!==a[d]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}updateRipplePath(l,a)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},n.prototype.updateData=function(a,s){var l=this,u=a.hostModel;this.childAt(0).updateData(a,s);var c=this.childAt(1),d=a.getItemModel(s),Ct=a.getItemVisual(s,"symbol"),ar=normalizeSymbolSize(a.getItemVisual(s,"symbolSize")),en=a.getItemVisual(s,"style"),tn=en&&en.fill,on=d.getModel("emphasis");c.setScale(ar),c.traverse(function(In){In.setStyle("fill",tn)});var cn=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),ar);cn&&(c.x=cn[0],c.y=cn[1]);var dn=a.getItemVisual(s,"symbolRotate");c.rotation=(dn||0)*Math.PI/180||0;var Cn={};Cn.showEffectOn=u.get("showEffectOn"),Cn.rippleScale=d.get(["rippleEffect","scale"]),Cn.brushType=d.get(["rippleEffect","brushType"]),Cn.period=d.get(["rippleEffect","period"])*1e3,Cn.effectOffset=s/a.count(),Cn.z=u.getShallow("z")||0,Cn.zlevel=u.getShallow("zlevel")||0,Cn.symbolType=Ct,Cn.color=tn,Cn.rippleEffectColor=d.get(["rippleEffect","color"]),Cn.rippleNumber=d.get(["rippleEffect","number"]),Cn.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(Cn):this.startEffectAnimation(Cn),this._effectCfg=Cn):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(In){In==="emphasis"?Cn.showEffectOn!=="render"&&l.startEffectAnimation(Cn):In==="normal"&&Cn.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=Cn,toggleHoverEmphasis(this,on.get("focus"),on.get("blurScope"),on.get("disabled"))},n.prototype.fadeOut=function(a){a&&a()},n})(Group$3),EffectScatterView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},n.prototype.render=function(a,s,l){var u=a.getData(),c=this._symbolDraw;c.updateData(u,{clipShape:this._getClipShape(a)}),this.group.add(c.group)},n.prototype._getClipShape=function(a){var s=a.coordinateSystem,l=s&&s.getArea&&s.getArea();return a.get("clip",!0)?l:null},n.prototype.updateTransform=function(a,s,l){var u=a.getData();this.group.dirty();var c=pointsLayout("").reset(a,s,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(a){var s=a.coordinateSystem;s&&s.getRoamTransform&&(this.group.transform=clone$2(s.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n})(ChartView),EffectScatterSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(a,s,l){return l.point(s.getItemLayout(a))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n})(SeriesModel);function install$x(t){t.registerChartView(EffectScatterView),t.registerSeriesModel(EffectScatterSeriesModel),t.registerLayout(pointsLayout("effectScatter"))}var EffectLine=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u.add(u.createLine(a,s,l)),u._updateEffectSymbol(a,s),u}return n.prototype.createLine=function(a,s,l){return new Line(a,s,l)},n.prototype._updateEffectSymbol=function(a,s){var l=a.getItemModel(s),u=l.getModel("effect"),c=u.get("symbolSize"),d=u.get("symbol");isArray$1(c)||(c=[c,c]);var Ct=a.getItemVisual(s,"style"),ar=u.get("color")||Ct&&Ct.stroke,en=this.childAt(1);this._symbolType!==d&&(this.remove(en),en=createSymbol$1(d,-.5,-.5,1,1,ar),en.z2=100,en.culling=!0,this.add(en)),en&&(en.setStyle("shadowColor",ar),en.setStyle(u.getItemStyle(["color"])),en.scaleX=c[0],en.scaleY=c[1],en.setColor(ar),this._symbolType=d,this._symbolScale=c,this._updateEffectAnimation(a,u,s))},n.prototype._updateEffectAnimation=function(a,s,l){var u=this.childAt(1);if(u){var c=a.getItemLayout(l),d=s.get("period")*1e3,Ct=s.get("loop"),ar=s.get("roundTrip"),en=s.get("constantSpeed"),tn=retrieve(s.get("delay"),function(cn){return cn/a.count()*d/3});if(u.ignore=!0,this._updateAnimationPoints(u,c),en>0&&(d=this._getLineLength(u)/en*1e3),d!==this._period||Ct!==this._loop||ar!==this._roundTrip){u.stopAnimation();var on=void 0;isFunction$1(tn)?on=tn(l):on=tn,u.__t>0&&(on=-d*u.__t),this._animateSymbol(u,d,on,Ct,ar)}this._period=d,this._loop=Ct,this._roundTrip=ar}},n.prototype._animateSymbol=function(a,s,l,u,c){if(s>0){a.__t=0;var d=this,Ct=a.animate("",u).when(c?s*2:s,{__t:c?2:1}).delay(l).during(function(){d._updateSymbolPosition(a)});u||Ct.done(function(){d.remove(a)}),Ct.start()}},n.prototype._getLineLength=function(a){return dist$1(a.__p1,a.__cp1)+dist$1(a.__cp1,a.__p2)},n.prototype._updateAnimationPoints=function(a,s){a.__p1=s[0],a.__p2=s[1],a.__cp1=s[2]||[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]},n.prototype.updateData=function(a,s,l){this.childAt(0).updateData(a,s,l),this._updateEffectSymbol(a,s)},n.prototype._updateSymbolPosition=function(a){var s=a.__p1,l=a.__p2,u=a.__cp1,c=a.__t<1?a.__t:2-a.__t,d=[a.x,a.y],Ct=d.slice(),ar=quadraticAt$1,en=quadraticDerivativeAt;d[0]=ar(s[0],u[0],l[0],c),d[1]=ar(s[1],u[1],l[1],c);var tn=a.__t<1?en(s[0],u[0],l[0],c):en(l[0],u[0],s[0],1-c),on=a.__t<1?en(s[1],u[1],l[1],c):en(l[1],u[1],s[1],1-c);a.rotation=-Math.atan2(on,tn)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(a.__lastT!==void 0&&a.__lastT<a.__t?(a.scaleY=dist$1(Ct,d)*1.05,c===1&&(d[0]=Ct[0]+(d[0]-Ct[0])/2,d[1]=Ct[1]+(d[1]-Ct[1])/2)):a.__lastT===1?a.scaleY=2*dist$1(s,d):a.scaleY=this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=d[0],a.y=d[1]},n.prototype.updateLayout=function(a,s){this.childAt(0).updateLayout(a,s);var l=a.getItemModel(s).getModel("effect");this._updateEffectAnimation(a,l,s)},n})(Group$3),Polyline=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u._createPolyline(a,s,l),u}return n.prototype._createPolyline=function(a,s,l){var u=a.getItemLayout(s),c=new Polyline$1({shape:{points:u}});this.add(c),this._updateCommonStl(a,s,l)},n.prototype.updateData=function(a,s,l){var u=a.hostModel,c=this.childAt(0),d={shape:{points:a.getItemLayout(s)}};updateProps$1(c,d,u,s),this._updateCommonStl(a,s,l)},n.prototype._updateCommonStl=function(a,s,l){var u=this.childAt(0),c=a.getItemModel(s),d=l&&l.emphasisLineStyle,Ct=l&&l.focus,ar=l&&l.blurScope,en=l&&l.emphasisDisabled;if(!l||a.hasItemOption){var tn=c.getModel("emphasis");d=tn.getModel("lineStyle").getLineStyle(),en=tn.get("disabled"),Ct=tn.get("focus"),ar=tn.get("blurScope")}u.useStyle(a.getItemVisual(s,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var on=u.ensureState("emphasis");on.style=d,toggleHoverEmphasis(this,Ct,ar,en)},n.prototype.updateLayout=function(a,s){var l=this.childAt(0);l.setShape("points",a.getItemLayout(s))},n})(Group$3),EffectPolyline=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return n.prototype.createLine=function(a,s,l){return new Polyline(a,s,l)},n.prototype._updateAnimationPoints=function(a,s){this._points=s;for(var l=[0],u=0,c=1;c<s.length;c++){var d=s[c-1],Ct=s[c];u+=dist$1(d,Ct),l.push(u)}if(u===0){this._length=0;return}for(var c=0;c<l.length;c++)l[c]/=u;this._offsets=l,this._length=u},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(a){var s=a.__t<1?a.__t:2-a.__t,l=this._points,u=this._offsets,c=l.length;if(u){var d=this._lastFrame,Ct;if(s<this._lastFramePercent){var ar=Math.min(d+1,c-1);for(Ct=ar;Ct>=0&&!(u[Ct]<=s);Ct--);Ct=Math.min(Ct,c-2)}else{for(Ct=d;Ct<c&&!(u[Ct]>s);Ct++);Ct=Math.min(Ct-1,c-2)}var en=(s-u[Ct])/(u[Ct+1]-u[Ct]),tn=l[Ct],on=l[Ct+1];a.x=tn[0]*(1-en)+en*on[0],a.y=tn[1]*(1-en)+en*on[1];var cn=a.__t<1?on[0]-tn[0]:tn[0]-on[0],dn=a.__t<1?on[1]-tn[1]:tn[1]-on[1];a.rotation=-Math.atan2(dn,cn)-Math.PI/2,this._lastFrame=Ct,this._lastFramePercent=s,a.ignore=!1}},n})(EffectLine),LargeLinesPathShape=(function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t})(),LargeLinesPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LargeLinesPathShape},n.prototype.buildPath=function(a,s){var l=s.segs,u=s.curveness,c;if(s.polyline)for(c=this._off;c<l.length;){var d=l[c++];if(d>0){a.moveTo(l[c++],l[c++]);for(var Ct=1;Ct<d;Ct++)a.lineTo(l[c++],l[c++])}}else for(c=this._off;c<l.length;){var ar=l[c++],en=l[c++],tn=l[c++],on=l[c++];if(a.moveTo(ar,en),u>0){var cn=(ar+tn)/2-(en-on)*u,dn=(en+on)/2-(tn-ar)*u;a.quadraticCurveTo(cn,dn,tn,on)}else a.lineTo(tn,on)}this.incremental&&(this._off=c,this.notClear=!0)},n.prototype.findDataIndex=function(a,s){var l=this.shape,u=l.segs,c=l.curveness,d=this.style.lineWidth;if(l.polyline)for(var Ct=0,ar=0;ar<u.length;){var en=u[ar++];if(en>0)for(var tn=u[ar++],on=u[ar++],cn=1;cn<en;cn++){var dn=u[ar++],Cn=u[ar++];if(containStroke$4(tn,on,dn,Cn,d,a,s))return Ct}Ct++}else for(var Ct=0,ar=0;ar<u.length;){var tn=u[ar++],on=u[ar++],dn=u[ar++],Cn=u[ar++];if(c>0){var In=(tn+dn)/2-(on-Cn)*c,ix=(on+Cn)/2-(dn-tn)*c;if(containStroke$2(tn,on,In,ix,dn,Cn,d,a,s))return Ct}else if(containStroke$4(tn,on,dn,Cn,d,a,s))return Ct;Ct++}return-1},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=l[0],s=l[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,l=s.segs,u=1/0,c=1/0,d=-1/0,Ct=-1/0,ar=0;ar<l.length;){var en=l[ar++],tn=l[ar++];u=Math.min(en,u),d=Math.max(en,d),c=Math.min(tn,c),Ct=Math.max(tn,Ct)}a=this._rect=new BoundingRect(u,c,d,Ct)}return a},n})(Path),LargeLineDraw=(function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n){this._clear();var a=this._create();a.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(a,n)},t.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(n,a){var s=this._newAdded[0],l=a.getLayout("linesPoints"),u=s&&s.shape.segs;if(u&&u.length<2e4){var c=u.length,d=new Float32Array(c+l.length);d.set(u),d.set(l,c),s.setShape({segs:d})}else{this._newAdded=[];var Ct=this._create();Ct.incremental=!0,Ct.setShape({segs:l}),this._setCommon(Ct,a),Ct.__startIndex=n.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(n),this.group.add(n),n},t.prototype._setCommon=function(n,a,s){var l=a.hostModel;n.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),n.useStyle(l.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var u=a.getVisual("style");u&&u.stroke&&n.setStyle("stroke",u.stroke),n.setStyle("fill",null);var c=getECData(n);c.seriesIndex=l.seriesIndex,n.on("mousemove",function(d){c.dataIndex=null;var Ct=n.hoverDataIdx;Ct>0&&(c.dataIndex=Ct+n.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t})(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem;if(n){var a=t.get("polyline"),s=t.pipelineContext.large;return{progress:function(l,u){var c=[];if(s){var d=void 0,Ct=l.end-l.start;if(a){for(var ar=0,en=l.start;en<l.end;en++)ar+=t.getLineCoordsCount(en);d=new Float32Array(Ct+ar*2)}else d=new Float32Array(Ct*4);for(var tn=0,on=[],en=l.start;en<l.end;en++){var cn=t.getLineCoords(en,c);a&&(d[tn++]=cn);for(var dn=0;dn<cn;dn++)on=n.dataToPoint(c[dn],!1,on),d[tn++]=on[0],d[tn++]=on[1]}u.setLayout("linesPoints",d)}else for(var en=l.start;en<l.end;en++){var Cn=u.getItemModel(en),cn=t.getLineCoords(en,c),In=[];if(a)for(var ix=0;ix<cn;ix++)In.push(n.dataToPoint(c[ix]));else{In[0]=n.dataToPoint(c[0]),In[1]=n.dataToPoint(c[1]);var ax=Cn.get(["lineStyle","curveness"]);+ax&&(In[2]=[(In[0][0]+In[1][0])/2-(In[0][1]-In[1][1])*ax,(In[0][1]+In[1][1])/2-(In[1][0]-In[0][0])*ax])}u.setItemLayout(en,In)}}}}}},LinesView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._updateLineDraw(u,a),d=a.get("zlevel"),Ct=a.get(["effect","trailLength"]),ar=l.getZr(),en=ar.painter.getType()==="svg";en||ar.painter.getLayer(d).clear(!0),this._lastZlevel!=null&&!en&&ar.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&Ct>0&&(en||ar.configLayer(d,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(Ct/10+.9,1),0)})),c.updateData(u);var tn=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a);tn?this.group.setClipPath(tn):this.group.removeClipPath(),this._lastZlevel=d,this._finished=!0},n.prototype.incrementalPrepareRender=function(a,s,l){var u=a.getData(),c=this._updateLineDraw(u,a);c.incrementalPrepareUpdate(u),this._clearLayer(l),this._finished=!1},n.prototype.incrementalRender=function(a,s,l){this._lineDraw.incrementalUpdate(a,s.getData()),this._finished=a.end===s.getData().count()},n.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},n.prototype.updateTransform=function(a,s,l){var u=a.getData(),c=a.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var d=linesLayout.reset(a,s,l);d.progress&&d.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(l)},n.prototype._updateLineDraw=function(a,s){var l=this._lineDraw,u=this._showEffect(s),c=!!s.get("polyline"),d=s.pipelineContext,Ct=d.large;return(!l||u!==this._hasEffet||c!==this._isPolyline||Ct!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=Ct?new LargeLineDraw:new LineDraw(c?u?EffectPolyline:Polyline:u?EffectLine:Line),this._hasEffet=u,this._isPolyline=c,this._isLargeDraw=Ct),this.group.add(l.group),l},n.prototype._showEffect=function(a){return!!a.get(["effect","show"])},n.prototype._clearLayer=function(a){var s=a.getZr(),l=s.painter.getType()==="svg";!l&&this._lastZlevel!=null&&s.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(a,s){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(s)},n.prototype.dispose=function(a,s){this.remove(a,s)},n.type="lines",n})(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(t){var n=t.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(t.data=map$1(n,function(a){var s=[a[0].coord,a[1].coord],l={coords:s};return a[0].name&&(l.fromName=a[0].name),a[1].name&&(l.toName=a[1].name),mergeAll([l,a[0],a[1]])}))}var LinesSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.init=function(a){a.data=a.data||[],compatEc2(a);var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count)),t.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(a){if(compatEc2(a),a.data){var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count))}t.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(a){var s=this._processFlatCoordsArray(a.data);s.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,s.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,s.flatCoordsOffset)):(this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset),a.data=new Float32Array(s.count)),this.getRawData().appendData(a.data)},n.prototype._getCoordsFromItemModel=function(a){var s=this.getData().getItemModel(a),l=s.option instanceof Array?s.option:s.getShallow("coords");return l},n.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[a*2+1]:this._getCoordsFromItemModel(a).length},n.prototype.getLineCoords=function(a,s){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[a*2],u=this._flatCoordsOffset[a*2+1],c=0;c<u;c++)s[c]=s[c]||[],s[c][0]=this._flatCoords[l+c*2],s[c][1]=this._flatCoords[l+c*2+1];return u}else{for(var d=this._getCoordsFromItemModel(a),c=0;c<d.length;c++)s[c]=s[c]||[],s[c][0]=d[c][0],s[c][1]=d[c][1];return d.length}},n.prototype._processFlatCoordsArray=function(a){var s=0;if(this._flatCoords&&(s=this._flatCoords.length),isNumber(a[0])){for(var l=a.length,u=new Uint32Arr(l),c=new Float64Arr(l),d=0,Ct=0,ar=0,en=0;en<l;){ar++;var tn=a[en++];u[Ct++]=d+s,u[Ct++]=tn;for(var on=0;on<tn;on++){var cn=a[en++],dn=a[en++];c[d++]=cn,c[d++]=dn}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,Ct),flatCoords:c,count:ar}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},n.prototype.getInitialData=function(a,s){var l=new SeriesData(["value"],this);return l.hasItemOption=!1,l.initData(a.data,[],function(u,c,d,Ct){if(u instanceof Array)return NaN;l.hasItemOption=!0;var ar=u.value;if(ar!=null)return ar instanceof Array?ar[Ct]:ar}),l},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=u.getItemModel(a),d=c.get("name");if(d)return d;var Ct=c.get("fromName"),ar=c.get("toName"),en=[];return Ct!=null&&en.push(Ct),ar!=null&&en.push(ar),createTooltipMarkup("nameValue",{name:en.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?1e4:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?2e4:this.get("progressiveThreshold"))},n.prototype.getZLevelKey=function(){var a=this.getModel("effect"),s=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&s>0?s+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n})(SeriesModel);function normalize(t){return t instanceof Array||(t=[t,t]),t}var linesVisual={seriesType:"lines",reset:function(t){var n=normalize(t.get("symbol")),a=normalize(t.get("symbolSize")),s=t.getData();s.setVisual("fromSymbol",n&&n[0]),s.setVisual("toSymbol",n&&n[1]),s.setVisual("fromSymbolSize",a&&a[0]),s.setVisual("toSymbolSize",a&&a[1]);function l(u,c){var d=u.getItemModel(c),Ct=normalize(d.getShallow("symbol",!0)),ar=normalize(d.getShallow("symbolSize",!0));Ct[0]&&u.setItemVisual(c,"fromSymbol",Ct[0]),Ct[1]&&u.setItemVisual(c,"toSymbol",Ct[1]),ar[0]&&u.setItemVisual(c,"fromSymbolSize",ar[0]),ar[1]&&u.setItemVisual(c,"toSymbolSize",ar[1])}return{dataEach:s.hasItemOption?l:null}}};function install$w(t){t.registerChartView(LinesView),t.registerSeriesModel(LinesSeriesModel),t.registerLayout(linesLayout),t.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=(function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=platformApi.createCanvas();this.canvas=n}return t.prototype.update=function(n,a,s,l,u,c){var d=this._getBrush(),Ct=this._getGradient(u,"inRange"),ar=this._getGradient(u,"outOfRange"),en=this.pointSize+this.blurSize,tn=this.canvas,on=tn.getContext("2d"),cn=n.length;tn.width=a,tn.height=s;for(var dn=0;dn<cn;++dn){var Cn=n[dn],In=Cn[0],ix=Cn[1],ax=Cn[2],ox=l(ax);on.globalAlpha=ox,on.drawImage(d,In-en,ix-en)}if(!tn.width||!tn.height)return tn;for(var sx=on.getImageData(0,0,tn.width,tn.height),ux=sx.data,cx=0,hx=ux.length,gx=this.minOpacity,fx=this.maxOpacity,dx=fx-gx;cx<hx;){var ox=ux[cx+3]/256,mx=Math.floor(ox*(GRADIENT_LEVELS-1))*4;if(ox>0){var vx=c(ox)?Ct:ar;ox>0&&(ox=ox*dx+gx),ux[cx++]=vx[mx],ux[cx++]=vx[mx+1],ux[cx++]=vx[mx+2],ux[cx++]=vx[mx+3]*ox*256}else cx+=4}return on.putImageData(sx,0,0),tn},t.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),a=this.pointSize+this.blurSize,s=a*2;n.width=s,n.height=s;var l=n.getContext("2d");return l.clearRect(0,0,s,s),l.shadowOffsetX=s,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-a,a,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),n},t.prototype._getGradient=function(n,a){for(var s=this._gradientPixels,l=s[a]||(s[a]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],c=0,d=0;d<256;d++)n[a](d/255,!0,u),l[c++]=u[0],l[c++]=u[1],l[c++]=u[2],l[c++]=u[3];return l},t})();function getIsInPiecewiseRange(t,n,a){var s=t[1]-t[0];n=map$1(n,function(c){return{interval:[(c.interval[0]-t[0])/s,(c.interval[1]-t[0])/s]}});var l=n.length,u=0;return function(c){var d;for(d=u;d<l;d++){var Ct=n[d].interval;if(Ct[0]<=c&&c<=Ct[1]){u=d;break}}if(d===l)for(d=u-1;d>=0;d--){var Ct=n[d].interval;if(Ct[0]<=c&&c<=Ct[1]){u=d;break}}return d>=0&&d<l&&a[d]}}function getIsInContinuousRange(t,n){var a=t[1]-t[0];return n=[(n[0]-t[0])/a,(n[1]-t[0])/a],function(s){return s>=n[0]&&s<=n[1]}}function isGeoCoordSys(t){var n=t.dimensions;return n[0]==="lng"&&n[1]==="lat"}var HeatmapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u;s.eachComponent("visualMap",function(d){d.eachTargetSeries(function(Ct){Ct===a&&(u=d)})}),this._progressiveEls=null,this.group.removeAll();var c=a.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(a,l,0,a.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,a,u,l)},n.prototype.incrementalPrepareRender=function(a,s,l){this.group.removeAll()},n.prototype.incrementalRender=function(a,s,l,u){var c=s.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(s,l,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(s,u,a.start,a.end,!0)))},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._renderOnCartesianAndCalendar=function(a,s,l,u,c){var d=a.coordinateSystem,Ct=isCoordinateSystemType(d,"cartesian2d"),ar,en,tn,on;if(Ct){var cn=d.getAxis("x"),dn=d.getAxis("y");ar=cn.getBandWidth()+.5,en=dn.getBandWidth()+.5,tn=cn.scale.getExtent(),on=dn.scale.getExtent()}for(var Cn=this.group,In=a.getData(),ix=a.getModel(["emphasis","itemStyle"]).getItemStyle(),ax=a.getModel(["blur","itemStyle"]).getItemStyle(),ox=a.getModel(["select","itemStyle"]).getItemStyle(),sx=a.get(["itemStyle","borderRadius"]),ux=getLabelStatesModels(a),cx=a.getModel("emphasis"),hx=cx.get("focus"),gx=cx.get("blurScope"),fx=cx.get("disabled"),dx=Ct?[In.mapDimension("x"),In.mapDimension("y"),In.mapDimension("value")]:[In.mapDimension("time"),In.mapDimension("value")],mx=l;mx<u;mx++){var vx=void 0,bx=In.getItemVisual(mx,"style");if(Ct){var xx=In.get(dx[0],mx),_x=In.get(dx[1],mx);if(isNaN(In.get(dx[2],mx))||isNaN(xx)||isNaN(_x)||xx<tn[0]||xx>tn[1]||_x<on[0]||_x>on[1])continue;var Ex=d.dataToPoint([xx,_x]);vx=new Rect$2({shape:{x:Ex[0]-ar/2,y:Ex[1]-en/2,width:ar,height:en},style:bx})}else{if(isNaN(In.get(dx[1],mx)))continue;vx=new Rect$2({z2:1,shape:d.dataToRect([In.get(dx[0],mx)]).contentShape,style:bx})}if(In.hasItemOption){var Tx=In.getItemModel(mx),Cx=Tx.getModel("emphasis");ix=Cx.getModel("itemStyle").getItemStyle(),ax=Tx.getModel(["blur","itemStyle"]).getItemStyle(),ox=Tx.getModel(["select","itemStyle"]).getItemStyle(),sx=Tx.get(["itemStyle","borderRadius"]),hx=Cx.get("focus"),gx=Cx.get("blurScope"),fx=Cx.get("disabled"),ux=getLabelStatesModels(Tx)}vx.shape.r=sx;var Mx=a.getRawValue(mx),Ax="-";Mx&&Mx[2]!=null&&(Ax=Mx[2]+""),setLabelStyle(vx,ux,{labelFetcher:a,labelDataIndex:mx,defaultOpacity:bx.opacity,defaultText:Ax}),vx.ensureState("emphasis").style=ix,vx.ensureState("blur").style=ax,vx.ensureState("select").style=ox,toggleHoverEmphasis(vx,hx,gx,fx),vx.incremental=c,c&&(vx.states.emphasis.hoverLayer=!0),Cn.add(vx),In.setItemGraphicEl(mx,vx),this._progressiveEls&&this._progressiveEls.push(vx)}},n.prototype._renderOnGeo=function(a,s,l,u){var c=l.targetVisuals.inRange,d=l.targetVisuals.outOfRange,Ct=s.getData(),ar=this._hmLayer||this._hmLayer||new HeatmapLayer;ar.blurSize=s.get("blurSize"),ar.pointSize=s.get("pointSize"),ar.minOpacity=s.get("minOpacity"),ar.maxOpacity=s.get("maxOpacity");var en=a.getViewRect().clone(),tn=a.getRoamTransform();en.applyTransform(tn);var on=Math.max(en.x,0),cn=Math.max(en.y,0),dn=Math.min(en.width+en.x,u.getWidth()),Cn=Math.min(en.height+en.y,u.getHeight()),In=dn-on,ix=Cn-cn,ax=[Ct.mapDimension("lng"),Ct.mapDimension("lat"),Ct.mapDimension("value")],ox=Ct.mapArray(ax,function(hx,gx,fx){var dx=a.dataToPoint([hx,gx]);return dx[0]-=on,dx[1]-=cn,dx.push(fx),dx}),sx=l.getExtent(),ux=l.type==="visualMap.continuous"?getIsInContinuousRange(sx,l.option.range):getIsInPiecewiseRange(sx,l.getPieceList(),l.option.selected);ar.update(ox,In,ix,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:d.color.getColorMapper()},ux);var cx=new ZRImage({style:{width:In,height:ix,x:on,y:cn,image:ar.canvas},silent:!0});this.group.add(cx)},n.type="heatmap",n})(ChartView),HeatmapSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var a=CoordinateSystemManager.get(this.get("coordinateSystem"));if(a&&a.dimensions)return a.dimensions[0]==="lng"&&a.dimensions[1]==="lat"},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n})(SeriesModel);function install$v(t){t.registerChartView(HeatmapView),t.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group,c=a.getData(),d=this._data,Ct=a.coordinateSystem,ar=Ct.getBaseAxis(),en=ar.isHorizontal(),tn=Ct.master.getRect(),on={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:a,coordSys:Ct,coordSysExtent:[[tn.x,tn.x+tn.width],[tn.y,tn.y+tn.height]],isHorizontal:en,valueDim:LAYOUT_ATTRS[+en],categoryDim:LAYOUT_ATTRS[1-+en]};c.diff(d).add(function(dn){if(c.hasValue(dn)){var Cn=getItemModel(c,dn),In=getSymbolMeta(c,dn,Cn,on),ix=createBar(c,on,In);c.setItemGraphicEl(dn,ix),u.add(ix),updateCommon(ix,on,In)}}).update(function(dn,Cn){var In=d.getItemGraphicEl(Cn);if(!c.hasValue(dn)){u.remove(In);return}var ix=getItemModel(c,dn),ax=getSymbolMeta(c,dn,ix,on),ox=getShapeStr(c,ax);In&&ox!==In.__pictorialShapeStr&&(u.remove(In),c.setItemGraphicEl(dn,null),In=null),In?updateBar(In,on,ax):In=createBar(c,on,ax,!0),c.setItemGraphicEl(dn,In),In.__pictorialSymbolMeta=ax,u.add(In),updateCommon(In,on,ax)}).remove(function(dn){var Cn=d.getItemGraphicEl(dn);Cn&&removeBar(d,dn,Cn.__pictorialSymbolMeta.animationModel,Cn)}).execute();var cn=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;return cn?u.setClipPath(cn):u.removeClipPath(),this._data=c,this.group},n.prototype.remove=function(a,s){var l=this.group,u=this._data;a.get("animation")?u&&u.eachItemGraphicEl(function(c){removeBar(u,getECData(c).dataIndex,a,c)}):l.removeAll()},n.type="pictorialBar",n})(ChartView);function getSymbolMeta(t,n,a,s){var l=t.getItemLayout(n),u=a.get("symbolRepeat"),c=a.get("symbolClip"),d=a.get("symbolPosition")||"start",Ct=a.get("symbolRotate"),ar=(Ct||0)*Math.PI/180||0,en=a.get("symbolPatternSize")||2,tn=a.isAnimationEnabled(),on={dataIndex:n,layout:l,itemModel:a,symbolType:t.getItemVisual(n,"symbol")||"circle",style:t.getItemVisual(n,"style"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:en,rotation:ar,animationModel:tn?a:null,hoverScale:tn&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};prepareBarLength(a,u,l,s,on),prepareSymbolSize(t,n,l,u,c,on.boundingLength,on.pxSign,en,s,on),prepareLineWidth(a,on.symbolScale,ar,s,on);var cn=on.symbolSize,dn=normalizeSymbolOffset(a.get("symbolOffset"),cn);return prepareLayoutInfo(a,cn,l,u,c,dn,d,on.valueLineWidth,on.boundingLength,on.repeatCutLength,s,on),on}function prepareBarLength(t,n,a,s,l){var u=s.valueDim,c=t.get("symbolBoundingData"),d=s.coordSys.getOtherAxis(s.coordSys.getBaseAxis()),Ct=d.toGlobalCoord(d.dataToCoord(0)),ar=1-+(a[u.wh]<=0),en;if(isArray$1(c)){var tn=[convertToCoordOnAxis(d,c[0])-Ct,convertToCoordOnAxis(d,c[1])-Ct];tn[1]<tn[0]&&tn.reverse(),en=tn[ar]}else c!=null?en=convertToCoordOnAxis(d,c)-Ct:n?en=s.coordSysExtent[u.index][ar]-Ct:en=a[u.wh];l.boundingLength=en,n&&(l.repeatCutLength=a[u.wh]);var on=u.xy==="x",cn=d.inverse;l.pxSign=on&&!cn||!on&&cn?en>=0?1:-1:en>0?1:-1}function convertToCoordOnAxis(t,n){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(n)))}function prepareSymbolSize(t,n,a,s,l,u,c,d,Ct,ar){var en=Ct.valueDim,tn=Ct.categoryDim,on=Math.abs(a[tn.wh]),cn=t.getItemVisual(n,"symbolSize"),dn;isArray$1(cn)?dn=cn.slice():cn==null?dn=["100%","100%"]:dn=[cn,cn],dn[tn.index]=parsePercent(dn[tn.index],on),dn[en.index]=parsePercent(dn[en.index],s?on:Math.abs(u)),ar.symbolSize=dn;var Cn=ar.symbolScale=[dn[0]/d,dn[1]/d];Cn[en.index]*=(Ct.isHorizontal?-1:1)*c}function prepareLineWidth(t,n,a,s,l){var u=t.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:n[0],scaleY:n[1],rotation:a}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=n[s.valueDim.index]),l.valueLineWidth=u||0}function prepareLayoutInfo(t,n,a,s,l,u,c,d,Ct,ar,en,tn){var on=en.categoryDim,cn=en.valueDim,dn=tn.pxSign,Cn=Math.max(n[cn.index]+d,0),In=Cn;if(s){var ix=Math.abs(Ct),ax=retrieve(t.get("symbolMargin"),"15%")+"",ox=!1;ax.lastIndexOf("!")===ax.length-1&&(ox=!0,ax=ax.slice(0,ax.length-1));var sx=parsePercent(ax,n[cn.index]),ux=Math.max(Cn+sx*2,0),cx=ox?0:sx*2,hx=isNumeric(s),gx=hx?s:toIntTimes((ix+cx)/ux),fx=ix-gx*Cn;sx=fx/2/(ox?gx:Math.max(gx-1,1)),ux=Cn+sx*2,cx=ox?0:sx*2,!hx&&s!=="fixed"&&(gx=ar?toIntTimes((Math.abs(ar)+cx)/ux):0),In=gx*ux-cx,tn.repeatTimes=gx,tn.symbolMargin=sx}var dx=dn*(In/2),mx=tn.pathPosition=[];mx[on.index]=a[on.wh]/2,mx[cn.index]=c==="start"?dx:c==="end"?Ct-dx:Ct/2,u&&(mx[0]+=u[0],mx[1]+=u[1]);var vx=tn.bundlePosition=[];vx[on.index]=a[on.xy],vx[cn.index]=a[cn.xy];var bx=tn.barRectShape=extend({},a);bx[cn.wh]=dn*Math.max(Math.abs(a[cn.wh]),Math.abs(mx[cn.index]+dx)),bx[on.wh]=a[on.wh];var xx=tn.clipShape={};xx[on.xy]=-a[on.xy],xx[on.wh]=en.ecSize[on.wh],xx[cn.xy]=0,xx[cn.wh]=a[cn.wh]}function createPath(t){var n=t.symbolPatternSize,a=createSymbol$1(t.symbolType,-n/2,-n/2,n,n);return a.attr({culling:!0}),a.type!=="image"&&a.setStyle({strokeNoScale:!0}),a}function createOrUpdateRepeatSymbols(t,n,a,s){var l=t.__pictorialBundle,u=a.symbolSize,c=a.valueLineWidth,d=a.pathPosition,Ct=n.valueDim,ar=a.repeatTimes||0,en=0,tn=u[n.valueDim.index]+c+a.symbolMargin*2;for(eachPath(t,function(Cn){Cn.__pictorialAnimationIndex=en,Cn.__pictorialRepeatTimes=ar,en<ar?updateAttr(Cn,null,dn(en),a,s):updateAttr(Cn,null,{scaleX:0,scaleY:0},a,s,function(){l.remove(Cn)}),en++});en<ar;en++){var on=createPath(a);on.__pictorialAnimationIndex=en,on.__pictorialRepeatTimes=ar,l.add(on);var cn=dn(en);updateAttr(on,{x:cn.x,y:cn.y,scaleX:0,scaleY:0},{scaleX:cn.scaleX,scaleY:cn.scaleY,rotation:cn.rotation},a,s)}function dn(Cn){var In=d.slice(),ix=a.pxSign,ax=Cn;return(a.symbolRepeatDirection==="start"?ix>0:ix<0)&&(ax=ar-1-Cn),In[Ct.index]=tn*(ax-ar/2+.5)+d[Ct.index],{x:In[0],y:In[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function createOrUpdateSingleSymbol(t,n,a,s){var l=t.__pictorialBundle,u=t.__pictorialMainPath;u?updateAttr(u,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,s):(u=t.__pictorialMainPath=createPath(a),l.add(u),updateAttr(u,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,s))}function createOrUpdateBarRect(t,n,a){var s=extend({},n.barRectShape),l=t.__pictorialBarRect;l?updateAttr(l,null,{shape:s},n,a):(l=t.__pictorialBarRect=new Rect$2({z2:2,shape:s,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,t.add(l))}function createOrUpdateClip(t,n,a,s){if(a.symbolClip){var l=t.__pictorialClipPath,u=extend({},a.clipShape),c=n.valueDim,d=a.animationModel,Ct=a.dataIndex;if(l)updateProps$1(l,{shape:u},d,Ct);else{u[c.wh]=0,l=new Rect$2({shape:u}),t.__pictorialBundle.setClipPath(l),t.__pictorialClipPath=l;var ar={};ar[c.wh]=a.clipShape[c.wh],graphic$1[s?"updateProps":"initProps"](l,{shape:ar},d,Ct)}}}function getItemModel(t,n){var a=t.getItemModel(n);return a.getAnimationDelayParams=getAnimationDelayParams,a.isAnimationEnabled=isAnimationEnabled,a}function getAnimationDelayParams(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(t,n,a,s){var l=new Group$3,u=new Group$3;return l.add(u),l.__pictorialBundle=u,u.x=a.bundlePosition[0],u.y=a.bundlePosition[1],a.symbolRepeat?createOrUpdateRepeatSymbols(l,n,a):createOrUpdateSingleSymbol(l,n,a),createOrUpdateBarRect(l,a,s),createOrUpdateClip(l,n,a,s),l.__pictorialShapeStr=getShapeStr(t,a),l.__pictorialSymbolMeta=a,l}function updateBar(t,n,a){var s=a.animationModel,l=a.dataIndex,u=t.__pictorialBundle;updateProps$1(u,{x:a.bundlePosition[0],y:a.bundlePosition[1]},s,l),a.symbolRepeat?createOrUpdateRepeatSymbols(t,n,a,!0):createOrUpdateSingleSymbol(t,n,a,!0),createOrUpdateBarRect(t,a,!0),createOrUpdateClip(t,n,a,!0)}function removeBar(t,n,a,s){var l=s.__pictorialBarRect;l&&l.removeTextContent();var u=[];eachPath(s,function(c){u.push(c)}),s.__pictorialMainPath&&u.push(s.__pictorialMainPath),s.__pictorialClipPath&&(a=null),each$f(u,function(c){removeElement(c,{scaleX:0,scaleY:0},a,n,function(){s.parent&&s.parent.remove(s)})}),t.setItemGraphicEl(n,null)}function getShapeStr(t,n){return[t.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function eachPath(t,n,a){each$f(t.__pictorialBundle.children(),function(s){s!==t.__pictorialBarRect&&n.call(a,s)})}function updateAttr(t,n,a,s,l,u){n&&t.attr(n),s.symbolClip&&!l?a&&t.attr(a):a&&graphic$1[l?"updateProps":"initProps"](t,a,s.animationModel,s.dataIndex,u)}function updateCommon(t,n,a){var s=a.dataIndex,l=a.itemModel,u=l.getModel("emphasis"),c=u.getModel("itemStyle").getItemStyle(),d=l.getModel(["blur","itemStyle"]).getItemStyle(),Ct=l.getModel(["select","itemStyle"]).getItemStyle(),ar=l.getShallow("cursor"),en=u.get("focus"),tn=u.get("blurScope"),on=u.get("scale");eachPath(t,function(Cn){if(Cn instanceof ZRImage){var In=Cn.style;Cn.useStyle(extend({image:In.image,x:In.x,y:In.y,width:In.width,height:In.height},a.style))}else Cn.useStyle(a.style);var ix=Cn.ensureState("emphasis");ix.style=c,on&&(ix.scaleX=Cn.scaleX*1.1,ix.scaleY=Cn.scaleY*1.1),Cn.ensureState("blur").style=d,Cn.ensureState("select").style=Ct,ar&&(Cn.cursor=ar),Cn.z2=a.z2});var cn=n.valueDim.posDesc[+(a.boundingLength>0)],dn=t.__pictorialBarRect;dn.ignoreClip=!0,setLabelStyle(dn,getLabelStatesModels(l),{labelFetcher:n.seriesModel,labelDataIndex:s,defaultText:getDefaultLabel(n.seriesModel.getData(),s),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:cn}),toggleHoverEmphasis(t,en,tn,u.get("disabled"))}function toIntTimes(t){var n=Math.round(t);return Math.abs(t-n)<1e-4?n:Math.ceil(t)}var PictorialBarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return n.prototype.getInitialData=function(a){return a.stack=null,t.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n})(BaseBarSeriesModel);function install$u(t){t.registerChartView(PictorialBarView),t.registerSeriesModel(PictorialBarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._layers=[],a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this,d=this.group,Ct=a.getLayerSeries(),ar=u.getLayout("layoutInfo"),en=ar.rect,tn=ar.boundaryGap;d.x=0,d.y=en.y+tn[0];function on(In){return In.name}var cn=new DataDiffer(this._layersSeries||[],Ct,on,on),dn=[];cn.add(bind$1(Cn,this,"add")).update(bind$1(Cn,this,"update")).remove(bind$1(Cn,this,"remove")).execute();function Cn(In,ix,ax){var ox=c._layers;if(In==="remove"){d.remove(ox[ix]);return}for(var sx=[],ux=[],cx,hx=Ct[ix].indices,gx=0;gx<hx.length;gx++){var fx=u.getItemLayout(hx[gx]),dx=fx.x,mx=fx.y0,vx=fx.y;sx.push(dx,mx),ux.push(dx,mx+vx),cx=u.getItemVisual(hx[gx],"style")}var bx,xx=u.getItemLayout(hx[0]),_x=a.getModel("label"),Ex=_x.get("margin"),Tx=a.getModel("emphasis");if(In==="add"){var Cx=dn[ix]=new Group$3;bx=new ECPolygon({shape:{points:sx,stackedOnPoints:ux,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Cx.add(bx),d.add(Cx),a.isAnimationEnabled()&&bx.setClipPath(createGridClipShape(bx.getBoundingRect(),a,function(){bx.removeClipPath()}))}else{var Cx=ox[ax];bx=Cx.childAt(0),d.add(Cx),dn[ix]=Cx,updateProps$1(bx,{shape:{points:sx,stackedOnPoints:ux}},a),saveOldStyle(bx)}setLabelStyle(bx,getLabelStatesModels(a),{labelDataIndex:hx[gx-1],defaultText:u.getName(hx[gx-1]),inheritColor:cx.fill},{normal:{verticalAlign:"middle"}}),bx.setTextConfig({position:null,local:!0});var Mx=bx.getTextContent();Mx&&(Mx.x=xx.x-Ex,Mx.y=xx.y0+xx.y/2),bx.useStyle(cx),u.setItemGraphicEl(ix,bx),setStatesStylesFromModel(bx,a),toggleHoverEmphasis(bx,Tx.get("focus"),Tx.get("blurScope"),Tx.get("disabled"))}this._layersSeries=Ct,this._layers=dn},n.type="themeRiver",n})(ChartView);function createGridClipShape(t,n,a){var s=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(s,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},n,a),s}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.fixData=function(a){var s=a.length,l={},u=groupData(a,function(on){return l.hasOwnProperty(on[0]+"")||(l[on[0]+""]=-1),on[2]}),c=[];u.buckets.each(function(on,cn){c.push({name:cn,dataList:on})});for(var d=c.length,Ct=0;Ct<d;++Ct){for(var ar=c[Ct].name,en=0;en<c[Ct].dataList.length;++en){var tn=c[Ct].dataList[en][0]+"";l[tn]=Ct}for(var tn in l)l.hasOwnProperty(tn)&&l[tn]!==Ct&&(l[tn]=Ct,a[s]=[tn,0,ar],s++)}return a},n.prototype.getInitialData=function(a,s){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=l.get("type"),c=filter(a.data,function(dn){return dn[2]!==void 0}),d=this.fixData(c||[]),Ct=[],ar=this.nameMap=createHashMap(),en=0,tn=0;tn<d.length;++tn)Ct.push(d[tn][DATA_NAME_INDEX]),ar.get(d[tn][DATA_NAME_INDEX])||(ar.set(d[tn][DATA_NAME_INDEX],en),en++);var on=prepareSeriesDataSchema(d,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,cn=new SeriesData(on,this);return cn.initData(d),cn},n.prototype.getLayerSeries=function(){for(var a=this.getData(),s=a.count(),l=[],u=0;u<s;++u)l[u]=u;var c=a.mapDimension("single"),d=groupData(l,function(ar){return a.get("name",ar)}),Ct=[];return d.buckets.each(function(ar,en){ar.sort(function(tn,on){return a.get(c,tn)-a.get(c,on)}),Ct.push({name:en,indices:ar})}),Ct},n.prototype.getAxisTooltipData=function(a,s,l){isArray$1(a)||(a=a?[a]:[]);for(var u=this.getData(),c=this.getLayerSeries(),d=[],Ct=c.length,ar,en=0;en<Ct;++en){for(var tn=Number.MAX_VALUE,on=-1,cn=c[en].indices.length,dn=0;dn<cn;++dn){var Cn=u.get(a[0],c[en].indices[dn]),In=Math.abs(Cn-s);In<=tn&&(ar=Cn,tn=In,on=c[en].indices[dn])}d.push(on)}return{dataIndices:d,nestestValue:ar}},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=u.getName(a),d=u.get(u.mapDimension("value"),a);return createTooltipMarkup("nameValue",{name:c,value:d})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n})(SeriesModel);function themeRiverLayout(t,n){t.eachSeriesByType("themeRiver",function(a){var s=a.getData(),l=a.coordinateSystem,u={},c=l.getRect();u.rect=c;var d=a.get("boundaryGap"),Ct=l.getAxis();if(u.boundaryGap=d,Ct.orient==="horizontal"){d[0]=parsePercent(d[0],c.height),d[1]=parsePercent(d[1],c.height);var ar=c.height-d[0]-d[1];doThemeRiverLayout(s,a,ar)}else{d[0]=parsePercent(d[0],c.width),d[1]=parsePercent(d[1],c.width);var en=c.width-d[0]-d[1];doThemeRiverLayout(s,a,en)}s.setLayout("layoutInfo",u)})}function doThemeRiverLayout(t,n,a){if(t.count())for(var s=n.coordinateSystem,l=n.getLayerSeries(),u=t.mapDimension("single"),c=t.mapDimension("value"),d=map$1(l,function(In){return map$1(In.indices,function(ix){var ax=s.dataToPoint(t.get(u,ix));return ax[1]=t.get(c,ix),ax})}),Ct=computeBaseline(d),ar=Ct.y0,en=a/Ct.max,tn=l.length,on=l[0].indices.length,cn,dn=0;dn<on;++dn){cn=ar[dn]*en,t.setItemLayout(l[0].indices[dn],{layerIndex:0,x:d[0][dn][0],y0:cn,y:d[0][dn][1]*en});for(var Cn=1;Cn<tn;++Cn)cn+=d[Cn-1][dn][1]*en,t.setItemLayout(l[Cn].indices[dn],{layerIndex:Cn,x:d[Cn][dn][0],y0:cn,y:d[Cn][dn][1]*en})}}function computeBaseline(t){for(var n=t.length,a=t[0].length,s=[],l=[],u=0,c=0;c<a;++c){for(var d=0,Ct=0;Ct<n;++Ct)d+=t[Ct][c][1];d>u&&(u=d),s.push(d)}for(var ar=0;ar<a;++ar)l[ar]=(u-s[ar])/2;u=0;for(var en=0;en<a;++en){var tn=s[en]+l[en];tn>u&&(u=tn)}return{y0:l,max:u}}function install$t(t){t.registerChartView(ThemeRiverView),t.registerSeriesModel(ThemeRiverSeriesModel),t.registerLayout(themeRiverLayout),t.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=(function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=s.seriesIndex;var d=new ZRText({z2:DEFAULT_TEXT_Z,silent:a.getModel().get(["label","silent"])});return c.setTextContent(d),c.updateData(!0,a,s,l,u),c}return n.prototype.updateData=function(a,s,l,u,c){this.node=s,s.piece=this,l=l||this._seriesModel,u=u||this._ecModel;var d=this;getECData(d).dataIndex=s.dataIndex;var Ct=s.getModel(),ar=Ct.getModel("emphasis"),en=s.getLayout(),tn=extend({},en);tn.label=null;var on=s.getVisual("style");on.lineJoin="bevel";var cn=s.getVisual("decal");cn&&(on.decal=createOrUpdatePatternFromDecal(cn,c));var dn=getSectorCornerRadius(Ct.getModel("itemStyle"),tn,!0);extend(tn,dn),each$f(SPECIAL_STATES,function(ax){var ox=d.ensureState(ax),sx=Ct.getModel([ax,"itemStyle"]);ox.style=sx.getItemStyle();var ux=getSectorCornerRadius(sx,tn);ux&&(ox.shape=ux)}),a?(d.setShape(tn),d.shape.r=en.r0,initProps(d,{shape:{r:en.r}},l,s.dataIndex)):(updateProps$1(d,{shape:tn},l),saveOldStyle(d)),d.useStyle(on),this._updateLabel(l);var Cn=Ct.getShallow("cursor");Cn&&d.attr("cursor",Cn),this._seriesModel=l||this._seriesModel,this._ecModel=u||this._ecModel;var In=ar.get("focus"),ix=In==="relative"?concatArray(s.getAncestorsIndices(),s.getDescendantIndices()):In==="ancestor"?s.getAncestorsIndices():In==="descendant"?s.getDescendantIndices():In;toggleHoverEmphasis(this,ix,ar.get("blurScope"),ar.get("disabled"))},n.prototype._updateLabel=function(a){var s=this,l=this.node.getModel(),u=l.getModel("label"),c=this.node.getLayout(),d=c.endAngle-c.startAngle,Ct=(c.startAngle+c.endAngle)/2,ar=Math.cos(Ct),en=Math.sin(Ct),tn=this,on=tn.getTextContent(),cn=this.node.dataIndex,dn=u.get("minAngle")/180*Math.PI,Cn=u.get("show")&&!(dn!=null&&Math.abs(d)<dn);on.ignore=!Cn,each$f(DISPLAY_STATES,function(ix){var ax=ix==="normal"?l.getModel("label"):l.getModel([ix,"label"]),ox=ix==="normal",sx=ox?on:on.ensureState(ix),ux=a.getFormattedLabel(cn,ix);ox&&(ux=ux||s.node.name),sx.style=createTextStyle$1(ax,{},null,ix!=="normal",!0),ux&&(sx.style.text=ux);var cx=ax.get("show");cx!=null&&!ox&&(sx.ignore=!cx);var hx=In(ax,"position"),gx=ox?tn:tn.states[ix],fx=gx.style.fill;gx.textConfig={outsideFill:ax.get("color")==="inherit"?fx:null,inside:hx!=="outside"};var dx,mx=In(ax,"distance")||0,vx=In(ax,"align"),bx=In(ax,"rotate"),xx=Math.PI*.5,_x=Math.PI*1.5,Ex=normalizeRadian(bx==="tangential"?Math.PI/2-Ct:Ct),Tx=Ex>xx&&!isRadianAroundZero(Ex-xx)&&Ex<_x;hx==="outside"?(dx=c.r+mx,vx=Tx?"right":"left"):!vx||vx==="center"?(d===2*Math.PI&&c.r0===0?dx=0:dx=(c.r+c.r0)/2,vx="center"):vx==="left"?(dx=c.r0+mx,vx=Tx?"right":"left"):vx==="right"&&(dx=c.r-mx,vx=Tx?"left":"right"),sx.style.align=vx,sx.style.verticalAlign=In(ax,"verticalAlign")||"middle",sx.x=dx*ar+c.cx,sx.y=dx*en+c.cy;var Cx=0;bx==="radial"?Cx=normalizeRadian(-Ct)+(Tx?Math.PI:0):bx==="tangential"?Cx=normalizeRadian(Math.PI/2-Ct)+(Tx?Math.PI:0):isNumber(bx)&&(Cx=bx*Math.PI/180),sx.rotation=normalizeRadian(Cx)});function In(ix,ax){var ox=ix.get(ax);return ox??u.get(ax)}on.dirtyStyle()},n})(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(t){t.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(n,a){a.eachComponent({mainType:"series",subType:"sunburst",query:n},s);function s(l,u){var c=retrieveTargetInfo(n,[ROOT_TO_NODE_ACTION],l);if(c){var d=l.getViewRoot();d&&(n.direction=aboveViewRoot(d,c.node)?"rollUp":"drillDown"),l.resetViewRoot(c.node)}}}),t.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(n,a,s){n=extend({},n),a.eachComponent({mainType:"series",subType:"sunburst",query:n},l);function l(u){var c=retrieveTargetInfo(n,[HIGHLIGHT_ACTION],u);c&&(n.dataIndex=c.node.dataIndex)}s.dispatchAction(extend(n,{type:"highlight"}))}),t.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(n,a,s){n=extend({},n),s.dispatchAction(extend(n,{type:"downplay"}))})}var SunburstView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){var c=this;this.seriesModel=a,this.api=l,this.ecModel=s;var d=a.getData(),Ct=d.tree.root,ar=a.getViewRoot(),en=this.group,tn=a.get("renderLabelForZeroData"),on=[];ar.eachNode(function(ax){on.push(ax)});var cn=this._oldChildren||[];dn(on,cn),ix(Ct,ar),this._initEvents(),this._oldChildren=on;function dn(ax,ox){if(ax.length===0&&ox.length===0)return;new DataDiffer(ox,ax,sx,sx).add(ux).update(ux).remove(curry$1(ux,null)).execute();function sx(cx){return cx.getId()}function ux(cx,hx){var gx=cx==null?null:ax[cx],fx=hx==null?null:ox[hx];Cn(gx,fx)}}function Cn(ax,ox){if(!tn&&ax&&!ax.getValue()&&(ax=null),ax!==Ct&&ox!==Ct){if(ox&&ox.piece)ax?(ox.piece.updateData(!1,ax,a,s,l),d.setItemGraphicEl(ax.dataIndex,ox.piece)):In(ox);else if(ax){var sx=new SunburstPiece(ax,a,s,l);en.add(sx),d.setItemGraphicEl(ax.dataIndex,sx)}}}function In(ax){ax&&ax.piece&&(en.remove(ax.piece),ax.piece=null)}function ix(ax,ox){ox.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,ax,a,s,l):(c.virtualPiece=new SunburstPiece(ax,a,s,l),en.add(c.virtualPiece)),ox.piece.off("click"),c.virtualPiece.on("click",function(sx){c._rootToNode(ox.parentNode)})):c.virtualPiece&&(en.remove(c.virtualPiece),c.virtualPiece=null)}},n.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(s){var l=!1,u=a.seriesModel.getViewRoot();u.eachNode(function(c){if(!l&&c.piece&&c.piece===s.target){var d=c.getModel().get("nodeClick");if(d==="rootToNode")a._rootToNode(c);else if(d==="link"){var Ct=c.getModel(),ar=Ct.get("link");if(ar){var en=Ct.get("target",!0)||"_blank";windowOpen(ar,en)}}l=!0}})})},n.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},n.prototype.containPoint=function(a,s){var l=s.getData(),u=l.getItemLayout(0);if(u){var c=a[0]-u.cx,d=a[1]-u.cy,Ct=Math.sqrt(c*c+d*d);return Ct<=u.r&&Ct>=u.r0}},n.type="sunburst",n})(ChartView),SunburstSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a,s){var l={name:a.name,children:a.data};completeTreeValue(l);var u=this._levelModels=map$1(a.levels||[],function(Ct){return new Model(Ct,this,s)},this),c=Tree.createTree(l,this,d);function d(Ct){Ct.wrapMethod("getItemModel",function(ar,en){var tn=c.getNodeByDataIndex(en),on=u[tn.depth];return on&&(ar.parentModel=on),ar})}return c.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treePathInfo=wrapTreePathInfo(l,this),s},n.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n})(SeriesModel);function completeTreeValue(t){var n=0;each$f(t.children,function(s){completeTreeValue(s);var l=s.value;isArray$1(l)&&(l=l[0]),n+=l});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}var RADIAN=Math.PI/180;function sunburstLayout(t,n,a){n.eachSeriesByType(t,function(s){var l=s.get("center"),u=s.get("radius");isArray$1(u)||(u=[0,u]),isArray$1(l)||(l=[l,l]);var c=a.getWidth(),d=a.getHeight(),Ct=Math.min(c,d),ar=parsePercent(l[0],c),en=parsePercent(l[1],d),tn=parsePercent(u[0],Ct/2),on=parsePercent(u[1],Ct/2),cn=-s.get("startAngle")*RADIAN,dn=s.get("minAngle")*RADIAN,Cn=s.getData().tree.root,In=s.getViewRoot(),ix=In.depth,ax=s.get("sort");ax!=null&&initChildren(In,ax);var ox=0;each$f(In.children,function(Ex){!isNaN(Ex.getValue())&&ox++});var sx=In.getValue(),ux=Math.PI/(sx||ox)*2,cx=In.depth>0,hx=In.height-(cx?-1:1),gx=(on-tn)/(hx||1),fx=s.get("clockwise"),dx=s.get("stillShowZeroSum"),mx=fx?1:-1,vx=function(Ex,Tx){if(Ex){var Cx=Tx;if(Ex!==Cn){var Mx=Ex.getValue(),Ax=sx===0&&dx?ux:Mx*ux;Ax<dn&&(Ax=dn),Cx=Tx+mx*Ax;var Nx=Ex.depth-ix-(cx?-1:1),Ux=tn+gx*Nx,Rx=tn+gx*(Nx+1),Ox=s.getLevelModel(Ex);if(Ox){var Px=Ox.get("r0",!0),$x=Ox.get("r",!0),Lx=Ox.get("radius",!0);Lx!=null&&(Px=Lx[0],$x=Lx[1]),Px!=null&&(Ux=parsePercent(Px,Ct/2)),$x!=null&&(Rx=parsePercent($x,Ct/2))}Ex.setLayout({angle:Ax,startAngle:Tx,endAngle:Cx,clockwise:fx,cx:ar,cy:en,r0:Ux,r:Rx})}if(Ex.children&&Ex.children.length){var zx=0;each$f(Ex.children,function(qx){zx+=vx(qx,Tx+zx)})}return Cx-Tx}};if(cx){var bx=tn,xx=tn+gx,_x=Math.PI*2;Cn.setLayout({angle:_x,startAngle:cn,endAngle:cn+_x,clockwise:fx,cx:ar,cy:en,r0:bx,r:xx})}vx(In,cn)})}function initChildren(t,n){var a=t.children||[];t.children=sort(a,n),a.length&&each$f(t.children,function(s){initChildren(s,n)})}function sort(t,n){if(isFunction$1(n)){var a=map$1(t,function(l,u){var c=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return c}},index:u}});return a.sort(function(l,u){return n(l.params,u.params)}),map$1(a,function(l){return t[l.index]})}else{var s=n==="asc";return t.sort(function(l,u){var c=(l.getValue()-u.getValue())*(s?1:-1);return c===0?(l.dataIndex-u.dataIndex)*(s?-1:1):c})}}function sunburstVisual(t){var n={};function a(s,l,u){for(var c=s;c&&c.depth>1;)c=c.parentNode;var d=l.getColorFromPalette(c.name||c.dataIndex+"",n);return s.depth>1&&isString$1(d)&&(d=lift(d,(s.depth-1)/(u-1)*.5)),d}t.eachSeriesByType("sunburst",function(s){var l=s.getData(),u=l.tree;u.eachNode(function(c){var d=c.getModel(),Ct=d.getModel("itemStyle").getItemStyle();Ct.fill||(Ct.fill=a(c,s,u.root.height));var ar=l.ensureUniqueItemVisual(c.dataIndex,"style");extend(ar,Ct)})})}function install$s(t){t.registerChartView(SunburstView),t.registerSeriesModel(SunburstSeriesModel),t.registerLayout(curry$1(sunburstLayout,"sunburst")),t.registerProcessor(curry$1(dataFilter$1,"sunburst")),t.registerVisual(sunburstVisual),installSunburstAction(t)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(a,s){return createSeriesData(null,this)},n.prototype.getDataParams=function(a,s,l){var u=t.prototype.getDataParams.call(this,a,s);return l&&(u.info=customInnerStore(l).info),u},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n})(SeriesModel);function dataToCoordSize$3(t,n){return n=n||[0,0],map$1(["x","y"],function(a,s){var l=this.getAxis(a),u=n[s],c=t[s]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(u-c)-l.dataToCoord(u+c))},this)}function cartesianPrepareCustom(t){var n=t.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$3,t)}}}function dataToCoordSize$2(t,n){return n=n||[0,0],map$1([0,1],function(a){var s=n[a],l=t[a]/2,u=[],c=[];return u[a]=s-l,c[a]=s+l,u[1-a]=c[1-a]=n[1-a],Math.abs(this.dataToPoint(u)[a]-this.dataToPoint(c)[a])},this)}function geoPrepareCustom(t){var n=t.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:t.getZoom()},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$2,t)}}}function dataToCoordSize$1(t,n){var a=this.getAxis(),s=n instanceof Array?n[0]:n,l=(t instanceof Array?t[0]:t)/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(s-l)-a.dataToCoord(s+l))}function singlePrepareCustom(t){var n=t.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$1,t)}}}function dataToCoordSize(t,n){return n=n||[0,0],map$1(["Radius","Angle"],function(a,s){var l="get"+a+"Axis",u=this[l](),c=n[s],d=t[s]/2,Ct=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-d)-u.dataToCoord(c+d));return a==="Angle"&&(Ct=Ct*Math.PI/180),Ct},this)}function polarPrepareCustom(t){var n=t.getRadiusAxis(),a=t.getAngleAxis(),s=n.getExtent();return s[0]>s[1]&&s.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:s[1],r0:s[0]},api:{coord:function(l){var u=n.dataToRadius(l[0]),c=a.dataToAngle(l[1]),d=t.coordToPoint([u,c]);return d.push(u,c*Math.PI/180),d},size:bind$1(dataToCoordSize,t)}}}function calendarPrepareCustom(t){var n=t.getRect(),a=t.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(s,l){return t.dataToPoint(s,l)}}}}function isEC4CompatibleStyle(t,n,a,s){return t&&(t.legacy||t.legacy!==!1&&!a&&!s&&n!=="tspan"&&(n==="text"||hasOwn(t,"text")))}function convertFromEC4CompatibleStyle(t,n,a){var s=t,l,u,c;if(n==="text")c=s;else{c={},hasOwn(s,"text")&&(c.text=s.text),hasOwn(s,"rich")&&(c.rich=s.rich),hasOwn(s,"textFill")&&(c.fill=s.textFill),hasOwn(s,"textStroke")&&(c.stroke=s.textStroke),hasOwn(s,"fontFamily")&&(c.fontFamily=s.fontFamily),hasOwn(s,"fontSize")&&(c.fontSize=s.fontSize),hasOwn(s,"fontStyle")&&(c.fontStyle=s.fontStyle),hasOwn(s,"fontWeight")&&(c.fontWeight=s.fontWeight),u={type:"text",style:c,silent:!0},l={};var d=hasOwn(s,"textPosition");a?l.position=d?s.textPosition:"inside":d&&(l.position=s.textPosition),hasOwn(s,"textPosition")&&(l.position=s.textPosition),hasOwn(s,"textOffset")&&(l.offset=s.textOffset),hasOwn(s,"textRotation")&&(l.rotation=s.textRotation),hasOwn(s,"textDistance")&&(l.distance=s.textDistance)}return convertEC4CompatibleRichItem(c,t),each$f(c.rich,function(Ct){convertEC4CompatibleRichItem(Ct,Ct)}),{textConfig:l,textContent:u}}function convertEC4CompatibleRichItem(t,n){n&&(n.font=n.textFont||n.font,hasOwn(n,"textStrokeWidth")&&(t.lineWidth=n.textStrokeWidth),hasOwn(n,"textAlign")&&(t.align=n.textAlign),hasOwn(n,"textVerticalAlign")&&(t.verticalAlign=n.textVerticalAlign),hasOwn(n,"textLineHeight")&&(t.lineHeight=n.textLineHeight),hasOwn(n,"textWidth")&&(t.width=n.textWidth),hasOwn(n,"textHeight")&&(t.height=n.textHeight),hasOwn(n,"textBackgroundColor")&&(t.backgroundColor=n.textBackgroundColor),hasOwn(n,"textPadding")&&(t.padding=n.textPadding),hasOwn(n,"textBorderColor")&&(t.borderColor=n.textBorderColor),hasOwn(n,"textBorderWidth")&&(t.borderWidth=n.textBorderWidth),hasOwn(n,"textBorderRadius")&&(t.borderRadius=n.textBorderRadius),hasOwn(n,"textBoxShadowColor")&&(t.shadowColor=n.textBoxShadowColor),hasOwn(n,"textBoxShadowBlur")&&(t.shadowBlur=n.textBoxShadowBlur),hasOwn(n,"textBoxShadowOffsetX")&&(t.shadowOffsetX=n.textBoxShadowOffsetX),hasOwn(n,"textBoxShadowOffsetY")&&(t.shadowOffsetY=n.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(t,n,a){var s=t;s.textPosition=s.textPosition||a.position||"inside",a.offset!=null&&(s.textOffset=a.offset),a.rotation!=null&&(s.textRotation=a.rotation),a.distance!=null&&(s.textDistance=a.distance);var l=s.textPosition.indexOf("inside")>=0,u=t.fill||"#000";convertToEC4RichItem(s,n);var c=s.textFill==null;return l?c&&(s.textFill=a.insideFill||"#fff",!s.textStroke&&a.insideStroke&&(s.textStroke=a.insideStroke),!s.textStroke&&(s.textStroke=u),s.textStrokeWidth==null&&(s.textStrokeWidth=2)):(c&&(s.textFill=t.fill||a.outsideFill||"#000"),!s.textStroke&&a.outsideStroke&&(s.textStroke=a.outsideStroke)),s.text=n.text,s.rich=n.rich,each$f(n.rich,function(d){convertToEC4RichItem(d,d)}),s}function convertToEC4RichItem(t,n){n&&(hasOwn(n,"fill")&&(t.textFill=n.fill),hasOwn(n,"stroke")&&(t.textStroke=n.fill),hasOwn(n,"lineWidth")&&(t.textStrokeWidth=n.lineWidth),hasOwn(n,"font")&&(t.font=n.font),hasOwn(n,"fontStyle")&&(t.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(t.fontWeight=n.fontWeight),hasOwn(n,"fontSize")&&(t.fontSize=n.fontSize),hasOwn(n,"fontFamily")&&(t.fontFamily=n.fontFamily),hasOwn(n,"align")&&(t.textAlign=n.align),hasOwn(n,"verticalAlign")&&(t.textVerticalAlign=n.verticalAlign),hasOwn(n,"lineHeight")&&(t.textLineHeight=n.lineHeight),hasOwn(n,"width")&&(t.textWidth=n.width),hasOwn(n,"height")&&(t.textHeight=n.height),hasOwn(n,"backgroundColor")&&(t.textBackgroundColor=n.backgroundColor),hasOwn(n,"padding")&&(t.textPadding=n.padding),hasOwn(n,"borderColor")&&(t.textBorderColor=n.borderColor),hasOwn(n,"borderWidth")&&(t.textBorderWidth=n.borderWidth),hasOwn(n,"borderRadius")&&(t.textBorderRadius=n.borderRadius),hasOwn(n,"shadowColor")&&(t.textBoxShadowColor=n.shadowColor),hasOwn(n,"shadowBlur")&&(t.textBoxShadowBlur=n.shadowBlur),hasOwn(n,"shadowOffsetX")&&(t.textBoxShadowOffsetX=n.shadowOffsetX),hasOwn(n,"shadowOffsetY")&&(t.textBoxShadowOffsetY=n.shadowOffsetY),hasOwn(n,"textShadowColor")&&(t.textShadowColor=n.textShadowColor),hasOwn(n,"textShadowBlur")&&(t.textShadowBlur=n.textShadowBlur),hasOwn(n,"textShadowOffsetX")&&(t.textShadowOffsetX=n.textShadowOffsetX),hasOwn(n,"textShadowOffsetY")&&(t.textShadowOffsetY=n.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=1,t},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(t,n,a,s,l){var u=t+"Animation",c=getAnimationConfig(t,s,l)||{},d=transitionInnerStore(n).userDuring;return c.duration>0&&(c.during=d?bind$1(duringCall,{el:n,userDuring:d}):null,c.setToFinal=!0,c.scope=t),extend(c,a[u]),c}function applyUpdateTransition(t,n,a,s){s=s||{};var l=s.dataIndex,u=s.isInit,c=s.clearStyle,d=a.isAnimationEnabled(),Ct=transitionInnerStore(t),ar=n.style;Ct.userDuring=n.during;var en={},tn={};if(prepareTransformAllPropsFinal(t,n,tn),prepareShapeOrExtraAllPropsFinal("shape",n,tn),prepareShapeOrExtraAllPropsFinal("extra",n,tn),!u&&d&&(prepareTransformTransitionFrom(t,n,en),prepareShapeOrExtraTransitionFrom("shape",t,n,en),prepareShapeOrExtraTransitionFrom("extra",t,n,en),prepareStyleTransitionFrom(t,n,ar,en)),tn.style=ar,applyPropsDirectly(t,tn,c),applyMiscProps(t,n),d)if(u){var on={};each$f(ELEMENT_ANIMATABLE_PROPS,function(dn){var Cn=dn?n[dn]:n;Cn&&Cn.enterFrom&&(dn&&(on[dn]=on[dn]||{}),extend(dn?on[dn]:on,Cn.enterFrom))});var cn=getElementAnimationConfig("enter",t,n,a,l);cn.duration>0&&t.animateFrom(on,cn)}else applyPropsTransition(t,n,l||0,a,en);updateLeaveTo(t,n),ar?t.dirty():t.markRedraw()}function updateLeaveTo(t,n){for(var a=transitionInnerStore(t).leaveToProps,s=0;s<ELEMENT_ANIMATABLE_PROPS.length;s++){var l=ELEMENT_ANIMATABLE_PROPS[s],u=l?n[l]:n;u&&u.leaveTo&&(a||(a=transitionInnerStore(t).leaveToProps={}),l&&(a[l]=a[l]||{}),extend(l?a[l]:a,u.leaveTo))}}function applyLeaveTransition(t,n,a,s){if(t){var l=t.parent,u=transitionInnerStore(t).leaveToProps;if(u){var c=getElementAnimationConfig("update",t,n,a,0);c.done=function(){l.remove(t)},t.animateTo(u,c)}else l.remove(t)}}function isTransitionAll(t){return t==="all"}function applyPropsDirectly(t,n,a){var s=n.style;if(!t.isGroup&&s){if(a){t.useStyle({});for(var l=t.animators,u=0;u<l.length;u++){var c=l[u];c.targetName==="style"&&c.changeTarget(t.style)}}t.setStyle(s)}n&&(n.style=null,n&&t.attr(n),n.style=s)}function applyPropsTransition(t,n,a,s,l){if(l){var u=getElementAnimationConfig("update",t,n,s,a);u.duration>0&&t.animateFrom(l,u)}}function applyMiscProps(t,n){hasOwn(n,"silent")&&(t.silent=n.silent),hasOwn(n,"ignore")&&(t.ignore=n.ignore),t instanceof Displayable&&hasOwn(n,"invisible")&&(t.invisible=n.invisible),t instanceof Path&&hasOwn(n,"autoBatch")&&(t.autoBatch=n.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(t,n){return tmpDuringScope.el[t]=n,this},getTransform:function(t){return tmpDuringScope.el[t]},setShape:function(t,n){var a=tmpDuringScope.el,s=a.shape||(a.shape={});return s[t]=n,a.dirtyShape&&a.dirtyShape(),this},getShape:function(t){var n=tmpDuringScope.el.shape;if(n)return n[t]},setStyle:function(t,n){var a=tmpDuringScope.el,s=a.style;return s&&(s[t]=n,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(t){var n=tmpDuringScope.el.style;if(n)return n[t]},setExtra:function(t,n){var a=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return a[t]=n,this},getExtra:function(t){var n=tmpDuringScope.el.extra;if(n)return n[t]}};function duringCall(){var t=this,n=t.el;if(n){var a=transitionInnerStore(n).userDuring,s=t.userDuring;if(a!==s){t.el=t.userDuring=null;return}tmpDuringScope.el=n,s(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(t,n,a,s){var l=a[t];if(l){var u=n[t],c;if(u){var d=a.transition,Ct=l.transition;if(Ct)if(!c&&(c=s[t]={}),isTransitionAll(Ct))extend(c,u);else for(var ar=normalizeToArray(Ct),en=0;en<ar.length;en++){var tn=ar[en],on=u[tn];c[tn]=on}else if(isTransitionAll(d)||indexOf(d,t)>=0){!c&&(c=s[t]={});for(var cn=keys(u),en=0;en<cn.length;en++){var tn=cn[en],on=u[tn];isNonStyleTransitionEnabled(l[tn],on)&&(c[tn]=on)}}}}}function prepareShapeOrExtraAllPropsFinal(t,n,a){var s=n[t];if(s)for(var l=a[t]={},u=keys(s),c=0;c<u.length;c++){var d=u[c];l[d]=cloneValue(s[d])}}function prepareTransformTransitionFrom(t,n,a){for(var s=n.transition,l=isTransitionAll(s)?TRANSFORMABLE_PROPS:normalizeToArray(s||[]),u=0;u<l.length;u++){var c=l[u];if(!(c==="style"||c==="shape"||c==="extra")){var d=t[c];a[c]=d}}}function prepareTransformAllPropsFinal(t,n,a){for(var s=0;s<LEGACY_TRANSFORM_PROPS.length;s++){var l=LEGACY_TRANSFORM_PROPS[s],u=LEGACY_TRANSFORM_PROPS_MAP[l],c=n[l];c&&(a[u[0]]=c[0],a[u[1]]=c[1])}for(var s=0;s<TRANSFORMABLE_PROPS.length;s++){var d=TRANSFORMABLE_PROPS[s];n[d]!=null&&(a[d]=n[d])}}function prepareStyleTransitionFrom(t,n,a,s){if(a){var l=t.style,u;if(l){var c=a.transition,d=n.transition;if(c&&!isTransitionAll(c)){var Ct=normalizeToArray(c);!u&&(u=s.style={});for(var ar=0;ar<Ct.length;ar++){var en=Ct[ar],tn=l[en];u[en]=tn}}else if(t.getAnimationStyleProps&&(isTransitionAll(d)||isTransitionAll(c)||indexOf(d,"style")>=0)){var on=t.getAnimationStyleProps(),cn=on?on.style:null;if(cn){!u&&(u=s.style={});for(var dn=keys(a),ar=0;ar<dn.length;ar++){var en=dn[ar];if(cn[en]){var tn=l[en];u[en]=tn}}}}}}}function isNonStyleTransitionEnabled(t,n){return isArrayLike(t)?t!==n:t!=null&&isFinite(t)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(t){t.stopAnimation("keyframe"),t.attr(getStateToRestore(t))}function applyKeyframeAnimation(t,n,a){if(!(!a.isAnimationEnabled()||!n)){if(isArray$1(n)){each$f(n,function(d){applyKeyframeAnimation(t,d,a)});return}var s=n.keyframes,l=n.duration;if(a&&l==null){var u=getAnimationConfig("enter",a,0);l=u&&u.duration}if(!(!s||!l)){var c=getStateToRestore(t);each$f(ELEMENT_ANIMATABLE_PROPS,function(d){if(!(d&&!t[d])){var Ct;s.sort(function(ar,en){return ar.percent-en.percent}),each$f(s,function(ar){var en=t.animators,tn=d?ar[d]:ar;if(tn){var on=keys(tn);if(d||(on=filter(on,function(Cn){return indexOf(KEYFRAME_EXCLUDE_KEYS,Cn)<0})),!!on.length){Ct||(Ct=t.animate(d,n.loop,!0),Ct.scope="keyframe");for(var cn=0;cn<en.length;cn++)en[cn]!==Ct&&en[cn].targetName===Ct.targetName&&en[cn].stopTracks(on);d&&(c[d]=c[d]||{});var dn=d?c[d]:c;each$f(on,function(Cn){dn[Cn]=((d?t[d]:t)||{})[Cn]}),Ct.whenWithKeys(l*ar.percent,tn,on,ar.easing)}}}),Ct&&Ct.delay(n.delay||0).duration(l).start(n.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(t){return t instanceof Path}function isDisplayable(t){return t instanceof Displayable}function copyElement(t,n){n.copyTransform(t),isDisplayable(n)&&isDisplayable(t)&&(n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n.invisible=t.invisible,n.ignore=t.ignore,isPath(n)&&isPath(t)&&n.setShape(t.shape))}var CustomChartView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this._progressiveEls=null;var c=this._data,d=a.getData(),Ct=this.group,ar=makeRenderItem(a,d,s,l);c||Ct.removeAll(),d.diff(c).add(function(tn){createOrUpdateItem(l,null,tn,ar(tn,u),a,Ct,d)}).remove(function(tn){var on=c.getItemGraphicEl(tn);on&&applyLeaveTransition(on,customInnerStore(on).option,a)}).update(function(tn,on){var cn=c.getItemGraphicEl(on);createOrUpdateItem(l,cn,tn,ar(tn,u),a,Ct,d)}).execute();var en=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;en?Ct.setClipPath(en):Ct.removeClipPath(),this._data=d},n.prototype.incrementalPrepareRender=function(a,s,l){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(a,s,l,u,c){var d=s.getData(),Ct=makeRenderItem(s,d,l,u),ar=this._progressiveEls=[];function en(cn){cn.isGroup||(cn.incremental=!0,cn.ensureState("emphasis").hoverLayer=!0)}for(var tn=a.start;tn<a.end;tn++){var on=createOrUpdateItem(null,null,tn,Ct(tn,c),s,this.group,d);on&&(on.traverse(en),ar.push(on))}},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype.filterForExposedEvent=function(a,s,l,u){var c=s.element;if(c==null||l.name===c)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===c)return!0;return!1},n.type="custom",n})(ChartView);function createEl$1(t){var n=t.type,a;if(n==="path"){var s=t.shape,l=s.width!=null&&s.height!=null?{x:s.x||0,y:s.y||0,width:s.width,height:s.height}:null,u=getPathData(s);a=makePath(u,null,l,s.layout||"center"),customInnerStore(a).customPathData=u}else if(n==="image")a=new ZRImage({}),customInnerStore(a).customImagePath=t.style.image;else if(n==="text")a=new ZRText({});else if(n==="group")a=new Group$3;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(n);if(!c){var d="";throwError(d)}a=new c}return customInnerStore(a).customGraphicType=n,a.name=t.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function updateElNormal(t,n,a,s,l,u,c){stopPreviousKeyframeAnimationAndRestore(n);var d=l&&l.normal.cfg;d&&n.setTextConfig(d),s&&s.transition==null&&(s.transition=DEFAULT_TRANSITION);var Ct=s&&s.style;if(Ct){if(n.type==="text"){var ar=Ct;hasOwn(ar,"textFill")&&(ar.fill=ar.textFill),hasOwn(ar,"textStroke")&&(ar.stroke=ar.textStroke)}var en=void 0,tn=isPath(n)?Ct.decal:null;t&&tn&&(tn.dirty=!0,en=createOrUpdatePatternFromDecal(tn,t)),Ct.__decalPattern=en}if(isDisplayable(n)&&Ct){var en=Ct.__decalPattern;en&&(Ct.decal=en)}applyUpdateTransition(n,s,u,{dataIndex:a,isInit:c,clearStyle:!0}),applyKeyframeAnimation(n,s.keyframeAnimation,u)}function updateElOnState(t,n,a,s,l){var u=n.isGroup?null:n,c=l&&l[t].cfg;if(u){var d=u.ensureState(t);if(s===!1){var Ct=u.getState(t);Ct&&(Ct.style=null)}else d.style=s||null;c&&(d.textConfig=c),setDefaultStateProxy(u)}}function updateZ(t,n,a){if(!t.isGroup){var s=t,l=a.currentZ,u=a.currentZLevel;s.z=l,s.zlevel=u;var c=n.z2;c!=null&&(s.z2=c||0);for(var d=0;d<STATES.length;d++)updateZForEachState(s,n,STATES[d])}}function updateZForEachState(t,n,a){var s=a===NORMAL,l=s?n:retrieveStateOption(n,a),u=l?l.z2:null,c;u!=null&&(c=s?t:t.ensureState(a),c.z2=u||0)}function makeRenderItem(t,n,a,s){var l=t.get("renderItem"),u=t.coordinateSystem,c={};u&&(c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var d=defaults({getWidth:s.getWidth,getHeight:s.getHeight,getZr:s.getZr,getDevicePixelRatio:s.getDevicePixelRatio,value:sx,style:cx,ordinalRawValue:ux,styleEmphasis:hx,visual:dx,barLayout:mx,currentSeriesIndices:vx,font:bx},c.api||{}),Ct={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:c.coordSys,dataInsideLength:n.count(),encode:wrapEncodeDef(t.getData())},ar,en,tn={},on={},cn={},dn={},Cn=0;Cn<STATES.length;Cn++){var In=STATES[Cn];cn[In]=t.getModel(PATH_ITEM_STYLE[In]),dn[In]=t.getModel(PATH_LABEL[In])}function ix(xx){return xx===ar?en||(en=n.getItemModel(xx)):n.getItemModel(xx)}function ax(xx,_x){return n.hasItemOption?xx===ar?tn[_x]||(tn[_x]=ix(xx).getModel(PATH_ITEM_STYLE[_x])):ix(xx).getModel(PATH_ITEM_STYLE[_x]):cn[_x]}function ox(xx,_x){return n.hasItemOption?xx===ar?on[_x]||(on[_x]=ix(xx).getModel(PATH_LABEL[_x])):ix(xx).getModel(PATH_LABEL[_x]):dn[_x]}return function(xx,_x){return ar=xx,en=null,tn={},on={},l&&l(defaults({dataIndexInside:xx,dataIndex:n.getRawIndex(xx),actionType:_x?_x.type:null},Ct),d)};function sx(xx,_x){return _x==null&&(_x=ar),n.getStore().get(n.getDimensionIndex(xx||0),_x)}function ux(xx,_x){_x==null&&(_x=ar),xx=xx||0;var Ex=n.getDimensionInfo(xx);if(!Ex){var Tx=n.getDimensionIndex(xx);return Tx>=0?n.getStore().get(Tx,_x):void 0}var Cx=n.get(Ex.name,_x),Mx=Ex&&Ex.ordinalMeta;return Mx?Mx.categories[Cx]:Cx}function cx(xx,_x){_x==null&&(_x=ar);var Ex=n.getItemVisual(_x,"style"),Tx=Ex&&Ex.fill,Cx=Ex&&Ex.opacity,Mx=ax(_x,NORMAL).getItemStyle();Tx!=null&&(Mx.fill=Tx),Cx!=null&&(Mx.opacity=Cx);var Ax={inheritColor:isString$1(Tx)?Tx:"#000"},Nx=ox(_x,NORMAL),Ux=createTextStyle$1(Nx,null,Ax,!1,!0);Ux.text=Nx.getShallow("show")?retrieve2(t.getFormattedLabel(_x,NORMAL),getDefaultLabel(n,_x)):null;var Rx=createTextConfig(Nx,Ax,!1);return fx(xx,Mx),Mx=convertToEC4StyleForCustomSerise(Mx,Ux,Rx),xx&&gx(Mx,xx),Mx.legacy=!0,Mx}function hx(xx,_x){_x==null&&(_x=ar);var Ex=ax(_x,EMPHASIS).getItemStyle(),Tx=ox(_x,EMPHASIS),Cx=createTextStyle$1(Tx,null,null,!0,!0);Cx.text=Tx.getShallow("show")?retrieve3(t.getFormattedLabel(_x,EMPHASIS),t.getFormattedLabel(_x,NORMAL),getDefaultLabel(n,_x)):null;var Mx=createTextConfig(Tx,null,!0);return fx(xx,Ex),Ex=convertToEC4StyleForCustomSerise(Ex,Cx,Mx),xx&&gx(Ex,xx),Ex.legacy=!0,Ex}function gx(xx,_x){for(var Ex in _x)hasOwn(_x,Ex)&&(xx[Ex]=_x[Ex])}function fx(xx,_x){xx&&(xx.textFill&&(_x.textFill=xx.textFill),xx.textPosition&&(_x.textPosition=xx.textPosition))}function dx(xx,_x){if(_x==null&&(_x=ar),hasOwn(STYLE_VISUAL_TYPE,xx)){var Ex=n.getItemVisual(_x,"style");return Ex?Ex[STYLE_VISUAL_TYPE[xx]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,xx))return n.getItemVisual(_x,xx)}function mx(xx){if(u.type==="cartesian2d"){var _x=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:_x},xx))}}function vx(){return a.getCurrentSeriesIndices()}function bx(xx){return getFont(xx,a)}}function wrapEncodeDef(t){var n={};return each$f(t.dimensions,function(a){var s=t.getDimensionInfo(a);if(!s.isExtraCoord){var l=s.coordDim,u=n[l]=n[l]||[];u[s.coordDimIndex]=t.getDimensionIndex(a)}}),n}function createOrUpdateItem(t,n,a,s,l,u,c){if(!s){u.remove(n);return}var d=doCreateOrUpdateEl(t,n,a,s,l,u);return d&&c.setItemGraphicEl(a,d),d&&toggleHoverEmphasis(d,s.focus,s.blurScope,s.emphasisDisabled),d}function doCreateOrUpdateEl(t,n,a,s,l,u){var c=-1,d=n;n&&doesElNeedRecreate(n,s,l)&&(c=indexOf(u.childrenRef(),n),n=null);var Ct=!n,ar=n;ar?ar.clearStates():(ar=createEl$1(s),d&&copyElement(d,ar)),s.morph===!1?ar.disableMorphing=!0:ar.disableMorphing&&(ar.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(ar,a,s,l,Ct,attachedTxInfoTmp),doCreateOrUpdateClipPath(ar,a,s,l,Ct),updateElNormal(t,ar,a,s,attachedTxInfoTmp,l,Ct),hasOwn(s,"info")&&(customInnerStore(ar).info=s.info);for(var en=0;en<STATES.length;en++){var tn=STATES[en];if(tn!==NORMAL){var on=retrieveStateOption(s,tn),cn=retrieveStyleOptionOnState(s,on,tn);updateElOnState(tn,ar,on,cn,attachedTxInfoTmp)}}return updateZ(ar,s,l),s.type==="group"&&mergeChildren(t,ar,a,s,l),c>=0?u.replaceAt(ar,c):u.add(ar),ar}function doesElNeedRecreate(t,n,a){var s=customInnerStore(t),l=n.type,u=n.shape,c=n.style;return a.isUniversalTransitionEnabled()||l!=null&&l!==s.customGraphicType||l==="path"&&hasOwnPathData(u)&&getPathData(u)!==s.customPathData||l==="image"&&hasOwn(c,"image")&&c.image!==s.customImagePath}function doCreateOrUpdateClipPath(t,n,a,s,l){var u=a.clipPath;if(u===!1)t&&t.getClipPath()&&t.removeClipPath();else if(u){var c=t.getClipPath();c&&doesElNeedRecreate(c,u,s)&&(c=null),c||(c=createEl$1(u),t.setClipPath(c)),updateElNormal(null,c,n,u,null,s,l)}}function doCreateOrUpdateAttachedTx(t,n,a,s,l,u){if(!t.isGroup){processTxInfo(a,null,u),processTxInfo(a,EMPHASIS,u);var c=u.normal.conOpt,d=u.emphasis.conOpt,Ct=u.blur.conOpt,ar=u.select.conOpt;if(c!=null||d!=null||ar!=null||Ct!=null){var en=t.getTextContent();if(c===!1)en&&t.removeTextContent();else{c=u.normal.conOpt=c||{type:"text"},en?en.clearStates():(en=createEl$1(c),t.setTextContent(en)),updateElNormal(null,en,n,c,null,s,l);for(var tn=c&&c.style,on=0;on<STATES.length;on++){var cn=STATES[on];if(cn!==NORMAL){var dn=u[cn].conOpt;updateElOnState(cn,en,dn,retrieveStyleOptionOnState(c,dn,cn),null)}}tn?en.dirty():en.markRedraw()}}}}function processTxInfo(t,n,a){var s=n?retrieveStateOption(t,n):t,l=n?retrieveStyleOptionOnState(t,s,EMPHASIS):t.style,u=t.type,c=s?s.textConfig:null,d=t.textContent,Ct=d?n?retrieveStateOption(d,n):d:null;if(l&&(a.isLegacy||isEC4CompatibleStyle(l,u,!!c,!!Ct))){a.isLegacy=!0;var ar=convertFromEC4CompatibleStyle(l,u,!n);!c&&ar.textConfig&&(c=ar.textConfig),!Ct&&ar.textContent&&(Ct=ar.textContent)}if(!n&&Ct){var en=Ct;!en.type&&(en.type="text")}var tn=n?a[n]:a.normal;tn.cfg=c,tn.conOpt=Ct}function retrieveStateOption(t,n){return n?t?t[n]:null:t}function retrieveStyleOptionOnState(t,n,a){var s=n&&n.style;return s==null&&a===EMPHASIS&&t&&(s=t.styleEmphasis),s}function mergeChildren(t,n,a,s,l){var u=s.children,c=u?u.length:0,d=s.$mergeChildren,Ct=d==="byName"||s.diffChildrenByName,ar=d===!1;if(!(!c&&!Ct&&!ar)){if(Ct){diffGroupChildren({api:t,oldChildren:n.children()||[],newChildren:u||[],dataIndex:a,seriesModel:l,group:n});return}ar&&n.removeAll();for(var en=0;en<c;en++){var tn=u[en],on=n.childAt(en);tn?(tn.ignore==null&&(tn.ignore=!1),doCreateOrUpdateEl(t,on,a,tn,l,n)):on.ignore=!0}for(var cn=n.childCount()-1;cn>=en;cn--){var dn=n.childAt(cn);removeChildFromGroup(n,dn,l)}}}function removeChildFromGroup(t,n,a){n&&applyLeaveTransition(n,customInnerStore(t).option,a)}function diffGroupChildren(t){new DataDiffer(t.oldChildren,t.newChildren,getKey,getKey,t).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(t,n){var a=t&&t.name;return a??GROUP_DIFF_PREFIX+n}function processAddUpdate(t,n){var a=this.context,s=t!=null?a.newChildren[t]:null,l=n!=null?a.oldChildren[n]:null;doCreateOrUpdateEl(a.api,l,a.dataIndex,s,a.seriesModel,a.group)}function processRemove(t){var n=this.context,a=n.oldChildren[t];a&&applyLeaveTransition(a,customInnerStore(a).option,n.seriesModel)}function getPathData(t){return t&&(t.pathData||t.d)}function hasOwnPathData(t){return t&&(hasOwn(t,"pathData")||hasOwn(t,"d"))}function install$r(t){t.registerChartView(CustomChartView),t.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=(function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(n,a,s,l){var u=a.get("value"),c=a.get("status");if(this._axisModel=n,this._axisPointerModel=a,this._api=s,!(!l&&this._lastValue===u&&this._lastStatus===c)){this._lastValue=u,this._lastStatus=c;var d=this._group,Ct=this._handle;if(!c||c==="hide"){d&&d.hide(),Ct&&Ct.hide();return}d&&d.show(),Ct&&Ct.show();var ar={};this.makeElOption(ar,u,n,a,s);var en=ar.graphicKey;en!==this._lastGraphicKey&&this.clear(s),this._lastGraphicKey=en;var tn=this._moveAnimation=this.determineAnimation(n,a);if(!d)d=this._group=new Group$3,this.createPointerEl(d,ar,n,a),this.createLabelEl(d,ar,n,a),s.getZr().add(d);else{var on=curry$1(updateProps,a,tn);this.updatePointerEl(d,ar,on),this.updateLabelEl(d,ar,on,a)}updateMandatoryProps(d,a,!0),this._renderHandle(u)}},t.prototype.remove=function(n){this.clear(n)},t.prototype.dispose=function(n){this.clear(n)},t.prototype.determineAnimation=function(n,a){var s=a.get("animation"),l=n.axis,u=l.type==="category",c=a.get("snap");if(!c&&!u)return!1;if(s==="auto"||s==null){var d=this.animationThreshold;if(u&&l.getBandWidth()>d)return!0;if(c){var Ct=getAxisInfo$1(n).seriesDataCount,ar=l.getExtent();return Math.abs(ar[0]-ar[1])/Ct>d}return!1}return s===!0},t.prototype.makeElOption=function(n,a,s,l,u){},t.prototype.createPointerEl=function(n,a,s,l){var u=a.pointer;if(u){var c=inner$b(n).pointerEl=new graphic$1[u.type](clone$1(a.pointer));n.add(c)}},t.prototype.createLabelEl=function(n,a,s,l){if(a.label){var u=inner$b(n).labelEl=new ZRText(clone$1(a.label));n.add(u),updateLabelShowHide(u,l)}},t.prototype.updatePointerEl=function(n,a,s){var l=inner$b(n).pointerEl;l&&a.pointer&&(l.setStyle(a.pointer.style),s(l,{shape:a.pointer.shape}))},t.prototype.updateLabelEl=function(n,a,s,l){var u=inner$b(n).labelEl;u&&(u.setStyle(a.label.style),s(u,{x:a.label.x,y:a.label.y}),updateLabelShowHide(u,l))},t.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,s=this._api.getZr(),l=this._handle,u=a.getModel("handle"),c=a.get("status");if(!u.get("show")||!c||c==="hide"){l&&s.remove(l),this._handle=null;return}var d;this._handle||(d=!0,l=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(ar){stop(ar.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),s.add(l)),updateMandatoryProps(l,a,!1),l.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var Ct=u.get("size");isArray$1(Ct)||(Ct=[Ct,Ct]),l.scaleX=Ct[0]/2,l.scaleY=Ct[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,d)}},t.prototype._moveHandleToValue=function(n,a){updateProps(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(n,a){var s=this._handle;if(s){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(s),[n,a],this._axisModel,this._axisPointerModel);this._payloadInfo=l,s.stopAnimation(),s.attr(getHandleTransProps(l)),inner$b(s).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var a=this._payloadInfo,s=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:s.axis.dim,axisIndex:s.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var a=n.getZr(),s=this._group,l=this._handle;a&&s&&(this._lastGraphicKey=null,s&&a.remove(s),l&&a.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(n,a,s){return s=s||0,{x:n[s],y:n[1-s],width:a[s],height:a[1-s]}},t})();function updateProps(t,n,a,s){propsEqual(inner$b(a).lastProp,s)||(inner$b(a).lastProp=s,n?updateProps$1(a,s,t):(a.stopAnimation(),a.attr(s)))}function propsEqual(t,n){if(isObject$3(t)&&isObject$3(n)){var a=!0;return each$f(n,function(s,l){a=a&&propsEqual(t[l],s)}),!!a}else return t===n}function updateLabelShowHide(t,n){t[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function updateMandatoryProps(t,n,a){var s=n.get("z"),l=n.get("zlevel");t&&t.traverse(function(u){u.type!=="group"&&(s!=null&&(u.z=s),l!=null&&(u.zlevel=l),u.silent=a)})}function buildElStyle(t){var n=t.get("type"),a=t.getModel(n+"Style"),s;return n==="line"?(s=a.getLineStyle(),s.fill=null):n==="shadow"&&(s=a.getAreaStyle(),s.stroke=null),s}function buildLabelElOption(t,n,a,s,l){var u=a.get("value"),c=getValueLabel(u,n.axis,n.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),d=a.getModel("label"),Ct=normalizeCssArray(d.get("padding")||0),ar=d.getFont(),en=getBoundingRect(c,ar),tn=l.position,on=en.width+Ct[1]+Ct[3],cn=en.height+Ct[0]+Ct[2],dn=l.align;dn==="right"&&(tn[0]-=on),dn==="center"&&(tn[0]-=on/2);var Cn=l.verticalAlign;Cn==="bottom"&&(tn[1]-=cn),Cn==="middle"&&(tn[1]-=cn/2),confineInContainer(tn,on,cn,s);var In=d.get("backgroundColor");(!In||In==="auto")&&(In=n.get(["axisLine","lineStyle","color"])),t.label={x:tn[0],y:tn[1],style:createTextStyle$1(d,{text:c,font:ar,fill:d.getTextColor(),padding:Ct,backgroundColor:In}),z2:10}}function confineInContainer(t,n,a,s){var l=s.getWidth(),u=s.getHeight();t[0]=Math.min(t[0]+n,l)-n,t[1]=Math.min(t[1]+a,u)-a,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function getValueLabel(t,n,a,s,l){t=n.scale.parse(t);var u=n.scale.getLabel({value:t},{precision:l.precision}),c=l.formatter;if(c){var d={value:getAxisRawValue(n,{value:t}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$f(s,function(Ct){var ar=a.getSeriesByIndex(Ct.seriesIndex),en=Ct.dataIndexInside,tn=ar&&ar.getDataParams(en);tn&&d.seriesData.push(tn)}),isString$1(c)?u=c.replace("{value}",u):isFunction$1(c)&&(u=c(d))}return u}function getTransformedPosition(t,n,a){var s=create$1();return rotate(s,s,a.rotation),translate(s,s,a.position),applyTransform([t.dataToCoord(n),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],s)}function buildCartesianSingleLabelElOption(t,n,a,s,l,u){var c=AxisBuilder.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=l.get(["label","margin"]),buildLabelElOption(n,s,l,u,{position:getTransformedPosition(s.axis,t,a),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(t,n,a){return a=a||0,{x1:t[a],y1:t[1-a],x2:n[a],y2:n[1-a]}}function makeRectShape(t,n,a){return a=a||0,{x:t[a],y:t[1-a],width:n[a],height:n[1-a]}}function makeSectorShape(t,n,a,s,l,u){return{cx:t,cy:n,r0:a,r:s,startAngle:l,endAngle:u,clockwise:!0}}var CartesianAxisPointer=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var d=l.axis,Ct=d.grid,ar=u.get("type"),en=getCartesian(Ct,d).getOtherAxis(d).getGlobalExtent(),tn=d.toGlobalCoord(d.dataToCoord(s,!0));if(ar&&ar!=="none"){var on=buildElStyle(u),cn=pointerShapeBuilder$2[ar](d,tn,en);cn.style=on,a.graphicKey=cn.type,a.pointer=cn}var dn=layout$2(Ct.model,l);buildCartesianSingleLabelElOption(s,a,dn,l,u,c)},n.prototype.getHandleTransform=function(a,s,l){var u=layout$2(s.axis.grid.model,s,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,s,l,u){var c=l.axis,d=c.grid,Ct=c.getGlobalExtent(!0),ar=getCartesian(d,c).getOtherAxis(c).getGlobalExtent(),en=c.dim==="x"?0:1,tn=[a.x,a.y];tn[en]+=s[en],tn[en]=Math.min(Ct[1],tn[en]),tn[en]=Math.max(Ct[0],tn[en]);var on=(ar[1]+ar[0])/2,cn=[on,on];cn[en]=tn[en];var dn=[{verticalAlign:"middle"},{align:"center"}];return{x:tn[0],y:tn[1],rotation:a.rotation,cursorPoint:cn,tooltipOption:dn[en]}},n})(BaseAxisPointer);function getCartesian(t,n){var a={};return a[n.dim+"AxisIndex"]=n.index,t.getCartesian(a)}var pointerShapeBuilder$2={line:function(t,n,a){var s=makeLineShape([n,a[0]],[n,a[1]],getAxisDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(t,n,a){var s=Math.max(1,t.getBandWidth()),l=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-s/2,a[0]],[s,l],getAxisDimIndex(t))}}};function getAxisDimIndex(t){return t.dim==="x"?0:1}var AxisPointerModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n})(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(t,n,a){if(!env.node){var s=n.getZr();inner$a(s).records||(inner$a(s).records={}),initGlobalListeners(s,n);var l=inner$a(s).records[t]||(inner$a(s).records[t]={});l.handler=a}}function initGlobalListeners(t,n){if(inner$a(t).initialized)return;inner$a(t).initialized=!0,a("click",curry$1(doEnter,"click")),a("mousemove",curry$1(doEnter,"mousemove")),a("globalout",onLeave);function a(s,l){t.on(s,function(u){var c=makeDispatchAction$1(n);each$8(inner$a(t).records,function(d){d&&l(d,u,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,n)})}}function dispatchTooltipFinally(t,n){var a=t.showTip.length,s=t.hideTip.length,l;a?l=t.showTip[a-1]:s&&(l=t.hideTip[s-1]),l&&(l.dispatchAction=null,n.dispatchAction(l))}function onLeave(t,n,a){t.handler("leave",null,a)}function doEnter(t,n,a,s){n.handler(t,a,s)}function makeDispatchAction$1(t){var n={showTip:[],hideTip:[]},a=function(s){var l=n[s.type];l?l.push(s):(s.dispatchAction=a,t.dispatchAction(s))};return{dispatchAction:a,pendings:n}}function unregister(t,n){if(!env.node){var a=n.getZr(),s=(inner$a(a).records||{})[t];s&&(inner$a(a).records[t]=null)}}var AxisPointerView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=s.getComponent("tooltip"),c=a.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(d,Ct,ar){c!=="none"&&(d==="leave"||c.indexOf(d)>=0)&&ar({type:"updateAxisPointer",currTrigger:d,x:Ct&&Ct.offsetX,y:Ct&&Ct.offsetY})})},n.prototype.remove=function(a,s){unregister("axisPointer",s)},n.prototype.dispose=function(a,s){unregister("axisPointer",s)},n.type="axisPointer",n})(ComponentView);function findPointFromSeries(t,n){var a=[],s=t.seriesIndex,l;if(s==null||!(l=n.getSeriesByIndex(s)))return{point:[]};var u=l.getData(),c=queryDataIndex(u,t);if(c==null||c<0||isArray$1(c))return{point:[]};var d=u.getItemGraphicEl(c),Ct=l.coordinateSystem;if(l.getTooltipPosition)a=l.getTooltipPosition(c)||[];else if(Ct&&Ct.dataToPoint)if(t.isStacked){var ar=Ct.getBaseAxis(),en=Ct.getOtherAxis(ar),tn=en.dim,on=ar.dim,cn=tn==="x"||tn==="radius"?1:0,dn=u.mapDimension(on),Cn=[];Cn[cn]=u.get(dn,c),Cn[1-cn]=u.get(u.getCalculationInfo("stackResultDimension"),c),a=Ct.dataToPoint(Cn)||[]}else a=Ct.dataToPoint(u.getValues(map$1(Ct.dimensions,function(ix){return u.mapDimension(ix)}),c))||[];else if(d){var In=d.getBoundingRect().clone();In.applyTransform(d.transform),a=[In.x+In.width/2,In.y+In.height/2]}return{point:a,el:d}}var inner$9=makeInner();function axisTrigger(t,n,a){var s=t.currTrigger,l=[t.x,t.y],u=t,c=t.dispatchAction||bind$1(a.dispatchAction,a),d=n.getComponent("axisPointer").coordSysAxesInfo;if(d){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},n).point);var Ct=illegalPoint(l),ar=u.axesInfo,en=d.axesInfo,tn=s==="leave"||illegalPoint(l),on={},cn={},dn={list:[],map:{}},Cn={showPointer:curry$1(showPointer,cn),showTooltip:curry$1(showTooltip,dn)};each$f(d.coordSysMap,function(ix,ax){var ox=Ct||ix.containPoint(l);each$f(d.coordSysAxesInfo[ax],function(sx,ux){var cx=sx.axis,hx=findInputAxisInfo(ar,sx);if(!tn&&ox&&(!ar||hx)){var gx=hx&&hx.value;gx==null&&!Ct&&(gx=cx.pointToData(l)),gx!=null&&processOnAxis(sx,gx,Cn,!1,on)}})});var In={};return each$f(en,function(ix,ax){var ox=ix.linkGroup;ox&&!cn[ax]&&each$f(ox.axesInfo,function(sx,ux){var cx=cn[ux];if(sx!==ix&&cx){var hx=cx.value;ox.mapper&&(hx=ix.axis.scale.parse(ox.mapper(hx,makeMapperParam(sx),makeMapperParam(ix)))),In[ix.key]=hx}})}),each$f(In,function(ix,ax){processOnAxis(en[ax],ix,Cn,!0,on)}),updateModelActually(cn,en,on),dispatchTooltipActually(dn,l,t,c),dispatchHighDownActually(en,c,a),on}}function processOnAxis(t,n,a,s,l){var u=t.axis;if(!(u.scale.isBlank()||!u.containData(n))){if(!t.involveSeries){a.showPointer(t,n);return}var c=buildPayloadsBySeries(n,t),d=c.payloadBatch,Ct=c.snapToValue;d[0]&&l.seriesIndex==null&&extend(l,d[0]),!s&&t.snap&&u.containData(Ct)&&Ct!=null&&(n=Ct),a.showPointer(t,n,d),a.showTooltip(t,c,Ct)}}function buildPayloadsBySeries(t,n){var a=n.axis,s=a.dim,l=t,u=[],c=Number.MAX_VALUE,d=-1;return each$f(n.seriesModels,function(Ct,ar){var en=Ct.getData().mapDimensionsAll(s),tn,on;if(Ct.getAxisTooltipData){var cn=Ct.getAxisTooltipData(en,t,a);on=cn.dataIndices,tn=cn.nestestValue}else{if(on=Ct.getData().indicesOfNearest(en[0],t,a.type==="category"?.5:null),!on.length)return;tn=Ct.getData().get(en[0],on[0])}if(!(tn==null||!isFinite(tn))){var dn=t-tn,Cn=Math.abs(dn);Cn<=c&&((Cn<c||dn>=0&&d<0)&&(c=Cn,d=dn,l=tn,u.length=0),each$f(on,function(In){u.push({seriesIndex:Ct.seriesIndex,dataIndexInside:In,dataIndex:Ct.getData().getRawIndex(In)})}))}}),{payloadBatch:u,snapToValue:l}}function showPointer(t,n,a,s){t[n.key]={value:a,payloadBatch:s}}function showTooltip(t,n,a,s){var l=a.payloadBatch,u=n.axis,c=u.model,d=n.axisPointerModel;if(!(!n.triggerTooltip||!l.length)){var Ct=n.coordSys.model,ar=makeKey(Ct),en=t.map[ar];en||(en=t.map[ar]={coordSysId:Ct.id,coordSysIndex:Ct.componentIndex,coordSysType:Ct.type,coordSysMainType:Ct.mainType,dataByAxis:[]},t.list.push(en)),en.dataByAxis.push({axisDim:u.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:s,valueLabelOpt:{precision:d.get(["label","precision"]),formatter:d.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(t,n,a){var s=a.axesInfo=[];each$f(n,function(l,u){var c=l.axisPointerModel.option,d=t[u];d?(!l.useHandle&&(c.status="show"),c.value=d.value,c.seriesDataIndices=(d.payloadBatch||[]).slice()):!l.useHandle&&(c.status="hide"),c.status==="show"&&s.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(t,n,a,s){if(illegalPoint(n)||!t.list.length){s({type:"hideTip"});return}var l=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};s({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:t.list})}function dispatchHighDownActually(t,n,a){var s=a.getZr(),l="axisPointerLastHighlights",u=inner$9(s)[l]||{},c=inner$9(s)[l]={};each$f(t,function(ar,en){var tn=ar.axisPointerModel.option;tn.status==="show"&&ar.triggerEmphasis&&each$f(tn.seriesDataIndices,function(on){var cn=on.seriesIndex+" | "+on.dataIndex;c[cn]=on})});var d=[],Ct=[];each$f(u,function(ar,en){!c[en]&&Ct.push(ar)}),each$f(c,function(ar,en){!u[en]&&d.push(ar)}),Ct.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:Ct}),d.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:d})}function findInputAxisInfo(t,n){for(var a=0;a<(t||[]).length;a++){var s=t[a];if(n.axis.dim===s.axisDim&&n.axis.model.componentIndex===s.axisIndex)return s}}function makeMapperParam(t){var n=t.axis.model,a={},s=a.axisDim=t.axis.dim;return a.axisIndex=a[s+"AxisIndex"]=n.componentIndex,a.axisName=a[s+"AxisName"]=n.name,a.axisId=a[s+"AxisId"]=n.id,a}function illegalPoint(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function install$q(t){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),t.registerComponentModel(AxisPointerModel),t.registerComponentView(AxisPointerView),t.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var a=n.axisPointer.link;a&&!isArray$1(a)&&(n.axisPointer.link=[a])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(n,a){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,a)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(t){use(install$N),use(install$q)}var PolarAxisPointer=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var d=l.axis;d.dim==="angle"&&(this.animationThreshold=Math.PI/18);var Ct=d.polar,ar=Ct.getOtherAxis(d),en=ar.getExtent(),tn=d.dataToCoord(s),on=u.get("type");if(on&&on!=="none"){var cn=buildElStyle(u),dn=pointerShapeBuilder$1[on](d,Ct,tn,en);dn.style=cn,a.graphicKey=dn.type,a.pointer=dn}var Cn=u.get(["label","margin"]),In=getLabelPosition(s,l,u,Ct,Cn);buildLabelElOption(a,l,u,c,In)},n})(BaseAxisPointer);function getLabelPosition(t,n,a,s,l){var u=n.axis,c=u.dataToCoord(t),d=s.getAngleAxis().getExtent()[0];d=d/180*Math.PI;var Ct=s.getRadiusAxis().getExtent(),ar,en,tn;if(u.dim==="radius"){var on=create$1();rotate(on,on,d),translate(on,on,[s.cx,s.cy]),ar=applyTransform([c,-l],on);var cn=n.getModel("axisLabel").get("rotate")||0,dn=AxisBuilder.innerTextLayout(d,cn*Math.PI/180,-1);en=dn.textAlign,tn=dn.textVerticalAlign}else{var Cn=Ct[1];ar=s.coordToPoint([Cn+l,c]);var In=s.cx,ix=s.cy;en=Math.abs(ar[0]-In)/Cn<.3?"center":ar[0]>In?"left":"right",tn=Math.abs(ar[1]-ix)/Cn<.3?"middle":ar[1]>ix?"top":"bottom"}return{position:ar,align:en,verticalAlign:tn}}var pointerShapeBuilder$1={line:function(t,n,a,s){return t.dim==="angle"?{type:"Line",shape:makeLineShape(n.coordToPoint([s[0],a]),n.coordToPoint([s[1],a]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r:a}}},shadow:function(t,n,a,s){var l=Math.max(1,t.getBandWidth()),u=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:makeSectorShape(n.cx,n.cy,s[0],s[1],(-a-l/2)*u,(-a+l/2)*u)}:{type:"Sector",shape:makeSectorShape(n.cx,n.cy,a-l/2,a+l/2,0,Math.PI*2)}}},PolarModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.findAxisModel=function(a){var s,l=this.ecModel;return l.eachComponent(a,function(u){u.getCoordSysModel()===this&&(s=u)},this),s},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n})(ComponentModel),PolarAxisModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},n.type="polarAxis",n})(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="angleAxis",n})(PolarAxisModel),RadiusAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="radiusAxis",n})(PolarAxisModel),RadiusAxis=(function(t){__extends(n,t);function n(a,s){return t.call(this,"radius",a,s)||this}return n.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},n})(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=(function(t){__extends(n,t);function n(a,s){return t.call(this,"angle",a,s||[0,360])||this}return n.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},n.prototype.calculateCategoryInterval=function(){var a=this,s=a.getLabelModel(),l=a.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var d=u[0],Ct=a.dataToCoord(d+1)-a.dataToCoord(d),ar=Math.abs(Ct),en=getBoundingRect(d==null?"":d+"",s.getFont(),"center","top"),tn=Math.max(en.height,7),on=tn/ar;isNaN(on)&&(on=1/0);var cn=Math.max(0,Math.floor(on)),dn=inner$8(a.model),Cn=dn.lastAutoInterval,In=dn.lastTickCount;return Cn!=null&&In!=null&&Math.abs(Cn-cn)<=1&&Math.abs(In-c)<=1&&Cn>cn?cn=Cn:(dn.lastTickCount=c,dn.lastAutoInterval=cn),cn},n})(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=(function(){function t(n){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(n){var a=this.pointToCoord(n);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},t.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},t.prototype.getAxis=function(n){var a="_"+n+"Axis";return this[a]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(n){var a=[],s=this._angleAxis,l=this._radiusAxis;return s.scale.type===n&&a.push(s),l.scale.type===n&&a.push(l),a},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(n){var a=this._angleAxis;return n===a?this._radiusAxis:a},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(n){var a=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},t.prototype.dataToPoint=function(n,a){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],a),this._angleAxis.dataToAngle(n[1],a)])},t.prototype.pointToData=function(n,a){var s=this.pointToCoord(n);return[this._radiusAxis.radiusToData(s[0],a),this._angleAxis.angleToData(s[1],a)]},t.prototype.pointToCoord=function(n){var a=n[0]-this.cx,s=n[1]-this.cy,l=this.getAngleAxis(),u=l.getExtent(),c=Math.min(u[0],u[1]),d=Math.max(u[0],u[1]);l.inverse?c=d-360:d=c+360;var Ct=Math.sqrt(a*a+s*s);a/=Ct,s/=Ct;for(var ar=Math.atan2(-s,a)/Math.PI*180,en=ar<c?1:-1;ar<c||ar>d;)ar+=en*360;return[Ct,ar]},t.prototype.coordToPoint=function(n){var a=n[0],s=n[1]/180*Math.PI,l=Math.cos(s)*a+this.cx,u=-Math.sin(s)*a+this.cy;return[l,u]},t.prototype.getArea=function(){var n=this.getAngleAxis(),a=this.getRadiusAxis(),s=a.getExtent().slice();s[0]>s[1]&&s.reverse();var l=n.getExtent(),u=Math.PI/180,c=1e-4;return{cx:this.cx,cy:this.cy,r0:s[0],r:s[1],startAngle:-l[0]*u,endAngle:-l[1]*u,clockwise:n.inverse,contain:function(d,Ct){var ar=d-this.cx,en=Ct-this.cy,tn=ar*ar+en*en,on=this.r,cn=this.r0;return on!==cn&&tn-c<=on*on&&tn+c>=cn*cn}}},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys$2(a);return l===this?this.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys$2(a);return l===this?this.pointToData(s):null},t})();function getCoordSys$2(t){var n=t.seriesModel,a=t.polarModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function resizePolar(t,n,a){var s=n.get("center"),l=a.getWidth(),u=a.getHeight();t.cx=parsePercent(s[0],l),t.cy=parsePercent(s[1],u);var c=t.getRadiusAxis(),d=Math.min(l,u)/2,Ct=n.get("radius");Ct==null?Ct=[0,"100%"]:isArray$1(Ct)||(Ct=[0,Ct]);var ar=[parsePercent(Ct[0],d),parsePercent(Ct[1],d)];c.inverse?c.setExtent(ar[1],ar[0]):c.setExtent(ar[0],ar[1])}function updatePolarScale(t,n){var a=this,s=a.getAngleAxis(),l=a.getRadiusAxis();if(s.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),t.eachSeries(function(d){if(d.coordinateSystem===a){var Ct=d.getData();each$f(getDataDimensionsOnAxis(Ct,"radius"),function(ar){l.scale.unionExtentFromData(Ct,ar)}),each$f(getDataDimensionsOnAxis(Ct,"angle"),function(ar){s.scale.unionExtentFromData(Ct,ar)})}}),niceScaleExtent(s.scale,s.model),niceScaleExtent(l.scale,l.model),s.type==="category"&&!s.onBand){var u=s.getExtent(),c=360/s.scale.count();s.inverse?u[1]+=c:u[1]-=c,s.setExtent(u[0],u[1])}}function isAngleAxisModel(t){return t.mainType==="angleAxis"}function setAxis(t,n){var a;if(t.type=n.get("type"),t.scale=createScaleByModel$1(n),t.onBand=n.get("boundaryGap")&&t.type==="category",t.inverse=n.get("inverse"),isAngleAxisModel(n)){t.inverse=t.inverse!==n.get("clockwise");var s=n.get("startAngle"),l=(a=n.get("endAngle"))!==null&&a!==void 0?a:s+(t.inverse?-360:360);t.setExtent(s,l)}n.axis=t,t.model=n}var polarCreator={dimensions:polarDimensions,create:function(t,n){var a=[];return t.eachComponent("polar",function(s,l){var u=new Polar(l+"");u.update=updatePolarScale;var c=u.getRadiusAxis(),d=u.getAngleAxis(),Ct=s.findAxisModel("radiusAxis"),ar=s.findAxisModel("angleAxis");setAxis(c,Ct),setAxis(d,ar),resizePolar(u,s,n),a.push(u),s.coordinateSystem=u,u.model=s}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="polar"){var l=s.getReferringComponents("polar",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),a}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(t,n,a){n[1]>n[0]&&(n=n.slice().reverse());var s=t.coordToPoint([n[0],a]),l=t.coordToPoint([n[1],a]);return{x1:s[0],y1:s[1],x2:l[0],y2:l[1]}}function getRadiusIdx(t){var n=t.getRadiusAxis();return n.inverse?0:1}function fixAngleOverlap(t){var n=t[0],a=t[t.length-1];n&&a&&Math.abs(Math.abs(n.coord-a.coord)-360)<1e-4&&t.pop()}var AngleAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var l=a.axis,u=l.polar,c=u.getRadiusAxis().getExtent(),d=l.getTicksCoords(),Ct=l.getMinorTicksCoords(),ar=map$1(l.getViewLabels(),function(en){en=clone$4(en);var tn=l.scale,on=tn.type==="ordinal"?tn.getRawOrdinalNumber(en.tickValue):en.tickValue;return en.coord=l.dataToCoord(on),en});fixAngleOverlap(ar),fixAngleOverlap(d),each$f(elementList,function(en){a.get([en,"show"])&&(!l.scale.isBlank()||en==="axisLine")&&angelAxisElementsBuilders[en](this.group,a,u,d,Ct,c,ar)},this)}},n.type="angleAxis",n})(AxisView),angelAxisElementsBuilders={axisLine:function(t,n,a,s,l,u){var c=n.getModel(["axisLine","lineStyle"]),d=a.getAngleAxis(),Ct=Math.PI/180,ar=d.getExtent(),en=getRadiusIdx(a),tn=en?0:1,on,cn=Math.abs(ar[1]-ar[0])===360?"Circle":"Arc";u[tn]===0?on=new graphic$1[cn]({shape:{cx:a.cx,cy:a.cy,r:u[en],startAngle:-ar[0]*Ct,endAngle:-ar[1]*Ct,clockwise:d.inverse},style:c.getLineStyle(),z2:1,silent:!0}):on=new Ring({shape:{cx:a.cx,cy:a.cy,r:u[en],r0:u[tn]},style:c.getLineStyle(),z2:1,silent:!0}),on.style.fill=null,t.add(on)},axisTick:function(t,n,a,s,l,u){var c=n.getModel("axisTick"),d=(c.get("inside")?-1:1)*c.get("length"),Ct=u[getRadiusIdx(a)],ar=map$1(s,function(en){return new Line$1({shape:getAxisLineShape(a,[Ct,Ct+d],en.coord)})});t.add(mergePath(ar,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,n,a,s,l,u){if(l.length){for(var c=n.getModel("axisTick"),d=n.getModel("minorTick"),Ct=(c.get("inside")?-1:1)*d.get("length"),ar=u[getRadiusIdx(a)],en=[],tn=0;tn<l.length;tn++)for(var on=0;on<l[tn].length;on++)en.push(new Line$1({shape:getAxisLineShape(a,[ar,ar+Ct],l[tn][on].coord)}));t.add(mergePath(en,{style:defaults(d.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,n,a,s,l,u,c){var d=n.getCategories(!0),Ct=n.getModel("axisLabel"),ar=Ct.get("margin"),en=n.get("triggerEvent");each$f(c,function(tn,on){var cn=Ct,dn=tn.tickValue,Cn=u[getRadiusIdx(a)],In=a.coordToPoint([Cn+ar,tn.coord]),ix=a.cx,ax=a.cy,ox=Math.abs(In[0]-ix)/Cn<.3?"center":In[0]>ix?"left":"right",sx=Math.abs(In[1]-ax)/Cn<.3?"middle":In[1]>ax?"top":"bottom";if(d&&d[dn]){var ux=d[dn];isObject$3(ux)&&ux.textStyle&&(cn=new Model(ux.textStyle,Ct,Ct.ecModel))}var cx=new ZRText({silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(cn,{x:In[0],y:In[1],fill:cn.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:tn.formattedLabel,align:ox,verticalAlign:sx})});if(t.add(cx),en){var hx=AxisBuilder.makeAxisEventDataBase(n);hx.targetType="axisLabel",hx.value=tn.rawLabel,getECData(cx).eventData=hx}},this)},splitLine:function(t,n,a,s,l,u){var c=n.getModel("splitLine"),d=c.getModel("lineStyle"),Ct=d.get("color"),ar=0;Ct=Ct instanceof Array?Ct:[Ct];for(var en=[],tn=0;tn<s.length;tn++){var on=ar++%Ct.length;en[on]=en[on]||[],en[on].push(new Line$1({shape:getAxisLineShape(a,u,s[tn].coord)}))}for(var tn=0;tn<en.length;tn++)t.add(mergePath(en[tn],{style:defaults({stroke:Ct[tn%Ct.length]},d.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(t,n,a,s,l,u){if(l.length){for(var c=n.getModel("minorSplitLine"),d=c.getModel("lineStyle"),Ct=[],ar=0;ar<l.length;ar++)for(var en=0;en<l[ar].length;en++)Ct.push(new Line$1({shape:getAxisLineShape(a,u,l[ar][en].coord)}));t.add(mergePath(Ct,{style:d.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(t,n,a,s,l,u){if(s.length){var c=n.getModel("splitArea"),d=c.getModel("areaStyle"),Ct=d.get("color"),ar=0;Ct=Ct instanceof Array?Ct:[Ct];for(var en=[],tn=Math.PI/180,on=-s[0].coord*tn,cn=Math.min(u[0],u[1]),dn=Math.max(u[0],u[1]),Cn=n.get("clockwise"),In=1,ix=s.length;In<=ix;In++){var ax=In===ix?s[0].coord:s[In].coord,ox=ar++%Ct.length;en[ox]=en[ox]||[],en[ox].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:cn,r:dn,startAngle:on,endAngle:-ax*tn,clockwise:Cn},silent:!0})),on=-ax*tn}for(var In=0;In<en.length;In++)t.add(mergePath(en[In],{style:defaults({fill:Ct[In%Ct.length]},d.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var l=this._axisGroup,u=this._axisGroup=new Group$3;this.group.add(u);var c=a.axis,d=c.polar,Ct=d.getAngleAxis(),ar=c.getTicksCoords(),en=c.getMinorTicksCoords(),tn=Ct.getExtent()[0],on=c.getExtent(),cn=layoutAxis(d,a,tn),dn=new AxisBuilder(a,cn);each$f(axisBuilderAttrs$1,dn.add,dn),u.add(dn.getGroup()),groupTransition(l,u,a),each$f(selfBuilderAttrs$1,function(Cn){a.get([Cn,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[Cn](this.group,a,d,tn,on,ar,en)},this)}},n.type="radiusAxis",n})(AxisView),axisElementBuilders$1={splitLine:function(t,n,a,s,l,u){var c=n.getModel("splitLine"),d=c.getModel("lineStyle"),Ct=d.get("color"),ar=0,en=a.getAngleAxis(),tn=Math.PI/180,on=en.getExtent(),cn=Math.abs(on[1]-on[0])===360?"Circle":"Arc";Ct=Ct instanceof Array?Ct:[Ct];for(var dn=[],Cn=0;Cn<u.length;Cn++){var In=ar++%Ct.length;dn[In]=dn[In]||[],dn[In].push(new graphic$1[cn]({shape:{cx:a.cx,cy:a.cy,r:Math.max(u[Cn].coord,0),startAngle:-on[0]*tn,endAngle:-on[1]*tn,clockwise:en.inverse}}))}for(var Cn=0;Cn<dn.length;Cn++)t.add(mergePath(dn[Cn],{style:defaults({stroke:Ct[Cn%Ct.length],fill:null},d.getLineStyle()),silent:!0}))},minorSplitLine:function(t,n,a,s,l,u,c){if(c.length){for(var d=n.getModel("minorSplitLine"),Ct=d.getModel("lineStyle"),ar=[],en=0;en<c.length;en++)for(var tn=0;tn<c[en].length;tn++)ar.push(new Circle({shape:{cx:a.cx,cy:a.cy,r:c[en][tn].coord}}));t.add(mergePath(ar,{style:defaults({fill:null},Ct.getLineStyle()),silent:!0}))}},splitArea:function(t,n,a,s,l,u){if(u.length){var c=n.getModel("splitArea"),d=c.getModel("areaStyle"),Ct=d.get("color"),ar=0;Ct=Ct instanceof Array?Ct:[Ct];for(var en=[],tn=u[0].coord,on=1;on<u.length;on++){var cn=ar++%Ct.length;en[cn]=en[cn]||[],en[cn].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:tn,r:u[on].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),tn=u[on].coord}for(var on=0;on<en.length;on++)t.add(mergePath(en[on],{style:defaults({fill:Ct[on%Ct.length]},d.getAreaStyle()),silent:!0}))}}};function layoutAxis(t,n,a){return{position:[t.cx,t.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function getAxisKey(t,n){return n.dim+t.model.componentIndex}function barLayoutPolar(t,n,a){var s={},l=calRadialBar(filter(n.getSeriesByType(t),function(u){return!n.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));n.eachSeriesByType(t,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),d=u.coordinateSystem,Ct=d.getBaseAxis(),ar=getAxisKey(d,Ct),en=getSeriesStackId(u),tn=l[ar][en],on=tn.offset,cn=tn.width,dn=d.getOtherAxis(Ct),Cn=u.coordinateSystem.cx,In=u.coordinateSystem.cy,ix=u.get("barMinHeight")||0,ax=u.get("barMinAngle")||0;s[en]=s[en]||[];for(var ox=c.mapDimension(dn.dim),sx=c.mapDimension(Ct.dim),ux=isDimensionStacked(c,ox),cx=Ct.dim!=="radius"||!u.get("roundCap",!0),hx=dn.model,gx=hx.get("startValue"),fx=dn.dataToCoord(gx||0),dx=0,mx=c.count();dx<mx;dx++){var vx=c.get(ox,dx),bx=c.get(sx,dx),xx=vx>=0?"p":"n",_x=fx;ux&&(s[en][bx]||(s[en][bx]={p:fx,n:fx}),_x=s[en][bx][xx]);var Ex=void 0,Tx=void 0,Cx=void 0,Mx=void 0;if(dn.dim==="radius"){var Ax=dn.dataToCoord(vx)-fx,Nx=Ct.dataToCoord(bx);Math.abs(Ax)<ix&&(Ax=(Ax<0?-1:1)*ix),Ex=_x,Tx=_x+Ax,Cx=Nx-on,Mx=Cx-cn,ux&&(s[en][bx][xx]=Tx)}else{var Ux=dn.dataToCoord(vx,cx)-fx,Rx=Ct.dataToCoord(bx);Math.abs(Ux)<ax&&(Ux=(Ux<0?-1:1)*ax),Ex=Rx+on,Tx=Ex+cn,Cx=_x,Mx=_x+Ux,ux&&(s[en][bx][xx]=Mx)}c.setItemLayout(dx,{cx:Cn,cy:In,r0:Ex,r:Tx,startAngle:-Cx*Math.PI/180,endAngle:-Mx*Math.PI/180,clockwise:Cx>=Mx})}}})}function calRadialBar(t){var n={};each$f(t,function(s,l){var u=s.getData(),c=s.coordinateSystem,d=c.getBaseAxis(),Ct=getAxisKey(c,d),ar=d.getExtent(),en=d.type==="category"?d.getBandWidth():Math.abs(ar[1]-ar[0])/u.count(),tn=n[Ct]||{bandWidth:en,remainedWidth:en,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},on=tn.stacks;n[Ct]=tn;var cn=getSeriesStackId(s);on[cn]||tn.autoWidthCount++,on[cn]=on[cn]||{width:0,maxWidth:0};var dn=parsePercent(s.get("barWidth"),en),Cn=parsePercent(s.get("barMaxWidth"),en),In=s.get("barGap"),ix=s.get("barCategoryGap");dn&&!on[cn].width&&(dn=Math.min(tn.remainedWidth,dn),on[cn].width=dn,tn.remainedWidth-=dn),Cn&&(on[cn].maxWidth=Cn),In!=null&&(tn.gap=In),ix!=null&&(tn.categoryGap=ix)});var a={};return each$f(n,function(s,l){a[l]={};var u=s.stacks,c=s.bandWidth,d=parsePercent(s.categoryGap,c),Ct=parsePercent(s.gap,1),ar=s.remainedWidth,en=s.autoWidthCount,tn=(ar-d)/(en+(en-1)*Ct);tn=Math.max(tn,0),each$f(u,function(Cn,In){var ix=Cn.maxWidth;ix&&ix<tn&&(ix=Math.min(ix,ar),Cn.width&&(ix=Math.min(ix,Cn.width)),ar-=ix,Cn.width=ix,en--)}),tn=(ar-d)/(en+(en-1)*Ct),tn=Math.max(tn,0);var on=0,cn;each$f(u,function(Cn,In){Cn.width||(Cn.width=tn),cn=Cn,on+=Cn.width*(1+Ct)}),cn&&(on-=cn.width*Ct);var dn=-on/2;each$f(u,function(Cn,In){a[l][In]=a[l][In]||{offset:dn,width:Cn.width},dn+=Cn.width*(1+Ct)})}),a}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="polar",n})(ComponentView);function install$o(t){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),t.registerCoordinateSystem("polar",polarCreator),t.registerComponentModel(PolarModel),t.registerComponentView(PolarView),axisModelCreator(t,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(t,"radius",RadiusAxisModel,radiusAxisExtraOption),t.registerComponentView(AngleAxisView),t.registerComponentView(RadiusAxisView),t.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(t,n){n=n||{};var a=t.coordinateSystem,s=t.axis,l={},u=s.position,c=s.orient,d=a.getRect(),Ct=[d.x,d.x+d.width,d.y,d.y+d.height],ar={horizontal:{top:Ct[2],bottom:Ct[3]},vertical:{left:Ct[0],right:Ct[1]}};l.position=[c==="vertical"?ar.vertical[u]:Ct[0],c==="horizontal"?ar.horizontal[u]:Ct[3]];var en={horizontal:0,vertical:1};l.rotation=Math.PI/2*en[c];var tn={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=tn[u],t.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(n.labelInside,t.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var on=n.rotate;return on==null&&(on=t.get(["axisLabel","rotate"])),l.labelRotation=u==="top"?-on:on,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="SingleAxisPointer",a}return n.prototype.render=function(a,s,l,u){var c=this.group;c.removeAll();var d=this._axisGroup;this._axisGroup=new Group$3;var Ct=layout$1(a),ar=new AxisBuilder(a,Ct);each$f(axisBuilderAttrs,ar.add,ar),c.add(this._axisGroup),c.add(ar.getGroup()),each$f(selfBuilderAttrs,function(en){a.get([en,"show"])&&axisElementBuilders[en](this,this.group,this._axisGroup,a)},this),groupTransition(d,this._axisGroup,a),t.prototype.render.call(this,a,s,l,u)},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="singleAxis",n})(AxisView),axisElementBuilders={splitLine:function(t,n,a,s){var l=s.axis;if(!l.scale.isBlank()){var u=s.getModel("splitLine"),c=u.getModel("lineStyle"),d=c.get("color");d=d instanceof Array?d:[d];for(var Ct=c.get("width"),ar=s.coordinateSystem.getRect(),en=l.isHorizontal(),tn=[],on=0,cn=l.getTicksCoords({tickModel:u}),dn=[],Cn=[],In=0;In<cn.length;++In){var ix=l.toGlobalCoord(cn[In].coord);en?(dn[0]=ix,dn[1]=ar.y,Cn[0]=ix,Cn[1]=ar.y+ar.height):(dn[0]=ar.x,dn[1]=ix,Cn[0]=ar.x+ar.width,Cn[1]=ix);var ax=new Line$1({shape:{x1:dn[0],y1:dn[1],x2:Cn[0],y2:Cn[1]},silent:!0});subPixelOptimizeLine(ax.shape,Ct);var ox=on++%d.length;tn[ox]=tn[ox]||[],tn[ox].push(ax)}for(var sx=c.getLineStyle(["color"]),In=0;In<tn.length;++In)n.add(mergePath(tn[In],{style:defaults({stroke:d[In%d.length]},sx),silent:!0}))}},splitArea:function(t,n,a,s){rectCoordAxisBuildSplitArea(t,a,s,s)}},SingleAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n})(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,a,s,l)||this;return d.type=u||"value",d.position=c||"bottom",d}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.pointToData=function(a,s){return this.coordinateSystem.pointToData(a)[0]},n})(Axis),singleDimensions=["single"],Single=(function(){function t(n,a,s){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=n,this._init(n,a,s)}return t.prototype._init=function(n,a,s){var l=this.dimension,u=new SingleAxis(l,createScaleByModel$1(n),[0,0],n.get("type"),n.get("position")),c=u.type==="category";u.onBand=c&&n.get("boundaryGap"),u.inverse=n.get("inverse"),u.orient=n.get("orient"),n.axis=u,u.model=n,u.coordinateSystem=this,this._axis=u},t.prototype.update=function(n,a){n.eachSeries(function(s){if(s.coordinateSystem===this){var l=s.getData();each$f(l.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(l,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var n=this._rect,a=this._axis,s=a.isHorizontal(),l=s?[0,n.width]:[0,n.height],u=a.inverse?1:0;a.setExtent(l[u],l[1-u]),this._updateAxisTransform(a,s?n.x:n.y)},t.prototype._updateAxisTransform=function(n,a){var s=n.getExtent(),l=s[0]+s[1],u=n.isHorizontal();n.toGlobalCoord=u?function(c){return c+a}:function(c){return l-c+a},n.toLocalCoord=u?function(c){return c-a}:function(c){return l-c+a}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(n){var a=this.getRect(),s=this.getAxis(),l=s.orient;return l==="horizontal"?s.contain(s.toLocalCoord(n[0]))&&n[1]>=a.y&&n[1]<=a.y+a.height:s.contain(s.toLocalCoord(n[1]))&&n[0]>=a.y&&n[0]<=a.y+a.height},t.prototype.pointToData=function(n){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(n[a.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(n){var a=this.getAxis(),s=this.getRect(),l=[],u=a.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),l[u]=a.toGlobalCoord(a.dataToCoord(+n)),l[1-u]=u===0?s.y+s.height/2:s.x+s.width/2,l},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys$1(a);return l===this?this.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys$1(a);return l===this?this.pointToData(s):null},t})();function getCoordSys$1(t){var n=t.seriesModel,a=t.singleAxisModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function create(t,n){var a=[];return t.eachComponent("singleAxis",function(s,l){var u=new Single(s,t,n);u.name="single_"+l,u.resize(s,n),s.coordinateSystem=u,a.push(u)}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="singleAxis"){var l=s.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];s.coordinateSystem=l&&l.coordinateSystem}}),a}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var d=l.axis,Ct=d.coordinateSystem,ar=getGlobalExtent(Ct,1-getPointDimIndex(d)),en=Ct.dataToPoint(s)[0],tn=u.get("type");if(tn&&tn!=="none"){var on=buildElStyle(u),cn=pointerShapeBuilder[tn](d,en,ar);cn.style=on,a.graphicKey=cn.type,a.pointer=cn}var dn=layout$1(l);buildCartesianSingleLabelElOption(s,a,dn,l,u,c)},n.prototype.getHandleTransform=function(a,s,l){var u=layout$1(s,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,s,l,u){var c=l.axis,d=c.coordinateSystem,Ct=getPointDimIndex(c),ar=getGlobalExtent(d,Ct),en=[a.x,a.y];en[Ct]+=s[Ct],en[Ct]=Math.min(ar[1],en[Ct]),en[Ct]=Math.max(ar[0],en[Ct]);var tn=getGlobalExtent(d,1-Ct),on=(tn[1]+tn[0])/2,cn=[on,on];return cn[Ct]=en[Ct],{x:en[0],y:en[1],rotation:a.rotation,cursorPoint:cn,tooltipOption:{verticalAlign:"middle"}}},n})(BaseAxisPointer),pointerShapeBuilder={line:function(t,n,a){var s=makeLineShape([n,a[0]],[n,a[1]],getPointDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(t,n,a){var s=t.getBandWidth(),l=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-s/2,a[0]],[s,l],getPointDimIndex(t))}}};function getPointDimIndex(t){return t.isHorizontal()?0:1}function getGlobalExtent(t,n){var a=t.getRect();return[a[XY$1[n]],a[XY$1[n]]+a[WH$1[n]]]}var SingleView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="single",n})(ComponentView);function install$n(t){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),t.registerComponentView(SingleView),t.registerComponentView(SingleAxisView),t.registerComponentModel(SingleAxisModel),axisModelCreator(t,"single",SingleAxisModel,SingleAxisModel.defaultOption),t.registerCoordinateSystem("single",singleCreator)}var CalendarModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s,l){var u=getLayoutParams(a);t.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(a,u)},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,a)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n})(ComponentModel);function mergeAndNormalizeLayoutParams$1(t,n){var a=t.cellSize,s;isArray$1(a)?s=a:s=t.cellSize=[a,a],s.length===1&&(s[1]=s[0]);var l=map$1([0,1],function(u){return sizeCalculable(n,u)&&(s[u]="auto"),s[u]!=null&&s[u]!=="auto"});mergeLayoutParam(t,n,{type:"box",ignoreSize:l})}var CalendarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group;u.removeAll();var c=a.coordinateSystem,d=c.getRangeInfo(),Ct=c.getOrient(),ar=s.getLocaleModel();this._renderDayRect(a,d,u),this._renderLines(a,d,Ct,u),this._renderYearText(a,d,Ct,u),this._renderMonthText(a,ar,Ct,u),this._renderWeekText(a,ar,d,Ct,u)},n.prototype._renderDayRect=function(a,s,l){for(var u=a.coordinateSystem,c=a.getModel("itemStyle").getItemStyle(),d=u.getCellWidth(),Ct=u.getCellHeight(),ar=s.start.time;ar<=s.end.time;ar=u.getNextNDay(ar,1).time){var en=u.dataToRect([ar],!1).tl,tn=new Rect$2({shape:{x:en[0],y:en[1],width:d,height:Ct},cursor:"default",style:c});l.add(tn)}},n.prototype._renderLines=function(a,s,l,u){var c=this,d=a.coordinateSystem,Ct=a.getModel(["splitLine","lineStyle"]).getLineStyle(),ar=a.get(["splitLine","show"]),en=Ct.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var tn=s.start,on=0;tn.time<=s.end.time;on++){dn(tn.formatedDate),on===0&&(tn=d.getDateInfo(s.start.y+"-"+s.start.m));var cn=tn.date;cn.setMonth(cn.getMonth()+1),tn=d.getDateInfo(cn)}dn(d.getNextNDay(s.end.time,1).formatedDate);function dn(Cn){c._firstDayOfMonth.push(d.getDateInfo(Cn)),c._firstDayPoints.push(d.dataToRect([Cn],!1).tl);var In=c._getLinePointsOfOneWeek(a,Cn,l);c._tlpoints.push(In[0]),c._blpoints.push(In[In.length-1]),ar&&c._drawSplitline(In,Ct,u)}ar&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,en,l),Ct,u),ar&&this._drawSplitline(c._getEdgesPoints(c._blpoints,en,l),Ct,u)},n.prototype._getEdgesPoints=function(a,s,l){var u=[a[0].slice(),a[a.length-1].slice()],c=l==="horizontal"?0:1;return u[0][c]=u[0][c]-s/2,u[1][c]=u[1][c]+s/2,u},n.prototype._drawSplitline=function(a,s,l){var u=new Polyline$1({z2:20,shape:{points:a},style:s});l.add(u)},n.prototype._getLinePointsOfOneWeek=function(a,s,l){for(var u=a.coordinateSystem,c=u.getDateInfo(s),d=[],Ct=0;Ct<7;Ct++){var ar=u.getNextNDay(c.time,Ct),en=u.dataToRect([ar.time],!1);d[2*ar.day]=en.tl,d[2*ar.day+1]=en[l==="horizontal"?"bl":"tr"]}return d},n.prototype._formatterLabel=function(a,s){return isString$1(a)&&a?formatTplSimple(a,s):isFunction$1(a)?a(s):s.nameMap},n.prototype._yearTextPositionControl=function(a,s,l,u,c){var d=s[0],Ct=s[1],ar=["center","bottom"];u==="bottom"?(Ct+=c,ar=["center","top"]):u==="left"?d-=c:u==="right"?(d+=c,ar=["center","top"]):Ct-=c;var en=0;return(u==="left"||u==="right")&&(en=Math.PI/2),{rotation:en,x:d,y:Ct,style:{align:ar[0],verticalAlign:ar[1]}}},n.prototype._renderYearText=function(a,s,l,u){var c=a.getModel("yearLabel");if(c.get("show")){var d=c.get("margin"),Ct=c.get("position");Ct||(Ct=l!=="horizontal"?"top":"left");var ar=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],en=(ar[0][0]+ar[1][0])/2,tn=(ar[0][1]+ar[1][1])/2,on=l==="horizontal"?0:1,cn={top:[en,ar[on][1]],bottom:[en,ar[1-on][1]],left:[ar[1-on][0],tn],right:[ar[on][0],tn]},dn=s.start.y;+s.end.y>+s.start.y&&(dn=dn+"-"+s.end.y);var Cn=c.get("formatter"),In={start:s.start.y,end:s.end.y,nameMap:dn},ix=this._formatterLabel(Cn,In),ax=new ZRText({z2:30,style:createTextStyle$1(c,{text:ix}),silent:c.get("silent")});ax.attr(this._yearTextPositionControl(ax,cn[Ct],l,Ct,d)),u.add(ax)}},n.prototype._monthTextPositionControl=function(a,s,l,u,c){var d="left",Ct="top",ar=a[0],en=a[1];return l==="horizontal"?(en=en+c,s&&(d="center"),u==="start"&&(Ct="bottom")):(ar=ar+c,s&&(Ct="middle"),u==="start"&&(d="right")),{x:ar,y:en,align:d,verticalAlign:Ct}},n.prototype._renderMonthText=function(a,s,l,u){var c=a.getModel("monthLabel");if(c.get("show")){var d=c.get("nameMap"),Ct=c.get("margin"),ar=c.get("position"),en=c.get("align"),tn=[this._tlpoints,this._blpoints];(!d||isString$1(d))&&(d&&(s=getLocaleModel(d)||s),d=s.get(["time","monthAbbr"])||[]);var on=ar==="start"?0:1,cn=l==="horizontal"?0:1;Ct=ar==="start"?-Ct:Ct;for(var dn=en==="center",Cn=c.get("silent"),In=0;In<tn[on].length-1;In++){var ix=tn[on][In].slice(),ax=this._firstDayOfMonth[In];if(dn){var ox=this._firstDayPoints[In];ix[cn]=(ox[cn]+tn[0][In+1][cn])/2}var sx=c.get("formatter"),ux=d[+ax.m-1],cx={yyyy:ax.y,yy:(ax.y+"").slice(2),MM:ax.m,M:+ax.m,nameMap:ux},hx=this._formatterLabel(sx,cx),gx=new ZRText({z2:30,style:extend(createTextStyle$1(c,{text:hx}),this._monthTextPositionControl(ix,dn,l,ar,Ct)),silent:Cn});u.add(gx)}}},n.prototype._weekTextPositionControl=function(a,s,l,u,c){var d="center",Ct="middle",ar=a[0],en=a[1],tn=l==="start";return s==="horizontal"?(ar=ar+u+(tn?1:-1)*c[0]/2,d=tn?"right":"left"):(en=en+u+(tn?1:-1)*c[1]/2,Ct=tn?"bottom":"top"),{x:ar,y:en,align:d,verticalAlign:Ct}},n.prototype._renderWeekText=function(a,s,l,u,c){var d=a.getModel("dayLabel");if(d.get("show")){var Ct=a.coordinateSystem,ar=d.get("position"),en=d.get("nameMap"),tn=d.get("margin"),on=Ct.getFirstDayOfWeek();if(!en||isString$1(en)){en&&(s=getLocaleModel(en)||s);var cn=s.get(["time","dayOfWeekShort"]);en=cn||map$1(s.get(["time","dayOfWeekAbbr"]),function(cx){return cx[0]})}var dn=Ct.getNextNDay(l.end.time,7-l.lweek).time,Cn=[Ct.getCellWidth(),Ct.getCellHeight()];tn=parsePercent(tn,Math.min(Cn[1],Cn[0])),ar==="start"&&(dn=Ct.getNextNDay(l.start.time,-(7+l.fweek)).time,tn=-tn);for(var In=d.get("silent"),ix=0;ix<7;ix++){var ax=Ct.getNextNDay(dn,ix),ox=Ct.dataToRect([ax.time],!1).center,sx=ix;sx=Math.abs((ix+on)%7);var ux=new ZRText({z2:30,style:extend(createTextStyle$1(d,{text:en[sx]}),this._weekTextPositionControl(ox,u,ar,tn,Cn)),silent:In});c.add(ux)}}},n.type="calendar",n})(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=(function(){function t(n,a,s){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=n}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(n){n=parseDate(n);var a=n.getFullYear(),s=n.getMonth()+1,l=s<10?"0"+s:""+s,u=n.getDate(),c=u<10?"0"+u:""+u,d=n.getDay();return d=Math.abs((d+7-this.getFirstDayOfWeek())%7),{y:a+"",m:l,d:c,day:d,time:n.getTime(),formatedDate:a+"-"+l+"-"+c,date:n}},t.prototype.getNextNDay=function(n,a){return a=a||0,a===0?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+a),this.getDateInfo(n))},t.prototype.update=function(n,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var s=this._rangeInfo.weeks||1,l=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),d=this._orient==="horizontal"?[s,7]:[7,s];each$f([0,1],function(tn){en(u,tn)&&(c[l[tn]]=u[tn]*d[tn])});var Ct={width:a.getWidth(),height:a.getHeight()},ar=this._rect=getLayoutRect(c,Ct);each$f([0,1],function(tn){en(u,tn)||(u[tn]=ar[l[tn]]/d[tn])});function en(tn,on){return tn[on]!=null&&tn[on]!=="auto"}this._sw=u[0],this._sh=u[1]},t.prototype.dataToPoint=function(n,a){isArray$1(n)&&(n=n[0]),a==null&&(a=!0);var s=this.getDateInfo(n),l=this._rangeInfo,u=s.formatedDate;if(a&&!(s.time>=l.start.time&&s.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=s.day,d=this._getRangeInfo([l.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]:[this._rect.x+d*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},t.prototype.pointToData=function(n){var a=this.pointToDate(n);return a&&a.time},t.prototype.dataToRect=function(n,a){var s=this.dataToPoint(n,a);return{contentShape:{x:s[0]-(this._sw-this._lineWidth)/2,y:s[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:s,tl:[s[0]-this._sw/2,s[1]-this._sh/2],tr:[s[0]+this._sw/2,s[1]-this._sh/2],br:[s[0]+this._sw/2,s[1]+this._sh/2],bl:[s[0]-this._sw/2,s[1]+this._sh/2]}},t.prototype.pointToDate=function(n){var a=Math.floor((n[0]-this._rect.x)/this._sw)+1,s=Math.floor((n[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(s,a-1,l):this._getDateByWeeksAndDay(a,s-1,l)},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys(a);return l===this?l.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys(a);return l===this?l.pointToData(s):null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var n=this._model.get("range"),a;if(isArray$1(n)&&n.length===1&&(n=n[0]),isArray$1(n))a=n;else{var s=n.toString();if(/^\d{4}$/.test(s)&&(a=[s+"-01-01",s+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(s)){var l=this.getDateInfo(s),u=l.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);a=[l.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(s)&&(a=[s,s])}if(!a)return n;var d=this._getRangeInfo(a);return d.start.time>d.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(n){var a=[this.getDateInfo(n[0]),this.getDateInfo(n[1])],s;a[0].time>a[1].time&&(s=!0,a.reverse());var l=Math.floor(a[1].time/PROXIMATE_ONE_DAY)-Math.floor(a[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(a[0].time),c=u.getDate(),d=a[1].date.getDate();u.setDate(c+l-1);var Ct=u.getDate();if(Ct!==d)for(var ar=u.getTime()-a[1].time>0?1:-1;(Ct=u.getDate())!==d&&(u.getTime()-a[1].time)*ar>0;)l-=ar,u.setDate(Ct-ar);var en=Math.floor((l+a[0].day+6)/7),tn=s?-en+1:en-1;return s&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:l,weeks:en,nthWeek:tn,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(n,a,s){var l=this._getRangeInfo(s);if(n>l.weeks||n===0&&a<l.fweek||n===l.weeks&&a>l.lweek)return null;var u=(n-1)*7-l.fweek+a,c=new Date(l.start.time);return c.setDate(+l.start.d+u),this.getDateInfo(c)},t.create=function(n,a){var s=[];return n.eachComponent("calendar",function(l){var u=new t(l);s.push(u),l.coordinateSystem=u}),n.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=s[l.get("calendarIndex")||0])}),s},t.dimensions=["time","value"],t})();function getCoordSys(t){var n=t.calendarModel,a=t.seriesModel,s=n?n.coordinateSystem:a?a.coordinateSystem:null;return s}function install$m(t){t.registerComponentModel(CalendarModel),t.registerComponentView(CalendarView),t.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(t,n){var a=t.existing;if(n.id=t.keyInfo.id,!n.type&&a&&(n.type=a.type),n.parentId==null){var s=n.parentOption;s?n.parentId=s.id:a&&(n.parentId=a.parentId)}n.parentOption=null}function isSetLoc(t,n){var a;return each$f(n,function(s){t[s]!=null&&t[s]!=="auto"&&(a=!0)}),a}function mergeNewElOptionToExist(t,n,a){var s=extend({},a),l=t[n],u=a.$action||"merge";u==="merge"?l?(merge(l,s,!0),mergeLayoutParam(l,s,{ignoreSize:!0}),copyLayoutParams(a,l),copyTransitionInfo(a,l),copyTransitionInfo(a,l,"shape"),copyTransitionInfo(a,l,"style"),copyTransitionInfo(a,l,"extra"),a.clipPath=l.clipPath):t[n]=s:u==="replace"?t[n]=s:u==="remove"&&l&&(t[n]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(t,n,a){if(a&&(!t[a]&&n[a]&&(t[a]={}),t=t[a],n=n[a]),!(!t||!n))for(var s=a?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<s.length;l++){var u=s[l];t[u]==null&&n[u]!=null&&(t[u]=n[u])}}function setLayoutInfoToExist(t,n){if(t&&(t.hv=n.hv=[isSetLoc(n,["left","right"]),isSetLoc(n,["top","bottom"])],t.type==="group")){var a=t,s=n;a.width==null&&(a.width=s.width=0),a.height==null&&(a.height=s.height=0)}}var GraphicComponentModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventAutoZ=!0,a}return n.prototype.mergeOption=function(a,s){var l=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,a,s),this.option.elements=l},n.prototype.optionUpdated=function(a,s){var l=this.option,u=(s?l:a).elements,c=l.elements=s?[]:l.elements,d=[];this._flatten(u,d,null);var Ct=mappingToExists(c,d,"normalMerge"),ar=this._elOptionsToUpdate=[];each$f(Ct,function(en,tn){var on=en.newOption;on&&(ar.push(on),setKeyInfoToNewElOption(en,on),mergeNewElOptionToExist(c,tn,on),setLayoutInfoToExist(c[tn],on))},this),l.elements=filter(c,function(en){return en&&delete en.$action,en!=null})},n.prototype._flatten=function(a,s,l){each$f(a,function(u){if(u){l&&(u.parentOption=l),s.push(u);var c=u.children;c&&c.length&&this._flatten(c,s,u),delete u.children}},this)},n.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},n.type="graphic",n.defaultOption={elements:[]},n})(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._elMap=createHashMap()},n.prototype.render=function(a,s,l){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,l)},n.prototype._updateElements=function(a){var s=a.useElOptionsToUpdate();if(s){var l=this._elMap,u=this.group,c=a.get("z"),d=a.get("zlevel");each$f(s,function(Ct){var ar=convertOptionIdName(Ct.id,null),en=ar!=null?l.get(ar):null,tn=convertOptionIdName(Ct.parentId,null),on=tn!=null?l.get(tn):u,cn=Ct.type,dn=Ct.style;cn==="text"&&dn&&Ct.hv&&Ct.hv[1]&&(dn.textVerticalAlign=dn.textBaseline=dn.verticalAlign=dn.align=null);var Cn=Ct.textContent,In=Ct.textConfig;if(dn&&isEC4CompatibleStyle(dn,cn,!!In,!!Cn)){var ix=convertFromEC4CompatibleStyle(dn,cn,!0);!In&&ix.textConfig&&(In=Ct.textConfig=ix.textConfig),!Cn&&ix.textContent&&(Cn=ix.textContent)}var ax=getCleanedElOption(Ct),ox=Ct.$action||"merge",sx=ox==="merge",ux=ox==="replace";if(sx){var cx=!en,hx=en;cx?hx=createEl(ar,on,Ct.type,l):(hx&&(inner$7(hx).isNew=!1),stopPreviousKeyframeAnimationAndRestore(hx)),hx&&(applyUpdateTransition(hx,ax,a,{isInit:cx}),updateCommonAttrs(hx,Ct,c,d))}else if(ux){removeEl$1(en,Ct,l,a);var gx=createEl(ar,on,Ct.type,l);gx&&(applyUpdateTransition(gx,ax,a,{isInit:!0}),updateCommonAttrs(gx,Ct,c,d))}else ox==="remove"&&(updateLeaveTo(en,Ct),removeEl$1(en,Ct,l,a));var fx=l.get(ar);if(fx&&Cn)if(sx){var dx=fx.getTextContent();dx?dx.attr(Cn):fx.setTextContent(new ZRText(Cn))}else ux&&fx.setTextContent(new ZRText(Cn));if(fx){var mx=Ct.clipPath;if(mx){var vx=mx.type,bx=void 0,cx=!1;if(sx){var xx=fx.getClipPath();cx=!xx||inner$7(xx).type!==vx,bx=cx?newEl(vx):xx}else ux&&(cx=!0,bx=newEl(vx));fx.setClipPath(bx),applyUpdateTransition(bx,mx,a,{isInit:cx}),applyKeyframeAnimation(bx,mx.keyframeAnimation,a)}var _x=inner$7(fx);fx.setTextConfig(In),_x.option=Ct,setEventData(fx,a,Ct),setTooltipConfig({el:fx,componentModel:a,itemName:fx.name,itemTooltipOption:Ct.tooltip}),applyKeyframeAnimation(fx,Ct.keyframeAnimation,a)}})}},n.prototype._relocate=function(a,s){for(var l=a.option.elements,u=this.group,c=this._elMap,d=s.getWidth(),Ct=s.getHeight(),ar=["x","y"],en=0;en<l.length;en++){var tn=l[en],on=convertOptionIdName(tn.id,null),cn=on!=null?c.get(on):null;if(!(!cn||!cn.isGroup)){var dn=cn.parent,Cn=dn===u,In=inner$7(cn),ix=inner$7(dn);In.width=parsePercent(In.option.width,Cn?d:ix.width)||0,In.height=parsePercent(In.option.height,Cn?Ct:ix.height)||0}}for(var en=l.length-1;en>=0;en--){var tn=l[en],on=convertOptionIdName(tn.id,null),cn=on!=null?c.get(on):null;if(cn){var dn=cn.parent,ix=inner$7(dn),ax=dn===u?{width:d,height:Ct}:{width:ix.width,height:ix.height},ox={},sx=positionElement(cn,tn,ax,null,{hv:tn.hv,boundingMode:tn.bounding},ox);if(!inner$7(cn).isNew&&sx){for(var ux=tn.transition,cx={},hx=0;hx<ar.length;hx++){var gx=ar[hx],fx=ox[gx];ux&&(isTransitionAll(ux)||indexOf(ux,gx)>=0)?cx[gx]=fx:cn[gx]=fx}updateProps$1(cn,cx,a,0)}else cn.attr(ox)}}},n.prototype._clear=function(){var a=this,s=this._elMap;s.each(function(l){removeEl$1(l,inner$7(l).option,s,a._lastGraphicModel)}),this._elMap=createHashMap()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n})(ComponentView);function newEl(t){var n=hasOwn(nonShapeGraphicElements,t)?nonShapeGraphicElements[t]:getShapeClass(t),a=new n({});return inner$7(a).type=t,a}function createEl(t,n,a,s){var l=newEl(a);return n.add(l),s.set(t,l),inner$7(l).id=t,inner$7(l).isNew=!0,l}function removeEl$1(t,n,a,s){var l=t&&t.parent;l&&(t.type==="group"&&t.traverse(function(u){removeEl$1(u,n,a,s)}),applyLeaveTransition(t,n,s),a.removeKey(inner$7(t).id))}function updateCommonAttrs(t,n,a,s){t.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",s||0],["z",a||0],["z2",0]],function(l){var u=l[0];hasOwn(n,u)?t[u]=retrieve2(n[u],l[1]):t[u]==null&&(t[u]=l[1])}),each$f(keys(n),function(l){if(l.indexOf("on")===0){var u=n[l];t[l]=isFunction$1(u)?u:null}}),hasOwn(n,"draggable")&&(t.draggable=n.draggable),n.name!=null&&(t.name=n.name),n.id!=null&&(t.id=n.id)}function getCleanedElOption(t){return t=extend({},t),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(n){delete t[n]}),t}function setEventData(t,n,a){var s=getECData(t).eventData;!t.silent&&!t.ignore&&!s&&(s=getECData(t).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:t.name}),s&&(s.info=a.info)}function install$l(t){t.registerComponentModel(GraphicComponentModel),t.registerComponentView(GraphicComponentView),t.registerPreprocessor(function(n){var a=n.graphic;isArray$1(a)?!a[0]||!a[0].elements?n.graphic=[{elements:a}]:n.graphic=[n.graphic[0]]:a&&!a.elements&&(n.graphic=[{elements:[a]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(t){var n=t.get("coordinateSystem");return indexOf(SERIES_COORDS,n)>=0}function getAxisMainType(t){return t+"Axis"}function findEffectedDataZooms(t,n){var a=createHashMap(),s=[],l=createHashMap();t.eachComponent({mainType:"dataZoom",query:n},function(en){l.get(en.uid)||d(en)});var u;do u=!1,t.eachComponent("dataZoom",c);while(u);function c(en){!l.get(en.uid)&&Ct(en)&&(d(en),u=!0)}function d(en){l.set(en.uid,!0),s.push(en),ar(en)}function Ct(en){var tn=!1;return en.eachTargetAxis(function(on,cn){var dn=a.get(on);dn&&dn[cn]&&(tn=!0)}),tn}function ar(en){en.eachTargetAxis(function(tn,on){(a.get(tn)||a.set(tn,[]))[on]=!0})}return s}function collectReferCoordSysModelInfo(t){var n=t.ecModel,a={infoList:[],infoMap:createHashMap()};return t.eachTargetAxis(function(s,l){var u=n.getComponent(getAxisMainType(s),l);if(u){var c=u.getCoordSysModel();if(c){var d=c.uid,Ct=a.infoMap.get(d);Ct||(Ct={model:c,axisModels:[]},a.infoList.push(Ct),a.infoMap.set(d,Ct)),Ct.axisModels.push(u)}}}),a}var DataZoomAxisInfo=(function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},t})(),DataZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return n.prototype.init=function(a,s,l){var u=retrieveRawOption(a);this.settledOption=u,this.mergeDefaultAndTheme(a,l),this._doInit(u)},n.prototype.mergeOption=function(a){var s=retrieveRawOption(a);merge(this.option,a,!0),merge(this.settledOption,s,!0),this._doInit(s)},n.prototype._doInit=function(a){var s=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,c){this._rangePropMode[c]==="value"&&(s[u[0]]=l[u[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var a=this.get("orient",!0),s=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(s);l?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(s,this._orient)),this._noTarget=!0,s.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(a){var s=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var u=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(u.specified){s=!0;var c=new DataZoomAxisInfo;each$f(u.models,function(d){c.add(d.componentIndex)}),a.set(l,c)}},this),s},n.prototype._fillAutoTargetAxisByOrient=function(a,s){var l=this.ecModel,u=!0;if(u){var c=s==="vertical"?"y":"x",d=l.findComponents({mainType:c+"Axis"});Ct(d,c)}if(u){var d=l.findComponents({mainType:"singleAxis",filter:function(en){return en.get("orient",!0)===s}});Ct(d,"single")}function Ct(ar,en){var tn=ar[0];if(tn){var on=new DataZoomAxisInfo;if(on.add(tn.componentIndex),a.set(en,on),u=!1,en==="x"||en==="y"){var cn=tn.getReferringComponents("grid",SINGLE_REFERRING).models[0];cn&&each$f(ar,function(dn){tn.componentIndex!==dn.componentIndex&&cn===dn.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&on.add(dn.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(ar){if(u){var en=l.findComponents({mainType:getAxisMainType(ar),filter:function(on){return on.get("type",!0)==="category"}});if(en[0]){var tn=new DataZoomAxisInfo;tn.add(en[0].componentIndex),a.set(ar,tn),u=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(s){!a&&(a=s)},this),a==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(a){var s=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,c){var d=a[u[0]]!=null,Ct=a[u[1]]!=null;d&&!Ct?s[c]="percent":!d&&Ct?s[c]="value":l?s[c]=l[c]:d&&(s[c]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(s,l){a==null&&(a=this.ecModel.getComponent(getAxisMainType(s),l))},this),a},n.prototype.eachTargetAxis=function(a,s){this._targetAxisInfoMap.each(function(l,u){each$f(l.indexList,function(c){a.call(s,u,c)})})},n.prototype.getAxisProxy=function(a,s){var l=this.getAxisModel(a,s);if(l)return l.__dzAxisProxy},n.prototype.getAxisModel=function(a,s){var l=this._targetAxisInfoMap.get(a);if(l&&l.indexMap[s])return this.ecModel.getComponent(getAxisMainType(a),s)},n.prototype.setRawRange=function(a){var s=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(a[u[0]]!=null||a[u[1]]!=null)&&(s[u[0]]=l[u[0]]=a[u[0]],s[u[1]]=l[u[1]]=a[u[1]])},this),this._updateRangeUse(a)},n.prototype.setCalculatedRange=function(a){var s=this.option;each$f(["start","startValue","end","endValue"],function(l){s[l]=a[l]})},n.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},n.prototype.getValueRange=function(a,s){if(a==null&&s==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(a,s).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var s,l=this._targetAxisInfoMap.keys(),u=0;u<l.length;u++)for(var c=l[u],d=this._targetAxisInfoMap.get(c),Ct=0;Ct<d.indexList.length;Ct++){var ar=this.getAxisProxy(c,d.indexList[Ct]);if(ar.hostedBy(this))return ar;s||(s=ar)}return s},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n})(ComponentModel);function retrieveRawOption(t){var n={};return each$f(["start","end","startValue","endValue","throttle"],function(a){t.hasOwnProperty(a)&&(n[a]=t[a])}),n}var SelectDataZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n})(DataZoomModel),DataZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this.dataZoomModel=a,this.ecModel=s,this.api=l},n.type="dataZoom",n})(ComponentView),SelectDataZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n})(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=(function(){function t(n,a,s,l){this._dimName=n,this._axisIndex=a,this.ecModel=l,this._dataZoomModel=s}return t.prototype.hostedBy=function(n){return this._dataZoomModel===n},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(a){if(isCoordSupported(a)){var s=getAxisMainType(this._dimName),l=a.getReferringComponents(s,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&n.push(a)}},this),n},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},t.prototype.calculateDataWindow=function(n){var a=this._dataExtent,s=this.getAxisModel(),l=s.axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],d=[],Ct=[],ar;each$7(["start","end"],function(on,cn){var dn=n[on],Cn=n[on+"Value"];u[cn]==="percent"?(dn==null&&(dn=c[cn]),Cn=l.parse(linearMap$2(dn,c,a))):(ar=!0,Cn=Cn==null?a[cn]:l.parse(Cn),dn=linearMap$2(Cn,a,c)),Ct[cn]=Cn==null||isNaN(Cn)?a[cn]:Cn,d[cn]=dn==null||isNaN(dn)?c[cn]:dn}),asc$1(Ct),asc$1(d);var en=this._minMaxSpan;ar?tn(Ct,d,a,c,!1):tn(d,Ct,c,a,!0);function tn(on,cn,dn,Cn,In){var ix=In?"Span":"ValueSpan";sliderMove(0,on,dn,"all",en["min"+ix],en["max"+ix]);for(var ax=0;ax<2;ax++)cn[ax]=linearMap$2(on[ax],dn,Cn,!0),In&&(cn[ax]=l.parse(cn[ax]))}return{valueWindow:Ct,percentWindow:d}},t.prototype.reset=function(n){if(n===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,a),this._updateMinMaxSpan();var s=this.calculateDataWindow(n.settledOption);this._valueWindow=s.valueWindow,this._percentWindow=s.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(n,a){if(n!==this._dataZoomModel)return;var s=this._dimName,l=this.getTargetSeriesModels(),u=n.get("filterMode"),c=this._valueWindow;if(u==="none")return;each$7(l,function(Ct){var ar=Ct.getData(),en=ar.mapDimensionsAll(s);if(en.length){if(u==="weakFilter"){var tn=ar.getStore(),on=map$1(en,function(cn){return ar.getDimensionIndex(cn)},ar);ar.filterSelf(function(cn){for(var dn,Cn,In,ix=0;ix<en.length;ix++){var ax=tn.get(on[ix],cn),ox=!isNaN(ax),sx=ax<c[0],ux=ax>c[1];if(ox&&!sx&&!ux)return!0;ox&&(In=!0),sx&&(dn=!0),ux&&(Cn=!0)}return In&&dn&&Cn})}else each$7(en,function(cn){if(u==="empty")Ct.setData(ar=ar.map(cn,function(Cn){return d(Cn)?Cn:NaN}));else{var dn={};dn[cn]=c,ar.selectRange(dn)}});each$7(en,function(cn){ar.setApproximateExtent(c,cn)})}});function d(Ct){return Ct>=c[0]&&Ct<=c[1]}},t.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},a=this._dataZoomModel,s=this._dataExtent;each$7(["min","max"],function(l){var u=a.get(l+"Span"),c=a.get(l+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?u=linearMap$2(s[0]+c,s,[0,100],!0):u!=null&&(c=linearMap$2(u,[0,100],s,!0)-s[0]),n[l+"Span"]=u,n[l+"ValueSpan"]=c},this)},t.prototype._setAxisModel=function(){var n=this.getAxisModel(),a=this._percentWindow,s=this._valueWindow;if(a){var l=getPixelPrecision(s,[0,500]);l=Math.min(l,20);var u=n.axis.scale.rawExtentInfo;a[0]!==0&&u.setDeterminedMinMax("min",+s[0].toFixed(l)),a[1]!==100&&u.setDeterminedMinMax("max",+s[1].toFixed(l)),u.freeze()}},t})();function calculateDataExtent(t,n,a){var s=[1/0,-1/0];each$7(a,function(c){unionAxisExtentFromData(s,c.getData(),n)});var l=t.getAxisModel(),u=ensureScaleRawExtentInfo(l.axis.scale,l,s).calculate();return[u.min,u.max]}var dataZoomProcessor={getTargetSeries:function(t){function n(l){t.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(c,d){var Ct=t.getComponent(getAxisMainType(c),d);l(c,d,Ct,u)})})}n(function(l,u,c,d){c.__dzAxisProxy=null});var a=[];n(function(l,u,c,d){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy(l,u,d,t),a.push(c.__dzAxisProxy))});var s=createHashMap();return each$f(a,function(l){each$f(l.getTargetSeriesModels(),function(u){s.set(u.uid,u)})}),s},overallReset:function(t,n){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(s,l){a.getAxisProxy(s,l).reset(a)}),a.eachTargetAxis(function(s,l){a.getAxisProxy(s,l).filterData(a,n)})}),t.eachComponent("dataZoom",function(a){var s=a.findRepresentativeAxisProxy();if(s){var l=s.getDataPercentWindow(),u=s.getDataValueWindow();a.setCalculatedRange({start:l[0],end:l[1],startValue:u[0],endValue:u[1]})}})}};function installDataZoomAction(t){t.registerAction("dataZoom",function(n,a){var s=findEffectedDataZooms(a,n);each$f(s,function(l){l.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}var installed$1=!1;function installCommon$1(t){installed$1||(installed$1=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(t){t.registerComponentModel(SelectDataZoomModel),t.registerComponentView(SelectDataZoomView),installCommon$1(t)}var ToolboxFeature=(function(){function t(){}return t})(),features={};function registerFeature(t,n){features[t]=n}function getFeature(t){return features[t]}var ToolboxModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;each$f(this.option.feature,function(s,l){var u=getFeature(l);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(a)),merge(s,u.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n})(ComponentModel);function layout(t,n,a){var s=n.getBoxLayoutParams(),l=n.get("padding"),u={width:a.getWidth(),height:a.getHeight()},c=getLayoutRect(s,u,l);box(n.get("orient"),t,n.get("itemGap"),c.width,c.height),positionElement(t,s,u,l)}function makeBackground(t,n){var a=normalizeCssArray(n.get("padding")),s=n.getItemStyle(["color","opacity"]);return s.fill=n.get("backgroundColor"),t=new Rect$2({shape:{x:t.x-a[3],y:t.y-a[0],width:t.width+a[1]+a[3],height:t.height+a[0]+a[2],r:n.get("borderRadius")},style:s,silent:!0,z2:-1}),t}var ToolboxView=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l,u){var c=this.group;if(c.removeAll(),!a.get("show"))return;var d=+a.get("itemSize"),Ct=a.get("orient")==="vertical",ar=a.get("feature")||{},en=this._features||(this._features={}),tn=[];each$f(ar,function(dn,Cn){tn.push(Cn)}),new DataDiffer(this._featureNames||[],tn).add(on).update(on).remove(curry$1(on,null)).execute(),this._featureNames=tn;function on(dn,Cn){var In=tn[dn],ix=tn[Cn],ax=ar[In],ox=new Model(ax,a,a.ecModel),sx;if(u&&u.newTitle!=null&&u.featureName===In&&(ax.title=u.newTitle),In&&!ix){if(isUserFeatureName(In))sx={onclick:ox.option.onclick,featureName:In};else{var ux=getFeature(In);if(!ux)return;sx=new ux}en[In]=sx}else if(sx=en[ix],!sx)return;sx.uid=getUID("toolbox-feature"),sx.model=ox,sx.ecModel=s,sx.api=l;var cx=sx instanceof ToolboxFeature;if(!In&&ix){cx&&sx.dispose&&sx.dispose(s,l);return}if(!ox.get("show")||cx&&sx.unusable){cx&&sx.remove&&sx.remove(s,l);return}cn(ox,sx,In),ox.setIconStatus=function(hx,gx){var fx=this.option,dx=this.iconPaths;fx.iconStatus=fx.iconStatus||{},fx.iconStatus[hx]=gx,dx[hx]&&(gx==="emphasis"?enterEmphasis:leaveEmphasis)(dx[hx])},sx instanceof ToolboxFeature&&sx.render&&sx.render(ox,s,l,u)}function cn(dn,Cn,In){var ix=dn.getModel("iconStyle"),ax=dn.getModel(["emphasis","iconStyle"]),ox=Cn instanceof ToolboxFeature&&Cn.getIcons?Cn.getIcons():dn.get("icon"),sx=dn.get("title")||{},ux,cx;isString$1(ox)?(ux={},ux[In]=ox):ux=ox,isString$1(sx)?(cx={},cx[In]=sx):cx=sx;var hx=dn.iconPaths={};each$f(ux,function(gx,fx){var dx=createIcon(gx,{},{x:-d/2,y:-d/2,width:d,height:d});dx.setStyle(ix.getItemStyle());var mx=dx.ensureState("emphasis");mx.style=ax.getItemStyle();var vx=new ZRText({style:{text:cx[fx],align:ax.get("textAlign"),borderRadius:ax.get("textBorderRadius"),padding:ax.get("textPadding"),fill:null,font:getFont({fontStyle:ax.get("textFontStyle"),fontFamily:ax.get("textFontFamily"),fontSize:ax.get("textFontSize"),fontWeight:ax.get("textFontWeight")},s)},ignore:!0});dx.setTextContent(vx),setTooltipConfig({el:dx,componentModel:a,itemName:fx,formatterParamsExtra:{title:cx[fx]}}),dx.__title=cx[fx],dx.on("mouseover",function(){var bx=ax.getItemStyle(),xx=Ct?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";vx.setStyle({fill:ax.get("textFill")||bx.fill||bx.stroke||"#000",backgroundColor:ax.get("textBackgroundColor")}),dx.setTextConfig({position:ax.get("textPosition")||xx}),vx.ignore=!a.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){dn.get(["iconStatus",fx])!=="emphasis"&&l.leaveEmphasis(this),vx.hide()}),(dn.get(["iconStatus",fx])==="emphasis"?enterEmphasis:leaveEmphasis)(dx),c.add(dx),dx.on("click",bind$1(Cn.onclick,Cn,s,l,fx)),hx[fx]=dx})}layout(c,a,l),c.add(makeBackground(c.getBoundingRect(),a)),Ct||c.eachChild(function(dn){var Cn=dn.__title,In=dn.ensureState("emphasis"),ix=In.textConfig||(In.textConfig={}),ax=dn.getTextContent(),ox=ax&&ax.ensureState("emphasis");if(ox&&!isFunction$1(ox)&&Cn){var sx=ox.style||(ox.style={}),ux=getBoundingRect(Cn,ZRText.makeFont(sx)),cx=dn.x+c.x,hx=dn.y+c.y+d,gx=!1;hx+ux.height>l.getHeight()&&(ix.position="top",gx=!0);var fx=gx?-5-ux.height:d+10;cx+ux.width/2>l.getWidth()?(ix.position=["100%",fx],sx.align="right"):cx-ux.width/2<0&&(ix.position=[0,fx],sx.align="left")}})},n.prototype.updateView=function(a,s,l,u){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,s,l,u)})},n.prototype.remove=function(a,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(a,s)}),this.group.removeAll()},n.prototype.dispose=function(a,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(a,s)})},n.type="toolbox",n})(ComponentView);function isUserFeatureName(t){return t.indexOf("my")===0}var SaveAsImage=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){var l=this.model,u=l.get("name")||a.get("title.0.text")||"echarts",c=s.getZr().painter.getType()==="svg",d=c?"svg":l.get("type",!0)||"png",Ct=s.getConnectedDataURL({type:d,backgroundColor:l.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),ar=env.browser;if(typeof MouseEvent=="function"&&(ar.newEdge||!ar.ie&&!ar.edge)){var en=document.createElement("a");en.download=u+"."+d,en.target="_blank",en.href=Ct;var tn=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});en.dispatchEvent(tn)}else if(window.navigator.msSaveOrOpenBlob||c){var on=Ct.split(","),cn=on[0].indexOf("base64")>-1,dn=c?decodeURIComponent(on[1]):on[1];cn&&(dn=window.atob(dn));var Cn=u+"."+d;if(window.navigator.msSaveOrOpenBlob){for(var In=dn.length,ix=new Uint8Array(In);In--;)ix[In]=dn.charCodeAt(In);var ax=new Blob([ix]);window.navigator.msSaveOrOpenBlob(ax,Cn)}else{var ox=document.createElement("iframe");document.body.appendChild(ox);var sx=ox.contentWindow,ux=sx.document;ux.open("image/svg+xml","replace"),ux.write(dn),ux.close(),sx.focus(),ux.execCommand("SaveAs",!0,Cn),document.body.removeChild(ox)}}else{var cx=l.get("lang"),hx='<body style="margin:0;"><img src="'+Ct+'" style="max-width:100%;" title="'+(cx&&cx[0]||"")+'" /></body>',gx=window.open();gx.document.write(hx),gx.document.title=u}},n.getDefaultOption=function(a){var s={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return s},n})(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getIcons=function(){var a=this.model,s=a.get("icon"),l={};return each$f(a.get("type"),function(u){s[u]&&(l[u]=s[u])}),l},n.getDefaultOption=function(a){var s={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return s},n.prototype.onclick=function(a,s,l){var u=this.model,c=u.get(["seriesIndex",l]);if(seriesOptGenreator[l]){var d={series:[]},Ct=function(tn){var on=tn.subType,cn=tn.id,dn=seriesOptGenreator[l](on,cn,tn,u);dn&&(defaults(dn,tn.option),d.series.push(dn));var Cn=tn.coordinateSystem;if(Cn&&Cn.type==="cartesian2d"&&(l==="line"||l==="bar")){var In=Cn.getAxesByScale("ordinal")[0];if(In){var ix=In.dim,ax=ix+"Axis",ox=tn.getReferringComponents(ax,SINGLE_REFERRING).models[0],sx=ox.componentIndex;d[ax]=d[ax]||[];for(var ux=0;ux<=sx;ux++)d[ax][sx]=d[ax][sx]||{};d[ax][sx].boundaryGap=l==="bar"}}};each$f(radioTypes,function(tn){indexOf(tn,l)>=0&&each$f(tn,function(on){u.setIconStatus(on,"normal")})}),u.setIconStatus(l,"emphasis"),a.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},Ct);var ar,en=l;l==="stack"&&(ar=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",l])!=="emphasis"&&(en="tiled")),s.dispatchAction({type:"changeMagicType",currentType:en,newOption:d,newTitle:ar,featureName:"magicType"})}},n})(ToolboxFeature),seriesOptGenreator={line:function(t,n,a,s){if(t==="bar")return merge({id:n,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","line"])||{},!0)},bar:function(t,n,a,s){if(t==="line")return merge({id:n,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","bar"])||{},!0)},stack:function(t,n,a,s){var l=a.get("stack")===INNER_STACK_KEYWORD;if(t==="line"||t==="bar")return s.setIconStatus("stack",l?"normal":"emphasis"),merge({id:n,stack:l?"":INNER_STACK_KEYWORD},s.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,n){n.mergeOption(t.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(t){var n={},a=[],s=[];return t.eachRawSeries(function(l){var u=l.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var c=u.getBaseAxis();if(c.type==="category"){var d=c.dim+"_"+c.index;n[d]||(n[d]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},s.push({axisDim:c.dim,axisIndex:c.index})),n[d].series.push(l)}else a.push(l)}else a.push(l)}),{seriesGroupByCategoryAxis:n,other:a,meta:s}}function assembleSeriesWithCategoryAxis(t){var n=[];return each$f(t,function(a,s){var l=a.categoryAxis,u=a.valueAxis,c=u.dim,d=[" "].concat(map$1(a.series,function(cn){return cn.name})),Ct=[l.model.getCategories()];each$f(a.series,function(cn){var dn=cn.getRawData();Ct.push(cn.getRawData().mapArray(dn.mapDimension(c),function(Cn){return Cn}))});for(var ar=[d.join(ITEM_SPLITER)],en=0;en<Ct[0].length;en++){for(var tn=[],on=0;on<Ct.length;on++)tn.push(Ct[on][en]);ar.push(tn.join(ITEM_SPLITER))}n.push(ar.join(`
`))}),n.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(t){return map$1(t,function(n){var a=n.getRawData(),s=[n.name],l=[];return a.each(a.dimensions,function(){for(var u=arguments.length,c=arguments[u-1],d=a.getName(c),Ct=0;Ct<u-1;Ct++)l[Ct]=arguments[Ct];s.push((d?d+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),s.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(t){var n=groupSeries(t);return{value:filter([assembleSeriesWithCategoryAxis(n.seriesGroupByCategoryAxis),assembleOtherSeries(n.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:n.meta}}function trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(t){var n=t.slice(0,t.indexOf(`
`));if(n.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()).split(itemSplitRegex),s=[],l=map$1(a,function(Ct){return{name:Ct,data:[]}}),u=0;u<n.length;u++){var c=trim(n[u]).split(itemSplitRegex);s.push(c.shift());for(var d=0;d<c.length;d++)l[d]&&(l[d].data[u]=c[d])}return{series:l,categories:s}}function parseListContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()),s=[],l=0;l<n.length;l++){var u=trim(n[l]);if(u){var c=u.split(itemSplitRegex),d="",Ct=void 0,ar=!1;isNaN(c[0])?(ar=!0,d=c[0],c=c.slice(1),s[l]={name:d,value:[]},Ct=s[l].value):Ct=s[l]=[];for(var en=0;en<c.length;en++)Ct.push(+c[en]);Ct.length===1&&(ar?s[l].value=Ct[0]:s[l]=Ct[0])}}return{name:a,data:s}}function parseContents(t,n){var a=t.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),s={series:[]};return each$f(a,function(l,u){if(isTSVFormat(l)){var c=parseTSVContents(l),d=n[u],Ct=d.axisDim+"Axis";d&&(s[Ct]=s[Ct]||[],s[Ct][d.axisIndex]={data:c.categories},s.series=s.series.concat(c.series))}else{var c=parseListContents(l);s.series.push(c)}}),s}var DataView$1=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){setTimeout(function(){s.dispatchAction({type:"hideTip"})});var l=s.getDom(),u=this.model;this._dom&&l.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=u.get("backgroundColor")||"#fff";var d=document.createElement("h4"),Ct=u.get("lang")||[];d.innerHTML=Ct[0]||u.get("title"),d.style.cssText="margin:10px 20px",d.style.color=u.get("textColor");var ar=document.createElement("div"),en=document.createElement("textarea");ar.style.cssText="overflow:auto";var tn=u.get("optionToContent"),on=u.get("contentToOption"),cn=getContentFromModel(a);if(isFunction$1(tn)){var dn=tn(s.getOption());isString$1(dn)?ar.innerHTML=dn:isDom(dn)&&ar.appendChild(dn)}else{en.readOnly=u.get("readOnly");var Cn=en.style;Cn.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",Cn.color=u.get("textColor"),Cn.borderColor=u.get("textareaBorderColor"),Cn.backgroundColor=u.get("textareaColor"),en.value=cn.value,ar.appendChild(en)}var In=cn.meta,ix=document.createElement("div");ix.style.cssText="position:absolute;bottom:5px;left:0;right:0";var ax="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",ox=document.createElement("div"),sx=document.createElement("div");ax+=";background-color:"+u.get("buttonColor"),ax+=";color:"+u.get("buttonTextColor");var ux=this;function cx(){l.removeChild(c),ux._dom=null}addEventListener(ox,"click",cx),addEventListener(sx,"click",function(){if(on==null&&tn!=null||on!=null&&tn==null){cx();return}var hx;try{isFunction$1(on)?hx=on(ar,s.getOption()):hx=parseContents(en.value,In)}catch(gx){throw cx(),new Error("Data view format error "+gx)}hx&&s.dispatchAction({type:"changeDataView",newOption:hx}),cx()}),ox.innerHTML=Ct[1],sx.innerHTML=Ct[2],sx.style.cssText=ox.style.cssText=ax,!u.get("readOnly")&&ix.appendChild(sx),ix.appendChild(ox),c.appendChild(d),c.appendChild(ar),c.appendChild(ix),ar.style.height=l.clientHeight-80+"px",l.appendChild(c),this._dom=c},n.prototype.remove=function(a,s){this._dom&&s.getDom().removeChild(this._dom)},n.prototype.dispose=function(a,s){this.remove(a,s)},n.getDefaultOption=function(a){var s={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return s},n})(ToolboxFeature);function tryMergeDataOption(t,n){return map$1(t,function(a,s){var l=n&&n[s];if(isObject$3(l)&&!isArray$1(l)){var u=isObject$3(a)&&!isArray$1(a);u||(a={value:a});var c=l.name!=null&&a.name==null;return a=defaults(a,l),c&&delete a.name,a}else return a})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,n){var a=[];each$f(t.newOption.series,function(s){var l=n.getSeriesByName(s.name)[0];if(!l)a.push(extend({type:"scatter"},s));else{var u=l.get("data");a.push({name:s.name,data:tryMergeDataOption(s.data,u)})}}),n.mergeOption(defaults({series:a},t.newOption))});var each$6=each$f,inner$6=makeInner();function push(t,n){var a=getStoreSnapshots(t);each$6(n,function(s,l){for(var u=a.length-1;u>=0;u--){var c=a[u];if(c[l])break}if(u<0){var d=t.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(d){var Ct=d.getPercentRange();a[0][l]={dataZoomId:l,start:Ct[0],end:Ct[1]}}}}),a.push(n)}function pop(t){var n=getStoreSnapshots(t),a=n[n.length-1];n.length>1&&n.pop();var s={};return each$6(a,function(l,u){for(var c=n.length-1;c>=0;c--)if(l=n[c][u],l){s[u]=l;break}}),s}function clear(t){inner$6(t).snapshots=null}function count(t){return getStoreSnapshots(t).length}function getStoreSnapshots(t){var n=inner$6(t);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var RestoreOption=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){clear(a),s.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(a){var s={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return s},n})(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,n){n.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=(function(){function t(n,a,s){var l=this;this._targetInfoList=[];var u=parseFinder(a,n);each$f(targetInfoBuilders,function(c,d){(!s||!s.include||indexOf(s.include,d)>=0)&&c(u,l._targetInfoList)})}return t.prototype.setOutputRanges=function(n,a){return this.matchOutputRanges(n,a,function(s,l,u){if((s.coordRanges||(s.coordRanges=[])).push(l),!s.coordRange){s.coordRange=l;var c=coordConvert[s.brushType](0,u,l);s.__rangeOffset={offset:diffProcessor[s.brushType](c.values,s.range,[1,1]),xyMinMax:c.xyMinMax}}}),n},t.prototype.matchOutputRanges=function(n,a,s){each$f(n,function(l){var u=this.findTargetInfo(l,a);u&&u!==!0&&each$f(u.coordSyses,function(c){var d=coordConvert[l.brushType](1,c,l.range,!0);s(l,d.values,c,a)})},this)},t.prototype.setInputRanges=function(n,a){each$f(n,function(s){var l=this.findTargetInfo(s,a);if(s.range=s.range||[],l&&l!==!0){s.panelId=l.panelId;var u=coordConvert[s.brushType](0,l.coordSys,s.coordRange),c=s.__rangeOffset;s.range=c?diffProcessor[s.brushType](u.values,c.offset,getScales(u.xyMinMax,c.xyMinMax)):u.values}},this)},t.prototype.makePanelOpts=function(n,a){return map$1(this._targetInfoList,function(s){var l=s.getPanelRect();return{panelId:s.panelId,defaultBrushType:a?a(s):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,n,s.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},t.prototype.controlSeries=function(n,a,s){var l=this.findTargetInfo(n,s);return l===!0||l&&indexOf(l.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(n,a){for(var s=this._targetInfoList,l=parseFinder(a,n),u=0;u<s.length;u++){var c=s[u],d=n.panelId;if(d){if(c.panelId===d)return c}else for(var Ct=0;Ct<targetInfoMatchers.length;Ct++)if(targetInfoMatchers[Ct](l,c))return c}return!0},t})();function formatMinMax(t){return t[0]>t[1]&&t.reverse(),t}function parseFinder(t,n){return parseFinder$1(t,n,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(t,n){var a=t.xAxisModels,s=t.yAxisModels,l=t.gridModels,u=createHashMap(),c={},d={};!a&&!s&&!l||(each$f(a,function(Ct){var ar=Ct.axis.grid.model;u.set(ar.id,ar),c[ar.id]=!0}),each$f(s,function(Ct){var ar=Ct.axis.grid.model;u.set(ar.id,ar),d[ar.id]=!0}),each$f(l,function(Ct){u.set(Ct.id,Ct),c[Ct.id]=!0,d[Ct.id]=!0}),u.each(function(Ct){var ar=Ct.coordinateSystem,en=[];each$f(ar.getCartesians(),function(tn,on){(indexOf(a,tn.getAxis("x").model)>=0||indexOf(s,tn.getAxis("y").model)>=0)&&en.push(tn)}),n.push({panelId:"grid--"+Ct.id,gridModel:Ct,coordSysModel:Ct,coordSys:en[0],coordSyses:en,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[Ct.id],yAxisDeclared:d[Ct.id]})}))},geo:function(t,n){each$f(t.geoModels,function(a){var s=a.coordinateSystem;n.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:s,coordSyses:[s],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(t,n){var a=t.xAxisModel,s=t.yAxisModel,l=t.gridModel;return!l&&a&&(l=a.axis.grid.model),!l&&s&&(l=s.axis.grid.model),l&&l===n.gridModel},function(t,n){var a=t.geoModel;return a&&a===n.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,n=t.getBoundingRect().clone();return n.applyTransform(getTransform$1(t)),n}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(t,n,a,s){var l=t?n.pointToData([a[0][0],a[1][0]],s):n.dataToPoint([a[0][0],a[1][0]],s),u=t?n.pointToData([a[0][1],a[1][1]],s):n.dataToPoint([a[0][1],a[1][1]],s),c=[formatMinMax([l[0],u[0]]),formatMinMax([l[1],u[1]])];return{values:c,xyMinMax:c}},polygon:function(t,n,a,s){var l=[[1/0,-1/0],[1/0,-1/0]],u=map$1(a,function(c){var d=t?n.pointToData(c,s):n.dataToPoint(c,s);return l[0][0]=Math.min(l[0][0],d[0]),l[1][0]=Math.min(l[1][0],d[1]),l[0][1]=Math.max(l[0][1],d[0]),l[1][1]=Math.max(l[1][1],d[1]),d});return{values:u,xyMinMax:l}}};function axisConvert(t,n,a,s){var l=a.getAxis(["x","y"][t]),u=formatMinMax(map$1([0,1],function(d){return n?l.coordToData(l.toLocalCoord(s[d]),!0):l.toGlobalCoord(l.dataToCoord(s[d]))})),c=[];return c[t]=u,c[1-t]=[NaN,NaN],{values:u,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(t,n,a){return[[t[0][0]-a[0]*n[0][0],t[0][1]-a[0]*n[0][1]],[t[1][0]-a[1]*n[1][0],t[1][1]-a[1]*n[1][1]]]},polygon:function(t,n,a){return map$1(t,function(s,l){return[s[0]-a[0]*n[l][0],s[1]-a[1]*n[l][1]]})}};function axisDiffProcessor(t,n,a,s){return[n[0]-s[t]*a[0],n[1]-s[t]*a[1]]}function getScales(t,n){var a=getSize(t),s=getSize(n),l=[a[0]/s[0],a[1]/s[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l,u){this._brushController||(this._brushController=new BrushController(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(a,s,this,u,l),updateBackBtnStatus(a,s)},n.prototype.onclick=function(a,s,l){handlers[l].call(this)},n.prototype.remove=function(a,s){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(a,s){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(a){var s=a.areas;if(!a.isEnd||!s.length)return;var l={},u=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager(makeAxisFinder(this.model),u,{include:["grid"]});c.matchOutputRanges(s,u,function(ar,en,tn){if(tn.type==="cartesian2d"){var on=ar.brushType;on==="rect"?(d("x",tn,en[0]),d("y",tn,en[1])):d({lineX:"x",lineY:"y"}[on],tn,en)}}),push(u,l),this._dispatchZoomAction(l);function d(ar,en,tn){var on=en.getAxis(ar),cn=on.model,dn=Ct(ar,cn,u),Cn=dn.findRepresentativeAxisProxy(cn).getMinMaxSpan();(Cn.minValueSpan!=null||Cn.maxValueSpan!=null)&&(tn=sliderMove(0,tn.slice(),on.scale.getExtent(),0,Cn.minValueSpan,Cn.maxValueSpan)),dn&&(l[dn.id]={dataZoomId:dn.id,startValue:tn[0],endValue:tn[1]})}function Ct(ar,en,tn){var on;return tn.eachComponent({mainType:"dataZoom",subType:"select"},function(cn){var dn=cn.getAxisModel(ar,en.componentIndex);dn&&(on=cn)}),on}},n.prototype._dispatchZoomAction=function(a){var s=[];each$5(a,function(l,u){s.push(clone$4(l))}),s.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:s})},n.getDefaultOption=function(a){var s={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return s},n})(ToolboxFeature),handlers={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(t){var n={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return n.xAxisIndex==null&&n.xAxisId==null&&(n.xAxisIndex="all"),n.yAxisIndex==null&&n.yAxisId==null&&(n.yAxisIndex="all"),n}function updateBackBtnStatus(t,n){t.setIconStatus("back",count(n)>1?"emphasis":"normal")}function updateZoomBtnStatus(t,n,a,s,l){var u=a._isZoomActive;s&&s.type==="takeGlobalCursor"&&(u=s.key==="dataZoomSelect"?s.dataZoomSelectActive:!1),a._isZoomActive=u,t.setIconStatus("zoom",u?"emphasis":"normal");var c=new BrushTargetManager(makeAxisFinder(t),n,{include:["grid"]}),d=c.makePanelOpts(l,function(Ct){return Ct.xAxisDeclared&&!Ct.yAxisDeclared?"lineX":!Ct.xAxisDeclared&&Ct.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(d).enableBrush(u&&d.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(t){var n=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!n||n.get(a)==null)return;var s=n.getModel(a),l=[],u=makeAxisFinder(s),c=parseFinder$1(t,u);each$5(c.xAxisModels,function(Ct){return d(Ct,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(Ct){return d(Ct,"yAxis","yAxisIndex")});function d(Ct,ar,en){var tn=Ct.componentIndex,on={type:"select",$fromToolbox:!0,filterMode:s.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+ar+tn};on[en]=tn,l.push(on)}return l});function install$j(t){t.registerComponentModel(ToolboxModel),t.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n})(ComponentModel);function shouldTooltipConfine(t){var n=t.get("confine");return n!=null?!!n:t.get("renderMode")==="richText"}function testStyle(t){if(env.domSupported){for(var n=document.documentElement.style,a=0,s=t.length;a<s;a++)if(t[a]in n)return t[a]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(t,n){if(!t)return n;n=toCamelCase(n,!0);var a=t.indexOf(n);return t=a===-1?n:"-"+t.slice(0,a)+"-"+n,t.toLowerCase()}function getComputedStyle$1(t,n){var a=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return a?a[n]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function assembleArrow(t,n,a){if(!isString$1(a)||a==="inside")return"";var s=t.get("backgroundColor"),l=t.get("borderWidth");n=convertToColorString(n);var u=mirrorPos(a),c=Math.max(Math.round(l)*1.5,6),d="",Ct=CSS_TRANSFORM_VENDOR+":",ar;indexOf(["left","right"],u)>-1?(d+="top:50%",Ct+="translateY(-50%) rotate("+(ar=u==="left"?-225:-45)+"deg)"):(d+="left:50%",Ct+="translateX(-50%) rotate("+(ar=u==="top"?225:45)+"deg)");var en=ar*Math.PI/180,tn=c+l,on=tn*Math.abs(Math.cos(en))+tn*Math.abs(Math.sin(en)),cn=Math.round(((on-Math.SQRT2*l)/2+Math.SQRT2*l-(on-tn)/2)*100)/100;d+=";"+u+":-"+cn+"px";var dn=n+" solid "+l+"px;",Cn=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",d+";"+Ct+";","border-bottom:"+dn,"border-right:"+dn,"background-color:"+s+";"];return'<div style="'+Cn.join("")+'"></div>'}function assembleTransition(t,n){var a="cubic-bezier(0.23,1,0.32,1)",s=" "+t/2+"s "+a,l="opacity"+s+",visibility"+s;return n||(s=" "+t+"s "+a,l+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+s:",left"+s+",top"+s),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(t,n,a){var s=t.toFixed(0)+"px",l=n.toFixed(0)+"px";if(!env.transformSupported)return a?"top:"+l+";left:"+s+";":[["top",l],["left",s]];var u=env.transform3dSupported,c="translate"+(u?"3d":"")+"("+s+","+l+(u?",0":"")+")";return a?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(t){var n=[],a=t.get("fontSize"),s=t.getTextColor();s&&n.push("color:"+s),n.push("font:"+t.getFont());var l=retrieve2(t.get("lineHeight"),Math.round(a*3/2));a&&n.push("line-height:"+l+"px");var u=t.get("textShadowColor"),c=t.get("textShadowBlur")||0,d=t.get("textShadowOffsetX")||0,Ct=t.get("textShadowOffsetY")||0;return u&&c&&n.push("text-shadow:"+d+"px "+Ct+"px "+c+"px "+u),each$f(["decoration","align"],function(ar){var en=t.get(ar);en&&n.push("text-"+ar+":"+en)}),n.join(";")}function assembleCssText(t,n,a){var s=[],l=t.get("transitionDuration"),u=t.get("backgroundColor"),c=t.get("shadowBlur"),d=t.get("shadowColor"),Ct=t.get("shadowOffsetX"),ar=t.get("shadowOffsetY"),en=t.getModel("textStyle"),tn=getPaddingFromTooltipModel(t,"html"),on=Ct+"px "+ar+"px "+c+"px "+d;return s.push("box-shadow:"+on),n&&l&&s.push(assembleTransition(l,a)),u&&s.push("background-color:"+u),each$f(["width","color","radius"],function(cn){var dn="border-"+cn,Cn=toCamelCase(dn),In=t.get(Cn);In!=null&&s.push(dn+":"+In+(cn==="color"?"":"px"))}),s.push(assembleFont(en)),tn!=null&&s.push("padding:"+normalizeCssArray(tn).join("px ")+"px"),s.join(";")+";"}function makeStyleCoord$1(t,n,a,s,l){var u=n&&n.painter;if(a){var c=u&&u.getViewportRoot();c&&transformLocalCoord(t,c,a,s,l)}else{t[0]=s,t[1]=l;var d=u&&u.getViewportRootOffset();d&&(t[0]+=d.offsetLeft,t[1]+=d.offsetTop)}t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var TooltipHTMLContent=(function(){function t(n,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var l=this._zr=n.getZr(),u=a.appendTo,c=u&&(isString$1(u)?document.querySelector(u):isDom(u)?u:isFunction$1(u)&&u(n.getDom()));makeStyleCoord$1(this._styleCoord,l,c,n.getWidth()/2,n.getHeight()/2),(c||n.getDom()).appendChild(s),this._api=n,this._container=c;var d=this;s.onmouseenter=function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0},s.onmousemove=function(Ct){if(Ct=Ct||window.event,!d._enterable){var ar=l.handler,en=l.painter.getViewportRoot();normalizeEvent(en,Ct,!0),ar.dispatch("mousemove",Ct)}},s.onmouseleave=function(){d._inContent=!1,d._enterable&&d._show&&d.hideLater(d._hideDelay)}}return t.prototype.update=function(n){if(!this._container){var a=this._api.getDom(),s=getComputedStyle$1(a,"position"),l=a.style;l.position!=="absolute"&&s!=="absolute"&&(l.position="relative")}var u=n.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=n.get("className")||""},t.prototype.show=function(n,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el,l=s.style,u=this._styleCoord;s.innerHTML?l.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(a)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(n,a,s,l,u){var c=this.el;if(n==null){c.innerHTML="";return}var d="";if(isString$1(u)&&s.get("trigger")==="item"&&!shouldTooltipConfine(s)&&(d=assembleArrow(s,l,u)),isString$1(n))c.innerHTML=n+d;else if(n){c.innerHTML="",isArray$1(n)||(n=[n]);for(var Ct=0;Ct<n.length;Ct++)isDom(n[Ct])&&n[Ct].parentNode!==c&&c.appendChild(n[Ct]);if(d&&c.childNodes.length){var ar=document.createElement("div");ar.innerHTML=d,c.appendChild(ar)}}},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},t.prototype.moveTo=function(n,a){if(this.el){var s=this._styleCoord;if(makeStyleCoord$1(s,this._zr,this._container,n,a),s[0]!=null&&s[1]!=null){var l=this.el.style,u=assembleTransform(s[0],s[1]);each$f(u,function(c){l[c[0]]=c[1]})}}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){var n=this,a=this.el.style;a.visibility="hidden",a.opacity="0",env.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el.parentNode;n&&n.removeChild(this.el),this.el=this._container=null},t})(),TooltipRichContent=(function(){function t(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return t.prototype.update=function(n){var a=n.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(n,a,s,l,u){var c=this;isObject$3(n)&&throwError(""),this.el&&this._zr.remove(this.el);var d=s.getModel("textStyle");this.el=new ZRText({style:{rich:a.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:d.get("textShadowColor"),fill:s.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(s,"richText"),verticalAlign:"top",align:"left"},z:s.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(ar){c.el.style[ar]=s.get(ar)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(ar){c.el.style[ar]=d.get(ar)||0}),this._zr.add(this.el);var Ct=this;this.el.on("mouseover",function(){Ct._enterable&&(clearTimeout(Ct._hideTimeout),Ct._show=!0),Ct._inContent=!0}),this.el.on("mouseout",function(){Ct._enterable&&Ct._show&&Ct.hideLater(Ct._hideDelay),Ct._inContent=!1})},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el,a=this.el.getBoundingRect(),s=calcShadowOuterSize(n.style);return[a.width+s.left+s.right,a.height+s.top+s.bottom]},t.prototype.moveTo=function(n,a){var s=this.el;if(s){var l=this._styleCoord;makeStyleCoord(l,this._zr,n,a),n=l[0],a=l[1];var u=s.style,c=mathMaxWith0(u.borderWidth||0),d=calcShadowOuterSize(u);s.x=n+c+d.left,s.y=a+c+d.top,s.markRedraw()}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t})();function mathMaxWith0(t){return Math.max(0,t)}function calcShadowOuterSize(t){var n=mathMaxWith0(t.shadowBlur||0),a=mathMaxWith0(t.shadowOffsetX||0),s=mathMaxWith0(t.shadowOffsetY||0);return{left:mathMaxWith0(n-a),right:mathMaxWith0(n+a),top:mathMaxWith0(n-s),bottom:mathMaxWith0(n+s)}}function makeStyleCoord(t,n,a,s){t[0]=a,t[1]=s,t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){if(!(env.node||!s.getDom())){var l=a.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent(s):new TooltipHTMLContent(s,{appendTo:l.get("appendToBody",!0)?"body":l.get("appendTo",!0)})}},n.prototype.render=function(a,s,l){if(!(env.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=s,this._api=l;var u=this._tooltipContent;u.update(a),u.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var a=this._tooltipModel,s=a.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,u,c){s!=="none"&&(s.indexOf(l)>=0?this._tryShow(u,c):l==="leave"&&this._hide(c))},this))},n.prototype._keepShow=function(){var a=this._tooltipModel,s=this._ecModel,l=this._api,u=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&c.manuallyShowTip(a,s,l,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(a,s,l,u){if(!(u.from===this.uid||env.node||!l.getDom())){var c=makeDispatchAction(u,l);this._ticket="";var d=u.dataByCoordSys,Ct=findComponentReference(u,s,l);if(Ct){var ar=Ct.el.getBoundingRect().clone();ar.applyTransform(Ct.el.transform),this._tryShow({offsetX:ar.x+ar.width/2,offsetY:ar.y+ar.height/2,target:Ct.el,position:u.position,positionDefault:"bottom"},c)}else if(u.tooltip&&u.x!=null&&u.y!=null){var en=proxyRect;en.x=u.x,en.y=u.y,en.update(),getECData(en).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:en},c)}else if(d)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:d,tooltipOption:u.tooltipOption},c);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(a,s,l,u))return;var tn=findPointFromSeries(u,s),on=tn.point[0],cn=tn.point[1];on!=null&&cn!=null&&this._tryShow({offsetX:on,offsetY:cn,target:tn.el,position:u.position,positionDefault:"bottom"},c)}else u.x!=null&&u.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:l.getZr().findHover(u.x,u.y).target},c))}},n.prototype.manuallyHideTip=function(a,s,l,u){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,l))},n.prototype._manuallyAxisShowTip=function(a,s,l,u){var c=u.seriesIndex,d=u.dataIndex,Ct=s.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||d==null||Ct==null)){var ar=s.getSeriesByIndex(c);if(ar){var en=ar.getData(),tn=buildTooltipModel([en.getItemModel(d),ar,(ar.coordinateSystem||{}).model],this._tooltipModel);if(tn.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:d,position:u.position}),!0}}},n.prototype._tryShow=function(a,s){var l=a.target,u=this._tooltipModel;if(u){this._lastX=a.offsetX,this._lastY=a.offsetY;var c=a.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,a);else if(l){var d=getECData(l);if(d.ssrType==="legend")return;this._lastDataByCoordSys=null;var Ct,ar;findEventDispatcher(l,function(en){if(getECData(en).dataIndex!=null)return Ct=en,!0;if(getECData(en).tooltipConfig!=null)return ar=en,!0},!0),Ct?this._showSeriesItemTooltip(a,Ct,s):ar?this._showComponentItemTooltip(a,ar,s):this._hide(s)}else this._lastDataByCoordSys=null,this._hide(s)}},n.prototype._showOrMove=function(a,s){var l=a.get("showDelay");s=bind$1(s,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(s,l):s()},n.prototype._showAxisTooltip=function(a,s){var l=this._ecModel,u=this._tooltipModel,c=[s.offsetX,s.offsetY],d=buildTooltipModel([s.tooltipOption],u),Ct=this._renderMode,ar=[],en=createTooltipMarkup("section",{blocks:[],noHeader:!0}),tn=[],on=new TooltipMarkupStyleCreator;each$f(a,function(ax){each$f(ax.dataByAxis,function(ox){var sx=l.getComponent(ox.axisDim+"Axis",ox.axisIndex),ux=ox.value;if(!(!sx||ux==null)){var cx=getValueLabel(ux,sx.axis,l,ox.seriesDataIndices,ox.valueLabelOpt),hx=createTooltipMarkup("section",{header:cx,noHeader:!trim$1(cx),sortBlocks:!0,blocks:[]});en.blocks.push(hx),each$f(ox.seriesDataIndices,function(gx){var fx=l.getSeriesByIndex(gx.seriesIndex),dx=gx.dataIndexInside,mx=fx.getDataParams(dx);if(!(mx.dataIndex<0)){mx.axisDim=ox.axisDim,mx.axisIndex=ox.axisIndex,mx.axisType=ox.axisType,mx.axisId=ox.axisId,mx.axisValue=getAxisRawValue(sx.axis,{value:ux}),mx.axisValueLabel=cx,mx.marker=on.makeTooltipMarker("item",convertToColorString(mx.color),Ct);var vx=normalizeTooltipFormatResult(fx.formatTooltip(dx,!0,null)),bx=vx.frag;if(bx){var xx=buildTooltipModel([fx],u).get("valueFormatter");hx.blocks.push(xx?extend({valueFormatter:xx},bx):bx)}vx.text&&tn.push(vx.text),ar.push(mx)}})}})}),en.blocks.reverse(),tn.reverse();var cn=s.position,dn=d.get("order"),Cn=buildTooltipMarkup(en,on,Ct,dn,l.get("useUTC"),d.get("textStyle"));Cn&&tn.unshift(Cn);var In=Ct==="richText"?`

`:"<br/>",ix=tn.join(In);this._showOrMove(d,function(){this._updateContentNotChangedOnAxis(a,ar)?this._updatePosition(d,cn,c[0],c[1],this._tooltipContent,ar):this._showTooltipContent(d,ix,ar,Math.random()+"",c[0],c[1],cn,null,on)})},n.prototype._showSeriesItemTooltip=function(a,s,l){var u=this._ecModel,c=getECData(s),d=c.seriesIndex,Ct=u.getSeriesByIndex(d),ar=c.dataModel||Ct,en=c.dataIndex,tn=c.dataType,on=ar.getData(tn),cn=this._renderMode,dn=a.positionDefault,Cn=buildTooltipModel([on.getItemModel(en),ar,Ct&&(Ct.coordinateSystem||{}).model],this._tooltipModel,dn?{position:dn}:null),In=Cn.get("trigger");if(!(In!=null&&In!=="item")){var ix=ar.getDataParams(en,tn),ax=new TooltipMarkupStyleCreator;ix.marker=ax.makeTooltipMarker("item",convertToColorString(ix.color),cn);var ox=normalizeTooltipFormatResult(ar.formatTooltip(en,!1,tn)),sx=Cn.get("order"),ux=Cn.get("valueFormatter"),cx=ox.frag,hx=cx?buildTooltipMarkup(ux?extend({valueFormatter:ux},cx):cx,ax,cn,sx,u.get("useUTC"),Cn.get("textStyle")):ox.text,gx="item_"+ar.name+"_"+en;this._showOrMove(Cn,function(){this._showTooltipContent(Cn,hx,ix,gx,a.offsetX,a.offsetY,a.position,a.target,ax)}),l({type:"showTip",dataIndexInside:en,dataIndex:on.getRawIndex(en),seriesIndex:d,from:this.uid})}},n.prototype._showComponentItemTooltip=function(a,s,l){var u=this._renderMode==="html",c=getECData(s),d=c.tooltipConfig,Ct=d.option||{},ar=Ct.encodeHTMLContent;if(isString$1(Ct)){var en=Ct;Ct={content:en,formatter:en},ar=!0}ar&&u&&Ct.content&&(Ct=clone$4(Ct),Ct.content=encodeHTML(Ct.content));var tn=[Ct],on=this._ecModel.getComponent(c.componentMainType,c.componentIndex);on&&tn.push(on),tn.push({formatter:Ct.content});var cn=a.positionDefault,dn=buildTooltipModel(tn,this._tooltipModel,cn?{position:cn}:null),Cn=dn.get("content"),In=Math.random()+"",ix=new TooltipMarkupStyleCreator;this._showOrMove(dn,function(){var ax=clone$4(dn.get("formatterParams")||{});this._showTooltipContent(dn,Cn,ax,In,a.offsetX,a.offsetY,a.position,s,ix)}),l({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(a,s,l,u,c,d,Ct,ar,en){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var tn=this._tooltipContent;tn.setEnterable(a.get("enterable"));var on=a.get("formatter");Ct=Ct||a.get("position");var cn=s,dn=this._getNearestPoint([c,d],l,a.get("trigger"),a.get("borderColor")),Cn=dn.color;if(on)if(isString$1(on)){var In=a.ecModel.get("useUTC"),ix=isArray$1(l)?l[0]:l,ax=ix&&ix.axisType&&ix.axisType.indexOf("time")>=0;cn=on,ax&&(cn=format$1(ix.axisValue,cn,In)),cn=formatTpl(cn,l,!0)}else if(isFunction$1(on)){var ox=bind$1(function(sx,ux){sx===this._ticket&&(tn.setContent(ux,en,a,Cn,Ct),this._updatePosition(a,Ct,c,d,tn,l,ar))},this);this._ticket=u,cn=on(l,u,ox)}else cn=on;tn.setContent(cn,en,a,Cn,Ct),tn.show(a,Cn),this._updatePosition(a,Ct,c,d,tn,l,ar)}},n.prototype._getNearestPoint=function(a,s,l,u){if(l==="axis"||isArray$1(s))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(s))return{color:u||s.color||s.borderColor}},n.prototype._updatePosition=function(a,s,l,u,c,d,Ct){var ar=this._api.getWidth(),en=this._api.getHeight();s=s||a.get("position");var tn=c.getSize(),on=a.get("align"),cn=a.get("verticalAlign"),dn=Ct&&Ct.getBoundingRect().clone();if(Ct&&dn.applyTransform(Ct.transform),isFunction$1(s)&&(s=s([l,u],d,c.el,dn,{viewSize:[ar,en],contentSize:tn.slice()})),isArray$1(s))l=parsePercent(s[0],ar),u=parsePercent(s[1],en);else if(isObject$3(s)){var Cn=s;Cn.width=tn[0],Cn.height=tn[1];var In=getLayoutRect(Cn,{width:ar,height:en});l=In.x,u=In.y,on=null,cn=null}else if(isString$1(s)&&Ct){var ix=calcTooltipPosition(s,dn,tn,a.get("borderWidth"));l=ix[0],u=ix[1]}else{var ix=refixTooltipPosition(l,u,c,ar,en,on?null:20,cn?null:20);l=ix[0],u=ix[1]}if(on&&(l-=isCenterAlign(on)?tn[0]/2:on==="right"?tn[0]:0),cn&&(u-=isCenterAlign(cn)?tn[1]/2:cn==="bottom"?tn[1]:0),shouldTooltipConfine(a)){var ix=confineTooltipPosition(l,u,c,ar,en);l=ix[0],u=ix[1]}c.moveTo(l,u)},n.prototype._updateContentNotChangedOnAxis=function(a,s){var l=this._lastDataByCoordSys,u=this._cbParamsList,c=!!l&&l.length===a.length;return c&&each$f(l,function(d,Ct){var ar=d.dataByAxis||[],en=a[Ct]||{},tn=en.dataByAxis||[];c=c&&ar.length===tn.length,c&&each$f(ar,function(on,cn){var dn=tn[cn]||{},Cn=on.seriesDataIndices||[],In=dn.seriesDataIndices||[];c=c&&on.value===dn.value&&on.axisType===dn.axisType&&on.axisId===dn.axisId&&Cn.length===In.length,c&&each$f(Cn,function(ix,ax){var ox=In[ax];c=c&&ix.seriesIndex===ox.seriesIndex&&ix.dataIndex===ox.dataIndex}),u&&each$f(on.seriesDataIndices,function(ix){var ax=ix.seriesIndex,ox=s[ax],sx=u[ax];ox&&sx&&sx.data!==ox.data&&(c=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=s,!!c},n.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},n.prototype.dispose=function(a,s){env.node||!s.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",s))},n.type="tooltip",n})(ComponentView);function buildTooltipModel(t,n,a){var s=n.ecModel,l;a?(l=new Model(a,s,s),l=new Model(n.option,l,s)):l=n;for(var u=t.length-1;u>=0;u--){var c=t[u];c&&(c instanceof Model&&(c=c.get("tooltip",!0)),isString$1(c)&&(c={formatter:c}),c&&(l=new Model(c,l,s)))}return l}function makeDispatchAction(t,n){return t.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(t,n,a,s,l,u,c){var d=a.getSize(),Ct=d[0],ar=d[1];return u!=null&&(t+Ct+u+2>s?t-=Ct+u:t+=u),c!=null&&(n+ar+c>l?n-=ar+c:n+=c),[t,n]}function confineTooltipPosition(t,n,a,s,l){var u=a.getSize(),c=u[0],d=u[1];return t=Math.min(t+c,s)-c,n=Math.min(n+d,l)-d,t=Math.max(t,0),n=Math.max(n,0),[t,n]}function calcTooltipPosition(t,n,a,s){var l=a[0],u=a[1],c=Math.ceil(Math.SQRT2*s)+8,d=0,Ct=0,ar=n.width,en=n.height;switch(t){case"inside":d=n.x+ar/2-l/2,Ct=n.y+en/2-u/2;break;case"top":d=n.x+ar/2-l/2,Ct=n.y-u-c;break;case"bottom":d=n.x+ar/2-l/2,Ct=n.y+en+c;break;case"left":d=n.x-l-c,Ct=n.y+en/2-u/2;break;case"right":d=n.x+ar+c,Ct=n.y+en/2-u/2}return[d,Ct]}function isCenterAlign(t){return t==="center"||t==="middle"}function findComponentReference(t,n,a){var s=preParseFinder(t).queryOptionMap,l=s.keys()[0];if(!(!l||l==="series")){var u=queryReferringComponents(n,l,s.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),c=u.models[0];if(c){var d=a.getViewOfComponentModel(c),Ct;if(d.group.traverse(function(ar){var en=getECData(ar).tooltipConfig;if(en&&en.name===t.name)return Ct=ar,!0}),Ct)return{componentMainType:l,componentIndex:c.componentIndex,el:Ct}}}}function install$i(t){use(install$q),t.registerComponentModel(TooltipModel),t.registerComponentView(TooltipView),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(t,n){var a=normalizeToArray(t?t.brush:[]);if(a.length){var s=[];each$f(a,function(Ct){var ar=Ct.hasOwnProperty("toolbox")?Ct.toolbox:[];ar instanceof Array&&(s=s.concat(ar))});var l=t&&t.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},t.toolbox=[l]);var u=l.feature||(l.feature={}),c=u.brush||(u.brush={}),d=c.type||(c.type=[]);d.push.apply(d,s),removeDuplicate(d),n&&!d.length&&d.push.apply(d,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(t){var n={};each$f(t,function(a){n[a]=1}),t.length=0,each$f(n,function(a,s){t.push(s)})}var each$4=each$f;function hasKeys(t){if(t){for(var n in t)if(t.hasOwnProperty(n))return!0}}function createVisualMappings(t,n,a){var s={};return each$4(n,function(u){var c=s[u]=l();each$4(t[u],function(d,Ct){if(VisualMapping.isValidType(Ct)){var ar={type:Ct,visual:d};a&&a(ar,u),c[Ct]=new VisualMapping(ar),Ct==="opacity"&&(ar=clone$4(ar),ar.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping(ar))}})}),s;function l(){var u=function(){};u.prototype.__hidden=u.prototype;var c=new u;return c}}function replaceVisualOption(t,n,a){var s;each$f(a,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])&&(s=!0)}),s&&each$f(a,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])?t[l]=clone$4(n[l]):delete t[l]})}function applyVisual(t,n,a,s,l,u){var c={};each$f(t,function(tn){var on=VisualMapping.prepareVisualTypes(n[tn]);c[tn]=on});var d;function Ct(tn){return getItemVisualFromData(a,d,tn)}function ar(tn,on){setItemVisualFromData(a,d,tn,on)}a.each(en);function en(tn,on){d=tn;var cn=a.getRawDataItem(d);if(!(cn&&cn.visualMap===!1))for(var dn=s.call(l,tn),Cn=n[dn],In=c[dn],ix=0,ax=In.length;ix<ax;ix++){var ox=In[ix];Cn[ox]&&Cn[ox].applyVisual(tn,Ct,ar)}}}function incrementalApplyVisual(t,n,a,s){var l={};return each$f(t,function(u){var c=VisualMapping.prepareVisualTypes(n[u]);l[u]=c}),{progress:function(c,d){var Ct;s!=null&&(Ct=d.getDimensionIndex(s));function ar(ux){return getItemVisualFromData(d,tn,ux)}function en(ux,cx){setItemVisualFromData(d,tn,ux,cx)}for(var tn,on=d.getStore();(tn=c.next())!=null;){var cn=d.getRawDataItem(tn);if(!(cn&&cn.visualMap===!1))for(var dn=s!=null?on.get(Ct,tn):tn,Cn=a(dn),In=n[Cn],ix=l[Cn],ax=0,ox=ix.length;ax<ox;ax++){var sx=ix[ax];In[sx]&&In[sx].applyVisual(dn,ar,en)}}}}}function makeBrushCommonSelectorForSeries(t){var n=t.brushType,a={point:function(s){return selector[n].point(s,a,t)},rect:function(s){return selector[n].rect(s,a,t)}};return a}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])},rect:function(t,n,a){return t&&a.boundingRect.intersect(t)}},polygon:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])&&contain(a.range,t[0],t[1])},rect:function(t,n,a){var s=a.range;if(!t||s.length<=1)return!1;var l=t.x,u=t.y,c=t.width,d=t.height,Ct=s[0];if(contain(s,l,u)||contain(s,l+c,u)||contain(s,l,u+d)||contain(s,l+c,u+d)||BoundingRect.create(t).contain(Ct[0],Ct[1])||linePolygonIntersect(l,u,l+c,u,s)||linePolygonIntersect(l,u,l,u+d,s)||linePolygonIntersect(l+c,u,l+c,u+d,s)||linePolygonIntersect(l,u+d,l+c,u+d,s))return!0}}};function getLineSelectors(t){var n=["x","y"],a=["width","height"];return{point:function(s,l,u){if(s){var c=u.range,d=s[t];return inLineRange(d,c)}},rect:function(s,l,u){if(s){var c=u.range,d=[s[n[t]],s[n[t]]+s[a[t]]];return d[1]<d[0]&&d.reverse(),inLineRange(d[0],c)||inLineRange(d[1],c)||inLineRange(c[0],d)||inLineRange(c[1],d)}}}}function inLineRange(t,n){return n[0]<=t&&t<=n[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(t){t.eachComponent({mainType:"brush"},function(n){var a=n.brushTargetManager=new BrushTargetManager(n.option,t);a.setInputRanges(n.areas,t)})}function brushVisual(t,n,a){var s=[],l,u;t.eachComponent({mainType:"brush"},function(c){a&&a.type==="takeGlobalCursor"&&c.setBrushOption(a.key==="brush"?a.brushOption:{brushType:!1})}),layoutCovers(t),t.eachComponent({mainType:"brush"},function(c,d){var Ct={brushId:c.id,brushIndex:d,brushName:c.name,areas:clone$4(c.areas),selected:[]};s.push(Ct);var ar=c.option,en=ar.brushLink,tn=[],on=[],cn=[],dn=!1;d||(l=ar.throttleType,u=ar.throttleDelay);var Cn=map$1(c.areas,function(ux){var cx=boundingRectBuilders[ux.brushType],hx=defaults({boundingRect:cx?cx(ux):void 0},ux);return hx.selectors=makeBrushCommonSelectorForSeries(hx),hx}),In=createVisualMappings(c.option,STATE_LIST,function(ux){ux.mappingMethod="fixed"});isArray$1(en)&&each$f(en,function(ux){tn[ux]=1});function ix(ux){return en==="all"||!!tn[ux]}function ax(ux){return!!ux.length}t.eachSeries(function(ux,cx){var hx=cn[cx]=[];ux.subType==="parallel"?ox(ux,cx):sx(ux,cx,hx)});function ox(ux,cx){var hx=ux.coordinateSystem;dn=dn||hx.hasAxisBrushed(),ix(cx)&&hx.eachActiveState(ux.getData(),function(gx,fx){gx==="active"&&(on[fx]=1)})}function sx(ux,cx,hx){if(!(!ux.brushSelector||brushModelNotControll(c,cx))&&(each$f(Cn,function(fx){c.brushTargetManager.controlSeries(fx,ux,t)&&hx.push(fx),dn=dn||ax(hx)}),ix(cx)&&ax(hx))){var gx=ux.getData();gx.each(function(fx){checkInRange(ux,hx,gx,fx)&&(on[fx]=1)})}}t.eachSeries(function(ux,cx){var hx={seriesId:ux.id,seriesIndex:cx,seriesName:ux.name,dataIndex:[]};Ct.selected.push(hx);var gx=cn[cx],fx=ux.getData(),dx=ix(cx)?function(mx){return on[mx]?(hx.dataIndex.push(fx.getRawIndex(mx)),"inBrush"):"outOfBrush"}:function(mx){return checkInRange(ux,gx,fx,mx)?(hx.dataIndex.push(fx.getRawIndex(mx)),"inBrush"):"outOfBrush"};(ix(cx)?dn:ax(gx))&&applyVisual(STATE_LIST,In,fx,dx)})}),dispatchAction$1(n,l,u,s,a)}function dispatchAction$1(t,n,a,s,l){if(l){var u=t.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(u,DISPATCH_METHOD,a,n);c(t,s)}}}function doDispatch(t,n){if(!t.isDisposed()){var a=t.getZr();a[DISPATCH_FLAG]=!0,t.dispatchAction({type:"brushSelect",batch:n}),a[DISPATCH_FLAG]=!1}}function checkInRange(t,n,a,s){for(var l=0,u=n.length;l<u;l++){var c=n[l];if(t.brushSelector(s,a,c.selectors,c))return!0}}function brushModelNotControll(t,n){var a=t.option.seriesIndex;return a!=null&&a!=="all"&&(isArray$1(a)?indexOf(a,n)<0:n!==a)}var boundingRectBuilders={rect:function(t){return getBoundingRectFromMinMax(t.range)},polygon:function(t){for(var n,a=t.range,s=0,l=a.length;s<l;s++){n=n||[[1/0,-1/0],[1/0,-1/0]];var u=a[s];u[0]<n[0][0]&&(n[0][0]=u[0]),u[0]>n[0][1]&&(n[0][1]=u[0]),u[1]<n[1][0]&&(n[1][0]=u[1]),u[1]>n[1][1]&&(n[1][1]=u[1])}return n&&getBoundingRectFromMinMax(n)}};function getBoundingRectFromMinMax(t){return new BoundingRect(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var BrushView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){this.ecModel=a,this.api=s,this.model,(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},n.prototype.render=function(a,s,l,u){this.model=a,this._updateController(a,s,l,u)},n.prototype.updateTransform=function(a,s,l,u){layoutCovers(s),this._updateController(a,s,l,u)},n.prototype.updateVisual=function(a,s,l,u){this.updateTransform(a,s,l,u)},n.prototype.updateView=function(a,s,l,u){this._updateController(a,s,l,u)},n.prototype._updateController=function(a,s,l,u){(!u||u.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(l)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(a){var s=this.model.id,l=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:s,areas:clone$4(l),$from:s}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:s,areas:clone$4(l),$from:s})},n.type="brush",n})(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.areas=[],a.brushOption={},a}return n.prototype.optionUpdated=function(a,s){var l=this.option;!s&&replaceVisualOption(l,a,["inBrush","outOfBrush"]);var u=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},n.prototype.setAreas=function(a){a&&(this.areas=map$1(a,function(s){return generateBrushOption(this.option,s)},this))},n.prototype.setBrushOption=function(a){this.brushOption=generateBrushOption(this.option,a),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n})(ComponentModel);function generateBrushOption(t,n){return merge({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Model(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},n,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l){var u,c,d;s.eachComponent({mainType:"brush"},function(Ct){u=Ct.brushType,c=Ct.brushOption.brushMode||"single",d=d||!!Ct.areas.length}),this._brushType=u,this._brushMode=c,each$f(a.get("type",!0),function(Ct){a.setIconStatus(Ct,(Ct==="keep"?c==="multiple":Ct==="clear"?d:Ct===u)?"emphasis":"normal")})},n.prototype.updateView=function(a,s,l){this.render(a,s,l)},n.prototype.getIcons=function(){var a=this.model,s=a.get("icon",!0),l={};return each$f(a.get("type",!0),function(u){s[u]&&(l[u]=s[u])}),l},n.prototype.onclick=function(a,s,l){var u=this._brushType,c=this._brushMode;l==="clear"?(s.dispatchAction({type:"axisAreaSelect",intervals:[]}),s.dispatchAction({type:"brush",command:"clear",areas:[]})):s.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?u:u===l?!1:l,brushMode:l==="keep"?c==="multiple"?"single":"multiple":c}})},n.getDefaultOption=function(a){var s={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])};return s},n})(ToolboxFeature);function install$h(t){t.registerComponentView(BrushView),t.registerComponentModel(BrushModel),t.registerPreprocessor(brushPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,brushVisual),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,a){a.eachComponent({mainType:"brush",query:n},function(s){s.setAreas(n.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n})(ComponentModel),TitleView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){if(this.group.removeAll(),!!a.get("show")){var u=this.group,c=a.getModel("textStyle"),d=a.getModel("subtextStyle"),Ct=a.get("textAlign"),ar=retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),en=new ZRText({style:createTextStyle$1(c,{text:a.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),tn=en.getBoundingRect(),on=a.get("subtext"),cn=new ZRText({style:createTextStyle$1(d,{text:on,fill:d.getTextColor(),y:tn.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),dn=a.get("link"),Cn=a.get("sublink"),In=a.get("triggerEvent",!0);en.silent=!dn&&!In,cn.silent=!Cn&&!In,dn&&en.on("click",function(){windowOpen(dn,"_"+a.get("target"))}),Cn&&cn.on("click",function(){windowOpen(Cn,"_"+a.get("subtarget"))}),getECData(en).eventData=getECData(cn).eventData=In?{componentType:"title",componentIndex:a.componentIndex}:null,u.add(en),on&&u.add(cn);var ix=u.getBoundingRect(),ax=a.getBoxLayoutParams();ax.width=ix.width,ax.height=ix.height;var ox=getLayoutRect(ax,{width:l.getWidth(),height:l.getHeight()},a.get("padding"));Ct||(Ct=a.get("left")||a.get("right"),Ct==="middle"&&(Ct="center"),Ct==="right"?ox.x+=ox.width:Ct==="center"&&(ox.x+=ox.width/2)),ar||(ar=a.get("top")||a.get("bottom"),ar==="center"&&(ar="middle"),ar==="bottom"?ox.y+=ox.height:ar==="middle"&&(ox.y+=ox.height/2),ar=ar||"top"),u.x=ox.x,u.y=ox.y,u.markRedraw();var sx={align:Ct,verticalAlign:ar};en.setStyle(sx),cn.setStyle(sx),ix=u.getBoundingRect();var ux=ox.margin,cx=a.getItemStyle(["color","opacity"]);cx.fill=a.get("backgroundColor");var hx=new Rect$2({shape:{x:ix.x-ux[3],y:ix.y-ux[0],width:ix.width+ux[1]+ux[3],height:ix.height+ux[0]+ux[2],r:a.get("borderRadius")},style:cx,subPixelOptimize:!0,silent:!0});u.add(hx)}},n.type="title",n})(ComponentView);function install$g(t){t.registerComponentModel(TitleModel),t.registerComponentView(TitleView)}var TimelineModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode="box",a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),this._initData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var s=this._data.count();this.option.loop?a=(a%s+s)%s:(a>=s&&(a=s-1),a<0&&(a=0)),this.option.currentIndex=a},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(a){this.option.autoPlay=!!a},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var a=this.option,s=a.data||[],l=a.axisType,u=this._names=[],c;l==="category"?(c=[],each$f(s,function(ar,en){var tn=convertOptionIdName(getDataItemValue(ar),""),on;isObject$3(ar)?(on=clone$4(ar),on.value=en):on=en,c.push(on),u.push(tn)})):c=s;var d={category:"ordinal",time:"time",value:"number"}[l]||"number",Ct=this._data=new SeriesData([{name:"value",type:d}],this);Ct.initData(c,u)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n})(ComponentModel),SliderTimelineModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline.slider",n.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n})(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline",n})(ComponentView),TimelineAxis=(function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this,a,s,l)||this;return c.type=u||"value",c}return n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},n})(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){this.api=s},n.prototype.render=function(a,s,l){if(this.model=a,this.api=l,this.ecModel=s,this.group.removeAll(),a.get("show",!0)){var u=this._layout(a,l),c=this._createGroup("_mainGroup"),d=this._createGroup("_labelGroup"),Ct=this._axis=this._createAxis(u,a);a.formatTooltip=function(ar){var en=Ct.scale.getLabel({value:ar});return createTooltipMarkup("nameValue",{noName:!0,value:en})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(ar){this["_render"+ar](u,c,Ct,a)},this),this._renderAxisLabel(u,d,Ct,a),this._position(u,a)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(a,s){var l=a.get(["label","position"]),u=a.get("orient"),c=getViewRect(a,s),d;l==null||l==="auto"?d=u==="horizontal"?c.y+c.height/2<s.getHeight()/2?"-":"+":c.x+c.width/2<s.getWidth()/2?"+":"-":isString$1(l)?d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][l]:d=l;var Ct={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},ar={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},en={horizontal:0,vertical:PI/2},tn=u==="vertical"?c.height:c.width,on=a.getModel("controlStyle"),cn=on.get("show",!0),dn=cn?on.get("itemSize"):0,Cn=cn?on.get("itemGap"):0,In=dn+Cn,ix=a.get(["label","rotate"])||0;ix=ix*PI/180;var ax,ox,sx,ux=on.get("position",!0),cx=cn&&on.get("showPlayBtn",!0),hx=cn&&on.get("showPrevBtn",!0),gx=cn&&on.get("showNextBtn",!0),fx=0,dx=tn;ux==="left"||ux==="bottom"?(cx&&(ax=[0,0],fx+=In),hx&&(ox=[fx,0],fx+=In),gx&&(sx=[dx-dn,0],dx-=In)):(cx&&(ax=[dx-dn,0],dx-=In),hx&&(ox=[0,0],fx+=In),gx&&(sx=[dx-dn,0],dx-=In));var mx=[fx,dx];return a.get("inverse")&&mx.reverse(),{viewRect:c,mainLength:tn,orient:u,rotation:en[u],labelRotation:ix,labelPosOpt:d,labelAlign:a.get(["label","align"])||Ct[u],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||ar[u],playPosition:ax,prevBtnPosition:ox,nextBtnPosition:sx,axisExtent:mx,controlSize:dn,controlGap:Cn}},n.prototype._position=function(a,s){var l=this._mainGroup,u=this._labelGroup,c=a.viewRect;if(a.orient==="vertical"){var d=create$1(),Ct=c.x,ar=c.y+c.height;translate(d,d,[-Ct,-ar]),rotate(d,d,-PI/2),translate(d,d,[Ct,ar]),c=c.clone(),c.applyTransform(d)}var en=ax(c),tn=ax(l.getBoundingRect()),on=ax(u.getBoundingRect()),cn=[l.x,l.y],dn=[u.x,u.y];dn[0]=cn[0]=en[0][0];var Cn=a.labelPosOpt;if(Cn==null||isString$1(Cn)){var In=Cn==="+"?0:1;ox(cn,tn,en,1,In),ox(dn,on,en,1,1-In)}else{var In=Cn>=0?0:1;ox(cn,tn,en,1,In),dn[1]=cn[1]+Cn}l.setPosition(cn),u.setPosition(dn),l.rotation=u.rotation=a.rotation,ix(l),ix(u);function ix(sx){sx.originX=en[0][0]-sx.x,sx.originY=en[1][0]-sx.y}function ax(sx){return[[sx.x,sx.x+sx.width],[sx.y,sx.y+sx.height]]}function ox(sx,ux,cx,hx,gx){sx[hx]+=cx[hx][gx]-ux[hx][gx]}},n.prototype._createAxis=function(a,s){var l=s.getData(),u=s.get("axisType"),c=createScaleByModel(s,u);c.getTicks=function(){return l.mapArray(["value"],function(ar){return{value:ar}})};var d=l.getDataExtent("value");c.setExtent(d[0],d[1]),c.calcNiceTicks();var Ct=new TimelineAxis("value",c,a.axisExtent,u);return Ct.model=s,Ct},n.prototype._createGroup=function(a){var s=this[a]=new Group$3;return this.group.add(s),s},n.prototype._renderAxisLine=function(a,s,l,u){var c=l.getExtent();if(u.get(["lineStyle","show"])){var d=new Line$1({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});s.add(d);var Ct=this._progressLine=new Line$1({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:d.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});s.add(Ct)}},n.prototype._renderAxisTick=function(a,s,l,u){var c=this,d=u.getData(),Ct=l.scale.getTicks();this._tickSymbols=[],each$f(Ct,function(ar){var en=l.dataToCoord(ar.value),tn=d.getItemModel(ar.value),on=tn.getModel("itemStyle"),cn=tn.getModel(["emphasis","itemStyle"]),dn=tn.getModel(["progress","itemStyle"]),Cn={x:en,y:0,onclick:bind$1(c._changeTimeline,c,ar.value)},In=giveSymbol(tn,on,s,Cn);In.ensureState("emphasis").style=cn.getItemStyle(),In.ensureState("progress").style=dn.getItemStyle(),enableHoverEmphasis(In);var ix=getECData(In);tn.get("tooltip")?(ix.dataIndex=ar.value,ix.dataModel=u):ix.dataIndex=ix.dataModel=null,c._tickSymbols.push(In)})},n.prototype._renderAxisLabel=function(a,s,l,u){var c=this,d=l.getLabelModel();if(d.get("show")){var Ct=u.getData(),ar=l.getViewLabels();this._tickLabels=[],each$f(ar,function(en){var tn=en.tickValue,on=Ct.getItemModel(tn),cn=on.getModel("label"),dn=on.getModel(["emphasis","label"]),Cn=on.getModel(["progress","label"]),In=l.dataToCoord(en.tickValue),ix=new ZRText({x:In,y:0,rotation:a.labelRotation-a.rotation,onclick:bind$1(c._changeTimeline,c,tn),silent:!1,style:createTextStyle$1(cn,{text:en.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});ix.ensureState("emphasis").style=createTextStyle$1(dn),ix.ensureState("progress").style=createTextStyle$1(Cn),s.add(ix),enableHoverEmphasis(ix),labelDataIndexStore(ix).dataIndex=tn,c._tickLabels.push(ix)})}},n.prototype._renderControl=function(a,s,l,u){var c=a.controlSize,d=a.rotation,Ct=u.getModel("controlStyle").getItemStyle(),ar=u.getModel(["emphasis","controlStyle"]).getItemStyle(),en=u.getPlayState(),tn=u.get("inverse",!0);on(a.nextBtnPosition,"next",bind$1(this._changeTimeline,this,tn?"-":"+")),on(a.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,tn?"+":"-")),on(a.playPosition,en?"stop":"play",bind$1(this._handlePlayClick,this,!en),!0);function on(cn,dn,Cn,In){if(cn){var ix=parsePercent$1(retrieve2(u.get(["controlStyle",dn+"BtnSize"]),c),c),ax=[0,-ix/2,ix,ix],ox=makeControlIcon(u,dn+"Icon",ax,{x:cn[0],y:cn[1],originX:c/2,originY:0,rotation:In?-d:0,rectHover:!0,style:Ct,onclick:Cn});ox.ensureState("emphasis").style=ar,s.add(ox),enableHoverEmphasis(ox)}}},n.prototype._renderCurrentPointer=function(a,s,l,u){var c=u.getData(),d=u.getCurrentIndex(),Ct=c.getItemModel(d).getModel("checkpointStyle"),ar=this,en={onCreate:function(tn){tn.draggable=!0,tn.drift=bind$1(ar._handlePointerDrag,ar),tn.ondragend=bind$1(ar._handlePointerDragend,ar),pointerMoveTo(tn,ar._progressLine,d,l,u,!0)},onUpdate:function(tn){pointerMoveTo(tn,ar._progressLine,d,l,u)}};this._currentPointer=giveSymbol(Ct,Ct,this._mainGroup,{},this._currentPointer,en)},n.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},n.prototype._handlePointerDrag=function(a,s,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},n.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},n.prototype._pointerChangeTimeline=function(a,s){var l=this._toAxisCoord(a)[0],u=this._axis,c=asc$2(u.getExtent().slice());l>c[1]&&(l=c[1]),l<c[0]&&(l=c[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var d=this._progressLine;d&&(d.shape.x2=l,d.dirty());var Ct=this._findNearestTick(l),ar=this.model;(s||Ct!==ar.getCurrentIndex()&&ar.get("realtime"))&&this._changeTimeline(Ct)},n.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var s=a.model;a._changeTimeline(s.getCurrentIndex()+(s.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(a){var s=this._mainGroup.getLocalTransform();return applyTransform(a,s,!0)},n.prototype._findNearestTick=function(a){var s=this.model.getData(),l=1/0,u,c=this._axis;return s.each(["value"],function(d,Ct){var ar=c.dataToCoord(d),en=Math.abs(ar-a);en<l&&(l=en,u=Ct)}),u},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(a){var s=this.model.getCurrentIndex();a==="+"?a=s+1:a==="-"&&(a=s-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},n.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),s=this._tickSymbols,l=this._tickLabels;if(s)for(var u=0;u<s.length;u++)s&&s[u]&&s[u].toggleState("progress",u<a);if(l)for(var u=0;u<l.length;u++)l&&l[u]&&l[u].toggleState("progress",labelDataIndexStore(l[u]).dataIndex<=a)},n.type="timeline.slider",n})(TimelineView);function createScaleByModel(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},t.get("padding"))}function makeControlIcon(t,n,a,s){var l=s.style,u=createIcon(t.get(["controlStyle",n]),s||{},new BoundingRect(a[0],a[1],a[2],a[3]));return l&&u.setStyle(l),u}function giveSymbol(t,n,a,s,l,u){var c=n.get("color");if(l)l.setColor(c),a.add(l),u&&u.onUpdate(l);else{var d=t.get("symbol");l=createSymbol$1(d,-1,-1,2,2,c),l.setStyle("strokeNoScale",!0),a.add(l),u&&u.onCreate(l)}var Ct=n.getItemStyle(["color"]);l.setStyle(Ct),s=merge({rectHover:!0,z2:100},s,!0);var ar=normalizeSymbolSize(t.get("symbolSize"));s.scaleX=ar[0]/2,s.scaleY=ar[1]/2;var en=normalizeSymbolOffset(t.get("symbolOffset"),ar);en&&(s.x=(s.x||0)+en[0],s.y=(s.y||0)+en[1]);var tn=t.get("symbolRotate");return s.rotation=(tn||0)*Math.PI/180||0,l.attr(s),l.updateTransform(),l}function pointerMoveTo(t,n,a,s,l,u){if(!t.dragging){var c=l.getModel("checkpointStyle"),d=s.dataToCoord(l.getData().get("value",a));if(u||!c.get("animation",!0))t.attr({x:d,y:0}),n&&n.attr({shape:{x2:d}});else{var Ct={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:d,y:0},Ct),n&&n.animateTo({shape:{x2:d}},Ct)}}}function installTimelineAction(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,a,s){var l=a.getComponent("timeline");return l&&n.currentIndex!=null&&(l.setCurrentIndex(n.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),s.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),a.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},n)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,a){var s=a.getComponent("timeline");s&&n.playState!=null&&s.setPlayState(n.playState)})}function timelinePreprocessor(t){var n=t&&t.timeline;isArray$1(n)||(n=n?[n]:[]),each$f(n,function(a){a&&compatibleEC2(a)})}function compatibleEC2(t){var n=t.type,a={number:"value",time:"time"};if(a[n]&&(t.axisType=a[n],delete t.type),transferItem(t),has$1(t,"controlPosition")){var s=t.controlStyle||(t.controlStyle={});has$1(s,"position")||(s.position=t.controlPosition),s.position==="none"&&!has$1(s,"show")&&(s.show=!1,delete s.position),delete t.controlPosition}each$f(t.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(t){var n=t.itemStyle||(t.itemStyle={}),a=n.emphasis||(n.emphasis={}),s=t.label||t.label||{},l=s.normal||(s.normal={}),u={normal:1,emphasis:1};each$f(s,function(c,d){!u[d]&&!has$1(l,d)&&(l[d]=c)}),a.label&&!has$1(s,"emphasis")&&(s.emphasis=a.label,delete a.label)}function has$1(t,n){return t.hasOwnProperty(n)}function install$f(t){t.registerComponentModel(SliderTimelineModel),t.registerComponentView(SliderTimelineView),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(t),t.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(t,n){if(!t)return!1;for(var a=isArray$1(t)?t:[t],s=0;s<a.length;s++)if(a[s]&&a[s][n])return!0;return!1}function fillLabel(t){defaultEmphasis(t,"label",["show"])}var inner$5=makeInner(),MarkerModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.createdBySelf=!1,a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),this._mergeOption(a,l,!1,!0)},n.prototype.isAnimationEnabled=function(){if(env.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},n.prototype.mergeOption=function(a,s){this._mergeOption(a,s,!1,!1)},n.prototype._mergeOption=function(a,s,l,u){var c=this.mainType;l||s.eachSeries(function(d){var Ct=d.get(this.mainType,!0),ar=inner$5(d)[c];if(!Ct||!Ct.data){inner$5(d)[c]=null;return}ar?ar._mergeOption(Ct,s,!0):(u&&fillLabel(Ct),each$f(Ct.data,function(en){en instanceof Array?(fillLabel(en[0]),fillLabel(en[1])):fillLabel(en)}),ar=this.createMarkerModelFromSeries(Ct,this,s),extend(ar,{mainType:this.mainType,seriesIndex:d.seriesIndex,name:d.name,createdBySelf:!0}),ar.__hostSeries=d),inner$5(d)[c]=ar},this)},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.getRawValue(a),d=u.getName(a);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:d,value:c,noName:!d,noValue:c==null})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(a){this._data=a},n.prototype.getDataParams=function(a,s){var l=DataFormatMixin.prototype.getDataParams.call(this,a,s),u=this.__hostSeries;return u&&(l.seriesId=u.id,l.seriesName=u.name,l.seriesType=u.subType),l},n.getMarkerModelFromSeries=function(a,s){return inner$5(a)[s]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n})(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n})(MarkerModel);function hasXOrY(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function hasXAndY(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function markerTypeCalculatorWithExtent(t,n,a,s,l,u){var c=[],d=isDimensionStacked(n,s),Ct=d?n.getCalculationInfo("stackResultDimension"):s,ar=numCalculate(n,Ct,t),en=n.indicesOfNearest(Ct,ar)[0];c[l]=n.get(a,en),c[u]=n.get(Ct,en);var tn=n.get(s,en),on=getPrecision(n.get(s,en));return on=Math.min(on,20),on>=0&&(c[u]=+c[u].toFixed(on)),[c,tn]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(t,n){if(n){var a=t.getData(),s=t.coordinateSystem,l=s&&s.dimensions;if(!hasXAndY(n)&&!isArray$1(n.coord)&&isArray$1(l)){var u=getAxisInfo(n,a,s,t);if(n=clone$4(n),n.type&&markerTypeCalculator[n.type]&&u.baseAxis&&u.valueAxis){var c=indexOf(l,u.baseAxis.dim),d=indexOf(l,u.valueAxis.dim),Ct=markerTypeCalculator[n.type](a,u.baseDataDim,u.valueDataDim,c,d);n.coord=Ct[0],n.value=Ct[1]}else n.coord=[n.xAxis!=null?n.xAxis:n.radiusAxis,n.yAxis!=null?n.yAxis:n.angleAxis]}if(n.coord==null||!isArray$1(l))n.coord=[];else for(var ar=n.coord,en=0;en<2;en++)markerTypeCalculator[ar[en]]&&(ar[en]=numCalculate(a,a.mapDimension(l[en]),ar[en]));return n}}function getAxisInfo(t,n,a,s){var l={};return t.valueIndex!=null||t.valueDim!=null?(l.valueDataDim=t.valueIndex!=null?n.getDimension(t.valueIndex):t.valueDim,l.valueAxis=a.getAxis(dataDimToCoordDim(s,l.valueDataDim)),l.baseAxis=a.getOtherAxis(l.valueAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim)):(l.baseAxis=s.getBaseAxis(),l.valueAxis=a.getOtherAxis(l.baseAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim),l.valueDataDim=n.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(t,n){var a=t.getData().getDimensionInfo(n);return a&&a.coordDim}function dataFilter(t,n){return t&&t.containData&&n.coord&&!hasXOrY(n)?t.containData(n.coord):!0}function zoneFilter(t,n,a){return t&&t.containZone&&n.coord&&a.coord&&!hasXOrY(n)&&!hasXOrY(a)?t.containZone(n.coord,a.coord):!0}function createMarkerDimValueGetter(t,n){return t?function(a,s,l,u){var c=u<2?a.coord&&a.coord[u]:a.value;return parseDataValue(c,n[u])}:function(a,s,l,u){return parseDataValue(a.value,n[u])}}function numCalculate(t,n,a){if(a==="average"){var s=0,l=0;return t.each(n,function(u,c){isNaN(u)||(s+=u,l++)}),s/l}else return a==="median"?t.getMedian(n):t.getDataExtent(n)[a==="max"?1:0]}var inner$4=makeInner(),MarkerView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this.markerGroupMap=createHashMap()},n.prototype.render=function(a,s,l){var u=this,c=this.markerGroupMap;c.each(function(d){inner$4(d).keep=!1}),s.eachSeries(function(d){var Ct=MarkerModel.getMarkerModelFromSeries(d,u.type);Ct&&u.renderSeries(d,Ct,s,l)}),c.each(function(d){!inner$4(d).keep&&u.group.remove(d.group)})},n.prototype.markKeep=function(a){inner$4(a).keep=!0},n.prototype.toggleBlurSeries=function(a,s){var l=this;each$f(a,function(u){var c=MarkerModel.getMarkerModelFromSeries(u,l.type);if(c){var d=c.getData();d.eachItemGraphicEl(function(Ct){Ct&&(s?enterBlur(Ct):leaveBlur(Ct))})}})},n.type="marker",n})(ComponentView);function updateMarkerLayout(t,n,a){var s=n.coordinateSystem;t.each(function(l){var u=t.getItemModel(l),c,d=parsePercent(u.get("x"),a.getWidth()),Ct=parsePercent(u.get("y"),a.getHeight());if(!isNaN(d)&&!isNaN(Ct))c=[d,Ct];else if(n.getMarkerPosition)c=n.getMarkerPosition(t.getValues(t.dimensions,l));else if(s){var ar=t.get(s.dimensions[0],l),en=t.get(s.dimensions[1],l);c=s.dataToPoint([ar,en])}isNaN(d)||(c[0]=d),isNaN(Ct)||(c[1]=Ct),t.setItemLayout(l,c)})}var MarkPointView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markPoint");c&&(updateMarkerLayout(c.getData(),u,l),this.markerGroupMap.get(u.id).updateLayout())},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,d=a.id,Ct=a.getData(),ar=this.markerGroupMap,en=ar.get(d)||ar.set(d,new SymbolDraw),tn=createData(c,a,s);s.setData(tn),updateMarkerLayout(s.getData(),a,u),tn.each(function(on){var cn=tn.getItemModel(on),dn=cn.getShallow("symbol"),Cn=cn.getShallow("symbolSize"),In=cn.getShallow("symbolRotate"),ix=cn.getShallow("symbolOffset"),ax=cn.getShallow("symbolKeepAspect");if(isFunction$1(dn)||isFunction$1(Cn)||isFunction$1(In)||isFunction$1(ix)){var ox=s.getRawValue(on),sx=s.getDataParams(on);isFunction$1(dn)&&(dn=dn(ox,sx)),isFunction$1(Cn)&&(Cn=Cn(ox,sx)),isFunction$1(In)&&(In=In(ox,sx)),isFunction$1(ix)&&(ix=ix(ox,sx))}var ux=cn.getModel("itemStyle").getItemStyle(),cx=getVisualFromData(Ct,"color");ux.fill||(ux.fill=cx),tn.setItemVisual(on,{symbol:dn,symbolSize:Cn,symbolRotate:In,symbolOffset:ix,symbolKeepAspect:ax,style:ux})}),en.updateData(tn),this.group.add(en.group),tn.eachItemGraphicEl(function(on){on.traverse(function(cn){getECData(cn).dataModel=s})}),this.markKeep(en),en.group.silent=s.get("silent")||a.get("silent")},n.type="markPoint",n})(MarkerView);function createData(t,n,a){var s;t?s=map$1(t&&t.dimensions,function(d){var Ct=n.getData().getDimensionInfo(n.getData().mapDimension(d))||{};return extend(extend({},Ct),{name:d,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,a),u=map$1(a.get("data"),curry$1(dataTransform,n));t&&(u=filter(u,curry$1(dataFilter,t)));var c=createMarkerDimValueGetter(!!t,s);return l.initData(u,null,c),l}function install$e(t){t.registerComponentModel(MarkPointModel),t.registerComponentView(MarkPointView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}var MarkLineModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n})(MarkerModel),inner$3=makeInner(),markLineTransform=function(t,n,a,s){var l=t.getData(),u;if(isArray$1(s))u=s;else{var c=s.type;if(c==="min"||c==="max"||c==="average"||c==="median"||s.xAxis!=null||s.yAxis!=null){var d=void 0,Ct=void 0;if(s.yAxis!=null||s.xAxis!=null)d=n.getAxis(s.yAxis!=null?"y":"x"),Ct=retrieve(s.yAxis,s.xAxis);else{var ar=getAxisInfo(s,l,n,t);d=ar.valueAxis;var en=getStackedDimension(l,ar.valueDataDim);Ct=numCalculate(l,en,c)}var tn=d.dim==="x"?0:1,on=1-tn,cn=clone$4(s),dn={coord:[]};cn.type=null,cn.coord=[],cn.coord[on]=-1/0,dn.coord[on]=1/0;var Cn=a.get("precision");Cn>=0&&isNumber(Ct)&&(Ct=+Ct.toFixed(Math.min(Cn,20))),cn.coord[tn]=dn.coord[tn]=Ct,u=[cn,dn,{type:c,valueIndex:s.valueIndex,value:Ct}]}else u=[]}var In=[dataTransform(t,u[0]),dataTransform(t,u[1]),extend({},u[2])];return In[2].type=In[2].type||null,merge(In[2],In[0]),merge(In[2],In[1]),In};function isInfinity$1(t){return!isNaN(t)&&!isFinite(t)}function ifMarkLineHasOnlyDim(t,n,a,s){var l=1-t,u=s.dimensions[t];return isInfinity$1(n[l])&&isInfinity$1(a[l])&&n[t]===a[t]&&s.getAxis(u).containData(n[t])}function markLineFilter(t,n){if(t.type==="cartesian2d"){var a=n[0].coord,s=n[1].coord;if(a&&s&&(ifMarkLineHasOnlyDim(1,a,s,t)||ifMarkLineHasOnlyDim(0,a,s,t)))return!0}return dataFilter(t,n[0])&&dataFilter(t,n[1])}function updateSingleMarkerEndLayout(t,n,a,s,l){var u=s.coordinateSystem,c=t.getItemModel(n),d,Ct=parsePercent(c.get("x"),l.getWidth()),ar=parsePercent(c.get("y"),l.getHeight());if(!isNaN(Ct)&&!isNaN(ar))d=[Ct,ar];else{if(s.getMarkerPosition)d=s.getMarkerPosition(t.getValues(t.dimensions,n));else{var en=u.dimensions,tn=t.get(en[0],n),on=t.get(en[1],n);d=u.dataToPoint([tn,on])}if(isCoordinateSystemType(u,"cartesian2d")){var cn=u.getAxis("x"),dn=u.getAxis("y"),en=u.dimensions;isInfinity$1(t.get(en[0],n))?d[0]=cn.toGlobalCoord(cn.getExtent()[a?0:1]):isInfinity$1(t.get(en[1],n))&&(d[1]=dn.toGlobalCoord(dn.getExtent()[a?0:1]))}isNaN(Ct)||(d[0]=Ct),isNaN(ar)||(d[1]=ar)}t.setItemLayout(n,d)}var MarkLineView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markLine");if(c){var d=c.getData(),Ct=inner$3(c).from,ar=inner$3(c).to;Ct.each(function(en){updateSingleMarkerEndLayout(Ct,en,!0,u,l),updateSingleMarkerEndLayout(ar,en,!1,u,l)}),d.each(function(en){d.setItemLayout(en,[Ct.getItemLayout(en),ar.getItemLayout(en)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,d=a.id,Ct=a.getData(),ar=this.markerGroupMap,en=ar.get(d)||ar.set(d,new LineDraw);this.group.add(en.group);var tn=createList$1(c,a,s),on=tn.from,cn=tn.to,dn=tn.line;inner$3(s).from=on,inner$3(s).to=cn,s.setData(dn);var Cn=s.get("symbol"),In=s.get("symbolSize"),ix=s.get("symbolRotate"),ax=s.get("symbolOffset");isArray$1(Cn)||(Cn=[Cn,Cn]),isArray$1(In)||(In=[In,In]),isArray$1(ix)||(ix=[ix,ix]),isArray$1(ax)||(ax=[ax,ax]),tn.from.each(function(sx){ox(on,sx,!0),ox(cn,sx,!1)}),dn.each(function(sx){var ux=dn.getItemModel(sx).getModel("lineStyle").getLineStyle();dn.setItemLayout(sx,[on.getItemLayout(sx),cn.getItemLayout(sx)]),ux.stroke==null&&(ux.stroke=on.getItemVisual(sx,"style").fill),dn.setItemVisual(sx,{fromSymbolKeepAspect:on.getItemVisual(sx,"symbolKeepAspect"),fromSymbolOffset:on.getItemVisual(sx,"symbolOffset"),fromSymbolRotate:on.getItemVisual(sx,"symbolRotate"),fromSymbolSize:on.getItemVisual(sx,"symbolSize"),fromSymbol:on.getItemVisual(sx,"symbol"),toSymbolKeepAspect:cn.getItemVisual(sx,"symbolKeepAspect"),toSymbolOffset:cn.getItemVisual(sx,"symbolOffset"),toSymbolRotate:cn.getItemVisual(sx,"symbolRotate"),toSymbolSize:cn.getItemVisual(sx,"symbolSize"),toSymbol:cn.getItemVisual(sx,"symbol"),style:ux})}),en.updateData(dn),tn.line.eachItemGraphicEl(function(sx){getECData(sx).dataModel=s,sx.traverse(function(ux){getECData(ux).dataModel=s})});function ox(sx,ux,cx){var hx=sx.getItemModel(ux);updateSingleMarkerEndLayout(sx,ux,cx,a,u);var gx=hx.getModel("itemStyle").getItemStyle();gx.fill==null&&(gx.fill=getVisualFromData(Ct,"color")),sx.setItemVisual(ux,{symbolKeepAspect:hx.get("symbolKeepAspect"),symbolOffset:retrieve2(hx.get("symbolOffset",!0),ax[cx?0:1]),symbolRotate:retrieve2(hx.get("symbolRotate",!0),ix[cx?0:1]),symbolSize:retrieve2(hx.get("symbolSize"),In[cx?0:1]),symbol:retrieve2(hx.get("symbol",!0),Cn[cx?0:1]),style:gx})}this.markKeep(en),en.group.silent=s.get("silent")||a.get("silent")},n.type="markLine",n})(MarkerView);function createList$1(t,n,a){var s;t?s=map$1(t&&t.dimensions,function(ar){var en=n.getData().getDimensionInfo(n.getData().mapDimension(ar))||{};return extend(extend({},en),{name:ar,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,a),u=new SeriesData(s,a),c=new SeriesData([],a),d=map$1(a.get("data"),curry$1(markLineTransform,n,t,a));t&&(d=filter(d,curry$1(markLineFilter,t)));var Ct=createMarkerDimValueGetter(!!t,s);return l.initData(map$1(d,function(ar){return ar[0]}),null,Ct),u.initData(map$1(d,function(ar){return ar[1]}),null,Ct),c.initData(map$1(d,function(ar){return ar[2]})),c.hasItemOption=!0,{from:l,to:u,line:c}}function install$d(t){t.registerComponentModel(MarkLineModel),t.registerComponentView(MarkLineView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markLine")&&(n.markLine=n.markLine||{})})}var MarkAreaModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n})(MarkerModel),inner$2=makeInner(),markAreaTransform=function(t,n,a,s){var l=s[0],u=s[1];if(!(!l||!u)){var c=dataTransform(t,l),d=dataTransform(t,u),Ct=c.coord,ar=d.coord;Ct[0]=retrieve(Ct[0],-1/0),Ct[1]=retrieve(Ct[1],-1/0),ar[0]=retrieve(ar[0],1/0),ar[1]=retrieve(ar[1],1/0);var en=mergeAll([{},c,d]);return en.coord=[c.coord,d.coord],en.x0=c.x,en.y0=c.y,en.x1=d.x,en.y1=d.y,en}};function isInfinity(t){return!isNaN(t)&&!isFinite(t)}function ifMarkAreaHasOnlyDim(t,n,a,s){var l=1-t;return isInfinity(n[l])&&isInfinity(a[l])}function markAreaFilter(t,n){var a=n.coord[0],s=n.coord[1],l={coord:a,x:n.x0,y:n.y0},u={coord:s,x:n.x1,y:n.y1};return isCoordinateSystemType(t,"cartesian2d")?a&&s&&(ifMarkAreaHasOnlyDim(1,a,s)||ifMarkAreaHasOnlyDim(0,a,s))?!0:zoneFilter(t,l,u):dataFilter(t,l)||dataFilter(t,u)}function getSingleMarkerEndPoint(t,n,a,s,l){var u=s.coordinateSystem,c=t.getItemModel(n),d,Ct=parsePercent(c.get(a[0]),l.getWidth()),ar=parsePercent(c.get(a[1]),l.getHeight());if(!isNaN(Ct)&&!isNaN(ar))d=[Ct,ar];else{if(s.getMarkerPosition){var en=t.getValues(["x0","y0"],n),tn=t.getValues(["x1","y1"],n),on=u.clampData(en),cn=u.clampData(tn),dn=[];a[0]==="x0"?dn[0]=on[0]>cn[0]?tn[0]:en[0]:dn[0]=on[0]>cn[0]?en[0]:tn[0],a[1]==="y0"?dn[1]=on[1]>cn[1]?tn[1]:en[1]:dn[1]=on[1]>cn[1]?en[1]:tn[1],d=s.getMarkerPosition(dn,a,!0)}else{var Cn=t.get(a[0],n),In=t.get(a[1],n),ix=[Cn,In];u.clampData&&u.clampData(ix,ix),d=u.dataToPoint(ix,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var ax=u.getAxis("x"),ox=u.getAxis("y"),Cn=t.get(a[0],n),In=t.get(a[1],n);isInfinity(Cn)?d[0]=ax.toGlobalCoord(ax.getExtent()[a[0]==="x0"?0:1]):isInfinity(In)&&(d[1]=ox.toGlobalCoord(ox.getExtent()[a[1]==="y0"?0:1]))}isNaN(Ct)||(d[0]=Ct),isNaN(ar)||(d[1]=ar)}return d}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markArea");if(c){var d=c.getData();d.each(function(Ct){var ar=map$1(dimPermutations,function(tn){return getSingleMarkerEndPoint(d,Ct,tn,u,l)});d.setItemLayout(Ct,ar);var en=d.getItemGraphicEl(Ct);en.setShape("points",ar)})}},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,d=a.id,Ct=a.getData(),ar=this.markerGroupMap,en=ar.get(d)||ar.set(d,{group:new Group$3});this.group.add(en.group),this.markKeep(en);var tn=createList(c,a,s);s.setData(tn),tn.each(function(on){var cn=map$1(dimPermutations,function(gx){return getSingleMarkerEndPoint(tn,on,gx,a,u)}),dn=c.getAxis("x").scale,Cn=c.getAxis("y").scale,In=dn.getExtent(),ix=Cn.getExtent(),ax=[dn.parse(tn.get("x0",on)),dn.parse(tn.get("x1",on))],ox=[Cn.parse(tn.get("y0",on)),Cn.parse(tn.get("y1",on))];asc$2(ax),asc$2(ox);var sx=!(In[0]>ax[1]||In[1]<ax[0]||ix[0]>ox[1]||ix[1]<ox[0]),ux=!sx;tn.setItemLayout(on,{points:cn,allClipped:ux});var cx=tn.getItemModel(on).getModel("itemStyle").getItemStyle(),hx=getVisualFromData(Ct,"color");cx.fill||(cx.fill=hx,isString$1(cx.fill)&&(cx.fill=modifyAlpha(cx.fill,.4))),cx.stroke||(cx.stroke=hx),tn.setItemVisual(on,"style",cx)}),tn.diff(inner$2(en).data).add(function(on){var cn=tn.getItemLayout(on);if(!cn.allClipped){var dn=new Polygon({shape:{points:cn.points}});tn.setItemGraphicEl(on,dn),en.group.add(dn)}}).update(function(on,cn){var dn=inner$2(en).data.getItemGraphicEl(cn),Cn=tn.getItemLayout(on);Cn.allClipped?dn&&en.group.remove(dn):(dn?updateProps$1(dn,{shape:{points:Cn.points}},s,on):dn=new Polygon({shape:{points:Cn.points}}),tn.setItemGraphicEl(on,dn),en.group.add(dn))}).remove(function(on){var cn=inner$2(en).data.getItemGraphicEl(on);en.group.remove(cn)}).execute(),tn.eachItemGraphicEl(function(on,cn){var dn=tn.getItemModel(cn),Cn=tn.getItemVisual(cn,"style");on.useStyle(tn.getItemVisual(cn,"style")),setLabelStyle(on,getLabelStatesModels(dn),{labelFetcher:s,labelDataIndex:cn,defaultText:tn.getName(cn)||"",inheritColor:isString$1(Cn.fill)?modifyAlpha(Cn.fill,1):"#000"}),setStatesStylesFromModel(on,dn),toggleHoverEmphasis(on,null,null,dn.get(["emphasis","disabled"])),getECData(on).dataModel=s}),inner$2(en).data=tn,en.group.silent=s.get("silent")||a.get("silent")},n.type="markArea",n})(MarkerView);function createList(t,n,a){var s,l,u=["x0","y0","x1","y1"];if(t){var c=map$1(t&&t.dimensions,function(ar){var en=n.getData(),tn=en.getDimensionInfo(en.mapDimension(ar))||{};return extend(extend({},tn),{name:ar,ordinalMeta:null})});l=map$1(u,function(ar,en){return{name:ar,type:c[en%2].type}}),s=new SeriesData(l,a)}else l=[{name:"value",type:"float"}],s=new SeriesData(l,a);var d=map$1(a.get("data"),curry$1(markAreaTransform,n,t,a));t&&(d=filter(d,curry$1(markAreaFilter,t)));var Ct=t?function(ar,en,tn,on){var cn=ar.coord[Math.floor(on/2)][on%2];return parseDataValue(cn,l[on])}:function(ar,en,tn,on){return parseDataValue(ar.value,l[on])};return s.initData(d,null,Ct),s.hasItemOption=!0,s}function install$c(t){t.registerComponentModel(MarkAreaModel),t.registerComponentView(MarkAreaView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markArea")&&(n.markArea=n.markArea||{})})}var getDefaultSelectorOptions=function(t,n){if(n==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(n==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),a.selected=a.selected||{},this._updateSelector(a)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),this._updateSelector(a)},n.prototype._updateSelector=function(a){var s=a.selector,l=this.ecModel;s===!0&&(s=a.selector=["all","inverse"]),isArray$1(s)&&each$f(s,function(u,c){isString$1(u)&&(u={type:u}),s[c]=merge(u,getDefaultSelectorOptions(l,u.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get("selectedMode")==="single"){for(var s=!1,l=0;l<a.length;l++){var u=a[l].get("name");if(this.isSelected(u)){this.select(u),s=!0;break}}!s&&this.select(a[0].get("name"))}},n.prototype._updateData=function(a){var s=[],l=[];a.eachRawSeries(function(Ct){var ar=Ct.name;l.push(ar);var en;if(Ct.legendVisualProvider){var tn=Ct.legendVisualProvider,on=tn.getAllNames();a.isSeriesFiltered(Ct)||(l=l.concat(on)),on.length?s=s.concat(on):en=!0}else en=!0;en&&isNameSpecified(Ct)&&s.push(Ct.name)}),this._availableNames=l;var u=this.get("data")||s,c=createHashMap(),d=map$1(u,function(Ct){return(isString$1(Ct)||isNumber(Ct))&&(Ct={name:Ct}),c.get(Ct.name)?null:(c.set(Ct.name,!0),new Model(Ct,this,this.ecModel))},this);this._data=filter(d,function(Ct){return!!Ct})},n.prototype.getData=function(){return this._data},n.prototype.select=function(a){var s=this.option.selected,l=this.get("selectedMode");if(l==="single"){var u=this._data;each$f(u,function(c){s[c.get("name")]=!1})}s[a]=!0},n.prototype.unSelect=function(a){this.get("selectedMode")!=="single"&&(this.option.selected[a]=!1)},n.prototype.toggleSelected=function(a){var s=this.option.selected;s.hasOwnProperty(a)||(s[a]=!0),this[s[a]?"unSelect":"select"](a)},n.prototype.allSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(l){s[l.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(l){var u=l.get("name",!0);s.hasOwnProperty(u)||(s[u]=!0),s[u]=!s[u]})},n.prototype.isSelected=function(a){var s=this.option.selected;return!(s.hasOwnProperty(a)&&!s[a])&&indexOf(this._availableNames,a)>=0},n.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n})(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!1,a}return n.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(a,s,l){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var c=a.get("align"),d=a.get("orient");(!c||c==="auto")&&(c=a.get("left")==="right"&&d==="vertical"?"right":"left");var Ct=a.get("selector",!0),ar=a.get("selectorPosition",!0);Ct&&(!ar||ar==="auto")&&(ar=d==="horizontal"?"end":"start"),this.renderInner(c,a,s,l,Ct,d,ar);var en=a.getBoxLayoutParams(),tn={width:l.getWidth(),height:l.getHeight()},on=a.get("padding"),cn=getLayoutRect(en,tn,on),dn=this.layoutInner(a,c,cn,u,Ct,ar),Cn=getLayoutRect(defaults({width:dn.width,height:dn.height},en),tn,on);this.group.x=Cn.x-dn.x,this.group.y=Cn.y-dn.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(dn,a))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(a,s,l,u,c,d,Ct){var ar=this.getContentGroup(),en=createHashMap(),tn=s.get("selectedMode"),on=[];l.eachRawSeries(function(cn){!cn.get("legendHoverLink")&&on.push(cn.id)}),each$3(s.getData(),function(cn,dn){var Cn=cn.get("name");if(!this.newlineDisabled&&(Cn===""||Cn===`
`)){var In=new Group$1;In.newline=!0,ar.add(In);return}var ix=l.getSeriesByName(Cn)[0];if(!en.get(Cn))if(ix){var ax=ix.getData(),ox=ax.getVisual("legendLineStyle")||{},sx=ax.getVisual("legendIcon"),ux=ax.getVisual("style"),cx=this._createItem(ix,Cn,dn,cn,s,a,ox,ux,sx,tn,u);cx.on("click",curry(dispatchSelectAction,Cn,null,u,on)).on("mouseover",curry(dispatchHighlightAction,ix.name,null,u,on)).on("mouseout",curry(dispatchDownplayAction,ix.name,null,u,on)),l.ssr&&cx.eachChild(function(hx){var gx=getECData(hx);gx.seriesIndex=ix.seriesIndex,gx.dataIndex=dn,gx.ssrType="legend"}),en.set(Cn,!0)}else l.eachRawSeries(function(hx){if(!en.get(Cn)&&hx.legendVisualProvider){var gx=hx.legendVisualProvider;if(!gx.containName(Cn))return;var fx=gx.indexOfName(Cn),dx=gx.getItemVisual(fx,"style"),mx=gx.getItemVisual(fx,"legendIcon"),vx=parse(dx.fill);vx&&vx[3]===0&&(vx[3]=.2,dx=extend(extend({},dx),{fill:stringify(vx,"rgba")}));var bx=this._createItem(hx,Cn,dn,cn,s,a,{},dx,mx,tn,u);bx.on("click",curry(dispatchSelectAction,null,Cn,u,on)).on("mouseover",curry(dispatchHighlightAction,null,Cn,u,on)).on("mouseout",curry(dispatchDownplayAction,null,Cn,u,on)),l.ssr&&bx.eachChild(function(xx){var _x=getECData(xx);_x.seriesIndex=hx.seriesIndex,_x.dataIndex=dn,_x.ssrType="legend"}),en.set(Cn,!0)}},this)},this),c&&this._createSelector(c,s,u,d,Ct)},n.prototype._createSelector=function(a,s,l,u,c){var d=this.getSelectorGroup();each$3(a,function(ar){var en=ar.type,tn=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:en==="all"?"legendAllSelect":"legendInverseSelect",legendId:s.id})}});d.add(tn);var on=s.getModel("selectorLabel"),cn=s.getModel(["emphasis","selectorLabel"]);setLabelStyle(tn,{normal:on,emphasis:cn},{defaultText:ar.title}),enableHoverEmphasis(tn)})},n.prototype._createItem=function(a,s,l,u,c,d,Ct,ar,en,tn,on){var cn=a.visualDrawType,dn=c.get("itemWidth"),Cn=c.get("itemHeight"),In=c.isSelected(s),ix=u.get("symbolRotate"),ax=u.get("symbolKeepAspect"),ox=u.get("icon");en=ox||en||"roundRect";var sx=getLegendStyle(en,u,Ct,ar,cn,In,on),ux=new Group$1,cx=u.getModel("textStyle");if(isFunction$1(a.getLegendIcon)&&(!ox||ox==="inherit"))ux.add(a.getLegendIcon({itemWidth:dn,itemHeight:Cn,icon:en,iconRotate:ix,itemStyle:sx.itemStyle,lineStyle:sx.lineStyle,symbolKeepAspect:ax}));else{var hx=ox==="inherit"&&a.getData().getVisual("symbol")?ix==="inherit"?a.getData().getVisual("symbolRotate"):ix:0;ux.add(getDefaultLegendIcon({itemWidth:dn,itemHeight:Cn,icon:en,iconRotate:hx,itemStyle:sx.itemStyle,symbolKeepAspect:ax}))}var gx=d==="left"?dn+5:-5,fx=d,dx=c.get("formatter"),mx=s;isString$1(dx)&&dx?mx=dx.replace("{name}",s??""):isFunction$1(dx)&&(mx=dx(s));var vx=In?cx.getTextColor():u.get("inactiveColor");ux.add(new ZRText({style:createTextStyle$1(cx,{text:mx,x:gx,y:Cn/2,fill:vx,align:fx,verticalAlign:"middle"},{inheritColor:vx})}));var bx=new Rect$2({shape:ux.getBoundingRect(),style:{fill:"transparent"}}),xx=u.getModel("tooltip");return xx.get("show")&&setTooltipConfig({el:bx,componentModel:c,itemName:s,itemTooltipOption:xx.option}),ux.add(bx),ux.eachChild(function(_x){_x.silent=!0}),bx.silent=!tn,this.getContentGroup().add(ux),enableHoverEmphasis(ux),ux.__legendDataIndex=l,ux},n.prototype.layoutInner=function(a,s,l,u,c,d){var Ct=this.getContentGroup(),ar=this.getSelectorGroup();box(a.get("orient"),Ct,a.get("itemGap"),l.width,l.height);var en=Ct.getBoundingRect(),tn=[-en.x,-en.y];if(ar.markRedraw(),Ct.markRedraw(),c){box("horizontal",ar,a.get("selectorItemGap",!0));var on=ar.getBoundingRect(),cn=[-on.x,-on.y],dn=a.get("selectorButtonGap",!0),Cn=a.getOrient().index,In=Cn===0?"width":"height",ix=Cn===0?"height":"width",ax=Cn===0?"y":"x";d==="end"?cn[Cn]+=en[In]+dn:tn[Cn]+=on[In]+dn,cn[1-Cn]+=en[ix]/2-on[ix]/2,ar.x=cn[0],ar.y=cn[1],Ct.x=tn[0],Ct.y=tn[1];var ox={x:0,y:0};return ox[In]=en[In]+dn+on[In],ox[ix]=Math.max(en[ix],on[ix]),ox[ax]=Math.min(0,on[ax]+cn[1-Cn]),ox}else return Ct.x=tn[0],Ct.y=tn[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n})(ComponentView);function getLegendStyle(t,n,a,s,l,u,c){function d(In,ix){In.lineWidth==="auto"&&(In.lineWidth=ix.lineWidth>0?2:0),each$3(In,function(ax,ox){In[ox]==="inherit"&&(In[ox]=ix[ox])})}var Ct=n.getModel("itemStyle"),ar=Ct.getItemStyle(),en=t.lastIndexOf("empty",0)===0?"fill":"stroke",tn=Ct.getShallow("decal");ar.decal=!tn||tn==="inherit"?s.decal:createOrUpdatePatternFromDecal(tn,c),ar.fill==="inherit"&&(ar.fill=s[l]),ar.stroke==="inherit"&&(ar.stroke=s[en]),ar.opacity==="inherit"&&(ar.opacity=(l==="fill"?s:a).opacity),d(ar,s);var on=n.getModel("lineStyle"),cn=on.getLineStyle();if(d(cn,a),ar.fill==="auto"&&(ar.fill=s.fill),ar.stroke==="auto"&&(ar.stroke=s.fill),cn.stroke==="auto"&&(cn.stroke=s.fill),!u){var dn=n.get("inactiveBorderWidth"),Cn=ar[en];ar.lineWidth=dn==="auto"?s.lineWidth>0&&Cn?2:0:ar.lineWidth,ar.fill=n.get("inactiveColor"),ar.stroke=n.get("inactiveBorderColor"),cn.stroke=on.get("inactiveColor"),cn.lineWidth=on.get("inactiveWidth")}return{itemStyle:ar,lineStyle:cn}}function getDefaultLegendIcon(t){var n=t.icon||"roundRect",a=createSymbol$1(n,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return a.setStyle(t.itemStyle),a.rotation=(t.iconRotate||0)*Math.PI/180,a.setOrigin([t.itemWidth/2,t.itemHeight/2]),n.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}function dispatchSelectAction(t,n,a,s){dispatchDownplayAction(t,n,a,s),a.dispatchAction({type:"legendToggleSelect",name:t??n}),dispatchHighlightAction(t,n,a,s)}function isUseHoverLayer(t){for(var n=t.getZr().storage.getDisplayList(),a,s=0,l=n.length;s<l&&!(a=n[s].states.emphasis);)s++;return a&&a.hoverLayer}function dispatchHighlightAction(t,n,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"highlight",seriesName:t,name:n,excludeSeriesId:s})}function dispatchDownplayAction(t,n,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"downplay",seriesName:t,name:n,excludeSeriesId:s})}function legendFilter(t){var n=t.findComponents({mainType:"legend"});n&&n.length&&t.filterSeries(function(a){for(var s=0;s<n.length;s++)if(!n[s].isSelected(a.name))return!1;return!0})}function legendSelectActionHandler(t,n,a){var s=t==="allSelect"||t==="inverseSelect",l={},u=[];a.eachComponent({mainType:"legend",query:n},function(d){s?d[t]():d[t](n.name),makeSelectedMap(d,l),u.push(d.componentIndex)});var c={};return a.eachComponent("legend",function(d){each$f(l,function(Ct,ar){d[Ct?"select":"unSelect"](ar)}),makeSelectedMap(d,c)}),s?{selected:c,legendIndex:u}:{name:n.name,selected:c}}function makeSelectedMap(t,n){var a=n||{};return each$f(t.getData(),function(s){var l=s.get("name");if(!(l===`
`||l==="")){var u=t.isSelected(l);hasOwn(a,l)?a[l]=a[l]&&u:a[l]=u}}),a}function installLegendAction(t){t.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),t.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),t.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(t){t.registerComponentModel(LegendModel),t.registerComponentView(LegendView),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),t.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(t)}var ScrollableLegendModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},n.prototype.init=function(a,s,l){var u=getLayoutParams(a);t.prototype.init.call(this,a,s,l),mergeAndNormalizeLayoutParams(this,a,u)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),mergeAndNormalizeLayoutParams(this,this.option,a)},n.type="legend.scroll",n.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n})(LegendModel);function mergeAndNormalizeLayoutParams(t,n,a){var s=t.getOrient(),l=[1,1];l[s.index]=0,mergeLayoutParam(n,a,{type:"box",ignoreSize:!!l})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!0,a._currentIndex=0,a}return n.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},n.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(a,s,l,u,c,d,Ct){var ar=this;t.prototype.renderInner.call(this,a,s,l,u,c,d,Ct);var en=this._controllerGroup,tn=s.get("pageIconSize",!0),on=isArray$1(tn)?tn:[tn,tn];dn("pagePrev",0);var cn=s.getModel("pageTextStyle");en.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:cn.getTextColor(),font:cn.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),dn("pageNext",1);function dn(Cn,In){var ix=Cn+"DataIndex",ax=createIcon(s.get("pageIcons",!0)[s.getOrient().name][In],{onclick:bind$1(ar._pageGo,ar,ix,s,u)},{x:-on[0]/2,y:-on[1]/2,width:on[0],height:on[1]});ax.name=Cn,en.add(ax)}},n.prototype.layoutInner=function(a,s,l,u,c,d){var Ct=this.getSelectorGroup(),ar=a.getOrient().index,en=WH[ar],tn=XY[ar],on=WH[1-ar],cn=XY[1-ar];c&&box("horizontal",Ct,a.get("selectorItemGap",!0));var dn=a.get("selectorButtonGap",!0),Cn=Ct.getBoundingRect(),In=[-Cn.x,-Cn.y],ix=clone$4(l);c&&(ix[en]=l[en]-Cn[en]-dn);var ax=this._layoutContentAndController(a,u,ix,ar,en,on,cn,tn);if(c){if(d==="end")In[ar]+=ax[en]+dn;else{var ox=Cn[en]+dn;In[ar]-=ox,ax[tn]-=ox}ax[en]+=Cn[en]+dn,In[1-ar]+=ax[cn]+ax[on]/2-Cn[on]/2,ax[on]=Math.max(ax[on],Cn[on]),ax[cn]=Math.min(ax[cn],Cn[cn]+In[1-ar]),Ct.x=In[0],Ct.y=In[1],Ct.markRedraw()}return ax},n.prototype._layoutContentAndController=function(a,s,l,u,c,d,Ct,ar){var en=this.getContentGroup(),tn=this._containerGroup,on=this._controllerGroup;box(a.get("orient"),en,a.get("itemGap"),u?l.width:null,u?null:l.height),box("horizontal",on,a.get("pageButtonItemGap",!0));var cn=en.getBoundingRect(),dn=on.getBoundingRect(),Cn=this._showController=cn[c]>l[c],In=[-cn.x,-cn.y];s||(In[u]=en[ar]);var ix=[0,0],ax=[-dn.x,-dn.y],ox=retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));if(Cn){var sx=a.get("pageButtonPosition",!0);sx==="end"?ax[u]+=l[c]-dn[c]:ix[u]+=dn[c]+ox}ax[1-u]+=cn[d]/2-dn[d]/2,en.setPosition(In),tn.setPosition(ix),on.setPosition(ax);var ux={x:0,y:0};if(ux[c]=Cn?l[c]:cn[c],ux[d]=Math.max(cn[d],dn[d]),ux[Ct]=Math.min(0,dn[Ct]+ax[1-u]),tn.__rectSize=l[c],Cn){var cx={x:0,y:0};cx[c]=Math.max(l[c]-dn[c]-ox,0),cx[d]=ux[d],tn.setClipPath(new Rect$2({shape:cx})),tn.__rectSize=cx[c]}else on.eachChild(function(gx){gx.attr({invisible:!0,silent:!0})});var hx=this._getPageInfo(a);return hx.pageIndex!=null&&updateProps$1(en,{x:hx.contentPosition[0],y:hx.contentPosition[1]},Cn?a:null),this._updatePageInfoView(a,hx),ux},n.prototype._pageGo=function(a,s,l){var u=this._getPageInfo(s)[a];u!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:s.id})},n.prototype._updatePageInfoView=function(a,s){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(en){var tn=en+"DataIndex",on=s[tn]!=null,cn=l.childOfName(en);cn&&(cn.setStyle("fill",on?a.get("pageIconColor",!0):a.get("pageIconInactiveColor",!0)),cn.cursor=on?"pointer":"default")});var u=l.childOfName("pageText"),c=a.get("pageFormatter"),d=s.pageIndex,Ct=d!=null?d+1:0,ar=s.pageCount;u&&c&&u.setStyle("text",isString$1(c)?c.replace("{current}",Ct==null?"":Ct+"").replace("{total}",ar==null?"":ar+""):c({current:Ct,total:ar}))},n.prototype._getPageInfo=function(a){var s=a.get("scrollDataIndex",!0),l=this.getContentGroup(),u=this._containerGroup.__rectSize,c=a.getOrient().index,d=WH[c],Ct=XY[c],ar=this._findTargetItemIndex(s),en=l.children(),tn=en[ar],on=en.length,cn=on?1:0,dn={contentPosition:[l.x,l.y],pageCount:cn,pageIndex:cn-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!tn)return dn;var Cn=sx(tn);dn.contentPosition[c]=-Cn.s;for(var In=ar+1,ix=Cn,ax=Cn,ox=null;In<=on;++In)ox=sx(en[In]),(!ox&&ax.e>ix.s+u||ox&&!ux(ox,ix.s))&&(ax.i>ix.i?ix=ax:ix=ox,ix&&(dn.pageNextDataIndex==null&&(dn.pageNextDataIndex=ix.i),++dn.pageCount)),ax=ox;for(var In=ar-1,ix=Cn,ax=Cn,ox=null;In>=-1;--In)ox=sx(en[In]),(!ox||!ux(ax,ox.s))&&ix.i<ax.i&&(ax=ix,dn.pagePrevDataIndex==null&&(dn.pagePrevDataIndex=ix.i),++dn.pageCount,++dn.pageIndex),ix=ox;return dn;function sx(cx){if(cx){var hx=cx.getBoundingRect(),gx=hx[Ct]+cx[Ct];return{s:gx,e:gx+hx[d],i:cx.__legendDataIndex}}}function ux(cx,hx){return cx.e>=hx&&cx.s<=hx+u}},n.prototype._findTargetItemIndex=function(a){if(!this._showController)return 0;var s,l=this.getContentGroup(),u;return l.eachChild(function(c,d){var Ct=c.__legendDataIndex;u==null&&Ct!=null&&(u=d),Ct===a&&(s=d)}),s??u},n.type="legend.scroll",n})(LegendView);function installScrollableLegendAction(t){t.registerAction("legendScroll","legendscroll",function(n,a){var s=n.scrollDataIndex;s!=null&&a.eachComponent({mainType:"legend",subType:"scroll",query:n},function(l){l.setScrollDataIndex(s)})})}function install$a(t){use(install$b),t.registerComponentModel(ScrollableLegendModel),t.registerComponentView(ScrollableLegendView),installScrollableLegendAction(t)}function install$9(t){use(install$b),use(install$a)}var InsideZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.inside",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n})(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(t,n,a){inner$1(t).coordSysRecordMap.each(function(s){var l=s.dataZoomInfoMap.get(n.uid);l&&(l.getRange=a)})}function disposeCoordSysRecordIfNeeded(t,n){for(var a=inner$1(t).coordSysRecordMap,s=a.keys(),l=0;l<s.length;l++){var u=s[l],c=a.get(u),d=c.dataZoomInfoMap;if(d){var Ct=n.uid,ar=d.get(Ct);ar&&(d.removeKey(Ct),d.keys().length||disposeCoordSysRecord(a,c))}}}function disposeCoordSysRecord(t,n){if(n){t.removeKey(n.model.uid);var a=n.controller;a&&a.dispose()}}function createCoordSysRecord(t,n){var a={model:n,containsPoint:curry$1(containsPoint,n),dispatchAction:curry$1(dispatchAction,t),dataZoomInfoMap:null,controller:null},s=a.controller=new RoamController(t.getZr());return each$f(["pan","zoom","scrollMove"],function(l){s.on(l,function(u){var c=[];a.dataZoomInfoMap.each(function(d){if(u.isAvailableBehavior(d.model.option)){var Ct=(d.getRange||{})[l],ar=Ct&&Ct(d.dzReferCoordSysInfo,a.model.mainType,a.controller,u);!d.model.get("disabled",!0)&&ar&&c.push({dataZoomId:d.model.id,start:ar[0],end:ar[1]})}}),c.length&&a.dispatchAction(c)})}),a}function dispatchAction(t,n){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function containsPoint(t,n,a,s){return t.coordinateSystem.containPoint([a,s])}function mergeControllerParams(t){var n,a="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return t.each(function(u){var c=u.model,d=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;s[a+d]>s[a+n]&&(n=d),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(n,a){var s=inner$1(a),l=s.coordSysRecordMap||(s.coordSysRecordMap=createHashMap());l.each(function(u){u.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var c=collectReferCoordSysModelInfo(u);each$f(c.infoList,function(d){var Ct=d.model.uid,ar=l.get(Ct)||l.set(Ct,createCoordSysRecord(a,d.model)),en=ar.dataZoomInfoMap||(ar.dataZoomInfoMap=createHashMap());en.set(u.uid,{dzReferCoordSysInfo:d,model:u,getRange:null})})}),l.each(function(u){var c=u.controller,d,Ct=u.dataZoomInfoMap;if(Ct){var ar=Ct.keys()[0];ar!=null&&(d=Ct.get(ar))}if(!d){disposeCoordSysRecord(l,u);return}var en=mergeControllerParams(Ct);c.enable(en.controlType,en.opt),c.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",d.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return n.prototype.render=function(a,s,l){if(t.prototype.render.apply(this,arguments),a.noTarget()){this._clear();return}this.range=a.getPercentRange(),setViewInfoToCoordSysRecord(l,a,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n})(DataZoomView),getRangeHandlers={zoom:function(t,n,a,s){var l=this.range,u=l.slice(),c=t.axisModels[0];if(c){var d=getDirectionInfo[n](null,[s.originX,s.originY],c,a,t),Ct=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(u[1]-u[0])+u[0],ar=Math.max(1/s.scale,0);u[0]=(u[0]-Ct)*ar+Ct,u[1]=(u[1]-Ct)*ar+Ct;var en=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,en.minSpan,en.maxSpan),this.range=u,l[0]!==u[0]||l[1]!==u[1])return u}},pan:makeMover(function(t,n,a,s,l,u){var c=getDirectionInfo[s]([u.oldX,u.oldY],[u.newX,u.newY],n,l,a);return c.signal*(t[1]-t[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(t,n,a,s,l,u){var c=getDirectionInfo[s]([0,0],[u.scrollDelta,u.scrollDelta],n,l,a);return c.signal*(t[1]-t[0])*u.scrollDelta})};function makeMover(t){return function(n,a,s,l){var u=this.range,c=u.slice(),d=n.axisModels[0];if(d){var Ct=t(c,d,n,a,s,l);if(sliderMove(Ct,c,[0,100],"all"),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}}}var getDirectionInfo={grid:function(t,n,a,s,l){var u=a.axis,c={},d=l.model.coordinateSystem.getRect();return t=t||[0,0],u.dim==="x"?(c.pixel=n[0]-t[0],c.pixelLength=d.width,c.pixelStart=d.x,c.signal=u.inverse?1:-1):(c.pixel=n[1]-t[1],c.pixelLength=d.height,c.pixelStart=d.y,c.signal=u.inverse?-1:1),c},polar:function(t,n,a,s,l){var u=a.axis,c={},d=l.model.coordinateSystem,Ct=d.getRadiusAxis().getExtent(),ar=d.getAngleAxis().getExtent();return t=t?d.pointToCoord(t):[0,0],n=d.pointToCoord(n),a.mainType==="radiusAxis"?(c.pixel=n[0]-t[0],c.pixelLength=Ct[1]-Ct[0],c.pixelStart=Ct[0],c.signal=u.inverse?1:-1):(c.pixel=n[1]-t[1],c.pixelLength=ar[1]-ar[0],c.pixelStart=ar[0],c.signal=u.inverse?-1:1),c},singleAxis:function(t,n,a,s,l){var u=a.axis,c=l.model.coordinateSystem.getRect(),d={};return t=t||[0,0],u.orient==="horizontal"?(d.pixel=n[0]-t[0],d.pixelLength=c.width,d.pixelStart=c.x,d.signal=u.inverse?1:-1):(d.pixel=n[1]-t[1],d.pixelLength=c.height,d.pixelStart=c.y,d.signal=u.inverse?-1:1),d}};function install$8(t){installCommon$1(t),t.registerComponentModel(InsideZoomModel),t.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(t)}var SliderZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n})(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._displayables={},a}return n.prototype.init=function(a,s){this.api=s,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},n.prototype.render=function(a,s,l,u){if(t.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),a.get("show")===!1){this.group.removeAll();return}if(a.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var s=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(s),this._positionGroup()},n.prototype._resetLocation=function(){var a=this.dataZoomModel,s=this.api,l=a.get("brushSelect"),u=l?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),d={width:s.getWidth(),height:s.getHeight()},Ct=this._orient===HORIZONTAL?{right:d.width-c.x-c.width,top:d.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},ar=getLayoutParams(a.option);each$f(["right","top","width","height"],function(tn){ar[tn]==="ph"&&(ar[tn]=Ct[tn])});var en=getLayoutRect(ar,d);this._location={x:en.x,y:en.y},this._size=[en.width,en.height],this._orient===VERTICAL&&this._size.reverse()},n.prototype._positionGroup=function(){var a=this.group,s=this._location,l=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),c=u&&u.get("inverse"),d=this._displayables.sliderGroup,Ct=(this._dataShadowInfo||{}).otherAxisInverse;d.attr(l===HORIZONTAL&&!c?{scaleY:Ct?1:-1,scaleX:1}:l===HORIZONTAL&&c?{scaleY:Ct?1:-1,scaleX:-1}:l===VERTICAL&&!c?{scaleY:Ct?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:Ct?-1:1,scaleX:-1,rotation:Math.PI/2});var ar=a.getBoundingRect([d]);a.x=s.x-ar.x,a.y=s.y-ar.y,a.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var a=this.dataZoomModel,s=this._size,l=this._displayables.sliderGroup,u=a.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),d=this.api.getZr();u?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",d.on("mousemove",this._onBrush),d.on("mouseup",this._onBrushEnd)):(d.off("mousemove",this._onBrush),d.off("mouseup",this._onBrushEnd)),l.add(c)},n.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!a)return;var s=this._size,l=this._shadowSize||[],u=a.series,c=u.getRawData(),d=u.getShadowDim&&u.getShadowDim(),Ct=d&&c.getDimensionInfo(d)?u.getShadowDim():a.otherDim;if(Ct==null)return;var ar=this._shadowPolygonPts,en=this._shadowPolylinePts;if(c!==this._shadowData||Ct!==this._shadowDim||s[0]!==l[0]||s[1]!==l[1]){var tn=c.getDataExtent(Ct),on=(tn[1]-tn[0])*.3;tn=[tn[0]-on,tn[1]+on];var cn=[0,s[1]],dn=[0,s[0]],Cn=[[s[0],0],[0,0]],In=[],ix=dn[1]/(c.count()-1),ax=0,ox=Math.round(c.count()/s[0]),sx;c.each([Ct],function(fx,dx){if(ox>0&&dx%ox){ax+=ix;return}var mx=fx==null||isNaN(fx)||fx==="",vx=mx?0:linearMap$2(fx,tn,cn,!0);mx&&!sx&&dx?(Cn.push([Cn[Cn.length-1][0],0]),In.push([In[In.length-1][0],0])):!mx&&sx&&(Cn.push([ax,0]),In.push([ax,0])),Cn.push([ax,vx]),In.push([ax,vx]),ax+=ix,sx=mx}),ar=this._shadowPolygonPts=Cn,en=this._shadowPolylinePts=In}this._shadowData=c,this._shadowDim=Ct,this._shadowSize=[s[0],s[1]];var ux=this.dataZoomModel;function cx(fx){var dx=ux.getModel(fx?"selectedDataBackground":"dataBackground"),mx=new Group$3,vx=new Polygon({shape:{points:ar},segmentIgnoreThreshold:1,style:dx.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),bx=new Polyline$1({shape:{points:en},segmentIgnoreThreshold:1,style:dx.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return mx.add(vx),mx.add(bx),mx}for(var hx=0;hx<3;hx++){var gx=cx(hx===1);this._displayables.sliderGroup.add(gx),this._displayables.dataShadowSegs.push(gx)}},n.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,s=a.get("showDataShadow");if(s!==!1){var l,u=this.ecModel;return a.eachTargetAxis(function(c,d){var Ct=a.getAxisProxy(c,d).getTargetSeriesModels();each$f(Ct,function(ar){if(!l&&!(s!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,ar.get("type"))<0)){var en=u.getComponent(getAxisMainType(c),d).axis,tn=getOtherDim(c),on,cn=ar.coordinateSystem;tn!=null&&cn.getOtherAxis&&(on=cn.getOtherAxis(en).inverse),tn=ar.getData().mapDimension(tn),l={thisAxis:en,series:ar,thisDim:c,otherDim:tn,otherAxisInverse:on}}},this)},this),l}},n.prototype._renderHandle=function(){var a=this.group,s=this._displayables,l=s.handles=[null,null],u=s.handleLabels=[null,null],c=this._displayables.sliderGroup,d=this._size,Ct=this.dataZoomModel,ar=this.api,en=Ct.get("borderRadius")||0,tn=Ct.get("brushSelect"),on=s.filler=new Rect({silent:tn,style:{fill:Ct.get("fillerColor")},textConfig:{position:"inside"}});c.add(on),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:d[0],height:d[1],r:en},style:{stroke:Ct.get("dataBackgroundColor")||Ct.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(ox){var sx=Ct.get("handleIcon");!symbolBuildProxies[sx]&&sx.indexOf("path://")<0&&sx.indexOf("image://")<0&&(sx="path://"+sx);var ux=createSymbol$1(sx,-1,0,2,2,null,!0);ux.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,ox),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var cx=ux.getBoundingRect(),hx=Ct.get("handleSize");this._handleHeight=parsePercent(hx,this._size[1]),this._handleWidth=cx.width/cx.height*this._handleHeight,ux.setStyle(Ct.getModel("handleStyle").getItemStyle()),ux.style.strokeNoScale=!0,ux.rectHover=!0,ux.ensureState("emphasis").style=Ct.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(ux);var gx=Ct.get("handleColor");gx!=null&&(ux.style.fill=gx),c.add(l[ox]=ux);var fx=Ct.getModel("textStyle"),dx=Ct.get("handleLabel")||{},mx=dx.show||!1;a.add(u[ox]=new ZRText({silent:!0,invisible:!mx,style:createTextStyle$1(fx,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:fx.getTextColor(),font:fx.getFont()}),z2:10}))},this);var cn=on;if(tn){var dn=parsePercent(Ct.get("moveHandleSize"),d[1]),Cn=s.moveHandle=new Rect$2({style:Ct.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:d[1]-.5,height:dn}}),In=dn*.8,ix=s.moveHandleIcon=createSymbol$1(Ct.get("moveHandleIcon"),-In/2,-In/2,In,In,"#fff",!0);ix.silent=!0,ix.y=d[1]+dn/2-.5,Cn.ensureState("emphasis").style=Ct.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var ax=Math.min(d[1]/2,Math.max(dn,10));cn=s.moveZone=new Rect$2({invisible:!0,shape:{y:d[1]-ax,height:dn+ax}}),cn.on("mouseover",function(){ar.enterEmphasis(Cn)}).on("mouseout",function(){ar.leaveEmphasis(Cn)}),c.add(Cn),c.add(ix),c.add(cn)}cn.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),s=this._getViewExtent();this._handleEnds=[linearMap$2(a[0],[0,100],s,!0),linearMap$2(a[1],[0,100],s,!0)]},n.prototype._updateInterval=function(a,s){var l=this.dataZoomModel,u=this._handleEnds,c=this._getViewExtent(),d=l.findRepresentativeAxisProxy().getMinMaxSpan(),Ct=[0,100];sliderMove(s,u,c,l.get("zoomLock")?"all":a,d.minSpan!=null?linearMap$2(d.minSpan,Ct,c,!0):null,d.maxSpan!=null?linearMap$2(d.maxSpan,Ct,c,!0):null);var ar=this._range,en=this._range=asc$2([linearMap$2(u[0],c,Ct,!0),linearMap$2(u[1],c,Ct,!0)]);return!ar||ar[0]!==en[0]||ar[1]!==en[1]},n.prototype._updateView=function(a){var s=this._displayables,l=this._handleEnds,u=asc$2(l.slice()),c=this._size;each$f([0,1],function(cn){var dn=s.handles[cn],Cn=this._handleHeight;dn.attr({scaleX:Cn/2,scaleY:Cn/2,x:l[cn]+(cn?-1:1),y:c[1]/2-Cn/2})},this),s.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:c[1]});var d={x:u[0],width:u[1]-u[0]};s.moveHandle&&(s.moveHandle.setShape(d),s.moveZone.setShape(d),s.moveZone.getBoundingRect(),s.moveHandleIcon&&s.moveHandleIcon.attr("x",d.x+d.width/2));for(var Ct=s.dataShadowSegs,ar=[0,u[0],u[1],c[0]],en=0;en<Ct.length;en++){var tn=Ct[en],on=tn.getClipPath();on||(on=new Rect$2,tn.setClipPath(on)),on.setShape({x:ar[en],y:0,width:ar[en+1]-ar[en],height:c[1]})}this._updateDataInfo(a)},n.prototype._updateDataInfo=function(a){var s=this.dataZoomModel,l=this._displayables,u=l.handleLabels,c=this._orient,d=["",""];if(s.get("showDetail")){var Ct=s.findRepresentativeAxisProxy();if(Ct){var ar=Ct.getAxisModel().axis,en=this._range,tn=a?Ct.calculateDataWindow({start:en[0],end:en[1]}).valueWindow:Ct.getDataValueWindow();d=[this._formatLabel(tn[0],ar),this._formatLabel(tn[1],ar)]}}var on=asc$2(this._handleEnds.slice());cn.call(this,0),cn.call(this,1);function cn(dn){var Cn=getTransform$1(l.handles[dn].parent,this.group),In=transformDirection(dn===0?"right":"left",Cn),ix=this._handleWidth/2+LABEL_GAP,ax=applyTransform([on[dn]+(dn===0?-ix:ix),this._size[1]/2],Cn);u[dn].setStyle({x:ax[0],y:ax[1],verticalAlign:c===HORIZONTAL?"middle":In,align:c===HORIZONTAL?In:"center",text:d[dn]})}},n.prototype._formatLabel=function(a,s){var l=this.dataZoomModel,u=l.get("labelFormatter"),c=l.get("labelPrecision");(c==null||c==="auto")&&(c=s.getPixelPrecision());var d=a==null||isNaN(a)?"":s.type==="category"||s.type==="time"?s.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(c,20));return isFunction$1(u)?u(a,d):isString$1(u)?u.replace("{value}",d):d},n.prototype._showDataInfo=function(a){var s=this.dataZoomModel.get("handleLabel")||{},l=s.show||!1,u=this.dataZoomModel.getModel(["emphasis","handleLabel"]),c=u.get("show")||!1,d=a||this._dragging?c:l,Ct=this._displayables,ar=Ct.handleLabels;ar[0].attr("invisible",!d),ar[1].attr("invisible",!d),Ct.moveHandle&&this.api[d?"enterEmphasis":"leaveEmphasis"](Ct.moveHandle,1)},n.prototype._onDragMove=function(a,s,l,u){this._dragging=!0,stop(u.event);var c=this._displayables.sliderGroup.getLocalTransform(),d=applyTransform([s,l],c,!0),Ct=this._updateInterval(a,d[0]),ar=this.dataZoomModel.get("realtime");this._updateView(!ar),Ct&&ar&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var a=this.dataZoomModel.get("realtime");!a&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(a){var s=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(l[0]<0||l[0]>s[0]||l[1]<0||l[1]>s[1])){var u=this._handleEnds,c=(u[0]+u[1])/2,d=this._updateInterval("all",l[0]-c);this._updateView(),d&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(a){var s=a.offsetX,l=a.offsetY;this._brushStart=new Point(s,l),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(a){if(this._brushing){var s=this._displayables.brushRect;if(this._brushing=!1,!!s){s.attr("ignore",!0);var l=s.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(l.width)<5)){var c=this._getViewExtent(),d=[0,100];this._range=asc$2([linearMap$2(l.x,c,d,!0),linearMap$2(l.x+l.width,c,d,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(a){this._brushing&&(stop(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},n.prototype._updateBrushRect=function(a,s){var l=this._displayables,u=this.dataZoomModel,c=l.brushRect;c||(c=l.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(c)),c.attr("ignore",!1);var d=this._brushStart,Ct=this._displayables.sliderGroup,ar=Ct.transformCoordToLocal(a,s),en=Ct.transformCoordToLocal(d.x,d.y),tn=this._size;ar[0]=Math.max(Math.min(tn[0],ar[0]),0),c.setShape({x:en[0],y:0,width:ar[0]-en[0],height:tn[1]})},n.prototype._dispatchZoomAction=function(a){var s=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?REALTIME_ANIMATION_CONFIG:null,start:s[0],end:s[1]})},n.prototype._findCoordRect=function(){var a,s=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!a&&s.length){var l=s[0].model.coordinateSystem;a=l.getRect&&l.getRect()}if(!a){var u=this.api.getWidth(),c=this.api.getHeight();a={x:u*.2,y:c*.2,width:u*.6,height:c*.6}}return a},n.type="dataZoom.slider",n})(DataZoomView);function getOtherDim(t){var n={x:"y",y:"x",radius:"angle",angle:"radius"};return n[t]}function getCursor$1(t){return t==="vertical"?"ns-resize":"ew-resize"}function install$7(t){t.registerComponentModel(SliderZoomModel),t.registerComponentView(SliderZoomView),installCommon$1(t)}function install$6(t){use(install$8),use(install$7)}var visualDefault={get:function(t,n,a){var s=clone$4((defaultOption[t]||{})[n]);return a&&isArray$1(s)?s[s.length-1]:s}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l)},n.prototype.optionUpdated=function(a,s){var l=this.option;!s&&replaceVisualOption(l,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(a){var s=this.stateList;a=bind$1(a,this),this.controllerVisuals=createVisualMappings(this.option.controller,s,a),this.targetVisuals=createVisualMappings(this.option.target,s,a)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,s=[];return a==null||a==="all"?this.ecModel.eachSeries(function(l,u){s.push(u)}):s=normalizeToArray(a),s},n.prototype.eachTargetSeries=function(a,s){each$f(this.getTargetSeriesIndices(),function(l){var u=this.ecModel.getSeriesByIndex(l);u&&a.call(s,u)},this)},n.prototype.isTargetSeries=function(a){var s=!1;return this.eachTargetSeries(function(l){l===a&&(s=!0)}),s},n.prototype.formatValueText=function(a,s,l){var u=this.option,c=u.precision,d=this.dataBound,Ct=u.formatter,ar;l=l||["<",">"],isArray$1(a)&&(a=a.slice(),ar=!0);var en=s?a:ar?[tn(a[0]),tn(a[1])]:tn(a);if(isString$1(Ct))return Ct.replace("{value}",ar?en[0]:en).replace("{value2}",ar?en[1]:en);if(isFunction$1(Ct))return ar?Ct(a[0],a[1]):Ct(a);if(ar)return a[0]===d[0]?l[0]+" "+en[1]:a[1]===d[1]?l[1]+" "+en[0]:en[0]+" - "+en[1];return en;function tn(on){return on===d[0]?"min":on===d[1]?"max":(+on).toFixed(Math.min(c,20))}},n.prototype.resetExtent=function(){var a=this.option,s=asc([a.min,a.max]);this._dataExtent=s},n.prototype.getDataDimensionIndex=function(a){var s=this.option.dimension;if(s!=null)return a.getDimensionIndex(s);for(var l=a.dimensions,u=l.length-1;u>=0;u--){var c=l[u],d=a.getDimensionInfo(c);if(!d.isCalculationCoord)return d.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var a=this.ecModel,s=this.option,l={inRange:s.inRange,outOfRange:s.outOfRange},u=s.target||(s.target={}),c=s.controller||(s.controller={});merge(u,l),merge(c,l);var d=this.isCategory();Ct.call(this,u),Ct.call(this,c),ar.call(this,u,"inRange","outOfRange"),en.call(this,c);function Ct(tn){isArray(s.color)&&!tn.inRange&&(tn.inRange={color:s.color.slice().reverse()}),tn.inRange=tn.inRange||{color:a.get("gradientColor")}}function ar(tn,on,cn){var dn=tn[on],Cn=tn[cn];dn&&!Cn&&(Cn=tn[cn]={},each$2(dn,function(In,ix){if(VisualMapping.isValidType(ix)){var ax=visualDefault.get(ix,"inactive",d);ax!=null&&(Cn[ix]=ax,ix==="color"&&!Cn.hasOwnProperty("opacity")&&!Cn.hasOwnProperty("colorAlpha")&&(Cn.opacity=[0,0]))}}))}function en(tn){var on=(tn.inRange||{}).symbol||(tn.outOfRange||{}).symbol,cn=(tn.inRange||{}).symbolSize||(tn.outOfRange||{}).symbolSize,dn=this.get("inactiveColor"),Cn=this.getItemSymbol(),In=Cn||"roundRect";each$2(this.stateList,function(ix){var ax=this.itemSize,ox=tn[ix];ox||(ox=tn[ix]={color:d?dn:[dn]}),ox.symbol==null&&(ox.symbol=on&&clone$4(on)||(d?In:[In])),ox.symbolSize==null&&(ox.symbolSize=cn&&clone$4(cn)||(d?ax[0]:[ax[0],ax[0]])),ox.symbol=mapVisual(ox.symbol,function(cx){return cx==="none"?In:cx});var sx=ox.symbolSize;if(sx!=null){var ux=-1/0;eachVisual(sx,function(cx){cx>ux&&(ux=cx)}),ox.symbolSize=mapVisual(sx,function(cx){return linearMap$1(cx,[0,ux],[0,ax[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(a){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(a){return null},n.prototype.getVisualMeta=function(a){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n})(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(a,s){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=DEFAULT_BAR_BOUND[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var a=this.getExtent(),s=this.option.range;!s||s.auto?(a.auto=1,this.option.range=a):isArray$1(s)&&(s[0]>s[1]&&s.reverse(),s[0]=Math.max(s[0],a[0]),s[1]=Math.min(s[1],a[1]))},n.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(a){var s=this.option.controller[a].symbolSize;s&&s[0]!==s[1]&&(s[0]=s[1]/3)},this)},n.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},n.prototype.getSelected=function(){var a=this.getExtent(),s=asc$2((this.get("range")||[]).slice());return s[0]>a[1]&&(s[0]=a[1]),s[1]>a[1]&&(s[1]=a[1]),s[0]<a[0]&&(s[0]=a[0]),s[1]<a[0]&&(s[1]=a[0]),s},n.prototype.getValueState=function(a){var s=this.option.range,l=this.getExtent();return(s[0]<=l[0]||s[0]<=a)&&(s[1]>=l[1]||a<=s[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var s=[];return this.eachTargetSeries(function(l){var u=[],c=l.getData();c.each(this.getDataDimensionIndex(c),function(d,Ct){a[0]<=d&&d<=a[1]&&u.push(Ct)},this),s.push({seriesId:l.id,dataIndex:u})},this),s},n.prototype.getVisualMeta=function(a){var s=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function c(cn,dn){u.push({value:cn,color:a(cn,dn)})}for(var d=0,Ct=0,ar=l.length,en=s.length;Ct<en&&(!l.length||s[Ct]<=l[0]);Ct++)s[Ct]<l[d]&&c(s[Ct],"outOfRange");for(var tn=1;d<ar;d++,tn=0)tn&&u.length&&c(l[d],"outOfRange"),c(l[d],"inRange");for(var tn=1;Ct<en;Ct++)(!l.length||l[l.length-1]<s[Ct])&&(tn&&(u.length&&c(u[u.length-1].value,"outOfRange"),tn=0),c(s[Ct],"outOfRange"));var on=u.length;return{stops:u,outerColors:[on?u[0].color:"transparent",on?u[on-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n})(VisualMapModel);function getColorStopValues(t,n,a){if(a[0]===a[1])return a.slice();for(var s=200,l=(a[1]-a[0])/s,u=a[0],c=[],d=0;d<=s&&u<a[1];d++)c.push(u),u+=l;return c.push(a[1]),c}var VisualMapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return n.prototype.init=function(a,s){this.ecModel=a,this.api=s},n.prototype.render=function(a,s,l,u){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,s,l,u)},n.prototype.renderBackground=function(a){var s=this.visualMapModel,l=normalizeCssArray(s.get("padding")||0),u=a.getBoundingRect();a.add(new Rect$2({z2:-1,silent:!0,shape:{x:u.x-l[3],y:u.y-l[0],width:u.width+l[3]+l[1],height:u.height+l[0]+l[2]},style:{fill:s.get("backgroundColor"),stroke:s.get("borderColor"),lineWidth:s.get("borderWidth")}}))},n.prototype.getControllerVisual=function(a,s,l){l=l||{};var u=l.forceState,c=this.visualMapModel,d={};if(s==="color"){var Ct=c.get("contentColor");d.color=Ct}function ar(cn){return d[cn]}function en(cn,dn){d[cn]=dn}var tn=c.controllerVisuals[u||c.getValueState(a)],on=VisualMapping.prepareVisualTypes(tn);return each$f(on,function(cn){var dn=tn[cn];l.convertOpacityToAlpha&&cn==="opacity"&&(cn="colorAlpha",dn=tn.__alphaForOpacity),VisualMapping.dependsOn(cn,s)&&dn&&dn.applyVisual(a,ar,en)}),d[s]},n.prototype.positionGroup=function(a){var s=this.visualMapModel,l=this.api;positionElement(a,s.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},n.prototype.doRender=function(a,s,l,u){},n.type="visualMap",n})(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(t,n,a){var s=t.option,l=s.align;if(l!=null&&l!=="auto")return l;for(var u={width:n.getWidth(),height:n.getHeight()},c=s.orient==="horizontal"?1:0,d=paramsSet[c],Ct=[0,null,10],ar={},en=0;en<3;en++)ar[paramsSet[1-c][en]]=Ct[en],ar[d[en]]=en===2?a[0]:s[d[en]];var tn=[["x","width",3],["y","height",0]][c],on=getLayoutRect(ar,u,s.padding);return d[(on.margin[tn[2]]||0)+on[tn[0]]+on[tn[1]]*.5<u[tn[1]]*.5?0:1]}function makeHighDownBatch(t,n){return each$f(t||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(n?n.componentIndex:"")}),t}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return n.prototype.init=function(a,s){t.prototype.init.call(this,a,s),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(a,s,l,u){(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,s=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(s);var l=a.get("text");this._renderEndsText(s,l,0),this._renderEndsText(s,l,1),this._updateView(!0),this.renderBackground(s),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(s)},n.prototype._renderEndsText=function(a,s,l){if(s){var u=s[1-l];u=u!=null?u+"":"";var c=this.visualMapModel,d=c.get("textGap"),Ct=c.itemSize,ar=this._shapes.mainGroup,en=this._applyTransform([Ct[0]/2,l===0?-d:Ct[1]+d],ar),tn=this._applyTransform(l===0?"bottom":"top",ar),on=this._orient,cn=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(cn,{x:en[0],y:en[1],verticalAlign:on==="horizontal"?"middle":tn,align:on==="horizontal"?tn:"center",text:u})}))}},n.prototype._renderBar=function(a){var s=this.visualMapModel,l=this._shapes,u=s.itemSize,c=this._orient,d=this._useHandle,Ct=getItemAlign(s,this.api,u),ar=l.mainGroup=this._createBarGroup(Ct),en=new Group$3;ar.add(en),en.add(l.outOfRange=createPolygon()),en.add(l.inRange=createPolygon(null,d?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),en.setClipPath(new Rect$2({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var tn=s.textStyleModel.getTextRect(""),on=mathMax(tn.width,tn.height);d&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(s,ar,0,u,on,c),this._createHandle(s,ar,1,u,on,c)),this._createIndicator(s,ar,u,on,c),a.add(ar)},n.prototype._createHandle=function(a,s,l,u,c,d){var Ct=bind$1(this._dragHandle,this,l,!1),ar=bind$1(this._dragHandle,this,l,!0),en=parsePercent$1(a.get("handleSize"),u[0]),tn=createSymbol$1(a.get("handleIcon"),-en/2,-en/2,en,en,null,!0),on=getCursor(this._orient);tn.attr({cursor:on,draggable:!0,drift:Ct,ondragend:ar,onmousemove:function(ix){stop(ix.event)}}),tn.x=u[0]/2,tn.useStyle(a.getModel("handleStyle").getItemStyle()),tn.setStyle({strokeNoScale:!0,strokeFirst:!0}),tn.style.lineWidth*=2,tn.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(tn,!0),s.add(tn);var cn=this.visualMapModel.textStyleModel,dn=new ZRText({cursor:on,draggable:!0,drift:Ct,onmousemove:function(ix){stop(ix.event)},ondragend:ar,style:createTextStyle$1(cn,{x:0,y:0,text:""})});dn.ensureState("blur").style={opacity:.1},dn.stateTransition={duration:200},this.group.add(dn);var Cn=[en,0],In=this._shapes;In.handleThumbs[l]=tn,In.handleLabelPoints[l]=Cn,In.handleLabels[l]=dn},n.prototype._createIndicator=function(a,s,l,u,c){var d=parsePercent$1(a.get("indicatorSize"),l[0]),Ct=createSymbol$1(a.get("indicatorIcon"),-d/2,-d/2,d,d,null,!0);Ct.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var ar=a.getModel("indicatorStyle").getItemStyle();if(Ct instanceof ZRImage){var en=Ct.style;Ct.useStyle(extend({image:en.image,x:en.x,y:en.y,width:en.width,height:en.height},ar))}else Ct.useStyle(ar);s.add(Ct);var tn=this.visualMapModel.textStyleModel,on=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(tn,{x:0,y:0,text:""})});this.group.add(on);var cn=[(c==="horizontal"?u/2:HOVER_LINK_OUT)+l[0]/2,0],dn=this._shapes;dn.indicator=Ct,dn.indicatorLabel=on,dn.indicatorLabelPoint=cn,this._firstShowIndicator=!0},n.prototype._dragHandle=function(a,s,l,u){if(this._useHandle){if(this._dragging=!s,!s){var c=this._applyTransform([l,u],this._shapes.mainGroup,!0);this._updateInterval(a,c[1]),this._hideIndicator(),this._updateView()}s===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),s?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},n.prototype._resetInterval=function(){var a=this.visualMapModel,s=this._dataInterval=a.getSelected(),l=a.getExtent(),u=[0,a.itemSize[1]];this._handleEnds=[linearMap(s[0],l,u,!0),linearMap(s[1],l,u,!0)]},n.prototype._updateInterval=function(a,s){s=s||0;var l=this.visualMapModel,u=this._handleEnds,c=[0,l.itemSize[1]];sliderMove(s,u,c,a,0);var d=l.getExtent();this._dataInterval=[linearMap(u[0],c,d,!0),linearMap(u[1],c,d,!0)]},n.prototype._updateView=function(a){var s=this.visualMapModel,l=s.getExtent(),u=this._shapes,c=[0,s.itemSize[1]],d=a?c:this._handleEnds,Ct=this._createBarVisual(this._dataInterval,l,d,"inRange"),ar=this._createBarVisual(l,l,c,"outOfRange");u.inRange.setStyle({fill:Ct.barColor}).setShape("points",Ct.barPoints),u.outOfRange.setStyle({fill:ar.barColor}).setShape("points",ar.barPoints),this._updateHandle(d,Ct)},n.prototype._createBarVisual=function(a,s,l,u){var c={forceState:u,convertOpacityToAlpha:!0},d=this._makeColorGradient(a,c),Ct=[this.getControllerVisual(a[0],"symbolSize",c),this.getControllerVisual(a[1],"symbolSize",c)],ar=this._createBarPoints(l,Ct);return{barColor:new LinearGradient(0,0,0,1,d),barPoints:ar,handlesColor:[d[0].color,d[d.length-1].color]}},n.prototype._makeColorGradient=function(a,s){var l=100,u=[],c=(a[1]-a[0])/l;u.push({color:this.getControllerVisual(a[0],"color",s),offset:0});for(var d=1;d<l;d++){var Ct=a[0]+c*d;if(Ct>a[1])break;u.push({color:this.getControllerVisual(Ct,"color",s),offset:d/l})}return u.push({color:this.getControllerVisual(a[1],"color",s),offset:1}),u},n.prototype._createBarPoints=function(a,s){var l=this.visualMapModel.itemSize;return[[l[0]-s[0],a[0]],[l[0],a[0]],[l[0],a[1]],[l[0]-s[1],a[1]]]},n.prototype._createBarGroup=function(a){var s=this._orient,l=this.visualMapModel.get("inverse");return new Group$3(s==="horizontal"&&!l?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:s==="horizontal"&&l?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:s==="vertical"&&!l?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},n.prototype._updateHandle=function(a,s){if(this._useHandle){var l=this._shapes,u=this.visualMapModel,c=l.handleThumbs,d=l.handleLabels,Ct=u.itemSize,ar=u.getExtent(),en=this._applyTransform("left",l.mainGroup);each$1([0,1],function(tn){var on=c[tn];on.setStyle("fill",s.handlesColor[tn]),on.y=a[tn];var cn=linearMap(a[tn],[0,Ct[1]],ar,!0),dn=this.getControllerVisual(cn,"symbolSize");on.scaleX=on.scaleY=dn/Ct[0],on.x=Ct[0]-dn/2;var Cn=applyTransform(l.handleLabelPoints[tn],getTransform$1(on,this.group));if(this._orient==="horizontal"){var In=en==="left"||en==="top"?(Ct[0]-dn)/2:(Ct[0]-dn)/-2;Cn[1]+=In}d[tn].setStyle({x:Cn[0],y:Cn[1],text:u.formatValueText(this._dataInterval[tn]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(a,s,l,u){var c=this.visualMapModel,d=c.getExtent(),Ct=c.itemSize,ar=[0,Ct[1]],en=this._shapes,tn=en.indicator;if(tn){tn.attr("invisible",!1);var on={convertOpacityToAlpha:!0},cn=this.getControllerVisual(a,"color",on),dn=this.getControllerVisual(a,"symbolSize"),Cn=linearMap(a,d,ar,!0),In=Ct[0]-dn/2,ix={x:tn.x,y:tn.y};tn.y=Cn,tn.x=In;var ax=applyTransform(en.indicatorLabelPoint,getTransform$1(tn,this.group)),ox=en.indicatorLabel;ox.attr("invisible",!1);var sx=this._applyTransform("left",en.mainGroup),ux=this._orient,cx=ux==="horizontal";ox.setStyle({text:(l||"")+c.formatValueText(s),verticalAlign:cx?sx:"middle",align:cx?"center":sx});var hx={x:In,y:Cn,style:{fill:cn}},gx={style:{x:ax[0],y:ax[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var fx={duration:100,easing:"cubicInOut",additive:!0};tn.x=ix.x,tn.y=ix.y,tn.animateTo(hx,fx),ox.animateTo(gx,fx)}else tn.attr(hx),ox.attr(gx);this._firstShowIndicator=!1;var dx=this._shapes.handleLabels;if(dx)for(var mx=0;mx<dx.length;mx++)this.api.enterBlur(dx[mx])}},n.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(s){if(a._hovering=!0,!a._dragging){var l=a.visualMapModel.itemSize,u=a._applyTransform([s.offsetX,s.offsetY],a._shapes.mainGroup,!0,!0);u[1]=mathMin(mathMax(0,u[1]),l[1]),a._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=l[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(a,s){var l=this.visualMapModel,u=l.itemSize;if(l.option.hoverLink){var c=[0,u[1]],d=l.getExtent();a=mathMin(mathMax(c[0],a),c[1]);var Ct=getHalfHoverLinkSize(l,d,c),ar=[a-Ct,a+Ct],en=linearMap(a,c,d,!0),tn=[linearMap(ar[0],c,d,!0),linearMap(ar[1],c,d,!0)];ar[0]<c[0]&&(tn[0]=-1/0),ar[1]>c[1]&&(tn[1]=1/0),s&&(tn[0]===-1/0?this._showIndicator(en,tn[1],"< ",Ct):tn[1]===1/0?this._showIndicator(en,tn[0],"> ",Ct):this._showIndicator(en,en," ",Ct));var on=this._hoverLinkDataIndices,cn=[];(s||useHoverLinkOnHandle(l))&&(cn=this._hoverLinkDataIndices=l.findTargetDataIndices(tn));var dn=compressBatches(on,cn);this._dispatchHighDown("downplay",makeHighDownBatch(dn[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(dn[1],l))}},n.prototype._hoverLinkFromSeriesMouseOver=function(a){var s;if(findEventDispatcher(a.target,function(Ct){var ar=getECData(Ct);if(ar.dataIndex!=null)return s=ar,!0},!0),!!s){var l=this.ecModel.getSeriesByIndex(s.seriesIndex),u=this.visualMapModel;if(u.isTargetSeries(l)){var c=l.getData(s.dataType),d=c.getStore().get(u.getDataDimensionIndex(c),s.dataIndex);isNaN(d)||this._showIndicator(d,d)}}},n.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var s=this._shapes.handleLabels;if(s)for(var l=0;l<s.length;l++)this.api.leaveBlur(s[l])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(a,this.visualMapModel)),a.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(a,s,l,u){var c=getTransform$1(s,u?null:this.group);return isArray$1(a)?applyTransform(a,c,l):transformDirection(a,c,l)},n.prototype._dispatchHighDown=function(a,s){s&&s.length&&this.api.dispatchAction({type:a,batch:s})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n})(VisualMapView);function createPolygon(t,n,a,s){return new Polygon({shape:{points:t},draggable:!!a,cursor:n,drift:a,onmousemove:function(l){stop(l.event)},ondragend:s})}function getHalfHoverLinkSize(t,n,a){var s=HOVER_LINK_SIZE/2,l=t.get("hoverLinkDataSize");return l&&(s=linearMap(l,n,a,!0)/2),s}function useHoverLinkOnHandle(t){var n=t.get("hoverLinkOnHandle");return!!(n??t.get("realtime"))}function getCursor(t){return t==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(t,n){n.eachComponent({mainType:"visualMap",query:t},function(a){a.setSelected(t.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(t,n){var a=[];return n.eachComponent("visualMap",function(s){var l=t.pipelineContext;!s.isTargetSeries(t)||l&&l.large||a.push(incrementalApplyVisual(s.stateList,s.targetVisuals,bind$1(s.getValueState,s),s.getDataDimensionIndex(t.getData())))}),a}},{createOnAllSeries:!0,reset:function(t,n){var a=t.getData(),s=[];n.eachComponent("visualMap",function(l){if(l.isTargetSeries(t)){var u=l.getVisualMeta(bind$1(getColorVisual,null,t,l))||{stops:[],outerColors:[]},c=l.getDataDimensionIndex(a);c>=0&&(u.dimension=c,s.push(u))}}),t.getData().setVisual("visualMeta",s)}}];function getColorVisual(t,n,a,s){for(var l=n.targetVisuals[s],u=VisualMapping.prepareVisualTypes(l),c={color:getVisualFromData(t.getData(),"color")},d=0,Ct=u.length;d<Ct;d++){var ar=u[d],en=l[ar==="opacity"?"__alphaForOpacity":ar];en&&en.applyVisual(a,tn,on)}return c.color;function tn(cn){return c[cn]}function on(cn,dn){c[cn]=dn}}var each=each$f;function visualMapPreprocessor(t){var n=t&&t.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(a){if(a){has(a,"splitList")&&!has(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var s=a.pieces;s&&isArray$1(s)&&each(s,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(t,n){return t&&t.hasOwnProperty&&t.hasOwnProperty(n)}var installed=!1;function installCommon(t){installed||(installed=!0,t.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),t.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(n){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,n)}),t.registerPreprocessor(visualMapPreprocessor))}function install$5(t){t.registerComponentModel(ContinuousModel),t.registerComponentView(ContinuousView),installCommon(t)}var PiecewiseModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._pieceList=[],a}return n.prototype.optionUpdated=function(a,s){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(a,s);var u=this.option.categories;this.resetVisual(function(c,d){l==="categories"?(c.mappingMethod="category",c.categories=clone$4(u)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(Ct){return Ct=clone$4(Ct),d!=="inRange"&&(Ct.visual=null),Ct}))})},n.prototype.completeVisualOption=function(){var a=this.option,s={},l=VisualMapping.listVisualTypes(),u=this.isCategory();each$f(a.pieces,function(d){each$f(l,function(Ct){d.hasOwnProperty(Ct)&&(s[Ct]=1)})}),each$f(s,function(d,Ct){var ar=!1;each$f(this.stateList,function(en){ar=ar||c(a,en,Ct)||c(a.target,en,Ct)},this),!ar&&each$f(this.stateList,function(en){(a[en]||(a[en]={}))[Ct]=visualDefault.get(Ct,en==="inRange"?"active":"inactive",u)})},this);function c(d,Ct,ar){return d&&d[Ct]&&d[Ct].hasOwnProperty(ar)}t.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(a,s){var l=this.option,u=this._pieceList,c=(s?l:a).selected||{};if(l.selected=c,each$f(u,function(Ct,ar){var en=this.getSelectedMapKey(Ct);c.hasOwnProperty(en)||(c[en]=!0)},this),l.selectedMode==="single"){var d=!1;each$f(u,function(Ct,ar){var en=this.getSelectedMapKey(Ct);c[en]&&(d?c[en]=!1:d=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(a){this.option.selected=clone$4(a)},n.prototype.getValueState=function(a){var s=VisualMapping.findPieceIndex(a,this._pieceList);return s!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[s])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var s=[],l=this._pieceList;return this.eachTargetSeries(function(u){var c=[],d=u.getData();d.each(this.getDataDimensionIndex(d),function(Ct,ar){var en=VisualMapping.findPieceIndex(Ct,l);en===a&&c.push(ar)},this),s.push({seriesId:u.id,dataIndex:c})},this),s},n.prototype.getRepresentValue=function(a){var s;if(this.isCategory())s=a.value;else if(a.value!=null)s=a.value;else{var l=a.interval||[];s=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return s},n.prototype.getVisualMeta=function(a){if(this.isCategory())return;var s=[],l=["",""],u=this;function c(en,tn){var on=u.getRepresentValue({interval:en});tn||(tn=u.getValueState(on));var cn=a(on,tn);en[0]===-1/0?l[0]=cn:en[1]===1/0?l[1]=cn:s.push({value:en[0],color:cn},{value:en[1],color:cn})}var d=this._pieceList.slice();if(!d.length)d.push({interval:[-1/0,1/0]});else{var Ct=d[0].interval[0];Ct!==-1/0&&d.unshift({interval:[-1/0,Ct]}),Ct=d[d.length-1].interval[1],Ct!==1/0&&d.push({interval:[Ct,1/0]})}var ar=-1/0;return each$f(d,function(en){var tn=en.interval;tn&&(tn[0]>ar&&c([ar,tn[0]],"outOfRange"),c(tn.slice()),ar=tn[1])},this),{stops:s,outerColors:l}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n})(VisualMapModel),resetMethods={splitNumber:function(t){var n=this.option,a=Math.min(n.precision,20),s=this.getExtent(),l=n.splitNumber;l=Math.max(parseInt(l,10),1),n.splitNumber=l;for(var u=(s[1]-s[0])/l;+u.toFixed(a)!==u&&a<5;)a++;n.precision=a,u=+u.toFixed(a),n.minOpen&&t.push({interval:[-1/0,s[0]],close:[0,0]});for(var c=0,d=s[0];c<l;d+=u,c++){var Ct=c===l-1?s[1]:d+u;t.push({interval:[d,Ct],close:[1,1]})}n.maxOpen&&t.push({interval:[s[1],1/0],close:[0,0]}),reformIntervals(t),each$f(t,function(ar,en){ar.index=en,ar.text=this.formatValueText(ar.interval)},this)},categories:function(t){var n=this.option;each$f(n.categories,function(a){t.push({text:this.formatValueText(a,!0),value:a})},this),normalizeReverse(n,t)},pieces:function(t){var n=this.option;each$f(n.pieces,function(a,s){isObject$3(a)||(a={value:a});var l={text:"",index:s};if(a.label!=null&&(l.text=a.label),a.hasOwnProperty("value")){var u=l.value=a.value;l.interval=[u,u],l.close=[1,1]}else{for(var c=l.interval=[],d=l.close=[0,0],Ct=[1,0,1],ar=[-1/0,1/0],en=[],tn=0;tn<2;tn++){for(var on=[["gte","gt","min"],["lte","lt","max"]][tn],cn=0;cn<3&&c[tn]==null;cn++)c[tn]=a[on[cn]],d[tn]=Ct[cn],en[tn]=cn===2;c[tn]==null&&(c[tn]=ar[tn])}en[0]&&c[1]===1/0&&(d[0]=0),en[1]&&c[0]===-1/0&&(d[1]=0),c[0]===c[1]&&d[0]&&d[1]&&(l.value=c[0])}l.visual=VisualMapping.retrieveVisuals(a),t.push(l)},this),normalizeReverse(n,t),reformIntervals(t),each$f(t,function(a){var s=a.close,l=[["<",""][s[1]],[">",""][s[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,l)},this)}};function normalizeReverse(t,n){var a=t.inverse;(t.orient==="vertical"?!a:a)&&n.reverse()}var PiecewiseVisualMapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.doRender=function(){var a=this.group;a.removeAll();var s=this.visualMapModel,l=s.get("textGap"),u=s.textStyleModel,c=u.getFont(),d=u.getTextColor(),Ct=this._getItemAlign(),ar=s.itemSize,en=this._getViewData(),tn=en.endsText,on=retrieve(s.get("showLabel",!0),!tn),cn=!s.get("selectedMode");tn&&this._renderEndsText(a,tn[0],ar,on,Ct),each$f(en.viewPieceList,function(dn){var Cn=dn.piece,In=new Group$3;In.onclick=bind$1(this._onItemClick,this,Cn),this._enableHoverLink(In,dn.indexInModelPieceList);var ix=s.getRepresentValue(Cn);if(this._createItemSymbol(In,ix,[0,0,ar[0],ar[1]],cn),on){var ax=this.visualMapModel.getValueState(ix);In.add(new ZRText({style:{x:Ct==="right"?-l:ar[0]+l,y:ar[1]/2,text:Cn.text,verticalAlign:"middle",align:Ct,font:c,fill:d,opacity:ax==="outOfRange"?.5:1},silent:cn}))}a.add(In)},this),tn&&this._renderEndsText(a,tn[1],ar,on,Ct),box(s.get("orient"),a,s.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},n.prototype._enableHoverLink=function(a,s){var l=this;a.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(c){var d=l.visualMapModel;d.option.hoverLink&&l.api.dispatchAction({type:c,batch:makeHighDownBatch(d.findTargetDataIndices(s),d)})}},n.prototype._getItemAlign=function(){var a=this.visualMapModel,s=a.option;if(s.orient==="vertical")return getItemAlign(a,this.api,a.itemSize);var l=s.align;return(!l||l==="auto")&&(l="left"),l},n.prototype._renderEndsText=function(a,s,l,u,c){if(s){var d=new Group$3,Ct=this.visualMapModel.textStyleModel;d.add(new ZRText({style:createTextStyle$1(Ct,{x:u?c==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:u?c:"center",text:s})})),a.add(d)}},n.prototype._getViewData=function(){var a=this.visualMapModel,s=map$1(a.getPieceList(),function(d,Ct){return{piece:d,indexInModelPieceList:Ct}}),l=a.get("text"),u=a.get("orient"),c=a.get("inverse");return(u==="horizontal"?c:!c)?s.reverse():l&&(l=l.slice().reverse()),{viewPieceList:s,endsText:l}},n.prototype._createItemSymbol=function(a,s,l,u){var c=createSymbol$1(this.getControllerVisual(s,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(s,"color"));c.silent=u,a.add(c)},n.prototype._onItemClick=function(a){var s=this.visualMapModel,l=s.option,u=l.selectedMode;if(u){var c=clone$4(l.selected),d=s.getSelectedMapKey(a);u==="single"||u===!0?(c[d]=!0,each$f(c,function(Ct,ar){c[ar]=ar===d})):c[d]=!c[d],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},n.type="visualMap.piecewise",n})(VisualMapView);function install$4(t){t.registerComponentModel(PiecewiseModel),t.registerComponentView(PiecewiseVisualMapView),installCommon(t)}function install$3(t){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(t,n){var a=t.getModel("aria");if(!a.get("enabled"))return;var s=clone$4(DEFAULT_OPTION);merge(s.label,t.getLocaleModel().get("aria"),!1),merge(a.option,s,!1),l(),u();function l(){var ar=a.getModel("decal"),en=ar.get("show");if(en){var tn=createHashMap();t.eachSeries(function(on){if(!on.isColorBySeries()){var cn=tn.get(on.type);cn||(cn={},tn.set(on.type,cn)),inner(on).scope=cn}}),t.eachRawSeries(function(on){if(t.isSeriesFiltered(on))return;if(isFunction$1(on.enableAriaDecal)){on.enableAriaDecal();return}var cn=on.getData();if(on.isColorBySeries()){var ax=getDecalFromPalette(on.ecModel,on.name,decalPaletteScope,t.getSeriesCount()),ox=cn.getVisual("decal");cn.setVisual("decal",sx(ox,ax))}else{var dn=on.getRawData(),Cn={},In=inner(on).scope;cn.each(function(ux){var cx=cn.getRawIndex(ux);Cn[cx]=ux});var ix=dn.count();dn.each(function(ux){var cx=Cn[ux],hx=dn.getName(ux)||ux+"",gx=getDecalFromPalette(on.ecModel,hx,In,ix),fx=cn.getItemVisual(cx,"decal");cn.setItemVisual(cx,"decal",sx(fx,gx))})}function sx(ux,cx){var hx=ux?extend(extend({},cx),ux):cx;return hx.dirty=!0,hx}})}}function u(){var ar=n.getZr().dom;if(ar){var en=t.getLocaleModel().get("aria"),tn=a.getModel("label");if(tn.option=defaults(tn.option,en),!!tn.get("enabled")){if(ar.setAttribute("role","img"),tn.get("description")){ar.setAttribute("aria-label",tn.get("description"));return}var on=t.getSeriesCount(),cn=tn.get(["data","maxCount"])||10,dn=tn.get(["series","maxCount"])||10,Cn=Math.min(on,dn),In;if(!(on<1)){var ix=d();if(ix){var ax=tn.get(["general","withTitle"]);In=c(ax,{title:ix})}else In=tn.get(["general","withoutTitle"]);var ox=[],sx=on>1?tn.get(["series","multiple","prefix"]):tn.get(["series","single","prefix"]);In+=c(sx,{seriesCount:on}),t.eachSeries(function(gx,fx){if(fx<Cn){var dx=void 0,mx=gx.get("name"),vx=mx?"withName":"withoutName";dx=on>1?tn.get(["series","multiple",vx]):tn.get(["series","single",vx]),dx=c(dx,{seriesId:gx.seriesIndex,seriesName:gx.get("name"),seriesType:Ct(gx.subType)});var bx=gx.getData();if(bx.count()>cn){var xx=tn.get(["data","partialData"]);dx+=c(xx,{displayCnt:cn})}else dx+=tn.get(["data","allData"]);for(var _x=tn.get(["data","separator","middle"]),Ex=tn.get(["data","separator","end"]),Tx=tn.get(["data","excludeDimensionId"]),Cx=[],Mx=0;Mx<bx.count();Mx++)if(Mx<cn){var Ax=bx.getName(Mx),Nx=Tx?filter(bx.getValues(Mx),function(Rx,Ox){return indexOf(Tx,Ox)===-1}):bx.getValues(Mx),Ux=tn.get(["data",Ax?"withName":"withoutName"]);Cx.push(c(Ux,{name:Ax,value:Nx.join(_x)}))}dx+=Cx.join(_x)+Ex,ox.push(dx)}});var ux=tn.getModel(["series","multiple","separator"]),cx=ux.get("middle"),hx=ux.get("end");In+=ox.join(cx)+hx,ar.setAttribute("aria-label",In)}}}}function c(ar,en){if(!isString$1(ar))return ar;var tn=ar;return each$f(en,function(on,cn){tn=tn.replace(new RegExp("\\{\\s*"+cn+"\\s*\\}","g"),on)}),tn}function d(){var ar=t.get("title");return ar&&ar.length&&(ar=ar[0]),ar&&ar.text}function Ct(ar){var en=t.getLocaleModel().get(["series","typeNames"]);return en[ar]||en.chart}}function ariaPreprocessor(t){if(!(!t||!t.aria)){var n=t.aria;n.show!=null&&(n.enabled=n.show),n.label=n.label||{},each$f(["description","general","series","data"],function(a){n[a]!=null&&(n.label[a]=n[a])})}}function install$2(t){t.registerPreprocessor(ariaPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=(function(){function t(n){var a=this._condVal=isString$1(n)?new RegExp(n):isRegExp(n)?n:null;if(a==null){var s="";throwError(s)}}return t.prototype.evaluate=function(n){var a=typeof n;return isString$1(a)?this._condVal.test(n):isNumber(a)?this._condVal.test(n+""):!1},t})(),ConstConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){return this.value},t})(),AndConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(!n[a].evaluate())return!1;return!0},t})(),OrConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(n[a].evaluate())return!0;return!1},t})(),NotConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t})(),RelationalConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){for(var n=!!this.valueParser,a=this.getValue,s=a(this.valueGetterParam),l=n?this.valueParser(s):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(n?l:s))return!1;return!0},t})();function parseOption(t,n){if(t===!0||t===!1){var a=new ConstConditionInternal;return a.value=t,a}var s="";return isObjectNotArray(t)||throwError(s),t.and?parseAndOrOption("and",t,n):t.or?parseAndOrOption("or",t,n):t.not?parseNotOption(t,n):parseRelationalOption(t,n)}function parseAndOrOption(t,n,a){var s=n[t],l="";isArray$1(s)||throwError(l),s.length||throwError(l);var u=t==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(s,function(c){return parseOption(c,a)}),u.children.length||throwError(l),u}function parseNotOption(t,n){var a=t.not,s="";isObjectNotArray(a)||throwError(s);var l=new NotConditionInternal;return l.child=parseOption(a,n),l.child||throwError(s),l}function parseRelationalOption(t,n){for(var a="",s=n.prepareGetValue(t),l=[],u=keys(t),c=t.parser,d=c?getRawValueParser(c):null,Ct=0;Ct<u.length;Ct++){var ar=u[Ct];if(!(ar==="parser"||n.valueGetterAttrMap.get(ar))){var en=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,ar)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[ar]:ar,tn=t[ar],on=d?d(tn):tn,cn=createFilterComparator(en,on)||en==="reg"&&new RegExpEvaluator(on);cn||throwError(a),l.push(cn)}}l.length||throwError(a);var dn=new RelationalConditionInternal;return dn.valueGetterParam=s,dn.valueParser=d,dn.getValue=n.getValue,dn.subCondList=l,dn}function isObjectNotArray(t){return isObject$3(t)&&!isArrayLike(t)}var ConditionalExpressionParsed=(function(){function t(n,a){this._cond=parseOption(n,a)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t})();function parseConditionalExpression(t,n){return new ConditionalExpressionParsed(t,n)}var filterTransform={type:"echarts:filter",transform:function(t){for(var n=t.upstream,a,s=parseConditionalExpression(t.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(d){var Ct="",ar=d.dimension;hasOwn(d,"dimension")||throwError(Ct);var en=n.getDimensionInfo(ar);return en||throwError(Ct),{dimIdx:en.index}},getValue:function(d){return n.retrieveValueFromItem(a,d.dimIdx)}}),l=[],u=0,c=n.count();u<c;u++)a=n.getRawDataItem(u),s.evaluate()&&l.push(a);return{data:l}}},sortTransform={type:"echarts:sort",transform:function(t){var n=t.upstream,a=t.config,s="",l=normalizeToArray(a);l.length||throwError(s);var u=[];each$f(l,function(en){var tn=en.dimension,on=en.order,cn=en.parser,dn=en.incomparable;if(tn==null&&throwError(s),on!=="asc"&&on!=="desc"&&throwError(s),dn&&dn!=="min"&&dn!=="max"){var Cn="";throwError(Cn)}if(on!=="asc"&&on!=="desc"){var In="";throwError(In)}var ix=n.getDimensionInfo(tn);ix||throwError(s);var ax=cn?getRawValueParser(cn):null;cn&&!ax&&throwError(s),u.push({dimIdx:ix.index,parser:ax,comparator:new SortOrderComparator(on,dn)})});var c=n.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(s);for(var d=[],Ct=0,ar=n.count();Ct<ar;Ct++)d.push(n.getRawDataItem(Ct));return d.sort(function(en,tn){for(var on=0;on<u.length;on++){var cn=u[on],dn=n.retrieveValueFromItem(en,cn.dimIdx),Cn=n.retrieveValueFromItem(tn,cn.dimIdx);cn.parser&&(dn=cn.parser(dn),Cn=cn.parser(Cn));var In=cn.comparator.evaluate(dn,Cn);if(In!==0)return In}return 0}),{data:d}}};function install$1(t){t.registerTransform(filterTransform),t.registerTransform(sortTransform)}var DatasetModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.prototype.init=function(a,s,l){t.prototype.init.call(this,a,s,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),disableTransformOptionMerge(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},n})(ComponentModel),DatasetView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.type="dataset",n})(ComponentView);function install(t){t.registerComponentModel(DatasetModel),t.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(t,n){return Math.abs(t-n)<1e-5}function pathToBezierCurves(t){var n=t.data,a=t.len(),s=[],l,u=0,c=0,d=0,Ct=0;function ar(bx,xx){l&&l.length>2&&s.push(l),l=[bx,xx]}function en(bx,xx,_x,Ex){aroundEqual(bx,_x)&&aroundEqual(xx,Ex)||l.push(bx,xx,_x,Ex,_x,Ex)}function tn(bx,xx,_x,Ex,Tx,Cx){var Mx=Math.abs(xx-bx),Ax=Math.tan(Mx/4)*4/3,Nx=xx<bx?-1:1,Ux=Math.cos(bx),Rx=Math.sin(bx),Ox=Math.cos(xx),Px=Math.sin(xx),$x=Ux*Tx+_x,Lx=Rx*Cx+Ex,zx=Ox*Tx+_x,qx=Px*Cx+Ex,jx=Tx*Ax*Nx,Hx=Cx*Ax*Nx;l.push($x-jx*Rx,Lx+Hx*Ux,zx+jx*Px,qx-Hx*Ox,zx,qx)}for(var on,cn,dn,Cn,In=0;In<a;){var ix=n[In++],ax=In===1;switch(ax&&(u=n[In],c=n[In+1],d=u,Ct=c,(ix===CMD.L||ix===CMD.C||ix===CMD.Q)&&(l=[d,Ct])),ix){case CMD.M:u=d=n[In++],c=Ct=n[In++],ar(d,Ct);break;case CMD.L:on=n[In++],cn=n[In++],en(u,c,on,cn),u=on,c=cn;break;case CMD.C:l.push(n[In++],n[In++],n[In++],n[In++],u=n[In++],c=n[In++]);break;case CMD.Q:on=n[In++],cn=n[In++],dn=n[In++],Cn=n[In++],l.push(u+2/3*(on-u),c+2/3*(cn-c),dn+2/3*(on-dn),Cn+2/3*(cn-Cn),dn,Cn),u=dn,c=Cn;break;case CMD.A:var ox=n[In++],sx=n[In++],ux=n[In++],cx=n[In++],hx=n[In++],gx=n[In++]+hx;In+=1;var fx=!n[In++];on=Math.cos(hx)*ux+ox,cn=Math.sin(hx)*cx+sx,ax?(d=on,Ct=cn,ar(d,Ct)):en(u,c,on,cn),u=Math.cos(gx)*ux+ox,c=Math.sin(gx)*cx+sx;for(var dx=(fx?-1:1)*Math.PI/2,mx=hx;fx?mx>gx:mx<gx;mx+=dx){var vx=fx?Math.max(mx+dx,gx):Math.min(mx+dx,gx);tn(mx,vx,ox,sx,ux,cx)}break;case CMD.R:d=u=n[In++],Ct=c=n[In++],on=d+n[In++],cn=Ct+n[In++],ar(on,Ct),en(on,Ct,on,cn),en(on,cn,d,cn),en(d,cn,d,Ct),en(d,Ct,on,Ct);break;case CMD.Z:l&&en(u,c,d,Ct),u=d,c=Ct;break}}return l&&l.length>2&&s.push(l),s}function adpativeBezier(t,n,a,s,l,u,c,d,Ct,ar){if(aroundEqual(t,a)&&aroundEqual(n,s)&&aroundEqual(l,c)&&aroundEqual(u,d)){Ct.push(c,d);return}var en=2/ar,tn=en*en,on=c-t,cn=d-n,dn=Math.sqrt(on*on+cn*cn);on/=dn,cn/=dn;var Cn=a-t,In=s-n,ix=l-c,ax=u-d,ox=Cn*Cn+In*In,sx=ix*ix+ax*ax;if(ox<tn&&sx<tn){Ct.push(c,d);return}var ux=on*Cn+cn*In,cx=-on*ix-cn*ax,hx=ox-ux*ux,gx=sx-cx*cx;if(hx<tn&&ux>=0&&gx<tn&&cx>=0){Ct.push(c,d);return}var fx=[],dx=[];cubicSubdivide(t,a,l,c,.5,fx),cubicSubdivide(n,s,u,d,.5,dx),adpativeBezier(fx[0],dx[0],fx[1],dx[1],fx[2],dx[2],fx[3],dx[3],Ct,ar),adpativeBezier(fx[4],dx[4],fx[5],dx[5],fx[6],dx[6],fx[7],dx[7],Ct,ar)}function pathToPolygons(t,n){var a=pathToBezierCurves(t),s=[];n=n||1;for(var l=0;l<a.length;l++){var u=a[l],c=[],d=u[0],Ct=u[1];c.push(d,Ct);for(var ar=2;ar<u.length;){var en=u[ar++],tn=u[ar++],on=u[ar++],cn=u[ar++],dn=u[ar++],Cn=u[ar++];adpativeBezier(d,Ct,en,tn,on,cn,dn,Cn,c,n),d=dn,Ct=Cn}s.push(c)}return s}function getDividingGrids(t,n,a){var s=t[n],l=t[1-n],u=Math.abs(s/l),c=Math.ceil(Math.sqrt(u*a)),d=Math.floor(a/c);d===0&&(d=1,c=a);for(var Ct=[],ar=0;ar<c;ar++)Ct.push(d);var en=c*d,tn=a-en;if(tn>0)for(var ar=0;ar<tn;ar++)Ct[ar%c]+=1;return Ct}function divideSector(t,n,a){for(var s=t.r0,l=t.r,u=t.startAngle,c=t.endAngle,d=Math.abs(c-u),Ct=d*l,ar=l-s,en=Ct>Math.abs(ar),tn=getDividingGrids([Ct,ar],en?0:1,n),on=(en?d:ar)/tn.length,cn=0;cn<tn.length;cn++)for(var dn=(en?ar:d)/tn[cn],Cn=0;Cn<tn[cn];Cn++){var In={};en?(In.startAngle=u+on*cn,In.endAngle=u+on*(cn+1),In.r0=s+dn*Cn,In.r=s+dn*(Cn+1)):(In.startAngle=u+dn*Cn,In.endAngle=u+dn*(Cn+1),In.r0=s+on*cn,In.r=s+on*(cn+1)),In.clockwise=t.clockwise,In.cx=t.cx,In.cy=t.cy,a.push(In)}}function divideRect(t,n,a){for(var s=t.width,l=t.height,u=s>l,c=getDividingGrids([s,l],u?0:1,n),d=u?"width":"height",Ct=u?"height":"width",ar=u?"x":"y",en=u?"y":"x",tn=t[d]/c.length,on=0;on<c.length;on++)for(var cn=t[Ct]/c[on],dn=0;dn<c[on];dn++){var Cn={};Cn[ar]=on*tn,Cn[en]=dn*cn,Cn[d]=tn,Cn[Ct]=cn,Cn.x+=t.x,Cn.y+=t.y,a.push(Cn)}}function crossProduct2d(t,n,a,s){return t*s-a*n}function lineLineIntersect(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=crossProduct2d(en,tn,Ct,ar);if(Math.abs(on)<1e-6)return null;var cn=t-l,dn=n-u,Cn=crossProduct2d(cn,dn,en,tn)/on;return Cn<0||Cn>1?null:new Point(Cn*Ct+t,Cn*ar+n)}function projPtOnLine(t,n,a){var s=new Point;Point.sub(s,a,n),s.normalize();var l=new Point;Point.sub(l,t,n);var u=l.dot(s);return u}function addToPoly(t,n){var a=t[t.length-1];a&&a[0]===n[0]&&a[1]===n[1]||t.push(n)}function splitPolygonByLine(t,n,a){for(var s=t.length,l=[],u=0;u<s;u++){var c=t[u],d=t[(u+1)%s],Ct=lineLineIntersect(c[0],c[1],d[0],d[1],n.x,n.y,a.x,a.y);Ct&&l.push({projPt:projPtOnLine(Ct,n,a),pt:Ct,idx:u})}if(l.length<2)return[{points:t},{points:t}];l.sort(function(In,ix){return In.projPt-ix.projPt});var ar=l[0],en=l[l.length-1];if(en.idx<ar.idx){var tn=ar;ar=en,en=tn}for(var on=[ar.pt.x,ar.pt.y],cn=[en.pt.x,en.pt.y],dn=[on],Cn=[cn],u=ar.idx+1;u<=en.idx;u++)addToPoly(dn,t[u].slice());addToPoly(dn,cn),addToPoly(dn,on);for(var u=en.idx+1;u<=ar.idx+s;u++)addToPoly(Cn,t[u%s].slice());return addToPoly(Cn,on),addToPoly(Cn,cn),[{points:dn},{points:Cn}]}function binaryDividePolygon(t){var n=t.points,a=[],s=[];fromPoints(n,a,s);var l=new BoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),u=l.width,c=l.height,d=l.x,Ct=l.y,ar=new Point,en=new Point;return u>c?(ar.x=en.x=d+u/2,ar.y=Ct,en.y=Ct+c):(ar.y=en.y=Ct+c/2,ar.x=d,en.x=d+u),splitPolygonByLine(n,ar,en)}function binaryDivideRecursive(t,n,a,s){if(a===1)s.push(n);else{var l=Math.floor(a/2),u=t(n);binaryDivideRecursive(t,u[0],l,s),binaryDivideRecursive(t,u[1],a-l,s)}return s}function clone(t,n){for(var a=[],s=0;s<n;s++)a.push(clonePath(t));return a}function copyPathProps(t,n){n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel}function polygonConvert(t){for(var n=[],a=0;a<t.length;)n.push([t[a++],t[a++]]);return n}function split(t,n){var a=[],s=t.shape,l;switch(t.type){case"rect":divideRect(s,n,a),l=Rect$2;break;case"sector":divideSector(s,n,a),l=Sector;break;case"circle":divideSector({r0:0,r:s.r,startAngle:0,endAngle:Math.PI*2,cx:s.cx,cy:s.cy},n,a),l=Sector;break;default:var u=t.getComputedTransform(),c=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,d=map$1(pathToPolygons(t.getUpdatedPathProxy(),c),function(ix){return polygonConvert(ix)}),Ct=d.length;if(Ct===0)binaryDivideRecursive(binaryDividePolygon,{points:d[0]},n,a);else if(Ct===n)for(var ar=0;ar<Ct;ar++)a.push({points:d[ar]});else{var en=0,tn=map$1(d,function(ix){var ax=[],ox=[];fromPoints(ix,ax,ox);var sx=(ox[1]-ax[1])*(ox[0]-ax[0]);return en+=sx,{poly:ix,area:sx}});tn.sort(function(ix,ax){return ax.area-ix.area});for(var on=n,ar=0;ar<Ct;ar++){var cn=tn[ar];if(on<=0)break;var dn=ar===Ct-1?on:Math.ceil(cn.area/en*n);dn<0||(binaryDivideRecursive(binaryDividePolygon,{points:cn.poly},dn,a),on-=dn)}}l=Polygon;break}if(!l)return clone(t,n);for(var Cn=[],ar=0;ar<a.length;ar++){var In=new l;In.setShape(a[ar]),copyPathProps(t,In),Cn.push(In)}return Cn}function alignSubpath(t,n){var a=t.length,s=n.length;if(a===s)return[t,n];for(var l=[],u=[],c=a<s?t:n,d=Math.min(a,s),Ct=Math.abs(s-a)/6,ar=(d-2)/6,en=Math.ceil(Ct/ar)+1,tn=[c[0],c[1]],on=Ct,cn=2;cn<d;){var dn=c[cn-2],Cn=c[cn-1],In=c[cn++],ix=c[cn++],ax=c[cn++],ox=c[cn++],sx=c[cn++],ux=c[cn++];if(on<=0){tn.push(In,ix,ax,ox,sx,ux);continue}for(var cx=Math.min(on,en-1)+1,hx=1;hx<=cx;hx++){var gx=hx/cx;cubicSubdivide(dn,In,ax,sx,gx,l),cubicSubdivide(Cn,ix,ox,ux,gx,u),dn=l[3],Cn=u[3],tn.push(l[1],u[1],l[2],u[2],dn,Cn),In=l[5],ix=u[5],ax=l[6],ox=u[6]}on-=cx-1}return c===t?[tn,n]:[t,tn]}function createSubpath(t,n){for(var a=t.length,s=t[a-2],l=t[a-1],u=[],c=0;c<n.length;)u[c++]=s,u[c++]=l;return u}function alignBezierCurves(t,n){for(var a,s,l,u=[],c=[],d=0;d<Math.max(t.length,n.length);d++){var Ct=t[d],ar=n[d],en=void 0,tn=void 0;Ct?ar?(a=alignSubpath(Ct,ar),en=a[0],tn=a[1],s=en,l=tn):(tn=createSubpath(l||Ct,Ct),en=Ct):(en=createSubpath(s||ar,ar),tn=ar),u.push(en),c.push(tn)}return[u,c]}function centroid(t){for(var n=0,a=0,s=0,l=t.length,u=0,c=l-2;u<l;c=u,u+=2){var d=t[c],Ct=t[c+1],ar=t[u],en=t[u+1],tn=d*en-ar*Ct;n+=tn,a+=(d+ar)*tn,s+=(Ct+en)*tn}return n===0?[t[0]||0,t[1]||0]:[a/n/3,s/n/3,n]}function findBestRingOffset(t,n,a,s){for(var l=(t.length-2)/6,u=1/0,c=0,d=t.length,Ct=d-2,ar=0;ar<l;ar++){for(var en=ar*6,tn=0,on=0;on<d;on+=2){var cn=on===0?en:(en+on-2)%Ct+2,dn=t[cn]-a[0],Cn=t[cn+1]-a[1],In=n[on]-s[0],ix=n[on+1]-s[1],ax=In-dn,ox=ix-Cn;tn+=ax*ax+ox*ox}tn<u&&(u=tn,c=ar)}return c}function reverse(t){for(var n=[],a=t.length,s=0;s<a;s+=2)n[s]=t[a-s-2],n[s+1]=t[a-s-1];return n}function findBestMorphingRotation(t,n,a,s){for(var l=[],u,c=0;c<t.length;c++){var d=t[c],Ct=n[c],ar=centroid(d),en=centroid(Ct);u==null&&(u=ar[2]<0!=en[2]<0);var tn=[],on=[],cn=0,dn=1/0,Cn=[],In=d.length;u&&(d=reverse(d));for(var ix=findBestRingOffset(d,Ct,ar,en)*6,ax=In-2,ox=0;ox<ax;ox+=2){var sx=(ix+ox)%ax+2;tn[ox+2]=d[sx]-ar[0],tn[ox+3]=d[sx+1]-ar[1]}tn[0]=d[ix]-ar[0],tn[1]=d[ix+1]-ar[1];for(var ux=s/a,cx=-s/2;cx<=s/2;cx+=ux){for(var hx=Math.sin(cx),gx=Math.cos(cx),fx=0,ox=0;ox<d.length;ox+=2){var dx=tn[ox],mx=tn[ox+1],vx=Ct[ox]-en[0],bx=Ct[ox+1]-en[1],xx=vx*gx-bx*hx,_x=vx*hx+bx*gx;Cn[ox]=xx,Cn[ox+1]=_x;var Ex=xx-dx,Tx=_x-mx;fx+=Ex*Ex+Tx*Tx}if(fx<dn){dn=fx,cn=cx;for(var Cx=0;Cx<Cn.length;Cx++)on[Cx]=Cn[Cx]}}l.push({from:tn,to:on,fromCp:ar,toCp:en,rotation:-cn})}return l}function isCombineMorphing(t){return t.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(t,n,a){var s=SAVED_METHOD_PREFIX+n,l=t[s]||t[n];t[s]||(t[s]=t[n]);var u=a.replace,c=a.after,d=a.before;t[n]=function(){var Ct=arguments,ar;return d&&d.apply(this,Ct),u?ar=u.apply(this,Ct):ar=l.apply(this,Ct),c&&c.apply(this,Ct),ar}}function restoreMethod(t,n){var a=SAVED_METHOD_PREFIX+n;t[a]&&(t[n]=t[a],t[a]=null)}function applyTransformOnBeziers(t,n){for(var a=0;a<t.length;a++)for(var s=t[a],l=0;l<s.length;){var u=s[l],c=s[l+1];s[l++]=n[0]*u+n[2]*c+n[4],s[l++]=n[1]*u+n[3]*c+n[5]}}function prepareMorphPath(t,n){var a=t.getUpdatedPathProxy(),s=n.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(a),pathToBezierCurves(s)),u=l[0],c=l[1],d=t.getComputedTransform(),Ct=n.getComputedTransform();function ar(){this.transform=null}d&&applyTransformOnBeziers(u,d),Ct&&applyTransformOnBeziers(c,Ct),saveAndModifyMethod(n,"updateTransform",{replace:ar}),n.transform=null;var en=findBestMorphingRotation(u,c,10,Math.PI),tn=[];saveAndModifyMethod(n,"buildPath",{replace:function(on){for(var cn=n.__morphT,dn=1-cn,Cn=[],In=0;In<en.length;In++){var ix=en[In],ax=ix.from,ox=ix.to,sx=ix.rotation*cn,ux=ix.fromCp,cx=ix.toCp,hx=Math.sin(sx),gx=Math.cos(sx);lerp$1(Cn,ux,cx,cn);for(var fx=0;fx<ax.length;fx+=2){var dx=ax[fx],mx=ax[fx+1],vx=ox[fx],bx=ox[fx+1],xx=dx*dn+vx*cn,_x=mx*dn+bx*cn;tn[fx]=xx*gx-_x*hx+Cn[0],tn[fx+1]=xx*hx+_x*gx+Cn[1]}var Ex=tn[0],Tx=tn[1];on.moveTo(Ex,Tx);for(var fx=2;fx<ax.length;){var vx=tn[fx++],bx=tn[fx++],Cx=tn[fx++],Mx=tn[fx++],Ax=tn[fx++],Nx=tn[fx++];Ex===vx&&Tx===bx&&Cx===Ax&&Mx===Nx?on.lineTo(Ax,Nx):on.bezierCurveTo(vx,bx,Cx,Mx,Ax,Nx),Ex=Ax,Tx=Nx}}}})}function morphPath(t,n,a){if(!t||!n)return n;var s=a.done,l=a.during;prepareMorphPath(t,n),n.__morphT=0;function u(){restoreMethod(n,"buildPath"),restoreMethod(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()}return n.animateTo({__morphT:1},defaults({during:function(c){n.dirtyShape(),l&&l(c)},done:function(){u(),s&&s()}},a)),n}function hilbert(t,n,a,s,l,u){var c=16;t=l===a?0:Math.round(32767*(t-a)/(l-a)),n=u===s?0:Math.round(32767*(n-s)/(u-s));for(var d=0,Ct,ar=(1<<c)/2;ar>0;ar/=2){var en=0,tn=0;(t&ar)>0&&(en=1),(n&ar)>0&&(tn=1),d+=ar*ar*(3*en^tn),tn===0&&(en===1&&(t=ar-1-t,n=ar-1-n),Ct=t,t=n,n=Ct)}return d}function sortPaths(t){var n=1/0,a=1/0,s=-1/0,l=-1/0,u=map$1(t,function(d){var Ct=d.getBoundingRect(),ar=d.getComputedTransform(),en=Ct.x+Ct.width/2+(ar?ar[4]:0),tn=Ct.y+Ct.height/2+(ar?ar[5]:0);return n=Math.min(en,n),a=Math.min(tn,a),s=Math.max(en,s),l=Math.max(tn,l),[en,tn]}),c=map$1(u,function(d,Ct){return{cp:d,z:hilbert(d[0],d[1],n,a,s,l),path:t[Ct]}});return c.sort(function(d,Ct){return d.z-Ct.z}).map(function(d){return d.path})}function defaultDividePath(t){return split(t.path,t.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(t,n,a){var s=[];function l(ux){for(var cx=0;cx<ux.length;cx++){var hx=ux[cx];isCombineMorphing(hx)?l(hx.childrenRef()):hx instanceof Path&&s.push(hx)}}l(t);var u=s.length;if(!u)return createEmptyReturn();var c=a.dividePath||defaultDividePath,d=c({path:n,count:u});if(d.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();s=sortPaths(s),d=sortPaths(d);for(var Ct=a.done,ar=a.during,en=a.individualDelay,tn=new Transformable,on=0;on<u;on++){var cn=s[on],dn=d[on];dn.parent=n,dn.copyTransform(tn),en||prepareMorphPath(cn,dn)}n.__isCombineMorphing=!0,n.childrenRef=function(){return d};function Cn(ux){for(var cx=0;cx<d.length;cx++)d[cx].addSelfToZr(ux)}saveAndModifyMethod(n,"addSelfToZr",{after:function(ux){Cn(ux)}}),saveAndModifyMethod(n,"removeSelfFromZr",{after:function(ux){for(var cx=0;cx<d.length;cx++)d[cx].removeSelfFromZr(ux)}});function In(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,restoreMethod(n,"addSelfToZr"),restoreMethod(n,"removeSelfFromZr")}var ix=d.length;if(en)for(var ax=ix,ox=function(){ax--,ax===0&&(In(),Ct&&Ct())},on=0;on<ix;on++){var sx=en?defaults({delay:(a.delay||0)+en(on,ix,s[on],d[on]),done:ox},a):a;morphPath(s[on],d[on],sx)}else n.__morphT=0,n.animateTo({__morphT:1},defaults({during:function(ux){for(var cx=0;cx<ix;cx++){var hx=d[cx];hx.__morphT=n.__morphT,hx.dirtyShape()}ar&&ar(ux)},done:function(){In();for(var ux=0;ux<t.length;ux++)restoreMethod(t[ux],"updateTransform");Ct&&Ct()}},a));return n.__zr&&Cn(n.__zr),{fromIndividuals:s,toIndividuals:d,count:ix}}function separateMorph(t,n,a){var s=n.length,l=[],u=a.dividePath||defaultDividePath;function c(cn){for(var dn=0;dn<cn.length;dn++){var Cn=cn[dn];isCombineMorphing(Cn)?c(Cn.childrenRef()):Cn instanceof Path&&l.push(Cn)}}if(isCombineMorphing(t)){c(t.childrenRef());var d=l.length;if(d<s)for(var Ct=0,ar=d;ar<s;ar++)l.push(clonePath(l[Ct++%d]));l.length=s}else{l=u({path:t,count:s});for(var en=t.getComputedTransform(),ar=0;ar<l.length;ar++)l[ar].setLocalTransform(en);if(l.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),n=sortPaths(n);for(var tn=a.individualDelay,ar=0;ar<s;ar++){var on=tn?defaults({delay:(a.delay||0)+tn(ar,s,l[ar],n[ar])},a):a;morphPath(l[ar],n[ar],on)}return{fromIndividuals:l,toIndividuals:n,count:n.length}}function isMultiple(t){return isArray$1(t[0])}function prepareMorphBatches(t,n){for(var a=[],s=t.length,l=0;l<s;l++)a.push({one:t[l],many:[]});for(var l=0;l<n.length;l++){var u=n[l].length,c=void 0;for(c=0;c<u;c++)a[c%s].many.push(n[l][c])}for(var d=0,l=s-1;l>=0;l--)if(!a[l].many.length){var Ct=a[d].many;if(Ct.length<=1)if(d)d=0;else return a;var u=Ct.length,ar=Math.ceil(u/2);a[l].many=Ct.slice(ar,u),a[d].many=Ct.slice(0,ar),d++}return a}var pathDividers={clone:function(t){for(var n=[],a=1-Math.pow(1-t.path.style.opacity,1/t.count),s=0;s<t.count;s++){var l=clonePath(t.path);l.setStyle("opacity",a),n.push(l)}return n},split:null};function applyMorphAnimation(t,n,a,s,l,u){if(!t.length||!n.length)return;var c=getAnimationConfig("update",s,l);if(!(c&&c.duration>0))return;var d=s.getModel("universalTransition").get("delay"),Ct=Object.assign({setToFinal:!0},c),ar,en;isMultiple(t)&&(ar=t,en=n),isMultiple(n)&&(ar=n,en=t);function tn(ix,ax,ox,sx,ux){var cx=ix.many,hx=ix.one;if(cx.length===1&&!ux){var gx=ax?cx[0]:hx,fx=ax?hx:cx[0];if(isCombineMorphing(gx))tn({many:[gx],one:fx},!0,ox,sx,!0);else{var dx=d?defaults({delay:d(ox,sx)},Ct):Ct;morphPath(gx,fx,dx),u(gx,fx,gx,fx,dx)}}else for(var mx=defaults({dividePath:pathDividers[a],individualDelay:d&&function(Tx,Cx,Mx,Ax){return d(Tx+ox,sx)}},Ct),vx=ax?combineMorph(cx,hx,mx):separateMorph(hx,cx,mx),bx=vx.fromIndividuals,xx=vx.toIndividuals,_x=bx.length,Ex=0;Ex<_x;Ex++){var dx=d?defaults({delay:d(Ex,_x)},Ct):Ct;u(bx[Ex],xx[Ex],ax?cx[Ex]:ix.one,ax?ix.one:cx[Ex],dx)}}for(var on=ar?ar===t:t.length>n.length,cn=ar?prepareMorphBatches(en,ar):prepareMorphBatches(on?n:t,[on?t:n]),dn=0,Cn=0;Cn<cn.length;Cn++)dn+=cn[Cn].many.length;for(var In=0,Cn=0;Cn<cn.length;Cn++)tn(cn[Cn],on,In,dn),In+=cn[Cn].many.length}function getPathList(t){if(!t)return[];if(isArray$1(t)){for(var n=[],a=0;a<t.length;a++)n.push(getPathList(t[a]));return n}var s=[];return t.traverse(function(l){l instanceof Path&&!l.disableMorphing&&!l.invisible&&!l.ignore&&s.push(l)}),s}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(t,n){for(var a=t.dimensions,s=0;s<a.length;s++){var l=t.getDimensionInfo(a[s]);if(l&&l.otherDims[n]===0)return a[s]}}function getValueByDimension(t,n,a){var s=t.getDimensionInfo(a),l=s&&s.ordinalMeta;if(s){var u=t.get(s.name,n);return l&&l.categories[u]||u+""}}function getGroupId(t,n,a,s){var l=s?"itemChildGroupId":"itemGroupId",u=getDimension(t,l);if(u){var c=getValueByDimension(t,n,u);return c}var d=t.getRawDataItem(n),Ct=s?"childGroupId":"groupId";if(d&&d[Ct])return d[Ct]+"";if(!s)return a||t.getId(n)}function flattenDataDiffItems(t){var n=[];return each$f(t,function(a){var s=a.data,l=a.dataGroupId;if(!(s.count()>DATA_COUNT_THRESHOLD))for(var u=s.getIndices(),c=0;c<u.length;c++)n.push({data:s,groupId:getGroupId(s,c,l,!1),childGroupId:getGroupId(s,c,l,!0),divide:a.divide,dataIndex:c})}),n}function fadeInElement(t,n,a){t.traverse(function(s){s instanceof Path&&initProps(s,{style:{opacity:0}},n,{dataIndex:a,isFrom:!0})})}function removeEl(t){if(t.parent){var n=t.getComputedTransform();t.setLocalTransform(n),t.parent.remove(t)}}function stopAnimation(t){t.stopAnimation(),t.isGroup&&t.traverse(function(n){n.stopAnimation()})}function animateElementStyles(t,n,a){var s=getAnimationConfig("update",a,n);s&&t.traverse(function(l){if(l instanceof Displayable){var u=getOldStyle(l);u&&l.animateFrom({style:u},s)}})}function isAllIdSame(t,n){var a=t.length;if(a!==n.length)return!1;for(var s=0;s<a;s++){var l=t[s],u=n[s];if(l.data.getId(l.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(t,n,a){var s=flattenDataDiffItems(t),l=flattenDataDiffItems(n);function u(ox,sx,ux,cx,hx){(ux||ox)&&sx.animateFrom({style:ux&&ux!==ox?extend(extend({},ux.style),ox.style):ox.style},hx)}var c=!1,d=TRANSITION_NONE,Ct=createHashMap(),ar=createHashMap();s.forEach(function(ox){ox.groupId&&Ct.set(ox.groupId,!0),ox.childGroupId&&ar.set(ox.childGroupId,!0)});for(var en=0;en<l.length;en++){var tn=l[en].groupId;if(ar.get(tn)){d=TRANSITION_P2C;break}var on=l[en].childGroupId;if(on&&Ct.get(on)){d=TRANSITION_C2P;break}}function cn(ox,sx){return function(ux){var cx=ux.data,hx=ux.dataIndex;return sx?cx.getId(hx):ox?d===TRANSITION_P2C?ux.childGroupId:ux.groupId:d===TRANSITION_C2P?ux.childGroupId:ux.groupId}}var dn=isAllIdSame(s,l),Cn={};if(!dn)for(var en=0;en<l.length;en++){var In=l[en],ix=In.data.getItemGraphicEl(In.dataIndex);ix&&(Cn[ix.id]=!0)}function ax(ox,sx){var ux=s[sx],cx=l[ox],hx=cx.data.hostModel,gx=ux.data.getItemGraphicEl(ux.dataIndex),fx=cx.data.getItemGraphicEl(cx.dataIndex);if(gx===fx){fx&&animateElementStyles(fx,cx.dataIndex,hx);return}gx&&Cn[gx.id]||fx&&(stopAnimation(fx),gx?(stopAnimation(gx),removeEl(gx),c=!0,applyMorphAnimation(getPathList(gx),getPathList(fx),cx.divide,hx,ox,u)):fadeInElement(fx,hx,ox))}new DataDiffer(s,l,cn(!0,dn),cn(!1,dn),null,"multiple").update(ax).updateManyToOne(function(ox,sx){var ux=l[ox],cx=ux.data,hx=cx.hostModel,gx=cx.getItemGraphicEl(ux.dataIndex),fx=filter(map$1(sx,function(dx){return s[dx].data.getItemGraphicEl(s[dx].dataIndex)}),function(dx){return dx&&dx!==gx&&!Cn[dx.id]});gx&&(stopAnimation(gx),fx.length?(each$f(fx,function(dx){stopAnimation(dx),removeEl(dx)}),c=!0,applyMorphAnimation(getPathList(fx),getPathList(gx),ux.divide,hx,ox,u)):fadeInElement(gx,hx,ux.dataIndex))}).updateOneToMany(function(ox,sx){var ux=s[sx],cx=ux.data.getItemGraphicEl(ux.dataIndex);if(!(cx&&Cn[cx.id])){var hx=filter(map$1(ox,function(fx){return l[fx].data.getItemGraphicEl(l[fx].dataIndex)}),function(fx){return fx&&fx!==cx}),gx=l[ox[0]].data.hostModel;hx.length&&(each$f(hx,function(fx){return stopAnimation(fx)}),cx?(stopAnimation(cx),removeEl(cx),c=!0,applyMorphAnimation(getPathList(cx),getPathList(hx),ux.divide,gx,ox[0],u)):each$f(hx,function(fx){return fadeInElement(fx,gx,ox[0])}))}}).updateManyToMany(function(ox,sx){new DataDiffer(sx,ox,function(ux){return s[ux].data.getId(s[ux].dataIndex)},function(ux){return l[ux].data.getId(l[ux].dataIndex)}).update(function(ux,cx){ax(ox[ux],sx[cx])}).execute()}).execute(),c&&each$f(n,function(ox){var sx=ox.data,ux=sx.hostModel,cx=ux&&a.getViewOfSeriesModel(ux),hx=getAnimationConfig("update",ux,0);cx&&ux.isAnimationEnabled()&&hx&&hx.duration>0&&cx.group.traverse(function(gx){gx instanceof Path&&!gx.animators.length&&gx.animateFrom({style:{opacity:0}},hx)})})}function getSeriesTransitionKey(t){var n=t.getModel("universalTransition").get("seriesKey");return n||t.id}function convertArraySeriesKeyToString(t){return isArray$1(t)?t.sort().join(","):t}function getDivideShapeFromData(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(t,n){var a=createHashMap(),s=createHashMap(),l=createHashMap();return each$f(t.oldSeries,function(u,c){var d=t.oldDataGroupIds[c],Ct=t.oldData[c],ar=getSeriesTransitionKey(u),en=convertArraySeriesKeyToString(ar);s.set(en,{dataGroupId:d,data:Ct}),isArray$1(ar)&&each$f(ar,function(tn){l.set(tn,{key:en,dataGroupId:d,data:Ct})})}),each$f(n.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var c=u.get("dataGroupId"),d=u.getData(),Ct=getSeriesTransitionKey(u),ar=convertArraySeriesKeyToString(Ct),en=s.get(ar);if(en)a.set(ar,{oldSeries:[{dataGroupId:en.dataGroupId,divide:getDivideShapeFromData(en.data),data:en.data}],newSeries:[{dataGroupId:c,divide:getDivideShapeFromData(d),data:d}]});else if(isArray$1(Ct)){var tn=[];each$f(Ct,function(dn){var Cn=s.get(dn);Cn.data&&tn.push({dataGroupId:Cn.dataGroupId,divide:getDivideShapeFromData(Cn.data),data:Cn.data})}),tn.length&&a.set(ar,{oldSeries:tn,newSeries:[{dataGroupId:c,data:d,divide:getDivideShapeFromData(d)}]})}else{var on=l.get(Ct);if(on){var cn=a.get(on.key);cn||(cn={oldSeries:[{dataGroupId:on.dataGroupId,data:on.data,divide:getDivideShapeFromData(on.data)}],newSeries:[]},a.set(on.key,cn)),cn.newSeries.push({dataGroupId:c,data:d,divide:getDivideShapeFromData(d)})}}}}),a}function querySeries(t,n){for(var a=0;a<t.length;a++){var s=n.seriesIndex!=null&&n.seriesIndex===t[a].seriesIndex||n.seriesId!=null&&n.seriesId===t[a].id;if(s)return a}}function transitionSeriesFromOpt(t,n,a,s){var l=[],u=[];each$f(normalizeToArray(t.from),function(c){var d=querySeries(n.oldSeries,c);d>=0&&l.push({dataGroupId:n.oldDataGroupIds[d],data:n.oldData[d],divide:getDivideShapeFromData(n.oldData[d]),groupIdDim:c.dimension})}),each$f(normalizeToArray(t.to),function(c){var d=querySeries(a.updatedSeries,c);if(d>=0){var Ct=a.updatedSeries[d].getData();u.push({dataGroupId:n.oldDataGroupIds[d],data:Ct,divide:getDivideShapeFromData(Ct),groupIdDim:c.dimension})}}),l.length>0&&u.length>0&&transitionBetween(l,u,s)}function installUniversalTransition(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,s){each$f(normalizeToArray(s.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(u){for(var c=s.updatedSeries,d=0;d<c.length;d++)(u.seriesIndex!=null&&u.seriesIndex===c[d].seriesIndex||u.seriesId!=null&&u.seriesId===c[d].id)&&(c[d][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(n,a,s){var l=getUniversalTransitionGlobalStore(a);if(l.oldSeries&&s.updatedSeries&&s.optionChanged){var u=s.seriesTransition;if(u)each$f(normalizeToArray(u),function(cn){transitionSeriesFromOpt(cn,l,s,a)});else{var c=findTransitionSeriesBatches(l,s);each$f(c.keys(),function(cn){var dn=c.get(cn);transitionBetween(dn.oldSeries,dn.newSeries,a)})}each$f(s.updatedSeries,function(cn){cn[SERIES_UNIVERSAL_TRANSITION_PROP]&&(cn[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var d=n.getSeries(),Ct=l.oldSeries=[],ar=l.oldDataGroupIds=[],en=l.oldData=[],tn=0;tn<d.length;tn++){var on=d[tn].getData();on.count()<DATA_COUNT_THRESHOLD&&(Ct.push(d[tn]),ar.push(d[tn].get("dataGroupId")),en.push(on))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={},hasRequiredId;function requireId(){return hasRequiredId||(hasRequiredId=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1,a=function(){return"".concat(n++)};t.default=a})(id)),id}var sensors={},object={},debounce={},hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,u=null;return function(){for(var c=this,d=arguments.length,Ct=new Array(d),ar=0;ar<d;ar++)Ct[ar]=arguments[ar];clearTimeout(u),u=setTimeout(function(){s.apply(c,Ct)},l)}};t.default=n})(debounce)),debounce}var constant={},hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant;hasRequiredConstant=1,Object.defineProperty(constant,"__esModule",{value:!0}),constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var t="size-sensor-id";constant.SizeSensorId=t;var n="size-sensor-object";constant.SensorClassName=n;var a="-1";return constant.SensorTabIndex=a,constant}var hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,Object.defineProperty(object,"__esModule",{value:!0}),object.createSensor=void 0;var t=a(requireDebounce()),n=requireConstant();function a(l){return l&&l.__esModule?l:{default:l}}var s=function(u,c){var d=void 0,Ct=[],ar=function(){getComputedStyle(u).position==="static"&&(u.style.position="relative");var Cn=document.createElement("object");return Cn.onload=function(){Cn.contentDocument.defaultView.addEventListener("resize",en),en()},Cn.style.display="block",Cn.style.position="absolute",Cn.style.top="0",Cn.style.left="0",Cn.style.height="100%",Cn.style.width="100%",Cn.style.overflow="hidden",Cn.style.pointerEvents="none",Cn.style.zIndex="-1",Cn.style.opacity="0",Cn.setAttribute("class",n.SensorClassName),Cn.setAttribute("tabindex",n.SensorTabIndex),Cn.type="text/html",u.appendChild(Cn),Cn.data="about:blank",Cn},en=(0,t.default)(function(){Ct.forEach(function(dn){dn(u)})}),tn=function(Cn){d||(d=ar()),Ct.indexOf(Cn)===-1&&Ct.push(Cn)},on=function(){d&&d.parentNode&&(d.contentDocument&&d.contentDocument.defaultView.removeEventListener("resize",en),d.parentNode.removeChild(d),u.removeAttribute(n.SizeSensorId),d=void 0,Ct=[],c&&c())},cn=function(Cn){var In=Ct.indexOf(Cn);In!==-1&&Ct.splice(In,1),Ct.length===0&&d&&on()};return{element:u,bind:tn,destroy:on,unbind:cn}};return object.createSensor=s,object}var resizeObserver={},hasRequiredResizeObserver;function requireResizeObserver(){if(hasRequiredResizeObserver)return resizeObserver;hasRequiredResizeObserver=1,Object.defineProperty(resizeObserver,"__esModule",{value:!0}),resizeObserver.createSensor=void 0;var t=requireConstant(),n=a(requireDebounce());function a(l){return l&&l.__esModule?l:{default:l}}var s=function(u,c){var d=void 0,Ct=[],ar=(0,n.default)(function(){Ct.forEach(function(dn){dn(u)})}),en=function(){var Cn=new ResizeObserver(ar);return Cn.observe(u),ar(),Cn},tn=function(Cn){d||(d=en()),Ct.indexOf(Cn)===-1&&Ct.push(Cn)},on=function(){d.disconnect(),Ct=[],d=void 0,u.removeAttribute(t.SizeSensorId),c&&c()},cn=function(Cn){var In=Ct.indexOf(Cn);In!==-1&&Ct.splice(In,1),Ct.length===0&&d&&on()};return{element:u,bind:tn,destroy:on,unbind:cn}};return resizeObserver.createSensor=s,resizeObserver}var hasRequiredSensors;function requireSensors(){if(hasRequiredSensors)return sensors;hasRequiredSensors=1,Object.defineProperty(sensors,"__esModule",{value:!0}),sensors.createSensor=void 0;var t=requireObject(),n=requireResizeObserver(),a=typeof ResizeObserver<"u"?n.createSensor:t.createSensor;return sensors.createSensor=a,sensors}var hasRequiredSensorPool;function requireSensorPool(){if(hasRequiredSensorPool)return sensorPool;hasRequiredSensorPool=1,Object.defineProperty(sensorPool,"__esModule",{value:!0}),sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var t=s(requireId()),n=requireSensors(),a=requireConstant();function s(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}}var l={};sensorPool.Sensors=l;function u(Ct){Ct&&l[Ct]&&delete l[Ct]}var c=function(ar){var en=ar.getAttribute(a.SizeSensorId);if(en&&l[en])return l[en];var tn=(0,t.default)();ar.setAttribute(a.SizeSensorId,tn);var on=(0,n.createSensor)(ar,function(){return u(tn)});return l[tn]=on,on};sensorPool.getSensor=c;var d=function(ar){var en=ar.element.getAttribute(a.SizeSensorId);ar.destroy(),u(en)};return sensorPool.removeSensor=d,sensorPool}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ver=lib.clear=lib.bind=void 0;var t=requireSensorPool(),n=function(u,c){var d=(0,t.getSensor)(u);return d.bind(c),function(){d.unbind(c)}};lib.bind=n;var a=function(u){var c=(0,t.getSensor)(u);(0,t.removeSensor)(c)};lib.clear=a;var s="1.0.2";return lib.ver=s,lib}var libExports=requireLib();function pick(t,n){var a={};return n.forEach(function(s){a[s]=t[s]}),a}function isFunction(t){return typeof t=="function"}function isString(t){return typeof t=="string"}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,l,u;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(l=s;l--!==0;)if(!t(n[l],a[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(u=Object.keys(n),s=u.length,s!==Object.keys(a).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;for(l=s;l--!==0;){var c=u[l];if(!t(n[c],a[c]))return!1}return!0}return n!==n&&a!==a}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const isEqual=getDefaultExportFromCjs(fastDeepEqualExports);var EChartsReactCore=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.echarts=a.echarts,s.ele=null,s.isInitialResize=!0,s}return n.prototype.componentDidMount=function(){this.renderNewEcharts()},n.prototype.componentDidUpdate=function(a){var s=this.props.shouldSetOption;if(!(isFunction(s)&&!s(a,this.props))){if(!isEqual(a.theme,this.props.theme)||!isEqual(a.opts,this.props.opts)||!isEqual(a.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var l=["option","notMerge","lazyUpdate","showLoading","loadingOption"];isEqual(pick(this.props,l),pick(a,l))||this.updateEChartsOption(),(!isEqual(a.style,this.props.style)||!isEqual(a.className,this.props.className))&&this.resize()}},n.prototype.componentWillUnmount=function(){this.dispose()},n.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},n.prototype.dispose=function(){if(this.ele){try{libExports.clear(this.ele)}catch(a){console.warn(a)}this.echarts.dispose(this.ele)}},n.prototype.renderNewEcharts=function(){var a=this,s=this.props,l=s.onEvents,u=s.onChartReady,c=this.updateEChartsOption();this.bindEvents(c,l||{}),isFunction(u)&&u(c),this.ele&&libExports.bind(this.ele,function(){a.resize()})},n.prototype.bindEvents=function(a,s){function l(c,d){isString(c)&&isFunction(d)&&a.on(c,function(Ct){d(Ct,a)})}for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&l(u,s[u])},n.prototype.updateEChartsOption=function(){var a=this.props,s=a.option,l=a.notMerge,u=l===void 0?!1:l,c=a.lazyUpdate,d=c===void 0?!1:c,Ct=a.showLoading,ar=a.loadingOption,en=ar===void 0?null:ar,tn=this.getEchartsInstance();return tn.setOption(s,u,d),Ct?tn.showLoading(en):tn.hideLoading(),tn},n.prototype.resize=function(){var a=this.getEchartsInstance();if(!this.isInitialResize)try{a.resize()}catch(s){console.warn(s)}this.isInitialResize=!1},n.prototype.render=function(){var a=this,s=this.props,l=s.style,u=s.className,c=u===void 0?"":u,d=__assign({height:300},l);return React.createElement("div",{ref:function(Ct){a.ele=Ct},style:d,className:"echarts-for-react "+c})},n})(reactExports.PureComponent),EChartsReact=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.echarts=echarts,s}return n})(EChartsReactCore);const MyEChartsPlot=({freq_new:t,mag_new:n})=>{if(t.length===0||n.length===0)return jsxRuntimeExports.jsx("b",{children:"No data available for plot"});const a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#aaa"}},formatter:function(s){const l=s[0],u=l.value[0],c=l.value[1];let d="";return u>=1e9?d=(u/1e9).toFixed(3)+" GHz":u>=1e6?d=(u/1e6).toFixed(3)+" MHz":u>=1e3?d=(u/1e3).toFixed(3)+" kHz":d=u.toFixed(2)+" Hz",`
      <strong>Frequency:</strong> ${d}<br/>
      <strong>Amplitude:</strong> ${c.toPrecision(6)} dB
    `}},xAxis:{min:t[0],max:t[t.length-1],type:"log",name:"freq (Hz)",minorSplitLine:{show:!0},axisLabel:{formatter:function(s){return s>=1e9?(s/1e9).toFixed(2)+"G":s>=1e6?(s/1e6).toFixed(2)+"M":s>=1e3?(s/1e3).toFixed(2)+"k":s.toFixed(2)}}},yAxis:{type:"value",name:"amplitude (dB)"},series:[{data:t.map((s,l)=>[s,n[l]]),type:"line",smooth:!1,lineStyle:{width:2}}]};return jsxRuntimeExports.jsx(EChartsReact,{option:a,style:{width:"100%",height:"400px"}})},Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiContainer"})}),initialSchematic={settings:{defaultZoom:.75,gridSize:32,width:2432,height:1792,maxZoom:2},shapes:[{image:"origin.svg",x:0,y:0,fixed:!0,offset:[-32,-32]},{image:"gnd.svg",connectors:[[0,0]],x:192,y:128,offset:[-100,-180]},{image:"vin.svg",connectors:[[0,0]],x:-192,y:0,offset:[-64,0]},{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:-96,y:-64,label:{text:"L0",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:64,y:-64,label:{text:"R0",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:192,y:32,label:{text:"C0",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},{image:"vprobe.svg",connectors:[[0,0]],x:0,y:-160,offset:[-10,-90],label:{text:"X0",class:"circuit_label",x:0,y:-30}}],wires:[{start:{connectorID:0,shapeID:1},end:{shapeID:5,connectorID:1},points:[]},{start:{connectorID:0,shapeID:5},end:{shapeID:4,connectorID:1},points:[[192,-64]]},{start:{connectorID:0,shapeID:4},end:{shapeID:3,connectorID:1},points:[]},{start:{connectorID:0,shapeID:3},end:{shapeID:2,connectorID:0},points:[[-192,-64]]},{start:{connectorID:0,shapeID:6},end:{shapeID:3,connectorID:1},points:[[0,-64]]}]},initialComponents={L0:{type:"inductor",value:1,unit:"uH"},R0:{type:"resistor",value:10,unit:"K"},C0:{type:"capacitor",value:10,unit:"fF"}},initialSettings={fmin:1,fminUnit:"MHz",fmax:100,fmaxUnit:"GHz",resolution:100};var urlContainsState=!1;function stateFromURL(){const t=new URL(window.location.href),n=t.searchParams.get("components"),a=t.searchParams.get("settings"),s=t.searchParams.get("schematic");var l=initialComponents,u=initialSettings,c=initialSchematic;if(n&&(urlContainsState=!0,l=n.split("__").reduce((d,Ct)=>{const[ar,en,tn,on]=Ct.split("_");return d[ar]={type:en,value:parseFloat(tn),unit:on},d},{})),a&&(urlContainsState=!0,u=a.split("__").reduce((d,Ct)=>{const[ar,en]=Ct.split("_");return d[ar]=isNaN(en)?en:parseFloat(en),d},{})),s){urlContainsState=!0;const d=Uint8Array.from(atob(decodeURIComponent(s)),ar=>ar.charCodeAt(0)),Ct=pako.inflate(d,{to:"string"});c=JSON.parse(Ct)}return[l,u,c]}const[modifiedComponents,modifiedSettings,modifiedSchematic]=stateFromURL();function new_calculate_tf(textResult,fRange,numSteps,components,setErrorSnackbar){if(textResult=="")return{freq_new:[],mag_new:[]};var complex_freq=textResult,rep;for(const t in components)rep=RegExp(t,"g"),complex_freq=complex_freq.replace(rep,components[t]);const re=/s/gi,reDollar=/\$/gi,re2=/\^/gi;var res=complex_freq.replace(re2,"**");const re3=/sqrt/gi;res=res.replace(re3,"$");const re4=/abs/gi;res=res.replace(re4,"");const re5=/I/gi;res=res.replace(re5,"1");var fstepdB_20=Math.log10(fRange.fmax/fRange.fmin)/numSteps,fstep=10**fstepdB_20,absNew,evalNew;const freq=[],mag=[];try{for(var f=fRange.fmin;f<fRange.fmax;f=f*fstep){freq.push(f);const mathString=res.replace(re,2*Math.PI*f).replace(reDollar,"Math.sqrt");evalNew=eval(mathString),absNew=Math.abs(evalNew),mag.push(20*Math.log10(absNew))}}catch(t){setErrorSnackbar(n=>n||!0),console.log("oh no",t)}return{freq_new:freq,mag_new:mag}}function compToURL(t,n){return`${t}_${n.type}_${n.value}_${n.unit}`}function App(){const[t,n]=reactExports.useState([]),[a,s]=reactExports.useState({}),[l,u]=reactExports.useState({text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:""}),[c,d]=reactExports.useState(modifiedComponents),[Ct,ar]=reactExports.useState(modifiedSettings),[en,tn]=reactExports.useState({pointer:0,state:[modifiedSchematic]}),[on,cn]=reactExports.useState(!1),[dn,Cn]=reactExports.useState(!1),In=()=>{window.location.href=window.location.origin+window.location.pathname};reactExports.useEffect(()=>{const dx=setTimeout(()=>{urlContainsState&&cn(!0)},1e3);return()=>clearTimeout(dx)},[]);function ix(){return jsxRuntimeExports.jsx(Snackbar,{open:on,autoHideDuration:1e4,onClose:()=>cn(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Some settings were loaded from the URL. Please click here to reset to the default state.",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200},onClick:In})})}function ax(){return jsxRuntimeExports.jsx(Snackbar,{open:dn,autoHideDuration:1e4,onClose:()=>Cn(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"An error has occurred. Please try using Sympy. If the issue persists please leave a comment",sx:{backgroundColor:"#ec1186ff",color:"#fff",maxWidth:200}})})}const ox={};for(const dx in c)ox[dx]=c[dx].value*units[c[dx].type][c[dx].unit];const[sx,ux]=reactExports.useState(null),[cx,hx]=reactExports.useState(null);reactExports.useEffect(()=>{const dx={fmin:Ct.fmin*units.frequency[Ct.fminUnit],fmax:Ct.fmax*units.frequency[Ct.fmaxUnit]},mx={};for(const xx in c)mx[xx]=c[xx].value*units[c[xx].type][c[xx].unit];const{freq_new:vx,mag_new:bx}=new_calculate_tf(l.complexResponse,dx,Ct.resolution,mx,Cn);ux(vx),hx(bx)},[l,Ct,c]);function gx(){const dx=new URL(window.location.href);dx.searchParams.set("components",Object.keys(c).map(xx=>compToURL(xx,c[xx])).join("__")),dx.searchParams.set("settings",Object.keys(Ct).map(xx=>`${xx}_${Ct[xx]}`).join("__"));const mx=JSON.stringify(en.state[en.pointer]),vx=pako.deflate(mx,{to:"string"}),bx=encodeURIComponent(btoa(String.fromCharCode(...vx)));return dx.searchParams.set("schematic",bx),window.history.pushState({},"",dx.toString()),dx.toString()}async function fx(){const[dx,mx]=await calcBilinear(l.solver);u({...l,bilinearRaw:dx,bilinearMathML:`<math>${mx}</math>`})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ix,{}),jsxRuntimeExports.jsx(ax,{}),jsxRuntimeExports.jsx(NavBar,{stateToURL:gx}),jsxRuntimeExports.jsx("div",{className:"w-100 p-2 bg-green pb-5",children:jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{px:{xs:0,sm:2}},children:[jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col",children:jsxRuntimeExports.jsx("p",{className:"my-0",children:"This free online circuit solver tool can calculate the transfer function of circuits built from resistors, capacitors, inductors and op-amps. The user can quickly explore different topologies and find their Laplace transform"})})}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-0",id:"schematic",children:[jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(VisioJSSchematic,{setResults:u,setNodes:n,history:en,setHistory:tn,setComponentValues:d,setFullyConnectedComponents:s})}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(ComponentAdjuster,{componentValues:c,setComponentValues:d})})]}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-3",id:"schematic",children:[jsxRuntimeExports.jsx(ChoseTF,{setResults:u,nodes:t,fullyConnectedComponents:a,componentValuesSolved:ox}),l.text!=""&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace Transform",textResult:l.text,mathML:l.mathML,caclDone:l.text!=""}),l.numericText!=null&&jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace Transform (numeric)",textResult:l.numericText,mathML:l.numericML,caclDone:l.text!=""}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(MyEChartsPlot,{freq_new:sx,mag_new:cx})}),jsxRuntimeExports.jsx(FreqAdjusters,{settings:Ct,setSettings:ar}),l.bilinearMathML==""?jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:1,children:jsxRuntimeExports.jsx(Button,{variant:"contained",color:"info",sx:{m:3},onClick:async()=>{fx()},children:"Calculate bilinear transform"})}):jsxRuntimeExports.jsx(DisplayMathML,{title:"Bilinear Transform",textResult:l.bilinearRaw,mathML:l.bilinearMathML,caclDone:l.text!=""})]})]}),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1",children:jsxRuntimeExports.jsx(ReleaseNotes,{})},"releaseNotes"),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1 shadow-sm rounded bg-lightgreen",children:jsxRuntimeExports.jsx($,{"website-id":"12350","page-id":"7"})},"comments")]})},"wrapper"),jsxRuntimeExports.jsx(Footer,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}))});export default Y$();
