var Y$=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var W$=Y$((Q$,module)=>{function _mergeNamespaces(t,n){for(var a=0;a<n.length;a++){const s=n[a];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(s,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var n=t.default;if(typeof n=="function"){var a=function s(){var l=!1;try{l=this instanceof s}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var l=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(a,s,l.get?l:{enumerable:!0,get:function(){return t[s]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,l,u){var c=null;if(u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),"key"in l){u={};for(var d in l)d!=="key"&&(u[d]=l[d])}else u=l;return l=u.ref,{$$typeof:t,type:s,key:c,ref:l!==void 0?l:null,props:u}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),Ct=Symbol.for("react.suspense"),ar=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),tn=Symbol.iterator;function on(Cx){return Cx===null||typeof Cx!="object"?null:(Cx=tn&&Cx[tn]||Cx["@@iterator"],typeof Cx=="function"?Cx:null)}var fn={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dn=Object.assign,Cn={};function Rn(Cx,Lx,qx){this.props=Cx,this.context=Lx,this.refs=Cn,this.updater=qx||fn}Rn.prototype.isReactComponent={},Rn.prototype.setState=function(Cx,Lx){if(typeof Cx!="object"&&typeof Cx!="function"&&Cx!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Cx,Lx,"setState")},Rn.prototype.forceUpdate=function(Cx){this.updater.enqueueForceUpdate(this,Cx,"forceUpdate")};function ax(){}ax.prototype=Rn.prototype;function ox(Cx,Lx,qx){this.props=Cx,this.context=Lx,this.refs=Cn,this.updater=qx||fn}var sx=ox.prototype=new ax;sx.constructor=ox,dn(sx,Rn.prototype),sx.isPureReactComponent=!0;var lx=Array.isArray,cx={H:null,A:null,T:null,S:null,V:null},fx=Object.prototype.hasOwnProperty;function gx(Cx,Lx,qx,Ix,Px,Nx){return qx=Nx.ref,{$$typeof:t,type:Cx,key:Lx,ref:qx!==void 0?qx:null,props:Nx}}function mx(Cx,Lx){return gx(Cx.type,Lx,void 0,void 0,void 0,Cx.props)}function px(Cx){return typeof Cx=="object"&&Cx!==null&&Cx.$$typeof===t}function hx(Cx){var Lx={"=":"=0",":":"=2"};return"$"+Cx.replace(/[=:]/g,function(qx){return Lx[qx]})}var vx=/\/+/g;function yx(Cx,Lx){return typeof Cx=="object"&&Cx!==null&&Cx.key!=null?hx(""+Cx.key):Lx.toString(36)}function Sx(){}function _x(Cx){switch(Cx.status){case"fulfilled":return Cx.value;case"rejected":throw Cx.reason;default:switch(typeof Cx.status=="string"?Cx.then(Sx,Sx):(Cx.status="pending",Cx.then(function(Lx){Cx.status==="pending"&&(Cx.status="fulfilled",Cx.value=Lx)},function(Lx){Cx.status==="pending"&&(Cx.status="rejected",Cx.reason=Lx)})),Cx.status){case"fulfilled":return Cx.value;case"rejected":throw Cx.reason}}throw Cx}function Ex(Cx,Lx,qx,Ix,Px){var Nx=typeof Cx;(Nx==="undefined"||Nx==="boolean")&&(Cx=null);var Bx=!1;if(Cx===null)Bx=!0;else switch(Nx){case"bigint":case"string":case"number":Bx=!0;break;case"object":switch(Cx.$$typeof){case t:case n:Bx=!0;break;case en:return Bx=Cx._init,Ex(Bx(Cx._payload),Lx,qx,Ix,Px)}}if(Bx)return Px=Px(Cx),Bx=Ix===""?"."+yx(Cx,0):Ix,lx(Px)?(qx="",Bx!=null&&(qx=Bx.replace(vx,"$&/")+"/"),Ex(Px,Lx,qx,"",function(Gx){return Gx})):Px!=null&&(px(Px)&&(Px=mx(Px,qx+(Px.key==null||Cx&&Cx.key===Px.key?"":(""+Px.key).replace(vx,"$&/")+"/")+Bx)),Lx.push(Px)),1;Bx=0;var $x=Ix===""?".":Ix+":";if(lx(Cx))for(var Vx=0;Vx<Cx.length;Vx++)Ix=Cx[Vx],Nx=$x+yx(Ix,Vx),Bx+=Ex(Ix,Lx,qx,Nx,Px);else if(Vx=on(Cx),typeof Vx=="function")for(Cx=Vx.call(Cx),Vx=0;!(Ix=Cx.next()).done;)Ix=Ix.value,Nx=$x+yx(Ix,Vx++),Bx+=Ex(Ix,Lx,qx,Nx,Px);else if(Nx==="object"){if(typeof Cx.then=="function")return Ex(_x(Cx),Lx,qx,Ix,Px);throw Lx=String(Cx),Error("Objects are not valid as a React child (found: "+(Lx==="[object Object]"?"object with keys {"+Object.keys(Cx).join(", ")+"}":Lx)+"). If you meant to render a collection of children, use an array instead.")}return Bx}function bx(Cx,Lx,qx){if(Cx==null)return Cx;var Ix=[],Px=0;return Ex(Cx,Ix,"","",function(Nx){return Lx.call(qx,Nx,Px++)}),Ix}function Ax(Cx){if(Cx._status===-1){var Lx=Cx._result;Lx=Lx(),Lx.then(function(qx){(Cx._status===0||Cx._status===-1)&&(Cx._status=1,Cx._result=qx)},function(qx){(Cx._status===0||Cx._status===-1)&&(Cx._status=2,Cx._result=qx)}),Cx._status===-1&&(Cx._status=0,Cx._result=Lx)}if(Cx._status===1)return Cx._result.default;throw Cx._result}var Mx=typeof reportError=="function"?reportError:function(Cx){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Lx=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Cx=="object"&&Cx!==null&&typeof Cx.message=="string"?String(Cx.message):String(Cx),error:Cx});if(!window.dispatchEvent(Lx))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Cx);return}console.error(Cx)};function Rx(){}return react_production.Children={map:bx,forEach:function(Cx,Lx,qx){bx(Cx,function(){Lx.apply(this,arguments)},qx)},count:function(Cx){var Lx=0;return bx(Cx,function(){Lx++}),Lx},toArray:function(Cx){return bx(Cx,function(Lx){return Lx})||[]},only:function(Cx){if(!px(Cx))throw Error("React.Children.only expected to receive a single React element child.");return Cx}},react_production.Component=Rn,react_production.Fragment=a,react_production.Profiler=l,react_production.PureComponent=ox,react_production.StrictMode=s,react_production.Suspense=Ct,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=cx,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Cx){return cx.H.useMemoCache(Cx)}},react_production.cache=function(Cx){return function(){return Cx.apply(null,arguments)}},react_production.cloneElement=function(Cx,Lx,qx){if(Cx==null)throw Error("The argument must be a React element, but you passed "+Cx+".");var Ix=dn({},Cx.props),Px=Cx.key,Nx=void 0;if(Lx!=null)for(Bx in Lx.ref!==void 0&&(Nx=void 0),Lx.key!==void 0&&(Px=""+Lx.key),Lx)!fx.call(Lx,Bx)||Bx==="key"||Bx==="__self"||Bx==="__source"||Bx==="ref"&&Lx.ref===void 0||(Ix[Bx]=Lx[Bx]);var Bx=arguments.length-2;if(Bx===1)Ix.children=qx;else if(1<Bx){for(var $x=Array(Bx),Vx=0;Vx<Bx;Vx++)$x[Vx]=arguments[Vx+2];Ix.children=$x}return gx(Cx.type,Px,void 0,void 0,Nx,Ix)},react_production.createContext=function(Cx){return Cx={$$typeof:c,_currentValue:Cx,_currentValue2:Cx,_threadCount:0,Provider:null,Consumer:null},Cx.Provider=Cx,Cx.Consumer={$$typeof:u,_context:Cx},Cx},react_production.createElement=function(Cx,Lx,qx){var Ix,Px={},Nx=null;if(Lx!=null)for(Ix in Lx.key!==void 0&&(Nx=""+Lx.key),Lx)fx.call(Lx,Ix)&&Ix!=="key"&&Ix!=="__self"&&Ix!=="__source"&&(Px[Ix]=Lx[Ix]);var Bx=arguments.length-2;if(Bx===1)Px.children=qx;else if(1<Bx){for(var $x=Array(Bx),Vx=0;Vx<Bx;Vx++)$x[Vx]=arguments[Vx+2];Px.children=$x}if(Cx&&Cx.defaultProps)for(Ix in Bx=Cx.defaultProps,Bx)Px[Ix]===void 0&&(Px[Ix]=Bx[Ix]);return gx(Cx,Nx,void 0,void 0,null,Px)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Cx){return{$$typeof:d,render:Cx}},react_production.isValidElement=px,react_production.lazy=function(Cx){return{$$typeof:en,_payload:{_status:-1,_result:Cx},_init:Ax}},react_production.memo=function(Cx,Lx){return{$$typeof:ar,type:Cx,compare:Lx===void 0?null:Lx}},react_production.startTransition=function(Cx){var Lx=cx.T,qx={};cx.T=qx;try{var Ix=Cx(),Px=cx.S;Px!==null&&Px(qx,Ix),typeof Ix=="object"&&Ix!==null&&typeof Ix.then=="function"&&Ix.then(Rx,Mx)}catch(Nx){Mx(Nx)}finally{cx.T=Lx}},react_production.unstable_useCacheRefresh=function(){return cx.H.useCacheRefresh()},react_production.use=function(Cx){return cx.H.use(Cx)},react_production.useActionState=function(Cx,Lx,qx){return cx.H.useActionState(Cx,Lx,qx)},react_production.useCallback=function(Cx,Lx){return cx.H.useCallback(Cx,Lx)},react_production.useContext=function(Cx){return cx.H.useContext(Cx)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Cx,Lx){return cx.H.useDeferredValue(Cx,Lx)},react_production.useEffect=function(Cx,Lx,qx){var Ix=cx.H;if(typeof qx=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ix.useEffect(Cx,Lx)},react_production.useId=function(){return cx.H.useId()},react_production.useImperativeHandle=function(Cx,Lx,qx){return cx.H.useImperativeHandle(Cx,Lx,qx)},react_production.useInsertionEffect=function(Cx,Lx){return cx.H.useInsertionEffect(Cx,Lx)},react_production.useLayoutEffect=function(Cx,Lx){return cx.H.useLayoutEffect(Cx,Lx)},react_production.useMemo=function(Cx,Lx){return cx.H.useMemo(Cx,Lx)},react_production.useOptimistic=function(Cx,Lx){return cx.H.useOptimistic(Cx,Lx)},react_production.useReducer=function(Cx,Lx,qx){return cx.H.useReducer(Cx,Lx,qx)},react_production.useRef=function(Cx){return cx.H.useRef(Cx)},react_production.useState=function(Cx){return cx.H.useState(Cx)},react_production.useSyncExternalStore=function(Cx,Lx,qx){return cx.H.useSyncExternalStore(Cx,Lx,qx)},react_production.useTransition=function(){return cx.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function n(bx,Ax){var Mx=bx.length;bx.push(Ax);e:for(;0<Mx;){var Rx=Mx-1>>>1,Cx=bx[Rx];if(0<l(Cx,Ax))bx[Rx]=Ax,bx[Mx]=Cx,Mx=Rx;else break e}}function a(bx){return bx.length===0?null:bx[0]}function s(bx){if(bx.length===0)return null;var Ax=bx[0],Mx=bx.pop();if(Mx!==Ax){bx[0]=Mx;e:for(var Rx=0,Cx=bx.length,Lx=Cx>>>1;Rx<Lx;){var qx=2*(Rx+1)-1,Ix=bx[qx],Px=qx+1,Nx=bx[Px];if(0>l(Ix,Mx))Px<Cx&&0>l(Nx,Ix)?(bx[Rx]=Nx,bx[Px]=Mx,Rx=Px):(bx[Rx]=Ix,bx[qx]=Mx,Rx=qx);else if(Px<Cx&&0>l(Nx,Mx))bx[Rx]=Nx,bx[Px]=Mx,Rx=Px;else break e}}return Ax}function l(bx,Ax){var Mx=bx.sortIndex-Ax.sortIndex;return Mx!==0?Mx:bx.id-Ax.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var Ct=[],ar=[],en=1,tn=null,on=3,fn=!1,dn=!1,Cn=!1,Rn=!1,ax=typeof setTimeout=="function"?setTimeout:null,ox=typeof clearTimeout=="function"?clearTimeout:null,sx=typeof setImmediate<"u"?setImmediate:null;function lx(bx){for(var Ax=a(ar);Ax!==null;){if(Ax.callback===null)s(ar);else if(Ax.startTime<=bx)s(ar),Ax.sortIndex=Ax.expirationTime,n(Ct,Ax);else break;Ax=a(ar)}}function cx(bx){if(Cn=!1,lx(bx),!dn)if(a(Ct)!==null)dn=!0,fx||(fx=!0,yx());else{var Ax=a(ar);Ax!==null&&Ex(cx,Ax.startTime-bx)}}var fx=!1,gx=-1,mx=5,px=-1;function hx(){return Rn?!0:!(t.unstable_now()-px<mx)}function vx(){if(Rn=!1,fx){var bx=t.unstable_now();px=bx;var Ax=!0;try{e:{dn=!1,Cn&&(Cn=!1,ox(gx),gx=-1),fn=!0;var Mx=on;try{t:{for(lx(bx),tn=a(Ct);tn!==null&&!(tn.expirationTime>bx&&hx());){var Rx=tn.callback;if(typeof Rx=="function"){tn.callback=null,on=tn.priorityLevel;var Cx=Rx(tn.expirationTime<=bx);if(bx=t.unstable_now(),typeof Cx=="function"){tn.callback=Cx,lx(bx),Ax=!0;break t}tn===a(Ct)&&s(Ct),lx(bx)}else s(Ct);tn=a(Ct)}if(tn!==null)Ax=!0;else{var Lx=a(ar);Lx!==null&&Ex(cx,Lx.startTime-bx),Ax=!1}}break e}finally{tn=null,on=Mx,fn=!1}Ax=void 0}}finally{Ax?yx():fx=!1}}}var yx;if(typeof sx=="function")yx=function(){sx(vx)};else if(typeof MessageChannel<"u"){var Sx=new MessageChannel,_x=Sx.port2;Sx.port1.onmessage=vx,yx=function(){_x.postMessage(null)}}else yx=function(){ax(vx,0)};function Ex(bx,Ax){gx=ax(function(){bx(t.unstable_now())},Ax)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(bx){bx.callback=null},t.unstable_forceFrameRate=function(bx){0>bx||125<bx?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):mx=0<bx?Math.floor(1e3/bx):5},t.unstable_getCurrentPriorityLevel=function(){return on},t.unstable_next=function(bx){switch(on){case 1:case 2:case 3:var Ax=3;break;default:Ax=on}var Mx=on;on=Ax;try{return bx()}finally{on=Mx}},t.unstable_requestPaint=function(){Rn=!0},t.unstable_runWithPriority=function(bx,Ax){switch(bx){case 1:case 2:case 3:case 4:case 5:break;default:bx=3}var Mx=on;on=bx;try{return Ax()}finally{on=Mx}},t.unstable_scheduleCallback=function(bx,Ax,Mx){var Rx=t.unstable_now();switch(typeof Mx=="object"&&Mx!==null?(Mx=Mx.delay,Mx=typeof Mx=="number"&&0<Mx?Rx+Mx:Rx):Mx=Rx,bx){case 1:var Cx=-1;break;case 2:Cx=250;break;case 5:Cx=1073741823;break;case 4:Cx=1e4;break;default:Cx=5e3}return Cx=Mx+Cx,bx={id:en++,callback:Ax,priorityLevel:bx,startTime:Mx,expirationTime:Cx,sortIndex:-1},Mx>Rx?(bx.sortIndex=Mx,n(ar,bx),a(Ct)===null&&bx===a(ar)&&(Cn?(ox(gx),gx=-1):Cn=!0,Ex(cx,Mx-Rx))):(bx.sortIndex=Cx,n(Ct,bx),dn||fn||(dn=!0,fx||(fx=!0,yx()))),bx},t.unstable_shouldYield=hx,t.unstable_wrapCallback=function(bx){var Ax=on;return function(){var Mx=on;on=Ax;try{return bx.apply(this,arguments)}finally{on=Mx}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function n(Ct){var ar="https://react.dev/errors/"+Ct;if(1<arguments.length){ar+="?args[]="+encodeURIComponent(arguments[1]);for(var en=2;en<arguments.length;en++)ar+="&args[]="+encodeURIComponent(arguments[en])}return"Minified React error #"+Ct+"; visit "+ar+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(Ct,ar,en){var tn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:tn==null?null:""+tn,children:Ct,containerInfo:ar,implementation:en}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(Ct,ar){if(Ct==="font")return"";if(typeof ar=="string")return ar==="use-credentials"?ar:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(Ct,ar){var en=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ar||ar.nodeType!==1&&ar.nodeType!==9&&ar.nodeType!==11)throw Error(n(299));return u(Ct,ar,null,en)},reactDom_production.flushSync=function(Ct){var ar=c.T,en=s.p;try{if(c.T=null,s.p=2,Ct)return Ct()}finally{c.T=ar,s.p=en,s.d.f()}},reactDom_production.preconnect=function(Ct,ar){typeof Ct=="string"&&(ar?(ar=ar.crossOrigin,ar=typeof ar=="string"?ar==="use-credentials"?ar:"":void 0):ar=null,s.d.C(Ct,ar))},reactDom_production.prefetchDNS=function(Ct){typeof Ct=="string"&&s.d.D(Ct)},reactDom_production.preinit=function(Ct,ar){if(typeof Ct=="string"&&ar&&typeof ar.as=="string"){var en=ar.as,tn=d(en,ar.crossOrigin),on=typeof ar.integrity=="string"?ar.integrity:void 0,fn=typeof ar.fetchPriority=="string"?ar.fetchPriority:void 0;en==="style"?s.d.S(Ct,typeof ar.precedence=="string"?ar.precedence:void 0,{crossOrigin:tn,integrity:on,fetchPriority:fn}):en==="script"&&s.d.X(Ct,{crossOrigin:tn,integrity:on,fetchPriority:fn,nonce:typeof ar.nonce=="string"?ar.nonce:void 0})}},reactDom_production.preinitModule=function(Ct,ar){if(typeof Ct=="string")if(typeof ar=="object"&&ar!==null){if(ar.as==null||ar.as==="script"){var en=d(ar.as,ar.crossOrigin);s.d.M(Ct,{crossOrigin:en,integrity:typeof ar.integrity=="string"?ar.integrity:void 0,nonce:typeof ar.nonce=="string"?ar.nonce:void 0})}}else ar==null&&s.d.M(Ct)},reactDom_production.preload=function(Ct,ar){if(typeof Ct=="string"&&typeof ar=="object"&&ar!==null&&typeof ar.as=="string"){var en=ar.as,tn=d(en,ar.crossOrigin);s.d.L(Ct,en,{crossOrigin:tn,integrity:typeof ar.integrity=="string"?ar.integrity:void 0,nonce:typeof ar.nonce=="string"?ar.nonce:void 0,type:typeof ar.type=="string"?ar.type:void 0,fetchPriority:typeof ar.fetchPriority=="string"?ar.fetchPriority:void 0,referrerPolicy:typeof ar.referrerPolicy=="string"?ar.referrerPolicy:void 0,imageSrcSet:typeof ar.imageSrcSet=="string"?ar.imageSrcSet:void 0,imageSizes:typeof ar.imageSizes=="string"?ar.imageSizes:void 0,media:typeof ar.media=="string"?ar.media:void 0})}},reactDom_production.preloadModule=function(Ct,ar){if(typeof Ct=="string")if(ar){var en=d(ar.as,ar.crossOrigin);s.d.m(Ct,{as:typeof ar.as=="string"&&ar.as!=="script"?ar.as:void 0,crossOrigin:en,integrity:typeof ar.integrity=="string"?ar.integrity:void 0})}else s.d.m(Ct)},reactDom_production.requestFormReset=function(Ct){s.d.r(Ct)},reactDom_production.unstable_batchedUpdates=function(Ct,ar){return Ct(ar)},reactDom_production.useFormState=function(Ct,ar,en){return c.H.useFormState(Ct,ar,en)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),n=requireReact(),a=requireReactDom();function s(gn){var rx="https://react.dev/errors/"+gn;if(1<arguments.length){rx+="?args[]="+encodeURIComponent(arguments[1]);for(var ux=2;ux<arguments.length;ux++)rx+="&args[]="+encodeURIComponent(arguments[ux])}return"Minified React error #"+gn+"; visit "+rx+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(gn){return!(!gn||gn.nodeType!==1&&gn.nodeType!==9&&gn.nodeType!==11)}function u(gn){var rx=gn,ux=gn;if(gn.alternate)for(;rx.return;)rx=rx.return;else{gn=rx;do rx=gn,(rx.flags&4098)!==0&&(ux=rx.return),gn=rx.return;while(gn)}return rx.tag===3?ux:null}function c(gn){if(gn.tag===13){var rx=gn.memoizedState;if(rx===null&&(gn=gn.alternate,gn!==null&&(rx=gn.memoizedState)),rx!==null)return rx.dehydrated}return null}function d(gn){if(u(gn)!==gn)throw Error(s(188))}function Ct(gn){var rx=gn.alternate;if(!rx){if(rx=u(gn),rx===null)throw Error(s(188));return rx!==gn?null:gn}for(var ux=gn,dx=rx;;){var xx=ux.return;if(xx===null)break;var Tx=xx.alternate;if(Tx===null){if(dx=xx.return,dx!==null){ux=dx;continue}break}if(xx.child===Tx.child){for(Tx=xx.child;Tx;){if(Tx===ux)return d(xx),gn;if(Tx===dx)return d(xx),rx;Tx=Tx.sibling}throw Error(s(188))}if(ux.return!==dx.return)ux=xx,dx=Tx;else{for(var Dx=!1,zx=xx.child;zx;){if(zx===ux){Dx=!0,ux=xx,dx=Tx;break}if(zx===dx){Dx=!0,dx=xx,ux=Tx;break}zx=zx.sibling}if(!Dx){for(zx=Tx.child;zx;){if(zx===ux){Dx=!0,ux=Tx,dx=xx;break}if(zx===dx){Dx=!0,dx=Tx,ux=xx;break}zx=zx.sibling}if(!Dx)throw Error(s(189))}}if(ux.alternate!==dx)throw Error(s(190))}if(ux.tag!==3)throw Error(s(188));return ux.stateNode.current===ux?gn:rx}function ar(gn){var rx=gn.tag;if(rx===5||rx===26||rx===27||rx===6)return gn;for(gn=gn.child;gn!==null;){if(rx=ar(gn),rx!==null)return rx;gn=gn.sibling}return null}var en=Object.assign,tn=Symbol.for("react.element"),on=Symbol.for("react.transitional.element"),fn=Symbol.for("react.portal"),dn=Symbol.for("react.fragment"),Cn=Symbol.for("react.strict_mode"),Rn=Symbol.for("react.profiler"),ax=Symbol.for("react.provider"),ox=Symbol.for("react.consumer"),sx=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),cx=Symbol.for("react.suspense"),fx=Symbol.for("react.suspense_list"),gx=Symbol.for("react.memo"),mx=Symbol.for("react.lazy"),px=Symbol.for("react.activity"),hx=Symbol.for("react.memo_cache_sentinel"),vx=Symbol.iterator;function yx(gn){return gn===null||typeof gn!="object"?null:(gn=vx&&gn[vx]||gn["@@iterator"],typeof gn=="function"?gn:null)}var Sx=Symbol.for("react.client.reference");function _x(gn){if(gn==null)return null;if(typeof gn=="function")return gn.$$typeof===Sx?null:gn.displayName||gn.name||null;if(typeof gn=="string")return gn;switch(gn){case dn:return"Fragment";case Rn:return"Profiler";case Cn:return"StrictMode";case cx:return"Suspense";case fx:return"SuspenseList";case px:return"Activity"}if(typeof gn=="object")switch(gn.$$typeof){case fn:return"Portal";case sx:return(gn.displayName||"Context")+".Provider";case ox:return(gn._context.displayName||"Context")+".Consumer";case lx:var rx=gn.render;return gn=gn.displayName,gn||(gn=rx.displayName||rx.name||"",gn=gn!==""?"ForwardRef("+gn+")":"ForwardRef"),gn;case gx:return rx=gn.displayName||null,rx!==null?rx:_x(gn.type)||"Memo";case mx:rx=gn._payload,gn=gn._init;try{return _x(gn(rx))}catch{}}return null}var Ex=Array.isArray,bx=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ax=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mx={pending:!1,data:null,method:null,action:null},Rx=[],Cx=-1;function Lx(gn){return{current:gn}}function qx(gn){0>Cx||(gn.current=Rx[Cx],Rx[Cx]=null,Cx--)}function Ix(gn,rx){Cx++,Rx[Cx]=gn.current,gn.current=rx}var Px=Lx(null),Nx=Lx(null),Bx=Lx(null),$x=Lx(null);function Vx(gn,rx){switch(Ix(Bx,rx),Ix(Nx,gn),Ix(Px,null),rx.nodeType){case 9:case 11:gn=(gn=rx.documentElement)&&(gn=gn.namespaceURI)?xN(gn):0;break;default:if(gn=rx.tagName,rx=rx.namespaceURI)rx=xN(rx),gn=_N(rx,gn);else switch(gn){case"svg":gn=1;break;case"math":gn=2;break;default:gn=0}}qx(Px),Ix(Px,gn)}function Gx(){qx(Px),qx(Nx),qx(Bx)}function Zx(gn){gn.memoizedState!==null&&Ix($x,gn);var rx=Px.current,ux=_N(rx,gn.type);rx!==ux&&(Ix(Nx,gn),Ix(Px,ux))}function jx(gn){Nx.current===gn&&(qx(Px),qx(Nx)),$x.current===gn&&(qx($x),QC._currentValue=Mx)}var Hx=Object.prototype.hasOwnProperty,iE=t.unstable_scheduleCallback,Xx=t.unstable_cancelCallback,rE=t.unstable_shouldYield,uE=t.unstable_requestPaint,aE=t.unstable_now,Kx=t.unstable_getCurrentPriorityLevel,ME=t.unstable_ImmediatePriority,IE=t.unstable_UserBlockingPriority,wE=t.unstable_NormalPriority,bE=t.unstable_LowPriority,UE=t.unstable_IdlePriority,CE=t.log,YE=t.unstable_setDisableYieldValue,Ox=null,Fx=null;function Wx(gn){if(typeof CE=="function"&&YE(gn),Fx&&typeof Fx.setStrictMode=="function")try{Fx.setStrictMode(Ox,gn)}catch{}}var Qx=Math.clz32?Math.clz32:mE,oE=Math.log,tE=Math.LN2;function mE(gn){return gn>>>=0,gn===0?32:31-(oE(gn)/tE|0)|0}var hE=256,SE=4194304;function _E(gn){var rx=gn&42;if(rx!==0)return rx;switch(gn&-gn){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return gn&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return gn&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return gn}}function PE(gn,rx,ux){var dx=gn.pendingLanes;if(dx===0)return 0;var xx=0,Tx=gn.suspendedLanes,Dx=gn.pingedLanes;gn=gn.warmLanes;var zx=dx&134217727;return zx!==0?(dx=zx&~Tx,dx!==0?xx=_E(dx):(Dx&=zx,Dx!==0?xx=_E(Dx):ux||(ux=zx&~gn,ux!==0&&(xx=_E(ux))))):(zx=dx&~Tx,zx!==0?xx=_E(zx):Dx!==0?xx=_E(Dx):ux||(ux=dx&~gn,ux!==0&&(xx=_E(ux)))),xx===0?0:rx!==0&&rx!==xx&&(rx&Tx)===0&&(Tx=xx&-xx,ux=rx&-rx,Tx>=ux||Tx===32&&(ux&4194048)!==0)?rx:xx}function NE(gn,rx){return(gn.pendingLanes&~(gn.suspendedLanes&~gn.pingedLanes)&rx)===0}function lE(gn,rx){switch(gn){case 1:case 2:case 4:case 8:case 64:return rx+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return rx+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gE(){var gn=hE;return hE<<=1,(hE&4194048)===0&&(hE=256),gn}function AE(){var gn=SE;return SE<<=1,(SE&62914560)===0&&(SE=4194304),gn}function yE(gn){for(var rx=[],ux=0;31>ux;ux++)rx.push(gn);return rx}function DE(gn,rx){gn.pendingLanes|=rx,rx!==268435456&&(gn.suspendedLanes=0,gn.pingedLanes=0,gn.warmLanes=0)}function OE(gn,rx,ux,dx,xx,Tx){var Dx=gn.pendingLanes;gn.pendingLanes=ux,gn.suspendedLanes=0,gn.pingedLanes=0,gn.warmLanes=0,gn.expiredLanes&=ux,gn.entangledLanes&=ux,gn.errorRecoveryDisabledLanes&=ux,gn.shellSuspendCounter=0;var zx=gn.entanglements,Jx=gn.expirationTimes,fE=gn.hiddenUpdates;for(ux=Dx&~ux;0<ux;){var xE=31-Qx(ux),TE=1<<xE;zx[xE]=0,Jx[xE]=-1;var pE=fE[xE];if(pE!==null)for(fE[xE]=null,xE=0;xE<pE.length;xE++){var dE=pE[xE];dE!==null&&(dE.lane&=-536870913)}ux&=~TE}dx!==0&&kx(gn,dx,0),Tx!==0&&xx===0&&gn.tag!==0&&(gn.suspendedLanes|=Tx&~(Dx&~rx))}function kx(gn,rx,ux){gn.pendingLanes|=rx,gn.suspendedLanes&=~rx;var dx=31-Qx(rx);gn.entangledLanes|=rx,gn.entanglements[dx]=gn.entanglements[dx]|1073741824|ux&4194090}function Ux(gn,rx){var ux=gn.entangledLanes|=rx;for(gn=gn.entanglements;ux;){var dx=31-Qx(ux),xx=1<<dx;xx&rx|gn[dx]&rx&&(gn[dx]|=rx),ux&=~xx}}function Yx(gn){switch(gn){case 2:gn=1;break;case 8:gn=4;break;case 32:gn=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:gn=128;break;case 268435456:gn=134217728;break;default:gn=0}return gn}function eE(gn){return gn&=-gn,2<gn?8<gn?(gn&134217727)!==0?32:268435456:8:2}function vE(){var gn=Ax.p;return gn!==0?gn:(gn=window.event,gn===void 0?32:FN(gn.type))}function LE(gn,rx){var ux=Ax.p;try{return Ax.p=gn,rx()}finally{Ax.p=ux}}var BE=Math.random().toString(36).slice(2),$E="__reactFiber$"+BE,kE="__reactProps$"+BE,ZE="__reactContainer$"+BE,eS="__reactEvents$"+BE,WE="__reactListeners$"+BE,CS="__reactHandles$"+BE,LS="__reactResources$"+BE,hS="__reactMarker$"+BE;function qS(gn){delete gn[$E],delete gn[kE],delete gn[eS],delete gn[WE],delete gn[CS]}function $S(gn){var rx=gn[$E];if(rx)return rx;for(var ux=gn.parentNode;ux;){if(rx=ux[ZE]||ux[$E]){if(ux=rx.alternate,rx.child!==null||ux!==null&&ux.child!==null)for(gn=wN(gn);gn!==null;){if(ux=gn[$E])return ux;gn=wN(gn)}return rx}gn=ux,ux=gn.parentNode}return null}function VS(gn){if(gn=gn[$E]||gn[ZE]){var rx=gn.tag;if(rx===5||rx===6||rx===13||rx===26||rx===27||rx===3)return gn}return null}function GE(gn){var rx=gn.tag;if(rx===5||rx===26||rx===27||rx===6)return gn.stateNode;throw Error(s(33))}function RE(gn){var rx=gn[LS];return rx||(rx=gn[LS]={hoistableStyles:new Map,hoistableScripts:new Map}),rx}function zE(gn){gn[hS]=!0}var ES=new Set,gS={};function oS(gn,rx){rS(gn,rx),rS(gn+"Capture",rx)}function rS(gn,rx){for(gS[gn]=rx,gn=0;gn<rx.length;gn++)ES.add(rx[gn])}var iS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ZS={},yS={};function GS(gn){return Hx.call(yS,gn)?!0:Hx.call(ZS,gn)?!1:iS.test(gn)?yS[gn]=!0:(ZS[gn]=!0,!1)}function BS(gn,rx,ux){if(GS(rx))if(ux===null)gn.removeAttribute(rx);else{switch(typeof ux){case"undefined":case"function":case"symbol":gn.removeAttribute(rx);return;case"boolean":var dx=rx.toLowerCase().slice(0,5);if(dx!=="data-"&&dx!=="aria-"){gn.removeAttribute(rx);return}}gn.setAttribute(rx,""+ux)}}function mT(gn,rx,ux){if(ux===null)gn.removeAttribute(rx);else{switch(typeof ux){case"undefined":case"function":case"symbol":case"boolean":gn.removeAttribute(rx);return}gn.setAttribute(rx,""+ux)}}function wS(gn,rx,ux,dx){if(dx===null)gn.removeAttribute(ux);else{switch(typeof dx){case"undefined":case"function":case"symbol":case"boolean":gn.removeAttribute(ux);return}gn.setAttributeNS(rx,ux,""+dx)}}var sT,nM;function JS(gn){if(sT===void 0)try{throw Error()}catch(ux){var rx=ux.stack.trim().match(/\n( *(at )?)/);sT=rx&&rx[1]||"",nM=-1<ux.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ux.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sT+gn+nM}var YS=!1;function vT(gn,rx){if(!gn||YS)return"";YS=!0;var ux=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var dx={DetermineComponentFrameRoot:function(){try{if(rx){var TE=function(){throw Error()};if(Object.defineProperty(TE.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(TE,[])}catch(dE){var pE=dE}Reflect.construct(gn,[],TE)}else{try{TE.call()}catch(dE){pE=dE}gn.call(TE.prototype)}}else{try{throw Error()}catch(dE){pE=dE}(TE=gn())&&typeof TE.catch=="function"&&TE.catch(function(){})}}catch(dE){if(dE&&pE&&typeof dE.stack=="string")return[dE.stack,pE.stack]}return[null,null]}};dx.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var xx=Object.getOwnPropertyDescriptor(dx.DetermineComponentFrameRoot,"name");xx&&xx.configurable&&Object.defineProperty(dx.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Tx=dx.DetermineComponentFrameRoot(),Dx=Tx[0],zx=Tx[1];if(Dx&&zx){var Jx=Dx.split(`
`),fE=zx.split(`
`);for(xx=dx=0;dx<Jx.length&&!Jx[dx].includes("DetermineComponentFrameRoot");)dx++;for(;xx<fE.length&&!fE[xx].includes("DetermineComponentFrameRoot");)xx++;if(dx===Jx.length||xx===fE.length)for(dx=Jx.length-1,xx=fE.length-1;1<=dx&&0<=xx&&Jx[dx]!==fE[xx];)xx--;for(;1<=dx&&0<=xx;dx--,xx--)if(Jx[dx]!==fE[xx]){if(dx!==1||xx!==1)do if(dx--,xx--,0>xx||Jx[dx]!==fE[xx]){var xE=`
`+Jx[dx].replace(" at new "," at ");return gn.displayName&&xE.includes("<anonymous>")&&(xE=xE.replace("<anonymous>",gn.displayName)),xE}while(1<=dx&&0<=xx);break}}}finally{YS=!1,Error.prepareStackTrace=ux}return(ux=gn?gn.displayName||gn.name:"")?JS(ux):""}function AT(gn){switch(gn.tag){case 26:case 27:case 5:return JS(gn.type);case 16:return JS("Lazy");case 13:return JS("Suspense");case 19:return JS("SuspenseList");case 0:case 15:return vT(gn.type,!1);case 11:return vT(gn.type.render,!1);case 1:return vT(gn.type,!0);case 31:return JS("Activity");default:return""}}function uA(gn){try{var rx="";do rx+=AT(gn),gn=gn.return;while(gn);return rx}catch(ux){return`
Error generating stack: `+ux.message+`
`+ux.stack}}function HS(gn){switch(typeof gn){case"bigint":case"boolean":case"number":case"string":case"undefined":return gn;case"object":return gn;default:return""}}function cA(gn){var rx=gn.type;return(gn=gn.nodeName)&&gn.toLowerCase()==="input"&&(rx==="checkbox"||rx==="radio")}function lC(gn){var rx=cA(gn)?"checked":"value",ux=Object.getOwnPropertyDescriptor(gn.constructor.prototype,rx),dx=""+gn[rx];if(!gn.hasOwnProperty(rx)&&typeof ux<"u"&&typeof ux.get=="function"&&typeof ux.set=="function"){var xx=ux.get,Tx=ux.set;return Object.defineProperty(gn,rx,{configurable:!0,get:function(){return xx.call(this)},set:function(Dx){dx=""+Dx,Tx.call(this,Dx)}}),Object.defineProperty(gn,rx,{enumerable:ux.enumerable}),{getValue:function(){return dx},setValue:function(Dx){dx=""+Dx},stopTracking:function(){gn._valueTracker=null,delete gn[rx]}}}}function CA(gn){gn._valueTracker||(gn._valueTracker=lC(gn))}function iM(gn){if(!gn)return!1;var rx=gn._valueTracker;if(!rx)return!0;var ux=rx.getValue(),dx="";return gn&&(dx=cA(gn)?gn.checked?"true":"false":gn.value),gn=dx,gn!==ux?(rx.setValue(gn),!0):!1}function MA(gn){if(gn=gn||(typeof document<"u"?document:void 0),typeof gn>"u")return null;try{return gn.activeElement||gn.body}catch{return gn.body}}var uC=/[\n"\\]/g;function lT(gn){return gn.replace(uC,function(rx){return"\\"+rx.charCodeAt(0).toString(16)+" "})}function fR(gn,rx,ux,dx,xx,Tx,Dx,zx){gn.name="",Dx!=null&&typeof Dx!="function"&&typeof Dx!="symbol"&&typeof Dx!="boolean"?gn.type=Dx:gn.removeAttribute("type"),rx!=null?Dx==="number"?(rx===0&&gn.value===""||gn.value!=rx)&&(gn.value=""+HS(rx)):gn.value!==""+HS(rx)&&(gn.value=""+HS(rx)):Dx!=="submit"&&Dx!=="reset"||gn.removeAttribute("value"),rx!=null?pR(gn,Dx,HS(rx)):ux!=null?pR(gn,Dx,HS(ux)):dx!=null&&gn.removeAttribute("value"),xx==null&&Tx!=null&&(gn.defaultChecked=!!Tx),xx!=null&&(gn.checked=xx&&typeof xx!="function"&&typeof xx!="symbol"),zx!=null&&typeof zx!="function"&&typeof zx!="symbol"&&typeof zx!="boolean"?gn.name=""+HS(zx):gn.removeAttribute("name")}function cC(gn,rx,ux,dx,xx,Tx,Dx,zx){if(Tx!=null&&typeof Tx!="function"&&typeof Tx!="symbol"&&typeof Tx!="boolean"&&(gn.type=Tx),rx!=null||ux!=null){if(!(Tx!=="submit"&&Tx!=="reset"||rx!=null))return;ux=ux!=null?""+HS(ux):"",rx=rx!=null?""+HS(rx):ux,zx||rx===gn.value||(gn.value=rx),gn.defaultValue=rx}dx=dx??xx,dx=typeof dx!="function"&&typeof dx!="symbol"&&!!dx,gn.checked=zx?gn.checked:!!dx,gn.defaultChecked=!!dx,Dx!=null&&typeof Dx!="function"&&typeof Dx!="symbol"&&typeof Dx!="boolean"&&(gn.name=Dx)}function pR(gn,rx,ux){rx==="number"&&MA(gn.ownerDocument)===gn||gn.defaultValue===""+ux||(gn.defaultValue=""+ux)}function RA(gn,rx,ux,dx){if(gn=gn.options,rx){rx={};for(var xx=0;xx<ux.length;xx++)rx["$"+ux[xx]]=!0;for(ux=0;ux<gn.length;ux++)xx=rx.hasOwnProperty("$"+gn[ux].value),gn[ux].selected!==xx&&(gn[ux].selected=xx),xx&&dx&&(gn[ux].defaultSelected=!0)}else{for(ux=""+HS(ux),rx=null,xx=0;xx<gn.length;xx++){if(gn[xx].value===ux){gn[xx].selected=!0,dx&&(gn[xx].defaultSelected=!0);return}rx!==null||gn[xx].disabled||(rx=gn[xx])}rx!==null&&(rx.selected=!0)}}function mD(gn,rx,ux){if(rx!=null&&(rx=""+HS(rx),rx!==gn.value&&(gn.value=rx),ux==null)){gn.defaultValue!==rx&&(gn.defaultValue=rx);return}gn.defaultValue=ux!=null?""+HS(ux):""}function vD(gn,rx,ux,dx){if(rx==null){if(dx!=null){if(ux!=null)throw Error(s(92));if(Ex(dx)){if(1<dx.length)throw Error(s(93));dx=dx[0]}ux=dx}ux==null&&(ux=""),rx=ux}ux=HS(rx),gn.defaultValue=ux,dx=gn.textContent,dx===ux&&dx!==""&&dx!==null&&(gn.value=dx)}function IA(gn,rx){if(rx){var ux=gn.firstChild;if(ux&&ux===gn.lastChild&&ux.nodeType===3){ux.nodeValue=rx;return}}gn.textContent=rx}var HN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yD(gn,rx,ux){var dx=rx.indexOf("--")===0;ux==null||typeof ux=="boolean"||ux===""?dx?gn.setProperty(rx,""):rx==="float"?gn.cssFloat="":gn[rx]="":dx?gn.setProperty(rx,ux):typeof ux!="number"||ux===0||HN.has(rx)?rx==="float"?gn.cssFloat=ux:gn[rx]=(""+ux).trim():gn[rx]=ux+"px"}function xD(gn,rx,ux){if(rx!=null&&typeof rx!="object")throw Error(s(62));if(gn=gn.style,ux!=null){for(var dx in ux)!ux.hasOwnProperty(dx)||rx!=null&&rx.hasOwnProperty(dx)||(dx.indexOf("--")===0?gn.setProperty(dx,""):dx==="float"?gn.cssFloat="":gn[dx]="");for(var xx in rx)dx=rx[xx],rx.hasOwnProperty(xx)&&ux[xx]!==dx&&yD(gn,xx,dx)}else for(var Tx in rx)rx.hasOwnProperty(Tx)&&yD(gn,Tx,rx[Tx])}function dR(gn){if(gn.indexOf("-")===-1)return!1;switch(gn){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aM(gn){return ZN.test(""+gn)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":gn}var hR=null;function gR(gn){return gn=gn.target||gn.srcElement||window,gn.correspondingUseElement&&(gn=gn.correspondingUseElement),gn.nodeType===3?gn.parentNode:gn}var DA=null,OA=null;function _D(gn){var rx=VS(gn);if(rx&&(gn=rx.stateNode)){var ux=gn[kE]||null;e:switch(gn=rx.stateNode,rx.type){case"input":if(fR(gn,ux.value,ux.defaultValue,ux.defaultValue,ux.checked,ux.defaultChecked,ux.type,ux.name),rx=ux.name,ux.type==="radio"&&rx!=null){for(ux=gn;ux.parentNode;)ux=ux.parentNode;for(ux=ux.querySelectorAll('input[name="'+lT(""+rx)+'"][type="radio"]'),rx=0;rx<ux.length;rx++){var dx=ux[rx];if(dx!==gn&&dx.form===gn.form){var xx=dx[kE]||null;if(!xx)throw Error(s(90));fR(dx,xx.value,xx.defaultValue,xx.defaultValue,xx.checked,xx.defaultChecked,xx.type,xx.name)}}for(rx=0;rx<ux.length;rx++)dx=ux[rx],dx.form===gn.form&&iM(dx)}break e;case"textarea":mD(gn,ux.value,ux.defaultValue);break e;case"select":rx=ux.value,rx!=null&&RA(gn,!!ux.multiple,rx,!1)}}}var mR=!1;function ED(gn,rx,ux){if(mR)return gn(rx,ux);mR=!0;try{var dx=gn(rx);return dx}finally{if(mR=!1,(DA!==null||OA!==null)&&(VM(),DA&&(rx=DA,gn=OA,OA=DA=null,_D(rx),gn)))for(rx=0;rx<gn.length;rx++)_D(gn[rx])}}function fC(gn,rx){var ux=gn.stateNode;if(ux===null)return null;var dx=ux[kE]||null;if(dx===null)return null;ux=dx[rx];e:switch(rx){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(dx=!dx.disabled)||(gn=gn.type,dx=!(gn==="button"||gn==="input"||gn==="select"||gn==="textarea")),gn=!dx;break e;default:gn=!1}if(gn)return null;if(ux&&typeof ux!="function")throw Error(s(231,rx,typeof ux));return ux}var CT=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vR=!1;if(CT)try{var pC={};Object.defineProperty(pC,"passive",{get:function(){vR=!0}}),window.addEventListener("test",pC,pC),window.removeEventListener("test",pC,pC)}catch{vR=!1}var qT=null,yR=null,oM=null;function bD(){if(oM)return oM;var gn,rx=yR,ux=rx.length,dx,xx="value"in qT?qT.value:qT.textContent,Tx=xx.length;for(gn=0;gn<ux&&rx[gn]===xx[gn];gn++);var Dx=ux-gn;for(dx=1;dx<=Dx&&rx[ux-dx]===xx[Tx-dx];dx++);return oM=xx.slice(gn,1<dx?1-dx:void 0)}function sM(gn){var rx=gn.keyCode;return"charCode"in gn?(gn=gn.charCode,gn===0&&rx===13&&(gn=13)):gn=rx,gn===10&&(gn=13),32<=gn||gn===13?gn:0}function lM(){return!0}function SD(){return!1}function WS(gn){function rx(ux,dx,xx,Tx,Dx){this._reactName=ux,this._targetInst=xx,this.type=dx,this.nativeEvent=Tx,this.target=Dx,this.currentTarget=null;for(var zx in gn)gn.hasOwnProperty(zx)&&(ux=gn[zx],this[zx]=ux?ux(Tx):Tx[zx]);return this.isDefaultPrevented=(Tx.defaultPrevented!=null?Tx.defaultPrevented:Tx.returnValue===!1)?lM:SD,this.isPropagationStopped=SD,this}return en(rx.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ux=this.nativeEvent;ux&&(ux.preventDefault?ux.preventDefault():typeof ux.returnValue!="unknown"&&(ux.returnValue=!1),this.isDefaultPrevented=lM)},stopPropagation:function(){var ux=this.nativeEvent;ux&&(ux.stopPropagation?ux.stopPropagation():typeof ux.cancelBubble!="unknown"&&(ux.cancelBubble=!0),this.isPropagationStopped=lM)},persist:function(){},isPersistent:lM}),rx}var fA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(gn){return gn.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uM=WS(fA),dC=en({},fA,{view:0,detail:0}),YN=WS(dC),xR,_R,hC,cM=en({},dC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bR,button:0,buttons:0,relatedTarget:function(gn){return gn.relatedTarget===void 0?gn.fromElement===gn.srcElement?gn.toElement:gn.fromElement:gn.relatedTarget},movementX:function(gn){return"movementX"in gn?gn.movementX:(gn!==hC&&(hC&&gn.type==="mousemove"?(xR=gn.screenX-hC.screenX,_R=gn.screenY-hC.screenY):_R=xR=0,hC=gn),xR)},movementY:function(gn){return"movementY"in gn?gn.movementY:_R}}),wD=WS(cM),WN=en({},cM,{dataTransfer:0}),XN=WS(WN),KN=en({},dC,{relatedTarget:0}),ER=WS(KN),QN=en({},fA,{animationName:0,elapsedTime:0,pseudoElement:0}),JN=WS(QN),eL=en({},fA,{clipboardData:function(gn){return"clipboardData"in gn?gn.clipboardData:window.clipboardData}}),tL=WS(eL),rL=en({},fA,{data:0}),TD=WS(rL),nL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oL(gn){var rx=this.nativeEvent;return rx.getModifierState?rx.getModifierState(gn):(gn=aL[gn])?!!rx[gn]:!1}function bR(){return oL}var sL=en({},dC,{key:function(gn){if(gn.key){var rx=nL[gn.key]||gn.key;if(rx!=="Unidentified")return rx}return gn.type==="keypress"?(gn=sM(gn),gn===13?"Enter":String.fromCharCode(gn)):gn.type==="keydown"||gn.type==="keyup"?iL[gn.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bR,charCode:function(gn){return gn.type==="keypress"?sM(gn):0},keyCode:function(gn){return gn.type==="keydown"||gn.type==="keyup"?gn.keyCode:0},which:function(gn){return gn.type==="keypress"?sM(gn):gn.type==="keydown"||gn.type==="keyup"?gn.keyCode:0}}),lL=WS(sL),uL=en({},cM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AD=WS(uL),cL=en({},dC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bR}),fL=WS(cL),pL=en({},fA,{propertyName:0,elapsedTime:0,pseudoElement:0}),dL=WS(pL),hL=en({},cM,{deltaX:function(gn){return"deltaX"in gn?gn.deltaX:"wheelDeltaX"in gn?-gn.wheelDeltaX:0},deltaY:function(gn){return"deltaY"in gn?gn.deltaY:"wheelDeltaY"in gn?-gn.wheelDeltaY:"wheelDelta"in gn?-gn.wheelDelta:0},deltaZ:0,deltaMode:0}),gL=WS(hL),mL=en({},fA,{newState:0,oldState:0}),vL=WS(mL),yL=[9,13,27,32],SR=CT&&"CompositionEvent"in window,gC=null;CT&&"documentMode"in document&&(gC=document.documentMode);var xL=CT&&"TextEvent"in window&&!gC,CD=CT&&(!SR||gC&&8<gC&&11>=gC),MD=" ",RD=!1;function ID(gn,rx){switch(gn){case"keyup":return yL.indexOf(rx.keyCode)!==-1;case"keydown":return rx.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DD(gn){return gn=gn.detail,typeof gn=="object"&&"data"in gn?gn.data:null}var PA=!1;function _L(gn,rx){switch(gn){case"compositionend":return DD(rx);case"keypress":return rx.which!==32?null:(RD=!0,MD);case"textInput":return gn=rx.data,gn===MD&&RD?null:gn;default:return null}}function EL(gn,rx){if(PA)return gn==="compositionend"||!SR&&ID(gn,rx)?(gn=bD(),oM=yR=qT=null,PA=!1,gn):null;switch(gn){case"paste":return null;case"keypress":if(!(rx.ctrlKey||rx.altKey||rx.metaKey)||rx.ctrlKey&&rx.altKey){if(rx.char&&1<rx.char.length)return rx.char;if(rx.which)return String.fromCharCode(rx.which)}return null;case"compositionend":return CD&&rx.locale!=="ko"?null:rx.data;default:return null}}var bL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OD(gn){var rx=gn&&gn.nodeName&&gn.nodeName.toLowerCase();return rx==="input"?!!bL[gn.type]:rx==="textarea"}function PD(gn,rx,ux,dx){DA?OA?OA.push(dx):OA=[dx]:DA=dx,rx=XM(rx,"onChange"),0<rx.length&&(ux=new uM("onChange","change",null,ux,dx),gn.push({event:ux,listeners:rx}))}var mC=null,vC=null;function SL(gn){hN(gn,0)}function fM(gn){var rx=GE(gn);if(iM(rx))return gn}function ND(gn,rx){if(gn==="change")return rx}var LD=!1;if(CT){var wR;if(CT){var TR="oninput"in document;if(!TR){var $D=document.createElement("div");$D.setAttribute("oninput","return;"),TR=typeof $D.oninput=="function"}wR=TR}else wR=!1;LD=wR&&(!document.documentMode||9<document.documentMode)}function BD(){mC&&(mC.detachEvent("onpropertychange",kD),vC=mC=null)}function kD(gn){if(gn.propertyName==="value"&&fM(vC)){var rx=[];PD(rx,vC,gn,gR(gn)),ED(SL,rx)}}function wL(gn,rx,ux){gn==="focusin"?(BD(),mC=rx,vC=ux,mC.attachEvent("onpropertychange",kD)):gn==="focusout"&&BD()}function TL(gn){if(gn==="selectionchange"||gn==="keyup"||gn==="keydown")return fM(vC)}function AL(gn,rx){if(gn==="click")return fM(rx)}function CL(gn,rx){if(gn==="input"||gn==="change")return fM(rx)}function ML(gn,rx){return gn===rx&&(gn!==0||1/gn===1/rx)||gn!==gn&&rx!==rx}var eT=typeof Object.is=="function"?Object.is:ML;function yC(gn,rx){if(eT(gn,rx))return!0;if(typeof gn!="object"||gn===null||typeof rx!="object"||rx===null)return!1;var ux=Object.keys(gn),dx=Object.keys(rx);if(ux.length!==dx.length)return!1;for(dx=0;dx<ux.length;dx++){var xx=ux[dx];if(!Hx.call(rx,xx)||!eT(gn[xx],rx[xx]))return!1}return!0}function FD(gn){for(;gn&&gn.firstChild;)gn=gn.firstChild;return gn}function UD(gn,rx){var ux=FD(gn);gn=0;for(var dx;ux;){if(ux.nodeType===3){if(dx=gn+ux.textContent.length,gn<=rx&&dx>=rx)return{node:ux,offset:rx-gn};gn=dx}e:{for(;ux;){if(ux.nextSibling){ux=ux.nextSibling;break e}ux=ux.parentNode}ux=void 0}ux=FD(ux)}}function qD(gn,rx){return gn&&rx?gn===rx?!0:gn&&gn.nodeType===3?!1:rx&&rx.nodeType===3?qD(gn,rx.parentNode):"contains"in gn?gn.contains(rx):gn.compareDocumentPosition?!!(gn.compareDocumentPosition(rx)&16):!1:!1}function GD(gn){gn=gn!=null&&gn.ownerDocument!=null&&gn.ownerDocument.defaultView!=null?gn.ownerDocument.defaultView:window;for(var rx=MA(gn.document);rx instanceof gn.HTMLIFrameElement;){try{var ux=typeof rx.contentWindow.location.href=="string"}catch{ux=!1}if(ux)gn=rx.contentWindow;else break;rx=MA(gn.document)}return rx}function AR(gn){var rx=gn&&gn.nodeName&&gn.nodeName.toLowerCase();return rx&&(rx==="input"&&(gn.type==="text"||gn.type==="search"||gn.type==="tel"||gn.type==="url"||gn.type==="password")||rx==="textarea"||gn.contentEditable==="true")}var RL=CT&&"documentMode"in document&&11>=document.documentMode,NA=null,CR=null,xC=null,MR=!1;function zD(gn,rx,ux){var dx=ux.window===ux?ux.document:ux.nodeType===9?ux:ux.ownerDocument;MR||NA==null||NA!==MA(dx)||(dx=NA,"selectionStart"in dx&&AR(dx)?dx={start:dx.selectionStart,end:dx.selectionEnd}:(dx=(dx.ownerDocument&&dx.ownerDocument.defaultView||window).getSelection(),dx={anchorNode:dx.anchorNode,anchorOffset:dx.anchorOffset,focusNode:dx.focusNode,focusOffset:dx.focusOffset}),xC&&yC(xC,dx)||(xC=dx,dx=XM(CR,"onSelect"),0<dx.length&&(rx=new uM("onSelect","select",null,rx,ux),gn.push({event:rx,listeners:dx}),rx.target=NA)))}function pA(gn,rx){var ux={};return ux[gn.toLowerCase()]=rx.toLowerCase(),ux["Webkit"+gn]="webkit"+rx,ux["Moz"+gn]="moz"+rx,ux}var LA={animationend:pA("Animation","AnimationEnd"),animationiteration:pA("Animation","AnimationIteration"),animationstart:pA("Animation","AnimationStart"),transitionrun:pA("Transition","TransitionRun"),transitionstart:pA("Transition","TransitionStart"),transitioncancel:pA("Transition","TransitionCancel"),transitionend:pA("Transition","TransitionEnd")},RR={},VD={};CT&&(VD=document.createElement("div").style,"AnimationEvent"in window||(delete LA.animationend.animation,delete LA.animationiteration.animation,delete LA.animationstart.animation),"TransitionEvent"in window||delete LA.transitionend.transition);function dA(gn){if(RR[gn])return RR[gn];if(!LA[gn])return gn;var rx=LA[gn],ux;for(ux in rx)if(rx.hasOwnProperty(ux)&&ux in VD)return RR[gn]=rx[ux];return gn}var HD=dA("animationend"),jD=dA("animationiteration"),ZD=dA("animationstart"),IL=dA("transitionrun"),DL=dA("transitionstart"),OL=dA("transitioncancel"),YD=dA("transitionend"),WD=new Map,IR="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");IR.push("scrollEnd");function yT(gn,rx){WD.set(gn,rx),oS(rx,[gn])}var XD=new WeakMap;function uT(gn,rx){if(typeof gn=="object"&&gn!==null){var ux=XD.get(gn);return ux!==void 0?ux:(rx={value:gn,source:rx,stack:uA(rx)},XD.set(gn,rx),rx)}return{value:gn,source:rx,stack:uA(rx)}}var cT=[],$A=0,DR=0;function pM(){for(var gn=$A,rx=DR=$A=0;rx<gn;){var ux=cT[rx];cT[rx++]=null;var dx=cT[rx];cT[rx++]=null;var xx=cT[rx];cT[rx++]=null;var Tx=cT[rx];if(cT[rx++]=null,dx!==null&&xx!==null){var Dx=dx.pending;Dx===null?xx.next=xx:(xx.next=Dx.next,Dx.next=xx),dx.pending=xx}Tx!==0&&KD(ux,xx,Tx)}}function dM(gn,rx,ux,dx){cT[$A++]=gn,cT[$A++]=rx,cT[$A++]=ux,cT[$A++]=dx,DR|=dx,gn.lanes|=dx,gn=gn.alternate,gn!==null&&(gn.lanes|=dx)}function PR(gn,rx,ux,dx){return dM(gn,rx,ux,dx),hM(gn)}function BA(gn,rx){return dM(gn,null,null,rx),hM(gn)}function KD(gn,rx,ux){gn.lanes|=ux;var dx=gn.alternate;dx!==null&&(dx.lanes|=ux);for(var xx=!1,Tx=gn.return;Tx!==null;)Tx.childLanes|=ux,dx=Tx.alternate,dx!==null&&(dx.childLanes|=ux),Tx.tag===22&&(gn=Tx.stateNode,gn===null||gn._visibility&1||(xx=!0)),gn=Tx,Tx=Tx.return;return gn.tag===3?(Tx=gn.stateNode,xx&&rx!==null&&(xx=31-Qx(ux),gn=Tx.hiddenUpdates,dx=gn[xx],dx===null?gn[xx]=[rx]:dx.push(rx),rx.lane=ux|536870912),Tx):null}function hM(gn){if(50<VC)throw VC=0,UI=null,Error(s(185));for(var rx=gn.return;rx!==null;)gn=rx,rx=gn.return;return gn.tag===3?gn.stateNode:null}var kA={};function PL(gn,rx,ux,dx){this.tag=gn,this.key=ux,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=rx,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=dx,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tT(gn,rx,ux,dx){return new PL(gn,rx,ux,dx)}function NR(gn){return gn=gn.prototype,!(!gn||!gn.isReactComponent)}function MT(gn,rx){var ux=gn.alternate;return ux===null?(ux=tT(gn.tag,rx,gn.key,gn.mode),ux.elementType=gn.elementType,ux.type=gn.type,ux.stateNode=gn.stateNode,ux.alternate=gn,gn.alternate=ux):(ux.pendingProps=rx,ux.type=gn.type,ux.flags=0,ux.subtreeFlags=0,ux.deletions=null),ux.flags=gn.flags&65011712,ux.childLanes=gn.childLanes,ux.lanes=gn.lanes,ux.child=gn.child,ux.memoizedProps=gn.memoizedProps,ux.memoizedState=gn.memoizedState,ux.updateQueue=gn.updateQueue,rx=gn.dependencies,ux.dependencies=rx===null?null:{lanes:rx.lanes,firstContext:rx.firstContext},ux.sibling=gn.sibling,ux.index=gn.index,ux.ref=gn.ref,ux.refCleanup=gn.refCleanup,ux}function QD(gn,rx){gn.flags&=65011714;var ux=gn.alternate;return ux===null?(gn.childLanes=0,gn.lanes=rx,gn.child=null,gn.subtreeFlags=0,gn.memoizedProps=null,gn.memoizedState=null,gn.updateQueue=null,gn.dependencies=null,gn.stateNode=null):(gn.childLanes=ux.childLanes,gn.lanes=ux.lanes,gn.child=ux.child,gn.subtreeFlags=0,gn.deletions=null,gn.memoizedProps=ux.memoizedProps,gn.memoizedState=ux.memoizedState,gn.updateQueue=ux.updateQueue,gn.type=ux.type,rx=ux.dependencies,gn.dependencies=rx===null?null:{lanes:rx.lanes,firstContext:rx.firstContext}),gn}function gM(gn,rx,ux,dx,xx,Tx){var Dx=0;if(dx=gn,typeof gn=="function")NR(gn)&&(Dx=1);else if(typeof gn=="string")Dx=L$(gn,ux,Px.current)?26:gn==="html"||gn==="head"||gn==="body"?27:5;else e:switch(gn){case px:return gn=tT(31,ux,rx,xx),gn.elementType=px,gn.lanes=Tx,gn;case dn:return hA(ux.children,xx,Tx,rx);case Cn:Dx=8,xx|=24;break;case Rn:return gn=tT(12,ux,rx,xx|2),gn.elementType=Rn,gn.lanes=Tx,gn;case cx:return gn=tT(13,ux,rx,xx),gn.elementType=cx,gn.lanes=Tx,gn;case fx:return gn=tT(19,ux,rx,xx),gn.elementType=fx,gn.lanes=Tx,gn;default:if(typeof gn=="object"&&gn!==null)switch(gn.$$typeof){case ax:case sx:Dx=10;break e;case ox:Dx=9;break e;case lx:Dx=11;break e;case gx:Dx=14;break e;case mx:Dx=16,dx=null;break e}Dx=29,ux=Error(s(130,gn===null?"null":typeof gn,"")),dx=null}return rx=tT(Dx,ux,rx,xx),rx.elementType=gn,rx.type=dx,rx.lanes=Tx,rx}function hA(gn,rx,ux,dx){return gn=tT(7,gn,dx,rx),gn.lanes=ux,gn}function LR(gn,rx,ux){return gn=tT(6,gn,null,rx),gn.lanes=ux,gn}function $R(gn,rx,ux){return rx=tT(4,gn.children!==null?gn.children:[],gn.key,rx),rx.lanes=ux,rx.stateNode={containerInfo:gn.containerInfo,pendingChildren:null,implementation:gn.implementation},rx}var FA=[],UA=0,mM=null,vM=0,fT=[],pT=0,gA=null,RT=1,IT="";function mA(gn,rx){FA[UA++]=vM,FA[UA++]=mM,mM=gn,vM=rx}function JD(gn,rx,ux){fT[pT++]=RT,fT[pT++]=IT,fT[pT++]=gA,gA=gn;var dx=RT;gn=IT;var xx=32-Qx(dx)-1;dx&=~(1<<xx),ux+=1;var Tx=32-Qx(rx)+xx;if(30<Tx){var Dx=xx-xx%5;Tx=(dx&(1<<Dx)-1).toString(32),dx>>=Dx,xx-=Dx,RT=1<<32-Qx(rx)+xx|ux<<xx|dx,IT=Tx+gn}else RT=1<<Tx|ux<<xx|dx,IT=gn}function BR(gn){gn.return!==null&&(mA(gn,1),JD(gn,1,0))}function kR(gn){for(;gn===mM;)mM=FA[--UA],FA[UA]=null,vM=FA[--UA],FA[UA]=null;for(;gn===gA;)gA=fT[--pT],fT[pT]=null,IT=fT[--pT],fT[pT]=null,RT=fT[--pT],fT[pT]=null}var jS=null,xS=null,aS=!1,vA=null,ET=!1,FR=Error(s(519));function yA(gn){var rx=Error(s(418,""));throw bC(uT(rx,gn)),FR}function eO(gn){var rx=gn.stateNode,ux=gn.type,dx=gn.memoizedProps;switch(rx[$E]=gn,rx[kE]=dx,ux){case"dialog":JE("cancel",rx),JE("close",rx);break;case"iframe":case"object":case"embed":JE("load",rx);break;case"video":case"audio":for(ux=0;ux<jC.length;ux++)JE(jC[ux],rx);break;case"source":JE("error",rx);break;case"img":case"image":case"link":JE("error",rx),JE("load",rx);break;case"details":JE("toggle",rx);break;case"input":JE("invalid",rx),cC(rx,dx.value,dx.defaultValue,dx.checked,dx.defaultChecked,dx.type,dx.name,!0),CA(rx);break;case"select":JE("invalid",rx);break;case"textarea":JE("invalid",rx),vD(rx,dx.value,dx.defaultValue,dx.children),CA(rx)}ux=dx.children,typeof ux!="string"&&typeof ux!="number"&&typeof ux!="bigint"||rx.textContent===""+ux||dx.suppressHydrationWarning===!0||yN(rx.textContent,ux)?(dx.popover!=null&&(JE("beforetoggle",rx),JE("toggle",rx)),dx.onScroll!=null&&JE("scroll",rx),dx.onScrollEnd!=null&&JE("scrollend",rx),dx.onClick!=null&&(rx.onclick=KM),rx=!0):rx=!1,rx||yA(gn)}function tO(gn){for(jS=gn.return;jS;)switch(jS.tag){case 5:case 13:ET=!1;return;case 27:case 3:ET=!0;return;default:jS=jS.return}}function _C(gn){if(gn!==jS)return!1;if(!aS)return tO(gn),aS=!0,!1;var rx=gn.tag,ux;if((ux=rx!==3&&rx!==27)&&((ux=rx===5)&&(ux=gn.type,ux=!(ux!=="form"&&ux!=="button")||rD(gn.type,gn.memoizedProps)),ux=!ux),ux&&xS&&yA(gn),tO(gn),rx===13){if(gn=gn.memoizedState,gn=gn!==null?gn.dehydrated:null,!gn)throw Error(s(317));e:{for(gn=gn.nextSibling,rx=0;gn;){if(gn.nodeType===8)if(ux=gn.data,ux==="/$"){if(rx===0){xS=_T(gn.nextSibling);break e}rx--}else ux!=="$"&&ux!=="$!"&&ux!=="$?"||rx++;gn=gn.nextSibling}xS=null}}else rx===27?(rx=xS,nA(gn.type)?(gn=oD,oD=null,xS=gn):xS=rx):xS=jS?_T(gn.stateNode.nextSibling):null;return!0}function EC(){xS=jS=null,aS=!1}function rO(){var gn=vA;return gn!==null&&(QS===null?QS=gn:QS.push.apply(QS,gn),vA=null),gn}function bC(gn){vA===null?vA=[gn]:vA.push(gn)}var UR=Lx(null),xA=null,DT=null;function GT(gn,rx,ux){Ix(UR,rx._currentValue),rx._currentValue=ux}function OT(gn){gn._currentValue=UR.current,qx(UR)}function qR(gn,rx,ux){for(;gn!==null;){var dx=gn.alternate;if((gn.childLanes&rx)!==rx?(gn.childLanes|=rx,dx!==null&&(dx.childLanes|=rx)):dx!==null&&(dx.childLanes&rx)!==rx&&(dx.childLanes|=rx),gn===ux)break;gn=gn.return}}function GR(gn,rx,ux,dx){var xx=gn.child;for(xx!==null&&(xx.return=gn);xx!==null;){var Tx=xx.dependencies;if(Tx!==null){var Dx=xx.child;Tx=Tx.firstContext;e:for(;Tx!==null;){var zx=Tx;Tx=xx;for(var Jx=0;Jx<rx.length;Jx++)if(zx.context===rx[Jx]){Tx.lanes|=ux,zx=Tx.alternate,zx!==null&&(zx.lanes|=ux),qR(Tx.return,ux,gn),dx||(Dx=null);break e}Tx=zx.next}}else if(xx.tag===18){if(Dx=xx.return,Dx===null)throw Error(s(341));Dx.lanes|=ux,Tx=Dx.alternate,Tx!==null&&(Tx.lanes|=ux),qR(Dx,ux,gn),Dx=null}else Dx=xx.child;if(Dx!==null)Dx.return=xx;else for(Dx=xx;Dx!==null;){if(Dx===gn){Dx=null;break}if(xx=Dx.sibling,xx!==null){xx.return=Dx.return,Dx=xx;break}Dx=Dx.return}xx=Dx}}function SC(gn,rx,ux,dx){gn=null;for(var xx=rx,Tx=!1;xx!==null;){if(!Tx){if((xx.flags&524288)!==0)Tx=!0;else if((xx.flags&262144)!==0)break}if(xx.tag===10){var Dx=xx.alternate;if(Dx===null)throw Error(s(387));if(Dx=Dx.memoizedProps,Dx!==null){var zx=xx.type;eT(xx.pendingProps.value,Dx.value)||(gn!==null?gn.push(zx):gn=[zx])}}else if(xx===$x.current){if(Dx=xx.alternate,Dx===null)throw Error(s(387));Dx.memoizedState.memoizedState!==xx.memoizedState.memoizedState&&(gn!==null?gn.push(QC):gn=[QC])}xx=xx.return}gn!==null&&GR(rx,gn,ux,dx),rx.flags|=262144}function yM(gn){for(gn=gn.firstContext;gn!==null;){if(!eT(gn.context._currentValue,gn.memoizedValue))return!0;gn=gn.next}return!1}function _A(gn){xA=gn,DT=null,gn=gn.dependencies,gn!==null&&(gn.firstContext=null)}function zS(gn){return nO(xA,gn)}function xM(gn,rx){return xA===null&&_A(gn),nO(gn,rx)}function nO(gn,rx){var ux=rx._currentValue;if(rx={context:rx,memoizedValue:ux,next:null},DT===null){if(gn===null)throw Error(s(308));DT=rx,gn.dependencies={lanes:0,firstContext:rx},gn.flags|=524288}else DT=DT.next=rx;return ux}var NL=typeof AbortController<"u"?AbortController:function(){var gn=[],rx=this.signal={aborted:!1,addEventListener:function(ux,dx){gn.push(dx)}};this.abort=function(){rx.aborted=!0,gn.forEach(function(ux){return ux()})}},LL=t.unstable_scheduleCallback,$L=t.unstable_NormalPriority,RS={$$typeof:sx,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zR(){return{controller:new NL,data:new Map,refCount:0}}function wC(gn){gn.refCount--,gn.refCount===0&&LL($L,function(){gn.controller.abort()})}var TC=null,VR=0,qA=0,GA=null;function BL(gn,rx){if(TC===null){var ux=TC=[];VR=0,qA=ZI(),GA={status:"pending",value:void 0,then:function(dx){ux.push(dx)}}}return VR++,rx.then(iO,iO),rx}function iO(){if(--VR===0&&TC!==null){GA!==null&&(GA.status="fulfilled");var gn=TC;TC=null,qA=0,GA=null;for(var rx=0;rx<gn.length;rx++)(0,gn[rx])()}}function kL(gn,rx){var ux=[],dx={status:"pending",value:null,reason:null,then:function(xx){ux.push(xx)}};return gn.then(function(){dx.status="fulfilled",dx.value=rx;for(var xx=0;xx<ux.length;xx++)(0,ux[xx])(rx)},function(xx){for(dx.status="rejected",dx.reason=xx,xx=0;xx<ux.length;xx++)(0,ux[xx])(void 0)}),dx}var aO=bx.S;bx.S=function(gn,rx){typeof rx=="object"&&rx!==null&&typeof rx.then=="function"&&BL(gn,rx),aO!==null&&aO(gn,rx)};var EA=Lx(null);function HR(){var gn=EA.current;return gn!==null?gn:dS.pooledCache}function _M(gn,rx){rx===null?Ix(EA,EA.current):Ix(EA,rx.pool)}function oO(){var gn=HR();return gn===null?null:{parent:RS._currentValue,pool:gn}}var AC=Error(s(460)),sO=Error(s(474)),EM=Error(s(542)),jR={then:function(){}};function lO(gn){return gn=gn.status,gn==="fulfilled"||gn==="rejected"}function bM(){}function uO(gn,rx,ux){switch(ux=gn[ux],ux===void 0?gn.push(rx):ux!==rx&&(rx.then(bM,bM),rx=ux),rx.status){case"fulfilled":return rx.value;case"rejected":throw gn=rx.reason,fO(gn),gn;default:if(typeof rx.status=="string")rx.then(bM,bM);else{if(gn=dS,gn!==null&&100<gn.shellSuspendCounter)throw Error(s(482));gn=rx,gn.status="pending",gn.then(function(dx){if(rx.status==="pending"){var xx=rx;xx.status="fulfilled",xx.value=dx}},function(dx){if(rx.status==="pending"){var xx=rx;xx.status="rejected",xx.reason=dx}})}switch(rx.status){case"fulfilled":return rx.value;case"rejected":throw gn=rx.reason,fO(gn),gn}throw CC=rx,AC}}var CC=null;function cO(){if(CC===null)throw Error(s(459));var gn=CC;return CC=null,gn}function fO(gn){if(gn===AC||gn===EM)throw Error(s(483))}var zT=!1;function ZR(gn){gn.updateQueue={baseState:gn.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function YR(gn,rx){gn=gn.updateQueue,rx.updateQueue===gn&&(rx.updateQueue={baseState:gn.baseState,firstBaseUpdate:gn.firstBaseUpdate,lastBaseUpdate:gn.lastBaseUpdate,shared:gn.shared,callbacks:null})}function VT(gn){return{lane:gn,tag:0,payload:null,callback:null,next:null}}function HT(gn,rx,ux){var dx=gn.updateQueue;if(dx===null)return null;if(dx=dx.shared,(sS&2)!==0){var xx=dx.pending;return xx===null?rx.next=rx:(rx.next=xx.next,xx.next=rx),dx.pending=rx,rx=hM(gn),KD(gn,null,ux),rx}return dM(gn,dx,rx,ux),hM(gn)}function MC(gn,rx,ux){if(rx=rx.updateQueue,rx!==null&&(rx=rx.shared,(ux&4194048)!==0)){var dx=rx.lanes;dx&=gn.pendingLanes,ux|=dx,rx.lanes=ux,Ux(gn,ux)}}function WR(gn,rx){var ux=gn.updateQueue,dx=gn.alternate;if(dx!==null&&(dx=dx.updateQueue,ux===dx)){var xx=null,Tx=null;if(ux=ux.firstBaseUpdate,ux!==null){do{var Dx={lane:ux.lane,tag:ux.tag,payload:ux.payload,callback:null,next:null};Tx===null?xx=Tx=Dx:Tx=Tx.next=Dx,ux=ux.next}while(ux!==null);Tx===null?xx=Tx=rx:Tx=Tx.next=rx}else xx=Tx=rx;ux={baseState:dx.baseState,firstBaseUpdate:xx,lastBaseUpdate:Tx,shared:dx.shared,callbacks:dx.callbacks},gn.updateQueue=ux;return}gn=ux.lastBaseUpdate,gn===null?ux.firstBaseUpdate=rx:gn.next=rx,ux.lastBaseUpdate=rx}var XR=!1;function RC(){if(XR){var gn=GA;if(gn!==null)throw gn}}function IC(gn,rx,ux,dx){XR=!1;var xx=gn.updateQueue;zT=!1;var Tx=xx.firstBaseUpdate,Dx=xx.lastBaseUpdate,zx=xx.shared.pending;if(zx!==null){xx.shared.pending=null;var Jx=zx,fE=Jx.next;Jx.next=null,Dx===null?Tx=fE:Dx.next=fE,Dx=Jx;var xE=gn.alternate;xE!==null&&(xE=xE.updateQueue,zx=xE.lastBaseUpdate,zx!==Dx&&(zx===null?xE.firstBaseUpdate=fE:zx.next=fE,xE.lastBaseUpdate=Jx))}if(Tx!==null){var TE=xx.baseState;Dx=0,xE=fE=Jx=null,zx=Tx;do{var pE=zx.lane&-536870913,dE=pE!==zx.lane;if(dE?(tS&pE)===pE:(dx&pE)===pE){pE!==0&&pE===qA&&(XR=!0),xE!==null&&(xE=xE.next={lane:0,tag:zx.tag,payload:zx.payload,callback:null,next:null});e:{var jE=gn,VE=zx;pE=rx;var fS=ux;switch(VE.tag){case 1:if(jE=VE.payload,typeof jE=="function"){TE=jE.call(fS,TE,pE);break e}TE=jE;break e;case 3:jE.flags=jE.flags&-65537|128;case 0:if(jE=VE.payload,pE=typeof jE=="function"?jE.call(fS,TE,pE):jE,pE==null)break e;TE=en({},TE,pE);break e;case 2:zT=!0}}pE=zx.callback,pE!==null&&(gn.flags|=64,dE&&(gn.flags|=8192),dE=xx.callbacks,dE===null?xx.callbacks=[pE]:dE.push(pE))}else dE={lane:pE,tag:zx.tag,payload:zx.payload,callback:zx.callback,next:null},xE===null?(fE=xE=dE,Jx=TE):xE=xE.next=dE,Dx|=pE;if(zx=zx.next,zx===null){if(zx=xx.shared.pending,zx===null)break;dE=zx,zx=dE.next,dE.next=null,xx.lastBaseUpdate=dE,xx.shared.pending=null}}while(!0);xE===null&&(Jx=TE),xx.baseState=Jx,xx.firstBaseUpdate=fE,xx.lastBaseUpdate=xE,Tx===null&&(xx.shared.lanes=0),JT|=Dx,gn.lanes=Dx,gn.memoizedState=TE}}function pO(gn,rx){if(typeof gn!="function")throw Error(s(191,gn));gn.call(rx)}function dO(gn,rx){var ux=gn.callbacks;if(ux!==null)for(gn.callbacks=null,gn=0;gn<ux.length;gn++)pO(ux[gn],rx)}var zA=Lx(null),SM=Lx(0);function hO(gn,rx){gn=FT,Ix(SM,gn),Ix(zA,rx),FT=gn|rx.baseLanes}function KR(){Ix(SM,FT),Ix(zA,zA.current)}function QR(){FT=SM.current,qx(zA),qx(SM)}var jT=0,XE=null,uS=null,TS=null,wM=!1,VA=!1,bA=!1,TM=0,DC=0,HA=null,FL=0;function bS(){throw Error(s(321))}function JR(gn,rx){if(rx===null)return!1;for(var ux=0;ux<rx.length&&ux<gn.length;ux++)if(!eT(gn[ux],rx[ux]))return!1;return!0}function eI(gn,rx,ux,dx,xx,Tx){return jT=Tx,XE=rx,rx.memoizedState=null,rx.updateQueue=null,rx.lanes=0,bx.H=gn===null||gn.memoizedState===null?QO:JO,bA=!1,Tx=ux(dx,xx),bA=!1,VA&&(Tx=mO(rx,ux,dx,xx)),gO(gn),Tx}function gO(gn){bx.H=DM;var rx=uS!==null&&uS.next!==null;if(jT=0,TS=uS=XE=null,wM=!1,DC=0,HA=null,rx)throw Error(s(300));gn===null||DS||(gn=gn.dependencies,gn!==null&&yM(gn)&&(DS=!0))}function mO(gn,rx,ux,dx){XE=gn;var xx=0;do{if(VA&&(HA=null),DC=0,VA=!1,25<=xx)throw Error(s(301));if(xx+=1,TS=uS=null,gn.updateQueue!=null){var Tx=gn.updateQueue;Tx.lastEffect=null,Tx.events=null,Tx.stores=null,Tx.memoCache!=null&&(Tx.memoCache.index=0)}bx.H=jL,Tx=rx(ux,dx)}while(VA);return Tx}function UL(){var gn=bx.H,rx=gn.useState()[0];return rx=typeof rx.then=="function"?OC(rx):rx,gn=gn.useState()[0],(uS!==null?uS.memoizedState:null)!==gn&&(XE.flags|=1024),rx}function tI(){var gn=TM!==0;return TM=0,gn}function rI(gn,rx,ux){rx.updateQueue=gn.updateQueue,rx.flags&=-2053,gn.lanes&=~ux}function nI(gn){if(wM){for(gn=gn.memoizedState;gn!==null;){var rx=gn.queue;rx!==null&&(rx.pending=null),gn=gn.next}wM=!1}jT=0,TS=uS=XE=null,VA=!1,DC=TM=0,HA=null}function XS(){var gn={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return TS===null?XE.memoizedState=TS=gn:TS=TS.next=gn,TS}function AS(){if(uS===null){var gn=XE.alternate;gn=gn!==null?gn.memoizedState:null}else gn=uS.next;var rx=TS===null?XE.memoizedState:TS.next;if(rx!==null)TS=rx,uS=gn;else{if(gn===null)throw XE.alternate===null?Error(s(467)):Error(s(310));uS=gn,gn={memoizedState:uS.memoizedState,baseState:uS.baseState,baseQueue:uS.baseQueue,queue:uS.queue,next:null},TS===null?XE.memoizedState=TS=gn:TS=TS.next=gn}return TS}function iI(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function OC(gn){var rx=DC;return DC+=1,HA===null&&(HA=[]),gn=uO(HA,gn,rx),rx=XE,(TS===null?rx.memoizedState:TS.next)===null&&(rx=rx.alternate,bx.H=rx===null||rx.memoizedState===null?QO:JO),gn}function AM(gn){if(gn!==null&&typeof gn=="object"){if(typeof gn.then=="function")return OC(gn);if(gn.$$typeof===sx)return zS(gn)}throw Error(s(438,String(gn)))}function aI(gn){var rx=null,ux=XE.updateQueue;if(ux!==null&&(rx=ux.memoCache),rx==null){var dx=XE.alternate;dx!==null&&(dx=dx.updateQueue,dx!==null&&(dx=dx.memoCache,dx!=null&&(rx={data:dx.data.map(function(xx){return xx.slice()}),index:0})))}if(rx==null&&(rx={data:[],index:0}),ux===null&&(ux=iI(),XE.updateQueue=ux),ux.memoCache=rx,ux=rx.data[rx.index],ux===void 0)for(ux=rx.data[rx.index]=Array(gn),dx=0;dx<gn;dx++)ux[dx]=hx;return rx.index++,ux}function PT(gn,rx){return typeof rx=="function"?rx(gn):rx}function CM(gn){var rx=AS();return oI(rx,uS,gn)}function oI(gn,rx,ux){var dx=gn.queue;if(dx===null)throw Error(s(311));dx.lastRenderedReducer=ux;var xx=gn.baseQueue,Tx=dx.pending;if(Tx!==null){if(xx!==null){var Dx=xx.next;xx.next=Tx.next,Tx.next=Dx}rx.baseQueue=xx=Tx,dx.pending=null}if(Tx=gn.baseState,xx===null)gn.memoizedState=Tx;else{rx=xx.next;var zx=Dx=null,Jx=null,fE=rx,xE=!1;do{var TE=fE.lane&-536870913;if(TE!==fE.lane?(tS&TE)===TE:(jT&TE)===TE){var pE=fE.revertLane;if(pE===0)Jx!==null&&(Jx=Jx.next={lane:0,revertLane:0,action:fE.action,hasEagerState:fE.hasEagerState,eagerState:fE.eagerState,next:null}),TE===qA&&(xE=!0);else if((jT&pE)===pE){fE=fE.next,pE===qA&&(xE=!0);continue}else TE={lane:0,revertLane:fE.revertLane,action:fE.action,hasEagerState:fE.hasEagerState,eagerState:fE.eagerState,next:null},Jx===null?(zx=Jx=TE,Dx=Tx):Jx=Jx.next=TE,XE.lanes|=pE,JT|=pE;TE=fE.action,bA&&ux(Tx,TE),Tx=fE.hasEagerState?fE.eagerState:ux(Tx,TE)}else pE={lane:TE,revertLane:fE.revertLane,action:fE.action,hasEagerState:fE.hasEagerState,eagerState:fE.eagerState,next:null},Jx===null?(zx=Jx=pE,Dx=Tx):Jx=Jx.next=pE,XE.lanes|=TE,JT|=TE;fE=fE.next}while(fE!==null&&fE!==rx);if(Jx===null?Dx=Tx:Jx.next=zx,!eT(Tx,gn.memoizedState)&&(DS=!0,xE&&(ux=GA,ux!==null)))throw ux;gn.memoizedState=Tx,gn.baseState=Dx,gn.baseQueue=Jx,dx.lastRenderedState=Tx}return xx===null&&(dx.lanes=0),[gn.memoizedState,dx.dispatch]}function sI(gn){var rx=AS(),ux=rx.queue;if(ux===null)throw Error(s(311));ux.lastRenderedReducer=gn;var dx=ux.dispatch,xx=ux.pending,Tx=rx.memoizedState;if(xx!==null){ux.pending=null;var Dx=xx=xx.next;do Tx=gn(Tx,Dx.action),Dx=Dx.next;while(Dx!==xx);eT(Tx,rx.memoizedState)||(DS=!0),rx.memoizedState=Tx,rx.baseQueue===null&&(rx.baseState=Tx),ux.lastRenderedState=Tx}return[Tx,dx]}function vO(gn,rx,ux){var dx=XE,xx=AS(),Tx=aS;if(Tx){if(ux===void 0)throw Error(s(407));ux=ux()}else ux=rx();var Dx=!eT((uS||xx).memoizedState,ux);Dx&&(xx.memoizedState=ux,DS=!0),xx=xx.queue;var zx=_O.bind(null,dx,xx,gn);if(PC(2048,8,zx,[gn]),xx.getSnapshot!==rx||Dx||TS!==null&&TS.memoizedState.tag&1){if(dx.flags|=2048,jA(9,MM(),xO.bind(null,dx,xx,ux,rx),null),dS===null)throw Error(s(349));Tx||(jT&124)!==0||yO(dx,rx,ux)}return ux}function yO(gn,rx,ux){gn.flags|=16384,gn={getSnapshot:rx,value:ux},rx=XE.updateQueue,rx===null?(rx=iI(),XE.updateQueue=rx,rx.stores=[gn]):(ux=rx.stores,ux===null?rx.stores=[gn]:ux.push(gn))}function xO(gn,rx,ux,dx){rx.value=ux,rx.getSnapshot=dx,EO(rx)&&bO(gn)}function _O(gn,rx,ux){return ux(function(){EO(rx)&&bO(gn)})}function EO(gn){var rx=gn.getSnapshot;gn=gn.value;try{var ux=rx();return!eT(gn,ux)}catch{return!0}}function bO(gn){var rx=BA(gn,2);rx!==null&&oT(rx,gn,2)}function lI(gn){var rx=XS();if(typeof gn=="function"){var ux=gn;if(gn=ux(),bA){Wx(!0);try{ux()}finally{Wx(!1)}}}return rx.memoizedState=rx.baseState=gn,rx.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:PT,lastRenderedState:gn},rx}function SO(gn,rx,ux,dx){return gn.baseState=ux,oI(gn,uS,typeof dx=="function"?dx:PT)}function qL(gn,rx,ux,dx,xx){if(IM(gn))throw Error(s(485));if(gn=rx.action,gn!==null){var Tx={payload:xx,action:gn,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Dx){Tx.listeners.push(Dx)}};bx.T!==null?ux(!0):Tx.isTransition=!1,dx(Tx),ux=rx.pending,ux===null?(Tx.next=rx.pending=Tx,wO(rx,Tx)):(Tx.next=ux.next,rx.pending=ux.next=Tx)}}function wO(gn,rx){var ux=rx.action,dx=rx.payload,xx=gn.state;if(rx.isTransition){var Tx=bx.T,Dx={};bx.T=Dx;try{var zx=ux(xx,dx),Jx=bx.S;Jx!==null&&Jx(Dx,zx),TO(gn,rx,zx)}catch(fE){uI(gn,rx,fE)}finally{bx.T=Tx}}else try{Tx=ux(xx,dx),TO(gn,rx,Tx)}catch(fE){uI(gn,rx,fE)}}function TO(gn,rx,ux){ux!==null&&typeof ux=="object"&&typeof ux.then=="function"?ux.then(function(dx){AO(gn,rx,dx)},function(dx){return uI(gn,rx,dx)}):AO(gn,rx,ux)}function AO(gn,rx,ux){rx.status="fulfilled",rx.value=ux,CO(rx),gn.state=ux,rx=gn.pending,rx!==null&&(ux=rx.next,ux===rx?gn.pending=null:(ux=ux.next,rx.next=ux,wO(gn,ux)))}function uI(gn,rx,ux){var dx=gn.pending;if(gn.pending=null,dx!==null){dx=dx.next;do rx.status="rejected",rx.reason=ux,CO(rx),rx=rx.next;while(rx!==dx)}gn.action=null}function CO(gn){gn=gn.listeners;for(var rx=0;rx<gn.length;rx++)(0,gn[rx])()}function MO(gn,rx){return rx}function RO(gn,rx){if(aS){var ux=dS.formState;if(ux!==null){e:{var dx=XE;if(aS){if(xS){t:{for(var xx=xS,Tx=ET;xx.nodeType!==8;){if(!Tx){xx=null;break t}if(xx=_T(xx.nextSibling),xx===null){xx=null;break t}}Tx=xx.data,xx=Tx==="F!"||Tx==="F"?xx:null}if(xx){xS=_T(xx.nextSibling),dx=xx.data==="F!";break e}}yA(dx)}dx=!1}dx&&(rx=ux[0])}}return ux=XS(),ux.memoizedState=ux.baseState=rx,dx={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MO,lastRenderedState:rx},ux.queue=dx,ux=WO.bind(null,XE,dx),dx.dispatch=ux,dx=lI(!1),Tx=hI.bind(null,XE,!1,dx.queue),dx=XS(),xx={state:rx,dispatch:null,action:gn,pending:null},dx.queue=xx,ux=qL.bind(null,XE,xx,Tx,ux),xx.dispatch=ux,dx.memoizedState=gn,[rx,ux,!1]}function IO(gn){var rx=AS();return OO(rx,uS,gn)}function OO(gn,rx,ux){if(rx=oI(gn,rx,MO)[0],gn=CM(PT)[0],typeof rx=="object"&&rx!==null&&typeof rx.then=="function")try{var dx=OC(rx)}catch(Dx){throw Dx===AC?EM:Dx}else dx=rx;rx=AS();var xx=rx.queue,Tx=xx.dispatch;return ux!==rx.memoizedState&&(XE.flags|=2048,jA(9,MM(),GL.bind(null,xx,ux),null)),[dx,Tx,gn]}function GL(gn,rx){gn.action=rx}function PO(gn){var rx=AS(),ux=uS;if(ux!==null)return OO(rx,ux,gn);AS(),rx=rx.memoizedState,ux=AS();var dx=ux.queue.dispatch;return ux.memoizedState=gn,[rx,dx,!1]}function jA(gn,rx,ux,dx){return gn={tag:gn,create:ux,deps:dx,inst:rx,next:null},rx=XE.updateQueue,rx===null&&(rx=iI(),XE.updateQueue=rx),ux=rx.lastEffect,ux===null?rx.lastEffect=gn.next=gn:(dx=ux.next,ux.next=gn,gn.next=dx,rx.lastEffect=gn),gn}function MM(){return{destroy:void 0,resource:void 0}}function NO(){return AS().memoizedState}function RM(gn,rx,ux,dx){var xx=XS();dx=dx===void 0?null:dx,XE.flags|=gn,xx.memoizedState=jA(1|rx,MM(),ux,dx)}function PC(gn,rx,ux,dx){var xx=AS();dx=dx===void 0?null:dx;var Tx=xx.memoizedState.inst;uS!==null&&dx!==null&&JR(dx,uS.memoizedState.deps)?xx.memoizedState=jA(rx,Tx,ux,dx):(XE.flags|=gn,xx.memoizedState=jA(1|rx,Tx,ux,dx))}function LO(gn,rx){RM(8390656,8,gn,rx)}function $O(gn,rx){PC(2048,8,gn,rx)}function BO(gn,rx){return PC(4,2,gn,rx)}function kO(gn,rx){return PC(4,4,gn,rx)}function FO(gn,rx){if(typeof rx=="function"){gn=gn();var ux=rx(gn);return function(){typeof ux=="function"?ux():rx(null)}}if(rx!=null)return gn=gn(),rx.current=gn,function(){rx.current=null}}function UO(gn,rx,ux){ux=ux!=null?ux.concat([gn]):null,PC(4,4,FO.bind(null,rx,gn),ux)}function cI(){}function qO(gn,rx){var ux=AS();rx=rx===void 0?null:rx;var dx=ux.memoizedState;return rx!==null&&JR(rx,dx[1])?dx[0]:(ux.memoizedState=[gn,rx],gn)}function GO(gn,rx){var ux=AS();rx=rx===void 0?null:rx;var dx=ux.memoizedState;if(rx!==null&&JR(rx,dx[1]))return dx[0];if(dx=gn(),bA){Wx(!0);try{gn()}finally{Wx(!1)}}return ux.memoizedState=[dx,rx],dx}function fI(gn,rx,ux){return ux===void 0||(jT&1073741824)!==0?gn.memoizedState=rx:(gn.memoizedState=ux,gn=HP(),XE.lanes|=gn,JT|=gn,ux)}function zO(gn,rx,ux,dx){return eT(ux,rx)?ux:zA.current!==null?(gn=fI(gn,ux,dx),eT(gn,rx)||(DS=!0),gn):(jT&42)===0?(DS=!0,gn.memoizedState=ux):(gn=HP(),XE.lanes|=gn,JT|=gn,rx)}function VO(gn,rx,ux,dx,xx){var Tx=Ax.p;Ax.p=Tx!==0&&8>Tx?Tx:8;var Dx=bx.T,zx={};bx.T=zx,hI(gn,!1,rx,ux);try{var Jx=xx(),fE=bx.S;if(fE!==null&&fE(zx,Jx),Jx!==null&&typeof Jx=="object"&&typeof Jx.then=="function"){var xE=kL(Jx,dx);NC(gn,rx,xE,aT(gn))}else NC(gn,rx,dx,aT(gn))}catch(TE){NC(gn,rx,{then:function(){},status:"rejected",reason:TE},aT())}finally{Ax.p=Tx,bx.T=Dx}}function zL(){}function pI(gn,rx,ux,dx){if(gn.tag!==5)throw Error(s(476));var xx=HO(gn).queue;VO(gn,xx,rx,Mx,ux===null?zL:function(){return jO(gn),ux(dx)})}function HO(gn){var rx=gn.memoizedState;if(rx!==null)return rx;rx={memoizedState:Mx,baseState:Mx,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:PT,lastRenderedState:Mx},next:null};var ux={};return rx.next={memoizedState:ux,baseState:ux,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:PT,lastRenderedState:ux},next:null},gn.memoizedState=rx,gn=gn.alternate,gn!==null&&(gn.memoizedState=rx),rx}function jO(gn){var rx=HO(gn).next.queue;NC(gn,rx,{},aT())}function dI(){return zS(QC)}function ZO(){return AS().memoizedState}function YO(){return AS().memoizedState}function VL(gn){for(var rx=gn.return;rx!==null;){switch(rx.tag){case 24:case 3:var ux=aT();gn=VT(ux);var dx=HT(rx,gn,ux);dx!==null&&(oT(dx,rx,ux),MC(dx,rx,ux)),rx={cache:zR()},gn.payload=rx;return}rx=rx.return}}function HL(gn,rx,ux){var dx=aT();ux={lane:dx,revertLane:0,action:ux,hasEagerState:!1,eagerState:null,next:null},IM(gn)?XO(rx,ux):(ux=PR(gn,rx,ux,dx),ux!==null&&(oT(ux,gn,dx),KO(ux,rx,dx)))}function WO(gn,rx,ux){var dx=aT();NC(gn,rx,ux,dx)}function NC(gn,rx,ux,dx){var xx={lane:dx,revertLane:0,action:ux,hasEagerState:!1,eagerState:null,next:null};if(IM(gn))XO(rx,xx);else{var Tx=gn.alternate;if(gn.lanes===0&&(Tx===null||Tx.lanes===0)&&(Tx=rx.lastRenderedReducer,Tx!==null))try{var Dx=rx.lastRenderedState,zx=Tx(Dx,ux);if(xx.hasEagerState=!0,xx.eagerState=zx,eT(zx,Dx))return dM(gn,rx,xx,0),dS===null&&pM(),!1}catch{}finally{}if(ux=PR(gn,rx,xx,dx),ux!==null)return oT(ux,gn,dx),KO(ux,rx,dx),!0}return!1}function hI(gn,rx,ux,dx){if(dx={lane:2,revertLane:ZI(),action:dx,hasEagerState:!1,eagerState:null,next:null},IM(gn)){if(rx)throw Error(s(479))}else rx=PR(gn,ux,dx,2),rx!==null&&oT(rx,gn,2)}function IM(gn){var rx=gn.alternate;return gn===XE||rx!==null&&rx===XE}function XO(gn,rx){VA=wM=!0;var ux=gn.pending;ux===null?rx.next=rx:(rx.next=ux.next,ux.next=rx),gn.pending=rx}function KO(gn,rx,ux){if((ux&4194048)!==0){var dx=rx.lanes;dx&=gn.pendingLanes,ux|=dx,rx.lanes=ux,Ux(gn,ux)}}var DM={readContext:zS,use:AM,useCallback:bS,useContext:bS,useEffect:bS,useImperativeHandle:bS,useLayoutEffect:bS,useInsertionEffect:bS,useMemo:bS,useReducer:bS,useRef:bS,useState:bS,useDebugValue:bS,useDeferredValue:bS,useTransition:bS,useSyncExternalStore:bS,useId:bS,useHostTransitionStatus:bS,useFormState:bS,useActionState:bS,useOptimistic:bS,useMemoCache:bS,useCacheRefresh:bS},QO={readContext:zS,use:AM,useCallback:function(gn,rx){return XS().memoizedState=[gn,rx===void 0?null:rx],gn},useContext:zS,useEffect:LO,useImperativeHandle:function(gn,rx,ux){ux=ux!=null?ux.concat([gn]):null,RM(4194308,4,FO.bind(null,rx,gn),ux)},useLayoutEffect:function(gn,rx){return RM(4194308,4,gn,rx)},useInsertionEffect:function(gn,rx){RM(4,2,gn,rx)},useMemo:function(gn,rx){var ux=XS();rx=rx===void 0?null:rx;var dx=gn();if(bA){Wx(!0);try{gn()}finally{Wx(!1)}}return ux.memoizedState=[dx,rx],dx},useReducer:function(gn,rx,ux){var dx=XS();if(ux!==void 0){var xx=ux(rx);if(bA){Wx(!0);try{ux(rx)}finally{Wx(!1)}}}else xx=rx;return dx.memoizedState=dx.baseState=xx,gn={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:xx},dx.queue=gn,gn=gn.dispatch=HL.bind(null,XE,gn),[dx.memoizedState,gn]},useRef:function(gn){var rx=XS();return gn={current:gn},rx.memoizedState=gn},useState:function(gn){gn=lI(gn);var rx=gn.queue,ux=WO.bind(null,XE,rx);return rx.dispatch=ux,[gn.memoizedState,ux]},useDebugValue:cI,useDeferredValue:function(gn,rx){var ux=XS();return fI(ux,gn,rx)},useTransition:function(){var gn=lI(!1);return gn=VO.bind(null,XE,gn.queue,!0,!1),XS().memoizedState=gn,[!1,gn]},useSyncExternalStore:function(gn,rx,ux){var dx=XE,xx=XS();if(aS){if(ux===void 0)throw Error(s(407));ux=ux()}else{if(ux=rx(),dS===null)throw Error(s(349));(tS&124)!==0||yO(dx,rx,ux)}xx.memoizedState=ux;var Tx={value:ux,getSnapshot:rx};return xx.queue=Tx,LO(_O.bind(null,dx,Tx,gn),[gn]),dx.flags|=2048,jA(9,MM(),xO.bind(null,dx,Tx,ux,rx),null),ux},useId:function(){var gn=XS(),rx=dS.identifierPrefix;if(aS){var ux=IT,dx=RT;ux=(dx&~(1<<32-Qx(dx)-1)).toString(32)+ux,rx=""+rx+"R"+ux,ux=TM++,0<ux&&(rx+="H"+ux.toString(32)),rx+=""}else ux=FL++,rx=""+rx+"r"+ux.toString(32)+"";return gn.memoizedState=rx},useHostTransitionStatus:dI,useFormState:RO,useActionState:RO,useOptimistic:function(gn){var rx=XS();rx.memoizedState=rx.baseState=gn;var ux={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return rx.queue=ux,rx=hI.bind(null,XE,!0,ux),ux.dispatch=rx,[gn,rx]},useMemoCache:aI,useCacheRefresh:function(){return XS().memoizedState=VL.bind(null,XE)}},JO={readContext:zS,use:AM,useCallback:qO,useContext:zS,useEffect:$O,useImperativeHandle:UO,useInsertionEffect:BO,useLayoutEffect:kO,useMemo:GO,useReducer:CM,useRef:NO,useState:function(){return CM(PT)},useDebugValue:cI,useDeferredValue:function(gn,rx){var ux=AS();return zO(ux,uS.memoizedState,gn,rx)},useTransition:function(){var gn=CM(PT)[0],rx=AS().memoizedState;return[typeof gn=="boolean"?gn:OC(gn),rx]},useSyncExternalStore:vO,useId:ZO,useHostTransitionStatus:dI,useFormState:IO,useActionState:IO,useOptimistic:function(gn,rx){var ux=AS();return SO(ux,uS,gn,rx)},useMemoCache:aI,useCacheRefresh:YO},jL={readContext:zS,use:AM,useCallback:qO,useContext:zS,useEffect:$O,useImperativeHandle:UO,useInsertionEffect:BO,useLayoutEffect:kO,useMemo:GO,useReducer:sI,useRef:NO,useState:function(){return sI(PT)},useDebugValue:cI,useDeferredValue:function(gn,rx){var ux=AS();return uS===null?fI(ux,gn,rx):zO(ux,uS.memoizedState,gn,rx)},useTransition:function(){var gn=sI(PT)[0],rx=AS().memoizedState;return[typeof gn=="boolean"?gn:OC(gn),rx]},useSyncExternalStore:vO,useId:ZO,useHostTransitionStatus:dI,useFormState:PO,useActionState:PO,useOptimistic:function(gn,rx){var ux=AS();return uS!==null?SO(ux,uS,gn,rx):(ux.baseState=gn,[gn,ux.queue.dispatch])},useMemoCache:aI,useCacheRefresh:YO},ZA=null,LC=0;function OM(gn){var rx=LC;return LC+=1,ZA===null&&(ZA=[]),uO(ZA,gn,rx)}function $C(gn,rx){rx=rx.props.ref,gn.ref=rx!==void 0?rx:null}function PM(gn,rx){throw rx.$$typeof===tn?Error(s(525)):(gn=Object.prototype.toString.call(rx),Error(s(31,gn==="[object Object]"?"object with keys {"+Object.keys(rx).join(", ")+"}":gn)))}function eP(gn){var rx=gn._init;return rx(gn._payload)}function tP(gn){function rx(sE,nE){if(gn){var cE=sE.deletions;cE===null?(sE.deletions=[nE],sE.flags|=16):cE.push(nE)}}function ux(sE,nE){if(!gn)return null;for(;nE!==null;)rx(sE,nE),nE=nE.sibling;return null}function dx(sE){for(var nE=new Map;sE!==null;)sE.key!==null?nE.set(sE.key,sE):nE.set(sE.index,sE),sE=sE.sibling;return nE}function xx(sE,nE){return sE=MT(sE,nE),sE.index=0,sE.sibling=null,sE}function Tx(sE,nE,cE){return sE.index=cE,gn?(cE=sE.alternate,cE!==null?(cE=cE.index,cE<nE?(sE.flags|=67108866,nE):cE):(sE.flags|=67108866,nE)):(sE.flags|=1048576,nE)}function Dx(sE){return gn&&sE.alternate===null&&(sE.flags|=67108866),sE}function zx(sE,nE,cE,EE){return nE===null||nE.tag!==6?(nE=LR(cE,sE.mode,EE),nE.return=sE,nE):(nE=xx(nE,cE),nE.return=sE,nE)}function Jx(sE,nE,cE,EE){var FE=cE.type;return FE===dn?xE(sE,nE,cE.props.children,EE,cE.key):nE!==null&&(nE.elementType===FE||typeof FE=="object"&&FE!==null&&FE.$$typeof===mx&&eP(FE)===nE.type)?(nE=xx(nE,cE.props),$C(nE,cE),nE.return=sE,nE):(nE=gM(cE.type,cE.key,cE.props,null,sE.mode,EE),$C(nE,cE),nE.return=sE,nE)}function fE(sE,nE,cE,EE){return nE===null||nE.tag!==4||nE.stateNode.containerInfo!==cE.containerInfo||nE.stateNode.implementation!==cE.implementation?(nE=$R(cE,sE.mode,EE),nE.return=sE,nE):(nE=xx(nE,cE.children||[]),nE.return=sE,nE)}function xE(sE,nE,cE,EE,FE){return nE===null||nE.tag!==7?(nE=hA(cE,sE.mode,EE,FE),nE.return=sE,nE):(nE=xx(nE,cE),nE.return=sE,nE)}function TE(sE,nE,cE){if(typeof nE=="string"&&nE!==""||typeof nE=="number"||typeof nE=="bigint")return nE=LR(""+nE,sE.mode,cE),nE.return=sE,nE;if(typeof nE=="object"&&nE!==null){switch(nE.$$typeof){case on:return cE=gM(nE.type,nE.key,nE.props,null,sE.mode,cE),$C(cE,nE),cE.return=sE,cE;case fn:return nE=$R(nE,sE.mode,cE),nE.return=sE,nE;case mx:var EE=nE._init;return nE=EE(nE._payload),TE(sE,nE,cE)}if(Ex(nE)||yx(nE))return nE=hA(nE,sE.mode,cE,null),nE.return=sE,nE;if(typeof nE.then=="function")return TE(sE,OM(nE),cE);if(nE.$$typeof===sx)return TE(sE,xM(sE,nE),cE);PM(sE,nE)}return null}function pE(sE,nE,cE,EE){var FE=nE!==null?nE.key:null;if(typeof cE=="string"&&cE!==""||typeof cE=="number"||typeof cE=="bigint")return FE!==null?null:zx(sE,nE,""+cE,EE);if(typeof cE=="object"&&cE!==null){switch(cE.$$typeof){case on:return cE.key===FE?Jx(sE,nE,cE,EE):null;case fn:return cE.key===FE?fE(sE,nE,cE,EE):null;case mx:return FE=cE._init,cE=FE(cE._payload),pE(sE,nE,cE,EE)}if(Ex(cE)||yx(cE))return FE!==null?null:xE(sE,nE,cE,EE,null);if(typeof cE.then=="function")return pE(sE,nE,OM(cE),EE);if(cE.$$typeof===sx)return pE(sE,nE,xM(sE,cE),EE);PM(sE,cE)}return null}function dE(sE,nE,cE,EE,FE){if(typeof EE=="string"&&EE!==""||typeof EE=="number"||typeof EE=="bigint")return sE=sE.get(cE)||null,zx(nE,sE,""+EE,FE);if(typeof EE=="object"&&EE!==null){switch(EE.$$typeof){case on:return sE=sE.get(EE.key===null?cE:EE.key)||null,Jx(nE,sE,EE,FE);case fn:return sE=sE.get(EE.key===null?cE:EE.key)||null,fE(nE,sE,EE,FE);case mx:var KE=EE._init;return EE=KE(EE._payload),dE(sE,nE,cE,EE,FE)}if(Ex(EE)||yx(EE))return sE=sE.get(cE)||null,xE(nE,sE,EE,FE,null);if(typeof EE.then=="function")return dE(sE,nE,cE,OM(EE),FE);if(EE.$$typeof===sx)return dE(sE,nE,cE,xM(nE,EE),FE);PM(nE,EE)}return null}function jE(sE,nE,cE,EE){for(var FE=null,KE=null,qE=nE,HE=nE=0,NS=null;qE!==null&&HE<cE.length;HE++){qE.index>HE?(NS=qE,qE=null):NS=qE.sibling;var nS=pE(sE,qE,cE[HE],EE);if(nS===null){qE===null&&(qE=NS);break}gn&&qE&&nS.alternate===null&&rx(sE,qE),nE=Tx(nS,nE,HE),KE===null?FE=nS:KE.sibling=nS,KE=nS,qE=NS}if(HE===cE.length)return ux(sE,qE),aS&&mA(sE,HE),FE;if(qE===null){for(;HE<cE.length;HE++)qE=TE(sE,cE[HE],EE),qE!==null&&(nE=Tx(qE,nE,HE),KE===null?FE=qE:KE.sibling=qE,KE=qE);return aS&&mA(sE,HE),FE}for(qE=dx(qE);HE<cE.length;HE++)NS=dE(qE,sE,HE,cE[HE],EE),NS!==null&&(gn&&NS.alternate!==null&&qE.delete(NS.key===null?HE:NS.key),nE=Tx(NS,nE,HE),KE===null?FE=NS:KE.sibling=NS,KE=NS);return gn&&qE.forEach(function(lA){return rx(sE,lA)}),aS&&mA(sE,HE),FE}function VE(sE,nE,cE,EE){if(cE==null)throw Error(s(151));for(var FE=null,KE=null,qE=nE,HE=nE=0,NS=null,nS=cE.next();qE!==null&&!nS.done;HE++,nS=cE.next()){qE.index>HE?(NS=qE,qE=null):NS=qE.sibling;var lA=pE(sE,qE,nS.value,EE);if(lA===null){qE===null&&(qE=NS);break}gn&&qE&&lA.alternate===null&&rx(sE,qE),nE=Tx(lA,nE,HE),KE===null?FE=lA:KE.sibling=lA,KE=lA,qE=NS}if(nS.done)return ux(sE,qE),aS&&mA(sE,HE),FE;if(qE===null){for(;!nS.done;HE++,nS=cE.next())nS=TE(sE,nS.value,EE),nS!==null&&(nE=Tx(nS,nE,HE),KE===null?FE=nS:KE.sibling=nS,KE=nS);return aS&&mA(sE,HE),FE}for(qE=dx(qE);!nS.done;HE++,nS=cE.next())nS=dE(qE,sE,HE,nS.value,EE),nS!==null&&(gn&&nS.alternate!==null&&qE.delete(nS.key===null?HE:nS.key),nE=Tx(nS,nE,HE),KE===null?FE=nS:KE.sibling=nS,KE=nS);return gn&&qE.forEach(function(Z$){return rx(sE,Z$)}),aS&&mA(sE,HE),FE}function fS(sE,nE,cE,EE){if(typeof cE=="object"&&cE!==null&&cE.type===dn&&cE.key===null&&(cE=cE.props.children),typeof cE=="object"&&cE!==null){switch(cE.$$typeof){case on:e:{for(var FE=cE.key;nE!==null;){if(nE.key===FE){if(FE=cE.type,FE===dn){if(nE.tag===7){ux(sE,nE.sibling),EE=xx(nE,cE.props.children),EE.return=sE,sE=EE;break e}}else if(nE.elementType===FE||typeof FE=="object"&&FE!==null&&FE.$$typeof===mx&&eP(FE)===nE.type){ux(sE,nE.sibling),EE=xx(nE,cE.props),$C(EE,cE),EE.return=sE,sE=EE;break e}ux(sE,nE);break}else rx(sE,nE);nE=nE.sibling}cE.type===dn?(EE=hA(cE.props.children,sE.mode,EE,cE.key),EE.return=sE,sE=EE):(EE=gM(cE.type,cE.key,cE.props,null,sE.mode,EE),$C(EE,cE),EE.return=sE,sE=EE)}return Dx(sE);case fn:e:{for(FE=cE.key;nE!==null;){if(nE.key===FE)if(nE.tag===4&&nE.stateNode.containerInfo===cE.containerInfo&&nE.stateNode.implementation===cE.implementation){ux(sE,nE.sibling),EE=xx(nE,cE.children||[]),EE.return=sE,sE=EE;break e}else{ux(sE,nE);break}else rx(sE,nE);nE=nE.sibling}EE=$R(cE,sE.mode,EE),EE.return=sE,sE=EE}return Dx(sE);case mx:return FE=cE._init,cE=FE(cE._payload),fS(sE,nE,cE,EE)}if(Ex(cE))return jE(sE,nE,cE,EE);if(yx(cE)){if(FE=yx(cE),typeof FE!="function")throw Error(s(150));return cE=FE.call(cE),VE(sE,nE,cE,EE)}if(typeof cE.then=="function")return fS(sE,nE,OM(cE),EE);if(cE.$$typeof===sx)return fS(sE,nE,xM(sE,cE),EE);PM(sE,cE)}return typeof cE=="string"&&cE!==""||typeof cE=="number"||typeof cE=="bigint"?(cE=""+cE,nE!==null&&nE.tag===6?(ux(sE,nE.sibling),EE=xx(nE,cE),EE.return=sE,sE=EE):(ux(sE,nE),EE=LR(cE,sE.mode,EE),EE.return=sE,sE=EE),Dx(sE)):ux(sE,nE)}return function(sE,nE,cE,EE){try{LC=0;var FE=fS(sE,nE,cE,EE);return ZA=null,FE}catch(qE){if(qE===AC||qE===EM)throw qE;var KE=tT(29,qE,null,sE.mode);return KE.lanes=EE,KE.return=sE,KE}finally{}}}var YA=tP(!0),rP=tP(!1),dT=Lx(null),bT=null;function ZT(gn){var rx=gn.alternate;Ix(IS,IS.current&1),Ix(dT,gn),bT===null&&(rx===null||zA.current!==null||rx.memoizedState!==null)&&(bT=gn)}function nP(gn){if(gn.tag===22){if(Ix(IS,IS.current),Ix(dT,gn),bT===null){var rx=gn.alternate;rx!==null&&rx.memoizedState!==null&&(bT=gn)}}else YT()}function YT(){Ix(IS,IS.current),Ix(dT,dT.current)}function NT(gn){qx(dT),bT===gn&&(bT=null),qx(IS)}var IS=Lx(0);function NM(gn){for(var rx=gn;rx!==null;){if(rx.tag===13){var ux=rx.memoizedState;if(ux!==null&&(ux=ux.dehydrated,ux===null||ux.data==="$?"||aD(ux)))return rx}else if(rx.tag===19&&rx.memoizedProps.revealOrder!==void 0){if((rx.flags&128)!==0)return rx}else if(rx.child!==null){rx.child.return=rx,rx=rx.child;continue}if(rx===gn)break;for(;rx.sibling===null;){if(rx.return===null||rx.return===gn)return null;rx=rx.return}rx.sibling.return=rx.return,rx=rx.sibling}return null}function gI(gn,rx,ux,dx){rx=gn.memoizedState,ux=ux(dx,rx),ux=ux==null?rx:en({},rx,ux),gn.memoizedState=ux,gn.lanes===0&&(gn.updateQueue.baseState=ux)}var mI={enqueueSetState:function(gn,rx,ux){gn=gn._reactInternals;var dx=aT(),xx=VT(dx);xx.payload=rx,ux!=null&&(xx.callback=ux),rx=HT(gn,xx,dx),rx!==null&&(oT(rx,gn,dx),MC(rx,gn,dx))},enqueueReplaceState:function(gn,rx,ux){gn=gn._reactInternals;var dx=aT(),xx=VT(dx);xx.tag=1,xx.payload=rx,ux!=null&&(xx.callback=ux),rx=HT(gn,xx,dx),rx!==null&&(oT(rx,gn,dx),MC(rx,gn,dx))},enqueueForceUpdate:function(gn,rx){gn=gn._reactInternals;var ux=aT(),dx=VT(ux);dx.tag=2,rx!=null&&(dx.callback=rx),rx=HT(gn,dx,ux),rx!==null&&(oT(rx,gn,ux),MC(rx,gn,ux))}};function iP(gn,rx,ux,dx,xx,Tx,Dx){return gn=gn.stateNode,typeof gn.shouldComponentUpdate=="function"?gn.shouldComponentUpdate(dx,Tx,Dx):rx.prototype&&rx.prototype.isPureReactComponent?!yC(ux,dx)||!yC(xx,Tx):!0}function aP(gn,rx,ux,dx){gn=rx.state,typeof rx.componentWillReceiveProps=="function"&&rx.componentWillReceiveProps(ux,dx),typeof rx.UNSAFE_componentWillReceiveProps=="function"&&rx.UNSAFE_componentWillReceiveProps(ux,dx),rx.state!==gn&&mI.enqueueReplaceState(rx,rx.state,null)}function SA(gn,rx){var ux=rx;if("ref"in rx){ux={};for(var dx in rx)dx!=="ref"&&(ux[dx]=rx[dx])}if(gn=gn.defaultProps){ux===rx&&(ux=en({},ux));for(var xx in gn)ux[xx]===void 0&&(ux[xx]=gn[xx])}return ux}var LM=typeof reportError=="function"?reportError:function(gn){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rx=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof gn=="object"&&gn!==null&&typeof gn.message=="string"?String(gn.message):String(gn),error:gn});if(!window.dispatchEvent(rx))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",gn);return}console.error(gn)};function oP(gn){LM(gn)}function sP(gn){console.error(gn)}function lP(gn){LM(gn)}function $M(gn,rx){try{var ux=gn.onUncaughtError;ux(rx.value,{componentStack:rx.stack})}catch(dx){setTimeout(function(){throw dx})}}function uP(gn,rx,ux){try{var dx=gn.onCaughtError;dx(ux.value,{componentStack:ux.stack,errorBoundary:rx.tag===1?rx.stateNode:null})}catch(xx){setTimeout(function(){throw xx})}}function vI(gn,rx,ux){return ux=VT(ux),ux.tag=3,ux.payload={element:null},ux.callback=function(){$M(gn,rx)},ux}function cP(gn){return gn=VT(gn),gn.tag=3,gn}function fP(gn,rx,ux,dx){var xx=ux.type.getDerivedStateFromError;if(typeof xx=="function"){var Tx=dx.value;gn.payload=function(){return xx(Tx)},gn.callback=function(){uP(rx,ux,dx)}}var Dx=ux.stateNode;Dx!==null&&typeof Dx.componentDidCatch=="function"&&(gn.callback=function(){uP(rx,ux,dx),typeof xx!="function"&&(eA===null?eA=new Set([this]):eA.add(this));var zx=dx.stack;this.componentDidCatch(dx.value,{componentStack:zx!==null?zx:""})})}function ZL(gn,rx,ux,dx,xx){if(ux.flags|=32768,dx!==null&&typeof dx=="object"&&typeof dx.then=="function"){if(rx=ux.alternate,rx!==null&&SC(rx,ux,xx,!0),ux=dT.current,ux!==null){switch(ux.tag){case 13:return bT===null?GI():ux.alternate===null&&_S===0&&(_S=3),ux.flags&=-257,ux.flags|=65536,ux.lanes=xx,dx===jR?ux.flags|=16384:(rx=ux.updateQueue,rx===null?ux.updateQueue=new Set([dx]):rx.add(dx),VI(gn,dx,xx)),!1;case 22:return ux.flags|=65536,dx===jR?ux.flags|=16384:(rx=ux.updateQueue,rx===null?(rx={transitions:null,markerInstances:null,retryQueue:new Set([dx])},ux.updateQueue=rx):(ux=rx.retryQueue,ux===null?rx.retryQueue=new Set([dx]):ux.add(dx)),VI(gn,dx,xx)),!1}throw Error(s(435,ux.tag))}return VI(gn,dx,xx),GI(),!1}if(aS)return rx=dT.current,rx!==null?((rx.flags&65536)===0&&(rx.flags|=256),rx.flags|=65536,rx.lanes=xx,dx!==FR&&(gn=Error(s(422),{cause:dx}),bC(uT(gn,ux)))):(dx!==FR&&(rx=Error(s(423),{cause:dx}),bC(uT(rx,ux))),gn=gn.current.alternate,gn.flags|=65536,xx&=-xx,gn.lanes|=xx,dx=uT(dx,ux),xx=vI(gn.stateNode,dx,xx),WR(gn,xx),_S!==4&&(_S=2)),!1;var Tx=Error(s(520),{cause:dx});if(Tx=uT(Tx,ux),zC===null?zC=[Tx]:zC.push(Tx),_S!==4&&(_S=2),rx===null)return!0;dx=uT(dx,ux),ux=rx;do{switch(ux.tag){case 3:return ux.flags|=65536,gn=xx&-xx,ux.lanes|=gn,gn=vI(ux.stateNode,dx,gn),WR(ux,gn),!1;case 1:if(rx=ux.type,Tx=ux.stateNode,(ux.flags&128)===0&&(typeof rx.getDerivedStateFromError=="function"||Tx!==null&&typeof Tx.componentDidCatch=="function"&&(eA===null||!eA.has(Tx))))return ux.flags|=65536,xx&=-xx,ux.lanes|=xx,xx=cP(xx),fP(xx,gn,ux,dx),WR(ux,xx),!1}ux=ux.return}while(ux!==null);return!1}var pP=Error(s(461)),DS=!1;function kS(gn,rx,ux,dx){rx.child=gn===null?rP(rx,null,ux,dx):YA(rx,gn.child,ux,dx)}function dP(gn,rx,ux,dx,xx){ux=ux.render;var Tx=rx.ref;if("ref"in dx){var Dx={};for(var zx in dx)zx!=="ref"&&(Dx[zx]=dx[zx])}else Dx=dx;return _A(rx),dx=eI(gn,rx,ux,Dx,Tx,xx),zx=tI(),gn!==null&&!DS?(rI(gn,rx,xx),LT(gn,rx,xx)):(aS&&zx&&BR(rx),rx.flags|=1,kS(gn,rx,dx,xx),rx.child)}function hP(gn,rx,ux,dx,xx){if(gn===null){var Tx=ux.type;return typeof Tx=="function"&&!NR(Tx)&&Tx.defaultProps===void 0&&ux.compare===null?(rx.tag=15,rx.type=Tx,gP(gn,rx,Tx,dx,xx)):(gn=gM(ux.type,null,dx,rx,rx.mode,xx),gn.ref=rx.ref,gn.return=rx,rx.child=gn)}if(Tx=gn.child,!TI(gn,xx)){var Dx=Tx.memoizedProps;if(ux=ux.compare,ux=ux!==null?ux:yC,ux(Dx,dx)&&gn.ref===rx.ref)return LT(gn,rx,xx)}return rx.flags|=1,gn=MT(Tx,dx),gn.ref=rx.ref,gn.return=rx,rx.child=gn}function gP(gn,rx,ux,dx,xx){if(gn!==null){var Tx=gn.memoizedProps;if(yC(Tx,dx)&&gn.ref===rx.ref)if(DS=!1,rx.pendingProps=dx=Tx,TI(gn,xx))(gn.flags&131072)!==0&&(DS=!0);else return rx.lanes=gn.lanes,LT(gn,rx,xx)}return yI(gn,rx,ux,dx,xx)}function mP(gn,rx,ux){var dx=rx.pendingProps,xx=dx.children,Tx=gn!==null?gn.memoizedState:null;if(dx.mode==="hidden"){if((rx.flags&128)!==0){if(dx=Tx!==null?Tx.baseLanes|ux:ux,gn!==null){for(xx=rx.child=gn.child,Tx=0;xx!==null;)Tx=Tx|xx.lanes|xx.childLanes,xx=xx.sibling;rx.childLanes=Tx&~dx}else rx.childLanes=0,rx.child=null;return vP(gn,rx,dx,ux)}if((ux&536870912)!==0)rx.memoizedState={baseLanes:0,cachePool:null},gn!==null&&_M(rx,Tx!==null?Tx.cachePool:null),Tx!==null?hO(rx,Tx):KR(),nP(rx);else return rx.lanes=rx.childLanes=536870912,vP(gn,rx,Tx!==null?Tx.baseLanes|ux:ux,ux)}else Tx!==null?(_M(rx,Tx.cachePool),hO(rx,Tx),YT(),rx.memoizedState=null):(gn!==null&&_M(rx,null),KR(),YT());return kS(gn,rx,xx,ux),rx.child}function vP(gn,rx,ux,dx){var xx=HR();return xx=xx===null?null:{parent:RS._currentValue,pool:xx},rx.memoizedState={baseLanes:ux,cachePool:xx},gn!==null&&_M(rx,null),KR(),nP(rx),gn!==null&&SC(gn,rx,dx,!0),null}function BM(gn,rx){var ux=rx.ref;if(ux===null)gn!==null&&gn.ref!==null&&(rx.flags|=4194816);else{if(typeof ux!="function"&&typeof ux!="object")throw Error(s(284));(gn===null||gn.ref!==ux)&&(rx.flags|=4194816)}}function yI(gn,rx,ux,dx,xx){return _A(rx),ux=eI(gn,rx,ux,dx,void 0,xx),dx=tI(),gn!==null&&!DS?(rI(gn,rx,xx),LT(gn,rx,xx)):(aS&&dx&&BR(rx),rx.flags|=1,kS(gn,rx,ux,xx),rx.child)}function yP(gn,rx,ux,dx,xx,Tx){return _A(rx),rx.updateQueue=null,ux=mO(rx,dx,ux,xx),gO(gn),dx=tI(),gn!==null&&!DS?(rI(gn,rx,Tx),LT(gn,rx,Tx)):(aS&&dx&&BR(rx),rx.flags|=1,kS(gn,rx,ux,Tx),rx.child)}function xP(gn,rx,ux,dx,xx){if(_A(rx),rx.stateNode===null){var Tx=kA,Dx=ux.contextType;typeof Dx=="object"&&Dx!==null&&(Tx=zS(Dx)),Tx=new ux(dx,Tx),rx.memoizedState=Tx.state!==null&&Tx.state!==void 0?Tx.state:null,Tx.updater=mI,rx.stateNode=Tx,Tx._reactInternals=rx,Tx=rx.stateNode,Tx.props=dx,Tx.state=rx.memoizedState,Tx.refs={},ZR(rx),Dx=ux.contextType,Tx.context=typeof Dx=="object"&&Dx!==null?zS(Dx):kA,Tx.state=rx.memoizedState,Dx=ux.getDerivedStateFromProps,typeof Dx=="function"&&(gI(rx,ux,Dx,dx),Tx.state=rx.memoizedState),typeof ux.getDerivedStateFromProps=="function"||typeof Tx.getSnapshotBeforeUpdate=="function"||typeof Tx.UNSAFE_componentWillMount!="function"&&typeof Tx.componentWillMount!="function"||(Dx=Tx.state,typeof Tx.componentWillMount=="function"&&Tx.componentWillMount(),typeof Tx.UNSAFE_componentWillMount=="function"&&Tx.UNSAFE_componentWillMount(),Dx!==Tx.state&&mI.enqueueReplaceState(Tx,Tx.state,null),IC(rx,dx,Tx,xx),RC(),Tx.state=rx.memoizedState),typeof Tx.componentDidMount=="function"&&(rx.flags|=4194308),dx=!0}else if(gn===null){Tx=rx.stateNode;var zx=rx.memoizedProps,Jx=SA(ux,zx);Tx.props=Jx;var fE=Tx.context,xE=ux.contextType;Dx=kA,typeof xE=="object"&&xE!==null&&(Dx=zS(xE));var TE=ux.getDerivedStateFromProps;xE=typeof TE=="function"||typeof Tx.getSnapshotBeforeUpdate=="function",zx=rx.pendingProps!==zx,xE||typeof Tx.UNSAFE_componentWillReceiveProps!="function"&&typeof Tx.componentWillReceiveProps!="function"||(zx||fE!==Dx)&&aP(rx,Tx,dx,Dx),zT=!1;var pE=rx.memoizedState;Tx.state=pE,IC(rx,dx,Tx,xx),RC(),fE=rx.memoizedState,zx||pE!==fE||zT?(typeof TE=="function"&&(gI(rx,ux,TE,dx),fE=rx.memoizedState),(Jx=zT||iP(rx,ux,Jx,dx,pE,fE,Dx))?(xE||typeof Tx.UNSAFE_componentWillMount!="function"&&typeof Tx.componentWillMount!="function"||(typeof Tx.componentWillMount=="function"&&Tx.componentWillMount(),typeof Tx.UNSAFE_componentWillMount=="function"&&Tx.UNSAFE_componentWillMount()),typeof Tx.componentDidMount=="function"&&(rx.flags|=4194308)):(typeof Tx.componentDidMount=="function"&&(rx.flags|=4194308),rx.memoizedProps=dx,rx.memoizedState=fE),Tx.props=dx,Tx.state=fE,Tx.context=Dx,dx=Jx):(typeof Tx.componentDidMount=="function"&&(rx.flags|=4194308),dx=!1)}else{Tx=rx.stateNode,YR(gn,rx),Dx=rx.memoizedProps,xE=SA(ux,Dx),Tx.props=xE,TE=rx.pendingProps,pE=Tx.context,fE=ux.contextType,Jx=kA,typeof fE=="object"&&fE!==null&&(Jx=zS(fE)),zx=ux.getDerivedStateFromProps,(fE=typeof zx=="function"||typeof Tx.getSnapshotBeforeUpdate=="function")||typeof Tx.UNSAFE_componentWillReceiveProps!="function"&&typeof Tx.componentWillReceiveProps!="function"||(Dx!==TE||pE!==Jx)&&aP(rx,Tx,dx,Jx),zT=!1,pE=rx.memoizedState,Tx.state=pE,IC(rx,dx,Tx,xx),RC();var dE=rx.memoizedState;Dx!==TE||pE!==dE||zT||gn!==null&&gn.dependencies!==null&&yM(gn.dependencies)?(typeof zx=="function"&&(gI(rx,ux,zx,dx),dE=rx.memoizedState),(xE=zT||iP(rx,ux,xE,dx,pE,dE,Jx)||gn!==null&&gn.dependencies!==null&&yM(gn.dependencies))?(fE||typeof Tx.UNSAFE_componentWillUpdate!="function"&&typeof Tx.componentWillUpdate!="function"||(typeof Tx.componentWillUpdate=="function"&&Tx.componentWillUpdate(dx,dE,Jx),typeof Tx.UNSAFE_componentWillUpdate=="function"&&Tx.UNSAFE_componentWillUpdate(dx,dE,Jx)),typeof Tx.componentDidUpdate=="function"&&(rx.flags|=4),typeof Tx.getSnapshotBeforeUpdate=="function"&&(rx.flags|=1024)):(typeof Tx.componentDidUpdate!="function"||Dx===gn.memoizedProps&&pE===gn.memoizedState||(rx.flags|=4),typeof Tx.getSnapshotBeforeUpdate!="function"||Dx===gn.memoizedProps&&pE===gn.memoizedState||(rx.flags|=1024),rx.memoizedProps=dx,rx.memoizedState=dE),Tx.props=dx,Tx.state=dE,Tx.context=Jx,dx=xE):(typeof Tx.componentDidUpdate!="function"||Dx===gn.memoizedProps&&pE===gn.memoizedState||(rx.flags|=4),typeof Tx.getSnapshotBeforeUpdate!="function"||Dx===gn.memoizedProps&&pE===gn.memoizedState||(rx.flags|=1024),dx=!1)}return Tx=dx,BM(gn,rx),dx=(rx.flags&128)!==0,Tx||dx?(Tx=rx.stateNode,ux=dx&&typeof ux.getDerivedStateFromError!="function"?null:Tx.render(),rx.flags|=1,gn!==null&&dx?(rx.child=YA(rx,gn.child,null,xx),rx.child=YA(rx,null,ux,xx)):kS(gn,rx,ux,xx),rx.memoizedState=Tx.state,gn=rx.child):gn=LT(gn,rx,xx),gn}function _P(gn,rx,ux,dx){return EC(),rx.flags|=256,kS(gn,rx,ux,dx),rx.child}var xI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _I(gn){return{baseLanes:gn,cachePool:oO()}}function EI(gn,rx,ux){return gn=gn!==null?gn.childLanes&~ux:0,rx&&(gn|=hT),gn}function EP(gn,rx,ux){var dx=rx.pendingProps,xx=!1,Tx=(rx.flags&128)!==0,Dx;if((Dx=Tx)||(Dx=gn!==null&&gn.memoizedState===null?!1:(IS.current&2)!==0),Dx&&(xx=!0,rx.flags&=-129),Dx=(rx.flags&32)!==0,rx.flags&=-33,gn===null){if(aS){if(xx?ZT(rx):YT(),aS){var zx=xS,Jx;if(Jx=zx){e:{for(Jx=zx,zx=ET;Jx.nodeType!==8;){if(!zx){zx=null;break e}if(Jx=_T(Jx.nextSibling),Jx===null){zx=null;break e}}zx=Jx}zx!==null?(rx.memoizedState={dehydrated:zx,treeContext:gA!==null?{id:RT,overflow:IT}:null,retryLane:536870912,hydrationErrors:null},Jx=tT(18,null,null,0),Jx.stateNode=zx,Jx.return=rx,rx.child=Jx,jS=rx,xS=null,Jx=!0):Jx=!1}Jx||yA(rx)}if(zx=rx.memoizedState,zx!==null&&(zx=zx.dehydrated,zx!==null))return aD(zx)?rx.lanes=32:rx.lanes=536870912,null;NT(rx)}return zx=dx.children,dx=dx.fallback,xx?(YT(),xx=rx.mode,zx=kM({mode:"hidden",children:zx},xx),dx=hA(dx,xx,ux,null),zx.return=rx,dx.return=rx,zx.sibling=dx,rx.child=zx,xx=rx.child,xx.memoizedState=_I(ux),xx.childLanes=EI(gn,Dx,ux),rx.memoizedState=xI,dx):(ZT(rx),bI(rx,zx))}if(Jx=gn.memoizedState,Jx!==null&&(zx=Jx.dehydrated,zx!==null)){if(Tx)rx.flags&256?(ZT(rx),rx.flags&=-257,rx=SI(gn,rx,ux)):rx.memoizedState!==null?(YT(),rx.child=gn.child,rx.flags|=128,rx=null):(YT(),xx=dx.fallback,zx=rx.mode,dx=kM({mode:"visible",children:dx.children},zx),xx=hA(xx,zx,ux,null),xx.flags|=2,dx.return=rx,xx.return=rx,dx.sibling=xx,rx.child=dx,YA(rx,gn.child,null,ux),dx=rx.child,dx.memoizedState=_I(ux),dx.childLanes=EI(gn,Dx,ux),rx.memoizedState=xI,rx=xx);else if(ZT(rx),aD(zx)){if(Dx=zx.nextSibling&&zx.nextSibling.dataset,Dx)var fE=Dx.dgst;Dx=fE,dx=Error(s(419)),dx.stack="",dx.digest=Dx,bC({value:dx,source:null,stack:null}),rx=SI(gn,rx,ux)}else if(DS||SC(gn,rx,ux,!1),Dx=(ux&gn.childLanes)!==0,DS||Dx){if(Dx=dS,Dx!==null&&(dx=ux&-ux,dx=(dx&42)!==0?1:Yx(dx),dx=(dx&(Dx.suspendedLanes|ux))!==0?0:dx,dx!==0&&dx!==Jx.retryLane))throw Jx.retryLane=dx,BA(gn,dx),oT(Dx,gn,dx),pP;zx.data==="$?"||GI(),rx=SI(gn,rx,ux)}else zx.data==="$?"?(rx.flags|=192,rx.child=gn.child,rx=null):(gn=Jx.treeContext,xS=_T(zx.nextSibling),jS=rx,aS=!0,vA=null,ET=!1,gn!==null&&(fT[pT++]=RT,fT[pT++]=IT,fT[pT++]=gA,RT=gn.id,IT=gn.overflow,gA=rx),rx=bI(rx,dx.children),rx.flags|=4096);return rx}return xx?(YT(),xx=dx.fallback,zx=rx.mode,Jx=gn.child,fE=Jx.sibling,dx=MT(Jx,{mode:"hidden",children:dx.children}),dx.subtreeFlags=Jx.subtreeFlags&65011712,fE!==null?xx=MT(fE,xx):(xx=hA(xx,zx,ux,null),xx.flags|=2),xx.return=rx,dx.return=rx,dx.sibling=xx,rx.child=dx,dx=xx,xx=rx.child,zx=gn.child.memoizedState,zx===null?zx=_I(ux):(Jx=zx.cachePool,Jx!==null?(fE=RS._currentValue,Jx=Jx.parent!==fE?{parent:fE,pool:fE}:Jx):Jx=oO(),zx={baseLanes:zx.baseLanes|ux,cachePool:Jx}),xx.memoizedState=zx,xx.childLanes=EI(gn,Dx,ux),rx.memoizedState=xI,dx):(ZT(rx),ux=gn.child,gn=ux.sibling,ux=MT(ux,{mode:"visible",children:dx.children}),ux.return=rx,ux.sibling=null,gn!==null&&(Dx=rx.deletions,Dx===null?(rx.deletions=[gn],rx.flags|=16):Dx.push(gn)),rx.child=ux,rx.memoizedState=null,ux)}function bI(gn,rx){return rx=kM({mode:"visible",children:rx},gn.mode),rx.return=gn,gn.child=rx}function kM(gn,rx){return gn=tT(22,gn,null,rx),gn.lanes=0,gn.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},gn}function SI(gn,rx,ux){return YA(rx,gn.child,null,ux),gn=bI(rx,rx.pendingProps.children),gn.flags|=2,rx.memoizedState=null,gn}function bP(gn,rx,ux){gn.lanes|=rx;var dx=gn.alternate;dx!==null&&(dx.lanes|=rx),qR(gn.return,rx,ux)}function wI(gn,rx,ux,dx,xx){var Tx=gn.memoizedState;Tx===null?gn.memoizedState={isBackwards:rx,rendering:null,renderingStartTime:0,last:dx,tail:ux,tailMode:xx}:(Tx.isBackwards=rx,Tx.rendering=null,Tx.renderingStartTime=0,Tx.last=dx,Tx.tail=ux,Tx.tailMode=xx)}function SP(gn,rx,ux){var dx=rx.pendingProps,xx=dx.revealOrder,Tx=dx.tail;if(kS(gn,rx,dx.children,ux),dx=IS.current,(dx&2)!==0)dx=dx&1|2,rx.flags|=128;else{if(gn!==null&&(gn.flags&128)!==0)e:for(gn=rx.child;gn!==null;){if(gn.tag===13)gn.memoizedState!==null&&bP(gn,ux,rx);else if(gn.tag===19)bP(gn,ux,rx);else if(gn.child!==null){gn.child.return=gn,gn=gn.child;continue}if(gn===rx)break e;for(;gn.sibling===null;){if(gn.return===null||gn.return===rx)break e;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}dx&=1}switch(Ix(IS,dx),xx){case"forwards":for(ux=rx.child,xx=null;ux!==null;)gn=ux.alternate,gn!==null&&NM(gn)===null&&(xx=ux),ux=ux.sibling;ux=xx,ux===null?(xx=rx.child,rx.child=null):(xx=ux.sibling,ux.sibling=null),wI(rx,!1,xx,ux,Tx);break;case"backwards":for(ux=null,xx=rx.child,rx.child=null;xx!==null;){if(gn=xx.alternate,gn!==null&&NM(gn)===null){rx.child=xx;break}gn=xx.sibling,xx.sibling=ux,ux=xx,xx=gn}wI(rx,!0,ux,null,Tx);break;case"together":wI(rx,!1,null,null,void 0);break;default:rx.memoizedState=null}return rx.child}function LT(gn,rx,ux){if(gn!==null&&(rx.dependencies=gn.dependencies),JT|=rx.lanes,(ux&rx.childLanes)===0)if(gn!==null){if(SC(gn,rx,ux,!1),(ux&rx.childLanes)===0)return null}else return null;if(gn!==null&&rx.child!==gn.child)throw Error(s(153));if(rx.child!==null){for(gn=rx.child,ux=MT(gn,gn.pendingProps),rx.child=ux,ux.return=rx;gn.sibling!==null;)gn=gn.sibling,ux=ux.sibling=MT(gn,gn.pendingProps),ux.return=rx;ux.sibling=null}return rx.child}function TI(gn,rx){return(gn.lanes&rx)!==0?!0:(gn=gn.dependencies,!!(gn!==null&&yM(gn)))}function YL(gn,rx,ux){switch(rx.tag){case 3:Vx(rx,rx.stateNode.containerInfo),GT(rx,RS,gn.memoizedState.cache),EC();break;case 27:case 5:Zx(rx);break;case 4:Vx(rx,rx.stateNode.containerInfo);break;case 10:GT(rx,rx.type,rx.memoizedProps.value);break;case 13:var dx=rx.memoizedState;if(dx!==null)return dx.dehydrated!==null?(ZT(rx),rx.flags|=128,null):(ux&rx.child.childLanes)!==0?EP(gn,rx,ux):(ZT(rx),gn=LT(gn,rx,ux),gn!==null?gn.sibling:null);ZT(rx);break;case 19:var xx=(gn.flags&128)!==0;if(dx=(ux&rx.childLanes)!==0,dx||(SC(gn,rx,ux,!1),dx=(ux&rx.childLanes)!==0),xx){if(dx)return SP(gn,rx,ux);rx.flags|=128}if(xx=rx.memoizedState,xx!==null&&(xx.rendering=null,xx.tail=null,xx.lastEffect=null),Ix(IS,IS.current),dx)break;return null;case 22:case 23:return rx.lanes=0,mP(gn,rx,ux);case 24:GT(rx,RS,gn.memoizedState.cache)}return LT(gn,rx,ux)}function wP(gn,rx,ux){if(gn!==null)if(gn.memoizedProps!==rx.pendingProps)DS=!0;else{if(!TI(gn,ux)&&(rx.flags&128)===0)return DS=!1,YL(gn,rx,ux);DS=(gn.flags&131072)!==0}else DS=!1,aS&&(rx.flags&1048576)!==0&&JD(rx,vM,rx.index);switch(rx.lanes=0,rx.tag){case 16:e:{gn=rx.pendingProps;var dx=rx.elementType,xx=dx._init;if(dx=xx(dx._payload),rx.type=dx,typeof dx=="function")NR(dx)?(gn=SA(dx,gn),rx.tag=1,rx=xP(null,rx,dx,gn,ux)):(rx.tag=0,rx=yI(null,rx,dx,gn,ux));else{if(dx!=null){if(xx=dx.$$typeof,xx===lx){rx.tag=11,rx=dP(null,rx,dx,gn,ux);break e}else if(xx===gx){rx.tag=14,rx=hP(null,rx,dx,gn,ux);break e}}throw rx=_x(dx)||dx,Error(s(306,rx,""))}}return rx;case 0:return yI(gn,rx,rx.type,rx.pendingProps,ux);case 1:return dx=rx.type,xx=SA(dx,rx.pendingProps),xP(gn,rx,dx,xx,ux);case 3:e:{if(Vx(rx,rx.stateNode.containerInfo),gn===null)throw Error(s(387));dx=rx.pendingProps;var Tx=rx.memoizedState;xx=Tx.element,YR(gn,rx),IC(rx,dx,null,ux);var Dx=rx.memoizedState;if(dx=Dx.cache,GT(rx,RS,dx),dx!==Tx.cache&&GR(rx,[RS],ux,!0),RC(),dx=Dx.element,Tx.isDehydrated)if(Tx={element:dx,isDehydrated:!1,cache:Dx.cache},rx.updateQueue.baseState=Tx,rx.memoizedState=Tx,rx.flags&256){rx=_P(gn,rx,dx,ux);break e}else if(dx!==xx){xx=uT(Error(s(424)),rx),bC(xx),rx=_P(gn,rx,dx,ux);break e}else{switch(gn=rx.stateNode.containerInfo,gn.nodeType){case 9:gn=gn.body;break;default:gn=gn.nodeName==="HTML"?gn.ownerDocument.body:gn}for(xS=_T(gn.firstChild),jS=rx,aS=!0,vA=null,ET=!0,ux=rP(rx,null,dx,ux),rx.child=ux;ux;)ux.flags=ux.flags&-3|4096,ux=ux.sibling}else{if(EC(),dx===xx){rx=LT(gn,rx,ux);break e}kS(gn,rx,dx,ux)}rx=rx.child}return rx;case 26:return BM(gn,rx),gn===null?(ux=MN(rx.type,null,rx.pendingProps,null))?rx.memoizedState=ux:aS||(ux=rx.type,gn=rx.pendingProps,dx=QM(Bx.current).createElement(ux),dx[$E]=rx,dx[kE]=gn,US(dx,ux,gn),zE(dx),rx.stateNode=dx):rx.memoizedState=MN(rx.type,gn.memoizedProps,rx.pendingProps,gn.memoizedState),null;case 27:return Zx(rx),gn===null&&aS&&(dx=rx.stateNode=TN(rx.type,rx.pendingProps,Bx.current),jS=rx,ET=!0,xx=xS,nA(rx.type)?(oD=xx,xS=_T(dx.firstChild)):xS=xx),kS(gn,rx,rx.pendingProps.children,ux),BM(gn,rx),gn===null&&(rx.flags|=4194304),rx.child;case 5:return gn===null&&aS&&((xx=dx=xS)&&(dx=b$(dx,rx.type,rx.pendingProps,ET),dx!==null?(rx.stateNode=dx,jS=rx,xS=_T(dx.firstChild),ET=!1,xx=!0):xx=!1),xx||yA(rx)),Zx(rx),xx=rx.type,Tx=rx.pendingProps,Dx=gn!==null?gn.memoizedProps:null,dx=Tx.children,rD(xx,Tx)?dx=null:Dx!==null&&rD(xx,Dx)&&(rx.flags|=32),rx.memoizedState!==null&&(xx=eI(gn,rx,UL,null,null,ux),QC._currentValue=xx),BM(gn,rx),kS(gn,rx,dx,ux),rx.child;case 6:return gn===null&&aS&&((gn=ux=xS)&&(ux=S$(ux,rx.pendingProps,ET),ux!==null?(rx.stateNode=ux,jS=rx,xS=null,gn=!0):gn=!1),gn||yA(rx)),null;case 13:return EP(gn,rx,ux);case 4:return Vx(rx,rx.stateNode.containerInfo),dx=rx.pendingProps,gn===null?rx.child=YA(rx,null,dx,ux):kS(gn,rx,dx,ux),rx.child;case 11:return dP(gn,rx,rx.type,rx.pendingProps,ux);case 7:return kS(gn,rx,rx.pendingProps,ux),rx.child;case 8:return kS(gn,rx,rx.pendingProps.children,ux),rx.child;case 12:return kS(gn,rx,rx.pendingProps.children,ux),rx.child;case 10:return dx=rx.pendingProps,GT(rx,rx.type,dx.value),kS(gn,rx,dx.children,ux),rx.child;case 9:return xx=rx.type._context,dx=rx.pendingProps.children,_A(rx),xx=zS(xx),dx=dx(xx),rx.flags|=1,kS(gn,rx,dx,ux),rx.child;case 14:return hP(gn,rx,rx.type,rx.pendingProps,ux);case 15:return gP(gn,rx,rx.type,rx.pendingProps,ux);case 19:return SP(gn,rx,ux);case 31:return dx=rx.pendingProps,ux=rx.mode,dx={mode:dx.mode,children:dx.children},gn===null?(ux=kM(dx,ux),ux.ref=rx.ref,rx.child=ux,ux.return=rx,rx=ux):(ux=MT(gn.child,dx),ux.ref=rx.ref,rx.child=ux,ux.return=rx,rx=ux),rx;case 22:return mP(gn,rx,ux);case 24:return _A(rx),dx=zS(RS),gn===null?(xx=HR(),xx===null&&(xx=dS,Tx=zR(),xx.pooledCache=Tx,Tx.refCount++,Tx!==null&&(xx.pooledCacheLanes|=ux),xx=Tx),rx.memoizedState={parent:dx,cache:xx},ZR(rx),GT(rx,RS,xx)):((gn.lanes&ux)!==0&&(YR(gn,rx),IC(rx,null,null,ux),RC()),xx=gn.memoizedState,Tx=rx.memoizedState,xx.parent!==dx?(xx={parent:dx,cache:dx},rx.memoizedState=xx,rx.lanes===0&&(rx.memoizedState=rx.updateQueue.baseState=xx),GT(rx,RS,dx)):(dx=Tx.cache,GT(rx,RS,dx),dx!==xx.cache&&GR(rx,[RS],ux,!0))),kS(gn,rx,rx.pendingProps.children,ux),rx.child;case 29:throw rx.pendingProps}throw Error(s(156,rx.tag))}function $T(gn){gn.flags|=4}function TP(gn,rx){if(rx.type!=="stylesheet"||(rx.state.loading&4)!==0)gn.flags&=-16777217;else if(gn.flags|=16777216,!PN(rx)){if(rx=dT.current,rx!==null&&((tS&4194048)===tS?bT!==null:(tS&62914560)!==tS&&(tS&536870912)===0||rx!==bT))throw CC=jR,sO;gn.flags|=8192}}function FM(gn,rx){rx!==null&&(gn.flags|=4),gn.flags&16384&&(rx=gn.tag!==22?AE():536870912,gn.lanes|=rx,QA|=rx)}function BC(gn,rx){if(!aS)switch(gn.tailMode){case"hidden":rx=gn.tail;for(var ux=null;rx!==null;)rx.alternate!==null&&(ux=rx),rx=rx.sibling;ux===null?gn.tail=null:ux.sibling=null;break;case"collapsed":ux=gn.tail;for(var dx=null;ux!==null;)ux.alternate!==null&&(dx=ux),ux=ux.sibling;dx===null?rx||gn.tail===null?gn.tail=null:gn.tail.sibling=null:dx.sibling=null}}function vS(gn){var rx=gn.alternate!==null&&gn.alternate.child===gn.child,ux=0,dx=0;if(rx)for(var xx=gn.child;xx!==null;)ux|=xx.lanes|xx.childLanes,dx|=xx.subtreeFlags&65011712,dx|=xx.flags&65011712,xx.return=gn,xx=xx.sibling;else for(xx=gn.child;xx!==null;)ux|=xx.lanes|xx.childLanes,dx|=xx.subtreeFlags,dx|=xx.flags,xx.return=gn,xx=xx.sibling;return gn.subtreeFlags|=dx,gn.childLanes=ux,rx}function WL(gn,rx,ux){var dx=rx.pendingProps;switch(kR(rx),rx.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vS(rx),null;case 1:return vS(rx),null;case 3:return ux=rx.stateNode,dx=null,gn!==null&&(dx=gn.memoizedState.cache),rx.memoizedState.cache!==dx&&(rx.flags|=2048),OT(RS),Gx(),ux.pendingContext&&(ux.context=ux.pendingContext,ux.pendingContext=null),(gn===null||gn.child===null)&&(_C(rx)?$T(rx):gn===null||gn.memoizedState.isDehydrated&&(rx.flags&256)===0||(rx.flags|=1024,rO())),vS(rx),null;case 26:return ux=rx.memoizedState,gn===null?($T(rx),ux!==null?(vS(rx),TP(rx,ux)):(vS(rx),rx.flags&=-16777217)):ux?ux!==gn.memoizedState?($T(rx),vS(rx),TP(rx,ux)):(vS(rx),rx.flags&=-16777217):(gn.memoizedProps!==dx&&$T(rx),vS(rx),rx.flags&=-16777217),null;case 27:jx(rx),ux=Bx.current;var xx=rx.type;if(gn!==null&&rx.stateNode!=null)gn.memoizedProps!==dx&&$T(rx);else{if(!dx){if(rx.stateNode===null)throw Error(s(166));return vS(rx),null}gn=Px.current,_C(rx)?eO(rx):(gn=TN(xx,dx,ux),rx.stateNode=gn,$T(rx))}return vS(rx),null;case 5:if(jx(rx),ux=rx.type,gn!==null&&rx.stateNode!=null)gn.memoizedProps!==dx&&$T(rx);else{if(!dx){if(rx.stateNode===null)throw Error(s(166));return vS(rx),null}if(gn=Px.current,_C(rx))eO(rx);else{switch(xx=QM(Bx.current),gn){case 1:gn=xx.createElementNS("http://www.w3.org/2000/svg",ux);break;case 2:gn=xx.createElementNS("http://www.w3.org/1998/Math/MathML",ux);break;default:switch(ux){case"svg":gn=xx.createElementNS("http://www.w3.org/2000/svg",ux);break;case"math":gn=xx.createElementNS("http://www.w3.org/1998/Math/MathML",ux);break;case"script":gn=xx.createElement("div"),gn.innerHTML="<script><\/script>",gn=gn.removeChild(gn.firstChild);break;case"select":gn=typeof dx.is=="string"?xx.createElement("select",{is:dx.is}):xx.createElement("select"),dx.multiple?gn.multiple=!0:dx.size&&(gn.size=dx.size);break;default:gn=typeof dx.is=="string"?xx.createElement(ux,{is:dx.is}):xx.createElement(ux)}}gn[$E]=rx,gn[kE]=dx;e:for(xx=rx.child;xx!==null;){if(xx.tag===5||xx.tag===6)gn.appendChild(xx.stateNode);else if(xx.tag!==4&&xx.tag!==27&&xx.child!==null){xx.child.return=xx,xx=xx.child;continue}if(xx===rx)break e;for(;xx.sibling===null;){if(xx.return===null||xx.return===rx)break e;xx=xx.return}xx.sibling.return=xx.return,xx=xx.sibling}rx.stateNode=gn;e:switch(US(gn,ux,dx),ux){case"button":case"input":case"select":case"textarea":gn=!!dx.autoFocus;break e;case"img":gn=!0;break e;default:gn=!1}gn&&$T(rx)}}return vS(rx),rx.flags&=-16777217,null;case 6:if(gn&&rx.stateNode!=null)gn.memoizedProps!==dx&&$T(rx);else{if(typeof dx!="string"&&rx.stateNode===null)throw Error(s(166));if(gn=Bx.current,_C(rx)){if(gn=rx.stateNode,ux=rx.memoizedProps,dx=null,xx=jS,xx!==null)switch(xx.tag){case 27:case 5:dx=xx.memoizedProps}gn[$E]=rx,gn=!!(gn.nodeValue===ux||dx!==null&&dx.suppressHydrationWarning===!0||yN(gn.nodeValue,ux)),gn||yA(rx)}else gn=QM(gn).createTextNode(dx),gn[$E]=rx,rx.stateNode=gn}return vS(rx),null;case 13:if(dx=rx.memoizedState,gn===null||gn.memoizedState!==null&&gn.memoizedState.dehydrated!==null){if(xx=_C(rx),dx!==null&&dx.dehydrated!==null){if(gn===null){if(!xx)throw Error(s(318));if(xx=rx.memoizedState,xx=xx!==null?xx.dehydrated:null,!xx)throw Error(s(317));xx[$E]=rx}else EC(),(rx.flags&128)===0&&(rx.memoizedState=null),rx.flags|=4;vS(rx),xx=!1}else xx=rO(),gn!==null&&gn.memoizedState!==null&&(gn.memoizedState.hydrationErrors=xx),xx=!0;if(!xx)return rx.flags&256?(NT(rx),rx):(NT(rx),null)}if(NT(rx),(rx.flags&128)!==0)return rx.lanes=ux,rx;if(ux=dx!==null,gn=gn!==null&&gn.memoizedState!==null,ux){dx=rx.child,xx=null,dx.alternate!==null&&dx.alternate.memoizedState!==null&&dx.alternate.memoizedState.cachePool!==null&&(xx=dx.alternate.memoizedState.cachePool.pool);var Tx=null;dx.memoizedState!==null&&dx.memoizedState.cachePool!==null&&(Tx=dx.memoizedState.cachePool.pool),Tx!==xx&&(dx.flags|=2048)}return ux!==gn&&ux&&(rx.child.flags|=8192),FM(rx,rx.updateQueue),vS(rx),null;case 4:return Gx(),gn===null&&KI(rx.stateNode.containerInfo),vS(rx),null;case 10:return OT(rx.type),vS(rx),null;case 19:if(qx(IS),xx=rx.memoizedState,xx===null)return vS(rx),null;if(dx=(rx.flags&128)!==0,Tx=xx.rendering,Tx===null)if(dx)BC(xx,!1);else{if(_S!==0||gn!==null&&(gn.flags&128)!==0)for(gn=rx.child;gn!==null;){if(Tx=NM(gn),Tx!==null){for(rx.flags|=128,BC(xx,!1),gn=Tx.updateQueue,rx.updateQueue=gn,FM(rx,gn),rx.subtreeFlags=0,gn=ux,ux=rx.child;ux!==null;)QD(ux,gn),ux=ux.sibling;return Ix(IS,IS.current&1|2),rx.child}gn=gn.sibling}xx.tail!==null&&aE()>GM&&(rx.flags|=128,dx=!0,BC(xx,!1),rx.lanes=4194304)}else{if(!dx)if(gn=NM(Tx),gn!==null){if(rx.flags|=128,dx=!0,gn=gn.updateQueue,rx.updateQueue=gn,FM(rx,gn),BC(xx,!0),xx.tail===null&&xx.tailMode==="hidden"&&!Tx.alternate&&!aS)return vS(rx),null}else 2*aE()-xx.renderingStartTime>GM&&ux!==536870912&&(rx.flags|=128,dx=!0,BC(xx,!1),rx.lanes=4194304);xx.isBackwards?(Tx.sibling=rx.child,rx.child=Tx):(gn=xx.last,gn!==null?gn.sibling=Tx:rx.child=Tx,xx.last=Tx)}return xx.tail!==null?(rx=xx.tail,xx.rendering=rx,xx.tail=rx.sibling,xx.renderingStartTime=aE(),rx.sibling=null,gn=IS.current,Ix(IS,dx?gn&1|2:gn&1),rx):(vS(rx),null);case 22:case 23:return NT(rx),QR(),dx=rx.memoizedState!==null,gn!==null?gn.memoizedState!==null!==dx&&(rx.flags|=8192):dx&&(rx.flags|=8192),dx?(ux&536870912)!==0&&(rx.flags&128)===0&&(vS(rx),rx.subtreeFlags&6&&(rx.flags|=8192)):vS(rx),ux=rx.updateQueue,ux!==null&&FM(rx,ux.retryQueue),ux=null,gn!==null&&gn.memoizedState!==null&&gn.memoizedState.cachePool!==null&&(ux=gn.memoizedState.cachePool.pool),dx=null,rx.memoizedState!==null&&rx.memoizedState.cachePool!==null&&(dx=rx.memoizedState.cachePool.pool),dx!==ux&&(rx.flags|=2048),gn!==null&&qx(EA),null;case 24:return ux=null,gn!==null&&(ux=gn.memoizedState.cache),rx.memoizedState.cache!==ux&&(rx.flags|=2048),OT(RS),vS(rx),null;case 25:return null;case 30:return null}throw Error(s(156,rx.tag))}function XL(gn,rx){switch(kR(rx),rx.tag){case 1:return gn=rx.flags,gn&65536?(rx.flags=gn&-65537|128,rx):null;case 3:return OT(RS),Gx(),gn=rx.flags,(gn&65536)!==0&&(gn&128)===0?(rx.flags=gn&-65537|128,rx):null;case 26:case 27:case 5:return jx(rx),null;case 13:if(NT(rx),gn=rx.memoizedState,gn!==null&&gn.dehydrated!==null){if(rx.alternate===null)throw Error(s(340));EC()}return gn=rx.flags,gn&65536?(rx.flags=gn&-65537|128,rx):null;case 19:return qx(IS),null;case 4:return Gx(),null;case 10:return OT(rx.type),null;case 22:case 23:return NT(rx),QR(),gn!==null&&qx(EA),gn=rx.flags,gn&65536?(rx.flags=gn&-65537|128,rx):null;case 24:return OT(RS),null;case 25:return null;default:return null}}function AP(gn,rx){switch(kR(rx),rx.tag){case 3:OT(RS),Gx();break;case 26:case 27:case 5:jx(rx);break;case 4:Gx();break;case 13:NT(rx);break;case 19:qx(IS);break;case 10:OT(rx.type);break;case 22:case 23:NT(rx),QR(),gn!==null&&qx(EA);break;case 24:OT(RS)}}function kC(gn,rx){try{var ux=rx.updateQueue,dx=ux!==null?ux.lastEffect:null;if(dx!==null){var xx=dx.next;ux=xx;do{if((ux.tag&gn)===gn){dx=void 0;var Tx=ux.create,Dx=ux.inst;dx=Tx(),Dx.destroy=dx}ux=ux.next}while(ux!==xx)}}catch(zx){pS(rx,rx.return,zx)}}function WT(gn,rx,ux){try{var dx=rx.updateQueue,xx=dx!==null?dx.lastEffect:null;if(xx!==null){var Tx=xx.next;dx=Tx;do{if((dx.tag&gn)===gn){var Dx=dx.inst,zx=Dx.destroy;if(zx!==void 0){Dx.destroy=void 0,xx=rx;var Jx=ux,fE=zx;try{fE()}catch(xE){pS(xx,Jx,xE)}}}dx=dx.next}while(dx!==Tx)}}catch(xE){pS(rx,rx.return,xE)}}function CP(gn){var rx=gn.updateQueue;if(rx!==null){var ux=gn.stateNode;try{dO(rx,ux)}catch(dx){pS(gn,gn.return,dx)}}}function MP(gn,rx,ux){ux.props=SA(gn.type,gn.memoizedProps),ux.state=gn.memoizedState;try{ux.componentWillUnmount()}catch(dx){pS(gn,rx,dx)}}function FC(gn,rx){try{var ux=gn.ref;if(ux!==null){switch(gn.tag){case 26:case 27:case 5:var dx=gn.stateNode;break;case 30:dx=gn.stateNode;break;default:dx=gn.stateNode}typeof ux=="function"?gn.refCleanup=ux(dx):ux.current=dx}}catch(xx){pS(gn,rx,xx)}}function ST(gn,rx){var ux=gn.ref,dx=gn.refCleanup;if(ux!==null)if(typeof dx=="function")try{dx()}catch(xx){pS(gn,rx,xx)}finally{gn.refCleanup=null,gn=gn.alternate,gn!=null&&(gn.refCleanup=null)}else if(typeof ux=="function")try{ux(null)}catch(xx){pS(gn,rx,xx)}else ux.current=null}function RP(gn){var rx=gn.type,ux=gn.memoizedProps,dx=gn.stateNode;try{e:switch(rx){case"button":case"input":case"select":case"textarea":ux.autoFocus&&dx.focus();break e;case"img":ux.src?dx.src=ux.src:ux.srcSet&&(dx.srcset=ux.srcSet)}}catch(xx){pS(gn,gn.return,xx)}}function AI(gn,rx,ux){try{var dx=gn.stateNode;v$(dx,gn.type,ux,rx),dx[kE]=rx}catch(xx){pS(gn,gn.return,xx)}}function IP(gn){return gn.tag===5||gn.tag===3||gn.tag===26||gn.tag===27&&nA(gn.type)||gn.tag===4}function CI(gn){e:for(;;){for(;gn.sibling===null;){if(gn.return===null||IP(gn.return))return null;gn=gn.return}for(gn.sibling.return=gn.return,gn=gn.sibling;gn.tag!==5&&gn.tag!==6&&gn.tag!==18;){if(gn.tag===27&&nA(gn.type)||gn.flags&2||gn.child===null||gn.tag===4)continue e;gn.child.return=gn,gn=gn.child}if(!(gn.flags&2))return gn.stateNode}}function MI(gn,rx,ux){var dx=gn.tag;if(dx===5||dx===6)gn=gn.stateNode,rx?(ux.nodeType===9?ux.body:ux.nodeName==="HTML"?ux.ownerDocument.body:ux).insertBefore(gn,rx):(rx=ux.nodeType===9?ux.body:ux.nodeName==="HTML"?ux.ownerDocument.body:ux,rx.appendChild(gn),ux=ux._reactRootContainer,ux!=null||rx.onclick!==null||(rx.onclick=KM));else if(dx!==4&&(dx===27&&nA(gn.type)&&(ux=gn.stateNode,rx=null),gn=gn.child,gn!==null))for(MI(gn,rx,ux),gn=gn.sibling;gn!==null;)MI(gn,rx,ux),gn=gn.sibling}function UM(gn,rx,ux){var dx=gn.tag;if(dx===5||dx===6)gn=gn.stateNode,rx?ux.insertBefore(gn,rx):ux.appendChild(gn);else if(dx!==4&&(dx===27&&nA(gn.type)&&(ux=gn.stateNode),gn=gn.child,gn!==null))for(UM(gn,rx,ux),gn=gn.sibling;gn!==null;)UM(gn,rx,ux),gn=gn.sibling}function DP(gn){var rx=gn.stateNode,ux=gn.memoizedProps;try{for(var dx=gn.type,xx=rx.attributes;xx.length;)rx.removeAttributeNode(xx[0]);US(rx,dx,ux),rx[$E]=gn,rx[kE]=ux}catch(Tx){pS(gn,gn.return,Tx)}}var BT=!1,SS=!1,RI=!1,OP=typeof WeakSet=="function"?WeakSet:Set,PS=null;function KL(gn,rx){if(gn=gn.containerInfo,eD=iR,gn=GD(gn),AR(gn)){if("selectionStart"in gn)var ux={start:gn.selectionStart,end:gn.selectionEnd};else e:{ux=(ux=gn.ownerDocument)&&ux.defaultView||window;var dx=ux.getSelection&&ux.getSelection();if(dx&&dx.rangeCount!==0){ux=dx.anchorNode;var xx=dx.anchorOffset,Tx=dx.focusNode;dx=dx.focusOffset;try{ux.nodeType,Tx.nodeType}catch{ux=null;break e}var Dx=0,zx=-1,Jx=-1,fE=0,xE=0,TE=gn,pE=null;t:for(;;){for(var dE;TE!==ux||xx!==0&&TE.nodeType!==3||(zx=Dx+xx),TE!==Tx||dx!==0&&TE.nodeType!==3||(Jx=Dx+dx),TE.nodeType===3&&(Dx+=TE.nodeValue.length),(dE=TE.firstChild)!==null;)pE=TE,TE=dE;for(;;){if(TE===gn)break t;if(pE===ux&&++fE===xx&&(zx=Dx),pE===Tx&&++xE===dx&&(Jx=Dx),(dE=TE.nextSibling)!==null)break;TE=pE,pE=TE.parentNode}TE=dE}ux=zx===-1||Jx===-1?null:{start:zx,end:Jx}}else ux=null}ux=ux||{start:0,end:0}}else ux=null;for(tD={focusedElem:gn,selectionRange:ux},iR=!1,PS=rx;PS!==null;)if(rx=PS,gn=rx.child,(rx.subtreeFlags&1024)!==0&&gn!==null)gn.return=rx,PS=gn;else for(;PS!==null;){switch(rx=PS,Tx=rx.alternate,gn=rx.flags,rx.tag){case 0:break;case 11:case 15:break;case 1:if((gn&1024)!==0&&Tx!==null){gn=void 0,ux=rx,xx=Tx.memoizedProps,Tx=Tx.memoizedState,dx=ux.stateNode;try{var jE=SA(ux.type,xx,ux.elementType===ux.type);gn=dx.getSnapshotBeforeUpdate(jE,Tx),dx.__reactInternalSnapshotBeforeUpdate=gn}catch(VE){pS(ux,ux.return,VE)}}break;case 3:if((gn&1024)!==0){if(gn=rx.stateNode.containerInfo,ux=gn.nodeType,ux===9)iD(gn);else if(ux===1)switch(gn.nodeName){case"HEAD":case"HTML":case"BODY":iD(gn);break;default:gn.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((gn&1024)!==0)throw Error(s(163))}if(gn=rx.sibling,gn!==null){gn.return=rx.return,PS=gn;break}PS=rx.return}}function PP(gn,rx,ux){var dx=ux.flags;switch(ux.tag){case 0:case 11:case 15:XT(gn,ux),dx&4&&kC(5,ux);break;case 1:if(XT(gn,ux),dx&4)if(gn=ux.stateNode,rx===null)try{gn.componentDidMount()}catch(Dx){pS(ux,ux.return,Dx)}else{var xx=SA(ux.type,rx.memoizedProps);rx=rx.memoizedState;try{gn.componentDidUpdate(xx,rx,gn.__reactInternalSnapshotBeforeUpdate)}catch(Dx){pS(ux,ux.return,Dx)}}dx&64&&CP(ux),dx&512&&FC(ux,ux.return);break;case 3:if(XT(gn,ux),dx&64&&(gn=ux.updateQueue,gn!==null)){if(rx=null,ux.child!==null)switch(ux.child.tag){case 27:case 5:rx=ux.child.stateNode;break;case 1:rx=ux.child.stateNode}try{dO(gn,rx)}catch(Dx){pS(ux,ux.return,Dx)}}break;case 27:rx===null&&dx&4&&DP(ux);case 26:case 5:XT(gn,ux),rx===null&&dx&4&&RP(ux),dx&512&&FC(ux,ux.return);break;case 12:XT(gn,ux);break;case 13:XT(gn,ux),dx&4&&$P(gn,ux),dx&64&&(gn=ux.memoizedState,gn!==null&&(gn=gn.dehydrated,gn!==null&&(ux=o$.bind(null,ux),w$(gn,ux))));break;case 22:if(dx=ux.memoizedState!==null||BT,!dx){rx=rx!==null&&rx.memoizedState!==null||SS,xx=BT;var Tx=SS;BT=dx,(SS=rx)&&!Tx?KT(gn,ux,(ux.subtreeFlags&8772)!==0):XT(gn,ux),BT=xx,SS=Tx}break;case 30:break;default:XT(gn,ux)}}function NP(gn){var rx=gn.alternate;rx!==null&&(gn.alternate=null,NP(rx)),gn.child=null,gn.deletions=null,gn.sibling=null,gn.tag===5&&(rx=gn.stateNode,rx!==null&&qS(rx)),gn.stateNode=null,gn.return=null,gn.dependencies=null,gn.memoizedProps=null,gn.memoizedState=null,gn.pendingProps=null,gn.stateNode=null,gn.updateQueue=null}var mS=null,KS=!1;function kT(gn,rx,ux){for(ux=ux.child;ux!==null;)LP(gn,rx,ux),ux=ux.sibling}function LP(gn,rx,ux){if(Fx&&typeof Fx.onCommitFiberUnmount=="function")try{Fx.onCommitFiberUnmount(Ox,ux)}catch{}switch(ux.tag){case 26:SS||ST(ux,rx),kT(gn,rx,ux),ux.memoizedState?ux.memoizedState.count--:ux.stateNode&&(ux=ux.stateNode,ux.parentNode.removeChild(ux));break;case 27:SS||ST(ux,rx);var dx=mS,xx=KS;nA(ux.type)&&(mS=ux.stateNode,KS=!1),kT(gn,rx,ux),YC(ux.stateNode),mS=dx,KS=xx;break;case 5:SS||ST(ux,rx);case 6:if(dx=mS,xx=KS,mS=null,kT(gn,rx,ux),mS=dx,KS=xx,mS!==null)if(KS)try{(mS.nodeType===9?mS.body:mS.nodeName==="HTML"?mS.ownerDocument.body:mS).removeChild(ux.stateNode)}catch(Tx){pS(ux,rx,Tx)}else try{mS.removeChild(ux.stateNode)}catch(Tx){pS(ux,rx,Tx)}break;case 18:mS!==null&&(KS?(gn=mS,SN(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn,ux.stateNode),rM(gn)):SN(mS,ux.stateNode));break;case 4:dx=mS,xx=KS,mS=ux.stateNode.containerInfo,KS=!0,kT(gn,rx,ux),mS=dx,KS=xx;break;case 0:case 11:case 14:case 15:SS||WT(2,ux,rx),SS||WT(4,ux,rx),kT(gn,rx,ux);break;case 1:SS||(ST(ux,rx),dx=ux.stateNode,typeof dx.componentWillUnmount=="function"&&MP(ux,rx,dx)),kT(gn,rx,ux);break;case 21:kT(gn,rx,ux);break;case 22:SS=(dx=SS)||ux.memoizedState!==null,kT(gn,rx,ux),SS=dx;break;default:kT(gn,rx,ux)}}function $P(gn,rx){if(rx.memoizedState===null&&(gn=rx.alternate,gn!==null&&(gn=gn.memoizedState,gn!==null&&(gn=gn.dehydrated,gn!==null))))try{rM(gn)}catch(ux){pS(rx,rx.return,ux)}}function QL(gn){switch(gn.tag){case 13:case 19:var rx=gn.stateNode;return rx===null&&(rx=gn.stateNode=new OP),rx;case 22:return gn=gn.stateNode,rx=gn._retryCache,rx===null&&(rx=gn._retryCache=new OP),rx;default:throw Error(s(435,gn.tag))}}function II(gn,rx){var ux=QL(gn);rx.forEach(function(dx){var xx=s$.bind(null,gn,dx);ux.has(dx)||(ux.add(dx),dx.then(xx,xx))})}function rT(gn,rx){var ux=rx.deletions;if(ux!==null)for(var dx=0;dx<ux.length;dx++){var xx=ux[dx],Tx=gn,Dx=rx,zx=Dx;e:for(;zx!==null;){switch(zx.tag){case 27:if(nA(zx.type)){mS=zx.stateNode,KS=!1;break e}break;case 5:mS=zx.stateNode,KS=!1;break e;case 3:case 4:mS=zx.stateNode.containerInfo,KS=!0;break e}zx=zx.return}if(mS===null)throw Error(s(160));LP(Tx,Dx,xx),mS=null,KS=!1,Tx=xx.alternate,Tx!==null&&(Tx.return=null),xx.return=null}if(rx.subtreeFlags&13878)for(rx=rx.child;rx!==null;)BP(rx,gn),rx=rx.sibling}var xT=null;function BP(gn,rx){var ux=gn.alternate,dx=gn.flags;switch(gn.tag){case 0:case 11:case 14:case 15:rT(rx,gn),nT(gn),dx&4&&(WT(3,gn,gn.return),kC(3,gn),WT(5,gn,gn.return));break;case 1:rT(rx,gn),nT(gn),dx&512&&(SS||ux===null||ST(ux,ux.return)),dx&64&&BT&&(gn=gn.updateQueue,gn!==null&&(dx=gn.callbacks,dx!==null&&(ux=gn.shared.hiddenCallbacks,gn.shared.hiddenCallbacks=ux===null?dx:ux.concat(dx))));break;case 26:var xx=xT;if(rT(rx,gn),nT(gn),dx&512&&(SS||ux===null||ST(ux,ux.return)),dx&4){var Tx=ux!==null?ux.memoizedState:null;if(dx=gn.memoizedState,ux===null)if(dx===null)if(gn.stateNode===null){e:{dx=gn.type,ux=gn.memoizedProps,xx=xx.ownerDocument||xx;t:switch(dx){case"title":Tx=xx.getElementsByTagName("title")[0],(!Tx||Tx[hS]||Tx[$E]||Tx.namespaceURI==="http://www.w3.org/2000/svg"||Tx.hasAttribute("itemprop"))&&(Tx=xx.createElement(dx),xx.head.insertBefore(Tx,xx.querySelector("head > title"))),US(Tx,dx,ux),Tx[$E]=gn,zE(Tx),dx=Tx;break e;case"link":var Dx=DN("link","href",xx).get(dx+(ux.href||""));if(Dx){for(var zx=0;zx<Dx.length;zx++)if(Tx=Dx[zx],Tx.getAttribute("href")===(ux.href==null||ux.href===""?null:ux.href)&&Tx.getAttribute("rel")===(ux.rel==null?null:ux.rel)&&Tx.getAttribute("title")===(ux.title==null?null:ux.title)&&Tx.getAttribute("crossorigin")===(ux.crossOrigin==null?null:ux.crossOrigin)){Dx.splice(zx,1);break t}}Tx=xx.createElement(dx),US(Tx,dx,ux),xx.head.appendChild(Tx);break;case"meta":if(Dx=DN("meta","content",xx).get(dx+(ux.content||""))){for(zx=0;zx<Dx.length;zx++)if(Tx=Dx[zx],Tx.getAttribute("content")===(ux.content==null?null:""+ux.content)&&Tx.getAttribute("name")===(ux.name==null?null:ux.name)&&Tx.getAttribute("property")===(ux.property==null?null:ux.property)&&Tx.getAttribute("http-equiv")===(ux.httpEquiv==null?null:ux.httpEquiv)&&Tx.getAttribute("charset")===(ux.charSet==null?null:ux.charSet)){Dx.splice(zx,1);break t}}Tx=xx.createElement(dx),US(Tx,dx,ux),xx.head.appendChild(Tx);break;default:throw Error(s(468,dx))}Tx[$E]=gn,zE(Tx),dx=Tx}gn.stateNode=dx}else ON(xx,gn.type,gn.stateNode);else gn.stateNode=IN(xx,dx,gn.memoizedProps);else Tx!==dx?(Tx===null?ux.stateNode!==null&&(ux=ux.stateNode,ux.parentNode.removeChild(ux)):Tx.count--,dx===null?ON(xx,gn.type,gn.stateNode):IN(xx,dx,gn.memoizedProps)):dx===null&&gn.stateNode!==null&&AI(gn,gn.memoizedProps,ux.memoizedProps)}break;case 27:rT(rx,gn),nT(gn),dx&512&&(SS||ux===null||ST(ux,ux.return)),ux!==null&&dx&4&&AI(gn,gn.memoizedProps,ux.memoizedProps);break;case 5:if(rT(rx,gn),nT(gn),dx&512&&(SS||ux===null||ST(ux,ux.return)),gn.flags&32){xx=gn.stateNode;try{IA(xx,"")}catch(dE){pS(gn,gn.return,dE)}}dx&4&&gn.stateNode!=null&&(xx=gn.memoizedProps,AI(gn,xx,ux!==null?ux.memoizedProps:xx)),dx&1024&&(RI=!0);break;case 6:if(rT(rx,gn),nT(gn),dx&4){if(gn.stateNode===null)throw Error(s(162));dx=gn.memoizedProps,ux=gn.stateNode;try{ux.nodeValue=dx}catch(dE){pS(gn,gn.return,dE)}}break;case 3:if(tR=null,xx=xT,xT=JM(rx.containerInfo),rT(rx,gn),xT=xx,nT(gn),dx&4&&ux!==null&&ux.memoizedState.isDehydrated)try{rM(rx.containerInfo)}catch(dE){pS(gn,gn.return,dE)}RI&&(RI=!1,kP(gn));break;case 4:dx=xT,xT=JM(gn.stateNode.containerInfo),rT(rx,gn),nT(gn),xT=dx;break;case 12:rT(rx,gn),nT(gn);break;case 13:rT(rx,gn),nT(gn),gn.child.flags&8192&&gn.memoizedState!==null!=(ux!==null&&ux.memoizedState!==null)&&(BI=aE()),dx&4&&(dx=gn.updateQueue,dx!==null&&(gn.updateQueue=null,II(gn,dx)));break;case 22:xx=gn.memoizedState!==null;var Jx=ux!==null&&ux.memoizedState!==null,fE=BT,xE=SS;if(BT=fE||xx,SS=xE||Jx,rT(rx,gn),SS=xE,BT=fE,nT(gn),dx&8192)e:for(rx=gn.stateNode,rx._visibility=xx?rx._visibility&-2:rx._visibility|1,xx&&(ux===null||Jx||BT||SS||wA(gn)),ux=null,rx=gn;;){if(rx.tag===5||rx.tag===26){if(ux===null){Jx=ux=rx;try{if(Tx=Jx.stateNode,xx)Dx=Tx.style,typeof Dx.setProperty=="function"?Dx.setProperty("display","none","important"):Dx.display="none";else{zx=Jx.stateNode;var TE=Jx.memoizedProps.style,pE=TE!=null&&TE.hasOwnProperty("display")?TE.display:null;zx.style.display=pE==null||typeof pE=="boolean"?"":(""+pE).trim()}}catch(dE){pS(Jx,Jx.return,dE)}}}else if(rx.tag===6){if(ux===null){Jx=rx;try{Jx.stateNode.nodeValue=xx?"":Jx.memoizedProps}catch(dE){pS(Jx,Jx.return,dE)}}}else if((rx.tag!==22&&rx.tag!==23||rx.memoizedState===null||rx===gn)&&rx.child!==null){rx.child.return=rx,rx=rx.child;continue}if(rx===gn)break e;for(;rx.sibling===null;){if(rx.return===null||rx.return===gn)break e;ux===rx&&(ux=null),rx=rx.return}ux===rx&&(ux=null),rx.sibling.return=rx.return,rx=rx.sibling}dx&4&&(dx=gn.updateQueue,dx!==null&&(ux=dx.retryQueue,ux!==null&&(dx.retryQueue=null,II(gn,ux))));break;case 19:rT(rx,gn),nT(gn),dx&4&&(dx=gn.updateQueue,dx!==null&&(gn.updateQueue=null,II(gn,dx)));break;case 30:break;case 21:break;default:rT(rx,gn),nT(gn)}}function nT(gn){var rx=gn.flags;if(rx&2){try{for(var ux,dx=gn.return;dx!==null;){if(IP(dx)){ux=dx;break}dx=dx.return}if(ux==null)throw Error(s(160));switch(ux.tag){case 27:var xx=ux.stateNode,Tx=CI(gn);UM(gn,Tx,xx);break;case 5:var Dx=ux.stateNode;ux.flags&32&&(IA(Dx,""),ux.flags&=-33);var zx=CI(gn);UM(gn,zx,Dx);break;case 3:case 4:var Jx=ux.stateNode.containerInfo,fE=CI(gn);MI(gn,fE,Jx);break;default:throw Error(s(161))}}catch(xE){pS(gn,gn.return,xE)}gn.flags&=-3}rx&4096&&(gn.flags&=-4097)}function kP(gn){if(gn.subtreeFlags&1024)for(gn=gn.child;gn!==null;){var rx=gn;kP(rx),rx.tag===5&&rx.flags&1024&&rx.stateNode.reset(),gn=gn.sibling}}function XT(gn,rx){if(rx.subtreeFlags&8772)for(rx=rx.child;rx!==null;)PP(gn,rx.alternate,rx),rx=rx.sibling}function wA(gn){for(gn=gn.child;gn!==null;){var rx=gn;switch(rx.tag){case 0:case 11:case 14:case 15:WT(4,rx,rx.return),wA(rx);break;case 1:ST(rx,rx.return);var ux=rx.stateNode;typeof ux.componentWillUnmount=="function"&&MP(rx,rx.return,ux),wA(rx);break;case 27:YC(rx.stateNode);case 26:case 5:ST(rx,rx.return),wA(rx);break;case 22:rx.memoizedState===null&&wA(rx);break;case 30:wA(rx);break;default:wA(rx)}gn=gn.sibling}}function KT(gn,rx,ux){for(ux=ux&&(rx.subtreeFlags&8772)!==0,rx=rx.child;rx!==null;){var dx=rx.alternate,xx=gn,Tx=rx,Dx=Tx.flags;switch(Tx.tag){case 0:case 11:case 15:KT(xx,Tx,ux),kC(4,Tx);break;case 1:if(KT(xx,Tx,ux),dx=Tx,xx=dx.stateNode,typeof xx.componentDidMount=="function")try{xx.componentDidMount()}catch(fE){pS(dx,dx.return,fE)}if(dx=Tx,xx=dx.updateQueue,xx!==null){var zx=dx.stateNode;try{var Jx=xx.shared.hiddenCallbacks;if(Jx!==null)for(xx.shared.hiddenCallbacks=null,xx=0;xx<Jx.length;xx++)pO(Jx[xx],zx)}catch(fE){pS(dx,dx.return,fE)}}ux&&Dx&64&&CP(Tx),FC(Tx,Tx.return);break;case 27:DP(Tx);case 26:case 5:KT(xx,Tx,ux),ux&&dx===null&&Dx&4&&RP(Tx),FC(Tx,Tx.return);break;case 12:KT(xx,Tx,ux);break;case 13:KT(xx,Tx,ux),ux&&Dx&4&&$P(xx,Tx);break;case 22:Tx.memoizedState===null&&KT(xx,Tx,ux),FC(Tx,Tx.return);break;case 30:break;default:KT(xx,Tx,ux)}rx=rx.sibling}}function DI(gn,rx){var ux=null;gn!==null&&gn.memoizedState!==null&&gn.memoizedState.cachePool!==null&&(ux=gn.memoizedState.cachePool.pool),gn=null,rx.memoizedState!==null&&rx.memoizedState.cachePool!==null&&(gn=rx.memoizedState.cachePool.pool),gn!==ux&&(gn!=null&&gn.refCount++,ux!=null&&wC(ux))}function OI(gn,rx){gn=null,rx.alternate!==null&&(gn=rx.alternate.memoizedState.cache),rx=rx.memoizedState.cache,rx!==gn&&(rx.refCount++,gn!=null&&wC(gn))}function wT(gn,rx,ux,dx){if(rx.subtreeFlags&10256)for(rx=rx.child;rx!==null;)FP(gn,rx,ux,dx),rx=rx.sibling}function FP(gn,rx,ux,dx){var xx=rx.flags;switch(rx.tag){case 0:case 11:case 15:wT(gn,rx,ux,dx),xx&2048&&kC(9,rx);break;case 1:wT(gn,rx,ux,dx);break;case 3:wT(gn,rx,ux,dx),xx&2048&&(gn=null,rx.alternate!==null&&(gn=rx.alternate.memoizedState.cache),rx=rx.memoizedState.cache,rx!==gn&&(rx.refCount++,gn!=null&&wC(gn)));break;case 12:if(xx&2048){wT(gn,rx,ux,dx),gn=rx.stateNode;try{var Tx=rx.memoizedProps,Dx=Tx.id,zx=Tx.onPostCommit;typeof zx=="function"&&zx(Dx,rx.alternate===null?"mount":"update",gn.passiveEffectDuration,-0)}catch(Jx){pS(rx,rx.return,Jx)}}else wT(gn,rx,ux,dx);break;case 13:wT(gn,rx,ux,dx);break;case 23:break;case 22:Tx=rx.stateNode,Dx=rx.alternate,rx.memoizedState!==null?Tx._visibility&2?wT(gn,rx,ux,dx):UC(gn,rx):Tx._visibility&2?wT(gn,rx,ux,dx):(Tx._visibility|=2,WA(gn,rx,ux,dx,(rx.subtreeFlags&10256)!==0)),xx&2048&&DI(Dx,rx);break;case 24:wT(gn,rx,ux,dx),xx&2048&&OI(rx.alternate,rx);break;default:wT(gn,rx,ux,dx)}}function WA(gn,rx,ux,dx,xx){for(xx=xx&&(rx.subtreeFlags&10256)!==0,rx=rx.child;rx!==null;){var Tx=gn,Dx=rx,zx=ux,Jx=dx,fE=Dx.flags;switch(Dx.tag){case 0:case 11:case 15:WA(Tx,Dx,zx,Jx,xx),kC(8,Dx);break;case 23:break;case 22:var xE=Dx.stateNode;Dx.memoizedState!==null?xE._visibility&2?WA(Tx,Dx,zx,Jx,xx):UC(Tx,Dx):(xE._visibility|=2,WA(Tx,Dx,zx,Jx,xx)),xx&&fE&2048&&DI(Dx.alternate,Dx);break;case 24:WA(Tx,Dx,zx,Jx,xx),xx&&fE&2048&&OI(Dx.alternate,Dx);break;default:WA(Tx,Dx,zx,Jx,xx)}rx=rx.sibling}}function UC(gn,rx){if(rx.subtreeFlags&10256)for(rx=rx.child;rx!==null;){var ux=gn,dx=rx,xx=dx.flags;switch(dx.tag){case 22:UC(ux,dx),xx&2048&&DI(dx.alternate,dx);break;case 24:UC(ux,dx),xx&2048&&OI(dx.alternate,dx);break;default:UC(ux,dx)}rx=rx.sibling}}var qC=8192;function XA(gn){if(gn.subtreeFlags&qC)for(gn=gn.child;gn!==null;)UP(gn),gn=gn.sibling}function UP(gn){switch(gn.tag){case 26:XA(gn),gn.flags&qC&&gn.memoizedState!==null&&B$(xT,gn.memoizedState,gn.memoizedProps);break;case 5:XA(gn);break;case 3:case 4:var rx=xT;xT=JM(gn.stateNode.containerInfo),XA(gn),xT=rx;break;case 22:gn.memoizedState===null&&(rx=gn.alternate,rx!==null&&rx.memoizedState!==null?(rx=qC,qC=16777216,XA(gn),qC=rx):XA(gn));break;default:XA(gn)}}function qP(gn){var rx=gn.alternate;if(rx!==null&&(gn=rx.child,gn!==null)){rx.child=null;do rx=gn.sibling,gn.sibling=null,gn=rx;while(gn!==null)}}function GC(gn){var rx=gn.deletions;if((gn.flags&16)!==0){if(rx!==null)for(var ux=0;ux<rx.length;ux++){var dx=rx[ux];PS=dx,zP(dx,gn)}qP(gn)}if(gn.subtreeFlags&10256)for(gn=gn.child;gn!==null;)GP(gn),gn=gn.sibling}function GP(gn){switch(gn.tag){case 0:case 11:case 15:GC(gn),gn.flags&2048&&WT(9,gn,gn.return);break;case 3:GC(gn);break;case 12:GC(gn);break;case 22:var rx=gn.stateNode;gn.memoizedState!==null&&rx._visibility&2&&(gn.return===null||gn.return.tag!==13)?(rx._visibility&=-3,qM(gn)):GC(gn);break;default:GC(gn)}}function qM(gn){var rx=gn.deletions;if((gn.flags&16)!==0){if(rx!==null)for(var ux=0;ux<rx.length;ux++){var dx=rx[ux];PS=dx,zP(dx,gn)}qP(gn)}for(gn=gn.child;gn!==null;){switch(rx=gn,rx.tag){case 0:case 11:case 15:WT(8,rx,rx.return),qM(rx);break;case 22:ux=rx.stateNode,ux._visibility&2&&(ux._visibility&=-3,qM(rx));break;default:qM(rx)}gn=gn.sibling}}function zP(gn,rx){for(;PS!==null;){var ux=PS;switch(ux.tag){case 0:case 11:case 15:WT(8,ux,rx);break;case 23:case 22:if(ux.memoizedState!==null&&ux.memoizedState.cachePool!==null){var dx=ux.memoizedState.cachePool.pool;dx!=null&&dx.refCount++}break;case 24:wC(ux.memoizedState.cache)}if(dx=ux.child,dx!==null)dx.return=ux,PS=dx;else e:for(ux=gn;PS!==null;){dx=PS;var xx=dx.sibling,Tx=dx.return;if(NP(dx),dx===ux){PS=null;break e}if(xx!==null){xx.return=Tx,PS=xx;break e}PS=Tx}}}var JL={getCacheForType:function(gn){var rx=zS(RS),ux=rx.data.get(gn);return ux===void 0&&(ux=gn(),rx.data.set(gn,ux)),ux}},e$=typeof WeakMap=="function"?WeakMap:Map,sS=0,dS=null,QE=null,tS=0,lS=0,iT=null,QT=!1,KA=!1,NI=!1,FT=0,_S=0,JT=0,TA=0,LI=0,hT=0,QA=0,zC=null,QS=null,$I=!1,BI=0,GM=1/0,zM=null,eA=null,FS=0,tA=null,JA=null,eC=0,kI=0,FI=null,VP=null,VC=0,UI=null;function aT(){if((sS&2)!==0&&tS!==0)return tS&-tS;if(bx.T!==null){var gn=qA;return gn!==0?gn:ZI()}return vE()}function HP(){hT===0&&(hT=(tS&536870912)===0||aS?gE():536870912);var gn=dT.current;return gn!==null&&(gn.flags|=32),hT}function oT(gn,rx,ux){(gn===dS&&(lS===2||lS===9)||gn.cancelPendingCommit!==null)&&(tC(gn,0),rA(gn,tS,hT,!1)),DE(gn,ux),((sS&2)===0||gn!==dS)&&(gn===dS&&((sS&2)===0&&(TA|=ux),_S===4&&rA(gn,tS,hT,!1)),TT(gn))}function jP(gn,rx,ux){if((sS&6)!==0)throw Error(s(327));var dx=!ux&&(rx&124)===0&&(rx&gn.expiredLanes)===0||NE(gn,rx),xx=dx?n$(gn,rx):zI(gn,rx,!0),Tx=dx;do{if(xx===0){KA&&!dx&&rA(gn,rx,0,!1);break}else{if(ux=gn.current.alternate,Tx&&!t$(ux)){xx=zI(gn,rx,!1),Tx=!1;continue}if(xx===2){if(Tx=rx,gn.errorRecoveryDisabledLanes&Tx)var Dx=0;else Dx=gn.pendingLanes&-536870913,Dx=Dx!==0?Dx:Dx&536870912?536870912:0;if(Dx!==0){rx=Dx;e:{var zx=gn;xx=zC;var Jx=zx.current.memoizedState.isDehydrated;if(Jx&&(tC(zx,Dx).flags|=256),Dx=zI(zx,Dx,!1),Dx!==2){if(NI&&!Jx){zx.errorRecoveryDisabledLanes|=Tx,TA|=Tx,xx=4;break e}Tx=QS,QS=xx,Tx!==null&&(QS===null?QS=Tx:QS.push.apply(QS,Tx))}xx=Dx}if(Tx=!1,xx!==2)continue}}if(xx===1){tC(gn,0),rA(gn,rx,0,!0);break}e:{switch(dx=gn,Tx=xx,Tx){case 0:case 1:throw Error(s(345));case 4:if((rx&4194048)!==rx)break;case 6:rA(dx,rx,hT,!QT);break e;case 2:QS=null;break;case 3:case 5:break;default:throw Error(s(329))}if((rx&62914560)===rx&&(xx=BI+300-aE(),10<xx)){if(rA(dx,rx,hT,!QT),PE(dx,0,!0)!==0)break e;dx.timeoutHandle=EN(ZP.bind(null,dx,ux,QS,zM,$I,rx,hT,TA,QA,QT,Tx,2,-0,0),xx);break e}ZP(dx,ux,QS,zM,$I,rx,hT,TA,QA,QT,Tx,0,-0,0)}}break}while(!0);TT(gn)}function ZP(gn,rx,ux,dx,xx,Tx,Dx,zx,Jx,fE,xE,TE,pE,dE){if(gn.timeoutHandle=-1,TE=rx.subtreeFlags,(TE&8192||(TE&16785408)===16785408)&&(KC={stylesheets:null,count:0,unsuspend:$$},UP(rx),TE=k$(),TE!==null)){gn.cancelPendingCommit=TE(eN.bind(null,gn,rx,Tx,ux,dx,xx,Dx,zx,Jx,xE,1,pE,dE)),rA(gn,Tx,Dx,!fE);return}eN(gn,rx,Tx,ux,dx,xx,Dx,zx,Jx)}function t$(gn){for(var rx=gn;;){var ux=rx.tag;if((ux===0||ux===11||ux===15)&&rx.flags&16384&&(ux=rx.updateQueue,ux!==null&&(ux=ux.stores,ux!==null)))for(var dx=0;dx<ux.length;dx++){var xx=ux[dx],Tx=xx.getSnapshot;xx=xx.value;try{if(!eT(Tx(),xx))return!1}catch{return!1}}if(ux=rx.child,rx.subtreeFlags&16384&&ux!==null)ux.return=rx,rx=ux;else{if(rx===gn)break;for(;rx.sibling===null;){if(rx.return===null||rx.return===gn)return!0;rx=rx.return}rx.sibling.return=rx.return,rx=rx.sibling}}return!0}function rA(gn,rx,ux,dx){rx&=~LI,rx&=~TA,gn.suspendedLanes|=rx,gn.pingedLanes&=~rx,dx&&(gn.warmLanes|=rx),dx=gn.expirationTimes;for(var xx=rx;0<xx;){var Tx=31-Qx(xx),Dx=1<<Tx;dx[Tx]=-1,xx&=~Dx}ux!==0&&kx(gn,ux,rx)}function VM(){return(sS&6)===0?(HC(0),!1):!0}function qI(){if(QE!==null){if(lS===0)var gn=QE.return;else gn=QE,DT=xA=null,nI(gn),ZA=null,LC=0,gn=QE;for(;gn!==null;)AP(gn.alternate,gn),gn=gn.return;QE=null}}function tC(gn,rx){var ux=gn.timeoutHandle;ux!==-1&&(gn.timeoutHandle=-1,x$(ux)),ux=gn.cancelPendingCommit,ux!==null&&(gn.cancelPendingCommit=null,ux()),qI(),dS=gn,QE=ux=MT(gn.current,null),tS=rx,lS=0,iT=null,QT=!1,KA=NE(gn,rx),NI=!1,QA=hT=LI=TA=JT=_S=0,QS=zC=null,$I=!1,(rx&8)!==0&&(rx|=rx&32);var dx=gn.entangledLanes;if(dx!==0)for(gn=gn.entanglements,dx&=rx;0<dx;){var xx=31-Qx(dx),Tx=1<<xx;rx|=gn[xx],dx&=~Tx}return FT=rx,pM(),ux}function YP(gn,rx){XE=null,bx.H=DM,rx===AC||rx===EM?(rx=cO(),lS=3):rx===sO?(rx=cO(),lS=4):lS=rx===pP?8:rx!==null&&typeof rx=="object"&&typeof rx.then=="function"?6:1,iT=rx,QE===null&&(_S=1,$M(gn,uT(rx,gn.current)))}function WP(){var gn=bx.H;return bx.H=DM,gn===null?DM:gn}function XP(){var gn=bx.A;return bx.A=JL,gn}function GI(){_S=4,QT||(tS&4194048)!==tS&&dT.current!==null||(KA=!0),(JT&134217727)===0&&(TA&134217727)===0||dS===null||rA(dS,tS,hT,!1)}function zI(gn,rx,ux){var dx=sS;sS|=2;var xx=WP(),Tx=XP();(dS!==gn||tS!==rx)&&(zM=null,tC(gn,rx)),rx=!1;var Dx=_S;e:do try{if(lS!==0&&QE!==null){var zx=QE,Jx=iT;switch(lS){case 8:qI(),Dx=6;break e;case 3:case 2:case 9:case 6:dT.current===null&&(rx=!0);var fE=lS;if(lS=0,iT=null,rC(gn,zx,Jx,fE),ux&&KA){Dx=0;break e}break;default:fE=lS,lS=0,iT=null,rC(gn,zx,Jx,fE)}}r$(),Dx=_S;break}catch(xE){YP(gn,xE)}while(!0);return rx&&gn.shellSuspendCounter++,DT=xA=null,sS=dx,bx.H=xx,bx.A=Tx,QE===null&&(dS=null,tS=0,pM()),Dx}function r$(){for(;QE!==null;)KP(QE)}function n$(gn,rx){var ux=sS;sS|=2;var dx=WP(),xx=XP();dS!==gn||tS!==rx?(zM=null,GM=aE()+500,tC(gn,rx)):KA=NE(gn,rx);e:do try{if(lS!==0&&QE!==null){rx=QE;var Tx=iT;t:switch(lS){case 1:lS=0,iT=null,rC(gn,rx,Tx,1);break;case 2:case 9:if(lO(Tx)){lS=0,iT=null,QP(rx);break}rx=function(){lS!==2&&lS!==9||dS!==gn||(lS=7),TT(gn)},Tx.then(rx,rx);break e;case 3:lS=7;break e;case 4:lS=5;break e;case 7:lO(Tx)?(lS=0,iT=null,QP(rx)):(lS=0,iT=null,rC(gn,rx,Tx,7));break;case 5:var Dx=null;switch(QE.tag){case 26:Dx=QE.memoizedState;case 5:case 27:var zx=QE;if(!Dx||PN(Dx)){lS=0,iT=null;var Jx=zx.sibling;if(Jx!==null)QE=Jx;else{var fE=zx.return;fE!==null?(QE=fE,HM(fE)):QE=null}break t}}lS=0,iT=null,rC(gn,rx,Tx,5);break;case 6:lS=0,iT=null,rC(gn,rx,Tx,6);break;case 8:qI(),_S=6;break e;default:throw Error(s(462))}}i$();break}catch(xE){YP(gn,xE)}while(!0);return DT=xA=null,bx.H=dx,bx.A=xx,sS=ux,QE!==null?0:(dS=null,tS=0,pM(),_S)}function i$(){for(;QE!==null&&!rE();)KP(QE)}function KP(gn){var rx=wP(gn.alternate,gn,FT);gn.memoizedProps=gn.pendingProps,rx===null?HM(gn):QE=rx}function QP(gn){var rx=gn,ux=rx.alternate;switch(rx.tag){case 15:case 0:rx=yP(ux,rx,rx.pendingProps,rx.type,void 0,tS);break;case 11:rx=yP(ux,rx,rx.pendingProps,rx.type.render,rx.ref,tS);break;case 5:nI(rx);default:AP(ux,rx),rx=QE=QD(rx,FT),rx=wP(ux,rx,FT)}gn.memoizedProps=gn.pendingProps,rx===null?HM(gn):QE=rx}function rC(gn,rx,ux,dx){DT=xA=null,nI(rx),ZA=null,LC=0;var xx=rx.return;try{if(ZL(gn,xx,rx,ux,tS)){_S=1,$M(gn,uT(ux,gn.current)),QE=null;return}}catch(Tx){if(xx!==null)throw QE=xx,Tx;_S=1,$M(gn,uT(ux,gn.current)),QE=null;return}rx.flags&32768?(aS||dx===1?gn=!0:KA||(tS&536870912)!==0?gn=!1:(QT=gn=!0,(dx===2||dx===9||dx===3||dx===6)&&(dx=dT.current,dx!==null&&dx.tag===13&&(dx.flags|=16384))),JP(rx,gn)):HM(rx)}function HM(gn){var rx=gn;do{if((rx.flags&32768)!==0){JP(rx,QT);return}gn=rx.return;var ux=WL(rx.alternate,rx,FT);if(ux!==null){QE=ux;return}if(rx=rx.sibling,rx!==null){QE=rx;return}QE=rx=gn}while(rx!==null);_S===0&&(_S=5)}function JP(gn,rx){do{var ux=XL(gn.alternate,gn);if(ux!==null){ux.flags&=32767,QE=ux;return}if(ux=gn.return,ux!==null&&(ux.flags|=32768,ux.subtreeFlags=0,ux.deletions=null),!rx&&(gn=gn.sibling,gn!==null)){QE=gn;return}QE=gn=ux}while(gn!==null);_S=6,QE=null}function eN(gn,rx,ux,dx,xx,Tx,Dx,zx,Jx){gn.cancelPendingCommit=null;do jM();while(FS!==0);if((sS&6)!==0)throw Error(s(327));if(rx!==null){if(rx===gn.current)throw Error(s(177));if(Tx=rx.lanes|rx.childLanes,Tx|=DR,OE(gn,ux,Tx,Dx,zx,Jx),gn===dS&&(QE=dS=null,tS=0),JA=rx,tA=gn,eC=ux,kI=Tx,FI=xx,VP=dx,(rx.subtreeFlags&10256)!==0||(rx.flags&10256)!==0?(gn.callbackNode=null,gn.callbackPriority=0,l$(wE,function(){return aN(),null})):(gn.callbackNode=null,gn.callbackPriority=0),dx=(rx.flags&13878)!==0,(rx.subtreeFlags&13878)!==0||dx){dx=bx.T,bx.T=null,xx=Ax.p,Ax.p=2,Dx=sS,sS|=4;try{KL(gn,rx,ux)}finally{sS=Dx,Ax.p=xx,bx.T=dx}}FS=1,tN(),rN(),nN()}}function tN(){if(FS===1){FS=0;var gn=tA,rx=JA,ux=(rx.flags&13878)!==0;if((rx.subtreeFlags&13878)!==0||ux){ux=bx.T,bx.T=null;var dx=Ax.p;Ax.p=2;var xx=sS;sS|=4;try{BP(rx,gn);var Tx=tD,Dx=GD(gn.containerInfo),zx=Tx.focusedElem,Jx=Tx.selectionRange;if(Dx!==zx&&zx&&zx.ownerDocument&&qD(zx.ownerDocument.documentElement,zx)){if(Jx!==null&&AR(zx)){var fE=Jx.start,xE=Jx.end;if(xE===void 0&&(xE=fE),"selectionStart"in zx)zx.selectionStart=fE,zx.selectionEnd=Math.min(xE,zx.value.length);else{var TE=zx.ownerDocument||document,pE=TE&&TE.defaultView||window;if(pE.getSelection){var dE=pE.getSelection(),jE=zx.textContent.length,VE=Math.min(Jx.start,jE),fS=Jx.end===void 0?VE:Math.min(Jx.end,jE);!dE.extend&&VE>fS&&(Dx=fS,fS=VE,VE=Dx);var sE=UD(zx,VE),nE=UD(zx,fS);if(sE&&nE&&(dE.rangeCount!==1||dE.anchorNode!==sE.node||dE.anchorOffset!==sE.offset||dE.focusNode!==nE.node||dE.focusOffset!==nE.offset)){var cE=TE.createRange();cE.setStart(sE.node,sE.offset),dE.removeAllRanges(),VE>fS?(dE.addRange(cE),dE.extend(nE.node,nE.offset)):(cE.setEnd(nE.node,nE.offset),dE.addRange(cE))}}}}for(TE=[],dE=zx;dE=dE.parentNode;)dE.nodeType===1&&TE.push({element:dE,left:dE.scrollLeft,top:dE.scrollTop});for(typeof zx.focus=="function"&&zx.focus(),zx=0;zx<TE.length;zx++){var EE=TE[zx];EE.element.scrollLeft=EE.left,EE.element.scrollTop=EE.top}}iR=!!eD,tD=eD=null}finally{sS=xx,Ax.p=dx,bx.T=ux}}gn.current=rx,FS=2}}function rN(){if(FS===2){FS=0;var gn=tA,rx=JA,ux=(rx.flags&8772)!==0;if((rx.subtreeFlags&8772)!==0||ux){ux=bx.T,bx.T=null;var dx=Ax.p;Ax.p=2;var xx=sS;sS|=4;try{PP(gn,rx.alternate,rx)}finally{sS=xx,Ax.p=dx,bx.T=ux}}FS=3}}function nN(){if(FS===4||FS===3){FS=0,uE();var gn=tA,rx=JA,ux=eC,dx=VP;(rx.subtreeFlags&10256)!==0||(rx.flags&10256)!==0?FS=5:(FS=0,JA=tA=null,iN(gn,gn.pendingLanes));var xx=gn.pendingLanes;if(xx===0&&(eA=null),eE(ux),rx=rx.stateNode,Fx&&typeof Fx.onCommitFiberRoot=="function")try{Fx.onCommitFiberRoot(Ox,rx,void 0,(rx.current.flags&128)===128)}catch{}if(dx!==null){rx=bx.T,xx=Ax.p,Ax.p=2,bx.T=null;try{for(var Tx=gn.onRecoverableError,Dx=0;Dx<dx.length;Dx++){var zx=dx[Dx];Tx(zx.value,{componentStack:zx.stack})}}finally{bx.T=rx,Ax.p=xx}}(eC&3)!==0&&jM(),TT(gn),xx=gn.pendingLanes,(ux&4194090)!==0&&(xx&42)!==0?gn===UI?VC++:(VC=0,UI=gn):VC=0,HC(0)}}function iN(gn,rx){(gn.pooledCacheLanes&=rx)===0&&(rx=gn.pooledCache,rx!=null&&(gn.pooledCache=null,wC(rx)))}function jM(gn){return tN(),rN(),nN(),aN()}function aN(){if(FS!==5)return!1;var gn=tA,rx=kI;kI=0;var ux=eE(eC),dx=bx.T,xx=Ax.p;try{Ax.p=32>ux?32:ux,bx.T=null,ux=FI,FI=null;var Tx=tA,Dx=eC;if(FS=0,JA=tA=null,eC=0,(sS&6)!==0)throw Error(s(331));var zx=sS;if(sS|=4,GP(Tx.current),FP(Tx,Tx.current,Dx,ux),sS=zx,HC(0,!1),Fx&&typeof Fx.onPostCommitFiberRoot=="function")try{Fx.onPostCommitFiberRoot(Ox,Tx)}catch{}return!0}finally{Ax.p=xx,bx.T=dx,iN(gn,rx)}}function oN(gn,rx,ux){rx=uT(ux,rx),rx=vI(gn.stateNode,rx,2),gn=HT(gn,rx,2),gn!==null&&(DE(gn,2),TT(gn))}function pS(gn,rx,ux){if(gn.tag===3)oN(gn,gn,ux);else for(;rx!==null;){if(rx.tag===3){oN(rx,gn,ux);break}else if(rx.tag===1){var dx=rx.stateNode;if(typeof rx.type.getDerivedStateFromError=="function"||typeof dx.componentDidCatch=="function"&&(eA===null||!eA.has(dx))){gn=uT(ux,gn),ux=cP(2),dx=HT(rx,ux,2),dx!==null&&(fP(ux,dx,rx,gn),DE(dx,2),TT(dx));break}}rx=rx.return}}function VI(gn,rx,ux){var dx=gn.pingCache;if(dx===null){dx=gn.pingCache=new e$;var xx=new Set;dx.set(rx,xx)}else xx=dx.get(rx),xx===void 0&&(xx=new Set,dx.set(rx,xx));xx.has(ux)||(NI=!0,xx.add(ux),gn=a$.bind(null,gn,rx,ux),rx.then(gn,gn))}function a$(gn,rx,ux){var dx=gn.pingCache;dx!==null&&dx.delete(rx),gn.pingedLanes|=gn.suspendedLanes&ux,gn.warmLanes&=~ux,dS===gn&&(tS&ux)===ux&&(_S===4||_S===3&&(tS&62914560)===tS&&300>aE()-BI?(sS&2)===0&&tC(gn,0):LI|=ux,QA===tS&&(QA=0)),TT(gn)}function sN(gn,rx){rx===0&&(rx=AE()),gn=BA(gn,rx),gn!==null&&(DE(gn,rx),TT(gn))}function o$(gn){var rx=gn.memoizedState,ux=0;rx!==null&&(ux=rx.retryLane),sN(gn,ux)}function s$(gn,rx){var ux=0;switch(gn.tag){case 13:var dx=gn.stateNode,xx=gn.memoizedState;xx!==null&&(ux=xx.retryLane);break;case 19:dx=gn.stateNode;break;case 22:dx=gn.stateNode._retryCache;break;default:throw Error(s(314))}dx!==null&&dx.delete(rx),sN(gn,ux)}function l$(gn,rx){return iE(gn,rx)}var ZM=null,nC=null,HI=!1,YM=!1,jI=!1,AA=0;function TT(gn){gn!==nC&&gn.next===null&&(nC===null?ZM=nC=gn:nC=nC.next=gn),YM=!0,HI||(HI=!0,c$())}function HC(gn,rx){if(!jI&&YM){jI=!0;do for(var ux=!1,dx=ZM;dx!==null;){if(gn!==0){var xx=dx.pendingLanes;if(xx===0)var Tx=0;else{var Dx=dx.suspendedLanes,zx=dx.pingedLanes;Tx=(1<<31-Qx(42|gn)+1)-1,Tx&=xx&~(Dx&~zx),Tx=Tx&201326741?Tx&201326741|1:Tx?Tx|2:0}Tx!==0&&(ux=!0,fN(dx,Tx))}else Tx=tS,Tx=PE(dx,dx===dS?Tx:0,dx.cancelPendingCommit!==null||dx.timeoutHandle!==-1),(Tx&3)===0||NE(dx,Tx)||(ux=!0,fN(dx,Tx));dx=dx.next}while(ux);jI=!1}}function u$(){lN()}function lN(){YM=HI=!1;var gn=0;AA!==0&&(y$()&&(gn=AA),AA=0);for(var rx=aE(),ux=null,dx=ZM;dx!==null;){var xx=dx.next,Tx=uN(dx,rx);Tx===0?(dx.next=null,ux===null?ZM=xx:ux.next=xx,xx===null&&(nC=ux)):(ux=dx,(gn!==0||(Tx&3)!==0)&&(YM=!0)),dx=xx}HC(gn)}function uN(gn,rx){for(var ux=gn.suspendedLanes,dx=gn.pingedLanes,xx=gn.expirationTimes,Tx=gn.pendingLanes&-62914561;0<Tx;){var Dx=31-Qx(Tx),zx=1<<Dx,Jx=xx[Dx];Jx===-1?((zx&ux)===0||(zx&dx)!==0)&&(xx[Dx]=lE(zx,rx)):Jx<=rx&&(gn.expiredLanes|=zx),Tx&=~zx}if(rx=dS,ux=tS,ux=PE(gn,gn===rx?ux:0,gn.cancelPendingCommit!==null||gn.timeoutHandle!==-1),dx=gn.callbackNode,ux===0||gn===rx&&(lS===2||lS===9)||gn.cancelPendingCommit!==null)return dx!==null&&dx!==null&&Xx(dx),gn.callbackNode=null,gn.callbackPriority=0;if((ux&3)===0||NE(gn,ux)){if(rx=ux&-ux,rx===gn.callbackPriority)return rx;switch(dx!==null&&Xx(dx),eE(ux)){case 2:case 8:ux=IE;break;case 32:ux=wE;break;case 268435456:ux=UE;break;default:ux=wE}return dx=cN.bind(null,gn),ux=iE(ux,dx),gn.callbackPriority=rx,gn.callbackNode=ux,rx}return dx!==null&&dx!==null&&Xx(dx),gn.callbackPriority=2,gn.callbackNode=null,2}function cN(gn,rx){if(FS!==0&&FS!==5)return gn.callbackNode=null,gn.callbackPriority=0,null;var ux=gn.callbackNode;if(jM()&&gn.callbackNode!==ux)return null;var dx=tS;return dx=PE(gn,gn===dS?dx:0,gn.cancelPendingCommit!==null||gn.timeoutHandle!==-1),dx===0?null:(jP(gn,dx,rx),uN(gn,aE()),gn.callbackNode!=null&&gn.callbackNode===ux?cN.bind(null,gn):null)}function fN(gn,rx){if(jM())return null;jP(gn,rx,!0)}function c$(){_$(function(){(sS&6)!==0?iE(ME,u$):lN()})}function ZI(){return AA===0&&(AA=gE()),AA}function pN(gn){return gn==null||typeof gn=="symbol"||typeof gn=="boolean"?null:typeof gn=="function"?gn:aM(""+gn)}function dN(gn,rx){var ux=rx.ownerDocument.createElement("input");return ux.name=rx.name,ux.value=rx.value,gn.id&&ux.setAttribute("form",gn.id),rx.parentNode.insertBefore(ux,rx),gn=new FormData(gn),ux.parentNode.removeChild(ux),gn}function f$(gn,rx,ux,dx,xx){if(rx==="submit"&&ux&&ux.stateNode===xx){var Tx=pN((xx[kE]||null).action),Dx=dx.submitter;Dx&&(rx=(rx=Dx[kE]||null)?pN(rx.formAction):Dx.getAttribute("formAction"),rx!==null&&(Tx=rx,Dx=null));var zx=new uM("action","action",null,dx,xx);gn.push({event:zx,listeners:[{instance:null,listener:function(){if(dx.defaultPrevented){if(AA!==0){var Jx=Dx?dN(xx,Dx):new FormData(xx);pI(ux,{pending:!0,data:Jx,method:xx.method,action:Tx},null,Jx)}}else typeof Tx=="function"&&(zx.preventDefault(),Jx=Dx?dN(xx,Dx):new FormData(xx),pI(ux,{pending:!0,data:Jx,method:xx.method,action:Tx},Tx,Jx))},currentTarget:xx}]})}}for(var YI=0;YI<IR.length;YI++){var WI=IR[YI],p$=WI.toLowerCase(),d$=WI[0].toUpperCase()+WI.slice(1);yT(p$,"on"+d$)}yT(HD,"onAnimationEnd"),yT(jD,"onAnimationIteration"),yT(ZD,"onAnimationStart"),yT("dblclick","onDoubleClick"),yT("focusin","onFocus"),yT("focusout","onBlur"),yT(IL,"onTransitionRun"),yT(DL,"onTransitionStart"),yT(OL,"onTransitionCancel"),yT(YD,"onTransitionEnd"),rS("onMouseEnter",["mouseout","mouseover"]),rS("onMouseLeave",["mouseout","mouseover"]),rS("onPointerEnter",["pointerout","pointerover"]),rS("onPointerLeave",["pointerout","pointerover"]),oS("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oS("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oS("onBeforeInput",["compositionend","keypress","textInput","paste"]),oS("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oS("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oS("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jC));function hN(gn,rx){rx=(rx&4)!==0;for(var ux=0;ux<gn.length;ux++){var dx=gn[ux],xx=dx.event;dx=dx.listeners;e:{var Tx=void 0;if(rx)for(var Dx=dx.length-1;0<=Dx;Dx--){var zx=dx[Dx],Jx=zx.instance,fE=zx.currentTarget;if(zx=zx.listener,Jx!==Tx&&xx.isPropagationStopped())break e;Tx=zx,xx.currentTarget=fE;try{Tx(xx)}catch(xE){LM(xE)}xx.currentTarget=null,Tx=Jx}else for(Dx=0;Dx<dx.length;Dx++){if(zx=dx[Dx],Jx=zx.instance,fE=zx.currentTarget,zx=zx.listener,Jx!==Tx&&xx.isPropagationStopped())break e;Tx=zx,xx.currentTarget=fE;try{Tx(xx)}catch(xE){LM(xE)}xx.currentTarget=null,Tx=Jx}}}}function JE(gn,rx){var ux=rx[eS];ux===void 0&&(ux=rx[eS]=new Set);var dx=gn+"__bubble";ux.has(dx)||(gN(rx,gn,2,!1),ux.add(dx))}function XI(gn,rx,ux){var dx=0;rx&&(dx|=4),gN(ux,gn,dx,rx)}var WM="_reactListening"+Math.random().toString(36).slice(2);function KI(gn){if(!gn[WM]){gn[WM]=!0,ES.forEach(function(ux){ux!=="selectionchange"&&(h$.has(ux)||XI(ux,!1,gn),XI(ux,!0,gn))});var rx=gn.nodeType===9?gn:gn.ownerDocument;rx===null||rx[WM]||(rx[WM]=!0,XI("selectionchange",!1,rx))}}function gN(gn,rx,ux,dx){switch(FN(rx)){case 2:var xx=q$;break;case 8:xx=G$;break;default:xx=fD}ux=xx.bind(null,rx,ux,gn),xx=void 0,!vR||rx!=="touchstart"&&rx!=="touchmove"&&rx!=="wheel"||(xx=!0),dx?xx!==void 0?gn.addEventListener(rx,ux,{capture:!0,passive:xx}):gn.addEventListener(rx,ux,!0):xx!==void 0?gn.addEventListener(rx,ux,{passive:xx}):gn.addEventListener(rx,ux,!1)}function QI(gn,rx,ux,dx,xx){var Tx=dx;if((rx&1)===0&&(rx&2)===0&&dx!==null)e:for(;;){if(dx===null)return;var Dx=dx.tag;if(Dx===3||Dx===4){var zx=dx.stateNode.containerInfo;if(zx===xx)break;if(Dx===4)for(Dx=dx.return;Dx!==null;){var Jx=Dx.tag;if((Jx===3||Jx===4)&&Dx.stateNode.containerInfo===xx)return;Dx=Dx.return}for(;zx!==null;){if(Dx=$S(zx),Dx===null)return;if(Jx=Dx.tag,Jx===5||Jx===6||Jx===26||Jx===27){dx=Tx=Dx;continue e}zx=zx.parentNode}}dx=dx.return}ED(function(){var fE=Tx,xE=gR(ux),TE=[];e:{var pE=WD.get(gn);if(pE!==void 0){var dE=uM,jE=gn;switch(gn){case"keypress":if(sM(ux)===0)break e;case"keydown":case"keyup":dE=lL;break;case"focusin":jE="focus",dE=ER;break;case"focusout":jE="blur",dE=ER;break;case"beforeblur":case"afterblur":dE=ER;break;case"click":if(ux.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dE=wD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dE=XN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dE=fL;break;case HD:case jD:case ZD:dE=JN;break;case YD:dE=dL;break;case"scroll":case"scrollend":dE=YN;break;case"wheel":dE=gL;break;case"copy":case"cut":case"paste":dE=tL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dE=AD;break;case"toggle":case"beforetoggle":dE=vL}var VE=(rx&4)!==0,fS=!VE&&(gn==="scroll"||gn==="scrollend"),sE=VE?pE!==null?pE+"Capture":null:pE;VE=[];for(var nE=fE,cE;nE!==null;){var EE=nE;if(cE=EE.stateNode,EE=EE.tag,EE!==5&&EE!==26&&EE!==27||cE===null||sE===null||(EE=fC(nE,sE),EE!=null&&VE.push(ZC(nE,EE,cE))),fS)break;nE=nE.return}0<VE.length&&(pE=new dE(pE,jE,null,ux,xE),TE.push({event:pE,listeners:VE}))}}if((rx&7)===0){e:{if(pE=gn==="mouseover"||gn==="pointerover",dE=gn==="mouseout"||gn==="pointerout",pE&&ux!==hR&&(jE=ux.relatedTarget||ux.fromElement)&&($S(jE)||jE[ZE]))break e;if((dE||pE)&&(pE=xE.window===xE?xE:(pE=xE.ownerDocument)?pE.defaultView||pE.parentWindow:window,dE?(jE=ux.relatedTarget||ux.toElement,dE=fE,jE=jE?$S(jE):null,jE!==null&&(fS=u(jE),VE=jE.tag,jE!==fS||VE!==5&&VE!==27&&VE!==6)&&(jE=null)):(dE=null,jE=fE),dE!==jE)){if(VE=wD,EE="onMouseLeave",sE="onMouseEnter",nE="mouse",(gn==="pointerout"||gn==="pointerover")&&(VE=AD,EE="onPointerLeave",sE="onPointerEnter",nE="pointer"),fS=dE==null?pE:GE(dE),cE=jE==null?pE:GE(jE),pE=new VE(EE,nE+"leave",dE,ux,xE),pE.target=fS,pE.relatedTarget=cE,EE=null,$S(xE)===fE&&(VE=new VE(sE,nE+"enter",jE,ux,xE),VE.target=cE,VE.relatedTarget=fS,EE=VE),fS=EE,dE&&jE)t:{for(VE=dE,sE=jE,nE=0,cE=VE;cE;cE=iC(cE))nE++;for(cE=0,EE=sE;EE;EE=iC(EE))cE++;for(;0<nE-cE;)VE=iC(VE),nE--;for(;0<cE-nE;)sE=iC(sE),cE--;for(;nE--;){if(VE===sE||sE!==null&&VE===sE.alternate)break t;VE=iC(VE),sE=iC(sE)}VE=null}else VE=null;dE!==null&&mN(TE,pE,dE,VE,!1),jE!==null&&fS!==null&&mN(TE,fS,jE,VE,!0)}}e:{if(pE=fE?GE(fE):window,dE=pE.nodeName&&pE.nodeName.toLowerCase(),dE==="select"||dE==="input"&&pE.type==="file")var FE=ND;else if(OD(pE))if(LD)FE=CL;else{FE=TL;var KE=wL}else dE=pE.nodeName,!dE||dE.toLowerCase()!=="input"||pE.type!=="checkbox"&&pE.type!=="radio"?fE&&dR(fE.elementType)&&(FE=ND):FE=AL;if(FE&&(FE=FE(gn,fE))){PD(TE,FE,ux,xE);break e}KE&&KE(gn,pE,fE),gn==="focusout"&&fE&&pE.type==="number"&&fE.memoizedProps.value!=null&&pR(pE,"number",pE.value)}switch(KE=fE?GE(fE):window,gn){case"focusin":(OD(KE)||KE.contentEditable==="true")&&(NA=KE,CR=fE,xC=null);break;case"focusout":xC=CR=NA=null;break;case"mousedown":MR=!0;break;case"contextmenu":case"mouseup":case"dragend":MR=!1,zD(TE,ux,xE);break;case"selectionchange":if(RL)break;case"keydown":case"keyup":zD(TE,ux,xE)}var qE;if(SR)e:{switch(gn){case"compositionstart":var HE="onCompositionStart";break e;case"compositionend":HE="onCompositionEnd";break e;case"compositionupdate":HE="onCompositionUpdate";break e}HE=void 0}else PA?ID(gn,ux)&&(HE="onCompositionEnd"):gn==="keydown"&&ux.keyCode===229&&(HE="onCompositionStart");HE&&(CD&&ux.locale!=="ko"&&(PA||HE!=="onCompositionStart"?HE==="onCompositionEnd"&&PA&&(qE=bD()):(qT=xE,yR="value"in qT?qT.value:qT.textContent,PA=!0)),KE=XM(fE,HE),0<KE.length&&(HE=new TD(HE,gn,null,ux,xE),TE.push({event:HE,listeners:KE}),qE?HE.data=qE:(qE=DD(ux),qE!==null&&(HE.data=qE)))),(qE=xL?_L(gn,ux):EL(gn,ux))&&(HE=XM(fE,"onBeforeInput"),0<HE.length&&(KE=new TD("onBeforeInput","beforeinput",null,ux,xE),TE.push({event:KE,listeners:HE}),KE.data=qE)),f$(TE,gn,fE,ux,xE)}hN(TE,rx)})}function ZC(gn,rx,ux){return{instance:gn,listener:rx,currentTarget:ux}}function XM(gn,rx){for(var ux=rx+"Capture",dx=[];gn!==null;){var xx=gn,Tx=xx.stateNode;if(xx=xx.tag,xx!==5&&xx!==26&&xx!==27||Tx===null||(xx=fC(gn,ux),xx!=null&&dx.unshift(ZC(gn,xx,Tx)),xx=fC(gn,rx),xx!=null&&dx.push(ZC(gn,xx,Tx))),gn.tag===3)return dx;gn=gn.return}return[]}function iC(gn){if(gn===null)return null;do gn=gn.return;while(gn&&gn.tag!==5&&gn.tag!==27);return gn||null}function mN(gn,rx,ux,dx,xx){for(var Tx=rx._reactName,Dx=[];ux!==null&&ux!==dx;){var zx=ux,Jx=zx.alternate,fE=zx.stateNode;if(zx=zx.tag,Jx!==null&&Jx===dx)break;zx!==5&&zx!==26&&zx!==27||fE===null||(Jx=fE,xx?(fE=fC(ux,Tx),fE!=null&&Dx.unshift(ZC(ux,fE,Jx))):xx||(fE=fC(ux,Tx),fE!=null&&Dx.push(ZC(ux,fE,Jx)))),ux=ux.return}Dx.length!==0&&gn.push({event:rx,listeners:Dx})}var g$=/\r\n?/g,m$=/\u0000|\uFFFD/g;function vN(gn){return(typeof gn=="string"?gn:""+gn).replace(g$,`
`).replace(m$,"")}function yN(gn,rx){return rx=vN(rx),vN(gn)===rx}function KM(){}function cS(gn,rx,ux,dx,xx,Tx){switch(ux){case"children":typeof dx=="string"?rx==="body"||rx==="textarea"&&dx===""||IA(gn,dx):(typeof dx=="number"||typeof dx=="bigint")&&rx!=="body"&&IA(gn,""+dx);break;case"className":mT(gn,"class",dx);break;case"tabIndex":mT(gn,"tabindex",dx);break;case"dir":case"role":case"viewBox":case"width":case"height":mT(gn,ux,dx);break;case"style":xD(gn,dx,Tx);break;case"data":if(rx!=="object"){mT(gn,"data",dx);break}case"src":case"href":if(dx===""&&(rx!=="a"||ux!=="href")){gn.removeAttribute(ux);break}if(dx==null||typeof dx=="function"||typeof dx=="symbol"||typeof dx=="boolean"){gn.removeAttribute(ux);break}dx=aM(""+dx),gn.setAttribute(ux,dx);break;case"action":case"formAction":if(typeof dx=="function"){gn.setAttribute(ux,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Tx=="function"&&(ux==="formAction"?(rx!=="input"&&cS(gn,rx,"name",xx.name,xx,null),cS(gn,rx,"formEncType",xx.formEncType,xx,null),cS(gn,rx,"formMethod",xx.formMethod,xx,null),cS(gn,rx,"formTarget",xx.formTarget,xx,null)):(cS(gn,rx,"encType",xx.encType,xx,null),cS(gn,rx,"method",xx.method,xx,null),cS(gn,rx,"target",xx.target,xx,null)));if(dx==null||typeof dx=="symbol"||typeof dx=="boolean"){gn.removeAttribute(ux);break}dx=aM(""+dx),gn.setAttribute(ux,dx);break;case"onClick":dx!=null&&(gn.onclick=KM);break;case"onScroll":dx!=null&&JE("scroll",gn);break;case"onScrollEnd":dx!=null&&JE("scrollend",gn);break;case"dangerouslySetInnerHTML":if(dx!=null){if(typeof dx!="object"||!("__html"in dx))throw Error(s(61));if(ux=dx.__html,ux!=null){if(xx.children!=null)throw Error(s(60));gn.innerHTML=ux}}break;case"multiple":gn.multiple=dx&&typeof dx!="function"&&typeof dx!="symbol";break;case"muted":gn.muted=dx&&typeof dx!="function"&&typeof dx!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(dx==null||typeof dx=="function"||typeof dx=="boolean"||typeof dx=="symbol"){gn.removeAttribute("xlink:href");break}ux=aM(""+dx),gn.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ux);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":dx!=null&&typeof dx!="function"&&typeof dx!="symbol"?gn.setAttribute(ux,""+dx):gn.removeAttribute(ux);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":dx&&typeof dx!="function"&&typeof dx!="symbol"?gn.setAttribute(ux,""):gn.removeAttribute(ux);break;case"capture":case"download":dx===!0?gn.setAttribute(ux,""):dx!==!1&&dx!=null&&typeof dx!="function"&&typeof dx!="symbol"?gn.setAttribute(ux,dx):gn.removeAttribute(ux);break;case"cols":case"rows":case"size":case"span":dx!=null&&typeof dx!="function"&&typeof dx!="symbol"&&!isNaN(dx)&&1<=dx?gn.setAttribute(ux,dx):gn.removeAttribute(ux);break;case"rowSpan":case"start":dx==null||typeof dx=="function"||typeof dx=="symbol"||isNaN(dx)?gn.removeAttribute(ux):gn.setAttribute(ux,dx);break;case"popover":JE("beforetoggle",gn),JE("toggle",gn),BS(gn,"popover",dx);break;case"xlinkActuate":wS(gn,"http://www.w3.org/1999/xlink","xlink:actuate",dx);break;case"xlinkArcrole":wS(gn,"http://www.w3.org/1999/xlink","xlink:arcrole",dx);break;case"xlinkRole":wS(gn,"http://www.w3.org/1999/xlink","xlink:role",dx);break;case"xlinkShow":wS(gn,"http://www.w3.org/1999/xlink","xlink:show",dx);break;case"xlinkTitle":wS(gn,"http://www.w3.org/1999/xlink","xlink:title",dx);break;case"xlinkType":wS(gn,"http://www.w3.org/1999/xlink","xlink:type",dx);break;case"xmlBase":wS(gn,"http://www.w3.org/XML/1998/namespace","xml:base",dx);break;case"xmlLang":wS(gn,"http://www.w3.org/XML/1998/namespace","xml:lang",dx);break;case"xmlSpace":wS(gn,"http://www.w3.org/XML/1998/namespace","xml:space",dx);break;case"is":BS(gn,"is",dx);break;case"innerText":case"textContent":break;default:(!(2<ux.length)||ux[0]!=="o"&&ux[0]!=="O"||ux[1]!=="n"&&ux[1]!=="N")&&(ux=jN.get(ux)||ux,BS(gn,ux,dx))}}function JI(gn,rx,ux,dx,xx,Tx){switch(ux){case"style":xD(gn,dx,Tx);break;case"dangerouslySetInnerHTML":if(dx!=null){if(typeof dx!="object"||!("__html"in dx))throw Error(s(61));if(ux=dx.__html,ux!=null){if(xx.children!=null)throw Error(s(60));gn.innerHTML=ux}}break;case"children":typeof dx=="string"?IA(gn,dx):(typeof dx=="number"||typeof dx=="bigint")&&IA(gn,""+dx);break;case"onScroll":dx!=null&&JE("scroll",gn);break;case"onScrollEnd":dx!=null&&JE("scrollend",gn);break;case"onClick":dx!=null&&(gn.onclick=KM);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gS.hasOwnProperty(ux))e:{if(ux[0]==="o"&&ux[1]==="n"&&(xx=ux.endsWith("Capture"),rx=ux.slice(2,xx?ux.length-7:void 0),Tx=gn[kE]||null,Tx=Tx!=null?Tx[ux]:null,typeof Tx=="function"&&gn.removeEventListener(rx,Tx,xx),typeof dx=="function")){typeof Tx!="function"&&Tx!==null&&(ux in gn?gn[ux]=null:gn.hasAttribute(ux)&&gn.removeAttribute(ux)),gn.addEventListener(rx,dx,xx);break e}ux in gn?gn[ux]=dx:dx===!0?gn.setAttribute(ux,""):BS(gn,ux,dx)}}}function US(gn,rx,ux){switch(rx){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":JE("error",gn),JE("load",gn);var dx=!1,xx=!1,Tx;for(Tx in ux)if(ux.hasOwnProperty(Tx)){var Dx=ux[Tx];if(Dx!=null)switch(Tx){case"src":dx=!0;break;case"srcSet":xx=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,rx));default:cS(gn,rx,Tx,Dx,ux,null)}}xx&&cS(gn,rx,"srcSet",ux.srcSet,ux,null),dx&&cS(gn,rx,"src",ux.src,ux,null);return;case"input":JE("invalid",gn);var zx=Tx=Dx=xx=null,Jx=null,fE=null;for(dx in ux)if(ux.hasOwnProperty(dx)){var xE=ux[dx];if(xE!=null)switch(dx){case"name":xx=xE;break;case"type":Dx=xE;break;case"checked":Jx=xE;break;case"defaultChecked":fE=xE;break;case"value":Tx=xE;break;case"defaultValue":zx=xE;break;case"children":case"dangerouslySetInnerHTML":if(xE!=null)throw Error(s(137,rx));break;default:cS(gn,rx,dx,xE,ux,null)}}cC(gn,Tx,zx,Jx,fE,Dx,xx,!1),CA(gn);return;case"select":JE("invalid",gn),dx=Dx=Tx=null;for(xx in ux)if(ux.hasOwnProperty(xx)&&(zx=ux[xx],zx!=null))switch(xx){case"value":Tx=zx;break;case"defaultValue":Dx=zx;break;case"multiple":dx=zx;default:cS(gn,rx,xx,zx,ux,null)}rx=Tx,ux=Dx,gn.multiple=!!dx,rx!=null?RA(gn,!!dx,rx,!1):ux!=null&&RA(gn,!!dx,ux,!0);return;case"textarea":JE("invalid",gn),Tx=xx=dx=null;for(Dx in ux)if(ux.hasOwnProperty(Dx)&&(zx=ux[Dx],zx!=null))switch(Dx){case"value":dx=zx;break;case"defaultValue":xx=zx;break;case"children":Tx=zx;break;case"dangerouslySetInnerHTML":if(zx!=null)throw Error(s(91));break;default:cS(gn,rx,Dx,zx,ux,null)}vD(gn,dx,xx,Tx),CA(gn);return;case"option":for(Jx in ux)if(ux.hasOwnProperty(Jx)&&(dx=ux[Jx],dx!=null))switch(Jx){case"selected":gn.selected=dx&&typeof dx!="function"&&typeof dx!="symbol";break;default:cS(gn,rx,Jx,dx,ux,null)}return;case"dialog":JE("beforetoggle",gn),JE("toggle",gn),JE("cancel",gn),JE("close",gn);break;case"iframe":case"object":JE("load",gn);break;case"video":case"audio":for(dx=0;dx<jC.length;dx++)JE(jC[dx],gn);break;case"image":JE("error",gn),JE("load",gn);break;case"details":JE("toggle",gn);break;case"embed":case"source":case"link":JE("error",gn),JE("load",gn);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fE in ux)if(ux.hasOwnProperty(fE)&&(dx=ux[fE],dx!=null))switch(fE){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,rx));default:cS(gn,rx,fE,dx,ux,null)}return;default:if(dR(rx)){for(xE in ux)ux.hasOwnProperty(xE)&&(dx=ux[xE],dx!==void 0&&JI(gn,rx,xE,dx,ux,void 0));return}}for(zx in ux)ux.hasOwnProperty(zx)&&(dx=ux[zx],dx!=null&&cS(gn,rx,zx,dx,ux,null))}function v$(gn,rx,ux,dx){switch(rx){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var xx=null,Tx=null,Dx=null,zx=null,Jx=null,fE=null,xE=null;for(dE in ux){var TE=ux[dE];if(ux.hasOwnProperty(dE)&&TE!=null)switch(dE){case"checked":break;case"value":break;case"defaultValue":Jx=TE;default:dx.hasOwnProperty(dE)||cS(gn,rx,dE,null,dx,TE)}}for(var pE in dx){var dE=dx[pE];if(TE=ux[pE],dx.hasOwnProperty(pE)&&(dE!=null||TE!=null))switch(pE){case"type":Tx=dE;break;case"name":xx=dE;break;case"checked":fE=dE;break;case"defaultChecked":xE=dE;break;case"value":Dx=dE;break;case"defaultValue":zx=dE;break;case"children":case"dangerouslySetInnerHTML":if(dE!=null)throw Error(s(137,rx));break;default:dE!==TE&&cS(gn,rx,pE,dE,dx,TE)}}fR(gn,Dx,zx,Jx,fE,xE,Tx,xx);return;case"select":dE=Dx=zx=pE=null;for(Tx in ux)if(Jx=ux[Tx],ux.hasOwnProperty(Tx)&&Jx!=null)switch(Tx){case"value":break;case"multiple":dE=Jx;default:dx.hasOwnProperty(Tx)||cS(gn,rx,Tx,null,dx,Jx)}for(xx in dx)if(Tx=dx[xx],Jx=ux[xx],dx.hasOwnProperty(xx)&&(Tx!=null||Jx!=null))switch(xx){case"value":pE=Tx;break;case"defaultValue":zx=Tx;break;case"multiple":Dx=Tx;default:Tx!==Jx&&cS(gn,rx,xx,Tx,dx,Jx)}rx=zx,ux=Dx,dx=dE,pE!=null?RA(gn,!!ux,pE,!1):!!dx!=!!ux&&(rx!=null?RA(gn,!!ux,rx,!0):RA(gn,!!ux,ux?[]:"",!1));return;case"textarea":dE=pE=null;for(zx in ux)if(xx=ux[zx],ux.hasOwnProperty(zx)&&xx!=null&&!dx.hasOwnProperty(zx))switch(zx){case"value":break;case"children":break;default:cS(gn,rx,zx,null,dx,xx)}for(Dx in dx)if(xx=dx[Dx],Tx=ux[Dx],dx.hasOwnProperty(Dx)&&(xx!=null||Tx!=null))switch(Dx){case"value":pE=xx;break;case"defaultValue":dE=xx;break;case"children":break;case"dangerouslySetInnerHTML":if(xx!=null)throw Error(s(91));break;default:xx!==Tx&&cS(gn,rx,Dx,xx,dx,Tx)}mD(gn,pE,dE);return;case"option":for(var jE in ux)if(pE=ux[jE],ux.hasOwnProperty(jE)&&pE!=null&&!dx.hasOwnProperty(jE))switch(jE){case"selected":gn.selected=!1;break;default:cS(gn,rx,jE,null,dx,pE)}for(Jx in dx)if(pE=dx[Jx],dE=ux[Jx],dx.hasOwnProperty(Jx)&&pE!==dE&&(pE!=null||dE!=null))switch(Jx){case"selected":gn.selected=pE&&typeof pE!="function"&&typeof pE!="symbol";break;default:cS(gn,rx,Jx,pE,dx,dE)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var VE in ux)pE=ux[VE],ux.hasOwnProperty(VE)&&pE!=null&&!dx.hasOwnProperty(VE)&&cS(gn,rx,VE,null,dx,pE);for(fE in dx)if(pE=dx[fE],dE=ux[fE],dx.hasOwnProperty(fE)&&pE!==dE&&(pE!=null||dE!=null))switch(fE){case"children":case"dangerouslySetInnerHTML":if(pE!=null)throw Error(s(137,rx));break;default:cS(gn,rx,fE,pE,dx,dE)}return;default:if(dR(rx)){for(var fS in ux)pE=ux[fS],ux.hasOwnProperty(fS)&&pE!==void 0&&!dx.hasOwnProperty(fS)&&JI(gn,rx,fS,void 0,dx,pE);for(xE in dx)pE=dx[xE],dE=ux[xE],!dx.hasOwnProperty(xE)||pE===dE||pE===void 0&&dE===void 0||JI(gn,rx,xE,pE,dx,dE);return}}for(var sE in ux)pE=ux[sE],ux.hasOwnProperty(sE)&&pE!=null&&!dx.hasOwnProperty(sE)&&cS(gn,rx,sE,null,dx,pE);for(TE in dx)pE=dx[TE],dE=ux[TE],!dx.hasOwnProperty(TE)||pE===dE||pE==null&&dE==null||cS(gn,rx,TE,pE,dx,dE)}var eD=null,tD=null;function QM(gn){return gn.nodeType===9?gn:gn.ownerDocument}function xN(gn){switch(gn){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _N(gn,rx){if(gn===0)switch(rx){case"svg":return 1;case"math":return 2;default:return 0}return gn===1&&rx==="foreignObject"?0:gn}function rD(gn,rx){return gn==="textarea"||gn==="noscript"||typeof rx.children=="string"||typeof rx.children=="number"||typeof rx.children=="bigint"||typeof rx.dangerouslySetInnerHTML=="object"&&rx.dangerouslySetInnerHTML!==null&&rx.dangerouslySetInnerHTML.__html!=null}var nD=null;function y$(){var gn=window.event;return gn&&gn.type==="popstate"?gn===nD?!1:(nD=gn,!0):(nD=null,!1)}var EN=typeof setTimeout=="function"?setTimeout:void 0,x$=typeof clearTimeout=="function"?clearTimeout:void 0,bN=typeof Promise=="function"?Promise:void 0,_$=typeof queueMicrotask=="function"?queueMicrotask:typeof bN<"u"?function(gn){return bN.resolve(null).then(gn).catch(E$)}:EN;function E$(gn){setTimeout(function(){throw gn})}function nA(gn){return gn==="head"}function SN(gn,rx){var ux=rx,dx=0,xx=0;do{var Tx=ux.nextSibling;if(gn.removeChild(ux),Tx&&Tx.nodeType===8)if(ux=Tx.data,ux==="/$"){if(0<dx&&8>dx){ux=dx;var Dx=gn.ownerDocument;if(ux&1&&YC(Dx.documentElement),ux&2&&YC(Dx.body),ux&4)for(ux=Dx.head,YC(ux),Dx=ux.firstChild;Dx;){var zx=Dx.nextSibling,Jx=Dx.nodeName;Dx[hS]||Jx==="SCRIPT"||Jx==="STYLE"||Jx==="LINK"&&Dx.rel.toLowerCase()==="stylesheet"||ux.removeChild(Dx),Dx=zx}}if(xx===0){gn.removeChild(Tx),rM(rx);return}xx--}else ux==="$"||ux==="$?"||ux==="$!"?xx++:dx=ux.charCodeAt(0)-48;else dx=0;ux=Tx}while(ux);rM(rx)}function iD(gn){var rx=gn.firstChild;for(rx&&rx.nodeType===10&&(rx=rx.nextSibling);rx;){var ux=rx;switch(rx=rx.nextSibling,ux.nodeName){case"HTML":case"HEAD":case"BODY":iD(ux),qS(ux);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ux.rel.toLowerCase()==="stylesheet")continue}gn.removeChild(ux)}}function b$(gn,rx,ux,dx){for(;gn.nodeType===1;){var xx=ux;if(gn.nodeName.toLowerCase()!==rx.toLowerCase()){if(!dx&&(gn.nodeName!=="INPUT"||gn.type!=="hidden"))break}else if(dx){if(!gn[hS])switch(rx){case"meta":if(!gn.hasAttribute("itemprop"))break;return gn;case"link":if(Tx=gn.getAttribute("rel"),Tx==="stylesheet"&&gn.hasAttribute("data-precedence"))break;if(Tx!==xx.rel||gn.getAttribute("href")!==(xx.href==null||xx.href===""?null:xx.href)||gn.getAttribute("crossorigin")!==(xx.crossOrigin==null?null:xx.crossOrigin)||gn.getAttribute("title")!==(xx.title==null?null:xx.title))break;return gn;case"style":if(gn.hasAttribute("data-precedence"))break;return gn;case"script":if(Tx=gn.getAttribute("src"),(Tx!==(xx.src==null?null:xx.src)||gn.getAttribute("type")!==(xx.type==null?null:xx.type)||gn.getAttribute("crossorigin")!==(xx.crossOrigin==null?null:xx.crossOrigin))&&Tx&&gn.hasAttribute("async")&&!gn.hasAttribute("itemprop"))break;return gn;default:return gn}}else if(rx==="input"&&gn.type==="hidden"){var Tx=xx.name==null?null:""+xx.name;if(xx.type==="hidden"&&gn.getAttribute("name")===Tx)return gn}else return gn;if(gn=_T(gn.nextSibling),gn===null)break}return null}function S$(gn,rx,ux){if(rx==="")return null;for(;gn.nodeType!==3;)if((gn.nodeType!==1||gn.nodeName!=="INPUT"||gn.type!=="hidden")&&!ux||(gn=_T(gn.nextSibling),gn===null))return null;return gn}function aD(gn){return gn.data==="$!"||gn.data==="$?"&&gn.ownerDocument.readyState==="complete"}function w$(gn,rx){var ux=gn.ownerDocument;if(gn.data!=="$?"||ux.readyState==="complete")rx();else{var dx=function(){rx(),ux.removeEventListener("DOMContentLoaded",dx)};ux.addEventListener("DOMContentLoaded",dx),gn._reactRetry=dx}}function _T(gn){for(;gn!=null;gn=gn.nextSibling){var rx=gn.nodeType;if(rx===1||rx===3)break;if(rx===8){if(rx=gn.data,rx==="$"||rx==="$!"||rx==="$?"||rx==="F!"||rx==="F")break;if(rx==="/$")return null}}return gn}var oD=null;function wN(gn){gn=gn.previousSibling;for(var rx=0;gn;){if(gn.nodeType===8){var ux=gn.data;if(ux==="$"||ux==="$!"||ux==="$?"){if(rx===0)return gn;rx--}else ux==="/$"&&rx++}gn=gn.previousSibling}return null}function TN(gn,rx,ux){switch(rx=QM(ux),gn){case"html":if(gn=rx.documentElement,!gn)throw Error(s(452));return gn;case"head":if(gn=rx.head,!gn)throw Error(s(453));return gn;case"body":if(gn=rx.body,!gn)throw Error(s(454));return gn;default:throw Error(s(451))}}function YC(gn){for(var rx=gn.attributes;rx.length;)gn.removeAttributeNode(rx[0]);qS(gn)}var gT=new Map,AN=new Set;function JM(gn){return typeof gn.getRootNode=="function"?gn.getRootNode():gn.nodeType===9?gn:gn.ownerDocument}var UT=Ax.d;Ax.d={f:T$,r:A$,D:C$,C:M$,L:R$,m:I$,X:O$,S:D$,M:P$};function T$(){var gn=UT.f(),rx=VM();return gn||rx}function A$(gn){var rx=VS(gn);rx!==null&&rx.tag===5&&rx.type==="form"?jO(rx):UT.r(gn)}var aC=typeof document>"u"?null:document;function CN(gn,rx,ux){var dx=aC;if(dx&&typeof rx=="string"&&rx){var xx=lT(rx);xx='link[rel="'+gn+'"][href="'+xx+'"]',typeof ux=="string"&&(xx+='[crossorigin="'+ux+'"]'),AN.has(xx)||(AN.add(xx),gn={rel:gn,crossOrigin:ux,href:rx},dx.querySelector(xx)===null&&(rx=dx.createElement("link"),US(rx,"link",gn),zE(rx),dx.head.appendChild(rx)))}}function C$(gn){UT.D(gn),CN("dns-prefetch",gn,null)}function M$(gn,rx){UT.C(gn,rx),CN("preconnect",gn,rx)}function R$(gn,rx,ux){UT.L(gn,rx,ux);var dx=aC;if(dx&&gn&&rx){var xx='link[rel="preload"][as="'+lT(rx)+'"]';rx==="image"&&ux&&ux.imageSrcSet?(xx+='[imagesrcset="'+lT(ux.imageSrcSet)+'"]',typeof ux.imageSizes=="string"&&(xx+='[imagesizes="'+lT(ux.imageSizes)+'"]')):xx+='[href="'+lT(gn)+'"]';var Tx=xx;switch(rx){case"style":Tx=oC(gn);break;case"script":Tx=sC(gn)}gT.has(Tx)||(gn=en({rel:"preload",href:rx==="image"&&ux&&ux.imageSrcSet?void 0:gn,as:rx},ux),gT.set(Tx,gn),dx.querySelector(xx)!==null||rx==="style"&&dx.querySelector(WC(Tx))||rx==="script"&&dx.querySelector(XC(Tx))||(rx=dx.createElement("link"),US(rx,"link",gn),zE(rx),dx.head.appendChild(rx)))}}function I$(gn,rx){UT.m(gn,rx);var ux=aC;if(ux&&gn){var dx=rx&&typeof rx.as=="string"?rx.as:"script",xx='link[rel="modulepreload"][as="'+lT(dx)+'"][href="'+lT(gn)+'"]',Tx=xx;switch(dx){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Tx=sC(gn)}if(!gT.has(Tx)&&(gn=en({rel:"modulepreload",href:gn},rx),gT.set(Tx,gn),ux.querySelector(xx)===null)){switch(dx){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ux.querySelector(XC(Tx)))return}dx=ux.createElement("link"),US(dx,"link",gn),zE(dx),ux.head.appendChild(dx)}}}function D$(gn,rx,ux){UT.S(gn,rx,ux);var dx=aC;if(dx&&gn){var xx=RE(dx).hoistableStyles,Tx=oC(gn);rx=rx||"default";var Dx=xx.get(Tx);if(!Dx){var zx={loading:0,preload:null};if(Dx=dx.querySelector(WC(Tx)))zx.loading=5;else{gn=en({rel:"stylesheet",href:gn,"data-precedence":rx},ux),(ux=gT.get(Tx))&&sD(gn,ux);var Jx=Dx=dx.createElement("link");zE(Jx),US(Jx,"link",gn),Jx._p=new Promise(function(fE,xE){Jx.onload=fE,Jx.onerror=xE}),Jx.addEventListener("load",function(){zx.loading|=1}),Jx.addEventListener("error",function(){zx.loading|=2}),zx.loading|=4,eR(Dx,rx,dx)}Dx={type:"stylesheet",instance:Dx,count:1,state:zx},xx.set(Tx,Dx)}}}function O$(gn,rx){UT.X(gn,rx);var ux=aC;if(ux&&gn){var dx=RE(ux).hoistableScripts,xx=sC(gn),Tx=dx.get(xx);Tx||(Tx=ux.querySelector(XC(xx)),Tx||(gn=en({src:gn,async:!0},rx),(rx=gT.get(xx))&&lD(gn,rx),Tx=ux.createElement("script"),zE(Tx),US(Tx,"link",gn),ux.head.appendChild(Tx)),Tx={type:"script",instance:Tx,count:1,state:null},dx.set(xx,Tx))}}function P$(gn,rx){UT.M(gn,rx);var ux=aC;if(ux&&gn){var dx=RE(ux).hoistableScripts,xx=sC(gn),Tx=dx.get(xx);Tx||(Tx=ux.querySelector(XC(xx)),Tx||(gn=en({src:gn,async:!0,type:"module"},rx),(rx=gT.get(xx))&&lD(gn,rx),Tx=ux.createElement("script"),zE(Tx),US(Tx,"link",gn),ux.head.appendChild(Tx)),Tx={type:"script",instance:Tx,count:1,state:null},dx.set(xx,Tx))}}function MN(gn,rx,ux,dx){var xx=(xx=Bx.current)?JM(xx):null;if(!xx)throw Error(s(446));switch(gn){case"meta":case"title":return null;case"style":return typeof ux.precedence=="string"&&typeof ux.href=="string"?(rx=oC(ux.href),ux=RE(xx).hoistableStyles,dx=ux.get(rx),dx||(dx={type:"style",instance:null,count:0,state:null},ux.set(rx,dx)),dx):{type:"void",instance:null,count:0,state:null};case"link":if(ux.rel==="stylesheet"&&typeof ux.href=="string"&&typeof ux.precedence=="string"){gn=oC(ux.href);var Tx=RE(xx).hoistableStyles,Dx=Tx.get(gn);if(Dx||(xx=xx.ownerDocument||xx,Dx={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Tx.set(gn,Dx),(Tx=xx.querySelector(WC(gn)))&&!Tx._p&&(Dx.instance=Tx,Dx.state.loading=5),gT.has(gn)||(ux={rel:"preload",as:"style",href:ux.href,crossOrigin:ux.crossOrigin,integrity:ux.integrity,media:ux.media,hrefLang:ux.hrefLang,referrerPolicy:ux.referrerPolicy},gT.set(gn,ux),Tx||N$(xx,gn,ux,Dx.state))),rx&&dx===null)throw Error(s(528,""));return Dx}if(rx&&dx!==null)throw Error(s(529,""));return null;case"script":return rx=ux.async,ux=ux.src,typeof ux=="string"&&rx&&typeof rx!="function"&&typeof rx!="symbol"?(rx=sC(ux),ux=RE(xx).hoistableScripts,dx=ux.get(rx),dx||(dx={type:"script",instance:null,count:0,state:null},ux.set(rx,dx)),dx):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,gn))}}function oC(gn){return'href="'+lT(gn)+'"'}function WC(gn){return'link[rel="stylesheet"]['+gn+"]"}function RN(gn){return en({},gn,{"data-precedence":gn.precedence,precedence:null})}function N$(gn,rx,ux,dx){gn.querySelector('link[rel="preload"][as="style"]['+rx+"]")?dx.loading=1:(rx=gn.createElement("link"),dx.preload=rx,rx.addEventListener("load",function(){return dx.loading|=1}),rx.addEventListener("error",function(){return dx.loading|=2}),US(rx,"link",ux),zE(rx),gn.head.appendChild(rx))}function sC(gn){return'[src="'+lT(gn)+'"]'}function XC(gn){return"script[async]"+gn}function IN(gn,rx,ux){if(rx.count++,rx.instance===null)switch(rx.type){case"style":var dx=gn.querySelector('style[data-href~="'+lT(ux.href)+'"]');if(dx)return rx.instance=dx,zE(dx),dx;var xx=en({},ux,{"data-href":ux.href,"data-precedence":ux.precedence,href:null,precedence:null});return dx=(gn.ownerDocument||gn).createElement("style"),zE(dx),US(dx,"style",xx),eR(dx,ux.precedence,gn),rx.instance=dx;case"stylesheet":xx=oC(ux.href);var Tx=gn.querySelector(WC(xx));if(Tx)return rx.state.loading|=4,rx.instance=Tx,zE(Tx),Tx;dx=RN(ux),(xx=gT.get(xx))&&sD(dx,xx),Tx=(gn.ownerDocument||gn).createElement("link"),zE(Tx);var Dx=Tx;return Dx._p=new Promise(function(zx,Jx){Dx.onload=zx,Dx.onerror=Jx}),US(Tx,"link",dx),rx.state.loading|=4,eR(Tx,ux.precedence,gn),rx.instance=Tx;case"script":return Tx=sC(ux.src),(xx=gn.querySelector(XC(Tx)))?(rx.instance=xx,zE(xx),xx):(dx=ux,(xx=gT.get(Tx))&&(dx=en({},ux),lD(dx,xx)),gn=gn.ownerDocument||gn,xx=gn.createElement("script"),zE(xx),US(xx,"link",dx),gn.head.appendChild(xx),rx.instance=xx);case"void":return null;default:throw Error(s(443,rx.type))}else rx.type==="stylesheet"&&(rx.state.loading&4)===0&&(dx=rx.instance,rx.state.loading|=4,eR(dx,ux.precedence,gn));return rx.instance}function eR(gn,rx,ux){for(var dx=ux.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),xx=dx.length?dx[dx.length-1]:null,Tx=xx,Dx=0;Dx<dx.length;Dx++){var zx=dx[Dx];if(zx.dataset.precedence===rx)Tx=zx;else if(Tx!==xx)break}Tx?Tx.parentNode.insertBefore(gn,Tx.nextSibling):(rx=ux.nodeType===9?ux.head:ux,rx.insertBefore(gn,rx.firstChild))}function sD(gn,rx){gn.crossOrigin==null&&(gn.crossOrigin=rx.crossOrigin),gn.referrerPolicy==null&&(gn.referrerPolicy=rx.referrerPolicy),gn.title==null&&(gn.title=rx.title)}function lD(gn,rx){gn.crossOrigin==null&&(gn.crossOrigin=rx.crossOrigin),gn.referrerPolicy==null&&(gn.referrerPolicy=rx.referrerPolicy),gn.integrity==null&&(gn.integrity=rx.integrity)}var tR=null;function DN(gn,rx,ux){if(tR===null){var dx=new Map,xx=tR=new Map;xx.set(ux,dx)}else xx=tR,dx=xx.get(ux),dx||(dx=new Map,xx.set(ux,dx));if(dx.has(gn))return dx;for(dx.set(gn,null),ux=ux.getElementsByTagName(gn),xx=0;xx<ux.length;xx++){var Tx=ux[xx];if(!(Tx[hS]||Tx[$E]||gn==="link"&&Tx.getAttribute("rel")==="stylesheet")&&Tx.namespaceURI!=="http://www.w3.org/2000/svg"){var Dx=Tx.getAttribute(rx)||"";Dx=gn+Dx;var zx=dx.get(Dx);zx?zx.push(Tx):dx.set(Dx,[Tx])}}return dx}function ON(gn,rx,ux){gn=gn.ownerDocument||gn,gn.head.insertBefore(ux,rx==="title"?gn.querySelector("head > title"):null)}function L$(gn,rx,ux){if(ux===1||rx.itemProp!=null)return!1;switch(gn){case"meta":case"title":return!0;case"style":if(typeof rx.precedence!="string"||typeof rx.href!="string"||rx.href==="")break;return!0;case"link":if(typeof rx.rel!="string"||typeof rx.href!="string"||rx.href===""||rx.onLoad||rx.onError)break;switch(rx.rel){case"stylesheet":return gn=rx.disabled,typeof rx.precedence=="string"&&gn==null;default:return!0}case"script":if(rx.async&&typeof rx.async!="function"&&typeof rx.async!="symbol"&&!rx.onLoad&&!rx.onError&&rx.src&&typeof rx.src=="string")return!0}return!1}function PN(gn){return!(gn.type==="stylesheet"&&(gn.state.loading&3)===0)}var KC=null;function $$(){}function B$(gn,rx,ux){if(KC===null)throw Error(s(475));var dx=KC;if(rx.type==="stylesheet"&&(typeof ux.media!="string"||matchMedia(ux.media).matches!==!1)&&(rx.state.loading&4)===0){if(rx.instance===null){var xx=oC(ux.href),Tx=gn.querySelector(WC(xx));if(Tx){gn=Tx._p,gn!==null&&typeof gn=="object"&&typeof gn.then=="function"&&(dx.count++,dx=rR.bind(dx),gn.then(dx,dx)),rx.state.loading|=4,rx.instance=Tx,zE(Tx);return}Tx=gn.ownerDocument||gn,ux=RN(ux),(xx=gT.get(xx))&&sD(ux,xx),Tx=Tx.createElement("link"),zE(Tx);var Dx=Tx;Dx._p=new Promise(function(zx,Jx){Dx.onload=zx,Dx.onerror=Jx}),US(Tx,"link",ux),rx.instance=Tx}dx.stylesheets===null&&(dx.stylesheets=new Map),dx.stylesheets.set(rx,gn),(gn=rx.state.preload)&&(rx.state.loading&3)===0&&(dx.count++,rx=rR.bind(dx),gn.addEventListener("load",rx),gn.addEventListener("error",rx))}}function k$(){if(KC===null)throw Error(s(475));var gn=KC;return gn.stylesheets&&gn.count===0&&uD(gn,gn.stylesheets),0<gn.count?function(rx){var ux=setTimeout(function(){if(gn.stylesheets&&uD(gn,gn.stylesheets),gn.unsuspend){var dx=gn.unsuspend;gn.unsuspend=null,dx()}},6e4);return gn.unsuspend=rx,function(){gn.unsuspend=null,clearTimeout(ux)}}:null}function rR(){if(this.count--,this.count===0){if(this.stylesheets)uD(this,this.stylesheets);else if(this.unsuspend){var gn=this.unsuspend;this.unsuspend=null,gn()}}}var nR=null;function uD(gn,rx){gn.stylesheets=null,gn.unsuspend!==null&&(gn.count++,nR=new Map,rx.forEach(F$,gn),nR=null,rR.call(gn))}function F$(gn,rx){if(!(rx.state.loading&4)){var ux=nR.get(gn);if(ux)var dx=ux.get(null);else{ux=new Map,nR.set(gn,ux);for(var xx=gn.querySelectorAll("link[data-precedence],style[data-precedence]"),Tx=0;Tx<xx.length;Tx++){var Dx=xx[Tx];(Dx.nodeName==="LINK"||Dx.getAttribute("media")!=="not all")&&(ux.set(Dx.dataset.precedence,Dx),dx=Dx)}dx&&ux.set(null,dx)}xx=rx.instance,Dx=xx.getAttribute("data-precedence"),Tx=ux.get(Dx)||dx,Tx===dx&&ux.set(null,xx),ux.set(Dx,xx),this.count++,dx=rR.bind(this),xx.addEventListener("load",dx),xx.addEventListener("error",dx),Tx?Tx.parentNode.insertBefore(xx,Tx.nextSibling):(gn=gn.nodeType===9?gn.head:gn,gn.insertBefore(xx,gn.firstChild)),rx.state.loading|=4}}var QC={$$typeof:sx,Provider:null,Consumer:null,_currentValue:Mx,_currentValue2:Mx,_threadCount:0};function U$(gn,rx,ux,dx,xx,Tx,Dx,zx){this.tag=1,this.containerInfo=gn,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yE(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yE(0),this.hiddenUpdates=yE(null),this.identifierPrefix=dx,this.onUncaughtError=xx,this.onCaughtError=Tx,this.onRecoverableError=Dx,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=zx,this.incompleteTransitions=new Map}function NN(gn,rx,ux,dx,xx,Tx,Dx,zx,Jx,fE,xE,TE){return gn=new U$(gn,rx,ux,Dx,zx,Jx,fE,TE),rx=1,Tx===!0&&(rx|=24),Tx=tT(3,null,null,rx),gn.current=Tx,Tx.stateNode=gn,rx=zR(),rx.refCount++,gn.pooledCache=rx,rx.refCount++,Tx.memoizedState={element:dx,isDehydrated:ux,cache:rx},ZR(Tx),gn}function LN(gn){return gn?(gn=kA,gn):kA}function $N(gn,rx,ux,dx,xx,Tx){xx=LN(xx),dx.context===null?dx.context=xx:dx.pendingContext=xx,dx=VT(rx),dx.payload={element:ux},Tx=Tx===void 0?null:Tx,Tx!==null&&(dx.callback=Tx),ux=HT(gn,dx,rx),ux!==null&&(oT(ux,gn,rx),MC(ux,gn,rx))}function BN(gn,rx){if(gn=gn.memoizedState,gn!==null&&gn.dehydrated!==null){var ux=gn.retryLane;gn.retryLane=ux!==0&&ux<rx?ux:rx}}function cD(gn,rx){BN(gn,rx),(gn=gn.alternate)&&BN(gn,rx)}function kN(gn){if(gn.tag===13){var rx=BA(gn,67108864);rx!==null&&oT(rx,gn,67108864),cD(gn,67108864)}}var iR=!0;function q$(gn,rx,ux,dx){var xx=bx.T;bx.T=null;var Tx=Ax.p;try{Ax.p=2,fD(gn,rx,ux,dx)}finally{Ax.p=Tx,bx.T=xx}}function G$(gn,rx,ux,dx){var xx=bx.T;bx.T=null;var Tx=Ax.p;try{Ax.p=8,fD(gn,rx,ux,dx)}finally{Ax.p=Tx,bx.T=xx}}function fD(gn,rx,ux,dx){if(iR){var xx=pD(dx);if(xx===null)QI(gn,rx,dx,aR,ux),UN(gn,dx);else if(V$(xx,gn,rx,ux,dx))dx.stopPropagation();else if(UN(gn,dx),rx&4&&-1<z$.indexOf(gn)){for(;xx!==null;){var Tx=VS(xx);if(Tx!==null)switch(Tx.tag){case 3:if(Tx=Tx.stateNode,Tx.current.memoizedState.isDehydrated){var Dx=_E(Tx.pendingLanes);if(Dx!==0){var zx=Tx;for(zx.pendingLanes|=2,zx.entangledLanes|=2;Dx;){var Jx=1<<31-Qx(Dx);zx.entanglements[1]|=Jx,Dx&=~Jx}TT(Tx),(sS&6)===0&&(GM=aE()+500,HC(0))}}break;case 13:zx=BA(Tx,2),zx!==null&&oT(zx,Tx,2),VM(),cD(Tx,2)}if(Tx=pD(dx),Tx===null&&QI(gn,rx,dx,aR,ux),Tx===xx)break;xx=Tx}xx!==null&&dx.stopPropagation()}else QI(gn,rx,dx,null,ux)}}function pD(gn){return gn=gR(gn),dD(gn)}var aR=null;function dD(gn){if(aR=null,gn=$S(gn),gn!==null){var rx=u(gn);if(rx===null)gn=null;else{var ux=rx.tag;if(ux===13){if(gn=c(rx),gn!==null)return gn;gn=null}else if(ux===3){if(rx.stateNode.current.memoizedState.isDehydrated)return rx.tag===3?rx.stateNode.containerInfo:null;gn=null}else rx!==gn&&(gn=null)}}return aR=gn,null}function FN(gn){switch(gn){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kx()){case ME:return 2;case IE:return 8;case wE:case bE:return 32;case UE:return 268435456;default:return 32}default:return 32}}var hD=!1,iA=null,aA=null,oA=null,JC=new Map,eM=new Map,sA=[],z$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UN(gn,rx){switch(gn){case"focusin":case"focusout":iA=null;break;case"dragenter":case"dragleave":aA=null;break;case"mouseover":case"mouseout":oA=null;break;case"pointerover":case"pointerout":JC.delete(rx.pointerId);break;case"gotpointercapture":case"lostpointercapture":eM.delete(rx.pointerId)}}function tM(gn,rx,ux,dx,xx,Tx){return gn===null||gn.nativeEvent!==Tx?(gn={blockedOn:rx,domEventName:ux,eventSystemFlags:dx,nativeEvent:Tx,targetContainers:[xx]},rx!==null&&(rx=VS(rx),rx!==null&&kN(rx)),gn):(gn.eventSystemFlags|=dx,rx=gn.targetContainers,xx!==null&&rx.indexOf(xx)===-1&&rx.push(xx),gn)}function V$(gn,rx,ux,dx,xx){switch(rx){case"focusin":return iA=tM(iA,gn,rx,ux,dx,xx),!0;case"dragenter":return aA=tM(aA,gn,rx,ux,dx,xx),!0;case"mouseover":return oA=tM(oA,gn,rx,ux,dx,xx),!0;case"pointerover":var Tx=xx.pointerId;return JC.set(Tx,tM(JC.get(Tx)||null,gn,rx,ux,dx,xx)),!0;case"gotpointercapture":return Tx=xx.pointerId,eM.set(Tx,tM(eM.get(Tx)||null,gn,rx,ux,dx,xx)),!0}return!1}function qN(gn){var rx=$S(gn.target);if(rx!==null){var ux=u(rx);if(ux!==null){if(rx=ux.tag,rx===13){if(rx=c(ux),rx!==null){gn.blockedOn=rx,LE(gn.priority,function(){if(ux.tag===13){var dx=aT();dx=Yx(dx);var xx=BA(ux,dx);xx!==null&&oT(xx,ux,dx),cD(ux,dx)}});return}}else if(rx===3&&ux.stateNode.current.memoizedState.isDehydrated){gn.blockedOn=ux.tag===3?ux.stateNode.containerInfo:null;return}}}gn.blockedOn=null}function oR(gn){if(gn.blockedOn!==null)return!1;for(var rx=gn.targetContainers;0<rx.length;){var ux=pD(gn.nativeEvent);if(ux===null){ux=gn.nativeEvent;var dx=new ux.constructor(ux.type,ux);hR=dx,ux.target.dispatchEvent(dx),hR=null}else return rx=VS(ux),rx!==null&&kN(rx),gn.blockedOn=ux,!1;rx.shift()}return!0}function GN(gn,rx,ux){oR(gn)&&ux.delete(rx)}function H$(){hD=!1,iA!==null&&oR(iA)&&(iA=null),aA!==null&&oR(aA)&&(aA=null),oA!==null&&oR(oA)&&(oA=null),JC.forEach(GN),eM.forEach(GN)}function sR(gn,rx){gn.blockedOn===rx&&(gn.blockedOn=null,hD||(hD=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,H$)))}var lR=null;function zN(gn){lR!==gn&&(lR=gn,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){lR===gn&&(lR=null);for(var rx=0;rx<gn.length;rx+=3){var ux=gn[rx],dx=gn[rx+1],xx=gn[rx+2];if(typeof dx!="function"){if(dD(dx||ux)===null)continue;break}var Tx=VS(ux);Tx!==null&&(gn.splice(rx,3),rx-=3,pI(Tx,{pending:!0,data:xx,method:ux.method,action:dx},dx,xx))}}))}function rM(gn){function rx(Jx){return sR(Jx,gn)}iA!==null&&sR(iA,gn),aA!==null&&sR(aA,gn),oA!==null&&sR(oA,gn),JC.forEach(rx),eM.forEach(rx);for(var ux=0;ux<sA.length;ux++){var dx=sA[ux];dx.blockedOn===gn&&(dx.blockedOn=null)}for(;0<sA.length&&(ux=sA[0],ux.blockedOn===null);)qN(ux),ux.blockedOn===null&&sA.shift();if(ux=(gn.ownerDocument||gn).$$reactFormReplay,ux!=null)for(dx=0;dx<ux.length;dx+=3){var xx=ux[dx],Tx=ux[dx+1],Dx=xx[kE]||null;if(typeof Tx=="function")Dx||zN(ux);else if(Dx){var zx=null;if(Tx&&Tx.hasAttribute("formAction")){if(xx=Tx,Dx=Tx[kE]||null)zx=Dx.formAction;else if(dD(xx)!==null)continue}else zx=Dx.action;typeof zx=="function"?ux[dx+1]=zx:(ux.splice(dx,3),dx-=3),zN(ux)}}}function gD(gn){this._internalRoot=gn}uR.prototype.render=gD.prototype.render=function(gn){var rx=this._internalRoot;if(rx===null)throw Error(s(409));var ux=rx.current,dx=aT();$N(ux,dx,gn,rx,null,null)},uR.prototype.unmount=gD.prototype.unmount=function(){var gn=this._internalRoot;if(gn!==null){this._internalRoot=null;var rx=gn.containerInfo;$N(gn.current,2,null,gn,null,null),VM(),rx[ZE]=null}};function uR(gn){this._internalRoot=gn}uR.prototype.unstable_scheduleHydration=function(gn){if(gn){var rx=vE();gn={blockedOn:null,target:gn,priority:rx};for(var ux=0;ux<sA.length&&rx!==0&&rx<sA[ux].priority;ux++);sA.splice(ux,0,gn),ux===0&&qN(gn)}};var VN=n.version;if(VN!=="19.1.1")throw Error(s(527,VN,"19.1.1"));Ax.findDOMNode=function(gn){var rx=gn._reactInternals;if(rx===void 0)throw typeof gn.render=="function"?Error(s(188)):(gn=Object.keys(gn).join(","),Error(s(268,gn)));return gn=Ct(rx),gn=gn!==null?ar(gn):null,gn=gn===null?null:gn.stateNode,gn};var j$={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:bx,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cR.isDisabled&&cR.supportsFiber)try{Ox=cR.inject(j$),Fx=cR}catch{}}return reactDomClient_production.createRoot=function(gn,rx){if(!l(gn))throw Error(s(299));var ux=!1,dx="",xx=oP,Tx=sP,Dx=lP,zx=null;return rx!=null&&(rx.unstable_strictMode===!0&&(ux=!0),rx.identifierPrefix!==void 0&&(dx=rx.identifierPrefix),rx.onUncaughtError!==void 0&&(xx=rx.onUncaughtError),rx.onCaughtError!==void 0&&(Tx=rx.onCaughtError),rx.onRecoverableError!==void 0&&(Dx=rx.onRecoverableError),rx.unstable_transitionCallbacks!==void 0&&(zx=rx.unstable_transitionCallbacks)),rx=NN(gn,1,!1,null,null,ux,dx,xx,Tx,Dx,zx,null),gn[ZE]=rx.current,KI(gn),new gD(rx)},reactDomClient_production.hydrateRoot=function(gn,rx,ux){if(!l(gn))throw Error(s(299));var dx=!1,xx="",Tx=oP,Dx=sP,zx=lP,Jx=null,fE=null;return ux!=null&&(ux.unstable_strictMode===!0&&(dx=!0),ux.identifierPrefix!==void 0&&(xx=ux.identifierPrefix),ux.onUncaughtError!==void 0&&(Tx=ux.onUncaughtError),ux.onCaughtError!==void 0&&(Dx=ux.onCaughtError),ux.onRecoverableError!==void 0&&(zx=ux.onRecoverableError),ux.unstable_transitionCallbacks!==void 0&&(Jx=ux.unstable_transitionCallbacks),ux.formState!==void 0&&(fE=ux.formState)),rx=NN(gn,1,!0,rx,ux??null,dx,xx,Tx,Dx,zx,Jx,fE),rx.context=LN(null),ux=rx.current,dx=aT(),dx=Yx(dx),xx=VT(dx),xx.callback=null,HT(ux,xx,dx),ux=dx,rx.current.lanes=ux,DE(rx,ux),TT(rx),gn[ZE]=rx.current,KI(gn),new uR(rx)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(t){let n=t.length;for(;--n>=0;)t[n]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(t,n,a,s,l){this.static_tree=t,this.extra_bits=n,this.extra_base=a,this.elems=s,this.max_length=l,this.has_stree=t&&t.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}const d_code=t=>t<256?_dist_code[t]:_dist_code[256+(t>>>7)],put_short=(t,n)=>{t.pending_buf[t.pending++]=n&255,t.pending_buf[t.pending++]=n>>>8&255},send_bits=(t,n,a)=>{t.bi_valid>Buf_size-a?(t.bi_buf|=n<<t.bi_valid&65535,put_short(t,t.bi_buf),t.bi_buf=n>>Buf_size-t.bi_valid,t.bi_valid+=a-Buf_size):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=a)},send_code=(t,n,a)=>{send_bits(t,a[n*2],a[n*2+1])},bi_reverse=(t,n)=>{let a=0;do a|=t&1,t>>>=1,a<<=1;while(--n>0);return a>>>1},bi_flush=t=>{t.bi_valid===16?(put_short(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},gen_bitlen=(t,n)=>{const a=n.dyn_tree,s=n.max_code,l=n.stat_desc.static_tree,u=n.stat_desc.has_stree,c=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,Ct=n.stat_desc.max_length;let ar,en,tn,on,fn,dn,Cn=0;for(on=0;on<=MAX_BITS$1;on++)t.bl_count[on]=0;for(a[t.heap[t.heap_max]*2+1]=0,ar=t.heap_max+1;ar<HEAP_SIZE$1;ar++)en=t.heap[ar],on=a[a[en*2+1]*2+1]+1,on>Ct&&(on=Ct,Cn++),a[en*2+1]=on,!(en>s)&&(t.bl_count[on]++,fn=0,en>=d&&(fn=c[en-d]),dn=a[en*2],t.opt_len+=dn*(on+fn),u&&(t.static_len+=dn*(l[en*2+1]+fn)));if(Cn!==0){do{for(on=Ct-1;t.bl_count[on]===0;)on--;t.bl_count[on]--,t.bl_count[on+1]+=2,t.bl_count[Ct]--,Cn-=2}while(Cn>0);for(on=Ct;on!==0;on--)for(en=t.bl_count[on];en!==0;)tn=t.heap[--ar],!(tn>s)&&(a[tn*2+1]!==on&&(t.opt_len+=(on-a[tn*2+1])*a[tn*2],a[tn*2+1]=on),en--)}},gen_codes=(t,n,a)=>{const s=new Array(MAX_BITS$1+1);let l=0,u,c;for(u=1;u<=MAX_BITS$1;u++)l=l+a[u-1]<<1,s[u]=l;for(c=0;c<=n;c++){let d=t[c*2+1];d!==0&&(t[c*2]=bi_reverse(s[d]++,d))}},tr_static_init=()=>{let t,n,a,s,l;const u=new Array(MAX_BITS$1+1);for(a=0,s=0;s<LENGTH_CODES$1-1;s++)for(base_length[s]=a,t=0;t<1<<extra_lbits[s];t++)_length_code[a++]=s;for(_length_code[a-1]=s,l=0,s=0;s<16;s++)for(base_dist[s]=l,t=0;t<1<<extra_dbits[s];t++)_dist_code[l++]=s;for(l>>=7;s<D_CODES$1;s++)for(base_dist[s]=l<<7,t=0;t<1<<extra_dbits[s]-7;t++)_dist_code[256+l++]=s;for(n=0;n<=MAX_BITS$1;n++)u[n]=0;for(t=0;t<=143;)static_ltree[t*2+1]=8,t++,u[8]++;for(;t<=255;)static_ltree[t*2+1]=9,t++,u[9]++;for(;t<=279;)static_ltree[t*2+1]=7,t++,u[7]++;for(;t<=287;)static_ltree[t*2+1]=8,t++,u[8]++;for(gen_codes(static_ltree,L_CODES$1+1,u),t=0;t<D_CODES$1;t++)static_dtree[t*2+1]=5,static_dtree[t*2]=bi_reverse(t,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=t=>{let n;for(n=0;n<L_CODES$1;n++)t.dyn_ltree[n*2]=0;for(n=0;n<D_CODES$1;n++)t.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES$1;n++)t.bl_tree[n*2]=0;t.dyn_ltree[END_BLOCK*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bi_windup=t=>{t.bi_valid>8?put_short(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},smaller=(t,n,a,s)=>{const l=n*2,u=a*2;return t[l]<t[u]||t[l]===t[u]&&s[n]<=s[a]},pqdownheap=(t,n,a)=>{const s=t.heap[a];let l=a<<1;for(;l<=t.heap_len&&(l<t.heap_len&&smaller(n,t.heap[l+1],t.heap[l],t.depth)&&l++,!smaller(n,s,t.heap[l],t.depth));)t.heap[a]=t.heap[l],a=l,l<<=1;t.heap[a]=s},compress_block=(t,n,a)=>{let s,l,u=0,c,d;if(t.sym_next!==0)do s=t.pending_buf[t.sym_buf+u++]&255,s+=(t.pending_buf[t.sym_buf+u++]&255)<<8,l=t.pending_buf[t.sym_buf+u++],s===0?send_code(t,l,n):(c=_length_code[l],send_code(t,c+LITERALS$1+1,n),d=extra_lbits[c],d!==0&&(l-=base_length[c],send_bits(t,l,d)),s--,c=d_code(s),send_code(t,c,a),d=extra_dbits[c],d!==0&&(s-=base_dist[c],send_bits(t,s,d)));while(u<t.sym_next);send_code(t,END_BLOCK,n)},build_tree=(t,n)=>{const a=n.dyn_tree,s=n.stat_desc.static_tree,l=n.stat_desc.has_stree,u=n.stat_desc.elems;let c,d,Ct=-1,ar;for(t.heap_len=0,t.heap_max=HEAP_SIZE$1,c=0;c<u;c++)a[c*2]!==0?(t.heap[++t.heap_len]=Ct=c,t.depth[c]=0):a[c*2+1]=0;for(;t.heap_len<2;)ar=t.heap[++t.heap_len]=Ct<2?++Ct:0,a[ar*2]=1,t.depth[ar]=0,t.opt_len--,l&&(t.static_len-=s[ar*2+1]);for(n.max_code=Ct,c=t.heap_len>>1;c>=1;c--)pqdownheap(t,a,c);ar=u;do c=t.heap[1],t.heap[1]=t.heap[t.heap_len--],pqdownheap(t,a,1),d=t.heap[1],t.heap[--t.heap_max]=c,t.heap[--t.heap_max]=d,a[ar*2]=a[c*2]+a[d*2],t.depth[ar]=(t.depth[c]>=t.depth[d]?t.depth[c]:t.depth[d])+1,a[c*2+1]=a[d*2+1]=ar,t.heap[1]=ar++,pqdownheap(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],gen_bitlen(t,n),gen_codes(a,Ct,t.bl_count)},scan_tree=(t,n,a)=>{let s,l=-1,u,c=n[1],d=0,Ct=7,ar=4;for(c===0&&(Ct=138,ar=3),n[(a+1)*2+1]=65535,s=0;s<=a;s++)u=c,c=n[(s+1)*2+1],!(++d<Ct&&u===c)&&(d<ar?t.bl_tree[u*2]+=d:u!==0?(u!==l&&t.bl_tree[u*2]++,t.bl_tree[REP_3_6*2]++):d<=10?t.bl_tree[REPZ_3_10*2]++:t.bl_tree[REPZ_11_138*2]++,d=0,l=u,c===0?(Ct=138,ar=3):u===c?(Ct=6,ar=3):(Ct=7,ar=4))},send_tree=(t,n,a)=>{let s,l=-1,u,c=n[1],d=0,Ct=7,ar=4;for(c===0&&(Ct=138,ar=3),s=0;s<=a;s++)if(u=c,c=n[(s+1)*2+1],!(++d<Ct&&u===c)){if(d<ar)do send_code(t,u,t.bl_tree);while(--d!==0);else u!==0?(u!==l&&(send_code(t,u,t.bl_tree),d--),send_code(t,REP_3_6,t.bl_tree),send_bits(t,d-3,2)):d<=10?(send_code(t,REPZ_3_10,t.bl_tree),send_bits(t,d-3,3)):(send_code(t,REPZ_11_138,t.bl_tree),send_bits(t,d-11,7));d=0,l=u,c===0?(Ct=138,ar=3):u===c?(Ct=6,ar=3):(Ct=7,ar=4)}},build_bl_tree=t=>{let n;for(scan_tree(t,t.dyn_ltree,t.l_desc.max_code),scan_tree(t,t.dyn_dtree,t.d_desc.max_code),build_tree(t,t.bl_desc),n=BL_CODES$1-1;n>=3&&t.bl_tree[bl_order[n]*2+1]===0;n--);return t.opt_len+=3*(n+1)+5+5+4,n},send_all_trees=(t,n,a,s)=>{let l;for(send_bits(t,n-257,5),send_bits(t,a-1,5),send_bits(t,s-4,4),l=0;l<s;l++)send_bits(t,t.bl_tree[bl_order[l]*2+1],3);send_tree(t,t.dyn_ltree,n-1),send_tree(t,t.dyn_dtree,a-1)},detect_data_type=t=>{let n=4093624447,a;for(a=0;a<=31;a++,n>>>=1)if(n&1&&t.dyn_ltree[a*2]!==0)return Z_BINARY;if(t.dyn_ltree[18]!==0||t.dyn_ltree[20]!==0||t.dyn_ltree[26]!==0)return Z_TEXT;for(a=32;a<LITERALS$1;a++)if(t.dyn_ltree[a*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=t=>{static_init_done||(tr_static_init(),static_init_done=!0),t.l_desc=new TreeDesc(t.dyn_ltree,static_l_desc),t.d_desc=new TreeDesc(t.dyn_dtree,static_d_desc),t.bl_desc=new TreeDesc(t.bl_tree,static_bl_desc),t.bi_buf=0,t.bi_valid=0,init_block(t)},_tr_stored_block$1=(t,n,a,s)=>{send_bits(t,(STORED_BLOCK<<1)+(s?1:0),3),bi_windup(t),put_short(t,a),put_short(t,~a),a&&t.pending_buf.set(t.window.subarray(n,n+a),t.pending),t.pending+=a},_tr_align$1=t=>{send_bits(t,STATIC_TREES<<1,3),send_code(t,END_BLOCK,static_ltree),bi_flush(t)},_tr_flush_block$1=(t,n,a,s)=>{let l,u,c=0;t.level>0?(t.strm.data_type===Z_UNKNOWN$1&&(t.strm.data_type=detect_data_type(t)),build_tree(t,t.l_desc),build_tree(t,t.d_desc),c=build_bl_tree(t),l=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=l&&(l=u)):l=u=a+5,a+4<=l&&n!==-1?_tr_stored_block$1(t,n,a,s):t.strategy===Z_FIXED$1||u===l?(send_bits(t,(STATIC_TREES<<1)+(s?1:0),3),compress_block(t,static_ltree,static_dtree)):(send_bits(t,(DYN_TREES<<1)+(s?1:0),3),send_all_trees(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),compress_block(t,t.dyn_ltree,t.dyn_dtree)),init_block(t),s&&bi_windup(t)},_tr_tally$1=(t,n,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,n===0?t.dyn_ltree[a*2]++:(t.matches++,n--,t.dyn_ltree[(_length_code[a]+LITERALS$1+1)*2]++,t.dyn_dtree[d_code(n)*2]++),t.sym_next===t.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(t,n,a,s)=>{let l=t&65535|0,u=t>>>16&65535|0,c=0;for(;a!==0;){c=a>2e3?2e3:a,a-=c;do l=l+n[s++]|0,u=u+l|0;while(--c);l%=65521,u%=65521}return l|u<<16|0};var adler32_1=adler32;const makeTable=()=>{let t,n=[];for(var a=0;a<256;a++){t=a;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;n[a]=t}return n},crcTable=new Uint32Array(makeTable()),crc32=(t,n,a,s)=>{const l=crcTable,u=s+a;t^=-1;for(let c=s;c<u;c++)t=t>>>8^l[(t^n[c])&255];return t^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(t,n)=>(t.msg=messages[n],n),rank=t=>t*2-(t>4?9:0),zero=t=>{let n=t.length;for(;--n>=0;)t[n]=0},slide_hash=t=>{let n,a,s,l=t.w_size;n=t.hash_size,s=n;do a=t.head[--s],t.head[s]=a>=l?a-l:0;while(--n);n=l,s=n;do a=t.prev[--s],t.prev[s]=a>=l?a-l:0;while(--n)};let HASH_ZLIB=(t,n,a)=>(n<<t.hash_shift^a)&t.hash_mask,HASH=HASH_ZLIB;const flush_pending=t=>{const n=t.state;let a=n.pending;a>t.avail_out&&(a=t.avail_out),a!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+a),t.next_out),t.next_out+=a,n.pending_out+=a,t.total_out+=a,t.avail_out-=a,n.pending-=a,n.pending===0&&(n.pending_out=0))},flush_block_only=(t,n)=>{_tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,flush_pending(t.strm)},put_byte=(t,n)=>{t.pending_buf[t.pending++]=n},putShortMSB=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=n&255},read_buf=(t,n,a,s)=>{let l=t.avail_in;return l>s&&(l=s),l===0?0:(t.avail_in-=l,n.set(t.input.subarray(t.next_in,t.next_in+l),a),t.state.wrap===1?t.adler=adler32_1(t.adler,n,l,a):t.state.wrap===2&&(t.adler=crc32_1(t.adler,n,l,a)),t.next_in+=l,t.total_in+=l,l)},longest_match=(t,n)=>{let a=t.max_chain_length,s=t.strstart,l,u,c=t.prev_length,d=t.nice_match;const Ct=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,ar=t.window,en=t.w_mask,tn=t.prev,on=t.strstart+MAX_MATCH;let fn=ar[s+c-1],dn=ar[s+c];t.prev_length>=t.good_match&&(a>>=2),d>t.lookahead&&(d=t.lookahead);do if(l=n,!(ar[l+c]!==dn||ar[l+c-1]!==fn||ar[l]!==ar[s]||ar[++l]!==ar[s+1])){s+=2,l++;do;while(ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&ar[++s]===ar[++l]&&s<on);if(u=MAX_MATCH-(on-s),s=on-MAX_MATCH,u>c){if(t.match_start=n,c=u,u>=d)break;fn=ar[s+c-1],dn=ar[s+c]}}while((n=tn[n&en])>Ct&&--a!==0);return c<=t.lookahead?c:t.lookahead},fill_window=t=>{const n=t.w_size;let a,s,l;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-MIN_LOOKAHEAD)&&(t.window.set(t.window.subarray(n,n+n-s),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),slide_hash(t),s+=n),t.strm.avail_in===0)break;if(a=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=a,t.lookahead+t.insert>=MIN_MATCH)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=HASH(t,t.ins_h,t.window[l+1]);t.insert&&(t.ins_h=HASH(t,t.ins_h,t.window[l+MIN_MATCH-1]),t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&t.strm.avail_in!==0)},deflate_stored=(t,n)=>{let a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s,l,u,c=0,d=t.strm.avail_in;do{if(s=65535,u=t.bi_valid+42>>3,t.strm.avail_out<u||(u=t.strm.avail_out-u,l=t.strstart-t.block_start,s>l+t.strm.avail_in&&(s=l+t.strm.avail_in),s>u&&(s=u),s<a&&(s===0&&n!==Z_FINISH$3||n===Z_NO_FLUSH$2||s!==l+t.strm.avail_in)))break;c=n===Z_FINISH$3&&s===l+t.strm.avail_in?1:0,_tr_stored_block(t,0,0,c),t.pending_buf[t.pending-4]=s,t.pending_buf[t.pending-3]=s>>8,t.pending_buf[t.pending-2]=~s,t.pending_buf[t.pending-1]=~s>>8,flush_pending(t.strm),l&&(l>s&&(l=s),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+l),t.strm.next_out),t.strm.next_out+=l,t.strm.avail_out-=l,t.strm.total_out+=l,t.block_start+=l,s-=l),s&&(read_buf(t.strm,t.strm.output,t.strm.next_out,s),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s)}while(c===0);return d-=t.strm.avail_in,d&&(d>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=d&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-d,t.strm.next_in),t.strstart),t.strstart+=d,t.insert+=d>t.w_size-t.insert?t.w_size-t.insert:d),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),c?BS_FINISH_DONE:n!==Z_NO_FLUSH$2&&n!==Z_FINISH$3&&t.strm.avail_in===0&&t.strstart===t.block_start?BS_BLOCK_DONE:(u=t.window_size-t.strstart,t.strm.avail_in>u&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,u+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),u>t.strm.avail_in&&(u=t.strm.avail_in),u&&(read_buf(t.strm,t.window,t.strstart,u),t.strstart+=u,t.insert+=u>t.w_size-t.insert?t.w_size-t.insert:u),t.high_water<t.strstart&&(t.high_water=t.strstart),u=t.bi_valid+42>>3,u=t.pending_buf_size-u>65535?65535:t.pending_buf_size-u,a=u>t.w_size?t.w_size:u,l=t.strstart-t.block_start,(l>=a||(l||n===Z_FINISH$3)&&n!==Z_NO_FLUSH$2&&t.strm.avail_in===0&&l<=u)&&(s=l>u?u:l,c=n===Z_FINISH$3&&t.strm.avail_in===0&&s===l?1:0,_tr_stored_block(t,t.block_start,s,c),t.block_start+=s,flush_pending(t.strm)),c?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(t,n)=>{let a,s;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),a!==0&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a)),t.match_length>=MIN_MATCH)if(s=_tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+1]);else s=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(t,n)=>{let a,s,l;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,a!==0&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){l=t.strstart+t.lookahead-MIN_MATCH,s=_tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=l&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,s&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}else if(t.match_available){if(s=_tr_tally(t,0,t.window[t.strstart-1]),s&&flush_block_only(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=_tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(t,n)=>{let a,s,l,u;const c=t.window;for(;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(l=t.strstart-1,s=c[l],s===c[++l]&&s===c[++l]&&s===c[++l])){u=t.strstart+MAX_MATCH;do;while(s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&l<u);t.match_length=MAX_MATCH-(u-l),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(a=_tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(t,n)=>{let a;for(;;){if(t.lookahead===0&&(fill_window(t),t.lookahead===0)){if(n===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(t.match_length=0,a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(t,n,a,s,l){this.good_length=t,this.max_lazy=n,this.nice_length=a,this.max_chain=s,this.func=l}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=t=>{t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==INIT_STATE&&n.status!==GZIP_STATE&&n.status!==EXTRA_STATE&&n.status!==NAME_STATE&&n.status!==COMMENT_STATE&&n.status!==HCRC_STATE&&n.status!==BUSY_STATE&&n.status!==FINISH_STATE?1:0},deflateResetKeep=t=>{if(deflateStateCheck(t))return err(t,Z_STREAM_ERROR$2);t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?GZIP_STATE:n.wrap?INIT_STATE:BUSY_STATE,t.adler=n.wrap===2?0:1,n.last_flush=-2,_tr_init(n),Z_OK$3},deflateReset=t=>{const n=deflateResetKeep(t);return n===Z_OK$3&&lm_init(t.state),n},deflateSetHeader=(t,n)=>deflateStateCheck(t)||t.state.wrap!==2?Z_STREAM_ERROR$2:(t.state.gzhead=n,Z_OK$3),deflateInit2=(t,n,a,s,l,u)=>{if(!t)return Z_STREAM_ERROR$2;let c=1;if(n===Z_DEFAULT_COMPRESSION$1&&(n=6),s<0?(c=0,s=-s):s>15&&(c=2,s-=16),l<1||l>MAX_MEM_LEVEL||a!==Z_DEFLATED$2||s<8||s>15||n<0||n>9||u<0||u>Z_FIXED||s===8&&c!==1)return err(t,Z_STREAM_ERROR$2);s===8&&(s=9);const d=new DeflateState;return t.state=d,d.strm=t,d.status=INIT_STATE,d.wrap=c,d.gzhead=null,d.w_bits=s,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=l+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+MIN_MATCH-1)/MIN_MATCH),d.window=new Uint8Array(d.w_size*2),d.head=new Uint16Array(d.hash_size),d.prev=new Uint16Array(d.w_size),d.lit_bufsize=1<<l+6,d.pending_buf_size=d.lit_bufsize*4,d.pending_buf=new Uint8Array(d.pending_buf_size),d.sym_buf=d.lit_bufsize,d.sym_end=(d.lit_bufsize-1)*3,d.level=n,d.strategy=u,d.method=a,deflateReset(t)},deflateInit=(t,n)=>deflateInit2(t,n,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(t,n)=>{if(deflateStateCheck(t)||n>Z_BLOCK$1||n<0)return t?err(t,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const a=t.state;if(!t.output||t.avail_in!==0&&!t.input||a.status===FINISH_STATE&&n!==Z_FINISH$3)return err(t,t.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const s=a.last_flush;if(a.last_flush=n,a.pending!==0){if(flush_pending(t),t.avail_out===0)return a.last_flush=-1,Z_OK$3}else if(t.avail_in===0&&rank(n)<=rank(s)&&n!==Z_FINISH$3)return err(t,Z_BUF_ERROR$1);if(a.status===FINISH_STATE&&t.avail_in!==0)return err(t,Z_BUF_ERROR$1);if(a.status===INIT_STATE&&a.wrap===0&&(a.status=BUSY_STATE),a.status===INIT_STATE){let l=Z_DEFLATED$2+(a.w_bits-8<<4)<<8,u=-1;if(a.strategy>=Z_HUFFMAN_ONLY||a.level<2?u=0:a.level<6?u=1:a.level===6?u=2:u=3,l|=u<<6,a.strstart!==0&&(l|=PRESET_DICT),l+=31-l%31,putShortMSB(a,l),a.strstart!==0&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),t.adler=1,a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===GZIP_STATE){if(t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead)put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,a.gzhead.time&255),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,a.gzhead.extra.length&255),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE;else if(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===EXTRA_STATE){if(a.gzhead.extra){let l=a.pending,u=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+u>a.pending_buf_size;){let d=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+d),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex+=d,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0,u-=d}let c=new Uint8Array(a.gzhead.extra);a.pending_buf.set(c.subarray(a.gzindex,a.gzindex+u),a.pending),a.pending+=u,a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=NAME_STATE}if(a.status===NAME_STATE){if(a.gzhead.name){let l=a.pending,u;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0}a.gzindex<a.gzhead.name.length?u=a.gzhead.name.charCodeAt(a.gzindex++)&255:u=0,put_byte(a,u)}while(u!==0);a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=COMMENT_STATE}if(a.status===COMMENT_STATE){if(a.gzhead.comment){let l=a.pending,u;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0}a.gzindex<a.gzhead.comment.length?u=a.gzhead.comment.charCodeAt(a.gzindex++)&255:u=0,put_byte(a,u)}while(u!==0);a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l))}a.status=HCRC_STATE}if(a.status===HCRC_STATE){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(flush_pending(t),a.pending!==0))return a.last_flush=-1,Z_OK$3;put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),t.adler=0}if(a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(t.avail_in!==0||a.lookahead!==0||n!==Z_NO_FLUSH$2&&a.status!==FINISH_STATE){let l=a.level===0?deflate_stored(a,n):a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,n):a.strategy===Z_RLE?deflate_rle(a,n):configuration_table[a.level].func(a,n);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(a.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return t.avail_out===0&&(a.last_flush=-1),Z_OK$3;if(l===BS_BLOCK_DONE&&(n===Z_PARTIAL_FLUSH?_tr_align(a):n!==Z_BLOCK$1&&(_tr_stored_block(a,0,0,!1),n===Z_FULL_FLUSH$1&&(zero(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),t.avail_out===0))return a.last_flush=-1,Z_OK$3}return n!==Z_FINISH$3?Z_OK$3:a.wrap<=0?Z_STREAM_END$3:(a.wrap===2?(put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,t.total_in&255),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=t=>{if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const n=t.state.status;return t.state=null,n===BUSY_STATE?err(t,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(t,n)=>{let a=n.length;if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const s=t.state,l=s.wrap;if(l===2||l===1&&s.status!==INIT_STATE||s.lookahead)return Z_STREAM_ERROR$2;if(l===1&&(t.adler=adler32_1(t.adler,n,a,0)),s.wrap=0,a>=s.w_size){l===0&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0);let Ct=new Uint8Array(s.w_size);Ct.set(n.subarray(a-s.w_size,a),0),n=Ct,a=s.w_size}const u=t.avail_in,c=t.next_in,d=t.input;for(t.avail_in=a,t.next_in=0,t.input=n,fill_window(s);s.lookahead>=MIN_MATCH;){let Ct=s.strstart,ar=s.lookahead-(MIN_MATCH-1);do s.ins_h=HASH(s,s.ins_h,s.window[Ct+MIN_MATCH-1]),s.prev[Ct&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=Ct,Ct++;while(--ar);s.strstart=Ct,s.lookahead=MIN_MATCH-1,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,t.next_in=c,t.input=d,t.avail_in=u,s.wrap=l,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var assign$1=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const s in a)_has(a,s)&&(t[s]=a[s])}}return t},flattenChunks=t=>{let n=0;for(let s=0,l=t.length;s<l;s++)n+=t[s].length;const a=new Uint8Array(n);for(let s=0,l=0,u=t.length;s<u;s++){let c=t[s];a.set(c,l),l+=c.length}return a},common$1={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let t=0;t<256;t++)_utf8len[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,a,s,l,u,c=t.length,d=0;for(l=0;l<c;l++)a=t.charCodeAt(l),(a&64512)===55296&&l+1<c&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),d+=a<128?1:a<2048?2:a<65536?3:4;for(n=new Uint8Array(d),u=0,l=0;u<d;l++)a=t.charCodeAt(l),(a&64512)===55296&&l+1<c&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),a<128?n[u++]=a:a<2048?(n[u++]=192|a>>>6,n[u++]=128|a&63):a<65536?(n[u++]=224|a>>>12,n[u++]=128|a>>>6&63,n[u++]=128|a&63):(n[u++]=240|a>>>18,n[u++]=128|a>>>12&63,n[u++]=128|a>>>6&63,n[u++]=128|a&63);return n};const buf2binstring=(t,n)=>{if(n<65534&&t.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let a="";for(let s=0;s<n;s++)a+=String.fromCharCode(t[s]);return a};var buf2string=(t,n)=>{const a=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let s,l;const u=new Array(a*2);for(l=0,s=0;s<a;){let c=t[s++];if(c<128){u[l++]=c;continue}let d=_utf8len[c];if(d>4){u[l++]=65533,s+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&s<a;)c=c<<6|t[s++]&63,d--;if(d>1){u[l++]=65533;continue}c<65536?u[l++]=c:(c-=65536,u[l++]=55296|c>>10&1023,u[l++]=56320|c&1023)}return buf2binstring(u,l)},utf8border=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let a=n-1;for(;a>=0&&(t[a]&192)===128;)a--;return a<0||a===0?n:a+_utf8len[t[a]]>n?a:n},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(t){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=deflate_1$2.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(a!==Z_OK$2)throw new Error(messages[a]);if(n.header&&deflate_1$2.deflateSetHeader(this.strm,n.header),n.dictionary){let s;if(typeof n.dictionary=="string"?s=strings.string2buf(n.dictionary):toString$1.call(n.dictionary)==="[object ArrayBuffer]"?s=new Uint8Array(n.dictionary):s=n.dictionary,a=deflate_1$2.deflateSetDictionary(this.strm,s),a!==Z_OK$2)throw new Error(messages[a]);this._dict_set=!0}}Deflate$1.prototype.push=function(t,n){const a=this.strm,s=this.options.chunkSize;let l,u;if(this.ended)return!1;for(n===~~n?u=n:u=n===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof t=="string"?a.input=strings.string2buf(t):toString$1.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(u===Z_SYNC_FLUSH||u===Z_FULL_FLUSH)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(l=deflate_1$2.deflate(a,u),l===Z_STREAM_END$2)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),l=deflate_1$2.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===Z_OK$2;if(a.avail_out===0){this.onData(a.output);continue}if(u>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(t){this.chunks.push(t)};Deflate$1.prototype.onEnd=function(t){t===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function deflate$1(t,n){const a=new Deflate$1(n);if(a.push(t,!0),a.err)throw a.msg||messages[a.err];return a.result}function deflateRaw$1(t,n){return n=n||{},n.raw=!0,deflate$1(t,n)}function gzip$1(t,n){return n=n||{},n.gzip=!0,deflate$1(t,n)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(n,a){let s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx;const vx=n.state;s=n.next_in,px=n.input,l=s+(n.avail_in-5),u=n.next_out,hx=n.output,c=u-(a-n.avail_out),d=u+(n.avail_out-257),Ct=vx.dmax,ar=vx.wsize,en=vx.whave,tn=vx.wnext,on=vx.window,fn=vx.hold,dn=vx.bits,Cn=vx.lencode,Rn=vx.distcode,ax=(1<<vx.lenbits)-1,ox=(1<<vx.distbits)-1;e:do{dn<15&&(fn+=px[s++]<<dn,dn+=8,fn+=px[s++]<<dn,dn+=8),sx=Cn[fn&ax];t:for(;;){if(lx=sx>>>24,fn>>>=lx,dn-=lx,lx=sx>>>16&255,lx===0)hx[u++]=sx&65535;else if(lx&16){cx=sx&65535,lx&=15,lx&&(dn<lx&&(fn+=px[s++]<<dn,dn+=8),cx+=fn&(1<<lx)-1,fn>>>=lx,dn-=lx),dn<15&&(fn+=px[s++]<<dn,dn+=8,fn+=px[s++]<<dn,dn+=8),sx=Rn[fn&ox];r:for(;;){if(lx=sx>>>24,fn>>>=lx,dn-=lx,lx=sx>>>16&255,lx&16){if(fx=sx&65535,lx&=15,dn<lx&&(fn+=px[s++]<<dn,dn+=8,dn<lx&&(fn+=px[s++]<<dn,dn+=8)),fx+=fn&(1<<lx)-1,fx>Ct){n.msg="invalid distance too far back",vx.mode=BAD$1;break e}if(fn>>>=lx,dn-=lx,lx=u-c,fx>lx){if(lx=fx-lx,lx>en&&vx.sane){n.msg="invalid distance too far back",vx.mode=BAD$1;break e}if(gx=0,mx=on,tn===0){if(gx+=ar-lx,lx<cx){cx-=lx;do hx[u++]=on[gx++];while(--lx);gx=u-fx,mx=hx}}else if(tn<lx){if(gx+=ar+tn-lx,lx-=tn,lx<cx){cx-=lx;do hx[u++]=on[gx++];while(--lx);if(gx=0,tn<cx){lx=tn,cx-=lx;do hx[u++]=on[gx++];while(--lx);gx=u-fx,mx=hx}}}else if(gx+=tn-lx,lx<cx){cx-=lx;do hx[u++]=on[gx++];while(--lx);gx=u-fx,mx=hx}for(;cx>2;)hx[u++]=mx[gx++],hx[u++]=mx[gx++],hx[u++]=mx[gx++],cx-=3;cx&&(hx[u++]=mx[gx++],cx>1&&(hx[u++]=mx[gx++]))}else{gx=u-fx;do hx[u++]=hx[gx++],hx[u++]=hx[gx++],hx[u++]=hx[gx++],cx-=3;while(cx>2);cx&&(hx[u++]=hx[gx++],cx>1&&(hx[u++]=hx[gx++]))}}else if((lx&64)===0){sx=Rn[(sx&65535)+(fn&(1<<lx)-1)];continue r}else{n.msg="invalid distance code",vx.mode=BAD$1;break e}break}}else if((lx&64)===0){sx=Cn[(sx&65535)+(fn&(1<<lx)-1)];continue t}else if(lx&32){vx.mode=TYPE$1;break e}else{n.msg="invalid literal/length code",vx.mode=BAD$1;break e}break}}while(s<l&&u<d);cx=dn>>3,s-=cx,dn-=cx<<3,fn&=(1<<dn)-1,n.next_in=s,n.next_out=u,n.avail_in=s<l?5+(l-s):5-(s-l),n.avail_out=u<d?257+(d-u):257-(u-d),vx.hold=fn,vx.bits=dn};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(t,n,a,s,l,u,c,d)=>{const Ct=d.bits;let ar=0,en=0,tn=0,on=0,fn=0,dn=0,Cn=0,Rn=0,ax=0,ox=0,sx,lx,cx,fx,gx,mx=null,px;const hx=new Uint16Array(MAXBITS+1),vx=new Uint16Array(MAXBITS+1);let yx=null,Sx,_x,Ex;for(ar=0;ar<=MAXBITS;ar++)hx[ar]=0;for(en=0;en<s;en++)hx[n[a+en]]++;for(fn=Ct,on=MAXBITS;on>=1&&hx[on]===0;on--);if(fn>on&&(fn=on),on===0)return l[u++]=1<<24|64<<16|0,l[u++]=1<<24|64<<16|0,d.bits=1,0;for(tn=1;tn<on&&hx[tn]===0;tn++);for(fn<tn&&(fn=tn),Rn=1,ar=1;ar<=MAXBITS;ar++)if(Rn<<=1,Rn-=hx[ar],Rn<0)return-1;if(Rn>0&&(t===CODES$1||on!==1))return-1;for(vx[1]=0,ar=1;ar<MAXBITS;ar++)vx[ar+1]=vx[ar]+hx[ar];for(en=0;en<s;en++)n[a+en]!==0&&(c[vx[n[a+en]]++]=en);if(t===CODES$1?(mx=yx=c,px=20):t===LENS$1?(mx=lbase,yx=lext,px=257):(mx=dbase,yx=dext,px=0),ox=0,en=0,ar=tn,gx=u,dn=fn,Cn=0,cx=-1,ax=1<<fn,fx=ax-1,t===LENS$1&&ax>ENOUGH_LENS$1||t===DISTS$1&&ax>ENOUGH_DISTS$1)return 1;for(;;){Sx=ar-Cn,c[en]+1<px?(_x=0,Ex=c[en]):c[en]>=px?(_x=yx[c[en]-px],Ex=mx[c[en]-px]):(_x=96,Ex=0),sx=1<<ar-Cn,lx=1<<dn,tn=lx;do lx-=sx,l[gx+(ox>>Cn)+lx]=Sx<<24|_x<<16|Ex|0;while(lx!==0);for(sx=1<<ar-1;ox&sx;)sx>>=1;if(sx!==0?(ox&=sx-1,ox+=sx):ox=0,en++,--hx[ar]===0){if(ar===on)break;ar=n[a+c[en]]}if(ar>fn&&(ox&fx)!==cx){for(Cn===0&&(Cn=fn),gx+=tn,dn=ar-Cn,Rn=1<<dn;dn+Cn<on&&(Rn-=hx[dn+Cn],!(Rn<=0));)dn++,Rn<<=1;if(ax+=1<<dn,t===LENS$1&&ax>ENOUGH_LENS$1||t===DISTS$1&&ax>ENOUGH_DISTS$1)return 1;cx=ox&fx,l[cx]=fn<<24|dn<<16|gx-u|0}}return ox!==0&&(l[gx+ox]=ar-Cn<<24|64<<16|0),d.bits=fn,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT$1=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<HEAD||n.mode>SYNC?1:0},inflateResetKeep=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=HEAD,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(ENOUGH_LENS),n.distcode=n.distdyn=new Int32Array(ENOUGH_DISTS),n.sane=1,n.back=-1,Z_OK$1},inflateReset=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,inflateResetKeep(t)},inflateReset2=(t,n)=>{let a;if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const s=t.state;return n<0?(a=0,n=-n):(a=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Z_STREAM_ERROR$1:(s.window!==null&&s.wbits!==n&&(s.window=null),s.wrap=a,s.wbits=n,inflateReset(t))},inflateInit2=(t,n)=>{if(!t)return Z_STREAM_ERROR$1;const a=new InflateState;t.state=a,a.strm=t,a.window=null,a.mode=HEAD;const s=inflateReset2(t,n);return s!==Z_OK$1&&(t.state=null),s},inflateInit=t=>inflateInit2(t,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=t=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(inftrees(LENS,t.lens,0,288,lenfix,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;inftrees(DISTS,t.lens,0,32,distfix,0,t.work,{bits:5}),virgin=!1}t.lencode=lenfix,t.lenbits=9,t.distcode=distfix,t.distbits=5},updatewindow=(t,n,a,s)=>{let l;const u=t.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),s>=u.wsize?(u.window.set(n.subarray(a-u.wsize,a),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>s&&(l=s),u.window.set(n.subarray(a-s,a-s+l),u.wnext),s-=l,s?(u.window.set(n.subarray(a-s,a),0),u.wnext=s,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0},inflate$2=(t,n)=>{let a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn=0,ax,ox,sx,lx,cx,fx,gx,mx;const px=new Uint8Array(4);let hx,vx;const yx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(t)||!t.output||!t.input&&t.avail_in!==0)return Z_STREAM_ERROR$1;a=t.state,a.mode===TYPE&&(a.mode=TYPEDO),c=t.next_out,l=t.output,Ct=t.avail_out,u=t.next_in,s=t.input,d=t.avail_in,ar=a.hold,en=a.bits,tn=d,on=Ct,mx=Z_OK$1;e:for(;;)switch(a.mode){case HEAD:if(a.wrap===0){a.mode=TYPEDO;break}for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.wrap&2&&ar===35615){a.wbits===0&&(a.wbits=15),a.check=0,px[0]=ar&255,px[1]=ar>>>8&255,a.check=crc32_1(a.check,px,2,0),ar=0,en=0,a.mode=FLAGS;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((ar&255)<<8)+(ar>>8))%31){t.msg="incorrect header check",a.mode=BAD;break}if((ar&15)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(ar>>>=4,en-=4,gx=(ar&15)+8,a.wbits===0&&(a.wbits=gx),gx>15||gx>a.wbits){t.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=ar&512?DICTID:TYPE,ar=0,en=0;break;case FLAGS:for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.flags=ar,(a.flags&255)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(a.flags&57344){t.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=ar>>8&1),a.flags&512&&a.wrap&4&&(px[0]=ar&255,px[1]=ar>>>8&255,a.check=crc32_1(a.check,px,2,0)),ar=0,en=0,a.mode=TIME;case TIME:for(;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.head&&(a.head.time=ar),a.flags&512&&a.wrap&4&&(px[0]=ar&255,px[1]=ar>>>8&255,px[2]=ar>>>16&255,px[3]=ar>>>24&255,a.check=crc32_1(a.check,px,4,0)),ar=0,en=0,a.mode=OS;case OS:for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.head&&(a.head.xflags=ar&255,a.head.os=ar>>8),a.flags&512&&a.wrap&4&&(px[0]=ar&255,px[1]=ar>>>8&255,a.check=crc32_1(a.check,px,2,0)),ar=0,en=0,a.mode=EXLEN;case EXLEN:if(a.flags&1024){for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.length=ar,a.head&&(a.head.extra_len=ar),a.flags&512&&a.wrap&4&&(px[0]=ar&255,px[1]=ar>>>8&255,a.check=crc32_1(a.check,px,2,0)),ar=0,en=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(a.flags&1024&&(fn=a.length,fn>d&&(fn=d),fn&&(a.head&&(gx=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(s.subarray(u,u+fn),gx)),a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,fn,u)),d-=fn,u+=fn,a.length-=fn),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(a.flags&2048){if(d===0)break e;fn=0;do gx=s[u+fn++],a.head&&gx&&a.length<65536&&(a.head.name+=String.fromCharCode(gx));while(gx&&fn<d);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,fn,u)),d-=fn,u+=fn,gx)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT$1;case COMMENT$1:if(a.flags&4096){if(d===0)break e;fn=0;do gx=s[u+fn++],a.head&&gx&&a.length<65536&&(a.head.comment+=String.fromCharCode(gx));while(gx&&fn<d);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,fn,u)),d-=fn,u+=fn,gx)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(a.flags&512){for(;en<16;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.wrap&4&&ar!==(a.check&65535)){t.msg="header crc mismatch",a.mode=BAD;break}ar=0,en=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}t.adler=a.check=zswap32(ar),ar=0,en=0,a.mode=DICT;case DICT:if(a.havedict===0)return t.next_out=c,t.avail_out=Ct,t.next_in=u,t.avail_in=d,a.hold=ar,a.bits=en,Z_NEED_DICT$1;t.adler=a.check=1,a.mode=TYPE;case TYPE:if(n===Z_BLOCK||n===Z_TREES)break e;case TYPEDO:if(a.last){ar>>>=en&7,en-=en&7,a.mode=CHECK;break}for(;en<3;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}switch(a.last=ar&1,ar>>>=1,en-=1,ar&3){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,n===Z_TREES){ar>>>=2,en-=2;break e}break;case 2:a.mode=TABLE;break;case 3:t.msg="invalid block type",a.mode=BAD}ar>>>=2,en-=2;break;case STORED:for(ar>>>=en&7,en-=en&7;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if((ar&65535)!==(ar>>>16^65535)){t.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=ar&65535,ar=0,en=0,a.mode=COPY_,n===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(fn=a.length,fn){if(fn>d&&(fn=d),fn>Ct&&(fn=Ct),fn===0)break e;l.set(s.subarray(u,u+fn),c),d-=fn,u+=fn,Ct-=fn,c+=fn,a.length-=fn;break}a.mode=TYPE;break;case TABLE:for(;en<14;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.nlen=(ar&31)+257,ar>>>=5,en-=5,a.ndist=(ar&31)+1,ar>>>=5,en-=5,a.ncode=(ar&15)+4,ar>>>=4,en-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;en<3;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.lens[yx[a.have++]]=ar&7,ar>>>=3,en-=3}for(;a.have<19;)a.lens[yx[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,hx={bits:a.lenbits},mx=inftrees(CODES,a.lens,0,19,a.lencode,0,a.work,hx),a.lenbits=hx.bits,mx){t.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;Rn=a.lencode[ar&(1<<a.lenbits)-1],ax=Rn>>>24,ox=Rn>>>16&255,sx=Rn&65535,!(ax<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(sx<16)ar>>>=ax,en-=ax,a.lens[a.have++]=sx;else{if(sx===16){for(vx=ax+2;en<vx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(ar>>>=ax,en-=ax,a.have===0){t.msg="invalid bit length repeat",a.mode=BAD;break}gx=a.lens[a.have-1],fn=3+(ar&3),ar>>>=2,en-=2}else if(sx===17){for(vx=ax+3;en<vx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=ax,en-=ax,gx=0,fn=3+(ar&7),ar>>>=3,en-=3}else{for(vx=ax+7;en<vx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=ax,en-=ax,gx=0,fn=11+(ar&127),ar>>>=7,en-=7}if(a.have+fn>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=BAD;break}for(;fn--;)a.lens[a.have++]=gx}}if(a.mode===BAD)break;if(a.lens[256]===0){t.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,hx={bits:a.lenbits},mx=inftrees(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,hx),a.lenbits=hx.bits,mx){t.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,hx={bits:a.distbits},mx=inftrees(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,hx),a.distbits=hx.bits,mx){t.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,n===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(d>=6&&Ct>=258){t.next_out=c,t.avail_out=Ct,t.next_in=u,t.avail_in=d,a.hold=ar,a.bits=en,inffast(t,on),c=t.next_out,l=t.output,Ct=t.avail_out,u=t.next_in,s=t.input,d=t.avail_in,ar=a.hold,en=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;Rn=a.lencode[ar&(1<<a.lenbits)-1],ax=Rn>>>24,ox=Rn>>>16&255,sx=Rn&65535,!(ax<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(ox&&(ox&240)===0){for(lx=ax,cx=ox,fx=sx;Rn=a.lencode[fx+((ar&(1<<lx+cx)-1)>>lx)],ax=Rn>>>24,ox=Rn>>>16&255,sx=Rn&65535,!(lx+ax<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=lx,en-=lx,a.back+=lx}if(ar>>>=ax,en-=ax,a.back+=ax,a.length=sx,ox===0){a.mode=LIT;break}if(ox&32){a.back=-1,a.mode=TYPE;break}if(ox&64){t.msg="invalid literal/length code",a.mode=BAD;break}a.extra=ox&15,a.mode=LENEXT;case LENEXT:if(a.extra){for(vx=a.extra;en<vx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.length+=ar&(1<<a.extra)-1,ar>>>=a.extra,en-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;Rn=a.distcode[ar&(1<<a.distbits)-1],ax=Rn>>>24,ox=Rn>>>16&255,sx=Rn&65535,!(ax<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if((ox&240)===0){for(lx=ax,cx=ox,fx=sx;Rn=a.distcode[fx+((ar&(1<<lx+cx)-1)>>lx)],ax=Rn>>>24,ox=Rn>>>16&255,sx=Rn&65535,!(lx+ax<=en);){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}ar>>>=lx,en-=lx,a.back+=lx}if(ar>>>=ax,en-=ax,a.back+=ax,ox&64){t.msg="invalid distance code",a.mode=BAD;break}a.offset=sx,a.extra=ox&15,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(vx=a.extra;en<vx;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}a.offset+=ar&(1<<a.extra)-1,ar>>>=a.extra,en-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(Ct===0)break e;if(fn=on-Ct,a.offset>fn){if(fn=a.offset-fn,fn>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=BAD;break}fn>a.wnext?(fn-=a.wnext,dn=a.wsize-fn):dn=a.wnext-fn,fn>a.length&&(fn=a.length),Cn=a.window}else Cn=l,dn=c-a.offset,fn=a.length;fn>Ct&&(fn=Ct),Ct-=fn,a.length-=fn;do l[c++]=Cn[dn++];while(--fn);a.length===0&&(a.mode=LEN);break;case LIT:if(Ct===0)break e;l[c++]=a.length,Ct--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;en<32;){if(d===0)break e;d--,ar|=s[u++]<<en,en+=8}if(on-=Ct,t.total_out+=on,a.total+=on,a.wrap&4&&on&&(t.adler=a.check=a.flags?crc32_1(a.check,l,on,c-on):adler32_1(a.check,l,on,c-on)),on=Ct,a.wrap&4&&(a.flags?ar:zswap32(ar))!==a.check){t.msg="incorrect data check",a.mode=BAD;break}ar=0,en=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;en<32;){if(d===0)break e;d--,ar+=s[u++]<<en,en+=8}if(a.wrap&4&&ar!==(a.total&4294967295)){t.msg="incorrect length check",a.mode=BAD;break}ar=0,en=0}a.mode=DONE;case DONE:mx=Z_STREAM_END$1;break e;case BAD:mx=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return t.next_out=c,t.avail_out=Ct,t.next_in=u,t.avail_in=d,a.hold=ar,a.bits=en,(a.wsize||on!==t.avail_out&&a.mode<BAD&&(a.mode<CHECK||n!==Z_FINISH$1))&&updatewindow(t,t.output,t.next_out,on-t.avail_out),tn-=t.avail_in,on-=t.avail_out,t.total_in+=tn,t.total_out+=on,a.total+=on,a.wrap&4&&on&&(t.adler=a.check=a.flags?crc32_1(a.check,l,on,t.next_out-on):adler32_1(a.check,l,on,t.next_out-on)),t.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(tn===0&&on===0||n===Z_FINISH$1)&&mx===Z_OK$1&&(mx=Z_BUF_ERROR),mx},inflateEnd=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;let n=t.state;return n.window&&(n.window=null),t.state=null,Z_OK$1},inflateGetHeader=(t,n)=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const a=t.state;return(a.wrap&2)===0?Z_STREAM_ERROR$1:(a.head=n,n.done=!1,Z_OK$1)},inflateSetDictionary=(t,n)=>{const a=n.length;let s,l,u;return inflateStateCheck(t)||(s=t.state,s.wrap!==0&&s.mode!==DICT)?Z_STREAM_ERROR$1:s.mode===DICT&&(l=1,l=adler32_1(l,n,a,0),l!==s.check)?Z_DATA_ERROR$1:(u=updatewindow(t,n,a,a),u?(s.mode=MEM,Z_MEM_ERROR$1):(s.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(t){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=inflate_1$2.inflateInit2(this.strm,n.windowBits);if(a!==Z_OK)throw new Error(messages[a]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=strings.string2buf(n.dictionary):toString.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=inflate_1$2.inflateSetDictionary(this.strm,n.dictionary),a!==Z_OK)))throw new Error(messages[a])}Inflate$1.prototype.push=function(t,n){const a=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let u,c,d;if(this.ended)return!1;for(n===~~n?c=n:c=n===!0?Z_FINISH:Z_NO_FLUSH,toString.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),u=inflate_1$2.inflate(a,c),u===Z_NEED_DICT&&l&&(u=inflate_1$2.inflateSetDictionary(a,l),u===Z_OK?u=inflate_1$2.inflate(a,c):u===Z_DATA_ERROR&&(u=Z_NEED_DICT));a.avail_in>0&&u===Z_STREAM_END&&a.state.wrap>0&&t[a.next_in]!==0;)inflate_1$2.inflateReset(a),u=inflate_1$2.inflate(a,c);switch(u){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(u),this.ended=!0,!1}if(d=a.avail_out,a.next_out&&(a.avail_out===0||u===Z_STREAM_END))if(this.options.to==="string"){let Ct=strings.utf8border(a.output,a.next_out),ar=a.next_out-Ct,en=strings.buf2string(a.output,Ct);a.next_out=ar,a.avail_out=s-ar,ar&&a.output.set(a.output.subarray(Ct,Ct+ar),0),this.onData(en)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(u===Z_OK&&d===0)){if(u===Z_STREAM_END)return u=inflate_1$2.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(t){this.chunks.push(t)};Inflate$1.prototype.onEnd=function(t){t===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function inflate$1(t,n){const a=new Inflate$1(n);if(a.push(t),a.err)throw a.msg||messages[a.err];return a.result}function inflateRaw$1(t,n){return n=n||{},n.raw=!0,inflate$1(t,n)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function hn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Vl(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Oo(t){let n,a,s;t.length!==2?(n=hn,a=(d,Ct)=>hn(t(d),Ct),s=(d,Ct)=>t(d)-Ct):(n=t===hn||t===Vl?t:$g,a=t,s=t);function l(d,Ct,ar=0,en=d.length){if(ar<en){if(n(Ct,Ct)!==0)return en;do{const tn=ar+en>>>1;a(d[tn],Ct)<0?ar=tn+1:en=tn}while(ar<en)}return ar}function u(d,Ct,ar=0,en=d.length){if(ar<en){if(n(Ct,Ct)!==0)return en;do{const tn=ar+en>>>1;a(d[tn],Ct)<=0?ar=tn+1:en=tn}while(ar<en)}return ar}function c(d,Ct,ar=0,en=d.length){const tn=l(d,Ct,ar,en-1);return tn>ar&&s(d[tn-1],Ct)>-s(d[tn],Ct)?tn-1:tn}return{left:l,center:c,right:u}}function $g(){return 0}function ji(t){return t===null?NaN:+t}function*Tg(t,n){if(n===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(yield a);else{let a=-1;for(let s of t)(s=n(s,++a,t))!=null&&(s=+s)>=s&&(yield s)}}const Gl=Oo(hn),Ft=Gl.right,Ag=Gl.left,Eg=Oo(ji).center;function kg(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let a=t.length;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid length");if(!a||!n)return t;const s=sc(n),l=t.slice();return s(t,l,0,a,1),s(l,t,0,a,1),s(t,l,0,a,1),t}const Zl=Ql(sc),Sg=Ql(Ng);function Ql(t){return function(n,a,s=a){if(!((a=+a)>=0))throw new RangeError("invalid rx");if(!((s=+s)>=0))throw new RangeError("invalid ry");let{data:l,width:u,height:c}=n;if(!((u=Math.floor(u))>=0))throw new RangeError("invalid width");if(!((c=Math.floor(c!==void 0?c:l.length/u))>=0))throw new RangeError("invalid height");if(!u||!c||!a&&!s)return n;const d=a&&t(a),Ct=s&&t(s),ar=l.slice();return d&&Ct?(we$1(d,ar,l,u,c),we$1(d,l,ar,u,c),we$1(d,ar,l,u,c),xe(Ct,l,ar,u,c),xe(Ct,ar,l,u,c),xe(Ct,l,ar,u,c)):d?(we$1(d,l,ar,u,c),we$1(d,ar,l,u,c),we$1(d,l,ar,u,c)):Ct&&(xe(Ct,l,ar,u,c),xe(Ct,ar,l,u,c),xe(Ct,l,ar,u,c)),n}}function we$1(t,n,a,s,l){for(let u=0,c=s*l;u<c;)t(n,a,u,u+=s,1)}function xe(t,n,a,s,l){for(let u=0,c=s*l;u<s;++u)t(n,a,u,u+c,s)}function Ng(t){const n=sc(t);return(a,s,l,u,c)=>{l<<=2,u<<=2,c<<=2,n(a,s,l+0,u+0,c),n(a,s,l+1,u+1,c),n(a,s,l+2,u+2,c),n(a,s,l+3,u+3,c)}}function sc(t){const n=Math.floor(t);if(n===t)return Ig(t);const a=t-n,s=2*t+1;return(l,u,c,d,Ct)=>{if(!((d-=Ct)>=c))return;let ar=n*u[c];const en=Ct*n,tn=en+Ct;for(let on=c,fn=c+en;on<fn;on+=Ct)ar+=u[Math.min(d,on)];for(let on=c,fn=d;on<=fn;on+=Ct)ar+=u[Math.min(d,on+en)],l[on]=(ar+a*(u[Math.max(c,on-tn)]+u[Math.min(d,on+tn)]))/s,ar-=u[Math.max(c,on-en)]}}function Ig(t){const n=2*t+1;return(a,s,l,u,c)=>{if(!((u-=c)>=l))return;let d=t*s[l];const Ct=c*t;for(let ar=l,en=l+Ct;ar<en;ar+=c)d+=s[Math.min(u,ar)];for(let ar=l,en=u;ar<=en;ar+=c)d+=s[Math.min(u,ar+Ct)],a[ar]=d/n,d-=s[Math.max(l,ar-Ct)]}}function Yo(t,n){let a=0;if(n===void 0)for(let s of t)s!=null&&(s=+s)>=s&&++a;else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(l=+l)>=l&&++a}return a}function Rg(t){return t.length|0}function Cg(t){return!(t>0)}function Pg(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Dg(t){return n=>t(...n)}function zg(...t){const n=typeof t[t.length-1]=="function"&&Dg(t.pop());t=t.map(Pg);const a=t.map(Rg),s=t.length-1,l=new Array(s+1).fill(0),u=[];if(s<0||a.some(Cg))return u;for(;;){u.push(l.map((d,Ct)=>t[Ct][d]));let c=s;for(;++l[c]===a[c];){if(c===0)return n?u.map(n):u;l[c--]=0}}}function Og(t,n){var a=0,s=0;return Float64Array.from(t,n===void 0?l=>a+=+l||0:l=>a+=+n(l,s++,t)||0)}function Kl(t,n){let a=0,s,l=0,u=0;if(n===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(s=c-l,l+=s/++a,u+=s*(c-l));else{let c=-1;for(let d of t)(d=n(d,++c,t))!=null&&(d=+d)>=d&&(s=d-l,l+=s/++a,u+=s*(d-l))}if(a>1)return u/(a-1)}function Jl(t,n){const a=Kl(t,n);return a&&Math.sqrt(a)}function kr(t,n){let a,s;if(n===void 0)for(const l of t)l!=null&&(a===void 0?l>=l&&(a=s=l):(a>l&&(a=l),s<l&&(s=l)));else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(a===void 0?u>=u&&(a=s=u):(a>u&&(a=u),s<u&&(s=u)))}return[a,s]}class bn{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const a=this._partials;let s=0;for(let l=0;l<this._n&&l<32;l++){const u=a[l],c=n+u,d=Math.abs(n)<Math.abs(u)?n-(c-u):u-(c-n);d&&(a[s++]=d),n=c}return a[s]=n,this._n=s+1,this}valueOf(){const n=this._partials;let a=this._n,s,l,u,c=0;if(a>0){for(c=n[--a];a>0&&(s=c,l=n[--a],c=s+l,u=l-(c-s),!u););a>0&&(u<0&&n[a-1]<0||u>0&&n[a-1]>0)&&(l=u*2,s=c+l,l==s-c&&(c=s))}return c}}function Yg(t,n){const a=new bn;if(n===void 0)for(let s of t)(s=+s)&&a.add(s);else{let s=-1;for(let l of t)(l=+n(l,++s,t))&&a.add(l)}return+a}function Fg(t,n){const a=new bn;let s=-1;return Float64Array.from(t,n===void 0?l=>a.add(+l||0):l=>a.add(+n(l,++s,t)||0))}class Pr extends Map{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const[s,l]of n)this.set(s,l)}get(n){return super.get(hu(this,n))}has(n){return super.has(hu(this,n))}set(n,a){return super.set(nh(this,n),a)}delete(n){return super.delete(th(this,n))}}class ie extends Set{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const s of n)this.add(s)}has(n){return super.has(hu(this,n))}add(n){return super.add(nh(this,n))}delete(n){return super.delete(th(this,n))}}function hu({_intern:t,_key:n},a){const s=n(a);return t.has(s)?t.get(s):a}function nh({_intern:t,_key:n},a){const s=n(a);return t.has(s)?t.get(s):(t.set(s,a),a)}function th({_intern:t,_key:n},a){const s=n(a);return t.has(s)&&(a=t.get(s),t.delete(s)),a}function eh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qe(t){return t}function rh(t,...n){return er(t,qe,qe,n)}function ih(t,...n){return er(t,Array.from,qe,n)}function oh(t,n){for(let a=1,s=n.length;a<s;++a)t=t.flatMap(l=>l.pop().map(([u,c])=>[...l,u,c]));return t}function qg(t,...n){return oh(ih(t,...n),n)}function Lg(t,n,...a){return oh(uh(t,n,...a),a)}function ah(t,n,...a){return er(t,qe,n,a)}function uh(t,n,...a){return er(t,Array.from,n,a)}function Bg(t,...n){return er(t,qe,ch,n)}function Ug(t,...n){return er(t,Array.from,ch,n)}function ch(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function er(t,n,a,s){return(function l(u,c){if(c>=s.length)return a(u);const d=new Pr,Ct=s[c++];let ar=-1;for(const en of u){const tn=Ct(en,++ar,u),on=d.get(tn);on?on.push(en):d.set(tn,[en])}for(const[en,tn]of d)d.set(en,l(tn,c));return n(d)})(t,0)}function fh(t,n){return Array.from(n,a=>t[a])}function du(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[a]=n;if(a&&a.length!==2||n.length>1){const s=Uint32Array.from(t,(l,u)=>u);return n.length>1?(n=n.map(l=>t.map(l)),s.sort((l,u)=>{for(const c of n){const d=Le(c[l],c[u]);if(d)return d}})):(a=t.map(a),s.sort((l,u)=>Le(a[l],a[u]))),fh(t,s)}return t.sort(lc(a))}function lc(t=hn){if(t===hn)return Le;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,a)=>{const s=t(n,a);return s||s===0?s:(t(a,a)===0)-(t(n,n)===0)}}function Le(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function Xg(t,n,a){return(n.length!==2?du(ah(t,n,a),(([s,l],[u,c])=>hn(l,c)||hn(s,u))):du(rh(t,a),(([s,l],[u,c])=>n(l,c)||hn(s,u)))).map(([s])=>s)}var Hg=Array.prototype,jg=Hg.slice;function Aa(t){return()=>t}const Wg=Math.sqrt(50),Vg=Math.sqrt(10),Gg=Math.sqrt(2);function Wi(t,n,a){const s=(n-t)/Math.max(0,a),l=Math.floor(Math.log10(s)),u=s/Math.pow(10,l),c=u>=Wg?10:u>=Vg?5:u>=Gg?2:1;let d,Ct,ar;return l<0?(ar=Math.pow(10,-l)/c,d=Math.round(t*ar),Ct=Math.round(n*ar),d/ar<t&&++d,Ct/ar>n&&--Ct,ar=-ar):(ar=Math.pow(10,l)*c,d=Math.round(t/ar),Ct=Math.round(n/ar),d*ar<t&&++d,Ct*ar>n&&--Ct),Ct<d&&.5<=a&&a<2?Wi(t,n,a*2):[d,Ct,ar]}function oe$1(t,n,a){if(n=+n,t=+t,a=+a,!(a>0))return[];if(t===n)return[t];const s=n<t,[l,u,c]=s?Wi(n,t,a):Wi(t,n,a);if(!(u>=l))return[];const d=u-l+1,Ct=new Array(d);if(s)if(c<0)for(let ar=0;ar<d;++ar)Ct[ar]=(u-ar)/-c;else for(let ar=0;ar<d;++ar)Ct[ar]=(u-ar)*c;else if(c<0)for(let ar=0;ar<d;++ar)Ct[ar]=(l+ar)/-c;else for(let ar=0;ar<d;++ar)Ct[ar]=(l+ar)*c;return Ct}function ae$1(t,n,a){return n=+n,t=+t,a=+a,Wi(t,n,a)[2]}function Vi(t,n,a){n=+n,t=+t,a=+a;const s=n<t,l=s?ae$1(n,t,a):ae$1(t,n,a);return(s?-1:1)*(l<0?1/-l:l)}function hc(t,n,a){let s;for(;;){const l=ae$1(t,n,a);if(l===s||l===0||!isFinite(l))return[t,n];l>0?(t=Math.floor(t/l)*l,n=Math.ceil(n/l)*l):l<0&&(t=Math.ceil(t*l)/l,n=Math.floor(n*l)/l),s=l}}function dc(t){return Math.max(1,Math.ceil(Math.log(Yo(t))/Math.LN2)+1)}function Nf(){var t=qe,n=kr,a=dc;function s(l){Array.isArray(l)||(l=Array.from(l));var u,c=l.length,d,Ct,ar=new Array(c);for(u=0;u<c;++u)ar[u]=t(l[u],u,l);var en=n(ar),tn=en[0],on=en[1],fn=a(ar,tn,on);if(!Array.isArray(fn)){const sx=on,lx=+fn;if(n===kr&&([tn,on]=hc(tn,on,lx)),fn=oe$1(tn,on,lx),fn[0]<=tn&&(Ct=ae$1(tn,on,lx)),fn[fn.length-1]>=on)if(sx>=on&&n===kr){const cx=ae$1(tn,on,lx);isFinite(cx)&&(cx>0?on=(Math.floor(on/cx)+1)*cx:cx<0&&(on=(Math.ceil(on*-cx)+1)/-cx))}else fn.pop()}for(var dn=fn.length,Cn=0,Rn=dn;fn[Cn]<=tn;)++Cn;for(;fn[Rn-1]>on;)--Rn;(Cn||Rn<dn)&&(fn=fn.slice(Cn,Rn),dn=Rn-Cn);var ax=new Array(dn+1),ox;for(u=0;u<=dn;++u)ox=ax[u]=[],ox.x0=u>0?fn[u-1]:tn,ox.x1=u<dn?fn[u]:on;if(isFinite(Ct)){if(Ct>0)for(u=0;u<c;++u)(d=ar[u])!=null&&tn<=d&&d<=on&&ax[Math.min(dn,Math.floor((d-tn)/Ct))].push(l[u]);else if(Ct<0){for(u=0;u<c;++u)if((d=ar[u])!=null&&tn<=d&&d<=on){const sx=Math.floor((tn-d)*Ct);ax[Math.min(dn,sx+(fn[sx]<=d))].push(l[u])}}}else for(u=0;u<c;++u)(d=ar[u])!=null&&tn<=d&&d<=on&&ax[Ft(fn,d,0,dn)].push(l[u]);return ax}return s.value=function(l){return arguments.length?(t=typeof l=="function"?l:Aa(l),s):t},s.domain=function(l){return arguments.length?(n=typeof l=="function"?l:Aa([l[0],l[1]]),s):n},s.thresholds=function(l){return arguments.length?(a=typeof l=="function"?l:Aa(Array.isArray(l)?jg.call(l):l),s):a},s}function Dr(t,n){let a;if(n===void 0)for(const s of t)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(a<l||a===void 0&&l>=l)&&(a=l)}return a}function gc(t,n){let a,s=-1,l=-1;if(n===void 0)for(const u of t)++l,u!=null&&(a<u||a===void 0&&u>=u)&&(a=u,s=l);else for(let u of t)(u=n(u,++l,t))!=null&&(a<u||a===void 0&&u>=u)&&(a=u,s=l);return s}function Gi(t,n){let a;if(n===void 0)for(const s of t)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(a>l||a===void 0&&l>=l)&&(a=l)}return a}function pc(t,n){let a,s=-1,l=-1;if(n===void 0)for(const u of t)++l,u!=null&&(a>u||a===void 0&&u>=u)&&(a=u,s=l);else for(let u of t)(u=n(u,++l,t))!=null&&(a>u||a===void 0&&u>=u)&&(a=u,s=l);return s}function Fo(t,n,a=0,s=1/0,l){if(n=Math.floor(n),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(t.length-1,s)),!(a<=n&&n<=s))return t;for(l=l===void 0?Le:lc(l);s>a;){if(s-a>600){const Ct=s-a+1,ar=n-a+1,en=Math.log(Ct),tn=.5*Math.exp(2*en/3),on=.5*Math.sqrt(en*tn*(Ct-tn)/Ct)*(ar-Ct/2<0?-1:1),fn=Math.max(a,Math.floor(n-ar*tn/Ct+on)),dn=Math.min(s,Math.floor(n+(Ct-ar)*tn/Ct+on));Fo(t,n,fn,dn,l)}const u=t[n];let c=a,d=s;for(ur(t,a,n),l(t[s],u)>0&&ur(t,a,s);c<d;){for(ur(t,c,d),++c,--d;l(t[c],u)<0;)++c;for(;l(t[d],u)>0;)--d}l(t[a],u)===0?ur(t,a,d):(++d,ur(t,d,s)),d<=n&&(a=d+1),n<=d&&(s=d-1)}return t}function ur(t,n,a){const s=t[n];t[n]=t[a],t[a]=s}function sh(t,n=hn){let a,s=!1;if(n.length===1){let l;for(const u of t){const c=n(u);(s?hn(c,l)>0:hn(c,c)===0)&&(a=u,l=c,s=!0)}}else for(const l of t)(s?n(l,a)>0:n(l,l)===0)&&(a=l,s=!0);return a}function zr(t,n,a){if(t=Float64Array.from(Tg(t,a)),!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return Gi(t);if(n>=1)return Dr(t);var s,l=(s-1)*n,u=Math.floor(l),c=Dr(Fo(t,u).subarray(0,u+1)),d=Gi(t.subarray(u+1));return c+(d-c)*(l-u)}}function lh(t,n,a=ji){if(!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return+a(t[0],0,t);if(n>=1)return+a(t[s-1],s-1,t);var s,l=(s-1)*n,u=Math.floor(l),c=+a(t[u],u,t),d=+a(t[u+1],u+1,t);return c+(d-c)*(l-u)}}function hh(t,n,a=ji){if(!isNaN(n=+n)){if(s=Float64Array.from(t,(d,Ct)=>ji(a(t[Ct],Ct,t))),n<=0)return pc(s);if(n>=1)return gc(s);var s,l=Uint32Array.from(t,(d,Ct)=>Ct),u=s.length-1,c=Math.floor(u*n);return Fo(l,c,0,u,(d,Ct)=>Le(s[d],s[Ct])),c=sh(l.subarray(0,c+1),d=>s[d]),c>=0?c:-1}}function Zg(t,n,a){const s=Yo(t),l=zr(t,.75)-zr(t,.25);return s&&l?Math.ceil((a-n)/(2*l*Math.pow(s,-1/3))):1}function Qg(t,n,a){const s=Yo(t),l=Jl(t);return s&&l?Math.ceil((a-n)*Math.cbrt(s)/(3.49*l)):1}function Kg(t,n){let a=0,s=0;if(n===void 0)for(let l of t)l!=null&&(l=+l)>=l&&(++a,s+=l);else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(u=+u)>=u&&(++a,s+=u)}if(a)return s/a}function Jg(t,n){return zr(t,.5,n)}function np(t,n){return hh(t,.5,n)}function*tp(t){for(const n of t)yield*n}function mc(t){return Array.from(tp(t))}function ep(t,n){const a=new Pr;if(n===void 0)for(let u of t)u!=null&&u>=u&&a.set(u,(a.get(u)||0)+1);else{let u=-1;for(let c of t)(c=n(c,++u,t))!=null&&c>=c&&a.set(c,(a.get(c)||0)+1)}let s,l=0;for(const[u,c]of a)c>l&&(l=c,s=u);return s}function rp(t,n=ip){const a=[];let s,l=!1;for(const u of t)l&&a.push(n(s,u)),s=u,l=!0;return a}function ip(t,n){return[t,n]}function zt(t,n,a){t=+t,n=+n,a=(l=arguments.length)<2?(n=t,t=0,1):l<3?1:+a;for(var s=-1,l=Math.max(0,Math.ceil((n-t)/a))|0,u=new Array(l);++s<l;)u[s]=t+s*a;return u}function op(t,n=hn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let a=Array.from(t);const s=new Float64Array(a.length);n.length!==2&&(a=a.map(n),n=hn);const l=(d,Ct)=>n(a[d],a[Ct]);let u,c;return t=Uint32Array.from(a,(d,Ct)=>Ct),t.sort(n===hn?(d,Ct)=>Le(a[d],a[Ct]):lc(l)),t.forEach((d,Ct)=>{const ar=l(d,u===void 0?d:u);ar>=0?((u===void 0||ar>0)&&(u=d,c=Ct),s[d]=c):s[d]=NaN}),s}function ap(t,n=hn){let a,s=!1;if(n.length===1){let l;for(const u of t){const c=n(u);(s?hn(c,l)<0:hn(c,c)===0)&&(a=u,l=c,s=!0)}}else for(const l of t)(s?n(l,a)<0:n(l,l)===0)&&(a=l,s=!0);return a}function dh(t,n=hn){if(n.length===1)return pc(t,n);let a,s=-1,l=-1;for(const u of t)++l,(s<0?n(u,u)===0:n(u,a)<0)&&(a=u,s=l);return s}function up(t,n=hn){if(n.length===1)return gc(t,n);let a,s=-1,l=-1;for(const u of t)++l,(s<0?n(u,u)===0:n(u,a)>0)&&(a=u,s=l);return s}function cp(t,n){const a=dh(t,n);return a<0?void 0:a}const fp=gh(Math.random);function gh(t){return function(n,a=0,s=n.length){let l=s-(a=+a);for(;l;){const u=t()*l--|0,c=n[l+a];n[l+a]=n[u+a],n[u+a]=c}return n}}function sp(t,n){let a=0;if(n===void 0)for(let s of t)(s=+s)&&(a+=s);else{let s=-1;for(let l of t)(l=+n(l,++s,t))&&(a+=l)}return a}function ph(t){if(!(u=t.length))return[];for(var n=-1,a=Gi(t,lp),s=new Array(a);++n<a;)for(var l=-1,u,c=s[n]=new Array(u);++l<u;)c[l]=t[l][n];return s}function lp(t){return t.length}function hp(){return ph(arguments)}function dp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const s of t)if(!n(s,++a,t))return!1;return!0}function gp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const s of t)if(n(s,++a,t))return!0;return!1}function pp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");const a=[];let s=-1;for(const l of t)n(l,++s,t)&&a.push(l);return a}function mp(t,n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(t,(a,s)=>n(a,s,t))}function yp(t,n,a){if(typeof n!="function")throw new TypeError("reducer is not a function");const s=t[Symbol.iterator]();let l,u,c=-1;if(arguments.length<3){if({done:l,value:a}=s.next(),l)return;++c}for(;{done:l,value:u}=s.next(),!l;)a=n(a,u,++c,t);return a}function _p(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function vp(t,...n){t=new ie(t);for(const a of n)for(const s of a)t.delete(s);return t}function bp(t,n){const a=n[Symbol.iterator](),s=new ie;for(const l of t){if(s.has(l))return!1;let u,c;for(;({value:u,done:c}=a.next())&&!c;){if(Object.is(l,u))return!1;s.add(u)}}return!0}function wp(t,...n){t=new ie(t),n=n.map(xp);e:for(const a of t)for(const s of n)if(!s.has(a)){t.delete(a);continue e}return t}function xp(t){return t instanceof ie?t:new ie(t)}function mh(t,n){const a=t[Symbol.iterator](),s=new Set;for(const l of n){const u=If(l);if(s.has(u))continue;let c,d;for(;{value:c,done:d}=a.next();){if(d)return!1;const Ct=If(c);if(s.add(Ct),Object.is(u,Ct))break}}return!0}function If(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Mp(t,n){return mh(n,t)}function $p(...t){const n=new ie;for(const a of t)for(const s of a)n.add(s);return n}function Tp(t){return t}var Pi=1,Di=2,gu=3,mr=4,Rf=1e-6;function Ap(t){return"translate("+t+",0)"}function Ep(t){return"translate(0,"+t+")"}function kp(t){return n=>+t(n)}function Sp(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),a=>+t(a)+n}function Np(){return!this.__axis}function qo(t,n){var a=[],s=null,l=null,u=6,c=6,d=3,Ct=typeof window<"u"&&window.devicePixelRatio>1?0:.5,ar=t===Pi||t===mr?-1:1,en=t===mr||t===Di?"x":"y",tn=t===Pi||t===gu?Ap:Ep;function on(fn){var dn=s??(n.ticks?n.ticks.apply(n,a):n.domain()),Cn=l??(n.tickFormat?n.tickFormat.apply(n,a):Tp),Rn=Math.max(u,0)+d,ax=n.range(),ox=+ax[0]+Ct,sx=+ax[ax.length-1]+Ct,lx=(n.bandwidth?Sp:kp)(n.copy(),Ct),cx=fn.selection?fn.selection():fn,fx=cx.selectAll(".domain").data([null]),gx=cx.selectAll(".tick").data(dn,n).order(),mx=gx.exit(),px=gx.enter().append("g").attr("class","tick"),hx=gx.select("line"),vx=gx.select("text");fx=fx.merge(fx.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),gx=gx.merge(px),hx=hx.merge(px.append("line").attr("stroke","currentColor").attr(en+"2",ar*u)),vx=vx.merge(px.append("text").attr("fill","currentColor").attr(en,ar*Rn).attr("dy",t===Pi?"0em":t===gu?"0.71em":"0.32em")),fn!==cx&&(fx=fx.transition(fn),gx=gx.transition(fn),hx=hx.transition(fn),vx=vx.transition(fn),mx=mx.transition(fn).attr("opacity",Rf).attr("transform",function(yx){return isFinite(yx=lx(yx))?tn(yx+Ct):this.getAttribute("transform")}),px.attr("opacity",Rf).attr("transform",function(yx){var Sx=this.parentNode.__axis;return tn((Sx&&isFinite(Sx=Sx(yx))?Sx:lx(yx))+Ct)})),mx.remove(),fx.attr("d",t===mr||t===Di?c?"M"+ar*c+","+ox+"H"+Ct+"V"+sx+"H"+ar*c:"M"+Ct+","+ox+"V"+sx:c?"M"+ox+","+ar*c+"V"+Ct+"H"+sx+"V"+ar*c:"M"+ox+","+Ct+"H"+sx),gx.attr("opacity",1).attr("transform",function(yx){return tn(lx(yx)+Ct)}),hx.attr(en+"2",ar*u),vx.attr(en,ar*Rn).text(Cn),cx.filter(Np).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Di?"start":t===mr?"end":"middle"),cx.each(function(){this.__axis=lx})}return on.scale=function(fn){return arguments.length?(n=fn,on):n},on.ticks=function(){return a=Array.from(arguments),on},on.tickArguments=function(fn){return arguments.length?(a=fn==null?[]:Array.from(fn),on):a.slice()},on.tickValues=function(fn){return arguments.length?(s=fn==null?null:Array.from(fn),on):s&&s.slice()},on.tickFormat=function(fn){return arguments.length?(l=fn,on):l},on.tickSize=function(fn){return arguments.length?(u=c=+fn,on):u},on.tickSizeInner=function(fn){return arguments.length?(u=+fn,on):u},on.tickSizeOuter=function(fn){return arguments.length?(c=+fn,on):c},on.tickPadding=function(fn){return arguments.length?(d=+fn,on):d},on.offset=function(fn){return arguments.length?(Ct=+fn,on):Ct},on}function Ip(t){return qo(Pi,t)}function Rp(t){return qo(Di,t)}function Cp(t){return qo(gu,t)}function Pp(t){return qo(mr,t)}var Dp={value:()=>{}};function pe$1(){for(var t=0,n=arguments.length,a={},s;t<n;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new zi(a)}function zi(t){this._=t}function zp(t,n){return t.trim().split(/^|\s+/).map(function(a){var s="",l=a.indexOf(".");if(l>=0&&(s=a.slice(l+1),a=a.slice(0,l)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}zi.prototype=pe$1.prototype={constructor:zi,on:function(t,n){var a=this._,s=zp(t+"",a),l,u=-1,c=s.length;if(arguments.length<2){for(;++u<c;)if((l=(t=s[u]).type)&&(l=Op(a[l],t.name)))return l;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<c;)if(l=(t=s[u]).type)a[l]=Cf(a[l],t.name,n);else if(n==null)for(l in a)a[l]=Cf(a[l],t.name,null);return this},copy:function(){var t={},n=this._;for(var a in n)t[a]=n[a].slice();return new zi(t)},call:function(t,n){if((l=arguments.length-2)>0)for(var a=new Array(l),s=0,l,u;s<l;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],s=0,l=u.length;s<l;++s)u[s].value.apply(n,a)},apply:function(t,n,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],l=0,u=s.length;l<u;++l)s[l].value.apply(n,a)}};function Op(t,n){for(var a=0,s=t.length,l;a<s;++a)if((l=t[a]).name===n)return l.value}function Cf(t,n,a){for(var s=0,l=t.length;s<l;++s)if(t[s].name===n){t[s]=Dp,t=t.slice(0,s).concat(t.slice(s+1));break}return a!=null&&t.push({name:n,value:a}),t}var pu="http://www.w3.org/1999/xhtml";const mu={svg:"http://www.w3.org/2000/svg",xhtml:pu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kr(t){var n=t+="",a=n.indexOf(":");return a>=0&&(n=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),mu.hasOwnProperty(n)?{space:mu[n],local:t}:t}function Yp(t){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===pu&&n.documentElement.namespaceURI===pu?n.createElement(t):n.createElementNS(a,t)}}function Fp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Lo(t){var n=Kr(t);return(n.local?Fp:Yp)(n)}function qp(){}function Bo(t){return t==null?qp:function(){return this.querySelector(t)}}function Lp(t){typeof t!="function"&&(t=Bo(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,d=s[l]=new Array(c),Ct,ar,en=0;en<c;++en)(Ct=u[en])&&(ar=t.call(Ct,Ct.__data__,en,u))&&("__data__"in Ct&&(ar.__data__=Ct.__data__),d[en]=ar);return new qn(s,this._parents)}function yh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Bp(){return[]}function yc(t){return t==null?Bp:function(){return this.querySelectorAll(t)}}function Up(t){return function(){return yh(t.apply(this,arguments))}}function Xp(t){typeof t=="function"?t=Up(t):t=yc(t);for(var n=this._groups,a=n.length,s=[],l=[],u=0;u<a;++u)for(var c=n[u],d=c.length,Ct,ar=0;ar<d;++ar)(Ct=c[ar])&&(s.push(t.call(Ct,Ct.__data__,ar,c)),l.push(Ct));return new qn(s,l)}function _c$1(t){return function(){return this.matches(t)}}function _h(t){return function(n){return n.matches(t)}}var Hp=Array.prototype.find;function jp(t){return function(){return Hp.call(this.children,t)}}function Wp(){return this.firstElementChild}function Vp(t){return this.select(t==null?Wp:jp(typeof t=="function"?t:_h(t)))}var Gp=Array.prototype.filter;function Zp(){return Array.from(this.children)}function Qp(t){return function(){return Gp.call(this.children,t)}}function Kp(t){return this.selectAll(t==null?Zp:Qp(typeof t=="function"?t:_h(t)))}function Jp(t){typeof t!="function"&&(t=_c$1(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,d=s[l]=[],Ct,ar=0;ar<c;++ar)(Ct=u[ar])&&t.call(Ct,Ct.__data__,ar,u)&&d.push(Ct);return new qn(s,this._parents)}function vh(t){return new Array(t.length)}function n2(){return new qn(this._enter||this._groups.map(vh),this._parents)}function Zi(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Zi.prototype={constructor:Zi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function t2(t){return function(){return t}}function e2(t,n,a,s,l,u){for(var c=0,d,Ct=n.length,ar=u.length;c<ar;++c)(d=n[c])?(d.__data__=u[c],s[c]=d):a[c]=new Zi(t,u[c]);for(;c<Ct;++c)(d=n[c])&&(l[c]=d)}function r2(t,n,a,s,l,u,c){var d,Ct,ar=new Map,en=n.length,tn=u.length,on=new Array(en),fn;for(d=0;d<en;++d)(Ct=n[d])&&(on[d]=fn=c.call(Ct,Ct.__data__,d,n)+"",ar.has(fn)?l[d]=Ct:ar.set(fn,Ct));for(d=0;d<tn;++d)fn=c.call(t,u[d],d,u)+"",(Ct=ar.get(fn))?(s[d]=Ct,Ct.__data__=u[d],ar.delete(fn)):a[d]=new Zi(t,u[d]);for(d=0;d<en;++d)(Ct=n[d])&&ar.get(on[d])===Ct&&(l[d]=Ct)}function i2(t){return t.__data__}function o2(t,n){if(!arguments.length)return Array.from(this,i2);var a=n?r2:e2,s=this._parents,l=this._groups;typeof t!="function"&&(t=t2(t));for(var u=l.length,c=new Array(u),d=new Array(u),Ct=new Array(u),ar=0;ar<u;++ar){var en=s[ar],tn=l[ar],on=tn.length,fn=a2(t.call(en,en&&en.__data__,ar,s)),dn=fn.length,Cn=d[ar]=new Array(dn),Rn=c[ar]=new Array(dn),ax=Ct[ar]=new Array(on);a(en,tn,Cn,Rn,ax,fn,n);for(var ox=0,sx=0,lx,cx;ox<dn;++ox)if(lx=Cn[ox]){for(ox>=sx&&(sx=ox+1);!(cx=Rn[sx])&&++sx<dn;);lx._next=cx||null}}return c=new qn(c,s),c._enter=d,c._exit=Ct,c}function a2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function u2(){return new qn(this._exit||this._groups.map(vh),this._parents)}function c2(t,n,a){var s=this.enter(),l=this,u=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),n!=null&&(l=n(l),l&&(l=l.selection())),a==null?u.remove():a(u),s&&l?s.merge(l).order():l}function f2(t){for(var n=t.selection?t.selection():t,a=this._groups,s=n._groups,l=a.length,u=s.length,c=Math.min(l,u),d=new Array(l),Ct=0;Ct<c;++Ct)for(var ar=a[Ct],en=s[Ct],tn=ar.length,on=d[Ct]=new Array(tn),fn,dn=0;dn<tn;++dn)(fn=ar[dn]||en[dn])&&(on[dn]=fn);for(;Ct<l;++Ct)d[Ct]=a[Ct];return new qn(d,this._parents)}function s2(){for(var t=this._groups,n=-1,a=t.length;++n<a;)for(var s=t[n],l=s.length-1,u=s[l],c;--l>=0;)(c=s[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function l2(t){t||(t=h2);function n(tn,on){return tn&&on?t(tn.__data__,on.__data__):!tn-!on}for(var a=this._groups,s=a.length,l=new Array(s),u=0;u<s;++u){for(var c=a[u],d=c.length,Ct=l[u]=new Array(d),ar,en=0;en<d;++en)(ar=c[en])&&(Ct[en]=ar);Ct.sort(n)}return new qn(l,this._parents).order()}function h2(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function d2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function g2(){return Array.from(this)}function p2(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var s=t[n],l=0,u=s.length;l<u;++l){var c=s[l];if(c)return c}return null}function m2(){let t=0;for(const n of this)++t;return t}function y2(){return!this.node()}function _2(t){for(var n=this._groups,a=0,s=n.length;a<s;++a)for(var l=n[a],u=0,c=l.length,d;u<c;++u)(d=l[u])&&t.call(d,d.__data__,u,l);return this}function v2$1(t){return function(){this.removeAttribute(t)}}function b2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w2(t,n){return function(){this.setAttribute(t,n)}}function x2(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function M2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function $2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function T2(t,n){var a=Kr(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((n==null?a.local?b2:v2$1:typeof n=="function"?a.local?$2:M2:a.local?x2:w2)(a,n))}function vc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A2(t){return function(){this.style.removeProperty(t)}}function E2(t,n,a){return function(){this.style.setProperty(t,n,a)}}function k2(t,n,a){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function S2(t,n,a){return arguments.length>1?this.each((n==null?A2:typeof n=="function"?k2:E2)(t,n,a??"")):ue$1(this.node(),t)}function ue$1(t,n){return t.style.getPropertyValue(n)||vc(t).getComputedStyle(t,null).getPropertyValue(n)}function N2(t){return function(){delete this[t]}}function I2(t,n){return function(){this[t]=n}}function R2(t,n){return function(){var a=n.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function C2(t,n){return arguments.length>1?this.each((n==null?N2:typeof n=="function"?R2:I2)(t,n)):this.node()[t]}function bh(t){return t.trim().split(/^|\s+/)}function bc(t){return t.classList||new wh(t)}function wh(t){this._node=t,this._names=bh(t.getAttribute("class")||"")}wh.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xh(t,n){for(var a=bc(t),s=-1,l=n.length;++s<l;)a.add(n[s])}function Mh(t,n){for(var a=bc(t),s=-1,l=n.length;++s<l;)a.remove(n[s])}function P2(t){return function(){xh(this,t)}}function D2(t){return function(){Mh(this,t)}}function z2(t,n){return function(){(n.apply(this,arguments)?xh:Mh)(this,t)}}function O2(t,n){var a=bh(t+"");if(arguments.length<2){for(var s=bc(this.node()),l=-1,u=a.length;++l<u;)if(!s.contains(a[l]))return!1;return!0}return this.each((typeof n=="function"?z2:n?P2:D2)(a,n))}function Y2(){this.textContent=""}function F2(t){return function(){this.textContent=t}}function q2(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function L2(t){return arguments.length?this.each(t==null?Y2:(typeof t=="function"?q2:F2)(t)):this.node().textContent}function B2(){this.innerHTML=""}function U2(t){return function(){this.innerHTML=t}}function X2(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function H2(t){return arguments.length?this.each(t==null?B2:(typeof t=="function"?X2:U2)(t)):this.node().innerHTML}function j2(){this.nextSibling&&this.parentNode.appendChild(this)}function W2(){return this.each(j2)}function V2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G2(){return this.each(V2)}function Z2(t){var n=typeof t=="function"?t:Lo(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Q2(){return null}function K2(t,n){var a=typeof t=="function"?t:Lo(t),s=n==null?Q2:typeof n=="function"?n:Bo(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})}function J2(){var t=this.parentNode;t&&t.removeChild(this)}function nm(){return this.each(J2)}function tm(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function em(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function rm(t){return this.select(t?em:tm)}function im(t){return arguments.length?this.property("__data__",t):this.node().__data__}function om(t){return function(n){t.call(this,n,this.__data__)}}function am(t){return t.trim().split(/^|\s+/).map(function(n){var a="",s=n.indexOf(".");return s>=0&&(a=n.slice(s+1),n=n.slice(0,s)),{type:n,name:a}})}function um(t){return function(){var n=this.__on;if(n){for(var a=0,s=-1,l=n.length,u;a<l;++a)u=n[a],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):n[++s]=u;++s?n.length=s:delete this.__on}}}function cm(t,n,a){return function(){var s=this.__on,l,u=om(n);if(s){for(var c=0,d=s.length;c<d;++c)if((l=s[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=a),l.value=n;return}}this.addEventListener(t.type,u,a),l={type:t.type,name:t.name,value:n,listener:u,options:a},s?s.push(l):this.__on=[l]}}function fm(t,n,a){var s=am(t+""),l,u=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var Ct=0,ar=d.length,en;Ct<ar;++Ct)for(l=0,en=d[Ct];l<u;++l)if((c=s[l]).type===en.type&&c.name===en.name)return en.value}return}for(d=n?cm:um,l=0;l<u;++l)this.each(d(s[l],n,a));return this}function $h(t,n,a){var s=vc(t),l=s.CustomEvent;typeof l=="function"?l=new l(n,a):(l=s.document.createEvent("Event"),a?(l.initEvent(n,a.bubbles,a.cancelable),l.detail=a.detail):l.initEvent(n,!1,!1)),t.dispatchEvent(l)}function sm(t,n){return function(){return $h(this,t,n)}}function lm(t,n){return function(){return $h(this,t,n.apply(this,arguments))}}function hm(t,n){return this.each((typeof n=="function"?lm:sm)(t,n))}function*dm(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var s=t[n],l=0,u=s.length,c;l<u;++l)(c=s[l])&&(yield c)}var wc=[null];function qn(t,n){this._groups=t,this._parents=n}function me$1(){return new qn([[document.documentElement]],wc)}function gm(){return this}qn.prototype=me$1.prototype={constructor:qn,select:Lp,selectAll:Xp,selectChild:Vp,selectChildren:Kp,filter:Jp,data:o2,enter:n2,exit:u2,join:c2,merge:f2,selection:gm,order:s2,sort:l2,call:d2,nodes:g2,node:p2,size:m2,empty:y2,each:_2,attr:T2,style:S2,property:C2,classed:O2,text:L2,html:H2,raise:W2,lower:G2,append:Z2,insert:K2,remove:nm,clone:rm,datum:im,on:fm,dispatch:hm,[Symbol.iterator]:dm};function X$1(t){return typeof t=="string"?new qn([[document.querySelector(t)]],[document.documentElement]):new qn([[t]],wc)}function pm(t){return X$1(Lo(t).call(document.documentElement))}var mm=0;function Th(){return new yu}function yu(){this._="@"+(++mm).toString(36)}yu.prototype=Th.prototype={constructor:yu,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Ah(t){let n;for(;n=t.sourceEvent;)t=n;return t}function wn(t,n){if(t=Ah(t),n===void 0&&(n=t.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var s=a.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var l=n.getBoundingClientRect();return[t.clientX-l.left-n.clientLeft,t.clientY-l.top-n.clientTop]}}return[t.pageX,t.pageY]}function ym(t,n){return t.target&&(t=Ah(t),n===void 0&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,a=>wn(a,n))}function _m(t){return typeof t=="string"?new qn([document.querySelectorAll(t)],[document.documentElement]):new qn([yh(t)],wc)}const vm={passive:!1},Or={capture:!0,passive:!1};function Ea(t){t.stopImmediatePropagation()}function De(t){t.preventDefault(),t.stopImmediatePropagation()}function Uo(t){var n=t.document.documentElement,a=X$1(t).on("dragstart.drag",De,Or);"onselectstart"in n?a.on("selectstart.drag",De,Or):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xo(t,n){var a=t.document.documentElement,s=X$1(t).on("dragstart.drag",null);n&&(s.on("click.drag",De,Or),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in a?s.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const hi=t=>()=>t;function _u(t,{sourceEvent:n,subject:a,target:s,identifier:l,active:u,x:c,y:d,dx:Ct,dy:ar,dispatch:en}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:Ct,enumerable:!0,configurable:!0},dy:{value:ar,enumerable:!0,configurable:!0},_:{value:en}})}_u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function bm(t){return!t.ctrlKey&&!t.button}function wm(){return this.parentNode}function xm(t,n){return n??{x:t.x,y:t.y}}function Mm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eh(){var t=bm,n=wm,a=xm,s=Mm,l={},u=pe$1("start","drag","end"),c=0,d,Ct,ar,en,tn=0;function on(lx){lx.on("mousedown.drag",fn).filter(s).on("touchstart.drag",Rn).on("touchmove.drag",ax,vm).on("touchend.drag touchcancel.drag",ox).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function fn(lx,cx){if(!(en||!t.call(this,lx,cx))){var fx=sx(this,n.call(this,lx,cx),lx,cx,"mouse");fx&&(X$1(lx.view).on("mousemove.drag",dn,Or).on("mouseup.drag",Cn,Or),Uo(lx.view),Ea(lx),ar=!1,d=lx.clientX,Ct=lx.clientY,fx("start",lx))}}function dn(lx){if(De(lx),!ar){var cx=lx.clientX-d,fx=lx.clientY-Ct;ar=cx*cx+fx*fx>tn}l.mouse("drag",lx)}function Cn(lx){X$1(lx.view).on("mousemove.drag mouseup.drag",null),Xo(lx.view,ar),De(lx),l.mouse("end",lx)}function Rn(lx,cx){if(t.call(this,lx,cx)){var fx=lx.changedTouches,gx=n.call(this,lx,cx),mx=fx.length,px,hx;for(px=0;px<mx;++px)(hx=sx(this,gx,lx,cx,fx[px].identifier,fx[px]))&&(Ea(lx),hx("start",lx,fx[px]))}}function ax(lx){var cx=lx.changedTouches,fx=cx.length,gx,mx;for(gx=0;gx<fx;++gx)(mx=l[cx[gx].identifier])&&(De(lx),mx("drag",lx,cx[gx]))}function ox(lx){var cx=lx.changedTouches,fx=cx.length,gx,mx;for(en&&clearTimeout(en),en=setTimeout(function(){en=null},500),gx=0;gx<fx;++gx)(mx=l[cx[gx].identifier])&&(Ea(lx),mx("end",lx,cx[gx]))}function sx(lx,cx,fx,gx,mx,px){var hx=u.copy(),vx=wn(px||fx,cx),yx,Sx,_x;if((_x=a.call(lx,new _u("beforestart",{sourceEvent:fx,target:on,identifier:mx,active:c,x:vx[0],y:vx[1],dx:0,dy:0,dispatch:hx}),gx))!=null)return yx=_x.x-vx[0]||0,Sx=_x.y-vx[1]||0,function Ex(bx,Ax,Mx){var Rx=vx,Cx;switch(bx){case"start":l[mx]=Ex,Cx=c++;break;case"end":delete l[mx],--c;case"drag":vx=wn(Mx||Ax,cx),Cx=c;break}hx.call(bx,lx,new _u(bx,{sourceEvent:Ax,subject:_x,target:on,identifier:mx,active:Cx,x:vx[0]+yx,y:vx[1]+Sx,dx:vx[0]-Rx[0],dy:vx[1]-Rx[1],dispatch:hx}),gx)}}return on.filter=function(lx){return arguments.length?(t=typeof lx=="function"?lx:hi(!!lx),on):t},on.container=function(lx){return arguments.length?(n=typeof lx=="function"?lx:hi(lx),on):n},on.subject=function(lx){return arguments.length?(a=typeof lx=="function"?lx:hi(lx),on):a},on.touchable=function(lx){return arguments.length?(s=typeof lx=="function"?lx:hi(!!lx),on):s},on.on=function(){var lx=u.on.apply(u,arguments);return lx===u?on:lx},on.clickDistance=function(lx){return arguments.length?(tn=(lx=+lx)*lx,on):Math.sqrt(tn)},on}function rr(t,n,a){t.prototype=n.prototype=a,a.constructor=t}function Jr(t,n){var a=Object.create(t.prototype);for(var s in n)a[s]=n[s];return a}function Xt(){}var ce$1=.7,Be=1/ce$1,ze="\\s*([+-]?\\d+)\\s*",Yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$m=/^#([0-9a-f]{3,8})$/,Tm=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Am=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),Em=new RegExp(`^rgba\\(${ze},${ze},${ze},${Yr}\\)$`),km=new RegExp(`^rgba\\(${dt},${dt},${dt},${Yr}\\)$`),Sm=new RegExp(`^hsl\\(${Yr},${dt},${dt}\\)$`),Nm=new RegExp(`^hsla\\(${Yr},${dt},${dt},${Yr}\\)$`),Pf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rr(Xt,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Df,formatHex:Df,formatHex8:Im,formatHsl:Rm,formatRgb:zf,toString:zf});function Df(){return this.rgb().formatHex()}function Im(){return this.rgb().formatHex8()}function Rm(){return kh(this).formatHsl()}function zf(){return this.rgb().formatRgb()}function qt(t){var n,a;return t=(t+"").trim().toLowerCase(),(n=$m.exec(t))?(a=n[1].length,n=parseInt(n[1],16),a===6?Of(n):a===3?new xn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?di(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?di(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Tm.exec(t))?new xn(n[1],n[2],n[3],1):(n=Am.exec(t))?new xn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Em.exec(t))?di(n[1],n[2],n[3],n[4]):(n=km.exec(t))?di(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Sm.exec(t))?qf(n[1],n[2]/100,n[3]/100,1):(n=Nm.exec(t))?qf(n[1],n[2]/100,n[3]/100,n[4]):Pf.hasOwnProperty(t)?Of(Pf[t]):t==="transparent"?new xn(NaN,NaN,NaN,0):null}function Of(t){return new xn(t>>16&255,t>>8&255,t&255,1)}function di(t,n,a,s){return s<=0&&(t=n=a=NaN),new xn(t,n,a,s)}function xc(t){return t instanceof Xt||(t=qt(t)),t?(t=t.rgb(),new xn(t.r,t.g,t.b,t.opacity)):new xn}function Ue(t,n,a,s){return arguments.length===1?xc(t):new xn(t,n,a,s??1)}function xn(t,n,a,s){this.r=+t,this.g=+n,this.b=+a,this.opacity=+s}rr(xn,Ue,Jr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ce$1:Math.pow(ce$1,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xn(te$1(this.r),te$1(this.g),te$1(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yf,formatHex:Yf,formatHex8:Cm,formatRgb:Ff,toString:Ff}));function Yf(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Cm(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ff(){const t=Qi(this.opacity);return`${t===1?"rgb(":"rgba("}${te$1(this.r)}, ${te$1(this.g)}, ${te$1(this.b)}${t===1?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function te$1(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return t=te$1(t),(t<16?"0":"")+t.toString(16)}function qf(t,n,a,s){return s<=0?t=n=a=NaN:a<=0||a>=1?t=n=NaN:n<=0&&(t=NaN),new rt$1(t,n,a,s)}function kh(t){if(t instanceof rt$1)return new rt$1(t.h,t.s,t.l,t.opacity);if(t instanceof Xt||(t=qt(t)),!t)return new rt$1;if(t instanceof rt$1)return t;t=t.rgb();var n=t.r/255,a=t.g/255,s=t.b/255,l=Math.min(n,a,s),u=Math.max(n,a,s),c=NaN,d=u-l,Ct=(u+l)/2;return d?(n===u?c=(a-s)/d+(a<s)*6:a===u?c=(s-n)/d+2:c=(n-a)/d+4,d/=Ct<.5?u+l:2-u-l,c*=60):d=Ct>0&&Ct<1?0:c,new rt$1(c,d,Ct,t.opacity)}function Ki(t,n,a,s){return arguments.length===1?kh(t):new rt$1(t,n,a,s??1)}function rt$1(t,n,a,s){this.h=+t,this.s=+n,this.l=+a,this.opacity=+s}rr(rt$1,Ki,Jr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ce$1:Math.pow(ce$1,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*n,l=2*a-s;return new xn(ka(t>=240?t-240:t+120,l,s),ka(t,l,s),ka(t<120?t+240:t-120,l,s),this.opacity)},clamp(){return new rt$1(Lf(this.h),gi(this.s),gi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${t===1?"hsl(":"hsla("}${Lf(this.h)}, ${gi(this.s)*100}%, ${gi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lf(t){return t=(t||0)%360,t<0?t+360:t}function gi(t){return Math.max(0,Math.min(1,t||0))}function ka(t,n,a){return(t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n)*255}const Sh=Math.PI/180,Nh=180/Math.PI,Ji=18,Ih=.96422,Rh=1,Ch=.82521,Ph=4/29,Oe=6/29,Dh=3*Oe*Oe,Pm=Oe*Oe*Oe;function zh(t){if(t instanceof at$1)return new at$1(t.l,t.a,t.b,t.opacity);if(t instanceof lt$1)return Yh(t);t instanceof xn||(t=xc(t));var n=Ra(t.r),a=Ra(t.g),s=Ra(t.b),l=Sa((.2225045*n+.7168786*a+.0606169*s)/Rh),u,c;return n===a&&a===s?u=c=l:(u=Sa((.4360747*n+.3850649*a+.1430804*s)/Ih),c=Sa((.0139322*n+.0971045*a+.7141733*s)/Ch)),new at$1(116*l-16,500*(u-l),200*(l-c),t.opacity)}function Dm(t,n){return new at$1(t,0,0,n??1)}function no(t,n,a,s){return arguments.length===1?zh(t):new at$1(t,n,a,s??1)}function at$1(t,n,a,s){this.l=+t,this.a=+n,this.b=+a,this.opacity=+s}rr(at$1,no,Jr(Xt,{brighter(t){return new at$1(this.l+Ji*(t??1),this.a,this.b,this.opacity)},darker(t){return new at$1(this.l-Ji*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,a=isNaN(this.b)?t:t-this.b/200;return n=Ih*Na(n),t=Rh*Na(t),a=Ch*Na(a),new xn(Ia(3.1338561*n-1.6168667*t-.4906146*a),Ia(-.9787684*n+1.9161415*t+.033454*a),Ia(.0719453*n-.2289914*t+1.4052427*a),this.opacity)}}));function Sa(t){return t>Pm?Math.pow(t,1/3):t/Dh+Ph}function Na(t){return t>Oe?t*t*t:Dh*(t-Ph)}function Ia(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ra(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oh(t){if(t instanceof lt$1)return new lt$1(t.h,t.c,t.l,t.opacity);if(t instanceof at$1||(t=zh(t)),t.a===0&&t.b===0)return new lt$1(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Nh;return new lt$1(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zm(t,n,a,s){return arguments.length===1?Oh(t):new lt$1(a,n,t,s??1)}function to(t,n,a,s){return arguments.length===1?Oh(t):new lt$1(t,n,a,s??1)}function lt$1(t,n,a,s){this.h=+t,this.c=+n,this.l=+a,this.opacity=+s}function Yh(t){if(isNaN(t.h))return new at$1(t.l,0,0,t.opacity);var n=t.h*Sh;return new at$1(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}rr(lt$1,to,Jr(Xt,{brighter(t){return new lt$1(this.h,this.c,this.l+Ji*(t??1),this.opacity)},darker(t){return new lt$1(this.h,this.c,this.l-Ji*(t??1),this.opacity)},rgb(){return Yh(this).rgb()}}));var Fh=-.14861,Mc=1.78277,$c=-.29227,Ho=-.90649,Fr=1.97294,Bf=Fr*Ho,Uf=Fr*Mc,Xf=Mc*$c-Ho*Fh;function Om(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);t instanceof xn||(t=xc(t));var n=t.r/255,a=t.g/255,s=t.b/255,l=(Xf*s+Bf*n-Uf*a)/(Xf+Bf-Uf),u=s-l,c=(Fr*(a-l)-$c*u)/Ho,d=Math.sqrt(c*c+u*u)/(Fr*l*(1-l)),Ct=d?Math.atan2(c,u)*Nh-120:NaN;return new ee(Ct<0?Ct+360:Ct,d,l,t.opacity)}function ut(t,n,a,s){return arguments.length===1?Om(t):new ee(t,n,a,s??1)}function ee(t,n,a,s){this.h=+t,this.s=+n,this.l=+a,this.opacity=+s}rr(ee,ut,Jr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ce$1:Math.pow(ce$1,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Sh,n=+this.l,a=isNaN(this.s)?0:this.s*n*(1-n),s=Math.cos(t),l=Math.sin(t);return new xn(255*(n+a*(Fh*s+Mc*l)),255*(n+a*($c*s+Ho*l)),255*(n+a*(Fr*s)),this.opacity)}}));function qh(t,n,a,s,l){var u=t*t,c=u*t;return((1-3*t+3*u-c)*n+(4-6*u+3*c)*a+(1+3*t+3*u-3*c)*s+c*l)/6}function Lh(t){var n=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,n-1):Math.floor(a*n),l=t[s],u=t[s+1],c=s>0?t[s-1]:2*l-u,d=s<n-1?t[s+2]:2*u-l;return qh((a-s/n)*n,c,l,u,d)}}function Bh(t){var n=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*n),l=t[(s+n-1)%n],u=t[s%n],c=t[(s+1)%n],d=t[(s+2)%n];return qh((a-s/n)*n,l,u,c,d)}}const jo=t=>()=>t;function Uh(t,n){return function(a){return t+a*n}}function Ym(t,n,a){return t=Math.pow(t,a),n=Math.pow(n,a)-t,a=1/a,function(s){return Math.pow(t+s*n,a)}}function Wo(t,n){var a=n-t;return a?Uh(t,a>180||a<-180?a-360*Math.round(a/360):a):jo(isNaN(t)?n:t)}function Fm(t){return(t=+t)==1?Mn:function(n,a){return a-n?Ym(n,a,t):jo(isNaN(n)?a:n)}}function Mn(t,n){var a=n-t;return a?Uh(t,a):jo(isNaN(t)?n:t)}const qr=(function t(n){var a=Fm(n);function s(l,u){var c=a((l=Ue(l)).r,(u=Ue(u)).r),d=a(l.g,u.g),Ct=a(l.b,u.b),ar=Mn(l.opacity,u.opacity);return function(en){return l.r=c(en),l.g=d(en),l.b=Ct(en),l.opacity=ar(en),l+""}}return s.gamma=t,s})(1);function Xh(t){return function(n){var a=n.length,s=new Array(a),l=new Array(a),u=new Array(a),c,d;for(c=0;c<a;++c)d=Ue(n[c]),s[c]=d.r||0,l[c]=d.g||0,u[c]=d.b||0;return s=t(s),l=t(l),u=t(u),d.opacity=1,function(Ct){return d.r=s(Ct),d.g=l(Ct),d.b=u(Ct),d+""}}}var Hh=Xh(Lh),qm=Xh(Bh);function Tc(t,n){n||(n=[]);var a=t?Math.min(n.length,t.length):0,s=n.slice(),l;return function(u){for(l=0;l<a;++l)s[l]=t[l]*(1-u)+n[l]*u;return s}}function jh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lm(t,n){return(jh(n)?Tc:Wh)(t,n)}function Wh(t,n){var a=n?n.length:0,s=t?Math.min(a,t.length):0,l=new Array(s),u=new Array(a),c;for(c=0;c<s;++c)l[c]=Ht(t[c],n[c]);for(;c<a;++c)u[c]=n[c];return function(d){for(c=0;c<s;++c)u[c]=l[c](d);return u}}function Vh(t,n){var a=new Date;return t=+t,n=+n,function(s){return a.setTime(t*(1-s)+n*s),a}}function Kn(t,n){return t=+t,n=+n,function(a){return t*(1-a)+n*a}}function Gh(t,n){var a={},s={},l;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(l in n)l in t?a[l]=Ht(t[l],n[l]):s[l]=n[l];return function(u){for(l in a)s[l]=a[l](u);return s}}var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ca=new RegExp(vu.source,"g");function Bm(t){return function(){return t}}function Um(t){return function(n){return t(n)+""}}function Ac(t,n){var a=vu.lastIndex=Ca.lastIndex=0,s,l,u,c=-1,d=[],Ct=[];for(t=t+"",n=n+"";(s=vu.exec(t))&&(l=Ca.exec(n));)(u=l.index)>a&&(u=n.slice(a,u),d[c]?d[c]+=u:d[++c]=u),(s=s[0])===(l=l[0])?d[c]?d[c]+=l:d[++c]=l:(d[++c]=null,Ct.push({i:c,x:Kn(s,l)})),a=Ca.lastIndex;return a<n.length&&(u=n.slice(a),d[c]?d[c]+=u:d[++c]=u),d.length<2?Ct[0]?Um(Ct[0].x):Bm(n):(n=Ct.length,function(ar){for(var en=0,tn;en<n;++en)d[(tn=Ct[en]).i]=tn.x(ar);return d.join("")})}function Ht(t,n){var a=typeof n,s;return n==null||a==="boolean"?jo(n):(a==="number"?Kn:a==="string"?(s=qt(n))?(n=s,qr):Ac:n instanceof qt?qr:n instanceof Date?Vh:jh(n)?Tc:Array.isArray(n)?Wh:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Gh:Kn)(t,n)}function Xm(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}function Hm(t,n){var a=Wo(+t,+n);return function(s){var l=a(s);return l-360*Math.floor(l/360)}}function Vo(t,n){return t=+t,n=+n,function(a){return Math.round(t*(1-a)+n*a)}}var Hf=180/Math.PI,bu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zh(t,n,a,s,l,u){var c,d,Ct;return(c=Math.sqrt(t*t+n*n))&&(t/=c,n/=c),(Ct=t*a+n*s)&&(a-=t*Ct,s-=n*Ct),(d=Math.sqrt(a*a+s*s))&&(a/=d,s/=d,Ct/=d),t*s<n*a&&(t=-t,n=-n,Ct=-Ct,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(n,t)*Hf,skewX:Math.atan(Ct)*Hf,scaleX:c,scaleY:d}}var pi;function jm(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?bu:Zh(n.a,n.b,n.c,n.d,n.e,n.f)}function Wm(t){return t==null||(pi||(pi=document.createElementNS("http://www.w3.org/2000/svg","g")),pi.setAttribute("transform",t),!(t=pi.transform.baseVal.consolidate()))?bu:(t=t.matrix,Zh(t.a,t.b,t.c,t.d,t.e,t.f))}function Qh(t,n,a,s){function l(ar){return ar.length?ar.pop()+" ":""}function u(ar,en,tn,on,fn,dn){if(ar!==tn||en!==on){var Cn=fn.push("translate(",null,n,null,a);dn.push({i:Cn-4,x:Kn(ar,tn)},{i:Cn-2,x:Kn(en,on)})}else(tn||on)&&fn.push("translate("+tn+n+on+a)}function c(ar,en,tn,on){ar!==en?(ar-en>180?en+=360:en-ar>180&&(ar+=360),on.push({i:tn.push(l(tn)+"rotate(",null,s)-2,x:Kn(ar,en)})):en&&tn.push(l(tn)+"rotate("+en+s)}function d(ar,en,tn,on){ar!==en?on.push({i:tn.push(l(tn)+"skewX(",null,s)-2,x:Kn(ar,en)}):en&&tn.push(l(tn)+"skewX("+en+s)}function Ct(ar,en,tn,on,fn,dn){if(ar!==tn||en!==on){var Cn=fn.push(l(fn)+"scale(",null,",",null,")");dn.push({i:Cn-4,x:Kn(ar,tn)},{i:Cn-2,x:Kn(en,on)})}else(tn!==1||on!==1)&&fn.push(l(fn)+"scale("+tn+","+on+")")}return function(ar,en){var tn=[],on=[];return ar=t(ar),en=t(en),u(ar.translateX,ar.translateY,en.translateX,en.translateY,tn,on),c(ar.rotate,en.rotate,tn,on),d(ar.skewX,en.skewX,tn,on),Ct(ar.scaleX,ar.scaleY,en.scaleX,en.scaleY,tn,on),ar=en=null,function(fn){for(var dn=-1,Cn=on.length,Rn;++dn<Cn;)tn[(Rn=on[dn]).i]=Rn.x(fn);return tn.join("")}}}var Kh=Qh(jm,"px, ","px)","deg)"),Jh=Qh(Wm,", ",")",")"),Vm=1e-12;function jf(t){return((t=Math.exp(t))+1/t)/2}function Gm(t){return((t=Math.exp(t))-1/t)/2}function Zm(t){return((t=Math.exp(2*t))-1)/(t+1)}const n0=(function t(n,a,s){function l(u,c){var d=u[0],Ct=u[1],ar=u[2],en=c[0],tn=c[1],on=c[2],fn=en-d,dn=tn-Ct,Cn=fn*fn+dn*dn,Rn,ax;if(Cn<Vm)ax=Math.log(on/ar)/n,Rn=function(gx){return[d+gx*fn,Ct+gx*dn,ar*Math.exp(n*gx*ax)]};else{var ox=Math.sqrt(Cn),sx=(on*on-ar*ar+s*Cn)/(2*ar*a*ox),lx=(on*on-ar*ar-s*Cn)/(2*on*a*ox),cx=Math.log(Math.sqrt(sx*sx+1)-sx),fx=Math.log(Math.sqrt(lx*lx+1)-lx);ax=(fx-cx)/n,Rn=function(gx){var mx=gx*ax,px=jf(cx),hx=ar/(a*ox)*(px*Zm(n*mx+cx)-Gm(cx));return[d+hx*fn,Ct+hx*dn,ar*px/jf(n*mx+cx)]}}return Rn.duration=ax*1e3*n/Math.SQRT2,Rn}return l.rho=function(u){var c=Math.max(.001,+u),d=c*c,Ct=d*d;return t(c,d,Ct)},l})(Math.SQRT2,2,4);function t0(t){return function(n,a){var s=t((n=Ki(n)).h,(a=Ki(a)).h),l=Mn(n.s,a.s),u=Mn(n.l,a.l),c=Mn(n.opacity,a.opacity);return function(d){return n.h=s(d),n.s=l(d),n.l=u(d),n.opacity=c(d),n+""}}}const Qm=t0(Wo);var Km=t0(Mn);function Jm(t,n){var a=Mn((t=no(t)).l,(n=no(n)).l),s=Mn(t.a,n.a),l=Mn(t.b,n.b),u=Mn(t.opacity,n.opacity);return function(c){return t.l=a(c),t.a=s(c),t.b=l(c),t.opacity=u(c),t+""}}function e0(t){return function(n,a){var s=t((n=to(n)).h,(a=to(a)).h),l=Mn(n.c,a.c),u=Mn(n.l,a.l),c=Mn(n.opacity,a.opacity);return function(d){return n.h=s(d),n.c=l(d),n.l=u(d),n.opacity=c(d),n+""}}}const ny=e0(Wo);var ty=e0(Mn);function r0(t){return(function n(a){a=+a;function s(l,u){var c=t((l=ut(l)).h,(u=ut(u)).h),d=Mn(l.s,u.s),Ct=Mn(l.l,u.l),ar=Mn(l.opacity,u.opacity);return function(en){return l.h=c(en),l.s=d(en),l.l=Ct(Math.pow(en,a)),l.opacity=ar(en),l+""}}return s.gamma=n,s})(1)}const ey=r0(Wo);var Go=r0(Mn);function i0(t,n){n===void 0&&(n=t,t=Ht);for(var a=0,s=n.length-1,l=n[0],u=new Array(s<0?0:s);a<s;)u[a]=t(l,l=n[++a]);return function(c){var d=Math.max(0,Math.min(s-1,Math.floor(c*=s)));return u[d](c-d)}}function ry(t,n){for(var a=new Array(n),s=0;s<n;++s)a[s]=t(s/(n-1));return a}var Xe=0,yr=0,cr=0,o0=1e3,eo,_r,ro=0,fe$1=0,Zo=0,Lr=typeof performance=="object"&&performance.now?performance:Date,a0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ni(){return fe$1||(a0(iy),fe$1=Lr.now()+Zo)}function iy(){fe$1=0}function Br(){this._call=this._time=this._next=null}Br.prototype=Qo.prototype={constructor:Br,restart:function(t,n,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?ni():+a)+(n==null?0:+n),!this._next&&_r!==this&&(_r?_r._next=this:eo=this,_r=this),this._call=t,this._time=a,wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,wu())}};function Qo(t,n,a){var s=new Br;return s.restart(t,n,a),s}function u0(){ni(),++Xe;for(var t=eo,n;t;)(n=fe$1-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Xe}function Wf(){fe$1=(ro=Lr.now())+Zo,Xe=yr=0;try{u0()}finally{Xe=0,ay(),fe$1=0}}function oy(){var t=Lr.now(),n=t-ro;n>o0&&(Zo-=n,ro=t)}function ay(){for(var t,n=eo,a,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(a=n._next,n._next=null,n=t?t._next=a:eo=a);_r=t,wu(s)}function wu(t){if(!Xe){yr&&(yr=clearTimeout(yr));var n=t-fe$1;n>24?(t<1/0&&(yr=setTimeout(Wf,t-Lr.now()-Zo)),cr&&(cr=clearInterval(cr))):(cr||(ro=Lr.now(),cr=setInterval(oy,o0)),Xe=1,a0(Wf))}}function xu(t,n,a){var s=new Br;return n=n==null?0:+n,s.restart(l=>{s.stop(),t(l+n)},n,a),s}function uy(t,n,a){var s=new Br,l=n;return n==null?(s.restart(t,n,a),s):(s._restart=s.restart,s.restart=function(u,c,d){c=+c,d=d==null?ni():+d,s._restart(function Ct(ar){ar+=l,s._restart(Ct,l+=c,d),u(ar)},c,d)},s.restart(t,n,a),s)}var cy=pe$1("start","end","cancel","interrupt"),fy=[],c0=0,Mu=1,$u=2,Oi=3,Vf=4,Tu=5,Yi=6;function Ko(t,n,a,s,l,u){var c=t.__transition;if(!c)t.__transition={};else if(a in c)return;sy(t,a,{name:n,index:s,group:l,on:cy,tween:fy,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:c0})}function Ec(t,n){var a=ct(t,n);if(a.state>c0)throw new Error("too late; already scheduled");return a}function _t(t,n){var a=ct(t,n);if(a.state>Oi)throw new Error("too late; already running");return a}function ct(t,n){var a=t.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function sy(t,n,a){var s=t.__transition,l;s[n]=a,a.timer=Qo(u,0,a.time);function u(ar){a.state=Mu,a.timer.restart(c,a.delay,a.time),a.delay<=ar&&c(ar-a.delay)}function c(ar){var en,tn,on,fn;if(a.state!==Mu)return Ct();for(en in s)if(fn=s[en],fn.name===a.name){if(fn.state===Oi)return xu(c);fn.state===Vf?(fn.state=Yi,fn.timer.stop(),fn.on.call("interrupt",t,t.__data__,fn.index,fn.group),delete s[en]):+en<n&&(fn.state=Yi,fn.timer.stop(),fn.on.call("cancel",t,t.__data__,fn.index,fn.group),delete s[en])}if(xu(function(){a.state===Oi&&(a.state=Vf,a.timer.restart(d,a.delay,a.time),d(ar))}),a.state=$u,a.on.call("start",t,t.__data__,a.index,a.group),a.state===$u){for(a.state=Oi,l=new Array(on=a.tween.length),en=0,tn=-1;en<on;++en)(fn=a.tween[en].value.call(t,t.__data__,a.index,a.group))&&(l[++tn]=fn);l.length=tn+1}}function d(ar){for(var en=ar<a.duration?a.ease.call(null,ar/a.duration):(a.timer.restart(Ct),a.state=Tu,1),tn=-1,on=l.length;++tn<on;)l[tn].call(t,en);a.state===Tu&&(a.on.call("end",t,t.__data__,a.index,a.group),Ct())}function Ct(){a.state=Yi,a.timer.stop(),delete s[n];for(var ar in s)return;delete t.__transition}}function re$1(t,n){var a=t.__transition,s,l,u=!0,c;if(a){n=n==null?null:n+"";for(c in a){if((s=a[c]).name!==n){u=!1;continue}l=s.state>$u&&s.state<Tu,s.state=Yi,s.timer.stop(),s.on.call(l?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[c]}u&&delete t.__transition}}function ly(t){return this.each(function(){re$1(this,t)})}function hy(t,n){var a,s;return function(){var l=_t(this,t),u=l.tween;if(u!==a){s=a=u;for(var c=0,d=s.length;c<d;++c)if(s[c].name===n){s=s.slice(),s.splice(c,1);break}}l.tween=s}}function dy(t,n,a){var s,l;if(typeof a!="function")throw new Error;return function(){var u=_t(this,t),c=u.tween;if(c!==s){l=(s=c).slice();for(var d={name:n,value:a},Ct=0,ar=l.length;Ct<ar;++Ct)if(l[Ct].name===n){l[Ct]=d;break}Ct===ar&&l.push(d)}u.tween=l}}function gy(t,n){var a=this._id;if(t+="",arguments.length<2){for(var s=ct(this.node(),a).tween,l=0,u=s.length,c;l<u;++l)if((c=s[l]).name===t)return c.value;return null}return this.each((n==null?hy:dy)(a,t,n))}function kc(t,n,a){var s=t._id;return t.each(function(){var l=_t(this,s);(l.value||(l.value={}))[n]=a.apply(this,arguments)}),function(l){return ct(l,s).value[n]}}function f0(t,n){var a;return(typeof n=="number"?Kn:n instanceof qt?qr:(a=qt(n))?(n=a,qr):Ac)(t,n)}function py(t){return function(){this.removeAttribute(t)}}function my(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yy(t,n,a){var s,l=a+"",u;return function(){var c=this.getAttribute(t);return c===l?null:c===s?u:u=n(s=c,a)}}function _y(t,n,a){var s,l=a+"",u;return function(){var c=this.getAttributeNS(t.space,t.local);return c===l?null:c===s?u:u=n(s=c,a)}}function vy(t,n,a){var s,l,u;return function(){var c,d=a(this),Ct;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),Ct=d+"",c===Ct?null:c===s&&Ct===l?u:(l=Ct,u=n(s=c,d)))}}function by(t,n,a){var s,l,u;return function(){var c,d=a(this),Ct;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),Ct=d+"",c===Ct?null:c===s&&Ct===l?u:(l=Ct,u=n(s=c,d)))}}function wy(t,n){var a=Kr(t),s=a==="transform"?Jh:f0;return this.attrTween(t,typeof n=="function"?(a.local?by:vy)(a,s,kc(this,"attr."+t,n)):n==null?(a.local?my:py)(a):(a.local?_y:yy)(a,s,n))}function xy(t,n){return function(a){this.setAttribute(t,n.call(this,a))}}function My(t,n){return function(a){this.setAttributeNS(t.space,t.local,n.call(this,a))}}function $y(t,n){var a,s;function l(){var u=n.apply(this,arguments);return u!==s&&(a=(s=u)&&My(t,u)),a}return l._value=n,l}function Ty(t,n){var a,s;function l(){var u=n.apply(this,arguments);return u!==s&&(a=(s=u)&&xy(t,u)),a}return l._value=n,l}function Ay(t,n){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var s=Kr(t);return this.tween(a,(s.local?$y:Ty)(s,n))}function Ey(t,n){return function(){Ec(this,t).delay=+n.apply(this,arguments)}}function ky(t,n){return n=+n,function(){Ec(this,t).delay=n}}function Sy(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ey:ky)(n,t)):ct(this.node(),n).delay}function Ny(t,n){return function(){_t(this,t).duration=+n.apply(this,arguments)}}function Iy(t,n){return n=+n,function(){_t(this,t).duration=n}}function Ry(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ny:Iy)(n,t)):ct(this.node(),n).duration}function Cy(t,n){if(typeof n!="function")throw new Error;return function(){_t(this,t).ease=n}}function Py(t){var n=this._id;return arguments.length?this.each(Cy(n,t)):ct(this.node(),n).ease}function Dy(t,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;_t(this,t).ease=a}}function zy(t){if(typeof t!="function")throw new Error;return this.each(Dy(this._id,t))}function Oy(t){typeof t!="function"&&(t=_c$1(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,d=s[l]=[],Ct,ar=0;ar<c;++ar)(Ct=u[ar])&&t.call(Ct,Ct.__data__,ar,u)&&d.push(Ct);return new gt(s,this._parents,this._name,this._id)}function Yy(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,a=t._groups,s=n.length,l=a.length,u=Math.min(s,l),c=new Array(s),d=0;d<u;++d)for(var Ct=n[d],ar=a[d],en=Ct.length,tn=c[d]=new Array(en),on,fn=0;fn<en;++fn)(on=Ct[fn]||ar[fn])&&(tn[fn]=on);for(;d<s;++d)c[d]=n[d];return new gt(c,this._parents,this._name,this._id)}function Fy(t){return(t+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function qy(t,n,a){var s,l,u=Fy(n)?Ec:_t;return function(){var c=u(this,t),d=c.on;d!==s&&(l=(s=d).copy()).on(n,a),c.on=l}}function Ly(t,n){var a=this._id;return arguments.length<2?ct(this.node(),a).on.on(t):this.each(qy(a,t,n))}function By(t){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==t)return;n&&n.removeChild(this)}}function Uy(){return this.on("end.remove",By(this._id))}function Xy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=Bo(t));for(var s=this._groups,l=s.length,u=new Array(l),c=0;c<l;++c)for(var d=s[c],Ct=d.length,ar=u[c]=new Array(Ct),en,tn,on=0;on<Ct;++on)(en=d[on])&&(tn=t.call(en,en.__data__,on,d))&&("__data__"in en&&(tn.__data__=en.__data__),ar[on]=tn,Ko(ar[on],n,a,on,ar,ct(en,a)));return new gt(u,this._parents,n,a)}function Hy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=yc(t));for(var s=this._groups,l=s.length,u=[],c=[],d=0;d<l;++d)for(var Ct=s[d],ar=Ct.length,en,tn=0;tn<ar;++tn)if(en=Ct[tn]){for(var on=t.call(en,en.__data__,tn,Ct),fn,dn=ct(en,a),Cn=0,Rn=on.length;Cn<Rn;++Cn)(fn=on[Cn])&&Ko(fn,n,a,Cn,on,dn);u.push(on),c.push(en)}return new gt(u,c,n,a)}var jy=me$1.prototype.constructor;function Wy(){return new jy(this._groups,this._parents)}function Vy(t,n){var a,s,l;return function(){var u=ue$1(this,t),c=(this.style.removeProperty(t),ue$1(this,t));return u===c?null:u===a&&c===s?l:l=n(a=u,s=c)}}function s0(t){return function(){this.style.removeProperty(t)}}function Gy(t,n,a){var s,l=a+"",u;return function(){var c=ue$1(this,t);return c===l?null:c===s?u:u=n(s=c,a)}}function Zy(t,n,a){var s,l,u;return function(){var c=ue$1(this,t),d=a(this),Ct=d+"";return d==null&&(Ct=d=(this.style.removeProperty(t),ue$1(this,t))),c===Ct?null:c===s&&Ct===l?u:(l=Ct,u=n(s=c,d))}}function Qy(t,n){var a,s,l,u="style."+n,c="end."+u,d;return function(){var Ct=_t(this,t),ar=Ct.on,en=Ct.value[u]==null?d||(d=s0(n)):void 0;(ar!==a||l!==en)&&(s=(a=ar).copy()).on(c,l=en),Ct.on=s}}function Ky(t,n,a){var s=(t+="")=="transform"?Kh:f0;return n==null?this.styleTween(t,Vy(t,s)).on("end.style."+t,s0(t)):typeof n=="function"?this.styleTween(t,Zy(t,s,kc(this,"style."+t,n))).each(Qy(this._id,t)):this.styleTween(t,Gy(t,s,n),a).on("end.style."+t,null)}function Jy(t,n,a){return function(s){this.style.setProperty(t,n.call(this,s),a)}}function n_(t,n,a){var s,l;function u(){var c=n.apply(this,arguments);return c!==l&&(s=(l=c)&&Jy(t,c,a)),s}return u._value=n,u}function t_(t,n,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,n_(t,n,a??""))}function e_(t){return function(){this.textContent=t}}function r_(t){return function(){var n=t(this);this.textContent=n??""}}function i_(t){return this.tween("text",typeof t=="function"?r_(kc(this,"text",t)):e_(t==null?"":t+""))}function o_(t){return function(n){this.textContent=t.call(this,n)}}function a_(t){var n,a;function s(){var l=t.apply(this,arguments);return l!==a&&(n=(a=l)&&o_(l)),n}return s._value=t,s}function u_(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,a_(t))}function c_(){for(var t=this._name,n=this._id,a=h0(),s=this._groups,l=s.length,u=0;u<l;++u)for(var c=s[u],d=c.length,Ct,ar=0;ar<d;++ar)if(Ct=c[ar]){var en=ct(Ct,n);Ko(Ct,t,a,ar,c,{time:en.time+en.delay+en.duration,delay:0,duration:en.duration,ease:en.ease})}return new gt(s,this._parents,t,a)}function f_(){var t,n,a=this,s=a._id,l=a.size();return new Promise(function(u,c){var d={value:c},Ct={value:function(){--l===0&&u()}};a.each(function(){var ar=_t(this,s),en=ar.on;en!==t&&(n=(t=en).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(Ct)),ar.on=n}),l===0&&u()})}var s_=0;function gt(t,n,a,s){this._groups=t,this._parents=n,this._name=a,this._id=s}function l0(t){return me$1().transition(t)}function h0(){return++s_}var bt=me$1.prototype;gt.prototype=l0.prototype={constructor:gt,select:Xy,selectAll:Hy,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Oy,merge:Yy,selection:Wy,transition:c_,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Ly,attr:wy,attrTween:Ay,style:Ky,styleTween:t_,text:i_,textTween:u_,remove:Uy,tween:gy,delay:Sy,duration:Ry,ease:Py,easeVarying:zy,end:f_,[Symbol.iterator]:bt[Symbol.iterator]};const l_=t=>+t;function h_(t){return t*t}function d_(t){return t*(2-t)}function Gf(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function g_(t){return t*t*t}function p_(t){return--t*t*t+1}function Au(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Sc=3,m_=(function t(n){n=+n;function a(s){return Math.pow(s,n)}return a.exponent=t,a})(Sc),y_=(function t(n){n=+n;function a(s){return 1-Math.pow(1-s,n)}return a.exponent=t,a})(Sc),Zf=(function t(n){n=+n;function a(s){return((s*=2)<=1?Math.pow(s,n):2-Math.pow(2-s,n))/2}return a.exponent=t,a})(Sc),d0=Math.PI,g0=d0/2;function __(t){return+t==1?1:1-Math.cos(t*g0)}function v_(t){return Math.sin(t*g0)}function Qf(t){return(1-Math.cos(d0*t))/2}function Lt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function b_(t){return Lt(1-+t)}function w_(t){return 1-Lt(t)}function Kf(t){return((t*=2)<=1?Lt(1-t):2-Lt(t-1))/2}function x_(t){return 1-Math.sqrt(1-t*t)}function M_(t){return Math.sqrt(1- --t*t)}function Jf(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Eu=4/11,$_=6/11,T_=8/11,A_=3/4,E_=9/11,k_=10/11,S_=15/16,N_=21/22,I_=63/64,mi=1/Eu/Eu;function R_(t){return 1-Ur(1-t)}function Ur(t){return(t=+t)<Eu?mi*t*t:t<T_?mi*(t-=$_)*t+A_:t<k_?mi*(t-=E_)*t+S_:mi*(t-=N_)*t+I_}function C_(t){return((t*=2)<=1?1-Ur(1-t):Ur(t-1)+1)/2}var Nc=1.70158,P_=(function t(n){n=+n;function a(s){return(s=+s)*s*(n*(s-1)+s)}return a.overshoot=t,a})(Nc),D_=(function t(n){n=+n;function a(s){return--s*s*((s+1)*n+s)+1}return a.overshoot=t,a})(Nc),ns=(function t(n){n=+n;function a(s){return((s*=2)<1?s*s*((n+1)*s-n):(s-=2)*s*((n+1)*s+n)+2)/2}return a.overshoot=t,a})(Nc),He=2*Math.PI,Ic=1,Rc=.3,z_=(function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return n*Lt(- --u)*Math.sin((s-u)/a)}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l})(Ic,Rc),ts=(function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return 1-n*Lt(u=+u)*Math.sin((u+s)/a)}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l})(Ic,Rc),O_=(function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return((u=u*2-1)<0?n*Lt(-u)*Math.sin((s-u)/a):2-n*Lt(u)*Math.sin((s+u)/a))/2}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l})(Ic,Rc),Y_={time:null,delay:0,duration:250,ease:Au};function F_(t,n){for(var a;!(a=t.__transition)||!(a=a[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return a}function q_(t){var n,a;t instanceof gt?(n=t._id,t=t._name):(n=h0(),(a=Y_).time=ni(),t=t==null?null:t+"");for(var s=this._groups,l=s.length,u=0;u<l;++u)for(var c=s[u],d=c.length,Ct,ar=0;ar<d;++ar)(Ct=c[ar])&&Ko(Ct,t,n,ar,c,a||F_(Ct,n));return new gt(s,this._parents,t,n)}me$1.prototype.interrupt=ly;me$1.prototype.transition=q_;var L_=[null];function B_(t,n){var a=t.__transition,s,l;if(a){n=n==null?null:n+"";for(l in a)if((s=a[l]).state>Mu&&s.name===n)return new gt([[t]],L_,n,+l)}return null}const Pa=t=>()=>t;function U_(t,{sourceEvent:n,target:a,selection:s,mode:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:s,enumerable:!0,configurable:!0},mode:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function X_(t){t.stopImmediatePropagation()}function Da(t){t.preventDefault(),t.stopImmediatePropagation()}var es={name:"drag"},za={name:"space"},Me={name:"handle"},$e={name:"center"};const{abs:rs,max:En,min:kn}=Math;function is(t){return[+t[0],+t[1]]}function ku(t){return[is(t[0]),is(t[1])]}var Fi={name:"x",handles:["w","e"].map(Xr),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},qi={name:"y",handles:["n","s"].map(Xr),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},H_={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Xr),input:function(t){return t==null?null:ku(t)},output:function(t){return t}},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},os={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},as={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},j_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},W_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Xr(t){return{type:t}}function V_(t){return!t.ctrlKey&&!t.button}function G_(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Z_(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Q_(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function K_(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function J_(){return Cc(Fi)}function nv(){return Cc(qi)}function tv(){return Cc(H_)}function Cc(t){var n=G_,a=V_,s=Z_,l=!0,u=pe$1("start","brush","end"),c=6,d;function Ct(Rn){var ax=Rn.property("__brush",Cn).selectAll(".overlay").data([Xr("overlay")]);ax.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(ax).each(function(){var sx=Oa(this).extent;X$1(this).attr("x",sx[0][0]).attr("y",sx[0][1]).attr("width",sx[1][0]-sx[0][0]).attr("height",sx[1][1]-sx[0][1])}),Rn.selectAll(".selection").data([Xr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ox=Rn.selectAll(".handle").data(t.handles,function(sx){return sx.type});ox.exit().remove(),ox.enter().append("rect").attr("class",function(sx){return"handle handle--"+sx.type}).attr("cursor",function(sx){return wt[sx.type]}),Rn.each(ar).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",on).filter(s).on("touchstart.brush",on).on("touchmove.brush",fn).on("touchend.brush touchcancel.brush",dn).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Ct.move=function(Rn,ax,ox){Rn.tween?Rn.on("start.brush",function(sx){en(this,arguments).beforestart().start(sx)}).on("interrupt.brush end.brush",function(sx){en(this,arguments).end(sx)}).tween("brush",function(){var sx=this,lx=sx.__brush,cx=en(sx,arguments),fx=lx.selection,gx=t.input(typeof ax=="function"?ax.apply(this,arguments):ax,lx.extent),mx=Ht(fx,gx);function px(hx){lx.selection=hx===1&&gx===null?null:mx(hx),ar.call(sx),cx.brush()}return fx!==null&&gx!==null?px:px(1)}):Rn.each(function(){var sx=this,lx=arguments,cx=sx.__brush,fx=t.input(typeof ax=="function"?ax.apply(sx,lx):ax,cx.extent),gx=en(sx,lx).beforestart();re$1(sx),cx.selection=fx===null?null:fx,ar.call(sx),gx.start(ox).brush(ox).end(ox)})},Ct.clear=function(Rn,ax){Ct.move(Rn,null,ax)};function ar(){var Rn=X$1(this),ax=Oa(this).selection;ax?(Rn.selectAll(".selection").style("display",null).attr("x",ax[0][0]).attr("y",ax[0][1]).attr("width",ax[1][0]-ax[0][0]).attr("height",ax[1][1]-ax[0][1]),Rn.selectAll(".handle").style("display",null).attr("x",function(ox){return ox.type[ox.type.length-1]==="e"?ax[1][0]-c/2:ax[0][0]-c/2}).attr("y",function(ox){return ox.type[0]==="s"?ax[1][1]-c/2:ax[0][1]-c/2}).attr("width",function(ox){return ox.type==="n"||ox.type==="s"?ax[1][0]-ax[0][0]+c:c}).attr("height",function(ox){return ox.type==="e"||ox.type==="w"?ax[1][1]-ax[0][1]+c:c})):Rn.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function en(Rn,ax,ox){var sx=Rn.__brush.emitter;return sx&&(!ox||!sx.clean)?sx:new tn(Rn,ax,ox)}function tn(Rn,ax,ox){this.that=Rn,this.args=ax,this.state=Rn.__brush,this.active=0,this.clean=ox}tn.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(Rn,ax){return this.starting?(this.starting=!1,this.emit("start",Rn,ax)):this.emit("brush",Rn),this},brush:function(Rn,ax){return this.emit("brush",Rn,ax),this},end:function(Rn,ax){return--this.active===0&&(delete this.state.emitter,this.emit("end",Rn,ax)),this},emit:function(Rn,ax,ox){var sx=X$1(this.that).datum();u.call(Rn,this.that,new U_(Rn,{sourceEvent:ax,target:Ct,selection:t.output(this.state.selection),mode:ox,dispatch:u}),sx)}};function on(Rn){if(d&&!Rn.touches||!a.apply(this,arguments))return;var ax=this,ox=Rn.target.__data__.type,sx=(l&&Rn.metaKey?ox="overlay":ox)==="selection"?es:l&&Rn.altKey?$e:Me,lx=t===qi?null:j_[ox],cx=t===Fi?null:W_[ox],fx=Oa(ax),gx=fx.extent,mx=fx.selection,px=gx[0][0],hx,vx,yx=gx[0][1],Sx,_x,Ex=gx[1][0],bx,Ax,Mx=gx[1][1],Rx,Cx,Lx=0,qx=0,Ix,Px=lx&&cx&&l&&Rn.shiftKey,Nx,Bx,$x=Array.from(Rn.touches||[Rn],aE=>{const Kx=aE.identifier;return aE=wn(aE,ax),aE.point0=aE.slice(),aE.identifier=Kx,aE});re$1(ax);var Vx=en(ax,arguments,!0).beforestart();if(ox==="overlay"){mx&&(Ix=!0);const aE=[$x[0],$x[1]||$x[0]];fx.selection=mx=[[hx=t===qi?px:kn(aE[0][0],aE[1][0]),Sx=t===Fi?yx:kn(aE[0][1],aE[1][1])],[bx=t===qi?Ex:En(aE[0][0],aE[1][0]),Rx=t===Fi?Mx:En(aE[0][1],aE[1][1])]],$x.length>1&&iE(Rn)}else hx=mx[0][0],Sx=mx[0][1],bx=mx[1][0],Rx=mx[1][1];vx=hx,_x=Sx,Ax=bx,Cx=Rx;var Gx=X$1(ax).attr("pointer-events","none"),Zx=Gx.selectAll(".overlay").attr("cursor",wt[ox]);if(Rn.touches)Vx.moved=Hx,Vx.ended=Xx;else{var jx=X$1(Rn.view).on("mousemove.brush",Hx,!0).on("mouseup.brush",Xx,!0);l&&jx.on("keydown.brush",rE,!0).on("keyup.brush",uE,!0),Uo(Rn.view)}ar.call(ax),Vx.start(Rn,sx.name);function Hx(aE){for(const Kx of aE.changedTouches||[aE])for(const ME of $x)ME.identifier===Kx.identifier&&(ME.cur=wn(Kx,ax));if(Px&&!Nx&&!Bx&&$x.length===1){const Kx=$x[0];rs(Kx.cur[0]-Kx[0])>rs(Kx.cur[1]-Kx[1])?Bx=!0:Nx=!0}for(const Kx of $x)Kx.cur&&(Kx[0]=Kx.cur[0],Kx[1]=Kx.cur[1]);Ix=!0,Da(aE),iE(aE)}function iE(aE){const Kx=$x[0],ME=Kx.point0;var IE;switch(Lx=Kx[0]-ME[0],qx=Kx[1]-ME[1],sx){case za:case es:{lx&&(Lx=En(px-hx,kn(Ex-bx,Lx)),vx=hx+Lx,Ax=bx+Lx),cx&&(qx=En(yx-Sx,kn(Mx-Rx,qx)),_x=Sx+qx,Cx=Rx+qx);break}case Me:{$x[1]?(lx&&(vx=En(px,kn(Ex,$x[0][0])),Ax=En(px,kn(Ex,$x[1][0])),lx=1),cx&&(_x=En(yx,kn(Mx,$x[0][1])),Cx=En(yx,kn(Mx,$x[1][1])),cx=1)):(lx<0?(Lx=En(px-hx,kn(Ex-hx,Lx)),vx=hx+Lx,Ax=bx):lx>0&&(Lx=En(px-bx,kn(Ex-bx,Lx)),vx=hx,Ax=bx+Lx),cx<0?(qx=En(yx-Sx,kn(Mx-Sx,qx)),_x=Sx+qx,Cx=Rx):cx>0&&(qx=En(yx-Rx,kn(Mx-Rx,qx)),_x=Sx,Cx=Rx+qx));break}case $e:{lx&&(vx=En(px,kn(Ex,hx-Lx*lx)),Ax=En(px,kn(Ex,bx+Lx*lx))),cx&&(_x=En(yx,kn(Mx,Sx-qx*cx)),Cx=En(yx,kn(Mx,Rx+qx*cx)));break}}Ax<vx&&(lx*=-1,IE=hx,hx=bx,bx=IE,IE=vx,vx=Ax,Ax=IE,ox in os&&Zx.attr("cursor",wt[ox=os[ox]])),Cx<_x&&(cx*=-1,IE=Sx,Sx=Rx,Rx=IE,IE=_x,_x=Cx,Cx=IE,ox in as&&Zx.attr("cursor",wt[ox=as[ox]])),fx.selection&&(mx=fx.selection),Nx&&(vx=mx[0][0],Ax=mx[1][0]),Bx&&(_x=mx[0][1],Cx=mx[1][1]),(mx[0][0]!==vx||mx[0][1]!==_x||mx[1][0]!==Ax||mx[1][1]!==Cx)&&(fx.selection=[[vx,_x],[Ax,Cx]],ar.call(ax),Vx.brush(aE,sx.name))}function Xx(aE){if(X_(aE),aE.touches){if(aE.touches.length)return;d&&clearTimeout(d),d=setTimeout(function(){d=null},500)}else Xo(aE.view,Ix),jx.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Gx.attr("pointer-events","all"),Zx.attr("cursor",wt.overlay),fx.selection&&(mx=fx.selection),Q_(mx)&&(fx.selection=null,ar.call(ax)),Vx.end(aE,sx.name)}function rE(aE){switch(aE.keyCode){case 16:{Px=lx&&cx;break}case 18:{sx===Me&&(lx&&(bx=Ax-Lx*lx,hx=vx+Lx*lx),cx&&(Rx=Cx-qx*cx,Sx=_x+qx*cx),sx=$e,iE(aE));break}case 32:{(sx===Me||sx===$e)&&(lx<0?bx=Ax-Lx:lx>0&&(hx=vx-Lx),cx<0?Rx=Cx-qx:cx>0&&(Sx=_x-qx),sx=za,Zx.attr("cursor",wt.selection),iE(aE));break}default:return}Da(aE)}function uE(aE){switch(aE.keyCode){case 16:{Px&&(Nx=Bx=Px=!1,iE(aE));break}case 18:{sx===$e&&(lx<0?bx=Ax:lx>0&&(hx=vx),cx<0?Rx=Cx:cx>0&&(Sx=_x),sx=Me,iE(aE));break}case 32:{sx===za&&(aE.altKey?(lx&&(bx=Ax-Lx*lx,hx=vx+Lx*lx),cx&&(Rx=Cx-qx*cx,Sx=_x+qx*cx),sx=$e):(lx<0?bx=Ax:lx>0&&(hx=vx),cx<0?Rx=Cx:cx>0&&(Sx=_x),sx=Me),Zx.attr("cursor",wt[ox]),iE(aE));break}default:return}Da(aE)}}function fn(Rn){en(this,arguments).moved(Rn)}function dn(Rn){en(this,arguments).ended(Rn)}function Cn(){var Rn=this.__brush||{selection:null};return Rn.extent=ku(n.apply(this,arguments)),Rn.dim=t,Rn}return Ct.extent=function(Rn){return arguments.length?(n=typeof Rn=="function"?Rn:Pa(ku(Rn)),Ct):n},Ct.filter=function(Rn){return arguments.length?(a=typeof Rn=="function"?Rn:Pa(!!Rn),Ct):a},Ct.touchable=function(Rn){return arguments.length?(s=typeof Rn=="function"?Rn:Pa(!!Rn),Ct):s},Ct.handleSize=function(Rn){return arguments.length?(c=+Rn,Ct):c},Ct.keyModifiers=function(Rn){return arguments.length?(l=!!Rn,Ct):l},Ct.on=function(){var Rn=u.on.apply(u,arguments);return Rn===u?Ct:Rn},Ct}var us=Math.abs,Te=Math.cos,Ae=Math.sin,p0=Math.PI,yi=p0/2,cs=p0*2,fs$1=Math.max,Ya=1e-12;function Fa(t,n){return Array.from({length:n-t},(a,s)=>t+s)}function ev(t){return function(n,a){return t(n.source.value+n.target.value,a.source.value+a.target.value)}}function rv(){return Pc(!1,!1)}function iv(){return Pc(!1,!0)}function ov(){return Pc(!0,!1)}function Pc(t,n){var a=0,s=null,l=null,u=null;function c(d){var Ct=d.length,ar=new Array(Ct),en=Fa(0,Ct),tn=new Array(Ct*Ct),on=new Array(Ct),fn=0,dn;d=Float64Array.from({length:Ct*Ct},n?(Cn,Rn)=>d[Rn%Ct][Rn/Ct|0]:(Cn,Rn)=>d[Rn/Ct|0][Rn%Ct]);for(let Cn=0;Cn<Ct;++Cn){let Rn=0;for(let ax=0;ax<Ct;++ax)Rn+=d[Cn*Ct+ax]+t*d[ax*Ct+Cn];fn+=ar[Cn]=Rn}fn=fs$1(0,cs-a*Ct)/fn,dn=fn?a:cs/Ct;{let Cn=0;s&&en.sort((Rn,ax)=>s(ar[Rn],ar[ax]));for(const Rn of en){const ax=Cn;if(t){const ox=Fa(~Ct+1,Ct).filter(sx=>sx<0?d[~sx*Ct+Rn]:d[Rn*Ct+sx]);l&&ox.sort((sx,lx)=>l(sx<0?-d[~sx*Ct+Rn]:d[Rn*Ct+sx],lx<0?-d[~lx*Ct+Rn]:d[Rn*Ct+lx]));for(const sx of ox)if(sx<0){const lx=tn[~sx*Ct+Rn]||(tn[~sx*Ct+Rn]={source:null,target:null});lx.target={index:Rn,startAngle:Cn,endAngle:Cn+=d[~sx*Ct+Rn]*fn,value:d[~sx*Ct+Rn]}}else{const lx=tn[Rn*Ct+sx]||(tn[Rn*Ct+sx]={source:null,target:null});lx.source={index:Rn,startAngle:Cn,endAngle:Cn+=d[Rn*Ct+sx]*fn,value:d[Rn*Ct+sx]}}on[Rn]={index:Rn,startAngle:ax,endAngle:Cn,value:ar[Rn]}}else{const ox=Fa(0,Ct).filter(sx=>d[Rn*Ct+sx]||d[sx*Ct+Rn]);l&&ox.sort((sx,lx)=>l(d[Rn*Ct+sx],d[Rn*Ct+lx]));for(const sx of ox){let lx;if(Rn<sx?(lx=tn[Rn*Ct+sx]||(tn[Rn*Ct+sx]={source:null,target:null}),lx.source={index:Rn,startAngle:Cn,endAngle:Cn+=d[Rn*Ct+sx]*fn,value:d[Rn*Ct+sx]}):(lx=tn[sx*Ct+Rn]||(tn[sx*Ct+Rn]={source:null,target:null}),lx.target={index:Rn,startAngle:Cn,endAngle:Cn+=d[Rn*Ct+sx]*fn,value:d[Rn*Ct+sx]},Rn===sx&&(lx.source=lx.target)),lx.source&&lx.target&&lx.source.value<lx.target.value){const cx=lx.source;lx.source=lx.target,lx.target=cx}}on[Rn]={index:Rn,startAngle:ax,endAngle:Cn,value:ar[Rn]}}Cn+=dn}}return tn=Object.values(tn),tn.groups=on,u?tn.sort(u):tn}return c.padAngle=function(d){return arguments.length?(a=fs$1(0,d),c):a},c.sortGroups=function(d){return arguments.length?(s=d,c):s},c.sortSubgroups=function(d){return arguments.length?(l=d,c):l},c.sortChords=function(d){return arguments.length?(d==null?u=null:(u=ev(d))._=d,c):u&&u._},c}const Su=Math.PI,Nu=2*Su,Zt=1e-6,av=Nu-Zt;function m0(t){this._+=t[0];for(let n=1,a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function uv(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return m0;const a=10**n;return function(s){this._+=s[0];for(let l=1,u=s.length;l<u;++l)this._+=Math.round(arguments[l]*a)/a+s[l]}}let ti=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m0:uv(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,l,u){this._append`C${+t},${+n},${+a},${+s},${this._x1=+l},${this._y1=+u}`}arcTo(t,n,a,s,l){if(t=+t,n=+n,a=+a,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,c=this._y1,d=a-t,Ct=s-n,ar=u-t,en=c-n,tn=ar*ar+en*en;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(tn>Zt)if(!(Math.abs(en*d-Ct*ar)>Zt)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let on=a-u,fn=s-c,dn=d*d+Ct*Ct,Cn=on*on+fn*fn,Rn=Math.sqrt(dn),ax=Math.sqrt(tn),ox=l*Math.tan((Su-Math.acos((dn+tn-Cn)/(2*Rn*ax)))/2),sx=ox/ax,lx=ox/Rn;Math.abs(sx-1)>Zt&&this._append`L${t+sx*ar},${n+sx*en}`,this._append`A${l},${l},0,0,${+(en*on>ar*fn)},${this._x1=t+lx*d},${this._y1=n+lx*Ct}`}}arc(t,n,a,s,l,u){if(t=+t,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(s),d=a*Math.sin(s),Ct=t+c,ar=n+d,en=1^u,tn=u?s-l:l-s;this._x1===null?this._append`M${Ct},${ar}`:(Math.abs(this._x1-Ct)>Zt||Math.abs(this._y1-ar)>Zt)&&this._append`L${Ct},${ar}`,a&&(tn<0&&(tn=tn%Nu+Nu),tn>av?this._append`A${a},${a},0,1,${en},${t-c},${n-d}A${a},${a},0,1,${en},${this._x1=Ct},${this._y1=ar}`:tn>Zt&&this._append`A${a},${a},0,${+(tn>=Su)},${en},${this._x1=t+a*Math.cos(l)},${this._y1=n+a*Math.sin(l)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}};function Jo(){return new ti}Jo.prototype=ti.prototype;function cv(t=3){return new ti(+t)}var fv=Array.prototype.slice;function Vt(t){return function(){return t}}function sv(t){return t.source}function lv(t){return t.target}function ss(t){return t.radius}function hv(t){return t.startAngle}function dv(t){return t.endAngle}function gv(){return 0}function pv(){return 10}function y0(t){var n=sv,a=lv,s=ss,l=ss,u=hv,c=dv,d=gv,Ct=null;function ar(){var en,tn=n.apply(this,arguments),on=a.apply(this,arguments),fn=d.apply(this,arguments)/2,dn=fv.call(arguments),Cn=+s.apply(this,(dn[0]=tn,dn)),Rn=u.apply(this,dn)-yi,ax=c.apply(this,dn)-yi,ox=+l.apply(this,(dn[0]=on,dn)),sx=u.apply(this,dn)-yi,lx=c.apply(this,dn)-yi;if(Ct||(Ct=en=Jo()),fn>Ya&&(us(ax-Rn)>fn*2+Ya?ax>Rn?(Rn+=fn,ax-=fn):(Rn-=fn,ax+=fn):Rn=ax=(Rn+ax)/2,us(lx-sx)>fn*2+Ya?lx>sx?(sx+=fn,lx-=fn):(sx-=fn,lx+=fn):sx=lx=(sx+lx)/2),Ct.moveTo(Cn*Te(Rn),Cn*Ae(Rn)),Ct.arc(0,0,Cn,Rn,ax),Rn!==sx||ax!==lx)if(t){var cx=+t.apply(this,arguments),fx=ox-cx,gx=(sx+lx)/2;Ct.quadraticCurveTo(0,0,fx*Te(sx),fx*Ae(sx)),Ct.lineTo(ox*Te(gx),ox*Ae(gx)),Ct.lineTo(fx*Te(lx),fx*Ae(lx))}else Ct.quadraticCurveTo(0,0,ox*Te(sx),ox*Ae(sx)),Ct.arc(0,0,ox,sx,lx);if(Ct.quadraticCurveTo(0,0,Cn*Te(Rn),Cn*Ae(Rn)),Ct.closePath(),en)return Ct=null,en+""||null}return t&&(ar.headRadius=function(en){return arguments.length?(t=typeof en=="function"?en:Vt(+en),ar):t}),ar.radius=function(en){return arguments.length?(s=l=typeof en=="function"?en:Vt(+en),ar):s},ar.sourceRadius=function(en){return arguments.length?(s=typeof en=="function"?en:Vt(+en),ar):s},ar.targetRadius=function(en){return arguments.length?(l=typeof en=="function"?en:Vt(+en),ar):l},ar.startAngle=function(en){return arguments.length?(u=typeof en=="function"?en:Vt(+en),ar):u},ar.endAngle=function(en){return arguments.length?(c=typeof en=="function"?en:Vt(+en),ar):c},ar.padAngle=function(en){return arguments.length?(d=typeof en=="function"?en:Vt(+en),ar):d},ar.source=function(en){return arguments.length?(n=en,ar):n},ar.target=function(en){return arguments.length?(a=en,ar):a},ar.context=function(en){return arguments.length?(Ct=en??null,ar):Ct},ar}function mv(){return y0()}function yv(){return y0(pv)}var _v=Array.prototype,_0=_v.slice;function vv(t,n){return t-n}function bv(t){for(var n=0,a=t.length,s=t[a-1][1]*t[0][0]-t[a-1][0]*t[0][1];++n<a;)s+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return s}const Pt=t=>()=>t;function wv(t,n){for(var a=-1,s=n.length,l;++a<s;)if(l=xv(t,n[a]))return l;return 0}function xv(t,n){for(var a=n[0],s=n[1],l=-1,u=0,c=t.length,d=c-1;u<c;d=u++){var Ct=t[u],ar=Ct[0],en=Ct[1],tn=t[d],on=tn[0],fn=tn[1];if(Mv(Ct,tn,n))return 0;en>s!=fn>s&&a<(on-ar)*(s-en)/(fn-en)+ar&&(l=-l)}return l}function Mv(t,n,a){var s;return $v(t,n,a)&&Tv(t[s=+(t[0]===n[0])],a[s],n[s])}function $v(t,n,a){return(n[0]-t[0])*(a[1]-t[1])===(a[0]-t[0])*(n[1]-t[1])}function Tv(t,n,a){return t<=n&&n<=a||a<=n&&n<=t}function Av(){}var xt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Iu(){var t=1,n=1,a=dc,s=Ct;function l(ar){var en=a(ar);if(Array.isArray(en))en=en.slice().sort(vv);else{const tn=kr(ar,Ev);for(en=oe$1(...hc(tn[0],tn[1],en),en);en[en.length-1]>=tn[1];)en.pop();for(;en[1]<tn[0];)en.shift()}return en.map(tn=>u(ar,tn))}function u(ar,en){const tn=en==null?NaN:+en;if(isNaN(tn))throw new Error(`invalid value: ${en}`);var on=[],fn=[];return c(ar,tn,function(dn){s(dn,ar,tn),bv(dn)>0?on.push([dn]):fn.push(dn)}),fn.forEach(function(dn){for(var Cn=0,Rn=on.length,ax;Cn<Rn;++Cn)if(wv((ax=on[Cn])[0],dn)!==-1){ax.push(dn);return}}),{type:"MultiPolygon",value:en,coordinates:on}}function c(ar,en,tn){var on=new Array,fn=new Array,dn,Cn,Rn,ax,ox,sx;for(dn=Cn=-1,ax=Gt(ar[0],en),xt[ax<<1].forEach(lx);++dn<t-1;)Rn=ax,ax=Gt(ar[dn+1],en),xt[Rn|ax<<1].forEach(lx);for(xt[ax<<0].forEach(lx);++Cn<n-1;){for(dn=-1,ax=Gt(ar[Cn*t+t],en),ox=Gt(ar[Cn*t],en),xt[ax<<1|ox<<2].forEach(lx);++dn<t-1;)Rn=ax,ax=Gt(ar[Cn*t+t+dn+1],en),sx=ox,ox=Gt(ar[Cn*t+dn+1],en),xt[Rn|ax<<1|ox<<2|sx<<3].forEach(lx);xt[ax|ox<<3].forEach(lx)}for(dn=-1,ox=ar[Cn*t]>=en,xt[ox<<2].forEach(lx);++dn<t-1;)sx=ox,ox=Gt(ar[Cn*t+dn+1],en),xt[ox<<2|sx<<3].forEach(lx);xt[ox<<3].forEach(lx);function lx(cx){var fx=[cx[0][0]+dn,cx[0][1]+Cn],gx=[cx[1][0]+dn,cx[1][1]+Cn],mx=d(fx),px=d(gx),hx,vx;(hx=fn[mx])?(vx=on[px])?(delete fn[hx.end],delete on[vx.start],hx===vx?(hx.ring.push(gx),tn(hx.ring)):on[hx.start]=fn[vx.end]={start:hx.start,end:vx.end,ring:hx.ring.concat(vx.ring)}):(delete fn[hx.end],hx.ring.push(gx),fn[hx.end=px]=hx):(hx=on[px])?(vx=fn[mx])?(delete on[hx.start],delete fn[vx.end],hx===vx?(hx.ring.push(gx),tn(hx.ring)):on[vx.start]=fn[hx.end]={start:vx.start,end:hx.end,ring:vx.ring.concat(hx.ring)}):(delete on[hx.start],hx.ring.unshift(fx),on[hx.start=mx]=hx):on[mx]=fn[px]={start:mx,end:px,ring:[fx,gx]}}}function d(ar){return ar[0]*2+ar[1]*(t+1)*4}function Ct(ar,en,tn){ar.forEach(function(on){var fn=on[0],dn=on[1],Cn=fn|0,Rn=dn|0,ax=qa(en[Rn*t+Cn]);fn>0&&fn<t&&Cn===fn&&(on[0]=ls(fn,qa(en[Rn*t+Cn-1]),ax,tn)),dn>0&&dn<n&&Rn===dn&&(on[1]=ls(dn,qa(en[(Rn-1)*t+Cn]),ax,tn))})}return l.contour=u,l.size=function(ar){if(!arguments.length)return[t,n];var en=Math.floor(ar[0]),tn=Math.floor(ar[1]);if(!(en>=0&&tn>=0))throw new Error("invalid size");return t=en,n=tn,l},l.thresholds=function(ar){return arguments.length?(a=typeof ar=="function"?ar:Array.isArray(ar)?Pt(_0.call(ar)):Pt(ar),l):a},l.smooth=function(ar){return arguments.length?(s=ar?Ct:Av,l):s===Ct},l}function Ev(t){return isFinite(t)?t:NaN}function Gt(t,n){return t==null?!1:+t>=n}function qa(t){return t==null||isNaN(t=+t)?-1/0:t}function ls(t,n,a,s){const l=s-n,u=a-n,c=isFinite(l)||isFinite(u)?l/u:Math.sign(l)/Math.sign(u);return isNaN(c)?t:t+c-.5}function kv(t){return t[0]}function Sv(t){return t[1]}function Nv(){return 1}function Iv(){var t=kv,n=Sv,a=Nv,s=960,l=500,u=20,c=2,d=u*3,Ct=s+d*2>>c,ar=l+d*2>>c,en=Pt(20);function tn(ox){var sx=new Float32Array(Ct*ar),lx=Math.pow(2,-c),cx=-1;for(const Sx of ox){var fx=(t(Sx,++cx,ox)+d)*lx,gx=(n(Sx,cx,ox)+d)*lx,mx=+a(Sx,cx,ox);if(mx&&fx>=0&&fx<Ct&&gx>=0&&gx<ar){var px=Math.floor(fx),hx=Math.floor(gx),vx=fx-px-.5,yx=gx-hx-.5;sx[px+hx*Ct]+=(1-vx)*(1-yx)*mx,sx[px+1+hx*Ct]+=vx*(1-yx)*mx,sx[px+1+(hx+1)*Ct]+=vx*yx*mx,sx[px+(hx+1)*Ct]+=(1-vx)*yx*mx}}return Zl({data:sx,width:Ct,height:ar},u*lx),sx}function on(ox){var sx=tn(ox),lx=en(sx),cx=Math.pow(2,2*c);return Array.isArray(lx)||(lx=oe$1(Number.MIN_VALUE,Dr(sx)/cx,lx)),Iu().size([Ct,ar]).thresholds(lx.map(fx=>fx*cx))(sx).map((fx,gx)=>(fx.value=+lx[gx],fn(fx)))}on.contours=function(ox){var sx=tn(ox),lx=Iu().size([Ct,ar]),cx=Math.pow(2,2*c),fx=gx=>{gx=+gx;var mx=fn(lx.contour(sx,gx*cx));return mx.value=gx,mx};return Object.defineProperty(fx,"max",{get:()=>Dr(sx)/cx}),fx};function fn(ox){return ox.coordinates.forEach(dn),ox}function dn(ox){ox.forEach(Cn)}function Cn(ox){ox.forEach(Rn)}function Rn(ox){ox[0]=ox[0]*Math.pow(2,c)-d,ox[1]=ox[1]*Math.pow(2,c)-d}function ax(){return d=u*3,Ct=s+d*2>>c,ar=l+d*2>>c,on}return on.x=function(ox){return arguments.length?(t=typeof ox=="function"?ox:Pt(+ox),on):t},on.y=function(ox){return arguments.length?(n=typeof ox=="function"?ox:Pt(+ox),on):n},on.weight=function(ox){return arguments.length?(a=typeof ox=="function"?ox:Pt(+ox),on):a},on.size=function(ox){if(!arguments.length)return[s,l];var sx=+ox[0],lx=+ox[1];if(!(sx>=0&&lx>=0))throw new Error("invalid size");return s=sx,l=lx,ax()},on.cellSize=function(ox){if(!arguments.length)return 1<<c;if(!((ox=+ox)>=1))throw new Error("invalid cell size");return c=Math.floor(Math.log(ox)/Math.LN2),ax()},on.thresholds=function(ox){return arguments.length?(en=typeof ox=="function"?ox:Array.isArray(ox)?Pt(_0.call(ox)):Pt(ox),on):en},on.bandwidth=function(ox){if(!arguments.length)return Math.sqrt(u*(u+1));if(!((ox=+ox)>=0))throw new Error("invalid bandwidth");return u=(Math.sqrt(4*ox*ox+1)-1)/2,ax()},on}const St=11102230246251565e-32,Sn=134217729,Rv=(3+8*St)*St;function La(t,n,a,s,l){let u,c,d,Ct,ar=n[0],en=s[0],tn=0,on=0;en>ar==en>-ar?(u=ar,ar=n[++tn]):(u=en,en=s[++on]);let fn=0;if(tn<t&&on<a)for(en>ar==en>-ar?(c=ar+u,d=u-(c-ar),ar=n[++tn]):(c=en+u,d=u-(c-en),en=s[++on]),u=c,d!==0&&(l[fn++]=d);tn<t&&on<a;)en>ar==en>-ar?(c=u+ar,Ct=c-u,d=u-(c-Ct)+(ar-Ct),ar=n[++tn]):(c=u+en,Ct=c-u,d=u-(c-Ct)+(en-Ct),en=s[++on]),u=c,d!==0&&(l[fn++]=d);for(;tn<t;)c=u+ar,Ct=c-u,d=u-(c-Ct)+(ar-Ct),ar=n[++tn],u=c,d!==0&&(l[fn++]=d);for(;on<a;)c=u+en,Ct=c-u,d=u-(c-Ct)+(en-Ct),en=s[++on],u=c,d!==0&&(l[fn++]=d);return(u!==0||fn===0)&&(l[fn++]=u),fn}function Cv(t,n){let a=n[0];for(let s=1;s<t;s++)a+=n[s];return a}function ei(t){return new Float64Array(t)}const Pv=(3+16*St)*St,Dv=(2+12*St)*St,zv=(9+64*St)*St*St,Ee$1=ei(4),hs=ei(8),ds=ei(12),gs=ei(16),Pn=ei(4);function Ov(t,n,a,s,l,u,c){let d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx;const px=t-l,hx=a-l,vx=n-u,yx=s-u;lx=px*yx,on=Sn*px,fn=on-(on-px),dn=px-fn,on=Sn*yx,Cn=on-(on-yx),Rn=yx-Cn,cx=dn*Rn-(lx-fn*Cn-dn*Cn-fn*Rn),fx=vx*hx,on=Sn*vx,fn=on-(on-vx),dn=vx-fn,on=Sn*hx,Cn=on-(on-hx),Rn=hx-Cn,gx=dn*Rn-(fx-fn*Cn-dn*Cn-fn*Rn),ax=cx-gx,tn=cx-ax,Ee$1[0]=cx-(ax+tn)+(tn-gx),ox=lx+ax,tn=ox-lx,sx=lx-(ox-tn)+(ax-tn),ax=sx-fx,tn=sx-ax,Ee$1[1]=sx-(ax+tn)+(tn-fx),mx=ox+ax,tn=mx-ox,Ee$1[2]=ox-(mx-tn)+(ax-tn),Ee$1[3]=mx;let Sx=Cv(4,Ee$1),_x=Dv*c;if(Sx>=_x||-Sx>=_x||(tn=t-px,d=t-(px+tn)+(tn-l),tn=a-hx,ar=a-(hx+tn)+(tn-l),tn=n-vx,Ct=n-(vx+tn)+(tn-u),tn=s-yx,en=s-(yx+tn)+(tn-u),d===0&&Ct===0&&ar===0&&en===0)||(_x=zv*c+Rv*Math.abs(Sx),Sx+=px*en+yx*d-(vx*ar+hx*Ct),Sx>=_x||-Sx>=_x))return Sx;lx=d*yx,on=Sn*d,fn=on-(on-d),dn=d-fn,on=Sn*yx,Cn=on-(on-yx),Rn=yx-Cn,cx=dn*Rn-(lx-fn*Cn-dn*Cn-fn*Rn),fx=Ct*hx,on=Sn*Ct,fn=on-(on-Ct),dn=Ct-fn,on=Sn*hx,Cn=on-(on-hx),Rn=hx-Cn,gx=dn*Rn-(fx-fn*Cn-dn*Cn-fn*Rn),ax=cx-gx,tn=cx-ax,Pn[0]=cx-(ax+tn)+(tn-gx),ox=lx+ax,tn=ox-lx,sx=lx-(ox-tn)+(ax-tn),ax=sx-fx,tn=sx-ax,Pn[1]=sx-(ax+tn)+(tn-fx),mx=ox+ax,tn=mx-ox,Pn[2]=ox-(mx-tn)+(ax-tn),Pn[3]=mx;const Ex=La(4,Ee$1,4,Pn,hs);lx=px*en,on=Sn*px,fn=on-(on-px),dn=px-fn,on=Sn*en,Cn=on-(on-en),Rn=en-Cn,cx=dn*Rn-(lx-fn*Cn-dn*Cn-fn*Rn),fx=vx*ar,on=Sn*vx,fn=on-(on-vx),dn=vx-fn,on=Sn*ar,Cn=on-(on-ar),Rn=ar-Cn,gx=dn*Rn-(fx-fn*Cn-dn*Cn-fn*Rn),ax=cx-gx,tn=cx-ax,Pn[0]=cx-(ax+tn)+(tn-gx),ox=lx+ax,tn=ox-lx,sx=lx-(ox-tn)+(ax-tn),ax=sx-fx,tn=sx-ax,Pn[1]=sx-(ax+tn)+(tn-fx),mx=ox+ax,tn=mx-ox,Pn[2]=ox-(mx-tn)+(ax-tn),Pn[3]=mx;const bx=La(Ex,hs,4,Pn,ds);lx=d*en,on=Sn*d,fn=on-(on-d),dn=d-fn,on=Sn*en,Cn=on-(on-en),Rn=en-Cn,cx=dn*Rn-(lx-fn*Cn-dn*Cn-fn*Rn),fx=Ct*ar,on=Sn*Ct,fn=on-(on-Ct),dn=Ct-fn,on=Sn*ar,Cn=on-(on-ar),Rn=ar-Cn,gx=dn*Rn-(fx-fn*Cn-dn*Cn-fn*Rn),ax=cx-gx,tn=cx-ax,Pn[0]=cx-(ax+tn)+(tn-gx),ox=lx+ax,tn=ox-lx,sx=lx-(ox-tn)+(ax-tn),ax=sx-fx,tn=sx-ax,Pn[1]=sx-(ax+tn)+(tn-fx),mx=ox+ax,tn=mx-ox,Pn[2]=ox-(mx-tn)+(ax-tn),Pn[3]=mx;const Ax=La(bx,ds,4,Pn,gs);return gs[Ax-1]}function _i(t,n,a,s,l,u){const c=(n-u)*(a-l),d=(t-l)*(s-u),Ct=c-d,ar=Math.abs(c+d);return Math.abs(Ct)>=Pv*ar?Ct:-Ov(t,n,a,s,l,u,ar)}const ps=Math.pow(2,-52),vi=new Uint32Array(512);class io{static from(n,a=Bv,s=Uv){const l=n.length,u=new Float64Array(l*2);for(let c=0;c<l;c++){const d=n[c];u[2*c]=a(d),u[2*c+1]=s(d)}return new io(u)}constructor(n){const a=n.length>>1;if(a>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const s=Math.max(2*a-5,0);this._triangles=new Uint32Array(s*3),this._halfedges=new Int32Array(s*3),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:n,_hullPrev:a,_hullNext:s,_hullTri:l,_hullHash:u}=this,c=n.length>>1;let d=1/0,Ct=1/0,ar=-1/0,en=-1/0;for(let px=0;px<c;px++){const hx=n[2*px],vx=n[2*px+1];hx<d&&(d=hx),vx<Ct&&(Ct=vx),hx>ar&&(ar=hx),vx>en&&(en=vx),this._ids[px]=px}const tn=(d+ar)/2,on=(Ct+en)/2;let fn,dn,Cn;for(let px=0,hx=1/0;px<c;px++){const vx=Ba(tn,on,n[2*px],n[2*px+1]);vx<hx&&(fn=px,hx=vx)}const Rn=n[2*fn],ax=n[2*fn+1];for(let px=0,hx=1/0;px<c;px++){if(px===fn)continue;const vx=Ba(Rn,ax,n[2*px],n[2*px+1]);vx<hx&&vx>0&&(dn=px,hx=vx)}let ox=n[2*dn],sx=n[2*dn+1],lx=1/0;for(let px=0;px<c;px++){if(px===fn||px===dn)continue;const hx=qv(Rn,ax,ox,sx,n[2*px],n[2*px+1]);hx<lx&&(Cn=px,lx=hx)}let cx=n[2*Cn],fx=n[2*Cn+1];if(lx===1/0){for(let vx=0;vx<c;vx++)this._dists[vx]=n[2*vx]-n[0]||n[2*vx+1]-n[1];Re(this._ids,this._dists,0,c-1);const px=new Uint32Array(c);let hx=0;for(let vx=0,yx=-1/0;vx<c;vx++){const Sx=this._ids[vx],_x=this._dists[Sx];_x>yx&&(px[hx++]=Sx,yx=_x)}this.hull=px.subarray(0,hx),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(_i(Rn,ax,ox,sx,cx,fx)<0){const px=dn,hx=ox,vx=sx;dn=Cn,ox=cx,sx=fx,Cn=px,cx=hx,fx=vx}const gx=Lv(Rn,ax,ox,sx,cx,fx);this._cx=gx.x,this._cy=gx.y;for(let px=0;px<c;px++)this._dists[px]=Ba(n[2*px],n[2*px+1],gx.x,gx.y);Re(this._ids,this._dists,0,c-1),this._hullStart=fn;let mx=3;s[fn]=a[Cn]=dn,s[dn]=a[fn]=Cn,s[Cn]=a[dn]=fn,l[fn]=0,l[dn]=1,l[Cn]=2,u.fill(-1),u[this._hashKey(Rn,ax)]=fn,u[this._hashKey(ox,sx)]=dn,u[this._hashKey(cx,fx)]=Cn,this.trianglesLen=0,this._addTriangle(fn,dn,Cn,-1,-1,-1);for(let px=0,hx,vx;px<this._ids.length;px++){const yx=this._ids[px],Sx=n[2*yx],_x=n[2*yx+1];if(px>0&&Math.abs(Sx-hx)<=ps&&Math.abs(_x-vx)<=ps||(hx=Sx,vx=_x,yx===fn||yx===dn||yx===Cn))continue;let Ex=0;for(let Cx=0,Lx=this._hashKey(Sx,_x);Cx<this._hashSize&&(Ex=u[(Lx+Cx)%this._hashSize],!(Ex!==-1&&Ex!==s[Ex]));Cx++);Ex=a[Ex];let bx=Ex,Ax;for(;Ax=s[bx],_i(Sx,_x,n[2*bx],n[2*bx+1],n[2*Ax],n[2*Ax+1])>=0;)if(bx=Ax,bx===Ex){bx=-1;break}if(bx===-1)continue;let Mx=this._addTriangle(bx,yx,s[bx],-1,-1,l[bx]);l[yx]=this._legalize(Mx+2),l[bx]=Mx,mx++;let Rx=s[bx];for(;Ax=s[Rx],_i(Sx,_x,n[2*Rx],n[2*Rx+1],n[2*Ax],n[2*Ax+1])<0;)Mx=this._addTriangle(Rx,yx,Ax,l[yx],-1,l[Rx]),l[yx]=this._legalize(Mx+2),s[Rx]=Rx,mx--,Rx=Ax;if(bx===Ex)for(;Ax=a[bx],_i(Sx,_x,n[2*Ax],n[2*Ax+1],n[2*bx],n[2*bx+1])<0;)Mx=this._addTriangle(Ax,yx,bx,-1,l[bx],l[Ax]),this._legalize(Mx+2),l[Ax]=Mx,s[bx]=bx,mx--,bx=Ax;this._hullStart=a[yx]=bx,s[bx]=a[Rx]=yx,s[yx]=Rx,u[this._hashKey(Sx,_x)]=yx,u[this._hashKey(n[2*bx],n[2*bx+1])]=bx}this.hull=new Uint32Array(mx);for(let px=0,hx=this._hullStart;px<mx;px++)this.hull[px]=hx,hx=s[hx];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,a){return Math.floor(Yv(n-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:a,_halfedges:s,coords:l}=this;let u=0,c=0;for(;;){const d=s[n],Ct=n-n%3;if(c=Ct+(n+2)%3,d===-1){if(u===0)break;n=vi[--u];continue}const ar=d-d%3,en=Ct+(n+1)%3,tn=ar+(d+2)%3,on=a[c],fn=a[n],dn=a[en],Cn=a[tn];if(Fv(l[2*on],l[2*on+1],l[2*fn],l[2*fn+1],l[2*dn],l[2*dn+1],l[2*Cn],l[2*Cn+1])){a[n]=Cn,a[d]=on;const Rn=s[tn];if(Rn===-1){let ox=this._hullStart;do{if(this._hullTri[ox]===tn){this._hullTri[ox]=n;break}ox=this._hullPrev[ox]}while(ox!==this._hullStart)}this._link(n,Rn),this._link(d,s[c]),this._link(c,tn);const ax=ar+(d+1)%3;u<vi.length&&(vi[u++]=ax)}else{if(u===0)break;n=vi[--u]}}return c}_link(n,a){this._halfedges[n]=a,a!==-1&&(this._halfedges[a]=n)}_addTriangle(n,a,s,l,u,c){const d=this.trianglesLen;return this._triangles[d]=n,this._triangles[d+1]=a,this._triangles[d+2]=s,this._link(d,l),this._link(d+1,u),this._link(d+2,c),this.trianglesLen+=3,d}}function Yv(t,n){const a=t/(Math.abs(t)+Math.abs(n));return(n>0?3-a:1+a)/4}function Ba(t,n,a,s){const l=t-a,u=n-s;return l*l+u*u}function Fv(t,n,a,s,l,u,c,d){const Ct=t-c,ar=n-d,en=a-c,tn=s-d,on=l-c,fn=u-d,dn=Ct*Ct+ar*ar,Cn=en*en+tn*tn,Rn=on*on+fn*fn;return Ct*(tn*Rn-Cn*fn)-ar*(en*Rn-Cn*on)+dn*(en*fn-tn*on)<0}function qv(t,n,a,s,l,u){const c=a-t,d=s-n,Ct=l-t,ar=u-n,en=c*c+d*d,tn=Ct*Ct+ar*ar,on=.5/(c*ar-d*Ct),fn=(ar*en-d*tn)*on,dn=(c*tn-Ct*en)*on;return fn*fn+dn*dn}function Lv(t,n,a,s,l,u){const c=a-t,d=s-n,Ct=l-t,ar=u-n,en=c*c+d*d,tn=Ct*Ct+ar*ar,on=.5/(c*ar-d*Ct),fn=t+(ar*en-d*tn)*on,dn=n+(c*tn-Ct*en)*on;return{x:fn,y:dn}}function Re(t,n,a,s){if(s-a<=20)for(let l=a+1;l<=s;l++){const u=t[l],c=n[u];let d=l-1;for(;d>=a&&n[t[d]]>c;)t[d+1]=t[d--];t[d+1]=u}else{const l=a+s>>1;let u=a+1,c=s;fr(t,l,u),n[t[a]]>n[t[s]]&&fr(t,a,s),n[t[u]]>n[t[s]]&&fr(t,u,s),n[t[a]]>n[t[u]]&&fr(t,a,u);const d=t[u],Ct=n[d];for(;;){do u++;while(n[t[u]]<Ct);do c--;while(n[t[c]]>Ct);if(c<u)break;fr(t,u,c)}t[a+1]=t[c],t[c]=d,s-u+1>=c-a?(Re(t,n,u,s),Re(t,n,a,c-1)):(Re(t,n,a,c-1),Re(t,n,u,s))}}function fr(t,n,a){const s=t[n];t[n]=t[a],t[a]=s}function Bv(t){return t[0]}function Uv(t){return t[1]}const ms=1e-6;let ne$1=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,a){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,a){this._+=`L${this._x1=+n},${this._y1=+a}`}arc(n,a,s){n=+n,a=+a,s=+s;const l=n+s,u=a;if(s<0)throw new Error("negative radius");this._x1===null?this._+=`M${l},${u}`:(Math.abs(this._x1-l)>ms||Math.abs(this._y1-u)>ms)&&(this._+="L"+l+","+u),s&&(this._+=`A${s},${s},0,1,1,${n-s},${a}A${s},${s},0,1,1,${this._x1=l},${this._y1=u}`)}rect(n,a,s,l){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${+s}v${+l}h${-s}Z`}value(){return this._||null}};class Ru{constructor(){this._=[]}moveTo(n,a){this._.push([n,a])}closePath(){this._.push(this._[0].slice())}lineTo(n,a){this._.push([n,a])}value(){return this._.length?this._:null}}class v0{constructor(n,[a,s,l,u]=[0,0,960,500]){if(!((l=+l)>=(a=+a))||!((u=+u)>=(s=+s)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=l,this.xmin=a,this.ymax=u,this.ymin=s,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:a,triangles:s},vectors:l}=this;let u,c;const d=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2);for(let Cn=0,Rn=0,ax=s.length,ox,sx;Cn<ax;Cn+=3,Rn+=2){const lx=s[Cn]*2,cx=s[Cn+1]*2,fx=s[Cn+2]*2,gx=n[lx],mx=n[lx+1],px=n[cx],hx=n[cx+1],vx=n[fx],yx=n[fx+1],Sx=px-gx,_x=hx-mx,Ex=vx-gx,bx=yx-mx,Ax=(Sx*bx-_x*Ex)*2;if(Math.abs(Ax)<1e-9){if(u===void 0){u=c=0;for(const Rx of a)u+=n[Rx*2],c+=n[Rx*2+1];u/=a.length,c/=a.length}const Mx=1e9*Math.sign((u-gx)*bx-(c-mx)*Ex);ox=(gx+vx)/2-Mx*bx,sx=(mx+yx)/2+Mx*Ex}else{const Mx=1/Ax,Rx=Sx*Sx+_x*_x,Cx=Ex*Ex+bx*bx;ox=gx+(bx*Rx-_x*Cx)*Mx,sx=mx+(Sx*Cx-Ex*Rx)*Mx}d[Rn]=ox,d[Rn+1]=sx}let Ct=a[a.length-1],ar,en=Ct*4,tn,on=n[2*Ct],fn,dn=n[2*Ct+1];l.fill(0);for(let Cn=0;Cn<a.length;++Cn)Ct=a[Cn],ar=en,tn=on,fn=dn,en=Ct*4,on=n[2*Ct],dn=n[2*Ct+1],l[ar+2]=l[en]=fn-dn,l[ar+3]=l[en+1]=on-tn}render(n){const a=n==null?n=new ne$1:void 0,{delaunay:{halfedges:s,inedges:l,hull:u},circumcenters:c,vectors:d}=this;if(u.length<=1)return null;for(let en=0,tn=s.length;en<tn;++en){const on=s[en];if(on<en)continue;const fn=Math.floor(en/3)*2,dn=Math.floor(on/3)*2,Cn=c[fn],Rn=c[fn+1],ax=c[dn],ox=c[dn+1];this._renderSegment(Cn,Rn,ax,ox,n)}let Ct,ar=u[u.length-1];for(let en=0;en<u.length;++en){Ct=ar,ar=u[en];const tn=Math.floor(l[ar]/3)*2,on=c[tn],fn=c[tn+1],dn=Ct*4,Cn=this._project(on,fn,d[dn+2],d[dn+3]);Cn&&this._renderSegment(on,fn,Cn[0],Cn[1],n)}return a&&a.value()}renderBounds(n){const a=n==null?n=new ne$1:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(n,a){const s=a==null?a=new ne$1:void 0,l=this._clip(n);if(l===null||!l.length)return;a.moveTo(l[0],l[1]);let u=l.length;for(;l[0]===l[u-2]&&l[1]===l[u-1]&&u>1;)u-=2;for(let c=2;c<u;c+=2)(l[c]!==l[c-2]||l[c+1]!==l[c-1])&&a.lineTo(l[c],l[c+1]);return a.closePath(),s&&s.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let a=0,s=n.length/2;a<s;++a){const l=this.cellPolygon(a);l&&(l.index=a,yield l)}}cellPolygon(n){const a=new Ru;return this.renderCell(n,a),a.value()}_renderSegment(n,a,s,l,u){let c;const d=this._regioncode(n,a),Ct=this._regioncode(s,l);d===0&&Ct===0?(u.moveTo(n,a),u.lineTo(s,l)):(c=this._clipSegment(n,a,s,l,d,Ct))&&(u.moveTo(c[0],c[1]),u.lineTo(c[2],c[3]))}contains(n,a,s){return a=+a,a!==a||(s=+s,s!==s)?!1:this.delaunay._step(n,a,s)===n}*neighbors(n){const a=this._clip(n);if(a)for(const s of this.delaunay.neighbors(n)){const l=this._clip(s);if(l){e:for(let u=0,c=a.length;u<c;u+=2)for(let d=0,Ct=l.length;d<Ct;d+=2)if(a[u]===l[d]&&a[u+1]===l[d+1]&&a[(u+2)%c]===l[(d+Ct-2)%Ct]&&a[(u+3)%c]===l[(d+Ct-1)%Ct]){yield s;break e}}}}_cell(n){const{circumcenters:a,delaunay:{inedges:s,halfedges:l,triangles:u}}=this,c=s[n];if(c===-1)return null;const d=[];let Ct=c;do{const ar=Math.floor(Ct/3);if(d.push(a[ar*2],a[ar*2+1]),Ct=Ct%3===2?Ct-2:Ct+1,u[Ct]!==n)break;Ct=l[Ct]}while(Ct!==c&&Ct!==-1);return d}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(n);if(a===null)return null;const{vectors:s}=this,l=n*4;return this._simplify(s[l]||s[l+1]?this._clipInfinite(n,a,s[l],s[l+1],s[l+2],s[l+3]):this._clipFinite(n,a))}_clipFinite(n,a){const s=a.length;let l=null,u,c,d=a[s-2],Ct=a[s-1],ar,en=this._regioncode(d,Ct),tn,on=0;for(let fn=0;fn<s;fn+=2)if(u=d,c=Ct,d=a[fn],Ct=a[fn+1],ar=en,en=this._regioncode(d,Ct),ar===0&&en===0)tn=on,on=0,l?l.push(d,Ct):l=[d,Ct];else{let dn,Cn,Rn,ax,ox;if(ar===0){if((dn=this._clipSegment(u,c,d,Ct,ar,en))===null)continue;[Cn,Rn,ax,ox]=dn}else{if((dn=this._clipSegment(d,Ct,u,c,en,ar))===null)continue;[ax,ox,Cn,Rn]=dn,tn=on,on=this._edgecode(Cn,Rn),tn&&on&&this._edge(n,tn,on,l,l.length),l?l.push(Cn,Rn):l=[Cn,Rn]}tn=on,on=this._edgecode(ax,ox),tn&&on&&this._edge(n,tn,on,l,l.length),l?l.push(ax,ox):l=[ax,ox]}if(l)tn=on,on=this._edgecode(l[0],l[1]),tn&&on&&this._edge(n,tn,on,l,l.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(n,a,s,l,u,c){const d=u<c;for(d&&([n,a,s,l,u,c]=[s,l,n,a,c,u]);;){if(u===0&&c===0)return d?[s,l,n,a]:[n,a,s,l];if(u&c)return null;let Ct,ar,en=u||c;en&8?(Ct=n+(s-n)*(this.ymax-a)/(l-a),ar=this.ymax):en&4?(Ct=n+(s-n)*(this.ymin-a)/(l-a),ar=this.ymin):en&2?(ar=a+(l-a)*(this.xmax-n)/(s-n),Ct=this.xmax):(ar=a+(l-a)*(this.xmin-n)/(s-n),Ct=this.xmin),u?(n=Ct,a=ar,u=this._regioncode(n,a)):(s=Ct,l=ar,c=this._regioncode(s,l))}}_clipInfinite(n,a,s,l,u,c){let d=Array.from(a),Ct;if((Ct=this._project(d[0],d[1],s,l))&&d.unshift(Ct[0],Ct[1]),(Ct=this._project(d[d.length-2],d[d.length-1],u,c))&&d.push(Ct[0],Ct[1]),d=this._clipFinite(n,d))for(let ar=0,en=d.length,tn,on=this._edgecode(d[en-2],d[en-1]);ar<en;ar+=2)tn=on,on=this._edgecode(d[ar],d[ar+1]),tn&&on&&(ar=this._edge(n,tn,on,d,ar),en=d.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(n,a,s,l,u){for(;a!==s;){let c,d;switch(a){case 5:a=4;continue;case 4:a=6,c=this.xmax,d=this.ymin;break;case 6:a=2;continue;case 2:a=10,c=this.xmax,d=this.ymax;break;case 10:a=8;continue;case 8:a=9,c=this.xmin,d=this.ymax;break;case 9:a=1;continue;case 1:a=5,c=this.xmin,d=this.ymin;break}(l[u]!==c||l[u+1]!==d)&&this.contains(n,c,d)&&(l.splice(u,0,c,d),u+=2)}return u}_project(n,a,s,l){let u=1/0,c,d,Ct;if(l<0){if(a<=this.ymin)return null;(c=(this.ymin-a)/l)<u&&(Ct=this.ymin,d=n+(u=c)*s)}else if(l>0){if(a>=this.ymax)return null;(c=(this.ymax-a)/l)<u&&(Ct=this.ymax,d=n+(u=c)*s)}if(s>0){if(n>=this.xmax)return null;(c=(this.xmax-n)/s)<u&&(d=this.xmax,Ct=a+(u=c)*l)}else if(s<0){if(n<=this.xmin)return null;(c=(this.xmin-n)/s)<u&&(d=this.xmin,Ct=a+(u=c)*l)}return[d,Ct]}_edgecode(n,a){return(n===this.xmin?1:n===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(n,a){return(n<this.xmin?1:n>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let a=0;a<n.length;a+=2){const s=(a+2)%n.length,l=(a+4)%n.length;(n[a]===n[s]&&n[s]===n[l]||n[a+1]===n[s+1]&&n[s+1]===n[l+1])&&(n.splice(s,2),a-=2)}n.length||(n=null)}return n}}const Xv=2*Math.PI,ke$1=Math.pow;function Hv(t){return t[0]}function jv(t){return t[1]}function Wv(t){const{triangles:n,coords:a}=t;for(let s=0;s<n.length;s+=3){const l=2*n[s],u=2*n[s+1],c=2*n[s+2];if((a[c]-a[l])*(a[u+1]-a[l+1])-(a[u]-a[l])*(a[c+1]-a[l+1])>1e-10)return!1}return!0}function Vv(t,n,a){return[t+Math.sin(t+n)*a,n+Math.cos(t-n)*a]}class Dc{static from(n,a=Hv,s=jv,l){return new Dc("length"in n?Gv(n,a,s,l):Float64Array.from(Zv(n,a,s,l)))}constructor(n){this._delaunator=new io(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,a=this.points;if(n.hull&&n.hull.length>2&&Wv(n)){this.collinear=Int32Array.from({length:a.length/2},(on,fn)=>fn).sort((on,fn)=>a[2*on]-a[2*fn]||a[2*on+1]-a[2*fn+1]);const Ct=this.collinear[0],ar=this.collinear[this.collinear.length-1],en=[a[2*Ct],a[2*Ct+1],a[2*ar],a[2*ar+1]],tn=1e-8*Math.hypot(en[3]-en[1],en[2]-en[0]);for(let on=0,fn=a.length/2;on<fn;++on){const dn=Vv(a[2*on],a[2*on+1],tn);a[2*on]=dn[0],a[2*on+1]=dn[1]}this._delaunator=new io(a)}else delete this.collinear;const s=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,u=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let Ct=0,ar=s.length;Ct<ar;++Ct){const en=u[Ct%3===2?Ct-2:Ct+1];(s[Ct]===-1||c[en]===-1)&&(c[en]=Ct)}for(let Ct=0,ar=l.length;Ct<ar;++Ct)d[l[Ct]]=Ct;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],c[l[0]]=1,l.length===2&&(c[l[1]]=0,this.triangles[1]=l[1],this.triangles[2]=l[1]))}voronoi(n){return new v0(this,n)}*neighbors(n){const{inedges:a,hull:s,_hullIndex:l,halfedges:u,triangles:c,collinear:d}=this;if(d){const tn=d.indexOf(n);tn>0&&(yield d[tn-1]),tn<d.length-1&&(yield d[tn+1]);return}const Ct=a[n];if(Ct===-1)return;let ar=Ct,en=-1;do{if(yield en=c[ar],ar=ar%3===2?ar-2:ar+1,c[ar]!==n)return;if(ar=u[ar],ar===-1){const tn=s[(l[n]+1)%s.length];tn!==en&&(yield tn);return}}while(ar!==Ct)}find(n,a,s=0){if(n=+n,n!==n||(a=+a,a!==a))return-1;const l=s;let u;for(;(u=this._step(s,n,a))>=0&&u!==s&&u!==l;)s=u;return u}_step(n,a,s){const{inedges:l,hull:u,_hullIndex:c,halfedges:d,triangles:Ct,points:ar}=this;if(l[n]===-1||!ar.length)return(n+1)%(ar.length>>1);let en=n,tn=ke$1(a-ar[n*2],2)+ke$1(s-ar[n*2+1],2);const on=l[n];let fn=on;do{let dn=Ct[fn];const Cn=ke$1(a-ar[dn*2],2)+ke$1(s-ar[dn*2+1],2);if(Cn<tn&&(tn=Cn,en=dn),fn=fn%3===2?fn-2:fn+1,Ct[fn]!==n)break;if(fn=d[fn],fn===-1){if(fn=u[(c[n]+1)%u.length],fn!==dn&&ke$1(a-ar[fn*2],2)+ke$1(s-ar[fn*2+1],2)<tn)return fn;break}}while(fn!==on);return en}render(n){const a=n==null?n=new ne$1:void 0,{points:s,halfedges:l,triangles:u}=this;for(let c=0,d=l.length;c<d;++c){const Ct=l[c];if(Ct<c)continue;const ar=u[c]*2,en=u[Ct]*2;n.moveTo(s[ar],s[ar+1]),n.lineTo(s[en],s[en+1])}return this.renderHull(n),a&&a.value()}renderPoints(n,a){a===void 0&&(!n||typeof n.moveTo!="function")&&(a=n,n=null),a=a==null?2:+a;const s=n==null?n=new ne$1:void 0,{points:l}=this;for(let u=0,c=l.length;u<c;u+=2){const d=l[u],Ct=l[u+1];n.moveTo(d+a,Ct),n.arc(d,Ct,a,0,Xv)}return s&&s.value()}renderHull(n){const a=n==null?n=new ne$1:void 0,{hull:s,points:l}=this,u=s[0]*2,c=s.length;n.moveTo(l[u],l[u+1]);for(let d=1;d<c;++d){const Ct=2*s[d];n.lineTo(l[Ct],l[Ct+1])}return n.closePath(),a&&a.value()}hullPolygon(){const n=new Ru;return this.renderHull(n),n.value()}renderTriangle(n,a){const s=a==null?a=new ne$1:void 0,{points:l,triangles:u}=this,c=u[n*=3]*2,d=u[n+1]*2,Ct=u[n+2]*2;return a.moveTo(l[c],l[c+1]),a.lineTo(l[d],l[d+1]),a.lineTo(l[Ct],l[Ct+1]),a.closePath(),s&&s.value()}*trianglePolygons(){const{triangles:n}=this;for(let a=0,s=n.length/3;a<s;++a)yield this.trianglePolygon(a)}trianglePolygon(n){const a=new Ru;return this.renderTriangle(n,a),a.value()}}function Gv(t,n,a,s){const l=t.length,u=new Float64Array(l*2);for(let c=0;c<l;++c){const d=t[c];u[c*2]=n.call(s,d,c,t),u[c*2+1]=a.call(s,d,c,t)}return u}function*Zv(t,n,a,s){let l=0;for(const u of t)yield n.call(s,u,l,t),yield a.call(s,u,l,t),++l}var ys={},Ua={},Xa=34,sr=10,Ha=13;function b0(t){return new Function("d","return {"+t.map(function(n,a){return JSON.stringify(n)+": d["+a+'] || ""'}).join(",")+"}")}function Qv(t,n){var a=b0(t);return function(s,l){return n(a(s),l,t)}}function _s(t){var n=Object.create(null),a=[];return t.forEach(function(s){for(var l in s)l in n||a.push(n[l]=l)}),a}function Hn(t,n){var a=t+"",s=a.length;return s<n?new Array(n-s+1).join(0)+a:a}function Kv(t){return t<0?"-"+Hn(-t,6):t>9999?"+"+Hn(t,6):Hn(t,4)}function Jv(t){var n=t.getUTCHours(),a=t.getUTCMinutes(),s=t.getUTCSeconds(),l=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Kv(t.getUTCFullYear())+"-"+Hn(t.getUTCMonth()+1,2)+"-"+Hn(t.getUTCDate(),2)+(l?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(s,2)+"."+Hn(l,3)+"Z":s?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(s,2)+"Z":a||n?"T"+Hn(n,2)+":"+Hn(a,2)+"Z":"")}function na(t){var n=new RegExp('["'+t+`
\r]`),a=t.charCodeAt(0);function s(tn,on){var fn,dn,Cn=l(tn,function(Rn,ax){if(fn)return fn(Rn,ax-1);dn=Rn,fn=on?Qv(Rn,on):b0(Rn)});return Cn.columns=dn||[],Cn}function l(tn,on){var fn=[],dn=tn.length,Cn=0,Rn=0,ax,ox=dn<=0,sx=!1;tn.charCodeAt(dn-1)===sr&&--dn,tn.charCodeAt(dn-1)===Ha&&--dn;function lx(){if(ox)return Ua;if(sx)return sx=!1,ys;var fx,gx=Cn,mx;if(tn.charCodeAt(gx)===Xa){for(;Cn++<dn&&tn.charCodeAt(Cn)!==Xa||tn.charCodeAt(++Cn)===Xa;);return(fx=Cn)>=dn?ox=!0:(mx=tn.charCodeAt(Cn++))===sr?sx=!0:mx===Ha&&(sx=!0,tn.charCodeAt(Cn)===sr&&++Cn),tn.slice(gx+1,fx-1).replace(/""/g,'"')}for(;Cn<dn;){if((mx=tn.charCodeAt(fx=Cn++))===sr)sx=!0;else if(mx===Ha)sx=!0,tn.charCodeAt(Cn)===sr&&++Cn;else if(mx!==a)continue;return tn.slice(gx,fx)}return ox=!0,tn.slice(gx,dn)}for(;(ax=lx())!==Ua;){for(var cx=[];ax!==ys&&ax!==Ua;)cx.push(ax),ax=lx();on&&(cx=on(cx,Rn++))==null||fn.push(cx)}return fn}function u(tn,on){return tn.map(function(fn){return on.map(function(dn){return en(fn[dn])}).join(t)})}function c(tn,on){return on==null&&(on=_s(tn)),[on.map(en).join(t)].concat(u(tn,on)).join(`
`)}function d(tn,on){return on==null&&(on=_s(tn)),u(tn,on).join(`
`)}function Ct(tn){return tn.map(ar).join(`
`)}function ar(tn){return tn.map(en).join(t)}function en(tn){return tn==null?"":tn instanceof Date?Jv(tn):n.test(tn+="")?'"'+tn.replace(/"/g,'""')+'"':tn}return{parse:s,parseRows:l,format:c,formatBody:d,formatRows:Ct,formatRow:ar,formatValue:en}}var ye$1=na(","),w0=ye$1.parse,nb=ye$1.parseRows,tb=ye$1.format,eb=ye$1.formatBody,rb$1=ye$1.formatRows,ib=ye$1.formatRow,ob=ye$1.formatValue,_e=na("	"),x0=_e.parse,ab=_e.parseRows,ub=_e.format,cb=_e.formatBody,fb=_e.formatRows,sb=_e.formatRow,lb$1=_e.formatValue;function hb(t){for(var n in t){var a=t[n].trim(),s,l;if(!a)a=null;else if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(!isNaN(s=+a))a=s;else if(l=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))db&&l[4]&&!l[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a);else continue;t[n]=a}return t}const db=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function gb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function pb(t,n){return fetch(t,n).then(gb)}function mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function yb(t,n){return fetch(t,n).then(mb)}function _b$1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ta(t,n){return fetch(t,n).then(_b$1)}function M0(t){return function(n,a,s){return arguments.length===2&&typeof a=="function"&&(s=a,a=void 0),ta(n,a).then(function(l){return t(l,s)})}}function vb(t,n,a,s){arguments.length===3&&typeof a=="function"&&(s=a,a=void 0);var l=na(t);return ta(n,a).then(function(u){return l.parse(u,s)})}var bb=M0(w0),wb=M0(x0);function xb(t,n){return new Promise(function(a,s){var l=new Image;for(var u in n)l[u]=n[u];l.onerror=s,l.onload=function(){a(l)},l.src=t})}function Mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function $b(t,n){return fetch(t,n).then(Mb)}function zc(t){return(n,a)=>ta(n,a).then(s=>new DOMParser().parseFromString(s,t))}const $0=zc("application/xml");var Tb=zc("text/html"),Ab=zc("image/svg+xml");function Eb(t,n){var a,s=1;t==null&&(t=0),n==null&&(n=0);function l(){var u,c=a.length,d,Ct=0,ar=0;for(u=0;u<c;++u)d=a[u],Ct+=d.x,ar+=d.y;for(Ct=(Ct/c-t)*s,ar=(ar/c-n)*s,u=0;u<c;++u)d=a[u],d.x-=Ct,d.y-=ar}return l.initialize=function(u){a=u},l.x=function(u){return arguments.length?(t=+u,l):t},l.y=function(u){return arguments.length?(n=+u,l):n},l.strength=function(u){return arguments.length?(s=+u,l):s},l}function kb(t){const n=+this._x.call(null,t),a=+this._y.call(null,t);return T0(this.cover(n,a),n,a,t)}function T0(t,n,a,s){if(isNaN(n)||isNaN(a))return t;var l,u=t._root,c={data:s},d=t._x0,Ct=t._y0,ar=t._x1,en=t._y1,tn,on,fn,dn,Cn,Rn,ax,ox;if(!u)return t._root=c,t;for(;u.length;)if((Cn=n>=(tn=(d+ar)/2))?d=tn:ar=tn,(Rn=a>=(on=(Ct+en)/2))?Ct=on:en=on,l=u,!(u=u[ax=Rn<<1|Cn]))return l[ax]=c,t;if(fn=+t._x.call(null,u.data),dn=+t._y.call(null,u.data),n===fn&&a===dn)return c.next=u,l?l[ax]=c:t._root=c,t;do l=l?l[ax]=new Array(4):t._root=new Array(4),(Cn=n>=(tn=(d+ar)/2))?d=tn:ar=tn,(Rn=a>=(on=(Ct+en)/2))?Ct=on:en=on;while((ax=Rn<<1|Cn)===(ox=(dn>=on)<<1|fn>=tn));return l[ox]=u,l[ax]=c,t}function Sb(t){var n,a,s=t.length,l,u,c=new Array(s),d=new Array(s),Ct=1/0,ar=1/0,en=-1/0,tn=-1/0;for(a=0;a<s;++a)isNaN(l=+this._x.call(null,n=t[a]))||isNaN(u=+this._y.call(null,n))||(c[a]=l,d[a]=u,l<Ct&&(Ct=l),l>en&&(en=l),u<ar&&(ar=u),u>tn&&(tn=u));if(Ct>en||ar>tn)return this;for(this.cover(Ct,ar).cover(en,tn),a=0;a<s;++a)T0(this,c[a],d[a],t[a]);return this}function Nb(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var a=this._x0,s=this._y0,l=this._x1,u=this._y1;if(isNaN(a))l=(a=Math.floor(t))+1,u=(s=Math.floor(n))+1;else{for(var c=l-a||1,d=this._root,Ct,ar;a>t||t>=l||s>n||n>=u;)switch(ar=(n<s)<<1|t<a,Ct=new Array(4),Ct[ar]=d,d=Ct,c*=2,ar){case 0:l=a+c,u=s+c;break;case 1:a=l-c,u=s+c;break;case 2:l=a+c,s=u-c;break;case 3:a=l-c,s=u-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=a,this._y0=s,this._x1=l,this._y1=u,this}function Ib(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Rb(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yn(t,n,a,s,l){this.node=t,this.x0=n,this.y0=a,this.x1=s,this.y1=l}function Cb(t,n,a){var s,l=this._x0,u=this._y0,c,d,Ct,ar,en=this._x1,tn=this._y1,on=[],fn=this._root,dn,Cn;for(fn&&on.push(new Yn(fn,l,u,en,tn)),a==null?a=1/0:(l=t-a,u=n-a,en=t+a,tn=n+a,a*=a);dn=on.pop();)if(!(!(fn=dn.node)||(c=dn.x0)>en||(d=dn.y0)>tn||(Ct=dn.x1)<l||(ar=dn.y1)<u))if(fn.length){var Rn=(c+Ct)/2,ax=(d+ar)/2;on.push(new Yn(fn[3],Rn,ax,Ct,ar),new Yn(fn[2],c,ax,Rn,ar),new Yn(fn[1],Rn,d,Ct,ax),new Yn(fn[0],c,d,Rn,ax)),(Cn=(n>=ax)<<1|t>=Rn)&&(dn=on[on.length-1],on[on.length-1]=on[on.length-1-Cn],on[on.length-1-Cn]=dn)}else{var ox=t-+this._x.call(null,fn.data),sx=n-+this._y.call(null,fn.data),lx=ox*ox+sx*sx;if(lx<a){var cx=Math.sqrt(a=lx);l=t-cx,u=n-cx,en=t+cx,tn=n+cx,s=fn.data}}return s}function Pb(t){if(isNaN(en=+this._x.call(null,t))||isNaN(tn=+this._y.call(null,t)))return this;var n,a=this._root,s,l,u,c=this._x0,d=this._y0,Ct=this._x1,ar=this._y1,en,tn,on,fn,dn,Cn,Rn,ax;if(!a)return this;if(a.length)for(;;){if((dn=en>=(on=(c+Ct)/2))?c=on:Ct=on,(Cn=tn>=(fn=(d+ar)/2))?d=fn:ar=fn,n=a,!(a=a[Rn=Cn<<1|dn]))return this;if(!a.length)break;(n[Rn+1&3]||n[Rn+2&3]||n[Rn+3&3])&&(s=n,ax=Rn)}for(;a.data!==t;)if(l=a,!(a=a.next))return this;return(u=a.next)&&delete a.next,l?(u?l.next=u:delete l.next,this):n?(u?n[Rn]=u:delete n[Rn],(a=n[0]||n[1]||n[2]||n[3])&&a===(n[3]||n[2]||n[1]||n[0])&&!a.length&&(s?s[ax]=a:this._root=a),this):(this._root=u,this)}function Db(t){for(var n=0,a=t.length;n<a;++n)this.remove(t[n]);return this}function zb(){return this._root}function Ob(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Yb(t){var n=[],a,s=this._root,l,u,c,d,Ct;for(s&&n.push(new Yn(s,this._x0,this._y0,this._x1,this._y1));a=n.pop();)if(!t(s=a.node,u=a.x0,c=a.y0,d=a.x1,Ct=a.y1)&&s.length){var ar=(u+d)/2,en=(c+Ct)/2;(l=s[3])&&n.push(new Yn(l,ar,en,d,Ct)),(l=s[2])&&n.push(new Yn(l,u,en,ar,Ct)),(l=s[1])&&n.push(new Yn(l,ar,c,d,en)),(l=s[0])&&n.push(new Yn(l,u,c,ar,en))}return this}function Fb(t){var n=[],a=[],s;for(this._root&&n.push(new Yn(this._root,this._x0,this._y0,this._x1,this._y1));s=n.pop();){var l=s.node;if(l.length){var u,c=s.x0,d=s.y0,Ct=s.x1,ar=s.y1,en=(c+Ct)/2,tn=(d+ar)/2;(u=l[0])&&n.push(new Yn(u,c,d,en,tn)),(u=l[1])&&n.push(new Yn(u,en,d,Ct,tn)),(u=l[2])&&n.push(new Yn(u,c,tn,en,ar)),(u=l[3])&&n.push(new Yn(u,en,tn,Ct,ar))}a.push(s)}for(;s=a.pop();)t(s.node,s.x0,s.y0,s.x1,s.y1);return this}function qb(t){return t[0]}function Lb(t){return arguments.length?(this._x=t,this):this._x}function Bb(t){return t[1]}function Ub(t){return arguments.length?(this._y=t,this):this._y}function ea(t,n,a){var s=new Oc(n??qb,a??Bb,NaN,NaN,NaN,NaN);return t==null?s:s.addAll(t)}function Oc(t,n,a,s,l,u){this._x=t,this._y=n,this._x0=a,this._y0=s,this._x1=l,this._y1=u,this._root=void 0}function vs(t){for(var n={data:t.data},a=n;t=t.next;)a=a.next={data:t.data};return n}var Xn=ea.prototype=Oc.prototype;Xn.copy=function(){var t=new Oc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,a,s;if(!n)return t;if(!n.length)return t._root=vs(n),t;for(a=[{source:n,target:t._root=new Array(4)}];n=a.pop();)for(var l=0;l<4;++l)(s=n.source[l])&&(s.length?a.push({source:s,target:n.target[l]=new Array(4)}):n.target[l]=vs(s));return t};Xn.add=kb;Xn.addAll=Sb;Xn.cover=Nb;Xn.data=Ib;Xn.extent=Rb;Xn.find=Cb;Xn.remove=Pb;Xn.removeAll=Db;Xn.root=zb;Xn.size=Ob;Xn.visit=Yb;Xn.visitAfter=Fb;Xn.x=Lb;Xn.y=Ub;function vn(t){return function(){return t}}function Ot(t){return(t()-.5)*1e-6}function Xb(t){return t.x+t.vx}function Hb(t){return t.y+t.vy}function jb(t){var n,a,s,l=1,u=1;typeof t!="function"&&(t=vn(t==null?1:+t));function c(){for(var ar,en=n.length,tn,on,fn,dn,Cn,Rn,ax=0;ax<u;++ax)for(tn=ea(n,Xb,Hb).visitAfter(d),ar=0;ar<en;++ar)on=n[ar],Cn=a[on.index],Rn=Cn*Cn,fn=on.x+on.vx,dn=on.y+on.vy,tn.visit(ox);function ox(sx,lx,cx,fx,gx){var mx=sx.data,px=sx.r,hx=Cn+px;if(mx){if(mx.index>on.index){var vx=fn-mx.x-mx.vx,yx=dn-mx.y-mx.vy,Sx=vx*vx+yx*yx;Sx<hx*hx&&(vx===0&&(vx=Ot(s),Sx+=vx*vx),yx===0&&(yx=Ot(s),Sx+=yx*yx),Sx=(hx-(Sx=Math.sqrt(Sx)))/Sx*l,on.vx+=(vx*=Sx)*(hx=(px*=px)/(Rn+px)),on.vy+=(yx*=Sx)*hx,mx.vx-=vx*(hx=1-hx),mx.vy-=yx*hx)}return}return lx>fn+hx||fx<fn-hx||cx>dn+hx||gx<dn-hx}}function d(ar){if(ar.data)return ar.r=a[ar.data.index];for(var en=ar.r=0;en<4;++en)ar[en]&&ar[en].r>ar.r&&(ar.r=ar[en].r)}function Ct(){if(n){var ar,en=n.length,tn;for(a=new Array(en),ar=0;ar<en;++ar)tn=n[ar],a[tn.index]=+t(tn,ar,n)}}return c.initialize=function(ar,en){n=ar,s=en,Ct()},c.iterations=function(ar){return arguments.length?(u=+ar,c):u},c.strength=function(ar){return arguments.length?(l=+ar,c):l},c.radius=function(ar){return arguments.length?(t=typeof ar=="function"?ar:vn(+ar),Ct(),c):t},c}function Wb(t){return t.index}function bs(t,n){var a=t.get(n);if(!a)throw new Error("node not found: "+n);return a}function Vb(t){var n=Wb,a=tn,s,l=vn(30),u,c,d,Ct,ar,en=1;t==null&&(t=[]);function tn(Rn){return 1/Math.min(d[Rn.source.index],d[Rn.target.index])}function on(Rn){for(var ax=0,ox=t.length;ax<en;++ax)for(var sx=0,lx,cx,fx,gx,mx,px,hx;sx<ox;++sx)lx=t[sx],cx=lx.source,fx=lx.target,gx=fx.x+fx.vx-cx.x-cx.vx||Ot(ar),mx=fx.y+fx.vy-cx.y-cx.vy||Ot(ar),px=Math.sqrt(gx*gx+mx*mx),px=(px-u[sx])/px*Rn*s[sx],gx*=px,mx*=px,fx.vx-=gx*(hx=Ct[sx]),fx.vy-=mx*hx,cx.vx+=gx*(hx=1-hx),cx.vy+=mx*hx}function fn(){if(c){var Rn,ax=c.length,ox=t.length,sx=new Map(c.map((cx,fx)=>[n(cx,fx,c),cx])),lx;for(Rn=0,d=new Array(ax);Rn<ox;++Rn)lx=t[Rn],lx.index=Rn,typeof lx.source!="object"&&(lx.source=bs(sx,lx.source)),typeof lx.target!="object"&&(lx.target=bs(sx,lx.target)),d[lx.source.index]=(d[lx.source.index]||0)+1,d[lx.target.index]=(d[lx.target.index]||0)+1;for(Rn=0,Ct=new Array(ox);Rn<ox;++Rn)lx=t[Rn],Ct[Rn]=d[lx.source.index]/(d[lx.source.index]+d[lx.target.index]);s=new Array(ox),dn(),u=new Array(ox),Cn()}}function dn(){if(c)for(var Rn=0,ax=t.length;Rn<ax;++Rn)s[Rn]=+a(t[Rn],Rn,t)}function Cn(){if(c)for(var Rn=0,ax=t.length;Rn<ax;++Rn)u[Rn]=+l(t[Rn],Rn,t)}return on.initialize=function(Rn,ax){c=Rn,ar=ax,fn()},on.links=function(Rn){return arguments.length?(t=Rn,fn(),on):t},on.id=function(Rn){return arguments.length?(n=Rn,on):n},on.iterations=function(Rn){return arguments.length?(en=+Rn,on):en},on.strength=function(Rn){return arguments.length?(a=typeof Rn=="function"?Rn:vn(+Rn),dn(),on):a},on.distance=function(Rn){return arguments.length?(l=typeof Rn=="function"?Rn:vn(+Rn),Cn(),on):l},on}const Gb=1664525,Zb=1013904223,ws=4294967296;function Qb(){let t=1;return()=>(t=(Gb*t+Zb)%ws)/ws}function Kb(t){return t.x}function Jb(t){return t.y}var nw=10,tw=Math.PI*(3-Math.sqrt(5));function ew(t){var n,a=1,s=.001,l=1-Math.pow(s,1/300),u=0,c=.6,d=new Map,Ct=Qo(tn),ar=pe$1("tick","end"),en=Qb();t==null&&(t=[]);function tn(){on(),ar.call("tick",n),a<s&&(Ct.stop(),ar.call("end",n))}function on(Cn){var Rn,ax=t.length,ox;Cn===void 0&&(Cn=1);for(var sx=0;sx<Cn;++sx)for(a+=(u-a)*l,d.forEach(function(lx){lx(a)}),Rn=0;Rn<ax;++Rn)ox=t[Rn],ox.fx==null?ox.x+=ox.vx*=c:(ox.x=ox.fx,ox.vx=0),ox.fy==null?ox.y+=ox.vy*=c:(ox.y=ox.fy,ox.vy=0);return n}function fn(){for(var Cn=0,Rn=t.length,ax;Cn<Rn;++Cn){if(ax=t[Cn],ax.index=Cn,ax.fx!=null&&(ax.x=ax.fx),ax.fy!=null&&(ax.y=ax.fy),isNaN(ax.x)||isNaN(ax.y)){var ox=nw*Math.sqrt(.5+Cn),sx=Cn*tw;ax.x=ox*Math.cos(sx),ax.y=ox*Math.sin(sx)}(isNaN(ax.vx)||isNaN(ax.vy))&&(ax.vx=ax.vy=0)}}function dn(Cn){return Cn.initialize&&Cn.initialize(t,en),Cn}return fn(),n={tick:on,restart:function(){return Ct.restart(tn),n},stop:function(){return Ct.stop(),n},nodes:function(Cn){return arguments.length?(t=Cn,fn(),d.forEach(dn),n):t},alpha:function(Cn){return arguments.length?(a=+Cn,n):a},alphaMin:function(Cn){return arguments.length?(s=+Cn,n):s},alphaDecay:function(Cn){return arguments.length?(l=+Cn,n):+l},alphaTarget:function(Cn){return arguments.length?(u=+Cn,n):u},velocityDecay:function(Cn){return arguments.length?(c=1-Cn,n):1-c},randomSource:function(Cn){return arguments.length?(en=Cn,d.forEach(dn),n):en},force:function(Cn,Rn){return arguments.length>1?(Rn==null?d.delete(Cn):d.set(Cn,dn(Rn)),n):d.get(Cn)},find:function(Cn,Rn,ax){var ox=0,sx=t.length,lx,cx,fx,gx,mx;for(ax==null?ax=1/0:ax*=ax,ox=0;ox<sx;++ox)gx=t[ox],lx=Cn-gx.x,cx=Rn-gx.y,fx=lx*lx+cx*cx,fx<ax&&(mx=gx,ax=fx);return mx},on:function(Cn,Rn){return arguments.length>1?(ar.on(Cn,Rn),n):ar.on(Cn)}}}function rw(){var t,n,a,s,l=vn(-30),u,c=1,d=1/0,Ct=.81;function ar(fn){var dn,Cn=t.length,Rn=ea(t,Kb,Jb).visitAfter(tn);for(s=fn,dn=0;dn<Cn;++dn)n=t[dn],Rn.visit(on)}function en(){if(t){var fn,dn=t.length,Cn;for(u=new Array(dn),fn=0;fn<dn;++fn)Cn=t[fn],u[Cn.index]=+l(Cn,fn,t)}}function tn(fn){var dn=0,Cn,Rn,ax=0,ox,sx,lx;if(fn.length){for(ox=sx=lx=0;lx<4;++lx)(Cn=fn[lx])&&(Rn=Math.abs(Cn.value))&&(dn+=Cn.value,ax+=Rn,ox+=Rn*Cn.x,sx+=Rn*Cn.y);fn.x=ox/ax,fn.y=sx/ax}else{Cn=fn,Cn.x=Cn.data.x,Cn.y=Cn.data.y;do dn+=u[Cn.data.index];while(Cn=Cn.next)}fn.value=dn}function on(fn,dn,Cn,Rn){if(!fn.value)return!0;var ax=fn.x-n.x,ox=fn.y-n.y,sx=Rn-dn,lx=ax*ax+ox*ox;if(sx*sx/Ct<lx)return lx<d&&(ax===0&&(ax=Ot(a),lx+=ax*ax),ox===0&&(ox=Ot(a),lx+=ox*ox),lx<c&&(lx=Math.sqrt(c*lx)),n.vx+=ax*fn.value*s/lx,n.vy+=ox*fn.value*s/lx),!0;if(!(fn.length||lx>=d)){(fn.data!==n||fn.next)&&(ax===0&&(ax=Ot(a),lx+=ax*ax),ox===0&&(ox=Ot(a),lx+=ox*ox),lx<c&&(lx=Math.sqrt(c*lx)));do fn.data!==n&&(sx=u[fn.data.index]*s/lx,n.vx+=ax*sx,n.vy+=ox*sx);while(fn=fn.next)}}return ar.initialize=function(fn,dn){t=fn,a=dn,en()},ar.strength=function(fn){return arguments.length?(l=typeof fn=="function"?fn:vn(+fn),en(),ar):l},ar.distanceMin=function(fn){return arguments.length?(c=fn*fn,ar):Math.sqrt(c)},ar.distanceMax=function(fn){return arguments.length?(d=fn*fn,ar):Math.sqrt(d)},ar.theta=function(fn){return arguments.length?(Ct=fn*fn,ar):Math.sqrt(Ct)},ar}function iw(t,n,a){var s,l=vn(.1),u,c;typeof t!="function"&&(t=vn(+t)),n==null&&(n=0),a==null&&(a=0);function d(ar){for(var en=0,tn=s.length;en<tn;++en){var on=s[en],fn=on.x-n||1e-6,dn=on.y-a||1e-6,Cn=Math.sqrt(fn*fn+dn*dn),Rn=(c[en]-Cn)*u[en]*ar/Cn;on.vx+=fn*Rn,on.vy+=dn*Rn}}function Ct(){if(s){var ar,en=s.length;for(u=new Array(en),c=new Array(en),ar=0;ar<en;++ar)c[ar]=+t(s[ar],ar,s),u[ar]=isNaN(c[ar])?0:+l(s[ar],ar,s)}}return d.initialize=function(ar){s=ar,Ct()},d.strength=function(ar){return arguments.length?(l=typeof ar=="function"?ar:vn(+ar),Ct(),d):l},d.radius=function(ar){return arguments.length?(t=typeof ar=="function"?ar:vn(+ar),Ct(),d):t},d.x=function(ar){return arguments.length?(n=+ar,d):n},d.y=function(ar){return arguments.length?(a=+ar,d):a},d}function ow(t){var n=vn(.1),a,s,l;typeof t!="function"&&(t=vn(t==null?0:+t));function u(d){for(var Ct=0,ar=a.length,en;Ct<ar;++Ct)en=a[Ct],en.vx+=(l[Ct]-en.x)*s[Ct]*d}function c(){if(a){var d,Ct=a.length;for(s=new Array(Ct),l=new Array(Ct),d=0;d<Ct;++d)s[d]=isNaN(l[d]=+t(a[d],d,a))?0:+n(a[d],d,a)}}return u.initialize=function(d){a=d,c()},u.strength=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),c(),u):n},u.x=function(d){return arguments.length?(t=typeof d=="function"?d:vn(+d),c(),u):t},u}function aw(t){var n=vn(.1),a,s,l;typeof t!="function"&&(t=vn(t==null?0:+t));function u(d){for(var Ct=0,ar=a.length,en;Ct<ar;++Ct)en=a[Ct],en.vy+=(l[Ct]-en.y)*s[Ct]*d}function c(){if(a){var d,Ct=a.length;for(s=new Array(Ct),l=new Array(Ct),d=0;d<Ct;++d)s[d]=isNaN(l[d]=+t(a[d],d,a))?0:+n(a[d],d,a)}}return u.initialize=function(d){a=d,c()},u.strength=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),c(),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:vn(+d),c(),u):t},u}function uw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function oo(t,n){if((a=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var a,s=t.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+t.slice(a+1)]}function je(t){return t=oo(Math.abs(t)),t?t[1]:NaN}function cw(t,n){return function(a,s){for(var l=a.length,u=[],c=0,d=t[0],Ct=0;l>0&&d>0&&(Ct+d+1>s&&(d=Math.max(1,s-Ct)),u.push(a.substring(l-=d,l+d)),!((Ct+=d+1)>s));)d=t[c=(c+1)%t.length];return u.reverse().join(n)}}function fw(t){return function(n){return n.replace(/[0-9]/g,function(a){return t[+a]})}}var sw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function We(t){if(!(n=sw.exec(t)))throw new Error("invalid format: "+t);var n;return new ra({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}We.prototype=ra.prototype;function ra(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lw(t){e:for(var n=t.length,a=1,s=-1,l;a<n;++a)switch(t[a]){case".":s=l=a;break;case"0":s===0&&(s=a),l=a;break;default:if(!+t[a])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(l+1):t}var A0;function hw(t,n){var a=oo(t,n);if(!a)return t+"";var s=a[0],l=a[1],u=l-(A0=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,c=s.length;return u===c?s:u>c?s+new Array(u-c+1).join("0"):u>0?s.slice(0,u)+"."+s.slice(u):"0."+new Array(1-u).join("0")+oo(t,Math.max(0,n+u-1))[0]}function xs(t,n){var a=oo(t,n);if(!a)return t+"";var s=a[0],l=a[1];return l<0?"0."+new Array(-l).join("0")+s:s.length>l+1?s.slice(0,l+1)+"."+s.slice(l+1):s+new Array(l-s.length+2).join("0")}const Ms={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uw,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>xs(t*100,n),r:xs,s:hw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $s(t){return t}var Ts=Array.prototype.map,As=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E0(t){var n=t.grouping===void 0||t.thousands===void 0?$s:cw(Ts.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",l=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?$s:fw(Ts.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"":t.minus+"",Ct=t.nan===void 0?"NaN":t.nan+"";function ar(tn){tn=We(tn);var on=tn.fill,fn=tn.align,dn=tn.sign,Cn=tn.symbol,Rn=tn.zero,ax=tn.width,ox=tn.comma,sx=tn.precision,lx=tn.trim,cx=tn.type;cx==="n"?(ox=!0,cx="g"):Ms[cx]||(sx===void 0&&(sx=12),lx=!0,cx="g"),(Rn||on==="0"&&fn==="=")&&(Rn=!0,on="0",fn="=");var fx=Cn==="$"?a:Cn==="#"&&/[boxX]/.test(cx)?"0"+cx.toLowerCase():"",gx=Cn==="$"?s:/[%p]/.test(cx)?c:"",mx=Ms[cx],px=/[defgprs%]/.test(cx);sx=sx===void 0?6:/[gprs]/.test(cx)?Math.max(1,Math.min(21,sx)):Math.max(0,Math.min(20,sx));function hx(vx){var yx=fx,Sx=gx,_x,Ex,bx;if(cx==="c")Sx=mx(vx)+Sx,vx="";else{vx=+vx;var Ax=vx<0||1/vx<0;if(vx=isNaN(vx)?Ct:mx(Math.abs(vx),sx),lx&&(vx=lw(vx)),Ax&&+vx==0&&dn!=="+"&&(Ax=!1),yx=(Ax?dn==="("?dn:d:dn==="-"||dn==="("?"":dn)+yx,Sx=(cx==="s"?As[8+A0/3]:"")+Sx+(Ax&&dn==="("?")":""),px){for(_x=-1,Ex=vx.length;++_x<Ex;)if(bx=vx.charCodeAt(_x),48>bx||bx>57){Sx=(bx===46?l+vx.slice(_x+1):vx.slice(_x))+Sx,vx=vx.slice(0,_x);break}}}ox&&!Rn&&(vx=n(vx,1/0));var Mx=yx.length+vx.length+Sx.length,Rx=Mx<ax?new Array(ax-Mx+1).join(on):"";switch(ox&&Rn&&(vx=n(Rx+vx,Rx.length?ax-Sx.length:1/0),Rx=""),fn){case"<":vx=yx+vx+Sx+Rx;break;case"=":vx=yx+Rx+vx+Sx;break;case"^":vx=Rx.slice(0,Mx=Rx.length>>1)+yx+vx+Sx+Rx.slice(Mx);break;default:vx=Rx+yx+vx+Sx;break}return u(vx)}return hx.toString=function(){return tn+""},hx}function en(tn,on){var fn=ar((tn=We(tn),tn.type="f",tn)),dn=Math.max(-8,Math.min(8,Math.floor(je(on)/3)))*3,Cn=Math.pow(10,-dn),Rn=As[8+dn/3];return function(ax){return fn(Cn*ax)+Rn}}return{format:ar,formatPrefix:en}}var bi,ia,Yc;k0({thousands:",",grouping:[3],currency:["$",""]});function k0(t){return bi=E0(t),ia=bi.format,Yc=bi.formatPrefix,bi}function S0(t){return Math.max(0,-je(Math.abs(t)))}function N0(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(je(n)/3)))*3-je(Math.abs(t)))}function I0(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,je(n)-je(t))+1}var U$1=1e-6,Hr=1e-12,K$1=Math.PI,mn=K$1/2,ao=K$1/4,Ln=K$1*2,an=180/K$1,H$1=K$1/180,nn=Math.abs,ir=Math.atan,Bn=Math.atan2,B$1=Math.cos,wi=Math.ceil,R0=Math.exp,Cu=Math.hypot,uo=Math.log,ja=Math.pow,q$1=Math.sin,nt=Math.sign||function(t){return t>0?1:t<0?-1:0},$n=Math.sqrt,Fc=Math.tan;function C0(t){return t>1?0:t<-1?K$1:Math.acos(t)}function Un(t){return t>1?mn:t<-1?-mn:Math.asin(t)}function Es(t){return(t=q$1(t/2))*t}function ln(){}function co(t,n){t&&Ss.hasOwnProperty(t.type)&&Ss[t.type](t,n)}var ks={Feature:function(t,n){co(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,s=-1,l=a.length;++s<l;)co(a[s].geometry,n)}},Ss={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)t=a[s],n.point(t[0],t[1],t[2])},LineString:function(t,n){Pu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)Pu(a[s],n,0)},Polygon:function(t,n){Ns(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)Ns(a[s],n)},GeometryCollection:function(t,n){for(var a=t.geometries,s=-1,l=a.length;++s<l;)co(a[s],n)}};function Pu(t,n,a){var s=-1,l=t.length-a,u;for(n.lineStart();++s<l;)u=t[s],n.point(u[0],u[1],u[2]);n.lineEnd()}function Ns(t,n){var a=-1,s=t.length;for(n.polygonStart();++a<s;)Pu(t[a],n,1);n.polygonEnd()}function it(t,n){t&&ks.hasOwnProperty(t.type)?ks[t.type](t,n):co(t,n)}var fo=new bn,so=new bn,P0,D0,Du,zu,Ou,pt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){fo=new bn,pt.lineStart=dw,pt.lineEnd=gw},polygonEnd:function(){var t=+fo;so.add(t<0?Ln+t:t),this.lineStart=this.lineEnd=this.point=ln},sphere:function(){so.add(Ln)}};function dw(){pt.point=pw}function gw(){z0(P0,D0)}function pw(t,n){pt.point=z0,P0=t,D0=n,t*=H$1,n*=H$1,Du=t,zu=B$1(n=n/2+ao),Ou=q$1(n)}function z0(t,n){t*=H$1,n*=H$1,n=n/2+ao;var a=t-Du,s=a>=0?1:-1,l=s*a,u=B$1(n),c=q$1(n),d=Ou*c,Ct=zu*u+d*B$1(l),ar=d*s*q$1(l);fo.add(Bn(ar,Ct)),Du=t,zu=u,Ou=c}function mw(t){return so=new bn,it(t,pt),so*2}function lo(t){return[Bn(t[1],t[0]),Un(t[2])]}function se$1(t){var n=t[0],a=t[1],s=B$1(a);return[s*B$1(n),s*q$1(n),q$1(a)]}function xi(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ve(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Wa(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Mi(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ho(t){var n=$n(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var sn,Wn,pn,Gn,Qt,O0,Y0,Ye,Sr,Dt,Nt,$t={point:Yu,lineStart:Is,lineEnd:Rs,polygonStart:function(){$t.point=q0,$t.lineStart=yw,$t.lineEnd=_w,Sr=new bn,pt.polygonStart()},polygonEnd:function(){pt.polygonEnd(),$t.point=Yu,$t.lineStart=Is,$t.lineEnd=Rs,fo<0?(sn=-(pn=180),Wn=-(Gn=90)):Sr>U$1?Gn=90:Sr<-U$1&&(Wn=-90),Nt[0]=sn,Nt[1]=pn},sphere:function(){sn=-(pn=180),Wn=-(Gn=90)}};function Yu(t,n){Dt.push(Nt=[sn=t,pn=t]),n<Wn&&(Wn=n),n>Gn&&(Gn=n)}function F0(t,n){var a=se$1([t*H$1,n*H$1]);if(Ye){var s=Ve(Ye,a),l=[s[1],-s[0],0],u=Ve(l,s);ho(u),u=lo(u);var c=t-Qt,d=c>0?1:-1,Ct=u[0]*an*d,ar,en=nn(c)>180;en^(d*Qt<Ct&&Ct<d*t)?(ar=u[1]*an,ar>Gn&&(Gn=ar)):(Ct=(Ct+360)%360-180,en^(d*Qt<Ct&&Ct<d*t)?(ar=-u[1]*an,ar<Wn&&(Wn=ar)):(n<Wn&&(Wn=n),n>Gn&&(Gn=n))),en?t<Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t):pn>=sn?(t<sn&&(sn=t),t>pn&&(pn=t)):t>Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t)}else Dt.push(Nt=[sn=t,pn=t]);n<Wn&&(Wn=n),n>Gn&&(Gn=n),Ye=a,Qt=t}function Is(){$t.point=F0}function Rs(){Nt[0]=sn,Nt[1]=pn,$t.point=Yu,Ye=null}function q0(t,n){if(Ye){var a=t-Qt;Sr.add(nn(a)>180?a+(a>0?360:-360):a)}else O0=t,Y0=n;pt.point(t,n),F0(t,n)}function yw(){pt.lineStart()}function _w(){q0(O0,Y0),pt.lineEnd(),nn(Sr)>U$1&&(sn=-(pn=180)),Nt[0]=sn,Nt[1]=pn,Ye=null}function Vn(t,n){return(n-=t)<0?n+360:n}function vw(t,n){return t[0]-n[0]}function Cs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function bw(t){var n,a,s,l,u,c,d;if(Gn=pn=-(sn=Wn=1/0),Dt=[],it(t,$t),a=Dt.length){for(Dt.sort(vw),n=1,s=Dt[0],u=[s];n<a;++n)l=Dt[n],Cs(s,l[0])||Cs(s,l[1])?(Vn(s[0],l[1])>Vn(s[0],s[1])&&(s[1]=l[1]),Vn(l[0],s[1])>Vn(s[0],s[1])&&(s[0]=l[0])):u.push(s=l);for(c=-1/0,a=u.length-1,n=0,s=u[a];n<=a;s=l,++n)l=u[n],(d=Vn(s[1],l[0]))>c&&(c=d,sn=l[0],pn=s[1])}return Dt=Nt=null,sn===1/0||Wn===1/0?[[NaN,NaN],[NaN,NaN]]:[[sn,Wn],[pn,Gn]]}var vr,go,po,mo,yo,_o,vo,bo,Fu,qu,Lu,L0,B0,Dn,zn,On,ot={sphere:ln,point:qc,lineStart:Ps,lineEnd:Ds,polygonStart:function(){ot.lineStart=Mw,ot.lineEnd=$w},polygonEnd:function(){ot.lineStart=Ps,ot.lineEnd=Ds}};function qc(t,n){t*=H$1,n*=H$1;var a=B$1(n);ri(a*B$1(t),a*q$1(t),q$1(n))}function ri(t,n,a){++vr,po+=(t-po)/vr,mo+=(n-mo)/vr,yo+=(a-yo)/vr}function Ps(){ot.point=ww}function ww(t,n){t*=H$1,n*=H$1;var a=B$1(n);Dn=a*B$1(t),zn=a*q$1(t),On=q$1(n),ot.point=xw,ri(Dn,zn,On)}function xw(t,n){t*=H$1,n*=H$1;var a=B$1(n),s=a*B$1(t),l=a*q$1(t),u=q$1(n),c=Bn($n((c=zn*u-On*l)*c+(c=On*s-Dn*u)*c+(c=Dn*l-zn*s)*c),Dn*s+zn*l+On*u);go+=c,_o+=c*(Dn+(Dn=s)),vo+=c*(zn+(zn=l)),bo+=c*(On+(On=u)),ri(Dn,zn,On)}function Ds(){ot.point=qc}function Mw(){ot.point=Tw}function $w(){U0(L0,B0),ot.point=qc}function Tw(t,n){L0=t,B0=n,t*=H$1,n*=H$1,ot.point=U0;var a=B$1(n);Dn=a*B$1(t),zn=a*q$1(t),On=q$1(n),ri(Dn,zn,On)}function U0(t,n){t*=H$1,n*=H$1;var a=B$1(n),s=a*B$1(t),l=a*q$1(t),u=q$1(n),c=zn*u-On*l,d=On*s-Dn*u,Ct=Dn*l-zn*s,ar=Cu(c,d,Ct),en=Un(ar),tn=ar&&-en/ar;Fu.add(tn*c),qu.add(tn*d),Lu.add(tn*Ct),go+=en,_o+=en*(Dn+(Dn=s)),vo+=en*(zn+(zn=l)),bo+=en*(On+(On=u)),ri(Dn,zn,On)}function Aw(t){vr=go=po=mo=yo=_o=vo=bo=0,Fu=new bn,qu=new bn,Lu=new bn,it(t,ot);var n=+Fu,a=+qu,s=+Lu,l=Cu(n,a,s);return l<Hr&&(n=_o,a=vo,s=bo,go<U$1&&(n=po,a=mo,s=yo),l=Cu(n,a,s),l<Hr)?[NaN,NaN]:[Bn(a,n)*an,Un(s/l)*an]}function Se$1(t){return function(){return t}}function Bu(t,n){function a(s,l){return s=t(s,l),n(s[0],s[1])}return t.invert&&n.invert&&(a.invert=function(s,l){return s=n.invert(s,l),s&&t.invert(s[0],s[1])}),a}function Uu(t,n){return nn(t)>K$1&&(t-=Math.round(t/Ln)*Ln),[t,n]}Uu.invert=Uu;function Lc(t,n,a){return(t%=Ln)?n||a?Bu(Os(t),Ys(n,a)):Os(t):n||a?Ys(n,a):Uu}function zs(t){return function(n,a){return n+=t,nn(n)>K$1&&(n-=Math.round(n/Ln)*Ln),[n,a]}}function Os(t){var n=zs(t);return n.invert=zs(-t),n}function Ys(t,n){var a=B$1(t),s=q$1(t),l=B$1(n),u=q$1(n);function c(d,Ct){var ar=B$1(Ct),en=B$1(d)*ar,tn=q$1(d)*ar,on=q$1(Ct),fn=on*a+en*s;return[Bn(tn*l-fn*u,en*a-on*s),Un(fn*l+tn*u)]}return c.invert=function(d,Ct){var ar=B$1(Ct),en=B$1(d)*ar,tn=q$1(d)*ar,on=q$1(Ct),fn=on*l-tn*u;return[Bn(tn*l+on*u,en*a+fn*s),Un(fn*a-en*s)]},c}function X0(t){t=Lc(t[0]*H$1,t[1]*H$1,t.length>2?t[2]*H$1:0);function n(a){return a=t(a[0]*H$1,a[1]*H$1),a[0]*=an,a[1]*=an,a}return n.invert=function(a){return a=t.invert(a[0]*H$1,a[1]*H$1),a[0]*=an,a[1]*=an,a},n}function H0(t,n,a,s,l,u){if(a){var c=B$1(n),d=q$1(n),Ct=s*a;l==null?(l=n+s*Ln,u=n-Ct/2):(l=Fs(c,l),u=Fs(c,u),(s>0?l<u:l>u)&&(l+=s*Ln));for(var ar,en=l;s>0?en>u:en<u;en-=Ct)ar=lo([c,-d*B$1(en),-d*q$1(en)]),t.point(ar[0],ar[1])}}function Fs(t,n){n=se$1(n),n[0]-=t,ho(n);var a=C0(-n[1]);return((-n[2]<0?-a:a)+Ln-U$1)%Ln}function Ew(){var t=Se$1([0,0]),n=Se$1(90),a=Se$1(2),s,l,u={point:c};function c(Ct,ar){s.push(Ct=l(Ct,ar)),Ct[0]*=an,Ct[1]*=an}function d(){var Ct=t.apply(this,arguments),ar=n.apply(this,arguments)*H$1,en=a.apply(this,arguments)*H$1;return s=[],l=Lc(-Ct[0]*H$1,-Ct[1]*H$1,0).invert,H0(u,ar,en,1),Ct={type:"Polygon",coordinates:[s]},s=l=null,Ct}return d.center=function(Ct){return arguments.length?(t=typeof Ct=="function"?Ct:Se$1([+Ct[0],+Ct[1]]),d):t},d.radius=function(Ct){return arguments.length?(n=typeof Ct=="function"?Ct:Se$1(+Ct),d):n},d.precision=function(Ct){return arguments.length?(a=typeof Ct=="function"?Ct:Se$1(+Ct),d):a},d}function j0(){var t=[],n;return{point:function(a,s,l){n.push([a,s,l])},lineStart:function(){t.push(n=[])},lineEnd:ln,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var a=t;return t=[],n=null,a}}}function Li(t,n){return nn(t[0]-n[0])<U$1&&nn(t[1]-n[1])<U$1}function $i(t,n,a,s){this.x=t,this.z=n,this.o=a,this.e=s,this.v=!1,this.n=this.p=null}function W0(t,n,a,s,l){var u=[],c=[],d,Ct;if(t.forEach(function(dn){if(!((Cn=dn.length-1)<=0)){var Cn,Rn=dn[0],ax=dn[Cn],ox;if(Li(Rn,ax)){if(!Rn[2]&&!ax[2]){for(l.lineStart(),d=0;d<Cn;++d)l.point((Rn=dn[d])[0],Rn[1]);l.lineEnd();return}ax[0]+=2*U$1}u.push(ox=new $i(Rn,dn,null,!0)),c.push(ox.o=new $i(Rn,null,ox,!1)),u.push(ox=new $i(ax,dn,null,!1)),c.push(ox.o=new $i(ax,null,ox,!0))}}),!!u.length){for(c.sort(n),qs(u),qs(c),d=0,Ct=c.length;d<Ct;++d)c[d].e=a=!a;for(var ar=u[0],en,tn;;){for(var on=ar,fn=!0;on.v;)if((on=on.n)===ar)return;en=on.z,l.lineStart();do{if(on.v=on.o.v=!0,on.e){if(fn)for(d=0,Ct=en.length;d<Ct;++d)l.point((tn=en[d])[0],tn[1]);else s(on.x,on.n.x,1,l);on=on.n}else{if(fn)for(en=on.p.z,d=en.length-1;d>=0;--d)l.point((tn=en[d])[0],tn[1]);else s(on.x,on.p.x,-1,l);on=on.p}on=on.o,en=on.z,fn=!fn}while(!on.v);l.lineEnd()}}}function qs(t){if(n=t.length){for(var n,a=0,s=t[0],l;++a<n;)s.n=l=t[a],l.p=s,s=l;s.n=l=t[0],l.p=s}}function Va(t){return nn(t[0])<=K$1?t[0]:nt(t[0])*((nn(t[0])+K$1)%Ln-K$1)}function V0(t,n){var a=Va(n),s=n[1],l=q$1(s),u=[q$1(a),-B$1(a),0],c=0,d=0,Ct=new bn;l===1?s=mn+U$1:l===-1&&(s=-mn-U$1);for(var ar=0,en=t.length;ar<en;++ar)if(on=(tn=t[ar]).length)for(var tn,on,fn=tn[on-1],dn=Va(fn),Cn=fn[1]/2+ao,Rn=q$1(Cn),ax=B$1(Cn),ox=0;ox<on;++ox,dn=lx,Rn=fx,ax=gx,fn=sx){var sx=tn[ox],lx=Va(sx),cx=sx[1]/2+ao,fx=q$1(cx),gx=B$1(cx),mx=lx-dn,px=mx>=0?1:-1,hx=px*mx,vx=hx>K$1,yx=Rn*fx;if(Ct.add(Bn(yx*px*q$1(hx),ax*gx+yx*B$1(hx))),c+=vx?mx+px*Ln:mx,vx^dn>=a^lx>=a){var Sx=Ve(se$1(fn),se$1(sx));ho(Sx);var _x=Ve(u,Sx);ho(_x);var Ex=(vx^mx>=0?-1:1)*Un(_x[2]);(s>Ex||s===Ex&&(Sx[0]||Sx[1]))&&(d+=vx^mx>=0?1:-1)}}return(c<-U$1||c<U$1&&Ct<-Hr)^d&1}function G0(t,n,a,s){return function(l){var u=n(l),c=j0(),d=n(c),Ct=!1,ar,en,tn,on={point:fn,lineStart:Cn,lineEnd:Rn,polygonStart:function(){on.point=ax,on.lineStart=ox,on.lineEnd=sx,en=[],ar=[]},polygonEnd:function(){on.point=fn,on.lineStart=Cn,on.lineEnd=Rn,en=mc(en);var lx=V0(ar,s);en.length?(Ct||(l.polygonStart(),Ct=!0),W0(en,Sw,lx,a,l)):lx&&(Ct||(l.polygonStart(),Ct=!0),l.lineStart(),a(null,null,1,l),l.lineEnd()),Ct&&(l.polygonEnd(),Ct=!1),en=ar=null},sphere:function(){l.polygonStart(),l.lineStart(),a(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function fn(lx,cx){t(lx,cx)&&l.point(lx,cx)}function dn(lx,cx){u.point(lx,cx)}function Cn(){on.point=dn,u.lineStart()}function Rn(){on.point=fn,u.lineEnd()}function ax(lx,cx){tn.push([lx,cx]),d.point(lx,cx)}function ox(){d.lineStart(),tn=[]}function sx(){ax(tn[0][0],tn[0][1]),d.lineEnd();var lx=d.clean(),cx=c.result(),fx,gx=cx.length,mx,px,hx;if(tn.pop(),ar.push(tn),tn=null,!!gx){if(lx&1){if(px=cx[0],(mx=px.length-1)>0){for(Ct||(l.polygonStart(),Ct=!0),l.lineStart(),fx=0;fx<mx;++fx)l.point((hx=px[fx])[0],hx[1]);l.lineEnd()}return}gx>1&&lx&2&&cx.push(cx.pop().concat(cx.shift())),en.push(cx.filter(kw))}}return on}}function kw(t){return t.length>1}function Sw(t,n){return((t=t.x)[0]<0?t[1]-mn-U$1:mn-t[1])-((n=n.x)[0]<0?n[1]-mn-U$1:mn-n[1])}const Xu=G0(function(){return!0},Nw,Rw,[-K$1,-mn]);function Nw(t){var n=NaN,a=NaN,s=NaN,l;return{lineStart:function(){t.lineStart(),l=1},point:function(u,c){var d=u>0?K$1:-K$1,Ct=nn(u-n);nn(Ct-K$1)<U$1?(t.point(n,a=(a+c)/2>0?mn:-mn),t.point(s,a),t.lineEnd(),t.lineStart(),t.point(d,a),t.point(u,a),l=0):s!==d&&Ct>=K$1&&(nn(n-s)<U$1&&(n-=s*U$1),nn(u-d)<U$1&&(u-=d*U$1),a=Iw(n,a,u,c),t.point(s,a),t.lineEnd(),t.lineStart(),t.point(d,a),l=0),t.point(n=u,a=c),s=d},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-l}}}function Iw(t,n,a,s){var l,u,c=q$1(t-a);return nn(c)>U$1?ir((q$1(n)*(u=B$1(s))*q$1(a)-q$1(s)*(l=B$1(n))*q$1(t))/(l*u*c)):(n+s)/2}function Rw(t,n,a,s){var l;if(t==null)l=a*mn,s.point(-K$1,l),s.point(0,l),s.point(K$1,l),s.point(K$1,0),s.point(K$1,-l),s.point(0,-l),s.point(-K$1,-l),s.point(-K$1,0),s.point(-K$1,l);else if(nn(t[0]-n[0])>U$1){var u=t[0]<n[0]?K$1:-K$1;l=a*u/2,s.point(-u,l),s.point(0,l),s.point(u,l)}else s.point(n[0],n[1])}function Z0(t){var n=B$1(t),a=2*H$1,s=n>0,l=nn(n)>U$1;function u(en,tn,on,fn){H0(fn,t,a,on,en,tn)}function c(en,tn){return B$1(en)*B$1(tn)>n}function d(en){var tn,on,fn,dn,Cn;return{lineStart:function(){dn=fn=!1,Cn=1},point:function(Rn,ax){var ox=[Rn,ax],sx,lx=c(Rn,ax),cx=s?lx?0:ar(Rn,ax):lx?ar(Rn+(Rn<0?K$1:-K$1),ax):0;if(!tn&&(dn=fn=lx)&&en.lineStart(),lx!==fn&&(sx=Ct(tn,ox),(!sx||Li(tn,sx)||Li(ox,sx))&&(ox[2]=1)),lx!==fn)Cn=0,lx?(en.lineStart(),sx=Ct(ox,tn),en.point(sx[0],sx[1])):(sx=Ct(tn,ox),en.point(sx[0],sx[1],2),en.lineEnd()),tn=sx;else if(l&&tn&&s^lx){var fx;!(cx&on)&&(fx=Ct(ox,tn,!0))&&(Cn=0,s?(en.lineStart(),en.point(fx[0][0],fx[0][1]),en.point(fx[1][0],fx[1][1]),en.lineEnd()):(en.point(fx[1][0],fx[1][1]),en.lineEnd(),en.lineStart(),en.point(fx[0][0],fx[0][1],3)))}lx&&(!tn||!Li(tn,ox))&&en.point(ox[0],ox[1]),tn=ox,fn=lx,on=cx},lineEnd:function(){fn&&en.lineEnd(),tn=null},clean:function(){return Cn|(dn&&fn)<<1}}}function Ct(en,tn,on){var fn=se$1(en),dn=se$1(tn),Cn=[1,0,0],Rn=Ve(fn,dn),ax=xi(Rn,Rn),ox=Rn[0],sx=ax-ox*ox;if(!sx)return!on&&en;var lx=n*ax/sx,cx=-n*ox/sx,fx=Ve(Cn,Rn),gx=Mi(Cn,lx),mx=Mi(Rn,cx);Wa(gx,mx);var px=fx,hx=xi(gx,px),vx=xi(px,px),yx=hx*hx-vx*(xi(gx,gx)-1);if(!(yx<0)){var Sx=$n(yx),_x=Mi(px,(-hx-Sx)/vx);if(Wa(_x,gx),_x=lo(_x),!on)return _x;var Ex=en[0],bx=tn[0],Ax=en[1],Mx=tn[1],Rx;bx<Ex&&(Rx=Ex,Ex=bx,bx=Rx);var Cx=bx-Ex,Lx=nn(Cx-K$1)<U$1,qx=Lx||Cx<U$1;if(!Lx&&Mx<Ax&&(Rx=Ax,Ax=Mx,Mx=Rx),qx?Lx?Ax+Mx>0^_x[1]<(nn(_x[0]-Ex)<U$1?Ax:Mx):Ax<=_x[1]&&_x[1]<=Mx:Cx>K$1^(Ex<=_x[0]&&_x[0]<=bx)){var Ix=Mi(px,(-hx+Sx)/vx);return Wa(Ix,gx),[_x,lo(Ix)]}}}function ar(en,tn){var on=s?t:K$1-t,fn=0;return en<-on?fn|=1:en>on&&(fn|=2),tn<-on?fn|=4:tn>on&&(fn|=8),fn}return G0(c,d,u,s?[0,-t]:[-K$1,t-K$1])}function Cw(t,n,a,s,l,u){var c=t[0],d=t[1],Ct=n[0],ar=n[1],en=0,tn=1,on=Ct-c,fn=ar-d,dn;if(dn=a-c,!(!on&&dn>0)){if(dn/=on,on<0){if(dn<en)return;dn<tn&&(tn=dn)}else if(on>0){if(dn>tn)return;dn>en&&(en=dn)}if(dn=l-c,!(!on&&dn<0)){if(dn/=on,on<0){if(dn>tn)return;dn>en&&(en=dn)}else if(on>0){if(dn<en)return;dn<tn&&(tn=dn)}if(dn=s-d,!(!fn&&dn>0)){if(dn/=fn,fn<0){if(dn<en)return;dn<tn&&(tn=dn)}else if(fn>0){if(dn>tn)return;dn>en&&(en=dn)}if(dn=u-d,!(!fn&&dn<0)){if(dn/=fn,fn<0){if(dn>tn)return;dn>en&&(en=dn)}else if(fn>0){if(dn<en)return;dn<tn&&(tn=dn)}return en>0&&(t[0]=c+en*on,t[1]=d+en*fn),tn<1&&(n[0]=c+tn*on,n[1]=d+tn*fn),!0}}}}}var br=1e9,Ti=-br;function oa(t,n,a,s){function l(ar,en){return t<=ar&&ar<=a&&n<=en&&en<=s}function u(ar,en,tn,on){var fn=0,dn=0;if(ar==null||(fn=c(ar,tn))!==(dn=c(en,tn))||Ct(ar,en)<0^tn>0)do on.point(fn===0||fn===3?t:a,fn>1?s:n);while((fn=(fn+tn+4)%4)!==dn);else on.point(en[0],en[1])}function c(ar,en){return nn(ar[0]-t)<U$1?en>0?0:3:nn(ar[0]-a)<U$1?en>0?2:1:nn(ar[1]-n)<U$1?en>0?1:0:en>0?3:2}function d(ar,en){return Ct(ar.x,en.x)}function Ct(ar,en){var tn=c(ar,1),on=c(en,1);return tn!==on?tn-on:tn===0?en[1]-ar[1]:tn===1?ar[0]-en[0]:tn===2?ar[1]-en[1]:en[0]-ar[0]}return function(ar){var en=ar,tn=j0(),on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx={point:mx,lineStart:yx,lineEnd:Sx,polygonStart:hx,polygonEnd:vx};function mx(Ex,bx){l(Ex,bx)&&en.point(Ex,bx)}function px(){for(var Ex=0,bx=0,Ax=fn.length;bx<Ax;++bx)for(var Mx=fn[bx],Rx=1,Cx=Mx.length,Lx=Mx[0],qx,Ix,Px=Lx[0],Nx=Lx[1];Rx<Cx;++Rx)qx=Px,Ix=Nx,Lx=Mx[Rx],Px=Lx[0],Nx=Lx[1],Ix<=s?Nx>s&&(Px-qx)*(s-Ix)>(Nx-Ix)*(t-qx)&&++Ex:Nx<=s&&(Px-qx)*(s-Ix)<(Nx-Ix)*(t-qx)&&--Ex;return Ex}function hx(){en=tn,on=[],fn=[],fx=!0}function vx(){var Ex=px(),bx=fx&&Ex,Ax=(on=mc(on)).length;(bx||Ax)&&(ar.polygonStart(),bx&&(ar.lineStart(),u(null,null,1,ar),ar.lineEnd()),Ax&&W0(on,d,Ex,u,ar),ar.polygonEnd()),en=ar,on=fn=dn=null}function yx(){gx.point=_x,fn&&fn.push(dn=[]),cx=!0,lx=!1,ox=sx=NaN}function Sx(){on&&(_x(Cn,Rn),ax&&lx&&tn.rejoin(),on.push(tn.result())),gx.point=mx,lx&&en.lineEnd()}function _x(Ex,bx){var Ax=l(Ex,bx);if(fn&&dn.push([Ex,bx]),cx)Cn=Ex,Rn=bx,ax=Ax,cx=!1,Ax&&(en.lineStart(),en.point(Ex,bx));else if(Ax&&lx)en.point(Ex,bx);else{var Mx=[ox=Math.max(Ti,Math.min(br,ox)),sx=Math.max(Ti,Math.min(br,sx))],Rx=[Ex=Math.max(Ti,Math.min(br,Ex)),bx=Math.max(Ti,Math.min(br,bx))];Cw(Mx,Rx,t,n,a,s)?(lx||(en.lineStart(),en.point(Mx[0],Mx[1])),en.point(Rx[0],Rx[1]),Ax||en.lineEnd(),fx=!1):Ax&&(en.lineStart(),en.point(Ex,bx),fx=!1)}ox=Ex,sx=bx,lx=Ax}return gx}}function Pw(){var t=0,n=0,a=960,s=500,l,u,c;return c={stream:function(d){return l&&u===d?l:l=oa(t,n,a,s)(u=d)},extent:function(d){return arguments.length?(t=+d[0][0],n=+d[0][1],a=+d[1][0],s=+d[1][1],l=u=null,c):[[t,n],[a,s]]}}}var Hu,ju,Bi,Ui,Ge={sphere:ln,point:ln,lineStart:Dw,lineEnd:ln,polygonStart:ln,polygonEnd:ln};function Dw(){Ge.point=Ow,Ge.lineEnd=zw}function zw(){Ge.point=Ge.lineEnd=ln}function Ow(t,n){t*=H$1,n*=H$1,ju=t,Bi=q$1(n),Ui=B$1(n),Ge.point=Yw}function Yw(t,n){t*=H$1,n*=H$1;var a=q$1(n),s=B$1(n),l=nn(t-ju),u=B$1(l),c=q$1(l),d=s*c,Ct=Ui*a-Bi*s*u,ar=Bi*a+Ui*s*u;Hu.add(Bn($n(d*d+Ct*Ct),ar)),ju=t,Bi=a,Ui=s}function Q0(t){return Hu=new bn,it(t,Ge),+Hu}var Wu=[null,null],Fw={type:"LineString",coordinates:Wu};function wo(t,n){return Wu[0]=t,Wu[1]=n,Q0(Fw)}var Ls={Feature:function(t,n){return xo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,s=-1,l=a.length;++s<l;)if(xo(a[s].geometry,n))return!0;return!1}},Bs={Sphere:function(){return!0},Point:function(t,n){return Us(t.coordinates,n)},MultiPoint:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Us(a[s],n))return!0;return!1},LineString:function(t,n){return Xs(t.coordinates,n)},MultiLineString:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Xs(a[s],n))return!0;return!1},Polygon:function(t,n){return Hs(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Hs(a[s],n))return!0;return!1},GeometryCollection:function(t,n){for(var a=t.geometries,s=-1,l=a.length;++s<l;)if(xo(a[s],n))return!0;return!1}};function xo(t,n){return t&&Bs.hasOwnProperty(t.type)?Bs[t.type](t,n):!1}function Us(t,n){return wo(t,n)===0}function Xs(t,n){for(var a,s,l,u=0,c=t.length;u<c;u++){if(s=wo(t[u],n),s===0||u>0&&(l=wo(t[u],t[u-1]),l>0&&a<=l&&s<=l&&(a+s-l)*(1-Math.pow((a-s)/l,2))<Hr*l))return!0;a=s}return!1}function Hs(t,n){return!!V0(t.map(qw),K0(n))}function qw(t){return t=t.map(K0),t.pop(),t}function K0(t){return[t[0]*H$1,t[1]*H$1]}function Lw(t,n){return(t&&Ls.hasOwnProperty(t.type)?Ls[t.type]:xo)(t,n)}function js(t,n,a){var s=zt(t,n-U$1,a).concat(n);return function(l){return s.map(function(u){return[l,u]})}}function Ws(t,n,a){var s=zt(t,n-U$1,a).concat(n);return function(l){return s.map(function(u){return[u,l]})}}function J0(){var t,n,a,s,l,u,c,d,Ct=10,ar=Ct,en=90,tn=360,on,fn,dn,Cn,Rn=2.5;function ax(){return{type:"MultiLineString",coordinates:ox()}}function ox(){return zt(wi(s/en)*en,a,en).map(dn).concat(zt(wi(d/tn)*tn,c,tn).map(Cn)).concat(zt(wi(n/Ct)*Ct,t,Ct).filter(function(sx){return nn(sx%en)>U$1}).map(on)).concat(zt(wi(u/ar)*ar,l,ar).filter(function(sx){return nn(sx%tn)>U$1}).map(fn))}return ax.lines=function(){return ox().map(function(sx){return{type:"LineString",coordinates:sx}})},ax.outline=function(){return{type:"Polygon",coordinates:[dn(s).concat(Cn(c).slice(1),dn(a).reverse().slice(1),Cn(d).reverse().slice(1))]}},ax.extent=function(sx){return arguments.length?ax.extentMajor(sx).extentMinor(sx):ax.extentMinor()},ax.extentMajor=function(sx){return arguments.length?(s=+sx[0][0],a=+sx[1][0],d=+sx[0][1],c=+sx[1][1],s>a&&(sx=s,s=a,a=sx),d>c&&(sx=d,d=c,c=sx),ax.precision(Rn)):[[s,d],[a,c]]},ax.extentMinor=function(sx){return arguments.length?(n=+sx[0][0],t=+sx[1][0],u=+sx[0][1],l=+sx[1][1],n>t&&(sx=n,n=t,t=sx),u>l&&(sx=u,u=l,l=sx),ax.precision(Rn)):[[n,u],[t,l]]},ax.step=function(sx){return arguments.length?ax.stepMajor(sx).stepMinor(sx):ax.stepMinor()},ax.stepMajor=function(sx){return arguments.length?(en=+sx[0],tn=+sx[1],ax):[en,tn]},ax.stepMinor=function(sx){return arguments.length?(Ct=+sx[0],ar=+sx[1],ax):[Ct,ar]},ax.precision=function(sx){return arguments.length?(Rn=+sx,on=js(u,l,90),fn=Ws(n,t,Rn),dn=js(d,c,90),Cn=Ws(s,a,Rn),ax):Rn},ax.extentMajor([[-180,-90+U$1],[180,90-U$1]]).extentMinor([[-180,-80-U$1],[180,80+U$1]])}function Bw(){return J0()()}function Uw(t,n){var a=t[0]*H$1,s=t[1]*H$1,l=n[0]*H$1,u=n[1]*H$1,c=B$1(s),d=q$1(s),Ct=B$1(u),ar=q$1(u),en=c*B$1(a),tn=c*q$1(a),on=Ct*B$1(l),fn=Ct*q$1(l),dn=2*Un($n(Es(u-s)+c*Ct*Es(l-a))),Cn=q$1(dn),Rn=dn?function(ax){var ox=q$1(ax*=dn)/Cn,sx=q$1(dn-ax)/Cn,lx=sx*en+ox*on,cx=sx*tn+ox*fn,fx=sx*d+ox*ar;return[Bn(cx,lx)*an,Bn(fx,$n(lx*lx+cx*cx))*an]}:function(){return[a*an,s*an]};return Rn.distance=dn,Rn}const jr=t=>t;var Ga=new bn,Vu=new bn,n1,t1,Gu,Zu,Tt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){Tt.lineStart=Xw,Tt.lineEnd=jw},polygonEnd:function(){Tt.lineStart=Tt.lineEnd=Tt.point=ln,Ga.add(nn(Vu)),Vu=new bn},result:function(){var t=Ga/2;return Ga=new bn,t}};function Xw(){Tt.point=Hw}function Hw(t,n){Tt.point=e1,n1=Gu=t,t1=Zu=n}function e1(t,n){Vu.add(Zu*t-Gu*n),Gu=t,Zu=n}function jw(){e1(n1,t1)}var Ze=1/0,Mo=Ze,Wr=-Ze,$o=Wr,To={point:Ww,lineStart:ln,lineEnd:ln,polygonStart:ln,polygonEnd:ln,result:function(){var t=[[Ze,Mo],[Wr,$o]];return Wr=$o=-(Mo=Ze=1/0),t}};function Ww(t,n){t<Ze&&(Ze=t),t>Wr&&(Wr=t),n<Mo&&(Mo=n),n>$o&&($o=n)}var Qu=0,Ku=0,wr=0,Ao=0,Eo=0,Ce=0,Ju=0,nc=0,xr=0,r1,i1,ft,st,Jn={point:le$1,lineStart:Vs,lineEnd:Gs,polygonStart:function(){Jn.lineStart=Zw,Jn.lineEnd=Qw},polygonEnd:function(){Jn.point=le$1,Jn.lineStart=Vs,Jn.lineEnd=Gs},result:function(){var t=xr?[Ju/xr,nc/xr]:Ce?[Ao/Ce,Eo/Ce]:wr?[Qu/wr,Ku/wr]:[NaN,NaN];return Qu=Ku=wr=Ao=Eo=Ce=Ju=nc=xr=0,t}};function le$1(t,n){Qu+=t,Ku+=n,++wr}function Vs(){Jn.point=Vw}function Vw(t,n){Jn.point=Gw,le$1(ft=t,st=n)}function Gw(t,n){var a=t-ft,s=n-st,l=$n(a*a+s*s);Ao+=l*(ft+t)/2,Eo+=l*(st+n)/2,Ce+=l,le$1(ft=t,st=n)}function Gs(){Jn.point=le$1}function Zw(){Jn.point=Kw}function Qw(){o1(r1,i1)}function Kw(t,n){Jn.point=o1,le$1(r1=ft=t,i1=st=n)}function o1(t,n){var a=t-ft,s=n-st,l=$n(a*a+s*s);Ao+=l*(ft+t)/2,Eo+=l*(st+n)/2,Ce+=l,l=st*t-ft*n,Ju+=l*(ft+t),nc+=l*(st+n),xr+=l*3,le$1(ft=t,st=n)}function a1(t){this._context=t}a1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ln);break}}},result:ln};var tc=new bn,Za,u1,c1,Mr,$r,Vr={point:ln,lineStart:function(){Vr.point=Jw},lineEnd:function(){Za&&f1(u1,c1),Vr.point=ln},polygonStart:function(){Za=!0},polygonEnd:function(){Za=null},result:function(){var t=+tc;return tc=new bn,t}};function Jw(t,n){Vr.point=f1,u1=Mr=t,c1=$r=n}function f1(t,n){Mr-=t,$r-=n,tc.add($n(Mr*Mr+$r*$r)),Mr=t,$r=n}let Zs,ko,Qs,Ks;class Js{constructor(n){this._append=n==null?s1:n3(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,a){switch(this._point){case 0:{this._append`M${n},${a}`,this._point=1;break}case 1:{this._append`L${n},${a}`;break}default:{if(this._append`M${n},${a}`,this._radius!==Qs||this._append!==ko){const s=this._radius,l=this._;this._="",this._append`m0,${s}a${s},${s} 0 1,1 0,${-2*s}a${s},${s} 0 1,1 0,${2*s}z`,Qs=s,ko=this._append,Ks=this._,this._=l}this._+=Ks;break}}}result(){const n=this._;return this._="",n.length?n:null}}function s1(t){let n=1;this._+=t[0];for(const a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function n3(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return s1;if(n!==Zs){const a=10**n;Zs=n,ko=function(s){let l=1;this._+=s[0];for(const u=s.length;l<u;++l)this._+=Math.round(arguments[l]*a)/a+s[l]}}return ko}function t3(t,n){let a=3,s=4.5,l,u;function c(d){return d&&(typeof s=="function"&&u.pointRadius(+s.apply(this,arguments)),it(d,l(u))),u.result()}return c.area=function(d){return it(d,l(Tt)),Tt.result()},c.measure=function(d){return it(d,l(Vr)),Vr.result()},c.bounds=function(d){return it(d,l(To)),To.result()},c.centroid=function(d){return it(d,l(Jn)),Jn.result()},c.projection=function(d){return arguments.length?(l=d==null?(t=null,jr):(t=d).stream,c):t},c.context=function(d){return arguments.length?(u=d==null?(n=null,new Js(a)):new a1(n=d),typeof s!="function"&&u.pointRadius(s),c):n},c.pointRadius=function(d){return arguments.length?(s=typeof d=="function"?d:(u.pointRadius(+d),+d),c):s},c.digits=function(d){if(!arguments.length)return a;if(d==null)a=null;else{const Ct=Math.floor(d);if(!(Ct>=0))throw new RangeError(`invalid digits: ${d}`);a=Ct}return n===null&&(u=new Js(a)),c},c.projection(t).digits(a).context(n)}function e3(t){return{stream:ii(t)}}function ii(t){return function(n){var a=new ec;for(var s in t)a[s]=t[s];return a.stream=n,a}}function ec(){}ec.prototype={constructor:ec,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Bc(t,n,a){var s=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),s!=null&&t.clipExtent(null),it(a,t.stream(To)),n(To.result()),s!=null&&t.clipExtent(s),t}function aa(t,n,a){return Bc(t,function(s){var l=n[1][0]-n[0][0],u=n[1][1]-n[0][1],c=Math.min(l/(s[1][0]-s[0][0]),u/(s[1][1]-s[0][1])),d=+n[0][0]+(l-c*(s[1][0]+s[0][0]))/2,Ct=+n[0][1]+(u-c*(s[1][1]+s[0][1]))/2;t.scale(150*c).translate([d,Ct])},a)}function Uc(t,n,a){return aa(t,[[0,0],n],a)}function Xc(t,n,a){return Bc(t,function(s){var l=+n,u=l/(s[1][0]-s[0][0]),c=(l-u*(s[1][0]+s[0][0]))/2,d=-u*s[0][1];t.scale(150*u).translate([c,d])},a)}function Hc(t,n,a){return Bc(t,function(s){var l=+n,u=l/(s[1][1]-s[0][1]),c=-u*s[0][0],d=(l-u*(s[1][1]+s[0][1]))/2;t.scale(150*u).translate([c,d])},a)}var nl=16,r3=B$1(30*H$1);function tl(t,n){return+n?o3(t,n):i3(t)}function i3(t){return ii({point:function(n,a){n=t(n,a),this.stream.point(n[0],n[1])}})}function o3(t,n){function a(s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn){var ax=ar-s,ox=en-l,sx=ax*ax+ox*ox;if(sx>4*n&&Cn--){var lx=c+on,cx=d+fn,fx=Ct+dn,gx=$n(lx*lx+cx*cx+fx*fx),mx=Un(fx/=gx),px=nn(nn(fx)-1)<U$1||nn(u-tn)<U$1?(u+tn)/2:Bn(cx,lx),hx=t(px,mx),vx=hx[0],yx=hx[1],Sx=vx-s,_x=yx-l,Ex=ox*Sx-ax*_x;(Ex*Ex/sx>n||nn((ax*Sx+ox*_x)/sx-.5)>.3||c*on+d*fn+Ct*dn<r3)&&(a(s,l,u,c,d,Ct,vx,yx,px,lx/=gx,cx/=gx,fx,Cn,Rn),Rn.point(vx,yx),a(vx,yx,px,lx,cx,fx,ar,en,tn,on,fn,dn,Cn,Rn))}}return function(s){var l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn={point:ax,lineStart:ox,lineEnd:lx,polygonStart:function(){s.polygonStart(),Rn.lineStart=cx},polygonEnd:function(){s.polygonEnd(),Rn.lineStart=ox}};function ax(mx,px){mx=t(mx,px),s.point(mx[0],mx[1])}function ox(){tn=NaN,Rn.point=sx,s.lineStart()}function sx(mx,px){var hx=se$1([mx,px]),vx=t(mx,px);a(tn,on,en,fn,dn,Cn,tn=vx[0],on=vx[1],en=mx,fn=hx[0],dn=hx[1],Cn=hx[2],nl,s),s.point(tn,on)}function lx(){Rn.point=ax,s.lineEnd()}function cx(){ox(),Rn.point=fx,Rn.lineEnd=gx}function fx(mx,px){sx(l=mx,px),u=tn,c=on,d=fn,Ct=dn,ar=Cn,Rn.point=sx}function gx(){a(tn,on,en,fn,dn,Cn,u,c,l,d,Ct,ar,nl,s),Rn.lineEnd=lx,lx()}return Rn}}var a3=ii({point:function(t,n){this.stream.point(t*H$1,n*H$1)}});function u3(t){return ii({point:function(n,a){var s=t(n,a);return this.stream.point(s[0],s[1])}})}function c3(t,n,a,s,l){function u(c,d){return c*=s,d*=l,[n+t*c,a-t*d]}return u.invert=function(c,d){return[(c-n)/t*s,(a-d)/t*l]},u}function el(t,n,a,s,l,u){if(!u)return c3(t,n,a,s,l);var c=B$1(u),d=q$1(u),Ct=c*t,ar=d*t,en=c/t,tn=d/t,on=(d*a-c*n)/t,fn=(d*n+c*a)/t;function dn(Cn,Rn){return Cn*=s,Rn*=l,[Ct*Cn-ar*Rn+n,a-ar*Cn-Ct*Rn]}return dn.invert=function(Cn,Rn){return[s*(en*Cn-tn*Rn+on),l*(fn-tn*Cn-en*Rn)]},dn}function vt(t){return jc(function(){return t})()}function jc(t){var n,a=150,s=480,l=250,u=0,c=0,d=0,Ct=0,ar=0,en,tn=0,on=1,fn=1,dn=null,Cn=Xu,Rn=null,ax,ox,sx,lx=jr,cx=.5,fx,gx,mx,px,hx;function vx(Ex){return mx(Ex[0]*H$1,Ex[1]*H$1)}function yx(Ex){return Ex=mx.invert(Ex[0],Ex[1]),Ex&&[Ex[0]*an,Ex[1]*an]}vx.stream=function(Ex){return px&&hx===Ex?px:px=a3(u3(en)(Cn(fx(lx(hx=Ex)))))},vx.preclip=function(Ex){return arguments.length?(Cn=Ex,dn=void 0,_x()):Cn},vx.postclip=function(Ex){return arguments.length?(lx=Ex,Rn=ax=ox=sx=null,_x()):lx},vx.clipAngle=function(Ex){return arguments.length?(Cn=+Ex?Z0(dn=Ex*H$1):(dn=null,Xu),_x()):dn*an},vx.clipExtent=function(Ex){return arguments.length?(lx=Ex==null?(Rn=ax=ox=sx=null,jr):oa(Rn=+Ex[0][0],ax=+Ex[0][1],ox=+Ex[1][0],sx=+Ex[1][1]),_x()):Rn==null?null:[[Rn,ax],[ox,sx]]},vx.scale=function(Ex){return arguments.length?(a=+Ex,Sx()):a},vx.translate=function(Ex){return arguments.length?(s=+Ex[0],l=+Ex[1],Sx()):[s,l]},vx.center=function(Ex){return arguments.length?(u=Ex[0]%360*H$1,c=Ex[1]%360*H$1,Sx()):[u*an,c*an]},vx.rotate=function(Ex){return arguments.length?(d=Ex[0]%360*H$1,Ct=Ex[1]%360*H$1,ar=Ex.length>2?Ex[2]%360*H$1:0,Sx()):[d*an,Ct*an,ar*an]},vx.angle=function(Ex){return arguments.length?(tn=Ex%360*H$1,Sx()):tn*an},vx.reflectX=function(Ex){return arguments.length?(on=Ex?-1:1,Sx()):on<0},vx.reflectY=function(Ex){return arguments.length?(fn=Ex?-1:1,Sx()):fn<0},vx.precision=function(Ex){return arguments.length?(fx=tl(gx,cx=Ex*Ex),_x()):$n(cx)},vx.fitExtent=function(Ex,bx){return aa(vx,Ex,bx)},vx.fitSize=function(Ex,bx){return Uc(vx,Ex,bx)},vx.fitWidth=function(Ex,bx){return Xc(vx,Ex,bx)},vx.fitHeight=function(Ex,bx){return Hc(vx,Ex,bx)};function Sx(){var Ex=el(a,0,0,on,fn,tn).apply(null,n(u,c)),bx=el(a,s-Ex[0],l-Ex[1],on,fn,tn);return en=Lc(d,Ct,ar),gx=Bu(n,bx),mx=Bu(en,gx),fx=tl(gx,cx),_x()}function _x(){return px=hx=null,vx}return function(){return n=t.apply(this,arguments),vx.invert=n.invert&&yx,Sx()}}function Wc(t){var n=0,a=K$1/3,s=jc(t),l=s(n,a);return l.parallels=function(u){return arguments.length?s(n=u[0]*H$1,a=u[1]*H$1):[n*an,a*an]},l}function f3(t){var n=B$1(t);function a(s,l){return[s*n,q$1(l)/n]}return a.invert=function(s,l){return[s/n,Un(l*n)]},a}function l1(t,n){var a=q$1(t),s=(a+q$1(n))/2;if(nn(s)<U$1)return f3(t);var l=1+a*(2*s-a),u=$n(l)/s;function c(d,Ct){var ar=$n(l-2*s*q$1(Ct))/s;return[ar*q$1(d*=s),u-ar*B$1(d)]}return c.invert=function(d,Ct){var ar=u-Ct,en=Bn(d,nn(ar))*nt(ar);return ar*s<0&&(en-=K$1*nt(d)*nt(ar)),[en/s,Un((l-(d*d+ar*ar)*s*s)/(2*s))]},c}function So(){return Wc(l1).scale(155.424).center([0,33.6442])}function h1(){return So().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function s3(t){var n=t.length;return{point:function(a,s){for(var l=-1;++l<n;)t[l].point(a,s)},sphere:function(){for(var a=-1;++a<n;)t[a].sphere()},lineStart:function(){for(var a=-1;++a<n;)t[a].lineStart()},lineEnd:function(){for(var a=-1;++a<n;)t[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<n;)t[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<n;)t[a].polygonEnd()}}}function l3(){var t,n,a=h1(),s,l=So().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u,c=So().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,Ct,ar={point:function(on,fn){Ct=[on,fn]}};function en(on){var fn=on[0],dn=on[1];return Ct=null,s.point(fn,dn),Ct||(u.point(fn,dn),Ct)||(d.point(fn,dn),Ct)}en.invert=function(on){var fn=a.scale(),dn=a.translate(),Cn=(on[0]-dn[0])/fn,Rn=(on[1]-dn[1])/fn;return(Rn>=.12&&Rn<.234&&Cn>=-.425&&Cn<-.214?l:Rn>=.166&&Rn<.234&&Cn>=-.214&&Cn<-.115?c:a).invert(on)},en.stream=function(on){return t&&n===on?t:t=s3([a.stream(n=on),l.stream(on),c.stream(on)])},en.precision=function(on){return arguments.length?(a.precision(on),l.precision(on),c.precision(on),tn()):a.precision()},en.scale=function(on){return arguments.length?(a.scale(on),l.scale(on*.35),c.scale(on),en.translate(a.translate())):a.scale()},en.translate=function(on){if(!arguments.length)return a.translate();var fn=a.scale(),dn=+on[0],Cn=+on[1];return s=a.translate(on).clipExtent([[dn-.455*fn,Cn-.238*fn],[dn+.455*fn,Cn+.238*fn]]).stream(ar),u=l.translate([dn-.307*fn,Cn+.201*fn]).clipExtent([[dn-.425*fn+U$1,Cn+.12*fn+U$1],[dn-.214*fn-U$1,Cn+.234*fn-U$1]]).stream(ar),d=c.translate([dn-.205*fn,Cn+.212*fn]).clipExtent([[dn-.214*fn+U$1,Cn+.166*fn+U$1],[dn-.115*fn-U$1,Cn+.234*fn-U$1]]).stream(ar),tn()},en.fitExtent=function(on,fn){return aa(en,on,fn)},en.fitSize=function(on,fn){return Uc(en,on,fn)},en.fitWidth=function(on,fn){return Xc(en,on,fn)},en.fitHeight=function(on,fn){return Hc(en,on,fn)};function tn(){return t=n=null,en}return en.scale(1070)}function d1(t){return function(n,a){var s=B$1(n),l=B$1(a),u=t(s*l);return u===1/0?[2,0]:[u*l*q$1(n),u*q$1(a)]}}function oi(t){return function(n,a){var s=$n(n*n+a*a),l=t(s),u=q$1(l),c=B$1(l);return[Bn(n*u,s*c),Un(s&&a*u/s)]}}var Vc=d1(function(t){return $n(2/(1+t))});Vc.invert=oi(function(t){return 2*Un(t/2)});function h3(){return vt(Vc).scale(124.75).clipAngle(180-.001)}var Gc=d1(function(t){return(t=C0(t))&&t/q$1(t)});Gc.invert=oi(function(t){return t});function d3(){return vt(Gc).scale(79.4188).clipAngle(180-.001)}function ai(t,n){return[t,uo(Fc((mn+n)/2))]}ai.invert=function(t,n){return[t,2*ir(R0(n))-mn]};function g3(){return g1(ai).scale(961/Ln)}function g1(t){var n=vt(t),a=n.center,s=n.scale,l=n.translate,u=n.clipExtent,c=null,d,Ct,ar;n.scale=function(tn){return arguments.length?(s(tn),en()):s()},n.translate=function(tn){return arguments.length?(l(tn),en()):l()},n.center=function(tn){return arguments.length?(a(tn),en()):a()},n.clipExtent=function(tn){return arguments.length?(tn==null?c=d=Ct=ar=null:(c=+tn[0][0],d=+tn[0][1],Ct=+tn[1][0],ar=+tn[1][1]),en()):c==null?null:[[c,d],[Ct,ar]]};function en(){var tn=K$1*s(),on=n(X0(n.rotate()).invert([0,0]));return u(c==null?[[on[0]-tn,on[1]-tn],[on[0]+tn,on[1]+tn]]:t===ai?[[Math.max(on[0]-tn,c),d],[Math.min(on[0]+tn,Ct),ar]]:[[c,Math.max(on[1]-tn,d)],[Ct,Math.min(on[1]+tn,ar)]])}return en()}function Ai(t){return Fc((mn+t)/2)}function p1(t,n){var a=B$1(t),s=t===n?q$1(t):uo(a/B$1(n))/uo(Ai(n)/Ai(t)),l=a*ja(Ai(t),s)/s;if(!s)return ai;function u(c,d){l>0?d<-mn+U$1&&(d=-mn+U$1):d>mn-U$1&&(d=mn-U$1);var Ct=l/ja(Ai(d),s);return[Ct*q$1(s*c),l-Ct*B$1(s*c)]}return u.invert=function(c,d){var Ct=l-d,ar=nt(s)*$n(c*c+Ct*Ct),en=Bn(c,nn(Ct))*nt(Ct);return Ct*s<0&&(en-=K$1*nt(c)*nt(Ct)),[en/s,2*ir(ja(l/ar,1/s))-mn]},u}function p3(){return Wc(p1).scale(109.5).parallels([30,30])}function Gr(t,n){return[t,n]}Gr.invert=Gr;function m3(){return vt(Gr).scale(152.63)}function m1(t,n){var a=B$1(t),s=t===n?q$1(t):(a-B$1(n))/(n-t),l=a/s+t;if(nn(s)<U$1)return Gr;function u(c,d){var Ct=l-d,ar=s*c;return[Ct*q$1(ar),l-Ct*B$1(ar)]}return u.invert=function(c,d){var Ct=l-d,ar=Bn(c,nn(Ct))*nt(Ct);return Ct*s<0&&(ar-=K$1*nt(c)*nt(Ct)),[ar/s,l-nt(s)*$n(c*c+Ct*Ct)]},u}function y3(){return Wc(m1).scale(131.154).center([0,13.9389])}var Nr=1.340264,Ir=-.081106,Rr=893e-6,Cr=.003796,No=$n(3)/2,_3=12;function Zc(t,n){var a=Un(No*q$1(n)),s=a*a,l=s*s*s;return[t*B$1(a)/(No*(Nr+3*Ir*s+l*(7*Rr+9*Cr*s))),a*(Nr+Ir*s+l*(Rr+Cr*s))]}Zc.invert=function(t,n){for(var a=n,s=a*a,l=s*s*s,u=0,c,d,Ct;u<_3&&(d=a*(Nr+Ir*s+l*(Rr+Cr*s))-n,Ct=Nr+3*Ir*s+l*(7*Rr+9*Cr*s),a-=c=d/Ct,s=a*a,l=s*s*s,!(nn(c)<Hr));++u);return[No*t*(Nr+3*Ir*s+l*(7*Rr+9*Cr*s))/B$1(a),Un(q$1(a)/No)]};function v3$1(){return vt(Zc).scale(177.158)}function Qc(t,n){var a=B$1(n),s=B$1(t)*a;return[a*q$1(t)/s,q$1(n)/s]}Qc.invert=oi(ir);function b3(){return vt(Qc).scale(144.049).clipAngle(60)}function w3(){var t=1,n=0,a=0,s=1,l=1,u=0,c,d,Ct=null,ar,en,tn,on=1,fn=1,dn=ii({point:function(lx,cx){var fx=sx([lx,cx]);this.stream.point(fx[0],fx[1])}}),Cn=jr,Rn,ax;function ox(){return on=t*s,fn=t*l,Rn=ax=null,sx}function sx(lx){var cx=lx[0]*on,fx=lx[1]*fn;if(u){var gx=fx*c-cx*d;cx=cx*c+fx*d,fx=gx}return[cx+n,fx+a]}return sx.invert=function(lx){var cx=lx[0]-n,fx=lx[1]-a;if(u){var gx=fx*c+cx*d;cx=cx*c-fx*d,fx=gx}return[cx/on,fx/fn]},sx.stream=function(lx){return Rn&&ax===lx?Rn:Rn=dn(Cn(ax=lx))},sx.postclip=function(lx){return arguments.length?(Cn=lx,Ct=ar=en=tn=null,ox()):Cn},sx.clipExtent=function(lx){return arguments.length?(Cn=lx==null?(Ct=ar=en=tn=null,jr):oa(Ct=+lx[0][0],ar=+lx[0][1],en=+lx[1][0],tn=+lx[1][1]),ox()):Ct==null?null:[[Ct,ar],[en,tn]]},sx.scale=function(lx){return arguments.length?(t=+lx,ox()):t},sx.translate=function(lx){return arguments.length?(n=+lx[0],a=+lx[1],ox()):[n,a]},sx.angle=function(lx){return arguments.length?(u=lx%360*H$1,d=q$1(u),c=B$1(u),ox()):u*an},sx.reflectX=function(lx){return arguments.length?(s=lx?-1:1,ox()):s<0},sx.reflectY=function(lx){return arguments.length?(l=lx?-1:1,ox()):l<0},sx.fitExtent=function(lx,cx){return aa(sx,lx,cx)},sx.fitSize=function(lx,cx){return Uc(sx,lx,cx)},sx.fitWidth=function(lx,cx){return Xc(sx,lx,cx)},sx.fitHeight=function(lx,cx){return Hc(sx,lx,cx)},sx}function Kc(t,n){var a=n*n,s=a*a;return[t*(.8707-.131979*a+s*(-.013791+s*(.003971*a-.001529*s))),n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))]}Kc.invert=function(t,n){var a=n,s=25,l;do{var u=a*a,c=u*u;a-=l=(a*(1.007226+u*(.015085+c*(-.044475+.028874*u-.005916*c)))-n)/(1.007226+u*(.015085*3+c*(-.044475*7+.028874*9*u-.005916*11*c)))}while(nn(l)>U$1&&--s>0);return[t/(.8707+(u=a*a)*(-.131979+u*(-.013791+u*u*u*(.003971-.001529*u)))),a]};function x3(){return vt(Kc).scale(175.295)}function Jc(t,n){return[B$1(n)*q$1(t),q$1(n)]}Jc.invert=oi(Un);function M3(){return vt(Jc).scale(249.5).clipAngle(90+U$1)}function nf(t,n){var a=B$1(n),s=1+B$1(t)*a;return[a*q$1(t)/s,q$1(n)/s]}nf.invert=oi(function(t){return 2*ir(t)});function $3(){return vt(nf).scale(250).clipAngle(142)}function tf(t,n){return[uo(Fc((mn+n)/2)),-t]}tf.invert=function(t,n){return[-n,2*ir(R0(t))-mn]};function T3(){var t=g1(tf),n=t.center,a=t.rotate;return t.center=function(s){return arguments.length?n([-s[1],s[0]]):(s=n(),[s[1],-s[0]])},t.rotate=function(s){return arguments.length?a([s[0],s[1],s.length>2?s[2]+90:90]):(s=a(),[s[0],s[1],s[2]-90])},a([0,0,90]).scale(159.155)}function A3(t,n){return t.parent===n.parent?1:2}function E3(t){return t.reduce(k3,0)/t.length}function k3(t,n){return t+n.x}function S3(t){return 1+t.reduce(N3,0)}function N3(t,n){return Math.max(t,n.y)}function I3(t){for(var n;n=t.children;)t=n[0];return t}function R3(t){for(var n;n=t.children;)t=n[n.length-1];return t}function C3(){var t=A3,n=1,a=1,s=!1;function l(u){var c,d=0;u.eachAfter(function(on){var fn=on.children;fn?(on.x=E3(fn),on.y=S3(fn)):(on.x=c?d+=t(on,c):0,on.y=0,c=on)});var Ct=I3(u),ar=R3(u),en=Ct.x-t(Ct,ar)/2,tn=ar.x+t(ar,Ct)/2;return u.eachAfter(s?function(on){on.x=(on.x-u.x)*n,on.y=(u.y-on.y)*a}:function(on){on.x=(on.x-en)/(tn-en)*n,on.y=(1-(u.y?on.y/u.y:1))*a})}return l.separation=function(u){return arguments.length?(t=u,l):t},l.size=function(u){return arguments.length?(s=!1,n=+u[0],a=+u[1],l):s?null:[n,a]},l.nodeSize=function(u){return arguments.length?(s=!0,n=+u[0],a=+u[1],l):s?[n,a]:null},l}function P3(t){var n=0,a=t.children,s=a&&a.length;if(!s)n=1;else for(;--s>=0;)n+=a[s].value;t.value=n}function D3(){return this.eachAfter(P3)}function z3(t,n){let a=-1;for(const s of this)t.call(n,s,++a,this);return this}function O3(t,n){for(var a=this,s=[a],l,u,c=-1;a=s.pop();)if(t.call(n,a,++c,this),l=a.children)for(u=l.length-1;u>=0;--u)s.push(l[u]);return this}function Y3(t,n){for(var a=this,s=[a],l=[],u,c,d,Ct=-1;a=s.pop();)if(l.push(a),u=a.children)for(c=0,d=u.length;c<d;++c)s.push(u[c]);for(;a=l.pop();)t.call(n,a,++Ct,this);return this}function F3(t,n){let a=-1;for(const s of this)if(t.call(n,s,++a,this))return s}function q3(t){return this.eachAfter(function(n){for(var a=+t(n.data)||0,s=n.children,l=s&&s.length;--l>=0;)a+=s[l].value;n.value=a})}function L3(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function B3(t){for(var n=this,a=U3(n,t),s=[n];n!==a;)n=n.parent,s.push(n);for(var l=s.length;t!==a;)s.splice(l,0,t),t=t.parent;return s}function U3(t,n){if(t===n)return t;var a=t.ancestors(),s=n.ancestors(),l=null;for(t=a.pop(),n=s.pop();t===n;)l=t,t=a.pop(),n=s.pop();return l}function X3(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function H3(){return Array.from(this)}function j3(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function W3(){var t=this,n=[];return t.each(function(a){a!==t&&n.push({source:a.parent,target:a})}),n}function*V3(){var t=this,n,a=[t],s,l,u;do for(n=a.reverse(),a=[];t=n.pop();)if(yield t,s=t.children)for(l=0,u=s.length;l<u;++l)a.push(s[l]);while(a.length)}function ef(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=Q3)):n===void 0&&(n=Z3);for(var a=new he(t),s,l=[a],u,c,d,Ct;s=l.pop();)if((c=n(s.data))&&(Ct=(c=Array.from(c)).length))for(s.children=c,d=Ct-1;d>=0;--d)l.push(u=c[d]=new he(c[d])),u.parent=s,u.depth=s.depth+1;return a.eachBefore(y1)}function G3(){return ef(this).eachBefore(K3)}function Z3(t){return t.children}function Q3(t){return Array.isArray(t)?t[1]:null}function K3(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function y1(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function he(t){this.data=t,this.depth=this.height=0,this.parent=null}he.prototype=ef.prototype={constructor:he,count:D3,each:z3,eachAfter:Y3,eachBefore:O3,find:F3,sum:q3,sort:L3,path:B3,ancestors:X3,descendants:H3,leaves:j3,links:W3,copy:G3,[Symbol.iterator]:V3};function Xi(t){return t==null?null:_1(t)}function _1(t){if(typeof t!="function")throw new Error;return t}function Kt(){return 0}function Ie$1(t){return function(){return t}}const J3=1664525,n6=1013904223,rl=4294967296;function rf(){let t=1;return()=>(t=(J3*t+n6)%rl)/rl}function t6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function e6(t,n){let a=t.length,s,l;for(;a;)l=n()*a--|0,s=t[a],t[a]=t[l],t[l]=s;return t}function r6(t){return v1$1(t,rf())}function v1$1(t,n){for(var a=0,s=(t=e6(Array.from(t),n)).length,l=[],u,c;a<s;)u=t[a],c&&b1(c,u)?++a:(c=o6(l=i6(l,u)),a=0);return c}function i6(t,n){var a,s;if(Qa(n,t))return[n];for(a=0;a<t.length;++a)if(Ei(n,t[a])&&Qa(Tr(t[a],n),t))return[t[a],n];for(a=0;a<t.length-1;++a)for(s=a+1;s<t.length;++s)if(Ei(Tr(t[a],t[s]),n)&&Ei(Tr(t[a],n),t[s])&&Ei(Tr(t[s],n),t[a])&&Qa(w1(t[a],t[s],n),t))return[t[a],t[s],n];throw new Error}function Ei(t,n){var a=t.r-n.r,s=n.x-t.x,l=n.y-t.y;return a<0||a*a<s*s+l*l}function b1(t,n){var a=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,s=n.x-t.x,l=n.y-t.y;return a>0&&a*a>s*s+l*l}function Qa(t,n){for(var a=0;a<n.length;++a)if(!b1(t,n[a]))return!1;return!0}function o6(t){switch(t.length){case 1:return a6(t[0]);case 2:return Tr(t[0],t[1]);case 3:return w1(t[0],t[1],t[2])}}function a6(t){return{x:t.x,y:t.y,r:t.r}}function Tr(t,n){var a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,Ct=u-a,ar=c-s,en=d-l,tn=Math.sqrt(Ct*Ct+ar*ar);return{x:(a+u+Ct/tn*en)/2,y:(s+c+ar/tn*en)/2,r:(tn+l+d)/2}}function w1(t,n,a){var s=t.x,l=t.y,u=t.r,c=n.x,d=n.y,Ct=n.r,ar=a.x,en=a.y,tn=a.r,on=s-c,fn=s-ar,dn=l-d,Cn=l-en,Rn=Ct-u,ax=tn-u,ox=s*s+l*l-u*u,sx=ox-c*c-d*d+Ct*Ct,lx=ox-ar*ar-en*en+tn*tn,cx=fn*dn-on*Cn,fx=(dn*lx-Cn*sx)/(cx*2)-s,gx=(Cn*Rn-dn*ax)/cx,mx=(fn*sx-on*lx)/(cx*2)-l,px=(on*ax-fn*Rn)/cx,hx=gx*gx+px*px-1,vx=2*(u+fx*gx+mx*px),yx=fx*fx+mx*mx-u*u,Sx=-(Math.abs(hx)>1e-6?(vx+Math.sqrt(vx*vx-4*hx*yx))/(2*hx):yx/vx);return{x:s+fx+gx*Sx,y:l+mx+px*Sx,r:Sx}}function il(t,n,a){var s=t.x-n.x,l,u,c=t.y-n.y,d,Ct,ar=s*s+c*c;ar?(u=n.r+a.r,u*=u,Ct=t.r+a.r,Ct*=Ct,u>Ct?(l=(ar+Ct-u)/(2*ar),d=Math.sqrt(Math.max(0,Ct/ar-l*l)),a.x=t.x-l*s-d*c,a.y=t.y-l*c+d*s):(l=(ar+u-Ct)/(2*ar),d=Math.sqrt(Math.max(0,u/ar-l*l)),a.x=n.x+l*s-d*c,a.y=n.y+l*c+d*s)):(a.x=n.x+a.r,a.y=n.y)}function ol(t,n){var a=t.r+n.r-1e-6,s=n.x-t.x,l=n.y-t.y;return a>0&&a*a>s*s+l*l}function al(t){var n=t._,a=t.next._,s=n.r+a.r,l=(n.x*a.r+a.x*n.r)/s,u=(n.y*a.r+a.y*n.r)/s;return l*l+u*u}function ki(t){this._=t,this.next=null,this.previous=null}function x1(t,n){if(!(u=(t=t6(t)).length))return 0;var a,s,l,u,c,d,Ct,ar,en,tn,on;if(a=t[0],a.x=0,a.y=0,!(u>1))return a.r;if(s=t[1],a.x=-s.r,s.x=a.r,s.y=0,!(u>2))return a.r+s.r;il(s,a,l=t[2]),a=new ki(a),s=new ki(s),l=new ki(l),a.next=l.previous=s,s.next=a.previous=l,l.next=s.previous=a;e:for(Ct=3;Ct<u;++Ct){il(a._,s._,l=t[Ct]),l=new ki(l),ar=s.next,en=a.previous,tn=s._.r,on=a._.r;do if(tn<=on){if(ol(ar._,l._)){s=ar,a.next=s,s.previous=a,--Ct;continue e}tn+=ar._.r,ar=ar.next}else{if(ol(en._,l._)){a=en,a.next=s,s.previous=a,--Ct;continue e}on+=en._.r,en=en.previous}while(ar!==en.next);for(l.previous=a,l.next=s,a.next=s.previous=s=l,c=al(a);(l=l.next)!==s;)(d=al(l))<c&&(a=l,c=d);s=a.next}for(a=[s._],l=s;(l=l.next)!==s;)a.push(l._);for(l=v1$1(a,n),Ct=0;Ct<u;++Ct)a=t[Ct],a.x-=l.x,a.y-=l.y;return l.r}function u6(t){return x1(t,rf()),t}function c6(t){return Math.sqrt(t.value)}function f6(){var t=null,n=1,a=1,s=Kt;function l(u){const c=rf();return u.x=n/2,u.y=a/2,t?u.eachBefore(ul(t)).eachAfter(Ka(s,.5,c)).eachBefore(cl(1)):u.eachBefore(ul(c6)).eachAfter(Ka(Kt,1,c)).eachAfter(Ka(s,u.r/Math.min(n,a),c)).eachBefore(cl(Math.min(n,a)/(2*u.r))),u}return l.radius=function(u){return arguments.length?(t=Xi(u),l):t},l.size=function(u){return arguments.length?(n=+u[0],a=+u[1],l):[n,a]},l.padding=function(u){return arguments.length?(s=typeof u=="function"?u:Ie$1(+u),l):s},l}function ul(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Ka(t,n,a){return function(s){if(l=s.children){var l,u,c=l.length,d=t(s)*n||0,Ct;if(d)for(u=0;u<c;++u)l[u].r+=d;if(Ct=x1(l,a),d)for(u=0;u<c;++u)l[u].r-=d;s.r=Ct+d}}}function cl(t){return function(n){var a=n.parent;n.r*=t,a&&(n.x=a.x+t*n.x,n.y=a.y+t*n.y)}}function M1(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ui(t,n,a,s,l){for(var u=t.children,c,d=-1,Ct=u.length,ar=t.value&&(s-n)/t.value;++d<Ct;)c=u[d],c.y0=a,c.y1=l,c.x0=n,c.x1=n+=c.value*ar}function s6(){var t=1,n=1,a=0,s=!1;function l(c){var d=c.height+1;return c.x0=c.y0=a,c.x1=t,c.y1=n/d,c.eachBefore(u(n,d)),s&&c.eachBefore(M1),c}function u(c,d){return function(Ct){Ct.children&&ui(Ct,Ct.x0,c*(Ct.depth+1)/d,Ct.x1,c*(Ct.depth+2)/d);var ar=Ct.x0,en=Ct.y0,tn=Ct.x1-a,on=Ct.y1-a;tn<ar&&(ar=tn=(ar+tn)/2),on<en&&(en=on=(en+on)/2),Ct.x0=ar,Ct.y0=en,Ct.x1=tn,Ct.y1=on}}return l.round=function(c){return arguments.length?(s=!!c,l):s},l.size=function(c){return arguments.length?(t=+c[0],n=+c[1],l):[t,n]},l.padding=function(c){return arguments.length?(a=+c,l):a},l}var l6={depth:-1},fl={},Ja={};function h6(t){return t.id}function d6(t){return t.parentId}function g6(){var t=h6,n=d6,a;function s(l){var u=Array.from(l),c=t,d=n,Ct,ar,en,tn,on,fn,dn,Cn,Rn=new Map;if(a!=null){const ax=u.map((lx,cx)=>p6(a(lx,cx,l))),ox=ax.map(sl),sx=new Set(ax).add("");for(const lx of ox)sx.has(lx)||(sx.add(lx),ax.push(lx),ox.push(sl(lx)),u.push(Ja));c=(lx,cx)=>ax[cx],d=(lx,cx)=>ox[cx]}for(en=0,Ct=u.length;en<Ct;++en)ar=u[en],fn=u[en]=new he(ar),(dn=c(ar,en,l))!=null&&(dn+="")&&(Cn=fn.id=dn,Rn.set(Cn,Rn.has(Cn)?fl:fn)),(dn=d(ar,en,l))!=null&&(dn+="")&&(fn.parent=dn);for(en=0;en<Ct;++en)if(fn=u[en],dn=fn.parent){if(on=Rn.get(dn),!on)throw new Error("missing: "+dn);if(on===fl)throw new Error("ambiguous: "+dn);on.children?on.children.push(fn):on.children=[fn],fn.parent=on}else{if(tn)throw new Error("multiple roots");tn=fn}if(!tn)throw new Error("no root");if(a!=null){for(;tn.data===Ja&&tn.children.length===1;)tn=tn.children[0],--Ct;for(let ax=u.length-1;ax>=0&&(fn=u[ax],fn.data===Ja);--ax)fn.data=null}if(tn.parent=l6,tn.eachBefore(function(ax){ax.depth=ax.parent.depth+1,--Ct}).eachBefore(y1),tn.parent=null,Ct>0)throw new Error("cycle");return tn}return s.id=function(l){return arguments.length?(t=Xi(l),s):t},s.parentId=function(l){return arguments.length?(n=Xi(l),s):n},s.path=function(l){return arguments.length?(a=Xi(l),s):a},s}function p6(t){t=`${t}`;let n=t.length;return rc(t,n-1)&&!rc(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function sl(t){let n=t.length;if(n<2)return"";for(;--n>1&&!rc(t,n););return t.slice(0,n)}function rc(t,n){if(t[n]==="/"){let a=0;for(;n>0&&t[--n]==="\\";)++a;if((a&1)===0)return!0}return!1}function m6(t,n){return t.parent===n.parent?1:2}function nu(t){var n=t.children;return n?n[0]:t.t}function tu(t){var n=t.children;return n?n[n.length-1]:t.t}function y6(t,n,a){var s=a/(n.i-t.i);n.c-=s,n.s+=a,t.c+=s,n.z+=a,n.m+=a}function _6(t){for(var n=0,a=0,s=t.children,l=s.length,u;--l>=0;)u=s[l],u.z+=n,u.m+=n,n+=u.s+(a+=u.c)}function v6(t,n,a){return t.a.parent===n.parent?t.a:a}function Hi(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Hi.prototype=Object.create(he.prototype);function b6(t){for(var n=new Hi(t,0),a,s=[n],l,u,c,d;a=s.pop();)if(u=a._.children)for(a.children=new Array(d=u.length),c=d-1;c>=0;--c)s.push(l=a.children[c]=new Hi(u[c],c)),l.parent=a;return(n.parent=new Hi(null,0)).children=[n],n}function w6(){var t=m6,n=1,a=1,s=null;function l(ar){var en=b6(ar);if(en.eachAfter(u),en.parent.m=-en.z,en.eachBefore(c),s)ar.eachBefore(Ct);else{var tn=ar,on=ar,fn=ar;ar.eachBefore(function(ox){ox.x<tn.x&&(tn=ox),ox.x>on.x&&(on=ox),ox.depth>fn.depth&&(fn=ox)});var dn=tn===on?1:t(tn,on)/2,Cn=dn-tn.x,Rn=n/(on.x+dn+Cn),ax=a/(fn.depth||1);ar.eachBefore(function(ox){ox.x=(ox.x+Cn)*Rn,ox.y=ox.depth*ax})}return ar}function u(ar){var en=ar.children,tn=ar.parent.children,on=ar.i?tn[ar.i-1]:null;if(en){_6(ar);var fn=(en[0].z+en[en.length-1].z)/2;on?(ar.z=on.z+t(ar._,on._),ar.m=ar.z-fn):ar.z=fn}else on&&(ar.z=on.z+t(ar._,on._));ar.parent.A=d(ar,on,ar.parent.A||tn[0])}function c(ar){ar._.x=ar.z+ar.parent.m,ar.m+=ar.parent.m}function d(ar,en,tn){if(en){for(var on=ar,fn=ar,dn=en,Cn=on.parent.children[0],Rn=on.m,ax=fn.m,ox=dn.m,sx=Cn.m,lx;dn=tu(dn),on=nu(on),dn&&on;)Cn=nu(Cn),fn=tu(fn),fn.a=ar,lx=dn.z+ox-on.z-Rn+t(dn._,on._),lx>0&&(y6(v6(dn,ar,tn),ar,lx),Rn+=lx,ax+=lx),ox+=dn.m,Rn+=on.m,sx+=Cn.m,ax+=fn.m;dn&&!tu(fn)&&(fn.t=dn,fn.m+=ox-ax),on&&!nu(Cn)&&(Cn.t=on,Cn.m+=Rn-sx,tn=ar)}return tn}function Ct(ar){ar.x*=n,ar.y=ar.depth*a}return l.separation=function(ar){return arguments.length?(t=ar,l):t},l.size=function(ar){return arguments.length?(s=!1,n=+ar[0],a=+ar[1],l):s?null:[n,a]},l.nodeSize=function(ar){return arguments.length?(s=!0,n=+ar[0],a=+ar[1],l):s?[n,a]:null},l}function ua(t,n,a,s,l){for(var u=t.children,c,d=-1,Ct=u.length,ar=t.value&&(l-a)/t.value;++d<Ct;)c=u[d],c.x0=n,c.x1=s,c.y0=a,c.y1=a+=c.value*ar}var $1=(1+Math.sqrt(5))/2;function T1(t,n,a,s,l,u){for(var c=[],d=n.children,Ct,ar,en=0,tn=0,on=d.length,fn,dn,Cn=n.value,Rn,ax,ox,sx,lx,cx,fx;en<on;){fn=l-a,dn=u-s;do Rn=d[tn++].value;while(!Rn&&tn<on);for(ax=ox=Rn,cx=Math.max(dn/fn,fn/dn)/(Cn*t),fx=Rn*Rn*cx,lx=Math.max(ox/fx,fx/ax);tn<on;++tn){if(Rn+=ar=d[tn].value,ar<ax&&(ax=ar),ar>ox&&(ox=ar),fx=Rn*Rn*cx,sx=Math.max(ox/fx,fx/ax),sx>lx){Rn-=ar;break}lx=sx}c.push(Ct={value:Rn,dice:fn<dn,children:d.slice(en,tn)}),Ct.dice?ui(Ct,a,s,l,Cn?s+=dn*Rn/Cn:u):ua(Ct,a,s,Cn?a+=fn*Rn/Cn:l,u),Cn-=Rn,en=tn}return c}const A1=(function t(n){function a(s,l,u,c,d){T1(n,s,l,u,c,d)}return a.ratio=function(s){return t((s=+s)>1?s:1)},a})($1);function x6(){var t=A1,n=!1,a=1,s=1,l=[0],u=Kt,c=Kt,d=Kt,Ct=Kt,ar=Kt;function en(on){return on.x0=on.y0=0,on.x1=a,on.y1=s,on.eachBefore(tn),l=[0],n&&on.eachBefore(M1),on}function tn(on){var fn=l[on.depth],dn=on.x0+fn,Cn=on.y0+fn,Rn=on.x1-fn,ax=on.y1-fn;Rn<dn&&(dn=Rn=(dn+Rn)/2),ax<Cn&&(Cn=ax=(Cn+ax)/2),on.x0=dn,on.y0=Cn,on.x1=Rn,on.y1=ax,on.children&&(fn=l[on.depth+1]=u(on)/2,dn+=ar(on)-fn,Cn+=c(on)-fn,Rn-=d(on)-fn,ax-=Ct(on)-fn,Rn<dn&&(dn=Rn=(dn+Rn)/2),ax<Cn&&(Cn=ax=(Cn+ax)/2),t(on,dn,Cn,Rn,ax))}return en.round=function(on){return arguments.length?(n=!!on,en):n},en.size=function(on){return arguments.length?(a=+on[0],s=+on[1],en):[a,s]},en.tile=function(on){return arguments.length?(t=_1(on),en):t},en.padding=function(on){return arguments.length?en.paddingInner(on).paddingOuter(on):en.paddingInner()},en.paddingInner=function(on){return arguments.length?(u=typeof on=="function"?on:Ie$1(+on),en):u},en.paddingOuter=function(on){return arguments.length?en.paddingTop(on).paddingRight(on).paddingBottom(on).paddingLeft(on):en.paddingTop()},en.paddingTop=function(on){return arguments.length?(c=typeof on=="function"?on:Ie$1(+on),en):c},en.paddingRight=function(on){return arguments.length?(d=typeof on=="function"?on:Ie$1(+on),en):d},en.paddingBottom=function(on){return arguments.length?(Ct=typeof on=="function"?on:Ie$1(+on),en):Ct},en.paddingLeft=function(on){return arguments.length?(ar=typeof on=="function"?on:Ie$1(+on),en):ar},en}function M6(t,n,a,s,l){var u=t.children,c,d=u.length,Ct,ar=new Array(d+1);for(ar[0]=Ct=c=0;c<d;++c)ar[c+1]=Ct+=u[c].value;en(0,d,t.value,n,a,s,l);function en(tn,on,fn,dn,Cn,Rn,ax){if(tn>=on-1){var ox=u[tn];ox.x0=dn,ox.y0=Cn,ox.x1=Rn,ox.y1=ax;return}for(var sx=ar[tn],lx=fn/2+sx,cx=tn+1,fx=on-1;cx<fx;){var gx=cx+fx>>>1;ar[gx]<lx?cx=gx+1:fx=gx}lx-ar[cx-1]<ar[cx]-lx&&tn+1<cx&&--cx;var mx=ar[cx]-sx,px=fn-mx;if(Rn-dn>ax-Cn){var hx=fn?(dn*px+Rn*mx)/fn:Rn;en(tn,cx,mx,dn,Cn,hx,ax),en(cx,on,px,hx,Cn,Rn,ax)}else{var vx=fn?(Cn*px+ax*mx)/fn:ax;en(tn,cx,mx,dn,Cn,Rn,vx),en(cx,on,px,dn,vx,Rn,ax)}}}function $6(t,n,a,s,l){(t.depth&1?ua:ui)(t,n,a,s,l)}const T6=(function t(n){function a(s,l,u,c,d){if((Ct=s._squarify)&&Ct.ratio===n)for(var Ct,ar,en,tn,on=-1,fn,dn=Ct.length,Cn=s.value;++on<dn;){for(ar=Ct[on],en=ar.children,tn=ar.value=0,fn=en.length;tn<fn;++tn)ar.value+=en[tn].value;ar.dice?ui(ar,l,u,c,Cn?u+=(d-u)*ar.value/Cn:d):ua(ar,l,u,Cn?l+=(c-l)*ar.value/Cn:c,d),Cn-=ar.value}else s._squarify=Ct=T1(n,s,l,u,c,d),Ct.ratio=n}return a.ratio=function(s){return t((s=+s)>1?s:1)},a})($1);function A6(t){for(var n=-1,a=t.length,s,l=t[a-1],u=0;++n<a;)s=l,l=t[n],u+=s[1]*l[0]-s[0]*l[1];return u/2}function E6(t){for(var n=-1,a=t.length,s=0,l=0,u,c=t[a-1],d,Ct=0;++n<a;)u=c,c=t[n],Ct+=d=u[0]*c[1]-c[0]*u[1],s+=(u[0]+c[0])*d,l+=(u[1]+c[1])*d;return Ct*=3,[s/Ct,l/Ct]}function k6(t,n,a){return(n[0]-t[0])*(a[1]-t[1])-(n[1]-t[1])*(a[0]-t[0])}function S6(t,n){return t[0]-n[0]||t[1]-n[1]}function ll(t){const n=t.length,a=[0,1];let s=2,l;for(l=2;l<n;++l){for(;s>1&&k6(t[a[s-2]],t[a[s-1]],t[l])<=0;)--s;a[s++]=l}return a.slice(0,s)}function N6(t){if((a=t.length)<3)return null;var n,a,s=new Array(a),l=new Array(a);for(n=0;n<a;++n)s[n]=[+t[n][0],+t[n][1],n];for(s.sort(S6),n=0;n<a;++n)l[n]=[s[n][0],-s[n][1]];var u=ll(s),c=ll(l),d=c[0]===u[0],Ct=c[c.length-1]===u[u.length-1],ar=[];for(n=u.length-1;n>=0;--n)ar.push(t[s[u[n]][2]]);for(n=+d;n<c.length-Ct;++n)ar.push(t[s[c[n]][2]]);return ar}function I6(t,n){for(var a=t.length,s=t[a-1],l=n[0],u=n[1],c=s[0],d=s[1],Ct,ar,en=!1,tn=0;tn<a;++tn)s=t[tn],Ct=s[0],ar=s[1],ar>u!=d>u&&l<(c-Ct)*(u-ar)/(d-ar)+Ct&&(en=!en),c=Ct,d=ar;return en}function R6(t){for(var n=-1,a=t.length,s=t[a-1],l,u,c=s[0],d=s[1],Ct=0;++n<a;)l=c,u=d,s=t[n],c=s[0],d=s[1],l-=c,u-=d,Ct+=Math.hypot(l,u);return Ct}const An=Math.random,C6=(function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,arguments.length===1?(l=s,s=0):l-=s,function(){return n()*l+s}}return a.source=t,a})(An),P6=(function t(n){function a(s,l){return arguments.length<2&&(l=s,s=0),s=Math.floor(s),l=Math.floor(l)-s,function(){return Math.floor(n()*l+s)}}return a.source=t,a})(An),of=(function t(n){function a(s,l){var u,c;return s=s==null?0:+s,l=l==null?1:+l,function(){var d;if(u!=null)d=u,u=null;else do u=n()*2-1,d=n()*2-1,c=u*u+d*d;while(!c||c>1);return s+l*d*Math.sqrt(-2*Math.log(c)/c)}}return a.source=t,a})(An),D6=(function t(n){var a=of.source(n);function s(){var l=a.apply(this,arguments);return function(){return Math.exp(l())}}return s.source=t,s})(An),E1=(function t(n){function a(s){return(s=+s)<=0?()=>0:function(){for(var l=0,u=s;u>1;--u)l+=n();return l+u*n()}}return a.source=t,a})(An),z6=(function t(n){var a=E1.source(n);function s(l){if((l=+l)==0)return n;var u=a(l);return function(){return u()/l}}return s.source=t,s})(An),O6=(function t(n){function a(s){return function(){return-Math.log1p(-n())/s}}return a.source=t,a})(An),Y6=(function t(n){function a(s){if((s=+s)<0)throw new RangeError("invalid alpha");return s=1/-s,function(){return Math.pow(1-n(),s)}}return a.source=t,a})(An),F6=(function t(n){function a(s){if((s=+s)<0||s>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+s)}}return a.source=t,a})(An),k1=(function t(n){function a(s){if((s=+s)<0||s>1)throw new RangeError("invalid p");return s===0?()=>1/0:s===1?()=>1:(s=Math.log1p(-s),function(){return 1+Math.floor(Math.log1p(-n())/s)})}return a.source=t,a})(An),af=(function t(n){var a=of.source(n)();function s(l,u){if((l=+l)<0)throw new RangeError("invalid k");if(l===0)return()=>0;if(u=u==null?1:+u,l===1)return()=>-Math.log1p(-n())*u;var c=(l<1?l+1:l)-1/3,d=1/(3*Math.sqrt(c)),Ct=l<1?()=>Math.pow(n(),1/l):()=>1;return function(){do{do var ar=a(),en=1+d*ar;while(en<=0);en*=en*en;var tn=1-n()}while(tn>=1-.0331*ar*ar*ar*ar&&Math.log(tn)>=.5*ar*ar+c*(1-en+Math.log(en)));return c*en*Ct()*u}}return s.source=t,s})(An),S1=(function t(n){var a=af.source(n);function s(l,u){var c=a(l),d=a(u);return function(){var Ct=c();return Ct===0?0:Ct/(Ct+d())}}return s.source=t,s})(An),N1=(function t(n){var a=k1.source(n),s=S1.source(n);function l(u,c){return u=+u,(c=+c)>=1?()=>u:c<=0?()=>0:function(){for(var d=0,Ct=u,ar=c;Ct*ar>16&&Ct*(1-ar)>16;){var en=Math.floor((Ct+1)*ar),tn=s(en,Ct-en+1)();tn<=ar?(d+=en,Ct-=en,ar=(ar-tn)/(1-tn)):(Ct=en-1,ar/=tn)}for(var on=ar<.5,fn=on?ar:1-ar,dn=a(fn),Cn=dn(),Rn=0;Cn<=Ct;++Rn)Cn+=dn();return d+(on?Rn:Ct-Rn)}}return l.source=t,l})(An),q6=(function t(n){function a(s,l,u){var c;return(s=+s)==0?c=d=>-Math.log(d):(s=1/s,c=d=>Math.pow(d,s)),l=l==null?0:+l,u=u==null?1:+u,function(){return l+u*c(-Math.log1p(-n()))}}return a.source=t,a})(An),L6=(function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,function(){return s+l*Math.tan(Math.PI*n())}}return a.source=t,a})(An),B6=(function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,function(){var u=n();return s+l*Math.log(u/(1-u))}}return a.source=t,a})(An),U6=(function t(n){var a=af.source(n),s=N1.source(n);function l(u){return function(){for(var c=0,d=u;d>16;){var Ct=Math.floor(.875*d),ar=a(Ct)();if(ar>d)return c+s(Ct-1,d/ar)();c+=Ct,d-=ar}for(var en=-Math.log1p(-n()),tn=0;en<=d;++tn)en-=Math.log1p(-n());return c+tn}}return l.source=t,l})(An),X6=1664525,H6=1013904223,hl=1/4294967296;function j6(t=Math.random()){let n=(0<=t&&t<1?t/hl:Math.abs(t))|0;return()=>(n=X6*n+H6|0,hl*(n>>>0))}function et(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function Rt(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const ic=Symbol("implicit");function uf(){var t=new Pr,n=[],a=[],s=ic;function l(u){let c=t.get(u);if(c===void 0){if(s!==ic)return s;t.set(u,c=n.push(u)-1)}return a[c%a.length]}return l.domain=function(u){if(!arguments.length)return n.slice();n=[],t=new Pr;for(const c of u)t.has(c)||t.set(c,n.push(c)-1);return l},l.range=function(u){return arguments.length?(a=Array.from(u),l):a.slice()},l.unknown=function(u){return arguments.length?(s=u,l):s},l.copy=function(){return uf(n,a).unknown(s)},et.apply(l,arguments),l}function cf(){var t=uf().unknown(void 0),n=t.domain,a=t.range,s=0,l=1,u,c,d=!1,Ct=0,ar=0,en=.5;delete t.unknown;function tn(){var on=n().length,fn=l<s,dn=fn?l:s,Cn=fn?s:l;u=(Cn-dn)/Math.max(1,on-Ct+ar*2),d&&(u=Math.floor(u)),dn+=(Cn-dn-u*(on-Ct))*en,c=u*(1-Ct),d&&(dn=Math.round(dn),c=Math.round(c));var Rn=zt(on).map(function(ax){return dn+u*ax});return a(fn?Rn.reverse():Rn)}return t.domain=function(on){return arguments.length?(n(on),tn()):n()},t.range=function(on){return arguments.length?([s,l]=on,s=+s,l=+l,tn()):[s,l]},t.rangeRound=function(on){return[s,l]=on,s=+s,l=+l,d=!0,tn()},t.bandwidth=function(){return c},t.step=function(){return u},t.round=function(on){return arguments.length?(d=!!on,tn()):d},t.padding=function(on){return arguments.length?(Ct=Math.min(1,ar=+on),tn()):Ct},t.paddingInner=function(on){return arguments.length?(Ct=Math.min(1,on),tn()):Ct},t.paddingOuter=function(on){return arguments.length?(ar=+on,tn()):ar},t.align=function(on){return arguments.length?(en=Math.max(0,Math.min(1,on)),tn()):en},t.copy=function(){return cf(n(),[s,l]).round(d).paddingInner(Ct).paddingOuter(ar).align(en)},et.apply(tn(),arguments)}function I1(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return I1(n())},t}function W6(){return I1(cf.apply(null,arguments).paddingInner(1))}function V6(t){return function(){return t}}function Io(t){return+t}var dl=[0,1];function Fn(t){return t}function oc(t,n){return(n-=t=+t)?function(a){return(a-t)/n}:V6(isNaN(n)?NaN:.5)}function G6(t,n){var a;return t>n&&(a=t,t=n,n=a),function(s){return Math.max(t,Math.min(n,s))}}function Z6(t,n,a){var s=t[0],l=t[1],u=n[0],c=n[1];return l<s?(s=oc(l,s),u=a(c,u)):(s=oc(s,l),u=a(u,c)),function(d){return u(s(d))}}function Q6(t,n,a){var s=Math.min(t.length,n.length)-1,l=new Array(s),u=new Array(s),c=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++c<s;)l[c]=oc(t[c],t[c+1]),u[c]=a(n[c],n[c+1]);return function(d){var Ct=Ft(t,d,1,s)-1;return u[Ct](l[Ct](d))}}function ci(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ca(){var t=dl,n=dl,a=Ht,s,l,u,c=Fn,d,Ct,ar;function en(){var on=Math.min(t.length,n.length);return c!==Fn&&(c=G6(t[0],t[on-1])),d=on>2?Q6:Z6,Ct=ar=null,tn}function tn(on){return on==null||isNaN(on=+on)?u:(Ct||(Ct=d(t.map(s),n,a)))(s(c(on)))}return tn.invert=function(on){return c(l((ar||(ar=d(n,t.map(s),Kn)))(on)))},tn.domain=function(on){return arguments.length?(t=Array.from(on,Io),en()):t.slice()},tn.range=function(on){return arguments.length?(n=Array.from(on),en()):n.slice()},tn.rangeRound=function(on){return n=Array.from(on),a=Vo,en()},tn.clamp=function(on){return arguments.length?(c=on?!0:Fn,en()):c!==Fn},tn.interpolate=function(on){return arguments.length?(a=on,en()):a},tn.unknown=function(on){return arguments.length?(u=on,tn):u},function(on,fn){return s=on,l=fn,en()}}function ff(){return ca()(Fn,Fn)}function R1(t,n,a,s){var l=Vi(t,n,a),u;switch(s=We(s??",f"),s.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(n));return s.precision==null&&!isNaN(u=N0(l,c))&&(s.precision=u),Yc(s,c)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(u=I0(l,Math.max(Math.abs(t),Math.abs(n))))&&(s.precision=u-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(u=S0(l))&&(s.precision=u-(s.type==="%")*2);break}}return ia(s)}function jt(t){var n=t.domain;return t.ticks=function(a){var s=n();return oe$1(s[0],s[s.length-1],a??10)},t.tickFormat=function(a,s){var l=n();return R1(l[0],l[l.length-1],a??10,s)},t.nice=function(a){a==null&&(a=10);var s=n(),l=0,u=s.length-1,c=s[l],d=s[u],Ct,ar,en=10;for(d<c&&(ar=c,c=d,d=ar,ar=l,l=u,u=ar);en-- >0;){if(ar=ae$1(c,d,a),ar===Ct)return s[l]=c,s[u]=d,n(s);if(ar>0)c=Math.floor(c/ar)*ar,d=Math.ceil(d/ar)*ar;else if(ar<0)c=Math.ceil(c*ar)/ar,d=Math.floor(d*ar)/ar;else break;Ct=ar}return t},t}function C1(){var t=ff();return t.copy=function(){return ci(t,C1())},et.apply(t,arguments),jt(t)}function P1(t){var n;function a(s){return s==null||isNaN(s=+s)?n:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(t=Array.from(s,Io),a):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return P1(t).unknown(n)},t=arguments.length?Array.from(t,Io):[0,1],jt(a)}function D1(t,n){t=t.slice();var a=0,s=t.length-1,l=t[a],u=t[s],c;return u<l&&(c=a,a=s,s=c,c=l,l=u,u=c),t[a]=n.floor(l),t[s]=n.ceil(u),t}function gl(t){return Math.log(t)}function pl(t){return Math.exp(t)}function K6(t){return-Math.log(-t)}function J6(t){return-Math.exp(-t)}function n5(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t5(t){return t===10?n5:t===Math.E?Math.exp:n=>Math.pow(t,n)}function e5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function ml(t){return(n,a)=>-t(-n,a)}function sf(t){const n=t(gl,pl),a=n.domain;let s=10,l,u;function c(){return l=e5(s),u=t5(s),a()[0]<0?(l=ml(l),u=ml(u),t(K6,J6)):t(gl,pl),n}return n.base=function(d){return arguments.length?(s=+d,c()):s},n.domain=function(d){return arguments.length?(a(d),c()):a()},n.ticks=d=>{const Ct=a();let ar=Ct[0],en=Ct[Ct.length-1];const tn=en<ar;tn&&([ar,en]=[en,ar]);let on=l(ar),fn=l(en),dn,Cn;const Rn=d==null?10:+d;let ax=[];if(!(s%1)&&fn-on<Rn){if(on=Math.floor(on),fn=Math.ceil(fn),ar>0){for(;on<=fn;++on)for(dn=1;dn<s;++dn)if(Cn=on<0?dn/u(-on):dn*u(on),!(Cn<ar)){if(Cn>en)break;ax.push(Cn)}}else for(;on<=fn;++on)for(dn=s-1;dn>=1;--dn)if(Cn=on>0?dn/u(-on):dn*u(on),!(Cn<ar)){if(Cn>en)break;ax.push(Cn)}ax.length*2<Rn&&(ax=oe$1(ar,en,Rn))}else ax=oe$1(on,fn,Math.min(fn-on,Rn)).map(u);return tn?ax.reverse():ax},n.tickFormat=(d,Ct)=>{if(d==null&&(d=10),Ct==null&&(Ct=s===10?"s":","),typeof Ct!="function"&&(!(s%1)&&(Ct=We(Ct)).precision==null&&(Ct.trim=!0),Ct=ia(Ct)),d===1/0)return Ct;const ar=Math.max(1,s*d/n.ticks().length);return en=>{let tn=en/u(Math.round(l(en)));return tn*s<s-.5&&(tn*=s),tn<=ar?Ct(en):""}},n.nice=()=>a(D1(a(),{floor:d=>u(Math.floor(l(d))),ceil:d=>u(Math.ceil(l(d)))})),n}function z1(){const t=sf(ca()).domain([1,10]);return t.copy=()=>ci(t,z1()).base(t.base()),et.apply(t,arguments),t}function yl(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function _l(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function lf(t){var n=1,a=t(yl(n),_l(n));return a.constant=function(s){return arguments.length?t(yl(n=+s),_l(n)):n},jt(a)}function O1(){var t=lf(ca());return t.copy=function(){return ci(t,O1()).constant(t.constant())},et.apply(t,arguments)}function vl(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function r5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i5(t){return t<0?-t*t:t*t}function hf(t){var n=t(Fn,Fn),a=1;function s(){return a===1?t(Fn,Fn):a===.5?t(r5,i5):t(vl(a),vl(1/a))}return n.exponent=function(l){return arguments.length?(a=+l,s()):a},jt(n)}function df(){var t=hf(ca());return t.copy=function(){return ci(t,df()).exponent(t.exponent())},et.apply(t,arguments),t}function o5(){return df.apply(null,arguments).exponent(.5)}function bl(t){return Math.sign(t)*t*t}function a5(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Y1(){var t=ff(),n=[0,1],a=!1,s;function l(u){var c=a5(t(u));return isNaN(c)?s:a?Math.round(c):c}return l.invert=function(u){return t.invert(bl(u))},l.domain=function(u){return arguments.length?(t.domain(u),l):t.domain()},l.range=function(u){return arguments.length?(t.range((n=Array.from(u,Io)).map(bl)),l):n.slice()},l.rangeRound=function(u){return l.range(u).round(!0)},l.round=function(u){return arguments.length?(a=!!u,l):a},l.clamp=function(u){return arguments.length?(t.clamp(u),l):t.clamp()},l.unknown=function(u){return arguments.length?(s=u,l):s},l.copy=function(){return Y1(t.domain(),n).round(a).clamp(t.clamp()).unknown(s)},et.apply(l,arguments),jt(l)}function F1(){var t=[],n=[],a=[],s;function l(){var c=0,d=Math.max(1,n.length);for(a=new Array(d-1);++c<d;)a[c-1]=lh(t,c/d);return u}function u(c){return c==null||isNaN(c=+c)?s:n[Ft(a,c)]}return u.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:[d>0?a[d-1]:t[0],d<a.length?a[d]:t[t.length-1]]},u.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let d of c)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(hn),l()},u.range=function(c){return arguments.length?(n=Array.from(c),l()):n.slice()},u.unknown=function(c){return arguments.length?(s=c,u):s},u.quantiles=function(){return a.slice()},u.copy=function(){return F1().domain(t).range(n).unknown(s)},et.apply(u,arguments)}function q1(){var t=0,n=1,a=1,s=[.5],l=[0,1],u;function c(Ct){return Ct!=null&&Ct<=Ct?l[Ft(s,Ct,0,a)]:u}function d(){var Ct=-1;for(s=new Array(a);++Ct<a;)s[Ct]=((Ct+1)*n-(Ct-a)*t)/(a+1);return c}return c.domain=function(Ct){return arguments.length?([t,n]=Ct,t=+t,n=+n,d()):[t,n]},c.range=function(Ct){return arguments.length?(a=(l=Array.from(Ct)).length-1,d()):l.slice()},c.invertExtent=function(Ct){var ar=l.indexOf(Ct);return ar<0?[NaN,NaN]:ar<1?[t,s[0]]:ar>=a?[s[a-1],n]:[s[ar-1],s[ar]]},c.unknown=function(Ct){return arguments.length&&(u=Ct),c},c.thresholds=function(){return s.slice()},c.copy=function(){return q1().domain([t,n]).range(l).unknown(u)},et.apply(jt(c),arguments)}function L1(){var t=[.5],n=[0,1],a,s=1;function l(u){return u!=null&&u<=u?n[Ft(t,u,0,s)]:a}return l.domain=function(u){return arguments.length?(t=Array.from(u),s=Math.min(t.length,n.length-1),l):t.slice()},l.range=function(u){return arguments.length?(n=Array.from(u),s=Math.min(t.length,n.length-1),l):n.slice()},l.invertExtent=function(u){var c=n.indexOf(u);return[t[c-1],t[c]]},l.unknown=function(u){return arguments.length?(a=u,l):a},l.copy=function(){return L1().domain(t).range(n).unknown(a)},et.apply(l,arguments)}const eu=new Date,ru=new Date;function _n(t,n,a,s){function l(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return l.floor=u=>(t(u=new Date(+u)),u),l.ceil=u=>(t(u=new Date(u-1)),n(u,1),t(u),u),l.round=u=>{const c=l(u),d=l.ceil(u);return u-c<d-u?c:d},l.offset=(u,c)=>(n(u=new Date(+u),c==null?1:Math.floor(c)),u),l.range=(u,c,d)=>{const Ct=[];if(u=l.ceil(u),d=d==null?1:Math.floor(d),!(u<c)||!(d>0))return Ct;let ar;do Ct.push(ar=new Date(+u)),n(u,d),t(u);while(ar<u&&u<c);return Ct},l.filter=u=>_n(c=>{if(c>=c)for(;t(c),!u(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;n(c,-1),!u(c););else for(;--d>=0;)for(;n(c,1),!u(c););}),a&&(l.count=(u,c)=>(eu.setTime(+u),ru.setTime(+c),t(eu),t(ru),Math.floor(a(eu,ru))),l.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?l.filter(s?c=>s(c)%u===0:c=>l.count(0,c)%u===0):l)),l}const Qe=_n(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Qe.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_n(n=>{n.setTime(Math.floor(n/t)*t)},(n,a)=>{n.setTime(+n+a*t)},(n,a)=>(a-n)/t):Qe);const wl=Qe.range,At=1e3,tt=At*60,Et=tt*60,It=Et*24,gf=It*7,xl=It*30,iu=It*365,kt=_n(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*At)},(t,n)=>(n-t)/At,t=>t.getUTCSeconds()),Ml=kt.range,fa=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At)},(t,n)=>{t.setTime(+t+n*tt)},(t,n)=>(n-t)/tt,t=>t.getMinutes()),u5=fa.range,sa=_n(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*tt)},(t,n)=>(n-t)/tt,t=>t.getUTCMinutes()),c5=sa.range,la=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At-t.getMinutes()*tt)},(t,n)=>{t.setTime(+t+n*Et)},(t,n)=>(n-t)/Et,t=>t.getHours()),f5=la.range,ha=_n(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*Et)},(t,n)=>(n-t)/Et,t=>t.getUTCHours()),s5=ha.range,or=_n(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*tt)/It,t=>t.getDate()-1),l5=or.range,fi=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/It,t=>t.getUTCDate()-1),h5=fi.range,pf=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/It,t=>Math.floor(t/It)),d5=pf.range;function ve$1(t){return _n(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,a)=>{n.setDate(n.getDate()+a*7)},(n,a)=>(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*tt)/gf)}const Ke=ve$1(0),Zr=ve$1(1),B1=ve$1(2),U1=ve$1(3),de$1=ve$1(4),X1=ve$1(5),H1=ve$1(6),$l=Ke.range,g5=Zr.range,p5=B1.range,m5=U1.range,y5=de$1.range,_5=X1.range,v5=H1.range;function be$1(t){return _n(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCDate(n.getUTCDate()+a*7)},(n,a)=>(a-n)/gf)}const Je=be$1(0),Qr=be$1(1),j1=be$1(2),W1=be$1(3),ge$1=be$1(4),V1=be$1(5),G1=be$1(6),Tl=Je.range,b5=Qr.range,w5=j1.range,x5=W1.range,M5=ge$1.range,$5=V1.range,T5=G1.range,da=_n(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),A5=da.range,ga=_n(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),E5=ga.range,mt=_n(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());mt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,a)=>{n.setFullYear(n.getFullYear()+a*t)});const k5=mt.range,yt=_n(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCFullYear(n.getUTCFullYear()+a*t)});const S5=yt.range;function Z1(t,n,a,s,l,u){const c=[[kt,1,At],[kt,5,5*At],[kt,15,15*At],[kt,30,30*At],[u,1,tt],[u,5,5*tt],[u,15,15*tt],[u,30,30*tt],[l,1,Et],[l,3,3*Et],[l,6,6*Et],[l,12,12*Et],[s,1,It],[s,2,2*It],[a,1,gf],[n,1,xl],[n,3,3*xl],[t,1,iu]];function d(ar,en,tn){const on=en<ar;on&&([ar,en]=[en,ar]);const fn=tn&&typeof tn.range=="function"?tn:Ct(ar,en,tn),dn=fn?fn.range(ar,+en+1):[];return on?dn.reverse():dn}function Ct(ar,en,tn){const on=Math.abs(en-ar)/tn,fn=Oo(([,,Rn])=>Rn).right(c,on);if(fn===c.length)return t.every(Vi(ar/iu,en/iu,tn));if(fn===0)return Qe.every(Math.max(Vi(ar,en,tn),1));const[dn,Cn]=c[on/c[fn-1][2]<c[fn][2]/on?fn-1:fn];return dn.every(Cn)}return[d,Ct]}const[Q1,K1]=Z1(yt,ga,Je,pf,ha,sa),[J1,nd]=Z1(mt,da,Ke,or,la,fa);function ou(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function au(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lr(t,n,a){return{y:t,m:n,d:a,H:0,M:0,S:0,L:0}}function td(t){var n=t.dateTime,a=t.date,s=t.time,l=t.periods,u=t.days,c=t.shortDays,d=t.months,Ct=t.shortMonths,ar=hr(l),en=dr(l),tn=hr(u),on=dr(u),fn=hr(c),dn=dr(c),Cn=hr(d),Rn=dr(d),ax=hr(Ct),ox=dr(Ct),sx={a:Ax,A:Mx,b:Rx,B:Cx,c:null,d:Il,e:Il,f:K5,g:c8,G:s8,H:G5,I:Z5,j:Q5,L:ed,m:J5,M:n8,p:Lx,q:qx,Q:Pl,s:Dl,S:t8,u:e8,U:r8,V:i8,w:o8,W:a8,x:null,X:null,y:u8,Y:f8,Z:l8,"%":Cl},lx={a:Ix,A:Px,b:Nx,B:Bx,c:null,d:Rl,e:Rl,f:p8,g:T8,G:E8,H:h8,I:d8,j:g8,L:id$1,m:m8,M:y8,p:$x,q:Vx,Q:Pl,s:Dl,S:_8,u:v8,U:b8,V:w8,w:x8,W:M8,x:null,X:null,y:$8,Y:A8,Z:k8,"%":Cl},cx={a:hx,A:vx,b:yx,B:Sx,c:_x,d:Sl,e:Sl,f:H5,g:kl,G:El,H:Nl,I:Nl,j:L5,L:X5,m:q5,M:B5,p:px,q:F5,Q:W5,s:V5,S:U5,u:P5,U:D5,V:z5,w:C5,W:O5,x:Ex,X:bx,y:kl,Y:El,Z:Y5,"%":j5};sx.x=fx(a,sx),sx.X=fx(s,sx),sx.c=fx(n,sx),lx.x=fx(a,lx),lx.X=fx(s,lx),lx.c=fx(n,lx);function fx(Gx,Zx){return function(jx){var Hx=[],iE=-1,Xx=0,rE=Gx.length,uE,aE,Kx;for(jx instanceof Date||(jx=new Date(+jx));++iE<rE;)Gx.charCodeAt(iE)===37&&(Hx.push(Gx.slice(Xx,iE)),(aE=Al[uE=Gx.charAt(++iE)])!=null?uE=Gx.charAt(++iE):aE=uE==="e"?" ":"0",(Kx=Zx[uE])&&(uE=Kx(jx,aE)),Hx.push(uE),Xx=iE+1);return Hx.push(Gx.slice(Xx,iE)),Hx.join("")}}function gx(Gx,Zx){return function(jx){var Hx=lr(1900,void 0,1),iE=mx(Hx,Gx,jx+="",0),Xx,rE;if(iE!=jx.length)return null;if("Q"in Hx)return new Date(Hx.Q);if("s"in Hx)return new Date(Hx.s*1e3+("L"in Hx?Hx.L:0));if(Zx&&!("Z"in Hx)&&(Hx.Z=0),"p"in Hx&&(Hx.H=Hx.H%12+Hx.p*12),Hx.m===void 0&&(Hx.m="q"in Hx?Hx.q:0),"V"in Hx){if(Hx.V<1||Hx.V>53)return null;"w"in Hx||(Hx.w=1),"Z"in Hx?(Xx=au(lr(Hx.y,0,1)),rE=Xx.getUTCDay(),Xx=rE>4||rE===0?Qr.ceil(Xx):Qr(Xx),Xx=fi.offset(Xx,(Hx.V-1)*7),Hx.y=Xx.getUTCFullYear(),Hx.m=Xx.getUTCMonth(),Hx.d=Xx.getUTCDate()+(Hx.w+6)%7):(Xx=ou(lr(Hx.y,0,1)),rE=Xx.getDay(),Xx=rE>4||rE===0?Zr.ceil(Xx):Zr(Xx),Xx=or.offset(Xx,(Hx.V-1)*7),Hx.y=Xx.getFullYear(),Hx.m=Xx.getMonth(),Hx.d=Xx.getDate()+(Hx.w+6)%7)}else("W"in Hx||"U"in Hx)&&("w"in Hx||(Hx.w="u"in Hx?Hx.u%7:"W"in Hx?1:0),rE="Z"in Hx?au(lr(Hx.y,0,1)).getUTCDay():ou(lr(Hx.y,0,1)).getDay(),Hx.m=0,Hx.d="W"in Hx?(Hx.w+6)%7+Hx.W*7-(rE+5)%7:Hx.w+Hx.U*7-(rE+6)%7);return"Z"in Hx?(Hx.H+=Hx.Z/100|0,Hx.M+=Hx.Z%100,au(Hx)):ou(Hx)}}function mx(Gx,Zx,jx,Hx){for(var iE=0,Xx=Zx.length,rE=jx.length,uE,aE;iE<Xx;){if(Hx>=rE)return-1;if(uE=Zx.charCodeAt(iE++),uE===37){if(uE=Zx.charAt(iE++),aE=cx[uE in Al?Zx.charAt(iE++):uE],!aE||(Hx=aE(Gx,jx,Hx))<0)return-1}else if(uE!=jx.charCodeAt(Hx++))return-1}return Hx}function px(Gx,Zx,jx){var Hx=ar.exec(Zx.slice(jx));return Hx?(Gx.p=en.get(Hx[0].toLowerCase()),jx+Hx[0].length):-1}function hx(Gx,Zx,jx){var Hx=fn.exec(Zx.slice(jx));return Hx?(Gx.w=dn.get(Hx[0].toLowerCase()),jx+Hx[0].length):-1}function vx(Gx,Zx,jx){var Hx=tn.exec(Zx.slice(jx));return Hx?(Gx.w=on.get(Hx[0].toLowerCase()),jx+Hx[0].length):-1}function yx(Gx,Zx,jx){var Hx=ax.exec(Zx.slice(jx));return Hx?(Gx.m=ox.get(Hx[0].toLowerCase()),jx+Hx[0].length):-1}function Sx(Gx,Zx,jx){var Hx=Cn.exec(Zx.slice(jx));return Hx?(Gx.m=Rn.get(Hx[0].toLowerCase()),jx+Hx[0].length):-1}function _x(Gx,Zx,jx){return mx(Gx,n,Zx,jx)}function Ex(Gx,Zx,jx){return mx(Gx,a,Zx,jx)}function bx(Gx,Zx,jx){return mx(Gx,s,Zx,jx)}function Ax(Gx){return c[Gx.getDay()]}function Mx(Gx){return u[Gx.getDay()]}function Rx(Gx){return Ct[Gx.getMonth()]}function Cx(Gx){return d[Gx.getMonth()]}function Lx(Gx){return l[+(Gx.getHours()>=12)]}function qx(Gx){return 1+~~(Gx.getMonth()/3)}function Ix(Gx){return c[Gx.getUTCDay()]}function Px(Gx){return u[Gx.getUTCDay()]}function Nx(Gx){return Ct[Gx.getUTCMonth()]}function Bx(Gx){return d[Gx.getUTCMonth()]}function $x(Gx){return l[+(Gx.getUTCHours()>=12)]}function Vx(Gx){return 1+~~(Gx.getUTCMonth()/3)}return{format:function(Gx){var Zx=fx(Gx+="",sx);return Zx.toString=function(){return Gx},Zx},parse:function(Gx){var Zx=gx(Gx+="",!1);return Zx.toString=function(){return Gx},Zx},utcFormat:function(Gx){var Zx=fx(Gx+="",lx);return Zx.toString=function(){return Gx},Zx},utcParse:function(Gx){var Zx=gx(Gx+="",!0);return Zx.toString=function(){return Gx},Zx}}}var Al={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,N5=/^%/,I5=/[\\^$*+?|[\]().{}]/g;function rn(t,n,a){var s=t<0?"-":"",l=(s?-t:t)+"",u=l.length;return s+(u<a?new Array(a-u+1).join(n)+l:l)}function R5(t){return t.replace(I5,"\\$&")}function hr(t){return new RegExp("^(?:"+t.map(R5).join("|")+")","i")}function dr(t){return new Map(t.map((n,a)=>[n.toLowerCase(),a]))}function C5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.w=+s[0],a+s[0].length):-1}function P5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.u=+s[0],a+s[0].length):-1}function D5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.U=+s[0],a+s[0].length):-1}function z5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.V=+s[0],a+s[0].length):-1}function O5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.W=+s[0],a+s[0].length):-1}function El(t,n,a){var s=Tn.exec(n.slice(a,a+4));return s?(t.y=+s[0],a+s[0].length):-1}function kl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Y5(t,n,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function F5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.q=s[0]*3-3,a+s[0].length):-1}function q5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.m=s[0]-1,a+s[0].length):-1}function Sl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.d=+s[0],a+s[0].length):-1}function L5(t,n,a){var s=Tn.exec(n.slice(a,a+3));return s?(t.m=0,t.d=+s[0],a+s[0].length):-1}function Nl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.H=+s[0],a+s[0].length):-1}function B5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.M=+s[0],a+s[0].length):-1}function U5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.S=+s[0],a+s[0].length):-1}function X5(t,n,a){var s=Tn.exec(n.slice(a,a+3));return s?(t.L=+s[0],a+s[0].length):-1}function H5(t,n,a){var s=Tn.exec(n.slice(a,a+6));return s?(t.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function j5(t,n,a){var s=N5.exec(n.slice(a,a+1));return s?a+s[0].length:-1}function W5(t,n,a){var s=Tn.exec(n.slice(a));return s?(t.Q=+s[0],a+s[0].length):-1}function V5(t,n,a){var s=Tn.exec(n.slice(a));return s?(t.s=+s[0],a+s[0].length):-1}function Il(t,n){return rn(t.getDate(),n,2)}function G5(t,n){return rn(t.getHours(),n,2)}function Z5(t,n){return rn(t.getHours()%12||12,n,2)}function Q5(t,n){return rn(1+or.count(mt(t),t),n,3)}function ed(t,n){return rn(t.getMilliseconds(),n,3)}function K5(t,n){return ed(t,n)+"000"}function J5(t,n){return rn(t.getMonth()+1,n,2)}function n8(t,n){return rn(t.getMinutes(),n,2)}function t8(t,n){return rn(t.getSeconds(),n,2)}function e8(t){var n=t.getDay();return n===0?7:n}function r8(t,n){return rn(Ke.count(mt(t)-1,t),n,2)}function rd(t){var n=t.getDay();return n>=4||n===0?de$1(t):de$1.ceil(t)}function i8(t,n){return t=rd(t),rn(de$1.count(mt(t),t)+(mt(t).getDay()===4),n,2)}function o8(t){return t.getDay()}function a8(t,n){return rn(Zr.count(mt(t)-1,t),n,2)}function u8(t,n){return rn(t.getFullYear()%100,n,2)}function c8(t,n){return t=rd(t),rn(t.getFullYear()%100,n,2)}function f8(t,n){return rn(t.getFullYear()%1e4,n,4)}function s8(t,n){var a=t.getDay();return t=a>=4||a===0?de$1(t):de$1.ceil(t),rn(t.getFullYear()%1e4,n,4)}function l8(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+rn(n/60|0,"0",2)+rn(n%60,"0",2)}function Rl(t,n){return rn(t.getUTCDate(),n,2)}function h8(t,n){return rn(t.getUTCHours(),n,2)}function d8(t,n){return rn(t.getUTCHours()%12||12,n,2)}function g8(t,n){return rn(1+fi.count(yt(t),t),n,3)}function id$1(t,n){return rn(t.getUTCMilliseconds(),n,3)}function p8(t,n){return id$1(t,n)+"000"}function m8(t,n){return rn(t.getUTCMonth()+1,n,2)}function y8(t,n){return rn(t.getUTCMinutes(),n,2)}function _8(t,n){return rn(t.getUTCSeconds(),n,2)}function v8(t){var n=t.getUTCDay();return n===0?7:n}function b8(t,n){return rn(Je.count(yt(t)-1,t),n,2)}function od(t){var n=t.getUTCDay();return n>=4||n===0?ge$1(t):ge$1.ceil(t)}function w8(t,n){return t=od(t),rn(ge$1.count(yt(t),t)+(yt(t).getUTCDay()===4),n,2)}function x8(t){return t.getUTCDay()}function M8(t,n){return rn(Qr.count(yt(t)-1,t),n,2)}function $8(t,n){return rn(t.getUTCFullYear()%100,n,2)}function T8(t,n){return t=od(t),rn(t.getUTCFullYear()%100,n,2)}function A8(t,n){return rn(t.getUTCFullYear()%1e4,n,4)}function E8(t,n){var a=t.getUTCDay();return t=a>=4||a===0?ge$1(t):ge$1.ceil(t),rn(t.getUTCFullYear()%1e4,n,4)}function k8(){return"+0000"}function Cl(){return"%"}function Pl(t){return+t}function Dl(t){return Math.floor(+t/1e3)}var Ne$1,mf,ad,pa,yf;ud({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ud(t){return Ne$1=td(t),mf=Ne$1.format,ad=Ne$1.parse,pa=Ne$1.utcFormat,yf=Ne$1.utcParse,Ne$1}var cd="%Y-%m-%dT%H:%M:%S.%LZ";function S8(t){return t.toISOString()}var N8=Date.prototype.toISOString?S8:pa(cd);function I8(t){var n=new Date(t);return isNaN(n)?null:n}var R8=+new Date("2000-01-01T00:00:00.000Z")?I8:yf(cd);function C8(t){return new Date(t)}function P8(t){return t instanceof Date?+t:+new Date(+t)}function _f(t,n,a,s,l,u,c,d,Ct,ar){var en=ff(),tn=en.invert,on=en.domain,fn=ar(".%L"),dn=ar(":%S"),Cn=ar("%I:%M"),Rn=ar("%I %p"),ax=ar("%a %d"),ox=ar("%b %d"),sx=ar("%B"),lx=ar("%Y");function cx(fx){return(Ct(fx)<fx?fn:d(fx)<fx?dn:c(fx)<fx?Cn:u(fx)<fx?Rn:s(fx)<fx?l(fx)<fx?ax:ox:a(fx)<fx?sx:lx)(fx)}return en.invert=function(fx){return new Date(tn(fx))},en.domain=function(fx){return arguments.length?on(Array.from(fx,P8)):on().map(C8)},en.ticks=function(fx){var gx=on();return t(gx[0],gx[gx.length-1],fx??10)},en.tickFormat=function(fx,gx){return gx==null?cx:ar(gx)},en.nice=function(fx){var gx=on();return(!fx||typeof fx.range!="function")&&(fx=n(gx[0],gx[gx.length-1],fx??10)),fx?on(D1(gx,fx)):en},en.copy=function(){return ci(en,_f(t,n,a,s,l,u,c,d,Ct,ar))},en}function D8(){return et.apply(_f(J1,nd,mt,da,Ke,or,la,fa,kt,mf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function z8(){return et.apply(_f(Q1,K1,yt,ga,Je,fi,ha,sa,kt,pa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ma(){var t=0,n=1,a,s,l,u,c=Fn,d=!1,Ct;function ar(tn){return tn==null||isNaN(tn=+tn)?Ct:c(l===0?.5:(tn=(u(tn)-a)*l,d?Math.max(0,Math.min(1,tn)):tn))}ar.domain=function(tn){return arguments.length?([t,n]=tn,a=u(t=+t),s=u(n=+n),l=a===s?0:1/(s-a),ar):[t,n]},ar.clamp=function(tn){return arguments.length?(d=!!tn,ar):d},ar.interpolator=function(tn){return arguments.length?(c=tn,ar):c};function en(tn){return function(on){var fn,dn;return arguments.length?([fn,dn]=on,c=tn(fn,dn),ar):[c(0),c(1)]}}return ar.range=en(Ht),ar.rangeRound=en(Vo),ar.unknown=function(tn){return arguments.length?(Ct=tn,ar):Ct},function(tn){return u=tn,a=tn(t),s=tn(n),l=a===s?0:1/(s-a),ar}}function Wt(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function fd(){var t=jt(ma()(Fn));return t.copy=function(){return Wt(t,fd())},Rt.apply(t,arguments)}function sd(){var t=sf(ma()).domain([1,10]);return t.copy=function(){return Wt(t,sd()).base(t.base())},Rt.apply(t,arguments)}function ld(){var t=lf(ma());return t.copy=function(){return Wt(t,ld()).constant(t.constant())},Rt.apply(t,arguments)}function vf(){var t=hf(ma());return t.copy=function(){return Wt(t,vf()).exponent(t.exponent())},Rt.apply(t,arguments)}function O8(){return vf.apply(null,arguments).exponent(.5)}function hd(){var t=[],n=Fn;function a(s){if(s!=null&&!isNaN(s=+s))return n((Ft(t,s,1)-1)/(t.length-1))}return a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(hn),a},a.interpolator=function(s){return arguments.length?(n=s,a):n},a.range=function(){return t.map((s,l)=>n(l/(t.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(l,u)=>zr(t,u/s))},a.copy=function(){return hd(n).domain(t)},Rt.apply(a,arguments)}function ya(){var t=0,n=.5,a=1,s=1,l,u,c,d,Ct,ar=Fn,en,tn=!1,on;function fn(Cn){return isNaN(Cn=+Cn)?on:(Cn=.5+((Cn=+en(Cn))-u)*(s*Cn<s*u?d:Ct),ar(tn?Math.max(0,Math.min(1,Cn)):Cn))}fn.domain=function(Cn){return arguments.length?([t,n,a]=Cn,l=en(t=+t),u=en(n=+n),c=en(a=+a),d=l===u?0:.5/(u-l),Ct=u===c?0:.5/(c-u),s=u<l?-1:1,fn):[t,n,a]},fn.clamp=function(Cn){return arguments.length?(tn=!!Cn,fn):tn},fn.interpolator=function(Cn){return arguments.length?(ar=Cn,fn):ar};function dn(Cn){return function(Rn){var ax,ox,sx;return arguments.length?([ax,ox,sx]=Rn,ar=i0(Cn,[ax,ox,sx]),fn):[ar(0),ar(.5),ar(1)]}}return fn.range=dn(Ht),fn.rangeRound=dn(Vo),fn.unknown=function(Cn){return arguments.length?(on=Cn,fn):on},function(Cn){return en=Cn,l=Cn(t),u=Cn(n),c=Cn(a),d=l===u?0:.5/(u-l),Ct=u===c?0:.5/(c-u),s=u<l?-1:1,fn}}function dd(){var t=jt(ya()(Fn));return t.copy=function(){return Wt(t,dd())},Rt.apply(t,arguments)}function gd(){var t=sf(ya()).domain([.1,1,10]);return t.copy=function(){return Wt(t,gd()).base(t.base())},Rt.apply(t,arguments)}function pd(){var t=lf(ya());return t.copy=function(){return Wt(t,pd()).constant(t.constant())},Rt.apply(t,arguments)}function bf(){var t=hf(ya());return t.copy=function(){return Wt(t,bf()).exponent(t.exponent())},Rt.apply(t,arguments)}function Y8(){return bf.apply(null,arguments).exponent(.5)}function G$1(t){for(var n=t.length/6|0,a=new Array(n),s=0;s<n;)a[s]="#"+t.slice(s*6,++s*6);return a}const F8=G$1("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),q8=G$1("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),L8=G$1("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),B8=G$1("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),U8=G$1("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),X8=G$1("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),H8=G$1("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),j8=G$1("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),W8=G$1("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),V8=G$1("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),G8=G$1("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),un=t=>Hh(t[t.length-1]);var md=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(G$1);const Z8=un(md);var yd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(G$1);const Q8=un(yd);var _d=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(G$1);const K8=un(_d);var vd=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(G$1);const J8=un(vd);var bd=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(G$1);const n4=un(bd);var wd=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(G$1);const t4=un(wd);var xd=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(G$1);const e4=un(xd);var Md=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(G$1);const r4=un(Md);var $d=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(G$1);const i4=un($d);var Td=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(G$1);const o4=un(Td);var Ad=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(G$1);const a4=un(Ad);var Ed=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(G$1);const u4=un(Ed);var kd=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(G$1);const c4=un(kd);var Sd=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(G$1);const f4=un(Sd);var Nd=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(G$1);const s4=un(Nd);var Id=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(G$1);const l4=un(Id);var Rd=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(G$1);const h4=un(Rd);var Cd=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(G$1);const d4=un(Cd);var Pd=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(G$1);const g4=un(Pd);var Dd=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(G$1);const p4=un(Dd);var zd=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(G$1);const m4=un(zd);var Od=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(G$1);const y4=un(Od);var Yd=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(G$1);const _4=un(Yd);var Fd=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(G$1);const v4=un(Fd);var qd=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(G$1);const b4=un(qd);var Ld=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(G$1);const w4=un(Ld);var Bd=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(G$1);const x4=un(Bd);function M4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const $4=Go(ut(300,.5,0),ut(-240,.5,1));var T4=Go(ut(-100,.75,.35),ut(80,1.5,.8)),A4=Go(ut(260,.75,.35),ut(80,1.5,.8)),Si=ut();function E4(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Si.h=360*t-100,Si.s=1.5-1.5*n,Si.l=.8-.9*n,Si+""}var Ni=Ue(),k4=Math.PI/3,S4=Math.PI*2/3;function N4(t){var n;return t=(.5-t)*Math.PI,Ni.r=255*(n=Math.sin(t))*n,Ni.g=255*(n=Math.sin(t+k4))*n,Ni.b=255*(n=Math.sin(t+S4))*n,Ni+""}function I4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function _a$1(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}const R4=_a$1(G$1("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var C4=_a$1(G$1("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P4=_a$1(G$1("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D4=_a$1(G$1("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function V$1(t){return function(){return t}}const zl=Math.abs,Nn=Math.atan2,Mt=Math.cos,z4=Math.max,Fe$1=Math.min,jn$1=Math.sin,cn=Math.sqrt,In=1e-12,Bt=Math.PI,Ro=Bt/2,Yt=2*Bt;function O4(t){return t>1?0:t<-1?Bt:Math.acos(t)}function Ol(t){return t>=1?Ro:t<=-1?-Ro:Math.asin(t)}function si(t){let n=3;return t.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);n=s}return t},()=>new ti(n)}function Y4(t){return t.innerRadius}function F4(t){return t.outerRadius}function q4(t){return t.startAngle}function L4(t){return t.endAngle}function B4(t){return t&&t.padAngle}function U4(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=tn*Ct-en*ar;if(!(on*on<In))return on=(en*(n-u)-tn*(t-l))/on,[t+on*Ct,n+on*ar]}function Ii(t,n,a,s,l,u,c){var d=t-a,Ct=n-s,ar=(c?u:-u)/cn(d*d+Ct*Ct),en=ar*Ct,tn=-ar*d,on=t+en,fn=n+tn,dn=a+en,Cn=s+tn,Rn=(on+dn)/2,ax=(fn+Cn)/2,ox=dn-on,sx=Cn-fn,lx=ox*ox+sx*sx,cx=l-u,fx=on*Cn-dn*fn,gx=(sx<0?-1:1)*cn(z4(0,cx*cx*lx-fx*fx)),mx=(fx*sx-ox*gx)/lx,px=(-fx*ox-sx*gx)/lx,hx=(fx*sx+ox*gx)/lx,vx=(-fx*ox+sx*gx)/lx,yx=mx-Rn,Sx=px-ax,_x=hx-Rn,Ex=vx-ax;return yx*yx+Sx*Sx>_x*_x+Ex*Ex&&(mx=hx,px=vx),{cx:mx,cy:px,x01:-en,y01:-tn,x11:mx*(l/cx-1),y11:px*(l/cx-1)}}function X4(){var t=Y4,n=F4,a=V$1(0),s=null,l=q4,u=L4,c=B4,d=null,Ct=si(ar);function ar(){var en,tn,on=+t.apply(this,arguments),fn=+n.apply(this,arguments),dn=l.apply(this,arguments)-Ro,Cn=u.apply(this,arguments)-Ro,Rn=zl(Cn-dn),ax=Cn>dn;if(d||(d=en=Ct()),fn<on&&(tn=fn,fn=on,on=tn),!(fn>In))d.moveTo(0,0);else if(Rn>Yt-In)d.moveTo(fn*Mt(dn),fn*jn$1(dn)),d.arc(0,0,fn,dn,Cn,!ax),on>In&&(d.moveTo(on*Mt(Cn),on*jn$1(Cn)),d.arc(0,0,on,Cn,dn,ax));else{var ox=dn,sx=Cn,lx=dn,cx=Cn,fx=Rn,gx=Rn,mx=c.apply(this,arguments)/2,px=mx>In&&(s?+s.apply(this,arguments):cn(on*on+fn*fn)),hx=Fe$1(zl(fn-on)/2,+a.apply(this,arguments)),vx=hx,yx=hx,Sx,_x;if(px>In){var Ex=Ol(px/on*jn$1(mx)),bx=Ol(px/fn*jn$1(mx));(fx-=Ex*2)>In?(Ex*=ax?1:-1,lx+=Ex,cx-=Ex):(fx=0,lx=cx=(dn+Cn)/2),(gx-=bx*2)>In?(bx*=ax?1:-1,ox+=bx,sx-=bx):(gx=0,ox=sx=(dn+Cn)/2)}var Ax=fn*Mt(ox),Mx=fn*jn$1(ox),Rx=on*Mt(cx),Cx=on*jn$1(cx);if(hx>In){var Lx=fn*Mt(sx),qx=fn*jn$1(sx),Ix=on*Mt(lx),Px=on*jn$1(lx),Nx;if(Rn<Bt)if(Nx=U4(Ax,Mx,Ix,Px,Lx,qx,Rx,Cx)){var Bx=Ax-Nx[0],$x=Mx-Nx[1],Vx=Lx-Nx[0],Gx=qx-Nx[1],Zx=1/jn$1(O4((Bx*Vx+$x*Gx)/(cn(Bx*Bx+$x*$x)*cn(Vx*Vx+Gx*Gx)))/2),jx=cn(Nx[0]*Nx[0]+Nx[1]*Nx[1]);vx=Fe$1(hx,(on-jx)/(Zx-1)),yx=Fe$1(hx,(fn-jx)/(Zx+1))}else vx=yx=0}gx>In?yx>In?(Sx=Ii(Ix,Px,Ax,Mx,fn,yx,ax),_x=Ii(Lx,qx,Rx,Cx,fn,yx,ax),d.moveTo(Sx.cx+Sx.x01,Sx.cy+Sx.y01),yx<hx?d.arc(Sx.cx,Sx.cy,yx,Nn(Sx.y01,Sx.x01),Nn(_x.y01,_x.x01),!ax):(d.arc(Sx.cx,Sx.cy,yx,Nn(Sx.y01,Sx.x01),Nn(Sx.y11,Sx.x11),!ax),d.arc(0,0,fn,Nn(Sx.cy+Sx.y11,Sx.cx+Sx.x11),Nn(_x.cy+_x.y11,_x.cx+_x.x11),!ax),d.arc(_x.cx,_x.cy,yx,Nn(_x.y11,_x.x11),Nn(_x.y01,_x.x01),!ax))):(d.moveTo(Ax,Mx),d.arc(0,0,fn,ox,sx,!ax)):d.moveTo(Ax,Mx),!(on>In)||!(fx>In)?d.lineTo(Rx,Cx):vx>In?(Sx=Ii(Rx,Cx,Lx,qx,on,-vx,ax),_x=Ii(Ax,Mx,Ix,Px,on,-vx,ax),d.lineTo(Sx.cx+Sx.x01,Sx.cy+Sx.y01),vx<hx?d.arc(Sx.cx,Sx.cy,vx,Nn(Sx.y01,Sx.x01),Nn(_x.y01,_x.x01),!ax):(d.arc(Sx.cx,Sx.cy,vx,Nn(Sx.y01,Sx.x01),Nn(Sx.y11,Sx.x11),!ax),d.arc(0,0,on,Nn(Sx.cy+Sx.y11,Sx.cx+Sx.x11),Nn(_x.cy+_x.y11,_x.cx+_x.x11),ax),d.arc(_x.cx,_x.cy,vx,Nn(_x.y11,_x.x11),Nn(_x.y01,_x.x01),!ax))):d.arc(0,0,on,cx,lx,ax)}if(d.closePath(),en)return d=null,en+""||null}return ar.centroid=function(){var en=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,tn=(+l.apply(this,arguments)+ +u.apply(this,arguments))/2-Bt/2;return[Mt(tn)*en,jn$1(tn)*en]},ar.innerRadius=function(en){return arguments.length?(t=typeof en=="function"?en:V$1(+en),ar):t},ar.outerRadius=function(en){return arguments.length?(n=typeof en=="function"?en:V$1(+en),ar):n},ar.cornerRadius=function(en){return arguments.length?(a=typeof en=="function"?en:V$1(+en),ar):a},ar.padRadius=function(en){return arguments.length?(s=en==null?null:typeof en=="function"?en:V$1(+en),ar):s},ar.startAngle=function(en){return arguments.length?(l=typeof en=="function"?en:V$1(+en),ar):l},ar.endAngle=function(en){return arguments.length?(u=typeof en=="function"?en:V$1(+en),ar):u},ar.padAngle=function(en){return arguments.length?(c=typeof en=="function"?en:V$1(+en),ar):c},ar.context=function(en){return arguments.length?(d=en??null,ar):d},ar}var H4=Array.prototype.slice;function va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ud(t){this._context=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function ba(t){return new Ud(t)}function wf(t){return t[0]}function xf(t){return t[1]}function Mf(t,n){var a=V$1(!0),s=null,l=ba,u=null,c=si(d);t=typeof t=="function"?t:t===void 0?wf:V$1(t),n=typeof n=="function"?n:n===void 0?xf:V$1(n);function d(Ct){var ar,en=(Ct=va(Ct)).length,tn,on=!1,fn;for(s==null&&(u=l(fn=c())),ar=0;ar<=en;++ar)!(ar<en&&a(tn=Ct[ar],ar,Ct))===on&&((on=!on)?u.lineStart():u.lineEnd()),on&&u.point(+t(tn,ar,Ct),+n(tn,ar,Ct));if(fn)return u=null,fn+""||null}return d.x=function(Ct){return arguments.length?(t=typeof Ct=="function"?Ct:V$1(+Ct),d):t},d.y=function(Ct){return arguments.length?(n=typeof Ct=="function"?Ct:V$1(+Ct),d):n},d.defined=function(Ct){return arguments.length?(a=typeof Ct=="function"?Ct:V$1(!!Ct),d):a},d.curve=function(Ct){return arguments.length?(l=Ct,s!=null&&(u=l(s)),d):l},d.context=function(Ct){return arguments.length?(Ct==null?s=u=null:u=l(s=Ct),d):s},d}function Xd(t,n,a){var s=null,l=V$1(!0),u=null,c=ba,d=null,Ct=si(ar);t=typeof t=="function"?t:t===void 0?wf:V$1(+t),n=typeof n=="function"?n:V$1(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?xf:V$1(+a);function ar(tn){var on,fn,dn,Cn=(tn=va(tn)).length,Rn,ax=!1,ox,sx=new Array(Cn),lx=new Array(Cn);for(u==null&&(d=c(ox=Ct())),on=0;on<=Cn;++on){if(!(on<Cn&&l(Rn=tn[on],on,tn))===ax)if(ax=!ax)fn=on,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),dn=on-1;dn>=fn;--dn)d.point(sx[dn],lx[dn]);d.lineEnd(),d.areaEnd()}ax&&(sx[on]=+t(Rn,on,tn),lx[on]=+n(Rn,on,tn),d.point(s?+s(Rn,on,tn):sx[on],a?+a(Rn,on,tn):lx[on]))}if(ox)return d=null,ox+""||null}function en(){return Mf().defined(l).curve(c).context(u)}return ar.x=function(tn){return arguments.length?(t=typeof tn=="function"?tn:V$1(+tn),s=null,ar):t},ar.x0=function(tn){return arguments.length?(t=typeof tn=="function"?tn:V$1(+tn),ar):t},ar.x1=function(tn){return arguments.length?(s=tn==null?null:typeof tn=="function"?tn:V$1(+tn),ar):s},ar.y=function(tn){return arguments.length?(n=typeof tn=="function"?tn:V$1(+tn),a=null,ar):n},ar.y0=function(tn){return arguments.length?(n=typeof tn=="function"?tn:V$1(+tn),ar):n},ar.y1=function(tn){return arguments.length?(a=tn==null?null:typeof tn=="function"?tn:V$1(+tn),ar):a},ar.lineX0=ar.lineY0=function(){return en().x(t).y(n)},ar.lineY1=function(){return en().x(t).y(a)},ar.lineX1=function(){return en().x(s).y(n)},ar.defined=function(tn){return arguments.length?(l=typeof tn=="function"?tn:V$1(!!tn),ar):l},ar.curve=function(tn){return arguments.length?(c=tn,u!=null&&(d=c(u)),ar):c},ar.context=function(tn){return arguments.length?(tn==null?u=d=null:d=c(u=tn),ar):u},ar}function j4(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function W4(t){return t}function V4(){var t=W4,n=j4,a=null,s=V$1(0),l=V$1(Yt),u=V$1(0);function c(d){var Ct,ar=(d=va(d)).length,en,tn,on=0,fn=new Array(ar),dn=new Array(ar),Cn=+s.apply(this,arguments),Rn=Math.min(Yt,Math.max(-Yt,l.apply(this,arguments)-Cn)),ax,ox=Math.min(Math.abs(Rn)/ar,u.apply(this,arguments)),sx=ox*(Rn<0?-1:1),lx;for(Ct=0;Ct<ar;++Ct)(lx=dn[fn[Ct]=Ct]=+t(d[Ct],Ct,d))>0&&(on+=lx);for(n!=null?fn.sort(function(cx,fx){return n(dn[cx],dn[fx])}):a!=null&&fn.sort(function(cx,fx){return a(d[cx],d[fx])}),Ct=0,tn=on?(Rn-ar*sx)/on:0;Ct<ar;++Ct,Cn=ax)en=fn[Ct],lx=dn[en],ax=Cn+(lx>0?lx*tn:0)+sx,dn[en]={data:d[en],index:Ct,value:lx,startAngle:Cn,endAngle:ax,padAngle:ox};return dn}return c.value=function(d){return arguments.length?(t=typeof d=="function"?d:V$1(+d),c):t},c.sortValues=function(d){return arguments.length?(n=d,a=null,c):n},c.sort=function(d){return arguments.length?(a=d,n=null,c):a},c.startAngle=function(d){return arguments.length?(s=typeof d=="function"?d:V$1(+d),c):s},c.endAngle=function(d){return arguments.length?(l=typeof d=="function"?d:V$1(+d),c):l},c.padAngle=function(d){return arguments.length?(u=typeof d=="function"?d:V$1(+d),c):u},c}var Hd=$f(ba);function jd(t){this._curve=t}jd.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function $f(t){function n(a){return new jd(t(a))}return n._curve=t,n}function Ar(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(a){return arguments.length?n($f(a)):n()._curve},t}function Yl(){return Ar(Mf().curve(Hd))}function Fl(){var t=Xd().curve(Hd),n=t.curve,a=t.lineX0,s=t.lineX1,l=t.lineY0,u=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Ar(a())},delete t.lineX0,t.lineEndAngle=function(){return Ar(s())},delete t.lineX1,t.lineInnerRadius=function(){return Ar(l())},delete t.lineY0,t.lineOuterRadius=function(){return Ar(u())},delete t.lineY1,t.curve=function(c){return arguments.length?n($f(c)):n()._curve},t}function Er(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class Wd{constructor(n,a){this._context=n,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,a){switch(n=+n,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,a,n,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,n,this._y0,n,a);break}}this._x0=n,this._y0=a}}class G4{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,a){if(n=+n,a=+a,this._point===0)this._point=1;else{const s=Er(this._x0,this._y0),l=Er(this._x0,this._y0=(this._y0+a)/2),u=Er(n,this._y0),c=Er(n,a);this._context.moveTo(...s),this._context.bezierCurveTo(...l,...u,...c)}this._x0=n,this._y0=a}}function Vd(t){return new Wd(t,!0)}function Gd(t){return new Wd(t,!1)}function Z4(t){return new G4(t)}function Q4(t){return t.source}function K4(t){return t.target}function wa(t){let n=Q4,a=K4,s=wf,l=xf,u=null,c=null,d=si(Ct);function Ct(){let ar;const en=H4.call(arguments),tn=n.apply(this,en),on=a.apply(this,en);if(u==null&&(c=t(ar=d())),c.lineStart(),en[0]=tn,c.point(+s.apply(this,en),+l.apply(this,en)),en[0]=on,c.point(+s.apply(this,en),+l.apply(this,en)),c.lineEnd(),ar)return c=null,ar+""||null}return Ct.source=function(ar){return arguments.length?(n=ar,Ct):n},Ct.target=function(ar){return arguments.length?(a=ar,Ct):a},Ct.x=function(ar){return arguments.length?(s=typeof ar=="function"?ar:V$1(+ar),Ct):s},Ct.y=function(ar){return arguments.length?(l=typeof ar=="function"?ar:V$1(+ar),Ct):l},Ct.context=function(ar){return arguments.length?(ar==null?u=c=null:c=t(u=ar),Ct):u},Ct}function J4(){return wa(Vd)}function n7(){return wa(Gd)}function t7(){const t=wa(Z4);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const e7=cn(3),Zd={draw(t,n){const a=cn(n+Fe$1(n/28,.75))*.59436,s=a/2,l=s*e7;t.moveTo(0,a),t.lineTo(0,-a),t.moveTo(-l,-s),t.lineTo(l,s),t.moveTo(-l,s),t.lineTo(l,-s)}},xa={draw(t,n){const a=cn(n/Bt);t.moveTo(a,0),t.arc(0,0,a,0,Yt)}},Qd={draw(t,n){const a=cn(n/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},Kd=cn(1/3),r7=Kd*2,Jd={draw(t,n){const a=cn(n/r7),s=a*Kd;t.moveTo(0,-a),t.lineTo(s,0),t.lineTo(0,a),t.lineTo(-s,0),t.closePath()}},ng={draw(t,n){const a=cn(n)*.62625;t.moveTo(0,-a),t.lineTo(a,0),t.lineTo(0,a),t.lineTo(-a,0),t.closePath()}},tg={draw(t,n){const a=cn(n-Fe$1(n/7,2))*.87559;t.moveTo(-a,0),t.lineTo(a,0),t.moveTo(0,a),t.lineTo(0,-a)}},eg={draw(t,n){const a=cn(n),s=-a/2;t.rect(s,s,a,a)}},rg={draw(t,n){const a=cn(n)*.4431;t.moveTo(a,a),t.lineTo(a,-a),t.lineTo(-a,-a),t.lineTo(-a,a),t.closePath()}},i7=.8908130915292852,ig=jn$1(Bt/10)/jn$1(7*Bt/10),o7=jn$1(Yt/10)*ig,a7=-Mt(Yt/10)*ig,og={draw(t,n){const a=cn(n*i7),s=o7*a,l=a7*a;t.moveTo(0,-a),t.lineTo(s,l);for(let u=1;u<5;++u){const c=Yt*u/5,d=Mt(c),Ct=jn$1(c);t.lineTo(Ct*a,-d*a),t.lineTo(d*s-Ct*l,Ct*s+d*l)}t.closePath()}},uu=cn(3),ag={draw(t,n){const a=-cn(n/(uu*3));t.moveTo(0,a*2),t.lineTo(-uu*a,-a),t.lineTo(uu*a,-a),t.closePath()}},u7=cn(3),ug={draw(t,n){const a=cn(n)*.6824,s=a/2,l=a*u7/2;t.moveTo(0,-a),t.lineTo(l,s),t.lineTo(-l,s),t.closePath()}},Zn=-.5,Qn=cn(3)/2,ac=1/cn(12),c7=(ac/2+1)*3,cg={draw(t,n){const a=cn(n/c7),s=a/2,l=a*ac,u=s,c=a*ac+a,d=-u,Ct=c;t.moveTo(s,l),t.lineTo(u,c),t.lineTo(d,Ct),t.lineTo(Zn*s-Qn*l,Qn*s+Zn*l),t.lineTo(Zn*u-Qn*c,Qn*u+Zn*c),t.lineTo(Zn*d-Qn*Ct,Qn*d+Zn*Ct),t.lineTo(Zn*s+Qn*l,Zn*l-Qn*s),t.lineTo(Zn*u+Qn*c,Zn*c-Qn*u),t.lineTo(Zn*d+Qn*Ct,Zn*Ct-Qn*d),t.closePath()}},uc={draw(t,n){const a=cn(n-Fe$1(n/6,1.7))*.6189;t.moveTo(-a,-a),t.lineTo(a,a),t.moveTo(-a,a),t.lineTo(a,-a)}},ql=[xa,Qd,Jd,eg,og,ag,cg],f7=[xa,tg,uc,ug,Zd,rg,ng];function s7(t,n){let a=null,s=si(l);t=typeof t=="function"?t:V$1(t||xa),n=typeof n=="function"?n:V$1(n===void 0?64:+n);function l(){let u;if(a||(a=u=s()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),u)return a=null,u+""||null}return l.type=function(u){return arguments.length?(t=typeof u=="function"?u:V$1(u),l):t},l.size=function(u){return arguments.length?(n=typeof u=="function"?u:V$1(+u),l):n},l.context=function(u){return arguments.length?(a=u??null,l):a},l}function Ut(){}function Co(t,n,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+a)/6)}function Ma(t){this._context=t}Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Co(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function l7(t){return new Ma(t)}function fg(t){this._context=t}fg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function h7(t){return new fg(t)}function sg(t){this._context=t}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function d7(t){return new sg(t)}function lg(t,n){this._basis=new Ma(t),this._beta=n}lg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,a=t.length-1;if(a>0)for(var s=t[0],l=n[0],u=t[a]-s,c=n[a]-l,d=-1,Ct;++d<=a;)Ct=d/a,this._basis.point(this._beta*t[d]+(1-this._beta)*(s+Ct*u),this._beta*n[d]+(1-this._beta)*(l+Ct*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const g7=(function t(n){function a(s){return n===1?new Ma(s):new lg(s,n)}return a.beta=function(s){return t(+s)},a})(.85);function Po(t,n,a){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-a),t._x2,t._y2)}function Tf(t,n){this._context=t,this._k=(1-n)/6}Tf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Po(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const p7=(function t(n){function a(s){return new Tf(s,n)}return a.tension=function(s){return t(+s)},a})(0);function Af(t,n){this._context=t,this._k=(1-n)/6}Af.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const m7=(function t(n){function a(s){return new Af(s,n)}return a.tension=function(s){return t(+s)},a})(0);function Ef(t,n){this._context=t,this._k=(1-n)/6}Ef.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const y7=(function t(n){function a(s){return new Ef(s,n)}return a.tension=function(s){return t(+s)},a})(0);function kf(t,n,a){var s=t._x1,l=t._y1,u=t._x2,c=t._y2;if(t._l01_a>In){var d=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,Ct=3*t._l01_a*(t._l01_a+t._l12_a);s=(s*d-t._x0*t._l12_2a+t._x2*t._l01_2a)/Ct,l=(l*d-t._y0*t._l12_2a+t._y2*t._l01_2a)/Ct}if(t._l23_a>In){var ar=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,en=3*t._l23_a*(t._l23_a+t._l12_a);u=(u*ar+t._x1*t._l23_2a-n*t._l12_2a)/en,c=(c*ar+t._y1*t._l23_2a-a*t._l12_2a)/en}t._context.bezierCurveTo(s,l,u,c,t._x2,t._y2)}function hg(t,n){this._context=t,this._alpha=n}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:kf(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const _7=(function t(n){function a(s){return n?new hg(s,n):new Tf(s,0)}return a.alpha=function(s){return t(+s)},a})(.5);function dg(t,n){this._context=t,this._alpha=n}dg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:kf(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const v7=(function t(n){function a(s){return n?new dg(s,n):new Af(s,0)}return a.alpha=function(s){return t(+s)},a})(.5);function gg(t,n){this._context=t,this._alpha=n}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kf(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const b7=(function t(n){function a(s){return n?new gg(s,n):new Ef(s,0)}return a.alpha=function(s){return t(+s)},a})(.5);function pg(t){this._context=t}pg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function w7(t){return new pg(t)}function Ll(t){return t<0?-1:1}function Bl(t,n,a){var s=t._x1-t._x0,l=n-t._x1,u=(t._y1-t._y0)/(s||l<0&&-0),c=(a-t._y1)/(l||s<0&&-0),d=(u*l+c*s)/(s+l);return(Ll(u)+Ll(c))*Math.min(Math.abs(u),Math.abs(c),.5*Math.abs(d))||0}function Ul(t,n){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-n)/2:n}function cu(t,n,a){var s=t._x0,l=t._y0,u=t._x1,c=t._y1,d=(u-s)/3;t._context.bezierCurveTo(s+d,l+d*n,u-d,c-d*a,u,c)}function Do(t){this._context=t}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cu(this,this._t0,Ul(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var a=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,cu(this,Ul(this,a=Bl(this,t,n)),a);break;default:cu(this,this._t0,a=Bl(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=a}}};function mg(t){this._context=new yg(t)}(mg.prototype=Object.create(Do.prototype)).point=function(t,n){Do.prototype.point.call(this,n,t)};function yg(t){this._context=t}yg.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,a,s,l,u){this._context.bezierCurveTo(n,t,s,a,u,l)}};function x7(t){return new Do(t)}function M7(t){return new mg(t)}function _g(t){this._context=t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),a===2)this._context.lineTo(t[1],n[1]);else for(var s=Xl(t),l=Xl(n),u=0,c=1;c<a;++u,++c)this._context.bezierCurveTo(s[0][u],l[0][u],s[1][u],l[1][u],t[c],n[c]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Xl(t){var n,a=t.length-1,s,l=new Array(a),u=new Array(a),c=new Array(a);for(l[0]=0,u[0]=2,c[0]=t[0]+2*t[1],n=1;n<a-1;++n)l[n]=1,u[n]=4,c[n]=4*t[n]+2*t[n+1];for(l[a-1]=2,u[a-1]=7,c[a-1]=8*t[a-1]+t[a],n=1;n<a;++n)s=l[n]/u[n-1],u[n]-=s,c[n]-=s*c[n-1];for(l[a-1]=c[a-1]/u[a-1],n=a-2;n>=0;--n)l[n]=(c[n]-l[n+1])/u[n];for(u[a-1]=(t[a]+l[a-1])/2,n=0;n<a-1;++n)u[n]=2*t[n+1]-l[n+1];return[l,u]}function $7(t){return new _g(t)}function $a(t,n){this._context=t,this._t=n}$a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=t,this._y=n}};function T7(t){return new $a(t,.5)}function A7(t){return new $a(t,0)}function E7(t){return new $a(t,1)}function nr(t,n){if((c=t.length)>1)for(var a=1,s,l,u=t[n[0]],c,d=u.length;a<c;++a)for(l=u,u=t[n[a]],s=0;s<d;++s)u[s][1]+=u[s][0]=isNaN(l[s][1])?l[s][0]:l[s][1]}function tr(t){for(var n=t.length,a=new Array(n);--n>=0;)a[n]=n;return a}function k7(t,n){return t[n]}function S7(t){const n=[];return n.key=t,n}function N7(){var t=V$1([]),n=tr,a=nr,s=k7;function l(u){var c=Array.from(t.apply(this,arguments),S7),d,Ct=c.length,ar=-1,en;for(const tn of u)for(d=0,++ar;d<Ct;++d)(c[d][ar]=[0,+s(tn,c[d].key,ar,u)]).data=tn;for(d=0,en=va(n(c));d<Ct;++d)c[en[d]].index=d;return a(c,en),c}return l.keys=function(u){return arguments.length?(t=typeof u=="function"?u:V$1(Array.from(u)),l):t},l.value=function(u){return arguments.length?(s=typeof u=="function"?u:V$1(+u),l):s},l.order=function(u){return arguments.length?(n=u==null?tr:typeof u=="function"?u:V$1(Array.from(u)),l):n},l.offset=function(u){return arguments.length?(a=u??nr,l):a},l}function I7(t,n){if((s=t.length)>0){for(var a,s,l=0,u=t[0].length,c;l<u;++l){for(c=a=0;a<s;++a)c+=t[a][l][1]||0;if(c)for(a=0;a<s;++a)t[a][l][1]/=c}nr(t,n)}}function R7(t,n){if((Ct=t.length)>0)for(var a,s=0,l,u,c,d,Ct,ar=t[n[0]].length;s<ar;++s)for(c=d=0,a=0;a<Ct;++a)(u=(l=t[n[a]][s])[1]-l[0])>0?(l[0]=c,l[1]=c+=u):u<0?(l[1]=d,l[0]=d+=u):(l[0]=0,l[1]=u)}function C7(t,n){if((l=t.length)>0){for(var a=0,s=t[n[0]],l,u=s.length;a<u;++a){for(var c=0,d=0;c<l;++c)d+=t[c][a][1]||0;s[a][1]+=s[a][0]=-d/2}nr(t,n)}}function P7(t,n){if(!(!((c=t.length)>0)||!((u=(l=t[n[0]]).length)>0))){for(var a=0,s=1,l,u,c;s<u;++s){for(var d=0,Ct=0,ar=0;d<c;++d){for(var en=t[n[d]],tn=en[s][1]||0,on=en[s-1][1]||0,fn=(tn-on)/2,dn=0;dn<d;++dn){var Cn=t[n[dn]],Rn=Cn[s][1]||0,ax=Cn[s-1][1]||0;fn+=Rn-ax}Ct+=tn,ar+=fn*tn}l[s-1][1]+=l[s-1][0]=a,Ct&&(a-=ar/Ct)}l[s-1][1]+=l[s-1][0]=a,nr(t,n)}}function vg(t){var n=t.map(D7);return tr(t).sort(function(a,s){return n[a]-n[s]})}function D7(t){for(var n=-1,a=0,s=t.length,l,u=-1/0;++n<s;)(l=+t[n][1])>u&&(u=l,a=n);return a}function bg(t){var n=t.map(wg);return tr(t).sort(function(a,s){return n[a]-n[s]})}function wg(t){for(var n=0,a=-1,s=t.length,l;++a<s;)(l=+t[a][1])&&(n+=l);return n}function z7(t){return bg(t).reverse()}function O7(t){var n=t.length,a,s,l=t.map(wg),u=vg(t),c=0,d=0,Ct=[],ar=[];for(a=0;a<n;++a)s=u[a],c<d?(c+=l[s],Ct.push(s)):(d+=l[s],ar.push(s));return ar.reverse().concat(Ct)}function Y7(t){return tr(t).reverse()}const Ri=t=>()=>t;function F7(t,{sourceEvent:n,target:a,transform:s,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:l}})}function ht(t,n,a){this.k=t,this.x=n,this.y=a}ht.prototype={constructor:ht,scale:function(t){return t===1?this:new ht(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new ht(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var li=new ht(1,0,0);Pe$1.prototype=ht.prototype;function Pe$1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return li;return t.__zoom}function fu(t){t.stopImmediatePropagation()}function gr(t){t.preventDefault(),t.stopImmediatePropagation()}function q7(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function L7(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hl(){return this.__zoom||li}function B7(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function U7(){return navigator.maxTouchPoints||"ontouchstart"in this}function X7(t,n,a){var s=t.invertX(n[0][0])-a[0][0],l=t.invertX(n[1][0])-a[1][0],u=t.invertY(n[0][1])-a[0][1],c=t.invertY(n[1][1])-a[1][1];return t.translate(l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function xg(){var t=q7,n=L7,a=X7,s=B7,l=U7,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,Ct=n0,ar=pe$1("start","zoom","end"),en,tn,on,fn=500,dn=150,Cn=0,Rn=10;function ax(_x){_x.property("__zoom",Hl).on("wheel.zoom",mx,{passive:!1}).on("mousedown.zoom",px).on("dblclick.zoom",hx).filter(l).on("touchstart.zoom",vx).on("touchmove.zoom",yx).on("touchend.zoom touchcancel.zoom",Sx).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}ax.transform=function(_x,Ex,bx,Ax){var Mx=_x.selection?_x.selection():_x;Mx.property("__zoom",Hl),_x!==Mx?cx(_x,Ex,bx,Ax):Mx.interrupt().each(function(){fx(this,arguments).event(Ax).start().zoom(null,typeof Ex=="function"?Ex.apply(this,arguments):Ex).end()})},ax.scaleBy=function(_x,Ex,bx,Ax){ax.scaleTo(_x,function(){var Mx=this.__zoom.k,Rx=typeof Ex=="function"?Ex.apply(this,arguments):Ex;return Mx*Rx},bx,Ax)},ax.scaleTo=function(_x,Ex,bx,Ax){ax.transform(_x,function(){var Mx=n.apply(this,arguments),Rx=this.__zoom,Cx=bx==null?lx(Mx):typeof bx=="function"?bx.apply(this,arguments):bx,Lx=Rx.invert(Cx),qx=typeof Ex=="function"?Ex.apply(this,arguments):Ex;return a(sx(ox(Rx,qx),Cx,Lx),Mx,c)},bx,Ax)},ax.translateBy=function(_x,Ex,bx,Ax){ax.transform(_x,function(){return a(this.__zoom.translate(typeof Ex=="function"?Ex.apply(this,arguments):Ex,typeof bx=="function"?bx.apply(this,arguments):bx),n.apply(this,arguments),c)},null,Ax)},ax.translateTo=function(_x,Ex,bx,Ax,Mx){ax.transform(_x,function(){var Rx=n.apply(this,arguments),Cx=this.__zoom,Lx=Ax==null?lx(Rx):typeof Ax=="function"?Ax.apply(this,arguments):Ax;return a(li.translate(Lx[0],Lx[1]).scale(Cx.k).translate(typeof Ex=="function"?-Ex.apply(this,arguments):-Ex,typeof bx=="function"?-bx.apply(this,arguments):-bx),Rx,c)},Ax,Mx)};function ox(_x,Ex){return Ex=Math.max(u[0],Math.min(u[1],Ex)),Ex===_x.k?_x:new ht(Ex,_x.x,_x.y)}function sx(_x,Ex,bx){var Ax=Ex[0]-bx[0]*_x.k,Mx=Ex[1]-bx[1]*_x.k;return Ax===_x.x&&Mx===_x.y?_x:new ht(_x.k,Ax,Mx)}function lx(_x){return[(+_x[0][0]+ +_x[1][0])/2,(+_x[0][1]+ +_x[1][1])/2]}function cx(_x,Ex,bx,Ax){_x.on("start.zoom",function(){fx(this,arguments).event(Ax).start()}).on("interrupt.zoom end.zoom",function(){fx(this,arguments).event(Ax).end()}).tween("zoom",function(){var Mx=this,Rx=arguments,Cx=fx(Mx,Rx).event(Ax),Lx=n.apply(Mx,Rx),qx=bx==null?lx(Lx):typeof bx=="function"?bx.apply(Mx,Rx):bx,Ix=Math.max(Lx[1][0]-Lx[0][0],Lx[1][1]-Lx[0][1]),Px=Mx.__zoom,Nx=typeof Ex=="function"?Ex.apply(Mx,Rx):Ex,Bx=Ct(Px.invert(qx).concat(Ix/Px.k),Nx.invert(qx).concat(Ix/Nx.k));return function($x){if($x===1)$x=Nx;else{var Vx=Bx($x),Gx=Ix/Vx[2];$x=new ht(Gx,qx[0]-Vx[0]*Gx,qx[1]-Vx[1]*Gx)}Cx.zoom(null,$x)}})}function fx(_x,Ex,bx){return!bx&&_x.__zooming||new gx(_x,Ex)}function gx(_x,Ex){this.that=_x,this.args=Ex,this.active=0,this.sourceEvent=null,this.extent=n.apply(_x,Ex),this.taps=0}gx.prototype={event:function(_x){return _x&&(this.sourceEvent=_x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_x,Ex){return this.mouse&&_x!=="mouse"&&(this.mouse[1]=Ex.invert(this.mouse[0])),this.touch0&&_x!=="touch"&&(this.touch0[1]=Ex.invert(this.touch0[0])),this.touch1&&_x!=="touch"&&(this.touch1[1]=Ex.invert(this.touch1[0])),this.that.__zoom=Ex,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_x){var Ex=X$1(this.that).datum();ar.call(_x,this.that,new F7(_x,{sourceEvent:this.sourceEvent,target:ax,transform:this.that.__zoom,dispatch:ar}),Ex)}};function mx(_x,...Ex){if(!t.apply(this,arguments))return;var bx=fx(this,Ex).event(_x),Ax=this.__zoom,Mx=Math.max(u[0],Math.min(u[1],Ax.k*Math.pow(2,s.apply(this,arguments)))),Rx=wn(_x);if(bx.wheel)(bx.mouse[0][0]!==Rx[0]||bx.mouse[0][1]!==Rx[1])&&(bx.mouse[1]=Ax.invert(bx.mouse[0]=Rx)),clearTimeout(bx.wheel);else{if(Ax.k===Mx)return;bx.mouse=[Rx,Ax.invert(Rx)],re$1(this),bx.start()}gr(_x),bx.wheel=setTimeout(Cx,dn),bx.zoom("mouse",a(sx(ox(Ax,Mx),bx.mouse[0],bx.mouse[1]),bx.extent,c));function Cx(){bx.wheel=null,bx.end()}}function px(_x,...Ex){if(on||!t.apply(this,arguments))return;var bx=_x.currentTarget,Ax=fx(this,Ex,!0).event(_x),Mx=X$1(_x.view).on("mousemove.zoom",qx,!0).on("mouseup.zoom",Ix,!0),Rx=wn(_x,bx),Cx=_x.clientX,Lx=_x.clientY;Uo(_x.view),fu(_x),Ax.mouse=[Rx,this.__zoom.invert(Rx)],re$1(this),Ax.start();function qx(Px){if(gr(Px),!Ax.moved){var Nx=Px.clientX-Cx,Bx=Px.clientY-Lx;Ax.moved=Nx*Nx+Bx*Bx>Cn}Ax.event(Px).zoom("mouse",a(sx(Ax.that.__zoom,Ax.mouse[0]=wn(Px,bx),Ax.mouse[1]),Ax.extent,c))}function Ix(Px){Mx.on("mousemove.zoom mouseup.zoom",null),Xo(Px.view,Ax.moved),gr(Px),Ax.event(Px).end()}}function hx(_x,...Ex){if(t.apply(this,arguments)){var bx=this.__zoom,Ax=wn(_x.changedTouches?_x.changedTouches[0]:_x,this),Mx=bx.invert(Ax),Rx=bx.k*(_x.shiftKey?.5:2),Cx=a(sx(ox(bx,Rx),Ax,Mx),n.apply(this,Ex),c);gr(_x),d>0?X$1(this).transition().duration(d).call(cx,Cx,Ax,_x):X$1(this).call(ax.transform,Cx,Ax,_x)}}function vx(_x,...Ex){if(t.apply(this,arguments)){var bx=_x.touches,Ax=bx.length,Mx=fx(this,Ex,_x.changedTouches.length===Ax).event(_x),Rx,Cx,Lx,qx;for(fu(_x),Cx=0;Cx<Ax;++Cx)Lx=bx[Cx],qx=wn(Lx,this),qx=[qx,this.__zoom.invert(qx),Lx.identifier],Mx.touch0?!Mx.touch1&&Mx.touch0[2]!==qx[2]&&(Mx.touch1=qx,Mx.taps=0):(Mx.touch0=qx,Rx=!0,Mx.taps=1+!!en);en&&(en=clearTimeout(en)),Rx&&(Mx.taps<2&&(tn=qx[0],en=setTimeout(function(){en=null},fn)),re$1(this),Mx.start())}}function yx(_x,...Ex){if(this.__zooming){var bx=fx(this,Ex).event(_x),Ax=_x.changedTouches,Mx=Ax.length,Rx,Cx,Lx,qx;for(gr(_x),Rx=0;Rx<Mx;++Rx)Cx=Ax[Rx],Lx=wn(Cx,this),bx.touch0&&bx.touch0[2]===Cx.identifier?bx.touch0[0]=Lx:bx.touch1&&bx.touch1[2]===Cx.identifier&&(bx.touch1[0]=Lx);if(Cx=bx.that.__zoom,bx.touch1){var Ix=bx.touch0[0],Px=bx.touch0[1],Nx=bx.touch1[0],Bx=bx.touch1[1],$x=($x=Nx[0]-Ix[0])*$x+($x=Nx[1]-Ix[1])*$x,Vx=(Vx=Bx[0]-Px[0])*Vx+(Vx=Bx[1]-Px[1])*Vx;Cx=ox(Cx,Math.sqrt($x/Vx)),Lx=[(Ix[0]+Nx[0])/2,(Ix[1]+Nx[1])/2],qx=[(Px[0]+Bx[0])/2,(Px[1]+Bx[1])/2]}else if(bx.touch0)Lx=bx.touch0[0],qx=bx.touch0[1];else return;bx.zoom("touch",a(sx(Cx,Lx,qx),bx.extent,c))}}function Sx(_x,...Ex){if(this.__zooming){var bx=fx(this,Ex).event(_x),Ax=_x.changedTouches,Mx=Ax.length,Rx,Cx;for(fu(_x),on&&clearTimeout(on),on=setTimeout(function(){on=null},fn),Rx=0;Rx<Mx;++Rx)Cx=Ax[Rx],bx.touch0&&bx.touch0[2]===Cx.identifier?delete bx.touch0:bx.touch1&&bx.touch1[2]===Cx.identifier&&delete bx.touch1;if(bx.touch1&&!bx.touch0&&(bx.touch0=bx.touch1,delete bx.touch1),bx.touch0)bx.touch0[1]=this.__zoom.invert(bx.touch0[0]);else if(bx.end(),bx.taps===2&&(Cx=wn(Cx,this),Math.hypot(tn[0]-Cx[0],tn[1]-Cx[1])<Rn)){var Lx=X$1(this).on("dblclick.zoom");Lx&&Lx.apply(this,arguments)}}}return ax.wheelDelta=function(_x){return arguments.length?(s=typeof _x=="function"?_x:Ri(+_x),ax):s},ax.filter=function(_x){return arguments.length?(t=typeof _x=="function"?_x:Ri(!!_x),ax):t},ax.touchable=function(_x){return arguments.length?(l=typeof _x=="function"?_x:Ri(!!_x),ax):l},ax.extent=function(_x){return arguments.length?(n=typeof _x=="function"?_x:Ri([[+_x[0][0],+_x[0][1]],[+_x[1][0],+_x[1][1]]]),ax):n},ax.scaleExtent=function(_x){return arguments.length?(u[0]=+_x[0],u[1]=+_x[1],ax):[u[0],u[1]]},ax.translateExtent=function(_x){return arguments.length?(c[0][0]=+_x[0][0],c[1][0]=+_x[1][0],c[0][1]=+_x[0][1],c[1][1]=+_x[1][1],ax):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},ax.constrain=function(_x){return arguments.length?(a=_x,ax):a},ax.duration=function(_x){return arguments.length?(d=+_x,ax):d},ax.interpolate=function(_x){return arguments.length?(Ct=_x,ax):Ct},ax.on=function(){var _x=ar.on.apply(ar,arguments);return _x===ar?ax:_x},ax.clickDistance=function(_x){return arguments.length?(Cn=(_x=+_x)*_x,ax):Math.sqrt(Cn)},ax.tapDistance=function(_x){return arguments.length?(Rn=+_x,ax):Rn},ax}const H7=Object.freeze(Object.defineProperty({__proto__:null,Adder:bn,Delaunay:Dc,FormatSpecifier:ra,InternMap:Pr,InternSet:ie,Node:he,Path:ti,Voronoi:v0,ZoomTransform:ht,active:B_,arc:X4,area:Xd,areaRadial:Fl,ascending:hn,autoType:hb,axisBottom:Cp,axisLeft:Pp,axisRight:Rp,axisTop:Ip,bin:Nf,bisect:Ft,bisectCenter:Eg,bisectLeft:Ag,bisectRight:Ft,bisector:Oo,blob:pb,blur:kg,blur2:Zl,blurImage:Sg,brush:tv,brushSelection:K_,brushX:J_,brushY:nv,buffer:yb,chord:rv,chordDirected:ov,chordTranspose:iv,cluster:C3,color:qt,contourDensity:Iv,contours:Iu,count:Yo,create:pm,creator:Lo,cross:zg,csv:bb,csvFormat:tb,csvFormatBody:eb,csvFormatRow:ib,csvFormatRows:rb$1,csvFormatValue:ob,csvParse:w0,csvParseRows:nb,cubehelix:ut,cumsum:Og,curveBasis:l7,curveBasisClosed:h7,curveBasisOpen:d7,curveBumpX:Vd,curveBumpY:Gd,curveBundle:g7,curveCardinal:p7,curveCardinalClosed:m7,curveCardinalOpen:y7,curveCatmullRom:_7,curveCatmullRomClosed:v7,curveCatmullRomOpen:b7,curveLinear:ba,curveLinearClosed:w7,curveMonotoneX:x7,curveMonotoneY:M7,curveNatural:$7,curveStep:T7,curveStepAfter:E7,curveStepBefore:A7,descending:Vl,deviation:Jl,difference:vp,disjoint:bp,dispatch:pe$1,drag:Eh,dragDisable:Uo,dragEnable:Xo,dsv:vb,dsvFormat:na,easeBack:ns,easeBackIn:P_,easeBackInOut:ns,easeBackOut:D_,easeBounce:Ur,easeBounceIn:R_,easeBounceInOut:C_,easeBounceOut:Ur,easeCircle:Jf,easeCircleIn:x_,easeCircleInOut:Jf,easeCircleOut:M_,easeCubic:Au,easeCubicIn:g_,easeCubicInOut:Au,easeCubicOut:p_,easeElastic:ts,easeElasticIn:z_,easeElasticInOut:O_,easeElasticOut:ts,easeExp:Kf,easeExpIn:b_,easeExpInOut:Kf,easeExpOut:w_,easeLinear:l_,easePoly:Zf,easePolyIn:m_,easePolyInOut:Zf,easePolyOut:y_,easeQuad:Gf,easeQuadIn:h_,easeQuadInOut:Gf,easeQuadOut:d_,easeSin:Qf,easeSinIn:__,easeSinInOut:Qf,easeSinOut:v_,every:dp,extent:kr,fcumsum:Fg,filter:pp,flatGroup:qg,flatRollup:Lg,forceCenter:Eb,forceCollide:jb,forceLink:Vb,forceManyBody:rw,forceRadial:iw,forceSimulation:ew,forceX:ow,forceY:aw,get format(){return ia},formatDefaultLocale:k0,formatLocale:E0,get formatPrefix(){return Yc},formatSpecifier:We,fsum:Yg,geoAlbers:h1,geoAlbersUsa:l3,geoArea:mw,geoAzimuthalEqualArea:h3,geoAzimuthalEqualAreaRaw:Vc,geoAzimuthalEquidistant:d3,geoAzimuthalEquidistantRaw:Gc,geoBounds:bw,geoCentroid:Aw,geoCircle:Ew,geoClipAntimeridian:Xu,geoClipCircle:Z0,geoClipExtent:Pw,geoClipRectangle:oa,geoConicConformal:p3,geoConicConformalRaw:p1,geoConicEqualArea:So,geoConicEqualAreaRaw:l1,geoConicEquidistant:y3,geoConicEquidistantRaw:m1,geoContains:Lw,geoDistance:wo,geoEqualEarth:v3$1,geoEqualEarthRaw:Zc,geoEquirectangular:m3,geoEquirectangularRaw:Gr,geoGnomonic:b3,geoGnomonicRaw:Qc,geoGraticule:J0,geoGraticule10:Bw,geoIdentity:w3,geoInterpolate:Uw,geoLength:Q0,geoMercator:g3,geoMercatorRaw:ai,geoNaturalEarth1:x3,geoNaturalEarth1Raw:Kc,geoOrthographic:M3,geoOrthographicRaw:Jc,geoPath:t3,geoProjection:vt,geoProjectionMutator:jc,geoRotation:X0,geoStereographic:$3,geoStereographicRaw:nf,geoStream:it,geoTransform:e3,geoTransverseMercator:T3,geoTransverseMercatorRaw:tf,gray:Dm,greatest:sh,greatestIndex:up,group:rh,groupSort:Xg,groups:ih,hcl:to,hierarchy:ef,histogram:Nf,hsl:Ki,html:Tb,image:xb,index:Bg,indexes:Ug,interpolate:Ht,interpolateArray:Lm,interpolateBasis:Lh,interpolateBasisClosed:Bh,interpolateBlues:y4,interpolateBrBG:Z8,interpolateBuGn:o4,interpolateBuPu:a4,interpolateCividis:M4,interpolateCool:A4,interpolateCubehelix:ey,interpolateCubehelixDefault:$4,interpolateCubehelixLong:Go,interpolateDate:Vh,interpolateDiscrete:Xm,interpolateGnBu:u4,interpolateGreens:_4,interpolateGreys:v4,interpolateHcl:ny,interpolateHclLong:ty,interpolateHsl:Qm,interpolateHslLong:Km,interpolateHue:Hm,interpolateInferno:P4,interpolateLab:Jm,interpolateMagma:C4,interpolateNumber:Kn,interpolateNumberArray:Tc,interpolateObject:Gh,interpolateOrRd:c4,interpolateOranges:x4,interpolatePRGn:Q8,interpolatePiYG:K8,interpolatePlasma:D4,interpolatePuBu:s4,interpolatePuBuGn:f4,interpolatePuOr:J8,interpolatePuRd:l4,interpolatePurples:b4,interpolateRainbow:E4,interpolateRdBu:n4,interpolateRdGy:t4,interpolateRdPu:h4,interpolateRdYlBu:e4,interpolateRdYlGn:r4,interpolateReds:w4,interpolateRgb:qr,interpolateRgbBasis:Hh,interpolateRgbBasisClosed:qm,interpolateRound:Vo,interpolateSinebow:N4,interpolateSpectral:i4,interpolateString:Ac,interpolateTransformCss:Kh,interpolateTransformSvg:Jh,interpolateTurbo:I4,interpolateViridis:R4,interpolateWarm:T4,interpolateYlGn:g4,interpolateYlGnBu:d4,interpolateYlOrBr:p4,interpolateYlOrRd:m4,interpolateZoom:n0,interrupt:re$1,intersection:wp,interval:uy,isoFormat:N8,isoParse:R8,json:$b,lab:no,lch:zm,least:ap,leastIndex:dh,line:Mf,lineRadial:Yl,link:wa,linkHorizontal:J4,linkRadial:t7,linkVertical:n7,local:Th,map:mp,matcher:_c$1,max:Dr,maxIndex:gc,mean:Kg,median:Jg,medianIndex:np,merge:mc,min:Gi,minIndex:pc,mode:ep,namespace:Kr,namespaces:mu,nice:hc,now:ni,pack:f6,packEnclose:r6,packSiblings:u6,pairs:rp,partition:s6,path:Jo,pathRound:cv,permute:fh,pie:V4,piecewise:i0,pointRadial:Er,pointer:wn,pointers:ym,polygonArea:A6,polygonCentroid:E6,polygonContains:I6,polygonHull:N6,polygonLength:R6,precisionFixed:S0,precisionPrefix:N0,precisionRound:I0,quadtree:ea,quantile:zr,quantileIndex:hh,quantileSorted:lh,quantize:ry,quickselect:Fo,radialArea:Fl,radialLine:Yl,randomBates:z6,randomBernoulli:F6,randomBeta:S1,randomBinomial:N1,randomCauchy:L6,randomExponential:O6,randomGamma:af,randomGeometric:k1,randomInt:P6,randomIrwinHall:E1,randomLcg:j6,randomLogNormal:D6,randomLogistic:B6,randomNormal:of,randomPareto:Y6,randomPoisson:U6,randomUniform:C6,randomWeibull:q6,range:zt,rank:op,reduce:yp,reverse:_p,rgb:Ue,ribbon:mv,ribbonArrow:yv,rollup:ah,rollups:uh,scaleBand:cf,scaleDiverging:dd,scaleDivergingLog:gd,scaleDivergingPow:bf,scaleDivergingSqrt:Y8,scaleDivergingSymlog:pd,scaleIdentity:P1,scaleImplicit:ic,scaleLinear:C1,scaleLog:z1,scaleOrdinal:uf,scalePoint:W6,scalePow:df,scaleQuantile:F1,scaleQuantize:q1,scaleRadial:Y1,scaleSequential:fd,scaleSequentialLog:sd,scaleSequentialPow:vf,scaleSequentialQuantile:hd,scaleSequentialSqrt:O8,scaleSequentialSymlog:ld,scaleSqrt:o5,scaleSymlog:O1,scaleThreshold:L1,scaleTime:D8,scaleUtc:z8,scan:cp,schemeAccent:q8,schemeBlues:Od,schemeBrBG:md,schemeBuGn:Td,schemeBuPu:Ad,schemeCategory10:F8,schemeDark2:L8,schemeGnBu:Ed,schemeGreens:Yd,schemeGreys:Fd,schemeObservable10:B8,schemeOrRd:kd,schemeOranges:Bd,schemePRGn:yd,schemePaired:U8,schemePastel1:X8,schemePastel2:H8,schemePiYG:_d,schemePuBu:Nd,schemePuBuGn:Sd,schemePuOr:vd,schemePuRd:Id,schemePurples:qd,schemeRdBu:bd,schemeRdGy:wd,schemeRdPu:Rd,schemeRdYlBu:xd,schemeRdYlGn:Md,schemeReds:Ld,schemeSet1:j8,schemeSet2:W8,schemeSet3:V8,schemeSpectral:$d,schemeTableau10:G8,schemeYlGn:Pd,schemeYlGnBu:Cd,schemeYlOrBr:Dd,schemeYlOrRd:zd,select:X$1,selectAll:_m,selection:me$1,selector:Bo,selectorAll:yc,shuffle:fp,shuffler:gh,some:gp,sort:du,stack:N7,stackOffsetDiverging:R7,stackOffsetExpand:I7,stackOffsetNone:nr,stackOffsetSilhouette:C7,stackOffsetWiggle:P7,stackOrderAppearance:vg,stackOrderAscending:bg,stackOrderDescending:z7,stackOrderInsideOut:O7,stackOrderNone:tr,stackOrderReverse:Y7,stratify:g6,style:ue$1,subset:Mp,sum:sp,superset:mh,svg:Ab,symbol:s7,symbolAsterisk:Zd,symbolCircle:xa,symbolCross:Qd,symbolDiamond:Jd,symbolDiamond2:ng,symbolPlus:tg,symbolSquare:eg,symbolSquare2:rg,symbolStar:og,symbolTimes:uc,symbolTriangle:ag,symbolTriangle2:ug,symbolWye:cg,symbolX:uc,symbols:ql,symbolsFill:ql,symbolsStroke:f7,text:ta,thresholdFreedmanDiaconis:Zg,thresholdScott:Qg,thresholdSturges:dc,tickFormat:R1,tickIncrement:ae$1,tickStep:Vi,ticks:oe$1,timeDay:or,timeDays:l5,get timeFormat(){return mf},timeFormatDefaultLocale:ud,timeFormatLocale:td,timeFriday:X1,timeFridays:_5,timeHour:la,timeHours:f5,timeInterval:_n,timeMillisecond:Qe,timeMilliseconds:wl,timeMinute:fa,timeMinutes:u5,timeMonday:Zr,timeMondays:g5,timeMonth:da,timeMonths:A5,get timeParse(){return ad},timeSaturday:H1,timeSaturdays:v5,timeSecond:kt,timeSeconds:Ml,timeSunday:Ke,timeSundays:$l,timeThursday:de$1,timeThursdays:y5,timeTickInterval:nd,timeTicks:J1,timeTuesday:B1,timeTuesdays:p5,timeWednesday:U1,timeWednesdays:m5,timeWeek:Ke,timeWeeks:$l,timeYear:mt,timeYears:k5,timeout:xu,timer:Qo,timerFlush:u0,transition:l0,transpose:ph,tree:w6,treemap:x6,treemapBinary:M6,treemapDice:ui,treemapResquarify:T6,treemapSlice:ua,treemapSliceDice:$6,treemapSquarify:A1,tsv:wb,tsvFormat:ub,tsvFormatBody:cb,tsvFormatRow:sb,tsvFormatRows:fb,tsvFormatValue:lb$1,tsvParse:x0,tsvParseRows:ab,union:$p,unixDay:pf,unixDays:d5,utcDay:fi,utcDays:h5,get utcFormat(){return pa},utcFriday:V1,utcFridays:$5,utcHour:ha,utcHours:s5,utcMillisecond:Qe,utcMilliseconds:wl,utcMinute:sa,utcMinutes:c5,utcMonday:Qr,utcMondays:b5,utcMonth:ga,utcMonths:E5,get utcParse(){return yf},utcSaturday:G1,utcSaturdays:T5,utcSecond:kt,utcSeconds:Ml,utcSunday:Je,utcSundays:Tl,utcThursday:ge$1,utcThursdays:M5,utcTickInterval:K1,utcTicks:Q1,utcTuesday:j1,utcTuesdays:w5,utcWednesday:W1,utcWednesdays:x5,utcWeek:Je,utcWeeks:Tl,utcYear:yt,utcYears:S5,variance:Kl,window:vc,xml:$0,zip:hp,zoom:xg,zoomIdentity:li,zoomTransform:Pe$1},Symbol.toStringTag,{value:"Module"}));function Sf(t){const n=t.attr("transform"),a=n&&n.match(/translate\(([^,]+),\s*([^)]+)\)/);return a?[parseFloat(a[1]),parseFloat(a[2])]:[0,0]}function Ta(t){const n=t&&t.match(/rotate\(([^)]+)\)/);return n?parseFloat(n[1]):0}function Mg(t,n,a){const s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),u=s*Math.sin(l+a*Math.PI/180);return[s*Math.cos(l+a*Math.PI/180),u]}function cc(t,n,a,s,l){const[u,c]=[s.shapes[n].x,s.shapes[n].y];var d=s.shapes[n].connectors[a][0],Ct=s.shapes[n].connectors[a][1];const ar=t.attr("transform"),en=ar?Ta(ar):s.shapes[n].rotation!=null?s.shapes[n].rotation:0,[tn,on]=Mg(d,Ct,en);return l([u+tn,c+on])}const pr={gridSize:16,width:2432,height:1792,defaultZoom:1,maxZoom:2};function j7(t){t.shapes||(t.shapes=[]),t.wires||(t.wires=[]),t.settings||(t.settings={});for(const n in pr)if(t.settings[n]===void 0&&(t.settings[n]=pr[n]),typeof pr[n]=="object")for(const a in pr[n])t.settings[n][a]===void 0&&(t.settings[n][a]=pr[n][a]);return t}function W7(t,n,a){const s=document.elementFromPoint(t,n);if(s&&s.classList.contains("visiojs_connector")&&s.id!="visiojs_tempconn"){const l=s.id.split("_");a.shapeID=Number(l[1]),a.connectorID=Number(l[2])}else a.shapeID=null,a.connectorID=null}function V7(t,n,a,s){const l=document.elementsFromPoint(t,n);for(const u of l)if(u&&u.classList.contains("visiojs_connector")&&u.id!="visiojs_tempconn"&&u.id!=s){const c=u.id.split("_");a.shapeID=Number(c[1]),a.connectorID=Number(c[2]);return}else a.shapeID=null,a.connectorID=null}function zo(t,n,a,s,l,u,c){var d,Ct=10,ar=[];const en=s.select("path");var tn=[];{const ox=Jo();ox.moveTo(...n[0]),tn.push(n[0]);var on,fn,dn,Cn=n;for(d=1;d<Cn.length;d++)if(on=Cn[d-1],fn=Cn[d],on[0]==fn[0]||on[1]==fn[1])tn.push(fn);else{var Rn=a([(fn[0]-on[0])/2,0])[0];tn.push([on[0]+Rn,on[1]]),tn.push([on[0]+Rn,fn[1]]),tn.push(fn)}for(d=1;d<tn.length-1;d++)on=tn[d-1],dn=tn[d],fn=tn[d+1],on[0]==dn[0]&&dn[0]==fn[0]||on[1]==dn[1]&&dn[1]==fn[1]?(tn.splice(d,1),d--):ar.push([tn[d][0],tn[d][1]]);tn.map(sx=>ox.lineTo(sx[0],sx[1])),en.attr("d",ox.toString())}if(s.selectAll(".visiojs_elbow").remove(),l)for(var ax=0;ax<ar.length;ax++){on=ar[ax];const ox=ax,sx=s.append("rect").attr("class","visiojs_elbow").attr("x",on[0]-Ct/2).attr("y",on[1]-Ct/2).attr("width",Ct).attr("height",Ct).attr("fill","url(#visiojs_elbow_fill)");u({elbowID:ox,elbow:sx,wireID:c,start:n[0],end:n[n.length-1],redrawWire:lx=>zo(t,lx,a,s,l,u,c)})}return ar}function G7({d3:t,snapAndClipToGrid:n,elbSvg:a,wireID:s,initialState:l,elbowID:u,redrawWire:c,start:d,end:Ct,stateChanged:ar}){var en={x:0,y:0},tn=[],on={x:0,y:0};const fn=t.drag().clickDistance(10).on("start",dn=>{[on.x,on.y]=[dn.x,dn.y]}).on("drag",dn=>{const Cn=n([dn.x-on.x,dn.y-on.y]),Rn={x:Cn[0],y:Cn[1]};if(Rn.x===en.x&&Rn.y===en.y)return;en={...Rn};const ax=l.wires[s].points.map((sx,lx)=>lx===u?[sx[0]+Rn.x,sx[1]+Rn.y]:(lx===u-1||lx===u+1)&&sx[0]===l.wires[s].points[u][0]?[sx[0]+Rn.x,sx[1]]:(lx===u-1||lx===u+1)&&sx[1]===l.wires[s].points[u][1]?[sx[0],sx[1]+Rn.y]:sx);var ox=[d,Ct];ox.splice(1,0,...ax),tn=[...c(ox)]}).on("end",()=>{l.wires[s].points=[...tn],ar(l)});a.call(fn)}function jl(t,n,a,s,l,u,c,d,Ct,ar,en){const tn=ar,on=[l,u],fn=Ct([(t-tn.x)/tn.k,(n-tn.y)/tn.k]);var dn=[on,...s,fn];zo("manhattan",dn,Ct,a,null,sx=>moveElbow(sx),en.wires.length);const Cn=X$1("#visiojs_tempconn");Cn.attr("cx",fn[0]).attr("cy",fn[1]).style("visibility","visible");const Rn=Cn.node().getBoundingClientRect(),ax=Rn.left+5,ox=Rn.top+5;W7(ax,ox,d),d.shapeID!=null?(c.classed("visiojs_good_wire",!0),c.classed("visiojs_bad_wire",!1)):(c.classed("visiojs_good_wire",!1),c.classed("visiojs_bad_wire",!0))}const fc=({prevEvent:t,group:n,shapeID:a,connectorID:s,x:l,y:u,endLine:c,wireMidPoints:d=[],lineGroup:Ct=null,line:ar=null,snapAndClipToGrid:en,wireStart:tn,svg:on,initialState:fn,stateChanged:dn})=>{t.stopPropagation(),t.preventDefault();var[Cn,Rn]=Sf(n);const ax=Ta(n.attr("transform")),[ox,sx]=Mg(l,u,ax);[Cn,Rn]=en([Cn+ox,Rn+sx]),tn.shapeID=a,tn.connectorID=s;const lx={shapeID:null,connectorID:null},cx=X$1("#visiojs_wires");Ct===null&&(Ct=cx.insert("g")),ar===null&&(ar=Ct.append("path").attr("class","visiojs_wire"));var fx=X$1("#visiojs_tempconn");fx.empty()&&(fx=Ct.append("circle").attr("r",10).attr("cx",0).attr("cy",0).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id","visiojs_tempconn").style("visibility","hidden")),ar.attr("stroke-dasharray","5,5"),ar.classed("visiojs_bad_wire",!0),on.on("touchmove.drawline",function(gx){const mx=gx.touches[0];gx.preventDefault();const[px,hx]=wn(mx,on.node());jl(px,hx,Ct,d,Cn,Rn,ar,lx,en,Pe$1(on.node()),fn)}),on.on("mousemove.drawline",function(gx){const[mx,px]=wn(gx,on.node());jl(mx,px,Ct,d,Cn,Rn,ar,lx,en,Pe$1(on.node()),fn)}),X$1(window).on("keydown.endline",gx=>{gx.key==="Escape"&&(lx.shapeID=null,lx.connectorID=null,c(gx,d,Ct,lx))}),on.on("dblclick.endline",gx=>{c(gx,d,Ct,lx)}),on.on("click.endline",gx=>{if(lx.shapeID!=null&&!(lx.connectorID==s&&lx.shapeID==a))c(gx,d,Ct,lx),dn(fn);else{const[mx,px]=wn(gx,on.node()),hx=Pe$1(on.node()),vx=en([(mx-hx.x)/hx.k,(px-hx.y)/hx.k]);d.push(vx)}}),on.on("touchend.endline",gx=>{const mx=gx.changedTouches[0];if(console.log("touch endline"),lx.shapeID!=null)console.log("single click + hover"),c(gx,d,Ct,lx),dn(fn);else{const[px,hx]=wn(mx,on.node()),vx=Pe$1(on.node());d.push(en([(px-vx.x)/vx.k,(hx-vx.y)/vx.k])),console.log("add a point",d),fx.on("touchstart",function(yx){console.log("cvb mousedown on connector",a,s),fc({prevEvent:yx,group:n,shapeID:a,connectorID:s,x:l,y:u,endLine:c,wireMidPoints:d,lineGroup:Ct,line:ar,snapAndClipToGrid:en,wireStart:tn,svg:on,initialState:fn,stateChanged:dn})})}})},Z7={clickStartX:0,clickStartY:0,objStartX:0,objStartY:0,shapeDom:null,shapeID:null},Q7=(t,n,a,s,l)=>()=>Eh().clickDistance(10).on("start",function(u){t.clickStartX=u.x,t.clickStartY=u.y,t.shapeDom=X$1(this),t.shapeID=Number(t.shapeDom.attr("id").split("_")[1]),[t.objStartX,t.objStartY]=Sf(t.shapeDom)}).on("end",function(u){const c=u.x-t.clickStartX,d=u.y-t.clickStartY,[Ct,ar]=n([t.objStartX+c,t.objStartY+d]);if(!(Ct==t.objStartX&&ar==t.objStartY)){s({shapeID:t.shapeID,save:!0});for(const tn in a.shapes[t.shapeID].connectors){const on="connector_"+t.shapeID+"_"+tn,fn=X$1(`#${on}`).node().getBoundingClientRect(),dn={};if(V7(fn.left+5,fn.top+5,dn,on),dn.shapeID!==null){var en=!1;for(const Cn in a.wires)if(a.wires[Cn]!==null&&(a.wires[Cn].start.shapeID===t.shapeID&&a.wires[Cn].start.connectorID===Number(tn)&&a.wires[Cn].end.shapeID===dn.shapeID&&a.wires[Cn].end.connectorID===dn.connectorID||a.wires[Cn].end.shapeID===t.shapeID&&a.wires[Cn].end.connectorID===Number(tn)&&a.wires[Cn].start.shapeID===dn.shapeID&&a.wires[Cn].start.connectorID===dn.connectorID)){en=!0;break}if(!en){const Cn={start:{connectorID:Number(tn),shapeID:t.shapeID},end:{...dn},points:[]};a.wires.push(Cn);break}}}l(a)}}).on("drag",function(u){const c=u.x-t.clickStartX,d=u.y-t.clickStartY,[Ct,ar]=n([t.objStartX+c,t.objStartY+d]);if(Ct==a.shapes[t.shapeID].x&&ar==a.shapes[t.shapeID].y)return;const en={x:Ct-a.shapes[t.shapeID].x,y:ar-a.shapes[t.shapeID].y},tn=Ta(t.shapeDom.attr("transform"));t.shapeDom.attr("transform",`translate(${Ct}, ${ar}) rotate(${tn})`);const on=[];for(const fn in a.shapes[t.shapeID].connectors)on.push(cc(t.shapeDom,t.shapeID,fn,a,n));a.shapes[t.shapeID].x=Ct,a.shapes[t.shapeID].y=ar,s({shapeID:t.shapeID,origXY:on,delta:en})});async function su({id:t,data:n,selectIt:a=!1,selected:s,wireStart:l,snapAndClipToGrid:u,initialState:c,redrawWireOnShape:d,stateChanged:Ct,drawWire:ar}){const en=`shape_${t}`,tn=X$1("#visiojs_shapes");var on=X$1(`#${en}`);if(n===null){on.remove();return}const fn=n.image,dn=n.x,Cn=n.y,Rn=n.connectors===void 0?[]:n.connectors,ax=n.rotation,ox=n.label,sx=n.fixed===void 0?!1:n.fixed,lx=n.offset===void 0?[0,0]:n.offset;if(on.empty()){on=tn.append("g").attr("id",en).attr("class","visiojs_shape visiojs_selected_outline");const gx=on.append("g").attr("id",`${en}_image`);var cx;if(fn.endsWith(".svg")){const mx=(await $0(fn)).documentElement;gx.node().appendChild(mx),cx=X$1(mx)}else cx=gx.append("image").attr("href",fn);gx.attr("transform",`translate(${lx[0]}, ${lx[1]})`),n.width&&cx.attr("width",n.width),n.height&&cx.attr("height",n.height),a&&s.push(en),K7(on,t,c,d,a,Ct),ox&&on.append("text").attr("stroke","none").attr("x",ox.x).attr("y",ox.y).text(ox.text).attr("class",`visiojs_label ${ox.class}`);for(let mx=0;mx<Rn.length;mx++){const px=Rn[mx];J7({x:px[0],y:px[1],group:on,shapeID:t,connectorID:mx,wireStart:l,snapAndClipToGrid:u,initialState:c,drawWire:ar,stateChanged:Ct})}sx===!1&&(on.style("cursor","pointer"),on.on("mouseover",function(){l.shapeID===null&&(s.includes(en)||cx.attr("opacity",.5))}),on.on("mouseout",function(){cx.attr("opacity",1)}),on.on("click",function(mx){if(l.shapeID!==null)return;mx.stopPropagation();const px=document.elementsFromPoint(mx.x,mx.y);for(const vx of px)if(vx.classList.contains("visiojs_wire")){vx.parentElement.dispatchEvent(new MouseEvent("click",mx));return}cx.attr("opacity",1);const hx=s.indexOf(en);hx===-1?(s.push(en),on.selectAll(".visiojs_hover_rect").style("opacity","1"),on.selectAll(".visiojs_hover_rotate").style("visibility",null)):(s.splice(hx,1),on.selectAll(".visiojs_hover_rect").style("opacity","0"),on.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),cx.attr("opacity",.5))}),on.call(Q7(Z7,u,c,d,Ct)()))}var fx="";ax&&(fx=`rotate(${ax})`),on.attr("transform",`translate(${dn}, ${Cn}) ${fx}`)}function K7(t,n,a,s,l,u){const c=t.node().getBBox(),d=t.append("rect").attr("x",c.x-5).attr("y",c.y-5).attr("width",c.width+10).attr("height",c.height+10).attr("class","visiojs_hover_rect");l||d.style("opacity","0");const[Ct,ar]=[c.x+c.width+10,c.y-10],en=t.append("g").attr("width","16").attr("height","16").attr("fill","currentColor").attr("viewBox","0 0 16 16").attr("transform",`translate(${Ct}, ${ar})`).attr("class","visiojs_hover_rotate");l||en.style("visibility","hidden"),en.append("path").attr("fill-rule","evenodd").attr("d","M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"),en.append("path").attr("d","M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"),en.append("rect").attr("x","0").attr("y","0").attr("width","16").attr("height","16").attr("fill","transparent"),en.on("click",function(tn){tn.stopPropagation();const on=Ta(t.attr("transform")),[fn,dn]=Sf(t),Cn=(on+90)%360;t.attr("transform",`translate(${fn}, ${dn}) rotate(${Cn})`),a.shapes[t.attr("id").split("_")[1]].rotation=Cn,s({shapeID:n,save:!0}),u(a)})}const J7=({x:t,y:n,group:a,shapeID:s,connectorID:l,wireStart:u,snapAndClipToGrid:c,initialState:d,drawWire:Ct,stateChanged:ar})=>{const en=X$1("#visiojs_top");function tn(on,fn,dn,Cn){if(u.shapeID!==null){if(on.stopPropagation(),X$1("#visiojs_tempconn").remove(),en.on("mousemove.drawline",null),en.on("dblclick.endline",null),en.on("click.endline",null),X$1(window).on(".endline",null),Cn.shapeID===null)dn.remove();else if(Cn.shapeID==u.shapeID&&Cn.connectorID==u.connectorID)dn.remove();else{const ax={start:{...u},end:{...Cn},points:fn};var Rn=d.wires.indexOf(null);Rn==-1?(Rn=d.wires.length,d.wires.push(ax)):d.wires[Rn]=ax,dn.remove();const ox=Ct(Rn);d.wires[Rn].points=ox}u.shapeID=null,u.connectorID=null}}a.append("circle").attr("r",8).attr("cx",t).attr("cy",n).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id",`connector_${s}_${l}`).on("mouseover",function(){X$1(this).transition().duration(200).attr("r",16)}).on("mouseout",function(){X$1(this).transition().duration(200).attr("r",8)}).on("mousedown",function(on){X$1(this).transition().duration(200).attr("r",8),u.shapeID===null&&fc({prevEvent:on,group:a,shapeID:s,connectorID:l,x:t,y:n,endLine:tn,snapAndClipToGrid:c,wireStart:u,svg:en,initialState:d,stateChanged:ar})}).on("touchstart",function(on){X$1(this).transition().duration(200).attr("r",8),u.shapeID===null&&fc({prevEvent:on,group:a,shapeID:s,connectorID:l,x:t,y:n,endLine:tn,snapAndClipToGrid:c,wireStart:u,svg:en,initialState:d,stateChanged:ar})})};function nx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lu,Wl;function tx(){return Wl||(Wl=1,lu=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,l,u;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(l=s;l--!==0;)if(!t(n[l],a[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(u=Object.keys(n),s=u.length,s!==Object.keys(a).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;for(l=s;l--!==0;){var c=u[l];if(!t(n[c],a[c]))return!1}return!0}return n!==n&&a!==a}),lu}var ex=tx();const Ci=nx(ex),ix=({initialState:t,stateChanged:n=()=>{}})=>{var a,s,l,u={connectorID:null,shapeID:null},c=[],d,Ct,ar,en,tn,on=!1;t=j7(t);const fn={...t.settings};function dn(px=!0){tn=fn.gridSize,a=X$1("#visiojs_top"),d=X$1("#visiojs_wholeThing"),d.empty()&&(d=a.append("g").attr("id","visiojs_wholeThing")),a.on("."),a.attr("tabindex",0),a.on("click",function(){Rn()}),a.on("dragover",function(Ax){Ax.preventDefault()}),a.on("drop",function(Ax){Ax.preventDefault();const Mx=Ax.dataTransfer.getData("application/json"),Rx=JSON.parse(Mx),Cx=wn(Ax,d.node()),[Lx,qx]=Cx;var[Ix,Px]=Cn([Lx,qx]);fx(Rx,Ix,Px)}),X$1(window).on("keydown.delete",Ax=>{(Ax.key==="Backspace"||Ax.key==="Delete")&&document.activeElement===a.node()&&(console.log("deleting"),gx())}),X$1(window).on("resize",function(){dn(!1)});const hx=a.node().getBoundingClientRect();s=Math.round(hx.width/tn)*tn,l=Math.round(hx.height/tn)*tn;var vx=X$1("#visiojs_svgDefs");if(vx.empty()){vx=a.append("defs").attr("id","visiojs_svgDefs");const Ax=vx.append("linearGradient").attr("id","visiojs_connector_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);Ax.append("stop").attr("offset","0%").attr("stop-color","#4f6870"),Ax.append("stop").attr("offset","100%").attr("stop-color","#678792");const Mx=vx.append("linearGradient").attr("id","visiojs_elbow_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);Mx.append("stop").attr("offset","0%").attr("stop-color","#cacaca"),Mx.append("stop").attr("offset","100%").attr("stop-color","#fdfdfd")}sx(d,fn.width,fn.height,tn),Ct=X$1("#visiojs_wires"),Ct.empty()&&(Ct=d.append("g").attr("id","visiojs_wires")),ar=X$1("#visiojs_shapes"),ar.empty()&&(ar=d.append("g").attr("id","visiojs_shapes"));const yx=Math.min(s/fn.width,l/fn.height),Sx=xg().scaleExtent([yx,fn.maxZoom]).clickDistance(10).translateExtent([[-fn.width/2,-fn.height/2],[fn.width/2,fn.height/2]]).on("zoom",Ax=>d.attr("transform",Ax.transform)),_x=li.translate(s/2,l/2).scale(fn.defaultZoom);a.call(Sx.transform,_x),ox(),px&&n(t);const Ex=100,bx=X$1("#visiojs_toggle_button").empty()?a.append("foreignObject").attr("y",5).attr("width",Ex).attr("height",50).attr("id","visiojs_toggle_button_foreign").append("xhtml:body").style("margin","0px").style("background","transparent").append("button").attr("id","visiojs_toggle_button").text("Enable Zoom"):X$1("#visiojs_toggle_button");X$1("#visiojs_toggle_button_foreign").attr("x",hx.width-Ex-3),bx.on("click",function(){on?(a.on(".zoom",null),bx.text("Enable Zoom"),bx.attr("class",null),on=!1):(a.call(Sx).on("dblclick.zoom",null),bx.text("Disable Zoom"),bx.attr("class","visiojs_toggle_button_active"),on=!0)})}function Cn(px,hx=!0){return hx?[Math.min(Math.max(Math.round(px[0]/tn)*tn,-fn.width/2),fn.width/2),Math.min(Math.max(Math.round(px[1]/tn)*tn,-fn.height/2),fn.height/2)]:[Math.round(px[0]/tn)*tn,Math.round(px[1]/tn)*tn]}function Rn(){d.selectAll(".visiojs_hover_rect").style("opacity","0"),d.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),d.selectAll(".visiojs_selected_wire").classed("visiojs_selected_wire",!1),d.selectAll(".visiojs_selected_connector").classed("visiojs_selected_connector",!1),d.selectAll(".visiojs_elbow").remove(),c.length=0,X$1("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")}function ax(px){const hx=Ct;var vx=t.wires[px];if(!vx)return;var yx=X$1(`#shape_${vx.start.shapeID}`);if(yx.empty()){console.log("ERROR - cannot find shapeID",vx.start.shapeID);return}var Sx=X$1(`#shape_${vx.end.shapeID}`);if(Sx.empty()){console.log("ERROR - cannot find shapeID",vx.end.shapeID);return}const _x=`wire_${px}`;var Ex=X$1(`#${_x}`),bx;Ex.empty()?(Ex=hx.insert("g").attr("id",`wire_${px}`),bx=Ex.insert("path").attr("class","visiojs_wire")):bx=Ex.select("path");const Ax=cc(yx,vx.start.shapeID,vx.start.connectorID,t,Cn),Mx=cc(Sx,vx.end.shapeID,vx.end.connectorID,t,Cn),Rx=[Ax,...vx.points,Mx],Cx=zo("manhattan",Rx,Cn,Ex,null,Lx=>cx(Lx),px);return Ex.on("click",function(Lx){if(Lx.stopPropagation(),u.shapeID!==null)return;var qx=d.select(`#connector_${vx.start.shapeID}_${vx.start.connectorID}`),Ix=d.select(`#connector_${vx.end.shapeID}_${vx.end.connectorID}`);X$1("#visiojs_shapes").style("pointer-events","none").style("opacity","0.9");const Px=[Ax,...vx.points,Mx];zo("manhattan",Px,Cn,Ex,!0,Bx=>cx(Bx),px),bx.classed("visiojs_selected_wire",!0),Ex.raise(),qx.classed("visiojs_selected_connector",!0),Ix.classed("visiojs_selected_connector",!0);const Nx=c.indexOf(_x);Nx===-1?c.push(_x):(c.splice(Nx,1),bx.classed("visiojs_selected_wire",!1),qx.classed("visiojs_selected_connector",!1),Ix.classed("visiojs_selected_connector",!1),Ex.lower(),en.lower(),Ex.selectAll(".visiojs_elbow").remove(),c.filter(Bx=>Bx.startsWith("wire")).length==0&&(console.log("re-enabling pointer events on shapes"),X$1("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")))}),Cx}function ox(){for(let px=0;px<t.shapes.length;px++){const hx=t.shapes[px];hx&&su({id:px,data:hx,selected:c,wireStart:u,snapAndClipToGrid:Cn,initialState:t,redrawWireOnShape:lx,stateChanged:n,drawWire:ax})}for(let px=0;px<t.wires.length;px++)ax(px)}function sx(px,hx,vx,yx){if(!X$1("#visiojs_grid").empty())return;en=px.append("g").attr("id","visiojs_grid");const Sx=[];for(let _x=-hx/2;_x<hx/2;_x+=yx)Sx.push({x1:_x,y1:-vx/2,x2:_x,y2:vx/2});for(let _x=-vx/2;_x<vx/2;_x+=yx)Sx.push({x1:-hx/2,y1:_x,x2:hx/2,y2:_x});en.selectAll("line.grid-line").data(Sx).join("line").attr("class","visiojs_grid_line").attr("x1",_x=>_x.x1).attr("y1",_x=>_x.y1).attr("x2",_x=>_x.x2).attr("y2",_x=>_x.y2)}function lx({shapeID:px,save:hx=!1,origXY:vx=[],delta:yx={}}){for(const _x in t.wires){if(!t.wires[_x])continue;const Ex=t.wires[_x].start.shapeID==px,bx=t.wires[_x].end.shapeID==px;var Sx=t.wires[_x].start.connectorID;if(bx&&(Sx=t.wires[_x].end.connectorID),Ex||bx){if(vx.length>0&&t.wires[_x].points.length>0){const Mx=vx[Sx],Rx=t.wires[_x].points[0],Cx=t.wires[_x].points[t.wires[_x].points.length-1];Ex?Mx[0]==Rx[0]?Rx[0]+=yx.x:Rx[1]+=yx.y:bx&&(Mx[0]==Cx[0]?Cx[0]+=yx.x:Cx[1]+=yx.y)}const Ax=ax(_x);hx&&(t.wires[_x].points=Ax)}}}const cx=px=>{G7({d3:H7,snapAndClipToGrid:Cn,elbSvg:px.elbow,wireID:px.wireID,initialState:t,elbowID:px.elbowID,redrawWire:px.redrawWire,start:px.start,end:px.end,stateChanged:n})};function fx(px,hx=null,vx=null){Rn(),a.node().focus();const yx=JSON.parse(JSON.stringify(px));hx!==null&&(yx.x=hx),vx!==null&&(yx.y=vx);var Sx=t.shapes.indexOf(null);Sx==-1?(Sx=t.shapes.length,t.shapes.push(yx)):t.shapes[Sx]=yx,n(t),su({id:Sx,data:yx,selected:c,selectIt:!0,wireStart:u,snapAndClipToGrid:Cn,initialState:t,redrawWireOnShape:lx,stateChanged:n,drawWire:ax})}function gx(){for(const px of c){X$1(`#${px}`).remove();const hx=px.split("_");hx[0]=="shape"?(t.shapes[hx[1]]=null,t.wires=t.wires.map((vx,yx)=>vx&&(vx.start.shapeID==hx[1]||vx.end.shapeID==hx[1]?(X$1(`#wire_${yx}`).remove(),null):vx))):hx[0]=="wire"&&(t.wires[hx[1]]=null)}n(t),Rn()}function mx(px){Rn();const hx=JSON.parse(JSON.stringify(t));if(t.shapes=JSON.parse(JSON.stringify(px.shapes)),t.wires=JSON.parse(JSON.stringify(px.wires)),Ci(hx.shapes,t.shapes))if(Ci(hx.wires,t.wires))console.log("it's all the same");else{if(t.wires.length<hx.wires.length){X$1(`#wire_${hx.wires.length-1}`).remove();return}for(const yx in t.wires)Ci(hx.wires[yx],t.wires[yx])||ax(yx)}else{console.log("shapes are different");var vx=!1;if(t.shapes.length<hx.shapes.length){X$1(`#shape_${hx.shapes.length-1}`).remove();return}for(const yx in t.shapes)Ci(hx.shapes[yx],t.shapes[yx])||(console.log("delta in id ",yx),vx=!0,su({id:yx,data:t.shapes[yx],selected:c,wireStart:u,snapAndClipToGrid:Cn,initialState:t,redrawWireOnShape:lx,stateChanged:n,drawWire:ax}),lx({shapeID:yx}));if(vx)return;console.log("ERROR - some shape change but not sure what was changed?")}}return{addShape:fx,deleteSelected:gx,redraw:mx,init:dn}};function elementMapper(t){const n=t.image.split(".")[0],a=t.label?t.label.text:"";return t.image=="vin.svg"?{type:"vin",name:"vin"}:t.image=="iin.svg"?{type:"iin",name:"iin"}:t.image=="gnd.svg"?{type:"gnd",name:"gnd"}:{type:n,name:a}}function createNodeMap(t,n){var a=[];const s={},l={};var u=[];t.shapes.map(Rn=>{if(Rn!==null&&"connectors"in Rn){var ax=elementMapper(Rn);s[ax.name]={type:ax.type,portConnections:Array(Rn.connectors.length).fill(!1)}}});var c,d,Ct,ar=null,en=[];for(const Rn of t.wires){if(Rn==null)continue;const ax=elementMapper(t.shapes[Rn.start.shapeID]),ox=elementMapper(t.shapes[Rn.end.shapeID]);c={...ax,port:Rn.start.connectorID},d={...ox,port:Rn.end.connectorID},s[ax.name].portConnections[Rn.start.connectorID]=!0,s[ox.name].portConnections[Rn.end.connectorID]=!0,en.push([c,d])}var tn;do{tn=!1;e:for(Ct in en)for(const Rn in en[Ct]){const ax=en[Ct][Rn];for(const ox in en){if(ox==Ct)continue;const sx=en[ox];for(const lx in sx){const cx=sx[lx];if(ax.name==cx.name&&ax.port==cx.port){en[ox]=[...en[ox],...en[Ct]],en.splice(Ct,1),tn=!0;break e}}}}}while(tn);e:for(const Rn in en){const ax=en[Rn];for(const ox of ax)if(ox.type=="gnd"){en.splice(Rn,1);break e}}for(const Rn in en)for(let ax=0;ax<en[Rn].length;ax++){const ox=en[Rn][ax];for(let sx=ax+1;sx<en[Rn].length;sx++){const lx=en[Rn][sx];ox.name==lx.name&&ox.port==lx.port&&(en[Rn].splice(sx,1),sx--)}}a=en;for(const[Rn,ax]of Object.entries(s))if(ax.portConnections.includes(!1))for(const ox in a)a[ox]=a[ox].filter(sx=>sx.name!=Rn);for(const Rn in a)for(const ax of a[Rn])(ax.type=="vin"||ax.type=="iin")&&(ar=Rn);if(ar!==null){for(var on=[ar],fn=a[ar].map(Rn=>Rn.name),dn,Cn=0;Cn<fn.length;Cn++)for(const Rn in a)if(!on.includes(Rn)){dn=!1;for(const ax of a[Rn])fn.includes(ax.name)&&(dn||on.push(Rn),dn=!0,fn.push(...a[Rn].map(ox=>ox.name).filter(ox=>!fn.includes(ox))))}u=on.map(Rn=>a[Rn]),u.forEach((Rn,ax)=>{Rn.forEach(ox=>{ox.name in l||(l[ox.name]={ports:Array(n[ox.type].connectors.length).fill(null),type:ox.type}),l[ox.name].ports[ox.port]=ax})})}return{nodeMap:u,components:s,fullyConnectedComponents:l}}function r(t){var n,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(a=r(t[n]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function clsx(){for(var t,n,a=0,s="",l=arguments.length;a<l;a++)(t=arguments[a])&&(n=r(t))&&(s&&(s+=" "),s+=n);return s}function resolveProps(t,n,a=!1){const s={...n};for(const l in t)if(Object.prototype.hasOwnProperty.call(t,l)){const u=l;if(u==="components"||u==="slots")s[u]={...t[u],...s[u]};else if(u==="componentsProps"||u==="slotProps"){const c=t[u],d=n[u];if(!d)s[u]=c||{};else if(!c)s[u]=d;else{s[u]={...d};for(const Ct in c)if(Object.prototype.hasOwnProperty.call(c,Ct)){const ar=Ct;s[u][ar]=resolveProps(c[ar],d[ar],a)}}}else u==="className"&&a&&n.className?s.className=clsx(t?.className,n?.className):u==="style"&&a&&n.style?s.style={...t?.style,...n?.style}:s[u]===void 0&&(s[u]=t[u])}return s}function composeClasses(t,n,a=void 0){const s={};for(const l in t){const u=t[l];let c="",d=!0;for(let Ct=0;Ct<u.length;Ct+=1){const ar=u[Ct];ar&&(c+=(d===!0?"":" ")+n(ar),d=!1,a&&a[ar]&&(c+=" "+a[ar]))}s[l]=c}return s}const defaultGenerator=t=>t,createClassNameGenerator=()=>{let t=defaultGenerator;return{configure(n){t=n},generate(n){return t(n)},reset(){t=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function formatMuiErrorMessage(t,...n){const a=new URL(`https://mui.com/production-error/?code=${t}`);return n.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${t}; visit ${a} for the full message.`}function capitalize(t){if(typeof t!="string")throw new Error(formatMuiErrorMessage(7));return t.charAt(0).toUpperCase()+t.slice(1)}function createChainedFunction(...t){return t.reduce((n,a)=>a==null?n:function(...l){n.apply(this,l),a.apply(this,l)},()=>{})}var reactIs$1={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),Ct=Symbol.for("react.suspense"),ar=Symbol.for("react.suspense_list"),en=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),on=Symbol.for("react.view_transition"),fn=Symbol.for("react.client.reference");function dn(Cn){if(typeof Cn=="object"&&Cn!==null){var Rn=Cn.$$typeof;switch(Rn){case t:switch(Cn=Cn.type,Cn){case a:case l:case s:case Ct:case ar:case on:return Cn;default:switch(Cn=Cn&&Cn.$$typeof,Cn){case c:case d:case tn:case en:return Cn;case u:return Cn;default:return Rn}}case n:return Rn}}}return reactIs_production.ContextConsumer=u,reactIs_production.ContextProvider=c,reactIs_production.Element=t,reactIs_production.ForwardRef=d,reactIs_production.Fragment=a,reactIs_production.Lazy=tn,reactIs_production.Memo=en,reactIs_production.Portal=n,reactIs_production.Profiler=l,reactIs_production.StrictMode=s,reactIs_production.Suspense=Ct,reactIs_production.SuspenseList=ar,reactIs_production.isContextConsumer=function(Cn){return dn(Cn)===u},reactIs_production.isContextProvider=function(Cn){return dn(Cn)===c},reactIs_production.isElement=function(Cn){return typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===t},reactIs_production.isForwardRef=function(Cn){return dn(Cn)===d},reactIs_production.isFragment=function(Cn){return dn(Cn)===a},reactIs_production.isLazy=function(Cn){return dn(Cn)===tn},reactIs_production.isMemo=function(Cn){return dn(Cn)===en},reactIs_production.isPortal=function(Cn){return dn(Cn)===n},reactIs_production.isProfiler=function(Cn){return dn(Cn)===l},reactIs_production.isStrictMode=function(Cn){return dn(Cn)===s},reactIs_production.isSuspense=function(Cn){return dn(Cn)===Ct},reactIs_production.isSuspenseList=function(Cn){return dn(Cn)===ar},reactIs_production.isValidElementType=function(Cn){return typeof Cn=="string"||typeof Cn=="function"||Cn===a||Cn===l||Cn===s||Cn===Ct||Cn===ar||typeof Cn=="object"&&Cn!==null&&(Cn.$$typeof===tn||Cn.$$typeof===en||Cn.$$typeof===c||Cn.$$typeof===u||Cn.$$typeof===d||Cn.$$typeof===fn||Cn.getModuleId!==void 0)},reactIs_production.typeOf=dn,reactIs_production}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production()),reactIs$1.exports}var reactIsExports=requireReactIs$1();function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function deepClone(t){if(reactExports.isValidElement(t)||reactIsExports.isValidElementType(t)||!isPlainObject(t))return t;const n={};return Object.keys(t).forEach(a=>{n[a]=deepClone(t[a])}),n}function deepmerge(t,n,a={clone:!0}){const s=a.clone?{...t}:t;return isPlainObject(t)&&isPlainObject(n)&&Object.keys(n).forEach(l=>{reactExports.isValidElement(n[l])||reactIsExports.isValidElementType(n[l])?s[l]=n[l]:isPlainObject(n[l])&&Object.prototype.hasOwnProperty.call(t,l)&&isPlainObject(t[l])?s[l]=deepmerge(t[l],n[l],a):a.clone?s[l]=isPlainObject(n[l])?deepClone(n[l]):n[l]:s[l]=n[l]}),s}function merge$1(t,n){return n?deepmerge(t,n,{clone:!1}):t}function sortContainerQueries(t,n){if(!t.containerQueries)return n;const a=Object.keys(n).filter(s=>s.startsWith("@container")).sort((s,l)=>{const u=/min-width:\s*([0-9.]+)/;return+(s.match(u)?.[1]||0)-+(l.match(u)?.[1]||0)});return a.length?a.reduce((s,l)=>{const u=n[l];return delete s[l],s[l]=u,s},{...n}):n}function isCqShorthand(t,n){return n==="@"||n.startsWith("@")&&(t.some(a=>n.startsWith(`@${a}`))||!!n.match(/^@\d/))}function getContainerQuery(t,n){const a=n.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,l]=a,u=Number.isNaN(+s)?s||0:+s;return t.containerQueries(l).up(u)}function cssContainerQueries(t){const n=(u,c)=>u.replace("@media",c?`@container ${c}`:"@container");function a(u,c){u.up=(...d)=>n(t.breakpoints.up(...d),c),u.down=(...d)=>n(t.breakpoints.down(...d),c),u.between=(...d)=>n(t.breakpoints.between(...d),c),u.only=(...d)=>n(t.breakpoints.only(...d),c),u.not=(...d)=>{const Ct=n(t.breakpoints.not(...d),c);return Ct.includes("not all and")?Ct.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):Ct}}const s={},l=u=>(a(s,u),s);return a(l),{...t,containerQueries:l}}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${values$1[t]}px)`},defaultContainerQueries={containerQueries:t=>({up:n=>{let a=typeof n=="number"?n:values$1[n]||n;return typeof a=="number"&&(a=`${a}px`),t?`@container ${t} (min-width:${a})`:`@container (min-width:${a})`}})};function handleBreakpoints(t,n,a){const s=t.theme||{};if(Array.isArray(n)){const u=s.breakpoints||defaultBreakpoints;return n.reduce((c,d,Ct)=>(c[u.up(u.keys[Ct])]=a(n[Ct]),c),{})}if(typeof n=="object"){const u=s.breakpoints||defaultBreakpoints;return Object.keys(n).reduce((c,d)=>{if(isCqShorthand(u.keys,d)){const Ct=getContainerQuery(s.containerQueries?s:defaultContainerQueries,d);Ct&&(c[Ct]=a(n[d],d))}else if(Object.keys(u.values||values$1).includes(d)){const Ct=u.up(d);c[Ct]=a(n[d],d)}else{const Ct=d;c[Ct]=n[Ct]}return c},{})}return a(n)}function createEmptyBreakpointObject(t={}){return t.keys?.reduce((a,s)=>{const l=t.up(s);return a[l]={},a},{})||{}}function removeUnusedBreakpoints(t,n){return t.reduce((a,s)=>{const l=a[s];return(!l||Object.keys(l).length===0)&&delete a[s],a},n)}function mergeBreakpointsInOrder(t,...n){const a=createEmptyBreakpointObject(t),s=[a,...n].reduce((l,u)=>deepmerge(l,u),{});return removeUnusedBreakpoints(Object.keys(a),s)}function computeBreakpointsBase(t,n){if(typeof t!="object")return{};const a={},s=Object.keys(n);return Array.isArray(t)?s.forEach((l,u)=>{u<t.length&&(a[l]=!0)}):s.forEach(l=>{t[l]!=null&&(a[l]=!0)}),a}function resolveBreakpointValues({values:t,breakpoints:n,base:a}){const s=a||computeBreakpointsBase(t,n),l=Object.keys(s);if(l.length===0)return t;let u;return l.reduce((c,d,Ct)=>(Array.isArray(t)?(c[d]=t[Ct]!=null?t[Ct]:t[u],u=Ct):typeof t=="object"?(c[d]=t[d]!=null?t[d]:t[u],u=d):c[d]=t,c),{})}function getPath(t,n,a=!0){if(!n||typeof n!="string")return null;if(t&&t.vars&&a){const s=`vars.${n}`.split(".").reduce((l,u)=>l&&l[u]?l[u]:null,t);if(s!=null)return s}return n.split(".").reduce((s,l)=>s&&s[l]!=null?s[l]:null,t)}function getStyleValue$1(t,n,a,s=a){let l;return typeof t=="function"?l=t(a):Array.isArray(t)?l=t[a]||s:l=getPath(t,a)||s,n&&(l=n(l,s,t)),l}function style$2(t){const{prop:n,cssProperty:a=t.prop,themeKey:s,transform:l}=t,u=c=>{if(c[n]==null)return null;const d=c[n],Ct=c.theme,ar=getPath(Ct,s)||{};return handleBreakpoints(c,d,tn=>{let on=getStyleValue$1(ar,l,tn);return tn===on&&typeof tn=="string"&&(on=getStyleValue$1(ar,l,`${n}${tn==="default"?"":capitalize(tn)}`,tn)),a===!1?on:{[a]:on}})};return u.propTypes={},u.filterProps=[n],u}function memoize$1(t){const n={};return a=>(n[a]===void 0&&(n[a]=t(a)),n[a])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$1(t=>{if(t.length>2)if(aliases[t])t=aliases[t];else return[t];const[n,a]=t.split(""),s=properties[n],l=directions[a]||"";return Array.isArray(l)?l.map(u=>s+u):[s+l]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(t,n,a,s){const l=getPath(t,n,!0)??a;return typeof l=="number"||typeof l=="string"?u=>typeof u=="string"?u:typeof l=="string"?l.startsWith("var(")&&u===0?0:l.startsWith("var(")&&u===1?l:`calc(${u} * ${l})`:l*u:Array.isArray(l)?u=>{if(typeof u=="string")return u;const c=Math.abs(u),d=l[c];return u>=0?d:typeof d=="number"?-d:typeof d=="string"&&d.startsWith("var(")?`calc(-1 * ${d})`:`-${d}`}:typeof l=="function"?l:()=>{}}function createUnarySpacing(t){return createUnaryUnit(t,"spacing",8)}function getValue(t,n){return typeof n=="string"||n==null?n:t(n)}function getStyleFromPropValue(t,n){return a=>t.reduce((s,l)=>(s[l]=getValue(n,a),s),{})}function resolveCssProperty(t,n,a,s){if(!n.includes(a))return null;const l=getCssProperties(a),u=getStyleFromPropValue(l,s),c=t[a];return handleBreakpoints(t,c,u)}function style$1(t,n){const a=createUnarySpacing(t.theme);return Object.keys(t).map(s=>resolveCssProperty(t,n,s,a)).reduce(merge$1,{})}function margin(t){return style$1(t,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(t){return style$1(t,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function compose(...t){const n=t.reduce((s,l)=>(l.filterProps.forEach(u=>{s[u]=l}),s),{}),a=s=>Object.keys(s).reduce((l,u)=>n[u]?merge$1(l,n[u](s)):l,{});return a.propTypes={},a.filterProps=t.reduce((s,l)=>s.concat(l.filterProps),[]),a}function borderTransform(t){return typeof t!="number"?t:`${t}px solid`}function createBorderStyle(t,n){return style$2({prop:t,themeKey:"borders",transform:n})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const n=createUnaryUnit(t.theme,"shape.borderRadius",4),a=s=>({borderRadius:getValue(n,s)});return handleBreakpoints(t,t.borderRadius,a)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=t=>{if(t.gap!==void 0&&t.gap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({gap:getValue(n,s)});return handleBreakpoints(t,t.gap,a)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({columnGap:getValue(n,s)});return handleBreakpoints(t,t.columnGap,a)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({rowGap:getValue(n,s)});return handleBreakpoints(t,t.rowGap,a)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(t,n){return n==="grey"?n:t}const color$1=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor$1=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor$1);function sizingTransform(t){return t<=1&&t!==0?`${t*100}%`:t}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const n=a=>{const s=t.theme?.breakpoints?.values?.[a]||values$1[a];return s?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:sizingTransform(a)}};return handleBreakpoints(t,t.maxWidth,n)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...t){const n=t.reduce((s,l)=>s.concat(Object.keys(l)),[]),a=new Set(n);return t.every(s=>a.size===Object.keys(s).length)}function callIfFn(t,n){return typeof t=="function"?t(n):t}function unstable_createStyleFunctionSx(){function t(a,s,l,u){const c={[a]:s,theme:l},d=u[a];if(!d)return{[a]:s};const{cssProperty:Ct=a,themeKey:ar,transform:en,style:tn}=d;if(s==null)return null;if(ar==="typography"&&s==="inherit")return{[a]:s};const on=getPath(l,ar)||{};return tn?tn(c):handleBreakpoints(c,s,dn=>{let Cn=getStyleValue$1(on,en,dn);return dn===Cn&&typeof dn=="string"&&(Cn=getStyleValue$1(on,en,`${a}${dn==="default"?"":capitalize(dn)}`,dn)),Ct===!1?Cn:{[Ct]:Cn}})}function n(a){const{sx:s,theme:l={},nested:u}=a||{};if(!s)return null;const c=l.unstable_sxConfig??defaultSxConfig;function d(Ct){let ar=Ct;if(typeof Ct=="function")ar=Ct(l);else if(typeof Ct!="object")return Ct;if(!ar)return null;const en=createEmptyBreakpointObject(l.breakpoints),tn=Object.keys(en);let on=en;return Object.keys(ar).forEach(fn=>{const dn=callIfFn(ar[fn],l);if(dn!=null)if(typeof dn=="object")if(c[fn])on=merge$1(on,t(fn,dn,l,c));else{const Cn=handleBreakpoints({theme:l},dn,Rn=>({[fn]:Rn}));objectsHaveSameKeys(Cn,dn)?on[fn]=n({sx:dn,theme:l,nested:!0}):on=merge$1(on,Cn)}else on=merge$1(on,t(fn,dn,l,c))}),!u&&l.modularCssLayers?{"@layer sx":sortContainerQueries(l,removeUnusedBreakpoints(tn,on))}:sortContainerQueries(l,removeUnusedBreakpoints(tn,on))}return Array.isArray(s)?s.map(d):d(s)}return n}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const splitProps=t=>{const n={systemProps:{},otherProps:{}},a=t?.theme?.unstable_sxConfig??defaultSxConfig;return Object.keys(t).forEach(s=>{a[s]?n.systemProps[s]=t[s]:n.otherProps[s]=t[s]}),n};function extendSxProp$1(t){const{sx:n,...a}=t,{systemProps:s,otherProps:l}=splitProps(a);let u;return Array.isArray(n)?u=[s,...n]:typeof n=="function"?u=(...c)=>{const d=n(...c);return isPlainObject(d)?{...s,...d}:s}:u={...s,...n},{...l,sx:u}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_extends.apply(null,arguments)}function sheetForTag(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function createStyleElement(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var StyleSheet=(function(){function t(a){var s=this;this._insertTag=function(l){var u;s.tags.length===0?s.insertionPoint?u=s.insertionPoint.nextSibling:s.prepend?u=s.container.firstChild:u=s.before:u=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(l,u),s.tags.push(l)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(s){s.forEach(this._insertTag)},n.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var u=sheetForTag(l);try{u.insertRule(s,u.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(s));this.ctr++},n.flush=function(){this.tags.forEach(function(s){var l;return(l=s.parentNode)==null?void 0:l.removeChild(s)}),this.tags=[],this.ctr=0},t})(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$4=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(t,n){return charat(t,0)^45?(((n<<2^charat(t,0))<<2^charat(t,1))<<2^charat(t,2))<<2^charat(t,3):0}function trim$2(t){return t.trim()}function match(t,n){return(t=n.exec(t))?t[0]:t}function replace(t,n,a){return t.replace(n,a)}function indexof(t,n){return t.indexOf(n)}function charat(t,n){return t.charCodeAt(n)|0}function substr(t,n,a){return t.slice(n,a)}function strlen(t){return t.length}function sizeof(t){return t.length}function append$1(t,n){return n.push(t),t}function combine(t,n){return t.map(n).join("")}var line=1,column=1,length$1=0,position$1=0,character=0,characters="";function node(t,n,a,s,l,u,c){return{value:t,root:n,parent:a,type:s,props:l,children:u,line,column,length:c,return:""}}function copy$2(t,n){return assign(node("",null,null,"",null,null,0),t,{length:-t.length},n)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length$1?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice$1(t,n){return substr(characters,t,n)}function token(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(t){return line=column=1,length$1=strlen(characters=t),position$1=0,[]}function dealloc(t){return characters="",t}function delimit(t){return trim$2(slice$1(position$1-1,delimiter(t===91?t+2:t===40?t+1:t)))}function whitespace(t){for(;(character=peek())&&character<33;)next();return token(t)>2||token(character)>3?"":" "}function escaping(t,n){for(;--n&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(t,caret()+(n<6&&peek()==32&&next()==32))}function delimiter(t){for(;next();)switch(character){case t:return position$1;case 34:case 39:t!==34&&t!==39&&delimiter(character);break;case 40:t===41&&delimiter(t);break;case 92:next();break}return position$1}function commenter(t,n){for(;next()&&t+character!==57;)if(t+character===84&&peek()===47)break;return"/*"+slice$1(n,position$1-1)+"*"+from(t===47?t:next())}function identifier(t){for(;!token(peek());)next();return slice$1(t,position$1)}function compile(t){return dealloc(parse$1("",null,null,null,[""],t=alloc(t),0,[0],t))}function parse$1(t,n,a,s,l,u,c,d,Ct){for(var ar=0,en=0,tn=c,on=0,fn=0,dn=0,Cn=1,Rn=1,ax=1,ox=0,sx="",lx=l,cx=u,fx=s,gx=sx;Rn;)switch(dn=ox,ox=next()){case 40:if(dn!=108&&charat(gx,tn-1)==58){indexof(gx+=replace(delimit(ox),"&","&\f"),"&\f")!=-1&&(ax=-1);break}case 34:case 39:case 91:gx+=delimit(ox);break;case 9:case 10:case 13:case 32:gx+=whitespace(dn);break;case 92:gx+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append$1(comment(commenter(next(),caret()),n,a),Ct);break;default:gx+="/"}break;case 123*Cn:d[ar++]=strlen(gx)*ax;case 125*Cn:case 59:case 0:switch(ox){case 0:case 125:Rn=0;case 59+en:ax==-1&&(gx=replace(gx,/\f/g,"")),fn>0&&strlen(gx)-tn&&append$1(fn>32?declaration(gx+";",s,a,tn-1):declaration(replace(gx," ","")+";",s,a,tn-2),Ct);break;case 59:gx+=";";default:if(append$1(fx=ruleset(gx,n,a,ar,en,l,d,sx,lx=[],cx=[],tn),u),ox===123)if(en===0)parse$1(gx,n,fx,fx,lx,u,tn,d,cx);else switch(on===99&&charat(gx,3)===110?100:on){case 100:case 108:case 109:case 115:parse$1(t,fx,fx,s&&append$1(ruleset(t,fx,fx,0,0,l,d,sx,l,lx=[],tn),cx),l,cx,tn,d,s?lx:cx);break;default:parse$1(gx,fx,fx,fx,[""],cx,0,d,cx)}}ar=en=fn=0,Cn=ax=1,sx=gx="",tn=c;break;case 58:tn=1+strlen(gx),fn=dn;default:if(Cn<1){if(ox==123)--Cn;else if(ox==125&&Cn++==0&&prev()==125)continue}switch(gx+=from(ox),ox*Cn){case 38:ax=en>0?1:(gx+="\f",-1);break;case 44:d[ar++]=(strlen(gx)-1)*ax,ax=1;break;case 64:peek()===45&&(gx+=delimit(next())),on=peek(),en=tn=strlen(sx=gx+=identifier(caret())),ox++;break;case 45:dn===45&&strlen(gx)==2&&(Cn=0)}}return u}function ruleset(t,n,a,s,l,u,c,d,Ct,ar,en){for(var tn=l-1,on=l===0?u:[""],fn=sizeof(on),dn=0,Cn=0,Rn=0;dn<s;++dn)for(var ax=0,ox=substr(t,tn+1,tn=abs$4(Cn=c[dn])),sx=t;ax<fn;++ax)(sx=trim$2(Cn>0?on[ax]+" "+ox:replace(ox,/&\f/g,on[ax])))&&(Ct[Rn++]=sx);return node(t,n,a,l===0?RULESET:d,Ct,ar,en)}function comment(t,n,a){return node(t,n,a,COMMENT,from(char()),substr(t,2,-2),0)}function declaration(t,n,a,s){return node(t,n,a,DECLARATION,substr(t,0,s),substr(t,s+1,-1),s)}function serialize(t,n){for(var a="",s=sizeof(t),l=0;l<s;l++)a+=n(t[l],l,t,n)||"";return a}function stringify$1(t,n,a,s){switch(t.type){case LAYER:if(t.children.length)break;case IMPORT:case DECLARATION:return t.return=t.return||t.value;case COMMENT:return"";case KEYFRAMES:return t.return=t.value+"{"+serialize(t.children,s)+"}";case RULESET:t.value=t.props.join(",")}return strlen(a=serialize(t.children,s))?t.return=t.value+"{"+a+"}":""}function middleware(t){var n=sizeof(t);return function(a,s,l,u){for(var c="",d=0;d<n;d++)c+=t[d](a,s,l,u)||"";return c}}function rulesheet(t){return function(n){n.root||(n=n.return)&&t(n)}}function memoize(t){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=t(a)),n[a]}}var identifierWithPointTracking=function(n,a,s){for(var l=0,u=0;l=u,u=peek(),l===38&&u===12&&(a[s]=1),!token(u);)next();return slice$1(n,position$1)},toRules=function(n,a){var s=-1,l=44;do switch(token(l)){case 0:l===38&&peek()===12&&(a[s]=1),n[s]+=identifierWithPointTracking(position$1-1,a,s);break;case 2:n[s]+=delimit(l);break;case 4:if(l===44){n[++s]=peek()===58?"&\f":"",a[s]=n[s].length;break}default:n[s]+=from(l)}while(l=next());return n},getRules=function(n,a){return dealloc(toRules(alloc(n),a))},fixedElements=new WeakMap,compat=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,s=n.parent,l=n.column===s.column&&n.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!fixedElements.get(s))&&!l){fixedElements.set(n,!0);for(var u=[],c=getRules(a,u),d=s.props,Ct=0,ar=0;Ct<c.length;Ct++)for(var en=0;en<d.length;en++,ar++)n.props[ar]=u[Ct]?c[Ct].replace(/&\f/g,d[en]):d[en]+" "+c[Ct]}}},removeLabel=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function prefix(t,n){switch(hash$2(t,n)){case 5103:return WEBKIT+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+t+MOZ+t+MS+t+t;case 6828:case 4268:return WEBKIT+t+MS+t+t;case 6165:return WEBKIT+t+MS+"flex-"+t+t;case 5187:return WEBKIT+t+replace(t,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+t;case 5443:return WEBKIT+t+MS+"flex-item-"+replace(t,/flex-|-self/,"")+t;case 4675:return WEBKIT+t+MS+"flex-line-pack"+replace(t,/align-content|flex-|-self/,"")+t;case 5548:return WEBKIT+t+MS+replace(t,"shrink","negative")+t;case 5292:return WEBKIT+t+MS+replace(t,"basis","preferred-size")+t;case 6060:return WEBKIT+"box-"+replace(t,"-grow","")+WEBKIT+t+MS+replace(t,"grow","positive")+t;case 4554:return WEBKIT+replace(t,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+t;case 6187:return replace(replace(replace(t,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),t,"")+t;case 5495:case 3959:return replace(t,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(t,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+t+t;case 4095:case 3583:case 4068:case 2532:return replace(t,/(.+)-inline(.+)/,WEBKIT+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(t)-1-n>6)switch(charat(t,n+1)){case 109:if(charat(t,n+4)!==45)break;case 102:return replace(t,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~indexof(t,"stretch")?prefix(replace(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(charat(t,n+1)!==115)break;case 6444:switch(charat(t,strlen(t)-3-(~indexof(t,"!important")&&10))){case 107:return replace(t,":",":"+WEBKIT)+t;case 101:return replace(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(t,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+t}break;case 5936:switch(charat(t,n+11)){case 114:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return WEBKIT+t+MS+t+t}return t}var prefixer=function(n,a,s,l){if(n.length>-1&&!n.return)switch(n.type){case DECLARATION:n.return=prefix(n.value,n.length);break;case KEYFRAMES:return serialize([copy$2(n,{value:replace(n.value,"@","@"+WEBKIT)})],l);case RULESET:if(n.length)return combine(n.props,function(u){switch(match(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy$2(n,{props:[replace(u,/:(read-\w+)/,":"+MOZ+"$1")]})],l);case"::placeholder":return serialize([copy$2(n,{props:[replace(u,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$2(n,{props:[replace(u,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$2(n,{props:[replace(u,/:(plac\w+)/,MS+"input-$1")]})],l)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(n){var a=n.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(Cn){var Rn=Cn.getAttribute("data-emotion");Rn.indexOf(" ")!==-1&&(document.head.appendChild(Cn),Cn.setAttribute("data-s",""))})}var l=n.stylisPlugins||defaultStylisPlugins,u={},c,d=[];c=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(Cn){for(var Rn=Cn.getAttribute("data-emotion").split(" "),ax=1;ax<Rn.length;ax++)u[Rn[ax]]=!0;d.push(Cn)});var Ct,ar=[compat,removeLabel];{var en,tn=[stringify$1,rulesheet(function(Cn){en.insert(Cn)})],on=middleware(ar.concat(l,tn)),fn=function(Rn){return serialize(compile(Rn),on)};Ct=function(Rn,ax,ox,sx){en=ox,fn(Rn?Rn+"{"+ax.styles+"}":ax.styles),sx&&(dn.inserted[ax.name]=!0)}}var dn={key:a,sheet:new StyleSheet({key:a,container:c,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:u,registered:{},insert:Ct};return dn.sheet.hydrate(d),dn},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,l=t?Symbol.for("react.strict_mode"):60108,u=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,Ct=t?Symbol.for("react.async_mode"):60111,ar=t?Symbol.for("react.concurrent_mode"):60111,en=t?Symbol.for("react.forward_ref"):60112,tn=t?Symbol.for("react.suspense"):60113,on=t?Symbol.for("react.suspense_list"):60120,fn=t?Symbol.for("react.memo"):60115,dn=t?Symbol.for("react.lazy"):60116,Cn=t?Symbol.for("react.block"):60121,Rn=t?Symbol.for("react.fundamental"):60117,ax=t?Symbol.for("react.responder"):60118,ox=t?Symbol.for("react.scope"):60119;function sx(cx){if(typeof cx=="object"&&cx!==null){var fx=cx.$$typeof;switch(fx){case n:switch(cx=cx.type,cx){case Ct:case ar:case s:case u:case l:case tn:return cx;default:switch(cx=cx&&cx.$$typeof,cx){case d:case en:case dn:case fn:case c:return cx;default:return fx}}case a:return fx}}}function lx(cx){return sx(cx)===ar}return reactIs_production_min.AsyncMode=Ct,reactIs_production_min.ConcurrentMode=ar,reactIs_production_min.ContextConsumer=d,reactIs_production_min.ContextProvider=c,reactIs_production_min.Element=n,reactIs_production_min.ForwardRef=en,reactIs_production_min.Fragment=s,reactIs_production_min.Lazy=dn,reactIs_production_min.Memo=fn,reactIs_production_min.Portal=a,reactIs_production_min.Profiler=u,reactIs_production_min.StrictMode=l,reactIs_production_min.Suspense=tn,reactIs_production_min.isAsyncMode=function(cx){return lx(cx)||sx(cx)===Ct},reactIs_production_min.isConcurrentMode=lx,reactIs_production_min.isContextConsumer=function(cx){return sx(cx)===d},reactIs_production_min.isContextProvider=function(cx){return sx(cx)===c},reactIs_production_min.isElement=function(cx){return typeof cx=="object"&&cx!==null&&cx.$$typeof===n},reactIs_production_min.isForwardRef=function(cx){return sx(cx)===en},reactIs_production_min.isFragment=function(cx){return sx(cx)===s},reactIs_production_min.isLazy=function(cx){return sx(cx)===dn},reactIs_production_min.isMemo=function(cx){return sx(cx)===fn},reactIs_production_min.isPortal=function(cx){return sx(cx)===a},reactIs_production_min.isProfiler=function(cx){return sx(cx)===u},reactIs_production_min.isStrictMode=function(cx){return sx(cx)===l},reactIs_production_min.isSuspense=function(cx){return sx(cx)===tn},reactIs_production_min.isValidElementType=function(cx){return typeof cx=="string"||typeof cx=="function"||cx===s||cx===ar||cx===u||cx===l||cx===tn||cx===on||typeof cx=="object"&&cx!==null&&(cx.$$typeof===dn||cx.$$typeof===fn||cx.$$typeof===c||cx.$$typeof===d||cx.$$typeof===en||cx.$$typeof===Rn||cx.$$typeof===ax||cx.$$typeof===ox||cx.$$typeof===Cn)},reactIs_production_min.typeOf=sx,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var t=requireReactIs(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[t.ForwardRef]=s,u[t.Memo]=l;function c(dn){return t.isMemo(dn)?l:u[dn.$$typeof]||n}var d=Object.defineProperty,Ct=Object.getOwnPropertyNames,ar=Object.getOwnPropertySymbols,en=Object.getOwnPropertyDescriptor,tn=Object.getPrototypeOf,on=Object.prototype;function fn(dn,Cn,Rn){if(typeof Cn!="string"){if(on){var ax=tn(Cn);ax&&ax!==on&&fn(dn,ax,Rn)}var ox=Ct(Cn);ar&&(ox=ox.concat(ar(Cn)));for(var sx=c(dn),lx=c(Cn),cx=0;cx<ox.length;++cx){var fx=ox[cx];if(!a[fx]&&!(Rn&&Rn[fx])&&!(lx&&lx[fx])&&!(sx&&sx[fx])){var gx=en(Cn,fx);try{d(dn,fx,gx)}catch{}}}}return dn}return hoistNonReactStatics_cjs=fn,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(t,n,a){var s="";return a.split(" ").forEach(function(l){t[l]!==void 0?n.push(t[l]+";"):l&&(s+=l+" ")}),s}var registerStyles=function(n,a,s){var l=n.key+"-"+a.name;(s===!1||isBrowser===!1)&&n.registered[l]===void 0&&(n.registered[l]=a.styles)},insertStyles=function(n,a,s){registerStyles(n,a,s);var l=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var u=a;do n.insert(a===u?"."+l:"",u,n.sheet,!0),u=u.next;while(u!==void 0)}};function murmur2(t){for(var n=0,a,s=0,l=t.length;l>=4;++s,l-=4)a=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(l){case 3:n^=(t.charCodeAt(s+2)&255)<<16;case 2:n^=(t.charCodeAt(s+1)&255)<<8;case 1:n^=t.charCodeAt(s)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(n){return n.charCodeAt(1)===45},isProcessableValue=function(n){return n!=null&&typeof n!="boolean"},processStyleName=memoize(function(t){return isCustomProperty(t)?t:t.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(animationRegex,function(s,l,u){return cursor={name:l,styles:u,next:cursor},l})}return unitlessKeys[n]!==1&&!isCustomProperty(n)&&typeof a=="number"&&a!==0?a+"px":a};function handleInterpolation(t,n,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var l=a;if(l.anim===1)return cursor={name:l.name,styles:l.styles,next:cursor},l.name;var u=a;if(u.styles!==void 0){var c=u.next;if(c!==void 0)for(;c!==void 0;)cursor={name:c.name,styles:c.styles,next:cursor},c=c.next;var d=u.styles+";";return d}return createStringFromObject(t,n,a)}case"function":{if(t!==void 0){var Ct=cursor,ar=a(t);return cursor=Ct,handleInterpolation(t,n,ar)}break}}var en=a;if(n==null)return en;var tn=n[en];return tn!==void 0?tn:en}function createStringFromObject(t,n,a){var s="";if(Array.isArray(a))for(var l=0;l<a.length;l++)s+=handleInterpolation(t,n,a[l])+";";else for(var u in a){var c=a[u];if(typeof c!="object"){var d=c;n!=null&&n[d]!==void 0?s+=u+"{"+n[d]+"}":isProcessableValue(d)&&(s+=processStyleName(u)+":"+processStyleValue(u,d)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(n==null||n[c[0]]===void 0))for(var Ct=0;Ct<c.length;Ct++)isProcessableValue(c[Ct])&&(s+=processStyleName(u)+":"+processStyleValue(u,c[Ct])+";");else{var ar=handleInterpolation(t,n,c);switch(u){case"animation":case"animationName":{s+=processStyleName(u)+":"+ar+";";break}default:s+=u+"{"+ar+"}"}}}return s}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,l="";cursor=void 0;var u=t[0];if(u==null||u.raw===void 0)s=!1,l+=handleInterpolation(a,n,u);else{var c=u;l+=c[0]}for(var d=1;d<t.length;d++)if(l+=handleInterpolation(a,n,t[d]),s){var Ct=u;l+=Ct[d]}labelPattern.lastIndex=0;for(var ar="",en;(en=labelPattern.exec(l))!==null;)ar+="-"+en[1];var tn=murmur2(l)+ar;return{name:tn,styles:l,next:cursor}}var syncFallback=function(n){return n()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(n){return reactExports.forwardRef(function(a,s){var l=reactExports.useContext(EmotionCacheContext);return n(a,l,s)})},ThemeContext$1=reactExports.createContext({}),hasOwn$1={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(n,a){var s={};for(var l in a)hasOwn$1.call(a,l)&&(s[l]=a[l]);return s[typePropName]=n,s},Insertion$1=function(n){var a=n.cache,s=n.serialized,l=n.isStringTag;return registerStyles(a,s,l),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,s,l)}),null},Emotion=withEmotionCache(function(t,n,a){var s=t.css;typeof s=="string"&&n.registered[s]!==void 0&&(s=n.registered[s]);var l=t[typePropName],u=[s],c="";typeof t.className=="string"?c=getRegisteredStyles(n.registered,u,t.className):t.className!=null&&(c=t.className+" ");var d=serializeStyles(u,void 0,reactExports.useContext(ThemeContext$1));c+=n.key+"-"+d.name;var Ct={};for(var ar in t)hasOwn$1.call(t,ar)&&ar!=="css"&&ar!==typePropName&&(Ct[ar]=t[ar]);return Ct.className=c,a&&(Ct.ref=a),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:n,serialized:d,isStringTag:typeof l=="string"}),reactExports.createElement(l,Ct))}),Emotion$1=Emotion,jsx=function(n,a){var s=arguments;if(a==null||!hasOwn$1.call(a,"css"))return reactExports.createElement.apply(void 0,s);var l=s.length,u=new Array(l);u[0]=Emotion$1,u[1]=createEmotionProps(n,a);for(var c=2;c<l;c++)u[c]=s[c];return reactExports.createElement.apply(null,u)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(t,n){var a=t.styles,s=serializeStyles([a],void 0,reactExports.useContext(ThemeContext$1)),l=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var u=n.key+"-global",c=new n.sheet.constructor({key:u,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),d=!1,Ct=document.querySelector('style[data-emotion="'+u+" "+s.name+'"]');return n.sheet.tags.length&&(c.before=n.sheet.tags[0]),Ct!==null&&(d=!0,Ct.setAttribute("data-emotion",u),c.hydrate([Ct])),l.current=[c,d],function(){c.flush()}},[n]),useInsertionEffectWithLayoutFallback(function(){var u=l.current,c=u[0],d=u[1];if(d){u[1]=!1;return}if(s.next!==void 0&&insertStyles(n,s.next,!0),c.tags.length){var Ct=c.tags[c.tags.length-1].nextElementSibling;c.before=Ct,c.flush()}n.insert("",s,c,!1)},[n,s.name]),null});function css(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return serializeStyles(n)}function keyframes(){var t=css.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(t){return reactPropsRegex.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(n){return n!=="theme"},getDefaultShouldForwardProp=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(n,a,s){var l;if(a){var u=a.shouldForwardProp;l=n.__emotion_forwardProp&&u?function(c){return n.__emotion_forwardProp(c)&&u(c)}:u}return typeof l!="function"&&s&&(l=n.__emotion_forwardProp),l},Insertion=function(n){var a=n.cache,s=n.serialized,l=n.isStringTag;return registerStyles(a,s,l),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,s,l)}),null},createStyled$1=function t(n,a){var s=n.__emotion_real===n,l=s&&n.__emotion_base||n,u,c;a!==void 0&&(u=a.label,c=a.target);var d=composeShouldForwardProps(n,a,s),Ct=d||getDefaultShouldForwardProp(l),ar=!Ct("as");return function(){var en=arguments,tn=s&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(u!==void 0&&tn.push("label:"+u+";"),en[0]==null||en[0].raw===void 0)tn.push.apply(tn,en);else{var on=en[0];tn.push(on[0]);for(var fn=en.length,dn=1;dn<fn;dn++)tn.push(en[dn],on[dn])}var Cn=withEmotionCache(function(Rn,ax,ox){var sx=ar&&Rn.as||l,lx="",cx=[],fx=Rn;if(Rn.theme==null){fx={};for(var gx in Rn)fx[gx]=Rn[gx];fx.theme=reactExports.useContext(ThemeContext$1)}typeof Rn.className=="string"?lx=getRegisteredStyles(ax.registered,cx,Rn.className):Rn.className!=null&&(lx=Rn.className+" ");var mx=serializeStyles(tn.concat(cx),ax.registered,fx);lx+=ax.key+"-"+mx.name,c!==void 0&&(lx+=" "+c);var px=ar&&d===void 0?getDefaultShouldForwardProp(sx):Ct,hx={};for(var vx in Rn)ar&&vx==="as"||px(vx)&&(hx[vx]=Rn[vx]);return hx.className=lx,ox&&(hx.ref=ox),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:ax,serialized:mx,isStringTag:typeof sx=="string"}),reactExports.createElement(sx,hx))});return Cn.displayName=u!==void 0?u:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",Cn.defaultProps=n.defaultProps,Cn.__emotion_real=Cn,Cn.__emotion_base=l,Cn.__emotion_styles=tn,Cn.__emotion_forwardProp=d,Object.defineProperty(Cn,"toString",{value:function(){return"."+c}}),Cn.withComponent=function(Rn,ax){var ox=t(Rn,_extends({},a,ax,{shouldForwardProp:composeShouldForwardProps(Cn,ax,!0)}));return ox.apply(void 0,tn)},Cn}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$3=createStyled$1.bind(null);tags.forEach(function(t){styled$3[t]=styled$3(t)});function isEmpty$2(t){return t==null||Object.keys(t).length===0}function GlobalStyles$2(t){const{styles:n,defaultTheme:a={}}=t,s=typeof n=="function"?l=>n(isEmpty$2(l)?a:l):n;return jsxRuntimeExports.jsx(Global,{styles:s})}function styled$2(t,n){return styled$3(t,n)}function internal_mutateStyles(t,n){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=n(t.__emotion_styles))}const wrapper=[];function internal_serializeStyles(t){return wrapper[0]=t,serializeStyles(wrapper)}const sortBreakpointsValues=t=>{const n=Object.keys(t).map(a=>({key:a,val:t[a]}))||[];return n.sort((a,s)=>a.val-s.val),n.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function createBreakpoints(t){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...l}=t,u=sortBreakpointsValues(n),c=Object.keys(u);function d(on){return`@media (min-width:${typeof n[on]=="number"?n[on]:on}${a})`}function Ct(on){return`@media (max-width:${(typeof n[on]=="number"?n[on]:on)-s/100}${a})`}function ar(on,fn){const dn=c.indexOf(fn);return`@media (min-width:${typeof n[on]=="number"?n[on]:on}${a}) and (max-width:${(dn!==-1&&typeof n[c[dn]]=="number"?n[c[dn]]:fn)-s/100}${a})`}function en(on){return c.indexOf(on)+1<c.length?ar(on,c[c.indexOf(on)+1]):d(on)}function tn(on){const fn=c.indexOf(on);return fn===0?d(c[1]):fn===c.length-1?Ct(c[fn]):ar(on,c[c.indexOf(on)+1]).replace("@media","@media not all and")}return{keys:c,values:u,up:d,down:Ct,between:ar,only:en,not:tn,unit:a,...l}}const shape={borderRadius:4};function createSpacing(t=8,n=createUnarySpacing({spacing:t})){if(t.mui)return t;const a=(...s)=>(s.length===0?[1]:s).map(u=>{const c=n(u);return typeof c=="number"?`${c}px`:c}).join(" ");return a.mui=!0,a}function applyStyles$2(t,n){const a=this;if(a.vars){if(!a.colorSchemes?.[t]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(t);return s==="&"?n:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:n})}return a.palette.mode===t?n:{}}function createTheme$1(t={},...n){const{breakpoints:a={},palette:s={},spacing:l,shape:u={},...c}=t,d=createBreakpoints(a),Ct=createSpacing(l);let ar=deepmerge({breakpoints:d,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:Ct,shape:{...shape,...u}},c);return ar=cssContainerQueries(ar),ar.applyStyles=applyStyles$2,ar=n.reduce((en,tn)=>deepmerge(en,tn),ar),ar.unstable_sxConfig={...defaultSxConfig,...c?.unstable_sxConfig},ar.unstable_sx=function(tn){return styleFunctionSx({sx:tn,theme:this})},ar}function isObjectEmpty$2(t){return Object.keys(t).length===0}function useTheme$3(t=null){const n=reactExports.useContext(ThemeContext$1);return!n||isObjectEmpty$2(n)?t:n}const systemDefaultTheme$1=createTheme$1();function useTheme$2(t=systemDefaultTheme$1){return useTheme$3(t)}function wrapGlobalLayer(t){const n=internal_serializeStyles(t);return t!==n&&n.styles?(n.styles.match(/^@layer\s+[^{]*$/)||(n.styles=`@layer global{${n.styles}}`),n):t}function GlobalStyles$1({styles:t,themeId:n,defaultTheme:a={}}){const s=useTheme$2(a),l=n&&s[n]||s;let u=typeof t=="function"?t(l):t;return l.modularCssLayers&&(Array.isArray(u)?u=u.map(c=>wrapGlobalLayer(typeof c=="function"?c(l):c)):u=wrapGlobalLayer(u)),jsxRuntimeExports.jsx(GlobalStyles$2,{styles:u})}function createBox(t={}){const{themeId:n,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:l}=t,u=styled$2("div",{shouldForwardProp:d=>d!=="theme"&&d!=="sx"&&d!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(Ct,ar){const en=useTheme$2(a),{className:tn,component:on="div",...fn}=extendSxProp$1(Ct);return jsxRuntimeExports.jsx(u,{as:on,ref:ar,className:clsx(tn,l?l(s):s),theme:n&&en[n]||en,...fn})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(t,n,a="Mui"){const s=globalStateClasses[n];return s?`${a}-${s}`:`${ClassNameGenerator.generate(t)}-${n}`}function generateUtilityClasses(t,n,a="Mui"){const s={};return n.forEach(l=>{s[l]=generateUtilityClass(t,l,a)}),s}function preprocessStyles(t){const{variants:n,...a}=t,s={variants:n,style:internal_serializeStyles(a),isProcessed:!0};return s.style===a||n&&n.forEach(l=>{typeof l.style!="function"&&(l.style=internal_serializeStyles(l.style))}),s}const systemDefaultTheme=createTheme$1();function shouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function shallowLayer(t,n){return n&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${n}{${String(t.styles)}}`),t}function defaultOverridesResolver(t){return t?(n,a)=>a[t]:null}function attachTheme(t,n,a){t.theme=isObjectEmpty$1(t.theme)?a:t.theme[n]||t.theme}function processStyle(t,n,a){const s=typeof n=="function"?n(t):n;if(Array.isArray(s))return s.flatMap(l=>processStyle(t,l,a));if(Array.isArray(s?.variants)){let l;if(s.isProcessed)l=a?shallowLayer(s.style,a):s.style;else{const{variants:u,...c}=s;l=a?shallowLayer(internal_serializeStyles(c),a):c}return processStyleVariants(t,s.variants,[l],a)}return s?.isProcessed?a?shallowLayer(internal_serializeStyles(s.style),a):s.style:a?shallowLayer(internal_serializeStyles(s),a):s}function processStyleVariants(t,n,a=[],s=void 0){let l;e:for(let u=0;u<n.length;u+=1){const c=n[u];if(typeof c.props=="function"){if(l??={...t,...t.ownerState,ownerState:t.ownerState},!c.props(l))continue}else for(const d in c.props)if(t[d]!==c.props[d]&&t.ownerState?.[d]!==c.props[d])continue e;typeof c.style=="function"?(l??={...t,...t.ownerState,ownerState:t.ownerState},a.push(s?shallowLayer(internal_serializeStyles(c.style(l)),s):c.style(l))):a.push(s?shallowLayer(internal_serializeStyles(c.style),s):c.style)}return a}function createStyled(t={}){const{themeId:n,defaultTheme:a=systemDefaultTheme,rootShouldForwardProp:s=shouldForwardProp,slotShouldForwardProp:l=shouldForwardProp}=t;function u(d){attachTheme(d,n,a)}return(d,Ct={})=>{internal_mutateStyles(d,fx=>fx.filter(gx=>gx!==styleFunctionSx));const{name:ar,slot:en,skipVariantsResolver:tn,skipSx:on,overridesResolver:fn=defaultOverridesResolver(lowercaseFirstLetter(en)),...dn}=Ct,Cn=ar&&ar.startsWith("Mui")||en?"components":"custom",Rn=tn!==void 0?tn:en&&en!=="Root"&&en!=="root"||!1,ax=on||!1;let ox=shouldForwardProp;en==="Root"||en==="root"?ox=s:en?ox=l:isStringTag(d)&&(ox=void 0);const sx=styled$2(d,{shouldForwardProp:ox,label:generateStyledLabel(),...dn}),lx=fx=>{if(fx.__emotion_real===fx)return fx;if(typeof fx=="function")return function(mx){return processStyle(mx,fx,mx.theme.modularCssLayers?Cn:void 0)};if(isPlainObject(fx)){const gx=preprocessStyles(fx);return function(px){return gx.variants?processStyle(px,gx,px.theme.modularCssLayers?Cn:void 0):px.theme.modularCssLayers?shallowLayer(gx.style,Cn):gx.style}}return fx},cx=(...fx)=>{const gx=[],mx=fx.map(lx),px=[];if(gx.push(u),ar&&fn&&px.push(function(Sx){const Ex=Sx.theme.components?.[ar]?.styleOverrides;if(!Ex)return null;const bx={};for(const Ax in Ex)bx[Ax]=processStyle(Sx,Ex[Ax],Sx.theme.modularCssLayers?"theme":void 0);return fn(Sx,bx)}),ar&&!Rn&&px.push(function(Sx){const Ex=Sx.theme?.components?.[ar]?.variants;return Ex?processStyleVariants(Sx,Ex,[],Sx.theme.modularCssLayers?"theme":void 0):null}),ax||px.push(styleFunctionSx),Array.isArray(mx[0])){const yx=mx.shift(),Sx=new Array(gx.length).fill(""),_x=new Array(px.length).fill("");let Ex;Ex=[...Sx,...yx,..._x],Ex.raw=[...Sx,...yx.raw,..._x],gx.unshift(Ex)}const hx=[...gx,...mx,...px],vx=sx(...hx);return d.muiName&&(vx.muiName=d.muiName),vx};return sx.withConfig&&(cx.withConfig=sx.withConfig),cx}}function generateStyledLabel(t,n){return void 0}function isObjectEmpty$1(t){for(const n in t)return!1;return!0}function isStringTag(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lowercaseFirstLetter(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const styled$1=createStyled();function getThemeProps$1(t){const{theme:n,name:a,props:s}=t;return!n||!n.components||!n.components[a]||!n.components[a].defaultProps?s:resolveProps(n.components[a].defaultProps,s)}function useThemeProps({props:t,name:n,defaultTheme:a,themeId:s}){let l=useTheme$2(a);return s&&(l=l[s]||l),getThemeProps$1({theme:l,name:n,props:t})}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function clamp$1(t,n=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(t,a))}function clampWrapper(t,n=0,a=1){return clamp$1(t,n,a)}function hexToRgb(t){t=t.slice(1);const n=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let a=t.match(n);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,l)=>l<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(t){if(t.type)return t;if(t.charAt(0)==="#")return decomposeColor(hexToRgb(t));const n=t.indexOf("("),a=t.substring(0,n);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(formatMuiErrorMessage(9,t));let s=t.substring(n+1,t.length-1),l;if(a==="color"){if(s=s.split(" "),l=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(l))throw new Error(formatMuiErrorMessage(10,l))}else s=s.split(",");return s=s.map(u=>parseFloat(u)),{type:a,values:s,colorSpace:l}}const colorChannel=t=>{const n=decomposeColor(t);return n.values.slice(0,3).map((a,s)=>n.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},private_safeColorChannel=(t,n)=>{try{return colorChannel(t)}catch{return t}};function recomposeColor(t){const{type:n,colorSpace:a}=t;let{values:s}=t;return n.includes("rgb")?s=s.map((l,u)=>u<3?parseInt(l,10):l):n.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),n.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${n}(${s})`}function hslToRgb(t){t=decomposeColor(t);const{values:n}=t,a=n[0],s=n[1]/100,l=n[2]/100,u=s*Math.min(l,1-l),c=(ar,en=(ar+a/30)%12)=>l-u*Math.max(Math.min(en-3,9-en,1),-1);let d="rgb";const Ct=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(d+="a",Ct.push(n[3])),recomposeColor({type:d,values:Ct})}function getLuminance(t){t=decomposeColor(t);let n=t.type==="hsl"||t.type==="hsla"?decomposeColor(hslToRgb(t)).values:t.values;return n=n.map(a=>(t.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function getContrastRatio(t,n){const a=getLuminance(t),s=getLuminance(n);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function alpha$1(t,n){return t=decomposeColor(t),n=clampWrapper(n),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${n}`:t.values[3]=n,recomposeColor(t)}function private_safeAlpha(t,n,a){try{return alpha$1(t,n)}catch{return t}}function darken(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]*=1-n;else if(t.type.includes("rgb")||t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]*=1-n;return recomposeColor(t)}function private_safeDarken(t,n,a){try{return darken(t,n)}catch{return t}}function lighten(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*n;else if(t.type.includes("rgb"))for(let a=0;a<3;a+=1)t.values[a]+=(255-t.values[a])*n;else if(t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]+=(1-t.values[a])*n;return recomposeColor(t)}function private_safeLighten(t,n,a){try{return lighten(t,n)}catch{return t}}function emphasize(t,n=.15){return getLuminance(t)>.5?darken(t,n):lighten(t,n)}function private_safeEmphasize(t,n,a){try{return emphasize(t,n)}catch{return t}}const ThemeContext=reactExports.createContext(null);function useTheme$1(){return reactExports.useContext(ThemeContext)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(t,n){return typeof n=="function"?n(t):{...t,...n}}function ThemeProvider$2(t){const{children:n,theme:a}=t,s=useTheme$1(),l=reactExports.useMemo(()=>{const u=s===null?{...a}:mergeOuterLocalTheme(s,a);return u!=null&&(u[nested]=s!==null),u},[a,s]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:l,children:n})}const RtlContext=reactExports.createContext();function RtlProvider({value:t,...n}){return jsxRuntimeExports.jsx(RtlContext.Provider,{value:t??!0,...n})}const useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function DefaultPropsProvider({value:t,children:n}){return jsxRuntimeExports.jsx(PropsContext.Provider,{value:t,children:n})}function getThemeProps(t){const{theme:n,name:a,props:s}=t;if(!n||!n.components||!n.components[a])return s;const l=n.components[a];return l.defaultProps?resolveProps(l.defaultProps,s,n.components.mergeClassNameAndStyle):!l.styleOverrides&&!l.variants?resolveProps(l,s,n.components.mergeClassNameAndStyle):s}function useDefaultProps$1({props:t,name:n}){const a=reactExports.useContext(PropsContext);return getThemeProps({props:t,name:n,theme:{components:a}})}let globalId=0;function useGlobalId(t){const[n,a]=reactExports.useState(t),s=t||n;return reactExports.useEffect(()=>{n==null&&(globalId+=1,a(`mui-${globalId}`))},[n]),s}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(t){if(maybeReactUseId!==void 0){const n=maybeReactUseId();return t??n}return useGlobalId(t)}function useLayerOrder(t){const n=useTheme$3(),a=useId()||"",{modularCssLayers:s}=t;let l="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!s||n!==null?l="":typeof s=="string"?l=s.replace(/mui(?!\.)/g,l):l=`@layer ${l};`,useEnhancedEffect(()=>{const u=document.querySelector("head");if(!u)return;const c=u.firstChild;if(l){if(c&&c.hasAttribute?.("data-mui-layer-order")&&c.getAttribute("data-mui-layer-order")===a)return;const d=document.createElement("style");d.setAttribute("data-mui-layer-order",a),d.textContent=l,u.prepend(d)}else u.querySelector(`style[data-mui-layer-order="${a}"]`)?.remove()},[l,a]),l?jsxRuntimeExports.jsx(GlobalStyles$1,{styles:l}):null}const EMPTY_THEME={};function useThemeScoping(t,n,a,s=!1){return reactExports.useMemo(()=>{const l=t&&n[t]||n;if(typeof a=="function"){const u=a(l),c=t?{...n,[t]:u}:u;return s?()=>c:c}return t?{...n,[t]:a}:{...n,...a}},[t,n,a,s])}function ThemeProvider$1(t){const{children:n,theme:a,themeId:s}=t,l=useTheme$3(EMPTY_THEME),u=useTheme$1()||EMPTY_THEME,c=useThemeScoping(s,l,a),d=useThemeScoping(s,u,a,!0),Ct=(s?c[s]:c).direction==="rtl",ar=useLayerOrder(c);return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:d,children:jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:c,children:jsxRuntimeExports.jsx(RtlProvider,{value:Ct,children:jsxRuntimeExports.jsxs(DefaultPropsProvider,{value:s?c[s].components:c.components,children:[ar,n]})})})})}const arg={theme:void 0};function unstable_memoTheme(t){let n,a;return function(l){let u=n;return(u===void 0||l.theme!==a)&&(arg.theme=l.theme,u=preprocessStyles(t(arg)),n=u,a=l.theme),u}}const DEFAULT_MODE_STORAGE_KEY="mode",DEFAULT_COLOR_SCHEME_STORAGE_KEY="color-scheme",DEFAULT_ATTRIBUTE="data-color-scheme";function InitColorSchemeScript(t){const{defaultMode:n="system",defaultLightColorScheme:a="light",defaultDarkColorScheme:s="dark",modeStorageKey:l=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:u=DEFAULT_COLOR_SCHEME_STORAGE_KEY,attribute:c=DEFAULT_ATTRIBUTE,colorSchemeNode:d="document.documentElement",nonce:Ct}=t||{};let ar="",en=c;if(c==="class"&&(en=".%s"),c==="data"&&(en="[data-%s]"),en.startsWith(".")){const on=en.substring(1);ar+=`${d}.classList.remove('${on}'.replace('%s', light), '${on}'.replace('%s', dark));
      ${d}.classList.add('${on}'.replace('%s', colorScheme));`}const tn=en.match(/\[([^\]]+)\]/);if(tn){const[on,fn]=tn[1].split("=");fn||(ar+=`${d}.removeAttribute('${on}'.replace('%s', light));
      ${d}.removeAttribute('${on}'.replace('%s', dark));`),ar+=`
      ${d}.setAttribute('${on}'.replace('%s', colorScheme), ${fn?`${fn}.replace('%s', colorScheme)`:'""'});`}else ar+=`${d}.setAttribute('${en}', colorScheme);`;return jsxRuntimeExports.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?Ct:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${l}') || '${n}';
  const dark = localStorage.getItem('${u}-dark') || '${s}';
  const light = localStorage.getItem('${u}-light') || '${a}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${ar}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function noop$4(){}const localStorageManager=({key:t,storageWindow:n})=>(!n&&typeof window<"u"&&(n=window),{get(a){if(typeof window>"u")return;if(!n)return a;let s;try{s=n.localStorage.getItem(t)}catch{}return s||a},set:a=>{if(n)try{n.localStorage.setItem(t,a)}catch{}},subscribe:a=>{if(!n)return noop$4;const s=l=>{const u=l.newValue;l.key===t&&a(u)};return n.addEventListener("storage",s),()=>{n.removeEventListener("storage",s)}}});function noop$3(){}function getSystemMode(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function processState(t,n){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return n("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return n("dark")}function getColorScheme(t){return processState(t,n=>{if(n==="light")return t.lightColorScheme;if(n==="dark")return t.darkColorScheme})}function useCurrentColorScheme(t){const{defaultMode:n="light",defaultLightColorScheme:a,defaultDarkColorScheme:s,supportedColorSchemes:l=[],modeStorageKey:u=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:c=DEFAULT_COLOR_SCHEME_STORAGE_KEY,storageWindow:d=typeof window>"u"?void 0:window,storageManager:Ct=localStorageManager,noSsr:ar=!1}=t,en=l.join(","),tn=l.length>1,on=reactExports.useMemo(()=>Ct?.({key:u,storageWindow:d}),[Ct,u,d]),fn=reactExports.useMemo(()=>Ct?.({key:`${c}-light`,storageWindow:d}),[Ct,c,d]),dn=reactExports.useMemo(()=>Ct?.({key:`${c}-dark`,storageWindow:d}),[Ct,c,d]),[Cn,Rn]=reactExports.useState(()=>{const mx=on?.get(n)||n,px=fn?.get(a)||a,hx=dn?.get(s)||s;return{mode:mx,systemMode:getSystemMode(mx),lightColorScheme:px,darkColorScheme:hx}}),[ax,ox]=reactExports.useState(ar||!tn);reactExports.useEffect(()=>{ox(!0)},[]);const sx=getColorScheme(Cn),lx=reactExports.useCallback(mx=>{Rn(px=>{if(mx===px.mode)return px;const hx=mx??n;return on?.set(hx),{...px,mode:hx,systemMode:getSystemMode(hx)}})},[on,n]),cx=reactExports.useCallback(mx=>{mx?typeof mx=="string"?mx&&!en.includes(mx)?console.error(`\`${mx}\` does not exist in \`theme.colorSchemes\`.`):Rn(px=>{const hx={...px};return processState(px,vx=>{vx==="light"&&(fn?.set(mx),hx.lightColorScheme=mx),vx==="dark"&&(dn?.set(mx),hx.darkColorScheme=mx)}),hx}):Rn(px=>{const hx={...px},vx=mx.light===null?a:mx.light,yx=mx.dark===null?s:mx.dark;return vx&&(en.includes(vx)?(hx.lightColorScheme=vx,fn?.set(vx)):console.error(`\`${vx}\` does not exist in \`theme.colorSchemes\`.`)),yx&&(en.includes(yx)?(hx.darkColorScheme=yx,dn?.set(yx)):console.error(`\`${yx}\` does not exist in \`theme.colorSchemes\`.`)),hx}):Rn(px=>(fn?.set(a),dn?.set(s),{...px,lightColorScheme:a,darkColorScheme:s}))},[en,fn,dn,a,s]),fx=reactExports.useCallback(mx=>{Cn.mode==="system"&&Rn(px=>{const hx=mx?.matches?"dark":"light";return px.systemMode===hx?px:{...px,systemMode:hx}})},[Cn.mode]),gx=reactExports.useRef(fx);return gx.current=fx,reactExports.useEffect(()=>{if(typeof window.matchMedia!="function"||!tn)return;const mx=(...hx)=>gx.current(...hx),px=window.matchMedia("(prefers-color-scheme: dark)");return px.addListener(mx),mx(px),()=>{px.removeListener(mx)}},[tn]),reactExports.useEffect(()=>{if(tn){const mx=on?.subscribe(vx=>{(!vx||["light","dark","system"].includes(vx))&&lx(vx||n)})||noop$3,px=fn?.subscribe(vx=>{(!vx||en.match(vx))&&cx({light:vx})})||noop$3,hx=dn?.subscribe(vx=>{(!vx||en.match(vx))&&cx({dark:vx})})||noop$3;return()=>{mx(),px(),hx()}}},[cx,lx,en,n,d,tn,on,fn,dn]),{...Cn,mode:ax?Cn.mode:void 0,systemMode:ax?Cn.systemMode:void 0,colorScheme:ax?sx:void 0,setMode:lx,setColorScheme:cx}}const DISABLE_CSS_TRANSITION="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function createCssVarsProvider(t){const{themeId:n,theme:a={},modeStorageKey:s=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:l=DEFAULT_COLOR_SCHEME_STORAGE_KEY,disableTransitionOnChange:u=!1,defaultColorScheme:c,resolveTheme:d}=t,Ct={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},ar=reactExports.createContext(void 0),en=()=>reactExports.useContext(ar)||Ct,tn={},on={};function fn(ax){const{children:ox,theme:sx,modeStorageKey:lx=s,colorSchemeStorageKey:cx=l,disableTransitionOnChange:fx=u,storageManager:gx,storageWindow:mx=typeof window>"u"?void 0:window,documentNode:px=typeof document>"u"?void 0:document,colorSchemeNode:hx=typeof document>"u"?void 0:document.documentElement,disableNestedContext:vx=!1,disableStyleSheetGeneration:yx=!1,defaultMode:Sx="system",forceThemeRerender:_x=!1,noSsr:Ex}=ax,bx=reactExports.useRef(!1),Ax=useTheme$1(),Mx=reactExports.useContext(ar),Rx=!!Mx&&!vx,Cx=reactExports.useMemo(()=>sx||(typeof a=="function"?a():a),[sx]),Lx=Cx[n],qx=Lx||Cx,{colorSchemes:Ix=tn,components:Px=on,cssVarPrefix:Nx}=qx,Bx=Object.keys(Ix).filter(Ox=>!!Ix[Ox]).join(","),$x=reactExports.useMemo(()=>Bx.split(","),[Bx]),Vx=typeof c=="string"?c:c.light,Gx=typeof c=="string"?c:c.dark,Zx=Ix[Vx]&&Ix[Gx]?Sx:Ix[qx.defaultColorScheme]?.palette?.mode||qx.palette?.mode,{mode:jx,setMode:Hx,systemMode:iE,lightColorScheme:Xx,darkColorScheme:rE,colorScheme:uE,setColorScheme:aE}=useCurrentColorScheme({supportedColorSchemes:$x,defaultLightColorScheme:Vx,defaultDarkColorScheme:Gx,modeStorageKey:lx,colorSchemeStorageKey:cx,defaultMode:Zx,storageManager:gx,storageWindow:mx,noSsr:Ex});let Kx=jx,ME=uE;Rx&&(Kx=Mx.mode,ME=Mx.colorScheme);let IE=ME||qx.defaultColorScheme;qx.vars&&!_x&&(IE=qx.defaultColorScheme);const wE=reactExports.useMemo(()=>{const Ox=qx.generateThemeVars?.()||qx.vars,Fx={...qx,components:Px,colorSchemes:Ix,cssVarPrefix:Nx,vars:Ox};if(typeof Fx.generateSpacing=="function"&&(Fx.spacing=Fx.generateSpacing()),IE){const Wx=Ix[IE];Wx&&typeof Wx=="object"&&Object.keys(Wx).forEach(Qx=>{Wx[Qx]&&typeof Wx[Qx]=="object"?Fx[Qx]={...Fx[Qx],...Wx[Qx]}:Fx[Qx]=Wx[Qx]})}return d?d(Fx):Fx},[qx,IE,Px,Ix,Nx]),bE=qx.colorSchemeSelector;useEnhancedEffect(()=>{if(ME&&hx&&bE&&bE!=="media"){const Ox=bE;let Fx=bE;if(Ox==="class"&&(Fx=".%s"),Ox==="data"&&(Fx="[data-%s]"),Ox?.startsWith("data-")&&!Ox.includes("%s")&&(Fx=`[${Ox}="%s"]`),Fx.startsWith("."))hx.classList.remove(...$x.map(Wx=>Fx.substring(1).replace("%s",Wx))),hx.classList.add(Fx.substring(1).replace("%s",ME));else{const Wx=Fx.replace("%s",ME).match(/\[([^\]]+)\]/);if(Wx){const[Qx,oE]=Wx[1].split("=");oE||$x.forEach(tE=>{hx.removeAttribute(Qx.replace(ME,tE))}),hx.setAttribute(Qx,oE?oE.replace(/"|'/g,""):"")}else hx.setAttribute(Fx,ME)}}},[ME,bE,hx,$x]),reactExports.useEffect(()=>{let Ox;if(fx&&bx.current&&px){const Fx=px.createElement("style");Fx.appendChild(px.createTextNode(DISABLE_CSS_TRANSITION)),px.head.appendChild(Fx),window.getComputedStyle(px.body),Ox=setTimeout(()=>{px.head.removeChild(Fx)},1)}return()=>{clearTimeout(Ox)}},[ME,fx,px]),reactExports.useEffect(()=>(bx.current=!0,()=>{bx.current=!1}),[]);const UE=reactExports.useMemo(()=>({allColorSchemes:$x,colorScheme:ME,darkColorScheme:rE,lightColorScheme:Xx,mode:Kx,setColorScheme:aE,setMode:Hx,systemMode:iE}),[$x,ME,rE,Xx,Kx,aE,Hx,iE,wE.colorSchemeSelector]);let CE=!0;(yx||qx.cssVariables===!1||Rx&&Ax?.cssVarPrefix===Nx)&&(CE=!1);const YE=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ThemeProvider$1,{themeId:Lx?n:void 0,theme:wE,children:ox}),CE&&jsxRuntimeExports.jsx(GlobalStyles$2,{styles:wE.generateStyleSheets?.()||[]})]});return Rx?YE:jsxRuntimeExports.jsx(ar.Provider,{value:UE,children:YE})}const dn=typeof c=="string"?c:c.light,Cn=typeof c=="string"?c:c.dark;return{CssVarsProvider:fn,useColorScheme:en,getInitColorSchemeScript:ax=>InitColorSchemeScript({colorSchemeStorageKey:l,defaultLightColorScheme:dn,defaultDarkColorScheme:Cn,modeStorageKey:s,...ax})}}function createGetCssVar$1(t=""){function n(...s){if(!s.length)return"";const l=s[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${l}${n(...s.slice(1))})`:`, ${l}`}return(s,...l)=>`var(--${t?`${t}-`:""}${s}${n(...l)})`}const assignNestedKeys=(t,n,a,s=[])=>{let l=t;n.forEach((u,c)=>{c===n.length-1?Array.isArray(l)?l[Number(u)]=a:l&&typeof l=="object"&&(l[u]=a):l&&typeof l=="object"&&(l[u]||(l[u]=s.includes(u)?[]:{}),l=l[u])})},walkObjectDeep=(t,n,a)=>{function s(l,u=[],c=[]){Object.entries(l).forEach(([d,Ct])=>{(!a||a&&!a([...u,d]))&&Ct!=null&&(typeof Ct=="object"&&Object.keys(Ct).length>0?s(Ct,[...u,d],Array.isArray(Ct)?[...c,d]:c):n([...u,d],Ct,c))})}s(t)},getCssValue=(t,n)=>typeof n=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>t.includes(s))||t[t.length-1].toLowerCase().includes("opacity")?n:`${n}px`:n;function cssVarsParser(t,n){const{prefix:a,shouldSkipGeneratingVar:s}=n||{},l={},u={},c={};return walkObjectDeep(t,(d,Ct,ar)=>{if((typeof Ct=="string"||typeof Ct=="number")&&(!s||!s(d,Ct))){const en=`--${a?`${a}-`:""}${d.join("-")}`,tn=getCssValue(d,Ct);Object.assign(l,{[en]:tn}),assignNestedKeys(u,d,`var(${en})`,ar),assignNestedKeys(c,d,`var(${en}, ${tn})`,ar)}},d=>d[0]==="vars"),{css:l,vars:u,varsWithDefaults:c}}function prepareCssVars(t,n={}){const{getSelector:a=ax,disableCssColorScheme:s,colorSchemeSelector:l,enableContrastVars:u}=n,{colorSchemes:c={},components:d,defaultColorScheme:Ct="light",...ar}=t,{vars:en,css:tn,varsWithDefaults:on}=cssVarsParser(ar,n);let fn=on;const dn={},{[Ct]:Cn,...Rn}=c;if(Object.entries(Rn||{}).forEach(([lx,cx])=>{const{vars:fx,css:gx,varsWithDefaults:mx}=cssVarsParser(cx,n);fn=deepmerge(fn,mx),dn[lx]={css:gx,vars:fx}}),Cn){const{css:lx,vars:cx,varsWithDefaults:fx}=cssVarsParser(Cn,n);fn=deepmerge(fn,fx),dn[Ct]={css:lx,vars:cx}}function ax(lx,cx){let fx=l;if(l==="class"&&(fx=".%s"),l==="data"&&(fx="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(fx=`[${l}="%s"]`),lx){if(fx==="media")return t.defaultColorScheme===lx?":root":{[`@media (prefers-color-scheme: ${c[lx]?.palette?.mode||lx})`]:{":root":cx}};if(fx)return t.defaultColorScheme===lx?`:root, ${fx.replace("%s",String(lx))}`:fx.replace("%s",String(lx))}return":root"}return{vars:fn,generateThemeVars:()=>{let lx={...en};return Object.entries(dn).forEach(([,{vars:cx}])=>{lx=deepmerge(lx,cx)}),lx},generateStyleSheets:()=>{const lx=[],cx=t.defaultColorScheme||"light";function fx(px,hx){Object.keys(hx).length&&lx.push(typeof px=="string"?{[px]:{...hx}}:px)}fx(a(void 0,{...tn}),tn);const{[cx]:gx,...mx}=dn;if(gx){const{css:px}=gx,hx=c[cx]?.palette?.mode,vx=!s&&hx?{colorScheme:hx,...px}:{...px};fx(a(cx,{...vx}),vx)}return Object.entries(mx).forEach(([px,{css:hx}])=>{const vx=c[px]?.palette?.mode,yx=!s&&vx?{colorScheme:vx,...hx}:{...hx};fx(a(px,{...yx}),yx)}),u&&lx.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),lx}}}function createGetColorSchemeSelector(t){return function(a){return t==="media"?`@media (prefers-color-scheme: ${a})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${a}"] &`:t==="class"?`.${a} &`:t==="data"?`[data-${a}] &`:`${t.replace("%s",a)} &`:"&"}}const defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$2=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemePropsDefault$2=t=>useThemeProps({props:t,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$I=(t,n)=>{const a=Ct=>generateUtilityClass(n,Ct),{classes:s,fixed:l,disableGutters:u,maxWidth:c}=t,d={root:["root",c&&`maxWidth${capitalize(String(c))}`,l&&"fixed",u&&"disableGutters"]};return composeClasses(d,a,s)};function createContainer(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$2,useThemeProps:a=useThemePropsDefault$2,componentName:s="MuiContainer"}=t,l=n(({theme:c,ownerState:d})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!d.disableGutters&&{paddingLeft:c.spacing(2),paddingRight:c.spacing(2),[c.breakpoints.up("sm")]:{paddingLeft:c.spacing(3),paddingRight:c.spacing(3)}}}),({theme:c,ownerState:d})=>d.fixed&&Object.keys(c.breakpoints.values).reduce((Ct,ar)=>{const en=ar,tn=c.breakpoints.values[en];return tn!==0&&(Ct[c.breakpoints.up(en)]={maxWidth:`${tn}${c.breakpoints.unit}`}),Ct},{}),({theme:c,ownerState:d})=>({...d.maxWidth==="xs"&&{[c.breakpoints.up("xs")]:{maxWidth:Math.max(c.breakpoints.values.xs,444)}},...d.maxWidth&&d.maxWidth!=="xs"&&{[c.breakpoints.up(d.maxWidth)]:{maxWidth:`${c.breakpoints.values[d.maxWidth]}${c.breakpoints.unit}`}}}));return reactExports.forwardRef(function(d,Ct){const ar=a(d),{className:en,component:tn="div",disableGutters:on=!1,fixed:fn=!1,maxWidth:dn="lg",classes:Cn,...Rn}=ar,ax={...ar,component:tn,disableGutters:on,fixed:fn,maxWidth:dn},ox=useUtilityClasses$I(ax,s);return jsxRuntimeExports.jsx(l,{as:tn,ownerState:ax,className:clsx(ox.root,en),ref:Ct,...Rn})})}function isMuiElement(t,n){return reactExports.isValidElement(t)&&n.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}const filterBreakpointKeys=(t,n)=>t.filter(a=>n.includes(a)),traverseBreakpoints=(t,n,a)=>{const s=t.keys[0];Array.isArray(n)?n.forEach((l,u)=>{a((c,d)=>{u<=t.keys.length-1&&(u===0?Object.assign(c,d):c[t.up(t.keys[u])]=d)},l)}):n&&typeof n=="object"?(Object.keys(n).length>t.keys.length?t.keys:filterBreakpointKeys(t.keys,Object.keys(n))).forEach(u=>{if(t.keys.includes(u)){const c=n[u];c!==void 0&&a((d,Ct)=>{s===u?Object.assign(d,Ct):d[t.up(u)]=Ct},c)}}):(typeof n=="number"||typeof n=="string")&&a((l,u)=>{Object.assign(l,u)},n)};function getSelfSpacingVar(t){return`--Grid-${t}Spacing`}function getParentSpacingVar(t){return`--Grid-parent-${t}Spacing`}const selfColumnsVar="--Grid-columns",parentColumnsVar="--Grid-parent-columns",generateGridSizeStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.size,(s,l)=>{let u={};l==="grow"&&(u={flexBasis:0,flexGrow:1,maxWidth:"100%"}),l==="auto"&&(u={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof l=="number"&&(u={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${l} / var(${parentColumnsVar}) - (var(${parentColumnsVar}) - ${l}) * (var(${getParentSpacingVar("column")}) / var(${parentColumnsVar})))`}),s(a,u)}),a},generateGridOffsetStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.offset,(s,l)=>{let u={};l==="auto"&&(u={marginLeft:"auto"}),typeof l=="number"&&(u={marginLeft:l===0?"0px":`calc(100% * ${l} / var(${parentColumnsVar}) + var(${getParentSpacingVar("column")}) * ${l} / var(${parentColumnsVar}))`}),s(a,u)}),a},generateGridColumnsStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={[selfColumnsVar]:12};return traverseBreakpoints(t.breakpoints,n.columns,(s,l)=>{const u=l??12;s(a,{[selfColumnsVar]:u,"> *":{[parentColumnsVar]:u}})}),a},generateGridRowSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.rowSpacing,(s,l)=>{const u=typeof l=="string"?l:t.spacing?.(l);s(a,{[getSelfSpacingVar("row")]:u,"> *":{[getParentSpacingVar("row")]:u}})}),a},generateGridColumnSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.columnSpacing,(s,l)=>{const u=typeof l=="string"?l:t.spacing?.(l);s(a,{[getSelfSpacingVar("column")]:u,"> *":{[getParentSpacingVar("column")]:u}})}),a},generateGridDirectionStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.direction,(s,l)=>{s(a,{flexDirection:l})}),a},generateGridStyles=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${getSelfSpacingVar("row")}) var(${getSelfSpacingVar("column")})`}}),generateSizeClassNames=t=>{const n=[];return Object.entries(t).forEach(([a,s])=>{s!==!1&&s!==void 0&&n.push(`grid-${a}-${String(s)}`)}),n},generateSpacingClassNames=(t,n="xs")=>{function a(s){return s===void 0?!1:typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"&&s>0}if(a(t))return[`spacing-${n}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const s=[];return Object.entries(t).forEach(([l,u])=>{a(u)&&s.push(`spacing-${l}-${String(u)}`)}),s}return[]},generateDirectionClasses=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([n,a])=>`direction-${n}-${a}`):[`direction-xs-${String(t)}`];function deleteLegacyGridProps(t,n){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,n.keys.forEach(a=>{t[a]!==void 0&&delete t[a]})}const defaultTheme$3=createTheme$1(),defaultCreateStyledComponent$1=styled$1("div",{name:"MuiGrid",slot:"Root"});function useThemePropsDefault$1(t){return useThemeProps({props:t,name:"MuiGrid",defaultTheme:defaultTheme$3})}function createGrid(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$1,useThemeProps:a=useThemePropsDefault$1,useTheme:s=useTheme$2,componentName:l="MuiGrid"}=t,u=(ar,en)=>{const{container:tn,direction:on,spacing:fn,wrap:dn,size:Cn}=ar,Rn={root:["root",tn&&"container",dn!=="wrap"&&`wrap-xs-${String(dn)}`,...generateDirectionClasses(on),...generateSizeClassNames(Cn),...tn?generateSpacingClassNames(fn,en.breakpoints.keys[0]):[]]};return composeClasses(Rn,ax=>generateUtilityClass(l,ax),{})};function c(ar,en,tn=()=>!0){const on={};return ar===null||(Array.isArray(ar)?ar.forEach((fn,dn)=>{fn!==null&&tn(fn)&&en.keys[dn]&&(on[en.keys[dn]]=fn)}):typeof ar=="object"?Object.keys(ar).forEach(fn=>{const dn=ar[fn];dn!=null&&tn(dn)&&(on[fn]=dn)}):on[en.keys[0]]=ar),on}const d=n(generateGridColumnsStyles,generateGridColumnSpacingStyles,generateGridRowSpacingStyles,generateGridSizeStyles,generateGridDirectionStyles,generateGridStyles,generateGridOffsetStyles),Ct=reactExports.forwardRef(function(en,tn){const on=s(),fn=a(en),dn=extendSxProp$1(fn);deleteLegacyGridProps(dn,on.breakpoints);const{className:Cn,children:Rn,columns:ax=12,container:ox=!1,component:sx="div",direction:lx="row",wrap:cx="wrap",size:fx={},offset:gx={},spacing:mx=0,rowSpacing:px=mx,columnSpacing:hx=mx,unstable_level:vx=0,...yx}=dn,Sx=c(fx,on.breakpoints,Lx=>Lx!==!1),_x=c(gx,on.breakpoints),Ex=en.columns??(vx?void 0:ax),bx=en.spacing??(vx?void 0:mx),Ax=en.rowSpacing??en.spacing??(vx?void 0:px),Mx=en.columnSpacing??en.spacing??(vx?void 0:hx),Rx={...dn,level:vx,columns:Ex,container:ox,direction:lx,wrap:cx,spacing:bx,rowSpacing:Ax,columnSpacing:Mx,size:Sx,offset:_x},Cx=u(Rx,on);return jsxRuntimeExports.jsx(d,{ref:tn,as:sx,ownerState:Rx,className:clsx(Cx.root,Cn),...yx,children:reactExports.Children.map(Rn,Lx=>reactExports.isValidElement(Lx)&&isMuiElement(Lx,["Grid"])&&ox&&Lx.props.container?reactExports.cloneElement(Lx,{unstable_level:Lx.props?.unstable_level??vx+1}):Lx)})});return Ct.muiName="Grid",Ct}const defaultTheme$2=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root"});function useThemePropsDefault(t){return useThemeProps({props:t,name:"MuiStack",defaultTheme:defaultTheme$2})}function joinChildren(t,n){const a=reactExports.Children.toArray(t).filter(Boolean);return a.reduce((s,l,u)=>(s.push(l),u<a.length-1&&s.push(reactExports.cloneElement(n,{key:`separator-${u}`})),s),[])}const getSideFromDirection=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],style=({ownerState:t,theme:n})=>{let a={display:"flex",flexDirection:"column",...handleBreakpoints({theme:n},resolveBreakpointValues({values:t.direction,breakpoints:n.breakpoints.values}),s=>({flexDirection:s}))};if(t.spacing){const s=createUnarySpacing(n),l=Object.keys(n.breakpoints.values).reduce((Ct,ar)=>((typeof t.spacing=="object"&&t.spacing[ar]!=null||typeof t.direction=="object"&&t.direction[ar]!=null)&&(Ct[ar]=!0),Ct),{}),u=resolveBreakpointValues({values:t.direction,base:l}),c=resolveBreakpointValues({values:t.spacing,base:l});typeof u=="object"&&Object.keys(u).forEach((Ct,ar,en)=>{if(!u[Ct]){const on=ar>0?u[en[ar-1]]:"column";u[Ct]=on}}),a=deepmerge(a,handleBreakpoints({theme:n},c,(Ct,ar)=>t.useFlexGap?{gap:getValue(s,Ct)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(ar?u[ar]:t.direction)}`]:getValue(s,Ct)}}))}return a=mergeBreakpointsInOrder(n.breakpoints,a),a};function createStack(t={}){const{createStyledComponent:n=defaultCreateStyledComponent,useThemeProps:a=useThemePropsDefault,componentName:s="MuiStack"}=t,l=()=>composeClasses({root:["root"]},Ct=>generateUtilityClass(s,Ct),{}),u=n(style);return reactExports.forwardRef(function(Ct,ar){const en=a(Ct),tn=extendSxProp$1(en),{component:on="div",direction:fn="column",spacing:dn=0,divider:Cn,children:Rn,className:ax,useFlexGap:ox=!1,...sx}=tn,lx={direction:fn,spacing:dn,useFlexGap:ox},cx=l();return jsxRuntimeExports.jsx(u,{as:on,ownerState:lx,ref:ar,className:clsx(cx.root,ax),...sx,children:Cn?joinChildren(Rn,Cn):Rn})})}const common={black:"#000",white:"#fff"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(t,n,a,s){const l=s.light||s,u=s.dark||s*1.5;t[n]||(t.hasOwnProperty(a)?t[n]=t[a]:n==="light"?t.light=lighten(t.main,l):n==="dark"&&(t.dark=darken(t.main,u)))}function mixLightOrDark(t,n,a,s,l){const u=l.light||l,c=l.dark||l*1.5;n[a]||(n.hasOwnProperty(s)?n[a]=n[s]:a==="light"?n.light=`color-mix(in ${t}, ${n.main}, #fff ${(u*100).toFixed(0)}%)`:a==="dark"&&(n.dark=`color-mix(in ${t}, ${n.main}, #000 ${(c*100).toFixed(0)}%)`))}function getDefaultPrimary(t="light"){return t==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(t="light"){return t==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(t="light"){return t==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(t="light"){return t==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(t="light"){return t==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(t="light"){return t==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function contrastColor$1(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function createPalette(t){const{mode:n="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:l,...u}=t,c=t.primary||getDefaultPrimary(n),d=t.secondary||getDefaultSecondary(n),Ct=t.error||getDefaultError(n),ar=t.info||getDefaultInfo(n),en=t.success||getDefaultSuccess(n),tn=t.warning||getDefaultWarning(n);function on(Rn){return l?contrastColor$1(Rn):getContrastRatio(Rn,dark.text.primary)>=a?dark.text.primary:light.text.primary}const fn=({color:Rn,name:ax,mainShade:ox=500,lightShade:sx=300,darkShade:lx=700})=>{if(Rn={...Rn},!Rn.main&&Rn[ox]&&(Rn.main=Rn[ox]),!Rn.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,ax?` (${ax})`:"",ox));if(typeof Rn.main!="string")throw new Error(formatMuiErrorMessage(12,ax?` (${ax})`:"",JSON.stringify(Rn.main)));return l?(mixLightOrDark(l,Rn,"light",sx,s),mixLightOrDark(l,Rn,"dark",lx,s)):(addLightOrDark(Rn,"light",sx,s),addLightOrDark(Rn,"dark",lx,s)),Rn.contrastText||(Rn.contrastText=on(Rn.main)),Rn};let dn;return n==="light"?dn=getLight():n==="dark"&&(dn=getDark()),deepmerge({common:{...common},mode:n,primary:fn({color:c,name:"primary"}),secondary:fn({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:fn({color:Ct,name:"error"}),warning:fn({color:tn,name:"warning"}),info:fn({color:ar,name:"info"}),success:fn({color:en,name:"success"}),grey,contrastThreshold:a,getContrastText:on,augmentColor:fn,tonalOffset:s,...dn},u)}function prepareTypographyVars(t){const n={};return Object.entries(t).forEach(s=>{const[l,u]=s;typeof u=="object"&&(n[l]=`${u.fontStyle?`${u.fontStyle} `:""}${u.fontVariant?`${u.fontVariant} `:""}${u.fontWeight?`${u.fontWeight} `:""}${u.fontStretch?`${u.fontStretch} `:""}${u.fontSize||""}${u.lineHeight?`/${u.lineHeight} `:""}${u.fontFamily||""}`)}),n}function createMixins(t,n){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...n}}function round$6(t){return Math.round(t*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(t,n){const{fontFamily:a=defaultFontFamily,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:u=400,fontWeightMedium:c=500,fontWeightBold:d=700,htmlFontSize:Ct=16,allVariants:ar,pxToRem:en,...tn}=typeof n=="function"?n(t):n,on=s/14,fn=en||(Rn=>`${Rn/Ct*on}rem`),dn=(Rn,ax,ox,sx,lx)=>({fontFamily:a,fontWeight:Rn,fontSize:fn(ax),lineHeight:ox,...a===defaultFontFamily?{letterSpacing:`${round$6(sx/ax)}em`}:{},...lx,...ar}),Cn={h1:dn(l,96,1.167,-1.5),h2:dn(l,60,1.2,-.5),h3:dn(u,48,1.167,0),h4:dn(u,34,1.235,.25),h5:dn(u,24,1.334,0),h6:dn(c,20,1.6,.15),subtitle1:dn(u,16,1.75,.15),subtitle2:dn(c,14,1.57,.1),body1:dn(u,16,1.5,.15),body2:dn(u,14,1.43,.15),button:dn(c,14,1.75,.4,caseAllCaps),caption:dn(u,12,1.66,.4),overline:dn(u,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:Ct,pxToRem:fn,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:u,fontWeightMedium:c,fontWeightBold:d,...Cn},tn,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(t){return`${Math.round(t)}ms`}function getAutoHeightDuration(t){if(!t)return 0;const n=t/36;return Math.min(Math.round((4+15*n**.25+n/5)*10),3e3)}function createTransitions(t){const n={...easing,...t.easing},a={...duration,...t.duration};return{getAutoHeightDuration,create:(l=["all"],u={})=>{const{duration:c=a.standard,easing:d=n.easeInOut,delay:Ct=0,...ar}=u;return(Array.isArray(l)?l:[l]).map(en=>`${en} ${typeof c=="string"?c:formatMs(c)} ${d} ${typeof Ct=="string"?Ct:formatMs(Ct)}`).join(",")},...t,easing:n,duration:a}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(t){return isPlainObject(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function stringifyTheme(t={}){const n={...t};function a(s){const l=Object.entries(s);for(let u=0;u<l.length;u++){const[c,d]=l[u];!isSerializable(d)||c.startsWith("unstable_")?delete s[c]:isPlainObject(d)&&(s[c]={...d},a(s[c]))}}return a(n),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(n,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function coefficientToPercentage(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const parseAddition=t=>{if(!Number.isNaN(+t))return+t;const n=t.match(/\d*\.?\d+/g);if(!n)return 0;let a=0;for(let s=0;s<n.length;s+=1)a+=+n[s];return a};function attachColorManipulators(t){Object.assign(t,{alpha(n,a){const s=this||t;return s.colorSpace?`oklch(from ${n} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${n.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:alpha$1(n,parseAddition(a))},lighten(n,a){const s=this||t;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${n}, #fff ${coefficientToPercentage(a)})`:lighten(n,a)},darken(n,a){const s=this||t;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${n}, #000 ${coefficientToPercentage(a)})`:darken(n,a)}})}function createThemeNoVars(t={},...n){const{breakpoints:a,mixins:s={},spacing:l,palette:u={},transitions:c={},typography:d={},shape:Ct,colorSpace:ar,...en}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const tn=createPalette({...u,colorSpace:ar}),on=createTheme$1(t);let fn=deepmerge(on,{mixins:createMixins(on.breakpoints,s),palette:tn,shadows:shadows.slice(),typography:createTypography(tn,d),transitions:createTransitions(c),zIndex:{...zIndex}});return fn=deepmerge(fn,en),fn=n.reduce((dn,Cn)=>deepmerge(dn,Cn),fn),fn.unstable_sxConfig={...defaultSxConfig,...en?.unstable_sxConfig},fn.unstable_sx=function(Cn){return styleFunctionSx({sx:Cn,theme:this})},fn.toRuntimeSource=stringifyTheme,attachColorManipulators(fn),fn}function getOverlayAlpha(t){let n;return t<1?n=5.11916*t**2:n=4.5*Math.log(t+1)+2,Math.round(n*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((t,n)=>{if(n===0)return"none";const a=getOverlayAlpha(n);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function getOpacity(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function getOverlays(t){return t==="dark"?defaultDarkOverlays:[]}function createColorScheme(t){const{palette:n={mode:"light"},opacity:a,overlays:s,colorSpace:l,...u}=t,c=createPalette({...n,colorSpace:l});return{palette:c,opacity:{...getOpacity(c.mode),...a},overlays:s||getOverlays(c.mode),...u}}function shouldSkipGeneratingVar(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const excludeVariablesFromRoot=t=>[...[...Array(25)].map((n,a)=>`--${t?`${t}-`:""}overlays-${a}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],defaultGetSelector=t=>(n,a)=>{const s=t.rootSelector||":root",l=t.colorSchemeSelector;let u=l;if(l==="class"&&(u=".%s"),l==="data"&&(u="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(u=`[${l}="%s"]`),t.defaultColorScheme===n){if(n==="dark"){const c={};return excludeVariablesFromRoot(t.cssVarPrefix).forEach(d=>{c[d]=a[d],delete a[d]}),u==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:c}}:u?{[u.replace("%s",n)]:c,[`${s}, ${u.replace("%s",n)}`]:a}:{[s]:{...a,...c}}}if(u&&u!=="media")return`${s}, ${u.replace("%s",String(n))}`}else if(n){if(u==="media")return{[`@media (prefers-color-scheme: ${String(n)})`]:{[s]:a}};if(u)return u.replace("%s",String(n))}return s};function assignNode(t,n){n.forEach(a=>{t[a]||(t[a]={})})}function setColor(t,n,a){!t[n]&&a&&(t[n]=a)}function toRgb(t){return typeof t!="string"||!t.startsWith("hsl")?t:hslToRgb(t)}function setColorChannel(t,n){`${n}Channel`in t||(t[`${n}Channel`]=private_safeColorChannel(toRgb(t[n])))}function getSpacingVal(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const silent=t=>{try{return t()}catch{}},createGetCssVar=(t="mui")=>createGetCssVar$1(t);function attachColorScheme$1(t,n,a,s,l){if(!a)return;a=a===!0?{}:a;const u=l==="dark"?"dark":"light";if(!s){n[l]=createColorScheme({...a,palette:{mode:u,...a?.palette},colorSpace:t});return}const{palette:c,...d}=createThemeNoVars({...s,palette:{mode:u,...a?.palette},colorSpace:t});return n[l]={...a,palette:c,opacity:{...getOpacity(u),...a?.opacity},overlays:a?.overlays||getOverlays(u)},d}function createThemeWithVars(t={},...n){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:l=!1,cssVarPrefix:u="mui",nativeColor:c=!1,shouldSkipGeneratingVar:d=shouldSkipGeneratingVar,colorSchemeSelector:Ct=a.light&&a.dark?"media":void 0,rootSelector:ar=":root",...en}=t,tn=Object.keys(a)[0],on=s||(a.light&&tn!=="light"?"light":tn),fn=createGetCssVar(u),{[on]:dn,light:Cn,dark:Rn,...ax}=a,ox={...ax};let sx=dn;if((on==="dark"&&!("dark"in a)||on==="light"&&!("light"in a))&&(sx=!0),!sx)throw new Error(formatMuiErrorMessage(21,on));let lx;c&&(lx="oklch");const cx=attachColorScheme$1(lx,ox,sx,en,on);Cn&&!ox.light&&attachColorScheme$1(lx,ox,Cn,void 0,"light"),Rn&&!ox.dark&&attachColorScheme$1(lx,ox,Rn,void 0,"dark");let fx={defaultColorScheme:on,...cx,cssVarPrefix:u,colorSchemeSelector:Ct,rootSelector:ar,getCssVar:fn,colorSchemes:ox,font:{...prepareTypographyVars(cx.typography),...cx.font},spacing:getSpacingVal(en.spacing)};Object.keys(fx.colorSchemes).forEach(vx=>{const yx=fx.colorSchemes[vx].palette,Sx=Ex=>{const bx=Ex.split("-"),Ax=bx[1],Mx=bx[2];return fn(Ex,yx[Ax][Mx])};yx.mode==="light"&&(setColor(yx.common,"background","#fff"),setColor(yx.common,"onBackground","#000")),yx.mode==="dark"&&(setColor(yx.common,"background","#000"),setColor(yx.common,"onBackground","#fff"));function _x(Ex,bx,Ax){if(lx){let Mx;return Ex===private_safeAlpha&&(Mx=`transparent ${((1-Ax)*100).toFixed(0)}%`),Ex===private_safeDarken&&(Mx=`#000 ${(Ax*100).toFixed(0)}%`),Ex===private_safeLighten&&(Mx=`#fff ${(Ax*100).toFixed(0)}%`),`color-mix(in ${lx}, ${bx}, ${Mx})`}return Ex(bx,Ax)}if(assignNode(yx,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),yx.mode==="light"){setColor(yx.Alert,"errorColor",_x(private_safeDarken,yx.error.light,.6)),setColor(yx.Alert,"infoColor",_x(private_safeDarken,yx.info.light,.6)),setColor(yx.Alert,"successColor",_x(private_safeDarken,yx.success.light,.6)),setColor(yx.Alert,"warningColor",_x(private_safeDarken,yx.warning.light,.6)),setColor(yx.Alert,"errorFilledBg",Sx("palette-error-main")),setColor(yx.Alert,"infoFilledBg",Sx("palette-info-main")),setColor(yx.Alert,"successFilledBg",Sx("palette-success-main")),setColor(yx.Alert,"warningFilledBg",Sx("palette-warning-main")),setColor(yx.Alert,"errorFilledColor",silent(()=>yx.getContrastText(yx.error.main))),setColor(yx.Alert,"infoFilledColor",silent(()=>yx.getContrastText(yx.info.main))),setColor(yx.Alert,"successFilledColor",silent(()=>yx.getContrastText(yx.success.main))),setColor(yx.Alert,"warningFilledColor",silent(()=>yx.getContrastText(yx.warning.main))),setColor(yx.Alert,"errorStandardBg",_x(private_safeLighten,yx.error.light,.9)),setColor(yx.Alert,"infoStandardBg",_x(private_safeLighten,yx.info.light,.9)),setColor(yx.Alert,"successStandardBg",_x(private_safeLighten,yx.success.light,.9)),setColor(yx.Alert,"warningStandardBg",_x(private_safeLighten,yx.warning.light,.9)),setColor(yx.Alert,"errorIconColor",Sx("palette-error-main")),setColor(yx.Alert,"infoIconColor",Sx("palette-info-main")),setColor(yx.Alert,"successIconColor",Sx("palette-success-main")),setColor(yx.Alert,"warningIconColor",Sx("palette-warning-main")),setColor(yx.AppBar,"defaultBg",Sx("palette-grey-100")),setColor(yx.Avatar,"defaultBg",Sx("palette-grey-400")),setColor(yx.Button,"inheritContainedBg",Sx("palette-grey-300")),setColor(yx.Button,"inheritContainedHoverBg",Sx("palette-grey-A100")),setColor(yx.Chip,"defaultBorder",Sx("palette-grey-400")),setColor(yx.Chip,"defaultAvatarColor",Sx("palette-grey-700")),setColor(yx.Chip,"defaultIconColor",Sx("palette-grey-700")),setColor(yx.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(yx.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(yx.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(yx.LinearProgress,"primaryBg",_x(private_safeLighten,yx.primary.main,.62)),setColor(yx.LinearProgress,"secondaryBg",_x(private_safeLighten,yx.secondary.main,.62)),setColor(yx.LinearProgress,"errorBg",_x(private_safeLighten,yx.error.main,.62)),setColor(yx.LinearProgress,"infoBg",_x(private_safeLighten,yx.info.main,.62)),setColor(yx.LinearProgress,"successBg",_x(private_safeLighten,yx.success.main,.62)),setColor(yx.LinearProgress,"warningBg",_x(private_safeLighten,yx.warning.main,.62)),setColor(yx.Skeleton,"bg",lx?_x(private_safeAlpha,yx.text.primary,.11):`rgba(${Sx("palette-text-primaryChannel")} / 0.11)`),setColor(yx.Slider,"primaryTrack",_x(private_safeLighten,yx.primary.main,.62)),setColor(yx.Slider,"secondaryTrack",_x(private_safeLighten,yx.secondary.main,.62)),setColor(yx.Slider,"errorTrack",_x(private_safeLighten,yx.error.main,.62)),setColor(yx.Slider,"infoTrack",_x(private_safeLighten,yx.info.main,.62)),setColor(yx.Slider,"successTrack",_x(private_safeLighten,yx.success.main,.62)),setColor(yx.Slider,"warningTrack",_x(private_safeLighten,yx.warning.main,.62));const Ex=lx?_x(private_safeDarken,yx.background.default,.6825):private_safeEmphasize(yx.background.default,.8);setColor(yx.SnackbarContent,"bg",Ex),setColor(yx.SnackbarContent,"color",silent(()=>lx?dark.text.primary:yx.getContrastText(Ex))),setColor(yx.SpeedDialAction,"fabHoverBg",private_safeEmphasize(yx.background.paper,.15)),setColor(yx.StepConnector,"border",Sx("palette-grey-400")),setColor(yx.StepContent,"border",Sx("palette-grey-400")),setColor(yx.Switch,"defaultColor",Sx("palette-common-white")),setColor(yx.Switch,"defaultDisabledColor",Sx("palette-grey-100")),setColor(yx.Switch,"primaryDisabledColor",_x(private_safeLighten,yx.primary.main,.62)),setColor(yx.Switch,"secondaryDisabledColor",_x(private_safeLighten,yx.secondary.main,.62)),setColor(yx.Switch,"errorDisabledColor",_x(private_safeLighten,yx.error.main,.62)),setColor(yx.Switch,"infoDisabledColor",_x(private_safeLighten,yx.info.main,.62)),setColor(yx.Switch,"successDisabledColor",_x(private_safeLighten,yx.success.main,.62)),setColor(yx.Switch,"warningDisabledColor",_x(private_safeLighten,yx.warning.main,.62)),setColor(yx.TableCell,"border",_x(private_safeLighten,_x(private_safeAlpha,yx.divider,1),.88)),setColor(yx.Tooltip,"bg",_x(private_safeAlpha,yx.grey[700],.92))}if(yx.mode==="dark"){setColor(yx.Alert,"errorColor",_x(private_safeLighten,yx.error.light,.6)),setColor(yx.Alert,"infoColor",_x(private_safeLighten,yx.info.light,.6)),setColor(yx.Alert,"successColor",_x(private_safeLighten,yx.success.light,.6)),setColor(yx.Alert,"warningColor",_x(private_safeLighten,yx.warning.light,.6)),setColor(yx.Alert,"errorFilledBg",Sx("palette-error-dark")),setColor(yx.Alert,"infoFilledBg",Sx("palette-info-dark")),setColor(yx.Alert,"successFilledBg",Sx("palette-success-dark")),setColor(yx.Alert,"warningFilledBg",Sx("palette-warning-dark")),setColor(yx.Alert,"errorFilledColor",silent(()=>yx.getContrastText(yx.error.dark))),setColor(yx.Alert,"infoFilledColor",silent(()=>yx.getContrastText(yx.info.dark))),setColor(yx.Alert,"successFilledColor",silent(()=>yx.getContrastText(yx.success.dark))),setColor(yx.Alert,"warningFilledColor",silent(()=>yx.getContrastText(yx.warning.dark))),setColor(yx.Alert,"errorStandardBg",_x(private_safeDarken,yx.error.light,.9)),setColor(yx.Alert,"infoStandardBg",_x(private_safeDarken,yx.info.light,.9)),setColor(yx.Alert,"successStandardBg",_x(private_safeDarken,yx.success.light,.9)),setColor(yx.Alert,"warningStandardBg",_x(private_safeDarken,yx.warning.light,.9)),setColor(yx.Alert,"errorIconColor",Sx("palette-error-main")),setColor(yx.Alert,"infoIconColor",Sx("palette-info-main")),setColor(yx.Alert,"successIconColor",Sx("palette-success-main")),setColor(yx.Alert,"warningIconColor",Sx("palette-warning-main")),setColor(yx.AppBar,"defaultBg",Sx("palette-grey-900")),setColor(yx.AppBar,"darkBg",Sx("palette-background-paper")),setColor(yx.AppBar,"darkColor",Sx("palette-text-primary")),setColor(yx.Avatar,"defaultBg",Sx("palette-grey-600")),setColor(yx.Button,"inheritContainedBg",Sx("palette-grey-800")),setColor(yx.Button,"inheritContainedHoverBg",Sx("palette-grey-700")),setColor(yx.Chip,"defaultBorder",Sx("palette-grey-700")),setColor(yx.Chip,"defaultAvatarColor",Sx("palette-grey-300")),setColor(yx.Chip,"defaultIconColor",Sx("palette-grey-300")),setColor(yx.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(yx.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(yx.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(yx.LinearProgress,"primaryBg",_x(private_safeDarken,yx.primary.main,.5)),setColor(yx.LinearProgress,"secondaryBg",_x(private_safeDarken,yx.secondary.main,.5)),setColor(yx.LinearProgress,"errorBg",_x(private_safeDarken,yx.error.main,.5)),setColor(yx.LinearProgress,"infoBg",_x(private_safeDarken,yx.info.main,.5)),setColor(yx.LinearProgress,"successBg",_x(private_safeDarken,yx.success.main,.5)),setColor(yx.LinearProgress,"warningBg",_x(private_safeDarken,yx.warning.main,.5)),setColor(yx.Skeleton,"bg",lx?_x(private_safeAlpha,yx.text.primary,.13):`rgba(${Sx("palette-text-primaryChannel")} / 0.13)`),setColor(yx.Slider,"primaryTrack",_x(private_safeDarken,yx.primary.main,.5)),setColor(yx.Slider,"secondaryTrack",_x(private_safeDarken,yx.secondary.main,.5)),setColor(yx.Slider,"errorTrack",_x(private_safeDarken,yx.error.main,.5)),setColor(yx.Slider,"infoTrack",_x(private_safeDarken,yx.info.main,.5)),setColor(yx.Slider,"successTrack",_x(private_safeDarken,yx.success.main,.5)),setColor(yx.Slider,"warningTrack",_x(private_safeDarken,yx.warning.main,.5));const Ex=lx?_x(private_safeLighten,yx.background.default,.985):private_safeEmphasize(yx.background.default,.98);setColor(yx.SnackbarContent,"bg",Ex),setColor(yx.SnackbarContent,"color",silent(()=>lx?light.text.primary:yx.getContrastText(Ex))),setColor(yx.SpeedDialAction,"fabHoverBg",private_safeEmphasize(yx.background.paper,.15)),setColor(yx.StepConnector,"border",Sx("palette-grey-600")),setColor(yx.StepContent,"border",Sx("palette-grey-600")),setColor(yx.Switch,"defaultColor",Sx("palette-grey-300")),setColor(yx.Switch,"defaultDisabledColor",Sx("palette-grey-600")),setColor(yx.Switch,"primaryDisabledColor",_x(private_safeDarken,yx.primary.main,.55)),setColor(yx.Switch,"secondaryDisabledColor",_x(private_safeDarken,yx.secondary.main,.55)),setColor(yx.Switch,"errorDisabledColor",_x(private_safeDarken,yx.error.main,.55)),setColor(yx.Switch,"infoDisabledColor",_x(private_safeDarken,yx.info.main,.55)),setColor(yx.Switch,"successDisabledColor",_x(private_safeDarken,yx.success.main,.55)),setColor(yx.Switch,"warningDisabledColor",_x(private_safeDarken,yx.warning.main,.55)),setColor(yx.TableCell,"border",_x(private_safeDarken,_x(private_safeAlpha,yx.divider,1),.68)),setColor(yx.Tooltip,"bg",_x(private_safeAlpha,yx.grey[700],.92))}setColorChannel(yx.background,"default"),setColorChannel(yx.background,"paper"),setColorChannel(yx.common,"background"),setColorChannel(yx.common,"onBackground"),setColorChannel(yx,"divider"),Object.keys(yx).forEach(Ex=>{const bx=yx[Ex];Ex!=="tonalOffset"&&bx&&typeof bx=="object"&&(bx.main&&setColor(yx[Ex],"mainChannel",private_safeColorChannel(toRgb(bx.main))),bx.light&&setColor(yx[Ex],"lightChannel",private_safeColorChannel(toRgb(bx.light))),bx.dark&&setColor(yx[Ex],"darkChannel",private_safeColorChannel(toRgb(bx.dark))),bx.contrastText&&setColor(yx[Ex],"contrastTextChannel",private_safeColorChannel(toRgb(bx.contrastText))),Ex==="text"&&(setColorChannel(yx[Ex],"primary"),setColorChannel(yx[Ex],"secondary")),Ex==="action"&&(bx.active&&setColorChannel(yx[Ex],"active"),bx.selected&&setColorChannel(yx[Ex],"selected")))})}),fx=n.reduce((vx,yx)=>deepmerge(vx,yx),fx);const gx={prefix:u,disableCssColorScheme:l,shouldSkipGeneratingVar:d,getSelector:defaultGetSelector(fx),enableContrastVars:c},{vars:mx,generateThemeVars:px,generateStyleSheets:hx}=prepareCssVars(fx,gx);return fx.vars=mx,Object.entries(fx.colorSchemes[fx.defaultColorScheme]).forEach(([vx,yx])=>{fx[vx]=yx}),fx.generateThemeVars=px,fx.generateStyleSheets=hx,fx.generateSpacing=function(){return createSpacing(en.spacing,createUnarySpacing(this))},fx.getColorSchemeSelector=createGetColorSchemeSelector(Ct),fx.spacing=fx.generateSpacing(),fx.shouldSkipGeneratingVar=d,fx.unstable_sxConfig={...defaultSxConfig,...en?.unstable_sxConfig},fx.unstable_sx=function(yx){return styleFunctionSx({sx:yx,theme:this})},fx.toRuntimeSource=stringifyTheme,fx}function attachColorScheme(t,n,a){t.colorSchemes&&a&&(t.colorSchemes[n]={...a!==!0&&a,palette:createPalette({...a===!0?{}:a.palette,mode:n})})}function createTheme(t={},...n){const{palette:a,cssVariables:s=!1,colorSchemes:l=a?void 0:{light:!0},defaultColorScheme:u=a?.mode,...c}=t,d=u||"light",Ct=l?.[d],ar={...l,...a?{[d]:{...typeof Ct!="boolean"&&Ct,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in t))return createThemeNoVars(t,...n);let en=a;"palette"in t||ar[d]&&(ar[d]!==!0?en=ar[d].palette:d==="dark"&&(en={mode:"dark"}));const tn=createThemeNoVars({...t,palette:en},...n);return tn.defaultColorScheme=d,tn.colorSchemes=ar,tn.palette.mode==="light"&&(tn.colorSchemes.light={...ar.light!==!0&&ar.light,palette:tn.palette},attachColorScheme(tn,"dark",ar.dark)),tn.palette.mode==="dark"&&(tn.colorSchemes.dark={...ar.dark!==!0&&ar.dark,palette:tn.palette},attachColorScheme(tn,"light",ar.light)),tn}return!a&&!("light"in ar)&&d==="light"&&(ar.light=!0),createThemeWithVars({...c,colorSchemes:ar,defaultColorScheme:d,...typeof s!="boolean"&&s},...n)}const defaultTheme$1=createTheme(),THEME_ID="$$material";function useTheme(){const t=useTheme$2(defaultTheme$1);return t[THEME_ID]||t}function GlobalStyles(t){return jsxRuntimeExports.jsx(GlobalStyles$1,{...t,defaultTheme:defaultTheme$1,themeId:THEME_ID})}function slotShouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const rootShouldForwardProp=t=>slotShouldForwardProp(t)&&t!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function globalCss(t){return function(a){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof t=="function"?s=>t({theme:s,...a}):t})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(t){return useDefaultProps$1(t)}function getSvgIconUtilityClass(t){return generateUtilityClass("MuiSvgIcon",t)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$H=t=>{const{color:n,fontSize:a,classes:s}=t,l={root:["root",n!=="inherit"&&`color${capitalize(n)}`,`fontSize${capitalize(a)}`]};return composeClasses(l,getSvgIconUtilityClass,s)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color!=="inherit"&&n[`color${capitalize(a.color)}`],n[`fontSize${capitalize(a.fontSize)}`]]}})(memoTheme(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:n=>!n.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,n])=>n&&n.main).map(([n])=>({props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),SvgIcon=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiSvgIcon"}),{children:l,className:u,color:c="inherit",component:d="svg",fontSize:Ct="medium",htmlColor:ar,inheritViewBox:en=!1,titleAccess:tn,viewBox:on="0 0 24 24",...fn}=s,dn=reactExports.isValidElement(l)&&l.type==="svg",Cn={...s,color:c,component:d,fontSize:Ct,instanceFontSize:n.fontSize,inheritViewBox:en,viewBox:on,hasSvgAsChild:dn},Rn={};en||(Rn.viewBox=on);const ax=useUtilityClasses$H(Cn);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:d,className:clsx(ax.root,u),focusable:"false",color:ar,"aria-hidden":tn?void 0:!0,role:tn?"img":void 0,ref:a,...Rn,...fn,...dn&&l.props,ownerState:Cn,children:[dn?l.props.children:l,tn?jsxRuntimeExports.jsx("title",{children:tn}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(t,n){function a(s,l){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":void 0,ref:l,...s,children:t})}return a.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(a))}function debounce$2(t,n=166){let a;function s(...l){const u=()=>{t.apply(this,l)};clearTimeout(a),a=setTimeout(u,n)}return s.clear=()=>{clearTimeout(a)},s}function ownerDocument(t){return t&&t.ownerDocument||document}function ownerWindow(t){return ownerDocument(t).defaultView||window}function setRef(t,n){typeof t=="function"?t(n):t&&(t.current=n)}function useControlled(t){const{controlled:n,default:a,name:s,state:l="value"}=t,{current:u}=reactExports.useRef(n!==void 0),[c,d]=reactExports.useState(a),Ct=u?n:c,ar=reactExports.useCallback(en=>{u||d(en)},[]);return[Ct,ar]}function useEventCallback(t){const n=reactExports.useRef(t);return useEnhancedEffect(()=>{n.current=t}),reactExports.useRef((...a)=>(0,n.current)(...a)).current}function useForkRef(...t){const n=reactExports.useRef(void 0),a=reactExports.useCallback(s=>{const l=t.map(u=>{if(u==null)return null;if(typeof u=="function"){const c=u,d=c(s);return typeof d=="function"?d:()=>{c(null)}}return u.current=s,()=>{u.current=null}});return()=>{l.forEach(u=>u?.())}},t);return reactExports.useMemo(()=>t.every(s=>s==null)?null:s=>{n.current&&(n.current(),n.current=void 0),s!=null&&(n.current=a(s))},t)}function isEventHandler(t,n){const a=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&a>=65&&a<=90&&typeof n=="function"}function mergeSlotProps$1(t,n){if(!t)return n;function a(c,d){const Ct={};return Object.keys(d).forEach(ar=>{isEventHandler(ar,d[ar])&&typeof c[ar]=="function"&&(Ct[ar]=(...en)=>{c[ar](...en),d[ar](...en)})}),Ct}if(typeof t=="function"||typeof n=="function")return c=>{const d=typeof n=="function"?n(c):n,Ct=typeof t=="function"?t({...c,...d}):t,ar=clsx(c?.className,d?.className,Ct?.className),en=a(Ct,d);return{...d,...Ct,...en,...!!ar&&{className:ar},...d?.style&&Ct?.style&&{style:{...d.style,...Ct.style}},...d?.sx&&Ct?.sx&&{sx:[...Array.isArray(d.sx)?d.sx:[d.sx],...Array.isArray(Ct.sx)?Ct.sx:[Ct.sx]]}}};const s=n,l=a(t,s),u=clsx(s?.className,t?.className);return{...n,...t,...l,...!!u&&{className:u},...s?.style&&t?.style&&{style:{...s.style,...t.style}},...s?.sx&&t?.sx&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function isFocusVisible(t){try{return t.matches(":focus-visible")}catch{}return!1}const UNINITIALIZED={};function useLazyRef(t,n){const a=reactExports.useRef(UNINITIALIZED);return a.current===UNINITIALIZED&&(a.current=t(n)),a}class LazyRipple{static create(){return new LazyRipple}static use(){const n=useLazyRef(LazyRipple.create).current,[a,s]=reactExports.useState(!1);return n.shouldMount=a,n.setShouldMount=s,reactExports.useEffect(n.mountEffect,[a]),n}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...n){this.mount().then(()=>this.ref.current?.start(...n))}stop(...n){this.mount().then(()=>this.ref.current?.stop(...n))}pulsate(...n){this.mount().then(()=>this.ref.current?.pulsate(...n))}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let t,n;const a=new Promise((s,l)=>{t=s,n=l});return a.resolve=t,a.reject=n,a}function _objectWithoutPropertiesLoose(t,n){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;a[s]=t[s]}return a}function _setPrototypeOf(t,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},_setPrototypeOf(t,n)}function _inheritsLoose(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,_setPrototypeOf(t,n)}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(n){return n.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=(function(t){_inheritsLoose(n,t);function n(s,l){var u;u=t.call(this,s,l)||this;var c=l,d=c&&!c.isMounting?s.enter:s.appear,Ct;return u.appearStatus=null,s.in?d?(Ct=EXITED,u.appearStatus=ENTERING):Ct=ENTERED:s.unmountOnExit||s.mountOnEnter?Ct=UNMOUNTED:Ct=EXITED,u.state={status:Ct},u.nextCallback=null,u}n.getDerivedStateFromProps=function(l,u){var c=l.in;return c&&u.status===UNMOUNTED?{status:EXITED}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(l){var u=null;if(l!==this.props){var c=this.state.status;this.props.in?c!==ENTERING&&c!==ENTERED&&(u=ENTERING):(c===ENTERING||c===ENTERED)&&(u=EXITING)}this.updateStatus(!1,u)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var l=this.props.timeout,u,c,d;return u=c=d=l,l!=null&&typeof l!="number"&&(u=l.exit,c=l.enter,d=l.appear!==void 0?l.appear:c),{exit:u,enter:c,appear:d}},a.updateStatus=function(l,u){if(l===void 0&&(l=!1),u!==null)if(this.cancelNextCallback(),u===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);c&&forceReflow(c)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},a.performEnter=function(l){var u=this,c=this.props.enter,d=this.context?this.context.isMounting:l,Ct=this.props.nodeRef?[d]:[ReactDOM.findDOMNode(this),d],ar=Ct[0],en=Ct[1],tn=this.getTimeouts(),on=d?tn.appear:tn.enter;if(!l&&!c||config$1.disabled){this.safeSetState({status:ENTERED},function(){u.props.onEntered(ar)});return}this.props.onEnter(ar,en),this.safeSetState({status:ENTERING},function(){u.props.onEntering(ar,en),u.onTransitionEnd(on,function(){u.safeSetState({status:ENTERED},function(){u.props.onEntered(ar,en)})})})},a.performExit=function(){var l=this,u=this.props.exit,c=this.getTimeouts(),d=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!u||config$1.disabled){this.safeSetState({status:EXITED},function(){l.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:EXITING},function(){l.props.onExiting(d),l.onTransitionEnd(c.exit,function(){l.safeSetState({status:EXITED},function(){l.props.onExited(d)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(l,u){u=this.setNextCallback(u),this.setState(l,u)},a.setNextCallback=function(l){var u=this,c=!0;return this.nextCallback=function(d){c&&(c=!1,u.nextCallback=null,l(d))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},a.onTransitionEnd=function(l,u){this.setNextCallback(u);var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),d=l==null&&!this.props.addEndListener;if(!c||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var Ct=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],ar=Ct[0],en=Ct[1];this.props.addEndListener(ar,en)}l!=null&&setTimeout(this.nextCallback,l)},a.render=function(){var l=this.state.status;if(l===UNMOUNTED)return null;var u=this.props,c=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var d=_objectWithoutPropertiesLoose(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof c=="function"?c(l,d):React.cloneElement(React.Children.only(c),d))},n})(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function getChildMapping(t,n){var a=function(u){return n&&reactExports.isValidElement(u)?n(u):u},s=Object.create(null);return t&&reactExports.Children.map(t,function(l){return l}).forEach(function(l){s[l.key]=a(l)}),s}function mergeChildMappings(t,n){t=t||{},n=n||{};function a(en){return en in n?n[en]:t[en]}var s=Object.create(null),l=[];for(var u in t)u in n?l.length&&(s[u]=l,l=[]):l.push(u);var c,d={};for(var Ct in n){if(s[Ct])for(c=0;c<s[Ct].length;c++){var ar=s[Ct][c];d[s[Ct][c]]=a(ar)}d[Ct]=a(Ct)}for(c=0;c<l.length;c++)d[l[c]]=a(l[c]);return d}function getProp(t,n,a){return a[n]!=null?a[n]:t.props[n]}function getInitialChildMapping(t,n){return getChildMapping(t.children,function(a){return reactExports.cloneElement(a,{onExited:n.bind(null,a),in:!0,appear:getProp(a,"appear",t),enter:getProp(a,"enter",t),exit:getProp(a,"exit",t)})})}function getNextChildMapping(t,n,a){var s=getChildMapping(t.children),l=mergeChildMappings(n,s);return Object.keys(l).forEach(function(u){var c=l[u];if(reactExports.isValidElement(c)){var d=u in n,Ct=u in s,ar=n[u],en=reactExports.isValidElement(ar)&&!ar.props.in;Ct&&(!d||en)?l[u]=reactExports.cloneElement(c,{onExited:a.bind(null,c),in:!0,exit:getProp(c,"exit",t),enter:getProp(c,"enter",t)}):!Ct&&d&&!en?l[u]=reactExports.cloneElement(c,{in:!1}):Ct&&d&&reactExports.isValidElement(ar)&&(l[u]=reactExports.cloneElement(c,{onExited:a.bind(null,c),in:ar.props.in,exit:getProp(c,"exit",t),enter:getProp(c,"enter",t)}))}}),l}var values=Object.values||function(t){return Object.keys(t).map(function(n){return t[n]})},defaultProps={component:"div",childFactory:function(n){return n}},TransitionGroup=(function(t){_inheritsLoose(n,t);function n(s,l){var u;u=t.call(this,s,l)||this;var c=u.handleExited.bind(_assertThisInitialized(u));return u.state={contextValue:{isMounting:!0},handleExited:c,firstRender:!0},u}var a=n.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(l,u){var c=u.children,d=u.handleExited,Ct=u.firstRender;return{children:Ct?getInitialChildMapping(l,d):getNextChildMapping(l,c,d),firstRender:!1}},a.handleExited=function(l,u){var c=getChildMapping(this.props.children);l.key in c||(l.props.onExited&&l.props.onExited(u),this.mounted&&this.setState(function(d){var Ct=_extends({},d.children);return delete Ct[l.key],{children:Ct}}))},a.render=function(){var l=this.props,u=l.component,c=l.childFactory,d=_objectWithoutPropertiesLoose(l,["component","childFactory"]),Ct=this.state.contextValue,ar=values(this.state.children).map(c);return delete d.appear,delete d.enter,delete d.exit,u===null?React.createElement(TransitionGroupContext.Provider,{value:Ct},ar):React.createElement(TransitionGroupContext.Provider,{value:Ct},React.createElement(u,d,ar))},n})(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const EMPTY=[];function useOnMount(t){reactExports.useEffect(t,EMPTY)}class Timeout{static create(){return new Timeout}currentId=null;start(n,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},n)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function useTimeout(){const t=useLazyRef(Timeout.create).current;return useOnMount(t.disposeEffect),t}function Ripple(t){const{className:n,classes:a,pulsate:s=!1,rippleX:l,rippleY:u,rippleSize:c,in:d,onExited:Ct,timeout:ar}=t,[en,tn]=reactExports.useState(!1),on=clsx(n,a.ripple,a.rippleVisible,s&&a.ripplePulsate),fn={width:c,height:c,top:-(c/2)+u,left:-(c/2)+l},dn=clsx(a.child,en&&a.childLeaving,s&&a.childPulsate);return!d&&!en&&tn(!0),reactExports.useEffect(()=>{if(!d&&Ct!=null){const Cn=setTimeout(Ct,ar);return()=>{clearTimeout(Cn)}}},[Ct,d,ar]),jsxRuntimeExports.jsx("span",{className:on,style:fn,children:jsxRuntimeExports.jsx("span",{className:dn})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTouchRipple"}),{center:l=!1,classes:u={},className:c,...d}=s,[Ct,ar]=reactExports.useState([]),en=reactExports.useRef(0),tn=reactExports.useRef(null);reactExports.useEffect(()=>{tn.current&&(tn.current(),tn.current=null)},[Ct]);const on=reactExports.useRef(!1),fn=useTimeout(),dn=reactExports.useRef(null),Cn=reactExports.useRef(null),Rn=reactExports.useCallback(lx=>{const{pulsate:cx,rippleX:fx,rippleY:gx,rippleSize:mx,cb:px}=lx;ar(hx=>[...hx,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(u.ripple,touchRippleClasses.ripple),rippleVisible:clsx(u.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(u.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(u.child,touchRippleClasses.child),childLeaving:clsx(u.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(u.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:cx,rippleX:fx,rippleY:gx,rippleSize:mx},en.current)]),en.current+=1,tn.current=px},[u]),ax=reactExports.useCallback((lx={},cx={},fx=()=>{})=>{const{pulsate:gx=!1,center:mx=l||cx.pulsate,fakeElement:px=!1}=cx;if(lx?.type==="mousedown"&&on.current){on.current=!1;return}lx?.type==="touchstart"&&(on.current=!0);const hx=px?null:Cn.current,vx=hx?hx.getBoundingClientRect():{width:0,height:0,left:0,top:0};let yx,Sx,_x;if(mx||lx===void 0||lx.clientX===0&&lx.clientY===0||!lx.clientX&&!lx.touches)yx=Math.round(vx.width/2),Sx=Math.round(vx.height/2);else{const{clientX:Ex,clientY:bx}=lx.touches&&lx.touches.length>0?lx.touches[0]:lx;yx=Math.round(Ex-vx.left),Sx=Math.round(bx-vx.top)}if(mx)_x=Math.sqrt((2*vx.width**2+vx.height**2)/3),_x%2===0&&(_x+=1);else{const Ex=Math.max(Math.abs((hx?hx.clientWidth:0)-yx),yx)*2+2,bx=Math.max(Math.abs((hx?hx.clientHeight:0)-Sx),Sx)*2+2;_x=Math.sqrt(Ex**2+bx**2)}lx?.touches?dn.current===null&&(dn.current=()=>{Rn({pulsate:gx,rippleX:yx,rippleY:Sx,rippleSize:_x,cb:fx})},fn.start(DELAY_RIPPLE,()=>{dn.current&&(dn.current(),dn.current=null)})):Rn({pulsate:gx,rippleX:yx,rippleY:Sx,rippleSize:_x,cb:fx})},[l,Rn,fn]),ox=reactExports.useCallback(()=>{ax({},{pulsate:!0})},[ax]),sx=reactExports.useCallback((lx,cx)=>{if(fn.clear(),lx?.type==="touchend"&&dn.current){dn.current(),dn.current=null,fn.start(0,()=>{sx(lx,cx)});return}dn.current=null,ar(fx=>fx.length>0?fx.slice(1):fx),tn.current=cx},[fn]);return reactExports.useImperativeHandle(a,()=>({pulsate:ox,start:ax,stop:sx}),[ox,ax,sx]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,u.root,c),ref:Cn,...d,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:Ct})})});function getButtonBaseUtilityClass(t){return generateUtilityClass("MuiButtonBase",t)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$G=t=>{const{disabled:n,focusVisible:a,focusVisibleClassName:s,classes:l}=t,c=composeClasses({root:["root",n&&"disabled",a&&"focusVisible"]},getButtonBaseUtilityClass,l);return a&&s&&(c.root+=` ${s}`),c},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiButtonBase"}),{action:l,centerRipple:u=!1,children:c,className:d,component:Ct="button",disabled:ar=!1,disableRipple:en=!1,disableTouchRipple:tn=!1,focusRipple:on=!1,focusVisibleClassName:fn,LinkComponent:dn="a",onBlur:Cn,onClick:Rn,onContextMenu:ax,onDragLeave:ox,onFocus:sx,onFocusVisible:lx,onKeyDown:cx,onKeyUp:fx,onMouseDown:gx,onMouseLeave:mx,onMouseUp:px,onTouchEnd:hx,onTouchMove:vx,onTouchStart:yx,tabIndex:Sx=0,TouchRippleProps:_x,touchRippleRef:Ex,type:bx,...Ax}=s,Mx=reactExports.useRef(null),Rx=useLazyRipple(),Cx=useForkRef(Rx.ref,Ex),[Lx,qx]=reactExports.useState(!1);ar&&Lx&&qx(!1),reactExports.useImperativeHandle(l,()=>({focusVisible:()=>{qx(!0),Mx.current.focus()}}),[]);const Ix=Rx.shouldMount&&!en&&!ar;reactExports.useEffect(()=>{Lx&&on&&!en&&Rx.pulsate()},[en,on,Lx,Rx]);const Px=useRippleHandler(Rx,"start",gx,tn),Nx=useRippleHandler(Rx,"stop",ax,tn),Bx=useRippleHandler(Rx,"stop",ox,tn),$x=useRippleHandler(Rx,"stop",px,tn),Vx=useRippleHandler(Rx,"stop",bE=>{Lx&&bE.preventDefault(),mx&&mx(bE)},tn),Gx=useRippleHandler(Rx,"start",yx,tn),Zx=useRippleHandler(Rx,"stop",hx,tn),jx=useRippleHandler(Rx,"stop",vx,tn),Hx=useRippleHandler(Rx,"stop",bE=>{isFocusVisible(bE.target)||qx(!1),Cn&&Cn(bE)},!1),iE=useEventCallback(bE=>{Mx.current||(Mx.current=bE.currentTarget),isFocusVisible(bE.target)&&(qx(!0),lx&&lx(bE)),sx&&sx(bE)}),Xx=()=>{const bE=Mx.current;return Ct&&Ct!=="button"&&!(bE.tagName==="A"&&bE.href)},rE=useEventCallback(bE=>{on&&!bE.repeat&&Lx&&bE.key===" "&&Rx.stop(bE,()=>{Rx.start(bE)}),bE.target===bE.currentTarget&&Xx()&&bE.key===" "&&bE.preventDefault(),cx&&cx(bE),bE.target===bE.currentTarget&&Xx()&&bE.key==="Enter"&&!ar&&(bE.preventDefault(),Rn&&Rn(bE))}),uE=useEventCallback(bE=>{on&&bE.key===" "&&Lx&&!bE.defaultPrevented&&Rx.stop(bE,()=>{Rx.pulsate(bE)}),fx&&fx(bE),Rn&&bE.target===bE.currentTarget&&Xx()&&bE.key===" "&&!bE.defaultPrevented&&Rn(bE)});let aE=Ct;aE==="button"&&(Ax.href||Ax.to)&&(aE=dn);const Kx={};aE==="button"?(Kx.type=bx===void 0?"button":bx,Kx.disabled=ar):(!Ax.href&&!Ax.to&&(Kx.role="button"),ar&&(Kx["aria-disabled"]=ar));const ME=useForkRef(a,Mx),IE={...s,centerRipple:u,component:Ct,disabled:ar,disableRipple:en,disableTouchRipple:tn,focusRipple:on,tabIndex:Sx,focusVisible:Lx},wE=useUtilityClasses$G(IE);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:aE,className:clsx(wE.root,d),ownerState:IE,onBlur:Hx,onClick:Rn,onContextMenu:Nx,onFocus:iE,onKeyDown:rE,onKeyUp:uE,onMouseDown:Px,onMouseLeave:Vx,onMouseUp:$x,onDragLeave:Bx,onTouchEnd:Zx,onTouchMove:jx,onTouchStart:Gx,ref:ME,tabIndex:ar?-1:Sx,type:bx,...Kx,...Ax,children:[c,Ix?jsxRuntimeExports.jsx(TouchRipple,{ref:Cx,center:u,..._x}):null]})});function useRippleHandler(t,n,a,s=!1){return useEventCallback(l=>(a&&a(l),s||t[n](l),!0))}function hasCorrectMainProperty(t){return typeof t.main=="string"}function checkSimplePaletteColorValues(t,n=[]){if(!hasCorrectMainProperty(t))return!1;for(const a of n)if(!t.hasOwnProperty(a)||typeof t[a]!="string")return!1;return!0}function createSimplePaletteValueFilter(t=[]){return([,n])=>n&&checkSimplePaletteColorValues(n,t)}function getCircularProgressUtilityClass(t){return generateUtilityClass("MuiCircularProgress",t)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const SIZE=44,circularRotateKeyframe=keyframes`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,circularDashKeyframe=keyframes`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,rotateAnimation=typeof circularRotateKeyframe!="string"?css`
        animation: ${circularRotateKeyframe} 1.4s linear infinite;
      `:null,dashAnimation=typeof circularDashKeyframe!="string"?css`
        animation: ${circularDashKeyframe} 1.4s ease-in-out infinite;
      `:null,useUtilityClasses$F=t=>{const{classes:n,variant:a,color:s,disableShrink:l}=t,u={root:["root",a,`color${capitalize(s)}`],svg:["svg"],circle:["circle",`circle${capitalize(a)}`,l&&"circleDisableShrink"]};return composeClasses(u,getCircularProgressUtilityClass,n)},CircularProgressRoot=styled("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:rotateAnimation||{animation:`${circularRotateKeyframe} 1.4s linear infinite`}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}}))]}))),CircularProgressSVG=styled("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),CircularProgressCircle=styled("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.circle,n[`circle${capitalize(a.variant)}`],a.disableShrink&&n.circleDisableShrink]}})(memoTheme(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink,style:dashAnimation||{animation:`${circularDashKeyframe} 1.4s ease-in-out infinite`}}]}))),CircularProgress=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiCircularProgress"}),{className:l,color:u="primary",disableShrink:c=!1,size:d=40,style:Ct,thickness:ar=3.6,value:en=0,variant:tn="indeterminate",...on}=s,fn={...s,color:u,disableShrink:c,size:d,thickness:ar,value:en,variant:tn},dn=useUtilityClasses$F(fn),Cn={},Rn={},ax={};if(tn==="determinate"){const ox=2*Math.PI*((SIZE-ar)/2);Cn.strokeDasharray=ox.toFixed(3),ax["aria-valuenow"]=Math.round(en),Cn.strokeDashoffset=`${((100-en)/100*ox).toFixed(3)}px`,Rn.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,{className:clsx(dn.root,l),style:{width:d,height:d,...Rn,...Ct},ownerState:fn,ref:a,role:"progressbar",...ax,...on,children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:dn.svg,ownerState:fn,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:dn.circle,style:Cn,ownerState:fn,cx:SIZE,cy:SIZE,r:(SIZE-ar)/2,fill:"none",strokeWidth:ar})})})});function getButtonUtilityClass(t){return generateUtilityClass("MuiButton",t)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ButtonGroupContext=reactExports.createContext({}),ButtonGroupButtonContext=reactExports.createContext(void 0),useUtilityClasses$E=t=>{const{color:n,disableElevation:a,fullWidth:s,size:l,variant:u,loading:c,loadingPosition:d,classes:Ct}=t,ar={root:["root",c&&"loading",u,`${u}${capitalize(n)}`,`size${capitalize(l)}`,`${u}Size${capitalize(l)}`,`color${capitalize(n)}`,a&&"disableElevation",s&&"fullWidth",c&&`loadingPosition${capitalize(d)}`],startIcon:["icon","startIcon",`iconSize${capitalize(l)}`],endIcon:["icon","endIcon",`iconSize${capitalize(l)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},en=composeClasses(ar,getButtonUtilityClass,Ct);return{...Ct,...en}},commonIconStyles=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ButtonRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`${a.variant}${capitalize(a.color)}`],n[`size${capitalize(a.size)}`],n[`${a.variant}Size${capitalize(a.size)}`],a.color==="inherit"&&n.colorInherit,a.disableElevation&&n.disableElevation,a.fullWidth&&n.fullWidth,a.loading&&n.loading]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],a=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${buttonClasses.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${buttonClasses.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(t.vars||t).palette[s].main,"--variant-outlinedColor":(t.vars||t).palette[s].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[s].main,.5),"--variant-containedColor":(t.vars||t).palette[s].contrastText,"--variant-containedBg":(t.vars||t).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[s].dark,"--variant-textBg":t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[s].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${buttonClasses.loading}`]:{color:"transparent"}}}]}})),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.startIcon,a.loading&&n.startIconLoadingStart,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...commonIconStyles]})),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.endIcon,a.loading&&n.endIconLoadingEnd,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...commonIconStyles]})),ButtonLoadingIndicator=styled("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ButtonLoadingIconPlaceholder=styled("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Button=reactExports.forwardRef(function(n,a){const s=reactExports.useContext(ButtonGroupContext),l=reactExports.useContext(ButtonGroupButtonContext),u=resolveProps(s,n),c=useDefaultProps({props:u,name:"MuiButton"}),{children:d,color:Ct="primary",component:ar="button",className:en,disabled:tn=!1,disableElevation:on=!1,disableFocusRipple:fn=!1,endIcon:dn,focusVisibleClassName:Cn,fullWidth:Rn=!1,id:ax,loading:ox=null,loadingIndicator:sx,loadingPosition:lx="center",size:cx="medium",startIcon:fx,type:gx,variant:mx="text",...px}=c,hx=useId(ax),vx=sx??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":hx,color:"inherit",size:16}),yx={...c,color:Ct,component:ar,disabled:tn,disableElevation:on,disableFocusRipple:fn,fullWidth:Rn,loading:ox,loadingIndicator:vx,loadingPosition:lx,size:cx,type:gx,variant:mx},Sx=useUtilityClasses$E(yx),_x=(fx||ox&&lx==="start")&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:Sx.startIcon,ownerState:yx,children:fx||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:Sx.loadingIconPlaceholder,ownerState:yx})}),Ex=(dn||ox&&lx==="end")&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:Sx.endIcon,ownerState:yx,children:dn||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:Sx.loadingIconPlaceholder,ownerState:yx})}),bx=l||"",Ax=typeof ox=="boolean"?jsxRuntimeExports.jsx("span",{className:Sx.loadingWrapper,style:{display:"contents"},children:ox&&jsxRuntimeExports.jsx(ButtonLoadingIndicator,{className:Sx.loadingIndicator,ownerState:yx,children:vx})}):null;return jsxRuntimeExports.jsxs(ButtonRoot,{ownerState:yx,className:clsx(s.className,Sx.root,en,bx),component:ar,disabled:tn||ox,focusRipple:!fn,focusVisibleClassName:clsx(Sx.focusVisible,Cn),ref:a,type:gx,id:ox?hx:ax,...px,classes:Sx,children:[_x,lx!=="end"&&Ax,d,lx==="end"&&Ax,Ex]})});function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),useUtilityClasses$D=t=>{const{classes:n,disabled:a,color:s,edge:l,size:u,loading:c}=t,d={root:["root",c&&"loading",a&&"disabled",s!=="default"&&`color${capitalize(s)}`,l&&`edge${capitalize(l)}`,`size${capitalize(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return composeClasses(d,getIconButtonUtilityClass,n)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.loading&&n.loading,a.color!=="default"&&n[`color${capitalize(a.color)}`],a.edge&&n[`edge${capitalize(a.edge)}`],n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:n=>!n.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),memoTheme(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${iconButtonClasses.loading}`]:{color:"transparent"}}))),IconButtonLoadingIndicator=styled("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),IconButton=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiIconButton"}),{edge:l=!1,children:u,className:c,color:d="default",disabled:Ct=!1,disableFocusRipple:ar=!1,size:en="medium",id:tn,loading:on=null,loadingIndicator:fn,...dn}=s,Cn=useId(tn),Rn=fn??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":Cn,color:"inherit",size:16}),ax={...s,edge:l,color:d,disabled:Ct,disableFocusRipple:ar,loading:on,loadingIndicator:Rn,size:en},ox=useUtilityClasses$D(ax);return jsxRuntimeExports.jsxs(IconButtonRoot,{id:on?Cn:tn,className:clsx(ox.root,c),centerRipple:!0,focusRipple:!ar,disabled:Ct||on,ref:a,...dn,ownerState:ax,children:[typeof on=="boolean"&&jsxRuntimeExports.jsx("span",{className:ox.loadingWrapper,style:{display:"contents"},children:jsxRuntimeExports.jsx(IconButtonLoadingIndicator,{className:ox.loadingIndicator,ownerState:ax,children:on&&Rn})}),u]})}),DeleteIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),UndoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"})),RedoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}));function ThemeProviderNoVars({theme:t,...n}){const a=THEME_ID in t?t[THEME_ID]:void 0;return jsxRuntimeExports.jsx(ThemeProvider$1,{...n,themeId:a?THEME_ID:void 0,theme:a||t})}const defaultConfig={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:InternalCssVarsProvider}=createCssVarsProvider({themeId:THEME_ID,theme:()=>createTheme({cssVariables:!0}),colorSchemeStorageKey:defaultConfig.colorSchemeStorageKey,modeStorageKey:defaultConfig.modeStorageKey,defaultColorScheme:{light:defaultConfig.defaultLightColorScheme,dark:defaultConfig.defaultDarkColorScheme},resolveTheme:t=>{const n={...t,typography:createTypography(t.palette,t.typography)};return n.unstable_sx=function(s){return styleFunctionSx({sx:s,theme:this})},n}}),CssVarsProvider=InternalCssVarsProvider;function ThemeProvider({theme:t,...n}){const a=reactExports.useMemo(()=>{if(typeof t=="function")return t;const s=THEME_ID in t?t[THEME_ID]:t;return"colorSchemes"in s?null:"vars"in s?t:{...t,vars:null}},[t]);return a?jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:a,...n}):jsxRuntimeExports.jsx(CssVarsProvider,{theme:t,...n})}const boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});function getReactElementRef(t){return parseInt(reactExports.version,10)>=19?t?.props?.ref||null:t?.ref||null}const reflow=t=>t.scrollTop;function getTransitionProps(t,n){const{timeout:a,easing:s,style:l={}}=t;return{duration:l.transitionDuration??(typeof a=="number"?a:a[n.mode]||0),easing:l.transitionTimingFunction??(typeof s=="object"?s[n.mode]:s),delay:l.transitionDelay}}function getScale(t){return`scale(${t}, ${t**2})`}const styles$2={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(n,a){const{addEndListener:s,appear:l=!0,children:u,easing:c,in:d,onEnter:Ct,onEntered:ar,onEntering:en,onExit:tn,onExited:on,onExiting:fn,style:dn,timeout:Cn="auto",TransitionComponent:Rn=Transition,...ax}=n,ox=useTimeout(),sx=reactExports.useRef(),lx=useTheme(),cx=reactExports.useRef(null),fx=useForkRef(cx,getReactElementRef(u),a),gx=Ex=>bx=>{if(Ex){const Ax=cx.current;bx===void 0?Ex(Ax):Ex(Ax,bx)}},mx=gx(en),px=gx((Ex,bx)=>{reflow(Ex);const{duration:Ax,delay:Mx,easing:Rx}=getTransitionProps({style:dn,timeout:Cn,easing:c},{mode:"enter"});let Cx;Cn==="auto"?(Cx=lx.transitions.getAutoHeightDuration(Ex.clientHeight),sx.current=Cx):Cx=Ax,Ex.style.transition=[lx.transitions.create("opacity",{duration:Cx,delay:Mx}),lx.transitions.create("transform",{duration:isWebKit154?Cx:Cx*.666,delay:Mx,easing:Rx})].join(","),Ct&&Ct(Ex,bx)}),hx=gx(ar),vx=gx(fn),yx=gx(Ex=>{const{duration:bx,delay:Ax,easing:Mx}=getTransitionProps({style:dn,timeout:Cn,easing:c},{mode:"exit"});let Rx;Cn==="auto"?(Rx=lx.transitions.getAutoHeightDuration(Ex.clientHeight),sx.current=Rx):Rx=bx,Ex.style.transition=[lx.transitions.create("opacity",{duration:Rx,delay:Ax}),lx.transitions.create("transform",{duration:isWebKit154?Rx:Rx*.666,delay:isWebKit154?Ax:Ax||Rx*.333,easing:Mx})].join(","),Ex.style.opacity=0,Ex.style.transform=getScale(.75),tn&&tn(Ex)}),Sx=gx(on),_x=Ex=>{Cn==="auto"&&ox.start(sx.current||0,Ex),s&&s(cx.current,Ex)};return jsxRuntimeExports.jsx(Rn,{appear:l,in:d,nodeRef:cx,onEnter:px,onEntered:hx,onEntering:mx,onExit:yx,onExited:Sx,onExiting:vx,addEndListener:_x,timeout:Cn==="auto"?null:Cn,...ax,children:(Ex,{ownerState:bx,...Ax})=>reactExports.cloneElement(u,{style:{opacity:0,transform:getScale(.75),visibility:Ex==="exited"&&!d?"hidden":void 0,...styles$2[Ex],...dn,...u.props.style},ref:fx,...Ax})})});Grow&&(Grow.muiSupportAuto=!0);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,n){return t.concat([n+"-"+start$1,n+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,n){return t.concat([n,n+"-"+start$1,n+"-"+end$1])},[]),beforeRead="beforeRead",read$1="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read$1,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function isElement(t){var n=getWindow(t).Element;return t instanceof n||t instanceof Element}function isHTMLElement$1(t){var n=getWindow(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var n=getWindow(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function applyStyles(t){var n=t.state;Object.keys(n.elements).forEach(function(a){var s=n.styles[a]||{},l=n.attributes[a]||{},u=n.elements[a];!isHTMLElement$1(u)||!getNodeName(u)||(Object.assign(u.style,s),Object.keys(l).forEach(function(c){var d=l[c];d===!1?u.removeAttribute(c):u.setAttribute(c,d===!0?"":d)}))})}function effect$2(t){var n=t.state,a={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,a.popper),n.styles=a,n.elements.arrow&&Object.assign(n.elements.arrow.style,a.arrow),function(){Object.keys(n.elements).forEach(function(s){var l=n.elements[s],u=n.attributes[s]||{},c=Object.keys(n.styles.hasOwnProperty(s)?n.styles[s]:a[s]),d=c.reduce(function(Ct,ar){return Ct[ar]="",Ct},{});!isHTMLElement$1(l)||!getNodeName(l)||(Object.assign(l.style,d),Object.keys(u).forEach(function(Ct){l.removeAttribute(Ct)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max$3=Math.max,min$2=Math.min,round$5=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,n,a){n===void 0&&(n=!1),a===void 0&&(a=!1);var s=t.getBoundingClientRect(),l=1,u=1;n&&isHTMLElement$1(t)&&(l=t.offsetWidth>0&&round$5(s.width)/t.offsetWidth||1,u=t.offsetHeight>0&&round$5(s.height)/t.offsetHeight||1);var c=isElement(t)?getWindow(t):window,d=c.visualViewport,Ct=!isLayoutViewport()&&a,ar=(s.left+(Ct&&d?d.offsetLeft:0))/l,en=(s.top+(Ct&&d?d.offsetTop:0))/u,tn=s.width/l,on=s.height/u;return{width:tn,height:on,top:en,right:ar+tn,bottom:en+on,left:ar,x:ar,y:en}}function getLayoutRect$1(t){var n=getBoundingClientRect(t),a=t.offsetWidth,s=t.offsetHeight;return Math.abs(n.width-a)<=1&&(a=n.width),Math.abs(n.height-s)<=1&&(s=n.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:s}}function contains(t,n){var a=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(a&&isShadowRoot(a)){var s=n;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function getComputedStyle$2(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement$1(t)||getComputedStyle$2(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var n=/firefox/i.test(getUAString()),a=/Trident/i.test(getUAString());if(a&&isHTMLElement$1(t)){var s=getComputedStyle$2(t);if(s.position==="fixed")return null}var l=getParentNode(t);for(isShadowRoot(l)&&(l=l.host);isHTMLElement$1(l)&&["html","body"].indexOf(getNodeName(l))<0;){var u=getComputedStyle$2(l);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||n&&u.willChange==="filter"||n&&u.filter&&u.filter!=="none")return l;l=l.parentNode}return null}function getOffsetParent(t){for(var n=getWindow(t),a=getTrueOffsetParent(t);a&&isTableElement(a)&&getComputedStyle$2(a).position==="static";)a=getTrueOffsetParent(a);return a&&(getNodeName(a)==="html"||getNodeName(a)==="body"&&getComputedStyle$2(a).position==="static")?n:a||getContainingBlock(t)||n}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,n,a){return max$3(t,min$2(n,a))}function withinMaxClamp(t,n,a){var s=within(t,n,a);return s>a?a:s}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,n){return n.reduce(function(a,s){return a[s]=t,a},{})}var toPaddingObject=function(n,a){return n=typeof n=="function"?n(Object.assign({},a.rects,{placement:a.placement})):n,mergePaddingObject(typeof n!="number"?n:expandToHashMap(n,basePlacements))};function arrow(t){var n,a=t.state,s=t.name,l=t.options,u=a.elements.arrow,c=a.modifiersData.popperOffsets,d=getBasePlacement(a.placement),Ct=getMainAxisFromPlacement(d),ar=[left,right].indexOf(d)>=0,en=ar?"height":"width";if(!(!u||!c)){var tn=toPaddingObject(l.padding,a),on=getLayoutRect$1(u),fn=Ct==="y"?top:left,dn=Ct==="y"?bottom:right,Cn=a.rects.reference[en]+a.rects.reference[Ct]-c[Ct]-a.rects.popper[en],Rn=c[Ct]-a.rects.reference[Ct],ax=getOffsetParent(u),ox=ax?Ct==="y"?ax.clientHeight||0:ax.clientWidth||0:0,sx=Cn/2-Rn/2,lx=tn[fn],cx=ox-on[en]-tn[dn],fx=ox/2-on[en]/2+sx,gx=within(lx,fx,cx),mx=Ct;a.modifiersData[s]=(n={},n[mx]=gx,n.centerOffset=gx-fx,n)}}function effect$1(t){var n=t.state,a=t.options,s=a.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=n.elements.popper.querySelector(l),!l)||contains(n.elements.popper,l)&&(n.elements.arrow=l))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,n){var a=t.x,s=t.y,l=n.devicePixelRatio||1;return{x:round$5(a*l)/l||0,y:round$5(s*l)/l||0}}function mapToStyles(t){var n,a=t.popper,s=t.popperRect,l=t.placement,u=t.variation,c=t.offsets,d=t.position,Ct=t.gpuAcceleration,ar=t.adaptive,en=t.roundOffsets,tn=t.isFixed,on=c.x,fn=on===void 0?0:on,dn=c.y,Cn=dn===void 0?0:dn,Rn=typeof en=="function"?en({x:fn,y:Cn}):{x:fn,y:Cn};fn=Rn.x,Cn=Rn.y;var ax=c.hasOwnProperty("x"),ox=c.hasOwnProperty("y"),sx=left,lx=top,cx=window;if(ar){var fx=getOffsetParent(a),gx="clientHeight",mx="clientWidth";if(fx===getWindow(a)&&(fx=getDocumentElement(a),getComputedStyle$2(fx).position!=="static"&&d==="absolute"&&(gx="scrollHeight",mx="scrollWidth")),fx=fx,l===top||(l===left||l===right)&&u===end$1){lx=bottom;var px=tn&&fx===cx&&cx.visualViewport?cx.visualViewport.height:fx[gx];Cn-=px-s.height,Cn*=Ct?1:-1}if(l===left||(l===top||l===bottom)&&u===end$1){sx=right;var hx=tn&&fx===cx&&cx.visualViewport?cx.visualViewport.width:fx[mx];fn-=hx-s.width,fn*=Ct?1:-1}}var vx=Object.assign({position:d},ar&&unsetSides),yx=en===!0?roundOffsetsByDPR({x:fn,y:Cn},getWindow(a)):{x:fn,y:Cn};if(fn=yx.x,Cn=yx.y,Ct){var Sx;return Object.assign({},vx,(Sx={},Sx[lx]=ox?"0":"",Sx[sx]=ax?"0":"",Sx.transform=(cx.devicePixelRatio||1)<=1?"translate("+fn+"px, "+Cn+"px)":"translate3d("+fn+"px, "+Cn+"px, 0)",Sx))}return Object.assign({},vx,(n={},n[lx]=ox?Cn+"px":"",n[sx]=ax?fn+"px":"",n.transform="",n))}function computeStyles(t){var n=t.state,a=t.options,s=a.gpuAcceleration,l=s===void 0?!0:s,u=a.adaptive,c=u===void 0?!0:u,d=a.roundOffsets,Ct=d===void 0?!0:d,ar={placement:getBasePlacement(n.placement),variation:getVariation(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:l,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,mapToStyles(Object.assign({},ar,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:c,roundOffsets:Ct})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,mapToStyles(Object.assign({},ar,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ct})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var n=t.state,a=t.instance,s=t.options,l=s.scroll,u=l===void 0?!0:l,c=s.resize,d=c===void 0?!0:c,Ct=getWindow(n.elements.popper),ar=[].concat(n.scrollParents.reference,n.scrollParents.popper);return u&&ar.forEach(function(en){en.addEventListener("scroll",a.update,passive)}),d&&Ct.addEventListener("resize",a.update,passive),function(){u&&ar.forEach(function(en){en.removeEventListener("scroll",a.update,passive)}),d&&Ct.removeEventListener("resize",a.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(n){return hash$1[n]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(n){return hash[n]})}function getWindowScroll(t){var n=getWindow(t),a=n.pageXOffset,s=n.pageYOffset;return{scrollLeft:a,scrollTop:s}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,n){var a=getWindow(t),s=getDocumentElement(t),l=a.visualViewport,u=s.clientWidth,c=s.clientHeight,d=0,Ct=0;if(l){u=l.width,c=l.height;var ar=isLayoutViewport();(ar||!ar&&n==="fixed")&&(d=l.offsetLeft,Ct=l.offsetTop)}return{width:u,height:c,x:d+getWindowScrollBarX(t),y:Ct}}function getDocumentRect(t){var n,a=getDocumentElement(t),s=getWindowScroll(t),l=(n=t.ownerDocument)==null?void 0:n.body,u=max$3(a.scrollWidth,a.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),c=max$3(a.scrollHeight,a.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),d=-s.scrollLeft+getWindowScrollBarX(t),Ct=-s.scrollTop;return getComputedStyle$2(l||a).direction==="rtl"&&(d+=max$3(a.clientWidth,l?l.clientWidth:0)-u),{width:u,height:c,x:d,y:Ct}}function isScrollParent(t){var n=getComputedStyle$2(t),a=n.overflow,s=n.overflowX,l=n.overflowY;return/auto|scroll|overlay|hidden/.test(a+l+s)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement$1(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,n){var a;n===void 0&&(n=[]);var s=getScrollParent(t),l=s===((a=t.ownerDocument)==null?void 0:a.body),u=getWindow(s),c=l?[u].concat(u.visualViewport||[],isScrollParent(s)?s:[]):s,d=n.concat(c);return l?d:d.concat(listScrollParents(getParentNode(c)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,n){var a=getBoundingClientRect(t,!1,n==="fixed");return a.top=a.top+t.clientTop,a.left=a.left+t.clientLeft,a.bottom=a.top+t.clientHeight,a.right=a.left+t.clientWidth,a.width=t.clientWidth,a.height=t.clientHeight,a.x=a.left,a.y=a.top,a}function getClientRectFromMixedType(t,n,a){return n===viewport?rectToClientRect(getViewportRect(t,a)):isElement(n)?getInnerBoundingClientRect(n,a):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var n=listScrollParents(getParentNode(t)),a=["absolute","fixed"].indexOf(getComputedStyle$2(t).position)>=0,s=a&&isHTMLElement$1(t)?getOffsetParent(t):t;return isElement(s)?n.filter(function(l){return isElement(l)&&contains(l,s)&&getNodeName(l)!=="body"}):[]}function getClippingRect(t,n,a,s){var l=n==="clippingParents"?getClippingParents(t):[].concat(n),u=[].concat(l,[a]),c=u[0],d=u.reduce(function(Ct,ar){var en=getClientRectFromMixedType(t,ar,s);return Ct.top=max$3(en.top,Ct.top),Ct.right=min$2(en.right,Ct.right),Ct.bottom=min$2(en.bottom,Ct.bottom),Ct.left=max$3(en.left,Ct.left),Ct},getClientRectFromMixedType(t,c,s));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function computeOffsets(t){var n=t.reference,a=t.element,s=t.placement,l=s?getBasePlacement(s):null,u=s?getVariation(s):null,c=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2,Ct;switch(l){case top:Ct={x:c,y:n.y-a.height};break;case bottom:Ct={x:c,y:n.y+n.height};break;case right:Ct={x:n.x+n.width,y:d};break;case left:Ct={x:n.x-a.width,y:d};break;default:Ct={x:n.x,y:n.y}}var ar=l?getMainAxisFromPlacement(l):null;if(ar!=null){var en=ar==="y"?"height":"width";switch(u){case start$1:Ct[ar]=Ct[ar]-(n[en]/2-a[en]/2);break;case end$1:Ct[ar]=Ct[ar]+(n[en]/2-a[en]/2);break}}return Ct}function detectOverflow(t,n){n===void 0&&(n={});var a=n,s=a.placement,l=s===void 0?t.placement:s,u=a.strategy,c=u===void 0?t.strategy:u,d=a.boundary,Ct=d===void 0?clippingParents:d,ar=a.rootBoundary,en=ar===void 0?viewport:ar,tn=a.elementContext,on=tn===void 0?popper:tn,fn=a.altBoundary,dn=fn===void 0?!1:fn,Cn=a.padding,Rn=Cn===void 0?0:Cn,ax=mergePaddingObject(typeof Rn!="number"?Rn:expandToHashMap(Rn,basePlacements)),ox=on===popper?reference:popper,sx=t.rects.popper,lx=t.elements[dn?ox:on],cx=getClippingRect(isElement(lx)?lx:lx.contextElement||getDocumentElement(t.elements.popper),Ct,en,c),fx=getBoundingClientRect(t.elements.reference),gx=computeOffsets({reference:fx,element:sx,placement:l}),mx=rectToClientRect(Object.assign({},sx,gx)),px=on===popper?mx:fx,hx={top:cx.top-px.top+ax.top,bottom:px.bottom-cx.bottom+ax.bottom,left:cx.left-px.left+ax.left,right:px.right-cx.right+ax.right},vx=t.modifiersData.offset;if(on===popper&&vx){var yx=vx[l];Object.keys(hx).forEach(function(Sx){var _x=[right,bottom].indexOf(Sx)>=0?1:-1,Ex=[top,bottom].indexOf(Sx)>=0?"y":"x";hx[Sx]+=yx[Ex]*_x})}return hx}function computeAutoPlacement(t,n){n===void 0&&(n={});var a=n,s=a.placement,l=a.boundary,u=a.rootBoundary,c=a.padding,d=a.flipVariations,Ct=a.allowedAutoPlacements,ar=Ct===void 0?placements:Ct,en=getVariation(s),tn=en?d?variationPlacements:variationPlacements.filter(function(dn){return getVariation(dn)===en}):basePlacements,on=tn.filter(function(dn){return ar.indexOf(dn)>=0});on.length===0&&(on=tn);var fn=on.reduce(function(dn,Cn){return dn[Cn]=detectOverflow(t,{placement:Cn,boundary:l,rootBoundary:u,padding:c})[getBasePlacement(Cn)],dn},{});return Object.keys(fn).sort(function(dn,Cn){return fn[dn]-fn[Cn]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var n=getOppositePlacement(t);return[getOppositeVariationPlacement(t),n,getOppositeVariationPlacement(n)]}function flip(t){var n=t.state,a=t.options,s=t.name;if(!n.modifiersData[s]._skip){for(var l=a.mainAxis,u=l===void 0?!0:l,c=a.altAxis,d=c===void 0?!0:c,Ct=a.fallbackPlacements,ar=a.padding,en=a.boundary,tn=a.rootBoundary,on=a.altBoundary,fn=a.flipVariations,dn=fn===void 0?!0:fn,Cn=a.allowedAutoPlacements,Rn=n.options.placement,ax=getBasePlacement(Rn),ox=ax===Rn,sx=Ct||(ox||!dn?[getOppositePlacement(Rn)]:getExpandedFallbackPlacements(Rn)),lx=[Rn].concat(sx).reduce(function(Px,Nx){return Px.concat(getBasePlacement(Nx)===auto?computeAutoPlacement(n,{placement:Nx,boundary:en,rootBoundary:tn,padding:ar,flipVariations:dn,allowedAutoPlacements:Cn}):Nx)},[]),cx=n.rects.reference,fx=n.rects.popper,gx=new Map,mx=!0,px=lx[0],hx=0;hx<lx.length;hx++){var vx=lx[hx],yx=getBasePlacement(vx),Sx=getVariation(vx)===start$1,_x=[top,bottom].indexOf(yx)>=0,Ex=_x?"width":"height",bx=detectOverflow(n,{placement:vx,boundary:en,rootBoundary:tn,altBoundary:on,padding:ar}),Ax=_x?Sx?right:left:Sx?bottom:top;cx[Ex]>fx[Ex]&&(Ax=getOppositePlacement(Ax));var Mx=getOppositePlacement(Ax),Rx=[];if(u&&Rx.push(bx[yx]<=0),d&&Rx.push(bx[Ax]<=0,bx[Mx]<=0),Rx.every(function(Px){return Px})){px=vx,mx=!1;break}gx.set(vx,Rx)}if(mx)for(var Cx=dn?3:1,Lx=function(Nx){var Bx=lx.find(function($x){var Vx=gx.get($x);if(Vx)return Vx.slice(0,Nx).every(function(Gx){return Gx})});if(Bx)return px=Bx,"break"},qx=Cx;qx>0;qx--){var Ix=Lx(qx);if(Ix==="break")break}n.placement!==px&&(n.modifiersData[s]._skip=!0,n.placement=px,n.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,n,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-n.height-a.y,right:t.right-n.width+a.x,bottom:t.bottom-n.height+a.y,left:t.left-n.width-a.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(n){return t[n]>=0})}function hide(t){var n=t.state,a=t.name,s=n.rects.reference,l=n.rects.popper,u=n.modifiersData.preventOverflow,c=detectOverflow(n,{elementContext:"reference"}),d=detectOverflow(n,{altBoundary:!0}),Ct=getSideOffsets(c,s),ar=getSideOffsets(d,l,u),en=isAnySideFullyClipped(Ct),tn=isAnySideFullyClipped(ar);n.modifiersData[a]={referenceClippingOffsets:Ct,popperEscapeOffsets:ar,isReferenceHidden:en,hasPopperEscaped:tn},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":en,"data-popper-escaped":tn})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,n,a){var s=getBasePlacement(t),l=[left,top].indexOf(s)>=0?-1:1,u=typeof a=="function"?a(Object.assign({},n,{placement:t})):a,c=u[0],d=u[1];return c=c||0,d=(d||0)*l,[left,right].indexOf(s)>=0?{x:d,y:c}:{x:c,y:d}}function offset(t){var n=t.state,a=t.options,s=t.name,l=a.offset,u=l===void 0?[0,0]:l,c=placements.reduce(function(en,tn){return en[tn]=distanceAndSkiddingToXY(tn,n.rects,u),en},{}),d=c[n.placement],Ct=d.x,ar=d.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=Ct,n.modifiersData.popperOffsets.y+=ar),n.modifiersData[s]=c}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var n=t.state,a=t.name;n.modifiersData[a]=computeOffsets({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var n=t.state,a=t.options,s=t.name,l=a.mainAxis,u=l===void 0?!0:l,c=a.altAxis,d=c===void 0?!1:c,Ct=a.boundary,ar=a.rootBoundary,en=a.altBoundary,tn=a.padding,on=a.tether,fn=on===void 0?!0:on,dn=a.tetherOffset,Cn=dn===void 0?0:dn,Rn=detectOverflow(n,{boundary:Ct,rootBoundary:ar,padding:tn,altBoundary:en}),ax=getBasePlacement(n.placement),ox=getVariation(n.placement),sx=!ox,lx=getMainAxisFromPlacement(ax),cx=getAltAxis(lx),fx=n.modifiersData.popperOffsets,gx=n.rects.reference,mx=n.rects.popper,px=typeof Cn=="function"?Cn(Object.assign({},n.rects,{placement:n.placement})):Cn,hx=typeof px=="number"?{mainAxis:px,altAxis:px}:Object.assign({mainAxis:0,altAxis:0},px),vx=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,yx={x:0,y:0};if(fx){if(u){var Sx,_x=lx==="y"?top:left,Ex=lx==="y"?bottom:right,bx=lx==="y"?"height":"width",Ax=fx[lx],Mx=Ax+Rn[_x],Rx=Ax-Rn[Ex],Cx=fn?-mx[bx]/2:0,Lx=ox===start$1?gx[bx]:mx[bx],qx=ox===start$1?-mx[bx]:-gx[bx],Ix=n.elements.arrow,Px=fn&&Ix?getLayoutRect$1(Ix):{width:0,height:0},Nx=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Bx=Nx[_x],$x=Nx[Ex],Vx=within(0,gx[bx],Px[bx]),Gx=sx?gx[bx]/2-Cx-Vx-Bx-hx.mainAxis:Lx-Vx-Bx-hx.mainAxis,Zx=sx?-gx[bx]/2+Cx+Vx+$x+hx.mainAxis:qx+Vx+$x+hx.mainAxis,jx=n.elements.arrow&&getOffsetParent(n.elements.arrow),Hx=jx?lx==="y"?jx.clientTop||0:jx.clientLeft||0:0,iE=(Sx=vx?.[lx])!=null?Sx:0,Xx=Ax+Gx-iE-Hx,rE=Ax+Zx-iE,uE=within(fn?min$2(Mx,Xx):Mx,Ax,fn?max$3(Rx,rE):Rx);fx[lx]=uE,yx[lx]=uE-Ax}if(d){var aE,Kx=lx==="x"?top:left,ME=lx==="x"?bottom:right,IE=fx[cx],wE=cx==="y"?"height":"width",bE=IE+Rn[Kx],UE=IE-Rn[ME],CE=[top,left].indexOf(ax)!==-1,YE=(aE=vx?.[cx])!=null?aE:0,Ox=CE?bE:IE-gx[wE]-mx[wE]-YE+hx.altAxis,Fx=CE?IE+gx[wE]+mx[wE]-YE-hx.altAxis:UE,Wx=fn&&CE?withinMaxClamp(Ox,IE,Fx):within(fn?Ox:bE,IE,fn?Fx:UE);fx[cx]=Wx,yx[cx]=Wx-IE}n.modifiersData[s]=yx}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement$1(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var n=t.getBoundingClientRect(),a=round$5(n.width)/t.offsetWidth||1,s=round$5(n.height)/t.offsetHeight||1;return a!==1||s!==1}function getCompositeRect(t,n,a){a===void 0&&(a=!1);var s=isHTMLElement$1(n),l=isHTMLElement$1(n)&&isElementScaled(n),u=getDocumentElement(n),c=getBoundingClientRect(t,l,a),d={scrollLeft:0,scrollTop:0},Ct={x:0,y:0};return(s||!s&&!a)&&((getNodeName(n)!=="body"||isScrollParent(u))&&(d=getNodeScroll(n)),isHTMLElement$1(n)?(Ct=getBoundingClientRect(n,!0),Ct.x+=n.clientLeft,Ct.y+=n.clientTop):u&&(Ct.x=getWindowScrollBarX(u))),{x:c.left+d.scrollLeft-Ct.x,y:c.top+d.scrollTop-Ct.y,width:c.width,height:c.height}}function order(t){var n=new Map,a=new Set,s=[];t.forEach(function(u){n.set(u.name,u)});function l(u){a.add(u.name);var c=[].concat(u.requires||[],u.requiresIfExists||[]);c.forEach(function(d){if(!a.has(d)){var Ct=n.get(d);Ct&&l(Ct)}}),s.push(u)}return t.forEach(function(u){a.has(u.name)||l(u)}),s}function orderModifiers(t){var n=order(t);return modifierPhases.reduce(function(a,s){return a.concat(n.filter(function(l){return l.phase===s}))},[])}function debounce$1(t){var n;return function(){return n||(n=new Promise(function(a){Promise.resolve().then(function(){n=void 0,a(t())})})),n}}function mergeByName(t){var n=t.reduce(function(a,s){var l=a[s.name];return a[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,a},{});return Object.keys(n).map(function(a){return n[a]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return!n.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var n=t,a=n.defaultModifiers,s=a===void 0?[]:a,l=n.defaultOptions,u=l===void 0?DEFAULT_OPTIONS:l;return function(d,Ct,ar){ar===void 0&&(ar=u);var en={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,u),modifiersData:{},elements:{reference:d,popper:Ct},attributes:{},styles:{}},tn=[],on=!1,fn={state:en,setOptions:function(ax){var ox=typeof ax=="function"?ax(en.options):ax;Cn(),en.options=Object.assign({},u,en.options,ox),en.scrollParents={reference:isElement(d)?listScrollParents(d):d.contextElement?listScrollParents(d.contextElement):[],popper:listScrollParents(Ct)};var sx=orderModifiers(mergeByName([].concat(s,en.options.modifiers)));return en.orderedModifiers=sx.filter(function(lx){return lx.enabled}),dn(),fn.update()},forceUpdate:function(){if(!on){var ax=en.elements,ox=ax.reference,sx=ax.popper;if(areValidElements(ox,sx)){en.rects={reference:getCompositeRect(ox,getOffsetParent(sx),en.options.strategy==="fixed"),popper:getLayoutRect$1(sx)},en.reset=!1,en.placement=en.options.placement,en.orderedModifiers.forEach(function(hx){return en.modifiersData[hx.name]=Object.assign({},hx.data)});for(var lx=0;lx<en.orderedModifiers.length;lx++){if(en.reset===!0){en.reset=!1,lx=-1;continue}var cx=en.orderedModifiers[lx],fx=cx.fn,gx=cx.options,mx=gx===void 0?{}:gx,px=cx.name;typeof fx=="function"&&(en=fx({state:en,options:mx,name:px,instance:fn})||en)}}}},update:debounce$1(function(){return new Promise(function(Rn){fn.forceUpdate(),Rn(en)})}),destroy:function(){Cn(),on=!0}};if(!areValidElements(d,Ct))return fn;fn.setOptions(ar).then(function(Rn){!on&&ar.onFirstUpdate&&ar.onFirstUpdate(Rn)});function dn(){en.orderedModifiers.forEach(function(Rn){var ax=Rn.name,ox=Rn.options,sx=ox===void 0?{}:ox,lx=Rn.effect;if(typeof lx=="function"){var cx=lx({state:en,name:ax,instance:fn,options:sx}),fx=function(){};tn.push(cx||fx)}})}function Cn(){tn.forEach(function(Rn){return Rn()}),tn=[]}return fn}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function isHostComponent$1(t){return typeof t=="string"}function appendOwnerState(t,n,a){return t===void 0||isHostComponent$1(t)?n:{...n,ownerState:{...n.ownerState,...a}}}function extractEventHandlers(t,n=[]){if(t===void 0)return{};const a={};return Object.keys(t).filter(s=>s.match(/^on[A-Z]/)&&typeof t[s]=="function"&&!n.includes(s)).forEach(s=>{a[s]=t[s]}),a}function omitEventHandlers(t){if(t===void 0)return{};const n={};return Object.keys(t).filter(a=>!(a.match(/^on[A-Z]/)&&typeof t[a]=="function")).forEach(a=>{n[a]=t[a]}),n}function mergeSlotProps(t){const{getSlotProps:n,additionalProps:a,externalSlotProps:s,externalForwardedProps:l,className:u}=t;if(!n){const fn=clsx(a?.className,u,l?.className,s?.className),dn={...a?.style,...l?.style,...s?.style},Cn={...a,...l,...s};return fn.length>0&&(Cn.className=fn),Object.keys(dn).length>0&&(Cn.style=dn),{props:Cn,internalRef:void 0}}const c=extractEventHandlers({...l,...s}),d=omitEventHandlers(s),Ct=omitEventHandlers(l),ar=n(c),en=clsx(ar?.className,a?.className,u,l?.className,s?.className),tn={...ar?.style,...a?.style,...l?.style,...s?.style},on={...ar,...a,...Ct,...d};return en.length>0&&(on.className=en),Object.keys(tn).length>0&&(on.style=tn),{props:on,internalRef:ar.ref}}function resolveComponentProps(t,n,a){return typeof t=="function"?t(n,a):t}function useSlotProps(t){const{elementType:n,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:l=!1,...u}=t,c=l?{}:resolveComponentProps(a,s),{props:d,internalRef:Ct}=mergeSlotProps({...u,externalSlotProps:c}),ar=useForkRef(Ct,c?.ref,t.additionalProps?.ref);return appendOwnerState(n,{...d,ref:ar},s)}function getContainer$1(t){return typeof t=="function"?t():t}const Portal=reactExports.forwardRef(function(n,a){const{children:s,container:l,disablePortal:u=!1}=n,[c,d]=reactExports.useState(null),Ct=useForkRef(reactExports.isValidElement(s)?getReactElementRef(s):null,a);if(useEnhancedEffect(()=>{u||d(getContainer$1(l)||document.body)},[l,u]),useEnhancedEffect(()=>{if(c&&!u)return setRef(a,c),()=>{setRef(a,null)}},[a,c,u]),u){if(reactExports.isValidElement(s)){const ar={ref:Ct};return reactExports.cloneElement(s,ar)}return s}return c&&reactDomExports.createPortal(s,c)});function getPopperUtilityClass(t){return generateUtilityClass("MuiPopper",t)}generateUtilityClasses("MuiPopper",["root"]);function flipPlacement(t,n){if(n==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function resolveAnchorEl$1(t){return typeof t=="function"?t():t}function isHTMLElement(t){return t.nodeType!==void 0}const useUtilityClasses$C=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getPopperUtilityClass,n)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(n,a){const{anchorEl:s,children:l,direction:u,disablePortal:c,modifiers:d,open:Ct,placement:ar,popperOptions:en,popperRef:tn,slotProps:on={},slots:fn={},TransitionProps:dn,ownerState:Cn,...Rn}=n,ax=reactExports.useRef(null),ox=useForkRef(ax,a),sx=reactExports.useRef(null),lx=useForkRef(sx,tn),cx=reactExports.useRef(lx);useEnhancedEffect(()=>{cx.current=lx},[lx]),reactExports.useImperativeHandle(tn,()=>sx.current,[]);const fx=flipPlacement(ar,u),[gx,mx]=reactExports.useState(fx),[px,hx]=reactExports.useState(resolveAnchorEl$1(s));reactExports.useEffect(()=>{sx.current&&sx.current.forceUpdate()}),reactExports.useEffect(()=>{s&&hx(resolveAnchorEl$1(s))},[s]),useEnhancedEffect(()=>{if(!px||!Ct)return;const Ex=Mx=>{mx(Mx.placement)};let bx=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Mx})=>{Ex(Mx)}}];d!=null&&(bx=bx.concat(d)),en&&en.modifiers!=null&&(bx=bx.concat(en.modifiers));const Ax=createPopper(px,ax.current,{placement:fx,...en,modifiers:bx});return cx.current(Ax),()=>{Ax.destroy(),cx.current(null)}},[px,c,d,Ct,en,fx]);const vx={placement:gx};dn!==null&&(vx.TransitionProps=dn);const yx=useUtilityClasses$C(n),Sx=fn.root??"div",_x=useSlotProps({elementType:Sx,externalSlotProps:on.root,externalForwardedProps:Rn,additionalProps:{role:"tooltip",ref:ox},ownerState:n,className:yx.root});return jsxRuntimeExports.jsx(Sx,{..._x,children:typeof l=="function"?l(vx):l})}),Popper$1=reactExports.forwardRef(function(n,a){const{anchorEl:s,children:l,container:u,direction:c="ltr",disablePortal:d=!1,keepMounted:Ct=!1,modifiers:ar,open:en,placement:tn="bottom",popperOptions:on=defaultPopperOptions,popperRef:fn,style:dn,transition:Cn=!1,slotProps:Rn={},slots:ax={},...ox}=n,[sx,lx]=reactExports.useState(!0),cx=()=>{lx(!1)},fx=()=>{lx(!0)};if(!Ct&&!en&&(!Cn||sx))return null;let gx;if(u)gx=u;else if(s){const hx=resolveAnchorEl$1(s);gx=hx&&isHTMLElement(hx)?ownerDocument(hx).body:ownerDocument(null).body}const mx=!en&&Ct&&(!Cn||sx)?"none":void 0,px=Cn?{in:en,onEnter:cx,onExited:fx}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:d,container:gx,children:jsxRuntimeExports.jsx(PopperTooltip,{anchorEl:s,direction:c,disablePortal:d,modifiers:ar,ref:a,open:Cn?!sx:en,placement:tn,popperOptions:on,popperRef:fn,slotProps:Rn,slots:ax,...ox,style:{position:"fixed",top:0,left:0,display:mx,...dn},TransitionProps:px,children:l})})}),PopperRoot=styled(Popper$1,{name:"MuiPopper",slot:"Root"})({}),Popper=reactExports.forwardRef(function(n,a){const s=useRtl(),l=useDefaultProps({props:n,name:"MuiPopper"}),{anchorEl:u,component:c,components:d,componentsProps:Ct,container:ar,disablePortal:en,keepMounted:tn,modifiers:on,open:fn,placement:dn,popperOptions:Cn,popperRef:Rn,transition:ax,slots:ox,slotProps:sx,...lx}=l,cx=ox?.root??d?.Root,fx={anchorEl:u,container:ar,disablePortal:en,keepMounted:tn,modifiers:on,open:fn,placement:dn,popperOptions:Cn,popperRef:Rn,transition:ax,...lx};return jsxRuntimeExports.jsx(PopperRoot,{as:c,direction:s?"rtl":"ltr",slots:{root:cx},slotProps:sx??Ct,...fx,ref:a})});function useSlot(t,n){const{className:a,elementType:s,ownerState:l,externalForwardedProps:u,internalForwardedProps:c,shouldForwardComponentProp:d=!1,...Ct}=n,{component:ar,slots:en={[t]:void 0},slotProps:tn={[t]:void 0},...on}=u,fn=en[t]||s,dn=resolveComponentProps(tn[t],l),{props:{component:Cn,...Rn},internalRef:ax}=mergeSlotProps({className:a,...Ct,externalForwardedProps:t==="root"?on:void 0,externalSlotProps:dn}),ox=useForkRef(ax,dn?.ref,n.ref),sx=t==="root"?Cn||ar:Cn,lx=appendOwnerState(fn,{...t==="root"&&!ar&&!en[t]&&c,...t!=="root"&&!en[t]&&c,...Rn,...sx&&!d&&{as:sx},...sx&&d&&{component:sx},ref:ox},l);return[fn,lx]}function getTooltipUtilityClass(t){return generateUtilityClass("MuiTooltip",t)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function round$4(t){return Math.round(t*1e5)/1e5}const useUtilityClasses$B=t=>{const{classes:n,disableInteractive:a,arrow:s,touch:l,placement:u}=t,c={popper:["popper",!a&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",l&&"touch",`tooltipPlacement${capitalize(u.split("-")[0])}`],arrow:["arrow"]};return composeClasses(c,getTooltipUtilityClass,n)},TooltipPopper=styled(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.popper,!a.disableInteractive&&n.popperInteractive,a.arrow&&n.popperArrow,!a.open&&n.popperClose]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:n})=>!n.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:n})=>!n,style:{pointerEvents:"none"}},{props:({ownerState:n})=>n.arrow,style:{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.tooltip,a.touch&&n.touch,a.arrow&&n.tooltipArrow,n[`tooltipPlacement${capitalize(a.placement.split("-")[0])}`]]}})(memoTheme(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:n})=>n.arrow,style:{position:"relative",margin:0}},{props:({ownerState:n})=>n.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${round$4(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:n})=>!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:n})=>!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:n})=>!!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:n})=>!!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow"})(memoTheme(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(t,n){return(a,...s)=>{n&&n(a,...s),t(a,...s)}}const Tooltip=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTooltip"}),{arrow:l=!1,children:u,classes:c,components:d={},componentsProps:Ct={},describeChild:ar=!1,disableFocusListener:en=!1,disableHoverListener:tn=!1,disableInteractive:on=!1,disableTouchListener:fn=!1,enterDelay:dn=100,enterNextDelay:Cn=0,enterTouchDelay:Rn=700,followCursor:ax=!1,id:ox,leaveDelay:sx=0,leaveTouchDelay:lx=1500,onClose:cx,onOpen:fx,open:gx,placement:mx="bottom",PopperComponent:px,PopperProps:hx={},slotProps:vx={},slots:yx={},title:Sx,TransitionComponent:_x,TransitionProps:Ex,...bx}=s,Ax=reactExports.isValidElement(u)?u:jsxRuntimeExports.jsx("span",{children:u}),Mx=useTheme(),Rx=useRtl(),[Cx,Lx]=reactExports.useState(),[qx,Ix]=reactExports.useState(null),Px=reactExports.useRef(!1),Nx=on||ax,Bx=useTimeout(),$x=useTimeout(),Vx=useTimeout(),Gx=useTimeout(),[Zx,jx]=useControlled({controlled:gx,default:!1,name:"Tooltip",state:"open"});let Hx=Zx;const iE=useId(ox),Xx=reactExports.useRef(),rE=useEventCallback(()=>{Xx.current!==void 0&&(document.body.style.WebkitUserSelect=Xx.current,Xx.current=void 0),Gx.clear()});reactExports.useEffect(()=>rE,[rE]);const uE=eE=>{hystersisTimer.clear(),hystersisOpen=!0,jx(!0),fx&&!Hx&&fx(eE)},aE=useEventCallback(eE=>{hystersisTimer.start(800+sx,()=>{hystersisOpen=!1}),jx(!1),cx&&Hx&&cx(eE),Bx.start(Mx.transitions.duration.shortest,()=>{Px.current=!1})}),Kx=eE=>{Px.current&&eE.type!=="touchstart"||(Cx&&Cx.removeAttribute("title"),$x.clear(),Vx.clear(),dn||hystersisOpen&&Cn?$x.start(hystersisOpen?Cn:dn,()=>{uE(eE)}):uE(eE))},ME=eE=>{$x.clear(),Vx.start(sx,()=>{aE(eE)})},[,IE]=reactExports.useState(!1),wE=eE=>{isFocusVisible(eE.target)||(IE(!1),ME(eE))},bE=eE=>{Cx||Lx(eE.currentTarget),isFocusVisible(eE.target)&&(IE(!0),Kx(eE))},UE=eE=>{Px.current=!0;const vE=Ax.props;vE.onTouchStart&&vE.onTouchStart(eE)},CE=eE=>{UE(eE),Vx.clear(),Bx.clear(),rE(),Xx.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Gx.start(Rn,()=>{document.body.style.WebkitUserSelect=Xx.current,Kx(eE)})},YE=eE=>{Ax.props.onTouchEnd&&Ax.props.onTouchEnd(eE),rE(),Vx.start(lx,()=>{aE(eE)})};reactExports.useEffect(()=>{if(!Hx)return;function eE(vE){vE.key==="Escape"&&aE(vE)}return document.addEventListener("keydown",eE),()=>{document.removeEventListener("keydown",eE)}},[aE,Hx]);const Ox=useForkRef(getReactElementRef(Ax),Lx,a);!Sx&&Sx!==0&&(Hx=!1);const Fx=reactExports.useRef(),Wx=eE=>{const vE=Ax.props;vE.onMouseMove&&vE.onMouseMove(eE),cursorPosition={x:eE.clientX,y:eE.clientY},Fx.current&&Fx.current.update()},Qx={},oE=typeof Sx=="string";ar?(Qx.title=!Hx&&oE&&!tn?Sx:null,Qx["aria-describedby"]=Hx?iE:null):(Qx["aria-label"]=oE?Sx:null,Qx["aria-labelledby"]=Hx&&!oE?iE:null);const tE={...Qx,...bx,...Ax.props,className:clsx(bx.className,Ax.props.className),onTouchStart:UE,ref:Ox,...ax?{onMouseMove:Wx}:{}},mE={};fn||(tE.onTouchStart=CE,tE.onTouchEnd=YE),tn||(tE.onMouseOver=composeEventHandler(Kx,tE.onMouseOver),tE.onMouseLeave=composeEventHandler(ME,tE.onMouseLeave),Nx||(mE.onMouseOver=Kx,mE.onMouseLeave=ME)),en||(tE.onFocus=composeEventHandler(bE,tE.onFocus),tE.onBlur=composeEventHandler(wE,tE.onBlur),Nx||(mE.onFocus=bE,mE.onBlur=wE));const hE={...s,isRtl:Rx,arrow:l,disableInteractive:Nx,placement:mx,PopperComponentProp:px,touch:Px.current},SE=typeof vx.popper=="function"?vx.popper(hE):vx.popper,_E=reactExports.useMemo(()=>{let eE=[{name:"arrow",enabled:!!qx,options:{element:qx,padding:4}}];return hx.popperOptions?.modifiers&&(eE=eE.concat(hx.popperOptions.modifiers)),SE?.popperOptions?.modifiers&&(eE=eE.concat(SE.popperOptions.modifiers)),{...hx.popperOptions,...SE?.popperOptions,modifiers:eE}},[qx,hx.popperOptions,SE?.popperOptions]),PE=useUtilityClasses$B(hE),NE=typeof vx.transition=="function"?vx.transition(hE):vx.transition,lE={slots:{popper:d.Popper,transition:d.Transition??_x,tooltip:d.Tooltip,arrow:d.Arrow,...yx},slotProps:{arrow:vx.arrow??Ct.arrow,popper:{...hx,...SE??Ct.popper},tooltip:vx.tooltip??Ct.tooltip,transition:{...Ex,...NE??Ct.transition}}},[gE,AE]=useSlot("popper",{elementType:TooltipPopper,externalForwardedProps:lE,ownerState:hE,className:clsx(PE.popper,hx?.className)}),[yE,DE]=useSlot("transition",{elementType:Grow,externalForwardedProps:lE,ownerState:hE}),[OE,kx]=useSlot("tooltip",{elementType:TooltipTooltip,className:PE.tooltip,externalForwardedProps:lE,ownerState:hE}),[Ux,Yx]=useSlot("arrow",{elementType:TooltipArrow,className:PE.arrow,externalForwardedProps:lE,ownerState:hE,ref:Ix});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Ax,tE),jsxRuntimeExports.jsx(gE,{as:px??Popper,placement:mx,anchorEl:ax?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:Cx,popperRef:Fx,open:Cx?Hx:!1,id:iE,transition:!0,...mE,...AE,popperOptions:_E,children:({TransitionProps:eE})=>jsxRuntimeExports.jsx(yE,{timeout:Mx.transitions.duration.shorter,...eE,...DE,children:jsxRuntimeExports.jsxs(OE,{...kx,children:[Sx,l?jsxRuntimeExports.jsx(Ux,{...Yx}):null]})})})]})}),Grid$1=createGrid({createStyledComponent:styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:t=>useDefaultProps({props:t,name:"MuiGrid"}),useTheme}),units={resistor:{m:.001,:1,K:1e3,M:1e6,G:1e9},capacitor:{fF:1e-15,pF:1e-12,nF:1e-9,uF:1e-6,mF:.001,F:1},inductor:{fH:1e-15,pH:1e-12,nH:1e-9,uH:1e-6,mH:.001,H:1},frequency:{Hz:1,kHz:1e3,MHz:1e6,GHz:1e9,THz:1e12},vcvs:{"V/V":1},vcis:{"A/V":1}},addShapes={opamp:{image:"opamp.svg",connectors:[[0,-32],[0,32],[128,0]],x:0,y:0,offset:[0,-96],label:{text:"U1",class:"circuit_label",x:96,y:-32}},vcvs:{image:"vcvs.svg",connectors:[[-64,64],[-64,32],[0,-32],[0,128]],x:0,y:0,offset:[-80,-32],label:{text:"A1",class:"circuit_label",x:48,y:24}},vcis:{image:"vcis.svg",connectors:[[-64,64],[-64,32],[0,-32],[0,128]],x:0,y:0,offset:[-80,-32],label:{text:"G1",class:"circuit_label",x:48,y:24}},resistor:{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:0,y:0,label:{text:"R1",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},capacitor:{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:0,y:0,label:{text:"C1",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},inductor:{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:0,y:0,label:{text:"L1",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},vin:{image:"vin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},iin:{image:"iin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},gnd:{image:"gnd.svg",connectors:[[0,0]],x:0,y:0,offset:[-100,-180]},vprobe:{image:"vprobe.svg",label:{text:"X1",class:"circuit_label",x:0,y:-30},connectors:[[0,0]],x:0,y:0,offset:[-10,-90]},iprobe:{image:"iprobe.svg",label:{text:"Y1",class:"circuit_label",x:-64,y:-36},connectors:[[-64,0],[64,0]],x:0,y:0,offset:[-96,-64]}},theme$1=createTheme({palette:{bland:{main:"#fff",light:"#dedfe0",dark:"#dedfe0",contrastText:"#242105"}}}),emptyResults={text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:"",numericML:"",numericText:"",solver:null},shapesWithLabels={resistor:"R",capacitor:"C",inductor:"L",vcvs:"A",vcis:"G",opamp:"U",vprobe:"X",iprobe:"Y"},componentDefaults={resistor:{value:1e3,unit:"K"},capacitor:{value:1,unit:"pF"},inductor:{value:1,unit:"nH"},vcvs:{value:100,unit:"V/V"},vcis:{value:.001,unit:"A/V"}},activeComponents=["opamp","resistor","capacitor","inductor","vcvs","vcis"],probes=["vprobe","iprobe"],initialLabels={};Object.keys(shapesWithLabels).forEach(t=>{initialLabels[t]=`${shapesWithLabels[t]}0`});function calculateNextIndex(t,n,a){if(!t||Object.keys(t).length==0)return initialLabels[n];const s=Object.keys(t).filter(l=>t[l].type==n).map(l=>Number(l.slice(1)));return`${a}${s.length==0?0:Math.max(...s)+1}`}function VisioJSSchematic({setResults:t,setNodes:n,setComponentValues:a,setFullyConnectedComponents:s,history:l,setHistory:u}){const[c,d]=reactExports.useState(initialLabels),[Ct,ar]=reactExports.useState(null),[en,tn]=reactExports.useState({}),on=15,fn=reactExports.useCallback(ox=>{const{nodeMap:sx,components:lx,fullyConnectedComponents:cx}=createNodeMap(ox,addShapes);for(const[gx,mx]of Object.entries(lx))!(gx in en)&&mx.type in componentDefaults&&(lx[gx]={...mx,...componentDefaults[mx.type]});a(gx=>{const mx={...gx};for(const[px,hx]of Object.entries(lx))!(px in mx)&&hx.type in componentDefaults&&(mx[px]={type:hx.type,...componentDefaults[hx.type]});for(const px in mx)px in lx||delete mx[px];return JSON.stringify(gx)==JSON.stringify(mx)?gx:mx}),s(gx=>JSON.stringify(gx)==JSON.stringify(cx)?gx:cx),n(gx=>JSON.stringify(gx)==JSON.stringify(sx)?gx:(t({...emptyResults}),sx)),tn(lx);const fx={};for(const gx in shapesWithLabels)fx[gx]=calculateNextIndex(lx,gx,shapesWithLabels[gx]);d(fx)},[en,a,s,n,t]),dn=reactExports.useCallback(ox=>{u(sx=>{const lx=JSON.parse(JSON.stringify(ox)),cx={...sx};return cx.pointer<cx.state.length-1&&(cx.state=cx.state.slice(0,cx.pointer+1)),cx.state.length==on?cx.state=[...cx.state.slice(1),lx]:cx.state=[...cx.state,lx],cx.pointer=cx.state.length-1,cx}),fn(ox)},[fn,u]),Cn=reactExports.useCallback(()=>{u(ox=>{if(ox.pointer==0)return ox;Ct.redraw(ox.state[ox.pointer-1]);const sx={...ox};return sx.pointer=sx.pointer-1,sx}),fn(l.state[l.pointer-1])},[fn,u,l,Ct]),Rn=reactExports.useCallback(()=>{u(ox=>{if(ox.pointer>=ox.state.length-1)return ox;Ct.redraw(ox.state[ox.pointer+1]);const sx={...ox};return sx.pointer=sx.pointer+1,sx}),fn(l.state[l.pointer+1])},[fn,u,l,Ct]);reactExports.useEffect(()=>{if(!Ct){var ox=ix({initialState:l.state[0],stateChanged:dn});ar(ox)}},[dn,l,Ct]),reactExports.useEffect(()=>{Ct&&Ct.init()},[Ct]),reactExports.useEffect(()=>{const ox=sx=>{const lx=(sx.ctrlKey||sx.metaKey)&&sx.key.toLowerCase()==="z"&&!sx.shiftKey,cx=(sx.ctrlKey||sx.metaKey)&&sx.key.toLowerCase()==="z"&&sx.shiftKey;lx?(console.log("undo"),sx.preventDefault(),Cn()):cx&&(sx.preventDefault(),Rn())};return window.addEventListener("keydown",ox),()=>window.removeEventListener("keydown",ox)},[Cn,Rn]);const ax={};return ax.vin=!("iin"in en||"vin"in en),ax.vprobe=Object.keys(en).filter(ox=>en[ox].type=="vprobe").length<2,jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid$1,{container:!0,size:{xs:12,sm:10},columns:{xs:3,md:9},children:Object.keys(addShapes).map(ox=>{const sx=addShapes[ox];return"label"in sx&&(sx.label.text=c[ox]),jsxRuntimeExports.jsx(Grid$1,{size:1,children:jsxRuntimeExports.jsx(Tooltip,{title:ox=="vin"&&!ax.vin||ox=="iin"&&!ax.vin?"max 1 vin or iin ":ox=="vprobe"&&!ax.vprobe?"max 2 vprobes":"",children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,color:probes.includes(ox)?"secondary":activeComponents.includes(ox)?"info":"success",style:{cursor:"grab",marginRight:"10px",height:"100%"},size:"small",disabled:ox=="vin"||ox=="iin"?!ax.vin:ox=="vprobe"?!ax.vprobe:!1,draggable:"true",onDragStart:lx=>{window.dragData=sx,lx.dataTransfer.setData("application/json",JSON.stringify(sx))},onClick:()=>Ct.addShape(sx),children:ox},ox)})},ox)},ox)})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,size:{xs:12,sm:2},spacing:0,justifyContent:"flex-end",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Ct.deleteSelected(),sx:{p:.5},children:jsxRuntimeExports.jsx(DeleteIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Cn(),disabled:l.pointer==0,sx:{p:.5},children:jsxRuntimeExports.jsx(UndoIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>Rn(),disabled:l.pointer==l.state.length-1,sx:{p:.5},children:jsxRuntimeExports.jsx(RedoIcon,{})})]}),jsxRuntimeExports.jsx(Grid$1,{container:!0,size:12,children:jsxRuntimeExports.jsx(Grid$1,{size:12,children:jsxRuntimeExports.jsx("div",{style:{border:"1px solid rgb(222, 226, 230)",display:"inline-block",width:"100%"},children:jsxRuntimeExports.jsx("svg",{id:"visiojs_top",className:"visiojs_svg"})})})})]})}function getStyleValue(t){return parseInt(t,10)||0}const styles$1={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(t){for(const n in t)return!1;return!0}function isEmpty$1(t){return isObjectEmpty(t)||t.outerHeightStyle===0&&!t.overflowing}const TextareaAutosize=reactExports.forwardRef(function(n,a){const{onChange:s,maxRows:l,minRows:u=1,style:c,value:d,...Ct}=n,{current:ar}=reactExports.useRef(d!=null),en=reactExports.useRef(null),tn=useForkRef(a,en),on=reactExports.useRef(null),fn=reactExports.useRef(null),dn=reactExports.useCallback(()=>{const sx=en.current,lx=fn.current;if(!sx||!lx)return;const fx=ownerWindow(sx).getComputedStyle(sx);if(fx.width==="0px")return{outerHeightStyle:0,overflowing:!1};lx.style.width=fx.width,lx.value=sx.value||n.placeholder||"x",lx.value.slice(-1)===`
`&&(lx.value+=" ");const gx=fx.boxSizing,mx=getStyleValue(fx.paddingBottom)+getStyleValue(fx.paddingTop),px=getStyleValue(fx.borderBottomWidth)+getStyleValue(fx.borderTopWidth),hx=lx.scrollHeight;lx.value="x";const vx=lx.scrollHeight;let yx=hx;u&&(yx=Math.max(Number(u)*vx,yx)),l&&(yx=Math.min(Number(l)*vx,yx)),yx=Math.max(yx,vx);const Sx=yx+(gx==="border-box"?mx+px:0),_x=Math.abs(yx-hx)<=1;return{outerHeightStyle:Sx,overflowing:_x}},[l,u,n.placeholder]),Cn=useEventCallback(()=>{const sx=en.current,lx=dn();if(!sx||!lx||isEmpty$1(lx))return!1;const cx=lx.outerHeightStyle;return on.current!=null&&on.current!==cx}),Rn=reactExports.useCallback(()=>{const sx=en.current,lx=dn();if(!sx||!lx||isEmpty$1(lx))return;const cx=lx.outerHeightStyle;on.current!==cx&&(on.current=cx,sx.style.height=`${cx}px`),sx.style.overflow=lx.overflowing?"hidden":""},[dn]),ax=reactExports.useRef(-1);useEnhancedEffect(()=>{const sx=debounce$2(Rn),lx=en?.current;if(!lx)return;const cx=ownerWindow(lx);cx.addEventListener("resize",sx);let fx;return typeof ResizeObserver<"u"&&(fx=new ResizeObserver(()=>{Cn()&&(fx.unobserve(lx),cancelAnimationFrame(ax.current),Rn(),ax.current=requestAnimationFrame(()=>{fx.observe(lx)}))}),fx.observe(lx)),()=>{sx.clear(),cancelAnimationFrame(ax.current),cx.removeEventListener("resize",sx),fx&&fx.disconnect()}},[dn,Rn,Cn]),useEnhancedEffect(()=>{Rn()});const ox=sx=>{ar||Rn();const lx=sx.target,cx=lx.value.length,fx=lx.value.endsWith(`
`),gx=lx.selectionStart===cx;fx&&gx&&lx.setSelectionRange(cx,cx),s&&s(sx)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:d,onChange:ox,ref:tn,rows:u,style:c,...Ct}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:n.className,readOnly:!0,ref:fn,tabIndex:-1,style:{...styles$1.shadow,...c,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(t){return typeof t=="string"}function formControlState({props:t,states:n,muiFormControl:a}){return n.reduce((s,l)=>(s[l]=t[l],a&&typeof t[l]>"u"&&(s[l]=a[l]),s),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function isFilled(t,n=!1){return t&&(hasValue(t.value)&&t.value!==""||n&&hasValue(t.defaultValue)&&t.defaultValue!=="")}function isAdornedStart(t){return t.startAdornment}function getInputBaseUtilityClass(t){return generateUtilityClass("MuiInputBase",t)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.formControl&&n.formControl,a.startAdornment&&n.adornedStart,a.endAdornment&&n.adornedEnd,a.error&&n.error,a.size==="small"&&n.sizeSmall,a.multiline&&n.multiline,a.color&&n[`color${capitalize(a.color)}`],a.fullWidth&&n.fullWidth,a.hiddenLabel&&n.hiddenLabel]},inputOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.input,a.size==="small"&&n.inputSizeSmall,a.multiline&&n.inputMultiline,a.type==="search"&&n.inputTypeSearch,a.startAdornment&&n.inputAdornedStart,a.endAdornment&&n.inputAdornedEnd,a.hiddenLabel&&n.inputHiddenLabel]},useUtilityClasses$A=t=>{const{classes:n,color:a,disabled:s,error:l,endAdornment:u,focused:c,formControl:d,fullWidth:Ct,hiddenLabel:ar,multiline:en,readOnly:tn,size:on,startAdornment:fn,type:dn}=t,Cn={root:["root",`color${capitalize(a)}`,s&&"disabled",l&&"error",Ct&&"fullWidth",c&&"focused",d&&"formControl",on&&on!=="medium"&&`size${capitalize(on)}`,en&&"multiline",fn&&"adornedStart",u&&"adornedEnd",ar&&"hiddenLabel",tn&&"readOnly"],input:["input",s&&"disabled",dn==="search"&&"inputTypeSearch",en&&"inputMultiline",on==="small"&&"inputSizeSmall",ar&&"inputHiddenLabel",fn&&"inputAdornedStart",u&&"inputAdornedEnd",tn&&"readOnly"]};return composeClasses(Cn,getInputBaseUtilityClass,n)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:n})=>n.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:n,size:a})=>n.multiline&&a==="small",style:{paddingTop:1}},{props:({ownerState:n})=>n.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},s={opacity:"0 !important"},l=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus::-ms-input-placeholder":l},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:u})=>!u.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:u})=>u.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:u,autoFocus:c,className:d,color:Ct,components:ar={},componentsProps:en={},defaultValue:tn,disabled:on,disableInjectingGlobalStyles:fn,endAdornment:dn,error:Cn,fullWidth:Rn=!1,id:ax,inputComponent:ox="input",inputProps:sx={},inputRef:lx,margin:cx,maxRows:fx,minRows:gx,multiline:mx=!1,name:px,onBlur:hx,onChange:vx,onClick:yx,onFocus:Sx,onKeyDown:_x,onKeyUp:Ex,placeholder:bx,readOnly:Ax,renderSuffix:Mx,rows:Rx,size:Cx,slotProps:Lx={},slots:qx={},startAdornment:Ix,type:Px="text",value:Nx,...Bx}=s,$x=sx.value!=null?sx.value:Nx,{current:Vx}=reactExports.useRef($x!=null),Gx=reactExports.useRef(),Zx=reactExports.useCallback(tE=>{},[]),jx=useForkRef(Gx,lx,sx.ref,Zx),[Hx,iE]=reactExports.useState(!1),Xx=useFormControl(),rE=formControlState({props:s,muiFormControl:Xx,states:["color","disabled","error","hiddenLabel","size","required","filled"]});rE.focused=Xx?Xx.focused:Hx,reactExports.useEffect(()=>{!Xx&&on&&Hx&&(iE(!1),hx&&hx())},[Xx,on,Hx,hx]);const uE=Xx&&Xx.onFilled,aE=Xx&&Xx.onEmpty,Kx=reactExports.useCallback(tE=>{isFilled(tE)?uE&&uE():aE&&aE()},[uE,aE]);useEnhancedEffect(()=>{Vx&&Kx({value:$x})},[$x,Kx,Vx]);const ME=tE=>{Sx&&Sx(tE),sx.onFocus&&sx.onFocus(tE),Xx&&Xx.onFocus?Xx.onFocus(tE):iE(!0)},IE=tE=>{hx&&hx(tE),sx.onBlur&&sx.onBlur(tE),Xx&&Xx.onBlur?Xx.onBlur(tE):iE(!1)},wE=(tE,...mE)=>{if(!Vx){const hE=tE.target||Gx.current;if(hE==null)throw new Error(formatMuiErrorMessage(1));Kx({value:hE.value})}sx.onChange&&sx.onChange(tE,...mE),vx&&vx(tE,...mE)};reactExports.useEffect(()=>{Kx(Gx.current)},[]);const bE=tE=>{Gx.current&&tE.currentTarget===tE.target&&Gx.current.focus(),yx&&yx(tE)};let UE=ox,CE=sx;mx&&UE==="input"&&(Rx?CE={type:void 0,minRows:Rx,maxRows:Rx,...CE}:CE={type:void 0,maxRows:fx,minRows:gx,...CE},UE=TextareaAutosize);const YE=tE=>{Kx(tE.animationName==="mui-auto-fill-cancel"?Gx.current:{value:"x"})};reactExports.useEffect(()=>{Xx&&Xx.setAdornedStart(!!Ix)},[Xx,Ix]);const Ox={...s,color:rE.color||"primary",disabled:rE.disabled,endAdornment:dn,error:rE.error,focused:rE.focused,formControl:Xx,fullWidth:Rn,hiddenLabel:rE.hiddenLabel,multiline:mx,size:rE.size,startAdornment:Ix,type:Px},Fx=useUtilityClasses$A(Ox),Wx=qx.root||ar.Root||InputBaseRoot,Qx=Lx.root||en.root||{},oE=qx.input||ar.Input||InputBaseInput;return CE={...CE,...Lx.input??en.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!fn&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(Wx,{...Qx,ref:a,onClick:bE,...Bx,...!isHostComponent(Wx)&&{ownerState:{...Ox,...Qx.ownerState}},className:clsx(Fx.root,Qx.className,d,Ax&&"MuiInputBase-readOnly"),children:[Ix,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(oE,{"aria-invalid":rE.error,"aria-describedby":l,autoComplete:u,autoFocus:c,defaultValue:tn,disabled:rE.disabled,id:ax,onAnimationStart:YE,name:px,placeholder:bx,readOnly:Ax,required:rE.required,rows:Rx,value:$x,onKeyDown:_x,onKeyUp:Ex,type:Px,...CE,...!isHostComponent(oE)&&{as:UE,ownerState:{...Ox,...CE.ownerState}},ref:jx,className:clsx(Fx.input,CE.className,Ax&&"MuiInputBase-readOnly"),onBlur:IE,onChange:wE,onFocus:ME})}),dn,Mx?Mx({...rE,startAdornment:Ix}):null]})]})});function getInputUtilityClass(t){return generateUtilityClass("MuiInput",t)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])},useUtilityClasses$z=t=>{const{classes:n,disableUnderline:a}=t,l=composeClasses({root:["root",!a&&"underline"],input:["input"]},getInputUtilityClass,n);return{...n,...l}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{let a=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(a=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:s})=>s.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([s])=>({props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[s].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiInput"}),{disableUnderline:l=!1,components:u={},componentsProps:c,fullWidth:d=!1,inputComponent:Ct="input",multiline:ar=!1,slotProps:en,slots:tn={},type:on="text",...fn}=s,dn=useUtilityClasses$z(s),Rn={root:{ownerState:{disableUnderline:l}}},ax=en??c?deepmerge(en??c,Rn):Rn,ox=tn.root??u.Root??InputRoot,sx=tn.input??u.Input??InputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:ox,input:sx},slotProps:ax,fullWidth:d,inputComponent:Ct,multiline:ar,ref:a,type:on,...fn,classes:dn})});Input.muiName="Input";function getFilledInputUtilityClass(t){return generateUtilityClass("MuiFilledInput",t)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},useUtilityClasses$y=t=>{const{classes:n,disableUnderline:a,startAdornment:s,endAdornment:l,size:u,hiddenLabel:c,multiline:d}=t,Ct={root:["root",!a&&"underline",s&&"adornedStart",l&&"adornedEnd",u==="small"&&`size${capitalize(u)}`,c&&"hiddenLabel",d&&"multiline"],input:["input"]},ar=composeClasses(Ct,getFilledInputUtilityClass,n);return{...n,...ar}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${filledInputClasses.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${filledInputClasses.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:u},variants:[{props:({ownerState:c})=>!c.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([c])=>({props:{disableUnderline:!1,color:c},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[c]?.main}`}}})),{props:({ownerState:c})=>c.startAdornment,style:{paddingLeft:12}},{props:({ownerState:c})=>c.endAdornment,style:{paddingRight:12}},{props:({ownerState:c})=>c.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:c,size:d})=>c.multiline&&d==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel&&c.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:n})=>n.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}},{props:({ownerState:n})=>n.hiddenLabel&&n.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:n})=>n.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFilledInput"}),{disableUnderline:l=!1,components:u={},componentsProps:c,fullWidth:d=!1,hiddenLabel:Ct,inputComponent:ar="input",multiline:en=!1,slotProps:tn,slots:on={},type:fn="text",...dn}=s,Cn={...s,disableUnderline:l,fullWidth:d,inputComponent:ar,multiline:en,type:fn},Rn=useUtilityClasses$y(s),ax={root:{ownerState:Cn},input:{ownerState:Cn}},ox=tn??c?deepmerge(ax,tn??c):ax,sx=on.root??u.Root??FilledInputRoot,lx=on.input??u.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:sx,input:lx},slotProps:ox,fullWidth:d,inputComponent:ar,multiline:en,ref:a,type:fn,...dn,classes:Rn})});FilledInput.muiName="Input";var _span$2;const NotchedOutlineRoot$1=styled("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{name:"MuiNotchedOutlined",shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:n})=>!n.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:n})=>n.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:n})=>n.withLabel&&n.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(t){const{children:n,classes:a,className:s,label:l,notched:u,...c}=t,d=l!=null&&l!=="",Ct={...t,notched:u,withLabel:d};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:s,ownerState:Ct,...c,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:Ct,children:d?jsxRuntimeExports.jsx("span",{children:l}):_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function getOutlinedInputUtilityClass(t){return generateUtilityClass("MuiOutlinedInput",t)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])},useUtilityClasses$x=t=>{const{classes:n}=t,s=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,n);return{...n,...s}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):n}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette[a].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:14}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:14}},{props:({ownerState:a})=>a.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:a,size:s})=>a.multiline&&s==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):n}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:n})=>n.multiline,style:{padding:0}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiOutlinedInput"}),{components:l={},fullWidth:u=!1,inputComponent:c="input",label:d,multiline:Ct=!1,notched:ar,slots:en={},slotProps:tn={},type:on="text",...fn}=s,dn=useUtilityClasses$x(s),Cn=useFormControl(),Rn=formControlState({props:s,muiFormControl:Cn,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),ax={...s,color:Rn.color||"primary",disabled:Rn.disabled,error:Rn.error,focused:Rn.focused,formControl:Cn,fullWidth:u,hiddenLabel:Rn.hiddenLabel,multiline:Ct,size:Rn.size,type:on},ox=en.root??l.Root??OutlinedInputRoot,sx=en.input??l.Input??OutlinedInputInput,[lx,cx]=useSlot("notchedOutline",{elementType:NotchedOutlineRoot,className:dn.notchedOutline,shouldForwardComponentProp:!0,ownerState:ax,externalForwardedProps:{slots:en,slotProps:tn},additionalProps:{label:d!=null&&d!==""&&Rn.required?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[d,"","*"]}):d}});return jsxRuntimeExports.jsx(InputBase,{slots:{root:ox,input:sx},slotProps:tn,renderSuffix:fx=>jsxRuntimeExports.jsx(lx,{...cx,notched:typeof ar<"u"?ar:!!(fx.startAdornment||fx.filled||fx.focused)}),fullWidth:u,inputComponent:c,multiline:Ct,ref:a,type:on,...fn,classes:{...dn,notchedOutline:null}})});OutlinedInput.muiName="Input";function getFormLabelUtilityClasses(t){return generateUtilityClass("MuiFormLabel",t)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),useUtilityClasses$w=t=>{const{classes:n,color:a,focused:s,disabled:l,error:u,filled:c,required:d}=t,Ct={root:["root",`color${capitalize(a)}`,l&&"disabled",u&&"error",c&&"filled",s&&"focused",d&&"required"],asterisk:["asterisk",u&&"error"]};return composeClasses(Ct,getFormLabelUtilityClasses,n)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color==="secondary"&&n.colorSecondary,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${formLabelClasses.focused}`]:{color:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${formLabelClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk"})(memoTheme(({theme:t})=>({[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}))),FormLabel=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormLabel"}),{children:l,className:u,color:c,component:d="label",disabled:Ct,error:ar,filled:en,focused:tn,required:on,...fn}=s,dn=useFormControl(),Cn=formControlState({props:s,muiFormControl:dn,states:["color","required","focused","disabled","error","filled"]}),Rn={...s,color:Cn.color||"primary",component:d,disabled:Cn.disabled,error:Cn.error,filled:Cn.filled,focused:Cn.focused,required:Cn.required},ax=useUtilityClasses$w(Rn);return jsxRuntimeExports.jsxs(FormLabelRoot,{as:d,ownerState:Rn,className:clsx(ax.root,u),ref:a,...fn,children:[l,Cn.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:Rn,"aria-hidden":!0,className:ax.asterisk,children:["","*"]})]})});function getInputLabelUtilityClasses(t){return generateUtilityClass("MuiInputLabel",t)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const useUtilityClasses$v=t=>{const{classes:n,formControl:a,size:s,shrink:l,disableAnimation:u,variant:c,required:d}=t,Ct={root:["root",a&&"formControl",!u&&"animated",l&&"shrink",s&&s!=="medium"&&`size${capitalize(s)}`,c],asterisk:[d&&"asterisk"]},ar=composeClasses(Ct,getInputLabelUtilityClasses,n);return{...n,...ar}},InputLabelRoot=styled(FormLabel,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${formLabelClasses.asterisk}`]:n.asterisk},n.root,a.formControl&&n.formControl,a.size==="small"&&n.sizeSmall,a.shrink&&n.shrink,!a.disableAnimation&&n.animated,a.focused&&n.focused,n[a.variant]]}})(memoTheme(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:n})=>n.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:n})=>n.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:n})=>!n.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="filled"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:n,ownerState:a,size:s})=>n==="filled"&&a.shrink&&s==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="outlined"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),InputLabel=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiInputLabel",props:n}),{disableAnimation:l=!1,margin:u,shrink:c,variant:d,className:Ct,...ar}=s,en=useFormControl();let tn=c;typeof tn>"u"&&en&&(tn=en.filled||en.focused||en.adornedStart);const on=formControlState({props:s,muiFormControl:en,states:["size","variant","required","focused"]}),fn={...s,disableAnimation:l,formControl:en,shrink:tn,size:on.size,variant:on.variant,required:on.required,focused:on.focused},dn=useUtilityClasses$v(fn);return jsxRuntimeExports.jsx(InputLabelRoot,{"data-shrink":tn,ref:a,className:clsx(dn.root,Ct),...ar,ownerState:fn,classes:dn})});function getFormControlUtilityClasses(t){return generateUtilityClass("MuiFormControl",t)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$u=t=>{const{classes:n,margin:a,fullWidth:s}=t,l={root:["root",a!=="none"&&`margin${capitalize(a)}`,s&&"fullWidth"]};return composeClasses(l,getFormControlUtilityClasses,n)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`margin${capitalize(a.margin)}`],a.fullWidth&&n.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormControl"}),{children:l,className:u,color:c="primary",component:d="div",disabled:Ct=!1,error:ar=!1,focused:en,fullWidth:tn=!1,hiddenLabel:on=!1,margin:fn="none",required:dn=!1,size:Cn="medium",variant:Rn="outlined",...ax}=s,ox={...s,color:c,component:d,disabled:Ct,error:ar,fullWidth:tn,hiddenLabel:on,margin:fn,required:dn,size:Cn,variant:Rn},sx=useUtilityClasses$u(ox),[lx,cx]=reactExports.useState(()=>{let Ex=!1;return l&&reactExports.Children.forEach(l,bx=>{if(!isMuiElement(bx,["Input","Select"]))return;const Ax=isMuiElement(bx,["Select"])?bx.props.input:bx;Ax&&isAdornedStart(Ax.props)&&(Ex=!0)}),Ex}),[fx,gx]=reactExports.useState(()=>{let Ex=!1;return l&&reactExports.Children.forEach(l,bx=>{isMuiElement(bx,["Input","Select"])&&(isFilled(bx.props,!0)||isFilled(bx.props.inputProps,!0))&&(Ex=!0)}),Ex}),[mx,px]=reactExports.useState(!1);Ct&&mx&&px(!1);const hx=en!==void 0&&!Ct?en:mx;let vx;reactExports.useRef(!1);const yx=reactExports.useCallback(()=>{gx(!0)},[]),Sx=reactExports.useCallback(()=>{gx(!1)},[]),_x=reactExports.useMemo(()=>({adornedStart:lx,setAdornedStart:cx,color:c,disabled:Ct,error:ar,filled:fx,focused:hx,fullWidth:tn,hiddenLabel:on,size:Cn,onBlur:()=>{px(!1)},onFocus:()=>{px(!0)},onEmpty:Sx,onFilled:yx,registerEffect:vx,required:dn,variant:Rn}),[lx,c,Ct,ar,fx,hx,tn,on,vx,Sx,yx,dn,Cn,Rn]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:_x,children:jsxRuntimeExports.jsx(FormControlRoot,{as:d,ownerState:ox,className:clsx(sx.root,u),ref:a,...ax,children:l})})});function getFormHelperTextUtilityClasses(t){return generateUtilityClass("MuiFormHelperText",t)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _span$1;const useUtilityClasses$t=t=>{const{classes:n,contained:a,size:s,disabled:l,error:u,filled:c,focused:d,required:Ct}=t,ar={root:["root",l&&"disabled",u&&"error",s&&`size${capitalize(s)}`,a&&"contained",d&&"focused",c&&"filled",Ct&&"required"]};return composeClasses(ar,getFormHelperTextUtilityClasses,n)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.size&&n[`size${capitalize(a.size)}`],a.contained&&n.contained,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formHelperTextClasses.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:n})=>n.contained,style:{marginLeft:14,marginRight:14}}]}))),FormHelperText=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormHelperText"}),{children:l,className:u,component:c="p",disabled:d,error:Ct,filled:ar,focused:en,margin:tn,required:on,variant:fn,...dn}=s,Cn=useFormControl(),Rn=formControlState({props:s,muiFormControl:Cn,states:["variant","size","disabled","error","filled","focused","required"]}),ax={...s,component:c,contained:Rn.variant==="filled"||Rn.variant==="outlined",variant:Rn.variant,size:Rn.size,disabled:Rn.disabled,error:Rn.error,filled:Rn.filled,focused:Rn.focused,required:Rn.required};delete ax.ownerState;const ox=useUtilityClasses$t(ax);return jsxRuntimeExports.jsx(FormHelperTextRoot,{as:c,className:clsx(ox.root,u),ref:a,...dn,ownerState:ax,children:l===" "?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):l})}),ListContext=reactExports.createContext({});function getListUtilityClass(t){return generateUtilityClass("MuiList",t)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$s=t=>{const{classes:n,disablePadding:a,dense:s,subheader:l}=t;return composeClasses({root:["root",!a&&"padding",s&&"dense",l&&"subheader"]},getListUtilityClass,n)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disablePadding&&n.padding,a.dense&&n.dense,a.subheader&&n.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),List=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiList"}),{children:l,className:u,component:c="ul",dense:d=!1,disablePadding:Ct=!1,subheader:ar,...en}=s,tn=reactExports.useMemo(()=>({dense:d}),[d]),on={...s,component:c,dense:d,disablePadding:Ct},fn=useUtilityClasses$s(on);return jsxRuntimeExports.jsx(ListContext.Provider,{value:tn,children:jsxRuntimeExports.jsxs(ListRoot,{as:c,className:clsx(fn.root,u),ref:a,ownerState:on,...en,children:[ar,l]})})});function getScrollbarSize(t=window){const n=t.document.documentElement.clientWidth;return t.innerWidth-n}function nextItem(t,n,a){return t===n?t.firstChild:n&&n.nextElementSibling?n.nextElementSibling:a?null:t.firstChild}function previousItem(t,n,a){return t===n?a?t.firstChild:t.lastChild:n&&n.previousElementSibling?n.previousElementSibling:a?null:t.lastChild}function textCriteriaMatches(t,n){if(n===void 0)return!0;let a=t.innerText;return a===void 0&&(a=t.textContent),a=a.trim().toLowerCase(),a.length===0?!1:n.repeating?a[0]===n.keys[0]:a.startsWith(n.keys.join(""))}function moveFocus(t,n,a,s,l,u){let c=!1,d=l(t,n,n?a:!1);for(;d;){if(d===t.firstChild){if(c)return!1;c=!0}const Ct=s?!1:d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||!textCriteriaMatches(d,u)||Ct)d=l(t,d,a);else return d.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(n,a){const{actions:s,autoFocus:l=!1,autoFocusItem:u=!1,children:c,className:d,disabledItemsFocusable:Ct=!1,disableListWrap:ar=!1,onKeyDown:en,variant:tn="selectedMenu",...on}=n,fn=reactExports.useRef(null),dn=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{l&&fn.current.focus()},[l]),reactExports.useImperativeHandle(s,()=>({adjustStyleForScrollbar:(sx,{direction:lx})=>{const cx=!fn.current.style.width;if(sx.clientHeight<fn.current.clientHeight&&cx){const fx=`${getScrollbarSize(ownerWindow(sx))}px`;fn.current.style[lx==="rtl"?"paddingLeft":"paddingRight"]=fx,fn.current.style.width=`calc(100% + ${fx})`}return fn.current}}),[]);const Cn=sx=>{const lx=fn.current,cx=sx.key;if(sx.ctrlKey||sx.metaKey||sx.altKey){en&&en(sx);return}const gx=ownerDocument(lx).activeElement;if(cx==="ArrowDown")sx.preventDefault(),moveFocus(lx,gx,ar,Ct,nextItem);else if(cx==="ArrowUp")sx.preventDefault(),moveFocus(lx,gx,ar,Ct,previousItem);else if(cx==="Home")sx.preventDefault(),moveFocus(lx,null,ar,Ct,nextItem);else if(cx==="End")sx.preventDefault(),moveFocus(lx,null,ar,Ct,previousItem);else if(cx.length===1){const mx=dn.current,px=cx.toLowerCase(),hx=performance.now();mx.keys.length>0&&(hx-mx.lastTime>500?(mx.keys=[],mx.repeating=!0,mx.previousKeyMatched=!0):mx.repeating&&px!==mx.keys[0]&&(mx.repeating=!1)),mx.lastTime=hx,mx.keys.push(px);const vx=gx&&!mx.repeating&&textCriteriaMatches(gx,mx);mx.previousKeyMatched&&(vx||moveFocus(lx,gx,!1,Ct,nextItem,mx))?sx.preventDefault():mx.previousKeyMatched=!1}en&&en(sx)},Rn=useForkRef(fn,a);let ax=-1;reactExports.Children.forEach(c,(sx,lx)=>{if(!reactExports.isValidElement(sx)){ax===lx&&(ax+=1,ax>=c.length&&(ax=-1));return}sx.props.disabled||(tn==="selectedMenu"&&sx.props.selected||ax===-1)&&(ax=lx),ax===lx&&(sx.props.disabled||sx.props.muiSkipListHighlight||sx.type.muiSkipListHighlight)&&(ax+=1,ax>=c.length&&(ax=-1))});const ox=reactExports.Children.map(c,(sx,lx)=>{if(lx===ax){const cx={};return u&&(cx.autoFocus=!0),sx.props.tabIndex===void 0&&tn==="selectedMenu"&&(cx.tabIndex=0),reactExports.cloneElement(sx,cx)}return sx});return jsxRuntimeExports.jsx(List,{role:"menu",ref:Rn,className:d,onKeyDown:Cn,tabIndex:l?0:-1,...on,children:ox})});function isOverflowing(t){const n=ownerDocument(t);return n.body===t?ownerWindow(t).innerWidth>n.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function ariaHidden(t,n){n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function getPaddingRight(t){return parseInt(ownerWindow(t).getComputedStyle(t).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(t){const a=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),s=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return a||s}function ariaHiddenSiblings(t,n,a,s,l){const u=[n,a,...s];[].forEach.call(t.children,c=>{const d=!u.includes(c),Ct=!isAriaHiddenForbiddenOnElement(c);d&&Ct&&ariaHidden(c,l)})}function findIndexOf(t,n){let a=-1;return t.some((s,l)=>n(s)?(a=l,!0):!1),a}function handleContainer(t,n){const a=[],s=t.container;if(!n.disableScrollLock){if(isOverflowing(s)){const c=getScrollbarSize(ownerWindow(s));a.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${getPaddingRight(s)+c}px`;const d=ownerDocument(s).querySelectorAll(".mui-fixed");[].forEach.call(d,Ct=>{a.push({value:Ct.style.paddingRight,property:"padding-right",el:Ct}),Ct.style.paddingRight=`${getPaddingRight(Ct)+c}px`})}let u;if(s.parentNode instanceof DocumentFragment)u=ownerDocument(s).body;else{const c=s.parentElement,d=ownerWindow(s);u=c?.nodeName==="HTML"&&d.getComputedStyle(c).overflowY==="scroll"?c:s}a.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{a.forEach(({value:u,el:c,property:d})=>{u?c.style.setProperty(d,u):c.style.removeProperty(d)})}}function getHiddenSiblings(t){const n=[];return[].forEach.call(t.children,a=>{a.getAttribute("aria-hidden")==="true"&&n.push(a)}),n}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(n,a){let s=this.modals.indexOf(n);if(s!==-1)return s;s=this.modals.length,this.modals.push(n),n.modalRef&&ariaHidden(n.modalRef,!1);const l=getHiddenSiblings(a);ariaHiddenSiblings(a,n.mount,n.modalRef,l,!0);const u=findIndexOf(this.containers,c=>c.container===a);return u!==-1?(this.containers[u].modals.push(n),s):(this.containers.push({modals:[n],container:a,restore:null,hiddenSiblings:l}),s)}mount(n,a){const s=findIndexOf(this.containers,u=>u.modals.includes(n)),l=this.containers[s];l.restore||(l.restore=handleContainer(l,a))}remove(n,a=!0){const s=this.modals.indexOf(n);if(s===-1)return s;const l=findIndexOf(this.containers,c=>c.modals.includes(n)),u=this.containers[l];if(u.modals.splice(u.modals.indexOf(n),1),this.modals.splice(s,1),u.modals.length===0)u.restore&&u.restore(),n.modalRef&&ariaHidden(n.modalRef,a),ariaHiddenSiblings(u.container,n.mount,n.modalRef,u.hiddenSiblings,!1),this.containers.splice(l,1);else{const c=u.modals[u.modals.length-1];c.modalRef&&ariaHidden(c.modalRef,!1)}return s}isTopModal(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(t){const n=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(n)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:n}function isNonTabbableRadio(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const n=s=>t.ownerDocument.querySelector(`input[type="radio"]${s}`);let a=n(`[name="${t.name}"]:checked`);return a||(a=n(`[name="${t.name}"]`)),a!==t}function isNodeMatchingSelectorFocusable(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||isNonTabbableRadio(t))}function defaultGetTabbable(t){const n=[],a=[];return Array.from(t.querySelectorAll(candidatesSelector)).forEach((s,l)=>{const u=getTabIndex(s);u===-1||!isNodeMatchingSelectorFocusable(s)||(u===0?n.push(s):a.push({documentOrder:l,tabIndex:u,node:s}))}),a.sort((s,l)=>s.tabIndex===l.tabIndex?s.documentOrder-l.documentOrder:s.tabIndex-l.tabIndex).map(s=>s.node).concat(n)}function defaultIsEnabled(){return!0}function FocusTrap(t){const{children:n,disableAutoFocus:a=!1,disableEnforceFocus:s=!1,disableRestoreFocus:l=!1,getTabbable:u=defaultGetTabbable,isEnabled:c=defaultIsEnabled,open:d}=t,Ct=reactExports.useRef(!1),ar=reactExports.useRef(null),en=reactExports.useRef(null),tn=reactExports.useRef(null),on=reactExports.useRef(null),fn=reactExports.useRef(!1),dn=reactExports.useRef(null),Cn=useForkRef(getReactElementRef(n),dn),Rn=reactExports.useRef(null);reactExports.useEffect(()=>{!d||!dn.current||(fn.current=!a)},[a,d]),reactExports.useEffect(()=>{if(!d||!dn.current)return;const sx=ownerDocument(dn.current);return dn.current.contains(sx.activeElement)||(dn.current.hasAttribute("tabIndex")||dn.current.setAttribute("tabIndex","-1"),fn.current&&dn.current.focus()),()=>{l||(tn.current&&tn.current.focus&&(Ct.current=!0,tn.current.focus()),tn.current=null)}},[d]),reactExports.useEffect(()=>{if(!d||!dn.current)return;const sx=ownerDocument(dn.current),lx=gx=>{Rn.current=gx,!(s||!c()||gx.key!=="Tab")&&sx.activeElement===dn.current&&gx.shiftKey&&(Ct.current=!0,en.current&&en.current.focus())},cx=()=>{const gx=dn.current;if(gx===null)return;if(!sx.hasFocus()||!c()||Ct.current){Ct.current=!1;return}if(gx.contains(sx.activeElement)||s&&sx.activeElement!==ar.current&&sx.activeElement!==en.current)return;if(sx.activeElement!==on.current)on.current=null;else if(on.current!==null)return;if(!fn.current)return;let mx=[];if((sx.activeElement===ar.current||sx.activeElement===en.current)&&(mx=u(dn.current)),mx.length>0){const px=!!(Rn.current?.shiftKey&&Rn.current?.key==="Tab"),hx=mx[0],vx=mx[mx.length-1];typeof hx!="string"&&typeof vx!="string"&&(px?vx.focus():hx.focus())}else gx.focus()};sx.addEventListener("focusin",cx),sx.addEventListener("keydown",lx,!0);const fx=setInterval(()=>{sx.activeElement&&sx.activeElement.tagName==="BODY"&&cx()},50);return()=>{clearInterval(fx),sx.removeEventListener("focusin",cx),sx.removeEventListener("keydown",lx,!0)}},[a,s,l,c,d,u]);const ax=sx=>{tn.current===null&&(tn.current=sx.relatedTarget),fn.current=!0,on.current=sx.target;const lx=n.props.onFocus;lx&&lx(sx)},ox=sx=>{tn.current===null&&(tn.current=sx.relatedTarget),fn.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:d?0:-1,onFocus:ox,ref:ar,"data-testid":"sentinelStart"}),reactExports.cloneElement(n,{ref:Cn,onFocus:ax}),jsxRuntimeExports.jsx("div",{tabIndex:d?0:-1,onFocus:ox,ref:en,"data-testid":"sentinelEnd"})]})}const styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(n,a){const s=useTheme(),l={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:u,appear:c=!0,children:d,easing:Ct,in:ar,onEnter:en,onEntered:tn,onEntering:on,onExit:fn,onExited:dn,onExiting:Cn,style:Rn,timeout:ax=l,TransitionComponent:ox=Transition,...sx}=n,lx=reactExports.useRef(null),cx=useForkRef(lx,getReactElementRef(d),a),fx=_x=>Ex=>{if(_x){const bx=lx.current;Ex===void 0?_x(bx):_x(bx,Ex)}},gx=fx(on),mx=fx((_x,Ex)=>{reflow(_x);const bx=getTransitionProps({style:Rn,timeout:ax,easing:Ct},{mode:"enter"});_x.style.webkitTransition=s.transitions.create("opacity",bx),_x.style.transition=s.transitions.create("opacity",bx),en&&en(_x,Ex)}),px=fx(tn),hx=fx(Cn),vx=fx(_x=>{const Ex=getTransitionProps({style:Rn,timeout:ax,easing:Ct},{mode:"exit"});_x.style.webkitTransition=s.transitions.create("opacity",Ex),_x.style.transition=s.transitions.create("opacity",Ex),fn&&fn(_x)}),yx=fx(dn),Sx=_x=>{u&&u(lx.current,_x)};return jsxRuntimeExports.jsx(ox,{appear:c,in:ar,nodeRef:lx,onEnter:mx,onEntered:px,onEntering:gx,onExit:vx,onExited:yx,onExiting:hx,addEndListener:Sx,timeout:ax,...sx,children:(_x,{ownerState:Ex,...bx})=>reactExports.cloneElement(d,{style:{opacity:0,visibility:_x==="exited"&&!ar?"hidden":void 0,...styles[_x],...Rn,...d.props.style},ref:cx,...bx})})});function getBackdropUtilityClass(t){return generateUtilityClass("MuiBackdrop",t)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$r=t=>{const{classes:n,invisible:a}=t;return composeClasses({root:["root",a&&"invisible"]},getBackdropUtilityClass,n)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.invisible&&n.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiBackdrop"}),{children:l,className:u,component:c="div",invisible:d=!1,open:Ct,components:ar={},componentsProps:en={},slotProps:tn={},slots:on={},TransitionComponent:fn,transitionDuration:dn,...Cn}=s,Rn={...s,component:c,invisible:d},ax=useUtilityClasses$r(Rn),ox={transition:fn,root:ar.Root,...on},sx={...en,...tn},lx={component:c,slots:ox,slotProps:sx},[cx,fx]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:lx,className:clsx(ax.root,u),ownerState:Rn}),[gx,mx]=useSlot("transition",{elementType:Fade,externalForwardedProps:lx,ownerState:Rn});return jsxRuntimeExports.jsx(gx,{in:Ct,timeout:dn,...Cn,...mx,children:jsxRuntimeExports.jsx(cx,{"aria-hidden":!0,...fx,classes:ax,ref:a,children:l})})});function getContainer(t){return typeof t=="function"?t():t}function getHasTransition(t){return t?t.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal(t){const{container:n,disableEscapeKeyDown:a=!1,disableScrollLock:s=!1,closeAfterTransition:l=!1,onTransitionEnter:u,onTransitionExited:c,children:d,onClose:Ct,open:ar,rootRef:en}=t,tn=reactExports.useRef({}),on=reactExports.useRef(null),fn=reactExports.useRef(null),dn=useForkRef(fn,en),[Cn,Rn]=reactExports.useState(!ar),ax=getHasTransition(d);let ox=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(ox=!1);const sx=()=>ownerDocument(on.current),lx=()=>(tn.current.modalRef=fn.current,tn.current.mount=on.current,tn.current),cx=()=>{manager.mount(lx(),{disableScrollLock:s}),fn.current&&(fn.current.scrollTop=0)},fx=useEventCallback(()=>{const Ex=getContainer(n)||sx().body;manager.add(lx(),Ex),fn.current&&cx()}),gx=()=>manager.isTopModal(lx()),mx=useEventCallback(Ex=>{on.current=Ex,Ex&&(ar&&gx()?cx():fn.current&&ariaHidden(fn.current,ox))}),px=reactExports.useCallback(()=>{manager.remove(lx(),ox)},[ox]);reactExports.useEffect(()=>()=>{px()},[px]),reactExports.useEffect(()=>{ar?fx():(!ax||!l)&&px()},[ar,px,ax,l,fx]);const hx=Ex=>bx=>{Ex.onKeyDown?.(bx),!(bx.key!=="Escape"||bx.which===229||!gx())&&(a||(bx.stopPropagation(),Ct&&Ct(bx,"escapeKeyDown")))},vx=Ex=>bx=>{Ex.onClick?.(bx),bx.target===bx.currentTarget&&Ct&&Ct(bx,"backdropClick")};return{getRootProps:(Ex={})=>{const bx=extractEventHandlers(t);delete bx.onTransitionEnter,delete bx.onTransitionExited;const Ax={...bx,...Ex};return{role:"presentation",...Ax,onKeyDown:hx(Ax),ref:dn}},getBackdropProps:(Ex={})=>{const bx=Ex;return{"aria-hidden":!0,...bx,onClick:vx(bx),open:ar}},getTransitionProps:()=>{const Ex=()=>{Rn(!1),u&&u()},bx=()=>{Rn(!0),c&&c(),l&&px()};return{onEnter:createChainedFunction(Ex,d?.props.onEnter??noop$1),onExited:createChainedFunction(bx,d?.props.onExited??noop$1)}},rootRef:dn,portalRef:mx,isTopModal:gx,exited:Cn,hasTransition:ax}}function getModalUtilityClass(t){return generateUtilityClass("MuiModal",t)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$q=t=>{const{open:n,exited:a,classes:s}=t;return composeClasses({root:["root",!n&&a&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,s)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.open&&a.exited&&n.hidden]}})(memoTheme(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:n})=>!n.open&&n.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Modal=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiModal",props:n}),{BackdropComponent:l=ModalBackdrop,BackdropProps:u,classes:c,className:d,closeAfterTransition:Ct=!1,children:ar,container:en,component:tn,components:on={},componentsProps:fn={},disableAutoFocus:dn=!1,disableEnforceFocus:Cn=!1,disableEscapeKeyDown:Rn=!1,disablePortal:ax=!1,disableRestoreFocus:ox=!1,disableScrollLock:sx=!1,hideBackdrop:lx=!1,keepMounted:cx=!1,onClose:fx,onTransitionEnter:gx,onTransitionExited:mx,open:px,slotProps:hx={},slots:vx={},theme:yx,...Sx}=s,_x={...s,closeAfterTransition:Ct,disableAutoFocus:dn,disableEnforceFocus:Cn,disableEscapeKeyDown:Rn,disablePortal:ax,disableRestoreFocus:ox,disableScrollLock:sx,hideBackdrop:lx,keepMounted:cx},{getRootProps:Ex,getBackdropProps:bx,getTransitionProps:Ax,portalRef:Mx,isTopModal:Rx,exited:Cx,hasTransition:Lx}=useModal({..._x,rootRef:a}),qx={..._x,exited:Cx},Ix=useUtilityClasses$q(qx),Px={};if(ar.props.tabIndex===void 0&&(Px.tabIndex="-1"),Lx){const{onEnter:Zx,onExited:jx}=Ax();Px.onEnter=Zx,Px.onExited=jx}const Nx={slots:{root:on.Root,backdrop:on.Backdrop,...vx},slotProps:{...fn,...hx}},[Bx,$x]=useSlot("root",{ref:a,elementType:ModalRoot,externalForwardedProps:{...Nx,...Sx,component:tn},getSlotProps:Ex,ownerState:qx,className:clsx(d,Ix?.root,!qx.open&&qx.exited&&Ix?.hidden)}),[Vx,Gx]=useSlot("backdrop",{ref:u?.ref,elementType:l,externalForwardedProps:Nx,shouldForwardComponentProp:!0,additionalProps:u,getSlotProps:Zx=>bx({...Zx,onClick:jx=>{Zx?.onClick&&Zx.onClick(jx)}}),className:clsx(u?.className,Ix?.backdrop),ownerState:qx});return!cx&&!px&&(!Lx||Cx)?null:jsxRuntimeExports.jsx(Portal,{ref:Mx,container:en,disablePortal:ax,children:jsxRuntimeExports.jsxs(Bx,{...$x,children:[!lx&&l?jsxRuntimeExports.jsx(Vx,{...Gx}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:Cn,disableAutoFocus:dn,disableRestoreFocus:ox,isEnabled:Rx,open:px,children:reactExports.cloneElement(ar,Px)})]})})});function getPaperUtilityClass(t){return generateUtilityClass("MuiPaper",t)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$p=t=>{const{square:n,elevation:a,variant:s,classes:l}=t,u={root:["root",s,!n&&"rounded",s==="elevation"&&`elevation${a}`]};return composeClasses(u,getPaperUtilityClass,l)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],!a.square&&n.rounded,a.variant==="elevation"&&n[`elevation${a.elevation}`]]}})(memoTheme(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:n})=>!n.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiPaper"}),l=useTheme(),{className:u,component:c="div",elevation:d=1,square:Ct=!1,variant:ar="elevation",...en}=s,tn={...s,component:c,elevation:d,square:Ct,variant:ar},on=useUtilityClasses$p(tn);return jsxRuntimeExports.jsx(PaperRoot,{as:c,ownerState:tn,className:clsx(on.root,u),ref:a,...en,style:{...ar==="elevation"&&{"--Paper-shadow":(l.vars||l).shadows[d],...l.vars&&{"--Paper-overlay":l.vars.overlays?.[d]},...!l.vars&&l.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha$1("#fff",getOverlayAlpha(d))}, ${alpha$1("#fff",getOverlayAlpha(d))})`}},...en.style}})});function getPopoverUtilityClass(t){return generateUtilityClass("MuiPopover",t)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.height/2:n==="bottom"&&(a=t.height),a}function getOffsetLeft(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.width/2:n==="right"&&(a=t.width),a}function getTransformOriginValue(t){return[t.horizontal,t.vertical].map(n=>typeof n=="number"?`${n}px`:n).join(" ")}function resolveAnchorEl(t){return typeof t=="function"?t():t}const useUtilityClasses$o=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,n)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root"})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiPopover"}),{action:l,anchorEl:u,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:Ct="anchorEl",children:ar,className:en,container:tn,elevation:on=8,marginThreshold:fn=16,open:dn,PaperProps:Cn={},slots:Rn={},slotProps:ax={},transformOrigin:ox={vertical:"top",horizontal:"left"},TransitionComponent:sx,transitionDuration:lx="auto",TransitionProps:cx={},disableScrollLock:fx=!1,...gx}=s,mx=reactExports.useRef(),px={...s,anchorOrigin:c,anchorReference:Ct,elevation:on,marginThreshold:fn,transformOrigin:ox,TransitionComponent:sx,transitionDuration:lx,TransitionProps:cx},hx=useUtilityClasses$o(px),vx=reactExports.useCallback(()=>{if(Ct==="anchorPosition")return d;const Zx=resolveAnchorEl(u),Hx=(Zx&&Zx.nodeType===1?Zx:ownerDocument(mx.current).body).getBoundingClientRect();return{top:Hx.top+getOffsetTop(Hx,c.vertical),left:Hx.left+getOffsetLeft(Hx,c.horizontal)}},[u,c.horizontal,c.vertical,d,Ct]),yx=reactExports.useCallback(Zx=>({vertical:getOffsetTop(Zx,ox.vertical),horizontal:getOffsetLeft(Zx,ox.horizontal)}),[ox.horizontal,ox.vertical]),Sx=reactExports.useCallback(Zx=>{const jx={width:Zx.offsetWidth,height:Zx.offsetHeight},Hx=yx(jx);if(Ct==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Hx)};const iE=vx();let Xx=iE.top-Hx.vertical,rE=iE.left-Hx.horizontal;const uE=Xx+jx.height,aE=rE+jx.width,Kx=ownerWindow(resolveAnchorEl(u)),ME=Kx.innerHeight-fn,IE=Kx.innerWidth-fn;if(fn!==null&&Xx<fn){const wE=Xx-fn;Xx-=wE,Hx.vertical+=wE}else if(fn!==null&&uE>ME){const wE=uE-ME;Xx-=wE,Hx.vertical+=wE}if(fn!==null&&rE<fn){const wE=rE-fn;rE-=wE,Hx.horizontal+=wE}else if(aE>IE){const wE=aE-IE;rE-=wE,Hx.horizontal+=wE}return{top:`${Math.round(Xx)}px`,left:`${Math.round(rE)}px`,transformOrigin:getTransformOriginValue(Hx)}},[u,Ct,vx,yx,fn]),[_x,Ex]=reactExports.useState(dn),bx=reactExports.useCallback(()=>{const Zx=mx.current;if(!Zx)return;const jx=Sx(Zx);jx.top!==null&&Zx.style.setProperty("top",jx.top),jx.left!==null&&(Zx.style.left=jx.left),Zx.style.transformOrigin=jx.transformOrigin,Ex(!0)},[Sx]);reactExports.useEffect(()=>(fx&&window.addEventListener("scroll",bx),()=>window.removeEventListener("scroll",bx)),[u,fx,bx]);const Ax=()=>{bx()},Mx=()=>{Ex(!1)};reactExports.useEffect(()=>{dn&&bx()}),reactExports.useImperativeHandle(l,()=>dn?{updatePosition:()=>{bx()}}:null,[dn,bx]),reactExports.useEffect(()=>{if(!dn)return;const Zx=debounce$2(()=>{bx()}),jx=ownerWindow(resolveAnchorEl(u));return jx.addEventListener("resize",Zx),()=>{Zx.clear(),jx.removeEventListener("resize",Zx)}},[u,dn,bx]);let Rx=lx;const Cx={slots:{transition:sx,...Rn},slotProps:{transition:cx,paper:Cn,...ax}},[Lx,qx]=useSlot("transition",{elementType:Grow,externalForwardedProps:Cx,ownerState:px,getSlotProps:Zx=>({...Zx,onEntering:(jx,Hx)=>{Zx.onEntering?.(jx,Hx),Ax()},onExited:jx=>{Zx.onExited?.(jx),Mx()}}),additionalProps:{appear:!0,in:dn}});lx==="auto"&&!Lx.muiSupportAuto&&(Rx=void 0);const Ix=tn||(u?ownerDocument(resolveAnchorEl(u)).body:void 0),[Px,{slots:Nx,slotProps:Bx,...$x}]=useSlot("root",{ref:a,elementType:PopoverRoot,externalForwardedProps:{...Cx,...gx},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:Rn.backdrop},slotProps:{backdrop:mergeSlotProps$1(typeof ax.backdrop=="function"?ax.backdrop(px):ax.backdrop,{invisible:!0})},container:Ix,open:dn},ownerState:px,className:clsx(hx.root,en)}),[Vx,Gx]=useSlot("paper",{ref:mx,className:hx.paper,elementType:PopoverPaper,externalForwardedProps:Cx,shouldForwardComponentProp:!0,additionalProps:{elevation:on,style:_x?void 0:{opacity:0}},ownerState:px});return jsxRuntimeExports.jsx(Px,{...$x,...!isHostComponent(Px)&&{slots:Nx,slotProps:Bx,disableScrollLock:fx},children:jsxRuntimeExports.jsx(Lx,{...qx,timeout:Rx,children:jsxRuntimeExports.jsx(Vx,{...Gx,children:ar})})})});function getMenuUtilityClass(t){return generateUtilityClass("MuiMenu",t)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$n=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,n)},MenuRoot=styled(Popover,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List"})({outline:0}),Menu=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:c,disableAutoFocusItem:d=!1,MenuListProps:Ct={},onClose:ar,open:en,PaperProps:tn={},PopoverClasses:on,transitionDuration:fn="auto",TransitionProps:{onEntering:dn,...Cn}={},variant:Rn="selectedMenu",slots:ax={},slotProps:ox={},...sx}=s,lx=useRtl(),cx={...s,autoFocus:l,disableAutoFocusItem:d,MenuListProps:Ct,onEntering:dn,PaperProps:tn,transitionDuration:fn,TransitionProps:Cn,variant:Rn},fx=useUtilityClasses$n(cx),gx=l&&!d&&en,mx=reactExports.useRef(null),px=(Rx,Cx)=>{mx.current&&mx.current.adjustStyleForScrollbar(Rx,{direction:lx?"rtl":"ltr"}),dn&&dn(Rx,Cx)},hx=Rx=>{Rx.key==="Tab"&&(Rx.preventDefault(),ar&&ar(Rx,"tabKeyDown"))};let vx=-1;reactExports.Children.map(u,(Rx,Cx)=>{reactExports.isValidElement(Rx)&&(Rx.props.disabled||(Rn==="selectedMenu"&&Rx.props.selected||vx===-1)&&(vx=Cx))});const yx={slots:ax,slotProps:{list:Ct,transition:Cn,paper:tn,...ox}},Sx=useSlotProps({elementType:ax.root,externalSlotProps:ox.root,ownerState:cx,className:[fx.root,c]}),[_x,Ex]=useSlot("paper",{className:fx.paper,elementType:MenuPaper,externalForwardedProps:yx,shouldForwardComponentProp:!0,ownerState:cx}),[bx,Ax]=useSlot("list",{className:clsx(fx.list,Ct.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:yx,getSlotProps:Rx=>({...Rx,onKeyDown:Cx=>{hx(Cx),Rx.onKeyDown?.(Cx)}}),ownerState:cx}),Mx=typeof yx.slotProps.transition=="function"?yx.slotProps.transition(cx):yx.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:ar,anchorOrigin:{vertical:"bottom",horizontal:lx?"right":"left"},transformOrigin:lx?RTL_ORIGIN:LTR_ORIGIN,slots:{root:ax.root,paper:_x,backdrop:ax.backdrop,...ax.transition&&{transition:ax.transition}},slotProps:{root:Sx,paper:Ex,backdrop:typeof ox.backdrop=="function"?ox.backdrop(cx):ox.backdrop,transition:{...Mx,onEntering:(...Rx)=>{px(...Rx),Mx?.onEntering?.(...Rx)}}},open:en,ref:a,transitionDuration:fn,ownerState:cx,...sx,classes:on,children:jsxRuntimeExports.jsx(bx,{actions:mx,autoFocus:l&&(vx===-1||d),autoFocusItem:gx,variant:Rn,...Ax,children:u})})});function getNativeSelectUtilityClasses(t){return generateUtilityClass("MuiNativeSelect",t)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$m=t=>{const{classes:n,variant:a,disabled:s,multiple:l,open:u,error:c}=t,d={select:["select",a,s&&"disabled",l&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(a)}`,u&&"iconOpen",s&&"disabled"]};return composeClasses(d,getNativeSelectUtilityClasses,n)},StyledSelectSelect=styled("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:n})=>n.variant!=="filled"&&n.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.select,n[a.variant],a.error&&n.error,{[`&.${nativeSelectClasses.multiple}`]:n.multiple}]}})({}),StyledSelectIcon=styled("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:n})=>n.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(n,a){const{className:s,disabled:l,error:u,IconComponent:c,inputRef:d,variant:Ct="standard",...ar}=n,en={...n,disabled:l,variant:Ct,error:u},tn=useUtilityClasses$m(en);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:en,className:clsx(tn.select,s),disabled:l,ref:d||a,...ar}),n.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:c,ownerState:en,className:tn.icon})]})});function getSelectUtilityClasses(t){return generateUtilityClass("MuiSelect",t)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`&.${selectClasses.select}`]:n.select},{[`&.${selectClasses.select}`]:n[a.variant]},{[`&.${selectClasses.error}`]:n.error},{[`&.${selectClasses.multiple}`]:n.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:t=>slotShouldForwardProp(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}function isEmpty(t){return t==null||typeof t=="string"&&!t.trim()}const useUtilityClasses$l=t=>{const{classes:n,variant:a,disabled:s,multiple:l,open:u,error:c}=t,d={select:["select",a,s&&"disabled",l&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(a)}`,u&&"iconOpen",s&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(d,getSelectUtilityClasses,n)},SelectInput=reactExports.forwardRef(function(n,a){const{"aria-describedby":s,"aria-label":l,autoFocus:u,autoWidth:c,children:d,className:Ct,defaultOpen:ar,defaultValue:en,disabled:tn,displayEmpty:on,error:fn=!1,IconComponent:dn,inputRef:Cn,labelId:Rn,MenuProps:ax={},multiple:ox,name:sx,onBlur:lx,onChange:cx,onClose:fx,onFocus:gx,onOpen:mx,open:px,readOnly:hx,renderValue:vx,required:yx,SelectDisplayProps:Sx={},tabIndex:_x,type:Ex,value:bx,variant:Ax="standard",...Mx}=n,[Rx,Cx]=useControlled({controlled:bx,default:en,name:"Select"}),[Lx,qx]=useControlled({controlled:px,default:ar,name:"Select"}),Ix=reactExports.useRef(null),Px=reactExports.useRef(null),[Nx,Bx]=reactExports.useState(null),{current:$x}=reactExports.useRef(px!=null),[Vx,Gx]=reactExports.useState(),Zx=useForkRef(a,Cn),jx=reactExports.useCallback(_E=>{Px.current=_E,_E&&Bx(_E)},[]),Hx=Nx?.parentNode;reactExports.useImperativeHandle(Zx,()=>({focus:()=>{Px.current.focus()},node:Ix.current,value:Rx}),[Rx]),reactExports.useEffect(()=>{ar&&Lx&&Nx&&!$x&&(Gx(c?null:Hx.clientWidth),Px.current.focus())},[Nx,c]),reactExports.useEffect(()=>{u&&Px.current.focus()},[u]),reactExports.useEffect(()=>{if(!Rn)return;const _E=ownerDocument(Px.current).getElementById(Rn);if(_E){const PE=()=>{getSelection().isCollapsed&&Px.current.focus()};return _E.addEventListener("click",PE),()=>{_E.removeEventListener("click",PE)}}},[Rn]);const iE=(_E,PE)=>{_E?mx&&mx(PE):fx&&fx(PE),$x||(Gx(c?null:Hx.clientWidth),qx(_E))},Xx=_E=>{_E.button===0&&(_E.preventDefault(),Px.current.focus(),iE(!0,_E))},rE=_E=>{iE(!1,_E)},uE=reactExports.Children.toArray(d),aE=_E=>{const PE=uE.find(NE=>NE.props.value===_E.target.value);PE!==void 0&&(Cx(PE.props.value),cx&&cx(_E,PE))},Kx=_E=>PE=>{let NE;if(PE.currentTarget.hasAttribute("tabindex")){if(ox){NE=Array.isArray(Rx)?Rx.slice():[];const lE=Rx.indexOf(_E.props.value);lE===-1?NE.push(_E.props.value):NE.splice(lE,1)}else NE=_E.props.value;if(_E.props.onClick&&_E.props.onClick(PE),Rx!==NE&&(Cx(NE),cx)){const lE=PE.nativeEvent||PE,gE=new lE.constructor(lE.type,lE);Object.defineProperty(gE,"target",{writable:!0,value:{value:NE,name:sx}}),cx(gE,_E)}ox||iE(!1,PE)}},ME=_E=>{hx||[" ","ArrowUp","ArrowDown","Enter"].includes(_E.key)&&(_E.preventDefault(),iE(!0,_E))},IE=Nx!==null&&Lx,wE=_E=>{!IE&&lx&&(Object.defineProperty(_E,"target",{writable:!0,value:{value:Rx,name:sx}}),lx(_E))};delete Mx["aria-invalid"];let bE,UE;const CE=[];let YE=!1;(isFilled({value:Rx})||on)&&(vx?bE=vx(Rx):YE=!0);const Ox=uE.map(_E=>{if(!reactExports.isValidElement(_E))return null;let PE;if(ox){if(!Array.isArray(Rx))throw new Error(formatMuiErrorMessage(2));PE=Rx.some(NE=>areEqualValues(NE,_E.props.value)),PE&&YE&&CE.push(_E.props.children)}else PE=areEqualValues(Rx,_E.props.value),PE&&YE&&(UE=_E.props.children);return reactExports.cloneElement(_E,{"aria-selected":PE?"true":"false",onClick:Kx(_E),onKeyUp:NE=>{NE.key===" "&&NE.preventDefault(),_E.props.onKeyUp&&_E.props.onKeyUp(NE)},role:"option",selected:PE,value:void 0,"data-value":_E.props.value})});YE&&(ox?CE.length===0?bE=null:bE=CE.reduce((_E,PE,NE)=>(_E.push(PE),NE<CE.length-1&&_E.push(", "),_E),[]):bE=UE);let Fx=Vx;!c&&$x&&Nx&&(Fx=Hx.clientWidth);let Wx;typeof _x<"u"?Wx=_x:Wx=tn?null:0;const Qx=Sx.id||(sx?`mui-component-select-${sx}`:void 0),oE={...n,variant:Ax,value:Rx,open:IE,error:fn},tE=useUtilityClasses$l(oE),mE={...ax.PaperProps,...typeof ax.slotProps?.paper=="function"?ax.slotProps.paper(oE):ax.slotProps?.paper},hE={...ax.MenuListProps,...typeof ax.slotProps?.list=="function"?ax.slotProps.list(oE):ax.slotProps?.list},SE=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:jx,tabIndex:Wx,role:"combobox","aria-controls":IE?SE:void 0,"aria-disabled":tn?"true":void 0,"aria-expanded":IE?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[Rn,Qx].filter(Boolean).join(" ")||void 0,"aria-describedby":s,"aria-required":yx?"true":void 0,"aria-invalid":fn?"true":void 0,onKeyDown:ME,onMouseDown:tn||hx?null:Xx,onBlur:wE,onFocus:gx,...Sx,ownerState:oE,className:clsx(Sx.className,tE.select,Ct),id:Qx,children:isEmpty(bE)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):bE}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":fn,value:Array.isArray(Rx)?Rx.join(","):Rx,name:sx,ref:Ix,"aria-hidden":!0,onChange:aE,tabIndex:-1,disabled:tn,className:tE.nativeInput,autoFocus:u,required:yx,...Mx,ownerState:oE}),jsxRuntimeExports.jsx(SelectIcon,{as:dn,className:tE.icon,ownerState:oE}),jsxRuntimeExports.jsx(Menu,{id:`menu-${sx||""}`,anchorEl:Hx,open:IE,onClose:rE,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...ax,slotProps:{...ax.slotProps,list:{"aria-labelledby":Rn,role:"listbox","aria-multiselectable":ox?"true":void 0,disableListWrap:!0,id:SE,...hE},paper:{...mE,style:{minWidth:Fx,...mE!=null?mE.style:null}}},children:Ox})]})}),ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"})),useUtilityClasses$k=t=>{const{classes:n}=t,s=composeClasses({root:["root"]},getSelectUtilityClasses,n);return{...n,...s}},styledRootConfig={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>rootShouldForwardProp(t)&&t!=="variant"},StyledInput=styled(Input,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiSelect",props:n}),{autoWidth:l=!1,children:u,classes:c={},className:d,defaultOpen:Ct=!1,displayEmpty:ar=!1,IconComponent:en=ArrowDropDownIcon,id:tn,input:on,inputProps:fn,label:dn,labelId:Cn,MenuProps:Rn,multiple:ax=!1,native:ox=!1,onClose:sx,onOpen:lx,open:cx,renderValue:fx,SelectDisplayProps:gx,variant:mx="outlined",...px}=s,hx=ox?NativeSelectInput:SelectInput,vx=useFormControl(),yx=formControlState({props:s,muiFormControl:vx,states:["variant","error"]}),Sx=yx.variant||mx,_x={...s,variant:Sx,classes:c},Ex=useUtilityClasses$k(_x),{root:bx,...Ax}=Ex,Mx=on||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:_x}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:dn,ownerState:_x}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:_x})}[Sx],Rx=useForkRef(a,getReactElementRef(Mx));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(Mx,{inputComponent:hx,inputProps:{children:u,error:yx.error,IconComponent:en,variant:Sx,type:void 0,multiple:ax,...ox?{id:tn}:{autoWidth:l,defaultOpen:Ct,displayEmpty:ar,labelId:Cn,MenuProps:Rn,onClose:sx,onOpen:lx,open:cx,renderValue:fx,SelectDisplayProps:{id:tn,...gx}},...fn,classes:fn?deepmerge(Ax,fn.classes):Ax,...on?on.props.inputProps:{}},...(ax&&ox||ar)&&Sx==="outlined"?{notched:!0}:{},ref:Rx,className:clsx(Mx.props.className,d,Ex.root),...!on&&{variant:Sx},...px})})});Select.muiName="Select";function getTextFieldUtilityClass(t){return generateUtilityClass("MuiTextField",t)}generateUtilityClasses("MuiTextField",["root"]);const variantComponent={standard:Input,filled:FilledInput,outlined:OutlinedInput},useUtilityClasses$j=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTextFieldUtilityClass,n)},TextFieldRoot=styled(FormControl,{name:"MuiTextField",slot:"Root"})({}),TextField=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTextField"}),{autoComplete:l,autoFocus:u=!1,children:c,className:d,color:Ct="primary",defaultValue:ar,disabled:en=!1,error:tn=!1,FormHelperTextProps:on,fullWidth:fn=!1,helperText:dn,id:Cn,InputLabelProps:Rn,inputProps:ax,InputProps:ox,inputRef:sx,label:lx,maxRows:cx,minRows:fx,multiline:gx=!1,name:mx,onBlur:px,onChange:hx,onFocus:vx,placeholder:yx,required:Sx=!1,rows:_x,select:Ex=!1,SelectProps:bx,slots:Ax={},slotProps:Mx={},type:Rx,value:Cx,variant:Lx="outlined",...qx}=s,Ix={...s,autoFocus:u,color:Ct,disabled:en,error:tn,fullWidth:fn,multiline:gx,required:Sx,select:Ex,variant:Lx},Px=useUtilityClasses$j(Ix),Nx=useId(Cn),Bx=dn&&Nx?`${Nx}-helper-text`:void 0,$x=lx&&Nx?`${Nx}-label`:void 0,Vx=variantComponent[Lx],Gx={slots:Ax,slotProps:{input:ox,inputLabel:Rn,htmlInput:ax,formHelperText:on,select:bx,...Mx}},Zx={},jx=Gx.slotProps.inputLabel;Lx==="outlined"&&(jx&&typeof jx.shrink<"u"&&(Zx.notched=jx.shrink),Zx.label=lx),Ex&&((!bx||!bx.native)&&(Zx.id=void 0),Zx["aria-describedby"]=void 0);const[Hx,iE]=useSlot("root",{elementType:TextFieldRoot,shouldForwardComponentProp:!0,externalForwardedProps:{...Gx,...qx},ownerState:Ix,className:clsx(Px.root,d),ref:a,additionalProps:{disabled:en,error:tn,fullWidth:fn,required:Sx,color:Ct,variant:Lx}}),[Xx,rE]=useSlot("input",{elementType:Vx,externalForwardedProps:Gx,additionalProps:Zx,ownerState:Ix}),[uE,aE]=useSlot("inputLabel",{elementType:InputLabel,externalForwardedProps:Gx,ownerState:Ix}),[Kx,ME]=useSlot("htmlInput",{elementType:"input",externalForwardedProps:Gx,ownerState:Ix}),[IE,wE]=useSlot("formHelperText",{elementType:FormHelperText,externalForwardedProps:Gx,ownerState:Ix}),[bE,UE]=useSlot("select",{elementType:Select,externalForwardedProps:Gx,ownerState:Ix}),CE=jsxRuntimeExports.jsx(Xx,{"aria-describedby":Bx,autoComplete:l,autoFocus:u,defaultValue:ar,fullWidth:fn,multiline:gx,name:mx,rows:_x,maxRows:cx,minRows:fx,type:Rx,value:Cx,id:Nx,inputRef:sx,onBlur:px,onChange:hx,onFocus:vx,placeholder:yx,inputProps:ME,slots:{input:Ax.htmlInput?Kx:void 0},...rE});return jsxRuntimeExports.jsxs(Hx,{...iE,children:[lx!=null&&lx!==""&&jsxRuntimeExports.jsx(uE,{htmlFor:Nx,id:$x,...aE,children:lx}),Ex?jsxRuntimeExports.jsx(bE,{"aria-describedby":Bx,id:Nx,labelId:$x,value:Cx,input:CE,...UE,children:c}):CE,dn&&jsxRuntimeExports.jsx(IE,{id:Bx,...wE,children:dn})]})});function getTypographyUtilityClass(t){return generateUtilityClass("MuiTypography",t)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const v6Colors$1={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$i=t=>{const{align:n,gutterBottom:a,noWrap:s,paragraph:l,variant:u,classes:c}=t,d={root:["root",u,t.align!=="inherit"&&`align${capitalize(n)}`,a&&"gutterBottom",s&&"noWrap",l&&"paragraph"]};return composeClasses(d,getTypographyUtilityClass,c)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.variant&&n[a.variant],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.noWrap&&n.noWrap,a.gutterBottom&&n.gutterBottom,a.paragraph&&n.paragraph]}})(memoTheme(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,a])=>n!=="inherit"&&a&&typeof a=="object").map(([n,a])=>({props:{variant:n},style:a})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette?.text||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${capitalize(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}))),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(n,a){const{color:s,...l}=useDefaultProps({props:n,name:"MuiTypography"}),u=!v6Colors$1[s],c=extendSxProp({...l,...u&&{color:s}}),{align:d="inherit",className:Ct,component:ar,gutterBottom:en=!1,noWrap:tn=!1,paragraph:on=!1,variant:fn="body1",variantMapping:dn=defaultVariantMapping,...Cn}=c,Rn={...c,align:d,color:s,className:Ct,component:ar,gutterBottom:en,noWrap:tn,paragraph:on,variant:fn,variantMapping:dn},ax=ar||(on?"p":dn[fn]||defaultVariantMapping[fn])||"span",ox=useUtilityClasses$i(Rn);return jsxRuntimeExports.jsx(TypographyRoot,{as:ax,ref:a,className:clsx(ox.root,Ct),...Cn,ownerState:Rn,style:{...d!=="inherit"&&{"--Typography-textAlign":d},...Cn.style}})}),Stack=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiStack"})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function getMenuItemUtilityClass(t){return generateUtilityClass("MuiMenuItem",t)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.dense&&n.dense,a.divider&&n.divider,!a.disableGutters&&n.gutters]},useUtilityClasses$h=t=>{const{disabled:n,dense:a,divider:s,disableGutters:l,selected:u,classes:c}=t,Ct=composeClasses({root:["root",a&&"dense",n&&"disabled",!l&&"gutters",s&&"divider",u&&"selected"]},getMenuItemUtilityClass,c);return{...c,...Ct}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:n})=>n.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:n})=>!n.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:n})=>n.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiMenuItem"}),{autoFocus:l=!1,component:u="li",dense:c=!1,divider:d=!1,disableGutters:Ct=!1,focusVisibleClassName:ar,role:en="menuitem",tabIndex:tn,className:on,...fn}=s,dn=reactExports.useContext(ListContext),Cn=reactExports.useMemo(()=>({dense:c||dn.dense||!1,disableGutters:Ct}),[dn.dense,c,Ct]),Rn=reactExports.useRef(null);useEnhancedEffect(()=>{l&&Rn.current&&Rn.current.focus()},[l]);const ax={...s,dense:Cn.dense,divider:d,disableGutters:Ct},ox=useUtilityClasses$h(s),sx=useForkRef(Rn,a);let lx;return s.disabled||(lx=tn!==void 0?tn:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:Cn,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:sx,role:en,tabIndex:lx,component:u,focusVisibleClassName:clsx(ox.focusVisible,ar),className:clsx(ox.root,on),...fn,ownerState:ax,classes:ox})})});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const useUtilityClasses$g=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getCardUtilityClass,n)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Card=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiCard"}),{className:l,raised:u=!1,...c}=s,d={...s,raised:u},Ct=useUtilityClasses$g(d);return jsxRuntimeExports.jsx(CardRoot,{className:clsx(Ct.root,l),elevation:u?8:void 0,ref:a,ownerState:d,...c})});function ComponentAdjuster({componentValues:t,setComponentValues:n}){function a(l,u){n(c=>({...c,[l]:{...c[l],value:u}}))}function s(l,u){n(c=>({...c,[l]:{...c[l],unit:u}}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:Object.keys(t).map(l=>jsxRuntimeExports.jsx(Grid$1,{size:{md:3},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1,width:"100%"},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:l}),jsxRuntimeExports.jsx(TextField,{name:l,value:t[l].value,sx:{width:"8ch"},size:"small",onChange:u=>a(l,u.target.value)}),jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[l].unit,onChange:u=>s(l,u.target.value),children:Object.keys(units[t[l].type]).map(u=>jsxRuntimeExports.jsx(MenuItem,{value:u,size:"small",children:u},u))})})]})})},l))})}function FreqAdjusters({settings:t,setSettings:n}){function a(s,l){n(u=>({...u,[s]:l}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:[["fmin","fminUnit"],["fmax","fmaxUnit"],["resolution",null]].map(s=>jsxRuntimeExports.jsx(Grid$1,{size:{xs:12,sm:6,md:4},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:s[0]}),jsxRuntimeExports.jsx(TextField,{name:s[0],value:t[s[0]],sx:{width:"8ch"},size:"small",onChange:l=>a(s[0],l.target.value)}),s[1]!==null&&jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[s[1]],onChange:l=>a(s[1],l.target.value),children:Object.keys(units.frequency).map(l=>jsxRuntimeExports.jsx(MenuItem,{value:l,size:"small",children:l},l))})})]})})},s[0]))})}var algebrite={},BigInteger={exports:{}},hasRequiredBigInteger;function requireBigInteger(){return hasRequiredBigInteger||(hasRequiredBigInteger=1,(function(t){var n=(function(a){var s=1e7,l=7,u=9007199254740992,c=dn(u),d="0123456789abcdefghijklmnopqrstuvwxyz",Ct=typeof BigInt=="function";function ar(Ox,Fx,Wx,Qx){return typeof Ox>"u"?ar[0]:typeof Fx<"u"?+Fx==10&&!Wx?CE(Ox):aE(Ox,Fx,Wx,Qx):CE(Ox)}function en(Ox,Fx){this.value=Ox,this.sign=Fx,this.isSmall=!1}en.prototype=Object.create(ar.prototype);function tn(Ox){this.value=Ox,this.sign=Ox<0,this.isSmall=!0}tn.prototype=Object.create(ar.prototype);function on(Ox){this.value=Ox}on.prototype=Object.create(ar.prototype);function fn(Ox){return-u<Ox&&Ox<u}function dn(Ox){return Ox<1e7?[Ox]:Ox<1e14?[Ox%1e7,Math.floor(Ox/1e7)]:[Ox%1e7,Math.floor(Ox/1e7)%1e7,Math.floor(Ox/1e14)]}function Cn(Ox){Rn(Ox);var Fx=Ox.length;if(Fx<4&&Cx(Ox,c)<0)switch(Fx){case 0:return 0;case 1:return Ox[0];case 2:return Ox[0]+Ox[1]*s;default:return Ox[0]+(Ox[1]+Ox[2]*s)*s}return Ox}function Rn(Ox){for(var Fx=Ox.length;Ox[--Fx]===0;);Ox.length=Fx+1}function ax(Ox){for(var Fx=new Array(Ox),Wx=-1;++Wx<Ox;)Fx[Wx]=0;return Fx}function ox(Ox){return Ox>0?Math.floor(Ox):Math.ceil(Ox)}function sx(Ox,Fx){var Wx=Ox.length,Qx=Fx.length,oE=new Array(Wx),tE=0,mE=s,hE,SE;for(SE=0;SE<Qx;SE++)hE=Ox[SE]+Fx[SE]+tE,tE=hE>=mE?1:0,oE[SE]=hE-tE*mE;for(;SE<Wx;)hE=Ox[SE]+tE,tE=hE===mE?1:0,oE[SE++]=hE-tE*mE;return tE>0&&oE.push(tE),oE}function lx(Ox,Fx){return Ox.length>=Fx.length?sx(Ox,Fx):sx(Fx,Ox)}function cx(Ox,Fx){var Wx=Ox.length,Qx=new Array(Wx),oE=s,tE,mE;for(mE=0;mE<Wx;mE++)tE=Ox[mE]-oE+Fx,Fx=Math.floor(tE/oE),Qx[mE]=tE-Fx*oE,Fx+=1;for(;Fx>0;)Qx[mE++]=Fx%oE,Fx=Math.floor(Fx/oE);return Qx}en.prototype.add=function(Ox){var Fx=CE(Ox);if(this.sign!==Fx.sign)return this.subtract(Fx.negate());var Wx=this.value,Qx=Fx.value;return Fx.isSmall?new en(cx(Wx,Math.abs(Qx)),this.sign):new en(lx(Wx,Qx),this.sign)},en.prototype.plus=en.prototype.add,tn.prototype.add=function(Ox){var Fx=CE(Ox),Wx=this.value;if(Wx<0!==Fx.sign)return this.subtract(Fx.negate());var Qx=Fx.value;if(Fx.isSmall){if(fn(Wx+Qx))return new tn(Wx+Qx);Qx=dn(Math.abs(Qx))}return new en(cx(Qx,Math.abs(Wx)),Wx<0)},tn.prototype.plus=tn.prototype.add,on.prototype.add=function(Ox){return new on(this.value+CE(Ox).value)},on.prototype.plus=on.prototype.add;function fx(Ox,Fx){var Wx=Ox.length,Qx=Fx.length,oE=new Array(Wx),tE=0,mE=s,hE,SE;for(hE=0;hE<Qx;hE++)SE=Ox[hE]-tE-Fx[hE],SE<0?(SE+=mE,tE=1):tE=0,oE[hE]=SE;for(hE=Qx;hE<Wx;hE++){if(SE=Ox[hE]-tE,SE<0)SE+=mE;else{oE[hE++]=SE;break}oE[hE]=SE}for(;hE<Wx;hE++)oE[hE]=Ox[hE];return Rn(oE),oE}function gx(Ox,Fx,Wx){var Qx;return Cx(Ox,Fx)>=0?Qx=fx(Ox,Fx):(Qx=fx(Fx,Ox),Wx=!Wx),Qx=Cn(Qx),typeof Qx=="number"?(Wx&&(Qx=-Qx),new tn(Qx)):new en(Qx,Wx)}function mx(Ox,Fx,Wx){var Qx=Ox.length,oE=new Array(Qx),tE=-Fx,mE=s,hE,SE;for(hE=0;hE<Qx;hE++)SE=Ox[hE]+tE,tE=Math.floor(SE/mE),SE%=mE,oE[hE]=SE<0?SE+mE:SE;return oE=Cn(oE),typeof oE=="number"?(Wx&&(oE=-oE),new tn(oE)):new en(oE,Wx)}en.prototype.subtract=function(Ox){var Fx=CE(Ox);if(this.sign!==Fx.sign)return this.add(Fx.negate());var Wx=this.value,Qx=Fx.value;return Fx.isSmall?mx(Wx,Math.abs(Qx),this.sign):gx(Wx,Qx,this.sign)},en.prototype.minus=en.prototype.subtract,tn.prototype.subtract=function(Ox){var Fx=CE(Ox),Wx=this.value;if(Wx<0!==Fx.sign)return this.add(Fx.negate());var Qx=Fx.value;return Fx.isSmall?new tn(Wx-Qx):mx(Qx,Math.abs(Wx),Wx>=0)},tn.prototype.minus=tn.prototype.subtract,on.prototype.subtract=function(Ox){return new on(this.value-CE(Ox).value)},on.prototype.minus=on.prototype.subtract,en.prototype.negate=function(){return new en(this.value,!this.sign)},tn.prototype.negate=function(){var Ox=this.sign,Fx=new tn(-this.value);return Fx.sign=!Ox,Fx},on.prototype.negate=function(){return new on(-this.value)},en.prototype.abs=function(){return new en(this.value,!1)},tn.prototype.abs=function(){return new tn(Math.abs(this.value))},on.prototype.abs=function(){return new on(this.value>=0?this.value:-this.value)};function px(Ox,Fx){var Wx=Ox.length,Qx=Fx.length,oE=Wx+Qx,tE=ax(oE),mE=s,hE,SE,_E,PE,NE;for(_E=0;_E<Wx;++_E){PE=Ox[_E];for(var lE=0;lE<Qx;++lE)NE=Fx[lE],hE=PE*NE+tE[_E+lE],SE=Math.floor(hE/mE),tE[_E+lE]=hE-SE*mE,tE[_E+lE+1]+=SE}return Rn(tE),tE}function hx(Ox,Fx){var Wx=Ox.length,Qx=new Array(Wx),oE=s,tE=0,mE,hE;for(hE=0;hE<Wx;hE++)mE=Ox[hE]*Fx+tE,tE=Math.floor(mE/oE),Qx[hE]=mE-tE*oE;for(;tE>0;)Qx[hE++]=tE%oE,tE=Math.floor(tE/oE);return Qx}function vx(Ox,Fx){for(var Wx=[];Fx-- >0;)Wx.push(0);return Wx.concat(Ox)}function yx(Ox,Fx){var Wx=Math.max(Ox.length,Fx.length);if(Wx<=30)return px(Ox,Fx);Wx=Math.ceil(Wx/2);var Qx=Ox.slice(Wx),oE=Ox.slice(0,Wx),tE=Fx.slice(Wx),mE=Fx.slice(0,Wx),hE=yx(oE,mE),SE=yx(Qx,tE),_E=yx(lx(oE,Qx),lx(mE,tE)),PE=lx(lx(hE,vx(fx(fx(_E,hE),SE),Wx)),vx(SE,2*Wx));return Rn(PE),PE}function Sx(Ox,Fx){return-.012*Ox-.012*Fx+15e-6*Ox*Fx>0}en.prototype.multiply=function(Ox){var Fx=CE(Ox),Wx=this.value,Qx=Fx.value,oE=this.sign!==Fx.sign,tE;if(Fx.isSmall){if(Qx===0)return ar[0];if(Qx===1)return this;if(Qx===-1)return this.negate();if(tE=Math.abs(Qx),tE<s)return new en(hx(Wx,tE),oE);Qx=dn(tE)}return Sx(Wx.length,Qx.length)?new en(yx(Wx,Qx),oE):new en(px(Wx,Qx),oE)},en.prototype.times=en.prototype.multiply;function _x(Ox,Fx,Wx){return Ox<s?new en(hx(Fx,Ox),Wx):new en(px(Fx,dn(Ox)),Wx)}tn.prototype._multiplyBySmall=function(Ox){return fn(Ox.value*this.value)?new tn(Ox.value*this.value):_x(Math.abs(Ox.value),dn(Math.abs(this.value)),this.sign!==Ox.sign)},en.prototype._multiplyBySmall=function(Ox){return Ox.value===0?ar[0]:Ox.value===1?this:Ox.value===-1?this.negate():_x(Math.abs(Ox.value),this.value,this.sign!==Ox.sign)},tn.prototype.multiply=function(Ox){return CE(Ox)._multiplyBySmall(this)},tn.prototype.times=tn.prototype.multiply,on.prototype.multiply=function(Ox){return new on(this.value*CE(Ox).value)},on.prototype.times=on.prototype.multiply;function Ex(Ox){var Fx=Ox.length,Wx=ax(Fx+Fx),Qx=s,oE,tE,mE,hE,SE;for(mE=0;mE<Fx;mE++){hE=Ox[mE],tE=0-hE*hE;for(var _E=mE;_E<Fx;_E++)SE=Ox[_E],oE=2*(hE*SE)+Wx[mE+_E]+tE,tE=Math.floor(oE/Qx),Wx[mE+_E]=oE-tE*Qx;Wx[mE+Fx]=tE}return Rn(Wx),Wx}en.prototype.square=function(){return new en(Ex(this.value),!1)},tn.prototype.square=function(){var Ox=this.value*this.value;return fn(Ox)?new tn(Ox):new en(Ex(dn(Math.abs(this.value))),!1)},on.prototype.square=function(Ox){return new on(this.value*this.value)};function bx(Ox,Fx){var Wx=Ox.length,Qx=Fx.length,oE=s,tE=ax(Fx.length),mE=Fx[Qx-1],hE=Math.ceil(oE/(2*mE)),SE=hx(Ox,hE),_E=hx(Fx,hE),PE,NE,lE,gE,AE,yE,DE;for(SE.length<=Wx&&SE.push(0),_E.push(0),mE=_E[Qx-1],NE=Wx-Qx;NE>=0;NE--){for(PE=oE-1,SE[NE+Qx]!==mE&&(PE=Math.floor((SE[NE+Qx]*oE+SE[NE+Qx-1])/mE)),lE=0,gE=0,yE=_E.length,AE=0;AE<yE;AE++)lE+=PE*_E[AE],DE=Math.floor(lE/oE),gE+=SE[NE+AE]-(lE-DE*oE),lE=DE,gE<0?(SE[NE+AE]=gE+oE,gE=-1):(SE[NE+AE]=gE,gE=0);for(;gE!==0;){for(PE-=1,lE=0,AE=0;AE<yE;AE++)lE+=SE[NE+AE]-oE+_E[AE],lE<0?(SE[NE+AE]=lE+oE,lE=0):(SE[NE+AE]=lE,lE=1);gE+=lE}tE[NE]=PE}return SE=Mx(SE,hE)[0],[Cn(tE),Cn(SE)]}function Ax(Ox,Fx){for(var Wx=Ox.length,Qx=Fx.length,oE=[],tE=[],mE=s,hE,SE,_E,PE,NE;Wx;){if(tE.unshift(Ox[--Wx]),Rn(tE),Cx(tE,Fx)<0){oE.push(0);continue}SE=tE.length,_E=tE[SE-1]*mE+tE[SE-2],PE=Fx[Qx-1]*mE+Fx[Qx-2],SE>Qx&&(_E=(_E+1)*mE),hE=Math.ceil(_E/PE);do{if(NE=hx(Fx,hE),Cx(NE,tE)<=0)break;hE--}while(hE);oE.push(hE),tE=fx(tE,NE)}return oE.reverse(),[Cn(oE),Cn(tE)]}function Mx(Ox,Fx){var Wx=Ox.length,Qx=ax(Wx),oE=s,tE,mE,hE,SE;for(hE=0,tE=Wx-1;tE>=0;--tE)SE=hE*oE+Ox[tE],mE=ox(SE/Fx),hE=SE-mE*Fx,Qx[tE]=mE|0;return[Qx,hE|0]}function Rx(Ox,Fx){var Wx,Qx=CE(Fx);if(Ct)return[new on(Ox.value/Qx.value),new on(Ox.value%Qx.value)];var oE=Ox.value,tE=Qx.value,mE;if(tE===0)throw new Error("Cannot divide by zero");if(Ox.isSmall)return Qx.isSmall?[new tn(ox(oE/tE)),new tn(oE%tE)]:[ar[0],Ox];if(Qx.isSmall){if(tE===1)return[Ox,ar[0]];if(tE==-1)return[Ox.negate(),ar[0]];var hE=Math.abs(tE);if(hE<s){Wx=Mx(oE,hE),mE=Cn(Wx[0]);var SE=Wx[1];return Ox.sign&&(SE=-SE),typeof mE=="number"?(Ox.sign!==Qx.sign&&(mE=-mE),[new tn(mE),new tn(SE)]):[new en(mE,Ox.sign!==Qx.sign),new tn(SE)]}tE=dn(hE)}var _E=Cx(oE,tE);if(_E===-1)return[ar[0],Ox];if(_E===0)return[ar[Ox.sign===Qx.sign?1:-1],ar[0]];oE.length+tE.length<=200?Wx=bx(oE,tE):Wx=Ax(oE,tE),mE=Wx[0];var PE=Ox.sign!==Qx.sign,NE=Wx[1],lE=Ox.sign;return typeof mE=="number"?(PE&&(mE=-mE),mE=new tn(mE)):mE=new en(mE,PE),typeof NE=="number"?(lE&&(NE=-NE),NE=new tn(NE)):NE=new en(NE,lE),[mE,NE]}en.prototype.divmod=function(Ox){var Fx=Rx(this,Ox);return{quotient:Fx[0],remainder:Fx[1]}},on.prototype.divmod=tn.prototype.divmod=en.prototype.divmod,en.prototype.divide=function(Ox){return Rx(this,Ox)[0]},on.prototype.over=on.prototype.divide=function(Ox){return new on(this.value/CE(Ox).value)},tn.prototype.over=tn.prototype.divide=en.prototype.over=en.prototype.divide,en.prototype.mod=function(Ox){return Rx(this,Ox)[1]},on.prototype.mod=on.prototype.remainder=function(Ox){return new on(this.value%CE(Ox).value)},tn.prototype.remainder=tn.prototype.mod=en.prototype.remainder=en.prototype.mod,en.prototype.pow=function(Ox){var Fx=CE(Ox),Wx=this.value,Qx=Fx.value,oE,tE,mE;if(Qx===0)return ar[1];if(Wx===0)return ar[0];if(Wx===1)return ar[1];if(Wx===-1)return Fx.isEven()?ar[1]:ar[-1];if(Fx.sign)return ar[0];if(!Fx.isSmall)throw new Error("The exponent "+Fx.toString()+" is too large.");if(this.isSmall&&fn(oE=Math.pow(Wx,Qx)))return new tn(ox(oE));for(tE=this,mE=ar[1];Qx&!0&&(mE=mE.times(tE),--Qx),Qx!==0;)Qx/=2,tE=tE.square();return mE},tn.prototype.pow=en.prototype.pow,on.prototype.pow=function(Ox){var Fx=CE(Ox),Wx=this.value,Qx=Fx.value,oE=BigInt(0),tE=BigInt(1),mE=BigInt(2);if(Qx===oE)return ar[1];if(Wx===oE)return ar[0];if(Wx===tE)return ar[1];if(Wx===BigInt(-1))return Fx.isEven()?ar[1]:ar[-1];if(Fx.isNegative())return new on(oE);for(var hE=this,SE=ar[1];(Qx&tE)===tE&&(SE=SE.times(hE),--Qx),Qx!==oE;)Qx/=mE,hE=hE.square();return SE},en.prototype.modPow=function(Ox,Fx){if(Ox=CE(Ox),Fx=CE(Fx),Fx.isZero())throw new Error("Cannot take modPow with modulus 0");var Wx=ar[1],Qx=this.mod(Fx);for(Ox.isNegative()&&(Ox=Ox.multiply(ar[-1]),Qx=Qx.modInv(Fx));Ox.isPositive();){if(Qx.isZero())return ar[0];Ox.isOdd()&&(Wx=Wx.multiply(Qx).mod(Fx)),Ox=Ox.divide(2),Qx=Qx.square().mod(Fx)}return Wx},on.prototype.modPow=tn.prototype.modPow=en.prototype.modPow;function Cx(Ox,Fx){if(Ox.length!==Fx.length)return Ox.length>Fx.length?1:-1;for(var Wx=Ox.length-1;Wx>=0;Wx--)if(Ox[Wx]!==Fx[Wx])return Ox[Wx]>Fx[Wx]?1:-1;return 0}en.prototype.compareAbs=function(Ox){var Fx=CE(Ox),Wx=this.value,Qx=Fx.value;return Fx.isSmall?1:Cx(Wx,Qx)},tn.prototype.compareAbs=function(Ox){var Fx=CE(Ox),Wx=Math.abs(this.value),Qx=Fx.value;return Fx.isSmall?(Qx=Math.abs(Qx),Wx===Qx?0:Wx>Qx?1:-1):-1},on.prototype.compareAbs=function(Ox){var Fx=this.value,Wx=CE(Ox).value;return Fx=Fx>=0?Fx:-Fx,Wx=Wx>=0?Wx:-Wx,Fx===Wx?0:Fx>Wx?1:-1},en.prototype.compare=function(Ox){if(Ox===1/0)return-1;if(Ox===-1/0)return 1;var Fx=CE(Ox),Wx=this.value,Qx=Fx.value;return this.sign!==Fx.sign?Fx.sign?1:-1:Fx.isSmall?this.sign?-1:1:Cx(Wx,Qx)*(this.sign?-1:1)},en.prototype.compareTo=en.prototype.compare,tn.prototype.compare=function(Ox){if(Ox===1/0)return-1;if(Ox===-1/0)return 1;var Fx=CE(Ox),Wx=this.value,Qx=Fx.value;return Fx.isSmall?Wx==Qx?0:Wx>Qx?1:-1:Wx<0!==Fx.sign?Wx<0?-1:1:Wx<0?1:-1},tn.prototype.compareTo=tn.prototype.compare,on.prototype.compare=function(Ox){if(Ox===1/0)return-1;if(Ox===-1/0)return 1;var Fx=this.value,Wx=CE(Ox).value;return Fx===Wx?0:Fx>Wx?1:-1},on.prototype.compareTo=on.prototype.compare,en.prototype.equals=function(Ox){return this.compare(Ox)===0},on.prototype.eq=on.prototype.equals=tn.prototype.eq=tn.prototype.equals=en.prototype.eq=en.prototype.equals,en.prototype.notEquals=function(Ox){return this.compare(Ox)!==0},on.prototype.neq=on.prototype.notEquals=tn.prototype.neq=tn.prototype.notEquals=en.prototype.neq=en.prototype.notEquals,en.prototype.greater=function(Ox){return this.compare(Ox)>0},on.prototype.gt=on.prototype.greater=tn.prototype.gt=tn.prototype.greater=en.prototype.gt=en.prototype.greater,en.prototype.lesser=function(Ox){return this.compare(Ox)<0},on.prototype.lt=on.prototype.lesser=tn.prototype.lt=tn.prototype.lesser=en.prototype.lt=en.prototype.lesser,en.prototype.greaterOrEquals=function(Ox){return this.compare(Ox)>=0},on.prototype.geq=on.prototype.greaterOrEquals=tn.prototype.geq=tn.prototype.greaterOrEquals=en.prototype.geq=en.prototype.greaterOrEquals,en.prototype.lesserOrEquals=function(Ox){return this.compare(Ox)<=0},on.prototype.leq=on.prototype.lesserOrEquals=tn.prototype.leq=tn.prototype.lesserOrEquals=en.prototype.leq=en.prototype.lesserOrEquals,en.prototype.isEven=function(){return(this.value[0]&1)===0},tn.prototype.isEven=function(){return(this.value&1)===0},on.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},en.prototype.isOdd=function(){return(this.value[0]&1)===1},tn.prototype.isOdd=function(){return(this.value&1)===1},on.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},en.prototype.isPositive=function(){return!this.sign},tn.prototype.isPositive=function(){return this.value>0},on.prototype.isPositive=tn.prototype.isPositive,en.prototype.isNegative=function(){return this.sign},tn.prototype.isNegative=function(){return this.value<0},on.prototype.isNegative=tn.prototype.isNegative,en.prototype.isUnit=function(){return!1},tn.prototype.isUnit=function(){return Math.abs(this.value)===1},on.prototype.isUnit=function(){return this.abs().value===BigInt(1)},en.prototype.isZero=function(){return!1},tn.prototype.isZero=function(){return this.value===0},on.prototype.isZero=function(){return this.value===BigInt(0)},en.prototype.isDivisibleBy=function(Ox){var Fx=CE(Ox);return Fx.isZero()?!1:Fx.isUnit()?!0:Fx.compareAbs(2)===0?this.isEven():this.mod(Fx).isZero()},on.prototype.isDivisibleBy=tn.prototype.isDivisibleBy=en.prototype.isDivisibleBy;function Lx(Ox){var Fx=Ox.abs();if(Fx.isUnit())return!1;if(Fx.equals(2)||Fx.equals(3)||Fx.equals(5))return!0;if(Fx.isEven()||Fx.isDivisibleBy(3)||Fx.isDivisibleBy(5))return!1;if(Fx.lesser(49))return!0}function qx(Ox,Fx){for(var Wx=Ox.prev(),Qx=Wx,oE=0,tE,mE,hE;Qx.isEven();)Qx=Qx.divide(2),oE++;e:for(mE=0;mE<Fx.length;mE++)if(!Ox.lesser(Fx[mE])&&(hE=n(Fx[mE]).modPow(Qx,Ox),!(hE.isUnit()||hE.equals(Wx)))){for(tE=oE-1;tE!=0;tE--){if(hE=hE.square().mod(Ox),hE.isUnit())return!1;if(hE.equals(Wx))continue e}return!1}return!0}en.prototype.isPrime=function(Ox){var Fx=Lx(this);if(Fx!==a)return Fx;var Wx=this.abs(),Qx=Wx.bitLength();if(Qx<=64)return qx(Wx,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var oE=Math.log(2)*Qx.toJSNumber(),tE=Math.ceil(Ox===!0?2*Math.pow(oE,2):oE),mE=[],hE=0;hE<tE;hE++)mE.push(n(hE+2));return qx(Wx,mE)},on.prototype.isPrime=tn.prototype.isPrime=en.prototype.isPrime,en.prototype.isProbablePrime=function(Ox,Fx){var Wx=Lx(this);if(Wx!==a)return Wx;for(var Qx=this.abs(),oE=Ox===a?5:Ox,tE=[],mE=0;mE<oE;mE++)tE.push(n.randBetween(2,Qx.minus(2),Fx));return qx(Qx,tE)},on.prototype.isProbablePrime=tn.prototype.isProbablePrime=en.prototype.isProbablePrime,en.prototype.modInv=function(Ox){for(var Fx=n.zero,Wx=n.one,Qx=CE(Ox),oE=this.abs(),tE,mE,hE;!oE.isZero();)tE=Qx.divide(oE),mE=Fx,hE=Qx,Fx=Wx,Qx=oE,Wx=mE.subtract(tE.multiply(Wx)),oE=hE.subtract(tE.multiply(oE));if(!Qx.isUnit())throw new Error(this.toString()+" and "+Ox.toString()+" are not co-prime");return Fx.compare(0)===-1&&(Fx=Fx.add(Ox)),this.isNegative()?Fx.negate():Fx},on.prototype.modInv=tn.prototype.modInv=en.prototype.modInv,en.prototype.next=function(){var Ox=this.value;return this.sign?mx(Ox,1,this.sign):new en(cx(Ox,1),this.sign)},tn.prototype.next=function(){var Ox=this.value;return Ox+1<u?new tn(Ox+1):new en(c,!1)},on.prototype.next=function(){return new on(this.value+BigInt(1))},en.prototype.prev=function(){var Ox=this.value;return this.sign?new en(cx(Ox,1),!0):mx(Ox,1,this.sign)},tn.prototype.prev=function(){var Ox=this.value;return Ox-1>-u?new tn(Ox-1):new en(c,!0)},on.prototype.prev=function(){return new on(this.value-BigInt(1))};for(var Ix=[1];2*Ix[Ix.length-1]<=s;)Ix.push(2*Ix[Ix.length-1]);var Px=Ix.length,Nx=Ix[Px-1];function Bx(Ox){return Math.abs(Ox)<=s}en.prototype.shiftLeft=function(Ox){var Fx=CE(Ox).toJSNumber();if(!Bx(Fx))throw new Error(String(Fx)+" is too large for shifting.");if(Fx<0)return this.shiftRight(-Fx);var Wx=this;if(Wx.isZero())return Wx;for(;Fx>=Px;)Wx=Wx.multiply(Nx),Fx-=Px-1;return Wx.multiply(Ix[Fx])},on.prototype.shiftLeft=tn.prototype.shiftLeft=en.prototype.shiftLeft,en.prototype.shiftRight=function(Ox){var Fx,Wx=CE(Ox).toJSNumber();if(!Bx(Wx))throw new Error(String(Wx)+" is too large for shifting.");if(Wx<0)return this.shiftLeft(-Wx);for(var Qx=this;Wx>=Px;){if(Qx.isZero()||Qx.isNegative()&&Qx.isUnit())return Qx;Fx=Rx(Qx,Nx),Qx=Fx[1].isNegative()?Fx[0].prev():Fx[0],Wx-=Px-1}return Fx=Rx(Qx,Ix[Wx]),Fx[1].isNegative()?Fx[0].prev():Fx[0]},on.prototype.shiftRight=tn.prototype.shiftRight=en.prototype.shiftRight;function $x(Ox,Fx,Wx){Fx=CE(Fx);for(var Qx=Ox.isNegative(),oE=Fx.isNegative(),tE=Qx?Ox.not():Ox,mE=oE?Fx.not():Fx,hE=0,SE=0,_E=null,PE=null,NE=[];!tE.isZero()||!mE.isZero();)_E=Rx(tE,Nx),hE=_E[1].toJSNumber(),Qx&&(hE=Nx-1-hE),PE=Rx(mE,Nx),SE=PE[1].toJSNumber(),oE&&(SE=Nx-1-SE),tE=_E[0],mE=PE[0],NE.push(Wx(hE,SE));for(var lE=Wx(Qx?1:0,oE?1:0)!==0?n(-1):n(0),gE=NE.length-1;gE>=0;gE-=1)lE=lE.multiply(Nx).add(n(NE[gE]));return lE}en.prototype.not=function(){return this.negate().prev()},on.prototype.not=tn.prototype.not=en.prototype.not,en.prototype.and=function(Ox){return $x(this,Ox,function(Fx,Wx){return Fx&Wx})},on.prototype.and=tn.prototype.and=en.prototype.and,en.prototype.or=function(Ox){return $x(this,Ox,function(Fx,Wx){return Fx|Wx})},on.prototype.or=tn.prototype.or=en.prototype.or,en.prototype.xor=function(Ox){return $x(this,Ox,function(Fx,Wx){return Fx^Wx})},on.prototype.xor=tn.prototype.xor=en.prototype.xor;var Vx=1<<30,Gx=(s&-s)*(s&-s)|Vx;function Zx(Ox){var Fx=Ox.value,Wx=typeof Fx=="number"?Fx|Vx:typeof Fx=="bigint"?Fx|BigInt(Vx):Fx[0]+Fx[1]*s|Gx;return Wx&-Wx}function jx(Ox,Fx){if(Fx.compareTo(Ox)<=0){var Wx=jx(Ox,Fx.square(Fx)),Qx=Wx.p,oE=Wx.e,tE=Qx.multiply(Fx);return tE.compareTo(Ox)<=0?{p:tE,e:oE*2+1}:{p:Qx,e:oE*2}}return{p:n(1),e:0}}en.prototype.bitLength=function(){var Ox=this;return Ox.compareTo(n(0))<0&&(Ox=Ox.negate().subtract(n(1))),Ox.compareTo(n(0))===0?n(0):n(jx(Ox,n(2)).e).add(n(1))},on.prototype.bitLength=tn.prototype.bitLength=en.prototype.bitLength;function Hx(Ox,Fx){return Ox=CE(Ox),Fx=CE(Fx),Ox.greater(Fx)?Ox:Fx}function iE(Ox,Fx){return Ox=CE(Ox),Fx=CE(Fx),Ox.lesser(Fx)?Ox:Fx}function Xx(Ox,Fx){if(Ox=CE(Ox).abs(),Fx=CE(Fx).abs(),Ox.equals(Fx))return Ox;if(Ox.isZero())return Fx;if(Fx.isZero())return Ox;for(var Wx=ar[1],Qx,oE;Ox.isEven()&&Fx.isEven();)Qx=iE(Zx(Ox),Zx(Fx)),Ox=Ox.divide(Qx),Fx=Fx.divide(Qx),Wx=Wx.multiply(Qx);for(;Ox.isEven();)Ox=Ox.divide(Zx(Ox));do{for(;Fx.isEven();)Fx=Fx.divide(Zx(Fx));Ox.greater(Fx)&&(oE=Fx,Fx=Ox,Ox=oE),Fx=Fx.subtract(Ox)}while(!Fx.isZero());return Wx.isUnit()?Ox:Ox.multiply(Wx)}function rE(Ox,Fx){return Ox=CE(Ox).abs(),Fx=CE(Fx).abs(),Ox.divide(Xx(Ox,Fx)).multiply(Fx)}function uE(Ox,Fx,Wx){Ox=CE(Ox),Fx=CE(Fx);var Qx=Wx||Math.random,oE=iE(Ox,Fx),tE=Hx(Ox,Fx),mE=tE.subtract(oE).add(1);if(mE.isSmall)return oE.add(Math.floor(Qx()*mE));for(var hE=IE(mE,s).value,SE=[],_E=!0,PE=0;PE<hE.length;PE++){var NE=_E?hE[PE]+(PE+1<hE.length?hE[PE+1]/s:0):s,lE=ox(Qx()*NE);SE.push(lE),lE<hE[PE]&&(_E=!1)}return oE.add(ar.fromArray(SE,s,!1))}var aE=function(Ox,Fx,Wx,Qx){Wx=Wx||d,Ox=String(Ox),Qx||(Ox=Ox.toLowerCase(),Wx=Wx.toLowerCase());var oE=Ox.length,tE,mE=Math.abs(Fx),hE={};for(tE=0;tE<Wx.length;tE++)hE[Wx[tE]]=tE;for(tE=0;tE<oE;tE++){var SE=Ox[tE];if(SE!=="-"&&SE in hE&&hE[SE]>=mE){if(SE==="1"&&mE===1)continue;throw new Error(SE+" is not a valid digit in base "+Fx+".")}}Fx=CE(Fx);var _E=[],PE=Ox[0]==="-";for(tE=PE?1:0;tE<Ox.length;tE++){var SE=Ox[tE];if(SE in hE)_E.push(CE(hE[SE]));else if(SE==="<"){var NE=tE;do tE++;while(Ox[tE]!==">"&&tE<Ox.length);_E.push(CE(Ox.slice(NE+1,tE)))}else throw new Error(SE+" is not a valid character")}return Kx(_E,Fx,PE)};function Kx(Ox,Fx,Wx){var Qx=ar[0],oE=ar[1],tE;for(tE=Ox.length-1;tE>=0;tE--)Qx=Qx.add(Ox[tE].times(oE)),oE=oE.times(Fx);return Wx?Qx.negate():Qx}function ME(Ox,Fx){return Fx=Fx||d,Ox<Fx.length?Fx[Ox]:"<"+Ox+">"}function IE(Ox,Fx){if(Fx=n(Fx),Fx.isZero()){if(Ox.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(Fx.equals(-1)){if(Ox.isZero())return{value:[0],isNegative:!1};if(Ox.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-Ox.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var Wx=Array.apply(null,Array(Ox.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return Wx.unshift([1]),{value:[].concat.apply([],Wx),isNegative:!1}}var Qx=!1;if(Ox.isNegative()&&Fx.isPositive()&&(Qx=!0,Ox=Ox.abs()),Fx.isUnit())return Ox.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(Ox.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Qx};for(var oE=[],tE=Ox,mE;tE.isNegative()||tE.compareAbs(Fx)>=0;){mE=tE.divmod(Fx),tE=mE.quotient;var hE=mE.remainder;hE.isNegative()&&(hE=Fx.minus(hE).abs(),tE=tE.next()),oE.push(hE.toJSNumber())}return oE.push(tE.toJSNumber()),{value:oE.reverse(),isNegative:Qx}}function wE(Ox,Fx,Wx){var Qx=IE(Ox,Fx);return(Qx.isNegative?"-":"")+Qx.value.map(function(oE){return ME(oE,Wx)}).join("")}en.prototype.toArray=function(Ox){return IE(this,Ox)},tn.prototype.toArray=function(Ox){return IE(this,Ox)},on.prototype.toArray=function(Ox){return IE(this,Ox)},en.prototype.toString=function(Ox,Fx){if(Ox===a&&(Ox=10),Ox!==10||Fx)return wE(this,Ox,Fx);for(var Wx=this.value,Qx=Wx.length,oE=String(Wx[--Qx]),tE="0000000",mE;--Qx>=0;)mE=String(Wx[Qx]),oE+=tE.slice(mE.length)+mE;var hE=this.sign?"-":"";return hE+oE},tn.prototype.toString=function(Ox,Fx){return Ox===a&&(Ox=10),Ox!=10||Fx?wE(this,Ox,Fx):String(this.value)},on.prototype.toString=tn.prototype.toString,on.prototype.toJSON=en.prototype.toJSON=tn.prototype.toJSON=function(){return this.toString()},en.prototype.valueOf=function(){return parseInt(this.toString(),10)},en.prototype.toJSNumber=en.prototype.valueOf,tn.prototype.valueOf=function(){return this.value},tn.prototype.toJSNumber=tn.prototype.valueOf,on.prototype.valueOf=on.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function bE(Ox){if(fn(+Ox)){var Fx=+Ox;if(Fx===ox(Fx))return Ct?new on(BigInt(Fx)):new tn(Fx);throw new Error("Invalid integer: "+Ox)}var Wx=Ox[0]==="-";Wx&&(Ox=Ox.slice(1));var Qx=Ox.split(/e/i);if(Qx.length>2)throw new Error("Invalid integer: "+Qx.join("e"));if(Qx.length===2){var oE=Qx[1];if(oE[0]==="+"&&(oE=oE.slice(1)),oE=+oE,oE!==ox(oE)||!fn(oE))throw new Error("Invalid integer: "+oE+" is not a valid exponent.");var tE=Qx[0],mE=tE.indexOf(".");if(mE>=0&&(oE-=tE.length-mE-1,tE=tE.slice(0,mE)+tE.slice(mE+1)),oE<0)throw new Error("Cannot include negative exponent part for integers");tE+=new Array(oE+1).join("0"),Ox=tE}var hE=/^([0-9][0-9]*)$/.test(Ox);if(!hE)throw new Error("Invalid integer: "+Ox);if(Ct)return new on(BigInt(Wx?"-"+Ox:Ox));for(var SE=[],_E=Ox.length,PE=l,NE=_E-PE;_E>0;)SE.push(+Ox.slice(NE,_E)),NE-=PE,NE<0&&(NE=0),_E-=PE;return Rn(SE),new en(SE,Wx)}function UE(Ox){if(Ct)return new on(BigInt(Ox));if(fn(Ox)){if(Ox!==ox(Ox))throw new Error(Ox+" is not an integer.");return new tn(Ox)}return bE(Ox.toString())}function CE(Ox){return typeof Ox=="number"?UE(Ox):typeof Ox=="string"?bE(Ox):typeof Ox=="bigint"?new on(Ox):Ox}for(var YE=0;YE<1e3;YE++)ar[YE]=CE(YE),YE>0&&(ar[-YE]=CE(-YE));return ar.one=ar[1],ar.zero=ar[0],ar.minusOne=ar[-1],ar.max=Hx,ar.min=iE,ar.gcd=Xx,ar.lcm=rE,ar.isInstance=function(Ox){return Ox instanceof en||Ox instanceof tn||Ox instanceof on},ar.randBetween=uE,ar.fromArray=function(Ox,Fx,Wx){return Kx(Ox.map(CE),CE(Fx||10),Wx)},ar})();t.hasOwnProperty("exports")&&(t.exports=n)})(BigInteger)),BigInteger.exports}var hasRequiredAlgebrite;function requireAlgebrite(){return hasRequiredAlgebrite||(hasRequiredAlgebrite=1,(function(exports){(function(){var $,ABS,ADD,ADJ,AND,APPROXRATIO,ARCCOS,ARCCOSH,ARCSIN,ARCSINH,ARCTAN,ARCTANH,ARG,ASSUME_REAL_VARIABLES,ATOMIZE,AUTOEXPAND,BAKE,BESSELJ,BESSELY,BINDING,BINOMIAL,BINOM_check_args,C1,C2,C3,C4,C5,C6,CEILING,CHECK,CHOOSE,CIRCEXP,CLEAR,CLEARALL,CLEARPATTERNS,CLOCK,COEFF,COFACTOR,CONDENSE,CONJ,CONS,CONTRACT,COS,COSH,Condense,DEBUG,DEBUG_ABS,DEBUG_ARG,DEBUG_CLOCKFORM,DEBUG_IMAG,DEBUG_IS,DEBUG_MULTIPLY,DEBUG_POWER,DEBUG_RATIONALIZE,DEBUG_RECT,DEBUG_SIMPLIFY,DECOMP,DEFINT,DEGREE,DENOMINATOR,DERIVATIVE,DET,DET_check_arg,DIM,DIRAC,DIVISORS,DO,DOT,DOUBLE,DRAW,DRAWX,DSOLVE,E,EIGEN,EIGENVAL,EIGENVEC,EIG_N,EIG_check_arg,EIG_yydd,EIG_yyqq,ERF,ERFC,EVAL,EXP,EXPAND,EXPCOS,EXPSIN,Eval,Eval_Eval,Eval_abs,Eval_add,Eval_adj,Eval_and,Eval_approxratio,Eval_arccos,Eval_arccosh,Eval_arcsin,Eval_arcsinh,Eval_arctan,Eval_arctanh,Eval_arg,Eval_besselj,Eval_bessely,Eval_binding,Eval_binomial,Eval_ceiling,Eval_check,Eval_choose,Eval_circexp,Eval_clear,Eval_clearall,Eval_clearpatterns,Eval_clock,Eval_coeff,Eval_cofactor,Eval_condense,Eval_conj,Eval_cons,Eval_contract,Eval_cos,Eval_cosh,Eval_decomp,Eval_defint,Eval_degree,Eval_denominator,Eval_derivative,Eval_det,Eval_dim,Eval_dirac,Eval_divisors,Eval_do,Eval_dsolve,Eval_eigen,Eval_eigenval,Eval_eigenvec,Eval_erf,Eval_erfc,Eval_exp,Eval_expand,Eval_expcos,Eval_expsin,Eval_factor,Eval_factorial,Eval_factorpoly,Eval_filter,Eval_float,Eval_floor,Eval_for,Eval_function_reference,Eval_gamma,Eval_gcd,Eval_hermite,Eval_hilbert,Eval_imag,Eval_index,Eval_inner,Eval_integral,Eval_inv,Eval_invg,Eval_isinteger,Eval_isprime,Eval_laguerre,Eval_lcm,Eval_leading,Eval_legendre,Eval_log,Eval_lookup,Eval_mod,Eval_multiply,Eval_not,Eval_nroots,Eval_number,Eval_numerator,Eval_operator,Eval_or,Eval_outer,Eval_pattern,Eval_patternsinfo,Eval_polar,Eval_power,Eval_predicate,Eval_prime,Eval_print,Eval_print2dascii,Eval_printcomputer,Eval_printhuman,Eval_printlatex,Eval_printlist,Eval_product,Eval_quote,Eval_quotient,Eval_rank,Eval_rationalize,Eval_real,Eval_rect,Eval_roots,Eval_round,Eval_setq,Eval_sgn,Eval_shape,Eval_silentpattern,Eval_simplify,Eval_sin,Eval_sinh,Eval_sqrt,Eval_stop,Eval_subst,Eval_sum,Eval_sym,Eval_symbolsinfo,Eval_tan,Eval_tanh,Eval_taylor,Eval_tensor,Eval_test,Eval_testeq,Eval_testge,Eval_testgt,Eval_testle,Eval_testlt,Eval_transpose,Eval_unit,Eval_user_function,Eval_zero,Evalpoly,FACTOR,FACTORIAL,FACTORPOLY,FILTER,FLOATF,FLOOR,FOR,FORCE_FIXED_PRINTOUT,FUNCTION,Find,GAMMA,GCD,HERMITE,HILBERT,IMAG,INDEX,INNER,INTEGRAL,INV,INVG,INV_check_arg,INV_decomp,ISINTEGER,ISPRIME,LAGUERRE,LAST,LAST_2DASCII_PRINT,LAST_FULL_PRINT,LAST_LATEX_PRINT,LAST_LIST_PRINT,LAST_PLAIN_PRINT,LAST_PRINT,LCM,LEADING,LEGENDRE,LOG,LOOKUP,M,MAXDIM,MAXPRIMETAB,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE,MAX_FIXED_PRINTOUT_DIGITS,MEQUAL,METAA,METAB,METAX,MOD,MSIGN,MULTIPLY,MZERO,N,NIL,NOT,NROOTS,NROOTS_ABS,NROOTS_DELTA,NROOTS_EPSILON,NROOTS_RANDOM,NROOTS_YMAX,NROOTS_divpoly,NSYM,NUM,NUMBER,NUMERATOR,OPERATOR,OR,OUTER,PATTERN,PATTERNSINFO,PI,POLAR,POWER,PRIME,PRINT,PRINT2DASCII,PRINTFULL,PRINTLATEX,PRINTLIST,PRINTMODE_2DASCII,PRINTMODE_COMPUTER,PRINTMODE_HUMAN,PRINTMODE_LATEX,PRINTMODE_LIST,PRINTOUTRESULT,PRINTPLAIN,PRINT_LEAVE_E_ALONE,PRINT_LEAVE_X_ALONE,PRODUCT,QUOTE,QUOTIENT,RANK,RATIONALIZE,REAL,ROOTS,ROUND,SECRETX,SETQ,SGN,SHAPE,SILENTPATTERN,SIMPLIFY,SIN,SINH,SPACE_BETWEEN_COLUMNS,SPACE_BETWEEN_ROWS,SQRT,STOP,STR,SUBST,SUM,SYM,SYMBOLSINFO,SYMBOL_A,SYMBOL_A_UNDERSCORE,SYMBOL_B,SYMBOL_B_UNDERSCORE,SYMBOL_C,SYMBOL_D,SYMBOL_I,SYMBOL_IDENTITY_MATRIX,SYMBOL_J,SYMBOL_N,SYMBOL_R,SYMBOL_S,SYMBOL_T,SYMBOL_X,SYMBOL_X_UNDERSCORE,SYMBOL_Y,SYMBOL_Z,TAN,TANH,TAYLOR,TENSOR,TEST,TESTEQ,TESTGE,TESTGT,TESTLE,TESTLT,TIMING_DEBUGS,TOS,TRACE,TRANSPOSE,T_DOUBLE,T_EQ,T_FUNCTION,T_GTEQ,T_INTEGER,T_LTEQ,T_NEQ,T_NEWLINE,T_QUOTASSIGN,T_STRING,T_SYMBOL,U,UNIT,VERSION,YMAX,YYE,YYRECT,ZERO,__emit_char,__emit_str,__factor_add,__factorial,__is_negative,__is_radical_number,__lcm,__legendre,__legendre2,__legendre3,__normalize_radical_factors,__rationalize_tensor,_print,abs,absValFloat,absval,absval_tensor,add,addSymbolLeftOfAssignment,addSymbolRightOfAssignment,add_all,add_factor_to_accumulator,add_numbers,add_terms,adj,alloc_tensor,allocatedId,any_denominators,approxAll,approxLogs,approxLogsOfRationals,approxOneRatioOnly,approxRadicals,approxRadicalsOfRationals,approxRationalsOfLogs,approxRationalsOfPowersOfE,approxRationalsOfPowersOfPI,approxRationalsOfRadicals,approxSineOfRationalMultiplesOfPI,approxSineOfRationals,approxTrigonometric,approx_just_an_integer,approx_logarithmsOfRationals,approx_radicalOfRatio,approx_ratioOfRadical,approx_rationalOfE,approx_rationalOfPi,approx_rationalsOfLogarithms,approx_sine_of_pi_times_rational,approx_sine_of_rational,approxratioRecursive,arccos,arccosh,arcsin,arcsinh,arctan,arctanh,areunivarpolysfactoredorexpandedform,arg,assignmentFound,avoidCalculatingPowersIntoArctans,bake,bake_poly,bake_poly_term,besselj,bessely,bigInt,bignum_factorial,bignum_float,bignum_power_number,bignum_scan_float,bignum_scan_integer,bignum_truncate,binding,binomial,build_tensor,caaddr,caadr,caar,cadaddr,cadadr,cadar,caddaddr,caddadr,caddar,caddddr,cadddr,caddr,cadr,car,cdaddr,cdadr,cdar,cddaddr,cddar,cdddaddr,cddddr,cdddr,cddr,cdr,ceiling,chainOfUserSymbolsNotFunctionsBeingEvaluated,charTabIndex,chartab,check_esc_flag,check_stack,check_tensor_dimensions,choose,choose_check_args,circexp,clearAlgebraEnvironment,clearRenamedVariablesToAvoidBindingToExternalScope,clear_symbols,clear_term,clockform,cmpGlyphs,cmp_args,cmp_expr,cmp_terms,codeGen,coeff,cofactor,collectLatexStringFromReturnValue,collectUserSymbols,combine_factors,combine_terms,compare_numbers,compare_rationals,compare_tensors,compatible,computeDependenciesFromAlgebra,computeResultsAndJavaScriptFromAlgebra,compute_fa,conjugate,cons,consCount,contract,convert_rational_to_double,copy_tensor,cosine,cosine_of_angle,cosine_of_angle_sum,count,countOccurrencesOfSymbol,count_denominators,counter,countsize,d_scalar_scalar,d_scalar_scalar_1,d_scalar_tensor,d_tensor_scalar,d_tensor_tensor,dabs,darccos,darccosh,darcsin,darcsinh,darctan,darctanh,dbesselj0,dbesseljn,dbessely0,dbesselyn,dcos,dcosh,dd,decomp,decomp_product,decomp_sum,defineSomeHandyConstants,define_user_function,defn,defn_str,degree,denominator,derf,derfc,derivative,derivative_of_integral,det,determinant,dfunction,dhermite,dirac,divide,divide_numbers,divisors,divisors_onstack,divpoly,dlog,do_clearPatterns,do_clearall,do_simplify_nested_radicals,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication,dotprod_unicode,doubleToReasonableString,dpow,dpower,dproduct,dsgn,dsin,dsinh,dsum,dtan,dtanh,dupl,eigen,elelmIndex,elem,emit_denominator,emit_denominators,emit_expr,emit_factor,emit_factorial_function,emit_flat_tensor,emit_fraction,emit_function,emit_index_function,emit_multiply,emit_number,emit_numerators,emit_numerical_fraction,emit_power,emit_string,emit_subexpr,emit_symbol,emit_tensor,emit_tensor_inner,emit_term,emit_top_expr,emit_unsigned_expr,emit_x,equal,equaln,equalq,erfc,errorMessage,esc_flag,evaluatingAsFloats,evaluatingPolar,exec,expand,expand_get_A,expand_get_AF,expand_get_B,expand_get_C,expand_get_CF,expand_tensor,expanding,expcos,exponential,expr_level,expsin,f1,f10,f2,f3,f4,f5,f9,f_equals_a,factor,factor_a,factor_again,factor_b,factor_number,factor_small_number,factor_term,factorial,factorpoly,factors,filter,filter_main,filter_sum,filter_tensor,findDependenciesInScript,findPossibleClockForm,findPossibleExponentialForm,findroot,fixup_fraction,fixup_power,flag,floatToRatioRoutine,frame,functionInvokationsScanningStack,gamma,gamma_of_sum,gammaf,gcd,gcd_main,gcd_numbers,gcd_polys,gcd_powers_with_same_base,gcd_product_product,gcd_product_sum,gcd_sum,gcd_sum_product,gcd_sum_sum,gen,getSimpleRoots,get_binding,get_factor_from_complex_root,get_factor_from_real_root,get_innerprod_factors,get_next_token,get_printname,get_size,get_token,glyph,guess,hasImaginaryCoeff,hasNegativeRationalExponent,hash_addition,hash_function,hash_multiplication,hash_power,hashcode_values,hashed_itab,hermite,hilbert,i1,imag,imaginaryunit,index_function,init,initNRoots,inited,inner,inner_f,input_str,integral,integral_of_form,integral_of_product,integral_of_sum,inv,inverse,invert_number,invg,isNumberOneOverSomething,isNumericAtom,isNumericAtomOrTensor,isSimpleRoot,isSmall,isSymbolLeftOfAssignment,isSymbolReclaimable,isZeroAtom,isZeroAtomOrTensor,isZeroLikeOrNonZeroLikeOrUndetermined,isZeroTensor,is_denominator,is_factor,is_small_integer,is_usr_symbol,isadd,isalnumorunderscore,isalpha,isalphaOrUnderscore,iscomplexnumber,iscomplexnumberdouble,iscons,isdenominator,isdigit,isdouble,iseveninteger,isfactor,isfactorial,isfloating,isfraction,isidentitymatrix,isimaginarynumber,isimaginarynumberdouble,isimaginaryunit,isinnerordot,isinteger,isintegerfactor,isintegerorintegerfloat,isinv,iskeyword,isminusone,isminusoneoversqrttwo,isminusoneovertwo,isminussqrtthreeovertwo,ismultiply,isnegative,isnegativenumber,isnegativeterm,isnonnegativeinteger,isnpi,isone,isoneover,isoneoversqrttwo,isoneovertwo,isplusone,isplustwo,ispolyexpandedform,ispolyexpandedform_expr,ispolyexpandedform_factor,ispolyexpandedform_term,ispolyfactoredorexpandedform,ispolyfactoredorexpandedform_factor,ispolyfactoredorexpandedform_power,isposint,ispositivenumber,ispower,isquarterturn,isrational,isspace,issqrtthree,issqrtthreeovertwo,isstr,issymbol,issymbolic,istensor,istranspose,isunivarpolyfactoredorexpandedform,itab,italu_hashcode,j1,laguerre,laguerre2,lastFoundSymbol,latexErrorSign,lcm,leading,legendre,length,lessp,level,list,logarithm,lookupsTotal,lu_decomp,madd,makePositive,makeSignSameAs,make_hashed_itab,mcmp,mdiv,mdivrem,meta_mode,mgcd,mini_solve,mint,mmod,mmul,mod,monic,move,moveTos,mp_denominator,mp_numerator,mpow,mprime,mroot,msub,multinomial_sum,multiply,multiply_all,multiply_all_noexpand,multiply_consecutive_constants,multiply_denominators,multiply_denominators_factor,multiply_denominators_term,multiply_noexpand,multiply_numbers,n_factor_number,negate,negate_noexpand,negate_number,new_integer,new_string,newline_flag,nil_symbols,normaliseDots,normalisedCoeff,normalize_angle,nroots_a,nroots_b,nroots_c,nroots_df,nroots_dx,nroots_fa,nroots_fb,nroots_x,nroots_y,nterms,numerator,numericRootOfPolynomial,o,one,oneElement,one_as_double,outer,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,parse,parse_internal,parse_p1,parse_p2,parse_time_simplifications,partition,patternHasBeenFound,patternsinfo,polar,polarRectAMinusOneBase,polyform,pop,pop_double,pop_frame,pop_integer,power,power_str,power_sum,power_tensor,predefinedSymbolsInGlobalScope_doNotTrackInDependencies,prime,primetab,print2dascii,printMode,print_ABS_latex,print_ARCCOS_codegen,print_ARCSIN_codegen,print_ARCTAN_codegen,print_BINOMIAL_latex,print_COS_codegen,print_DEFINT_latex,print_DOT_codegen,print_DOT_latex,print_DO_codegen,print_FOR_codegen,print_INV_codegen,print_INV_latex,print_PRODUCT_codegen,print_PRODUCT_latex,print_SETQ_codegen,print_SIN_codegen,print_SQRT_latex,print_SUM_codegen,print_SUM_latex,print_TAN_codegen,print_TESTEQ_latex,print_TESTGE_latex,print_TESTGT_latex,print_TESTLE_latex,print_TESTLT_latex,print_TEST_codegen,print_TEST_latex,print_TRANSPOSE_codegen,print_TRANSPOSE_latex,print_UNIT_codegen,print_a_over_b,print_base_of_denom,print_char,print_denom,print_expo_of_denom,print_expr,print_factor,print_factorial_function,print_glyphs,print_index_function,print_list,print_multiply_sign,print_number,print_power,print_str,print_subexpr,print_tensor,print_tensor_inner,print_tensor_inner_latex,print_tensor_latex,print_term,printchar,printchar_nowrap,printline,promote_tensor,push,pushTryNotToDuplicate,push_double,push_factor,push_frame,push_integer,push_rational,push_symbol,push_term_factors,push_terms,push_zero_matrix,qadd,qdiv,qmul,qpow,qpowf,quickfactor,quickpower,rational,rationalize,rationalize_coefficients,real,reciprocate,rect,recursionLevelNestedRadicalsRemoval,recursiveDependencies,ref,ref1,rememberPrint,remove_negative_exponents,reset_after_error,restore,restoreMetaBindings,rewrite_args,rewrite_args_tensor,roots,roots2,roots3,run,runUserDefinedSimplifications,save,saveMetaBindings,scalar_times_tensor,scan,scan_error,scan_expression,scan_factor,scan_function_call_with_function_name,scan_function_call_without_function_name,scan_index,scan_meta,scan_power,scan_relation,scan_stmt,scan_str,scan_string,scan_subexpr,scan_symbol,scan_tensor,scan_term,scanned,scanningParameters,setM,setSignTo,set_binding,set_component,setq_indexed,sgn,shape,sign,sign_of_term,simfac,simfac_term,simpleComplexityMeasure,simplify,simplifyForCodeGeneration,simplify_1_in_products,simplify_main,simplify_nested_radicals,simplify_polar,simplify_polarRect,simplify_rational_expressions,simplify_rectToClock,simplify_tensor,simplify_trig,sine,sine_of_angle,sine_of_angle_sum,skipRootVariableToBeSolved,sort_stack,square,stack,stackAddsCount,std_symbol,step,step2,stop,strcmp,stringsEmittedByUserPrintouts,subst,subtract,swap,symbol,symbolsDependencies,symbolsHavingReassignments,symbolsInExpressionsWithoutAssignments,symbolsLeftOfAssignment,symbolsRightOfAssignment,symbolsinfo,symnum,symtab,take_care_of_nested_radicals,tangent,taylor,tensor,tensor_plus_tensor,tensor_times_scalar,testApprox,test_flag,token,token_buf,token_str,top,top_level_eval,tos,transform,transpose,transpose_unicode,trigmode,trivial_divide,try_kth_prime,turnErrorMessageToLatex,update_token_buf,userSimplificationsInListForm,userSimplificationsInStringForm,usr_symbol,version,will_be_displayed_as_fraction,ybinomial,ycosh,ydirac,yerf,yerfc,yfloor,yindex,yround,ysinh,yyarg,yybesselj,yybessely,yyceiling,yycondense,yycontract,yycosh,yydegree,yydetg,yydivpoly,yyerf,yyerfc,yyexpand,yyfactorpoly,yyfloat,yyfloor,yyhermite,yyhermite2,yyinvg,yylcm,yylog,yymultiply,yyouter,yypower,yyrationalize,yyround,yysgn,yysimfac,yysinh,yytangent,zero,zzfloat,hasProp={}.hasOwnProperty;for(bigInt=requireBigInteger(),version="1.4.0",NSYM=1e3,DEBUG=!1,PRINTOUTRESULT=!1,PRINTMODE_LATEX="PRINTMODE_LATEX",PRINTMODE_2DASCII="PRINTMODE_2DASCII",PRINTMODE_COMPUTER="PRINTMODE_COMPUTER",PRINTMODE_HUMAN="PRINTMODE_HUMAN",PRINTMODE_LIST="PRINTMODE_LIST",printMode=PRINTMODE_COMPUTER,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0,recursionLevelNestedRadicalsRemoval=0,do_simplify_nested_radicals=!0,avoidCalculatingPowersIntoArctans=!0,rational=(function(){class t{}return t.prototype.a=null,t.prototype.b=null,t}).call(this),U=(function(){class t{toString(){return print_expr(this)}toLatexString(){return collectLatexStringFromReturnValue(this)}constructor(){this.cons={},this.cons.car=null,this.cons.cdr=null,this.q=new rational}}return t.prototype.cons=null,t.prototype.printname="",t.prototype.str="",t.prototype.tensor=null,t.prototype.q=null,t.prototype.d=0,t.prototype.k=0,t.prototype.tag=0,t}).call(this),errorMessage="",CONS=0,NUM=1,DOUBLE=2,STR=3,TENSOR=4,SYM=5,counter=0,ABS=counter++,ADD=counter++,ADJ=counter++,AND=counter++,APPROXRATIO=counter++,ARCCOS=counter++,ARCCOSH=counter++,ARCSIN=counter++,ARCSINH=counter++,ARCTAN=counter++,ARCTANH=counter++,ARG=counter++,ATOMIZE=counter++,BESSELJ=counter++,BESSELY=counter++,BINDING=counter++,BINOMIAL=counter++,CEILING=counter++,CHECK=counter++,CHOOSE=counter++,CIRCEXP=counter++,CLEAR=counter++,CLEARALL=counter++,CLEARPATTERNS=counter++,CLOCK=counter++,COEFF=counter++,COFACTOR=counter++,CONDENSE=counter++,CONJ=counter++,CONTRACT=counter++,COS=counter++,COSH=counter++,DECOMP=counter++,DEFINT=counter++,DEGREE=counter++,DENOMINATOR=counter++,DERIVATIVE=counter++,DET=counter++,DIM=counter++,DIRAC=counter++,DIVISORS=counter++,DO=counter++,DOT=counter++,DRAW=counter++,DSOLVE=counter++,EIGEN=counter++,EIGENVAL=counter++,EIGENVEC=counter++,ERF=counter++,ERFC=counter++,EVAL=counter++,EXP=counter++,EXPAND=counter++,EXPCOS=counter++,EXPSIN=counter++,FACTOR=counter++,FACTORIAL=counter++,FACTORPOLY=counter++,FILTER=counter++,FLOATF=counter++,FLOOR=counter++,FOR=counter++,FUNCTION=counter++,GAMMA=counter++,GCD=counter++,HERMITE=counter++,HILBERT=counter++,IMAG=counter++,INDEX=counter++,INNER=counter++,INTEGRAL=counter++,INV=counter++,INVG=counter++,ISINTEGER=counter++,ISPRIME=counter++,LAGUERRE=counter++,LCM=counter++,LEADING=counter++,LEGENDRE=counter++,LOG=counter++,LOOKUP=counter++,MOD=counter++,MULTIPLY=counter++,NOT=counter++,NROOTS=counter++,NUMBER=counter++,NUMERATOR=counter++,OPERATOR=counter++,OR=counter++,OUTER=counter++,PATTERN=counter++,PATTERNSINFO=counter++,POLAR=counter++,POWER=counter++,PRIME=counter++,PRINT_LEAVE_E_ALONE=counter++,PRINT_LEAVE_X_ALONE=counter++,PRINT=counter++,PRINT2DASCII=counter++,PRINTFULL=counter++,PRINTLATEX=counter++,PRINTLIST=counter++,PRINTPLAIN=counter++,PRODUCT=counter++,QUOTE=counter++,QUOTIENT=counter++,RANK=counter++,RATIONALIZE=counter++,REAL=counter++,ROUND=counter++,YYRECT=counter++,ROOTS=counter++,SETQ=counter++,SGN=counter++,SILENTPATTERN=counter++,SIMPLIFY=counter++,SIN=counter++,SINH=counter++,SHAPE=counter++,SQRT=counter++,STOP=counter++,SUBST=counter++,SUM=counter++,SYMBOLSINFO=counter++,TAN=counter++,TANH=counter++,TAYLOR=counter++,TEST=counter++,TESTEQ=counter++,TESTGE=counter++,TESTGT=counter++,TESTLE=counter++,TESTLT=counter++,TRANSPOSE=counter++,UNIT=counter++,ZERO=counter++,NIL=counter++,LAST=counter++,LAST_PRINT=counter++,LAST_2DASCII_PRINT=counter++,LAST_FULL_PRINT=counter++,LAST_LATEX_PRINT=counter++,LAST_LIST_PRINT=counter++,LAST_PLAIN_PRINT=counter++,AUTOEXPAND=counter++,BAKE=counter++,ASSUME_REAL_VARIABLES=counter++,TRACE=counter++,FORCE_FIXED_PRINTOUT=counter++,MAX_FIXED_PRINTOUT_DIGITS=counter++,YYE=counter++,DRAWX=counter++,METAA=counter++,METAB=counter++,METAX=counter++,SECRETX=counter++,VERSION=counter++,PI=counter++,SYMBOL_A=counter++,SYMBOL_B=counter++,SYMBOL_C=counter++,SYMBOL_D=counter++,SYMBOL_I=counter++,SYMBOL_J=counter++,SYMBOL_N=counter++,SYMBOL_R=counter++,SYMBOL_S=counter++,SYMBOL_T=counter++,SYMBOL_X=counter++,SYMBOL_Y=counter++,SYMBOL_Z=counter++,SYMBOL_IDENTITY_MATRIX=counter++,SYMBOL_A_UNDERSCORE=counter++,SYMBOL_B_UNDERSCORE=counter++,SYMBOL_X_UNDERSCORE=counter++,C1=counter++,C2=counter++,C3=counter++,C4=counter++,C5=counter++,C6=counter++,counter++,E=YYE,TOS=1e5,MAXPRIMETAB=1e4,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10,MAXDIM=24,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"],parse_time_simplifications=!0,chainOfUserSymbolsNotFunctionsBeingEvaluated=[],stringsEmittedByUserPrintouts="",tensor=(function(){class t{constructor(){this.dim=(function(){var a,s,l;for(l=[],a=0,s=MAXDIM;0<=s?a<=s:a>=s;0<=s?a++:a--)l.push(0);return l})(),this.elem=[]}}return t.prototype.ndim=0,t.prototype.dim=null,t.prototype.nelem=0,t.prototype.elem=null,t}).call(this),(function(){class t{}return t.prototype.h=0,t.prototype.w=0,t.prototype.n=0,t.prototype.a=[],t}).call(this),(function(){class t{}return t.prototype.ascent=0,t.prototype.descent=0,t.prototype.width=0,t}).call(this),tos=0,expanding=0,evaluatingAsFloats=0,evaluatingPolar=0,primetab=(function(){var t,n,a,s;for(s=[2],n=3;s.length<MAXPRIMETAB;){for(a=0,t=Math.sqrt(n);a<s.length&&s[a]<=t;){if(n%s[a]===0){a=-1;break}a++}a!==-1&&s.push(n),n+=2}return s[MAXPRIMETAB]=0,s})(),esc_flag=0,trigmode=0,symtab=[],binding=[],isSymbolReclaimable=[],stack=[],frame=0,p0=null,p1=null,p2=null,p3=null,p4=null,p5=null,p6=null,p7=null,p8=null,p9=null,zero=null,one=null,one_as_double=null,imaginaryunit=null,test_flag=0,codeGen=!1,userSimplificationsInListForm=[],userSimplificationsInStringForm=[],transpose_unicode=7488,dotprod_unicode=183,symbol=function(t){return symtab[t]},iscons=function(t){return t.k===CONS},isrational=function(t){return t.k===NUM},isdouble=function(t){return t.k===DOUBLE},isNumericAtom=function(t){return isrational(t)||isdouble(t)},isstr=function(t){return t.k===STR},istensor=function(t){if(t==null)debugger;else return t.k===TENSOR},isNumericAtomOrTensor=function(t){var n,a,s,l,u;if(isNumericAtom(t)||t===symbol(SYMBOL_IDENTITY_MATRIX))return 1;if(!istensor(t)&&!isNumericAtom(t))return 0;for(s=t.tensor.nelem,n=t.tensor.elem,a=l=0,u=s;0<=u?l<u:l>u;a=0<=u?++l:--l)if(!isNumericAtomOrTensor(n[a]))return 0;return 1},issymbol=function(t){return t.k===SYM},iskeyword=function(t){return issymbol(t)&&symnum(t)<NIL},car=function(t){return iscons(t)?t.cons.car:symbol(NIL)},cdr=function(t){return iscons(t)?t.cons.cdr:symbol(NIL)},caar=function(t){return car(car(t))},cadr=function(t){return car(cdr(t))},cdar=function(t){return cdr(car(t))},cddr=function(t){return cdr(cdr(t))},caadr=function(t){return car(car(cdr(t)))},caddr=function(t){return car(cdr(cdr(t)))},cadar=function(t){return car(cdr(car(t)))},cdadr=function(t){return cdr(car(cdr(t)))},cddar=function(t){return cdr(cdr(car(t)))},cdddr=function(t){return cdr(cdr(cdr(t)))},caaddr=function(t){return car(car(cdr(cdr(t))))},cadadr=function(t){return car(cdr(car(cdr(t))))},caddar=function(t){return car(cdr(cdr(car(t))))},cdaddr=function(t){return cdr(car(cdr(cdr(t))))},cadddr=function(t){return car(cdr(cdr(cdr(t))))},cddddr=function(t){return cdr(cdr(cdr(cdr(t))))},caddddr=function(t){return car(cdr(cdr(cdr(cdr(t)))))},cadaddr=function(t){return car(cdr(car(cdr(cdr(t)))))},cddaddr=function(t){return cdr(cdr(car(cdr(cdr(t)))))},caddadr=function(t){return car(cdr(cdr(car(cdr(t)))))},cdddaddr=function(t){return cdr(cdr(cdr(car(cdr(cdr(t))))))},caddaddr=function(t){return car(cdr(cdr(car(cdr(cdr(t))))))},isadd=function(t){return car(t)===symbol(ADD)},ismultiply=function(t){return car(t)===symbol(MULTIPLY)},ispower=function(t){return car(t)===symbol(POWER)},isfactorial=function(t){return car(t)===symbol(FACTORIAL)},isinnerordot=function(t){return car(t)===symbol(INNER)||car(t)===symbol(DOT)},istranspose=function(t){return car(t)===symbol(TRANSPOSE)},isinv=function(t){return car(t)===symbol(INV)},isidentitymatrix=function(t){return t===symbol(SYMBOL_IDENTITY_MATRIX)},MSIGN=function(t){return t.isPositive()?1:t.isZero()?0:-1},MZERO=function(t){return t.isZero()},MEQUAL=function(t,n){if(t==null)debugger;return t.equals(n)},reset_after_error=function(){return moveTos(0),esc_flag=0,frame=TOS,evaluatingAsFloats=0,evaluatingPolar=0},$=exports!==null?exports:this,$.version=version,$.isadd=isadd,$.ismultiply=ismultiply,$.ispower=ispower,$.isfactorial=isfactorial,$.car=car,$.cdr=cdr,$.caar=caar,$.cadr=cadr,$.cdar=cdar,$.cddr=cddr,$.caadr=caadr,$.caddr=caddr,$.cadar=cadar,$.cdadr=cdadr,$.cddar=cddar,$.cdddr=cdddr,$.caaddr=caaddr,$.cadadr=cadadr,$.caddar=caddar,$.cdaddr=cdaddr,$.cadddr=cadddr,$.cddddr=cddddr,$.caddddr=caddddr,$.cadaddr=cadaddr,$.cddaddr=cddaddr,$.caddadr=caddadr,$.cdddaddr=cdddaddr,$.caddaddr=caddaddr,$.symbol=symbol,$.iscons=iscons,$.isrational=isrational,$.isdouble=isdouble,$.isNumericAtom=isNumericAtom,$.isstr=isstr,$.istensor=istensor,$.issymbol=issymbol,$.iskeyword=iskeyword,$.CONS=CONS,$.NUM=NUM,$.DOUBLE=DOUBLE,$.STR=STR,$.TENSOR=TENSOR,$.SYM=SYM,DEBUG_ABS=!1,Eval_abs=function(){return push(cadr(p1)),Eval(),abs()},absValFloat=function(){return Eval(),absval(),Eval(),zzfloat()},abs=function(){var t;if(t=top(),DEBUG_ABS&&console.trace(">>>>  ABS of "+t),numerator(),DEBUG_ABS&&console.log("ABS numerator "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL numerator: "+stack[tos-1]),push(t),denominator(),DEBUG_ABS&&console.log("ABS denominator: "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL denominator: "+stack[tos-1]),divide(),DEBUG_ABS&&console.log("ABSVAL divided: "+stack[tos-1]),DEBUG_ABS)return console.log("<<<<<<<  ABS")},absval=function(){var t,n;if(save(),p1=pop(),n=p1,DEBUG_ABS&&console.log("ABS of "+p1),isZeroAtomOrTensor(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just zero"),push(zero),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(isnegativenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a negative"),push(p1),negate(),restore();return}if(ispositivenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a positive"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(p1===symbol(PI)){DEBUG_ABS&&console.log(" abs: "+p1+" of PI"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ADD)&&(findPossibleClockForm(p1)||findPossibleExponentialForm(p1)||Find(p1,imaginaryunit))){DEBUG_ABS&&console.log(" abs: "+p1+" is a sum"),DEBUG_ABS&&console.log("abs of a sum"),push(p1),rect(),p1=pop(),push(p1),real(),push_integer(2),power(),push(p1),imag(),push_integer(2),power(),add(),push_rational(1,2),power(),simplify_trig(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1)){DEBUG_ABS&&console.log(" abs: "+p1+" is -1 to any power"),evaluatingAsFloats?(DEBUG_ABS&&console.log(" abs: numeric, so result is 1.0"),push_double(1)):(DEBUG_ABS&&console.log(" abs: symbolic, so result is 1"),push_integer(1)),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&ispositivenumber(caddr(p1))){DEBUG_ABS&&console.log(" abs: "+p1+" is something to the power of a positive number"),push(cadr(p1)),abs(),push(caddr(p1)),power(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E)){DEBUG_ABS&&console.log(" abs: "+p1+" is an exponential"),push(caddr(p1)),real(),exponential(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(MULTIPLY)){for(DEBUG_ABS&&console.log(" abs: "+p1+" is a product"),t=!1,p1=cdr(p1);iscons(p1);)push(car(p1)),absval(),t&&multiply(),t=!0,p1=cdr(p1);DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ABS)){DEBUG_ABS&&console.log(" abs: "+p1+" is abs of a abs"),push_symbol(ABS),push(cadr(p1)),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(istensor(p1)){absval_tensor(),restore();return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),DEBUG_ABS&&console.log(" abs: "+p1+" is nothing decomposable"),push_symbol(ABS),push(p1),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore()},absval_tensor=function(){return p1.tensor.ndim!==1&&stop("abs(tensor) with tensor rank > 1"),push(p1),push(p1),conjugate(),inner(),push_rational(1,2),power(),simplify(),Eval()},flag=0,Eval_add=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p2=pop(),push_terms(p2),p1=cdr(p1);return add_terms(tos-t)},stackAddsCount=0,add_terms=function(t){var n,a,s,l,u,c,d,Ct,ar;if(stackAddsCount++,a=0,n=tos-t,DEBUG&&console.log("stack before adding terms #"+stackAddsCount),DEBUG)for(a=u=0,c=tos;0<=c?u<c:u>c;a=0<=c?++u:--u)console.log(print_list(stack[a]));for(a=s=0;s<10&&!(t<2||(flag=0,ar=stack.slice(n,n+t),ar.sort(cmp_terms),stack=stack.slice(0,n).concat(ar).concat(stack.slice(n+t)),flag===0));a=++s)t=combine_terms(n,t);switch(moveTos(n+t),t){case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:break;default:list(t),p1=pop(),push_symbol(ADD),push(p1),cons()}if(DEBUG&&console.log("stack after adding terms #"+stackAddsCount),DEBUG){for(Ct=[],a=l=0,d=tos;0<=d?l<d:l>d;a=0<=d?++l:--l)Ct.push(console.log(print_list(stack[a])));return Ct}},cmp_terms=function(t,n){var a,s,l,u;if(a=0,isNumericAtom(t)&&isNumericAtom(n))return flag=1,0;if(istensor(t)&&istensor(n)){if(t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=s=0,l=t.tensor.ndim;0<=l?s<l:s>l;a=0<=l?++s:--s){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}return flag=1,0}return car(t)===symbol(MULTIPLY)&&(t=cdr(t),isNumericAtom(car(t))&&(t=cdr(t),cdr(t)===symbol(NIL)&&(t=car(t)))),car(n)===symbol(MULTIPLY)&&(n=cdr(n),isNumericAtom(car(n))&&(n=cdr(n),cdr(n)===symbol(NIL)&&(n=car(n)))),u=cmp_expr(t,n),u===0&&(flag=1),u},combine_terms=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx;for(a=0;a<n-1;){if(check_esc_flag(),p3=stack[t+a],p4=stack[t+a+1],istensor(p3)&&istensor(p4)){if(push(p3),push(p4),tensor_plus_tensor(),p1=pop(),p1!==symbol(NIL)){for(stack[t+a]=p1,l=Ct=ar=a+1,en=n-1;ar<=en?Ct<en:Ct>en;l=ar<=en?++Ct:--Ct)stack[t+l]=stack[t+l+1];n--,a--}a++;continue}if(istensor(p3)||istensor(p4)){a++;continue}if(isNumericAtom(p3)&&isNumericAtom(p4)){if(push(p3),push(p4),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(l=s=tn=a,on=n-2;tn<=on?s<on:s>on;l=tn<=on?++s:--s)stack[t+l]=stack[t+l+2];n-=2}else{for(stack[t+a]=p1,l=u=fn=a+1,dn=n-1;fn<=dn?u<dn:u>dn;l=fn<=dn?++u:--u)stack[t+l]=stack[t+l+1];n--}a--,a++;continue}if(isNumericAtom(p3)||isNumericAtom(p4)){a++;continue}if(evaluatingAsFloats?(p1=one_as_double,p2=one_as_double):(p1=one,p2=one),sx=0,car(p3)===symbol(MULTIPLY)&&(p3=cdr(p3),sx=1,isNumericAtom(car(p3))&&(p1=car(p3),p3=cdr(p3),cdr(p3)===symbol(NIL)&&(p3=car(p3),sx=0))),car(p4)===symbol(MULTIPLY)&&(p4=cdr(p4),isNumericAtom(car(p4))&&(p2=car(p4),p4=cdr(p4),cdr(p4)===symbol(NIL)&&(p4=car(p4)))),!equal(p3,p4)){a++;continue}if(push(p1),push(p2),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(l=c=Cn=a,Rn=n-2;Cn<=Rn?c<Rn:c>Rn;l=Cn<=Rn?++c:--c)stack[t+l]=stack[t+l+2];n-=2,a--,a++;continue}for(push(p1),sx?(push(symbol(MULTIPLY)),push(p3),cons()):push(p3),multiply(),stack[t+a]=pop(),l=d=ax=a+1,ox=n-1;ax<=ox?d<ox:d>ox;l=ax<=ox?++d:--d)stack[t+l]=stack[t+l+1];n--,a--,a++}return n},push_terms=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else if(!isZeroAtom(t))return push(t)},add=function(){var t;return save(),p2=pop(),p1=pop(),t=tos,push_terms(p1),push_terms(p2),add_terms(tos-t),restore()},add_all=function(t){var n,a,s,l,u;for(a=0,save(),u=tos-t,n=tos,a=s=0,l=t;0<=l?s<l:s>l;a=0<=l?++s:--s)push_terms(stack[u+a]);return add_terms(tos-n),p1=pop(),moveTos(tos-t),push(p1),restore()},subtract=function(){return negate(),add()},Eval_adj=function(){return push(cadr(p1)),Eval(),adj()},adj=function(){var t,n,a,s,l,u,c;for(t=0,a=0,s=0,save(),p1=pop(),istensor(p1)&&p1.tensor.ndim===2&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("adj: square matrix expected"),s=p1.tensor.dim[0],p2=alloc_tensor(s*s),p2.tensor.ndim=2,p2.tensor.dim[0]=s,p2.tensor.dim[1]=s,t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l)for(a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)cofactor(p1,s,t,a),p2.tensor.elem[s*a+t]=pop();return push(p2),restore()},Eval_approxratio=function(){var t;return t=cadr(p1),push(t),approxratioRecursive()},approxratioRecursive=function(){var t,n,a,s,l;if(t=0,save(),p1=pop(),istensor(p1)){for(p4=alloc_tensor(p1.tensor.nelem),p4.tensor.ndim=p1.tensor.ndim,t=a=0,s=p1.tensor.ndim;0<=s?a<s:a>s;t=0<=s?++a:--a)p4.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,l=p1.tensor.nelem;0<=l?n<l:n>l;t=0<=l?++n:--n)push(p1.tensor.elem[t]),approxratioRecursive(),p4.tensor.elem[t]=pop(),check_tensor_dimensions(p4);push(p4)}else p1.k===DOUBLE?(push(p1),approxOneRatioOnly()):iscons(p1)?(push(car(p1)),approxratioRecursive(),push(cdr(p1)),approxratioRecursive(),cons()):push(p1);return restore()},approxOneRatioOnly=function(){var t,n,a,s,l,u;if(zzfloat(),s=pop(),s.k===DOUBLE){l=s.d,a=l.toString().split("."),a.length===2?(t=a[1].length,n=1/Math.pow(10,t),u=floatToRatioRoutine(l,n),push_rational(u[0],u[1])):push_integer(l);return}return push_symbol(APPROXRATIO),push(theArgument),list(2)},floatToRatioRoutine=function(t,n){var a,s,l,u,c,d,Ct;if(l=void 0,s=void 0,a=void 0,d=void 0,u=void 0,c=void 0,Ct=[0,0],isNaN(t))return Ct;if(t===1/0)return Ct[0]=1,Ct[1]=0,Ct;if(t===-1/0)return Ct[0]=-1,Ct[1]=0,Ct;if(t<0?a=-1:a=1,t=Math.abs(t),Math.abs(t-Math.floor(t))<n)return l=t*a,s=1,Ct[0]=l,Ct[1]=s,Ct;if(t<1e-19)return l=a,s=1e19,Ct[0]=l,Ct[1]=s,Ct;if(t>1e19)return l=1e19*a,s=1,Ct[0]=l,Ct[1]=s,Ct;for(d=t,u=0,s=1;d=1/(d-Math.floor(d)),c=s,s=s*Math.floor(d)+u,u=c,l=Math.floor(t*s+.5),Math.abs(t-l/s)>n&&d!==Math.floor(d););return l=a*l,Ct[0]=l,Ct[1]=s,Ct},approx_just_an_integer=0,approx_sine_of_rational=1,approx_sine_of_pi_times_rational=2,approx_rationalOfPi=3,approx_radicalOfRatio=4,approx_ratioOfRadical=6,approx_rationalOfE=7,approx_logarithmsOfRationals=8,approx_rationalsOfLogarithms=9,approxRationalsOfRadicals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax;if(ax=t.toString().split("."),ax.length===2)tn=ax[1].length,fn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+fn),n=null,en=Number.MAX_VALUE,Cn=[2,3,5,6,7,8,10],on=0,Ct=Cn.length;on<Ct;on++)for(u=Cn[on],d=c=1;c<=10;d=++c)l=Math.sqrt(u)/d,Math.abs(l)>1e-10?(dn=t/l,ar=Math.round(dn),s=Math.abs(1-dn/ar)):(dn=1,ar=1,s=Math.abs(t-l)),s<2*fn&&(a=simpleComplexityMeasure(ar,u,d),a<en&&(en=a,Rn=ar+" * sqrt( "+u+" ) / "+d,n=[Rn,approx_ratioOfRadical,ar,u,d]));return n},approxRadicalsOfRationals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx;if(sx=t.toString().split("."),sx.length===2)on=sx[1].length,dn=1/Math.pow(10,on);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+dn),n=null,tn=Number.MAX_VALUE,Rn=[1,2,3,5,6,7,8,10],fn=0,Ct=Rn.length;fn<Ct;fn++)for(u=Rn[fn],ax=[1,2,3,5,6,7,8,10],c=0,ar=ax.length;c<ar;c++)d=ax[c],l=Math.sqrt(u/d),Math.abs(l)>1e-10?(Cn=t/l,en=Math.round(Cn),s=Math.abs(1-Cn/en)):(Cn=1,en=1,s=Math.abs(t-l)),s<2*dn&&(a=simpleComplexityMeasure(en,u,d),a<tn&&(tn=a,ox=en+" * (sqrt( "+u+" / "+d+" )",n=[ox,approx_radicalOfRatio,en,u,d]));return n},approxRadicals=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxRationalsOfRadicals(t),a??(n=approxRadicalsOfRationals(t),n??null)},approxLogs=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxRationalsOfLogs(t),a??(n=approxLogsOfRationals(t),n??null)},approxRationalsOfLogs=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=2;tn<=5;u=++tn)for(d=c=1;c<=5;d=++c)l=Math.log(u)/d,Math.abs(l)>1e-10?(fn=t/l,Ct=Math.round(fn),s=Math.abs(1-fn/Ct)):(fn=1,Ct=1,s=Math.abs(t-l)),!(Ct!==1&&Math.abs(Math.floor(Ct/d))===Math.abs(Ct/d))&&s<2.2*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * log( "+u+" ) / "+d,n=[dn,approx_rationalsOfLogarithms,Ct,u,d]));return n},approxLogsOfRationals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=1;tn<=5;u=++tn)for(d=c=1;c<=5;d=++c)l=Math.log(u/d),Math.abs(l)>1e-10?(fn=t/l,Ct=Math.round(fn),s=Math.abs(1-fn/Ct)):(fn=1,Ct=1,s=Math.abs(t-l)),s<1.96*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * log( "+u+" / "+d+" )",n=[dn,approx_logarithmsOfRationals,Ct,u,d]));return n},approxRationalsOfPowersOfE=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=1;tn<=2;u=++tn)for(d=c=1;c<=12;d=++c)l=Math.pow(Math.E,u)/d,Math.abs(l)>1e-10?(fn=t/l,Ct=Math.round(fn),s=Math.abs(1-fn/Ct)):(fn=1,Ct=1,s=Math.abs(t-l)),s<2*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * (e ^ "+u+" ) / "+d,n=[dn,approx_rationalOfE,Ct,u,d]));return n},approxRationalsOfPowersOfPI=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;if(Cn=t.toString().split("."),Cn.length===2)en=Cn[1].length,on=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+on),n=null,ar=Number.MAX_VALUE,u=tn=1;tn<=5;u=++tn)for(d=c=1;c<=12;d=++c)l=Math.pow(Math.PI,u)/d,Math.abs(l)>1e-10?(fn=t/l,Ct=Math.round(fn),s=Math.abs(1-fn/Ct)):(fn=1,Ct=1,s=Math.abs(t-l)),s<2*on&&(a=simpleComplexityMeasure(Ct,u,d),a<ar&&(ar=a,dn=Ct+" * (pi ^ "+u+" ) / "+d+" )",n=[dn,approx_rationalOfPi,Ct,u,d]));return n},approxTrigonometric=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxSineOfRationals(t),a??(n=approxSineOfRationalMultiplesOfPI(t),n??null)},approxSineOfRationals=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn;if(Rn=t.toString().split("."),Rn.length===2)tn=Rn[1].length,fn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+fn),n=null,en=Number.MAX_VALUE,c=on=1;on<=4;c=++on)for(Ct=d=1;d<=4;Ct=++d)l=c/Ct,u=Math.sin(l),Math.abs(u)>1e-10?(dn=t/u,ar=Math.round(dn),s=Math.abs(1-dn/ar)):(dn=1,ar=1,s=Math.abs(t-u)),s<2*fn&&(a=simpleComplexityMeasure(ar,c,Ct),a<en&&(en=a,Cn=ar+" * sin( "+c+"/"+Ct+" )",n=[Cn,approx_sine_of_rational,ar,c,Ct]));return n},approxSineOfRationalMultiplesOfPI=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn;if(Rn=t.toString().split("."),Rn.length===2)tn=Rn[1].length,fn=1/Math.pow(10,tn);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+fn),n=null,en=Number.MAX_VALUE,c=on=1;on<=13;c=++on)for(Ct=d=1;d<=13;Ct=++d)l=c/Ct,u=Math.sin(Math.PI*l),Math.abs(u)>1e-10?(dn=t/u,ar=Math.round(dn),s=Math.abs(1-dn/ar)):(dn=1,ar=1,s=Math.abs(t-u)),s<23*fn&&(a=simpleComplexityMeasure(ar,c,Ct),a<en&&(en=a,Cn=ar+" * sin( "+c+"/"+Ct+" * pi )",n=[Cn,approx_sine_of_pi_times_rational,ar,c,Ct]));return n},approxAll=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on;if(on=t.toString().split("."),on.length===2)en=on[1].length,tn=1/Math.pow(10,en);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+tn),ar=Number.MAX_VALUE,Ct=0,d=null,n=!0,s=approxRadicals(t),s!=null&&(Ct=simpleComplexityMeasure(s),Ct<ar?(n&&console.log("better explanation by approxRadicals: "+s+" complexity: "+Ct),ar=Ct,d=s):n&&console.log("subpar explanation by approxRadicals: "+s+" complexity: "+Ct)),a=approxLogs(t),a!=null&&(Ct=simpleComplexityMeasure(a),Ct<ar?(n&&console.log("better explanation by approxLogs: "+a+" complexity: "+Ct),ar=Ct,d=a):n&&console.log("subpar explanation by approxLogs: "+a+" complexity: "+Ct)),l=approxRationalsOfPowersOfE(t),l!=null&&(Ct=simpleComplexityMeasure(l),Ct<ar?(n&&console.log("better explanation by approxRationalsOfPowersOfE: "+l+" complexity: "+Ct),ar=Ct,d=l):n&&console.log("subpar explanation by approxRationalsOfPowersOfE: "+l+" complexity: "+Ct)),u=approxRationalsOfPowersOfPI(t),u!=null&&(Ct=simpleComplexityMeasure(u),Ct<ar?(n&&console.log("better explanation by approxRationalsOfPowersOfPI: "+u+" complexity: "+Ct),ar=Ct,d=u):n&&console.log("subpar explanation by approxRationalsOfPowersOfPI: "+u+" complexity: "+Ct)),c=approxTrigonometric(t),c!=null&&(Ct=simpleComplexityMeasure(c),Ct<ar?(n&&console.log("better explanation by approxTrigonometric: "+c+" complexity: "+Ct),ar=Ct,d=c):n&&console.log("subpar explanation by approxTrigonometric: "+c+" complexity: "+Ct)),d},simpleComplexityMeasure=function(t,n,a){var s;if(s=null,t instanceof Array){switch(t[1]){case approx_sine_of_pi_times_rational:s=4;break;case approx_rationalOfPi:s=Math.pow(4,Math.abs(t[3]))*Math.abs(t[2]);break;case approx_rationalOfE:s=Math.pow(3,Math.abs(t[3]))*Math.abs(t[2]);break;default:s=0}s+=Math.abs(t[2])*(Math.abs(t[3])+Math.abs(t[4]))}else s+=Math.abs(t)*(Math.abs(n)+Math.abs(a));return t[2]===1?s-=1:s+=1,t[3]===1?s-=1:s+=1,t[4]===1?s-=1:s+=1,s<0&&(s=0),s},testApprox=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx,vx,yx,Sx,_x,Ex,bx,Ax,Mx,Rx,Cx,Lx,qx,Ix,Px,Nx,Bx,$x,Vx,Gx,Zx,jx,Hx,iE,Xx,rE,uE,aE,Kx,ME,IE,wE,bE;for(Rx=[2,3,5,6,7,8,10],vx=0,dn=Rx.length;vx<dn;vx++)for(a=Rx[vx],Cx=[2,3,5,6,7,8,10],s=0,Cn=Cx.length;s<Cn;s++)c=Cx[s],a!==c&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" ) / "+c),n=a/c,Kx=Math.sqrt(a)/c,$x=approxRadicals(Kx),Gx=$x[2]*Math.sqrt($x[3])/$x[4],Math.abs(Kx-Gx)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" ) / "+c+" . obtained: "+$x));for(Lx=[2,3,5,6,7,8,10],d=0,Rn=Lx.length;d<Rn;d++)for(a=Lx[d],qx=[2,3,5,6,7,8,10],tn=0,ax=qx.length;tn<ax;tn++)c=qx[tn],a!==c&&(console.log("testapproxRadicals testing with 4 digits: 1 * sqrt( "+a+" ) / "+c),n=a/c,_x=Math.sqrt(a)/c,Kx=_x.toFixed(4),$x=approxRadicals(Kx),Gx=$x[2]*Math.sqrt($x[3])/$x[4],Math.abs(_x-Gx)>1e-15&&console.log("fail testapproxRadicals with 4 digits: 1 * sqrt( "+a+" ) / "+c+" . obtained: "+$x));for(Ix=[2,3,5,6,7,8,10],fx=0,ox=Ix.length;fx<ox;fx++)for(a=Ix[fx],Px=[2,3,5,6,7,8,10],px=0,sx=Px.length;px<sx;px++)c=Px[px],a!==c&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" / "+c+" )"),n=a/c,Kx=Math.sqrt(a/c),$x=approxRadicals(Kx),$x!=null&&(Gx=$x[2]*Math.sqrt($x[3]/$x[4]),$x[1]===approx_radicalOfRatio&&Math.abs(Kx-Gx)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" / "+c+" ) . obtained: "+$x)));for(Nx=[1,2,3,5,6,7,8,10],yx=0,lx=Nx.length;yx<lx;yx++)for(a=Nx[yx],Bx=[1,2,3,5,6,7,8,10],Ex=0,cx=Bx.length;Ex<cx;Ex++)c=Bx[Ex],!(a===1&&c===1)&&(console.log("testapproxRadicals testing with 4 digits:: 1 * sqrt( "+a+" / "+c+" )"),n=a/c,_x=Math.sqrt(a/c),Kx=_x.toFixed(4),$x=approxRadicals(Kx),Gx=$x[2]*Math.sqrt($x[3]/$x[4]),$x[1]===approx_radicalOfRatio&&Math.abs(_x-Gx)>1e-15&&console.log("fail testapproxRadicals with 4 digits:: 1 * sqrt( "+a+" / "+c+" ) . obtained: "+$x));for(a=Ax=1;Ax<=5;a=++Ax)for(c=Zx=1;Zx<=5;c=++Zx)console.log("testApproxAll testing: 1 * log("+a+" ) / "+c),n=a/c,Kx=Math.log(a)/c,$x=approxAll(Kx),Gx=$x[2]*Math.log($x[3])/$x[4],Math.abs(Kx-Gx)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" ) / "+c+" . obtained: "+$x);for(a=Hx=1;Hx<=5;a=++Hx)for(c=Xx=1;Xx<=5;c=++Xx)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" ) / "+c),n=a/c,_x=Math.log(a)/c,Kx=_x.toFixed(4),$x=approxAll(Kx),Gx=$x[2]*Math.log($x[3])/$x[4],Math.abs(_x-Gx)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" ) / "+c+" . obtained: "+$x);for(a=uE=1;uE<=5;a=++uE)for(c=ME=1;ME<=5;c=++ME)console.log("testApproxAll testing: 1 * log("+a+" / "+c+" )"),n=a/c,Kx=Math.log(a/c),$x=approxAll(Kx),Gx=$x[2]*Math.log($x[3]/$x[4]),Math.abs(Kx-Gx)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" / "+c+" ) . obtained: "+$x);for(a=wE=1;wE<=5;a=++wE)for(c=l=1;l<=5;c=++l)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" / "+c+" )"),n=a/c,_x=Math.log(a/c),Kx=_x.toFixed(4),$x=approxAll(Kx),Gx=$x[2]*Math.log($x[3]/$x[4]),Math.abs(_x-Gx)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" / "+c+" ) . obtained: "+$x);for(a=Ct=1;Ct<=2;a=++Ct)for(c=on=1;on<=12;c=++on)console.log("testApproxAll testing: 1 * (e ^ "+a+" ) / "+c),n=a/c,Kx=Math.pow(Math.E,a)/c,$x=approxAll(Kx),Gx=$x[2]*Math.pow(Math.E,$x[3])/$x[4],Math.abs(Kx-Gx)>1e-15&&console.log("fail testApproxAll: 1 * (e ^ "+a+" ) / "+c+" . obtained: "+$x);for(a=gx=1;gx<=2;a=++gx)for(c=hx=1;hx<=12;c=++hx)console.log("approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ "+a+" ) / "+c),n=a/c,_x=Math.pow(Math.E,a)/c,Kx=_x.toFixed(4),$x=approxRationalsOfPowersOfE(Kx),Gx=$x[2]*Math.pow(Math.E,$x[3])/$x[4],Math.abs(_x-Gx)>1e-15&&console.log("fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ "+a+" ) / "+c+" . obtained: "+$x);for(a=Sx=1;Sx<=2;a=++Sx)for(c=bx=1;bx<=12;c=++bx)console.log("testApproxAll testing: 1 * pi ^ "+a+" / "+c),n=a/c,Kx=Math.pow(Math.PI,a)/c,$x=approxAll(Kx),Gx=$x[2]*Math.pow(Math.PI,$x[3])/$x[4],Math.abs(Kx-Gx)>1e-15&&console.log("fail testApproxAll: 1 * pi ^ "+a+" / "+c+" ) . obtained: "+$x);for(a=Mx=1;Mx<=2;a=++Mx)for(c=jx=1;jx<=12;c=++jx)console.log("approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ "+a+" / "+c),n=a/c,_x=Math.pow(Math.PI,a)/c,Kx=_x.toFixed(4),$x=approxRationalsOfPowersOfPI(Kx),Gx=$x[2]*Math.pow(Math.PI,$x[3])/$x[4],Math.abs(_x-Gx)>1e-15&&console.log("fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ "+a+" / "+c+" ) . obtained: "+$x);for(a=iE=1;iE<=4;a=++iE)for(c=rE=1;rE<=4;c=++rE)console.log("testApproxAll testing: 1 * sin( "+a+"/"+c+" )"),n=a/c,Kx=Math.sin(n),$x=approxAll(Kx),Vx=$x[3]/$x[4],Gx=$x[2]*Math.sin(Vx),Math.abs(Kx-Gx)>1e-15&&console.log("fail testApproxAll: 1 * sin( "+a+"/"+c+" ) . obtained: "+$x);for(a=aE=1;aE<=4;a=++aE)for(c=IE=1;IE<=4;c=++IE)console.log("testApproxAll testing with 5 digits: 1 * sin( "+a+"/"+c+" )"),n=a/c,_x=Math.sin(n),Kx=_x.toFixed(5),$x=approxAll(Kx),$x==null&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+c+" ) . obtained:  undefined "),Vx=$x[3]/$x[4],Gx=$x[2]*Math.sin(Vx),t=Math.abs(_x-Gx),t>1e-14&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+c+" ) . obtained: "+$x+" error: "+t);for(a=bE=1;bE<=4;a=++bE)for(c=u=1;u<=4;c=++u)console.log("testApproxAll testing with 4 digits: 1 * sin( "+a+"/"+c+" )"),n=a/c,_x=Math.sin(n),Kx=_x.toFixed(4),$x=approxAll(Kx),$x==null&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+c+" ) . obtained:  undefined "),Vx=$x[3]/$x[4],Gx=$x[2]*Math.sin(Vx),t=Math.abs(_x-Gx),t>1e-14&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+c+" ) . obtained: "+$x+" error: "+t);for(Kx=0,approxAll(Kx)[0]!=="0"&&console.log("fail testApproxAll: 0"),Kx=0,approxAll(Kx)[0]!=="0"&&console.log("fail testApproxAll: 0.0"),Kx=0,approxAll(Kx)[0]!=="0"&&console.log("fail testApproxAll: 0.00"),Kx=0,approxAll(Kx)[0]!=="0"&&console.log("fail testApproxAll: 0.000"),Kx=0,approxAll(Kx)[0]!=="0"&&console.log("fail testApproxAll: 0.0000"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1.0"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1.00"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1.000"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1.00000"),Kx=Math.sqrt(2),approxAll(Kx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(2)"),Kx=1.41,approxAll(Kx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: 1.41"),Kx=1.4,approxRadicals(Kx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail approxRadicals: 1.4"),Kx=.6,approxLogs(Kx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.6"),Kx=.69,approxLogs(Kx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.69"),Kx=.7,approxLogs(Kx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.7"),Kx=1.09,approxLogs(Kx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxLogs: 1.09"),Kx=1.09,approxAll(Kx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.09"),Kx=1.098,approxAll(Kx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.098"),Kx=1.1,approxAll(Kx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.1"),Kx=1.11,approxAll(Kx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.11"),Kx=Math.sqrt(3),approxAll(Kx)[0]!=="1 * sqrt( 3 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(3)"),Kx=1,approxAll(Kx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Kx=3.141592,approxAll(Kx)[0]!=="1 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 3.141592"),Kx=31.41592,approxAll(Kx)[0]!=="10 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31.41592"),Kx=314.1592,approxAll(Kx)[0]!=="100 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 314.1592"),Kx=3141592653589793e-8,approxAll(Kx)[0]!=="10000000 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31415926.53589793"),Kx=Math.sqrt(2),approxTrigonometric(Kx)[0]!=="2 * sin( 1/4 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(2)"),Kx=Math.sqrt(3),approxTrigonometric(Kx)[0]!=="2 * sin( 1/3 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(3)"),Kx=(Math.sqrt(6)-Math.sqrt(2))/4,approxAll(Kx)[0]!=="1 * sin( 1/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),Kx=Math.sqrt(2-Math.sqrt(2))/2,approxAll(Kx)[0]!=="1 * sin( 1/8 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),Kx=(Math.sqrt(6)+Math.sqrt(2))/4,approxAll(Kx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),Kx=Math.sqrt(2+Math.sqrt(3))/2,approxAll(Kx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),Kx=(Math.sqrt(5)-1)/4,approxAll(Kx)[0]!=="1 * sin( 1/10 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),Kx=Math.sqrt(10-2*Math.sqrt(5))/4,approxAll(Kx)[0]!=="1 * sin( 1/5 * pi )"&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),Kx=Math.sin(Math.PI/7),approxAll(Kx)[0]!=="1 * sin( 1/7 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),Kx=Math.sin(Math.PI/9),approxAll(Kx)[0]!=="1 * sin( 1/9 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),Kx=1836.15267,approxRationalsOfPowersOfPI(Kx)[0]!=="6 * (pi ^ 5 ) / 1 )"&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267"),a=ar=1;ar<=13;a=++ar)for(c=en=1;en<=13;c=++en)console.log("approxTrigonometric testing: 1 * sin( "+a+"/"+c+" * pi )"),n=a/c,Kx=Math.sin(Math.PI*n),$x=approxTrigonometric(Kx),Vx=$x[3]/$x[4],Gx=$x[2]*Math.sin(Math.PI*Vx),Math.abs(Kx-Gx)>1e-15&&console.log("fail approxTrigonometric: 1 * sin( "+a+"/"+c+" * pi ) . obtained: "+$x);for(a=fn=1;fn<=13;a=++fn)for(c=mx=1;mx<=13;c=++mx)a===5&&c===11||a===6&&c===11||(console.log("approxTrigonometric testing with 4 digits: 1 * sin( "+a+"/"+c+" * pi )"),n=a/c,_x=Math.sin(Math.PI*n),Kx=_x.toFixed(4),$x=approxTrigonometric(Kx),Vx=$x[3]/$x[4],Gx=$x[2]*Math.sin(Math.PI*Vx),t=Math.abs(_x-Gx),t>1e-14&&console.log("fail approxTrigonometric with 4 digits: 1 * sin( "+a+"/"+c+" * pi ) . obtained: "+$x+" error: "+t));return console.log("testApprox done")},$.approxRadicals=approxRadicals,$.approxRationalsOfLogs=approxRationalsOfLogs,$.approxAll=approxAll,$.testApprox=testApprox,Eval_arccos=function(){return push(cadr(p1)),Eval(),arccos()},arccos=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.acos(p1.d),n&&stop("arccos function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI/4):(push_rational(1,4),push_symbol(PI),multiply()),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI*3/4):(push_rational(3,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(5*Math.PI/6):(push_rational(5,6),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCCOS),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(Math.PI):push_symbol(PI);break;case-1:evaluatingAsFloats?push_double(Math.PI*2/3):(push_rational(2,3),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;case 1:evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(0):push(zero);break;default:push_symbol(ARCCOS),push(p1),list(2)}return restore()},Eval_arccosh=function(){return push(cadr(p1)),Eval(),arccosh()},arccosh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(COSH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t<1&&stop("arccosh function argument is less than 1.0"),t=Math.log(t+Math.sqrt(t*t-1)),push_double(t),restore();return}if(isplusone(p1)){push(zero),restore();return}return push_symbol(ARCCOSH),push(p1),list(2),restore()},Eval_arcsin=function(){return push(cadr(p1)),Eval(),arcsin()},arcsin=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(SIN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.asin(p1.d),n&&stop("arcsin function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,4),push_symbol(PI),multiply(),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(-Math.PI/4):(push_rational(-1,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(-Math.PI/3):(push_rational(-1,3),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCSIN),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(-Math.PI/2):(push_rational(-1,2),push_symbol(PI),multiply());break;case-1:evaluatingAsFloats?push_double(-Math.PI/6):(push_rational(-1,6),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;default:push_symbol(ARCSIN),push(p1),list(2)}return restore()},Eval_arcsinh=function(){return push(cadr(p1)),Eval(),arcsinh()},arcsinh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(SINH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t=Math.log(t+Math.sqrt(t*t+1)),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCSINH),push(p1),list(2),restore()},Eval_arctan=function(){return push(cadr(p1)),Eval(),arctan()},arctan=function(){var t,n;if(t=0,save(),p1=pop(),car(p1)===symbol(TAN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.atan(p1.d),n&&stop("arctan function error"),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}if(isnegative(p1)){push(p1),negate(),arctan(),negate(),restore();return}if(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&(push(p1),numerator(),p2=pop(),push(p1),denominator(),p3=pop(),car(p2)===symbol(SIN)&&car(p3)===symbol(COS)&&equal(cadr(p2),cadr(p3)))){push(cadr(p2)),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),-1,2)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,3)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),3)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,6),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(equaln(p1,1)){push_rational(1,4),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),1,2)){push_rational(1,3),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}return push_symbol(ARCTAN),push(p1),list(2),restore()},Eval_arctanh=function(){return push(cadr(p1)),Eval(),arctanh()},arctanh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(TANH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,(t<-1||t>1)&&stop("arctanh function argument is not in the interval [-1,1]"),t=Math.log((1+t)/(1-t))/2,push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCTANH),push(p1),list(2),restore()},DEBUG_ARG=!1,Eval_arg=function(){return push(cadr(p1)),Eval(),arg()},arg=function(){return save(),p1=pop(),push(p1),numerator(),yyarg(),push(p1),denominator(),yyarg(),subtract(),restore()},yyarg=function(){if(save(),p1=pop(),ispositivenumber(p1)||p1===symbol(PI))isdouble(p1)||evaluatingAsFloats?push_double(0):push_integer(0);else if(isnegativenumber(p1))isdouble(p1)||evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),negate();else if(issymbol(p1))push_symbol(ARG),push(p1),list(2);else if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),push(caddr(p1)),multiply();else if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))push(caddr(p1)),imag();else if(car(p1)===symbol(POWER)&&isoneovertwo(caddr(p1))){if(DEBUG_ARG&&console.log("arg of a sqrt: "+p1),DEBUG_ARG)debugger;push(cadr(p1)),arg(),DEBUG_ARG&&console.log(" = 1/2 * "+stack[tos-1]),push(caddr(p1)),multiply()}else if(car(p1)===symbol(MULTIPLY))for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),arg(),add(),p1=cdr(p1);else car(p1)===symbol(ADD)?(push(p1),rect(),p1=pop(),push(p1),real(),p2=pop(),push(p1),imag(),p3=pop(),isZeroAtomOrTensor(p2)?(evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),isnegative(p3)&&negate()):(push(p3),push(p2),divide(),arctan(),isnegative(p2)&&(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),isnegative(p3)?subtract():add()))):isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(ARG),push(p1),list(2)):push_integer(0);return restore()},bake=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,l=0,u=0,expanding++,save(),p1=pop(),n=ispolyexpandedform(p1,symbol(SYMBOL_S)),a=ispolyexpandedform(p1,symbol(SYMBOL_T)),s=ispolyexpandedform(p1,symbol(SYMBOL_X)),l=ispolyexpandedform(p1,symbol(SYMBOL_Y)),u=ispolyexpandedform(p1,symbol(SYMBOL_Z)),n===1&&a===0&&s===0&&l===0&&u===0)p2=symbol(SYMBOL_S),bake_poly();else if(n===0&&a===1&&s===0&&l===0&&u===0)p2=symbol(SYMBOL_T),bake_poly();else if(n===0&&a===0&&s===1&&l===0&&u===0)p2=symbol(SYMBOL_X),bake_poly();else if(n===0&&a===0&&s===0&&l===1&&u===0)p2=symbol(SYMBOL_Y),bake_poly();else if(n===0&&a===0&&s===0&&l===0&&u===1)p2=symbol(SYMBOL_Z),bake_poly();else if(iscons(p1)&&car(p1)!==symbol(FOR)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),bake(),p1=cdr(p1);list(tos-t)}else push(p1);return restore(),expanding--},polyform=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2))bake_poly();else if(iscons(p1)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),polyform(),p1=cdr(p1);list(tos-t)}else push(p1);return restore()},bake_poly=function(){var t,n,a,s,l,u;for(n=0,a=0,s=0,l=0,t=tos,s=coeff(p2,p1),n=tos,a=u=s-1;u>=0;a=u+=-1)p1=stack[t+a],bake_poly_term(a);return l=tos-n,l>1&&(list(l),push(symbol(ADD)),swap(),cons()),p1=pop(),moveTos(tos-s),push(p1)},bake_poly_term=function(t){var n,a;if(n=0,a=0,!isZeroAtomOrTensor(p1)){if(t===0){if(car(p1)===symbol(ADD))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return}if(n=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else equaln(p1,1)||push(p1);if(t===1?push(p2):(push(symbol(POWER)),push(p2),push_integer(t),list(3)),a=tos-n,a>1)return list(a),push(symbol(MULTIPLY)),swap(),cons()}},Eval_besselj=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),besselj()},besselj=function(){return save(),yybesselj(),restore()},yybesselj=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=jn(n,p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)&&isZeroAtomOrTensor(p2)){push_integer(1);return}if(isZeroAtomOrTensor(p1)&&!isNaN(n)){push_integer(0);return}if(p2.k===NUM&&MEQUAL(p2.q.b,2)){if(MEQUAL(p2.q.a,1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),sine(),multiply();return}if(MEQUAL(p2.q.a,-1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),cosine(),multiply();return}push_integer(MSIGN(p2.q.a)),p3=pop(),push_integer(2),push(p1),divide(),push(p2),push(p3),subtract(),multiply(),push(p1),push(p2),push(p3),subtract(),besselj(),multiply(),push(p1),push(p2),push_integer(2),push(p3),multiply(),subtract(),besselj(),subtract();return}if(isnegativeterm(p1)){push(p1),negate(),push(p2),power(),push(p1),push(p2),negate(),power(),multiply(),push_symbol(BESSELJ),push(p1),negate(),push(p2),list(3),multiply();return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELJ),push(p1),push(p2),negate(),list(3),multiply();return}return push(symbol(BESSELJ)),push(p1),push(p2),list(3)},Eval_bessely=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),bessely()},bessely=function(){return save(),yybessely(),restore()},yybessely=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=yn(n,p1.d),push_double(t);return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELY),push(p1),push(p2),negate(),list(3),multiply();return}push_symbol(BESSELY),push(p1),push(p2),list(3)},mint=function(t){return bigInt(t)},isSmall=function(t){return t.geq(Number.MIN_SAFE_INTEGER)&&t.leq(Number.MAX_SAFE_INTEGER)},setSignTo=function(t,n){if(t.isPositive()){if(n<0)return t.multiply(bigInt(-1))}else if(n>0)return t.multiply(bigInt(-1));return t},makeSignSameAs=function(t,n){if(t.isPositive()){if(n.isNegative())return t.multiply(bigInt(-1))}else if(n.isPositive())return t.multiply(bigInt(-1));return t},makePositive=function(t){return t.isNegative()?t.multiply(bigInt(-1)):t},add_numbers=function(){var t,n,a;if(t=1,n=1,isrational(stack[tos-1])&&isrational(stack[tos-2])){qadd();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),a=t+n,push_double(a),restore()},multiply_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qmul();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t*n),restore()},divide_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qdiv();return}return save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("divide by zero"),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t/n),restore()},invert_number=function(){var t,n;if(save(),p1=pop(),isZeroAtomOrTensor(p1)&&stop("divide by zero"),isdouble(p1)){push_double(1/p1.d),restore();return}return t=bigInt(p1.q.a),n=bigInt(p1.q.b),n=makeSignSameAs(n,t),t=setSignTo(t,1),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=t,push(p1),restore()},compare_rationals=function(t,n){var a,s,l;return l=0,a=mmul(t.q.a,n.q.b),s=mmul(t.q.b,n.q.a),l=mcmp(a,s),l},compare_numbers=function(t,n){var a,s;return a=0,s=0,isrational(t)&&isrational(n)?compare_rationals(t,n):(isdouble(t)?a=t.d:a=convert_rational_to_double(t),isdouble(n)?s=n.d:s=convert_rational_to_double(n),a<s?-1:a>s?1:0)},negate_number=function(){if(save(),p1=pop(),isZeroAtomOrTensor(p1)){push(p1),restore();return}switch(p1.k){case NUM:p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a.multiply(bigInt.minusOne)),p2.q.b=bigInt(p1.q.b),push(p2);break;case DOUBLE:push_double(-p1.d);break;default:stop("bug caught in mp_negate_number")}return restore()},bignum_truncate=function(){var t;return save(),p1=pop(),t=mdiv(p1.q.a,p1.q.b),p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=bigInt(1),push(p1),restore()},mp_numerator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a),p2.q.b=bigInt(1),push(p2),restore()},mp_denominator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.b),p2.q.b=bigInt(1),push(p2),restore()},bignum_power_number=function(t){var n,a,s;return save(),p1=pop(),n=mpow(p1.q.a,Math.abs(t)),a=mpow(p1.q.b,Math.abs(t)),t<0&&(s=n,n=a,a=s,n=makeSignSameAs(n,a),a=setSignTo(a,1)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=a,push(p1),restore()},convert_rational_to_double=function(t){var n,a;if(t.q==null)debugger;return n=t.q.a.divmod(t.q.b),a=n.quotient+n.remainder/t.q.b.toJSNumber(),a},new_integer=function(t){var n;return n=new U,n.k=NUM,n.q.a=bigInt(t),n.q.b=bigInt(1),n},push_integer=function(t){return DEBUG&&console.log("pushing integer "+t),push(new_integer(t))},push_double=function(t){return save(),p1=new U,p1.k=DOUBLE,p1.d=t,push(p1),restore()},push_rational=function(t,n){var a;return a=new U,a.k=NUM,a.q.a=bigInt(t),a.q.b=bigInt(n),push(a)},pop_integer=function(){var t;switch(t=NaN,save(),p1=pop(),p1.k){case NUM:isinteger(p1)&&isSmall(p1.q.a)&&(t=p1.q.a.toJSNumber());break;case DOUBLE:DEBUG&&console.log("popping integer but double is found"),Math.floor(p1.d)===p1.d&&(DEBUG&&console.log("...altough it's an integer"),t=p1.d)}return restore(),t},bignum_scan_integer=function(t){var n,a,s;return save(),a=0,s=t[a],(s==="+"||s==="-")&&a++,n=bigInt(t.substring(a)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=bigInt(1),push(p1),s==="-"&&negate(),restore()},bignum_scan_float=function(t){return push_double(parseFloat(t))},print_number=function(t,n){var a,s,l;switch(s="",l="",t.k){case NUM:a=t.q.a.toString(),n||a[0]==="-"&&(a=a.substring(1)),printMode===PRINTMODE_LATEX&&isfraction(t)&&(a="\\frac{"+a+"}{"),s+=a,isfraction(t)&&(printMode!==PRINTMODE_LATEX&&(s+="/"),l=t.q.b.toString(),printMode===PRINTMODE_LATEX&&(l+="}"),s+=l);break;case DOUBLE:a=doubleToReasonableString(t.d),n||a[0]==="-"&&(a=a.substring(1)),s+=a}return s},gcd_numbers=function(){return save(),p2=pop(),p1=pop(),p3=new U,p3.k=NUM,p3.q.a=mgcd(p1.q.a,p2.q.a),p3.q.b=mgcd(p1.q.b,p2.q.b),p3.q.a=setSignTo(p3.q.a,1),push(p3),restore()},pop_double=function(){var t;switch(t=0,save(),p1=pop(),p1.k){case NUM:t=convert_rational_to_double(p1);break;case DOUBLE:t=p1.d;break;default:t=0}return restore(),t},bignum_float=function(){var t;return t=0,t=convert_rational_to_double(pop()),push_double(t)},bignum_factorial=function(t){return save(),p1=new U,p1.k=NUM,p1.q.a=__factorial(t),p1.q.b=bigInt(1),push(p1),restore()},__factorial=function(t){var n,a,s,l,u,c;if(s=0,t===0||t===1)return n=bigInt(1),n;if(n=bigInt(2),a=bigInt(0),3<=t)for(s=l=3,u=t;3<=u?l<=u:l>=u;s=3<=u?++l:--l)a=bigInt(s),c=mmul(n,a),n=c;return n},Eval_binomial=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),binomial()},binomial=function(){return save(),ybinomial(),restore()},ybinomial=function(){if(p2=pop(),p1=pop(),BINOM_check_args()===0){push(zero);return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide()},BINOM_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_ceiling=function(){return push(cadr(p1)),Eval(),ceiling()},ceiling=function(){return save(),yyceiling(),restore()},yyceiling=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(CEILING),push(p1),list(2);return}if(isdouble(p1)){t=Math.ceil(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?1:(push_integer(1),add())},Eval_choose=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),choose()},choose=function(){if(save(),p2=pop(),p1=pop(),choose_check_args()===0){push_integer(0),restore();return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide(),restore()},choose_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_circexp=function(){return push(cadr(p1)),Eval(),circexp(),Eval()},circexp=function(){var t,n,a,s;if(n=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),expcos(),restore();return}if(car(p1)===symbol(SIN)){push(cadr(p1)),expsin(),restore();return}if(car(p1)===symbol(TAN)){p1=cadr(p1),push(imaginaryunit),push(p1),multiply(),exponential(),p2=pop(),push(imaginaryunit),push(p1),multiply(),negate(),exponential(),p3=pop(),push(p3),push(p2),subtract(),push(imaginaryunit),multiply(),push(p2),push(p3),add(),divide(),restore();return}if(car(p1)===symbol(COSH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),add(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(SINH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),subtract(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(TANH)){p1=cadr(p1),push(p1),push_integer(2),multiply(),exponential(),p1=pop(),push(p1),push_integer(1),subtract(),push(p1),push_integer(1),add(),divide(),restore();return}if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),circexp(),p1=cdr(p1);list(tos-t),restore();return}if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,s=p1.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)push(p1.tensor.elem[n]),circexp(),p1.tensor.elem[n]=pop();push(p1),restore();return}return push(p1),restore()},Eval_clearall=function(){return do_clearall(),push(symbol(NIL))},do_clearall=function(){return test_flag===0&&clear_term(),do_clearPatterns(),clear_symbols(),defn(),codeGen=!1},clearRenamedVariablesToAvoidBindingToExternalScope=function(){var t,n,a,s;for(s=[],t=n=0,a=symtab.length;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t].printname.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")!==-1?(symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],s.push(isSymbolReclaimable[t]=!0)):s.push(void 0);return s},Eval_clear=function(){var t,n;for(p2=cdr(p1);iscons(p2);)n=car(p2),n.k!==SYM&&stop("symbol error"),t=symtab.indexOf(n),symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],isSymbolReclaimable[t]=!0,p2=cdr(p2);return push(symbol(NIL))},DEBUG_CLOCKFORM=!1,Eval_clock=function(){return push(cadr(p1)),Eval(),clockform()},clockform=function(){return save(),p1=pop(),push(p1),abs(),DEBUG_CLOCKFORM&&console.log("clockform: abs of "+p1+" : "+stack[tos-1]),push_symbol(POWER),push_integer(-1),push(p1),arg(),DEBUG_CLOCKFORM&&console.log("clockform: arg of "+p1+" : "+stack[tos-1]),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),divide(),DEBUG_CLOCKFORM&&console.log("clockform: divide : "+stack[tos-1]),list(3),DEBUG_CLOCKFORM&&console.log("clockform: power : "+stack[tos-1]),multiply(),DEBUG_CLOCKFORM&&console.log("clockform: multiply : "+stack[tos-1]),restore()},Eval_coeff=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p3=pop(),p2=pop(),p1=pop(),p3===symbol(NIL)&&(p3=p2,p2=symbol(SYMBOL_X)),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter()},coeff=function(t,n){var a,s,l,u;for(DEBUG&&console.log("coeff: "+t+" "+n),a=0;;){if(push(n),push(t),push(zero),subst(),Eval(),s=pop(),push(s),a++,push(n),push(s),subtract(),l=pop(),equal(l,zero))return DEBUG&&console.log("coeff: result: "+a),a;push(l),push(t),u=expanding,expanding=1,divide(),expanding=u,n=pop()}},Eval_cofactor=function(){var t,n,a;return t=0,n=0,a=0,push(cadr(p1)),Eval(),p2=pop(),istensor(p2)&&p2.tensor.ndim===2&&p2.tensor.dim[0]===p2.tensor.dim[1]||stop("cofactor: 1st arg: square matrix expected"),a=p2.tensor.dim[0],push(caddr(p1)),Eval(),t=pop_integer(),(t<1||t>a)&&stop("cofactor: 2nd arg: row index expected"),push(cadddr(p1)),Eval(),n=pop_integer(),(n<1||n>a)&&stop("cofactor: 3rd arg: column index expected"),cofactor(p2,a,t-1,n-1)},cofactor=function(t,n,a,s){var l,u,c,d,Ct,ar;for(l=0,c=0,l=d=0,Ct=n;0<=Ct?d<Ct:d>Ct;l=0<=Ct?++d:--d)for(c=u=0,ar=n;0<=ar?u<ar:u>ar;c=0<=ar?++u:--u)l!==a&&c!==s&&push(t.tensor.elem[n*l+c]);if(determinant(n-1),(a+s)%2)return negate()},Eval_condense=function(){return push(cadr(p1)),Eval(),Condense()},Condense=function(){var t;return t=expanding,expanding=0,save(),yycondense(),restore(),expanding=t},yycondense=function(){if(p1=pop(),car(p1)!==symbol(ADD)){push(p1);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),DEBUG&&console.log("calculating gcd between: "+stack[tos-1]+" and "+stack[tos-2]),gcd(),DEBUG&&console.log("partial gcd: "+stack[tos-1]),p3=cdr(p3);for(DEBUG&&console.log("condense: this is the gcd of all the terms: "+stack[tos-1]),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply_noexpand(),add(),p3=cdr(p3);return yyexpand(),push(p2),divide()},Eval_conj=function(){return push(cadr(p1)),Eval(),p1=pop(),push(p1),Find(p1,imaginaryunit)?conjugate():(polar(),conjugate(),clockform())},conjugate=function(){return push(imaginaryunit),push(imaginaryunit),negate(),subst(),Eval()},consCount=0,cons=function(){var t;if(consCount++,DEBUG&&console.log("cons tos: "+tos+" # "+consCount),t=new U,t.k=CONS,t.cons.cdr=pop(),t===t.cons.cdr){debugger;console.log("something wrong p == its cdr")}return t.cons.car=pop(),push(t)},Eval_contract=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),contract()},contract=function(){return save(),yycontract(),restore()},yycontract=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx;if(l=0,u=0,d=0,ar=0,en=0,on=0,dn=0,Rn=0,ax=0,n=[],a=[],p3=pop(),p2=pop(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("contract: tensor expected, 1st arg is not a tensor"),push(zero);return}for(push(p2),en=pop_integer(),push(p3),on=pop_integer(),Rn=p1.tensor.ndim,(en<1||en>Rn||on<1||on>Rn||en===on||p1.tensor.dim[en-1]!==p1.tensor.dim[on-1])&&stop("contract: index out of range"),en--,on--,dn=p1.tensor.dim[en],ax=1,u=ox=0,lx=Rn;0<=lx?ox<lx:ox>lx;u=0<=lx?++ox:--ox)u!==en&&u!==on&&(ax*=p1.tensor.dim[u]);for(p2=alloc_tensor(ax),p2.tensor.ndim=Rn-2,d=0,u=c=0,cx=Rn;0<=cx?c<cx:c>cx;u=0<=cx?++c:--c)u!==en&&u!==on&&(p2.tensor.dim[d++]=p1.tensor.dim[u]);for(t=p1.tensor.elem,s=p2.tensor.elem,u=Ct=0,fx=Rn;0<=fx?Ct<fx:Ct>fx;u=0<=fx?++Ct:--Ct)n[u]=0,a[u]=p1.tensor.dim[u];for(u=tn=0,gx=ax;0<=gx?tn<gx:tn>gx;u=0<=gx?++tn:--tn){for(push(zero),d=fn=0,mx=dn;0<=mx?fn<mx:fn>mx;d=0<=mx?++fn:--fn){for(n[en]=d,n[on]=d,l=0,ar=Cn=0,px=Rn;0<=px?Cn<px:Cn>px;ar=0<=px?++Cn:--Cn)l=l*a[ar]+n[ar];push(t[l]),add()}for(s[u]=pop(),d=sx=hx=Rn-1;hx<=0?sx<=0:sx>=0;d=hx<=0?++sx:--sx)if(!(d===en||d===on)){if(++n[d]<a[d])break;n[d]=0}}return push(ax===1?s[0]:p2)},Eval_cos=function(){return push(cadr(p1)),Eval(),cosine()},cosine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?cosine_of_angle_sum():cosine_of_angle(),restore()},cosine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),cosine(),push(p4),cosine(),multiply(),push(p3),sine(),push(p4),sine(),multiply(),subtract();return}p2=cdr(p2)}return cosine_of_angle()},cosine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCCOS)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cos(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)&&(push(p1),negate(),p1=pop()),car(p1)===symbol(ARCTAN)){push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(COS)),push(p1),list(2);return}switch(n%360){case 90:case 270:return push_integer(0);case 60:case 300:return push_rational(1,2);case 120:case 240:return push_rational(-1,2);case 45:case 315:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 135:case 225:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 30:case 330:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 210:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 0:return push_integer(1);case 180:return push_integer(-1);default:return push(symbol(COS)),push(p1),list(2)}},Eval_cosh=function(){return push(cadr(p1)),Eval(),ycosh()},ycosh=function(){return save(),yycosh(),restore()},yycosh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCCOSH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cosh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}return push_symbol(COSH),push(p1),list(2)},Eval_decomp=function(){var t;return save(),console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!"),t=tos,push(symbol(NIL)),push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),decomp(!1),list(tos-t),restore()},pushTryNotToDuplicate=function(t){if(tos>0&&(DEBUG&&console.log("comparing "+t+" to: "+stack[tos-1]),equal(t,stack[tos-1]))){DEBUG&&console.log("skipping "+t+" because it's already on stack ");return}return push(t)},decomp=function(t){if(save(),p2=pop(),p1=pop(),DEBUG&&console.log("DECOMPOSING "+p1),t){if(!iscons(p1)){DEBUG&&console.log(" ground thing: "+p1),pushTryNotToDuplicate(p1),restore();return}}else if(Find(p1,p2)===0){DEBUG&&console.log(" entire expression is constant"),pushTryNotToDuplicate(p1),restore();return}if(isadd(p1)){decomp_sum(t),restore();return}if(ismultiply(p1)){decomp_product(t),restore();return}for(DEBUG&&console.log(" naive decomp"),p3=cdr(p1),DEBUG&&console.log("startig p3: "+p3);iscons(p3);)t&&push(car(p3)),DEBUG&&console.log("recursive decomposition"),push(car(p3)),DEBUG&&console.log("car(p3): "+car(p3)),push(p2),DEBUG&&console.log("p2: "+p2),decomp(t),p3=cdr(p3);return restore()},decomp_sum=function(t){var n;for(DEBUG&&console.log(" decomposing the sum "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return add_all(tos-n),p3=pop(),pushTryNotToDuplicate(p3),push(p3),negate()},decomp_product=function(t){var n;for(DEBUG&&console.log(" decomposing the product "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return multiply_all(tos-n)},define_user_function=function(){return p3=caadr(p1),p4=cdadr(p1),p5=caddr(p1),issymbol(p3)||stop("function name?"),car(p5)===symbol(EVAL)&&(push(cadr(p5)),Eval(),p5=pop()),push_symbol(FUNCTION),push(p5),push(p4),list(3),p5=pop(),set_binding(p3,p5),push_symbol(NIL)},Eval_function_reference=function(){return push(p1)},Eval_defint=function(){for(push(cadr(p1)),Eval(),p2=pop(),p1=cddr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1),Eval(),p3=pop(),push(car(p1)),p1=cdr(p1),Eval(),p4=pop(),push(car(p1)),p1=cdr(p1),Eval(),p5=pop(),push(p2),push(p3),integral(),p2=pop(),push(p2),push(p3),push(p5),subst(),Eval(),push(p2),push(p3),push(p4),subst(),Eval(),subtract(),p2=pop();return push(p2)},Eval_degree=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),degree()},degree=function(){return save(),p2=pop(),p1=pop(),p3=zero,yydegree(p1),push(p3),restore()},yydegree=function(t){var n;if(equal(t,p2)){if(isZeroAtomOrTensor(p3))return p3=one}else if(car(t)===symbol(POWER)){if(equal(cadr(t),p2)&&isNumericAtom(caddr(t))&&lessp(p3,caddr(t)))return p3=caddr(t)}else if(iscons(t)){for(t=cdr(t),n=[];iscons(t);)yydegree(car(t)),n.push(t=cdr(t));return n}},Eval_denominator=function(){return push(cadr(p1)),Eval(),denominator()},denominator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),denominator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_denominator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?(push(n),reciprocate()):push(one)},Eval_derivative=function(){var t,n,a,s,l;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth derivative: check n")):n=1,push(p3),n>=0)for(a=0,s=n;0<=s?a<s:a>s;0<=s?++a:--a)push(p4),derivative();else for(n=-n,t=0,l=n;0<=l?t<l:t>l;0<=l?++t:--t)push(p4),integral();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},derivative=function(){return save(),p2=pop(),p1=pop(),isNumericAtom(p2)&&stop("undefined function"),istensor(p1)?istensor(p2)?d_tensor_tensor():d_tensor_scalar():istensor(p2)?d_scalar_tensor():d_scalar_scalar(),restore()},d_scalar_scalar=function(){return issymbol(p2)?d_scalar_scalar_1():(push(p1),push(p2),push(symbol(SECRETX)),subst(),push(symbol(SECRETX)),derivative(),push(symbol(SECRETX)),push(p2),subst())},d_scalar_scalar_1=function(){if(equal(p1,p2)){push(one);return}if(!iscons(p1)){push(zero);return}if(isadd(p1)){dsum();return}if(car(p1)===symbol(MULTIPLY)){dproduct();return}if(car(p1)===symbol(POWER)){dpower();return}if(car(p1)===symbol(DERIVATIVE)){dd();return}if(car(p1)===symbol(LOG)){dlog();return}if(car(p1)===symbol(SIN)){dsin();return}if(car(p1)===symbol(COS)){dcos();return}if(car(p1)===symbol(TAN)){dtan();return}if(car(p1)===symbol(ARCSIN)){darcsin();return}if(car(p1)===symbol(ARCCOS)){darccos();return}if(car(p1)===symbol(ARCTAN)){darctan();return}if(car(p1)===symbol(SINH)){dsinh();return}if(car(p1)===symbol(COSH)){dcosh();return}if(car(p1)===symbol(TANH)){dtanh();return}if(car(p1)===symbol(ARCSINH)){darcsinh();return}if(car(p1)===symbol(ARCCOSH)){darccosh();return}if(car(p1)===symbol(ARCTANH)){darctanh();return}if(car(p1)===symbol(ABS)){dabs();return}if(car(p1)===symbol(SGN)){dsgn();return}if(car(p1)===symbol(HERMITE)){dhermite();return}if(car(p1)===symbol(ERF)){derf();return}if(car(p1)===symbol(ERFC)){derfc();return}if(car(p1)===symbol(BESSELJ)){isZeroAtomOrTensor(caddr(p1))?dbesselj0():dbesseljn();return}if(car(p1)===symbol(BESSELY)){isZeroAtomOrTensor(caddr(p1))?dbessely0():dbesselyn();return}if(car(p1)===symbol(INTEGRAL)&&caddr(p1)===p2){derivative_of_integral();return}return dfunction()},dsum=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),derivative(),p1=cdr(p1);return add_all(tos-t)},dproduct=function(){var t,n,a,s,l,u,c;for(t=0,a=0,s=0,s=length(p1)-1,t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l){for(p3=cdr(p1),a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)push(car(p3)),t===a&&(push(p2),derivative()),p3=cdr(p3);multiply_all(s)}return add_all(s)},dpower=function(){return push(caddr(p1)),push(cadr(p1)),divide(),push(cadr(p1)),push(p2),derivative(),multiply(),push(cadr(p1)),logarithm(),push(caddr(p1)),push(p2),derivative(),multiply(),add(),push(p1),multiply()},dlog=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),divide()},dd=function(){return push(cadr(p1)),push(p2),derivative(),p3=pop(),car(p3)===symbol(DERIVATIVE)?(push_symbol(DERIVATIVE),push_symbol(DERIVATIVE),push(cadr(p3)),lessp(caddr(p3),caddr(p1))?(push(caddr(p3)),list(3),push(caddr(p1))):(push(caddr(p1)),list(3),push(caddr(p3))),list(3)):(push(p3),push(caddr(p1)),derivative())},dfunction=function(){return p3=cdr(p1),p3===symbol(NIL)||Find(p3,p2)?(push_symbol(DERIVATIVE),push(p1),push(p2),list(3)):push(zero)},dsin=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),multiply()},dcos=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sine(),multiply(),negate()},dtan=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),push_integer(-2),power(),multiply()},darcsin=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply()},darccos=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply(),negate()},darctan=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),inverse(),multiply(),simplify()},dsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),multiply()},dcosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ysinh(),multiply()},dtanh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),push_integer(-2),power(),multiply()},darcsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(1),add(),push_rational(-1,2),power(),multiply()},darccosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(-1),add(),push_rational(-1,2),power(),multiply()},darctanh=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),inverse(),multiply()},dabs=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sgn(),multiply()},dsgn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),dirac(),multiply(),push_integer(2),multiply()},dhermite=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(2),push(caddr(p1)),multiply(),multiply(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),hermite(),multiply()},derf=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},derfc=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(-2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},dbesselj0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesseljn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),besselj(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),besselj(),multiply(),add(),multiply()},dbessely0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesselyn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),bessely(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),bessely(),multiply(),add(),multiply()},derivative_of_integral=function(){return push(cadr(p1))},DET_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},det=function(){var t,n,a,s,l,u,c;if(n=0,s=0,save(),p1=pop(),DET_check_arg()===0){push_symbol(DET),push(p1),list(2),restore();return}for(s=p1.tensor.nelem,t=p1.tensor.elem,n=l=0,u=s;(0<=u?l<u:l>u)&&isNumericAtom(t[n]);n=0<=u?++l:--l);if(n===s)yydetg();else{for(n=a=0,c=p1.tensor.nelem;0<=c?a<c:a>c;n=0<=c?++a:--a)push(p1.tensor.elem[n]);determinant(p1.tensor.dim[0])}return restore()},determinant=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn;for(s=0,l=0,c=0,d=0,ar=0,on=0,fn=0,dn=0,n=[],s=tos-t*t,l=Ct=0,en=t;0<=en?Ct<en:Ct>en;l=0<=en?++Ct:--Ct)n[l]=l,n[l+t]=0,n[l+t+t]=1;for(fn=1,push(zero);;){for(push_integer(fn===1?1:-1),l=u=0,tn=t;0<=tn?u<tn:u>tn;l=0<=tn?++u:--u)d=t*n[l]+l,push(stack[s+d]),multiply();for(add(),c=t-1,on=0,a=!1;;){if(ar=n[t+c]+n[t+t+c],ar<0){n[t+t+c]=-n[t+t+c],c--;continue}if(ar===c+1){if(c===0){a=!0;break}on++,n[t+t+c]=-n[t+t+c],c--;continue}break}if(a)break;dn=n[c-n[t+c]+on],n[c-n[t+c]+on]=n[c-ar+on],n[c-ar+on]=dn,n[t+c]=ar,fn=-fn}return stack[s]=stack[tos-1],moveTos(s+1)},yydetg=function(){var t,n,a,s;for(t=0,n=0,n=p1.tensor.dim[0],t=a=0,s=n*n;0<=s?a<s:a>s;t=0<=s?++a:--a)push(p1.tensor.elem[t]);return lu_decomp(n),moveTos(tos-n*n),push(p1)},M=function(t,n,a,s){return stack[t+n*a+s]},setM=function(t,n,a,s,l){return stack[t+n*a+s]=l},lu_decomp=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox;for(n=0,a=0,s=0,u=0,a=tos-t*t,p1=one,n=ar=0,en=t-1;0<=en?ar<en:ar>en;n=0<=en?++ar:--ar){if(equal(M(a,t,n,n),zero)){for(s=l=tn=n+1,on=t;(tn<=on?l<on:l>on)&&equal(M(a,t,s,n),zero);s=tn<=on?++l:--l);if(s===t){p1=zero;break}for(u=c=fn=n,dn=t;fn<=dn?c<dn:c>dn;u=fn<=dn?++c:--c)p2=M(a,t,n,u),setM(a,t,n,u,M(a,t,s,u)),setM(a,t,s,u,p2);push(p1),negate(),p1=pop()}for(push(p1),push(M(a,t,n,n)),multiply(),p1=pop(),s=d=Cn=n+1,Rn=t;Cn<=Rn?d<Rn:d>Rn;s=Cn<=Rn?++d:--d)for(push(M(a,t,s,n)),push(M(a,t,n,n)),divide(),negate(),p2=pop(),setM(a,t,s,n,zero),u=Ct=ax=n+1,ox=t;ax<=ox?Ct<ox:Ct>ox;u=ax<=ox?++Ct:--Ct)push(M(a,t,n,u)),push(p2),multiply(),push(M(a,t,s,u)),add(),setM(a,t,s,u,pop())}return push(p1),push(M(a,t,t-1,t-1)),multiply(),p1=pop()},Eval_dirac=function(){return push(cadr(p1)),Eval(),dirac()},dirac=function(){return save(),ydirac(),restore()},ydirac=function(){if(p1=pop(),isdouble(p1))if(p1.d===0){push_integer(1);return}else{push_integer(0);return}if(isrational(p1))if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(1);return}else{push_integer(0);return}if(car(p1)===symbol(POWER)){push_symbol(DIRAC),push(cadr(p1)),list(2);return}if(isnegativeterm(p1)){push_symbol(DIRAC),push(p1),negate(),list(2);return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),push_symbol(DIRAC),push(p1),list(2)},divisors=function(){var t,n,a,s,l,u;for(n=0,t=0,a=0,save(),t=tos-1,divisors_onstack(),a=tos-t,u=stack.slice(t,t+a),u.sort(cmp_expr),stack=stack.slice(0,t).concat(u).concat(stack.slice(t+a)),p1=alloc_tensor(a),p1.tensor.ndim=1,p1.tensor.dim[0]=a,n=s=0,l=a;0<=l?s<l:s>l;n=0<=l?++s:--s)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore()},divisors_onstack=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,save(),p1=pop(),t=tos,isNumericAtom(p1))push(p1),factor_small_number();else if(car(p1)===symbol(ADD))push(p1),__factor_add();else if(car(p1)===symbol(MULTIPLY))for(p1=cdr(p1),isNumericAtom(car(p1))&&(push(car(p1)),factor_small_number(),p1=cdr(p1));iscons(p1);)p2=car(p1),car(p2)===symbol(POWER)?(push(cadr(p2)),push(caddr(p2))):(push(p2),push(one)),p1=cdr(p1);else car(p1)===symbol(POWER)?(push(cadr(p1)),push(caddr(p1))):(push(p1),push(one));for(a=tos,push(one),gen(t,a),s=tos-a,n=l=0,u=s;0<=u?l<u:l>u;n=0<=u?++l:--l)stack[t+n]=stack[a+n];return moveTos(t+s),restore()},gen=function(t,n){var a,s,l,u;if(a=0,s=0,save(),p1=pop(),t===n){push(p1),restore();return}if(p2=stack[t+0],p3=stack[t+1],push(p3),a=pop_integer(),!isNaN(a))for(s=l=0,u=Math.abs(a);0<=u?l<=u:l>=u;s=0<=u?++l:--l)push(p1),push(p2),push_integer(sign(a)*s),power(),multiply(),gen(t+2,n);return restore()},__factor_add=function(){for(save(),p1=pop(),p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);if(p2=pop(),isplusone(p2)){push(p1),push(one),restore();return}if(isNumericAtom(p2))push(p2),factor_small_number();else if(car(p2)===symbol(MULTIPLY))for(p3=cdr(p2),isNumericAtom(car(p3))?(push(car(p3)),factor_small_number()):(push(car(p3)),push(one)),p3=cdr(p3);iscons(p3);)push(car(p3)),push(one),p3=cdr(p3);else push(p2),push(one);for(push(p2),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply(),add(),p3=cdr(p3);return push(one),restore()},dpow=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,l=0,u=0,s=pop_double(),a=pop_double(),a===0&&s<0&&stop("divide by zero"),a>=0||s%1===0){l=Math.pow(a,s),push_double(l);return}return l=Math.pow(Math.abs(a),s),u=Math.PI*s,s%.5===0?(t=0,n=Math.sin(u)):(t=Math.cos(u),n=Math.sin(u)),push_double(t*l),push_double(n*l),push(imaginaryunit),multiply(),add()},EIG_N=0,EIG_yydd=[],EIG_yyqq=[],Eval_eigen=function(){return EIG_check_arg()===0&&stop("eigen: argument is not a square matrix"),eigen(EIGEN),p1=usr_symbol("D"),set_binding(p1,p2),p1=usr_symbol("Q"),set_binding(p1,p3),push(symbol(NIL))},Eval_eigenval=function(){if(EIG_check_arg()===0){push_symbol(EIGENVAL),push(p1),list(2);return}return eigen(EIGENVAL),push(p2)},Eval_eigenvec=function(){if(EIG_check_arg()===0){push_symbol(EIGENVEC),push(p1),list(2);return}return eigen(EIGENVEC),push(p3)},EIG_check_arg=function(){var t,n,a,s,l,u,c,d,Ct,ar,en;if(t=0,a=0,push(cadr(p1)),Eval(),yyfloat(),Eval(),p1=pop(),!istensor(p1))return 0;for((p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1])&&stop("eigen: argument is not a square matrix"),EIG_N=p1.tensor.dim[0],t=u=0,c=EIG_N;0<=c?u<c:u>c;t=0<=c?++u:--u)for(a=n=0,d=EIG_N;0<=d?n<d:n>d;a=0<=d?++n:--n)isdouble(p1.tensor.elem[EIG_N*t+a])||stop("eigen: matrix is not numerical");for(t=s=0,Ct=EIG_N-1;0<=Ct?s<Ct:s>Ct;t=0<=Ct?++s:--s)for(a=l=ar=t+1,en=EIG_N;ar<=en?l<en:l>en;a=ar<=en?++l:--l)Math.abs(p1.tensor.elem[EIG_N*t+a].d-p1.tensor.elem[EIG_N*a+t].d)>1e-10&&stop("eigen: matrix is not symmetrical");return 1},eigen=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx;for(n=0,s=0,n=Ct=0,on=EIG_N*EIG_N;0<=on?Ct<on:Ct>on;n=0<=on?++Ct:--Ct)EIG_yydd[n]=0;for(n=a=0,fn=EIG_N*EIG_N;0<=fn?a<fn:a>fn;n=0<=fn?++a:--a)EIG_yyqq[n]=0;for(n=l=0,Cn=EIG_N;0<=Cn?l<Cn:l>Cn;n=0<=Cn?++l:--l)for(EIG_yydd[EIG_N*n+n]=p1.tensor.elem[EIG_N*n+n].d,s=u=Rn=n+1,ax=EIG_N;Rn<=ax?u<ax:u>ax;s=Rn<=ax?++u:--u)EIG_yydd[EIG_N*n+s]=p1.tensor.elem[EIG_N*n+s].d,EIG_yydd[EIG_N*s+n]=p1.tensor.elem[EIG_N*n+s].d;for(n=c=0,ox=EIG_N;0<=ox?c<ox:c>ox;n=0<=ox?++c:--c)for(EIG_yyqq[EIG_N*n+n]=1,s=d=sx=n+1,lx=EIG_N;sx<=lx?d<lx:d>lx;s=sx<=lx?++d:--d)EIG_yyqq[EIG_N*n+s]=0,EIG_yyqq[EIG_N*s+n]=0;for(n=ar=0;ar<100&&step()!==0;n=++ar);if(n===100&&printstr(`
note: eigen did not converge
`),t===EIGEN||t===EIGENVAL)for(push(p1),copy_tensor(),p2=pop(),n=en=0,cx=EIG_N;0<=cx?en<cx:en>cx;n=0<=cx?++en:--en)for(s=tn=0,fx=EIG_N;0<=fx?tn<fx:tn>fx;s=0<=fx?++tn:--tn)push_double(EIG_yydd[EIG_N*n+s]),p2.tensor.elem[EIG_N*n+s]=pop();if(t===EIGEN||t===EIGENVEC){for(push(p1),copy_tensor(),p3=pop(),gx=[],n=mx=0,dn=EIG_N;0<=dn?mx<dn:mx>dn;n=0<=dn?++mx:--mx)gx.push((function(){var px,hx,vx;for(hx=[],s=vx=0,px=EIG_N;0<=px?vx<px:vx>px;s=0<=px?++vx:--vx)push_double(EIG_yyqq[EIG_N*n+s]),hx.push(p3.tensor.elem[EIG_N*n+s]=pop());return hx})());return gx}},step=function(){var t,n,a,s,l,u,c,d;for(n=0,s=0,t=0,n=l=0,u=EIG_N-1;0<=u?l<u:l>u;n=0<=u?++l:--l)for(s=a=c=n+1,d=EIG_N;c<=d?a<d:a>d;s=c<=d?++a:--a)EIG_yydd[EIG_N*n+s]!==0&&(step2(n,s),t++);return t},step2=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn;for(c=0,fn=0,dn=0,a=0,s=0,tn=0,on=0,dn=.5*(EIG_yydd[EIG_N*t+t]-EIG_yydd[EIG_N*n+n])/EIG_yydd[EIG_N*t+n],fn=1/(Math.abs(dn)+Math.sqrt(dn*dn+1)),dn<0&&(fn=-fn),a=1/Math.sqrt(fn*fn+1),tn=fn*a,c=d=0,Ct=EIG_N;0<=Ct?d<Ct:d>Ct;c=0<=Ct?++d:--d)s=EIG_yydd[EIG_N*t+c],on=EIG_yydd[EIG_N*n+c],EIG_yydd[EIG_N*t+c]=a*s+tn*on,EIG_yydd[EIG_N*n+c]=a*on-tn*s;for(c=l=0,ar=EIG_N;0<=ar?l<ar:l>ar;c=0<=ar?++l:--l)s=EIG_yydd[EIG_N*c+t],on=EIG_yydd[EIG_N*c+n],EIG_yydd[EIG_N*c+t]=a*s+tn*on,EIG_yydd[EIG_N*c+n]=a*on-tn*s;for(c=u=0,en=EIG_N;0<=en?u<en:u>en;c=0<=en?++u:--u)s=EIG_yyqq[EIG_N*t+c],on=EIG_yyqq[EIG_N*n+c],EIG_yyqq[EIG_N*t+c]=a*s+tn*on,EIG_yyqq[EIG_N*n+c]=a*on-tn*s;return EIG_yydd[EIG_N*t+n]=0,EIG_yydd[EIG_N*n+t]=0},Eval_erf=function(){return push(cadr(p1)),Eval(),yerf()},yerf=function(){return save(),yyerf(),restore()},yyerf=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=1-erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}if(isnegativeterm(p1)){push_symbol(ERF),push(p1),negate(),list(2),negate();return}push_symbol(ERF),push(p1),list(2)},Eval_erfc=function(){return push(cadr(p1)),Eval(),yerfc()},yerfc=function(){return save(),yyerfc(),restore()},yyerfc=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}push_symbol(ERFC),push(p1),list(2)},erfc=function(t){var n,a,s;return t===0?1:(a=0,s=0,n=0,s=Math.abs(t),a=1/(1+.5*s),n=a*Math.exp(-s*s-1.26551223+a*(1.00002368+a*(.37409196+a*(.09678418+a*(-.18628806+a*(.27886807+a*(-1.13520398+a*(1.48851587+a*(-.82215223+a*.17087277))))))))),t>=0?n:2-n)},Eval=function(){var t;if(check_esc_flag(),save(),p1=pop(),p1==null)debugger;switch(!evaluatingAsFloats&&isfloating(p1)&&(t=!0,evaluatingAsFloats++),p1.k){case CONS:Eval_cons();break;case NUM:evaluatingAsFloats?push_double(convert_rational_to_double(p1)):push(p1);break;case DOUBLE:case STR:push(p1);break;case TENSOR:Eval_tensor();break;case SYM:Eval_sym();break;default:stop("atom?")}return t&&evaluatingAsFloats--,restore()},Eval_sym=function(){var t,n,a,s,l,u;if(iskeyword(p1)){push(p1),push(symbol(LAST)),list(2),Eval();return}else if(p1===symbol(PI)&&evaluatingAsFloats){push_double(Math.PI);return}if(p2=get_binding(p1),DEBUG&&console.log("looked up: "+p1+" which contains: "+p2),push(p2),p1!==p2){if(s=chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(p1),s!==-1){for(t="",n=a=l=s,u=chainOfUserSymbolsNotFunctionsBeingEvaluated.length;l<=u?a<u:a>u;n=l<=u?++a:--a)t+=chainOfUserSymbolsNotFunctionsBeingEvaluated[n].printname+" -> ";t+=p1.printname,stop("recursive evaluation of symbols: "+t);return}return chainOfUserSymbolsNotFunctionsBeingEvaluated.push(p1),Eval(),chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}},Eval_cons=function(){var t;if(t=car(p1),car(t)===symbol(EVAL)){Eval_user_function();return}switch(issymbol(t)||stop("cons?"),symnum(t)){case ABS:return Eval_abs();case ADD:return Eval_add();case ADJ:return Eval_adj();case AND:return Eval_and();case ARCCOS:return Eval_arccos();case ARCCOSH:return Eval_arccosh();case ARCSIN:return Eval_arcsin();case ARCSINH:return Eval_arcsinh();case ARCTAN:return Eval_arctan();case ARCTANH:return Eval_arctanh();case ARG:return Eval_arg();case ATOMIZE:return Eval_atomize();case BESSELJ:return Eval_besselj();case BESSELY:return Eval_bessely();case BINDING:return Eval_binding();case BINOMIAL:return Eval_binomial();case CEILING:return Eval_ceiling();case CHECK:return Eval_check();case CHOOSE:return Eval_choose();case CIRCEXP:return Eval_circexp();case CLEAR:return Eval_clear();case CLEARALL:return Eval_clearall();case CLEARPATTERNS:return Eval_clearpatterns();case CLOCK:return Eval_clock();case COEFF:return Eval_coeff();case COFACTOR:return Eval_cofactor();case CONDENSE:return Eval_condense();case CONJ:return Eval_conj();case CONTRACT:return Eval_contract();case COS:return Eval_cos();case COSH:return Eval_cosh();case DECOMP:return Eval_decomp();case DEGREE:return Eval_degree();case DEFINT:return Eval_defint();case DENOMINATOR:return Eval_denominator();case DERIVATIVE:return Eval_derivative();case DET:return Eval_det();case DIM:return Eval_dim();case DIRAC:return Eval_dirac();case DIVISORS:return Eval_divisors();case DO:return Eval_do();case DOT:return Eval_inner();case DRAW:return Eval_draw();case DSOLVE:return Eval_dsolve();case EIGEN:return Eval_eigen();case EIGENVAL:return Eval_eigenval();case EIGENVEC:return Eval_eigenvec();case ERF:return Eval_erf();case ERFC:return Eval_erfc();case EVAL:return Eval_Eval();case EXP:return Eval_exp();case EXPAND:return Eval_expand();case EXPCOS:return Eval_expcos();case EXPSIN:return Eval_expsin();case FACTOR:return Eval_factor();case FACTORIAL:return Eval_factorial();case FACTORPOLY:return Eval_factorpoly();case FILTER:return Eval_filter();case FLOATF:return Eval_float();case APPROXRATIO:return Eval_approxratio();case FLOOR:return Eval_floor();case FOR:return Eval_for();case FUNCTION:return Eval_function_reference();case GAMMA:return Eval_gamma();case GCD:return Eval_gcd();case HERMITE:return Eval_hermite();case HILBERT:return Eval_hilbert();case IMAG:return Eval_imag();case INDEX:return Eval_index();case INNER:return Eval_inner();case INTEGRAL:return Eval_integral();case INV:return Eval_inv();case INVG:return Eval_invg();case ISINTEGER:return Eval_isinteger();case ISPRIME:return Eval_isprime();case LAGUERRE:return Eval_laguerre();case LCM:return Eval_lcm();case LEADING:return Eval_leading();case LEGENDRE:return Eval_legendre();case LOG:return Eval_log();case LOOKUP:return Eval_lookup();case MOD:return Eval_mod();case MULTIPLY:return Eval_multiply();case NOT:return Eval_not();case NROOTS:return Eval_nroots();case NUMBER:return Eval_number();case NUMERATOR:return Eval_numerator();case OPERATOR:return Eval_operator();case OR:return Eval_or();case OUTER:return Eval_outer();case PATTERN:return Eval_pattern();case PATTERNSINFO:return Eval_patternsinfo();case POLAR:return Eval_polar();case POWER:return Eval_power();case PRIME:return Eval_prime();case PRINT:return Eval_print();case PRINT2DASCII:return Eval_print2dascii();case PRINTFULL:return Eval_printcomputer();case PRINTLATEX:return Eval_printlatex();case PRINTLIST:return Eval_printlist();case PRINTPLAIN:return Eval_printhuman();case PRODUCT:return Eval_product();case QUOTE:return Eval_quote();case QUOTIENT:return Eval_quotient();case RANK:return Eval_rank();case RATIONALIZE:return Eval_rationalize();case REAL:return Eval_real();case ROUND:return Eval_round();case YYRECT:return Eval_rect();case ROOTS:return Eval_roots();case SETQ:return Eval_setq();case SGN:return Eval_sgn();case SILENTPATTERN:return Eval_silentpattern();case SIMPLIFY:return Eval_simplify();case SIN:return Eval_sin();case SINH:return Eval_sinh();case SHAPE:return Eval_shape();case SQRT:return Eval_sqrt();case STOP:return Eval_stop();case SUBST:return Eval_subst();case SUM:return Eval_sum();case SYMBOLSINFO:return Eval_symbolsinfo();case TAN:return Eval_tan();case TANH:return Eval_tanh();case TAYLOR:return Eval_taylor();case TEST:return Eval_test();case TESTEQ:return Eval_testeq();case TESTGE:return Eval_testge();case TESTGT:return Eval_testgt();case TESTLE:return Eval_testle();case TESTLT:return Eval_testlt();case TRANSPOSE:return Eval_transpose();case UNIT:return Eval_unit();case ZERO:return Eval_zero();default:return Eval_user_function()}},Eval_binding=function(){return push(get_binding(cadr(p1)))},Eval_check=function(){var t;return t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(p1):push_integer(t)},Eval_det=function(){return push(cadr(p1)),Eval(),det()},Eval_dim=function(){var t;return push(cadr(p1)),Eval(),p2=pop(),iscons(cddr(p1))?(push(caddr(p1)),Eval(),t=pop_integer()):t=1,istensor(p2)?t<1||t>p2.tensor.ndim?push(p1):push_integer(p2.tensor.dim[t-1]):push_integer(1)},Eval_divisors=function(){return push(cadr(p1)),Eval(),divisors()},Eval_do=function(){var t;for(push(car(p1)),p1=cdr(p1),t=[];iscons(p1);)pop(),push(car(p1)),Eval(),t.push(p1=cdr(p1));return t},Eval_dsolve=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),dsolve()},Eval_Eval=function(){for(push(cadr(p1)),Eval(),p1=cddr(p1);iscons(p1);)push(car(p1)),Eval(),push(cadr(p1)),Eval(),subst(),p1=cddr(p1);return Eval()},Eval_exp=function(){return push(cadr(p1)),Eval(),exponential()},Eval_factorial=function(){return push(cadr(p1)),Eval(),factorial()},Eval_factorpoly=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),factorpoly(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factorpoly(),t.push(p1=cdr(p1));return t},Eval_hermite=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),hermite()},Eval_hilbert=function(){return push(cadr(p1)),Eval(),hilbert()},Eval_index=function(){var t,n,a;if(t=tos,n=p1,p1=cdr(p1),push(car(p1)),Eval(),a=stack[tos-1],isNumericAtom(a)&&stop("trying to access a scalar as a tensor"),!istensor(a)){moveTos(t),push(n);return}for(p1=cdr(p1);iscons(p1);){if(push(car(p1)),Eval(),!isintegerorintegerfloat(stack[tos-1])){moveTos(t),push(n);return}p1=cdr(p1)}return index_function(tos-t)},Eval_inv=function(){return push(cadr(p1)),Eval(),inv()},Eval_invg=function(){return push(cadr(p1)),Eval(),invg()},Eval_isinteger=function(){var t;if(push(cadr(p1)),Eval(),p1=pop(),isrational(p1)){isinteger(p1)?push(one):push(zero);return}if(isdouble(p1)){t=Math.floor(p1.d),t===p1.d?push(one):push(zero);return}return push_symbol(ISINTEGER),push(p1),list(2)},Eval_number=function(){return push(cadr(p1)),Eval(),p1=pop(),p1.k===NUM||p1.k===DOUBLE?push_integer(1):push_integer(0)},Eval_operator=function(){var t;for(t=tos,push_symbol(OPERATOR),p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);return list(tos-t)},Eval_quote=function(){return push(cadr(p1))},Eval_rank=function(){return push(cadr(p1)),Eval(),p1=pop(),istensor(p1)?push_integer(p1.tensor.ndim):push(zero)},Eval_setq=function(){if(caadr(p1)===symbol(INDEX)){setq_indexed();return}if(iscons(cadr(p1))){define_user_function();return}return issymbol(cadr(p1))||stop("symbol assignment: error in symbol"),push(caddr(p1)),Eval(),p2=pop(),set_binding(cadr(p1),p2),push(symbol(NIL))},setq_indexed=function(){var t;for(p4=cadadr(p1),issymbol(p4)||stop("indexed assignment: expected a symbol name"),t=tos,push(caddr(p1)),Eval(),p2=cdadr(p1);iscons(p2);)push(car(p2)),Eval(),p2=cdr(p2);return set_component(tos-t),p3=pop(),set_binding(p4,p3),push(symbol(NIL))},Eval_sqrt=function(){return push(cadr(p1)),Eval(),push_rational(1,2),power()},Eval_stop=function(){return stop("user stop")},Eval_subst=function(){return push(cadddr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadr(p1)),Eval(),subst(),Eval()},Eval_unit=function(){var t,n,a,s;if(t=0,n=0,push(cadr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(n<1){push(p1);return}for(p1=alloc_tensor(n*n),p1.tensor.ndim=2,p1.tensor.dim[0]=n,p1.tensor.dim[1]=n,t=a=0,s=n;0<=s?a<s:a>s;t=0<=s?++a:--a)p1.tensor.elem[n*t+t]=one;return check_tensor_dimensions(p1),push(p1)},Eval_predicate=function(){return save(),p1=top(),car(p1)===symbol(SETQ)&&(pop(),push_symbol(TESTEQ),push(cadr(p1)),push(caddr(p1)),list(3)),Eval(),restore()},Eval_expand=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),expand()},expand=function(){var t;if(save(),p9=pop(),p5=pop(),istensor(p5)){expand_tensor(),restore();return}if(car(p5)===symbol(ADD)){for(push_integer(0),p1=cdr(p5);iscons(p1);)push(car(p1)),push(p9),expand(),add(),p1=cdr(p1);restore();return}if(push(p5),numerator(),p3=pop(),push(p5),denominator(),p2=pop(),remove_negative_exponents(),push(p3),push(p2),push(p9),(isone(p3)||isone(p2))&&(!ispolyexpandedform(p2,p9)||isone(p2))){pop(),pop(),pop(),push(p5),restore();return}if(divpoly(),p7=pop(),push(p3),push(p2),push(p7),multiply(),subtract(),p3=pop(),isZeroAtomOrTensor(p3)){push(p7),restore();return}return push(p2),push(p9),factorpoly(),p2=pop(),expand_get_C(),expand_get_B(),expand_get_A(),istensor(p4)?(push(p4),t=expanding,expanding=1,inv(),expanding=t,push(p3),inner(),push(p2),inner()):(push(p3),push(p4),t=expanding,expanding=1,divide(),expanding=t,push(p2),multiply()),push(p7),add(),restore()},expand_tensor=function(){var t,n,a;for(t=0,push(p5),copy_tensor(),p5=pop(),t=n=0,a=p5.tensor.nelem;0<=a?n<a:n>a;t=0<=a?++n:--n)push(p5.tensor.elem[t]),push(p9),expand(),p5.tensor.elem[t]=pop();return push(p5)},remove_negative_exponents=function(){var t,n,a,s,l,u,c;for(t=0,n=0,a=0,s=0,l=0,t=tos,factors(p2),factors(p3),l=tos-t,a=0,n=u=0,c=l;0<=c?u<c:u>c;n=0<=c?++u:--u)p1=stack[t+n],car(p1)===symbol(POWER)&&cadr(p1)===p9&&(push(caddr(p1)),s=pop_integer(),!isNaN(s)&&s<a&&(a=s));if(moveTos(t),a!==0)return push(p2),push(p9),push_integer(-a),power(),multiply(),p2=pop(),push(p3),push(p9),push_integer(-a),power(),multiply(),p3=pop()},expand_get_C=function(){var t,n,a,s,l,u,c,d,Ct,ar;if(n=0,a=0,l=0,u=0,n=tos,car(p2)===symbol(MULTIPLY))for(p1=cdr(p2);iscons(p1);)p5=car(p1),expand_get_CF(),p1=cdr(p1);else p5=p2,expand_get_CF();if(u=tos-n,u===1){p4=pop();return}for(p4=alloc_tensor(u*u),p4.tensor.ndim=2,p4.tensor.dim[0]=u,p4.tensor.dim[1]=u,t=n,a=c=0,Ct=u;0<=Ct?c<Ct:c>Ct;a=0<=Ct?++c:--c)for(l=s=0,ar=u;0<=ar?s<ar:s>ar;l=0<=ar?++s:--s)push(stack[t+l]),push(p9),push_integer(a),power(),d=expanding,expanding=1,divide(),expanding=d,push(p9),filter(),p4.tensor.elem[u*a+l]=pop();return moveTos(tos-u)},expand_get_CF=function(){var t,n,a,s,l,u,c,d;if(t=0,n=0,a=0,s=0,!!Find(p5,p9)){for(u=expanding,expanding=1,trivial_divide(),expanding=u,car(p5)===symbol(POWER)?(push(caddr(p5)),s=pop_integer(),p6=cadr(p5)):(s=1,p6=p5),push(p6),push(p9),degree(),t=pop_integer(),d=[],n=l=0,c=s;0<=c?l<c:l>c;n=0<=c?++l:--l)d.push((function(){var Ct,ar,en;for(en=[],a=Ct=0,ar=t;0<=ar?Ct<ar:Ct>ar;a=0<=ar?++Ct:--Ct)push(p8),push(p6),push_integer(n),power(),u=expanding,expanding=1,multiply(),expanding=u,push(p9),push_integer(a),power(),u=expanding,expanding=1,multiply(),en.push(expanding=u);return en})());return d}},trivial_divide=function(){var t;if(t=0,car(p2)===symbol(MULTIPLY)){for(t=tos,p0=cdr(p2);iscons(p0);)equal(car(p0),p5)||(push(car(p0)),Eval()),p0=cdr(p0);multiply_all(tos-t)}else push_integer(1);return p8=pop()},expand_get_B=function(){var t,n,a,s,l;if(t=0,n=0,!!istensor(p4)){for(n=p4.tensor.dim[0],p8=alloc_tensor(n),p8.tensor.ndim=1,p8.tensor.dim[0]=n,t=a=0,l=n;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p3),push(p9),push_integer(t),power(),s=expanding,expanding=1,divide(),expanding=s,push(p9),filter(),p8.tensor.elem[t]=pop();return p3=p8}},expand_get_A=function(){var t,n,a,s,l;if(t=0,n=0,a=0,!istensor(p4)){push(p2),reciprocate(),p2=pop();return}if(t=tos,car(p2)===symbol(MULTIPLY))for(p8=cdr(p2);iscons(p8);)p5=car(p8),expand_get_AF(),p8=cdr(p8);else p5=p2,expand_get_AF();for(a=tos-t,p8=alloc_tensor(a),p8.tensor.ndim=1,p8.tensor.dim[0]=a,n=s=0,l=a;0<=l?s<l:s>l;n=0<=l?++s:--s)p8.tensor.elem[n]=stack[t+n];return moveTos(t),p2=p8},expand_get_AF=function(){var t,n,a,s,l,u,c;if(t=0,n=0,a=0,s=1,!!Find(p5,p9)){for(car(p5)===symbol(POWER)&&(push(caddr(p5)),s=pop_integer(),p5=cadr(p5)),push(p5),push(p9),degree(),t=pop_integer(),c=[],n=l=u=s;u<=0?l<0:l>0;n=u<=0?++l:--l)c.push((function(){var d,Ct,ar;for(ar=[],a=d=0,Ct=t;0<=Ct?d<Ct:d>Ct;a=0<=Ct?++d:--d)push(p5),push_integer(n),power(),reciprocate(),push(p9),push_integer(a),power(),ar.push(multiply());return ar})());return c}},Eval_expcos=function(){return push(cadr(p1)),Eval(),expcos()},expcos=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),add(),restore()},Eval_expsin=function(){return push(cadr(p1)),Eval(),expsin()},expsin=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),subtract(),restore()},Eval_factor=function(){var t;for(push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),factor(),p1=cdddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factor_again(),t.push(p1=cdr(p1));return t},factor_again=function(){var t,n;if(save(),p2=pop(),p1=pop(),t=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),factor_term(),p1=cdr(p1);else push(p1),push(p2),factor_term();return n=tos-t,n>1&&multiply_all_noexpand(n),restore()},factor_term=function(){if(save(),factorpoly(),p1=pop(),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return restore()},factor=function(){return save(),p2=pop(),p1=pop(),isinteger(p1)?(push(p1),factor_number()):(push(p1),push(p2),factorpoly()),restore()},factor_small_number=function(){var t,n,a,s,l,u;for(a=0,save(),s=pop_integer(),isNaN(s)&&stop("number too big to factor"),s<0&&(s=-s),a=l=0,u=MAXPRIMETAB;(0<=u?l<u:l>u)&&(t=primetab[a],!(t>s/t));a=0<=u?++l:--l){for(n=0;s%t===0;)s/=t,n++;n&&(push_integer(t),push_integer(n))}return s>1&&(push_integer(s),push_integer(1)),restore()},factorial=function(){var t;if(t=0,save(),p1=pop(),push(p1),t=pop_integer(),t<0||isNaN(t)){push_symbol(FACTORIAL),push(p1),list(2),restore();return}return bignum_factorial(t),restore()},factorpoly=function(){var t,n;return DEBUG&&console.log("factorpoly: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),n=pop(),t=pop(),!Find(t,n)||!ispolyexpandedform(t,n)||!issymbol(n)?push(t):yyfactorpoly(n,t),restore()},yyfactorpoly=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx,vx,yx;for(DEBUG&&(Ct=t,vx=n,console.log("yyfactorpoly: "+Ct+" "+vx)),save(),tn=tos,isfloating(n)&&stop("floating point numbers in polynomial"),ox=tos,d=coeff(t,n)-1,DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" factpoly_expo before rationalize_coefficients: "+d),ax=rationalize_coefficients(tn),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" factpoly_expo  after rationalize_coefficients: "+d),yx="real",px=null;d>0;)if(DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" factpoly_expo inside while loop: "+d),isZeroAtomOrTensor(stack[ox+0])?(DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" isZeroAtomOrTensor"),a=one,l=zero):yx==="real"?[en,a,l]=get_factor_from_real_root(t,d,ox):yx==="complex"&&([ar,a]=get_factor_from_complex_root(px,d,ox)),yx==="real")if(en===0){yx="complex";continue}else{for(push(a),push(t),multiply(),push(l),add(),s=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+` success
FACTOR=`+s),push(ax),push(s),multiply_noexpand(),ax=pop(),yydivpoly(d,ox,a,l);d&&isZeroAtomOrTensor(stack[ox+d]);)d--;for(push(zero),on=Rn=0,cx=d;0<=cx?Rn<=cx:Rn>=cx;on=0<=cx?++Rn:--Rn)push(stack[ox+on]),push(t),push_integer(on),power(),multiply(),add();px=pop()}else if(yx==="complex"){if(ar===0)break;if(push(a),push(t),subtract(),push(a),conjugate(),push(t),subtract(),multiply(),hx=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+` success
FACTOR=`+hx),push(ax),lx=pop(),push(ax),push(hx),multiply_noexpand(),ax=pop(),px==null){for(push(zero),on=fn=0,fx=d;0<=fx?fn<=fx:fn>=fx;on=0<=fx?++fn:--fn)push(stack[ox+on]),push(t),push_integer(on),power(),multiply(),add();px=pop()}if(c=px,push(c),push(hx),push(t),divpoly(),px=pop(),push(px),push(hx),multiply(),u=pop(),!equal(u,c)){DEBUG&&console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),DEBUG&&console.log("so just returning previousFactorisation times dividend: "+lx+" * "+c),push(lx),push(c),sx=expanding,expanding=0,yycondense(),expanding=sx,multiply_noexpand(),ax=pop(),stack[tn]=ax,moveTos(tn+1),restore();return}for(on=dn=0,gx=d;0<=gx?dn<=gx:dn>=gx;on=0<=gx?++dn:--dn)pop();coeff(t,px),d-=2}for(DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" building the remaining unfactored part of the polynomial"),push(zero),on=Cn=0,mx=d;0<=mx?Cn<=mx:Cn>=mx;on=0<=mx?++Cn:--Cn)push(stack[ox+on]),push(t),push_integer(on),power(),multiply(),add();return n=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" remaining unfactored part of the polynomial: "+n.toString()),push(n),sx=expanding,expanding=0,yycondense(),expanding=sx,n=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" new poly with extracted common factor: "+n.toString()),d>0&&isnegativeterm(stack[ox+d])&&(push(n),negate(),n=pop(),push(ax),negate_noexpand(),ax=pop()),push(ax),push(n),multiply_noexpand(),ax=pop(),DEBUG&&console.log("yyfactorpoly: "+Ct+" "+vx+" result: "+ax),stack[tn]=ax,moveTos(tn+1),restore()},rationalize_coefficients=function(t){var n,a,s,l,u,c,d,Ct,ar;for(l=one,n=s=c=t,d=tos;c<=d?s<d:s>d;n=c<=d?++s:--s)push(stack[n]),denominator(),push(l),lcm(),l=pop();for(n=a=Ct=t,ar=tos;Ct<=ar?a<ar:a>ar;n=Ct<=ar?++a:--a)push(l),push(stack[n]),multiply(),stack[n]=pop();return push(l),reciprocate(),u=pop(),DEBUG&&console.log("rationalize_coefficients result: "+u.toString()),u},get_factor_from_real_root=function(t,n,a){var s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px;if(DEBUG&&console.log("get_factor_from_real_root"),d=0,c=0,s=0,l=0,on=0,fn=0,DEBUG){for(push(zero),d=dn=0,Rn=n;0<=Rn?dn<=Rn:dn>=Rn;d=0<=Rn?++dn:--dn)push(stack[a+d]),push(t),push_integer(d),power(),multiply(),add();Cn=pop(),console.log("POLY="+Cn)}if(c=tos,l=tos,push(stack[a+n]),divisors_onstack(),fn=tos-l,s=tos,push(stack[a+0]),divisors_onstack(),on=tos-s,DEBUG){for(console.log("divisors of base term"),d=Ct=0,ax=on;0<=ax?Ct<ax:Ct>ax;d=0<=ax?++Ct:--Ct)console.log(", "+stack[s+d]);for(console.log("divisors of leading term"),d=ar=0,ox=fn;0<=ox?ar<ox:ar>ox;d=0<=ox?++ar:--ar)console.log(", "+stack[l+d])}for(cx=en=0,sx=fn;0<=sx?en<sx:en>sx;cx=0<=sx?++en:--en)for(fx=tn=0,lx=on;0<=lx?tn<lx:tn>lx;fx=0<=lx?++tn:--tn){if(mx=stack[l+cx],gx=stack[s+fx],push(gx),push(mx),divide(),negate(),px=pop(),u=Evalpoly(n,a,px),DEBUG&&(console.log("try A="+mx),console.log(", B="+gx),console.log(", root "+t),console.log("=-B/A="+px),console.log(", POLY("+px),console.log(")="+u)),isZeroAtomOrTensor(u))return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,mx,gx];if(push(gx),negate(),gx=pop(),push(px),negate(),px=pop(),u=Evalpoly(n,a,px),DEBUG&&(console.log("try A="+mx),console.log(", B="+gx),console.log(", root "+t),console.log("=-B/A="+px),console.log(", POLY("+px),console.log(")="+u)),isZeroAtomOrTensor(u))return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,mx,gx]}return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning"),[0,null,null]},get_factor_from_complex_root=function(t,n,a){var s,l,u,c,d,Ct,ar;if(l=0,n<=2)return DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[0,null];if(DEBUG&&console.log("complex root finding for POLY="+t),l=tos,push_integer(-1),push_rational(2,3),power(),rect(),ar=pop(),DEBUG&&console.log("complex root finding: trying with "+ar),push(ar),s=Evalpoly(n,a,ar),DEBUG&&console.log("complex root finding result: "+s),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,ar];if(push_integer(1),push_rational(2,3),power(),rect(),ar=pop(),DEBUG&&console.log("complex root finding: trying with "+ar),push(ar),s=Evalpoly(n,a,ar),DEBUG&&console.log("complex root finding result: "+s),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,ar];for(d=c=-10;c<=10;d=++c)for(Ct=u=1;u<=5;Ct=++u)if(push_integer(d),push_integer(Ct),push(imaginaryunit),multiply(),add(),rect(),ar=pop(),DEBUG&&console.log("complex root finding: trying simple complex combination "+ar),push(ar),s=Evalpoly(n,a,ar),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("found complex root: "+s),[1,ar];return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 0"),[0,null]},yydivpoly=function(t,n,a,s){var l,u,c,d;for(l=zero,u=c=d=t;d<=0?c<0:c>0;u=d<=0?++c:--c)push(stack[n+u]),stack[n+u]=l,push(a),divide(),l=pop(),push(stack[n+u-1]),push(l),push(s),multiply(),subtract(),stack[n+u-1]=pop();if(stack[n+0]=l,DEBUG)return console.log("yydivpoly Q: "+l.toString())},Evalpoly=function(t,n,a){var s,l,u;for(push(zero),s=l=u=t;u<=0?l<=0:l>=0;s=u<=0?++l:--l)push(a),multiply(),push(stack[n+s]),add();return pop()},factors=function(t){var n;if(n=tos,car(t)===symbol(ADD))for(t=cdr(t);iscons(t);)push_term_factors(car(t)),t=cdr(t);else push_term_factors(t);return tos-n},push_term_factors=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else return push(t)},Eval_filter=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),filter(),t.push(p1=cdr(p1));return t},filter=function(){return save(),p2=pop(),p1=pop(),filter_main(),restore()},filter_main=function(){return car(p1)===symbol(ADD)?filter_sum():istensor(p1)?filter_tensor():Find(p1,p2)?push_integer(0):push(p1)},filter_sum=function(){var t;for(push_integer(0),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),filter(),add(),t.push(p1=cdr(p1));return t},filter_tensor=function(){var t,n,a,s,l,u;for(t=0,a=0,a=p1.tensor.nelem,p3=alloc_tensor(a),p3.tensor.ndim=p1.tensor.ndim,t=s=0,l=p1.tensor.ndim;0<=l?s<l:s>l;t=0<=l?++s:--s)p3.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,u=a;0<=u?n<u:n>u;t=0<=u?++n:--n)push(p1.tensor.elem[t]),push(p2),filter(),p3.tensor.elem[t]=pop();return push(p3)},Eval_float=function(){return evaluatingAsFloats++,push(cadr(p1)),Eval(),yyfloat(),Eval(),evaluatingAsFloats--},zzfloat=function(){return save(),evaluatingAsFloats++,Eval(),yyfloat(),Eval(),evaluatingAsFloats--,restore()},yyfloat=function(){var t,n,a,s;if(n=0,t=0,evaluatingAsFloats++,save(),p1=pop(),iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),yyfloat(),p1=cdr(p1);list(tos-t)}else if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,s=p1.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)push(p1.tensor.elem[n]),yyfloat(),p1.tensor.elem[n]=pop();push(p1)}else p1.k===NUM?(push(p1),bignum_float()):p1===symbol(PI)?push_double(Math.PI):p1===symbol(E)?push_double(Math.E):push(p1);return restore(),evaluatingAsFloats--},Eval_floor=function(){return push(cadr(p1)),Eval(),yfloor()},yfloor=function(){return save(),yyfloor(),restore()},yyfloor=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(FLOOR),push(p1),list(2);return}if(isdouble(p1)){t=Math.floor(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}if(p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1))return push_integer(-1),add()},Eval_for=function(){var t,n,a,s,l,u,c;if(t=0,n=0,a=0,s=caddr(p1),issymbol(s)||stop("for: 2nd arg should be the variable to loop over"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(push(caddddr(p1)),Eval(),a=pop_integer(),isNaN(a)){push(p1);return}for(p4=get_binding(s),t=l=u=n,c=a;u<=c?l<=c:l>=c;t=u<=c?++l:--l)push_integer(t),p5=pop(),set_binding(s,p5),push(cadr(p1)),Eval(),pop();return set_binding(s,p4),push_symbol(NIL)},Eval_gamma=function(){return push(cadr(p1)),Eval(),gamma()},gamma=function(){return save(),gammaf(),restore()},gammaf=function(){if(p1=pop(),isrational(p1)&&MEQUAL(p1.q.a,1)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power();return}if(isrational(p1)&&MEQUAL(p1.q.a,3)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power(),push_rational(1,2),multiply();return}if(isnegativeterm(p1)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_integer(-1),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push(p1),multiply(),sine(),push(p1),multiply(),push(p1),negate(),gamma(),multiply(),divide();return}if(car(p1)===symbol(ADD)){gamma_of_sum();return}push_symbol(GAMMA),push(p1),list(2)},gamma_of_sum=function(){if(p3=cdr(p1),isrational(car(p3))&&MEQUAL(car(p3).q.a,1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),push(cadr(p3)),gamma(),multiply();if(isrational(car(p3))&&MEQUAL(car(p3).q.a,-1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),gamma(),push(cadr(p3)),push_integer(-1),add(),divide();push_symbol(GAMMA),push(p1),list(2)},Eval_gcd=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),gcd(),t.push(p1=cdr(p1));return t},gcd=function(){var t;return t=expanding,save(),gcd_main(),restore(),expanding=t},gcd_main=function(){var t;if(expanding=1,p2=pop(),p1=pop(),DEBUG&&console.log("gcd_main: p1: "+p1+" p2: "+p2),equal(p1,p2)){push(p1);return}if(isrational(p1)&&isrational(p2)){push(p1),push(p2),gcd_numbers();return}if(t=areunivarpolysfactoredorexpandedform(p1,p2)){gcd_polys(t);return}if(car(p1)===symbol(ADD)&&car(p2)===symbol(ADD)){gcd_sum_sum();return}if(car(p1)===symbol(ADD)&&(gcd_sum(p1),p1=pop()),car(p2)===symbol(ADD)&&(gcd_sum(p2),p2=pop()),car(p1)===symbol(MULTIPLY)){gcd_sum_product();return}if(car(p2)===symbol(MULTIPLY)){gcd_product_sum();return}if(car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base()},areunivarpolysfactoredorexpandedform=function(t,n){var a;return DEBUG&&console.log("areunivarpolysfactoredorexpandedform: p1: "+t+" p2: "+n),(a=isunivarpolyfactoredorexpandedform(t))&&isunivarpolyfactoredorexpandedform(n,a)?a:!1},gcd_polys=function(t){if(DEBUG&&console.log("gcd_polys: p1: "+p1+" polyVar: "+t),push(p1),push(t),factorpoly(),p1=pop(),push(p2),push(t),factorpoly(),p2=pop(),DEBUG&&console.log("GCD: factored polys:"),DEBUG&&console.log("  p1:"+p1.toString()),DEBUG&&console.log("  p2:"+p2.toString()),(car(p1)===symbol(MULTIPLY)||car(p2)===symbol(MULTIPLY))&&(car(p1)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p1),push(one),list(3),p1=pop()),car(p2)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p2),push(one),list(3),p2=pop())),car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base(),!0},gcd_product_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);){for(p4=cdr(p2);iscons(p4);)push(car(p3)),push(car(p4)),gcd(),multiply(),p4=cdr(p4);t.push(p3=cdr(p3))}return t},gcd_powers_with_same_base=function(){if(car(p1)===symbol(POWER)?(p3=caddr(p1),p1=cadr(p1)):p3=one,car(p2)===symbol(POWER)?(p4=caddr(p2),p2=cadr(p2)):p4=one,!equal(p1,p2)){push(one);return}if(isNumericAtom(p3)&&isNumericAtom(p4)){push(p1),lessp(p3,p4)?push(p3):push(p4),power();return}if(push(p3),push(p4),divide(),p5=pop(),isNumericAtom(p5)){push(p1),car(p3)===symbol(MULTIPLY)&&isNumericAtom(cadr(p3))?p5=cadr(p3):p5=one,car(p4)===symbol(MULTIPLY)&&isNumericAtom(cadr(p4))?p6=cadr(p4):p6=one,lessp(p5,p6)?push(p3):push(p4),power();return}if(push(p3),push(p4),subtract(),p5=pop(),!isNumericAtom(p5)){push(one);return}return push(p1),isnegativenumber(p5)?push(p3):push(p4),power()},gcd_sum_sum=function(){if(length(p1)!==length(p2)){push(one);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);for(p3=pop(),p4=cdr(p2),push(car(p4)),p4=cdr(p4);iscons(p4);)push(car(p4)),gcd(),p4=cdr(p4);return p4=pop(),push(p1),push(p3),divide(),p5=pop(),push(p2),push(p4),divide(),p6=pop(),equal(p5,p6)?(push(p5),push(p3),push(p4),gcd(),multiply()):push(one)},gcd_sum=function(t){var n;for(t=cdr(t),push(car(t)),t=cdr(t),n=[];iscons(t);)push(car(t)),gcd(),n.push(t=cdr(t));return n},gcd_sum_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);)push(car(p3)),push(p2),gcd(),multiply(),t.push(p3=cdr(p3));return t},gcd_product_sum=function(){var t;for(push(one),p4=cdr(p2),t=[];iscons(p4);)push(p1),push(car(p4)),gcd(),multiply(),t.push(p4=cdr(p4));return t},guess=function(){var t;return t=pop(),push(t),Find(t,symbol(SYMBOL_X))?push_symbol(SYMBOL_X):Find(t,symbol(SYMBOL_Y))?push_symbol(SYMBOL_Y):Find(t,symbol(SYMBOL_Z))?push_symbol(SYMBOL_Z):Find(t,symbol(SYMBOL_T))?push_symbol(SYMBOL_T):Find(t,symbol(SYMBOL_S))?push_symbol(SYMBOL_S):push_symbol(SYMBOL_X)},hermite=function(){return save(),yyhermite(),restore()},yyhermite=function(){var t;if(t=0,p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(HERMITE),push(p1),push(p2),list(3);return}return issymbol(p1)?yyhermite2(t):(p3=p1,p1=symbol(SECRETX),yyhermite2(t),p1=p3,push(symbol(SECRETX)),push(p1),subst(),Eval())},yyhermite2=function(t){var n,a,s,l;for(n=0,push_integer(1),push_integer(0),p4=pop(),l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p5=p4,p4=pop(),push(p1),push(p4),multiply(),push_integer(n),push(p5),multiply(),subtract(),push_integer(2),l.push(multiply());return l},hilbert=function(){var t,n,a,s,l,u,c;if(t=0,a=0,s=0,save(),p2=pop(),push(p2),s=pop_integer(),s<2){push_symbol(HILBERT),push(p2),list(2),restore();return}for(push_zero_matrix(s,s),p1=pop(),t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l)for(a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)push_integer(t+a+1),inverse(),p1.tensor.elem[t*s+a]=pop();return push(p1),restore()},DEBUG_IMAG=!1,Eval_imag=function(){return push(cadr(p1)),Eval(),imag()},imag=function(){return save(),rect(),p1=pop(),DEBUG_IMAG&&console.log("IMAGE of "+p1),push(p1),push(p1),conjugate(),DEBUG_IMAG&&console.log(" image: conjugate result: "+stack[tos-1]),subtract(),push_integer(2),divide(),DEBUG_IMAG&&console.log(" image: 1st divide result: "+stack[tos-1]),push(imaginaryunit),divide(),DEBUG_IMAG&&console.log(" image: 2nd divide result: "+stack[tos-1]),restore()},index_function=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx;for(n=0,l=0,c=0,Ct=0,ar=0,lx=0,save(),sx=tos-t,p1=stack[sx],Ct=p1.tensor.ndim,c=t-1,c>Ct&&stop("too many indices for tensor"),l=0,n=en=0,tn=c;0<=tn?en<tn:en>tn;n=0<=tn?++en:--en)push(stack[sx+n+1]),lx=pop_integer(),(lx<1||lx>p1.tensor.dim[n])&&stop("index out of range"),l=l*p1.tensor.dim[n]+lx-1;if(Ct===c){moveTos(tos-t),push(p1.tensor.elem[l]),restore();return}for(n=a=on=c,fn=Ct;on<=fn?a<fn:a>fn;n=on<=fn?++a:--a)l=l*p1.tensor.dim[n]+0;for(ar=1,n=s=dn=c,Cn=Ct;dn<=Cn?s<Cn:s>Cn;n=dn<=Cn?++s:--s)ar*=p1.tensor.dim[n];for(p2=alloc_tensor(ar),p2.tensor.ndim=Ct-c,n=u=Rn=c,ax=Ct;Rn<=ax?u<ax:u>ax;n=Rn<=ax?++u:--u)p2.tensor.dim[n-c]=p1.tensor.dim[n];for(n=d=0,ox=ar;0<=ox?d<ox:d>ox;n=0<=ox?++d:--d)p2.tensor.elem[n]=p1.tensor.elem[l+n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},set_component=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx;for(n=0,l=0,c=0,ar=0,sx=0,save(),t<3&&stop("error in indexed assign"),ox=tos-t,p2=stack[ox],p1=stack[ox+1],istensor(p1)||stop("error in indexed assign: assigning to something that is not a tensor"),ar=p1.tensor.ndim,c=t-2,c>ar&&stop("error in indexed assign"),l=0,n=en=0,tn=c;0<=tn?en<tn:en>tn;n=0<=tn?++en:--en)push(stack[ox+n+2]),sx=pop_integer(),(sx<1||sx>p1.tensor.dim[n])&&stop(`error in indexed assign
`),l=l*p1.tensor.dim[n]+sx-1;for(n=a=on=c,fn=ar;on<=fn?a<fn:a>fn;n=on<=fn?++a:--a)l=l*p1.tensor.dim[n]+0;for(p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,n=s=0,dn=p1.tensor.ndim;0<=dn?s<dn:s>dn;n=0<=dn?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(n=u=0,Cn=p1.tensor.nelem;0<=Cn?u<Cn:u>Cn;n=0<=Cn?++u:--u)p3.tensor.elem[n]=p1.tensor.elem[n];if(check_tensor_dimensions(p1),check_tensor_dimensions(p3),p1=p3,ar===c){istensor(p2)&&stop("error in indexed assign"),p1.tensor.elem[l]=p2,check_tensor_dimensions(p1),moveTos(tos-t),push(p1),restore();return}for(istensor(p2)||stop("error in indexed assign"),ar-c!==p2.tensor.ndim&&stop("error in indexed assign"),n=d=0,Rn=p2.tensor.ndim;0<=Rn?d<Rn:d>Rn;n=0<=Rn?++d:--d)p1.tensor.dim[c+n]!==p2.tensor.dim[n]&&stop("error in indexed assign");for(n=Ct=0,ax=p2.tensor.nelem;0<=ax?Ct<ax:Ct>ax;n=0<=ax?++Ct:--Ct)p1.tensor.elem[l+n]=p2.tensor.elem[n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p1),restore()},Eval_inner=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn;for(Rn=[],Rn.push(car(cdr(p1))),dn=car(cdr(cdr(p1))),dn===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),u=cdr(cdr(p1));u!==symbol(NIL);)Rn.push(car(u)),u=cdr(u);if(Rn.length>2){for(push_symbol(INNER),push(Rn[Rn.length-2]),push(Rn[Rn.length-1]),list(3),n=c=2,Ct=Rn.length;2<=Ct?c<Ct:c>Ct;n=2<=Ct?++c:--c)push_symbol(INNER),swap(),push(Rn[Rn.length-n-1]),swap(),list(3);p1=pop(),Eval_inner();return}for(d=[],get_innerprod_factors(p1,d),on=[],n=a=0,ar=d.length;0<=ar?a<ar:a>ar;n=0<=ar?++a:--a)d[n]!==symbol(SYMBOL_IDENTITY_MATRIX)&&on.push(d[n]);if(d=on,on=[],d.length>1){for(Cn=0,n=s=0,en=d.length;(0<=en?s<en:s>en)&&n+Cn+1<=d.length-1;n=0<=en?++s:--s){isNumericAtomOrTensor(d[n+Cn])||isNumericAtomOrTensor(d[n+Cn+1])?on.push(d[n+Cn]):(push(d[n+Cn]),Eval(),inv(),push(d[n+Cn+1]),Eval(),subtract(),t=pop(),isZeroAtomOrTensor(t)?Cn+=1:on.push(d[n+Cn]));if(n+Cn===d.length-2&&on.push(d[d.length-1]),n+Cn>=d.length-1)break}d=on}if(push(symbol(INNER)),d.length>0)for(n=l=0,tn=d.length;0<=tn?l<tn:l>tn;n=0<=tn?++l:--l)push(d[n]);else{pop(),push(symbol(SYMBOL_IDENTITY_MATRIX));return}for(list(d.length+1),p1=pop(),p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),fn=[];iscons(p1);)push(car(p1)),Eval(),inner(),fn.push(p1=cdr(p1));return fn},inner=function(){var t,n,a,s;if(save(),p2=pop(),p1=pop(),isnegativeterm(p2)&&isnegativeterm(p1)&&(push(p2),negate(),p2=pop(),push(p1),negate(),p1=pop()),isinnerordot(p1)&&(t=car(cdr(p1)),n=car(cdr(cdr(p1))),a=p2,p1=t,push(n),push(a),inner(),p2=pop()),p1===symbol(SYMBOL_IDENTITY_MATRIX)){push(p2),restore();return}else if(p2===symbol(SYMBOL_IDENTITY_MATRIX)){push(p1),restore();return}if(istensor(p1)&&istensor(p2))inner_f();else{if(!(isNumericAtomOrTensor(p1)||isNumericAtomOrTensor(p2))&&(push(p1),push(p2),inv(),subtract(),s=pop(),isZeroAtomOrTensor(s))){push_symbol(SYMBOL_IDENTITY_MATRIX),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),inner(),add(),p1=cdr(p1);restore();return}if(expanding&&isadd(p2)){for(p2=cdr(p2),push(zero);iscons(p2);)push(p1),push(car(p2)),inner(),add(),p2=cdr(p2);restore();return}if(push(p1),push(p2),istensor(p1)&&isNumericAtom(p2))tensor_times_scalar();else if(isNumericAtom(p1)&&istensor(p2))scalar_times_tensor();else if(isNumericAtom(p1)||isNumericAtom(p2))multiply();else{pop(),pop(),push_symbol(INNER),push(p1),push(p2),list(3),restore();return}}return restore()},inner_f=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx;if(u=0,on=p1.tensor.dim[p1.tensor.ndim-1],on!==p2.tensor.dim[0]){debugger;stop("inner: tensor dimension check")}for(dn=p1.tensor.ndim+p2.tensor.ndim-2,dn>MAXDIM&&stop("inner: rank of result exceeds maximum"),t=p1.tensor.elem,a=p2.tensor.elem,n=1,u=Cn=0,ax=p1.tensor.ndim-1;0<=ax?Cn<ax:Cn>ax;u=0<=ax?++Cn:--Cn)n*=p1.tensor.dim[u];for(s=1,u=c=1,ox=p2.tensor.ndim;1<=ox?c<ox:c>ox;u=1<=ox?++c:--c)s*=p2.tensor.dim[u];for(p3=alloc_tensor(n*s),l=p3.tensor.elem,u=Ct=0,sx=n;0<=sx?Ct<sx:Ct>sx;u=0<=sx?++Ct:--Ct)for(d=en=0,lx=on;0<=lx?en<lx:en>lx;d=0<=lx?++en:--en)if(!isZeroAtomOrTensor(t[u*on+d]))for(ar=tn=0,cx=s;0<=cx?tn<cx:tn>cx;ar=0<=cx?++tn:--tn)push(t[u*on+d]),push(a[d*s+ar]),multiply(),push(l[u*s+ar]),add(),l[u*s+ar]=pop();if(dn===0)return push(p3.tensor.elem[0]);for(p3.tensor.ndim=dn,d=0,u=fn=0,fx=p1.tensor.ndim-1;0<=fx?fn<fx:fn>fx;u=0<=fx?++fn:--fn)p3.tensor.dim[u]=p1.tensor.dim[u];for(d=p1.tensor.ndim-1,u=Rn=0,gx=p2.tensor.ndim-1;0<=gx?Rn<gx:Rn>gx;u=0<=gx?++Rn:--Rn)p3.tensor.dim[d+u]=p2.tensor.dim[u+1];return push(p3)},get_innerprod_factors=function(t,n){if(!iscons(t)){add_factor_to_accumulator(t,n);return}if(cdr(t)===symbol(NIL)){t=get_innerprod_factors(car(t),n);return}if(isinnerordot(t)){get_innerprod_factors(car(cdr(t)),n),get_innerprod_factors(cdr(cdr(t)),n);return}return add_factor_to_accumulator(t,n)},add_factor_to_accumulator=function(t,n){if(t!==symbol(NIL))return n.push(t)},itab=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))",0],Eval_integral=function(){var t,n,a,s,l;for(n=0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth integral: check n")):n=1,push(p3),n>=0)for(a=0,s=n;0<=s?a<s:a>s;0<=s?++a:--a)push(p4),integral();else for(n=-n,t=0,l=n;0<=l?t<l:t>l;0<=l?++t:--t)push(p4),derivative();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},integral=function(){return save(),p2=pop(),p1=pop(),car(p1)===symbol(ADD)?integral_of_sum():car(p1)===symbol(MULTIPLY)?integral_of_product():integral_of_form(),p1=pop(),Find(p1,symbol(INTEGRAL))&&stop("integral: sorry, could not find a solution"),push(p1),simplify(),Eval(),restore()},integral_of_sum=function(){var t;for(p1=cdr(p1),push(car(p1)),push(p2),integral(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),integral(),add(),t.push(p1=cdr(p1));return t},integral_of_product=function(){return push(p1),push(p2),partition(),p1=pop(),integral_of_form(),multiply()},integral_of_form=function(){var t,n;if(t=italu_hashcode(p1,p2).toFixed(6),n=hashed_itab[t],!n){push_symbol(INTEGRAL),push(p1),push(p2),list(3);return}return push(p1),push(p2),transform(n,!1),p3=pop(),p3===symbol(NIL)?(push_symbol(INTEGRAL),push(p1),push(p2),list(3)):push(p3)},hashcode_values={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916},italu_hashcode=function(t,n){var a;if(issymbol(t))return equal(t,n)?hashcode_values.x:hashcode_values.constant;if(iscons(t))switch(symnum(car(t))){case ADD:return hash_addition(cdr(t),n);case MULTIPLY:return hash_multiplication(cdr(t),n);case POWER:return hash_power(cadr(t),caddr(t),n);case EXP:return hash_power(symbol(E),cadr(t),n);case SQRT:return push_double(.5),a=pop(),hash_power(cadr(t),a,n);default:return hash_function(t,n)}return hashcode_values.constant},hash_function=function(t,n){var a,s,l;if(!Find(cadr(t),n))return hashcode_values.constant;if(l=car(t),a=italu_hashcode(cadr(t),n),s=hashcode_values[l.printname],!s)throw new Error("Unsupported function "+l.printname);return Math.pow(s,a)},hash_addition=function(t,n){var a,s,l,u,c;for(c={};iscons(t);)l=car(t),t=cdr(t),u=0,Find(l,n)?u=italu_hashcode(l,n):u=hashcode_values.constant,c[u.toFixed(6)]=!0;s=0;for(a in c)hasProp.call(c,a)&&(c[a],s=s+parseFloat(a,10));return s},hash_multiplication=function(t,n){var a,s;for(a=1;iscons(t);)s=car(t),t=cdr(t),Find(s,n)&&(a=a*italu_hashcode(s,n));return a},hash_power=function(t,n,a){var s,l;if(s=hashcode_values.constant,l=hashcode_values.constexp,Find(t,a)&&(s=italu_hashcode(t,a)),Find(n,a))l=italu_hashcode(n,a);else{if(s===hashcode_values.constant)return hashcode_values.constant;isminusone(n)?l=-1:isoneovertwo(n)?l=.5:isminusoneovertwo(n)?l=-.5:equalq(n,2,1)?l=2:equalq(n,-2,1)&&(l=-2)}return Math.pow(s,l)},make_hashed_itab=function(){var t,n,a,s,l,u,c,d;for(c={},l=0,s=itab.length;l<s&&(u=itab[l],!!u);l++)scan_meta(u),t=pop(),d=cadr(t),n=italu_hashcode(d,symbol(METAX)),a=n.toFixed(6),c[a]||(c[a]=[]),c[a].push(u);return console.log("hashed_itab = "+JSON.stringify(c,null,2)),c},$.make_hashed_itab=make_hashed_itab,hashed_itab={"1.144166":["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],"1.095727":["f(x^(-2),-x^(-1))"],"1.023118":["f(x^(-1/2),2*x^(1/2))"],"0.977405":["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],"0.912636":["f(x^2,x^3/3)"],"1.137302":["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],"1.326774":["f(exp(a*x+b),1/a*exp(a*x+b))"],"1.080259":["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],"1.260228":["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],"1.451902":["f(log(a*x),x*log(a*x)-x)"],"0.486192":["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],"0.697274":["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],"0.476307":["f(1/(a+b*x),1/b*log(a+b*x))"],"0.226868":["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],"2.904531":["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],"0.455026":["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],"0.216732":["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],"0.434695":["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],"0.207048":["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],"2.650781":["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],"0.498584":["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],"0.237479":["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],"3.040375":["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],"0.521902":["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],"0.446014":["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],"0.248586":["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],"0.464469":["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],"0.443716":["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],"0.236382":["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],"0.508931":["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],"0.532733":["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],"0.480638":["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],"0.438648":["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],"0.459164":["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],"1.384221":["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],"1.322374":["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],"1.516728":["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],"1.587665":["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],"0.659314":["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],"0.629856":["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],"0.722428":["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],"0.756216":["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],"1.434156":["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],"0.729886":["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],"1.370077":["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],"1.730087":["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],"0.578006":["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],"1.652787":["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],"1.308862":["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],"1.342944":["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],"0.636358":["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"0.652928":["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],"0.764022":["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],"1.620055":["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],"0.332117":["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],"1.571443":["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"1.690994":["f(sin(a*x),-cos(a*x)/a)"],"1.055979":["f(cos(a*x),sin(a*x)/a)"],"1.116714":["f(tan(a*x),-log(cos(a*x))/a)"],"0.895484":["f(1/tan(a*x),log(sin(a*x))/a)"],"0.946989":["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],"0.591368":["f(1/sin(a*x),log(tan(a*x/2))/a)"],"2.859462":["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"1.115091":["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],"1.081452":["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"0.349716":["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],"0.896788":["f(1/cos(a*x)^2,tan(a*x)/a)"],"1.785654":["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],"1.516463":["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],"2.707879":["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],"0.369293":["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],"0.560019":["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],"0.530332":["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],"0.331177":["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],"0.313621":["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],"3.172365":["f(sin(a+b*x),-cos(a+b*x)/b)"],"1.127162":["f(cos(a+b*x),sin(a+b*x)/b)"],"0.352714":["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],"0.454515":["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],"1.615441":["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],"1.543263":["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],"1.008798":["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],"0.963724":["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],"1.611938":["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],"1.791033":["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],"1.123599":["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],"1.387031":["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],"1.325058":["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],"2.108018":["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],"0.403214":["f(1/x*1/(a+log(x)),log(a+log(x)))"],"2.269268":["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],"2.486498":["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],"1.769733":["f(sinh(x),cosh(x))"],"1.883858":["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],"1.690661":["f(x*sinh(x),x*cosh(x)-sinh(x))"],"1.799688":["f(x*cosh(x),x*sinh(x)-cosh(x))"],"3.131954":["f(sinh(x)^2,sinh(2*x)/4-x/2)"],"2.579685":["f(tanh(x)^2,x-tanh(x))"],"3.548923":["f(cosh(x)^2,sinh(2*x)/4+x/2)"],"1.058866":["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],"1.130783":["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],"1.078698":["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],"2.640666":["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],"1.086487":["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],"1.267493":["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],"1.037943":["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.210862":["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],"1.242392":["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]},INV_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},inv=function(){var t,n,a,s;if(save(),p1=pop(),isinv(p1)){push(car(cdr(p1))),restore();return}if(isidentitymatrix(p1)){push(p1),restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),t=[];iscons(p1);)t.push(car(p1)),p1=cdr(p1);for(n=a=s=t.length-1;s<=0?a<=0:a>=0;n=s<=0?++a:--a)push(t[n]),inv(),n!==t.length-1&&inner();restore();return}if(INV_check_arg()===0){push_symbol(INV),push(p1),list(2),restore();return}return isNumericAtomOrTensor(p1)?yyinvg():(push(p1),adj(),push(p1),det(),p2=pop(),isZeroAtomOrTensor(p2)&&stop("inverse of singular matrix"),push(p2),divide()),restore()},invg=function(){if(save(),p1=pop(),INV_check_arg()===0){push_symbol(INVG),push(p1),list(2),restore();return}return yyinvg(),restore()},yyinvg=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn;for(t=0,n=0,s=0,c=0,c=p1.tensor.dim[0],t=tos,n=d=0,Ct=c;0<=Ct?d<Ct:d>Ct;n=0<=Ct?++d:--d)for(s=a=0,ar=c;0<=ar?a<ar:a>ar;s=0<=ar?++a:--a)push(n===s?one:zero);for(n=l=0,en=c*c;0<=en?l<en:l>en;n=0<=en?++l:--l)push(p1.tensor.elem[n]);for(INV_decomp(c),p1=alloc_tensor(c*c),p1.tensor.ndim=2,p1.tensor.dim[0]=c,p1.tensor.dim[1]=c,n=u=0,tn=c*c;0<=tn?u<tn:u>tn;n=0<=tn?++u:--u)p1.tensor.elem[n]=stack[t+n];return moveTos(tos-2*c*c),push(p1)},INV_decomp=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;for(n=0,a=0,s=0,u=0,Cn=0,n=tos-t*t,Cn=n-t*t,dn=[],a=Ct=0,ar=t;0<=ar?Ct<ar:Ct>ar;a=0<=ar?++Ct:--Ct){if(equal(stack[n+t*a+a],zero)){for(s=l=en=a+1,tn=t;(en<=tn?l<tn:l>tn)&&equal(stack[n+t*s+a],zero);s=en<=tn?++l:--l);for(s===t&&stop("inverse of singular matrix"),u=c=0,on=t;0<=on?c<on:c>on;u=0<=on?++c:--c)p2=stack[n+t*a+u],stack[n+t*a+u]=stack[n+t*s+u],stack[n+t*s+u]=p2,p2=stack[Cn+t*a+u],stack[Cn+t*a+u]=stack[Cn+t*s+u],stack[Cn+t*s+u]=p2}for(p2=stack[n+t*a+a],u=d=0,fn=t;0<=fn?d<fn:d>fn;u=0<=fn?++d:--d)u>a&&(push(stack[n+t*a+u]),push(p2),divide(),stack[n+t*a+u]=pop()),push(stack[Cn+t*a+u]),push(p2),divide(),stack[Cn+t*a+u]=pop();dn.push((function(){var Rn,ax,ox;for(ox=[],s=Rn=0,ax=t;0<=ax?Rn<ax:Rn>ax;s=0<=ax?++Rn:--Rn)s!==a&&(p2=stack[n+t*s+a],ox.push((function(){var sx,lx,cx;for(cx=[],u=sx=0,lx=t;0<=lx?sx<lx:sx>lx;u=0<=lx?++sx:--sx)u>a&&(push(stack[n+t*s+u]),push(stack[n+t*a+u]),push(p2),multiply(),subtract(),stack[n+t*s+u]=pop()),push(stack[Cn+t*s+u]),push(stack[Cn+t*a+u]),push(p2),multiply(),subtract(),cx.push(stack[Cn+t*s+u]=pop());return cx})()));return ox})())}return dn},DEBUG_IS=!1,isZeroAtom=function(t){switch(t.k){case NUM:return MZERO(t.q.a);case DOUBLE:return t.d===0;default:return!1}},isZeroTensor=function(t){var n,a,s;if(t.k!==TENSOR)return 0;for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(!isZeroAtomOrTensor(t.tensor.elem[n]))return 0;return 1},isZeroAtomOrTensor=function(t){return isZeroAtom(t)||isZeroTensor(t)},isZeroLikeOrNonZeroLikeOrUndetermined=function(t){var n;if(push(t),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(push(n),zzfloat(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(Find(n,imaginaryunit)){if(push(n),absValFloat(),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1}return null},isnegativenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===-1)return 1;break;case DOUBLE:if(t.d<0)return 1}return 0},ispositivenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===1)return 1;break;case DOUBLE:if(t.d>0)return 1}return 0},isplustwo=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,2)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===2)return 1}return 0},isplusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===1)return 1}return 0},isminusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,-1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===-1)return 1}return 0},isone=function(t){return isplusone(t)||isminusone(t)},isinteger=function(t){return t.k===NUM&&MEQUAL(t.q.b,1)?1:0},isintegerorintegerfloat=function(t){return t.k===DOUBLE?t.d===Math.round(t.d)?1:0:isinteger(t)},isnonnegativeinteger=function(t){return isrational(t)&&MEQUAL(t.q.b,1)&&MSIGN(t.q.a)===1?1:0},isposint=function(t){return isinteger(t)&&MSIGN(t.q.a)===1?1:0},isunivarpolyfactoredorexpandedform=function(t,n){return DEBUG&&console.log("isunivarpolyfactoredorexpandedform: p: "+t+" x: "+n),n==null&&(push(t),guess(),n=pop(),pop()),ispolyfactoredorexpandedform(t,n)&&Find(t,symbol(SYMBOL_X))+Find(t,symbol(SYMBOL_Y))+Find(t,symbol(SYMBOL_Z))===1?n:0},ispolyfactoredorexpandedform=function(t,n){return ispolyfactoredorexpandedform_factor(t,n)},ispolyfactoredorexpandedform_factor=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(DEBUG&&console.log("ispolyfactoredorexpandedform_factor testing "+car(t)),!ispolyfactoredorexpandedform_power(car(t),n))return DEBUG&&console.log("... tested negative:"+car(t)),0;t=cdr(t)}return 1}else return ispolyfactoredorexpandedform_power(t,n)},ispolyfactoredorexpandedform_power=function(t,n){return car(t)===symbol(POWER)?(DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(isposint(caddr(t)),DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+ispolyexpandedform_expr(cadr(t),n)):void 0)),isposint(caddr(t))&&ispolyexpandedform_expr(cadr(t),n)):(DEBUG&&console.log("ispolyfactoredorexpandedform_power not a power, testing if this is exp form: "+t),ispolyexpandedform_expr(t,n))},ispolyexpandedform=function(t,n){return Find(t,n)?ispolyexpandedform_expr(t,n):0},ispolyexpandedform_expr=function(t,n){if(car(t)===symbol(ADD)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_term(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_term(t,n)},ispolyexpandedform_term=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_factor(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_factor(t,n)},ispolyexpandedform_factor=function(t,n){return equal(t,n)?1:car(t)===symbol(POWER)&&equal(cadr(t),n)?isposint(caddr(t))?1:0:Find(t,n)?0:1},isnegativeterm=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},hasNegativeRationalExponent=function(t){return car(t)===symbol(POWER)&&isrational(car(cdr(cdr(t))))&&isnegativenumber(car(cdr(t)))?(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has imaginary component"),1):(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has NO imaginary component"),0)},isimaginarynumberdouble=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isdouble(cadr(t))&&hasNegativeRationalExponent(caddr(t))||equal(t,imaginaryunit)?1:0},isimaginarynumber=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isNumericAtom(cadr(t))&&equal(caddr(t),imaginaryunit)||equal(t,imaginaryunit)||hasNegativeRationalExponent(caddr(t))?(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" is imaginary number"),1):(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" isn't an imaginary number"),0)},iscomplexnumberdouble=function(t){return car(t)===symbol(ADD)&&length(t)===3&&isdouble(cadr(t))&&isimaginarynumberdouble(caddr(t))||isimaginarynumberdouble(t)?1:0},iscomplexnumber=function(t){if(DEBUG_IS)debugger;return car(t)===symbol(ADD)&&length(t)===3&&isNumericAtom(cadr(t))&&isimaginarynumber(caddr(t))||isimaginarynumber(t)?(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),1):(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),0)},iseveninteger=function(t){return isinteger(t)&&t.q.a.isEven()?1:0},isnegative=function(t){return car(t)===symbol(ADD)&&isnegativeterm(cadr(t))||isnegativeterm(t)?1:0},issymbolic=function(t){if(issymbol(t))return 1;for(;iscons(t);){if(issymbolic(car(t)))return 1;t=cdr(t)}return 0},isintegerfactor=function(t){return isinteger(t)||car(t)===symbol(POWER)&&isinteger(cadr(t))&&isinteger(caddr(t))},isNumberOneOverSomething=function(t){return isfraction(t)&&MEQUAL(t.q.a.abs(),1)},isoneover=function(t){return car(t)===symbol(POWER)&&isminusone(caddr(t))},isfraction=function(t){return t.k===NUM&&!MEQUAL(t.q.b,1)},equaln=function(t,n){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,1);case DOUBLE:return t.d===n;default:return!1}},equalq=function(t,n,a){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,a);case DOUBLE:return t.d===n/a;default:return!1}},isoneovertwo=function(t){return equalq(t,1,2)},isminusoneovertwo=function(t){return equalq(t,-1,2)},isoneoversqrttwo=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),2)&&equalq(caddr(t),-1,2)},isminusoneoversqrttwo=function(t){return car(t)===symbol(MULTIPLY)&&equaln(cadr(t),-1)&&isoneoversqrttwo(caddr(t))&&length(t)===3},issqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},isminussqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isminusoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},issqrtthree=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),3)&&isoneovertwo(caddr(t))},isfloating=function(t){if(t.k===DOUBLE||t===symbol(FLOATF))return 1;for(;iscons(t);){if(isfloating(car(t)))return 1;t=cdr(t)}return 0},isimaginaryunit=function(t){return equal(t,imaginaryunit)?1:0},isquarterturn=function(t){var n,a;if(a=0,n=0,car(t)!==symbol(MULTIPLY))return 0;if(equal(cadr(t),imaginaryunit))return caddr(t)!==symbol(PI)||length(t)!==3?0:2;if(!isNumericAtom(cadr(t))||!equal(caddr(t),imaginaryunit)||cadddr(t)!==symbol(PI)||length(t)!==4||(push(cadr(t)),push_integer(2),multiply(),a=pop_integer(),isNaN(a)))return 0;switch(a<1&&(n=1,a=-a),a%4){case 0:a=1;break;case 1:n?a=4:a=3;break;case 2:a=2;break;case 3:n?a=3:a=4}return a},isnpi=function(t){var n;return n=0,t===symbol(PI)?2:!(car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&caddr(t)===symbol(PI)&&length(t)===3)||(push(cadr(t)),push_integer(2),multiply(),n=pop_integer(),isNaN(n))?0:(n<0?n=4- -n%4:n=1+(n-1)%4,n)},$.isZeroAtomOrTensor=isZeroAtomOrTensor,$.isnegativenumber=isnegativenumber,$.isplusone=isplusone,$.isminusone=isminusone,$.isinteger=isinteger,$.isnonnegativeinteger=isnonnegativeinteger,$.isposint=isposint,$.isnegativeterm=isnegativeterm,$.isimaginarynumber=isimaginarynumber,$.iscomplexnumber=iscomplexnumber,$.iseveninteger=iseveninteger,$.isnegative=isnegative,$.issymbolic=issymbolic,$.isintegerfactor=isintegerfactor,$.isoneover=isoneover,$.isfraction=isfraction,$.isoneoversqrttwo=isoneoversqrttwo,$.isminusoneoversqrttwo=isminusoneoversqrttwo,$.isfloating=isfloating,$.isimaginaryunit=isimaginaryunit,$.isquarterturn=isquarterturn,$.isnpi=isnpi,Eval_isprime=function(){return push(cadr(p1)),Eval(),p1=pop(),isnonnegativeinteger(p1)&&mprime(p1.q.a)?push_integer(1):push_integer(0)},Eval_laguerre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),laguerre()},laguerre=function(){var t;if(t=0,save(),p3=pop(),p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(LAGUERRE),push(p1),push(p2),push(p3),list(4),restore();return}return issymbol(p1)?laguerre2(t):(p4=p1,p1=symbol(SECRETX),laguerre2(t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),restore()},laguerre2=function(t){var n,a,s,l;for(n=0,push_integer(1),push_integer(0),p6=pop(),l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p5=p6,p6=pop(),push_integer(2*n+1),push(p1),subtract(),push(p3),add(),push(p6),multiply(),push_integer(n),push(p3),add(),push(p5),multiply(),subtract(),push_integer(n+1),l.push(divide());return l},Eval_lcm=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),lcm(),t.push(p1=cdr(p1));return t},lcm=function(){var t;return t=expanding,save(),yylcm(),restore(),expanding=t},yylcm=function(){return expanding=1,p2=pop(),p1=pop(),push(p1),push(p2),gcd(),push(p1),divide(),push(p2),divide(),inverse()},Eval_leading=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),leading()},leading=function(){return save(),p2=pop(),p1=pop(),push(p1),push(p2),degree(),p3=pop(),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter(),restore()},Eval_legendre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),legendre()},legendre=function(){return save(),__legendre(),restore()},__legendre=function(){var t,n;if(t=0,n=0,p3=pop(),p2=pop(),p1=pop(),push(p2),n=pop_integer(),push(p3),t=pop_integer(),n<0||isNaN(n)||t<0||isNaN(t)){push_symbol(LEGENDRE),push(p1),push(p2),push(p3),list(4);return}return issymbol(p1)?__legendre2(n,t):(p4=p1,p1=symbol(SECRETX),__legendre2(n,t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),__legendre3(t)},__legendre2=function(t,n){var a,s,l,u,c,d;for(a=0,push_integer(1),push_integer(0),p6=pop(),a=l=0,u=t;0<=u?l<u:l>u;a=0<=u?++l:--l)p5=p6,p6=pop(),push_integer(2*a+1),push(p1),multiply(),push(p6),multiply(),push_integer(a),push(p5),multiply(),subtract(),push_integer(a+1),divide();for(d=[],a=s=0,c=n;0<=c?s<c:s>c;a=0<=c?++s:--s)push(p1),d.push(derivative());return d},__legendre3=function(t){if(t!==0&&(car(p1)===symbol(COS)?(push(cadr(p1)),sine(),square()):car(p1)===symbol(SIN)?(push(cadr(p1)),cosine(),square()):(push_integer(1),push(p1),square(),subtract()),push_integer(t),push_rational(1,2),multiply(),power(),multiply(),t%2))return negate()},list=function(t){var n,a,s;for(push(symbol(NIL)),s=[],n=0,a=t;0<=a?n<a:n>a;0<=a?++n:--n)s.push(cons());return s},Eval_log=function(){return push(cadr(p1)),Eval(),logarithm()},logarithm=function(){return save(),yylog(),restore()},yylog=function(){var t;if(t=0,p1=pop(),p1===symbol(E)){push_integer(1);return}if(equaln(p1,1)){push_integer(0);return}if(isnegativenumber(p1)){push(p1),negate(),logarithm(),push(imaginaryunit),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),multiply(),add();return}if(isdouble(p1)){t=Math.log(p1.d),push_double(t);return}if(isfraction(p1)){push(p1),numerator(),logarithm(),push(p1),denominator(),logarithm(),subtract();return}if(car(p1)===symbol(POWER)){push(caddr(p1)),push(cadr(p1)),logarithm(),multiply();return}if(car(p1)===symbol(MULTIPLY)){for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),logarithm(),add(),p1=cdr(p1);return}return push_symbol(LOG),push(p1),list(2)},Eval_lookup=function(){return p1=cadr(p1),!iscons(p1)&&cadr(p1).k===SYM&&(p1=get_binding(p1)),push(p1)},madd=function(t,n){return t.add(n)},msub=function(t,n){return t.subtract(n)},mgcd=function(t,n){return bigInt.gcd(t,n)},new_string=function(t){var n;return n=new U,n.k=STR,n.str=t,n},push_zero_matrix=function(t,n){return push(alloc_tensor(t*n)),stack[tos-1].tensor.ndim=2,stack[tos-1].tensor.dim[0]=t,stack[tos-1].tensor.dim[1]=n},equal=function(t,n){return cmp_expr(t,n)===0?1:0},lessp=function(t,n){return cmp_expr(t,n)<0?1:0},sign=function(t){return t<0?-1:t>0?1:0},cmp_expr=function(t,n){var a;if(a=0,t===n)return 0;if(t===symbol(NIL))return-1;if(n===symbol(NIL))return 1;if(isNumericAtom(t)&&isNumericAtom(n))return sign(compare_numbers(t,n));if(isNumericAtom(t))return-1;if(isNumericAtom(n))return 1;if(isstr(t)&&isstr(n))return sign(strcmp(t.str,n.str));if(isstr(t))return-1;if(isstr(n))return 1;if(issymbol(t)&&issymbol(n))return sign(strcmp(get_printname(t),get_printname(n)));if(issymbol(t))return-1;if(issymbol(n))return 1;if(istensor(t)&&istensor(n))return compare_tensors(t,n);if(istensor(t))return-1;if(istensor(n))return 1;for(;iscons(t)&&iscons(n);){if(a=cmp_expr(car(t),car(n)),a!==0)return a;t=cdr(t),n=cdr(n)}return iscons(n)?-1:iscons(t)?1:0},length=function(t){var n;for(n=0;iscons(t);)t=cdr(t),n++;return n},yyexpand=function(){var t;return t=expanding,expanding=1,Eval(),expanding=t},exponential=function(){return push_symbol(E),swap(),power()},square=function(){return push_integer(2),power()},sort_stack=function(t){var n,a;return n=tos-t,a=stack.slice(n,n+t),a.sort(cmp_expr),stack=stack.slice(0,n).concat(a).concat(stack.slice(n+t))},$.equal=equal,$.length=length,mmul=function(t,n){return t.multiply(n)},mdiv=function(t,n){return t.divide(n)},mmod=function(t,n){return t.mod(n)},mdivrem=function(t,n){var a;return a=t.divmod(n),[a.quotient,a.remainder]},Eval_mod=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),mod()},mod=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("mod function: divide by zero"),!isNumericAtom(p1)||!isNumericAtom(p2)){push_symbol(MOD),push(p1),push(p2),list(3),restore();return}return isdouble(p1)&&(push(p1),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p1=pop()),isdouble(p2)&&(push(p2),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p2=pop()),(!isinteger(p1)||!isinteger(p2))&&stop("mod function: integer arguments expected"),p3=new U,p3.k=NUM,p3.q.a=mmod(p1.q.a,p2.q.a),p3.q.b=mint(1),push(p3),restore()},mpow=function(t,n){return t.pow(n)},mprime=function(t){return t.isProbablePrime()},mroot=function(t,n){var a,s,l,u,c,d,Ct;for(t=t.abs(),a=0,s=0,l=0,n===0&&stop("root index is zero"),l=0;t.shiftRight(l)>0;)l++;if(l===0)return mint(0);for(l=Math.floor((l-1)/n),s=Math.floor(l/32+1),d=bigInt(s),a=u=0,c=s;0<=c?u<c:u>c;a=0<=c?++u:--u)d=d.and(bigInt(1).shiftLeft(a).not());for(;l>=0;){switch(d=d.or(bigInt(1).shiftLeft(l)),Ct=mpow(d,n),mcmp(Ct,t)){case 0:return d;case 1:d=d.and(bigInt(1).shiftLeft(l).not())}l--}return 0},DEBUG_MULTIPLY=!1,Eval_multiply=function(){var t;for(push(cadr(p1)),Eval(),p1=cddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),multiply(),t.push(p1=cdr(p1));return t},multiply=function(){return esc_flag&&stop("escape key stop"),isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?multiply_numbers():(save(),yymultiply(),restore())},yymultiply=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,p2=pop(),p1=pop(),t=tos,isZeroAtom(p1)||isZeroAtom(p2)){evaluatingAsFloats?push_double(0):push(zero);return}if(expanding&&isadd(p1)){for(p1=cdr(p1),evaluatingAsFloats?push_double(0):push(zero);iscons(p1);)push(car(p1)),push(p2),multiply(),add(),p1=cdr(p1);return}if(expanding&&isadd(p2)){for(p2=cdr(p2),evaluatingAsFloats?push_double(0):push(zero);iscons(p2);)push(p1),push(car(p2)),multiply(),add(),p2=cdr(p2);return}if(!istensor(p1)&&istensor(p2)){push(p1),push(p2),scalar_times_tensor();return}if(istensor(p1)&&!istensor(p2)){push(p1),push(p2),tensor_times_scalar();return}for(car(p1)===symbol(MULTIPLY)?p1=cdr(p1):(push(p1),list(1),p1=pop()),car(p2)===symbol(MULTIPLY)?p2=cdr(p2):(push(p2),list(1),p2=pop()),isNumericAtom(car(p1))&&isNumericAtom(car(p2))?(push(car(p1)),push(car(p2)),multiply_numbers(),p1=cdr(p1),p2=cdr(p2)):isNumericAtom(car(p1))?(push(car(p1)),p1=cdr(p1)):isNumericAtom(car(p2))?(push(car(p2)),p2=cdr(p2)):evaluatingAsFloats?push_double(1):push(one),parse_p1(),parse_p2();iscons(p1)&&iscons(p2);){if(caar(p1)===symbol(OPERATOR)&&caar(p2)===symbol(OPERATOR)){push_symbol(OPERATOR),push(cdar(p1)),push(cdar(p2)),append(),cons(),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();continue}switch(cmp_expr(p3,p4)){case-1:push(car(p1)),p1=cdr(p1),parse_p1();break;case 1:push(car(p2)),p2=cdr(p2),parse_p2();break;case 0:combine_factors(t),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();break;default:stop("internal error 2")}}for(;iscons(p1);)push(car(p1)),p1=cdr(p1);for(;iscons(p2);)push(car(p2)),p2=cdr(p2);if(__normalize_radical_factors(t),expanding){for(n=s=l=t,u=tos;l<=u?s<u:s>u;n=l<=u?++s:--s)if(isadd(stack[n])){multiply_all(tos-t);return}}if(a=tos-t,a!==1){if(isrational(stack[t])&&equaln(stack[t],1)){a===2?(p7=pop(),pop(),push(p7)):(stack[t]=symbol(MULTIPLY),list(a));return}return list(a),p7=pop(),push_symbol(MULTIPLY),push(p7),cons()}},parse_p1=function(){if(p3=car(p1),p5=evaluatingAsFloats?one_as_double:one,car(p3)===symbol(POWER))return p5=caddr(p3),p3=cadr(p3)},parse_p2=function(){if(p4=car(p2),p6=evaluatingAsFloats?one_as_double:one,car(p4)===symbol(POWER))return p6=caddr(p4),p4=cadr(p4)},combine_factors=function(t){return push(p4),push(p5),push(p6),add(),power(),p7=pop(),isNumericAtom(p7)?(push(stack[t]),push(p7),multiply_numbers(),stack[t]=pop()):car(p7)===symbol(MULTIPLY)&&isNumericAtom(cadr(p7))&&cdddr(p7)===symbol(NIL)?(push(stack[t]),push(cadr(p7)),multiply_numbers(),stack[t]=pop(),push(caddr(p7))):push(p7)},multiply_noexpand=function(){var t;return t=expanding,expanding=0,multiply(),expanding=t},multiply_all=function(t){var n,a,s,l;if(a=0,t!==1){if(t===0){push(evaluatingAsFloats?one_as_double:one);return}for(n=tos-t,push(stack[n]),a=s=1,l=t;1<=l?s<l:s>l;a=1<=l?++s:--s)push(stack[n+a]),multiply();return stack[n]=pop(),moveTos(n+1)}},multiply_all_noexpand=function(t){var n;return n=expanding,expanding=0,multiply_all(t),expanding=n},divide=function(){return isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?divide_numbers():(inverse(),multiply())},inverse=function(){return isNumericAtom(stack[tos-1])?invert_number():(push_integer(-1),power())},reciprocate=function(){return inverse()},negate=function(){return isNumericAtom(stack[tos-1])?negate_number():(evaluatingAsFloats?push_double(-1):push_integer(-1),multiply())},negate_noexpand=function(){var t;return t=expanding,expanding=0,negate(),expanding=t},__normalize_radical_factors=function(t){var n,a,s,l,u,c,d,Ct,ar,en;if(n=0,!(isplusone(stack[t])||isminusone(stack[t])||isdouble(stack[t]))){for(n=l=u=t+1,c=tos;(u<=c?l<c:l>c)&&!__is_radical_number(stack[n]);n=u<=c?++l:--l);if(n!==tos){for(save(),push(stack[t]),mp_numerator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors numerator: "+stack[tos-1]),p1=pop(),n=a=d=t+1,Ct=tos;(d<=Ct?a<Ct:a>Ct)&&!(isplusone(p1)||isminusone(p1));n=d<=Ct?++a:--a)__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),isnegativenumber(p4)&&(push(p1),push(p3),divide(),p5=pop(),isinteger(p5)&&(p1=p5,push_symbol(POWER),push(p3),push(evaluatingAsFloats?one_as_double:one),push(p4),add(),list(3),stack[n]=pop())));for(push(stack[t]),mp_denominator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors denominator: "+stack[tos-1]),p2=pop(),n=s=ar=t+1,en=tos;(ar<=en?s<en:s>en)&&!isplusone(p2);n=ar<=en?++s:--s)if(__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),!isnegativenumber(p4)&&(push(p2),push(p3),divide(),p5=pop(),!!isinteger(p5)))){if(DEBUG_MULTIPLY&&console.log("__new radical p5: "+p5.toString()),DEBUG_MULTIPLY&&console.log("__new radical top stack: "+stack[tos-1]),p2=p5,push_symbol(POWER),push(p3),push(p4),DEBUG_MULTIPLY&&console.log("__new radical p3: "+p3.toString()),DEBUG_MULTIPLY&&console.log("__new radical p4: "+p4.toString()),push(one),subtract(),dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&isinteger(p3)&&!isinteger(stack[tos-1])&&isnegativenumber(stack[tos-1])){pop(),pop(),pop(),push(p1),push(p3),divide(),p1=pop();break}DEBUG_MULTIPLY&&console.log("__new radical exponent: "+stack[tos-1]),list(3),stack[n]=pop()}return push(p1),push(p2),divide(),stack[t]=pop(),restore()}}},__is_radical_number=function(t){return car(t)===symbol(POWER)&&isNumericAtom(cadr(t))&&isfraction(caddr(t))&&!isminusone(cadr(t))},NROOTS_YMAX=101,NROOTS_DELTA=1e-6,NROOTS_EPSILON=1e-9,NROOTS_ABS=function(t){return Math.sqrt(t.r*t.r+t.i*t.i)},NROOTS_RANDOM=function(){return 4*Math.random()-2},numericRootOfPolynomial=(function(){class t{}return t.prototype.r=0,t.prototype.i=0,t}).call(this),nroots_a=new numericRootOfPolynomial,nroots_b=new numericRootOfPolynomial,nroots_x=new numericRootOfPolynomial,nroots_y=new numericRootOfPolynomial,nroots_fa=new numericRootOfPolynomial,nroots_fb=new numericRootOfPolynomial,nroots_dx=new numericRootOfPolynomial,nroots_df=new numericRootOfPolynomial,nroots_c=[],initNRoots=o=0,ref=NROOTS_YMAX;0<=ref?o<ref:o>ref;initNRoots=0<=ref?++o:--o)nroots_c[initNRoots]=new numericRootOfPolynomial;for(Eval_nroots=function(){var t,n,a,s,l,u,c,d,Ct;for(t=0,n=0,l=0,c=0,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("nroots: polynomial?"),t=tos,c=coeff(p2,p1),c>NROOTS_YMAX&&stop("nroots: degree?"),n=a=0,d=c;0<=d?a<d:a>d;n=0<=d?++a:--a)push(stack[t+n]),real(),yyfloat(),Eval(),p1=pop(),push(stack[t+n]),imag(),yyfloat(),Eval(),p2=pop(),(!isdouble(p1)||!isdouble(p2))&&stop("nroots: coefficients?"),nroots_c[n].r=p1.d,nroots_c[n].i=p2.d;for(moveTos(t),monic(c),l=s=c;s>1;l=s+=-1)findroot(l),Math.abs(nroots_a.r)<NROOTS_DELTA&&(nroots_a.r=0),Math.abs(nroots_a.i)<NROOTS_DELTA&&(nroots_a.i=0),push_double(nroots_a.r),push_double(nroots_a.i),push(imaginaryunit),multiply(),add(),NROOTS_divpoly(l);if(c=tos-t,c>1){for(sort_stack(c),p1=alloc_tensor(c),p1.tensor.ndim=1,p1.tensor.dim[0]=c,n=u=0,Ct=c;0<=Ct?u<Ct:u>Ct;n=0<=Ct?++u:--u)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1)}},monic=function(t){var n,a,s,l;for(a=0,l=0,nroots_y.r=nroots_c[t-1].r,nroots_y.i=nroots_c[t-1].i,l=nroots_y.r*nroots_y.r+nroots_y.i*nroots_y.i,a=n=0,s=t-1;0<=s?n<s:n>s;a=0<=s?++n:--n)nroots_c[a].r=(nroots_c[a].r*nroots_y.r+nroots_c[a].i*nroots_y.i)/l,nroots_c[a].i=(nroots_c[a].i*nroots_y.r-nroots_c[a].r*nroots_y.i)/l;return nroots_c[t-1].r=1,nroots_c[t-1].i=0},findroot=function(t){var n,a,s,l;if(l=0,NROOTS_ABS(nroots_c[0])<NROOTS_DELTA){nroots_a.r=0,nroots_a.i=0;return}for(n=0;n<100;++n)for(nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),compute_fa(t),nroots_b.r=nroots_a.r,nroots_b.i=nroots_a.i,nroots_fb.r=nroots_fa.r,nroots_fb.i=nroots_fa.i,nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),a=0;a<1e3;++a){if(compute_fa(t),s=NROOTS_ABS(nroots_fa),DEBUG&&console.log("nrabs: "+s),s<NROOTS_EPSILON)return;if(NROOTS_ABS(nroots_fa)<NROOTS_ABS(nroots_fb)&&(nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_a.r=nroots_b.r,nroots_a.i=nroots_b.i,nroots_b.r=nroots_x.r,nroots_b.i=nroots_x.i,nroots_x.r=nroots_fa.r,nroots_x.i=nroots_fa.i,nroots_fa.r=nroots_fb.r,nroots_fa.i=nroots_fb.i,nroots_fb.r=nroots_x.r,nroots_fb.i=nroots_x.i),nroots_dx.r=nroots_b.r-nroots_a.r,nroots_dx.i=nroots_b.i-nroots_a.i,nroots_df.r=nroots_fb.r-nroots_fa.r,nroots_df.i=nroots_fb.i-nroots_fa.i,l=nroots_df.r*nroots_df.r+nroots_df.i*nroots_df.i,l===0)break;nroots_y.r=(nroots_dx.r*nroots_df.r+nroots_dx.i*nroots_df.i)/l,nroots_y.i=(nroots_dx.i*nroots_df.r-nroots_dx.r*nroots_df.i)/l,nroots_a.r=nroots_b.r-(nroots_y.r*nroots_fb.r-nroots_y.i*nroots_fb.i),nroots_a.i=nroots_b.i-(nroots_y.r*nroots_fb.i+nroots_y.i*nroots_fb.r)}return stop("nroots: convergence error")},compute_fa=function(t){var n,a,s,l,u;for(a=0,u=0,nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_fa.r=nroots_c[0].r+nroots_c[1].r*nroots_x.r-nroots_c[1].i*nroots_x.i,nroots_fa.i=nroots_c[0].i+nroots_c[1].r*nroots_x.i+nroots_c[1].i*nroots_x.r,l=[],a=n=2,s=t;2<=s?n<s:n>s;a=2<=s?++n:--n)u=nroots_a.r*nroots_x.r-nroots_a.i*nroots_x.i,nroots_x.i=nroots_a.r*nroots_x.i+nroots_a.i*nroots_x.r,nroots_x.r=u,nroots_fa.r+=nroots_c[a].r*nroots_x.r-nroots_c[a].i*nroots_x.i,l.push(nroots_fa.i+=nroots_c[a].r*nroots_x.i+nroots_c[a].i*nroots_x.r);return l},NROOTS_divpoly=function(t){var n,a,s,l,u,c;for(s=0,s=n=l=t-1;l<=0?n<0:n>0;s=l<=0?++n:--n)nroots_c[s-1].r+=nroots_c[s].r*nroots_a.r-nroots_c[s].i*nroots_a.i,nroots_c[s-1].i+=nroots_c[s].i*nroots_a.r+nroots_c[s].r*nroots_a.i;for(NROOTS_ABS(nroots_c[0])>NROOTS_DELTA&&stop("nroots: residual error"),c=[],s=a=0,u=t-1;0<=u?a<u:a>u;s=0<=u?++a:--a)nroots_c[s].r=nroots_c[s+1].r,c.push(nroots_c[s].i=nroots_c[s+1].i);return c},Eval_numerator=function(){return push(cadr(p1)),Eval(),numerator()},numerator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),numerator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_numerator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?push(one):push(n)},Eval_outer=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),outer(),t.push(p1=cdr(p1));return t},outer=function(){return save(),p2=pop(),p1=pop(),istensor(p1)&&istensor(p2)?yyouter():(push(p1),push(p2),istensor(p1)?tensor_times_scalar():istensor(p2)?scalar_times_tensor():multiply()),restore()},yyouter=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on;for(t=0,a=0,l=0,d=0,Ct=0,d=p1.tensor.ndim+p2.tensor.ndim,d>MAXDIM&&stop("outer: rank of result exceeds maximum"),Ct=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(Ct),p3.tensor.ndim=d,t=n=0,ar=p1.tensor.ndim;0<=ar?n<ar:n>ar;t=0<=ar?++n:--n)p3.tensor.dim[t]=p1.tensor.dim[t];for(a=t,t=s=0,en=p2.tensor.ndim;0<=en?s<en:s>en;t=0<=en?++s:--s)p3.tensor.dim[a+t]=p2.tensor.dim[t];for(l=0,t=u=0,tn=p1.tensor.nelem;0<=tn?u<tn:u>tn;t=0<=tn?++u:--u)for(a=c=0,on=p2.tensor.nelem;0<=on?c<on:c>on;a=0<=on?++c:--c)push(p1.tensor.elem[t]),push(p2.tensor.elem[a]),multiply(),p3.tensor.elem[l++]=pop();return push(p3)},partition=function(){for(save(),p2=pop(),p1=pop(),push_integer(1),p3=pop(),p4=p3,p1=cdr(p1);iscons(p1);)Find(car(p1),p2)?(push(p4),push(car(p1)),multiply(),p4=pop()):(push(p3),push(car(p1)),multiply(),p3=pop()),p1=cdr(p1);return push(p3),push(p4),restore()},Eval_silentpattern=function(){return Eval_pattern(),pop(),push_symbol(NIL)},Eval_pattern=function(){var t,n,a,s,l;return iscons(cdr(p1))||stop("pattern needs at least a template and a transformed version"),t=car(cdr(p1)),a=car(cdr(cdr(p1))),a===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),iscons(cdr(cdr(p1)))?l=car(cdr(cdr(cdr(p1)))):l=symbol(NIL),equal(t,a)&&stop("recursive pattern"),s="template: "+print_list(t),s+=" tests: "+print_list(l),DEBUG&&console.log("pattern stringkey: "+s),n=userSimplificationsInStringForm.indexOf(s),n===-1?(userSimplificationsInStringForm.push(s),userSimplificationsInListForm.push(cdr(p1))):(DEBUG&&console.log("pattern already exists, replacing. "+cdr(p1)),userSimplificationsInStringForm[n]=s,userSimplificationsInListForm[n]=cdr(p1)),push_symbol(PATTERN),push(cdr(p1)),list(2)},do_clearPatterns=function(){return userSimplificationsInListForm=[],userSimplificationsInStringForm=[]},Eval_clearpatterns=function(){return do_clearPatterns(),push_symbol(NIL)},Eval_patternsinfo=function(){var t;return t=patternsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},patternsinfo=function(){var t,n,a;for(a="",t=0,n=userSimplificationsInListForm.length;t<n;t++)userSimplificationsInListForm[t],a+=userSimplificationsInListForm+`
`;return a},Eval_polar=function(){return push(cadr(p1)),Eval(),polar()},polar=function(){return evaluatingPolar++,save(),p1=pop(),push(p1),abs(),push(imaginaryunit),push(p1),arg(),multiply(),exponential(),multiply(),evaluatingPolar--,restore()},n_factor_number=0,factor_number=function(){var t;if(t=0,save(),p1=pop(),equaln(p1,0)||equaln(p1,1)||equaln(p1,-1)){push(p1),restore();return}return n_factor_number=p1.q.a,t=tos,factor_a(),tos-t>1&&(list(tos-t),push_symbol(MULTIPLY),swap(),cons()),restore()},factor_a=function(){var t,n;for(n=0,n_factor_number.isNegative()&&(n_factor_number=setSignTo(n_factor_number,1),push_integer(-1)),n=t=0;t<1e4;n=++t)if(try_kth_prime(n),n_factor_number.compare(1)===0)return;return factor_b()},try_kth_prime=function(t){var n,a,s,l;for(n=0,a=mint(primetab[t]),n=0;;){if(n_factor_number.compare(1)===0){n&&push_factor(a,n);return}if([s,l]=mdivrem(n_factor_number,a),l.isZero())n++,n_factor_number=s;else break}if(n&&push_factor(a,n),mcmp(s,a)===-1)return push_factor(n_factor_number,1),n_factor_number=mint(1)},factor_b=function(){var t,n,a,s,l,u,c;for(a=0,s=0,t=mint(1),u=mint(5),c=mint(2),a=1,s=1;;){if(mprime(n_factor_number))return push_factor(n_factor_number,1),0;for(;;){if(esc_flag&&stop("esc"),l=msub(c,u),l=setSignTo(l,1),n=mgcd(l,n_factor_number),MEQUAL(n,1)){--a===0&&(c=u,s*=2,a=s),l=mmul(u,u),u=madd(l,t),l=mmod(u,n_factor_number),u=l;continue}if(push_factor(n,1),mcmp(n,n_factor_number)===0)return-1;l=mdiv(n_factor_number,n),n_factor_number=l,l=mmod(u,n_factor_number),u=l,l=mmod(c,n_factor_number),c=l;break}}},push_factor=function(t,n){if(p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=mint(1),push(p1),n>1)return push_symbol(POWER),swap(),p1=new U,p1.k=NUM,p1.q.a=mint(n),p1.q.b=mint(1),push(p1),list(3)},DEBUG_POWER=!1,Eval_power=function(){if(DEBUG_POWER)debugger;return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),power()},power=function(){return save(),yypower(),restore()},yypower=function(){var t,n,a,s,l,u,c;if(DEBUG_POWER)debugger;if(c=0,p2=pop(),p1=pop(),s=p2,a=p1,DEBUG_POWER&&console.log("POWER: "+p1+" ^ "+p2),equal(p1,one)||isZeroAtomOrTensor(p2)){evaluatingAsFloats?push_double(1):push(one),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(equal(p2,one)){push(p1),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusone(p2)){evaluatingAsFloats?push_double(1):push(one),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusoneovertwo(p2)){push(imaginaryunit),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&!isdouble(p1)&&isrational(p2)&&!isinteger(p2)&&ispositivenumber(p2)&&!evaluatingAsFloats){DEBUG_POWER&&console.log("   power: -1 ^ rational"),DEBUG_POWER&&console.log(" trick: p2.q.a , p2.q.b "+p2.q.a+" , "+p2.q.b),p2.q.a<p2.q.b?(push_symbol(POWER),push(p1),push(p2),list(3)):(push_symbol(MULTIPLY),push(p1),push_symbol(POWER),push(p1),push_rational(p2.q.a.mod(p2.q.b),p2.q.b),list(3),list(3),DEBUG_POWER&&console.log(" trick applied : "+stack[tos-1])),rect(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isrational(p1)&&isrational(p2)){DEBUG_POWER&&console.log("   power: isrational(p1) && isrational(p2)"),push(p1),push(p2),qpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isNumericAtom(p1)&&isNumericAtom(p2)){DEBUG_POWER&&console.log("   power: both base and exponent are either rational or double "),DEBUG_POWER&&console.log("POWER - isNumericAtom(p1) && isNumericAtom(p2)"),push(p1),push(p2),dpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(istensor(p1)){DEBUG_POWER&&console.log("   power: istensor(p1) "),power_tensor(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(car(p1)===symbol(ABS)&&iseveninteger(p2)&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))){DEBUG_POWER&&console.log("   power: even power of absolute of real value "),push(cadr(p1)),push(p2),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&car(p2)===symbol(LOG)){push(cadr(p2)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&isdouble(p2)){DEBUG_POWER&&console.log("   power: p1 == symbol(E) && isdouble(p2) "),push_double(Math.exp(p2.d)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&Find(p2,imaginaryunit)!==0&&Find(p2,symbol(PI))!==0&&!evaluatingPolar&&(push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER&&console.log("   power: turning complex exponential to rect: "+stack[tos-1]),rect(),n=pop(),Find(n,symbol(PI))===0)){DEBUG_POWER&&console.log("   power: turned complex exponential to rect: "+n),push(n);return}if(car(p1)===symbol(MULTIPLY)&&isinteger(p2)){for(DEBUG_POWER&&console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),p1=cdr(p1),push(car(p1)),push(p2),power(),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),power(),multiply(),p1=cdr(p1);DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(u=!1,isNumericAtom(cadr(p1))&&(u=sign(compare_numbers(cadr(p1),zero))),car(p1)===symbol(POWER)&&(isinteger(p2)||u)){push(cadr(p1)),push(caddr(p1)),push(p2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(t=!1,iseveninteger(caddr(p1))&&(push(caddr(p1)),push(p2),multiply(),l=pop(),isone(l)&&(t=!0)),car(p1)===symbol(POWER)&&t){DEBUG_POWER&&console.log("   power: car(p1) == symbol(POWER) && b_isEven_and_c_isItsInverse "),push(cadr(p1)),abs(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(expanding&&isadd(p1)&&isNumericAtom(p2)&&(push(p2),c=pop_integer(),c>1&&!isNaN(c))){DEBUG_POWER&&console.log("   power: expanding && isadd(p1) && isNumericAtom(p2) "),power_sum(c),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(trigmode===1&&car(p1)===symbol(SIN)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 1 && car(p1) == symbol(SIN) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),cosine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(trigmode===2&&car(p1)===symbol(COS)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 2 && car(p1) == symbol(COS) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),sine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(iscomplexnumber(p1)){if(DEBUG_POWER&&console.log(" power - handling the case (a + ib) ^ n"),isinteger(p2)){push(p1),conjugate(),p3=pop(),push(p3),push(p3),push(p1),multiply(),divide(),isone(p2)||(push(p2),negate(),power()),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isNumericAtom(p2)){push(p1),abs(),push(p2),power(),push_integer(-1),push(p1),arg(),push(p2),multiply(),evaluatingAsFloats||iscomplexnumberdouble(p1)&&isdouble(p2)?push_double(Math.PI):push(symbol(PI)),divide(),power(),multiply(),avoidCalculatingPowersIntoArctans&&Find(stack[tos-1],symbol(ARCTAN))&&(pop(),push_symbol(POWER),push(p1),push(p2),list(3)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}}if(simplify_polar()){DEBUG_POWER&&console.log("   power: using simplify_polar");return}if(DEBUG_POWER&&console.log("   power: nothing can be done "),push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER)return console.log("   power of "+a+" ^ "+s+": "+stack[tos-1])},power_sum=function(t){var n,a,s,l,u,c,d,Ct,ar,en;for(n=[],a=0,l=0,c=0,c=length(p1)-1,push_frame(c*(t+1)),p1=cdr(p1),a=s=0,Ct=c;0<=Ct?s<Ct:s>Ct;a=0<=Ct?++s:--s){for(l=u=0,ar=t;0<=ar?u<=ar:u>=ar;l=0<=ar?++u:--u)push(car(p1)),push_integer(l),power(),stack[frame+a*(t+1)+l]=pop();p1=cdr(p1)}for(push_integer(t),factorial(),p1=pop(),a=d=0,en=c;0<=en?d<en:d>en;a=0<=en?++d:--d)n[a]=0;return push(zero),multinomial_sum(c,t,n,0,t),pop_frame(c*(t+1))},multinomial_sum=function(t,n,a,s,l){var u,c,d,Ct,ar,en,tn;if(c=0,s<t-1){for(c=u=0,ar=l;0<=ar?u<=ar:u>=ar;c=0<=ar?++u:--u)a[s]=c,multinomial_sum(t,n,a,s+1,l-c);return}for(a[s]=l,push(p1),c=d=0,en=t;0<=en?d<en:d>en;c=0<=en?++d:--d)push_integer(a[c]),factorial(),divide();for(c=Ct=0,tn=t;0<=tn?Ct<tn:Ct>tn;c=0<=tn?++Ct:--Ct)push(stack[frame+c*(n+1)+a[c]]),multiply();return add()},simplify_polar=function(){var t;switch(t=0,t=isquarterturn(p2),t){case 0:break;case 1:return push_integer(1),1;case 2:return push_integer(-1),1;case 3:return push(imaginaryunit),1;case 4:return push(imaginaryunit),negate(),1}if(car(p2)===symbol(ADD)){for(p3=cdr(p2);iscons(p3)&&(t=isquarterturn(car(p3)),!t);)p3=cdr(p3);switch(t){case 0:return 0;case 1:push_integer(1);break;case 2:push_integer(-1);break;case 3:push(imaginaryunit);break;case 4:push(imaginaryunit),negate()}return push(p2),push(car(p3)),subtract(),exponential(),multiply(),1}return 0},Eval_prime=function(){return push(cadr(p1)),Eval(),prime()},prime=function(){var t;return t=0,t=pop_integer(),(t<1||t>MAXPRIMETAB)&&stop("prime: Argument out of range."),t=primetab[t-1],push_integer(t)},power_str="^",codeGen=!1,Eval_print=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),printMode),push(symbol(NIL))},Eval_print2dascii=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_2DASCII),push(symbol(NIL))},Eval_printcomputer=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_COMPUTER),push(symbol(NIL))},Eval_printlatex=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_LATEX),push(symbol(NIL))},Eval_printhuman=function(){var t;return t=test_flag,test_flag=0,stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_HUMAN),test_flag=t,push(symbol(NIL))},Eval_printlist=function(){var t;return t=_print(cdr(p1),PRINTMODE_LIST),stringsEmittedByUserPrintouts+=t,push(symbol(NIL))},_print=function(t,n){var a,s;for(a="";iscons(t);)push(car(t)),Eval(),p2=pop(),s=printMode,n===PRINTMODE_COMPUTER?(printMode=PRINTMODE_COMPUTER,a=printline(p2),rememberPrint(a,LAST_FULL_PRINT)):n===PRINTMODE_HUMAN?(printMode=PRINTMODE_HUMAN,a=printline(p2),rememberPrint(a,LAST_PLAIN_PRINT)):n===PRINTMODE_2DASCII?(printMode=PRINTMODE_2DASCII,a=print2dascii(p2),rememberPrint(a,LAST_2DASCII_PRINT)):n===PRINTMODE_LATEX?(printMode=PRINTMODE_LATEX,a=printline(p2),rememberPrint(a,LAST_LATEX_PRINT)):n===PRINTMODE_LIST&&(printMode=PRINTMODE_LIST,a=print_list(p2),rememberPrint(a,LAST_LIST_PRINT)),printMode=s,t=cdr(t);return DEBUG&&console.log("emttedString from display: "+stringsEmittedByUserPrintouts),a},rememberPrint=function(t,n){var a;return scan('"'+t+'"'),a=pop(),set_binding(symbol(n),a)},print_str=function(t){return DEBUG&&console.log("emttedString from print_str: "+stringsEmittedByUserPrintouts),t},print_char=function(t){return t},collectLatexStringFromReturnValue=function(t){var n,a,s;return n=printMode,printMode=PRINTMODE_LATEX,a=codeGen,codeGen=!1,s=print_expr(t),s=s.replace(/_/g,"\\_"),printMode=n,codeGen=a,DEBUG&&console.log("emttedString from collectLatexStringFromReturnValue: "+stringsEmittedByUserPrintouts),s},printline=function(t){var n;return n="",n+=print_expr(t),n},print_base_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||lessp(t,zero)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_expo_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_denom=function(t,n){var a;return a="",save(),p1=cadr(t),p2=caddr(t),isminusone(p2)?(a+=print_base_of_denom(p1),restore(),a):(n===1&&(a+=print_char("(")),push(p2),negate(),p2=pop(),a+=print_power(p1,p2),n===1&&(a+=print_char(")")),restore(),a)},print_a_over_b=function(t){var n,a,s;for(n="",flag=0,s=0,a=0,save(),s=0,a=0,p1=cdr(t),p2=car(p1),isrational(p2)?(push(p2),mp_numerator(),absval(),p3=pop(),push(p2),mp_denominator(),p4=pop(),isplusone(p3)||s++,isplusone(p4)||a++,p1=cdr(p1)):(p3=one,p4=one);iscons(p1);)p2=car(p1),is_denominator(p2)?a++:s++,p1=cdr(p1);if(printMode===PRINTMODE_LATEX&&(n+=print_str("\\frac{")),s===0)n+=print_char("1");else for(flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p3)||(n+=print_factor(p3),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)||(flag&&(n+=print_multiply_sign()),n+=print_factor(p2),flag=1),p1=cdr(p1);for(printMode===PRINTMODE_LATEX?n+=print_str("}{"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" / "):n+=print_str("/"),a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char("(")),flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p4)||(n+=print_factor(p4),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)&&(flag&&(n+=print_multiply_sign()),n+=print_denom(p2,a),flag=1),p1=cdr(p1);return a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char(")")),printMode===PRINTMODE_LATEX&&(n+=print_str("}")),restore(),n},print_expr=function(t){var n;if(n="",isadd(t))for(t=cdr(t),sign_of_term(car(t))==="-"&&(n+=print_str("-")),n+=print_term(car(t)),t=cdr(t);iscons(t);)sign_of_term(car(t))==="+"?printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" + "):n+=print_str("+"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" - "):n+=print_str("-"),n+=print_term(car(t)),t=cdr(t);else sign_of_term(t)==="-"&&(n+=print_str("-")),n+=print_term(t);return n},sign_of_term=function(t){var n;return n="",car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&lessp(cadr(t),zero)||isNumericAtom(t)&&lessp(t,zero)?n+="-":n+="+",n},print_term=function(t){var n,a,s,l,u;if(n="",car(t)===symbol(MULTIPLY)&&any_denominators(t))return n+=print_a_over_b(t),n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),isminusone(car(t))&&(t=cdr(t)),u=!1,isNumericAtom(car(t))&&(u=!0),s=!1,printMode===PRINTMODE_LATEX&&iscons(cdr(t))&&isNumberOneOverSomething(car(t))&&(s=!0,a=car(t).q.b.toString()),s?(l=n,n=""):n+=print_factor(car(t)),t=cdr(t);iscons(t);)printMode===PRINTMODE_LATEX&&u&&caar(t)===symbol(POWER)&&isNumericAtom(car(cdr(car(t))))&&(isfraction(car(cdr(cdr(car(t)))))||(n+=" \\cdot ")),n+=print_multiply_sign(),n+=print_factor(car(t),!1,!0),u=!1,isNumericAtom(car(t))&&(u=!0),t=cdr(t);s&&(n=l+"\\frac{"+n+"}{"+a+"}")}else n+=print_factor(t);return n},print_subexpr=function(t){var n;return n="",n+=print_char("("),n+=print_expr(t),n+=print_char(")"),n},print_factorial_function=function(t){var n;return n="",t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?n+=print_subexpr(t):n+=print_expr(t),n+=print_char("!"),n},print_ABS_latex=function(t){var n;return n="",n+=print_str("\\left |"),n+=print_expr(cadr(t)),n+=print_str(" \\right |"),n},print_BINOMIAL_latex=function(t){var n;return n="",n+=print_str("\\binom{"),n+=print_expr(cadr(t)),n+=print_str("}{"),n+=print_expr(caddr(t)),n+=print_str("} "),n},print_DOT_latex=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=print_str(" \\cdot "),n+=print_expr(caddr(t)),n},print_DOT_codegen=function(t){var n;return n="dot(",n+=print_expr(cadr(t)),n+=", ",n+=print_expr(caddr(t)),n+=")",n},print_SIN_codegen=function(t){var n;return n="Math.sin(",n+=print_expr(cadr(t)),n+=")",n},print_COS_codegen=function(t){var n;return n="Math.cos(",n+=print_expr(cadr(t)),n+=")",n},print_TAN_codegen=function(t){var n;return n="Math.tan(",n+=print_expr(cadr(t)),n+=")",n},print_ARCSIN_codegen=function(t){var n;return n="Math.asin(",n+=print_expr(cadr(t)),n+=")",n},print_ARCCOS_codegen=function(t){var n;return n="Math.acos(",n+=print_expr(cadr(t)),n+=")",n},print_ARCTAN_codegen=function(t){var n;return n="Math.atan(",n+=print_expr(cadr(t)),n+=")",n},print_SQRT_latex=function(t){var n;return n="",n+=print_str("\\sqrt{"),n+=print_expr(cadr(t)),n+=print_str("} "),n},print_TRANSPOSE_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^T"),n},print_TRANSPOSE_codegen=function(t){var n;return n="",n+=print_str("transpose("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_UNIT_codegen=function(t){var n;return n="",n+=print_str("identity("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_INV_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^{-1}"),n},print_INV_codegen=function(t){var n;return n="",n+=print_str("inv("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_DEFINT_latex=function(t){var n,a,s,l,u,c,d,Ct,ar;for(n="",a=car(cdr(t)),t=cdr(t),c=t,u=0;iscons(cdr(cdr(t)));)u++,Ct=cdr(cdr(t)),n+=print_str("\\int^{"),n+=print_expr(car(cdr(Ct))),n+=print_str("}_{"),n+=print_expr(car(Ct)),n+=print_str("} \\! "),t=cdr(Ct);for(n+=print_expr(a),n+=print_str(" \\,"),t=c,s=l=1,d=u;1<=d?l<=d:l>=d;s=1<=d?++l:--l)ar=cdr(t),n+=print_str(" \\mathrm{d} "),n+=print_expr(car(ar)),s<u&&(n+=print_str(" \\, ")),t=cdr(cdr(ar));return n},print_tensor=function(t){var n;return n="",n+=print_tensor_inner(t,0,0)[1],n},print_tensor_inner=function(t,n,a){var s,l,u,c,d,Ct,ar;if(s="",s+=print_str("["),n<t.tensor.ndim-1)for(l=u=0,d=t.tensor.dim[n];0<=d?u<d:u>d;l=0<=d?++u:--u)[a,ar]=print_tensor_inner(t,n+1,a),s+=ar,l!==t.tensor.dim[n]-1&&(s+=print_str(","));else for(l=c=0,Ct=t.tensor.dim[n];0<=Ct?c<Ct:c>Ct;l=0<=Ct?++c:--c)s+=print_expr(t.tensor.elem[a]),l!==t.tensor.dim[n]-1&&(s+=print_str(",")),a++;return s+=print_str("]"),[a,s]},print_tensor_latex=function(t){var n;return n="",t.tensor.ndim<=2&&(n+=print_tensor_inner_latex(!0,t,0,0)[1]),n},print_tensor_inner_latex=function(t,n,a,s){var l,u,c,d,Ct,ar,en;if(l="",t&&(l+="\\begin{bmatrix} "),a<n.tensor.ndim-1)for(u=c=0,Ct=n.tensor.dim[a];0<=Ct?c<Ct:c>Ct;u=0<=Ct?++c:--c)[s,en]=print_tensor_inner_latex(0,n,a+1,s),l+=en,u!==n.tensor.dim[a]-1&&(l+=print_str(" \\\\ "));else for(u=d=0,ar=n.tensor.dim[a];0<=ar?d<ar:d>ar;u=0<=ar?++d:--d)l+=print_expr(n.tensor.elem[s]),u!==n.tensor.dim[a]-1&&(l+=print_str(" & ")),s++;return t&&(l+=" \\end{bmatrix}"),[s,l]},print_SUM_latex=function(t){var n;return n="\\sum_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_SUM_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var holderSum = 0;  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    holderSum += "+print_expr(a)+"; }  return holderSum;})()",n},print_TEST_latex=function(t){var n;for(n="\\left\\{ \\begin{array}{ll}",t=cdr(t);iscons(t);){if(cdr(t)===symbol(NIL)){n+="{",n+=print_expr(car(t)),n+="} & otherwise ",n+=" \\\\\\\\";break}n+="{",n+=print_expr(cadr(t)),n+="} & if & ",n+=print_expr(car(t)),n+=" \\\\\\\\",t=cddr(t)}return n=n.substring(0,n.length-4),n+="\\end{array} \\right."},print_TEST_codegen=function(t){var n,a;for(n="(function(){",t=cdr(t),a=0;iscons(t);){if(cdr(t)===symbol(NIL)){n+="else {",n+="return ("+print_expr(car(t))+");",n+="}";break}a&&(n+=" else "),n+="if ("+print_expr(car(t))+"){",n+="return ("+print_expr(cadr(t))+");",n+="}",a++,t=cddr(t)}return n+="})()",n},print_TESTLT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" < ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTLE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\leq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" > ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\geq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTEQ_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" = ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_FOR_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    "+print_expr(a)+" } })()",n},print_DO_codegen=function(t){var n;for(n="",t=cdr(t);iscons(t);)n+=print_expr(car(t)),t=cdr(t);return n},print_SETQ_codegen=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=" = ",n+=print_expr(caddr(t)),n+="; ",n},print_PRODUCT_latex=function(t){var n;return n="\\prod_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_PRODUCT_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var holderProduct = 1;  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    holderProduct *= "+print_expr(a)+"; }  return holderProduct;})()",n},print_power=function(t,n){var a,s,l,u;if(a="",DEBUG&&console.log("power base: "+t+"  exponent: "+n),isoneovertwo(n))if(equaln(t,2)){if(codeGen)return a+=print_str("Math.SQRT2"),a}else{if(printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt{"),a+=print_expr(t),a+=print_str("}"),a;if(codeGen)return a+=print_str("Math.sqrt("),a+=print_expr(t),a+=print_str(")"),a}if(equaln(get_binding(symbol(PRINT_LEAVE_E_ALONE)),1)&&t===symbol(E))return codeGen?(a+=print_str("Math.exp("),a+=print_expo_of_denom(n),a+=print_str(")"),a):(printMode===PRINTMODE_LATEX?(a+=print_str("e^{"),a+=print_expr(n),a+=print_str("}")):(a+=print_str("exp("),a+=print_expr(n),a+=print_str(")")),a);if(codeGen)return a+=print_str("Math.pow("),a+=print_base_of_denom(t),a+=print_str(", "),a+=print_expo_of_denom(n),a+=print_str(")"),a;if(equaln(get_binding(symbol(PRINT_LEAVE_X_ALONE)),0)||t.printname!=="x"){if(t!==symbol(E)){if(isminusone(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):a+=print_expr(t),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a;if(isnegativeterm(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),push(n),push_integer(-1),multiply(),l=pop(),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_power(t,l),a+=print_str(")")):a+=print_power(t,l),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a}if(isfraction(n)&&printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt"),push(n),denominator(),s=pop(),isplustwo(s)||(a+=print_str("["),a+=print_expr(s),a+=print_str("]")),a+=print_str("{"),push(n),numerator(),u=pop(),n=u,a+=print_power(t,n),a+=print_str("}"),a}return printMode===PRINTMODE_LATEX&&isplusone(n)?a+=print_expr(t):(isadd(t)||isnegativenumber(t)?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(printMode!==PRINTMODE_LATEX&&(a+=print_str("(")),a+=print_factor(t,!0),printMode!==PRINTMODE_LATEX&&(a+=print_str(")"))):isNumericAtom(t)&&(lessp(t,zero)||isfraction(t))?(a+=print_str("("),a+=print_factor(t),a+=print_str(")")):a+=print_factor(t),printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str(power_str):a+=print_str("^"),printMode===PRINTMODE_LATEX?print_expr(n).length>1?(a+=print_str("{"),a+=print_expr(n),a+=print_str("}")):a+=print_expr(n):iscons(n)||isfraction(n)||isNumericAtom(n)&&lessp(n,zero)?(a+=print_str("("),a+=print_expr(n),a+=print_str(")")):a+=print_factor(n)),a},print_index_function=function(t){var n;if(n="",t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?n+=print_subexpr(car(t)):n+=print_expr(car(t)),n+=print_str("["),t=cdr(t),iscons(t))for(n+=print_expr(car(t)),t=cdr(t);iscons(t);)n+=print_str(","),n+=print_expr(car(t)),t=cdr(t);return n+=print_str("]"),n},print_factor=function(t,n,a){var s,l,u,c,d,Ct;if(s="",isNumericAtom(t))return a&&lessp(t,zero)&&(s+="("),s+=print_number(t,a),a&&lessp(t,zero)&&(s+=")"),s;if(isstr(t))return s+=print_str('"'),s+=print_str(t.str),s+=print_str('"'),s;if(istensor(t))return printMode===PRINTMODE_LATEX?s+=print_tensor_latex(t):s+=print_tensor(t),s;if(car(t)===symbol(MULTIPLY))return n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?s+=print_str(" \\left ("):s+=print_str("(")),s+=print_expr(t),n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?s+=print_str(" \\right ) "):s+=print_str(")")),s;if(isadd(t))return n||(s+=print_str("(")),s+=print_expr(t),n||(s+=print_str(")")),s;if(car(t)===symbol(POWER))return l=cadr(t),u=caddr(t),s+=print_power(l,u),s;if(car(t)===symbol(FUNCTION))return c=cadr(t),codeGen||(d=caddr(t),s+=print_str("function "),DEBUG&&console.log("emittedString from print_factor "+stringsEmittedByUserPrintouts),Ct=print_list(d),s+=Ct,s+=print_str(" -> ")),s+=print_expr(c),s;if(car(t)===symbol(PATTERN))return s+=print_expr(caadr(t)),printMode===PRINTMODE_LATEX?s+=print_str(" \\rightarrow "):printMode===PRINTMODE_HUMAN&&!test_flag?s+=print_str(" -> "):s+=print_str("->"),s+=print_expr(car(cdr(cadr(t)))),s;if(car(t)===symbol(INDEX)&&issymbol(cadr(t)))return s+=print_index_function(t),s;if(car(t)===symbol(FACTORIAL))return s+=print_factorial_function(t),s;if(car(t)===symbol(ABS)&&printMode===PRINTMODE_LATEX)return s+=print_ABS_latex(t),s;if(car(t)===symbol(SQRT)&&printMode===PRINTMODE_LATEX)return s+=print_SQRT_latex(t),s;if(car(t)===symbol(TRANSPOSE)){if(printMode===PRINTMODE_LATEX)return s+=print_TRANSPOSE_latex(t),s;if(codeGen)return s+=print_TRANSPOSE_codegen(t),s}else if(car(t)===symbol(UNIT)){if(codeGen)return s+=print_UNIT_codegen(t),s}else if(car(t)===symbol(INV)){if(printMode===PRINTMODE_LATEX)return s+=print_INV_latex(t),s;if(codeGen)return s+=print_INV_codegen(t),s}else{if(car(t)===symbol(BINOMIAL)&&printMode===PRINTMODE_LATEX)return s+=print_BINOMIAL_latex(t),s;if(car(t)===symbol(DEFINT)&&printMode===PRINTMODE_LATEX)return s+=print_DEFINT_latex(t),s;if(isinnerordot(t)){if(printMode===PRINTMODE_LATEX)return s+=print_DOT_latex(t),s;if(codeGen)return s+=print_DOT_codegen(t),s}else if(car(t)===symbol(SIN)){if(codeGen)return s+=print_SIN_codegen(t),s}else if(car(t)===symbol(COS)){if(codeGen)return s+=print_COS_codegen(t),s}else if(car(t)===symbol(TAN)){if(codeGen)return s+=print_TAN_codegen(t),s}else if(car(t)===symbol(ARCSIN)){if(codeGen)return s+=print_ARCSIN_codegen(t),s}else if(car(t)===symbol(ARCCOS)){if(codeGen)return s+=print_ARCCOS_codegen(t),s}else if(car(t)===symbol(ARCTAN)){if(codeGen)return s+=print_ARCTAN_codegen(t),s}else if(car(t)===symbol(SUM)){if(printMode===PRINTMODE_LATEX)return s+=print_SUM_latex(t),s;if(codeGen)return s+=print_SUM_codegen(t),s}else if(car(t)===symbol(PRODUCT)){if(printMode===PRINTMODE_LATEX)return s+=print_PRODUCT_latex(t),s;if(codeGen)return s+=print_PRODUCT_codegen(t),s}else if(car(t)===symbol(FOR)){if(codeGen)return s+=print_FOR_codegen(t),s}else if(car(t)===symbol(DO)){if(codeGen)return s+=print_DO_codegen(t),s}else if(car(t)===symbol(TEST)){if(codeGen)return s+=print_TEST_codegen(t),s;if(printMode===PRINTMODE_LATEX)return s+=print_TEST_latex(t),s}else if(car(t)===symbol(TESTLT)){if(codeGen)return s+="(("+print_expr(cadr(t))+") < ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTLT_latex(t),s}else if(car(t)===symbol(TESTLE)){if(codeGen)return s+="(("+print_expr(cadr(t))+") <= ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTLE_latex(t),s}else if(car(t)===symbol(TESTGT)){if(codeGen)return s+="(("+print_expr(cadr(t))+") > ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTGT_latex(t),s}else if(car(t)===symbol(TESTGE)){if(codeGen)return s+="(("+print_expr(cadr(t))+") >= ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTGE_latex(t),s}else if(car(t)===symbol(TESTEQ)){if(codeGen)return s+="(("+print_expr(cadr(t))+") === ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTEQ_latex(t),s}else if(car(t)===symbol(FLOOR)){if(codeGen)return s+="Math.floor("+print_expr(cadr(t))+")",s;if(printMode===PRINTMODE_LATEX)return s+=" \\lfloor {"+print_expr(cadr(t))+"} \\rfloor ",s}else if(car(t)===symbol(CEILING)){if(codeGen)return s+="Math.ceiling("+print_expr(cadr(t))+")",s;if(printMode===PRINTMODE_LATEX)return s+=" \\lceil {"+print_expr(cadr(t))+"} \\rceil ",s}else if(car(t)===symbol(ROUND)){if(codeGen)return s+="Math.round("+print_expr(cadr(t))+")",s}else if(car(t)===symbol(SETQ))return codeGen?(s+=print_SETQ_codegen(t),s):(s+=print_expr(cadr(t)),s+=print_str("="),s+=print_expr(caddr(t)),s)}if(iscons(t)){if(s+=print_factor(car(t)),t=cdr(t),n||(s+=print_str("(")),iscons(t))for(s+=print_expr(car(t)),t=cdr(t);iscons(t);)s+=print_str(","),s+=print_expr(car(t)),t=cdr(t);return n||(s+=print_str(")")),s}return t===symbol(DERIVATIVE)?s+=print_char("d"):t===symbol(E)?codeGen?s+=print_str("Math.E"):s+=print_str("e"):t===symbol(PI)?printMode===PRINTMODE_LATEX?s+=print_str("\\pi"):s+=print_str("pi"):s+=print_str(get_printname(t)),s},print_list=function(t){var n;switch(n="",t.k){case CONS:if(n+="(",n+=print_list(car(t)),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}for(t=cdr(t);iscons(t);)if(n+=" ",n+=print_list(car(t)),t=cdr(t),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}t!==symbol(NIL)&&(n+=" . ",n+=print_list(t)),n+=")";break;case STR:n+=t.str;break;case NUM:case DOUBLE:n+=print_number(t,!0);break;case SYM:n+=get_printname(t);break;default:n+="<tensor>"}return n},print_multiply_sign=function(){var t;if(t="",printMode===PRINTMODE_LATEX)if(printMode===PRINTMODE_HUMAN&&!test_flag)t+=print_str(" ");else return t;return printMode===PRINTMODE_HUMAN&&!test_flag&&!codeGen?t+=print_str(" "):t+=print_str("*"),t},is_denominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&isnegativeterm(caddr(t))?1:0},any_denominators=function(t){var n;for(t=cdr(t);iscons(t);){if(n=car(t),is_denominator(n))return 1;t=cdr(t)}return 0},YMAX=1e4,glyph=(function(){class t{}return t.prototype.c=0,t.prototype.x=0,t.prototype.y=0,t}).call(this),chartab=[],charTabIndex=i1=0,ref1=YMAX;0<=ref1?i1<ref1:i1>ref1;charTabIndex=0<=ref1?++i1:--i1)chartab[charTabIndex]=new glyph;for(yindex=0,level=0,emit_x=0,expr_level=0,printchar_nowrap=function(t){var n;return n="",n+=t,n},printchar=function(t){return printchar_nowrap(t)},print2dascii=function(t){var n,a,s,l;if(a=0,s=0,l=0,save(),yindex=0,level=0,emit_x=0,emit_top_expr(t),[a,s,l]=get_size(0,yindex),s>100){printline(t),restore();return}return n=print_glyphs(),restore(),n},emit_top_expr=function(t){if(car(t)===symbol(SETQ)){emit_expr(cadr(t)),__emit_str(" = "),emit_expr(caddr(t));return}return istensor(t)?emit_tensor(t):emit_expr(t)},will_be_displayed_as_fraction=function(t){if(level>0)return 0;if(isfraction(t))return 1;if(car(t)!==symbol(MULTIPLY))return 0;if(isfraction(cadr(t)))return 1;for(;iscons(t);){if(isdenominator(car(t)))return 1;t=cdr(t)}return 0},emit_expr=function(t){if(expr_level++,car(t)===symbol(ADD))for(t=cdr(t),__is_negative(car(t))&&(__emit_char("-"),will_be_displayed_as_fraction(car(t))&&__emit_char(" ")),emit_term(car(t)),t=cdr(t);iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),t=cdr(t);else __is_negative(t)&&(__emit_char("-"),will_be_displayed_as_fraction(t)&&__emit_char(" ")),emit_term(t);return expr_level--},emit_unsigned_expr=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),emit_term(car(t)),t=cdr(t),n=[];iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),n.push(t=cdr(t));return n}else return emit_term(t)},__is_negative=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},emit_term=function(t){var n;return car(t)===symbol(MULTIPLY)?(n=count_denominators(t),n&&level===0?emit_fraction(t,n):emit_multiply(t,n)):emit_factor(t)},isdenominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&__is_negative(caddr(t))?1:0},count_denominators=function(t){var n,a;for(n=0,t=cdr(t);iscons(t);)a=car(t),isdenominator(a)&&n++,t=cdr(t);return n},emit_multiply=function(t,n){var a;if(n===0){for(t=cdr(t),(isplusone(car(t))||isminusone(car(t)))&&(t=cdr(t)),emit_factor(car(t)),t=cdr(t),a=[];iscons(t);)__emit_char(" "),emit_factor(car(t)),a.push(t=cdr(t));return a}else return emit_numerators(t),__emit_char("/"),n>1||isfraction(cadr(t))?(__emit_char("("),emit_denominators(t),__emit_char(")")):emit_denominators(t)},emit_fraction=function(t,n){var a,s,l,u,c;for(a=0,s=0,l=0,u=0,c=0,save(),p3=one,p4=one,isrational(cadr(t))&&(push(cadr(t)),mp_numerator(),absval(),p3=pop(),push(cadr(t)),mp_denominator(),p4=pop()),isdouble(cadr(t))&&(push(cadr(t)),absval(),p3=pop()),isplusone(p3)?u=0:u=1,p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||u++,p1=cdr(p1);for(c=emit_x,s=yindex,a=0,isplusone(p3)||(emit_number(p3,0),a++),p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||(a>0&&__emit_char(" "),u===1?emit_expr(p2):emit_factor(p2),a++),p1=cdr(p1);for(a===0&&__emit_char("1"),l=yindex,a=0,isplusone(p4)||(emit_number(p4,0),a++,n++),p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)&&(a>0&&__emit_char(" "),emit_denominator(p2,n),a++),p1=cdr(p1);return fixup_fraction(c,s,l),restore()},emit_numerators=function(t){var n;for(save(),n=0,p1=one,t=cdr(t),isrational(car(t))?(push(car(t)),mp_numerator(),absval(),p1=pop(),t=cdr(t)):isdouble(car(t))&&(push(car(t)),absval(),p1=pop(),t=cdr(t)),n=0,isplusone(p1)||(emit_number(p1,0),n++);iscons(t);)isdenominator(car(t))||(n>0&&__emit_char(" "),emit_factor(car(t)),n++),t=cdr(t);return n===0&&__emit_char("1"),restore()},emit_denominators=function(t){var n;for(save(),n=0,t=cdr(t),isfraction(car(t))&&(push(car(t)),mp_denominator(),p1=pop(),emit_number(p1,0),n++,t=cdr(t));iscons(t);)isdenominator(car(t))&&(n>0&&__emit_char(" "),emit_denominator(car(t),0),n++),t=cdr(t);return restore()},emit_factor=function(t){if(istensor(t)){emit_flat_tensor(t);return}if(isdouble(t)){emit_number(t,0);return}if(car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)){emit_subexpr(t);return}if(car(t)===symbol(POWER)){emit_power(t);return}if(iscons(t)){emit_function(t);return}if(isNumericAtom(t)){level===0?emit_numerical_fraction(t):emit_number(t,0);return}if(issymbol(t)){emit_symbol(t);return}isstr(t)&&emit_string(t)},emit_numerical_fraction=function(t){var n,a,s;if(n=0,a=0,s=0,save(),push(t),mp_numerator(),absval(),p3=pop(),push(t),mp_denominator(),p4=pop(),isplusone(p4)){emit_number(p3,0),restore();return}return s=emit_x,n=yindex,emit_number(p3,0),a=yindex,emit_number(p4,0),fixup_fraction(s,n,a),restore()},isfactor=function(t){return iscons(t)&&car(t)!==symbol(ADD)&&car(t)!==symbol(MULTIPLY)&&car(t)!==symbol(POWER)||issymbol(t)?1:isfraction(t)||isnegativenumber(t)?0:isNumericAtom(t)?1:0},emit_power=function(t){var n,a,s;if(n=0,a=0,s=0,cadr(t)===symbol(E)){__emit_str("exp("),emit_expr(caddr(t)),__emit_char(")");return}if(level>0){isminusone(caddr(t))?(__emit_char("1"),__emit_char("/"),isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t))):(isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),__emit_char("^"),isfactor(caddr(t))?emit_factor(caddr(t)):emit_subexpr(caddr(t)));return}if(__is_negative(caddr(t))){s=emit_x,n=yindex,__emit_char("1"),a=yindex,emit_denominator(t,1),fixup_fraction(s,n,a);return}return n=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),a=yindex,level++,emit_expr(caddr(t)),level--,fixup_power(n,a)},emit_denominator=function(t,n){var a,s;if(a=0,s=0,isminusone(caddr(t))){n===1?emit_expr(cadr(t)):emit_factor(cadr(t));return}return a=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),s=yindex,level++,emit_unsigned_expr(caddr(t)),level--,fixup_power(a,s)},emit_function=function(t){if(car(t)===symbol(INDEX)&&issymbol(cadr(t))){emit_index_function(t);return}if(car(t)===symbol(FACTORIAL)){emit_factorial_function(t);return}if(car(t)===symbol(DERIVATIVE)?__emit_char("d"):emit_symbol(car(t)),__emit_char("("),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char(")")},emit_index_function=function(t){if(t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?emit_subexpr(car(t)):emit_expr(car(t)),__emit_char("["),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char("]")},emit_factorial_function=function(t){return t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?emit_subexpr(t):emit_expr(t),__emit_char("!")},emit_subexpr=function(t){return __emit_char("("),emit_expr(t),__emit_char(")")},emit_symbol=function(t){var n,a,s,l,u;if(n=0,t===symbol(E)){__emit_str("exp(1)");return}for(s=get_printname(t),u=[],n=a=0,l=s.length;0<=l?a<l:a>l;n=0<=l?++a:--a)u.push(__emit_char(s[n]));return u},emit_string=function(t){var n,a,s,l;for(n=0,s=t.str,__emit_char('"'),n=a=0,l=s.length;0<=l?a<l:a>l;n=0<=l?++a:--a)__emit_char(s[n]);return __emit_char('"')},fixup_fraction=function(t,n,a){var s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;for(s=0,l=0,en=0,fn=0,u=0,tn=0,dn=0,c=0,on=0,Cn=0,[u,tn,dn]=get_size(n,a),[c,on,Cn]=get_size(a,yindex),on>tn?s=(on-tn)/2:s=0,s++,fn=dn+u-1,l=-fn-1,move(n,a,s,l),on>tn?s=-tn:s=-tn+(tn-on)/2,s++,l=-Cn+1,move(a,yindex,s,l),on>tn?en=on:en=tn,en+=2,emit_x=t,ar=[],d=0,Ct=en;0<=Ct?d<Ct:d>Ct;0<=Ct?++d:--d)ar.push(__emit_char("-"));return ar},fixup_power=function(t,n){var a,s,l,u,c,d,Ct;return a=0,s=0,u=0,d=0,l=0,c=0,Ct=0,[s,u,d]=get_size(t,n),[l,c,Ct]=get_size(n,yindex),a=-Ct-l+1,a+=d-1,move(n,yindex,0,a)},move=function(t,n,a,s){var l,u,c,d,Ct;for(l=0,Ct=[],l=u=c=t,d=n;c<=d?u<d:u>d;l=c<=d?++u:--u)chartab[l].x+=a,Ct.push(chartab[l].y+=s);return Ct},get_size=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on;for(s=0,d=chartab[t].x,u=chartab[t].x,Ct=chartab[t].y,c=chartab[t].y,s=l=ar=t+1,en=n;ar<=en?l<en:l>en;s=ar<=en?++l:--l)chartab[s].x<d&&(d=chartab[s].x),chartab[s].x>u&&(u=chartab[s].x),chartab[s].y<Ct&&(Ct=chartab[s].y),chartab[s].y>c&&(c=chartab[s].y);return a=c-Ct+1,tn=u-d+1,on=Ct,[a,tn,on]},__emit_char=function(t){if(yindex!==YMAX){if(chartab[yindex]==null)debugger;return chartab[yindex].c=t,chartab[yindex].x=emit_x,chartab[yindex].y=0,yindex++,emit_x++}},__emit_str=function(t){var n,a,s,l;for(n=0,l=[],n=a=0,s=t.length;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(__emit_char(t[n]));return l},emit_number=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn;switch(tn="",a=0,t.k){case NUM:for(tn=t.q.a.toString(),tn[0]==="-"&&n===0&&(tn=tn.substring(1)),a=s=0,c=tn.length;0<=c?s<c:s>c;a=0<=c?++s:--s)__emit_char(tn[a]);if(tn=t.q.b.toString(),tn==="1")break;for(__emit_char("/"),ar=[],a=l=0,d=tn.length;0<=d?l<d:l>d;a=0<=d?++l:--l)ar.push(__emit_char(tn[a]));return ar;case DOUBLE:for(tn=doubleToReasonableString(t.d),tn[0]==="-"&&n===0&&(tn=tn.substring(1)),en=[],a=u=0,Ct=tn.length;0<=Ct?u<Ct:u>Ct;a=0<=Ct?++u:--u)en.push(__emit_char(tn[a]));return en}},cmpGlyphs=function(t,n){return t.y<n.y?-1:t.y>n.y?1:t.x<n.x?-1:t.x>n.x?1:0},print_glyphs=function(){var t,n,a,s,l,u,c;for(n=0,t="",l=chartab.slice(0,yindex),l.sort(cmpGlyphs),chartab=[].concat(l).concat(chartab.slice(yindex)),u=0,c=chartab[0].y,n=a=0,s=yindex;0<=s?a<s:a>s;n=0<=s?++a:--a){for(;chartab[n].y>c;)t+=printchar(`
`),u=0,c++;for(;chartab[n].x>u;)t+=printchar_nowrap(" "),u++;t+=printchar_nowrap(chartab[n].c),u++}return t},N=100,oneElement=(function(){class t{}return t.prototype.x=0,t.prototype.y=0,t.prototype.h=0,t.prototype.w=0,t.prototype.index=0,t.prototype.count=0,t}).call(this),elem=[],elelmIndex=j1=0;j1<1e4;elelmIndex=++j1)elem[elelmIndex]=new oneElement;SPACE_BETWEEN_COLUMNS=3,SPACE_BETWEEN_ROWS=1,emit_tensor=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx;if(d=0,en=0,fn=0,on=0,cx=0,fx=0,c=0,lx=0,a=0,s=0,l=0,u=0,sx=0,n=0,t.tensor.ndim>2){emit_flat_tensor(t);return}if(fn=t.tensor.dim[0],t.tensor.ndim===2?on=t.tensor.dim[1]:on=1,en=fn*on,en>N){emit_flat_tensor(t);return}for(cx=emit_x,d=Ct=0,Cn=en;0<=Cn?Ct<Cn:Ct>Cn;d=0<=Cn?++Ct:--Ct)elem[d].index=yindex,elem[d].x=emit_x,emit_expr(t.tensor.elem[d]),elem[d].count=yindex-elem[d].index,[elem[d].h,elem[d].w,elem[d].y]=get_size(elem[d].index,yindex);for(l=0,u=0,d=ar=0,Rn=en;0<=Rn?ar<Rn:ar>Rn;d=0<=Rn?++ar:--ar)elem[d].h>l&&(l=elem[d].h),elem[d].w>u&&(u=elem[d].w);for(c=fn*l+(fn-1)*SPACE_BETWEEN_ROWS,lx=on*u+(on-1)*SPACE_BETWEEN_COLUMNS,fx=-(c/2),sx=tn=0,ax=fn;0<=ax?tn<ax:tn>ax;sx=0<=ax?++tn:--tn)for(n=dn=0,ox=on;0<=ox?dn<ox:dn>ox;n=0<=ox?++dn:--dn)d=sx*on+n,a=cx-elem[d].x,s=fx-elem[d].y,move(elem[d].index,elem[d].index+elem[d].count,a,s),a=0,n>0&&(a=n*(u+SPACE_BETWEEN_COLUMNS)),s=0,sx>0&&(s=sx*(l+SPACE_BETWEEN_ROWS)),a+=(u-elem[d].w)/2,s+=(l-elem[d].h)/2,move(elem[d].index,elem[d].index+elem[d].count,a,s);return emit_x=cx+lx},emit_flat_tensor=function(t){return emit_tensor_inner(t,0,0)},emit_tensor_inner=function(t,n,a){var s,l,u;for(s=0,__emit_char("("),s=l=0,u=t.tensor.dim[n];0<=u?l<u:l>u;s=0<=u?++l:--l)n+1===t.tensor.ndim?(emit_expr(t.tensor.elem[a]),a=a+1):a=emit_tensor_inner(t,n+1,a),s+1<t.tensor.dim[n]&&__emit_char(",");return __emit_char(")"),a},Eval_product=function(){var t,n,a,s,l,u,c,d,Ct;if(n=0,s=0,l=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),s=pop_integer(),isNaN(s)){push(p1);return}if(push(caddddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}for(c=get_binding(a),push_integer(1),n=u=d=s,Ct=l;d<=Ct?u<=Ct:u>=Ct;n=d<=Ct?++u:--u)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),DEBUG&&(console.log("product - factor 1: "+stack[tos-1].toString()),console.log("product - factor 2: "+stack[tos-2].toString())),multiply(),DEBUG&&console.log("product - result: "+stack[tos-1].toString());return set_binding(a,c)},qadd=function(){var t,n,a,s,l,u,c,d;if(u=pop(),l=pop(),n=mmul(l.q.a,u.q.b),a=mmul(l.q.b,u.q.a),c=madd(n,a),MZERO(c)){push(zero);return}return s=mmul(l.q.b,u.q.b),t=mgcd(c,s),t=makeSignSameAs(t,s),d=new U,d.k=NUM,d.q.a=mdiv(c,t),d.q.b=mdiv(s,t),push(d)},qdiv=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p2.q.a)&&stop("divide by zero"),MZERO(p1.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.b),n=mmul(p1.q.b,p2.q.a),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qmul=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p1.q.a)||MZERO(p2.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.a),n=mmul(p1.q.b,p2.q.b),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qpow=function(){return save(),qpowf(),restore()},qpowf=function(){var t,n,a,s,l,u;if(a=0,p2=pop(),p1=pop(),isplusone(p1)||isZeroAtomOrTensor(p2)){push_integer(1);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit);return}if(isZeroAtomOrTensor(p1)){isnegativenumber(p2)&&stop("divide by zero"),push(zero);return}if(isplusone(p2)){push(p1);return}if(isinteger(p2)){if(push(p2),a=pop_integer(),isNaN(a)){push_symbol(POWER),push(p1),push(p2),list(3);return}l=mpow(p1.q.a,Math.abs(a)),u=mpow(p1.q.b,Math.abs(a)),a<0&&(s=l,l=u,u=s,l=makeSignSameAs(l,u),u=makePositive(u)),p3=new U,p3.k=NUM,p3.q.a=l,p3.q.b=u,push(p3);return}if(isminusone(p1)){push(p2),normalize_angle();return}if(isnegativenumber(p1)){push(p1),negate(),push(p2),qpow(),push_integer(-1),push(p2),qpow(),multiply();return}if(!isinteger(p1)){push(p1),mp_numerator(),push(p2),qpow(),push(p1),mp_denominator(),push(p2),negate(),qpow(),multiply();return}if(is_small_integer(p1)){push(p1),push(p2),quickfactor();return}if(!isSmall(p2.q.a)||!isSmall(p2.q.b)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(t=p2.q.a,n=p2.q.b,l=mroot(p1.q.a,n),l===0){push_symbol(POWER),push(p1),push(p2),list(3);return}return u=mpow(l,t),p3=new U,p3.k=NUM,p2.q.a.isNegative()?(p3.q.a=bigInt(1),p3.q.b=u):(p3.q.a=u,p3.q.b=bigInt(1)),push(p3)},normalize_angle=function(){if(save(),p1=pop(),isinteger(p1)){p1.q.a.isOdd()?push_integer(-1):push_integer(1),restore();return}return push(p1),bignum_truncate(),p2=pop(),isnegativenumber(p1)&&(push(p2),push_integer(-1),add(),p2=pop()),push(p1),push(p2),subtract(),p3=pop(),push_symbol(POWER),push_integer(-1),push(p3),list(3),p2.q.a.isOdd()&&negate(),restore()},is_small_integer=function(t){return isSmall(t.q.a)},quickfactor=function(){var t,n,a,s,l,u;for(n=0,save(),p2=pop(),p1=pop(),t=tos,push(p1),factor_small_number(),s=tos-t,u=t,n=a=0,l=s;a<l;n=a+=2)push(stack[u+n]),push(stack[u+n+1]),push(p2),multiply(),quickpower();return multiply_all(tos-t-s),p1=pop(),moveTos(t),push(p1),restore()},quickpower=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),push(p2),bignum_truncate(),p3=pop(),push(p2),push(p3),subtract(),p4=pop(),isZeroAtomOrTensor(p4)||(push_symbol(POWER),push(p1),push(p4),list(3)),push(p3),t=pop_integer(),isNaN(t)){push_symbol(POWER),push(p1),push(p3),list(3),restore();return}if(t===0){restore();return}return push(p1),bignum_power_number(t),restore()},Eval_quotient=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)&&(p1=symbol(SYMBOL_X)),push(p1),divpoly()},divpoly=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,s=0,u=0,c=0,Ct=0,save(),p3=pop(),p2=pop(),p1=pop(),a=tos,t=tos,u=coeff(p3,p1)-1,n=tos,c=coeff(p3,p2)-1,Ct=u-c,push_integer(0),p5=pop();Ct>=0;){for(push(stack[t+u]),push(stack[n+c]),divide(),p4=pop(),s=l=0,d=c;0<=d?l<=d:l>=d;s=0<=d?++l:--l)push(stack[t+Ct+s]),push(stack[n+s]),push(p4),multiply(),subtract(),stack[t+Ct+s]=pop();push(p5),push(p4),push(p3),push_integer(Ct),power(),multiply(),add(),p5=pop(),u--,Ct--}return moveTos(a),push(p5),restore()},DEBUG_RATIONALIZE=!1,Eval_rationalize=function(){return push(cadr(p1)),Eval(),rationalize()},rationalize=function(){var t;return t=expanding,yyrationalize(),expanding=t},yyrationalize=function(){var t,n,a;if(a=pop(),istensor(a)){__rationalize_tensor(a);return}if(expanding=0,car(a)!==symbol(ADD)){push(a);return}for(DEBUG_RATIONALIZE&&console.log("rationalize: this is the input expr: "+a),push(one),multiply_denominators(a),t=pop(),DEBUG_RATIONALIZE&&console.log("rationalize: this is the new denominator: "+t),push(zero),n=cdr(a);iscons(n);)DEBUG_RATIONALIZE&&console.log("term: "+car(n)),push(t),push(car(n)),multiply(),add(),n=cdr(n);if(DEBUG_RATIONALIZE&&console.log("rationalize: original terms times new denominator: "+stack[tos-1]),Condense(),DEBUG_RATIONALIZE&&console.log("rationalize: after factoring: "+stack[tos-1]),push(t),divide(),DEBUG_RATIONALIZE)return console.log("rationalize: after dividing by new denom. (and we're done): "+stack[tos-1])},multiply_denominators=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_term(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_term(t)},multiply_denominators_term=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_factor(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_factor(t)},multiply_denominators_factor=function(t){if(car(t)===symbol(POWER)){if(push(t),t=caddr(t),isnegativenumber(t)){inverse(),__lcm();return}if(car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))){inverse(),__lcm();return}return pop()}},__rationalize_tensor=function(t){var n,a,s,l;if(n=0,push(t),Eval(),t=pop(),!istensor(t)){push(t);return}for(s=t.tensor.nelem,n=a=0,l=s;0<=l?a<l:a>l;n=0<=l?++a:--a)push(t.tensor.elem[n]),rationalize(),t.tensor.elem[n]=pop();return check_tensor_dimensions(t),push(t)},__lcm=function(){return save(),p1=pop(),p2=pop(),push(p1),push(p2),multiply(),push(p1),push(p2),gcd(),divide(),restore()},Eval_real=function(){return push(cadr(p1)),Eval(),real()},real=function(){return save(),rect(),p1=pop(),push(p1),push(p1),conjugate(),add(),push_integer(2),divide(),restore()},DEBUG_RECT=!1,Eval_rect=function(){return push(cadr(p1)),Eval(),rect()},rect=function(){var t;if(save(),p1=pop(),t=p1,DEBUG_RECT&&console.log("RECT of "+t),DEBUG_RECT&&console.log("any clock forms in : "+t+" ? "+findPossibleClockForm(t)),issymbol(p1))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(YYRECT),push(p1),list(2)):push(p1);else if(!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))&&!findPossibleExponentialForm(p1)&&!findPossibleClockForm(p1)&&!(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&Find(p1,imaginaryunit)))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),push(p1);else if(car(p1)===symbol(MULTIPLY)&&isimaginaryunit(cadr(p1))&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))push(p1);else if(car(p1)===symbol(ADD))for(DEBUG_RECT&&console.log(" rect - "+t+" is a sum "),push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),rect(),add(),p1=cdr(p1);else DEBUG_RECT&&console.log(" rect - "+t+" is NOT a sum "),push(p1),abs(),DEBUG_RECT&&console.log(" rect - "+t+" abs: "+stack[tos-1].toString()),push(p1),arg(),DEBUG_RECT&&console.log(" rect - "+t+" arg of "+p1+" : "+stack[tos-1].toString()),p1=pop(),push(p1),cosine(),DEBUG_RECT&&console.log(" rect - "+t+" cosine: "+stack[tos-1].toString()),push(imaginaryunit),push(p1),sine(),DEBUG_RECT&&console.log(" rect - "+t+" sine: "+stack[tos-1].toString()),multiply(),DEBUG_RECT&&console.log(" rect - "+t+" i * sine: "+stack[tos-1].toString()),add(),DEBUG_RECT&&console.log(" rect - "+t+" cos + i * sine: "+stack[tos-1].toString()),multiply();if(restore(),DEBUG_RECT)return console.log("rect of "+t+" : "+stack[tos-1])},Eval_roots=function(){return p2=cadr(p1),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):(push(p2),Eval(),p2=pop(),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):push(p2)),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("roots: 1st argument is not a polynomial in the variable "+p2),push(p1),push(p2),roots()},hasImaginaryCoeff=function(t){var n,a,s;for(a=!1,n=s=t;s>0;n=s+=-1)if(iscomplexnumber(stack[tos-n])){a=!0;break}return a},isSimpleRoot=function(t){var n,a,s;if(t>2){for(a=!0,isZeroAtomOrTensor(stack[tos-t])&&(a=!1),n=s=t-1;s>1;n=s+=-1)if(!isZeroAtomOrTensor(stack[tos-n])){a=!1;break}}else a=!1;return a},normalisedCoeff=function(t,n){var a,s,l,u,c,d,Ct,ar;for(l=coeff(t,n),a=stack[tos-1],d=[],s=u=1,Ct=l;1<=Ct?u<=Ct:u>=Ct;s=1<=Ct?++u:--u)d.push(pop());for(s=c=ar=l-1;ar<=0?c<=0:c>=0;s=ar<=0?++c:--c)push(d[s]),push(a),divide();return l},roots=function(){var t,n,a,s,l,u,c,d;if(t=0,n=0,c=0,DEBUG&&console.log("roots: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),recursionLevelNestedRadicalsRemoval>1){pop(),pop(),push(symbol(NIL)),restore();return}if(t=tos-2,DEBUG&&console.log("roots checking if "+stack[tos-1].toString()+" is a case of simple roots"),p2=pop(),p1=pop(),push(p1),push(p2),a=normalisedCoeff(p2,p1),isSimpleRoot(a)?(DEBUG&&console.log("yes, "+stack[tos-1].toString()+" is a case of simple roots"),l=stack[tos-a],u=stack[tos-1],moveTos(tos-a),pop(),pop(),getSimpleRoots(a,u,l)):(moveTos(tos-a),roots2()),c=tos-t,c===0&&stop("roots: the polynomial is not factorable, try nroots"),c===1){restore();return}for(sort_stack(c),p1=alloc_tensor(c),p1.tensor.ndim=1,p1.tensor.dim[0]=c,n=s=0,d=c;0<=d?s<d:s>d;n=0<=d?++s:--s)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore(),!1},getSimpleRoots=function(t,n,a){var s,l,u,c,d,Ct,ar;if(DEBUG&&console.log("getSimpleRoots"),save(),t=t-1,push(a),push_rational(1,t),power(),push(n),push_rational(1,t),power(),divide(),l=pop(),t%2===0)for(ar=u=1,d=t;u<=d;ar=u+=2)push(l),push_integer(-1),push_rational(ar,t),power(),multiply(),s=pop(),push(s),push(s),negate();else for(ar=c=1,Ct=t;1<=Ct?c<=Ct:c>=Ct;ar=1<=Ct?++c:--c)push(l),push_integer(-1),push_rational(ar,t),power(),multiply(),ar%2===0&&negate();return restore()},roots2=function(){var t;if(save(),DEBUG&&console.log("roots2: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),p2=pop(),p1=pop(),push(p1),push(p2),t=normalisedCoeff(p2,p1),hasImaginaryCoeff(t)?(moveTos(tos-t),pop(),pop()):(moveTos(tos-t),factorpoly(),p1=pop()),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),roots3(),p1=cdr(p1);else push(p1),push(p2),roots3();return restore()},roots3=function(){var t;return save(),p2=pop(),p1=pop(),car(p1)===symbol(POWER)&&ispolyexpandedform(cadr(p1),p2)&&isposint(caddr(p1))?(t=normalisedCoeff(p2,cadr(p1)),mini_solve(t)):ispolyexpandedform(p1,p2)&&(t=normalisedCoeff(p2,p1),mini_solve(t)),restore()},mini_solve=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx,vx,yx,Sx,_x,Ex,bx,Ax,Mx,Rx,Cx,Lx,qx,Ix,Px,Nx,Bx,$x,Vx,Gx,Zx,jx,Hx,iE,Xx,rE,uE,aE,Kx,ME,IE,wE,bE,UE,CE,YE,Ox,Fx,Wx,Qx,oE,tE;if(save(),t===2){p3=pop(),p4=pop(),push(p4),push(p3),divide(),negate(),restore();return}if(t===3){p3=pop(),p4=pop(),p5=pop(),push(p4),push_integer(2),power(),push_integer(4),push(p3),multiply(),push(p5),multiply(),subtract(),push_rational(1,2),power(),p6=pop(),push(p6),push(p4),subtract(),push(p3),push_integer(2),multiply(),divide(),push(p6),push(p4),add(),negate(),push(p3),divide(),push_rational(1,2),multiply(),restore();return}if(t===4||t===5){if(p3=pop(),p4=pop(),p5=pop(),p6=pop(),push(p5),push(p5),multiply(),yx=pop(),push(yx),push(p5),multiply(),Sx=pop(),push(p4),push(p4),multiply(),mx=pop(),push(mx),push(p4),multiply(),hx=pop(),push(hx),push(p6),multiply(),vx=pop(),push(vx),push_integer(-4),multiply(),Lx=pop(),push(hx),push_integer(2),multiply(),l=pop(),push(p3),push(p3),multiply(),ax=pop(),push(ax),push(p3),multiply(),lx=pop(),push_integer(3),push(p3),multiply(),u=pop(),push(ax),push(p6),multiply(),ox=pop(),push(ox),push(p6),multiply(),sx=pop(),push(ox),push_integer(27),multiply(),s=pop(),push(sx),push_integer(-27),multiply(),Rx=pop(),push(u),push_integer(2),multiply(),pop(),push(p3),push(p5),multiply(),gx=pop(),push(gx),push(p4),multiply(),cx=pop(),push(cx),push(p6),multiply(),fx=pop(),push(gx),push_integer(3),multiply(),d=pop(),push_integer(-4),push(p3),push(Sx),multiply(),multiply(),Cx=pop(),push(cx),push_integer(9),multiply(),negate(),qx=pop(),push(fx),push_integer(18),multiply(),a=pop(),push(mx),push(d),subtract(),fn=pop(),push(mx),push(yx),multiply(),px=pop(),push(p4),negate(),push(u),divide(),Ix=pop(),t===4){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),DEBUG&&console.log("cubic: D0: "+fn.toString()),push(fn),push_integer(3),power(),push_integer(4),multiply(),Ct=pop(),push(fn),simplify(),absValFloat(),dn=pop(),DEBUG&&console.log("cubic: D0 as float: "+dn.toString()),push(a),push(Lx),push(px),push(Cx),push(Rx),add(),add(),add(),add(),simplify(),absValFloat(),Ex=pop(),DEBUG&&console.log("cubic: DETERMINANT: "+Ex.toString()),push(l),push(qx),push(s),add(),add(),Cn=pop(),DEBUG&&console.log("cubic: D1: "+Cn.toString()),push(Cn),push_integer(2),power(),push(Ct),subtract(),push_rational(1,2),power(),simplify(),Rn=pop(),isZeroAtomOrTensor(Ex))if(isZeroAtomOrTensor(dn)){DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is zero"),push(Ix),restore();return}else{DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is not zero"),push(p3),push(p6),push_integer(9),multiply(),multiply(),push(p4),push(p5),multiply(),subtract(),push(fn),push_integer(2),multiply(),divide(),Qx=pop(),push(Qx),push(Qx),push(cx),push_integer(4),multiply(),push(p3),push(p3),push(p6),push_integer(9),multiply(),multiply(),multiply(),negate(),push(hx),negate(),add(),add(),push(p3),push(fn),multiply(),divide(),restore();return}for(n=!1,rE=!1;!n;)push(Rn),rE&&negate(),push(Cn),add(),push_rational(1,2),multiply(),push_rational(1,3),power(),simplify(),en=pop(),DEBUG&&console.log("cubic: C: "+en.toString()),push(en),simplify(),absValFloat(),on=pop(),DEBUG&&console.log("cubic: C as absval and float: "+on.toString()),isZeroAtomOrTensor(on)?(DEBUG&&console.log(" cubic: C IS ZERO flipping the sign"),rE=!0):n=!0;push(en),push(u),multiply(),c=pop(),push(c),push_integer(2),multiply(),ar=pop(),push(imaginaryunit),push_integer(3),push_rational(1,2),power(),multiply(),uE=pop(),push_integer(1),push(uE),add(),CE=pop(),push_integer(1),push(uE),subtract(),UE=pop(),push(en),push(u),divide(),tn=pop(),push(Ix),push(tn),negate(),push(fn),push(c),divide(),negate(),add(),add(),simplify(),push(Ix),push(tn),push(CE),multiply(),push_integer(2),divide(),push(UE),push(fn),multiply(),push(ar),divide(),add(),add(),simplify(),push(Ix),push(tn),push(UE),multiply(),push_integer(2),divide(),push(CE),push(fn),multiply(),push(ar),divide(),add(),add(),simplify(),restore();return}if(t===5){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),p7=pop(),isZeroAtomOrTensor(p4)&&isZeroAtomOrTensor(p6)&&!isZeroAtomOrTensor(p5)&&!isZeroAtomOrTensor(p7)){for(DEBUG&&console.log("biquadratic case"),push(p3),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(p5),push(symbol(SECRETX)),multiply(),push(p7),add(),add(),push(symbol(SECRETX)),roots(),Gx=pop(),YE=Gx.tensor.elem,aE=0,Kx=YE.length;aE<Kx;aE++)Xx=YE[aE],push(Xx),push_rational(1,2),power(),simplify(),push(Xx),push_rational(1,2),power(),negate(),simplify();restore();return}if(push(p6),push(p6),multiply(),_x=pop(),push(p7),push(p7),multiply(),bx=pop(),push(bx),push(p7),multiply(),Ax=pop(),push_integer(256),push(lx),push(Ax),multiply(),multiply(),push_integer(-192),push(ox),push(bx),push(p4),multiply(),multiply(),multiply(),push_integer(-128),push(ax),push(yx),push(bx),multiply(),multiply(),multiply(),push_integer(144),push(sx),push(p5),push(p7),multiply(),multiply(),multiply(),push(Rx),push(_x),multiply(),push_integer(144),push(cx),push(p4),push(bx),multiply(),multiply(),multiply(),push_integer(-6),push(p3),push(mx),push(_x),push(p7),multiply(),multiply(),multiply(),multiply(),push_integer(-80),push(fx),push(p5),push(p7),multiply(),multiply(),multiply(),push_integer(18),push(fx),push(_x),multiply(),multiply(),push_integer(16),push(gx),push(Sx),push(p7),multiply(),multiply(),multiply(),push_integer(-4),push(gx),push(yx),push(_x),multiply(),multiply(),multiply(),push_integer(-27),push(hx),push(p4),push(bx),multiply(),multiply(),multiply(),push_integer(18),push(vx),push(p5),push(p7),multiply(),multiply(),multiply(),push(Lx),push(_x),multiply(),push_integer(-4),push(px),push(p5),push(p7),multiply(),multiply(),multiply(),push(px),push(_x),multiply(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),Ex=pop(),DEBUG&&console.log("R_determinant: "+Ex.toString()),push(yx),push_integer(-3),push(p4),push(p6),multiply(),multiply(),push_integer(12),push(p3),push(p7),multiply(),multiply(),add(),add(),fn=pop(),DEBUG&&console.log("R_DELTA0: "+fn.toString()),push_integer(2),push(Sx),multiply(),push_integer(-9),push(p4),push(p5),push(p6),multiply(),multiply(),multiply(),push_integer(27),push(mx),push(p7),multiply(),multiply(),push_integer(27),push(p3),push(_x),multiply(),multiply(),push_integer(-72),push(gx),push(p7),multiply(),multiply(),add(),add(),add(),add(),Cn=pop(),DEBUG&&console.log("R_DELTA1: "+Cn.toString()),push_integer(8),push(gx),multiply(),push_integer(-3),push(mx),multiply(),add(),push_integer(8),push(ax),multiply(),divide(),Px=pop(),DEBUG&&console.log("p: "+Px.toString()),push(hx),push_integer(-4),push(cx),multiply(),push_integer(8),push(ox),multiply(),add(),add(),push_integer(8),push(lx),multiply(),divide(),Nx=pop(),DEBUG&&console.log("q: "+Nx.toString()),DEBUG&&console.log("tos 1 "+tos),isZeroAtomOrTensor(p4)){for(Px=p5,Nx=p6,Bx=p7,push_rational(5,2),push(Px),multiply(),Zx=pop(),push_integer(2),push(Px),push_integer(2),power(),multiply(),push(Bx),subtract(),jx=pop(),push(Px),push_integer(3),power(),push_integer(2),divide(),push_rational(-1,2),push(Px),push(Bx),multiply(),multiply(),push_rational(-1,8),push(Nx),push_integer(2),power(),multiply(),add(),add(),Hx=pop(),push(symbol(SECRETX)),push_integer(3),power(),push(Zx),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(jx),push(symbol(SECRETX)),multiply(),push(Hx),add(),add(),add(),DEBUG&&console.log("resolventCubic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),Wx=pop(),DEBUG&&console.log("resolventCubicSolutions: "+Wx),Mx=null,Fx=Wx.tensor.elem,bE=0,IE=Fx.length;bE<IE;bE++)if(Xx=Fx[bE],DEBUG&&console.log("examining solution: "+Xx),push(Xx),push_integer(2),multiply(),push(Px),add(),absValFloat(),tE=pop(),DEBUG&&console.log("abs value is: "+Xx),!isZeroAtomOrTensor(tE)){Mx=Xx;break}DEBUG&&console.log("chosen solution: "+Mx),push(Mx),push_integer(2),multiply(),push(Px),add(),push_rational(1,2),power(),simplify(),oE=pop(),push(Nx),push_integer(2),multiply(),push(oE),divide(),simplify(),Vx=pop(),push(Px),push_integer(3),multiply(),push(Mx),push_integer(2),multiply(),add(),$x=pop(),push(oE),push($x),push(Vx),add(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(oE),push($x),push(Vx),add(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),push(oE),negate(),push($x),push(Vx),subtract(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(oE),negate(),push($x),push(Vx),subtract(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),restore();return}else{for(DEBUG&&console.log("tos 2 "+tos),push_integer(8),push(p5),push(p3),multiply(),multiply(),push_integer(-3),push(p4),push_integer(2),power(),multiply(),add(),push_integer(8),push(p3),push_integer(2),power(),multiply(),divide(),Px=pop(),DEBUG&&console.log("p for depressed quartic: "+Px.toString()),push(p4),push_integer(3),power(),push_integer(-4),push(p3),push(p4),push(p5),multiply(),multiply(),multiply(),push_integer(8),push(p6),push(p3),push_integer(2),power(),multiply(),multiply(),add(),add(),push_integer(8),push(p3),push_integer(3),power(),multiply(),divide(),Nx=pop(),DEBUG&&console.log("q for depressed quartic: "+Nx.toString()),push(p4),push_integer(4),power(),push_integer(-3),multiply(),push_integer(256),push(lx),push(p7),multiply(),multiply(),push_integer(-64),push(ox),push(p4),multiply(),multiply(),push_integer(16),push(mx),push(p3),push(p5),multiply(),multiply(),multiply(),add(),add(),add(),push_integer(256),push(p3),push_integer(4),power(),multiply(),divide(),Bx=pop(),DEBUG&&console.log("r for depressed quartic: "+Bx.toString()),DEBUG&&console.log("tos 4 "+tos),push(symbol(SECRETX)),push_integer(4),power(),DEBUG&&console.log("4 * x^4: "+stack[tos-1].toString()),push(Px),push(symbol(SECRETX)),push_integer(2),power(),multiply(),DEBUG&&console.log("R_p * x^2: "+stack[tos-1].toString()),push(Nx),push(symbol(SECRETX)),multiply(),DEBUG&&console.log("R_q * x: "+stack[tos-1].toString()),push(Bx),DEBUG&&console.log("R_r: "+stack[tos-1].toString()),add(),add(),add(),simplify(),DEBUG&&console.log("solving depressed quartic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),iE=pop(),DEBUG&&console.log("depressedSolutions: "+iE),Ox=iE.tensor.elem,wE=0,ME=Ox.length;wE<ME;wE++)Xx=Ox[wE],push(Xx),push(p4),push_integer(4),push(p3),multiply(),divide(),subtract(),simplify(),DEBUG&&console.log("solution from depressed: "+stack[tos-1].toString());restore();return}}}return moveTos(tos-t),restore()},Eval_round=function(){return push(cadr(p1)),Eval(),yround()},yround=function(){return save(),yyround(),restore()},yyround=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(ROUND),push(p1),list(2);return}if(isdouble(p1)){t=Math.round(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return push(p1),yyfloat(),p1=pop(),push_integer(Math.round(p1.d))},T_INTEGER=1001,T_DOUBLE=1002,T_SYMBOL=1003,T_FUNCTION=1004,T_NEWLINE=1006,T_STRING=1007,T_GTEQ=1008,T_LTEQ=1009,T_EQ=1010,T_NEQ=1011,T_QUOTASSIGN=1012,token="",newline_flag=0,meta_mode=0,input_str=0,scan_str=0,token_str=0,token_buf=0,lastFoundSymbol=null,symbolsRightOfAssignment=null,symbolsLeftOfAssignment=null,isSymbolLeftOfAssignment=null,scanningParameters=null,functionInvokationsScanningStack=null,skipRootVariableToBeSolved=!1,assignmentFound=null,scanned="",scan=function(t){return DEBUG&&console.log("#### scanning "+t),lastFoundSymbol=null,symbolsRightOfAssignment=[],symbolsLeftOfAssignment=[],isSymbolLeftOfAssignment=!0,scanningParameters=[],functionInvokationsScanningStack=[""],assignmentFound=!1,scanned=t,meta_mode=0,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,assignmentFound||(symbolsInExpressionsWithoutAssignments=symbolsInExpressionsWithoutAssignments.concat(symbolsLeftOfAssignment)),token_str-input_str)},scan_meta=function(t){return scanned=t,meta_mode=1,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,token_str-input_str)},scan_stmt=function(){var t,n,a,s,l,u,c,d,Ct;if(scan_relation(),t=!1,token===T_QUOTASSIGN&&(t=!0),(token===T_QUOTASSIGN||token==="=")&&(Ct=lastFoundSymbol,DEBUG&&console.log("assignment!"),assignmentFound=!0,isSymbolLeftOfAssignment=!1,get_next_token(),push_symbol(SETQ),swap(),t&&push_symbol(QUOTE),scan_relation(),t&&list(2),list(3),isSymbolLeftOfAssignment=!0,codeGen)){if(s=symbolsRightOfAssignment.indexOf(Ct),s!==-1&&(symbolsRightOfAssignment.splice(s,1),symbolsHavingReassignments.push(Ct)),DEBUG)for(console.log("locally, "+Ct+" depends on: "),l=0,u=symbolsRightOfAssignment.length;l<u;l++)a=symbolsRightOfAssignment[l],console.log("  "+a);for(symbolsDependencies[Ct]==null&&(symbolsDependencies[Ct]=[]),n=symbolsDependencies[Ct],d=0,c=symbolsRightOfAssignment.length;d<c;d++)a=symbolsRightOfAssignment[d],n.indexOf(a)===-1&&n.push(a);return symbolsRightOfAssignment=[]}},scan_relation=function(){switch(scan_expression(),token){case T_EQ:return push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3);case T_NEQ:return push_symbol(NOT),swap(),push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3),list(2);case T_LTEQ:return push_symbol(TESTLE),swap(),get_next_token(),scan_expression(),list(3);case T_GTEQ:return push_symbol(TESTGE),swap(),get_next_token(),scan_expression(),list(3);case"<":return push_symbol(TESTLT),swap(),get_next_token(),scan_expression(),list(3);case">":return push_symbol(TESTGT),swap(),get_next_token(),scan_expression(),list(3)}},scan_expression=function(){var t;switch(t=tos,token){case"+":get_next_token(),scan_term();break;case"-":get_next_token(),scan_term(),negate();break;default:scan_term()}for(;newline_flag===0&&(token==="+"||token==="-");)token==="+"?(get_next_token(),scan_term()):(get_next_token(),scan_term(),negate());if(tos-t>1)return list(tos-t),push_symbol(ADD),swap(),cons()},is_factor=function(){if((typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode)return 1;switch(token){case"*":case"/":return 1;case"(":case T_SYMBOL:case T_FUNCTION:case T_INTEGER:case T_DOUBLE:case T_STRING:return newline_flag?(scan_str=token_str,0):1}return 0},simplify_1_in_products=function(t,n){if(t>n&&isrational(stack[t-1])&&equaln(stack[t-1],1))return pop()},multiply_consecutive_constants=function(t,n){if(t>n+1&&isNumericAtom(stack[t-2])&&isNumericAtom(stack[t-1]))return multiply()},scan_term=function(){var t;for(t=tos,scan_factor(),parse_time_simplifications&&simplify_1_in_products(tos,t);is_factor();)token==="*"?(get_next_token(),scan_factor()):token==="/"?(simplify_1_in_products(tos,t),get_next_token(),scan_factor(),inverse()):(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode?(get_next_token(),push_symbol(INNER),swap(),scan_factor(),list(3)):scan_factor(),parse_time_simplifications&&(multiply_consecutive_constants(tos,t),simplify_1_in_products(tos,t));if(t===tos)return push_integer(1);if(tos-t>1)return list(tos-t),push_symbol(MULTIPLY),swap(),cons()},scan_power=function(){if(token==="^")return get_next_token(),push_symbol(POWER),swap(),scan_factor(),list(3)},scan_index=function(t){for(get_next_token(),push_symbol(INDEX),swap(),scan_expression();token===",";)get_next_token(),scan_expression();return token!=="]"&&scan_error("] expected"),get_next_token(),list(tos-t)},scan_factor=function(){var t,n;for(n=tos,t=!1,token==="("?scan_subexpr():token===T_SYMBOL?scan_symbol():token===T_FUNCTION?scan_function_call_with_function_name():token==="["?scan_tensor():token===T_INTEGER?(t=!0,bignum_scan_integer(token_buf),get_next_token()):token===T_DOUBLE?(t=!0,bignum_scan_float(token_buf),get_next_token()):token===T_STRING?scan_string():scan_error("syntax error");token==="["||token==="("&&newline_flag===0&&!t;)token==="["?scan_index(n):token==="("&&scan_function_call_without_function_name();for(;token==="!";)get_next_token(),push_symbol(FACTORIAL),swap(),list(2);for(;(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===transpose_unicode;)get_next_token(),push_symbol(TRANSPOSE),swap(),list(2);return scan_power()},addSymbolRightOfAssignment=function(t){var n,a,s,l;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols right of assignment"),s="",n=a=1,l=functionInvokationsScanningStack.length;1<=l?a<l:a>l;n=1<=l?++a:--a)functionInvokationsScanningStack[n]!==""&&(s+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=s+t,symbolsRightOfAssignment.push(t)}},addSymbolLeftOfAssignment=function(t){var n,a,s,l;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols left of assignment"),s="",n=a=1,l=functionInvokationsScanningStack.length;1<=l?a<l:a>l;n=1<=l?++a:--a)functionInvokationsScanningStack[n]!==""&&(s+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=s+t,symbolsLeftOfAssignment.push(t)}},scan_symbol=function(){if(token!==T_SYMBOL&&scan_error("symbol expected"),meta_mode&&token_buf.length===1)switch(token_buf[0]){case"a":push(symbol(METAA));break;case"b":push(symbol(METAB));break;case"x":push(symbol(METAX));break;default:push(usr_symbol(token_buf))}else push(usr_symbol(token_buf));return scanningParameters.length===0?(DEBUG&&console.log("out of scanning parameters, processing "+token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment&&addSymbolLeftOfAssignment(token_buf)):(DEBUG&&console.log("still scanning parameters, skipping "+token_buf),isSymbolLeftOfAssignment&&addSymbolRightOfAssignment("'"+token_buf)),DEBUG&&console.log("found symbol: "+token_buf+" left of assignment: "+isSymbolLeftOfAssignment),isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token()},scan_string=function(){return push(new_string(token_buf)),get_next_token()},scan_function_call_with_function_name=function(){var t,n,a,s,l,u;if(DEBUG&&console.log("-- scan_function_call_with_function_name start"),s=1,l=new U,l=usr_symbol(token_buf),push(l),t=token_buf,(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.push(token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token(),get_next_token(),scanningParameters.push(!0),token!==")"){for(scan_stmt(),s++;token===",";)get_next_token(),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("sum")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("product")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("for")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("defint")!==-1&&(s===2||s>2&&(s-2)%3===0)&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),scan_stmt(),skipRootVariableToBeSolved=!1,s++;s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_x").test(c)}))}for(scanningParameters.pop(),n=a=0,u=symbolsRightOfAssignment.length;0<=u?a<=u:a>=u;n=0<=u?++a:--a)symbolsRightOfAssignment[n]!=null&&(t==="roots"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="defint"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="sum"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="product"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="for"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"),"")));if(token!==")"&&scan_error(") expected"),get_next_token(),list(s),(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.pop(),t===symbol(PATTERN).printname&&(patternHasBeenFound=!0),DEBUG)return console.log("-- scan_function_call_with_function_name end")},scan_function_call_without_function_name=function(){var t;if(DEBUG&&console.log("-- scan_function_call_without_function_name start"),push_symbol(EVAL),swap(),list(2),t=1,get_next_token(),scanningParameters.push(!0),token!==")")for(scan_stmt(),t++;token===",";)get_next_token(),scan_stmt(),t++;if(scanningParameters.pop(),token!==")"&&scan_error(") expected"),get_next_token(),list(t),DEBUG)return console.log("-- scan_function_call_without_function_name end: "+stack[tos-1])},scan_subexpr=function(){return token!=="("&&scan_error("( expected"),get_next_token(),scan_stmt(),token!==")"&&scan_error(") expected"),get_next_token()},scan_tensor=function(){var t;for(t=0,token!=="["&&scan_error("[ expected"),get_next_token(),scan_stmt(),t=1;token===",";)get_next_token(),scan_stmt(),t++;return build_tensor(t),token!=="]"&&scan_error("] expected"),get_next_token()},scan_error=function(t){for(errorMessage="";input_str!==scan_str&&!((scanned[input_str]===`
`||scanned[input_str]==="\r")&&input_str+1===scan_str);)errorMessage+=scanned[input_str++];for(errorMessage+=" ? ";scanned[input_str]&&scanned[input_str]!==`
`&&scanned[input_str]!=="\r";)errorMessage+=scanned[input_str++];return errorMessage+=`
`,stop(t)},build_tensor=function(t){var n,a,s;for(n=0,save(),p2=alloc_tensor(t),p2.tensor.ndim=1,p2.tensor.dim[0]=t,n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p2.tensor.elem[n]=stack[tos-t+n];return check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},get_next_token=function(){for(newline_flag=0;get_token(),token===T_NEWLINE;)newline_flag=1;if(DEBUG)return console.log("get_next_token token: "+token)},get_token=function(){for(;isspace(scanned[scan_str]);){if(scanned[scan_str]===`
`||scanned[scan_str]==="\r"){token=T_NEWLINE,scan_str++;return}scan_str++}if(token_str=scan_str,scan_str===scanned.length){token="";return}if(isdigit(scanned[scan_str])||scanned[scan_str]==="."){for(;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="."){for(scan_str++;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="e"&&(scanned[scan_str+1]==="+"||scanned[scan_str+1]==="-"||isdigit(scanned[scan_str+1])))for(scan_str+=2;isdigit(scanned[scan_str]);)scan_str++;token=T_DOUBLE}else token=T_INTEGER;update_token_buf(token_str,scan_str);return}if(isalpha(scanned[scan_str])){for(;isalnumorunderscore(scanned[scan_str]);)scan_str++;scanned[scan_str]==="("?token=T_FUNCTION:token=T_SYMBOL,update_token_buf(token_str,scan_str);return}if(scanned[scan_str]==='"'){for(scan_str++;scanned[scan_str]!=='"';)scan_str===scanned.length-1&&(scan_str++,scan_error("runaway string"),scan_str--),scan_str++;scan_str++,token=T_STRING,update_token_buf(token_str+1,scan_str-1);return}if(scanned[scan_str]==="#"||scanned[scan_str]==="-"&&scanned[scan_str+1]==="-"){for(;scanned[scan_str]&&scanned[scan_str]!==`
`&&scanned[scan_str]!=="\r";)scan_str++;scanned[scan_str]&&scan_str++,token=T_NEWLINE;return}if(scanned[scan_str]===":"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_QUOTASSIGN;return}if(scanned[scan_str]==="="&&scanned[scan_str+1]==="="){scan_str+=2,token=T_EQ;return}if(scanned[scan_str]==="!"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_NEQ;return}if(scanned[scan_str]==="<"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_LTEQ;return}if(scanned[scan_str]===">"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_GTEQ;return}return token=scanned[scan_str++]},update_token_buf=function(t,n){return token_buf=scanned.substring(t,n)},$.scan=scan,Eval_sgn=function(){return push(cadr(p1)),Eval(),sgn()},sgn=function(){return save(),yysgn(),restore()},yysgn=function(){if(p1=pop(),isdouble(p1))if(p1.d>0){push_integer(1);return}else if(p1.d===0){push_integer(1);return}else{push_integer(-1);return}if(isrational(p1))if(MSIGN(mmul(p1.q.a,p1.q.b))===-1){push_integer(-1);return}else if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(0);return}else{push_integer(1);return}if(iscomplexnumber(p1)){push_integer(-1),push(p1),absval(),power(),push(p1),multiply();return}if(isnegativeterm(p1)){push_symbol(SGN),push(p1),negate(),list(2),push_integer(-1),multiply();return}return push_symbol(SGN),push(p1),list(2)},Eval_shape=function(){return push(cadr(p1)),Eval(),shape()},shape=function(){var t,n,a,s,l,u,c,d;for(a=0,u=0,t=[],n=[],a=s=0,c=MAXDIM;0<=c?s<c:s>c;a=0<=c?++s:--s)t[a]=0,n[a]=0;if(save(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("transpose: tensor expected, 1st arg is not a tensor"),push(zero),restore();return}for(u=p1.tensor.ndim,p2=alloc_tensor(u),p2.tensor.ndim=1,p2.tensor.dim[0]=u,a=l=0,d=u;0<=d?l<d:l>d;a=0<=d?++l:--l)push_integer(p1.tensor.dim[a]),p2.tensor.elem[a]=pop();return push(p2),restore()},simfac=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(ADD)){for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),simfac_term(),p1=cdr(p1);add_all(tos-t)}else push(p1),simfac_term();return restore()},simfac_term=function(){var t;if(t=0,save(),p1=pop(),car(p1)!==symbol(MULTIPLY)){push(p1),restore();return}for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),p1=cdr(p1);for(;yysimfac(t););return multiply_all_noexpand(tos-t),restore()},yysimfac=function(t){var n,a,s,l,u,c,d,Ct;for(n=0,a=0,n=s=u=t,c=tos;u<=c?s<c:s>c;n=u<=c?++s:--s)for(p1=stack[n],a=l=d=t,Ct=tos;d<=Ct?l<Ct:l>Ct;a=d<=Ct?++l:--l)if(n!==a){if(p2=stack[a],car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&equal(cadr(p1),cadr(p2)))return push(cadr(p1)),push(one),subtract(),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&equal(p1,cadadr(p2)))return push(p1),push_integer(-1),add(),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(FACTORIAL)&&(push(p1),push(cadr(p2)),subtract(),p3=pop(),isplusone(p3)))return push(p1),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(POWER)&&isminusone(caddr(p1))&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3)))return push(cadr(p1)),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)){if(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3))return stack[n]=cadr(p1),stack[a]=one,1;if(isminusone(p3))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(equaln(p3,2))return stack[n]=cadr(p1),push(cadr(p1)),push_integer(-1),add(),stack[a]=pop(),1;if(equaln(p3,-2))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),push(cadr(cadr(p2))),push_integer(-1),add(),reciprocate(),stack[a]=pop(),1}}return 0},DEBUG_SIMPLIFY=!1,Eval_simplify=function(){return push(cadr(p1)),runUserDefinedSimplifications(),Eval(),simplify()},runUserDefinedSimplifications=function(){var t,n,a,s,l,u,c,d,Ct,ar;if(userSimplificationsInListForm.length!==0&&!Find(cadr(p1),symbol(INTEGRAL))){for(Ct=expanding,expanding=!1,DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications passed: "+stack[tos-1].toString()),Eval(),DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications after eval no expanding: "+stack[tos-1].toString()),expanding=Ct,p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("patterns to be checked: "),s=0,l=userSimplificationsInListForm.length;s<l;s++)a=userSimplificationsInListForm[s],DEBUG_SIMPLIFY&&console.log("..."+a);for(t=!0,d=0;t&&d<MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;)for(t=!1,d++,c=0,u=userSimplificationsInListForm.length;c<u;c++){for(a=userSimplificationsInListForm[c],ar=!0,n=0;ar&&n<MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)n++,DEBUG_SIMPLIFY&&console.log("simplify - tos: "+tos+" checking pattern: "+a+" on: "+p1),push_symbol(NIL),ar=transform(a,!0),ar&&(t=!0),p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("p1 at this stage of simplification: "+p1);n===MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&stop("maximum application of single transformation rule exceeded: "+a)}if(d===MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&stop("maximum application of all transformation rules exceeded "),DEBUG_SIMPLIFY&&console.log("METAX = "+get_binding(symbol(METAX))),DEBUG_SIMPLIFY&&console.log("METAA = "+get_binding(symbol(METAA))),DEBUG_SIMPLIFY)return console.log("METAB = "+get_binding(symbol(METAB)))}},simplifyForCodeGeneration=function(){return save(),runUserDefinedSimplifications(),codeGen=!0,simplify_main(),codeGen=!1,restore()},simplify=function(){return save(),simplify_main(),restore()},simplify_main=function(){var args,fbody;if(p1=pop(),codeGen&&car(p1)===symbol(FUNCTION)&&(fbody=cadr(p1),push(fbody),eval(),simplify(),p3=pop(),args=caddr(p1),push_symbol(FUNCTION),push(p3),push(args),list(3),p1=pop()),istensor(p1)){simplify_tensor();return}if(Find(p1,symbol(FACTORIAL))&&(push(p1),simfac(),p2=pop(),push(p1),rationalize(),simfac(),p3=pop(),count(p2)<count(p3)?p1=p2:p1=p3),f10(),DEBUG_SIMPLIFY&&console.log("f10: "+p1.toString()),f1(),DEBUG_SIMPLIFY&&console.log("f1: "+p1.toString()),f2(),DEBUG_SIMPLIFY&&console.log("f2: "+p1.toString()),f3(),DEBUG_SIMPLIFY&&console.log("f3: "+p1.toString()),f4(),DEBUG_SIMPLIFY&&console.log("f4: "+p1.toString()),f5(),DEBUG_SIMPLIFY&&console.log("f5: "+p1.toString()),f9(),DEBUG_SIMPLIFY&&console.log("f9: "+p1.toString()),simplify_polarRect(),do_simplify_nested_radicals&&simplify_nested_radicals()){DEBUG_SIMPLIFY&&console.log("de-nesting successful into: "+p1.toString()),push(p1),simplify();return}return simplify_rectToClock(),simplify_rational_expressions(),push(p1)},simplify_tensor=function(){var t,n,a,s,l;for(t=0,p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;t=0<=s?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p1.tensor.elem[t]),simplify(),p2.tensor.elem[t]=pop();return check_tensor_dimensions(p2),isZeroAtomOrTensor(p2)&&(p2=zero),push(p2)},f1=function(){if(car(p1)===symbol(ADD)&&(push(p1),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},f2=function(){if(car(p1)===symbol(ADD)&&(push(p1),Condense(),p2=pop(),count(p2)<=count(p1)))return p1=p2},f3=function(){if(push(p1),rationalize(),negate(),rationalize(),negate(),rationalize(),p2=pop(),count(p2)<count(p1))return p1=p2},f10=function(){var t,n,a,s;if(a=car(p1),cdr(p1),(a===symbol(MULTIPLY)||isinnerordot(p1))&&car(car(cdr(p1)))===symbol(TRANSPOSE)&&car(car(cdr(cdr(p1))))===symbol(TRANSPOSE)&&(DEBUG_SIMPLIFY&&console.log("maybe collecting a transpose "+p1),t=cadr(car(cdr(p1))),n=cadr(car(cdr(cdr(p1)))),a===symbol(MULTIPLY)?(push(t),push(n),multiply()):isinnerordot(p1)&&(push(n),push(t),inner()),push_integer(1),push_integer(2),s=expanding,expanding=!1,transpose(),expanding=s,p2=pop(),count(p2)<count(p1)&&(p1=p2),DEBUG_SIMPLIFY))return console.log("collecting a transpose "+p2)},f4=function(){if(!isZeroAtomOrTensor(p1)&&(push(p1),rationalize(),inverse(),rationalize(),inverse(),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},simplify_trig=function(){return save(),p1=pop(),f5(),push(p1),restore()},f5=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(p2=p1,trigmode=1,push(p2),Eval(),p3=pop(),trigmode=2,push(p2),Eval(),p4=pop(),trigmode=0,(count(p4)<count(p3)||nterms(p4)<nterms(p3))&&(p3=p4),count(p3)<count(p1)||nterms(p3)<nterms(p1)))return p1=p3},f9=function(){var t,n;if(car(p1)===symbol(ADD)){for(push_integer(0),p2=cdr(p1);iscons(p2);)push(car(p2)),simplify(),add(),t=p1,n=p2,p1=pop(),simplify_rational_expressions(),push(p1),p1=t,p2=n,p2=cdr(p2);if(p2=pop(),count(p2)<count(p1))return p1=p2}},simplify_rational_expressions=function(){var t,n,a,s;if(push(p1),denominator(),t=pop(),!isone(t)&&(push(p1),numerator(),n=pop(),!isone(n)&&(a=areunivarpolysfactoredorexpandedform(n,t))&&(push(n),push(t),gcd(),push(a),factor(),s=pop(),!isone(s)&&(push(n),push(a),factor(),push(s),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),push(t),push(a),factor(),push(s),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),divide(),Condense(),stack[tos-1].toString(),p2=pop(),count(p2)<count(p1)))))return p1=p2},simplify_rectToClock=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(push(p1),Eval(),clockform(),p2=pop(),DEBUG_SIMPLIFY&&console.log("before simplification clockform: "+p1+" after: "+p2),count(p2)<count(p1)))return p1=p2},simplify_polarRect=function(){if(push(p1),polarRectAMinusOneBase(),Eval(),p2=pop(),count(p2)<count(p1))return p1=p2},polarRectAMinusOneBase=function(){var t;if(save(),p1=pop(),isimaginaryunit(p1)){push(p1),restore();return}if(equal(car(p1),symbol(POWER))&&isminusone(cadr(p1)))push(one),negate(),push(caddr(p1)),polarRectAMinusOneBase(),power(),polar(),rect();else if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),polarRectAMinusOneBase(),p1=cdr(p1);list(tos-t)}else push(p1);restore()},nterms=function(t){return car(t)!==symbol(ADD)?1:length(t)-1},simplify_nested_radicals=function(){var t,n,a,s;return recursionLevelNestedRadicalsRemoval>0?(DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1):(push(p1),s=take_care_of_nested_radicals(),a=stack[tos-1],t=expanding,expanding=0,yycondense(),expanding=t,n=pop(),countOccurrencesOfSymbol(symbol(POWER),a)<countOccurrencesOfSymbol(symbol(POWER),n)?push(a):push(n),p1=pop(),s)},take_care_of_nested_radicals=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx,vx,yx,Sx,_x,Ex,bx,Ax,Mx,Rx,Cx,Lx,qx;if(recursionLevelNestedRadicalsRemoval>0)return DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1;if(save(),p1=pop(),equal(car(p1),symbol(POWER)))if(u=cadr(p1),tn=caddr(p1),!isminusone(tn)&&equal(car(u),symbol(ADD))&&isfraction(tn)&&(equalq(tn,1,3)||equalq(tn,1,2))){for(on=cadr(u),push(on),take_care_of_nested_radicals(),pop(),Rx=caddr(u),push(Rx),take_care_of_nested_radicals(),pop(),hx=0,ar=u;cdr(ar)!==symbol(NIL);)hx++,ar=cdr(ar);if(hx>2)return push(p1),restore(),!1;if(Ct=null,d=[],Lx=[],car(Rx)===symbol(MULTIPLY)){if(Cx=cdr(Rx),iscons(Cx))for(;iscons(Cx);)bx=car(Cx),car(bx)===symbol(POWER)?(Cn=cadr(bx),Rn=caddr(bx),equalq(Rn,1,2)&&(Ct==null?(Ct=Rn,d.push(Cn)):equal(Rn,Ct)&&d.push(Cn))):Lx.push(bx),Cx=cdr(Cx)}else car(Rx)===symbol(POWER)&&(Cn=cadr(Rx),Rn=caddr(Rx),Ct==null&&equalq(Rn,1,2)&&(Ct=Rn,d.push(Cn)));if(d.length===0)return push(p1),restore(),!1;for(t=on,push_integer(1),ax=0,ox=d.length;ax<ox;ax++)dn=d[ax],push(dn),multiply();for(a=pop(),push_integer(1),mx=0,sx=Lx.length;mx<sx;mx++)dn=Lx[mx],push(dn),multiply();if(n=pop(),equalq(tn,1,3)){if(push(t),negate(),push(a),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(c),push_integer(3),push(a),multiply(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;if(push(c),push(symbol(SECRETX)),multiply(),push_integer(-3),push(t),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),pop(),push(p1),restore(),!1;push(c),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(3),power(),multiply(),add(),add(),add()}else if(equalq(tn,1,2)){if(push(a),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(c),push_integer(-2),push(t),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;push(c),push(symbol(SECRETX)),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(2),power(),multiply(),add(),add()}if(push(symbol(SECRETX)),recursionLevelNestedRadicalsRemoval++,roots(),recursionLevelNestedRadicalsRemoval--,equal(stack[tos-1],symbol(NIL)))return DEBUG_SIMPLIFY&&console.log("roots bailed out because of too much recursion"),pop(),push(p1),restore(),!1;for(Ex=[],Mx=stack[tos-1].tensor.elem,px=0,lx=Mx.length;px<lx;px++)en=Mx[px],Find(en,symbol(POWER))||Ex.push(en);if(pop(),Ex.length===0)return push(p1),restore(),!1;for(_x=[],Ax=[],vx=0,cx=Ex.length;vx<cx;vx++)dn=Ex[vx],push(dn),real(),yyfloat(),_x.push(dn),Ax.push(pop().d);return qx=Ax.indexOf(Math.max.apply(Math,Ax)),s=_x[qx],equalq(tn,1,3)?(push(t),push(s),push_integer(3),power(),push_integer(3),push(a),multiply(),push(s),multiply(),add(),divide(),push_rational(1,3),power()):equalq(tn,1,2)&&(push(t),push(s),push_integer(2),power(),push(a),add(),divide(),push_rational(1,2),power()),gx=pop(),gx==null?(push(p1),restore(),!1):(push(gx),push(s),multiply(),equalq(tn,1,3)?(fx=pop(),push(gx),push(a),push_rational(1,2),power(),multiply(),push(fx),add(),simplify()):equalq(tn,1,2)&&(fx=pop(),push(gx),push(a),push_rational(1,2),power(),multiply(),push(fx),add(),simplify(),yx=pop(),push(yx),real(),yyfloat(),Sx=pop(),isnegativenumber(Sx)?(push(gx),negate(),gx=pop(),push(fx),negate(),fx=pop(),push(gx),push(a),push_rational(1,2),power(),multiply(),push(fx),add(),simplify()):push(yx)),p1=pop(),push(p1),restore(),!0)}else return push(p1),restore(),!1;else if(iscons(p1)){for(fn=tos,l=!1;iscons(p1);)push(car(p1)),l=l||take_care_of_nested_radicals(),p1=cdr(p1);return list(tos-fn),restore(),l}else return push(p1),restore(),!1},Eval_sin=function(){return push(cadr(p1)),Eval(),sine()},sine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?sine_of_angle_sum():sine_of_angle(),restore()},sine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),sine(),push(p4),cosine(),multiply(),push(p3),cosine(),push(p4),sine(),multiply(),add();return}p2=cdr(p2)}return sine_of_angle()},sine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCSIN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sin(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),sine(),negate();return}if(car(p1)===symbol(ARCTAN)){push(cadr(p1)),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power(),multiply();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(SIN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 150:return push_rational(1,2);case 210:case 330:return push_rational(-1,2);case 45:case 135:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 225:case 315:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 60:case 120:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 240:case 300:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 90:return push_integer(1);case 270:return push_integer(-1);default:return push(symbol(SIN)),push(p1),list(2)}},Eval_sinh=function(){return push(cadr(p1)),Eval(),ysinh()},ysinh=function(){return save(),yysinh(),restore()},yysinh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCSINH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sinh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(SINH),push(p1),list(2)},subst=function(){var t,n,a,s,l,u,c,d,Ct;if(save(),l=pop(),c=pop(),c===symbol(NIL)||l===symbol(NIL)){restore();return}if(t=pop(),istensor(t)){for(u=alloc_tensor(t.tensor.nelem),u.tensor.ndim=t.tensor.ndim,n=a=0,d=t.tensor.ndim;0<=d?a<d:a>d;n=0<=d?++a:--a)u.tensor.dim[n]=t.tensor.dim[n];for(n=s=0,Ct=t.tensor.nelem;0<=Ct?s<Ct:s>Ct;n=0<=Ct?++s:--s)push(t.tensor.elem[n]),push(c),push(l),subst(),u.tensor.elem[n]=pop(),check_tensor_dimensions(u);push(u)}else equal(t,c)?push(l):iscons(t)?(push(car(t)),push(c),push(l),subst(),push(cdr(t)),push(c),push(l),subst(),cons()):push(t);return restore()},Eval_sum=function(){var t,n,a,s,l,u,c,d;if(n=0,s=0,l=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),s=pop_integer(),isNaN(s)){push(p1);return}if(push(caddddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}for(p4=get_binding(a),push_integer(0),n=u=c=s,d=l;c<=d?u<=d:u>=d;n=c<=d?++u:--u)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),add();return set_binding(a,p4)},Eval_tan=function(){return push(cadr(p1)),Eval(),tangent()},tangent=function(){return save(),yytangent(),restore()},yytangent=function(){var t,n;if(n=0,t=0,p1=pop(),car(p1)===symbol(ARCTAN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tan(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),tangent(),negate();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(TAN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 210:return push_rational(1,3),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 330:return push_rational(-1,3),push_integer(3),push_rational(1,2),power(),multiply();case 45:case 225:return push_integer(1);case 135:case 315:return push_integer(-1);case 60:case 240:return push_integer(3),push_rational(1,2),power();case 120:case 300:return push_integer(3),push_rational(1,2),power(),negate();default:return push(symbol(TAN)),push(p1),list(2)}},Eval_tanh=function(){var t;if(t=0,push(cadr(p1)),Eval(),p1=pop(),car(p1)===symbol(ARCTANH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tanh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(TANH),push(p1),list(2)},Eval_taylor=function(){return p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(24):push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),taylor()},taylor=function(){var t,n,a,s;if(t=0,n=0,save(),p4=pop(),p3=pop(),p2=pop(),p1=pop(),push(p3),n=pop_integer(),isNaN(n)){push_symbol(TAYLOR),push(p1),push(p2),push(p3),push(p4),list(5),restore();return}for(push(p1),push(p2),push(p4),subst(),Eval(),push_integer(1),p5=pop(),t=a=1,s=n;(1<=s?a<=s:a>=s)&&(push(p1),push(p2),derivative(),p1=pop(),!isZeroAtomOrTensor(p1));t=1<=s?++a:--a)push(p5),push(p2),push(p4),subtract(),multiply(),p5=pop(),push(p1),push(p2),push(p4),subst(),Eval(),push(p5),multiply(),push_integer(t),factorial(),divide(),add();return restore()},Eval_tensor=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,u=0,c=0,check_tensor_dimensions(p1),c=p1.tensor.nelem,u=p1.tensor.ndim,p2=alloc_tensor(c),p2.tensor.ndim=u,a=s=0,d=u;0<=d?s<d:s>d;a=0<=d?++s:--s)p2.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p2.tensor.elem,check_tensor_dimensions(p2),a=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;a=0<=Ct?++l:--l)push(t[a]),Eval(),n[a]=pop();return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),promote_tensor()},tensor_plus_tensor=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn;if(s=0,d=0,Ct=0,save(),p2=pop(),p1=pop(),d=p1.tensor.ndim,d!==p2.tensor.ndim){push(symbol(NIL)),restore();return}for(s=l=0,ar=d;0<=ar?l<ar:l>ar;s=0<=ar?++l:--l)if(p1.tensor.dim[s]!==p2.tensor.dim[s]){push(symbol(NIL)),restore();return}for(Ct=p1.tensor.nelem,p3=alloc_tensor(Ct),p3.tensor.ndim=d,s=u=0,en=d;0<=en?u<en:u>en;s=0<=en?++u:--u)p3.tensor.dim[s]=p1.tensor.dim[s];for(t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,s=c=0,tn=Ct;0<=tn?c<tn:c>tn;s=0<=tn?++c:--c)push(t[s]),push(n[s]),add(),a[s]=pop();return push(p3),restore()},tensor_times_scalar=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,u=0,c=0,save(),p2=pop(),p1=pop(),u=p1.tensor.ndim,c=p1.tensor.nelem,p3=alloc_tensor(c),p3.tensor.ndim=u,a=s=0,d=u;0<=d?s<d:s>d;a=0<=d?++s:--s)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;a=0<=Ct?++l:--l)push(t[a]),push(p2),multiply(),n[a]=pop();return push(p3),restore()},scalar_times_tensor=function(){var t,n,a,s,l,u,c,d,Ct;for(a=0,u=0,c=0,save(),p2=pop(),p1=pop(),u=p2.tensor.ndim,c=p2.tensor.nelem,p3=alloc_tensor(c),p3.tensor.ndim=u,a=s=0,d=u;0<=d?s<d:s>d;a=0<=d?++s:--s)p3.tensor.dim[a]=p2.tensor.dim[a];for(t=p2.tensor.elem,n=p3.tensor.elem,a=l=0,Ct=c;0<=Ct?l<Ct:l>Ct;a=0<=Ct?++l:--l)push(p1),push(t[a]),multiply(),n[a]=pop();return push(p3),restore()},check_tensor_dimensions=function(t){if(t.tensor.nelem!==t.tensor.elem.length){console.log("something wrong in tensor dimensions");debugger}},d_tensor_tensor=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on;if(s=0,l=0,Ct=0,ar=0,Ct=p1.tensor.ndim,ar=p1.tensor.nelem,Ct+1>=MAXDIM){push_symbol(DERIVATIVE),push(p1),push(p2),list(3);return}for(p3=alloc_tensor(ar*p2.tensor.nelem),p3.tensor.ndim=Ct+1,s=u=0,en=Ct;0<=en?u<en:u>en;s=0<=en?++u:--u)p3.tensor.dim[s]=p1.tensor.dim[s];for(p3.tensor.dim[Ct]=p2.tensor.dim[0],t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,s=c=0,tn=ar;0<=tn?c<tn:c>tn;s=0<=tn?++c:--c)for(l=d=0,on=p2.tensor.nelem;0<=on?d<on:d>on;l=0<=on?++d:--d)push(t[s]),push(n[l]),derivative(),a[s*p2.tensor.nelem+l]=pop();return push(p3)},d_scalar_tensor=function(){var t,n,a,s,l;for(p3=alloc_tensor(p2.tensor.nelem),p3.tensor.ndim=1,p3.tensor.dim[0]=p2.tensor.dim[0],t=p2.tensor.elem,n=p3.tensor.elem,a=s=0,l=p2.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)push(p1),push(t[a]),derivative(),n[a]=pop();return push(p3)},d_tensor_scalar=function(){var t,n,a,s,l,u,c;for(a=0,p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,a=s=0,u=p1.tensor.ndim;0<=u?s<u:s>u;a=0<=u?++s:--s)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=l=0,c=p1.tensor.nelem;0<=c?l<c:l>c;a=0<=c?++l:--l)push(t[a]),push(p2),derivative(),n[a]=pop();return push(p3)},compare_tensors=function(t,n){var a,s,l,u,c;if(a=0,t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=s=0,u=t.tensor.ndim;0<=u?s<u:s>u;a=0<=u?++s:--s){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}for(a=l=0,c=t.tensor.nelem;0<=c?l<c:l>c;a=0<=c?++l:--l)if(!equal(t.tensor.elem[a],n.tensor.elem[a]))return lessp(t.tensor.elem[a],n.tensor.elem[a])?-1:1;return 0},power_tensor=function(){var t,n,a,s,l,u,c,d;if(t=0,n=0,l=0,n=p1.tensor.ndim-1,p1.tensor.dim[0]!==p1.tensor.dim[n]){push_symbol(POWER),push(p1),push(p2),list(3);return}if(push(p2),l=pop_integer(),isNaN(l)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(l===0){for(p1.tensor.ndim!==2&&stop("power(tensor,0) with tensor rank not equal to 2"),l=p1.tensor.dim[0],p1=alloc_tensor(l*l),p1.tensor.ndim=2,p1.tensor.dim[0]=l,p1.tensor.dim[1]=l,t=a=0,u=l;0<=u?a<u:a>u;t=0<=u?++a:--a)p1.tensor.elem[l*t+t]=one;check_tensor_dimensions(p1),push(p1);return}for(l<0&&(l=-l,push(p1),inv(),p1=pop()),push(p1),d=[],t=s=1,c=l;(1<=c?s<c:s>c)&&(push(p1),inner(),!isZeroAtomOrTensor(stack[tos-1]));t=1<=c?++s:--s)d.push(void 0);return d},copy_tensor=function(){var t,n,a,s,l;for(t=0,save(),p1=pop(),p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;t=0<=s?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;t=0<=l?++a:--a)p2.tensor.elem[t]=p1.tensor.elem[t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),restore()},promote_tensor=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn;if(t=0,n=0,a=0,d=0,c=0,save(),p1=pop(),!istensor(p1)){push(p1),restore();return}for(p2=p1.tensor.elem[0],t=s=1,en=p1.tensor.nelem;1<=en?s<en:s>en;t=1<=en?++s:--s)compatible(p2,p1.tensor.elem[t])||stop("Cannot promote tensor due to inconsistent tensor components.");if(!istensor(p2)){push(p1),restore();return}for(c=p1.tensor.ndim+p2.tensor.ndim,c>MAXDIM&&stop("tensor rank > "+MAXDIM),d=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(d),p3.tensor.ndim=c,t=l=0,tn=p1.tensor.ndim;0<=tn?l<tn:l>tn;t=0<=tn?++l:--l)p3.tensor.dim[t]=p1.tensor.dim[t];for(n=u=0,on=p2.tensor.ndim;0<=on?u<on:u>on;n=0<=on?++u:--u)p3.tensor.dim[t+n]=p2.tensor.dim[n];for(a=0,t=Ct=0,fn=p1.tensor.nelem;0<=fn?Ct<fn:Ct>fn;t=0<=fn?++Ct:--Ct)for(p2=p1.tensor.elem[t],n=ar=0,dn=p2.tensor.nelem;0<=dn?ar<dn:ar>dn;n=0<=dn?++ar:--ar)p3.tensor.elem[a++]=p2.tensor.elem[n];return check_tensor_dimensions(p2),check_tensor_dimensions(p3),push(p3),restore()},compatible=function(t,n){var a,s,l;if(!istensor(t)&&!istensor(n))return 1;if(!istensor(t)||!istensor(n)||t.tensor.ndim!==n.tensor.ndim)return 0;for(a=s=0,l=t.tensor.ndim;0<=l?s<l:s>l;a=0<=l?++s:--s)if(t.tensor.dim[a]!==n.tensor.dim[a])return 0;return 1},Eval_test=function(){var t,n;for(n=p1,p1=cdr(p1);iscons(p1);){if(cdr(p1)===symbol(NIL)){push(car(p1)),Eval();return}if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(p1)),t==null){push(n);return}else if(t){push(cadr(p1)),Eval();return}else p1=cddr(p1)}return push_integer(0)},Eval_testeq=function(){var t,n,a;if(n=p1,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}if(push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}return push(n)},Eval_testge=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>=0?push_integer(1):push_integer(0)},Eval_testgt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>0?push_integer(1):push_integer(0)},Eval_testle=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<=0?push_integer(1):push_integer(0)},Eval_testlt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<0?push_integer(1):push_integer(0)},Eval_not=function(){var t,n;return n=p1,t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(n):push_integer(t?0:1)},Eval_and=function(){var t,n,a,s;for(s=p1,t=cdr(s),a=!1;iscons(t);)if(n=isZeroLikeOrNonZeroLikeOrUndetermined(car(t)),n==null)a=!0,t=cdr(t);else if(n)t=cdr(t);else if(!n){push_integer(0);return}return a?push(s):push_integer(1)},Eval_or=function(){var t,n,a,s;for(s=p1,n=cdr(s),a=!1;iscons(n);)if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(n)),t==null)a=!0,n=cdr(n);else if(t){push_integer(1);return}else t||(n=cdr(n));return a?push(s):push_integer(0)},cmp_args=function(){var t;if(t=0,push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),p1=pop(),p1.k!==NUM&&p1.k!==DOUBLE&&(push(p1),yyfloat(),Eval(),p1=pop()),isZeroAtomOrTensor(p1))return 0;switch(p1.k){case NUM:MSIGN(p1.q.a)===-1?t=-1:t=1;break;case DOUBLE:p1.d<0?t=-1:t=1;break;default:t=null}return t},transform=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox;if(Rn=0,save(),p1=null,p4=pop(),p3=pop(),DEBUG&&console.log("         !!!!!!!!!   transform on: "+p3),saveMetaBindings(),set_binding(symbol(METAX),p4),Rn=tos,push_integer(1),push(p3),push(p4),polyform(),push(p4),a=tos-2,decomp(n),en=tos-a,DEBUG)for(console.log("  "+en+" decomposed elements ====== "),l=u=0,tn=en;0<=tn?u<tn:u>tn;l=0<=tn?++u:--u)console.log("  decomposition element "+l+": "+stack[tos-1-l]);if(ax=!1,n){if(!isNumericAtom(p3))if(Cn=t,DEBUG&&console.log("applying transform: "+Cn),DEBUG&&console.log("scanning table entry "+Cn),push(Cn),push(symbol(SYMBOL_A_UNDERSCORE)),push(symbol(METAA)),subst(),push(symbol(SYMBOL_B_UNDERSCORE)),push(symbol(METAB)),subst(),push(symbol(SYMBOL_X_UNDERSCORE)),push(symbol(METAX)),subst(),p1=pop(),p5=car(p1),DEBUG&&console.log("template expression: "+p5),p6=cadr(p1),p7=cddr(p1),f_equals_a(Rn,n))ax=!0;else{for(DEBUG&&console.log("p3 at this point: "+p3),ox=[],DEBUG&&console.log("car(p3): "+car(p3)),on=p3,iscons(on)&&(ox.push(car(p3)),on=cdr(p3));iscons(on);)fn=car(on),on=cdr(on),DEBUG&&console.log("tos before recursive transform: "+tos),push(fn),push_symbol(NIL),DEBUG&&console.log("testing: "+fn),DEBUG&&console.log("about to try to simplify other term: "+fn),dn=transform(t,n),ax=ax||dn,ox.push(pop()),DEBUG&&console.log("tried to simplify other term: "+fn+" ...successful?: "+dn+" ...transformed: "+ox[ox.length-1]);if(ox.length!==0){for(Ct=0,c=ox.length;Ct<c;Ct++)l=ox[Ct],push(l);list(ox.length),p6=pop()}}}else for(ar=0,d=t.length;ar<d;ar++){if(s=t[ar],DEBUG&&(console.log("scanning table entry "+s),(s+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")!==-1))debugger;if(s&&(scan_meta(s),p1=pop(),p5=cadr(p1),p6=caddr(p1),p7=cdddr(p1),f_equals_a(Rn,n))){ax=!0;break}}return moveTos(Rn),ax?(push(p6),Eval(),p1=pop(),ax=!0):n?p1=p3:p1=symbol(NIL),restoreMetaBindings(),push(p1),restore(),ax},saveMetaBindings=function(){return push(get_binding(symbol(METAA))),push(get_binding(symbol(METAB))),push(get_binding(symbol(METAX)))},restoreMetaBindings=function(){return set_binding(symbol(METAX),pop()),set_binding(symbol(METAB),pop()),set_binding(symbol(METAA),pop())},f_equals_a=function(t,n){var a,s,l,u,c,d,Ct,ar,en;for(a=0,s=0,a=l=d=t,Ct=tos;d<=Ct?l<Ct:l>Ct;a=d<=Ct?++l:--l)for(set_binding(symbol(METAA),stack[a]),DEBUG&&console.log("  binding METAA to "+get_binding(symbol(METAA))),s=u=ar=t,en=tos;ar<=en?u<en:u>en;s=ar<=en?++u:--u){for(set_binding(symbol(METAB),stack[s]),DEBUG&&console.log("  binding METAB to "+get_binding(symbol(METAB))),p1=p7;iscons(p1)&&(push(car(p1)),Eval(),p2=pop(),!isZeroAtomOrTensor(p2));)p1=cdr(p1);if(!iscons(p1)&&(push(p3),DEBUG&&console.log("about to evaluate template expression: "+p5+" binding METAA to "+get_binding(symbol(METAA))+" and binding METAB to "+get_binding(symbol(METAB))+" and binding METAX to "+get_binding(symbol(METAX))),push(p5),n&&(c=expanding,expanding=!1),Eval(),n&&(expanding=c),DEBUG&&console.log("  comparing "+stack[tos-1]+" to: "+stack[tos-2]),subtract(),p1=pop(),isZeroAtomOrTensor(p1)))return DEBUG&&(console.log("binding METAA to "+get_binding(symbol(METAA))),console.log("binding METAB to "+get_binding(symbol(METAB))),console.log("binding METAX to "+get_binding(symbol(METAX))),console.log("comparing "+p3+" to: "+p5)),1}return 0},Eval_transpose=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),transpose()},transpose=function(){var t,n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx,vx,yx,Sx;for(c=0,ar=0,en=0,tn=0,fn=0,Rn=0,ax=0,Sx=0,a=[],s=[],c=on=0,cx=MAXDIM;0<=cx?on<cx:on>cx;c=0<=cx?++on:--on)a[c]=0,s[c]=0;if(save(),p3=pop(),p2=pop(),p1=pop(),isNumericAtom(p1)){push(p1),restore();return}if((isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2))&&isidentitymatrix(p1)){push(p1),restore();return}if(istranspose(p1)&&(d=car(cdr(cdr(p1))),Ct=car(cdr(cdr(cdr(p1)))),equal(d,p3)&&equal(Ct,p2)||equal(Ct,p3)&&equal(d,p2)||equal(d,symbol(NIL))&&equal(Ct,symbol(NIL))&&(isplusone(p3)&&isplustwo(p2)||isplusone(p2)&&isplustwo(p3)))){push(car(cdr(p1))),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),add(),p1=cdr(p1);restore();return}if(expanding&&ismultiply(p1)){for(p1=cdr(p1),push(one);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),multiply(),p1=cdr(p1);restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),n=[];iscons(p1);)n.push([car(p1),p2,p3]),p1=cdr(p1);for(u=dn=fx=n.length-1;fx<=0?dn<=0:dn>=0;u=fx<=0?++dn:--dn)push(n[u][0]),push(n[u][1]),push(n[u][2]),transpose(),u!==n.length-1&&inner();restore();return}if(!istensor(p1)){if(!isZeroAtomOrTensor(p1)){push_symbol(TRANSPOSE),push(p1),(!isplusone(p2)||!isplustwo(p3))&&(!isplusone(p3)||!isplustwo(p2))?(push(p2),push(p3),list(4)):list(2),restore();return}push(zero),restore();return}if(Rn=p1.tensor.ndim,ax=p1.tensor.nelem,Rn===1){push(p1),restore();return}for(push(p2),tn=pop_integer(),push(p3),fn=pop_integer(),(tn<1||tn>Rn||fn<1||fn>Rn)&&stop("transpose: index out of range"),tn--,fn--,p2=alloc_tensor(ax),p2.tensor.ndim=Rn,c=Cn=0,gx=Rn;0<=gx?Cn<gx:Cn>gx;c=0<=gx?++Cn:--Cn)p2.tensor.dim[c]=p1.tensor.dim[c];for(p2.tensor.dim[tn]=p1.tensor.dim[fn],p2.tensor.dim[fn]=p1.tensor.dim[tn],t=p1.tensor.elem,l=p2.tensor.elem,c=ox=0,mx=Rn;0<=mx?ox<mx:ox>mx;c=0<=mx?++ox:--ox)a[c]=0,s[c]=p1.tensor.dim[c];for(c=sx=0,px=ax;0<=px?sx<px:sx>px;c=0<=px?++sx:--sx){for(Sx=a[tn],a[tn]=a[fn],a[fn]=Sx,Sx=s[tn],s[tn]=s[fn],s[fn]=Sx,en=0,ar=lx=0,hx=Rn;0<=hx?lx<hx:lx>hx;ar=0<=hx?++lx:--lx)en=en*s[ar]+a[ar];for(Sx=a[tn],a[tn]=a[fn],a[fn]=Sx,Sx=s[tn],s[tn]=s[fn],s[fn]=Sx,l[en]=t[c],ar=yx=vx=Rn-1;(vx<=0?yx<=0:yx>=0)&&!(++a[ar]<s[ar]);ar=vx<=0?++yx:--yx)a[ar]=0}return push(p2),restore()},Eval_user_function=function(){var t,n;if(DEBUG&&console.log("Eval_user_function evaluating: "+car(p1)),car(p1)===symbol(SYMBOL_D)&&get_binding(symbol(SYMBOL_D))===symbol(SYMBOL_D)){Eval_derivative();return}if(push(car(p1)),Eval(),t=pop(),isNumericAtom(t)?stop("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):istensor(t)?stop("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):isstr(t)&&stop("expected function, found string instead."),p3=car(cdr(t)),p4=car(cdr(cdr(t))),p5=cdr(p1),car(t)!==symbol(FUNCTION)||t===car(p1)){for(n=tos,push(t),p1=p5;iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);list(tos-n);return}for(p1=p4,p2=p5,n=tos;iscons(p1)&&iscons(p2);)push(car(p1)),push(car(p2)),p1=cdr(p1),p2=cdr(p2);return list(tos-n),p6=pop(),push(p3),iscons(p6)&&(push(p6),rewrite_args()),Eval()},rewrite_args=function(){var t,n;if(n=0,save(),p2=pop(),p1=pop(),istensor(p1))return n=rewrite_args_tensor(),restore(),n;if(iscons(p1)){for(t=tos,car(p1)===car(p2)?(push_symbol(EVAL),push(car(cdr(p2))),list(2)):push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),n+=rewrite_args(),p1=cdr(p1);return list(tos-t),restore(),n}if(!issymbol(p1))return push(p1),restore(),0;for(p3=p2;iscons(p3);){if(p1===car(p3))return push(cadr(p3)),restore(),1;p3=cddr(p3)}return p3=get_binding(p1),push(p3),p1!==p3&&(push(p2),n=rewrite_args(),n===0&&(pop(),push(p1))),restore(),n},rewrite_args_tensor=function(){var t,n,a,s;for(a=0,t=0,push(p1),copy_tensor(),p1=pop(),t=n=0,s=p1.tensor.nelem;0<=s?n<s:n>s;t=0<=s?++n:--n)push(p1.tensor.elem[t]),push(p2),a+=rewrite_args(),p1.tensor.elem[t]=pop();return check_tensor_dimensions(p1),push(p1),a},Eval_zero=function(){var t,n,a,s,l,u,c,d;for(t=0,n=[],s=0,u=0,t=a=0,c=MAXDIM;0<=c?a<c:a>c;t=0<=c?++a:--a)n[t]=0;for(s=1,u=0,p2=cdr(p1);iscons(p2);){if(push(car(p2)),Eval(),t=pop_integer(),t<1||isNaN(t)){push(zero);return}s*=t,n[u++]=t,p2=cdr(p2)}if(u===0){push(zero);return}for(p1=alloc_tensor(s),p1.tensor.ndim=u,t=l=0,d=u;0<=d?l<d:l>d;t=0<=d?++l:--l)p1.tensor.dim[t]=n[t];return push(p1)},allocatedId=0,alloc_tensor=function(t){var n,a,s,l;for(n=0,s=new U,s.k=TENSOR,s.tensor=new tensor,s.tensor.nelem=t,n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)s.tensor.elem[n]=zero;return s.tensor.allocatedId=allocatedId,allocatedId++,check_tensor_dimensions(s),s},Find=function(t,n){var a,s,l;if(a=0,equal(t,n))return 1;if(istensor(t)){for(a=s=0,l=t.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)if(Find(t.tensor.elem[a],n))return 1;return 0}for(;iscons(t);){if(Find(car(t),n))return 1;t=cdr(t)}return 0},findPossibleClockForm=function(t){var n,a,s;if(n=0,isimaginaryunit(t))return 0;if(car(t)===symbol(POWER)&&!isinteger(caddr(p1))&&Find(cadr(t),imaginaryunit)||car(t)===symbol(POWER)&&equaln(cadr(t),-1)&&!isinteger(caddr(p1)))return 1;if(istensor(t)){for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(findPossibleClockForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleClockForm(car(t)))return 1;t=cdr(t)}return 0},findPossibleExponentialForm=function(t){var n,a,s;if(n=0,car(t)===symbol(POWER)&&cadr(t)===symbol(E))return Find(caddr(t),imaginaryunit);if(istensor(t)){for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(findPossibleExponentialForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleExponentialForm(car(t)))return 1;t=cdr(t)}return 0},$.Find=Find,init=function(){var t,n,a;if(t=0,flag=0,reset_after_error(),chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!flag){for(flag=1,t=n=0,a=NSYM;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],isSymbolReclaimable[t]=!1;return defn()}},defn_str=['version="'+version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"],defn=function(){var t,n,a,s,l;for(p0=symbol(NIL),p1=symbol(NIL),p2=symbol(NIL),p3=symbol(NIL),p4=symbol(NIL),p5=symbol(NIL),p6=symbol(NIL),p7=symbol(NIL),p8=symbol(NIL),p9=symbol(NIL),std_symbol("abs",ABS),std_symbol("add",ADD),std_symbol("adj",ADJ),std_symbol("and",AND),std_symbol("approxratio",APPROXRATIO),std_symbol("arccos",ARCCOS),std_symbol("arccosh",ARCCOSH),std_symbol("arcsin",ARCSIN),std_symbol("arcsinh",ARCSINH),std_symbol("arctan",ARCTAN),std_symbol("arctanh",ARCTANH),std_symbol("arg",ARG),std_symbol("atomize",ATOMIZE),std_symbol("besselj",BESSELJ),std_symbol("bessely",BESSELY),std_symbol("binding",BINDING),std_symbol("binomial",BINOMIAL),std_symbol("ceiling",CEILING),std_symbol("check",CHECK),std_symbol("choose",CHOOSE),std_symbol("circexp",CIRCEXP),std_symbol("clear",CLEAR),std_symbol("clearall",CLEARALL),std_symbol("clearpatterns",CLEARPATTERNS),std_symbol("clock",CLOCK),std_symbol("coeff",COEFF),std_symbol("cofactor",COFACTOR),std_symbol("condense",CONDENSE),std_symbol("conj",CONJ),std_symbol("contract",CONTRACT),std_symbol("cos",COS),std_symbol("cosh",COSH),std_symbol("decomp",DECOMP),std_symbol("defint",DEFINT),std_symbol("deg",DEGREE),std_symbol("denominator",DENOMINATOR),std_symbol("det",DET),std_symbol("derivative",DERIVATIVE),std_symbol("dim",DIM),std_symbol("dirac",DIRAC),std_symbol("divisors",DIVISORS),std_symbol("do",DO),std_symbol("dot",DOT),std_symbol("draw",DRAW),std_symbol("dsolve",DSOLVE),std_symbol("erf",ERF),std_symbol("erfc",ERFC),std_symbol("eigen",EIGEN),std_symbol("eigenval",EIGENVAL),std_symbol("eigenvec",EIGENVEC),std_symbol("eval",EVAL),std_symbol("exp",EXP),std_symbol("expand",EXPAND),std_symbol("expcos",EXPCOS),std_symbol("expsin",EXPSIN),std_symbol("factor",FACTOR),std_symbol("factorial",FACTORIAL),std_symbol("factorpoly",FACTORPOLY),std_symbol("filter",FILTER),std_symbol("float",FLOATF),std_symbol("floor",FLOOR),std_symbol("for",FOR),std_symbol("function",FUNCTION),std_symbol("Gamma",GAMMA),std_symbol("gcd",GCD),std_symbol("hermite",HERMITE),std_symbol("hilbert",HILBERT),std_symbol("imag",IMAG),std_symbol("component",INDEX),std_symbol("inner",INNER),std_symbol("integral",INTEGRAL),std_symbol("inv",INV),std_symbol("invg",INVG),std_symbol("isinteger",ISINTEGER),std_symbol("isprime",ISPRIME),std_symbol("laguerre",LAGUERRE),std_symbol("lcm",LCM),std_symbol("leading",LEADING),std_symbol("legendre",LEGENDRE),std_symbol("log",LOG),std_symbol("lookup",LOOKUP),std_symbol("mod",MOD),std_symbol("multiply",MULTIPLY),std_symbol("not",NOT),std_symbol("nroots",NROOTS),std_symbol("number",NUMBER),std_symbol("numerator",NUMERATOR),std_symbol("operator",OPERATOR),std_symbol("or",OR),std_symbol("outer",OUTER),std_symbol("pattern",PATTERN),std_symbol("patternsinfo",PATTERNSINFO),std_symbol("polar",POLAR),std_symbol("power",POWER),std_symbol("prime",PRIME),std_symbol("print",PRINT),std_symbol("print2dascii",PRINT2DASCII),std_symbol("printcomputer",PRINTFULL),std_symbol("printlatex",PRINTLATEX),std_symbol("printlist",PRINTLIST),std_symbol("printhuman",PRINTPLAIN),std_symbol("printLeaveEAlone",PRINT_LEAVE_E_ALONE),std_symbol("printLeaveXAlone",PRINT_LEAVE_X_ALONE),std_symbol("product",PRODUCT),std_symbol("quote",QUOTE),std_symbol("quotient",QUOTIENT),std_symbol("rank",RANK),std_symbol("rationalize",RATIONALIZE),std_symbol("real",REAL),std_symbol("rect",YYRECT),std_symbol("roots",ROOTS),std_symbol("round",ROUND),std_symbol("equals",SETQ),std_symbol("sgn",SGN),std_symbol("silentpattern",SILENTPATTERN),std_symbol("simplify",SIMPLIFY),std_symbol("sin",SIN),std_symbol("sinh",SINH),std_symbol("shape",SHAPE),std_symbol("sqrt",SQRT),std_symbol("stop",STOP),std_symbol("subst",SUBST),std_symbol("sum",SUM),std_symbol("symbolsinfo",SYMBOLSINFO),std_symbol("tan",TAN),std_symbol("tanh",TANH),std_symbol("taylor",TAYLOR),std_symbol("test",TEST),std_symbol("testeq",TESTEQ),std_symbol("testge",TESTGE),std_symbol("testgt",TESTGT),std_symbol("testle",TESTLE),std_symbol("testlt",TESTLT),std_symbol("transpose",TRANSPOSE),std_symbol("unit",UNIT),std_symbol("zero",ZERO),std_symbol("nil",NIL),std_symbol("autoexpand",AUTOEXPAND),std_symbol("bake",BAKE),std_symbol("assumeRealVariables",ASSUME_REAL_VARIABLES),std_symbol("last",LAST),std_symbol("lastprint",LAST_PRINT),std_symbol("last2dasciiprint",LAST_2DASCII_PRINT),std_symbol("lastfullprint",LAST_FULL_PRINT),std_symbol("lastlatexprint",LAST_LATEX_PRINT),std_symbol("lastlistprint",LAST_LIST_PRINT),std_symbol("lastplainprint",LAST_PLAIN_PRINT),std_symbol("trace",TRACE),std_symbol("forceFixedPrintout",FORCE_FIXED_PRINTOUT),std_symbol("maxFixedPrintoutDigits",MAX_FIXED_PRINTOUT_DIGITS),std_symbol("~",YYE),std_symbol("$DRAWX",DRAWX),std_symbol("$METAA",METAA),std_symbol("$METAB",METAB),std_symbol("$METAX",METAX),std_symbol("$SECRETX",SECRETX),std_symbol("version",VERSION),std_symbol("pi",PI),std_symbol("a",SYMBOL_A),std_symbol("b",SYMBOL_B),std_symbol("c",SYMBOL_C),std_symbol("d",SYMBOL_D),std_symbol("i",SYMBOL_I),std_symbol("j",SYMBOL_J),std_symbol("n",SYMBOL_N),std_symbol("r",SYMBOL_R),std_symbol("s",SYMBOL_S),std_symbol("t",SYMBOL_T),std_symbol("x",SYMBOL_X),std_symbol("y",SYMBOL_Y),std_symbol("z",SYMBOL_Z),std_symbol("I",SYMBOL_IDENTITY_MATRIX),std_symbol("a_",SYMBOL_A_UNDERSCORE),std_symbol("b_",SYMBOL_B_UNDERSCORE),std_symbol("x_",SYMBOL_X_UNDERSCORE),std_symbol("$C1",C1),std_symbol("$C2",C2),std_symbol("$C3",C3),std_symbol("$C4",C4),std_symbol("$C5",C5),std_symbol("$C6",C6),defineSomeHandyConstants(),s=codeGen,codeGen=!1,n=a=0,l=defn_str.length;0<=l?a<l:a>l;n=0<=l?++a:--a)t=defn_str[n],scan(t),DEBUG&&(console.log("... evaling "+t),console.log("top of stack:"),console.log(print_list(stack[tos-1]))),Eval(),pop();return codeGen=s},defineSomeHandyConstants=function(){return zero=new_integer(0),one=new_integer(1),push_double(1),one_as_double=pop(),push_symbol(POWER),DEBUG&&console.log(print_list(stack[tos-1])),push_integer(-1),DEBUG&&console.log(print_list(stack[tos-1])),push_rational(1,2),DEBUG&&console.log(print_list(stack[tos-1])),list(3),DEBUG&&console.log(print_list(stack[tos-1])),imaginaryunit=pop()},mcmp=function(t,n){return t.compare(n)},strcmp=function(t,n){return t===n?0:t>n?1:-1},doubleToReasonableString=function(t){var n,a;return codeGen?""+t:(isZeroAtomOrTensor(get_binding(symbol(FORCE_FIXED_PRINTOUT)))?(a=""+t,printMode===PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):a=a.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"*10^($1)"):a=a.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)")):(push(get_binding(symbol(MAX_FIXED_PRINTOUT_DIGITS))),n=pop_integer(),a=""+t.toFixed(n),a=a.replace(/(\.\d*?[1-9])0+$/gm,"$1"),a=a.replace(/\.0+$/gm,""),a.indexOf(".")===-1&&(a+=".0"),parseFloat(a)!==t&&(a=t.toFixed(n)+"...")),a)},clear_term=function(){},isspace=function(t){return t==null?!1:t===" "||t==="	"||t===`
`||t==="\v"||t==="\f"||t==="\r"},isdigit=function(t){return t==null?!1:/^\d+$/.test(t)},isalpha=function(t){return t==null?!1:t.search(/[^A-Za-z]/)===-1},isalphaOrUnderscore=function(t){return t==null?!1:t.search(/[^A-Za-z_]/)===-1},isalnumorunderscore=function(t){return t==null?!1:isalphaOrUnderscore(t)||isdigit(t)},count=function(t){var n;if(iscons(t))for(n=0;iscons(t);)n+=count(car(t))+1,t=cdr(t);else n=1;return n},countOccurrencesOfSymbol=function(t,n){var a;if(a=0,iscons(n))for(;iscons(n);)a+=countOccurrencesOfSymbol(t,car(n)),n=cdr(n);else equal(t,n)&&(a=1);return a},countsize=function(t){var n,a,s,l;if(s=0,istensor(t))for(n=a=0,l=t.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)s+=t.tensor.elem[n];else if(iscons(t))for(;iscons(t);)s+=count(car(t))+1,t=cdr(t);else s=1;return s},stop=function(t){var n;throw errorMessage+="Stop: ",errorMessage+=t,n=errorMessage,errorMessage="",moveTos(0),new Error(n)},findDependenciesInScript=function(t,n){var a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn,Rn,ax,ox,sx,lx,cx,fx,gx,mx,px,hx,vx,yx,Sx,_x,Ex,bx,Ax,Mx,Rx,Cx,Lx,qx,Ix,Px,Nx,Bx,$x,Vx,Gx,Zx,jx,Hx,iE,Xx;for(DEBUG&&console.log("stringToBeParsed: "+t),Gx=new Date().getTime(),codeGen=!0,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,dn=0,s="",a="",hx=0,d={affectsVariables:[],affectedBy:[]},Bx=t;;){try{errorMessage="",check_stack(),DEBUG&&console.log("findDependenciesInScript: scanning"),hx=scan(t.substring(dn)),DEBUG&&console.log("scanned"),pop(),check_stack()}catch(rE){ar=rE,PRINTOUTRESULT&&console.log(ar),errorMessage=ar+"",reset_after_error();break}if(hx===0)break;dn+=hx}Vx="",DEBUG&&console.log("all local dependencies ----------------"),Vx+="All local dependencies: ";for(Cn in symbolsDependencies){for(iE=symbolsDependencies[Cn],DEBUG&&console.log("variable "+Cn+" depends on: "),d.affectsVariables.push(Cn),Vx+=" variable "+Cn+" depends on: ",Rn=0,ax=iE.length;Rn<ax;Rn++)on=iE[Rn],DEBUG&&console.log("    "+on),on[0]!=="'"&&d.affectedBy.push(on),Vx+=on+", ";Vx+="; "}for(Vx+=". ",DEBUG&&console.log("Symbols with reassignments ----------------"),Vx+="Symbols with reassignments: ",px=0,ox=symbolsHavingReassignments.length;px<ox;px++)Cn=symbolsHavingReassignments[px],d.affectedBy.indexOf(Cn)===-1&&(d.affectedBy.push(Cn),Vx+=Cn+", ");for(Vx+=". ",DEBUG&&console.log("Symbols in expressions without assignments ----------------"),Vx+="Symbols in expressions without assignments: ",vx=0,sx=symbolsInExpressionsWithoutAssignments.length;vx<sx;vx++)Cn=symbolsInExpressionsWithoutAssignments[vx],d.affectedBy.indexOf(Cn)===-1&&(d.affectedBy.push(Cn),Vx+=Cn+", ");if(Vx+=". ",d.affectedBy.push("PATTERN_DEPENDENCY"),patternHasBeenFound&&(d.affectsVariables.push("PATTERN_DEPENDENCY"),Vx+=" - PATTERN_DEPENDENCY inserted - "),DEBUG&&console.log("All dependencies recursively ----------------"),Vx+="All dependencies recursively: ",Nx=["",""],tn="",Rx="",errorMessage===""&&!n){try{s="",a="",Nx=run(t,!0),s="",a=""}catch(rE){ar=rE,PRINTOUTRESULT&&console.log(ar),errorMessage=ar+"",init()}if(errorMessage==="")for(Cn in symbolsDependencies){for(codeGen=!0,DEBUG&&console.log("  variable "+Cn+" is: "+get_binding(usr_symbol(Cn)).toString()),codeGen=!1,DEBUG&&console.log("  variable "+Cn+" depends on: "),Vx+=" variable "+Cn+" depends on: ",Cx=[],Xx=[],u=[],recursiveDependencies(Cn,Cx,[],Xx,[],u),Sx=0,lx=Xx.length;Sx<lx;Sx++)on=Xx[Sx],DEBUG&&console.log("    --> cycle through "+on);for(Ax=0,cx=Cx.length;Ax<cx;Ax++)on=Cx[Ax],DEBUG&&console.log("    "+on),Vx+=on+", ";for(Vx+="; ",Mx=0,fx=u.length;Mx<fx;Mx++)on=u[Mx],Vx+=" "+on+", ";for(DEBUG&&console.log("  code generation:"+Cn+" is: "+get_binding(usr_symbol(Cn)).toString()),push(get_binding(usr_symbol(Cn))),qx=[],Ix=[],Px=0,gx=Cx.length;Px<gx;Px++)Ct=Cx[Px],Ct[0]==="'"&&(c=Ct.substring(1),Ex=usr_symbol(c),yx=usr_symbol("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+c),qx.push(Ex),Ix.push(yx),push(Ex),push(yx),subst(),DEBUG&&console.log("after substitution: "+stack[tos-1]));try{simplifyForCodeGeneration()}catch(rE){ar=rE,PRINTOUTRESULT&&console.log(ar),errorMessage=ar+"",init()}for(fn=$x=0,Lx=qx.length;0<=Lx?$x<Lx:$x>Lx;fn=0<=Lx?++$x:--$x)push(Ix[fn]),push(qx[fn]),subst();if(clearRenamedVariablesToAvoidBindingToExternalScope(),errorMessage===""){if(Zx=pop(),Hx=[],collectUserSymbols(Zx,Hx),s="",a="",codeGen=!0,en=Zx.toString(),codeGen=!1,_x=printMode,printMode=PRINTMODE_LATEX,l=Zx.toString(),printMode=_x,Xx.indexOf(Cn)!==-1)tn+="// "+Cn+" is part of a cyclic dependency, no code generated.",Rx+="#"+Cn+" is part of a cyclic dependency, no code generated.";else if(Hx=Hx.filter(function(rE){return predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(rE+"")===-1}),Hx=Hx.filter(function(rE){return Cx.indexOf(rE+"")!==-1||Cx.indexOf("'"+rE)!==-1}),Hx.length!==0){for(bx="(",jx=0,mx=Hx.length;jx<mx;jx++)on=Hx[jx],on.printname!==Cn&&(bx+=on.printname+", ");bx=bx.replace(/, $/gm,""),bx+=")",tn+=Cn+" = function "+bx+" { return ( "+en+" ); }",Rx+=Cn+bx+" = "+l}else tn+=Cn+" = "+en+";",Rx+=Cn+" = "+l;tn+=`
`,Rx+=`
`,DEBUG&&console.log("    "+tn)}}}return tn=tn.replace(/\n$/gm,""),Rx=Rx.replace(/\n$/gm,""),symbolsDependencies={},symbolsHavingReassignments=[],patternHasBeenFound=!1,symbolsInExpressionsWithoutAssignments=[],DEBUG&&console.log("testable string: "+Vx),TIMING_DEBUGS&&console.log("findDependenciesInScript time for: "+Bx+" : "+(new Date().getTime()-Gx)+"ms"),[Vx,Nx[0],tn,Rx,Nx[1],errorMessage,d]},recursiveDependencies=function(t,n,a,s,l,u){var c,d,Ct,ar,en,tn,on,fn;if(a.push(t),symbolsDependencies[l[l.length-1]]!=null&&symbolsDependencies[l[l.length-1]].indexOf("'"+t)!==-1)return DEBUG&&console.log("can't keep following the chain of "+t+" because it's actually a variable bound to a parameter"),n.indexOf("'"+t)===-1&&n.indexOf(t)===-1&&n.push(t),n;if(l.push(t),symbolsDependencies[t]==null)return n.indexOf(t)===-1&&n.push(t),n;for(fn=symbolsDependencies[t],ar=0,en=fn.length;ar<en;ar++)if(d=fn[ar],l.indexOf(d)!==-1){for(DEBUG&&console.log("  found cycle:"),c="",on=0,tn=l.length;on<tn;on++)Ct=l[on],s.indexOf(Ct)===-1&&s.push(Ct),DEBUG&&console.log(Ct+" --> "),c+=Ct+" --> ";DEBUG&&console.log(" ... then "+d+" again"),c+=" ... then "+d+" again",u.push(c),s.indexOf(d)===-1&&s.push(d)}else recursiveDependencies(d,n,a,s,l,u),l.pop();return n},inited=!1,latexErrorSign="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}",turnErrorMessageToLatex=function(t){return t=t.replace(/\n/g,""),t=t.replace(/_/g,"} \\_ \\text{"),t=t.replace(new RegExp(String.fromCharCode(transpose_unicode),"g"),"}{}^{T}\\text{"),t=t.replace(new RegExp(String.fromCharCode(dotprod_unicode),"g"),"}\\cdot \\text{"),t=t.replace("Stop:","}  \\quad \\text{Stop:"),t=t.replace("->","}  \\rightarrow \\text{"),t=t.replace("?","}\\enspace "+latexErrorSign+" \\enspace  \\text{"),t="$$\\text{"+t.replace(/\n/g,"")+"}$$",t},normaliseDots=function(t){return t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("\uD800","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t},TIMING_DEBUGS=!1,run=function(t,n=!1){var a,s,l,u,c,d,Ct,ar,en,tn,on;if(tn=new Date().getTime(),t=normaliseDots(t),t==="selftest"){selftest();return}for(inited||(inited=!0,init()),Ct=0,d=0,s="",a="";;){try{errorMessage="",check_stack(),Ct=scan(t.substring(d)),p1=pop(),check_stack()}catch(fn){c=fn,PRINTOUTRESULT&&console.log(c),s+=c.message,n&&(en=turnErrorMessageToLatex(c.message),a+=en),reset_after_error();break}if(Ct===0)break;d+=Ct,push(p1);try{stringsEmittedByUserPrintouts="",top_level_eval(),p2=pop(),check_stack(),isstr(p2)&&(DEBUG&&console.log(p2.str),DEBUG&&console.log(`
`)),p2===symbol(NIL)?(u=stringsEmittedByUserPrintouts,n&&(l="$$"+stringsEmittedByUserPrintouts+"$$")):(u=print_expr(p2),u+=`
`,n&&(l="$$"+collectLatexStringFromReturnValue(p2)+"$$",DEBUG&&console.log("collectedLatexResult: "+l))),s+=u,n&&(a+=l),PRINTOUTRESULT&&(DEBUG&&console.log("printline"),DEBUG&&console.log(u)),PRINTOUTRESULT&&(DEBUG&&console.log("display:"),print2dascii(p2)),n&&(a+=`
`)}catch(fn){c=fn,u=c.message,n&&(l=turnErrorMessageToLatex(c.message)),PRINTOUTRESULT&&console.log(u),s+=u,u!==""&&(s+=`
`),n&&(a+=l,a+=`
`),init()}}return s[s.length-1]===`
`&&(s=s.substring(0,s.length-1)),n&&a[a.length-1]===`
`&&(a=a.substring(0,a.length-1)),n?(DEBUG&&console.log("allReturnedLatexStrings: "+a),ar=[s,a]):ar=s,TIMING_DEBUGS&&(on="run time on: "+t+" : "+(new Date().getTime()-tn)+"ms",console.log(on)),s="",a="",ar},check_stack=function(){if(tos!==0){debugger;stop("stack error")}if(frame!==TOS){debugger;stop("frame error")}if(chainOfUserSymbolsNotFunctionsBeingEvaluated.length!==0){debugger;stop("symbols evaluation still ongoing?")}if(evaluatingAsFloats!==0){debugger;stop("numeric evaluation still ongoing?")}if(evaluatingPolar!==0){debugger;return stop("evaluation of polar still ongoing?")}},top_level_eval=function(){var t,n,a;if(DEBUG&&console.log("#### top level eval"),trigmode=0,a=symbol(AUTOEXPAND),isZeroAtomOrTensor(get_binding(a))?expanding=0:expanding=1,n=top(),Eval(),t=top(),t!==symbol(NIL)&&(set_binding(symbol(LAST),t),isZeroAtomOrTensor(get_binding(symbol(BAKE)))||(bake(),t=top()),!((n===symbol(SYMBOL_I)||n===symbol(SYMBOL_J))&&isimaginaryunit(t)))){if(isimaginaryunit(get_binding(symbol(SYMBOL_J))))return push(imaginaryunit),push_symbol(SYMBOL_J),subst();if(isimaginaryunit(get_binding(symbol(SYMBOL_I))))return push(imaginaryunit),push_symbol(SYMBOL_I),subst()}},check_esc_flag=function(){if(esc_flag)return stop("esc key")},clearAlgebraEnvironment=function(){return do_clearall()},computeDependenciesFromAlgebra=function(t){var n,a,s,l,u,c,d;if(DEBUG&&console.log("computeDependenciesFromAlgebra!!!"),a=!0,t=normaliseDots(t),!a){for(userSimplificationsInListForm=[],d="",s=0,l=userSimplificationsInListForm.length;s<l;s++)n=userSimplificationsInListForm[s],d+="silentpattern("+car(n)+","+car(cdr(n))+","+car(cdr(cdr(n)))+`)
`;do_clearall(),t=d+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}if(DEBUG){for(console.log("computeDependenciesFromAlgebra: patterns in the list --------------- "),c=0,u=userSimplificationsInListForm.length;c<u;c++)n=userSimplificationsInListForm[c],console.log(car(n)+","+cdr(n)+")");console.log("...end of list --------------- ")}return findDependenciesInScript(t,!0)[6]},computeResultsAndJavaScriptFromAlgebra=function(t){var n,a,s,l,u,c,d,Ct,ar,en,tn,on,fn,dn,Cn;if(l=!0,dn=new Date().getTime(),TIMING_DEBUGS&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+t+" at: "+new Date),t=normaliseDots(t),on=t,DEBUG){for(console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- "),u=0,d=userSimplificationsInListForm.length;u<d;u++)s=userSimplificationsInListForm[u],console.log(car(s)+","+cdr(s)+")");console.log("...end of list --------------- ")}if(!l){for(userSimplificationsInListForm=[],Cn="",ar=0,Ct=userSimplificationsInListForm.length;ar<Ct;ar++)s=userSimplificationsInListForm[ar],Cn+="silentpattern("+car(s)+","+car(cdr(s))+","+car(cdr(cdr(s)))+`)
`;do_clearall(),t=Cn+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}return[fn,tn,n,en,c,errorMessage,a]=findDependenciesInScript(t),(en!==""||errorMessage!=="")&&(tn+=`
`+en,errorMessage!==""&&(tn+=`
`+errorMessage),tn=tn.replace(/\n/g,`

`),c+=`
$$`+en+"$$",errorMessage!==""&&(c+=turnErrorMessageToLatex(errorMessage)),c=c.replace(/\n/g,`

`)),c=c.replace(/\n*/,""),c=c.replace(/\$\$\$\$\n*/g,""),n=n.replace(/Math\./g,""),n=n.replace(/\n/g,`

`),TIMING_DEBUGS&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+on+" : "+(new Date().getTime()-dn)+"ms"),{code:n,result:c,latexResult:c,dependencyInfo:a}},(exports!==null?exports:this).run=run,(exports!==null?exports:this).findDependenciesInScript=findDependenciesInScript,(exports!==null?exports:this).computeDependenciesFromAlgebra=computeDependenciesFromAlgebra,(exports!==null?exports:this).computeResultsAndJavaScriptFromAlgebra=computeResultsAndJavaScriptFromAlgebra,(exports!==null?exports:this).clearAlgebraEnvironment=clearAlgebraEnvironment,tos=0,nil_symbols=0,push=function(t){if(t==null)debugger;if(t.isZero!=null)debugger;return t===symbol(NIL)&&(nil_symbols++,DEBUG&&console.log("pushing symbol(NIL) #"+nil_symbols)),tos>=frame&&stop("stack overflow"),stack[tos++]=t},moveTos=function(t){if(tos<=t){tos=t;return}for(;tos>t;)stack[tos]=null,tos--},top=function(){return stack[tos-1]},pop=function(){var t;if(tos===0){debugger;stop("stack underflow")}if(stack[tos-1]==null)debugger;return t=stack[--tos],stack[tos]=null,t},push_frame=function(t){var n,a,s,l;if(n=0,frame-=t,frame<tos){debugger;stop("frame overflow, circular reference?")}for(l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(stack[frame+n]=symbol(NIL));return l},pop_frame=function(t){if(frame+=t,frame>TOS)return stop("frame underflow")},save=function(){if(frame-=10,frame<tos){debugger;stop("frame overflow, circular reference?")}return stack[frame+0]=p0,stack[frame+1]=p1,stack[frame+2]=p2,stack[frame+3]=p3,stack[frame+4]=p4,stack[frame+5]=p5,stack[frame+6]=p6,stack[frame+7]=p7,stack[frame+8]=p8,stack[frame+9]=p9},restore=function(){return frame>TOS-10&&stop("frame underflow"),p0=stack[frame+0],p1=stack[frame+1],p2=stack[frame+2],p3=stack[frame+3],p4=stack[frame+4],p5=stack[frame+5],p6=stack[frame+6],p7=stack[frame+7],p8=stack[frame+8],p9=stack[frame+9],frame+=10},swap=function(){var t,n;return t=pop(),n=pop(),push(t),push(n)},dupl=function(){var t;return t=pop(),push(t),push(t)},$.dupl=dupl,$.swap=swap,$.restore=restore,$.save=save,$.push=push,$.pop=pop,Eval_symbolsinfo=function(){var t;return t=symbolsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},symbolsinfo=function(){var t,n,a,s,l,u,c;for(u="",n=a=s=NIL+1,l=symtab.length;s<=l?a<l:a>l;n=s<=l?++a:--a){if(symtab[n].printname===""){if(isSymbolReclaimable[n]===!1)break;continue}c=symtab[n]+"",t=(binding[n]+"").substring(0,4),u+="symbol: "+c+" size: "+countsize(binding[n])+" value: "+t+`...
`}return u},std_symbol=function(t,n,a){var s;if(s=symtab[n],s==null)debugger;return s.printname=t,a!=null?s.latexPrint=a:s.latexPrint=t},usr_symbol=function(t){var n,a,s;for(n=0,n=a=0,s=NSYM;0<=s?a<s:a>s;n=0<=s?++a:--a){if(t===symtab[n].printname)return symtab[n];if(symtab[n].printname==="")break}return n===NSYM&&stop("symbol table overflow"),symtab[n]=new U,symtab[n].k=SYM,symtab[n].printname=t,binding[n]=symtab[n],isSymbolReclaimable[n]=!1,symtab[n]},get_printname=function(t){return t.k!==SYM&&stop("symbol error"),t.printname},set_binding=function(t,n){var a;if(t.k!==SYM&&stop("symbol error"),a=symtab.indexOf(t),symtab.indexOf(t,a+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> set_binding lookup "+a),isSymbolReclaimable[a]=!1,binding[a]=n},get_binding=function(t){var n;if(t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> get_binding lookup "+n),binding[n]},is_usr_symbol=function(t){var n;return t.k!==SYM?!1:(n=symnum(t),n>PI&&n!==SYMBOL_I&&n!==SYMBOL_IDENTITY_MATRIX)},lookupsTotal=0,symnum=function(t){var n;if(lookupsTotal++,t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> symnum lookup "+n+" lookup # "+lookupsTotal),n},push_symbol=function(t){return push(symtab[t])},clear_symbols=function(){var t,n,a,s,l;for(l=[],t=n=a=NIL+1,s=NSYM;a<=s?n<s:n>s;t=a<=s?++n:--n){if(symtab[t].printname===""){if(isSymbolReclaimable[t]===!1)break;continue}symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],l.push(isSymbolReclaimable[t]=!1)}return l},collectUserSymbols=function(t,n=[]){var a,s,l;if(is_usr_symbol(t)&&n.indexOf(t)===-1){n.push(t);return}if(istensor(t)){for(a=s=0,l=t.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)collectUserSymbols(t.tensor.elem[a],n);return}for(;iscons(t);)collectUserSymbols(car(t),n),t=cdr(t)},$.get_binding=get_binding,$.set_binding=set_binding,$.usr_symbol=usr_symbol,$.symbolsinfo=symbolsinfo,$.collectUserSymbols=collectUserSymbols,inited||(inited=!0,init()),$.init=init,parse_internal=function(t){return typeof t=="string"?scan(t):typeof t=="number"?t%1===0?push_integer(t):push_double(t):t instanceof U?push(t):(console.warn("unknown argument type",t),push(symbol(NIL)))},parse=function(t){var n,a;try{parse_internal(t),n=pop(),check_stack()}catch(s){throw a=s,reset_after_error(),a}return n},exec=function(t,...n){var a,s,l,u,c,d;for(l=get_binding(usr_symbol(t)),check_stack(),push(l),u=0,c=n.length;u<c;u++)a=n[u],parse_internal(a);list(1+n.length),p1=pop(),push(p1);try{top_level_eval(),d=pop(),check_stack()}catch(Ct){throw s=Ct,reset_after_error(),s}return d},$.exec=exec,$.parse=parse,(function(){var t,n,a,s,l;for(t=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"],l=[],a=0,s=t.length;a<s;a++)n=t[a],l.push($[n]=exec.bind(this,n));return l})()}).call(algebrite)})(algebrite)),algebrite}var algebriteExports=requireAlgebrite();function nthRoot(t,n){if(typeof t!="bigint"||typeof n!="number"||Math.floor(n)!==n||n<1||n>Number.MAX_SAFE_INTEGER)throw new RangeError;if(n===1)return t;const a=Number(t+0n);if(a===0)return 0n;if(a<0){if(n%2===0)throw new RangeError;return-BigInt(nthRoot(-t,n))}const s=Number.MAX_SAFE_INTEGER+1,l=Math.floor(s/(n===2?2:Math.pow(2,1+Math.ceil(Math.log2(Math.log2(s))))));if(a<l){const en=Math.floor(n===2?Math.sqrt(a+.5):Math.exp(Math.log(a+.5)/n));return BigInt(en)}const u=n===2?Math.sqrt(a):Math.exp(Math.log(a)/n);if(u<l){if(Math.floor(u-u/l)===Math.floor(u+u/l))return BigInt(Math.floor(u));const en=BigInt(Math.floor(u+.5));return t<en**BigInt(n)?en-1n:en}const c=t.toString(16).length*4;if(c<=n)return 1n;const d=Math.floor((Math.floor(c/n)+1)/2);let Ct=BigInt(nthRoot(t>>BigInt(d*n),n))+1n<<BigInt(d),ar=-1n;do ar=Ct,n===2?Ct=Ct+t/Ct>>1n:Ct=(BigInt(n-1)*Ct+t/Ct**BigInt(n-1))/BigInt(n);while(Ct<ar);return ar}function BitSet(t){const n=Math.ceil(t/256)*8;this.data=new Uint32Array(n),this.data64=new BigUint64Array(this.data.buffer),this.size=t}BitSet.prototype.nextSetBit=function(t){if((t|0)>=(this.size|0))return-1;const n=this.data;let a=t>>5,s=t&31;for(;n[a]>>s===0;){if(a+=1,a===n.length)return-1;s=0}return s+=31-Math.clz32(n[a]>>s&-(n[a]>>s)),a*32+s};BitSet.prototype.toggle=function(t){if((t|0)>=(this.size|0))throw new RangeError;this.data[t>>5]^=1<<(t&31)};BitSet.prototype.xor=function(t){const n=this.data64,a=t.data64,s=n.length|0;if(s!==a.length||s%2!==0)throw new RangeError;for(let l=0;l<s;l+=2)n[l+0]^=a[l+0],n[l+1]^=a[l+1]};BitSet.prototype.clear=function(){for(let t=0;t<this.data.length;t+=1)this.data[t]=0};BitSet.prototype.toString=function(){return this.data.map(t=>(t>>>0).toString(2).padStart(32,"0").split("").reverse().join("")).join("").slice(0,this.size)};function solve(t,n=!1){const a=new Array(t).fill(null),s=new Array(t).fill(void 0);let l=null,u=1;const c={next:function(Ct){for(;;){if(u===1)return u=0,{value:l,done:!1};u=1;const ar=Ct[0],en=Ct[1];let tn=null;if(n)tn=ar;else{tn=new BitSet(t);for(let on=0;on<ar.length;on++){const fn=ar[on],dn=t-1-fn;tn.toggle(dn)}}for(let on=tn.nextSetBit(0);on!==-1&&tn!=null;on=tn==null?-1:tn.nextSetBit(on+1)){const fn=a[on];fn!=null?(tn.xor(fn),tn.toggle(on)):(s[on]=en,a[on]=tn,tn=null)}if(tn!=null){const on=[];for(let fn=tn.nextSetBit(0);fn!==-1;fn=tn.nextSetBit(fn+1))on.push(s[fn]);on.push(en),l=on}else l=null}}};return c[globalThis.Symbol.iterator]=function(){return this},c}function SparseGF2Matrix(t,n){this.rows=new Array(t).fill(null),this.columns=new Array(n).fill(null).map(a=>[])}SparseGF2Matrix.prototype.addRow=function(t,n){function a(l){const u=l.slice(0);u.sort((d,Ct)=>d-Ct);let c=-1;for(let d=0;d<u.length;d++)d===0||u[c]!==u[d]?(c+=1,u[c]=u[d]):c-=1;return u.slice(0,c+1)}const s=a(t);this.rows[n]=s;for(let l=0;l<s.length;l++)this.columns[s[l]].push(n)};SparseGF2Matrix.prototype.deleteColumn=function(t){const n=this.columns[t];if(n!=null){for(let a=0;a<n.length;a++){let s=n[a];const l=this.rows[s].indexOf(t);console.assert(l!==-1),this.rows[s].splice(l,1)}this.columns[t]=null}};SparseGF2Matrix.prototype.deleteRow=function(t){const n=this.rows[t];if(n!=null){for(let a=0;a<n.length;a++){const s=n[a];this.columns[s]=this.columns[s].filter(l=>l!=t)}this.rows[t]=null}};SparseGF2Matrix.prototype.reduce=function(t,n){const a=this.rows[t];console.assert(a.length===1);const s=a[0],l=this.columns[s];for(let u=l.length-1;u>=0;u--)if(l[u]!==t){const c=l[u],d=this.rows[c],Ct=d.indexOf(s);console.assert(Ct!==-1),d.splice(Ct,1),l.splice(u,1),n.push({a:c,b:t})}console.assert(l.length===1&&l[0]===t),this.columns[s]=null,this.rows[t]=null};function sparseSolve(t){if(t<1024*2)return solve(t);function n(fn,dn){return fn.sort((Cn,Rn)=>Cn-Rn),fn[Math.max(fn.length-dn,0)]}function a(fn,dn){const Cn=fn.columns.map(ax=>ax==null?0:ax.length),Rn=n(Cn,dn);for(let ax=0;ax<fn.columns.length;ax++){const ox=fn.columns[ax];ox!=null&&ox.length>=Rn&&fn.deleteColumn(ax)}}function s(fn,dn){const Cn=[];for(let Rn=0;Rn<fn.rows.length;Rn++){const ax=fn.rows[Rn];ax!=null&&ax.length===1&&Cn.push(Rn)}for(let Rn=0;Rn<Cn.length;Rn++){const ax=Cn[Rn],ox=fn.rows[ax];ox!=null&&ox.length===1?(fn.reduce(ax,c),dn[ox[0]]=!0):console.assert(ox!=null&&ox.length===0)}return Cn.length}const l=[],u=[],c=[];let d=null,Ct=null,ar=-1;function en(){const dn=new SparseGF2Matrix(l.length,t);for(let px=0;px<l.length;px++)dn.addRow(l[px].filter(hx=>hx>=2585),px);const Cn=new Array(t).fill(!1),Rn=128;let ax=-1;do{ax=dn.columns.reduce((hx,vx)=>hx+(vx==null?0:1),0);const px=Math.ceil(dn.rows.length/Rn)-s(dn,Cn);px>0&&a(dn,px)}while(ax>0);const ox=new Array(t).fill(0);let sx=0;for(let px=0;px<dn.columns.length;px++)Cn[px]?ox[px]=-1:(ox[px]=sx,sx+=1);const lx=sx,cx=[];function fx(px){let hx=null;cx.length>0?(hx=cx.pop(),hx.clear()):hx=new BitSet(lx);for(let vx=0;vx<px.length;vx++){const yx=ox[px[vx]];yx!==-1&&hx.toggle(lx-1-yx)}return hx}d=l.map(px=>null);const gx=dn.rows.map(px=>px!=null?1/0:-1);for(let px=c.length-1;px>=0;px-=1)gx[c[px].a]!==-1?gx[c[px].b]===-1&&(gx[c[px].b]=px):c[px]=null;const mx=function(px,hx){return d[px]==null&&(console.assert(gx[px]>=hx),d[px]=fx(l[px])),d[px]};for(let px=0;px<c.length;px++)c[px]!=null&&(mx(c[px].a,px).xor(mx(c[px].b,px)),gx[c[px].b]<=px&&(cx.push(d[c[px].b]),d[c[px].b]=null));for(let px=0;px<dn.rows.length;px++)dn.rows[px]!=null?(console.assert(dn.rows[px].length===0),d[px]=mx(px,1/0)):d[px]=null;Ct=solve(lx,!0),Ct.next()}let tn=!0;const on={next:function(dn){if(tn)return tn=!1,{value:null,done:!1};if(Ct==null){if(l.length<t+32)return l.push(dn[0]),u.push(dn[1]),{value:null,done:!1};en()}for(let Cn=ar+1;Cn<d.length;Cn++){ar=Cn;const Rn=d[Cn];if(Rn!=null){const ax=Ct.next([Rn,Cn]).value;if(ax!=null){const ox=new Array(l.length).fill(0);for(let lx=0;lx<ax.length;lx++){if(ox[ax[lx]]!==0)throw new RangeError;ox[ax[lx]]=1}for(let lx=c.length-1;lx>=0;lx--)c[lx]!=null&&ox[c[lx].a]===1&&(ox[c[lx].b]=1-ox[c[lx].b]);const sx=[];for(let lx=0;lx<ox.length;lx++)ox[lx]===1&&sx.push(u[lx]);return{value:sx,done:!1}}}}}};return on[globalThis.Symbol.iterator]=function(){return this},on}solve.solve=solve;solve.sparseSolve=sparseSolve;sparseSolve.solve=solve;sparseSolve.sparseSolve=sparseSolve;function modPowSmall$1(t,n,a){let s=1;for(;n!==0;)n%2===0?(n/=2,t=t*t,t=t-Math.floor(t/a)*a):(n-=1,s=s*t,s=s-Math.floor(s/a)*a);return s}function legendre$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,s=0;t!==0;){for(;(t&1)===0;)t>>=1,s=n&7,(s===3||s===5)&&(a=-a);s=n,n=t,t=s,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function sqrtMod(t,n){if(console.assert(n*n<=Number.MAX_SAFE_INTEGER),legendre$1(t,n)!==1)return-1;let a=n-1,s=0;for(;a%2===0;)a/=2,s+=1;if(s===1)return modPowSmall$1(t,(n+1)/4,n);let l=2;for(;l<=n&&legendre$1(l,n)!==-1;)l+=1;let u=modPowSmall$1(l,a,n),c=modPowSmall$1(t,(a+1)/2,n),d=modPowSmall$1(t,a,n),Ct=s,ar=0;for(;(d-1)%n!==0;){ar=d*d%n;let en=1;for(;en<=Ct&&(ar-1)%n!==0;)ar=ar*ar%n,en+=1;const tn=modPowSmall$1(u,1<<Ct-en-1,n);c=c*tn%n,u=tn*tn%n,d=d*u%n,Ct=en}return c}const wasmCode$2=new Uint8Array([0,97,115,109,1,0,0,0,1,28,4,96,2,126,126,1,126,96,4,126,126,126,126,1,126,96,3,126,126,127,1,126,96,2,126,127,1,126,3,5,4,0,1,2,3,7,29,2,9,103,99,100,66,105,110,97,114,121,0,0,13,80,111,108,108,97,114,100,115,82,104,111,54,52,0,3,10,246,6,4,98,2,2,126,1,127,32,0,80,4,64,32,1,15,11,32,1,80,4,64,32,0,15,11,32,0,32,1,132,122,33,3,32,0,32,0,122,136,33,0,32,1,32,1,122,136,33,1,3,64,32,1,32,0,125,32,0,32,1,125,32,0,32,1,84,34,4,27,33,2,32,0,32,1,32,4,27,33,1,32,2,32,2,122,136,34,0,66,0,82,13,0,11,32,1,32,3,134,11,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,160,4,2,8,126,5,127,32,0,33,4,65,2,33,13,3,64,32,13,65,192,0,72,4,64,32,4,66,2,32,0,32,4,126,125,126,33,4,32,13,32,13,106,33,13,12,1,11,11,32,4,33,6,66,2,33,7,66,127,32,0,130,66,1,124,33,4,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,4,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,4,32,0,32,4,125,34,8,125,32,0,66,0,32,4,32,8,84,27,124,33,4,32,7,66,1,136,33,7,12,1,11,11,66,127,32,0,130,66,1,124,33,7,3,64,32,1,66,0,82,4,64,32,1,66,1,131,167,4,64,32,5,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,5,86,27,124,33,5,11,32,7,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,7,86,27,124,33,7,32,1,66,1,136,33,1,12,1,11,11,65,1,33,13,66,1,33,4,32,3,33,1,3,64,32,2,32,11,79,4,64,32,1,33,7,3,64,32,1,32,1,32,0,32,6,16,1,34,1,32,0,32,5,125,34,8,125,32,0,66,0,32,1,32,8,84,27,124,33,1,32,11,65,1,106,34,11,32,13,65,3,108,65,2,118,77,4,126,66,1,33,4,32,11,33,12,32,1,5,32,7,32,1,125,32,1,32,7,125,32,1,32,7,84,27,33,8,32,4,66,1,81,4,126,32,8,5,32,4,32,8,32,0,32,6,16,1,11,33,4,32,11,65,255,0,113,69,32,11,32,13,70,114,32,14,114,4,126,2,126,32,0,32,4,80,13,0,26,32,4,32,0,80,13,0,26,32,0,32,4,132,122,33,9,32,4,32,4,122,136,33,8,32,0,32,0,122,136,33,4,3,64,32,4,32,8,125,32,8,32,4,125,32,4,32,8,86,34,15,27,33,10,32,8,32,4,32,15,27,33,4,32,10,32,10,122,136,34,8,66,0,82,13,0,11,32,4,32,9,134,11,34,4,66,1,82,4,64,32,0,32,4,82,4,64,32,4,15,11,32,14,4,64,32,0,15,11,65,1,33,14,32,12,33,11,32,3,33,1,11,66,1,33,4,32,11,33,12,32,1,5,32,3,11,11,33,3,32,11,32,13,71,13,0,11,32,13,65,1,116,33,13,12,1,11,11,66,0,11,63,1,2,126,32,0,66,2,88,4,64,66,0,15,11,32,0,66,1,131,80,4,64,66,2,15,11,3,64,32,2,66,1,124,34,2,66,42,86,4,64,66,0,15,11,32,0,32,2,32,1,16,2,34,3,32,0,81,13,0,11,32,3,11]),wasmModule$2=new WebAssembly.Module(wasmCode$2),exports$1=new WebAssembly.Instance(wasmModule$2).exports,PollardsRho64=exports$1.PollardsRho64,wasmCode$1=new Uint8Array([0,97,115,109,1,0,0,0,1,14,2,96,4,126,126,126,126,1,126,96,1,126,1,127,3,3,2,0,1,7,21,1,17,105,115,80,114,111,98,97,98,108,121,80,114,105,109,101,54,52,0,1,10,160,5,2,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,237,3,2,10,126,2,127,32,0,66,2,84,4,64,65,0,15,11,32,0,66,1,131,80,4,64,32,0,66,2,81,15,11,32,0,66,1,125,34,5,122,33,10,32,5,32,10,136,33,9,32,0,33,5,65,2,33,11,3,64,32,11,65,192,0,72,4,64,32,5,66,2,32,0,32,5,126,125,126,33,5,32,11,32,11,106,33,11,12,1,11,11,66,1,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,2,32,0,32,6,125,34,8,125,32,0,66,0,32,2,32,8,84,27,124,33,2,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,2,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,6,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,1,33,8,66,127,32,0,130,66,1,124,33,7,32,0,33,6,3,64,32,8,66,0,82,4,64,32,8,66,1,131,167,4,64,32,1,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,1,86,27,124,33,1,11,32,7,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,7,86,27,124,33,7,32,8,66,1,136,33,8,12,1,11,11,32,1,33,0,3,64,32,9,66,0,82,4,64,32,9,66,1,131,167,4,64,32,0,32,3,32,6,32,5,16,0,33,0,11,32,9,66,1,136,33,9,32,3,32,3,32,6,32,5,16,0,33,3,12,1,11,11,3,64,32,12,172,32,10,83,4,64,32,0,32,0,32,6,32,5,16,0,34,4,32,2,81,32,0,32,2,82,113,32,0,32,6,32,2,125,82,113,4,64,65,0,15,11,32,4,33,0,32,12,65,1,106,33,12,12,1,11,11,32,2,32,4,82,4,64,65,0,15,11,65,1,11]),wasmModule$1=new WebAssembly.Module(wasmCode$1),exports=new WebAssembly.Instance(wasmModule$1).exports,isProbablyPrime64=exports.isProbablyPrime64;function modInverse$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(Number(n)<=2**30-1)return BigInt(modInverseSmall$1(Number(t),Number(n)));if(t<0n||t>=n||n<=0n)throw new RangeError;let a=t,s=n,l=1n,u=0n;for(;s!==0n;){const c=(a-a%s)/s,d=a-c*s;a=s,s=d;const Ct=l-c*u;l=u,u=Ct}return a!==1n?0n:l<0n?l+n:l}function modInverseSmall$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;const a=1073741823;if(t<0||t>=n||n<=0||n>a)throw new RangeError;let s=t&a,l=n&a,u=1,c=0;for(;l!==0;){const d=Math.floor(s/l),Ct=s%l;s=l,l=Ct;const ar=u-d*c;u=c,c=ar}return s!==1?0:u<0?u+n:u}function ChineseRemainderTheorem$1(t,n,a,s){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint"||typeof s!="bigint")throw new TypeError;const l=modInverse$1(a%s,s);return t+(n-t)*l%s*a}function squareRootsModuloOddPrimesProduct(t,n,a=1){let s=[];s.push(0n);let l=1n;for(let u=0;u<n.length;u+=1){const c=BigInt(Math.pow(n[u],a));if(Number(c)>Number.MAX_SAFE_INTEGER)throw new RangeError;const d=BigInt(squareRootModuloOddPrime(Number(t%c),n[u],a)),Ct=[];for(let ar=0;ar<s.length;ar+=1){const en=s[ar];Ct.push(ChineseRemainderTheorem$1(en,d,l,c)),Ct.push(ChineseRemainderTheorem$1(en,-d,l,c))}l*=c,s=Ct}return s}function squareRootsModuloTwo(t,n=1){if(n>=3){if(t%8===1){const a=Math.pow(2,n),s=+squareRootsModuloTwo(t,n-1)[0],l=a/4-s,u=s*s%a!==t%a?l:s;return[u,a/2-u,a/2+u,a-u]}return[]}return n>=2?t%4===1?[1,3]:[]:n>=1?[1]:[]}function squareRootModuloOddPrime(t,n,a=1){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;const s=Math.pow(n,a);if(!(t>0&&t<s&&n>0&&n%2!==0&&a>=1&&+t%+n!==0&&s<Math.floor(Math.sqrt(Number.MAX_SAFE_INTEGER*4))))throw new RangeError;if(a>1){const u=squareRootModuloOddPrime(t%Math.pow(n,a-1),n,a-1);let c=modInverseSmall$1(2*u,s)%s,d=(t-u*u)%s;c=c>s/2?c-s:c,d=d>s/2?d-s:d;let Ct=u+d*c%s;return Ct>=s&&(Ct-=s),Ct<0&&(Ct+=s),Math.min(Ct,s-Ct)}const l=sqrtMod(t,n)|0;return Math.min(l,n-l)}function bitLength$2(t){return t.toString(16).length*4}function sqrt(t){if(t<BigInt((Number.MAX_SAFE_INTEGER+1)/2))return BigInt(Math.floor(Math.sqrt(Number(BigInt(t))+.5)));const n=BigInt(bitLength$2(t)>>2);let s=sqrt(t>>n*2n)+1n<<n,l=s+1n;for(;s<l;)l=s,s=l+t/l>>1n;return l}function getSmoothFactorization(t,n){let a=BigInt(t);if(a===0n)return[0];const s=[];a<0n&&(s.push(-1),a=-a);let l=0;for(;l<n.length;){const u=n[l];for(;a%BigInt(u)===0n;)a/=BigInt(u),s.push(u);l+=1}return a===1n?s:null}function CongruenceOfsquareOfXminusYmoduloN(t,n,a){this.X=t,this.Y=n,this.N=a}CongruenceOfsquareOfXminusYmoduloN.prototype.toString=function(){return"X**2  Y (mod N)".replaceAll("X",this.X).replaceAll("N",this.N).replaceAll("Y",this.Y.join(" * "))};function isQuadraticResidueModuloPrime(t,n){if(typeof t!="bigint"||typeof n!="number")throw new TypeError;if(n===2)return!0;const a=Number(BigInt(t)%BigInt(n));return a===0?!0:legendre(a,n)===1}function significand(t){const n=Number(t);if(Math.abs(n)<1/0)return n/2**Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),s=Number(t>>BigInt(a));return s/2**Math.floor(Math.log2(Math.abs(s)))}function exponent(t){const n=Number(t);if(Math.abs(n)<1/0)return Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),s=Number(t>>BigInt(a));return a+Math.floor(Math.log2(Math.abs(s)))}function log2$1(t){return Math.log2(significand(t))+exponent(t)}function L$1(t){const n=log2$1(t)*Math.log(2);return Math.exp(Math.sqrt(n*Math.log(n)))}function modPow$2(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;let s=n,l=t,u=1n;for(;s!==0n;)BigInt.asUintN(1,s)===1n&&(s-=1n,u=u*l%a),s>>=1n,l=l*l%a;return u}function primes$1(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let s=3;s<=t;s+=2)if(n[s]&&(a.push(s),s<=Math.floor(t/s)))for(let l=s*s;l<=t;l+=2*s)n[l]=!1;return a}//!copy-paste
function FastModBigInt(t){const n=[];for(;t!==0n;){const a=Number(BigInt.asUintN(51,t));n.push(a),t>>=51n}return new Float64Array(n)}function FastMod(t,n,a){n=-0+n,a=-0+a;const s=t.length-1;let l=t[s];if(l=l-Math.floor(l*a)*n,s>0){const u=0x8000000000000-Math.floor(0x8000000000000*a)*n;let c=s;do c-=1,l=l*u+t[c],l=l-Math.floor(l*a)*n;while(c!==0)}return-0+l}function exp2(t){let n=Math.floor(Math.pow(2,Math.floor(t))*Math.exp(Math.LN2*(t-Math.floor(t))));return n%2===0&&(n+=1),n}function QuadraticPolynomial(t,n,a,s,l){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const u=n*n-a;if(l&&a%4n!==1n)throw new RangeError;if(u%((l?4n:1n)*t)!==0n)throw new TypeError;const c=u/(l?4n*t:t);this.A=t,this.B=n,this.C=c,this.AFactors=s;const d=significand(n)/significand(t)*Math.pow(2,exponent(n)-exponent(t)),Ct=Math.sqrt(significand(a)/Math.pow(significand(t),2))*Math.pow(2,exponent(a)/2-exponent(t));this.x1=(l?1/2:1)*(-d-Ct),this.x2=(l?1/2:1)*(-d+Ct),this.log2a=log2$1(t),this.useQ2Form=l}QuadraticPolynomial.generator=function(t,n,a){const s=function(ox,sx){return ox.length===0?[]:sx===0?[[]]:sx===1?ox.map(lx=>[lx]):s(ox.slice(1),sx-1).map(lx=>[ox[0]].concat(lx)).concat(s(ox.slice(1),sx))},l=function(ox,sx){return Math.round(Math.pow(significand(ox),1/sx)*Math.pow(2,exponent(ox)/sx))},u=function(ox,sx){return ox<sx?sx:ox},c=a%8n===1n,d=u(1n,c?BigInt(sqrt(a/2n))/BigInt(t):BigInt(sqrt(2n*a))/BigInt(t)),Ct=log2$1(d),ar=Math.log2(n[n.length-1]),en=2,tn=Math.max(en,Math.ceil(Ct/Math.min(Ct<180?14.5:ar,ar)/en)*en);console.debug("k: ",tn,"useQ2Form: ",c);const on=l(d,tn);let fn=0;const dn=function(){let ox=0;do if(ox=on-on%2+1+(fn%2===0?fn:-1-fn),fn+=1,on+fn>n[n.length-1]&&on-fn<n[0])throw new RangeError;while(indexOf$1(n,ox)===-1);return ox};let Cn=[];const Rn=[],ax=[];return QuadraticSieveFactorization.polynomialsCounter=0,{next:function(){for(;Rn.length===0;){for(;Cn.length===0;){const px=[];for(let hx=0;hx<en;hx+=1)px.push(dn());console.assert(tn%en===0),Cn=s(ax,tn/en-1).map(hx=>[px].concat(hx)),ax.push(px)}const sx=Cn.pop().reduce((px,hx)=>px.concat(hx),[]),lx=BigInt(sx.reduce((px,hx)=>px*BigInt(hx),1n));if(modInverse$1(lx%a,a)===0n)return this.next();const fx=lx;let gx=squareRootsModuloOddPrimesProduct(a,sx,1);for(let px=0;px<gx.length;px+=1)if(gx[px]=gx[px]<0n?gx[px]+fx:gx[px],gx[px]<0n||gx[px]>=fx)throw new Error;c&&(gx=gx.map(px=>px%2n===0n?px-fx:px)),gx=gx.slice(0,gx.length/2);const mx=c?[2,2].concat(sx):sx.slice(0);mx.sort((px,hx)=>px-hx);for(let px=0;px<gx.length;px+=1){const hx=gx[px];Rn.push(new QuadraticPolynomial(fx,hx,a,mx,c))}}return QuadraticSieveFactorization.polynomialsCounter+=1,Rn.shift()}}};QuadraticPolynomial.prototype.X=function(t){return this.A*BigInt((this.useQ2Form?2:1)*t)+this.B};QuadraticPolynomial.prototype.Y=function(t,n,a){if(typeof t!="number")throw new TypeError;const s=this.A*(t*t>=2**53?BigInt(t)*BigInt(t):BigInt(t*t))+this.B*BigInt((this.useQ2Form?1:2)*t)+this.C;if(n===void 0&&a===void 0)return s;if(s%n!==0n)return null;const l=getSmoothFactorization(s/n,a);return l==null?null:l.length===1&&l[0]===0?l:this.AFactors.concat(l)};QuadraticPolynomial.prototype.log2AbsY=function(t){if(typeof t!="number")throw new TypeError;return Math.log2(Math.abs((t-this.x1)*(t-this.x2)))+this.log2a};function thresholdApproximationInterval(t,n,a,s){let l=s>2048?s>262144?1024:256:1;for(;l>=2&&Math.abs(t.log2AbsY(n+l)-a)>.5;)l=Math.floor(l/2);return n+l}const wasmCode=typeof Uint8Array<"u"?new Uint8Array([0,97,115,109,1,0,0,0,1,28,3,96,8,127,127,127,127,127,127,127,127,1,127,96,2,127,127,1,127,96,6,127,127,127,127,127,127,0,2,15,1,3,101,110,118,6,109,101,109,111,114,121,2,0,0,3,5,4,0,1,2,0,7,85,4,16,115,105,110,103,108,101,66,108,111,99,107,83,105,101,118,101,0,0,15,102,105,110,100,83,109,111,111,116,104,69,110,116,114,121,0,1,24,117,112,100,97,116,101,87,104,101,101,108,115,73,110,116,101,114,110,97,108,78,101,120,116,0,2,17,104,97,110,100,108,101,83,109,97,108,108,87,104,101,101,108,115,0,3,10,154,8,4,226,1,1,4,127,32,2,32,5,106,33,8,32,0,32,4,106,33,0,32,1,32,4,106,33,1,32,2,32,4,106,33,2,32,3,32,4,65,2,117,106,33,3,3,64,32,2,32,8,71,4,64,32,0,40,2,0,33,5,32,1,40,2,0,33,4,32,2,40,2,0,33,10,32,3,45,0,0,33,11,3,64,32,4,32,6,72,4,64,32,4,45,0,0,32,11,106,33,9,32,5,32,5,45,0,0,32,11,106,58,0,0,32,4,32,9,58,0,0,32,5,32,10,106,33,5,32,4,32,10,106,33,4,12,1,11,11,32,5,32,6,72,4,64,32,5,32,5,45,0,0,32,11,106,58,0,0,32,5,32,10,106,33,9,32,4,33,5,32,9,33,4,11,32,0,32,5,32,7,107,54,2,0,32,1,32,4,32,7,107,54,2,0,32,0,65,4,106,33,0,32,1,65,4,106,33,1,32,2,65,4,106,33,2,32,3,65,1,106,33,3,12,1,11,11,65,0,11,42,1,1,123,32,0,253,15,33,2,32,1,65,16,107,33,1,3,64,32,1,65,16,106,34,1,253,0,4,0,32,2,253,44,253,100,69,13,0,11,32,1,11,173,1,2,5,123,1,127,32,5,253,17,33,6,3,64,32,11,32,0,65,2,116,72,4,64,32,3,32,3,253,0,4,0,34,8,32,1,253,0,4,0,34,7,32,6,253,177,1,32,7,32,6,253,55,32,2,253,0,4,0,34,9,253,78,253,174,1,34,7,253,177,1,32,8,32,7,253,57,32,9,253,78,253,174,1,34,8,32,4,253,0,4,0,34,10,32,7,253,177,1,32,10,32,7,253,57,32,9,253,78,253,174,1,34,7,253,182,1,253,11,4,0,32,4,32,8,32,7,253,184,1,253,11,4,0,32,1,65,16,106,33,1,32,2,65,16,106,33,2,32,3,65,16,106,33,3,32,4,65,16,106,33,4,32,11,65,16,106,33,11,12,1,11,11,11,217,4,2,10,127,5,123,32,6,32,7,70,4,64,0,11,32,5,33,8,3,64,32,13,32,0,65,2,116,72,4,64,32,1,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,1,253,0,4,16,65,16,253,171,1,253,80,33,20,32,2,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,2,253,0,4,16,65,16,253,171,1,253,80,33,21,32,3,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,3,253,0,4,16,65,16,253,171,1,253,80,33,19,32,4,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,4,253,0,4,16,65,16,253,171,1,253,80,33,22,32,6,65,4,107,33,10,253,12,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,33,18,3,64,32,18,32,20,32,10,65,4,106,34,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,253,151,1,33,18,32,7,32,10,74,13,0,11,32,18,32,22,253,52,253,100,4,64,32,6,33,10,3,64,32,7,32,10,74,4,64,32,20,32,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,32,22,253,52,253,100,34,11,4,64,65,0,33,9,3,64,32,11,65,3,32,11,104,34,12,116,115,33,11,32,9,65,1,32,12,65,1,118,34,9,65,1,113,65,2,116,32,9,65,1,117,114,116,115,33,9,32,11,13,0,11,32,9,33,11,32,10,40,2,0,33,14,3,64,32,11,104,34,9,65,2,116,33,15,32,11,65,1,32,9,116,115,33,11,32,4,32,15,106,40,2,0,34,12,32,3,32,15,106,40,2,0,34,9,32,2,32,15,106,40,2,0,34,16,32,14,107,108,79,32,12,32,9,32,1,32,15,106,40,2,0,34,17,32,14,107,108,79,114,65,0,65,1,32,16,32,17,27,27,4,64,32,8,65,2,116,32,13,32,15,106,65,2,117,34,12,54,2,0,32,8,65,1,106,65,2,116,32,10,32,6,107,65,2,117,34,9,54,2,0,32,8,65,2,106,33,8,32,16,32,17,70,4,64,32,8,65,2,116,32,12,54,2,0,32,8,65,1,106,65,2,116,32,9,54,2,0,32,8,65,2,106,33,8,11,11,32,11,13,0,11,11,32,10,65,4,106,33,10,12,1,11,11,11,32,1,65,32,106,33,1,32,2,65,32,106,33,2,32,3,65,32,106,33,3,32,4,65,32,106,33,4,32,13,65,32,106,33,13,12,1,11,11,32,8,32,5,107,11]):null;let wasmModule=null;function instantiateWasm(t){wasmModule==null&&(wasmModule=new WebAssembly.Module(wasmCode));const n=Math.ceil(t/2**16),a=new WebAssembly.Memory({initial:n,maximum:n}),s=a.buffer,l=new WebAssembly.Instance(wasmModule,{env:{memory:a}}).exports;return Object.assign({},l,{memory:{buffer:s}})}function congruencesUsingQuadraticSieve(t,n,a){if(typeof n!="bigint")throw new TypeError;let s=Number(a||0);s===0&&(s=3*2**14,s=Math.min(s,Math.ceil(Math.pow(+t[t.length-1],1.15))),s=Math.max(s,t[t.length-1]+1),Number(n)>2**285?s=Math.floor(s/3.2/1.5):Number(n)>2**240?s=Math.floor(s/1.6/1.5):s=Math.floor(s/1.5));const l=Math.ceil(s/(typeof navigator<"u"&&navigator.hardwareConcurrency===12?2.75*2**20:6*2**20));console.debug("q",l);const u=Math.ceil(Math.ceil(s/l)/2**15)*2**15,c=u*l;console.debug("sieveSize",c);const d=0,Ct=255,ar=2**0,en=Math.log2(t.length===0?Math.sqrt(2):+t[t.length-1]),tn=en+Math.min(Math.log2(n<2**240?50:n<2**285?400:1e3),en);console.debug("largePrimesThreshold",tn);const on=new Map,fn=Number(n)>2**285,dn=Math.min(2*en+Math.min(Math.log2(200),en),64);fn&&console.log("doubleLargePrimesThreshold",dn);const Cn=[];for(let lE=0;lE<t.length;lE+=1){const gE=+t[lE];for(let AE=1,yE=gE;yE<=c||AE===1;AE+=1,yE*=gE){const DE=Number(n%BigInt(yE));if(DE%gE===0)AE===1&&Cn.push({step:yE,p:gE,root:0});else if(gE===2){const OE=squareRootsModuloTwo(DE,AE);for(let kx=0;kx<Math.ceil(OE.length/2);kx+=1)Cn.push({step:yE,p:gE,root:OE[kx]|0})}else{const OE=squareRootModuloOddPrime(DE,gE,AE);Cn.push({step:yE,p:gE,root:OE|0})}}}Cn.sort((lE,gE)=>+lE.step-+gE.step);const Rn=Cn.length;for(;Cn.length%16!==0;)Cn.push(Cn.at(-1));console.debug("wheels",Cn.length),console.debug("max wheel",Cn.at(-1).step);const ax=new Float64Array(Cn.length);let ox=0n;const sx=[],lx=Cn.length;console.assert(u%4===0);let cx=0;cx+=u*1,cx+=lx*4,cx+=lx*4,cx+=lx*4,cx+=lx*1,cx+=16*1024*4,cx+=lx*4,cx+=lx*4,cx+=512*4,cx+=30*lx*4,cx+=lx*4,cx+=lx*4;const fx=instantiateWasm(cx),gx=fx.singleBlockSieve,mx=fx.findSmoothEntry,px=fx.updateWheelsInternalNext,hx=fx.handleSmallWheels,vx=fx.memory.buffer;let yx=0;const Sx=function(lE){return yx+=lE,new Uint8Array(vx,yx-lE,lE)},_x=function(lE){return yx+=lE*4,new Int32Array(vx,yx-lE*4,lE)},Ex=Sx(u),bx=_x(lx),Ax=_x(lx),Mx=_x(lx),Rx=Sx(lx),Cx=_x(16*1024),Lx=_x(lx),qx=_x(lx),Ix=_x(512),Px=_x(30*lx),Nx=_x(lx),Bx=_x(lx);for(let lE=0;lE<lx;lE+=1){const gE=Cn[lE],AE=lE>=Rn?0:Math.log2(gE.p)*(gE.step===2||gE.root===0?.5:1),yE=Math.round(AE*ar)|0;if(yE>=2**8||gE.step>=2**32)throw new RangeError;Mx[lE]=gE.step,Rx[lE]=yE,Lx[lE]=gE.root,ax[lE]=AE}const $x=function(lE,gE,AE,yE){const DE=on.get(lE);if(DE==null)on.set(lE,{polynomial:gE,x:AE,pb:yE.slice(0)}),QuadraticSieveFactorization.lpRels+=1;else{const OE=BigInt(lE),kx=modInverse$1(OE,n);if(kx===0n)return new CongruenceOfsquareOfXminusYmoduloN(OE,[0],n);{const Ux=gE.X(AE),Yx=gE.Y(AE,OE,yE),eE=DE.polynomial.X(DE.x),vE=DE.polynomial.Y(DE.x,OE,DE.pb),LE=kx*eE*Ux%n;if(Yx!=null&&vE!=null){const BE=Yx.concat(vE);return new CongruenceOfsquareOfXminusYmoduloN(LE,BE,n)}else console.count("bad lp")}}return null},Vx=QuadraticPolynomial.generator(c/2,t,n);let Gx=null;function Zx(lE){let gE=lE;for(let AE=2;AE<32;AE+=AE)gE=Math.imul(gE,2-Math.imul(lE,gE));return gE}function jx(lE,gE){if(lE%2===0){if(lE!==2**Math.round(Math.log2(lE)))throw new RangeError;return{a:2**32/lE|0,b:0}}const AE=Zx(lE);let yE=Math.floor(gE/lE);return yE=yE<2**16?yE:yE|65535,console.assert(yE<=Math.floor((2**32-1)/lE)),{a:AE,b:yE}}for(let lE=0;lE<lx;lE+=1){const gE=Mx[lE],AE=jx(gE,Cn.at(-1).step+c);Nx[lE]=AE.a,Bx[lE]=AE.b}let Hx=0n,iE=[];const Xx=function(lE,gE){if(gE=-0+gE,!(BigInt(lE.A)===BigInt(ox))){const Ux=FastModBigInt((lE.useQ2Form?2n:1n)*lE.A),Yx=lE.B<0n?-1:1,eE=FastModBigInt(lE.B<0n?-lE.B:lE.B);sx.length=0;for(let vE=0;vE<lx;vE+=1){const LE=-0+Mx[vE],BE=(1+2**-52)/LE,$E=-0+FastMod(Ux,LE,BE),kE=modInverseSmall$1($E,LE)|0;qx[vE]=kE,kE===0&&sx.push(vE);let ZE=-0+FastMod(eE,LE,BE);ZE=Yx<0?-ZE:ZE;const eS=-0+Lx[vE];let WE=(LE-ZE+(LE-eS))*kE-gE,CS=(LE-ZE+eS)*kE-gE;WE=WE-Math.floor(WE*BE)*LE,CS=CS-Math.floor(CS*BE)*LE;const LS=Math.min(WE,CS),hS=Math.max(WE,CS);bx[vE]=LS,Ax[vE]=hS}Hx=0n,iE.length=0}if(Hx===0n)Hx=lE.B;else{let Ux=lE.B-Hx;Hx=lE.B;let Yx=0;if(Ux<0n&&(Ux+=(lE.useQ2Form?2n:1n)*lE.A,Yx=1),Ux<0n||Ux>=lE.A*2n)throw new RangeError;let eE=iE.indexOf(Ux);if(eE===-1){iE.push(Ux);const vE=FastModBigInt(Ux<0n?-Ux:Ux);eE=iE.length-1;const LE=eE*lx;for(let BE=0;BE<lx;BE+=1){const $E=-0+Mx[BE],kE=-0+qx[BE],ZE=(1+2**-52)/$E,eS=FastMod(vE,$E,ZE);let WE=($E-eS)*kE;WE=WE+c,WE=WE-Math.floor(WE*ZE)*$E,WE=$E-WE,Px[LE+BE]=WE}}px(lx,Px.byteOffset+eE*lx*4,Mx.byteOffset,bx.byteOffset,Ax.byteOffset,Yx)}const yE=Number(lE.A&BigInt(2**29-1)),DE=Number(lE.B&BigInt(2**29-1)),OE=Number(lE.C&BigInt(2**29-1)),kx=modInverseSmall$1(yE,2**29);for(let Ux=0;Ux<sx.length;Ux+=1){const Yx=sx[Ux];if(bx[Yx]=c,Ax[Yx]=c,lE.useQ2Form){const eE=Mx[Yx];if(eE%2===0){const vE=Lx[Yx];for(let LE=0;LE<(eE===2?1:2);LE+=1){const BE=LE===0?vE:eE-vE;console.assert((-DE-BE)%2===0),console.assert((-DE+BE)%2===0);let $E=Math.imul((-DE-BE)/2,kx)-gE&eE-1,kE=Math.imul((-DE+BE)/2,kx)-gE&eE-1,ZE=Math.imul(Math.imul(yE,$E+gE)+DE,$E+gE)+OE&eE-1,eS=Math.imul(Math.imul(yE,kE+gE)+DE,kE+gE)+OE&eE-1;if(ZE===0&&eS===0&&(bx[Yx]=Math.min($E,kE),Ax[Yx]=Math.max($E,kE)),eE===2)if($E!==kE)Rx[Yx]=Math.round(1*ar)|0,ax[Yx]=1;else throw new Error}}}}ox=lE.A},rE=function(lE,gE){for(;gE!==0;){const AE=+lE%+gE;lE=gE,gE=AE}return lE},uE=function(lE,gE){return Math.floor(lE/rE(lE,gE))*gE},Kx=function(){let lE=1,gE=0;for(;gE<lx&&uE(lE,Mx[gE])<=u/4;)lE=uE(lE,Mx[gE]),gE+=1;return gE}(),ME=function(lE,gE,AE){if(typeof AE!="number"||typeof gE!="number")throw new TypeError;if(AE>lE.length)throw new RangeError;for(let yE=gE;yE<AE;yE+=gE)lE.copyWithin(yE,0,Math.min(AE-yE,gE))};QuadraticSieveFactorization.smallSegmentTime=0,QuadraticSieveFactorization.largeSegmentTime=0;const IE=function(lE){let gE=1;Ex[0]=d;for(let Yx=0;Yx<Kx;Yx+=1){const eE=+uE(gE,Mx[Yx]);ME(Ex,gE,eE),gE=eE;const vE=Mx[Yx],LE=Rx[Yx],BE=bx[Yx]|0;if(BE!==c)for(let kE=(BE+eE-lE%eE)%vE;kE<eE;kE+=vE)Ex[kE]=Ex[kE]+LE|0;const $E=Ax[Yx]|0;if($E!==c)for(let kE=($E+eE-lE%eE)%vE;kE<eE;kE+=vE)Ex[kE]=Ex[kE]+LE|0}ME(Ex,gE,u);const AE=typeof navigator<"u"&&navigator.hardwareConcurrency===12?1:1.5,yE=Math.min(0+lx-Kx,Math.floor(192*AE*(n>2**285?4:n>2**240?2:1))),DE=Math.floor(32768*AE),OE=performance.now();let kx=0;for(;kx+DE<=u;)kx+=DE,gx(bx.byteOffset,Ax.byteOffset,Mx.byteOffset,Rx.byteOffset,Kx*4,Kx*4+yE*4,kx,0);QuadraticSieveFactorization.smallSegmentTime+=performance.now()-OE;const Ux=performance.now();gx(bx.byteOffset,Ax.byteOffset,Mx.byteOffset,Rx.byteOffset,Kx*4,lx*4,u,u),QuadraticSieveFactorization.largeSegmentTime+=performance.now()-Ux},wE=[],bE=[],UE=[],CE=function(lE,gE){if(typeof lE!="number")throw new TypeError;const AE=Math.max(d,(Math.round((gE.log2AbsY(0)-(fn?dn:tn))*ar+d)|0)-9);let yE=0,DE=0;for(;yE<u;){DE=AE;const kx=u;for(;yE<kx;){if(yE<kx-1){const Yx=Ex[kx-1];for(Ex[kx-1]=Ct;(yE&15)!==0&&DE>Ex[yE];)yE+=1;if((yE&15)===0){yE=mx(DE,yE);for(var OE=0;DE>Ex[yE];)yE+=1,OE+=1;OE>=16&&console.error("too big c",OE)}Ex[kx-1]=Yx}const Ux=gE.log2AbsY(yE+lE)-(Ex[yE]-d)*(1/ar);(Ux<tn||fn&&Ux>=en*2&&Ux<dn)&&(wE.push(yE+lE),bE.push(-0+(Ex[yE]-d)*(1/ar))),yE+=1}}};function YE(lE){wE.length>512&&(console.warn("too many smooth entries: "+wE.length+" N = "+n),wE.length=512);for(let yE=0;yE<wE.length;yE+=1)Ix[yE]=wE[yE]-lE-c;for(let yE=0;yE<Kx;yE+=1){const DE=Mx[yE];if(bx[yE]!==c){let OE=bx[yE]+(0-c)%DE;bx[yE]=OE<=0?OE+DE:OE}else bx[yE]=0;if(Ax[yE]!==c){let OE=Ax[yE]+(0-c)%DE;Ax[yE]=OE<=0?OE+DE:OE}else Ax[yE]=0}const gE=wE.length===0?0:hx(lx,bx.byteOffset,Ax.byteOffset,Nx.byteOffset,Bx.byteOffset,Cx.byteOffset>>2,Ix.byteOffset,Ix.byteOffset+wE.length*4),AE=new Float64Array(wE.length);for(let yE=0;yE<gE;yE+=2){const DE=Cx[yE],OE=Cx[yE+1],kx=Mx[DE];AE[OE]+=+ax[DE],UE[OE].push(kx)}for(let yE=0;yE<wE.length;yE+=1){const DE=Math.abs(bE[yE]-AE[yE]);DE>=9&&DE<100&&console.error(DE),bE[yE]=AE[yE]}}function Ox(){this.a=[],this.b=[],this.length=0}Ox.prototype.push=function(lE){this.a.push(lE),this.length=this.a.length+this.b.length},Ox.prototype.shift=function(gE){if(this.b.length===0)for(;this.a.length>0;)this.b.push(this.a.pop());var gE=this.b.pop();return this.length=this.a.length+this.b.length,gE};function Fx(){this.edges=0,this.components=0,this.vertices=0,this._edges=new Map,this._edgesArray=[],this._g=new Map}Fx.prototype._insertVertex=function(lE){if(!this._g.has(lE))return this._g.set(lE,lE),this.vertices+=1,this.components+=1,lE;let gE=this._g.get(lE);for(;this._g.get(gE)!==gE;)gE=this._g.get(gE);let AE=lE;for(;AE!==gE;){const yE=this._g.get(AE);this._g.set(AE,gE),AE=yE}return gE};const Wx=function(lE,gE){return BigInt.asUintN(64,(BigInt(Math.min(lE,gE))<<32n)+BigInt(Math.max(lE,gE)))};Fx.prototype.insertEdge=function(lE,gE,AE){const yE=Wx(lE,gE);if(this._edges.get(yE)!==void 0){console.count("same p1p2");return}this._edges.set(yE,AE),this._edgesArray.push({p1:lE,p2:gE}),lE!==gE&&this._edgesArray.push({p1:gE,p2:lE}),this.edges+=1;const DE=this._insertVertex(lE),OE=this._insertVertex(gE);DE<OE&&(this.components-=1,this._g.set(OE,DE)),DE>OE&&(this.components-=1,this._g.set(DE,OE))},Fx.prototype.iterateCycles=function(lE){const gE=new Map;this._edgesArray.sort((OE,kx)=>OE.p1-kx.p1||OE.p2-kx.p2);const AE=[];for(let OE of this._g.keys())this._g.get(OE)===OE&&AE.push(OE),gE.set(OE,{explored:!1,finished:!1,parent:0});AE.sort((OE,kx)=>OE-kx);const yE=this._edgesArray.map(OE=>OE.p1),DE=function(OE){const kx=[];for(;OE!==0;)kx.push(OE),OE=gE.get(OE).parent;return kx};for(const OE of AE){const kx=new Ox,Ux=gE.get(OE);for(console.assert(Ux.explored===!1&&Ux.parent===0),Ux.explored=!0,Ux.parent=0,kx.push(OE);kx.length>0;){const Yx=kx.shift(),eE=indexOf$1(yE,Yx);for(let vE=eE;vE>=0&&this._edgesArray[vE].p1===Yx;vE-=1){const LE=this._edgesArray[vE],BE=gE.get(LE.p2);if(BE.explored){if(BE.finished)continue;const $E=DE(LE.p2),kE=DE(LE.p1);let ZE=0;for(;$E.length-1-ZE>=0&&kE.length-1-ZE>=0&&$E[$E.length-1-ZE]===kE[kE.length-1-ZE];)ZE+=1;console.assert(ZE>0);const eS=$E.slice(0,$E.length-(ZE-1)).reverse().concat(kE.slice(0,kE.length-(ZE-1))),WE=[];for(let hS=1;hS<eS.length;hS+=1)WE.push({p1:eS[hS-1],p2:eS[hS]});const CS=this._edges,LS=WE.map(hS=>CS.get(Wx(hS.p1,hS.p2)));lE(WE,LS)}else BE.explored=!0,BE.parent=LE.p1,kx.push(LE.p2)}gE.get(Yx).finished=!0}}};const Qx=function(lE,gE){let AE=1n,yE=1n,DE=[];for(let kx=0;kx<lE.length;kx+=1){const Ux=lE[kx],Yx=gE[kx],eE=Yx.polynomial.X(Yx.x),vE=Yx.polynomial.Y(Yx.x,BigInt(Ux.p1)*BigInt(Ux.p2),Yx.pb);yE=eE*yE%n,DE==null||vE==null?DE=null:DE=DE.concat(vE),AE=AE*BigInt(Ux.p2)%n}const OE=modInverse$1(AE,n);if(OE===0n)tE.push(new CongruenceOfsquareOfXminusYmoduloN(AE,[0],n));else if(DE!=null){yE=OE*yE%n;const kx=new CongruenceOfsquareOfXminusYmoduloN(yE,DE,n);if((yE**2n-DE.reduce((Ux,Yx)=>Ux*BigInt(Yx),1n))%n!==0n)throw new Error;tE.push(kx)}else console.count("BAD CYCLE")};let oE=new Fx;const tE=[];let mE=0;function hE(lE,gE,AE,yE,DE){if(oE==null)return;oE.insertEdge(lE,gE,{polynomial:yE,x:AE,pb:DE.slice(0)});const OE=oE.edges+oE.components-oE.vertices;oE.edges%1e4===0&&console.debug("graph:",oE.edges,oE.components,oE.vertices,OE),OE>t.length+64-mE&&(console.debug("graph:",oE.edges,oE.components,oE.vertices,OE),console.time("collectGraphRelations"),oE.iterateCycles(Qx),console.timeEnd("collectGraphRelations"),console.log(tE.length),oE=null)}function SE(lE,gE,AE){let yE=abs$3(gE.Y(lE));for(let eE=AE.length-1;eE>=0;eE-=1){const vE=AE[eE];for(;yE%BigInt(vE)===0n;)yE/=BigInt(vE)}const DE=BigInt(yE);if(Number(DE)>=2**64||isProbablyPrime64(DE))return;const OE=Number(PollardsRho64(DE,2**18));if(OE===0||OE===1){console.count("cannot factor");return}if(BigInt(DE)%BigInt(OE)!==BigInt(0)||!(OE>1&&BigInt(OE)<BigInt(DE)))throw new Error;const kx=Math.floor(Number(BigInt(DE)/BigInt(OE))),Ux=Math.min(kx,OE),Yx=Math.max(kx,OE);Math.log2(Ux)>en&&Ux<=1073741823&&Yx<=1073741823&&hE(Ux|0,Yx|0,lE,gE,AE)}QuadraticSieveFactorization.lpCounter=0,QuadraticSieveFactorization.lpRels=0;let _E=-1,PE=0;const NE={next:function(){for(mE+=1;PE<32||2*PE*c<=Math.pow(t[t.length-1],2);){if(tE.length!==0)return{value:tE.pop(),done:!1};_E===c&&(PE+=1,_E=-1);const gE=-c/2;if(_E===-1){Gx=Vx.next(),Xx(Gx,gE),wE.length=0,bE.length=0;for(let AE=0;AE<c;AE+=u)IE(AE),CE(gE+AE,Gx);for(let AE=0;AE<wE.length;AE+=1)AE<UE.length?UE[AE].length=0:UE.push([]);YE(gE)}for(let AE=_E+1;AE<wE.length;AE+=1){const yE=wE[AE],DE=+bE[AE],OE=UE[AE],kx=+Gx.log2AbsY(yE);let Ux=null;if(kx-DE<=en){const Yx=Gx.X(yE);let eE=Gx.Y(yE,1n,OE);eE==null&&(eE=Gx.Y(yE,1n,OE.concat(sx.map(vE=>Mx[vE])))),eE!=null?Ux=new CongruenceOfsquareOfXminusYmoduloN(Yx,eE,n):console.count("wrong entry",exp2(kx-DE))}else if(kx-DE<2*en){const Yx=exp2(kx-DE);Ux=$x(Yx,Gx,yE,OE),Ux!=null?QuadraticSieveFactorization.lpCounter+=1:fn&&Yx<=1073741823&&(Gx.Y(yE,BigInt(Yx),OE)!=null?hE(1,Yx|0,yE,Gx,OE):(console.count("wrong?"),console.log(Gx.Y(yE),Yx)))}else fn&&kx-DE<3*en?SE(yE,Gx,OE):console.count("too big",(kx-DE)/en);if(Ux!=null)return _E=AE,{value:Ux,done:!1}}_E=c}return{value:void 0,done:!0}}};return NE[globalThis.Symbol.iterator]=function(){return this},NE}function gcd$2(t,n){for(;n!==0n;){const a=BigInt(t)%BigInt(n);t=n,n=a}return t}function abs$3(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function indexOf$1(t,n){if(typeof n!="number"||(n|0)!==n)throw new TypeError;let a=0,s=t.length-1;for(;a<s;){const l=Math.ceil((a+s)/2);(t[l]|0)>(n|0)?s=l-1:a=l}return(t[a]|0)===(n|0)?a:-1}function computeY(t,n,a){const s=new Array(t.length+1).fill(0);for(let u=0;u<n.length;u+=1){const c=n[u].v;for(let d=0;d<c.length;d+=1)s[c[d]]+=1}let l=1n;for(let u=0;u<s.length;u+=1){if(s[u]%2!==0)throw new RangeError;if(u!==0){const c=t[u-1],d=s[u]/2;d>0&&(d<=2?l=l*BigInt(Math.pow(c,d))%a:l=l*modPow$2(BigInt(c),BigInt(d),a)%a)}}return l}function legendre(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,s=0;t!==0;){for(;(t&1)===0;)t>>=1,s=n&7,(s===3||s===5)&&(a=-a);s=n,n=t,t=s,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function getBestMultiplier(t,n){const a=new Array(150).fill(0);for(let c=1;c<a.length;c+=1)a[c]=-Math.log(c)/2;for(let c=0;c<n.length&&c<300;c+=1){const d=n[c];if(d===2)for(let Ct=1;Ct<a.length;Ct+=1)a[Ct]+=[0,3,0,.5,0,1,0,.5][Ct*Number(t%8n)%8]*Math.log(2);else{const Ct=legendre(Number(t%BigInt(d)),d),ar=2/(d-1)*Math.log(d);for(let en=1;en<a.length;en+=1)a[en]+=Ct*legendre(en,d)===1?ar:0}}let s=0,l=1;for(let c=1;c<=a.length;c+=1){var u=+a[c];+u>+s&&(s=u,l=c)}return l}function QuadraticSieveFactorization(t){if(typeof t!="bigint")throw new TypeError;const n=Math.floor(((performance.memory||{jsHeapSizeLimit:0}).jsHeapSizeLimit||0)/2**32<.99?2**23.5:2**23.75),a=Math.min(n,(1<<25)-1),l=Math.max(Math.min(Math.floor(Math.sqrt(L$1(t)/(Number(t)>2**285?24*2.5:Number(t)>2**240?12:6))),a),512),u=primes$1(l);let c=1n;for(c=Number(t)>2**64?BigInt(getBestMultiplier(t,u)):1n;;c+=1n){if(c!==1n&&console.debug("multiplier",c),c!==1n&&t%c===0n)return console.error("k"),BigInt(c);const d=c*t,Ct=u.filter(Cn=>isQuadraticResidueModuloPrime(d,Cn));for(let Cn=0;Cn<Ct.length;Cn+=1)if(Number(t%BigInt(Ct[Cn]))===0)return BigInt(Ct[Cn]);const ar=congruencesUsingQuadraticSieve(Ct,d),en=solve.sparseSolve(1+Ct.length);en.next();let tn=null;const on=performance.now();let fn=0,dn=on;for(;(tn=ar.next().value)!=null;)if(tn.Y.length===1&&tn.Y[0]===0){const Cn=BigInt(gcd$2(abs$3(tn.X),t));if(Cn!==1n&&Cn!==t)return Cn}else{const Cn=function(){throw new TypeError(t)},Rn=tn.Y.map(ox=>ox===-1?0:1+indexOf$1(Ct,ox)||Cn()),ax=en.next([Rn,{c:tn,v:Rn}]).value;{const ox=performance.now();fn+=1,(ox-dn>5e3||ax!=null)&&(console.debug("congruences found: ",fn,"/",Ct.length,"expected time: ",Math.round((ox-on)/fn*Ct.length),"large prime congruences: ",QuadraticSieveFactorization.lpCounter+"("+QuadraticSieveFactorization.lpRels+")","polynomials used: ",QuadraticSieveFactorization.polynomialsCounter),dn=ox)}if(ax!=null){let ox=1n;for(let cx=0;cx<ax.length;cx+=1)ox=ox*ax[cx].c.X%t;let sx=computeY(Ct,ax,t);const lx=BigInt(gcd$2(abs$3(ox+sx),t));if(lx!==1n&&lx!==t)return lx}}}}QuadraticSieveFactorization.testables={congruencesUsingQuadraticSieve,squareRootModuloOddPrime,isQuadraticResidueModuloPrime,solve,QuadraticPolynomial,thresholdApproximationInterval};function log2(t){return BigInt(t.toString(16).length*4)}function modPow$1(t,n,a){let s=1n;for(;n!==0n;)BigInt.asUintN(1,n)===1n&&(n-=1n,s=s*t%a),n>>=1n,t=t*t%a;return s}function primes(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let s=3;s<=t;s+=2)if(n[s]&&(a.push(s),s<=Math.floor(t/s)))for(let l=s*s;l<=t;l+=2*s)n[l]=!1;return a}function getBases(t){if(typeof t!="bigint")throw new TypeError;if(t<2047n)return[2];if(t<1373653n)return[2,3];if(t<25326001n)return[2,3,5];if(t<3215031751n)return[2,3,5,7];if(t<2152302898747n)return[2,3,5,7,11];if(t<3474749660383n)return[2,3,5,7,11,13];if(t<341550071728321n)return[2,3,5,7,11,13,17];if(t<3825123056546413051n)return[2,3,5,7,11,13,17,19,23];if(t<318665857834031151167461n)return[2,3,5,7,11,13,17,19,23,29,31,37];if(t<3317044064679887385961981n)return[2,3,5,7,11,13,17,19,23,29,31,37,41];const n=Number(log2(t))*Math.log(2);return primes(Math.floor(1/Math.log(2)*n*Math.log(n)))}function isPrime$3(t){if(typeof t!="bigint")throw new RangeError;if(t<0n)throw new RangeError;if(t<2n)return!1;const n=[2,3,5,7,11,13,17,19,23,29,31,37,41],a=Number(t%304250263527210n);for(let c=0;c<n.length;c+=1){const d=n[c];if(a-Math.floor(a/d)*d===0)return t===BigInt(d)}if(t<1849)return!0;let s=0,l=t-1n;for(;l%2n===0n;)l/=2n,s+=1;const u=getBases(t);for(const c of u){let d=modPow$1(BigInt(c),l,t);if(d!==1n){for(let Ct=s-1;Ct>0&&d!==t-1n;Ct-=1)d=d*d%t;if(d!==t-1n)return!1}}return!0}function bitLength$1(t){if(typeof t=="number"){var n=t|0;if(n===t&&n>=0)return 32-Math.clz32(n)}const a=t.toString(16),s=0+a.charCodeAt(0)-48;if(s<=0)throw new RangeError;return(a.length-1)*4+(32-Math.clz32(Math.min(s,8)))}const SPLIT=Math.pow(2,Math.ceil(Math.log2((Number.MAX_SAFE_INTEGER+1)*2)/2))+1;function fma(t,n,a){var s=SPLIT*t,l=s-(s-t),u=t-l,c=SPLIT*n,d=c-(c-n),Ct=n-d,ar=l*d+a+l*Ct+u*d+u*Ct;return ar}function modMultiplySmall(t,n,a){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;if(!(t>=0&&n>=0&&t<a&&n<a&&a<=Number.MAX_SAFE_INTEGER))throw new RangeError;var s=t*n;if(s<=Number.MAX_SAFE_INTEGER)return s-Math.floor(s/a)*a;var l=fma(t,n,-s),u=s/a-(1+Number.MAX_SAFE_INTEGER)+(1+Number.MAX_SAFE_INTEGER),c=0-fma(u,a,-s);l>0&&(l-=a),c<0&&(c+=a);var d=l+c;return d<0&&(d+=a),d}function modPowSmall(t,n,a){let s=1;for(;n!==0;){let l=Math.floor(n/2);n!==l+l&&(s=modMultiplySmall(s,t,a)),n=l,t=modMultiplySmall(t,t,a)}return s}function range(t,n){var a=[];for(let s=t;s<=n;s+=1)a.push(s);return a}function isPrimeSmall(t){if(typeof t!="number")throw new TypeError;if(t>Number.MAX_SAFE_INTEGER)throw new RangeError;if(t<2)throw new RangeError;if(+primeFactorUsingWheel(t,2*1024)<t)return!1;if(t<Math.pow(1024,2))return!0;let n=0,a=t-1;for(;a%2===0;)a/=2,n+=1;const s=[10,20,24,31,40,41,48,48,61,61,61,78,81],l=[2,3,5,7,11,13,17,17,19,19,19,23,29];let u=0;const c=Math.ceil(Math.log2(t));for(;c>s[u]&&u<s.length;)u+=1;let d=null;u<s.length?d=l.slice(0,u+1):d=range(2,Math.floor(1/Math.log(2)*Math.log(t)*Math.log(Math.log(t)))),console.assert(t>d[d.length-1]);for(const Ct of d){const ar=modPowSmall(Ct,a,t);if(ar!==1){for(let en=0,tn=ar;tn!==t-1;en+=1,tn=modMultiplySmall(tn,tn,t))if(en===n-1)return!1}}return!0}function factorByPollardRhoSmall(t){if(typeof t!="number")throw new TypeError;function n(c,d){for(;d!==0;){var Ct=c-Math.floor(c/d)*d;c=d,d=Ct}return c}function a(c,d,Ct){var ar=modMultiplySmall(c,c,Ct)-d;return ar<0?ar+Ct:ar}function s(c,d,Ct){if(c%d===0)return d;for(var ar=d,en=2,tn=d;;){for(var on=1,fn=tn,dn=!1,Cn=1;dn||Cn<=en;Cn+=1)if(tn=a(tn,Ct,c),Cn===en/2&&(fn=tn),Cn>en/2&&(on=dn?Math.abs(tn-ar):modMultiplySmall(on,Math.abs(tn-ar),c),dn||Cn===en||Cn%128===0)){var Rn=n(on,c);if(Rn!==1)if(!dn)tn=fn,dn=!0;else return Rn;on=1,fn=tn}en*=2,ar=tn}return 1}var l=1,u=t;do l+=1,u=s(t,l,1);while(u===t);return u}function factorByPollardRhoBig(t,n){function a(Ct){if(typeof Ct!="bigint")throw new TypeError;return Ct<0n?-Ct:Ct}function s(Ct,ar){if(typeof Ct!="bigint"||typeof ar!="bigint")throw new RangeError;for(;ar!==0n;){var en=BigInt(Ct)%ar;Ct=ar,ar=en}return Ct}function l(Ct,ar,en){if(typeof Ct!="bigint"||typeof ar!="bigint"||typeof en!="bigint")throw new RangeError;var tn=Ct*Ct%en-ar;return tn<0n?tn+en:tn}function u(Ct,ar,en,tn){if(typeof Ct!="bigint"||typeof ar!="bigint")throw new RangeError;if(Ct%ar===0n)return ar;for(var on=ar,fn=2,dn=ar;fn<=Math.pow(2,tn);){for(var Cn=1n,Rn=dn,ax=!1,ox=1;ax||ox<=fn;ox+=1)if(dn=l(dn,en,Ct),ox===fn/2&&(Rn=dn),ox>fn/2){const lx=a(BigInt(dn)-on);if(Cn=ax?lx:Cn*lx%Ct,ax||ox===fn||ox%128===0){var sx=s(Cn,Ct);if(sx!==1n)if(!ax)dn=Rn,ax=!0;else return sx;Cn=1n,Rn=dn}}fn*=2,on=dn}return 1n}var c=1,d=t;do c+=1,d=u(t,BigInt(c),1n,n);while(BigInt(d)===BigInt(t));return d}var WHEEL3=[1,2,2,4,2,4,2,4,6,2,6];function remainder(t,n){return t-Math.floor(t/n)*n}function primeFactorUsingWheel(t,n=void 0){if(typeof t!="number")throw new RangeError;var a=WHEEL3,s=3;n==null&&(n=Math.floor(Math.sqrt(Number(t)+.5)));for(var l=2,u=0;l<=n;){if(remainder(t,l)===0)return l;l+=a[u],u+=1,u===a.length&&(u=s)}return t}function someFactor(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));if(n<1)throw new TypeError("primeFactor cannot be called for numbers less than 2");if(n===1)return t;if(n<=Number.MAX_SAFE_INTEGER){var a=primeFactorUsingWheel(n,1024);if(a<n||n<=1024*1024)return BigInt(a);if(n%2===0)return 2n}//! optimize n = f**2
var s=BigInt(nthRoot(BigInt(t),2));if(s**2n===t)return s;if(n>5){var l=s+1n,u=l*l-BigInt(t),c=BigInt(nthRoot(BigInt(u),2));if(c*c===u)return l-c}//! optimize n = f**3
for(var d=bitLength$1(BigInt(t)),Ct=3;Ct<=d/10;Ct+=2){var ar=BigInt(nthRoot(BigInt(t),Ct));if(ar**BigInt(Ct)===BigInt(t))return ar}var en=n<=Number.MAX_SAFE_INTEGER;if(en&&isPrimeSmall(n)||!en&&isPrime$3(t))return t;if(n<=Number.MAX_SAFE_INTEGER)return factorByPollardRhoSmall(n);{var tn=Math.floor(Math.log(function(Cn){const Rn=Math.max(0,Cn.toString(16).length*4-48),ax=(Math.log2(Number(BigInt(Cn)>>BigInt(Rn)))+Rn)*Math.LN2;return Math.exp(Math.sqrt(ax*Math.log(ax)))}(t)));n<2**64&&(tn=1/0),globalThis.ArrayBuffer==null&&(tn=1/0),n>=2**128?tn-=3:n>=2**96?tn-=2:tn-=1;var on=factorByPollardRhoBig(t,tn);if(on!==1n)return on;if(globalThis.onerror!=null){var d=bitLength$1(t),fn=new TypeError("big size of someFactor bitLength("+t+") === "+d);globalThis.onerror(fn.message,"",0,0,fn)}return QuadraticSieveFactorization(t)}}function countTrailingZeros(t,n){t=BigInt(t);const a=BigInt(n);if(t<0n||a<0n)throw new RangeError;if(t===a)return 1;if(t===0n)throw new TypeError;if(a===2n){for(var l=32;BigInt.asUintN(l,t)===0n;)l*=2;for(var u=0,s=Math.floor(l/2);s>=32;s=Math.floor(s/2))BigInt.asUintN(s,t)===0n&&(u=+u+s,t>>=BigInt(s));const tn=function(on){const fn=+on;return 32-(Math.clz32(fn&-fn)+1)};return u=+u+tn(Number(BigInt.asUintN(32,t))),u}for(var l=1;t%a**BigInt(l)===0n;)l*=2;for(var u=0,s=l/2;s>=1;s/=2){var c=a**BigInt(s),d=BigInt(t)/c,Ct=BigInt(t)-d*BigInt(c);Ct===0n&&(u=+u+s,t=d)}return u}primeFactor._rationalNumberToDecimalString=function(t,n,a){const s=function(fn,dn){if(fn=BigInt(fn),fn%2n===0n||fn%5n===0n)throw new RangeError("should be called with denominator not divible by 2 or 5");const Cn=fn;let Rn=0;if(Cn!==1n){let ax=1n;do Rn+=1,ax=10n*ax%Cn;while(Rn<=dn&&ax!==1n)}return Rn},l=function(fn,dn,Cn,Rn){let ax=+dn+fn.length-1;fn=fn.replace(/0+$/g,"");const ox=Math.max(0,Math.max(ax+1,Rn)-fn.length);return ax<=-1&&(fn=String("0".repeat(0-ax))+String(fn),ax=0),fn=String(fn)+String("0".repeat(ox)),fn=String(fn)+String("0".repeat(Math.max(Cn-(fn.length-(ax+1)),0))),fn.slice(0,ax+1)+(fn.length>ax+1?"."+fn.slice(ax+1):"")},u=function(fn,dn,Cn){const Rn=+dn+fn.length-1;return Rn<-6||Rn>=Cn?l(fn,-(fn.length-1),0,Cn)+"e"+(Rn<0?"-":"")+Math.abs(Rn).toString():l(fn,dn,0,Cn)},c=function(fn,dn,Cn){return Cn.significantDigits!=null?u(fn,dn,Cn.significantDigits):l(fn,dn,Cn.fractionDigits,0)};t=BigInt(t),n=BigInt(n);let d=1;n<0n&&(n=-BigInt(n),d=-d),t<0n&&(t=-BigInt(t),d=-d);const Ct=function(fn,dn){let Cn=Math.floor((bitLength$1(fn)-1-bitLength$1(dn))/Math.log2(10));for(;BigInt(Cn<0?10n**BigInt(-Cn)*fn:fn)>=BigInt(Cn>0?10n**BigInt(Cn)*dn:dn);)Cn+=1;return Cn-1},ar=primeFactor._countTrailingZeros(n,2),en=primeFactor._countTrailingZeros(n,5);if(ar>0&&t%2n===0n)throw new RangeError("not implemented");if(en>0&&t%5n===0n)throw new RangeError("not implemented");const tn=n/(2n**BigInt(ar)*5n**BigInt(en)),on=+Math.max(ar,en);if((a.fractionDigits!=null&&on<=a.fractionDigits||a.significantDigits!=null&&on+(Ct(t,n)+1)-primeFactor._countTrailingZeros(t,10)<=a.significantDigits)&&t%tn===0n){const fn=on,dn=(10n**BigInt(fn)*t/n).toString(),Cn=a.fractionDigits!=null?{fractionDigits:on}:{significantDigits:on+(Ct(t,n)+1)<=a.significantDigits?on+(Ct(t,n)+1):on+(Ct(t,n)+1)-primeFactor._countTrailingZeros(t,10)};return(d<0?"-":"")+c(dn,-fn,Cn)}else{const fn=+(a.fractionDigits!=null?a.fractionDigits:a.significantDigits-(Ct(t,n)+1)),dn=fn>0?10n**BigInt(fn)*t:t,Cn=fn<0?10n**BigInt(-fn)*n:n,Rn=((dn+Cn/2n)/Cn).toString();let ax=(d<0?"-":"")+c(Rn,-fn,a);const ox=+s(tn,ax.length);if(ox!==0&&ox<=ax.length){const sx=ax.indexOf(".");let lx=sx+1+on-(ax.indexOf("e")!==-1?-Number(String(ax.slice(ax.indexOf("e")+1)))-0:0)-primeFactor._countTrailingZeros(t,10);if(lx<sx+1){lx=sx+1;//!?
}const cx=ax.indexOf("e")!==-1?ax.indexOf("e"):ax.length;sx!==-1&&(lx+ox<cx||lx+ox===cx&&+ax.charCodeAt(lx)<53)&&(ax=ax.slice(0,lx)+"("+ax.slice(lx,lx+ox)+")"+ax.slice(lx+ox))}return!/[^0\.]/.test(ax)&&d>=0&&t!==0n&&(ax="+"+ax),ax}};function primeFactor(t){t=BigInt(t);var n=BigInt(someFactor(t));if(n===t)return n;var a=primeFactor(n);return a}function modInverseBig(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;console.assert(t>=0n),console.assert(n>0n),t>=n&&(t=t%n);let a=t,s=n,l=1n,u=0n;for(;s!==0n;){const d=BigInt(BigInt(a)/s),Ct=a-d*s;a=s,s=Ct;const ar=l-d*u;l=u,u=ar}let c=l;return c=c<0n?c+n:c,console.assert(c>=0n&&c<n),c}function modInverseSmall(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;if(n<0)throw new RangeError;console.assert(t>=0),t>=n&&(t=t%n);let a=t,s=n,l=1,u=0;for(;s!==0;){const d=Math.floor(a/s),Ct=a-d*s;a=s,s=Ct;const ar=l-d*u;l=u,u=ar}let c=l;return c=c<0?c+n:c,console.assert(c>=0&&c<n),c}function modInverse(t,n){return typeof n=="number"?modInverseSmall(typeof t=="number"?t:Number(BigInt(t)%BigInt(n)),n):modInverseBig(BigInt(t),BigInt(n))}primeFactor._bitLength=bitLength$1;primeFactor._isPrime=function(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));return n<=Number.MAX_SAFE_INTEGER?isPrimeSmall(n):isPrime$3(t)};primeFactor._countTrailingZeros=countTrailingZeros;primeFactor._someFactor=someFactor;primeFactor._modInverse=modInverse;primeFactor._integerNthRoot=function(t,n){return nthRoot(BigInt(t),n)};primeFactor.testables={factorByPollardRhoSmall,factorByPollardRhoBig};(function(){function t(){}t.BigInt=function(px){return BigInt(px)},t.asIntN=function(px,hx){return BigInt.asIntN(px,hx)},t.asUintN=function(px,hx){return BigInt.asUintN(px,hx)},t.toNumber=function(px){return Number(px)},t.add=function(px,hx){return px+hx},t.subtract=function(px,hx){return px-hx},t.multiply=function(px,hx){return px*hx},t.divide=function(px,hx){return px/hx},t.remainder=function(px,hx){return px%hx},t.unaryMinus=function(px){return-px},t.equal=function(px,hx){return px===hx},t.lessThan=function(px,hx){return px<hx},t.greaterThan=function(px,hx){return px>hx},t.notEqual=function(px,hx){return px!==hx},t.lessThanOrEqual=function(px,hx){return px<=hx},t.greaterThanOrEqual=function(px,hx){return px>=hx},t.exponentiate=function(px,hx){if(typeof px!="bigint"||typeof hx!="bigint")throw new TypeError;var vx=Number(hx);if(vx<0)throw new RangeError;if(vx>Number.MAX_SAFE_INTEGER){var yx=Number(px);if(yx===0||yx===-1||yx===1)return yx===-1&&Number(hx%BigInt(2))===0?-px:px;throw new RangeError}if(px===BigInt(2))return BigInt(1)<<hx;if(vx===0)return BigInt(1);for(var Sx=px;vx%2===0;)vx=Math.floor(vx/2),Sx*=Sx;var _x=Sx;if(vx-=1,vx>=2){for(;vx>=2;){var Ex=Math.floor(vx/2);Ex*2!==vx&&(_x*=Sx),vx=Ex,Sx*=Sx}_x*=Sx}return _x},t.signedRightShift=function(px,hx){return px>>hx},t.leftShift=function(px,hx){return px<<hx},Symbol.hasInstance!=null&&Object.defineProperty(t,Symbol.hasInstance,{value:function(px){return typeof px=="bigint"}});var n=Symbol.hasInstance!=null&&typeof BigInt<"u"&&BigInt(Number.MAX_SAFE_INTEGER)+BigInt(2)-BigInt(2)===BigInt(Number.MAX_SAFE_INTEGER);if(n&&(-BigInt("0xffffffffffffffffffffffffffffffff")>>BigInt(64)).toString()!=="-18446744073709551616"&&(t.signedRightShift=function(px,hx){var vx=BigInt(1)<<hx;return px>=BigInt(0)?px/vx:(px-vx+BigInt(1))/vx}),n)try{BigInt(Number.MAX_SAFE_INTEGER+1)}catch{t.BigInt=function(hx){if(typeof hx=="number"){for(var vx=0,yx=hx;yx>=Number.MAX_SAFE_INTEGER+1;)yx/=Number.MAX_SAFE_INTEGER+1,vx+=Math.round(Math.log2(Number.MAX_SAFE_INTEGER+1));if(vx!==0)return BigInt(yx)<<BigInt(vx)}return BigInt(hx)}}for(var a=t,s=function(px){return function(hx,vx){return px(hx,vx)}},l=new Array(33),u=0;u<l.length;u+=1)l[u]=void 0;function c(){this.a=void 0,this.aKey=0,this.b=void 0,this.bKey=0,this.last=0}c.prototype.get=function(px){if(this.aKey===px)return this.last=0,this.a;if(this.bKey===px)return this.last=1,this.b},c.prototype.set=function(px,hx){this.last===0?(this.bKey=px,this.b=hx,this.last=1):(this.aKey=px,this.a=hx,this.last=0)};var d=new c,Ct=s(function(px){return a.toNumber(px)}),ar=function(px){if(typeof px=="number"){if(px>=-16&&px<=16){var hx=l[px+16];return hx==null&&(hx=a.BigInt(px),l[px+16]=hx),hx}var hx=d.get(px);return hx==null&&(hx=a.BigInt(px),d.set(px,hx)),hx}return px},en=void 0,tn=void 0,on=function(){en=a.BigInt(-9007199254740991),tn=a.BigInt(9007199254740991)},fn=function(px){return!a.lessThan(px,en)&&!a.greaterThan(px,tn)?a.toNumber(px):px},dn=s(function(px,hx){if(typeof px=="string"||typeof hx=="string")return px+hx;if(typeof px=="number"&&px===0)return hx;if(typeof hx=="number"&&hx===0)return px;var vx=ar(px),yx=ar(hx),Sx=a.add(vx,yx);return typeof px=="number"&&typeof hx=="number"?Sx:fn(Sx)}),Cn=s(function(px,hx){if(typeof px=="number"&&px===0)return lx(hx);if(typeof hx=="number"&&hx===0)return px;var vx=ar(px),yx=ar(hx),Sx=a.subtract(vx,yx);return typeof px=="number"&&typeof hx=="number"?Sx:fn(Sx)}),Rn=s(function(px,hx){if(typeof px=="number"&&px===0)return 0;if(typeof px=="number"&&px===1)return hx;if(typeof px=="number"&&px===-1)return a.unaryMinus(hx);if(typeof hx=="number"&&hx===0)return 0;if(typeof hx=="number"&&hx===1)return px;if(typeof hx=="number"&&hx===-1)return a.unaryMinus(px);var vx=ar(px),yx=ar(hx);return a.multiply(vx,yx)}),ax=s(function(px,hx){if(typeof px=="number")return 0;if(typeof hx=="number"&&hx===1)return px;if(typeof hx=="number"&&hx===-1)return a.unaryMinus(px);var vx=ar(px),yx=ar(hx);return fn(a.divide(vx,yx))}),ox=s(function(px,hx){if(typeof px=="number")return px;if(typeof hx=="number"&&hx===1||typeof hx=="number"&&hx===-1)return 0;var vx=ar(px),yx=ar(hx);return fn(a.remainder(vx,yx))}),sx=s(function(px,hx){if(typeof hx=="number"){if(hx===0)return 1;if(hx===1)return px;if(hx===2)return Rn(px,px);if(typeof px=="number"&&Math.abs(px)>2&&hx>=0){if(hx>42&&px%2===0)return Rn(sx(2,hx),sx(px/2,hx));var vx=Math.floor(Math.log(9007199254740991)/Math.log(Math.abs(px)+.5));if(vx>=2)return Rn(Math.pow(px,hx%vx),sx(Math.pow(px,vx),Math.floor(hx/vx)))}}var yx=ar(px),Sx=ar(hx),_x=a.exponentiate(yx,Sx);return typeof px=="number"&&Math.abs(px)<=1?fn(_x):_x}),lx=s(function(px){var hx=ar(px);return a.unaryMinus(hx)}),cx=s(function(px,hx){return typeof px=="number"||typeof hx=="number"?!1:a.equal(px,hx)}),fx=s(function(px,hx){return typeof px=="number"?px<a.toNumber(hx):typeof hx=="number"?a.toNumber(px)<hx:a.lessThan(px,hx)}),gx=s(function(px,hx){return typeof px=="number"?px>a.toNumber(hx):typeof hx=="number"?a.toNumber(px)>hx:a.greaterThan(px,hx)});function mx(){}mx.BigInt=function(px){if(typeof px=="number"||typeof px=="string"||typeof px=="bigint"){var hx=0+(typeof px=="number"?px:Number(px));if(hx>=-9007199254740991&&hx<=9007199254740991)return hx}return fn(a.BigInt(px))},mx.asIntN=function(px,hx){return fn(a.asIntN(px,a.BigInt(hx)))},mx.asUintN=function(px,hx){if(typeof hx=="number"&&hx>=0&&px>=0&&px<=53){var vx=Math.pow(2,px);return hx-Math.floor(hx/vx)*vx}return fn(a.asUintN(px,a.BigInt(hx)))},mx.toNumber=function(px){return typeof px=="number"?px:Ct(px)},mx.add=function(px,hx){if(typeof px=="number"&&typeof hx=="number"){var vx=px+hx;if(vx>=-9007199254740991&&vx<=9007199254740991)return vx}return dn(px,hx)},mx.subtract=function(px,hx){if(typeof px=="number"&&typeof hx=="number"){var vx=px-hx;if(vx>=-9007199254740991&&vx<=9007199254740991)return vx}return Cn(px,hx)},mx.multiply=function(px,hx){if(typeof px=="number"&&typeof hx=="number"){var vx=0+px*hx;if(vx>=-9007199254740991&&vx<=9007199254740991)return vx}return Rn(px,hx)},mx.divide=function(px,hx){return typeof px=="number"&&typeof hx=="number"&&hx!==0?px===0?0:px>0&&hx>0||px<0&&hx<0?0+Math.floor(px/hx):0-Math.floor((0-px)/hx):ax(px,hx)},mx.remainder=function(px,hx){return typeof px=="number"&&typeof hx=="number"&&hx!==0?0+px%hx:ox(px,hx)},mx.unaryMinus=function(px){return typeof px=="number"?0-px:lx(px)},mx.equal=function(px,hx){return typeof px=="number"&&typeof hx=="number"?px===hx:cx(px,hx)},mx.lessThan=function(px,hx){return typeof px=="number"&&typeof hx=="number"?px<hx:fx(px,hx)},mx.greaterThan=function(px,hx){return typeof px=="number"&&typeof hx=="number"?px>hx:gx(px,hx)},mx.notEqual=function(px,hx){return!mx.equal(px,hx)},mx.lessThanOrEqual=function(px,hx){return!mx.greaterThan(px,hx)},mx.greaterThanOrEqual=function(px,hx){return!mx.lessThan(px,hx)},mx.exponentiate=function(px,hx){if(typeof px=="number"&&typeof hx=="number"&&hx>=0&&(hx<53||px>=-1&&px<=1)){var vx=0+Math.pow(px,hx);if(vx>=-9007199254740991&&vx<=9007199254740991)return vx}return sx(px,hx)},mx.signedRightShift=function(px,hx){return fn(a.signedRightShift(ar(px),ar(hx)))},mx.leftShift=function(px,hx){if(typeof hx=="number"&&hx>=0){if(typeof px=="number"){var vx=hx===0?px:px*Math.pow(2,hx);if(vx>=-9007199254740991&&vx<=9007199254740991)return vx}return a.leftShift(ar(px),ar(hx))}return fn(a.leftShift(ar(px),ar(hx)))},Symbol.hasInstance!=null&&Object.defineProperty(mx,Symbol.hasInstance,{value:function(px){return typeof px=="number"||px instanceof a}}),globalThis.SmallBigInt=mx,globalThis.JSBI=n?t:globalThis.JSBI||globalThis.BigInteger,a=globalThis.JSBI,on()})();function Matrix$1(t){this.a=t}Matrix$1.Zero=function(t,n){for(var a=new Array(n),s=0;s<n;s+=1)a[s]=Expression.ZERO;for(var l=new Array(t),u=0;u<t;u+=1)l[u]=a;return new Matrix$1(l)};Matrix$1.I=function(t){return Matrix$1.Zero(t,t).map(function(n,a,s){return a===s?Expression.ONE:Expression.ZERO})};Matrix$1.prototype.rows=function(){return this.a.length};Matrix$1.prototype.cols=function(){return this.a.length>0?this.a[0].length:0};Matrix$1.prototype.e=function(t,n){return this.a[t][n]};Matrix$1.prototype.isSquare=function(){return this.rows()>0&&this.rows()===this.cols()};Matrix$1.prototype.map=function(t){for(var n=this.rows(),a=this.cols(),s=new Array(n),l=-1;++l<n;){for(var u=new Array(a),c=-1;++c<a;){var d=t.call(void 0,this.e(l,c),l,c,this);u[c]=d.simplifyExpression()}s[l]=u}return new Matrix$1(s)};Matrix$1.prototype.transpose=function(){var t=this;return Matrix$1.Zero(t.cols(),t.rows()).map(function(n,a,s){return t.e(s,a)})};Matrix$1.prototype.scale=function(t){return this.map(function(n,a,s){return n.multiply(t)})};Matrix$1.prototype.multiply=function(t){var n=this;if(n.cols()!==t.rows())throw new RangeError("DimensionMismatchException");return Matrix$1.Zero(n.rows(),t.cols()).map(function(a,s,l){for(var u=t.rows(),c=-1;++c<u;){//! this code is used to show not simplified expressions
var d=n.e(s,c).multiply(t.e(c,l));a=c===0?d:a.add(d)}return a})};Matrix$1.prototype.add=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())throw new RangeError("MatrixDimensionMismatchException");return n.map(function(a,s,l){return a.add(t.e(s,l))})};Matrix$1.prototype.augment=function(t){if(this.rows()!==t.rows())throw new RangeError("NonSquareMatrixException");var n=this;return Matrix$1.Zero(n.rows(),n.cols()+t.cols()).map(function(a,s,l){return l<n.cols()?n.e(s,l):t.e(s,l-n.cols())})};Matrix$1.prototype.rowReduce=function(t,n,a,s){for(var l=this.rows(),u=this.cols(),c=new Array(l),d=-1;++d<l;)if(t===d){for(var Ct=new Array(u),ar=s==null?this.e(t,a).divide(this.e(n,a)):void 0,en=-1;++en<u;){var tn=void 0;s==null?tn=this.e(t,en).subtract(ar.multiply(this.e(n,en))):tn=this.e(n,a).multiply(this.e(t,en)).subtract(this.e(t,a).multiply(this.e(n,en))).divide(s),Ct[en]=tn.simplifyExpression()}c[d]=Ct}else c[d]=this.a[d];return new Matrix$1(c)};Matrix$1.prototype.swapRows=function(t,n,a){var s=this;return s.map(function(l,u,c){return u===t?s.e(n,c):u===n?a?s.e(t,c).negate():s.e(t,c):l})};var notEqualsZero=function(t,n){if(n!=null){//!update from 2018-16-07
return n.andZero(t).isFalse()}return!t.equals(Expression.ZERO)};Matrix$1.check=function(t,n,a,s,l){for(var u=a;u<s;u+=1)if(t!=="solving"||notEqualsZero(n.e(u,n.cols()-1),l)){for(var c=t==="solving"?n.cols()-1:t==="determinant"?n.cols():t==="inverse"?Math.floor(n.cols()/2):-1,d=0;d<c&&n.e(u,d).equals(Expression.ZERO);)d+=1;if(d===c)return u}return-1};Matrix$1.toRowEchelonStep=function(t,n,a,s,l,u,c){var d=void 0,Ct=void 0,ar=0;if(s!==n&&(d=t,t=t.swapRows(n,s,u.usage==="determinant"),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:u.usage==="determinant"?"swap-negate":"swap",targetRow:n,pivotRow:s,pivotColumn:a})),u.method===Matrix$1.GaussJordan&&(t.e(n,a).equals(Expression.ONE)||(d=t,Ct=Expression.ONE.divide(t.e(n,a)),t=t.map(function(tn,on,fn){return on!==n?tn:tn.multiply(Ct)}),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:"divide",targetRow:n,pivotRow:n,pivotColumn:a}))),u.method===Matrix$1.Gauss||u.method===Matrix$1.GaussJordan){for(ar=n;++ar<t.rows();)if(!t.e(ar,a).equals(Expression.ZERO)){d=t,t=t.rowReduce(ar,n,a),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:d,type:"reduce",targetRow:ar,pivotRow:n,pivotColumn:a});var en=Matrix$1.check(u.usage,t,ar,ar+1,c);if(en!==-1)return{stoppedAtRow:en,matrix:t}}}if(u.method===Matrix$1.GaussMontante){for(d=t,ar=-1;++ar<t.rows();)ar!==n&&(t=t.rowReduce(ar,n,a,l));u.callback!=null&&u.callback({previousPivot:l,newMatrix:t,oldMatrix:d,type:"pivot",targetRow:-1,pivotRow:n,pivotColumn:a});var en=Matrix$1.check(u.usage,t,0,t.rows(),c);if(en!==-1)return{stoppedAtRow:en,matrix:t}}return{stoppedAtRow:-1,matrix:t}};Matrix$1.toRowEchelonBackSubstitution=function(t,n,a){if(a.method===Matrix$1.GaussJordan)for(;--n>=0;){for(var s=0;s<t.cols()&&t.e(n,s).equals(Expression.ZERO);)s+=1;if(s<t.cols()){for(var l=n;--l>=0;)if(!t.e(l,s).equals(Expression.ZERO)){var u=t;t=t.rowReduce(l,n,s),a.callback!=null&&a.callback({previousPivot:void 0,newMatrix:t,oldMatrix:u,type:"reduce",targetRow:l,pivotRow:n,pivotColumn:s})}}}return t};var isConditionValid=function(t,n){for(var a=0;a<n.rows();a++)for(var s=0;s<n.cols();s++){var l=n.e(a,s);if(!Polynomial._isIntegerLike(l)){if(Polynomial._isIntegerLike(l.getNumerator())){//!!! for performance
l=l.getDenominator().inverse()}if(t.andZero(l).isFalse()&&t.andNotZero(l).isFalse())return!1}}return!0};Matrix$1.Gauss="Gauss";Matrix$1.GaussJordan="Gauss-Jordan";Matrix$1.GaussMontante="Gauss-Montante";function ToRowEchelonOptions(t,n,a){if(n!=="determinant"&&n!=="inverse"&&n!=="solving"&&n!=="LU-decomposition"&&n!==""&&n!=="row-reduction")throw new RangeError;if(t!==Matrix$1.Gauss&&t!==Matrix$1.GaussJordan&&t!==Matrix$1.GaussMontante)throw new RangeError;this.method=t,this.usage=n,this.callback=a}Matrix$1.ToRowEchelonOptions=ToRowEchelonOptions;var COLUMN_LOOP=0,ZERO=1,NOT_ZERO=2;Matrix$1.prototype.toRowEchelon=function(t,n,a){var s=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(s,0,-1,-1,Expression.ONE,COLUMN_LOOP,void 0)};Matrix$1.prototype.toRowEchelonXXX=function(t,n,a,s){var l=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(l,0,-1,-1,Expression.ONE,COLUMN_LOOP,s)};Matrix$1.prototype.toRowEchelonInternal=function(t,n,a,s,l,u,c){var d=this;c!=null&&!c.isTrue()&&(d=d.map(function(Rn,ax,ox){return c.updateExpression(Rn)}),l=c.updateExpression(l));var Ct=Matrix$1.check(t.usage,d,0,d.rows(),c);if(Ct!==-1)return{stoppedAtRow:Ct,matrix:d,condition:c};for(;;)switch(u){case COLUMN_LOOP:if(a+=1,a>=d.cols())return d=Matrix$1.toRowEchelonBackSubstitution(d,n,t),{stoppedAtRow:-1,matrix:d,condition:c};if(a>n&&(t.usage==="determinant"||t.usage==="inverse"))return a>=Math.floor(d.cols()/2)&&t.usage==="inverse"?(d=Matrix$1.toRowEchelonBackSubstitution(d,n,t),{stoppedAtRow:-1,matrix:d,condition:c}):{stoppedAtRow:n,matrix:d,condition:c};s=n-1,u=ZERO;break;case ZERO:if(c==null)s+=1,s<d.rows()?d.e(s,a).equals(Expression.ZERO)?u=ZERO:u=NOT_ZERO:u=COLUMN_LOOP;else{s>=n&&(d=n>=d.rows()||d.e(n,a).equals(Expression.ZERO)?d:d.map(function(ax,ox,sx){return c.updateExpression(ax)}),l=c.updateExpression(l));var ar=!1;if(s===n-1){//!
for(var en=n;en<d.rows()&&!((c.andZero(d.e(en,a)).isFalse()||t.usage==="LU-decomposition")&&!d.e(en,a).equals(Expression.ZERO));)en+=1;en<d.rows()&&(s=en,ar=!0)}//!
if(ar)u=NOT_ZERO;else if(s+=1,s<d.rows()){var tn=d.e(s,a),on=c.andNotZero(tn),fn=c.andZero(tn);if(!fn.isFalse()){//!new 2020-01-03
if(!isConditionValid(fn,d)){debugger;fn=Condition.FALSE;//!!!
c=on;//!
}//!
}if(fn.isFalse())u=NOT_ZERO;else if(on.isFalse())u=ZERO;else{if(t.usage==="row-reduction"){var Cn=Matrix$1.toRowEchelonStep(d,n,a,s,l,Object.assign({},t,{callback:null}),c),dn=Cn.matrix.slice(s+1,d.rows(),a,d.cols()).map(function(ox,sx,lx){return fn.updateExpression(ox)});if(dn.eql(Matrix$1.Zero(dn.rows(),dn.cols())))return d.toRowEchelonInternal(t,n,a,s,l,NOT_ZERO,c)}return{matrix:d,c1:on,a1:function(){return d.toRowEchelonInternal(t,n,a,s,l,NOT_ZERO,on)},c2:fn,a2:function(){return d.toRowEchelonInternal(t,n,a,s,l,ZERO,fn)}}}}else u=COLUMN_LOOP}break;case NOT_ZERO:var Cn=Matrix$1.toRowEchelonStep(d,n,a,s,l,t,c),Ct=Cn.stoppedAtRow;if(d=Cn.matrix,Ct!==-1)return{stoppedAtRow:Ct,matrix:d,condition:c};l=d.e(n,a),n+=1,u=COLUMN_LOOP;break}};Matrix$1.prototype.determinant=function(){var t=this.rows();if(!this.isSquare()||t===0)throw new RangeError("NonSquareMatrixException");var n,a,s,n=this.toRowEchelon(Matrix$1.GaussMontante,"determinant",void 0),a=n.stoppedAtRow,s=n.matrix;return a!==-1?Expression.ZERO:s.e(t-1,t-1)};Matrix$1.prototype.rank=function(){for(var t=this.toRowEchelon(Matrix$1.GaussMontante,"",void 0).matrix,n=0,a=0,s=0;a<t.rows();){for(;s<t.cols()&&t.e(a,s).equals(Expression.ZERO);)s+=1;s<t.cols()&&(n+=1),a+=1}return n};Matrix$1.prototype.inverse=function(){if(!this.isSquare())throw new RangeError("NonSquareMatrixException");if(this.rows()===2){var t=this.e(0,0),n=this.e(0,1),a=this.e(1,0),s=this.e(1,1),l=t.multiply(s).subtract(n.multiply(a));if(l.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");return Matrix$1.Zero(this.rows(),this.rows()).map(function(c,d,Ct){return(d===0?Ct===0?s:n.negate():Ct===0?a.negate():t).divide(l)})}var u=this.augment(Matrix$1.I(this.rows()));return u=u.toRowEchelon(Matrix$1.GaussMontante,"inverse",void 0).matrix,Matrix$1.Zero(u.rows(),u.rows()).map(function(c,d,Ct){var ar=u.e(d,d);if(ar.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");var en=u.e(d,Ct+u.rows());return ar.equals(Expression.ONE)?en:en.divide(ar)})};Matrix$1.prototype.toString=function(t){var n="",a=this.rows(),s=this.cols();if(a===0&&s===0)throw new RangeError;var l=-1;for(n+="{";++l<a;){l!==0&&(n+=","),n+="{";for(var u=-1;++u<s;)u!==0&&(n+=","),n+=this.e(l,u).toString(t);n+="}"}return n+="}",n};Matrix$1.prototype.negate=function(){return this.map(function(t,n,a){return t.negate()})};Matrix$1.prototype.subtract=function(t){return this.add(t.negate())};Matrix$1.prototype.getElements=function(){for(var t=this.rows(),n=this.cols(),a=new Array(t),s=0;s<t;s+=1){for(var l=new Array(n),u=0;u<n;u+=1)l[u]=this.e(s,u).toString();a[s]=l}return a};Matrix$1.prototype.slice=function(t,n,a,s){var l=this;return Matrix$1.Zero(n-t,s-a).map(function(u,c,d){return l.e(c+t,d+a)})};Matrix$1.prototype.isExact=function(){for(var t=this.rows(),n=this.cols(),a=0;a<t;a+=1)for(var s=0;s<n;s+=1)if(!this.e(a,s).isExact())return!1;return!0};Matrix$1.prototype.eql=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())return!1;for(var a=0;a<n.rows();a+=1)for(var s=0;s<n.cols();s+=1)if(!n.e(a,s).equals(t.e(a,s)))return!1;return!0};Matrix$1.prototype.pow=function(t){if(!(t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError;var n=function(a,s,l){return s<1?l:2*Math.floor(s/2)!==s?n(a,s-1,l.multiply(a)):n(a.multiply(a),Math.floor(s/2),l)};return n(this,t,Matrix$1.I(this.rows()))};Matrix$1.split=function(t){t=t.replace(/\b(sin|cos)\x20/g,"$1");var n=[],a=t;if(/^\s*\[[^\[\]]*\]\s*$/.exec(a)!=null){//!
a=a.replace(/\[/g," "),a=a.replace(/\]/g," ")}//!
if(a.replace(/^\s+|\s+$/g,"")!==""){a=a.replace(/;/g,`
`),a=a.replace(/\r/g,`
`);var s=[];n.push(s);for(var l=0,u=void 0;(u=/^\s*\S+/.exec(a.slice(l)))!=null;){var c=u[0];c.indexOf(`
`)!==-1&&s.length!==0&&(s=[],n.push(s),c=c.replace(/\n/g," ")),s.push(c),l+=c.length}}//!new 2023-05-07
for(var d=0;d<n.length;d++)n[d].length===1&&/,/.test(n[d][0])&&(n[d]=n[d][0].split(","));return n};Matrix$1.padRows=function(t,n){for(var a=t.length,s=0,l=0;l<t.length;l+=1)s=Math.max(s,t[l].length);for(var u=new Array(a),c=0;c<a;c+=1){for(var d=t[c],Ct=new Array(s),ar=0;ar<s;ar+=1)Ct[ar]=ar<d.length?n!=null?n(d[ar]):d[ar]:Expression.ZERO;u[c]=Ct}return new Matrix$1(u)};Matrix$1.solveByGaussNext=function(t,n){for(var a=new Array(t.cols()-1),s=0;s<t.cols()-1;s+=1)a[s]=-1;for(var l=t.rows()-1;l>=0;l-=1){for(var u=0;u<t.cols()-1&&t.e(l,u).equals(Expression.ZERO);)u+=1;if(u<t.cols()-1){a[u]=l;for(var c=t,s=u+1;s<t.cols()-1;s+=1)if(!t.e(l,s).equals(Expression.ZERO)){var d=a[s];d!==-1&&(t=t.rowReduce(l,d,s))}var Ct=t;if(!t.e(l,u).equals(Expression.ONE)){var ar=t.e(l,u);t=t.map(function(en,tn,on){return tn===l?en.divide(ar):en})}n?.(t,c,Ct,l,u)}}return t};Matrix$1.getPivotRow=function(t,n){for(var a=t.rows()-1;a>=0&&t.e(a,n).equals(Expression.ZERO);)a-=1;if(a>=0){for(var s=n-1;s>=0&&t.e(a,s).equals(Expression.ZERO);)s-=1;if(s<0)return a}return-1};Matrix$1.getSolutionSet=function(t){for(var n={basisVectors:[],variables:[]},a=0;a<t.cols()-1;a+=1)if(Matrix$1.getPivotRow(t,a)===-1){for(var s=new Array(t.cols()-1),l=0;l<t.cols()-1;l+=1){var u=Matrix$1.getPivotRow(t,l);s[l]=u!==-1?t.e(u,a).negate():l===a?Expression.ONE:Expression.ZERO}var c=new Vector(s);n.basisVectors.push(c),n.variables.push(a)}return n};Matrix$1.prototype.minorMatrix=function(t,n){var a=this;return Matrix$1.Zero(this.rows()-1,this.cols()-1).map(function(s,l,u){return a.e(l<t?l:l+1,u<n?u:u+1)})};Matrix$1.toRowEchelonWithCallback=function(t,n,a,s,l){var u=t.toRowEchelonXXX(n,a,s,Condition.TRUE),c=function(d){d.c1==null&&d.c2==null?l(d):(c(d.a1()),c(d.a2()))};c(u)};Matrix$1.prototype.isDiagonal=function(){return this.eql(this.map(function(t,n,a){return n!==a?Expression.ZERO:t}))};Matrix$1.prototype.isScalar=function(){var t=this;return this.eql(this.map(function(n,a,s){return a!==s?Expression.ZERO:t.e(0,0)}))};Matrix$1.prototype.isNilpotent=function(){var t=this.map(function(n,a,s){return s<=a?Expression.ZERO:n});if(this.eql(t)){//! This method only tests if it nilpotent based on a property and so may return false for the positive result
return!0}return this.pow(this.cols()).eql(Matrix$1.Zero(this.cols(),this.cols()))};Matrix$1.prototype.isJordanMatrix=function(){var t=this;return this.eql(this.map(function(n,a,s){return a===s?n:s===a+1&&t.e(a,a).equals(t.e(a+1,a+1))&&!t.e(a,s).equals(Expression.ZERO)?Expression.ONE:Expression.ZERO}))};Matrix$1.prototype.isZero=function(){return this.eql(Matrix$1.Zero(this.rows(),this.cols()))};function Vector(t){this.elements=t}Vector.prototype.e=function(t){return this.elements[t]};Vector.prototype.dimensions=function(){return this.elements.length};Vector.prototype.rows=function(){return this.dimensions()};Vector.prototype.cols=function(){return 1};Vector.prototype.isExact=function(){for(var t=0;t<this.dimensions();t+=1)if(!this.e(t).isExact())return!1;return!0};Vector.prototype.toString=function(t){return Matrix$1.prototype.toString.call(this,t)};Vector.prototype.dot=function(t){let n=Expression.ZERO;for(let s=0;s<Math.max(this.dimensions(),t.dimensions());s+=1){var a=this.e(s).multiply(t.e(s).complexConjugate());n=n===Expression.ZERO?a:n.add(a)}return n};Vector.prototype.toUnitVector=function(){var t=this.dot(this).squareRoot();return this.scale(t.inverse())};Vector.prototype.scale=function(t){return new Vector(this.elements.map(n=>t.multiply(n)))};Vector.prototype.subtract=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions(),a=new Array(n);for(let s=0;s<n;s+=1)a[s]=this.e(s).subtract(t.e(s));return new Vector(a)};Vector.prototype.eql=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions();for(var a=0;a<n;a+=1)if(!this.e(a).equals(t.e(a)))return!1;return!0};Vector.Zero=function(t){return new Vector(new Array(t).fill(Expression.ZERO))};Matrix$1.Vector=Vector;Matrix$1.prototype.row=function(t){const n=new Array(this.cols());for(let a=0;a<this.cols();a+=1)n[a]=this.e(t,a);return new Vector(n)};Matrix$1.prototype.col=function(t){const n=new Array(this.rows());for(let a=0;a<this.rows();a+=1)n[a]=this.e(a,t);return new Vector(n)};function Heap(t){this.data=[],this.compareTo=t}Heap.prototype.push=function(t){var n=this.data,a=this.compareTo;n.push(t);for(var s=n.length,l=s-1,u=n[l],c=-1;l>0&&a(u,n[c=Math.floor((l-1)/2)])<0;)n[l]=n[c],l=c;n[l]=u};Heap.prototype.pop=function(){var t=this.data,n=this.compareTo,a=t.length;if(a!==0){if(a===1)return t.pop();var s=t[0];t[0]=t.pop(),--a;var l=0;if(l<a){var u=t[l];do{var c=a,d=u,Ct=l*2;++Ct<a&&n(t[Ct],d)<0&&(c=Ct,d=t[c]),++Ct<a&&n(t[Ct],d)<0&&(c=Ct,d=t[c]),t[l]=d,l=c}while(l<a)}return s}};Heap.prototype.peek=function(){var t=this.data;return t.length>0?t[0]:void 0};Heap.prototype.size=function(){var t=this.data;return t.length};Heap.prototype.replace=function(t){return this.data.push(t),this.pop()};const DefaultYField={ONE:1,sub:function(t,n){return t-n},mul:function(t,n){return t*n},div:function(t,n){return t/n},scale:function(t,n){return t*Number(n)}};let yField=DefaultYField;function NewtonInterpolation(){let t=function(){let Ct=[],ar=[],en=!0,tn=yField.ONE,on=yField.ONE,fn=!0;const dn={next:function(Cn){for(;;){if(fn)return fn=!1,{value:on,done:!1};const[Rn,ax]=Cn;if(en&&Ct.length>=2&&Ct[Ct.length-1]-Ct[Ct.length-2]!==Rn-Ct[Ct.length-1]){const sx=Ct[Ct.length-1]-Ct[Ct.length-2];tn=yField.ONE;for(let lx=1;lx<ar.length;lx+=1)tn=yField.scale(tn,sx*lx),ar[lx]=yField.div(ar[lx],tn);en=!1}let ox=ax;for(let sx=0;sx<ar.length;sx+=1){let lx=yField.sub(ox,ar[sx]);en||(lx=yField.div(lx,yField.scale(yField.ONE,Rn-Ct[Ct.length-1-sx]))),ar[sx]=ox,ox=lx}if(ar.push(ox),Ct.push(Rn),on=ar[ar.length-1],en&&Ct.length>=2){const sx=ar.length-1,lx=Ct[Ct.length-1]-Ct[Ct.length-2];tn=yField.scale(tn,lx*sx),on=yField.div(on,tn)}return{value:on,done:!1}}}};return dn[globalThis.Symbol.iterator]=function(){return this},dn};const n=yField.sub(yField.ONE,yField.ONE),a=yField.ONE;let s=t();s.next();let l=[a],u=[],c=!0;const d={next:function(Ct){for(;;){if(c)return c=!1,{value:u,done:!1};const[ar,en]=Ct,tn=yField.sub(n,s.next([ar,en]).value);u.push(n);for(let on=l.length-1;on>=0;on-=1)u[on]=yField.sub(u[on],yField.mul(l[on],tn));l.push(n);for(let on=l.length-1;on>=0;on-=1)l[on]=yField.sub(on>=1?l[on-1]:n,yField.scale(l[on],ar));return{value:u,done:!1}}}};return d[globalThis.Symbol.iterator]=function(){return this},d}NewtonInterpolation.setField=function(t){yField=t||DefaultYField};globalThis.NewtonInterpolation=NewtonInterpolation;var seedrandom$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom=seedrandom$1.exports,hasRequiredSeedrandom;function requireSeedrandom(){return hasRequiredSeedrandom||(hasRequiredSeedrandom=1,(function(t){(function(n,a,s){var l=256,u=6,c=52,d="random",Ct=s.pow(l,u),ar=s.pow(2,c),en=ar*2,tn=l-1,on;function fn(lx,cx,fx){var gx=[];cx=cx==!0?{entropy:!0}:cx||{};var mx=ax(Rn(cx.entropy?[lx,sx(a)]:lx??ox(),3),gx),px=new dn(gx),hx=function(){for(var vx=px.g(u),yx=Ct,Sx=0;vx<ar;)vx=(vx+Sx)*l,yx*=l,Sx=px.g(1);for(;vx>=en;)vx/=2,yx/=2,Sx>>>=1;return(vx+Sx)/yx};return hx.int32=function(){return px.g(4)|0},hx.quick=function(){return px.g(4)/4294967296},hx.double=hx,ax(sx(px.S),a),(cx.pass||fx||function(vx,yx,Sx,_x){return _x&&(_x.S&&Cn(_x,px),vx.state=function(){return Cn(px,{})}),Sx?(s[d]=vx,yx):vx})(hx,mx,"global"in cx?cx.global:this==s,cx.state)}function dn(lx){var cx,fx=lx.length,gx=this,mx=0,px=gx.i=gx.j=0,hx=gx.S=[];for(fx||(lx=[fx++]);mx<l;)hx[mx]=mx++;for(mx=0;mx<l;mx++)hx[mx]=hx[px=tn&px+lx[mx%fx]+(cx=hx[mx])],hx[px]=cx;(gx.g=function(vx){for(var yx,Sx=0,_x=gx.i,Ex=gx.j,bx=gx.S;vx--;)yx=bx[_x=tn&_x+1],Sx=Sx*l+bx[tn&(bx[_x]=bx[Ex=tn&Ex+yx])+(bx[Ex]=yx)];return gx.i=_x,gx.j=Ex,Sx})(l)}function Cn(lx,cx){return cx.i=lx.i,cx.j=lx.j,cx.S=lx.S.slice(),cx}function Rn(lx,cx){var fx=[],gx=typeof lx,mx;if(cx&&gx=="object")for(mx in lx)try{fx.push(Rn(lx[mx],cx-1))}catch{}return fx.length?fx:gx=="string"?lx:lx+"\0"}function ax(lx,cx){for(var fx=lx+"",gx,mx=0;mx<fx.length;)cx[tn&mx]=tn&(gx^=cx[tn&mx]*19)+fx.charCodeAt(mx++);return sx(cx)}function ox(){try{var lx;return on&&(lx=on.randomBytes)?lx=lx(l):(lx=new Uint8Array(l),(n.crypto||n.msCrypto).getRandomValues(lx)),sx(lx)}catch{var cx=n.navigator,fx=cx&&cx.plugins;return[+new Date,n,fx,n.screen,sx(a)]}}function sx(lx){return String.fromCharCode.apply(0,lx)}if(ax(s.random(),a),t.exports){t.exports=fn;try{on=require$$0}catch{}}else s["seed"+d]=fn})(typeof self<"u"?self:seedrandom,[],Math)})(seedrandom$1)),seedrandom$1.exports}requireSeedrandom();function combinations(t,n){const a=t.length;let s=new Array(n+1).fill(-1),l=new Array(n).fill(void 0),u=0,c={next:function(){for(;u>=0;)if(u<n){const d=s[u];d<a-n+u?(s[u]=d+1,l[u]=t[d+1],u+=1,s[u]=d+1):u-=1}else return u-=1,{value:l.slice(0),done:!1};return{value:void 0,done:!0}}};return c[globalThis.Symbol.iterator]=function(){return this},c}function modulo(t,n){return t-Math.floor(t/n)*n}function check(t){if(typeof t!="number"||Math.abs(t)>Number.MAX_SAFE_INTEGER)throw new RangeError}function schoolbook(t,n){const a=new Array(t.length===0||n.length===0?0:t.length-1+n.length-1+1);for(let s=0;s<a.length;s+=1){const l=Math.max(0,s-(n.length-1)),u=Math.min(s,t.length-1);let c=t[l]*n[s-l];for(let d=l+1;d<=u;d+=1)c+=t[d]*n[s-d];a[s]=c}return a}function absMax(t){let n=0;for(let a=0;a<t.length;a+=1)n=Math.max(n,Math.abs(t[a]));return n}function multiply(t,n){return check(absMax(t)*absMax(n)*Math.min(t.length,n.length)),schoolbook(t,n)}function IntPolynomial(t){let n=t.length;for(;n>0&&t[n-1]==0;)n-=1;t.length=n,check(absMax(t)),this.coefficients=t}IntPolynomial.prototype.add=function(t){const n=this.coefficients,a=t.coefficients,s=new Array(Math.max(n.length,a.length));for(let l=0;l<s.length;l+=1)l<n.length&&l<a.length?s[l]=n[l]+a[l]:l<n.length?s[l]=n[l]:s[l]=a[l];return new IntPolynomial(s)};IntPolynomial.prototype.subtract=function(t){return this.add(t.negate())};IntPolynomial.prototype.multiply=function(t){const n=this.coefficients,a=t.coefficients;return new IntPolynomial(multiply(n,a))};IntPolynomial.prototype.divideAndRemainderModP=function(t,n){const a=this.coefficients,s=t.coefficients;if(a.length<s.length)return{quotient:new IntPolynomial([]),remainder:this.mod(n)};if(s.length===0)throw new RangeError;const l=s[s.length-1];if(l!=1)throw new RangeError;check(n*n*s.length);const u=new Array(a.length);for(let ar=0;ar<a.length;ar+=1)u[ar]=a[ar];let c=u.length-1;const d=new Array(a.length-s.length+1),Ct=l-l;for(let ar=0;ar<d.length;ar+=1)d[ar]=Ct;for(;c>=s.length-1;){const ar=c-s.length+1,en=modulo(u[c],n);if(d[ar]=en,en!=0)if(en==1)for(let tn=0;tn<s.length;tn+=1)u[tn+ar]-=s[tn];else for(let tn=0;tn<s.length;tn+=1)u[tn+ar]-=en*s[tn];for(;c>=0&&modulo(u[c],n)==0;)u[c]=Ct,c-=1}for(let ar=0;ar<=c;ar+=1)u[ar]=modulo(u[ar],n);return{quotient:new IntPolynomial(d),remainder:new IntPolynomial(u)}};IntPolynomial.prototype.negate=function(t){return new IntPolynomial(this.coefficients.map(n=>n-n-n))};IntPolynomial.prototype.scale=function(t){return new IntPolynomial(this.coefficients.map(n=>n*t))};IntPolynomial.prototype.getDegree=function(){return this.coefficients.length-1};IntPolynomial.prototype.getLeadingCoefficient=function(){if(this.coefficients.length===0)throw new RangeError;return this.coefficients[this.coefficients.length-1]};IntPolynomial.prototype.getCoefficient=function(t){if(t>=this.coefficients.length)throw new RangeError;return this.coefficients[t]};IntPolynomial.prototype.derive=function(t){let n=new Array(this.coefficients.length-1);for(let a=0;a<n.length;a+=1)n[a]=(a+1)*this.coefficients[a+1];return new IntPolynomial(n)};IntPolynomial.prototype.mod=function(t){return new IntPolynomial(this.coefficients.map(n=>modulo(n,t)))};IntPolynomial.prototype.toString=function(){let t="",n=this.coefficients;for(let a=n.length-1;a>=0;a-=1)t+=n[a]>=0&&a!==n.length?"+":"",t+=n[a].toString(),a===1?t+="x":a!==0&&(t+="x^",t+=a);return t};IntPolynomial.from=function(t){return new IntPolynomial(t)};function toInt(t,n){return n instanceof Expression.Integer?Expression.Integer.fromBigInt(t):t}function fromInt(t){return t instanceof Expression.Integer?t:Expression.Integer.fromBigInt(t)}function toIntPolynomial(t,n){if(n instanceof Expression.Integer)return t.mod(n);for(var a=Expression.Integer.fromBigInt(n),s=new Array(t.getDegree()+1),l=0;l<s.length;l+=1)s[l]=t.getCoefficient(l).modulo(a).toBigInt();return IntPolynomial.from(s)}function fromIntPolynomial(t){for(var n=new Array(t.getDegree()+1),a=0;a<n.length;a+=1)n[a]=Expression.Integer.fromBigInt(t.getCoefficient(a));return Polynomial$1.from(n)}const isPrime$2=primeFactor._isPrime;function ExtendedEuclideanAlgorithm(t,n,a){t=t.mod(a),n=n.mod(a);let[s,l]=[t,n];const u=Polynomial$1.of(Expression.ZERO),c=Polynomial$1.of(a.divide(a));let[d,Ct]=[c,u],[ar,en]=[u,c];for(;l.getDegree()>=0;){const Cn=l.getLeadingCoefficient().modInverse(a),Rn=s.scale(Cn).mod(a).divideAndRemainderModP(l.scale(Cn).mod(a),a),ax=Rn.quotient;[s,l]=[l,Rn.remainder.scale(l.getLeadingCoefficient()).mod(a)],[d,Ct]=[Ct,d.subtract(ax.multiply(Ct)).mod(a)],[ar,en]=[en,ar.subtract(ax.multiply(en)).mod(a)]}const tn=s.getLeadingCoefficient().modInverse(a),on=s.scale(tn).mod(a),fn=d.scale(tn).mod(a),dn=ar.scale(tn).mod(a);return{U:fn,V:dn,gcd:on}}function modPow(t,n,a,s){let l=t,u=null;for(;!n.equals(Expression.ZERO);)n.remainder(Expression.TWO).equals(Expression.ZERO)?(n=n.truncatingDivide(Expression.TWO),l=l.multiply(l).mod(s).divideAndRemainderModP(a,s).remainder):(n=n.subtract(Expression.ONE),u==null?u=l:u=u.multiply(l).mod(s).divideAndRemainderModP(a,s).remainder);return u}function distinctDegreeFactorization(t,n){t=t.mod(n);let a=1;const s=[];let l=t;l=toMonic(l,n);const u=n,c=t.constructor.from([toInt(0,n),toInt(1,n)]);let d=modPow(c,fromInt(u),l,u);for(;l.getDegree()>=2*a;){const Ct=d.subtract(c).divideAndRemainderModP(l,u).remainder,ar=gcdOfPolynomialsOverFiniteField(l,Ct,u);ar.getDegree()!==0&&(s.push({factor:ar,degree:a}),l=l.divideAndRemainderModP(ar,u).quotient),a=a+1,d=modPow(d,fromInt(u),l,u)}return l.getDegree()>0&&s.push({factor:l,degree:l.getDegree()}),s.length===0&&s.push({factor:t,degree:1}),s}function randomBigInt0(t,n=Math.random){if(console.assert(Math.floor(t)===t),t<=52)return Math.floor(n()*2**t);const a=Math.ceil(t/104)*52;return(BigInt(randomBigInt0(t-a,n))<<BigInt(a))+BigInt(randomBigInt0(a,n))}function randomBigInt(t,n=Math.random){if(Number(t)<=2**52)return Math.floor(n()*Number(t));var a=Expression.Integer.fromBigInt(t).bitLength();return BigInt(randomBigInt0(a,n))*BigInt(t)>>BigInt(a)}function CantorZassenhausAlgorithm(t,n,a){t=t.mod(n),t=toMonic(t,n);const s=t.getDegree(),l=a,u=s/l,c=n;let d=[];d.push(t);const Ct=Math.seedrandom!=null?new Math.seedrandom("hello."):Math.random;for(;d.length<u;){const ar=t.constructor.from(new Array(s).fill(c).map(dn=>toInt(randomBigInt(fromInt(dn).toBigInt(),Ct),dn))),en=t.constructor.from([toInt(1,n)]),tn=fromInt(c)._pow(l).subtract(Expression.ONE).truncatingDivide(Expression.TWO),on=modPow(ar,tn,t,c).subtract(en).divideAndRemainderModP(t,c).remainder,fn=[];for(const dn of d){const Cn=gcdOfPolynomialsOverFiniteField(on,dn,c);Cn.getDegree()!==0&&Cn.getDegree()!==dn.getDegree()?(fn.push(Cn),fn.push(dn.divideAndRemainderModP(Cn,c).quotient)):fn.push(dn)}d=fn}return d}function factorizeOverTheFiniteField(t,n){if(!isFactorizationOverZpSquareFree(t,n))throw new RangeError("implemented only for square-free polynomials");let a=[];const s=distinctDegreeFactorization(t,n);for(const l of s){const u=CantorZassenhausAlgorithm(l.factor,n,l.degree);a=a.concat(u)}return a}function toMonic(t,n){if(t.getDegree()<0)return t;const a=toInt(fromInt(t.getLeadingCoefficient()).modInverse(fromInt(n)).toBigInt(),n);return t.scale(a).mod(n)}function gcdOfPolynomialsOverFiniteField(t,n,a){for(t=t.mod(a),n=n.mod(a),n=toMonic(n,a);n.getDegree()>=0;){let s=t.divideAndRemainderModP(n,a).remainder;s=toMonic(s,a),t=n,n=s}return t}function _gcdOfPolynomialsOverFiniteField0(t,n,a){return fromIntPolynomial(gcdOfPolynomialsOverFiniteField(toIntPolynomial(t,a),toIntPolynomial(n,a),a))}function isFactorizationOverZpSquareFree(t,n){const a=t;return gcdOfPolynomialsOverFiniteField(a,a.derive().mod(n),n).getDegree()===0}function factorizeOverTheIntegers(t,n=!0){const a=t;let s=null,l=null,u=null,c=!0,d=0,Ct=null,ar=0,en=0,tn=1,on=null;const fn={next:function(){if(t.getDegree()===0)return{value:null,done:!0};for(;t.getDegree()>1&&t.getCoefficient(0).equals(Expression.ZERO);){const sx=Polynomial$1.of(Expression.ZERO,Expression.ONE);return t=t.divideAndRemainder(sx,"undefined").quotient,{value:sx,done:!1}}if(t.getCoefficient(0).abs().bitLength()-t.getLeadingCoefficient().abs().bitLength()<-42){s==null&&(s=factorizeOverTheIntegers(t._exponentiateRoots(-1),n));const sx=s.next().value;return sx!=null?{value:sx._exponentiateRoots(-1),done:!1}:{value:null,done:!0}}if(t.isEven()&&a.getDegree()>=4){l==null&&(l=factorizeOverTheIntegers(t._exponentiateRoots(2),n));const sx=l.next().value;if(sx!=null){const lx=sx._exponentiateRoots(.5);return t=t.divideAndRemainder(lx,"undefined").quotient,{value:lx,done:!1}}}function dn(sx){return sx-Math.log2(Math.sqrt(Math.PI*Math.ceil(sx/2)))}function Cn(sx){return dn(sx.getDegree())+sx._log2hypot()}function Rn(sx){return Cn(sx)*.5}const ax=function(sx){return c?Rn(sx):Cn(sx)},ox=function(sx){let lx=sx,cx=lx;do{do lx=Expression.Integer.fromBigInt(lx).add(Expression.TWO).toBigInt();while(!isPrime$2(lx));n?cx=lx:cx=Expression.Integer.fromBigInt(lx)}while(t.getLeadingCoefficient().remainder(Expression.Integer.fromBigInt(lx)).equals(Expression.ZERO)||!isFactorizationOverZpSquareFree(toIntPolynomial(t,cx),cx));return cx};if(Ct==null){const sx=1+ax(t.scale(t.getLeadingCoefficient().abs()));n?d=ox(1):d=ox(Expression.TWO._pow(Math.ceil(sx)).add(Expression.ONE).toBigInt());const lx=n?2:0;if(lx!==0){let cx=d,fx=1/0;for(let gx=0;gx<lx&&fx>1;gx+=1){let mx=0;const px=distinctDegreeFactorization(toIntPolynomial(t,d),d);for(const hx of px)console.assert(hx.factor.getDegree()%hx.degree===0),mx+=hx.factor.getDegree()/hx.degree;fx>mx&&(cx=d,fx=mx),d=ox(d)}d=cx}if(Ct=factorizeOverTheFiniteField(toIntPolynomial(t,d),d).map(cx=>n?fromIntPolynomial(cx):cx),n&&Ct.length>15&&(c=!1),n){const cx=Math.ceil(sx/Math.log2(d)),fx=Expression.Integer.fromNumber(d);Ct[Ct.length-1]=Ct[Ct.length-1].scale(t.getLeadingCoefficient().modulo(fx)).mod(fx),Ct=HenselLifting(t,Ct,fx,cx),ar=fx._pow(cx),Ct=Ct.map(gx=>gx.scale(gx.getLeadingCoefficient().modulo(ar).modInverse(ar)).mod(ar))}else ar=d}//!new 2022-07-27
if(t.isEven()&&a.getDegree()>=4){if(u==null){for(let sx=0;sx<Ct.length;sx+=1)if(Ct[sx]!=null){Ct[sx].mod(ar);const lx=Ct[sx]._scaleRoots(Expression.ONE.negate()).mod(ar);let cx=!1;for(let fx=sx+1;fx<Ct.length&&!cx;fx+=1)Ct[fx]!=null&&Ct[fx].mod(ar).equals(lx)&&(Ct[fx]=null,cx=!0);if(!cx)return{value:null,done:!0}}Ct=Ct.filter(sx=>sx!=null);for(let sx=0;sx<Math.pow(2,Ct.length-1)&&u==null;sx+=1){const lx=Ct.map((fx,gx)=>Math.floor(sx/2**gx)%2===0?fx:fx._scaleRoots(Expression.ONE.negate()));let cx=!0;{const fx=t.getLeadingCoefficient();let gx=Expression.ZERO,mx=Expression.ZERO,px=fx;for(const vx of lx){const yx=vx.getCoefficient(2),Sx=vx.getCoefficient(1),_x=vx.getCoefficient(0);gx=gx.multiply(_x).add(mx.multiply(Sx)).add(px.multiply(yx)).modulo(ar),mx=mx.multiply(_x).add(px.multiply(Sx)).modulo(ar),px=px.multiply(_x).modulo(ar)}let hx=Polynomial$1.of(px,mx,gx).mod2(ar);hx=hx.multiply(hx._scaleRoots(Expression.ONE.negate())),cx=hx.getCoefficient(2).abs().equals(t.getCoefficient(2).multiply(t.getLeadingCoefficient()).abs())}if(cx){const fx=productModQ(lx,ar).scale(t.getLeadingCoefficient()).mod2(ar).primitivePart(),gx=fx._scaleRoots(Expression.ONE.negate());fx.multiply(gx).equals(t)&&(u=[],u.push(fx),u.push(gx))}}}if(u!=null)for(;u.length>0;)return{value:u.pop(),done:!1};return{value:null,done:!0}}//!!! (number of factors depends on the choise of prime numbers)
for(;tn<=(c?Ct.length-1:Math.floor(Ct.length/2));tn+=1){on=combinations(Ct,tn);let sx=null;for(;(sx=on.next().value)!=null;){en+=1;const lx=t.getLeadingCoefficient();let cx=lx;for(const fx of sx)cx=cx.multiply(fx.getCoefficient(0)).modulo(ar);if(cx=Polynomial$1.of(cx).mod2(ar).getCoefficient(0),t.getCoefficient(0).multiply(lx).remainder(cx).equals(Expression.ZERO)){let fx=productModQ(sx,ar);console.assert(fx.getLeadingCoefficient().equals(Expression.ONE)),fx=fx.scale(lx),fx=fx.mod2(ar),console.assert(fx.getDegree()<t.getDegree());const gx=t.scale(lx).divideAndRemainder(fx,"undefined");if(gx!=null&&gx.remainder.getDegree()<0){fx=fx.primitivePart(),Ct=Ct.filter(mx=>sx.indexOf(mx)===-1),on=combinations(Ct,tn);//!?
return t=gx.quotient,en>16&&console.debug(en),{value:fx,done:!1}}}}}if(en>16&&console.debug(en),a.getDegree()>t.getDegree()){const sx=t.primitivePart();return t=Polynomial$1.of(t.getContent()),{value:sx,done:!1}}return{value:null,done:!0}}};return fn[globalThis.Symbol.iterator]=function(){return this},fn}function HenselLift(t,n,a,s,l,u,c){console.assert(u.isDivisibleBy(c));const d=t.subtract(n.multiply(a)).scale(u.inverse()).mod(c),Ct=l.multiply(d).mod(c).divideAndRemainderModP(n.mod(c),c),ar=Ct.quotient,en=Ct.remainder,tn=s.multiply(d).add(a.mod(c).multiply(ar)).mod(c),on=n.add(en.scale(u)),fn=a.add(tn.scale(u));return[on,fn]}function QuadraticHenselLift(t,n,a,s,l){const u=l.divide(l),c=Polynomial$1.of(u).subtract(a.multiply(t)).subtract(s.multiply(n)).scale(l.inverse()).mod(l),d=s.multiply(c).mod(l).divideAndRemainderModP(t.mod(l),l),Ct=d.quotient,ar=a.multiply(c).add(n.mod(l).multiply(Ct)).mod(l),en=d.remainder,tn=a.add(ar.scale(l)),on=s.add(en.scale(l));return[tn,on]}function HenselLiftingOfTwoFactors(t,n,a,s,l){const u=ExtendedEuclideanAlgorithm(n,a,s);console.assert(u.gcd.getDegree()===0);let c=u.U,d=u.V;if(!(s instanceof Expression.Polynomial)){const en=s;let tn=1;for(;tn<l/4;){[n,a]=HenselLift(t,n,a,c,d,s,s),[c,d]=QuadraticHenselLift(n,a,c,d,s),s=s.multiply(s),tn*=2;{let dn=1;for(;tn*dn<l;)dn*=2;(tn-1)*dn>=l&&(tn-=1,s=s.divide(en))}}let on=tn,fn=s;for(;tn<l;)[n,a]=HenselLift(t,n,a,c,d,fn,s),fn=fn.multiply(s),tn+=on;if(tn!==l){const dn=en._pow(l);n=n.mod(dn),a=a.mod(dn)}return[n,a]}let ar=s;for(let en=1;en<l;en+=1)[n,a]=HenselLift(t,n,a,c,d,ar,s),ar=ar.multiply(s);return[n,a]}function productModQ(t,n){return console.assert(t.length>0),t.length>1?productModQ(t.slice(0,Math.ceil(t.length/2)),n).multiply(productModQ(t.slice(Math.ceil(t.length/2)),n)).mod(n):t[0]}function HenselLifting(t,n,a,s){if(n.length===1)return[t];const l=Math.ceil(n.length/2),u=n.slice(0,l),c=n.slice(l),[d,Ct]=HenselLiftingOfTwoFactors(t,productModQ(u,a),productModQ(c,a),a,s);return HenselLifting(d,u,a,s).concat(HenselLifting(Ct,c,a,s))}factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0=_gcdOfPolynomialsOverFiniteField0;function factorizeMultivariateIntegerPolynomial(t){function n(on){var fn=[];on=on.primitivePart();var dn=on.getDegree()>1?on.hasIntegerCoefficients()?factorizeOverTheIntegers(on).next().value:on.factorize():null;return dn!=null?(fn=fn.concat(n(dn)),fn=fn.concat(n(on.divideAndRemainder(dn,"throw").quotient))):fn.push(on),fn}for(var a=0,s=0;s<=t.getDegree();s+=1)t.getCoefficient(s).equals(Expression.ZERO)||(a=Math.max(a,t.getCoefficient(s).polynomial.getDegree()));for(var l=0;;l+=1){var u=t.map(on=>on.polynomial.calcAt(Expression.Integer.fromNumber(l)));if(u.getDegree()===t.getDegree()&&u.isSquareFreePolynomial()){var c=Array.from(n(u)).map(fn=>fn.map(dn=>new Expression.Polynomial(Polynomial$1.of(dn))));if(c.length<2)return null;var d=new Expression.Polynomial(Polynomial$1.of(u.getContent()));c[c.length-1]=c[c.length-1].scale(d);const on=new Expression.Polynomial(Polynomial$1.of(Expression.Integer.fromNumber(0-l),Expression.ONE));var Ct=on._pow(a+1);c=HenselLifting(t,c,on,a+1),console.assert(t.subtract(productModQ(c,Ct)).mod(Ct).toString()==="0");for(var ar=1;ar<=c.length-1;ar+=1)for(var en of combinations(c,ar)){var tn=productModQ(en,Ct);if(tn=tn.scale(t.getLeadingCoefficient()).mod(Ct),tn._hasIntegerLikeCoefficients()&&(tn=tn.primitivePart(),t.scale(t.getLeadingCoefficient()._pow(t.getDegree()-tn.getDegree()+1)).isDivisibleBy(tn)))return tn}}}}factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial=factorizeMultivariateIntegerPolynomial;factorizeOverTheIntegers.testables={gcdOfPolynomialsOverFiniteField,distinctDegreeFactorization,CantorZassenhausAlgorithm,isFactorizationOverZpSquareFree,factorizeOverTheFiniteField,modPow,randomBigInt,ExtendedEuclideanAlgorithm,HenselLift,QuadraticHenselLift,HenselLiftingOfTwoFactors,HenselLifting,productModQ};const isPrime$1=primeFactor._isPrime,freeze=t=>t;function PolynomialData(t){this.degrees=new Array(t),this.coefficients=new Array(t),this.size=0}PolynomialData.prototype.add=function(t,n){const a=this.size;if(!(Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError("NotSupportedError");if(a>0&&!(t<this.degrees[a-1])||a>=this.degrees.length||a>=this.coefficients.length)throw new RangeError;this.degrees[a]=t,this.coefficients[a]=n,this.size=a+1};PolynomialData.prototype.degree=function(t){return this.degrees[t]};PolynomialData.prototype.coefficient=function(t){return this.coefficients[t]};PolynomialData.prototype.trim=function(){return this.size<Math.max(this.degrees.length,this.coefficients.length)&&(this.degrees.length=this.size,this.coefficients.length=this.size),this};function Polynomial$1(t){this.a=t.trim()}Polynomial$1.of=function(){for(var t=new PolynomialData(arguments.length),n=arguments.length-1;n>=0;n-=1){var a=arguments[n];a.equals(Expression.ZERO)||t.add(n,a)}return new Polynomial$1(t)};Polynomial$1.from=function(t){for(var n=new PolynomialData(t.length),a=t.length-1;a>=0;a-=1){var s=a,l=t[a];l.equals(Expression.ZERO)||n.add(s,l)}return new Polynomial$1(n)};Polynomial$1.ZERO=Polynomial$1.of();Polynomial$1.prototype.getDegree=function(){return this.a.size===0?-1:this.a.degree(0)};Polynomial$1.prototype.getCoefficient=function(t){for(var n=0,a=this.a.size;n<a;){var s=n+Math.floor((a-n)/2),l=this.a.degree(s);if(l>t)n=s+1;else if(l<t)a=s;else return this.a.coefficient(s)}return Expression.ZERO};Polynomial$1.prototype.getLeadingCoefficient=function(){return this.a.size===0?Expression.ZERO:this.a.coefficient(0)};Polynomial$1.prototype.map=function(t){if(t.length!==1)throw new RangeError("deprecated");const n=new PolynomialData(this.a.size);for(let a=0;a<this.a.size;a+=1){const s=this.a.degree(a),l=this.a.coefficient(a),u=t(l);u.equals(Expression.ZERO)||n.add(s,u)}return new Polynomial$1(n)};Polynomial$1.prototype.equals=function(t){if(t===Expression.ZERO)return this.a.size===0;if(this.a.size!==t.a.size)return!1;for(var n=0,a=0;n<this.a.size&&a<t.a.size;){if(this.a.degree(n)!==t.a.degree(a)||!this.a.coefficient(n).equals(t.a.coefficient(a)))return!1;n+=1,a+=1}return!0};function _join(t,n,a){const s=new PolynomialData(t.a.size+n.a.size);let l=-1,u=-2,c=Expression.ZERO,d=-1,Ct=-2,ar=Expression.ZERO;for(;u!==-1||Ct!==-1;){const en=Math.max(u,Ct);if(en!==-2){const tn=a(u>=Ct?c:Expression.ZERO,Ct>=u?ar:Expression.ZERO);(u!==Ct||!tn.equals(Expression.ZERO))&&s.add(en,tn)}u===en&&(l+=1,l<t.a.size?(u=t.a.degree(l),c=t.a.coefficient(l)):(u=-1,c=Expression.ZERO)),Ct===en&&(d+=1,d<n.a.size?(Ct=n.a.degree(d),ar=n.a.coefficient(d)):(Ct=-1,ar=Expression.ZERO))}return new Polynomial$1(s)}Polynomial$1.prototype.add=function(t){return t.a.size===0?this:this.a.size===0?t:_join(this,t,function(n,a){return n===Expression.ZERO?a:a===Expression.ZERO?n:n.add(a)})};function split_at(t,n){var a=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n));return[a.quotient,a.remainder]}const KARATSUBA_THRESHOLD=12;function karatsuba(t,n){if(t.a.size<KARATSUBA_THRESHOLD||n.a.size<KARATSUBA_THRESHOLD)return t.multiply(n);const a=n.a.size>t.a.size?n.a.degree(Math.floor(n.a.size/2)):t.a.degree(Math.floor(t.a.size/2)),[s,l]=split_at(t,a),[u,c]=split_at(n,a),d=karatsuba(l,c),Ct=karatsuba(l.add(s),c.add(u)),ar=karatsuba(s,u);return ar.shift(a*2).add(Ct.subtract(ar).subtract(d).shift(a)).add(d)}function coefficientsBound(t,n=!1){function a(c,d){if(d.a.size<4)return c+1;const Ct=Math.floor(d.a.size/2);return c===0?Ct:c===Ct?Ct+1:c===Ct+1?d.a.size-1:c+1}let s=Expression.ZERO,l=Expression.ZERO;for(let c=0;c<t.a.size;c=n?a(c,t):c+1){const d=t.a.coefficient(c);d.compareTo(s)>0?s=d:d.compareTo(l)<0&&(l=d)}return(l.negate().compareTo(s)<0?s:l.negate()).bitLength()}let supportsLargeBigintCache;function supportsLargeBigint(){if(supportsLargeBigintCache==null)try{supportsLargeBigintCache=Expression.ONE.leftShift(2**20).compareTo(Expression.ZERO)>0}catch{supportsLargeBigintCache=!1}return supportsLargeBigintCache}function hasFastBigIntMultiplication(){return supportsLargeBigint()}function multiplyByKroneckerSubstitution(t,n){function a(tn,on){function fn(ax,ox,sx){const lx=sx-ox;if(lx>=2){const cx=Math.ceil(lx/2);return fn(ax,ox+cx,sx).leftShift(on*cx).add(fn(ax,ox,ox+cx))}else return lx===1?ax[ox]:Expression.ZERO}const dn=new Array(tn.getDegree()+1);for(let ax=0;ax<=tn.getDegree();ax+=1)dn[ax]=tn.getCoefficient(ax);const Cn=Expression.ONE.leftShift(on),Rn=Expression.ONE.negate();for(let ax=0;ax<dn.length;ax+=1)dn[ax].compareTo(Expression.ZERO)<0&&(dn[ax]=Cn.add(dn[ax]),dn[ax+1]=dn[ax+1].add(Rn));return fn(dn,0,dn.length)}function s(tn,on,fn){const dn=fn,Cn=new Array(dn);function Rn(lx,cx,fx){const gx=fx-cx;if(gx>=2){const mx=Math.ceil(gx/2),px=lx.leftShift(0-on*mx),hx=lx.asUintN(on*mx);Rn(hx,cx,cx+mx),Rn(px,cx+mx,fx)}else console.assert(gx===1),Cn[cx]=lx}Rn(tn,0,dn);const ax=Expression.ONE.leftShift(on),ox=ax.negate(),sx=ax.leftShift(-1);for(let lx=0;lx<Cn.length;lx+=1){let cx=Cn[lx];cx.compareTo(sx)>=0&&(Cn[lx]=cx.add(ox),Cn[lx+1]=Cn[lx+1].add(Expression.ONE))}return Polynomial$1.from(Cn)}const l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());l>1&&(t=t._exponentiateRoots(l),n=n._exponentiateRoots(l));let u=!1;if(t.getLeadingCoefficient().sign()<=0){if(t.getLeadingCoefficient().sign()===0)return t.multiply(n);t=t.negate(),u=!u}if(n.getLeadingCoefficient().sign()<=0){if(n.getLeadingCoefficient().sign()===0)return t.multiply(n);n=n.negate(),u=!u}const c=coefficientsBound(t),d=coefficientsBound(n),Ct=Math.ceil((Math.max(c,d)*2+Math.ceil(Math.log2(Math.min(t.getDegree()+1,n.getDegree()+1)))+1)/1)*1;let ar=Expression.ZERO;const en=(t.getDegree()+n.getDegree()+1)*Ct;return en>=2**30||en>=2**20&&!supportsLargeBigint()?ar=karatsuba(t,n):ar=s(a(t,Ct).multiply(a(n,Ct)),Ct,t.getDegree()+n.getDegree()+1),l>1&&(ar=ar._exponentiateRoots(1/l)),u&&(ar=ar.negate()),ar}function multiplyInternal(t,n,a){var s=t.getDegree()+n.getDegree()+1;if((t.a.size+n.a.size+Math.min(t.a.size,n.a.size))*4>=s){for(var l=new Array(s).fill(Expression.ZERO),u=0;u<t.a.size;u+=1)for(var c=t.a.degree(u),d=t.a.coefficient(u),Ct=0;Ct<n.a.size;Ct+=1){var ar=n.a.degree(Ct),en=n.a.coefficient(Ct),tn=c+ar,on=a?d.multiply(en):en.multiply(d);l[tn]=l[tn].add(on)}return Polynomial$1.from(l)}else{for(var l=new FastAdditionPolynomial,u=0;u<t.a.size;u+=1){var c=t.a.degree(u),d=t.a.coefficient(u);l.add(d,c,n,a)}return l.toPolynomial()}}globalThis.counter9=0;Polynomial$1.prototype.multiply=function(t){if(this.a.size===0||t.a.size===0)return Polynomial$1.ZERO;if(t.a.size===1&&t.a.coefficient(0)instanceof Expression.Integer)return this.shift(t.a.degree(0)).scale(t.a.coefficient(0));if(this.a.size>=16&&t.a.size>=16&&this.hasIntegerCoefficients()&&t.hasIntegerCoefficients()){var n=this,a=t,s=Math.gcd(n.getGCDOfTermDegrees(),a.getGCDOfTermDegrees()),l=Math.min(n.getDegree(),a.getDegree()),u=Math.min((n.a.size-1)/n.getDegree(),(a.a.size-1)/a.getDegree());const c=coefficientsBound(n,!0),d=coefficientsBound(a,!0);if(Math.max(c,d)>=32&&Math.max(c,d)<=256&&u>=.8&&l>=16||hasFastBigIntMultiplication()&&l*u>=64||hasFastBigIntMultiplication()&&l*u*Math.min(c,d)*Math.pow(u*s,2)>=64*1024)return globalThis.counter9+=1,multiplyByKroneckerSubstitution(n,a)}return t.a.size>=KARATSUBA_THRESHOLD&&this.a.size>=KARATSUBA_THRESHOLD?karatsuba(this,t):this.a.size<=t.a.size?multiplyInternal(this,t,!0):multiplyInternal(t,this,!1)};Polynomial$1.prototype.shift=function(t){if(!(t>=0))throw new TypeError;if(t===0)return this;for(var n=new PolynomialData(this.a.size),a=0;a<this.a.size;a+=1)n.add(this.a.degree(a)+t,this.a.coefficient(a));return new Polynomial$1(n)};function FastAdditionPolynomial(){this.maxHeap=new Heap((t,n)=>n.degree-t.degree),this.degree=-1,this.leadingCoefficient=Expression.ZERO}FastAdditionPolynomial.prototype.add=function(t,n,a,s){let l=0;var u={next:function(){if(l===a.a.size)return;const ar=a.a.degree(l),en=a.a.coefficient(l);return l+=1,freeze({degree:ar+n,coefficient:en===Expression.ONE?t:t===Expression.ONE?en:s?t.multiply(en):en.multiply(t),iterator:u})}},c=u.next();if(c.degree>this.degree&&this.degree!==-1)throw new RangeError;if(c.degree<this.degree)this.maxHeap.push(c);else{for(this.degree===-1?(this.leadingCoefficient=c.coefficient,this.degree=c.degree):this.leadingCoefficient=this.leadingCoefficient.add(c.coefficient),c=c.iterator.next(),c!=null&&this.maxHeap.push(c);this.maxHeap.size()>0&&(this.degree===this.maxHeap.peek().degree||this.leadingCoefficient.equals(Expression.ZERO));){var d=this.maxHeap.peek();this.leadingCoefficient=this.leadingCoefficient.add(d.coefficient),this.degree=d.degree;var Ct=d.iterator.next();Ct!=null?this.maxHeap.replace(Ct):this.maxHeap.pop()}this.maxHeap.size()===0&&this.leadingCoefficient.equals(Expression.ZERO)&&(this.degree=-1)}};FastAdditionPolynomial.prototype.getDegree=function(){return this.degree};FastAdditionPolynomial.prototype.getLeadingCoefficient=function(){return this.leadingCoefficient};FastAdditionPolynomial.prototype.toPolynomial=function(){for(var t=[],n=Polynomial$1.of(Expression.ONE);this.getDegree()>=0;){var a=this.getDegree(),s=this.getLeadingCoefficient();this.add(s.negate(),a,n,!0),t.push({degree:a,coefficient:s})}return Polynomial$1.fromTerms(t)};Polynomial$1.prototype.divideAndRemainder=function(t,n,a){if(n=n||void 0,t.equals(Polynomial$1.ZERO))throw new TypeError("ArithmeticException");if(this.getDegree()<t.getDegree())return{quotient:Polynomial$1.ZERO,remainder:this};if(t.a.size===1&&t.a.coefficient(0).equals(Expression.ONE)&&(n==null||this._hasIntegerLikeCoefficients())){if(t.a.degree(0)===0)return{quotient:this,remainder:Polynomial$1.ZERO};for(var s=t.a.degree(0),l=0;this.a.degree(l)>=s&&l<this.a.size;)l+=1;for(var u=new PolynomialData(l),c=0;c<l;c+=1)u.add(this.a.degree(c)-s,this.a.coefficient(c));for(var d=new PolynomialData(this.a.size-l),c=l;c<this.a.size;c+=1)d.add(this.a.degree(c),this.a.coefficient(c));return{quotient:new Polynomial$1(u),remainder:new Polynomial$1(d)}}const Ct=t.getLeadingCoefficient(),ar=Ct instanceof Expression.ExpressionWithPolynomialRoot?Ct.inverse():void 0;if(t.a.size===1&&t.a.degree(0)===0&&ar==null&&(n==null||n==="throw"))return{quotient:this.map(function(Rn){var ax=Rn.divide(Ct);if(n!=null&&ax instanceof Expression.Division)throw new RangeError;return ax}),remainder:Polynomial$1.ZERO};var en=[],tn=this.a.size/this.getDegree()<1/4&&a==null,on=this;tn&&(on=new FastAdditionPolynomial,on.add(Expression.ONE,0,this,!0));const fn=t.negate();for(;on.getDegree()>=t.getDegree();){var dn=on.getDegree()-t.getDegree(),Cn=on.getLeadingCoefficient(),u=ar==null?Cn.divide(Ct):Cn.multiply(ar);if(a!=null&&(u=a(u)),n!=null&&u instanceof Expression.Division){if(n==="throw")throw new TypeError(this.toString()+" "+t.toString());if(n==="undefined")return;throw new TypeError}if(en.push({degree:dn,coefficient:u}),tn?on.add(u,dn,fn,!0):u instanceof Expression.Integer?on=on.add(fn.shift(dn).scale(u)):on=on.add(Polynomial$1.of(u).shift(dn).multiply(fn)),a!=null)for(;on.getDegree()>=0&&a(on.getLeadingCoefficient()).equals(Expression.ZERO);)on=on.subtract(Polynomial$1.of(on.getLeadingCoefficient()).shift(on.getDegree()));if(on.getDegree()-t.getDegree()===dn){throw new TypeError("there is a some problem with the expression evaluation");//!
}}return tn&&(on=on.toPolynomial()),{quotient:Polynomial$1.fromTerms(en),remainder:on}};Polynomial$1.prototype.divideAndRemainderModP=function(t,n){const a=t.getLeadingCoefficient();if(!(a instanceof Expression.Polynomial)&&!a.equals(Expression.ONE)||a instanceof Expression.Polynomial&&a.polynomial.getDegree()!==0)throw new RangeError;const s=this.divideAndRemainder(t,"throw",l=>l.modulo(n));return{quotient:s.quotient,remainder:s.remainder.mod(n)}};Polynomial$1.pseudoRemainder=function(t,n){var a=t.getDegree()-n.getDegree();if(a<0)throw new RangeError;return t.scale(n.getLeadingCoefficient()._pow(a+1)).divideAndRemainder(n,"throw").remainder};Polynomial$1.polynomialGCD=function(t,n){let a=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(a>1)return Polynomial$1.polynomialGCD(t._exponentiateRoots(a),n._exponentiateRoots(a))._exponentiateRoots(1/a);//!optimization 2021-03-15
if(n.getDegree()>0&&t.getDegree()>0){var s=function(fn){for(var dn=0;fn.getCoefficient(dn).equals(Expression.ZERO);)dn+=1;return dn},l=s(n),u=s(t);if(l!==0||u!==0)return Polynomial$1.polynomialGCD(t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(u),void 0).quotient,n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(l),void 0).quotient).shift(Math.min(l,u))}//!
if(t.getDegree()<n.getDegree()){//!!!
var c=t;t=n,n=c}if(n.equals(Polynomial$1.ZERO))return t;//!
if(t.getDegree()===1&&n.getDegree()===0)return Polynomial$1.of(n.getCoefficient(0).gcd(t.getCoefficient(0)).gcd(t.getCoefficient(1)));//!
var d=t.getContent(),Ct=n.getContent(),ar=t.divideAndRemainder(Polynomial$1.of(d),"throw").quotient,en=n.divideAndRemainder(Polynomial$1.of(Ct),"throw").quotient,tn=gcdOfPrimitivePolynomials(ar,en),on=d.gcd(Ct);return Polynomial$1.of(on).multiply(tn)};function hasQuadraticInteger(t){return t instanceof Expression.NthRoot?!(t instanceof Expression.Integer):t instanceof Expression.ExponentiationOfMinusOne?!0:t instanceof Expression.BinaryOperation?hasQuadraticInteger(t.a)||hasQuadraticInteger(t.b):(t instanceof Expression.Integer||t instanceof Expression.Symbol||t instanceof Expression.Complex,!1)}var getY=function(t,n){for(var a={},s=0;s<t.a.size;s++){var l=t.a.coefficient(s),u=Expression.getVariable(l,{avoidNthRoots:!0});if(u!=null){if(u instanceof Expression.ExpressionWithPolynomialRoot){return null;//!?
}if(Expression.isConstant(u)&&u!==Expression.E&&u!==Expression.PI)return null;if(u instanceof Expression.Polynomial){return null;//!?
}u instanceof Expression.Symbol&&(a[u.symbol]?u=null:a[u.symbol]=!0);for(var c=0;c<t.a.size&&u!=null;c+=1)Expression._getReplacement(t.a.coefficient(c),u).equals(u)||(u=null);for(var c=0;c<n.a.size&&u!=null;c+=1)Expression._getReplacement(n.a.coefficient(c),u).equals(u)||(u=null);if(u!=null)return u}}return null};Polynomial$1._getY=getY;function gcdOfPrimitivePolynomials(t,n){return console.assert(t.getDegree()>=n.getDegree()),t.hasIntegerCoefficients()&&n.hasIntegerCoefficients()&&n.getDegree()>2?t.isDivisibleBy(n)?n:gcdByModularAlgorithm(t,n):n.getDegree()>1&&(getY(t,n)!=null||getY(n,t)!=null)?gcdByMultivariateModularAlgorithm(t,n):n.getDegree()>2?gcdUsingPseudoRemainderSequence(t,n,"subresultant").primitivePart():!t._testCoefficients(a=>hasQuadraticInteger(a))&&!n._testCoefficients(a=>hasQuadraticInteger(a))&&n.getDegree()>0?gcdUsingPseudoRemainderSequence(t,n,"primitive"):n.getDegree()===0?Polynomial$1.of(Expression.ONE):gcdUsingRemainderSequence(t,n).primitivePart()}function gcdUsingRemainderSequence(t,n){for(;!n.equals(Polynomial$1.ZERO);){const a=t.divideAndRemainder(n).remainder;t=n,n=a}return t}function gcdUsingPseudoRemainderSequence(t,n,a){let s=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(s>1)return gcdUsingPseudoRemainderSequence(t._exponentiateRoots(s),n._exponentiateRoots(s),a)._exponentiateRoots(1/s);for(var l of Polynomial$1._pseudoRemainderSequence(t,n,a)){var u=l.R;t=n,n=u}var c=t;return c}Polynomial$1._gcdUsingPseudoRemainderSequence=gcdUsingPseudoRemainderSequence;function ChineseRemainderTheorem(t,n){const a=t.remainder(n).modInverse(n);return function(s,l){return s.add(l.subtract(s.modulo(n)).multiply(a).modulo(n).multiply(t))}}globalThis.ChineseRemainderTheorem=ChineseRemainderTheorem;function ChineseRemainderTheoremForPolynomialCoefficients(t,n,a,s){const l=ChineseRemainderTheorem(a,s);return _join(t,n,(u,c)=>l(u,c))}globalThis.ChineseRemainderTheoremForPolynomialCoefficients=ChineseRemainderTheoremForPolynomialCoefficients;Polynomial$1.prototype._exponentiateRoots=function(t){if(t===-1){if(this.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;for(var n=new PolynomialData(this.a.size),a=this.a.size-1;a>=0;a-=1)n.add(this.getDegree()-this.a.degree(a),this.a.coefficient(a));var s=new Polynomial$1(n);if(s.getLeadingCoefficient()instanceof Expression.Integer&&s.getLeadingCoefficient().sign()<0){s=s.negate();//!!!
}return s}const l=Math.floor(1/t+.5);if(Math.floor(t)===t&&t>=2||1/l===t&&l>=2){for(var n=new PolynomialData(this.a.size),u=0;u<this.a.size;u+=1){if(Math.floor(t)===t&&this.a.degree(u)%t!==0)throw new RangeError;n.add(Math.floor(t)===t?this.a.degree(u)/t:this.a.degree(u)*l,this.a.coefficient(u))}return new Polynomial$1(n)}throw new RangeError(t)};Polynomial$1.prototype._scaleRoots=function(t){const n=t.getNumerator(),a=t.getDenominator(),s=this.getDegree();let l=Expression.ONE,u=0;const c=new PolynomialData(this.a.size);for(let d=0;d<this.a.size;d+=1){const Ct=this.a.degree(d),ar=this.a.coefficient(d);l=l.multiply(n._pow(s-Ct-u)),u=s-Ct,c.add(Ct,l.multiply(a._pow(Ct)).multiply(ar))}return new Polynomial$1(c)};Polynomial$1.prototype._translateRoots=function(t){if(t.equals(Expression.ONE.negate())){const a=this,s=a.getDegree(),l=new Array(s+1);for(let u=0;u<=s;u+=1)l[u]=a.getCoefficient(u);for(let u=0;u<=s-1;u+=1)for(let c=s-1;c>=u;c-=1)l[c]=l[c].add(l[c+1]);return Polynomial$1.from(l)}if(t.equals(Expression.ZERO))return this;var n=t.getNumerator()._pow(this.getDegree());return this._scaleRoots(t.negate().inverse())._translateRoots(Expression.ONE.negate())._scaleRoots(t.negate()).map(a=>a.divide(n))};Polynomial$1.prototype.mod=function(t){return this.map(n=>n.modulo(t))};Polynomial$1.prototype.mod2=function(t){return this.mod(t).map(n=>n.subtract(t).add(n).compareTo(Expression.ZERO)<0?n:n.subtract(t))};Polynomial$1.prototype._pow=function(t){var n=function(a,s,l){if(s<0)throw new RangeError;if(s>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return s<1?l:2*Math.floor(s/2)!==s?n(a,s-1,l.multiply(a)):n(a.multiply(a),Math.floor(s/2),l)};return n(this,t,Polynomial$1.of(Expression.ONE))};function gcdByModularAlgorithm(t,n){{const Ct=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(Ct>1)return console.debug("g > 1"),gcdByModularAlgorithm(t._exponentiateRoots(Ct),n._exponentiateRoots(Ct))._exponentiateRoots(1/Ct)}//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const a=t.getLeadingCoefficient().abs().gcd(n.getLeadingCoefficient().abs());if(t.getCoefficient(0).equals(Expression.ZERO)||n.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;if(a.compareTo(t.getCoefficient(0).abs().gcd(n.getCoefficient(0).abs()))>0)return gcdByModularAlgorithm(t._exponentiateRoots(-1),n._exponentiateRoots(-1))._exponentiateRoots(-1);console.assert(t.hasIntegerCoefficients()&&t.getContent().abs().equals(Expression.ONE)&&t.getDegree()>0),console.assert(n.hasIntegerCoefficients()&&n.getContent().abs().equals(Expression.ONE)&&n.getDegree()>0);let s=Math.min(t.getDegree(),n.getDegree());const l=function(){const Ct=a,ar=Math.min(t._log2OfBoundForCoefficientsOfFactor(s,Ct),n._log2OfBoundForCoefficientsOfFactor(s,Ct));return Expression.TWO._pow(1+Math.ceil(ar))};let u=l(),c=Expression.Integer.fromBigInt(Math.min(Math.max(u.toNumber(),1024),Math.floor(Math.sqrt((Number.MAX_SAFE_INTEGER+1)/(1+Math.min(t.getDegree(),n.getDegree())))))),d=0;for(;;){let Ct=null,ar=Expression.ZERO;for(;ar.compareTo(u)<0;){if(d+=1,d>50&&c._pow(d-50).compareTo(u)>=0)throw new TypeError("!!!");do c=c.subtract(Expression.ONE);while(!isPrime$1(c.toBigInt())||a.remainder(c).equals(Expression.ZERO));const en=factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0(t,n,c.toBigInt());console.assert(en.getLeadingCoefficient().equals(Expression.ONE));const tn=en.scale(a.remainder(c)).mod(c);if(tn.getDegree()<1)return Polynomial$1.of(Expression.ONE);if(tn.getDegree()>2/3*t.getDegree(),!(tn.getDegree()>s)){if(Ct!=null&&tn.getDegree()<Ct.getDegree()&&(Ct=null),Ct==null)Ct=tn.mod2(c),ar=c,s=tn.getDegree(),u=l();else if(tn.getDegree()===Ct.getDegree()){const on=Ct;if(Ct=ChineseRemainderTheoremForPolynomialCoefficients(Ct,tn,ar,c),ar=ar.multiply(c),Ct=Ct.mod2(ar),ar.compareTo(u)<0&&on.equals(Ct)){if(Ct=Ct.primitivePart(),t.isDivisibleBy(Ct)&&n.isDivisibleBy(Ct))return Ct;Ct=on}}}}if(Ct=Ct.primitivePart(),t.isDivisibleBy(Ct)&&n.isDivisibleBy(Ct))return Ct}}Polynomial$1._gcdByModularAlgorithm=gcdByModularAlgorithm;function gcdByMultivariateModularAlgorithm(t,n){{const ax=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(ax>1)return console.debug("g > 1"),gcdByMultivariateModularAlgorithm(t._exponentiateRoots(ax),n._exponentiateRoots(ax))._exponentiateRoots(1/ax)}if(!t.getContent().equals(Expression.ONE)||!n.getContent().equals(Expression.ONE))return Polynomial$1.polynomialGCD(t,n);const a=getY(t,n)||getY(n,t);if(a==null)return Polynomial$1.polynomialGCD(t,n);//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const s=Math.min(t.getDegree(),n.getDegree());t=t.map(ax=>new Expression.Polynomial(Polynomial$1.toPolynomial(ax,a))),n=n.map(ax=>new Expression.Polynomial(Polynomial$1.toPolynomial(ax,a)));const l=function(ax){const ox=new Expression.Polynomial(Polynomial$1.of(new Expression.Polynomial(Polynomial$1.of(Expression.ZERO,Expression.ONE))));return ax.map(sx=>new Expression.Polynomial(sx.polynomial.map(lx=>new Expression.Polynomial(Polynomial$1.of(lx))))).calcAt(ox).polynomial},u=l(t),c=l(n),d=u.getContent().gcd(c.getContent()).polynomial.primitivePart();if(!d.equals(Polynomial$1.of(Expression.ONE))){const ax=function(ox){return ox.map(sx=>new Expression.Polynomial(sx.polynomial.divideAndRemainder(d,d._hasIntegerLikeCoefficients()?"throw":void 0).quotient)).calcAt(new Expression.Polynomial(Polynomial$1.of(a))).polynomial};return gcdByMultivariateModularAlgorithm(ax(u),ax(c)).multiply(d)}if(console.assert(d.equals(Polynomial$1.of(Expression.ONE))),u.getDegree()===0||c.getDegree()===0)return Polynomial$1.of(Expression.ONE);const Ct=Polynomial$1.polynomialGCD(u.getLeadingCoefficient().polynomial,c.getLeadingCoefficient().polynomial),ar=function(){NewtonInterpolation.setField(Expression._FIELD);const ax=NewtonInterpolation();return ax.next(),ax},en=t._hasIntegerLikeCoefficients()&&n._hasIntegerLikeCoefficients();let tn=Expression.ZERO,on=0,fn=null,dn=1/0,Cn=null;for(;;){do tn=Expression.Integer.fromNumber(tn.toNumber()+1),tn.toNumber()-s>2&&console.error("!",tn.toNumber()-s);while(Ct.calcAt(tn).equals(Expression.ZERO));var Rn=Polynomial$1.polynomialGCD(t.calcAt(tn).polynomial,n.calcAt(tn).polynomial);if(Rn.getDegree()===0)return Polynomial$1.of(Expression.ONE);if(Rn.getDegree()>dn)continue;const ax=Ct.calcAt(tn);if(Rn=Rn.scale(ax).scale(Rn.getLeadingCoefficient().inverse()),en&&!Rn._hasIntegerLikeCoefficients())continue;(on===s+1||Rn.getDegree()<dn)&&(on=0,Cn=ar());const ox=fn;if(fn=Polynomial$1.from(Cn.next([tn.toNumber(),new Expression.Polynomial(Rn)]).value),on+=1,dn=Rn.getDegree(),en&&fn!=null&&!fn._hasIntegerLikeCoefficients())debugger;if(ox!=null&&ox.equals(fn)||on===s+1)if(!en||fn._hasIntegerLikeCoefficients()){if(fn=l(l(fn).primitivePart()),(!en||fn.getContent().equals(Expression.ONE))&&t.isDivisibleBy(fn)&&n.isDivisibleBy(fn))return fn=fn.map(sx=>sx.polynomial.calcAt(a)),fn.getLeadingCoefficient().isNegative()&&(fn=fn.negate()),en||(fn=fn.primitivePart()),fn;fn=ox}else debugger}}Polynomial$1._gcdByMultivariateModularAlgorithm=gcdByMultivariateModularAlgorithm;Polynomial$1.prototype.calcAt=function(t){//!!!
if(t instanceof Expression.Division&&t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer&&this.hasIntegerCoefficients()){var c=this.getDegree(),n=this._scaleRoots(t.getDenominator());return n.calcAt(t.getNumerator()).divide(t.getDenominator()._pow(c))}if((t instanceof Expression.Symbol||t instanceof Expression.NthRoot)&&this.hasIntegerCoefficients()){for(var a=Expression.ZERO,s=0;s<this.a.size;s+=1){var l=this.a.degree(s),u=this.a.coefficient(s);a=a.add(u.multiply(t._pow(l)))}return a}for(var c=Expression.ZERO,d=-1,s=0;s<this.a.size;s+=1){var l=this.a.degree(s),u=this.a.coefficient(s);c.equals(Expression.ZERO)?c=u:c=Expression.pow(t,d-l).multiply(c).add(u),d=l}return c.equals(Expression.ZERO)||(c=Expression.pow(t,d-0).multiply(c)),c};Polynomial$1.prototype.getContent=function(){if(this.a.size===0)return Expression.ONE;for(var t=Expression.ONE,n=Expression.ZERO,a=0;a<this.a.size;a+=1){const c=a%2===0?a/2:this.a.size-(a+1)/2;var s=this.a.coefficient(c);t=t.lcm(s.getDenominator()),n=n.gcd(s.getNumerator())}var l=n.divide(t),u=this.a.coefficient(0);return u.isNegative()&&!n.isNegative()||n.isNegative()&&!u.isNegative()?l.negate():l};Polynomial$1.prototype.negate=function(){return this.map(t=>t.negate())};Polynomial$1.prototype.subtract=function(t){return this.add(t.negate())};Polynomial$1.prototype.scale=function(t){if(t.equals(Expression.ONE))return this;if(Expression.has(t,Expression.Matrix)||Expression.has(t,Expression.MatrixSymbol))throw new TypeError;return this.map(n=>n.multiply(t))};Polynomial$1.fromTerms=function(t){for(var n=new PolynomialData(t.length),a=0;a<t.length;a+=1){var s=t[a];n.add(s.degree,s.coefficient)}return new Polynomial$1(n)};Polynomial$1.toPolynomial=function(t,n){if(t instanceof Expression.Division)throw new RangeError;var a=Expression.getCoefficients(t,n);return Polynomial$1.fromTerms(a)};Polynomial$1.prototype.toExpression=function(t){for(var n=void 0,a=0;a<this.a.size;a+=1){var s=this.a.degree(a),l=this.a.coefficient(a),u=s===0?void 0:s===1?t:new Expression.Exponentiation(t,Expression.Integer.fromNumber(s)),c=u==null?l:l.equals(Expression.ONE)?u:new Expression.Multiplication(l,u);n=n==null?c:new Expression.Addition(n,c)}return n??Expression.ZERO};Polynomial$1.prototype.doRationalRootTest=function(){var t=this;if(t.getCoefficient(0).equals(Expression.ZERO)){return Expression.ZERO;//!TODO: test
}var n=t.getLeadingCoefficient(),a=t.getCoefficient(0);a=Expression._expandTrigonometry(a);//!
if(t.getDegree()===1)return a.negate().divide(n);var s=t.hasIntegerCoefficients(),l=null,u=null;if(s){if(l=t.calcAt(Expression.ONE),l.equals(Expression.ZERO))return Expression.ONE;if(u=t.calcAt(Expression.ONE.negate()),u.equals(Expression.ZERO))return Expression.ONE.negate()}var c=function(on,fn){return!(l!=null&&(fn.subtract(on).equals(Expression.ZERO)||!l.remainder(fn.subtract(on)).equals(Expression.ZERO))||u!=null&&(fn.add(on).equals(Expression.ZERO)||!u.remainder(fn.add(on)).equals(Expression.ZERO)))};//!new 2020-01-13
if(s&&n.abs().bitLength()+a.abs().bitLength()>8){const on=function(dn,Cn){Cn.compareTo(Expression.ZERO)<0&&(Cn=Cn.negate(),dn=dn.negate());var Rn=Cn.truncatingDivide(Expression.TWO);return dn.compareTo(Expression.ONE)<0&&(Rn=Rn.negate()),dn.add(Rn).truncatingDivide(Cn)},fn=function(dn,Cn){const Rn=dn instanceof Expression.ExpressionPolynomialRoot?dn.root._root.toDecimal(Cn.abs().bitLength()):dn.toDecimal(Cn.abs().bitLength()),ax=Rn.a.add(Rn.b).divide(Expression.TWO);return on(Cn.multiply(ax.getNumerator()),ax.getDenominator())};for(var d=t.getZeros(),Ct=0;Ct<d.length;Ct+=1){var ar=d[Ct];if(Ct===0||ar!==d[Ct-1]){var en=ar.root!=null?fn(ar,n).divide(n):ar.getNumerator()instanceof Expression.Integer&&ar.getDenominator()instanceof Expression.Integer?ar:Expression.ZERO;if(c(en.getNumerator(),en.getDenominator())&&t.calcAt(en).equals(Expression.ZERO))return en}}return null}var tn=null;return Expression.everyDivisor(a,function(on){return Expression.everyDivisor(n,function(fn){for(var dn=-3;(dn+=2)<3;){var Cn=dn===-1?on.negate():on;if(c(Cn,fn)){var Rn=Polynomial$1.of(Cn.negate(),fn),ax=t.divideAndRemainder(Rn,"undefined"),ox=ax?.remainder.map(function(sx){return sx.simplifyExpression()});if(ox!=null&&ox.equals(Polynomial$1.ZERO))return tn=Cn.divide(fn),!1}}return!0})}),tn};Polynomial$1.prototype._testCoefficients=function(t){for(var n=0;n<this.a.size;n+=1)if(!t(this.a.coefficient(n)))return!1;return!0};Polynomial$1.prototype.hasIntegerCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Integer)};Polynomial$1.prototype.hasComplexCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Complex||t instanceof Expression.Integer)};const isIntegerLike=function(t){return t instanceof Expression.Integer?!0:t instanceof Expression.Symbol?t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?!1:(t instanceof Expression.PolynomialRootSymbol,!0):t instanceof Expression.Addition||t instanceof Expression.Multiplication?isIntegerLike(t.a)&&isIntegerLike(t.b):t instanceof Expression.Exponentiation?isIntegerLike(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.TWO)>=0:t instanceof Expression.Polynomial?t.polynomial._hasIntegerLikeCoefficients():!1};Polynomial$1._isIntegerLike=isIntegerLike;Polynomial$1.prototype._hasIntegerLikeCoefficients=function(){return this._testCoefficients(t=>Polynomial$1._isIntegerLike(t))};Polynomial$1.prototype._canBeFactored=function(t){if(!this.hasIntegerCoefficients()||this.getCoefficient(0).equals(Expression.ZERO))return!0;var n=this.getContent();if(!n.equals(Expression.ONE)&&!n.equals(Expression.ONE.negate()))return this.scale(n.inverse())._canBeFactored();var a=this.subtract(Polynomial$1.of(this.getLeadingCoefficient()).shift(this.getDegree())).getContent(),s=null;do s=a.gcd(this.getLeadingCoefficient()),a=a.truncatingDivide(s);while(!s.equals(Expression.ONE));var s=null;for(a=a.abs();!a.equals(Expression.ONE);){var l=a.primeFactor();if(!this.getCoefficient(0).remainder(l._pow(2)).equals(Expression.ZERO))return!1;a=a.truncatingDivide(l)}return!(t==null&&!this._translateRoots(Expression.Integer.fromNumber(3).negate())._canBeFactored(1))};Polynomial$1.prototype.isEven=function(){return this.getGCDOfTermDegrees()%2===0};var counter=0;Polynomial$1.prototype.getGCDOfTermDegrees=function(){if(this.equals(Polynomial$1.ZERO))return 0;for(var t=this.getDegree(),n=1;n<=this.getDegree()&&t>=2;n+=1)this.getCoefficient(n).equals(Expression.ZERO)||(t=Math.gcd(t,n));return t};Polynomial$1.prototype.getroots=function(t){t=t||void 0;var n=this,a=[];//!new 2018-12-24
for(var s=Expression.ONE,l=Expression.ZERO;l!=null;){var l=Expression.getConjugate(n.getLeadingCoefficient());l!=null&&(n=n.scale(l),s=s.multiply(l))}//!
//!new 2020-07-11
n=n.map(function(GE){return GE.simplifyExpression()});//!
var u=n.getContent();for(u.equals(Expression.ONE)||(n=n.scale(u.getDenominator()).divideAndRemainder(Polynomial$1.of(u.getNumerator()),"throw").quotient),s.equals(Expression.ONE)||(u=u.divide(s));n.getCoefficient(0).equals(Expression.ZERO);)n=n.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient,a.push(Expression.ZERO);if((!u.equals(Expression.ONE)&&!u.equals(Expression.ONE.negate())||a.length>0)&&(a.length>0&&typeof hit=="function"&&hit({getroots:{special:"0"}}),t?.({content:u,roots:a,newPolynomial:n,type:"factorOutTheGreatestCommonFactor"})),n.getDegree()===1)return a.push(n.getCoefficient(0).negate().divide(n.getCoefficient(1))),n=Polynomial$1.of(n.getLeadingCoefficient()),typeof hit=="function"&&hit({getroots:{linear:""}}),t?.({content:u,roots:a,newPolynomial:n,type:"solveLinearEquation"}),a;var c=function(GE,RE){if(!(RE instanceof Expression.ExpressionWithPolynomialRoot)){if(RE instanceof Expression.ExpressionPolynomialRoot)return RE._nthRoot(GE);if(RE instanceof Expression.Division){var zE=c(GE,RE.a),ES=c(GE,RE.b);return zE==null||ES==null?void 0:zE.divide(ES)}if(RE instanceof Expression.Exponentiation){var gS=Expression.Integer.fromNumber(GE);if(RE.b instanceof Expression.Integer&&RE.b.remainder(gS).equals(Expression.ZERO)||RE.a instanceof Expression.Integer||RE.a===Expression.E||RE.b instanceof Expression.Division&&RE.b.a instanceof Expression.Integer&&RE.b.a.remainder(gS).equals(Expression.ZERO))return RE.a.pow(RE.b.divide(gS))}if(RE instanceof Expression.Multiplication){var oS=c(GE,RE.a),rS=c(GE,RE.b);return oS==null||rS==null?void 0:oS.multiply(rS)}if(RE instanceof Expression.Complex||Expression.isConstant(RE)&&Expression.has(RE,Expression.Complex)){var iS=Expression.getComplexNumberParts(RE),ZS=iS.real,yS=iS.imaginary;if(GE===2){var GS=ZS.multiply(ZS).add(yS.multiply(yS)).squareRoot(),BS=c(2,ZS.add(GS).divide(Expression.TWO));if(BS!=null){var mT=yS.divide(Expression.TWO.multiply(BS)),wS=BS.add(mT.multiply(Expression.I));return wS}}if(ZS.equals(Expression.ZERO)&&GE%2===0){var iS=c(Math.floor(GE/2),RE);if(iS!=null)return c(2,iS)}if(ZS.equals(Expression.ZERO)&&GE%2===1){var iS=c(GE,yS);if(iS!=null)return iS.multiply(GE%4===1?Expression.I:Expression.I.negate())}//!new 2020-07-24
if(RE instanceof Expression.Complex&&!yS.equals(Expression.ZERO)){var sT=ZS._pow(2).add(yS._pow(2)).squareRoot();try{var nM=Expression.TWO.multiply(yS.divide(sT.add(ZS)).arctan());return sT._nthRoot(GE).multiply(Expression.I.multiply(nM.divide(Expression.Integer.fromNumber(GE))).exp())}catch(uC){console.debug(uC)}}}if(RE instanceof Expression.Addition){for(var JS=void 0,YS=0,wS=Expression.ONE,vT=Expression.ONE,AT=RE;!AT.equals(Expression.ONE)&&!AT.equals(Expression.ONE.negate());){var uA=Expression.simpleDivisor(AT);YS===0?(JS=uA,YS+=1):uA.equals(JS)?(YS+=1,YS===GE&&(YS=0,wS=wS.multiply(JS))):YS!==0&&(vT=vT.multiply(Expression.pow(JS,YS)),JS=uA,YS=1),AT=AT.divide(uA)}if(wS!==Expression.ONE){YS!==0&&(vT=vT.multiply(Expression.pow(JS,YS))),AT.equals(Expression.ONE.negate())&&(vT=vT.multiply(AT));var HS=c(GE,vT);if(HS!=null)return wS.multiply(HS)}}if(RE instanceof Expression.Exponentiation&&RE.a instanceof Expression.Symbol){var mT=RE.b.divide(Expression.Integer.fromNumber(GE));return mT.equals(Expression.ONE)?RE.a:new Expression.Exponentiation(RE.a,mT)}if(!Expression.isConstant(RE)&&RE.isNegative()&&(GE===2||GE%2!==0)){RE=RE.negate();var iS=c(GE,RE);return iS==null?null:Expression.ONE.negate()._nthRoot(GE).multiply(iS)}if((RE instanceof Expression.Integer||RE instanceof Expression.Complex)&&RE.isNegative()&&GE%2===0){var iS=RE instanceof Expression.Integer?RE._nthRoot(2):c(2,RE);return iS==null?null:c(GE/2,iS)}if(Expression.has(RE,Expression.Sin)||Expression.has(RE,Expression.Cos)){var cA=c(2,Expression._replaceSinCos(RE));if(cA!=null)return Expression._replaceBySinCos(cA).simplifyExpression()}var lC=void 0;try{lC=RE._nthRoot(GE)}catch(uC){console.error(uC)}if(lC==null){var BS=RE,CA=Expression.getConjugateExpression(BS.getNumerator());if((GE===3||GE===2)&&CA instanceof Expression.Integer){if(GE===2&&Expression._isPositive(RE.negate()))return Expression.I.multiply(c(2,RE.negate()));var BS=RE,cA=new Expression.Symbol("x")._pow(GE).subtract(BS).getNumerator(),iM=Polynomial$1.toPolynomial(Expression.getConjugateExpression(cA),new Expression.Symbol("x")),MA=iM.getZeros();for(const cC of MA)if(cC._pow(GE).equals(RE))return cC;return null}}return lC}},d=function(GE,RE,zE){if(GE===1)return RE;var ES=c(GE,RE);return ES==null&&(RE instanceof Expression.Integer||typeof hit=="function"&&hit({nthRoot:(GE===2?"squareRoot":GE+"-root")+":"+RE.toString()+":"+zE.toString()})),ES},Ct=function(GE,RE,zE){for(var ES=RE.getroots(t!=null?function(oS){var rS=Object.assign({},oS,{content:u.multiply(oS.content),roots:GE.concat(oS.roots),newPolynomialVariable:zE});t(rS)}:void 0),gS=0;gS<ES.length;gS+=1)GE.push(ES[gS])};if(n.getDegree()>=2){var ar=n.getGCDOfTermDegrees();if(ar>=2){var en=ar===n.getDegree();typeof hit=="function"&&(ar===n.getDegree()?hit({getroots:{allZeros:""}}):hit({getroots:ar%2===0?n.getDegree()===4?{biquadratic:""}:{even:""}:{xyz:n.toString()}}));for(var tn=new Array(Math.floor((n.getDegree()+ar)/ar)),on=0,fn=0;fn<=n.getDegree();fn+=ar)tn[on]=n.getCoefficient(fn),on+=1;var dn=Polynomial$1.from(tn),Cn=[];en?Cn=dn.getroots():(t?.({content:u,roots:a,newPolynomial:dn,type:"t = x^g",g:ar,newPolynomialVariable:new Expression.Symbol("t")}),Ct(Cn,dn,new Expression.Symbol("t")));for(var Rn=n.getDegree(),on=0;on<Cn.length;on+=1){var ax=Cn[on],ox=d(ar,ax,n);if(ox!=null){var sx=null;if((!en||ar>=5||!n.hasIntegerCoefficients())&&(ar<=24&&(17896830>>ar)%2===1||ar===48)){sx=Polynomial$1.of(Expression.ONE).shift(ar).add(Polynomial$1.of(ax.negate()));for(var lx=Expression.E.pow(Expression.I.multiply(Expression.TWO.multiply(Expression.PI)).divide(Expression.Integer.fromNumber(ar))),cx=Expression.ONE,fn=0;fn<ar;fn+=1){var fx=cx.multiply(ox);cx=cx.multiply(lx),a.push(fx)}}else a.push(ox),sx=Polynomial$1.of(ox.negate(),Expression.ONE),ar%2===0&&(a.push(ox.negate()),sx=Polynomial$1.of(ox.multiply(ox).negate(),Expression.ZERO,Expression.ONE));var gx=n.divideAndRemainder(sx).quotient;console.assert(n.subtract(gx.multiply(sx)).map(RE=>RE.simplifyExpression()).getDegree()<0),n=gx}}if(!en)t?.({content:u,roots:a,newPolynomial:n,type:"x = t^(1/g)",g:ar});else{var mx=ar===2?"applyDifferenceOfSquaresRule":ar===3?"applyDifferenceOfCubesRule":"applyDifferenceOfNthPowersRule";t?.({content:u,roots:a,newPolynomial:n,type:mx,g:ar})}var px=!0;return Rn!==n.getDegree()&&px&&n.getDegree()>0&&Ct(a,n),a}}//! new: solution of quadratic equations
if(n.getDegree()===2){var hx=n.getCoefficient(2),vx=n.getCoefficient(1),lx=n.getCoefficient(0),yx=vx.multiply(vx).subtract(Expression.TWO.multiply(Expression.TWO).multiply(hx).multiply(lx));yx=yx.simplifyExpression();var Sx=d(2,yx,n);if(typeof hit=="function"&&hit({getroots:{quadratic:Sx==null?yx instanceof Expression.Integer?yx.compareTo(Expression.ZERO):"?"+yx.toString():"OK"}}),Sx!=null){if(Sx.equals(Expression.ZERO)){var _x=vx.negate().divide(Expression.TWO.multiply(hx));a.push(_x),a.push(_x)}else{var Ex=vx.negate().subtract(Sx).divide(Expression.TWO.multiply(hx)),bx=vx.negate().add(Sx).divide(Expression.TWO.multiply(hx));a.push(Ex),a.push(bx)}return n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveQuadraticEquation"}),a}}if(n.getDegree()>=4&&n.getDegree()%2===0){for(var Ax=Math.floor(n.getDegree()/2),Mx=1;Mx<Ax+1&&n.getCoefficient(Ax+Mx).equals(Expression.ZERO)&&n.getCoefficient(Ax-Mx).equals(Expression.ZERO);)Mx+=1;if(Mx<Ax+1&&!n.getCoefficient(Ax+Mx).equals(Expression.ZERO)&&!n.getCoefficient(Ax-Mx).equals(Expression.ZERO)){for(var Rx=Expression.Integer.fromNumber(Mx),Cx=n.getCoefficient(Ax+Mx).divide(n.getCoefficient(Ax-Mx)),Lx=!0,fn=2;fn<Ax+1&&Lx;fn+=1)Lx=Lx&&n.getCoefficient(Ax+fn).pow(Rx).subtract(n.getCoefficient(Ax-fn).pow(Rx).multiply(Cx.pow(Expression.Integer.fromNumber(fn)))).equals(Expression.ZERO);if(Lx&&typeof hit=="function"&&hit({getroots:{quasiPalindromic:n.getDegree()}}),Lx&&n.getDegree()<=Math.log2(Number.MAX_SAFE_INTEGER+1)){for(var qx=function(GE,RE){var zE=function(oS,rS){return rS===0?1:Math.floor(oS*zE(oS-1,rS-1)/rS)},ES=function(oS,rS,iS){return oS-2*rS>=0?ES(oS-2*rS,1,GE).scale(Expression.Integer.fromNumber(zE(oS,rS)).multiply(iS).negate()).add(ES(oS,rS+1,iS.multiply(GE))):Polynomial$1.of(Expression.ONE).shift(oS)},gS=function(oS,rS){return rS<=oS?ES(oS-rS,1,GE).scale(RE.getCoefficient(rS)).add(gS(oS,rS+1)):Polynomial$1.ZERO};return gS(Math.floor(RE.getDegree()/2),0)},Ix=Mx===1?Cx:d(Mx,Cx,n),Px=qx(Ix,n),Nx=Px.getroots(),fn=0;fn<Nx.length;fn+=1){for(var Bx=Nx[fn],$x=Polynomial$1.of(Expression.ONE,Bx.negate(),Ix),Vx=$x.getroots(),Mx=0;Mx<Vx.length;Mx+=1){var fx=Vx[Mx];a.push(fx)}n=n.divideAndRemainder($x.scale($x.getLeadingCoefficient().inverse())).quotient}return t?.({content:u,roots:a,newPolynomial:n,type:"solvePalindromicEquaion"}),a}}}if(n.getDegree()>=2){var Rn=n.getDegree(),Gx=function(RE){for(var zE=0;zE<=RE.getDegree();zE+=1)if(RE.getCoefficient(zE).equals(Expression.ZERO))return!0;return!1};if(!Gx(n)){for(var ar=n.getCoefficient(Rn-1).divide(n.getCoefficient(Rn)).divide(Expression.Integer.fromNumber(Rn)),px=!0,on=n.getDegree()-1;on>=1&&px;on-=1)px=ar.equals(n.getCoefficient(on-1).divide(n.getCoefficient(on)).multiply(Expression.Integer.fromNumber(Rn-on+1)).divide(Expression.Integer.fromNumber(on)));if(px){for(var fx=ar.negate(),on=0;on<Rn;on+=1)a.push(fx);return n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"(ax+b)**n"}),a}}}if(n.getDegree()>=2){var fx=n.doRationalRootTest();if(fx!=null)return n=n.divideAndRemainder(Polynomial$1.of(fx.negate(),Expression.ONE)).quotient,a.push(fx),typeof hit=="function"&&hit({getroots:{rational:""}}),t?.({content:u,roots:a,newPolynomial:n,type:"useTheRationalRootTest"}),n.getDegree()>0&&Ct(a,n),a}if(!n.hasIntegerCoefficients()&&n.getDegree()===3){var Zx=n._getShiftToDepressed();if(!Zx.equals(Expression.ZERO)){var jx=n._translateRoots(Zx);if(jx.hasIntegerCoefficients()){var Hx=jx.getroots();if(Hx.length===0){Hx=jx.getZeros();debugger}if(Hx.length===n.getDegree()){for(const GE of Hx)a.push(GE.subtract(Zx));return n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else debugger}}}if(n.hasIntegerCoefficients()){var Rn=n.getDegree(),hx=n.getLeadingCoefficient(),vx=n.getCoefficient(Rn-1);if(!vx.equals(Expression.ZERO)){var Zx=vx.divide(Expression.Integer.fromNumber(Rn).multiply(hx)),iE=n._translateRoots(Zx),Xx=[];if(t!=null){var rE=t;t=function(gS){rE({content:u.multiply(iE.getLeadingCoefficient().divide(n.getLeadingCoefficient()).inverse()),roots:a,newPolynomial:iE,type:"eliminationOfTheSubDominantTerm",b:vx,n:Rn,a:hx,newPolynomialVariable:new Expression.Symbol("t")}),rE(gS),t=rE}}if(Ct(Xx,iE,new Expression.Symbol("t")),Xx.length>0){for(const gS of Xx)a.push(gS.subtract(Zx));Xx.length===iE.getDegree()?n=Polynomial$1.of(n.getLeadingCoefficient()):console.warn("TODO:")}return a}}if(n.getDegree()===3){var hx=n.getCoefficient(3),vx=n.getCoefficient(2),lx=n.getCoefficient(1),sx=n.getCoefficient(0),uE=Expression.Integer.fromNumber(3),Zx=vx.divide(uE.multiply(hx)),qx=function(yS){return yS.subtract(Zx)},aE=n._translateRoots(Zx),iE=aE.scale(aE.getLeadingCoefficient().inverse()),jx=iE.getCoefficient(1),dn=iE.getCoefficient(0),Kx=jx.divide(uE)._pow(3).add(dn.divide(Expression.TWO)._pow(2));typeof hit=="function"&&hit({getroots:{cubic:(Kx instanceof Expression.Integer?Kx.compareTo(Expression.ZERO):"?")+"-"+(jx instanceof Expression.Integer?jx.compareTo(Expression.ZERO):"?")}});var ME=Expression.ONE.negate().divide(Expression.TWO),IE=Expression.I.multiply(uE.squareRoot()).divide(Expression.TWO),wE=ME.subtract(IE),bE=ME.add(IE);if(dn.equals(Expression.ZERO)&&jx.equals(Expression.ZERO)){var fx=qx(Expression.ZERO);return a.push(fx),a.push(fx),a.push(fx),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(dn.equals(Expression.ZERO)){a.push(qx(Expression.ZERO));var aE=d(2,jx.negate(),n);return a.push(qx(aE)),a.push(qx(aE.negate())),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(jx.equals(Expression.ZERO)){var aE=d(3,dn.negate(),n);return a.push(qx(aE)),a.push(qx(aE.multiply(wE))),a.push(qx(aE.multiply(bE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Kx.equals(Expression.ZERO)){var UE=uE.multiply(dn).divide(Expression.TWO.multiply(jx)).negate(),CE=qx(UE);a.push(CE),a.push(CE);var YE=UE.multiply(Expression.TWO).negate(),Ox=qx(YE);return a.push(Ox),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else{var aE=d(2,Kx,n);if(aE!=null){var Fx=d(3,dn.negate().divide(Expression.TWO).add(aE),n);if(Fx!=null&&!(Fx instanceof Expression.ExpressionPolynomialRoot)&&!(Fx instanceof Expression.ExpressionWithPolynomialRoot)){var Wx=function(GS){return qx(GS.subtract(jx.divide(uE.multiply(GS))))};return a.push(Wx(Fx)),a.push(Wx(Fx.multiply(wE))),a.push(Wx(Fx.multiply(bE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t?.({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}}}}//!2018-12-23
if(n.getDegree()>2){var aE=n.squareFreeFactors(),Qx=aE.a0,oE=aE.a1;if(Qx.getDegree()>0){for(var tE=Qx,mE=Qx.getroots(function(RE){tE=RE.newPolynomial}),hE=null,fn=0;fn<mE.length;fn+=1){var fx=mE[fn];a.push(fx),(hE==null||!hE.equals(fx))&&a.push(fx),hE=fx}for(var SE=oE,_E=oE.getroots(function(RE){SE=RE.newPolynomial}),fn=0;fn<_E.length;fn+=1)a.push(_E[fn]);if(tE!=null&&(n=SE.multiply(tE).multiply(Polynomial$1.polynomialGCD(tE,n))),mE.length>0||_E.length>0)return typeof hit=="function"&&hit({getroots:{squareFreeFactorization:n.toString()}}),t?.({content:u,roots:a,newPolynomial:n,type:"squareFreeFactorization"}),a}}//!
if(n.getDegree()>=4){var ar=n.factorize();if(ar!=null){for(var Zx=n.divideAndRemainder(ar).quotient,PE=null,NE=ar.getroots(function(zE){PE=zE.newPolynomial.scale(zE.content)}),fn=0;fn<NE.length;fn+=1)a.push(NE[fn]);NE.length>0&&(n=n.divideAndRemainder(ar.divideAndRemainder(PE).quotient).quotient);for(var lE=null,gE=Zx.getroots(function(zE){lE=zE.newPolynomial.scale(zE.content)}),fn=0;fn<gE.length;fn+=1)a.push(gE[fn]);return gE.length>0&&(n=n.divideAndRemainder(Zx.divideAndRemainder(lE).quotient).quotient),(gE.length>0||NE.length>0)&&(typeof hit=="function"&&hit({getroots:{methodOfKronecker:n.toString()}}),t?.({content:u,roots:a,newPolynomial:n,type:"methodOfKronecker"})),a}}if(n.getDegree()>=3){for(var fn=0;fn<=n.getDegree();fn+=1)if(Expression.has(n.getCoefficient(fn),Expression.SquareRoot)){var lx=null;if(Expression._map(function(zE){return lx==null&&zE instanceof Expression.SquareRoot&&zE.a instanceof Expression.Integer&&(lx=zE),zE},n.getCoefficient(fn)),lx!=null){var aE=new Expression.Symbol("_t"),jx=n.map(function(rS){var iS=Expression.ZERO;for(var ZS of rS.summands()){var yS=Expression.ONE;for(var GS of ZS.factors())if(GS.equals(lx))yS=yS.multiply(aE);else if(GS instanceof Expression.Integer){for(var BS=0;GS.gcd(lx.a).equals(lx.a);)BS+=2,GS=GS.divide(lx.a);yS=yS.multiply(GS.multiply(aE._pow(BS)))}else yS=yS.multiply(GS);iS=iS.add(yS)}return iS}),hx="_x"+ ++counter,AE=Polynomial$1.toPolynomial(jx.calcAt(new Expression.Symbol(hx)),aE);//!2020-12-11
var ar=AE.getGCDOfTermDegrees();if(ar>=2){for(var tn=new Array(Math.floor((AE.getDegree()+ar)/ar)),on=0,yE=0;yE<=AE.getDegree();yE+=ar)tn[on]=AE.getCoefficient(yE).multiply(lx._pow(yE-on)),on+=1;AE=Polynomial$1.from(tn)}//!
if(AE.getDegree()>1){for(var DE=[],OE=null;(OE=AE.doRationalRootTest())!=null;)DE.push(OE),AE=AE.divideAndRemainder(Polynomial$1.of(OE.negate(),Expression.ONE),"throw").quotient;for(var kx=a.length,Mx=0;Mx<DE.length;Mx+=1)for(var Ux=Polynomial$1.toPolynomial(DE[Mx].subtract(lx).getNumerator(),new Expression.Symbol(hx)).getroots(),on=0;on<Ux.length;on+=1){var fx=Ux[on];a.push(fx),n=n.divideAndRemainder(Polynomial$1.of(fx.negate(),Expression.ONE)).quotient}if(a.length>kx)return typeof hit=="function"&&hit({getroots:{methodOfIntroducingANewVariable:""}}),t?.({content:u,roots:a,newPolynomial:n,type:"methodOfIntroducingANewVariable",t:lx}),Ct(a,n),a}}}}if(n.getDegree()===4){var Yx=n.getCoefficient(4),jx=n.scale(Yx.inverse()),vx=jx.getCoefficient(3),eE=new Expression.Symbol("$y"),qx=function(rS){return rS.subtract(vx.divide(Expression.Integer.fromNumber(4)))},vE=jx.calcAt(qx(eE)),LE=Polynomial$1.toPolynomial(vE.getNumerator(),eE),jx=LE.getCoefficient(2),dn=LE.getCoefficient(1),BE=LE.getCoefficient(0);const gS=Polynomial$1.of(dn._pow(2).negate(),jx._pow(2).subtract(Expression.TWO.add(Expression.TWO).multiply(BE)),Expression.TWO.multiply(jx),Expression.ONE),oS=gS.getCoefficient(1).equals(Expression.ZERO)&&gS.getCoefficient(2).equals(Expression.ZERO)||gS.getCoefficient(0).equals(Expression.ZERO)?gS.getroots():[gS.doRationalRootTest()||Expression.ZERO];for(const rS of oS){const iS=c(2,rS);if(!rS.equals(Expression.ZERO)&&iS!=null){const ZS=iS.negate(),yS=jx.add(iS._pow(2)).add(dn.divide(iS)).divide(Expression.TWO),GS=jx.add(iS._pow(2)).subtract(dn.divide(iS)).divide(Expression.TWO),BS=Polynomial$1.of(yS,ZS,Expression.ONE),mT=Polynomial$1.of(GS,iS,Expression.ONE);var $E=Polynomial$1.of(Expression.ONE);for(const wS of BS.getroots()){const sT=qx(wS);a.push(sT),$E=$E.multiply(Polynomial$1.of(sT.negate(),Expression.ONE))}for(const wS of mT.getroots()){const sT=qx(wS);a.push(sT),$E=$E.multiply(Polynomial$1.of(sT.negate(),Expression.ONE))}if($E.getDegree()>0)return n=n.divideAndRemainder($E).quotient,t?.({content:u,roots:a,newPolynomial:n,type:"solveQuarticEcuation"}),Ct(a,n),a}}}if(!n.hasIntegerCoefficients()&&n.getDegree()>2){var kE=new Expression.Symbol("$$"),vE=n.calcAt(kE),lx=Expression.getConjugate(vE);if(lx!=null){for(var ZE=Polynomial$1.toPolynomial(lx.multiply(vE),kE).getSquareFreePolynomial().getroots(function(zE){zE.newPolynomial}),fn=0;fn<ZE.length;fn+=1){var fx=ZE[fn];n.calcAt(fx).equals(Expression.ZERO)?(a.push(fx),n=n.divideAndRemainder(Polynomial$1.of(fx.negate(),Expression.ONE)).quotient):console.debug(fx)}return ZE.length>0&&(t?.({content:u,roots:a,newPolynomial:n,type:"multiplyByConjugates",t:lx}),Ct(a,n)),a}}n.getDegree()>=0&&typeof hit=="function"&&hit({getroots:{other:n.getDegree()}});//!2023-05-08 new TODO: !?
if(n.hasIntegerCoefficients()&&n.getDegree()>=4&&n.getDegree()%2===0&&n.getDegree()<=12){var $x=new Expression.Symbol("u"),eS=new Expression.Symbol("v"),WE=n.calcAt($x.add(eS)),CS=n.calcAt($x.subtract(eS)),LS=Polynomial$1.resultant(Polynomial$1.toPolynomial(WE,$x),Polynomial$1.toPolynomial(CS,$x));LS=Polynomial$1.toPolynomial(LS,eS);for(var hS=function(RE){for(var zE=[],ES=RE.factorize();ES!=null&&RE.getDegree()>1;)ES.getDegree()<=2&&(zE=zE.concat(ES.getroots())),RE=RE.divideAndRemainder(ES).quotient,ES=RE.factorize();return zE},qS=Expression.unique(hS(LS.primitivePart())),fn=0;fn<qS.length;fn++){var eS=qS[fn],ar=Polynomial$1.polynomialGCD(n._translateRoots(eS),n._translateRoots(eS.negate()));if(ar.getDegree()<=3){var $S=ar.getroots();if($S.length>0){for(var VS=Polynomial$1.of(Expression.ONE),fn=0;fn<$S.length;fn+=1){var $x=$S[fn],fx=$x.add(eS);a.push(fx),VS=VS.multiply(Polynomial$1.of(fx.negate(),Expression.ONE))}var aE=n.divideAndRemainder(VS);if(!aE.remainder.equals(Polynomial$1.ZERO))throw new TypeError;return n=aE.quotient,Ct(a,n),a}}}}return a};Polynomial$1.prototype.derive=function(){for(var t=new PolynomialData(this.a.size),n=0;n<this.a.size;n+=1){var a=this.a.degree(n),s=this.a.coefficient(n);if(a>=1){var l=Expression.Integer.fromNumber(a).multiply(s);l.equals(Expression.ZERO)||t.add(a-1,l)}}return new Polynomial$1(t)};Polynomial$1.prototype.getSquareFreePolynomial=function(){return this.divideAndRemainder(this.squareFreeFactors().a0).quotient};Polynomial$1.prototype.isSquareFreePolynomial=function(){return this.squareFreeFactors().a0.equals(Polynomial$1.of(Expression.ONE))};Polynomial$1.prototype.squareFreeFactors=function(){for(var t=this,n=0;t.getCoefficient(n).equals(Expression.ZERO);)n+=1;if(t=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n),"throw").quotient,t.getDegree()!==0){var a=t,s=a.derive(),l=Polynomial$1.polynomialGCD(a,s);if(l.getDegree()!==0){Expression.isConstant(l.getLeadingCoefficient())&&(l=l.scale(l.getLeadingCoefficient().inverse())),a.hasIntegerCoefficients()&&(l=l.scale(l.getContent().inverse()));var u=a.divideAndRemainder(l,a._hasIntegerLikeCoefficients()?"throw":void 0).quotient,c=Polynomial$1.polynomialGCD(u,l),d=u.divideAndRemainder(c,u._hasIntegerLikeCoefficients()?"throw":void 0).quotient;return{a1:d.shift(n===1?1:0),a0:l.shift(n>1?n-1:0)}}}return{a1:t.shift(n===1?1:0),a0:Polynomial$1.of(Expression.ONE).shift(n>1?n-1:0)}};Polynomial$1.testables={multiplyByKroneckerSubstitution};Polynomial$1.prototype._findGoodSubstitution=function(){var t=function(a){for(var s=a.getCoefficient(0).abs(),l=0;l<a.getDegree();l+=1)s=s.gcd(a.getCoefficient(l).abs());s=s.abs();for(var u=Expression.ONE;!s.equals(Expression.ONE);){var c=s.primeFactor();if(!a.getLeadingCoefficient().remainder(c).equals(Expression.ZERO)){for(var d=!0,l=0;l<a.getDegree()&&d;l+=1){var Ct=c._pow(a.getDegree()-l);d=a.getCoefficient(l).gcd(Ct).abs().equals(Ct)}d&&(u=u.multiply(c),a=a._scaleRoots(c.inverse()).primitivePart())}s=s.truncatingDivide(c)}return u},n=t(this);return n.divide(t(this._scaleRoots(n.inverse())._exponentiateRoots(-1)))};Polynomial$1.prototype._tryGoodSubstitution=function(){return this._scaleRoots(this._findGoodSubstitution())};Polynomial$1.prototype._getShiftToDepressed=function(){var t=this.getDegree(),n=this.getLeadingCoefficient(),a=this.getCoefficient(t-1),s=a.divide(Expression.Integer.fromNumber(t).multiply(n));return s};Polynomial$1.prototype._factorizeOverTheIntegers=function(){return factorizeOverTheIntegers(this)};Polynomial$1.prototype._factorizeMultivariateIntegerPolynomial=function(){var t=Polynomial$1._getY(this,this),n=Date.now();const a=function(u,c){return u.map(d=>new Expression.Polynomial(Polynomial$1.toPolynomial(d,new Expression.Symbol(c))))};var s=factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial(a(this,t.symbol)),l=Date.now();return l-n>4&&console.log("_factorizeMultivariateIntegerPolynomial",l-n,this.toString()),s==null?null:(s=s.map(u=>u.polynomial.calcAt(t)),s.getLeadingCoefficient().isNegative()&&(s=s.negate()),s)};Polynomial$1.prototype.factorize=function(){if(this.getCoefficient(0).equals(Expression.ZERO))return Polynomial$1.of(Expression.ZERO,Expression.ONE);var t=this.getContent();if(!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate()))throw new RangeError;if(this.getDegree()===1)return null;if(this.getDegree()===2){var n=function(Cn){console.assert(Cn.getDegree()===2);var Rn=Cn.getCoefficient(2),ax=Cn.getCoefficient(1),ox=Cn.getCoefficient(0);return ax.multiply(ax).subtract(Expression.Integer.fromNumber(4).multiply(Rn).multiply(ox))}(this);if(n instanceof Expression.Integer&&!n._isPerfectSquare())return null}var a=this.squareFreeFactors();if(a.a0.getDegree()>0)return a.a1.getDegree()>0?a.a1:a.a0;if(this.getDegree()<2)return null;//!new
var s,l;this.hasIntegerCoefficients();var u=this.getDegree(),c=this.getCoefficient(u-1);if(!c.equals(Expression.ZERO)&&!this.hasIntegerCoefficients()){var d=this.getLeadingCoefficient(),Ct=c.divide(Expression.Integer.fromNumber(u).multiply(d)),ar=this._translateRoots(Ct);if(ar.hasIntegerCoefficients()){ar=ar.primitivePart();var en=ar.factorize();return en!=null?en._translateRoots(Ct.negate()).primitivePart():null}else console.warn("???")}//!
//!new
if(this.isEven()&&this.hasIntegerCoefficients()&&(!this.getCoefficient(0).abs()._isPerfectSquare()||!this.getCoefficient(this.getDegree()).abs()._isPerfectSquare())){var l=this._exponentiateRoots(2).factorize();return l!=null?l._exponentiateRoots(1/2):null}var tn=this.getGCDOfTermDegrees();if(tn>2){var l=this._exponentiateRoots(tn).factorize();if(l!=null)return l._exponentiateRoots(1/tn)}//!
if(!this.hasIntegerCoefficients()||this.getDegree()<4&&this.getLeadingCoefficient().abs().bitLength()+this.getCoefficient(0).abs().bitLength()<9){var on=this.doRationalRootTest();if(on!=null)return Polynomial$1.of(on.getNumerator(),on.getDenominator().negate());if(this.getDegree()<4)return null}//!
var fn=this;return fn.hasIntegerCoefficients()?fn._factorizeOverTheIntegers().next().value:fn._hasIntegerLikeCoefficients()&&Polynomial$1._getY(fn,fn)!=null?fn._factorizeMultivariateIntegerPolynomial():null};Polynomial$1.prototype.primitivePart=function(){return this.scale(this.getContent().inverse())};Polynomial$1.prototype.modularInverse=function(t){if(t.getDegree()<9&&this.getDegree()<t.getDegree()&&!1||this.getDegree()<t.getDegree()&&t.getDegree()<=3){for(var n=t.getDegree(),a=this,s=Polynomial$1.of(n%2===1?Expression.ONE:Expression.ONE.negate());a.getDegree()>0;){var l=function(gx,mx){for(var px=gx,hx=Polynomial$1.ZERO;px.getDegree()>=mx.getDegree();){var vx=px.getLeadingCoefficient();hx=hx.scale(mx.getLeadingCoefficient()),px=px.scale(mx.getLeadingCoefficient());var yx=Polynomial$1.of(vx.negate()).shift(px.getDegree()-mx.getDegree());hx=hx.add(yx),px=px.add(mx.multiply(yx))}return{Q:hx,R:px}},u=l(t.negate(),a);a=u.R,s=s.multiply(u.Q)}s=s.divideAndRemainder(t).remainder;var c,en,d=s;if(t.getDegree()<=3)return s}var Ct=t,ar=Math.gcd(this.getGCDOfTermDegrees(),Ct.getGCDOfTermDegrees());if(ar>1)return this._exponentiateRoots(ar).modularInverse(Ct._exponentiateRoots(ar)).primitivePart()._exponentiateRoots(1/ar);this.hasIntegerCoefficients()&&Ct.hasIntegerCoefficients();var en=this,tn=Ct,cx=en.getDegree()>=Ct.getDegree()?Polynomial$1.pseudoRemainder(en,Ct).primitivePart():en,on=Polynomial$1.of(Expression.ZERO),fn=Polynomial$1.of(Expression.ONE),dn=(en._hasIntegerLikeCoefficients()&&Ct._hasIntegerLikeCoefficients(),"primitive");for(var u of Polynomial$1._pseudoRemainderSequence(tn,cx,dn)){var Cn=cx.getLeadingCoefficient()._pow(tn.getDegree()-cx.getDegree()+1),Rn=u.q,ax=u.,ox=on.scale(Cn).subtract(Rn.multiply(fn));{var ar=ox.getContent().gcd(ax);ox=ox.divideAndRemainder(Polynomial$1.of(ar),"throw").quotient,fn=fn.scale(ax.divide(ar))}[on,fn]=[fn,ox];var sx=u.R;[tn,cx]=[cx,sx]}var lx=tn;if(lx.getDegree()!==0)throw new TypeError;on=on.primitivePart().scale(Ct.getLeadingCoefficient()._pow(Math.max(on.getDegree()+en.getDegree()-Ct.getDegree()+1,0)));var cx=on.multiply(en).divideAndRemainder(Ct,"throw").remainder;if(cx.getDegree()!==0)throw new TypeError;return d!=null&&console.log("!",d.toString(),on.toString()),on};const SUBQUADRATIC_GCD_THRESHOLD=32*1024,SUBQUADRATIC_HALFGCD_THRESHOLD=4096;let SMALL_GCD_MAX=0n,DIGITSIZE=0,smallgcd=null,smallgcdext=null,wasmHelper=null,jsHelper=null;if(typeof WebAssembly<"u"){const t=new Uint8Array([0,97,115,109,1,0,0,0,1,20,3,96,0,1,126,96,2,126,126,1,126,96,5,126,126,126,126,127,1,127,3,8,7,1,1,2,0,0,0,0,6,21,4,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,7,47,7,6,117,54,52,103,99,100,0,0,9,117,54,52,103,99,100,101,120,116,0,1,6,104,101,108,112,101,114,0,2,1,65,0,3,1,66,0,4,1,67,0,5,1,68,0,6,10,141,4,7,37,1,1,126,32,1,66,0,82,4,64,3,64,32,0,32,1,130,33,2,32,1,33,0,32,2,34,1,66,0,82,13,0,11,11,32,0,11,97,1,6,126,66,1,33,6,66,1,33,3,32,1,66,0,82,4,64,3,64,32,0,32,0,32,1,128,34,7,32,1,126,125,33,4,32,1,33,0,32,6,32,2,32,7,126,125,33,1,32,5,32,3,32,7,126,125,33,7,32,2,33,6,32,3,33,5,32,1,33,2,32,7,33,3,32,4,34,1,66,0,82,13,0,11,11,32,6,36,0,32,5,36,1,32,0,11,238,2,2,7,126,2,127,66,1,33,9,66,1,33,7,32,0,66,127,82,32,2,66,127,82,113,4,64,3,64,32,0,32,6,124,33,8,32,0,32,9,124,33,6,32,2,32,5,124,33,5,32,2,32,7,124,33,7,32,12,65,1,113,4,64,32,8,33,9,32,6,33,8,32,9,33,6,32,5,33,9,32,7,33,5,32,9,33,7,11,3,64,32,5,32,6,32,8,32,7,128,34,11,32,5,126,125,34,9,86,4,64,32,12,65,1,106,33,12,32,8,32,7,32,11,126,125,33,10,32,0,32,2,32,11,126,125,33,11,32,5,33,8,32,7,33,6,32,2,33,0,32,10,33,5,32,9,33,7,32,11,33,2,12,1,11,11,32,6,32,0,125,33,9,32,8,32,0,125,33,6,32,5,32,2,125,33,5,32,7,32,2,125,33,7,32,12,65,1,113,4,64,32,9,33,8,32,6,33,9,32,8,33,6,32,5,33,8,32,7,33,5,32,8,33,7,11,32,4,32,0,32,9,124,34,8,32,0,32,6,124,34,10,32,8,32,10,86,27,121,167,34,13,32,4,32,13,72,27,34,13,4,64,32,1,32,1,32,4,32,13,107,34,4,172,34,8,136,34,10,32,8,134,125,33,1,32,3,32,3,32,8,136,34,11,32,8,134,125,33,3,32,9,32,10,126,32,6,32,11,126,124,32,0,32,13,172,34,8,134,124,33,0,32,5,32,10,126,32,7,32,11,126,124,32,2,32,8,134,124,33,2,11,32,13,13,0,11,11,32,9,36,0,32,6,36,1,32,5,36,2,32,7,36,3,65,0,11,4,0,35,0,11,4,0,35,1,11,4,0,35,2,11,4,0,35,3,11]);try{const n=new WebAssembly.Instance(new WebAssembly.Module(t)).exports;n.helper(1n,0n,1n,0n)!=null&&(wasmHelper=function(a,s,l,u,c){return n.helper(a,s,l,u,c),[n.A(),n.B(),n.C(),n.D()]},DIGITSIZE=64,SMALL_GCD_MAX=BigInt.asUintN(64,-1n)),n.u64gcd(0n,0n)===0n&&(smallgcd=n.u64gcd),n.u64gcdext(0n,0n)===0n&&(smallgcdext=function(a,s){const l=n.u64gcdext(a,s);return[n.A(),n.B(),l]})}catch(n){console.log(n)}}function AsmModule(t){var n=t.Math.floor,a=t.Math.max,s=t.Math.clz32,l=-0,u=-0,c=-0,d=-0;function Ct(ax,ox){ax=+ax,ox=+ox;for(var sx=-0,lx=-0;ox>-0;)lx=+n(ax/ox),sx=ax-lx*ox,ax=ox,ox=sx;return+ax}function ar(ax,ox){ax=+ax,ox=+ox;for(var sx=-0,lx=-0,cx=1,fx=-0,gx=-0,mx=1,px=-0,hx=-0;ox>-0;)lx=+n(ax/ox),sx=ax-lx*ox,ax=ox,ox=sx,px=cx-lx*gx,hx=fx-lx*mx,cx=gx,fx=mx,gx=px,mx=hx;return l=cx,u=fx,+ax}function en(ax){ax=+ax;for(var ox=0;ax>=4294967296;)ax=ax*23283064365386963e-26,ox=ox+32|0;return ox=ox+(32-(s(~~ax)|0))|0,ox|0}function tn(ax){ax=ax|0;for(var ox=1;(ax|0)<0;)ax=ax+32|0,ox=ox*23283064365386963e-26;for(;(ax|0)>=32;)ax=ax-32|0,ox=ox*4294967296;return ox=ox*+(1<<ax>>>0),+ox}function on(ax,ox,sx,lx,cx){ax=+ax,ox=+ox,sx=+sx,lx=+lx,cx=cx|0;var fx=1,gx=-0,mx=-0,px=1,hx=0,vx=0,yx=-0,Sx=-0,_x=-0,Ex=-0,bx=-0,Ax=-0,Mx=0,Rx=-0,Cx=-0,Lx=-0,qx=-0,Ix=-0;if(sx!=-0)do{do yx=n(ax/sx),Sx=ax-yx*sx,_x=mx,Ex=px,bx=fx-yx*mx,Ax=gx-yx*px,vx=-0<=Sx+bx&Sx+bx<sx+mx&-0<=Sx+Ax&Sx+Ax<sx+px,vx&&(ax=sx,sx=Sx,fx=_x,gx=Ex,mx=bx,px=Ax);while(vx);Mx=53-(en(ax+a(fx,gx))|0)|0,hx=(Mx|0)<0?Mx:(Mx|0)>(cx|0)?cx:Mx,(Mx|0)!=0&&(Rx=+tn(cx-hx|0),Cx=+tn(hx-cx|0),Lx=+n(ox*Cx),qx=+n(lx*Cx),ox=ox-Lx*Rx,lx=lx-qx*Rx,cx=cx-hx|0,Ix=+tn(hx),ax=fx*Lx+gx*qx+ax*Ix,sx=mx*Lx+px*qx+sx*Ix)}while((hx|0)!=0);return l=fx,u=gx,c=mx,d=px,0}function fn(){return l}function dn(){return u}function Cn(){return c}function Rn(){return d}return{f64gcdext:ar,f64gcd:Ct,helper:on,A:fn,B:dn,C:Cn,D:Rn}}if(DIGITSIZE===0){const t=AsmModule(globalThis);jsHelper=function(n,a,s,l,u){return t.helper(n,a,s,l,u),[BigInt(t.A()),BigInt(t.B()),BigInt(t.C()),BigInt(t.D())]},DIGITSIZE=53,SMALL_GCD_MAX=BigInt.asUintN(53,-1n),smallgcd=function(n,a){return BigInt(t.f64gcd(Number(BigInt(n)),Number(BigInt(a))))},smallgcdext=function(n,a){const s=t.f64gcdext(Number(BigInt(n)),Number(BigInt(a)));return[BigInt(t.A()),BigInt(t.B()),BigInt(s)]}}function bitLength(t){const n=t.toString(16),a=n.charCodeAt(0)-0-48;if(a<=0)throw new RangeError;return(n.length-1)*4+(32-Math.clz32(Math.min(a,8)))}const frexpf64=typeof Float64Array<"u"?new Float64Array(1):null,frexpi32=typeof Float64Array<"u"?new Int32Array(frexpf64.buffer):null;let previousValue=0;function bitLength2(t){if(previousValue<=1024){const a=-0+Number(BigInt(t));if(frexpf64!=null){frexpf64[0]=a;const u=(frexpi32[1]>>20)-1023;if(u<1024&&frexpi32[0]!==0||(frexpi32[1]&1048575)!==0)return previousValue=u+1,previousValue}const s=Math.log2(a)+1024*4-1024*4,l=Math.ceil(s);if(s!==l)return previousValue=l,previousValue}previousValue<DIGITSIZE&&(previousValue=DIGITSIZE);const n=-0+Number(t>>BigInt(previousValue-DIGITSIZE));if(n>=1&&n<=9007199254740992){let a=+n,s=0;for(;a>1073741824;)a=Math.floor(a/1073741824),s+=30;return s+=32-Math.clz32(a),previousValue=previousValue-DIGITSIZE+s,previousValue}return previousValue=bitLength(t),previousValue}function helper$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(wasmHelper!=null){if(DIGITSIZE!==64)throw new RangeError;const a=BigInt.asUintN(64,t>>64n),s=BigInt.asUintN(64,t),l=BigInt.asUintN(64,n>>64n),u=BigInt.asUintN(64,n);return wasmHelper(a,s,l,u,64)}else{if(DIGITSIZE!==53)throw new RangeError;const a=-0+Number(t>>53n),s=-0+Number(BigInt.asUintN(53,t)),l=-0+Number(n>>53n),u=-0+Number(BigInt.asUintN(53,n));return jsHelper(a,s,l,u,53)}}function abs$2(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function max$2(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;return t<n?n:t}function halfgcd(t,n,a=!0,s=!0,l=!1){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;a=a||s;let u=1n,c=0n,d=0n,Ct=1n,ar=0;if(t<0n&&(t=-t,a&&(u=-u,c=-c,ar+=1)),n<0n&&(n=-n,a&&(d=-d,Ct=-Ct,ar+=1)),t<n){const fn=t;if(t=n,n=fn,a){const dn=u;u=d,d=dn;const Cn=c;c=Ct,Ct=Cn,ar+=1}}let en=!1;s&&BigInt.asUintN(SUBQUADRATIC_HALFGCD_THRESHOLD,t)===t&&(en=!0);let tn=!1,on=0;for(;(s||t>SMALL_GCD_MAX)&&n!==0n;){if(!en&&!s&&BigInt.asUintN(SUBQUADRATIC_GCD_THRESHOLD*(a?1/16:1),n)===n){en=!0;continue}if(ar+=1,!en){s&&ar===1&&(on=bitLength(t));const Cn=s?bitLength(max$2(abs$2(d),abs$2(Ct))):0;let Rn=s?Math.max(0,Math.ceil((on-Cn-Cn)*(1/2))):a?0:Math.floor(bitLength(t)*2/3),ax=BigInt(Rn);if(ar!==1&&s){if(Rn<256){en=!0;continue}let _x=8;for(;t+u>>ax!==t+c>>ax||n+d>>ax!==n+Ct>>ax;)Rn+=_x,ax=BigInt(Rn),_x+=_x}const[ox,sx,lx,cx,fx,gx]=halfgcd(t>>ax,n>>ax),[mx,px,hx,vx,yx,Sx]=[BigInt(ox),BigInt(sx),BigInt(lx),BigInt(cx),BigInt(fx),BigInt(gx)];if(px!==0n){if(a)if(ar===1)u=mx,c=px,d=hx,Ct=vx;else{const Mx=mx*c+px*Ct,Rx=hx*c+vx*Ct;if(c=Mx,Ct=Rx,s){const Cx=mx*u+px*d,Lx=hx*u+vx*d;u=Cx,d=Lx}}const _x=BigInt.asUintN(Rn,t),Ex=BigInt.asUintN(Rn,n),bx=mx*_x+px*Ex+(yx<<ax),Ax=hx*_x+vx*Ex+(Sx<<ax);if(t=bx,n=Ax,t<0n||n<0n)throw new TypeError("assertion");continue}}if(en&&!tn){let Cn=Math.max(0,bitLength2(t)-DIGITSIZE*2),Rn=Cn===0?0n:BigInt(Cn);if(ar!==1&&s&&(t+u>>Rn!==t+c>>Rn||n+d>>Rn!==n+Ct>>Rn)){if(!l)break;do Cn+=8,Rn=BigInt(Cn);while(t+u>>Rn!==t+c>>Rn||n+d>>Rn!==n+Ct>>Rn);if(n>>Rn===0n){tn=!0;continue}}const[ax,ox,sx,lx]=helper$1(Cn===0?t:t>>Rn,Cn===0?n:n>>Rn),[cx,fx,gx,mx]=[BigInt(ax),BigInt(ox),BigInt(sx),BigInt(lx)];if(fx!==0n){if(a)if(ar===1)u=cx,c=fx,d=gx,Ct=mx;else{const vx=cx*c+fx*Ct,yx=gx*c+mx*Ct;if(c=vx,Ct=yx,s){const Sx=cx*u+fx*d,_x=gx*u+mx*d;u=Sx,d=_x}}const px=cx*t+fx*n,hx=gx*t+mx*n;if(t=px,n=hx,t<0n||n<0n)throw new TypeError("assertion");continue}}const fn=t/n,dn=t-fn*n;if(a){const Cn=u-fn*d,Rn=c-fn*Ct;if(s&&!(0n<=dn+Cn&&dn+Cn<n+d&&0n<=dn+Rn&&dn+Rn<n+Ct))break;u=d,c=Ct,d=Cn,Ct=Rn}t=n,n=dn}return[u,c,d,Ct,t,n]}function LehmersGCD(t,n){const[a,s,l,u,c,d]=halfgcd(t,n,!1,!1);return t=BigInt(c),n=BigInt(d),n!==0n&&(t=BigInt.asUintN(64,smallgcd(t,n))),t}function LehmersGCDExt(t,n){const[a,s,l,u,c,d]=halfgcd(t,n,!0,!1),Ct=t,ar=n;let en=BigInt(a),tn=BigInt(s);BigInt(l);let on=BigInt(u);if(t=BigInt(c),n=BigInt(d),d!==0n){const[fn,dn,Cn]=smallgcdext(t,n);t=BigInt.asUintN(64,Cn),n=0n,tn=fn*tn+dn*on}return en=Ct===0n?0n:(t-tn*ar)/Ct,[en,tn,t]}function gcd$1(t,n){return LehmersGCD(BigInt(t),BigInt(n))}function gcdext(t,n){return LehmersGCDExt(BigInt(t),BigInt(n))}function invmod(t,n){const[a,s,l,u,c,d]=halfgcd(n,t,!0,!1);if(BigInt(d)!==0n){const[ar,en,tn]=smallgcdext(c,d);if(BigInt.asUintN(64,tn)!==1n)return 0n;const on=ar*BigInt(s)+en*BigInt(u);return on<0n?on+n:on}if(BigInt(c)!==1n)return 0n;const Ct=BigInt(s);return Ct<0n?Ct+n:Ct}function halfgcdWrapper(t,n){return halfgcd(t,n,!0,!0,!0)}gcd$1.halfgcd=halfgcdWrapper;gcd$1.gcdext=gcdext;gcd$1.invmod=invmod;function abs$1(t){return t<0n?0n-t:t}function ngcd(t,n){return BigInt(gcd$1(BigInt(t),BigInt(n)))}function QuadraticInteger(t,n,a,s=!1){let l=BigInt(t),u=BigInt(n);const c=typeof a=="number"?a:Number(BigInt(a));if(s&&c%4===0)throw new RangeError;if(s&&l%2n===0n&&u%2n===0n&&(s=!1,l/=2n,u/=2n),s&&(l%2n===0n||u%2n===0n))throw new RangeError;this.a=l,this.b=u,this.D=c,this.overTwo=s}QuadraticInteger.prototype.multiply=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=BigInt(n.a)*t.a+BigInt(n.b)*t.b*BigInt(t.D),s=BigInt(n.a)*t.b+BigInt(n.b)*t.a,l=(n.overTwo?1:0)+(t.overTwo?1:0);l>0&&a%2n===0n&&s%2n===0n;)a/=2n,s/=2n,l-=1;return new QuadraticInteger(a,s,n.D,l===1)};QuadraticInteger.prototype.conjugate=function(t){return new QuadraticInteger(this.a,-BigInt(this.b),this.D,this.overTwo)};QuadraticInteger.prototype.norm=function(){const t=BigInt(this.a),n=BigInt(this.b),a=+this.D;var s=t*t,l=n*n,u=s-l*BigInt(a);if(this.overTwo){if(u%4n!==0n)throw new RangeError("assertion");u/=4n}return u};QuadraticInteger.prototype.truncatingDivideInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).truncatingDivide(this)};QuadraticInteger.prototype.truncatingDivide=function(t){if(!(t instanceof QuadraticInteger)){if(!t instanceof Expression.Integer)throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=n.multiply(t.conjugate()),s=t.norm();s%2n===0n&&a.a%2n===0n&&a.b%2n===0n;)a=new QuadraticInteger(a.a/2n,a.b/2n,a.D,a.overTwo),s/=2n;return!a.overTwo&&a.D%4===1&&a.a%2n!==0n&&a.b%2n!==0n&&s%2n===0n&&(a=new QuadraticInteger(a.a,a.b,a.D,!0),s/=2n),BigInt(a.a)%s===0n&&BigInt(a.b)%s===0n?new QuadraticInteger(BigInt(a.a)/s,BigInt(a.b)/s,n.D,a.overTwo):null};QuadraticInteger.prototype.negate=function(){return new QuadraticInteger(-BigInt(this.a),-BigInt(this.b),this.D,this.overTwo)};function factors(t){if(t<1n)throw new TypeError;var n=t>1n?BigInt(primeFactor(t)):1n,a=1n,s=1n,l=null,u=1n,c={done:!1,value:null,next:function(){if(n===1n)return this.value=null,this.done=!0,this;if(l==null){if(t%n===0n)return a=a*n,t=t/n,this.value=a,this.done=!1,this;l=factors(t),u=a}return u===a?(u=1n,s=l.next().value):u=u*n,this.value=s==null?null:s*u,this.done=s==null,this}};return c[Symbol.iterator]=function(){return this},c}QuadraticInteger._factors=function(t){return factors(BigInt(t))};QuadraticInteger._complexIntegerPrimeFactor=function(t,n){t=BigInt(t),n=BigInt(n);function a(Ct){var ar=33751571,en=(ar>>Number(Ct%32n))%2;return en===1}function s(Ct,ar){if(typeof Ct!="bigint"||typeof ar!="bigint")throw new TypeError;return Ct*Ct+ar*ar}function l(Ct,ar,en,tn){if(typeof en!="bigint"||typeof tn!="bigint")throw new TypeError;var on=en*en+tn*tn,fn=Ct*en+ar*tn,dn=ar*en-Ct*tn;return fn%on===0n&&dn%on===0n}var u=s(t,n);for(var c of QuadraticInteger._factors(u)){let Ct=0n;for(var d=c;d>0n;){if(a(d)){const ar=BigInt(nthRoot(BigInt(d),2));if(ar*ar===BigInt(d)&&s(ar,Ct)>1n&&l(t,n,ar,Ct))return Ct===0n?new Expression.Complex(Expression.ZERO,Expression.Integer.fromBigInt(ar)):new Expression.Complex(Expression.Integer.fromBigInt(ar),Expression.Integer.fromBigInt(Ct))}Ct=Ct+1n,d=c-Ct*Ct}}if(u>1n)throw new TypeError;return new Expression.Complex(Expression.Integer.fromBigInt(t),Expression.Integer.fromBigInt(n))};function jacobiSymbol(t,n){if(t<0||n%2==0)throw new Error("Invalid value. k = "+t+", n = "+n);t%=n;for(var a=1;t>0;){for(;t%2==0;){t/=2;var s=n%8;(s==3||s==5)&&(a=-a)}var l=n;n=t,t=l,t%4==3&&n%4==3&&(a=-a),t%=n}return n==1?a:0}function LegendreSymbol(t,n){return jacobiSymbol(t,n)}function quadraticIntegers(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const s=Number(BigInt(n))%4===1;for(;;){var l=BigInt(a)*a*n;const d=-t*(s?4n:1n)+l,Ct=t*(s?4n:1n)+l;if(Number(Ct)>Number.MAX_SAFE_INTEGER||Number(d)>Number.MAX_SAFE_INTEGER)throw new RangeError(t);var c=d;if(c>=0n){var u=BigInt(nthRoot(BigInt(c),2));if(c===u**2n)return new QuadraticInteger(u,a,n,s)}var c=Ct;if(c>=0n){var u=BigInt(nthRoot(BigInt(c),2));if(c===u**2n)return new QuadraticInteger(u,a,n,s)}a=a+1n}}QuadraticInteger._fundamentalUnit=function(t){return quadraticIntegers(1n,t,1n)};QuadraticInteger.prototype.primeFactor=function(){var t=this.a,n=this.b,a=BigInt(this.D),l=ngcd(t,a),s=ngcd(t,n);if(s!==1n&&s!==-1n)return s!==a?Expression.Integer.fromBigInt(s).primeFactor():new QuadraticInteger(0n,1n,a);if(l===a)return new QuadraticInteger(0n,1n,a);var l=s,u=this.norm();if(u===1n||u===-1n){var c=QuadraticInteger._fundamentalUnit(a),d=c.conjugate(),Ct=this;return BigInt(Ct.b)*Ct.a<1n?Ct.a<0n?d.negate():d:c}for(var ar=this,en=QuadraticInteger._factors(abs$1(u)),tn=en.next().value;tn!=null;tn=en.next().value){if(a%4n===1n&&tn===2n||a===37n&&(tn===7n||tn===14n||tn===3n||tn===11n)||isPrime(tn)&&a%tn!==0n&&tn!==2n&&LegendreSymbol(Number(a),Number(BigInt(tn)))!==1)continue;var on=quadraticIntegers(tn,a,0n),Ct=ar.truncatingDivide(on);if(Ct!=null)return this.equals(on)?on:on.primeFactor();const fn=on.conjugate();var Ct=ar.truncatingDivide(fn);if(Ct!=null)return this.equals(fn)?fn:fn.primeFactor()}return this};QuadraticInteger.prototype.toString=function(){var t=this.a.toString()+"+"+this.b.toString()+"sqrt("+this.D+")";return this.overTwo&&(t="("+t+")/2"),t};QuadraticInteger.prototype.isUnit=function(){var t=this.norm();return t===1n||t===-1n};QuadraticInteger.prototype.equals=function(t){var n=this;if(!(t instanceof QuadraticInteger)){if(t.equals(Expression.ZERO))return n.a===0n&&n.b===0n;if(t.equals(Expression.ONE))return n.a===1n&&n.b===0n;throw new TypeError}return BigInt(n.a)===t.a&&BigInt(n.b)===t.b&&+n.D==+t.D&&!!n.overTwo==!!t.overTwo};QuadraticInteger.prototype.subtract=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;var a=BigInt(n.a),s=BigInt(n.b),l=BigInt(t.a),u=BigInt(t.b);return!!n.overTwo!=!!t.overTwo&&(n.overTwo&&(l*=2n,u*=2n),t.overTwo&&(a*=2n,s*=2n)),new QuadraticInteger(a-l,s-u,n.D,n.overTwo||t.overTwo)};QuadraticInteger.prototype.isDivisibleBy=function(t){return this.truncatingDivide(t)!=null};QuadraticInteger.prototype.isDivisibleByInteger=function(t){return t.truncatingDivide(this)!=null};QuadraticInteger.prototype.remainder=function(t){if(!(t instanceof QuadraticInteger)){if(t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.SquareRoot)return this.remainder(new QuadraticInteger(Expression.ZERO.toBigInt(),t.a.toBigInt(),t.b.a.toBigInt()));if(!(t instanceof Expression.Integer))throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;var a=n.multiply(t.conjugate()),s=t.norm();if(s===1n||s===-1n)return n.subtract(n);var l=(a.a-BigInt(a.a)%s)/s,u=(a.b-BigInt(a.b)%s)/s;const c=BigInt(n.a),d=BigInt(t.a);if(l===0n&&u===0n){if(c>d&&d>0n)return n.subtract(t.multiply(new QuadraticInteger((c-c%d)/d,0n,n.D)));if(c>-d&&d<0n)return n.subtract(t.multiply(new QuadraticInteger((c-c%-d)/-d,0n,n.D)));if(t.b===0n)return new QuadraticInteger(1n,0n,n.D)}var Ct=new QuadraticInteger(l,u,n.D),ar=n.subtract(t.multiply(Ct));return ar};QuadraticInteger.prototype.remainderInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).remainder(this)};QuadraticInteger.prototype.toExpression=function(){return Expression.Integer.fromBigInt(this.a).add(Expression.Integer.fromBigInt(this.b).multiply(Expression.Integer.fromNumber(this.D).squareRoot())).divide(this.overTwo?Expression.TWO:Expression.ONE)};QuadraticInteger.prototype.abs=function(){return this.a<=0n&&this.b<=0n||this.a<0n&&this.norm()>0n||this.b<0n&&this.norm()<0n?this.negate():this};QuadraticInteger.prototype.isValid=function(){return this.D,this.D,!(this.D===6||this.D%4===1||[2,3,5,6,7,11,13,17,19,21,29,33,37,41,57,73].indexOf(this.D)===-1)};QuadraticInteger.prototype.isPositive=function(){var t=this;return t.a>0n&&t.b>0n||t.a>0n&&t.norm()>0n||t.b>0n&&t.norm()<0n};function toQuadraticInteger(t){if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.SquareRoot&&t.a.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),Expression.ONE.toBigInt(),t.a.a.toBigInt());if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.Multiplication&&t.a.a instanceof Expression.Integer&&t.a.b instanceof Expression.SquareRoot&&t.a.b.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),t.a.a.toBigInt(),t.a.b.a.toBigInt());if(t instanceof Expression.Division&&t.getDenominator().equals(Expression.TWO)){var n=toQuadraticInteger(t.getNumerator());if(n!=null)return n.truncatingDivide(new QuadraticInteger(2,0,n.D))}}//!
QuadraticInteger.toQuadraticInteger=toQuadraticInteger;QuadraticInteger.gcd=function(t,n){for(var a=t,s=n;!s.equals(Expression.ZERO);){var l=a.remainder(s);if(!(BigInt(abs$1(l.norm()))<=BigInt(abs$1(s.norm()))))throw new TypeError("norm");a=s,s=l}return a};function isPrime(t){return BigInt(primeFactor(t))===BigInt(t)}globalThis.QuadraticInteger=QuadraticInteger;QuadraticInteger._checkFactorization=function t(n){typeof n=="string"&&(n=QuadraticInteger.toQuadraticInteger(RPN(n)));for(var a=[],s=n;Math.abs(Number(BigInt(s.norm())))>1;){var l=s.primeFactor();a.push(l),s=s.truncatingDivide(l)}(s.a.toString()!=="1"||s.b.toString()!=="0")&&a.unshift(s),console.log(n+"="+a.map(u=>"("+u.toString()+")").join(""))};const factory=function(t){const n=BigInt(t),a=Math.log2(t),s=1/Math.log2(t),l=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)),u=/^\s*([+\-])?(\d+)?\.?(\d+)?(?:e([+\-]?\d+))?\s*$/;function c(Ix,Px){this.significand=Ix,this.exponent=Px}c.BigFloat=c.BigDecimal=function(Ix){if(Ix instanceof c)return Ix;if(typeof Ix=="string"){if(t!==10)throw new Error;const Nx=u.exec(Ix);if(Nx==null)throw new RangeError(Ix);const Bx=Number(Nx[4]||"0");return d(BigInt((Nx[1]||"")+(Nx[2]||"")+(Nx[3]||"")),fn(Math.abs(Bx)<Number.MAX_SAFE_INTEGER?Bx:BigInt(Nx[4]||"0"),(Nx[3]||"").length))}if(typeof Ix=="number"&&Math.floor(Ix)!==Ix&&t===2){const Nx=Ax(Ix),$x=Ix/2**Nx*(Number.MAX_SAFE_INTEGER+1)/2,Vx=Nx-(l-1);return d(BigInt($x),Vx)}return d(BigInt(Ix),0)},c.toNumber=function(Ix){return Number(BigInt(c.toBigInt(Ix)))},c.toBigInt=function(Ix){const Px=Ix.exponent,Nx=typeof Px=="number"?Px:Number(BigInt(Px));if(Nx===0)return Ix.significand;if(Nx<0){const Bx=fx(Ix.significand,0-Nx);if(cx(Bx,0-Nx)!==BigInt(Ix.significand))throw new RangeError("The BigDecimal "+Ix.toString()+" cannot be converted to a BigInt because it is not an integer");return Bx}return cx(Ix.significand,Nx)};function d(Ix,Px){return new c(Ix,Px)}function Ct(Ix){return Ix<0n?0n-Ix:Ix}function ar(Ix){const Px=Ix.toString(16),Nx=+Px.charCodeAt(0)-48;if(Nx<=0)throw new RangeError;return(Px.length-1)*4+(32-Math.clz32(Math.min(Nx,8)))}function en(Ix){const Px=ar(Ix)-l,Nx=Number(Ix>>BigInt(Px));return Math.log2(Nx)+Px}function tn(Ix){if(Ix=Ct(Ix),t===2)return ar(Ix);const Px=Number(BigInt(Ix));if(Px<(Number.MAX_SAFE_INTEGER+1)/16)return Math.floor(Math.log2(Px+.5)*s)+1;const Nx=(Px<1/0?Math.log2(Px):en(Ix))*s;if(Math.floor(Nx*(1-32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(Nx)&&Math.floor(Nx*(1+32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(Nx))return Math.floor(Nx)+1;const Bx=Math.floor(Nx+.5);return Ix>=BigInt(sx(Bx))?Bx+1:Bx}function on(Ix,Px){if(typeof Ix=="number"&&typeof Px=="number"){const $x=Ix+Px;if(Math.abs($x)<=+Number.MAX_SAFE_INTEGER)return $x}const Nx=BigInt(Ix)+BigInt(Px),Bx=Number(Nx);return Math.abs(Bx)<=+Number.MAX_SAFE_INTEGER?Bx:Nx}function fn(Ix,Px){return on(Ix,typeof Px=="number"?0-Px:-BigInt(Px))}const dn=Math.ceil(.5*Math.log2(Number.MAX_SAFE_INTEGER+1)/Math.log2(t)-1),Cn=BigInt(t**dn);function Rn(Ix,Px){if(Px==null||Px.maximumSignificantDigits!=null){if(Ix.significand===0n)return Ix.exponent===0?Ix:d(0n,0);const Nx=Ix.significand;let Bx=dn,$x=Cn;if(Nx%$x===0n){for(;Nx%($x*$x)===0n;)$x*=$x,Bx*=2;const Vx=Nx/$x;return d(Vx,on(Ix.exponent,Bx))}}return Ix}function ax(Ix){let Px={},Nx=0;return function(Bx){let $x=Px[Bx];return $x==null&&(Nx>100&&(Px={},Nx=0),$x=Ix(Bx),Px[Bx]=$x,Nx+=1),$x}}const ox=ax(function(Ix){return BigInt(Ix)}),sx=ax(function(Ix){return n**BigInt(Ix)});function lx(Ix,Px){if(Px!=null){let Nx=0;const Bx=BigInt(Ix.significand),$x=Ix.exponent,Vx=Px.maximumSignificantDigits;if(Vx!=null){if(!(Vx>0))throw new RangeError("maximumSignificantDigits should be positive");if(Bx===0n)return d(0n,0);Nx=tn(Bx)-Vx}const Gx=Px.maximumFractionDigits;if(Gx!=null){if(!(Gx>=0))throw new RangeError("maximumFractionDigits should be non-negative");Nx=0-on($x,Gx)}if(Nx>0){const Zx=Px.roundingMode;let jx=0n;if(Zx==="floor")t===2?jx=Bx>>ox(Nx):Bx>=0n?jx=Bx/sx(Nx):jx=(Bx+1n)/sx(Nx)-1n;else if(Zx==="down")t===2?Bx>=0n?jx=Bx>>ox(Nx):jx=-(-Bx>>ox(Nx)):jx=Bx/sx(Nx);else if(Zx==="ceil")t===2?jx=-(-Bx>>ox(Nx)):Bx<0n?jx=Bx/sx(Nx):jx=(Bx-1n)/sx(Nx)+1n;else if(Zx==="up")t===2?Bx>=0n?jx=-(-Bx>>ox(Nx)):jx=Bx>>ox(Nx):Bx>=0n?jx=(Bx-1n)/sx(Nx)+1n:jx=(Bx+1n)/sx(Nx)-1n;else{let Hx=0n,iE=0n;if(t===2){const Xx=ox(Nx);Hx=1n<<Xx,Bx>=0n?jx=Bx>>Xx:jx=-(-Bx>>Xx),iE=(Bx-(jx<<Xx))*2n}else Hx=sx(Nx),jx=Bx/Hx,iE=(Bx-Hx*jx)*2n;if(iE!==0n){if(Zx==="half-up")iE+=iE<0n?-1n:1n;else if(Zx==="half-down")iE+=0n;else if(Zx==="half-even")iE+=jx%2n;else throw new RangeError("supported roundingMode (floor/ceil/up/down/half-even/half-up/half-down) is not given");iE>Hx&&(jx+=1n),-iE>Hx&&(jx-=1n)}}return d(jx,on($x,Nx))}}return Ix}c.unaryMinus=function(Ix){return d(-BigInt(Ix.significand),Ix.exponent)},c.add=function(Ix,Px,Nx=null){const Bx=BigInt(Ix.significand),$x=BigInt(Px.significand),Vx=Ix.exponent,Gx=Px.exponent,Zx=fn(Vx,Gx),jx=typeof Zx=="number"?Zx:Number(BigInt(Zx));if(jx!==0){if(Bx===0n)return lx(Px,Nx);if($x===0n)return lx(Ix,Nx);const Hx=Nx!=null?Nx.maximumSignificantDigits+1:0;if(jx>0)return Hx!==0&&jx>tn($x)+Hx?lx(d(cx(Bx,Hx)+($x<0n?-1n:1n),fn(Vx,Hx)),Nx):lx(d(cx(Bx,jx)+$x,Gx),Nx);if(jx<0)return Hx!==0&&0-jx>tn(Bx)+Hx?lx(d((Bx<0n?-1n:1n)+cx($x,Hx),fn(Gx,Hx)),Nx):lx(d(Bx+cx($x,0-jx),Vx),Nx)}return lx(d(Bx+$x,Vx),Nx)},c.subtract=function(Ix,Px,Nx=null){return c.add(Ix,c.unaryMinus(Px),Nx)},c.multiply=function(Ix,Px,Nx=null){return Rn(lx(d(BigInt(Ix.significand)*BigInt(Px.significand),on(Ix.exponent,Px.exponent)),Nx),Nx)};function cx(Ix,Px){if(typeof Ix!="bigint")throw new TypeError;return t===2?Ix<<ox(Px):sx(Px)*Ix}function fx(Ix,Px){if(typeof Ix!="bigint")throw new TypeError;return t===2?Ix>>ox(Px):Ix/sx(Px)}c.divide=function(Ix,Px,Nx=null){if(Ix.significand===0n)return Ix;const Bx=fn(Ix.exponent,Px.exponent);let $x=0;Nx!=null&&Nx.maximumSignificantDigits!=null?$x=Nx.maximumSignificantDigits+(tn(Px.significand)-tn(Ix.significand)):Nx!=null&&Nx.maximumFractionDigits!=null?$x=on(Nx.maximumFractionDigits,Bx):$x=Math.ceil(tn(Px.significand)*a)+1;let Vx=BigInt($x>0?cx(Ix.significand,$x):Ix.significand),Gx=BigInt($x<0?cx(Px.significand,0-$x):Px.significand);Gx<0n&&(Vx=-Vx,Gx=-Gx);let Zx=0n;if(Nx!=null&&Nx.roundingMode==="floor")Vx>=0n?Zx=Vx/Gx:Zx=(Vx+1n)/Gx-1n;else if(Nx!=null&&Nx.roundingMode==="ceil")Vx<=0n?Zx=Vx/Gx:Zx=(Vx-1n)/Gx+1n;else{Vx<0n?Zx=(Vx+1n)/Gx-1n:Zx=Vx/Gx;const jx=Vx-Gx*Zx;if(console.assert(jx>=0n),jx!==0n){if(Nx==null)throw new RangeError("rounding is not given for inexact operation");Zx*=n**2n,$x=on($x,2),jx*2n<Gx?Zx+=1n:jx*2n===Gx?Zx+=n**2n/2n:Zx+=n**2n/2n+1n}}return lx(d(Zx,fn(Bx,$x)),Nx)};function gx(Ix,Px){const Nx=BigInt(Ix.significand),Bx=BigInt(Px.significand),$x=Ix.exponent,Vx=Px.exponent,Gx=fn($x,Vx),Zx=typeof Gx=="number"?+Gx:Number(BigInt(Gx));if(Zx===0)return Nx<Bx?-1:Nx>Bx?1:0;if(Nx<=0n&&Bx>=0n)return Nx===0n&&Bx===0n?0:-1;if(Nx>=0n&&Bx<=0n)return Nx===0n&&Bx===0n?0:1;if(t!==2||Zx>=9007199254740992||Zx<=-9007199254740992){const iE=on(Gx,tn(Nx)-tn(Bx)),Xx=typeof iE=="number"?iE:Number(BigInt(iE));if(Xx!==0)return Nx<0n&&Bx<0n?Xx>0?-1:1:Xx<0?-1:1}else{const iE=Zx>=0?Nx:Nx>>ox(0-Zx),Xx=Zx<=0?Bx:Bx>>ox(Zx);if(iE<Xx)return-1;if(Xx<iE)return 1}const jx=Zx<=0?Nx:cx(Nx,Zx),Hx=Zx>=0?Bx:cx(Bx,0-Zx);return jx<Hx?-1:jx>Hx?1:0}c.lessThan=function(Ix,Px){return gx(Ix,Px)<0},c.greaterThan=function(Ix,Px){return gx(Ix,Px)>0},c.equal=function(Ix,Px){return gx(Ix,Px)===0},c.round=function(Ix,Px){return lx(Ix,Px)},c.prototype.toString=function(){//! https://tc39.es/ecma262/#sec-number.prototype.tostring
if(t!==10)throw new Error;if(arguments.length!==0)throw new RangeError("not implemented");const Ix=c.BigDecimal(this);let Px=Ix.significand.toString();//! https://tc39.es/ecma262/#sec-numeric-types-number-tostring
if(Px==="0")return"0";let Nx="";Px.charCodeAt(0)===45&&(Px=Px.slice(1),Nx="-");const Bx=on(Ix.exponent,Px.length-1),$x=typeof Bx=="number"?Bx:Number(BigInt(Bx));return $x>-7&&$x<21?Nx+mx(Px,$x+1-Px.length,0,0):Nx+mx(Px,-(Px.length-1),0,0)+"e"+($x>=0?"+":"")+Bx.toString()};function mx(Ix,Px,Nx,Bx){let $x=Ix.length-1+Px;$x<=-1&&(Ix=String("0".repeat(0-$x))+Ix,Bx+=0-$x,$x=0);let Vx=Ix.length-($x+1),Gx=Ix.length;for(;Vx>Nx&&Gx>=Bx&&Gx>=1&&0+Ix.charCodeAt(Gx-1)===48;)Gx-=1,Vx-=1;Gx<Ix.length&&(Ix=Ix.slice(0,Gx));const Zx=Math.max(Math.max(0,Nx-Vx),Math.max(0,Bx-Ix.length));return Zx!==0&&(Ix+=String("0".repeat(Zx))),Ix.length>$x+1?Ix.slice(0,$x+1)+"."+Ix.slice($x+1):Ix}function px(Ix,Px,Nx){const Bx=on(Px,Ix.length-1),$x=typeof Bx=="number"?Bx:Number(BigInt(Bx));return $x<-6||$x>=+Nx?mx(Ix,-(Ix.length-1),0,Nx)+"e"+($x<0?"":"+")+Bx.toString():mx(Ix,typeof Px=="number"?Px:Number(BigInt(Px)),0,Nx)}function hx(Ix,Px,Nx){return mx(Ix,Px,Nx,0)}function vx(Ix,Px,Nx){const Bx=on(Px,Ix.length-1),$x=typeof Bx=="number"?Bx:Number(BigInt(Bx));return mx(Ix,-(Ix.length-1),0,Nx+1)+"e"+($x<0?"":"+")+Bx.toString()}c.prototype.toFixed=function(Ix,Px="half-up"){if(Math.floor(Ix)!==Ix)throw new RangeError;const Nx=t===10?d(this.significand,on(this.exponent,Ix)):c.multiply(c.BigDecimal(10n**BigInt(Ix)),this),Bx=Nx.significand<0n?"-":"",$x=c.round(Nx,{maximumFractionDigits:0,roundingMode:Px}),Vx=c.abs($x);return Bx+hx(c.toBigInt(Vx).toString(),0-Ix,Ix)};function yx(Ix,Px,Nx){if(t===10){const rE=c.round(c.abs(Ix),{maximumSignificantDigits:Px,roundingMode:Nx});return{significand:rE.significand.toString(),exponent:BigInt(rE.exponent)}}const Bx=function(rE,uE,aE){if(uE<0n)return c.divide(c.BigDecimal(1),Bx(rE,-BigInt(uE),aE),aE);let Kx;for(;uE>=1n;)uE%2n===0n?(rE=c.multiply(rE,rE,aE),uE/=2n):(Kx=Kx==null?rE:c.multiply(rE,Kx,aE),uE-=1n);return Kx??c.BigDecimal(1)},$x=function(rE,uE,aE){if(!c.greaterThan(rE,c.BigDecimal(0)))throw new RangeError;if(c.lessThan(rE,c.BigDecimal(1)))return 0n-$x(c.divide(c.BigDecimal(1),rE,aE),uE,aE);const Kx=Ex(rE),ME=BigInt(Math.max(0,ar(Kx)-l)),IE=BigInt(Math.floor(Number(Kx>>ME)/Math.log2(uE)*a))<<ME;return IE<3n?IE:IE+$x(c.divide(rE,Bx(c.BigDecimal(uE),IE,aE),aE),uE,aE)},Vx=Ix.significand<0n?-1:1,Gx=function(rE){return c.round(Vx>=0?rE:c.unaryMinus(rE),{maximumFractionDigits:0,roundingMode:Nx})};if(c.equal(Ix,c.BigDecimal(0)))return{significand:"0",exponent:0n};const Zx=c.BigDecimal(10),jx=Math.pow(2,Math.ceil(Math.log2(ar(Ct(BigInt(Ix.exponent))+1n)*s)));let Hx={maximumSignificantDigits:Math.max(jx,t===2?32:8),roundingMode:"half-even"},iE,Xx=0n;do{let rE=c.abs(Ix);if(Xx=0n-$x(rE,10,Hx),rE=c.multiply(Bx(Zx,Xx,Hx),rE,Hx),c.lessThan(rE,Zx)||(Xx-=1n,rE=c.divide(rE,Zx,Hx)),c.lessThan(rE,c.BigDecimal(1))&&(Xx+=1n,rE=c.multiply(rE,Zx,Hx)),!c.lessThan(rE,c.BigDecimal(1))&&c.lessThan(rE,Zx))if(Xx+=BigInt(Px-1),Hx.maximumSignificantDigits>(Math.abs(Number(Xx))+Px)*Math.log2(10)+tn(Ix.significand))rE=c.abs(Ix),rE=c.multiply(rE,Bx(Zx,Xx,Hx),Hx),iE=c.toBigInt(c.abs(Gx(rE))).toString();else{rE=c.multiply(rE,Bx(Zx,BigInt(Px-1),Hx),Hx),rE=c.abs(rE);const uE=c.multiply(c.multiply(c.BigDecimal(Ct(Xx)+BigInt(Px)),_x(t,0-Hx.maximumSignificantDigits)),rE);c.equal(Gx(c.add(rE,uE)),Gx(c.subtract(rE,uE)))&&(iE=c.toBigInt(c.abs(Gx(rE))).toString())}Hx={maximumSignificantDigits:Hx.maximumSignificantDigits*2,roundingMode:"half-even"}}while(iE==null);return{significand:iE,exponent:-Xx}}c.prototype.toPrecision=function(Ix,Px="half-up"){const Nx=yx(this,Ix,Px);return(c.lessThan(this,c.BigDecimal(0))?"-":"")+px(Nx.significand,Nx.exponent,Ix)},c.prototype.toExponential=function(Ix,Px="half-up"){const Nx=yx(this,Ix+1,Px);return(c.lessThan(this,c.BigDecimal(0))?"-":"")+vx(Nx.significand,Nx.exponent,Ix)};function Sx(Ix,Px){if(+Ix!==t)throw new RangeError("a should be BASE");return d(1n,Px)}function _x(Ix,Px){return Sx(Ix,Px)}function Ex(Ix){if(Ix.significand===0n)throw new RangeError;return BigInt(tn(Ix.significand))+BigInt(Ix.exponent)}c.abs=function(Ix){return Ix.significand<0n?c.unaryMinus(Ix):Ix},c.sign=function(Ix){return Ix.significand<0n?-1:Ix.significand>0n?1:0},c.max=function(Ix,Px){if(arguments.length>2)throw new RangeError("not implemented");return c.lessThan(Ix,Px)?Px:Ix},c.min=function(Ix,Px){if(arguments.length>2)throw new RangeError("not implemented");return c.greaterThan(Ix,Px)?Px:Ix};function bx(Ix){let Px=1;for(;!c.equal(c.round(Ix,{maximumSignificantDigits:Px,roundingMode:"half-even"}),Ix);)Px*=2;let Nx=Px/2,Bx=Px;for(;Bx-1>Nx;){const $x=Nx+Math.floor((Bx-Nx)/2);c.equal(c.round(Ix,{maximumSignificantDigits:$x,roundingMode:"half-even"}),Ix)?Bx=$x:Nx=$x}return Bx}function Ax(Ix){const Px=Math.floor(Math.log(Math.abs(Ix))/Math.log(2))-1;return Math.abs(Ix)/2**Px>=2?Px+1:Px}function Mx(Ix,Px,Nx){function Bx($x){return Nx==="exp"?Math.ceil(Number(BigInt(c.toBigInt(c.round($x,{maximumFractionDigits:0,roundingMode:"half-even"}))))/Math.log(t)):Nx==="log"?Math.ceil(Math.log2(Math.ceil(Math.max(Number(Ex($x)),1)*Math.log(t)))*s):1}return function($x,Vx){if(c.equal($x,c.BigDecimal(Ix)))return Px($x,{maximumSignificantDigits:1,roundingMode:"half-even"});let Gx=c.BigDecimal(0),Zx=0,jx=c.BigDecimal(0);do{if(Zx>4*(10/t)&&Vx.maximumSignificantDigits!=null&&Vx.roundingMode==="half-even"&&Nx!=="sin"&&Nx!=="cos")throw console.error($x,Vx),new Error;Zx+=1;const Hx={maximumSignificantDigits:Math.ceil(Math.max(Vx.maximumSignificantDigits||Vx.maximumFractionDigits+1+Bx($x)-1,bx($x))*Math.pow(2,Math.ceil((Zx-1)/3)))+2+(t===2?1:0),roundingMode:"half-even"};if(Gx=void 0,t===2&&Math.max(Hx.maximumSignificantDigits+2,bx($x)+1)<=Math.log2(Number.MAX_SAFE_INTEGER+1)){const iE=$x.exponent,Xx=typeof iE=="number"?iE:Number(BigInt(iE)),rE=Number(BigInt($x.significand))*t**Xx;if(Nx!=="sin"&&Nx!=="cos"&&Nx!=="tan"||Math.abs(rE)<=Math.PI/4){const uE=Math[Nx](rE),aE=(Number.MIN_VALUE*1.25>Number.MIN_VALUE?Number.MIN_VALUE:Number.MIN_VALUE*(Number.MAX_SAFE_INTEGER+1)/2)||2**-1022,Kx=Math.abs(uE);Kx<1/0&&Kx>aE&&(Gx=c.BigDecimal(uE))}}Gx==null&&(Gx=Px($x,Hx)),jx=c.multiply(Sx(t,-BigInt(Hx.maximumSignificantDigits)),c.abs(Gx))}while(!c.equal(c.round(c.subtract(Gx,jx),Vx),c.round(c.add(Gx,jx),Vx)));return c.round(Gx,Vx)}}function Rx(Ix,Px){let Nx=c.add(Ix,c.BigDecimal(1)),Bx=Ix;for(;c.lessThan(Bx,Nx);)Nx=Bx,Bx=c.divide(c.add(c.divide(Ix,Bx,Px),Bx),c.BigDecimal(2),Px);return Bx}c.log=Mx(1,function(Px,Nx){if(!c.greaterThan(Px,c.BigDecimal(0)))throw new RangeError;const Bx={maximumSignificantDigits:Nx.maximumSignificantDigits+Math.ceil(Math.log2(Nx.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};{//! ln(f * BASE**k) = ln(f) + k * ln(BASE), where (1/BASE) <= f <= BASE
let iE=Ex(Px)-1n,Xx=c.multiply(Sx(t,-iE),Px),rE=c.round(c.multiply(Xx,Xx),{maximumSignificantDigits:3,roundingMode:"half-even"});if(c.greaterThan(rE,Sx(t,1n))&&(iE+=1n,Xx=c.multiply(Sx(t,-1n),Xx)),c.lessThan(rE,Sx(t,-1n))&&(iE-=1n,Xx=c.multiply(Sx(t,1n),Xx)),iE!==0n)return c.add(c.log(Xx,Bx),c.multiply(c.BigDecimal(2n*iE),c.log(Rx(c.BigDecimal(t),Bx),Bx)))}//! log(x) = log((1 + g) / (1 - g)) = 2*(g + g**3/3 + g**5/5 + ...)
const $x=c.divide(c.subtract(Px,c.BigDecimal(1)),c.add(Px,c.BigDecimal(1)),Bx);let Vx=1,Gx=c.BigDecimal(1),Zx=Gx,jx=c.BigDecimal(0);const Hx=c.multiply($x,$x,Bx);for(;!c.equal(jx,Zx);)Vx+=2,Gx=c.multiply(Gx,c.BigDecimal(Vx-2)),Gx=c.multiply(Gx,Hx),Gx=c.divide(Gx,c.BigDecimal(Vx),Bx),jx=Zx,Zx=c.add(Zx,Gx,Bx);return c.multiply(c.multiply(c.BigDecimal(2),$x),Zx)},"log");function Cx(Ix){return c.divide(c.BigDecimal(Math.floor(Ix*(Number.MAX_SAFE_INTEGER+1))),c.add(c.BigDecimal(Number.MAX_SAFE_INTEGER),c.BigDecimal(1)),{maximumSignificantDigits:Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*s+.5),roundingMode:"half-even"})}c.exp=Mx(0,function(Px,Nx){//! k = round(x / ln(BASE));
//! exp(x) = exp(x - k * ln(BASE) + k * ln(BASE)) = exp(x - k * ln(BASE)) * BASE**k
const Bx={maximumSignificantDigits:Nx.maximumSignificantDigits+Math.ceil(Math.log2(Nx.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};if(!c.equal(Px,c.BigDecimal(0))){const jx=Cx(Math.log(t)),Hx=c.round(c.divide(Px,jx,{maximumSignificantDigits:Math.max(Number(Ex(Px)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!c.equal(Hx,c.BigDecimal(0))){const iE=c.log(c.BigDecimal(t),{maximumSignificantDigits:Bx.maximumSignificantDigits+Number(Ex(Hx)),roundingMode:"half-even"}),Xx=c.round(c.divide(Px,iE,{maximumSignificantDigits:Math.max(Number(Ex(Px)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!c.equal(Xx,c.BigDecimal(0))){const rE=c.subtract(Px,c.multiply(Xx,iE));return c.multiply(Sx(t,c.toBigInt(Xx)),c.exp(rE,Bx))}}}let $x=0,Vx=c.BigDecimal(1),Gx=Vx,Zx=c.BigDecimal(0);for(;!c.equal(Zx,Gx);)$x+=1,Vx=c.multiply(Vx,Px),Vx=c.divide(Vx,c.BigDecimal($x),Bx),Zx=Gx,Gx=c.add(Gx,Vx,Bx);return Gx},"exp");function Lx(Ix,Px){const Nx=Cx(Math.PI/4);if(c.greaterThan(c.abs(Ix),Nx)){const Bx={maximumSignificantDigits:Px.maximumSignificantDigits+bx(Ix)+Number(Ex(Ix))+1+Math.ceil(42*s),roundingMode:"half-even"},$x=c.multiply(c.BigDecimal(2),c.atan(c.BigDecimal(1),Bx)),Vx=c.round(c.divide(Ix,$x,{maximumSignificantDigits:Math.max(Number(Ex(Ix)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});return{remainder:c.subtract(Ix,c.multiply(Vx,$x)),k:(Number(c.toBigInt(Vx)%4n)+4)%4}}return{remainder:Ix,k:0}}function qx(Ix,Px,Nx){const Bx=Lx(Ix,Px),$x=Bx.remainder,Vx=(Bx.k+(Nx?3:0))%4,Gx={maximumSignificantDigits:Px.maximumSignificantDigits+Math.ceil(Math.log2(Px.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};let Zx=Vx===1||Vx===3?1:0,jx=c.BigDecimal(1),Hx=jx,iE=c.BigDecimal(0);const Xx=c.multiply($x,$x);for(;!c.equal(iE,Hx);)Zx+=2,jx=c.multiply(jx,Xx),jx=c.divide(jx,c.BigDecimal(-Zx*(Zx-1)),Gx),iE=Hx,Hx=c.add(Hx,jx,Gx);return(Vx===1||Vx===2)&&(Hx=c.unaryMinus(Hx)),Vx===1||Vx===3?c.multiply($x,Hx):Hx}return c.sin=Mx(0,function(Ix,Px){return qx(Ix,Px,!0)},"sin"),c.cos=Mx(0,function(Ix,Px){return qx(Ix,Px,!1)},"cos"),c.atan=Mx(0,function(Ix,Px){if(c.greaterThan(c.abs(Ix),c.BigDecimal(1))){const Hx={maximumFractionDigits:Px.maximumSignificantDigits+1,roundingMode:"half-even"},iE=c.multiply(c.atan(c.BigDecimal(1),Hx),c.BigDecimal(2));return c.multiply(c.BigDecimal(c.lessThan(Ix,c.BigDecimal(0))?-1:1),c.subtract(iE,c.atan(c.divide(c.BigDecimal(1),c.abs(Ix),Hx),Hx)))}const Nx={maximumSignificantDigits:Px.maximumSignificantDigits+Math.ceil(Math.log2(Px.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};let Bx=0;const $x=c.multiply(Ix,Ix),Vx=c.add(c.BigDecimal(1),$x);let Gx=c.divide(c.BigDecimal(1),Vx,Nx),Zx=Gx,jx=c.BigDecimal(0);for(;!c.equal(jx,Zx);)Bx+=1,Gx=c.multiply(Gx,c.multiply(c.BigDecimal(2*Bx),$x)),Gx=c.divide(Gx,c.multiply(c.BigDecimal(2*Bx+1),Vx),Nx),jx=Zx,Zx=c.add(Zx,Gx,Nx);return c.multiply(Ix,Zx)},"atan"),c.sqrt=function(Ix,Px){if(c.lessThan(Ix,c.BigDecimal(0)))throw new RangeError;if(c.equal(Ix,c.BigDecimal(0)))return Ix;const Nx=Ex(Ix)/2n,Bx=Sx(t,Nx),$x=c.multiply(Ix,Sx(t,-(2n*Nx))),Vx=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*s)-1,Gx=c.toNumber(c.round(c.multiply($x,Sx(t,Vx)),{maximumFractionDigits:0,roundingMode:"half-even"}))/t**Vx,Zx=Math.sqrt(Gx),jx=2*(Px.maximumSignificantDigits||Px.maximumFractionDigits+Math.ceil(bx(Ix)/2)||1);let Hx=c.multiply(c.BigDecimal(Math.sign(Zx)*Math.floor(Math.abs(Zx)*t**Vx+.5)),Sx(t,-Vx));const iE=function(Xx,rE){return c.divide(c.add($x,c.multiply(Xx,Xx)),c.multiply(c.BigDecimal(2),Xx),rE)};for(let Xx=Math.max(Vx-1,1);Xx<=jx;Xx*=2)Hx=iE(Hx,{maximumSignificantDigits:Xx,roundingMode:"half-even"});return Hx=iE(Hx,Px),c.multiply(Hx,Bx)},c},BigDecimal=factory(10),BigFloat=factory(2),BASE=2;function MakeMath(t,n){function a(){}a.nextAfter=function(l,u){if(u==null)throw new RangeError;if(u.roundingMode!=="floor"&&u.roundingMode!=="ceil")throw new RangeError;var c=t.round(l,u);if(!t.equal(l,c))return c;var d=function(Ct,ar,en,tn){var on=t.multiply(t.BigDecimal(tn.roundingMode==="floor"?-1:1),s(-ar)),fn=t.multiply(t.abs(en),on);return t.add(Ct,fn,tn)};if(u.maximumFractionDigits!=null)return d(l,u.maximumFractionDigits,t.BigDecimal(1),u);if(u.maximumSignificantDigits!=null)return d(l,u.maximumSignificantDigits,l,u);throw new RangeError};var s=function(l){var u=t.round(t.BigDecimal(n),{maximumSignificantDigits:1,roundingMode:"half-even"}),c=u;if(l<0)return t.divide(t.BigDecimal(1),s(-l),null);for(var d=t.BigDecimal(1);l>=1;)l%2===0?(c=t.multiply(c,c),l=l/2):(d=d==null?c:t.multiply(c,d),l=l-1);return d};return a}const BigDecimalMath=MakeMath(BigDecimal,10),BigFloatMath=MakeMath(BigFloat,2);function Interval(t,n){if(BigFloat.greaterThan(t,n))throw new TypeError;this.a=t,this.b=n}Interval._rounding=function(t,n){return t==null?null:t.maximumFractionDigits!=null?{maximumFractionDigits:t.maximumFractionDigits,roundingMode:n}:{maximumSignificantDigits:t.maximumSignificantDigits,roundingMode:n}};Interval.unaryMinus=function(t){return new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a))};Interval.add=function(t,n,a=null){return new Interval(BigFloat.add(t.a,n.a,Interval._rounding(a,"floor")),BigFloat.add(t.b,n.b,Interval._rounding(a,"ceil")))};Interval.subtract=function(t,n,a=null){return new Interval(BigFloat.subtract(t.a,n.b,Interval._rounding(a,"floor")),BigFloat.subtract(t.b,n.a,Interval._rounding(a,"ceil")))};Interval._multiply=function(t,n,a,s,l){const u=BigFloat.sign,c=u(t),d=u(n),Ct=u(a),ar=u(s);if(c>=0)return Ct>=0?l(t,a,n,s):ar<=0?l(n,a,t,s):l(n,a,n,s);if(d<=0)return ar<=0?l(n,s,t,a):Ct>=0?l(t,s,n,a):l(t,s,t,a);if(Ct>=0)return l(t,s,n,s);if(ar<=0)return l(n,a,t,a);var en=l(t,s,t,a),tn=l(n,a,n,s);return new Interval(BigFloat.min(en.a,tn.a),BigFloat.max(en.b,tn.b))};Interval.multiply=function(t,n,a=null){var s=Interval._rounding(a,"floor"),l=Interval._rounding(a,"ceil");if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var u=BigFloat.multiply(t.a,n.a);return new Interval(BigFloat.round(u,s),BigFloat.round(u,l))}var c=function(d,Ct,ar,en){return new Interval(BigFloat.multiply(d,Ct,s),BigFloat.multiply(ar,en,l))};return Interval._multiply(t.a,t.b,n.a,n.b,c)};Interval.divide=function(t,n,a){var s=Interval._rounding(a,"floor"),l=Interval._rounding(a,"ceil");if(BigFloat.sign(n.a)<=0&&BigFloat.sign(n.b)>=0){if(BigFloat.equal(n.a,n.b))throw new RangeError;return"CANNOT_DIVIDE"}if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var u=BigFloat.divide(t.a,n.a,s),c=BigFloat.subtract(t.a,BigFloat.multiply(n.a,u));return new Interval(u,BigFloat.equal(c,BigFloat.BigFloat(0))?u:BigFloatMath.nextAfter(u,l))}var d=function(Ct,ar,en,tn){return new Interval(BigFloat.divide(Ct,tn,s),BigFloat.divide(en,ar,l))};return Interval._multiply(t.a,t.b,n.a,n.b,d)};Interval.sqrt=function(t,n){if(BigFloat.sign(t.a)<0&&BigFloat.sign(t.b)>=0)return"CANNOT_DIVIDE";if(BigFloat.equal(t.a,t.b)){var a=BigFloat.sqrt(t.a,Interval._rounding(n,"floor")),s=BigFloat.equal(BigFloat.multiply(a,a),t.b)?a:BigFloatMath.nextAfter(a,Interval._rounding(n,"ceil"));return new Interval(a,s)}return Interval._map(t,function(l,u){return BigFloat.sqrt(l,u)},n)};Interval.exp=function(t,n){return Interval._map(t,BigFloat.exp,n)};Interval.log=function(t,n){return BigFloat.sign(t.a)<=0&&BigFloat.sign(t.b)>0?"CANNOT_DIVIDE":BigFloat.equal(t.a,t.b)&&BigFloat.equal(t.b,BigFloat.BigFloat(1))?new Interval(BigFloat.BigFloat(0),BigFloat.BigFloat(0)):Interval._map(t,BigFloat.log,n)};Interval.atan=function(t,n){return Interval._map(t,BigFloat.atan,n)};Interval._mapValue=function(t,n,a){var s=n(t,Interval._rounding(a,"floor")),l=s,u=s;return BigFloat.equal(t,BigFloat.BigFloat(0))||(u=BigFloatMath.nextAfter(s,Interval._rounding(a,"ceil"))),new Interval(l,u)};Interval._map=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n,a);var s=n(t.a,Interval._rounding(a,"floor")),l=n(t.b,Interval._rounding(a,"ceil"));return new Interval(s,l)};Interval._trigonometry=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n==="sin"?BigFloat.sin:BigFloat.cos,a);var s=Object.assign({},Interval._rounding(a,"floor"),{roundingMode:"half-even"}),l=BigFloat.multiply(BigFloat.BigFloat(8),BigFloat.atan(BigFloat.BigFloat(1),s));if(!BigFloat.lessThan(BigFloat.subtract(t.b,t.a),l))return new Interval(BigFloat.BigFloat(-1),BigFloat.BigFloat(1));var u=function(dn,Cn){return n==="sin"?BigFloat.sin(dn,Cn):BigFloat.cos(dn,Cn)},c=BigFloat.divide(BigFloat.add(t.a,t.b),BigFloat.BigFloat(2),s),d=function(dn){var Cn=BigFloat.multiply(BigFloat.divide(BigFloat.BigFloat(dn),BigFloat.BigFloat(4),s),l),Rn=BigFloat.round(BigFloat.divide(BigFloat.subtract(c,Cn,s),l,s),{maximumFractionDigits:0,roundingMode:"half-even"});return BigFloat.add(BigFloat.multiply(l,Rn),Cn)},Ct=d(n==="sin"?3:2),ar=d(n==="sin"?1:0);const en=Interval._rounding(a,"floor"),tn=Interval._rounding(a,"ceil");var on=BigFloat.lessThan(Ct,t.a)?u(t.a,en):BigFloat.greaterThan(Ct,t.b)?u(t.b,en):BigFloat.BigFloat(-1),fn=BigFloat.lessThan(ar,t.a)?u(t.a,tn):BigFloat.greaterThan(ar,t.b)?u(t.b,tn):BigFloat.BigFloat(1);return new Interval(on,fn)};Interval.sin=function(t,n){return Interval._trigonometry(t,"sin",n)};Interval.cos=function(t,n){return Interval._trigonometry(t,"cos",n)};Interval.fromIntegers=function(t,n){var a=BigFloat.BigFloat(t),s=BigFloat.BigFloat(n);return console.assert(!BigFloat.lessThan(s,a)),new Interval(a,s)};Interval.abs=function(t){return BigFloat.lessThan(t.a,BigFloat.BigFloat(0))?BigFloat.lessThan(t.b,BigFloat.BigFloat(0))?new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a)):new Interval(BigFloat.BigFloat(0),BigFloat.max(BigFloat.unaryMinus(t.a),t.b)):t};Interval.exponentiate=function(t,n,a){for(var s=void 0;n>=1;)n===2*Math.floor(n/2)?(t=Interval.multiply(t,t,a),n=Math.floor(n/2)):(s=s==null?t:Interval.multiply(t,s,a),n-=1);return s};Interval.formatToDecimal=function(t,n){var a=BigFloat.sign(t.a),s=BigFloat.sign(t.b),l=(a||s)===(s||a)?a||s:0;t=Interval.abs(t);var u=function(ar,en){return n.fractionDigits!=null?ar.toFixed(n.fractionDigits,en):ar.toPrecision(n.significantDigits,en)},c=u(t.a,"half-up"),d=BigFloat.equal(t.a,t.b)?c:u(t.b,"half-down"),Ct=function(ar){return!/[^0\.]/.test(ar)};if(c===d&&(l!==0||Ct(c)&&Ct(d)))return(l<0?"-":l>0&&Ct(c)&&Ct(d)?"+":"")+c};Interval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};var calcAt=function(t,n,a){for(var s=evaluateExpression(Expression.ZERO,a),l=t.getDegree();l>=0;l--){s=Interval.multiply(s,n,a);var u=evaluateExpression(t.getCoefficient(l),a);if(u==="CANNOT_DIVIDE"||u==null)return u;s=Interval.add(s,u,a)}return s},evaluateExpression=function(t,n){if(t instanceof Expression.Integer){var a=t.value;return Interval.fromIntegers(a,a)}else if(t instanceof Expression.NthRoot){var s=t.a,a=t.n,l=evaluateExpression(s,n);return l==="CANNOT_DIVIDE"||l==null?l:a==2?Interval.sqrt(l,n):Interval.exp(Interval.divide(Interval.log(l,n),Interval.fromIntegers(a,a),n),n)}else if(t instanceof Expression.BinaryOperation){if(t instanceof Expression.Addition&&Expression.has(t,Expression.PolynomialRootSymbol)){var u=Expression.getVariable(t),c=Polynomial.toPolynomial(t,u);if(c.hasIntegerCoefficients()){var d=evaluateExpression(u,n);return calcAt(c,d,n)}}if(t.a===Expression.E&&t.getS()==="^"){var Ct=evaluateExpression(t.b,n);return Ct==="CANNOT_DIVIDE"||Ct==null?Ct:Interval.exp(Ct,n)}var s=evaluateExpression(t.a,n);if(s==="CANNOT_DIVIDE"||s==null)return s;var Ct=evaluateExpression(t.b,n);if(Ct==="CANNOT_DIVIDE"||Ct==null)return Ct;var ar=t.getS();if(ar==="+")return Interval.add(s,Ct,n);if(ar==="-")return Interval.subtract(s,Ct,n);if(ar==="*")return Interval.multiply(s,Ct,n);if(ar==="/")return Interval.divide(s,Ct,n);if(ar==="^"){if(!(t.b instanceof Expression.Integer)||t.b.toNumber()<=0||t.b.toNumber()>Number.MAX_SAFE_INTEGER){var en=Interval.log(s,n);return en==="CANNOT_DIVIDE"?en:Interval.exp(Interval.multiply(en,Ct,n),n)}var a=t.b.toNumber();return Interval.exponentiate(s,a,n)}}else if(t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot){var tn=(t instanceof Expression.ExpressionPolynomialRoot?t.root:t).toDecimal(n.maximumSignificantDigits||n.maximumFractionDigits);const fn=tn.a.getDenominator().multiply(tn.b.getDenominator()).value;return Interval.divide(Interval.fromIntegers(tn.b.getDenominator().multiply(tn.a.getNumerator()).value,tn.a.getDenominator().multiply(tn.b.getNumerator()).value),Interval.fromIntegers(fn,fn),n)}else{if(t===Expression.E)return Interval.exp(Interval.fromIntegers(1,1),n);if(t===Expression.PI)return Interval.multiply(Interval.fromIntegers(4,4),Interval.atan(Interval.fromIntegers(1,1),n));if(t instanceof Expression.Function){var on=evaluateExpression((t instanceof Expression.Sin||t instanceof Expression.Cos)&&t.a instanceof Expression.Radians?t.a.value:t.a,n);if(on==="CANNOT_DIVIDE"||on==null)return on;if(t instanceof Expression.Sin)return Interval.sin(on,n);if(t instanceof Expression.Cos)return Interval.cos(on,n);if(t instanceof Expression.Logarithm)return Interval.log(on,n);if(t instanceof Expression.Arctan)return Interval.atan(on,n)}else if(t instanceof Expression.ExpressionWithPolynomialRoot)return evaluateExpression(t.e,n)}},decimalToString=function(t){return t.replace(/[eE]/g,"*10^")},complexToString=function(t,n){return t+(/^[\-\+]/.test(n)?n.replace(/^([\-\+])[\s\S]+/g,"$1"):t!==""?"+":"")+(n!=="1"&&n!=="-1"?n.replace(/^[\-\+]/g,"")+"*i":"i")},toDecimalStringInternal$1=function(t,n,a,s){if(a=a||decimalToString,s=s||complexToString,n.fractionDigits==null&&n.significantDigits==null||n.fractionDigits!=null&&n.significantDigits!=null)throw new RangeError;if(n.fractionDigits!=null&&(n.fractionDigits<0||n.fractionDigits>Number.MAX_SAFE_INTEGER)||n.significantDigits!=null&&(n.significantDigits<1||n.significantDigits>Number.MAX_SAFE_INTEGER)||n.roundingMode!=null)throw new RangeError;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex)){var l=t.getNumerator(),u=t.getDenominator();if((u instanceof Expression.Integer||Expression.has(u,Expression.PolynomialRootSymbol)||Expression.has(u,Expression.ExpressionPolynomialRoot)||Expression._isPositive(u))&&(l instanceof Expression.Addition||l instanceof Expression.Multiplication||l instanceof Expression.Complex)){const dn=Expression.getComplexNumberParts(l);let Cn=dn.real,Rn=dn.imaginary;if(!Rn.equals(Expression.ZERO)){Cn=Cn.divide(u),Rn=Rn.divide(u);var c=Cn.equals(Expression.ZERO)?"":toDecimalStringInternal$1(Cn,n,a,s),d=toDecimalStringInternal$1(Rn,n,a,s);return s(c,d)}}}if(t instanceof Expression.Integer||t instanceof Expression.Division&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Integer)return a(primeFactor._rationalNumberToDecimalString(t.getNumerator().toBigInt(),t.getDenominator().toBigInt(),n));console.assert(BASE%2===0);var Ct=void 0,ar=1;//!new
//!
for(var en=Expression.has(t,Expression.Function)||Expression.has(t,Expression.Exponentiation);Ct==null;){if(ar>6e4&&ar>(n.fractionDigits||n.significantDigits)*4*Math.log2(10)){debugger;throw new TypeError}const dn=en?{maximumSignificantDigits:ar}:{maximumFractionDigits:ar-1};var tn=evaluateExpression(t,dn);if(tn==null)return;if(tn!=="CANNOT_DIVIDE"&&(Ct=Interval.formatToDecimal(tn,n)),tn!=="CANNOT_DIVIDE"&&Ct==null&&n.fractionDigits!=null&&ar===1){var on=BigFloat.max(BigFloat.abs(tn.a),BigFloat.abs(tn.b)).toFixed(0).length;ar=Math.max(Math.ceil((on+n.fractionDigits+1)*Math.log2(10)/2),2)}if(tn!=="CANNOT_DIVIDE"&&Ct==null&&n.significantDigits!=null&&ar===1&&BigFloat.sign(tn.a)===BigFloat.sign(tn.b)){var fn=BigFloat.log(BigFloat.min(BigFloat.abs(tn.a),BigFloat.abs(tn.b)),{maximumSignificantDigits:1,roundingMode:"half-even"}).toFixed(0).length;ar=Math.max(Math.ceil(fn*Math.log2(10)/2),1)}ar*=2}return a(Ct)};toDecimalStringInternal$1.testables={BigDecimalMath,BigDecimal,BigFloat,Interval};function gcdOfSafeIntegers(t,n){for(t=Math.abs(t),n=Math.abs(n);n!==0;){const a=t-Math.floor(t/n)*n;t=n,n=a}return t}Math.gcd=function(t,n){if(typeof t!="number"&&typeof n!="number")throw new RangeError;const a=1073741823;if((t|0)===t&&Math.abs(t)<=a&&(n|0)===n&&Math.abs(n)<=a){let s=Math.abs(t),l=Math.abs(n);for(;l!==0;){const u=s%l;s=l,l=u}return s}return gcdOfSafeIntegers(t,n)};function integerMin(t,n){return t.compareTo(n)<0?t:n}function bigIntGCDWrapper2(t,n){if(Math.abs(SmallBigInt.toNumber(t))>=1/0&&Math.abs(SmallBigInt.toNumber(n))>=1/0){var a=integerMin(Expression.Integer.fromBigInt(t).abs(),Expression.Integer.fromBigInt(n).abs()).bitLength();if(a=Math.pow(2,Math.ceil(Math.log2(a))),a>=128*1024&&a>lastMaxSize){lastMaxSize=a;var s=new TypeError("big size of gcd "+a);globalThis.onerror!=null&&globalThis.onerror(s.message,"",0,0,s)}}return gcd$1(SmallBigInt.BigInt(t),SmallBigInt.BigInt(n))}function bigIntGCDWrapper(t,n){return typeof t=="number"&&typeof n=="number"?Math.gcd(t,n):bigIntGCDWrapper2(t,n)}var pow=function(t,n,a){if(!(n>=0))throw new RangeError;if(n>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return n<1?a:2*Math.floor(n/2)!==n?pow(t,n-1,a.multiply(t)):pow(t.multiply(t),Math.floor(n/2),a)},binomialCoefficient=function(t,n){return n===0?Expression.ONE:t.multiply(binomialCoefficient(t.subtract(Expression.ONE),n-1)).divide(Integer$2.fromNumber(n))},matrixInN=function(t,n){var a=-1;//!
var s=t.map(function(lx,cx,fx){return cx===fx?lx:Expression.ZERO}),l=t.subtract(s);if(l.isNilpotent()&&s.multiply(l).eql(l.multiply(s))){for(var u=0;u<s.cols();u+=1)if(s.e(u,u).equals(Expression.ZERO)){for(var c=1;!l.pow(c).map(function(cx,fx,gx){return fx!==u?Expression.ZERO:cx}).isZero();){if(c>=l.cols())throw new TypeError("assertion");c+=1}a=Math.max(a,c-1)}for(var d=Matrix$1.Zero(l.cols(),l.cols()),u=0;u<l.cols()&&(u===0||!l.isZero());u+=1){var Ct=s.map(function(fx,gx,mx){return gx===mx?fx.equals(Expression.ZERO)?Expression.ZERO:fx.pow(n.subtract(Expression.Integer.fromNumber(u))):Expression.ZERO});d=d.add(Ct.multiply(l.pow(u)).scale(binomialCoefficient(n,u)))}var Rn=new Expression.Matrix(d);if(a>0){var ar=[];ar.push(new ExpressionWithCondition(Rn,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var en=1;en<=a;en+=1)ar.push(new ExpressionWithCondition(new Expression.Matrix(t.pow(en)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(en)))));return new Expression.Cases(ar)}return a!==-1?new ExpressionWithCondition(Rn,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):Rn}//!
for(var tn=function(lx){return lx instanceof Expression.Symbol||lx instanceof Exponentiation$1&&getBase(lx)instanceof Integer$2&&getBase(lx).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(lx).inverse())?!0:isConstant$1(lx)||isConstant$1(lx.divide(Expression.E))},on=t,fn="aa",dn=t.map(function(lx,cx,fx){return new Expression.Symbol(fn+"_("+cx+","+fx+")")}),Cn=dn.map(function(lx,cx,fx){return Expression.ZERO}),Rn=void 0,ax=-1;!dn.eql(Cn);)ax+=1,Cn=dn,Rn=dn.multiply(on),dn=Rn.map(function(lx,cx,fx){var gx=dn.e(cx,fx)instanceof Expression.Symbol&&dn.e(cx,fx).symbol.slice(0,fn.length)===fn;if(!gx)return dn.e(cx,fx);if(!(lx instanceof Integer$2)){var mx=Polynomial$1.toPolynomial(lx.getNumerator(),n).getDegree(),px=dn.e(cx,fx),hx=Polynomial$1.toPolynomial(lx.getNumerator(),px),vx=hx.getLeadingCoefficient().divide(lx.getDenominator());if(mx!==0&&hx.getDegree()===1&&on.e(cx,fx).equals(Expression.ZERO)&&(vx instanceof Integer$2||vx instanceof Expression.Complex||tn(vx))){var yx=vx.pow(n).divide(vx.pow(Integer$2.fromNumber(mx+1))).multiply(binomialCoefficient(n.subtract(Expression.ONE),mx)),Sx=lx.subtract(vx.multiply(px)).divide(yx);if(Sx instanceof Integer$2)return console.log("!",lx.toString()),Sx.multiply(vx.pow(n).divide(vx.pow(Integer$2.fromNumber(mx+2))).multiply(binomialCoefficient(n.subtract(Expression.ONE),mx+1)))}}if(lx.equals(dn.e(cx,fx)))return on.e(cx,fx);if(dn.e(cx,fx)instanceof Expression.Symbol&&dn.e(cx,fx).symbol===fn+"_("+cx+","+fx+")"&&!lx.equals(Expression.ZERO)){var px=dn.e(cx,fx),hx=Polynomial$1.toPolynomial(lx.getNumerator(),px),vx=hx.getLeadingCoefficient().divide(lx.getDenominator()),_x=hx.getCoefficient(0).divide(lx.getDenominator());if(!Expression.has(_x,Expression.Symbol)&&lx.equals(vx.multiply(px).add(_x))){var Ex=vx.equals(Expression.ONE)?_x.multiply(n.subtract(Expression.TWO)):_x.multiply(Expression.ONE.subtract(vx.pow(n.subtract(Expression.TWO))).divide(Expression.ONE.subtract(vx)));return vx.pow(n.subtract(Expression.TWO)).multiply(on.e(cx,fx)).add(Ex)}}if(dn.e(cx,fx)instanceof Expression.Symbol&&dn.e(cx,fx).symbol===fn+"_("+cx+","+fx+")"&&lx.equals(Expression.ZERO)){//!TODO: conditions.push(iteration); //? n > 0 && n <= 3 , n > 3 - ?
return a=ax,Expression.ZERO}var bx=lx.subtract(dn.e(cx,fx));if(bx instanceof Integer$2)return on.e(cx,fx).add(bx.multiply(n.subtract(Expression.TWO)));var Ax=function(Rx){if(!tn(Rx))return Expression.ZERO;var Cx=dn.e(cx,fx);return Rx.pow(n.subtract(Expression.ONE)).add(Rx.multiply(Cx))};if(!lx.equals(Expression.ZERO)){var px=dn.e(cx,fx),hx=Polynomial$1.toPolynomial(lx.getNumerator(),px),vx=hx.getLeadingCoefficient().divide(lx.getDenominator()),Mx=vx;if(lx.equals(Ax(Mx)))return Mx.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(on.e(cx,fx)));var Mx=vx.negate();if(lx.equals(Ax(Mx)))return Mx.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(on.e(cx,fx)))}return dn.e(cx,fx)});for(var en=0;en<dn.rows();en+=1)for(var ox=0;ox<dn.cols();ox+=1){var sx=dn.e(en,ox);if(sx instanceof Expression.Symbol&&sx.symbol.slice(0,fn.length)===fn)return}if(a>0){var ar=[];ar.push(new ExpressionWithCondition(new Expression.Matrix(Rn),Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var en=1;en<=a;en+=1)ar.push(new ExpressionWithCondition(new Expression.Matrix(on.pow(en)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(en)))));return new Expression.Cases(ar)}var sx=new Expression.Matrix(Rn);return a!==-1?new ExpressionWithCondition(sx,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):sx},isPositiveQuick=function(t){return t instanceof Integer$2?t.compareTo(Expression.ZERO)>0:t instanceof NthRoot?isPositiveQuick(t.a):(t instanceof Multiplication$1||t instanceof Division$1)&&!t.a.equals(Expression.ONE.negate())&&!t.b.equals(Expression.ONE.negate())?isPositiveQuick(t.a)&&isPositiveQuick(t.b)||isPositiveQuick(t.a.negate())&&isPositiveQuick(t.b.negate()):t instanceof Addition$1?isPositiveQuick(t.a)&&isPositiveQuick(t.b):t instanceof Expression.PolynomialRootSymbol?isPositiveQuick(t.interval.a)&&isPositiveQuick(t.interval.b):t instanceof Expression.Multiplication&&t.a.equals(Expression.ONE.negate())&&t.b instanceof Expression.PolynomialRootSymbol?!isPositiveQuick(t.b.interval.a)&&!isPositiveQuick(t.b.interval.b):t instanceof Expression.Abs},isPositive=function(t){if(t.equals(Expression.ZERO))return!1;if(isPositiveQuick(t))return!0;if(isPositiveQuick(t.negate()))return!1;if(t instanceof Expression.Symbol&&!(t instanceof Expression.PolynomialRootSymbol)&&!(t instanceof Expression.ExpressionPolynomialRoot)&&!(t instanceof Expression.ExpressionWithPolynomialRoot))return t===Expression.PI||t===Expression.E;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex))return!1;if(t instanceof Addition$1||t instanceof Expression.Cos||t instanceof Expression.Sin||t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication||t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot||t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.Division){var n=toDecimalStringInternal$1(t,{significantDigits:1}),a=n==null?NaN:Number(n.replace(/\((\d+)\)/g,"$1").replace(/\*10\^/g,"e"));if(!Number.isNaN(a))return a>0}if(t instanceof Expression.ExponentiationOfMinusOne)return!1;if(t instanceof Expression.Exponentiation&&getExponent(t)instanceof Expression.Integer)return isPositive(t.a);if(Expression.has(t,Expression.Symbol))return!1;if(t instanceof Expression.Logarithm)return isPositive(t.a.subtract(Expression.ONE));throw new TypeError("!"+t)};Expression._isPositive=isPositive;var isIntegerOrN=function(t){return t instanceof Integer$2||t instanceof Expression.Symbol&&(t.symbol==="n"||t.symbol==="k")?!0:t instanceof Expression.Addition||t instanceof Expression.Multiplication||t instanceof Expression.Exponentiation?isIntegerOrN(t.a)&&isIntegerOrN(t.b):!1},isGoodPolynomial=function(t){if(t instanceof Expression.Exponentiation)return!1;var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(n instanceof Expression.Symbol){var a=Polynomial$1.toPolynomial(t,n);if(a.getDegree()===1&&a.getCoefficient(0)instanceof Expression.Integer&&a.getCoefficient(1)instanceof Expression.Integer&&a.getContent().equals(Expression.ONE))return!0}return!1};const isMatrixSymbolTranspose=function(t){if(t instanceof Expression.Exponentiation&&getBase(t)instanceof Expression.MatrixSymbol){const n=getExponent(t);if(n instanceof Expression.Symbol&&n.symbol==="T"||n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&n.b.symbol==="T")return!0}return!1};Expression.prototype.powExpression=function(t){var n=this;if(n===Expression.INFINITY&&Expression.isScalar(t)){if(Expression.isReal(t)){if(t.compareTo(Expression.ONE)>0)throw new RangeError("NotSupportedError");if(t.compareTo(Expression.ONE)===0)return Expression.ONE;if(t.compareTo(Expression.ONE.negate())>0)return Expression.ZERO;throw new RangeError("NotSupportedError")}var a=Expression.getComplexNumberParts(t);if(Expression.isReal(a.real)&&Expression.isReal(a.imaginary)){var s=a.real._pow(2).add(a.imaginary._pow(2));if(s.compareTo(Expression.ONE)<0)return Expression.ZERO}}if(n instanceof Expression.Symbol&&(n.symbol==="t"||n.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.transpose();if(n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&(n.b.symbol==="t"||n.b.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.pow(n.a).transpose();//!
if(n instanceof Division$1&&n.a instanceof Integer$2&&n.b instanceof Integer$2&&t!==Expression.E&&!(t instanceof Expression.Symbol)&&!Expression.has(t,Expression.Symbol)){typeof hit=="function"&&hit({powExpression:n.toString()});var l=n.b.toNumber(),u=n.a.truncatingDivide(n.b),c=n.a.subtract(u.multiply(n.b));return u.equals(Expression.ZERO)?t.pow(c)._nthRoot(l):t.pow(u).multiply(t.pow(c)._nthRoot(l))}//!
if(t instanceof Expression.Integer&&n===Expression.CIRCLE)return new Expression.Degrees(t);//!new 2017-05-08
{if(t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&integerPrimeFactor(t).compareTo(t)===0){var d=function(yx){if(yx instanceof Expression.Symbol)return!0;if(yx instanceof Addition$1)return d(yx.a)&&d(yx.b);if((yx instanceof Integer$2||yx instanceof NthRoot)&&(t===Expression.E||t instanceof Integer$2&&yx instanceof NthRoot))return!0;if(yx instanceof Multiplication$1||yx instanceof Exponentiation$1){for(var Sx of yx.factors()){var _x=getBase(Sx);if(!(_x instanceof Integer$2||_x instanceof NthRoot||_x instanceof Expression.Symbol)&&!d(_x))return!1}return!0}if((t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0)&&yx instanceof Division$1&&yx.b instanceof Integer$2){//!new 2019-08-08
return d(yx.a)}return!1};if(n.getNumerator()instanceof Addition$1&&(n.getNumerator().a.isNegative()||n.getNumerator().b.isNegative()))return Expression.ONE.divide(t.pow(n.getNumerator().a.negate().divide(n.getDenominator())).divide(t.pow(n.getNumerator().b.divide(n.getDenominator()))));if(d(n)){if(n.isNegative())return Expression.ONE.divide(new Expression.Exponentiation(t,n.negate()));//!new
return n instanceof Expression.ExpressionWithPolynomialRoot?t.pow(n.upgrade()):new Expression.Exponentiation(t,n)}}if(t instanceof Integer$2&&t.compareTo(Expression.ONE)>0){if(n instanceof Addition$1&&(n.a instanceof Integer$2||n.b instanceof Integer$2))return t.pow(n.a).multiply(t.pow(n.b));var Ct=integerPrimeFactor(t);if(Ct.equals(t)){if(n instanceof Division$1&&n.b instanceof Integer$2){var l=n.b.toNumber();if(l>=2&&l<=Number.MAX_SAFE_INTEGER)return t.pow(n.a)._nthRoot(l)}//!new 2020-18-01
if(n instanceof Division$1&&isIntegerOrN(n.a)&&isIntegerOrN(n.b)&&t.compareTo(Expression.ONE)>0)return new Expression.Exponentiation(t,n);//!
}else if(!Expression.has(n,Expression.Logarithm)){var ar=primeFactor._countTrailingZeros(t.toBigInt(),Ct.toBigInt());return Ct.pow(n.multiply(Integer$2.fromNumber(ar))).multiply(t.divide(Ct._pow(ar)).pow(n))}}}//!
{if(t instanceof Integer$2&&t.equals(Expression.ONE))return Expression.ONE;if(t instanceof Division$1||t instanceof Multiplication$1&&(n.getDenominator().equals(Expression.ONE)||isPositive(t.a)||isPositive(t.b))){if(t instanceof Division$1)return t.a.pow(n).divide(t.b.pow(n));if(t instanceof Multiplication$1)return t.a.pow(n).multiply(t.b.pow(n))}}var en=n.getNumerator(),tn=n.getDenominator();if(t===Expression.E&&en instanceof Multiplication$1&&en.a instanceof Expression.Complex&&en.a.real.equals(Expression.ZERO)&&en.b instanceof Expression.Symbol){var on=n.multiply(Expression.I.negate());return on.cos().add(Expression.I.multiply(on.sin()))}if(t===Expression.E&&getConstant$1(en)instanceof Expression.Complex&&tn instanceof Expression.Integer){var fn=getConstant$1(en);if(fn.real.equals(Expression.ZERO)){var on=n.multiply(Expression.I.negate());return on=Expression.has(n,Expression.Symbol)?on:new Expression.Radians(on),on.cos().add(Expression.I.multiply(on.sin()))}return t.pow(fn.real.divide(tn)).multiply(t.pow(fn.imaginary.multiply(Expression.I).multiply(en.divide(fn)).divide(tn)))}if(t===Expression.E&&en instanceof Expression.Addition&&tn instanceof Expression.Integer)return t.pow(en.a.divide(tn)).multiply(t.pow(en.b.divide(tn)));if(t instanceof Expression.Matrix&&(isIntegerOrN(n)||n===Expression.INFINITY)){if(!t.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var dn=matrixInN(t.matrix,n);if(dn!=null){var Cn=t.matrix.map(function(yx,Sx,_x){return Sx===_x?yx:Expression.ZERO}),Rn=t.matrix.subtract(Cn);return t.matrix.isDiagonal()||Rn.isNilpotent()&&Cn.multiply(Rn).eql(Rn.multiply(Cn))&&Expression.callback!=null&&Expression.callback(new Expression.Event("DpN-matrix-pow",t)),dn}//! 2018-08-26
{var ax=Expression.getEigenvalues(t.matrix);if(ax.length===t.matrix.cols()){var ox=Expression.getEigenvectors(t.matrix,ax);if(ox.filter(yx=>yx!=null).length===t.matrix.cols()){var a=Expression.diagonalize(t.matrix,ax,ox),sx=a.L,lx=matrixInN(sx,n);if(lx!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-diagonalization",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",t)),new Expression.Matrix(a.T).multiply(lx).multiply(new Expression.Matrix(a.T_INVERSED))}else{var a=Expression.getFormaDeJordan(t.matrix,ax),cx=matrixInN(a.J,n);if(cx!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-Jordan-normal-form",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",t)),new Expression.Matrix(a.P).multiply(cx).multiply(new Expression.Matrix(a.P_INVERSED))}}}//!
}if(Expression.ExponentiationOfMinusOne!=null&&(t instanceof Integer$2&&t.compareTo(Expression.ZERO)<0||t.equals(Expression.E.negate()))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n).multiply(t.negate().pow(n));if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n.a).multiply(Expression.ONE.negate().pow(n.b)).multiply(t.negate().pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(Expression.ExponentiationOfImaginaryUnit!=null){if(t instanceof Expression.Complex&&t.equals(Expression.I.negate()))return Expression.ONE.negate().pow(n).multiply(t.negate().pow(n));if(t instanceof Expression.Complex&&(t.equals(Expression.I)||t.real.compareTo(Expression.ZERO)>0&&t.primeFactor().equals(t))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfImaginaryUnit(t,n);if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&!t.imaginary.equals(Expression.ONE)){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return t.imaginary.pow(n).multiply(Expression.I.pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex){var fx=t.primeFactor();return t.divide(fx).pow(n).multiply(fx.pow(n))}if(t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Expression.Symbol&&(n.getNumerator().symbol==="n"||n.getNumerator().symbol==="k")||t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Addition$1)return t.pow(Expression.ONE.divide(n.getDenominator())).pow(n.getNumerator())}if(t===Expression.E&&n instanceof Expression.Matrix){if(!n.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var ax=Expression.getEigenvalues(n.matrix);if(ax.length===n.matrix.cols()){var a=Expression.getFormaDeJordan(n.matrix,ax),Cn=a.J.map(function(bx,Ax,Mx){return Ax===Mx?bx:Expression.ZERO}),Rn=a.J.map(function(bx,Ax,Mx){return Ax!==Mx?bx:Expression.ZERO}),gx=function(bx){for(var Ax=Matrix$1.Zero(bx.cols(),bx.cols()),Mx=Ax,Rx=Matrix$1.I(bx.cols()),Cx=0,Lx=1;!Rx.eql(Ax);){var qx=Rx.scale(Expression.ONE.divide(Integer$2.fromNumber(Lx)));Mx=Mx.add(qx),Rx=Rx.multiply(bx),Cx+=1,Lx*=Cx}return Mx};return Expression.callback!=null&&Expression.callback(new Expression.Event("exponential-using-Jordan-canonical-form",n)),new Expression.Matrix(a.P.multiply(Cn.map(function(bx,Ax,Mx){return Ax===Mx?Expression.E.pow(bx):Expression.ZERO}).multiply(gx(Rn))).multiply(a.P_INVERSED))}}//!2019-04-22
if(t instanceof NthRoot&&t.a instanceof Integer$2)return t.a.pow(n.divide(Expression.Integer.fromNumber(t.n)));{if(t===Expression.E&&isConstant$1(n)&&!has$2(n,Expression.Complex)&&!has$2(n,Expression.Logarithm))return new Expression.Exponentiation(t,n);if((t instanceof Expression.Symbol||Expression.has(t,Expression.Symbol))&&n instanceof Expression.Division&&n.getDenominator()instanceof Integer$2)return t.pow(n.getNumerator())._nthRoot(n.getDenominator().toNumber());if(t instanceof Expression.Symbol&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n);if(t===Expression.E&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Exponentiation$1&&getBase(t)===Expression.E)return getBase(t).pow(getExponent(t).multiply(n));if(isGoodPolynomial(t)&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n)}if(t instanceof Expression.Matrix&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Expression.Matrix&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer)return t.pow(n.a).pow(n.b);if(t instanceof Expression.Matrix&&n instanceof Expression.Division){if(n.getNumerator().equals(Expression.ONE)&&n.getDenominator()instanceof Expression.Symbol&&(n.getDenominator().symbol==="n"||n.getDenominator().symbol==="k"))return t._nthRoot(n.getDenominator());if(isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return t.pow(n.getNumerator()).pow(Expression.ONE.divide(n.getDenominator()))}if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k")){var mx=QuadraticInteger.toQuadraticInteger(t);if(mx!=null&&Number(mx.a.toString())>0&&mx.D>0&&(mx.isValid()||!0)){if(Number(mx.b.toString())>0)return new Expression.ExponentiationOfQuadraticInteger(t,n);if(Number(mx.b.toString())<0){var px=mx.conjugate().toExpression();return t.multiply(px).pow(n).divide(px.pow(n))}}if(mx!=null&&Number(mx.a.toString())<0)return Expression.ONE.negate().pow(n).multiply(mx.toExpression().negate().pow(n))}{if(isIntegerOrN(n)){if(n instanceof Addition$1){for(var hx of n.summands())if(hx.isNegative())return t.pow(n.subtract(hx)).divide(t.pow(hx.negate()))}if(n.isNegative())return Expression.ONE.divide(t.pow(n.negate()));if(Expression.isConstant(t)&&!getConstant$1(n).equals(Expression.ONE))return t.pow(getConstant$1(n)).pow(n.divide(getConstant$1(n)));var vx=t instanceof Expression.Symbol||t instanceof Expression.Addition&&!(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos));if(vx)return new Expression.Exponentiation(t,n)}if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(t).getNumerator())&&isIntegerOrN(getExponent(t).getDenominator())||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t))&&isIntegerOrN(n)||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t).inverse())&&isIntegerOrN(n.inverse()))return getBase(t).pow(getExponent(t).multiply(n))}if(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos))return Expression._replaceBySinCos(Expression._replaceSinCos(t).pow(n));if(t===Expression.E&&n instanceof Expression.Logarithm)return n.a;if(t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Integer$2&&n.b instanceof Expression.Logarithm||t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Symbol&&n.b instanceof Expression.Logarithm)return t.pow(n.b).pow(n.a);if(t instanceof Expression.Integer&&Expression.has(n,Expression.Logarithm))return Expression.E.pow(t.logarithm().multiply(n));//!new 2020-12-11
if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.TWO)>=0&&isIntegerOrN(n))return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2022-07-26
if(t===Expression.E&&n instanceof Expression.ComplexConjugate&&n.a instanceof Expression.Symbol)return new Expression.Exponentiation(t,n);throw new RangeError("NotSupportedError")};Expression.prototype.compare4Addition=function(t){var n=this;if(n instanceof Integer$2&&t instanceof Integer$2)return n.compareTo(t);if(n instanceof Expression.Symbol&&t instanceof Integer$2)return 1;if(n instanceof Integer$2&&t instanceof Expression.Symbol)return-1;if(n instanceof Expression.Symbol&&t instanceof Expression.Symbol)return n.symbol<t.symbol?-1:t.symbol<n.symbol?1:0;//!
if(n instanceof Expression.Matrix&&t instanceof MatrixSymbol)return 1;if(n instanceof MatrixSymbol&&t instanceof Expression.Matrix)return-1;if(n instanceof Expression.Matrix&&t instanceof Expression.Matrix)return 0;//!new 2016-12-17
if(n instanceof Addition$1||t instanceof Addition$1)return Addition$1.compare4Addition(n,t);//!new 2016-10-09
if(n instanceof Multiplication$1||t instanceof Multiplication$1)return Multiplication$1.compare4Addition(n,t);//!new 2018-10-11
if(n instanceof Integer$2&&t instanceof Expression.Function)return-1;//!new 2018-11-12
if(n instanceof Division$1&&t instanceof Division$1)return n.a.compare4Addition(t.a)||n.b.compare4Addition(t.b);if(n instanceof Expression&&t instanceof Division$1)return 1;if(n instanceof Division$1&&t instanceof Expression||n instanceof Expression.Matrix)return-1;if(t instanceof Expression.Matrix)return 1;//!2019-02-18
if(n instanceof Integer$2&&t instanceof Expression.Complex)return-1;if(n instanceof Expression.Complex&&t instanceof Integer$2)return 1;//!
if(n.equals(t)){return 0;//!
}if(n instanceof Expression.Exponentiation||t instanceof Expression.Exponentiation)return getBase(n).compare4Addition(getBase(t))||0-getExponent(n).compare4Addition(getExponent(t));//!new 2017-02-10
if(t instanceof Expression.Symbol)return-1;//!
throw new RangeError};var compare$1=function(t,n){return t.compare4Addition(n)},compare4Multiplication=function(t,n){return t.compare4Multiplication(n)},getBase=function(t){return t instanceof Exponentiation$1?t.a:t},getExponent=function(t){return t instanceof Exponentiation$1?t.b:Expression.ONE},getConstant$1=function(t,n=void 0){if(t instanceof Integer$2)return t;if(t instanceof Expression.Complex)return t;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return t}else if(t instanceof Multiplication$1){var a=void 0,s=t;for(var l of s.factors()){var u=getConstant$1(l,n);a=a==null?u:u.multiply(a)}if(a!=null)return a}else if(t instanceof Addition$1){var a=void 0;for(var s of t.summands()){var u=getConstant$1(s,n);a=a==null?u:complexGCD(u,a)}if(a!=null)return a}return Expression.ONE},getTerm=function(t,n){if(!(t instanceof Integer$2)){{if(t instanceof Expression.Complex)return;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return}else if(t instanceof Multiplication$1){var a=[];for(var s of t.factors()){var l=getTerm(s,n);l!=null&&a.push(l)}for(var u=void 0,c=a.length-1;c>=0;c-=1)u=u==null?a[c]:new Multiplication$1(u,a[c]);return u}else if(t instanceof Addition$1)return t.divide(getConstant$1(t))}return t}};Expression.getConstant=getConstant$1;var multiplyByInteger=function(t,n){return t.compareTo(Expression.ZERO)===0?t:t.compareTo(Expression.ONE)===0?n:new Multiplication$1(t,n)};Expression.prototype.multiplyExpression=function(t){var n=this;if(t instanceof Expression&&n instanceof Multiplication$1)return t.multiply(n.a).multiply(n.b);if(t instanceof Multiplication$1&&n instanceof Expression){var a=compare4Multiplication2(t.b,n);return a===0?t.a.multiply(t.b.multiply(n)):a>0?t.a.multiply(n).multiply(t.b):new Multiplication$1(t,n)}//!
//!
var a=0;if(t instanceof Integer$2&&n instanceof Expression.Symbol)return multiplyByInteger(t,n);if(t instanceof Expression.Symbol&&n instanceof Integer$2)return multiplyByInteger(n,t);if(t instanceof Expression.Symbol&&n instanceof Expression.Symbol)return a=compare4Multiplication(t,n),a===0?t.pow(Expression.TWO):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Integer$2&&n instanceof Exponentiation$1)return multiplyByInteger(t,n);if(t instanceof Exponentiation$1&&n instanceof Integer$2)return multiplyByInteger(n,t);//!new 2022-06-20
if((getBase(t)instanceof Expression.MatrixSymbol||getBase(n)instanceof Expression.MatrixSymbol)&&(a=compare4Multiplication(getBase(t),getBase(n)),a===0&&(getExponent(t).equals(new Expression.Symbol("T"))||getExponent(n).equals(new Expression.Symbol("T")))))return new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Expression.Symbol)return a=compare4Multiplication(getBase(t),n),a===0?n.pow(getExponent(t).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Expression.Symbol&&n instanceof Exponentiation$1)return a=compare4Multiplication(t,getBase(n)),a===0?t.pow(getExponent(n).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Exponentiation$1)return a=compare4Multiplication(getBase(t),getBase(n)),a===0?getBase(t).pow(getExponent(t).add(getExponent(n))):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof SquareRoot&&n instanceof SquareRoot){if(t.a instanceof Integer$2&&n.a instanceof Exponentiation$1)return new Multiplication$1(t,n);var s=t.a.gcd(n.a);return s.multiply(t.a.divide(s).multiply(n.a.divide(s)).squareRoot())}if(t instanceof NthRoot&&t.n===3&&n instanceof NthRoot&&n.n===3)return t.a.multiply(n.a)._nthRoot(3);if(t instanceof NthRoot&&n instanceof NthRoot){//!2021-02-02 - hack
if(t.a instanceof Integer$2&&!(n.a instanceof Integer$2)&&t.n<n.n&&getVariable(n.a)._pow(2).gcd(t.a).equals(t.a)&&Expression.isConstant(t)&&Expression.isConstant(n))return n.multiply(t);//!
var l=Math.gcd(t.n,n.n);if(!(t.a instanceof Integer$2)&&(!(n.a instanceof Integer$2)||!t.a._pow(2).gcd(n.a).equals(Expression.ONE)||getVariable(t.a)._pow(2).gcd(n.a).equals(getVariable(t.a)._pow(2)))||!t.a.gcd(n.a).equals(Expression.ONE)){var u=Expression.pow(t.a,n.n/l).multiply(Expression.pow(n.a,t.n/l)),c=t.n/l*n.n;return u._nthRoot(c)}return!(t.a instanceof Integer$2)&&t.n===2&&n.a instanceof Integer$2&&n.n===4&&!(getConstant$1(t.a.getNumerator()).multiply(n.a)._nthRoot(n.n)instanceof NthRoot)?t.a.multiply(n.a._nthRoot(2))._nthRoot(2):t.n<n.n?new Multiplication$1(t,n):t.n>n.n?new Multiplication$1(n,t):t.a.multiply(n.a)._nthRoot(t.n)}//!
if(t instanceof MatrixSymbol&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&n instanceof MatrixSymbol)return new Multiplication$1(t,n);if(has$2(t,MatrixSymbol)&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&has$2(n,MatrixSymbol))return new Multiplication$1(t,n);//!
if(t instanceof Integer$2&&n instanceof Expression){if(t.compareTo(Expression.ZERO)===0)return t;if(t.compareTo(Expression.ONE)===0)return n}if(t instanceof Expression&&n instanceof Integer$2){if(n.compareTo(Expression.ZERO)===0)return n;if(n.compareTo(Expression.ONE)===0)return t}var d=t instanceof Expression.Complex&&n instanceof Expression.ExponentiationOfImaginaryUnit?-1:t instanceof Expression.ExponentiationOfImaginaryUnit&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n));if(d===0)return getBase(t).pow(getExponent(t).add(getExponent(n)));if(d<0)return new Multiplication$1(t,n);if(d>0)return new Multiplication$1(n,t)};function Iterator(){}Object.defineProperty(Iterator.prototype,"done",{get:function(){return this.value==null}});Iterator.prototype[globalThis.Symbol.iterator]=function(){return this};function TermFactorsIterator(t){this.value=void 0,this.e=t,this.hasPolynomialRoot=!1}TermFactorsIterator.prototype=Object.create(Iterator.prototype);TermFactorsIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e instanceof Integer$2||this.e instanceof Expression.Complex||this.e instanceof Expression.ExpressionPolynomialRoot?null:this.e,this.hasPolynomialRoot=this.e instanceof Expression.ExpressionPolynomialRoot,this.e=this.e instanceof Multiplication$1?this.e.a:void 0,this};function termFactors(t){return new TermFactorsIterator(t)}var compare4Addition=function(t,n){for(var a=termFactors(t),s=termFactors(n),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=0-compare$1(getBase(l),getBase(u));if(c===0&&(c=compare$1(getExponent(l),getExponent(u))),c!==0)return c;l=a.next().value,u=s.next().value}for(;l==null&&a.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(u);)u=s.next().value;for(;u==null&&s.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(l);)l=a.next().value;//!new 2020-02-13
if(l instanceof Expression.Matrix||u instanceof Expression.Matrix)return n instanceof Integer$2&&t instanceof Multiplication$1?1:t instanceof Integer$2&&n instanceof Multiplication$1?-1:l!=null&&a.next().value!=null?1:u!=null&&s.next().value!=null?-1:0;//!
return l!=null?1:u!=null?-1:0},addSimilar=function(t,n){if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return t.add(n);for(var a=getConstant$1(t),s=getConstant$1(n),l=termFactors(getTerm(t)),u=termFactors(getTerm(n)),c=l.next().value,d=u.next().value,Ct=Expression.ONE,ar=!1;c!=null||d!=null;){var en=null;if(c instanceof Expression.Matrix&&c.matrix.isScalar()&&isScalar(c.matrix.e(0,0))&&!c.matrix.e(0,0).equals(Expression.ZERO)&&d instanceof Expression.Matrix&&d.matrix.isScalar()&&isScalar(d.matrix.e(0,0))&&!d.matrix.e(0,0).equals(Expression.ZERO)&&c.matrix.rows()===d.matrix.rows()&&c.matrix.cols()===d.matrix.cols()&&!c.equals(d)){var en=function(on,fn){return on.matrix.e(0,0).multiply(fn).multiply(on.inverse())};return addSimilar(en(c,t),en(d,n))}else if(!ar&&(c instanceof Expression.Matrix||d instanceof Expression.Matrix)&&(c==null||d==null||!c.equals(d)))ar=!0,en=(c==null?a:c.multiply(a)).add(d==null?s:d.multiply(s)),a=Expression.ONE,s=Expression.ONE;else{if(!c.equals(d))return null;en=c}Ct=en.multiply(Ct);//!TODO: depends on the iteration order !!!
c=l.next().value,d=u.next().value}return ar||(Ct=a.add(s).multiply(Ct)),Ct};Expression.getComplexNumberParts=function(t){if(t instanceof Expression.Division){var n=Expression.getComplexNumberParts(t.getNumerator());return{real:n.real.divide(t.getDenominator()),imaginary:n.imaginary.divide(t.getDenominator())}}if(!Expression.has(t,Expression.Complex))return{real:t,imaginary:Expression.ZERO};var a=[],s=[];for(var l of t.summands()){var u=void 0;for(let Ct of l.factors())u==null&&Ct instanceof Expression.Complex&&(u=Ct);if(u==null)a.push(l);else if(u.real.equals(Expression.ZERO))s.push(l.multiply(Expression.I.negate()));else{var c=null;if(l!==u)for(var d of l.factors())d!==u&&(c=c==null?d:c.multiply(d));c==null?(a.push(u.real),s.push(u.imaginary)):(a.push(c.multiply(u.real)),s.push(c.multiply(u.imaginary)))}}return{real:_sum(a),imaginary:_sum(s)}};Expression.prototype.addExpression=function(t){var n=this;if(t.equals(Expression.ZERO))return n;if(n.equals(Expression.ZERO))return t;//!2019-02-16
if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return t.a.add(a).multiply(t.b)}else if(t instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return Expression.ONE.add(a).multiply(t)}if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(n.a).multiply(n.b)}else if(n instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(Expression.ONE).multiply(n)}//!2019-02-16
//!new 2019-09-30
//!new 2020-12-26
if((has2(t,Expression.Complex)||has2(n,Expression.Complex))&&(has2(t,Expression.ExpressionPolynomialRoot)||has2(n,Expression.ExpressionPolynomialRoot))){var s=Expression.getComplexNumberParts(t),l=Expression.getComplexNumberParts(n),u=s.real.add(l.real),c=s.imaginary.add(l.imaginary);if(c.equals(Expression.ZERO))return u;if(!(c instanceof Expression.Addition))return u.equals(Expression.ZERO)?c.multiply(Expression.I):!has2(u,Expression.ExpressionPolynomialRoot)&&!has2(c,Expression.ExpressionPolynomialRoot)?u.add(c.multiply(Expression.I)):new Expression.Addition(u,c.multiply(Expression.I))}//!
for(var d=t.summands(),Ct=n.summands(),ar=d.next().value,en=0,tn=Ct.next().value,on=[];ar!=null&&tn!=null;){var fn=compare4Addition(ar,tn);if(fn<0)on.push(ar),ar=d.next().value;else if(fn>0)on.push(tn),tn=Ct.next().value;else{if(has2(ar,Expression.Matrix)||has2(tn,Expression.Matrix)){var dn=addSimilar(ar,tn);dn!=null?dn.equals(Expression.ZERO)||on.push(dn):(on.push(ar),on.push(tn))}else{const ox=getConstant$1(ar,!0),sx=getConstant$1(tn,!0),lx=getTerm(ar,!0)||Expression.ONE,cx=getTerm(tn,!0)||Expression.ONE,fx=(lx.equals(cx)?ox:ox.multiply(lx.divide(cx))).add(sx),gx=cx===Expression.ONE?fx:fx instanceof Expression.Addition?new Expression.Multiplication(fx,cx):fx.multiply(cx);en=0,gx.equals(Expression.ZERO)||(Expression.has(gx,Expression.ExpressionPolynomialRoot)?Expression.has(ar,Expression.ExpressionPolynomialRoot)?(ar=gx,en=1):(tn=gx,en=2):on.push(gx))}en!==1&&(ar=d.next().value),en!==2&&(tn=Ct.next().value)}}for(;ar!=null;)on.push(ar),ar=d.next().value;for(;tn!=null;)on.push(tn),tn=Ct.next().value;if(on.length===0)return Expression.ZERO;for(var Cn=on[on.length-1],Rn=on.length-2;Rn>=0;Rn-=1){var ax=on[Rn];Cn=new Addition$1(Cn,ax)}return Cn};var divideByInteger=function(t,n){if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");var a=[];for(var s of t.summands()){var l=Expression.ONE,u=void 0;for(var c of s.factors()){var d=c;d instanceof Integer$2||d instanceof Expression.Complex||d instanceof Expression.ExpressionPolynomialRoot?u!=null?(console.warn("!"),u=u.multiply(d)):u=d:l===Expression.ONE?l=d:l=d.multiply(l)}if(!(u instanceof Expression.Complex)&&!(u instanceof Integer$2)&&!(u instanceof Expression.ExpressionPolynomialRoot))throw new RangeError;var Ct=null;u instanceof Expression.ExpressionPolynomialRoot?Ct=u.divide(n).multiply(l):Ct=u.truncatingDivide(n).multiply(l),a.push(Ct)}return _sum(a)};Expression.getCoefficients=function(t,n){if(t.equals(Expression.ZERO))return[];var a=[];for(var s of t.summands()){var l=Expression.ZERO,u=Expression.ONE;for(var c of s.factors()){var d=c;for(var Ct of getVariableInternal(d))Ct.v.equals(n)?l=l.add(Ct.e):u=u.multiply(Ct.e===Expression.ONE?Ct.v:Ct.v.pow(Ct.e))}var ar=l.toNumber();a.push({degree:ar,coefficient:u})}a.sort((on,fn)=>fn.degree-on.degree);for(var en=-1,tn=0;tn<a.length;tn+=1){var s=a[tn];(en===-1||s.degree!==a[en].degree)&&(en+=1,a[en]={degree:s.degree,coefficient:[]}),a[en].coefficient.push(s.coefficient)}a.length=en+1;for(var tn=0;tn<a.length;tn+=1)a[tn]={degree:a[tn].degree,coefficient:_sum(a[tn].coefficient)};return a};var getFirstAdditionOperand=function(t){for(var n=t;n instanceof Addition$1;)n=n.a;return n},getLastMultiplicationOperand=function(t){for(var n=t;n instanceof Multiplication$1;)n=n.b;return n};function VIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.v=t}VIterator.prototype=Object.create(Iterator.prototype);VIterator.prototype.next=function(){return this.value=this.v,this.v=void 0,this};function VariablesIterator(t,n){if(n==null)throw new TypeError;this.value=void 0,this.v=t,this.additions=n}VariablesIterator.prototype=Object.create(Iterator.prototype);VariablesIterator.prototype.next=function(){var t=this.additions.next().value,n=null;if(t==null)n=null;else if(t instanceof Expression.Symbol)n={v:new Exponentiation$1(this.v,t),e:Expression.ONE};else if(t instanceof Expression.NthRoot){//!new 2019-11-30
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Expression.Exponentiation){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Multiplication$1&&t.a instanceof Integer$2)n={v:new Exponentiation$1(this.v,t.b),e:t.a};else if(t instanceof Multiplication$1)n={v:new Exponentiation$1(this.v,getTerm(t)),e:getConstant$1(t)};else if(t instanceof Integer$2)n={v:this.v,e:t};else if(t instanceof Expression.Division&&t.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
n={v:this.v,e:t}}else if(t instanceof Expression.Division&&t.a instanceof NthRoot&&t.b instanceof Integer$2){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t.getNumerator()),e:Expression.ONE.divide(t.getDenominator())}}else if(t instanceof Expression.Division&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
this.v instanceof Integer$2?n={v:new Exponentiation$1(this.v,t.a.b),e:t.divide(t.a.b)}:n={v:this.v,e:t}}else if(t instanceof Division$1&&t.b instanceof Integer$2){var a=getTerm(t.a);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else if(t instanceof Division$1&&t.a instanceof Integer$2&&t.b instanceof Expression.Symbol&&(this.v instanceof Integer$2||this.v instanceof Expression.Symbol||isGoodPolynomial(this.v))){var a=Expression.ONE.divide(t.b);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else throw new RangeError;return this.value=n,this};function NumeratorSummandsIterator(t){this.value=void 0,this.internal=t.getNumerator().summands(),this.denominator=t.getDenominator()}NumeratorSummandsIterator.prototype=Object.create(Iterator.prototype);NumeratorSummandsIterator.prototype.next=function(){var t=this.internal.next().value;return this.value=t==null?null:t.divide(this.denominator),this};var getVariableInternal=function(t){if(t instanceof Expression.ExponentiationOfMinusOne)return new VIterator({v:t,e:Expression.ONE});if(t instanceof Expression.ExponentiationOfImaginaryUnit)return new VIterator({v:t,e:Expression.ONE});var n=getBase(t),a=getExponent(t);//!new 2017-05-08
if(!(a instanceof Integer$2)){var s=new NumeratorSummandsIterator(a);return new VariablesIterator(n,s)}//!
return new VIterator({v:n,e:a})},getVariable=function(t,n=null){if(n==null||!n.avoidNthRoots){for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot)return s}var l=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;//!?
if(!(l instanceof Expression.Complex)&&!(l instanceof Integer$2)&&!(n!=null&&n.avoidNthRoots&&l instanceof NthRoot))return l};Expression.getVariable=getVariable;var lastMaxSize=1,integerGCD=function(t,n){if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&(t=t.imaginary),n instanceof Expression.Complex&&n.real.equals(Expression.ZERO)&&(n=n.imaginary),t instanceof Expression.Integer&&n instanceof Expression.Integer)return Expression.Integer.fromBigInt(bigIntGCDWrapper(t.value,n.value));for(var a=t,s=n;!s.equals(Expression.ZERO);){var l=a.remainder(s);a=s,s=l}return a},complexGCD=function(t,n){if(t instanceof Expression.ExpressionPolynomialRoot){var a=t.root.getAlphaExpression();return complexGCD(Expression.getConstant(a.getNumerator()),n)}if(n instanceof Expression.ExpressionPolynomialRoot){var a=n.root.getAlphaExpression();return complexGCD(t,Expression.getConstant(a.getNumerator()))}var a=integerGCD(t,n);return a instanceof Expression.Complex&&a.real.compareTo(Expression.ZERO)===0?a.imaginary:(a instanceof Expression.Integer&&a.compareTo(Expression.ZERO)<0&&(a=a.negate()),a)},nthRootCommonFactor=function(t,n){if(t instanceof Expression.NthRoot&&n instanceof Expression.NthRoot){var a=t.n/Math.gcd(t.n,n.n)*n.n,s=t.radicand.gcd(n.radicand),l=Math.min(a/t.n,a/n.n),u=Math.gcd(a,l);return s._pow(l/u)._nthRoot(a/u)}return null},gcd=function(t,n,a){if(a==null){//!TODO: (2020-06-13)
return getTerm(t)instanceof Expression.NthRoot&&getTerm(n)instanceof Expression.NthRoot?gcd(getConstant$1(t),getConstant$1(n)).multiply(gcd(t.divide(getConstant$1(t)),n.divide(getConstant$1(n)))):complexGCD(getConstant$1(t,!0),getConstant$1(n,!0))}var s=getReplacement(t,getReplacement(n,a));//!new 2023-03-11
var s=getReplacement(t,getReplacement(n,a,"any"),"any");if(s instanceof Replacement){var l=s.apply(t),u=s.apply(n);if(!l.getDenominator().equals(Expression.ONE)){if(!(l.getDenominator()instanceof Expression.Integer))throw new TypeError;l=l.getNumerator()}if(!u.getDenominator().equals(Expression.ONE)){if(!(u.getDenominator()instanceof Expression.Integer))throw new TypeError;u=u.getNumerator()}var c=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(l,a),Polynomial$1.toPolynomial(u,a)).calcAt(a),d=s.undo(c);return getTerm(d)==null||(d=getTerm(d),console.log("c1",d.toString(),getTerm(d))),d}return s.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(t,a),Polynomial$1.toPolynomial(n,a)).calcAt(a):substitute(substitute(t,a,s,inverseReplacement(s,a)).gcd(substitute(n,a,s,inverseReplacement(s,a))),a,inverseReplacement(s,a),s)},getConjugateFactor=function(t){var n=-1/0;for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot){var l=s.degree;n<l&&(n=l),s.a instanceof Integer$2||(n=1/0)}var u=void 0;for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot){var l=s.degree,c=s.a instanceof Integer$2?s.a:null;if(c==null&&(c=QuadraticInteger.toQuadraticInteger(s.a),c!=null&&u==null)){for(var d=c.primeFactor();d.toExpression()instanceof Expression.SquareRoot;)c=c.truncatingDivide(d),d=c.primeFactor();c=d}if(c==null)throw new TypeError;if(n===1/0&&!(s.a instanceof Integer$2)&&(n=l),n%l===0)if(u==null&&(u=c),c!=null){var Ct=integerGCD(u,c);if(!Ct.isUnit()){u=Ct;//!
}Ct.isUnit()&&!(Ct instanceof Integer$2)&&(u.isUnit()||c.isUnit())&&(u=Ct)}else throw new TypeError}//!new 2020-12-16 - ExpressionParser.parse('1/(x+cbrt(18)+cbrt(12))')
u!=null&&u instanceof Integer$2&&(u=u.primeFactor());//!
return{p:u,degree:n}},getConjugate=function(t){var n=void 0;if(n=Expression.getComplexNumberParts(t),n!=null&&!n.imaginary.equals(Expression.ZERO))return n.real.subtract(n.imaginary.multiply(Expression.I));if(n=Expression.getNthRootConjugate(t),n!=null){if(n.equals(t)&&t instanceof Addition$1)throw new TypeError;return n}};Expression.getConjugate=getConjugate;Expression.getConjugateExpression=function(t){try{var n=Expression.getConjugate(t);return n!=null?Expression.getConjugateExpression(n.multiply(t)):t}catch(a){console.error(a)}return null};var getPolynomialRelativeToNthRoot=function(t,n,a){var s=Polynomial$1.of();for(var l of t.summands()){var u=0,c=Expression.ONE;for(var d of l.factors())if(d instanceof NthRoot&&(a===d.degree||a%d.degree===0&&n instanceof Integer$2)){var Ct=d.a instanceof Integer$2?d.a:null;if(Ct==null&&(Ct=QuadraticInteger.toQuadraticInteger(d.a)),Ct!=null){var ar=0,en=Ct;if(n.isUnit()){if(en.isUnit())for(ar=1,en=en.truncatingDivide(n);en.primeFactor().equals(n);)ar+=1,en=en.truncatingDivide(n);else if(!(en instanceof Integer$2)){var tn=en.truncatingDivide(n);if(!(tn instanceof Expression.Integer)&&Number.isNaN(Number(tn.a.toString())*Number(tn.b.toString())))throw new TypeError;(tn instanceof Expression.Integer||Number(tn.a.toString())*Number(tn.b.toString())>=0)&&(ar=1,en=tn)}}else for(;en.isDivisibleBy(n)&&ar<d.degree;)en=en.truncatingDivide(n),ar+=1;en=en.toExpression(),c=c.multiply(en._nthRoot(d.degree)),u+=ar*(a/d.degree)}else throw new TypeError}else c=c.multiply(d);s=s.add(Polynomial$1.of(c).shift(u))}return s};Expression.getNthRootConjugate=function(t){if(t instanceof Integer$2)return null;if(t instanceof NthRoot)return t._pow(t.n-1);if(t instanceof Multiplication$1&&t.a instanceof Integer$2)return Expression.getNthRootConjugate(t.b);//!2019-10-20 a workaround
if(t instanceof Addition$1&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.a.b instanceof NthRoot&&t.a.b.n===3&&t.b instanceof Multiplication$1&&t.b.a instanceof Integer$2&&t.b.b instanceof NthRoot&&t.b.b.n===3)return t.a._pow(2).subtract(t.a.multiply(t.b)).add(t.b._pow(2));//!
var n=getConjugateFactor(t),a=n.p,s=n.degree;if(a==null)return;var l=getPolynomialRelativeToNthRoot(t,a,s);l=l.divideAndRemainder(Polynomial$1.of(l.getContent()),"throw").quotient;//!new
const u=a.toExpression(),c=Polynomial$1.of(Expression.ONE).shift(s).subtract(Polynomial$1.of(u));return l.modularInverse(c).primitivePart().calcAt(u._nthRoot(s))};Expression.collectLinearEquationVariables=function(t){if(t instanceof Division$1)throw new RangeError;var n=[];for(var a of t.summands()){var s=void 0,l=Expression.ONE,u="";for(var c of a.factors())c instanceof Expression.Symbol&&s==null?s=c:(!(c instanceof Integer$2)&&!(c instanceof NthRoot)&&s==null&&(s=u),l=l.multiply(c));s==null&&(s=u);var d=s===u?"":s.toString();n.push({c:l,v:d})}return n};var has$2=function(t,n){if(t instanceof n)return!0;if(t instanceof BinaryOperation$1){if(t instanceof Addition$1){for(;t instanceof Addition$1;){if(has$2(t.b,n))return!0;t=t.a}return has$2(t,n)}return has$2(t.b,n)?!0:has$2(t.a,n)}return t instanceof Negation?has$2(t.b,n):t instanceof Expression.Function?has$2(t.a,n):!1};Expression.has=has$2;var has2=function(t,n){do{var a=null;t instanceof Addition$1?(a=t.b,t=t.a):(a=t,t=null);do{var s=null;if(a instanceof Multiplication$1?(s=a.b,a=a.a):(s=a,a=null),s instanceof n)return!0}while(a!=null)}while(t!=null);return!1},inverseReplacement=function(t,n){for(var a=n;!t.equals(n);)if(t instanceof Expression.Exponentiation&&t.b instanceof Multiplication$1&&n instanceof Exponentiation$1)a=a.pow(t.b.a.inverse()),t=t.pow(t.b.a.inverse());else if(t instanceof Expression.Exponentiation)a=a.pow(getExponent(t).inverse()),t=getBase(t);else if(t instanceof Addition$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.subtract(t.b),t=t.a}else if(t instanceof Multiplication$1){if(!(t.a instanceof Integer$2))throw new RangeError;a=a.divide(t.a),t=t.b}else if(t instanceof Division$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.multiply(t.b),t=t.a}else if(Expression.E===t||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&getBase(n).equals(t)){//!new 2019-09-23
a=a.pow(getExponent(n)),t=n}else throw new TypeError;return a},h$2=function(t,n,a){for(var s of t.summands())for(var l of s.factors())getBase(a).equals(getBase(l))&&(n=n.lcm(getExponent(l).getDenominator()));return n};Replacement._counter=0;function Replacement(t){this.from=getBase(t),this.to=new Expression.Symbol("$t"+ ++Replacement._counter).pow(getExponent(t).getDenominator())}Replacement.prototype.apply=function(t){var n=this.from,a=this.to,s=getVariable(n),l=Polynomial$1.toPolynomial(n.subtract(a),s);return Expression._map(function(u){if(!Expression.has(u,Expression.Division)){var c=Polynomial$1.toPolynomial(u,s);return c.divideAndRemainder(l).remainder.calcAt(s)}return u},t)};Replacement.prototype.undo1=function(t){var n=this.from,a=this.to,s=getBase(this.to),l=Polynomial$1.toPolynomial(n.subtract(a),s);return Polynomial$1.toPolynomial(t,s).divideAndRemainder(l).remainder.calcAt(s)};Replacement.prototype.undo=function(t){var n=getBase(this.to),a=this.from.pow(getExponent(this.to).inverse());return Expression._map(function(s){return s.equals(n)?a:s},t)};Replacement.prototype.equals=function(){return!0};var getReplacement=function(t,n,a){if(n instanceof Replacement)return n;for(var s of t.summands())for(var l of s.factors())if(l instanceof Expression.Exponentiation&&(Expression.has(l.a,Expression.Symbol)||l.a instanceof Integer$2&&l.a.compareTo(Expression.ONE)>0)&&l.b instanceof Expression.Division){if(getBase(n).equals(l.a))n=new Expression.Exponentiation(l.a,getConstant$1(l.b.b).lcm(getExponent(n).getNumerator()).divide(getExponent(n).getDenominator()));else if(getBase(n)instanceof Expression.Symbol){if(l.a instanceof Expression.Addition&&l.a.a.divide(getBase(n))instanceof Integer$2&&l.a.b instanceof Integer$2&&l.b instanceof Division$1&&l.b.a instanceof Integer$2&&l.b.b instanceof Integer$2){var u=l.b.getDenominator();u=h$2(t,u,l);//!
var c=getBase(n).pow(u).subtract(l.a.b).divide(l.a.a.divide(getBase(n)));return c}else if(a==="any"||a!=null&&a.equals(l.a))return new Replacement(l)}}return n};Expression._getReplacement=getReplacement;var substitute=function(t,n,a,s){if(t.equals(n))return a;if(t instanceof Expression.Exponentiation){if(t.equals(s))return n;if(getBase(t).equals(getBase(s))){//!new 2019-09-23
return n.pow(getExponent(t).divide(getExponent(s)))}}if(t instanceof Expression.Addition)return substitute(t.a,n,a,s).add(substitute(t.b,n,a,s));if(t instanceof Expression.Multiplication)return substitute(t.a,n,a,s).multiply(substitute(t.b,n,a,s));if(t instanceof Expression.Exponentiation){var l=substitute(t.a,n,a,s),u=substitute(t.b,n,a,s);return l instanceof Expression.Exponentiation&&getBase(l).equals(getBase(s))&&getExponent(s).getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)?getBase(l).pow(getExponent(l).multiply(u)):l.pow(u)}//! for sin.js:
return t instanceof Division$1?substitute(t.a,n,a,s).divide(substitute(t.b,n,a,s)):t instanceof Expression.Sin?substitute(t.a,n,a,s).sin():t instanceof Expression.Cos?substitute(t.a,n,a,s).cos():t};Expression._substitute=substitute;Expression.prototype.divideExpression=function(t){var n=this;if(simplifyIdentityMatrixPower){if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)return t.b.equals(n)?t.a:t.a.divide(n).multiply(t.b);if(t instanceof IdentityMatrix)return Expression.ONE.divide(n).multiply(t);if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix)return t.divide(n.a).multiply(n.b);if(n instanceof IdentityMatrix)return t.multiply(n)}if(has$2(n,MatrixSymbol)){//!?
var a=getBase(n)instanceof MatrixSymbol?n.pow(Expression.ONE.negate()):new Expression.Exponentiation(n,Expression.ONE.negate());if(t.equals(Expression.ONE)){if(n instanceof Multiplication$1){//!?
return Expression.callback!=null&&Expression.callback(new Expression.Event("property-inverse-of-multiplication",{matrix:"{{0}}"})),t.multiply(Expression.ONE.divide(n.b).multiply(Expression.ONE.divide(n.a)))}if(n instanceof Addition$1&&!has$2(n,Expression.Matrix)){var s=Expression.simpleDivisor(n);if(s!=null&&!s.equals(Expression.ONE)&&isScalar(s)&&!gcd(s,n).equals(Expression.ONE))return t.multiply(Expression.ONE.divide(s).multiply(Expression.ONE.divide(n.divide(s))))}return a}}if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return new Expression.Matrix(t.matrix.multiply(n.matrix.inverse()));if(t instanceof Expression.Matrix&&n instanceof Expression)return t.multiply(n.inverse());if(t instanceof Expression&&n instanceof Expression.Matrix)return Expression.callback!=null&&Expression.callback(new Expression.Event(n.matrix.getDeterminantEventType("inverse").type,n)),new Expression.Matrix(n.matrix.inverse()).multiply(t);if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");if(t.equals(Expression.ZERO))return Expression.ZERO;if(n.equals(Expression.ONE))return t;//!!! new (2021-04-05)
var l=getTerm(n);if(l instanceof Expression.Exponentiation&&getBase(l)===Expression.E&&getExponent(l)instanceof Expression.ExpressionPolynomialRoot){if(getTerm(t)instanceof Expression.Exponentiation&&getExponent(getTerm(t))instanceof Expression.ExpressionPolynomialRoot&&(t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication)&&(n instanceof Expression.Exponentiation||n instanceof Expression.Multiplication))return getExponent(getTerm(t)).subtract(getExponent(getTerm(n))).exp().multiply(getConstant$1(t).divide(getConstant$1(n)));if(getExponent(getTerm(n)).isNegative())return t.multiply(l.inverse()).divide(n.divide(l))}//!!!
//!!! new (21.12.2013)
{var u=getConjugate(n);if(u!=null){if(u.equals(Expression.ONE)){//!
if(Expression.isConstant(n))return t.multiply(Expression._map(function(fx){return fx instanceof NthRoot?Expression.toPolynomialRoot(fx):fx},n).inverse());//!
throw new TypeError}return u instanceof Expression.Multiplication&&u.a instanceof Expression.Complex&&(u=u.a),t.multiply(u).divide(n.multiply(u))}}if(Expression.has(t,Expression.Complex)){//!new 2017-11-25
var a=Expression.getComplexNumberParts(t);if(a!=null&&!a.imaginary.equals(Expression.ZERO)){var c=a.real,d=a.imaginary,Ct=(c.equals(Expression.ZERO)?n:c.gcd(n)).gcd(d)._abs();return Ct.equals(Expression.ONE)||(t=c.divide(Ct).add(d.divide(Ct).multiply(Expression.I)),n=n.divide(Ct)),n.isNegative()&&(t=t.negate(),n=n.negate()),n.equals(Expression.ONE)?t:new Division$1(t,n)}}//!
//!2020-06-07
if(!getConstant$1(n).equals(n)&&t.divide(getConstant$1(t)).equals(n.divide(getConstant$1(n))))return getConstant$1(t).divide(getConstant$1(n));var ar=n instanceof Integer$2?void 0:getVariable(t);has$2(ar,MatrixSymbol)&&isScalar(n)&&(ar=getVariable(n));//!2019-06-16
if(ar!=null){var en=ar;ar=getVariable(ar);var tn=getReplacement(n,getReplacement(t,ar,en),"any");if(tn instanceof Replacement){var c=tn.apply(t),d=tn.apply(n),on=c.divide(d),fn=tn.undo1(on.getNumerator()),dn=tn.undo1(on.getDenominator());//!new 2023-03-11:
var Ct=fn.gcd(dn);return Ct.equals(Expression.ONE)||(fn=fn.divide(Ct),dn=dn.divide(Ct)),fn=tn.undo(fn),dn=tn.undo(dn),dn.equals(Expression.ONE)?fn:new Expression.Division(fn,dn)}if(!tn.equals(ar)){var Cn=inverseReplacement(tn,ar),c=substitute(t,ar,tn,Cn),d=substitute(n,ar,tn,Cn),Rn=c.divide(d);return c=substitute(Rn.getNumerator(),ar,Cn,tn),d=substitute(Rn.getDenominator(),ar,Cn,tn),d.equals(Expression.ONE)?c:new Expression.Division(c,d)}}var ax=void 0,ox=void 0;if(ar!=null&&(ax=Polynomial$1.toPolynomial(t,ar),ox=Polynomial$1.toPolynomial(n,ar),ax.getDegree()===0&&ox.getDegree()===0&&(ar=void 0)),ar==null){var Ct=complexGCD(getConstant$1(t,!0),getConstant$1(n,!0));if(!Ct.equals(Expression.ONE))return t=divideByInteger(t,Ct),n=divideByInteger(n,Ct),t.divide(n)}else{//!TODO: remove - performance optimization
var Rn=ax.divideAndRemainder(ox,"undefined");if(Rn!=null&&Rn.remainder.equals(Polynomial$1.ZERO))return Rn.quotient.calcAt(ar);//!
var Ct=Polynomial$1.polynomialGCD(ax,ox);if(Ct.getDegree()!==0||!Ct.getLeadingCoefficient().equals(Expression.ONE)){var sx=ax.divideAndRemainder(Ct,"throw").quotient,lx=ox.divideAndRemainder(Ct,"throw").quotient;return sx.calcAt(ar).divide(lx.calcAt(ar))}}var cx=getConstant$1(getFirstAdditionOperand(n));return cx.compareTo(Expression.ZERO)<0?t.negate().divide(n.negate()):has$2(n,MatrixSymbol)?new Expression.Multiplication(t,new Expression.Exponentiation(n,Expression.ONE.negate())):new Division$1(t,n)};function Expression(){throw new TypeError("Do not call for better performance")}Expression.callback=void 0;Expression.Event=function(t,n,a){a=a??void 0,this.type=t,this.data=n,this.second=a};Expression.prototype.compare4Multiplication=function(t){throw new TypeError(this.toString())};Expression.prototype.compare4MultiplicationInteger=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationSymbol=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationNthRoot=function(t){throw new TypeError};Expression.prototype.negate=function(){return Expression.ONE.negate().multiply(this)};Expression.prototype.add=function(t){return t.addExpression(this)};Expression.prototype.subtract=function(t){return this.add(t.negate())};Expression.prototype.divide=function(t){//!2019-04-22
if(!(t instanceof Expression.Matrix)){if(this.equals(t)){//!TODO: remove - a hack to avoid some exceptions
return Expression.ONE}if(this.equals(t.negate()))return Expression.ONE.negate()}return t.divideExpression(this)};Expression.prototype.multiply=function(t){return t.multiplyExpression(this)};Expression.prototype.pow=function(t){return t.powExpression(this)};Expression.prototype.getDenominator=function(){return this instanceof Division$1?this.b:Expression.ONE};Expression.prototype.getNumerator=function(){return this instanceof Division$1?this.a:this};Expression.prototype.inverse=function(){return Expression.ONE.divide(this)};Expression.prototype.exp=function(){return Expression.E.pow(this)};var variables=function(t){var n=[];for(var a of t.summands())for(var s of a.factors())for(var l of getVariableInternal(s))l.v instanceof Integer$2||n.push(l.v);return n},getCommonVariable=function(t,n){for(var a=variables(t),s=variables(n),l=0;l<a.length;l+=1)if(a[l]instanceof NthRoot)return a[l];for(var l=0;l<s.length;l+=1)if(s[l]instanceof NthRoot)return s[l];for(var l=0;l<a.length;l+=1)a[l]instanceof Addition$1&&(a=a.concat(variables(a[l])),a[l]=null);for(var l=0;l<s.length;l+=1)s[l]instanceof Addition$1&&(s=s.concat(variables(s[l])),s[l]=null);for(var l=0;l<a.length;l+=1)for(var u=0;u<s.length;u+=1)if(a[l]!=null&&s[u]!=null&&a[l].equals(s[u]))return a[l];return null};Expression.prototype.gcd=function(t){if(this.equals(Expression.ONE))return this;if(this instanceof Integer$2&&t instanceof Integer$2)return integerGCD(this,t);if(!(this instanceof Integer$2)&&!(t instanceof Integer$2)){var n=getTerm(this),a=getTerm(t);if(n!=null&&a!=null&&n.equals(a))return getConstant$1(this).gcd(getConstant$1(t)).multiply(a);//!2020-11-05 more workarounds:
if(n=getTerm(getFirstAdditionOperand(this)),a=getTerm(getFirstAdditionOperand(t)),n!=null&&a!=null&&n.equals(a)){var s=getConstant$1(getFirstAdditionOperand(this)),l=getConstant$1(getFirstAdditionOperand(t));if(s instanceof Integer$2&&l instanceof Integer$2){var u=s.truncatingDivide(l);if(u instanceof Expression.Integer&&u.multiply(l).equals(s))return this.subtract(t.multiply(u)).gcd(t);var u=l.truncatingDivide(s);if(u instanceof Expression.Integer&&u.multiply(s).equals(l))return this.gcd(t.subtract(this.multiply(u)))}}}if(this.equals(Expression.ZERO)||t.equals(Expression.ZERO))return this.add(t);//!
var c=gcd(this,t,getCommonVariable(this,t));return c};Expression.prototype.lcm=function(t){return t.equals(Expression.ONE)?this:this.divide(this.gcd(t)).multiply(t)};//!new 2020-07-21
Expression.prototype.polynomialGCD=function(t){var n=this,a=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(a instanceof Expression.Symbol){var s=getReplacement(n,getReplacement(t,a));return s.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(n,a),Polynomial$1.toPolynomial(t,a)).calcAt(a):substitute(substitute(n,a,s,inverseReplacement(s,a)).polynomialGCD(substitute(t,a,s,inverseReplacement(s,a))),a,inverseReplacement(s,a),s)}return n.gcd(t)};var precedence={binary:{".^":5,"^":5,"*":3,"/":3,"+":2,"-":2},unary:{"-":5}};Expression.Symbol=function(t){this.symbol=t};Expression.Symbol.prototype=Object.create(Expression.prototype);Expression.Symbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationSymbol(this)};Expression.Symbol.prototype.compare4MultiplicationInteger=function(t){return-1};Expression.Symbol.prototype.compare4MultiplicationSymbol=function(t){return t.symbol<this.symbol?-1:this.symbol<t.symbol?1:0};Expression.Symbol.prototype.compare4MultiplicationNthRoot=function(t){return-1};Expression.Symbol.prototype.toString=function(t){if(this.symbol===""){return"e";//!
}return this.symbol};Expression.Symbol.prototype._pow=function(t){return t>1?new Expression.Exponentiation(this,Expression.Integer.fromNumber(t)):Expression.prototype._pow.call(this,t)};Expression.prototype.addInteger=function(t){return this.addExpression(t)};Expression.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:this.multiplyExpression(t)};Expression.prototype.divideInteger=function(t){return this.divideExpression(t)};var simplifyIdentityMatrixPower=!0;//! TODO:
function Integer$2(t){this.value=t}Integer$2.prototype=Object.create(Expression.prototype);Integer$2.prototype.powExpression=function(t){var n=this;if(t instanceof IdentityMatrix)return new IdentityMatrix(t.symbol);if(t instanceof MatrixSymbol)return n.equals(Expression.ZERO)?Expression.ONE:n.equals(Expression.ONE)?t:new Exponentiation$1(t,n);//!new 2019-12-16
if(t instanceof Exponentiation$1&&getExponent(t)instanceof Integer$2&&n instanceof Integer$2)return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2020-03-02
if(t instanceof Exponentiation$1&&getTerm(getExponent(t))instanceof Expression.Symbol)return getBase(t).pow(getExponent(t).multiply(n));//!
if(n.compareTo(Expression.ZERO)<0)return Expression.ONE.divide(t.pow(n.negate()));if(t instanceof Expression.Matrix){n.compareTo(Expression.ONE)>0&&(t.matrix.isDiagonal()||Expression.callback!=null&&Expression.callback(new Expression.Event("pow",t,new Expression.Matrix(Matrix$1.I(1).map(function(){return n})))));var a=function(u,c){return c.toNumber()>Number.MAX_SAFE_INTEGER?a(u,c.truncatingDivide(Expression.TWO)).pow(2).multiply(u.pow(c.remainder(Expression.TWO).toNumber())):u.pow(c.toNumber())};return new Expression.Matrix(a(t.matrix,n))}if(n.equals(Expression.ZERO))return Expression.ONE;if(n.equals(Expression.ONE))return t;if(t instanceof Expression.Symbol)return new Exponentiation$1(t,n);if(t instanceof Exponentiation$1){var s=t.b.multiply(n);if(s.getNumerator()instanceof Integer$2&&s.getDenominator()instanceof Integer$2){var l=s.getNumerator().truncatingDivide(s.getDenominator());if(l.compareTo(Expression.ZERO)>0)return t.a.pow(l).multiply(t.a.pow(s.subtract(l)))}return t.a.pow(t.b.multiply(n))}return t instanceof Integer$2&&(t.compareTo(Expression.ZERO)===0||t.compareTo(Expression.ONE)===0||t.compareTo(Expression.ONE.negate())===0)?n.remainder(Expression.TWO).compareTo(Expression.ZERO)===0?t.multiply(t):t:(t.equals(Expression.I)&&(n=n.remainder(Expression.TWO.add(Expression.TWO))),Expression.pow(t,n.toNumber()))};Integer$2.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationInteger(this)};Integer$2.prototype.compare4MultiplicationInteger=function(t){return t.compareTo(this)};Integer$2.prototype.compare4MultiplicationSymbol=function(t){return 1};Integer$2.prototype.compare4MultiplicationNthRoot=function(t){return 1};Integer$2.prototype.negate=function(){return new Integer$2(SmallBigInt.unaryMinus(this.value))};Integer$2.prototype.isUnit=function(){return this.equals(Expression.ONE)||this.equals(Expression.ONE.negate())};Expression.prototype.toExpression=function(){return this};Integer$2.prototype.compareTo=function(t){if(t instanceof Expression.Integer){var n=t.value,a=this.value;return SmallBigInt.lessThan(a,n)?-1:SmallBigInt.lessThan(n,a)?1:0}return Expression.prototype.compareTo.call(this,t)};Integer$2.prototype.abs=function(){return SmallBigInt.toNumber(this.value)<0?this.negate():this};Integer$2.prototype.sign=function(){return Math.sign(SmallBigInt.toNumber(this.value))};Integer$2.prototype.add=function(t){return this===Expression.ZERO?t:t.addInteger(this)};Integer$2.prototype.addInteger=function(t){return new Integer$2(SmallBigInt.add(t.value,this.value))};Integer$2.prototype.multiply=function(t){return t.multiplyInteger(this)};Integer$2.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:new Integer$2(SmallBigInt.multiply(t.value,this.value))};Integer$2.prototype.divide=function(t){return t.divideInteger(this)};//! for performance only
Integer$2.prototype.divideInteger=function(t){var n=this,a=t.value,s=n.value;if(SmallBigInt.toNumber(s)===0)throw new TypeError("ArithmeticException");if(typeof s=="number"&&s===1){return t;//!!!
}var l=SmallBigInt.divide(a,s),u=SmallBigInt.subtract(a,SmallBigInt.multiply(l,s));if(SmallBigInt.toNumber(u)===0)return new Integer$2(l);var c=SmallBigInt.BigInt(bigIntGCDWrapper(u,s));return a=SmallBigInt.divide(a,c),s=SmallBigInt.divide(s,c),SmallBigInt.toNumber(s)<0&&(a=SmallBigInt.unaryMinus(a),s=SmallBigInt.unaryMinus(s)),new Division$1(new Integer$2(a),new Integer$2(s))};Integer$2.prototype.truncatingDivide=function(t){return t.equals(Expression.ONE)?this:t.truncatingDivideInteger(this)};Integer$2.prototype.truncatingDivideInteger=function(t){var n=this;return new Integer$2(SmallBigInt.divide(t.value,n.value))};Integer$2.prototype.isDivisibleBy=function(t){return t.isDivisibleByInteger(this)};Integer$2.prototype.isDivisibleByInteger=function(t){return t.remainder(this).equals(Expression.ZERO)};Integer$2.prototype.remainder=function(t){return t.remainderInteger(this)};Integer$2.prototype.remainderInteger=function(t){var n=this,a=SmallBigInt.remainder(t.value,n.value);return a===1?Expression.ONE:new Integer$2(a)};Integer$2.prototype.primeFactor=function(){return integerPrimeFactor(this)};Integer$2.prototype.toNumber=function(){return SmallBigInt.toNumber(this.value)};Integer$2.prototype.toBigInt=function(){return this.value};Integer$2.prototype.toString=function(t){return this.value.toString()};Integer$2.prototype.valueOf=function(){return console.error("!"),this};Integer$2.prototype.leftShift=function(t){return new Integer$2(SmallBigInt.leftShift(this.value,t))};Integer$2.prototype.asUintN=function(t){return new Integer$2(SmallBigInt.asUintN(t,this.value))};Integer$2.fromNumber=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromString=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromBigInt=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Expression.ZERO=Integer$2.fromNumber(0);Expression.ONE=Integer$2.fromNumber(1);Expression.TWO=Integer$2.fromNumber(2);Expression.TEN=Integer$2.fromNumber(10);Expression.Matrix=function(t){this.matrix=t};Expression.Matrix.fromArray=function(t){return new Expression.Matrix(Matrix$1.padRows(t,null))};Expression.Matrix.prototype=Object.create(Expression.prototype);Expression.Matrix.prototype.augment=function(t){return t instanceof Expression.IdentityMatrix?new Expression.Matrix(this.matrix.augment(Matrix$1.I(this.matrix.cols()))):new Expression.Matrix(this.matrix.augment(t.matrix))};Expression.Matrix.prototype.equals=function(t){//!new 2019-12-03
if(t===Expression.ZERO)return this.matrix.isSquare()&&this.matrix.eql(this.matrix.map(function(n,a,s){return Expression.ZERO}));//!
return t instanceof Expression.Matrix?this.matrix.eql(t.matrix):!1};Expression.Matrix.prototype.compare4Multiplication=function(t){if(t instanceof Expression.Matrix)return 0;if(t instanceof MatrixSymbol){if(this.matrix.isSquare()&&this.matrix.isDiagonal()){const n=this.matrix.e(0,0);if(this.matrix.eql(Matrix$1.Zero(this.matrix.rows(),this.matrix.cols()).map((a,s,l)=>s===l?n:Expression.ZERO)))return 1}return-1}return 1};Expression.Matrix.prototype.compare4MultiplicationNthRoot=function(t){return 1};Expression.Matrix.prototype.multiply=function(t){return t.multiplyMatrix(this)};Expression.prototype.multiplyMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null)return new Expression.Matrix(t.matrix.scale(n));if(t.equals(Expression.ZERO)){//!TODO: TEST, TODO: sizes are lost
return t}return this.multiplyExpression(t)};Expression.Matrix.prototype.multiplyExpression=function(t){var n=getIdentityMatrixCoefficient(t);return n!=null?new Expression.Matrix(this.matrix.scale(n)):Expression.prototype.multiplyExpression.call(this,t)};Expression.Matrix.prototype.multiplyMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("multiply",t,this)),new Expression.Matrix(t.matrix.multiply(this.matrix))};Expression.Matrix.prototype.compare4MultiplicationSymbol=function(t){return 1};Expression.Matrix.prototype.multiplyDivision=Expression.Matrix.prototype.multiplyExpression;Expression.Matrix.prototype.add=function(t){return t.addMatrix(this)};Expression.Matrix.prototype.addMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("add",t,this)),new Expression.Matrix(t.matrix.add(this.matrix))};var isScalar=function(t){return t instanceof Integer$2||t instanceof Expression.Complex?!0:t instanceof MatrixSymbol?!1:t instanceof Expression.ExpressionWithPolynomialRoot?isScalar(t.e):t instanceof Expression.Symbol?!0:t instanceof BinaryOperation$1?isScalar(t.a)&&isScalar(t.b):t instanceof Negation?isScalar(t.b):t instanceof Expression.Function?isScalar(t.a):t instanceof Expression.NonSimplifiedExpression?isScalar(t.unwrap()):!1};Expression.isScalar=isScalar;var getIdentityMatrixCoefficient=function(t){var n=void 0;if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)n=t.a;else if(t instanceof IdentityMatrix)n=Expression.ONE;else if(isScalar(t))n=t;else if(t instanceof Addition$1&&Expression.has(t,IdentityMatrix)){var a=getIdentityMatrixCoefficient(t.a),s=getIdentityMatrixCoefficient(t.b);a!=null&&s!=null&&(n=a.add(s))}return n};Expression.prototype.addMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null){if(t.matrix.isSquare())return new Expression.Matrix(Matrix$1.I(t.matrix.rows()).scale(n)).add(t);throw new RangeError("NonSquareMatrixException")}return this.addExpression(t)};Expression.Matrix.prototype.addExpression=function(t){var n=getIdentityMatrixCoefficient(t);if(n!=null){if(this.matrix.isSquare())return this.add(new Expression.Matrix(Matrix$1.I(this.matrix.rows()).scale(n)));throw new RangeError("NonSquareMatrixException")}return Expression.prototype.addExpression.call(this,t)};Expression.Matrix.prototype.toString=function(t){return this.matrix.toString(setTopLevel(!0,t))};Expression.Matrix.prototype.isExact=function(){return this.matrix.isExact()};function BinaryOperation$1(t,n){this.a=t,this.b=n}BinaryOperation$1.prototype=Object.create(Expression.prototype);BinaryOperation$1.prototype.isNegation=function(){return this instanceof Multiplication$1&&this.a instanceof Integer$2&&this.a.equals(Expression.ONE.negate())};var setTopLevel=function(t,n){return n==null?{isTopLevel:t}:Object.assign({},n,{isTopLevel:t})};Expression.setTopLevel=setTopLevel;BinaryOperation$1.prototype.toString=function(t){var n=this.a,a=this.b,s=!1;this instanceof Addition$1&&a.isNegative()&&(s=!0,a=a.negateCarefully());var l=n.getPrecedence()+(n.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),u=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=a.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(l=l||n.isUnaryPlusMinus()),u=u||a.isUnaryPlusMinus(),u=u||this.unwrap()instanceof Exponentiation$1&&a.unwrap()instanceof Exponentiation$1,l=l||this.unwrap()instanceof Exponentiation$1&&n.unwrap()instanceof Expression.Function;var c=s?"-":this.getS();return this.isNegation()?"-"+(u?"(":"")+a.toString(setTopLevel(u,t))+(u?")":""):(l?"(":"")+n.toString(setTopLevel(l||t==null||t.isTopLevel,t))+(l?")":"")+c+(u?"(":"")+a.toString(setTopLevel(u,t))+(u?")":"")};Expression.prototype.unwrap=function(){return this};function Exponentiation$1(t,n){BinaryOperation$1.call(this,t,n)}Exponentiation$1.prototype=Object.create(BinaryOperation$1.prototype);Exponentiation$1.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationExponentiation(this)};Exponentiation$1.prototype.compare4MultiplicationInteger=function(t){return-1};Exponentiation$1.prototype.compare4MultiplicationExponentiation=function(t){var n=this;return getBase(t).compare4Multiplication(getBase(n))||getExponent(t).compare4Multiplication(getExponent(n))};BinaryOperation$1.prototype.compare4MultiplicationExponentiation=function(){return-1};function Multiplication$1(t,n){BinaryOperation$1.call(this,t,n)}Multiplication$1.prototype=Object.create(BinaryOperation$1.prototype);Multiplication$1.prototype.multiply=function(t){return t.multiplyExpression(this)};var compare4Multiplication2=function(t,n){if(t instanceof NthRoot&&n instanceof NthRoot){var a=t.multiply(n);if(a instanceof Expression.Multiplication){if(a.equals(new Expression.Multiplication(t,n)))return-1;if(a.equals(new Expression.Multiplication(n,t)))return 1}return 0}return t instanceof Integer$2&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Integer$2?1:t instanceof Expression.Complex&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n))};function Negation(t){this.b=t}Negation.prototype=Object.create(Expression.prototype);Expression.prototype.equalsNegation=function(t){return!1};Negation.prototype.equalsNegation=function(t){return this.b.equals(t.b)};Negation.prototype.equals=function(t){return t.equalsNegation()};Negation.prototype.toString=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"-"+(a?"(":"")+n.toString(setTopLevel(a,t))+(a?")":"")};function Subtraction(t,n){BinaryOperation$1.call(this,t,n)}Subtraction.prototype=Object.create(BinaryOperation$1.prototype);Subtraction.prototype.getS=function(){return"-"};function Addition$1(t,n){BinaryOperation$1.call(this,t,n)}Addition$1.prototype=Object.create(BinaryOperation$1.prototype);Addition$1.prototype.multiply=function(t){return t.multiplyAddition(this)};var _multiplyAddition=function(t,n,a){var s=[];for(var l of n.summands()){var u=a?t.multiply(l):l.multiply(t);s.push(u)}return _sum(s)},_sum=function(t){var n=t.length;if(n===0)return Expression.ZERO;for(;n>1;){for(var a=0;2*a<n;a+=1)t[a]=2*a+1<n?t[2*a+1].add(t[2*a]):t[2*a];n=Math.ceil(n/2)}return t[0]};Expression.prototype.multiplyAddition=function(t){return _multiplyAddition(this,t,!1)};Addition$1.prototype.multiplyExpression=function(t){return _multiplyAddition(t,this,!0)};function Division$1(t,n){BinaryOperation$1.call(this,t,n)}Division$1.prototype=Object.create(BinaryOperation$1.prototype);Division$1.prototype.multiply=function(t){return t.multiplyDivision(this)};Expression.prototype.multiplyDivision=function(t){return t.a.multiply(this).divide(t.b)};Division$1.prototype.multiplyDivision=function(t){return t.a.multiply(this.a).divide(t.b.multiply(this.b))};Division$1.prototype.multiplyExpression=function(t){return t.multiply(this.a).divide(this.b)};Division$1.prototype.add=function(t){return t.addDivision(this)};Expression.prototype.addDivision=function(t){return t.a.add(this.multiply(t.b)).divide(t.b)};Division$1.prototype.addDivision=function(t){return t.b.equals(this.b)?t.a.add(this.a).divide(this.b):t.a.multiply(this.b).add(t.b.multiply(this.a)).divide(t.b.multiply(this.b))};Division$1.prototype.addExpression=function(t){return t.multiply(this.b).add(this.a).divide(this.b)};Division$1.prototype.divide=function(t){return this.a.divide(this.b.multiply(t))};Division$1.prototype.divideExpression=function(t){return t.multiply(this.b).divide(this.a)};Division$1.prototype.multiplyAddition=function(t){return t.multiply(this.a).divide(this.b)};Expression.prototype.equals=function(t){throw new RangeError};Expression.prototype.equalsInteger=function(t){return this instanceof Expression.ExpressionWithPolynomialRoot||this instanceof Expression.ExpressionPolynomialRoot?this.equals(t):!1};const _isNumberTypeUsedForSmall=SmallBigInt.BigInt(0)===0;Integer$2.prototype.equals=function(t){return t===Expression.ZERO&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===0:t===Expression.ONE&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===1:t.equalsInteger(this)};Integer$2.prototype.equalsInteger=function(t){return t.compareTo(this)===0};Expression.Symbol.prototype.equals=function(t){return t instanceof Expression.Symbol&&this.symbol===t.symbol};BinaryOperation$1.prototype.equals=function(t){if(t instanceof Addition$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(t instanceof Addition$1&&this instanceof Multiplication$1&&Expression.has(this,Expression.ExpressionPolynomialRoot)||this instanceof Addition$1&&t instanceof Multiplication$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(this instanceof Addition$1&&t instanceof Addition$1){for(var n=this,a=t,s=n.summands(),l=a.summands(),u=s.next().value,t=l.next().value;u!=null&&t!=null;){if(!u.equals(t))return!1;u=s.next().value,t=l.next().value}return u!=null?!1:t==null}return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):t instanceof BinaryOperation$1&&this.getS()===t.getS()&&this.a.equals(t.a)&&this.b.equals(t.b)};function MatrixSymbol(t){Expression.Symbol.call(this,t)}MatrixSymbol.prototype=Object.create(Expression.Symbol.prototype);Exponentiation$1.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationMatrixSymbol(this)};Expression.prototype.compare4MultiplicationMatrixSymbol=function(t){return 1};Addition$1.prototype.compare4MultiplicationMatrixSymbol=function(t){return-1};Expression.Matrix.prototype.compare4MultiplicationMatrixSymbol=function(t){return t instanceof IdentityMatrix?1:-1};MatrixSymbol.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=Expression.Symbol.prototype.compare4MultiplicationSymbol.call(this,t);return n===1?-1:n};MatrixSymbol.prototype.compare4MultiplicationSymbol=function(t){return-1};MatrixSymbol.prototype.equals=function(t){return t instanceof MatrixSymbol&&Expression.Symbol.prototype.equals.call(this,t)};MatrixSymbol.prototype.transpose=function(){return new Expression.Exponentiation(this,new Expression.Symbol("T"))};Expression.MatrixSymbol=MatrixSymbol;function IdentityMatrix(t){MatrixSymbol.call(this,t)}IdentityMatrix.prototype=Object.create(MatrixSymbol.prototype);IdentityMatrix.prototype.multiplyAddition=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyAddition.call(this,t)};IdentityMatrix.prototype.addMatrix=function(t){return t.add(new Expression.Matrix(Matrix$1.I(t.matrix.rows())))};IdentityMatrix.prototype.add=function(t){return t.addIdentityMatrix(this)};Expression.prototype.addIdentityMatrix=function(t){return this.addExpression(t)};Expression.Matrix.prototype.addIdentityMatrix=function(t){return new Expression.Matrix(Matrix$1.I(this.matrix.rows())).add(this)};IdentityMatrix.prototype.multiplyDivision=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyExpression.call(this,t)};IdentityMatrix.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=this;return t instanceof IdentityMatrix?t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0:1};Expression.IdentityMatrix=IdentityMatrix;BinaryOperation$1.prototype.getS=function(){throw new TypeError("abstract")};Exponentiation$1.prototype.getS=function(){return"^"};Multiplication$1.prototype.getS=function(){return"*"};Negation.prototype.getS=function(){return"-"};Addition$1.prototype.getS=function(){return"+"};Division$1.prototype.getS=function(){return"/"};Expression.Function=function(t,n){this.name=t,this.a=n};Expression.Function.prototype=Object.create(Expression.prototype);Expression.Function.prototype.toString=function(t){return this.name+"("+this.a.toString(setTopLevel(!0,t))+")"};Expression.Function.prototype.equals=function(t){return t instanceof Expression.Function&&this.name===t.name&&this.a.equals(t.a)};Negation.prototype.isUnaryPlusMinus=function(){return!0};BinaryOperation$1.prototype.isUnaryPlusMinus=function(){return this.isNegation()};Expression.Function.prototype.isUnaryPlusMinus=function(){return!1;//!
};Expression.prototype.isUnaryPlusMinus=function(){return!1};Integer$2.prototype.isUnaryPlusMinus=function(){return this.compareTo(Expression.ZERO)<0};Negation.prototype.getPrecedence=function(){return precedence.unary["-"]};BinaryOperation$1.prototype.getPrecedence=function(){return this.isNegation()?precedence.unary["-"]:precedence.binary[this.getS()]};Expression.Function.prototype.getPrecedence=function(){return precedence.unary["-"]};Expression.prototype.getPrecedence=function(){return 1e3};Integer$2.prototype.getPrecedence=function(){return this.compareTo(Expression.ZERO)<0?precedence.unary["-"]:1e3};//! Note: this function is more for canonical order(?) or output(?), to check if a numeric expression is negative you should use Expression#sign()
Expression.prototype.isNegative=function(){var t=this;if(t instanceof Integer$2)return t.compareTo(Expression.ZERO)<0;if(t instanceof Expression.Complex)return t.real.compareTo(Expression.ZERO)<0||t.real.compareTo(Expression.ZERO)===0&&t.imaginary.compareTo(Expression.ZERO)<0;if(t instanceof Addition$1){var n=t;do n=n.a;while(n instanceof Addition$1);return n.isNegative()}return t instanceof Multiplication$1||t instanceof Division$1?t.a.isNegative()!==t.b.isNegative():t instanceof Negation?!0:t instanceof Expression.Radians?t.value.isNegative():!1};Expression.prototype.negateCarefully=function(){if(this instanceof Integer$2)return this.negate();if(this instanceof Addition$1)return new Addition$1(this.a.negateCarefully(),this.b.negateCarefully());if(this instanceof Multiplication$1)return this.b.isNegative()?new Multiplication$1(this.a,this.b.negateCarefully()):this.a.negateCarefully().equals(Expression.ONE)?this.b:new Multiplication$1(this.a.negateCarefully(),this.b);if(this instanceof Division$1)return this.b.isNegative()?new Division$1(this.a,this.b.negateCarefully()):new Division$1(this.a.negateCarefully(),this.b);if(this instanceof Negation){return this.b;//!
}return this.negate()};function NthRoot(t,n,a){Expression.Function.call(this,t,n),this.n=a,this.degree=a,this.radicand=n,console.assert(t===(a===2?"sqrt":a+"-root"))}NthRoot.prototype=Object.create(Expression.Function.prototype);NthRoot.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationNthRoot(this)};NthRoot.prototype.compare4MultiplicationInteger=function(t){return-1};NthRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};NthRoot.prototype.compare4MultiplicationNthRoot=function(t){return t.n<this.n?-1:t.n>this.n?1:0};NthRoot.prototype.toString=function(t){var n=this.a.getPrecedence()<=this.getPrecedence();return(n?"(":"")+this.a.toString(setTopLevel(n||t==null||t.isTopLevel,t))+(n?")":"")+"^"+(this.n===2?"0.5":"(1/"+this.n+")")};var isCommutative=function(t){return!Expression.has(t,Expression.Matrix)&&!Expression.has(t,Expression.MatrixSymbol)};NthRoot.prototype.getDegree=function(){return console.error("deprecated"),this.n};NthRoot.prototype.multiplyExpression=function(t){if(t instanceof Multiplication$1&&isCommutative(this)&&this.a instanceof Expression.Integer){for(var n of t.factors())if(n instanceof NthRoot&&n.a instanceof Expression.Integer&&compare4Multiplication2(n,this)===0){var a=!1,s=Expression.ONE;for(var l of t.factors()){var u=l;!a&&n===l&&(u=n.multiply(this),a=!0),s=s.multiply(u)}return s}}return Expression.prototype.multiplyExpression.call(this,t)};NthRoot.prototype.equals=function(t){return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):Expression.Function.prototype.equals.call(this,t)};//!new
NthRoot.prototype._pow=function(t){var n=Math.gcd(this.n,t);return n>1?this.n===n?this.a._pow(t/n):this.a._nthRoot(this.n/n)._pow(t/n):Expression.prototype._pow.call(this,t)};function isPerfectCube(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(3).toBigInt(),SmallBigInt.BigInt(3)),t.toBigInt()))===0}function isPerfectSquare(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(2).toBigInt(),SmallBigInt.BigInt(2)),t.toBigInt()))===0}var makeRoot=function(t,n){return n===1?t:n===2?new SquareRoot(t):new NthRoot(n+"-root",t,n)};NthRoot.makeRoot=makeRoot;Expression.prototype._nthRoot=function(t){if(typeof t=="number"){if(t<1||t>Number.MAX_SAFE_INTEGER||Math.floor(t)!==t)throw new RangeError("NotSupportedError")}else if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");var n=this;if(t===2&&n instanceof Addition$1){if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,Bx=n.b,s=Bx.multiply(Bx).subtract(a.multiply(a));s instanceof Integer$2&&!isPerfectSquare(s.abs())&&(s=null);var l=s instanceof Integer$2&&s.compareTo(Expression.ZERO)>=0?s.squareRoot():void 0;if(l!=null&&l instanceof Integer$2){var u=Bx.add(l),c=u.compareTo(Expression.ZERO)>=0?u.squareRoot().divide(Expression.TWO.squareRoot()):void 0;if(c!=null){var d=a.divide(Expression.TWO.multiply(c));return c.add(d)}}}if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&(n.b instanceof SquareRoot||n.b instanceof Multiplication$1&&n.b.a instanceof Integer$2&&n.b.b instanceof SquareRoot)){var c=n.a,d=n.b,u=c.multiply(c),Ct=d.multiply(d),ar=u.gcd(Ct).squareRoot();if(!ar.equals(Expression.ONE)){var Bx=c.divide(ar).add(d.divide(ar)).squareRoot().multiply(ar.squareRoot());return typeof hit=="function"&&hit({rootFromAddition:n.toString()}),Bx}}if(Expression._isPositive(n)){var en=getConjugateFactor(n);if(en.p!=null){var l=en.p.toExpression()._nthRoot(en.degree),tn=getPolynomialRelativeToNthRoot(n,en.p,en.degree),a=tn.getCoefficient(1).multiply(l.toExpression()),Bx=tn.getCoefficient(0),on=Bx.multiply(Bx).subtract(a.multiply(a)),fn=function(Xx){var rE=Xx.divide(getConstant$1(Xx)),uE=Expression.getConjugate(rE);return uE!=null&&uE.multiply(rE)instanceof Integer$2&&isPerfectSquare(uE.multiply(rE).abs())};if(on instanceof Integer$2||fn(on)){var dn=on.squareRoot(),u=Bx.add(dn);if(u instanceof Integer$2||fn(u)){var c=u.squareRoot().divide(Expression.TWO.squareRoot()),d=a.divide(Expression.TWO.multiply(c));return c.add(d)}}}}else if(Expression._isPositive(n.negate())&&t===2)return Expression.I.multiply(n.negate()._nthRoot(2))}if(t===3&&n instanceof Addition$1&&(n.a instanceof SquareRoot&&n.a.a instanceof Integer$2||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,Bx=n.b,Cn=a.multiply(a).subtract(Bx.multiply(Bx));if(isPerfectCube(Cn)){var l=new Expression.Symbol("t"),Rn=Expression.Integer.fromNumber(9),ax=Expression.Integer.fromNumber(27),ox=Expression.pow(Rn.multiply(l).add(Bx.subtract(l)),2).multiply(Bx.subtract(l)).subtract(ax.multiply(l).multiply(Expression.pow(a,2))),sx=Polynomial$1.toPolynomial(ox,l);sx=sx.scale(sx.getContent().inverse());var l=sx.doRationalRootTest();if(l!=null){var c=l._nthRoot(3),d=a.divide(a.abs()).multiply(Bx.subtract(l).divide(Expression.Integer.fromNumber(3).multiply(c))._nthRoot(2));return c.add(d)}}}if(n instanceof NthRoot)return typeof hit=="function"&&hit({rootFromRoot:""}),n.a._nthRoot(n.n*t);if((n instanceof Division$1||n instanceof Multiplication$1)&&(t%2!==0||n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0||n.b instanceof Integer$2&&n.b.compareTo(Expression.ZERO)>0||n.a instanceof Integer$2&&isConstant$1(n.b)||isConstant$1(n)||isPositive(n.a)||isPositive(n.b)||isPositive(n.b.negate()))){if(n instanceof Division$1)return n.a._nthRoot(t).divide(n.b._nthRoot(t));if(n instanceof Multiplication$1)return n.a._nthRoot(t).multiply(n.b._nthRoot(t))}var lx=n instanceof Integer$2?n:null,cx=QuadraticInteger.toQuadraticInteger(n);//!
if(cx==null&&n instanceof Expression.Addition&&n.a instanceof Multiplication$1&&n.b instanceof Multiplication$1){var ar=n.a.pow(Expression.TWO).gcd(n.b.pow(Expression.TWO)).squareRoot();if(!ar.equals(Expression.ONE))return ar._nthRoot(t).multiply(n.divide(ar)._nthRoot(t))}//!
if(cx!=null){if(t!==2&&t%2===0){var en=n.squareRoot();if(!(en instanceof Expression.SquareRoot))return en._nthRoot(t/2)}if((t===2||t===3)&&cx.isValid())if(cx.isPositive()){lx=cx;//!new 2020-12-31
if(cx.norm!=null&&Math.abs(Number(cx.norm().toString()))>Number.MAX_SAFE_INTEGER&&t!==3){lx=null;//!
}//!
}else return Expression.ONE.negate()._nthRoot(t).multiply(this.negate()._nthRoot(t))}if(lx!=null){if(n=lx,n instanceof Integer$2&&n.compareTo(Expression.ZERO)<0){if(t%2===0){if(t===2)return Expression.I.multiply(this.negate()._nthRoot(t));throw new RangeError("NotSupportedError")}return this.negate()._nthRoot(t).negate()}if(n.equals(Expression.ZERO))return this;for(var fx=[],gx=n;!gx.equals(Expression.ONE);){var Cn=gx.primeFactor();if(Cn instanceof QuadraticInteger){if(t!==2&&t!==3)throw new TypeError;if(Number(Cn.a.toString())<0&&Number(Cn.b.toString())>0||Number(Cn.a.toString())>0&&Number(Cn.b.toString())<0){var c=t%2===0?Cn.abs():Cn;return n.toExpression().divide(c.toExpression()._pow(t))._nthRoot(t).multiply(c.toExpression())}var mx=Cn.norm();if(Number(Cn.b.toString())!==0&&Number(Cn.a.toString())!==0&&Number(mx.toString())>=0&&isPerfectSquare(Integer$2.fromBigInt(mx))&&t===2)return n.toExpression().divide(Cn.toExpression())._nthRoot(2).multiply(Cn.toExpression()._nthRoot(2))}var px=gx instanceof Expression.Integer&&Cn instanceof Expression.Integer?primeFactor._countTrailingZeros(gx.value,Cn.value):-1,hx=0;if(px!==-1)hx=px,gx=gx.truncatingDivide(Cn._pow(px));else if(gx.isUnit())for(;!gx.equals(Expression.ONE);)gx=gx.truncatingDivide(Cn),hx+=1;else for(;gx.isDivisibleBy(Cn);)gx=gx.truncatingDivide(Cn),hx+=1;Cn=Cn.toExpression();var vx=t;Cn instanceof NthRoot&&(vx*=Cn.n,Cn=Cn.a);var l=Math.gcd(vx,hx);for(vx/=l,hx/=l;hx!==0;){var ar=hx>=vx?vx:1,yx=Math.floor(hx/ar),_x=Math.floor(vx/ar);fx.push(Object.freeze({degree:_x,radicand:Expression.pow(Cn,yx)})),hx=hx-ar*yx}}var Sx=Expression.ONE;fx.sort((jx,Hx)=>jx.degree-Hx.degree);for(var _x=-1,gx=0;gx<fx.length;gx+=1)_x===-1||fx[gx].degree!==fx[_x].degree?(_x+=1,fx[_x]=fx[gx]):fx[_x]=Object.freeze({degree:fx[gx].degree,radicand:fx[_x].radicand.multiply(fx[gx].radicand)});fx.length=_x+1;for(var Ex=null,bx=0;bx<fx.length;bx+=1){var Ax=fx[bx].degree;if(Ax!==1){var Mx=fx[bx].radicand,n=makeRoot(Mx,Ax);Sx!==Expression.ONE?Sx=new Expression.Multiplication(Sx,n):Sx=n}else Ex=fx[bx].radicand}return Ex!=null&&(Sx=Ex.multiply(Sx)),Sx}if(n instanceof Expression.Matrix){typeof hit=="function"&&hit(t===2?{squareRoot:"matrix"}:{nthRoot:"Matrix^(1/"+t+")"});var Rx=Expression.getEigenvalues(n.matrix),Cx=typeof t=="number"?Expression.Integer.fromNumber(t):t;if(Rx.length===n.matrix.cols()){var Lx=Expression.getEigenvectors(n.matrix,Rx);if(Lx.filter(jx=>jx!=null).length===n.matrix.cols()){n.matrix.isDiagonal()||(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-diagonalization",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",n)));var en=Expression.diagonalize(n.matrix,Rx,Lx),qx=en.L,Ix=qx.map(function(Hx,iE,Xx){return iE===Xx?Hx.pow(Expression.ONE.divide(Cx)):Hx});return new Expression.Matrix(en.T.multiply(Ix).multiply(en.T_INVERSED))}else{n.matrix.isJordanMatrix()?Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-matrix-nth-root",n)):(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-Jordan-normal-form",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",n)));var Px=function(Hx,iE){var Xx=Hx.map(function(rE,uE,aE){if(uE>aE)return Expression.ZERO;if(uE===aE)return Hx.e(uE,aE).pow(Expression.ONE.divide(iE));if(Hx.e(uE,uE+1).equals(Expression.ZERO))return Expression.ZERO;if(!Hx.e(uE,uE+1).equals(Expression.ONE))throw new TypeError("assertion");for(var Kx=aE-uE,ME=0;ME<Kx;ME+=1)if(!Hx.e(aE-1-ME,aE-ME).equals(Expression.ONE))return Expression.ZERO;for(var IE=Expression.ONE,ME=0;ME<Kx;ME+=1)IE=IE.multiply(Expression.ONE.divide(iE).subtract(Expression.Integer.fromNumber(ME))).divide(Expression.Integer.fromNumber(ME+1));return IE.divide(Hx.e(uE,uE)._pow(Kx)).multiply(Hx.e(uE,uE).pow(Expression.ONE.divide(iE)))});return Xx},en=Expression.getFormaDeJordan(n.matrix,Rx),Nx=Px(en.J,Cx);return new Expression.Matrix(en.P.multiply(Nx).multiply(en.P_INVERSED))}}}//!2019-04-22
if(n instanceof Exponentiation$1&&n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0)if(n.b instanceof Expression.Symbol){if(n.a instanceof Expression.Integer&&integerPrimeFactor(n.a).equals(n.a))return new Expression.Exponentiation(n.a,n.b.divide(Expression.Integer.fromNumber(t)))}else return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));//!2019-16-06
if(n instanceof Exponentiation$1&&n.a===Expression.E||n instanceof Exponentiation$1&&getBase(n)instanceof Expression.Logarithm&&getBase(n).a instanceof Expression.Integer)return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));if(n instanceof IdentityMatrix)return n;//!2019-17-06
if(n instanceof Expression.Symbol)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(n instanceof Exponentiation$1&&(n.a instanceof Expression.Symbol||isGoodPolynomial(n.a))&&(t%2===1||n.b.getNumerator()instanceof Integer$2&&n.b.getNumerator().remainder(Expression.TWO).equals(Expression.ONE))){var d=n.b.divide(Expression.Integer.fromNumber(t));return d.equals(Expression.ONE)?n.a:new Expression.Exponentiation(n.a,d)}//!2019-06-20
var Bx=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(Bx instanceof Expression.Symbol||Bx instanceof Expression.Logarithm&&Bx.a instanceof Expression.Integer&&(t===2||t===3||!0)){var sx=Polynomial$1.toPolynomial(n,Bx),$x=sx.getContent();if($x.isNegative()&&($x=$x.negate()),isPositive($x)&&!$x.equals(Expression.ONE))return n.divide($x)._nthRoot(t).multiply($x._nthRoot(t));if(sx.getDegree()===1&&sx.getCoefficient(0)instanceof Integer$2&&!sx.getCoefficient(0).equals(Expression.ZERO)&&sx.getCoefficient(1)instanceof Integer$2)if(sx.getCoefficient(1).compareTo(Expression.ZERO)>0){var Cx=t instanceof Expression.Symbol?t:Expression.Integer.fromNumber(t);return new Expression.Exponentiation(n,Expression.ONE.divide(Cx))}else{//!TODO: fix
if(t%2!==0)return Expression.ONE.negate()._nthRoot(t).multiply(new Expression.Exponentiation(n.negate(),Expression.ONE.divide(Expression.Integer.fromNumber(t))))}if(sx.getDegree()>1&&!sx.getCoefficient(0).equals(Expression.ZERO)){var Cx=sx.getDegree(),l=Bx.multiply(sx.getCoefficient(Cx)._nthRoot(Cx)).add(sx.getCoefficient(0)._nthRoot(Cx));if(n.equals(l._pow(Cx))){//!TODO: remove
if(Cx>=t&&(t%2!==0||Expression._isPositive(Bx)))return l.pow(Expression.ONE).multiply(l._pow(Cx-t)._nthRoot(t));//!
if(t%2!==0||Expression._isPositive(Bx))return new Expression.Exponentiation(l,Expression.Integer.fromNumber(Cx).divide(Expression.Integer.fromNumber(t)))}if(sx.getDegree()>1&&sx.getSquareFreePolynomial().equals(sx)&&t===2)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(sx.getDegree()>1&&t===3){var Cn=simpleDivisor(n);return n.divide(Cn)._nthRoot(t).multiply(Cn._nthRoot(t))}}}if(t%2!==0&&n instanceof Expression.ExponentiationOfMinusOne)return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));if(n instanceof Addition$1&&n.b instanceof NthRoot&&n.a instanceof NthRoot){var ar=nthRootCommonFactor(n.a,n.b);if(!ar.equals(Expression.ONE))return ar._nthRoot(t).multiply(n.divide(ar)._nthRoot(t))}if(n instanceof Exponentiation$1&&t===3&&getExponent(n).equals(Integer$2.fromNumber(3)))return getBase(n);if(n instanceof Exponentiation$1&&t===2&&getExponent(n).equals(Integer$2.fromNumber(2))){if(isPositive(getBase(n)))return getBase(n);if(isPositive(getBase(n).negate()))return getBase(n).negate()}if(t===2&&!(n.getDenominator()instanceof Expression.Integer)){var Vx=simpleDivisor(n.getDenominator());if(Vx.complexConjugate().multiply(Vx).equals(n.getDenominator()))return n.getNumerator()._nthRoot(t).divide(Vx.abs())}var Vx=simpleDivisor(n);if(!Vx.equals(n)&&(console.log(Vx.toString()),isPositive(Vx)&&(!(Vx instanceof Addition$1)||!(n.divide(Vx)instanceof Addition$1))&&!(Vx._nthRoot(t)instanceof NthRoot)))return Vx._nthRoot(t).multiply(n.divide(Vx)._nthRoot(t));const Gx=!0,Zx=function(jx){return Expression.isConstant(jx)&&!Expression.has(jx,Expression.Sin)&&!Expression.has(jx,Expression.Cos)};if(typeof t=="number"&&!isPositive(n)&&Gx&&Zx(n)&&t===2){const jx=Expression.getComplexNumberParts(n),Hx=jx.real,iE=jx.imaginary,Xx=Hx._pow(2).add(iE._pow(2)).squareRoot(),rE=Hx.add(Xx).divide(Expression.TWO).squareRoot(),uE=Expression.Integer.fromNumber(iE.sign()).multiply(Hx.negate().add(Xx).divide(Expression.TWO).squareRoot());return rE.add(uE.multiply(Expression.I))}if(typeof t=="number"&&(isPositive(n)||Zx(n)&&t===2)){var en=Expression.toPolynomialRoot(makeRoot(n,t));if(en!=null)return en}if(typeof t=="number"&&isPositive(n.negate())){var en=Expression.toPolynomialRoot(makeRoot(n.negate(),t));if(en!=null)return en.negate()}if(getBase(n)instanceof Expression.Symbol&&getBase(n).symbol.startsWith("$t")&&typeof t=="number")return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));//!new
if(Expression.isReal(n)&&typeof t=="number"&&isPositive(n))return new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse());//!
if(t===2&&!(this instanceof Expression.Exponentiation)){var Cn=simpleDivisor(this);if(Cn.complexConjugate().multiply(Cn).equals(this))return Cn.abs()}if(t===2&&!(this instanceof Expression.Exponentiation))return console.log(this.toString()),Expression.has(this,Expression.Symbol)?new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse()):NthRoot.makeRoot(this,t);throw new RangeError("NotSupportedError")};function SquareRoot(t){NthRoot.call(this,"sqrt",t,2)}SquareRoot.prototype=Object.create(NthRoot.prototype);//!
SquareRoot.prototype.divideInteger=function(t){return t.multiply(this).divide(this.a)};Expression.prototype.squareRoot=function(){return this._nthRoot(2)};Expression.Rank=function(t){Expression.Function.call(this,"rank",t)};Expression.Rank.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rank=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
Expression.callback!=null&&Expression.callback(new Expression.Event("rank",t));var n=[],a=void 0;if(Matrix$1.toRowEchelonWithCallback(t.matrix,Matrix$1.GaussMontante,"",void 0,function(s){var l=s.condition;if(l.isTrue())a=s.matrix.rank();else{var u=s.matrix;n.push(new ExpressionWithCondition(Integer$2.fromNumber(u.rank()),l))}}),n.length!==0)return new Expression.Cases(n);//!
return Integer$2.fromNumber(a)};Expression.Determinant=function(t){Expression.Function.call(this,"determinant",t)};Expression.Determinant.prototype=Object.create(Expression.Function.prototype);function isSquareMatrix(t){return!!(t instanceof Expression.Matrix&&t.matrix.isSquare()||t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))}Expression.prototype.determinant=function(){var t=this;if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().multiply(t.b.determinant());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().pow(t.b);if(t instanceof Expression.MatrixSymbol)return new Expression.Determinant(t);if(isMatrixSymbolTranspose(t))return t.transpose().determinant();if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event(t.matrix.getDeterminantEventType("determinant").type,t)),t.matrix.determinant()};Expression.RowReduce=function(t){Expression.Function.call(this,"row-reduce",t)};Expression.RowReduce.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rowReduce=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event("row-reduce".type,t)),new Expression.Matrix(t.matrix.toRowEchelon(Matrix$1.GaussJordan,"",null).matrix)};Expression.Transpose=function(t){Expression.Function.call(this,"transpose",t)};Expression.Transpose.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transpose=function(){var t=this;if(t instanceof Expression.Multiplication)return Expression.callback!=null&&Expression.callback(new Expression.Event("property-transpose-of-multiplication",{matrix:"{{0}}"})),t.b.transpose().multiply(t.a.transpose());if(t instanceof Expression.Addition)return t.a.transpose().add(t.b.transpose());if(isScalar(t))return t;if(!(getBase(t)instanceof MatrixSymbol)&&t instanceof Expression.Exponentiation&&t.b.equals(Expression.ONE.negate()))return t.a.transpose().pow(t.b);if(t instanceof Expression.Exponentiation&&t.b.equals(new Expression.Symbol("T")))return t.a;if(getBase(t)instanceof MatrixSymbol){var n=getExponent(t).multiply(new Expression.Symbol("T")),a=Polynomial$1.toPolynomial(n,new Expression.Symbol("T"));return a.getDegree()>=2&&(n=n.subtract(a.getCoefficient(2).multiply(new Expression.Symbol("T")._pow(2))).add(a.getCoefficient(2))),new Expression.Exponentiation(getBase(t),n)}if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.transpose())};Expression.Adjugate=function(t){Expression.Function.call(this,"adjugate",t)};Expression.Adjugate.prototype=Object.create(Expression.Function.prototype);Expression.prototype.adjugate=function(){var t=this;const n=function(){Expression.callback!=null&&Expression.callback(new Expression.Event("property-adjugate-of-multiplication",{matrix:"{{0}}"}))};if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return n(),t.b.adjugate().multiply(t.a.adjugate());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return n(),t.a.adjugate().pow(t.b);if(isMatrixSymbolTranspose(t))return n(),t.transpose().adjugate().transpose();if(t instanceof Expression.MatrixSymbol)return t.determinant().multiply(t.inverse());if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");if(Expression.callback!=null&&Expression.callback(new Expression.Event("adjugate",t)),t.matrix.rows()===1&&t.matrix.cols()===1)return new Expression.Matrix(Matrix$1.I(1));var a=t.matrix.determinant();if(Expression.isScalar(a)&&!a.equals(Expression.ZERO))return new Expression.Matrix(t.matrix.inverse().scale(a));var s=t.matrix.map(function(u,c,d,Ct){return(c+d-2*Math.floor((c+d)/2)===1?Expression.ONE.negate():Expression.ONE).multiply(Ct.minorMatrix(c,d).determinant())}),l=new Expression.Matrix(s.transpose());return l};Expression.NoAnswerExpression=function(t,n,a){Expression.Function.call(this,n,t),this.second=a};Expression.NoAnswerExpression.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transformNoAnswerExpression=function(t,n){if(n=n??void 0,!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return t==="solve"&&Expression.callback!=null&&Expression.callback(new Expression.Event("solve",this)),new Expression.NoAnswerExpression(this,t,n)};Expression.NoAnswerExpression.prototype.multiply=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.add=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.toString=function(t){return this.second==null?Expression.Function.prototype.toString.call(this,t):this.a.toString(setTopLevel(!0,t))+" "+this.name+" "+this.second.toString(setTopLevel(!0,t))};Expression.ElementWisePower=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.ElementWisePower.prototype=Object.create(BinaryOperation$1.prototype);Expression.ElementWisePower.prototype.getS=function(){return".^"};Expression.prototype.elementWisePower=function(t){if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(this.matrix.map(function(n,a,s){return n.pow(t)}))};Expression.prototype.isRightToLeftAssociative=function(){var t=this;return t instanceof Integer$2?t.compareTo(Expression.ZERO)<0:t instanceof Negation?!0:t instanceof BinaryOperation$1?t.isNegation()?!0:t instanceof Exponentiation$1:!1};var integerPrimeFactor=function(t){return Integer$2.fromBigInt(primeFactor(t.value))},simpleDivisor=function(t){if(t instanceof Division$1)throw new RangeError;if(t instanceof Expression.Matrix)throw new RangeError;if(t instanceof Expression.Symbol)return t;if(t instanceof Integer$2){var n=t,a=n.compareTo(Expression.ZERO)<0?n.negate():n;return a.compareTo(Expression.ONE)>0?integerPrimeFactor(a):null}if(t instanceof Expression.Complex){var s=t.primeFactor();return!s.equals(t)&&t.divide(s)instanceof Expression.Integer&&(s=s.multiply(Expression.I)),s}var l=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(l instanceof NthRoot&&l.a instanceof Integer$2&&l.n===2){var u=getPolynomialRelativeToNthRoot(t,l.a,l.n),s=u.getContent();if(!s.equals(Expression.ONE)&&!s.equals(Expression.ONE.negate()))return simpleDivisor(s)}if(l!=null){l=getVariable(l);//!?TODO: FIX
var c=getReplacement(t,l);if(!c.equals(l))return substitute(simpleDivisor(substitute(t,l,c,inverseReplacement(c,l))),l,inverseReplacement(c,l),c);var d=Polynomial$1.toPolynomial(t,l),Ct=d.getContent(),ar=simpleDivisor(Ct);if(ar!=null)return ar;var en=getConstant$1(d.getLeadingCoefficient());if(en instanceof Expression.Complex&&en.real.equals(Expression.ZERO)){return Expression.I;//!?
}if(d.getCoefficient(0).equals(Expression.ZERO))return l;if(d.getDegree()>=2){var tn=d.doRationalRootTest();if(tn!=null){var ar=l.multiply(tn.getDenominator()).subtract(tn.getNumerator());return ar}}if(d.getDegree()>=2&&d._hasIntegerLikeCoefficients()){var ar=d.factorize();if(ar!=null)return simpleDivisor(ar.calcAt(l))}if(d.getDegree()>=2&&!d._hasIntegerLikeCoefficients()){var ar=d.squareFreeFactors();if(ar.a0.getDegree()!==0)return ar.a0.scale(ar.a0.getLeadingCoefficient().inverse()).calcAt(l)}if(t=d.calcAt(l),t.isNegative()){t=t.negate();//!?
}return t}throw new RangeError};Expression.simpleDivisor=simpleDivisor;Expression.everyDivisor=function(t,n){if(t.equals(Expression.ZERO))return!0;if(!n(Expression.ONE))return!1;for(var a=[],s=function(u,c,d){if(c>=0){for(var Ct=a[c],ar=u;ar<=Ct.e;ar+=1)if(!s(0,c-1,d.multiply(Expression.pow(Ct.d,ar))))return!1}else if(!n(d))return!1;return!0};!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate());){var l=simpleDivisor(t);if((a.length===0||!a[a.length-1].d.equals(l))&&a.push({d:l,e:0}),a[a.length-1].e+=1,!s(a[a.length-1].e,a.length-1,Expression.ONE))return!1;t=t.divide(l)}return!0};Expression.Integer=Integer$2;Expression.NthRoot=NthRoot;Expression.SquareRoot=SquareRoot;Expression.Negation=Negation;Expression.Subtraction=Subtraction;Expression.BinaryOperation=BinaryOperation$1;Expression.Exponentiation=Exponentiation$1;Expression.Multiplication=Multiplication$1;Expression.Addition=Addition$1;Expression.Division=Division$1;Expression.pow=function(t,n){return t._pow(n)};Expression.prototype._pow=function(t){return pow(this,t,Expression.ONE)};Expression.Integer.prototype._pow=function(t){return typeof t=="number"&&Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER?new Integer$2(SmallBigInt.exponentiate(this.value,SmallBigInt.BigInt(t))):Expression.prototype._pow.call(this,t)};Expression.Integer.prototype._nthRoot=function(t){if(typeof t=="number"&&t===2&&this.equals(this.abs())&&isPerfectSquare(this))return this._integerNthRoot(2);if(typeof t=="number"&&t===3&&isPerfectCube(this))return this._integerNthRoot(3);if(typeof t=="number"&&t===2&&this.equals(this.abs())){for(var n=this,a=Expression.ONE,s=Expression.ONE;!isPerfectSquare(n);){var l=Integer$2.fromBigInt(primeFactor(n.toBigInt())),u=primeFactor._countTrailingZeros(n.toBigInt(),l.toBigInt());n=n.divide(l._pow(u)),u%2===1&&(s=s.multiply(l),u-=1),a=a.multiply(l._pow(u/2))}return n.squareRoot().multiply(a).multiply(new SquareRoot(s))}return Expression.prototype._nthRoot.call(this,t)};Expression.Integer.prototype._isPerfectSquare=function(){return this.sign()<0?!1:isPerfectSquare(this)};Integer$2.prototype._integerNthRoot=function(t){return new Integer$2(SmallBigInt.BigInt(primeFactor._integerNthRoot(this.toBigInt(),t)))};Integer$2.prototype.bitLength=function(){return primeFactor._bitLength(this.toBigInt())};Integer$2.prototype.modInverse=function(t){return Expression.Integer.fromBigInt(primeFactor._modInverse(this.toBigInt(),t.toBigInt()))};Integer$2.prototype.modulo=function t(n){const a=this.remainder(n);return a.compareTo(Expression.ZERO)<0?a.add(n):a};Expression.Equality=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Equality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Equality.prototype.getS=function(){return"="};Expression.Inequality=function(t,n,a){BinaryOperation$1.call(this,t,n),this.sign=a};Expression.Inequality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Inequality.prototype.getS=function(){return this.sign};function AdditionIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}AdditionIterator.prototype=Object.create(Iterator.prototype);AdditionIterator.prototype.next=function(){return this.value=this.e instanceof Addition$1?this.e.b:this.e,this.e=this.e instanceof Addition$1?this.e.a:void 0,this};function MultiplicationIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}MultiplicationIterator.prototype=Object.create(Iterator.prototype);MultiplicationIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e,this.e=this.e instanceof Multiplication$1?this.e.a:null,this};Expression.prototype.summands=function(){return new AdditionIterator(this)};Expression.prototype.factors=function(){return new MultiplicationIterator(this)};var splitX=function(t){var n=void 0,a=void 0,s=void 0,l=void 0;for(var u of t.summands()){var c=0;for(var d of u.factors()){var Ct=d,ar=getBase(d);getExponent(d);var en=ar instanceof Expression.Symbol?ar.toString():"";en==="X"&&c===0?(c=1,l=Ct):isScalar(Ct)?n=n==null?Ct:Ct.multiply(n):(c===0&&(s=s==null?Ct:Ct.multiply(s)),c===1&&(a=a==null?Ct:Ct.multiply(a)))}}return n=n??Expression.ONE,{s:n,l:a,r:s,x:l}};Expression.splitX=splitX;var groupX=function(t,n){var a=splitX(t),s=splitX(n),l=a.s,u=a.l,c=a.r,d=s.s,Ct=s.l,ar=s.r;if(c==null&&ar==null&&a.x.equals(s.x))return u=u??new IdentityMatrix("I"),Ct=Ct??new IdentityMatrix("I"),new Multiplication$1(l.multiply(u).add(d.multiply(Ct)),a.x);if(u==null&&Ct==null&&a.x.equals(s.x))return c=c??new IdentityMatrix("I"),ar=ar??new IdentityMatrix("I"),new Multiplication$1(a.x,l.multiply(c).add(d.multiply(ar)))},getExpressionWithX=function(t){if(t instanceof Division$1)if(t.getDenominator()instanceof Expression.Integer){t=t.getNumerator();//!
}else return{withX:void 0,withoutX:void 0};var n=void 0,a=void 0;for(var s of t.summands()){var l=s,u=!1;for(var c of s.factors()){var d=c,Ct=getBase(d);//!new2019-12-03
if(Ct instanceof Addition$1&&getExponent(d).isNegative()){var ar=null;for(var en of t.summands())en!==s&&(ar=ar==null?en:ar.add(en));var tn=getExponent(d).negate(),on=ar.multiply(Ct.pow(tn)).add(s.multiply(new Expression.Exponentiation(Ct,tn))),fn=on.transformEquality(Expression.ZERO),dn=getExponent(fn.a)instanceof Expression.Symbol?fn.a:getBase(fn.a),Cn=Polynomial$1.toPolynomial(Ct,dn).divideAndRemainder(Polynomial$1.toPolynomial(fn.a.subtract(fn.b),dn)).remainder.calcAt(dn),Rn=Cn instanceof Expression.Matrix?Cn.determinant():null;if(!Expression.isConstant(Rn))return{withX:void 0,withoutX:void 0};if(Rn.equals(Expression.ZERO))return{withX:Expression.ZERO,withoutX:Expression.ONE};return getExpressionWithX(on);//!hack
}//!
//!2020-06-14
if(Ct instanceof MatrixSymbol&&getExponent(d).isNegative()){var tn=getExponent(d).negate(),on=s.b.equals(d)?t.multiply(Ct.pow(tn)):Array.from(Ct.pow(tn).multiply(s).factors()).length<Array.from(s.factors()).length?Ct.pow(tn).multiply(t):null;if(on!=null)return getExpressionWithX(on)}if(Ct instanceof Expression.Division){//! 2023-02-12  (X/9) TODO: ???
if(Ct.getDenominator()instanceof Expression.Integer)return getExpressionWithX(Ct.getDenominator().multiply(t))}//!
if(!(Ct instanceof Integer$2)&&!(Ct instanceof Expression.Symbol)&&!(Ct instanceof Expression.Matrix)&&!(Ct instanceof NthRoot)){if(Ct instanceof Expression.Determinant&&Ct.a.toString()==="X")return{withX:null,withoutX:null};if(Expression.has(Ct,Expression.MatrixSymbol))throw new RangeError("NotSupportedError")}if(Ct instanceof Expression.Symbol){var ax=Ct.toString();if(ax==="X"){if(u)return{withX:null,withoutX:null};u=!0}}}if(u)if(n!=null){if(n=groupX(n,l),n==null)return{withX:null,withoutX:null}}else n=l;u||(a=a==null?l.negate():a.subtract(l))}return{withX:n,withoutX:a}},isConstant$1=function(t){return t instanceof Expression.BinaryOperation?isConstant$1(t.b)&&isConstant$1(t.a):t instanceof Expression.Integer||t instanceof Expression.PolynomialRootSymbol?!0:t instanceof Expression.ExpressionWithPolynomialRoot?isConstant$1(t.e):t instanceof Expression.ExpressionPolynomialRoot?!0:t instanceof Expression.Symbol?t===Expression.E||t===Expression.PI:t instanceof Expression.Complex?!0:t instanceof Expression.NthRoot||t instanceof Expression.Sin||t instanceof Expression.Cos||t instanceof Expression.Arctan?isConstant$1(t.a):t instanceof Expression.Radians?isConstant$1(t.value):t instanceof Expression.Logarithm?isConstant$1(t.a):t===Expression.E||t===Expression.PI};Expression.isConstant=isConstant$1;Expression.getMultivariatePolynomial=function(t){if(!(t instanceof Expression.Division)){var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if((n instanceof NthRoot||n instanceof Integer$2||n instanceof Expression.Complex)&&(n=void 0),n!=null){n instanceof Expression.Addition&&(n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v);var a=getReplacement(t,n);if(!a.equals(n)&&(t=substitute(t,n,a,inverseReplacement(a,n)),t instanceof Expression.Division&&t.b instanceof Expression.Integer)){t=t.a;//!
}var s=Polynomial$1.toPolynomial(t,n);if(s.getDegree()===0){console.warn("Expression.getMultivariatePolynomial");return}for(var l=0;l<=s.getDegree();l+=1){var u=s.getCoefficient(l);if(!isConstant$1(u)){var c=Expression.getMultivariatePolynomial(u);if(c==null)return}}return{p:s.map(function(d){return substitute(d,n,inverseReplacement(a,n),a)}),v:inverseReplacement(a,n)}}}};Expression.isSingleVariablePolynomial=function(t){var n=Expression.getMultivariatePolynomial(t);if(n==null)return!1;for(var a=n.p,s=0;s<=a.getDegree();s+=1){var l=a.getCoefficient(s);if(!isConstant$1(l))return!1}return!0};Expression.prototype.transformEquality=function(t){var n=this.subtract(t),a=getExpressionWithX(n),s=a.withX,l=a.withoutX;if(s==null){if(n.getDenominator()instanceof Integer$2&&!(n.getNumerator()instanceof Expression.Matrix)&&!Expression.has(n,Expression.MatrixSymbol)&&!n.equals(Expression.ZERO)){typeof n.upgrade=="function"&&(n=n.upgrade());var u=new Expression.Symbol("x"),a={p:Polynomial$1.toPolynomial(n.getNumerator(),u),v:u};if((a.p.getDegree()===0||Expression.has(n,Expression.Function))&&(a=Expression.getMultivariatePolynomial(n.getNumerator())),a!=null&&a.v instanceof Expression.Symbol){var c=a.p,d=a.v,Ct=Matrix$1.Zero(1,c.getDegree()+1).map(function(lx,cx,fx){return c.getCoefficient(c.getDegree()-fx)});return new Expression.NoAnswerExpression(new Expression.Matrix(Ct),"polynomial-roots",{polynomial:c,variable:d})}}if(n instanceof Expression.Matrix&&this instanceof Expression.Matrix&&(t instanceof Expression.Matrix||t instanceof Expression.IdentityMatrix))return Expression.SystemOfEquations.from([{left:this,right:t}]);{//!new 2019-11-27
return Expression.SystemOfEquations.from([{left:this,right:t}])}}l==null&&(l=Expression.ZERO);var ar=s,en=l,tn=!1,on=s;for(var fn of on.factors()){var dn=fn,Cn=getBase(dn),Rn=!1;if(Cn instanceof Expression.Symbol){var ax=Cn.toString();ax==="X"&&(Rn=!0,tn=!0)}if(Rn)ar=dn;else{if(dn instanceof Expression.Matrix&&(dn.matrix.cols()!==dn.matrix.rows()||dn.determinant().equals(Expression.ZERO)))return Expression.SystemOfEquations.from([{left:s,right:l}]);var ox=dn.inverse();tn?en=ox.multiply(en):en=en.multiply(ox)}}return ar instanceof Expression.Exponentiation&&getExponent(ar).equals(Expression.ONE.negate())&&en instanceof Expression.Matrix&&!en.determinant().equals(Expression.ZERO)&&(ar=ar.inverse(),en=en.inverse()),new Expression.Equality(ar,en)};Expression.prototype.transformInequality=function(t,n){var a=this;return new Expression.Inequality(a,t,n)};Expression.simplifications=[];Expression.prototype.simplifyExpression=function(){for(var t=this,n=0;n<Expression.simplifications.length;n+=1)t=Expression.simplifications[n](t);return t};Expression.prototype.isExact=function(){return!Expression.has(this,Expression.PolynomialRootSymbol)&&!Expression.has(this,Expression.ExpressionPolynomialRoot)};Expression.PI=new Expression.Symbol("");Expression.E=new Expression.Symbol("");Expression.I=new Expression.Symbol("");Expression.CIRCLE=new Expression.Symbol("");Expression.INFINITY=new Expression.Symbol("");Expression.prototype.addPosition=function(){return this};//! 2018-09-30
Expression.SystemOfEquations=function(t){throw new TypeError};Expression.SystemOfEquations.from=function(t){return new Expression.NoAnswerExpression({matrix:null},"system-of-equations",{equations:t})};Expression.ExponentiationOfMinusOne=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfMinusOne.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfMinusOne.prototype.divideExpression=function(t){return t.multiply(this)};Expression.ExponentiationOfImaginaryUnit=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfImaginaryUnit.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfImaginaryUnit.prototype.divideExpression=function(t){var n=getConjugate(getBase(this)).pow(getExponent(this));return t.multiply(n).divide(this.multiply(n))};Expression.ExponentiationOfQuadraticInteger=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfQuadraticInteger.prototype=Object.create(Expression.ExponentiationOfImaginaryUnit.prototype);Expression.ExponentiationOfQuadraticInteger.prototype.divideExpression=function(t){return Expression.Exponentiation.prototype.divideExpression.call(this,t)};//!
Expression.Division.prototype.negate=function(){return new Expression.Division(this.a.negate(),this.b)};Expression.Polynomial=function(t){this.polynomial=t};Expression.Polynomial.prototype=Object.create(Expression.prototype);Expression.Polynomial.prototype.gcd=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial));if(t.equals(Expression.ZERO))return this;throw new TypeError};Expression.Polynomial.prototype.equals=function(t){return t.equalsPolynomial(this)};Expression.Polynomial.prototype.equalsPolynomial=function(t){return t.polynomial.equals(this.polynomial)};Expression.prototype.equalsPolynomial=function(t){return t.polynomial.equals(Polynomial$1.ZERO)&&this.equals(Expression.ZERO)||t.polynomial.getDegree()===0&&this.equals(t.polynomial.getCoefficient(0))};Expression.Polynomial.prototype.multiply=function(t){return t===Expression.ONE?this:t.multiplyPolynomial(this)};Expression.Polynomial.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.multiply(this.polynomial))};Expression.Division.prototype.multiplyPolynomial=function(t){return this.multiplyExpression(t)};Expression.Integer.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.scale(this))};Expression.Polynomial.prototype.multiplyInteger=function(t){return new Expression.Polynomial(this.polynomial.scale(t))};Expression.Polynomial.prototype.divide=function(t){return t.equals(Expression.ONE)?this:t.equals(Expression.ONE.negate())?this.negate():t instanceof Expression.Integer?new Expression.Polynomial(this.polynomial.scale(t.inverse())):t.dividePolynomial(this)};Expression.Division.prototype.dividePolynomial=function(t){return this.divideExpression(t)};Expression.Polynomial.prototype.dividePolynomial=function(t){var n=this,a=t.polynomial,s=n.polynomial;if(a.getDegree()<0&&s.getDegree()>=0)return new Expression.Polynomial(a);var l=a.divideAndRemainder(s);if(l.remainder.equals(Polynomial$1.ZERO))return new Expression.Polynomial(l.quotient);var u=a.getContent();if(!u.getDenominator().equals(Expression.ONE))return n.multiply(u.getDenominator()).dividePolynomial(t.multiply(u.getDenominator()));var c=s.getContent();if(!c.getDenominator().equals(Expression.ONE))return n.multiply(c.getDenominator()).dividePolynomial(t.multiply(c.getDenominator()));var d=Polynomial$1.polynomialGCD(a,s);return n.polynomial.equals(d)?new Expression.Polynomial(t.polynomial.divideAndRemainder(d).quotient):new Expression.Division(new Expression.Polynomial(t.polynomial.divideAndRemainder(d).quotient),new Expression.Polynomial(n.polynomial.divideAndRemainder(d).quotient))};Expression.Polynomial.prototype.negate=function(){return new Expression.Polynomial(this.polynomial.negate())};Expression.Polynomial.prototype.add=function(t){return t.addPolynomial(this)};Expression.Polynomial.prototype.addPolynomial=function(t){return new Expression.Polynomial(t.polynomial.add(this.polynomial))};Expression.prototype.addPolynomial=function(t){if(this.equals(Expression.ZERO))return t;throw new RangeError};Expression.Polynomial.prototype.getPrecedence=function(){for(var t=this.polynomial.getDegree(),n=0,a=0;a<=t;a+=1)this.polynomial.getCoefficient(a).equals(Expression.ZERO)||(n+=1);return(n<2?this.polynomial.getLeadingCoefficient().equals(Expression.ONE)?new Expression.Symbol("x"):new Expression.Multiplication(Expression.ONE,Expression.ONE):new Expression.Addition(Expression.ONE,Expression.ONE)).getPrecedence()};Expression.Polynomial.prototype.modulo=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.divideAndRemainder(t.polynomial).remainder);throw new TypeError};Expression.Polynomial.prototype.modInverse=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.primitivePart().modularInverse(t.polynomial).primitivePart().scale(this.polynomial.getContent().inverse()));throw new TypeError};Expression.Polynomial.prototype.isDivisibleBy=function(t){if(t instanceof Expression.Polynomial)return this.polynomial.isDivisibleBy(t.polynomial);throw new TypeError};Expression.unique=function(t){for(var n=[],a=0;a<t.length;a+=1){for(var s=t[a],l=!1,u=0;u<n.length;u+=1)n[u]===s&&(l=!0);l||n.push(s)}return n};Expression.Multiplication.prototype.compare4Multiplication=function(t){var n=this;if(t instanceof Addition$1)return 0-t.compare4Multiplication(n);for(var a=n.factors(),s=t.factors(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Multiplication(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Multiplication.compare4Addition=function(t,n){for(var a=t.factors(),s=n.factors(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Addition(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Multiplication.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4Addition=function(t){if(t instanceof Expression.Function)return this.name<t.name?-1:t.name<this.name?1:this.a.compare4Addition(t.a);if(t instanceof Multiplication$1){var n=this;return Multiplication$1.compare4Addition(n,t)}if(t instanceof Addition$1){var n=this;return Addition$1.compare4Addition(n,t)}return 1};Expression.NthRoot.prototype.compare4Addition=function(t){return t.compare4AdditionNthRoot(this)};Expression.prototype.compare4AdditionNthRoot=function(t){return Expression.Function.prototype.compare4Addition.call(t,this)};Expression.NthRoot.prototype.compare4AdditionNthRoot=function(t){return this.n-t.n||t.a.compare4Addition(this.a)};Expression.prototype.compare4AdditionSymbol=function(t){var n=this;return n instanceof Expression.Function?-1:Expression.prototype.compare4Addition.call(t,n)};Expression.Symbol.prototype.compare4Addition=function(t){return t.compare4AdditionSymbol(this)};Expression.Symbol.prototype.compare4AdditionSymbol=function(t){var n=this;return t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0};Expression.Function.prototype.compare4Multiplication=function(t){return t instanceof Expression.NthRoot?1:t instanceof Expression.Function?this.name<t.name?-1:t.name<this.name?1:getBase(this.a).compare4Multiplication(getBase(t.a))||getExponent(this.a).compare4AdditionSymbol(getExponent(t.a)):t instanceof Expression.MatrixSymbol?-1:1};Expression.Function.prototype.compare4MultiplicationInteger=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4MultiplicationSymbol=function(t){return-1};Expression.Function.prototype.compare4MultiplicationNthRoot=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.pow=function(t){if(this instanceof Expression.NthRoot)return Expression.prototype.pow.call(this,t);if(t instanceof Expression.Integer)return t.compareTo(Expression.ONE)>0?new Expression.Exponentiation(this,t):Expression.prototype.pow.call(this,t);if(isIntegerOrN(t)&&t instanceof Expression.Symbol)return new Expression.Exponentiation(this,t);throw new RangeError("NotSupportedError")};function ExpressionWithCondition(t,n){this.e=t,this.condition=n}ExpressionWithCondition.prototype=Object.create(Expression.prototype);ExpressionWithCondition.prototype.toString=function(){return this.e.toString()+"; "+this.condition.toString()};ExpressionWithCondition.prototype.toMathML=function(t){return this.e.toMathML(t)+"<mtext>; </mtext>"+this.condition.toMathML(t)};ExpressionWithCondition.prototype.multiplyExpression=ExpressionWithCondition.prototype.multiplyMatrix=function(t){return new ExpressionWithCondition(t.multiply(this.e),this.condition)};ExpressionWithCondition.prototype.multiply=function(t){return t.multiplyExpressionWithCondition(this)};ExpressionWithCondition.prototype.multiplyExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.multiplyExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.multiply(this),t.condition)};ExpressionWithCondition.prototype.add=function(t){return t.addExpressionWithCondition(this)};ExpressionWithCondition.prototype.addExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.addExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.add(this),t.condition)};Expression.ExpressionWithCondition=ExpressionWithCondition;Addition$1.prototype.compare4MultiplicationNthRoot=function(t){return 1};Multiplication$1.prototype.compare4MultiplicationNthRoot=function(t){return-1};function Cases(t){this.cases=t}Cases.prototype=Object.create(Expression.prototype);Cases.prototype._cross=function(t,n){for(var a=this,s=[],l=0;l<t.cases.length;l+=1)for(var u=0;u<a.cases.length;u+=1){var c=t.cases[l].condition.and(a.cases[u].condition);if(!c.isFalse()){var d=n(t.cases[l].e,a.cases[u].e);s.push(new ExpressionWithCondition(d,c))}}return new Expression.Cases(s)};Cases.prototype.multiply=function(t){return t.multiplyCases(this)};Cases.prototype.multiplyCases=function(t){return this._cross(t,function(n,a){return n.multiply(a)})};Cases.prototype.toString=function(){for(var t="",n=0;n<this.cases.length;n+=1)t+="("+this.cases[n].toString()+"),";return"{{"+t.slice(0,-1)+"}}"};Expression.prototype.multiplyCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.multiply(n)}))};Cases.prototype.multiplyExpression=Cases.prototype.multiplyMatrix=function(t){return new Cases(this.cases.map(function(n){return t.multiply(n)}))};Cases.prototype.add=function(t){return t.addCases(this)};Cases.prototype.addCases=function(t){return this._cross(t,function(n,a){return n.add(a)})};Expression.prototype.addCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.add(n)}))};Cases.prototype.equals=function(t){var n=this;if(n===t)return!0;if(!(t instanceof Cases))return!1;throw new TypeError};Cases.prototype.toMathML=function(t){var n="";n+="<mrow>",n+="<mo>{</mo>",n+='<mtable columnalign="left">';for(var a=0;a<this.cases.length;a+=1){var s=this.cases[a];n+="<mtr>",n+="<mtd>",n+=s.e.toMathML(t),n+="</mtd>",n+="<mtd>",n+=s.condition.toMathML(t),n+="</mtd>",n+="</mtr>"}return n+="</mtable>",n+="</mrow>",n};Expression.Cases=Cases;Expression.Factorial=function(t){this.n=t};Expression.Factorial.prototype=Object.create(Expression.prototype);Expression.prototype.factorial=function(){var t=this;if(!(t instanceof Expression.Integer))throw new TypeError("NotSupportedError");if(t.compareTo(Expression.ZERO)<0)throw new TypeError("NotSupportedError");for(var n=Expression.ONE,a=t;a.compareTo(Expression.ONE)>=0;a=a.subtract(Expression.ONE))n=n.multiply(a);return n};Expression.prototype._abs=function(){return this.isNegative()?this.negate():this};Expression.Comma=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Comma.prototype=Object.create(BinaryOperation$1.prototype);Expression.Comma.prototype.getS=function(){return", "};Expression.prototype.transformComma=function(t){var n=this,a=function(u){if(u instanceof Expression.Equality)return[{left:u.a,right:u.b}];if(u instanceof Expression.NoAnswerExpression&&u.name==="system-of-equations")return u.second.equations;if(u instanceof Expression.Inequality)return[{left:u.a,right:u.b,sign:u.sign}];if(u instanceof Expression.NoAnswerExpression&&u.name==="polynomial-roots"){var c=u.second.polynomial.calcAt(u.second.variable);return[{left:c,right:Expression.ZERO}]}return null},s=a(n),l=a(t);if(s!=null&&l!=null)return Expression.SystemOfEquations.from(s.concat(l));if(s==null&&l==null)return new Expression.List((n instanceof Expression.List?n.list:[n]).concat(t instanceof Expression.List?t.list:[t]));throw new TypeError("NotSupportedError")};Expression.List=function(t){this.list=t};Expression.List.prototype=Object.create(Expression.prototype);Expression.List.prototype.min=function(){return this.list.reduce((t,n)=>t.compareTo(n)>0?n:t)};Expression.List.prototype.max=function(){return this.list.reduce((t,n)=>t.compareTo(n)<0?n:t)};Expression.List.prototype.gcd=function(){return this.list.reduce((t,n)=>t.gcd(n))};function atan2(t,n){if(n.equals(Expression.ZERO)){if(t.equals(Expression.ZERO))throw new RangeError;const s=Expression.PI.divide(Expression.TWO);return t.isNegative()?s.negate():s}const a=t.divide(n).arctan();return n.isNegative()?t.isNegative()?a.subtract(Expression.PI):a.add(Expression.PI):a}Expression.prototype.complexArgument=function(){var t=Expression.getComplexNumberParts(this);if(t==null)throw new TypeError;return atan2(t.imaginary,t.real)};Expression.Logarithm=function(t){Expression.Function.call(this,"log",t)};Expression.Logarithm.prototype=Object.create(Expression.Function.prototype);Expression.prototype.logarithm=function(){var t=this;if(t instanceof Expression.Integer){if(t.compareTo(Expression.ZERO)<=0){if(t.compareTo(Expression.ZERO)===0)throw new TypeError("ArithmeticException");return t.equals(Expression.ONE.negate())?Expression.I.multiply(Expression.PI):t.abs().logarithm().add(t.divide(t.abs()).logarithm())}if(t.compareTo(Expression.ONE)===0)return Expression.ZERO;var n=integerPrimeFactor(t);if(n.equals(t))return new Expression.Logarithm(t);var a=primeFactor._countTrailingZeros(t.toBigInt(),n.toBigInt());return n.logarithm().multiply(Integer$2.fromNumber(a)).add(t.truncatingDivide(n._pow(a)).logarithm())}if(t instanceof Expression.Division){var s=t.getNumerator(),l=t.getDenominator();if(l instanceof Integer$2||isConstant$1(s))return s.logarithm().subtract(l.logarithm())}if(t instanceof Expression.Multiplication){var cx=t.a;if(isConstant$1(cx))return cx.logarithm().add(t.divide(cx).logarithm());var cx=getConstant$1(t);if(cx instanceof Integer$2&&!cx.equals(Expression.ONE))return cx.logarithm().add(t.divide(cx).logarithm());if(t.b instanceof Expression.MatrixSymbol)return t.a.logarithm().add(t.b.logarithm())}if(t instanceof Expression.ExpressionWithPolynomialRoot&&(t=t.upgrade()),t instanceof Expression.ExpressionPolynomialRoot){var u=t.root.upgrade().getAlpha().polynomial.getGCDOfTermDegrees();if(u>1)return t._pow(u).logarithm().divide(Expression.Integer.fromNumber(u))}if(t instanceof Expression.Symbol)return t===Expression.E?Expression.ONE:new Expression.Logarithm(t);if(t instanceof Expression.NthRoot){var c=t.a,s=t.n;if(c instanceof Expression.Integer&&c.compareTo(Expression.ONE)>0||isPositive(c))return c.logarithm().divide(Expression.Integer.fromNumber(s))}if(t instanceof Expression.Exponentiation){var d=getBase(t),Ct=getExponent(t);if(d===Expression.E)return Ct;if(d instanceof Expression.MatrixSymbol&&Ct instanceof Integer$2||d instanceof Expression.Integer)return d.logarithm().multiply(Ct)}if(t instanceof Expression.Matrix){var ar=t.matrix;if(ar.isDiagonal())return new Expression.Matrix(ar.map(function(gx,mx,px){return mx===px?gx.logarithm():Expression.ZERO}));var en=Expression.getEigenvalues(ar);if(en.length===ar.cols()){var tn=Expression.getEigenvectors(ar,en);if(tn.filter(gx=>gx!=null).length===ar.cols()){Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-diagonalization",new Expression.Matrix(ar)));var on=Expression.diagonalize(ar,en,tn);return new Expression.Matrix(on.T).multiply(new Expression.Matrix(on.L).logarithm()).multiply(new Expression.Matrix(on.T_INVERSED))}else{var on=Expression.getFormaDeJordan(ar,en),fn=on.J,dn=function(mx){for(var px=mx.map(function(_x,Ex,bx){return Ex!==bx?_x.divide(mx.e(Ex,Ex)):Expression.ZERO}),hx=mx.map(function(_x,Ex,bx){return Ex===bx?_x.logarithm():Expression.ZERO}),vx=mx.cols(),yx=1;yx<vx;yx+=1){var Sx=px.pow(yx).scale(Expression.ONE.divide(Expression.Integer.fromNumber(yx)));hx=yx%2===1?hx.add(Sx):hx.subtract(Sx)}return hx},Cn=dn(fn);return Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-Jordan-canonical-form",new Expression.Matrix(ar))),new Expression.Matrix(on.P).multiply(new Expression.Matrix(Cn)).multiply(new Expression.Matrix(on.P_INVERSED))}}}if(t instanceof Expression.Addition){var cx=getConstant$1(t);if(!cx.equals(Expression.ONE))return cx.logarithm().add(t.divide(cx).logarithm());if(t.a instanceof Expression.Symbol&&t.b instanceof Expression.Integer)return new Expression.Logarithm(t);var Rn=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(Rn instanceof Expression.Symbol){var n=Polynomial$1.toPolynomial(t,Rn),cx=n.getContent();if(cx.isNegative()&&(cx=cx.negate()),isPositive(cx)&&!cx.equals(Expression.ONE))return t.divide(cx).logarithm().add(cx.logarithm());var ax=n.getSquareFreePolynomial(),s=Math.floor(n.getDegree()/ax.getDegree());if(s>1&&ax.calcAt(Rn)._pow(s).equals(t))return Expression.Integer.fromNumber(s).multiply(ax.calcAt(Rn).logarithm())}if(isGoodPolynomial(t))return new Expression.Logarithm(t)}var ox=QuadraticInteger.toQuadraticInteger(t);if(ox!=null&&(Number(ox.a.toString())>0||Number(ox.b.toString())>0)&&ox.D>0&&(ox.isValid()||ox.D===5||ox.D===37)){var sx=ox.primeFactor();if(sx.toExpression().equals(Expression.TWO)&&(ox=ox.truncatingDivide(sx),sx=ox.primeFactor()),!sx.equals(ox))return sx.toExpression().logarithm().add(t.divide(sx.toExpression()).logarithm());if(Number(ox.a.toString())>0&&Number(ox.b.toString())>0)return new Expression.Logarithm(t);if(Number(ox.a.toString())<0||Number(ox.b.toString())<0){var lx=ox.conjugate().toExpression();return lx.isNegative()&&(lx=lx.negate()),t.multiply(lx).logarithm().subtract(lx.logarithm())}}if(t instanceof Addition$1&&t.b instanceof NthRoot&&t.a instanceof NthRoot){var u=nthRootCommonFactor(t.a,t.b);if(!u.equals(Expression.ONE)&&isPositive(u))return u.logarithm().add(t.divide(u).logarithm())}var cx=Expression.getComplexNumberParts(t);if(cx!=null&&!cx.imaginary.equals(Expression.ZERO)){const gx=atan2(cx.imaginary,cx.real);return t.divide(Expression.I.multiply(gx).exp()).logarithm().add(Expression.I.multiply(gx))}if(Expression.isConstant(t)){var fx=simpleDivisor(t);if(!fx.equals(t))return fx.logarithm().add(t.divide(fx).logarithm())}throw new TypeError("NotSupportedError")};//!new
NthRoot.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;Expression.Symbol.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;//!new
Expression.prototype.complexConjugate=function(){throw new TypeError("NotSupportedError")};Expression.Integer.prototype.complexConjugate=function(){return this};Expression.Division.prototype.complexConjugate=function(){return this.getNumerator().complexConjugate().divide(this.getDenominator().complexConjugate())};Expression.Multiplication.prototype.complexConjugate=function(){return this.a.complexConjugate().multiply(this.b.complexConjugate())};Expression.Addition.prototype.complexConjugate=function(){return this.a.complexConjugate().add(this.b.complexConjugate())};Expression.Function.prototype.complexConjugate=function(){if(this.a instanceof Integer$2||Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Matrix.prototype.complexConjugate=function(){var t=this;return new Expression.Matrix(t.matrix.map(n=>n.complexConjugate()))};Expression.Symbol.prototype.complexConjugate=function(){return this===Expression.E||this===Expression.PI||Expression.isReal(this)?this:new Expression.ComplexConjugate(this)};Expression.Exponentiation.prototype.complexConjugate=function(){if(getBase(this)===Expression.E)return getBase(this).pow(getExponent(this).complexConjugate());if(isIntegerOrN(getExponent(this)))return getBase(this).complexConjugate().pow(getExponent(this));if(isMatrixSymbolTranspose(this))return new Expression.Exponentiation(getBase(this).complexConjugate(),getExponent(this));if(Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Logarithm.prototype.complexConjugate=function(){return this.a.complexConjugate().logarithm()};Expression.ComplexConjugate=function(t){Expression.Function.call(this,"conjugate",t)};Expression.ComplexConjugate.prototype=Object.create(Expression.Function.prototype);Expression.ComplexConjugate.prototype.complexConjugate=function(){return this.a};Expression.ComplexArgument=function(t){Expression.Function.call(this,"arg",t)};Expression.ComplexArgument.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix=function(t,n){Expression.Function.call(this,"augment",null),this.a=t,this.b=n};Expression.AugmentedMatrix.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix.prototype.toString=function(t){return"("+this.a.toString(t)+"|"+this.b.toString(t)+")"};Expression.AugmentedMatrix.prototype.toMathML=function(t){return"<mrow><mo>(</mo>"+this.a.toMathML(t)+"<mo>|</mo>"+this.b.toMathML(t)+"<mo>)</mo></mrow>"};Expression.Abs=function(t){Expression.Function.call(this,"abs",t)};Expression.Abs.prototype=Object.create(Expression.Function.prototype);Expression.Abs.prototype.toMathML=function(t){return'<mrow><mo stretchy="false">|</mo>'+this.a.toMathML(t)+'<mo stretchy="false">|</mo></mrow>'};Expression.Abs.prototype.complexConjugate=function(){return this};Expression.Abs.prototype.pow=function(t){return t instanceof Expression.Integer?this.a.pow(t).abs():Expression.Function.prototype.pow.call(this,t)};Expression.Matrix.prototype.pseudoinverse=function(){if(this.matrix.isSquare()){const n=this.matrix.determinant();if(Expression.isConstant(n)&&!n.equals(Expression.ZERO))return new Expression.Matrix(this.matrix.inverse())}Expression.callback!=null&&Expression.callback(new Expression.Event("pseudoinverse",this));const t=Expression.SVD(this.matrix);return new Expression.Matrix(t.Vstar.conjugateTranspose().multiply(t.Sigma.map(n=>n.equals(Expression.ZERO)?Expression.ZERO:n.inverse()).transpose()).multiply(t.U.conjugateTranspose()))};Expression.Pseudoinverse=function(t){Expression.Function.call(this,"pseudoinverse",t)};Expression.Pseudoinverse.prototype=Object.create(Expression.Function.prototype);Expression.prototype.factor=function(){var t=this,n=new Expression.Symbol("x"),a=Polynomial$1.toPolynomial(t,n),s=[];s.push(Polynomial$1.of(a.getContent())),a=a.primitivePart();function l(u){for(var c=null;u.getDegree()>1&&(c=u.factorize())!=null&&!c.equals(u);)l(c),u=u.divideAndRemainder(c,"throw").quotient;u.getDegree()>=0&&s.push(u)}return l(a),s.map(u=>new Expression.Polynomial(u)).reduce((u,c)=>new Expression.Multiplication(u,c))};function Derivative(t,n){Expression.Symbol.call(this,t),this.variable=n}Derivative.prototype=Object.create(Expression.Symbol.prototype);Expression.Derivative=Derivative;Expression.prototype.derivative=function(t=void 0){if(t==null)throw new RangeError;var n=this;if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(l=>l.derivative(t)));if(n instanceof Expression.Exponentiation){if(getBase(n)===Expression.E)return n.multiply(getExponent(n).derivative(t));if(getExponent(n)instanceof Expression.Integer)return getExponent(n).multiply(getBase(n).pow(getExponent(n).subtract(Expression.ONE))).multiply(getBase(n).derivative(t));if(getExponent(n).equals(t)&&Expression.isConstant(getBase(n)))return n.multiply(getBase(n).logarithm())}if(n instanceof Expression.Symbol)return n.symbol.toLowerCase()===n.symbol?n.equals(t)?Expression.ONE:Expression.ZERO:new Expression.Derivative(n);if(n instanceof Expression.Multiplication)return n.a.derivative(t).multiply(n.b).add(n.a.multiply(n.b.derivative(t)));if(n instanceof Expression.Addition)return n.a.derivative(t).add(n.b.derivative(t));if(n instanceof Expression.Division){var a=n.getNumerator(),s=n.getDenominator();return s.multiply(a.derivative(t)).subtract(a.multiply(s.derivative(t))).divide(s.multiply(s))}if(n instanceof Expression.Sin)return n.a.cos().multiply(n.a.derivative(t));if(n instanceof Expression.Cos)return n.a.sin().negate().multiply(n.a.derivative(t));if(n instanceof Expression.Logarithm)return n.a.derivative(t).divide(n.a);if(Expression.isConstant(n))return Expression.ZERO;throw new RangeError("NotSupportedError")};function GF2(t){this.a=t}GF2.prototype=Object.create(Expression.prototype);Expression.GF2=GF2;Expression.GF2.prototype.toString=function(t){return"GF2("+this.a.toString(Expression.setTopLevel(!0,t))+")"};function GF2Value(t){this.value=t}Expression.GF2Value=GF2Value;GF2Value.prototype=Object.create(Expression.prototype);Expression.GF2Value.prototype.equals=function(t){if(Expression.ZERO===t){return this.value===0;//!
}return!1};Expression.GF2Value.prototype.negate=function(){return new GF2Value(this.value===0?0:2-this.value)};GF2Value.prototype.add=function(t){if(t===Expression.ZERO)return new GF2Value(this.value);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value-2+t.value;return new GF2Value(n>=0?n:n+2)};GF2Value.prototype.multiply=function(t){if(t===Expression.ZERO)return new GF2Value(0);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value*t.value;return new GF2Value(n-2*Math.floor(n/2))};GF2Value.prototype.divide=function(t){return new GF2Value(this.value)};Expression.prototype.GF2=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.map(function(n,a,s){if(!(n.equals(Expression.ZERO)||n.equals(Expression.ONE)))throw new TypeError;return new Expression.GF2Value(n.equals(Expression.ZERO)?0:1)}))};GF2Value.prototype.toString=function(t){return this.value.toString()};var Integer$1=Expression.Integer,Addition=Expression.Addition,Multiplication=Expression.Multiplication,Division=Expression.Division,Exponentiation=Expression.Exponentiation,BinaryOperation=Expression.BinaryOperation,separateSinCos=function(t){if(!(t instanceof Multiplication))throw new TypeError;var n=void 0,a=void 0,s=t;for(var l of s.factors()){var u=l;u instanceof Sin||u instanceof Cos||u instanceof Exponentiation&&(u.a instanceof Sin||u.a instanceof Cos)?n=n==null?u:n.multiply(u):a=a==null?u:a.multiply(u)}return{sinCos:n??Expression.ONE,other:a??Expression.ONE}},expandMainOp=function(t){return t},contractTrigonometryInternal=function(t,n){var a=t.a,s=n.a;if(t instanceof Sin&&n instanceof Sin)return a.subtract(s).cos().divide(Expression.TWO).subtract(a.add(s).cos().divide(Expression.TWO));if(t instanceof Sin&&n instanceof Cos)return a.add(s).sin().divide(Expression.TWO).add(a.subtract(s).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Sin)return a.add(s).sin().divide(Expression.TWO).subtract(a.subtract(s).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Cos)return a.subtract(s).cos().divide(Expression.TWO).add(a.add(s).cos().divide(Expression.TWO));throw new TypeError},contractTrigonometryPower=function(t){var n=t.a;if(!(n instanceof Sin)&&!(n instanceof Cos))return t;var a=contractTrigonometryInternal(n,n).multiply(t.divide(n.multiply(n)));return contractTrigonometryRules(a.getNumerator()).divide(a.getDenominator())},contractTrigonometryProduct=function(t){for(var n=t.factors(),a=n.next().value,s=n.next().value,l=Expression.ONE,u=n.next().value;u!=null;)l=u.multiply(l),u=n.next().value;if(a instanceof Exponentiation)return a=contractTrigonometryPower(a),contractTrigonometryRules(a.multiply(s).multiply(l));if(s instanceof Exponentiation)return s=contractTrigonometryPower(s),contractTrigonometryRules(a.multiply(s).multiply(l));var c=contractTrigonometryInternal(a,s);return contractTrigonometryRules(c.multiply(l))},contractTrigonometryRules=function(t){var n=expandMainOp(t);if(n instanceof Exponentiation)return contractTrigonometryPower(n);if(n instanceof Multiplication){var a=separateSinCos(n),s=a.other,l=a.sinCos;if(l.equals(Expression.ONE)||l instanceof Sin||l instanceof Cos)return n;if(l instanceof Exponentiation)return expandMainOp(s.multiply(contractTrigonometryPower(l)));if(l instanceof Multiplication)return expandMainOp(s.multiply(contractTrigonometryProduct(l)));throw new TypeError}if(n instanceof Addition){var u=Expression.ZERO,c=n;for(var d of c.summands())d instanceof Multiplication||d instanceof Exponentiation?u=u.add(contractTrigonometryRules(d)):u=u.add(d);return u}return n},map$3=function(t,n){if(n instanceof Integer$1)return t(n);if(n instanceof Addition)return t(map$3(t,n.a).add(map$3(t,n.b)));if(n instanceof Multiplication)return t(map$3(t,n.a).multiply(map$3(t,n.b)));if(n instanceof Division)return t(map$3(t,n.a).divide(map$3(t,n.b)));if(n instanceof Exponentiation)return t(map$3(t,n.a).pow(map$3(t,n.b)));if(n instanceof Sin)return t(map$3(t,n.a).sin());if(n instanceof Cos)return t(map$3(t,n.a).cos());if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(function(a,s,l){return map$3(t,a)}));if(n instanceof Expression.Polynomial)return new Expression.Polynomial(n.polynomial.map(function(a,s){return map$3(t,a)}));if(n instanceof Expression.GF2Value)return n;if(n instanceof Expression.NthRoot)return t(n);if(n instanceof Expression.Negation||n instanceof Expression.Complex||n instanceof Expression.NonSimplifiedExpression||n instanceof Expression.Degrees||n instanceof Expression.Radians)return n;if(n instanceof Expression.Symbol)return t(n);if(n instanceof Expression.Arctan)return t(map$3(t,n.a).arctan());if(n instanceof Expression.Logarithm)return t(map$3(t,n.a).logarithm());if(n instanceof Expression.Determinant)return t(map$3(t,n.a).determinant());if(n instanceof Expression.Inequality)return t(map$3(t,n.a).transformInequality(map$3(t,n.b),n.sign));if(n instanceof Expression.ComplexConjugate)return t(map$3(t,n.a).complexConjugate());if(n instanceof Expression.Abs)return t(map$3(t,n.a).abs());throw new TypeError};Expression._map=map$3;var expandTrigonometryRulesInternal=function(t,n,a){if(a==="cos")return expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"cos")).subtract(expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"sin")));if(a==="sin")return expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"cos")).add(expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"sin")));throw new TypeError(a)},expandTrigonometryRules=function(t,n){if(t instanceof Addition)return expandTrigonometryRulesInternal(t.a,t.b,n);if(t instanceof Multiplication){var a=Expression.ONE;for(var s of t.factors())s instanceof Expression.Integer&&(a=a.multiply(s));var l=a,u=t.divide(a);if(!(l instanceof Integer$1))throw new TypeError;if(l.equals(Expression.ONE)){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}if(l.compareTo(Expression.ONE.negate())===0){if(n==="cos")return expandTrigonometryRules(u,n);if(n==="sin")return expandTrigonometryRules(u,n).negate()}var c=l.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate();return expandTrigonometryRulesInternal(c.multiply(u),l.subtract(c).multiply(u),n)}else if(t instanceof Division){var d=simplifyConstantValue(t,n);if(d!=null)return d;var l=t.a,u=t.b;if(l instanceof Addition)return expandTrigonometryRulesInternal(l.a.divide(u),l.b.divide(u),n)}if(t instanceof Expression.Symbol||t instanceof Expression.Exponentiation&&t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0||t instanceof Expression.Degrees||t instanceof Expression.Radians||t instanceof Expression.Complex||t instanceof Expression.Arctan){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}throw new TypeError},expandTrigonometry=function(t){return map$3(function(n){return n instanceof Sin?expandTrigonometryRules(n.a,"sin"):n instanceof Cos?expandTrigonometryRules(n.a,"cos"):n},t)};Expression._expandTrigonometry=expandTrigonometry;//!
var contractTrigonometry=function(t){return map$3(function(n){if(n instanceof Multiplication||n instanceof Exponentiation||n instanceof Addition){//! Addition - ?
return contractTrigonometryRules(n)}return n instanceof Division?contractTrigonometryRules(n.getNumerator()).divide(n.getDenominator()):n},t)},hasTrigonometry=function(t){return t instanceof BinaryOperation?hasTrigonometry(t.a)||hasTrigonometry(t.b):t instanceof Cos||t instanceof Sin},simplifyTrigonometry=function(t){if(!hasTrigonometry(t))return t;//!new
var n=null,a=null;if(Expression._map(function(u){if(u instanceof Expression.Sin||u instanceof Expression.Cos){var c=u.a;if(c instanceof Division){var d=c.getNumerator(),Ct=c.getDenominator();if(!Ct.equals(Expression.ONE))for(var ar of d.summands()){var en=ar.gcd(Ct);if(!en.equals(Ct))for(var tn of ar.factors())tn instanceof Expression.Symbol&&tn!==Expression.PI&&(a=Ct.divide(en),n=tn)}}}return u},t),n!=null&&a!=null)return t=Expression._substitute(t,n,n.multiply(a),n.divide(a)),t=simplifyTrigonometry(t),t=Expression._substitute(t,n,n.divide(a),n.multiply(a)),t;//!
var s=t.getNumerator();s=expandTrigonometry(s),s=contractTrigonometry(s);var l=t.getDenominator();return l=expandTrigonometry(l),l=contractTrigonometry(l),s.divide(l)};Expression.Division.prototype.compare4Multiplication=function(t){return t instanceof Division?this.a.compare4Multiplication(t.a)||this.b.compare4Multiplication(t.b):-1};Expression.Division.prototype.compare4MultiplicationSymbol=function(){return 1};Expression.Division.prototype.compare4MultiplicationInteger=function(){return 1};Expression.Division.prototype.compare4MultiplicationNthRoot=function(){return 1};Expression.simplifyTrigonometry=simplifyTrigonometry;function Sin(t){Expression.Function.call(this,"sin",t)}Sin.prototype=Object.create(Expression.Function.prototype);var simplifyConstantValueInternal=function(t,n){if(n=n||Expression.ZERO,t>=360||t<=-360)throw new RangeError;if(t<0&&(t=0-t,n=n.negate()),t>=180){t=t-180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}if(t>90){t=0-t,n=n.negate(),t=t+180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}console.assert(t>=0&&t<=90),console.assert(n.getNumerator().abs().compareTo(n.getDenominator())<0);function s(Rn){var ax=simplifyConstantValueInternal(Rn*2);return ax==null?null:Expression.TWO.add(Expression.TWO.multiply(ax)).squareRoot().divide(Expression.TWO)}function l(Rn,ax){var ox=simplifyConstantValueInternal(Rn),sx=simplifyConstantValueInternal(ax),lx=simplifyConstantValueInternal(90-Rn),cx=simplifyConstantValueInternal(90-ax);return ox.multiply(sx).subtract(lx.multiply(cx))}function u(){return Expression.ONE.add(Expression.TWO.add(Expression.TWO).add(Expression.ONE).squareRoot()).divide(Expression.TWO)}if(n.equals(Expression.ZERO)){if(t===0)return Expression.ONE;if(t===30)return Expression.ONE.add(Expression.TWO).squareRoot().divide(Expression.TWO);if(t===45)return Expression.ONE.divide(Expression.TWO.squareRoot());if(t===60)return Expression.ONE.divide(Expression.TWO);if(t===90)return Expression.ZERO;if(t===15||t===75)return s(t);if(t===36)return u().divide(Expression.TWO);if(t===72)return u().subtract(Expression.ONE).divide(Expression.TWO);if(t===18)return Expression.TWO.add(u()).squareRoot().divide(Expression.TWO);if(t===54)return Expression.TWO.add(Expression.ONE).subtract(u()).squareRoot().divide(Expression.TWO);if(t%3===0){var c=90-Math.floor(t/3)%6*15,d=-(c-t);return l(c,d)}}if(n.multiply(Expression.TWO).getDenominator().equals(Expression.ONE)){var Ct=t+n.multiply(Expression.TWO).toNumber()/2;if(Ct===7.5)return l(30,-22.5);if(Ct===22.5)return s(Ct);if(Ct===37.5)return l(60,-22.5);if(Ct===52.5)return l(30,22.5);if(Ct===67.5)return s(Ct);if(Ct===82.5)return l(60,22.5)}if(t%1===0){var ar=Integer$1.fromNumber(t).add(n).divide(Integer$1.fromNumber(60)),en=ar.getDenominator().toNumber(),c=ar.getNumerator().toNumber();if(en>Number.MAX_SAFE_INTEGER||c>Number.MAX_SAFE_INTEGER)return;var tn=function(ox){const sx=Polynomial.of(Expression.ZERO,Expression.ONE);let lx=Polynomial.of(Expression.ONE),cx=sx,fx=1;for(;fx<ox;){let gx=Polynomial.of(Expression.TWO).multiply(sx).multiply(cx).subtract(lx);lx=cx,cx=gx,fx+=1}return cx},on=tn(en).subtract(Polynomial.of(simplifyConstantValueInternal(60*(c%6),Expression.ZERO)));on=on.scale(on.getContent().inverse());var fn=Math.cos((t+n.getNumerator().toNumber()/n.getDenominator().toNumber())/180*Math.PI),a=Math.floor(fn*2**24+.5),dn=Expression.Integer.fromNumber(2**24),Cn={a:Expression.Integer.fromNumber(a-1).divide(dn),b:Expression.Integer.fromNumber(a+1).divide(dn)};return Expression.ExpressionPolynomialRoot.create(on,Cn)}},simplifyConstantValue=function(t,n){var a=void 0,s=void 0;if(t instanceof Integer$1&&t.compareTo(Expression.ZERO)===0)a=Expression.ZERO,s=Expression.ONE;else if(t===Expression.PI)a=Expression.ONE,s=Expression.ONE;else if(t instanceof Multiplication&&t.a instanceof Integer$1&&t.b===Expression.PI)a=t.a,s=Expression.ONE;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a===Expression.PI)a=Expression.ONE,s=t.b;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b===Expression.PI)a=t.a.a,s=t.b;else if(t instanceof Expression.Degrees){var l=t.value.simplify();if(l=l.multiply(Expression.PI).divide(Integer$1.fromNumber(180)),n==="sin")return l.sin();if(n==="cos")return l.cos()}if(a!=null&&s!=null){var u=a.multiply(Integer$1.fromNumber(180)).truncatingDivide(s),c=a.multiply(Integer$1.fromNumber(180)).subtract(u.multiply(s)).divide(s),d=u.remainder(Integer$1.fromNumber(360)).toNumber();if(n==="sin")d=90-d,c=c.negate(),d>=270&&(d-=360);else if(n!=="cos")throw new TypeError;return simplifyConstantValueInternal(d,c)}if(t instanceof Expression.Radians&&t.value.equals(Expression.ZERO))return simplifyConstantValue(t.value,n);if(Expression.has(t,Expression.Complex)){if(n==="sin")return Expression.I.multiply(t.divide(Expression.I).sinh());if(n==="cos")return t.divide(Expression.I).cosh()}if(t instanceof Expression.Arctan){Expression.callback!=null&&Expression.callback(new Expression.Event("trigonometric-function-of-inverse-trigonometric-function-arg",new Expression.Matrix(Matrix.I(1))));var a=t.a;if(n==="sin")return a.getNumerator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot());if(n==="cos")return a.getDenominator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot())}if(t instanceof Expression.ExpressionWithPolynomialRoot)return simplifyConstantValue(t.upgrade(),n)};Expression.prototype.cosh=function(){var t=this;return t.exp().add(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.sinh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.tanh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(t.exp().add(t.negate().exp()))};Expression.prototype.coth=function(){var t=this;return t.exp().add(t.negate().exp()).divide(t.exp().subtract(t.negate().exp()))};Expression.prototype.arccos=function(){var t=this;return t.arcsin().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcsin=function(){var t=this;return t.divide(t.pow(Expression.TWO).subtract(Expression.ONE).negate().squareRoot()).arctan()};Expression.prototype.arccot=function(){var t=this;return t.arctan().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcosh=function(){var t=this;return t.add(t.multiply(t).subtract(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.arsinh=function(){var t=this;return t.add(t.multiply(t).add(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.artanh=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE).negate()).logarithm().divide(Expression.TWO)};Expression.prototype.arcoth=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE)).logarithm().divide(Expression.TWO)};Expression.isRealAlgebraicNumber=function t(n){return n instanceof Expression.Integer||n instanceof Expression.NthRoot&&typeof n.n=="number"&&n.n%1===0&&t(n.a)&&(n.n%2!==0||Expression._isPositive(n.a))||n instanceof Expression.Division&&t(n.getNumerator())&&t(n.getDenominator())||n instanceof Expression.Addition&&t(n.a)&&t(n.b)||n instanceof Expression.Multiplication&&t(n.a)&&t(n.b)};var isArgumentValid=function(t,n){if(t instanceof Expression.Radians)return Expression.isRealAlgebraicNumber(t.value);if(t instanceof Expression.Degrees)return simplifyConstantValue(t,n)!=null;if(t instanceof Expression.Symbol)return Expression.isScalar(t);if(t instanceof Expression.Exponentiation)return t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0;if(t instanceof Addition)return isArgumentValid(t.a,n)&&isArgumentValid(t.b,n);if(t instanceof Expression.Arctan)return!0;if(t instanceof Multiplication){if(t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol||t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Arctan||Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol&&(t.a instanceof Expression.NthRoot&&t.a.a instanceof Integer$1||t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b instanceof Expression.NthRoot&&t.a.b.a instanceof Integer$1))return!0;var a=Expression.getConstant(t),s=t.divide(a);if(Expression.isScalar(t)&&(a instanceof Integer$1||a instanceof Expression.Complex)&&(s instanceof Multiplication||s instanceof Expression.Symbol||s instanceof Expression.Exponentiation)){for(var l of s.factors())if(!(l instanceof Expression.NthRoot)&&!(l instanceof Expression.Symbol)&&!(l instanceof Expression.Exponentiation&&l.a instanceof Expression.Symbol&&Expression.isScalar(l.a)&&l.b instanceof Expression.Integer&&l.b.compareTo(Expression.ONE)>0))return!1;return!0;//!?
}}return t instanceof Division&&t.b instanceof Integer$1?isArgumentValid(t.a):t instanceof Expression.Complex};Expression.prototype.sin=function(){var t=this,n=simplifyConstantValue(t,"sin");if(n!=null)return n;if(t.isNegative())return t.negate().sin().negate();if(!isArgumentValid(t,"sin"))throw new RangeError("NotSupportedError");return new Sin(t)};function Cos(t){Expression.Function.call(this,"cos",t)}Cos.prototype=Object.create(Expression.Function.prototype);Expression.prototype.cos=function(){var t=this,n=simplifyConstantValue(t,"cos");if(n!=null)return n;if(t.isNegative())return t.negate().cos();if(!isArgumentValid(t,"cos"))throw new RangeError("NotSupportedError");return new Cos(t)};Expression.simplifications.push(Expression.simplifyTrigonometry);Expression.Sin=Sin;Expression.Cos=Cos;Expression.Addition.prototype.compare4Addition=function(t){var n=this;return Expression.Addition.compare4Addition(n,t)};Expression.Multiplication.prototype.compare4MultiplicationInteger=function(t){return-1};//!!!
Expression.Addition.prototype.compare4Multiplication=function(t){if(t instanceof Integer$1)return-1;if(t instanceof Expression.MatrixSymbol)return 1;for(var n=this,a=n.summands(),s=t.summands(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Multiplication(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Addition.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Addition.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Addition.compare4Addition=function(t,n){for(var a=t.summands(),s=n.summands(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Addition(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};//!!!
Expression.Unit=function(t){this.value=t};Expression.Unit.prototype=Object.create(Expression.prototype);Expression.Unit.prototype.toString=function(t){var n=this.value,a=!(n instanceof Expression.Integer);return(a?"(":"")+n.toString(t)+(a?")":"")+this.unitSymbol()};Expression.Unit.prototype.equals=function(t){return t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()&&this.value.equals(t.value)};Expression.Unit.prototype.compare4AdditionSymbol=function(t){return t.compare4Addition(this.value)};Expression.Unit.prototype.compare4Addition=function(t){return this.value.compare4Addition(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4Multiplication=function(t){return this.value.compare4Multiplication(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4MultiplicationSymbol=function(t){return t.compare4Multiplication(this.value)};Expression.Unit.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Unit.prototype.negate=function(){return this.create(this.value.negate())};Expression.Unit.prototype.multiply=function(t){return this.create(this.value.multiply(t))};Expression.Unit.prototype.multiplyInteger=function(t){return this.create(t.multiply(this.value))};Expression.Unit.prototype.add=function(t){if(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()){var n=this.value.add(t.value);if(n.equals(Expression.ZERO)){return n;//!?
}return this.create(n);//!?
}return Expression.prototype.add.call(this,t)};//!new 2017-04-26
Expression.Degrees=function(t){Expression.Unit.call(this,t)};Expression.Degrees.prototype=Object.create(Expression.Unit.prototype);Expression.Degrees.prototype.unitSymbol=function(){return""};Expression.Degrees.prototype.create=function(t){return new Expression.Degrees(t)};//!new 2019-12-27
Expression.Radians=function(t){this.value=t};Expression.Radians.prototype=Object.create(Expression.Unit.prototype);Expression.Radians.prototype.unitSymbol=function(){return" rad"};Expression.Radians.prototype.create=function(t){return new Expression.Radians(t)};//!new 2019-11-23
Expression.Matrix.prototype.sin=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().subtract(n.negate().multiply(t).exp()).divide(a.multiply(n))};Expression.Matrix.prototype.cos=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().add(n.negate().multiply(t).exp()).divide(a)};//!
(function(){var t=new Expression.Symbol("_i");function n(s){return Expression._map(function(l){if(l instanceof Expression.Sin){var u=l.a;return t.multiply(u).exp().subtract(t.multiply(u).negate().exp()).divide(Expression.TWO.multiply(Expression.I))}if(l instanceof Expression.Cos){var u=l.a;return t.multiply(u).exp().add(t.multiply(u).negate().exp()).divide(Expression.TWO)}return l},s)}function a(s){return Expression._map(function(l){if(l instanceof Expression.Exponentiation&&l.a===Expression.E){var u=l.b,c=Polynomial.toPolynomial(u.getNumerator(),t).scale(u.getDenominator().inverse());if(c.getDegree()===1){var d=c.getCoefficient(0),Ct=c.getCoefficient(1);return Ct.cos().add(Expression.I.multiply(Ct.sin())).multiply(d.exp())}if(c.getDegree()>1)throw new TypeError("!?")}return l},s)}Expression._replaceSinCos=n,Expression._replaceBySinCos=a})();function Arctan(t){Expression.Function.call(this,"arctan",t)}Arctan.prototype=Object.create(Expression.Function.prototype);Expression.Arctan=Arctan;function getlowestfraction(t){var n=1e-15,a,s,l,u,c,d,Ct,ar;for(ar=t,Ct=Math.floor(ar),s=1,c=0,a=Ct,u=1;ar-Ct>n*u*u;)ar=1/(ar-Ct),Ct=Math.floor(ar),l=s,s=a,d=c,c=u,a=l+Ct*s,u=d+Ct*c;return a+"/"+u}Expression.prototype.arctan=function(){var t=this;if(t.isNegative())return t.negate().arctan().negate();if(Expression.isConstant(t)&&!(t instanceof Expression.Logarithm)){if(t instanceof Expression.Complex)return Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I));var n=Number(toDecimalStringInternal$1(t,{fractionDigits:15}));console.assert(!Number.isNaN(n));var a=getlowestfraction(Math.atan(n)/Math.PI).split("/"),s=Expression.Integer.fromNumber(Number(a[0])).divide(Expression.Integer.fromNumber(a[1])).multiply(Expression.PI);if(s.getDenominator().toNumber()<1e4&&s.tan().subtract(t).equals(Expression.ZERO))return s;throw new RangeError("NotSupportedError")}if(t instanceof Division){var l=t.getNumerator(),u=t.getDenominator();if(u.subtract(Expression.ONE).subtract(l).multiply(u.subtract(Expression.ONE).add(l)).subtract(Expression.ONE).equals(Expression.ZERO)){var c=Expression.TWO.multiply(t).divide(Expression.ONE.subtract(t._pow(2)));return new Arctan(c).divide(Expression.TWO)}}return t instanceof Expression.Matrix?t.matrix.isDiagonal()?new Expression.Matrix(t.matrix.map(function(d,Ct,ar){return Ct===ar?d.arctan():Expression.ZERO})):Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I)):new Arctan(t)};Expression.prototype.tan=function(){var t=this,n=t.multiply(Expression.TWO);return n.sin().divide(n.cos().add(Expression.ONE))};Expression.prototype.cot=function(){var t=this;if(t instanceof Expression.Matrix)return t.cos().divide(t.sin());var n=t.multiply(Expression.TWO);return n.cos().add(Expression.ONE).divide(n.sin())};Expression.Radians.prototype.complexConjugate=function(){return new Expression.Radians(this.value.complexConjugate())};Expression.Sin.prototype.complexConjugate=function(){return this.a.complexConjugate().sin()};Expression.Cos.prototype.complexConjugate=function(){return this.a.complexConjugate().cos()};Expression.Sin.prototype.compare4MultiplicationExponentiation=function(){return-1};var Integer=Expression.Integer;function Complex(t,n){if(!(t instanceof Integer)||!(n instanceof Integer)||n.compareTo(Expression.ZERO)===0)throw new RangeError;this.real=t,this.imaginary=n}Complex.prototype=Object.create(Expression.prototype);Expression.I=new Complex(Expression.ZERO,Expression.ONE);Expression.Complex=Complex;Complex.prototype.add=function(t){return t.addComplex(this)};Expression.prototype.addComplex=function(t){return this.addExpression(t)};Integer.prototype.addComplex=function(t){return new Complex(t.real.add(this),t.imaginary)};Complex.prototype.addComplex=function(t){var n=t.real.add(this.real),a=t.imaginary.add(this.imaginary);return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Complex.prototype.addInteger=function(t){return new Complex(t.add(this.real),this.imaginary)};Complex.prototype.equals=function(t){return!!(t instanceof Complex&&this.real.equals(t.real)&&this.imaginary.equals(t.imaginary))};Complex.prototype.compare4AdditionSymbol=function(t){return 1};Complex.prototype.compare4MultiplicationNthRoot=function(t){return 1};Complex.prototype.compare4Addition=function(t){return t instanceof Complex?this.equals(t)?0:this.real.compareTo(t.real)||this.imaginary.compareTo(t.imaginary):t instanceof Integer?1:t instanceof Expression.Division?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Exponentiation?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Matrix?Expression.prototype.compare4Addition.call(this,t):-1};Complex.prototype.compare4Multiplication=function(t){return t instanceof Complex?t.equals(this)?0:this.real.abs().compareTo(t.real.abs())||this.imaginary.abs().compareTo(t.imaginary.abs()):t.compare4MultiplicationComplex(this)};Expression.prototype.compare4MultiplicationComplex=function(t){return-1};Complex.prototype.compare4MultiplicationSymbol=function(t){return 1};Complex.prototype.multiply=function(t){return t.multiplyComplex(this)};Complex.prototype.multiplyComplex=function(t){var n=t.real.multiply(this.real).subtract(t.imaginary.multiply(this.imaginary)),a=t.real.multiply(this.imaginary).add(t.imaginary.multiply(this.real));return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Expression.prototype.multiplyComplex=function(t){return this.multiplyExpression(t)};Integer.prototype.multiplyComplex=function(t){return this.compareTo(Expression.ZERO)===0?this:new Complex(t.real.multiply(this),t.imaginary.multiply(this))};Complex.prototype.multiplyInteger=function(t){return t.compareTo(Expression.ZERO)===0?t:new Complex(t.multiply(this.real),t.multiply(this.imaginary))};Complex.prototype.conjugate=function(){return new Complex(this.real,this.imaginary.negate())};Complex.prototype.getPrecedence=function(){return this.real.equals(Expression.ZERO)?this.imaginary.equals(Expression.ONE)?1e3:3:2};Complex.prototype.truncatingDivide=function(t){return t instanceof Integer?new Complex(this.real.truncatingDivide(t),this.imaginary.truncatingDivide(t)):this.multiply(t.conjugate()).truncatingDivide(t.multiply(t.conjugate()))};Complex.prototype.toStringInternal=function(t,n,a,s,l,u,c,d){if(this.real.equals(Expression.ZERO))return this.imaginary.equals(Expression.ONE)?a:this.imaginary.equals(Expression.ONE.negate())?u+s+a+c:u+d(this.imaginary,t)+n+a+c;var Ct=this.imaginary.isNegative(),ar=Ct?this.imaginary.negateCarefully():this.imaginary,en=ar.equals(Expression.ONE)?a:u+d(ar,t)+n+a+c,tn=d(this.real,t);return u+tn+(Ct?s:l)+en+c};Complex.prototype.toString=function(t){return this.toStringInternal(t,"","i","-","+","","",function(n,a){return n.toString(a)})};Complex.prototype.compare4MultiplicationInteger=function(t){return 1};Complex.prototype.remainderInteger=function(t){return Complex.prototype.remainder.call(t,this)};Complex.prototype.remainder=function(t){function n(en){return en instanceof Expression.Integer?en.multiply(en):en.multiply(en.conjugate())}function a(en,tn){tn.compareTo(Expression.ZERO)<0&&(tn=tn.negate(),en=en.negate());var on=tn.truncatingDivide(Expression.TWO);return en.compareTo(Expression.ONE)<0&&(on=on.negate()),en.add(on).truncatingDivide(tn)}var s=this,l=t instanceof Expression.Integer?s:s.multiply(t.conjugate()),u=t instanceof Expression.Integer?t:t.multiply(t.conjugate()),c=a(l instanceof Complex?l.real:l,u),d=a(l instanceof Complex?l.imaginary:Expression.ZERO,u),Ct=d.compareTo(Expression.ZERO)===0?c:new Complex(c,d),ar=s.subtract(t.multiply(Ct));if(n(ar).compareTo(n(t))>=0)throw new TypeError;return ar};Complex.prototype.primeFactor=function(){return QuadraticInteger._complexIntegerPrimeFactor(this.real.toBigInt(),this.imaginary.toBigInt())};Expression.Complex=Complex;Expression.Complex.prototype.complexConjugate=function(){return this.conjugate()};Expression.Complex.prototype.compare4MultiplicationExponentiation=function(){return 1};function SomePolynomialRoot(t,n,a){this.e=t,this.polynomial=n,this.rootSymbol=a}SomePolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);function alpha(){return new Expression.Symbol("alpha")}function isSameRoot(t,n){return t.polynomial.equals(n.polynomial)&&t.rootSymbol===n.rootSymbol}SomePolynomialRoot.create=function(t){const n=alpha();return new SomePolynomialRoot(n,t,n)};SomePolynomialRoot.prototype.isExact=function(){return!1};function simplifyExpressionWithPolynomialRoot$1(t,n){if(t instanceof Expression.Integer)return t;var a=Polynomial$1.toPolynomial(t.getNumerator(),alpha()),s=Polynomial$1.toPolynomial(t.getDenominator(),alpha()),l=!1;if(s.getDegree()>=n.getDegree()*2&&(a=a.divideAndRemainder(n).remainder,l=!0),s.getDegree()>=n.getDegree()*2&&(s=s.divideAndRemainder(n).remainder,l=!0),a.isDivisibleBy(n))return Expression.ZERO;if(s.getDegree()>0){var u=s.modularInverse(n).primitivePart();s=s.multiply(u).divideAndRemainder(n).remainder,a=a.multiply(u).divideAndRemainder(n).remainder,l=!0}if(!l)return new SomePolynomialRoot(t,n);var c=a.calcAt(alpha()).divide(s.calcAt(alpha()));return c instanceof Expression.Integer?c:new SomePolynomialRoot(c,n)}SomePolynomialRoot.prototype.negate=function(){return new SomePolynomialRoot(this.e.negate(),this.polynomial)};SomePolynomialRoot.prototype.equals=function(t){return t===Expression.ZERO?!1:this.subtract(t).equals(Expression.ZERO)};SomePolynomialRoot.prototype.simplifyExpression=function(){return this};SomePolynomialRoot.prototype.toString=function(t){throw new TypeError};SomePolynomialRoot.prototype.toMathML=function(t){throw new TypeError};SomePolynomialRoot.prototype.multiply=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t),this.polynomial)};SomePolynomialRoot.prototype.add=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.add(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.add(t),this.polynomial)};SomePolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot$1(this.e.inverse(),this.polynomial)};SomePolynomialRoot.prototype.divide=function(t){return t instanceof SomePolynomialRoot&&isSameRoot(this,t)?simplifyExpressionWithPolynomialRoot$1(this.e.divide(t.e),this.polynomial):this.multiply(t.inverse())};SomePolynomialRoot.prototype.divideExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.divide(this.e),this.polynomial)};SomePolynomialRoot.prototype.multiplyExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.multiply(this.e),this.polynomial)};SomePolynomialRoot.prototype.addExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.add(this.e),this.polynomial)};SomePolynomialRoot.prototype.getPrecedence=function(){throw new TypeError};SomePolynomialRoot.prototype.isRightToLeftAssociative=function(){throw new TypeError};SomePolynomialRoot.prototype.isUnaryPlusMinus=function(){throw new TypeError};SomePolynomialRoot.prototype.isNegative=function(){throw new TypeError};SomePolynomialRoot.prototype._nthRoot=function(t){throw new TypeError};SomePolynomialRoot.prototype.pow=function(t){throw new TypeError};SomePolynomialRoot.prototype._pow=function(t){throw new TypeError};SomePolynomialRoot.prototype.calcAt=function(t,n){var a=function(u){for(var c=Polynomial$1.toPolynomial(u,alpha()),d=Expression.ZERO,Ct=Date.now();n.length<=c.getDegree();)n.push(n[n.length-1].multiply(t));var ar=Date.now();ar-Ct>10&&console.log("xPows",ar-Ct);for(var en=0;en<=c.getDegree();en+=1)d=d.add(c.getCoefficient(en).multiply(n[en]));return d},s=this.e,l=a(s.getNumerator()).divide(a(s.getDenominator()));return l};var LEFT_TO_RIGHT=0,RIGHT_TO_LEFT=1,COMMA_PRECEDENCE=1,EQUALITY_PRECEDENCE=2,ADDITIVE_PRECEDENCE=3,MULTIPLICATIVE_PRECEDENCE=4,UNARY_PRECEDENCE=6,UNARY_PRECEDENCE_PLUS_ONE=UNARY_PRECEDENCE+1,UNARY_PRECEDENCE_PLUS_TWO=UNARY_PRECEDENCE+2;function Operator(t,n,a,s,l){this.name=t,this.arity=n,this.rightToLeftAssociative=a,this.precedence=s,this.i=l}Operator.trigonometry=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n=prepareTrigonometricArgument(n),n[t]()})};Operator.simple=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n[t]()})};var UNARY_PLUS=new Operator("+",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t}),UNARY_MINUS=new Operator("-",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.negate()}),prepareTrigonometricArgument=function(t){if(t instanceof Expression.Integer)return new Expression.Degrees(t);if(t instanceof Expression.NonSimplifiedExpression){const n=function(a){return a instanceof Expression.NonSimplifiedExpression?n(a.e):a instanceof Expression.Integer?!0:a instanceof Expression.Negation?n(a.b):a instanceof Expression.Multiplication||a instanceof Expression.Addition?n(a.a)&&n(a.b):!1};if(n(t))return toDegrees(t)}return t},toDegrees=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Degrees(t)):new Expression.Degrees(t)},toRadians=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Radians(t)):new Expression.Radians(t)},notSupported=function(t){throw new TypeError},conjugateTranspose=function(t){return t.transpose().complexConjugate()},inequalityOperator=function(t,n){return new Operator(t,2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(a,s){return a.transformInequality(s,n)})},operations=[new Operator("=",2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(t,n){return t.transformEquality(n)}),inequalityOperator("","!="),inequalityOperator("!=","!="),inequalityOperator(">",">"),inequalityOperator("<","<"),inequalityOperator("",">="),inequalityOperator("","<="),new Operator(";",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator(",",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator("+",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.add(n)}),new Operator("-",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.subtract(n)}),new Operator("*",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("/",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.divide(n)}),new Operator("\\",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.inverse().multiply(n)}),new Operator("^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator("**",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator(".^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.elementWisePower(n)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.squareRoot()}),new Operator("sqrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("radical",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(3)}),new Operator("cbrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t._nthRoot(3)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(4)}),new Operator("rank",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rank()}),new Operator("adj",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("adjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("inverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.inverse()}),new Operator("det",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("determinant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("row-reduce",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rowReduce()}),new Operator("transpose",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transpose()}),new Operator("'",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){if(Expression.isScalar(t)){var n=null;if(Expression._map(function(s){return s instanceof Expression.Symbol&&!Expression.isConstant(s)&&(n=s),s},t.simplify()),n!=null)return t.simplify().derivative(n)}return t.transpose()}),new Operator("^*",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("^{*}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("solve",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transformNoAnswerExpression("solve")}),new Operator("GF2",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.GF2()}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("deg",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("rad",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toRadians(t)}),new Operator("exp",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.exp()}),new Operator("log",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("lg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm().divide(Expression.TEN.logarithm())}),new Operator("ln",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("abs",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.abs()}),new Operator("min",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.min()}),new Operator("max",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.max()}),new Operator("gcd",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.gcd()}),new Operator("conjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("overline",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("arg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexArgument()}),new Operator("\\left",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\right",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\mathrm",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("frac",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t,n){return t.divide(n)}),new Operator("\\cdot",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("\\times",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){return t.factorial()}),new Operator("!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("!!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("pseudoinverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.pseudoinverse()}),new Operator("root of",1,RIGHT_TO_LEFT,EQUALITY_PRECEDENCE,function(t){var n=Expression.getMultivariatePolynomial(t.simplify());return SomePolynomialRoot.create(n.p)}),new Operator("near",2,RIGHT_TO_LEFT,COMMA_PRECEDENCE,function(t,n){if(t instanceof Expression.Integer)return t;if(t instanceof SomePolynomialRoot&&t.e.toString()==="alpha"){const Ct=n.simplify(),ar=t.polynomial;var a=ar.getZeros(),s=1/0,l=null,u=function(tn,on){return tn.subtract(on)};for(var c of a){var d=Math.abs(Number(u(Ct,c).toString({rounding:{fractionDigits:2*ar.getDegree()+Math.ceil(ar._log2hypot())}})));(l==null||d<s)&&(s=d,l=c)}const en=l.upgrade();return n instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(en):en}throw new TypeError}),new Operator("factor",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.simplify().factor()}),new Operator("derivative",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;return t.list[0].derivative(t.list[1])}return t.derivative()}),new Operator("'(x)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("'(t)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("t"))}),new Operator("'_{x}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("resultant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;var n=new Expression.Symbol("x"),a=Polynomial.toPolynomial(t.list[0],n),s=Polynomial.toPolynomial(t.list[1],n);return new Expression.Polynomial(Polynomial.resultant(a,s))}})];function OperationSearchCache(){this.map={},this.re=null}OperationSearchCache.prototype.append=function(t){this.map[t.name.toLowerCase()]=t,this.re=null};OperationSearchCache.prototype.getByName=function(t){return this.map[t.toLowerCase()]};OperationSearchCache.prototype.getRegExp=function(){var t=function(s){return s.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&")};if(this.re==null){var n=[];for(var a in this.map)Object.prototype.hasOwnProperty.call(this.map,a)&&n.push(a);n.sort(function(l,u){return l<u&&u.lastIndexOf(l,0)!==0||l.lastIndexOf(u,0)===0?-1:1});const s="\0";this.re=new RegExp("^(?:"+t(n.join(s)).split(s).join("|").replace(/\|ch\|/g,"|ch(?!i)|").replace(/\|th\|/g,"|th(?!eta)|")+")","i")}return this.re};var operationSearchCache=new OperationSearchCache,trigonometryFunctions={},i$1=-1;for(;++i$1<operations.length;)operationSearchCache.append(operations[i$1]);for(const t of"cos sin tan cot".split(" "))operationSearchCache.append(Operator.trigonometry(t)),trigonometryFunctions[t]=!0;for(const t of"cosh sinh tanh coth arccos arcsin arctan arccot arcosh arsinh artanh arcoth".split(" "))operationSearchCache.append(Operator.simple(t));var nextToken=function(t){var n=null;do n=t.next();while(n.type==="whitespace");return n},parsePunctuator=function(t,n,a){if(n.type!=="punctuator"||n.value!==a)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input, '"+a+"' expected"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"', '"+a+"' expected");return n=nextToken(t),n};function ParseResult(t,n){this.result=t,this.token=n}var parseMatrix=function(t,n,a){for(var s="{",l="}",u=[],c=!0;c;){n=parsePunctuator(t,n,s);for(var d=[],Ct=!0;Ct;){var ar=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=ar.token,d.push(ar.result),n.type==="punctuator"&&n.value===","?(Ct=!0,n=nextToken(t)):Ct=!1}n=parsePunctuator(t,n,l),u.push(d),n.type==="punctuator"&&n.value===","?(c=!0,n=nextToken(t)):c=!1}return n=parsePunctuator(t,n,"}"),new ParseResult(a.wrap(Expression.Matrix.fromArray(u)),n)},parseLaTeXMatrix=function(t,n,a,s){for(var l=[],u=!0;u||n.type==="punctuator"&&n.value===s;){u?u=!1:n=nextToken(t);for(var c=[],d=!0;d||n.type==="punctuator"&&n.value==="&";){d?d=!1:n=nextToken(t);var Ct=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=Ct.token,c.push(Ct.result)}l.push(c)}return new ParseResult(a.wrap(Expression.Matrix.fromArray(l)),n)},parseLaTeXArgument=function(t,n,a){return parseExpression(t,n,a,0,void 0)},getVulgarFraction=function(t){var n=normalizeVulgarFractions(t).replace(/[\u2044]/g,"/"),a=Expression.Integer.fromString(n.slice(0,n.indexOf("/"))).divide(Expression.Integer.fromString(n.slice(n.indexOf("/")+1)));return a},getDecimalFraction=function(t,n,a,s){var l=Expression.ZERO,u=Expression.ONE;if(t!=null&&(l=Expression.Integer.fromString(t)),n!=null){var c=Expression.pow(Expression.TEN,n.length);l=l.multiply(c).add(Expression.Integer.fromString(n)),u=u.multiply(c)}if(a!=null){var c=Expression.pow(Expression.TEN,a.length).subtract(Expression.ONE);l=l.multiply(c).add(Expression.Integer.fromString(a)),u=u.multiply(c)}if(s!=null){var d=0+Number(s),c=Expression.pow(Expression.TEN,d<0?-d:d);d<0?u=u.multiply(c):l=l.multiply(c)}var Ct=l.divide(u);return Ct};ExpressionParser._getDecimalFraction=getDecimalFraction;var parseDecimalFraction=function(t,n,a){var s=!0,l=void 0;if(n.type==="integerLiteral")l=Expression.Integer.fromString(n.value),l=a.wrap(l),n=nextToken(t);else if(n.type==="numericLiteral"){var u=n.value,c=decimalFractionWithGroups.exec(u);s=!1,a.needsWrap?l=new Expression.DecimalFraction(c[1],c[2],c[3],c[4]):l=getDecimalFraction(c[1],c[2],c[3],c[4]),l=a.wrap(l),n=nextToken(t)}//!
if((s||l==null)&&n.type==="vulgarFraction"){var d=a.wrap(getVulgarFraction(n.value));l!=null?l=l.add(d).addPosition(t.previousPosition,t.previousPosition,t.input):l=d,n=nextToken(t)}return l!=null?new ParseResult(l,n):void 0},whiteSpaces=/^\s+/,punctuators=/^(?:[,&(){}|@]|\\\\|(?:\\begin|\\end)(?:\{(?:[bvp]?matrix|gathered)\})?)/,integerLiteral=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))(?!,(?:\d|\(\d+\)))/,integerLiteralWithoutComma=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))/,decimalFraction=/^(?=[.,]?\d)\d*(?:(?:[.]|[.,](?=\d|\(\d+\)))\d*(?:\(\d+\))?)?(?:(?:[eE]|)[\+\-]?\d+)?/,decimalFractionWithoutComma=new RegExp(decimalFraction.source.replace(/,/g,""));const greek="alpha beta gamma delta epsilon zeta eta theta iota kappa lambda mu nu xi omicron pi rho varsigma sigma tau upsilon phi chi psi omega".split(" "),ARABIC_MATHEMATIC_LETTER=/(?:[\u0627\u066E\u062D\u062F\u0633\u0634\u0635\u0639\u0637\u06BE\u062A]|\u062d\u0640\u0640\u0640\u0640)(?![\u0600-\u06FF])/;var symbols=new RegExp(/^(?:GREEK|circ||[a-zA-Z---]|ARABIC_MATHEMATIC_LETTER)(?:\_[0-9]+|\_\([a-z0-9]+,[a-z0-9]+\)|[\u2080-\u2089]+)?/.source.replace(/GREEK/g,greek.join("|")).replace(/ARABIC_MATHEMATIC_LETTER/g,ARABIC_MATHEMATIC_LETTER.source)),superscripts=/^[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]+/,vulgarFractions=/^[\u00BC-\u00BE\u2150-\u215E]/,other=/^(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|\S)/,decimalFractionWithGroups=/^(\d+)?(?:[.,](\d+)?(?:\((\d+)\))?)?(?:(?:[eE]|)([\+\-]?\d+))?$/,normalizeSuperscripts=function(t){return t.replace(/[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]/g,function(n){var a=n.charCodeAt(0);if(a===178)return"2";if(a===179)return"3";if(a===185)return"1";var s=a-8304;return"0i  456789+-=()n".slice(s,s+1)})},normalizeVulgarFractions=function(t){return t.replace(/[\u00BC-\u00BE\u2150-\u215E]/g,function(n){var a=n.charCodeAt(0),s=a-8528<0?(a-188)*2:(3+a-8528)*2;return"141234171911132315253545165618385878".slice(s,s+2).replace(/^\S/g,"$&").replace(/1\u20441/g,"110")})},normalizeSubscripts=function(t){for(var n=t.length-1;n>=0&&t.charCodeAt(n)>=8320&&t.charCodeAt(n)<=8329;)n-=1;return n===t.length-1?t:t.slice(0,n+1)+"_"+t.slice(n+1).replace(/[\u2080-\u2089]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-8320+48)})},normalizeGreek=function(t){var n=t.indexOf("_"),a=n===-1?t.length:n;if(a>1){var s=t.slice(0,a),l=greek.indexOf(s);if(l!==-1)return String.fromCharCode(945+l)+t.slice(a)}return t},parseExpression=function(t,n,a,s,l){var u=!0,c=!1,d=void 0,Ct=void 0;//!
for(;n.type!=="EOF"&&u;){var ar=void 0,en=void 0,tn=n.type==="operator"||n.type==="punctuator"&&n.value===","?operationSearchCache.getByName(n.value):null;if(tn!=null&&(ar=l==null&&tn.name==="+"?UNARY_PLUS:l==null&&tn.name==="-"?UNARY_MINUS:tn),ar!=null&&ar.name==="frac")if(!(l==null&&s<=UNARY_PRECEDENCE_PLUS_ONE||s<MULTIPLICATIVE_PRECEDENCE))u=!1;else{n=nextToken(t),d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var on=d.result;n=d.token,d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var fn=d.result;n=d.token,en=ar.i(on,fn),u=!0}else if(ar!=null)if(!(l!=null&&(ar.arity!==1||ar.rightToLeftAssociative!==RIGHT_TO_LEFT||s<MULTIPLICATIVE_PRECEDENCE)||l==null&&ar.arity===1&&ar.rightToLeftAssociative===RIGHT_TO_LEFT)||s>ar.precedence+(ar.rightToLeftAssociative===RIGHT_TO_LEFT?0:-1))u=!1;else{var dn=t.previousPosition;if(n=nextToken(t),ar.arity===1&&ar.rightToLeftAssociative!==RIGHT_TO_LEFT)ExpressionParser.startPosition=dn,ExpressionParser.endPosition=dn+ar.name.length,ExpressionParser.input=t.input,l=ar.i(l).addPosition(dn,ar.name.length,t.input);else if(ar.arity===1&&ar.rightToLeftAssociative===RIGHT_TO_LEFT&&ar.precedence===UNARY_PRECEDENCE_PLUS_ONE&&ar.name.length>1&&trigonometryFunctions[ar.name]===!0&&(n.type==="operator"&&n.value==="^"||n.type==="superscript"&&/^\d+$/.test(normalizeSuperscripts(n.value)))){//!new 2017-11-04
var Cn=t.position,Rn=0,ax=null;n.type==="superscript"?(ax=Expression.Integer.fromString(normalizeSuperscripts(n.value)),Rn=t.position-t.previousPosition,n=nextToken(t)):(Rn=1,n=nextToken(t),n.type!=="integerLiteral"&&!(n.type==="punctuator"&&(n.value==="{"||n.value==="("))?u=!1:(d=parseExpression(t,n,a,UNARY_PRECEDENCE,void 0),ax=d.result,n=d.token)),u&&(d=parseExpression(t,n,a,ar.precedence,void 0),Ct=d.result,n=d.token,en=ar.i(Ct).addPosition(dn,ar.name.length,t.input).pow(ax).addPosition(Cn,Rn,t.input))}else if(d=parseExpression(t,n,a,ar.precedence,void 0),Ct=d.result,n=d.token,ExpressionParser.startPosition=dn,ExpressionParser.endPosition=dn+ar.name.length,ExpressionParser.input=t.input,ar.arity===1)en=ar.i(Ct).addPosition(dn,ar.name.length,t.input);else if(ar.arity===2)l=ar.i(l,Ct).addPosition(dn,ar.name.length,t.input);else throw new RangeError}else if(l==null||s<MULTIPLICATIVE_PRECEDENCE||s===UNARY_PRECEDENCE_PLUS_ONE&&c&&n.type==="symbol")if((d=parseDecimalFraction(t,n,a))!=null)en=d.result,n=d.token,c=!0;else if(n.type==="punctuator"&&n.value==="(")n=parsePunctuator(t,n,"("),d=parseExpression(t,n,a,0,void 0),en=d.result,n=d.token,n=parsePunctuator(t,n,")");else if(n.type==="punctuator"&&n.value==="{")n=parsePunctuator(t,n,"{"),n.type==="punctuator"&&n.value==="{"?(d=parseMatrix(t,n,a),en=d.result,n=d.token):(d=parseLaTeXArgument(t,n,a),en=d.result,n=d.token,n=parsePunctuator(t,n,"}"));else if(n.type==="punctuator"&&(n.value==="\\begin{bmatrix}"||n.value==="\\begin{vmatrix}"||n.value==="\\begin{pmatrix}"||n.value==="\\begin{matrix}"||n.value==="\\begin{gathered}")){var ox=n.value.slice(7,-1);if(n=nextToken(t),d=parseLaTeXMatrix(t,n,a,"\\\\"),en=d.result,n=d.token,n.type==="punctuator"&&n.value==="\\end{"+ox+"}"&&(n=nextToken(t)),ox==="vmatrix"){en=en.determinant();//!
}}else if(n.type==="symbol"){var sx=n.value;sx=normalizeSubscripts(sx),sx=normalizeGreek(sx),en=a.get(sx),en=a.wrap(en),n=nextToken(t)}else if(n.type==="punctuator"&&n.value==="|")if(l==null||Expression.isScalar(l)){//!
if(n=parsePunctuator(t,n,"|"),d=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0),en=d.result,n=d.token,n=parsePunctuator(t,n,"|"),Expression.isScalar(en))en=en.abs();else{en=en.determinant();//!
}}else s<COMMA_PRECEDENCE?(n=parsePunctuator(t,n,"|"),d=parseExpression(t,n,a,0,void 0),en=d.result,n=d.token,en=l.augment(en),l=void 0):u=!1;else n.type==="punctuator"&&n.value===""?(n=nextToken(t),n=parsePunctuator(t,n,"("),d=parseLaTeXMatrix(t,n,a,"@"),en=d.result,n=d.token,n=parsePunctuator(t,n,")")):u=!1;else u=!1;//!TODO: fix
if(!u&&l!=null&&s<=UNARY_PRECEDENCE+0&&n.type==="superscript"){var lx=ExpressionParser.parse(normalizeSuperscripts(n.value),a);l=l.pow(lx).addPosition(t.previousPosition,t.previousPosition,t.input),n=nextToken(t),u=!0;//!
}if(!u&&n.type==="operator"&&n.value==="\\"&&(u=!0,n=nextToken(t)),en!=null)if(l!=null){var cx=t.position;d=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,en);var fx=d.result;n=d.token,l=l.multiply(fx).addPosition(cx,1,t.input)}else l=en}if(l==null)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"'");return new ParseResult(l,n)};const decimalNumberRegExp$1=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit$1=function(t){let n=0;for(;decimalNumberRegExp$1.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10},map$2={":":"/","[":"(","]":")","":"*","":"*","":"/","":"^",:"",:"A",:"B",:"C",:"T",:"A",:"B",:"C",:"T","":",","":",","":" ","":"-","":"-","":"-","":"-","":"-","":"-","":"*","":" ","":"*","":",","":" ","":"e","":"i","":"-","":"/","":"*","":"","":"","":"*","":"|","":"","":"","":"0","":"(","":")",:"-",:"1",:"7",:"3",:"9",:"2",:"5",:"8",:"6",:"4"},isBidiControl=function(t){return t===1564||t===8206||t===8207||t>=8234&&t<=8238||t>=8294&&t<=8297};var getCodePointReplacement=function(t){if(t>=65281&&t<=65374)return t-65281+33;var n=replaceSimpleDigit$1(t);if(n!==-1)return n+48;if(isBidiControl(t))return 32;if(t>=0&&t<=65535){var a=map$2[String.fromCharCode(t)];if(a!=null&&a.length===1)return a.charCodeAt(0)}return-1},replaceSomeChars=function(t){for(var n=0,a="",s=0;s<t.length;){const c=t.codePointAt(s);var l=c<=65535?1:2;if(c>127||c===58||c===91||c===93){var u=getCodePointReplacement(c);if(u!==-1){if(!(u>=0&&u<=65535))throw new RangeError;a+=t.slice(n,s),a+=String.fromCharCode(u),n=s+l}}s+=l}return a+=t.slice(n),a},config=[{type:"integerLiteral",re:integerLiteral,state:0},{type:"integerLiteral",re:integerLiteralWithoutComma,state:1},{type:"numericLiteral",re:decimalFraction,state:0},{type:"numericLiteral",re:decimalFractionWithoutComma,state:1},{type:"whitespace",re:whiteSpaces,state:-1},{type:"punctuator",re:punctuators,state:-1},{type:"operator",re:null,state:-1},{type:"symbol",re:symbols,state:-1},{type:"vulgarFraction",re:vulgarFractions,state:-1},{type:"superscript",re:superscripts,state:-1},{type:"OTHER",re:other,state:-1}],stateConfigs=[{start:"(",end:")"},{start:"{",end:"}"}];function Token(t,n){this.type=t,this.value=n}Token.EOF=new Token("EOF","");function Tokenizer(t,n,a){this._preparedInput=replaceSomeChars(t.slice(n)),this.input=t,this._preparedInputPosition=0,this.previousPosition=n,this.position=n,this.states=a}Tokenizer.prototype.next=function(){if(this.previousPosition=this.position,this.position>=this.input.length)return Token.EOF;for(var t=0;t<config.length;t+=1){var n=config[t],a=n.type,s=n.re,l=n.state;if(s==null&&a==="operator"&&(s=operationSearchCache.getRegExp()),l===-1||l===(this.states==null?0:this.states.value)){var u=s.exec(this._preparedInput.slice(this._preparedInputPosition));if(u!=null){var c=u[0];if(a==="punctuator")for(var d=0;d<stateConfigs.length;d+=1){var l=stateConfigs[d];c===l.start?this.states={previous:this.states,value:d}:c===l.end&&this.states!=null&&this.states.value===d&&(this.states=this.states.previous)}for(var d=0;d<c.length;d+=c.codePointAt(d)<=65535?1:2)this.position+=this.input.codePointAt(this.position)<=65535?1:2;return this._preparedInputPosition+=c.length,new Token(a,c)}}}throw new TypeError};var fs={};//!TODO: remove!!!
function ExpressionParser(){}ExpressionParser.parse=function(t,n){if(n=n??new ExpressionParser.Context(void 0,!1),ExpressionParser.startPosition=-1,ExpressionParser.endPosition=-1,ExpressionParser.input=t,typeof t!="string")throw new RangeError;if(typeof hit=="function"&&n.getter!=null)for(var a=/[a-z][a-z][a-z\-]+/gi,s=null;(s=a.exec(t))!=null;){var l=s[0];!(l in fs)&&l.indexOf("-")===-1&&(fs[l]=!0,hit({fs:l}))}var u=new Tokenizer(t,0,null),c=nextToken(u),d=parseExpression(u,c,n,0,void 0);if(c=d.token,c.type!=="EOF")throw ExpressionParser.startPosition=u.previousPosition,ExpressionParser.endPosition=u.position,ExpressionParser.input=u.input,new RangeError("UserError: unexpected '"+u.input.slice(u.previousPosition,u.position)+"'");return d.result};globalThis.Tokenizer=Tokenizer;ExpressionParser.startPosition=-1;ExpressionParser.endPosition=-1;ExpressionParser.input="";var getConstant=function(t){return t==="pi"||t===""||t===""?Expression.PI:t==="e"||t===""?Expression.E:t==="i"||t===""?Expression.I:t==="I"||t==="U"||t==="E"?new Expression.IdentityMatrix(t):t==="circ"?Expression.CIRCLE:t===""?Expression.INFINITY:new Expression.Symbol(t)};ExpressionParser.Context=function(t,n){this.getter=t,this.needsWrap=n??!0};ExpressionParser.Context.prototype.get=function(t){if(this.getter!=null){var n=this.getter(t);if(n!=null)return n}return getConstant(t)};ExpressionParser.Context.prototype.wrap=function(t){return this.needsWrap?new Expression.NonSimplifiedExpression(t):t};ExpressionParser.addOperation=function(t,n){var a=n===1?new Operator(t,n,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(s){return s.transformNoAnswerExpression(t)}):new Operator(t,n,RIGHT_TO_LEFT,MULTIPLICATIVE_PRECEDENCE,function(s,l){return s.transformNoAnswerExpression(t,l)});operationSearchCache.append(a)};ExpressionParser.addDenotations=function(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n],s=operationSearchCache.getByName(n),l={};l[n]=!0;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];if(l[c]==null){l[c]=!0;var d=new Operator(c,s.arity,s.rightToLeftAssociative,s.precedence,s.i);operationSearchCache.append(d),trigonometryFunctions[n]&&(trigonometryFunctions[c]=!0)}}}};var idCounter=0;function NonSimplifiedExpression(t,n,a,s){this.e=t,this.position=n??-1,this.length=a??-1,this.input=s??"",this.id=idCounter+=1}NonSimplifiedExpression.prototype=Object.create(Expression.prototype);NonSimplifiedExpression.prototype.negate=function(){return new NonSimplifiedExpression(new Expression.Negation(this))};NonSimplifiedExpression.prototype.add=function(t){return new NonSimplifiedExpression(new Expression.Addition(this,t))};NonSimplifiedExpression.prototype.subtract=function(t){return new NonSimplifiedExpression(new Expression.Subtraction(this,t))};NonSimplifiedExpression.prototype.divide=function(t){return new NonSimplifiedExpression(new Expression.Division(this,t))};NonSimplifiedExpression.prototype.multiply=function(t){return new NonSimplifiedExpression(new Expression.Multiplication(this,t))};NonSimplifiedExpression.prototype.pow=function(t){return new NonSimplifiedExpression(new Expression.Exponentiation(this,t))};NonSimplifiedExpression.prototype.exp=function(){return new NonSimplifiedExpression(Expression.E).pow(this)};NonSimplifiedExpression.prototype.logarithm=function(){return new NonSimplifiedExpression(new Expression.Logarithm(this))};NonSimplifiedExpression.prototype.inverse=function(){return new NonSimplifiedExpression(new Expression.Exponentiation(this,Expression.ONE.negate()))};NonSimplifiedExpression.prototype.factorial=function(){return new NonSimplifiedExpression(new Expression.Factorial(this))};NonSimplifiedExpression.prototype.addExpression=function(t){throw new TypeError};NonSimplifiedExpression.prototype.squareRoot=function(){return new NonSimplifiedExpression(new Expression.SquareRoot(this))};NonSimplifiedExpression.prototype._nthRoot=function(t){return new NonSimplifiedExpression(new Expression.NthRoot(t+"-root",this,t))};NonSimplifiedExpression.prototype.abs=function(){return new NonSimplifiedExpression(new Expression.Function("abs",this))};NonSimplifiedExpression.prototype.cos=function(){return new NonSimplifiedExpression(new Expression.Function("cos",this))};NonSimplifiedExpression.prototype.sin=function(){return new NonSimplifiedExpression(new Expression.Function("sin",this))};NonSimplifiedExpression.prototype.tan=function(){return new NonSimplifiedExpression(new Expression.Function("tan",this))};NonSimplifiedExpression.prototype.cot=function(){return new NonSimplifiedExpression(new Expression.Function("cot",this))};NonSimplifiedExpression.prototype.cosh=function(){return new NonSimplifiedExpression(new Expression.Function("cosh",this))};NonSimplifiedExpression.prototype.sinh=function(){return new NonSimplifiedExpression(new Expression.Function("sinh",this))};NonSimplifiedExpression.prototype.tanh=function(){return new NonSimplifiedExpression(new Expression.Function("tanh",this))};NonSimplifiedExpression.prototype.coth=function(){return new NonSimplifiedExpression(new Expression.Function("coth",this))};NonSimplifiedExpression.prototype.arccos=function(){return new NonSimplifiedExpression(new Expression.Function("arccos",this))};NonSimplifiedExpression.prototype.arcsin=function(){return new NonSimplifiedExpression(new Expression.Function("arcsin",this))};NonSimplifiedExpression.prototype.arctan=function(){return new NonSimplifiedExpression(new Expression.Function("arctan",this))};NonSimplifiedExpression.prototype.arccot=function(){return new NonSimplifiedExpression(new Expression.Function("arccot",this))};NonSimplifiedExpression.prototype.arcosh=function(){return new NonSimplifiedExpression(new Expression.Function("arcosh",this))};NonSimplifiedExpression.prototype.arsinh=function(){return new NonSimplifiedExpression(new Expression.Function("arsinh",this))};NonSimplifiedExpression.prototype.artanh=function(){return new NonSimplifiedExpression(new Expression.Function("artanh",this))};NonSimplifiedExpression.prototype.arcoth=function(){return new NonSimplifiedExpression(new Expression.Function("arcoth",this))};NonSimplifiedExpression.prototype.rank=function(){return new NonSimplifiedExpression(new Expression.Rank(this))};NonSimplifiedExpression.prototype.determinant=function(){return new NonSimplifiedExpression(new Expression.Determinant(this))};Expression.Pseudoinverse.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pseudoinverse()};NonSimplifiedExpression.prototype.pseudoinverse=function(){return new NonSimplifiedExpression(new Expression.Pseudoinverse(this))};NonSimplifiedExpression.prototype.rowReduce=function(){return new NonSimplifiedExpression(new Expression.RowReduce(this))};NonSimplifiedExpression.prototype.GF2=function(){return new NonSimplifiedExpression(new Expression.GF2(this))};NonSimplifiedExpression.prototype.transpose=function(){return new NonSimplifiedExpression(new Expression.Transpose(this))};NonSimplifiedExpression.prototype.complexConjugate=function(){return new NonSimplifiedExpression(new Expression.ComplexConjugate(this))};NonSimplifiedExpression.prototype.complexArgument=function(){return new NonSimplifiedExpression(new Expression.ComplexArgument(this))};NonSimplifiedExpression.prototype.adjugate=function(){return new NonSimplifiedExpression(new Expression.Adjugate(this))};NonSimplifiedExpression.prototype.elementWisePower=function(t){return new NonSimplifiedExpression(new Expression.ElementWisePower(this,t))};NonSimplifiedExpression.prototype.transformNoAnswerExpression=function(t,n){return new NonSimplifiedExpression(new Expression.NoAnswerExpression(this,t,n))};NonSimplifiedExpression.prototype.transformEquality=function(t){return new NonSimplifiedExpression(new Expression.Equality(this,t))};NonSimplifiedExpression.prototype.transformInequality=function(t,n){return new NonSimplifiedExpression(new Expression.Inequality(this,t,n))};NonSimplifiedExpression.prototype.transformComma=function(t){return new NonSimplifiedExpression(new Expression.Comma(this,t))};NonSimplifiedExpression.prototype.derivative=function(t){return new NonSimplifiedExpression(new Expression.Derivative(this,t))};NonSimplifiedExpression.prototype.addPosition=function(t,n,a){return new NonSimplifiedExpression(this.e,t,n,a)};var prepare$1=function(t,n){var a=t.simplify();return ExpressionParser.startPosition=n.position,ExpressionParser.endPosition=n.position+n.length,ExpressionParser.input=n.input,a};Expression.prototype.simplifyInternal=function(t){return this};Expression.Exponentiation.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pow(prepare$1(this.b,t))};Expression.Multiplication.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).multiply(prepare$1(this.b,t))};Expression.Addition.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).add(prepare$1(this.b,t))};Expression.Division.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).divide(prepare$1(this.b,t))};Expression.SquareRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).squareRoot()};Expression.NthRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)._nthRoot(this.n)};Expression.Function.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)[this.name]()};Expression.Logarithm.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).logarithm()};Expression.Rank.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rank()};Expression.Determinant.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).determinant()};Expression.RowReduce.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rowReduce()};Expression.GF2.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).GF2()};Expression.Transpose.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transpose()};Expression.ComplexConjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexConjugate()};Expression.ComplexArgument.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexArgument()};Expression.Adjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).adjugate()};Expression.NoAnswerExpression.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformNoAnswerExpression(this.name,this.second==null?void 0:prepare$1(this.second,t))};Expression.Equality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformEquality(prepare$1(this.b,t))};Expression.Inequality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformInequality(prepare$1(this.b,t),this.sign)};Expression.Matrix.prototype.simplifyInternal=function(t){return new Expression.Matrix(this.matrix.map(function(n,a,s){return prepare$1(n,t)}))};Expression.Radians.prototype.simplifyInternal=function(t){return new Expression.Radians(prepare$1(this.value,t))};Expression.Comma.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformComma(prepare$1(this.b,t))};Expression.Derivative.prototype.simplifyInternal=function(t){return prepare$1(this.symbol,t).derivative(this.variable)};Expression.prototype.simplify=function(){return this};NonSimplifiedExpression.prototype.simplify=function(){return this.e.simplify().simplifyInternal(this).simplifyExpression()};NonSimplifiedExpression.prototype.toString=function(t){return this.e.toString(t)};NonSimplifiedExpression.prototype.equals=function(t){return this.simplify().equals(t.simplify())};//!
NonSimplifiedExpression.prototype.unwrap=function(){return this.e};Expression.Negation.prototype.simplifyInternal=function(t){return prepare$1(this.b,t).negate()};Expression.Subtraction.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).subtract(prepare$1(this.b,t))};NonSimplifiedExpression.prototype.isUnaryPlusMinus=function(){return this.e.isUnaryPlusMinus()};NonSimplifiedExpression.prototype.getPrecedence=function(){return this.e.getPrecedence()};Expression.ElementWisePower.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).elementWisePower(prepare$1(this.b,t))};Expression.Factorial.prototype.simplifyInternal=function(t){return prepare$1(this.n,t).factorial()};NonSimplifiedExpression.prototype.getId=function(){return"e"+this.id.toString()};Expression.prototype.getIds=function(){return""};Expression.BinaryOperation.prototype.getIds=function(){var t=this.a.getIds(),n=this.b.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.getIds=function(){var t=this.getId(),n=this.e.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.isNegative=function(){return!1};NonSimplifiedExpression.prototype.negateCarefully=function(){return new NonSimplifiedExpression(this.e.negateCarefully())};NonSimplifiedExpression.prototype.isRightToLeftAssociative=function(){return this.e.isRightToLeftAssociative()};NonSimplifiedExpression.prototype.isExact=function(){return this.e.isExact()};Expression.DecimalFraction=function(t,n,a,s){this.integer=t,this.transient=n,this.repetend=a,this.exponent=s};Expression.DecimalFraction.prototype=Object.create(Expression.prototype);Expression.DecimalFraction.prototype.getPrecedence=function(){return 1e3};Expression.DecimalFraction.prototype.simplifyInternal=function(){return ExpressionParser._getDecimalFraction(this.integer,this.transient,this.repetend,this.exponent)};Expression.DecimalFraction.prototype.toString=function(){return(this.integer||"0")+"."+(this.transient||"")+(this.repetend!=null?"("+this.repetend+")":"")+(this.exponent!=null?"E"+this.exponent:"")};NonSimplifiedExpression.prototype.augment=function(t){return new NonSimplifiedExpression(new Expression.AugmentedMatrix(this,t))};Expression.AugmentedMatrix.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).augment(prepare$1(this.b,t))};Expression.NonSimplifiedExpression=NonSimplifiedExpression;function SimpleFloat(t,n){this.significand=t,this.exponent=n}SimpleFloat.create=function(t){var n=t.getNumerator(),a=t.getDenominator();if(!(n instanceof Expression.Integer)||!(a instanceof Expression.Integer))throw new TypeError;var s=0;if(a!==Expression.ONE&&(s=a.bitLength()-1,!Expression.TWO._pow(s).equals(a)))throw new TypeError;return new SimpleFloat(n,0-s)};SimpleFloat.prototype.toExpression=function(){return this.significand.multiply(this.exponent>=0?Expression.TWO._pow(this.exponent):Expression.TWO._pow(-this.exponent).inverse())};SimpleFloat.prototype.multiply=function(t){return new SimpleFloat(this.significand.multiply(t.significand),this.exponent+t.exponent)};SimpleFloat.prototype.add=function(t){const n=Math.min(this.exponent,t.exponent);return new SimpleFloat(this.significand.leftShift(this.exponent-n).add(t.significand.leftShift(t.exponent-n)),n)};SimpleFloat.prototype.negate=function(){return new SimpleFloat(this.significand.negate(),this.exponent)};SimpleFloat.prototype.sign=function(){return this.significand.sign()};SimpleFloat.prototype.toString=function(){return this.significand.toString()+"*2**"+this.exponent};SimpleFloat.prototype.round=function(t,n){if(this.exponent!==0-n){if(t==="floor"){var a=new SimpleFloat(this.significand.leftShift(this.exponent+n),0-n);if(a.add(this.negate()).sign()>0)throw new Error;return a}if(t==="ceil"){var a=new SimpleFloat(this.significand.negate().leftShift(this.exponent+n).negate(),0-n);if(a.add(this.negate()).sign()<0)throw new Error;return a}throw new RangeError}return this};var isRational=function(t){return t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer},isPowerOf2=function(t){return Expression.TWO._pow(t.bitLength()-1).equals(t)};function SimpleInterval(t,n){if(!(t instanceof SimpleFloat)||!(n instanceof SimpleFloat)||t.add(n.negate()).sign()>0)throw new TypeError;this.a=t,this.b=n}SimpleInterval.from=function(t){return new SimpleInterval(SimpleFloat.create(t.a),SimpleFloat.create(t.b))};SimpleInterval.prototype.toExpressionsInterval=function(){return{a:this.a.toExpression(),b:this.b.toExpression()}};SimpleInterval.prototype.negate=function(){return new SimpleInterval(this.b.negate(),this.a.negate())};SimpleInterval.prototype.add=function(t){return new SimpleInterval(this.a.add(t.a),this.b.add(t.b))};SimpleInterval.prototype.multiply=function(t){var n=function(sx){return sx.sign()};const a=function(sx,lx,cx,fx){return new SimpleInterval(sx.multiply(lx),cx.multiply(fx))},s=this.a,l=this.b,u=t.a,c=t.b,d=n(s),Ct=n(l),ar=n(u),en=n(c);if(d>=0)return ar>=0?a(s,u,l,c):en<=0?a(l,u,s,c):a(l,u,l,c);if(Ct<=0)return en<=0?a(l,c,s,u):ar>=0?a(s,c,l,u):a(s,c,s,u);if(ar>=0)return a(s,c,l,c);if(en<=0)return a(l,u,s,u);const tn=s.multiply(u),on=l.multiply(u),fn=s.multiply(c),dn=l.multiply(c);var Cn=function(sx,lx){return sx.subtract(lx).sign()<0?sx:lx},Rn=function(sx,lx){return sx.subtract(lx).sign()<0?lx:sx};const ax=Cn(Cn(tn,on),Cn(fn,dn)),ox=Rn(Rn(tn,on),Rn(fn,dn));return new SimpleInterval(ax,ox)};SimpleInterval.prototype.scale=function(t){return this.multiply(SimpleInterval.from({a:t,b:t}))};SimpleInterval.prototype.inverse=function(t){var n=function(c){return c.sign()};if(n(this.a)<0&&n(this.b)>0)throw new TypeError;if(t==null){debugger;throw new TypeError}var a=this.toExpressionsInterval();//!TODO: REMOVE
var s=Expression.TWO._pow(t+Math.max(a.b.getNumerator().abs().bitLength(),a.a.getNumerator().abs().bitLength())),l=function(c,d,Ct){if(Ct==="floor")return d.sign()<0&&(c=c.negate(),d=d.negate()),c.sign()>=0?c.truncatingDivide(d):c.add(Expression.ONE).truncatingDivide(d).subtract(Expression.ONE);if(Ct==="ceil")return l(c.negate(),d,"floor").negate();throw new TypeError},u=function(c,d,Ct){return l(c,d.getNumerator(),Ct).divide(c).multiply(d.getDenominator())};return SimpleInterval.from({a:u(s,a.b,"floor"),b:u(s,a.a,"ceil")})};SimpleInterval.prototype._pow=function(t){return t%2===0?t===0?SimpleInterval.from({a:Expression.ONE,b:Expression.ONE}):this.multiply(this)._pow(t/2):new SimpleInterval(this.a._pow(t),this.b._pow(t))};SimpleInterval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};SimpleInterval.prototype.round=function(t){return new SimpleInterval(this.a.round("floor",t),this.b.round("ceil",t))};const intersection=function(t,n){var a=function(u,c){return u.subtract(c).getNumerator().sign()},s=function(u,c){return a(u,c)<0?c:u},l=function(u,c){return a(u,c)<0?u:c};return a(n.a,t.b)>0||a(t.a,n.b)>0?null:{a:s(t.a,n.a),b:l(t.b,n.b)}},toSimpleInterval=function(t,n){if(t instanceof Expression.Integer)return SimpleInterval.from({a:t,b:t});if(t instanceof Expression.BinaryOperation){var a=toSimpleInterval(t.a,n),s=toSimpleInterval(t.b,n),l=t.getS();if(l==="+")return a.add(s);if(l==="-")return a.add(s.negate());if(l==="*")return a.multiply(s);if(l==="/")return a.multiply(s.inverse(n));if(l==="^"){if(t.b instanceof Expression.Integer){var u=t.b.toBigInt();return a._pow(u)}}else debugger}else if(t instanceof Expression.NthRoot){const en=t.n;if(console.assert(en>=2&&en%1===0),t.a instanceof Expression.Integer&&t.a.sign()>0){var a=t.a,c=Expression.TWO._pow(n),d=a.multiply(c._pow(en))._integerNthRoot(en);return SimpleInterval.from({a:d.divide(c),b:d.add(Expression.ONE).divide(c)})}var a=toSimpleInterval(t.a,n);if(en%2===0)for(var Ct=2;a.a.sign()<0&&a.b.sign()>0;)a=toSimpleInterval(t.a,n*Ct),Ct*=2;var ar=function(on,fn,dn){var Cn=Expression.TWO._pow(n),Rn=dn==="floor"?on.getNumerator().sign()>=0?Expression.ZERO:Expression.ONE.negate():on.getNumerator().sign()<0?Expression.ZERO:Expression.ONE;return on.getNumerator().multiply(on.getDenominator()._pow(fn-1)).multiply(Cn._pow(fn))._integerNthRoot(fn).add(Rn).divide(Cn.multiply(on.getDenominator()))};return a=a.toExpressionsInterval(),SimpleInterval.from({a:ar(a.a,en,"floor"),b:ar(a.b,en,"ceil")})}if(t instanceof PolynomialRoot||t instanceof Expression.PolynomialRootSymbol)return SimpleInterval.from(t.toDecimal(n));if(t instanceof Expression.ExpressionPolynomialRoot)return SimpleInterval.from(t.root.toDecimal(n));debugger;throw new TypeError("?")};function Helper(t){this.squareFreeFactors=[];var n=null;const a=Polynomial$1.of(Expression.ONE);do n=t.squareFreeFactors(),n.a1.equals(a)||this.squareFreeFactors.push(n.a1),n.a0.getDegree()!==0?t=n.a0:t=null;while(t!=null)}Helper.prototype.calcAt=function(t){var n=Expression.ONE;for(var a of this.squareFreeFactors)n=n.multiply(a.calcAt(t));return n};Helper.prototype.numberOfRoots=function(t){var n=0,a=[];for(var s of this.squareFreeFactors){var l=s.numberOfRoots(t.toExpressionsInterval());n+=l,l>0&&a.push(s)}return this.squareFreeFactors=a,n};Helper.get=function(t,n){return t.squareFreeFactors.length===1?t.squareFreeFactors[0]:null};var calculateNewInterval=function(t,n,a){if(!t.hasIntegerCoefficients())throw new RangeError("just a check");t=new Helper(t);//!?!?TODO: REMOVE
var s=8,l=n(s);for(l=l.round(s);l.a.sign()!==l.b.sign()&&!t.calcAt(Expression.ZERO).equals(Expression.ZERO)||t.numberOfRoots(l)>1;)if(s*=2,l=n(s),l=l.round(s),s>1024)throw new Error;var u=l;return t=Helper.get(t,l),new PolynomialRoot(t,u.toExpressionsInterval(),a)};function PolynomialRoot(t,n,a={}){if(!t.hasIntegerCoefficients())throw new TypeError;if(t.getLeadingCoefficient().sign()<0)return new PolynomialRoot(t.negate(),n);var s=t.getContent();if(!s.equals(Expression.ONE))return new PolynomialRoot(t.scale(s.inverse()),n);if(!a.skipFactorization){//!
var l=function(){const d=t._factorizeOverTheIntegers();for(let Ct=d.next().value;Ct!=null;Ct=d.next().value)if(Ct.numberOfRoots(n)!==0)return Ct;return null};let c=t.isSquareFreePolynomial()?l():t.factorize();if(c!=null&&!c.equals(t)){if(c.numberOfRoots(n)!==0)return new PolynomialRoot(c,n);var u=t.divideAndRemainder(c,"throw").quotient;return new PolynomialRoot(u,n)}}if(n instanceof SimpleInterval)throw new TypeError;if(n.a.subtract(n.b).getNumerator().sign()>0)throw new TypeError;if(!a.skipFactorization){//!
if(t.numberOfRoots(n)!==1)throw new TypeError}if(!t.getContent().equals(Expression.ONE))throw new TypeError;this.polynomial=t,this.interval=n}PolynomialRoot.prototype.toDecimal=function(t){return t<=0?this.interval:this.polynomial.getZero(this.interval,t)};PolynomialRoot.prototype.toString=function(){return"[root of "+this.polynomial+" near "+this.interval.a.add(this.interval.b).divide(Expression.TWO).toString()+"]"};PolynomialRoot.prototype.scale=function(t){var n=this.polynomial._scaleRoots(t).primitivePart();if(!isRational(t)){var a=this;return n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(l){return toSimpleInterval(a,l).multiply(toSimpleInterval(t,l))})}if(!isPowerOf2(t.getDenominator())){var a=this;return calculateNewInterval(n,function(u){return toSimpleInterval(a,u).multiply(toSimpleInterval(t,u))})}var s=SimpleInterval.from(this.interval).scale(t).toExpressionsInterval();return new PolynomialRoot(n,s,{skipFactorization:!0})};PolynomialRoot.prototype.translate=function(t){var n=this.polynomial._translateRoots(t).primitivePart(),a=this;return isRational(t)?calculateNewInterval(n,function(s){return toSimpleInterval(a,s).add(toSimpleInterval(t,s))},{skipFactorization:!0}):(n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(s){return toSimpleInterval(a,s).add(toSimpleInterval(t,s))}))};PolynomialRoot.prototype.multiply=function(t){var n=this;{let d=Math.gcd(n.polynomial.getGCDOfTermDegrees(),t.polynomial.getGCDOfTermDegrees());if(d>1){var a=n._pow(d).multiply(t._pow(d))._nthRoot(d);return d%2===0&&n.sign()*t.sign()<0&&(a=a.negate()),a}}const s=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),l=d=>new Expression.Polynomial(Polynomial$1.of(d));var u=t.polynomial._exponentiateRoots(-1).map(l)._scaleRoots(s),c=Polynomial$1.resultant(n.polynomial.map(l),u).polynomial.primitivePart();return calculateNewInterval(c,function(d){return toSimpleInterval(n,d).multiply(toSimpleInterval(t,d))})};PolynomialRoot.prototype.add=function(t){var n=this;if(n.polynomial.isEven()&&n.polynomial.equals(t.polynomial)&&n.equals(t.negate()))return new PolynomialRoot(Polynomial$1.of(Expression.ONE).shift(1),{a:Expression.ONE.negate(),b:Expression.ONE});const a=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),s=c=>new Expression.Polynomial(Polynomial$1.of(c));var l=t.polynomial._scaleRoots(Expression.ONE.negate()).map(s)._translateRoots(a),u=Polynomial$1.resultant(n.polynomial.map(s),l).polynomial.primitivePart();return calculateNewInterval(u,function(c){return toSimpleInterval(n,c).add(toSimpleInterval(t,c))})};PolynomialRoot.prototype.negate=function(){return new PolynomialRoot(this.polynomial._scaleRoots(Expression.ONE.negate()),{b:this.interval.a.negate(),a:this.interval.b.negate()})};PolynomialRoot.prototype.inverse=function(){var t=this.polynomial._exponentiateRoots(-1);console.assert(this.interval.a.getNumerator().sign()===this.interval.b.getNumerator().sign());var n=this;return calculateNewInterval(t,function(a){return toSimpleInterval(n,a).inverse(a)})};PolynomialRoot.prototype.sign=function(){if(this.polynomial.getCoefficient(0).equals(Expression.ZERO)&&this.interval.a.getNumerator().sign()<=0&&this.interval.b.getNumerator().sign()>=0)return 0;if(this.interval.a.getNumerator().sign()>=0)return 1;if(this.interval.b.getNumerator().sign()<=0)return-1;throw new TypeError("should not happen")};PolynomialRoot.prototype._pow=function(t){var n=function(l,u,c){if(!(u>=0))throw new RangeError;if(u>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return u<1?c:2*Math.floor(u/2)!==u?n(l,u-1,c.multiply(l)):n(l._pow(2),Math.floor(u/2),c)};if(t===0)return new PolynomialRoot(Polynomial$1.of(Expression.ONE.negate(),Expression.ONE),SimpleInterval.from({a:Expression.ZERO,b:Expression.TWO}));var a=Math.gcd(t,this.polynomial.getGCDOfTermDegrees());if(a===1)return n(this,t-1,this);if(a<t)return this._pow(a)._pow(t/a);var s=void 0;return t%2===0&&this.interval.b.getNumerator().sign()<=0?s={a:this.interval.b._pow(t),b:this.interval.a._pow(t)}:s={a:this.interval.a._pow(t),b:this.interval.b._pow(t)},new PolynomialRoot(this.polynomial._exponentiateRoots(t),s)};const $=function(){return new Expression.Symbol("")};PolynomialRoot.prototype._nthRoot=function(t){var n=this.polynomial._exponentiateRoots(1/t),a=this;return calculateNewInterval(n,function(s){return toSimpleInterval(Expression.NthRoot.makeRoot(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),a)),t),s)})};PolynomialRoot.prototype.equals=function(t){if(this===t)return!0;if(this.polynomial.getDegree()!==t.polynomial.getDegree())return!1;if(this.polynomial.equals(t.polynomial)&&this.interval.a.equals(t.interval.a)&&this.interval.b.equals(t.interval.b))return!0;const n=intersection(this.interval,t.interval);if(n==null)return!1;if(this.polynomial.equals(t.polynomial)){const s=this.polynomial.numberOfRoots(n);if(s===1)return!0;if(s===0)return!1;throw new TypeError}if(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial).getDegree()===0)return!1;var a=this.add(t.negate()).interval;return a.a.getNumerator().sign()<=0&&a.b.getNumerator().sign()>=0};PolynomialRoot._calculateNewInterval=calculateNewInterval;LazyPolynomialRoot._calculateNewInterval=calculateNewInterval;PolynomialRoot._toSimpleInterval=toSimpleInterval;LazyPolynomialRoot._toSimpleInterval=toSimpleInterval;var _isSimpleForUpgrade=function(t,n){if(t instanceof Expression.Multiplication){return!0;//!?
}return t instanceof Expression.Addition&&!(t.a instanceof Expression.Addition)?_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n):t.equals(n)||t instanceof Expression.Integer||t instanceof Expression.Complex||t instanceof Expression.NthRoot||t instanceof Expression.Exponentiation&&_isSimpleForUpgrade(t.a,n)&&t.b instanceof Expression.Integer||t instanceof Expression.Multiplication&&_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n)||t instanceof Expression.Division&&_isSimpleForUpgrade(t.getNumerator(),n)&&t.b instanceof Expression.Integer};PolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;LazyPolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;function LazyPolynomialRoot(t,n,a){if(!(t instanceof Polynomial$1))throw new TypeError;if(!(n instanceof Polynomial$1)||n.getDegree()!==0)throw new TypeError;if(!t._testCoefficients(s=>!(s instanceof Expression.Division)))throw new TypeError;console.assert(a instanceof PolynomialRoot),this._p1=t,this._p2=n,this._root=a}LazyPolynomialRoot.prototype.toDecimal=function(t){var n=function(Ct,ar,en){for(var tn=toSimpleInterval(Expression.ZERO,en),on=Ct.getDegree();on>=0;on--){tn=tn.multiply(ar);var fn=toSimpleInterval(Ct.getCoefficient(on),Math.max(1,en));tn=tn.add(fn)}return tn},a=toSimpleInterval(this._root,t),s=this._p1,l=this._p2,u=n(s,a,t),c=n(l,a,t),d=u.multiply(c.inverse(t));return d.toExpressionsInterval()};LazyPolynomialRoot.prototype.toString=function(){return"["+this.getAlphaExpression()+", where "+this._root+"]"};function makeExpressionWithPolynomialRoot(t,n,a){var s=a;if(n.getDegree()!==0||!(n.getCoefficient(0)instanceof Expression.Integer)){const ar=n.modularInverse(a.polynomial).primitivePart(),en=n.multiply(ar).divideAndRemainder(a.polynomial).remainder;if(n.getDegree()>0){var u=en.getContent().getDenominator();return makeExpressionWithPolynomialRoot(t.multiply(ar).scale(u),en.scale(u),a)}}var l=function(ar,en){if(!(en.getLeadingCoefficient()instanceof Expression.Integer)){var tn=Expression.getConjugate(en.getLeadingCoefficient());return l(ar.scale(tn),en.scale(tn))}var on=ar.getContent().gcd(en.getContent());return on.equals(Expression.ONE)||(ar=ar.scale(on.inverse()),en=en.scale(on.inverse())),[ar,en]};if(t.equals(Polynomial$1.ZERO))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)];if(t.getDegree()===0&&n.getDegree()===0)return l(t,n);//!
var u=function(ar){return ar.divideAndRemainder(s.polynomial).remainder};t=u(t),n=u(n);var c=t.map(ar=>ar.getDenominator().inverse()).getContent().getDenominator();if(t=t.scale(c),n=n.scale(c),!t.hasIntegerCoefficients()){var d=!0;if(a instanceof PolynomialRoot){var Ct=new LazyPolynomialRoot(t,Polynomial$1.of(Expression.ONE),a).toDecimal(53);//!new - trying to optimize (!)
d=Ct.b.sign()>=0&&Ct.a.sign()<=0}if(d&&t.hasRoot(s))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)]}return l(t,n)}PolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;LazyPolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;function simplifyExpressionWithPolynomialRoot(t,n,a){const s=makeExpressionWithPolynomialRoot(t,n,a);return new LazyPolynomialRoot(s[0],s[1],a)}PolynomialRoot.create=function(t,n,a){return new PolynomialRoot(t,n,a)};LazyPolynomialRoot.create=function(t,n,a){return fromRoot(new PolynomialRoot(t,n,a))};function fromRoot(t){return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),t)}LazyPolynomialRoot.prototype.scale=function(t){console.assert(Expression.isRealAlgebraicNumber(t));var n=this._p1.scale(t.getNumerator()),a=this._p2.scale(t.getDenominator());return t instanceof Expression.Integer?new LazyPolynomialRoot(n,a,this._root):simplifyExpressionWithPolynomialRoot(n,a,this._root)};LazyPolynomialRoot.prototype.translate=function(t){return console.assert(Expression.isRealAlgebraicNumber(t)),simplifyExpressionWithPolynomialRoot(this._p1.scale(t.getDenominator()).add(this._p2.scale(t.getNumerator())),this._p2.scale(t.getDenominator()),this._root)};var toPolynomialWithIntegerCoefficients=function(t){if(!t.hasIntegerCoefficients()){var n=new Expression.Symbol("$$"),a=t.calcAt(n),s=Expression.getConjugateExpression(a);if(s!=null&&!s.equals(a))return Polynomial$1.toPolynomial(s,n)}return t};function upgrade(t,n,a){if(n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getCoefficient(1).equals(Expression.ONE)&&a.getDegree()===0)return a.getCoefficient(0).equals(Expression.ONE)?t:t.scale(a.getCoefficient(0).inverse());if(n.equals(Polynomial$1.ZERO))return PolynomialRoot.create(Polynomial$1.of(Expression.ZERO,Expression.ONE),{a:Expression.ZERO,b:Expression.ZERO});if(n.getDegree()===0&&a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)){const d=n.getCoefficient(0);return PolynomialRoot.create(Polynomial$1.of(d.negate(),Expression.ONE),{a:d,b:d})}if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===n.getGCDOfTermDegrees()&&n.getLeadingCoefficient().equals(Expression.ONE)&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getDegree()===t.polynomial.getGCDOfTermDegrees())return t._pow(n.getDegree());if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===1&&n.getCoefficient(1).equals(Expression.ONE))return t.translate(n.getCoefficient(0));if(a.getDegree()===0&&n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO))return t.scale(n.getCoefficient(1).divide(a.getCoefficient(0)));var s=Expression.ONE;a.getDegree()===0&&a.hasIntegerCoefficients()&&(s=a.getLeadingCoefficient(),a=Polynomial$1.of(Expression.ONE));var l=n.subtract(Polynomial$1.of(new Expression.Symbol("")).multiply(a));l=toPolynomialWithIntegerCoefficients(l);const u=d=>new Expression.Polynomial(Polynomial$1.of(d));l=l.map(d=>new Expression.Polynomial(Polynomial$1.toPolynomial(d,new Expression.Symbol(""))));var c=Polynomial$1.resultant(l,t.polynomial.map(u)).polynomial.primitivePart();return s!==Expression.ONE&&(c=c._scaleRoots(s.inverse()).primitivePart()),PolynomialRoot._calculateNewInterval(c,function(d){return toSimpleInterval(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(n,a.scale(s),t)),d)})}LazyPolynomialRoot.prototype.multiply=function(t){if(this._root.equals(t._root))return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p1),this._p2.multiply(t._p2),this._root);var n=upgrade(this._root,this._p1,this._p2).multiply(upgrade(t._root,t._p1,t._p2));return fromRoot(n)};LazyPolynomialRoot.prototype.add=function(t){if(this._root.equals(t._root)){var n=t._p2.getContent().gcd(this._p2.getContent());return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p2.scale(n.inverse())).add(t._p1.multiply(this._p2.scale(n.inverse()))),this._p2.scale(n.inverse()).multiply(t._p2.scale(n.inverse())).scale(n),this._root)}var a=upgrade(this._root,this._p1,this._p2).add(upgrade(t._root,t._p1,t._p2));return fromRoot(a)};LazyPolynomialRoot.prototype.negate=function(){return new LazyPolynomialRoot(this._p1.negate(),this._p2,this._root)};LazyPolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot(this._p2,this._p1,this._root)};LazyPolynomialRoot.prototype.sign=function(){if(this._p1.equals(Polynomial$1.ZERO))return 0;let t=1;for(;;){var n=this.toDecimal(t);if(n.a.getNumerator().sign()>=0)return 1;if(n.b.getNumerator().sign()<=0)return-1;t*=2,t>8&&console.debug("hm...")}};LazyPolynomialRoot.prototype._pow=function(t){return simplifyExpressionWithPolynomialRoot(this._p1._pow(t),this._p2._pow(t),this._root)};LazyPolynomialRoot.prototype._nthRoot=function(t){if(this._p2.getDegree()===0&&this._p2.getCoefficient(0).equals(Expression.ONE)&&this._p1.getDegree()===1&&this._p1.getCoefficient(0).equals(Expression.ZERO)&&this._p1.getCoefficient(1).equals(Expression.ONE)){var n=this._root._nthRoot(t);return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),n)}var a=function(u,c){var d=u.getSquareFreePolynomial();return d._pow(c).equals(u)?d:null},s=a(this._p1,t);const l=this._p2.getCoefficient(0);return s!=null&&this._p2.getDegree()===0&&l instanceof Expression.Integer&&l.sign()>0?simplifyExpressionWithPolynomialRoot(s,Polynomial$1.of(l._nthRoot(t)),this._root):this.upgrade()._nthRoot(t)};LazyPolynomialRoot.prototype.equals=function(t){if(this._root.equals(t._root))return this._p1.equals(t._p1)&&this._p2.equals(t._p2)||this.add(t.negate()).sign()===0;//!TODO: remove (hack to avoid error)
if(toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(this),{significantDigits:3})!==toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(t),{significantDigits:3}))return!1;//!
var n=upgrade(this._root,this._p1,this._p2).equals(upgrade(t._root,t._p1,t._p2));return n};PolynomialRoot.prototype.upgrade=function(){return this};LazyPolynomialRoot.prototype.upgrade=function(){return fromRoot(upgrade(this._root,this._p1,this._p2))};PolynomialRoot.prototype._calc=function(t){return upgrade(this,t.calcAt($()))};LazyPolynomialRoot.prototype._calc=function(t){var n=t.calcAt(this.getAlphaExpression());return simplifyExpressionWithPolynomialRoot(Polynomial$1.toPolynomial(n.getNumerator(),$()),Polynomial$1.toPolynomial(n.getDenominator(),$()),this._root)};PolynomialRoot.prototype.getAlpha=function(t){return{polynomial:this.polynomial,interval:this.interval}};LazyPolynomialRoot.prototype.getAlpha=function(t){return this._root.getAlpha()};PolynomialRoot.prototype.getAlphaExpression=function(t){return $()};LazyPolynomialRoot.prototype.getAlphaExpression=function(t){return this._p1.calcAt($()).divide(this._p2.calcAt($()))};PolynomialRoot.prototype.getAlphaPolynomial=function(t){return Polynomial$1.of(Expression.ZERO,Expression.ONE)};LazyPolynomialRoot.prototype.getAlphaPolynomial=function(t){return[this._p1,this._p2]};globalThis.testables=globalThis.testables||{};globalThis.testables.LazyPolynomialRoot=LazyPolynomialRoot;globalThis.testables.PolynomialRoot=PolynomialRoot;globalThis.testables.toSimpleInterval=toSimpleInterval;globalThis.testables.SimpleInterval=SimpleInterval;console.assert(Object.keys(PolynomialRoot).join(" ")===Object.keys(LazyPolynomialRoot).join(" ")),console.assert(Object.keys(PolynomialRoot.prototype).join(" ")===Object.keys(LazyPolynomialRoot.prototype).join(" ")),console.assert(PolynomialRoot.prototype.__proto__===LazyPolynomialRoot.prototype.__proto__);Expression.PolynomialRootSymbol=function(){throw new TypeError};function ExpressionWithPolynomialRoot(){throw new TypeError}Expression.ExpressionWithPolynomialRoot=ExpressionWithPolynomialRoot;function ExpressionPolynomialRoot(t){const n=t.getAlpha(),[a,s]=t.getAlphaPolynomial(),l=n.polynomial,u=n.interval;if(a.getDegree()<=0&&s.getDegree()<=0)return a.getCoefficient(0).divide(s.getCoefficient(0));if(l.getDegree()===1||l.getDegree()===2||l.getDegree()===4&&!1||l.getDegree()===l.getGCDOfTermDegrees()){var c=l.getDegree()===l.getGCDOfTermDegrees()&&l.getDegree()%2===1?[l.getCoefficient(0).negate().divide(l.getLeadingCoefficient())._nthRoot(l.getDegree())]:l.getroots();for(var d of c)if(!Expression.has(d,ExpressionPolynomialRoot)&&(Expression._isPositive(d.subtract(u.a))&&Expression._isPositive(d.subtract(u.b).negate())||d.equals(u.b)||d.equals(u.a))){if(a.getDegree()===1&&a.getCoefficient(0).equals(Expression.ZERO)&&a.getCoefficient(1).equals(Expression.ONE)&&s.getDegree()===0&&s.getCoefficient(0).equals(Expression.ONE))return d;var Ct=a.calcAt(d),ar=s.calcAt(d);return Ct.divide(ar)}}if(l.getDegree()<3)throw new TypeError;if(l.getDegree()/l.getGCDOfTermDegrees()>4096)throw new Error;Expression.Symbol.call(this,null),this.root=t,Object.freeze(this)}ExpressionPolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);ExpressionPolynomialRoot.create=function(t,n,a){return new ExpressionPolynomialRoot(LazyPolynomialRoot.create(t,n,a))};ExpressionPolynomialRoot.prototype.multiplyInteger=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiply=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiplyExpression=function(t){return t.equals(Expression.ONE)?this:Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiply(t):Expression.Symbol.prototype.multiplyExpression.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyAddition=function(t){return Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiplyExpression(t):Expression.Symbol.prototype.multiplyAddition.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyComplex=function(t){return this.multiply(t)};Expression.prototype.multiplyPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?n:n.equals(Expression.ONE)?t:new ExpressionPolynomialRoot(t.root.scale(n))}return this instanceof Expression.Complex&&!this.imaginary.equals(Expression.ONE)?this.imaginary.multiply(t).multiply(Expression.I).add(this.real.multiply(t)):this.multiplyExpression(t)};ExpressionPolynomialRoot.prototype._pow=function(t){return new ExpressionPolynomialRoot(this.root._pow(t))};ExpressionPolynomialRoot.prototype.pow=function(t){return t instanceof Expression.Integer?this._pow(t.toNumber()):t instanceof Expression.Division&&t.getDenominator()instanceof Expression.Integer?this._nthRoot(t.getDenominator().toNumber()).pow(t.getNumerator()):Expression.Symbol.prototype.pow.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.multiply(n.root))};ExpressionPolynomialRoot.prototype.add=function(t){return t.addPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.addPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.add(n.root))};Expression.prototype.addPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?t:new ExpressionPolynomialRoot(t.root.translate(n))}return this.addExpression(t)};ExpressionPolynomialRoot.prototype.addExpression=function(t){return this.add(t);//!?
};ExpressionPolynomialRoot.prototype.divide=function(t){return t instanceof Expression.Exponentiation?t.divideExpression(this):t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Exponentiation?this.multiply(t.a.inverse()).divide(t.b):this.multiply(t.inverse())};ExpressionPolynomialRoot.prototype.divideExpression=function(t){return t.equals(Expression.ZERO)?t:t.multiply(this.inverse())};ExpressionPolynomialRoot.prototype.inverse=function(){return new ExpressionPolynomialRoot(this.root.inverse())};ExpressionPolynomialRoot.prototype.sign=function(){return this.root.sign()};var toRadicalExpression=function(t){t=t.upgrade();const n=t.getAlpha();if(n.polynomial.getDegree()===1)return n.polynomial.getroots()[0];var a=n.polynomial.getGCDOfTermDegrees();if(a>1){const u=toRadicalExpression(t._pow(a));if(u!=null){const c=Expression.NthRoot.makeRoot(u,a);return a%2===1||t.sign()>0?c:new Expression.Negation(c)}}var s=n.polynomial._getShiftToDepressed();if(!s.equals(Expression.ZERO)){var l=toRadicalExpression(t.translate(s));if(l!=null)return new Expression.Addition(l,s.negate())}return null};function EmptyMap(){}EmptyMap.prototype.has=function(){return!1};EmptyMap.prototype.set=function(){};EmptyMap.prototype.get=function(){return null};function weakMap(){return typeof WeakMap<"u"?new WeakMap:new EmptyMap}const cache2rounding=weakMap(),DEFAULT_ROUNDING={fractionDigits:3};ExpressionPolynomialRoot.prototype._toDecimalString=function(t){t=t||{};const n=t.rounding||DEFAULT_ROUNDING;let a=cache2rounding.get(n);a==null&&(a=weakMap(),cache2rounding.set(n,a));var s=a.get(this);return s!=null||(s=toDecimalStringInternal$1(this,n),a.set(this,s)),s};ExpressionPolynomialRoot.prototype.toString=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toString(t)}return this._toDecimalString(t)};ExpressionPolynomialRoot.prototype.equals=function(t){return t instanceof ExpressionPolynomialRoot?this.root.equals(t.root):t instanceof Expression.Integer&&t.equals(Expression.ZERO)||!Expression.isRealAlgebraicNumber(t)?!1:this.subtract(t).equals(Expression.ZERO)};ExpressionPolynomialRoot.prototype.compare4MultiplicationComplex=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4MultiplicationNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype.compare4Multiplication=function(t){return t instanceof Expression.Complex||t instanceof Expression.Integer?1:t instanceof ExpressionPolynomialRoot||t instanceof Expression.NthRoot?0:t instanceof Expression.Symbol?-1:Expression.Symbol.prototype.compare4Multiplication.call(this,t)};ExpressionPolynomialRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};ExpressionPolynomialRoot.prototype.compare4Addition=function(t){return t instanceof ExpressionPolynomialRoot?0:t instanceof Expression.Symbol?1:t instanceof Expression.NthRoot||Expression.isRealAlgebraicNumber(t)?0:Expression.Symbol.prototype.compare4Addition.call(this,t)};ExpressionPolynomialRoot.prototype.compare4AdditionSymbol=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4AdditionNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype._nthRoot=function(t){if(this.root.sign()<0&&t%2===0){if(t!==2)throw new RangeError("NotSupportedError");return Expression.I.multiply(this.negate()._nthRoot(t))}return new ExpressionPolynomialRoot(this.root._nthRoot(t))};ExpressionPolynomialRoot.prototype.upgrade=function(){return new ExpressionPolynomialRoot(this.root.upgrade())};ExpressionPolynomialRoot.prototype.isNegative=function(){return this.root.sign()<0};Expression.prototype.upgrade=function(){return this};ExpressionPolynomialRoot.prototype.isExact=function(){{var t=this._toRadicalExpression();if(t!=null)return!0}return!1};ExpressionPolynomialRoot.prototype.negate=function(){return new ExpressionPolynomialRoot(this.root.negate())};ExpressionPolynomialRoot.prototype.simplifyExpression=function(){return this};ExpressionPolynomialRoot.prototype.toMathML=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toMathML(t)}return Expression._decimalToMathML(this._toDecimalString(t))};const cache=weakMap();ExpressionPolynomialRoot.prototype._toRadicalExpression=function(){if(cache.has(this))return cache.get(this);var t=this.root.getAlpha().polynomial;if(t.getDegree()/t.getGCDOfTermDegrees()<10&&LazyPolynomialRoot._isSimpleForUpgrade(this.root.getAlphaExpression(),new Expression.Symbol(""))){var n=toRadicalExpression(this.root);if(n!=null)return cache.set(this,n),n}cache.set(this,null)};ExpressionPolynomialRoot.prototype.getPrecedence=function(){{var t=this._toRadicalExpression();if(t!=null)return t.getPrecedence()}return 1e3};ExpressionPolynomialRoot.prototype.isRightToLeftAssociative=function(){return!0};ExpressionPolynomialRoot.prototype.isUnaryPlusMinus=function(){return!0};ExpressionPolynomialRoot.prototype._calc=function(t){return new ExpressionPolynomialRoot(this.root._calc(t))};Expression.ExpressionPolynomialRoot=ExpressionPolynomialRoot;Expression.toPolynomialRoot=function(t){var n=t instanceof Expression.NthRoot?t.a:t,a=t instanceof Expression.NthRoot?t.n:1,s=new Expression.Symbol("x");if(!(n.getDenominator()instanceof Expression.Integer))throw new TypeError;var l=Polynomial$1.toPolynomial(Expression.getConjugateExpression(s._pow(a).subtract(n).getNumerator()),s);if(l.getDegree()<=8){var u=l.factorize();if(u!=null&&u.getDegree()<l.getDegree()&&u.getDegree()===4){var c=Polynomial$1.polynomialGCD(u,Polynomial$1.toPolynomial(s._pow(a).subtract(n),s)).getroots();for(const ar of c)if(ar._pow(a).equals(n))return Expression._isPositive(ar)||a%2!==0?ar:ar.negate()}}for(;l.getDegree()>0;){var u=l.factorize()||l;const en=a===2&&Expression.has(t.radicand,Expression.Complex);var d=u.getZeros(en);if(a%2===0&&d.length===2&&Expression._isPositive(d[1])&&Expression._isPositive(n))return d[1];for(var Ct of d)if((Ct.root!=null&&Expression._isPositive(Ct)||en&&Expression._isPositive(Expression.getComplexNumberParts(Ct).real))&&Ct._pow(a).equals(n))return Ct;l=l.divideAndRemainder(u,"throw").quotient}console.error(t.toString())};Polynomial$1.prototype.signVariations=function(){let t=0,n=0;for(let a=this.a.size-1;a>=0;a-=1){const s=this.a.coefficient(a).sign();s!==0&&(n===0?n=s:n!==s&&(n=s,t+=1))}return t};Polynomial$1.prototype._getNonNegativeRealRootIntervals=function(){const t=this.getPositiveRealRootsBound();if(t.equals(Expression.ZERO))return[];const n=this._scaleRoots(t.inverse()),a=(this.getCoefficient(0).equals(Expression.ZERO)?1:0)+this.signVariations(),s=function(l,u,c){const d=c.getCoefficient(0).equals(Expression.ZERO),ar=(d?c.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient:c)._exponentiateRoots(-1)._translateRoots(Expression.ONE.negate());let en=ar.signVariations();if(en===1&&d){en=NaN;//!?
}if(en===0&&d)return[{a:l,b:l}];if(en===1&&ar.getCoefficient(0).equals(Expression.ZERO)){en=NaN;//!?
}if(en===1)return[{a:l,b:u}];if(en!==0){var tn=c._scaleRoots(Expression.TWO),on=l.add(u).divide(Expression.TWO),fn=s(l,on,tn);if(fn.length>=a){return fn;//!
}var dn=tn._translateRoots(Expression.ONE.negate()),Cn=s(on,u,dn);return fn.concat(Cn)}return[]};return s(Expression.ZERO,Expression.ONE,n).map(l=>({a:l.a.multiply(t),b:l.b.multiply(t)}))};Polynomial$1.prototype.getRootIntervals=function(){return this._scaleRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().map(t=>({a:t.b.negate(),b:t.a.negate()})).reverse().concat(this._getNonNegativeRealRootIntervals())};Polynomial$1.prototype.getPositiveRealRootsBound=function(){let t=null;const n=this.getDegree(),a=this.getLeadingCoefficient();for(let s=0;s<=this.getDegree()-1;s+=1){const l=this.getCoefficient(s).negate().truncatingDivide(a);if(l.sign()>=0){const u=Expression.TWO.multiply(l._integerNthRoot(n-s).add(Expression.ONE));(t==null||t.compareTo(u)<0)&&(t=u)}}if(t==null)return Expression.ZERO;//!2020-12-19
t=Expression.TWO._pow(t.getNumerator().bitLength()-t.getDenominator().bitLength()+1);//!
return t};Polynomial$1.prototype.getZero=function(t,n){var a=function(lx,cx){return cx.compareTo(Expression.ZERO)<0&&(lx=lx.negate(),cx=cx.negate()),lx.compareTo(Expression.ZERO)>=0?lx.truncatingDivide(cx):lx.add(Expression.ONE).truncatingDivide(cx).subtract(Expression.ONE)},s=function(lx,cx){var fx=lx.getNumerator().multiply(cx),gx=lx.getDenominator();return a(fx,gx)};const l=function(lx){return Math.sign(lx.getNumerator().compareTo(Expression.ZERO))},u=Expression.TWO,c=Expression.pow(u,n);if(!(c instanceof Expression.Integer))throw new RangeError("epsilon^-1 is not an integer");var d=t.a,Ct=t.b;if(c.multiply(d.getDenominator().multiply(Ct.getNumerator()).subtract(Ct.getDenominator().multiply(d.getNumerator()))).compareTo(Ct.getDenominator().multiply(d.getDenominator()))>0){var ar=n>=16/Math.log10(u.toNumber())?this.getZero(t,Math.floor(n/4)):t;d=ar.a,Ct=ar.b,this.getDegree();var en=this._scaleRoots(c);en=en.primitivePart();const lx=s(d,c).add(Expression.ONE),cx=s(Ct,c);console.assert(lx.multiply(d.getDenominator()).subtract(d.getNumerator().multiply(c)).compareTo(Expression.ZERO)>=0),console.assert(cx.multiply(Ct.getDenominator()).subtract(Ct.getNumerator().multiply(c)).compareTo(Expression.ZERO)<=0);let fx=en.calcAt(lx),gx=en.calcAt(cx);const mx=l(gx),px=l(fx);if(px===0)return{a:lx.divide(c),b:lx.divide(c)};if(mx===0)return{a:cx.divide(c),b:cx.divide(c)};if(px===mx){if(px!==(l(this.calcAt(d))||l(this.calcAt(Ct).negate())||px))return{a:d,b:lx.divide(c)};if(mx!==l(this.calcAt(Ct)))return{a:cx.divide(c),b:Ct};throw new RangeError}d=lx,Ct=cx;for(var tn=0,on=en.derive(),fn=Ct.subtract(d);fn.compareTo(Expression.ONE)>0;){var dn=d.add(fn.truncatingDivide(Expression.TWO));if(tn%3!==2&&fn.compareTo(d.abs())<0){var Cn=tn%3===1?d:Ct,Rn=Cn===d?fx:Cn===Ct?gx:void 0,ax=on.calcAt(Cn);ax.equals(Expression.ZERO)||(Cn=Cn.subtract(Rn.truncatingDivide(ax)),Cn.compareTo(d)<=0&&(Cn=d.add(Expression.ONE)),Cn.compareTo(Ct)>=0&&(Cn=Ct.subtract(Expression.ONE)),dn=Cn)}tn+=1;var ox=en.calcAt(dn),sx=l(ox);sx===mx?(Ct=dn,gx=ox):sx===px?(d=dn,fx=ox):(d=dn,Ct=dn,fx=ox,gx=ox),fn=Ct.subtract(d)}d=d.divide(c),Ct=Ct.divide(c)}return{a:d,b:Ct}};Polynomial$1.prototype.hasRoot=function(t){var n=this;if(n.equals(Polynomial$1.ZERO))return!0;//!new 2021-02-20 (TODO: CHECK)
if(!n.hasIntegerCoefficients()&&n.hasComplexCoefficients())return n.map(tn=>tn instanceof Expression.Integer?tn:tn.real).hasRoot(t)&&n.map(tn=>tn instanceof Expression.Integer?Expression.ZERO:tn.imaginary).hasRoot(t);//!
if(!n.hasIntegerCoefficients()&&!n.hasComplexCoefficients()&&!n._testCoefficients(tn=>!Expression.has(tn,Expression.Complex))&&n._testCoefficients(tn=>Expression.isConstant(tn)))return n.map(tn=>Expression.getComplexNumberParts(tn).real).hasRoot(t)&&n.map(tn=>Expression.getComplexNumberParts(tn).imaginary).hasRoot(t);var a=t.polynomial,s=null;//!
if(!n.hasIntegerCoefficients()){var l=new Expression.Symbol("~"),u=n.calcAt(l),c=Expression.getMultivariatePolynomial(u);c!=null&&!c.v.equals(l)&&c.v instanceof Expression.Symbol&&(s=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(c.p.getContent(),l),a))}s==null&&(s=Polynomial$1.polynomialGCD(n,a));//!
if(s.getDegree()<1)return!1;var d=t.interval;if(!s.hasIntegerCoefficients()){var l=new Expression.Symbol("$$"),Ct=s.calcAt(l),ar=Expression.getComplexNumberParts(Ct);ar!=null&&!ar.imaginary.equals(Expression.ZERO)&&(s=Polynomial$1.toPolynomial(ar.real.subtract(ar.imaginary.multiply(Expression.I)).multiply(Ct),l).getSquareFreePolynomial())}var en=s._translateRoots(d.a.negate()).signVariations()-s._translateRoots(d.b.negate()).signVariations();return en%2===1};Polynomial$1.prototype.numberOfRoots=function(t=null){if(!this.hasIntegerCoefficients())throw new RangeError;t==null&&(t={a:this._scaleRoots(Expression.ONE.negate()).getPositiveRealRootsBound().negate(),b:this.getPositiveRealRootsBound()});var n=this;t.a.equals(Expression.ZERO)||(n=n._scaleRoots(t.a.inverse())._translateRoots(Expression.ONE.negate()),t={a:Expression.ZERO,b:t.b.divide(t.a).subtract(Expression.ONE)},t.b.getNumerator().sign()<0&&(t={a:t.a,b:t.b.negate()},n=n._scaleRoots(Expression.ONE.negate()))),console.assert(t.a.equals(Expression.ZERO));for(var a=0;n.getCoefficient(a).equals(Expression.ZERO);)a+=1;if(a>1)throw new RangeError;return a>0&&(n=n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(a),"throw").quotient),(a>0?1:0)+n._exponentiateRoots(-1)._scaleRoots(t.b)._translateRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().length};Polynomial$1.prototype.getZeros=function(t=!1){if(this.getCoefficient(0).equals(Expression.ZERO)){if(this.getLeadingCoefficient().equals(Expression.ZERO))throw new TypeError;for(var n=0;this.getCoefficient(n).equals(Expression.ZERO);)n+=1;var l=this.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n)).quotient.getZeros(t);return l.concat(new Array(n).fill(Expression.ZERO))}var a=this.getContent(),s=this.scale(a.getDenominator()).divideAndRemainder(Polynomial$1.of(a.getNumerator()),"throw").quotient,l=s.squareFreeFactors(),u=l.a0,c=l.a1;if(u.getDegree()!==0){for(var d=c.getZeros(t),Ct=u.getZeros(t),ox=[],ar=void 0,n=0;n<Ct.length;n+=1){var en=Ct[n];en!==ar&&(ox.push(en),ar=en),ox.push(en)}return d.concat(ox)}var tn=s;if(tn.getDegree()===0)return[];//!
tn=tn.scale(tn.getContent().inverse());//!
if(!s.hasIntegerCoefficients()){var on=function(Ix){if(!Ix.hasIntegerCoefficients()){var Px=new Expression.Symbol("$$"),Nx=Ix.calcAt(Px),Bx=Expression.getConjugateExpression(Nx);if(Bx!=null&&!Bx.equals(Nx))return Polynomial$1.toPolynomial(Bx,Px);for(var $x=0;$x<Ix.getDegree();$x+=1){var Bx=Ix.getCoefficient($x);if(Bx instanceof Expression.ExpressionPolynomialRoot){var Vx=Bx.root.upgrade().getAlpha(),Gx=new Expression.Symbol("$a"),Zx=Polynomial$1.toPolynomial(Ix.map(Xx=>Xx===Bx?Gx:Xx).calcAt(new Expression.Symbol("$$")),Gx),jx=Vx.polynomial,Hx=Polynomial$1.toPolynomial(Polynomial$1.resultant(Zx,jx),new Expression.Symbol("$$")).primitivePart();return on(Hx)}}}return Ix};const qx=on(s);if(!qx.equals(s)){var ox=[],l=qx.getZeros(t);console.time("checking roots");for(var n=0;n<l.length;n+=1){var en=l[n];(en instanceof ExpressionPolynomialRoot&&en.root.getAlphaExpression().equals(new Expression.Symbol(""))?s.hasRoot(en.root.getAlpha()):en instanceof ExpressionWithPolynomialRoot&&en.e===en.root?s.hasRoot(en.root):(en instanceof ExpressionWithPolynomialRoot?en._calc(s):s.calcAt(en)).equals(Expression.ZERO))?ox.push(en):console.debug(en.root)}return console.timeEnd("checking roots"),ox}//!new
var fn=Polynomial$1.of(Expression.ONE).shift(s.getDegree()).subtract(Polynomial$1.of(s.getLeadingCoefficient())).getroots();if(fn.length!==0){fn=fn[0];var dn=s.getCoefficient(s.getDegree()-1).divide(fn._pow(s.getDegree()-1)).subtract(Expression.ZERO).divide(Expression.Integer.fromNumber(s.getDegree())),Cn=new Expression.Symbol("$$"),Rn=Polynomial$1.toPolynomial(tn.calcAt(Cn.subtract(dn).divide(fn)).getNumerator(),Cn);if(Rn.hasIntegerCoefficients())return Rn.getZeros(t).map(function(Ix){return Ix.subtract(dn).divide(fn)})}//!
return console.debug("not all roots were found!!!"),[]}//!new
tn.getDegree();//!
for(var ax=tn.getRootIntervals(),ox=new Array(ax.length),n=0;n<ax.length;n+=1){var en=tn.getZero(ax[n],0);if(en.a.equals(en.b))ox[n]=en.a;else{//! p, not f, as f may have roots with multiplicity > 1
{const Px=ExpressionPolynomialRoot.create(tn,en,{skipFactorization:!0});ox[n]=Px}}}//!new
if(ax.length!==tn.getDegree()&&t){//!new
if(tn.getDegree()>=4){var sx=tn.factorize();if(sx!=null)return sx.getZeros(t).concat(tn.divideAndRemainder(sx,"throw").quotient.getZeros(t))}//!
if(tn.isEven()){const Nx=tn._exponentiateRoots(2).getZeros(t);for(var en of Nx){var lx=function($x){var iE=Expression.getComplexNumberParts($x),Vx=iE.real,Gx=iE.imaginary,Zx=Vx._pow(2).add(Gx._pow(2)).squareRoot(),jx=Vx.add(Zx).divide(Expression.TWO).squareRoot(),Hx=Gx.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate(),iE=Vx.negate().add(Zx).divide(Expression.TWO),Xx=Hx.multiply(iE.squareRoot());return jx.add(Xx.multiply(Expression.I))};if(!Expression._isPositive(en)){var cx=lx(en.e!=null?en.upgrade():en);ox.push(cx),ox.push(cx.negate())}}return ox}var fx=tn.calcAt(new Expression.Symbol("a").add(new Expression.Symbol("b").multiply(Expression.I))),gx=Expression.getComplexNumberParts(fx);const qx=gx.real,Ix=gx.imaginary.divide(new Expression.Symbol("b")),Px=function(Nx){var Bx=Nx.squareFreeFactors();if(Bx.a0.getDegree()!==0)return Px(Bx.a0).concat(Px(Bx.a1));var $x=Nx.factorize();if($x!=null){var Bx=Px($x),Vx=Nx.divideAndRemainder($x,"throw").quotient;return Vx._getNonNegativeRealRootIntervals().length===0?Bx:Bx.concat(Px(Vx))}return Nx.getZeros(!1)};//!TODO: 
//!new 2021-01-03
if(ox.length<tn.getDegree()){var mx=function(Nx,Bx){var $x=Polynomial$1.toPolynomial(qx,new Expression.Symbol(Nx)),Vx=Polynomial$1.toPolynomial(Ix,new Expression.Symbol(Nx));return Polynomial$1.toPolynomial(Polynomial$1.resultant($x,Vx),new Expression.Symbol(Bx)).primitivePart()},px=Px(mx("a","b"));px=px.filter(Nx=>Expression._isPositive(Nx));//!?
px=px.map(Nx=>Nx instanceof ExpressionWithPolynomialRoot&&Nx.root.polynomial.getDegree()/Nx.root.polynomial.getGCDOfTermDegrees()<=2?Nx.upgrade():Nx);//!new
{var hx=Polynomial$1.toPolynomial(qx,new Expression.Symbol("a")).map(Nx=>Polynomial$1.toPolynomial(Nx,new Expression.Symbol("b"))),vx=Polynomial$1.toPolynomial(Ix,new Expression.Symbol("a")).map(Nx=>Polynomial$1.toPolynomial(Nx,new Expression.Symbol("b"))),yx=void 0,Sx=Polynomial$1.ZERO;for(var _x of px){var Ex=null;if((!(_x instanceof ExpressionWithPolynomialRoot)||!_x.e.equals(_x.root))&&(!(_x instanceof ExpressionPolynomialRoot)||!_x.root.getAlphaExpression().equals(new Expression.Symbol("")))){var bx=hx.map(Bx=>Bx.calcAt(_x)),Ax=vx.map(Bx=>Bx.calcAt(_x));Ex=Polynomial$1.polynomialGCD(bx,Ax)}else{const Bx=(_x instanceof ExpressionPolynomialRoot?_x.root.upgrade().getAlpha():_x.root).polynomial;Sx.equals(Bx)||(yx=polynomialGCDModuloPolynomial(hx,vx,Bx),yx=yx.map($x=>$x.polynomial),Sx=Bx),Ex=yx.map($x=>_x._calc($x))}if(Ex.getDegree()>=3){console.log("g!!!",Ex.toString());var Mx=this;window.setTimeout(function(){throw new TypeError("good test: "+Mx.toString())},0)}const Nx=function(Bx){var $x=Bx.getCoefficient(1).divide(Bx.getCoefficient(2)),Vx=Bx.getCoefficient(0).divide(Bx.getCoefficient(2)),Gx=$x.divide(Expression.TWO).negate(),Zx=Gx._pow(2).subtract(Vx).squareRoot(),jx=Gx.subtract(Zx),Hx=Gx.add(Zx);return[jx,Hx]};if(Ex.getDegree()<=2){const Bx=Ex.getDegree()===2?Nx(Ex):Ex.getroots();for(var Rx of Bx)if(!Expression.has(Rx,Expression.Complex)){var Cx=Rx.add(_x.multiply(Expression.I));ox.push(Cx),ox.push(Cx.complexConjugate())}}}}if(ox.length<tn.getDegree()){ox=ox.filter(Nx=>Expression.isReal(Nx));var Lx=Px(mx("b","a"));//!
for(var Rx of Lx)for(var _x of px){var Cx=Rx.add(_x.multiply(Expression.I));tn.calcAt(Cx).equals(Expression.ZERO)&&(ox.push(Cx),ox.push(Cx.complexConjugate()))}}}}//!
return ox};function pseudoRemainderSequence(t,n,a="primitive",s=!1){Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees())>1&&console.error("g > 1");let u=!0,c=Expression.ONE;var d={next:function(){if(console.assert(t.getDegree()>=n.getDegree()),!n.equals(Polynomial$1.ZERO)){const Ct=t.getDegree()-n.getDegree(),ar=n.getLeadingCoefficient()._pow(Ct+1),en=t.scale(s?ar.abs():ar).divideAndRemainder(n,n._hasIntegerLikeCoefficients()?"throw":void 0),tn=en.quotient,on=en.remainder;let fn=Expression.ONE;if(a==="trivial")fn=Expression.ONE;else if(a==="primitive")fn=on.getContent();else if(a==="subresultant")fn=u?Expression.ONE:t.getLeadingCoefficient().multiply(c._pow(Ct)),u=!1,c=Ct===0?c:n.getLeadingCoefficient()._pow(Ct).divide(c._pow(Ct).divide(c));else throw new RangeError(a);const dn=on.map(Rn=>Rn.divide(s?fn.abs().negate():fn)),Cn={R:dn,q:tn,:fn};return t=n,n=dn,{value:Cn,done:!1}}return{value:void 0,done:!0}}};return d[globalThis.Symbol.iterator]=function(){return this},d}Polynomial$1._pseudoRemainderSequence=pseudoRemainderSequence;Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence=function(t,n){function a(Rn,ax){if(Rn.getLeadingCoefficient()instanceof Expression.Polynomial||ax.getLeadingCoefficient()instanceof Expression.Polynomial)return{variables:[],A:Rn,B:ax};for(var ox={},sx=[],lx=function(gx){for(var mx of gx.summands())for(var px of mx.factors())px instanceof Expression.Exponentiation&&(px=px.a),px instanceof Expression.Symbol&&Object.getPrototypeOf(px)===Expression.Symbol.prototype&&ox[px.symbol]==null&&(sx.push(px),ox[px.symbol]=!0)},cx=0;cx<Rn.a.size;cx+=1)lx(Rn.a.coefficient(cx));for(var cx=0;cx<ax.a.size;cx+=1)lx(ax.a.coefficient(cx));var fx=function(gx,mx){if(mx===sx.length)return console.assert(gx.hasIntegerCoefficients()),gx;var px=sx[mx];return gx.map(hx=>new Expression.Polynomial(fx(Polynomial$1.toPolynomial(hx,px),mx+1)))};return{variables:sx,A:fx(Rn,0),B:fx(ax,0)}}function s(Rn,ax){if(ax.equals(Expression.ZERO)){return ax;//!?
}return Rn.length===0?ax:ax.polynomial.map(ox=>s(Rn.slice(1),ox)).calcAt(Rn[0])}if(t.getDegree()===Polynomial$1.ZERO.getDegree()||n.getDegree()===Polynomial$1.ZERO.getDegree())return Expression.ZERO;var l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(l>1){var u=Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t._exponentiateRoots(l),n._exponentiateRoots(l));return u._pow(l)}var c=a(t,n);t=c.A,n=c.B;var d=t,Ct=n,ar=Date.now(),en=1;if(t.getDegree()<n.getDegree()){const Rn=t;t=n,n=Rn,en*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}const tn=[];for(var u of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var on=u.R,fn=u.;if(n.getDegree()>0)if(on.getDegree()<0){for(;tn.length>0;)tn.pop();tn.push({base:Expression.ZERO,exponent:1})}else{if(!fn.equals(Expression.ONE))if(tn.length>0){const ax=tn.pop();tn.push({base:ax.base,exponent:ax.exponent+2*n.getDegree()}),tn.push({base:fn.divide(ax.base._pow(2)),exponent:n.getDegree()})}else tn.push({base:fn,exponent:n.getDegree()});tn.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()-on.getDegree()-n.getDegree()*(t.getDegree()-n.getDegree()+1)}),en*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}else console.assert(n.getDegree()===0&&on.getDegree()<0),tn.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()});t=n,n=on}let dn=en===-1?Expression.ONE.negate():Expression.ONE;for(const Rn of tn)Rn.exponent<0?dn=dn.divide(Rn.base._pow(-Rn.exponent)):Rn.exponent>0&&(dn=dn.multiply(Rn.base._pow(Rn.exponent)));var Cn=Date.now();return Cn-ar>250&&console.log(Cn-ar,d.toString(),Ct.toString()),dn=s(c.variables,dn),dn};Expression._FIELD={ONE:Expression.ONE,sub:function(t,n){return t.subtract(n)},mul:function(t,n){return t.multiply(n)},div:function(t,n){return t.divide(n)},scale:function(t,n){return t.multiply(Expression.Integer.fromBigInt(n))}};Polynomial$1.resultant=function(t,n){return Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t,n)};function GramSchmidtOrthogonalization$1(t){for(var n=Matrix$1.fromVectors(t).transpose(),a=n,s=a.multiply(a.conjugateTranspose()).augment(a).toRowEchelon(Matrix$1.Gauss,"row-reduction").matrix,l=s.slice(0,s.rows(),a.rows(),s.cols()),u=new Array(l.rows()),c=0;c<l.rows();c+=1)u[c]=l.row(c);return u}globalThis.GramSchmidtOrthogonalization=GramSchmidtOrthogonalization$1;Expression.Complex.prototype.abs=function(){return this.multiply(this.conjugate()).squareRoot()};Expression.Division.prototype.abs=function(){return this.getNumerator().abs().divide(this.getDenominator().abs())};Expression.prototype.abs=function(){const t=function(l){if(l instanceof Expression.Addition){for(var u of l.summands())for(var c of u.factors())if(!(c instanceof Expression.Symbol&&!(c instanceof Expression.MatrixSymbol)||c instanceof Expression.Integer))return!1;return!0}return!1},n=this;if(n instanceof Expression.Symbol&&!(n instanceof Expression.PolynomialRootSymbol)&&!(n instanceof Expression.ExpressionPolynomialRoot)&&!(n instanceof Expression.ExpressionWithPolynomialRoot))return n===Expression.PI||n===Expression.E?n:new Expression.Abs(this);if(this instanceof Expression.ComplexConjugate)return this.a.abs();if(this instanceof Expression.Multiplication)return this.a.abs().multiply(this.b.abs());if(this instanceof Expression.Abs)return this;if(this.isNegative())return this.negate().abs();if(this instanceof Expression.Exponentiation&&(this.a instanceof Expression.Symbol||t(this.a))&&this.b instanceof Expression.Integer)return this.a.multiply(this.a.complexConjugate()).multiply(this.a.pow(this.b.subtract(Expression.TWO)).abs());var a=Expression.simpleDivisor(this);if(a!=null&&!a.equals(Expression.ONE)&&!a.equals(this))return this.divide(a).divide(a)instanceof Expression.Division?a.abs().multiply(this.divide(a).abs()):new Expression.Exponentiation(a,Expression.TWO).abs().multiply(this.divide(a).divide(a).abs());if(t(this))return new Expression.Abs(this);if(t(this.complexConjugate()))return this.complexConjugate().abs();if(Expression.isConstant(this)){var s=Expression.getComplexNumberParts(this);if(!s.imaginary.equals(Expression.ZERO))return this.multiply(this.complexConjugate()).squareRoot()}return this.compareTo(Expression.ZERO)<0?this.negate():this};Expression.prototype.compareTo=function(t){if(t.equals(Expression.ZERO)){if(Expression._isPositive(this))return 1;if(Expression._isPositive(this.negate()))return-1;throw new TypeError(this.toString())}return this.subtract(t).getNumerator().compareTo(Expression.ZERO)};Expression.prototype.sign=function(){return this.compareTo(Expression.ZERO)};Expression.prototype.round=function(){return ExpressionParser.parse(toDecimalStringInternal$1(this,{fractionDigits:0}))};Polynomial$1.prototype._log2hypot=function(){let t=Expression.ZERO;for(let l=0;l<this.a.size;l+=1){const u=this.a.coefficient(l).abs();u.compareTo(t)>0&&(t=u)}const n=Math.max(t.bitLength()-970/2,0),a=Expression.TWO._pow(n);let s=0;for(let l=0;l<this.a.size;l+=1)s+=Math.pow(this.a.coefficient(l).truncatingDivide(a).toNumber(),2);return n+Math.log2(Math.sqrt(s))};Polynomial$1.prototype._log2OfBoundForCoefficientsOfFactor=function(t,n){if(t==null&&(t=this.getDegree()),t===0)return 0;n==null&&(n=this.getLeadingCoefficient().abs());var a=function(c){var d=c.bitLength();return d<=53?Math.log2(c.toNumber()):d-53+Math.log2(c.truncatingDivide(Expression.TWO._pow(d-53)).toNumber())},s=function(c){return c-Math.log2(Math.sqrt(Math.PI*Math.ceil(c/2)))},l=t,u=s(l)+(a(n.abs())-a(this.getLeadingCoefficient().abs()))+this._log2hypot();return u};Polynomial$1.prototype.isDivisibleBy=function(t){var n=void 0,a=Expression.ONE;this._hasIntegerLikeCoefficients()&&t._hasIntegerLikeCoefficients()&&(n="undefined",a=t.getContent());var s=this.scale(a).divideAndRemainder(t,n);return s!=null&&s.remainder.equals(Polynomial$1.ZERO)};function polynomialGCDModuloPolynomial(t,n,a){function s(d,Ct){var ar=d.map(tn=>new Expression.Polynomial(tn.polynomial.divideAndRemainder(Ct).remainder)),en=ar.map(tn=>tn.polynomial.getContent()).getContent().inverse();return ar.scale(new Expression.Polynomial(Polynomial$1.of(en)))}function l(d,Ct){return d.getDegree()<0?d:s(d.scale(new Expression.Polynomial(d.getLeadingCoefficient().polynomial.primitivePart().modularInverse(Ct).primitivePart())),Ct)}if(t=t.map(d=>new Expression.Polynomial(d)),n=n.map(d=>new Expression.Polynomial(d)),t.getDegree()<n.getDegree()){var u=t;t=n,n=u}if(n.getDegree()>=0&&s(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(s(t,a).map(d=>d.polynomial),s(n,a).map(d=>d.polynomial),a);for(var u of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var c=u.R;if(t=n,n=c,n.getDegree()>=0&&s(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(s(t,a).map(Ct=>Ct.polynomial),s(n,a).map(Ct=>Ct.polynomial),a)}return l(s(t,a),a)}globalThis.testables=globalThis.testables||{};globalThis.testables.polynomialGCDModuloPolynomial=polynomialGCDModuloPolynomial;Expression.getSolutionSet=function t(n){var a=n.augment(Matrix$1.Zero(n.cols(),1)),s=a.toRowEchelon(Matrix$1.GaussMontante,"solving",void 0),l=Matrix$1.solveByGaussNext(s.matrix),u=Matrix$1.getSolutionSet(l).basisVectors;return u};Expression.getFormaDeJordan=function(t,n,a){function s(yx){for(var Sx=0,_x=Matrix$1.Zero(en,en),Ex=0;Ex<yx.length;Ex+=1){var bx=yx[Ex];_x=_x.map(function(Ax,Mx,Rx){return Mx>=Sx&&Mx<Sx+bx.size?Mx===Rx?bx.eigenvalue:Mx!==Sx+bx.size-1&&Rx===Mx+1?Expression.ONE:Expression.ZERO:Ax}),Sx+=bx.size}return _x}function l(yx,Sx){var _x=yx.multiply(Sx);return _x.eql(Matrix$1.Zero(_x.rows(),1))}function u(yx,Sx){return Matrix$1.fromVectors(yx.concat(Sx)).rank()===yx.length+Sx.length}if(arguments.length>3||arguments[2]!==!0&&arguments[2]!==void 0)throw new TypeError;var c=Expression.unique(n);//!TODO: remove
if(c.length===t.rows()){var d=Expression.getEigenvectors(t,n),Ct=Expression.diagonalize(t,n,d),hx=Ct.T,px=Ct.L,vx=Ct.T_INVERSED;return{P:hx,J:px,P_INVERSED:vx}}//!
for(var ar=t,en=ar.rows(),tn=[],on=[],fn=0;fn<c.length;fn+=1){for(var dn=[],Cn=c[fn],Rn=n.reduce((yx,Sx)=>yx+(Sx===Cn?1:0),0),ax=ar.subtract(Matrix$1.I(en).scale(Cn)),ox=1;ax.pow(ox).rank()>en-Rn;)ox+=1;for(ox+=1;--ox>=1;)for(var sx=Expression.getSolutionSet(ax.pow(ox)),lx=0;lx<sx.length;lx+=1){var cx=sx[lx];if(!l(ax.pow(ox-1),cx)){for(var fx=[],gx=cx,mx=0;mx<ox;mx+=1)fx.push(gx),gx=ax.multiply(gx).col(0);fx.reverse(),u(dn,fx)&&(tn=tn.concat(fx),dn=dn.concat(fx),on.push({size:ox,eigenvalue:Cn}))}}}var px=s(on);if(tn.length!==en)throw new TypeError("assertion failed");var hx=Matrix$1.fromVectors(tn),vx=hx.isExact()?hx.inverse():a?null:getInverse$1(ar,n,hx);if(!a&&hx.isExact()&&ar.toString()!==hx.multiply(px).multiply(vx).toString())throw new TypeError("assertion failed");return{P:hx,J:px,P_INVERSED:vx}};var getInverse$1=function(t,n,a){var s=t.transpose(),l=Expression.getFormaDeJordan(s,n,!0),u=l.J,c=l.P,d=t.cols(),Ct=Matrix$1.Zero(d,d).map(function(en,tn,on){function fn(){for(var Cn=tn;Cn-1>=0&&Cn<d&&u.e(Cn-1,Cn).equals(Expression.ONE);)Cn-=1;for(var Rn=tn;Rn+1<d&&u.e(Rn,Rn+1).equals(Expression.ONE);)Rn+=1;return{s:Cn,e:Rn}}var dn=fn();return dn.s+dn.e===tn+on?Expression.ONE:Expression.ZERO}),ar=c.multiply(Ct).transpose();return Expression._unscaleInverseMatrix(ar,a)};Expression._getInverse=getInverse$1;globalThis.factorsMap=new Map;Expression.getPolynomialRootsWithSteps=function(t,n){var a=t.getroots(n);//!2018-05-28
//!2018-07-11
var s=[];if(typeof t.getZeros=="function"&&a.length!==t.getDegree()){for(var l=Polynomial$1.of(Expression.ONE),u=0;u<a.length;u+=1)l=l.multiply(Polynomial$1.of(a[u].negate(),Expression.ONE));var c=t.divideAndRemainder(l).quotient;globalThis.factorsMap=new Map;const ar=function(en){var tn=en.primitivePart();if(!tn.hasIntegerCoefficients())return en.getZeros(!0);en=tn;var on=en.squareFreeFactors(),fn=on.a0,dn=on.a1;if(fn.getDegree()!==0){for(var Cn=ar(dn),Rn=ar(fn),ax=[],ox=void 0,sx=0;sx<Rn.length;sx+=1){var lx=Rn[sx];lx!==ox&&(ax.push(lx),ox=lx),ax.push(lx)}return Cn.concat(ax)}var cx=en.factorize();if(cx==null&&(cx=en),!cx.equals(en))return ar(cx).concat(ar(en.divideAndRemainder(cx,"throw").quotient));const fx=cx.getZeros(!0);for(const gx of fx)globalThis.factorsMap.set(gx,cx);return fx};s=ar(c),n!=null&&s.length===c.getDegree()&&n({content:Expression.ONE,roots:a.concat(s),newPolynomial:Polynomial$1.of(t.getLeadingCoefficient()),type:"realRootIsolationAndNewton'sMethod"})}//!
for(var u=0;u<a.length;u+=1)for(var d=a[u],Ct=0;Ct<a.length;Ct+=1)a[Ct].equals(d)&&(a[Ct]=d);return a.concat(s)};Expression.getEigenvalues=function(t,n){if(!t.isSquare())throw new RangeError("NonSquareMatrixException");var a=function(Ct){var ar=Expression.ZERO,en=Expression.ONE;return Ct.map(function(tn){return Expression.isScalar(tn)&&(ar=ar.gcd(tn.getNumerator()),en=en.lcm(tn.getDenominator())),Expression.ZERO}),ar.divide(en)},s=Expression.ONE,l=Expression.ONE;n==null&&(s=a(t),s.equals(Expression.ZERO)?s=Expression.ONE:(l=s.inverse(),t=t.scale(l)));var u=t.map(function(Ct,ar,en){var tn=ar===en?Polynomial$1.of(Ct,Expression.ONE.negate()):Ct.equals(Expression.ZERO)?Polynomial$1.ZERO:Polynomial$1.of(Ct);return new Expression.Polynomial(tn)}).determinant();u=u.polynomial,u=u._scaleRoots(s),u=u.scale(s._pow(t.cols()));//!new (sin/cos)
u=u.map(function(Ct){return Ct.simplifyExpression()});var c=u;//!TODO: fix
n?.(c),console.time("p3");var d=Expression.getPolynomialRootsWithSteps(c,n);return console.timeEnd("p3"),d};Expression.isRational=function(t){return t instanceof Expression.Integer||t instanceof Expression.BinaryOperation&&Expression.isRational(t.a)&&Expression.isRational(t.b)};Expression.isRationalMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isRational(t.e(n,a)))return!1;return!0};Expression.getEigenvectors=function(t,n,a=!1){n==null&&(n=Expression.getEigenvalues(t));const s=new Array(n.length).fill(null),l=Expression.unique(n),u=function(fn,dn){for(var Cn=0,Rn=0;Rn<n.length&&Cn<dn.length;Rn+=1)n[Rn]===fn&&(s[Rn]=dn[Cn],Cn+=1);if(Cn<dn.length)throw new TypeError("wrong eigenvalues argument: the eigenvalue should appear multiple times")};if(!a&&t.isSquare()&&Expression.isRationalMatrix(t)){const fn=new Map;for(const dn of l){const Cn=globalThis.factorsMap.get(dn);if(Cn==null||Cn.getDegree()<=1){const Rn=Expression.getEigenvectors(t,n.filter(ax=>ax===dn),!0);u(dn,Rn)}else{var c=fn.get(Cn);if(c==null){const ax=SomePolynomialRoot.create(Cn);c=Expression.getEigenvectors(t,n.filter(ox=>ox===dn).map(ox=>ax),!0),fn.set(Cn,c)}var d=[];d.push(Expression.ONE);const Rn=function(ax){return ax instanceof SomePolynomialRoot?ax.calcAt(dn,d):ax};u(dn,c.map(ax=>new Matrix$1.Vector(ax.elements.map(ox=>Rn(ox)))))}}return s}var Ct=function(fn){var dn=Expression.ZERO,Cn=Expression.ONE;return fn.map(function(Rn){return Expression.isScalar(Rn)&&(dn=dn.gcd(Rn.getNumerator()),Cn=Cn.lcm(Rn.getDenominator())),Expression.ZERO}),dn.divide(Cn)},ar=Expression.ONE,en=Expression.ONE;ar=Ct(t),ar.equals(Expression.ZERO)&&(ar=Expression.ONE),en=ar.inverse();for(var tn=0;tn<l.length;tn+=1){const fn=l[tn];var on=t.cols(),c=Expression.getSolutionSet(t.scale(en).subtract(Matrix$1.I(on).scale(fn.multiply(en))));u(fn,c);let Cn=null;if(tn+1<l.length)try{Cn=fn.complexConjugate()}catch(Rn){console.error(Rn)}if(tn+1<l.length&&Cn!=null&&Cn.equals(l[tn+1])&&t.eql(t.map(Rn=>Rn.complexConjugate()))){const Rn=function(ax){return new Matrix$1.Vector(ax.elements.map(ox=>ox.complexConjugate()))};u(l[tn+1],c.map(ax=>Rn(ax))),tn+=1}}return s};var getInverse=function(t,n,a){var s=t.transpose(),l=Expression.getEigenvectors(s,n),u=Matrix$1.fromVectors(l).transpose();return _unscaleInverseMatrix(u,a)},_unscaleInverseMatrix=function(t,n){var a=function(u,c){var d=u.rows();return Matrix$1.Zero(d,d).map(function(Ct,ar,en){if(ar!==en)return Expression.ZERO;for(var tn=d,on=-1;++on<tn;){var fn=u.e(ar,on).multiply(c.e(on,en));Ct=on===0?fn:Ct.add(fn)}return Ct})},s=a(t,n),l=s.map(function(u,c,d){return c===d?u.inverse():Expression.ZERO});return l.multiply(t)};Expression._unscaleInverseMatrix=_unscaleInverseMatrix;Expression.diagonalize=function(t,n,a){if(arguments.length>3)throw new TypeError;if(!t.isSquare())throw new RangeError("NonSquareMatrixException");if(n.length!==t.cols())throw new RangeError;if(a.filter(d=>d!=null).length!==t.cols())throw new RangeError;//!!!
var s=Matrix$1.I(t.cols()).map(function(d,Ct,ar){return Ct===ar?n[Ct]:Expression.ZERO}),l=Matrix$1.fromVectors(a),u=function(){return n.map(d=>!Expression.has(d,Expression.Exponentiation)).reduce((d,Ct)=>d||Ct)},c=l.isExact()&&u()?l.inverse():getInverse(t,n,l);return{T:l,L:s,T_INVERSED:c}};Expression.LUDecomposition=function(t){for(var n=t.rows(),a=t,s=Matrix$1.I(n),l=Matrix$1.I(n),u=!1,c=0,d=0;d<t.cols();d+=1)if(c<n){var Ct=c;if(a.e(c,d).equals(Expression.ZERO)){for(var ar=c+1;ar<n&&Ct===c;ar+=1)a.e(ar,d).equals(Expression.ZERO)||(Ct=ar);if(Ct!==c){var en=Matrix$1.I(n);en=en.map(function(on,fn,dn){return fn===c?en.e(Ct,dn):fn===Ct?en.e(c,dn):on}),a=en.multiply(a),s=en.multiply(s.subtract(Matrix$1.I(n))).add(Matrix$1.I(n)),l=en.multiply(l),u=!0}}if(!a.e(c,d).equals(Expression.ZERO)){var tn=Matrix$1.I(n).map(function(on,fn,dn){return dn===c&&fn>=c+1?a.e(fn,d).divide(a.e(c,d)).negate():on});a=tn.multiply(a),s=s.multiply(tn),c+=1}}return s=s.map(function(on,fn,dn){return fn===dn?on:on.negate()}),{swapFlag:u,P:new Expression.Matrix(l),A:new Expression.Matrix(t),L:new Expression.Matrix(s),U:new Expression.Matrix(a)}};Expression.isReal=function(t){var n=function(a){return a instanceof Expression.Integer?!0:a instanceof Expression.NthRoot?n(a.a):a instanceof Expression.BinaryOperation&&n(a.a)&&n(a.b)||a===Expression.E||a===Expression.PI?!0:a instanceof Expression.Function?n(a.a):a instanceof Expression.PolynomialRootSymbol?!0:a instanceof Expression.ExpressionWithPolynomialRoot?n(a.e):!!(a instanceof Expression.ExpressionPolynomialRoot||!(a instanceof Expression.Symbol)&&!(a instanceof Expression.Exponentiation)&&a.complexConjugate().equals(a))};return n(t)};Expression.isRealMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isReal(t.e(n,a)))return!1;return!0};Expression.CholeskyDecomposition=function(t){var n=t;if(!n.isSquare())throw new RangeError("NonSquareMatrixException");for(var a=n.rows(),s=Expression.isRealMatrix(n),l=0;l<a;l+=1)for(var u=l;u<a;u+=1)if(!n.e(l,u).equals(n.e(u,l).complexConjugate()))throw s?new RangeError("NonSymmetricMatrixException"):new RangeError("NonHermitianMatrixException");for(var c=new Array(a),l=0;l<a;l+=1){c[l]=new Array(a);for(var u=0;u<a;u+=1)c[l][u]=Expression.ZERO}for(var u=0;u<a;u+=1)for(var l=u;l<a;l+=1){var d=null;if(u===l){for(var Ct=null,ar=0;ar<u;ar+=1){var en=c[u][ar].multiply(c[u][ar].complexConjugate());Ct=Ct==null?en:Ct.add(en)}var tn=Ct==null?n.e(u,u):n.e(u,u).subtract(Ct);if(!Expression._isPositive(tn))throw new RangeError("NonPositiveDefiniteMatrix");d=tn.squareRoot()}else{for(var Ct=null,ar=0;ar<u;ar+=1){var tn=c[l][ar].multiply(c[u][ar].complexConjugate());Ct=Ct==null?tn:Ct.add(tn)}d=(Ct==null?n.e(l,u):n.e(l,u).subtract(Ct)).divide(c[u][u])}c[l][u]=d,console.log("l_%d%d = %s",l+1,u+1,c[l][u].toString())}return{L:Matrix$1.padRows(c,null)}};Matrix$1.prototype.conjugateTranspose=function(){return this.transpose().map(t=>t.complexConjugate())};Matrix$1.fromVectors=function(t){if(t.length===0)throw new RangeError;for(var n=t[0].dimensions(),a=0;a<t.length;a+=1)if(t[a].dimensions()!==n)throw new RangeError;return Matrix$1.Zero(n,t.length).map((s,l,u)=>t[u].e(l))};Expression.SVD=function(t){var n=function(lx,cx){return cx.length>1&&(cx=GramSchmidtOrthogonalization(cx)),cx.map(fx=>fx.toUnitVector())},a=t.conjugateTranspose().multiply(t),s=Expression.getEigenvalues(a);//!
var l=Expression.unique(s),u=l.map(lx=>lx instanceof Expression.ExpressionWithPolynomialRoot||lx instanceof Expression.ExpressionPolynomialRoot?lx.upgrade():lx);s=s.map(lx=>u[l.indexOf(lx)]);//!
s=s.slice(0).reverse().sort(function(lx,cx){var fx=lx.subtract(cx);return Expression.isReal(fx)?Expression._isPositive(fx.negate())?1:-1:NaN});var c=[],d=[];const Ct=Expression.unique(s);var ar=Expression.getEigenvectors(a,s);for(var en of Ct){var tn=ar.filter((lx,cx)=>s[cx]===en);c=c.concat(n(a,tn));var on=en.squareRoot(),fn=c.length-d.length;d=d.concat(new Array(fn).fill(on))}var dn=Matrix$1.Zero(t.rows(),t.cols()).map((lx,cx,fx)=>cx===fx&&cx<d.length?d[cx]:Expression.ZERO);console.time("U");for(var Cn=[],Rn=0;Rn<dn.rows()&&Rn<dn.cols()&&!dn.e(Rn,Rn).equals(Expression.ZERO);Rn+=1){var ax=t.multiply(c[Rn]).col(0).scale(dn.e(Rn,Rn).inverse());Cn.push(ax)}if(Cn.length<t.rows()){console.time("U1");var ox=t.multiply(t.conjugateTranspose()),ar=Expression.getEigenvectors(ox,new Array(t.rows()).fill(Expression.ZERO),!0).filter(cx=>cx!=null),sx=n(ox,ar);console.timeEnd("U1"),console.assert(Cn.length+sx.length===t.rows()),Cn=Cn.concat(sx)}return console.timeEnd("U"),Cn=Matrix$1.fromVectors(Cn),c=Matrix$1.fromVectors(c),{U:Cn,Sigma:dn,Vstar:c.conjugateTranspose()}};Expression.QRDecomposition=function(t){for(var n=t,a=new Array(n.cols()),s=0;s<n.cols();s+=1)a[s]=n.col(s);var l=GramSchmidtOrthogonalization(a).filter(d=>!d.eql(Matrix$1.Vector.Zero(d.dimensions()))),u=Matrix$1.fromVectors(l.map(d=>d.toUnitVector())),c=u.conjugateTranspose().multiply(n);return console.log(u),{Q:u,R:c}};function Condition$1(t){Object.freeze(t),this.array=t}Condition$1.NEZ=" != 0";Condition$1.EQZ=" == 0";Condition$1.GTZ=" > 0";Condition$1.prototype._and=function(t,n){if(t!==Condition$1.NEZ&&t!==Condition$1.EQZ&&t!==Condition$1.GTZ)throw new TypeError;if(n==null)throw new RangeError;if(this===Condition$1.FALSE)return this;var a=function(Ct,ar,en){for(var tn=0;tn<Ct.length;tn+=1)if(Ct[tn].operator===ar&&Ct[tn].expression.equals(en))return!0;return!1};if(n instanceof Expression.GF2Value)return this._and(t,n.value===0?Expression.ZERO:Expression.ONE);var s=function(Ct,ar){if(a(Ct,ar.operator,ar.expression)){//!TODO: it should work even without this (?)
return Ct}if(a(Ct,ar.operator===Condition$1.EQZ?Condition$1.NEZ:Condition$1.EQZ,ar.expression))return null;var en=ar.expression;//!
//!new 2019-12-15:
//!substitute:  x = 0, sin(x) != 0
(Expression.has(en,Expression.Sin)||Expression.has(en,Expression.Cos)||Expression.has(en,Expression.Exponentiation)||Expression.has(en,Expression.Arctan)||Expression.has(en,Expression.Logarithm)||Expression.has(en,Expression.Abs))&&Ct.length>0&&(en=Expression._map(function(Xx){if(Xx instanceof Expression.Function&&!(Xx instanceof Expression.NthRoot)||Xx instanceof Expression.Exponentiation&&(!(Xx.b instanceof Expression.Integer)||!(Xx.a instanceof Expression.Symbol))){var rE=Xx instanceof Expression.Exponentiation?Xx.b:Xx.a,uE=null,aE=null;if(rE instanceof Expression.Symbol)uE=rE,aE=Ct;else if(uE=new Expression.Symbol("arg"),aE=s(Ct,{expression:uE.subtract(rE),operator:Condition$1.EQZ}),aE==null){//! TODO: fix, should not happen
return Xx}for(var Kx=0;Kx<aE.length;Kx+=1){var ME=aE[Kx];if(ME.operator===Condition$1.EQZ){var IE=Polynomial$1.toPolynomial(ME.expression,uE);if(IE.getDegree()===1){var wE=IE.getCoefficient(0).negate().divide(IE.getCoefficient(1));if(!Expression.has(wE,Expression.Function)&&(wE.compare4Addition(uE)<0&&!(wE instanceof Expression.Division)||Expression.isConstant(wE)||Expression.isConstant(wE.divide(Expression.PI)))){if(Xx instanceof Expression.Exponentiation)return Xx.a.pow(wE);if(Xx instanceof Expression.Arctan)return wE.arctan();if(Xx instanceof Expression.Logarithm)return wE.logarithm();if(Xx instanceof Expression.Abs)return wE.abs();if(wE=Expression.isConstant(wE)&&!wE.equals(Expression.ZERO)&&!(wE instanceof Expression.Radians)&&!Expression.has(wE,Expression.Symbol)?new Expression.Radians(wE):wE,Xx instanceof Expression.Sin)return wE.sin();if(Xx instanceof Expression.Cos)return wE.cos();throw new TypeError("NotSupportedError")}}}}return Xx}return Xx},en),ar={expression:en,operator:ar.operator});//!
//!new
if(en.isNegative()&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:en.negate(),operator:ar.operator});if(en instanceof Expression.Exponentiation&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:en.a,operator:ar.operator});if(en instanceof Expression.Addition&&en.a instanceof Expression.Exponentiation&&Expression.isConstant(en.b)&&en.a.b.getDenominator()instanceof Expression.Integer&&!en.a.b.getDenominator().equals(Expression.ONE))return en.a.b.getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)&&!en.b.isNegative()?s(Ct,{expression:Expression.ONE,operator:ar.operator}):s(Ct,{expression:en.a.a.pow(en.a.b.getNumerator()).subtract(en.b.negate().pow(en.a.b.getDenominator())),operator:ar.operator});if(ar.expression instanceof Expression.Multiplication&&ar.expression.b instanceof Expression.IdentityMatrix)return s(Ct,{expression:ar.expression.a,operator:ar.operator});if(ar.expression instanceof Expression.Division){var tn=Ct;return tn=s(tn,{expression:ar.expression.a,operator:ar.operator}),tn==null?null:(tn=s(tn,{expression:ar.expression.b,operator:Condition$1.NEZ}),tn)}if(ar.expression instanceof Expression.Integer||ar.expression instanceof Expression.Complex)return ar.operator===Condition$1.NEZ&&ar.expression.equals(Expression.ZERO)||ar.operator===Condition$1.EQZ&&!ar.expression.equals(Expression.ZERO)||ar.operator===Condition$1.GTZ&&ar.expression.equals(Expression.ZERO)||ar.operator===Condition$1.GTZ&&ar.expression instanceof Expression.Integer&&ar.expression.compareTo(Expression.ZERO)<0?null:Ct;if(Expression.isConstant(ar.expression)&&!ar.expression.equals(Expression.ZERO)){if(ar.operator===Condition$1.NEZ)return Ct;if(ar.operator===Condition$1.EQZ)return null}if(ar.expression instanceof Expression.Matrix&&ar.expression.matrix.isZero()){if(ar.operator===Condition$1.EQZ)return Ct;if(ar.operator===Condition$1.NEZ)return null}if(ar.expression instanceof Expression.NthRoot)return s(Ct,{expression:ar.expression.a,operator:ar.operator});if(Expression.has(ar.expression,Expression.Abs)){if(ar.expression instanceof Expression.Abs&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:ar.expression.a,operator:ar.operator});if(ar.expression instanceof Expression.Abs&&ar.operator===Condition$1.GTZ)return Ct;if(ar.expression.negate()instanceof Expression.Abs&&ar.operator===Condition$1.GTZ)return null}if(Expression.has(ar.expression,Expression.ComplexConjugate)&&!Expression.has(ar.expression.complexConjugate(),Expression.ComplexConjugate))return s(Ct,{expression:ar.expression.complexConjugate(),operator:ar.operator});if(ar.expression instanceof Expression.Multiplication){if(ar.operator===Condition$1.EQZ&&ar.expression.a instanceof Expression.Integer&&!ar.expression.a.equals(Expression.ZERO))return ar={expression:ar.expression.b,operator:ar.operator},s(Ct,ar);if(ar.operator===Condition$1.NEZ){var tn=Ct;return tn=s(tn,{expression:ar.expression.a,operator:Condition$1.NEZ}),tn==null?null:(tn=s(tn,{expression:ar.expression.b,operator:Condition$1.NEZ}),tn)}}var Cn=Expression.getMultivariatePolynomial(ar.expression);if(Cn!=null){//!new 2018-12-24
var on=Expression.getNthRootConjugate(Cn.p.getLeadingCoefficient());if(on!=null&&Expression.isConstant(on))return s(Ct,{expression:on.multiply(ar.expression),operator:ar.operator});//!
var fn=Cn.p.getContent();if(!fn.equals(Expression.ONE)&&!fn.equals(Expression.ONE.negate())){if(ar.operator===Condition$1.NEZ){var tn=s(Ct,{expression:ar.expression.divide(fn),operator:Condition$1.NEZ});return tn==null?null:s(tn,{expression:fn,operator:Condition$1.NEZ})}for(;Cn!=null;){if(ar.operator===Condition$1.EQZ){var dn=Cn.p.getSquareFreePolynomial();if(dn.getDegree()!==Cn.p.getDegree())return s(Ct,{expression:ar.expression.divide(Cn.p.divideAndRemainder(dn).quotient.calcAt(Cn.v)),operator:Condition$1.EQZ})}fn=Cn.p.getContent(),Cn=Expression.getMultivariatePolynomial(fn)}//!new
if(Expression.isConstant(fn)&&!fn.equals(Expression.ONE)&&!fn.equals(Expression.ONE.negate()))return s(Ct,{expression:ar.expression.divide(fn),operator:Condition$1.EQZ})}if(Cn!=null&&Cn.p.getDegree()>1&&Cn.p.getCoefficient(0).equals(Expression.ZERO)&&ar.operator===Condition$1.NEZ){var tn=s(Ct,{expression:Cn.v,operator:Condition$1.NEZ});return tn==null?null:s(tn,{expression:ar.expression.divide(Cn.v),operator:Condition$1.NEZ})}}//!new 2019-12-24:
var Cn=Expression.getMultivariatePolynomial(ar.expression);if(Cn!=null&&Cn.p.getDegree()>1){var dn=Cn.p.getSquareFreePolynomial();if(dn.getDegree()!==Cn.p.getDegree()&&(ar.operator===Condition$1.EQZ||ar.operator===Condition$1.NEZ))return s(Ct,{expression:dn.calcAt(Cn.v),operator:ar.operator})}//!
for(var Rn=function(Xx,rE,uE,aE){if(Xx==null)return null;for(var Kx=uE+1;Kx<rE.length;Kx+=1)if(Xx=s(Xx,rE[Kx]),Xx==null)return null;return aE!=null&&(Xx=s(Xx,aE)),Xx},ax=[],ox=0;ox<Ct.length;ox+=1){var sx=Ct[ox];//!new 2020-01-01:
if((Expression.has(sx.expression,Expression.Sin)||Expression.has(sx.expression,Expression.Cos))&&(Expression.has(ar.expression,Expression.Sin)||Expression.has(ar.expression,Expression.Cos))){var lx={operator:sx.operator,expression:Expression._replaceSinCos(sx.expression)},cx={operator:ar.operator,expression:Expression._replaceSinCos(ar.expression)},fx=s([],lx);if(fx==null)return null;var tn=s(fx,cx);if(tn==null)return null;if(tn.length===0)return[];if(tn.length===1)return Rn(ax,Ct,ox,{operator:tn[0].operator,expression:Expression._replaceBySinCos(tn[0].expression)});for(var ox=0;ox<tn.length;ox++)if(!Expression.has(tn[ox],Expression.Exponentiation)&&tn[ox].expression.gcd(ar.expression).equals(tn[ox].expression))return ax=s(ax,sx),Rn(ax,Ct,ox,{operator:tn[ox].operator,expression:Expression._replaceBySinCos(tn[ox].expression)})}//!
if((Expression.has(sx.expression,Expression.Function)||Expression.has(sx.expression,Expression.Exponentiation))&&!(Expression.has(ar.expression,Expression.Function)||Expression.has(ar.expression,Expression.Exponentiation)))return Rn(s(ax,ar),Ct,ox,sx);if((sx.operator===Condition$1.NEZ&&ar.operator===Condition$1.EQZ||sx.operator===Condition$1.EQZ&&ar.operator===Condition$1.NEZ)&&(Expression.isSingleVariablePolynomial(sx.expression.multiply(ar.expression))||!0)){for(var gx=sx.expression.polynomialGCD(ar.expression);!gx.equals(Expression.ONE)&&!gx.equals(Expression.ONE.negate());)return sx.operator===Condition$1.EQZ?sx={operator:sx.operator,expression:sx.expression.divide(gx)}:ar={operator:ar.operator,expression:ar.expression.divide(gx)},ax=s(ax,sx),ax==null?null:Rn(ax,Ct,ox,ar);if(sx.operator===Condition$1.EQZ&&Expression.isConstant(sx.expression)||ar.operator===Condition$1.EQZ&&Expression.isConstant(ar.expression))return null}var mx=!0,px=Expression.isSingleVariablePolynomial(sx.expression)&&Expression.isSingleVariablePolynomial(ar.expression)&&Expression.isSingleVariablePolynomial(sx.expression.multiply(ar.expression));if(sx.operator===Condition$1.NEZ&&ar.operator===Condition$1.EQZ&&px)ar=ar;else if(sx.operator===Condition$1.EQZ&&ar.operator===Condition$1.NEZ&&px)ar=sx;else if(sx.operator===Condition$1.EQZ&&ar.operator===Condition$1.EQZ&&px){var gx=sx.expression.polynomialGCD(ar.expression);return gx instanceof Expression.Integer?null:(ar={operator:ar.operator,expression:gx},Rn(ax,Ct,ox,ar))}else if(sx.operator===Condition$1.NEZ&&ar.operator===Condition$1.NEZ&&px){var gx=sx.expression.gcd(ar.expression);sx={operator:sx.operator,expression:sx.expression.divide(gx)},Expression.isConstant(sx.expression)||ax.push(sx)}else{//!new 2020-16-02
var hx=function(Xx){if(Xx instanceof Expression.Multiplication&&Xx.a instanceof Expression.Matrix)return Xx.a.multiply(hx(Xx.b));var rE=Expression.getConstant(Xx);for(var uE of Xx.divide(rE).factors())uE instanceof Expression.NthRoot&&Expression.isConstant(uE.a)&&(rE=rE.multiply(uE));return rE},vx=function(Xx,rE){var uE=rE.divide(hx(rE)),aE=Expression.ZERO;for(var Kx of Xx.summands()){var ME=Kx.divide(hx(Kx));ME.equals(uE)&&(aE=aE.add(Kx))}return aE},yx=function(Xx){var rE=function(wE){return wE instanceof Expression.Exponentiation?wE.b:Expression.ONE},uE=function(wE){return wE instanceof Expression.Exponentiation?wE.a:wE},aE=function(wE){var bE=Expression.ZERO;for(var UE of wE.factors())if(!Expression.isConstant(UE)){var wE=rE(UE);bE=bE.add(wE)}return bE},Kx=function(wE,bE){var UE=aE(wE).subtract(aE(bE)),CE=UE.isNegative()?-1:UE.negate().isNegative()?1:0;if(CE!==0)return CE;for(var YE=function(oE){return Array.from(oE.divide(Expression.getConstant(oE)).factors()).reverse().filter(tE=>!Expression.isConstant(tE)).values()},Ox=YE(wE),Fx=YE(bE),Wx=Ox.next().value,Qx=Fx.next().value;Wx!=null&&Qx!=null;){var CE=0-uE(Wx).compare4Multiplication(uE(Qx))||rE(Wx).compare4Multiplication(rE(Qx));if(CE!==0)return CE;Wx=Ox.next().value,Qx=Fx.next().value}return Wx!=null?1:Qx!=null?-1:0},ME=null;for(var IE of Xx.summands())(ME==null||Kx(IE,ME)>0)&&(ME=IE);return ME};if(mx&&sx.operator===Condition$1.EQZ){var Sx=yx(sx.expression),Cn=Sx.divide(hx(Sx))._abs();Sx=vx(sx.expression,Sx);var _x=ar.expression,Ex=0;for(var bx of ar.expression.summands())bx.gcd(Cn)._abs().equals(Cn)&&(_x=_x.subtract(bx.divide(Sx).multiply(sx.expression)),Ex+=1);if(Ex>0)return Rn(s(ax,sx),Ct,ox,{expression:_x,operator:ar.operator})}if(mx&&ar.operator===Condition$1.EQZ){var Sx=yx(ar.expression),Cn=Sx.divide(hx(Sx))._abs();Sx=vx(ar.expression,Sx);for(var bx of sx.expression.summands())if(bx.gcd(Cn)._abs().equals(Cn)){var Ax=sx.expression.subtract(bx.divide(Sx).multiply(ar.expression));return sx.operator===Condition$1.EQZ?Rn(s(ax,{expression:Ax,operator:sx.operator}),Ct,ox,ar):Rn(s(ax,ar),Ct,ox,{expression:Ax,operator:sx.operator})}}if(mx&&sx.operator===Condition$1.NEZ&&ar.operator===Condition$1.EQZ){var Sx=yx(sx.expression),Cn=Sx.divide(Expression.getConstant(Sx));for(var bx of ar.expression.summands())if(bx.gcd(Cn).equals(Cn)||bx.gcd(Cn).equals(Cn.negate())){var Mx=bx.divide(Sx);if(Mx instanceof Expression.Integer&&!Mx.equals(Expression.ZERO)){var Rx=ar.expression.subtract(Mx.multiply(sx.expression)),Cx={expression:Rx,operator:Condition$1.NEZ},Lx=!1;{//! 2020-07-05
for(var Lx=!1,qx=0;qx<Ct.length;qx++){var Ix=Ct[qx];if(Ix.operator===Condition$1.EQZ){var gx=Ix.expression.gcd(Cx.expression);!gx.equals(Expression.ONE)&&!gx.equals(Expression.ONE.negate())&&(Lx=!0)}}}if(Lx)return Rn(s(s(ax,sx),Cx),Ct,ox-1,ar)}}}//!
{var Cn=null,Px=null,Nx=null,Bx=null,$x=Expression.getMultivariatePolynomial(sx.expression),Vx=Expression.getMultivariatePolynomial(ar.expression);if(ar.operator===Condition$1.EQZ&&Vx!=null&&Vx.p.getDegree()!==1){var tn=Expression.getMultivariatePolynomial(Vx.p.getCoefficient(0));if(tn!=null){var Gx=tn.v;Gx instanceof Expression.Symbol&&tn.p.getDegree()===1&&(Vx={p:Polynomial$1.toPolynomial(ar.expression,Gx),v:Gx})}}if($x!=null&&Vx!=null){//!new 2019-24-12
//!?
ar.operator===Condition$1.EQZ&&Vx!=null&&Vx.p.getDegree()===1&&sx.operator===Condition$1.EQZ&&$x!=null&&$x.p.getDegree()===1&&(Expression._getReplacement(ar.expression,$x.v).equals($x.v)&&Polynomial$1.toPolynomial(ar.expression,$x.v).getDegree()===0&&($x=null),Expression._getReplacement(sx.expression,Vx.v).equals(Vx.v)&&Polynomial$1.toPolynomial(sx.expression,Vx.v).getDegree()===0&&(Vx=null),$x!=null&&Vx!=null&&($x.p.getCoefficient(1)instanceof Expression.Integer||($x=null),Vx.p.getCoefficient(1)instanceof Expression.Integer||(Vx=null)),$x!=null&&Vx!=null&&$x.v.compare4Addition(Vx.v)<0&&($x=null)),ar.operator===Condition$1.EQZ&&Vx!=null&&Vx.p.getDegree()===1&&(Nx=Vx,Cn=sx.expression,Px=sx.operator,Bx=ar),sx.operator===Condition$1.EQZ&&$x!=null&&$x.p.getDegree()===1&&(Nx=$x,Cn=ar.expression,Px=ar.operator,Bx=sx)}if(Nx!=null){var Zx=!1;if(Zx=Zx||Nx.p.getDegree()===1&&Expression.isConstant(Nx.p.getCoefficient(1))&&Expression.isConstant(Nx.p.getCoefficient(0)),Zx=Zx||Nx.p.getDegree()===1&&Expression.isConstant(Nx.p.getCoefficient(0))&&!Nx.p.getCoefficient(0).equals(Expression.ZERO)&&Expression.has(Cn,Expression.Exponentiation),Zx){var jx=Nx.p.getCoefficient(0).negate().divide(Nx.p.getCoefficient(1)),bx=Expression._substitute(Cn,Nx.v,jx,{uniqueObject:1});if(bx.equals(Cn))ax.push(sx);else{var tn={operator:Px,expression:bx};return ax=s(ax,tn),ax==null?null:Rn(ax,Ct,ox,Bx)}}else ax.push(sx)}else ax.push(sx)}}}if(ax.push(ar),mx){new Condition$1(ax);for(var ox=0;ox<ax.length;ox+=1){var ar=ax[ox];if(ar.operator===Condition$1.EQZ){var Hx=ar.expression,gx=null;for(var iE of Hx.summands()){var bx=iE.divide(Expression.getConstant(iE));gx==null?gx=bx:gx=gx.gcd(bx)}if(!gx.equals(Expression.ONE)&&Hx instanceof Expression.Addition&&new Condition$1(ax.slice(0,ox).concat(ax.slice(ox+1))).andZero(gx).isFalse())return s(ax,{expression:gx,operator:Condition$1.NEZ})}}}return ax};//!new 2021-10-06
if(n instanceof Expression.Division)return this._and(t,n.getNumerator()).andNotZero(n.getDenominator());var l=this;if(t===Condition$1.EQZ){const Ct=function(en){var tn=void 0;for(var on of en.summands())for(var fn of on.factors()){var dn=fn instanceof Expression.Exponentiation?fn.a:fn;dn instanceof Expression.Symbol&&(tn==null||dn.symbol<tn.symbol)&&(tn=dn)}return tn},ar=Ct(n);if(ar!=null&&Polynomial$1.of(n)._hasIntegerLikeCoefficients()){const en=Polynomial$1.toPolynomial(n,ar);for(var u of this.array)if(u.operator===Condition$1.EQZ&&Polynomial$1.of(u.expression)._hasIntegerLikeCoefficients()&&Ct(u.expression).symbol>=ar.symbol){const tn=Polynomial$1.toPolynomial(u.expression,ar);if(tn.getDegree()>=1){var c=Polynomial$1.polynomialGCD(en,tn);if(c.getDegree()===0){const on=Polynomial$1.resultant(en,tn);if(l=l.andZero(on),l.isFalse())return l}}}}}//!
var d=s(l.array,{operator:t,expression:n});return d==null?Condition$1.FALSE:d.length===0?Condition$1.TRUE:new Condition$1(d)};Condition$1.prototype.andNotZero=function(t){return this._and(Condition$1.NEZ,t)};Condition$1.prototype.andZero=function(t){return this._and(Condition$1.EQZ,t)};Condition$1.prototype.andGreaterZero=function(t){return this._and(Condition$1.GTZ,t)};Condition$1.prototype.and=function(t){if(!(t instanceof Condition$1))throw new TypeError;for(var n=this,a=0;a<t.array.length;a+=1)n=n._and(t.array[a].operator,t.array[a].expression);return n};Condition$1.prototype.isFalse=function(){return this===Condition$1.FALSE};Condition$1.prototype.isTrue=function(){return this===Condition$1.TRUE};Condition$1.prototype.toString=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1)n+=(a!==0?", ":"")+this.array[a].expression.toString(t)+this.array[a].operator;return n};Condition$1.TRUE=new Condition$1(new Array(0));Condition$1.FALSE=new Condition$1(void 0);Condition$1.prototype.getSolutionFor=function(t){var n=this;if(n.array==null)return null;for(var a=0;a<n.array.length;a+=1){var s=n.array[a];if(s.operator===Condition$1.EQZ){var l=Polynomial$1.toPolynomial(s.expression,t);if(l.getDegree()===1)return l.getroots()[0]}}return null};Condition$1.prototype.updateExpression=function(t,n){return this.andNotZero(t).isFalse()?Expression.ZERO:t};//!TODO: remove
Polynomial$1.prototype.toString=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toString(t)};Polynomial$1.prototype.toMathML=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toMathML(t)};Expression.Polynomial.prototype.toString=function(t){return this.polynomial.toString(t)};Expression.Polynomial.prototype.toMathML=function(t){return this.polynomial.toMathML(t)};var printPartOfAddition=function(t,n,a,s,l){if(a.equals(Expression.ZERO))return t&&n?Expression.ZERO.toMathML():"";var u=!1;a.isNegative()&&!n&&(u=!0,a=a.negateCarefully());var c=new Expression.Multiplication(Expression.ZERO,Expression.ZERO).getPrecedence(),d=a.getPrecedence()<c,Ct=a.equals(Expression.ONE);return(!n&&u?'<mo form="infix">&minus;</mo>':"")+(!n&&!u?'<mo form="infix">+</mo>':"")+(Ct?"":"<mrow>")+(Ct||!d?"":"<mrow><mo>(</mo>")+(Ct?"":a.toMathML(l))+(Ct||!d?"":"<mo>)</mo></mrow>")+(Ct?"":"<mo>&sdot;</mo>")+s.toMathML(l)+(Ct?"":"</mrow>")},decimalToMathML=function(t){const n=/^([+\-])?(\d+\.?\d*(?:\(\d+\)\d*)?)(?:[eE]\+?(\-?\d+))?$/.exec(t),a={sign:n[1]||"",significand:n[2]||"",exponent:n[3]||""};return(a.exponent!==""?"<mrow>":"")+(a.sign!==""?"<mrow>":"")+(a.sign==="+"?"<mo>+</mo>":"")+(a.sign==="-"?"<mo>&minus;</mo>":"")+"<mn>"+numberFormat.format(a.significand.replace(/[\(\)]/g,"")).replace(/^[\s\S]+$/g,function(s){var l=a.significand.indexOf("("),u=a.significand.lastIndexOf(")");if(l===-1||u===-1)return s;const c=numberFormat.format("0").trim().length;var d=s.length-(a.significand.length-l-1-1)*c,Ct=s.length-(a.significand.length-u-1)*c;return s.slice(0,d)+'<span style="text-decoration:overline;">'+s.slice(d,Ct)+"</span>"+s.slice(Ct)})+"</mn>"+(a.sign!==""?"</mrow>":"")+(a.exponent!==""?'<mo lspace="0" rspace="0">&sdot;</mo><msup><mn>'+numberFormat.format("10")+"</mn>"+decimalToMathML(a.exponent)+"</msup>":"")+(a.exponent!==""?"</mrow>":"")},complexToMathML=function(t,n){if(n.replace(/<[^>]+>/g,"")==="1")return"<mrow>"+t+"<mo>+</mo><mi>&ii;</mi></mrow>";if(n.replace(/<[^>]+>/g,"").replace(/&minus;/g,"-")==="-1")return"<mrow>"+t+"<mo>&minus;</mo><mi>&ii;</mi></mrow>";if(t==="")return"<mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow>";var a="+";return/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/.test(n)&&(a="-",n=n.replace(/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/g,"<mn>$1</mn>")),"<mrow>"+t+"<mo>"+(a==="-"?"&minus;":"+")+"</mo><mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow></mrow>"};Expression._decimalToMathML=decimalToMathML;Expression._complexToMathML=complexToMathML;function isConstant(t){return t instanceof Expression.NonSimplifiedExpression||t instanceof Expression.Matrix||t instanceof Expression.Polynomial?!1:Expression.isConstant(t)}var groupByTerm=function(t){if(t instanceof Expression.Division||t instanceof Expression.Addition){var n=t.getNumerator(),a=t.getDenominator(),s=a instanceof Expression.Integer?a:(Expression.getMultivariatePolynomial(a)||{p:{getContent:function(){return Expression.ONE}}}).p.getContent(),l=a.divide(s);if(isConstant(s)){var u=[];for(var c of n.summands())u.push(c);var d={};u.reverse();for(var Ct=0;Ct<u.length;Ct+=1){var c=u[Ct],ar=Expression.ONE;for(var en of c.factors())isConstant(en)&&(ar=ar.multiply(en));var tn=c.divide(ar),on="_"+tn.toString();d[on]=d[on]||{constant:Expression.ZERO,term:tn},d[on].constant=d[on].constant.add(ar.divide(s))}var fn=null;for(var on in d)if(Object.prototype.hasOwnProperty.call(d,on)){var ar=d[on].constant,tn=d[on].term,dn=!1;fn!=null&&ar.isNegative()&&(ar=ar.negate(),dn=!0);var Cn=new NonSimplifiedExpression(tn.equals(Expression.ONE)?ar:ar.equals(Expression.ONE)?d[on].term:new Expression.Multiplication(ar,d[on].term));fn=fn==null?Cn:new Expression.Addition(fn,dn?new Expression.Multiplication(Expression.ONE.negate(),Cn):Cn)}return l.equals(Expression.ONE)||(fn=new Expression.Division(fn,l)),new NonSimplifiedExpression(fn)}}},getRounding=function(t){var n=t?.rounding;return t!=null&&n==null&&t.fractionDigits!=null&&t.fractionDigits!==-1&&(console.debug("deprecated fractionDigits, use rounding instead"),n={fractionDigits:t.fractionDigits}),n};Expression.toDecimalString=function(t,n){var a=getRounding(n);if(a!=null){if(isConstant(t))return toDecimalStringInternal$1(t,a,decimalToMathML,complexToMathML);if(!Expression.has(t,NonSimplifiedExpression)){var s=groupByTerm(t);if(s!=null)return s.toMathML(n)}}};var getPrecedence=function(t,n){var a=getRounding(n);return a!=null&&isConstant(t.unwrap())&&Expression.has(t.unwrap(),Expression.Complex)&&!t.unwrap().equals(Expression.I)?new Expression.Addition(Expression.ONE,Expression.ONE).getPrecedence():t.getPrecedence()};Expression.idCounter=0;Expression.id=function(){return(Expression.idCounter+=1).toString()};Expression.escapeHTML=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Expression.defaultOptions={useMatrixContainer:!1};Expression.Matrix.prototype.toMathML=function(t){var n=this.matrix;t=Expression.setTopLevel(!0,t);var a=t.useMatrixContainer==null&&Expression.defaultOptions.useMatrixContainer?!0:t.useMatrixContainer,s=t.useBraces==null?void 0:t.useBraces,l=t.columnlines==null?0:t.columnlines,u=t.variableNames==null?void 0:t.variableNames,c=t.verticalStrike==null?-1:t.verticalStrike,d=t.horizontalStrike==null?-1:t.horizontalStrike,Ct=t.cellIdGenerator==null?void 0:t.cellIdGenerator,ar=t.pivotCell==null?void 0:t.pivotCell,en=t.isLUDecomposition2==null?void 0:t.isLUDecomposition2,tn=t.highlightRow==null?-1:t.highlightRow,on=t.highlightCol==null?-1:t.highlightCol;t=Object.assign({},t,{useBraces:void 0,columnlines:void 0,variableNames:void 0,verticalStrike:void 0,horizontalStrike:void 0,cellIdGenerator:void 0,pivotCell:void 0,isLUDecomposition2:void 0,highlightRow:void 0,highlightCol:void 0});var fn="",dn=n.rows(),Cn=n.cols(),Rn=-1,ax=t.idPrefix+"-"+Expression.id();a&&(fn+='<munder accentunder="true">',fn+='<mrow id="'+ax+'" data-matrix="'+Expression.escapeHTML(n.toString())+'" draggable="true" tabindex="0" contextmenu="matrix-menu">'),fn+=s==null?"<mrow><mo>(</mo>":"<mrow>"+(s[0]===" "?"":"<mo>"+s[0]+"</mo>");//! 2017-07-06 rowspacing="0ex" was added to make it look better with Native MathML (when it is supported) and to have the same style as in mathml.css
//!  rowspacing="0ex" is also needed when verticalStrike !== -1 and <menclose> is used inside
for(fn+="<mtable"+(u!=null?' columnalign="right"':"")+">";++Rn<dn;){var ox=-1;if(u!=null){for(var sx="",lx=!1;++ox<Cn-1;)sx+="<mtd>",sx+=printPartOfAddition(ox===Cn-2,!lx,n.e(Rn,ox),new Expression.Symbol(u[ox]),t),sx+="</mtd>",lx=lx||!n.e(Rn,ox).equals(Expression.ZERO);sx+="<mtd><mo>=</mo></mtd><mtd>"+n.e(Rn,Cn-1).toMathML(t)+"</mtd>",(lx||!n.e(Rn,Cn-1).equals(Expression.ZERO))&&(fn+="<mtr>",fn+=sx,fn+="</mtr>")}else{for(fn+="<mtr>";++ox<Cn;){var cx="",fx="";l!==0&&Cn-1>0&&(fx+=Cn+l===ox?"border-left: 1px solid;":""),ar!=null&&Rn===ar.i&&ox===ar.j&&(fx+="border: 1px solid; border-radius: 50%;",fx+="font-weight: bolder"),d===Rn&&c===ox?(fx+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto, linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5",cx="true"):(c===ox&&(fx+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto; opacity: 0.5",cx="true"),d===Rn&&(fx+="background: linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5;",cx="true"));var gx=Ct!=null?Ct(Rn,ox):"";fn+=('<mtd id="'+gx+'" aria-hidden="'+cx+'" style="'+fx+'">').replace(/\s+[a-z\-]+\=""/g,"");var mx=ox<Rn&&en||tn===Rn&&(l===0||ox<=Cn-1+l)||on===ox;mx&&(fn+='<mrow style="background: #80FF80; color: #3C78C2">'),fn+=n.e(Rn,ox).toMathML(t),mx&&(fn+="</mrow>"),fn+="</mtd>"}fn+="</mtr>"}}return fn+="</mtable>",fn+=s==null?"<mo>)</mo></mrow>":(s[1]===" "?"":"<mo>"+s[1]+"</mo>")+"</mrow>",a&&(fn+="</mrow>",fn+="<mtext>",fn+='<button type="button" class="matrix-menu-show" data-for-matrix="'+ax+'" aria-haspopup="true" title="'+i18n.matrixMenu.title+'"></button>',fn+="</mtext>",fn+="</munder>"),fn};Expression.Determinant.prototype.toMathML=function(t){var n=this;return n.a instanceof Expression.Matrix||n.a instanceof NonSimplifiedExpression&&n.a.e instanceof Expression.Matrix?(t=Object.assign({},t,{useBraces:["|","|"]}),n.a.toMathML(t)):Expression.Function.prototype.toMathML.call(this,t)};Expression.Transpose.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+"<mi>T</mi></msup>"};Expression.ComplexConjugate.prototype.toMathML=function(t){var n=this;return'<mover accent="true">'+n.a.toMathML(t)+"<mo></mo></mover>"};Expression.Pseudoinverse.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+'<mi><span title="pseudoinverse">+</span></mi></msup>'};Expression.SquareRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??"<msqrt>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"</msqrt>"};Expression.NthRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??(console.assert(typeof this.n=="number"&&Math.floor(this.n)===this.n&&this.n>=3),"<mroot>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"<mn>"+numberFormat.format(this.n.toString())+"</mn></mroot>")};Expression.denotations={};Expression.Function.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,s=!(a.a instanceof Expression.Matrix)&&!(a.a instanceof NonSimplifiedExpression&&a.a.e instanceof Expression.Matrix);return"<mrow><mi>"+(Expression.denotations[a.name]||a.name)+"</mi><mo>&af;</mo>"+(s?"<mrow><mo>(</mo>":"")+a.a.toMathML(Expression.setTopLevel(!0,t))+(s?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Division.prototype.toMathML=function(t){if(t!=null&&t.nofractions)return Expression.BinaryOperation.prototype.toMathML.call(this,t);var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,s=a.getDenominator(),l=a.getNumerator();return"<mfrac>"+l.toMathML(Expression.setTopLevel(!0,t))+s.toMathML(Expression.setTopLevel(!0,t))+"</mfrac>"};Expression.numberFormat={format:function(t){return t.toString()}};const decimalNumberRegExp=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit=function(t){let n=0;for(;decimalNumberRegExp.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10};let cachedFormatData={format:null,decimalSeparator:".",decimalZeroOffset:0};var numberFormat={format:function(t){var n=function(){var d=Expression.numberFormat.format(1.5).trim(),Ct=/[,\.]/.exec(d);return Ct==null?(console.error(d),"."):Ct[0]},a=function(){var d=Expression.numberFormat.format(0).trim().codePointAt(0),Ct=replaceSimpleDigit(d)===0;return Ct?d-48:(console.error(d),0)};cachedFormatData.format!==Expression.numberFormat&&(cachedFormatData={format:Expression.numberFormat,decimalSeparator:n(),decimalZeroOffset:a()});var s=t.indexOf(".");if(s!==-1)return numberFormat.format(t.slice(0,s))+cachedFormatData.decimalSeparator+numberFormat.format(t.slice(s+1));var l=cachedFormatData.decimalZeroOffset;if(l===0)return t;for(var u="",c=0;c<t.length;c+=1)u+=String.fromCodePoint(l+t.charCodeAt(c));return u}};Expression.Integer.prototype.toMathML=function(t){var n=this,a=n.compareTo(Expression.ZERO)<0?"-":"",s=n.compareTo(Expression.ZERO)<0?n.negate():n,l=s.value.toString(),u=numberFormat.format(l);return a==="-"?"<mrow><mo>&minus;</mo><mn>"+u+"</mn></mrow>":"<mn>"+u+"</mn>"};Expression.BinaryOperation.prototype.toMathML=function(t){t=t??{},t!=null&&t.rounding!=null&&this.unwrap()instanceof Expression.Exponentiation&&this.unwrap().a.unwrap()instanceof Expression.Symbol&&this.unwrap().a.unwrap()!==Expression.E&&this.unwrap().a.unwrap()!==Expression.PI&&!(this.unwrap().a.unwrap()instanceof Expression.PolynomialRootSymbol)&&!(this.unwrap().a.unwrap()instanceof Expression.ExpressionPolynomialRoot)&&(this.unwrap().b.unwrap()instanceof Expression.Integer||this.unwrap().b.unwrap()instanceof Expression.Negation&&this.unwrap().b.unwrap().b.unwrap()instanceof Expression.Integer)&&(t=Object.assign({},t,{rounding:null}));var n=Expression.toDecimalString(this,t);if(n!=null)return n;//!2019-05-16
if(this instanceof Expression.Addition&&t.printId==null){var a=function(lx){for(var cx=[];lx.unwrap()instanceof Expression.Addition;)cx.push(lx.unwrap().b),lx=lx.unwrap().a;return cx.push(lx),cx},tn=[],d=null;for(var s of a(this)){if(d!=null){var l=!1;d.isNegative()&&(l=!0,d=d.negateCarefully());var u=this.getPrecedence()>=getPrecedence(d,t);u=u||d.isUnaryPlusMinus(),tn.push((u?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(u,t))+(u?"<mo>)</mo></mrow>":"")),tn.push(l?"<mo>&minus;</mo>":"<mo>+</mo>")}d=s}tn=tn.reverse().join("");var c=d,u=c.getPrecedence()+(c.isRightToLeftAssociative()?-1:0)<this.getPrecedence();return t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(u=u||c.isUnaryPlusMinus()),tn=(u?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(u||t==null||t.isTopLevel,t))+(u?"<mo>)</mo></mrow>":"")+tn,"<mrow>"+tn+"</mrow>"}//!
var c=this.a,d=this.b,Ct=!1;this instanceof Expression.Addition&&d.isNegative()&&(Ct=!0,d=d.negateCarefully());var ar=c.getPrecedence()+(c.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),en=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=d.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(ar=ar||c.isUnaryPlusMinus()),en=en||d.isUnaryPlusMinus(),en=en||this.unwrap()instanceof Expression.Exponentiation&&d.unwrap()instanceof Expression.Exponentiation,ar=ar||this.unwrap()instanceof Expression.Exponentiation&&c.unwrap()instanceof Expression.Function,ar=ar||t.rounding!=null&&isConstant(c.unwrap())&&Expression.has(c.unwrap(),Expression.Complex);var tn=Ct?"-":this.getS();if(this instanceof Expression.Exponentiation){if(c.unwrap()===Expression.E&&d.unwrap()instanceof Expression.Matrix)return"<mrow><mi>exp</mi><mo>&af;</mo>"+d.toMathML(t)+"</mrow>";var on=t;return c.unwrap()instanceof Expression.Matrix||(on=Object.assign({},t||{},{nofractions:!0})),"<msup>"+(ar?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(ar||t==null||t.isTopLevel,t))+(ar?"<mo>)</mo></mrow>":"")+(en?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(en,on))+(en?"<mo>)</mo></mrow>":"")+"</msup>"}if(this.isNegation())return"<mrow><mo>&minus;</mo>"+(en?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(en,t))+(en?"<mo>)</mo></mrow>":"")+"</mrow>";var fn=function(ax){return ax instanceof Expression.Exponentiation&&(ax.b.unwrap()instanceof Expression.Integer||ax.b.unwrap()instanceof Expression.Symbol&&ax.b.unwrap().symbol==="T")?ax.a.unwrap():ax},dn=function(ax){return!ar&&!en&&(ax.a.unwrap()instanceof Expression.Integer||fn(ax.a.unwrap())instanceof Expression.Symbol||ax.a.unwrap()instanceof Expression.Multiplication&&fn(ax.a.unwrap().b.unwrap())instanceof Expression.Symbol)&&(fn(ax.b.unwrap())instanceof Expression.Symbol||t.rounding==null&&ax.b.unwrap()instanceof Expression.SquareRoot)};//!2020-08-02
if(this instanceof Expression.Multiplication&&t.printId==null){for(var Cn=!0,s=this;s!=null;s=s instanceof Expression.Multiplication?s.a.unwrap():null){var Rn=s instanceof Expression.Multiplication?s.b.unwrap():s;fn(Rn).unwrap()instanceof Expression.Symbol&&Expression.isScalar(Rn)||(Cn=!1),Rn instanceof Expression.ExpressionWithPolynomialRoot&&(Cn=!1),Rn instanceof Expression.ExpressionPolynomialRoot&&(Cn=!1)}if(Cn){for(var tn=[],s=this;s!=null;s=s instanceof Expression.Multiplication?s.a.unwrap():null){var Rn=s instanceof Expression.Multiplication?s.b.unwrap():s;tn.push(Rn.toMathML(Expression.setTopLevel(u,t)))}return tn=tn.reverse().join("<mo>&it;</mo>"),"<mrow>"+tn+"</mrow>"}}return"<mrow>"+(ar?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(ar||t==null||t.isTopLevel,t))+(ar?"<mo>)</mo></mrow>":"")+(tn==="*"?dn(this)?"<mo>&it;</mo>":"<mo>&sdot;</mo>":tn==="-"?"<mo>&minus;</mo>":tn==="/"?"<mo>&#x2215;</mo>":this instanceof Expression.Comma?'<mo lspace="0em" rspace="0.55em">,</mo>':"<mo>"+tn+"</mo>")+(en?"<mrow><mo>(</mo>":"")+d.toMathML(Expression.setTopLevel(en,t))+(en?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Symbol.prototype.toMathML=function(t){var n=this,a=n.symbol,s=a.indexOf("_");if(s!==-1){for(var l=a.slice(s+1).replace(/^\(|\)$/g,"").split(","),u="",c=0;c<l.length;c+=1)u+=c!==0?"<mo>,</mo>":"",u+=/^\d+$/.exec(l[c])!=null?Expression.Integer.fromString(l[c]).toMathML():"<mi>"+l[c]+"</mi>";l.length>1&&(u="<mrow>"+u+"</mrow>");var d=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a.slice(0,s));return"<msub><mi"+(d?' mathvariant="bold-italic"':"")+">"+a.slice(0,s)+"</mi>"+u+"</msub>"}var d=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a);return"<mi"+(d?' mathvariant="bold-italic"':"")+">"+(this instanceof Expression.IdentityMatrix&&typeof i18n<"u"?'<span class="dotted-underline" title="'+i18n.identityMatrix+'" aria-label="'+i18n.identityMatrix+'">'+a+"</span>":a)+"</mi>"};Expression.Negation.prototype.toMathML=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"<mrow><mo>&minus;</mo>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Factorial.prototype.toMathML=function(t){var n=this.n.unwrap(),a=!(n instanceof Expression.Integer&&n.compareTo(Expression.ZERO)>0);return"<mrow>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"<mo>!</mo></mrow>"};Condition$1.prototype.toMathML=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1){var s=this.array[a];n+=a!==0?'<mo lspace="0em" rspace="0.55em">,</mo>':"",n+="<mrow>";var l="<mo>"+(s.operator===Condition$1.NEZ?"&ne;":s.operator===Condition$1.EQZ?"=":s.operator===Condition$1.GTZ?"&gt;":"???")+"</mo>";if(s.expression instanceof Expression.Addition&&s.expression.a instanceof Expression.Symbol&&s.expression.b instanceof Expression.Integer){var u=s.expression.a,c=s.expression.b.negate();n+=u.toMathML(t)+l+c.toMathML(t)}else n+=s.expression.toMathML(t)+l+Expression.ZERO.toMathML();n+="</mrow>"}return this.array.length===1?n:"<mrow>"+n+"</mrow>"};Expression.Complex.prototype.toMathML=function(t){return this.toStringInternal(t,"<mo>&it;</mo>","<mi>&ii;</mi>","<mo>&minus;</mo>","<mo>+</mo>","<mrow>","</mrow>",function(n,a){return n.toMathML(a)})};Expression.GF2.prototype.toMathML=function(t){return this.a.toMathML(t)};Expression.GF2Value.prototype.toMathML=function(t){return"<mrow><mn>"+this.value.toString()+"</mn></mrow>"};Expression.Degrees.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>&deg;</mi></mrow>"};Expression.Radians.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>rad</mi></mrow>"};NonSimplifiedExpression.prototype.toMathML=function(t){return t!=null&&t.printId!=null?'<mrow id="'+this.getId()+'">'+this.e.toMathML(t)+"</mrow>":this.e.toMathML(t)};Expression.prototype.toMathML=function(t){throw new TypeError};Expression.DecimalFraction.prototype.toMathML=function(t){return decimalToMathML(this.toString())};primeFactor._isPrime;function simplify_algebra(t){var n=t.replace(/([CRL]+)([0-9]*)/g,"$1_$2"),a=ExpressionParser.parse(n),s=a.toString(),l=s.replace(/([CRL]+)_([0-9]*)/g,"$1$2");return[l,a.toMathML()]}function removeFenced(t){return t.replaceAll(/<mfenced>/g,"<mrow><mo>(</mo>").replaceAll(/<\/mfenced>/g,"<mo>)</mo></mrow>")}async function solveWithSymPy(t,n,a,s,l,u,c){const d=`${[...Object.keys(a),"s"].join(", ")} = symbols("${[...Object.keys(a),"s"].join(" ")}", positive=True, real=True)`,Ct=t.replaceAll("^","**"),ar=`
${d}
${n.length==1?`mna_vo_vi = 1/(${n[0]})`:`
mna = Matrix([${Ct}])
mna_inv = mna.inv()
${l.length==0?`mna_vo_vi = mna_inv[${s[0]-1}, ${s[1]-1}]`:`mna_vo_vi = mna_inv[${s[0]-1}, ${s[1]-1}] - mna_inv[${l[0]-1}, ${l[1]-1}]`}`}
mna_vo_vi_complex = mna_vo_vi.subs(s, s*I)

result_simplified = simplify(mna_vo_vi)
result_numeric = result_simplified.subs(${JSON.stringify(u).replaceAll('"',"")})
result_numeric_simplified = simplify(result_numeric)
result_numeric_complex = result_numeric_simplified.subs(s, s*I)
rx = Abs(result_numeric_complex)

str(result_simplified), mathml(result_simplified, printer='presentation'), str(rx), mathml(result_numeric_simplified, printer='presentation'), str(result_numeric_simplified)
`;try{const[en,tn,on,fn,dn]=await c.runPythonAsync(ar),Cn=fn,Rn=dn.replaceAll("**","^");return[en,removeFenced(tn),on,removeFenced(Cn),Rn]}catch(en){return console.log("Solving MNA matrix failed with this error:",en),["","","","",""]}}async function solveWithAlgebrite(t,n,a,s){try{algebriteExports.eval("clearall"),n.length==1?algebriteExports.eval(`mna_vo_vi = 1/(${n[0]})`):(algebriteExports.eval(`mna = [${t}]`),algebriteExports.eval("inv_mna = inv(mna)"),s.length==0?algebriteExports.eval(`mna_vo_vi = inv_mna[${a[0]}][${a[1]}]`):algebriteExports.eval(`mna_vo_vi = inv_mna[${a[0]}][${a[1]}] - inv_mna[${s[0]}][${s[1]}]`));var l=algebriteExports.eval("mna_vo_vi").toString();const[u,c]=simplify_algebra(l);algebriteExports.eval("complex_response = subst(s*i,s,mna_vo_vi)"),algebriteExports.eval("abs_complex_response = abs(complex_response)");const d=algebriteExports.eval("abs_complex_response").toString();return[u,c,d]}catch(u){return console.log("Building MNA matrix failed with this error:",u),["","",""]}}async function build_and_solve_mna(t,n,a,s,l,u){var c,d,Ct;const ar=a[n[0]].type==="iprobe",en=a,tn=Object.values(en).filter(_x=>_x.type==="iprobe").length,on=Object.values(en).filter(_x=>_x.type==="opamp").length,fn=Object.values(en).filter(_x=>_x.type==="vcvs").length,dn=on+fn;if("vin"in en)d=en.vin.ports[0];else if("iin"in en)Ct=en.iin.ports[0];else{console.log("no iin or vin");return}const Cn="vin"in en?"vin":"iin",Rn=Cn=="vin"?1:0;var ax=new Array(t+Rn+dn+tn);for(c=0;c<ax.length;c++)ax[c]=new Array(ax.length).fill("0");var ox;for(const _x in en){const Ex=en[_x];if(["inductor","capacitor","resistor"].includes(Ex.type)){Ex.type=="resistor"?ox=_x:Ex.type=="inductor"?ox=`(s*${_x})`:ox=`1/(s*${_x})`;for(const bx of Ex.ports)bx!==null&&(ax[bx][bx]+=`+${ox}^(-1)`);Ex.ports.includes(null)||(ax[Ex.ports[0]][Ex.ports[1]]+=`-${ox}^(-1)`,ax[Ex.ports[1]][Ex.ports[0]]+=`-${ox}^(-1)`)}}Cn=="vin"&&(ax[t][d]="1",ax[d][t]="1");var sx=0,lx=0;for(const _x in en){const Ex=en[_x];Ex.type==="opamp"?(Ex.ports[0]!=null&&(ax[t+Rn+sx][Ex.ports[0]]="1"),Ex.ports[1]!=null&&(ax[t+Rn+sx][Ex.ports[1]]="-1"),Ex.ports[2]!=null&&(ax[Ex.ports[2]][t+Rn+sx]="1"),sx++):Ex.type==="vcvs"?(Ex.ports[0]!=null&&(ax[t+Rn+sx][Ex.ports[0]]=`+${_x}`),Ex.ports[1]!=null&&(ax[t+Rn+sx][Ex.ports[1]]=`-${_x}`),Ex.ports[2]!=null&&(ax[t+Rn+sx][Ex.ports[2]]+="+1"),Ex.ports[3]!=null&&(ax[t+Rn+sx][Ex.ports[3]]+="-1"),Ex.ports[2]!=null&&(ax[Ex.ports[2]][t+Rn+sx]="1"),Ex.ports[3]!=null&&(ax[Ex.ports[3]][t+Rn+sx]="-1"),sx++):Ex.type==="vcis"?(Ex.ports[2]!=null&&Ex.ports[0]!=null&&(ax[Ex.ports[2]][Ex.ports[0]]+=`-${_x}`),Ex.ports[2]!=null&&Ex.ports[1]!=null&&(ax[Ex.ports[2]][Ex.ports[1]]+=`+${_x}`),Ex.ports[3]!=null&&Ex.ports[0]!=null&&(ax[Ex.ports[3]][Ex.ports[0]]+=`+${_x}`),Ex.ports[3]!=null&&Ex.ports[1]!=null&&(ax[Ex.ports[3]][Ex.ports[1]]+=`-${_x}`)):Ex.type==="iprobe"&&(ax[t+Rn+dn+lx][Ex.ports[0]]="1",ax[Ex.ports[0]][t+Rn+dn+lx]="1",ax[t+Rn+dn+lx][Ex.ports[1]]="-1",ax[Ex.ports[1]][t+Rn+dn+lx]="-1",lx++)}var cx=[];for(c=0;c<ax.length;c++)cx.push("["+ax[c].join(",")+"]");const fx=cx.join(",");var gx=[],mx=[];if(ar)Cn=="vin"?gx.push(ax.length,t+1):gx.push(ax.length,Ct+1);else{const _x=en[n[0]].ports[0];if(Cn=="vin"?gx.push(_x+1,t+1):gx.push(_x+1,Ct+1),n.length==2){const Ex=en[n[1]].ports[0];Cn=="vin"?mx.push(Ex+1,t+1):mx.push(Ex+1,Ct+1)}}var px,hx,vx,yx,Sx;return u==="algebrite"?[hx,vx,yx]=await solveWithAlgebrite(fx,ax,gx,mx):[hx,vx,yx,px,Sx]=await solveWithSymPy(fx,ax,en,gx,mx,s,l),[hx,vx,yx,px,Sx]}async function calcBilinear(t){if(t){const n=`
T, Z = symbols("T Z")
bilinear = result_simplified.subs(s,(2/T)*(Z-1)/(Z+1))
bilinear_simp = simplify(bilinear)
str(bilinear_simp), mathml(bilinear_simp, printer='presentation')
`,[a,s]=await t.runPythonAsync(n);return[a,removeFenced(s)]}else{algebriteExports.eval("bilinear = subst((2/T)*(Z-1)/(Z+1),s,mna_vo_vi)");try{return simplify_algebra(algebriteExports.eval("bilinear").toString())}catch(n){return console.log(n),["","<mtext>Having trouble calculating bilinear transform</mtext>"]}}}function getAppBarUtilityClass(t){return generateUtilityClass("MuiAppBar",t)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$f=t=>{const{color:n,position:a,classes:s}=t,l={root:["root",`color${capitalize(n)}`,`position${capitalize(a)}`]};return composeClasses(l,getAppBarUtilityClass,s)},joinVars=(t,n)=>t?`${t?.replace(")","")}, ${n})`:n,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`position${capitalize(a.position)}`],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([n])=>({props:{color:n},style:{"--AppBar-background":(t.vars??t).palette[n].main,"--AppBar-color":(t.vars??t).palette[n].contrastText}})),{props:n=>n.enableColorOnDark===!0&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:n=>n.enableColorOnDark===!1&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?joinVars(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?joinVars(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAppBar"}),{className:l,color:u="primary",enableColorOnDark:c=!1,position:d="fixed",...Ct}=s,ar={...s,color:u,position:d,enableColorOnDark:c},en=useUtilityClasses$f(ar);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:ar,elevation:4,className:clsx(en.root,l,d==="fixed"&&"mui-fixed"),ref:a,...Ct})});function getToolbarUtilityClass(t){return generateUtilityClass("MuiToolbar",t)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses$e=t=>{const{classes:n,disableGutters:a,variant:s}=t;return composeClasses({root:["root",!a&&"gutters",s]},getToolbarUtilityClass,n)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disableGutters&&n.gutters,n[a.variant]]}})(memoTheme(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiToolbar"}),{className:l,component:u="div",disableGutters:c=!1,variant:d="regular",...Ct}=s,ar={...s,component:u,disableGutters:c,variant:d},en=useUtilityClasses$e(ar);return jsxRuntimeExports.jsx(ToolbarRoot,{as:u,className:clsx(en.root,l),ref:a,ownerState:ar,...Ct})});function useSnackbar(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:a=!1,onClose:s,open:l,resumeHideDuration:u}=t,c=useTimeout();reactExports.useEffect(()=>{if(!l)return;function ax(ox){ox.defaultPrevented||ox.key==="Escape"&&s?.(ox,"escapeKeyDown")}return document.addEventListener("keydown",ax),()=>{document.removeEventListener("keydown",ax)}},[l,s]);const d=useEventCallback((ax,ox)=>{s?.(ax,ox)}),Ct=useEventCallback(ax=>{!s||ax==null||c.start(ax,()=>{d(null,"timeout")})});reactExports.useEffect(()=>(l&&Ct(n),c.clear),[l,n,Ct,c]);const ar=ax=>{s?.(ax,"clickaway")},en=c.clear,tn=reactExports.useCallback(()=>{n!=null&&Ct(u??n*.5)},[n,u,Ct]),on=ax=>ox=>{const sx=ax.onBlur;sx?.(ox),tn()},fn=ax=>ox=>{const sx=ax.onFocus;sx?.(ox),en()},dn=ax=>ox=>{const sx=ax.onMouseEnter;sx?.(ox),en()},Cn=ax=>ox=>{const sx=ax.onMouseLeave;sx?.(ox),tn()};return reactExports.useEffect(()=>{if(!a&&l)return window.addEventListener("focus",tn),window.addEventListener("blur",en),()=>{window.removeEventListener("focus",tn),window.removeEventListener("blur",en)}},[a,l,tn,en]),{getRootProps:(ax={})=>{const ox={...extractEventHandlers(t),...extractEventHandlers(ax)};return{role:"presentation",...ax,...ox,onBlur:on(ox),onFocus:fn(ox),onMouseEnter:dn(ox),onMouseLeave:Cn(ox)}},onClickAway:ar}}function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:n,disableReactTree:a=!1,mouseEvent:s="onClick",onClickAway:l,touchEvent:u="onTouchEnd"}=t,c=reactExports.useRef(!1),d=reactExports.useRef(null),Ct=reactExports.useRef(!1),ar=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{Ct.current=!0},0),()=>{Ct.current=!1}),[]);const en=useForkRef(getReactElementRef(n),d),tn=useEventCallback(dn=>{const Cn=ar.current;ar.current=!1;const Rn=ownerDocument(d.current);if(!Ct.current||!d.current||"clientX"in dn&&clickedRootScrollbar(dn,Rn))return;if(c.current){c.current=!1;return}let ax;dn.composedPath?ax=dn.composedPath().includes(d.current):ax=!Rn.documentElement.contains(dn.target)||d.current.contains(dn.target),!ax&&(a||!Cn)&&l(dn)}),on=dn=>Cn=>{ar.current=!0;const Rn=n.props[dn];Rn&&Rn(Cn)},fn={ref:en};return u!==!1&&(fn[u]=on(u)),reactExports.useEffect(()=>{if(u!==!1){const dn=mapEventPropToEvent(u),Cn=ownerDocument(d.current),Rn=()=>{c.current=!0};return Cn.addEventListener(dn,tn),Cn.addEventListener("touchmove",Rn),()=>{Cn.removeEventListener(dn,tn),Cn.removeEventListener("touchmove",Rn)}}},[tn,u]),s!==!1&&(fn[s]=on(s)),reactExports.useEffect(()=>{if(s!==!1){const dn=mapEventPropToEvent(s),Cn=ownerDocument(d.current);return Cn.addEventListener(dn,tn),()=>{Cn.removeEventListener(dn,tn)}}},[tn,s]),reactExports.cloneElement(n,fn)}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const useUtilityClasses$d=t=>{const{classes:n}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,n)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98;return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(emphasize(t.palette.background.default,n)),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:emphasize(t.palette.background.default,n),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiSnackbarContent"}),{action:l,className:u,message:c,role:d="alert",...Ct}=s,ar=s,en=useUtilityClasses$d(ar);return jsxRuntimeExports.jsxs(SnackbarContentRoot,{role:d,elevation:6,className:clsx(en.root,u),ownerState:ar,ref:a,...Ct,children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:en.message,ownerState:ar,children:c}),l?jsxRuntimeExports.jsx(SnackbarContentAction,{className:en.action,ownerState:ar,children:l}):null]})});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const useUtilityClasses$c=t=>{const{classes:n,anchorOrigin:a}=t,s={root:["root",`anchorOrigin${capitalize(a.vertical)}${capitalize(a.horizontal)}`]};return composeClasses(s,getSnackbarUtilityClass,n)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`anchorOrigin${capitalize(a.anchorOrigin.vertical)}${capitalize(a.anchorOrigin.horizontal)}`]]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Snackbar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiSnackbar"}),l=useTheme(),u={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{action:c,anchorOrigin:{vertical:d,horizontal:Ct}={vertical:"bottom",horizontal:"left"},autoHideDuration:ar=null,children:en,className:tn,ClickAwayListenerProps:on,ContentProps:fn,disableWindowBlurListener:dn=!1,message:Cn,onBlur:Rn,onClose:ax,onFocus:ox,onMouseEnter:sx,onMouseLeave:lx,open:cx,resumeHideDuration:fx,slots:gx={},slotProps:mx={},TransitionComponent:px,transitionDuration:hx=u,TransitionProps:{onEnter:vx,onExited:yx,...Sx}={},..._x}=s,Ex={...s,anchorOrigin:{vertical:d,horizontal:Ct},autoHideDuration:ar,disableWindowBlurListener:dn,TransitionComponent:px,transitionDuration:hx},bx=useUtilityClasses$c(Ex),{getRootProps:Ax,onClickAway:Mx}=useSnackbar({...Ex}),[Rx,Cx]=reactExports.useState(!0),Lx=iE=>{Cx(!0),yx&&yx(iE)},qx=(iE,Xx)=>{Cx(!1),vx&&vx(iE,Xx)},Ix={slots:{transition:px,...gx},slotProps:{content:fn,clickAwayListener:on,transition:Sx,...mx}},[Px,Nx]=useSlot("root",{ref:a,className:[bx.root,tn],elementType:SnackbarRoot,getSlotProps:Ax,externalForwardedProps:{...Ix,..._x},ownerState:Ex}),[Bx,{ownerState:$x,...Vx}]=useSlot("clickAwayListener",{elementType:ClickAwayListener,externalForwardedProps:Ix,getSlotProps:iE=>({onClickAway:(...Xx)=>{const rE=Xx[0];iE.onClickAway?.(...Xx),!rE?.defaultMuiPrevented&&Mx(...Xx)}}),ownerState:Ex}),[Gx,Zx]=useSlot("content",{elementType:SnackbarContent,shouldForwardComponentProp:!0,externalForwardedProps:Ix,additionalProps:{message:Cn,action:c},ownerState:Ex}),[jx,Hx]=useSlot("transition",{elementType:Grow,externalForwardedProps:Ix,getSlotProps:iE=>({onEnter:(...Xx)=>{iE.onEnter?.(...Xx),qx(...Xx)},onExited:(...Xx)=>{iE.onExited?.(...Xx),Lx(...Xx)}}),additionalProps:{appear:!0,in:cx,timeout:hx,direction:d==="top"?"down":"up"},ownerState:Ex});return!cx&&Rx?null:jsxRuntimeExports.jsx(Bx,{...Vx,...gx.clickAwayListener&&{ownerState:$x},children:jsxRuntimeExports.jsx(Px,{...Nx,children:jsxRuntimeExports.jsx(jx,{...Hx,children:en||jsxRuntimeExports.jsx(Gx,{...Zx})})})})}),CircuitSolverSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20stroke='rgb(184,%20255,%20241)'%20fill='none'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20Outer%20rounded%20rectangle%20--%3e%3crect%20x='5'%20y='5'%20width='90'%20height='90'%20rx='10'%20ry='10'%20/%3e%3c!--%20Top%20vertical%20lines%20--%3e%3cline%20x1='20'%20y1='5'%20x2='20'%20y2='30'%20/%3e%3cline%20x1='50'%20y1='5'%20x2='50'%20y2='30'%20/%3e%3cline%20x1='80'%20y1='5'%20x2='80'%20y2='30'%20/%3e%3c!--%20Bottom%20vertical%20lines%20--%3e%3cline%20x1='30'%20y1='95'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='95'%20x2='70'%20y2='70'%20/%3e%3c!--%20Horizontal%20traces%20--%3e%3cline%20x1='5'%20y1='50'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='95'%20y2='50'%20/%3e%3c!--%20Connect%20top%20to%20mid%20circles%20--%3e%3cline%20x1='20'%20y1='30'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='50'%20y1='30'%20x2='50'%20y2='50'%20/%3e%3cline%20x1='80'%20y1='30'%20x2='70'%20y2='50'%20/%3e%3c!--%20Connect%20mid%20to%20bottom%20circles%20--%3e%3cline%20x1='30'%20y1='50'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='70'%20y2='70'%20/%3e%3c!--%20Pads%20(circles)%20--%3e%3ccircle%20cx='20'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='50'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='80'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='70'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='70'%20r='5'%20/%3e%3c/svg%3e",SaveIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),HomeIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}));function NavBar({stateToURL:t}){const[n,a]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(ThemeProvider,{theme:theme$1,children:[jsxRuntimeExports.jsx(Snackbar,{open:n,autoHideDuration:1e4,onClose:()=>a(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Shareable URL copied to clipboard! Your whole website state is in the URL",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200}})}),jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:1},children:jsxRuntimeExports.jsxs(Toolbar,{style:{minHeight:0},children:[jsxRuntimeExports.jsx("img",{src:CircuitSolverSVG,alt:"Smith Chart",width:"30",height:"30",style:{marginRight:"12px"}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:"bold",display:{xs:"none",sm:"block"}},children:"ONLINE CIRCUIT SOLVER"}),jsxRuntimeExports.jsx("div",{style:{flexGrow:1,display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Tooltip,{title:"Copy shareable URL",placement:"bottom",children:jsxRuntimeExports.jsx(IconButton,{"aria-label":"download",color:"bland",onClick:()=>{const s=t();navigator.clipboard.writeText(s).then(()=>{a(!0)})},children:jsxRuntimeExports.jsx(SaveIcon,{})})})}),jsxRuntimeExports.jsxs(Stack,{spacing:1,direction:{sm:"column",xs:"column",md:"row"},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com",children:jsxRuntimeExports.jsx(HomeIcon,{})}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://onlinesmithchart.com",children:"Smith Chart"}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com/circuitSolver",children:"Circuit Solver"})]})]})})})]})}function getToggleButtonUtilityClass(t){return generateUtilityClass("MuiToggleButton",t)}const toggleButtonClasses=generateUtilityClasses("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ToggleButtonGroupContext=reactExports.createContext({}),ToggleButtonGroupButtonContext=reactExports.createContext(void 0);function isValueSelected(t,n){return n===void 0||t===void 0?!1:Array.isArray(n)?n.includes(t):t===n}const useUtilityClasses$b=t=>{const{classes:n,fullWidth:a,selected:s,disabled:l,size:u,color:c}=t,d={root:["root",s&&"selected",l&&"disabled",a&&"fullWidth",`size${capitalize(u)}`,c]};return composeClasses(d,getToggleButtonUtilityClass,n)},ToggleButtonRoot=styled(ButtonBase,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${toggleButtonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${toggleButtonClasses.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${toggleButtonClasses.selected}`]:{color:(t.vars||t).palette[n].main,backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[n].main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}))),ToggleButton=reactExports.forwardRef(function t(n,a){const{value:s,...l}=reactExports.useContext(ToggleButtonGroupContext),u=reactExports.useContext(ToggleButtonGroupButtonContext),c=resolveProps({...l,selected:isValueSelected(n.value,s)},n),d=useDefaultProps({props:c,name:"MuiToggleButton"}),{children:Ct,className:ar,color:en="standard",disabled:tn=!1,disableFocusRipple:on=!1,fullWidth:fn=!1,onChange:dn,onClick:Cn,selected:Rn,size:ax="medium",value:ox,...sx}=d,lx={...d,color:en,disabled:tn,disableFocusRipple:on,fullWidth:fn,size:ax},cx=useUtilityClasses$b(lx),fx=mx=>{Cn&&(Cn(mx,ox),mx.defaultPrevented)||dn&&dn(mx,ox)},gx=u||"";return jsxRuntimeExports.jsx(ToggleButtonRoot,{className:clsx(l.className,cx.root,ar,gx),disabled:tn,focusRipple:!on,ref:a,onClick:fx,onChange:dn,value:ox,ownerState:lx,"aria-pressed":Rn,...sx,children:Ct})});function getValidReactChildren(t){return reactExports.Children.toArray(t).filter(n=>reactExports.isValidElement(n))}function getToggleButtonGroupUtilityClass(t){return generateUtilityClass("MuiToggleButtonGroup",t)}const toggleButtonGroupClasses=generateUtilityClasses("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),useUtilityClasses$a=t=>{const{classes:n,orientation:a,fullWidth:s,disabled:l}=t,u={root:["root",a,s&&"fullWidth"],grouped:["grouped",`grouped${capitalize(a)}`,l&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(u,getToggleButtonGroupUtilityClass,n)},ToggleButtonGroupRoot=styled("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${toggleButtonGroupClasses.grouped}`]:n.grouped},{[`& .${toggleButtonGroupClasses.grouped}`]:n[`grouped${capitalize(a.orientation)}`]},{[`& .${toggleButtonGroupClasses.firstButton}`]:n.firstButton},{[`& .${toggleButtonGroupClasses.lastButton}`]:n.lastButton},{[`& .${toggleButtonGroupClasses.middleButton}`]:n.middleButton},n.root,a.orientation==="vertical"&&n.vertical,a.fullWidth&&n.fullWidth]}})(memoTheme(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderTop:0,marginTop:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),ToggleButtonGroup=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiToggleButtonGroup"}),{children:l,className:u,color:c="standard",disabled:d=!1,exclusive:Ct=!1,fullWidth:ar=!1,onChange:en,orientation:tn="horizontal",size:on="medium",value:fn,...dn}=s,Cn={...s,disabled:d,fullWidth:ar,orientation:tn,size:on},Rn=useUtilityClasses$a(Cn),ax=reactExports.useCallback((gx,mx)=>{if(!en)return;const px=fn&&fn.indexOf(mx);let hx;fn&&px>=0?(hx=fn.slice(),hx.splice(px,1)):hx=fn?fn.concat(mx):[mx],en(gx,hx)},[en,fn]),ox=reactExports.useCallback((gx,mx)=>{en&&en(gx,fn===mx?null:mx)},[en,fn]),sx=reactExports.useMemo(()=>({className:Rn.grouped,onChange:Ct?ox:ax,value:fn,size:on,fullWidth:ar,color:c,disabled:d}),[Rn.grouped,Ct,ox,ax,fn,on,ar,c,d]),lx=getValidReactChildren(l),cx=lx.length,fx=gx=>{const mx=gx===0,px=gx===cx-1;return mx&&px?"":mx?Rn.firstButton:px?Rn.lastButton:Rn.middleButton};return jsxRuntimeExports.jsx(ToggleButtonGroupRoot,{role:"group",className:clsx(Rn.root,u),ref:a,ownerState:Cn,...dn,children:jsxRuntimeExports.jsx(ToggleButtonGroupContext.Provider,{value:sx,children:lx.map((gx,mx)=>jsxRuntimeExports.jsx(ToggleButtonGroupButtonContext.Provider,{value:fx(mx),children:gx},mx))})})}),scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function t(n,a,s){let l=Promise.resolve();if(a&&a.length>0){let ar=function(en){return Promise.all(en.map(tn=>Promise.resolve(tn).then(on=>({status:"fulfilled",value:on}),on=>({status:"rejected",reason:on}))))};var c=ar;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),Ct=d?.nonce||d?.getAttribute("nonce");l=ar(a.map(en=>{if(en=assetsURL(en),en in seen)return;seen[en]=!0;const tn=en.endsWith(".css"),on=tn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${en}"]${on}`))return;const fn=document.createElement("link");if(fn.rel=tn?"stylesheet":scriptRel,tn||(fn.as="script"),fn.crossOrigin="",fn.href=en,Ct&&fn.setAttribute("nonce",Ct),document.head.appendChild(fn),tn)return new Promise((dn,Cn)=>{fn.addEventListener("load",dn),fn.addEventListener("error",()=>Cn(new Error(`Unable to preload CSS for ${en}`)))})}))}function u(d){const Ct=new Event("vite:preloadError",{cancelable:!0});if(Ct.payload=d,window.dispatchEvent(Ct),!Ct.defaultPrevented)throw d}return l.then(d=>{for(const Ct of d||[])Ct.status==="rejected"&&u(Ct.reason);return n().catch(u)})};var oe=Object.defineProperty,o=(t,n)=>oe(t,"name",{value:n,configurable:!0}),A=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,a)=>(typeof require<"u"?require:n)[a]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),W=(()=>{for(var t=new Uint8Array(128),n=0;n<64;n++)t[n<26?n+65:n<52?n+71:n<62?n-4:n*4-205]=n;return a=>{for(var s=a.length,l=new Uint8Array((s-(a[s-1]=="=")-(a[s-2]=="="))*3/4|0),u=0,c=0;u<s;){var d=t[a.charCodeAt(u++)],Ct=t[a.charCodeAt(u++)],ar=t[a.charCodeAt(u++)],en=t[a.charCodeAt(u++)];l[c++]=d<<2|Ct>>4,l[c++]=Ct<<4|ar>>2,l[c++]=ar<<6|en}return l}})();function se(t){return!isNaN(parseFloat(t))&&isFinite(t)}o(se,"_isNumber");function S(t){return t.charAt(0).toUpperCase()+t.substring(1)}o(S,"_capitalize");function L(t){return function(){return this[t]}}o(L,"_getter");var E$1=["isConstructor","isEval","isNative","isToplevel"],P=["columnNumber","lineNumber"],k$2=["fileName","functionName","source"],ae=["args"],ce=["evalOrigin"],R=E$1.concat(P,k$2,ae,ce);function p(t){if(t)for(var n=0;n<R.length;n++)t[R[n]]!==void 0&&this["set"+S(R[n])](t[R[n]])}o(p,"StackFrame");p.prototype={getArgs:o(function(){return this.args},"getArgs"),setArgs:o(function(t){if(Object.prototype.toString.call(t)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=t},"setArgs"),getEvalOrigin:o(function(){return this.evalOrigin},"getEvalOrigin"),setEvalOrigin:o(function(t){if(t instanceof p)this.evalOrigin=t;else if(t instanceof Object)this.evalOrigin=new p(t);else throw new TypeError("Eval Origin must be an Object or StackFrame")},"setEvalOrigin"),toString:o(function(){var t=this.getFileName()||"",n=this.getLineNumber()||"",a=this.getColumnNumber()||"",s=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+n+":"+a+")":"[eval]:"+n+":"+a:s?s+" ("+t+":"+n+":"+a+")":t+":"+n+":"+a},"toString")};p.fromString=o(function(t){var n=t.indexOf("("),a=t.lastIndexOf(")"),s=t.substring(0,n),l=t.substring(n+1,a).split(","),u=t.substring(a+1);if(u.indexOf("@")===0)var c=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(u,""),d=c[1],Ct=c[2],ar=c[3];return new p({functionName:s,args:l||void 0,fileName:d,lineNumber:Ct||void 0,columnNumber:ar||void 0})},"StackFrame$$fromString");for(b$1=0;b$1<E$1.length;b$1++)p.prototype["get"+S(E$1[b$1])]=L(E$1[b$1]),p.prototype["set"+S(E$1[b$1])]=(function(t){return function(n){this[t]=!!n}})(E$1[b$1]);var b$1;for(v$1=0;v$1<P.length;v$1++)p.prototype["get"+S(P[v$1])]=L(P[v$1]),p.prototype["set"+S(P[v$1])]=(function(t){return function(n){if(!se(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}})(P[v$1]);var v$1;for(h$1=0;h$1<k$2.length;h$1++)p.prototype["get"+S(k$2[h$1])]=L(k$2[h$1]),p.prototype["set"+S(k$2[h$1])]=(function(t){return function(n){this[t]=String(n)}})(k$2[h$1]);var h$1,O=p;function le(){var t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:o(function(a){if(a.stack&&a.stack.match(t))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:o(function(a){if(a.indexOf(":")===-1)return[a];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,l=s.exec(a.replace(/[()]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:o(function(a){var s=a.stack.split(`
`).filter(function(l){return!!l.match(t)},this);return s.map(function(l){l.indexOf("(eval ")>-1&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=l.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),c=u.match(/ (\(.+\)$)/);u=c?u.replace(c[0],""):u;var d=this.extractLocation(c?c[1]:u),Ct=c&&u||void 0,ar=["eval","<anonymous>"].indexOf(d[0])>-1?void 0:d[0];return new O({functionName:Ct,fileName:ar,lineNumber:d[1],columnNumber:d[2],source:l})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:o(function(a){var s=a.stack.split(`
`).filter(function(l){return!l.match(n)},this);return s.map(function(l){if(l.indexOf(" > eval")>-1&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return new O({functionName:l});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,c=l.match(u),d=c&&c[1]?c[1]:void 0,Ct=this.extractLocation(l.replace(u,""));return new O({functionName:d,fileName:Ct[0],lineNumber:Ct[1],columnNumber:Ct[2],source:l})},this)},"ErrorStackParser$$parseFFOrSafari")}}o(le,"ErrorStackParser");var de=new le,$$1=de,g$1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,T=g$1&&typeof module<"u"&&typeof module.exports<"u"&&typeof A<"u"&&typeof __dirname<"u",j=g$1&&!T,ue=typeof Deno<"u",H=!g$1&&!ue,V=H&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",z=H&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var x=typeof read=="function"&&typeof load=="function",J,D,Y,q,U;async function C$1(){if(!g$1||(J=(await __vitePreload(async()=>{const{default:u}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{default:u}},void 0)).default,q=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),U=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),Y=(await __vitePreload(async()=>{const{default:u}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{default:u}},void 0)).default,D=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),M=D.sep,typeof A<"u"))return;let t=q,n=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),a=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),s=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),l={fs:t,crypto:n,ws:a,child_process:s};globalThis.require=function(u){return l[u]}}o(C$1,"initNodeModules");function fe(t,n){return D.resolve(n||".",t)}o(fe,"node_resolvePath");function me(t,n){return n===void 0&&(n=location),new URL(t,n).toString()}o(me,"browser_resolvePath");var N;g$1?N=fe:x?N=o(t=>t,"resolvePath"):N=me;var M;g$1||(M="/");function pe(t,n){return t.startsWith("file://")&&(t=t.slice(7)),t.includes("://")?{response:fetch(t)}:{binary:U.readFile(t).then(a=>new Uint8Array(a.buffer,a.byteOffset,a.byteLength))}}o(pe,"node_getBinaryResponse");function ge(t,n){if(t.startsWith("file://")&&(t=t.slice(7)),t.includes("://"))throw new Error("Shell cannot fetch urls");return{binary:Promise.resolve(new Uint8Array(readbuffer(t)))}}o(ge,"shell_getBinaryResponse");function ye(t,n){let a=new URL(t,location);return{response:fetch(a,n?{integrity:n}:{})}}o(ye,"browser_getBinaryResponse");var F;g$1?F=pe:x?F=ge:F=ye;async function K(t,n){let{response:a,binary:s}=F(t,n);if(s)return s;let l=await a;if(!l.ok)throw new Error(`Failed to load '${t}': request failed.`);return new Uint8Array(await l.arrayBuffer())}o(K,"loadBinaryFile");var I;if(V)I=o(async t=>await import(t),"loadScript");else if(z)I=o(async t=>{try{globalThis.importScripts(t)}catch(n){if(n instanceof TypeError)await import(t);else throw n}},"loadScript");else if(g$1)I=be;else if(x)I=load;else throw new Error("Cannot determine runtime environment");async function be(t){t.startsWith("file://")&&(t=t.slice(7)),t.includes("://")?Y.runInThisContext(await(await fetch(t)).text()):await import(J.pathToFileURL(t).href)}o(be,"nodeLoadScript");async function G(t){if(g$1){await C$1();let n=await U.readFile(t,{encoding:"utf8"});return JSON.parse(n)}else if(x){let n=read(t);return JSON.parse(n)}else return await(await fetch(t)).json()}o(G,"loadLockFile");async function X(){if(T)return __dirname;let t;try{throw new Error}catch(s){t=s}let n=$$1.parse(t)[0].fileName;if(g$1&&!n.startsWith("file://")&&(n=`file://${n}`),j){let s=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),[]);return(await __vitePreload(async()=>{const{fileURLToPath:l}=await Promise.resolve().then(()=>__viteBrowserExternal$1);return{fileURLToPath:l}},void 0)).fileURLToPath(s.dirname(n))}let a=n.lastIndexOf(M);if(a===-1)throw new Error("Could not extract indexURL path from pyodide module location");return n.slice(0,a)}o(X,"calculateDirname");function Q(t){return t.substring(0,t.lastIndexOf("/")+1)||globalThis.location?.toString()||"."}o(Q,"calculateInstallBaseUrl");function Z(t){let n=t.FS,a=t.FS.filesystems.MEMFS,s=t.PATH,l={DIR_MODE:16895,FILE_MODE:33279,mount:o(function(u){if(!u.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return a.mount.apply(null,arguments)},"mount"),syncfs:o(async(u,c,d)=>{try{let Ct=l.getLocalSet(u),ar=await l.getRemoteSet(u),en=c?ar:Ct,tn=c?Ct:ar;await l.reconcile(u,en,tn),d(null)}catch(Ct){d(Ct)}},"syncfs"),getLocalSet:o(u=>{let c=Object.create(null);function d(en){return en!=="."&&en!==".."}o(d,"isRealDir");function Ct(en){return tn=>s.join2(en,tn)}o(Ct,"toAbsolute");let ar=n.readdir(u.mountpoint).filter(d).map(Ct(u.mountpoint));for(;ar.length;){let en=ar.pop(),tn=n.stat(en);n.isDir(tn.mode)&&ar.push.apply(ar,n.readdir(en).filter(d).map(Ct(en))),c[en]={timestamp:tn.mtime,mode:tn.mode}}return{type:"local",entries:c}},"getLocalSet"),getRemoteSet:o(async u=>{let c=Object.create(null),d=await ve(u.opts.fileSystemHandle);for(let[Ct,ar]of d)Ct!=="."&&(c[s.join2(u.mountpoint,Ct)]={timestamp:ar.kind==="file"?new Date((await ar.getFile()).lastModified):new Date,mode:ar.kind==="file"?l.FILE_MODE:l.DIR_MODE});return{type:"remote",entries:c,handles:d}},"getRemoteSet"),loadLocalEntry:o(u=>{let c=n.lookupPath(u).node,d=n.stat(u);if(n.isDir(d.mode))return{timestamp:d.mtime,mode:d.mode};if(n.isFile(d.mode))return c.contents=a.getFileDataAsTypedArray(c),{timestamp:d.mtime,mode:d.mode,contents:c.contents};throw new Error("node type not supported")},"loadLocalEntry"),storeLocalEntry:o((u,c)=>{if(n.isDir(c.mode))n.mkdirTree(u,c.mode);else if(n.isFile(c.mode))n.writeFile(u,c.contents,{canOwn:!0});else throw new Error("node type not supported");n.chmod(u,c.mode),n.utime(u,c.timestamp,c.timestamp)},"storeLocalEntry"),removeLocalEntry:o(u=>{var c=n.stat(u);n.isDir(c.mode)?n.rmdir(u):n.isFile(c.mode)&&n.unlink(u)},"removeLocalEntry"),loadRemoteEntry:o(async u=>{if(u.kind==="file"){let c=await u.getFile();return{contents:new Uint8Array(await c.arrayBuffer()),mode:l.FILE_MODE,timestamp:new Date(c.lastModified)}}else{if(u.kind==="directory")return{mode:l.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+u.kind)}},"loadRemoteEntry"),storeRemoteEntry:o(async(u,c,d)=>{let Ct=u.get(s.dirname(c)),ar=n.isFile(d.mode)?await Ct.getFileHandle(s.basename(c),{create:!0}):await Ct.getDirectoryHandle(s.basename(c),{create:!0});if(ar.kind==="file"){let en=await ar.createWritable();await en.write(d.contents),await en.close()}u.set(c,ar)},"storeRemoteEntry"),removeRemoteEntry:o(async(u,c)=>{await u.get(s.dirname(c)).removeEntry(s.basename(c)),u.delete(c)},"removeRemoteEntry"),reconcile:o(async(u,c,d)=>{let Ct=0,ar=[];Object.keys(c.entries).forEach(function(on){let fn=c.entries[on],dn=d.entries[on];(!dn||n.isFile(fn.mode)&&fn.timestamp.getTime()>dn.timestamp.getTime())&&(ar.push(on),Ct++)}),ar.sort();let en=[];if(Object.keys(d.entries).forEach(function(on){c.entries[on]||(en.push(on),Ct++)}),en.sort().reverse(),!Ct)return;let tn=c.type==="remote"?c.handles:d.handles;for(let on of ar){let fn=s.normalize(on.replace(u.mountpoint,"/")).substring(1);if(d.type==="local"){let dn=tn.get(fn),Cn=await l.loadRemoteEntry(dn);l.storeLocalEntry(on,Cn)}else{let dn=l.loadLocalEntry(on);await l.storeRemoteEntry(tn,fn,dn)}}for(let on of en)if(d.type==="local")l.removeLocalEntry(on);else{let fn=s.normalize(on.replace(u.mountpoint,"/")).substring(1);await l.removeRemoteEntry(tn,fn)}},"reconcile")};t.FS.filesystems.NATIVEFS_ASYNC=l}o(Z,"initializeNativeFS");var ve=o(async t=>{let n=[];async function a(l){for await(let u of l.values())n.push(u),u.kind==="directory"&&await a(u)}o(a,"collect"),await a(t);let s=new Map;s.set(".",t);for(let l of n){let u=(await t.resolve(l)).join("/");s.set(u,l)}return s},"getFsHandles");W("AGFzbQEAAAABDANfAGAAAW9gAW8BfwMDAgECByECD2NyZWF0ZV9zZW50aW5lbAAAC2lzX3NlbnRpbmVsAAEKEwIHAPsBAPsbCwkAIAD7GvsUAAs=");var Se=(async function(){globalThis.navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&typeof navigator.maxTouchPoints<"u"&&navigator.maxTouchPoints>1)})();async function te(){let t=await Se;if(t)return t.exports;let n=Symbol("error marker");return{create_sentinel:o(()=>n,"create_sentinel"),is_sentinel:o(a=>a===n,"is_sentinel")}}o(te,"getSentinelImport");function ne(t){let n={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:Ne(t),print:t.stdout,printErr:t.stderr,onExit(a){n.exitCode=a},thisProgram:t._sysExecutable,arguments:t.args,API:{config:t},locateFile:o(a=>t.indexURL+a,"locateFile"),instantiateWasm:Fe(t.indexURL)};return n}o(ne,"createSettings");function we(t){return function(n){let a="/";try{n.FS.mkdirTree(t)}catch(s){console.error(`Error occurred while making a home directory '${t}':`),console.error(s),console.error(`Using '${a}' for a home directory instead`),t=a}n.FS.chdir(t)}}o(we,"createHomeDirectory");function Ee(t){return function(n){Object.assign(n.ENV,t)}}o(Ee,"setEnvironment");function Pe(t){return t?[async n=>{n.addRunDependency("fsInitHook");try{await t(n.FS,{sitePackages:n.API.sitePackages})}finally{n.removeRunDependency("fsInitHook")}}]:[]}o(Pe,"callFsInitHook");function ke(t){let n=t.HEAPU32[t._Py_Version>>>2],a=n>>>24&255,s=n>>>16&255,l=n>>>8&255;return[a,s,l]}o(ke,"computeVersionTuple");function Ie(t){let n=K(t);return async a=>{a.API.pyVersionTuple=ke(a);let[s,l]=a.API.pyVersionTuple;a.FS.mkdirTree("/lib"),a.API.sitePackages=`/lib/python${s}.${l}/site-packages`,a.FS.mkdirTree(a.API.sitePackages),a.addRunDependency("install-stdlib");try{let u=await n;a.FS.writeFile(`/lib/python${s}${l}.zip`,u)}catch(u){console.error("Error occurred while installing the standard library:"),console.error(u)}finally{a.removeRunDependency("install-stdlib")}}}o(Ie,"installStdlib");function Ne(t){let n;return t.stdLibURL!=null?n=t.stdLibURL:n=t.indexURL+"python_stdlib.zip",[Ie(n),we(t.env.HOME),Ee(t.env),Z,...Pe(t.fsInit)]}o(Ne,"getFileSystemInitializationFuncs");function Fe(t){if(typeof WasmOffsetConverter<"u")return;let{binary:n,response:a}=F(t+"pyodide.asm.wasm"),s=te();return function(l,u){return(async function(){l.sentinel=await s;try{let c;a?c=await WebAssembly.instantiateStreaming(a,l):c=await WebAssembly.instantiate(await n,l);let{instance:d,module:Ct}=c;u(d,Ct)}catch(c){console.warn("wasm instantiation failed!"),console.warn(c)}})(),{}}}o(Fe,"getInstantiateWasmFunc");var re="0.28.2";function _(t){return t===void 0||t.endsWith("/")?t:t+"/"}o(_,"withTrailingSlash");var B=re;async function at(t={}){if(t.lockFileContents&&t.lockFileURL)throw new Error("Can't pass both lockFileContents and lockFileURL");await C$1();let n=t.indexURL||await X();n=_(N(n));let a=t;if(a.packageBaseUrl=_(a.packageBaseUrl),a.cdnUrl=_(a.packageBaseUrl??`https://cdn.jsdelivr.net/pyodide/v${B}/full/`),!t.lockFileContents){let tn=t.lockFileURL??n+"pyodide-lock.json";a.lockFileContents=G(tn),a.packageBaseUrl??=Q(tn)}a.indexURL=n,a.packageCacheDir&&(a.packageCacheDir=_(N(a.packageCacheDir)));let s={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,args:[],env:{},packages:[],packageCacheDir:a.packageBaseUrl,enableRunUntilComplete:!0,checkAPIVersion:!0,BUILD_ID:"941a75c165c70d9d65a059137df0382b4c6a7747ff5f3de2b264ce4a2fb36cf5"},l=Object.assign(s,a);l.env.HOME??="/home/pyodide",l.env.PYTHONINSPECT??="1";let u=ne(l),c=u.API;if(c.lockFilePromise=Promise.resolve(a.lockFileContents),typeof _createPyodideModule!="function"){let tn=`${l.indexURL}pyodide.asm.js`;await I(tn)}let d;if(t._loadSnapshot){let tn=await t._loadSnapshot;ArrayBuffer.isView(tn)?d=tn:d=new Uint8Array(tn),u.noInitialRun=!0,u.INITIAL_MEMORY=d.length}let Ct=await _createPyodideModule(u);if(u.exitCode!==void 0)throw new Ct.ExitStatus(u.exitCode);if(t.pyproxyToStringRepr&&c.setPyProxyToStringMethod(!0),t.convertNullToNone&&c.setCompatNullToNone(!0),c.version!==B&&l.checkAPIVersion)throw new Error(`Pyodide version does not match: '${B}' <==> '${c.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);Ct.locateFile=tn=>{throw tn.endsWith(".so")?new Error(`Failed to find dynamic library "${tn}"`):new Error(`Unexpected call to locateFile("${tn}")`)};let ar;d&&(ar=c.restoreSnapshot(d));let en=c.finalizeBootstrap(ar,t._snapshotDeserializer);return c.sys.path.insert(0,""),c._pyodide.set_excepthook(),await c.packageIndexReady,c.initializeStreams(l.stdin,l.stdout,l.stderr),en}o(at,"loadPyodide");async function initPyodideAndSympy(){const t=await at({indexURL:`https://cdn.jsdelivr.net/pyodide/v${B}/full/`});await t.loadPackage("sympy");var n=`
from sympy import Matrix, symbols, simplify, Abs, I, fraction, solve
from sympy.printing.mathml import mathml`;return await t.runPythonAsync(n),t}const HtmlTooltip=styled(({className:t,...n})=>jsxRuntimeExports.jsx(Tooltip,{...n,classes:{popper:t}}))(({theme:t})=>({[`& .${tooltipClasses.tooltip}`]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"}}));function formatMathML(t,n,a){return`<math><mfrac><mrow><mi>${n}</mi></mrow><mrow><msub><mi>${a[0]=="vin"?"V":"I"}</mi><mi>in</mi></msub></mrow></mfrac><mo>=</mo>${t}</math>`}function ChoseTF({setResults:t,nodes:n,fullyConnectedComponents:a,componentValuesSolved:s,setUnsolveSnackbar:l}){const[u,c]=reactExports.useState("algebrite"),[d,Ct]=reactExports.useState(!1),[ar,en]=reactExports.useState(null),tn=[],on=[];for(const Cn in a)["vin","iin"].includes(a[Cn].type)&&on.push(a[Cn].type);for(const Cn in a)["vprobe","iprobe"].includes(a[Cn].type)&&tn.push(Cn);const fn=tn.filter(Cn=>a[Cn].type=="vprobe");fn.length==2&&(tn.push(`${fn[0]}-${fn[1]}`),tn.push(`${fn[1]}-${fn[0]}`));const dn={};for(const Cn in a)Cn in s&&(dn[Cn]=s[Cn]);return jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[on.length==0||tn.length==0?jsxRuntimeExports.jsx(Box,{sx:{color:"red"},children:jsxRuntimeExports.jsxs("p",{children:["No path found from ",jsxRuntimeExports.jsx("b",{children:"vin"})," or ",jsxRuntimeExports.jsx("b",{children:"iin"})," to ",jsxRuntimeExports.jsx("b",{children:"vprobe"})," or ",jsxRuntimeExports.jsx("b",{children:"iprobe"})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Grid$1,{size:12,children:"Calculate..."}),tn.map(Cn=>{const Rn=Cn.includes("-")?Cn.split("-"):[Cn];return jsxRuntimeExports.jsx(Grid$1,{size:{xs:4,sm:2,lg:1},children:jsxRuntimeExports.jsx(Button,{variant:"contained",loading:d,color:"info",fullWidth:!0,sx:{py:1,justifyContent:"center",fontSize:"1.4em"},onClick:async()=>{Ct(!0),t({...emptyResults});const[ax,ox,sx,lx,cx]=await build_and_solve_mna(n.length,Rn,a,dn,ar,u);ax===""&&ox===""&&sx===""&&l(mx=>mx||!0);const fx=formatMathML(ox,Cn,on),gx=formatMathML(lx,Cn,on);t({text:ax,mathML:fx,complexResponse:sx,bilinearRaw:"",bilinearMathML:"",numericML:gx,numericText:cx,solver:ar}),Ct(!1)},children:jsxRuntimeExports.jsx("math",{xmlns:"http://www.w3.org/1998/Math/MathML",children:jsxRuntimeExports.jsxs("mfrac",{children:[jsxRuntimeExports.jsx("mi",{children:Cn}),on[0]=="vin"?jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"V"}),jsxRuntimeExports.jsx("mi",{children:"in"})]}):jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"I"}),jsxRuntimeExports.jsx("mi",{children:"in"})]})]})})},Cn)},Cn)})]}),jsxRuntimeExports.jsx(Box,{display:"flex",gap:1,children:jsxRuntimeExports.jsxs(ToggleButtonGroup,{color:"primary",value:u,exclusive:!0,children:[jsxRuntimeExports.jsx(HtmlTooltip,{title:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h6",{children:"Chose Algebra solver"}),"These are JavaScript based solvers. It's already loaded and is fine for most cases"]}),children:jsxRuntimeExports.jsx(ToggleButton,{value:"algebrite",onClick:()=>{t({...emptyResults}),en(null),c("algebrite")},children:d?jsxRuntimeExports.jsx(CircularProgress,{size:20,color:"inherit"}):"Algebrite + Yaffle"})}),jsxRuntimeExports.jsx(HtmlTooltip,{title:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h6",{children:"Chose Algebra solver"}),"This is a Python based solver. Chosing this will download 10MB of files and run Python inside the browser, enabling more features such as giving a pretty numeric result, and more advanced algebraic simplification."]}),children:jsxRuntimeExports.jsx(ToggleButton,{value:"sympy",onClick:async()=>{Ct(!0),t({...emptyResults});const Cn=await initPyodideAndSympy();en(Cn),Ct(!1),c("sympy")},children:d?jsxRuntimeExports.jsx(CircularProgress,{size:20,color:"inherit"}):"SymPy"})})]})})]})}var bundle_min$1={exports:{}},bundle_min=bundle_min$1.exports,hasRequiredBundle_min;function requireBundle_min(){return hasRequiredBundle_min||(hasRequiredBundle_min=1,(function(t,n){(function(a,s){t.exports=s()})(bundle_min,(()=>(()=>{var a={4582:(c,d)=>{function Ct(tn,on){return on===void 0&&(on=Object),on&&typeof on.freeze=="function"?on.freeze(tn):tn}var ar=Ct({HTML:"text/html",isHTML:function(tn){return tn===ar.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),en=Ct({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(tn){return tn===en.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});d.assign=function(tn,on){if(tn===null||typeof tn!="object")throw new TypeError("target is not an object");for(var fn in on)Object.prototype.hasOwnProperty.call(on,fn)&&(tn[fn]=on[fn]);return tn},d.find=function(tn,on,fn){if(fn===void 0&&(fn=Array.prototype),tn&&typeof fn.find=="function")return fn.find.call(tn,on);for(var dn=0;dn<tn.length;dn++)if(Object.prototype.hasOwnProperty.call(tn,dn)){var Cn=tn[dn];if(on.call(void 0,Cn,dn,tn))return Cn}},d.freeze=Ct,d.MIME_TYPE=ar,d.NAMESPACE=en},5752:(c,d,Ct)=>{var ar=Ct(4582),en=Ct(4722),tn=Ct(6559),on=Ct(4466),fn=en.DOMImplementation,dn=ar.NAMESPACE,Cn=on.ParseError,Rn=on.XMLReader;function ax(mx){return mx.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function ox(mx){this.options=mx||{locator:{}}}function sx(){this.cdata=!1}function lx(mx,px){px.lineNumber=mx.lineNumber,px.columnNumber=mx.columnNumber}function cx(mx){if(mx)return`
@`+(mx.systemId||"")+"#[line:"+mx.lineNumber+",col:"+mx.columnNumber+"]"}function fx(mx,px,hx){return typeof mx=="string"?mx.substr(px,hx):mx.length>=px+hx||px?new java.lang.String(mx,px,hx)+"":mx}function gx(mx,px){mx.currentElement?mx.currentElement.appendChild(px):mx.doc.appendChild(px)}ox.prototype.parseFromString=function(mx,px){var hx=this.options,vx=new Rn,yx=hx.domBuilder||new sx,Sx=hx.errorHandler,_x=hx.locator,Ex=hx.xmlns||{},bx=/\/x?html?$/.test(px),Ax=bx?tn.HTML_ENTITIES:tn.XML_ENTITIES;_x&&yx.setDocumentLocator(_x),vx.errorHandler=(function(Rx,Cx,Lx){if(!Rx){if(Cx instanceof sx)return Cx;Rx=Cx}var qx={},Ix=Rx instanceof Function;function Px(Nx){var Bx=Rx[Nx];!Bx&&Ix&&(Bx=Rx.length==2?function($x){Rx(Nx,$x)}:Rx),qx[Nx]=Bx&&function($x){Bx("[xmldom "+Nx+"]	"+$x+cx(Lx))}||function(){}}return Lx=Lx||{},Px("warning"),Px("error"),Px("fatalError"),qx})(Sx,yx,_x),vx.domBuilder=hx.domBuilder||yx,bx&&(Ex[""]=dn.HTML),Ex.xml=Ex.xml||dn.XML;var Mx=hx.normalizeLineEndings||ax;return mx&&typeof mx=="string"?vx.parse(Mx(mx),Ex,Ax):vx.errorHandler.error("invalid doc source"),yx.doc},sx.prototype={startDocument:function(){this.doc=new fn().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(mx,px,hx,vx){var yx=this.doc,Sx=yx.createElementNS(mx,hx||px),_x=vx.length;gx(this,Sx),this.currentElement=Sx,this.locator&&lx(this.locator,Sx);for(var Ex=0;Ex<_x;Ex++){mx=vx.getURI(Ex);var bx=vx.getValue(Ex),Ax=(hx=vx.getQName(Ex),yx.createAttributeNS(mx,hx));this.locator&&lx(vx.getLocator(Ex),Ax),Ax.value=Ax.nodeValue=bx,Sx.setAttributeNode(Ax)}},endElement:function(mx,px,hx){var vx=this.currentElement;vx.tagName,this.currentElement=vx.parentNode},startPrefixMapping:function(mx,px){},endPrefixMapping:function(mx){},processingInstruction:function(mx,px){var hx=this.doc.createProcessingInstruction(mx,px);this.locator&&lx(this.locator,hx),gx(this,hx)},ignorableWhitespace:function(mx,px,hx){},characters:function(mx,px,hx){if(mx=fx.apply(this,arguments)){if(this.cdata)var vx=this.doc.createCDATASection(mx);else vx=this.doc.createTextNode(mx);this.currentElement?this.currentElement.appendChild(vx):/^\s*$/.test(mx)&&this.doc.appendChild(vx),this.locator&&lx(this.locator,vx)}},skippedEntity:function(mx){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(mx){(this.locator=mx)&&(mx.lineNumber=0)},comment:function(mx,px,hx){mx=fx.apply(this,arguments);var vx=this.doc.createComment(mx);this.locator&&lx(this.locator,vx),gx(this,vx)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(mx,px,hx){var vx=this.doc.implementation;if(vx&&vx.createDocumentType){var yx=vx.createDocumentType(mx,px,hx);this.locator&&lx(this.locator,yx),gx(this,yx),this.doc.doctype=yx}},warning:function(mx){console.warn("[xmldom warning]	"+mx,cx(this.locator))},error:function(mx){console.error("[xmldom error]	"+mx,cx(this.locator))},fatalError:function(mx){throw new Cn(mx,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(mx){sx.prototype[mx]=function(){return null}})),d.DOMParser=ox},4722:(c,d,Ct)=>{var ar=Ct(4582),en=ar.find,tn=ar.NAMESPACE;function on(kx){return kx!==""}function fn(kx,Ux){return kx.hasOwnProperty(Ux)||(kx[Ux]=!0),kx}function dn(kx){if(!kx)return[];var Ux=(function(Yx){return Yx?Yx.split(/[\t\n\f\r ]+/).filter(on):[]})(kx);return Object.keys(Ux.reduce(fn,{}))}function Cn(kx,Ux){for(var Yx in kx)Object.prototype.hasOwnProperty.call(kx,Yx)&&(Ux[Yx]=kx[Yx])}function Rn(kx,Ux){var Yx=kx.prototype;if(!(Yx instanceof Ux)){let vE=function(){};var eE=vE;vE.prototype=Ux.prototype,Cn(Yx,vE=new vE),kx.prototype=Yx=vE}Yx.constructor!=kx&&(typeof kx!="function"&&console.error("unknown Class:"+kx),Yx.constructor=kx)}var ax={},ox=ax.ELEMENT_NODE=1,sx=ax.ATTRIBUTE_NODE=2,lx=ax.TEXT_NODE=3,cx=ax.CDATA_SECTION_NODE=4,fx=ax.ENTITY_REFERENCE_NODE=5,gx=ax.ENTITY_NODE=6,mx=ax.PROCESSING_INSTRUCTION_NODE=7,px=ax.COMMENT_NODE=8,hx=ax.DOCUMENT_NODE=9,vx=ax.DOCUMENT_TYPE_NODE=10,yx=ax.DOCUMENT_FRAGMENT_NODE=11,Sx=ax.NOTATION_NODE=12,_x={},Ex={},bx=(_x.INDEX_SIZE_ERR=(Ex[1]="Index size error",1),_x.DOMSTRING_SIZE_ERR=(Ex[2]="DOMString size error",2),_x.HIERARCHY_REQUEST_ERR=(Ex[3]="Hierarchy request error",3)),Ax=(_x.WRONG_DOCUMENT_ERR=(Ex[4]="Wrong document",4),_x.INVALID_CHARACTER_ERR=(Ex[5]="Invalid character",5),_x.NO_DATA_ALLOWED_ERR=(Ex[6]="No data allowed",6),_x.NO_MODIFICATION_ALLOWED_ERR=(Ex[7]="No modification allowed",7),_x.NOT_FOUND_ERR=(Ex[8]="Not found",8)),Mx=(_x.NOT_SUPPORTED_ERR=(Ex[9]="Not supported",9),_x.INUSE_ATTRIBUTE_ERR=(Ex[10]="Attribute in use",10));function Rx(kx,Ux){if(Ux instanceof Error)var Yx=Ux;else Yx=this,Error.call(this,Ex[kx]),this.message=Ex[kx],Error.captureStackTrace&&Error.captureStackTrace(this,Rx);return Yx.code=kx,Ux&&(this.message=this.message+": "+Ux),Yx}function Cx(){}function Lx(kx,Ux){this._node=kx,this._refresh=Ux,qx(this)}function qx(kx){var Ux=kx._node._inc||kx._node.ownerDocument._inc;if(kx._inc!==Ux){var Yx=kx._refresh(kx._node);if(DE(kx,"length",Yx.length),!kx.$$length||Yx.length<kx.$$length)for(var eE=Yx.length;eE in kx;eE++)Object.prototype.hasOwnProperty.call(kx,eE)&&delete kx[eE];Cn(Yx,kx),kx._inc=Ux}}function Ix(){}function Px(kx,Ux){for(var Yx=kx.length;Yx--;)if(kx[Yx]===Ux)return Yx}function Nx(kx,Ux,Yx,eE){if(eE?Ux[Px(Ux,eE)]=Yx:Ux[Ux.length++]=Yx,kx){Yx.ownerElement=kx;var vE=kx.ownerDocument;vE&&(eE&&Hx(vE,kx,eE),(function(LE,BE,$E){LE&&LE._inc++,$E.namespaceURI===tn.XMLNS&&(BE._nsMap[$E.prefix?$E.localName:""]=$E.value)})(vE,kx,Yx))}}function Bx(kx,Ux,Yx){var eE=Px(Ux,Yx);if(!(eE>=0))throw new Rx(Ax,new Error(kx.tagName+"@"+Yx));for(var vE=Ux.length-1;eE<vE;)Ux[eE]=Ux[++eE];if(Ux.length=vE,kx){var LE=kx.ownerDocument;LE&&(Hx(LE,kx,Yx),Yx.ownerElement=null)}}function $x(){}function Vx(){}function Gx(kx){return(kx=="<"?"&lt;":kx==">"&&"&gt;")||kx=="&"&&"&amp;"||kx=='"'&&"&quot;"||"&#"+kx.charCodeAt()+";"}function Zx(kx,Ux){if(Ux(kx))return!0;if(kx=kx.firstChild)do if(Zx(kx,Ux))return!0;while(kx=kx.nextSibling)}function jx(){this.ownerDocument=this}function Hx(kx,Ux,Yx,eE){kx&&kx._inc++,Yx.namespaceURI===tn.XMLNS&&delete Ux._nsMap[Yx.prefix?Yx.localName:""]}function iE(kx,Ux,Yx){if(kx&&kx._inc){kx._inc++;var eE=Ux.childNodes;if(Yx)eE[eE.length++]=Yx;else{for(var vE=Ux.firstChild,LE=0;vE;)eE[LE++]=vE,vE=vE.nextSibling;eE.length=LE,delete eE[eE.length]}}}function Xx(kx,Ux){var Yx=Ux.previousSibling,eE=Ux.nextSibling;return Yx?Yx.nextSibling=eE:kx.firstChild=eE,eE?eE.previousSibling=Yx:kx.lastChild=Yx,Ux.parentNode=null,Ux.previousSibling=null,Ux.nextSibling=null,iE(kx.ownerDocument,kx),Ux}function rE(kx){return kx&&kx.nodeType===Vx.DOCUMENT_TYPE_NODE}function uE(kx){return kx&&kx.nodeType===Vx.ELEMENT_NODE}function aE(kx){return kx&&kx.nodeType===Vx.TEXT_NODE}function Kx(kx,Ux){var Yx=kx.childNodes||[];if(en(Yx,uE)||rE(Ux))return!1;var eE=en(Yx,rE);return!(Ux&&eE&&Yx.indexOf(eE)>Yx.indexOf(Ux))}function ME(kx,Ux){var Yx=kx.childNodes||[];if(en(Yx,(function(vE){return uE(vE)&&vE!==Ux})))return!1;var eE=en(Yx,rE);return!(Ux&&eE&&Yx.indexOf(eE)>Yx.indexOf(Ux))}function IE(kx,Ux,Yx){var eE=kx.childNodes||[],vE=Ux.childNodes||[];if(Ux.nodeType===Vx.DOCUMENT_FRAGMENT_NODE){var LE=vE.filter(uE);if(LE.length>1||en(vE,aE))throw new Rx(bx,"More than one element or text in fragment");if(LE.length===1&&!Kx(kx,Yx))throw new Rx(bx,"Element in fragment can not be inserted before doctype")}if(uE(Ux)&&!Kx(kx,Yx))throw new Rx(bx,"Only one element can be added and only after doctype");if(rE(Ux)){if(en(eE,rE))throw new Rx(bx,"Only one doctype is allowed");var BE=en(eE,uE);if(Yx&&eE.indexOf(BE)<eE.indexOf(Yx))throw new Rx(bx,"Doctype can only be inserted before an element");if(!Yx&&BE)throw new Rx(bx,"Doctype can not be appended since element is present")}}function wE(kx,Ux,Yx){var eE=kx.childNodes||[],vE=Ux.childNodes||[];if(Ux.nodeType===Vx.DOCUMENT_FRAGMENT_NODE){var LE=vE.filter(uE);if(LE.length>1||en(vE,aE))throw new Rx(bx,"More than one element or text in fragment");if(LE.length===1&&!ME(kx,Yx))throw new Rx(bx,"Element in fragment can not be inserted before doctype")}if(uE(Ux)&&!ME(kx,Yx))throw new Rx(bx,"Only one element can be added and only after doctype");if(rE(Ux)){if(en(eE,(function($E){return rE($E)&&$E!==Yx})))throw new Rx(bx,"Only one doctype is allowed");var BE=en(eE,uE);if(Yx&&eE.indexOf(BE)<eE.indexOf(Yx))throw new Rx(bx,"Doctype can only be inserted before an element")}}function bE(kx,Ux,Yx,eE){(function(kE,ZE,eS){if(!(function(WE){return WE&&(WE.nodeType===Vx.DOCUMENT_NODE||WE.nodeType===Vx.DOCUMENT_FRAGMENT_NODE||WE.nodeType===Vx.ELEMENT_NODE)})(kE))throw new Rx(bx,"Unexpected parent node type "+kE.nodeType);if(eS&&eS.parentNode!==kE)throw new Rx(Ax,"child not in parent");if(!(function(WE){return WE&&(uE(WE)||aE(WE)||rE(WE)||WE.nodeType===Vx.DOCUMENT_FRAGMENT_NODE||WE.nodeType===Vx.COMMENT_NODE||WE.nodeType===Vx.PROCESSING_INSTRUCTION_NODE)})(ZE)||rE(ZE)&&kE.nodeType!==Vx.DOCUMENT_NODE)throw new Rx(bx,"Unexpected node type "+ZE.nodeType+" for parent node type "+kE.nodeType)})(kx,Ux,Yx),kx.nodeType===Vx.DOCUMENT_NODE&&(eE||IE)(kx,Ux,Yx);var vE=Ux.parentNode;if(vE&&vE.removeChild(Ux),Ux.nodeType===yx){var LE=Ux.firstChild;if(LE==null)return Ux;var BE=Ux.lastChild}else LE=BE=Ux;var $E=Yx?Yx.previousSibling:kx.lastChild;LE.previousSibling=$E,BE.nextSibling=Yx,$E?$E.nextSibling=LE:kx.firstChild=LE,Yx==null?kx.lastChild=BE:Yx.previousSibling=BE;do LE.parentNode=kx;while(LE!==BE&&(LE=LE.nextSibling));return iE(kx.ownerDocument||kx,kx),Ux.nodeType==yx&&(Ux.firstChild=Ux.lastChild=null),Ux}function UE(){this._nsMap={}}function CE(){}function YE(){}function Ox(){}function Fx(){}function Wx(){}function Qx(){}function oE(){}function tE(){}function mE(){}function hE(){}function SE(){}function _E(){}function PE(kx,Ux){var Yx=[],eE=this.nodeType==9&&this.documentElement||this,vE=eE.prefix,LE=eE.namespaceURI;if(LE&&vE==null&&(vE=eE.lookupPrefix(LE))==null)var BE=[{namespace:LE,prefix:null}];return gE(this,Yx,kx,Ux,BE),Yx.join("")}function NE(kx,Ux,Yx){var eE=kx.prefix||"",vE=kx.namespaceURI;if(!vE||eE==="xml"&&vE===tn.XML||vE===tn.XMLNS)return!1;for(var LE=Yx.length;LE--;){var BE=Yx[LE];if(BE.prefix===eE)return BE.namespace!==vE}return!0}function lE(kx,Ux,Yx){kx.push(" ",Ux,'="',Yx.replace(/[<>&"\t\n\r]/g,Gx),'"')}function gE(kx,Ux,Yx,eE,vE){if(vE||(vE=[]),eE){if(!(kx=eE(kx)))return;if(typeof kx=="string")return void Ux.push(kx)}switch(kx.nodeType){case ox:var LE=kx.attributes,BE=LE.length,$E=kx.firstChild,kE=kx.tagName,ZE=kE;if(!(Yx=tn.isHTML(kx.namespaceURI)||Yx)&&!kx.prefix&&kx.namespaceURI){for(var eS,WE=0;WE<LE.length;WE++)if(LE.item(WE).name==="xmlns"){eS=LE.item(WE).value;break}if(!eS){for(var CS=vE.length-1;CS>=0;CS--)if((LS=vE[CS]).prefix===""&&LS.namespace===kx.namespaceURI){eS=LS.namespace;break}}if(eS!==kx.namespaceURI)for(CS=vE.length-1;CS>=0;CS--){var LS;if((LS=vE[CS]).namespace===kx.namespaceURI){LS.prefix&&(ZE=LS.prefix+":"+kE);break}}}Ux.push("<",ZE);for(var hS=0;hS<BE;hS++)(qS=LE.item(hS)).prefix=="xmlns"?vE.push({prefix:qS.localName,namespace:qS.value}):qS.nodeName=="xmlns"&&vE.push({prefix:"",namespace:qS.value});for(hS=0;hS<BE;hS++){var qS,$S,VS;NE(qS=LE.item(hS),0,vE)&&(lE(Ux,($S=qS.prefix||"")?"xmlns:"+$S:"xmlns",VS=qS.namespaceURI),vE.push({prefix:$S,namespace:VS})),gE(qS,Ux,Yx,eE,vE)}if(kE===ZE&&NE(kx,0,vE)&&(lE(Ux,($S=kx.prefix||"")?"xmlns:"+$S:"xmlns",VS=kx.namespaceURI),vE.push({prefix:$S,namespace:VS})),$E||Yx&&!/^(?:meta|link|img|br|hr|input)$/i.test(kE)){if(Ux.push(">"),Yx&&/^script$/i.test(kE))for(;$E;)$E.data?Ux.push($E.data):gE($E,Ux,Yx,eE,vE.slice()),$E=$E.nextSibling;else for(;$E;)gE($E,Ux,Yx,eE,vE.slice()),$E=$E.nextSibling;Ux.push("</",ZE,">")}else Ux.push("/>");return;case hx:case yx:for($E=kx.firstChild;$E;)gE($E,Ux,Yx,eE,vE.slice()),$E=$E.nextSibling;return;case sx:return lE(Ux,kx.name,kx.value);case lx:return Ux.push(kx.data.replace(/[<&>]/g,Gx));case cx:return Ux.push("<![CDATA[",kx.data,"]]>");case px:return Ux.push("<!--",kx.data,"-->");case vx:var GE=kx.publicId,RE=kx.systemId;if(Ux.push("<!DOCTYPE ",kx.name),GE)Ux.push(" PUBLIC ",GE),RE&&RE!="."&&Ux.push(" ",RE),Ux.push(">");else if(RE&&RE!=".")Ux.push(" SYSTEM ",RE,">");else{var zE=kx.internalSubset;zE&&Ux.push(" [",zE,"]"),Ux.push(">")}return;case mx:return Ux.push("<?",kx.target," ",kx.data,"?>");case fx:return Ux.push("&",kx.nodeName,";");default:Ux.push("??",kx.nodeName)}}function AE(kx,Ux,Yx){var eE;switch(Ux.nodeType){case ox:(eE=Ux.cloneNode(!1)).ownerDocument=kx;case yx:break;case sx:Yx=!0}if(eE||(eE=Ux.cloneNode(!1)),eE.ownerDocument=kx,eE.parentNode=null,Yx)for(var vE=Ux.firstChild;vE;)eE.appendChild(AE(kx,vE,Yx)),vE=vE.nextSibling;return eE}function yE(kx,Ux,Yx){var eE=new Ux.constructor;for(var vE in Ux)if(Object.prototype.hasOwnProperty.call(Ux,vE)){var LE=Ux[vE];typeof LE!="object"&&LE!=eE[vE]&&(eE[vE]=LE)}switch(Ux.childNodes&&(eE.childNodes=new Cx),eE.ownerDocument=kx,eE.nodeType){case ox:var BE=Ux.attributes,$E=eE.attributes=new Ix,kE=BE.length;$E._ownerElement=eE;for(var ZE=0;ZE<kE;ZE++)eE.setAttributeNode(yE(kx,BE.item(ZE),!0));break;case sx:Yx=!0}if(Yx)for(var eS=Ux.firstChild;eS;)eE.appendChild(yE(kx,eS,Yx)),eS=eS.nextSibling;return eE}function DE(kx,Ux,Yx){kx[Ux]=Yx}_x.INVALID_STATE_ERR=(Ex[11]="Invalid state",11),_x.SYNTAX_ERR=(Ex[12]="Syntax error",12),_x.INVALID_MODIFICATION_ERR=(Ex[13]="Invalid modification",13),_x.NAMESPACE_ERR=(Ex[14]="Invalid namespace",14),_x.INVALID_ACCESS_ERR=(Ex[15]="Invalid access",15),Rx.prototype=Error.prototype,Cn(_x,Rx),Cx.prototype={length:0,item:function(kx){return kx>=0&&kx<this.length?this[kx]:null},toString:function(kx,Ux){for(var Yx=[],eE=0;eE<this.length;eE++)gE(this[eE],Yx,kx,Ux);return Yx.join("")},filter:function(kx){return Array.prototype.filter.call(this,kx)},indexOf:function(kx){return Array.prototype.indexOf.call(this,kx)}},Lx.prototype.item=function(kx){return qx(this),this[kx]||null},Rn(Lx,Cx),Ix.prototype={length:0,item:Cx.prototype.item,getNamedItem:function(kx){for(var Ux=this.length;Ux--;){var Yx=this[Ux];if(Yx.nodeName==kx)return Yx}},setNamedItem:function(kx){var Ux=kx.ownerElement;if(Ux&&Ux!=this._ownerElement)throw new Rx(Mx);var Yx=this.getNamedItem(kx.nodeName);return Nx(this._ownerElement,this,kx,Yx),Yx},setNamedItemNS:function(kx){var Ux,Yx=kx.ownerElement;if(Yx&&Yx!=this._ownerElement)throw new Rx(Mx);return Ux=this.getNamedItemNS(kx.namespaceURI,kx.localName),Nx(this._ownerElement,this,kx,Ux),Ux},removeNamedItem:function(kx){var Ux=this.getNamedItem(kx);return Bx(this._ownerElement,this,Ux),Ux},removeNamedItemNS:function(kx,Ux){var Yx=this.getNamedItemNS(kx,Ux);return Bx(this._ownerElement,this,Yx),Yx},getNamedItemNS:function(kx,Ux){for(var Yx=this.length;Yx--;){var eE=this[Yx];if(eE.localName==Ux&&eE.namespaceURI==kx)return eE}return null}},$x.prototype={hasFeature:function(kx,Ux){return!0},createDocument:function(kx,Ux,Yx){var eE=new jx;if(eE.implementation=this,eE.childNodes=new Cx,eE.doctype=Yx||null,Yx&&eE.appendChild(Yx),Ux){var vE=eE.createElementNS(kx,Ux);eE.appendChild(vE)}return eE},createDocumentType:function(kx,Ux,Yx){var eE=new Qx;return eE.name=kx,eE.nodeName=kx,eE.publicId=Ux||"",eE.systemId=Yx||"",eE}},Vx.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(kx,Ux){return bE(this,kx,Ux)},replaceChild:function(kx,Ux){bE(this,kx,Ux,wE),Ux&&this.removeChild(Ux)},removeChild:function(kx){return Xx(this,kx)},appendChild:function(kx){return this.insertBefore(kx,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(kx){return yE(this.ownerDocument||this,this,kx)},normalize:function(){for(var kx=this.firstChild;kx;){var Ux=kx.nextSibling;Ux&&Ux.nodeType==lx&&kx.nodeType==lx?(this.removeChild(Ux),kx.appendData(Ux.data)):(kx.normalize(),kx=Ux)}},isSupported:function(kx,Ux){return this.ownerDocument.implementation.hasFeature(kx,Ux)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(kx){for(var Ux=this;Ux;){var Yx=Ux._nsMap;if(Yx){for(var eE in Yx)if(Object.prototype.hasOwnProperty.call(Yx,eE)&&Yx[eE]===kx)return eE}Ux=Ux.nodeType==sx?Ux.ownerDocument:Ux.parentNode}return null},lookupNamespaceURI:function(kx){for(var Ux=this;Ux;){var Yx=Ux._nsMap;if(Yx&&Object.prototype.hasOwnProperty.call(Yx,kx))return Yx[kx];Ux=Ux.nodeType==sx?Ux.ownerDocument:Ux.parentNode}return null},isDefaultNamespace:function(kx){return this.lookupPrefix(kx)==null}},Cn(ax,Vx),Cn(ax,Vx.prototype),jx.prototype={nodeName:"#document",nodeType:hx,doctype:null,documentElement:null,_inc:1,insertBefore:function(kx,Ux){if(kx.nodeType==yx){for(var Yx=kx.firstChild;Yx;){var eE=Yx.nextSibling;this.insertBefore(Yx,Ux),Yx=eE}return kx}return bE(this,kx,Ux),kx.ownerDocument=this,this.documentElement===null&&kx.nodeType===ox&&(this.documentElement=kx),kx},removeChild:function(kx){return this.documentElement==kx&&(this.documentElement=null),Xx(this,kx)},replaceChild:function(kx,Ux){bE(this,kx,Ux,wE),kx.ownerDocument=this,Ux&&this.removeChild(Ux),uE(kx)&&(this.documentElement=kx)},importNode:function(kx,Ux){return AE(this,kx,Ux)},getElementById:function(kx){var Ux=null;return Zx(this.documentElement,(function(Yx){if(Yx.nodeType==ox&&Yx.getAttribute("id")==kx)return Ux=Yx,!0})),Ux},getElementsByClassName:function(kx){var Ux=dn(kx);return new Lx(this,(function(Yx){var eE=[];return Ux.length>0&&Zx(Yx.documentElement,(function(vE){if(vE!==Yx&&vE.nodeType===ox){var LE=vE.getAttribute("class");if(LE){var BE=kx===LE;if(!BE){var $E=dn(LE);BE=Ux.every((kE=$E,function(ZE){return kE&&kE.indexOf(ZE)!==-1}))}BE&&eE.push(vE)}}var kE})),eE}))},createElement:function(kx){var Ux=new UE;return Ux.ownerDocument=this,Ux.nodeName=kx,Ux.tagName=kx,Ux.localName=kx,Ux.childNodes=new Cx,(Ux.attributes=new Ix)._ownerElement=Ux,Ux},createDocumentFragment:function(){var kx=new hE;return kx.ownerDocument=this,kx.childNodes=new Cx,kx},createTextNode:function(kx){var Ux=new Ox;return Ux.ownerDocument=this,Ux.appendData(kx),Ux},createComment:function(kx){var Ux=new Fx;return Ux.ownerDocument=this,Ux.appendData(kx),Ux},createCDATASection:function(kx){var Ux=new Wx;return Ux.ownerDocument=this,Ux.appendData(kx),Ux},createProcessingInstruction:function(kx,Ux){var Yx=new SE;return Yx.ownerDocument=this,Yx.tagName=Yx.nodeName=Yx.target=kx,Yx.nodeValue=Yx.data=Ux,Yx},createAttribute:function(kx){var Ux=new CE;return Ux.ownerDocument=this,Ux.name=kx,Ux.nodeName=kx,Ux.localName=kx,Ux.specified=!0,Ux},createEntityReference:function(kx){var Ux=new mE;return Ux.ownerDocument=this,Ux.nodeName=kx,Ux},createElementNS:function(kx,Ux){var Yx=new UE,eE=Ux.split(":"),vE=Yx.attributes=new Ix;return Yx.childNodes=new Cx,Yx.ownerDocument=this,Yx.nodeName=Ux,Yx.tagName=Ux,Yx.namespaceURI=kx,eE.length==2?(Yx.prefix=eE[0],Yx.localName=eE[1]):Yx.localName=Ux,vE._ownerElement=Yx,Yx},createAttributeNS:function(kx,Ux){var Yx=new CE,eE=Ux.split(":");return Yx.ownerDocument=this,Yx.nodeName=Ux,Yx.name=Ux,Yx.namespaceURI=kx,Yx.specified=!0,eE.length==2?(Yx.prefix=eE[0],Yx.localName=eE[1]):Yx.localName=Ux,Yx}},Rn(jx,Vx),UE.prototype={nodeType:ox,hasAttribute:function(kx){return this.getAttributeNode(kx)!=null},getAttribute:function(kx){var Ux=this.getAttributeNode(kx);return Ux&&Ux.value||""},getAttributeNode:function(kx){return this.attributes.getNamedItem(kx)},setAttribute:function(kx,Ux){var Yx=this.ownerDocument.createAttribute(kx);Yx.value=Yx.nodeValue=""+Ux,this.setAttributeNode(Yx)},removeAttribute:function(kx){var Ux=this.getAttributeNode(kx);Ux&&this.removeAttributeNode(Ux)},appendChild:function(kx){return kx.nodeType===yx?this.insertBefore(kx,null):(function(Ux,Yx){return Yx.parentNode&&Yx.parentNode.removeChild(Yx),Yx.parentNode=Ux,Yx.previousSibling=Ux.lastChild,Yx.nextSibling=null,Yx.previousSibling?Yx.previousSibling.nextSibling=Yx:Ux.firstChild=Yx,Ux.lastChild=Yx,iE(Ux.ownerDocument,Ux,Yx),Yx})(this,kx)},setAttributeNode:function(kx){return this.attributes.setNamedItem(kx)},setAttributeNodeNS:function(kx){return this.attributes.setNamedItemNS(kx)},removeAttributeNode:function(kx){return this.attributes.removeNamedItem(kx.nodeName)},removeAttributeNS:function(kx,Ux){var Yx=this.getAttributeNodeNS(kx,Ux);Yx&&this.removeAttributeNode(Yx)},hasAttributeNS:function(kx,Ux){return this.getAttributeNodeNS(kx,Ux)!=null},getAttributeNS:function(kx,Ux){var Yx=this.getAttributeNodeNS(kx,Ux);return Yx&&Yx.value||""},setAttributeNS:function(kx,Ux,Yx){var eE=this.ownerDocument.createAttributeNS(kx,Ux);eE.value=eE.nodeValue=""+Yx,this.setAttributeNode(eE)},getAttributeNodeNS:function(kx,Ux){return this.attributes.getNamedItemNS(kx,Ux)},getElementsByTagName:function(kx){return new Lx(this,(function(Ux){var Yx=[];return Zx(Ux,(function(eE){eE===Ux||eE.nodeType!=ox||kx!=="*"&&eE.tagName!=kx||Yx.push(eE)})),Yx}))},getElementsByTagNameNS:function(kx,Ux){return new Lx(this,(function(Yx){var eE=[];return Zx(Yx,(function(vE){vE===Yx||vE.nodeType!==ox||kx!=="*"&&vE.namespaceURI!==kx||Ux!=="*"&&vE.localName!=Ux||eE.push(vE)})),eE}))}},jx.prototype.getElementsByTagName=UE.prototype.getElementsByTagName,jx.prototype.getElementsByTagNameNS=UE.prototype.getElementsByTagNameNS,Rn(UE,Vx),CE.prototype.nodeType=sx,Rn(CE,Vx),YE.prototype={data:"",substringData:function(kx,Ux){return this.data.substring(kx,kx+Ux)},appendData:function(kx){kx=this.data+kx,this.nodeValue=this.data=kx,this.length=kx.length},insertData:function(kx,Ux){this.replaceData(kx,0,Ux)},appendChild:function(kx){throw new Error(Ex[bx])},deleteData:function(kx,Ux){this.replaceData(kx,Ux,"")},replaceData:function(kx,Ux,Yx){Yx=this.data.substring(0,kx)+Yx+this.data.substring(kx+Ux),this.nodeValue=this.data=Yx,this.length=Yx.length}},Rn(YE,Vx),Ox.prototype={nodeName:"#text",nodeType:lx,splitText:function(kx){var Ux=this.data,Yx=Ux.substring(kx);Ux=Ux.substring(0,kx),this.data=this.nodeValue=Ux,this.length=Ux.length;var eE=this.ownerDocument.createTextNode(Yx);return this.parentNode&&this.parentNode.insertBefore(eE,this.nextSibling),eE}},Rn(Ox,YE),Fx.prototype={nodeName:"#comment",nodeType:px},Rn(Fx,YE),Wx.prototype={nodeName:"#cdata-section",nodeType:cx},Rn(Wx,YE),Qx.prototype.nodeType=vx,Rn(Qx,Vx),oE.prototype.nodeType=Sx,Rn(oE,Vx),tE.prototype.nodeType=gx,Rn(tE,Vx),mE.prototype.nodeType=fx,Rn(mE,Vx),hE.prototype.nodeName="#document-fragment",hE.prototype.nodeType=yx,Rn(hE,Vx),SE.prototype.nodeType=mx,Rn(SE,Vx),_E.prototype.serializeToString=function(kx,Ux,Yx){return PE.call(kx,Ux,Yx)},Vx.prototype.toString=PE;try{if(Object.defineProperty){let kx=function(Ux){switch(Ux.nodeType){case ox:case yx:var Yx=[];for(Ux=Ux.firstChild;Ux;)Ux.nodeType!==7&&Ux.nodeType!==8&&Yx.push(kx(Ux)),Ux=Ux.nextSibling;return Yx.join("");default:return Ux.nodeValue}};var OE=kx;Object.defineProperty(Lx.prototype,"length",{get:function(){return qx(this),this.$$length}}),Object.defineProperty(Vx.prototype,"textContent",{get:function(){return kx(this)},set:function(Ux){switch(this.nodeType){case ox:case yx:for(;this.firstChild;)this.removeChild(this.firstChild);(Ux||String(Ux))&&this.appendChild(this.ownerDocument.createTextNode(Ux));break;default:this.data=Ux,this.value=Ux,this.nodeValue=Ux}}}),DE=function(Ux,Yx,eE){Ux["$$"+Yx]=eE}}}catch{}d.DocumentType=Qx,d.DOMException=Rx,d.DOMImplementation=$x,d.Element=UE,d.Node=Vx,d.NodeList=Cx,d.XMLSerializer=_E},6559:(c,d,Ct)=>{var ar=Ct(4582).freeze;d.XML_ENTITIES=ar({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),d.HTML_ENTITIES=ar({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),d.entityMap=d.HTML_ENTITIES},8978:(c,d,Ct)=>{var ar=Ct(4722);d.DOMImplementation=ar.DOMImplementation,d.XMLSerializer=ar.XMLSerializer,d.DOMParser=Ct(5752).DOMParser},4466:(c,d,Ct)=>{var ar=Ct(4582).NAMESPACE,en=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,tn=new RegExp("[\\-\\.0-9"+en.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),on=new RegExp("^"+en.source+tn.source+"*(?::"+en.source+tn.source+"*)?$");function fn(mx,px){this.message=mx,this.locator=px,Error.captureStackTrace&&Error.captureStackTrace(this,fn)}function dn(){}function Cn(mx,px){return px.lineNumber=mx.lineNumber,px.columnNumber=mx.columnNumber,px}function Rn(mx,px,hx,vx,yx,Sx){function _x(Cx,Lx,qx){hx.attributeNames.hasOwnProperty(Cx)&&Sx.fatalError("Attribute "+Cx+" redefined"),hx.addValue(Cx,Lx.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,yx),qx)}for(var Ex,bx=++px,Ax=0;;){var Mx=mx.charAt(bx);switch(Mx){case"=":if(Ax===1)Ex=mx.slice(px,bx),Ax=3;else{if(Ax!==2)throw new Error("attribute equal must after attrName");Ax=3}break;case"'":case'"':if(Ax===3||Ax===1){if(Ax===1&&(Sx.warning('attribute value must after "="'),Ex=mx.slice(px,bx)),px=bx+1,!((bx=mx.indexOf(Mx,px))>0))throw new Error("attribute value no end '"+Mx+"' match");_x(Ex,Rx=mx.slice(px,bx),px-1),Ax=5}else{if(Ax!=4)throw new Error('attribute value must after "="');_x(Ex,Rx=mx.slice(px,bx),px),Sx.warning('attribute "'+Ex+'" missed start quot('+Mx+")!!"),px=bx+1,Ax=5}break;case"/":switch(Ax){case 0:hx.setTagName(mx.slice(px,bx));case 5:case 6:case 7:Ax=7,hx.closed=!0;case 4:case 1:break;case 2:hx.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Sx.error("unexpected end of input"),Ax==0&&hx.setTagName(mx.slice(px,bx)),bx;case">":switch(Ax){case 0:hx.setTagName(mx.slice(px,bx));case 5:case 6:case 7:break;case 4:case 1:(Rx=mx.slice(px,bx)).slice(-1)==="/"&&(hx.closed=!0,Rx=Rx.slice(0,-1));case 2:Ax===2&&(Rx=Ex),Ax==4?(Sx.warning('attribute "'+Rx+'" missed quot(")!'),_x(Ex,Rx,px)):(ar.isHTML(vx[""])&&Rx.match(/^(?:disabled|checked|selected)$/i)||Sx.warning('attribute "'+Rx+'" missed value!! "'+Rx+'" instead!!'),_x(Rx,Rx,px));break;case 3:throw new Error("attribute value missed!!")}return bx;case"":Mx=" ";default:if(Mx<=" ")switch(Ax){case 0:hx.setTagName(mx.slice(px,bx)),Ax=6;break;case 1:Ex=mx.slice(px,bx),Ax=2;break;case 4:var Rx=mx.slice(px,bx);Sx.warning('attribute "'+Rx+'" missed quot(")!!'),_x(Ex,Rx,px);case 5:Ax=6}else switch(Ax){case 2:hx.tagName,ar.isHTML(vx[""])&&Ex.match(/^(?:disabled|checked|selected)$/i)||Sx.warning('attribute "'+Ex+'" missed value!! "'+Ex+'" instead2!!'),_x(Ex,Ex,px),px=bx,Ax=1;break;case 5:Sx.warning('attribute space is required"'+Ex+'"!!');case 6:Ax=1,px=bx;break;case 3:Ax=4,px=bx;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}bx++}}function ax(mx,px,hx){for(var vx=mx.tagName,yx=null,Sx=mx.length;Sx--;){var _x=mx[Sx],Ex=_x.qName,bx=_x.value;if((Cx=Ex.indexOf(":"))>0)var Ax=_x.prefix=Ex.slice(0,Cx),Mx=Ex.slice(Cx+1),Rx=Ax==="xmlns"&&Mx;else Mx=Ex,Ax=null,Rx=Ex==="xmlns"&&"";_x.localName=Mx,Rx!==!1&&(yx==null&&(yx={},lx(hx,hx={})),hx[Rx]=yx[Rx]=bx,_x.uri=ar.XMLNS,px.startPrefixMapping(Rx,bx))}for(Sx=mx.length;Sx--;)(Ax=(_x=mx[Sx]).prefix)&&(Ax==="xml"&&(_x.uri=ar.XML),Ax!=="xmlns"&&(_x.uri=hx[Ax||""]));var Cx;(Cx=vx.indexOf(":"))>0?(Ax=mx.prefix=vx.slice(0,Cx),Mx=mx.localName=vx.slice(Cx+1)):(Ax=null,Mx=mx.localName=vx);var Lx=mx.uri=hx[Ax||""];if(px.startElement(Lx,Mx,vx,mx),!mx.closed)return mx.currentNSMap=hx,mx.localNSMap=yx,!0;if(px.endElement(Lx,Mx,vx),yx)for(Ax in yx)Object.prototype.hasOwnProperty.call(yx,Ax)&&px.endPrefixMapping(Ax)}function ox(mx,px,hx,vx,yx){if(/^(?:script|textarea)$/i.test(hx)){var Sx=mx.indexOf("</"+hx+">",px),_x=mx.substring(px+1,Sx);if(/[&<]/.test(_x))return/^script$/i.test(hx)?(yx.characters(_x,0,_x.length),Sx):(_x=_x.replace(/&#?\w+;/g,vx),yx.characters(_x,0,_x.length),Sx)}return px+1}function sx(mx,px,hx,vx){var yx=vx[hx];return yx==null&&((yx=mx.lastIndexOf("</"+hx+">"))<px&&(yx=mx.lastIndexOf("</"+hx)),vx[hx]=yx),yx<px}function lx(mx,px){for(var hx in mx)Object.prototype.hasOwnProperty.call(mx,hx)&&(px[hx]=mx[hx])}function cx(mx,px,hx,vx){if(mx.charAt(px+2)==="-")return mx.charAt(px+3)==="-"?(yx=mx.indexOf("-->",px+4))>px?(hx.comment(mx,px+4,yx-px-4),yx+3):(vx.error("Unclosed comment"),-1):-1;if(mx.substr(px+3,6)=="CDATA["){var yx=mx.indexOf("]]>",px+9);return hx.startCDATA(),hx.characters(mx,px+9,yx-px-9),hx.endCDATA(),yx+3}var Sx=(function(Rx,Cx){var Lx,qx=[],Ix=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Ix.lastIndex=Cx,Ix.exec(Rx);Lx=Ix.exec(Rx);)if(qx.push(Lx),Lx[1])return qx})(mx,px),_x=Sx.length;if(_x>1&&/!doctype/i.test(Sx[0][0])){var Ex=Sx[1][0],bx=!1,Ax=!1;_x>3&&(/^public$/i.test(Sx[2][0])?(bx=Sx[3][0],Ax=_x>4&&Sx[4][0]):/^system$/i.test(Sx[2][0])&&(Ax=Sx[3][0]));var Mx=Sx[_x-1];return hx.startDTD(Ex,bx,Ax),hx.endDTD(),Mx.index+Mx[0].length}return-1}function fx(mx,px,hx){var vx=mx.indexOf("?>",px);if(vx){var yx=mx.substring(px,vx).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return yx?(yx[0].length,hx.processingInstruction(yx[1],yx[2]),vx+2):-1}return-1}function gx(){this.attributeNames={}}fn.prototype=new Error,fn.prototype.name=fn.name,dn.prototype={parse:function(mx,px,hx){var vx=this.domBuilder;vx.startDocument(),lx(px,px={}),(function(yx,Sx,_x,Ex,bx){function Ax(bE){var UE=bE.slice(1,-1);return Object.hasOwnProperty.call(_x,UE)?_x[UE]:UE.charAt(0)==="#"?(function(CE){if(CE>65535){var YE=55296+((CE-=65536)>>10),Ox=56320+(1023&CE);return String.fromCharCode(YE,Ox)}return String.fromCharCode(CE)})(parseInt(UE.substr(1).replace("x","0x"))):(bx.error("entity not found:"+bE),bE)}function Mx(bE){if(bE>Bx){var UE=yx.substring(Bx,bE).replace(/&#?\w+;/g,Ax);Ix&&Rx(Bx),Ex.characters(UE,0,bE-Bx),Bx=bE}}function Rx(bE,UE){for(;bE>=Lx&&(UE=qx.exec(yx));)Cx=UE.index,Lx=Cx+UE[0].length,Ix.lineNumber++;Ix.columnNumber=bE-Cx+1}for(var Cx=0,Lx=0,qx=/.*(?:\r\n?|\n)|.*$/g,Ix=Ex.locator,Px=[{currentNSMap:Sx}],Nx={},Bx=0;;){try{var $x=yx.indexOf("<",Bx);if($x<0){if(!yx.substr(Bx).match(/^\s*$/)){var Vx=Ex.doc,Gx=Vx.createTextNode(yx.substr(Bx));Vx.appendChild(Gx),Ex.currentElement=Gx}return}switch($x>Bx&&Mx($x),yx.charAt($x+1)){case"/":var Zx=yx.indexOf(">",$x+3),jx=yx.substring($x+2,Zx).replace(/[ \t\n\r]+$/g,""),Hx=Px.pop();Zx<0?(jx=yx.substring($x+2).replace(/[\s<].*/,""),bx.error("end tag name: "+jx+" is not complete:"+Hx.tagName),Zx=$x+1+jx.length):jx.match(/\s</)&&(jx=jx.replace(/[\s<].*/,""),bx.error("end tag name: "+jx+" maybe not complete"),Zx=$x+1+jx.length);var iE=Hx.localNSMap,Xx=Hx.tagName==jx;if(Xx||Hx.tagName&&Hx.tagName.toLowerCase()==jx.toLowerCase()){if(Ex.endElement(Hx.uri,Hx.localName,jx),iE)for(var rE in iE)Object.prototype.hasOwnProperty.call(iE,rE)&&Ex.endPrefixMapping(rE);Xx||bx.fatalError("end tag name: "+jx+" is not match the current start tagName:"+Hx.tagName)}else Px.push(Hx);Zx++;break;case"?":Ix&&Rx($x),Zx=fx(yx,$x,Ex);break;case"!":Ix&&Rx($x),Zx=cx(yx,$x,Ex,bx);break;default:Ix&&Rx($x);var uE=new gx,aE=Px[Px.length-1].currentNSMap,Kx=(Zx=Rn(yx,$x,uE,aE,Ax,bx),uE.length);if(!uE.closed&&sx(yx,Zx,uE.tagName,Nx)&&(uE.closed=!0,_x.nbsp||bx.warning("unclosed xml attribute")),Ix&&Kx){for(var ME=Cn(Ix,{}),IE=0;IE<Kx;IE++){var wE=uE[IE];Rx(wE.offset),wE.locator=Cn(Ix,{})}Ex.locator=ME,ax(uE,Ex,aE)&&Px.push(uE),Ex.locator=Ix}else ax(uE,Ex,aE)&&Px.push(uE);ar.isHTML(uE.uri)&&!uE.closed?Zx=ox(yx,Zx,uE.tagName,Ax,Ex):Zx++}}catch(bE){if(bE instanceof fn)throw bE;bx.error("element parse error: "+bE),Zx=-1}Zx>Bx?Bx=Zx:Mx(Math.max($x,Bx)+1)}})(mx,px,hx,vx,this.errorHandler),vx.endDocument()}},gx.prototype={setTagName:function(mx){if(!on.test(mx))throw new Error("invalid tagName:"+mx);this.tagName=mx},addValue:function(mx,px,hx){if(!on.test(mx))throw new Error("invalid attribute:"+mx);this.attributeNames[mx]=this.length,this[this.length++]={qName:mx,value:px,offset:hx}},length:0,getLocalName:function(mx){return this[mx].localName},getLocator:function(mx){return this[mx].locator},getQName:function(mx){return this[mx].qName},getURI:function(mx){return this[mx].uri},getValue:function(mx){return this[mx].value}},d.XMLReader=dn,d.ParseError=fn},8917:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidNumberOfChildrenError=void 0;var ar=Ct(6200);Object.defineProperty(d,"InvalidNumberOfChildrenError",{enumerable:!0,get:function(){return ar.InvalidNumberOfChildrenError}})},6200:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidNumberOfChildrenError=void 0;class Ct extends Error{constructor(en,tn,on,fn="exactly"){super(`${en} tag must have ${fn} ${tn} children. It's actually ${on}`),this.name="InvalidNumberOfChildrenError"}}d.InvalidNumberOfChildrenError=Ct},4279:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,fn,dn){dn===void 0&&(dn=fn);var Cn=Object.getOwnPropertyDescriptor(on,fn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[fn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,fn,dn){dn===void 0&&(dn=fn),tn[dn]=on[fn]}),en=this&&this.__exportStar||function(tn,on){for(var fn in tn)fn==="default"||Object.prototype.hasOwnProperty.call(on,fn)||ar(on,tn,fn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(828),d),en(Ct(5975),d),en(Ct(799),d),en(Ct(2424),d)},5975:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.JoinWithManySeparators=void 0;class Ct{constructor(en){this._separators=en}static join(en,tn,on=""){const fn=tn.length>0?tn:on!==void 0?[on]:[];return new Ct(fn)._join(en)}_join(en){return en.reduce(((tn,on,fn,dn)=>tn+on+(fn===dn.length-1?"":this._get(fn))),"")}_get(en){return this._separators[en]?this._separators[en]:this._separators[this._separators.length-1]}}d.JoinWithManySeparators=Ct},799:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mathMLElementToLaTeXConverter=void 0;const ar=Ct(5443);d.mathMLElementToLaTeXConverter=en=>new ar.MathMLElementToLatexConverterAdapter(en).toLatexConverter()},2424:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.normalizeWhiteSpaces=void 0,d.normalizeWhiteSpaces=Ct=>Ct.replace(/\s+/g," ")},7192:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BracketWrapper=void 0;const ar=Ct(1855);d.BracketWrapper=class{constructor(){this._open="{",this._close="}"}wrap(en){return new ar.Wrapper(this._open,this._close).wrap(en)}}},5025:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericWrapper=void 0;const ar=Ct(1855);d.GenericWrapper=class{constructor(en,tn){this._open="\\left"+en,this._close="\\right"+tn}wrap(en){return new ar.Wrapper(this._open,this._close).wrap(en)}}},828:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericWrapper=d.ParenthesisWrapper=d.BracketWrapper=void 0;var ar=Ct(7192);Object.defineProperty(d,"BracketWrapper",{enumerable:!0,get:function(){return ar.BracketWrapper}});var en=Ct(1168);Object.defineProperty(d,"ParenthesisWrapper",{enumerable:!0,get:function(){return en.ParenthesisWrapper}});var tn=Ct(5025);Object.defineProperty(d,"GenericWrapper",{enumerable:!0,get:function(){return tn.GenericWrapper}})},1168:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ParenthesisWrapper=void 0;const ar=Ct(1855);d.ParenthesisWrapper=class{constructor(){this._open="\\left(",this._close="\\right)"}wrap(en){return new ar.Wrapper(this._open,this._close).wrap(en)}wrapIfMoreThanOneChar(en){return en.length<=1?en:this.wrap(en)}}},1855:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Wrapper=void 0,d.Wrapper=class{constructor(Ct,ar){this._open=Ct,this._close=ar}wrap(Ct){return this._open+Ct+this._close}}},2697:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.VoidMathMLElement=void 0,d.VoidMathMLElement=class{constructor(){this.name="void",this.value="",this.children=[],this.attributes={}}}},4760:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericSpacingWrapper=void 0;const ar=Ct(4279);d.GenericSpacingWrapper=class{constructor(en){this._mathmlElement=en}convert(){return this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}}},9376:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericUnderOver=void 0;const ar=Ct(799),en=Ct(8917),tn=Ct(472);d.GenericUnderOver=class{constructor(dn){this._mathmlElement=dn}convert(){const{name:dn,children:Cn}=this._mathmlElement,Rn=Cn.length;if(Rn!==2)throw new en.InvalidNumberOfChildrenError(dn,2,Rn);const ax=(0,ar.mathMLElementToLaTeXConverter)(Cn[0]).convert(),ox=(0,ar.mathMLElementToLaTeXConverter)(Cn[1]).convert();return this._applyCommand(ax,ox)}_applyCommand(dn,Cn){const Rn=this._mathmlElement.name.match(/under/)?fn.Under:fn.Over;return new on(Rn).apply(dn,Cn)}};class on{constructor(Cn){this._type=Cn}apply(Cn,Rn){return tn.latexAccents.includes(Rn)?`${Rn}{${Cn}}`:`${this._defaultCommand}{${Rn}}{${Cn}}`}get _defaultCommand(){return this._type===fn.Under?"\\underset":"\\overset"}}var fn;(function(dn){dn[dn.Under=0]="Under",dn[dn.Over=1]="Over"})(fn||(fn={}))},6959:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Void=d.MSpace=d.MRow=d.GenericUnderOver=d.GenericSpacingWrapper=d.MTr=d.MTable=d.MUnderover=d.MText=d.MMultiscripts=d.MSubsup=d.MSub=d.MSup=d.MPhantom=d.MError=d.MEnclose=d.MAction=d.MRoot=d.MFrac=d.MFenced=d.MSqrt=d.MN=d.MO=d.MI=d.Math=void 0;var ar=Ct(393);Object.defineProperty(d,"Math",{enumerable:!0,get:function(){return ar.Math}});var en=Ct(7037);Object.defineProperty(d,"MI",{enumerable:!0,get:function(){return en.MI}});var tn=Ct(3487);Object.defineProperty(d,"MO",{enumerable:!0,get:function(){return tn.MO}});var on=Ct(4464);Object.defineProperty(d,"MN",{enumerable:!0,get:function(){return on.MN}});var fn=Ct(8686);Object.defineProperty(d,"MSqrt",{enumerable:!0,get:function(){return fn.MSqrt}});var dn=Ct(9511);Object.defineProperty(d,"MFenced",{enumerable:!0,get:function(){return dn.MFenced}});var Cn=Ct(6440);Object.defineProperty(d,"MFrac",{enumerable:!0,get:function(){return Cn.MFrac}});var Rn=Ct(6052);Object.defineProperty(d,"MRoot",{enumerable:!0,get:function(){return Rn.MRoot}});var ax=Ct(1678);Object.defineProperty(d,"MAction",{enumerable:!0,get:function(){return ax.MAction}});var ox=Ct(2631);Object.defineProperty(d,"MEnclose",{enumerable:!0,get:function(){return ox.MEnclose}});var sx=Ct(1840);Object.defineProperty(d,"MError",{enumerable:!0,get:function(){return sx.MError}});var lx=Ct(7443);Object.defineProperty(d,"MPhantom",{enumerable:!0,get:function(){return lx.MPhantom}});var cx=Ct(6926);Object.defineProperty(d,"MSup",{enumerable:!0,get:function(){return cx.MSup}});var fx=Ct(2564);Object.defineProperty(d,"MSub",{enumerable:!0,get:function(){return fx.MSub}});var gx=Ct(1358);Object.defineProperty(d,"MSubsup",{enumerable:!0,get:function(){return gx.MSubsup}});var mx=Ct(8303);Object.defineProperty(d,"MMultiscripts",{enumerable:!0,get:function(){return mx.MMultiscripts}});var px=Ct(3951);Object.defineProperty(d,"MText",{enumerable:!0,get:function(){return px.MText}});var hx=Ct(1222);Object.defineProperty(d,"MUnderover",{enumerable:!0,get:function(){return hx.MUnderover}});var vx=Ct(2350);Object.defineProperty(d,"MTable",{enumerable:!0,get:function(){return vx.MTable}});var yx=Ct(1586);Object.defineProperty(d,"MTr",{enumerable:!0,get:function(){return yx.MTr}});var Sx=Ct(4760);Object.defineProperty(d,"GenericSpacingWrapper",{enumerable:!0,get:function(){return Sx.GenericSpacingWrapper}});var _x=Ct(9376);Object.defineProperty(d,"GenericUnderOver",{enumerable:!0,get:function(){return _x.GenericUnderOver}});var Ex=Ct(6346);Object.defineProperty(d,"MRow",{enumerable:!0,get:function(){return Ex.MRow}});var bx=Ct(3700);Object.defineProperty(d,"MSpace",{enumerable:!0,get:function(){return bx.MSpace}});var Ax=Ct(9165);Object.defineProperty(d,"Void",{enumerable:!0,get:function(){return Ax.Void}})},1678:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MAction=void 0;const ar=Ct(799);d.MAction=class{constructor(en){this._mathmlElement=en}convert(){const{children:en}=this._mathmlElement;return this._isToggle()?en.map((tn=>(0,ar.mathMLElementToLaTeXConverter)(tn))).map((tn=>tn.convert())).join(" \\Longrightarrow "):(0,ar.mathMLElementToLaTeXConverter)(en[0]).convert()}_isToggle(){const{actiontype:en}=this._mathmlElement.attributes;return en==="toggle"||!en}}},393:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Math=void 0;const ar=Ct(799),en=Ct(2424);d.Math=class{constructor(tn){this._mathmlElement=tn}convert(){const tn=this._mathmlElement.children.map((on=>(0,ar.mathMLElementToLaTeXConverter)(on))).map((on=>on.convert())).join(" ");return(0,en.normalizeWhiteSpaces)(tn)}}},2631:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MEnclose=void 0;const ar=Ct(799);d.MEnclose=class{constructor(en){this._mathmlElement=en}convert(){const en=this._mathmlElement.children.map((tn=>(0,ar.mathMLElementToLaTeXConverter)(tn))).map((tn=>tn.convert())).join(" ");return this._notation==="actuarial"?`\\overline{\\left.${en}\\right|}`:this._notation==="radical"?`\\sqrt{${en}}`:["box","roundedbox","circle"].includes(this._notation)?`\\boxed{${en}}`:this._notation==="left"?`\\left|${en}`:this._notation==="right"?`${en}\\right|`:this._notation==="top"?`\\overline{${en}}`:this._notation==="bottom"?`\\underline{${en}}`:this._notation==="updiagonalstrike"?`\\cancel{${en}}`:this._notation==="downdiagonalstrike"?`\\bcancel{${en}}`:this._notation==="updiagonalarrow"?`\\cancelto{}{${en}}`:["verticalstrike","horizontalstrike"].includes(this._notation)?`\\hcancel{${en}}`:this._notation==="madruwb"?`\\underline{${en}\\right|}`:this._notation==="phasorangle"?`{\\angle \\underline{${en}}}`:`\\overline{\\left.\\right)${en}}`}get _notation(){return this._mathmlElement.attributes.notation||"longdiv"}}},1840:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MError=void 0;const ar=Ct(799);d.MError=class{constructor(en){this._mathmlElement=en}convert(){return`\\color{red}{${this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}}`}}},9511:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MFenced=void 0;const ar=Ct(799),en=Ct(4279);d.MFenced=class{constructor(dn){this._mathmlElement=dn,this.open=this._mathmlElement.attributes.open||"",this.close=this._mathmlElement.attributes.close||""}convert(){const dn=this._mathmlElement.children.map((sx=>(0,ar.mathMLElementToLaTeXConverter)(sx))).map((sx=>sx.convert()));if(this._isThereRelativeOfName(this._mathmlElement.children,"mtable"))return new on(this.open,this.close).apply(dn);const Cn=this._mathmlElement.attributes.separators,Rn=Cn!==void 0,ax=Cn?Array.from(Cn):[],ox=Rn?"":",";return new tn(this.open,this.close,ax,ox).apply(dn)}_isThereRelativeOfName(dn,Cn){return dn.some((Rn=>Rn.name===Cn||this._isThereRelativeOfName(Rn.children,Cn)))}};class tn{constructor(Cn,Rn,ax,ox){this.separators=ax,this.defaultSeparator=ox,this.open=Cn||"(",this.close=Rn||")"}apply(Cn){const Rn=en.JoinWithManySeparators.join(Cn,this.separators,this.defaultSeparator);return new en.GenericWrapper(this.open,this.close).wrap(Rn)}}class on{constructor(Cn,Rn){this._genericCommand="matrix",this.separators=new fn(Cn,Rn)}apply(Cn){const Rn=this._command,ax=`\\begin{${Rn}}
${Cn.join("")}
\\end{${Rn}}`;return Rn===this._genericCommand?this.separators.wrap(ax):ax}get _command(){return this.separators.areParentheses()?"pmatrix":this.separators.areSquareBrackets()?"bmatrix":this.separators.areBrackets()?"Bmatrix":this.separators.areDivides()?"vmatrix":this.separators.areParallels()?"Vmatrix":this.separators.areNotEqual()?this._genericCommand:"bmatrix"}}class fn{constructor(Cn,Rn){this.open=Cn,this.close=Rn}wrap(Cn){return new en.GenericWrapper(this.open,this.close).wrap(Cn)}areParentheses(){return this._compare("(",")")}areSquareBrackets(){return this._compare("[","]")}areBrackets(){return this._compare("{","}")}areDivides(){return this._compare("|","|")}areParallels(){return this._compare("||","||")}areNotEqual(){return this.open!==this.close}_compare(Cn,Rn){return this.open===Cn&&this.close===Rn}}},6440:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MFrac=void 0;const ar=Ct(8917),en=Ct(4279);d.MFrac=class{constructor(tn){this._mathmlElement=tn}convert(){const{children:tn,name:on}=this._mathmlElement,fn=tn.length;if(fn!==2)throw new ar.InvalidNumberOfChildrenError(on,2,fn);const dn=(0,en.mathMLElementToLaTeXConverter)(tn[0]).convert(),Cn=(0,en.mathMLElementToLaTeXConverter)(tn[1]).convert();return this._isBevelled()?`${this._wrapIfMoreThanOneChar(dn)}/${this._wrapIfMoreThanOneChar(Cn)}`:`\\frac{${dn}}{${Cn}}`}_wrapIfMoreThanOneChar(tn){return new en.ParenthesisWrapper().wrapIfMoreThanOneChar(tn)}_isBevelled(){return!!this._mathmlElement.attributes.bevelled}}},7037:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MI=void 0;const ar=Ct(4279),en=Ct(5406),tn=Ct(6122);d.MI=class{constructor(fn){this.utf8Converter=new tn.HashUTF8ToLtXConverter,this._mathmlElement=fn}convert(){const fn=(0,ar.normalizeWhiteSpaces)(this._mathmlElement.value);if(fn===" ")return on.apply(fn);const dn=fn.trim(),Cn=on.apply(dn),Rn=this.utf8Converter.convert(Cn);return Rn!==Cn?Rn:this.wrapInMathVariant(Cn,this.getMathVariant(this._mathmlElement.attributes))}getMathVariant(fn){if(fn&&fn.mathvariant)return fn.mathvariant}wrapInMathVariant(fn,dn){switch(dn){case"bold":return`\\mathbf{${fn}}`;case"italic":return`\\mathit{${fn}}`;case"bold-italic":return`\\mathbf{\\mathit{${fn}}}`;case"double-struck":return`\\mathbb{${fn}}`;case"bold-fraktur":return`\\mathbf{\\mathfrak{${fn}}}`;case"script":return`\\mathcal{${fn}}`;case"bold-script":return`\\mathbf{\\mathcal{${fn}}}`;case"fraktur":return`\\mathfrak{${fn}}`;case"sans-serif":return`\\mathsf{${fn}}`;case"bold-sans-serif":return`\\mathbf{\\mathsf{${fn}}}`;case"sans-serif-italic":return`\\mathsf{\\mathit{${fn}}}`;case"sans-serif-bold-italic":return`\\mathbf{\\mathsf{\\mathit{${fn}}}}`;case"monospace":return`\\mathtt{${fn}}`;default:return fn}}};class on{constructor(dn){this._value=dn}static apply(dn){return new on(dn)._apply()}_apply(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new tn.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return en.allMathSymbolsByChar[this._value]}_findByGlyph(){return en.allMathSymbolsByGlyph[this._value]}_findByNumber(){return en.mathNumberByGlyph[this._value]}}},8303:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MMultiscripts=void 0;const ar=Ct(4279),en=Ct(8917);d.MMultiscripts=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,fn=on.length;if(fn<3)throw new en.InvalidNumberOfChildrenError(tn,3,fn,"at least");const dn=(0,ar.mathMLElementToLaTeXConverter)(on[0]).convert();return this._prescriptLatex()+this._wrapInParenthesisIfThereIsSpace(dn)+this._postscriptLatex()}_prescriptLatex(){const{children:tn}=this._mathmlElement;let on,fn;if(this._isPrescripts(tn[1]))on=tn[2],fn=tn[3];else{if(!this._isPrescripts(tn[3]))return"";on=tn[4],fn=tn[5]}return`\\_{${(0,ar.mathMLElementToLaTeXConverter)(on).convert()}}^{${(0,ar.mathMLElementToLaTeXConverter)(fn).convert()}}`}_postscriptLatex(){const{children:tn}=this._mathmlElement;if(this._isPrescripts(tn[1]))return"";const on=tn[1],fn=tn[2];return`_{${(0,ar.mathMLElementToLaTeXConverter)(on).convert()}}^{${(0,ar.mathMLElementToLaTeXConverter)(fn).convert()}}`}_wrapInParenthesisIfThereIsSpace(tn){return tn.match(/\s+/g)?new ar.ParenthesisWrapper().wrap(tn):tn}_isPrescripts(tn){return tn?.name==="mprescripts"}}},4464:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MN=void 0;const ar=Ct(4279),en=Ct(5406);d.MN=class{constructor(tn){this._mathmlElement=tn}convert(){const tn=(0,ar.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return en.mathNumberByGlyph[tn]||tn}}},3487:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MO=void 0;const ar=Ct(4279),en=Ct(5406);d.MO=class{constructor(on){this._mathmlElement=on}convert(){const on=(0,ar.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return tn.operate(on)}};class tn{constructor(fn){this._value=fn}static operate(fn){return new tn(fn)._operate()}_operate(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new en.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return en.allMathOperatorsByChar[this._value]}_findByGlyph(){return en.allMathOperatorsByGlyph[this._value]}_findByNumber(){return en.mathNumberByGlyph[this._value]}}},7443:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MPhantom=void 0,d.MPhantom=class{constructor(Ct){this._mathmlElement=Ct}convert(){return""}}},6052:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MRoot=void 0;const ar=Ct(4279),en=Ct(8917);d.MRoot=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,fn=on.length;if(fn!==2)throw new en.InvalidNumberOfChildrenError(tn,2,fn);const dn=(0,ar.mathMLElementToLaTeXConverter)(on[0]).convert();return`\\sqrt[${(0,ar.mathMLElementToLaTeXConverter)(on[1]).convert()}]{${dn}}`}}},6346:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MRow=void 0;const ar=Ct(4279);d.MRow=class{constructor(en){this._mathmlElement=en}convert(){return this._isLinearSystemPattern()?this._convertAsLinearSystem():this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}_isLinearSystemPattern(){const{children:en}=this._mathmlElement;if(en.length!==3)return!1;const tn=en[0],on=tn.name==="mo"&&tn.value.trim()==="{",fn=en[1].name==="mtable",dn=en[2],Cn=dn.name==="mo"&&dn.value.trim()==="";return on&&fn&&Cn}_convertAsLinearSystem(){return`\\begin{cases} ${this._mathmlElement.children[1].children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" \\\\ ")} \\end{cases}`}}},3700:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSpace=void 0,d.MSpace=class{constructor(Ct){this._mathmlElement=Ct}convert(){const{linebreak:Ct}=this._mathmlElement.attributes;return Ct==="newline"?" \\\\ ":" "}}},8686:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSqrt=void 0;const ar=Ct(4279);d.MSqrt=class{constructor(en){this._mathmlElement=en}convert(){return`\\sqrt{${this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" ")}}`}}},2564:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSub=void 0;const ar=Ct(4279),en=Ct(8917);d.MSub=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,fn=on.length;if(fn!==2)throw new en.InvalidNumberOfChildrenError(tn,2,fn);const dn=on[0],Cn=on[1];return`${this._handleBaseChild(dn)}_${this._handleSubscriptChild(Cn)}`}_handleBaseChild(tn){const on=tn.children,fn=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return on.length<=1?fn:new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(fn)}_handleSubscriptChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}}},1358:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSubsup=void 0;const ar=Ct(4279),en=Ct(8917);d.MSubsup=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,fn=on.length;if(fn!==3)throw new en.InvalidNumberOfChildrenError(tn,3,fn);const dn=on[0],Cn=on[1],Rn=on[2];return`${this._handleBaseChild(dn)}_${this._handleSubscriptChild(Cn)}^${this._handleSuperscriptChild(Rn)}`}_handleBaseChild(tn){const on=tn.children,fn=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return on.length<=1?fn:new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(fn)}_handleSubscriptChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}_handleSuperscriptChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}}},6926:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MSup=void 0;const ar=Ct(4279),en=Ct(8917);d.MSup=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,fn=on.length;if(fn!==2)throw new en.InvalidNumberOfChildrenError(tn,2,fn);const dn=on[0],Cn=on[1];return`${this._handleBaseChild(dn)}^${this._handleExponentChild(Cn)}`}_handleBaseChild(tn){const on=tn.children,fn=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return on.length<=1?fn:new ar.ParenthesisWrapper().wrapIfMoreThanOneChar(fn)}_handleExponentChild(tn){const on=(0,ar.mathMLElementToLaTeXConverter)(tn).convert();return new ar.BracketWrapper().wrap(on)}}},2350:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MTable=void 0;const ar=Ct(4279);d.MTable=class{constructor(en){this._mathmlElement=en,this._addFlagRecursiveIfName(this._mathmlElement.children,"mtable","innerTable")}convert(){const en=this._mathmlElement.children.map((tn=>(0,ar.mathMLElementToLaTeXConverter)(tn))).map((tn=>tn.convert())).join(` \\\\
`);return this._hasFlag("innerTable")?this._wrap(en):en}_wrap(en){return`\\begin{matrix}${en}\\end{matrix}`}_addFlagRecursiveIfName(en,tn,on){en.forEach((fn=>{fn.name===tn&&(fn.attributes[on]=on),this._addFlagRecursiveIfName(fn.children,tn,on)}))}_hasFlag(en){return!!this._mathmlElement.attributes[en]}}},3951:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MText=void 0;const ar=Ct(7037);d.MText=class{constructor(tn){this._mathmlElement=tn}convert(){const{attributes:tn,value:on}=this._mathmlElement;return[...on].map((fn=>/^[a-zA-Z0-9]$/.test(fn)||fn===" "?{value:fn,isAlphanumeric:!0}:{value:fn,isAlphanumeric:!1})).reduce(((fn,dn)=>{if(dn.isAlphanumeric){const Cn=fn[fn.length-1];if(Cn&&Cn.isAlphanumeric)return Cn.value+=dn.value,fn}return[...fn,dn]}),[]).map((fn=>fn.isAlphanumeric?new en(tn.mathvariant).apply(fn.value):new ar.MI({name:"mi",attributes:{},children:[],value:fn.value}).convert())).join("")}};class en{constructor(on){this._mathvariant=on||"normal"}apply(on){return this._commands.reduce(((fn,dn,Cn)=>Cn===0?`${dn}{${on}}`:`${dn}{${fn}}`),"")}get _commands(){switch(this._mathvariant){case"bold":return["\\textbf"];case"italic":return["\\textit"];case"bold-italic":return["\\textit","\\textbf"];case"double-struck":return["\\mathbb"];case"monospace":return["\\mathtt"];case"bold-fraktur":case"fraktur":return["\\mathfrak"];default:return["\\text"]}}}},1586:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MTr=void 0;const ar=Ct(4279);d.MTr=class{constructor(en){this._mathmlElement=en}convert(){return this._mathmlElement.children.map((en=>(0,ar.mathMLElementToLaTeXConverter)(en))).map((en=>en.convert())).join(" & ")}}},1222:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MUnderover=void 0;const ar=Ct(4279),en=Ct(8917);d.MUnderover=class{constructor(tn){this._mathmlElement=tn}convert(){const{name:tn,children:on}=this._mathmlElement,fn=on.length;if(fn!==3)throw new en.InvalidNumberOfChildrenError(tn,3,fn);return`${(0,ar.mathMLElementToLaTeXConverter)(on[0]).convert()}_{${(0,ar.mathMLElementToLaTeXConverter)(on[1]).convert()}}^{${(0,ar.mathMLElementToLaTeXConverter)(on[2]).convert()}}`}}},9165:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Void=void 0,d.Void=class{constructor(Ct){this._mathmlElement=Ct}convert(){return""}}},5443:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(Cn,Rn,ax,ox){ox===void 0&&(ox=ax);var sx=Object.getOwnPropertyDescriptor(Rn,ax);sx&&!("get"in sx?!Rn.__esModule:sx.writable||sx.configurable)||(sx={enumerable:!0,get:function(){return Rn[ax]}}),Object.defineProperty(Cn,ox,sx)}:function(Cn,Rn,ax,ox){ox===void 0&&(ox=ax),Cn[ox]=Rn[ax]}),en=this&&this.__setModuleDefault||(Object.create?function(Cn,Rn){Object.defineProperty(Cn,"default",{enumerable:!0,value:Rn})}:function(Cn,Rn){Cn.default=Rn}),tn=this&&this.__importStar||function(Cn){if(Cn&&Cn.__esModule)return Cn;var Rn={};if(Cn!=null)for(var ax in Cn)ax!=="default"&&Object.prototype.hasOwnProperty.call(Cn,ax)&&ar(Rn,Cn,ax);return en(Rn,Cn),Rn};Object.defineProperty(d,"__esModule",{value:!0}),d.MathMLElementToLatexConverterAdapter=void 0;const on=tn(Ct(6959)),fn=Ct(2697);d.MathMLElementToLatexConverterAdapter=class{constructor(Cn){this._mathMLElement=Cn??new fn.VoidMathMLElement}toLatexConverter(){const{name:Cn}=this._mathMLElement;return new(dn[Cn]||on.GenericSpacingWrapper)(this._mathMLElement)}};const dn={math:on.Math,mi:on.MI,mo:on.MO,mn:on.MN,msqrt:on.MSqrt,mfenced:on.MFenced,mfrac:on.MFrac,mroot:on.MRoot,maction:on.MAction,menclose:on.MEnclose,merror:on.MError,mphantom:on.MPhantom,msup:on.MSup,msub:on.MSub,msubsup:on.MSubsup,mmultiscripts:on.MMultiscripts,mtext:on.MText,munderover:on.MUnderover,mtable:on.MTable,mtr:on.MTr,mover:on.GenericUnderOver,munder:on.GenericUnderOver,mrow:on.MRow,mspace:on.MSpace,mpadded:on.GenericSpacingWrapper,void:on.Void}},5243:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ErrorHandler=void 0,d.ErrorHandler=class{constructor(){this._errors=[],this.errorLocator={}}fixError(Ct,ar){return this._isMissingAttributeValueError(ar)?(this._errors.push(ar),this._fixMissingAttribute(ar,Ct)):Ct}isThereAnyErrors(){return this._errors.length>0}cleanErrors(){this._errors=[]}_fixMissingAttribute(Ct,ar){const en=Ct.split('"')[1];if(en)return ar.replace(this._matchMissingValueForAttribute(en),"");for(;this._mathGenericMissingValue().exec(ar);)ar=ar.replace(this._mathGenericMissingValue(),"$1$3");return ar}_matchMissingValueForAttribute(Ct){return new RegExp(`(${Ct}=(?!("|')))|(${Ct}(?!("|')))`,"gm")}_mathGenericMissingValue(){return/(\<.* )(\w+=(?!\"|\'))(.*\>)/gm}_isMissingAttributeValueError(Ct){return!!Ct.includes("attribute")&&!!Ct.includes("missed")||Ct.includes("attribute value missed")}}},9208:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,fn,dn){dn===void 0&&(dn=fn);var Cn=Object.getOwnPropertyDescriptor(on,fn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[fn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,fn,dn){dn===void 0&&(dn=fn),tn[dn]=on[fn]}),en=this&&this.__exportStar||function(tn,on){for(var fn in tn)fn==="default"||Object.prototype.hasOwnProperty.call(on,fn)||ar(on,tn,fn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(9548),d),en(Ct(5243),d),en(Ct(1101),d)},1101:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ElementsToMathMLAdapter=void 0,d.ElementsToMathMLAdapter=class{convert(Ct){return Ct.filter((ar=>ar.tagName!==void 0)).map((ar=>this._convertElement(ar)))}_convertElement(Ct){return{name:Ct.tagName,attributes:this._convertElementAttributes(Ct.attributes),value:this._hasElementChild(Ct)?"":Ct.textContent||"",children:this._hasElementChild(Ct)?this.convert(Array.from(Ct.childNodes)):[]}}_convertElementAttributes(Ct){return Array.from(Ct).reduce(((ar,en)=>Object.assign({[en.nodeName]:en.nodeValue===en.nodeName?"":en.nodeValue},ar)),{})}_hasElementChild(Ct){const ar=Ct.childNodes;return!!ar&&ar.length!==0&&this._isThereAnyNoTextNode(ar)}_isThereAnyNoTextNode(Ct){return Array.from(Ct).some((ar=>ar.nodeName!=="#text"))}}},9548:function(c,d,Ct){var ar=this&&this.__importDefault||function(tn){return tn&&tn.__esModule?tn:{default:tn}};Object.defineProperty(d,"__esModule",{value:!0}),d.XmlToMathMLAdapter=void 0;const en=ar(Ct(8978));d.XmlToMathMLAdapter=class{constructor(tn,on){this._xml="",this._elementsConvertor=tn,this._errorHandler=on,this._xmlDOM=new en.default.DOMParser({locator:this._errorHandler.errorLocator,errorHandler:this._fixError.bind(this)})}convert(tn){return this._xml=this._removeLineBreaks(tn),this._xml=this._removeMsWordPrefixes(this._xml),this._elementsConvertor.convert(this._mathMLElements)}_fixError(tn){this._xml=this._errorHandler.fixError(this._xml,tn)}_removeLineBreaks(tn){return tn.replace(/\n|\r\n|\r/g,"")}_removeMsWordPrefixes(tn){return tn.replace(/mml:/g,"")}get _mathMLElements(){let tn=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math");return this._errorHandler.isThereAnyErrors()&&(this._errorHandler.cleanErrors(),tn=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math")),Array.from(tn)}}},7941:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,fn,dn){dn===void 0&&(dn=fn);var Cn=Object.getOwnPropertyDescriptor(on,fn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[fn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,fn,dn){dn===void 0&&(dn=fn),tn[dn]=on[fn]}),en=this&&this.__exportStar||function(tn,on){for(var fn in tn)fn==="default"||Object.prototype.hasOwnProperty.call(on,fn)||ar(on,tn,fn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(8585),d)},8585:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.makeToMathElementsConverter=void 0;const ar=Ct(9208);d.makeToMathElementsConverter=()=>{const en=new ar.ElementsToMathMLAdapter,tn=new ar.ErrorHandler;return new ar.XmlToMathMLAdapter(en,tn)}},8672:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,fn,dn){dn===void 0&&(dn=fn);var Cn=Object.getOwnPropertyDescriptor(on,fn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[fn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,fn,dn){dn===void 0&&(dn=fn),tn[dn]=on[fn]}),en=this&&this.__exportStar||function(tn,on){for(var fn in tn)fn==="default"||Object.prototype.hasOwnProperty.call(on,fn)||ar(on,tn,fn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(3798),d)},3798:(c,d,Ct)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MathMLToLaTeX=void 0;const ar=Ct(5443),en=Ct(7941);d.MathMLToLaTeX=class{static convert(tn){return(0,en.makeToMathElementsConverter)().convert(tn).map((on=>new ar.MathMLElementToLatexConverterAdapter(on).toLatexConverter())).map((on=>on.convert())).join("").trim()}}},2965:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathOperatorsByChar=void 0,d.allMathOperatorsByChar={_:"\\underline","&#x23E1;":"\\underbrace","&#x23E0;":"\\overbrace","&#x23DF;":"\\underbrace","&#x23DE;":"\\overbrace","&#x23DD;":"\\underbrace","&#x23DC;":"\\overbrace","&#x23B5;":"\\underbrace","&#x23B4;":"\\overbrace","&#x20DC;":"\\square","&#x20DB;":"\\square","&#x2064;":"","&#x2057;":"''''","&#x203E;":"\\bar","&#x2037;":"```","&#x2036;":"``","&#x2035;":"`","&#x2034;":"'''","&#x2033;":"''","&#x201F;":"``","&#x201E;":",,","&#x201B;":"`","&#x201A;":",","&#x302;":"\\hat","&#x2F7;":"\\sim","&#x2DD;":"\\sim","&#x2DC;":"\\sim","&#x2DA;":"\\circ","&#x2D9;":"\\cdot","&#x2D8;":"","&#x2CD;":"\\_","&#x2CB;":"","&#x2CA;":"","&#x2C9;":"","&#x2C7;":"","&#x2C6;":"\\hat","&#xBA;":"o","&#xB9;":"1","&#xB8;":"","&#xB4;":"","&#xB3;":"3","&#xB2;":"2","&#xB0;":"\\circ","&#xAF;":"\\bar","&#xAA;":"a","&#xA8;":"\\cdot\\cdot","~":"\\sim","`":"`","^":"\\hat","--":"--","++":"++","&amp;":"\\&","&#x2061;":"","&#x221C;":"\\sqrt[4]{}","&#x221B;":"\\sqrt[3]{}","&#x221A;":"\\sqrt{}","&#x2146;":"d","&#x2145;":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","&#x266F;":"\\#","&#x266E;":"","&#x266D;":"","&#x2032;":"'","&lt;>":"<>","**":"\\star\\star","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x2299;":"\\bigodot","&#xAC;":"\\neg","&#x2222;":"\\measuredangle","&#x2221;":"\\measuredangle","&#x2220;":"\\angle","&#xF7;":"\\div","/":"/","&#x2216;":"\\backslash","\\":"\\backslash","%":"\\%","&#x2297;":"\\bigotimes","&#xB7;":"\\cdot","&#x2A3F;":"\\coprod","&#x2A2F;":"\\times","&#x22C5;":"\\cdot","&#x22A1;":"\\boxdot","&#x22A0;":"\\boxtimes","&#x2062;":"","&#x2043;":"-","&#x2022;":"\\cdot","&#xD7;":"\\times",".":".","*":"\\star","&#x222A;":"\\cup","&#x2229;":"\\cap","&#x2210;":"\\coprod","&#x220F;":"\\prod","&#x2240;":"","&#x2AFF;":"","&#x2AFC;":"\\mid\\mid\\mid","&#x2A09;":"\\times","&#x2A08;":"","&#x2A07;":"","&#x2A06;":"\\sqcup","&#x2A05;":"\\sqcap","&#x2A02;":"\\otimes","&#x2A00;":"\\odot","&#x22C2;":"\\cap","&#x22C1;":"\\vee","&#x22C0;":"\\wedge","&#x2A04;":"\\uplus","&#x2A03;":"\\cup","&#x22C3;":"\\cup","&#x2A1C;":"\\underline{\\int}","&#x2A1B;":"\\overline{\\int}","&#x2A1A;":"\\int","&#x2A19;":"\\int","&#x2A18;":"\\int","&#x2A17;":"\\int","&#x2A16;":"\\oint","&#x2A15;":"\\oint","&#x2A14;":"\\int","&#x2A13;":"\\int","&#x2A12;":"\\int","&#x2A11;":"\\int","&#x2A10;":"\\int","&#x2A0F;":"\\bcancel{\\int}","&#x2A0E;":"","&#x2A0D;":"\\hcancel{\\int}","&#x2A0C;":"\\iiiint","&#x2233;":"\\oint","&#x2232;":"\\oint","&#x2231;":"\\int","&#x2230;":"\\oiint","&#x222F;":"\\oiint","&#x222E;":"\\oint","&#x222B;":"\\int","&#x2A01;":"\\oplus","&#x2298;":"\\oslash","&#x2296;":"\\ominus","&#x2295;":"\\oplus","&#x222D;":"\\iiint","&#x222C;":"\\iint","&#x2A0B;":"","&#x2A0A;":"","&#x2211;":"\\sum","&#x229F;":"\\boxminus","&#x229E;":"\\boxplus","&#x2214;":"\\dot{+}","&#x2213;":"+-","&#x2212;":"-","&#xB1;":"\\pm","-":"-","+":"+","&#x2B46;":"\\Rrightarrow","&#x2B45;":"\\Lleftarrow","&#x29F4;":":\\rightarrow","&#x29EF;":"","&#x29DF;":"\\bullet-\\bullet","&#x299F;":"\\angle","&#x299E;":"\\measuredangle","&#x299D;":"\\measuredangle","&#x299C;":"\\perp","&#x299B;":"\\measuredangle","&#x299A;":"","&#x2999;":"\\vdots","&#x297F;":"","&#x297E;":"","&#x297D;":"\\prec","&#x297C;":"\\succ","&#x297B;":"\\underset{\\rightarrow}{\\supset}","&#x297A;":"","&#x2979;":"\\underset{\\rightarrow}{\\subset}","&#x2978;":"\\underset{\\rightarrow}{>}","&#x2977;":"","&#x2976;":"\\underset{\\leftarrow}{<}","&#x2975;":"\\underset{\\approx}{\\rightarrow}","&#x2974;":"\\underset{\\sim}{\\rightarrow}","&#x2973;":"\\underset{\\sim}{\\leftarrow}","&#x2972;":"\\overset{\\sim}{\\rightarrow}","&#x2971;":"\\overset{=}{\\rightarrow}","&#x2970;":"","&#x296F;":"","&#x296E;":"","&#x296D;":"\\overline{\\rightharpoondown}","&#x296C;":"\\underline{\\rightharpoonup}","&#x296B;":"\\overline{\\leftharpoondown}","&#x296A;":"\\underline{\\leftharpoonup}","&#x2969;":"\\rightleftharpoons","&#x2968;":"\\rightleftharpoons","&#x2967;":"\\rightleftharpoons","&#x2966;":"\\rightleftharpoons","&#x2965;":"\\Downarrow","&#x2964;":"\\Rightarrow","&#x2963;":"\\Uparrow","&#x2962;":"\\Leftarrow","&#x2961;":"\\downarrow","&#x2960;":"\\uparrow","&#x295F;":"\\rightarrow","&#x295E;":"\\leftarrow","&#x295D;":"\\downarrow","&#x295C;":"\\uparrow","&#x295B;":"\\rightarrow","&#x295A;":"\\leftarrow","&#x2959;":"\\downarrow","&#x2958;":"\\uparrow","&#x2957;":"\\rightarrow","&#x2956;":"\\leftarrow","&#x2955;":"\\downarrow","&#x2954;":"\\uparrow","&#x2953;":"\\rightarrow","&#x2952;":"\\leftarrow","&#x2951;":"\\updownarrow","&#x2950;":"\\leftrightarrow","&#x294F;":"\\updownarrow","&#x294E;":"\\leftrightarrow","&#x294D;":"\\updownarrow","&#x294C;":"\\updownarrow","&#x294B;":"\\leftrightarrow","&#x294A;":"\\leftrightarrow","&#x2949;":"","&#x2948;":"\\leftrightarrow","&#x2947;":"\\nrightarrow","&#x2946;":"","&#x2945;":"","&#x2944;":"\\rightleftarrows","&#x2943;":"\\leftrightarrows","&#x2942;":"\\rightleftarrows","&#x2941;":"\\circlearrowright","&#x2940;":"\\circlearrowleft","&#x293F;":"\\rightarrow","&#x293E;":"\\leftarrow","&#x293D;":"","&#x293C;":"","&#x293B;":"","&#x293A;":"","&#x2939;":"","&#x2938;":"","&#x2937;":"\\Rsh","&#x2936;":"\\Lsh","&#x2935;":"\\downarrow","&#x2934;":"\\uparrow","&#x2933;":"\\leadsto","&#x2932;":"","&#x2931;":"","&#x2930;":"","&#x292F;":"","&#x292E;":"","&#x292D;":"","&#x292C;":"\\times","&#x292B;":"\\times","&#x292A;":"","&#x2929;":"","&#x2928;":"","&#x2927;":"","&#x2926;":"","&#x2925;":"","&#x2924;":"","&#x2923;":"","&#x2922;":"","&#x2921;":"","&#x2920;":"\\mapsto\\cdot","&#x291F;":"\\cdot\\leftarrow","&#x291E;":"\\rightarrow\\cdot","&#x291D;":"\\leftarrow","&#x291C;":"\\rightarrow","&#x291B;":"\\leftarrow","&#x291A;":"\\rightarrow","&#x2919;":"\\leftarrow","&#x2918;":"\\rightarrow","&#x2917;":"\\rightarrow","&#x2916;":"\\rightarrow","&#x2915;":"\\rightarrow","&#x2914;":"\\rightarrow","&#x2913;":"\\downarrow","&#x2912;":"\\uparrow","&#x2911;":"\\rightarrow","&#x2910;":"\\rightarrow","&#x290F;":"\\rightarrow","&#x290E;":"\\leftarrow","&#x290D;":"\\rightarrow","&#x290C;":"\\leftarrow","&#x290B;":"\\Downarrow","&#x290A;":"\\Uparrow","&#x2909;":"\\uparrow","&#x2908;":"\\downarrow","&#x2907;":"\\Rightarrow","&#x2906;":"\\Leftarrow","&#x2905;":"\\mapsto","&#x2904;":"\\nLeftrightarrow","&#x2903;":"\\nRightarrow","&#x2902;":"\\nLeftarrow","&#x2901;":"\\rightsquigarrow","&#x2900;":"\\rightsquigarrow","&#x27FF;":"\\rightsquigarrow","&#x27FE;":"\\Rightarrow","&#x27FD;":"\\Leftarrow","&#x27FC;":"\\mapsto","&#x27FB;":"\\leftarrow","&#x27FA;":"\\Longleftrightarrow","&#x27F9;":"\\Longrightarrow","&#x27F8;":"\\Longleftarrow","&#x27F7;":"\\leftrightarrow","&#x27F6;":"\\rightarrow","&#x27F5;":"\\leftarrow","&#x27F1;":"\\Downarrow","&#x27F0;":"\\Uparrow","&#x22B8;":"\\rightarrow","&#x21FF;":"\\leftrightarrow","&#x21FE;":"\\rightarrow","&#x21FD;":"\\leftarrow","&#x21FC;":"\\nleftrightarrow","&#x21FB;":"\\nrightarrow","&#x21FA;":"\\nleftarrow","&#x21F9;":"\\nleftrightarrow","&#x21F8;":"\\nrightarrow","&#x21F7;":"\\nleftarrow","&#x21F6;":"\\Rrightarrow","&#x21F5;":"","&#x21F4;":"\\rightarrow","&#x21F3;":"\\Updownarrow","&#x21F2;":"\\searrow","&#x21F1;":"\\nwarrow","&#x21F0;":"\\Leftarrow","&#x21EF;":"\\Uparrow","&#x21EE;":"\\Uparrow","&#x21ED;":"\\Uparrow","&#x21EC;":"\\Uparrow","&#x21EB;":"\\Uparrow","&#x21EA;":"\\Uparrow","&#x21E9;":"\\Downarrow","&#x21E8;":"\\Rightarrow","&#x21E7;":"\\Uparrow","&#x21E6;":"\\Leftarrow","&#x21E5;":"\\rightarrow","&#x21E4;":"\\leftarrow","&#x21E3;":"\\downarrow","&#x21E2;":"\\rightarrow","&#x21E1;":"\\uparrow","&#x21E0;":"\\leftarrow","&#x21DF;":"\\downarrow","&#x21DE;":"\\uparrow","&#x21DD;":"\\rightsquigarrow","&#x21DC;":"\\leftarrow","&#x21DB;":"\\Rrightarrow","&#x21DA;":"\\Lleftarrow","&#x21D9;":"\\swarrow","&#x21D8;":"\\searrow","&#x21D7;":"\\nearrow","&#x21D6;":"\\nwarrow","&#x21D5;":"\\Updownarrow","&#x21D4;":"\\Leftrightarrow","&#x21D3;":"\\Downarrow","&#x21D2;":"\\Rightarrow","&#x21D1;":"\\Uparrow","&#x21D0;":"\\Leftarrow","&#x21CF;":"\\nRightarrow","&#x21CE;":"\\nLeftrightarrow","&#x21CD;":"\\nLeftarrow","&#x21CC;":"\\rightleftharpoons","&#x21CB;":"\\leftrightharpoons","&#x21CA;":"\\downdownarrows","&#x21C9;":"\\rightrightarrows","&#x21C8;":"\\upuparrows","&#x21C7;":"\\leftleftarrows","&#x21C6;":"\\leftrightarrows","&#x21C5;":"","&#x21C4;":"\\rightleftarrows","&#x21C3;":"\\downharpoonleft","&#x21C2;":"\\downharpoonright","&#x21C1;":"\\rightharpoondown","&#x21C0;":"\\rightharpoonup","&#x21BF;":"\\upharpoonleft","&#x21BE;":"\\upharpoonright","&#x21BD;":"\\leftharpoondown","&#x21BC;":"\\leftharpoonup","&#x21BB;":"\\circlearrowright","&#x21BA;":"\\circlearrowleft","&#x21B9;":"\\leftrightarrows","&#x21B8;":"\\overline{\\nwarrow}","&#x21B7;":"\\curvearrowright","&#x21B6;":"\\curvearrowleft","&#x21B5;":"\\swarrow","&#x21B4;":"\\searrow","&#x21B3;":"\\Rsh","&#x21B2;":"\\Lsh","&#x21B1;":"\\Rsh","&#x21B0;":"\\Lsh","&#x21AF;":"\\swarrow","&#x21AE;":"","&#x21AD;":"\\leftrightsquigarrow","&#x21AC;":"\\looparrowright","&#x21AB;":"\\looparrowleft","&#x21AA;":"\\hookrightarrow","&#x21A9;":"\\hookleftarrow","&#x21A8;":"\\underline{\\updownarrow}","&#x21A7;":"\\downarrow","&#x21A6;":"\\rightarrowtail","&#x21A5;":"\\uparrow","&#x21A4;":"\\leftarrowtail","&#x21A3;":"\\rightarrowtail","&#x21A2;":"\\leftarrowtail","&#x21A1;":"\\downarrow","&#x21A0;":"\\twoheadrightarrow","&#x219F;":"\\uparrow","&#x219E;":"\\twoheadleftarrow","&#x219D;":"\\nearrow","&#x219C;":"\\nwarrow","&#x219B;":"","&#x219A;":"","&#x2199;":"\\swarrow","&#x2198;":"\\searrow","&#x2197;":"\\nearrow","&#x2196;":"\\nwarrow","&#x2195;":"\\updownarrow","&#x2194;":"\\leftrightarrow","&#x2193;":"\\downarrow","&#x2192;":"\\rightarrow","&#x2191;":"\\uparrow","&#x2190;":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\left|\\right.","&#x2AFE;":"","&#x2AFD;":"//","&#x2AFB;":"///","&#x2AFA;":"","&#x2AF9;":"","&#x2AF8;":"","&#x2AF7;":"","&#x2AF6;":"\\vdots","&#x2AF5;":"","&#x2AF4;":"","&#x2AF3;":"","&#x2AF2;":"\\nparallel","&#x2AF1;":"","&#x2AF0;":"","&#x2AEF;":"","&#x2AEE;":"\\bcancel{\\mid}","&#x2AED;":"","&#x2AEC;":"","&#x2AEB;":"","&#x2AEA;":"","&#x2AE9;":"","&#x2AE8;":"\\underline{\\perp}","&#x2AE7;":"\\overline{\\top}","&#x2AE6;":"","&#x2AE5;":"","&#x2AE4;":"","&#x2AE3;":"","&#x2AE2;":"","&#x2AE1;":"","&#x2AE0;":"\\perp","&#x2ADF;":"\\top","&#x2ADE;":"\\dashv","&#x2ADD;&#x338;":"","&#x2ADD;":"","&#x2ADB;":"\\pitchfork","&#x2ADA;":"","&#x2AD9;":"","&#x2AD8;":"","&#x2AD7;":"","&#x2AD6;":"","&#x2AD5;":"","&#x2AD4;":"","&#x2AD3;":"","&#x2AD2;":"","&#x2AD1;":"","&#x2AD0;":"","&#x2ACF;":"","&#x2ACE;":"","&#x2ACD;":"","&#x2ACC;":"\\underset{\\neq}{\\supset}","&#x2ACB;":"\\underset{\\neq}{\\subset}","&#x2ACA;":"\\underset{\\approx}{\\supset}","&#x2AC9;":"\\underset{\\approx}{\\subset}","&#x2AC8;":"\\underset{\\sim}{\\supset}","&#x2AC7;":"\\underset{\\sim}{\\subset}","&#x2AC6;":"\\supseteqq","&#x2AC5;":"\\subseteqq","&#x2AC4;":"\\dot{\\supseteq}","&#x2AC3;":"\\dot{\\subseteq}","&#x2AC2;":"\\underset{\\times}{\\supset}","&#x2AC1;":"\\underset{\\times}{\\subset}","&#x2AC0;":"\\underset{+}{\\supset}","&#x2ABF;":"\\underset{+}{\\subset}","&#x2ABE;":"","&#x2ABD;":"","&#x2ABC;":"\\gg ","&#x2ABB;":"\\ll","&#x2ABA;":"\\underset{\\cancel{\\approx}}{\\succ}","&#x2AB9;":"\\underset{\\cancel{\\approx}}{\\prec}","&#x2AB8;":"\\underset{\\approx}{\\succ}","&#x2AB7;":"\\underset{\\approx}{\\prec}","&#x2AB6;":"\\underset{\\cancel{=}}{\\succ}","&#x2AB5;":"\\underset{\\cancel{=}}{\\prec}","&#x2AB4;":"\\underset{=}{\\succ}","&#x2AB3;":"\\underset{=}{\\prec}","&#x2AB2;":"","&#x2AB1;":"","&#x2AAE;":"","&#x2AAD;":"\\underline{\\hcancel{>}}","&#x2AAC;":"\\underline{\\hcancel{>}}","&#x2AAB;":"\\hcancel{>}","&#x2AAA;":"\\hcancel{<}","&#x2AA9;":"","&#x2AA8;":"","&#x2AA7;":"\\vartriangleright","&#x2AA6;":"\\vartriangleleft","&#x2AA5;":"><","&#x2AA4;":"><","&#x2AA3;":"\\underline{\\ll}","&#x2AA2;&#x338;":"\\cancel{\\gg}","&#x2AA2;":"\\gg","&#x2AA1;&#x338;":"\\cancel{\\ll}","&#x2AA1;":"\\ll","&#x2AA0;":"\\overset{\\sim}{\\geqq}","&#x2A9F;":"\\overset{\\sim}{\\leqq}","&#x2A9E;":"\\overset{\\sim}{>}","&#x2A9D;":"\\overset{\\sim}{<}","&#x2A9C;":"","&#x2A9B;":"","&#x2A9A;":"\\overset{=}{>}","&#x2A99;":"\\overset{=}{<}","&#x2A98;":"","&#x2A97;":"","&#x2A96;":"","&#x2A95;":"","&#x2A94;":"","&#x2A93;":"","&#x2A92;":"\\underset{=}{\\gtrless}","&#x2A91;":"\\underset{=}{\\lessgtr}","&#x2A90;":"\\underset{<}{\\gtrsim}","&#x2A8F;":"\\underset{>}{\\lesssim}","&#x2A8E;":"\\underset{\\simeq}{>}","&#x2A8D;":"\\underset{\\simeq}{<}","&#x2A8C;":"\\gtreqqless","&#x2A8B;":"\\lesseqqgtr","&#x2A8A;":"\\underset{\\cancel{\\approx}}{>}","&#x2A89;":"\\underset{\\approx}{<}","&#x2A86;":"\\underset{\\approx}{>}","&#x2A85;":"\\underset{\\approx}{<}","&#x2A84;":"","&#x2A83;":"","&#x2A82;":"","&#x2A81;":"","&#x2A80;":"","&#x2A7F;":"","&#x2A7E;&#x338;":"\\bcancel{\\geq}","&#x2A7E;":"\\geq","&#x2A7D;&#x338;":"\\bcancel{\\leq}","&#x2A7D;":"\\leq","&#x2A7C;":"","&#x2A7B;":"","&#x2A7A;":"","&#x2A79;":"","&#x2A78;":"\\overset{\\dots}{\\equiv}","&#x2A77;":"","&#x2A76;":"===","&#x2A75;":"==","&#x2A74;":"::=","&#x2A73;":"","&#x2A72;":"\\underset{=}{+}","&#x2A71;":"\\overset{=}{+}","&#x2A70;":"\\overset{\\approx}{=}","&#x2A6F;":"\\overset{\\wedge}{=}","&#x2A6E;":"\\overset{*}{=}","&#x2A6D;":"\\dot{\\approx}","&#x2A6C;":"","&#x2A6B;":"","&#x2A6A;":"\\dot{\\sim}","&#x2A69;":"","&#x2A68;":"","&#x2A67;":"\\dot{\\equiv}","&#x2A66;":"\\underset{\\cdot}{=}","&#x2A65;":"","&#x2A64;":"","&#x2A63;":"\\underset{=}{\\vee}","&#x2A62;":"\\overset{=}{\\vee}","&#x2A61;":"ul(vv)","&#x2A60;":"\\underset{=}{\\wedge}","&#x2A5F;":"\\underline{\\wedge}","&#x2A5E;":"\\overset{=}{\\wedge}","&#x2A5D;":"\\hcancel{\\vee}","&#x2A5C;":"\\hcancel{\\wedge}","&#x2A5B;":"","&#x2A5A;":"","&#x2A59;":"","&#x2A58;":"\\vee","&#x2A57;":"\\wedge","&#x2A56;":"","&#x2A55;":"","&#x2A54;":"","&#x2A53;":"","&#x2A52;":"\\dot{\\vee}","&#x2A51;":"\\dot{\\wedge}","&#x2A50;":"","&#x2A4F;":"","&#x2A4E;":"","&#x2A4D;":"\\overline{\\cap}","&#x2A4C;":"\\overline{\\cup}","&#x2A4B;":"","&#x2A4A;":"","&#x2A49;":"","&#x2A48;":"","&#x2A47;":"","&#x2A46;":"","&#x2A45;":"","&#x2A44;":"","&#x2A43;":"\\overline{\\cap}","&#x2A42;":"\\overline{\\cup}","&#x2A41;":"","&#x2A40;":"","&#x2A3E;":"","&#x2A3D;":"\\llcorner","&#x2A3C;":"\\lrcorner","&#x2A3B;":"","&#x2A3A;":"","&#x2A39;":"","&#x2A38;":"","&#x2A37;":"","&#x2A36;":"\\hat{\\otimes}","&#x2A35;":"","&#x2A34;":"","&#x2A33;":"","&#x2A32;":"\\underline{\\times}","&#x2A31;":"\\underline{\\times}","&#x2A30;":"\\dot{\\times}","&#x2A2E;":"","&#x2A2D;":"","&#x2A2C;":"","&#x2A2B;":"","&#x2A2A;":"","&#x2A29;":"","&#x2A28;":"","&#x2A27;":"","&#x2A26;":"\\underset{\\sim}{+}","&#x2A25;":"\\underset{\\circ}{+}","&#x2A24;":"\\overset{\\sim}{+}","&#x2A23;":"\\hat{+}","&#x2A22;":"\\dot{+}","&#x2A21;":"\\upharpoonright","&#x2A20;":">>","&#x2A1F;":"","&#x2A1E;":"\\triangleleft","&#x2A1D;":"\\bowtie","&#x29FF;":"","&#x29FE;":"+","&#x29FB;":"\\hcancel{|||}","&#x29FA;":"\\hcancel{||}","&#x29F9;":"\\backslash","&#x29F8;":"/","&#x29F7;":"hcancel{\backslash}","&#x29F6;":"","&#x29F5;":"\\backslash","&#x29F2;":"\\Phi","&#x29F1;":"","&#x29F0;":"","&#x29EE;":"","&#x29ED;":"","&#x29EC;":"","&#x29EB;":"\\lozenge","&#x29EA;":"","&#x29E9;":"","&#x29E8;":"","&#x29E7;":"\\ddagger","&#x29E2;":"\\sqcup\\sqcup","&#x29E1;":"","&#x29E0;":"\\square","&#x29DE;":"","&#x29DD;":"","&#x29DC;":"","&#x29DB;":"\\{\\{","&#x29D9;":"\\{","&#x29D8;":"\\}","&#x29D7;":"","&#x29D6;":"","&#x29D5;":"\\bowtie","&#x29D4;":"\\bowtie","&#x29D3;":"\\bowtie","&#x29D2;":"\\bowtie","&#x29D1;":"\\bowtie","&#x29D0;&#x338;":"| \\not\\triangleright","&#x29D0;":"| \\triangleright","&#x29CF;&#x338;":"\\not\\triangleleft |","&#x29CF;":"\\triangleleft |","&#x29CE;":"","&#x29CD;":"\\triangle","&#x29CC;":"","&#x29CB;":"\\underline{\\triangle}","&#x29CA;":"\\dot{\\triangle}","&#x29C9;":"","&#x29C8;":"\\boxed{\\circ}","&#x29C7;":"\\boxed{\\circ}","&#x29C6;":"\\boxed{\\rightarrow}","&#x29C5;":"\\bcancel{\\square}","&#x29C4;":"\\cancel{\\square}","&#x29C3;":"\\odot","&#x29C2;":"\\odot","&#x29BF;":"\\odot","&#x29BE;":"\\odot","&#x29BD;":"\\varnothing","&#x29BC;":"\\oplus","&#x29BB;":"\\otimes","&#x29BA;":"","&#x29B9;":"\\varnothing","&#x29B8;":"\\varnothing","&#x29B7;":"\\ominus","&#x29B6;":"\\ominus","&#x29B5;":"\\ominus","&#x29B4;":"\\vec{\\varnothing}","&#x29B3;":"\\vec{\\varnothing}","&#x29B2;":"\\dot{\\varnothing}","&#x29B1;":"\\overline{\\varnothing}","&#x29B0;":"\\varnothing","&#x29AF;":"","&#x29AE;":"","&#x29AD;":"","&#x29AC;":"","&#x29AB;":"","&#x29AA;":"","&#x29A9;":"","&#x29A8;":"","&#x29A7;":"","&#x29A6;":"","&#x29A5;":"","&#x29A4;":"","&#x29A3;":"","&#x29A2;":"","&#x29A1;":"\\not\\lor","&#x29A0;":"\\bcancel{>}","&#x2982;":":","&#x2981;":"\\circ","&#x2758;":"|","&#x25B2;":"\\bigtriangleup","&#x22FF;":"\\Epsilon","&#x22FE;":"\\overline{\\ni}","&#x22FD;":"\\overline{\\ni}","&#x22FC;":"\\in","&#x22FB;":"\\in","&#x22FA;":"\\in","&#x22F9;":"\\underline{\\in}","&#x22F8;":"\\underline{\\in}","&#x22F7;":"\\overline{\\in}","&#x22F6;":"\\overline{\\in}","&#x22F5;":"\\dot{\\in}","&#x22F4;":"\\in","&#x22F3;":"\\in","&#x22F2;":"\\in","&#x22F0;":"\\ddots","&#x22E9;":"\\underset{\\sim}{\\succ}","&#x22E8;":"\\underset{\\sim}{\\prec}","&#x22E7;":"\\underset{\\not\\sim}{>}","&#x22E6;":"\\underset{\\not\\sim}{<}","&#x22E5;":"\\not\\sqsupseteq","&#x22E4;":"\\not\\sqsubseteq","&#x22E3;":"\\not\\sqsupseteq","&#x22E2;":"\\not\\sqsubseteq","&#x22E1;":"\\nsucc","&#x22E0;":"\\nprec","&#x22DF;":"\\succ","&#x22DE;":"\\prec","&#x22DD;":"\\overline{>}","&#x22DC;":"\\overline{<}","&#x22DB;":"\\underset{>}{\\leq}","&#x22DA;":"\\underset{<}{\\geq}","&#x22D5;":"\\#","&#x22D3;":"\\cup","&#x22D2;":"\\cap","&#x22D1;":"\\supset","&#x22D0;":"\\subset","&#x22CF;":"\\wedge","&#x22CE;":"\\vee","&#x22CD;":"\\simeq","&#x22C8;":"\\bowtie","&#x22C7;":"\\ast","&#x22C6;":"\\star","&#x22C4;":"\\diamond","&#x22BF;":"\\triangle","&#x22BE;":"\\measuredangle","&#x22BD;":"\\overline{\\lor}","&#x22BC;":"\\overline{\\land}","&#x22BB;":"\\underline{\\lor}","&#x22BA;":"\\top","&#x22B9;":"","&#x22B7;":"\\circ\\multimap","&#x22B6;":"\\circ\\multimap","&#x22B3;":"\\triangleright","&#x22B2;":"\\triangleleft","&#x22B1;":"\\succ","&#x22B0;":"\\prec","&#x22AB;":"|\\models","&#x22AA;":"|\\models","&#x22A7;":"\\models","&#x22A6;":"\\vdash","&#x229D;":"\\ominus","&#x229C;":"\\ominus","&#x229B;":"\\odot","&#x229A;":"\\odot","&#x2294;":"\\sqcup","&#x2293;":"\\sqcap","&#x2292;":"\\sqsupseteq","&#x2291;":"\\sqsubseteq","&#x2290;&#x338;":"\\not\\sqsupset","&#x2290;":"\\sqsupset","&#x228F;&#x338;":"\\not\\sqsubset","&#x228F;":"\\sqsubset","&#x228E;":"\\cup","&#x228D;":"\\cup","&#x228C;":"\\cup","&#x227F;&#x338;":"\\not\\succsim","&#x227F;":"\\succsim","&#x227E;":"\\precsim","&#x2279;":"\\not\\overset{>}{<}","&#x2278;":"\\not\\overset{>}{<}","&#x2277;":"\\overset{>}{<}","&#x2276;":"\\overset{<}{>}","&#x2275;":"\\not\\geg","&#x2274;":"\\not\\leq","&#x2273;":"\\geg","&#x2272;":"\\leq","&#x226C;":"","&#x2267;":"\\geg","&#x2266;&#x338;":"\\not\\leq","&#x2266;":"\\leq","&#x2263;":"\\overset{=}{=} ","&#x225E;":"\\overset{m}{=} ","&#x225D;":"\\overset{def}{=}","&#x2258;":"=","&#x2256;":"=","&#x2255;":"=:","&#x2253;":"\\doteq","&#x2252;":"\\doteq","&#x2251;":"\\doteq","&#x2250;":"\\doteq","&#x224F;&#x338;":"","&#x224F;":"","&#x224E;&#x338;":"","&#x224E;":"","&#x224C;":"\\approx","&#x224B;":"\\approx","&#x224A;":"\\approx","&#x2242;&#x338;":"\\neq","&#x2242;":"=","&#x223F;":"\\sim","&#x223E;":"\\infty","&#x223D;&#x331;":"\\sim","&#x223D;":"\\sim","&#x223B;":"\\sim","&#x223A;":":-:","&#x2239;":"-:","&#x2238;":"\\bot","&#x2237;":"::","&#x2236;":":","&#x2223;":"|","&#x221F;":"\\llcorner","&#x2219;":"\\cdot","&#x2218;":"\\circ","&#x2217;":"*","&#x2215;":"/","&#x220E;":"\\square","&#x220D;":"\\ni","&#x220A;":"\\in","&#x2206;":"\\Delta","&#x2044;":"/","&#x2AB0;&#x338;":"\\nsucceq","&#x2AB0;":"\\succeq","&#x2AAF;&#x338;":"\\npreceq","&#x2AAF;":"\\preceq","&#x2A88;":"\\ngeqslant","&#x2A87;":"\\nleqslant","&#x29F3;":"\\Phi","&#x29E6;":"\\models","&#x29E5;":"\\not\\equiv","&#x29E4;":"\\approx\\neq","&#x29E3;":"\\neq","&#x29C1;":"\\circle","&#x29C0;":"\\circle","&#x25E6;":"\\circle","&#x25D7;":"\\circle","&#x25D6;":"\\circle","&#x25CF;":"\\circle","&#x25CE;":"\\circledcirc","&#x25CD;":"\\circledcirc","&#x25CC;":"\\circledcirc","&#x25C9;":"\\circledcirc","&#x25C8;":"\\diamond","&#x25C7;":"\\diamond","&#x25C6;":"\\diamond","&#x25C5;":"\\triangleleft","&#x25C4;":"\\triangleleft","&#x25C3;":"\\triangleleft","&#x25C2;":"\\triangleleft","&#x25C1;":"\\triangleleft","&#x25C0;":"\\triangleleft","&#x25BF;":"\\triangledown","&#x25BE;":"\\triangledown","&#x25BD;":"\\triangledown","&#x25BC;":"\\triangledown","&#x25B9;":"\\triangleright","&#x25B8;":"\\triangleright","&#x25B7;":"\\triangleright","&#x25B6;":"\\triangleright","&#x25B5;":"\\triangle","&#x25B4;":"\\triangle","&#x25B3;":"\\triangle","&#x25B1;":"\\square","&#x25B0;":"\\square","&#x25AF;":"\\square","&#x25AE;":"\\square","&#x25AD;":"\\square","&#x25AB;":"\\square","&#x25AA;":"\\square","&#x25A1;":"\\square","&#x25A0;":"\\square","&#x22ED;":"\\not\\triangleright","&#x22EC;":"\\not\\triangleleft","&#x22EB;":"\\not\\triangleright","&#x22EA;":"\\not\\triangleleft","&#x22D9;":"\\ggg","&#x22D8;":"\\lll","&#x22D7;":"*>","&#x22D6;":"<*","&#x22D4;":"\\pitchfork","&#x22CC;":"","&#x22CB;":"","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#x22B5;":"\\triangleright","&#x22B4;":"","&#x22A5;":"\\bot","&#x2281;":"\\nsucc","&#x2280;":"\\preceq","&#x227D;":"\\succeq","&#x227C;":"\\preceq","&#x227B;":"\\succ","&#x227A;":"\\prec","&#x2271;":"\\geq/","&#x2270;":"\\leq/","&#x226D;":"\\neq","&#x226B;&#x338;":"\\not\\gg","&#x226B;":"\\gg","&#x226A;&#x338;":"\\not\\ll","&#x226A;":"\\ll","&#x2269;":"\\ngeqslant","&#x2268;":"\\nleqslant","&#x2261;":"\\equiv","&#x225F;":"\\doteq","&#x225C;":"\\triangleq","&#x225B;":"\\doteq","&#x225A;":"\\triangleq","&#x2259;":"\\triangleq","&#x2257;":"\\doteq","&#x2254;":":=","&#x224D;":"\\asymp","&#x2247;":"\\ncong","&#x2246;":"\\ncong","&#x2245;":"\\cong","&#x2244;":"\\not\\simeq","&#x2243;":"\\simeq","&#x2241;":"\\not\\sim","&#x2226;":"\\not\\parallel","&#x2225;":"\\parallel","&#x2224;":"\\not|","&#x221D;":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","&#x2260;":"\\neq","&#x2262;":"\\equiv /","&#x2249;":"\\approx /","&#x223C;":"sim","&#x2248;":"\\approx","&#x226E;":"</","&lt;":"<","&#x226F;":">/",">=":">=",">":">","&#x2265;":"\\geq","&#x2264;":"\\leq","&lt;=":"<=","&#x228B;":"\\supsetneq","&#x228A;":"\\subsetneq","&#x2289;":"\\nsupseteq","&#x2288;":"\\nsubseteq","&#x2287;":"\\supseteq","&#x2286;":"\\subseteq","&#x2285;":"\\not\\supset","&#x2284;":"\\not\\subset","&#x2283;&#x20D2;":"\\supset |","&#x2283;":"\\supset","&#x2282;&#x20D2;":"\\subset |","&#x2282;":"\\subset","&#x220C;":"\\not\\in","&#x2209;":"\\notin","&#x2208;":"\\in","&#x2201;":"C","&#x2204;":"\\nexists","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x2227;":"\\land","&amp;&amp;":"\\&\\&","&#x2228;":"\\lor","&#x22AF;":"\\cancel{\\vDash}","&#x22AE;":"\\cancel{\\Vdash}","&#x22AD;":"\\nvDash","&#x22AC;":"\\nvDash","&#x22A9;":"\\Vdash","&#x22A8;":"\\vDash","&#x22A4;":"\\top","&#x22A3;":"\\dashv","&#x22A2;":"\\vdash","&#x220B;":"\\ni","&#x22F1;":"\\ddots","&#x22EF;":"\\hdots","&#x22EE;":"\\vdots","&#x2026;":"\\hdots","&#x3F6;":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","&#x2235;":"\\because","&#x2234;":"\\therefore ","&#x2063;":"",",":",",";":";","&#x29FD;":"\\}","&#x29FC;":"\\{","&#x2998;":"\\]","&#x2997;":"\\[","&#x2996;":"\\ll","&#x2995;":"\\gg","&#x2994;":"\\gg","&#x2993;":"\\ll","&#x2992;":"\\gg","&#x2991;":"\\ll","&#x2990;":"\\]","&#x298F;":"\\]","&#x298E;":"\\]","&#x298D;":"\\[","&#x298C;":"\\[","&#x298B;":"\\]","&#x298A;":"\\triangleright","&#x2989;":"\\triangleleft","&#x2988;":"|\\)","&#x2987;":"\\(|","&#x2986;":"|\\)","&#x2985;":"\\(\\(","&#x2984;":"|\\}","&#x2983;":"\\{|","&#x2980;":"\\||","&#x27EF;":"\\left. \\right]","&#x27EE;":"\\left[ \\right.","&#x27ED;":"\\left. \\right]]","&#x27EC;":"\\left[[ \\right.","&#x27EB;":"\\gg","&#x27EA;":"\\ll","&#x27E9;":"\\rangle","&#x27E8;":"\\langle","&#x27E7;":"\\left. \\right]]","&#x27E6;":"\\left[[ \\right.","&#x2773;":"\\left.\\right)","&#x2772;":"\\left(\\right.","&#x232A;":"\\rangle","&#x2329;":"\\langle","&#x230B;":"\\rfloor","&#x230A;":"\\lfloor","&#x2309;":"\\rceil","&#x2308;":"\\lceil","&#x2016;":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","&#x201D;":'"',"&#x201C;":"``","&#x2019;":"'","&#x2018;":"`","%CE%B1":"\\alpha","%CE%B2":"\\beta","%CE%B3":"\\gamma","%CE%93":"\\Gamma","%CE%B4":"\\delta","%CE%94":"\\Delta","%CF%B5":"\\epsilon","%CE%B6":"\\zeta","%CE%B7":"\\eta","%CE%B8":"\\theta","%CE%98":"\\Theta","%CE%B9":"\\iota","%CE%BA":"\\kappa","%CE%BB":"\\lambda","%CE%BC":"\\mu","%CE%BD":"\\nu","%CE%BF":"\\omicron","%CF%80":"\\pi","%CE%A0":"\\Pi","%CF%81":"\\pho","%CF%83":"\\sigma","%CE%A3":"\\Sigma","%CF%84":"\\tau","%CF%85":"\\upsilon","%CE%A5":"\\Upsilon","%CF%95":"\\phi","%CE%A6":"\\Phi","%CF%87":"\\chi","%CF%88":"\\psi","%CE%A8":"\\Psi","%CF%89":"\\omega","%CE%A9":"\\Omega"}},9039:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathOperatorsByGlyph=void 0,d.allMathOperatorsByGlyph={_:"\\underline","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\square","":"\\square","":"","":"''''","":"\\overline","":"```","":"``","":"`","":"'''","":"''","":"``","":",,","":"`","":",","^":"\\hat","":"\\sim","":"\\sim","":"\\sim","":"\\circ","":"\\cdot","":" ","":"\\_","":"","":"","":"","":"","":"\\hat",:"o","":"1","":",","":"","":"3","":"2","":"\\circ","":"\\bar",:"a","":"\\nrightarrow","":"\\cdot\\cdot","~":"\\sim","`":"`","--":"--","++":"++","&":"\\&","":"\\sqrt[4]{}","":"\\sqrt[3]{}","":"\\sqrt{}","":"d","":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","":"\\#","":"","":"","":"'","<>":"<>","**":"\\star\\star","":"\\nabla","":"\\partial","":"\\bigodot","":"\\neg","":"\\measuredangle","":"\\measuredangle","":"\\angle","":"\\div","/":"/","":"\\backslash","\\":"\\backslash","%":"\\%","":"\\bigotimes","":"\\cdot","":"\\coprod","":"\\times","":"\\cdot","":"\\boxdot","":"\\boxtimes","":"","":"-","":"\\cdot",".":".","*":"\\star","":"\\cup","":"\\cap","":"\\coprod","":"\\prod","":"","":"","":"\\mid\\mid\\mid","":"\\times","":"","":"","":"\\sqcup","":"\\sqcap","":"\\otimes","":"\\odot","":"\\cap","":"\\vee","":"\\wedge","":"\\uplus","":"\\cup","":"\\cup","":"\\underline{\\int}","":"\\overline{\\int}","":"\\int","":"\\int","":"\\int","":"\\int","":"\\oint","":"\\oint","":"\\int","":"\\int","":"\\int","":"\\int","":"\\int","":"\\bcancel{\\int}","":"","":"\\hcancel{\\int}","":"\\iiiint","":"\\oint","":"\\oint","":"\\int","":"\\oiint","":"\\oiint","":"\\oint","":"\\int","":"\\oplus","":"\\oslash","":"\\ominus","":"\\oplus","":"\\iiint","":"\\iint","":"","":"","":"\\sum","":"\\boxminus","":"\\boxplus","":"\\dot{+}","":"+-","":"-","":"\\pm","-":"-","+":"+","":"\\Rrightarrow","":"\\Lleftarrow","":":\\rightarrow","":"","":"\\bullet-\\bullet","":"\\angle","":"\\measuredangle","":"\\measuredangle","":"\\perp","":"\\measuredangle","":"","":"\\vdots","":"","":"","":"\\prec","":"\\succ","":"\\underset{\\rightarrow}{\\supset}","":"","":"\\underset{\\rightarrow}{\\subset}","":"\\underset{\\rightarrow}{>}","":"","":"\\underset{\\leftarrow}{<}","":"\\underset{\\approx}{\\rightarrow}","":"\\underset{\\sim}{\\rightarrow}","":"\\underset{\\sim}{\\leftarrow}","":"\\overset{\\sim}{\\rightarrow}","":"\\overset{=}{\\rightarrow}","":"","":"","":"","":"\\overline{\\rightharpoondown}","":"\\underline{\\rightharpoonup}","":"\\overline{\\leftharpoondown}","":"\\underline{\\leftharpoonup}","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\leftrightarrow","":"","":"\\leftrightarrow","":"\\nrightarrow","":"","":"","":"\\rightleftarrows","":"\\leftrightarrows","":"\\rightleftarrows","":"\\circlearrowright","":"\\circlearrowleft","":"\\rightarrow","":"\\leftarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":" ","":" ","":" ","":" ","":" ","":"\\times","":"\\times","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":"\\mapsto\\cdot","":"\\cdot\\leftarrow","":"\\rightarrow\\cdot","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\uparrow","":"\\downarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\nLeftrightarrow","":"\\nRightarrow","":"\\nLeftarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\leftarrow","":"\\Longleftrightarrow","":"\\Longrightarrow","":"\\Longleftarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\rightarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\Rrightarrow","":"","":"\\rightarrow","":"\\Updownarrow","":"\\searrow","":"\\nwarrow","":"\\Leftarrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightsquigarrow","":"\\leftarrow","":"\\Rrightarrow","":"\\Lleftarrow","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\Updownarrow","":"\\Leftrightarrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\nRightarrow","":"\\nLeftrightarrow","":"\\nLeftarrow","":"\\rightleftharpoons","":"\\leftrightharpoons","":"\\downdownarrows","":"\\rightrightarrows","":"\\upuparrows","":"\\leftleftarrows","":"\\leftrightarrows","":"","":"\\rightleftarrows","":"\\downharpoonleft","":"\\downharpoonright","":"\\rightharpoondown","":"\\rightharpoonup","":"\\upharpoonleft","":"\\upharpoonright","":"\\leftharpoondown","":"\\leftharpoonup","":"\\circlearrowright","":"\\circlearrowleft","":"\\leftrightarrows","":"\\overline{\\nwarrow}","":"\\curvearrowright","":"\\curvearrowleft","":"\\swarrow","":"\\searrow","":"\\Rsh","":"\\Lsh","":"\\Rsh","":"\\Lsh","":"\\swarrow","":"","":"\\leftrightsquigarrow","":"\\looparrowright","":"\\looparrowleft","":"\\hookrightarrow","":"\\hookleftarrow","":"\\underline{\\updownarrow}","":"\\downarrow","":"\\rightarrowtail","":"\\uparrow","":"\\leftarrowtail","":"\\rightarrowtail","":"\\leftarrowtail","":"\\downarrow","":"\\twoheadrightarrow","":"\\uparrow","":"\\twoheadleftarrow","":"\\nearrow","":"\\nwarrow","":"","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\mid","":"","":"//","":"///","":"","":"","":"","":"","":"\\vdots","":"","":"","":"","":"\\nparallel","":"","":"","":"","":"\\bcancel{\\mid}","":"","":"","":"","":"","":"","":"\\underline{\\perp}","":"\\overline{\\top}","":"","":"","":"","":"","":"","":"","":"\\perp","":"\\top","":"\\dashv","":"","":"","":"\\pitchfork","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\underset{\\neq}{\\supset}","":"\\underset{\\neq}{\\subset}","":"\\underset{\\approx}{\\supset}","":"\\underset{\\approx}{\\subset}","":"\\underset{\\sim}{\\supset}","":"\\underset{\\sim}{\\subset}","":"\\supseteqq","":"\\subseteqq","":"\\dot{\\supseteq}","":"\\dot{\\subseteq}","":"\\underset{\\times}{\\supset}","":"\\underset{\\times}{\\subset}","":"\\underset{+}{\\supset}","":"\\underset{+}{\\subset}","":"","":"","":"\\gg ","":"\\ll","":"\\underset{\\cancel{\\approx}}{\\succ}","":"\\underset{\\cancel{\\approx}}{\\prec}","":"\\underset{\\approx}{\\succ}","":"\\underset{\\approx}{\\prec}","":"\\underset{\\cancel{=}}{\\succ}","":"\\underset{\\cancel{=}}{\\prec}","":"\\underset{=}{\\succ}","":"\\underset{=}{\\prec}","":"","":"","":"","":"\\underline{\\hcancel{>}}","":"\\underline{\\hcancel{>}}","":"\\hcancel{>}","":"\\hcancel{<}","":"","":"","":"\\vartriangleright","":"\\vartriangleleft","":"><","":"><","":"\\underline{\\ll}","":"\\cancel{\\gg}","":"\\gg","":"\\cancel{\\ll}","":"\\ll","":"\\overset{\\sim}{\\geqq}","":"\\overset{\\sim}{\\leqq}","":"\\overset{\\sim}{>}","":"\\overset{\\sim}{<}","":"","":"","":"\\overset{=}{>}","":"\\overset{=}{<}","":"","":"","":"","":"","":"","":"","":"\\underset{=}{\\gtrless}","":"\\underset{=}{\\lessgtr}","":"\\underset{<}{\\gtrsim}","":"\\underset{>}{\\lesssim}","":"\\underset{\\simeq}{>}","":"\\underset{\\simeq}{<}","":"\\gtreqqless","":"\\lesseqqgtr","":"\\underset{\\cancel{\\approx}}{>}","":"\\underset{\\approx}{<}","":"\\underset{\\approx}{>}","":"\\underset{\\approx}{<}","":"","":"","":"","":"","":"","":"","":"\\bcancel{\\geq}","":"\\geq","":"\\bcancel{\\leq}","":"\\leq","":"","":"","":"","":"","":"\\overset{\\dots}{\\equiv}","":"","":"===","":"==","":"::=","":"","":"\\underset{=}{+}","":"\\overset{=}{+}","":"\\overset{\\approx}{=}","":"\\overset{\\wedge}{=}","":"\\overset{*}{=}","":"\\dot{\\approx}","":"","":"","":"\\dot{\\sim}","":"","":"","":"\\dot{\\equiv}","":"\\underset{\\cdot}{=}","":"","":"","":"\\underset{=}{\\vee}","":"\\overset{=}{\\vee}","":"ul(vv)","":"\\underset{=}{\\wedge}","":"\\underline{\\wedge}","":"\\overset{=}{\\wedge}","":"\\hcancel{\\vee}","":"\\hcancel{\\wedge}","":"","":"","":"","":"\\vee","":"\\wedge","":"","":"","":"","":"","":"\\dot{\\vee}","":"\\dot{\\wedge}","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"","":"","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"\\llcorner","":"\\lrcorner","":"","":"","":"","":"","":"","":"\\hat{\\otimes}","":"","":"","":"","":"\\underline{\\times}","":"\\underline{\\times}","":"\\dot{\\times}","":"\\bigodot","":"\\bigodot","":"","":"","":"","":"","":"","":"","":"\\Box","":"\\underset{\\sim}{+}","":"\\underset{\\circ}{+}","":"\\overset{\\sim}{+}","":"\\hat{+}","":"\\dot{+}","":"\\upharpoonright","":">>","":"","":"\\triangleleft","":"\\bowtie","":"","":"+","":"\\hcancel{|||}","":"\\hcancel{||}","":"\\backslash","":"/","":"hcancel{\backslash}","":"","":"\\backslash","":"\\Phi","":"","":"","":"","":"","":"","":"\\lozenge","":"","":"","":"","":"\\ddagger","":"\\sqcup\\sqcup","":"","":"\\square","":"","":"","":"","":"\\{\\{","":"\\{","":"\\}","":"","":"","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"| \\not\\triangleright","":"| \\triangleright","":"\\not\\triangleleft |","":"\\triangleleft |","":"","":"\\triangle","":"","":"\\underline{\\triangle}","":"\\dot{\\triangle}","":"","":"\\boxed{\\circ}","":"\\boxed{\\circ}","":"\\boxed{\\rightarrow}","":"\\bcancel{\\square}","":"\\cancel{\\square}","":"\\odot","":"\\odot","":"\\odot","":"\\odot","":"\\varnothing","":"\\oplus","":"\\otimes","":"","":"\\varnothing","":"\\varnothing","":"\\ominus","":"\\ominus","":"\\ominus","":"\\vec{\\varnothing}","":"\\vec{\\varnothing}","":"\\dot{\\varnothing}","":"\\overline{\\varnothing}","":"\\varnothing","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"","":"","":"","":"","":"\\ulcorner","":"\\measuredangle","":"\\not\\lor","":"\\bcancel{>}","":":","":"\\cdot","":"\\mid","":"\\bigtriangleup","":"\\Epsilon","":"\\overline{\\ni}","":"\\overline{\\ni}","":"\\in","":"\\in","":"\\in","":"\\underline{\\in}","":"\\underline{\\in}","":"\\overline{\\in}","":"\\overline{\\in}","":"\\dot{\\in}","":"\\in","":"\\in","":"\\in","":"\\ddots","":":","":"\\underset{\\sim}{\\succ}","":"\\underset{\\sim}{\\prec}","":"\\underset{\\not\\sim}{>}","":"\\underset{\\not\\sim}{<}","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\nsucc","":"\\nprec","":"\\succ","":"\\prec","":"\\overline{>}","":"\\overline{<}","":"\\underset{>}{\\leq}","":"\\underset{<}{\\geq}","":"\\#","":"\\cup","":"\\cap","":"\\supset","":"\\subset","":"\\wedge","":"\\vee","":"\\simeq","":"\\Join","":"\\ast","":"\\star","":"\\diamond","":"\\triangle","":"\\measuredangle","":"\\overline{\\lor}","":"\\overline{\\land}","":"\\underline{\\lor}","":"\\top",:"\\pm",:"+","":"","":"\\circ\\multimap","":"\\circ\\multimap","":"\\triangleright","":"\\triangleleft","":"\\succ","":"\\prec","":"|\\models","":"|\\models","":"\\models","":"\\vdash","":"\\ominus","":"\\ominus","":"\\odot","":"\\odot","":"\\sqcup","":"\\sqcap","":"\\sqsupseteq","":"\\sqsubseteq","":"\\not\\sqsupset","":"\\sqsupset","":"\\not\\sqsubset","":"\\sqsubset","":"\\cup","":"\\cup","":"\\cup","":"\\not\\succsim","":"\\succsim","":"\\precsim","":"\\not\\overset{>}{<}","":"\\not\\overset{>}{<}","":"\\overset{>}{<}","":"\\overset{<}{>}","":"\\not\\geg","":"\\not\\leq","":"\\geg","":"\\leq","":"","":"\\geg","":"\\not\\leq","":"\\leq","":"\\overset{=}{=} ","":"\\overset{m}{=} ","":"\\overset{def}{=}","":"=","":"=","":"=:","":"\\doteq","":"\\doteq","":"\\doteq","":"\\doteq","":"","":"","":"","":"","":"\\approx","":"\\approx","":"\\approx","":"\\neq","":"=","":"\\sim","":"\\infty","":"\\sim","":"\\sim","":"\\sim","":":-:","":"-:","":"\\bot","":"::","":":","":"\\mid","":"\\llcorner","":"\\circ","":"*","":"/","":"\\square","":"\\ni","":"\\in","":"\\Delta","":"/","":"\\nsucceq","":"\\succeq","":"\\npreceq","":"\\preceq","":"\\ngeqslant","":"\\nleqslant","":"\\Phi","":"\\models","":"\\not\\equiv","":"\\approx\\neq","":"\\neq","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\diamond","":"\\diamond","":"\\diamond","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangle","":"\\triangle","":"\\triangle","":"\\square","":"\\blacksquare","":"\\square","":"\\blacksquare","":"\\square","":"\\square","":"\\square","":"\\square","":"\\blacksquare","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\ggg","":"\\lll","":"*>","":"<*","":"\\pitchfork","":"","":"\\bowtie","":"\\ltimes","":"\\rtimes","":"\\triangleright","\\triangleleft":"","":"\\bot","":"\\nsucc","":"\\preceq","":"\\succeq","":"\\preceq","":"\\succ","":"\\prec","":"\\geq/","":"\\leq/","":"\\neq","":"\\not\\gg","":"\\gg","":"\\not\\ll","":"\\ll","":"\\ngeqslant","":"\\nleqslant","":"\\equiv","":"\\doteq","":"\\triangleq","":"\\doteq","":"\\triangleq","":"\\triangleq","":"\\doteq","":":=","":"\\asymp","":"\\ncong","":"\\ncong","":"\\cong","":"\\not\\simeq","":"\\simeq","":"\\not\\sim","":"\\not\\parallel","":"\\parallel","":"\\not|","":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","":"\\neq","":"\\equiv /","":"\\approx /","":"sim","":"\\approx","":"</","<":"<","":">/",">=":">=",">":">","":"\\geq","":"\\leq","<=":"<=","":"\\supsetneq","":"\\subsetneq","":"\\nsupseteq","":"\\nsubseteq","":"\\supseteq","":"\\subseteq","":"\\not\\supset","":"\\not\\subset","":"\\supset |","":"\\supset","":"\\subset |","":"\\subset","":"\\not\\in","":"\\notin","":"\\in","":"C","":"\\nexists","":"\\exists","":"\\forall","":"\\land","&&":"\\&\\&","":"\\lor","":"\\cancel{\\vDash}","":"\\cancel{\\Vdash}","":"\\nvDash","":"\\nvDash","":"\\Vdash","":"\\vDash","":"\\top","":"\\dashv","":"\\vdash","":"\\ni","":"\\ddots","":"\\hdots","":"\\vdots","":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","":"\\because","":"\\therefore ","":"\\llbracket",",":",",";":";","":"\\}","":"\\{","":"\\]","":"\\[","":"\\ll","":"\\gg","":"\\gg","":"\\ll","":"\\gg","":"\\ll","":"\\]","":"\\]","":"\\]","":"\\[","":"\\[","":"\\]","":"\\triangleright","":"\\triangleleft","":"|\\)","":"\\(|","":"|\\)","":"\\(\\(","":"|\\}","":"\\{|","":"\\||","":"\\left. \\right]","":"\\left[ \\right.","":"\\left. \\right]]","":"\\left[[ \\right.","":"\\gg","":"\\ll","":"\\)|","":"\\(|","":"\\left.\\right)","":"\\left(\\right.","":"\\rangle","":"\\langle","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil","":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","":'\\"',"":"\\text{``}","":"'","":"`",:"\\alpha",:"\\beta",:"\\gamma",:"\\Gamma",:"\\delta",:"\\Delta","":"\\epsilon",:"\\zeta",:"\\eta",:"\\theta",:"\\Theta",:"\\iota",:"\\kappa",:"\\lambda",:"\\nu",:"\\omicron",:"\\pi",:"\\Pi",:"\\rho",:"\\sigma",:"\\Sigma",:"\\tau",:"\\upsilon",:"\\Upsilon",:"\\phi",:"\\Phi",:"\\chi",:"\\psi",:"\\Psi",:"\\omega",:"\\Omega",:"\\Omega","":"\\emptyset","":"\\circlearrowleft","":"\\circlearrowright","":"\\times","":"\\dfrac{1}{2}",:"\\mu",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",:"\\varepsilon",T:"T","":"\\cdot",:"P","":"\\infty",:"\\nabla",:"\\eta","":"^{+}","":"^{-}","":"^{=}","":"^{(}","":"^{)}","":"\\)|","":"\\langle","":";","":"\\circ","":"\\perp","":"\\times","":"-","":"\\gg","":"\\uparrow","":"\\downarrow","":"\\leftarrow","":"\\rightarrow","":"-","":"\\mid","":"\\mid",:"\\hbar","":"\\rightarrow","":"\\cdot","":"\\mid","":"\\pounds","":"\\yen","":"\\times","":"\\checkmark",:"^{n}","":"\\ll",:"\\prime","":"\\dagger","":"\\mid",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\text{e}",:"r","":"\\ddagger",:"i",:"\\Upsilon","":"\\delta","":"\\cdot",:"\\theta","":"\\phi",:"\\prod",:"o",:"\\hbar","":"\\Lambda","":"\\mid","":"\\euro",:"\\bar{u}",:"\\varphi","":"c","":"\\epsilon",:"\\mathsf{X}","":"_{n}"}},8249:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathSymbolsByChar=void 0,d.allMathSymbolsByChar={"&#xA0;":"\\textrm{ }","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x21D4;":"\\iff","&#x21D2;":"=>","&#xAC;":"\\neg","&#x2124;":"\\mathbb{Z}","&#x211D;":"\\mathbb{R}","&#x211A;":"\\mathbb{Q}","&#x2115;":"\\mathbb{N}","&#x2102;":"CC","&#x25A1;":"\\square","&#x22C4;":"\\diamond","&#x25B3;":"\\triangle","&#x2322;":"\\frown","&#x2220;":"\\angle","&#x22F1;":"\\ddots","&#x22EE;":"\\vdots","&#x2235;":"\\because","&#x2234;":"\\therefore","&#x2135;":"\\aleph","&#x2205;":"\\oslash","&#xB1;":"\\pm","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x222E;":"\\oint","&#x222B;":"\\int","&#x22C3;":"\\cup","&#x222A;":"\\cup","&#x22C2;":"\\cap","&#x2229;":"\\cap","&#x22C1;":"\\vee","&#x2228;":"\\vee","&#x22C0;":"\\wedge","&#x2227;":"\\wedge","&#x220F;":"\\prod","&#x2211;":"\\sum","&#x2299;":"\\bigodot","&#x2297;":"\\bigoplus","&#x2295;":"o+","&#x2218;":"@","&#x22C8;":"\\bowtie","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#xF7;":"\\div","&#xD7;":"\\times","\\":"\\backslash","&#x22C6;":"\\star","&#x2217;":"\\star","&#x22C5;":"\\cdot","&#x3A9;":"\\Omega","&#x3C9;":"\\omega","&#x3A8;":"\\Psi","&#x3C8;":"\\psi","&#x3C7;":"\\chi","&#x3C6;":"\\varphi","&#x3A6;":"\\Phi","&#x3D5;":"\\phi","&#x3C5;":"\\upsilon","&#x3C4;":"\\tau","&#x3A3;":"\\Sigma","&#x3C3;":"\\sigma","&#x3C1;":"\\rho","&#x3A0;":"\\Pi","&#x3C0;":"\\pi","&#x39E;":"\\Xi","&#x3BE;":"\\xi","&#x3BD;":"\\nu","&#x3BC;":"\\mu","&#x39B;":"\\Lambda","&#x3BB;":"\\lambda","&#x3BA;":"\\kappa","&#x3B9;":"\\iota","&#x3D1;":"\\vartheta","&#x398;":"\\Theta","&#x3B8;":"\\theta","&#x3B7;":"\\eta","&#x3B6;":"\\zeta","&#x25B;":"\\varepsilon","&#x3B5;":"\\epsilon","&#x394;":"\\Delta","&#x3B4;":"\\delta","&#x393;":"\\Gamma","&#x3B3;":"\\gamma","&#x3B2;":"\\beta","&#x3B1;":"\\alpha","&#x221E;":"\\infty","":"\\text{\\textdir TRT}","":"\\text{\\textdir LTR}"}},8171:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.allMathSymbolsByGlyph=void 0,d.allMathSymbolsByGlyph={" ":"\\textrm{ }","":"\\exists","":"\\forall","":"\\iff","":"\\Rightarrow","":"\\neg","":"\\square","":"\\diamond","":"\\triangle","":"\\frown","":"\\angle","":"\\ddots","":"\\vdots","":"\\because","":"\\therefore",:"\\aleph","":"\\emptyset","":"\\pm","":"\\nabla","":"\\partial","":"\\oint","":"\\int","":"\\cup","":"\\cup","":"\\cap","":"\\cap","":"\\vee","":"\\vee","":"\\wedge","":"\\wedge","":"\\prod","":"\\sum","":"\\bigodot","":"\\bigoplus","":"o+","":"@","":"\\bowtie","":"\\rtimes","":"\\ltimes","":"\\div","":"\\times","\\":"\\backslash","":"\\star","":"\\star","":"\\cdot",:"\\Omega",:"\\omega",:"\\Psi",:"\\psi",:"\\chi",:"\\varphi",:"\\Phi",:"\\phi",:"\\upsilon",:"\\tau",:"\\Sigma",:"\\sigma",:"\\rho",:"\\Pi",:"\\pi",:"\\Xi",:"\\xi",:"\\nu",:"\\mu",:"\\Lambda",:"\\lambda",:"\\kappa",:"\\iota",:"\\vartheta",:"\\Theta",:"\\theta",:"\\eta",:"\\zeta",:"\\varepsilon",:"\\epsilon",:"\\Delta",:"\\delta",:"\\Gamma",:"\\gamma",:"\\beta",:"\\alpha","":"\\infty","":"\\epsilon",:"\\mu","":"^{2}",:"\\imath","":"\\blacksquare",:"\\mathbf{m}",:"\\Omega","":"\\circlearrowleft","":"\\circlearrowright",:" ","":"\\yen","":"^{(}","":"^{)}",:"\\ss",:"\\hbar","":"\\ominus","":"\\bigtriangleup","'":"\\nrightarrow","":"\\dagger",:"\\prime",:" ","":" ",:"\\wp",:" ",:"^{n}","":"\\checkmark","":"\\times","":"\\dfrac{1}{2}",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",T:"T","":"\\cdot",:"P",:"\\nabla",:"\\eta",:"\\gamma",:"\\hbar",:"\\varepsilon","":"\\_{D}","":"\\lambda","":"\\rangle","":"\\langle","":";","":"x","":"y","":"z","":"i","":"j","":"k","":"m","":"e","":"r",:"\\eta","":"\\beta","":"\\omega","":"\\wp","":"\\pi",:"\\epsilon",:"\\epsilon","":"\\epsilon",:"\\pi",:"\\nu",:"\\theta","":"\\psi","":"\\theta",:"\\phi","":"\\Gamma",:"\\ell",:"\\upsilon","":"\\varphi","":"\\theta",:"\\Phi","":"\\varphi","":"i",:"o",:"o",:"f","":"\\rho","":"x","":"p","":"q","":"s","":"t","":"u","":"v","":"w","":"a","":"b","":"c","":"d","":"f","":"g","":"l","":"n","":"o","":"w","":"v",:"m","":"\\circ","":"\\perp","":"\\times","":"\\mid",:"\\Phi","":"\\mid",:"\\hbar",:" ","":"\\llbracket",:"\\hat{e}","":"\\cent","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","|":"\\mid","":"\\mid","":"\\heartsuit",:"0",:"Y",:"x","":"z","":"y","":"x",:"p",:"a","":"\\pounds",m:"m","":"\\Xi","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","&":"\\&","":"\\parallel","%":"\\%","":"\\text{``}",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil",:"\\varepsilon","":"\\text{e}",:"r","":"\\nrightarrow","":"\\hat{}","":"\\overline","":"\\rightarrow","":"\\ddagger","":"\\cdot","":"\\square","":"\\Delta",:"i","":"\\angle",:"\\Upsilon","":"\\downarrow","":"\\uparrow","":"\\gg","":"\\top","":"/","":"\\delta","":"\\cdot","":":","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\cdot",:"\\theta","":"\\measuredangle","":",","":"\\overline","":"\\llbracket","":"\\phi",:"\\prod",:"o","":"\\approx","":"\\leq",:"\\hbar","":"\\Lambda",:"\\pm","":"-",:"+","":"\\neq","":"\\leftarrow","":"\\mid","":"\\euro","":" ",:"\\bar{u}","":"\\parallel","":"\\leftrightarrow","":"\\sqrt{}","":"c","":"\\epsilon","":"\\cdot","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\ll",:"\\mathsf{X}","":"\\mid","":"\\rangle","":"_{n}","":"\\square","":"\\circle","":'\\"'}},5406:function(c,d,Ct){var ar=this&&this.__createBinding||(Object.create?function(tn,on,fn,dn){dn===void 0&&(dn=fn);var Cn=Object.getOwnPropertyDescriptor(on,fn);Cn&&!("get"in Cn?!on.__esModule:Cn.writable||Cn.configurable)||(Cn={enumerable:!0,get:function(){return on[fn]}}),Object.defineProperty(tn,dn,Cn)}:function(tn,on,fn,dn){dn===void 0&&(dn=fn),tn[dn]=on[fn]}),en=this&&this.__exportStar||function(tn,on){for(var fn in tn)fn==="default"||Object.prototype.hasOwnProperty.call(on,fn)||ar(on,tn,fn)};Object.defineProperty(d,"__esModule",{value:!0}),en(Ct(2965),d),en(Ct(9039),d),en(Ct(8249),d),en(Ct(8171),d),en(Ct(472),d),en(Ct(4320),d),en(Ct(6122),d)},472:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.latexAccents=void 0,d.latexAccents=["\\hat","\\bar","\\underbrace","\\overbrace"]},4320:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.mathNumberByGlyph=void 0,d.mathNumberByGlyph={"":"_{0}","":"_{1}","":"_{2}","":"_{3}","":"_{4}","":"_{5}","":"_{6}","":"_{7}","":"_{8}","":"_{9}","":"^{0}","":"^{1}","":"^{2}","":"^{3}","":"^{4}","":"^{5}","":"^{6}","":"^{7}","":"^{8}","":"^{9}",:"^{n}","":"_{n}","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","":"\\dfrac{1}{2}","":"\\dfrac{1}{3}","":"\\dfrac{2}{3}","":"\\dfrac{1}{4}","":"\\dfrac{3}{4}","":"\\dfrac{1}{5}","":"\\dfrac{2}{5}","":"\\dfrac{3}{5}","":"\\dfrac{4}{5}","":"\\dfrac{1}{6}","":"\\dfrac{5}{6}","":"\\dfrac{1}{7}","":"\\dfrac{1}{8}","":"\\dfrac{3}{8}","":"\\dfrac{5}{8}","":"\\dfrac{7}{8}","":"\\dfrac{1}{9}","":"\\dfrac{1}{10}"}},6122:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.HashUTF8ToLtXConverter=void 0,d.HashUTF8ToLtXConverter=class{convert(tn){if(tn.match(/[a-z0-9]/i))return tn;const on=Ct[tn];return on?this.convertAccentCharToLtX(on)||tn:this.convertSpecialCharToLtX(tn)||tn}convertAccentCharToLtX(tn){const{char:on,accent:fn}=tn,dn=ar[fn];return dn?`\\${dn}{${on}}`:null}convertSpecialCharToLtX(tn){const on=en[tn];if(!on)return null;const{letter:fn,fontCmd:dn}=on;return`\\${dn}{${fn}}`}};const Ct={:{char:"a",accent:""},:{char:"a",accent:"`"},:{char:"a",accent:"^"},:{char:"a",accent:"~"},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:"-"},:{char:"a",accent:"-"},:{char:"e",accent:""},:{char:"e",accent:"`"},:{char:"e",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"i",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:"-"},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:"^"},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:""},:{char:"i",accent:"-"},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:"^"},:{char:"o",accent:"~"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"-"},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:"^"},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:""},:{char:"u",accent:"-"},:{char:"y",accent:""},:{char:"y",accent:"`"},:{char:"y",accent:"^"},:{char:"y",accent:""},:{char:"y",accent:"-"},:{char:"A",accent:""},:{char:"A",accent:"`"},:{char:"A",accent:"^"},:{char:"A",accent:"~"},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:"-"},:{char:"A",accent:"-"},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"^"},:{char:"E",accent:""},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"-"},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:"^"},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:""},:{char:"I",accent:"-"},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:"^"},:{char:"O",accent:"~"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"-"},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:"^"},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:""},:{char:"U",accent:"-"},:{char:"Y",accent:""},:{char:"Y",accent:"`"},:{char:"Y",accent:"^"},:{char:"Y",accent:""},:{char:"Y",accent:"-"},:{char:"n",accent:"~"},:{char:"N",accent:"~"},:{char:"c",accent:""},:{char:"C",accent:""},:{char:"v",accent:"~"},:{char:"V",accent:"~"},:{char:"j",accent:"^"},:{char:"J",accent:"^"},:{char:"z",accent:""},:{char:"Z",accent:""},:{char:"Z",accent:"^"},:{char:"z",accent:"^"},:{char:"Z",accent:""},:{char:"z",accent:""},:{char:"z",accent:""}},ar={"":"acute","`":"grave","^":"hat","~":"tilde","":"ddot","":"mathring","":"breve","":"check","":"H","":"dot","-":"bar","":"hat","":"tilde"},en={"":{letter:"A",fontCmd:"mathbf"},"":{letter:"B",fontCmd:"mathbf"},"":{letter:"C",fontCmd:"mathbf"},"":{letter:"D",fontCmd:"mathbf"},"":{letter:"E",fontCmd:"mathbf"},:{letter:"E",fontCmd:"mathbf"},"":{letter:"F",fontCmd:"mathbf"},"":{letter:"G",fontCmd:"mathbf"},"":{letter:"H",fontCmd:"mathbf"},"":{letter:"I",fontCmd:"mathbf"},"":{letter:"J",fontCmd:"mathbf"},"":{letter:"K",fontCmd:"mathbf"},"":{letter:"L",fontCmd:"mathbf"},"":{letter:"M",fontCmd:"mathbf"},"":{letter:"N",fontCmd:"mathbf"},"":{letter:"O",fontCmd:"mathbf"},"":{letter:"P",fontCmd:"mathbf"},"":{letter:"Q",fontCmd:"mathbf"},"":{letter:"R",fontCmd:"mathbf"},"":{letter:"S",fontCmd:"mathbf"},"":{letter:"T",fontCmd:"mathbf"},"":{letter:"U",fontCmd:"mathbf"},"":{letter:"V",fontCmd:"mathbf"},"":{letter:"W",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"Y",fontCmd:"mathbf"},"":{letter:"Z",fontCmd:"mathbf"},"":{letter:"0",fontCmd:"mathbf"},"":{letter:"1",fontCmd:"mathbf"},"":{letter:"2",fontCmd:"mathbf"},"":{letter:"3",fontCmd:"mathbf"},"":{letter:"4",fontCmd:"mathbf"},"":{letter:"5",fontCmd:"mathbf"},"":{letter:"6",fontCmd:"mathbf"},"":{letter:"7",fontCmd:"mathbf"},"":{letter:"8",fontCmd:"mathbf"},"":{letter:"9",fontCmd:"mathbf"},"":{letter:"A",fontCmd:"mathit"},"":{letter:"B",fontCmd:"mathit"},"":{letter:"C",fontCmd:"mathit"},"":{letter:"D",fontCmd:"mathit"},"":{letter:"E",fontCmd:"mathit"},"":{letter:"F",fontCmd:"mathit"},"":{letter:"G",fontCmd:"mathit"},"":{letter:"H",fontCmd:"mathit"},"":{letter:"I",fontCmd:"mathit"},:{letter:"I",fontCmd:"mathit"},"":{letter:"J",fontCmd:"mathit"},"":{letter:"K",fontCmd:"mathit"},"":{letter:"L",fontCmd:"mathit"},"":{letter:"M",fontCmd:"mathit"},"":{letter:"N",fontCmd:"mathit"},"":{letter:"O",fontCmd:"mathit"},"":{letter:"P",fontCmd:"mathit"},"":{letter:"Q",fontCmd:"mathit"},"":{letter:"R",fontCmd:"mathit"},"":{letter:"S",fontCmd:"mathit"},"":{letter:"T",fontCmd:"mathit"},"":{letter:"U",fontCmd:"mathit"},"":{letter:"V",fontCmd:"mathit"},"":{letter:"W",fontCmd:"mathit"},"":{letter:"X",fontCmd:"mathit"},"":{letter:"Y",fontCmd:"mathit"},"":{letter:"Z",fontCmd:"mathit"},"":{letter:"A",fontCmd:"mathbb"},"":{letter:"B",fontCmd:"mathbb"},:{letter:"C",fontCmd:"mathbb"},"":{letter:"D",fontCmd:"mathbb"},"":{letter:"E",fontCmd:"mathbb"},"":{letter:"F",fontCmd:"mathbb"},"":{letter:"G",fontCmd:"mathbb"},:{letter:"H",fontCmd:"mathbb"},"":{letter:"I",fontCmd:"mathbb"},"":{letter:"J",fontCmd:"mathbb"},"":{letter:"K",fontCmd:"mathbb"},"":{letter:"L",fontCmd:"mathbb"},"":{letter:"M",fontCmd:"mathbb"},:{letter:"N",fontCmd:"mathbb"},"":{letter:"O",fontCmd:"mathbb"},:{letter:"P",fontCmd:"mathbb"},:{letter:"Q",fontCmd:"mathbb"},:{letter:"R",fontCmd:"mathbb"},"":{letter:"S",fontCmd:"mathbb"},"":{letter:"T",fontCmd:"mathbb"},"":{letter:"U",fontCmd:"mathbb"},"":{letter:"V",fontCmd:"mathbb"},"":{letter:"W",fontCmd:"mathbb"},"":{letter:"X",fontCmd:"mathbb"},"":{letter:"Y",fontCmd:"mathbb"},:{letter:"Z",fontCmd:"mathbb"},"":{letter:"0",fontCmd:"mathbb"},"":{letter:"1",fontCmd:"mathbb"},"":{letter:"2",fontCmd:"mathbb"},"":{letter:"3",fontCmd:"mathbb"},"":{letter:"4",fontCmd:"mathbb"},"":{letter:"5",fontCmd:"mathbb"},"":{letter:"6",fontCmd:"mathbb"},"":{letter:"7",fontCmd:"mathbb"},"":{letter:"8",fontCmd:"mathbb"},"":{letter:"9",fontCmd:"mathbb"},"":{letter:"A",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathcal"},:{letter:"B",fontCmd:"mathcal"},"":{letter:"C",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},:{letter:"E",fontCmd:"mathcal"},:{letter:"F",fontCmd:"mathcal"},"":{letter:"F",fontCmd:"mathcal"},"":{letter:"G",fontCmd:"mathcal"},:{letter:"H",fontCmd:"mathcal"},:{letter:"I",fontCmd:"mathcal"},"":{letter:"J",fontCmd:"mathcal"},"":{letter:"K",fontCmd:"mathcal"},:{letter:"L",fontCmd:"mathcal"},"":{letter:"L",fontCmd:"mathcal"},:{letter:"M",fontCmd:"mathcal"},"":{letter:"N",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"P",fontCmd:"mathcal"},"":{letter:"Q",fontCmd:"mathcal"},:{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"S",fontCmd:"mathcal"},"":{letter:"T",fontCmd:"mathcal"},"":{letter:"U",fontCmd:"mathcal"},"":{letter:"V",fontCmd:"mathcal"},"":{letter:"W",fontCmd:"mathcal"},"":{letter:"X",fontCmd:"mathcal"},"":{letter:"Y",fontCmd:"mathcal"},"":{letter:"Z",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathfrak"},"":{letter:"B",fontCmd:"mathfrak"},:{letter:"C",fontCmd:"mathfrak"},"":{letter:"D",fontCmd:"mathfrak"},"":{letter:"E",fontCmd:"mathfrak"},"":{letter:"F",fontCmd:"mathfrak"},"":{letter:"G",fontCmd:"mathfrak"},:{letter:"H",fontCmd:"mathfrak"},:{letter:"I",fontCmd:"mathfrak"},"":{letter:"J",fontCmd:"mathfrak"},"":{letter:"K",fontCmd:"mathfrak"},"":{letter:"L",fontCmd:"mathfrak"},"":{letter:"M",fontCmd:"mathfrak"},"":{letter:"N",fontCmd:"mathfrak"},"":{letter:"O",fontCmd:"mathfrak"},"":{letter:"P",fontCmd:"mathfrak"},"":{letter:"Q",fontCmd:"mathfrak"},:{letter:"R",fontCmd:"mathfrak"},"":{letter:"S",fontCmd:"mathfrak"},"":{letter:"T",fontCmd:"mathfrak"},"":{letter:"U",fontCmd:"mathfrak"},"":{letter:"V",fontCmd:"mathfrak"},"":{letter:"W",fontCmd:"mathfrak"},"":{letter:"X",fontCmd:"mathfrak"},"":{letter:"Y",fontCmd:"mathfrak"},:{letter:"Z",fontCmd:"mathfrak"},"":{letter:"A",fontCmd:"mathsf"},:{letter:"A",fontCmd:"mathsf"},"":{letter:"B",fontCmd:"mathsf"},:{letter:"B",fontCmd:"mathsf"},"":{letter:"C",fontCmd:"mathsf"},"":{letter:"D",fontCmd:"mathsf"},"":{letter:"E",fontCmd:"mathsf"},"":{letter:"F",fontCmd:"mathsf"},"":{letter:"G",fontCmd:"mathsf"},"":{letter:"H",fontCmd:"mathsf"},"":{letter:"I",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"K",fontCmd:"mathsf"},:{letter:"K",fontCmd:"mathsf"},"":{letter:"L",fontCmd:"mathsf"},"":{letter:"M",fontCmd:"mathsf"},"":{letter:"N",fontCmd:"mathsf"},"":{letter:"O",fontCmd:"mathsf"},"":{letter:"P",fontCmd:"mathsf"},"":{letter:"Q",fontCmd:"mathsf"},"":{letter:"R",fontCmd:"mathsf"},"":{letter:"S",fontCmd:"mathsf"},"":{letter:"T",fontCmd:"mathsf"},"":{letter:"U",fontCmd:"mathsf"},"":{letter:"V",fontCmd:"mathsf"},"":{letter:"W",fontCmd:"mathsf"},"":{letter:"X",fontCmd:"mathsf"},:{letter:"X",fontCmd:"mathsf"},"":{letter:"Y",fontCmd:"mathsf"},"":{letter:"Z",fontCmd:"mathsf"},"":{letter:"A",fontCmd:"mathtt"},"":{letter:"B",fontCmd:"mathtt"},"":{letter:"\\Gamma",fontCmd:"mathtt"},"":{letter:"\\Delta",fontCmd:"mathtt"},"":{letter:"E",fontCmd:"mathtt"},"":{letter:"F",fontCmd:"mathtt"},"":{letter:"G",fontCmd:"mathtt"},"":{letter:"\\Theta",fontCmd:"mathtt"},"":{letter:"I",fontCmd:"mathtt"},"":{letter:"J",fontCmd:"mathtt"},"":{letter:"\\Lambda",fontCmd:"mathtt"},"":{letter:"L",fontCmd:"mathtt"},"":{letter:"M",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"O",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"Q",fontCmd:"mathtt"},"":{letter:"R",fontCmd:"mathtt"},"":{letter:"S",fontCmd:"mathtt"},"":{letter:"T",fontCmd:"mathtt"},"":{letter:"U",fontCmd:"mathtt"},"":{letter:"\\Phi",fontCmd:"mathtt"},"":{letter:"W",fontCmd:"mathtt"},"":{letter:"\\Psi",fontCmd:"mathtt"},"":{letter:"\\Omega",fontCmd:"mathtt"}}}},s={};function l(c){var d=s[c];if(d!==void 0)return d.exports;var Ct=s[c]={exports:{}};return a[c].call(Ct.exports,Ct,Ct.exports,l),Ct.exports}var u={};return(()=>{var c=u;Object.defineProperty(c,"__esModule",{value:!0}),c.MathMLToLaTeX=void 0;var d=l(8672);Object.defineProperty(c,"MathMLToLaTeX",{enumerable:!0,get:function(){return d.MathMLToLaTeX}})})(),u})()))})(bundle_min$1)),bundle_min$1.exports}var bundle_minExports=requireBundle_min();function DangerousSetIn({mathMLString:t}){return jsxRuntimeExports.jsx("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:{__html:t}})}function DisplayMathML({title:t,mathML:n,textResult:a,caclDone:s}){const[l,u]=reactExports.useState(!1),[c,d]=reactExports.useState(!1);return s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Snackbar,{open:l,autoHideDuration:1e4,onClose:()=>u(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["LaTeX copied to your clipboard. Here's a free online latex editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://latexeditor.lagrida.com/",target:"_blank",children:"https://latexeditor.lagrida.com/"})]})})}),jsxRuntimeExports.jsx(Snackbar,{open:c,autoHideDuration:1e4,onClose:()=>d(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["MathML copied to your clipboard. Here's a free online MathML editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://codepen.io/bqlou/pen/yOgbmb",target:"_blank",children:"https://codepen.io/bqlou/pen/yOgbmb"})]})})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,children:[jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:10},children:[jsxRuntimeExports.jsx(Grid$1,{size:12,sx:{my:2},children:jsxRuntimeExports.jsx("h3",{children:t})}),jsxRuntimeExports.jsx(Grid$1,{size:12,style:{overflow:"auto"},sx:{fontSize:"1.6em",minHeight:"55px"},children:jsxRuntimeExports.jsx(DangerousSetIn,{mathMLString:n})})]}),jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:2},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{const Ct=bundle_minExports.MathMLToLaTeX.convert(n);navigator.clipboard.writeText(Ct),u(!0)},children:"Copy LaTeX"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{navigator.clipboard.writeText(n),d(!0)},children:"Copy MathML"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{var Ct=encodeURIComponent(a),ar=`https://www.wolframalpha.com/input?i2d=true&i=${Ct}`;window.open(ar,"_blank")},children:"Wolfram Alpha"})]})]})]}):null}const GitHubIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}));function getLinkUtilityClass(t){return generateUtilityClass("MuiLink",t)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),getTextDecoration=({theme:t,ownerState:n})=>{const a=n.color;if("colorSpace"in t&&t.colorSpace){const u=getPath(t,`palette.${a}.main`)||getPath(t,`palette.${a}`)||n.color;return t.alpha(u,.4)}const s=getPath(t,`palette.${a}.main`,!1)||getPath(t,`palette.${a}`,!1)||n.color,l=getPath(t,`palette.${a}.mainChannel`)||getPath(t,`palette.${a}Channel`);return"vars"in t&&l?`rgba(${l} / 0.4)`:alpha$1(s,.4)},v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},useUtilityClasses$9=t=>{const{classes:n,component:a,focusVisible:s,underline:l}=t,u={root:["root",`underline${capitalize(l)}`,a==="button"&&"button",s&&"focusVisible"]};return composeClasses(u,getLinkUtilityClass,n)},LinkRoot=styled(Typography,{name:"MuiLink",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`underline${capitalize(a.underline)}`],a.component==="button"&&n.button]}})(memoTheme(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:n,ownerState:a})=>n==="always"&&a.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:n,ownerState:a})=>n==="always"&&a.color==="inherit",style:t.colorSpace?{textDecorationColor:t.alpha("currentColor",.4)}:null},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{underline:"always",color:n},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette[n].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses.focusVisible}`]:{outline:"auto"}}}]}))),Link=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiLink"}),l=useTheme(),{className:u,color:c="primary",component:d="a",onBlur:Ct,onFocus:ar,TypographyClasses:en,underline:tn="always",variant:on="inherit",sx:fn,...dn}=s,[Cn,Rn]=reactExports.useState(!1),ax=cx=>{isFocusVisible(cx.target)||Rn(!1),Ct&&Ct(cx)},ox=cx=>{isFocusVisible(cx.target)&&Rn(!0),ar&&ar(cx)},sx={...s,color:c,component:d,focusVisible:Cn,underline:tn,variant:on},lx=useUtilityClasses$9(sx);return jsxRuntimeExports.jsx(LinkRoot,{color:c,className:clsx(lx.root,u),classes:en,component:d,onBlur:ax,onFocus:ox,ref:a,ownerState:sx,variant:on,...dn,sx:[...v6Colors[c]===void 0?[{color:c}]:[],...Array.isArray(fn)?fn:[fn]],style:{...dn.style,...tn==="always"&&c!=="inherit"&&!v6Colors[c]&&{"--Link-underlineColor":getTextDecoration({theme:l,ownerState:sx})}}})});function Footer(){return jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1,mt:0},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:2},children:jsxRuntimeExports.jsx(Toolbar,{children:jsxRuntimeExports.jsxs(Stack,{spacing:1,sx:{width:"100%"},direction:{xs:"column",sm:"row"},children:[jsxRuntimeExports.jsxs(Typography,{sx:{flexGrow:1},children:[" ",new Date().getFullYear()," Will Kelsey. This work is licensed under a Creative Commons Attribution 4.0 International License. You may not resell this tool"]}),jsxRuntimeExports.jsx(Typography,{sx:{px:2},children:"v2.0"}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(GitHubIcon,{sx:{height:"24px",width:"24px",mr:1}}),jsxRuntimeExports.jsx(Link,{href:"https://github.com/28raining/circuit-solver",target:"_blank",color:"inherit",children:"https://github.com/28raining/circuit-solver"})]})]})})})})}function getCollapseUtilityClass(t){return generateUtilityClass("MuiCollapse",t)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const useUtilityClasses$8=t=>{const{orientation:n,classes:a}=t,s={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return composeClasses(s,getCollapseUtilityClass,a)},CollapseRoot=styled("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.state==="entered"&&n.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&n.hidden]}})(memoTheme(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:n})=>n.state==="exited"&&!n.in&&n.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),CollapseWrapper=styled("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),CollapseWrapperInner=styled("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Collapse=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiCollapse"}),{addEndListener:l,children:u,className:c,collapsedSize:d="0px",component:Ct,easing:ar,in:en,onEnter:tn,onEntered:on,onEntering:fn,onExit:dn,onExited:Cn,onExiting:Rn,orientation:ax="vertical",style:ox,timeout:sx=duration.standard,TransitionComponent:lx=Transition,...cx}=s,fx={...s,orientation:ax,collapsedSize:d},gx=useUtilityClasses$8(fx),mx=useTheme(),px=useTimeout(),hx=reactExports.useRef(null),vx=reactExports.useRef(),yx=typeof d=="number"?`${d}px`:d,Sx=ax==="horizontal",_x=Sx?"width":"height",Ex=reactExports.useRef(null),bx=useForkRef(a,Ex),Ax=Bx=>$x=>{if(Bx){const Vx=Ex.current;$x===void 0?Bx(Vx):Bx(Vx,$x)}},Mx=()=>hx.current?hx.current[Sx?"clientWidth":"clientHeight"]:0,Rx=Ax((Bx,$x)=>{hx.current&&Sx&&(hx.current.style.position="absolute"),Bx.style[_x]=yx,tn&&tn(Bx,$x)}),Cx=Ax((Bx,$x)=>{const Vx=Mx();hx.current&&Sx&&(hx.current.style.position="");const{duration:Gx,easing:Zx}=getTransitionProps({style:ox,timeout:sx,easing:ar},{mode:"enter"});if(sx==="auto"){const jx=mx.transitions.getAutoHeightDuration(Vx);Bx.style.transitionDuration=`${jx}ms`,vx.current=jx}else Bx.style.transitionDuration=typeof Gx=="string"?Gx:`${Gx}ms`;Bx.style[_x]=`${Vx}px`,Bx.style.transitionTimingFunction=Zx,fn&&fn(Bx,$x)}),Lx=Ax((Bx,$x)=>{Bx.style[_x]="auto",on&&on(Bx,$x)}),qx=Ax(Bx=>{Bx.style[_x]=`${Mx()}px`,dn&&dn(Bx)}),Ix=Ax(Cn),Px=Ax(Bx=>{const $x=Mx(),{duration:Vx,easing:Gx}=getTransitionProps({style:ox,timeout:sx,easing:ar},{mode:"exit"});if(sx==="auto"){const Zx=mx.transitions.getAutoHeightDuration($x);Bx.style.transitionDuration=`${Zx}ms`,vx.current=Zx}else Bx.style.transitionDuration=typeof Vx=="string"?Vx:`${Vx}ms`;Bx.style[_x]=yx,Bx.style.transitionTimingFunction=Gx,Rn&&Rn(Bx)}),Nx=Bx=>{sx==="auto"&&px.start(vx.current||0,Bx),l&&l(Ex.current,Bx)};return jsxRuntimeExports.jsx(lx,{in:en,onEnter:Rx,onEntered:Lx,onEntering:Cx,onExit:qx,onExited:Ix,onExiting:Px,addEndListener:Nx,nodeRef:Ex,timeout:sx==="auto"?null:sx,...cx,children:(Bx,{ownerState:$x,...Vx})=>jsxRuntimeExports.jsx(CollapseRoot,{as:Ct,className:clsx(gx.root,c,{entered:gx.entered,exited:!en&&yx==="0px"&&gx.hidden}[Bx]),style:{[Sx?"minWidth":"minHeight"]:yx,...ox},ref:bx,ownerState:{...fx,state:Bx},...Vx,children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:{...fx,state:Bx},className:gx.wrapper,ref:hx,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:{...fx,state:Bx},className:gx.wrapperInner,children:u})})})})});Collapse&&(Collapse.muiSupportAuto=!0);const AccordionContext=reactExports.createContext({});function getAccordionUtilityClass(t){return generateUtilityClass("MuiAccordion",t)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),useUtilityClasses$7=t=>{const{classes:n,square:a,expanded:s,disabled:l,disableGutters:u}=t;return composeClasses({root:["root",!a&&"rounded",s&&"expanded",l&&"disabled",!u&&"gutters"],heading:["heading"],region:["region"]},getAccordionUtilityClass,n)},AccordionRoot=styled(Paper,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${accordionClasses.region}`]:n.region},n.root,!a.square&&n.rounded,!a.disableGutters&&n.gutters]}})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${accordionClasses.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${accordionClasses.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),memoTheme(({theme:t})=>({variants:[{props:n=>!n.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:n=>!n.disableGutters,style:{[`&.${accordionClasses.expanded}`]:{margin:"16px 0"}}}]}))),AccordionHeading=styled("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),AccordionRegion=styled("div",{name:"MuiAccordion",slot:"Region"})({}),Accordion=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordion"}),{children:l,className:u,defaultExpanded:c=!1,disabled:d=!1,disableGutters:Ct=!1,expanded:ar,onChange:en,square:tn=!1,slots:on={},slotProps:fn={},TransitionComponent:dn,TransitionProps:Cn,...Rn}=s,[ax,ox]=useControlled({controlled:ar,default:c,name:"Accordion",state:"expanded"}),sx=reactExports.useCallback(Cx=>{ox(!ax),en&&en(Cx,!ax)},[ax,en,ox]),[lx,...cx]=reactExports.Children.toArray(l),fx=reactExports.useMemo(()=>({expanded:ax,disabled:d,disableGutters:Ct,toggle:sx}),[ax,d,Ct,sx]),gx={...s,square:tn,disabled:d,disableGutters:Ct,expanded:ax},mx=useUtilityClasses$7(gx),px={transition:dn,...on},hx={transition:Cn,...fn},vx={slots:px,slotProps:hx},[yx,Sx]=useSlot("root",{elementType:AccordionRoot,externalForwardedProps:{...vx,...Rn},className:clsx(mx.root,u),shouldForwardComponentProp:!0,ownerState:gx,ref:a,additionalProps:{square:tn}}),[_x,Ex]=useSlot("heading",{elementType:AccordionHeading,externalForwardedProps:vx,className:mx.heading,ownerState:gx}),[bx,Ax]=useSlot("transition",{elementType:Collapse,externalForwardedProps:vx,ownerState:gx}),[Mx,Rx]=useSlot("region",{elementType:AccordionRegion,externalForwardedProps:vx,ownerState:gx,className:mx.region,additionalProps:{"aria-labelledby":lx.props.id,id:lx.props["aria-controls"],role:"region"}});return jsxRuntimeExports.jsxs(yx,{...Sx,children:[jsxRuntimeExports.jsx(_x,{...Ex,children:jsxRuntimeExports.jsx(AccordionContext.Provider,{value:fx,children:lx})}),jsxRuntimeExports.jsx(bx,{in:ax,timeout:"auto",...Ax,children:jsxRuntimeExports.jsx(Mx,{...Rx,children:cx})})]})});function getAccordionSummaryUtilityClass(t){return generateUtilityClass("MuiAccordionSummary",t)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),useUtilityClasses$6=t=>{const{classes:n,expanded:a,disabled:s,disableGutters:l}=t;return composeClasses({root:["root",a&&"expanded",s&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},getAccordionSummaryUtilityClass,n)},AccordionSummaryRoot=styled(ButtonBase,{name:"MuiAccordionSummary",slot:"Root"})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${accordionSummaryClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${accordionSummaryClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${accordionSummaryClasses.expanded}`]:{minHeight:64}}}]}})),AccordionSummaryContent=styled("span",{name:"MuiAccordionSummary",slot:"Content"})(memoTheme(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:n=>!n.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{margin:"20px 0"}}}]}))),AccordionSummaryExpandIconWrapper=styled("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(memoTheme(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{transform:"rotate(180deg)"}}))),AccordionSummary=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordionSummary"}),{children:l,className:u,expandIcon:c,focusVisibleClassName:d,onClick:Ct,slots:ar,slotProps:en,...tn}=s,{disabled:on=!1,disableGutters:fn,expanded:dn,toggle:Cn}=reactExports.useContext(AccordionContext),Rn=hx=>{Cn&&Cn(hx),Ct&&Ct(hx)},ax={...s,expanded:dn,disabled:on,disableGutters:fn},ox=useUtilityClasses$6(ax),sx={slots:ar,slotProps:en},[lx,cx]=useSlot("root",{ref:a,shouldForwardComponentProp:!0,className:clsx(ox.root,u),elementType:AccordionSummaryRoot,externalForwardedProps:{...sx,...tn},ownerState:ax,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:on,"aria-expanded":dn,focusVisibleClassName:clsx(ox.focusVisible,d)},getSlotProps:hx=>({...hx,onClick:vx=>{hx.onClick?.(vx),Rn(vx)}})}),[fx,gx]=useSlot("content",{className:ox.content,elementType:AccordionSummaryContent,externalForwardedProps:sx,ownerState:ax}),[mx,px]=useSlot("expandIconWrapper",{className:ox.expandIconWrapper,elementType:AccordionSummaryExpandIconWrapper,externalForwardedProps:sx,ownerState:ax});return jsxRuntimeExports.jsxs(lx,{...cx,children:[jsxRuntimeExports.jsx(fx,{...gx,children:l}),c&&jsxRuntimeExports.jsx(mx,{...px,children:c})]})});function getAccordionDetailsUtilityClass(t){return generateUtilityClass("MuiAccordionDetails",t)}generateUtilityClasses("MuiAccordionDetails",["root"]);const useUtilityClasses$5=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,n)},AccordionDetailsRoot=styled("div",{name:"MuiAccordionDetails",slot:"Root"})(memoTheme(({theme:t})=>({padding:t.spacing(1,2,2)}))),AccordionDetails=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordionDetails"}),{className:l,...u}=s,c=s,d=useUtilityClasses$5(c);return jsxRuntimeExports.jsx(AccordionDetailsRoot,{className:clsx(d.root,l),ref:a,ownerState:c,...u})}),ArrowDownwardIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),TableContext=reactExports.createContext();function getTableUtilityClass(t){return generateUtilityClass("MuiTable",t)}generateUtilityClasses("MuiTable",["root","stickyHeader"]);const useUtilityClasses$4=t=>{const{classes:n,stickyHeader:a}=t;return composeClasses({root:["root",a&&"stickyHeader"]},getTableUtilityClass,n)},TableRoot=styled("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:n})=>n.stickyHeader,style:{borderCollapse:"separate"}}]}))),defaultComponent$3="table",Table=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTable"}),{className:l,component:u=defaultComponent$3,padding:c="normal",size:d="medium",stickyHeader:Ct=!1,...ar}=s,en={...s,component:u,padding:c,size:d,stickyHeader:Ct},tn=useUtilityClasses$4(en),on=reactExports.useMemo(()=>({padding:c,size:d,stickyHeader:Ct}),[c,d,Ct]);return jsxRuntimeExports.jsx(TableContext.Provider,{value:on,children:jsxRuntimeExports.jsx(TableRoot,{as:u,role:u===defaultComponent$3?null:"table",ref:a,className:clsx(tn.root,l),ownerState:en,...ar})})}),Tablelvl2Context=reactExports.createContext();function getTableBodyUtilityClass(t){return generateUtilityClass("MuiTableBody",t)}generateUtilityClasses("MuiTableBody",["root"]);const useUtilityClasses$3=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableBodyUtilityClass,n)},TableBodyRoot=styled("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),tablelvl2$1={variant:"body"},defaultComponent$2="tbody",TableBody=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableBody"}),{className:l,component:u=defaultComponent$2,...c}=s,d={...s,component:u},Ct=useUtilityClasses$3(d);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2$1,children:jsxRuntimeExports.jsx(TableBodyRoot,{className:clsx(Ct.root,l),as:u,ref:a,role:u===defaultComponent$2?null:"rowgroup",ownerState:d,...c})})});function getTableCellUtilityClass(t){return generateUtilityClass("MuiTableCell",t)}const tableCellClasses=generateUtilityClasses("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),useUtilityClasses$2=t=>{const{classes:n,variant:a,align:s,padding:l,size:u,stickyHeader:c}=t,d={root:["root",a,c&&"stickyHeader",s!=="inherit"&&`align${capitalize(s)}`,l!=="normal"&&`padding${capitalize(l)}`,`size${capitalize(u)}`]};return composeClasses(d,getTableCellUtilityClass,n)},TableCellRoot=styled("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`size${capitalize(a.size)}`],a.padding!=="normal"&&n[`padding${capitalize(a.padding)}`],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${tableCellClasses.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:n})=>n.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),TableCell=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableCell"}),{align:l="inherit",className:u,component:c,padding:d,scope:Ct,size:ar,sortDirection:en,variant:tn,...on}=s,fn=reactExports.useContext(TableContext),dn=reactExports.useContext(Tablelvl2Context),Cn=dn&&dn.variant==="head";let Rn;c?Rn=c:Rn=Cn?"th":"td";let ax=Ct;Rn==="td"?ax=void 0:!ax&&Cn&&(ax="col");const ox=tn||dn&&dn.variant,sx={...s,align:l,component:Rn,padding:d||(fn&&fn.padding?fn.padding:"normal"),size:ar||(fn&&fn.size?fn.size:"medium"),sortDirection:en,stickyHeader:ox==="head"&&fn&&fn.stickyHeader,variant:ox},lx=useUtilityClasses$2(sx);let cx=null;return en&&(cx=en==="asc"?"ascending":"descending"),jsxRuntimeExports.jsx(TableCellRoot,{as:Rn,ref:a,className:clsx(lx.root,u),"aria-sort":cx,scope:ax,ownerState:sx,...on})});function getTableHeadUtilityClass(t){return generateUtilityClass("MuiTableHead",t)}generateUtilityClasses("MuiTableHead",["root"]);const useUtilityClasses$1=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableHeadUtilityClass,n)},TableHeadRoot=styled("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),tablelvl2={variant:"head"},defaultComponent$1="thead",TableHead=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableHead"}),{className:l,component:u=defaultComponent$1,...c}=s,d={...s,component:u},Ct=useUtilityClasses$1(d);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2,children:jsxRuntimeExports.jsx(TableHeadRoot,{as:u,className:clsx(Ct.root,l),ref:a,role:u===defaultComponent$1?null:"rowgroup",ownerState:d,...c})})});function getTableRowUtilityClass(t){return generateUtilityClass("MuiTableRow",t)}const tableRowClasses=generateUtilityClasses("MuiTableRow",["root","selected","hover","head","footer"]),useUtilityClasses=t=>{const{classes:n,selected:a,hover:s,head:l,footer:u}=t;return composeClasses({root:["root",a&&"selected",s&&"hover",l&&"head",u&&"footer"]},getTableRowUtilityClass,n)},TableRowRoot=styled("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.head&&n.head,a.footer&&n.footer]}})(memoTheme(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${tableRowClasses.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${tableRowClasses.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),defaultComponent="tr",TableRow=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableRow"}),{className:l,component:u=defaultComponent,hover:c=!1,selected:d=!1,...Ct}=s,ar=reactExports.useContext(Tablelvl2Context),en={...s,component:u,hover:c,selected:d,head:ar&&ar.variant==="head",footer:ar&&ar.variant==="footer"},tn=useUtilityClasses(en);return jsxRuntimeExports.jsx(TableRowRoot,{as:u,ref:a,className:clsx(tn.root,l),role:u===defaultComponent?null:"row",ownerState:en,...Ct})});function ReleaseNotes(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Accordion,{className:"bg-lightgreen",children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ArrowDownwardIcon,{}),"aria-controls":"panel1-content",id:"panel1-header",children:jsxRuntimeExports.jsx(Typography,{component:"span",children:"Release Notes"})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsxs(Table,{size:"small",sx:{"& .MuiTableCell-root":{border:"1px solid #ccc"}},children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#f5f5f5"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Version"}),jsxRuntimeExports.jsx(TableCell,{children:"Date"}),jsxRuntimeExports.jsx(TableCell,{children:"Notes"})]})}),jsxRuntimeExports.jsx(TableBody,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"v2.0"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"July 2025"})}),jsxRuntimeExports.jsxs(TableCell,{children:[jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Site moved from will-kelsey.com/circuitSolver to onlinecircuitsolver.com"}),jsxRuntimeExports.jsxs("li",{children:["The user 'reactions' to the old site were: 27 angry, 3 laugh, 3 sad, 5 wow, 15 love and 29 superb. The angry people weren't leaving comments but I think the reasons were:",jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"It doesn't work on touch devices including ipad"}),jsxRuntimeExports.jsx("li",{children:"It could crash, like when you drag one componenct directly on top of another"}),jsxRuntimeExports.jsx("li",{children:"Limited features compared to industial tools"})]}),"Now it works on touch because I developed visiojs (https://www.npmjs.com/package/visiojs). Also visiojs replaces draw2d which was the source of all the crashing. This site isn't feature rich - it's original purpose was to create Laplace transforms. But it does run MNA in the background so many more features could be added"]}),jsxRuntimeExports.jsx("li",{children:"Moved to React + MUI + NPM. This allows: running lint, more maintainable code, smaller file size, many micro-benefits from joining the mainstream"}),jsxRuntimeExports.jsx("li",{children:"As well as a re-write, the following new features are added:"}),jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:"Adding 2 vprobes"})})]}),"There is one open item I want to do, which is add Python SymPy. Currently the algebraic solver is Algebrite + Yaffle - and they do an amazing job to inverse and simplify an algebraic matrix. However, SymPy can simplify better, and can swap out the algebra to make pretty numberic results"]})]})})]})})]})})}function b(t){if(document.querySelector(`script[src="${t}"]`))return;const n=document.createElement("script");n.src=t,n.async=!0,n.type="module",document.head.appendChild(n)}function h(t,n){for(const[a,s]of Object.entries(n))s!=null&&t.setAttribute(a,s.toString())}const E=["loaded","comment:published","comment:edited","comment:deleted","comment:voted","comment:flagged","reaction","rating","auth:login:clicked","profile:clicked"];class y{static script(n){n=n||"https://talk.hyvor.com",b(`${n}/embed/embed.js`)}static comments(n,a,s){y.script(n.instance);const l=document.createElement("hyvor-talk-comments");for(let[u,c]of Object.entries(n))if(c!=null){if(u==="translations"&&typeof c=="object"){for(let[d,Ct]of Object.entries(c))d=d.replace("_","-"),l.setAttribute(`t-${d}`,Ct);continue}u==="settings"&&(c=JSON.stringify(c)),l.setAttribute(u,c)}return s&&E.forEach(u=>{l.addEventListener(u,c=>{s(u,c.detail)})}),a.appendChild(l),l}}const k$1="https://talk.hyvor.com";class w{static script(n){n=n||k$1,b(`${n}/embed/comment-counts.js`)}static commentCount(n,a){w.script(n.instance);const s=document.createElement("hyvor-talk-comment-count");return h(s,n),a.appendChild(s),s}static load(n={},a=null){w.script(),customElements.whenDefined("hyvor-talk-comment-count").then(()=>{window.hyvorTalkCommentCounts.load(n,a)})}}class C{static script(n){n=n||k$1,b(`${n}/embed/newsletter.js`)}static form(n,a){C.script(n.instance);const s=document.createElement("hyvor-talk-newsletter");return h(s,n),a.appendChild(s),s}}const g=["loaded","subscription:created","subscription:success","subscription:updated"];class v{static script(n){n=n||k$1,b(`${n}/embed/memberships.js`)}static memberships(n,a,s){v.script(n.instance);const l=document.createElement("hyvor-talk-memberships");return h(l,n),s&&g.forEach(u=>{l.addEventListener(u,c=>{s(u,c.detail)})}),a=a||document.body,a.appendChild(l),l}static gatedContent(n,a){const s=document.createElement("hyvor-talk-gated-content");return h(s,n),a.appendChild(s),s}}const $=reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),{on:l,...u}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=y.comments(u,a.current,(c,d)=>{var Ct;const ar=(Ct=t.on)==null?void 0:Ct[c];ar&&typeof ar=="function"&&ar(d)}),()=>{var c;(c=s.current)==null||c.remove()}),[]),React.createElement("div",{className:"ht-comments-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=w.commentCount(t,a.current),()=>{var l;(l=s.current)==null||l.remove()}),[]),React.createElement("span",{className:"ht-comment-count-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=C.form(t,a.current),()=>{var l;(l=s.current)==null||l.remove()}),[]),React.createElement("div",{className:"ht-newsletter-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),{on:l,...u}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=v.memberships(u,a.current,(c,d)=>{var Ct;const ar=(Ct=t.on)==null?void 0:Ct[c];ar&&typeof ar=="function"&&ar(d)}),()=>{var c;(c=s.current)==null||c.remove()}),[]),React.createElement("div",{className:"ht-memberships-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>{const l={...t};return l._key&&(l.key=l._key,delete l._key),s.current=v.gatedContent(l,a.current),()=>{var u;(u=s.current)==null||u.remove()}},[]),React.createElement("div",{className:"ht-gated-content-wrap",ref:a})});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},extendStatics(t,n)};function __extends(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(n){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},__assign.apply(this,arguments)},Browser=(function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t})(),Env=(function(){function t(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t})(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(t,n){var a=n.browser,s=t.match(/Firefox\/([\d.]+)/),l=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),u=t.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(t);s&&(a.firefox=!0,a.version=s[1]),l&&(a.ie=!0,a.version=l[1]),u&&(a.edge=!0,a.version=u[1],a.newEdge=+u[1].split(".")[0]>18),c&&(a.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,n.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11),n.domSupported=typeof document<"u";var d=document.documentElement.style;n.transform3dSupported=(a.ie&&"transition"in d||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in d)&&!("OTransition"in d),n.transformSupported=n.transform3dSupported||a.ie&&+a.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(t){var n={};if(typeof JSON>"u")return n;for(var a=0;a<t.length;a++){var s=String.fromCharCode(a+32),l=(t.charCodeAt(a)-OFFSET)/SCALE;n[s]=l}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var t,n;return function(a,s){if(!t){var l=platformApi.createCanvas();t=l&&l.getContext("2d")}if(t)return n!==s&&(n=t.font=s||DEFAULT_FONT),t.measureText(a);a=a||"",s=s||DEFAULT_FONT;var u=/((?:\d+)?\.?\d*)px/.exec(s),c=u&&+u[1]||DEFAULT_FONT_SIZE,d=0;if(s.indexOf("mono")>=0)d=c*a.length;else for(var Ct=0;Ct<a.length;Ct++){var ar=DEFAULT_TEXT_WIDTH_MAP[a[Ct]];d+=ar==null?c:ar*c}return{width:d}}})(),loadImage:function(t,n,a){var s=new Image;return s.onload=n,s.onerror=a,s.src=t,s}};function setPlatformAPI(t){for(var n in platformApi)t[n]&&(platformApi[n]=t[n])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,n){return t["[object "+n+"]"]=!0,t},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,n){return t["[object "+n+"Array]"]=!0,t},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];typeof console<"u"&&console.error.apply(console,t)}function clone$4(t){if(t==null||typeof t!="object")return t;var n=t,a=objToString.call(t);if(a==="[object Array]"){if(!isPrimitive(t)){n=[];for(var s=0,l=t.length;s<l;s++)n[s]=clone$4(t[s])}}else if(TYPED_ARRAY[a]){if(!isPrimitive(t)){var u=t.constructor;if(u.from)n=u.from(t);else{n=new u(t.length);for(var s=0,l=t.length;s<l;s++)n[s]=t[s]}}}else if(!BUILTIN_OBJECT[a]&&!isPrimitive(t)&&!isDom(t)){n={};for(var c in t)t.hasOwnProperty(c)&&c!==protoKey&&(n[c]=clone$4(t[c]))}return n}function merge(t,n,a){if(!isObject$3(n)||!isObject$3(t))return a?clone$4(n):t;for(var s in n)if(n.hasOwnProperty(s)&&s!==protoKey){var l=t[s],u=n[s];isObject$3(u)&&isObject$3(l)&&!isArray$1(u)&&!isArray$1(l)&&!isDom(u)&&!isDom(l)&&!isBuiltInObject(u)&&!isBuiltInObject(l)&&!isPrimitive(u)&&!isPrimitive(l)?merge(l,u,a):(a||!(s in t))&&(t[s]=clone$4(n[s]))}return t}function mergeAll(t,n){for(var a=t[0],s=1,l=t.length;s<l;s++)a=merge(a,t[s],n);return a}function extend(t,n){if(Object.assign)Object.assign(t,n);else for(var a in n)n.hasOwnProperty(a)&&a!==protoKey&&(t[a]=n[a]);return t}function defaults(t,n,a){for(var s=keys(n),l=0,u=s.length;l<u;l++){var c=s[l];(a?n[c]!=null:t[c]==null)&&(t[c]=n[c])}return t}var createCanvas=platformApi.createCanvas;function indexOf(t,n){if(t){if(t.indexOf)return t.indexOf(n);for(var a=0,s=t.length;a<s;a++)if(t[a]===n)return a}return-1}function inherits(t,n){var a=t.prototype;function s(){}s.prototype=n.prototype,t.prototype=new s;for(var l in a)a.hasOwnProperty(l)&&(t.prototype[l]=a[l]);t.prototype.constructor=t,t.superClass=n}function mixin(t,n,a){if(t="prototype"in t?t.prototype:t,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var s=Object.getOwnPropertyNames(n),l=0;l<s.length;l++){var u=s[l];u!=="constructor"&&(a?n[u]!=null:t[u]==null)&&(t[u]=n[u])}else defaults(t,n,a)}function isArrayLike(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function each$f(t,n,a){if(t&&n)if(t.forEach&&t.forEach===nativeForEach)t.forEach(n,a);else if(t.length===+t.length)for(var s=0,l=t.length;s<l;s++)n.call(a,t[s],s,t);else for(var u in t)t.hasOwnProperty(u)&&n.call(a,t[u],u,t)}function map$1(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.map&&t.map===nativeMap)return t.map(n,a);for(var s=[],l=0,u=t.length;l<u;l++)s.push(n.call(a,t[l],l,t));return s}function reduce(t,n,a,s){if(t&&n){for(var l=0,u=t.length;l<u;l++)a=n.call(s,a,t[l],l,t);return a}}function filter(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.filter&&t.filter===nativeFilter)return t.filter(n,a);for(var s=[],l=0,u=t.length;l<u;l++)n.call(a,t[l],l,t)&&s.push(t[l]);return s}function find(t,n,a){if(t&&n){for(var s=0,l=t.length;s<l;s++)if(n.call(a,t[s],s,t))return t[s]}}function keys(t){if(!t)return[];if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n}function bindPolyfill(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return function(){return t.apply(n,a.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$1(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return t.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(t){return Array.isArray?Array.isArray(t):objToString.call(t)==="[object Array]"}function isFunction$1(t){return typeof t=="function"}function isString$1(t){return typeof t=="string"}function isStringSafe(t){return objToString.call(t)==="[object String]"}function isNumber(t){return typeof t=="number"}function isObject$3(t){var n=typeof t;return n==="function"||!!t&&n==="object"}function isBuiltInObject(t){return!!BUILTIN_OBJECT[objToString.call(t)]}function isTypedArray(t){return!!TYPED_ARRAY[objToString.call(t)]}function isDom(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function isGradientObject(t){return t.colorStops!=null}function isImagePatternObject(t){return t.image!=null}function isRegExp(t){return objToString.call(t)==="[object RegExp]"}function eqNaN(t){return t!==t}function retrieve(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,s=t.length;a<s;a++)if(t[a]!=null)return t[a]}function retrieve2(t,n){return t??n}function retrieve3(t,n,a){return t??n??a}function slice(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return nativeSlice.apply(t,n)}function normalizeCssArray$1(t){if(typeof t=="number")return[t,t,t,t];var n=t.length;return n===2?[t[0],t[1],t[0],t[1]]:n===3?[t[0],t[1],t[2],t[1]]:t}function assert(t,n){if(!t)throw new Error(n)}function trim$1(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(t){t[primitiveKey]=!0}function isPrimitive(t){return t[primitiveKey]}var MapPolyfill=(function(){function t(){this.data={}}return t.prototype.delete=function(n){var a=this.has(n);return a&&delete this.data[n],a},t.prototype.has=function(n){return this.data.hasOwnProperty(n)},t.prototype.get=function(n){return this.data[n]},t.prototype.set=function(n,a){return this.data[n]=a,this},t.prototype.keys=function(){return keys(this.data)},t.prototype.forEach=function(n){var a=this.data;for(var s in a)a.hasOwnProperty(s)&&n(a[s],s)},t})(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=(function(){function t(n){var a=isArray$1(n);this.data=maybeNativeMap();var s=this;n instanceof t?n.each(l):n&&each$f(n,l);function l(u,c){a?s.set(u,c):s.set(c,u)}}return t.prototype.hasKey=function(n){return this.data.has(n)},t.prototype.get=function(n){return this.data.get(n)},t.prototype.set=function(n,a){return this.data.set(n,a),a},t.prototype.each=function(n,a){this.data.forEach(function(s,l){n.call(a,s,l)})},t.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},t.prototype.removeKey=function(n){this.data.delete(n)},t})();function createHashMap(t){return new HashMap(t)}function concatArray(t,n){for(var a=new t.constructor(t.length+n.length),s=0;s<t.length;s++)a[s]=t[s];for(var l=t.length,s=0;s<n.length;s++)a[s+l]=n[s];return a}function createObject(t,n){var a;if(Object.create)a=Object.create(t);else{var s=function(){};s.prototype=t,a=new s}return n&&extend(a,n),a}function disableUserSelect(t){var n=t.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(t,n){return t.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$1,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString:isString$1,isStringSafe,isTypedArray,keys,logError,map:map$1,merge,mergeAll,mixin,noop,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));function create$2(t,n){return t==null&&(t=0),n==null&&(n=0),[t,n]}function copy$1(t,n){return t[0]=n[0],t[1]=n[1],t}function clone$3(t){return[t[0],t[1]]}function set$1(t,n,a){return t[0]=n,t[1]=a,t}function add(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function scaleAndAdd$1(t,n,a,s){return t[0]=n[0]+a[0]*s,t[1]=n[1]+a[1]*s,t}function sub(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function len(t){return Math.sqrt(lenSquare(t))}var length=len;function lenSquare(t){return t[0]*t[0]+t[1]*t[1]}var lengthSquare=lenSquare;function mul$1(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function div(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function dot(t,n){return t[0]*n[0]+t[1]*n[1]}function scale$2(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function normalize$3(t,n){var a=len(n);return a===0?(t[0]=0,t[1]=0):(t[0]=n[0]/a,t[1]=n[1]/a),t}function distance(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}var dist$1=distance;function distanceSquare(t,n){return(t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1])}var distSquare=distanceSquare;function negate(t,n){return t[0]=-n[0],t[1]=-n[1],t}function lerp$1(t,n,a,s){return t[0]=n[0]+s*(a[0]-n[0]),t[1]=n[1]+s*(a[1]-n[1]),t}function applyTransform$1(t,n,a){var s=n[0],l=n[1];return t[0]=a[0]*s+a[2]*l+a[4],t[1]=a[1]*s+a[3]*l+a[5],t}function min$1(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function max$1(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=(function(){function t(n,a){this.target=n,this.topTarget=a&&a.topTarget}return t})(),Draggable=(function(){function t(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(n){for(var a=n.target;a&&!a.draggable;)a=a.parent||a.__hostTarget;a&&(this._draggingTarget=a,a.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(a,n),"dragstart",n.event))},t.prototype._drag=function(n){var a=this._draggingTarget;if(a){var s=n.offsetX,l=n.offsetY,u=s-this._x,c=l-this._y;this._x=s,this._y=l,a.drift(u,c,n),this.handler.dispatchToElement(new Param(a,n),"drag",n.event);var d=this.handler.findHover(s,l,a).target,Ct=this._dropTarget;this._dropTarget=d,a!==d&&(Ct&&d!==Ct&&this.handler.dispatchToElement(new Param(Ct,n),"dragleave",n.event),d&&d!==Ct&&this.handler.dispatchToElement(new Param(d,n),"dragenter",n.event))}},t.prototype._dragEnd=function(n){var a=this._draggingTarget;a&&(a.dragging=!1),this.handler.dispatchToElement(new Param(a,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},t})(),Eventful=(function(){function t(n){n&&(this._$eventProcessor=n)}return t.prototype.on=function(n,a,s,l){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof a=="function"&&(l=s,s=a,a=null),!s||!n)return this;var c=this._$eventProcessor;a!=null&&c&&c.normalizeQuery&&(a=c.normalizeQuery(a)),u[n]||(u[n]=[]);for(var d=0;d<u[n].length;d++)if(u[n][d].h===s)return this;var Ct={h:s,query:a,ctx:l||this,callAtLast:s.zrEventfulCallAtLast},ar=u[n].length-1,en=u[n][ar];return en&&en.callAtLast?u[n].splice(ar,0,Ct):u[n].push(Ct),this},t.prototype.isSilent=function(n){var a=this._$handlers;return!a||!a[n]||!a[n].length},t.prototype.off=function(n,a){var s=this._$handlers;if(!s)return this;if(!n)return this._$handlers={},this;if(a){if(s[n]){for(var l=[],u=0,c=s[n].length;u<c;u++)s[n][u].h!==a&&l.push(s[n][u]);s[n]=l}s[n]&&s[n].length===0&&delete s[n]}else delete s[n];return this},t.prototype.trigger=function(n){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=a.length,d=l.length,Ct=0;Ct<d;Ct++){var ar=l[Ct];if(!(u&&u.filter&&ar.query!=null&&!u.filter(n,ar.query)))switch(c){case 0:ar.h.call(ar.ctx);break;case 1:ar.h.call(ar.ctx,a[0]);break;case 2:ar.h.call(ar.ctx,a[0],a[1]);break;default:ar.h.apply(ar.ctx,a);break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},t.prototype.triggerWithContext=function(n){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=a.length,d=a[c-1],Ct=l.length,ar=0;ar<Ct;ar++){var en=l[ar];if(!(u&&u.filter&&en.query!=null&&!u.filter(n,en.query)))switch(c){case 0:en.h.call(d);break;case 1:en.h.call(d,a[0]);break;case 2:en.h.call(d,a[0],a[1]);break;default:en.h.apply(d,a.slice(1,c-1));break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},t})(),LN2=Math.log(2);function determinant(t,n,a,s,l,u){var c=s+"-"+l,d=t.length;if(u.hasOwnProperty(c))return u[c];if(n===1){var Ct=Math.round(Math.log((1<<d)-1&~l)/LN2);return t[a][Ct]}for(var ar=s|1<<a,en=a+1;s&1<<en;)en++;for(var tn=0,on=0,fn=0;on<d;on++){var dn=1<<on;dn&l||(tn+=(fn%2?-1:1)*t[a][on]*determinant(t,n-1,en,ar,l|dn,u),fn++)}return u[c]=tn,tn}function buildTransformer(t,n){var a=[[t[0],t[1],1,0,0,0,-n[0]*t[0],-n[0]*t[1]],[0,0,0,t[0],t[1],1,-n[1]*t[0],-n[1]*t[1]],[t[2],t[3],1,0,0,0,-n[2]*t[2],-n[2]*t[3]],[0,0,0,t[2],t[3],1,-n[3]*t[2],-n[3]*t[3]],[t[4],t[5],1,0,0,0,-n[4]*t[4],-n[4]*t[5]],[0,0,0,t[4],t[5],1,-n[5]*t[4],-n[5]*t[5]],[t[6],t[7],1,0,0,0,-n[6]*t[6],-n[6]*t[7]],[0,0,0,t[6],t[7],1,-n[7]*t[6],-n[7]*t[7]]],s={},l=determinant(a,8,0,0,0,s);if(l!==0){for(var u=[],c=0;c<8;c++)for(var d=0;d<8;d++)u[d]==null&&(u[d]=0),u[d]+=((c+d)%2?-1:1)*determinant(a,7,c===0?1:0,1<<c,1<<d,s)/l*n[c];return function(Ct,ar,en){var tn=ar*u[6]+en*u[7]+1;Ct[0]=(ar*u[0]+en*u[1]+u[2])/tn,Ct[1]=(ar*u[3]+en*u[4]+u[5])/tn}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(t,n,a,s,l){return transformCoordWithViewport(_calcOut$1,n,s,l,!0)&&transformCoordWithViewport(t,a,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(t,n,a,s,l){if(n.getBoundingClientRect&&env.domSupported&&!isCanvasEl(n)){var u=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(n,u),d=preparePointerTransformer(c,u,l);if(d)return d(t,a,s),!0}return!1}function prepareCoordMarkers(t,n){var a=n.markers;if(a)return a;a=n.markers=[];for(var s=["left","right"],l=["top","bottom"],u=0;u<4;u++){var c=document.createElement("div"),d=c.style,Ct=u%2,ar=(u>>1)%2;d.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[Ct]+":0",l[ar]+":0",s[1-Ct]+":auto",l[1-ar]+":auto",""].join("!important;"),t.appendChild(c),a.push(c)}return a}function preparePointerTransformer(t,n,a){for(var s=a?"invTrans":"trans",l=n[s],u=n.srcCoords,c=[],d=[],Ct=!0,ar=0;ar<4;ar++){var en=t[ar].getBoundingClientRect(),tn=2*ar,on=en.left,fn=en.top;c.push(on,fn),Ct=Ct&&u&&on===u[tn]&&fn===u[tn+1],d.push(t[ar].offsetLeft,t[ar].offsetTop)}return Ct&&l?l:(n.srcCoords=c,n[s]=a?buildTransformer(d,c):buildTransformer(c,d))}function isCanvasEl(t){return t.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(t){return t==null?"":(t+"").replace(replaceReg,function(n,a){return replaceMap[a]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(t,n,a,s){return a=a||{},s?calculateZrXY(t,n,a):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(a.zrX=n.layerX,a.zrY=n.layerY):n.offsetX!=null?(a.zrX=n.offsetX,a.zrY=n.offsetY):calculateZrXY(t,n,a),a}function calculateZrXY(t,n,a){if(env.domSupported&&t.getBoundingClientRect){var s=n.clientX,l=n.clientY;if(isCanvasEl(t)){var u=t.getBoundingClientRect();a.zrX=s-u.left,a.zrY=l-u.top;return}else if(transformCoordWithViewport(_calcOut,t,s,l)){a.zrX=_calcOut[0],a.zrY=_calcOut[1];return}}a.zrX=a.zrY=0}function getNativeEvent(t){return t||window.event}function normalizeEvent(t,n,a){if(n=getNativeEvent(n),n.zrX!=null)return n;var s=n.type,l=s&&s.indexOf("touch")>=0;if(l){var c=s!=="touchend"?n.targetTouches[0]:n.changedTouches[0];c&&clientToLocal(t,c,n,a)}else{clientToLocal(t,n,n,a);var u=getWheelDeltaMayPolyfill(n);n.zrDelta=u?u/120:-(n.detail||0)/3}var d=n.button;return n.which==null&&d!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=d&1?1:d&2?3:d&4?2:0),n}function getWheelDeltaMayPolyfill(t){var n=t.wheelDelta;if(n)return n;var a=t.deltaX,s=t.deltaY;if(a==null||s==null)return n;var l=Math.abs(s!==0?s:a),u=s>0?-1:s<0?1:a>0?-1:1;return 3*l*u}function addEventListener(t,n,a,s){t.addEventListener(n,a,s)}function removeEventListener(t,n,a,s){t.removeEventListener(n,a,s)}var stop=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(t){return t.which===2||t.which===3}var GestureMgr=(function(){function t(){this._track=[]}return t.prototype.recognize=function(n,a,s){return this._doTrack(n,a,s),this._recognize(n)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(n,a,s){var l=n.touches;if(l){for(var u={points:[],touches:[],target:a,event:n},c=0,d=l.length;c<d;c++){var Ct=l[c],ar=clientToLocal(s,Ct,{});u.points.push([ar.zrX,ar.zrY]),u.touches.push(Ct)}this._track.push(u)}},t.prototype._recognize=function(n){for(var a in recognizers)if(recognizers.hasOwnProperty(a)){var s=recognizers[a](this._track,n);if(s)return s}},t})();function dist(t){var n=t[1][0]-t[0][0],a=t[1][1]-t[0][1];return Math.sqrt(n*n+a*a)}function center$1(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var recognizers={pinch:function(t,n){var a=t.length;if(a){var s=(t[a-1]||{}).points,l=(t[a-2]||{}).points||s;if(l&&l.length>1&&s&&s.length>1){var u=dist(s)/dist(l);!isFinite(u)&&(u=1),n.pinchScale=u;var c=center$1(s);return n.pinchX=c[0],n.pinchY=c[1],{type:"pinch",target:t[0].target,event:n}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function copy(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function mul(t,n,a){var s=n[0]*a[0]+n[2]*a[1],l=n[1]*a[0]+n[3]*a[1],u=n[0]*a[2]+n[2]*a[3],c=n[1]*a[2]+n[3]*a[3],d=n[0]*a[4]+n[2]*a[5]+n[4],Ct=n[1]*a[4]+n[3]*a[5]+n[5];return t[0]=s,t[1]=l,t[2]=u,t[3]=c,t[4]=d,t[5]=Ct,t}function translate(t,n,a){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4]+a[0],t[5]=n[5]+a[1],t}function rotate(t,n,a,s){s===void 0&&(s=[0,0]);var l=n[0],u=n[2],c=n[4],d=n[1],Ct=n[3],ar=n[5],en=Math.sin(a),tn=Math.cos(a);return t[0]=l*tn+d*en,t[1]=-l*en+d*tn,t[2]=u*tn+Ct*en,t[3]=-u*en+tn*Ct,t[4]=tn*(c-s[0])+en*(ar-s[1])+s[0],t[5]=tn*(ar-s[1])-en*(c-s[0])+s[1],t}function scale$1(t,n,a){var s=a[0],l=a[1];return t[0]=n[0]*s,t[1]=n[1]*l,t[2]=n[2]*s,t[3]=n[3]*l,t[4]=n[4]*s,t[5]=n[5]*l,t}function invert(t,n){var a=n[0],s=n[2],l=n[4],u=n[1],c=n[3],d=n[5],Ct=a*c-u*s;return Ct?(Ct=1/Ct,t[0]=c*Ct,t[1]=-u*Ct,t[2]=-s*Ct,t[3]=a*Ct,t[4]=(s*d-c*l)*Ct,t[5]=(u*l-a*d)*Ct,t):null}function clone$2(t){var n=create$1();return copy(n,t),n}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=(function(){function t(n,a){this.x=n||0,this.y=a||0}return t.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(n,a){return this.x=n,this.y=a,this},t.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},t.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},t.prototype.scale=function(n){this.x*=n,this.y*=n},t.prototype.scaleAndAdd=function(n,a){this.x+=n.x*a,this.y+=n.y*a},t.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},t.prototype.dot=function(n){return this.x*n.x+this.y*n.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},t.prototype.distance=function(n){var a=this.x-n.x,s=this.y-n.y;return Math.sqrt(a*a+s*s)},t.prototype.distanceSquare=function(n){var a=this.x-n.x,s=this.y-n.y;return a*a+s*s},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(n){if(n){var a=this.x,s=this.y;return this.x=n[0]*a+n[2]*s+n[4],this.y=n[1]*a+n[3]*s+n[5],this}},t.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},t.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},t.set=function(n,a,s){n.x=a,n.y=s},t.copy=function(n,a){n.x=a.x,n.y=a.y},t.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},t.lenSquare=function(n){return n.x*n.x+n.y*n.y},t.dot=function(n,a){return n.x*a.x+n.y*a.y},t.add=function(n,a,s){n.x=a.x+s.x,n.y=a.y+s.y},t.sub=function(n,a,s){n.x=a.x-s.x,n.y=a.y-s.y},t.scale=function(n,a,s){n.x=a.x*s,n.y=a.y*s},t.scaleAndAdd=function(n,a,s,l){n.x=a.x+s.x*l,n.y=a.y+s.y*l},t.lerp=function(n,a,s,l){var u=1-l;n.x=u*a.x+l*s.x,n.y=u*a.y+l*s.y},t})(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=(function(){function t(n,a,s,l){s<0&&(n=n+s,s=-s),l<0&&(a=a+l,l=-l),this.x=n,this.y=a,this.width=s,this.height=l}return t.prototype.union=function(n){var a=mathMin$a(n.x,this.x),s=mathMin$a(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(n.x+n.width,this.x+this.width)-a:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(n.y+n.height,this.y+this.height)-s:this.height=n.height,this.x=a,this.y=s},t.prototype.applyTransform=function(n){t.applyTransform(this,this,n)},t.prototype.calculateTransform=function(n){var a=this,s=n.width/a.width,l=n.height/a.height,u=create$1();return translate(u,u,[-a.x,-a.y]),scale$1(u,u,[s,l]),translate(u,u,[n.x,n.y]),u},t.prototype.intersect=function(n,a){if(!n)return!1;n instanceof t||(n=t.create(n));var s=this,l=s.x,u=s.x+s.width,c=s.y,d=s.y+s.height,Ct=n.x,ar=n.x+n.width,en=n.y,tn=n.y+n.height,on=!(u<Ct||ar<l||d<en||tn<c);if(a){var fn=1/0,dn=0,Cn=Math.abs(u-Ct),Rn=Math.abs(ar-l),ax=Math.abs(d-en),ox=Math.abs(tn-c),sx=Math.min(Cn,Rn),lx=Math.min(ax,ox);u<Ct||ar<l?sx>dn&&(dn=sx,Cn<Rn?Point.set(maxTv$1,-Cn,0):Point.set(maxTv$1,Rn,0)):sx<fn&&(fn=sx,Cn<Rn?Point.set(minTv$1,Cn,0):Point.set(minTv$1,-Rn,0)),d<en||tn<c?lx>dn&&(dn=lx,ax<ox?Point.set(maxTv$1,0,-ax):Point.set(maxTv$1,0,ox)):sx<fn&&(fn=sx,ax<ox?Point.set(minTv$1,0,ax):Point.set(minTv$1,0,-ox))}return a&&Point.copy(a,on?minTv$1:maxTv$1),on},t.prototype.contain=function(n,a){var s=this;return n>=s.x&&n<=s.x+s.width&&a>=s.y&&a<=s.y+s.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(n){t.copy(this,n)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(n){return new t(n.x,n.y,n.width,n.height)},t.copy=function(n,a){n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height},t.applyTransform=function(n,a,s){if(!s){n!==a&&t.copy(n,a);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){var l=s[0],u=s[3],c=s[4],d=s[5];n.x=a.x*l+c,n.y=a.y*u+d,n.width=a.width*l,n.height=a.height*u,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=a.x,lt.y=rt.y=a.y,rb.x=rt.x=a.x+a.width,rb.y=lb.y=a.y+a.height,lt.transform(s),rt.transform(s),rb.transform(s),lb.transform(s),n.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var Ct=mathMax$a(lt.x,rb.x,lb.x,rt.x),ar=mathMax$a(lt.y,rb.y,lb.y,rt.y);n.width=Ct-n.x,n.height=ar-n.y},t})(),SILENT="silent";function makeEventPacket(t,n,a){return{type:t,event:a,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.handler=null,a}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n})(Eventful),HoveredResult=(function(){function t(n,a){this.x=n,this.y=a}return t})(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this)||this;return d._hovered=new HoveredResult(0,0),d.storage=a,d.painter=s,d.painterRoot=u,d._pointerSize=c,l=l||new EmptyProxy,d.proxy=null,d.setHandlerProxy(l),d._draggingMgr=new Draggable(d),d}return n.prototype.setHandlerProxy=function(a){this.proxy&&this.proxy.dispose(),a&&(each$f(handlerNames,function(s){a.on&&a.on(s,this[s],this)},this),a.handler=this),this.proxy=a},n.prototype.mousemove=function(a){var s=a.zrX,l=a.zrY,u=isOutsideBoundary(this,s,l),c=this._hovered,d=c.target;d&&!d.__zr&&(c=this.findHover(c.x,c.y),d=c.target);var Ct=this._hovered=u?new HoveredResult(s,l):this.findHover(s,l),ar=Ct.target,en=this.proxy;en.setCursor&&en.setCursor(ar?ar.cursor:"default"),d&&ar!==d&&this.dispatchToElement(c,"mouseout",a),this.dispatchToElement(Ct,"mousemove",a),ar&&ar!==d&&this.dispatchToElement(Ct,"mouseover",a)},n.prototype.mouseout=function(a){var s=a.zrEventControl;s!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",a),s!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:a})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(a,s){var l=this[a];l&&l.call(this,s)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(a){var s=this.proxy;s.setCursor&&s.setCursor(a)},n.prototype.dispatchToElement=function(a,s,l){a=a||{};var u=a.target;if(!(u&&u.silent)){for(var c="on"+s,d=makeEventPacket(s,a,l);u&&(u[c]&&(d.cancelBubble=!!u[c].call(u,d)),u.trigger(s,d),u=u.__hostTarget?u.__hostTarget:u.parent,!d.cancelBubble););d.cancelBubble||(this.trigger(s,d),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(Ct){typeof Ct[c]=="function"&&Ct[c].call(Ct,d),Ct.trigger&&Ct.trigger(s,d)}))}},n.prototype.findHover=function(a,s,l){var u=this.storage.getDisplayList(),c=new HoveredResult(a,s);if(setHoverTarget(u,c,a,s,l),this._pointerSize&&!c.target){for(var d=[],Ct=this._pointerSize,ar=Ct/2,en=new BoundingRect(a-ar,s-ar,Ct,Ct),tn=u.length-1;tn>=0;tn--){var on=u[tn];on!==l&&!on.ignore&&!on.ignoreCoarsePointer&&(!on.parent||!on.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(on.getBoundingRect()),on.transform&&tmpRect$1.applyTransform(on.transform),tmpRect$1.intersect(en)&&d.push(on))}if(d.length)for(var fn=4,dn=Math.PI/12,Cn=Math.PI*2,Rn=0;Rn<ar;Rn+=fn)for(var ax=0;ax<Cn;ax+=dn){var ox=a+Rn*Math.cos(ax),sx=s+Rn*Math.sin(ax);if(setHoverTarget(d,c,ox,sx,l),c.target)return c}}return c},n.prototype.processGesture=function(a,s){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;s==="start"&&l.clear();var u=l.recognize(a,this.findHover(a.zrX,a.zrY,null).target,this.proxy.dom);if(s==="end"&&l.clear(),u){var c=u.type;a.gestureEvent=c;var d=new HoveredResult;d.target=u.target,this.dispatchToElement(d,c,u.event)}},n})(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Handler.prototype[t]=function(n){var a=n.zrX,s=n.zrY,l=isOutsideBoundary(this,a,s),u,c;if((t!=="mouseup"||!l)&&(u=this.findHover(a,s),c=u.target),t==="mousedown")this._downEl=c,this._downPoint=[n.zrX,n.zrY],this._upEl=c;else if(t==="mouseup")this._upEl=c;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,t,n)}});function isHover(t,n,a){if(t[t.rectHover?"rectContain":"contain"](n,a)){for(var s=t,l=void 0,u=!1;s;){if(s.ignoreClip&&(u=!0),!u){var c=s.getClipPath();if(c&&!c.contain(n,a))return!1}s.silent&&(l=!0);var d=s.__hostTarget;s=d||s.parent}return l?SILENT:!0}return!1}function setHoverTarget(t,n,a,s,l){for(var u=t.length-1;u>=0;u--){var c=t[u],d=void 0;if(c!==l&&!c.ignore&&(d=isHover(c,a,s))&&(!n.topTarget&&(n.topTarget=c),d!==SILENT)){n.target=c;break}}}function isOutsideBoundary(t,n,a){var s=t.painter;return n<0||n>s.getWidth()||a<0||a>s.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(t){for(var n=0;t>=DEFAULT_MIN_MERGE;)n|=t&1,t>>=1;return t+n}function makeAscendingRun(t,n,a,s){var l=n+1;if(l===a)return 1;if(s(t[l++],t[n])<0){for(;l<a&&s(t[l],t[l-1])<0;)l++;reverseRun(t,n,l)}else for(;l<a&&s(t[l],t[l-1])>=0;)l++;return l-n}function reverseRun(t,n,a){for(a--;n<a;){var s=t[n];t[n++]=t[a],t[a--]=s}}function binaryInsertionSort(t,n,a,s,l){for(s===n&&s++;s<a;s++){for(var u=t[s],c=n,d=s,Ct;c<d;)Ct=c+d>>>1,l(u,t[Ct])<0?d=Ct:c=Ct+1;var ar=s-c;switch(ar){case 3:t[c+3]=t[c+2];case 2:t[c+2]=t[c+1];case 1:t[c+1]=t[c];break;default:for(;ar>0;)t[c+ar]=t[c+ar-1],ar--}t[c]=u}}function gallopLeft(t,n,a,s,l,u){var c=0,d=0,Ct=1;if(u(t,n[a+l])>0){for(d=s-l;Ct<d&&u(t,n[a+l+Ct])>0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d),c+=l,Ct+=l}else{for(d=l+1;Ct<d&&u(t,n[a+l-Ct])<=0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d);var ar=c;c=l-Ct,Ct=l-ar}for(c++;c<Ct;){var en=c+(Ct-c>>>1);u(t,n[a+en])>0?c=en+1:Ct=en}return Ct}function gallopRight(t,n,a,s,l,u){var c=0,d=0,Ct=1;if(u(t,n[a+l])<0){for(d=l+1;Ct<d&&u(t,n[a+l-Ct])<0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d);var ar=c;c=l-Ct,Ct=l-ar}else{for(d=s-l;Ct<d&&u(t,n[a+l+Ct])>=0;)c=Ct,Ct=(Ct<<1)+1,Ct<=0&&(Ct=d);Ct>d&&(Ct=d),c+=l,Ct+=l}for(c++;c<Ct;){var en=c+(Ct-c>>>1);u(t,n[a+en])<0?Ct=en:c=en+1}return Ct}function TimSort(t,n){var a=DEFAULT_MIN_GALLOPING,s,l,u=0,c=[];s=[],l=[];function d(fn,dn){s[u]=fn,l[u]=dn,u+=1}function Ct(){for(;u>1;){var fn=u-2;if(fn>=1&&l[fn-1]<=l[fn]+l[fn+1]||fn>=2&&l[fn-2]<=l[fn]+l[fn-1])l[fn-1]<l[fn+1]&&fn--;else if(l[fn]>l[fn+1])break;en(fn)}}function ar(){for(;u>1;){var fn=u-2;fn>0&&l[fn-1]<l[fn+1]&&fn--,en(fn)}}function en(fn){var dn=s[fn],Cn=l[fn],Rn=s[fn+1],ax=l[fn+1];l[fn]=Cn+ax,fn===u-3&&(s[fn+1]=s[fn+2],l[fn+1]=l[fn+2]),u--;var ox=gallopRight(t[Rn],t,dn,Cn,0,n);dn+=ox,Cn-=ox,Cn!==0&&(ax=gallopLeft(t[dn+Cn-1],t,Rn,ax,ax-1,n),ax!==0&&(Cn<=ax?tn(dn,Cn,Rn,ax):on(dn,Cn,Rn,ax)))}function tn(fn,dn,Cn,Rn){var ax=0;for(ax=0;ax<dn;ax++)c[ax]=t[fn+ax];var ox=0,sx=Cn,lx=fn;if(t[lx++]=t[sx++],--Rn===0){for(ax=0;ax<dn;ax++)t[lx+ax]=c[ox+ax];return}if(dn===1){for(ax=0;ax<Rn;ax++)t[lx+ax]=t[sx+ax];t[lx+Rn]=c[ox];return}for(var cx=a,fx,gx,mx;;){fx=0,gx=0,mx=!1;do if(n(t[sx],c[ox])<0){if(t[lx++]=t[sx++],gx++,fx=0,--Rn===0){mx=!0;break}}else if(t[lx++]=c[ox++],fx++,gx=0,--dn===1){mx=!0;break}while((fx|gx)<cx);if(mx)break;do{if(fx=gallopRight(t[sx],c,ox,dn,0,n),fx!==0){for(ax=0;ax<fx;ax++)t[lx+ax]=c[ox+ax];if(lx+=fx,ox+=fx,dn-=fx,dn<=1){mx=!0;break}}if(t[lx++]=t[sx++],--Rn===0){mx=!0;break}if(gx=gallopLeft(c[ox],t,sx,Rn,0,n),gx!==0){for(ax=0;ax<gx;ax++)t[lx+ax]=t[sx+ax];if(lx+=gx,sx+=gx,Rn-=gx,Rn===0){mx=!0;break}}if(t[lx++]=c[ox++],--dn===1){mx=!0;break}cx--}while(fx>=DEFAULT_MIN_GALLOPING||gx>=DEFAULT_MIN_GALLOPING);if(mx)break;cx<0&&(cx=0),cx+=2}if(a=cx,a<1&&(a=1),dn===1){for(ax=0;ax<Rn;ax++)t[lx+ax]=t[sx+ax];t[lx+Rn]=c[ox]}else{if(dn===0)throw new Error;for(ax=0;ax<dn;ax++)t[lx+ax]=c[ox+ax]}}function on(fn,dn,Cn,Rn){var ax=0;for(ax=0;ax<Rn;ax++)c[ax]=t[Cn+ax];var ox=fn+dn-1,sx=Rn-1,lx=Cn+Rn-1,cx=0,fx=0;if(t[lx--]=t[ox--],--dn===0){for(cx=lx-(Rn-1),ax=0;ax<Rn;ax++)t[cx+ax]=c[ax];return}if(Rn===1){for(lx-=dn,ox-=dn,fx=lx+1,cx=ox+1,ax=dn-1;ax>=0;ax--)t[fx+ax]=t[cx+ax];t[lx]=c[sx];return}for(var gx=a;;){var mx=0,px=0,hx=!1;do if(n(c[sx],t[ox])<0){if(t[lx--]=t[ox--],mx++,px=0,--dn===0){hx=!0;break}}else if(t[lx--]=c[sx--],px++,mx=0,--Rn===1){hx=!0;break}while((mx|px)<gx);if(hx)break;do{if(mx=dn-gallopRight(c[sx],t,fn,dn,dn-1,n),mx!==0){for(lx-=mx,ox-=mx,dn-=mx,fx=lx+1,cx=ox+1,ax=mx-1;ax>=0;ax--)t[fx+ax]=t[cx+ax];if(dn===0){hx=!0;break}}if(t[lx--]=c[sx--],--Rn===1){hx=!0;break}if(px=Rn-gallopLeft(t[ox],c,0,Rn,Rn-1,n),px!==0){for(lx-=px,sx-=px,Rn-=px,fx=lx+1,cx=sx+1,ax=0;ax<px;ax++)t[fx+ax]=c[cx+ax];if(Rn<=1){hx=!0;break}}if(t[lx--]=t[ox--],--dn===0){hx=!0;break}gx--}while(mx>=DEFAULT_MIN_GALLOPING||px>=DEFAULT_MIN_GALLOPING);if(hx)break;gx<0&&(gx=0),gx+=2}if(a=gx,a<1&&(a=1),Rn===1){for(lx-=dn,ox-=dn,fx=lx+1,cx=ox+1,ax=dn-1;ax>=0;ax--)t[fx+ax]=t[cx+ax];t[lx]=c[sx]}else{if(Rn===0)throw new Error;for(cx=lx-(Rn-1),ax=0;ax<Rn;ax++)t[cx+ax]=c[ax]}}return{mergeRuns:Ct,forceMergeRuns:ar,pushRun:d}}function sort$2(t,n,a,s){a||(a=0),s||(s=t.length);var l=s-a;if(!(l<2)){var u=0;if(l<DEFAULT_MIN_MERGE){u=makeAscendingRun(t,a,s,n),binaryInsertionSort(t,a,s,a+u,n);return}var c=TimSort(t,n),d=minRunLength(l);do{if(u=makeAscendingRun(t,a,s,n),u<d){var Ct=l;Ct>d&&(Ct=d),binaryInsertionSort(t,a,a+Ct,a+u,n),u=Ct}c.pushRun(a,u),c.mergeRuns(),l-=u,a+=u}while(l!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(t,n){return t.zlevel===n.zlevel?t.z===n.z?t.z2-n.z2:t.z-n.z:t.zlevel-n.zlevel}var Storage=(function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return t.prototype.traverse=function(n,a){for(var s=0;s<this._roots.length;s++)this._roots[s].traverse(n,a)},t.prototype.getDisplayList=function(n,a){a=a||!1;var s=this._displayList;return(n||!s.length)&&this.updateDisplayList(a),s},t.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var a=this._roots,s=this._displayList,l=0,u=a.length;l<u;l++)this._updateAndAddDisplayable(a[l],null,n);s.length=this._displayListLen,sort$2(s,shapeCompareFunc)},t.prototype._updateAndAddDisplayable=function(n,a,s){if(!(n.ignore&&!s)){n.beforeUpdate(),n.update(),n.afterUpdate();var l=n.getClipPath();if(n.ignoreClip)a=null;else if(l){a?a=a.slice():a=[];for(var u=l,c=n;u;)u.parent=c,u.updateTransform(),a.push(u),c=u,u=u.getClipPath()}if(n.childrenRef){for(var d=n.childrenRef(),Ct=0;Ct<d.length;Ct++){var ar=d[Ct];n.__dirty&&(ar.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(ar,a,s)}n.__dirty=0}else{var en=n;a&&a.length?en.__clipPaths=a:en.__clipPaths&&en.__clipPaths.length>0&&(en.__clipPaths=[]),isNaN(en.z)&&(logInvalidZError(),en.z=0),isNaN(en.z2)&&(logInvalidZError(),en.z2=0),isNaN(en.zlevel)&&(logInvalidZError(),en.zlevel=0),this._displayList[this._displayListLen++]=en}var tn=n.getDecalElement&&n.getDecalElement();tn&&this._updateAndAddDisplayable(tn,a,s);var on=n.getTextGuideLine();on&&this._updateAndAddDisplayable(on,a,s);var fn=n.getTextContent();fn&&this._updateAndAddDisplayable(fn,a,s)}},t.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},t.prototype.delRoot=function(n){if(n instanceof Array){for(var a=0,s=n.length;a<s;a++)this.delRoot(n[a]);return}var l=indexOf(this._roots,n);l>=0&&this._roots.splice(l,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t})(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var easingFuncs={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)))},elasticOut:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/s)+1)},elasticInOut:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)):a*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)*.5+1)},backIn:function(t){var n=1.70158;return t*t*((n+1)*t-n)},backOut:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},backInOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)},bounceIn:function(t){return 1-easingFuncs.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?easingFuncs.bounceIn(t*2)*.5:easingFuncs.bounceOut(t*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(t){return t>-EPSILON$4&&t<EPSILON$4}function isNotAroundZero$1(t){return t>EPSILON$4||t<-EPSILON$4}function cubicAt(t,n,a,s,l){var u=1-l;return u*u*(u*t+3*l*n)+l*l*(l*s+3*u*a)}function cubicDerivativeAt(t,n,a,s,l){var u=1-l;return 3*(((n-t)*u+2*(a-n)*l)*u+(s-a)*l*l)}function cubicRootAt(t,n,a,s,l,u){var c=s+3*(n-a)-t,d=3*(a-n*2+t),Ct=3*(n-t),ar=t-l,en=d*d-3*c*Ct,tn=d*Ct-9*c*ar,on=Ct*Ct-3*d*ar,fn=0;if(isAroundZero$1(en)&&isAroundZero$1(tn))if(isAroundZero$1(d))u[0]=0;else{var dn=-Ct/d;dn>=0&&dn<=1&&(u[fn++]=dn)}else{var Cn=tn*tn-4*en*on;if(isAroundZero$1(Cn)){var Rn=tn/en,dn=-d/c+Rn,ax=-Rn/2;dn>=0&&dn<=1&&(u[fn++]=dn),ax>=0&&ax<=1&&(u[fn++]=ax)}else if(Cn>0){var ox=mathSqrt$3(Cn),sx=en*d+1.5*c*(-tn+ox),lx=en*d+1.5*c*(-tn-ox);sx<0?sx=-mathPow$2(-sx,ONE_THIRD):sx=mathPow$2(sx,ONE_THIRD),lx<0?lx=-mathPow$2(-lx,ONE_THIRD):lx=mathPow$2(lx,ONE_THIRD);var dn=(-d-(sx+lx))/(3*c);dn>=0&&dn<=1&&(u[fn++]=dn)}else{var cx=(2*en*d-3*c*tn)/(2*mathSqrt$3(en*en*en)),fx=Math.acos(cx)/3,gx=mathSqrt$3(en),mx=Math.cos(fx),dn=(-d-2*gx*mx)/(3*c),ax=(-d+gx*(mx+THREE_SQRT*Math.sin(fx)))/(3*c),px=(-d+gx*(mx-THREE_SQRT*Math.sin(fx)))/(3*c);dn>=0&&dn<=1&&(u[fn++]=dn),ax>=0&&ax<=1&&(u[fn++]=ax),px>=0&&px<=1&&(u[fn++]=px)}}return fn}function cubicExtrema(t,n,a,s,l){var u=6*a-12*n+6*t,c=9*n+3*s-3*t-9*a,d=3*n-3*t,Ct=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var ar=-d/u;ar>=0&&ar<=1&&(l[Ct++]=ar)}}else{var en=u*u-4*c*d;if(isAroundZero$1(en))l[0]=-u/(2*c);else if(en>0){var tn=mathSqrt$3(en),ar=(-u+tn)/(2*c),on=(-u-tn)/(2*c);ar>=0&&ar<=1&&(l[Ct++]=ar),on>=0&&on<=1&&(l[Ct++]=on)}}return Ct}function cubicSubdivide(t,n,a,s,l,u){var c=(n-t)*l+t,d=(a-n)*l+n,Ct=(s-a)*l+a,ar=(d-c)*l+c,en=(Ct-d)*l+d,tn=(en-ar)*l+ar;u[0]=t,u[1]=c,u[2]=ar,u[3]=tn,u[4]=tn,u[5]=en,u[6]=Ct,u[7]=s}function cubicProjectPoint(t,n,a,s,l,u,c,d,Ct,ar,en){var tn,on=.005,fn=1/0,dn,Cn,Rn,ax;_v0[0]=Ct,_v0[1]=ar;for(var ox=0;ox<1;ox+=.05)_v1[0]=cubicAt(t,a,l,c,ox),_v1[1]=cubicAt(n,s,u,d,ox),Rn=distSquare(_v0,_v1),Rn<fn&&(tn=ox,fn=Rn);fn=1/0;for(var sx=0;sx<32&&!(on<EPSILON_NUMERIC);sx++)dn=tn-on,Cn=tn+on,_v1[0]=cubicAt(t,a,l,c,dn),_v1[1]=cubicAt(n,s,u,d,dn),Rn=distSquare(_v1,_v0),dn>=0&&Rn<fn?(tn=dn,fn=Rn):(_v2[0]=cubicAt(t,a,l,c,Cn),_v2[1]=cubicAt(n,s,u,d,Cn),ax=distSquare(_v2,_v0),Cn<=1&&ax<fn?(tn=Cn,fn=ax):on*=.5);return en&&(en[0]=cubicAt(t,a,l,c,tn),en[1]=cubicAt(n,s,u,d,tn)),mathSqrt$3(fn)}function cubicLength(t,n,a,s,l,u,c,d,Ct){for(var ar=t,en=n,tn=0,on=1/Ct,fn=1;fn<=Ct;fn++){var dn=fn*on,Cn=cubicAt(t,a,l,c,dn),Rn=cubicAt(n,s,u,d,dn),ax=Cn-ar,ox=Rn-en;tn+=Math.sqrt(ax*ax+ox*ox),ar=Cn,en=Rn}return tn}function quadraticAt$1(t,n,a,s){var l=1-s;return l*(l*t+2*s*n)+s*s*a}function quadraticDerivativeAt(t,n,a,s){return 2*((1-s)*(n-t)+s*(a-n))}function quadraticRootAt(t,n,a,s,l){var u=t-2*n+a,c=2*(n-t),d=t-s,Ct=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var ar=-d/c;ar>=0&&ar<=1&&(l[Ct++]=ar)}}else{var en=c*c-4*u*d;if(isAroundZero$1(en)){var ar=-c/(2*u);ar>=0&&ar<=1&&(l[Ct++]=ar)}else if(en>0){var tn=mathSqrt$3(en),ar=(-c+tn)/(2*u),on=(-c-tn)/(2*u);ar>=0&&ar<=1&&(l[Ct++]=ar),on>=0&&on<=1&&(l[Ct++]=on)}}return Ct}function quadraticExtremum(t,n,a){var s=t+a-2*n;return s===0?.5:(t-n)/s}function quadraticSubdivide(t,n,a,s,l){var u=(n-t)*s+t,c=(a-n)*s+n,d=(c-u)*s+u;l[0]=t,l[1]=u,l[2]=d,l[3]=d,l[4]=c,l[5]=a}function quadraticProjectPoint(t,n,a,s,l,u,c,d,Ct){var ar,en=.005,tn=1/0;_v0[0]=c,_v0[1]=d;for(var on=0;on<1;on+=.05){_v1[0]=quadraticAt$1(t,a,l,on),_v1[1]=quadraticAt$1(n,s,u,on);var fn=distSquare(_v0,_v1);fn<tn&&(ar=on,tn=fn)}tn=1/0;for(var dn=0;dn<32&&!(en<EPSILON_NUMERIC);dn++){var Cn=ar-en,Rn=ar+en;_v1[0]=quadraticAt$1(t,a,l,Cn),_v1[1]=quadraticAt$1(n,s,u,Cn);var fn=distSquare(_v1,_v0);if(Cn>=0&&fn<tn)ar=Cn,tn=fn;else{_v2[0]=quadraticAt$1(t,a,l,Rn),_v2[1]=quadraticAt$1(n,s,u,Rn);var ax=distSquare(_v2,_v0);Rn<=1&&ax<tn?(ar=Rn,tn=ax):en*=.5}}return Ct&&(Ct[0]=quadraticAt$1(t,a,l,ar),Ct[1]=quadraticAt$1(n,s,u,ar)),mathSqrt$3(tn)}function quadraticLength(t,n,a,s,l,u,c){for(var d=t,Ct=n,ar=0,en=1/c,tn=1;tn<=c;tn++){var on=tn*en,fn=quadraticAt$1(t,a,l,on),dn=quadraticAt$1(n,s,u,on),Cn=fn-d,Rn=dn-Ct;ar+=Math.sqrt(Cn*Cn+Rn*Rn),d=fn,Ct=dn}return ar}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(t){var n=t&&regexp.exec(t);if(n){var a=n[1].split(","),s=+trim$1(a[0]),l=+trim$1(a[1]),u=+trim$1(a[2]),c=+trim$1(a[3]);if(isNaN(s+l+u+c))return;var d=[];return function(Ct){return Ct<=0?0:Ct>=1?1:cubicRootAt(0,s,u,1,Ct,d)&&cubicAt(0,l,c,1,d[0])}}}var Clip=(function(){function t(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return t.prototype.step=function(n,a){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=a;return}var s=this._life,l=n-this._startTime-this._pausedTime,u=l/s;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,d=c?c(u):u;if(this.onframe(d),u===1)if(this.loop){var Ct=l%s;this._startTime=n-Ct,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction$1(n)?n:easingFuncs[n]||createCubicEasingFunc(n)},t})(),Entry=(function(){function t(n){this.value=n}return t})(),LinkedList=(function(){function t(){this._len=0}return t.prototype.insert=function(n){var a=new Entry(n);return this.insertEntry(a),a},t.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},t.prototype.remove=function(n){var a=n.prev,s=n.next;a?a.next=s:this.head=s,s?s.prev=a:this.tail=a,n.next=n.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t})(),LRU=(function(){function t(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return t.prototype.put=function(n,a){var s=this._list,l=this._map,u=null;if(l[n]==null){var c=s.len(),d=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var Ct=s.head;s.remove(Ct),delete l[Ct.key],u=Ct.value,this._lastRemovedEntry=Ct}d?d.value=a:d=new Entry(a),d.key=n,s.insertEntry(d),l[n]=d}return u},t.prototype.get=function(n){var a=this._map[n],s=this._list;if(a!=null)return a!==s.tail&&(s.remove(a),s.insertEntry(a)),a.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t})(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(t){return t=Math.round(t),t<0?0:t>255?255:t}function clampCssAngle(t){return t=Math.round(t),t<0?0:t>360?360:t}function clampCssFloat(t){return t<0?0:t>1?1:t}function parseCssInt(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(t,n,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?t+(n-t)*a*6:a*2<1?n:a*3<2?t+(n-t)*(2/3-a)*6:t}function lerpNumber(t,n,a){return t+(n-t)*a}function setRgba(t,n,a,s,l){return t[0]=n,t[1]=a,t[2]=s,t[3]=l,t}function copyRgba(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(t,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(t,lastRemovedArr||n.slice())}function parse(t,n){if(t){n=n||[];var a=colorCache.get(t);if(a)return copyRgba(n,a);t=t+"";var s=t.replace(/ /g,"").toLowerCase();if(s in kCSSColorTable)return copyRgba(n,kCSSColorTable[s]),putToCache(t,n),n;var l=s.length;if(s.charAt(0)==="#"){if(l===4||l===5){var u=parseInt(s.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,l===5?parseInt(s.slice(4),16)/15:1),putToCache(t,n),n}else if(l===7||l===9){var u=parseInt(s.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&16711680)>>16,(u&65280)>>8,u&255,l===9?parseInt(s.slice(7),16)/255:1),putToCache(t,n),n}return}var c=s.indexOf("("),d=s.indexOf(")");if(c!==-1&&d+1===l){var Ct=s.substr(0,c),ar=s.substr(c+1,d-(c+1)).split(","),en=1;switch(Ct){case"rgba":if(ar.length!==4)return ar.length===3?setRgba(n,+ar[0],+ar[1],+ar[2],1):setRgba(n,0,0,0,1);en=parseCssFloat(ar.pop());case"rgb":if(ar.length>=3)return setRgba(n,parseCssInt(ar[0]),parseCssInt(ar[1]),parseCssInt(ar[2]),ar.length===3?en:parseCssFloat(ar[3])),putToCache(t,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(ar.length!==4){setRgba(n,0,0,0,1);return}return ar[3]=parseCssFloat(ar[3]),hsla2rgba(ar,n),putToCache(t,n),n;case"hsl":if(ar.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(ar,n),putToCache(t,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(t,n){var a=(parseFloat(t[0])%360+360)%360/360,s=parseCssFloat(t[1]),l=parseCssFloat(t[2]),u=l<=.5?l*(s+1):l+s-l*s,c=l*2-u;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(c,u,a+1/3)*255),clampCssByte(cssHueToRgb(c,u,a)*255),clampCssByte(cssHueToRgb(c,u,a-1/3)*255),1),t.length===4&&(n[3]=t[3]),n}function rgba2hsla(t){if(t){var n=t[0]/255,a=t[1]/255,s=t[2]/255,l=Math.min(n,a,s),u=Math.max(n,a,s),c=u-l,d=(u+l)/2,Ct,ar;if(c===0)Ct=0,ar=0;else{d<.5?ar=c/(u+l):ar=c/(2-u-l);var en=((u-n)/6+c/2)/c,tn=((u-a)/6+c/2)/c,on=((u-s)/6+c/2)/c;n===u?Ct=on-tn:a===u?Ct=1/3+en-on:s===u&&(Ct=2/3+tn-en),Ct<0&&(Ct+=1),Ct>1&&(Ct-=1)}var fn=[Ct*360,ar,d];return t[3]!=null&&fn.push(t[3]),fn}}function lift(t,n){var a=parse(t);if(a){for(var s=0;s<3;s++)n<0?a[s]=a[s]*(1-n)|0:a[s]=(255-a[s])*n+a[s]|0,a[s]>255?a[s]=255:a[s]<0&&(a[s]=0);return stringify(a,a.length===4?"rgba":"rgb")}}function toHex(t){var n=parse(t);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function fastLerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){a=a||[];var s=t*(n.length-1),l=Math.floor(s),u=Math.ceil(s),c=n[l],d=n[u],Ct=s-l;return a[0]=clampCssByte(lerpNumber(c[0],d[0],Ct)),a[1]=clampCssByte(lerpNumber(c[1],d[1],Ct)),a[2]=clampCssByte(lerpNumber(c[2],d[2],Ct)),a[3]=clampCssFloat(lerpNumber(c[3],d[3],Ct)),a}}var fastMapToColor=fastLerp;function lerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){var s=t*(n.length-1),l=Math.floor(s),u=Math.ceil(s),c=parse(n[l]),d=parse(n[u]),Ct=s-l,ar=stringify([clampCssByte(lerpNumber(c[0],d[0],Ct)),clampCssByte(lerpNumber(c[1],d[1],Ct)),clampCssByte(lerpNumber(c[2],d[2],Ct)),clampCssFloat(lerpNumber(c[3],d[3],Ct))],"rgba");return a?{color:ar,leftIndex:l,rightIndex:u,value:s}:ar}}var mapToColor=lerp;function modifyHSL(t,n,a,s){var l=parse(t);if(t)return l=rgba2hsla(l),n!=null&&(l[0]=clampCssAngle(n)),a!=null&&(l[1]=parseCssFloat(a)),s!=null&&(l[2]=parseCssFloat(s)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(t,n){var a=parse(t);if(a&&n!=null)return a[3]=clampCssFloat(n),stringify(a,"rgba")}function stringify(t,n){if(!(!t||!t.length)){var a=t[0]+","+t[1]+","+t[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(a+=","+t[3]),n+"("+a+")"}}function lum(t,n){var a=parse(t);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*n:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(t){if(isString$1(t)){var n=liftedColorCache.get(t);return n||(n=lift(t,-.1),liftedColorCache.put(t,n)),n}else if(isGradientObject(t)){var a=extend({},t);return a.colorStops=map$1(t.colorStops,function(s){return{offset:s.offset,color:lift(s.color,-.1)}}),a}return t}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(t){var n;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var a=parse(t);a&&(t="rgb("+a[0]+","+a[1]+","+a[2]+")",n=a[3])}return{color:t,opacity:n??1}}var EPSILON$3=1e-4;function isAroundZero(t){return t<EPSILON$3&&t>-EPSILON$3}function round3(t){return mathRound$1(t*1e3)/1e3}function round4(t){return mathRound$1(t*1e4)/1e4}function getMatrixStr(t){return"matrix("+round3(t[0])+","+round3(t[1])+","+round3(t[2])+","+round3(t[3])+","+round4(t[4])+","+round4(t[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(t,n,a){return a==="top"?t+=n/2:a==="bottom"&&(t-=n/2),t}function hasShadow(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function getShadowKey(t){var n=t.style,a=t.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),a[0],a[1]].join(",")}function isImagePattern(t){return t&&!!t.image}function isSVGPattern(t){return t&&!!t.svgElement}function isPattern(t){return isImagePattern(t)||isSVGPattern(t)}function isLinearGradient(t){return t.type==="linear"}function isRadialGradient(t){return t.type==="radial"}function isGradient(t){return t&&(t.type==="linear"||t.type==="radial")}function getIdURL(t){return"url(#"+t+")"}function getPathPrecision(t){var n=t.getGlobalScale(),a=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(a)/Math.log(10)),1)}function getSRTTransformString(t){var n=t.x||0,a=t.y||0,s=(t.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(t.scaleX,1),u=retrieve2(t.scaleY,1),c=t.skewX||0,d=t.skewY||0,Ct=[];return(n||a)&&Ct.push("translate("+n+"px,"+a+"px)"),s&&Ct.push("rotate("+s+")"),(l!==1||u!==1)&&Ct.push("scale("+l+","+u+")"),(c||d)&&Ct.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(d*RADIAN_TO_DEGREE)+"deg)"),Ct.join(" ")}var encodeBase64=(function(){return env.hasGlobalWindow&&isFunction$1(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}})(),arraySlice=Array.prototype.slice;function interpolateNumber$1(t,n,a){return(n-t)*a+t}function interpolate1DArray(t,n,a,s){for(var l=n.length,u=0;u<l;u++)t[u]=interpolateNumber$1(n[u],a[u],s);return t}function interpolate2DArray(t,n,a,s){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){t[c]||(t[c]=[]);for(var d=0;d<u;d++)t[c][d]=interpolateNumber$1(n[c][d],a[c][d],s)}return t}function add1DArray(t,n,a,s){for(var l=n.length,u=0;u<l;u++)t[u]=n[u]+a[u]*s;return t}function add2DArray(t,n,a,s){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){t[c]||(t[c]=[]);for(var d=0;d<u;d++)t[c][d]=n[c][d]+a[c][d]*s}return t}function fillColorStops(t,n){for(var a=t.length,s=n.length,l=a>s?n:t,u=Math.min(a,s),c=l[u-1]||{color:[0,0,0,0],offset:0},d=u;d<Math.max(a,s);d++)l.push({offset:c.offset,color:c.color.slice()})}function fillArray(t,n,a){var s=t,l=n;if(!(!s.push||!l.push)){var u=s.length,c=l.length;if(u!==c){var d=u>c;if(d)s.length=c;else for(var Ct=u;Ct<c;Ct++)s.push(a===1?l[Ct]:arraySlice.call(l[Ct]))}for(var ar=s[0]&&s[0].length,Ct=0;Ct<s.length;Ct++)if(a===1)isNaN(s[Ct])&&(s[Ct]=l[Ct]);else for(var en=0;en<ar;en++)isNaN(s[Ct][en])&&(s[Ct][en]=l[Ct][en])}}function cloneValue(t){if(isArrayLike(t)){var n=t.length;if(isArrayLike(t[0])){for(var a=[],s=0;s<n;s++)a.push(arraySlice.call(t[s]));return a}return arraySlice.call(t)}return t}function rgba2String(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function guessArrayDim(t){return isArrayLike(t&&t[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(t){return t===VALUE_TYPE_LINEAR_GRADIENT||t===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(t){return t===VALUE_TYPE_1D_ARRAY||t===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=(function(){function t(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(n,a,s){this._needsSort=!0;var l=this.keyframes,u=l.length,c=!1,d=VALUE_TYPE_UNKOWN,Ct=a;if(isArrayLike(a)){var ar=guessArrayDim(a);d=ar,(ar===1&&!isNumber(a[0])||ar===2&&!isNumber(a[0][0]))&&(c=!0)}else if(isNumber(a)&&!eqNaN(a))d=VALUE_TYPE_NUMBER;else if(isString$1(a))if(!isNaN(+a))d=VALUE_TYPE_NUMBER;else{var en=parse(a);en&&(Ct=en,d=VALUE_TYPE_COLOR)}else if(isGradientObject(a)){var tn=extend({},Ct);tn.colorStops=map$1(a.colorStops,function(fn){return{offset:fn.offset,color:parse(fn.color)}}),isLinearGradient(a)?d=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(a)&&(d=VALUE_TYPE_RADIAL_GRADIENT),Ct=tn}u===0?this.valType=d:(d!==this.valType||d===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var on={time:n,value:Ct,rawValue:a,percent:0};return s&&(on.easing=s,on.easingFunc=isFunction$1(s)?s:easingFuncs[s]||createCubicEasingFunc(s)),l.push(on),on},t.prototype.prepare=function(n,a){var s=this.keyframes;this._needsSort&&s.sort(function(Cn,Rn){return Cn.time-Rn.time});for(var l=this.valType,u=s.length,c=s[u-1],d=this.discrete,Ct=isArrayValueType(l),ar=isGradientValueType(l),en=0;en<u;en++){var tn=s[en],on=tn.value,fn=c.value;tn.percent=tn.time/n,d||(Ct&&en!==u-1?fillArray(on,fn,l):ar&&fillColorStops(on.colorStops,fn.colorStops))}if(!d&&l!==VALUE_TYPE_RADIAL_GRADIENT&&a&&this.needsAnimate()&&a.needsAnimate()&&l===a.valType&&!a._finished){this._additiveTrack=a;for(var dn=s[0].value,en=0;en<u;en++)l===VALUE_TYPE_NUMBER?s[en].additiveValue=s[en].value-dn:l===VALUE_TYPE_COLOR?s[en].additiveValue=add1DArray([],s[en].value,dn,-1):isArrayValueType(l)&&(s[en].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],s[en].value,dn,-1):add2DArray([],s[en].value,dn,-1))}},t.prototype.step=function(n,a){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var s=this._additiveTrack!=null,l=s?"additiveValue":"value",u=this.valType,c=this.keyframes,d=c.length,Ct=this.propName,ar=u===VALUE_TYPE_COLOR,en,tn=this._lastFr,on=Math.min,fn,dn;if(d===1)fn=dn=c[0];else{if(a<0)en=0;else if(a<this._lastFrP){var Cn=on(tn+1,d-1);for(en=Cn;en>=0&&!(c[en].percent<=a);en--);en=on(en,d-2)}else{for(en=tn;en<d&&!(c[en].percent>a);en++);en=on(en-1,d-2)}dn=c[en+1],fn=c[en]}if(fn&&dn){this._lastFr=en,this._lastFrP=a;var Rn=dn.percent-fn.percent,ax=Rn===0?1:on((a-fn.percent)/Rn,1);dn.easingFunc&&(ax=dn.easingFunc(ax));var ox=s?this._additiveValue:ar?tmpRgba:n[Ct];if((isArrayValueType(u)||ar)&&!ox&&(ox=this._additiveValue=[]),this.discrete)n[Ct]=ax<1?fn.rawValue:dn.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(ox,fn[l],dn[l],ax):interpolate2DArray(ox,fn[l],dn[l],ax);else if(isGradientValueType(u)){var sx=fn[l],lx=dn[l],cx=u===VALUE_TYPE_LINEAR_GRADIENT;n[Ct]={type:cx?"linear":"radial",x:interpolateNumber$1(sx.x,lx.x,ax),y:interpolateNumber$1(sx.y,lx.y,ax),colorStops:map$1(sx.colorStops,function(gx,mx){var px=lx.colorStops[mx];return{offset:interpolateNumber$1(gx.offset,px.offset,ax),color:rgba2String(interpolate1DArray([],gx.color,px.color,ax))}}),global:lx.global},cx?(n[Ct].x2=interpolateNumber$1(sx.x2,lx.x2,ax),n[Ct].y2=interpolateNumber$1(sx.y2,lx.y2,ax)):n[Ct].r=interpolateNumber$1(sx.r,lx.r,ax)}else if(ar)interpolate1DArray(ox,fn[l],dn[l],ax),s||(n[Ct]=rgba2String(ox));else{var fx=interpolateNumber$1(fn[l],dn[l],ax);s?this._additiveValue=fx:n[Ct]=fx}s&&this._addToTarget(n)}}},t.prototype._addToTarget=function(n){var a=this.valType,s=this.propName,l=this._additiveValue;a===VALUE_TYPE_NUMBER?n[s]=n[s]+l:a===VALUE_TYPE_COLOR?(parse(n[s],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),n[s]=rgba2String(tmpRgba)):a===VALUE_TYPE_1D_ARRAY?add1DArray(n[s],n[s],l,1):a===VALUE_TYPE_2D_ARRAY&&add2DArray(n[s],n[s],l,1)},t})(),Animator=(function(){function t(n,a,s,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=a,a&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=s}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(n){this._target=n},t.prototype.when=function(n,a,s){return this.whenWithKeys(n,a,keys(a),s)},t.prototype.whenWithKeys=function(n,a,s,l){for(var u=this._tracks,c=0;c<s.length;c++){var d=s[c],Ct=u[d];if(!Ct){Ct=u[d]=new Track(d);var ar=void 0,en=this._getAdditiveTrack(d);if(en){var tn=en.keyframes,on=tn[tn.length-1];ar=on&&on.value,en.valType===VALUE_TYPE_COLOR&&ar&&(ar=rgba2String(ar))}else ar=this._target[d];if(ar==null)continue;n>0&&Ct.addKeyframe(0,cloneValue(ar),l),this._trackKeys.push(d)}Ct.addKeyframe(n,cloneValue(a[d]),l)}return this._maxTime=Math.max(this._maxTime,n),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var a=n.length,s=0;s<a;s++)n[s].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,a=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,a)for(var s=0;s<a.length;s++)a[s].call(this)},t.prototype._setTracksFinished=function(){for(var n=this._tracks,a=this._trackKeys,s=0;s<a.length;s++)n[a[s]].setFinished()},t.prototype._getAdditiveTrack=function(n){var a,s=this._additiveAnimators;if(s)for(var l=0;l<s.length;l++){var u=s[l].getTrack(n);u&&(a=u)}return a},t.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var a=this,s=[],l=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],d=this._tracks[c],Ct=this._getAdditiveTrack(c),ar=d.keyframes,en=ar.length;if(d.prepare(l,Ct),d.needsAnimate())if(!this._allowDiscrete&&d.discrete){var tn=ar[en-1];tn&&(a._target[d.propName]=tn.rawValue),d.setFinished()}else s.push(d)}if(s.length||this._force){var on=new Clip({life:l,loop:this._loop,delay:this._delay||0,onframe:function(fn){a._started=2;var dn=a._additiveAnimators;if(dn){for(var Cn=!1,Rn=0;Rn<dn.length;Rn++)if(dn[Rn]._clip){Cn=!0;break}Cn||(a._additiveAnimators=null)}for(var Rn=0;Rn<s.length;Rn++)s[Rn].step(a._target,fn);var ax=a._onframeCbs;if(ax)for(var Rn=0;Rn<ax.length;Rn++)ax[Rn](a._target,fn)},ondestroy:function(){a._doneCallback()}});this._clip=on,this.animation&&this.animation.addClip(on),n&&on.setEasing(n)}else this._doneCallback();return this}},t.prototype.stop=function(n){if(this._clip){var a=this._clip;n&&a.onframe(1),this._abortedCallback()}},t.prototype.delay=function(n){return this._delay=n,this},t.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},t.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},t.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(n){return this._tracks[n]},t.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(a){return n._tracks[a]})},t.prototype.stopTracks=function(n,a){if(!n.length||!this._clip)return!0;for(var s=this._tracks,l=this._trackKeys,u=0;u<n.length;u++){var c=s[n[u]];c&&!c.isFinished()&&(a?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var d=!0,u=0;u<l.length;u++)if(!s[l[u]].isFinished()){d=!1;break}return d&&this._abortedCallback(),d},t.prototype.saveTo=function(n,a,s){if(n){a=a||this._trackKeys;for(var l=0;l<a.length;l++){var u=a[l],c=this._tracks[u];if(!(!c||c.isFinished())){var d=c.keyframes,Ct=d[s?0:d.length-1];Ct&&(n[u]=cloneValue(Ct.rawValue))}}}},t.prototype.__changeFinalValue=function(n,a){a=a||keys(n);for(var s=0;s<a.length;s++){var l=a[s],u=this._tracks[l];if(u){var c=u.keyframes;if(c.length>1){var d=c.pop();u.addKeyframe(d.time,n[l]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},t})();function getTime(){return new Date().getTime()}var Animation=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s._running=!1,s._time=0,s._pausedTime=0,s._pauseStart=0,s._paused=!1,a=a||{},s.stage=a.stage||{},s}return n.prototype.addClip=function(a){a.animation&&this.removeClip(a),this._head?(this._tail.next=a,a.prev=this._tail,a.next=null,this._tail=a):this._head=this._tail=a,a.animation=this},n.prototype.addAnimator=function(a){a.animation=this;var s=a.getClip();s&&this.addClip(s)},n.prototype.removeClip=function(a){if(a.animation){var s=a.prev,l=a.next;s?s.next=l:this._head=l,l?l.prev=s:this._tail=s,a.next=a.prev=a.animation=null}},n.prototype.removeAnimator=function(a){var s=a.getClip();s&&this.removeClip(s),a.animation=null},n.prototype.update=function(a){for(var s=getTime()-this._pausedTime,l=s-this._time,u=this._head;u;){var c=u.next,d=u.step(s,l);d&&(u.ondestroy(),this.removeClip(u)),u=c}this._time=s,a||(this.trigger("frame",l),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var a=this;this._running=!0;function s(){a._running&&(requestAnimationFrame$1(s),!a._paused&&a.update())}requestAnimationFrame$1(s)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var a=this._head;a;){var s=a.next;a.prev=a.next=a.animation=null,a=s}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(a,s){s=s||{},this.start();var l=new Animator(a,s.loop);return this.addAnimator(l),l},n})(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=(function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],a={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},s=map$1(t,function(l){var u=l.replace("mouse","pointer");return a.hasOwnProperty(u)?u:l});return{mouse:t,touch:n,pointer:s}})(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(t){var n=t.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function markTouch(t){t&&(t.zrByTouch=!0)}function normalizeGlobalEvent(t,n){return normalizeEvent(t.dom,new FakeGlobalEvent(t,n),!0)}function isLocalEl(t,n){for(var a=n,s=!1;a&&a.nodeType!==9&&!(s=a.domBelongToZr||a!==n&&a===t.painterRoot);)a=a.parentNode;return s}var FakeGlobalEvent=(function(){function t(n,a){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=a.type,this.target=this.currentTarget=n.dom,this.pointerType=a.pointerType,this.clientX=a.clientX,this.clientY=a.clientY}return t})(),localDOMHandlers={mousedown:function(t){t=normalizeEvent(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=normalizeEvent(this.dom,t);var n=this.__mayPointerCapture;n&&(t.zrX!==n[0]||t.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=normalizeEvent(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=normalizeEvent(this.dom,t);var n=t.toElement||t.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){wheelEventSupported=!0,t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){wheelEventSupported||(t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),localDOMHandlers.mousemove.call(this,t),localDOMHandlers.mousedown.call(this,t)},touchmove:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"change"),localDOMHandlers.mousemove.call(this,t)},touchend:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"end"),localDOMHandlers.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,t)},pointerdown:function(t){localDOMHandlers.mousedown.call(this,t)},pointermove:function(t){isPointerFromTouch(t)||localDOMHandlers.mousemove.call(this,t)},pointerup:function(t){localDOMHandlers.mouseup.call(this,t)},pointerout:function(t){isPointerFromTouch(t)||localDOMHandlers.mouseout.call(this,t)}};each$f(["click","dblclick","contextmenu"],function(t){localDOMHandlers[t]=function(n){n=normalizeEvent(this.dom,n),this.trigger(t,n)}});var globalDOMHandlers={pointermove:function(t){isPointerFromTouch(t)||globalDOMHandlers.mousemove.call(this,t)},pointerup:function(t){globalDOMHandlers.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),n&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function mountLocalDOMEventListeners(t,n){var a=n.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(s){mountSingleDOMEventListener(n,s,function(l){a[s].call(t,l)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(s){mountSingleDOMEventListener(n,s,function(l){a[s].call(t,l),setTouchTimer(n)})}),each$f(localNativeListenerNames.mouse,function(s){mountSingleDOMEventListener(n,s,function(l){l=getNativeEvent(l),n.touching||a[s].call(t,l)})}))}function mountGlobalDOMEventListeners(t,n){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,a):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,a);function a(s){function l(u){u=getNativeEvent(u),isLocalEl(t,u.target)||(u=normalizeGlobalEvent(t,u),n.domHandlers[s].call(t,u))}mountSingleDOMEventListener(n,s,l,{capture:!0})}}function mountSingleDOMEventListener(t,n,a,s){t.mounted[n]=a,t.listenerOpts[n]=s,addEventListener(t.domTarget,n,a,s)}function unmountDOMEventListeners(t){var n=t.mounted;for(var a in n)n.hasOwnProperty(a)&&removeEventListener(t.domTarget,a,n[a],t.listenerOpts[a]);t.mounted={}}var DOMHandlerScope=(function(){function t(n,a){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=a}return t})(),HandlerDomProxy=(function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this;return l.__pointerCapturing=!1,l.dom=a,l.painterRoot=s,l._localHandlerScope=new DOMHandlerScope(a,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},n.prototype.__togglePointerCapture=function(a){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+a){this.__pointerCapturing=a;var s=this._globalHandlerScope;a?mountGlobalDOMEventListeners(this,s):unmountDOMEventListeners(s)}},n})(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(t){return t>EPSILON$2||t<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=(function(){function t(){}return t.prototype.getLocalTransform=function(n){return t.getLocalTransform(this,n)},t.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},t.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},t.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},t.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},t.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},t.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,a=this.needLocalTransform(),s=this.transform;if(!(a||n)){s&&(mIdentity(s),this.invTransform=null);return}s=s||create$1(),a?this.getLocalTransform(s):mIdentity(s),n&&(a?mul(s,n,s):copy(s,n)),this.transform=s,this._resolveGlobalScaleRatio(s)},t.prototype._resolveGlobalScaleRatio=function(n){var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(scaleTmp);var s=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-s)*a+s)/scaleTmp[0]||0,c=((scaleTmp[1]-l)*a+l)/scaleTmp[1]||0;n[0]*=u,n[1]*=u,n[2]*=c,n[3]*=c}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,n)},t.prototype.getComputedTransform=function(){for(var n=this,a=[];n;)a.push(n),n=n.parent;for(;n=a.pop();)n.updateTransform();return this.transform},t.prototype.setLocalTransform=function(n){if(n){var a=n[0]*n[0]+n[1]*n[1],s=n[2]*n[2]+n[3]*n[3],l=Math.atan2(n[1],n[0]),u=Math.PI/2+l-Math.atan2(n[3],n[2]);s=Math.sqrt(s)*Math.cos(u),a=Math.sqrt(a),this.skewX=u,this.skewY=0,this.rotation=-l,this.x=+n[4],this.y=+n[5],this.scaleX=a,this.scaleY=s,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,a=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create$1(),mul(tmpTransform,n.invTransform,a),a=tmpTransform);var s=this.originX,l=this.originY;(s||l)&&(originTransform[4]=s,originTransform[5]=l,mul(tmpTransform,a,originTransform),tmpTransform[4]-=s,tmpTransform[5]-=l,a=tmpTransform),this.setLocalTransform(a)}},t.prototype.getGlobalScale=function(n){var a=this.transform;return n=n||[],a?(n[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n[1]=Math.sqrt(a[2]*a[2]+a[3]*a[3]),a[0]<0&&(n[0]=-n[0]),a[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},t.prototype.transformCoordToLocal=function(n,a){var s=[n,a],l=this.invTransform;return l&&applyTransform$1(s,s,l),s},t.prototype.transformCoordToGlobal=function(n,a){var s=[n,a],l=this.transform;return l&&applyTransform$1(s,s,l),s},t.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},t.prototype.copyTransform=function(n){copyTransform(this,n)},t.getLocalTransform=function(n,a){a=a||[];var s=n.originX||0,l=n.originY||0,u=n.scaleX,c=n.scaleY,d=n.anchorX,Ct=n.anchorY,ar=n.rotation||0,en=n.x,tn=n.y,on=n.skewX?Math.tan(n.skewX):0,fn=n.skewY?Math.tan(-n.skewY):0;if(s||l||d||Ct){var dn=s+d,Cn=l+Ct;a[4]=-dn*u-on*Cn*c,a[5]=-Cn*c-fn*dn*u}else a[4]=a[5]=0;return a[0]=u,a[3]=c,a[1]=fn*u,a[2]=on*c,ar&&rotate(a,a,ar),a[4]+=s+en,a[5]+=l+tn,a},t.initDefaultProps=(function(){var n=t.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0})(),t})(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(t,n){for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var s=TRANSFORMABLE_PROPS[a];t[s]=n[s]}}var textWidthCache={};function getWidth(t,n){n=n||DEFAULT_FONT;var a=textWidthCache[n];a||(a=textWidthCache[n]=new LRU(500));var s=a.get(t);return s==null&&(s=platformApi.measureText(t,n).width,a.put(t,s)),s}function innerGetBoundingRect(t,n,a,s){var l=getWidth(t,n),u=getLineHeight(n),c=adjustTextX(0,l,a),d=adjustTextY(0,u,s),Ct=new BoundingRect(c,d,l,u);return Ct}function getBoundingRect(t,n,a,s){var l=((t||"")+"").split(`
`),u=l.length;if(u===1)return innerGetBoundingRect(l[0],n,a,s);for(var c=new BoundingRect(0,0,0,0),d=0;d<l.length;d++){var Ct=innerGetBoundingRect(l[d],n,a,s);d===0?c.copy(Ct):c.union(Ct)}return c}function adjustTextX(t,n,a){return a==="right"?t-=n:a==="center"&&(t-=n/2),t}function adjustTextY(t,n,a){return a==="middle"?t-=n/2:a==="bottom"&&(t-=n),t}function getLineHeight(t){return getWidth("",t)}function parsePercent$1(t,n){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*n:parseFloat(t):t}function calculateTextPosition(t,n,a){var s=n.position||"inside",l=n.distance!=null?n.distance:5,u=a.height,c=a.width,d=u/2,Ct=a.x,ar=a.y,en="left",tn="top";if(s instanceof Array)Ct+=parsePercent$1(s[0],a.width),ar+=parsePercent$1(s[1],a.height),en=null,tn=null;else switch(s){case"left":Ct-=l,ar+=d,en="right",tn="middle";break;case"right":Ct+=l+c,ar+=d,tn="middle";break;case"top":Ct+=c/2,ar-=l,en="center",tn="bottom";break;case"bottom":Ct+=c/2,ar+=u+l,en="center";break;case"inside":Ct+=c/2,ar+=d,en="center",tn="middle";break;case"insideLeft":Ct+=l,ar+=d,tn="middle";break;case"insideRight":Ct+=c-l,ar+=d,en="right",tn="middle";break;case"insideTop":Ct+=c/2,ar+=l,en="center";break;case"insideBottom":Ct+=c/2,ar+=u-l,en="center",tn="bottom";break;case"insideTopLeft":Ct+=l,ar+=l;break;case"insideTopRight":Ct+=c-l,ar+=l,en="right";break;case"insideBottomLeft":Ct+=l,ar+=u-l,tn="bottom";break;case"insideBottomRight":Ct+=c-l,ar+=u-l,en="right",tn="bottom";break}return t=t||{},t.x=Ct,t.y=ar,t.align=en,t.verticalAlign=tn,t}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=!0,t},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=(function(){function t(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return t.prototype._init=function(n){this.attr(n)},t.prototype.drift=function(n,a,s){switch(this.draggable){case"horizontal":a=0;break;case"vertical":n=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=n,l[5]+=a,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(n){var a=this._textContent;if(a&&(!a.ignore||n)){this.textConfig||(this.textConfig={});var s=this.textConfig,l=s.local,u=a.innerTransformable,c=void 0,d=void 0,Ct=!1;u.parent=l?this:null;var ar=!1;if(u.copyTransform(a),s.position!=null){var en=tmpBoundingRect;s.layoutRect?en.copy(s.layoutRect):en.copy(this.getBoundingRect()),l||en.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,s,en):calculateTextPosition(tmpTextPosCalcRes,s,en),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,d=tmpTextPosCalcRes.verticalAlign;var tn=s.origin;if(tn&&s.rotation!=null){var on=void 0,fn=void 0;tn==="center"?(on=en.width*.5,fn=en.height*.5):(on=parsePercent$1(tn[0],en.width),fn=parsePercent$1(tn[1],en.height)),ar=!0,u.originX=-u.x+on+(l?0:en.x),u.originY=-u.y+fn+(l?0:en.y)}}s.rotation!=null&&(u.rotation=s.rotation);var dn=s.offset;dn&&(u.x+=dn[0],u.y+=dn[1],ar||(u.originX=-dn[0],u.originY=-dn[1]));var Cn=s.inside==null?typeof s.position=="string"&&s.position.indexOf("inside")>=0:s.inside,Rn=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ax=void 0,ox=void 0,sx=void 0;Cn&&this.canBeInsideText()?(ax=s.insideFill,ox=s.insideStroke,(ax==null||ax==="auto")&&(ax=this.getInsideTextFill()),(ox==null||ox==="auto")&&(ox=this.getInsideTextStroke(ax),sx=!0)):(ax=s.outsideFill,ox=s.outsideStroke,(ax==null||ax==="auto")&&(ax=this.getOutsideFill()),(ox==null||ox==="auto")&&(ox=this.getOutsideStroke(ax),sx=!0)),ax=ax||"#000",(ax!==Rn.fill||ox!==Rn.stroke||sx!==Rn.autoStroke||c!==Rn.align||d!==Rn.verticalAlign)&&(Ct=!0,Rn.fill=ax,Rn.stroke=ox,Rn.autoStroke=sx,Rn.align=c,Rn.verticalAlign=d,a.setDefaultTextStyle(Rn)),a.__dirty|=REDRAW_BIT,Ct&&a.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(n){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},t.prototype.getOutsideStroke=function(n){var a=this.__zr&&this.__zr.getBackgroundColor(),s=typeof a=="string"&&parse(a);s||(s=[255,255,255,1]);for(var l=s[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)s[c]=s[c]*l+(u?0:255)*(1-l);return s[3]=1,stringify(s,"rgba")},t.prototype.traverse=function(n,a){},t.prototype.attrKV=function(n,a){n==="textConfig"?this.setTextConfig(a):n==="textContent"?this.setTextContent(a):n==="clipPath"?this.setClipPath(a):n==="extra"?(this.extra=this.extra||{},extend(this.extra,a)):this[n]=a},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(n,a){if(typeof n=="string")this.attrKV(n,a);else if(isObject$3(n))for(var s=n,l=keys(s),u=0;u<l.length;u++){var c=l[u];this.attrKV(c,n[c])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var a=this._normalState,s=0;s<this.animators.length;s++){var l=this.animators[s],u=l.__fromStateTransition;if(!(l.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var c=l.targetName,d=c?a[c]:a;l.saveTo(d)}}},t.prototype._innerSaveToNormal=function(n){var a=this._normalState;a||(a=this._normalState={}),n.textConfig&&!a.textConfig&&(a.textConfig=this.textConfig),this._savePrimaryToNormal(n,a,PRIMARY_STATES_KEYS$1)},t.prototype._savePrimaryToNormal=function(n,a,s){for(var l=0;l<s.length;l++){var u=s[l];n[u]!=null&&!(u in a)&&(a[u]=this[u])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(n){return this.states[n]},t.prototype.ensureState=function(n){var a=this.states;return a[n]||(a[n]={}),a[n]},t.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},t.prototype.useState=function(n,a,s,l){var u=n===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&u)){var d=this.currentStates,Ct=this.stateTransition;if(!(indexOf(d,n)>=0&&(a||d.length===1))){var ar;if(this.stateProxy&&!u&&(ar=this.stateProxy(n)),ar||(ar=this.states&&this.states[n]),!ar&&!u){logError("State "+n+" not exists.");return}u||this.saveCurrentToNormalState(ar);var en=!!(ar&&ar.hoverLayer||l);en&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,ar,this._normalState,a,!s&&!this.__inHover&&Ct&&Ct.duration>0,Ct);var tn=this._textContent,on=this._textGuide;return tn&&tn.useState(n,a,s,en),on&&on.useState(n,a,s,en),u?(this.currentStates=[],this._normalState={}):a?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!en&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),ar}}},t.prototype.useStates=function(n,a,s){if(!n.length)this.clearStates();else{var l=[],u=this.currentStates,c=n.length,d=c===u.length;if(d){for(var Ct=0;Ct<c;Ct++)if(n[Ct]!==u[Ct]){d=!1;break}}if(d)return;for(var Ct=0;Ct<c;Ct++){var ar=n[Ct],en=void 0;this.stateProxy&&(en=this.stateProxy(ar,n)),en||(en=this.states[ar]),en&&l.push(en)}var tn=l[c-1],on=!!(tn&&tn.hoverLayer||s);on&&this._toggleHoverLayerFlag(!0);var fn=this._mergeStates(l),dn=this.stateTransition;this.saveCurrentToNormalState(fn),this._applyStateObj(n.join(","),fn,this._normalState,!1,!a&&!this.__inHover&&dn&&dn.duration>0,dn);var Cn=this._textContent,Rn=this._textGuide;Cn&&Cn.useStates(n,a,on),Rn&&Rn.useStates(n,a,on),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!on&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},t.prototype.isSilent=function(){for(var n=this.silent,a=this.parent;!n&&a;){if(a.silent){n=!0;break}a=a.parent}return n},t.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var a=this.animators[n];a.targetName&&a.changeTarget(this[a.targetName])}},t.prototype.removeState=function(n){var a=indexOf(this.currentStates,n);if(a>=0){var s=this.currentStates.slice();s.splice(a,1),this.useStates(s)}},t.prototype.replaceState=function(n,a,s){var l=this.currentStates.slice(),u=indexOf(l,n),c=indexOf(l,a)>=0;u>=0?c?l.splice(u,1):l[u]=a:s&&!c&&l.push(a),this.useStates(l)},t.prototype.toggleState=function(n,a){a?this.useState(n,!0):this.removeState(n)},t.prototype._mergeStates=function(n){for(var a={},s,l=0;l<n.length;l++){var u=n[l];extend(a,u),u.textConfig&&(s=s||{},extend(s,u.textConfig))}return s&&(a.textConfig=s),a},t.prototype._applyStateObj=function(n,a,s,l,u,c){var d=!(a&&l);a&&a.textConfig?(this.textConfig=extend({},l?this.textConfig:s.textConfig),extend(this.textConfig,a.textConfig)):d&&s.textConfig&&(this.textConfig=s.textConfig);for(var Ct={},ar=!1,en=0;en<PRIMARY_STATES_KEYS$1.length;en++){var tn=PRIMARY_STATES_KEYS$1[en],on=u&&DEFAULT_ANIMATABLE_MAP[tn];a&&a[tn]!=null?on?(ar=!0,Ct[tn]=a[tn]):this[tn]=a[tn]:d&&s[tn]!=null&&(on?(ar=!0,Ct[tn]=s[tn]):this[tn]=s[tn])}if(!u)for(var en=0;en<this.animators.length;en++){var fn=this.animators[en],dn=fn.targetName;fn.getLoop()||fn.__changeFinalValue(dn?(a||s)[dn]:a||s)}ar&&this._transitionState(n,Ct,c)},t.prototype._attachComponent=function(n){if(!(n.__zr&&!n.__hostTarget)&&n!==this){var a=this.__zr;a&&n.addSelfToZr(a),n.__zr=a,n.__hostTarget=this}},t.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},t.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(n){var a=this._textContent;a!==n&&(a&&a!==n&&this.removeTextContent(),n.innerTransformable=new Transformable,this._attachComponent(n),this._textContent=n,this.markRedraw())},t.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var a=this._textContent,s=this._textGuide;a&&(a.__inHover=n),s&&(s.__inHover=n)},t.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var a=this.animators;if(a)for(var s=0;s<a.length;s++)n.animation.addAnimator(a[s]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var a=this.animators;if(a)for(var s=0;s<a.length;s++)n.animation.removeAnimator(a[s]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},t.prototype.animate=function(n,a,s){var l=n?this[n]:this,u=new Animator(l,a,s);return n&&(u.targetName=n),this.addAnimator(u,n),u},t.prototype.addAnimator=function(n,a){var s=this.__zr,l=this;n.during(function(){l.updateDuringAnimation(a)}).done(function(){var u=l.animators,c=indexOf(u,n);c>=0&&u.splice(c,1)}),this.animators.push(n),s&&s.animation.addAnimator(n),s&&s.wakeUp()},t.prototype.updateDuringAnimation=function(n){this.markRedraw()},t.prototype.stopAnimation=function(n,a){for(var s=this.animators,l=s.length,u=[],c=0;c<l;c++){var d=s[c];!n||n===d.scope?d.stop(a):u.push(d)}return this.animators=u,this},t.prototype.animateTo=function(n,a,s){animateTo(this,n,a,s)},t.prototype.animateFrom=function(n,a,s){animateTo(this,n,a,s,!0)},t.prototype._transitionState=function(n,a,s,l){for(var u=animateTo(this,a,s,l),c=0;c<u.length;c++)u[c].__fromStateTransition=n},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=(function(){var n=t.prototype;n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;function a(s,l,u,c){Object.defineProperty(n,s,{get:function(){if(!this[l]){var Ct=this[l]=[];d(this,Ct)}return this[l]},set:function(Ct){this[u]=Ct[0],this[c]=Ct[1],this[l]=Ct,d(this,Ct)}});function d(Ct,ar){Object.defineProperty(ar,0,{get:function(){return Ct[u]},set:function(en){Ct[u]=en}}),Object.defineProperty(ar,1,{get:function(){return Ct[c]},set:function(en){Ct[c]=en}})}}Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))})(),t})();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(t,n,a,s,l){a=a||{};var u=[];animateToShallow(t,"",t,n,a,s,u,l);var c=u.length,d=!1,Ct=a.done,ar=a.aborted,en=function(){d=!0,c--,c<=0&&(d?Ct&&Ct():ar&&ar())},tn=function(){c--,c<=0&&(d?Ct&&Ct():ar&&ar())};c||Ct&&Ct(),u.length>0&&a.during&&u[0].during(function(dn,Cn){a.during(Cn)});for(var on=0;on<u.length;on++){var fn=u[on];en&&fn.done(en),tn&&fn.aborted(tn),a.force&&fn.duration(a.duration),fn.start(a.easing)}return u}function copyArrShallow(t,n,a){for(var s=0;s<a;s++)t[s]=n[s]}function is2DArray(t){return isArrayLike(t[0])}function copyValue(t,n,a){if(isArrayLike(n[a]))if(isArrayLike(t[a])||(t[a]=[]),isTypedArray(n[a])){var s=n[a].length;t[a].length!==s&&(t[a]=new n[a].constructor(s),copyArrShallow(t[a],n[a],s))}else{var l=n[a],u=t[a],c=l.length;if(is2DArray(l))for(var d=l[0].length,Ct=0;Ct<c;Ct++)u[Ct]?copyArrShallow(u[Ct],l[Ct],d):u[Ct]=Array.prototype.slice.call(l[Ct]);else copyArrShallow(u,l,c);u.length=l.length}else t[a]=n[a]}function isValueSame(t,n){return t===n||isArrayLike(t)&&isArrayLike(n)&&is1DArraySame(t,n)}function is1DArraySame(t,n){var a=t.length;if(a!==n.length)return!1;for(var s=0;s<a;s++)if(t[s]!==n[s])return!1;return!0}function animateToShallow(t,n,a,s,l,u,c,d){for(var Ct=keys(s),ar=l.duration,en=l.delay,tn=l.additive,on=l.setToFinal,fn=!isObject$3(u),dn=t.animators,Cn=[],Rn=0;Rn<Ct.length;Rn++){var ax=Ct[Rn],ox=s[ax];if(ox!=null&&a[ax]!=null&&(fn||u[ax]))if(isObject$3(ox)&&!isArrayLike(ox)&&!isGradientObject(ox)){if(n){d||(a[ax]=ox,t.updateDuringAnimation(n));continue}animateToShallow(t,ax,a[ax],ox,l,u&&u[ax],c,d)}else Cn.push(ax);else d||(a[ax]=ox,t.updateDuringAnimation(n),Cn.push(ax))}var sx=Cn.length;if(!tn&&sx)for(var lx=0;lx<dn.length;lx++){var cx=dn[lx];if(cx.targetName===n){var fx=cx.stopTracks(Cn);if(fx){var gx=indexOf(dn,cx);dn.splice(gx,1)}}}if(l.force||(Cn=filter(Cn,function(vx){return!isValueSame(s[vx],a[vx])}),sx=Cn.length),sx>0||l.force&&!c.length){var mx=void 0,px=void 0,hx=void 0;if(d){px={},on&&(mx={});for(var lx=0;lx<sx;lx++){var ax=Cn[lx];px[ax]=a[ax],on?mx[ax]=s[ax]:a[ax]=s[ax]}}else if(on){hx={};for(var lx=0;lx<sx;lx++){var ax=Cn[lx];hx[ax]=cloneValue(a[ax]),copyValue(a,s,ax)}}var cx=new Animator(a,!1,!1,tn?filter(dn,function(yx){return yx.targetName===n}):null);cx.targetName=n,l.scope&&(cx.scope=l.scope),on&&mx&&cx.whenWithKeys(0,mx,Cn),hx&&cx.whenWithKeys(0,hx,Cn),cx.whenWithKeys(ar??500,d?px:s,Cn).delay(en||0),t.addAnimator(cx,n),c.push(cx)}}var Group$3=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.isGroup=!0,s._children=[],s.attr(a),s}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(a){return this._children[a]},n.prototype.childOfName=function(a){for(var s=this._children,l=0;l<s.length;l++)if(s[l].name===a)return s[l]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},n.prototype.addBefore=function(a,s){if(a&&a!==this&&a.parent!==this&&s&&s.parent===this){var l=this._children,u=l.indexOf(s);u>=0&&(l.splice(u,0,a),this._doAdd(a))}return this},n.prototype.replace=function(a,s){var l=indexOf(this._children,a);return l>=0&&this.replaceAt(s,l),this},n.prototype.replaceAt=function(a,s){var l=this._children,u=l[s];if(a&&a!==this&&a.parent!==this&&a!==u){l[s]=a,u.parent=null;var c=this.__zr;c&&u.removeSelfFromZr(c),this._doAdd(a)}return this},n.prototype._doAdd=function(a){a.parent&&a.parent.remove(a),a.parent=this;var s=this.__zr;s&&s!==a.__zr&&a.addSelfToZr(s),s&&s.refresh()},n.prototype.remove=function(a){var s=this.__zr,l=this._children,u=indexOf(l,a);return u<0?this:(l.splice(u,1),a.parent=null,s&&a.removeSelfFromZr(s),s&&s.refresh(),this)},n.prototype.removeAll=function(){for(var a=this._children,s=this.__zr,l=0;l<a.length;l++){var u=a[l];s&&u.removeSelfFromZr(s),u.parent=null}return a.length=0,this},n.prototype.eachChild=function(a,s){for(var l=this._children,u=0;u<l.length;u++){var c=l[u];a.call(s,c,u)}return this},n.prototype.traverse=function(a,s){for(var l=0;l<this._children.length;l++){var u=this._children[l],c=a.call(s,u);u.isGroup&&!c&&u.traverse(a,s)}return this},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.addSelfToZr(a)}},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.removeSelfFromZr(a)}},n.prototype.getBoundingRect=function(a){for(var s=new BoundingRect(0,0,0,0),l=a||this._children,u=[],c=null,d=0;d<l.length;d++){var Ct=l[d];if(!(Ct.ignore||Ct.invisible)){var ar=Ct.getBoundingRect(),en=Ct.getLocalTransform(u);en?(BoundingRect.applyTransform(s,ar,en),c=c||s.clone(),c.union(s)):(c=c||ar.clone(),c.union(ar))}}return c||s},n})(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(t){delete instances$1[t]}function isDarkMode(t){if(!t)return!1;if(typeof t=="string")return lum(t,1)<DARK_MODE_THRESHOLD;if(t.colorStops){for(var n=t.colorStops,a=0,s=n.length,l=0;l<s;l++)a+=lum(n[l].color,1);return a/=s,a<DARK_MODE_THRESHOLD}return!1}var ZRender=(function(){function t(n,a,s){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,s=s||{},this.dom=a,this.id=n;var u=new Storage,c=s.renderer||"canvas";painterCtors[c]||(c=keys(painterCtors)[0]),s.useDirtyRect=s.useDirtyRect==null?!1:s.useDirtyRect;var d=new painterCtors[c](a,u,s,n),Ct=s.ssr||d.ssrOnly;this.storage=u,this.painter=d;var ar=!env.node&&!env.worker&&!Ct?new HandlerDomProxy(d.getViewportRoot(),d.root):null,en=s.useCoarsePointer,tn=en==null||en==="auto"?env.touchEventsSupported:!!en,on=44,fn;tn&&(fn=retrieve2(s.pointerSize,on)),this.handler=new Handler(u,d,ar,d.root,fn),this.animation=new Animation({stage:{update:Ct?null:function(){return l._flush(!0)}}}),Ct||this.animation.start()}return t.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},t.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(n,a){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,a),this.refresh())},t.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(n){this._darkMode=n},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(n){var a,s=getTime();this._needsRefresh&&(a=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately());var l=getTime();a?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-s})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},t.prototype.findHover=function(n,a){if(!this._disposed)return this.handler.findHover(n,a)},t.prototype.on=function(n,a,s){return this._disposed||this.handler.on(n,a,s),this},t.prototype.off=function(n,a){this._disposed||this.handler.off(n,a)},t.prototype.trigger=function(n,a){this._disposed||this.handler.trigger(n,a)},t.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),a=0;a<n.length;a++)n[a]instanceof Group$3&&n[a].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},t})();function init$2(t,n){var a=new ZRender(guid(),t,n);return instances$1[a.id]=a,a}function dispose$1(t){t.dispose()}function disposeAll(){for(var t in instances$1)instances$1.hasOwnProperty(t)&&instances$1[t].dispose();instances$1={}}function getInstance(t){return instances$1[t]}function registerPainter(t,n){painterCtors[t]=n}var ssrDataGetter;function getElementSSRData(t){if(typeof ssrDataGetter=="function")return ssrDataGetter(t)}function registerSSRDataGetter(t){ssrDataGetter=t}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(t){return t.replace(/^\s+|\s+$/g,"")}function linearMap$2(t,n,a,s){var l=n[0],u=n[1],c=a[0],d=a[1],Ct=u-l,ar=d-c;if(Ct===0)return ar===0?c:(c+d)/2;if(s)if(Ct>0){if(t<=l)return c;if(t>=u)return d}else{if(t>=l)return c;if(t<=u)return d}else{if(t===l)return c;if(t===u)return d}return(t-l)/Ct*ar+c}function parsePercent(t,n){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return isString$1(t)?_trim(t).match(/%$/)?parseFloat(t)/100*n:parseFloat(t):t==null?NaN:+t}function round$3(t,n,a){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),t=(+t).toFixed(n),a?t:+t}function asc$2(t){return t.sort(function(n,a){return n-a}),t}function getPrecision(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var n=1,a=0;a<15;a++,n*=10)if(Math.round(t*n)/n===t)return a}return getPrecisionSafe(t)}function getPrecisionSafe(t){var n=t.toString().toLowerCase(),a=n.indexOf("e"),s=a>0?+n.slice(a+1):0,l=a>0?a:n.length,u=n.indexOf("."),c=u<0?0:l-1-u;return Math.max(0,c-s)}function getPixelPrecision(t,n){var a=Math.log,s=Math.LN10,l=Math.floor(a(t[1]-t[0])/s),u=Math.round(a(Math.abs(n[1]-n[0]))/s),c=Math.min(Math.max(-l+u,0),20);return isFinite(c)?c:20}function getPercentWithPrecision(t,n,a){if(!t[n])return 0;var s=getPercentSeats(t,a);return s[n]||0}function getPercentSeats(t,n){var a=reduce(t,function(fn,dn){return fn+(isNaN(dn)?0:dn)},0);if(a===0)return[];for(var s=Math.pow(10,n),l=map$1(t,function(fn){return(isNaN(fn)?0:fn)/a*s*100}),u=s*100,c=map$1(l,function(fn){return Math.floor(fn)}),d=reduce(c,function(fn,dn){return fn+dn},0),Ct=map$1(l,function(fn,dn){return fn-c[dn]});d<u;){for(var ar=Number.NEGATIVE_INFINITY,en=null,tn=0,on=Ct.length;tn<on;++tn)Ct[tn]>ar&&(ar=Ct[tn],en=tn);++c[en],Ct[en]=0,++d}return map$1(c,function(fn){return fn/s})}function addSafe(t,n){var a=Math.max(getPrecision(t),getPrecision(n)),s=t+n;return a>ROUND_SUPPORTED_PRECISION_MAX?s:round$3(s,a)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(t){var n=Math.PI*2;return(t%n+n)%n}function isRadianAroundZero(t){return t>-RADIAN_EPSILON&&t<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(t){if(t instanceof Date)return t;if(isString$1(t)){var n=TIME_REG.exec(t);if(!n)return new Date(NaN);if(n[8]){var a=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(a-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,a,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function quantity(t){return Math.pow(10,quantityExponent(t))}function quantityExponent(t){if(t===0)return 0;var n=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,n)>=10&&n++,n}function nice(t,n){var a=quantityExponent(t),s=Math.pow(10,a),l=t/s,u;return n?l<1.5?u=1:l<2.5?u=2:l<4?u=3:l<7?u=5:u=10:l<1?u=1:l<2?u=2:l<3?u=3:l<5?u=5:u=10,t=u*s,a>=-20?+t.toFixed(a<0?-a:0):t}function quantile(t,n){var a=(t.length-1)*n+1,s=Math.floor(a),l=+t[s-1],u=a-s;return u?l+u*(t[s]-l):l}function reformIntervals(t){t.sort(function(Ct,ar){return d(Ct,ar,0)?-1:1});for(var n=-1/0,a=1,s=0;s<t.length;){for(var l=t[s].interval,u=t[s].close,c=0;c<2;c++)l[c]<=n&&(l[c]=n,u[c]=c?1:1-a),n=l[c],a=u[c];l[0]===l[1]&&u[0]*u[1]!==1?t.splice(s,1):s++}return t;function d(Ct,ar,en){return Ct.interval[en]<ar.interval[en]||Ct.interval[en]===ar.interval[en]&&(Ct.close[en]-ar.close[en]===(en?-1:1)||!en&&d(Ct,ar,1))}}function numericToNumber(t){var n=parseFloat(t);return n==t&&(n!==0||!isString$1(t)||t.indexOf("x")<=0)?n:NaN}function isNumeric(t){return!isNaN(numericToNumber(t))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(t,n){return n===0?t:getGreatestCommonDividor(n,t%n)}function getLeastCommonMultiple(t,n){return t==null?n:n==null?t:t*n/getGreatestCommonDividor(t,n)}function throwError(t){throw new Error(t)}function interpolateNumber(t,n,a){return(n-t)*a+t}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(t){return t instanceof Array?t:t==null?[]:[t]}function defaultEmphasis(t,n,a){if(t){t[n]=t[n]||{},t.emphasis=t.emphasis||{},t.emphasis[n]=t.emphasis[n]||{};for(var s=0,l=a.length;s<l;s++){var u=a[s];!t.emphasis[n].hasOwnProperty(u)&&t[n].hasOwnProperty(u)&&(t.emphasis[n][u]=t[n][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(t){return isObject$3(t)&&!isArray$1(t)&&!(t instanceof Date)?t.value:t}function isDataItemOption(t){return isObject$3(t)&&!(t instanceof Array)}function mappingToExists(t,n,a){var s=a==="normalMerge",l=a==="replaceMerge",u=a==="replaceAll";t=t||[],n=(n||[]).slice();var c=createHashMap();each$f(n,function(Ct,ar){if(!isObject$3(Ct)){n[ar]=null;return}});var d=prepareResult(t,c,a);return(s||l)&&mappingById(d,t,c,n),s&&mappingByName(d,n),s||l?mappingByIndex(d,n,l):u&&mappingInReplaceAllMode(d,n),makeIdAndName(d),d}function prepareResult(t,n,a){var s=[];if(a==="replaceAll")return s;for(var l=0;l<t.length;l++){var u=t[l];u&&u.id!=null&&n.set(u.id,l),s.push({existing:a==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return s}function mappingById(t,n,a,s){each$f(s,function(l,u){if(!(!l||l.id==null)){var c=makeComparableKey(l.id),d=a.get(c);if(d!=null){var Ct=t[d];assert(!Ct.newOption,'Duplicated option on id "'+c+'".'),Ct.newOption=l,Ct.existing=n[d],s[u]=null}}})}function mappingByName(t,n){each$f(n,function(a,s){if(!(!a||a.name==null))for(var l=0;l<t.length;l++){var u=t[l].existing;if(!t[l].newOption&&u&&(u.id==null||a.id==null)&&!isComponentIdInternal(a)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,a)){t[l].newOption=a,n[s]=null;return}}})}function mappingByIndex(t,n,a){each$f(n,function(s){if(s){for(var l,u=0;(l=t[u])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&s.id!=null&&!keyExistAndEqual("id",s,l.existing));)u++;l?(l.newOption=s,l.brandNew=a):t.push({newOption:s,brandNew:a,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(t,n){each$f(n,function(a){t.push({newOption:a,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(t){var n=createHashMap();each$f(t,function(a){var s=a.existing;s&&n.set(s.id,a)}),each$f(t,function(a){var s=a.newOption;assert(!s||s.id==null||!n.get(s.id)||n.get(s.id)===a,"id duplicates: "+(s&&s.id)),s&&s.id!=null&&n.set(s.id,a),!a.keyInfo&&(a.keyInfo={})}),each$f(t,function(a,s){var l=a.existing,u=a.newOption,c=a.keyInfo;if(isObject$3(u)){if(c.name=u.name!=null?makeComparableKey(u.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+s,l)c.id=makeComparableKey(l.id);else if(u.id!=null)c.id=makeComparableKey(u.id);else{var d=0;do c.id="\0"+c.name+"\0"+d++;while(n.get(c.id))}n.set(c.id,a)}})}function keyExistAndEqual(t,n,a){var s=convertOptionIdName(n[t],null),l=convertOptionIdName(a[t],null);return s!=null&&l!=null&&s===l}function makeComparableKey(t){return convertOptionIdName(t,"")}function convertOptionIdName(t,n){return t==null?n:isString$1(t)?t:isNumber(t)||isStringSafe(t)?t+"":n}function isNameSpecified(t){var n=t.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(t){return t&&t.id!=null&&makeComparableKey(t.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(t){return INTERNAL_COMPONENT_ID_PREFIX+t}function setComponentTypeToKeyInfo(t,n,a){each$f(t,function(s){var l=s.newOption;isObject$3(l)&&(s.keyInfo.mainType=n,s.keyInfo.subType=determineSubType(n,l,s.existing,a))})}function determineSubType(t,n,a,s){var l=n.type?n.type:a?a.subType:s.determineSubType(t,n);return l}function compressBatches(t,n){var a={},s={};return l(t||[],a),l(n||[],s,a),[u(a),u(s)];function l(c,d,Ct){for(var ar=0,en=c.length;ar<en;ar++){var tn=convertOptionIdName(c[ar].seriesId,null);if(tn==null)return;for(var on=normalizeToArray(c[ar].dataIndex),fn=Ct&&Ct[tn],dn=0,Cn=on.length;dn<Cn;dn++){var Rn=on[dn];fn&&fn[Rn]?fn[Rn]=null:(d[tn]||(d[tn]={}))[Rn]=1}}}function u(c,d){var Ct=[];for(var ar in c)if(c.hasOwnProperty(ar)&&c[ar]!=null)if(d)Ct.push(+ar);else{var en=u(c[ar],!0);en.length&&Ct.push({seriesId:ar,dataIndex:en})}return Ct}}function queryDataIndex(t,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(a){return t.indexOfRawIndex(a)}):t.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(a){return t.indexOfName(a)}):t.indexOfName(n.name)}function makeInner(){var t="__ec_inner_"+innerUniqueIndex++;return function(n){return n[t]||(n[t]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(t,n,a){var s=preParseFinder(n,a),l=s.mainTypeSpecified,u=s.queryOptionMap,c=s.others,d=c,Ct=a?a.defaultMainType:null;return!l&&Ct&&u.set(Ct,{}),u.each(function(ar,en){var tn=queryReferringComponents(t,en,ar,{useDefault:Ct===en,enableAll:a&&a.enableAll!=null?a.enableAll:!0,enableNone:a&&a.enableNone!=null?a.enableNone:!0});d[en+"Models"]=tn.models,d[en+"Model"]=tn.models[0]}),d}function preParseFinder(t,n){var a;if(isString$1(t)){var s={};s[t+"Index"]=0,a=s}else a=t;var l=createHashMap(),u={},c=!1;return each$f(a,function(d,Ct){if(Ct==="dataIndex"||Ct==="dataIndexInside"){u[Ct]=d;return}var ar=Ct.match(/^(\w+)(Index|Id|Name)$/)||[],en=ar[1],tn=(ar[2]||"").toLowerCase();if(!(!en||!tn||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,en)<0)){c=c||!!en;var on=l.get(en)||l.set(en,{});on[tn]=d}}),{mainTypeSpecified:c,queryOptionMap:l,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(t,n,a,s){s=s||SINGLE_REFERRING;var l=a.index,u=a.id,c=a.name,d={models:null,specified:l!=null||u!=null||c!=null};if(!d.specified){var Ct=void 0;return d.models=s.useDefault&&(Ct=t.getComponent(n))?[Ct]:[],d}return l==="none"||l===!1?(assert(s.enableNone,'`"none"` or `false` is not a valid value on index option.'),d.models=[],d):(l==="all"&&(assert(s.enableAll,'`"all"` is not a valid value on index option.'),l=u=c=null),d.models=t.queryComponents({mainType:n,index:l,id:u,name:c}),d)}function setAttribute(t,n,a){t.setAttribute?t.setAttribute(n,a):t[n]=a}function getAttribute(t,n){return t.getAttribute?t.getAttribute(n):t[n]}function getTooltipRenderMode(t){return t==="auto"?env.domSupported?"html":"richText":t||"html"}function groupData(t,n){var a=createHashMap(),s=[];return each$f(t,function(l){var u=n(l);(a.get(u)||(s.push(u),a.set(u,[]))).push(l)}),{keys:s,buckets:a}}function interpolateRawValues(t,n,a,s,l){var u=n==null||n==="auto";if(s==null)return s;if(isNumber(s)){var c=interpolateNumber(a||0,s,l);return round$3(c,u?Math.max(getPrecision(a||0),getPrecision(s)):n)}else{if(isString$1(s))return l<1?a:s;for(var d=[],Ct=a,ar=s,en=Math.max(Ct?Ct.length:0,ar.length),tn=0;tn<en;++tn){var on=t.getDimensionInfo(tn);if(on&&on.type==="ordinal")d[tn]=(l<1&&Ct?Ct:ar)[tn];else{var fn=Ct&&Ct[tn]?Ct[tn]:0,dn=ar[tn],c=interpolateNumber(fn,dn,l);d[tn]=round$3(c,u?Math.max(getPrecision(fn),getPrecision(dn)):n)}}return d}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(t){var n={main:"",sub:""};if(t){var a=t.split(TYPE_DELIMITER);n.main=a[0]||"",n.sub=a[1]||""}return n}function checkClassType(t){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function isExtendedClass(t){return!!(t&&t[IS_EXTENDED_CLASS])}function enableClassExtend(t,n){t.$constructor=t,t.extend=function(a){var s=this,l;return isESClass(s)?l=(function(u){__extends(c,u);function c(){return u.apply(this,arguments)||this}return c})(s):(l=function(){(a.$constructor||s).apply(this,arguments)},inherits(l,this)),extend(l.prototype,a),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=s,l}}function isESClass(t){return isFunction$1(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function mountExtend(t,n){t.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(t){var n=["__\0is_clz",classBase++].join("_");t.prototype[n]=!0,t.isInstance=function(a){return!!(a&&a[n])}}function superCall(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return this.superClass.prototype[n].apply(t,a)}function superApply(t,n,a){return this.superClass.prototype[n].apply(t,a)}function enableClassManagement(t){var n={};t.registerClass=function(s){var l=s.type||s.prototype.type;if(l){checkClassType(l),s.prototype.type=l;var u=parseClassType(l);if(!u.sub)n[u.main]=s;else if(u.sub!==IS_CONTAINER){var c=a(u);c[u.sub]=s}}return s},t.getClass=function(s,l,u){var c=n[s];if(c&&c[IS_CONTAINER]&&(c=l?c[l]:null),u&&!c)throw new Error(l?"Component "+s+"."+(l||"")+" is used but not imported.":s+".type should be specified.");return c},t.getClassesByMainType=function(s){var l=parseClassType(s),u=[],c=n[l.main];return c&&c[IS_CONTAINER]?each$f(c,function(d,Ct){Ct!==IS_CONTAINER&&u.push(d)}):u.push(c),u},t.hasClass=function(s){var l=parseClassType(s);return!!n[l.main]},t.getAllClassMainTypes=function(){var s=[];return each$f(n,function(l,u){s.push(u)}),s},t.hasSubTypes=function(s){var l=parseClassType(s),u=n[l.main];return u&&u[IS_CONTAINER]};function a(s){var l=n[s.main];return(!l||!l[IS_CONTAINER])&&(l=n[s.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(t,n){for(var a=0;a<t.length;a++)t[a][1]||(t[a][1]=t[a][0]);return n=n||!1,function(s,l,u){for(var c={},d=0;d<t.length;d++){var Ct=t[d][1];if(!(l&&indexOf(l,Ct)>=0||u&&indexOf(u,Ct)<0)){var ar=s.getShallow(Ct,n);ar!=null&&(c[t[d][0]]=ar)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=(function(){function t(){}return t.prototype.getAreaStyle=function(n,a){return getAreaStyle(this,n,a)},t})(),globalImageCache=new LRU(50);function findExistImage(t){if(typeof t=="string"){var n=globalImageCache.get(t);return n&&n.image}else return t}function createOrUpdateImage(t,n,a,s,l){if(t)if(typeof t=="string"){if(n&&n.__zrImageSrc===t||!a)return n;var u=globalImageCache.get(t),c={hostEl:a,cb:s,cbPayload:l};return u?(n=u.image,!isImageReady(n)&&u.pending.push(c)):(n=platformApi.loadImage(t,imageOnLoad,imageOnLoad),n.__zrImageSrc=t,globalImageCache.put(t,n.__cachedImgObj={image:n,pending:[c]})),n}else return t;else return n}function imageOnLoad(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<t.pending.length;n++){var a=t.pending[n],s=a.cb;s&&s(this,a.cbPayload),a.hostEl.dirty()}t.pending.length=0}function isImageReady(t){return t&&t.width&&t.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(t,n,a,s,l){var u={};return truncateText2(u,t,n,a,s,l),u.text}function truncateText2(t,n,a,s,l,u){if(!a){t.text="",t.isTruncated=!1;return}var c=(n+"").split(`
`);u=prepareTruncateOptions(a,s,l,u);for(var d=!1,Ct={},ar=0,en=c.length;ar<en;ar++)truncateSingleLine(Ct,c[ar],u),c[ar]=Ct.textLine,d=d||Ct.isTruncated;t.text=c.join(`
`),t.isTruncated=d}function prepareTruncateOptions(t,n,a,s){s=s||{};var l=extend({},s);l.font=n,a=retrieve2(a,"..."),l.maxIterations=retrieve2(s.maxIterations,2);var u=l.minChar=retrieve2(s.minChar,0);l.cnCharWidth=getWidth("",n);var c=l.ascCharWidth=getWidth("a",n);l.placeholder=retrieve2(s.placeholder,"");for(var d=t=Math.max(0,t-1),Ct=0;Ct<u&&d>=c;Ct++)d-=c;var ar=getWidth(a,n);return ar>d&&(a="",ar=0),d=t-ar,l.ellipsis=a,l.ellipsisWidth=ar,l.contentWidth=d,l.containerWidth=t,l}function truncateSingleLine(t,n,a){var s=a.containerWidth,l=a.font,u=a.contentWidth;if(!s){t.textLine="",t.isTruncated=!1;return}var c=getWidth(n,l);if(c<=s){t.textLine=n,t.isTruncated=!1;return}for(var d=0;;d++){if(c<=u||d>=a.maxIterations){n+=a.ellipsis;break}var Ct=d===0?estimateLength(n,u,a.ascCharWidth,a.cnCharWidth):c>0?Math.floor(n.length*u/c):0;n=n.substr(0,Ct),c=getWidth(n,l)}n===""&&(n=a.placeholder),t.textLine=n,t.isTruncated=!0}function estimateLength(t,n,a,s){for(var l=0,u=0,c=t.length;u<c&&l<n;u++){var d=t.charCodeAt(u);l+=0<=d&&d<=127?a:s}return u}function parsePlainText(t,n){t!=null&&(t+="");var a=n.overflow,s=n.padding,l=n.font,u=a==="truncate",c=getLineHeight(l),d=retrieve2(n.lineHeight,c),Ct=!!n.backgroundColor,ar=n.lineOverflow==="truncate",en=!1,tn=n.width,on;tn!=null&&(a==="break"||a==="breakAll")?on=t?wrapText(t,n.font,tn,a==="breakAll",0).lines:[]:on=t?t.split(`
`):[];var fn=on.length*d,dn=retrieve2(n.height,fn);if(fn>dn&&ar){var Cn=Math.floor(dn/d);en=en||on.length>Cn,on=on.slice(0,Cn)}if(t&&u&&tn!=null)for(var Rn=prepareTruncateOptions(tn,l,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),ax={},ox=0;ox<on.length;ox++)truncateSingleLine(ax,on[ox],Rn),on[ox]=ax.textLine,en=en||ax.isTruncated;for(var sx=dn,lx=0,ox=0;ox<on.length;ox++)lx=Math.max(getWidth(on[ox],l),lx);tn==null&&(tn=lx);var cx=lx;return s&&(sx+=s[0]+s[2],cx+=s[1]+s[3],tn+=s[1]+s[3]),Ct&&(cx=tn),{lines:on,height:dn,outerWidth:cx,outerHeight:sx,lineHeight:d,calculatedLineHeight:c,contentWidth:lx,contentHeight:fn,width:tn,isTruncated:en}}var RichTextToken=(function(){function t(){}return t})(),RichTextLine=(function(){function t(n){this.tokens=[],n&&(this.tokens=n)}return t})(),RichTextContentBlock=(function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t})();function parseRichText(t,n){var a=new RichTextContentBlock;if(t!=null&&(t+=""),!t)return a;for(var s=n.width,l=n.height,u=n.overflow,c=(u==="break"||u==="breakAll")&&s!=null?{width:s,accumWidth:0,breakAll:u==="breakAll"}:null,d=STYLE_REG.lastIndex=0,Ct;(Ct=STYLE_REG.exec(t))!=null;){var ar=Ct.index;ar>d&&pushTokens(a,t.substring(d,ar),n,c),pushTokens(a,Ct[2],n,c,Ct[1]),d=STYLE_REG.lastIndex}d<t.length&&pushTokens(a,t.substring(d,t.length),n,c);var en=[],tn=0,on=0,fn=n.padding,dn=u==="truncate",Cn=n.lineOverflow==="truncate",Rn={};function ax(Cx,Lx,qx){Cx.width=Lx,Cx.lineHeight=qx,tn+=qx,on=Math.max(on,Lx)}e:for(var ox=0;ox<a.lines.length;ox++){for(var sx=a.lines[ox],lx=0,cx=0,fx=0;fx<sx.tokens.length;fx++){var gx=sx.tokens[fx],mx=gx.styleName&&n.rich[gx.styleName]||{},px=gx.textPadding=mx.padding,hx=px?px[1]+px[3]:0,vx=gx.font=mx.font||n.font;gx.contentHeight=getLineHeight(vx);var yx=retrieve2(mx.height,gx.contentHeight);if(gx.innerHeight=yx,px&&(yx+=px[0]+px[2]),gx.height=yx,gx.lineHeight=retrieve3(mx.lineHeight,n.lineHeight,yx),gx.align=mx&&mx.align||n.align,gx.verticalAlign=mx&&mx.verticalAlign||"middle",Cn&&l!=null&&tn+gx.lineHeight>l){var Sx=a.lines.length;fx>0?(sx.tokens=sx.tokens.slice(0,fx),ax(sx,cx,lx),a.lines=a.lines.slice(0,ox+1)):a.lines=a.lines.slice(0,ox),a.isTruncated=a.isTruncated||a.lines.length<Sx;break e}var _x=mx.width,Ex=_x==null||_x==="auto";if(typeof _x=="string"&&_x.charAt(_x.length-1)==="%")gx.percentWidth=_x,en.push(gx),gx.contentWidth=getWidth(gx.text,vx);else{if(Ex){var bx=mx.backgroundColor,Ax=bx&&bx.image;Ax&&(Ax=findExistImage(Ax),isImageReady(Ax)&&(gx.width=Math.max(gx.width,Ax.width*yx/Ax.height)))}var Mx=dn&&s!=null?s-cx:null;Mx!=null&&Mx<gx.width?!Ex||Mx<hx?(gx.text="",gx.width=gx.contentWidth=0):(truncateText2(Rn,gx.text,Mx-hx,vx,n.ellipsis,{minChar:n.truncateMinChar}),gx.text=Rn.text,a.isTruncated=a.isTruncated||Rn.isTruncated,gx.width=gx.contentWidth=getWidth(gx.text,vx)):gx.contentWidth=getWidth(gx.text,vx)}gx.width+=hx,cx+=gx.width,mx&&(lx=Math.max(lx,gx.lineHeight))}ax(sx,cx,lx)}a.outerWidth=a.width=retrieve2(s,on),a.outerHeight=a.height=retrieve2(l,tn),a.contentHeight=tn,a.contentWidth=on,fn&&(a.outerWidth+=fn[1]+fn[3],a.outerHeight+=fn[0]+fn[2]);for(var ox=0;ox<en.length;ox++){var gx=en[ox],Rx=gx.percentWidth;gx.width=parseInt(Rx,10)/100*a.width}return a}function pushTokens(t,n,a,s,l){var u=n==="",c=l&&a.rich[l]||{},d=t.lines,Ct=c.font||a.font,ar=!1,en,tn;if(s){var on=c.padding,fn=on?on[1]+on[3]:0;if(c.width!=null&&c.width!=="auto"){var dn=parsePercent$1(c.width,s.width)+fn;d.length>0&&dn+s.accumWidth>s.width&&(en=n.split(`
`),ar=!0),s.accumWidth=dn}else{var Cn=wrapText(n,Ct,s.width,s.breakAll,s.accumWidth);s.accumWidth=Cn.accumWidth+fn,tn=Cn.linesWidths,en=Cn.lines}}else en=n.split(`
`);for(var Rn=0;Rn<en.length;Rn++){var ax=en[Rn],ox=new RichTextToken;if(ox.styleName=l,ox.text=ax,ox.isLineHolder=!ax&&!u,typeof c.width=="number"?ox.width=c.width:ox.width=tn?tn[Rn]:getWidth(ax,Ct),!Rn&&!ar){var sx=(d[d.length-1]||(d[0]=new RichTextLine)).tokens,lx=sx.length;lx===1&&sx[0].isLineHolder?sx[0]=ox:(ax||!lx||u)&&sx.push(ox)}else d.push(new RichTextLine([ox]))}}function isAlphabeticLetter(t){var n=t.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(t,n){return t[n]=!0,t},{});function isWordBreakChar(t){return isAlphabeticLetter(t)?!!breakCharMap[t]:!0}function wrapText(t,n,a,s,l){for(var u=[],c=[],d="",Ct="",ar=0,en=0,tn=0;tn<t.length;tn++){var on=t.charAt(tn);if(on===`
`){Ct&&(d+=Ct,en+=ar),u.push(d),c.push(en),d="",Ct="",ar=0,en=0;continue}var fn=getWidth(on,n),dn=s?!1:!isWordBreakChar(on);if(u.length?en+fn>a:l+en+fn>a){en?(d||Ct)&&(dn?(d||(d=Ct,Ct="",ar=0,en=ar),u.push(d),c.push(en-ar),Ct+=on,ar+=fn,d="",en=ar):(Ct&&(d+=Ct,Ct="",ar=0),u.push(d),c.push(en),d=on,en=fn)):dn?(u.push(Ct),c.push(ar),Ct=on,ar=fn):(u.push(on),c.push(fn));continue}en+=fn,dn?(Ct+=on,ar+=fn):(Ct&&(d+=Ct,Ct="",ar=0),d+=on)}return!u.length&&!d&&(d=t,Ct="",ar=0),Ct&&(d+=Ct),d&&(u.push(d),c.push(en)),u.length===1&&(en+=l),{accumWidth:en,lines:u,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype._init=function(a){for(var s=keys(a),l=0;l<s.length;l++){var u=s[l];u==="style"?this.useStyle(a[u]):t.prototype.attrKV.call(this,u,a[u])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(a,s,l,u){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,a,s)||c&&!c[0]&&!c[3])return!1;if(l&&this.__clipPaths){for(var d=0;d<this.__clipPaths.length;++d)if(this.__clipPaths[d].isZeroArea())return!1}if(u&&this.parent)for(var Ct=this.parent;Ct;){if(Ct.ignore)return!1;Ct=Ct.parent}return!0},n.prototype.contain=function(a,s){return this.rectContain(a,s)},n.prototype.traverse=function(a,s){a.call(s,this)},n.prototype.rectContain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();return u.contain(l[0],l[1])},n.prototype.getPaintRect=function(){var a=this._paintRect;if(!this._paintRect||this.__dirty){var s=this.transform,l=this.getBoundingRect(),u=this.style,c=u.shadowBlur||0,d=u.shadowOffsetX||0,Ct=u.shadowOffsetY||0;a=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),s?BoundingRect.applyTransform(a,l,s):a.copy(l),(c||d||Ct)&&(a.width+=c*2+Math.abs(d),a.height+=c*2+Math.abs(Ct),a.x=Math.min(a.x,a.x+d-c),a.y=Math.min(a.y,a.y+Ct-c));var ar=this.dirtyRectTolerance;a.isZero()||(a.x=Math.floor(a.x-ar),a.y=Math.floor(a.y-ar),a.width=Math.ceil(a.width+1+ar*2),a.height=Math.ceil(a.height+1+ar*2))}return a},n.prototype.setPrevPaintRect=function(a){a?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(a)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(a){return this.animate("style",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(a,s){a!=="style"?t.prototype.attrKV.call(this,a,s):this.style?this.setStyle(s):this.useStyle(s)},n.prototype.setStyle=function(a,s){return typeof a=="string"?this.style[a]=s:extend(this.style,a),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(a){a||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(a){return createObject(DEFAULT_COMMON_STYLE,a)},n.prototype.useStyle=function(a){a[STYLE_MAGIC_KEY]||(a=this.createStyle(a)),this.__inHover?this.__hoverStyle=a:this.style=a,this.dirtyStyle()},n.prototype.isStyleObject=function(a){return a[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.style&&!s.style&&(s.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(a,s,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(a,s,l,u,c,d){t.prototype._applyStateObj.call(this,a,s,l,u,c,d);var Ct=!(s&&u),ar;if(s&&s.style?c?u?ar=s.style:(ar=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(ar,s.style)):(ar=this._mergeStyle(this.createStyle(),u?this.style:l.style),this._mergeStyle(ar,s.style)):Ct&&(ar=l.style),ar)if(c){var en=this.style;if(this.style=this.createStyle(Ct?{}:en),Ct)for(var tn=keys(en),on=0;on<tn.length;on++){var fn=tn[on];fn in ar&&(ar[fn]=ar[fn],this.style[fn]=en[fn])}for(var dn=keys(ar),on=0;on<dn.length;on++){var fn=dn[on];this.style[fn]=this.style[fn]}this._transitionState(a,{style:ar},d,this.getAnimationStyleProps())}else this.useStyle(ar);for(var Cn=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,on=0;on<Cn.length;on++){var fn=Cn[on];s&&s[fn]!=null?this[fn]=s[fn]:Ct&&l[fn]!=null&&(this[fn]=l[fn])}},n.prototype._mergeStates=function(a){for(var s=t.prototype._mergeStates.call(this,a),l,u=0;u<a.length;u++){var c=a[u];c.style&&(l=l||{},this._mergeStyle(l,c.style))}return l&&(s.style=l),s},n.prototype._mergeStyle=function(a,s){return extend(a,s),a},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=(function(){var a=n.prototype;a.type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT})(),n})(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(t,n,a){return tmpRect.copy(t.getBoundingRect()),t.transform&&tmpRect.applyTransform(t.transform),viewRect.width=n,viewRect.height=a,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(t,n,a){if(t.length!==0){for(var s=t[0],l=s[0],u=s[0],c=s[1],d=s[1],Ct=1;Ct<t.length;Ct++)s=t[Ct],l=mathMin$9(l,s[0]),u=mathMax$9(u,s[0]),c=mathMin$9(c,s[1]),d=mathMax$9(d,s[1]);n[0]=l,n[1]=c,a[0]=u,a[1]=d}}function fromLine(t,n,a,s,l,u){l[0]=mathMin$9(t,a),l[1]=mathMin$9(n,s),u[0]=mathMax$9(t,a),u[1]=mathMax$9(n,s)}var xDim=[],yDim=[];function fromCubic(t,n,a,s,l,u,c,d,Ct,ar){var en=cubicExtrema,tn=cubicAt,on=en(t,a,l,c,xDim);Ct[0]=1/0,Ct[1]=1/0,ar[0]=-1/0,ar[1]=-1/0;for(var fn=0;fn<on;fn++){var dn=tn(t,a,l,c,xDim[fn]);Ct[0]=mathMin$9(dn,Ct[0]),ar[0]=mathMax$9(dn,ar[0])}on=en(n,s,u,d,yDim);for(var fn=0;fn<on;fn++){var Cn=tn(n,s,u,d,yDim[fn]);Ct[1]=mathMin$9(Cn,Ct[1]),ar[1]=mathMax$9(Cn,ar[1])}Ct[0]=mathMin$9(t,Ct[0]),ar[0]=mathMax$9(t,ar[0]),Ct[0]=mathMin$9(c,Ct[0]),ar[0]=mathMax$9(c,ar[0]),Ct[1]=mathMin$9(n,Ct[1]),ar[1]=mathMax$9(n,ar[1]),Ct[1]=mathMin$9(d,Ct[1]),ar[1]=mathMax$9(d,ar[1])}function fromQuadratic(t,n,a,s,l,u,c,d){var Ct=quadraticExtremum,ar=quadraticAt$1,en=mathMax$9(mathMin$9(Ct(t,a,l),1),0),tn=mathMax$9(mathMin$9(Ct(n,s,u),1),0),on=ar(t,a,l,en),fn=ar(n,s,u,tn);c[0]=mathMin$9(t,l,on),c[1]=mathMin$9(n,u,fn),d[0]=mathMax$9(t,l,on),d[1]=mathMax$9(n,u,fn)}function fromArc(t,n,a,s,l,u,c,d,Ct){var ar=min$1,en=max$1,tn=Math.abs(l-u);if(tn%PI2$8<1e-4&&tn>1e-4){d[0]=t-a,d[1]=n-s,Ct[0]=t+a,Ct[1]=n+s;return}if(start[0]=mathCos$4(l)*a+t,start[1]=mathSin$4(l)*s+n,end[0]=mathCos$4(u)*a+t,end[1]=mathSin$4(u)*s+n,ar(d,start,end),en(Ct,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),l>u&&!c?u+=PI2$8:l<u&&c&&(l+=PI2$8),c){var on=u;u=l,l=on}for(var fn=0;fn<u;fn+=Math.PI/2)fn>l&&(extremity[0]=mathCos$4(fn)*a+t,extremity[1]=mathSin$4(fn)*s+n,ar(d,extremity,d),en(Ct,extremity,Ct))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(t){var n=Math.round(t/PI$8*1e8)/1e8;return n%2*PI$8}function normalizeArcAngles(t,n){var a=modPI2(t[0]);a<0&&(a+=PI2$7);var s=a-t[0],l=t[1];l+=s,!n&&l-a>=PI2$7?l=a+PI2$7:n&&a-l>=PI2$7?l=a-PI2$7:!n&&a>l?l=a+(PI2$7-modPI2(a-l)):n&&a<l&&(l=a-(PI2$7-modPI2(l-a))),t[0]=a,t[1]=l}var PathProxy=(function(){function t(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(n,a,s){s=s||0,s>0&&(this._ux=mathAbs$2(s/devicePixelRatio/n)||0,this._uy=mathAbs$2(s/devicePixelRatio/a)||0)},t.prototype.setDPR=function(n){this.dpr=n},t.prototype.setContext=function(n){this._ctx=n},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(n,a){return this._drawPendingPt(),this.addData(CMD$4.M,n,a),this._ctx&&this._ctx.moveTo(n,a),this._x0=n,this._y0=a,this._xi=n,this._yi=a,this},t.prototype.lineTo=function(n,a){var s=mathAbs$2(n-this._xi),l=mathAbs$2(a-this._yi),u=s>this._ux||l>this._uy;if(this.addData(CMD$4.L,n,a),this._ctx&&u&&this._ctx.lineTo(n,a),u)this._xi=n,this._yi=a,this._pendingPtDist=0;else{var c=s*s+l*l;c>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=a,this._pendingPtDist=c)}return this},t.prototype.bezierCurveTo=function(n,a,s,l,u,c){return this._drawPendingPt(),this.addData(CMD$4.C,n,a,s,l,u,c),this._ctx&&this._ctx.bezierCurveTo(n,a,s,l,u,c),this._xi=u,this._yi=c,this},t.prototype.quadraticCurveTo=function(n,a,s,l){return this._drawPendingPt(),this.addData(CMD$4.Q,n,a,s,l),this._ctx&&this._ctx.quadraticCurveTo(n,a,s,l),this._xi=s,this._yi=l,this},t.prototype.arc=function(n,a,s,l,u,c){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,c),l=tmpAngles[0],u=tmpAngles[1];var d=u-l;return this.addData(CMD$4.A,n,a,s,s,l,d,0,c?0:1),this._ctx&&this._ctx.arc(n,a,s,l,u,c),this._xi=mathCos$3(u)*s+n,this._yi=mathSin$3(u)*s+a,this},t.prototype.arcTo=function(n,a,s,l,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,a,s,l,u),this},t.prototype.rect=function(n,a,s,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,a,s,l),this.addData(CMD$4.R,n,a,s,l),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var n=this._ctx,a=this._x0,s=this._y0;return n&&n.closePath(),this._xi=a,this._yi=s,this},t.prototype.fill=function(n){n&&n.fill(),this.toStatic()},t.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(n){var a=n.length;!(this.data&&this.data.length===a)&&hasTypedArray&&(this.data=new Float32Array(a));for(var s=0;s<a;s++)this.data[s]=n[s];this._len=a},t.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var a=n.length,s=0,l=this._len,u=0;u<a;u++)s+=n[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+s));for(var u=0;u<a;u++)for(var c=n[u].data,d=0;d<c.length;d++)this.data[l++]=c[d];this._len=l},t.prototype.addData=function(n,a,s,l,u,c,d,Ct,ar){if(this._saveData){var en=this.data;this._len+arguments.length>en.length&&(this._expandData(),en=this.data);for(var tn=0;tn<arguments.length;tn++)en[this._len++]=arguments[tn]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],a=0;a<this._len;a++)n[a]=this.data[a];this.data=n}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},t.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,a=0,s=0,l=0,u=0,c;for(c=0;c<this._len;){var d=n[c++],Ct=c===1;switch(Ct&&(a=n[c],s=n[c+1],l=a,u=s),d){case CMD$4.M:a=l=n[c++],s=u=n[c++],min2[0]=l,min2[1]=u,max2[0]=l,max2[1]=u;break;case CMD$4.L:fromLine(a,s,n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.C:fromCubic(a,s,n[c++],n[c++],n[c++],n[c++],n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.Q:fromQuadratic(a,s,n[c++],n[c++],n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.A:var ar=n[c++],en=n[c++],tn=n[c++],on=n[c++],fn=n[c++],dn=n[c++]+fn;c+=1;var Cn=!n[c++];Ct&&(l=mathCos$3(fn)*tn+ar,u=mathSin$3(fn)*on+en),fromArc(ar,en,tn,on,fn,dn,Cn,min2,max2),a=mathCos$3(dn)*tn+ar,s=mathSin$3(dn)*on+en;break;case CMD$4.R:l=a=n[c++],u=s=n[c++];var Rn=n[c++],ax=n[c++];fromLine(l,u,l+Rn,u+ax,min2,max2);break;case CMD$4.Z:a=l,s=u;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},t.prototype._calculateLength=function(){var n=this.data,a=this._len,s=this._ux,l=this._uy,u=0,c=0,d=0,Ct=0;this._pathSegLen||(this._pathSegLen=[]);for(var ar=this._pathSegLen,en=0,tn=0,on=0;on<a;){var fn=n[on++],dn=on===1;dn&&(u=n[on],c=n[on+1],d=u,Ct=c);var Cn=-1;switch(fn){case CMD$4.M:u=d=n[on++],c=Ct=n[on++];break;case CMD$4.L:{var Rn=n[on++],ax=n[on++],ox=Rn-u,sx=ax-c;(mathAbs$2(ox)>s||mathAbs$2(sx)>l||on===a-1)&&(Cn=Math.sqrt(ox*ox+sx*sx),u=Rn,c=ax);break}case CMD$4.C:{var lx=n[on++],cx=n[on++],Rn=n[on++],ax=n[on++],fx=n[on++],gx=n[on++];Cn=cubicLength(u,c,lx,cx,Rn,ax,fx,gx,10),u=fx,c=gx;break}case CMD$4.Q:{var lx=n[on++],cx=n[on++],Rn=n[on++],ax=n[on++];Cn=quadraticLength(u,c,lx,cx,Rn,ax,10),u=Rn,c=ax;break}case CMD$4.A:var mx=n[on++],px=n[on++],hx=n[on++],vx=n[on++],yx=n[on++],Sx=n[on++],_x=Sx+yx;on+=1,dn&&(d=mathCos$3(yx)*hx+mx,Ct=mathSin$3(yx)*vx+px),Cn=mathMax$8(hx,vx)*mathMin$8(PI2$7,Math.abs(Sx)),u=mathCos$3(_x)*hx+mx,c=mathSin$3(_x)*vx+px;break;case CMD$4.R:{d=u=n[on++],Ct=c=n[on++];var Ex=n[on++],bx=n[on++];Cn=Ex*2+bx*2;break}case CMD$4.Z:{var ox=d-u,sx=Ct-c;Cn=Math.sqrt(ox*ox+sx*sx),u=d,c=Ct;break}}Cn>=0&&(ar[tn++]=Cn,en+=Cn)}return this._pathLen=en,en},t.prototype.rebuildPath=function(n,a){var s=this.data,l=this._ux,u=this._uy,c=this._len,d,Ct,ar,en,tn,on,fn=a<1,dn,Cn,Rn=0,ax=0,ox,sx=0,lx,cx;if(!(fn&&(this._pathSegLen||this._calculateLength(),dn=this._pathSegLen,Cn=this._pathLen,ox=a*Cn,!ox)))e:for(var fx=0;fx<c;){var gx=s[fx++],mx=fx===1;switch(mx&&(ar=s[fx],en=s[fx+1],d=ar,Ct=en),gx!==CMD$4.L&&sx>0&&(n.lineTo(lx,cx),sx=0),gx){case CMD$4.M:d=ar=s[fx++],Ct=en=s[fx++],n.moveTo(ar,en);break;case CMD$4.L:{tn=s[fx++],on=s[fx++];var px=mathAbs$2(tn-ar),hx=mathAbs$2(on-en);if(px>l||hx>u){if(fn){var vx=dn[ax++];if(Rn+vx>ox){var yx=(ox-Rn)/vx;n.lineTo(ar*(1-yx)+tn*yx,en*(1-yx)+on*yx);break e}Rn+=vx}n.lineTo(tn,on),ar=tn,en=on,sx=0}else{var Sx=px*px+hx*hx;Sx>sx&&(lx=tn,cx=on,sx=Sx)}break}case CMD$4.C:{var _x=s[fx++],Ex=s[fx++],bx=s[fx++],Ax=s[fx++],Mx=s[fx++],Rx=s[fx++];if(fn){var vx=dn[ax++];if(Rn+vx>ox){var yx=(ox-Rn)/vx;cubicSubdivide(ar,_x,bx,Mx,yx,tmpOutX),cubicSubdivide(en,Ex,Ax,Rx,yx,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}Rn+=vx}n.bezierCurveTo(_x,Ex,bx,Ax,Mx,Rx),ar=Mx,en=Rx;break}case CMD$4.Q:{var _x=s[fx++],Ex=s[fx++],bx=s[fx++],Ax=s[fx++];if(fn){var vx=dn[ax++];if(Rn+vx>ox){var yx=(ox-Rn)/vx;quadraticSubdivide(ar,_x,bx,yx,tmpOutX),quadraticSubdivide(en,Ex,Ax,yx,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}Rn+=vx}n.quadraticCurveTo(_x,Ex,bx,Ax),ar=bx,en=Ax;break}case CMD$4.A:var Cx=s[fx++],Lx=s[fx++],qx=s[fx++],Ix=s[fx++],Px=s[fx++],Nx=s[fx++],Bx=s[fx++],$x=!s[fx++],Vx=qx>Ix?qx:Ix,Gx=mathAbs$2(qx-Ix)>.001,Zx=Px+Nx,jx=!1;if(fn){var vx=dn[ax++];Rn+vx>ox&&(Zx=Px+Nx*(ox-Rn)/vx,jx=!0),Rn+=vx}if(Gx&&n.ellipse?n.ellipse(Cx,Lx,qx,Ix,Bx,Px,Zx,$x):n.arc(Cx,Lx,Vx,Px,Zx,$x),jx)break e;mx&&(d=mathCos$3(Px)*qx+Cx,Ct=mathSin$3(Px)*Ix+Lx),ar=mathCos$3(Zx)*qx+Cx,en=mathSin$3(Zx)*Ix+Lx;break;case CMD$4.R:d=ar=s[fx],Ct=en=s[fx+1],tn=s[fx++],on=s[fx++];var Hx=s[fx++],iE=s[fx++];if(fn){var vx=dn[ax++];if(Rn+vx>ox){var Xx=ox-Rn;n.moveTo(tn,on),n.lineTo(tn+mathMin$8(Xx,Hx),on),Xx-=Hx,Xx>0&&n.lineTo(tn+Hx,on+mathMin$8(Xx,iE)),Xx-=iE,Xx>0&&n.lineTo(tn+mathMax$8(Hx-Xx,0),on+iE),Xx-=Hx,Xx>0&&n.lineTo(tn,on+mathMax$8(iE-Xx,0));break e}Rn+=vx}n.rect(tn,on,Hx,iE);break;case CMD$4.Z:if(fn){var vx=dn[ax++];if(Rn+vx>ox){var yx=(ox-Rn)/vx;n.lineTo(ar*(1-yx)+d*yx,en*(1-yx)+Ct*yx);break e}Rn+=vx}n.closePath(),ar=d,en=Ct}}},t.prototype.clone=function(){var n=new t,a=this.data;return n.data=a.slice?a.slice():Array.prototype.slice.call(a),n._len=this._len,n},t.CMD=CMD$4,t.initDefaultProps=(function(){var n=t.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0})(),t})();function containStroke$4(t,n,a,s,l,u,c){if(l===0)return!1;var d=l,Ct=0,ar=t;if(c>n+d&&c>s+d||c<n-d&&c<s-d||u>t+d&&u>a+d||u<t-d&&u<a-d)return!1;if(t!==a)Ct=(n-s)/(t-a),ar=(t*s-a*n)/(t-a);else return Math.abs(u-t)<=d/2;var en=Ct*u-c+ar,tn=en*en/(Ct*Ct+1);return tn<=d/2*d/2}function containStroke$3(t,n,a,s,l,u,c,d,Ct,ar,en){if(Ct===0)return!1;var tn=Ct;if(en>n+tn&&en>s+tn&&en>u+tn&&en>d+tn||en<n-tn&&en<s-tn&&en<u-tn&&en<d-tn||ar>t+tn&&ar>a+tn&&ar>l+tn&&ar>c+tn||ar<t-tn&&ar<a-tn&&ar<l-tn&&ar<c-tn)return!1;var on=cubicProjectPoint(t,n,a,s,l,u,c,d,ar,en,null);return on<=tn/2}function containStroke$2(t,n,a,s,l,u,c,d,Ct){if(c===0)return!1;var ar=c;if(Ct>n+ar&&Ct>s+ar&&Ct>u+ar||Ct<n-ar&&Ct<s-ar&&Ct<u-ar||d>t+ar&&d>a+ar&&d>l+ar||d<t-ar&&d<a-ar&&d<l-ar)return!1;var en=quadraticProjectPoint(t,n,a,s,l,u,d,Ct,null);return en<=ar/2}var PI2$6=Math.PI*2;function normalizeRadian(t){return t%=PI2$6,t<0&&(t+=PI2$6),t}var PI2$5=Math.PI*2;function containStroke$1(t,n,a,s,l,u,c,d,Ct){if(c===0)return!1;var ar=c;d-=t,Ct-=n;var en=Math.sqrt(d*d+Ct*Ct);if(en-ar>a||en+ar<a)return!1;if(Math.abs(s-l)%PI2$5<1e-4)return!0;if(u){var tn=s;s=normalizeRadian(l),l=normalizeRadian(tn)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$5);var on=Math.atan2(Ct,d);return on<0&&(on+=PI2$5),on>=s&&on<=l||on+PI2$5>=s&&on+PI2$5<=l}function windingLine(t,n,a,s,l,u){if(u>n&&u>s||u<n&&u<s||s===n)return 0;var c=(u-n)/(s-n),d=s<n?1:-1;(c===1||c===0)&&(d=s<n?.5:-.5);var Ct=c*(a-t)+t;return Ct===l?1/0:Ct>l?d:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(t,n){return Math.abs(t-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var t=extrema[0];extrema[0]=extrema[1],extrema[1]=t}function windingCubic(t,n,a,s,l,u,c,d,Ct,ar){if(ar>n&&ar>s&&ar>u&&ar>d||ar<n&&ar<s&&ar<u&&ar<d)return 0;var en=cubicRootAt(n,s,u,d,ar,roots);if(en===0)return 0;for(var tn=0,on=-1,fn=void 0,dn=void 0,Cn=0;Cn<en;Cn++){var Rn=roots[Cn],ax=Rn===0||Rn===1?.5:1,ox=cubicAt(t,a,l,c,Rn);ox<Ct||(on<0&&(on=cubicExtrema(n,s,u,d,extrema),extrema[1]<extrema[0]&&on>1&&swapExtrema(),fn=cubicAt(n,s,u,d,extrema[0]),on>1&&(dn=cubicAt(n,s,u,d,extrema[1]))),on===2?Rn<extrema[0]?tn+=fn<n?ax:-ax:Rn<extrema[1]?tn+=dn<fn?ax:-ax:tn+=d<dn?ax:-ax:Rn<extrema[0]?tn+=fn<n?ax:-ax:tn+=d<fn?ax:-ax)}return tn}function windingQuadratic(t,n,a,s,l,u,c,d){if(d>n&&d>s&&d>u||d<n&&d<s&&d<u)return 0;var Ct=quadraticRootAt(n,s,u,d,roots);if(Ct===0)return 0;var ar=quadraticExtremum(n,s,u);if(ar>=0&&ar<=1){for(var en=0,tn=quadraticAt$1(n,s,u,ar),on=0;on<Ct;on++){var fn=roots[on]===0||roots[on]===1?.5:1,dn=quadraticAt$1(t,a,l,roots[on]);dn<c||(roots[on]<ar?en+=tn<n?fn:-fn:en+=u<tn?fn:-fn)}return en}else{var fn=roots[0]===0||roots[0]===1?.5:1,dn=quadraticAt$1(t,a,l,roots[0]);return dn<c?0:u<n?fn:-fn}}function windingArc(t,n,a,s,l,u,c,d){if(d-=n,d>a||d<-a)return 0;var Ct=Math.sqrt(a*a-d*d);roots[0]=-Ct,roots[1]=Ct;var ar=Math.abs(s-l);if(ar<1e-4)return 0;if(ar>=PI2$4-1e-4){s=0,l=PI2$4;var en=u?1:-1;return c>=roots[0]+t&&c<=roots[1]+t?en:0}if(s>l){var tn=s;s=l,l=tn}s<0&&(s+=PI2$4,l+=PI2$4);for(var on=0,fn=0;fn<2;fn++){var dn=roots[fn];if(dn+t>c){var Cn=Math.atan2(d,dn),en=u?1:-1;Cn<0&&(Cn=PI2$4+Cn),(Cn>=s&&Cn<=l||Cn+PI2$4>=s&&Cn+PI2$4<=l)&&(Cn>Math.PI/2&&Cn<Math.PI*1.5&&(en=-en),on+=en)}}return on}function containPath(t,n,a,s,l){for(var u=t.data,c=t.len(),d=0,Ct=0,ar=0,en=0,tn=0,on,fn,dn=0;dn<c;){var Cn=u[dn++],Rn=dn===1;switch(Cn===CMD$3.M&&dn>1&&(a||(d+=windingLine(Ct,ar,en,tn,s,l))),Rn&&(Ct=u[dn],ar=u[dn+1],en=Ct,tn=ar),Cn){case CMD$3.M:en=u[dn++],tn=u[dn++],Ct=en,ar=tn;break;case CMD$3.L:if(a){if(containStroke$4(Ct,ar,u[dn],u[dn+1],n,s,l))return!0}else d+=windingLine(Ct,ar,u[dn],u[dn+1],s,l)||0;Ct=u[dn++],ar=u[dn++];break;case CMD$3.C:if(a){if(containStroke$3(Ct,ar,u[dn++],u[dn++],u[dn++],u[dn++],u[dn],u[dn+1],n,s,l))return!0}else d+=windingCubic(Ct,ar,u[dn++],u[dn++],u[dn++],u[dn++],u[dn],u[dn+1],s,l)||0;Ct=u[dn++],ar=u[dn++];break;case CMD$3.Q:if(a){if(containStroke$2(Ct,ar,u[dn++],u[dn++],u[dn],u[dn+1],n,s,l))return!0}else d+=windingQuadratic(Ct,ar,u[dn++],u[dn++],u[dn],u[dn+1],s,l)||0;Ct=u[dn++],ar=u[dn++];break;case CMD$3.A:var ax=u[dn++],ox=u[dn++],sx=u[dn++],lx=u[dn++],cx=u[dn++],fx=u[dn++];dn+=1;var gx=!!(1-u[dn++]);on=Math.cos(cx)*sx+ax,fn=Math.sin(cx)*lx+ox,Rn?(en=on,tn=fn):d+=windingLine(Ct,ar,on,fn,s,l);var mx=(s-ax)*lx/sx+ax;if(a){if(containStroke$1(ax,ox,lx,cx,cx+fx,gx,n,mx,l))return!0}else d+=windingArc(ax,ox,lx,cx,cx+fx,gx,mx,l);Ct=Math.cos(cx+fx)*sx+ax,ar=Math.sin(cx+fx)*lx+ox;break;case CMD$3.R:en=Ct=u[dn++],tn=ar=u[dn++];var px=u[dn++],hx=u[dn++];if(on=en+px,fn=tn+hx,a){if(containStroke$4(en,tn,on,tn,n,s,l)||containStroke$4(on,tn,on,fn,n,s,l)||containStroke$4(on,fn,en,fn,n,s,l)||containStroke$4(en,fn,en,tn,n,s,l))return!0}else d+=windingLine(on,tn,on,fn,s,l),d+=windingLine(en,fn,en,tn,s,l);break;case CMD$3.Z:if(a){if(containStroke$4(Ct,ar,en,tn,n,s,l))return!0}else d+=windingLine(Ct,ar,en,tn,s,l);Ct=en,ar=tn;break}}return!a&&!isAroundEqual$1(ar,tn)&&(d+=windingLine(Ct,ar,en,tn,s,l)||0),d!==0}function contain$2(t,n,a){return containPath(t,0,!1,n,a)}function containStroke(t,n,a,s){return containPath(t,n,!0,a,s)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.update=function(){var a=this;t.prototype.update.call(this);var s=this.style;if(s.decal){var l=this._decalEl=this._decalEl||new n;l.buildPath===n.prototype.buildPath&&(l.buildPath=function(Ct){a.buildPath(Ct,a.shape)}),l.silent=!0;var u=l.style;for(var c in s)u[c]!==s[c]&&(u[c]=s[c]);u.fill=s.fill?s.decal:null,u.decal=null,u.shadowColor=null,s.strokeFirst&&(u.stroke=null);for(var d=0;d<pathCopyParams.length;++d)l[pathCopyParams[d]]=this[pathCopyParams[d]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(a){var s=keys(a);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var u=0;u<s.length;u++){var c=s[u],d=a[c];c==="style"?this.style?extend(this.style,d):this.useStyle(d):c==="shape"?extend(this.shape,d):t.prototype.attrKV.call(this,c,d)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var a=this.style.fill;if(a!=="none"){if(isString$1(a)){var s=lum(a,0);return s>.5?DARK_LABEL_COLOR:s>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(a)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(a){var s=this.style.fill;if(isString$1(s)){var l=this.__zr,u=!!(l&&l.isDarkMode()),c=lum(a,0)<DARK_MODE_THRESHOLD;if(u===c)return s}},n.prototype.buildPath=function(a,s,l){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(a){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,a),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},n.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return!(s==null||s==="none"||!(a.lineWidth>0))},n.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},n.prototype.getBoundingRect=function(){var a=this._rect,s=this.style,l=!a;if(l){var u=!1;this.path||(u=!0,this.createPathProxy());var c=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),a=c.getBoundingRect()}if(this._rect=a,this.hasStroke()&&this.path&&this.path.len()>0){var d=this._rectStroke||(this._rectStroke=a.clone());if(this.__dirty||l){d.copy(a);var Ct=s.strokeNoScale?this.getLineScale():1,ar=s.lineWidth;if(!this.hasFill()){var en=this.strokeContainThreshold;ar=Math.max(ar,en??4)}Ct>1e-10&&(d.width+=ar/Ct,d.height+=ar/Ct,d.x-=ar/Ct/2,d.y-=ar/Ct/2)}return d}return a},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect(),c=this.style;if(a=l[0],s=l[1],u.contain(a,s)){var d=this.path;if(this.hasStroke()){var Ct=c.lineWidth,ar=c.strokeNoScale?this.getLineScale():1;if(ar>1e-10&&(this.hasFill()||(Ct=Math.max(Ct,this.strokeContainThreshold)),containStroke(d,Ct/ar,a,s)))return!0}if(this.hasFill())return contain$2(d,a,s)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(a){return this.animate("shape",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():a==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(a,s){a==="shape"?this.setShape(s):t.prototype.attrKV.call(this,a,s)},n.prototype.setShape=function(a,s){var l=this.shape;return l||(l=this.shape={}),typeof a=="string"?l[a]=s:extend(l,a),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(a){return createObject(DEFAULT_PATH_STYLE,a)},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.shape&&!s.shape&&(s.shape=extend({},this.shape))},n.prototype._applyStateObj=function(a,s,l,u,c,d){t.prototype._applyStateObj.call(this,a,s,l,u,c,d);var Ct=!(s&&u),ar;if(s&&s.shape?c?u?ar=s.shape:(ar=extend({},l.shape),extend(ar,s.shape)):(ar=extend({},u?this.shape:l.shape),extend(ar,s.shape)):Ct&&(ar=l.shape),ar)if(c){this.shape=extend({},this.shape);for(var en={},tn=keys(ar),on=0;on<tn.length;on++){var fn=tn[on];typeof ar[fn]=="object"?this.shape[fn]=ar[fn]:en[fn]=ar[fn]}this._transitionState(a,{shape:en},d)}else this.shape=ar,this.dirtyShape()},n.prototype._mergeStates=function(a){for(var s=t.prototype._mergeStates.call(this,a),l,u=0;u<a.length;u++){var c=a[u];c.shape&&(l=l||{},this._mergeStyle(l,c.shape))}return l&&(s.shape=l),s},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(a){var s=(function(u){__extends(c,u);function c(d){var Ct=u.call(this,d)||this;return a.init&&a.init.call(Ct,d),Ct}return c.prototype.getDefaultStyle=function(){return clone$4(a.style)},c.prototype.getDefaultShape=function(){return clone$4(a.shape)},c})(n);for(var l in a)typeof a[l]=="function"&&(s.prototype[l]=a[l]);return s},n.initDefaultProps=(function(){var a=n.prototype;a.type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT})(),n})(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return s!=null&&s!=="none"&&a.lineWidth>0},n.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},n.prototype.createStyle=function(a){return createObject(DEFAULT_TSPAN_STYLE,a)},n.prototype.setBoundingRect=function(a){this._rect=a},n.prototype.getBoundingRect=function(){var a=this.style;if(!this._rect){var s=a.text;s!=null?s+="":s="";var l=getBoundingRect(s,a.font,a.textAlign,a.textBaseline);if(l.x+=a.x||0,l.y+=a.y||0,this.hasStroke()){var u=a.lineWidth;l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u}this._rect=l}return this._rect},n.initDefaultProps=(function(){var a=n.prototype;a.dirtyRectTolerance=10})(),n})(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var ZRImage=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.createStyle=function(a){return createObject(DEFAULT_IMAGE_STYLE,a)},n.prototype._getSize=function(a){var s=this.style,l=s[a];if(l!=null)return l;var u=isImageLike$1(s.image)?s.image:this.__image;if(!u)return 0;var c=a==="width"?"height":"width",d=s[c];return d==null?u[a]:u[a]/u[c]*d},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var a=this.style;return this._rect||(this._rect=new BoundingRect(a.x||0,a.y||0,this.getWidth(),this.getHeight())),this._rect},n})(Displayable);ZRImage.prototype.type="image";function buildPath$2(t,n){var a=n.x,s=n.y,l=n.width,u=n.height,c=n.r,d,Ct,ar,en;l<0&&(a=a+l,l=-l),u<0&&(s=s+u,u=-u),typeof c=="number"?d=Ct=ar=en=c:c instanceof Array?c.length===1?d=Ct=ar=en=c[0]:c.length===2?(d=ar=c[0],Ct=en=c[1]):c.length===3?(d=c[0],Ct=en=c[1],ar=c[2]):(d=c[0],Ct=c[1],ar=c[2],en=c[3]):d=Ct=ar=en=0;var tn;d+Ct>l&&(tn=d+Ct,d*=l/tn,Ct*=l/tn),ar+en>l&&(tn=ar+en,ar*=l/tn,en*=l/tn),Ct+ar>u&&(tn=Ct+ar,Ct*=u/tn,ar*=u/tn),d+en>u&&(tn=d+en,d*=u/tn,en*=u/tn),t.moveTo(a+d,s),t.lineTo(a+l-Ct,s),Ct!==0&&t.arc(a+l-Ct,s+Ct,Ct,-Math.PI/2,0),t.lineTo(a+l,s+u-ar),ar!==0&&t.arc(a+l-ar,s+u-ar,ar,0,Math.PI/2),t.lineTo(a+en,s+u),en!==0&&t.arc(a+en,s+u-en,en,Math.PI/2,Math.PI),t.lineTo(a,s+d),d!==0&&t.arc(a+d,s+d,d,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(t,n,a){if(n){var s=n.x1,l=n.x2,u=n.y1,c=n.y2;t.x1=s,t.x2=l,t.y1=u,t.y2=c;var d=a&&a.lineWidth;return d&&(round$2(s*2)===round$2(l*2)&&(t.x1=t.x2=subPixelOptimize$1(s,d,!0)),round$2(u*2)===round$2(c*2)&&(t.y1=t.y2=subPixelOptimize$1(u,d,!0))),t}}function subPixelOptimizeRect$1(t,n,a){if(n){var s=n.x,l=n.y,u=n.width,c=n.height;t.x=s,t.y=l,t.width=u,t.height=c;var d=a&&a.lineWidth;return d&&(t.x=subPixelOptimize$1(s,d,!0),t.y=subPixelOptimize$1(l,d,!0),t.width=Math.max(subPixelOptimize$1(s+u,d,!1)-t.x,u===0?0:1),t.height=Math.max(subPixelOptimize$1(l+c,d,!1)-t.y,c===0?0:1)),t}}function subPixelOptimize$1(t,n,a){if(!n)return t;var s=round$2(t*2);return(s+round$2(n))%2===0?s/2:(s+(a?1:-1))/2}var RectShape=(function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t})(),subPixelOptimizeOutputShape$1={},Rect$2=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(a,s){var l,u,c,d;if(this.subPixelOptimize){var Ct=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,s,this.style);l=Ct.x,u=Ct.y,c=Ct.width,d=Ct.height,Ct.r=s.r,s=Ct}else l=s.x,u=s.y,c=s.width,d=s.height;s.r?buildPath$2(a,s):a.rect(l,u,c,d)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n})(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.type="text",s._children=[],s._defaultStyle=DEFAULT_RICH_TEXT_COLOR,s.attr(a),s}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var a=0;a<this._children.length;a++){var s=this._children[a];s.zlevel=this.zlevel,s.z=this.z,s.z2=this.z2,s.culling=this.culling,s.cursor=this.cursor,s.invisible=this.invisible}},n.prototype.updateTransform=function(){var a=this.innerTransformable;a?(a.updateTransform(),a.transform&&(this.transform=a.transform)):t.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(a){var s=this.innerTransformable;return s?s.getLocalTransform(a):t.prototype.getLocalTransform.call(this,a)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=a},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var a=new BoundingRect(0,0,0,0),s=this._children,l=[],u=null,c=0;c<s.length;c++){var d=s[c],Ct=d.getBoundingRect(),ar=d.getLocalTransform(l);ar?(a.copy(Ct),a.applyTransform(ar),u=u||a.clone(),u.union(a)):(u=u||Ct.clone(),u.union(Ct))}this._rect=u||a}return this._rect},n.prototype.setDefaultTextStyle=function(a){this._defaultStyle=a||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(a){},n.prototype._mergeStyle=function(a,s){if(!s)return a;var l=s.rich,u=a.rich||l&&{};return extend(a,s),l&&u?(this._mergeRich(u,l),a.rich=u):u&&(a.rich=u),a},n.prototype._mergeRich=function(a,s){for(var l=keys(s),u=0;u<l.length;u++){var c=l[u];a[c]=a[c]||{},extend(a[c],s[c])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(a){var s=this._children[this._childCursor];return(!s||!(s instanceof a))&&(s=new a),this._children[this._childCursor++]=s,s.__zr=this.__zr,s.parent=this,s},n.prototype._updatePlainTexts=function(){var a=this.style,s=a.font||DEFAULT_FONT,l=a.padding,u=getStyleText(a),c=parsePlainText(u,a),d=needDrawBackground(a),Ct=!!a.backgroundColor,ar=c.outerHeight,en=c.outerWidth,tn=c.contentWidth,on=c.lines,fn=c.lineHeight,dn=this._defaultStyle;this.isTruncated=!!c.isTruncated;var Cn=a.x||0,Rn=a.y||0,ax=a.align||dn.align||"left",ox=a.verticalAlign||dn.verticalAlign||"top",sx=Cn,lx=adjustTextY(Rn,c.contentHeight,ox);if(d||l){var cx=adjustTextX(Cn,en,ax),fx=adjustTextY(Rn,ar,ox);d&&this._renderBackground(a,a,cx,fx,en,ar)}lx+=fn/2,l&&(sx=getTextXForPadding(Cn,ax,l),ox==="top"?lx+=l[0]:ox==="bottom"&&(lx-=l[2]));for(var gx=0,mx=!1,px=getFill("fill"in a?a.fill:(mx=!0,dn.fill)),hx=getStroke("stroke"in a?a.stroke:!Ct&&(!dn.autoStroke||mx)?(gx=DEFAULT_STROKE_LINE_WIDTH,dn.stroke):null),vx=a.textShadowBlur>0,yx=a.width!=null&&(a.overflow==="truncate"||a.overflow==="break"||a.overflow==="breakAll"),Sx=c.calculatedLineHeight,_x=0;_x<on.length;_x++){var Ex=this._getOrCreateChild(TSpan),bx=Ex.createStyle();Ex.useStyle(bx),bx.text=on[_x],bx.x=sx,bx.y=lx,bx.textAlign=ax,bx.textBaseline="middle",bx.opacity=a.opacity,bx.strokeFirst=!0,vx&&(bx.shadowBlur=a.textShadowBlur||0,bx.shadowColor=a.textShadowColor||"transparent",bx.shadowOffsetX=a.textShadowOffsetX||0,bx.shadowOffsetY=a.textShadowOffsetY||0),bx.stroke=hx,bx.fill=px,hx&&(bx.lineWidth=a.lineWidth||gx,bx.lineDash=a.lineDash,bx.lineDashOffset=a.lineDashOffset||0),bx.font=s,setSeparateFont(bx,a),lx+=fn,yx&&Ex.setBoundingRect(new BoundingRect(adjustTextX(bx.x,tn,bx.textAlign),adjustTextY(bx.y,Sx,bx.textBaseline),tn,Sx))}},n.prototype._updateRichTexts=function(){var a=this.style,s=getStyleText(a),l=parseRichText(s,a),u=l.width,c=l.outerWidth,d=l.outerHeight,Ct=a.padding,ar=a.x||0,en=a.y||0,tn=this._defaultStyle,on=a.align||tn.align,fn=a.verticalAlign||tn.verticalAlign;this.isTruncated=!!l.isTruncated;var dn=adjustTextX(ar,c,on),Cn=adjustTextY(en,d,fn),Rn=dn,ax=Cn;Ct&&(Rn+=Ct[3],ax+=Ct[0]);var ox=Rn+u;needDrawBackground(a)&&this._renderBackground(a,a,dn,Cn,c,d);for(var sx=!!a.backgroundColor,lx=0;lx<l.lines.length;lx++){for(var cx=l.lines[lx],fx=cx.tokens,gx=fx.length,mx=cx.lineHeight,px=cx.width,hx=0,vx=Rn,yx=ox,Sx=gx-1,_x=void 0;hx<gx&&(_x=fx[hx],!_x.align||_x.align==="left");)this._placeToken(_x,a,mx,ax,vx,"left",sx),px-=_x.width,vx+=_x.width,hx++;for(;Sx>=0&&(_x=fx[Sx],_x.align==="right");)this._placeToken(_x,a,mx,ax,yx,"right",sx),px-=_x.width,yx-=_x.width,Sx--;for(vx+=(u-(vx-Rn)-(ox-yx)-px)/2;hx<=Sx;)_x=fx[hx],this._placeToken(_x,a,mx,ax,vx+_x.width/2,"center",sx),vx+=_x.width,hx++;ax+=mx}},n.prototype._placeToken=function(a,s,l,u,c,d,Ct){var ar=s.rich[a.styleName]||{};ar.text=a.text;var en=a.verticalAlign,tn=u+l/2;en==="top"?tn=u+a.height/2:en==="bottom"&&(tn=u+l-a.height/2);var on=!a.isLineHolder&&needDrawBackground(ar);on&&this._renderBackground(ar,s,d==="right"?c-a.width:d==="center"?c-a.width/2:c,tn-a.height/2,a.width,a.height);var fn=!!ar.backgroundColor,dn=a.textPadding;dn&&(c=getTextXForPadding(c,d,dn),tn-=a.height/2-dn[0]-a.innerHeight/2);var Cn=this._getOrCreateChild(TSpan),Rn=Cn.createStyle();Cn.useStyle(Rn);var ax=this._defaultStyle,ox=!1,sx=0,lx=getFill("fill"in ar?ar.fill:"fill"in s?s.fill:(ox=!0,ax.fill)),cx=getStroke("stroke"in ar?ar.stroke:"stroke"in s?s.stroke:!fn&&!Ct&&(!ax.autoStroke||ox)?(sx=DEFAULT_STROKE_LINE_WIDTH,ax.stroke):null),fx=ar.textShadowBlur>0||s.textShadowBlur>0;Rn.text=a.text,Rn.x=c,Rn.y=tn,fx&&(Rn.shadowBlur=ar.textShadowBlur||s.textShadowBlur||0,Rn.shadowColor=ar.textShadowColor||s.textShadowColor||"transparent",Rn.shadowOffsetX=ar.textShadowOffsetX||s.textShadowOffsetX||0,Rn.shadowOffsetY=ar.textShadowOffsetY||s.textShadowOffsetY||0),Rn.textAlign=d,Rn.textBaseline="middle",Rn.font=a.font||DEFAULT_FONT,Rn.opacity=retrieve3(ar.opacity,s.opacity,1),setSeparateFont(Rn,ar),cx&&(Rn.lineWidth=retrieve3(ar.lineWidth,s.lineWidth,sx),Rn.lineDash=retrieve2(ar.lineDash,s.lineDash),Rn.lineDashOffset=s.lineDashOffset||0,Rn.stroke=cx),lx&&(Rn.fill=lx);var gx=a.contentWidth,mx=a.contentHeight;Cn.setBoundingRect(new BoundingRect(adjustTextX(Rn.x,gx,Rn.textAlign),adjustTextY(Rn.y,mx,Rn.textBaseline),gx,mx))},n.prototype._renderBackground=function(a,s,l,u,c,d){var Ct=a.backgroundColor,ar=a.borderWidth,en=a.borderColor,tn=Ct&&Ct.image,on=Ct&&!tn,fn=a.borderRadius,dn=this,Cn,Rn;if(on||a.lineHeight||ar&&en){Cn=this._getOrCreateChild(Rect$2),Cn.useStyle(Cn.createStyle()),Cn.style.fill=null;var ax=Cn.shape;ax.x=l,ax.y=u,ax.width=c,ax.height=d,ax.r=fn,Cn.dirtyShape()}if(on){var ox=Cn.style;ox.fill=Ct||null,ox.fillOpacity=retrieve2(a.fillOpacity,1)}else if(tn){Rn=this._getOrCreateChild(ZRImage),Rn.onload=function(){dn.dirtyStyle()};var sx=Rn.style;sx.image=Ct.image,sx.x=l,sx.y=u,sx.width=c,sx.height=d}if(ar&&en){var ox=Cn.style;ox.lineWidth=ar,ox.stroke=en,ox.strokeOpacity=retrieve2(a.strokeOpacity,1),ox.lineDash=a.borderDash,ox.lineDashOffset=a.borderDashOffset||0,Cn.strokeContainThreshold=0,Cn.hasFill()&&Cn.hasStroke()&&(ox.strokeFirst=!0,ox.lineWidth*=2)}var lx=(Cn||Rn).style;lx.shadowBlur=a.shadowBlur||0,lx.shadowColor=a.shadowColor||"transparent",lx.shadowOffsetX=a.shadowOffsetX||0,lx.shadowOffsetY=a.shadowOffsetY||0,lx.opacity=retrieve3(a.opacity,s.opacity,1)},n.makeFont=function(a){var s="";return hasSeparateFont(a)&&(s=[a.fontStyle,a.fontWeight,parseFontSize(a.fontSize),a.fontFamily||"sans-serif"].join(" ")),s&&trim$1(s)||a.textFont||a.font},n})(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?DEFAULT_FONT_SIZE+"px":t+"px"}function setSeparateFont(t,n){for(var a=0;a<FONT_PARTS.length;a++){var s=FONT_PARTS[a],l=n[s];l!=null&&(t[s]=l)}}function hasSeparateFont(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function normalizeTextStyle(t){return normalizeStyle(t),each$f(t.rich,normalizeStyle),t}function normalizeStyle(t){if(t){t.font=ZRText.makeFont(t);var n=t.align;n==="middle"&&(n="center"),t.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var a=t.verticalAlign;a==="center"&&(a="middle"),t.verticalAlign=a==null||VALID_TEXT_VERTICAL_ALIGN[a]?a:"top";var s=t.padding;s&&(t.padding=normalizeCssArray$1(t.padding))}}function getStroke(t,n){return t==null||n<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function getFill(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function getTextXForPadding(t,n,a){return n==="right"?t-a[1]:n==="center"?t+a[3]/2-a[1]/2:t+a[3]}function getStyleText(t){var n=t.text;return n!=null&&(n+=""),n}function needDrawBackground(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var getECData=makeInner(),setCommonECData=function(t,n,a,s){if(s){var l=getECData(s);l.dataIndex=a,l.dataType=n,l.seriesIndex=t,l.ssrType="chart",s.type==="group"&&s.traverse(function(u){var c=getECData(u);c.seriesIndex=t,c.dataIndex=a,c.dataType=n,c.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(t){return t!=null&&t!=="none"}function doChangeHoverState(t,n,a){t.onHoverStateChange&&(t.hoverState||0)!==a&&t.onHoverStateChange(n),t.hoverState=a}function singleEnterEmphasis(t){doChangeHoverState(t,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(t){t.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(t){doChangeHoverState(t,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(t){t.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(t){t.selected=!0}function singleLeaveSelect(t){t.selected=!1}function updateElementState(t,n,a){n(t,a)}function traverseUpdateState(t,n,a){updateElementState(t,n,a),t.isGroup&&t.traverse(function(s){updateElementState(s,n,a)})}function setStatesFlag(t,n){switch(n){case"emphasis":t.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":t.hoverState=HOVER_STATE_NORMAL;break;case"blur":t.hoverState=HOVER_STATE_BLUR;break;case"select":t.selected=!0}}function getFromStateStyle(t,n,a,s){for(var l=t.style,u={},c=0;c<n.length;c++){var d=n[c],Ct=l[d];u[d]=Ct??(s&&s[d])}for(var c=0;c<t.animators.length;c++){var ar=t.animators[c];ar.__fromStateTransition&&ar.__fromStateTransition.indexOf(a)<0&&ar.targetName==="style"&&ar.saveTo(u,n)}return u}function createEmphasisDefaultState(t,n,a,s){var l=a&&indexOf(a,"select")>=0,u=!1;if(t instanceof Path){var c=getSavedStates(t),d=l&&c.selectFill||c.normalFill,Ct=l&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(d)||hasFillOrStroke(Ct)){s=s||{};var ar=s.style||{};ar.fill==="inherit"?(u=!0,s=extend({},s),ar=extend({},ar),ar.fill=d):!hasFillOrStroke(ar.fill)&&hasFillOrStroke(d)?(u=!0,s=extend({},s),ar=extend({},ar),ar.fill=liftColor(d)):!hasFillOrStroke(ar.stroke)&&hasFillOrStroke(Ct)&&(u||(s=extend({},s),ar=extend({},ar)),ar.stroke=liftColor(Ct)),s.style=ar}}if(s&&s.z2==null){u||(s=extend({},s));var en=t.z2EmphasisLift;s.z2=t.z2+(en??Z2_EMPHASIS_LIFT)}return s}function createSelectDefaultState(t,n,a){if(a&&a.z2==null){a=extend({},a);var s=t.z2SelectLift;a.z2=t.z2+(s??Z2_SELECT_LIFT)}return a}function createBlurDefaultState(t,n,a){var s=indexOf(t.currentStates,n)>=0,l=t.style.opacity,u=s?null:getFromStateStyle(t,["opacity"],n,{opacity:1});a=a||{};var c=a.style||{};return c.opacity==null&&(a=extend({},a),c=extend({opacity:s?l:u.opacity*.1},c),a.style=c),a}function elementStateProxy(t,n){var a=this.states[t];if(this.style){if(t==="emphasis")return createEmphasisDefaultState(this,t,n,a);if(t==="blur")return createBlurDefaultState(this,t,a);if(t==="select")return createSelectDefaultState(this,t,a)}return a}function setDefaultStateProxy(t){t.stateProxy=elementStateProxy;var n=t.getTextContent(),a=t.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),a&&(a.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleLeaveEmphasis)}function enterEmphasis(t,n){t.__highByOuter|=1<<(n||0),traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasis(t,n){!(t.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(t,singleLeaveEmphasis)}function enterBlur(t){traverseUpdateState(t,singleEnterBlur)}function leaveBlur(t){traverseUpdateState(t,singleLeaveBlur)}function enterSelect(t){traverseUpdateState(t,singleEnterSelect)}function leaveSelect(t){traverseUpdateState(t,singleLeaveSelect)}function shouldSilent(t,n){return t.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(t){var n=t.getModel(),a=[],s=[];n.eachComponent(function(l,u){var c=getComponentStates(u),d=l==="series",Ct=d?t.getViewOfSeriesModel(u):t.getViewOfComponentModel(u);!d&&s.push(Ct),c.isBlured&&(Ct.group.traverse(function(ar){singleLeaveBlur(ar)}),d&&a.push(u)),c.isBlured=!1}),each$f(s,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(a,!1,n)})}function blurSeries(t,n,a,s){var l=s.getModel();a=a||"coordinateSystem";function u(ar,en){for(var tn=0;tn<en.length;tn++){var on=ar.getItemGraphicEl(en[tn]);on&&leaveBlur(on)}}if(t!=null&&!(!n||n==="none")){var c=l.getSeriesByIndex(t),d=c.coordinateSystem;d&&d.master&&(d=d.master);var Ct=[];l.eachSeries(function(ar){var en=c===ar,tn=ar.coordinateSystem;tn&&tn.master&&(tn=tn.master);var on=tn&&d?tn===d:en;if(!(a==="series"&&!en||a==="coordinateSystem"&&!on||n==="series"&&en)){var fn=s.getViewOfSeriesModel(ar);if(fn.group.traverse(function(Rn){Rn.__highByOuter&&en&&n==="self"||singleEnterBlur(Rn)}),isArrayLike(n))u(ar.getData(),n);else if(isObject$3(n))for(var dn=keys(n),Cn=0;Cn<dn.length;Cn++)u(ar.getData(dn[Cn]),n[dn[Cn]]);Ct.push(ar),getComponentStates(ar).isBlured=!0}}),l.eachComponent(function(ar,en){if(ar!=="series"){var tn=s.getViewOfComponentModel(en);tn&&tn.toggleBlurSeries&&tn.toggleBlurSeries(Ct,!0,l)}})}}function blurComponent(t,n,a){if(!(t==null||n==null)){var s=a.getModel().getComponent(t,n);if(s){getComponentStates(s).isBlured=!0;var l=a.getViewOfComponentModel(s);!l||!l.focusBlurEnabled||l.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(t,n,a){var s=t.seriesIndex,l=t.getData(n.dataType);if(l){var u=queryDataIndex(l,n);u=(isArray$1(u)?u[0]:u)||0;var c=l.getItemGraphicEl(u);if(!c)for(var d=l.count(),Ct=0;!c&&Ct<d;)c=l.getItemGraphicEl(Ct++);if(c){var ar=getECData(c);blurSeries(s,ar.focus,ar.blurScope,a)}else{var en=t.get(["emphasis","focus"]),tn=t.get(["emphasis","blurScope"]);en!=null&&blurSeries(s,en,tn,a)}}}function findComponentHighDownDispatchers(t,n,a,s){var l={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||n==null||a==null)return l;var u=s.getModel().getComponent(t,n);if(!u)return l;var c=s.getViewOfComponentModel(u);if(!c||!c.findHighDownDispatchers)return l;for(var d=c.findHighDownDispatchers(a),Ct,ar=0;ar<d.length;ar++)if(getECData(d[ar]).focus==="self"){Ct=!0;break}return{focusSelf:Ct,dispatchers:d}}function handleGlobalMouseOverForHighDown(t,n,a){var s=getECData(t),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a),u=l.dispatchers,c=l.focusSelf;u?(c&&blurComponent(s.componentMainType,s.componentIndex,a),each$f(u,function(d){return enterEmphasisWhenMouseOver(d,n)})):(blurSeries(s.seriesIndex,s.focus,s.blurScope,a),s.focus==="self"&&blurComponent(s.componentMainType,s.componentIndex,a),enterEmphasisWhenMouseOver(t,n))}function handleGlobalMouseOutForHighDown(t,n,a){allLeaveBlur(a);var s=getECData(t),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a).dispatchers;l?each$f(l,function(u){return leaveEmphasisWhenMouseOut(u,n)}):leaveEmphasisWhenMouseOut(t,n)}function toggleSelectionFromPayload(t,n,a){if(isSelectChangePayload(n)){var s=n.dataType,l=t.getData(s),u=queryDataIndex(l,n);isArray$1(u)||(u=[u]),t[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](u,s)}}function updateSeriesElementSelection(t){var n=t.getAllData();each$f(n,function(a){var s=a.data,l=a.type;s.eachItemGraphicEl(function(u,c){t.isSelected(c,l)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(t){var n=[];return t.eachSeries(function(a){var s=a.getAllData();each$f(s,function(l){l.data;var u=l.type,c=a.getSelectedDataIndices();if(c.length>0){var d={dataIndex:c,seriesIndex:a.seriesIndex};u!=null&&(d.dataType=u),n.push(d)}})}),n}function enableHoverEmphasis(t,n,a){setAsHighDownDispatcher(t,!0),traverseUpdateState(t,setDefaultStateProxy),enableHoverFocus(t,n,a)}function disableHoverEmphasis(t){setAsHighDownDispatcher(t,!1)}function toggleHoverEmphasis(t,n,a,s){s?disableHoverEmphasis(t):enableHoverEmphasis(t,n,a)}function enableHoverFocus(t,n,a){var s=getECData(t);n!=null?(s.focus=n,s.blurScope=a):s.focus&&(s.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(t,n,a,s){a=a||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var u=OTHER_STATES[l],c=n.getModel([u,a]),d=t.ensureState(u);d.style=s?s(c):c[defaultStyleGetterMap[a]]()}}function setAsHighDownDispatcher(t,n){var a=n===!1,s=t;t.highDownSilentOnTouch&&(s.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!a||s.__highDownDispatcher)&&(s.__highByOuter=s.__highByOuter||0,s.__highDownDispatcher=!a)}function isHighDownDispatcher(t){return!!(t&&t.__highDownDispatcher)}function enableComponentHighDownFeatures(t,n,a){var s=getECData(t);s.componentMainType=n.mainType,s.componentIndex=n.componentIndex,s.componentHighDownName=a}function getHighlightDigit(t){var n=_highlightKeyMap[t];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[t]=_highlightNextDigit++),n}function isSelectChangePayload(t){var n=t.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(t){var n=t.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(t){var n=getSavedStates(t);n.normalFill=t.style.fill,n.normalStroke=t.style.stroke;var a=t.states.select||{};n.selectFill=a.style&&a.style.fill||null,n.selectStroke=a.style&&a.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(t,n){if(n){var a=t.data,s=t.len(),l,u,c,d,Ct,ar,en=CMD$2.M,tn=CMD$2.C,on=CMD$2.L,fn=CMD$2.R,dn=CMD$2.A,Cn=CMD$2.Q;for(c=0,d=0;c<s;){switch(l=a[c++],d=c,u=0,l){case en:u=1;break;case on:u=1;break;case tn:u=3;break;case Cn:u=2;break;case dn:var Rn=n[4],ax=n[5],ox=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),sx=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),lx=mathAtan2(-n[1]/sx,n[0]/ox);a[c]*=ox,a[c++]+=Rn,a[c]*=sx,a[c++]+=ax,a[c++]*=ox,a[c++]*=sx,a[c++]+=lx,a[c++]+=lx,c+=2,d=c;break;case fn:ar[0]=a[c++],ar[1]=a[c++],applyTransform$1(ar,ar,n),a[d++]=ar[0],a[d++]=ar[1],ar[0]+=a[c++],ar[1]+=a[c++],applyTransform$1(ar,ar,n),a[d++]=ar[0],a[d++]=ar[1]}for(Ct=0;Ct<u;Ct++){var cx=points$2[Ct];cx[0]=a[c++],cx[1]=a[c++],applyTransform$1(cx,cx,n),a[d++]=cx[0],a[d++]=cx[1]}}t.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vRatio(t,n){return(t[0]*n[0]+t[1]*n[1])/(vMag(t)*vMag(n))}function vAngle(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(vRatio(t,n))}function processArc(t,n,a,s,l,u,c,d,Ct,ar,en){var tn=Ct*(PI$7/180),on=mathCos$2(tn)*(t-a)/2+mathSin$2(tn)*(n-s)/2,fn=-1*mathSin$2(tn)*(t-a)/2+mathCos$2(tn)*(n-s)/2,dn=on*on/(c*c)+fn*fn/(d*d);dn>1&&(c*=mathSqrt$1(dn),d*=mathSqrt$1(dn));var Cn=(l===u?-1:1)*mathSqrt$1((c*c*(d*d)-c*c*(fn*fn)-d*d*(on*on))/(c*c*(fn*fn)+d*d*(on*on)))||0,Rn=Cn*c*fn/d,ax=Cn*-d*on/c,ox=(t+a)/2+mathCos$2(tn)*Rn-mathSin$2(tn)*ax,sx=(n+s)/2+mathSin$2(tn)*Rn+mathCos$2(tn)*ax,lx=vAngle([1,0],[(on-Rn)/c,(fn-ax)/d]),cx=[(on-Rn)/c,(fn-ax)/d],fx=[(-1*on-Rn)/c,(-1*fn-ax)/d],gx=vAngle(cx,fx);if(vRatio(cx,fx)<=-1&&(gx=PI$7),vRatio(cx,fx)>=1&&(gx=0),gx<0){var mx=Math.round(gx/PI$7*1e6)/1e6;gx=PI$7*2+mx%2*PI$7}en.addData(ar,ox,sx,c,d,lx,gx,tn,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(t){var n=new PathProxy;if(!t)return n;var a=0,s=0,l=a,u=s,c,d=PathProxy.CMD,Ct=t.match(commandReg);if(!Ct)return n;for(var ar=0;ar<Ct.length;ar++){for(var en=Ct[ar],tn=en.charAt(0),on=void 0,fn=en.match(numberReg$1)||[],dn=fn.length,Cn=0;Cn<dn;Cn++)fn[Cn]=parseFloat(fn[Cn]);for(var Rn=0;Rn<dn;){var ax=void 0,ox=void 0,sx=void 0,lx=void 0,cx=void 0,fx=void 0,gx=void 0,mx=a,px=s,hx=void 0,vx=void 0;switch(tn){case"l":a+=fn[Rn++],s+=fn[Rn++],on=d.L,n.addData(on,a,s);break;case"L":a=fn[Rn++],s=fn[Rn++],on=d.L,n.addData(on,a,s);break;case"m":a+=fn[Rn++],s+=fn[Rn++],on=d.M,n.addData(on,a,s),l=a,u=s,tn="l";break;case"M":a=fn[Rn++],s=fn[Rn++],on=d.M,n.addData(on,a,s),l=a,u=s,tn="L";break;case"h":a+=fn[Rn++],on=d.L,n.addData(on,a,s);break;case"H":a=fn[Rn++],on=d.L,n.addData(on,a,s);break;case"v":s+=fn[Rn++],on=d.L,n.addData(on,a,s);break;case"V":s=fn[Rn++],on=d.L,n.addData(on,a,s);break;case"C":on=d.C,n.addData(on,fn[Rn++],fn[Rn++],fn[Rn++],fn[Rn++],fn[Rn++],fn[Rn++]),a=fn[Rn-2],s=fn[Rn-1];break;case"c":on=d.C,n.addData(on,fn[Rn++]+a,fn[Rn++]+s,fn[Rn++]+a,fn[Rn++]+s,fn[Rn++]+a,fn[Rn++]+s),a+=fn[Rn-2],s+=fn[Rn-1];break;case"S":ax=a,ox=s,hx=n.len(),vx=n.data,c===d.C&&(ax+=a-vx[hx-4],ox+=s-vx[hx-3]),on=d.C,mx=fn[Rn++],px=fn[Rn++],a=fn[Rn++],s=fn[Rn++],n.addData(on,ax,ox,mx,px,a,s);break;case"s":ax=a,ox=s,hx=n.len(),vx=n.data,c===d.C&&(ax+=a-vx[hx-4],ox+=s-vx[hx-3]),on=d.C,mx=a+fn[Rn++],px=s+fn[Rn++],a+=fn[Rn++],s+=fn[Rn++],n.addData(on,ax,ox,mx,px,a,s);break;case"Q":mx=fn[Rn++],px=fn[Rn++],a=fn[Rn++],s=fn[Rn++],on=d.Q,n.addData(on,mx,px,a,s);break;case"q":mx=fn[Rn++]+a,px=fn[Rn++]+s,a+=fn[Rn++],s+=fn[Rn++],on=d.Q,n.addData(on,mx,px,a,s);break;case"T":ax=a,ox=s,hx=n.len(),vx=n.data,c===d.Q&&(ax+=a-vx[hx-4],ox+=s-vx[hx-3]),a=fn[Rn++],s=fn[Rn++],on=d.Q,n.addData(on,ax,ox,a,s);break;case"t":ax=a,ox=s,hx=n.len(),vx=n.data,c===d.Q&&(ax+=a-vx[hx-4],ox+=s-vx[hx-3]),a+=fn[Rn++],s+=fn[Rn++],on=d.Q,n.addData(on,ax,ox,a,s);break;case"A":sx=fn[Rn++],lx=fn[Rn++],cx=fn[Rn++],fx=fn[Rn++],gx=fn[Rn++],mx=a,px=s,a=fn[Rn++],s=fn[Rn++],on=d.A,processArc(mx,px,a,s,fx,gx,sx,lx,cx,on,n);break;case"a":sx=fn[Rn++],lx=fn[Rn++],cx=fn[Rn++],fx=fn[Rn++],gx=fn[Rn++],mx=a,px=s,a+=fn[Rn++],s+=fn[Rn++],on=d.A,processArc(mx,px,a,s,fx,gx,sx,lx,cx,on,n);break}}(tn==="z"||tn==="Z")&&(on=d.Z,n.addData(on),a=l,s=u),c=on}return n.toStatic(),n}var SVGPath=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.applyTransform=function(a){},n})(Path);function isPathProxy(t){return t.setData!=null}function createPathOptions(t,n){var a=createPathProxyFromString(t),s=extend({},n);return s.buildPath=function(l){if(isPathProxy(l)){l.setData(a.data);var u=l.getContext();u&&l.rebuildPath(u,1)}else{var u=l;a.rebuildPath(u,1)}},s.applyTransform=function(l){transformPath(a,l),this.dirtyShape()},s}function createFromString(t,n){return new SVGPath(createPathOptions(t,n))}function extendFromString(t,n){var a=createPathOptions(t,n),s=(function(l){__extends(u,l);function u(c){var d=l.call(this,c)||this;return d.applyTransform=a.applyTransform,d.buildPath=a.buildPath,d}return u})(SVGPath);return s}function mergePath$1(t,n){for(var a=[],s=t.length,l=0;l<s;l++){var u=t[l];a.push(u.getUpdatedPathProxy(!0))}var c=new Path(n);return c.createPathProxy(),c.buildPath=function(d){if(isPathProxy(d)){d.appendPath(a);var Ct=d.getContext();Ct&&d.rebuildPath(Ct,1)}},c}function clonePath(t,n){n=n||{};var a=new Path;return t.shape&&a.setShape(t.shape),a.setStyle(t.style),n.bakeTransform?transformPath(a.path,t.getComputedTransform()):n.toLocal?a.setLocalTransform(t.getComputedTransform()):a.copyTransform(t),a.buildPath=t.buildPath,a.applyTransform=a.applyTransform,a.z=t.z,a.z2=t.z2,a.zlevel=t.zlevel,a}var CircleShape=(function(){function t(){this.cx=0,this.cy=0,this.r=0}return t})(),Circle=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(a,s){a.moveTo(s.cx+s.r,s.cy),a.arc(s.cx,s.cy,s.r,0,Math.PI*2)},n})(Path);Circle.prototype.type="circle";var EllipseShape=(function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t})(),Ellipse=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(a,s){var l=.5522848,u=s.cx,c=s.cy,d=s.rx,Ct=s.ry,ar=d*l,en=Ct*l;a.moveTo(u-d,c),a.bezierCurveTo(u-d,c-en,u-ar,c-Ct,u,c-Ct),a.bezierCurveTo(u+ar,c-Ct,u+d,c-en,u+d,c),a.bezierCurveTo(u+d,c+en,u+ar,c+Ct,u,c+Ct),a.bezierCurveTo(u-ar,c+Ct,u-d,c+en,u-d,c),a.closePath()},n})(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=tn*Ct-en*ar;if(!(on*on<e))return on=(en*(n-u)-tn*(t-l))/on,[t+on*Ct,n+on*ar]}function computeCornerTangents(t,n,a,s,l,u,c){var d=t-a,Ct=n-s,ar=(c?u:-u)/mathSqrt(d*d+Ct*Ct),en=ar*Ct,tn=-ar*d,on=t+en,fn=n+tn,dn=a+en,Cn=s+tn,Rn=(on+dn)/2,ax=(fn+Cn)/2,ox=dn-on,sx=Cn-fn,lx=ox*ox+sx*sx,cx=l-u,fx=on*Cn-dn*fn,gx=(sx<0?-1:1)*mathSqrt(mathMax$7(0,cx*cx*lx-fx*fx)),mx=(fx*sx-ox*gx)/lx,px=(-fx*ox-sx*gx)/lx,hx=(fx*sx+ox*gx)/lx,vx=(-fx*ox+sx*gx)/lx,yx=mx-Rn,Sx=px-ax,_x=hx-Rn,Ex=vx-ax;return yx*yx+Sx*Sx>_x*_x+Ex*Ex&&(mx=hx,px=vx),{cx:mx,cy:px,x0:-en,y0:-tn,x1:mx*(l/cx-1),y1:px*(l/cx-1)}}function normalizeCornerRadius(t){var n;if(isArray$1(t)){var a=t.length;if(!a)return t;a===1?n=[t[0],t[0],0,0]:a===2?n=[t[0],t[0],t[1],t[1]]:a===3?n=t.concat(t[2]):n=t}else n=[t,t,t,t];return n}function buildPath$1(t,n){var a,s=mathMax$7(n.r,0),l=mathMax$7(n.r0||0,0),u=s>0,c=l>0;if(!(!u&&!c)){if(u||(s=l,l=0),l>s){var d=s;s=l,l=d}var Ct=n.startAngle,ar=n.endAngle;if(!(isNaN(Ct)||isNaN(ar))){var en=n.cx,tn=n.cy,on=!!n.clockwise,fn=mathAbs$1(ar-Ct),dn=fn>PI2$3&&fn%PI2$3;if(dn>e&&(fn=dn),!(s>e))t.moveTo(en,tn);else if(fn>PI2$3-e)t.moveTo(en+s*mathCos$1(Ct),tn+s*mathSin$1(Ct)),t.arc(en,tn,s,Ct,ar,!on),l>e&&(t.moveTo(en+l*mathCos$1(ar),tn+l*mathSin$1(ar)),t.arc(en,tn,l,ar,Ct,on));else{var Cn=void 0,Rn=void 0,ax=void 0,ox=void 0,sx=void 0,lx=void 0,cx=void 0,fx=void 0,gx=void 0,mx=void 0,px=void 0,hx=void 0,vx=void 0,yx=void 0,Sx=void 0,_x=void 0,Ex=s*mathCos$1(Ct),bx=s*mathSin$1(Ct),Ax=l*mathCos$1(ar),Mx=l*mathSin$1(ar),Rx=fn>e;if(Rx){var Cx=n.cornerRadius;Cx&&(a=normalizeCornerRadius(Cx),Cn=a[0],Rn=a[1],ax=a[2],ox=a[3]);var Lx=mathAbs$1(s-l)/2;if(sx=mathMin$7(Lx,ax),lx=mathMin$7(Lx,ox),cx=mathMin$7(Lx,Cn),fx=mathMin$7(Lx,Rn),px=gx=mathMax$7(sx,lx),hx=mx=mathMax$7(cx,fx),(gx>e||mx>e)&&(vx=s*mathCos$1(ar),yx=s*mathSin$1(ar),Sx=l*mathCos$1(Ct),_x=l*mathSin$1(Ct),fn<PI$6)){var qx=intersect(Ex,bx,Sx,_x,vx,yx,Ax,Mx);if(qx){var Ix=Ex-qx[0],Px=bx-qx[1],Nx=vx-qx[0],Bx=yx-qx[1],$x=1/mathSin$1(mathACos((Ix*Nx+Px*Bx)/(mathSqrt(Ix*Ix+Px*Px)*mathSqrt(Nx*Nx+Bx*Bx)))/2),Vx=mathSqrt(qx[0]*qx[0]+qx[1]*qx[1]);px=mathMin$7(gx,(s-Vx)/($x+1)),hx=mathMin$7(mx,(l-Vx)/($x-1))}}}if(!Rx)t.moveTo(en+Ex,tn+bx);else if(px>e){var Gx=mathMin$7(ax,px),Zx=mathMin$7(ox,px),jx=computeCornerTangents(Sx,_x,Ex,bx,s,Gx,on),Hx=computeCornerTangents(vx,yx,Ax,Mx,s,Zx,on);t.moveTo(en+jx.cx+jx.x0,tn+jx.cy+jx.y0),px<gx&&Gx===Zx?t.arc(en+jx.cx,tn+jx.cy,px,mathATan2(jx.y0,jx.x0),mathATan2(Hx.y0,Hx.x0),!on):(Gx>0&&t.arc(en+jx.cx,tn+jx.cy,Gx,mathATan2(jx.y0,jx.x0),mathATan2(jx.y1,jx.x1),!on),t.arc(en,tn,s,mathATan2(jx.cy+jx.y1,jx.cx+jx.x1),mathATan2(Hx.cy+Hx.y1,Hx.cx+Hx.x1),!on),Zx>0&&t.arc(en+Hx.cx,tn+Hx.cy,Zx,mathATan2(Hx.y1,Hx.x1),mathATan2(Hx.y0,Hx.x0),!on))}else t.moveTo(en+Ex,tn+bx),t.arc(en,tn,s,Ct,ar,!on);if(!(l>e)||!Rx)t.lineTo(en+Ax,tn+Mx);else if(hx>e){var Gx=mathMin$7(Cn,hx),Zx=mathMin$7(Rn,hx),jx=computeCornerTangents(Ax,Mx,vx,yx,l,-Zx,on),Hx=computeCornerTangents(Ex,bx,Sx,_x,l,-Gx,on);t.lineTo(en+jx.cx+jx.x0,tn+jx.cy+jx.y0),hx<mx&&Gx===Zx?t.arc(en+jx.cx,tn+jx.cy,hx,mathATan2(jx.y0,jx.x0),mathATan2(Hx.y0,Hx.x0),!on):(Zx>0&&t.arc(en+jx.cx,tn+jx.cy,Zx,mathATan2(jx.y0,jx.x0),mathATan2(jx.y1,jx.x1),!on),t.arc(en,tn,l,mathATan2(jx.cy+jx.y1,jx.cx+jx.x1),mathATan2(Hx.cy+Hx.y1,Hx.cx+Hx.x1),on),Gx>0&&t.arc(en+Hx.cx,tn+Hx.cy,Gx,mathATan2(Hx.y1,Hx.x1),mathATan2(Hx.y0,Hx.x0),!on))}else t.lineTo(en+Ax,tn+Mx),t.arc(en,tn,l,ar,Ct,on)}t.closePath()}}}var SectorShape=(function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t})(),Sector=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(a,s){buildPath$1(a,s)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n})(Path);Sector.prototype.type="sector";var RingShape=(function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t})(),Ring=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.PI*2;a.moveTo(l+s.r,u),a.arc(l,u,s.r,0,c,!1),a.moveTo(l+s.r0,u),a.arc(l,u,s.r0,0,c,!0)},n})(Path);Ring.prototype.type="ring";function smoothBezier(t,n,a,s){var l=[],u=[],c=[],d=[],Ct,ar,en,tn;if(s){en=[1/0,1/0],tn=[-1/0,-1/0];for(var on=0,fn=t.length;on<fn;on++)min$1(en,en,t[on]),max$1(tn,tn,t[on]);min$1(en,en,s[0]),max$1(tn,tn,s[1])}for(var on=0,fn=t.length;on<fn;on++){var dn=t[on];if(a)Ct=t[on?on-1:fn-1],ar=t[(on+1)%fn];else if(on===0||on===fn-1){l.push(clone$3(t[on]));continue}else Ct=t[on-1],ar=t[on+1];sub(u,ar,Ct),scale$2(u,u,n);var Cn=distance(dn,Ct),Rn=distance(dn,ar),ax=Cn+Rn;ax!==0&&(Cn/=ax,Rn/=ax),scale$2(c,u,-Cn),scale$2(d,u,Rn);var ox=add([],dn,c),sx=add([],dn,d);s&&(max$1(ox,ox,en),min$1(ox,ox,tn),max$1(sx,sx,en),min$1(sx,sx,tn)),l.push(ox),l.push(sx)}return a&&l.push(l.shift()),l}function buildPath(t,n,a){var s=n.smooth,l=n.points;if(l&&l.length>=2){if(s){var u=smoothBezier(l,s,a,n.smoothConstraint);t.moveTo(l[0][0],l[0][1]);for(var c=l.length,d=0;d<(a?c:c-1);d++){var Ct=u[d*2],ar=u[d*2+1],en=l[(d+1)%c];t.bezierCurveTo(Ct[0],Ct[1],ar[0],ar[1],en[0],en[1])}}else{t.moveTo(l[0][0],l[0][1]);for(var d=1,tn=l.length;d<tn;d++)t.lineTo(l[d][0],l[d][1])}a&&t.closePath()}}var PolygonShape=(function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t})(),Polygon=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(a,s){buildPath(a,s,!0)},n})(Path);Polygon.prototype.type="polygon";var PolylineShape=(function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t})(),Polyline$1=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(a,s){buildPath(a,s,!1)},n})(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t})(),Line$1=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(a,s){var l,u,c,d;if(this.subPixelOptimize){var Ct=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,s,this.style);l=Ct.x1,u=Ct.y1,c=Ct.x2,d=Ct.y2}else l=s.x1,u=s.y1,c=s.x2,d=s.y2;var ar=s.percent;ar!==0&&(a.moveTo(l,u),ar<1&&(c=l*(1-ar)+c*ar,d=u*(1-ar)+d*ar),a.lineTo(c,d))},n.prototype.pointAt=function(a){var s=this.shape;return[s.x1*(1-a)+s.x2*a,s.y1*(1-a)+s.y2*a]},n})(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t})();function someVectorAt(t,n,a){var s=t.cpx2,l=t.cpy2;return s!=null||l!=null?[(a?cubicDerivativeAt:cubicAt)(t.x1,t.cpx1,t.cpx2,t.x2,n),(a?cubicDerivativeAt:cubicAt)(t.y1,t.cpy1,t.cpy2,t.y2,n)]:[(a?quadraticDerivativeAt:quadraticAt$1)(t.x1,t.cpx1,t.x2,n),(a?quadraticDerivativeAt:quadraticAt$1)(t.y1,t.cpy1,t.y2,n)]}var BezierCurve=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(a,s){var l=s.x1,u=s.y1,c=s.x2,d=s.y2,Ct=s.cpx1,ar=s.cpy1,en=s.cpx2,tn=s.cpy2,on=s.percent;on!==0&&(a.moveTo(l,u),en==null||tn==null?(on<1&&(quadraticSubdivide(l,Ct,c,on,out),Ct=out[1],c=out[2],quadraticSubdivide(u,ar,d,on,out),ar=out[1],d=out[2]),a.quadraticCurveTo(Ct,ar,c,d)):(on<1&&(cubicSubdivide(l,Ct,en,c,on,out),Ct=out[1],en=out[2],c=out[3],cubicSubdivide(u,ar,tn,d,on,out),ar=out[1],tn=out[2],d=out[3]),a.bezierCurveTo(Ct,ar,en,tn,c,d)))},n.prototype.pointAt=function(a){return someVectorAt(this.shape,a,!1)},n.prototype.tangentAt=function(a){var s=someVectorAt(this.shape,a,!0);return normalize$3(s,s)},n})(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=(function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t})(),Arc=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.max(s.r,0),d=s.startAngle,Ct=s.endAngle,ar=s.clockwise,en=Math.cos(d),tn=Math.sin(d);a.moveTo(en*c+l,tn*c+u),a.arc(l,u,c,d,Ct,!ar)},n})(Path);Arc.prototype.type="arc";var CompoundPath=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="compound",a}return n.prototype._updatePathDirty=function(){for(var a=this.shape.paths,s=this.shapeChanged(),l=0;l<a.length;l++)s=s||a[l].shapeChanged();s&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var a=this.shape.paths||[],s=this.getGlobalScale(),l=0;l<a.length;l++)a[l].path||a[l].createPathProxy(),a[l].path.setScale(s[0],s[1],a[l].segmentIgnoreThreshold)},n.prototype.buildPath=function(a,s){for(var l=s.paths||[],u=0;u<l.length;u++)l[u].buildPath(a,l[u].shape,!0)},n.prototype.afterBrush=function(){for(var a=this.shape.paths||[],s=0;s<a.length;s++)a[s].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},n})(Path),Gradient=(function(){function t(n){this.colorStops=n||[]}return t.prototype.addColorStop=function(n,a){this.colorStops.push({offset:n,color:a})},t})(),LinearGradient=(function(t){__extends(n,t);function n(a,s,l,u,c,d){var Ct=t.call(this,c)||this;return Ct.x=a??0,Ct.y=s??0,Ct.x2=l??1,Ct.y2=u??0,Ct.type="linear",Ct.global=d||!1,Ct}return n})(Gradient),RadialGradient=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,u)||this;return d.x=a??.5,d.y=s??.5,d.r=l??.5,d.type="radial",d.global=c||!1,d}return n})(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=(function(){function t(n,a){this._corners=[],this._axes=[],this._origin=[0,0];for(var s=0;s<4;s++)this._corners[s]=new Point;for(var s=0;s<2;s++)this._axes[s]=new Point;n&&this.fromBoundingRect(n,a)}return t.prototype.fromBoundingRect=function(n,a){var s=this._corners,l=this._axes,u=n.x,c=n.y,d=u+n.width,Ct=c+n.height;if(s[0].set(u,c),s[1].set(d,c),s[2].set(d,Ct),s[3].set(u,Ct),a)for(var ar=0;ar<4;ar++)s[ar].transform(a);Point.sub(l[0],s[1],s[0]),Point.sub(l[1],s[3],s[0]),l[0].normalize(),l[1].normalize();for(var ar=0;ar<2;ar++)this._origin[ar]=l[ar].dot(s[0])},t.prototype.intersect=function(n,a){var s=!0,l=!a;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,n,minTv,maxTv,l,1)&&(s=!1,l)||!this._intersectCheckOneSide(n,this,minTv,maxTv,l,-1)&&(s=!1,l)||l||Point.copy(a,s?minTv:maxTv),s},t.prototype._intersectCheckOneSide=function(n,a,s,l,u,c){for(var d=!0,Ct=0;Ct<2;Ct++){var ar=this._axes[Ct];if(this._getProjMinMaxOnAxis(Ct,n._corners,extent),this._getProjMinMaxOnAxis(Ct,a._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(d=!1,u)return d;var en=Math.abs(extent2[0]-extent[1]),tn=Math.abs(extent[0]-extent2[1]);Math.min(en,tn)>l.len()&&(en<tn?Point.scale(l,ar,-en*c):Point.scale(l,ar,tn*c))}else if(s){var en=Math.abs(extent2[0]-extent[1]),tn=Math.abs(extent[0]-extent2[1]);Math.min(en,tn)<s.len()&&(en<tn?Point.scale(s,ar,en*c):Point.scale(s,ar,-tn*c))}}return d},t.prototype._getProjMinMaxOnAxis=function(n,a,s){for(var l=this._axes[n],u=this._origin,c=a[0].dot(l)+u[n],d=c,Ct=c,ar=1;ar<a.length;ar++){var en=a[ar].dot(l)+u[n];d=Math.min(en,d),Ct=Math.max(en,Ct)}s[0]=d,s[1]=Ct},t})(),m=[],IncrementalDisplayable=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.notClear=!0,a.incremental=!0,a._displayables=[],a._temporaryDisplayables=[],a._cursor=0,a}return n.prototype.traverse=function(a,s){a.call(s,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(a,s){s?this._temporaryDisplayables.push(a):this._displayables.push(a),this.markRedraw()},n.prototype.addDisplayables=function(a,s){s=s||!1;for(var l=0;l<a.length;l++)this.addDisplayable(a[l],s)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(a){for(var s=this._cursor;s<this._displayables.length;s++)a&&a(this._displayables[s]);for(var s=0;s<this._temporaryDisplayables.length;s++)a&&a(this._temporaryDisplayables[s])},n.prototype.update=function(){this.updateTransform();for(var a=this._cursor;a<this._displayables.length;a++){var s=this._displayables[a];s.parent=this,s.update(),s.parent=null}for(var a=0;a<this._temporaryDisplayables.length;a++){var s=this._temporaryDisplayables[a];s.parent=this,s.update(),s.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var a=new BoundingRect(1/0,1/0,-1/0,-1/0),s=0;s<this._displayables.length;s++){var l=this._displayables[s],u=l.getBoundingRect().clone();l.needLocalTransform()&&u.applyTransform(l.getLocalTransform(m)),a.union(u)}this._rect=a}return this._rect},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(u.contain(l[0],l[1]))for(var c=0;c<this._displayables.length;c++){var d=this._displayables[c];if(d.contain(a,s))return!0}return!1},n})(Displayable),transitionStore=makeInner();function getAnimationConfig(t,n,a,s,l){var u;if(n&&n.ecModel){var c=n.ecModel.getUpdatePayload();u=c&&c.animation}var d=n&&n.isAnimationEnabled(),Ct=t==="update";if(d){var ar=void 0,en=void 0,tn=void 0;s?(ar=retrieve2(s.duration,200),en=retrieve2(s.easing,"cubicOut"),tn=0):(ar=n.getShallow(Ct?"animationDurationUpdate":"animationDuration"),en=n.getShallow(Ct?"animationEasingUpdate":"animationEasing"),tn=n.getShallow(Ct?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(ar=u.duration),u.easing!=null&&(en=u.easing),u.delay!=null&&(tn=u.delay)),isFunction$1(tn)&&(tn=tn(a,l)),isFunction$1(ar)&&(ar=ar(a));var on={duration:ar||0,delay:tn,easing:en};return on}else return null}function animateOrSetProps(t,n,a,s,l,u,c){var d=!1,Ct;isFunction$1(l)?(c=u,u=l,l=null):isObject$3(l)&&(u=l.cb,c=l.during,d=l.isFrom,Ct=l.removeOpt,l=l.dataIndex);var ar=t==="leave";ar||n.stopAnimation("leave");var en=getAnimationConfig(t,s,l,ar?Ct||{}:null,s&&s.getAnimationDelayParams?s.getAnimationDelayParams(n,l):null);if(en&&en.duration>0){var tn=en.duration,on=en.delay,fn=en.easing,dn={duration:tn,delay:on||0,easing:fn,done:u,force:!!u||!!c,setToFinal:!ar,scope:t,during:c};d?n.animateFrom(a,dn):n.animateTo(a,dn)}else n.stopAnimation(),!d&&n.attr(a),c&&c(1),u&&u()}function updateProps$1(t,n,a,s,l,u){animateOrSetProps("update",t,n,a,s,l,u)}function initProps(t,n,a,s,l,u){animateOrSetProps("enter",t,n,a,s,l,u)}function isElementRemoved(t){if(!t.__zr)return!0;for(var n=0;n<t.animators.length;n++){var a=t.animators[n];if(a.scope==="leave")return!0}return!1}function removeElement(t,n,a,s,l,u){isElementRemoved(t)||animateOrSetProps("leave",t,n,a,s,l,u)}function fadeOutDisplayable(t,n,a,s){t.removeTextContent(),t.removeTextGuideLine(),removeElement(t,{style:{opacity:0}},n,a,s)}function removeElementWithFadeOut(t,n,a){function s(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(l){l.isGroup||fadeOutDisplayable(l,n,a,s)}):fadeOutDisplayable(t,n,a,s)}function saveOldStyle(t){transitionStore(t).oldStyle=t.style}function getOldStyle(t){return transitionStore(t).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(t){return Path.extend(t)}var extendPathFromString=extendFromString;function extendPath(t,n){return extendPathFromString(t,n)}function registerShape(t,n){_customShapeMap[t]=n}function getShapeClass(t){if(_customShapeMap.hasOwnProperty(t))return _customShapeMap[t]}function makePath(t,n,a,s){var l=createFromString(t,n);return a&&(s==="center"&&(a=centerGraphic(a,l.getBoundingRect())),resizePath(l,a)),l}function makeImage(t,n,a){var s=new ZRImage({style:{image:t,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(l){if(a==="center"){var u={width:l.width,height:l.height};s.setStyle(centerGraphic(n,u))}}});return s}function centerGraphic(t,n){var a=n.width/n.height,s=t.height*a,l;s<=t.width?l=t.height:(s=t.width,l=s/a);var u=t.x+t.width/2,c=t.y+t.height/2;return{x:u-s/2,y:c-l/2,width:s,height:l}}var mergePath=mergePath$1;function resizePath(t,n){if(t.applyTransform){var a=t.getBoundingRect(),s=a.calculateTransform(n);t.applyTransform(s)}}function subPixelOptimizeLine(t,n){return subPixelOptimizeLine$1(t,t,{lineWidth:n}),t}function subPixelOptimizeRect(t){return subPixelOptimizeRect$1(t.shape,t.shape,t.style),t}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(t,n){for(var a=identity([]);t&&t!==n;)mul(a,t.getLocalTransform(),a),t=t.parent;return a}function applyTransform(t,n,a){return n&&!isArrayLike(n)&&(n=Transformable.getLocalTransform(n)),a&&(n=invert([],n)),applyTransform$1([],t,n)}function transformDirection(t,n,a){var s=n[4]===0||n[5]===0||n[0]===0?1:Math.abs(2*n[4]/n[0]),l=n[4]===0||n[5]===0||n[2]===0?1:Math.abs(2*n[4]/n[2]),u=[t==="left"?-s:t==="right"?s:0,t==="top"?-l:t==="bottom"?l:0];return u=applyTransform(u,n,a),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(t){return!t.isGroup}function isPath$1(t){return t.shape!=null}function groupTransition(t,n,a){if(!t||!n)return;function s(c){var d={};return c.traverse(function(Ct){isNotGroup(Ct)&&Ct.anid&&(d[Ct.anid]=Ct)}),d}function l(c){var d={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(d.shape=extend({},c.shape)),d}var u=s(t);n.traverse(function(c){if(isNotGroup(c)&&c.anid){var d=u[c.anid];if(d){var Ct=l(c);c.attr(l(d)),updateProps$1(c,Ct,a,getECData(c).dataIndex)}}})}function clipPointsByRect(t,n){return map$1(t,function(a){var s=a[0];s=mathMax$6(s,n.x),s=mathMin$6(s,n.x+n.width);var l=a[1];return l=mathMax$6(l,n.y),l=mathMin$6(l,n.y+n.height),[s,l]})}function clipRectByRect(t,n){var a=mathMax$6(t.x,n.x),s=mathMin$6(t.x+t.width,n.x+n.width),l=mathMax$6(t.y,n.y),u=mathMin$6(t.y+t.height,n.y+n.height);if(s>=a&&u>=l)return{x:a,y:l,width:s-a,height:u-l}}function createIcon(t,n,a){var s=extend({rectHover:!0},n),l=s.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(l.image=t.slice(8),defaults(l,a),new ZRImage(s)):makePath(t.replace("path://",""),s,a,"center")}function linePolygonIntersect(t,n,a,s,l){for(var u=0,c=l[l.length-1];u<l.length;u++){var d=l[u];if(lineLineIntersect$1(t,n,a,s,d[0],d[1],c[0],c[1]))return!0;c=d}}function lineLineIntersect$1(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=crossProduct2d$1(en,tn,Ct,ar);if(nearZero(on))return!1;var fn=t-l,dn=n-u,Cn=crossProduct2d$1(fn,dn,Ct,ar)/on;if(Cn<0||Cn>1)return!1;var Rn=crossProduct2d$1(fn,dn,en,tn)/on;return!(Rn<0||Rn>1)}function crossProduct2d$1(t,n,a,s){return t*s-a*n}function nearZero(t){return t<=1e-6&&t>=-1e-6}function setTooltipConfig(t){var n=t.itemTooltipOption,a=t.componentModel,s=t.itemName,l=isString$1(n)?{formatter:n}:n,u=a.mainType,c=a.componentIndex,d={componentType:u,name:s,$vars:["name"]};d[u+"Index"]=c;var Ct=t.formatterParamsExtra;Ct&&each$f(keys(Ct),function(en){hasOwn(d,en)||(d[en]=Ct[en],d.$vars.push(en))});var ar=getECData(t.el);ar.componentMainType=u,ar.componentIndex=c,ar.tooltipConfig={name:s,option:defaults({content:s,encodeHTMLContent:!0,formatterParams:d},l)}}function traverseElement(t,n){var a;t.isGroup&&(a=n(t)),a||t.traverse(n)}function traverseElements(t,n){if(t)if(isArray$1(t))for(var a=0;a<t.length;a++)traverseElement(t[a],n);else traverseElement(t,n)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(t,n){for(var a=0;a<SPECIAL_STATES.length;a++){var s=SPECIAL_STATES[a],l=n[s],u=t.ensureState(s);u.style=u.style||{},u.style.text=l}var c=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:n.normal}),t.useStates(c,!0)}function getLabelText(t,n,a){var s=t.labelFetcher,l=t.labelDataIndex,u=t.labelDimIndex,c=n.normal,d;s&&(d=s.getFormattedLabel(l,"normal",null,u,c&&c.get("formatter"),a!=null?{interpolatedValue:a}:null)),d==null&&(d=isFunction$1(t.defaultText)?t.defaultText(l,t,a):t.defaultText);for(var Ct={normal:d},ar=0;ar<SPECIAL_STATES.length;ar++){var en=SPECIAL_STATES[ar],tn=n[en];Ct[en]=retrieve2(s?s.getFormattedLabel(l,en,null,u,tn&&tn.get("formatter")):null,d)}return Ct}function setLabelStyle(t,n,a,s){a=a||EMPTY_OBJ;for(var l=t instanceof ZRText,u=!1,c=0;c<DISPLAY_STATES.length;c++){var d=n[DISPLAY_STATES[c]];if(d&&d.getShallow("show")){u=!0;break}}var Ct=l?t:t.getTextContent();if(u){l||(Ct||(Ct=new ZRText,t.setTextContent(Ct)),t.stateProxy&&(Ct.stateProxy=t.stateProxy));var ar=getLabelText(a,n),en=n.normal,tn=!!en.getShallow("show"),on=createTextStyle$1(en,s&&s.normal,a,!1,!l);on.text=ar.normal,l||t.setTextConfig(createTextConfig(en,a,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var fn=SPECIAL_STATES[c],d=n[fn];if(d){var dn=Ct.ensureState(fn),Cn=!!retrieve2(d.getShallow("show"),tn);if(Cn!==tn&&(dn.ignore=!Cn),dn.style=createTextStyle$1(d,s&&s[fn],a,!0,!l),dn.style.text=ar[fn],!l){var Rn=t.ensureState(fn);Rn.textConfig=createTextConfig(d,a,!0)}}}Ct.silent=!!en.getShallow("silent"),Ct.style.x!=null&&(on.x=Ct.style.x),Ct.style.y!=null&&(on.y=Ct.style.y),Ct.ignore=!tn,Ct.useStyle(on),Ct.dirty(),a.enableTextSetter&&(labelInner(Ct).setLabelText=function(ax){var ox=getLabelText(a,n,ax);setLabelText(Ct,ox)})}else Ct&&(Ct.ignore=!0);t.dirty()}function getLabelStatesModels(t,n){n=n||"label";for(var a={normal:t.getModel(n)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];a[l]=t.getModel([l,n])}return a}function createTextStyle$1(t,n,a,s,l){var u={};return setTextStyleCommon(u,t,a,s,l),n&&extend(u,n),u}function createTextConfig(t,n,a){n=n||{};var s={},l,u=t.getShallow("rotate"),c=retrieve2(t.getShallow("distance"),a?null:5),d=t.getShallow("offset");return l=t.getShallow("position")||(a?null:"inside"),l==="outside"&&(l=n.defaultOutsidePosition||"top"),l!=null&&(s.position=l),d!=null&&(s.offset=d),u!=null&&(u*=Math.PI/180,s.rotation=u),c!=null&&(s.distance=c),s.outsideFill=t.get("color")==="inherit"?n.inheritColor||null:"auto",s}function setTextStyleCommon(t,n,a,s,l){a=a||EMPTY_OBJ;var u=n.ecModel,c=u&&u.option.textStyle,d=getRichItemNames(n),Ct;if(d){Ct={};for(var ar in d)if(d.hasOwnProperty(ar)){var en=n.getModel(["rich",ar]);setTokenTextStyle(Ct[ar]={},en,c,a,s,l,!1,!0)}}Ct&&(t.rich=Ct);var tn=n.get("overflow");tn&&(t.overflow=tn);var on=n.get("minMargin");on!=null&&(t.margin=on),setTokenTextStyle(t,n,c,a,s,l,!0,!1)}function getRichItemNames(t){for(var n;t&&t!==t.ecModel;){var a=(t.option||EMPTY_OBJ).rich;if(a){n=n||{};for(var s=keys(a),l=0;l<s.length;l++){var u=s[l];n[u]=1}}t=t.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(t,n,a,s,l,u,c,d){a=!l&&a||EMPTY_OBJ;var Ct=s&&s.inheritColor,ar=n.getShallow("color"),en=n.getShallow("textBorderColor"),tn=retrieve2(n.getShallow("opacity"),a.opacity);(ar==="inherit"||ar==="auto")&&(Ct?ar=Ct:ar=null),(en==="inherit"||en==="auto")&&(Ct?en=Ct:en=null),u||(ar=ar||a.color,en=en||a.textBorderColor),ar!=null&&(t.fill=ar),en!=null&&(t.stroke=en);var on=retrieve2(n.getShallow("textBorderWidth"),a.textBorderWidth);on!=null&&(t.lineWidth=on);var fn=retrieve2(n.getShallow("textBorderType"),a.textBorderType);fn!=null&&(t.lineDash=fn);var dn=retrieve2(n.getShallow("textBorderDashOffset"),a.textBorderDashOffset);dn!=null&&(t.lineDashOffset=dn),!l&&tn==null&&!d&&(tn=s&&s.defaultOpacity),tn!=null&&(t.opacity=tn),!l&&!u&&t.fill==null&&s.inheritColor&&(t.fill=s.inheritColor);for(var Cn=0;Cn<TEXT_PROPS_WITH_GLOBAL.length;Cn++){var Rn=TEXT_PROPS_WITH_GLOBAL[Cn],ax=retrieve2(n.getShallow(Rn),a[Rn]);ax!=null&&(t[Rn]=ax)}for(var Cn=0;Cn<TEXT_PROPS_SELF.length;Cn++){var Rn=TEXT_PROPS_SELF[Cn],ax=n.getShallow(Rn);ax!=null&&(t[Rn]=ax)}if(t.verticalAlign==null){var ox=n.getShallow("baseline");ox!=null&&(t.verticalAlign=ox)}if(!c||!s.disableBox){for(var Cn=0;Cn<TEXT_PROPS_BOX.length;Cn++){var Rn=TEXT_PROPS_BOX[Cn],ax=n.getShallow(Rn);ax!=null&&(t[Rn]=ax)}var sx=n.getShallow("borderType");sx!=null&&(t.borderDash=sx),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&Ct&&(t.backgroundColor=Ct),(t.borderColor==="auto"||t.borderColor==="inherit")&&Ct&&(t.borderColor=Ct)}}function getFont(t,n){var a=n&&n.getModel("textStyle");return trim$1([t.fontStyle||a&&a.getShallow("fontStyle")||"",t.fontWeight||a&&a.getShallow("fontWeight")||"",(t.fontSize||a&&a.getShallow("fontSize")||12)+"px",t.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(t,n,a,s){if(t){var l=labelInner(t);l.prevValue=l.value,l.value=a;var u=n.normal;l.valueAnimation=u.get("valueAnimation"),l.valueAnimation&&(l.precision=u.get("precision"),l.defaultInterpolatedText=s,l.statesModels=n)}}function animateLabelValue(t,n,a,s,l){var u=labelInner(t);if(!u.valueAnimation||u.prevValue===u.value)return;var c=u.defaultInterpolatedText,d=retrieve2(u.interpolatedValue,u.prevValue),Ct=u.value;function ar(en){var tn=interpolateRawValues(a,u.precision,d,Ct,en);u.interpolatedValue=en===1?null:tn;var on=getLabelText({labelDataIndex:n,labelFetcher:l,defaultText:c?c(tn):tn+""},u.statesModels,tn);setLabelText(t,on)}t.percent=0,(u.prevValue==null?initProps:updateProps$1)(t,{percent:1},s,n,null,ar)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=(function(){function t(){}return t.prototype.getTextColor=function(n){var a=this.ecModel;return this.getShallow("color")||(!n&&a?a.get(PATH_COLOR):null)},t.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(n){for(var a={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},s=0;s<textStyleParams.length;s++)a[textStyleParams[s]]=this.getShallow(textStyleParams[s]);return tmpText.useStyle(a),tmpText.update(),tmpText.getBoundingRect()},t})(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=(function(){function t(){}return t.prototype.getLineStyle=function(n){return getLineStyle(this,n)},t})(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=(function(){function t(){}return t.prototype.getItemStyle=function(n,a){return getItemStyle(this,n,a)},t})(),Model=(function(){function t(n,a,s){this.parentModel=a,this.ecModel=s,this.option=n}return t.prototype.init=function(n,a,s){},t.prototype.mergeOption=function(n,a){merge(this.option,n,!0)},t.prototype.get=function(n,a){return n==null?this.option:this._doGet(this.parsePath(n),!a&&this.parentModel)},t.prototype.getShallow=function(n,a){var s=this.option,l=s==null?s:s[n];if(l==null&&!a){var u=this.parentModel;u&&(l=u.getShallow(n))}return l},t.prototype.getModel=function(n,a){var s=n!=null,l=s?this.parsePath(n):null,u=s?this._doGet(l):this.option;return a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new t(u,a,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var n=this.constructor;return new n(clone$4(this.option))},t.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},t.prototype.resolveParentPath=function(n){return n},t.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(n,a){var s=this.option;if(!n)return s;for(var l=0;l<n.length&&!(n[l]&&(s=s&&typeof s=="object"?s[n[l]]:null,s==null));l++);return s==null&&a&&(s=a._doGet(this.resolveParentPath(n),a.parentModel)),s},t})();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(t){return[t||"",base++].join("_")}function enableSubTypeDefaulter(t){var n={};t.registerSubTypeDefaulter=function(a,s){var l=parseClassType(a);n[l.main]=s},t.determineSubType=function(a,s){var l=s.type;if(!l){var u=parseClassType(a).main;t.hasSubTypes(a)&&n[u]&&(l=n[u](s))}return l}}function enableTopologicalTravel(t,n){t.topologicalTravel=function(u,c,d,Ct){if(!u.length)return;var ar=a(c),en=ar.graph,tn=ar.noEntryList,on={};for(each$f(u,function(ox){on[ox]=!0});tn.length;){var fn=tn.pop(),dn=en[fn],Cn=!!on[fn];Cn&&(d.call(Ct,fn,dn.originalDeps.slice()),delete on[fn]),each$f(dn.successor,Cn?ax:Rn)}each$f(on,function(){var ox="";throw new Error(ox)});function Rn(ox){en[ox].entryCount--,en[ox].entryCount===0&&tn.push(ox)}function ax(ox){on[ox]=!0,Rn(ox)}};function a(u){var c={},d=[];return each$f(u,function(Ct){var ar=s(c,Ct),en=ar.originalDeps=n(Ct),tn=l(en,u);ar.entryCount=tn.length,ar.entryCount===0&&d.push(Ct),each$f(tn,function(on){indexOf(ar.predecessor,on)<0&&ar.predecessor.push(on);var fn=s(c,on);indexOf(fn.successor,on)<0&&fn.successor.push(Ct)})}),{graph:c,noEntryList:d}}function s(u,c){return u[c]||(u[c]={predecessor:[],successor:[]}),u[c]}function l(u,c){var d=[];return each$f(u,function(Ct){indexOf(c,Ct)>=0&&d.push(Ct)}),d}}function inheritDefaultOption(t,n){return merge(merge({},t,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?(function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return t.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE})():DEFAULT_LOCALE;function registerLocale(t,n){t=t.toUpperCase(),localeModels[t]=new Model(n),localeStorage[t]=n}function createLocaleObject(t){if(isString$1(t)){var n=localeStorage[t.toUpperCase()]||{};return t===LOCALE_ZH||t===LOCALE_EN?clone$4(n):merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(t){return localeModels[t]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(t,n){return t+="","0000".substr(0,n-t.length)+t}function getPrimaryTimeUnit(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function isPrimaryTimeUnit(t){return t===getPrimaryTimeUnit(t)}function getDefaultFormatPrecisionOfInterval(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(t,n,a,s){var l=parseDate(t),u=l[fullYearGetterName(a)](),c=l[monthGetterName(a)]()+1,d=Math.floor((c-1)/3)+1,Ct=l[dateGetterName(a)](),ar=l["get"+(a?"UTC":"")+"Day"](),en=l[hoursGetterName(a)](),tn=(en-1)%12+1,on=l[minutesGetterName(a)](),fn=l[secondsGetterName(a)](),dn=l[millisecondsGetterName(a)](),Cn=en>=12?"pm":"am",Rn=Cn.toUpperCase(),ax=s instanceof Model?s:getLocaleModel(s||SYSTEM_LANG)||getDefaultLocaleModel(),ox=ax.getModel("time"),sx=ox.get("month"),lx=ox.get("monthAbbr"),cx=ox.get("dayOfWeek"),fx=ox.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,Cn+"").replace(/{A}/g,Rn+"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,d+"").replace(/{MMMM}/g,sx[c-1]).replace(/{MMM}/g,lx[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(Ct,2)).replace(/{d}/g,Ct+"").replace(/{eeee}/g,cx[ar]).replace(/{ee}/g,fx[ar]).replace(/{e}/g,ar+"").replace(/{HH}/g,pad(en,2)).replace(/{H}/g,en+"").replace(/{hh}/g,pad(tn+"",2)).replace(/{h}/g,tn+"").replace(/{mm}/g,pad(on,2)).replace(/{m}/g,on+"").replace(/{ss}/g,pad(fn,2)).replace(/{s}/g,fn+"").replace(/{SSS}/g,pad(dn,3)).replace(/{S}/g,dn+"")}function leveledFormat(t,n,a,s,l){var u=null;if(isString$1(a))u=a;else if(isFunction$1(a))u=a(t.value,n,{level:t.level});else{var c=extend({},defaultLeveledFormatter);if(t.level>0)for(var d=0;d<primaryTimeUnits.length;++d)c[primaryTimeUnits[d]]="{primary|"+c[primaryTimeUnits[d]]+"}";var Ct=a?a.inherit===!1?a:defaults(a,c):c,ar=getUnitFromValue(t.value,l);if(Ct[ar])u=Ct[ar];else if(Ct.inherit){for(var en=timeUnits.indexOf(ar),d=en-1;d>=0;--d)if(Ct[ar]){u=Ct[ar];break}u=u||c.none}if(isArray$1(u)){var tn=t.level==null?0:t.level>=0?t.level:u.length+t.level;tn=Math.min(tn,u.length-1),u=u[tn]}}return format$1(new Date(t.value),u,l,s)}function getUnitFromValue(t,n){var a=parseDate(t),s=a[monthGetterName(n)]()+1,l=a[dateGetterName(n)](),u=a[hoursGetterName(n)](),c=a[minutesGetterName(n)](),d=a[secondsGetterName(n)](),Ct=a[millisecondsGetterName(n)](),ar=Ct===0,en=ar&&d===0,tn=en&&c===0,on=tn&&u===0,fn=on&&l===1,dn=fn&&s===1;return dn?"year":fn?"month":on?"day":tn?"hour":en?"minute":ar?"second":"millisecond"}function getUnitValue(t,n,a){var s=isNumber(t)?parseDate(t):t;switch(n=n||getUnitFromValue(t,a),n){case"year":return s[fullYearGetterName(a)]();case"half-year":return s[monthGetterName(a)]()>=6?1:0;case"quarter":return Math.floor((s[monthGetterName(a)]()+1)/4);case"month":return s[monthGetterName(a)]();case"day":return s[dateGetterName(a)]();case"half-day":return s[hoursGetterName(a)]()/24;case"hour":return s[hoursGetterName(a)]();case"minute":return s[minutesGetterName(a)]();case"second":return s[secondsGetterName(a)]();case"millisecond":return s[millisecondsGetterName(a)]()}}function fullYearGetterName(t){return t?"getUTCFullYear":"getFullYear"}function monthGetterName(t){return t?"getUTCMonth":"getMonth"}function dateGetterName(t){return t?"getUTCDate":"getDate"}function hoursGetterName(t){return t?"getUTCHours":"getHours"}function minutesGetterName(t){return t?"getUTCMinutes":"getMinutes"}function secondsGetterName(t){return t?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(t){return t?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(t){return t?"setUTCFullYear":"setFullYear"}function monthSetterName(t){return t?"setUTCMonth":"setMonth"}function dateSetterName(t){return t?"setUTCDate":"setDate"}function hoursSetterName(t){return t?"setUTCHours":"setHours"}function minutesSetterName(t){return t?"setUTCMinutes":"setMinutes"}function secondsSetterName(t){return t?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(t){return t?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(t,n,a,s,l,u,c,d){var Ct=new ZRText({style:{text:t,font:n,align:a,verticalAlign:s,padding:l,rich:u,overflow:c?"truncate":null,lineHeight:d}});return Ct.getBoundingRect()}function addCommas(t){if(!isNumeric(t))return isString$1(t)?t:"-";var n=(t+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(t,n){return t=(t||"").toLowerCase().replace(/-(.)/g,function(a,s){return s.toUpperCase()}),n&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(t,n,a){var s="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(en){return en&&trim$1(en)?en:"-"}function u(en){return!!(en!=null&&!isNaN(en)&&isFinite(en))}var c=n==="time",d=t instanceof Date;if(c||d){var Ct=c?parseDate(t):t;if(isNaN(+Ct)){if(d)return"-"}else return format$1(Ct,s,a)}if(n==="ordinal")return isStringSafe(t)?l(t):isNumber(t)&&u(t)?t+"":"-";var ar=numericToNumber(t);return u(ar)?addCommas(ar):isStringSafe(t)?l(t):typeof t=="boolean"?t+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(t,n){return"{"+t+(n??"")+"}"};function formatTpl(t,n,a){isArray$1(n)||(n=[n]);var s=n.length;if(!s)return"";for(var l=n[0].$vars||[],u=0;u<l.length;u++){var c=TPL_VAR_ALIAS[u];t=t.replace(wrapVar(c),wrapVar(c,0))}for(var d=0;d<s;d++)for(var Ct=0;Ct<l.length;Ct++){var ar=n[d][l[Ct]];t=t.replace(wrapVar(TPL_VAR_ALIAS[Ct],d),a?encodeHTML(ar):ar)}return t}function formatTplSimple(t,n,a){return each$f(n,function(s,l){t=t.replace("{"+l+"}",s)}),t}function getTooltipMarker(t,n){var a=isString$1(t)?{color:t,extraCssText:n}:t||{},s=a.color,l=a.type;n=a.extraCssText;var u=a.renderMode||"html";if(!s)return"";if(u==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(s)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(s)+";"+(n||"")+'"></span>';var c=a.markerId||"markerX";return{renderMode:u,content:"{"+c+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:s}:{width:10,height:10,borderRadius:5,backgroundColor:s}}}function formatTime(t,n,a){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var s=parseDate(n),l=a?"getUTC":"get",u=s[l+"FullYear"](),c=s[l+"Month"]()+1,d=s[l+"Date"](),Ct=s[l+"Hours"](),ar=s[l+"Minutes"](),en=s[l+"Seconds"](),tn=s[l+"Milliseconds"]();return t=t.replace("MM",pad(c,2)).replace("M",c).replace("yyyy",u).replace("yy",pad(u%100+"",2)).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(Ct,2)).replace("h",Ct).replace("mm",pad(ar,2)).replace("m",ar).replace("ss",pad(en,2)).replace("s",en).replace("SSS",pad(tn,3)),t}function capitalFirst(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}function convertToColorString(t,n){return n=n||"transparent",isString$1(t)?t:isObject$3(t)&&t.colorStops&&(t.colorStops[0]||{}).color||n}function windowOpen(t,n){if(n==="_blank"||n==="blank"){var a=window.open();a.opener=null,a.location.href=t}else window.open(t,n)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(t,n,a,s,l){var u=0,c=0;s==null&&(s=1/0),l==null&&(l=1/0);var d=0;n.eachChild(function(Ct,ar){var en=Ct.getBoundingRect(),tn=n.childAt(ar+1),on=tn&&tn.getBoundingRect(),fn,dn;if(t==="horizontal"){var Cn=en.width+(on?-on.x+en.x:0);fn=u+Cn,fn>s||Ct.newline?(u=0,fn=Cn,c+=d+a,d=en.height):d=Math.max(d,en.height)}else{var Rn=en.height+(on?-on.y+en.y:0);dn=c+Rn,dn>l||Ct.newline?(u+=d+a,c=0,dn=Rn,d=en.width):d=Math.max(d,en.width)}Ct.newline||(Ct.x=u,Ct.y=c,Ct.markRedraw(),t==="horizontal"?u=fn+a:c=dn+a)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(t,n,a){var s=n.width,l=n.height,u=parsePercent(t.left,s),c=parsePercent(t.top,l),d=parsePercent(t.right,s),Ct=parsePercent(t.bottom,l);return(isNaN(u)||isNaN(parseFloat(t.left)))&&(u=0),(isNaN(d)||isNaN(parseFloat(t.right)))&&(d=s),(isNaN(c)||isNaN(parseFloat(t.top)))&&(c=0),(isNaN(Ct)||isNaN(parseFloat(t.bottom)))&&(Ct=l),a=normalizeCssArray(a||0),{width:Math.max(d-u-a[1]-a[3],0),height:Math.max(Ct-c-a[0]-a[2],0)}}function getLayoutRect(t,n,a){a=normalizeCssArray(a||0);var s=n.width,l=n.height,u=parsePercent(t.left,s),c=parsePercent(t.top,l),d=parsePercent(t.right,s),Ct=parsePercent(t.bottom,l),ar=parsePercent(t.width,s),en=parsePercent(t.height,l),tn=a[2]+a[0],on=a[1]+a[3],fn=t.aspect;switch(isNaN(ar)&&(ar=s-d-on-u),isNaN(en)&&(en=l-Ct-tn-c),fn!=null&&(isNaN(ar)&&isNaN(en)&&(fn>s/l?ar=s*.8:en=l*.8),isNaN(ar)&&(ar=fn*en),isNaN(en)&&(en=ar/fn)),isNaN(u)&&(u=s-d-ar-on),isNaN(c)&&(c=l-Ct-en-tn),t.left||t.right){case"center":u=s/2-ar/2-a[3];break;case"right":u=s-ar-on;break}switch(t.top||t.bottom){case"middle":case"center":c=l/2-en/2-a[0];break;case"bottom":c=l-en-tn;break}u=u||0,c=c||0,isNaN(ar)&&(ar=s-on-u-(d||0)),isNaN(en)&&(en=l-tn-c-(Ct||0));var dn=new BoundingRect(u+a[3],c+a[0],ar,en);return dn.margin=a,dn}function positionElement(t,n,a,s,l,u){var c=!l||!l.hv||l.hv[0],d=!l||!l.hv||l.hv[1],Ct=l&&l.boundingMode||"all";if(u=u||t,u.x=t.x,u.y=t.y,!c&&!d)return!1;var ar;if(Ct==="raw")ar=t.type==="group"?new BoundingRect(0,0,+n.width||0,+n.height||0):t.getBoundingRect();else if(ar=t.getBoundingRect(),t.needLocalTransform()){var en=t.getLocalTransform();ar=ar.clone(),ar.applyTransform(en)}var tn=getLayoutRect(defaults({width:ar.width,height:ar.height},n),a,s),on=c?tn.x-ar.x:0,fn=d?tn.y-ar.y:0;return Ct==="raw"?(u.x=on,u.y=fn):(u.x+=on,u.y+=fn),u===t&&t.markRedraw(),!0}function sizeCalculable(t,n){return t[HV_NAMES[n][0]]!=null||t[HV_NAMES[n][1]]!=null&&t[HV_NAMES[n][2]]!=null}function fetchLayoutMode(t){var n=t.layoutMode||t.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(t,n,a){var s=a&&a.ignoreSize;!isArray$1(s)&&(s=[s,s]);var l=c(HV_NAMES[0],0),u=c(HV_NAMES[1],1);ar(HV_NAMES[0],t,l),ar(HV_NAMES[1],t,u);function c(en,tn){var on={},fn=0,dn={},Cn=0,Rn=2;if(each$e(en,function(sx){dn[sx]=t[sx]}),each$e(en,function(sx){d(n,sx)&&(on[sx]=dn[sx]=n[sx]),Ct(on,sx)&&fn++,Ct(dn,sx)&&Cn++}),s[tn])return Ct(n,en[1])?dn[en[2]]=null:Ct(n,en[2])&&(dn[en[1]]=null),dn;if(Cn===Rn||!fn)return dn;if(fn>=Rn)return on;for(var ax=0;ax<en.length;ax++){var ox=en[ax];if(!d(on,ox)&&d(t,ox)){on[ox]=t[ox];break}}return on}function d(en,tn){return en.hasOwnProperty(tn)}function Ct(en,tn){return en[tn]!=null&&en[tn]!=="auto"}function ar(en,tn,on){each$e(en,function(fn){tn[fn]=on[fn]})}}function getLayoutParams(t){return copyLayoutParams({},t)}function copyLayoutParams(t,n){return n&&t&&each$e(LOCATION_PARAMS,function(a){n.hasOwnProperty(a)&&(t[a]=n[a])}),t}var inner$l=makeInner(),ComponentModel=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a,s,l)||this;return u.uid=getUID("ec_cpt_model"),u}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l)},n.prototype.mergeDefaultAndTheme=function(a,s){var l=fetchLayoutMode(this),u=l?getLayoutParams(a):{},c=s.getTheme();merge(a,c.get(this.mainType)),merge(a,this.getDefaultOption()),l&&mergeLayoutParam(a,u,l)},n.prototype.mergeOption=function(a,s){merge(this.option,a,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,a,l)},n.prototype.optionUpdated=function(a,s){},n.prototype.getDefaultOption=function(){var a=this.constructor;if(!isExtendedClass(a))return a.defaultOption;var s=inner$l(this);if(!s.defaultOption){for(var l=[],u=a;u;){var c=u.prototype.defaultOption;c&&l.push(c),u=u.superClass}for(var d={},Ct=l.length-1;Ct>=0;Ct--)d=merge(d,l[Ct],!0);s.defaultOption=d}return s.defaultOption},n.prototype.getReferringComponents=function(a,s){var l=a+"Index",u=a+"Id";return queryReferringComponents(this.ecModel,a,{index:this.get(l,!0),id:this.get(u,!0)},s)},n.prototype.getBoxLayoutParams=function(){var a=this;return{left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(a){this.option.zlevel=a},n.protoInitialize=(function(){var a=n.prototype;a.type="component",a.id="",a.name="",a.mainType="",a.subType="",a.componentIndex=0})(),n})(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(t){var n=[];return each$f(ComponentModel.getClassesByMainType(t),function(a){n=n.concat(a.dependencies||a.prototype.dependencies||[])}),n=map$1(n,function(a){return parseClassType(a).main}),t!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(t){innerGlobalModel(t).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(t,n,a){var s={},l=querySeriesUpstreamDatasetModel(n);if(!l||!t)return s;var u=[],c=[],d=n.ecModel,Ct=innerGlobalModel(d).datasetMap,ar=l.uid+"_"+a.seriesLayoutBy,en,tn;t=t.slice(),each$f(t,function(Cn,Rn){var ax=isObject$3(Cn)?Cn:t[Rn]={name:Cn};ax.type==="ordinal"&&en==null&&(en=Rn,tn=dn(ax)),s[ax.name]=[]});var on=Ct.get(ar)||Ct.set(ar,{categoryWayDim:tn,valueWayDim:0});each$f(t,function(Cn,Rn){var ax=Cn.name,ox=dn(Cn);if(en==null){var sx=on.valueWayDim;fn(s[ax],sx,ox),fn(c,sx,ox),on.valueWayDim+=ox}else if(en===Rn)fn(s[ax],0,ox),fn(u,0,ox);else{var sx=on.categoryWayDim;fn(s[ax],sx,ox),fn(c,sx,ox),on.categoryWayDim+=ox}});function fn(Cn,Rn,ax){for(var ox=0;ox<ax;ox++)Cn.push(Rn+ox)}function dn(Cn){var Rn=Cn.dimsDef;return Rn?Rn.length:1}return u.length&&(s.itemName=u),c.length&&(s.seriesName=c),s}function makeSeriesEncodeForNameBased(t,n,a){var s={},l=querySeriesUpstreamDatasetModel(t);if(!l)return s;var u=n.sourceFormat,c=n.dimensionsDefine,d;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(en,tn){(isObject$3(en)?en.name:en)==="name"&&(d=tn)});var Ct=(function(){for(var en={},tn={},on=[],fn=0,dn=Math.min(5,a);fn<dn;fn++){var Cn=doGuessOrdinal(n.data,u,n.seriesLayoutBy,c,n.startIndex,fn);on.push(Cn);var Rn=Cn===BE_ORDINAL.Not;if(Rn&&en.v==null&&fn!==d&&(en.v=fn),(en.n==null||en.n===en.v||!Rn&&on[en.n]===BE_ORDINAL.Not)&&(en.n=fn),ax(en)&&on[en.n]!==BE_ORDINAL.Not)return en;Rn||(Cn===BE_ORDINAL.Might&&tn.v==null&&fn!==d&&(tn.v=fn),(tn.n==null||tn.n===tn.v)&&(tn.n=fn))}function ax(ox){return ox.v!=null&&ox.n!=null}return ax(en)?en:ax(tn)?tn:null})();if(Ct){s.value=[Ct.v];var ar=d??Ct.n;s.itemName=[ar],s.seriesName=[ar]}return s}function querySeriesUpstreamDatasetModel(t){var n=t.get("data",!0);if(!n)return queryReferringComponents(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:queryReferringComponents(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(t,n){return doGuessOrdinal(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,n)}function doGuessOrdinal(t,n,a,s,l,u){var c,d=5;if(isTypedArray(t))return BE_ORDINAL.Not;var Ct,ar;if(s){var en=s[u];isObject$3(en)?(Ct=en.name,ar=en.type):isString$1(en)&&(Ct=en)}if(ar!=null)return ar==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var tn=t;if(a===SERIES_LAYOUT_BY_ROW){for(var on=tn[u],fn=0;fn<(on||[]).length&&fn<d;fn++)if((c=lx(on[l+fn]))!=null)return c}else for(var fn=0;fn<tn.length&&fn<d;fn++){var dn=tn[l+fn];if(dn&&(c=lx(dn[u]))!=null)return c}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var Cn=t;if(!Ct)return BE_ORDINAL.Not;for(var fn=0;fn<Cn.length&&fn<d;fn++){var Rn=Cn[fn];if(Rn&&(c=lx(Rn[Ct]))!=null)return c}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var ax=t;if(!Ct)return BE_ORDINAL.Not;var on=ax[Ct];if(!on||isTypedArray(on))return BE_ORDINAL.Not;for(var fn=0;fn<on.length&&fn<d;fn++)if((c=lx(on[fn]))!=null)return c}else if(n===SOURCE_FORMAT_ORIGINAL)for(var ox=t,fn=0;fn<ox.length&&fn<d;fn++){var Rn=ox[fn],sx=getDataItemValue(Rn);if(!isArray$1(sx))return BE_ORDINAL.Not;if((c=lx(sx[u]))!=null)return c}function lx(cx){var fx=isString$1(cx);if(cx!=null&&Number.isFinite(Number(cx))&&cx!=="")return fx?BE_ORDINAL.Might:BE_ORDINAL.Not;if(fx&&cx!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(t,n){assert(internalOptionCreatorMap.get(t)==null&&n),internalOptionCreatorMap.set(t,n)}function concatInternalOptions(t,n,a){var s=internalOptionCreatorMap.get(n);if(!s)return a;var l=s(t);return l?a.concat(l):a}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=(function(){function t(){}return t.prototype.getColorFromPalette=function(n,a,s){var l=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,u,n,a,s)},t.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},t})();function getDecalFromPalette(t,n,a,s){var l=normalizeToArray(t.get(["aria","decal","decals"]));return getFromPalette(t,innerDecal,l,null,n,a,s)}function getNearestPalette(t,n){for(var a=t.length,s=0;s<a;s++)if(t[s].length>n)return t[s];return t[a-1]}function getFromPalette(t,n,a,s,l,u,c){u=u||t;var d=n(u),Ct=d.paletteIdx||0,ar=d.paletteNameMap=d.paletteNameMap||{};if(ar.hasOwnProperty(l))return ar[l];var en=c==null||!s?a:getNearestPalette(s,c);if(en=en||a,!(!en||!en.length)){var tn=en[Ct];return l&&(ar[l]=tn),d.paletteIdx=(Ct+1)%en.length,tn}}function clearPalette(t,n){n(t).paletteIdx=0,n(t).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a,s,l,u,c,d){u=u||{},this.option=null,this._theme=new Model(u),this._locale=new Model(c),this._optionManager=d},n.prototype.setOption=function(a,s,l){var u=normalizeSetOptionInput(s);this._optionManager.setOption(a,l,u),this._resetOption(null,u)},n.prototype.resetOption=function(a,s){return this._resetOption(a,normalizeSetOptionInput(s))},n.prototype._resetOption=function(a,s){var l=!1,u=this._optionManager;if(!a||a==="recreate"){var c=u.mountOption(a==="recreate");!this.option||a==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,s)),l=!0}if((a==="timeline"||a==="media")&&this.restoreData(),!a||a==="recreate"||a==="timeline"){var d=u.getTimelineOption(this);d&&(l=!0,this._mergeOption(d,s))}if(!a||a==="recreate"||a==="media"){var Ct=u.getMediaOption(this);Ct.length&&each$f(Ct,function(ar){l=!0,this._mergeOption(ar,s)},this)}return l},n.prototype.mergeOption=function(a){this._mergeOption(a,null)},n.prototype._mergeOption=function(a,s){var l=this.option,u=this._componentsMap,c=this._componentsCount,d=[],Ct=createHashMap(),ar=s&&s.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(a,function(tn,on){tn!=null&&(ComponentModel.hasClass(on)?on&&(d.push(on),Ct.set(on,!0)):l[on]=l[on]==null?clone$4(tn):merge(l[on],tn,!0))}),ar&&ar.each(function(tn,on){ComponentModel.hasClass(on)&&!Ct.get(on)&&(d.push(on),Ct.set(on,!0))}),ComponentModel.topologicalTravel(d,ComponentModel.getAllClassMainTypes(),en,this);function en(tn){var on=concatInternalOptions(this,tn,normalizeToArray(a[tn])),fn=u.get(tn),dn=fn?ar&&ar.get(tn)?"replaceMerge":"normalMerge":"replaceAll",Cn=mappingToExists(fn,on,dn);setComponentTypeToKeyInfo(Cn,tn,ComponentModel),l[tn]=null,u.set(tn,null),c.set(tn,0);var Rn=[],ax=[],ox=0,sx;each$f(Cn,function(lx,cx){var fx=lx.existing,gx=lx.newOption;if(!gx)fx&&(fx.mergeOption({},this),fx.optionUpdated({},!1));else{var mx=tn==="series",px=ComponentModel.getClass(tn,lx.keyInfo.subType,!mx);if(!px)return;if(tn==="tooltip"){if(sx)return;sx=!0}if(fx&&fx.constructor===px)fx.name=lx.keyInfo.name,fx.mergeOption(gx,this),fx.optionUpdated(gx,!1);else{var hx=extend({componentIndex:cx},lx.keyInfo);fx=new px(gx,this,this,hx),extend(fx,hx),lx.brandNew&&(fx.__requireNewView=!0),fx.init(gx,this,this),fx.optionUpdated(null,!0)}}fx?(Rn.push(fx.option),ax.push(fx),ox++):(Rn.push(void 0),ax.push(void 0))},this),l[tn]=Rn,u.set(tn,ax),c.set(tn,ox),tn==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var a=clone$4(this.option);return each$f(a,function(s,l){if(ComponentModel.hasClass(l)){for(var u=normalizeToArray(s),c=u.length,d=!1,Ct=c-1;Ct>=0;Ct--)u[Ct]&&!isComponentIdInternal(u[Ct])?d=!0:(u[Ct]=null,!d&&c--);u.length=c,a[l]=u}}),delete a[OPTION_INNER_KEY],a},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(a){this._payload=a},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(a,s){var l=this._componentsMap.get(a);if(l){var u=l[s||0];if(u)return u;if(s==null){for(var c=0;c<l.length;c++)if(l[c])return l[c]}}},n.prototype.queryComponents=function(a){var s=a.mainType;if(!s)return[];var l=a.index,u=a.id,c=a.name,d=this._componentsMap.get(s);if(!d||!d.length)return[];var Ct;return l!=null?(Ct=[],each$f(normalizeToArray(l),function(ar){d[ar]&&Ct.push(d[ar])})):u!=null?Ct=queryByIdOrName("id",u,d):c!=null?Ct=queryByIdOrName("name",c,d):Ct=filter(d,function(ar){return!!ar}),filterBySubType(Ct,a)},n.prototype.findComponents=function(a){var s=a.query,l=a.mainType,u=d(s),c=u?this.queryComponents(u):filter(this._componentsMap.get(l),function(ar){return!!ar});return Ct(filterBySubType(c,a));function d(ar){var en=l+"Index",tn=l+"Id",on=l+"Name";return ar&&(ar[en]!=null||ar[tn]!=null||ar[on]!=null)?{mainType:l,index:ar[en],id:ar[tn],name:ar[on]}:null}function Ct(ar){return a.filter?filter(ar,a.filter):ar}},n.prototype.eachComponent=function(a,s,l){var u=this._componentsMap;if(isFunction$1(a)){var c=s,d=a;u.each(function(tn,on){for(var fn=0;tn&&fn<tn.length;fn++){var dn=tn[fn];dn&&d.call(c,on,dn,dn.componentIndex)}})}else for(var Ct=isString$1(a)?u.get(a):isObject$3(a)?this.findComponents(a):null,ar=0;Ct&&ar<Ct.length;ar++){var en=Ct[ar];en&&s.call(l,en,en.componentIndex)}},n.prototype.getSeriesByName=function(a){var s=convertOptionIdName(a,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&s!=null&&l.name===s})},n.prototype.getSeriesByIndex=function(a){return this._componentsMap.get("series")[a]},n.prototype.getSeriesByType=function(a){return filter(this._componentsMap.get("series"),function(s){return!!s&&s.subType===a})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(a){return!!a})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(a,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];a.call(s,u,l)},this)},n.prototype.eachRawSeries=function(a,s){each$f(this._componentsMap.get("series"),function(l){l&&a.call(s,l,l.componentIndex)})},n.prototype.eachSeriesByType=function(a,s,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];c.subType===a&&s.call(l,c,u)},this)},n.prototype.eachRawSeriesByType=function(a,s,l){return each$f(this.getSeriesByType(a),s,l)},n.prototype.isSeriesFiltered=function(a){return assertSeriesInitialized(this),this._seriesIndicesMap.get(a.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(a,s){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];a.call(s,c,u)&&l.push(u)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},n.prototype.restoreData=function(a){reCreateSeriesIndices(this);var s=this._componentsMap,l=[];s.each(function(u,c){ComponentModel.hasClass(c)&&l.push(c)}),ComponentModel.topologicalTravel(l,ComponentModel.getAllClassMainTypes(),function(u){each$f(s.get(u),function(c){c&&(u!=="series"||!isNotTargetSeries(c,a))&&c.restoreData()})})},n.internalField=(function(){reCreateSeriesIndices=function(a){var s=a._seriesIndices=[];each$f(a._componentsMap.get("series"),function(l){l&&s.push(l.componentIndex)}),a._seriesIndicesMap=createHashMap(s)},assertSeriesInitialized=function(a){},initBase=function(a,s){a.option={},a.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,a._componentsMap=createHashMap({series:[]}),a._componentsCount=createHashMap();var l=s.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(s,a._theme.option),merge(s,globalDefault,!1),a._mergeOption(s,null)}})(),n})(Model);function isNotTargetSeries(t,n){if(n){var a=n.seriesIndex,s=n.seriesId,l=n.seriesName;return a!=null&&t.componentIndex!==a||s!=null&&t.id!==s||l!=null&&t.name!==l}}function mergeTheme(t,n){var a=t.color&&!t.colorLayer;each$f(n,function(s,l){l==="colorLayer"&&a||ComponentModel.hasClass(l)||(typeof s=="object"?t[l]=t[l]?merge(t[l],s,!1):clone$4(s):t[l]==null&&(t[l]=s))})}function queryByIdOrName(t,n,a){if(isArray$1(n)){var s=createHashMap();return each$f(n,function(u){if(u!=null){var c=convertOptionIdName(u,null);c!=null&&s.set(u,!0)}}),filter(a,function(u){return u&&s.get(u[t])})}else{var l=convertOptionIdName(n,null);return filter(a,function(u){return u&&l!=null&&u[t]===l})}}function filterBySubType(t,n){return n.hasOwnProperty("subType")?filter(t,function(a){return a&&a.subType===n.subType}):t}function normalizeSetOptionInput(t){var n=createHashMap();return t&&each$f(normalizeToArray(t.replaceMerge),function(a){n.set(a,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=(function(){function t(n){each$f(availableMethods,function(a){this[a]=bind$1(n[a],n)},this)}return t})(),coordinateSystemCreators={},CoordinateSystemManager=(function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(n,a){var s=[];each$f(coordinateSystemCreators,function(l,u){var c=l.create(n,a);s=s.concat(c||[])}),this._coordinateSystems=s},t.prototype.update=function(n,a){each$f(this._coordinateSystems,function(s){s.update&&s.update(n,a)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(n,a){coordinateSystemCreators[n]=a},t.get=function(n){return coordinateSystemCreators[n]},t})(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=(function(){function t(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return t.prototype.setOption=function(n,a,s){n&&(each$f(normalizeToArray(n.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(n.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),n=clone$4(n);var l=this._optionBackup,u=parseRawOption(n,a,!l);this._newBaseOption=u.baseOption,l?(u.timelineOptions.length&&(l.timelineOptions=u.timelineOptions),u.mediaList.length&&(l.mediaList=u.mediaList),u.mediaDefault&&(l.mediaDefault=u.mediaDefault)):this._optionBackup=u},t.prototype.mountOption=function(n){var a=this._optionBackup;return this._timelineOptions=a.timelineOptions,this._mediaList=a.mediaList,this._mediaDefault=a.mediaDefault,this._currentMediaIndices=[],clone$4(n?a.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(n){var a,s=this._timelineOptions;if(s.length){var l=n.getComponent("timeline");l&&(a=clone$4(s[l.getCurrentIndex()]))}return a},t.prototype.getMediaOption=function(n){var a=this._api.getWidth(),s=this._api.getHeight(),l=this._mediaList,u=this._mediaDefault,c=[],d=[];if(!l.length&&!u)return d;for(var Ct=0,ar=l.length;Ct<ar;Ct++)applyMediaQuery(l[Ct].query,a,s)&&c.push(Ct);return!c.length&&u&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(d=map$1(c,function(en){return clone$4(en===-1?u.option:l[en].option)})),this._currentMediaIndices=c,d},t})();function parseRawOption(t,n,a){var s=[],l,u,c=t.baseOption,d=t.timeline,Ct=t.options,ar=t.media,en=!!t.media,tn=!!(Ct||d||c&&c.timeline);c?(u=c,u.timeline||(u.timeline=d)):((tn||en)&&(t.options=t.media=null),u=t),en&&isArray$1(ar)&&each$f(ar,function(fn){fn&&fn.option&&(fn.query?s.push(fn):l||(l=fn))}),on(u),each$f(Ct,function(fn){return on(fn)}),each$f(s,function(fn){return on(fn.option)});function on(fn){each$f(n,function(dn){dn(fn,a)})}return{baseOption:u,timelineOptions:Ct||[],mediaDefault:l,mediaList:s}}function applyMediaQuery(t,n,a){var s={width:n,height:a,aspectratio:n/a},l=!0;return each$f(t,function(u,c){var d=c.match(QUERY_REG);if(!(!d||!d[1]||!d[2])){var Ct=d[1],ar=d[2].toLowerCase();compare(s[ar],u,Ct)||(l=!1)}}),l}function compare(t,n,a){return a==="min"?t>=n:a==="max"?t<=n:t===n}function indicesEquals(t,n){return t.join(",")===n.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0,s=POSSIBLE_STYLES.length;a<s;a++){var l=POSSIBLE_STYLES[a],u=n.normal,c=n.emphasis;u&&u[l]&&(t[l]=t[l]||{},t[l].normal?merge(t[l].normal,u[l]):t[l].normal=u[l],u[l]=null),c&&c[l]&&(t[l]=t[l]||{},t[l].emphasis?merge(t[l].emphasis,c[l]):t[l].emphasis=c[l],c[l]=null)}}function convertNormalEmphasis(t,n,a){if(t&&t[n]&&(t[n].normal||t[n].emphasis)){var s=t[n].normal,l=t[n].emphasis;s&&(a?(t[n].normal=t[n].emphasis=null,defaults(t[n],s)):t[n]=s),l&&(t.emphasis=t.emphasis||{},t.emphasis[n]=l,l.focus&&(t.emphasis.focus=l.focus),l.blurScope&&(t.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(t){convertNormalEmphasis(t,"itemStyle"),convertNormalEmphasis(t,"lineStyle"),convertNormalEmphasis(t,"areaStyle"),convertNormalEmphasis(t,"label"),convertNormalEmphasis(t,"labelLine"),convertNormalEmphasis(t,"upperLabel"),convertNormalEmphasis(t,"edgeLabel")}function compatTextStyle(t,n){var a=isObject$2(t)&&t[n],s=isObject$2(a)&&a.textStyle;if(s)for(var l=0,u=TEXT_STYLE_OPTIONS.length;l<u;l++){var c=TEXT_STYLE_OPTIONS[l];s.hasOwnProperty(c)&&(a[c]=s[c])}}function compatEC3CommonStyles(t){t&&(removeEC3NormalStatus(t),compatTextStyle(t,"label"),t.emphasis&&compatTextStyle(t.emphasis,"label"))}function processSeries(t){if(isObject$2(t)){compatEC2ItemStyle(t),removeEC3NormalStatus(t),compatTextStyle(t,"label"),compatTextStyle(t,"upperLabel"),compatTextStyle(t,"edgeLabel"),t.emphasis&&(compatTextStyle(t.emphasis,"label"),compatTextStyle(t.emphasis,"upperLabel"),compatTextStyle(t.emphasis,"edgeLabel"));var n=t.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var a=t.markLine;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var s=t.markArea;s&&compatEC3CommonStyles(s);var l=t.data;if(t.type==="graph"){l=l||t.nodes;var u=t.links||t.edges;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);each$f(t.categories,function(ar){removeEC3NormalStatus(ar)})}if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatEC3CommonStyles(l[c]);if(n=t.markPoint,n&&n.data)for(var d=n.data,c=0;c<d.length;c++)compatEC3CommonStyles(d[c]);if(a=t.markLine,a&&a.data)for(var Ct=a.data,c=0;c<Ct.length;c++)isArray$1(Ct[c])?(compatEC3CommonStyles(Ct[c][0]),compatEC3CommonStyles(Ct[c][1])):compatEC3CommonStyles(Ct[c]);t.type==="gauge"?(compatTextStyle(t,"axisLabel"),compatTextStyle(t,"title"),compatTextStyle(t,"detail")):t.type==="treemap"?(convertNormalEmphasis(t.breadcrumb,"itemStyle"),each$f(t.levels,function(ar){removeEC3NormalStatus(ar)})):t.type==="tree"&&removeEC3NormalStatus(t.leaves)}}function toArr(t){return isArray$1(t)?t:t?[t]:[]}function toObj(t){return(isArray$1(t)?t[0]:t)||{}}function globalCompatStyle(t,n){each$d(toArr(t.series),function(s){isObject$2(s)&&processSeries(s)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(a,function(s){each$d(toArr(t[s]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(t.parallel),function(s){var l=s&&s.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(t.calendar),function(s){convertNormalEmphasis(s,"itemStyle"),compatTextStyle(s,"dayLabel"),compatTextStyle(s,"monthLabel"),compatTextStyle(s,"yearLabel")}),each$d(toArr(t.radar),function(s){compatTextStyle(s,"name"),s.name&&s.axisName==null&&(s.axisName=s.name,delete s.name),s.nameGap!=null&&s.axisNameGap==null&&(s.axisNameGap=s.nameGap,delete s.nameGap)}),each$d(toArr(t.geo),function(s){isObject$2(s)&&(compatEC3CommonStyles(s),each$d(toArr(s.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(t.timeline),function(s){compatEC3CommonStyles(s),convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"),convertNormalEmphasis(s,"controlStyle",!0);var l=s.data;isArray$1(l)&&each$f(l,function(u){isObject$3(u)&&(convertNormalEmphasis(u,"label"),convertNormalEmphasis(u,"itemStyle"))})}),each$d(toArr(t.toolbox),function(s){convertNormalEmphasis(s,"iconStyle"),each$d(s.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(t.axisPointer),"label"),compatTextStyle(toObj(t.tooltip).axisPointer,"label")}function get(t,n){for(var a=n.split(","),s=t,l=0;l<a.length&&(s=s&&s[a[l]],s!=null);l++);return s}function set(t,n,a,s){for(var l=n.split(","),u=t,c,d=0;d<l.length-1;d++)c=l[d],u[c]==null&&(u[c]={}),u=u[c];u[l[d]]==null&&(u[l[d]]=a)}function compatLayoutProperties(t){t&&each$f(LAYOUT_PROPERTIES,function(n){n[0]in t&&!(n[1]in t)&&(t[n[1]]=t[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0;a<BAR_ITEM_STYLE_MAP.length;a++){var s=BAR_ITEM_STYLE_MAP[a][1],l=BAR_ITEM_STYLE_MAP[a][0];n[s]!=null&&(n[l]=n[s])}}function compatPieLabel(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function compatSunburstState(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function compatGraphFocus(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function traverseTree(t,n){if(t)for(var a=0;a<t.length;a++)n(t[a]),t[a]&&traverseTree(t[a].children,n)}function globalBackwardCompat(t,n){globalCompatStyle(t,n),t.series=normalizeToArray(t.series),each$f(t.series,function(a){if(isObject$3(a)){var s=a.type;if(s==="line")a.clipOverflow!=null&&(a.clip=a.clipOverflow);else if(s==="pie"||s==="gauge"){a.clockWise!=null&&(a.clockwise=a.clockWise),compatPieLabel(a.label);var l=a.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatPieLabel(l[u]);a.hoverOffset!=null&&(a.emphasis=a.emphasis||{},(a.emphasis.scaleSize=null)&&(a.emphasis.scaleSize=a.hoverOffset))}else if(s==="gauge"){var c=get(a,"pointer.color");c!=null&&set(a,"itemStyle.color",c)}else if(s==="bar"){compatBarItemStyle(a),compatBarItemStyle(a.backgroundStyle),compatBarItemStyle(a.emphasis);var l=a.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)typeof l[u]=="object"&&(compatBarItemStyle(l[u]),compatBarItemStyle(l[u]&&l[u].emphasis))}else if(s==="sunburst"){var d=a.highlightPolicy;d&&(a.emphasis=a.emphasis||{},a.emphasis.focus||(a.emphasis.focus=d)),compatSunburstState(a),traverseTree(a.data,compatSunburstState)}else s==="graph"||s==="sankey"?compatGraphFocus(a):s==="map"&&(a.mapType&&!a.map&&(a.map=a.mapType),a.mapLocation&&defaults(a,a.mapLocation));a.hoverAnimation!=null&&(a.emphasis=a.emphasis||{},a.emphasis&&a.emphasis.scale==null&&(a.emphasis.scale=a.hoverAnimation)),compatLayoutProperties(a)}}),t.dataRange&&(t.visualMap=t.dataRange),each$f(COMPATITABLE_COMPONENTS,function(a){var s=t[a];s&&(isArray$1(s)||(s=[s]),each$f(s,function(l){compatLayoutProperties(l)}))})}function dataStack$1(t){var n=createHashMap();t.eachSeries(function(a){var s=a.get("stack");if(s){var l=n.get(s)||n.set(s,[]),u=a.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:a};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;l.length&&u.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(c)}}),n.each(calculateStack)}function calculateStack(t){each$f(t,function(n,a){var s=[],l=[NaN,NaN],u=[n.stackResultDimension,n.stackedOverDimension],c=n.data,d=n.isStackedByIndex,Ct=n.seriesModel.get("stackStrategy")||"samesign";c.modify(u,function(ar,en,tn){var on=c.get(n.stackedDimension,tn);if(isNaN(on))return l;var fn,dn;d?dn=c.getRawIndex(tn):fn=c.get(n.stackedByDimension,tn);for(var Cn=NaN,Rn=a-1;Rn>=0;Rn--){var ax=t[Rn];if(d||(dn=ax.data.rawIndexOf(ax.stackedByDimension,fn)),dn>=0){var ox=ax.data.getByRawIndex(ax.stackResultDimension,dn);if(Ct==="all"||Ct==="positive"&&ox>0||Ct==="negative"&&ox<0||Ct==="samesign"&&on>=0&&ox>0||Ct==="samesign"&&on<=0&&ox<0){on=addSafe(on,ox),Cn=ox;break}}}return s[0]=on,s[1]=Cn,s})})}var SourceImpl=(function(){function t(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var a=this.dimensionsDefine=n.dimensionsDefine;if(a)for(var s=0;s<a.length;s++){var l=a[s];l.type==null&&guessOrdinal(this,s)===BE_ORDINAL.Must&&(l.type="ordinal")}}return t})();function isSourceInstance(t){return t instanceof SourceImpl}function createSource(t,n,a){a=a||detectSourceFormat(t);var s=n.seriesLayoutBy,l=determineSourceDimensions(t,a,s,n.sourceHeader,n.dimensions),u=new SourceImpl({data:t,sourceFormat:a,seriesLayoutBy:s,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(n)});return u}function createSourceFromSeriesDataOption(t){return new SourceImpl({data:t,sourceFormat:isTypedArray(t)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(t){return new SourceImpl({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:clone$4(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function detectSourceFormat(t){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(t))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(t)){t.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var a=0,s=t.length;a<s;a++){var l=t[a];if(l!=null){if(isArray$1(l)||isTypedArray(l)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(t)){for(var u in t)if(hasOwn(t,u)&&isArrayLike(t[u])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(t,n,a,s,l){var u,c;if(!t)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:c,dimensionsDetectedCount:u};if(n===SOURCE_FORMAT_ARRAY_ROWS){var d=t;s==="auto"||s==null?arrayRowsTravelFirst(function(ar){ar!=null&&ar!=="-"&&(isString$1(ar)?c==null&&(c=1):c=0)},a,d,10):c=isNumber(s)?s:s?1:0,!l&&c===1&&(l=[],arrayRowsTravelFirst(function(ar,en){l[en]=ar!=null?ar+"":""},a,d,1/0)),u=l?l.length:a===SERIES_LAYOUT_BY_ROW?d.length:d[0]?d[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(t));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(t,function(ar,en){l.push(en)}));else if(n===SOURCE_FORMAT_ORIGINAL){var Ct=getDataItemValue(t[0]);u=isArray$1(Ct)&&Ct.length||1}return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(t){for(var n=0,a;n<t.length&&!(a=t[n++]););if(a)return keys(a)}function normalizeDimensionsOption(t){if(t){var n=createHashMap();return map$1(t,function(a,s){a=isObject$3(a)?a:{name:a};var l={name:a.name,displayName:a.displayName,type:a.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var u=n.get(l.name);return u?l.name+="-"+u.count++:n.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(t,n,a,s){if(n===SERIES_LAYOUT_BY_ROW)for(var l=0;l<a.length&&l<s;l++)t(a[l]?a[l][0]:null,l);else for(var u=a[0]||[],l=0;l<u.length&&l<s;l++)t(u[l],l)}function shouldRetrieveDataByName(t){var n=t.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=(function(){function t(n,a){var s=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=s;var l=this._data=s.data;s.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=a,this._data=l),mountMethods(this,l,s)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(n,a){},t.prototype.appendData=function(n){},t.prototype.clean=function(){},t.protoInitialize=(function(){var n=t.prototype;n.pure=!1,n.persistent=!0})(),t.internalField=(function(){var n;mountMethods=function(c,d,Ct){var ar=Ct.sourceFormat,en=Ct.seriesLayoutBy,tn=Ct.startIndex,on=Ct.dimensionsDefine,fn=providerMethods[getMethodMapKey(ar,en)];if(extend(c,fn),ar===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=a,c.count=l,c.fillStorage=s;else{var dn=getRawSourceItemGetter(ar,en);c.getItem=bind$1(dn,null,d,tn,on);var Cn=getRawSourceDataCounter(ar,en);c.count=bind$1(Cn,null,d,tn,on)}};var a=function(c,d){c=c-this._offset,d=d||[];for(var Ct=this._data,ar=this._dimSize,en=ar*c,tn=0;tn<ar;tn++)d[tn]=Ct[en+tn];return d},s=function(c,d,Ct,ar){for(var en=this._data,tn=this._dimSize,on=0;on<tn;on++){for(var fn=ar[on],dn=fn[0]==null?1/0:fn[0],Cn=fn[1]==null?-1/0:fn[1],Rn=d-c,ax=Ct[on],ox=0;ox<Rn;ox++){var sx=en[ox*tn+on];ax[c+ox]=sx,sx<dn&&(dn=sx),sx>Cn&&(Cn=sx)}fn[0]=dn,fn[1]=Cn}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var d=this._data;each$f(c,function(Ct,ar){for(var en=d[ar]||(d[ar]=[]),tn=0;tn<(Ct||[]).length;tn++)en.push(Ct[tn])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:u},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},n);function u(c){for(var d=0;d<c.length;d++)this._data.push(c[d])}})(),t})(),getItemSimply=function(t,n,a,s){return t[s]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a,s){return t[s+n]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a,s,l){s+=n;for(var u=l||[],c=t,d=0;d<c.length;d++){var Ct=c[d];u[d]=Ct?Ct[s]:null}return u},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a,s,l){for(var u=l||[],c=0;c<a.length;c++){var d=a[c].name,Ct=t[d];u[c]=Ct?Ct[s]:null}return u},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(t,n){var a=rawSourceItemGetterMap[getMethodMapKey(t,n)];return a}var countSimply=function(t,n,a){return t.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a){return Math.max(0,t.length-n)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a){var s=t[0];return s?Math.max(0,s.length-n):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a){var s=a[0].name,l=t[s];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(t,n){var a=rawSourceDataCounterMap[getMethodMapKey(t,n)];return a}var getRawValueSimply=function(t,n,a){return t[n]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(t,n,a){return t[a]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(t,n,a){var s=getDataItemValue(t);return s instanceof Array?s[n]:s},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(t){var n=rawSourceValueGetterMap[t];return n}function getMethodMapKey(t,n){return t===SOURCE_FORMAT_ARRAY_ROWS?t+"_"+n:t}function retrieveRawValue(t,n,a){if(t){var s=t.getRawDataItem(n);if(s!=null){var l=t.getStore(),u=l.getSource().sourceFormat;if(a!=null){var c=t.getDimensionIndex(a),d=l.getDimensionProperty(c);return getRawSourceValueGetter(u)(s,c,d)}else{var Ct=s;return u===SOURCE_FORMAT_ORIGINAL&&(Ct=getDataItemValue(s)),Ct}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=(function(){function t(){}return t.prototype.getDataParams=function(n,a){var s=this.getData(a),l=this.getRawValue(n,a),u=s.getRawIndex(n),c=s.getName(n),d=s.getRawDataItem(n),Ct=s.getItemVisual(n,"style"),ar=Ct&&Ct[s.getItemVisual(n,"drawType")||"fill"],en=Ct&&Ct.stroke,tn=this.mainType,on=tn==="series",fn=s.userOutput&&s.userOutput.get();return{componentType:tn,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:on?this.subType:null,seriesIndex:this.seriesIndex,seriesId:on?this.id:null,seriesName:on?this.name:null,name:c,dataIndex:u,data:d,dataType:a,value:l,color:ar,borderColor:en,dimensionNames:fn?fn.fullDimensions:null,encode:fn?fn.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(n,a,s,l,u,c){a=a||"normal";var d=this.getData(s),Ct=this.getDataParams(n,s);if(c&&(Ct.value=c.interpolatedValue),l!=null&&isArray$1(Ct.value)&&(Ct.value=Ct.value[l]),!u){var ar=d.getItemModel(n);u=ar.get(a==="normal"?["label","formatter"]:[a,"label","formatter"])}if(isFunction$1(u))return Ct.status=a,Ct.dimensionIndex=l,u(Ct);if(isString$1(u)){var en=formatTpl(u,Ct);return en.replace(DIMENSION_LABEL_REG,function(tn,on){var fn=on.length,dn=on;dn.charAt(0)==="["&&dn.charAt(fn-1)==="]"&&(dn=+dn.slice(1,fn-1));var Cn=retrieveRawValue(d,n,dn);if(c&&isArray$1(c.interpolatedValue)){var Rn=d.getDimensionIndex(dn);Rn>=0&&(Cn=c.interpolatedValue[Rn])}return Cn!=null?Cn+"":""})}},t.prototype.getRawValue=function(n,a){return retrieveRawValue(this.getData(a),n)},t.prototype.formatTooltip=function(n,a,s){},t})();function normalizeTooltipFormatResult(t){var n,a;return isObject$3(t)?t.type&&(a=t):n=t,{text:n,frag:a}}function createTask(t){return new Task(t)}var Task=(function(){function t(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return t.prototype.perform=function(n){var a=this._upstream,s=n&&n.skip;if(this._dirty&&a){var l=this.context;l.data=l.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!s&&(u=this._plan(this.context));var c=en(this._modBy),d=this._modDataCount||0,Ct=en(n&&n.modBy),ar=n&&n.modDataCount||0;(c!==Ct||d!==ar)&&(u="reset");function en(ox){return!(ox>=1)&&(ox=1),ox}var tn;(this._dirty||u==="reset")&&(this._dirty=!1,tn=this._doReset(s)),this._modBy=Ct,this._modDataCount=ar;var on=n&&n.step;if(a?this._dueEnd=a._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var fn=this._dueIndex,dn=Math.min(on!=null?this._dueIndex+on:1/0,this._dueEnd);if(!s&&(tn||fn<dn)){var Cn=this._progress;if(isArray$1(Cn))for(var Rn=0;Rn<Cn.length;Rn++)this._doProgress(Cn[Rn],fn,dn,Ct,ar);else this._doProgress(Cn,fn,dn,Ct,ar)}this._dueIndex=dn;var ax=this._settedOutputEnd!=null?this._settedOutputEnd:dn;this._outputDueEnd=ax}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(n,a,s,l,u){iterator.reset(a,s,l,u),this._callingProgress=n,this._callingProgress({start:a,end:s,count:s-a,next:iterator.next},this.context)},t.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var a,s;!n&&this._reset&&(a=this._reset(this.context),a&&a.progress&&(s=a.forceFirstProgress,a=a.progress),isArray$1(a)&&!a.length&&(a=null)),this._progress=a,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),s},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},t})(),iterator=(function(){var t,n,a,s,l,u={reset:function(Ct,ar,en,tn){n=Ct,t=ar,a=en,s=tn,l=Math.ceil(s/a),u.next=a>1&&s>0?d:c}};return u;function c(){return n<t?n++:null}function d(){var Ct=n%l*a+Math.ceil(n/l),ar=n>=t?null:Ct<s?Ct:n;return n++,ar}})();function parseDataValue(t,n){var a=n&&n.type;return a==="ordinal"?t:(a==="time"&&!isNumber(t)&&t!=null&&t!=="-"&&(t=+parseDate(t)),t==null||t===""?NaN:Number(t))}var valueParserMap=createHashMap({number:function(t){return parseFloat(t)},time:function(t){return+parseDate(t)},trim:function(t){return isString$1(t)?trim$1(t):t}});function getRawValueParser(t){return valueParserMap.get(t)}var ORDER_COMPARISON_OP_MAP={lt:function(t,n){return t<n},lte:function(t,n){return t<=n},gt:function(t,n){return t>n},gte:function(t,n){return t>=n}},FilterOrderComparator=(function(){function t(n,a){if(!isNumber(a)){var s="";throwError(s)}this._opFn=ORDER_COMPARISON_OP_MAP[n],this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){return isNumber(n)?this._opFn(n,this._rvalFloat):this._opFn(numericToNumber(n),this._rvalFloat)},t})(),SortOrderComparator=(function(){function t(n,a){var s=n==="desc";this._resultLT=s?1:-1,a==null&&(a=s?"min":"max"),this._incomparable=a==="min"?-1/0:1/0}return t.prototype.evaluate=function(n,a){var s=isNumber(n)?n:numericToNumber(n),l=isNumber(a)?a:numericToNumber(a),u=isNaN(s),c=isNaN(l);if(u&&(s=this._incomparable),c&&(l=this._incomparable),u&&c){var d=isString$1(n),Ct=isString$1(a);d&&(s=Ct?n:0),Ct&&(l=d?a:0)}return s<l?this._resultLT:s>l?-this._resultLT:0},t})(),FilterEqualityComparator=(function(){function t(n,a){this._rval=a,this._isEQ=n,this._rvalTypeof=typeof a,this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){var a=n===this._rval;if(!a){var s=typeof n;s!==this._rvalTypeof&&(s==="number"||this._rvalTypeof==="number")&&(a=numericToNumber(n)===this._rvalFloat)}return this._isEQ?a:!a},t})();function createFilterComparator(t,n){return t==="eq"||t==="ne"?new FilterEqualityComparator(t==="eq",n):hasOwn(ORDER_COMPARISON_OP_MAP,t)?new FilterOrderComparator(t,n):null}var ExternalSource=(function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(n){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(n){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(n,a){},t.prototype.retrieveValueFromItem=function(n,a){},t.prototype.convertValue=function(n,a){return parseDataValue(n,a)},t})();function createExternalSource(t,n){var a=new ExternalSource,s=t.data,l=a.sourceFormat=t.sourceFormat,u=t.startIndex,c="";t.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(c);var d=[],Ct={},ar=t.dimensionsDefine;if(ar)each$f(ar,function(Cn,Rn){var ax=Cn.name,ox={index:Rn,name:ax,displayName:Cn.displayName};if(d.push(ox),ax!=null){var sx="";hasOwn(Ct,ax)&&throwError(sx),Ct[ax]=ox}});else for(var en=0;en<t.dimensionsDetectedCount;en++)d.push({index:en});var tn=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(a.getRawDataItem=function(Cn){return tn(s,u,d,Cn)},a.getRawData=bind$1(getRawData,null,t)),a.cloneRawData=bind$1(cloneRawData,null,t);var on=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);a.count=bind$1(on,null,s,u,d);var fn=getRawSourceValueGetter(l);a.retrieveValue=function(Cn,Rn){var ax=tn(s,u,d,Cn);return dn(ax,Rn)};var dn=a.retrieveValueFromItem=function(Cn,Rn){if(Cn!=null){var ax=d[Rn];if(ax)return fn(Cn,Rn,ax.name)}};return a.getDimensionInfo=bind$1(getDimensionInfo,null,d,Ct),a.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,d),a}function getRawData(t){var n=t.sourceFormat;if(!isSupportedSourceFormat(n)){var a="";throwError(a)}return t.data}function cloneRawData(t){var n=t.sourceFormat,a=t.data;if(!isSupportedSourceFormat(n)){var s="";throwError(s)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],u=0,c=a.length;u<c;u++)l.push(a[u].slice());return l}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],u=0,c=a.length;u<c;u++)l.push(extend({},a[u]));return l}}function getDimensionInfo(t,n,a){if(a!=null){if(isNumber(a)||!isNaN(a)&&!hasOwn(n,a))return t[a];if(hasOwn(n,a))return n[a]}}function cloneAllDimensionInfo(t){return clone$4(t)}var externalTransformMap=createHashMap();function registerExternalTransform(t){t=clone$4(t);var n=t.type,a="";n||throwError(a);var s=n.split(":");s.length!==2&&throwError(a);var l=!1;s[0]==="echarts"&&(n=s[1],l=!0),t.__isBuiltIn=l,externalTransformMap.set(n,t)}function applyDataTransform(t,n,a){var s=normalizeToArray(t),l=s.length,u="";l||throwError(u);for(var c=0,d=l;c<d;c++){var Ct=s[c];n=applySingleDataTransform(Ct,n),c!==d-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(t,n,a,s){var l="";n.length||throwError(l),isObject$3(t)||throwError(l);var u=t.type,c=externalTransformMap.get(u);c||throwError(l);var d=map$1(n,function(ar){return createExternalSource(ar,c)}),Ct=normalizeToArray(c.transform({upstream:d[0],upstreamList:d,config:clone$4(t.config)}));return map$1(Ct,function(ar,en){var tn="";isObject$3(ar)||throwError(tn),ar.data||throwError(tn);var on=detectSourceFormat(ar.data);isSupportedSourceFormat(on)||throwError(tn);var fn,dn=n[0];if(dn&&en===0&&!ar.dimensions){var Cn=dn.startIndex;Cn&&(ar.data=dn.data.slice(0,Cn).concat(ar.data)),fn={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:Cn,dimensions:dn.metaRawOption.dimensions}}else fn={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:ar.dimensions};return createSource(ar.data,fn,null)})}function isSupportedSourceFormat(t){return t===SOURCE_FORMAT_ARRAY_ROWS||t===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(t){return t>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(t){var n=t.constructor;return n===Array?t.slice():new n(t)}function prepareStore(t,n,a,s,l){var u=dataCtors[a||"float"];if(l){var c=t[n],d=c&&c.length;if(d!==s){for(var Ct=new u(s),ar=0;ar<d;ar++)Ct[ar]=c[ar];t[n]=Ct}}else t[n]=new u(s)}var DataStore=(function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return t.prototype.initData=function(n,a,s){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=n.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=s||u,this._rawExtent=[],shouldRetrieveDataByName(l),this._dimensions=map$1(a,function(c){return{type:c.type,property:c.property}}),this._initDataFromProvider(0,n.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(n,a){var s=this._calcDimNameToIdx,l=this._dimensions,u=s.get(n);if(u!=null){if(l[u].type===a)return u}else u=l.length;return l[u]={type:a},s.set(n,u),this._chunks[u]=new dataCtors[a||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},t.prototype.collectOrdinalMeta=function(n,a){var s=this._chunks[n],l=this._dimensions[n],u=this._rawExtent,c=l.ordinalOffset||0,d=s.length;c===0&&(u[n]=getInitialExtent());for(var Ct=u[n],ar=c;ar<d;ar++){var en=s[ar]=a.parseAndCollect(s[ar]);isNaN(en)||(Ct[0]=Math.min(en,Ct[0]),Ct[1]=Math.max(en,Ct[1]))}l.ordinalMeta=a,l.ordinalOffset=d,l.type="ordinal"},t.prototype.getOrdinalMeta=function(n){var a=this._dimensions[n],s=a.ordinalMeta;return s},t.prototype.getDimensionProperty=function(n){var a=this._dimensions[n];return a&&a.property},t.prototype.appendData=function(n){var a=this._provider,s=this.count();a.appendData(n);var l=a.count();return a.persistent||(l+=s),s<l&&this._initDataFromProvider(s,l,!0),[s,l]},t.prototype.appendValues=function(n,a){for(var s=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,d=this.count(),Ct=d+Math.max(n.length,a||0),ar=0;ar<u;ar++){var en=l[ar];prepareStore(s,ar,en.type,Ct,!0)}for(var tn=[],on=d;on<Ct;on++)for(var fn=on-d,dn=0;dn<u;dn++){var en=l[dn],Cn=defaultDimValueGetters.arrayRows.call(this,n[fn]||tn,en.property,fn,dn);s[dn][on]=Cn;var Rn=c[dn];Cn<Rn[0]&&(Rn[0]=Cn),Cn>Rn[1]&&(Rn[1]=Cn)}return this._rawCount=this._count=Ct,{start:d,end:Ct}},t.prototype._initDataFromProvider=function(n,a,s){for(var l=this._provider,u=this._chunks,c=this._dimensions,d=c.length,Ct=this._rawExtent,ar=map$1(c,function(ox){return ox.property}),en=0;en<d;en++){var tn=c[en];Ct[en]||(Ct[en]=getInitialExtent()),prepareStore(u,en,tn.type,a,s)}if(l.fillStorage)l.fillStorage(n,a,u,Ct);else for(var on=[],fn=n;fn<a;fn++){on=l.getItem(fn,on);for(var dn=0;dn<d;dn++){var Cn=u[dn],Rn=this._dimValueGetter(on,ar[dn],fn,dn);Cn[fn]=Rn;var ax=Ct[dn];Rn<ax[0]&&(ax[0]=Rn),Rn>ax[1]&&(ax[1]=Rn)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=a,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(n,a){if(!(a>=0&&a<this._count))return NaN;var s=this._chunks[n];return s?s[this.getRawIndex(a)]:NaN},t.prototype.getValues=function(n,a){var s=[],l=[];if(a==null){a=n,n=[];for(var u=0;u<this._dimensions.length;u++)l.push(u)}else l=n;for(var u=0,c=l.length;u<c;u++)s.push(this.get(l[u],a));return s},t.prototype.getByRawIndex=function(n,a){if(!(a>=0&&a<this._rawCount))return NaN;var s=this._chunks[n];return s?s[a]:NaN},t.prototype.getSum=function(n){var a=this._chunks[n],s=0;if(a)for(var l=0,u=this.count();l<u;l++){var c=this.get(n,l);isNaN(c)||(s+=c)}return s},t.prototype.getMedian=function(n){var a=[];this.each([n],function(u){isNaN(u)||a.push(u)});var s=a.sort(function(u,c){return u-c}),l=this.count();return l===0?0:l%2===1?s[(l-1)/2]:(s[l/2]+s[l/2-1])/2},t.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var a=this._indices,s=a[n];if(s!=null&&s<this._count&&s===n)return n;for(var l=0,u=this._count-1;l<=u;){var c=(l+u)/2|0;if(a[c]<n)l=c+1;else if(a[c]>n)u=c-1;else return c}return-1},t.prototype.indicesOfNearest=function(n,a,s){var l=this._chunks,u=l[n],c=[];if(!u)return c;s==null&&(s=1/0);for(var d=1/0,Ct=-1,ar=0,en=0,tn=this.count();en<tn;en++){var on=this.getRawIndex(en),fn=a-u[on],dn=Math.abs(fn);dn<=s&&((dn<d||dn===d&&fn>=0&&Ct<0)&&(d=dn,Ct=fn,ar=0),fn===Ct&&(c[ar++]=en))}return c.length=ar,c},t.prototype.getIndices=function(){var n,a=this._indices;if(a){var s=a.constructor,l=this._count;if(s===Array){n=new s(l);for(var u=0;u<l;u++)n[u]=a[u]}else n=new s(a.buffer,0,l)}else{var s=getIndicesCtor(this._rawCount);n=new s(this.count());for(var u=0;u<n.length;u++)n[u]=u}return n},t.prototype.filter=function(n,a){if(!this._count)return this;for(var s=this.clone(),l=s.count(),u=getIndicesCtor(s._rawCount),c=new u(l),d=[],Ct=n.length,ar=0,en=n[0],tn=s._chunks,on=0;on<l;on++){var fn=void 0,dn=s.getRawIndex(on);if(Ct===0)fn=a(on);else if(Ct===1){var Cn=tn[en][dn];fn=a(Cn,on)}else{for(var Rn=0;Rn<Ct;Rn++)d[Rn]=tn[n[Rn]][dn];d[Rn]=on,fn=a.apply(null,d)}fn&&(c[ar++]=dn)}return ar<l&&(s._indices=c),s._count=ar,s._extent=[],s._updateGetRawIdx(),s},t.prototype.selectRange=function(n){var a=this.clone(),s=a._count;if(!s)return this;var l=keys(n),u=l.length;if(!u)return this;var c=a.count(),d=getIndicesCtor(a._rawCount),Ct=new d(c),ar=0,en=l[0],tn=n[en][0],on=n[en][1],fn=a._chunks,dn=!1;if(!a._indices){var Cn=0;if(u===1){for(var Rn=fn[l[0]],ax=0;ax<s;ax++){var ox=Rn[ax];(ox>=tn&&ox<=on||isNaN(ox))&&(Ct[ar++]=Cn),Cn++}dn=!0}else if(u===2){for(var Rn=fn[l[0]],sx=fn[l[1]],lx=n[l[1]][0],cx=n[l[1]][1],ax=0;ax<s;ax++){var ox=Rn[ax],fx=sx[ax];(ox>=tn&&ox<=on||isNaN(ox))&&(fx>=lx&&fx<=cx||isNaN(fx))&&(Ct[ar++]=Cn),Cn++}dn=!0}}if(!dn)if(u===1)for(var ax=0;ax<c;ax++){var gx=a.getRawIndex(ax),ox=fn[l[0]][gx];(ox>=tn&&ox<=on||isNaN(ox))&&(Ct[ar++]=gx)}else for(var ax=0;ax<c;ax++){for(var mx=!0,gx=a.getRawIndex(ax),px=0;px<u;px++){var hx=l[px],ox=fn[hx][gx];(ox<n[hx][0]||ox>n[hx][1])&&(mx=!1)}mx&&(Ct[ar++]=a.getRawIndex(ax))}return ar<c&&(a._indices=Ct),a._count=ar,a._extent=[],a._updateGetRawIdx(),a},t.prototype.map=function(n,a){var s=this.clone(n);return this._updateDims(s,n,a),s},t.prototype.modify=function(n,a){this._updateDims(this,n,a)},t.prototype._updateDims=function(n,a,s){for(var l=n._chunks,u=[],c=a.length,d=n.count(),Ct=[],ar=n._rawExtent,en=0;en<a.length;en++)ar[a[en]]=getInitialExtent();for(var tn=0;tn<d;tn++){for(var on=n.getRawIndex(tn),fn=0;fn<c;fn++)Ct[fn]=l[a[fn]][on];Ct[c]=tn;var dn=s&&s.apply(null,Ct);if(dn!=null){typeof dn!="object"&&(u[0]=dn,dn=u);for(var en=0;en<dn.length;en++){var Cn=a[en],Rn=dn[en],ax=ar[Cn],ox=l[Cn];ox&&(ox[on]=Rn),Rn<ax[0]&&(ax[0]=Rn),Rn>ax[1]&&(ax[1]=Rn)}}}},t.prototype.lttbDownSample=function(n,a){var s=this.clone([n],!0),l=s._chunks,u=l[n],c=this.count(),d=0,Ct=Math.floor(1/a),ar=this.getRawIndex(0),en,tn,on,fn=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/Ct)+2)*2,c));fn[d++]=ar;for(var dn=1;dn<c-1;dn+=Ct){for(var Cn=Math.min(dn+Ct,c-1),Rn=Math.min(dn+Ct*2,c),ax=(Rn+Cn)/2,ox=0,sx=Cn;sx<Rn;sx++){var lx=this.getRawIndex(sx),cx=u[lx];isNaN(cx)||(ox+=cx)}ox/=Rn-Cn;var fx=dn,gx=Math.min(dn+Ct,c),mx=dn-1,px=u[ar];en=-1,on=fx;for(var hx=-1,vx=0,sx=fx;sx<gx;sx++){var lx=this.getRawIndex(sx),cx=u[lx];if(isNaN(cx)){vx++,hx<0&&(hx=lx);continue}tn=Math.abs((mx-ax)*(cx-px)-(mx-sx)*(ox-px)),tn>en&&(en=tn,on=lx)}vx>0&&vx<gx-fx&&(fn[d++]=Math.min(hx,on),on=Math.max(hx,on)),fn[d++]=on,ar=on}return fn[d++]=this.getRawIndex(c-1),s._count=d,s._indices=fn,s.getRawIndex=this._getRawIdx,s},t.prototype.minmaxDownSample=function(n,a){for(var s=this.clone([n],!0),l=s._chunks,u=Math.floor(1/a),c=l[n],d=this.count(),Ct=new(getIndicesCtor(this._rawCount))(Math.ceil(d/u)*2),ar=0,en=0;en<d;en+=u){var tn=en,on=c[this.getRawIndex(tn)],fn=en,dn=c[this.getRawIndex(fn)],Cn=u;en+u>d&&(Cn=d-en);for(var Rn=0;Rn<Cn;Rn++){var ax=this.getRawIndex(en+Rn),ox=c[ax];ox<on&&(on=ox,tn=en+Rn),ox>dn&&(dn=ox,fn=en+Rn)}var sx=this.getRawIndex(tn),lx=this.getRawIndex(fn);tn<fn?(Ct[ar++]=sx,Ct[ar++]=lx):(Ct[ar++]=lx,Ct[ar++]=sx)}return s._count=ar,s._indices=Ct,s._updateGetRawIdx(),s},t.prototype.downSample=function(n,a,s,l){for(var u=this.clone([n],!0),c=u._chunks,d=[],Ct=Math.floor(1/a),ar=c[n],en=this.count(),tn=u._rawExtent[n]=getInitialExtent(),on=new(getIndicesCtor(this._rawCount))(Math.ceil(en/Ct)),fn=0,dn=0;dn<en;dn+=Ct){Ct>en-dn&&(Ct=en-dn,d.length=Ct);for(var Cn=0;Cn<Ct;Cn++){var Rn=this.getRawIndex(dn+Cn);d[Cn]=ar[Rn]}var ax=s(d),ox=this.getRawIndex(Math.min(dn+l(d,ax)||0,en-1));ar[ox]=ax,ax<tn[0]&&(tn[0]=ax),ax>tn[1]&&(tn[1]=ax),on[fn++]=ox}return u._count=fn,u._indices=on,u._updateGetRawIdx(),u},t.prototype.each=function(n,a){if(this._count)for(var s=n.length,l=this._chunks,u=0,c=this.count();u<c;u++){var d=this.getRawIndex(u);switch(s){case 0:a(u);break;case 1:a(l[n[0]][d],u);break;case 2:a(l[n[0]][d],l[n[1]][d],u);break;default:for(var Ct=0,ar=[];Ct<s;Ct++)ar[Ct]=l[n[Ct]][d];ar[Ct]=u,a.apply(null,ar)}}},t.prototype.getDataExtent=function(n){var a=this._chunks[n],s=getInitialExtent();if(!a)return s;var l=this.count(),u=!this._indices,c;if(u)return this._rawExtent[n].slice();if(c=this._extent[n],c)return c.slice();c=s;for(var d=c[0],Ct=c[1],ar=0;ar<l;ar++){var en=this.getRawIndex(ar),tn=a[en];tn<d&&(d=tn),tn>Ct&&(Ct=tn)}return c=[d,Ct],this._extent[n]=c,c},t.prototype.getRawDataItem=function(n){var a=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(a);for(var s=[],l=this._chunks,u=0;u<l.length;u++)s.push(l[u][a]);return s},t.prototype.clone=function(n,a){var s=new t,l=this._chunks,u=n&&reduce(n,function(d,Ct){return d[Ct]=!0,d},{});if(u)for(var c=0;c<l.length;c++)s._chunks[c]=u[c]?cloneChunk(l[c]):l[c];else s._chunks=l;return this._copyCommonProps(s),a||(s._indices=this._cloneIndices()),s._updateGetRawIdx(),s},t.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$4(this._extent),n._rawExtent=clone$4(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,a=void 0;if(n===Array){var s=this._indices.length;a=new n(s);for(var l=0;l<s;l++)a[l]=this._indices[l]}else a=new n(this._indices);return a}return null},t.prototype._getRawIdxIdentity=function(n){return n},t.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=(function(){function n(a,s,l,u){return parseDataValue(a[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:n,objectRows:function(a,s,l,u){return parseDataValue(a[s],this._dimensions[u])},keyedColumns:n,original:function(a,s,l,u){var c=a&&(a.value==null?a:a.value);return parseDataValue(c instanceof Array?c[u]:c,this._dimensions[u])},typedArray:function(a,s,l,u){return a[u]}}})(),t})(),SourceManager=(function(){function t(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(n,a){this._sourceList=n,this._upstreamSignList=a,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,a=this._getUpstreamSourceManagers(),s=!!a.length,l,u;if(isSeries(n)){var c=n,d=void 0,Ct=void 0,ar=void 0;if(s){var en=a[0];en.prepareSource(),ar=en.getSource(),d=ar.data,Ct=ar.sourceFormat,u=[en._getVersionSign()]}else d=c.get("data",!0),Ct=isTypedArray(d)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var tn=this._getSourceMetaRawOption()||{},on=ar&&ar.metaRawOption||{},fn=retrieve2(tn.seriesLayoutBy,on.seriesLayoutBy)||null,dn=retrieve2(tn.sourceHeader,on.sourceHeader),Cn=retrieve2(tn.dimensions,on.dimensions),Rn=fn!==on.seriesLayoutBy||!!dn!=!!on.sourceHeader||Cn;l=Rn?[createSource(d,{seriesLayoutBy:fn,sourceHeader:dn,dimensions:Cn},Ct)]:[]}else{var ax=n;if(s){var ox=this._applyTransform(a);l=ox.sourceList,u=ox.upstreamSignList}else{var sx=ax.get("source",!0);l=[createSource(sx,this._getSourceMetaRawOption(),null)],u=[]}}this._setLocalSource(l,u)},t.prototype._applyTransform=function(n){var a=this._sourceHost,s=a.get("transform",!0),l=a.get("fromTransformResult",!0);if(l!=null){var u="";n.length!==1&&doThrow(u)}var c,d=[],Ct=[];return each$f(n,function(ar){ar.prepareSource();var en=ar.getSource(l||0),tn="";l!=null&&!en&&doThrow(tn),d.push(en),Ct.push(ar._getVersionSign())}),s?c=applyDataTransform(s,d,{datasetIndex:a.componentIndex}):l!=null&&(c=[cloneSourceShallow(d[0])]),{sourceList:c,upstreamSignList:Ct}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),a=0;a<n.length;a++){var s=n[a];if(s._isDirty()||this._upstreamSignList[a]!==s._getVersionSign())return!0}},t.prototype.getSource=function(n){n=n||0;var a=this._sourceList[n];if(!a){var s=this._getUpstreamSourceManagers();return s[0]&&s[0].getSource(n)}return a},t.prototype.getSharedDataStore=function(n){var a=n.makeStoreSchema();return this._innerGetDataStore(a.dimensions,n.source,a.hash)},t.prototype._innerGetDataStore=function(n,a,s){var l=0,u=this._storeList,c=u[l];c||(c=u[l]={});var d=c[s];if(!d){var Ct=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&Ct?d=Ct._innerGetDataStore(n,a,s):(d=new DataStore,d.initData(new DefaultDataProvider(a,n.length),n)),c[s]=d}return d},t.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var a=querySeriesUpstreamDatasetModel(n);return a?[a.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(s){return s.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,a,s,l;if(isSeries(n))a=n.get("seriesLayoutBy",!0),s=n.get("sourceHeader",!0),l=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=n;a=u.get("seriesLayoutBy",!0),s=u.get("sourceHeader",!0),l=u.get("dimensions",!0)}return{seriesLayoutBy:a,sourceHeader:s,dimensions:l}},t})();function disableTransformOptionMerge(t){var n=t.option.transform;n&&setAsPrimitive(t.option.transform)}function isSeries(t){return t.mainType==="series"}function doThrow(t){throw new Error(t)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(t){var n=t.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(t,n){var a=t.color||"#6e7079",s=t.fontSize||12,l=t.fontWeight||"400",u=t.color||"#464646",c=t.fontSize||14,d=t.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(s+"")+"px;color:"+encodeHTML(a)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(d+"")}:{nameStyle:{fontSize:s,fill:a,fontWeight:l},valueStyle:{fontSize:c,fill:u,fontWeight:d}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(t,n){return n.type=t,n}function isSectionFragment(t){return t.type==="section"}function getBuilder(t){return isSectionFragment(t)?buildSection:buildNameValue}function getBlockGapLevel(t){if(isSectionFragment(t)){var n=0,a=t.blocks.length,s=a>1||a>0&&!t.noHeader;return each$f(t.blocks,function(l){var u=getBlockGapLevel(l);u>=n&&(n=u+ +(s&&(!u||isSectionFragment(l)&&!l.noHeader)))}),n}return 0}function buildSection(t,n,a,s){var l=n.noHeader,u=getGap(getBlockGapLevel(n)),c=[],d=n.blocks||[];assert(!d||isArray$1(d)),d=d||[];var Ct=t.orderMode;if(n.sortBlocks&&Ct){d=d.slice();var ar={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(ar,Ct)){var en=new SortOrderComparator(ar[Ct],null);d.sort(function(Cn,Rn){return en.evaluate(Cn.sortParam,Rn.sortParam)})}else Ct==="seriesDesc"&&d.reverse()}each$f(d,function(Cn,Rn){var ax=n.valueFormatter,ox=getBuilder(Cn)(ax?extend(extend({},t),{valueFormatter:ax}):t,Cn,Rn>0?u.html:0,s);ox!=null&&c.push(ox)});var tn=t.renderMode==="richText"?c.join(u.richText):wrapBlockHTML(s,c.join(""),l?a:u.html);if(l)return tn;var on=makeValueReadable(n.header,"ordinal",t.useUTC),fn=getTooltipTextStyle(s,t.renderMode).nameStyle,dn=getTooltipLineHeight(s);return t.renderMode==="richText"?wrapInlineNameRichText(t,on,fn)+u.richText+tn:wrapBlockHTML(s,'<div style="'+fn+";"+dn+';">'+encodeHTML(on)+"</div>"+tn,a)}function buildNameValue(t,n,a,s){var l=t.renderMode,u=n.noName,c=n.noValue,d=!n.markerType,Ct=n.name,ar=t.useUTC,en=n.valueFormatter||t.valueFormatter||function(lx){return lx=isArray$1(lx)?lx:[lx],map$1(lx,function(cx,fx){return makeValueReadable(cx,isArray$1(fn)?fn[fx]:fn,ar)})};if(!(u&&c)){var tn=d?"":t.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",l),on=u?"":makeValueReadable(Ct,"ordinal",ar),fn=n.valueType,dn=c?[]:en(n.value,n.dataIndex),Cn=!d||!u,Rn=!d&&u,ax=getTooltipTextStyle(s,l),ox=ax.nameStyle,sx=ax.valueStyle;return l==="richText"?(d?"":tn)+(u?"":wrapInlineNameRichText(t,on,ox))+(c?"":wrapInlineValueRichText(t,dn,Cn,Rn,sx)):wrapBlockHTML(s,(d?"":tn)+(u?"":wrapInlineNameHTML(on,!d,ox))+(c?"":wrapInlineValueHTML(dn,Cn,Rn,sx)),a)}}function buildTooltipMarkup(t,n,a,s,l,u){if(t){var c=getBuilder(t),d={useUTC:l,renderMode:a,orderMode:s,markupStyleCreator:n,valueFormatter:t.valueFormatter};return c(d,t,0,u)}}function getGap(t){return{html:HTML_GAPS[t],richText:RICH_TEXT_GAPS[t]}}function wrapBlockHTML(t,n,a){var s='<div style="clear:both"></div>',l="margin: "+a+"px 0 0",u=getTooltipLineHeight(t);return'<div style="'+l+";"+u+';">'+n+s+"</div>"}function wrapInlineNameHTML(t,n,a){var s=n?"margin-left:2px":"";return'<span style="'+a+";"+s+'">'+encodeHTML(t)+"</span>"}function wrapInlineValueHTML(t,n,a,s){var l=a?"10px":"20px",u=n?"float:right;margin-left:"+l:"";return t=isArray$1(t)?t:[t],'<span style="'+u+";"+s+'">'+map$1(t,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(t,n,a){return t.markupStyleCreator.wrapRichTextStyle(n,a)}function wrapInlineValueRichText(t,n,a,s,l){var u=[l],c=s?10:20;return a&&u.push({padding:[0,0,0,c],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,u)}function retrieveVisualColorForTooltipMarker(t,n){var a=t.getData().getItemVisual(n,"style"),s=a[t.visualDrawType];return convertToColorString(s)}function getPaddingFromTooltipModel(t,n){var a=t.get("padding");return a??(n==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=(function(){function t(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(n,a,s){var l=s==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:a,type:n,renderMode:s,markerId:l});return isString$1(u)?u:(this.richTextStyles[l]=u.style,u.content)},t.prototype.wrapRichTextStyle=function(n,a){var s={};isArray$1(a)?each$f(a,function(u){return extend(s,u)}):extend(s,a);var l=this._generateStyleName();return this.richTextStyles[l]=s,"{"+l+"|"+n+"}"},t})();function defaultSeriesFormatTooltip(t){var n=t.series,a=t.dataIndex,s=t.multipleSeries,l=n.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,d=n.getRawValue(a),Ct=isArray$1(d),ar=retrieveVisualColorForTooltipMarker(n,a),en,tn,on,fn;if(c>1||Ct&&!c){var dn=formatTooltipArrayValue(d,n,a,u,ar);en=dn.inlineValues,tn=dn.inlineValueTypes,on=dn.blocks,fn=dn.inlineValues[0]}else if(c){var Cn=l.getDimensionInfo(u[0]);fn=en=retrieveRawValue(l,a,u[0]),tn=Cn.type}else fn=en=Ct?d[0]:d;var Rn=isNameSpecified(n),ax=Rn&&n.name||"",ox=l.getName(a),sx=s?ax:ox;return createTooltipMarkup("section",{header:ax,noHeader:s||!Rn,sortParam:fn,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:ar,name:sx,noName:!trim$1(sx),value:en,valueType:tn,dataIndex:a})].concat(on||[])})}function formatTooltipArrayValue(t,n,a,s,l){var u=n.getData(),c=reduce(t,function(tn,on,fn){var dn=u.getDimensionInfo(fn);return tn=tn||dn&&dn.tooltip!==!1&&dn.displayName!=null},!1),d=[],Ct=[],ar=[];s.length?each$f(s,function(tn){en(retrieveRawValue(u,a,tn),tn)}):each$f(t,en);function en(tn,on){var fn=u.getDimensionInfo(on);!fn||fn.otherDims.tooltip===!1||(c?ar.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:fn.displayName,value:tn,valueType:fn.type})):(d.push(tn),Ct.push(fn.type)))}return{inlineValues:d,inlineValueTypes:Ct,blocks:ar}}var inner$k=makeInner();function getSelectionKey(t,n){return t.getName(n)||t.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._selectedDataIndicesMap={},a}return n.prototype.init=function(a,s,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(a,l);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var c=this.getInitialData(a,l);wrapData(c,this),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.mergeDefaultAndTheme=function(a,s){var l=fetchLayoutMode(this),u=l?getLayoutParams(a):{},c=this.subType;ComponentModel.hasClass(c)&&(c+="Series"),merge(a,s.getTheme().get(this.subType)),merge(a,this.getDefaultOption()),defaultEmphasis(a,"label",["show"]),this.fillDataTextStyle(a.data),l&&mergeLayoutParam(a,u,l)},n.prototype.mergeOption=function(a,s){a=merge(this.option,a,!0),this.fillDataTextStyle(a.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,a,l);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var c=this.getInitialData(a,s);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.fillDataTextStyle=function(a){if(a&&!isTypedArray(a))for(var s=["show"],l=0;l<a.length;l++)a[l]&&a[l].label&&defaultEmphasis(a[l],"label",s)},n.prototype.getInitialData=function(a,s){},n.prototype.appendData=function(a){var s=this.getRawData();s.appendData(a.data)},n.prototype.getData=function(a){var s=getCurrentTask(this);if(s){var l=s.context.data;return a==null||!l.getLinkedData?l:l.getLinkedData(a)}else return inner$k(this).data},n.prototype.getAllData=function(){var a=this.getData();return a&&a.getLinkedDataAll?a.getLinkedDataAll():[{data:a}]},n.prototype.setData=function(a){var s=getCurrentTask(this);if(s){var l=s.context;l.outputData=a,s!==this.dataTask&&(l.data=a)}inner$k(this).data=a},n.prototype.getEncode=function(){var a=this.get("encode",!0);if(a)return createHashMap(a)},n.prototype.getSourceManager=function(){return inner$k(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var a=this.get("colorBy");return a||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},n.prototype.formatTooltip=function(a,s,l){return defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s})},n.prototype.isAnimationEnabled=function(){var a=this.ecModel;if(env.node&&!(a&&a.ssr))return!1;var s=this.getShallow("animation");return s&&this.getData().count()>this.getShallow("animationThreshold")&&(s=!1),!!s},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(a,s,l){var u=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,a,s,l);return c||(c=u.getColorFromPalette(a,s,l)),c},n.prototype.coordDimToDataDim=function(a){return this.getRawData().mapDimensionsAll(a)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(a,s){this._innerSelect(this.getData(s),a)},n.prototype.unselect=function(a,s){var l=this.option.selectedMap;if(l){var u=this.option.selectedMode,c=this.getData(s);if(u==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var d=0;d<a.length;d++){var Ct=a[d],ar=getSelectionKey(c,Ct);l[ar]=!1,this._selectedDataIndicesMap[ar]=-1}}},n.prototype.toggleSelect=function(a,s){for(var l=[],u=0;u<a.length;u++)l[0]=a[u],this.isSelected(a[u],s)?this.unselect(l,s):this.select(l,s)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var a=this._selectedDataIndicesMap,s=keys(a),l=[],u=0;u<s.length;u++){var c=a[s[u]];c>=0&&l.push(c)}return l},n.prototype.isSelected=function(a,s){var l=this.option.selectedMap;if(!l)return!1;var u=this.getData(s);return(l==="all"||l[getSelectionKey(u,a)])&&!u.getItemModel(a).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var a=this.option.universalTransition;return a?a===!0?!0:a&&a.enabled:!1},n.prototype._innerSelect=function(a,s){var l,u,c=this.option,d=c.selectedMode,Ct=s.length;if(!(!d||!Ct)){if(d==="series")c.selectedMap="all";else if(d==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var ar=c.selectedMap,en=0;en<Ct;en++){var tn=s[en],on=getSelectionKey(a,tn);ar[on]=!0,this._selectedDataIndicesMap[on]=a.getRawIndex(tn)}}else if(d==="single"||d===!0){var fn=s[Ct-1],on=getSelectionKey(a,fn);c.selectedMap=(l={},l[on]=!0,l),this._selectedDataIndicesMap=(u={},u[on]=a.getRawIndex(fn),u)}}},n.prototype._initSelectedMapFromData=function(a){if(!this.option.selectedMap){var s=[];a.hasItemOption&&a.each(function(l){var u=a.getRawDataItem(l);u&&u.selected&&s.push(l)}),s.length>0&&this._innerSelect(a,s)}},n.registerClass=function(a){return ComponentModel.registerClass(a)},n.protoInitialize=(function(){var a=n.prototype;a.type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",a.visualDrawType="fill"})(),n})(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(t){var n=t.name;isNameSpecified(t)||(t.name=getSeriesAutoName(t)||n)}function getSeriesAutoName(t){var n=t.getRawData(),a=n.mapDimensionsAll("seriesName"),s=[];return each$f(a,function(l){var u=n.getDimensionInfo(l);u.displayName&&s.push(u.displayName)}),s.join(" ")}function dataTaskCount(t){return t.model.getRawData().count()}function dataTaskReset(t){var n=t.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(t,n){n.outputData&&t.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(t,n){each$f(concatArray(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(a){t.wrapMethod(a,curry$1(onDataChange,n))})}function onDataChange(t,n){var a=getCurrentTask(t);return a&&a.setOutputEnd((n||this).count()),n}function getCurrentTask(t){var n=(t.ecModel||{}).scheduler,a=n&&n.getPipeline(t.uid);if(a){var s=a.currentTask;if(s){var l=s.agentStubMap;l&&(s=l.get(t.uid))}return s}}var ComponentView=(function(){function t(){this.group=new Group$3,this.uid=getUID("viewComponent")}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,s,l){},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,s,l){},t.prototype.updateLayout=function(n,a,s,l){},t.prototype.updateVisual=function(n,a,s,l){},t.prototype.toggleBlurSeries=function(n,a,s){},t.prototype.eachRendered=function(n){var a=this.group;a&&a.traverse(n)},t})();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var t=makeInner();return function(n){var a=t(n),s=n.pipelineContext,l=!!a.large,u=!!a.progressiveRender,c=a.large=!!(s&&s.large),d=a.progressiveRender=!!(s&&s.progressiveRender);return(l!==c||u!==d)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=(function(){function t(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,s,l){},t.prototype.highlight=function(n,a,s,l){var u=n.getData(l&&l.dataType);u&&toggleHighlight(u,l,"emphasis")},t.prototype.downplay=function(n,a,s,l){var u=n.getData(l&&l.dataType);u&&toggleHighlight(u,l,"normal")},t.prototype.remove=function(n,a){this.group.removeAll()},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.updateLayout=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.updateVisual=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.eachRendered=function(n){traverseElements(this.group,n)},t.markUpdateMethod=function(n,a){inner$j(n).updateMethod=a},t.protoInitialize=(function(){var n=t.prototype;n.type="chart"})(),t})();function elSetState(t,n,a){t&&isHighDownDispatcher(t)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(t,a)}function toggleHighlight(t,n,a){var s=queryDataIndex(t,n),l=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;s!=null?each$f(normalizeToArray(s),function(u){elSetState(t.getItemGraphicEl(u),a,l)}):t.eachItemGraphicEl(function(u){elSetState(u,a,l)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(t){return renderPlanner(t.model)}function renderTaskReset(t){var n=t.model,a=t.ecModel,s=t.api,l=t.payload,u=n.pipelineContext.progressiveRender,c=t.view,d=l&&inner$j(l).updateMethod,Ct=u?"incrementalPrepareRender":d&&c[d]?d:"render";return Ct!=="render"&&c[Ct](n,a,s,l),progressMethodMap[Ct]}var progressMethodMap={incrementalPrepareRender:{progress:function(t,n){n.view.incrementalRender(t,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(t,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(t,n,a){var s,l=0,u=0,c=null,d,Ct,ar,en;n=n||0;function tn(){u=new Date().getTime(),c=null,t.apply(Ct,ar||[])}var on=function(){for(var fn=[],dn=0;dn<arguments.length;dn++)fn[dn]=arguments[dn];s=new Date().getTime(),Ct=this,ar=fn;var Cn=en||n,Rn=en||a;en=null,d=s-(Rn?l:u)-Cn,clearTimeout(c),Rn?c=setTimeout(tn,Cn):d>=0?tn():c=setTimeout(tn,-d),l=s};return on.clear=function(){c&&(clearTimeout(c),c=null)},on.debounceNextCall=function(fn){en=fn},on}function createOrUpdate(t,n,a,s){var l=t[n];if(l){var u=l[ORIGIN_METHOD]||l,c=l[THROTTLE_TYPE],d=l[RATE];if(d!==a||c!==s){if(a==null||!s)return t[n]=u;l=t[n]=throttle(u,a,s==="debounce"),l[ORIGIN_METHOD]=u,l[THROTTLE_TYPE]=s,l[RATE]=a}return l}}function clear$1(t,n){var a=t[n];a&&a[ORIGIN_METHOD]&&(a.clear&&a.clear(),t[n]=a[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(t,n){var a=t.visualStyleMapper||defaultStyleMappers[n];return a||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(t,n){var a=t.visualDrawType||defaultColorKey[n];return a||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData(),s=t.visualStyleAccessPath||"itemStyle",l=t.getModel(s),u=getStyleMapper(t,s),c=u(l),d=l.getShallow("decal");d&&(a.setVisual("decal",d),d.dirty=!0);var Ct=getDefaultColorKey(t,s),ar=c[Ct],en=isFunction$1(ar)?ar:null,tn=c.fill==="auto"||c.stroke==="auto";if(!c[Ct]||en||tn){var on=t.getColorFromPalette(t.name,null,n.getSeriesCount());c[Ct]||(c[Ct]=on,a.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction$1(c.fill)?on:c.fill,c.stroke=c.stroke==="auto"||isFunction$1(c.stroke)?on:c.stroke}if(a.setVisual("style",c),a.setVisual("drawType",Ct),!n.isSeriesFiltered(t)&&en)return a.setVisual("colorFromPalette",!1),{dataEach:function(fn,dn){var Cn=t.getDataParams(dn),Rn=extend({},c);Rn[Ct]=en(Cn),fn.setItemVisual(dn,"style",Rn)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!(t.ignoreStyleOnData||n.isSeriesFiltered(t))){var a=t.getData(),s=t.visualStyleAccessPath||"itemStyle",l=getStyleMapper(t,s),u=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(c,d){var Ct=c.getRawDataItem(d);if(Ct&&Ct[s]){sharedModel.option=Ct[s];var ar=l(sharedModel),en=c.ensureUniqueItemVisual(d,"style");extend(en,ar),sharedModel.option.decal&&(c.setItemVisual(d,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in ar&&c.setItemVisual(d,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(t){var n=createHashMap();t.eachSeries(function(a){var s=a.getColorBy();if(!a.isColorBySeries()){var l=a.type+"-"+s,u=n.get(l);u||(u={},n.set(l,u)),inner$i(a).scope=u}}),t.eachSeries(function(a){if(!(a.isColorBySeries()||t.isSeriesFiltered(a))){var s=a.getRawData(),l={},u=a.getData(),c=inner$i(a).scope,d=a.visualStyleAccessPath||"itemStyle",Ct=getDefaultColorKey(a,d);u.each(function(ar){var en=u.getRawIndex(ar);l[en]=ar}),s.each(function(ar){var en=l[ar],tn=u.getItemVisual(en,"colorFromPalette");if(tn){var on=u.ensureUniqueItemVisual(en,"style"),fn=s.getName(ar)||ar+"",dn=s.count();on[Ct]=a.getColorFromPalette(fn,c,dn)}})}})}},PI$5=Math.PI;function defaultLoading(t,n){n=n||{},defaults(n,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var a=new Group$3,s=new Rect$2({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});a.add(s);var l=new ZRText({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),u=new Rect$2({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});a.add(u);var c;return n.showSpinner&&(c=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),a.add(c)),a.resize=function(){var d=l.getBoundingRect().width,Ct=n.showSpinner?n.spinnerRadius:0,ar=(t.getWidth()-Ct*2-(n.showSpinner&&d?10:0)-d)/2-(n.showSpinner&&d?0:5+d/2)+(n.showSpinner?0:d/2)+(d?0:Ct),en=t.getHeight()/2;n.showSpinner&&c.setShape({cx:ar,cy:en}),u.setShape({x:ar-Ct,y:en-Ct,width:Ct*2,height:Ct*2}),s.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}var Scheduler=(function(){function t(n,a,s,l){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=a,s=this._dataProcessorHandlers=s.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=s.concat(l)}return t.prototype.restoreData=function(n,a){n.restoreData(a),this._stageTaskMap.each(function(s){var l=s.overallTask;l&&l.dirty()})},t.prototype.getPerformArgs=function(n,a){if(n.__pipeline){var s=this._pipelineMap.get(n.__pipeline.id),l=s.context,u=!a&&s.progressiveEnabled&&(!l||l.progressiveRender)&&n.__idxInPipeline>s.blockIndex,c=u?s.step:null,d=l&&l.modDataCount,Ct=d!=null?Math.ceil(d/c):null;return{step:c,modBy:Ct,modDataCount:d}}},t.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},t.prototype.updateStreamModes=function(n,a){var s=this._pipelineMap.get(n.uid),l=n.getData(),u=l.count(),c=s.progressiveEnabled&&a.incrementalPrepareRender&&u>=s.threshold,d=n.get("large")&&u>=n.get("largeThreshold"),Ct=n.get("progressiveChunkMode")==="mod"?u:null;n.pipelineContext=s.context={progressiveRender:c,modDataCount:Ct,large:d}},t.prototype.restorePipelines=function(n){var a=this,s=a._pipelineMap=createHashMap();n.eachSeries(function(l){var u=l.getProgressive(),c=l.uid;s.set(c,{id:c,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:u&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),a._pipe(l,l.dataTask)})},t.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,a=this.api.getModel(),s=this.api;each$f(this._allHandlers,function(l){var u=n.get(l.uid)||n.set(l.uid,{}),c="";assert(!(l.reset&&l.overallReset),c),l.reset&&this._createSeriesStageTask(l,u,a,s),l.overallReset&&this._createOverallStageTask(l,u,a,s)},this)},t.prototype.prepareView=function(n,a,s,l){var u=n.renderTask,c=u.context;c.model=a,c.ecModel=s,c.api=l,u.__block=!n.incrementalPrepareRender,this._pipe(a,u)},t.prototype.performDataProcessorTasks=function(n,a){this._performStageTasks(this._dataProcessorHandlers,n,a,{block:!0})},t.prototype.performVisualTasks=function(n,a,s){this._performStageTasks(this._visualHandlers,n,a,s)},t.prototype._performStageTasks=function(n,a,s,l){l=l||{};var u=!1,c=this;each$f(n,function(Ct,ar){if(!(l.visualType&&l.visualType!==Ct.visualType)){var en=c._stageTaskMap.get(Ct.uid),tn=en.seriesTaskMap,on=en.overallTask;if(on){var fn,dn=on.agentStubMap;dn.each(function(Rn){d(l,Rn)&&(Rn.dirty(),fn=!0)}),fn&&on.dirty(),c.updatePayload(on,s);var Cn=c.getPerformArgs(on,l.block);dn.each(function(Rn){Rn.perform(Cn)}),on.perform(Cn)&&(u=!0)}else tn&&tn.each(function(Rn,ax){d(l,Rn)&&Rn.dirty();var ox=c.getPerformArgs(Rn,l.block);ox.skip=!Ct.performRawSeries&&a.isSeriesFiltered(Rn.context.model),c.updatePayload(Rn,s),Rn.perform(ox)&&(u=!0)})}});function d(Ct,ar){return Ct.setDirty&&(!Ct.dirtyMap||Ct.dirtyMap.get(ar.__pipeline.id))}this.unfinished=u||this.unfinished},t.prototype.performSeriesTasks=function(n){var a;n.eachSeries(function(s){a=s.dataTask.perform()||a}),this.unfinished=a||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(n){var a=n.tail;do{if(a.__block){n.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},t.prototype.updatePayload=function(n,a){a!=="remain"&&(n.context.payload=a)},t.prototype._createSeriesStageTask=function(n,a,s,l){var u=this,c=a.seriesTaskMap,d=a.seriesTaskMap=createHashMap(),Ct=n.seriesType,ar=n.getTargetSeries;n.createOnAllSeries?s.eachRawSeries(en):Ct?s.eachRawSeriesByType(Ct,en):ar&&ar(s,l).each(en);function en(tn){var on=tn.uid,fn=d.set(on,c&&c.get(on)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));fn.context={model:tn,ecModel:s,api:l,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:u},u._pipe(tn,fn)}},t.prototype._createOverallStageTask=function(n,a,s,l){var u=this,c=a.overallTask=a.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:s,api:l,overallReset:n.overallReset,scheduler:u};var d=c.agentStubMap,Ct=c.agentStubMap=createHashMap(),ar=n.seriesType,en=n.getTargetSeries,tn=!0,on=!1,fn="";assert(!n.createOnAllSeries,fn),ar?s.eachRawSeriesByType(ar,dn):en?en(s,l).each(dn):(tn=!1,each$f(s.getSeries(),dn));function dn(Cn){var Rn=Cn.uid,ax=Ct.set(Rn,d&&d.get(Rn)||(on=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));ax.context={model:Cn,overallProgress:tn},ax.agent=c,ax.__block=tn,u._pipe(Cn,ax)}on&&c.dirty()},t.prototype._pipe=function(n,a){var s=n.uid,l=this._pipelineMap.get(s);!l.head&&(l.head=a),l.tail&&l.tail.pipe(a),l.tail=a,a.__idxInPipeline=l.count++,a.__pipeline=l},t.wrapStageHandler=function(n,a){return isFunction$1(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),a&&(n.visualType=a),n},t})();function overallTaskReset(t){t.overallReset(t.ecModel,t.api,t.payload)}function stubReset(t){return t.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function seriesTaskReset(t){t.useClearVisual&&t.data.clearAllVisual();var n=t.resetDefines=normalizeToArray(t.reset(t.model,t.ecModel,t.api,t.payload));return n.length>1?map$1(n,function(a,s){return makeSeriesTaskProgress(s)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(t){return function(n,a){var s=a.data,l=a.resetDefines[t];if(l&&l.dataEach)for(var u=n.start;u<n.end;u++)l.dataEach(s,u);else l&&l.progress&&l.progress(n,s)}}function seriesTaskCount(t){return t.data.count()}function detectSeriseType(t){seriesType=null;try{t(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(t){seriesType=t};ecModelMock.eachComponent=function(t){t.mainType==="series"&&t.subType&&(seriesType=t.subType)};function mockMethods(t,n){for(var a in n.prototype)t[a]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=(function(){function t(){}return t.prototype.normalizeQuery=function(n){var a={},s={},l={};if(isString$1(n)){var u=parseClassType(n);a.mainType=u.main||null,a.subType=u.sub||null}else{var c=["Index","Name","Id"],d={name:1,dataIndex:1,dataType:1};each$f(n,function(Ct,ar){for(var en=!1,tn=0;tn<c.length;tn++){var on=c[tn],fn=ar.lastIndexOf(on);if(fn>0&&fn===ar.length-on.length){var dn=ar.slice(0,fn);dn!=="data"&&(a.mainType=dn,a[on.toLowerCase()]=Ct,en=!0)}}d.hasOwnProperty(ar)&&(s[ar]=Ct,en=!0),en||(l[ar]=Ct)})}return{cptQuery:a,dataQuery:s,otherQuery:l}},t.prototype.filter=function(n,a){var s=this.eventInfo;if(!s)return!0;var l=s.targetEl,u=s.packedEvent,c=s.model,d=s.view;if(!c||!d)return!0;var Ct=a.cptQuery,ar=a.dataQuery;return en(Ct,c,"mainType")&&en(Ct,c,"subType")&&en(Ct,c,"index","componentIndex")&&en(Ct,c,"name")&&en(Ct,c,"id")&&en(ar,u,"name")&&en(ar,u,"dataIndex")&&en(ar,u,"dataType")&&(!d.filterForExposedEvent||d.filterForExposedEvent(n,a.otherQuery,l,u));function en(tn,on,fn,dn){return tn[fn]==null||on[dn||fn]===tn[fn]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t})(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData();if(t.legendIcon&&a.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var s={},l={},u=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var d=SYMBOL_PROPS_WITH_CB[c],Ct=t.get(d);isFunction$1(Ct)?(u=!0,l[d]=Ct):s[d]=Ct}if(s.symbol=s.symbol||t.defaultSymbol,a.setVisual(extend({legendIcon:t.legendIcon||s.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},s)),n.isSeriesFiltered(t))return;var ar=keys(l);function en(tn,on){for(var fn=t.getRawValue(on),dn=t.getDataParams(on),Cn=0;Cn<ar.length;Cn++){var Rn=ar[Cn];tn.setItemVisual(on,Rn,l[Rn](fn,dn))}}return{dataEach:u?en:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!t.hasSymbolVisual||n.isSeriesFiltered(t))return;var a=t.getData();function s(l,u){for(var c=l.getItemModel(u),d=0;d<SYMBOL_PROPS.length;d++){var Ct=SYMBOL_PROPS[d],ar=c.getShallow(Ct,!0);ar!=null&&l.setItemVisual(u,Ct,ar)}}return{dataEach:a.hasItemOption?s:null}}};function getItemVisualFromData(t,n,a){switch(a){case"color":var s=t.getItemVisual(n,"style");return s[t.getVisual("drawType")];case"opacity":return t.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(n,a)}}function getVisualFromData(t,n){switch(n){case"color":var a=t.getVisual("style");return a[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(n)}}function setItemVisualFromData(t,n,a,s){switch(a){case"color":var l=t.ensureUniqueItemVisual(n,"style");l[t.getVisual("drawType")]=s,t.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(n,"style").opacity=s;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(n,a,s);break}}function createLegacyDataSelectAction(t,n){function a(s,l){var u=[];return s.eachComponent({mainType:"series",subType:t,query:l},function(c){u.push(c.seriesIndex)}),u}each$f([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(s){n(s[0],function(l,u,c){l=extend({},l),c.dispatchAction(extend(l,{type:s[1],seriesIndex:a(u,l)}))})})}function handleSeriesLegacySelectEvents(t,n,a,s,l){var u=t+n;a.isSilent(u)||s.eachComponent({mainType:"series",subType:"pie"},function(c){for(var d=c.seriesIndex,Ct=c.option.selectedMap,ar=l.selected,en=0;en<ar.length;en++)if(ar[en].seriesIndex===d){var tn=c.getData(),on=queryDataIndex(tn,l.fromActionPayload);a.trigger(u,{type:u,seriesId:c.id,name:isArray$1(on)?tn.getName(on[0]):tn.getName(on),selected:isString$1(Ct)?Ct:extend({},Ct)})}})}function handleLegacySelectEvents(t,n,a){t.on("selectchanged",function(s){var l=a.getModel();s.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,l,s),handleSeriesLegacySelectEvents("pie","selectchanged",n,l,s)):s.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,l,s),handleSeriesLegacySelectEvents("pie","selected",n,l,s)):s.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,l,s),handleSeriesLegacySelectEvents("pie","unselected",n,l,s))})}function findEventDispatcher(t,n,a){for(var s;t&&!(n(t)&&(s=t,a));)t=t.__hostTarget||t.parent;return s}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=(function(){function t(){this._id="__ec_inner_"+wmUniqueIndex++}return t.prototype.get=function(n){return this._guard(n)[this._id]},t.prototype.set=function(n,a){var s=this._guard(n);return supportDefineProperty?Object.defineProperty(s,this._id,{value:a,enumerable:!1,configurable:!0}):s[this._id]=a,this},t.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},t.prototype.has=function(n){return!!this._guard(n)[this._id]},t.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},t})(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,s=n.cy,l=n.width/2,u=n.height/2;t.moveTo(a,s-u),t.lineTo(a+l,s+u),t.lineTo(a-l,s+u),t.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,s=n.cy,l=n.width/2,u=n.height/2;t.moveTo(a,s-u),t.lineTo(a+l,s),t.lineTo(a,s+u),t.lineTo(a-l,s),t.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.x,s=n.y,l=n.width/5*3,u=Math.max(l,n.height),c=l/2,d=c*c/(u-c),Ct=s-u+c+d,ar=Math.asin(d/c),en=Math.cos(ar)*c,tn=Math.sin(ar),on=Math.cos(ar),fn=c*.6,dn=c*.7;t.moveTo(a-en,Ct+d),t.arc(a,Ct,c,Math.PI-ar,Math.PI*2+ar),t.bezierCurveTo(a+en-tn*fn,Ct+d+on*fn,a,s-dn,a,s),t.bezierCurveTo(a,s-dn,a-en+tn*fn,Ct+d+on*fn,a-en,Ct+d),t.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.height,s=n.width,l=n.x,u=n.y,c=s/3*2;t.moveTo(l,u),t.lineTo(l+c,u+a),t.lineTo(l,u+a/4*3),t.lineTo(l-c,u+a),t.lineTo(l,u),t.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(t,n,a,s,l){l.x1=t,l.y1=n+s/2,l.x2=t+a,l.y2=n+s/2},rect:function(t,n,a,s,l){l.x=t,l.y=n,l.width=a,l.height=s},roundRect:function(t,n,a,s,l){l.x=t,l.y=n,l.width=a,l.height=s,l.r=Math.min(a,s)/4},square:function(t,n,a,s,l){var u=Math.min(a,s);l.x=t,l.y=n,l.width=u,l.height=u},circle:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.r=Math.min(a,s)/2},diamond:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.width=a,l.height=s},pin:function(t,n,a,s,l){l.x=t+a/2,l.y=n+s/2,l.width=a,l.height=s},arrow:function(t,n,a,s,l){l.x=t+a/2,l.y=n+s/2,l.width=a,l.height=s},triangle:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.width=a,l.height=s}},symbolBuildProxies={};each$f(symbolCtors,function(t,n){symbolBuildProxies[n]=new t});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,n,a){var s=calculateTextPosition(t,n,a),l=this.shape;return l&&l.symbolType==="pin"&&n.position==="inside"&&(s.y=a.y+a.height*.4),s},buildPath:function(t,n,a){var s=n.symbolType;if(s!=="none"){var l=symbolBuildProxies[s];l||(s="rect",l=symbolBuildProxies[s]),symbolShapeMakers[s](n.x,n.y,n.width,n.height,l.shape),l.buildPath(t,l.shape,a)}}});function symbolPathSetColor(t,n){if(this.type!=="image"){var a=this.style;this.__isEmptyBrush?(a.stroke=t,a.fill=n||"#fff",a.lineWidth=2):this.shape.symbolType==="line"?a.stroke=t:a.fill=t,this.markRedraw()}}function createSymbol$1(t,n,a,s,l,u,c){var d=t.indexOf("empty")===0;d&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var Ct;return t.indexOf("image://")===0?Ct=makeImage(t.slice(8),new BoundingRect(n,a,s,l),c?"center":"cover"):t.indexOf("path://")===0?Ct=makePath(t.slice(7),{},new BoundingRect(n,a,s,l),c?"center":"cover"):Ct=new SymbolClz({shape:{symbolType:t,x:n,y:a,width:s,height:l}}),Ct.__isEmptyBrush=d,Ct.setColor=symbolPathSetColor,u&&Ct.setColor(u),Ct}function normalizeSymbolSize(t){return isArray$1(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function normalizeSymbolOffset(t,n){if(t!=null)return isArray$1(t)||(t=[t,t]),[parsePercent(t[0],n[0])||0,parsePercent(retrieve2(t[1],t[0]),n[1])||0]}function isSafeNum(t){return isFinite(t)}function createLinearGradient(t,n,a){var s=n.x==null?0:n.x,l=n.x2==null?1:n.x2,u=n.y==null?0:n.y,c=n.y2==null?0:n.y2;n.global||(s=s*a.width+a.x,l=l*a.width+a.x,u=u*a.height+a.y,c=c*a.height+a.y),s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:1,u=isSafeNum(u)?u:0,c=isSafeNum(c)?c:0;var d=t.createLinearGradient(s,u,l,c);return d}function createRadialGradient(t,n,a){var s=a.width,l=a.height,u=Math.min(s,l),c=n.x==null?.5:n.x,d=n.y==null?.5:n.y,Ct=n.r==null?.5:n.r;n.global||(c=c*s+a.x,d=d*l+a.y,Ct=Ct*u),c=isSafeNum(c)?c:.5,d=isSafeNum(d)?d:.5,Ct=Ct>=0&&isSafeNum(Ct)?Ct:.5;var ar=t.createRadialGradient(c,d,0,c,d,Ct);return ar}function getCanvasGradient(t,n,a){for(var s=n.type==="radial"?createRadialGradient(t,n,a):createLinearGradient(t,n,a),l=n.colorStops,u=0;u<l.length;u++)s.addColorStop(l[u].offset,l[u].color);return s}function isClipPathChanged(t,n){if(t===n||!t&&!n)return!1;if(!t||!n||t.length!==n.length)return!0;for(var a=0;a<t.length;a++)if(t[a]!==n[a])return!0;return!1}function parseInt10(t){return parseInt(t,10)}function getSize$1(t,n,a){var s=["width","height"][n],l=["clientWidth","clientHeight"][n],u=["paddingLeft","paddingTop"][n],c=["paddingRight","paddingBottom"][n];if(a[s]!=null&&a[s]!=="auto")return parseFloat(a[s]);var d=document.defaultView.getComputedStyle(t);return(t[l]||parseInt10(d[s])||parseInt10(t.style[s]))-(parseInt10(d[u])||0)-(parseInt10(d[c])||0)|0}function normalizeLineDash(t,n){return!t||t==="solid"||!(n>0)?null:t==="dashed"?[4*n,2*n]:t==="dotted"?[n]:isNumber(t)?[t]:isArray$1(t)?t:null}function getLineDash(t){var n=t.style,a=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),s=n.lineDashOffset;if(a){var l=n.strokeNoScale&&t.getLineScale?t.getLineScale():1;l&&l!==1&&(a=map$1(a,function(u){return u/l}),s/=l)}return[a,s]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(t){var n=t.stroke;return!(n==null||n==="none"||!(t.lineWidth>0))}function isValidStrokeFillStyle(t){return typeof t=="string"&&t!=="none"}function styleHasFill(t){var n=t.fill;return n!=null&&n!=="none"}function doFillPath(t,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=a}else t.fill()}function doStrokePath(t,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=a}else t.stroke()}function createCanvasPattern(t,n,a){var s=createOrUpdateImage(n.image,n.__image,a);if(isImageReady(s)){var l=t.createPattern(s,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var u=new DOMMatrix;u.translateSelf(n.x||0,n.y||0),u.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(n.scaleX||1,n.scaleY||1),l.setTransform(u)}return l}}function brushPath(t,n,a,s){var l,u=styleHasStroke(a),c=styleHasFill(a),d=a.strokePercent,Ct=d<1,ar=!n.path;(!n.silent||Ct)&&ar&&n.createPathProxy();var en=n.path||pathProxyForDraw,tn=n.__dirty;if(!s){var on=a.fill,fn=a.stroke,dn=c&&!!on.colorStops,Cn=u&&!!fn.colorStops,Rn=c&&!!on.image,ax=u&&!!fn.image,ox=void 0,sx=void 0,lx=void 0,cx=void 0,fx=void 0;(dn||Cn)&&(fx=n.getBoundingRect()),dn&&(ox=tn?getCanvasGradient(t,on,fx):n.__canvasFillGradient,n.__canvasFillGradient=ox),Cn&&(sx=tn?getCanvasGradient(t,fn,fx):n.__canvasStrokeGradient,n.__canvasStrokeGradient=sx),Rn&&(lx=tn||!n.__canvasFillPattern?createCanvasPattern(t,on,n):n.__canvasFillPattern,n.__canvasFillPattern=lx),ax&&(cx=tn||!n.__canvasStrokePattern?createCanvasPattern(t,fn,n):n.__canvasStrokePattern,n.__canvasStrokePattern=lx),dn?t.fillStyle=ox:Rn&&(lx?t.fillStyle=lx:c=!1),Cn?t.strokeStyle=sx:ax&&(cx?t.strokeStyle=cx:u=!1)}var gx=n.getGlobalScale();en.setScale(gx[0],gx[1],n.segmentIgnoreThreshold);var mx,px;t.setLineDash&&a.lineDash&&(l=getLineDash(n),mx=l[0],px=l[1]);var hx=!0;(ar||tn&SHAPE_CHANGED_BIT)&&(en.setDPR(t.dpr),Ct?en.setContext(null):(en.setContext(t),hx=!1),en.reset(),n.buildPath(en,n.shape,s),en.toStatic(),n.pathUpdated()),hx&&en.rebuildPath(t,Ct?d:1),mx&&(t.setLineDash(mx),t.lineDashOffset=px),s||(a.strokeFirst?(u&&doStrokePath(t,a),c&&doFillPath(t,a)):(c&&doFillPath(t,a),u&&doStrokePath(t,a))),mx&&t.setLineDash([])}function brushImage(t,n,a){var s=n.__image=createOrUpdateImage(a.image,n.__image,n,n.onload);if(!(!s||!isImageReady(s))){var l=a.x||0,u=a.y||0,c=n.getWidth(),d=n.getHeight(),Ct=s.width/s.height;if(c==null&&d!=null?c=d*Ct:d==null&&c!=null?d=c/Ct:c==null&&d==null&&(c=s.width,d=s.height),a.sWidth&&a.sHeight){var ar=a.sx||0,en=a.sy||0;t.drawImage(s,ar,en,a.sWidth,a.sHeight,l,u,c,d)}else if(a.sx&&a.sy){var ar=a.sx,en=a.sy,tn=c-ar,on=d-en;t.drawImage(s,ar,en,tn,on,l,u,c,d)}else t.drawImage(s,l,u,c,d)}}function brushText(t,n,a){var s,l=a.text;if(l!=null&&(l+=""),l){t.font=a.font||DEFAULT_FONT,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline;var u=void 0,c=void 0;t.setLineDash&&a.lineDash&&(s=getLineDash(n),u=s[0],c=s[1]),u&&(t.setLineDash(u),t.lineDashOffset=c),a.strokeFirst?(styleHasStroke(a)&&t.strokeText(l,a.x,a.y),styleHasFill(a)&&t.fillText(l,a.x,a.y)):(styleHasFill(a)&&t.fillText(l,a.x,a.y),styleHasStroke(a)&&t.strokeText(l,a.x,a.y)),u&&t.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(t,n,a,s,l){var u=!1;if(!s&&(a=a||{},n===a))return!1;if(s||n.opacity!==a.opacity){flushPathDrawn(t,l),u=!0;var c=Math.max(Math.min(n.opacity,1),0);t.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(s||n.blend!==a.blend)&&(u||(flushPathDrawn(t,l),u=!0),t.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var d=0;d<SHADOW_NUMBER_PROPS.length;d++){var Ct=SHADOW_NUMBER_PROPS[d];(s||n[Ct]!==a[Ct])&&(u||(flushPathDrawn(t,l),u=!0),t[Ct]=t.dpr*(n[Ct]||0))}return(s||n.shadowColor!==a.shadowColor)&&(u||(flushPathDrawn(t,l),u=!0),t.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(t,n,a,s,l){var u=getStyle(n,l.inHover),c=s?null:a&&getStyle(a,l.inHover)||{};if(u===c)return!1;var d=bindCommonProps(t,u,c,s,l);if((s||u.fill!==c.fill)&&(d||(flushPathDrawn(t,l),d=!0),isValidStrokeFillStyle(u.fill)&&(t.fillStyle=u.fill)),(s||u.stroke!==c.stroke)&&(d||(flushPathDrawn(t,l),d=!0),isValidStrokeFillStyle(u.stroke)&&(t.strokeStyle=u.stroke)),(s||u.opacity!==c.opacity)&&(d||(flushPathDrawn(t,l),d=!0),t.globalAlpha=u.opacity==null?1:u.opacity),n.hasStroke()){var Ct=u.lineWidth,ar=Ct/(u.strokeNoScale&&n.getLineScale?n.getLineScale():1);t.lineWidth!==ar&&(d||(flushPathDrawn(t,l),d=!0),t.lineWidth=ar)}for(var en=0;en<STROKE_PROPS.length;en++){var tn=STROKE_PROPS[en],on=tn[0];(s||u[on]!==c[on])&&(d||(flushPathDrawn(t,l),d=!0),t[on]=u[on]||tn[1])}return d}function bindImageStyle(t,n,a,s,l){return bindCommonProps(t,getStyle(n,l.inHover),a&&getStyle(a,l.inHover),s,l)}function setContextTransform(t,n){var a=n.transform,s=t.dpr||1;a?t.setTransform(s*a[0],s*a[1],s*a[2],s*a[3],s*a[4],s*a[5]):t.setTransform(s,0,0,s,0,0)}function updateClipStatus(t,n,a){for(var s=!1,l=0;l<t.length;l++){var u=t[l];s=s||u.isZeroArea(),setContextTransform(n,u),n.beginPath(),u.buildPath(n,u.shape),n.clip()}a.allClipped=s}function isTransformChanged(t,n){return t&&n?t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||t[4]!==n[4]||t[5]!==n[5]:!(!t&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(t){var n=styleHasFill(t),a=styleHasStroke(t);return!(t.lineDash||!(+n^+a)||n&&typeof t.fill!="string"||a&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function flushPathDrawn(t,n){n.batchFill&&t.fill(),n.batchStroke&&t.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(t,n){return n&&t.__hoverStyle||t.style}function brushSingle(t,n){brush$1(t,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(t,n,a,s){var l=n.transform;if(!n.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var u=n.__clipPaths,c=a.prevElClipPaths,d=!1,Ct=!1;if((!c||isClipPathChanged(u,c))&&(c&&c.length&&(flushPathDrawn(t,a),t.restore(),Ct=d=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),u&&u.length&&(flushPathDrawn(t,a),t.save(),updateClipStatus(u,t,a),d=!0),a.prevElClipPaths=u),a.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var ar=a.prevEl;ar||(Ct=d=!0);var en=n instanceof Path&&n.autoBatch&&canPathBatch(n.style);d||isTransformChanged(l,ar.transform)?(flushPathDrawn(t,a),setContextTransform(t,n)):en||flushPathDrawn(t,a);var tn=getStyle(n,a.inHover);n instanceof Path?(a.lastDrawType!==DRAW_TYPE_PATH&&(Ct=!0,a.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(t,n,ar,Ct,a),(!en||!a.batchFill&&!a.batchStroke)&&t.beginPath(),brushPath(t,n,tn,en),en&&(a.batchFill=tn.fill||"",a.batchStroke=tn.stroke||"")):n instanceof TSpan?(a.lastDrawType!==DRAW_TYPE_TEXT&&(Ct=!0,a.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(t,n,ar,Ct,a),brushText(t,n,tn)):n instanceof ZRImage?(a.lastDrawType!==DRAW_TYPE_IMAGE&&(Ct=!0,a.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(t,n,ar,Ct,a),brushImage(t,n,tn)):n.getTemporalDisplayables&&(a.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(Ct=!0,a.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(t,n,a)),en&&s&&flushPathDrawn(t,a),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),a.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(t,n,a){var s=n.getDisplayables(),l=n.getTemporalDisplayables();t.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover},c,d;for(c=n.getCursor(),d=s.length;c<d;c++){var Ct=s[c];Ct.beforeBrush&&Ct.beforeBrush(),Ct.innerBeforeBrush(),brush$1(t,Ct,u,c===d-1),Ct.innerAfterBrush(),Ct.afterBrush&&Ct.afterBrush(),u.prevEl=Ct}for(var ar=0,en=l.length;ar<en;ar++){var Ct=l[ar];Ct.beforeBrush&&Ct.beforeBrush(),Ct.innerBeforeBrush(),brush$1(t,Ct,u,ar===en-1),Ct.innerAfterBrush(),Ct.afterBrush&&Ct.afterBrush(),u.prevEl=Ct}n.clearTemporalDisplayables(),n.notClear=!0,t.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(t,n){if(t==="none")return null;var a=n.getDevicePixelRatio(),s=n.getZr(),l=s.painter.type==="svg";t.dirty&&decalMap.delete(t);var u=decalMap.get(t);if(u)return u;var c=defaults(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var d={repeat:"repeat"};return Ct(d),d.rotation=c.rotation,d.scaleX=d.scaleY=l?1:1/a,decalMap.set(t,d),t.dirty=!1,d;function Ct(ar){for(var en=[a],tn=!0,on=0;on<decalKeys.length;++on){var fn=c[decalKeys[on]];if(fn!=null&&!isArray$1(fn)&&!isString$1(fn)&&!isNumber(fn)&&typeof fn!="boolean"){tn=!1;break}en.push(fn)}var dn;if(tn){dn=en.join(",")+(l?"-svg":"");var Cn=decalCache.get(dn);Cn&&(l?ar.svgElement=Cn:ar.image=Cn)}var Rn=normalizeDashArrayX(c.dashArrayX),ax=normalizeDashArrayY(c.dashArrayY),ox=normalizeSymbolArray(c.symbol),sx=getLineBlockLengthX(Rn),lx=getLineBlockLengthY(ax),cx=!l&&platformApi.createCanvas(),fx=l&&{tag:"g",attrs:{},key:"dcl",children:[]},gx=px(),mx;cx&&(cx.width=gx.width*a,cx.height=gx.height*a,mx=cx.getContext("2d")),hx(),tn&&decalCache.put(dn,cx||fx),ar.image=cx,ar.svgElement=fx,ar.svgWidth=gx.width,ar.svgHeight=gx.height;function px(){for(var vx=1,yx=0,Sx=sx.length;yx<Sx;++yx)vx=getLeastCommonMultiple(vx,sx[yx]);for(var _x=1,yx=0,Sx=ox.length;yx<Sx;++yx)_x=getLeastCommonMultiple(_x,ox[yx].length);vx*=_x;var Ex=lx*sx.length*ox.length;return{width:Math.max(1,Math.min(vx,c.maxTileWidth)),height:Math.max(1,Math.min(Ex,c.maxTileHeight))}}function hx(){mx&&(mx.clearRect(0,0,cx.width,cx.height),c.backgroundColor&&(mx.fillStyle=c.backgroundColor,mx.fillRect(0,0,cx.width,cx.height)));for(var vx=0,yx=0;yx<ax.length;++yx)vx+=ax[yx];if(vx<=0)return;for(var Sx=-lx,_x=0,Ex=0,bx=0;Sx<gx.height;){if(_x%2===0){for(var Ax=Ex/2%ox.length,Mx=0,Rx=0,Cx=0;Mx<gx.width*2;){for(var Lx=0,yx=0;yx<Rn[bx].length;++yx)Lx+=Rn[bx][yx];if(Lx<=0)break;if(Rx%2===0){var qx=(1-c.symbolSize)*.5,Ix=Mx+Rn[bx][Rx]*qx,Px=Sx+ax[_x]*qx,Nx=Rn[bx][Rx]*c.symbolSize,Bx=ax[_x]*c.symbolSize,$x=Cx/2%ox[Ax].length;Vx(Ix,Px,Nx,Bx,ox[Ax][$x])}Mx+=Rn[bx][Rx],++Cx,++Rx,Rx===Rn[bx].length&&(Rx=0)}++bx,bx===Rn.length&&(bx=0)}Sx+=ax[_x],++Ex,++_x,_x===ax.length&&(_x=0)}function Vx(Gx,Zx,jx,Hx,iE){var Xx=l?1:a,rE=createSymbol$1(iE,Gx*Xx,Zx*Xx,jx*Xx,Hx*Xx,c.color,c.symbolKeepAspect);if(l){var uE=s.painter.renderOneToVNode(rE);uE&&fx.children.push(uE)}else brushSingle(mx,rE)}}}}function normalizeSymbolArray(t){if(!t||t.length===0)return[["rect"]];if(isString$1(t))return[[t]];for(var n=!0,a=0;a<t.length;++a)if(!isString$1(t[a])){n=!1;break}if(n)return normalizeSymbolArray([t]);for(var s=[],a=0;a<t.length;++a)isString$1(t[a])?s.push([t[a]]):s.push(t[a]);return s}function normalizeDashArrayX(t){if(!t||t.length===0)return[[0,0]];if(isNumber(t)){var n=Math.ceil(t);return[[n,n]]}for(var a=!0,s=0;s<t.length;++s)if(!isNumber(t[s])){a=!1;break}if(a)return normalizeDashArrayX([t]);for(var l=[],s=0;s<t.length;++s)if(isNumber(t[s])){var n=Math.ceil(t[s]);l.push([n,n])}else{var n=map$1(t[s],function(d){return Math.ceil(d)});n.length%2===1?l.push(n.concat(n)):l.push(n)}return l}function normalizeDashArrayY(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(isNumber(t)){var n=Math.ceil(t);return[n,n]}var a=map$1(t,function(s){return Math.ceil(s)});return t.length%2?a.concat(a):a}function getLineBlockLengthX(t){return map$1(t,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(t){for(var n=0,a=0;a<t.length;++a)n+=t[a];return t.length%2===1?n*2:n}function decalVisual(t,n){t.eachRawSeries(function(a){if(!t.isSeriesFiltered(a)){var s=a.getData();s.hasItemVisual()&&s.each(function(c){var d=s.getItemVisual(c,"decal");if(d){var Ct=s.ensureUniqueItemVisual(c,"style");Ct.decal=createOrUpdatePatternFromDecal(d,n)}});var l=s.getVisual("decal");if(l){var u=s.getVisual("style");u.decal=createOrUpdatePatternFromDecal(l,n)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(t,n){implsStore[t]=n}function getImpl(t){return implsStore[t]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,t,n)}}function createRegisterEventWithLowercaseMessageCenter(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return toLowercaseNameAndCallEventful(this,t,n)}}function toLowercaseNameAndCallEventful(t,n,a){return a[0]=a[0]&&a[0].toLowerCase(),Eventful.prototype[n].apply(t,a)}var MessageCenter=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],l=l||{},isString$1(s)&&(s=themeStorage[s]),u._dom=a;var c="canvas",d="auto",Ct=!1;l.ssr&&registerSSRDataGetter(function(on){var fn=getECData(on),dn=fn.dataIndex;if(dn!=null){var Cn=createHashMap();return Cn.set("series_index",fn.seriesIndex),Cn.set("data_index",dn),fn.ssrType&&Cn.set("ssr_type",fn.ssrType),Cn}});var ar=u._zr=init$2(a,{renderer:l.renderer||c,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,Ct),useCoarsePointer:retrieve2(l.useCoarsePointer,d),pointerSize:l.pointerSize});u._ssr=l.ssr,u._throttledZrFlush=throttle(bind$1(ar.flush,ar),17),s=clone$4(s),s&&globalBackwardCompat(s,!0),u._theme=s,u._locale=createLocaleObject(l.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystemManager;var en=u._api=createExtensionAPI(u);function tn(on,fn){return on.__prio-fn.__prio}return sort$2(visualFuncs,tn),sort$2(dataProcessorFuncs,tn),u._scheduler=new Scheduler(u,en,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),ar.animation.on("frame",u._onframe,u),bindRenderedEvent(ar,u),bindMouseEvent(ar,u),setAsPrimitive(u),u}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var a=this._scheduler;if(this[PENDING_UPDATE]){var s=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(Ct){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,Ct}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}else if(a.unfinished){var l=TEST_FRAME_REMAIN_TIME,u=this._model,c=this._api;a.unfinished=!1;do{var d=+new Date;a.performSeriesTasks(u),a.performDataProcessorTasks(u),updateStreamModes(this,u),a.performVisualTasks(u),renderSeries(this,this._model,c,"remain",{}),l-=+new Date-d}while(l>0&&a.unfinished);a.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(a,s,l){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var u,c,d;if(isObject$3(s)&&(l=s.lazyUpdate,u=s.silent,c=s.replaceMerge,d=s.transition,s=s.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||s){var Ct=new OptionManager(this._api),ar=this._theme,en=this._model=new GlobalModel;en.scheduler=this._scheduler,en.ssr=this._ssr,en.init(null,null,null,ar,this._locale,Ct)}this._model.setOption(a,{replaceMerge:c},optionPreprocessorFuncs);var tn={seriesTransition:d,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:u,updateParams:tn},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,tn)}catch(on){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,on}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},n.prototype.setTheme=function(){},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(a){return this.renderToCanvas(a)},n.prototype.renderToCanvas=function(a){a=a||{};var s=this._zr.painter;return s.getRenderedCanvas({backgroundColor:a.backgroundColor||this._model.get("backgroundColor"),pixelRatio:a.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(a){a=a||{};var s=this._zr.painter;return s.renderToString({useViewBox:a.useViewBox})},n.prototype.getSvgDataURL=function(){if(env.svgSupported){var a=this._zr,s=a.storage.getDisplayList();return each$f(s,function(l){l.stopAnimation(null,!0)}),a.painter.toDataURL()}},n.prototype.getDataURL=function(a){if(this._disposed){this.id;return}a=a||{};var s=a.excludeComponents,l=this._model,u=[],c=this;each$f(s,function(Ct){l.eachComponent({mainType:Ct},function(ar){var en=c._componentsMap[ar.__viewId];en.group.ignore||(u.push(en),en.group.ignore=!0)})});var d=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(a).toDataURL("image/"+(a&&a.type||"png"));return each$f(u,function(Ct){Ct.group.ignore=!1}),d},n.prototype.getConnectedDataURL=function(a){if(this._disposed){this.id;return}var s=a.type==="svg",l=this.group,u=Math.min,c=Math.max,d=1/0;if(connectedGroups[l]){var Ct=d,ar=d,en=-d,tn=-d,on=[],fn=a&&a.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(sx,lx){if(sx.group===l){var cx=s?sx.getZr().painter.getSvgDom().innerHTML:sx.renderToCanvas(clone$4(a)),fx=sx.getDom().getBoundingClientRect();Ct=u(fx.left,Ct),ar=u(fx.top,ar),en=c(fx.right,en),tn=c(fx.bottom,tn),on.push({dom:cx,left:fx.left,top:fx.top})}}),Ct*=fn,ar*=fn,en*=fn,tn*=fn;var dn=en-Ct,Cn=tn-ar,Rn=platformApi.createCanvas(),ax=init$2(Rn,{renderer:s?"svg":"canvas"});if(ax.resize({width:dn,height:Cn}),s){var ox="";return each$f(on,function(sx){var lx=sx.left-Ct,cx=sx.top-ar;ox+='<g transform="translate('+lx+","+cx+')">'+sx.dom+"</g>"}),ax.painter.getSvgRoot().innerHTML=ox,a.connectedBackgroundColor&&ax.painter.setBackgroundColor(a.connectedBackgroundColor),ax.refreshImmediately(),ax.painter.toDataURL()}else return a.connectedBackgroundColor&&ax.add(new Rect$2({shape:{x:0,y:0,width:dn,height:Cn},style:{fill:a.connectedBackgroundColor}})),each$f(on,function(sx){var lx=new ZRImage({style:{x:sx.left*fn-Ct,y:sx.top*fn-ar,image:sx.dom}});ax.add(lx)}),ax.refreshImmediately(),Rn.toDataURL("image/"+(a&&a.type||"png"))}else return this.getDataURL(a)},n.prototype.convertToPixel=function(a,s){return doConvertPixel(this,"convertToPixel",a,s)},n.prototype.convertFromPixel=function(a,s){return doConvertPixel(this,"convertFromPixel",a,s)},n.prototype.containPixel=function(a,s){if(this._disposed){this.id;return}var l=this._model,u,c=parseFinder$1(l,a);return each$f(c,function(d,Ct){Ct.indexOf("Models")>=0&&each$f(d,function(ar){var en=ar.coordinateSystem;if(en&&en.containPoint)u=u||!!en.containPoint(s);else if(Ct==="seriesModels"){var tn=this._chartsMap[ar.__viewId];tn&&tn.containPoint&&(u=u||tn.containPoint(s,ar))}},this)},this),!!u},n.prototype.getVisual=function(a,s){var l=this._model,u=parseFinder$1(l,a,{defaultMainType:"series"}),c=u.seriesModel,d=c.getData(),Ct=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?d.indexOfRawIndex(u.dataIndex):null;return Ct!=null?getItemVisualFromData(d,Ct,s):getVisualFromData(d,s)},n.prototype.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},n.prototype.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},n.prototype._initEvents=function(){var a=this;each$f(MOUSE_EVENT_NAMES,function(s){var l=function(u){var c=a.getModel(),d=u.target,Ct,ar=s==="globalout";if(ar?Ct={}:d&&findEventDispatcher(d,function(dn){var Cn=getECData(dn);if(Cn&&Cn.dataIndex!=null){var Rn=Cn.dataModel||c.getSeriesByIndex(Cn.seriesIndex);return Ct=Rn&&Rn.getDataParams(Cn.dataIndex,Cn.dataType,d)||{},!0}else if(Cn.eventData)return Ct=extend({},Cn.eventData),!0},!0),Ct){var en=Ct.componentType,tn=Ct.componentIndex;(en==="markLine"||en==="markPoint"||en==="markArea")&&(en="series",tn=Ct.seriesIndex);var on=en&&tn!=null&&c.getComponent(en,tn),fn=on&&a[on.mainType==="series"?"_chartsMap":"_componentsMap"][on.__viewId];Ct.event=u,Ct.type=s,a._$eventProcessor.eventInfo={targetEl:d,packedEvent:Ct,model:on,view:fn},a.trigger(s,Ct)}};l.zrEventfulCallAtLast=!0,a._zr.on(s,l,a)}),each$f(eventActionMap,function(s,l){a._messageCenter.on(l,function(u){this.trigger(l,u)},a)}),each$f(["selectchanged"],function(s){a._messageCenter.on(s,function(l){this.trigger(s,l)},a)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var a=this.getDom();a&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var s=this,l=s._api,u=s._model;each$f(s._componentsViews,function(c){c.dispose(u,l)}),each$f(s._chartsViews,function(c){c.dispose(u,l)}),s._zr.dispose(),s._dom=s._model=s._chartsMap=s._componentsMap=s._chartsViews=s._componentsViews=s._scheduler=s._api=s._zr=s._throttledZrFlush=s._theme=s._coordSysMgr=s._messageCenter=null,delete instances[s.id]},n.prototype.resize=function(a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(a);var s=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!s){var l=s.resetOption("media"),u=a&&a.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},a&&a.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},n.prototype.showLoading=function(a,s){if(this._disposed){this.id;return}if(isObject$3(a)&&(s=a,a=""),a=a||"default",this.hideLoading(),!!loadingEffects[a]){var l=loadingEffects[a](this._api,s),u=this._zr;this._loadingFX=l,u.add(l)}},n.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(a){var s=extend({},a);return s.type=eventActionMap[a.type],s},n.prototype.dispatchAction=function(a,s){if(this._disposed){this.id;return}if(isObject$3(s)||(s={silent:!!s}),!!actions[a.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(a);return}var l=s.silent;doDispatchAction.call(this,a,l);var u=s.flush;u?this._zr.flush():u!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},n.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(a){if(this._disposed){this.id;return}var s=a.seriesIndex,l=this.getModel(),u=l.getSeriesByIndex(s);u.appendData(a),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=(function(){prepare=function(tn){var on=tn._scheduler;on.restorePipelines(tn._model),on.prepareStageTasks(),prepareView(tn,!0),prepareView(tn,!1),on.plan()},prepareView=function(tn,on){for(var fn=tn._model,dn=tn._scheduler,Cn=on?tn._componentsViews:tn._chartsViews,Rn=on?tn._componentsMap:tn._chartsMap,ax=tn._zr,ox=tn._api,sx=0;sx<Cn.length;sx++)Cn[sx].__alive=!1;on?fn.eachComponent(function(fx,gx){fx!=="series"&&lx(gx)}):fn.eachSeries(lx);function lx(fx){var gx=fx.__requireNewView;fx.__requireNewView=!1;var mx="_ec_"+fx.id+"_"+fx.type,px=!gx&&Rn[mx];if(!px){var hx=parseClassType(fx.type),vx=on?ComponentView.getClass(hx.main,hx.sub):ChartView.getClass(hx.sub);px=new vx,px.init(fn,ox),Rn[mx]=px,Cn.push(px),ax.add(px.group)}fx.__viewId=px.__id=mx,px.__alive=!0,px.__model=fx,px.group.__ecComponentInfo={mainType:fx.mainType,index:fx.componentIndex},!on&&dn.prepareView(px,fx,fn,ox)}for(var sx=0;sx<Cn.length;){var cx=Cn[sx];cx.__alive?sx++:(!on&&cx.renderTask.dispose(),ax.remove(cx.group),cx.dispose(fn,ox),Cn.splice(sx,1),Rn[cx.__id]===cx&&delete Rn[cx.__id],cx.__id=cx.group.__ecComponentInfo=null)}},updateDirectly=function(tn,on,fn,dn,Cn){var Rn=tn._model;if(Rn.setUpdatePayload(fn),!dn){each$f([].concat(tn._componentsViews).concat(tn._chartsViews),cx);return}var ax={};ax[dn+"Id"]=fn[dn+"Id"],ax[dn+"Index"]=fn[dn+"Index"],ax[dn+"Name"]=fn[dn+"Name"];var ox={mainType:dn,query:ax};Cn&&(ox.subType=Cn);var sx=fn.excludeSeriesId,lx;sx!=null&&(lx=createHashMap(),each$f(normalizeToArray(sx),function(fx){var gx=convertOptionIdName(fx,null);gx!=null&&lx.set(gx,!0)})),Rn&&Rn.eachComponent(ox,function(fx){var gx=lx&&lx.get(fx.id)!=null;if(!gx)if(isHighDownPayload(fn))if(fx instanceof SeriesModel)fn.type===HIGHLIGHT_ACTION_TYPE&&!fn.notBlur&&!fx.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(fx,fn,tn._api);else{var mx=findComponentHighDownDispatchers(fx.mainType,fx.componentIndex,fn.name,tn._api),px=mx.focusSelf,hx=mx.dispatchers;fn.type===HIGHLIGHT_ACTION_TYPE&&px&&!fn.notBlur&&blurComponent(fx.mainType,fx.componentIndex,tn._api),hx&&each$f(hx,function(vx){fn.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(vx):leaveEmphasis(vx)})}else isSelectChangePayload(fn)&&fx instanceof SeriesModel&&(toggleSelectionFromPayload(fx,fn,tn._api),updateSeriesElementSelection(fx),markStatusToUpdate(tn))},tn),Rn&&Rn.eachComponent(ox,function(fx){var gx=lx&&lx.get(fx.id)!=null;gx||cx(tn[dn==="series"?"_chartsMap":"_componentsMap"][fx.__viewId])},tn);function cx(fx){fx&&fx.__alive&&fx[on]&&fx[on](fx.__model,Rn,tn._api,fn)}},updateMethods={prepareAndUpdate:function(tn){prepare(this),updateMethods.update.call(this,tn,{optionChanged:tn.newOption!=null})},update:function(tn,on){var fn=this._model,dn=this._api,Cn=this._zr,Rn=this._coordSysMgr,ax=this._scheduler;if(fn){fn.setUpdatePayload(tn),ax.restoreData(fn,tn),ax.performSeriesTasks(fn),Rn.create(fn,dn),ax.performDataProcessorTasks(fn,tn),updateStreamModes(this,fn),Rn.update(fn,dn),a(fn),ax.performVisualTasks(fn,tn),render(this,fn,dn,tn,on);var ox=fn.get("backgroundColor")||"transparent",sx=fn.get("darkMode");Cn.setBackgroundColor(ox),sx!=null&&sx!=="auto"&&Cn.setDarkMode(sx),lifecycle.trigger("afterupdate",fn,dn)}},updateTransform:function(tn){var on=this,fn=this._model,dn=this._api;if(fn){fn.setUpdatePayload(tn);var Cn=[];fn.eachComponent(function(ax,ox){if(ax!=="series"){var sx=on.getViewOfComponentModel(ox);if(sx&&sx.__alive)if(sx.updateTransform){var lx=sx.updateTransform(ox,fn,dn,tn);lx&&lx.update&&Cn.push(sx)}else Cn.push(sx)}});var Rn=createHashMap();fn.eachSeries(function(ax){var ox=on._chartsMap[ax.__viewId];if(ox.updateTransform){var sx=ox.updateTransform(ax,fn,dn,tn);sx&&sx.update&&Rn.set(ax.uid,1)}else Rn.set(ax.uid,1)}),a(fn),this._scheduler.performVisualTasks(fn,tn,{setDirty:!0,dirtyMap:Rn}),renderSeries(this,fn,dn,tn,{},Rn),lifecycle.trigger("afterupdate",fn,dn)}},updateView:function(tn){var on=this._model;on&&(on.setUpdatePayload(tn),ChartView.markUpdateMethod(tn,"updateView"),a(on),this._scheduler.performVisualTasks(on,tn,{setDirty:!0}),render(this,on,this._api,tn,{}),lifecycle.trigger("afterupdate",on,this._api))},updateVisual:function(tn){var on=this,fn=this._model;fn&&(fn.setUpdatePayload(tn),fn.eachSeries(function(dn){dn.getData().clearAllVisual()}),ChartView.markUpdateMethod(tn,"updateVisual"),a(fn),this._scheduler.performVisualTasks(fn,tn,{visualType:"visual",setDirty:!0}),fn.eachComponent(function(dn,Cn){if(dn!=="series"){var Rn=on.getViewOfComponentModel(Cn);Rn&&Rn.__alive&&Rn.updateVisual(Cn,fn,on._api,tn)}}),fn.eachSeries(function(dn){var Cn=on._chartsMap[dn.__viewId];Cn.updateVisual(dn,fn,on._api,tn)}),lifecycle.trigger("afterupdate",fn,this._api))},updateLayout:function(tn){updateMethods.update.call(this,tn)}},doConvertPixel=function(tn,on,fn,dn){if(tn._disposed){tn.id;return}for(var Cn=tn._model,Rn=tn._coordSysMgr.getCoordinateSystems(),ax,ox=parseFinder$1(Cn,fn),sx=0;sx<Rn.length;sx++){var lx=Rn[sx];if(lx[on]&&(ax=lx[on](Cn,ox,dn))!=null)return ax}},updateStreamModes=function(tn,on){var fn=tn._chartsMap,dn=tn._scheduler;on.eachSeries(function(Cn){dn.updateStreamModes(Cn,fn[Cn.__viewId])})},doDispatchAction=function(tn,on){var fn=this,dn=this.getModel(),Cn=tn.type,Rn=tn.escapeConnect,ax=actions[Cn],ox=ax.actionInfo,sx=(ox.update||"update").split(":"),lx=sx.pop(),cx=sx[0]!=null&&parseClassType(sx[0]);this[IN_MAIN_PROCESS_KEY]=!0;var fx=[tn],gx=!1;tn.batch&&(gx=!0,fx=map$1(tn.batch,function(_x){return _x=defaults(extend({},_x),tn),_x.batch=null,_x}));var mx=[],px,hx=isSelectChangePayload(tn),vx=isHighDownPayload(tn);if(vx&&allLeaveBlur(this._api),each$f(fx,function(_x){if(px=ax.action(_x,fn._model,fn._api),px=px||extend({},_x),px.type=ox.event||px.type,mx.push(px),vx){var Ex=preParseFinder(tn),bx=Ex.queryOptionMap,Ax=Ex.mainTypeSpecified,Mx=Ax?bx.keys()[0]:"series";updateDirectly(fn,lx,_x,Mx),markStatusToUpdate(fn)}else hx?(updateDirectly(fn,lx,_x,"series"),markStatusToUpdate(fn)):cx&&updateDirectly(fn,lx,_x,cx.main,cx.sub)}),lx!=="none"&&!vx&&!hx&&!cx)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,tn),this[PENDING_UPDATE]=null):updateMethods[lx].call(this,tn)}catch(_x){throw this[IN_MAIN_PROCESS_KEY]=!1,_x}if(gx?px={type:ox.event||Cn,escapeConnect:Rn,batch:mx}:px=mx[0],this[IN_MAIN_PROCESS_KEY]=!1,!on){var yx=this._messageCenter;if(yx.trigger(px.type,px),hx){var Sx={type:"selectchanged",escapeConnect:Rn,selected:getAllSelectedIndices(dn),isFromClick:tn.isFromClick||!1,fromAction:tn.type,fromActionPayload:tn};yx.trigger(Sx.type,Sx)}}},flushPendingActions=function(tn){for(var on=this._pendingActions;on.length;){var fn=on.shift();doDispatchAction.call(this,fn,tn)}},triggerUpdatedEvent=function(tn){!tn&&this.trigger("updated")},bindRenderedEvent=function(tn,on){tn.on("rendered",function(fn){on.trigger("rendered",fn),tn.animation.isFinished()&&!on[PENDING_UPDATE]&&!on._scheduler.unfinished&&!on._pendingActions.length&&on.trigger("finished")})},bindMouseEvent=function(tn,on){tn.on("mouseover",function(fn){var dn=fn.target,Cn=findEventDispatcher(dn,isHighDownDispatcher);Cn&&(handleGlobalMouseOverForHighDown(Cn,fn,on._api),markStatusToUpdate(on))}).on("mouseout",function(fn){var dn=fn.target,Cn=findEventDispatcher(dn,isHighDownDispatcher);Cn&&(handleGlobalMouseOutForHighDown(Cn,fn,on._api),markStatusToUpdate(on))}).on("click",function(fn){var dn=fn.target,Cn=findEventDispatcher(dn,function(ox){return getECData(ox).dataIndex!=null},!0);if(Cn){var Rn=Cn.selected?"unselect":"select",ax=getECData(Cn);on._api.dispatchAction({type:Rn,dataType:ax.dataType,dataIndexInside:ax.dataIndex,seriesIndex:ax.seriesIndex,isFromClick:!0})}})};function a(tn){tn.clearColorPalette(),tn.eachSeries(function(on){on.clearColorPalette()})}function s(tn){var on=[],fn=[],dn=!1;if(tn.eachComponent(function(ox,sx){var lx=sx.get("zlevel")||0,cx=sx.get("z")||0,fx=sx.getZLevelKey();dn=dn||!!fx,(ox==="series"?fn:on).push({zlevel:lx,z:cx,idx:sx.componentIndex,type:ox,key:fx})}),dn){var Cn=on.concat(fn),Rn,ax;sort$2(Cn,function(ox,sx){return ox.zlevel===sx.zlevel?ox.z-sx.z:ox.zlevel-sx.zlevel}),each$f(Cn,function(ox){var sx=tn.getComponent(ox.type,ox.idx),lx=ox.zlevel,cx=ox.key;Rn!=null&&(lx=Math.max(Rn,lx)),cx?(lx===Rn&&cx!==ax&&lx++,ax=cx):ax&&(lx===Rn&&lx++,ax=""),Rn=lx,sx.setZLevel(lx)})}}render=function(tn,on,fn,dn,Cn){s(on),renderComponents(tn,on,fn,dn,Cn),each$f(tn._chartsViews,function(Rn){Rn.__alive=!1}),renderSeries(tn,on,fn,dn,Cn),each$f(tn._chartsViews,function(Rn){Rn.__alive||Rn.remove(on,fn)})},renderComponents=function(tn,on,fn,dn,Cn,Rn){each$f(Rn||tn._componentsViews,function(ax){var ox=ax.__model;ar(ox,ax),ax.render(ox,on,fn,dn),d(ox,ax),en(ox,ax)})},renderSeries=function(tn,on,fn,dn,Cn,Rn){var ax=tn._scheduler;Cn=extend(Cn||{},{updatedSeries:on.getSeries()}),lifecycle.trigger("series:beforeupdate",on,fn,Cn);var ox=!1;on.eachSeries(function(sx){var lx=tn._chartsMap[sx.__viewId];lx.__alive=!0;var cx=lx.renderTask;ax.updatePayload(cx,dn),ar(sx,lx),Rn&&Rn.get(sx.uid)&&cx.dirty(),cx.perform(ax.getPerformArgs(cx))&&(ox=!0),lx.group.silent=!!sx.get("silent"),c(sx,lx),updateSeriesElementSelection(sx)}),ax.unfinished=ox||ax.unfinished,lifecycle.trigger("series:layoutlabels",on,fn,Cn),lifecycle.trigger("series:transition",on,fn,Cn),on.eachSeries(function(sx){var lx=tn._chartsMap[sx.__viewId];d(sx,lx),en(sx,lx)}),u(tn,on),lifecycle.trigger("series:afterupdate",on,fn,Cn)},markStatusToUpdate=function(tn){tn[STATUS_NEEDS_UPDATE_KEY]=!0,tn.getZr().wakeUp()},applyChangedStates=function(tn){tn[STATUS_NEEDS_UPDATE_KEY]&&(tn.getZr().storage.traverse(function(on){isElementRemoved(on)||l(on)}),tn[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(tn){for(var on=[],fn=tn.currentStates,dn=0;dn<fn.length;dn++){var Cn=fn[dn];Cn==="emphasis"||Cn==="blur"||Cn==="select"||on.push(Cn)}tn.selected&&tn.states.select&&on.push("select"),tn.hoverState===HOVER_STATE_EMPHASIS&&tn.states.emphasis?on.push("emphasis"):tn.hoverState===HOVER_STATE_BLUR&&tn.states.blur&&on.push("blur"),tn.useStates(on)}function u(tn,on){var fn=tn._zr,dn=fn.storage,Cn=0;dn.traverse(function(Rn){Rn.isGroup||Cn++}),Cn>on.get("hoverLayerThreshold")&&!env.node&&!env.worker&&on.eachSeries(function(Rn){if(!Rn.preventUsingHoverLayer){var ax=tn._chartsMap[Rn.__viewId];ax.__alive&&ax.eachRendered(function(ox){ox.states.emphasis&&(ox.states.emphasis.hoverLayer=!0)})}})}function c(tn,on){var fn=tn.get("blendMode")||null;on.eachRendered(function(dn){dn.isGroup||(dn.style.blend=fn)})}function d(tn,on){if(!tn.preventAutoZ){var fn=tn.get("z")||0,dn=tn.get("zlevel")||0;on.eachRendered(function(Cn){return Ct(Cn,fn,dn,-1/0),!0})}}function Ct(tn,on,fn,dn){var Cn=tn.getTextContent(),Rn=tn.getTextGuideLine(),ax=tn.isGroup;if(ax)for(var ox=tn.childrenRef(),sx=0;sx<ox.length;sx++)dn=Math.max(Ct(ox[sx],on,fn,dn),dn);else tn.z=on,tn.zlevel=fn,dn=Math.max(tn.z2,dn);if(Cn&&(Cn.z=on,Cn.zlevel=fn,isFinite(dn)&&(Cn.z2=dn+2)),Rn){var lx=tn.textGuideLineConfig;Rn.z=on,Rn.zlevel=fn,isFinite(dn)&&(Rn.z2=dn+(lx&&lx.showAbove?1:-1))}return dn}function ar(tn,on){on.eachRendered(function(fn){if(!isElementRemoved(fn)){var dn=fn.getTextContent(),Cn=fn.getTextGuideLine();fn.stateTransition&&(fn.stateTransition=null),dn&&dn.stateTransition&&(dn.stateTransition=null),Cn&&Cn.stateTransition&&(Cn.stateTransition=null),fn.hasState()?(fn.prevStates=fn.currentStates,fn.clearStates()):fn.prevStates&&(fn.prevStates=null)}})}function en(tn,on){var fn=tn.getModel("stateAnimation"),dn=tn.isAnimationEnabled(),Cn=fn.get("duration"),Rn=Cn>0?{duration:Cn,delay:fn.get("delay"),easing:fn.get("easing")}:null;on.eachRendered(function(ax){if(ax.states&&ax.states.emphasis){if(isElementRemoved(ax))return;if(ax instanceof Path&&savePathStates(ax),ax.__dirty){var ox=ax.prevStates;ox&&ax.useStates(ox)}if(dn){ax.stateTransition=Rn;var sx=ax.getTextContent(),lx=ax.getTextGuideLine();sx&&(sx.stateTransition=Rn),lx&&(lx.stateTransition=Rn)}ax.__dirty&&l(ax)}})}createExtensionAPI=function(tn){return new((function(on){__extends(fn,on);function fn(){return on!==null&&on.apply(this,arguments)||this}return fn.prototype.getCoordinateSystems=function(){return tn._coordSysMgr.getCoordinateSystems()},fn.prototype.getComponentByElement=function(dn){for(;dn;){var Cn=dn.__ecComponentInfo;if(Cn!=null)return tn._model.getComponent(Cn.mainType,Cn.index);dn=dn.parent}},fn.prototype.enterEmphasis=function(dn,Cn){enterEmphasis(dn,Cn),markStatusToUpdate(tn)},fn.prototype.leaveEmphasis=function(dn,Cn){leaveEmphasis(dn,Cn),markStatusToUpdate(tn)},fn.prototype.enterBlur=function(dn){enterBlur(dn),markStatusToUpdate(tn)},fn.prototype.leaveBlur=function(dn){leaveBlur(dn),markStatusToUpdate(tn)},fn.prototype.enterSelect=function(dn){enterSelect(dn),markStatusToUpdate(tn)},fn.prototype.leaveSelect=function(dn){leaveSelect(dn),markStatusToUpdate(tn)},fn.prototype.getModel=function(){return tn.getModel()},fn.prototype.getViewOfComponentModel=function(dn){return tn.getViewOfComponentModel(dn)},fn.prototype.getViewOfSeriesModel=function(dn){return tn.getViewOfSeriesModel(dn)},fn})(ExtensionAPI))(tn)},enableConnect=function(tn){function on(fn,dn){for(var Cn=0;Cn<fn.length;Cn++){var Rn=fn[Cn];Rn[CONNECT_STATUS_KEY]=dn}}each$f(eventActionMap,function(fn,dn){tn._messageCenter.on(dn,function(Cn){if(connectedGroups[tn.group]&&tn[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(Cn&&Cn.escapeConnect)return;var Rn=tn.makeActionFromEvent(Cn),ax=[];each$f(instances,function(ox){ox!==tn&&ox.group===tn.group&&ax.push(ox)}),on(ax,CONNECT_STATUS_PENDING),each$f(ax,function(ox){ox[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&ox.dispatchAction(Rn)}),on(ax,CONNECT_STATUS_UPDATED)}})})}})(),n})(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(t,n,a){var s=this;function l(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];n&&n.apply&&n.apply(this,u),s.off(t,l)}this.on.call(this,t,l,a)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(t){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(t,n,a){var s=!(a&&a.ssr);if(s){var l=getInstanceByDom(t);if(l)return l}var u=new ECharts(t,n,a);return u.id="ec_"+idBase++,instances[u.id]=u,s&&setAttribute(t,DOM_ATTRIBUTE_KEY,u.id),enableConnect(u),lifecycle.trigger("afterinit",u),u}function connect(t){if(isArray$1(t)){var n=t;t=null,each$f(n,function(a){a.group!=null&&(t=a.group)}),t=t||"g_"+groupIdBase++,each$f(n,function(a){a.group=t})}return connectedGroups[t]=!0,t}function disconnect(t){connectedGroups[t]=!1}var disConnect=disconnect;function dispose(t){isString$1(t)?t=instances[t]:t instanceof ECharts||(t=getInstanceByDom(t)),t instanceof ECharts&&!t.isDisposed()&&t.dispose()}function getInstanceByDom(t){return instances[getAttribute(t,DOM_ATTRIBUTE_KEY)]}function getInstanceById(t){return instances[t]}function registerTheme(t,n){themeStorage[t]=n}function registerPreprocessor(t){indexOf(optionPreprocessorFuncs,t)<0&&optionPreprocessorFuncs.push(t)}function registerProcessor(t,n){normalizeRegister(dataProcessorFuncs,t,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(t){registerUpdateLifecycle("afterinit",t)}function registerPostUpdate(t){registerUpdateLifecycle("afterupdate",t)}function registerUpdateLifecycle(t,n){lifecycle.on(t,n)}function registerAction(t,n,a){isFunction$1(n)&&(a=n,n="");var s=isObject$3(t)?t.type:[t,t={event:n}][0];t.event=(t.event||s).toLowerCase(),n=t.event,!eventActionMap[n]&&(assert(ACTION_REG.test(s)&&ACTION_REG.test(n)),actions[s]||(actions[s]={action:a,actionInfo:t}),eventActionMap[n]=s)}function registerCoordinateSystem(t,n){CoordinateSystemManager.register(t,n)}function getCoordinateSystemDimensions(t){var n=CoordinateSystemManager.get(t);if(n)return n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice()}function registerLayout(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(t,n,a,s,l){if((isFunction$1(n)||isObject$3(n))&&(a=n,n=s),!(indexOf(registeredTasks,a)>=0)){registeredTasks.push(a);var u=Scheduler.wrapStageHandler(a,l);u.__prio=n,u.__raw=a,t.push(u)}}function registerLoading(t,n){loadingEffects[t]=n}function setCanvasCreator(t){setPlatformAPI({createCanvas:t})}function registerMap$1(t,n,a){var s=getImpl("registerMap");s&&s(t,n,a)}function getMap(t){var n=getImpl("getMap");return n&&n(t)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(t){ComponentModel.registerClass(t)},registerComponentView:function(t){ComponentView.registerClass(t)},registerSeriesModel:function(t){SeriesModel.registerClass(t)},registerChartView:function(t){ChartView.registerClass(t)},registerSubTypeDefaulter:function(t,n){ComponentModel.registerSubTypeDefaulter(t,n)},registerPainter:function(t,n){registerPainter(t,n)}};function use(t){if(isArray$1(t)){each$f(t,function(n){use(n)});return}indexOf(extensions,t)>=0||(extensions.push(t),isFunction$1(t)&&(t={install:t}),t.install(extensionRegisters))}function dataIndexMapValueLength(t){return t==null?0:t.length||1}function defaultKeyGetter(t){return t}var DataDiffer=(function(){function t(n,a,s,l,u,c){this._old=n,this._new=a,this._oldKeyGetter=s||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=u,this._diffModeMultiple=c==="multiple"}return t.prototype.add=function(n){return this._add=n,this},t.prototype.update=function(n){return this._update=n,this},t.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},t.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},t.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},t.prototype.remove=function(n){return this._remove=n,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var n=this._old,a=this._new,s={},l=new Array(n.length),u=new Array(a.length);this._initIndexMap(n,null,l,"_oldKeyGetter"),this._initIndexMap(a,s,u,"_newKeyGetter");for(var c=0;c<n.length;c++){var d=l[c],Ct=s[d],ar=dataIndexMapValueLength(Ct);if(ar>1){var en=Ct.shift();Ct.length===1&&(s[d]=Ct[0]),this._update&&this._update(en,c)}else ar===1?(s[d]=null,this._update&&this._update(Ct,c)):this._remove&&this._remove(c)}this._performRestAdd(u,s)},t.prototype._executeMultiple=function(){var n=this._old,a=this._new,s={},l={},u=[],c=[];this._initIndexMap(n,s,u,"_oldKeyGetter"),this._initIndexMap(a,l,c,"_newKeyGetter");for(var d=0;d<u.length;d++){var Ct=u[d],ar=s[Ct],en=l[Ct],tn=dataIndexMapValueLength(ar),on=dataIndexMapValueLength(en);if(tn>1&&on===1)this._updateManyToOne&&this._updateManyToOne(en,ar),l[Ct]=null;else if(tn===1&&on>1)this._updateOneToMany&&this._updateOneToMany(en,ar),l[Ct]=null;else if(tn===1&&on===1)this._update&&this._update(en,ar),l[Ct]=null;else if(tn>1&&on>1)this._updateManyToMany&&this._updateManyToMany(en,ar),l[Ct]=null;else if(tn>1)for(var fn=0;fn<tn;fn++)this._remove&&this._remove(ar[fn]);else this._remove&&this._remove(ar)}this._performRestAdd(c,l)},t.prototype._performRestAdd=function(n,a){for(var s=0;s<n.length;s++){var l=n[s],u=a[l],c=dataIndexMapValueLength(u);if(c>1)for(var d=0;d<c;d++)this._add&&this._add(u[d]);else c===1&&this._add&&this._add(u);a[l]=null}},t.prototype._initIndexMap=function(n,a,s,l){for(var u=this._diffModeMultiple,c=0;c<n.length;c++){var d="_ec_"+this[l](n[c],c);if(u||(s[c]=d),!!a){var Ct=a[d],ar=dataIndexMapValueLength(Ct);ar===0?(a[d]=c,u&&s.push(d)):ar===1?a[d]=[Ct,c]:Ct.push(c)}}},t})(),DimensionUserOuput=(function(){function t(n,a){this._encode=n,this._schema=a}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t})();function summarizeDimensions(t,n){var a={},s=a.encode={},l=createHashMap(),u=[],c=[],d={};each$f(t.dimensions,function(on){var fn=t.getDimensionInfo(on),dn=fn.coordDim;if(dn){var Cn=fn.coordDimIndex;getOrCreateEncodeArr(s,dn)[Cn]=on,fn.isExtraCoord||(l.set(dn,1),mayLabelDimType(fn.type)&&(u[0]=on),getOrCreateEncodeArr(d,dn)[Cn]=t.getDimensionIndex(fn.name)),fn.defaultTooltip&&c.push(on)}VISUAL_DIMENSIONS.each(function(Rn,ax){var ox=getOrCreateEncodeArr(s,ax),sx=fn.otherDims[ax];sx!=null&&sx!==!1&&(ox[sx]=fn.name)})});var Ct=[],ar={};l.each(function(on,fn){var dn=s[fn];ar[fn]=dn[0],Ct=Ct.concat(dn)}),a.dataDimsOnCoord=Ct,a.dataDimIndicesOnCoord=map$1(Ct,function(on){return t.getDimensionInfo(on).storeDimIndex}),a.encodeFirstDimNotExtra=ar;var en=s.label;en&&en.length&&(u=en.slice());var tn=s.tooltip;return tn&&tn.length?c=tn.slice():c.length||(c=u.slice()),s.defaultedLabel=u,s.defaultedTooltip=c,a.userOutput=new DimensionUserOuput(d,n),a}function getOrCreateEncodeArr(t,n){return t.hasOwnProperty(n)||(t[n]=[]),t[n]}function getDimensionTypeByAxis(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function mayLabelDimType(t){return!(t==="ordinal"||t==="time")}var SeriesDimensionDefine=(function(){function t(n){this.otherDims={},n!=null&&extend(this,n)}return t})(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=(function(){function t(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},t.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},t.prototype.getSourceDimension=function(n){var a=this.source.dimensionsDefine;if(a)return a[n]},t.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,a=shouldRetrieveDataByName(this.source),s=!shouldOmitUnusedDimensions(n),l="",u=[],c=0,d=0;c<n;c++){var Ct=void 0,ar=void 0,en=void 0,tn=this.dimensions[d];if(tn&&tn.storeDimIndex===c)Ct=a?tn.name:null,ar=tn.type,en=tn.ordinalMeta,d++;else{var on=this.getSourceDimension(c);on&&(Ct=a?on.name:null,ar=on.type)}u.push({property:Ct,type:ar,ordinalMeta:en}),a&&Ct!=null&&(!tn||!tn.isCalculationCoord)&&(l+=s?Ct.replace(/\`/g,"`1").replace(/\$/g,"`2"):Ct),l+="$",l+=dimTypeShort[ar]||"f",en&&(l+=en.uid),l+="$"}var fn=this.source,dn=[fn.seriesLayoutBy,fn.startIndex,l].join("$$");return{dimensions:u,hash:dn}},t.prototype.makeOutputDimensionNames=function(){for(var n=[],a=0,s=0;a<this._fullDimCount;a++){var l=void 0,u=this.dimensions[s];if(u&&u.storeDimIndex===a)u.isCalculationCoord||(l=u.name),s++;else{var c=this.getSourceDimension(a);c&&(l=c.name)}n.push(l)}return n},t.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t})();function isSeriesDataSchema(t){return t instanceof SeriesDataSchema}function createDimNameMap(t){for(var n=createHashMap(),a=0;a<(t||[]).length;a++){var s=t[a],l=isObject$3(s)?s.name:s;l!=null&&n.get(l)==null&&n.set(l,a)}return n}function ensureSourceDimNameMap(t){var n=inner$h(t);return n.dimNameMap||(n.dimNameMap=createDimNameMap(t.dimensionsDefine))}function shouldOmitUnusedDimensions(t){return t>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=(function(){function t(n,a){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var s,l=!1;isSeriesDataSchema(n)?(s=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(l=!0,s=n),s=s||["x","y"];for(var u={},c=[],d={},Ct=!1,ar={},en=0;en<s.length;en++){var tn=s[en],on=isString$1(tn)?new SeriesDimensionDefine({name:tn}):tn instanceof SeriesDimensionDefine?tn:new SeriesDimensionDefine(tn),fn=on.name;on.type=on.type||"float",on.coordDim||(on.coordDim=fn,on.coordDimIndex=0);var dn=on.otherDims=on.otherDims||{};c.push(fn),u[fn]=on,ar[fn]!=null&&(Ct=!0),on.createInvertedIndices&&(d[fn]=[]),dn.itemName===0&&(this._nameDimIdx=en),dn.itemId===0&&(this._idDimIdx=en),l&&(on.storeDimIndex=en)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(Ct),this.hostModel=a,this._invertedIndicesMap=d,this._dimOmitted){var Cn=this._dimIdxToName=createHashMap();each$f(c,function(Rn){Cn.set(u[Rn].storeDimIndex,Rn)})}}return t.prototype.getDimension=function(n){var a=this._recognizeDimIndex(n);if(a==null)return n;if(a=n,!this._dimOmitted)return this.dimensions[a];var s=this._dimIdxToName.get(a);if(s!=null)return s;var l=this._schema.getSourceDimension(a);if(l)return l.name},t.prototype.getDimensionIndex=function(n){var a=this._recognizeDimIndex(n);if(a!=null)return a;if(n==null)return-1;var s=this._getDimInfo(n);return s?s.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},t.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},t.prototype._getStoreDimIndex=function(n){var a=this.getDimensionIndex(n);return a},t.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},t.prototype._initGetDimensionInfo=function(n){var a=this._dimInfos;this._getDimInfo=n?function(s){return a.hasOwnProperty(s)?a[s]:void 0}:function(s){return a[s]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(n,a){var s=this._dimSummary;if(a==null)return s.encodeFirstDimNotExtra[n];var l=s.encode[n];return l?l[a]:null},t.prototype.mapDimensionsAll=function(n){var a=this._dimSummary,s=a.encode[n];return(s||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(n,a,s){var l=this,u;if(n instanceof DataStore&&(u=n),!u){var c=this.dimensions,d=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,c.length):n;u=new DataStore;var Ct=map(c,function(ar){return{type:l._dimInfos[ar].type,property:ar}});u.initData(d,Ct,s)}this._store=u,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(n){var a=this._store.appendData(n);this._doInit(a[0],a[1])},t.prototype.appendValues=function(n,a){var s=this._store.appendValues(n,a&&a.length),l=s.start,u=s.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),a)for(var d=l;d<u;d++){var Ct=d-l;this._nameList[d]=a[Ct],c&&makeIdFromName(this,d)}},t.prototype._updateOrdinalMeta=function(){for(var n=this._store,a=this.dimensions,s=0;s<a.length;s++){var l=this._dimInfos[a[s]];l.ordinalMeta&&n.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},t.prototype._doInit=function(n,a){if(!(n>=a)){var s=this._store,l=s.getProvider();this._updateOrdinalMeta();var u=this._nameList,c=this._idList,d=l.getSource().sourceFormat,Ct=d===SOURCE_FORMAT_ORIGINAL;if(Ct&&!l.pure)for(var ar=[],en=n;en<a;en++){var tn=l.getItem(en,ar);if(!this.hasItemOption&&isDataItemOption(tn)&&(this.hasItemOption=!0),tn){var on=tn.name;u[en]==null&&on!=null&&(u[en]=convertOptionIdName(on,null));var fn=tn.id;c[en]==null&&fn!=null&&(c[en]=convertOptionIdName(fn,null))}}if(this._shouldMakeIdFromName())for(var en=n;en<a;en++)makeIdFromName(this,en);prepareInvertedIndex(this)}},t.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.setApproximateExtent=function(n,a){a=this.getDimension(a),this._approximateExtent[a]=n.slice()},t.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},t.prototype.setCalculationInfo=function(n,a){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=a},t.prototype.getName=function(n){var a=this.getRawIndex(n),s=this._nameList[a];return s==null&&this._nameDimIdx!=null&&(s=getIdNameFromStore(this,this._nameDimIdx,a)),s==null&&(s=""),s},t.prototype._getCategory=function(n,a){var s=this._store.get(n,a),l=this._store.getOrdinalMeta(n);return l?l.categories[s]:s},t.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(n,a){var s=this._store,l=this._dimInfos[n];if(l)return s.get(l.storeDimIndex,a)},t.prototype.getByRawIndex=function(n,a){var s=this._store,l=this._dimInfos[n];if(l)return s.getByRawIndex(l.storeDimIndex,a)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},t.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},t.prototype.getValues=function(n,a){var s=this,l=this._store;return isArray$1(n)?l.getValues(map(n,function(u){return s._getStoreDimIndex(u)}),a):l.getValues(n)},t.prototype.hasValue=function(n){for(var a=this._dimSummary.dataDimIndicesOnCoord,s=0,l=a.length;s<l;s++)if(isNaN(this._store.get(a[s],n)))return!1;return!0},t.prototype.indexOfName=function(n){for(var a=0,s=this._store.count();a<s;a++)if(this.getName(a)===n)return a;return-1},t.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},t.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},t.prototype.rawIndexOf=function(n,a){var s=n&&this._invertedIndicesMap[n],l=s&&s[a];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},t.prototype.indicesOfNearest=function(n,a,s){return this._store.indicesOfNearest(this._getStoreDimIndex(n),a,s)},t.prototype.each=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]);var l=s||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(u,l?bind$1(a,l):a)},t.prototype.filterSelf=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]);var l=s||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(u,l?bind$1(a,l):a),this},t.prototype.selectRange=function(n){var a=this,s={},l=keys(n);return each$f(l,function(u){var c=a._getStoreDimIndex(u);s[c]=n[u]}),this._store=this._store.selectRange(s),this},t.prototype.mapArray=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]),s=s||this;var l=[];return this.each(n,function(){l.push(a&&a.apply(this,arguments))},s),l},t.prototype.map=function(n,a,s,l){var u=s||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this),d=cloneListForMapAndSample(this);return d._store=this._store.map(c,u?bind$1(a,u):a),d},t.prototype.modify=function(n,a,s,l){var u=s||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(c,u?bind$1(a,u):a)},t.prototype.downSample=function(n,a,s,l){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(n),a,s,l),u},t.prototype.minmaxDownSample=function(n,a){var s=cloneListForMapAndSample(this);return s._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),a),s},t.prototype.lttbDownSample=function(n,a){var s=cloneListForMapAndSample(this);return s._store=this._store.lttbDownSample(this._getStoreDimIndex(n),a),s},t.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},t.prototype.getItemModel=function(n){var a=this.hostModel,s=this.getRawDataItem(n);return new Model(s,a,a&&a.ecModel)},t.prototype.diff=function(n){var a=this;return new DataDiffer(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(s){return getId(n,s)},function(s){return getId(a,s)})},t.prototype.getVisual=function(n){var a=this._visual;return a&&a[n]},t.prototype.setVisual=function(n,a){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=a},t.prototype.getItemVisual=function(n,a){var s=this._itemVisuals[n],l=s&&s[a];return l??this.getVisual(a)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(n,a){var s=this._itemVisuals,l=s[n];l||(l=s[n]={});var u=l[a];return u==null&&(u=this.getVisual(a),isArray$1(u)?u=u.slice():isObject$1(u)&&(u=extend({},u)),l[a]=u),u},t.prototype.setItemVisual=function(n,a,s){var l=this._itemVisuals[n]||{};this._itemVisuals[n]=l,isObject$1(a)?extend(l,a):l[a]=s},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(n,a){isObject$1(n)?extend(this._layout,n):this._layout[n]=a},t.prototype.getLayout=function(n){return this._layout[n]},t.prototype.getItemLayout=function(n){return this._itemLayouts[n]},t.prototype.setItemLayout=function(n,a,s){this._itemLayouts[n]=s?extend(this._itemLayouts[n]||{},a):a},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(n,a){var s=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(s,this.dataType,n,a),this._graphicEls[n]=a},t.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},t.prototype.eachItemGraphicEl=function(n,a){each$f(this._graphicEls,function(s,l){s&&n&&n.call(a,s,l)})},t.prototype.cloneShallow=function(n){return n||(n=new t(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},t.prototype.wrapMethod=function(n,a){var s=this[n];isFunction$1(s)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var l=s.apply(this,arguments);return a.apply(this,[l].concat(slice(arguments)))})},t.internalField=(function(){prepareInvertedIndex=function(n){var a=n._invertedIndicesMap;each$f(a,function(s,l){var u=n._dimInfos[l],c=u.ordinalMeta,d=n._store;if(c){s=a[l]=new CtorInt32Array(c.categories.length);for(var Ct=0;Ct<s.length;Ct++)s[Ct]=INDEX_NOT_FOUND;for(var Ct=0;Ct<d.count();Ct++)s[d.get(u.storeDimIndex,Ct)]=Ct}})},getIdNameFromStore=function(n,a,s){return convertOptionIdName(n._getCategory(a,s),null)},getId=function(n,a){var s=n._idList[a];return s==null&&n._idDimIdx!=null&&(s=getIdNameFromStore(n,n._idDimIdx,a)),s==null&&(s=ID_PREFIX+a),s},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var a=new t(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(a,n),a},transferProperties=function(n,a){each$f(TRANSFERABLE_PROPERTIES.concat(a.__wrappedMethods||[]),function(s){a.hasOwnProperty(s)&&(n[s]=a[s])}),n.__wrappedMethods=a.__wrappedMethods,each$f(CLONE_PROPERTIES,function(s){n[s]=clone$4(a[s])}),n._calculationInfo=extend({},a._calculationInfo)},makeIdFromName=function(n,a){var s=n._nameList,l=n._idList,u=n._nameDimIdx,c=n._idDimIdx,d=s[a],Ct=l[a];if(d==null&&u!=null&&(s[a]=d=getIdNameFromStore(n,u,a)),Ct==null&&c!=null&&(l[a]=Ct=getIdNameFromStore(n,c,a)),Ct==null&&d!=null){var ar=n._nameRepeatCount,en=ar[d]=(ar[d]||0)+1;Ct=d,en>1&&(Ct+="__ec__"+en),l[a]=Ct}}})(),t})();function createDimensions(t,n){return prepareSeriesDataSchema(t,n).dimensions}function prepareSeriesDataSchema(t,n){isSourceInstance(t)||(t=createSourceFromSeriesDataOption(t)),n=n||{};var a=n.coordDimensions||[],s=n.dimensionsDefine||t.dimensionsDefine||[],l=createHashMap(),u=[],c=getDimCount(t,a,s,n.dimensionsCount),d=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),Ct=s===t.dimensionsDefine,ar=Ct?ensureSourceDimNameMap(t):createDimNameMap(s),en=n.encodeDefine;!en&&n.encodeDefaulter&&(en=n.encodeDefaulter(t,c));for(var tn=createHashMap(en),on=new CtorInt32Array$1(c),fn=0;fn<on.length;fn++)on[fn]=-1;function dn(px){var hx=on[px];if(hx<0){var vx=s[px],yx=isObject$3(vx)?vx:{name:vx},Sx=new SeriesDimensionDefine,_x=yx.name;_x!=null&&ar.get(_x)!=null&&(Sx.name=Sx.displayName=_x),yx.type!=null&&(Sx.type=yx.type),yx.displayName!=null&&(Sx.displayName=yx.displayName);var Ex=u.length;return on[px]=Ex,Sx.storeDimIndex=px,u.push(Sx),Sx}return u[hx]}if(!d)for(var fn=0;fn<c;fn++)dn(fn);tn.each(function(px,hx){var vx=normalizeToArray(px).slice();if(vx.length===1&&!isString$1(vx[0])&&vx[0]<0){tn.set(hx,!1);return}var yx=tn.set(hx,[]);each$f(vx,function(Sx,_x){var Ex=isString$1(Sx)?ar.get(Sx):Sx;Ex!=null&&Ex<c&&(yx[_x]=Ex,Rn(dn(Ex),hx,_x))})});var Cn=0;each$f(a,function(px){var hx,vx,yx,Sx;if(isString$1(px))hx=px,Sx={};else{Sx=px,hx=Sx.name;var _x=Sx.ordinalMeta;Sx.ordinalMeta=null,Sx=extend({},Sx),Sx.ordinalMeta=_x,vx=Sx.dimsDef,yx=Sx.otherDims,Sx.name=Sx.coordDim=Sx.coordDimIndex=Sx.dimsDef=Sx.otherDims=null}var Ex=tn.get(hx);if(Ex!==!1){if(Ex=normalizeToArray(Ex),!Ex.length)for(var bx=0;bx<(vx&&vx.length||1);bx++){for(;Cn<c&&dn(Cn).coordDim!=null;)Cn++;Cn<c&&Ex.push(Cn++)}each$f(Ex,function(Ax,Mx){var Rx=dn(Ax);if(Ct&&Sx.type!=null&&(Rx.type=Sx.type),Rn(defaults(Rx,Sx),hx,Mx),Rx.name==null&&vx){var Cx=vx[Mx];!isObject$3(Cx)&&(Cx={name:Cx}),Rx.name=Rx.displayName=Cx.name,Rx.defaultTooltip=Cx.defaultTooltip}yx&&defaults(Rx.otherDims,yx)})}});function Rn(px,hx,vx){VISUAL_DIMENSIONS.get(hx)!=null?px.otherDims[hx]=vx:(px.coordDim=hx,px.coordDimIndex=vx,l.set(hx,!0))}var ax=n.generateCoord,ox=n.generateCoordCount,sx=ox!=null;ox=ax?ox||1:0;var lx=ax||"value";function cx(px){px.name==null&&(px.name=px.coordDim)}if(d)each$f(u,function(px){cx(px)}),u.sort(function(px,hx){return px.storeDimIndex-hx.storeDimIndex});else for(var fx=0;fx<c;fx++){var gx=dn(fx),mx=gx.coordDim;mx==null&&(gx.coordDim=genCoordDimName(lx,l,sx),gx.coordDimIndex=0,(!ax||ox<=0)&&(gx.isExtraCoord=!0),ox--),cx(gx),gx.type==null&&(guessOrdinal(t,fx)===BE_ORDINAL.Must||gx.isExtraCoord&&(gx.otherDims.itemName!=null||gx.otherDims.seriesName!=null))&&(gx.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:t,dimensions:u,fullDimensionCount:c,dimensionOmitted:d})}function removeDuplication(t){for(var n=createHashMap(),a=0;a<t.length;a++){var s=t[a],l=s.name,u=n.get(l)||0;u>0&&(s.name=l+(u-1)),u++,n.set(l,u)}}function getDimCount(t,n,a,s){var l=Math.max(t.dimensionsDetectedCount||1,n.length,a.length,s||0);return each$f(n,function(u){var c;isObject$3(u)&&(c=u.dimsDef)&&(l=Math.max(l,c.length))}),l}function genCoordDimName(t,n,a){if(a||n.hasKey(t)){for(var s=0;n.hasKey(t+s);)s++;t+=s}return n.set(t,!0),t}var CoordSysInfo=(function(){function t(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return t})();function getCoordSysInfoBySeries(t){var n=t.get("coordinateSystem"),a=new CoordSysInfo(n),s=fetchers[n];if(s)return s(t,a,a.axisMap,a.categoryAxisMap),a}var fetchers={cartesian2d:function(t,n,a,s){var l=t.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=t.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"],a.set("x",l),a.set("y",u),isCategory(l)&&(s.set("x",l),n.firstCategoryDimIndex=0),isCategory(u)&&(s.set("y",u),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(t,n,a,s){var l=t.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["single"],a.set("single",l),isCategory(l)&&(s.set("single",l),n.firstCategoryDimIndex=0)},polar:function(t,n,a,s){var l=t.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=l.findAxisModel("radiusAxis"),c=l.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],a.set("radius",u),a.set("angle",c),isCategory(u)&&(s.set("radius",u),n.firstCategoryDimIndex=0),isCategory(c)&&(s.set("angle",c),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(t,n,a,s){n.coordSysDims=["lng","lat"]},parallel:function(t,n,a,s){var l=t.ecModel,u=l.getComponent("parallel",t.get("parallelIndex")),c=n.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(d,Ct){var ar=l.getComponent("parallelAxis",d),en=c[Ct];a.set(en,ar),isCategory(ar)&&(s.set(en,ar),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=Ct))})}};function isCategory(t){return t.get("type")==="category"}function enableDataStack(t,n,a){a=a||{};var s=a.byIndex,l=a.stackedCoordDimension,u,c,d;isLegacyDimensionsInput(n)?u=n:(c=n.schema,u=c.dimensions,d=n.store);var Ct=!!(t&&t.get("stack")),ar,en,tn,on;if(each$f(u,function(ox,sx){isString$1(ox)&&(u[sx]=ox={name:ox}),Ct&&!ox.isExtraCoord&&(!s&&!ar&&ox.ordinalMeta&&(ar=ox),!en&&ox.type!=="ordinal"&&ox.type!=="time"&&(!l||l===ox.coordDim)&&(en=ox))}),en&&!s&&!ar&&(s=!0),en){tn="__\0ecstackresult_"+t.id,on="__\0ecstackedover_"+t.id,ar&&(ar.createInvertedIndices=!0);var fn=en.coordDim,dn=en.type,Cn=0;each$f(u,function(ox){ox.coordDim===fn&&Cn++});var Rn={name:tn,coordDim:fn,coordDimIndex:Cn,type:dn,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},ax={name:on,coordDim:on,coordDimIndex:Cn+1,type:dn,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};c?(d&&(Rn.storeDimIndex=d.ensureCalculationDimension(on,dn),ax.storeDimIndex=d.ensureCalculationDimension(tn,dn)),c.appendCalculationDimension(Rn),c.appendCalculationDimension(ax)):(u.push(Rn),u.push(ax))}return{stackedDimension:en&&en.name,stackedByDimension:ar&&ar.name,isStackedByIndex:s,stackedOverDimension:on,stackResultDimension:tn}}function isLegacyDimensionsInput(t){return!isSeriesDataSchema(t.schema)}function isDimensionStacked(t,n){return!!n&&n===t.getCalculationInfo("stackedDimension")}function getStackedDimension(t,n){return isDimensionStacked(t,n)?t.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(t,n){var a=t.get("coordinateSystem"),s=CoordinateSystemManager.get(a),l;return n&&n.coordSysDims&&(l=map$1(n.coordSysDims,function(u){var c={name:u},d=n.axisMap.get(u);if(d){var Ct=d.get("type");c.type=getDimensionTypeByAxis(Ct)}return c})),l||(l=s&&(s.getDimensionsInfo?s.getDimensionsInfo():s.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(t,n,a){var s,l;return a&&each$f(t,function(u,c){var d=u.coordDim,Ct=a.categoryAxisMap.get(d);Ct&&(s==null&&(s=c),u.ordinalMeta=Ct.getOrdinalMeta(),n&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(l=!0)}),!l&&s!=null&&(t[s].otherDims.itemName=0),s}function createSeriesData(t,n,a){a=a||{};var s=n.getSourceManager(),l,u=!1;t?(u=!0,l=createSourceFromSeriesDataOption(t)):(l=s.getSource(),u=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(n),d=getCoordSysDimDefs(n,c),Ct=a.useEncodeDefaulter,ar=isFunction$1(Ct)?Ct:Ct?curry$1(makeSeriesEncodeForAxisCoordSys,d,n):null,en={coordDimensions:d,generateCoord:a.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:ar,canOmitUnusedDimensions:!u},tn=prepareSeriesDataSchema(l,en),on=injectOrdinalMeta(tn.dimensions,a.createInvertedIndices,c),fn=u?null:s.getSharedDataStore(tn),dn=enableDataStack(n,{schema:tn,store:fn}),Cn=new SeriesData(tn,n);Cn.setCalculationInfo(dn);var Rn=on!=null&&isNeedCompleteOrdinalData(l)?function(ax,ox,sx,lx){return lx===on?sx:this.defaultDimValueGetter(ax,ox,sx,lx)}:null;return Cn.hasItemOption=!1,Cn.initData(u?l:fn,null,Rn),Cn}function isNeedCompleteOrdinalData(t){if(t.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(t.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(t){for(var n=0;n<t.length&&t[n]==null;)n++;return t[n]}var Scale=(function(){function t(n){this._setting=n||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(n){return this._setting[n]},t.prototype.unionExtent=function(n){var a=this._extent;n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1])},t.prototype.unionExtentFromData=function(n,a){this.unionExtent(n.getApproximateExtent(a))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(n,a){var s=this._extent;isNaN(n)||(s[0]=n),isNaN(a)||(s[1]=a)},t.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(n){this._isBlank=n},t})();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=(function(){function t(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase}return t.createByAxisModel=function(n){var a=n.option,s=a.data,l=s&&map$1(s,getName);return new t({categories:l,needCollect:!l,deduplication:a.dedplication!==!1})},t.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},t.prototype.parseAndCollect=function(n){var a,s=this._needCollect;if(!isString$1(n)&&!s)return n;if(s&&!this._deduplication)return a=this.categories.length,this.categories[a]=n,a;var l=this._getOrCreateMap();return a=l.get(n),a==null&&(s?(a=this.categories.length,this.categories[a]=n,l.set(n,a)):a=NaN),a},t.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},t})();function getName(t){return isObject$3(t)&&t.value!=null?t.value:t+""}function isIntervalOrLogScale(t){return t.type==="interval"||t.type==="log"}function intervalScaleNiceTicks(t,n,a,s){var l={},u=t[1]-t[0],c=l.interval=nice(u/n,!0);a!=null&&c<a&&(c=l.interval=a),s!=null&&c>s&&(c=l.interval=s);var d=l.intervalPrecision=getIntervalPrecision(c),Ct=l.niceTickExtent=[round$3(Math.ceil(t[0]/c)*c,d),round$3(Math.floor(t[1]/c)*c,d)];return fixExtent(Ct,t),l}function increaseInterval(t){var n=Math.pow(10,quantityExponent(t)),a=t/n;return a?a===2?a=3:a===3?a=5:a*=2:a=1,round$3(a*n)}function getIntervalPrecision(t){return getPrecision(t)+2}function clamp(t,n,a){t[n]=Math.max(Math.min(t[n],a[1]),a[0])}function fixExtent(t,n){!isFinite(t[0])&&(t[0]=n[0]),!isFinite(t[1])&&(t[1]=n[1]),clamp(t,0,n),clamp(t,1,n),t[0]>t[1]&&(t[0]=t[1])}function contain$1(t,n){return t>=n[0]&&t<=n[1]}function normalize$2(t,n){return n[1]===n[0]?.5:(t-n[0])/(n[1]-n[0])}function scale(t,n){return t*(n[1]-n[0])+n[0]}var OrdinalScale=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;s.type="ordinal";var l=s.getSetting("ordinalMeta");return l||(l=new OrdinalMeta({})),isArray$1(l)&&(l=new OrdinalMeta({categories:map$1(l,function(u){return isObject$3(u)?u.value:u})})),s._ordinalMeta=l,s._extent=s.getSetting("extent")||[0,l.categories.length-1],s}return n.prototype.parse=function(a){return a==null?NaN:isString$1(a)?this._ordinalMeta.getOrdinal(a):Math.round(a)},n.prototype.contain=function(a){return a=this.parse(a),contain$1(a,this._extent)&&this._ordinalMeta.categories[a]!=null},n.prototype.normalize=function(a){return a=this._getTickNumber(this.parse(a)),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=Math.round(scale(a,this._extent)),this.getRawOrdinalNumber(a)},n.prototype.getTicks=function(){for(var a=[],s=this._extent,l=s[0];l<=s[1];)a.push({value:l}),l++;return a},n.prototype.getMinorTicks=function(a){},n.prototype.setSortInfo=function(a){if(a==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var s=a.ordinalNumbers,l=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],c=0,d=this._ordinalMeta.categories.length,Ct=Math.min(d,s.length);c<Ct;++c){var ar=s[c];l[c]=ar,u[ar]=c}for(var en=0;c<d;++c){for(;u[en]!=null;)en++;l.push(en),u[en]=c}},n.prototype._getTickNumber=function(a){var s=this._ticksByOrdinalNumber;return s&&a>=0&&a<s.length?s[a]:a},n.prototype.getRawOrdinalNumber=function(a){var s=this._ordinalNumbersByTick;return s&&a>=0&&a<s.length?s[a]:a},n.prototype.getLabel=function(a){if(!this.isBlank()){var s=this.getRawOrdinalNumber(a.value),l=this._ordinalMeta.categories[s];return l==null?"":l+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},n.prototype.isInExtentRange=function(a){return a=this._getTickNumber(a),this._extent[0]<=a&&this._extent[1]>=a},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n})(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="interval",a._interval=0,a._intervalPrecision=2,a}return n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return contain$1(a,this._extent)},n.prototype.normalize=function(a){return normalize$2(a,this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.prototype.setExtent=function(a,s){var l=this._extent;isNaN(a)||(l[0]=parseFloat(a)),isNaN(s)||(l[1]=parseFloat(s))},n.prototype.unionExtent=function(a){var s=this._extent;a[0]<s[0]&&(s[0]=a[0]),a[1]>s[1]&&(s[1]=a[1]),this.setExtent(s[0],s[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(a)},n.prototype.getTicks=function(a){var s=this._interval,l=this._extent,u=this._niceExtent,c=this._intervalPrecision,d=[];if(!s)return d;var Ct=1e4;l[0]<u[0]&&(a?d.push({value:roundNumber(u[0]-s,c)}):d.push({value:l[0]}));for(var ar=u[0];ar<=u[1]&&(d.push({value:ar}),ar=roundNumber(ar+s,c),ar!==d[d.length-1].value);)if(d.length>Ct)return[];var en=d.length?d[d.length-1].value:u[1];return l[1]>en&&(a?d.push({value:roundNumber(en+s,c)}):d.push({value:l[1]})),d},n.prototype.getMinorTicks=function(a){for(var s=this.getTicks(!0),l=[],u=this.getExtent(),c=1;c<s.length;c++){for(var d=s[c],Ct=s[c-1],ar=0,en=[],tn=d.value-Ct.value,on=tn/a;ar<a-1;){var fn=roundNumber(Ct.value+(ar+1)*on);fn>u[0]&&fn<u[1]&&en.push(fn),ar++}l.push(en)}return l},n.prototype.getLabel=function(a,s){if(a==null)return"";var l=s&&s.precision;l==null?l=getPrecision(a.value)||0:l==="auto"&&(l=this._intervalPrecision);var u=roundNumber(a.value,l,!0);return addCommas(u)},n.prototype.calcNiceTicks=function(a,s,l){a=a||5;var u=this._extent,c=u[1]-u[0];if(isFinite(c)){c<0&&(c=-c,u.reverse());var d=intervalScaleNiceTicks(u,a,s,l);this._intervalPrecision=d.intervalPrecision,this._interval=d.interval,this._niceExtent=d.niceTickExtent}},n.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1])if(s[0]!==0){var l=Math.abs(s[0]);a.fixMax||(s[1]+=l/2),s[0]-=l/2}else s[1]=1;var u=s[1]-s[0];isFinite(u)||(s[0]=0,s[1]=1),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval);var c=this._interval;a.fixMin||(s[0]=roundNumber(Math.floor(s[0]/c)*c)),a.fixMax||(s[1]=roundNumber(Math.ceil(s[1]/c)*c))},n.prototype.setNiceExtent=function(a,s){this._niceExtent=[a,s]},n.type="interval",n})(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(t){return isArray$1(t)?supportFloat32Array?new Float32Array(t):t:new Float32ArrayCtor(t)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(t){return t.get("stack")||STACK_PREFIX+t.seriesIndex}function getAxisKey$1(t){return t.dim+t.index}function getLayoutOnAxis(t){var n=[],a=t.axis,s="axis0";if(a.type==="category"){for(var l=a.getBandWidth(),u=0;u<t.count;u++)n.push(defaults({bandWidth:l,axisKey:s,stackId:STACK_PREFIX+u},t));for(var c=doCalBarWidthAndOffset(n),d=[],u=0;u<t.count;u++){var Ct=c[s][STACK_PREFIX+u];Ct.offsetCenter=Ct.offset+Ct.width/2,d.push(Ct)}return d}}function prepareLayoutBarSeries(t,n){var a=[];return n.eachSeriesByType(t,function(s){isOnCartesian(s)&&a.push(s)}),a}function getValueAxesMinGaps(t){var n={};each$f(t,function(Ct){var ar=Ct.coordinateSystem,en=ar.getBaseAxis();if(!(en.type!=="time"&&en.type!=="value"))for(var tn=Ct.getData(),on=en.dim+"_"+en.index,fn=tn.getDimensionIndex(tn.mapDimension(en.dim)),dn=tn.getStore(),Cn=0,Rn=dn.count();Cn<Rn;++Cn){var ax=dn.get(fn,Cn);n[on]?n[on].push(ax):n[on]=[ax]}});var a={};for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];if(l){l.sort(function(Ct,ar){return Ct-ar});for(var u=null,c=1;c<l.length;++c){var d=l[c]-l[c-1];d>0&&(u=u===null?d:Math.min(u,d))}a[s]=u}}return a}function makeColumnLayout(t){var n=getValueAxesMinGaps(t),a=[];return each$f(t,function(s){var l=s.coordinateSystem,u=l.getBaseAxis(),c=u.getExtent(),d;if(u.type==="category")d=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var Ct=u.dim+"_"+u.index,ar=n[Ct],en=Math.abs(c[1]-c[0]),tn=u.scale.getExtent(),on=Math.abs(tn[1]-tn[0]);d=ar?en/on*ar:en}else{var fn=s.getData();d=Math.abs(c[1]-c[0])/fn.count()}var dn=parsePercent(s.get("barWidth"),d),Cn=parsePercent(s.get("barMaxWidth"),d),Rn=parsePercent(s.get("barMinWidth")||(isInLargeMode(s)?.5:1),d),ax=s.get("barGap"),ox=s.get("barCategoryGap");a.push({bandWidth:d,barWidth:dn,barMaxWidth:Cn,barMinWidth:Rn,barGap:ax,barCategoryGap:ox,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(s)})}),doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(t){var n={};each$f(t,function(s,l){var u=s.axisKey,c=s.bandWidth,d=n[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},Ct=d.stacks;n[u]=d;var ar=s.stackId;Ct[ar]||d.autoWidthCount++,Ct[ar]=Ct[ar]||{width:0,maxWidth:0};var en=s.barWidth;en&&!Ct[ar].width&&(Ct[ar].width=en,en=Math.min(d.remainedWidth,en),d.remainedWidth-=en);var tn=s.barMaxWidth;tn&&(Ct[ar].maxWidth=tn);var on=s.barMinWidth;on&&(Ct[ar].minWidth=on);var fn=s.barGap;fn!=null&&(d.gap=fn);var dn=s.barCategoryGap;dn!=null&&(d.categoryGap=dn)});var a={};return each$f(n,function(s,l){a[l]={};var u=s.stacks,c=s.bandWidth,d=s.categoryGap;if(d==null){var Ct=keys(u).length;d=Math.max(35-Ct*4,15)+"%"}var ar=parsePercent(d,c),en=parsePercent(s.gap,1),tn=s.remainedWidth,on=s.autoWidthCount,fn=(tn-ar)/(on+(on-1)*en);fn=Math.max(fn,0),each$f(u,function(ax){var ox=ax.maxWidth,sx=ax.minWidth;if(ax.width){var lx=ax.width;ox&&(lx=Math.min(lx,ox)),sx&&(lx=Math.max(lx,sx)),ax.width=lx,tn-=lx+en*lx,on--}else{var lx=fn;ox&&ox<lx&&(lx=Math.min(ox,tn)),sx&&sx>lx&&(lx=sx),lx!==fn&&(ax.width=lx,tn-=lx+en*lx,on--)}}),fn=(tn-ar)/(on+(on-1)*en),fn=Math.max(fn,0);var dn=0,Cn;each$f(u,function(ax,ox){ax.width||(ax.width=fn),Cn=ax,dn+=ax.width*(1+en)}),Cn&&(dn-=Cn.width*en);var Rn=-dn/2;each$f(u,function(ax,ox){a[l][ox]=a[l][ox]||{bandWidth:c,offset:Rn,width:ax.width},Rn+=ax.width*(1+en)})}),a}function retrieveColumnLayout(t,n,a){if(t&&n){var s=t[getAxisKey$1(n)];return s}}function layout$3(t,n){var a=prepareLayoutBarSeries(t,n),s=makeColumnLayout(a);each$f(a,function(l){var u=l.getData(),c=l.coordinateSystem,d=c.getBaseAxis(),Ct=getSeriesStackId$1(l),ar=s[getAxisKey$1(d)][Ct],en=ar.offset,tn=ar.width;u.setLayout({bandWidth:ar.bandWidth,offset:en,size:tn})})}function createProgressiveLayout(t){return{seriesType:t,plan:createRenderPlanner(),reset:function(n){if(isOnCartesian(n)){var a=n.getData(),s=n.coordinateSystem,l=s.getBaseAxis(),u=s.getOtherAxis(l),c=a.getDimensionIndex(a.mapDimension(u.dim)),d=a.getDimensionIndex(a.mapDimension(l.dim)),Ct=n.get("showBackground",!0),ar=a.mapDimension(u.dim),en=a.getCalculationInfo("stackResultDimension"),tn=isDimensionStacked(a,ar)&&!!a.getCalculationInfo("stackedOnSeries"),on=u.isHorizontal(),fn=getValueAxisStart(l,u),dn=isInLargeMode(n),Cn=n.get("barMinHeight")||0,Rn=en&&a.getDimensionIndex(en),ax=a.getLayout("size"),ox=a.getLayout("offset");return{progress:function(sx,lx){for(var cx=sx.count,fx=dn&&createFloat32Array(cx*3),gx=dn&&Ct&&createFloat32Array(cx*3),mx=dn&&createFloat32Array(cx),px=s.master.getRect(),hx=on?px.width:px.height,vx,yx=lx.getStore(),Sx=0;(vx=sx.next())!=null;){var _x=yx.get(tn?Rn:c,vx),Ex=yx.get(d,vx),bx=fn,Ax=void 0;tn&&(Ax=+_x-yx.get(c,vx));var Mx=void 0,Rx=void 0,Cx=void 0,Lx=void 0;if(on){var qx=s.dataToPoint([_x,Ex]);if(tn){var Ix=s.dataToPoint([Ax,Ex]);bx=Ix[0]}Mx=bx,Rx=qx[1]+ox,Cx=qx[0]-bx,Lx=ax,Math.abs(Cx)<Cn&&(Cx=(Cx<0?-1:1)*Cn)}else{var qx=s.dataToPoint([Ex,_x]);if(tn){var Ix=s.dataToPoint([Ex,Ax]);bx=Ix[1]}Mx=qx[0]+ox,Rx=bx,Cx=ax,Lx=qx[1]-bx,Math.abs(Lx)<Cn&&(Lx=(Lx<=0?-1:1)*Cn)}dn?(fx[Sx]=Mx,fx[Sx+1]=Rx,fx[Sx+2]=on?Cx:Lx,gx&&(gx[Sx]=on?px.x:Mx,gx[Sx+1]=on?Rx:px.y,gx[Sx+2]=hx),mx[vx]=vx):lx.setItemLayout(vx,{x:Mx,y:Rx,width:Cx,height:Lx}),Sx+=3}dn&&lx.setLayout({largePoints:fx,largeDataIndices:mx,largeBackgroundPoints:gx,valueAxisHorizontal:on})}}}}}}function isOnCartesian(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function isInLargeMode(t){return t.pipelineContext&&t.pipelineContext.large}function getValueAxisStart(t,n){var a=n.model.get("startValue");return a||(a=0),n.toGlobalCoord(n.dataToCoord(n.type==="log"?a>0?a:1:a))}var bisect=function(t,n,a,s){for(;a<s;){var l=a+s>>>1;t[l][1]<n?a=l+1:s=l}return a},TimeScale=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="time",s}return n.prototype.getLabel=function(a){var s=this.getSetting("useUTC");return format$1(a.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,s,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(a,s,l){var u=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(a,s,l,c,u)},n.prototype.getTicks=function(){var a=this._interval,s=this._extent,l=[];if(!a)return l;l.push({value:s[0],level:0});var u=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,s);return l=l.concat(c),l.push({value:s[1],level:0}),l},n.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1]&&(s[0]-=ONE_DAY,s[1]+=ONE_DAY),s[1]===-1/0&&s[0]===1/0){var l=new Date;s[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),s[0]=s[1]-ONE_DAY}this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval)},n.prototype.calcNiceTicks=function(a,s,l){a=a||10;var u=this._extent,c=u[1]-u[0];this._approxInterval=c/a,s!=null&&this._approxInterval<s&&(this._approxInterval=s),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var d=scaleIntervals.length,Ct=Math.min(bisect(scaleIntervals,this._approxInterval,0,d),d-1);this._interval=scaleIntervals[Ct][1],this._minLevelUnit=scaleIntervals[Math.max(Ct-1,0)][0]},n.prototype.parse=function(a){return isNumber(a)?a:+parseDate(a)},n.prototype.contain=function(a){return contain$1(this.parse(a),this._extent)},n.prototype.normalize=function(a){return normalize$2(this.parse(a),this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.type="time",n})(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(t,n,a,s){var l=parseDate(n),u=parseDate(a),c=function(dn){return getUnitValue(l,dn,s)===getUnitValue(u,dn,s)},d=function(){return c("year")},Ct=function(){return d()&&c("month")},ar=function(){return Ct()&&c("day")},en=function(){return ar()&&c("hour")},tn=function(){return en()&&c("minute")},on=function(){return tn()&&c("second")},fn=function(){return on()&&c("millisecond")};switch(t){case"year":return d();case"month":return Ct();case"day":return ar();case"hour":return en();case"minute":return tn();case"second":return on();case"millisecond":return fn()}}function getDateInterval(t,n){return t/=ONE_DAY,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function getMonthInterval(t){var n=30*ONE_DAY;return t/=n,t>6?6:t>3?3:t>2?2:1}function getHourInterval(t){return t/=ONE_HOUR,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function getMinutesAndSecondsInterval(t,n){return t/=n?ONE_MINUTE:ONE_SECOND,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function getMillisecondsInterval(t){return nice(t,!0)}function getFirstTimestampOfUnit(t,n,a){var s=new Date(t);switch(getPrimaryTimeUnit(n)){case"year":case"month":s[monthSetterName(a)](0);case"day":s[dateSetterName(a)](1);case"hour":s[hoursSetterName(a)](0);case"minute":s[minutesSetterName(a)](0);case"second":s[secondsSetterName(a)](0),s[millisecondsSetterName(a)](0)}return s.getTime()}function getIntervalTicks(t,n,a,s){var l=1e4,u=timeUnits,c=0;function d(hx,vx,yx,Sx,_x,Ex,bx){for(var Ax=new Date(vx),Mx=vx,Rx=Ax[Sx]();Mx<yx&&Mx<=s[1];)bx.push({value:Mx}),Rx+=hx,Ax[_x](Rx),Mx=Ax.getTime();bx.push({value:Mx,notAdd:!0})}function Ct(hx,vx,yx){var Sx=[],_x=!vx.length;if(!isUnitValueSame(getPrimaryTimeUnit(hx),s[0],s[1],a)){_x&&(vx=[{value:getFirstTimestampOfUnit(new Date(s[0]),hx,a)},{value:s[1]}]);for(var Ex=0;Ex<vx.length-1;Ex++){var bx=vx[Ex].value,Ax=vx[Ex+1].value;if(bx!==Ax){var Mx=void 0,Rx=void 0,Cx=void 0,Lx=!1;switch(hx){case"year":Mx=Math.max(1,Math.round(n/ONE_DAY/365)),Rx=fullYearGetterName(a),Cx=fullYearSetterName(a);break;case"half-year":case"quarter":case"month":Mx=getMonthInterval(n),Rx=monthGetterName(a),Cx=monthSetterName(a);break;case"week":case"half-week":case"day":Mx=getDateInterval(n),Rx=dateGetterName(a),Cx=dateSetterName(a),Lx=!0;break;case"half-day":case"quarter-day":case"hour":Mx=getHourInterval(n),Rx=hoursGetterName(a),Cx=hoursSetterName(a);break;case"minute":Mx=getMinutesAndSecondsInterval(n,!0),Rx=minutesGetterName(a),Cx=minutesSetterName(a);break;case"second":Mx=getMinutesAndSecondsInterval(n,!1),Rx=secondsGetterName(a),Cx=secondsSetterName(a);break;case"millisecond":Mx=getMillisecondsInterval(n),Rx=millisecondsGetterName(a),Cx=millisecondsSetterName(a);break}d(Mx,bx,Ax,Rx,Cx,Lx,Sx),hx==="year"&&yx.length>1&&Ex===0&&yx.unshift({value:yx[0].value-Mx})}}for(var Ex=0;Ex<Sx.length;Ex++)yx.push(Sx[Ex]);return Sx}}for(var ar=[],en=[],tn=0,on=0,fn=0;fn<u.length&&c++<l;++fn){var dn=getPrimaryTimeUnit(u[fn]);if(isPrimaryTimeUnit(u[fn])){Ct(u[fn],ar[ar.length-1]||[],en);var Cn=u[fn+1]?getPrimaryTimeUnit(u[fn+1]):null;if(dn!==Cn){if(en.length){on=tn,en.sort(function(hx,vx){return hx.value-vx.value});for(var Rn=[],ax=0;ax<en.length;++ax){var ox=en[ax].value;(ax===0||en[ax-1].value!==ox)&&(Rn.push(en[ax]),ox>=s[0]&&ox<=s[1]&&tn++)}var sx=(s[1]-s[0])/n;if(tn>sx*1.5&&on>sx/1.5||(ar.push(Rn),tn>sx||t===u[fn]))break}en=[]}}}for(var lx=filter(map$1(ar,function(hx){return filter(hx,function(vx){return vx.value>=s[0]&&vx.value<=s[1]&&!vx.notAdd})}),function(hx){return hx.length>0}),cx=[],fx=lx.length-1,fn=0;fn<lx.length;++fn)for(var gx=lx[fn],mx=0;mx<gx.length;++mx)cx.push({value:gx[mx].value,level:fx-fn});cx.sort(function(hx,vx){return hx.value-vx.value});for(var px=[],fn=0;fn<cx.length;++fn)(fn===0||cx[fn].value!==cx[fn-1].value)&&px.push(cx[fn]);return px}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="log",a.base=10,a._originalScale=new IntervalScale,a._interval=0,a}return n.prototype.getTicks=function(a){var s=this._originalScale,l=this._extent,u=s.getExtent(),c=intervalScaleProto.getTicks.call(this,a);return map$1(c,function(d){var Ct=d.value,ar=round$3(mathPow$1(this.base,Ct));return ar=Ct===l[0]&&this._fixMin?fixRoundingError(ar,u[0]):ar,ar=Ct===l[1]&&this._fixMax?fixRoundingError(ar,u[1]):ar,{value:ar}},this)},n.prototype.setExtent=function(a,s){var l=mathLog$1(this.base);a=mathLog$1(Math.max(0,a))/l,s=mathLog$1(Math.max(0,s))/l,intervalScaleProto.setExtent.call(this,a,s)},n.prototype.getExtent=function(){var a=this.base,s=scaleProto.getExtent.call(this);s[0]=mathPow$1(a,s[0]),s[1]=mathPow$1(a,s[1]);var l=this._originalScale,u=l.getExtent();return this._fixMin&&(s[0]=fixRoundingError(s[0],u[0])),this._fixMax&&(s[1]=fixRoundingError(s[1],u[1])),s},n.prototype.unionExtent=function(a){this._originalScale.unionExtent(a);var s=this.base;a[0]=mathLog$1(a[0])/mathLog$1(s),a[1]=mathLog$1(a[1])/mathLog$1(s),scaleProto.unionExtent.call(this,a)},n.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},n.prototype.calcNiceTicks=function(a){a=a||10;var s=this._extent,l=s[1]-s[0];if(!(l===1/0||l<=0)){var u=quantity(l),c=a/l*u;for(c<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var d=[round$3(mathCeil$1(s[0]/u)*u),round$3(mathFloor$1(s[1]/u)*u)];this._interval=u,this._niceExtent=d}},n.prototype.calcNiceExtent=function(a){intervalScaleProto.calcNiceExtent.call(this,a),this._fixMin=a.fixMin,this._fixMax=a.fixMax},n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return a=mathLog$1(a)/mathLog$1(this.base),contain$1(a,this._extent)},n.prototype.normalize=function(a){return a=mathLog$1(a)/mathLog$1(this.base),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=scale(a,this._extent),mathPow$1(this.base,a)},n.type="log",n})(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(t,n){return roundingErrorFix(t,getPrecision(n))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=(function(){function t(n,a,s){this._prepareParams(n,a,s)}return t.prototype._prepareParams=function(n,a,s){s[1]<s[0]&&(s=[NaN,NaN]),this._dataMin=s[0],this._dataMax=s[1];var l=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&a.getNeedCrossZero&&a.getNeedCrossZero();var u=a.get("min",!0);u==null&&(u=a.get("startValue",!0));var c=this._modelMinRaw=u;isFunction$1(c)?this._modelMinNum=parseAxisModelMinMax(n,c({min:s[0],max:s[1]})):c!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,c));var d=this._modelMaxRaw=a.get("max",!0);if(isFunction$1(d)?this._modelMaxNum=parseAxisModelMinMax(n,d({min:s[0],max:s[1]})):d!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,d)),l)this._axisDataLen=a.getCategories().length;else{var Ct=a.get("boundaryGap"),ar=isArray$1(Ct)?Ct:[Ct||0,Ct||0];typeof ar[0]=="boolean"||typeof ar[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(ar[0],1),parsePercent$1(ar[1],1)]}},t.prototype.calculate=function(){var n=this._isOrdinal,a=this._dataMin,s=this._dataMax,l=this._axisDataLen,u=this._boundaryGapInner,c=n?null:s-a||Math.abs(a),d=this._modelMinRaw==="dataMin"?a:this._modelMinNum,Ct=this._modelMaxRaw==="dataMax"?s:this._modelMaxNum,ar=d!=null,en=Ct!=null;d==null&&(d=n?l?0:NaN:a-u[0]*c),Ct==null&&(Ct=n?l?l-1:NaN:s+u[1]*c),(d==null||!isFinite(d))&&(d=NaN),(Ct==null||!isFinite(Ct))&&(Ct=NaN);var tn=eqNaN(d)||eqNaN(Ct)||n&&!l;this._needCrossZero&&(d>0&&Ct>0&&!ar&&(d=0),d<0&&Ct<0&&!en&&(Ct=0));var on=this._determinedMin,fn=this._determinedMax;return on!=null&&(d=on,ar=!0),fn!=null&&(Ct=fn,en=!0),{min:d,max:Ct,minFixed:ar,maxFixed:en,isBlank:tn}},t.prototype.modifyDataMinMax=function(n,a){this[DATA_MIN_MAX_ATTR[n]]=a},t.prototype.setDeterminedMinMax=function(n,a){var s=DETERMINED_MIN_MAX_ATTR[n];this[s]=a},t.prototype.freeze=function(){this.frozen=!0},t})(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(t,n,a){var s=t.rawExtentInfo;return s||(s=new ScaleRawExtentInfo(t,n,a),t.rawExtentInfo=s,s)}function parseAxisModelMinMax(t,n){return n==null?null:eqNaN(n)?NaN:t.parse(n)}function getScaleExtent(t,n){var a=t.type,s=ensureScaleRawExtentInfo(t,n,t.getExtent()).calculate();t.setBlank(s.isBlank);var l=s.min,u=s.max,c=n.ecModel;if(c&&a==="time"){var d=prepareLayoutBarSeries("bar",c),Ct=!1;if(each$f(d,function(tn){Ct=Ct||tn.getBaseAxis()===n.axis}),Ct){var ar=makeColumnLayout(d),en=adjustScaleForOverflow(l,u,n,ar);l=en.min,u=en.max}}return{extent:[l,u],fixMin:s.minFixed,fixMax:s.maxFixed}}function adjustScaleForOverflow(t,n,a,s){var l=a.axis.getExtent(),u=Math.abs(l[1]-l[0]),c=retrieveColumnLayout(s,a.axis);if(c===void 0)return{min:t,max:n};var d=1/0;each$f(c,function(fn){d=Math.min(fn.offset,d)});var Ct=-1/0;each$f(c,function(fn){Ct=Math.max(fn.offset+fn.width,Ct)}),d=Math.abs(d),Ct=Math.abs(Ct);var ar=d+Ct,en=n-t,tn=1-(d+Ct)/u,on=en/tn-en;return n+=on*(Ct/ar),t-=on*(d/ar),{min:t,max:n}}function niceScaleExtent(t,n){var a=n,s=getScaleExtent(t,a),l=s.extent,u=a.get("splitNumber");t instanceof LogScale&&(t.base=a.get("logBase"));var c=t.type,d=a.get("interval"),Ct=c==="interval"||c==="time";t.setExtent(l[0],l[1]),t.calcNiceExtent({splitNumber:u,fixMin:s.fixMin,fixMax:s.fixMax,minInterval:Ct?a.get("minInterval"):null,maxInterval:Ct?a.get("maxInterval"):null}),d!=null&&t.setInterval&&t.setInterval(d)}function createScaleByModel$1(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Scale.getClass(n)||IntervalScale)}}function ifAxisCrossZero(t){var n=t.scale.getExtent(),a=n[0],s=n[1];return!(a>0&&s>0||a<0&&s<0)}function makeLabelFormatter(t){var n=t.getLabelModel().get("formatter"),a=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?(function(s){return function(l,u){return t.scale.getFormattedLabel(l,u,s)}})(n):isString$1(n)?(function(s){return function(l){var u=t.scale.getLabel(l),c=s.replace("{value}",u??"");return c}})(n):isFunction$1(n)?(function(s){return function(l,u){return a!=null&&(u=l.value-a),s(getAxisRawValue(t,l),u,l.level!=null?{level:l.level}:null)}})(n):function(s){return t.scale.getLabel(s)}}function getAxisRawValue(t,n){return t.type==="category"?t.scale.getLabel(n):n.value}function estimateLabelUnionRect(t){var n=t.model,a=t.scale;if(!(!n.get(["axisLabel","show"])||a.isBlank())){var s,l,u=a.getExtent();a instanceof OrdinalScale?l=a.count():(s=a.getTicks(),l=s.length);var c=t.getLabelModel(),d=makeLabelFormatter(t),Ct,ar=1;l>40&&(ar=Math.ceil(l/40));for(var en=0;en<l;en+=ar){var tn=s?s[en]:{value:u[0]+en},on=d(tn,en),fn=c.getTextRect(on),dn=rotateTextRect(fn,c.get("rotate")||0);Ct?Ct.union(dn):Ct=dn}return Ct}}function rotateTextRect(t,n){var a=n*Math.PI/180,s=t.width,l=t.height,u=s*Math.abs(Math.cos(a))+Math.abs(l*Math.sin(a)),c=s*Math.abs(Math.sin(a))+Math.abs(l*Math.cos(a)),d=new BoundingRect(t.x,t.y,u,c);return d}function getOptionCategoryInterval(t){var n=t.get("interval");return n??"auto"}function shouldShowAllLabels(t){return t.type==="category"&&getOptionCategoryInterval(t.getLabelModel())===0}function getDataDimensionsOnAxis(t,n){var a={};return each$f(t.mapDimensionsAll(n),function(s){a[getStackedDimension(t,s)]=!0}),keys(a)}function unionAxisExtentFromData(t,n,a){n&&each$f(getDataDimensionsOnAxis(n,a),function(s){var l=n.getApproximateExtent(s);l[0]<t[0]&&(t[0]=l[0]),l[1]>t[1]&&(t[1]=l[1])})}var AxisModelCommonMixin=(function(){function t(){}return t.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},t.prototype.getCoordSysModel=function(){},t})();function createList$2(t){return createSeriesData(null,t)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(t,n){var a=n;n instanceof Model||(a=new Model(n));var s=createScaleByModel$1(a);return s.setExtent(t[0],t[1]),niceScaleExtent(s,a),s}function mixinAxisModelCommonMethods(t){mixin(t,AxisModelCommonMixin)}function createTextStyle(t,n){return n=n||{},createTextStyle$1(t,null,null,n.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(t,n){return Math.abs(t-n)<EPSILON}function contain(t,n,a){var s=0,l=t[0];if(!l)return!1;for(var u=1;u<t.length;u++){var c=t[u];s+=windingLine(l[0],l[1],c[0],c[1],n,a),l=c}var d=t[0];return(!isAroundEqual(l[0],d[0])||!isAroundEqual(l[1],d[1]))&&(s+=windingLine(l[0],l[1],d[0],d[1],n,a)),s!==0}var TMP_TRANSFORM=[];function transformPoints(t,n){for(var a=0;a<t.length;a++)applyTransform$1(t[a],t[a],n)}function updateBBoxFromPoints(t,n,a,s){for(var l=0;l<t.length;l++){var u=t[l];s&&(u=s.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(n,n,u),max$1(a,a,u))}}function centroid$1(t){for(var n=0,a=0,s=0,l=t.length,u=t[l-1][0],c=t[l-1][1],d=0;d<l;d++){var Ct=t[d][0],ar=t[d][1],en=u*ar-Ct*c;n+=en,a+=(u+Ct)*en,s+=(c+ar)*en,u=Ct,c=ar}return n?[a/n/3,s/n/3,n]:[t[0][0]||0,t[0][1]||0]}var Region=(function(){function t(n){this.name=n}return t.prototype.setCenter=function(n){this._center=n},t.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},t})(),GeoJSONPolygonGeometry=(function(){function t(n,a){this.type="polygon",this.exterior=n,this.interiors=a}return t})(),GeoJSONLineStringGeometry=(function(){function t(n){this.type="linestring",this.points=n}return t})(),GeoJSONRegion=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a)||this;return u.type="geoJSON",u.geometries=s,u._center=l&&[l[0],l[1]],u}return n.prototype.calcCenter=function(){for(var a=this.geometries,s,l=0,u=0;u<a.length;u++){var c=a[u],d=c.exterior,Ct=d&&d.length;Ct>l&&(s=c,l=Ct)}if(s)return centroid$1(s.exterior);var ar=this.getBoundingRect();return[ar.x+ar.width/2,ar.y+ar.height/2]},n.prototype.getBoundingRect=function(a){var s=this._rect;if(s&&!a)return s;var l=[1/0,1/0],u=[-1/0,-1/0],c=this.geometries;return each$f(c,function(d){d.type==="polygon"?updateBBoxFromPoints(d.exterior,l,u,a):each$f(d.points,function(Ct){updateBBoxFromPoints(Ct,l,u,a)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])||(l[0]=l[1]=u[0]=u[1]=0),s=new BoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]),a||(this._rect=s),s},n.prototype.contain=function(a){var s=this.getBoundingRect(),l=this.geometries;if(!s.contain(a[0],a[1]))return!1;e:for(var u=0,c=l.length;u<c;u++){var d=l[u];if(d.type==="polygon"){var Ct=d.exterior,ar=d.interiors;if(contain(Ct,a[0],a[1])){for(var en=0;en<(ar?ar.length:0);en++)if(contain(ar[en],a[0],a[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(a,s,l,u){var c=this.getBoundingRect(),d=c.width/c.height;l?u||(u=l/d):l=d*u;for(var Ct=new BoundingRect(a,s,l,u),ar=c.calculateTransform(Ct),en=this.geometries,tn=0;tn<en.length;tn++){var on=en[tn];on.type==="polygon"?(transformPoints(on.exterior,ar),each$f(on.interiors,function(fn){transformPoints(fn,ar)})):each$f(on.points,function(fn){transformPoints(fn,ar)})}c=this._rect,c.copy(Ct),this._center=[c.x+c.width/2,c.y+c.height/2]},n.prototype.cloneShallow=function(a){a==null&&(a=this.name);var s=new n(a,this.geometries,this._center);return s._rect=this._rect,s.transformTo=null,s},n})(Region),GeoSVGRegion=(function(t){__extends(n,t);function n(a,s){var l=t.call(this,a)||this;return l.type="geoSVG",l._elOnlyForCalculate=s,l}return n.prototype.calcCenter=function(){for(var a=this._elOnlyForCalculate,s=a.getBoundingRect(),l=[s.x+s.width/2,s.y+s.height/2],u=identity(TMP_TRANSFORM),c=a;c&&!c.isGeoSVGGraphicRoot;)mul(u,c.getLocalTransform(),u),c=c.parent;return invert(u,u),applyTransform$1(l,l,u),l},n})(Region);function decode(t){if(!t.UTF8Encoding)return t;var n=t,a=n.UTF8Scale;a==null&&(a=1024);var s=n.features;return each$f(s,function(l){var u=l.geometry,c=u.encodeOffsets,d=u.coordinates;if(c)switch(u.type){case"LineString":u.coordinates=decodeRing(d,c,a);break;case"Polygon":decodeRings(d,c,a);break;case"MultiLineString":decodeRings(d,c,a);break;case"MultiPolygon":each$f(d,function(Ct,ar){return decodeRings(Ct,c[ar],a)})}}),n.UTF8Encoding=!1,n}function decodeRings(t,n,a){for(var s=0;s<t.length;s++)t[s]=decodeRing(t[s],n[s],a)}function decodeRing(t,n,a){for(var s=[],l=n[0],u=n[1],c=0;c<t.length;c+=2){var d=t.charCodeAt(c)-64,Ct=t.charCodeAt(c+1)-64;d=d>>1^-(d&1),Ct=Ct>>1^-(Ct&1),d+=l,Ct+=u,l=d,u=Ct,s.push([d/a,Ct/a])}return s}function parseGeoJSON(t,n){return t=decode(t),map$1(filter(t.features,function(a){return a.geometry&&a.properties&&a.geometry.coordinates.length>0}),function(a){var s=a.properties,l=a.geometry,u=[];switch(l.type){case"Polygon":var c=l.coordinates;u.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(Ct){Ct[0]&&u.push(new GeoJSONPolygonGeometry(Ct[0],Ct.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(l.coordinates))}var d=new GeoJSONRegion(s[n||"name"],u,s.cp);return d.properties=s,d})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$1,isObject:isObject$3,isString:isString$1,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(t,n){var a=map$1(n,function(s){return t.scale.parse(s)});return t.type==="time"&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}function createAxisLabels(t){var n=t.getLabelModel().get("customValues");if(n){var a=makeLabelFormatter(t),s=t.scale.getExtent(),l=tickValuesToNumbers(t,n),u=filter(l,function(c){return c>=s[0]&&c<=s[1]});return{labels:map$1(u,function(c){var d={value:c};return{formattedLabel:a(d),rawLabel:t.scale.getLabel(d),tickValue:c}})}}return t.type==="category"?makeCategoryLabels(t):makeRealNumberLabels(t)}function createAxisTicks(t,n){var a=t.getTickModel().get("customValues");if(a){var s=t.scale.getExtent(),l=tickValuesToNumbers(t,a);return{ticks:filter(l,function(u){return u>=s[0]&&u<=s[1]})}}return t.type==="category"?makeCategoryTicks(t,n):{ticks:map$1(t.scale.getTicks(),function(u){return u.value})}}function makeCategoryLabels(t){var n=t.getLabelModel(),a=makeCategoryLabelsActually(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}function makeCategoryLabelsActually(t,n){var a=getListCache(t,"labels"),s=getOptionCategoryInterval(n),l=listCacheGet(a,s);if(l)return l;var u,c;return isFunction$1(s)?u=makeLabelsByCustomizedCategoryInterval(t,s):(c=s==="auto"?makeAutoCategoryInterval(t):s,u=makeLabelsByNumericCategoryInterval(t,c)),listCacheSet(a,s,{labels:u,labelCategoryInterval:c})}function makeCategoryTicks(t,n){var a=getListCache(t,"ticks"),s=getOptionCategoryInterval(n),l=listCacheGet(a,s);if(l)return l;var u,c;if((!n.get("show")||t.scale.isBlank())&&(u=[]),isFunction$1(s))u=makeLabelsByCustomizedCategoryInterval(t,s,!0);else if(s==="auto"){var d=makeCategoryLabelsActually(t,t.getLabelModel());c=d.labelCategoryInterval,u=map$1(d.labels,function(Ct){return Ct.tickValue})}else c=s,u=makeLabelsByNumericCategoryInterval(t,c,!0);return listCacheSet(a,s,{ticks:u,tickCategoryInterval:c})}function makeRealNumberLabels(t){var n=t.scale.getTicks(),a=makeLabelFormatter(t);return{labels:map$1(n,function(s,l){return{level:s.level,formattedLabel:a(s,l),rawLabel:t.scale.getLabel(s),tickValue:s.value}})}}function getListCache(t,n){return inner$g(t)[n]||(inner$g(t)[n]=[])}function listCacheGet(t,n){for(var a=0;a<t.length;a++)if(t[a].key===n)return t[a].value}function listCacheSet(t,n,a){return t.push({key:n,value:a}),a}function makeAutoCategoryInterval(t){var n=inner$g(t).autoInterval;return n??(inner$g(t).autoInterval=t.calculateCategoryInterval())}function calculateCategoryInterval(t){var n=fetchAutoCategoryIntervalCalculationParams(t),a=makeLabelFormatter(t),s=(n.axisRotate-n.labelRotate)/180*Math.PI,l=t.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var d=1;c>40&&(d=Math.max(1,Math.floor(c/40)));for(var Ct=u[0],ar=t.dataToCoord(Ct+1)-t.dataToCoord(Ct),en=Math.abs(ar*Math.cos(s)),tn=Math.abs(ar*Math.sin(s)),on=0,fn=0;Ct<=u[1];Ct+=d){var dn=0,Cn=0,Rn=getBoundingRect(a({value:Ct}),n.font,"center","top");dn=Rn.width*1.3,Cn=Rn.height*1.3,on=Math.max(on,dn,7),fn=Math.max(fn,Cn,7)}var ax=on/en,ox=fn/tn;isNaN(ax)&&(ax=1/0),isNaN(ox)&&(ox=1/0);var sx=Math.max(0,Math.floor(Math.min(ax,ox))),lx=inner$g(t.model),cx=t.getExtent(),fx=lx.lastAutoInterval,gx=lx.lastTickCount;return fx!=null&&gx!=null&&Math.abs(fx-sx)<=1&&Math.abs(gx-c)<=1&&fx>sx&&lx.axisExtent0===cx[0]&&lx.axisExtent1===cx[1]?sx=fx:(lx.lastTickCount=c,lx.lastAutoInterval=sx,lx.axisExtent0=cx[0],lx.axisExtent1=cx[1]),sx}function fetchAutoCategoryIntervalCalculationParams(t){var n=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(t,n,a){var s=makeLabelFormatter(t),l=t.scale,u=l.getExtent(),c=t.getLabelModel(),d=[],Ct=Math.max((n||0)+1,1),ar=u[0],en=l.count();ar!==0&&Ct>1&&en/Ct>2&&(ar=Math.round(Math.ceil(ar/Ct)*Ct));var tn=shouldShowAllLabels(t),on=c.get("showMinLabel")||tn,fn=c.get("showMaxLabel")||tn;on&&ar!==u[0]&&Cn(u[0]);for(var dn=ar;dn<=u[1];dn+=Ct)Cn(dn);fn&&dn-Ct!==u[1]&&Cn(u[1]);function Cn(Rn){var ax={value:Rn};d.push(a?Rn:{formattedLabel:s(ax),rawLabel:l.getLabel(ax),tickValue:Rn})}return d}function makeLabelsByCustomizedCategoryInterval(t,n,a){var s=t.scale,l=makeLabelFormatter(t),u=[];return each$f(s.getTicks(),function(c){var d=s.getLabel(c),Ct=c.value;n(c.value,d)&&u.push(a?Ct:{formattedLabel:l(c),rawLabel:d,tickValue:Ct})}),u}var NORMALIZED_EXTENT=[0,1],Axis=(function(){function t(n,a,s){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=a,this._extent=s||[0,0]}return t.prototype.contain=function(n){var a=this._extent,s=Math.min(a[0],a[1]),l=Math.max(a[0],a[1]);return n>=s&&n<=l},t.prototype.containData=function(n){return this.scale.contain(n)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(n,a){var s=this._extent;s[0]=n,s[1]=a},t.prototype.dataToCoord=function(n,a){var s=this._extent,l=this.scale;return n=l.normalize(n),this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count())),linearMap$2(n,NORMALIZED_EXTENT,s,a)},t.prototype.coordToData=function(n,a){var s=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count()));var u=linearMap$2(n,s,NORMALIZED_EXTENT,a);return this.scale.scale(u)},t.prototype.pointToData=function(n,a){},t.prototype.getTicksCoords=function(n){n=n||{};var a=n.tickModel||this.getTickModel(),s=createAxisTicks(this,a),l=s.ticks,u=map$1(l,function(d){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(d):d),tickValue:d}},this),c=a.get("alignWithLabel");return fixOnBandTicksCoords(this,u,c,n.clamp),u},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),a=n.get("splitNumber");a>0&&a<100||(a=5);var s=this.scale.getMinorTicks(a),l=map$1(s,function(u){return map$1(u,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return l},t.prototype.getViewLabels=function(){return createAxisLabels(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var n=this._extent,a=this.scale.getExtent(),s=a[1]-a[0]+(this.onBand?1:0);s===0&&(s=1);var l=Math.abs(n[1]-n[0]);return Math.abs(l)/s},t.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},t})();function fixExtentWithBands(t,n){var a=t[1]-t[0],s=n,l=a/s/2;t[0]+=l,t[1]-=l}function fixOnBandTicksCoords(t,n,a,s){var l=n.length;if(!t.onBand||a||!l)return;var u=t.getExtent(),c,d;if(l===1)n[0].coord=u[0],c=n[1]={coord:u[1],tickValue:n[0].tickValue};else{var Ct=n[l-1].tickValue-n[0].tickValue,ar=(n[l-1].coord-n[0].coord)/Ct;each$f(n,function(fn){fn.coord-=ar/2});var en=t.scale.getExtent();d=1+en[1]-n[l-1].tickValue,c={coord:n[l-1].coord+ar*d,tickValue:en[1]+1},n.push(c)}var tn=u[0]>u[1];on(n[0].coord,u[0])&&(s?n[0].coord=u[0]:n.shift()),s&&on(u[0],n[0].coord)&&n.unshift({coord:u[0]}),on(u[1],c.coord)&&(s?c.coord=u[1]:n.pop()),s&&on(c.coord,u[1])&&n.push({coord:u[1]});function on(fn,dn){return fn=round$3(fn),dn=round$3(dn),tn?fn>dn:fn<dn}}function extendComponentModel(t){var n=ComponentModel.extend(t);return ComponentModel.registerClass(n),n}function extendComponentView(t){var n=ComponentView.extend(t);return ComponentView.registerClass(n),n}function extendSeriesModel(t){var n=SeriesModel.extend(t);return SeriesModel.registerClass(n),n}function extendChartView(t){var n=ChartView.extend(t);return ChartView.registerClass(n),n}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(t,n,a,s,l){var u=a.width,c=a.height;switch(t){case"top":s.set(a.x+u/2,a.y-n),l.set(0,-1);break;case"bottom":s.set(a.x+u/2,a.y+c+n),l.set(0,1);break;case"left":s.set(a.x-n,a.y+c/2),l.set(-1,0);break;case"right":s.set(a.x+u+n,a.y+c/2),l.set(1,0);break}}function projectPointToArc(t,n,a,s,l,u,c,d,Ct){c-=t,d-=n;var ar=Math.sqrt(c*c+d*d);c/=ar,d/=ar;var en=c*a+t,tn=d*a+n;if(Math.abs(s-l)%PI2$2<1e-4)return Ct[0]=en,Ct[1]=tn,ar-a;if(u){var on=s;s=normalizeRadian(l),l=normalizeRadian(on)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$2);var fn=Math.atan2(d,c);if(fn<0&&(fn+=PI2$2),fn>=s&&fn<=l||fn+PI2$2>=s&&fn+PI2$2<=l)return Ct[0]=en,Ct[1]=tn,ar-a;var dn=a*Math.cos(s)+t,Cn=a*Math.sin(s)+n,Rn=a*Math.cos(l)+t,ax=a*Math.sin(l)+n,ox=(dn-c)*(dn-c)+(Cn-d)*(Cn-d),sx=(Rn-c)*(Rn-c)+(ax-d)*(ax-d);return ox<sx?(Ct[0]=dn,Ct[1]=Cn,Math.sqrt(ox)):(Ct[0]=Rn,Ct[1]=ax,Math.sqrt(sx))}function projectPointToLine(t,n,a,s,l,u,c,d){var Ct=l-t,ar=u-n,en=a-t,tn=s-n,on=Math.sqrt(en*en+tn*tn);en/=on,tn/=on;var fn=Ct*en+ar*tn,dn=fn/on;d&&(dn=Math.min(Math.max(dn,0),1)),dn*=on;var Cn=c[0]=t+dn*en,Rn=c[1]=n+dn*tn;return Math.sqrt((Cn-l)*(Cn-l)+(Rn-u)*(Rn-u))}function projectPointToRect(t,n,a,s,l,u,c){a<0&&(t=t+a,a=-a),s<0&&(n=n+s,s=-s);var d=t+a,Ct=n+s,ar=c[0]=Math.min(Math.max(l,t),d),en=c[1]=Math.min(Math.max(u,n),Ct);return Math.sqrt((ar-l)*(ar-l)+(en-u)*(en-u))}var tmpPt=[];function nearestPointOnRect(t,n,a){var s=projectPointToRect(n.x,n.y,n.width,n.height,t.x,t.y,tmpPt);return a.set(tmpPt[0],tmpPt[1]),s}function nearestPointOnPath(t,n,a){for(var s=0,l=0,u=0,c=0,d,Ct,ar=1/0,en=n.data,tn=t.x,on=t.y,fn=0;fn<en.length;){var dn=en[fn++];fn===1&&(s=en[fn],l=en[fn+1],u=s,c=l);var Cn=ar;switch(dn){case CMD$1.M:u=en[fn++],c=en[fn++],s=u,l=c;break;case CMD$1.L:Cn=projectPointToLine(s,l,en[fn],en[fn+1],tn,on,tmpPt,!0),s=en[fn++],l=en[fn++];break;case CMD$1.C:Cn=cubicProjectPoint(s,l,en[fn++],en[fn++],en[fn++],en[fn++],en[fn],en[fn+1],tn,on,tmpPt),s=en[fn++],l=en[fn++];break;case CMD$1.Q:Cn=quadraticProjectPoint(s,l,en[fn++],en[fn++],en[fn],en[fn+1],tn,on,tmpPt),s=en[fn++],l=en[fn++];break;case CMD$1.A:var Rn=en[fn++],ax=en[fn++],ox=en[fn++],sx=en[fn++],lx=en[fn++],cx=en[fn++];fn+=1;var fx=!!(1-en[fn++]);d=Math.cos(lx)*ox+Rn,Ct=Math.sin(lx)*sx+ax,fn<=1&&(u=d,c=Ct);var gx=(tn-Rn)*sx/ox+Rn;Cn=projectPointToArc(Rn,ax,sx,lx,lx+cx,fx,gx,on,tmpPt),s=Math.cos(lx+cx)*ox+Rn,l=Math.sin(lx+cx)*sx+ax;break;case CMD$1.R:u=s=en[fn++],c=l=en[fn++];var mx=en[fn++],px=en[fn++];Cn=projectPointToRect(u,c,mx,px,tn,on,tmpPt);break;case CMD$1.Z:Cn=projectPointToLine(s,l,u,c,tn,on,tmpPt,!0),s=u,l=c;break}Cn<ar&&(ar=Cn,a.set(tmpPt[0],tmpPt[1]))}return ar}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(t,n){if(t){var a=t.getTextGuideLine(),s=t.getTextContent();if(s&&a){var l=t.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],c=l.candidates||DEFAULT_SEARCH_SPACE,d=s.getBoundingRect().clone();d.applyTransform(s.getComputedTransform());var Ct=1/0,ar=l.anchor,en=t.getComputedTransform(),tn=en&&invert([],en),on=n.get("length2")||0;ar&&pt2.copy(ar);for(var fn=0;fn<c.length;fn++){var dn=c[fn];getCandidateAnchor(dn,0,d,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,on),pt1.transform(tn);var Cn=t.getBoundingRect(),Rn=ar?ar.distance(pt1):t instanceof Path?nearestPointOnPath(pt1,t.path,pt2):nearestPointOnRect(pt1,Cn,pt2);Rn<Ct&&(Ct=Rn,pt1.transform(en),pt2.transform(en),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,n.get("minTurnAngle")),a.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(t,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var a=dir.len(),s=dir2.len();if(!(a<.001||s<.001)){dir.scale(1/a),dir2.scale(1/s);var l=dir.dot(dir2),u=Math.cos(n);if(u<l){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-n));var d=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(d))return;d<0?Point.copy(tmpProjPoint,pt1):d>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(t[1])}}}}function limitSurfaceAngle(t,n,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var s=dir.len(),l=dir2.len();if(!(s<.001||l<.001)){dir.scale(1/s),dir2.scale(1/l);var u=dir.dot(n),c=Math.cos(a);if(u<c){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var Ct=Math.PI/2,ar=Math.acos(dir2.dot(n)),en=Ct+ar-a;if(en>=Ct)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI/2-en));var tn=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(tn))return;tn<0?Point.copy(tmpProjPoint,pt1):tn>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(t[1])}}}}function setLabelLineState(t,n,a,s){var l=a==="normal",u=l?t:t.ensureState(a);u.ignore=n;var c=s.get("smooth");c&&c===!0&&(c=.3),u.shape=u.shape||{},c>0&&(u.shape.smooth=c);var d=s.getModel("lineStyle").getLineStyle();l?t.useStyle(d):u.style=d}function buildLabelLinePath(t,n){var a=n.smooth,s=n.points;if(s)if(t.moveTo(s[0][0],s[0][1]),a>0&&s.length>=3){var l=dist$1(s[0],s[1]),u=dist$1(s[1],s[2]);if(!l||!u){t.lineTo(s[1][0],s[1][1]),t.lineTo(s[2][0],s[2][1]);return}var c=Math.min(l,u)*a,d=lerp$1([],s[1],s[0],c/l),Ct=lerp$1([],s[1],s[2],c/u),ar=lerp$1([],d,Ct,.5);t.bezierCurveTo(d[0],d[1],d[0],d[1],ar[0],ar[1]),t.bezierCurveTo(Ct[0],Ct[1],Ct[0],Ct[1],s[2][0],s[2][1])}else for(var en=1;en<s.length;en++)t.lineTo(s[en][0],s[en][1])}function setLabelLineStyle(t,n,a){var s=t.getTextGuideLine(),l=t.getTextContent();if(!l){s&&t.removeTextGuideLine();return}for(var u=n.normal,c=u.get("show"),d=l.ignore,Ct=0;Ct<DISPLAY_STATES.length;Ct++){var ar=DISPLAY_STATES[Ct],en=n[ar],tn=ar==="normal";if(en){var on=en.get("show"),fn=tn?d:retrieve2(l.states[ar]&&l.states[ar].ignore,d);if(fn||!retrieve2(on,c)){var dn=tn?s:s&&s.states[ar];dn&&(dn.ignore=!0),s&&setLabelLineState(s,!0,ar,en);continue}s||(s=new Polyline$1,t.setTextGuideLine(s),!tn&&(d||!c)&&setLabelLineState(s,!0,"normal",n.normal),t.stateProxy&&(s.stateProxy=t.stateProxy)),setLabelLineState(s,!1,ar,en)}}if(s){defaults(s.style,a),s.style.fill=null;var Cn=u.get("showAbove"),Rn=t.textGuideLineConfig=t.textGuideLineConfig||{};Rn.showAbove=Cn||!1,s.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(t,n){n=n||"labelLine";for(var a={normal:t.getModel(n)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];a[l]=t.getModel([l,n])}return a}function prepareLayoutList(t){for(var n=[],a=0;a<t.length;a++){var s=t[a];if(!s.defaultAttr.ignore){var l=s.label,u=l.getComputedTransform(),c=l.getBoundingRect(),d=!u||u[1]<1e-5&&u[2]<1e-5,Ct=l.style.margin||0,ar=c.clone();ar.applyTransform(u),ar.x-=Ct/2,ar.y-=Ct/2,ar.width+=Ct,ar.height+=Ct;var en=d?new OrientedBoundingRect(c,u):null;n.push({label:l,labelLine:s.labelLine,rect:ar,localRect:c,obb:en,priority:s.priority,defaultAttr:s.defaultAttr,layoutOption:s.computedLayoutOption,axisAligned:d,transform:u})}}return n}function shiftLayout(t,n,a,s,l,u){var c=t.length;if(c<2)return;t.sort(function(fx,gx){return fx.rect[n]-gx.rect[n]});for(var d=0,Ct,ar=!1,en=0;en<c;en++){var tn=t[en],on=tn.rect;Ct=on[n]-d,Ct<0&&(on[n]-=Ct,tn.label[n]-=Ct,ar=!0),d=on[n]+on[a]}var fn=t[0],dn=t[c-1],Cn,Rn;ax(),Cn<0&&lx(-Cn,.8),Rn<0&&lx(Rn,.8),ax(),ox(Cn,Rn,1),ox(Rn,Cn,-1),ax(),Cn<0&&cx(-Cn),Rn<0&&cx(Rn);function ax(){Cn=fn.rect[n]-s,Rn=l-dn.rect[n]-dn.rect[a]}function ox(fx,gx,mx){if(fx<0){var px=Math.min(gx,-fx);if(px>0){sx(px*mx,0,c);var hx=px+fx;hx<0&&lx(-hx*mx,1)}else lx(-fx*mx,1)}}function sx(fx,gx,mx){fx!==0&&(ar=!0);for(var px=gx;px<mx;px++){var hx=t[px],vx=hx.rect;vx[n]+=fx,hx.label[n]+=fx}}function lx(fx,gx){for(var mx=[],px=0,hx=1;hx<c;hx++){var vx=t[hx-1].rect,yx=Math.max(t[hx].rect[n]-vx[n]-vx[a],0);mx.push(yx),px+=yx}if(px){var Sx=Math.min(Math.abs(fx)/px,gx);if(fx>0)for(var hx=0;hx<c-1;hx++){var _x=mx[hx]*Sx;sx(_x,0,hx+1)}else for(var hx=c-1;hx>0;hx--){var _x=mx[hx-1]*Sx;sx(-_x,hx,c)}}}function cx(fx){var gx=fx<0?-1:1;fx=Math.abs(fx);for(var mx=Math.ceil(fx/(c-1)),px=0;px<c-1;px++)if(gx>0?sx(mx,0,px+1):sx(-mx,c-px-1,c),fx-=mx,fx<=0)return}return ar}function shiftLayoutOnX(t,n,a,s){return shiftLayout(t,"x","width",n,a)}function shiftLayoutOnY(t,n,a,s){return shiftLayout(t,"y","height",n,a)}function hideOverlap(t){var n=[];t.sort(function(Cn,Rn){return Rn.priority-Cn.priority});var a=new BoundingRect(0,0,0,0);function s(Cn){if(!Cn.ignore){var Rn=Cn.ensureState("emphasis");Rn.ignore==null&&(Rn.ignore=!1)}Cn.ignore=!0}for(var l=0;l<t.length;l++){var u=t[l],c=u.axisAligned,d=u.localRect,Ct=u.transform,ar=u.label,en=u.labelLine;a.copy(u.rect),a.width-=.1,a.height-=.1,a.x+=.05,a.y+=.05;for(var tn=u.obb,on=!1,fn=0;fn<n.length;fn++){var dn=n[fn];if(a.intersect(dn.rect)){if(c&&dn.axisAligned){on=!0;break}if(dn.obb||(dn.obb=new OrientedBoundingRect(dn.localRect,dn.transform)),tn||(tn=new OrientedBoundingRect(d,Ct)),tn.intersect(dn.obb)){on=!0;break}}}on?(s(ar),en&&s(en)):(ar.attr("ignore",u.defaultAttr.ignore),en&&en.attr("ignore",u.defaultAttr.labelGuideIgnore),n.push(u))}}function cloneArr(t){if(t){for(var n=[],a=0;a<t.length;a++)n.push(t[a].slice());return n}}function prepareLayoutCallbackParams(t,n){var a=t.label,s=n&&n.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:cloneArr(s&&s.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(t,n,a){for(var s=0;s<a.length;s++){var l=a[s];n[l]!=null&&(t[l]=n[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=(function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(n,a,s,l,u){var c=l.style,d=l.__hostTarget,Ct=d.textConfig||{},ar=l.getComputedTransform(),en=l.getBoundingRect().plain();BoundingRect.applyTransform(en,en,ar),ar?dummyTransformable.setLocalTransform(ar):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var tn=l.__hostTarget,on;if(tn){on=tn.getBoundingRect().plain();var fn=tn.getComputedTransform();BoundingRect.applyTransform(on,on,fn)}var dn=on&&tn.getTextGuideLine();this._labelList.push({label:l,labelLine:dn,seriesModel:s,dataIndex:n,dataType:a,layoutOption:u,computedLayoutOption:null,rect:en,hostRect:on,priority:on?on.width*on.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:dn&&dn.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:l.cursor,attachedPos:Ct.position,attachedRot:Ct.rotation}})},t.prototype.addLabelsOfSeries=function(n){var a=this;this._chartViewList.push(n);var s=n.__model,l=s.get("labelLayout");(isFunction$1(l)||keys(l).length)&&n.group.traverse(function(u){if(u.ignore)return!0;var c=u.getTextContent(),d=getECData(u);c&&!c.disableLabelLayout&&a._addLabel(d.dataIndex,d.dataType,s,c,l)})},t.prototype.updateLayoutConfig=function(n){var a=n.getWidth(),s=n.getHeight();function l(sx,lx){return function(){updateLabelLinePoints(sx,lx)}}for(var u=0;u<this._labelList.length;u++){var c=this._labelList[u],d=c.label,Ct=d.__hostTarget,ar=c.defaultAttr,en=void 0;isFunction$1(c.layoutOption)?en=c.layoutOption(prepareLayoutCallbackParams(c,Ct)):en=c.layoutOption,en=en||{},c.computedLayoutOption=en;var tn=Math.PI/180;Ct&&Ct.setTextConfig({local:!1,position:en.x!=null||en.y!=null?null:ar.attachedPos,rotation:en.rotate!=null?en.rotate*tn:ar.attachedRot,offset:[en.dx||0,en.dy||0]});var on=!1;if(en.x!=null?(d.x=parsePercent(en.x,a),d.setStyle("x",0),on=!0):(d.x=ar.x,d.setStyle("x",ar.style.x)),en.y!=null?(d.y=parsePercent(en.y,s),d.setStyle("y",0),on=!0):(d.y=ar.y,d.setStyle("y",ar.style.y)),en.labelLinePoints){var fn=Ct.getTextGuideLine();fn&&(fn.setShape({points:en.labelLinePoints}),on=!1)}var dn=labelLayoutInnerStore(d);dn.needsUpdateLabelLine=on,d.rotation=en.rotate!=null?en.rotate*tn:ar.rotation,d.scaleX=ar.scaleX,d.scaleY=ar.scaleY;for(var Cn=0;Cn<LABEL_OPTION_TO_STYLE_KEYS.length;Cn++){var Rn=LABEL_OPTION_TO_STYLE_KEYS[Cn];d.setStyle(Rn,en[Rn]!=null?en[Rn]:ar.style[Rn])}if(en.draggable){if(d.draggable=!0,d.cursor="move",Ct){var ax=c.seriesModel;if(c.dataIndex!=null){var ox=c.seriesModel.getData(c.dataType);ax=ox.getItemModel(c.dataIndex)}d.on("drag",l(Ct,ax.getModel("labelLine")))}}else d.off("drag"),d.cursor=ar.cursor}},t.prototype.layout=function(n){var a=n.getWidth(),s=n.getHeight(),l=prepareLayoutList(this._labelList),u=filter(l,function(Ct){return Ct.layoutOption.moveOverlap==="shiftX"}),c=filter(l,function(Ct){return Ct.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,a),shiftLayoutOnY(c,0,s);var d=filter(l,function(Ct){return Ct.layoutOption.hideOverlap});hideOverlap(d)},t.prototype.processLabelsOverall=function(){var n=this;each$f(this._chartViewList,function(a){var s=a.__model,l=a.ignoreLabelLineUpdate,u=s.isAnimationEnabled();a.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var d=!l,Ct=c.getTextContent();!d&&Ct&&(d=labelLayoutInnerStore(Ct).needsUpdateLabelLine),d&&n._updateLabelLine(c,s),u&&n._animateLabels(c,s)})})},t.prototype._updateLabelLine=function(n,a){var s=n.getTextContent(),l=getECData(n),u=l.dataIndex;if(s&&u!=null){var c=a.getData(l.dataType),d=c.getItemModel(u),Ct={},ar=c.getItemVisual(u,"style");if(ar){var en=c.getVisual("drawType");Ct.stroke=ar[en]}var tn=d.getModel("labelLine");setLabelLineStyle(n,getLabelLineStatesModels(d),Ct),updateLabelLinePoints(n,tn)}},t.prototype._animateLabels=function(n,a){var s=n.getTextContent(),l=n.getTextGuideLine();if(s&&(n.forceLabelAnimation||!s.ignore&&!s.invisible&&!n.disableLabelAnimation&&!isElementRemoved(n))){var u=labelLayoutInnerStore(s),c=u.oldLayout,d=getECData(n),Ct=d.dataIndex,ar={x:s.x,y:s.y,rotation:s.rotation},en=a.getData(d.dataType);if(c){s.attr(c);var on=n.prevStates;on&&(indexOf(on,"select")>=0&&s.attr(u.oldLayoutSelect),indexOf(on,"emphasis")>=0&&s.attr(u.oldLayoutEmphasis)),updateProps$1(s,ar,a,Ct)}else if(s.attr(ar),!labelInner(s).valueAnimation){var tn=retrieve2(s.style.opacity,1);s.style.opacity=0,initProps(s,{style:{opacity:tn}},a,Ct)}if(u.oldLayout=ar,s.states.select){var fn=u.oldLayoutSelect={};extendWithKeys(fn,ar,LABEL_LAYOUT_PROPS),extendWithKeys(fn,s.states.select,LABEL_LAYOUT_PROPS)}if(s.states.emphasis){var dn=u.oldLayoutEmphasis={};extendWithKeys(dn,ar,LABEL_LAYOUT_PROPS),extendWithKeys(dn,s.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(s,Ct,en,a,a)}if(l&&!l.ignore&&!l.invisible){var u=labelLineAnimationStore(l),c=u.oldLayout,Cn={points:l.shape.points};c?(l.attr({shape:c}),updateProps$1(l,{shape:Cn},a)):(l.setShape(Cn),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},a)),u.oldLayout=Cn}},t})(),getLabelManager=makeInner();function installLabelLayout(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,s){var l=getLabelManager(a).labelManager;l||(l=getLabelManager(a).labelManager=new LabelManager),l.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(n,a,s){var l=getLabelManager(a).labelManager;s.updatedSeries.forEach(function(u){l.addLabelsOfSeries(a.getViewOfSeriesModel(u))}),l.updateLayoutConfig(a),l.layout(a),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=(function(){function t(){}return t.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},t.prototype.moveTo=function(n,a){this._add("M",n,a)},t.prototype.lineTo=function(n,a){this._add("L",n,a)},t.prototype.bezierCurveTo=function(n,a,s,l,u,c){this._add("C",n,a,s,l,u,c)},t.prototype.quadraticCurveTo=function(n,a,s,l){this._add("Q",n,a,s,l)},t.prototype.arc=function(n,a,s,l,u,c){this.ellipse(n,a,s,s,0,l,u,c)},t.prototype.ellipse=function(n,a,s,l,u,c,d,Ct){var ar=d-c,en=!Ct,tn=Math.abs(ar),on=isAroundZero(tn-PI2$1)||(en?ar>=PI2$1:-ar>=PI2$1),fn=ar>0?ar%PI2$1:ar%PI2$1+PI2$1,dn=!1;on?dn=!0:isAroundZero(tn)?dn=!1:dn=fn>=PI$4==!!en;var Cn=n+s*mathCos(c),Rn=a+l*mathSin(c);this._start&&this._add("M",Cn,Rn);var ax=Math.round(u*degree);if(on){var ox=1/this._p,sx=(en?1:-1)*(PI2$1-ox);this._add("A",s,l,ax,1,+en,n+s*mathCos(c+sx),a+l*mathSin(c+sx)),ox>.01&&this._add("A",s,l,ax,0,+en,Cn,Rn)}else{var lx=n+s*mathCos(d),cx=a+l*mathSin(d);this._add("A",s,l,ax,+dn,+en,lx,cx)}},t.prototype.rect=function(n,a,s,l){this._add("M",n,a),this._add("l",s,0),this._add("l",0,l),this._add("l",-s,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(n,a,s,l,u,c,d,Ct,ar){for(var en=[],tn=this._p,on=1;on<arguments.length;on++){var fn=arguments[on];if(isNaN(fn)){this._invalid=!0;return}en.push(Math.round(fn*tn)/tn)}this._d.push(n+en.join(" ")),this._start=n==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t})(),NONE="none",mathRound=Math.round;function pathHasFill(t){var n=t.fill;return n!=null&&n!==NONE}function pathHasStroke(t){var n=t.stroke;return n!=null&&n!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(t){return"stroke-"+t.toLowerCase()});function mapStyleToAttrs(t,n,a,s){var l=n.opacity==null?1:n.opacity;if(a instanceof ZRImage){t("opacity",l);return}if(pathHasFill(n)){var u=normalizeColor(n.fill);t("fill",u.color);var c=n.fillOpacity!=null?n.fillOpacity*u.opacity*l:u.opacity*l;c<1&&t("fill-opacity",c)}else t("fill",NONE);if(pathHasStroke(n)){var d=normalizeColor(n.stroke);t("stroke",d.color);var Ct=n.strokeNoScale?a.getLineScale():1,ar=Ct?(n.lineWidth||0)/Ct:0,en=n.strokeOpacity!=null?n.strokeOpacity*d.opacity*l:d.opacity*l,tn=n.strokeFirst;if(ar!==1&&t("stroke-width",ar),tn&&t("paint-order",tn?"stroke":"fill"),en<1&&t("stroke-opacity",en),n.lineDash){var on=getLineDash(a),fn=on[0],dn=on[1];fn&&(dn=mathRound(dn||0),t("stroke-dasharray",fn.join(",")),(dn||s)&&t("stroke-dashoffset",dn))}for(var Cn=0;Cn<strokeProps.length;Cn++){var Rn=strokeProps[Cn];if(n[Rn]!==DEFAULT_PATH_STYLE[Rn]){var ax=n[Rn]||DEFAULT_PATH_STYLE[Rn];ax&&t(svgStrokeProps[Cn],ax)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(t){return document.createElementNS(SVGNS,t)}function createVNode(t,n,a,s,l){return{tag:t,attrs:a||{},children:s,text:l,key:n}}function createElementOpen(t,n){var a=[];if(n)for(var s in n){var l=n[s],u=s;l!==!1&&(l!==!0&&l!=null&&(u+='="'+l+'"'),a.push(u))}return"<"+t+" "+a.join(" ")+">"}function createElementClose(t){return"</"+t+">"}function vNodeToString(t,n){n=n||{};var a=n.newline?`
`:"";function s(l){var u=l.children,c=l.tag,d=l.attrs,Ct=l.text;return createElementOpen(c,d)+(c!=="style"?encodeHTML(Ct):Ct||"")+(u?""+a+map$1(u,function(ar){return s(ar)}).join(a)+a:"")+createElementClose(c)}return s(t)}function getCssString(t,n,a){a=a||{};var s=a.newline?`
`:"",l=" {"+s,u=s+"}",c=map$1(keys(t),function(Ct){return Ct+l+map$1(keys(t[Ct]),function(ar){return ar+":"+t[Ct][ar]+";"}).join(s)+u}).join(s),d=map$1(keys(n),function(Ct){return"@keyframes "+Ct+l+map$1(keys(n[Ct]),function(ar){return ar+l+map$1(keys(n[Ct][ar]),function(en){var tn=n[Ct][ar][en];return en==="d"&&(tn='path("'+tn+'")'),en+":"+tn+";"}).join(s)+u}).join(s)+u}).join(s);return!c&&!d?"":["<![CDATA[",c,d,"]]>"].join(s)}function createBrushScope(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(t,n,a,s){return createVNode("svg","root",{width:t,height:n,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:s?"0 0 "+t+" "+n:!1},a)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(t,n,a){var s=extend({},t.shape);extend(s,n),t.buildPath(a,s);var l=new SVGPathRebuilder;return l.reset(getPathPrecision(t)),a.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(t,n){var a=n.originX,s=n.originY;(a||s)&&(t[transformOriginKey]=a+"px "+s+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(t,n){var a=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[a]=t,a}function createCompoundPathCSSAnimation(t,n,a){var s=t.shape.paths,l={},u,c;if(each$f(s,function(Ct){var ar=createBrushScope(a.zrId);ar.animation=!0,createCSSAnimation(Ct,{},ar,!0);var en=ar.cssAnims,tn=ar.cssNodes,on=keys(en),fn=on.length;if(fn){c=on[fn-1];var dn=en[c];for(var Cn in dn){var Rn=dn[Cn];l[Cn]=l[Cn]||{d:""},l[Cn].d+=Rn.d||""}for(var ax in tn){var ox=tn[ax].animation;ox.indexOf(c)>=0&&(u=ox)}}}),!!u){n.d=!1;var d=addAnimation(l,a);return u.replace(c,d)}}function getEasingFunc(t){return isString$1(t)?EASING_MAP[t]?"cubic-bezier("+EASING_MAP[t]+")":createCubicEasingFunc(t)?t:"":""}function createCSSAnimation(t,n,a,s){var l=t.animators,u=l.length,c=[];if(t instanceof CompoundPath){var d=createCompoundPathCSSAnimation(t,n,a);if(d)c.push(d);else if(!u)return}else if(!u)return;for(var Ct={},ar=0;ar<u;ar++){var en=l[ar],tn=[en.getMaxTime()/1e3+"s"],on=getEasingFunc(en.getClip().easing),fn=en.getDelay();on?tn.push(on):tn.push("linear"),fn&&tn.push(fn/1e3+"s"),en.getLoop()&&tn.push("infinite");var dn=tn.join(" ");Ct[dn]=Ct[dn]||[dn,[]],Ct[dn][1].push(en)}function Cn(ox){var sx=ox[1],lx=sx.length,cx={},fx={},gx={},mx="animation-timing-function";function px(Vx,Gx,Zx){for(var jx=Vx.getTracks(),Hx=Vx.getMaxTime(),iE=0;iE<jx.length;iE++){var Xx=jx[iE];if(Xx.needsAnimate()){var rE=Xx.keyframes,uE=Xx.propName;if(Zx&&(uE=Zx(uE)),uE)for(var aE=0;aE<rE.length;aE++){var Kx=rE[aE],ME=Math.round(Kx.time/Hx*100)+"%",IE=getEasingFunc(Kx.easing),wE=Kx.rawValue;(isString$1(wE)||isNumber(wE))&&(Gx[ME]=Gx[ME]||{},Gx[ME][uE]=Kx.rawValue,IE&&(Gx[ME][mx]=IE))}}}}for(var hx=0;hx<lx;hx++){var vx=sx[hx],yx=vx.targetName;yx?yx==="shape"&&px(vx,fx):!s&&px(vx,cx)}for(var Sx in cx){var _x={};copyTransform(_x,t),extend(_x,cx[Sx]);var Ex=getSRTTransformString(_x),bx=cx[Sx][mx];gx[Sx]=Ex?{transform:Ex}:{},setTransformOrigin(gx[Sx],_x),bx&&(gx[Sx][mx]=bx)}var Ax,Mx=!0;for(var Sx in fx){gx[Sx]=gx[Sx]||{};var Rx=!Ax,bx=fx[Sx][mx];Rx&&(Ax=new PathProxy);var Cx=Ax.len();Ax.reset(),gx[Sx].d=buildPathString(t,fx[Sx],Ax);var Lx=Ax.len();if(!Rx&&Cx!==Lx){Mx=!1;break}bx&&(gx[Sx][mx]=bx)}if(!Mx)for(var Sx in gx)delete gx[Sx].d;if(!s)for(var hx=0;hx<lx;hx++){var vx=sx[hx],yx=vx.targetName;yx==="style"&&px(vx,gx,function(jx){return ANIMATE_STYLE_MAP[jx]})}for(var qx=keys(gx),Ix=!0,Px,hx=1;hx<qx.length;hx++){var Nx=qx[hx-1],Bx=qx[hx];if(gx[Nx][transformOriginKey]!==gx[Bx][transformOriginKey]){Ix=!1;break}Px=gx[Nx][transformOriginKey]}if(Ix&&Px){for(var Sx in gx)gx[Sx][transformOriginKey]&&delete gx[Sx][transformOriginKey];n[transformOriginKey]=Px}if(filter(qx,function(Vx){return keys(gx[Vx]).length>0}).length){var $x=addAnimation(gx,a);return $x+" "+ox[0]+" both"}}for(var Rn in Ct){var d=Cn(Ct[Rn]);d&&c.push(d)}if(c.length){var ax=a.zrId+"-cls-"+getClassId();a.cssNodes["."+ax]={animation:c.join(",")},n.class=ax}}function createCSSEmphasis(t,n,a){if(!t.ignore)if(t.isSilent()){var s={"pointer-events":"none"};setClassAttribute(s,n,a)}else{var l=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},u=l.fill;if(!u){var c=t.style&&t.style.fill,d=t.states.select&&t.states.select.style&&t.states.select.style.fill,Ct=t.currentStates.indexOf("select")>=0&&d||c;Ct&&(u=liftColor(Ct))}var ar=l.lineWidth;if(ar){var en=!l.strokeNoScale&&t.transform?t.transform[0]:1;ar=ar/en}var s={cursor:"pointer"};u&&(s.fill=u),l.stroke&&(s.stroke=l.stroke),ar&&(s["stroke-width"]=ar),setClassAttribute(s,n,a)}}function setClassAttribute(t,n,a,s){var l=JSON.stringify(t),u=a.cssStyleCache[l];u||(u=a.zrId+"-cls-"+getClassId(),a.cssStyleCache[l]=u,a.cssNodes["."+u+":hover"]=t),n.class=n.class?n.class+" "+u:u}var round$1=Math.round;function isImageLike(t){return t&&isString$1(t.src)}function isCanvasLike(t){return t&&isFunction$1(t.toDataURL)}function setStyleAttrs(t,n,a,s){mapStyleToAttrs(function(l,u){var c=l==="fill"||l==="stroke";c&&isGradient(u)?setGradient(n,t,l,s):c&&isPattern(u)?setPattern(a,t,l,s):t[l]=u,c&&s.ssr&&u==="none"&&(t["pointer-events"]="visible")},n,a,!1),setShadow(a,t,s)}function setMetaData(t,n){var a=getElementSSRData(n);a&&(a.each(function(s,l){s!=null&&(t[(META_DATA_PREFIX+l).toLowerCase()]=s+"")}),n.isSilent()&&(t[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(t){return isAroundZero(t[0]-1)&&isAroundZero(t[1])&&isAroundZero(t[2])&&isAroundZero(t[3]-1)}function noTranslate(t){return isAroundZero(t[4])&&isAroundZero(t[5])}function setTransform(t,n,a){if(n&&!(noTranslate(n)&&noRotateScale(n))){var s=1e4;t.transform=noRotateScale(n)?"translate("+round$1(n[4]*s)/s+" "+round$1(n[5]*s)/s+")":getMatrixStr(n)}}function convertPolyShape(t,n,a){for(var s=t.points,l=[],u=0;u<s.length;u++)l.push(round$1(s[u][0]*a)/a),l.push(round$1(s[u][1]*a)/a);n.points=l.join(" ")}function validatePolyShape(t){return!t.smooth}function createAttrsConvert(t){var n=map$1(t,function(a){return typeof a=="string"?[a,a]:a});return function(a,s,l){for(var u=0;u<n.length;u++){var c=n[u],d=a[c[0]];d!=null&&(s[c[1]]=round$1(d*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(t){for(var n=t.animators,a=0;a<n.length;a++)if(n[a].targetName==="shape")return!0;return!1}function brushSVGPath(t,n){var a=t.style,s=t.shape,l=builtinShapesDef[t.type],u={},c=n.animation,d="path",Ct=t.style.strokePercent,ar=n.compress&&getPathPrecision(t)||4;if(l&&!n.willUpdate&&!(l[1]&&!l[1](s))&&!(c&&hasShapeAnimation(t))&&!(Ct<1)){d=t.type;var en=Math.pow(10,ar);l[0](s,u,en)}else{var tn=!t.path||t.shapeChanged();t.path||t.createPathProxy();var on=t.path;tn&&(on.beginPath(),t.buildPath(on,t.shape),t.pathUpdated());var fn=on.getVersion(),dn=t,Cn=dn.__svgPathBuilder;(dn.__svgPathVersion!==fn||!Cn||Ct!==dn.__svgPathStrokePercent)&&(Cn||(Cn=dn.__svgPathBuilder=new SVGPathRebuilder),Cn.reset(ar),on.rebuildPath(Cn,Ct),Cn.generateStr(),dn.__svgPathVersion=fn,dn.__svgPathStrokePercent=Ct),u.d=Cn.getStr()}return setTransform(u,t.transform),setStyleAttrs(u,a,t,n),setMetaData(u,t),n.animation&&createCSSAnimation(t,u,n),n.emphasis&&createCSSEmphasis(t,u,n),createVNode(d,t.id+"",u)}function brushSVGImage(t,n){var a=t.style,s=a.image;if(s&&!isString$1(s)&&(isImageLike(s)?s=s.src:isCanvasLike(s)&&(s=s.toDataURL())),!!s){var l=a.x||0,u=a.y||0,c=a.width,d=a.height,Ct={href:s,width:c,height:d};return l&&(Ct.x=l),u&&(Ct.y=u),setTransform(Ct,t.transform),setStyleAttrs(Ct,a,t,n),setMetaData(Ct,t),n.animation&&createCSSAnimation(t,Ct,n),createVNode("image",t.id+"",Ct)}}function brushSVGTSpan(t,n){var a=t.style,s=a.text;if(s!=null&&(s+=""),!(!s||isNaN(a.x)||isNaN(a.y))){var l=a.font||DEFAULT_FONT,u=a.x||0,c=adjustTextY$1(a.y||0,getLineHeight(l),a.textBaseline),d=TEXT_ALIGN_TO_ANCHOR[a.textAlign]||a.textAlign,Ct={"dominant-baseline":"central","text-anchor":d};if(hasSeparateFont(a)){var ar="",en=a.fontStyle,tn=parseFontSize(a.fontSize);if(!parseFloat(tn))return;var on=a.fontFamily||DEFAULT_FONT_FAMILY,fn=a.fontWeight;ar+="font-size:"+tn+";font-family:"+on+";",en&&en!=="normal"&&(ar+="font-style:"+en+";"),fn&&fn!=="normal"&&(ar+="font-weight:"+fn+";"),Ct.style=ar}else Ct.style="font: "+l;return s.match(/\s/)&&(Ct["xml:space"]="preserve"),u&&(Ct.x=u),c&&(Ct.y=c),setTransform(Ct,t.transform),setStyleAttrs(Ct,a,t,n),setMetaData(Ct,t),n.animation&&createCSSAnimation(t,Ct,n),createVNode("text",t.id+"",Ct,void 0,s)}}function brush(t,n){if(t instanceof Path)return brushSVGPath(t,n);if(t instanceof ZRImage)return brushSVGImage(t,n);if(t instanceof TSpan)return brushSVGTSpan(t,n)}function setShadow(t,n,a){var s=t.style;if(hasShadow(s)){var l=getShadowKey(t),u=a.shadowCache,c=u[l];if(!c){var d=t.getGlobalScale(),Ct=d[0],ar=d[1];if(!Ct||!ar)return;var en=s.shadowOffsetX||0,tn=s.shadowOffsetY||0,on=s.shadowBlur,fn=normalizeColor(s.shadowColor),dn=fn.opacity,Cn=fn.color,Rn=on/2/Ct,ax=on/2/ar,ox=Rn+" "+ax;c=a.zrId+"-s"+a.shadowIdx++,a.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:en/Ct,dy:tn/ar,stdDeviation:ox,"flood-color":Cn,"flood-opacity":dn})]),u[l]=c}n.filter=getIdURL(c)}}function setGradient(t,n,a,s){var l=t[a],u,c={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))u="linearGradient",c.x1=l.x,c.y1=l.y,c.x2=l.x2,c.y2=l.y2;else if(isRadialGradient(l))u="radialGradient",c.cx=retrieve2(l.x,.5),c.cy=retrieve2(l.y,.5),c.r=retrieve2(l.r,.5);else return;for(var d=l.colorStops,Ct=[],ar=0,en=d.length;ar<en;++ar){var tn=round4(d[ar].offset)*100+"%",on=d[ar].color,fn=normalizeColor(on),dn=fn.color,Cn=fn.opacity,Rn={offset:tn};Rn["stop-color"]=dn,Cn<1&&(Rn["stop-opacity"]=Cn),Ct.push(createVNode("stop",ar+"",Rn))}var ax=createVNode(u,"",c,Ct),ox=vNodeToString(ax),sx=s.gradientCache,lx=sx[ox];lx||(lx=s.zrId+"-g"+s.gradientIdx++,sx[ox]=lx,c.id=lx,s.defs[lx]=createVNode(u,lx,c,Ct)),n[a]=getIdURL(lx)}function setPattern(t,n,a,s){var l=t.style[a],u=t.getBoundingRect(),c={},d=l.repeat,Ct=d==="no-repeat",ar=d==="repeat-x",en=d==="repeat-y",tn;if(isImagePattern(l)){var on=l.imageWidth,fn=l.imageHeight,dn=void 0,Cn=l.image;if(isString$1(Cn)?dn=Cn:isImageLike(Cn)?dn=Cn.src:isCanvasLike(Cn)&&(dn=Cn.toDataURL()),typeof Image>"u"){var Rn="Image width/height must been given explictly in svg-ssr renderer.";assert(on,Rn),assert(fn,Rn)}else if(on==null||fn==null){var ax=function(hx,vx){if(hx){var yx=hx.elm,Sx=on||vx.width,_x=fn||vx.height;hx.tag==="pattern"&&(ar?(_x=1,Sx/=u.width):en&&(Sx=1,_x/=u.height)),hx.attrs.width=Sx,hx.attrs.height=_x,yx&&(yx.setAttribute("width",Sx),yx.setAttribute("height",_x))}},ox=createOrUpdateImage(dn,null,t,function(hx){Ct||ax(fx,hx),ax(tn,hx)});ox&&ox.width&&ox.height&&(on=on||ox.width,fn=fn||ox.height)}tn=createVNode("image","img",{href:dn,width:on,height:fn}),c.width=on,c.height=fn}else l.svgElement&&(tn=clone$4(l.svgElement),c.width=l.svgWidth,c.height=l.svgHeight);if(tn){var sx,lx;Ct?sx=lx=1:ar?(lx=1,sx=c.width/u.width):en?(sx=1,lx=c.height/u.height):c.patternUnits="userSpaceOnUse",sx!=null&&!isNaN(sx)&&(c.width=sx),lx!=null&&!isNaN(lx)&&(c.height=lx);var cx=getSRTTransformString(l);cx&&(c.patternTransform=cx);var fx=createVNode("pattern","",c,[tn]),gx=vNodeToString(fx),mx=s.patternCache,px=mx[gx];px||(px=s.zrId+"-p"+s.patternIdx++,mx[gx]=px,c.id=px,fx=s.defs[px]=createVNode("pattern",px,c,[tn])),n[a]=getIdURL(px)}}function setClipPath(t,n,a){var s=a.clipPathCache,l=a.defs,u=s[t.id];if(!u){u=a.zrId+"-c"+a.clipPathIdx++;var c={id:u};s[t.id]=u,l[u]=createVNode("clipPath",u,c,[brushSVGPath(t,a)])}n["clip-path"]=getIdURL(u)}function createTextNode(t){return document.createTextNode(t)}function insertBefore(t,n,a){t.insertBefore(n,a)}function removeChild(t,n){t.removeChild(n)}function appendChild(t,n){t.appendChild(n)}function parentNode(t){return t.parentNode}function nextSibling(t){return t.nextSibling}function setTextContent(t,n){t.textContent=n}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(t){return t===void 0}function isDef(t){return t!==void 0}function createKeyToOldIdx(t,n,a){for(var s={},l=n;l<=a;++l){var u=t[l].key;u!==void 0&&(s[u]=l)}return s}function sameVnode(t,n){var a=t.key===n.key,s=t.tag===n.tag;return s&&a}function createElm(t){var n,a=t.children,s=t.tag;if(isDef(s)){var l=t.elm=createElement(s);if(updateAttrs(emptyNode,t),isArray$1(a))for(n=0;n<a.length;++n){var u=a[n];u!=null&&appendChild(l,createElm(u))}else isDef(t.text)&&!isObject$3(t.text)&&appendChild(l,createTextNode(t.text))}else t.elm=createTextNode(t.text);return t.elm}function addVnodes(t,n,a,s,l){for(;s<=l;++s){var u=a[s];u!=null&&insertBefore(t,createElm(u),n)}}function removeVnodes(t,n,a,s){for(;a<=s;++a){var l=n[a];if(l!=null)if(isDef(l.tag)){var u=parentNode(l.elm);removeChild(u,l.elm)}else removeChild(t,l.elm)}}function updateAttrs(t,n){var a,s=n.elm,l=t&&t.attrs||{},u=n.attrs||{};if(l!==u){for(a in u){var c=u[a],d=l[a];d!==c&&(c===!0?s.setAttribute(a,""):c===!1?s.removeAttribute(a):a==="style"?s.style.cssText=c:a.charCodeAt(0)!==xChar?s.setAttribute(a,c):a==="xmlns:xlink"||a==="xmlns"?s.setAttributeNS(XMLNS,a,c):a.charCodeAt(3)===colonChar?s.setAttributeNS(XML_NAMESPACE,a,c):a.charCodeAt(5)===colonChar?s.setAttributeNS(XLINKNS,a,c):s.setAttribute(a,c))}for(a in l)a in u||s.removeAttribute(a)}}function updateChildren(t,n,a){for(var s=0,l=0,u=n.length-1,c=n[0],d=n[u],Ct=a.length-1,ar=a[0],en=a[Ct],tn,on,fn,dn;s<=u&&l<=Ct;)c==null?c=n[++s]:d==null?d=n[--u]:ar==null?ar=a[++l]:en==null?en=a[--Ct]:sameVnode(c,ar)?(patchVnode(c,ar),c=n[++s],ar=a[++l]):sameVnode(d,en)?(patchVnode(d,en),d=n[--u],en=a[--Ct]):sameVnode(c,en)?(patchVnode(c,en),insertBefore(t,c.elm,nextSibling(d.elm)),c=n[++s],en=a[--Ct]):sameVnode(d,ar)?(patchVnode(d,ar),insertBefore(t,d.elm,c.elm),d=n[--u],ar=a[++l]):(isUndef(tn)&&(tn=createKeyToOldIdx(n,s,u)),on=tn[ar.key],isUndef(on)?insertBefore(t,createElm(ar),c.elm):(fn=n[on],fn.tag!==ar.tag?insertBefore(t,createElm(ar),c.elm):(patchVnode(fn,ar),n[on]=void 0,insertBefore(t,fn.elm,c.elm))),ar=a[++l]);(s<=u||l<=Ct)&&(s>u?(dn=a[Ct+1]==null?null:a[Ct+1].elm,addVnodes(t,dn,a,l,Ct)):removeVnodes(t,n,s,u))}function patchVnode(t,n){var a=n.elm=t.elm,s=t.children,l=n.children;t!==n&&(updateAttrs(t,n),isUndef(n.text)?isDef(s)&&isDef(l)?s!==l&&updateChildren(a,s,l):isDef(l)?(isDef(t.text)&&setTextContent(a,""),addVnodes(a,null,l,0,l.length-1)):isDef(s)?removeVnodes(a,s,0,s.length-1):isDef(t.text)&&setTextContent(a,""):t.text!==n.text&&(isDef(s)&&removeVnodes(a,s,0,s.length-1),setTextContent(a,n.text)))}function patch(t,n){if(sameVnode(t,n))patchVnode(t,n);else{var a=t.elm,s=parentNode(a);createElm(n),s!==null&&(insertBefore(s,n.elm,nextSibling(a)),removeVnodes(s,[t],0,0))}return n}var svgId=0,SVGPainter=(function(){function t(n,a,s){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=a,this._opts=s=extend({},s),this.root=n,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(s.width,s.height),n&&!s.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(u),n.appendChild(l)}this.resize(s.width,s.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,n),this._oldVNode=n}},t.prototype.renderOneToVNode=function(n){return brush(n,createBrushScope(this._id))},t.prototype.renderToVNode=function(n){n=n||{};var a=this.storage.getDisplayList(!0),s=this._width,l=this._height,u=createBrushScope(this._id);u.animation=n.animation,u.willUpdate=n.willUpdate,u.compress=n.compress,u.emphasis=n.emphasis,u.ssr=this._opts.ssr;var c=[],d=this._bgVNode=createBackgroundVNode(s,l,this._backgroundColor,u);d&&c.push(d);var Ct=n.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(a,u,Ct?Ct.children:c),Ct&&c.push(Ct);var ar=map$1(keys(u.defs),function(on){return u.defs[on]});if(ar.length&&c.push(createVNode("defs","defs",{},ar)),n.animation){var en=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if(en){var tn=createVNode("style","stl",{},[],en);c.push(tn)}}return createSVGVNode(s,l,c,n.useViewBox)},t.prototype.renderToString=function(n){return n=n||{},vNodeToString(this.renderToVNode({animation:retrieve2(n.cssAnimation,!0),emphasis:retrieve2(n.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(n.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(n,a,s){for(var l=n.length,u=[],c=0,d,Ct,ar=0,en=0;en<l;en++){var tn=n[en];if(!tn.invisible){var on=tn.__clipPaths,fn=on&&on.length||0,dn=Ct&&Ct.length||0,Cn=void 0;for(Cn=Math.max(fn-1,dn-1);Cn>=0&&!(on&&Ct&&on[Cn]===Ct[Cn]);Cn--);for(var Rn=dn-1;Rn>Cn;Rn--)c--,d=u[c-1];for(var ax=Cn+1;ax<fn;ax++){var ox={};setClipPath(on[ax],ox,a);var sx=createVNode("g","clip-g-"+ar++,ox,[]);(d?d.children:s).push(sx),u[c++]=sx,d=sx}Ct=on;var lx=brush(tn,a);lx&&(d?d.children:s).push(lx)}}},t.prototype.resize=function(n,a){var s=this._opts,l=this.root,u=this._viewport;if(n!=null&&(s.width=n),a!=null&&(s.height=a),l&&u&&(u.style.display="none",n=getSize$1(l,0,s),a=getSize$1(l,1,s),u.style.display=""),this._width!==n||this._height!==a){if(this._width=n,this._height=a,u){var c=u.style;c.width=n+"px",c.height=a+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var d=this._svgDom;d&&(d.setAttribute("width",n),d.setAttribute("height",a));var Ct=this._bgVNode&&this._bgVNode.elm;Ct&&(Ct.setAttribute("width",n),Ct.setAttribute("height",a))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(n){var a=this.renderToString(),s="data:image/svg+xml;";return n?(a=encodeBase64(a),a&&s+"base64,"+a):s+"charset=UTF-8,"+encodeURIComponent(a)},t})();function createMethodNotSupport(t){return function(){}}function createBackgroundVNode(t,n,a,s){var l;if(a&&a!=="none")if(l=createVNode("rect","bg",{width:t,height:n,x:"0",y:"0"}),isGradient(a))setGradient({fill:a},l.attrs,"fill",s);else if(isPattern(a))setPattern({style:{fill:a},dirty:noop,getBoundingRect:function(){return{width:t,height:n}}},l.attrs,"fill",s);else{var u=normalizeColor(a),c=u.color,d=u.opacity;l.attrs.fill=c,d<1&&(l.attrs["fill-opacity"]=d)}return l}function install$S(t){t.registerPainter("svg",SVGPainter)}function createDom(t,n,a){var s=platformApi.createCanvas(),l=n.getWidth(),u=n.getHeight(),c=s.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=l+"px",c.height=u+"px",s.setAttribute("data-zr-dom-id",t)),s.width=l*a,s.height=u*a,s}var Layer=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var c;l=l||devicePixelRatio,typeof a=="string"?c=createDom(a,s,l):isObject$3(a)&&(c=a,a=c.id),u.id=a,u.dom=c;var d=c.style;return d&&(disableUserSelect(c),c.onselectstart=function(){return!1},d.padding="0",d.margin="0",d.borderWidth="0"),u.painter=s,u.dpr=l,u}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},n.prototype.createRepaintRects=function(a,s,l,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],d=this.maxRepaintRectCount,Ct=!1,ar=new BoundingRect(0,0,0,0);function en(ox){if(!(!ox.isFinite()||ox.isZero()))if(c.length===0){var sx=new BoundingRect(0,0,0,0);sx.copy(ox),c.push(sx)}else{for(var lx=!1,cx=1/0,fx=0,gx=0;gx<c.length;++gx){var mx=c[gx];if(mx.intersect(ox)){var px=new BoundingRect(0,0,0,0);px.copy(mx),px.union(ox),c[gx]=px,lx=!0;break}else if(Ct){ar.copy(ox),ar.union(mx);var hx=ox.width*ox.height,vx=mx.width*mx.height,yx=ar.width*ar.height,Sx=yx-hx-vx;Sx<cx&&(cx=Sx,fx=gx)}}if(Ct&&(c[fx].union(ox),lx=!0),!lx){var sx=new BoundingRect(0,0,0,0);sx.copy(ox),c.push(sx)}Ct||(Ct=c.length>=d)}}for(var tn=this.__startIndex;tn<this.__endIndex;++tn){var on=a[tn];if(on){var fn=on.shouldBePainted(l,u,!0,!0),dn=on.__isRendered&&(on.__dirty&REDRAW_BIT||!fn)?on.getPrevPaintRect():null;dn&&en(dn);var Cn=fn&&(on.__dirty&REDRAW_BIT||!on.__isRendered)?on.getPaintRect():null;Cn&&en(Cn)}}for(var tn=this.__prevStartIndex;tn<this.__prevEndIndex;++tn){var on=s[tn],fn=on&&on.shouldBePainted(l,u,!0,!0);if(on&&(!fn||!on.__zr)&&on.__isRendered){var dn=on.getPrevPaintRect();dn&&en(dn)}}var Rn;do{Rn=!1;for(var tn=0;tn<c.length;){if(c[tn].isZero()){c.splice(tn,1);continue}for(var ax=tn+1;ax<c.length;)c[tn].intersect(c[ax])?(Rn=!0,c[tn].union(c[ax]),c.splice(ax,1)):ax++;tn++}}while(Rn);return this._paintRects=c,c},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(a,s){var l=this.dpr,u=this.dom,c=u.style,d=this.domBack;c&&(c.width=a+"px",c.height=s+"px"),u.width=a*l,u.height=s*l,d&&(d.width=a*l,d.height=s*l,l!==1&&this.ctxBack.scale(l,l))},n.prototype.clear=function(a,s,l){var u=this.dom,c=this.ctx,d=u.width,Ct=u.height;s=s||this.clearColor;var ar=this.motionBlur&&!a,en=this.lastFrameAlpha,tn=this.dpr,on=this;ar&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,d/tn,Ct/tn));var fn=this.domBack;function dn(Cn,Rn,ax,ox){if(c.clearRect(Cn,Rn,ax,ox),s&&s!=="transparent"){var sx=void 0;if(isGradientObject(s)){var lx=s.global||s.__width===ax&&s.__height===ox;sx=lx&&s.__canvasGradient||getCanvasGradient(c,s,{x:0,y:0,width:ax,height:ox}),s.__canvasGradient=sx,s.__width=ax,s.__height=ox}else isImagePatternObject(s)&&(s.scaleX=s.scaleX||tn,s.scaleY=s.scaleY||tn,sx=createCanvasPattern(c,s,{dirty:function(){on.setUnpainted(),on.painter.refresh()}}));c.save(),c.fillStyle=sx||s,c.fillRect(Cn,Rn,ax,ox),c.restore()}ar&&(c.save(),c.globalAlpha=en,c.drawImage(fn,Cn,Rn,ax,ox),c.restore())}!l||ar?dn(0,0,d,Ct):l.length&&each$f(l,function(Cn){dn(Cn.x*tn,Cn.y*tn,Cn.width*tn,Cn.height*tn)})},n})(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function createRoot(t,n){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+t+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var CanvasPainter=(function(){function t(n,a,s,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=s=extend({},s||{}),this.dpr=s.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=n;var c=n.style;c&&(disableUserSelect(n),n.innerHTML=""),this.storage=a;var d=this._zlevelList;this._prevDisplayList=[];var Ct=this._layers;if(u){var en=n,tn=en.width,on=en.height;s.width!=null&&(tn=s.width),s.height!=null&&(on=s.height),this.dpr=s.devicePixelRatio||1,en.width=tn*this.dpr,en.height=on*this.dpr,this._width=tn,this._height=on;var fn=new Layer(en,this,this.dpr);fn.__builtin__=!0,fn.initContext(),Ct[CANVAS_ZLEVEL]=fn,fn.zlevel=CANVAS_ZLEVEL,d.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize$1(n,0,s),this._height=getSize$1(n,1,s);var ar=this._domRoot=createRoot(this._width,this._height);n.appendChild(ar)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.refresh=function(n){var a=this.storage.getDisplayList(!0),s=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,s,n,this._redrawId);for(var u=0;u<l.length;u++){var c=l[u],d=this._layers[c];if(!d.__builtin__&&d.refresh){var Ct=u===0?this._backgroundColor:null;d.refresh(Ct)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(n){var a=n.length,s=this._hoverlayer;if(s&&s.clear(),!!a){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,c=0;c<a;c++){var d=n[c];d.__inHover&&(s||(s=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=s.ctx,u.save()),brush$1(u,d,l,c===a-1))}u&&u.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},t.prototype.paintOne=function(n,a){brushSingle(n,a)},t.prototype._paintList=function(n,a,s,l){if(this._redrawId===l){s=s||!1,this._updateLayerStatus(n);var u=this._doPaintList(n,a,s),c=u.finished,d=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),d&&this._paintHoverList(n),c)this.eachLayer(function(ar){ar.afterBrush&&ar.afterBrush()});else{var Ct=this;requestAnimationFrame$1(function(){Ct._paintList(n,a,s,l)})}}},t.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,a=this._domRoot.width,s=this._domRoot.height;n.clearRect(0,0,a,s),this.eachBuiltinLayer(function(l){l.virtual&&n.drawImage(l.dom,0,0,a,s)})},t.prototype._doPaintList=function(n,a,s){for(var l=this,u=[],c=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var Ct=this._zlevelList[d],ar=this._layers[Ct];ar.__builtin__&&ar!==this._hoverlayer&&(ar.__dirty||s)&&u.push(ar)}for(var en=!0,tn=!1,on=function(Cn){var Rn=u[Cn],ax=Rn.ctx,ox=c&&Rn.createRepaintRects(n,a,fn._width,fn._height),sx=s?Rn.__startIndex:Rn.__drawIndex,lx=!s&&Rn.incremental&&Date.now,cx=lx&&Date.now(),fx=Rn.zlevel===fn._zlevelList[0]?fn._backgroundColor:null;if(Rn.__startIndex===Rn.__endIndex)Rn.clear(!1,fx,ox);else if(sx===Rn.__startIndex){var gx=n[sx];(!gx.incremental||!gx.notClear||s)&&Rn.clear(!1,fx,ox)}sx===-1&&(console.error("For some unknown reason. drawIndex is -1"),sx=Rn.__startIndex);var mx,px=function(Sx){var _x={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(mx=sx;mx<Rn.__endIndex;mx++){var Ex=n[mx];if(Ex.__inHover&&(tn=!0),l._doPaintEl(Ex,Rn,c,Sx,_x,mx===Rn.__endIndex-1),lx){var bx=Date.now()-cx;if(bx>15)break}}_x.prevElClipPaths&&ax.restore()};if(ox)if(ox.length===0)mx=Rn.__endIndex;else for(var hx=fn.dpr,vx=0;vx<ox.length;++vx){var yx=ox[vx];ax.save(),ax.beginPath(),ax.rect(yx.x*hx,yx.y*hx,yx.width*hx,yx.height*hx),ax.clip(),px(yx),ax.restore()}else ax.save(),px(),ax.restore();Rn.__drawIndex=mx,Rn.__drawIndex<Rn.__endIndex&&(en=!1)},fn=this,dn=0;dn<u.length;dn++)on(dn);return env.wxa&&each$f(this._layers,function(Cn){Cn&&Cn.ctx&&Cn.ctx.draw&&Cn.ctx.draw()}),{finished:en,needsRefreshHover:tn}},t.prototype._doPaintEl=function(n,a,s,l,u,c){var d=a.ctx;if(s){var Ct=n.getPaintRect();(!l||Ct&&Ct.intersect(l))&&(brush$1(d,n,u,c),n.setPrevPaintRect(Ct))}else brush$1(d,n,u,c)},t.prototype.getLayer=function(n,a){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var s=this._layers[n];return s||(s=new Layer("zr_"+n,this,this.dpr),s.zlevel=n,s.__builtin__=!0,this._layerConfig[n]?merge(s,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(s,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),a&&(s.virtual=a),this.insertLayer(n,s),s.initContext()),s},t.prototype.insertLayer=function(n,a){var s=this._layers,l=this._zlevelList,u=l.length,c=this._domRoot,d=null,Ct=-1;if(!s[n]&&isLayerValid(a)){if(u>0&&n>l[0]){for(Ct=0;Ct<u-1&&!(l[Ct]<n&&l[Ct+1]>n);Ct++);d=s[l[Ct]]}if(l.splice(Ct+1,0,n),s[n]=a,!a.virtual)if(d){var ar=d.dom;ar.nextSibling?c.insertBefore(a.dom,ar.nextSibling):c.appendChild(a.dom)}else c.firstChild?c.insertBefore(a.dom,c.firstChild):c.appendChild(a.dom);a.painter||(a.painter=this)}},t.prototype.eachLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l];n.call(a,this._layers[u],u)}},t.prototype.eachBuiltinLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l],c=this._layers[u];c.__builtin__&&n.call(a,c,u)}},t.prototype.eachOtherLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l],c=this._layers[u];c.__builtin__||n.call(a,c,u)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(tn,on){tn.__dirty=tn.__used=!1});function a(tn){u&&(u.__endIndex!==tn&&(u.__dirty=!0),u.__endIndex=tn)}if(this._singleCanvas)for(var s=1;s<n.length;s++){var l=n[s];if(l.zlevel!==n[s-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var u=null,c=0,d,Ct;for(Ct=0;Ct<n.length;Ct++){var l=n[Ct],ar=l.zlevel,en=void 0;d!==ar&&(d=ar,c=0),l.incremental?(en=this.getLayer(ar+INCREMENTAL_INC,this._needsManuallyCompositing),en.incremental=!0,c=1):en=this.getLayer(ar+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),en.__builtin__||logError("ZLevel "+ar+" has been used by unkown layer "+en.id),en!==u&&(en.__used=!0,en.__startIndex!==Ct&&(en.__dirty=!0),en.__startIndex=Ct,en.incremental?en.__drawIndex=-1:en.__drawIndex=Ct,a(Ct),u=en),l.__dirty&REDRAW_BIT&&!l.__inHover&&(en.__dirty=!0,en.incremental&&en.__drawIndex<0&&(en.__drawIndex=Ct))}a(Ct),this.eachBuiltinLayer(function(tn,on){!tn.__used&&tn.getElementCount()>0&&(tn.__dirty=!0,tn.__startIndex=tn.__endIndex=tn.__drawIndex=0),tn.__dirty&&tn.__drawIndex<0&&(tn.__drawIndex=tn.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(n){n.clear()},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$f(this._layers,function(a){a.setUnpainted()})},t.prototype.configLayer=function(n,a){if(a){var s=this._layerConfig;s[n]?merge(s[n],a,!0):s[n]=a;for(var l=0;l<this._zlevelList.length;l++){var u=this._zlevelList[l];if(u===n||u===n+EL_AFTER_INCREMENTAL_INC){var c=this._layers[u];merge(c,s[n],!0)}}}},t.prototype.delLayer=function(n){var a=this._layers,s=this._zlevelList,l=a[n];l&&(l.dom.parentNode.removeChild(l.dom),delete a[n],s.splice(indexOf(s,n),1))},t.prototype.resize=function(n,a){if(this._domRoot.style){var s=this._domRoot;s.style.display="none";var l=this._opts,u=this.root;if(n!=null&&(l.width=n),a!=null&&(l.height=a),n=getSize$1(u,0,l),a=getSize$1(u,1,l),s.style.display="",this._width!==n||a!==this._height){s.style.width=n+"px",s.style.height=a+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(n,a);this.refresh(!0)}this._width=n,this._height=a}else{if(n==null||a==null)return;this._width=n,this._height=a,this.getLayer(CANVAS_ZLEVEL).resize(n,a)}return this},t.prototype.clearLayer=function(n){var a=this._layers[n];a&&a.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var a=new Layer("image",this,n.pixelRatio||this.dpr);a.initContext(),a.clear(!1,n.backgroundColor||this._backgroundColor);var s=a.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var l=a.dom.width,u=a.dom.height;this.eachLayer(function(tn){tn.__builtin__?s.drawImage(tn.dom,0,0,l,u):tn.renderToCanvas&&(s.save(),tn.renderToCanvas(s),s.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},d=this.storage.getDisplayList(!0),Ct=0,ar=d.length;Ct<ar;Ct++){var en=d[Ct];brush$1(s,en,c,Ct===ar-1)}return a.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t})();function install$R(t){t.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(a){var s=new Group$3,l=createSymbol$1("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);s.add(l),l.setStyle(a.lineStyle);var u=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),d=u==="none"?"circle":u,Ct=a.itemHeight*.8,ar=createSymbol$1(d,(a.itemWidth-Ct)/2,(a.itemHeight-Ct)/2,Ct,Ct,a.itemStyle.fill);s.add(ar),ar.setStyle(a.itemStyle);var en=a.iconRotate==="inherit"?c:a.iconRotate||0;return ar.rotation=en*Math.PI/180,ar.setOrigin([a.itemWidth/2,a.itemHeight/2]),d.indexOf("empty")>-1&&(ar.style.stroke=ar.style.fill,ar.style.fill="#fff",ar.style.lineWidth=2),s},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n})(SeriesModel);function getDefaultLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel"),s=a.length;if(s===1){var l=retrieveRawValue(t,n,a[0]);return l!=null?l+"":null}else if(s){for(var u=[],c=0;c<a.length;c++)u.push(retrieveRawValue(t,n,a[c]));return u.join(" ")}}function getDefaultInterpolatedLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel");if(!isArray$1(n))return n+"";for(var s=[],l=0;l<a.length;l++){var u=t.getDimensionIndex(a[l]);u>=0&&s.push(n[u])}return s.join(" ")}var Symbol$1=(function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this)||this;return c.updateData(a,s,l,u),c}return n.prototype._createSymbol=function(a,s,l,u,c){this.removeAll();var d=createSymbol$1(a,-1,-1,2,2,null,c);d.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),d.drift=driftSymbol,this._symbolType=a,this.add(d)},n.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(a,s){var l=this.childAt(0);l.zlevel=a,l.z=s},n.prototype.setDraggable=function(a,s){var l=this.childAt(0);l.draggable=a,l.cursor=!s&&a?"move":l.cursor},n.prototype.updateData=function(a,s,l,u){this.silent=!1;var c=a.getItemVisual(s,"symbol")||"circle",d=a.hostModel,Ct=n.getSymbolSize(a,s),ar=c!==this._symbolType,en=u&&u.disableAnimation;if(ar){var tn=a.getItemVisual(s,"symbolKeepAspect");this._createSymbol(c,a,s,Ct,tn)}else{var on=this.childAt(0);on.silent=!1;var fn={scaleX:Ct[0]/2,scaleY:Ct[1]/2};en?on.attr(fn):updateProps$1(on,fn,d,s),saveOldStyle(on)}if(this._updateCommon(a,s,Ct,l,u),ar){var on=this.childAt(0);if(!en){var fn={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:on.style.opacity}};on.scaleX=on.scaleY=0,on.style.opacity=0,initProps(on,fn,d,s)}}en&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(a,s,l,u,c){var d=this.childAt(0),Ct=a.hostModel,ar,en,tn,on,fn,dn,Cn,Rn,ax;if(u&&(ar=u.emphasisItemStyle,en=u.blurItemStyle,tn=u.selectItemStyle,on=u.focus,fn=u.blurScope,Cn=u.labelStatesModels,Rn=u.hoverScale,ax=u.cursorStyle,dn=u.emphasisDisabled),!u||a.hasItemOption){var ox=u&&u.itemModel?u.itemModel:a.getItemModel(s),sx=ox.getModel("emphasis");ar=sx.getModel("itemStyle").getItemStyle(),tn=ox.getModel(["select","itemStyle"]).getItemStyle(),en=ox.getModel(["blur","itemStyle"]).getItemStyle(),on=sx.get("focus"),fn=sx.get("blurScope"),dn=sx.get("disabled"),Cn=getLabelStatesModels(ox),Rn=sx.getShallow("scale"),ax=ox.getShallow("cursor")}var lx=a.getItemVisual(s,"symbolRotate");d.attr("rotation",(lx||0)*Math.PI/180||0);var cx=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),l);cx&&(d.x=cx[0],d.y=cx[1]),ax&&d.attr("cursor",ax);var fx=a.getItemVisual(s,"style"),gx=fx.fill;if(d instanceof ZRImage){var mx=d.style;d.useStyle(extend({image:mx.image,x:mx.x,y:mx.y,width:mx.width,height:mx.height},fx))}else d.__isEmptyBrush?d.useStyle(extend({},fx)):d.useStyle(fx),d.style.decal=null,d.setColor(gx,c&&c.symbolInnerColor),d.style.strokeNoScale=!0;var px=a.getItemVisual(s,"liftZ"),hx=this._z2;px!=null?hx==null&&(this._z2=d.z2,d.z2+=px):hx!=null&&(d.z2=hx,this._z2=null);var vx=c&&c.useNameLabel;setLabelStyle(d,Cn,{labelFetcher:Ct,labelDataIndex:s,defaultText:yx,inheritColor:gx,defaultOpacity:fx.opacity});function yx(Ex){return vx?a.getName(Ex):getDefaultLabel(a,Ex)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var Sx=d.ensureState("emphasis");Sx.style=ar,d.ensureState("select").style=tn,d.ensureState("blur").style=en;var _x=Rn==null||Rn===!0?Math.max(1.1,3/this._sizeY):isFinite(Rn)&&Rn>0?+Rn:1;Sx.scaleX=this._sizeX*_x,Sx.scaleY=this._sizeY*_x,this.setSymbolScale(1),toggleHoverEmphasis(this,on,fn,dn)},n.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},n.prototype.fadeOut=function(a,s,l){var u=this.childAt(0),c=getECData(this).dataIndex,d=l&&l.animation;if(this.silent=u.silent=!0,l&&l.fadeLabel){var Ct=u.getTextContent();Ct&&removeElement(Ct,{style:{opacity:0}},s,{dataIndex:c,removeOpt:d,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:c,cb:a,removeOpt:d})},n.getSymbolSize=function(a,s){return normalizeSymbolSize(a.getItemVisual(s,"symbolSize"))},n})(Group$3);function driftSymbol(t,n){this.parent.drift(t,n)}function symbolNeedsDraw$1(t,n,a,s){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(s.isIgnore&&s.isIgnore(a))&&!(s.clipShape&&!s.clipShape.contain(n[0],n[1]))&&t.getItemVisual(a,"symbol")!=="none"}function normalizeUpdateOpt(t){return t!=null&&!isObject$3(t)&&(t={isIgnore:t}),t||{}}function makeSeriesScope$2(t){var n=t.hostModel,a=n.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=(function(){function t(n){this.group=new Group$3,this._SymbolCtor=n||Symbol$1}return t.prototype.updateData=function(n,a){this._progressiveEls=null,a=normalizeUpdateOpt(a);var s=this.group,l=n.hostModel,u=this._data,c=this._SymbolCtor,d=a.disableAnimation,Ct=makeSeriesScope$2(n),ar={disableAnimation:d},en=a.getSymbolPoint||function(tn){return n.getItemLayout(tn)};u||s.removeAll(),n.diff(u).add(function(tn){var on=en(tn);if(symbolNeedsDraw$1(n,on,tn,a)){var fn=new c(n,tn,Ct,ar);fn.setPosition(on),n.setItemGraphicEl(tn,fn),s.add(fn)}}).update(function(tn,on){var fn=u.getItemGraphicEl(on),dn=en(tn);if(!symbolNeedsDraw$1(n,dn,tn,a)){s.remove(fn);return}var Cn=n.getItemVisual(tn,"symbol")||"circle",Rn=fn&&fn.getSymbolType&&fn.getSymbolType();if(!fn||Rn&&Rn!==Cn)s.remove(fn),fn=new c(n,tn,Ct,ar),fn.setPosition(dn);else{fn.updateData(n,tn,Ct,ar);var ax={x:dn[0],y:dn[1]};d?fn.attr(ax):updateProps$1(fn,ax,l)}s.add(fn),n.setItemGraphicEl(tn,fn)}).remove(function(tn){var on=u.getItemGraphicEl(tn);on&&on.fadeOut(function(){s.remove(on)},l)}).execute(),this._getSymbolPoint=en,this._data=n},t.prototype.updateLayout=function(){var n=this,a=this._data;a&&a.eachItemGraphicEl(function(s,l){var u=n._getSymbolPoint(l);s.setPosition(u),s.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$2(n),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a,s){this._progressiveEls=[],s=normalizeUpdateOpt(s);function l(Ct){Ct.isGroup||(Ct.incremental=!0,Ct.ensureState("emphasis").hoverLayer=!0)}for(var u=n.start;u<n.end;u++){var c=a.getItemLayout(u);if(symbolNeedsDraw$1(a,c,u,s)){var d=new this._SymbolCtor(a,u,this._seriesScope);d.traverse(l),d.setPosition(c),this.group.add(d),a.setItemGraphicEl(u,d),this._progressiveEls.push(d)}}},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype.remove=function(n){var a=this.group,s=this._data;s&&n?s.eachItemGraphicEl(function(l){l.fadeOut(function(){a.remove(l)},s.hostModel)}):a.removeAll()},t})();function prepareDataCoordInfo(t,n,a){var s=t.getBaseAxis(),l=t.getOtherAxis(s),u=getValueStart(l,a),c=s.dim,d=l.dim,Ct=n.mapDimension(d),ar=n.mapDimension(c),en=d==="x"||d==="radius"?1:0,tn=map$1(t.dimensions,function(dn){return n.mapDimension(dn)}),on=!1,fn=n.getCalculationInfo("stackResultDimension");return isDimensionStacked(n,tn[0])&&(on=!0,tn[0]=fn),isDimensionStacked(n,tn[1])&&(on=!0,tn[1]=fn),{dataDimsForPoint:tn,valueStart:u,valueAxisDim:d,baseAxisDim:c,stacked:!!on,valueDim:Ct,baseDim:ar,baseDataOffset:en,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function getValueStart(t,n){var a=0,s=t.scale.getExtent();return n==="start"?a=s[0]:n==="end"?a=s[1]:isNumber(n)&&!isNaN(n)?a=n:s[0]>0?a=s[0]:s[1]<0&&(a=s[1]),a}function getStackedOnPoint(t,n,a,s){var l=NaN;t.stacked&&(l=a.get(a.getCalculationInfo("stackedOverDimension"),s)),isNaN(l)&&(l=t.valueStart);var u=t.baseDataOffset,c=[];return c[u]=a.get(t.baseDim,s),c[1-u]=l,n.dataToPoint(c)}function diffData(t,n){var a=[];return n.diff(t).add(function(s){a.push({cmd:"+",idx:s})}).update(function(s,l){a.push({cmd:"=",idx:l,idx1:s})}).remove(function(s){a.push({cmd:"-",idx:s})}).execute(),a}function lineAnimationDiff(t,n,a,s,l,u,c,d){for(var Ct=diffData(t,n),ar=[],en=[],tn=[],on=[],fn=[],dn=[],Cn=[],Rn=prepareDataCoordInfo(l,n,c),ax=t.getLayout("points")||[],ox=n.getLayout("points")||[],sx=0;sx<Ct.length;sx++){var lx=Ct[sx],cx=!0,fx=void 0,gx=void 0;switch(lx.cmd){case"=":fx=lx.idx*2,gx=lx.idx1*2;var mx=ax[fx],px=ax[fx+1],hx=ox[gx],vx=ox[gx+1];(isNaN(mx)||isNaN(px))&&(mx=hx,px=vx),ar.push(mx,px),en.push(hx,vx),tn.push(a[fx],a[fx+1]),on.push(s[gx],s[gx+1]),Cn.push(n.getRawIndex(lx.idx1));break;case"+":var yx=lx.idx,Sx=Rn.dataDimsForPoint,_x=l.dataToPoint([n.get(Sx[0],yx),n.get(Sx[1],yx)]);gx=yx*2,ar.push(_x[0],_x[1]),en.push(ox[gx],ox[gx+1]);var Ex=getStackedOnPoint(Rn,l,n,yx);tn.push(Ex[0],Ex[1]),on.push(s[gx],s[gx+1]),Cn.push(n.getRawIndex(yx));break;case"-":cx=!1}cx&&(fn.push(lx),dn.push(dn.length))}dn.sort(function(Nx,Bx){return Cn[Nx]-Cn[Bx]});for(var bx=ar.length,Ax=createFloat32Array(bx),Mx=createFloat32Array(bx),Rx=createFloat32Array(bx),Cx=createFloat32Array(bx),Lx=[],sx=0;sx<dn.length;sx++){var qx=dn[sx],Ix=sx*2,Px=qx*2;Ax[Ix]=ar[Px],Ax[Ix+1]=ar[Px+1],Mx[Ix]=en[Px],Mx[Ix+1]=en[Px+1],Rx[Ix]=tn[Px],Rx[Ix+1]=tn[Px+1],Cx[Ix]=on[Px],Cx[Ix+1]=on[Px+1],Lx[sx]=fn[qx]}return{current:Ax,next:Mx,stackedOnCurrent:Rx,stackedOnNext:Cx,status:Lx}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(t,n){return isNaN(t)||isNaN(n)}function drawSegment(t,n,a,s,l,u,c,d,Ct){for(var ar,en,tn,on,fn,dn,Cn=a,Rn=0;Rn<s;Rn++){var ax=n[Cn*2],ox=n[Cn*2+1];if(Cn>=l||Cn<0)break;if(isPointNull$1(ax,ox)){if(Ct){Cn+=u;continue}break}if(Cn===a)t[u>0?"moveTo":"lineTo"](ax,ox),tn=ax,on=ox;else{var sx=ax-ar,lx=ox-en;if(sx*sx+lx*lx<.5){Cn+=u;continue}if(c>0){for(var cx=Cn+u,fx=n[cx*2],gx=n[cx*2+1];fx===ax&&gx===ox&&Rn<s;)Rn++,cx+=u,Cn+=u,fx=n[cx*2],gx=n[cx*2+1],ax=n[Cn*2],ox=n[Cn*2+1],sx=ax-ar,lx=ox-en;var mx=Rn+1;if(Ct)for(;isPointNull$1(fx,gx)&&mx<s;)mx++,cx+=u,fx=n[cx*2],gx=n[cx*2+1];var px=.5,hx=0,vx=0,yx=void 0,Sx=void 0;if(mx>=s||isPointNull$1(fx,gx))fn=ax,dn=ox;else{hx=fx-ar,vx=gx-en;var _x=ax-ar,Ex=fx-ax,bx=ox-en,Ax=gx-ox,Mx=void 0,Rx=void 0;if(d==="x"){Mx=Math.abs(_x),Rx=Math.abs(Ex);var Cx=hx>0?1:-1;fn=ax-Cx*Mx*c,dn=ox,yx=ax+Cx*Rx*c,Sx=ox}else if(d==="y"){Mx=Math.abs(bx),Rx=Math.abs(Ax);var Lx=vx>0?1:-1;fn=ax,dn=ox-Lx*Mx*c,yx=ax,Sx=ox+Lx*Rx*c}else Mx=Math.sqrt(_x*_x+bx*bx),Rx=Math.sqrt(Ex*Ex+Ax*Ax),px=Rx/(Rx+Mx),fn=ax-hx*c*(1-px),dn=ox-vx*c*(1-px),yx=ax+hx*c*px,Sx=ox+vx*c*px,yx=mathMin$5(yx,mathMax$5(fx,ax)),Sx=mathMin$5(Sx,mathMax$5(gx,ox)),yx=mathMax$5(yx,mathMin$5(fx,ax)),Sx=mathMax$5(Sx,mathMin$5(gx,ox)),hx=yx-ax,vx=Sx-ox,fn=ax-hx*Mx/Rx,dn=ox-vx*Mx/Rx,fn=mathMin$5(fn,mathMax$5(ar,ax)),dn=mathMin$5(dn,mathMax$5(en,ox)),fn=mathMax$5(fn,mathMin$5(ar,ax)),dn=mathMax$5(dn,mathMin$5(en,ox)),hx=ax-fn,vx=ox-dn,yx=ax+hx*Rx/Mx,Sx=ox+vx*Rx/Mx}t.bezierCurveTo(tn,on,fn,dn,ax,ox),tn=yx,on=Sx}else t.lineTo(ax,ox)}ar=ax,en=ox,Cn+=u}return Rn}var ECPolylineShape=(function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t})(),ECPolyline=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-polyline",s}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ECPolylineShape},n.prototype.buildPath=function(a,s){var l=s.points,u=0,c=l.length/2;if(s.connectNulls){for(;c>0&&isPointNull$1(l[c*2-2],l[c*2-1]);c--);for(;u<c&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<c;)u+=drawSegment(a,l,u,c,c,1,s.smooth,s.smoothMonotone,s.connectNulls)+1},n.prototype.getPointOn=function(a,s){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,u=l.data,c=PathProxy.CMD,d,Ct,ar=s==="x",en=[],tn=0;tn<u.length;){var on=u[tn++],fn=void 0,dn=void 0,Cn=void 0,Rn=void 0,ax=void 0,ox=void 0,sx=void 0;switch(on){case c.M:d=u[tn++],Ct=u[tn++];break;case c.L:if(fn=u[tn++],dn=u[tn++],sx=ar?(a-d)/(fn-d):(a-Ct)/(dn-Ct),sx<=1&&sx>=0){var lx=ar?(dn-Ct)*sx+Ct:(fn-d)*sx+d;return ar?[a,lx]:[lx,a]}d=fn,Ct=dn;break;case c.C:fn=u[tn++],dn=u[tn++],Cn=u[tn++],Rn=u[tn++],ax=u[tn++],ox=u[tn++];var cx=ar?cubicRootAt(d,fn,Cn,ax,a,en):cubicRootAt(Ct,dn,Rn,ox,a,en);if(cx>0)for(var fx=0;fx<cx;fx++){var gx=en[fx];if(gx<=1&&gx>=0){var lx=ar?cubicAt(Ct,dn,Rn,ox,gx):cubicAt(d,fn,Cn,ax,gx);return ar?[a,lx]:[lx,a]}}d=ax,Ct=ox;break}}},n})(Path),ECPolygonShape=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(ECPolylineShape),ECPolygon=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-polygon",s}return n.prototype.getDefaultShape=function(){return new ECPolygonShape},n.prototype.buildPath=function(a,s){var l=s.points,u=s.stackedOnPoints,c=0,d=l.length/2,Ct=s.smoothMonotone;if(s.connectNulls){for(;d>0&&isPointNull$1(l[d*2-2],l[d*2-1]);d--);for(;c<d&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<d;){var ar=drawSegment(a,l,c,d,d,1,s.smooth,Ct,s.connectNulls);drawSegment(a,u,c+ar-1,ar,d,-1,s.stackedOnSmooth,Ct,s.connectNulls),c+=ar+1,a.closePath()}},n})(Path);function createGridClipPath(t,n,a,s,l){var u=t.getArea(),c=u.x,d=u.y,Ct=u.width,ar=u.height,en=a.get(["lineStyle","width"])||0;c-=en/2,d-=en/2,Ct+=en,ar+=en,Ct=Math.ceil(Ct),c!==Math.floor(c)&&(c=Math.floor(c),Ct++);var tn=new Rect$2({shape:{x:c,y:d,width:Ct,height:ar}});if(n){var on=t.getBaseAxis(),fn=on.isHorizontal(),dn=on.inverse;fn?(dn&&(tn.shape.x+=Ct),tn.shape.width=0):(dn||(tn.shape.y+=ar),tn.shape.height=0);var Cn=isFunction$1(l)?function(Rn){l(Rn,tn)}:null;initProps(tn,{shape:{width:Ct,height:ar,x:c,y:d}},a,null,s,Cn)}return tn}function createPolarClipPath(t,n,a){var s=t.getArea(),l=round$3(s.r0,1),u=round$3(s.r,1),c=new Sector({shape:{cx:round$3(t.cx,1),cy:round$3(t.cy,1),r0:l,r:u,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}});if(n){var d=t.getBaseAxis().dim==="angle";d?c.shape.endAngle=s.startAngle:c.shape.r=l,initProps(c,{shape:{endAngle:s.endAngle,r:u}},a)}return c}function createClipPath(t,n,a,s,l){if(t){if(t.type==="polar")return createPolarClipPath(t,n,a);if(t.type==="cartesian2d")return createGridClipPath(t,n,a,s,l)}else return null;return null}function isCoordinateSystemType(t,n){return t.type===n}function isPointsSame(t,n){if(t.length===n.length){for(var a=0;a<t.length;a++)if(t[a]!==n[a])return;return!0}}function bboxFromPoints(t){for(var n=1/0,a=1/0,s=-1/0,l=-1/0,u=0;u<t.length;){var c=t[u++],d=t[u++];isNaN(c)||(n=Math.min(c,n),s=Math.max(c,s)),isNaN(d)||(a=Math.min(d,a),l=Math.max(d,l))}return[[n,a],[s,l]]}function getBoundingDiff(t,n){var a=bboxFromPoints(t),s=a[0],l=a[1],u=bboxFromPoints(n),c=u[0],d=u[1];return Math.max(Math.abs(s[0]-c[0]),Math.abs(s[1]-c[1]),Math.abs(l[0]-d[0]),Math.abs(l[1]-d[1]))}function getSmooth(t){return isNumber(t)?t:t?.5:0}function getStackedOnPoints(t,n,a){if(!a.valueDim)return[];for(var s=n.count(),l=createFloat32Array(s*2),u=0;u<s;u++){var c=getStackedOnPoint(a,t,n,u);l[u*2]=c[0],l[u*2+1]=c[1]}return l}function turnPointsIntoStep(t,n,a,s,l){var u=a.getBaseAxis(),c=u.dim==="x"||u.dim==="radius"?0:1,d=[],Ct=0,ar=[],en=[],tn=[],on=[];if(l){for(Ct=0;Ct<t.length;Ct+=2){var fn=n||t;!isNaN(fn[Ct])&&!isNaN(fn[Ct+1])&&on.push(t[Ct],t[Ct+1])}t=on}for(Ct=0;Ct<t.length-2;Ct+=2)switch(tn[0]=t[Ct+2],tn[1]=t[Ct+3],en[0]=t[Ct],en[1]=t[Ct+1],d.push(en[0],en[1]),s){case"end":ar[c]=tn[c],ar[1-c]=en[1-c],d.push(ar[0],ar[1]);break;case"middle":var dn=(en[c]+tn[c])/2,Cn=[];ar[c]=Cn[c]=dn,ar[1-c]=en[1-c],Cn[1-c]=tn[1-c],d.push(ar[0],ar[1]),d.push(Cn[0],Cn[1]);break;default:ar[c]=en[c],ar[1-c]=tn[1-c],d.push(ar[0],ar[1])}return d.push(t[Ct++],t[Ct++]),d}function clipColorStops(t,n){var a=[],s=t.length,l,u;function c(en,tn,on){var fn=en.coord,dn=(on-fn)/(tn.coord-fn),Cn=lerp(dn,[en.color,tn.color]);return{coord:on,color:Cn}}for(var d=0;d<s;d++){var Ct=t[d],ar=Ct.coord;if(ar<0)l=Ct;else if(ar>n){u?a.push(c(u,Ct,n)):l&&a.push(c(l,Ct,0),c(l,Ct,n));break}else l&&(a.push(c(l,Ct,0)),l=null),a.push(Ct),u=Ct}return a}function getVisualGradient(t,n,a){var s=t.getVisual("visualMeta");if(!(!s||!s.length||!t.count())&&n.type==="cartesian2d"){for(var l,u,c=s.length-1;c>=0;c--){var d=t.getDimensionInfo(s[c].dimension);if(l=d&&d.coordDim,l==="x"||l==="y"){u=s[c];break}}if(u){var Ct=n.getAxis(l),ar=map$1(u.stops,function(sx){return{coord:Ct.toGlobalCoord(Ct.dataToCoord(sx.value)),color:sx.color}}),en=ar.length,tn=u.outerColors.slice();en&&ar[0].coord>ar[en-1].coord&&(ar.reverse(),tn.reverse());var on=clipColorStops(ar,l==="x"?a.getWidth():a.getHeight()),fn=on.length;if(!fn&&en)return ar[0].coord<0?tn[1]?tn[1]:ar[en-1].color:tn[0]?tn[0]:ar[0].color;var dn=10,Cn=on[0].coord-dn,Rn=on[fn-1].coord+dn,ax=Rn-Cn;if(ax<.001)return"transparent";each$f(on,function(sx){sx.offset=(sx.coord-Cn)/ax}),on.push({offset:fn?on[fn-1].offset:.5,color:tn[1]||"transparent"}),on.unshift({offset:fn?on[0].offset:.5,color:tn[0]||"transparent"});var ox=new LinearGradient(0,0,0,0,on,!0);return ox[l]=Cn,ox[l+"2"]=Rn,ox}}}function getIsIgnoreFunc(t,n,a){var s=t.get("showAllSymbol"),l=s==="auto";if(!(s&&!l)){var u=a.getAxesByScale("ordinal")[0];if(u&&!(l&&canShowAllSymbolForCategory(u,n))){var c=n.mapDimension(u.dim),d={};return each$f(u.getViewLabels(),function(Ct){var ar=u.scale.getRawOrdinalNumber(Ct.tickValue);d[ar]=1}),function(Ct){return!d.hasOwnProperty(n.get(c,Ct))}}}}function canShowAllSymbolForCategory(t,n){var a=t.getExtent(),s=Math.abs(a[1]-a[0])/t.scale.count();isNaN(s)&&(s=0);for(var l=n.count(),u=Math.max(1,Math.round(l/5)),c=0;c<l;c+=u)if(Symbol$1.getSymbolSize(n,c)[t.isHorizontal()?1:0]*1.5>s)return!1;return!0}function isPointNull(t,n){return isNaN(t)||isNaN(n)}function getLastIndexNotNull(t){for(var n=t.length/2;n>0&&isPointNull(t[n*2-2],t[n*2-1]);n--);return n-1}function getPointAtIndex(t,n){return[t[n*2],t[n*2+1]]}function getIndexRange(t,n,a){for(var s=t.length/2,l=a==="x"?0:1,u,c,d=0,Ct=-1,ar=0;ar<s;ar++)if(c=t[ar*2+l],!(isNaN(c)||isNaN(t[ar*2+1-l]))){if(ar===0){u=c;continue}if(u<=n&&c>=n||u>=n&&c<=n){Ct=ar;break}d=ar,u=c}return{range:[d,Ct],t:(n-u)/(c-u)}}function anyStateShowEndLabel(t){if(t.get(["endLabel","show"]))return!0;for(var n=0;n<SPECIAL_STATES.length;n++)if(t.get([SPECIAL_STATES[n],"endLabel","show"]))return!0;return!1}function createLineClipPath(t,n,a,s){if(isCoordinateSystemType(n,"cartesian2d")){var l=s.getModel("endLabel"),u=l.get("valueAnimation"),c=s.getData(),d={lastFrameIndex:0},Ct=anyStateShowEndLabel(s)?function(fn,dn){t._endLabelOnDuring(fn,dn,c,d,u,l,n)}:null,ar=n.getBaseAxis().isHorizontal(),en=createGridClipPath(n,a,s,function(){var fn=t._endLabel;fn&&a&&d.originalX!=null&&fn.attr({x:d.originalX,y:d.originalY})},Ct);if(!s.get("clip",!0)){var tn=en.shape,on=Math.max(tn.width,tn.height);ar?(tn.y-=on,tn.height+=on*2):(tn.x-=on,tn.width+=on*2)}return Ct&&Ct(1,en),en}else return createPolarClipPath(n,a,s)}function getEndLabelStateSpecified(t,n){var a=n.getBaseAxis(),s=a.isHorizontal(),l=a.inverse,u=s?l?"right":"left":"center",c=s?"middle":l?"top":"bottom";return{normal:{align:t.get("align")||u,verticalAlign:t.get("verticalAlign")||c}}}var LineView=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){var a=new Group$3,s=new SymbolDraw;this.group.add(s.group),this._symbolDraw=s,this._lineGroup=a,this._changePolyState=bind$1(this._changePolyState,this)},n.prototype.render=function(a,s,l){var u=a.coordinateSystem,c=this.group,d=a.getData(),Ct=a.getModel("lineStyle"),ar=a.getModel("areaStyle"),en=d.getLayout("points")||[],tn=u.type==="polar",on=this._coordSys,fn=this._symbolDraw,dn=this._polyline,Cn=this._polygon,Rn=this._lineGroup,ax=!s.ssr&&a.get("animation"),ox=!ar.isEmpty(),sx=ar.get("origin"),lx=prepareDataCoordInfo(u,d,sx),cx=ox&&getStackedOnPoints(u,d,lx),fx=a.get("showSymbol"),gx=a.get("connectNulls"),mx=fx&&!tn&&getIsIgnoreFunc(a,d,u),px=this._data;px&&px.eachItemGraphicEl(function(Nx,Bx){Nx.__temp&&(c.remove(Nx),px.setItemGraphicEl(Bx,null))}),fx||fn.remove(),c.add(Rn);var hx=tn?!1:a.get("step"),vx;u&&u.getArea&&a.get("clip",!0)&&(vx=u.getArea(),vx.width!=null?(vx.x-=.1,vx.y-=.1,vx.width+=.2,vx.height+=.2):vx.r0&&(vx.r0-=.5,vx.r+=.5)),this._clipShapeForSymbol=vx;var yx=getVisualGradient(d,u,l)||d.getVisual("style")[d.getVisual("drawType")];if(!(dn&&on.type===u.type&&hx===this._step))fx&&fn.updateData(d,{isIgnore:mx,clipShape:vx,disableAnimation:!0,getSymbolPoint:function(Nx){return[en[Nx*2],en[Nx*2+1]]}}),ax&&this._initSymbolLabelAnimation(d,u,vx),hx&&(cx&&(cx=turnPointsIntoStep(cx,en,u,hx,gx)),en=turnPointsIntoStep(en,null,u,hx,gx)),dn=this._newPolyline(en),ox?Cn=this._newPolygon(en,cx):Cn&&(Rn.remove(Cn),Cn=this._polygon=null),tn||this._initOrUpdateEndLabel(a,u,convertToColorString(yx)),Rn.setClipPath(createLineClipPath(this,u,!0,a));else{ox&&!Cn?Cn=this._newPolygon(en,cx):Cn&&!ox&&(Rn.remove(Cn),Cn=this._polygon=null),tn||this._initOrUpdateEndLabel(a,u,convertToColorString(yx));var Sx=Rn.getClipPath();if(Sx){var _x=createLineClipPath(this,u,!1,a);initProps(Sx,{shape:_x.shape},a)}else Rn.setClipPath(createLineClipPath(this,u,!0,a));fx&&fn.updateData(d,{isIgnore:mx,clipShape:vx,disableAnimation:!0,getSymbolPoint:function(Nx){return[en[Nx*2],en[Nx*2+1]]}}),(!isPointsSame(this._stackedOnPoints,cx)||!isPointsSame(this._points,en))&&(ax?this._doUpdateAnimation(d,cx,u,l,hx,sx,gx):(hx&&(cx&&(cx=turnPointsIntoStep(cx,en,u,hx,gx)),en=turnPointsIntoStep(en,null,u,hx,gx)),dn.setShape({points:en}),Cn&&Cn.setShape({points:en,stackedOnPoints:cx})))}var Ex=a.getModel("emphasis"),bx=Ex.get("focus"),Ax=Ex.get("blurScope"),Mx=Ex.get("disabled");if(dn.useStyle(defaults(Ct.getLineStyle(),{fill:"none",stroke:yx,lineJoin:"bevel"})),setStatesStylesFromModel(dn,a,"lineStyle"),dn.style.lineWidth>0&&a.get(["emphasis","lineStyle","width"])==="bolder"){var Rx=dn.getState("emphasis").style;Rx.lineWidth=+dn.style.lineWidth+1}getECData(dn).seriesIndex=a.seriesIndex,toggleHoverEmphasis(dn,bx,Ax,Mx);var Cx=getSmooth(a.get("smooth")),Lx=a.get("smoothMonotone");if(dn.setShape({smooth:Cx,smoothMonotone:Lx,connectNulls:gx}),Cn){var qx=d.getCalculationInfo("stackedOnSeries"),Ix=0;Cn.useStyle(defaults(ar.getAreaStyle(),{fill:yx,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),qx&&(Ix=getSmooth(qx.get("smooth"))),Cn.setShape({smooth:Cx,stackedOnSmooth:Ix,smoothMonotone:Lx,connectNulls:gx}),setStatesStylesFromModel(Cn,a,"areaStyle"),getECData(Cn).seriesIndex=a.seriesIndex,toggleHoverEmphasis(Cn,bx,Ax,Mx)}var Px=this._changePolyState;d.eachItemGraphicEl(function(Nx){Nx&&(Nx.onHoverStateChange=Px)}),this._polyline.onHoverStateChange=Px,this._data=d,this._coordSys=u,this._stackedOnPoints=cx,this._points=en,this._step=hx,this._valueOrigin=sx,a.get("triggerLineEvent")&&(this.packEventData(a,dn),Cn&&this.packEventData(a,Cn))},n.prototype.packEventData=function(a,s){getECData(s).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},n.prototype.highlight=function(a,s,l,u){var c=a.getData(),d=queryDataIndex(c,u);if(this._changePolyState("emphasis"),!(d instanceof Array)&&d!=null&&d>=0){var Ct=c.getLayout("points"),ar=c.getItemGraphicEl(d);if(!ar){var en=Ct[d*2],tn=Ct[d*2+1];if(isNaN(en)||isNaN(tn)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(en,tn))return;var on=a.get("zlevel")||0,fn=a.get("z")||0;ar=new Symbol$1(c,d),ar.x=en,ar.y=tn,ar.setZ(on,fn);var dn=ar.getSymbolPath().getTextContent();dn&&(dn.zlevel=on,dn.z=fn,dn.z2=this._polyline.z2+1),ar.__temp=!0,c.setItemGraphicEl(d,ar),ar.stopSymbolAnimation(!0),this.group.add(ar)}ar.highlight()}else ChartView.prototype.highlight.call(this,a,s,l,u)},n.prototype.downplay=function(a,s,l,u){var c=a.getData(),d=queryDataIndex(c,u);if(this._changePolyState("normal"),d!=null&&d>=0){var Ct=c.getItemGraphicEl(d);Ct&&(Ct.__temp?(c.setItemGraphicEl(d,null),this.group.remove(Ct)):Ct.downplay())}else ChartView.prototype.downplay.call(this,a,s,l,u)},n.prototype._changePolyState=function(a){var s=this._polygon;setStatesFlag(this._polyline,a),s&&setStatesFlag(s,a)},n.prototype._newPolyline=function(a){var s=this._polyline;return s&&this._lineGroup.remove(s),s=new ECPolyline({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(s),this._polyline=s,s},n.prototype._newPolygon=function(a,s){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:a,stackedOnPoints:s},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},n.prototype._initSymbolLabelAnimation=function(a,s,l){var u,c,d=s.getBaseAxis(),Ct=d.inverse;s.type==="cartesian2d"?(u=d.isHorizontal(),c=!1):s.type==="polar"&&(u=d.dim==="angle",c=!0);var ar=a.hostModel,en=ar.get("animationDuration");isFunction$1(en)&&(en=en(null));var tn=ar.get("animationDelay")||0,on=isFunction$1(tn)?tn(null):tn;a.eachItemGraphicEl(function(fn,dn){var Cn=fn;if(Cn){var Rn=[fn.x,fn.y],ax=void 0,ox=void 0,sx=void 0;if(l)if(c){var lx=l,cx=s.pointToCoord(Rn);u?(ax=lx.startAngle,ox=lx.endAngle,sx=-cx[1]/180*Math.PI):(ax=lx.r0,ox=lx.r,sx=cx[0])}else{var fx=l;u?(ax=fx.x,ox=fx.x+fx.width,sx=fn.x):(ax=fx.y+fx.height,ox=fx.y,sx=fn.y)}var gx=ox===ax?0:(sx-ax)/(ox-ax);Ct&&(gx=1-gx);var mx=isFunction$1(tn)?tn(dn):en*gx+on,px=Cn.getSymbolPath(),hx=px.getTextContent();Cn.attr({scaleX:0,scaleY:0}),Cn.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:mx}),hx&&hx.animateFrom({style:{opacity:0}},{duration:300,delay:mx}),px.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(a,s,l){var u=a.getModel("endLabel");if(anyStateShowEndLabel(a)){var c=a.getData(),d=this._polyline,Ct=c.getLayout("points");if(!Ct){d.removeTextContent(),this._endLabel=null;return}var ar=this._endLabel;ar||(ar=this._endLabel=new ZRText({z2:200}),ar.ignoreClip=!0,d.setTextContent(this._endLabel),d.disableLabelAnimation=!0);var en=getLastIndexNotNull(Ct);en>=0&&(setLabelStyle(d,getLabelStatesModels(a,"endLabel"),{inheritColor:l,labelFetcher:a,labelDataIndex:en,defaultText:function(tn,on,fn){return fn!=null?getDefaultInterpolatedLabel(c,fn):getDefaultLabel(c,tn)},enableTextSetter:!0},getEndLabelStateSpecified(u,s)),d.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(a,s,l,u,c,d,Ct){var ar=this._endLabel,en=this._polyline;if(ar){a<1&&u.originalX==null&&(u.originalX=ar.x,u.originalY=ar.y);var tn=l.getLayout("points"),on=l.hostModel,fn=on.get("connectNulls"),dn=d.get("precision"),Cn=d.get("distance")||0,Rn=Ct.getBaseAxis(),ax=Rn.isHorizontal(),ox=Rn.inverse,sx=s.shape,lx=ox?ax?sx.x:sx.y+sx.height:ax?sx.x+sx.width:sx.y,cx=(ax?Cn:0)*(ox?-1:1),fx=(ax?0:-Cn)*(ox?-1:1),gx=ax?"x":"y",mx=getIndexRange(tn,lx,gx),px=mx.range,hx=px[1]-px[0],vx=void 0;if(hx>=1){if(hx>1&&!fn){var yx=getPointAtIndex(tn,px[0]);ar.attr({x:yx[0]+cx,y:yx[1]+fx}),c&&(vx=on.getRawValue(px[0]))}else{var yx=en.getPointOn(lx,gx);yx&&ar.attr({x:yx[0]+cx,y:yx[1]+fx});var Sx=on.getRawValue(px[0]),_x=on.getRawValue(px[1]);c&&(vx=interpolateRawValues(l,dn,Sx,_x,mx.t))}u.lastFrameIndex=px[0]}else{var Ex=a===1||u.lastFrameIndex>0?px[0]:0,yx=getPointAtIndex(tn,Ex);c&&(vx=on.getRawValue(Ex)),ar.attr({x:yx[0]+cx,y:yx[1]+fx})}if(c){var bx=labelInner(ar);typeof bx.setLabelText=="function"&&bx.setLabelText(vx)}}},n.prototype._doUpdateAnimation=function(a,s,l,u,c,d,Ct){var ar=this._polyline,en=this._polygon,tn=a.hostModel,on=lineAnimationDiff(this._data,a,this._stackedOnPoints,s,this._coordSys,l,this._valueOrigin),fn=on.current,dn=on.stackedOnCurrent,Cn=on.next,Rn=on.stackedOnNext;if(c&&(dn=turnPointsIntoStep(on.stackedOnCurrent,on.current,l,c,Ct),fn=turnPointsIntoStep(on.current,null,l,c,Ct),Rn=turnPointsIntoStep(on.stackedOnNext,on.next,l,c,Ct),Cn=turnPointsIntoStep(on.next,null,l,c,Ct)),getBoundingDiff(fn,Cn)>3e3||en&&getBoundingDiff(dn,Rn)>3e3){ar.stopAnimation(),ar.setShape({points:Cn}),en&&(en.stopAnimation(),en.setShape({points:Cn,stackedOnPoints:Rn}));return}ar.shape.__points=on.current,ar.shape.points=fn;var ax={shape:{points:Cn}};on.current!==fn&&(ax.shape.__points=on.next),ar.stopAnimation(),updateProps$1(ar,ax,tn),en&&(en.setShape({points:fn,stackedOnPoints:dn}),en.stopAnimation(),updateProps$1(en,{shape:{stackedOnPoints:Rn}},tn),ar.shape.points!==en.shape.points&&(en.shape.points=ar.shape.points));for(var ox=[],sx=on.status,lx=0;lx<sx.length;lx++){var cx=sx[lx].cmd;if(cx==="="){var fx=a.getItemGraphicEl(sx[lx].idx1);fx&&ox.push({el:fx,ptIdx:lx})}}ar.animators&&ar.animators.length&&ar.animators[0].during(function(){en&&en.dirtyShape();for(var gx=ar.shape.__points,mx=0;mx<ox.length;mx++){var px=ox[mx].el,hx=ox[mx].ptIdx*2;px.x=gx[hx],px.y=gx[hx+1],px.markRedraw()}})},n.prototype.remove=function(a){var s=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(u,c){u.__temp&&(s.remove(u),l.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n})(ChartView);function pointsLayout(t,n){return{seriesType:t,plan:createRenderPlanner(),reset:function(a){var s=a.getData(),l=a.coordinateSystem,u=a.pipelineContext,c=n||u.large;if(l){var d=map$1(l.dimensions,function(fn){return s.mapDimension(fn)}).slice(0,2),Ct=d.length,ar=s.getCalculationInfo("stackResultDimension");isDimensionStacked(s,d[0])&&(d[0]=ar),isDimensionStacked(s,d[1])&&(d[1]=ar);var en=s.getStore(),tn=s.getDimensionIndex(d[0]),on=s.getDimensionIndex(d[1]);return Ct&&{progress:function(fn,dn){for(var Cn=fn.end-fn.start,Rn=c&&createFloat32Array(Cn*Ct),ax=[],ox=[],sx=fn.start,lx=0;sx<fn.end;sx++){var cx=void 0;if(Ct===1){var fx=en.get(tn,sx);cx=l.dataToPoint(fx,null,ox)}else ax[0]=en.get(tn,sx),ax[1]=en.get(on,sx),cx=l.dataToPoint(ax,null,ox);c?(Rn[lx++]=cx[0],Rn[lx++]=cx[1]):dn.setItemLayout(sx,cx.slice())}c&&dn.setLayout("points",Rn)}}}}}}var samplers={average:function(t){for(var n=0,a=0,s=0;s<t.length;s++)isNaN(t[s])||(n+=t[s],a++);return a===0?NaN:n/a},sum:function(t){for(var n=0,a=0;a<t.length;a++)n+=t[a]||0;return n},max:function(t){for(var n=-1/0,a=0;a<t.length;a++)t[a]>n&&(n=t[a]);return isFinite(n)?n:NaN},min:function(t){for(var n=1/0,a=0;a<t.length;a++)t[a]<n&&(n=t[a]);return isFinite(n)?n:NaN},nearest:function(t){return t[0]}},indexSampler=function(t){return Math.round(t.length/2)};function dataSample(t){return{seriesType:t,reset:function(n,a,s){var l=n.getData(),u=n.get("sampling"),c=n.coordinateSystem,d=l.count();if(d>10&&c.type==="cartesian2d"&&u){var Ct=c.getBaseAxis(),ar=c.getOtherAxis(Ct),en=Ct.getExtent(),tn=s.getDevicePixelRatio(),on=Math.abs(en[1]-en[0])*(tn||1),fn=Math.round(d/on);if(isFinite(fn)&&fn>1){u==="lttb"?n.setData(l.lttbDownSample(l.mapDimension(ar.dim),1/fn)):u==="minmax"&&n.setData(l.minmaxDownSample(l.mapDimension(ar.dim),1/fn));var dn=void 0;isString$1(u)?dn=samplers[u]:isFunction$1(u)&&(dn=u),dn&&n.setData(l.downSample(l.mapDimension(ar.dim),1/fn,dn,indexSampler))}}}}}function install$Q(t){t.registerChartView(LineView),t.registerSeriesModel(LineSeriesModel),t.registerLayout(pointsLayout("line",!0)),t.registerVisual({seriesType:"line",reset:function(n){var a=n.getData(),s=n.getModel("lineStyle").getLineStyle();s&&!s.stroke&&(s.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",s)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(a,s,l){var u=this.coordinateSystem;if(u&&u.clampData){var c=u.clampData(a),d=u.dataToPoint(c);if(l)each$f(u.getAxes(),function(on,fn){if(on.type==="category"&&s!=null){var dn=on.getTicksCoords(),Cn=on.getTickModel().get("alignWithLabel"),Rn=c[fn],ax=s[fn]==="x1"||s[fn]==="y1";if(ax&&!Cn&&(Rn+=1),dn.length<2)return;if(dn.length===2){d[fn]=on.toGlobalCoord(on.getExtent()[ax?1:0]);return}for(var ox=void 0,sx=void 0,lx=1,cx=0;cx<dn.length;cx++){var fx=dn[cx].coord,gx=cx===dn.length-1?dn[cx-1].tickValue+lx:dn[cx].tickValue;if(gx===Rn){sx=fx;break}else if(gx<Rn)ox=fx;else if(ox!=null&&gx>Rn){sx=(fx+ox)/2;break}cx===1&&(lx=gx-dn[0].tickValue)}sx==null&&(ox?ox&&(sx=dn[dn.length-1].coord):sx=dn[0].coord),d[fn]=on.toGlobalCoord(sx)}});else{var Ct=this.getData(),ar=Ct.getLayout("offset"),en=Ct.getLayout("size"),tn=u.getBaseAxis().isHorizontal()?0:1;d[tn]+=ar+en/2}return d}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n})(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},n.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),s=this.get("largeThreshold");return s>a&&(a=s),a},n.prototype.brushSelector=function(a,s,l){return l.rect(s.getItemLayout(a))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n})(BaseBarSeriesModel),SausageShape=(function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t})(),SausagePath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="sausage",s}return n.prototype.getDefaultShape=function(){return new SausageShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.max(s.r0||0,0),d=Math.max(s.r,0),Ct=(d-c)*.5,ar=c+Ct,en=s.startAngle,tn=s.endAngle,on=s.clockwise,fn=Math.PI*2,dn=on?tn-en<fn:en-tn<fn;dn||(en=tn-(on?fn:-fn));var Cn=Math.cos(en),Rn=Math.sin(en),ax=Math.cos(tn),ox=Math.sin(tn);dn?(a.moveTo(Cn*c+l,Rn*c+u),a.arc(Cn*ar+l,Rn*ar+u,Ct,-Math.PI+en,en,!on)):a.moveTo(Cn*d+l,Rn*d+u),a.arc(l,u,d,en,tn,!on),a.arc(ax*ar+l,ox*ar+u,Ct,tn-Math.PI*2,tn-Math.PI,!on),c!==0&&a.arc(l,u,c,tn,en,on)},n})(Path);function createSectorCalculateTextPosition(t,n){n=n||{};var a=n.isRoundCap;return function(s,l,u){var c=l.position;if(!c||c instanceof Array)return calculateTextPosition(s,l,u);var d=t(c),Ct=l.distance!=null?l.distance:5,ar=this.shape,en=ar.cx,tn=ar.cy,on=ar.r,fn=ar.r0,dn=(on+fn)/2,Cn=ar.startAngle,Rn=ar.endAngle,ax=(Cn+Rn)/2,ox=a?Math.abs(on-fn)/2:0,sx=Math.cos,lx=Math.sin,cx=en+on*sx(Cn),fx=tn+on*lx(Cn),gx="left",mx="top";switch(d){case"startArc":cx=en+(fn-Ct)*sx(ax),fx=tn+(fn-Ct)*lx(ax),gx="center",mx="top";break;case"insideStartArc":cx=en+(fn+Ct)*sx(ax),fx=tn+(fn+Ct)*lx(ax),gx="center",mx="bottom";break;case"startAngle":cx=en+dn*sx(Cn)+adjustAngleDistanceX(Cn,Ct+ox,!1),fx=tn+dn*lx(Cn)+adjustAngleDistanceY(Cn,Ct+ox,!1),gx="right",mx="middle";break;case"insideStartAngle":cx=en+dn*sx(Cn)+adjustAngleDistanceX(Cn,-Ct+ox,!1),fx=tn+dn*lx(Cn)+adjustAngleDistanceY(Cn,-Ct+ox,!1),gx="left",mx="middle";break;case"middle":cx=en+dn*sx(ax),fx=tn+dn*lx(ax),gx="center",mx="middle";break;case"endArc":cx=en+(on+Ct)*sx(ax),fx=tn+(on+Ct)*lx(ax),gx="center",mx="bottom";break;case"insideEndArc":cx=en+(on-Ct)*sx(ax),fx=tn+(on-Ct)*lx(ax),gx="center",mx="top";break;case"endAngle":cx=en+dn*sx(Rn)+adjustAngleDistanceX(Rn,Ct+ox,!0),fx=tn+dn*lx(Rn)+adjustAngleDistanceY(Rn,Ct+ox,!0),gx="left",mx="middle";break;case"insideEndAngle":cx=en+dn*sx(Rn)+adjustAngleDistanceX(Rn,-Ct+ox,!0),fx=tn+dn*lx(Rn)+adjustAngleDistanceY(Rn,-Ct+ox,!0),gx="right",mx="middle";break;default:return calculateTextPosition(s,l,u)}return s=s||{},s.x=cx,s.y=fx,s.align=gx,s.verticalAlign=mx,s}}function setSectorTextRotation(t,n,a,s){if(isNumber(s)){t.setTextConfig({rotation:s});return}else if(isArray$1(n)){t.setTextConfig({rotation:0});return}var l=t.shape,u=l.clockwise?l.startAngle:l.endAngle,c=l.clockwise?l.endAngle:l.startAngle,d=(u+c)/2,Ct,ar=a(n);switch(ar){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":Ct=d;break;case"startAngle":case"insideStartAngle":Ct=u;break;case"endAngle":case"insideEndAngle":Ct=c;break;default:t.setTextConfig({rotation:0});return}var en=Math.PI*1.5-Ct;ar==="middle"&&en>Math.PI/2&&en<Math.PI*1.5&&(en-=Math.PI),t.setTextConfig({rotation:en})}function adjustAngleDistanceX(t,n,a){return n*Math.sin(t)*(a?-1:1)}function adjustAngleDistanceY(t,n,a){return n*Math.cos(t)*(a?1:-1)}function getSectorCornerRadius(t,n,a){var s=t.get("borderRadius");if(s==null)return a?{cornerRadius:0}:null;isArray$1(s)||(s=[s,s,s,s]);var l=Math.abs(n.r||0-n.r0||0);return{cornerRadius:map$1(s,function(u){return parsePercent$1(u,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(t,n){var a=t.getArea&&t.getArea();if(isCoordinateSystemType(t,"cartesian2d")){var s=t.getBaseAxis();if(s.type!=="category"||!s.onBand){var l=n.getLayout("bandWidth");s.isHorizontal()?(a.x-=l,a.width+=l*2):(a.y-=l,a.height+=l*2)}}return a}var BarView=(function(t){__extends(n,t);function n(){var a=t.call(this)||this;return a.type=n.type,a._isFirstFrame=!0,a}return n.prototype.render=function(a,s,l,u){this._model=a,this._removeOnRenderedListener(l),this._updateDrawMode(a);var c=a.get("coordinateSystem");(c==="cartesian2d"||c==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,s,l):this._renderNormal(a,s,l,u))},n.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},n.prototype.incrementalRender=function(a,s){this._progressiveEls=[],this._incrementalRenderLarge(a,s)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},n.prototype._renderNormal=function(a,s,l,u){var c=this.group,d=a.getData(),Ct=this._data,ar=a.coordinateSystem,en=ar.getBaseAxis(),tn;ar.type==="cartesian2d"?tn=en.isHorizontal():ar.type==="polar"&&(tn=en.dim==="angle");var on=a.isAnimationEnabled()?a:null,fn=shouldRealtimeSort(a,ar);fn&&this._enableRealtimeSort(fn,d,l);var dn=a.get("clip",!0)||fn,Cn=getClipArea(ar,d);c.removeClipPath();var Rn=a.get("roundCap",!0),ax=a.get("showBackground",!0),ox=a.getModel("backgroundStyle"),sx=ox.get("borderRadius")||0,lx=[],cx=this._backgroundEls,fx=u&&u.isInitSort,gx=u&&u.type==="changeAxisOrder";function mx(vx){var yx=getLayout[ar.type](d,vx),Sx=createBackgroundEl(ar,tn,yx);return Sx.useStyle(ox.getItemStyle()),ar.type==="cartesian2d"?Sx.setShape("r",sx):Sx.setShape("cornerRadius",sx),lx[vx]=Sx,Sx}d.diff(Ct).add(function(vx){var yx=d.getItemModel(vx),Sx=getLayout[ar.type](d,vx,yx);if(ax&&mx(vx),!(!d.hasValue(vx)||!isValidLayout[ar.type](Sx))){var _x=!1;dn&&(_x=clip[ar.type](Cn,Sx));var Ex=elementCreator[ar.type](a,d,vx,Sx,tn,on,en.model,!1,Rn);fn&&(Ex.forceLabelAnimation=!0),updateStyle(Ex,d,vx,yx,Sx,a,tn,ar.type==="polar"),fx?Ex.attr({shape:Sx}):fn?updateRealtimeAnimation(fn,on,Ex,Sx,vx,tn,!1,!1):initProps(Ex,{shape:Sx},a,vx),d.setItemGraphicEl(vx,Ex),c.add(Ex),Ex.ignore=_x}}).update(function(vx,yx){var Sx=d.getItemModel(vx),_x=getLayout[ar.type](d,vx,Sx);if(ax){var Ex=void 0;cx.length===0?Ex=mx(yx):(Ex=cx[yx],Ex.useStyle(ox.getItemStyle()),ar.type==="cartesian2d"?Ex.setShape("r",sx):Ex.setShape("cornerRadius",sx),lx[vx]=Ex);var bx=getLayout[ar.type](d,vx),Ax=createBackgroundShape(tn,bx,ar);updateProps$1(Ex,{shape:Ax},on,vx)}var Mx=Ct.getItemGraphicEl(yx);if(!d.hasValue(vx)||!isValidLayout[ar.type](_x)){c.remove(Mx);return}var Rx=!1;if(dn&&(Rx=clip[ar.type](Cn,_x),Rx&&c.remove(Mx)),Mx?saveOldStyle(Mx):Mx=elementCreator[ar.type](a,d,vx,_x,tn,on,en.model,!!Mx,Rn),fn&&(Mx.forceLabelAnimation=!0),gx){var Cx=Mx.getTextContent();if(Cx){var Lx=labelInner(Cx);Lx.prevValue!=null&&(Lx.prevValue=Lx.value)}}else updateStyle(Mx,d,vx,Sx,_x,a,tn,ar.type==="polar");fx?Mx.attr({shape:_x}):fn?updateRealtimeAnimation(fn,on,Mx,_x,vx,tn,!0,gx):updateProps$1(Mx,{shape:_x},a,vx,null),d.setItemGraphicEl(vx,Mx),Mx.ignore=Rx,c.add(Mx)}).remove(function(vx){var yx=Ct.getItemGraphicEl(vx);yx&&removeElementWithFadeOut(yx,a,vx)}).execute();var px=this._backgroundGroup||(this._backgroundGroup=new Group$3);px.removeAll();for(var hx=0;hx<lx.length;++hx)px.add(lx[hx]);c.add(px),this._backgroundEls=lx,this._data=d},n.prototype._renderLarge=function(a,s,l){this._clear(),createLarge$1(a,this.group),this._updateLargeClip(a)},n.prototype._incrementalRenderLarge=function(a,s){this._removeBackground(),createLarge$1(s,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(a){var s=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a),l=this.group;s?l.setClipPath(s):l.removeClipPath()},n.prototype._enableRealtimeSort=function(a,s,l){var u=this;if(s.count()){var c=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(s,a,l),this._isFirstFrame=!1;else{var d=function(Ct){var ar=s.getItemGraphicEl(Ct),en=ar&&ar.shape;return en&&Math.abs(c.isHorizontal()?en.height:en.width)||0};this._onRendered=function(){u._updateSortWithinSameData(s,d,c,l)},l.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(a,s,l){var u=[];return a.each(a.mapDimension(s.dim),function(c,d){var Ct=l(d);Ct=Ct??NaN,u.push({dataIndex:d,mappedValue:Ct,ordinalNumber:c})}),u.sort(function(c,d){return d.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(u,function(c){return c.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(a,s,l){for(var u=l.scale,c=a.mapDimension(l.dim),d=Number.MAX_VALUE,Ct=0,ar=u.getOrdinalMeta().categories.length;Ct<ar;++Ct){var en=a.rawIndexOf(c,u.getRawOrdinalNumber(Ct)),tn=en<0?Number.MIN_VALUE:s(a.indexOfRawIndex(en));if(tn>d)return!0;d=tn}return!1},n.prototype._isOrderDifferentInView=function(a,s){for(var l=s.scale,u=l.getExtent(),c=Math.max(0,u[0]),d=Math.min(u[1],l.getOrdinalMeta().categories.length-1);c<=d;++c)if(a.ordinalNumbers[c]!==l.getRawOrdinalNumber(c))return!0},n.prototype._updateSortWithinSameData=function(a,s,l,u){if(this._isOrderChangedWithinSameData(a,s,l)){var c=this._dataSort(a,l,s);this._isOrderDifferentInView(c,l)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:c}))}},n.prototype._dispatchInitSort=function(a,s,l){var u=s.baseAxis,c=this._dataSort(a,u,function(d){return a.get(a.mapDimension(s.otherAxis.dim),d)});l.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:c})},n.prototype.remove=function(a,s){this._clear(this._model),this._removeOnRenderedListener(s)},n.prototype.dispose=function(a,s){this._removeOnRenderedListener(s)},n.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(a){var s=this.group,l=this._data;a&&a.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,a,getECData(u).dataIndex)})):s.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n})(ChartView),clip={cartesian2d:function(t,n){var a=n.width<0?-1:1,s=n.height<0?-1:1;a<0&&(n.x+=n.width,n.width=-n.width),s<0&&(n.y+=n.height,n.height=-n.height);var l=t.x+t.width,u=t.y+t.height,c=mathMax$4(n.x,t.x),d=mathMin$4(n.x+n.width,l),Ct=mathMax$4(n.y,t.y),ar=mathMin$4(n.y+n.height,u),en=d<c,tn=ar<Ct;return n.x=en&&c>l?d:c,n.y=tn&&Ct>u?ar:Ct,n.width=en?0:d-c,n.height=tn?0:ar-Ct,a<0&&(n.x+=n.width,n.width=-n.width),s<0&&(n.y+=n.height,n.height=-n.height),en||tn},polar:function(t,n){var a=n.r0<=n.r?1:-1;if(a<0){var s=n.r;n.r=n.r0,n.r0=s}var l=mathMin$4(n.r,t.r),u=mathMax$4(n.r0,t.r0);n.r=l,n.r0=u;var c=l-u<0;if(a<0){var s=n.r;n.r=n.r0,n.r0=s}return c}},elementCreator={cartesian2d:function(t,n,a,s,l,u,c,d,Ct){var ar=new Rect$2({shape:extend({},s),z2:1});if(ar.__dataIndex=a,ar.name="item",u){var en=ar.shape,tn=l?"height":"width";en[tn]=0}return ar},polar:function(t,n,a,s,l,u,c,d,Ct){var ar=!l&&Ct?SausagePath:Sector,en=new ar({shape:s,z2:1});en.name="item";var tn=createPolarPositionMapping(l);if(en.calculateTextPosition=createSectorCalculateTextPosition(tn,{isRoundCap:ar===SausagePath}),u){var on=en.shape,fn=l?"r":"endAngle",dn={};on[fn]=l?s.r0:s.startAngle,dn[fn]=s[fn],(d?updateProps$1:initProps)(en,{shape:dn},u)}return en}};function shouldRealtimeSort(t,n){var a=t.get("realtimeSort",!0),s=n.getBaseAxis();if(a&&s.type==="category"&&n.type==="cartesian2d")return{baseAxis:s,otherAxis:n.getOtherAxis(s)}}function updateRealtimeAnimation(t,n,a,s,l,u,c,d){var Ct,ar;u?(ar={x:s.x,width:s.width},Ct={y:s.y,height:s.height}):(ar={y:s.y,height:s.height},Ct={x:s.x,width:s.width}),d||(c?updateProps$1:initProps)(a,{shape:Ct},n,l,null);var en=n?t.baseAxis.model:null;(c?updateProps$1:initProps)(a,{shape:ar},en,l)}function checkPropertiesNotValid(t,n){for(var a=0;a<n.length;a++)if(!isFinite(t[n[a]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(t){return!checkPropertiesNotValid(t,rectPropties)},polar:function(t){return!checkPropertiesNotValid(t,polarPropties)}},getLayout={cartesian2d:function(t,n,a){var s=t.getItemLayout(n),l=a?getLineWidth(a,s):0,u=s.width>0?1:-1,c=s.height>0?1:-1;return{x:s.x+u*l/2,y:s.y+c*l/2,width:s.width-u*l,height:s.height-c*l}},polar:function(t,n,a){var s=t.getItemLayout(n);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function isZeroOnPolar(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function createPolarPositionMapping(t){return(function(n){var a=n?"Arc":"Angle";return function(s){switch(s){case"start":case"insideStart":case"end":case"insideEnd":return s+a;default:return s}}})(t)}function updateStyle(t,n,a,s,l,u,c,d){var Ct=n.getItemVisual(a,"style");if(d){if(!u.get("roundCap")){var en=t.shape,tn=getSectorCornerRadius(s.getModel("itemStyle"),en,!0);extend(en,tn),t.setShape(en)}}else{var ar=s.get(["itemStyle","borderRadius"])||0;t.setShape("r",ar)}t.useStyle(Ct);var on=s.getShallow("cursor");on&&t.attr("cursor",on);var fn=d?c?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":c?l.height>=0?"bottom":"top":l.width>=0?"right":"left",dn=getLabelStatesModels(s);setLabelStyle(t,dn,{labelFetcher:u,labelDataIndex:a,defaultText:getDefaultLabel(u.getData(),a),inheritColor:Ct.fill,defaultOpacity:Ct.opacity,defaultOutsidePosition:fn});var Cn=t.getTextContent();if(d&&Cn){var Rn=s.get(["label","position"]);t.textConfig.inside=Rn==="middle"?!0:null,setSectorTextRotation(t,Rn==="outside"?fn:Rn,createPolarPositionMapping(c),s.get(["label","rotate"]))}setLabelValueAnimation(Cn,dn,u.getRawValue(a),function(ox){return getDefaultInterpolatedLabel(n,ox)});var ax=s.getModel(["emphasis"]);toggleHoverEmphasis(t,ax.get("focus"),ax.get("blurScope"),ax.get("disabled")),setStatesStylesFromModel(t,s),isZeroOnPolar(l)&&(t.style.fill="none",t.style.stroke="none",each$f(t.states,function(ox){ox.style&&(ox.style.fill=ox.style.stroke="none")}))}function getLineWidth(t,n){var a=t.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var s=t.get(["itemStyle","borderWidth"])||0,l=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),u=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(s,l,u)}var LagePathShape=(function(){function t(){}return t})(),LargePath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="largeBar",s}return n.prototype.getDefaultShape=function(){return new LagePathShape},n.prototype.buildPath=function(a,s){for(var l=s.points,u=this.baseDimIdx,c=1-this.baseDimIdx,d=[],Ct=[],ar=this.barWidth,en=0;en<l.length;en+=3)Ct[u]=ar,Ct[c]=l[en+2],d[u]=l[en+u],d[c]=l[en+c],a.rect(d[0],d[1],Ct[0],Ct[1])},n})(Path);function createLarge$1(t,n,a,s){var l=t.getData(),u=l.getLayout("valueAxisHorizontal")?1:0,c=l.getLayout("largeDataIndices"),d=l.getLayout("size"),Ct=t.getModel("backgroundStyle"),ar=l.getLayout("largeBackgroundPoints");if(ar){var en=new LargePath({shape:{points:ar},incremental:!!s,silent:!0,z2:0});en.baseDimIdx=u,en.largeDataIndices=c,en.barWidth=d,en.useStyle(Ct.getItemStyle()),n.add(en),a&&a.push(en)}var tn=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!s,ignoreCoarsePointer:!0,z2:1});tn.baseDimIdx=u,tn.largeDataIndices=c,tn.barWidth=d,n.add(tn),tn.useStyle(l.getVisual("style")),tn.style.stroke=null,getECData(tn).seriesIndex=t.seriesIndex,t.get("silent")||(tn.on("mousedown",largePathUpdateDataIndex),tn.on("mousemove",largePathUpdateDataIndex)),a&&a.push(tn)}var largePathUpdateDataIndex=throttle(function(t){var n=this,a=largePathFindDataIndex(n,t.offsetX,t.offsetY);getECData(n).dataIndex=a>=0?a:null},30,!1);function largePathFindDataIndex(t,n,a){for(var s=t.baseDimIdx,l=1-s,u=t.shape.points,c=t.largeDataIndices,d=[],Ct=[],ar=t.barWidth,en=0,tn=u.length/3;en<tn;en++){var on=en*3;if(Ct[s]=ar,Ct[l]=u[on+2],d[s]=u[on+s],d[l]=u[on+l],Ct[l]<0&&(d[l]+=Ct[l],Ct[l]=-Ct[l]),n>=d[0]&&n<=d[0]+Ct[0]&&a>=d[1]&&a<=d[1]+Ct[1])return c[en]}return-1}function createBackgroundShape(t,n,a){if(isCoordinateSystemType(a,"cartesian2d")){var s=n,l=a.getArea();return{x:t?s.x:l.x,y:t?l.y:s.y,width:t?s.width:l.width,height:t?l.height:s.height}}else{var l=a.getArea(),u=n;return{cx:l.cx,cy:l.cy,r0:t?l.r0:u.r0,r:t?l.r:u.r,startAngle:t?u.startAngle:0,endAngle:t?u.endAngle:Math.PI*2}}}function createBackgroundEl(t,n,a){var s=t.type==="polar"?Sector:Rect$2;return new s({shape:createBackgroundShape(n,a,t),silent:!0,z2:0})}function install$P(t){t.registerChartView(BarView),t.registerSeriesModel(BarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,a){var s=n.componentType||"series";a.eachComponent({mainType:s,query:n},function(l){n.sortInfo&&l.axis.setCategorySortInfo(n.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getBasicPieLayout(t,n){var a=getViewRect$5(t,n),s=t.get("center"),l=t.get("radius");isArray$1(l)||(l=[0,l]);var u=parsePercent(a.width,n.getWidth()),c=parsePercent(a.height,n.getHeight()),d=Math.min(u,c),Ct=parsePercent(l[0],d/2),ar=parsePercent(l[1],d/2),en,tn,on=t.coordinateSystem;if(on){var fn=on.dataToPoint(s);en=fn[0]||0,tn=fn[1]||0}else isArray$1(s)||(s=[s,s]),en=parsePercent(s[0],u)+a.x,tn=parsePercent(s[1],c)+a.y;return{cx:en,cy:tn,r0:Ct,r:ar}}function pieLayout(t,n,a){n.eachSeriesByType(t,function(s){var l=s.getData(),u=l.mapDimension("value"),c=getViewRect$5(s,a),d=getBasicPieLayout(s,a),Ct=d.cx,ar=d.cy,en=d.r,tn=d.r0,on=-s.get("startAngle")*RADIAN$2,fn=s.get("endAngle"),dn=s.get("padAngle")*RADIAN$2;fn=fn==="auto"?on-PI2:-fn*RADIAN$2;var Cn=s.get("minAngle")*RADIAN$2,Rn=Cn+dn,ax=0;l.each(u,function(Ax){!isNaN(Ax)&&ax++});var ox=l.getSum(u),sx=Math.PI/(ox||ax)*2,lx=s.get("clockwise"),cx=s.get("roseType"),fx=s.get("stillShowZeroSum"),gx=l.getDataExtent(u);gx[0]=0;var mx=lx?1:-1,px=[on,fn],hx=mx*dn/2;normalizeArcAngles(px,!lx),on=px[0],fn=px[1];var vx=getSeriesLayoutData(s);vx.startAngle=on,vx.endAngle=fn,vx.clockwise=lx;var yx=Math.abs(fn-on),Sx=yx,_x=0,Ex=on;if(l.setLayout({viewRect:c,r:en}),l.each(u,function(Ax,Mx){var Rx;if(isNaN(Ax)){l.setItemLayout(Mx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:lx,cx:Ct,cy:ar,r0:tn,r:cx?NaN:en});return}cx!=="area"?Rx=ox===0&&fx?sx:Ax*sx:Rx=yx/ax,Rx<Rn?(Rx=Rn,Sx-=Rn):_x+=Ax;var Cx=Ex+mx*Rx,Lx=0,qx=0;dn>Rx?(Lx=Ex+mx*Rx/2,qx=Lx):(Lx=Ex+hx,qx=Cx-hx),l.setItemLayout(Mx,{angle:Rx,startAngle:Lx,endAngle:qx,clockwise:lx,cx:Ct,cy:ar,r0:tn,r:cx?linearMap$2(Ax,gx,[tn,en]):en}),Ex=Cx}),Sx<PI2&&ax)if(Sx<=.001){var bx=yx/ax;l.each(u,function(Ax,Mx){if(!isNaN(Ax)){var Rx=l.getItemLayout(Mx);Rx.angle=bx;var Cx=0,Lx=0;bx<dn?(Cx=on+mx*(Mx+1/2)*bx,Lx=Cx):(Cx=on+mx*Mx*bx+hx,Lx=on+mx*(Mx+1)*bx-hx),Rx.startAngle=Cx,Rx.endAngle=Lx}})}else sx=Sx/_x,Ex=on,l.each(u,function(Ax,Mx){if(!isNaN(Ax)){var Rx=l.getItemLayout(Mx),Cx=Rx.angle===Rn?Rn:Ax*sx,Lx=0,qx=0;Cx<dn?(Lx=Ex+mx*Cx/2,qx=Lx):(Lx=Ex+hx,qx=Ex+mx*Cx-hx),Rx.startAngle=Lx,Rx.endAngle=qx,Ex+=mx*Cx}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(t){return{seriesType:t,reset:function(n,a){var s=a.findComponents({mainType:"legend"});if(!(!s||!s.length)){var l=n.getData();l.filterSelf(function(u){for(var c=l.getName(u),d=0;d<s.length;d++)if(!s[d].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(t,n,a,s,l,u,c,d,Ct,ar){if(t.length<2)return;function en(Cn){for(var Rn=Cn.rB,ax=Rn*Rn,ox=0;ox<Cn.list.length;ox++){var sx=Cn.list[ox],lx=Math.abs(sx.label.y-a),cx=s+sx.len,fx=cx*cx,gx=Math.sqrt(Math.abs((1-lx*lx/ax)*fx)),mx=n+(gx+sx.len2)*l,px=mx-sx.label.x,hx=sx.targetTextWidth-px*l;constrainTextWidth(sx,hx,!0),sx.label.x=mx}}function tn(Cn){for(var Rn={list:[],maxY:0},ax={list:[],maxY:0},ox=0;ox<Cn.length;ox++)if(Cn[ox].labelAlignTo==="none"){var sx=Cn[ox],lx=sx.label.y>a?ax:Rn,cx=Math.abs(sx.label.y-a);if(cx>=lx.maxY){var fx=sx.label.x-n-sx.len2*l,gx=s+sx.len,mx=Math.abs(fx)<gx?Math.sqrt(cx*cx/(1-fx*fx/gx/gx)):gx;lx.rB=mx,lx.maxY=cx}lx.list.push(sx)}en(Rn),en(ax)}for(var on=t.length,fn=0;fn<on;fn++)if(t[fn].position==="outer"&&t[fn].labelAlignTo==="labelLine"){var dn=t[fn].label.x-ar;t[fn].linePoints[1][0]+=dn,t[fn].label.x=ar}shiftLayoutOnY(t,Ct,Ct+c)&&tn(t)}function avoidOverlap(t,n,a,s,l,u,c,d){for(var Ct=[],ar=[],en=Number.MAX_VALUE,tn=-Number.MAX_VALUE,on=0;on<t.length;on++){var fn=t[on].label;isPositionCenter(t[on])||(fn.x<n?(en=Math.min(en,fn.x),Ct.push(t[on])):(tn=Math.max(tn,fn.x),ar.push(t[on])))}for(var on=0;on<t.length;on++){var dn=t[on];if(!isPositionCenter(dn)&&dn.linePoints){if(dn.labelStyleWidth!=null)continue;var fn=dn.label,Cn=dn.linePoints,Rn=void 0;dn.labelAlignTo==="edge"?fn.x<n?Rn=Cn[2][0]-dn.labelDistance-c-dn.edgeDistance:Rn=c+l-dn.edgeDistance-Cn[2][0]-dn.labelDistance:dn.labelAlignTo==="labelLine"?fn.x<n?Rn=en-c-dn.bleedMargin:Rn=c+l-tn-dn.bleedMargin:fn.x<n?Rn=fn.x-c-dn.bleedMargin:Rn=c+l-fn.x-dn.bleedMargin,dn.targetTextWidth=Rn,constrainTextWidth(dn,Rn)}}adjustSingleSide(ar,n,a,s,1,l,u,c,d,tn),adjustSingleSide(Ct,n,a,s,-1,l,u,c,d,en);for(var on=0;on<t.length;on++){var dn=t[on];if(!isPositionCenter(dn)&&dn.linePoints){var fn=dn.label,Cn=dn.linePoints,ax=dn.labelAlignTo==="edge",ox=fn.style.padding,sx=ox?ox[1]+ox[3]:0,lx=fn.style.backgroundColor?0:sx,cx=dn.rect.width+lx,fx=Cn[1][0]-Cn[2][0];ax?fn.x<n?Cn[2][0]=c+dn.edgeDistance+cx+dn.labelDistance:Cn[2][0]=c+l-dn.edgeDistance-cx-dn.labelDistance:(fn.x<n?Cn[2][0]=fn.x+dn.labelDistance:Cn[2][0]=fn.x-dn.labelDistance,Cn[1][0]=Cn[2][0]+fx),Cn[1][1]=Cn[2][1]=fn.y}}}function constrainTextWidth(t,n,a){if(a===void 0&&(a=!1),t.labelStyleWidth==null){var s=t.label,l=s.style,u=t.rect,c=l.backgroundColor,d=l.padding,Ct=d?d[1]+d[3]:0,ar=l.overflow,en=u.width+(c?0:Ct);if(n<en||a){var tn=u.height;if(ar&&ar.match("break")){s.setStyle("backgroundColor",null),s.setStyle("width",n-Ct);var on=s.getBoundingRect();s.setStyle("width",Math.ceil(on.width)),s.setStyle("backgroundColor",c)}else{var fn=n-Ct,dn=n<en?fn:a?fn>t.unconstrainedWidth?null:fn:null;s.setStyle("width",dn)}var Cn=s.getBoundingRect();u.width=Cn.width;var Rn=(s.style.margin||0)+2.1;u.height=Cn.height+Rn,u.y-=(u.height-tn)/2}}}function isPositionCenter(t){return t.position==="center"}function pieLabelLayout(t){var n=t.getData(),a=[],s,l,u=!1,c=(t.get("minShowLabelAngle")||0)*RADIAN$1,d=n.getLayout("viewRect"),Ct=n.getLayout("r"),ar=d.width,en=d.x,tn=d.y,on=d.height;function fn(fx){fx.ignore=!0}function dn(fx){if(!fx.ignore)return!0;for(var gx in fx.states)if(fx.states[gx].ignore===!1)return!0;return!1}n.each(function(fx){var gx=n.getItemGraphicEl(fx),mx=gx.shape,px=gx.getTextContent(),hx=gx.getTextGuideLine(),vx=n.getItemModel(fx),yx=vx.getModel("label"),Sx=yx.get("position")||vx.get(["emphasis","label","position"]),_x=yx.get("distanceToLabelLine"),Ex=yx.get("alignTo"),bx=parsePercent(yx.get("edgeDistance"),ar),Ax=yx.get("bleedMargin"),Mx=vx.getModel("labelLine"),Rx=Mx.get("length");Rx=parsePercent(Rx,ar);var Cx=Mx.get("length2");if(Cx=parsePercent(Cx,ar),Math.abs(mx.endAngle-mx.startAngle)<c){each$f(px.states,fn),px.ignore=!0,hx&&(each$f(hx.states,fn),hx.ignore=!0);return}if(dn(px)){var Lx=(mx.startAngle+mx.endAngle)/2,qx=Math.cos(Lx),Ix=Math.sin(Lx),Px,Nx,Bx,$x;s=mx.cx,l=mx.cy;var Vx=Sx==="inside"||Sx==="inner";if(Sx==="center")Px=mx.cx,Nx=mx.cy,$x="center";else{var Gx=(Vx?(mx.r+mx.r0)/2*qx:mx.r*qx)+s,Zx=(Vx?(mx.r+mx.r0)/2*Ix:mx.r*Ix)+l;if(Px=Gx+qx*3,Nx=Zx+Ix*3,!Vx){var jx=Gx+qx*(Rx+Ct-mx.r),Hx=Zx+Ix*(Rx+Ct-mx.r),iE=jx+(qx<0?-1:1)*Cx,Xx=Hx;Ex==="edge"?Px=qx<0?en+bx:en+ar-bx:Px=iE+(qx<0?-_x:_x),Nx=Xx,Bx=[[Gx,Zx],[jx,Hx],[iE,Xx]]}$x=Vx?"center":Ex==="edge"?qx>0?"right":"left":qx>0?"left":"right"}var rE=Math.PI,uE=0,aE=yx.get("rotate");if(isNumber(aE))uE=aE*(rE/180);else if(Sx==="center")uE=0;else if(aE==="radial"||aE===!0){var Kx=qx<0?-Lx+rE:-Lx;uE=Kx}else if(aE==="tangential"&&Sx!=="outside"&&Sx!=="outer"){var ME=Math.atan2(qx,Ix);ME<0&&(ME=rE*2+ME);var IE=Ix>0;IE&&(ME=rE+ME),uE=ME-rE}if(u=!!uE,px.x=Px,px.y=Nx,px.rotation=uE,px.setStyle({verticalAlign:"middle"}),Vx){px.setStyle({align:$x});var UE=px.states.select;UE&&(UE.x+=px.x,UE.y+=px.y)}else{var wE=px.getBoundingRect().clone();wE.applyTransform(px.getComputedTransform());var bE=(px.style.margin||0)+2.1;wE.y-=bE/2,wE.height+=bE,a.push({label:px,labelLine:hx,position:Sx,len:Rx,len2:Cx,minTurnAngle:Mx.get("minTurnAngle"),maxSurfaceAngle:Mx.get("maxSurfaceAngle"),surfaceNormal:new Point(qx,Ix),linePoints:Bx,textAlign:$x,labelDistance:_x,labelAlignTo:Ex,edgeDistance:bx,bleedMargin:Ax,rect:wE,unconstrainedWidth:wE.width,labelStyleWidth:px.style.width})}gx.setTextConfig({inside:Vx})}}),!u&&t.get("avoidLabelOverlap")&&avoidOverlap(a,s,l,Ct,ar,on,en,tn);for(var Cn=0;Cn<a.length;Cn++){var Rn=a[Cn],ax=Rn.label,ox=Rn.labelLine,sx=isNaN(ax.x)||isNaN(ax.y);if(ax){ax.setStyle({align:Rn.textAlign}),sx&&(each$f(ax.states,fn),ax.ignore=!0);var lx=ax.states.select;lx&&(lx.x+=ax.x,lx.y+=ax.y)}if(ox){var cx=Rn.linePoints;sx||!cx?(each$f(ox.states,fn),ox.ignore=!0):(limitTurnAngle(cx,Rn.minTurnAngle),limitSurfaceAngle(cx,Rn.surfaceNormal,Rn.maxSurfaceAngle),ox.setShape({points:cx}),ax.__hostTarget.textGuideLineConfig={anchor:new Point(cx[0][0],cx[0][1])})}}}var PiePiece=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;u.z2=2;var c=new ZRText;return u.setTextContent(c),u.updateData(a,s,l,!0),u}return n.prototype.updateData=function(a,s,l,u){var c=this,d=a.hostModel,Ct=a.getItemModel(s),ar=Ct.getModel("emphasis"),en=a.getItemLayout(s),tn=extend(getSectorCornerRadius(Ct.getModel("itemStyle"),en,!0),en);if(isNaN(tn.startAngle)){c.setShape(tn);return}if(u){c.setShape(tn);var on=d.getShallow("animationType");d.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},d,{dataIndex:s,isFrom:!0}),c.originX=tn.cx,c.originY=tn.cy):on==="scale"?(c.shape.r=en.r0,initProps(c,{shape:{r:en.r}},d,s)):l!=null?(c.setShape({startAngle:l,endAngle:l}),initProps(c,{shape:{startAngle:en.startAngle,endAngle:en.endAngle}},d,s)):(c.shape.endAngle=en.startAngle,updateProps$1(c,{shape:{endAngle:en.endAngle}},d,s))}else saveOldStyle(c),updateProps$1(c,{shape:tn},d,s);c.useStyle(a.getItemVisual(s,"style")),setStatesStylesFromModel(c,Ct);var fn=(en.startAngle+en.endAngle)/2,dn=d.get("selectedOffset"),Cn=Math.cos(fn)*dn,Rn=Math.sin(fn)*dn,ax=Ct.getShallow("cursor");ax&&c.attr("cursor",ax),this._updateLabel(d,a,s),c.ensureState("emphasis").shape=extend({r:en.r+(ar.get("scale")&&ar.get("scaleSize")||0)},getSectorCornerRadius(ar.getModel("itemStyle"),en)),extend(c.ensureState("select"),{x:Cn,y:Rn,shape:getSectorCornerRadius(Ct.getModel(["select","itemStyle"]),en)}),extend(c.ensureState("blur"),{shape:getSectorCornerRadius(Ct.getModel(["blur","itemStyle"]),en)});var ox=c.getTextGuideLine(),sx=c.getTextContent();ox&&extend(ox.ensureState("select"),{x:Cn,y:Rn}),extend(sx.ensureState("select"),{x:Cn,y:Rn}),toggleHoverEmphasis(this,ar.get("focus"),ar.get("blurScope"),ar.get("disabled"))},n.prototype._updateLabel=function(a,s,l){var u=this,c=s.getItemModel(l),d=c.getModel("labelLine"),Ct=s.getItemVisual(l,"style"),ar=Ct&&Ct.fill,en=Ct&&Ct.opacity;setLabelStyle(u,getLabelStatesModels(c),{labelFetcher:s.hostModel,labelDataIndex:l,inheritColor:ar,defaultOpacity:en,defaultText:a.getFormattedLabel(l,"normal")||s.getName(l)});var tn=u.getTextContent();u.setTextConfig({position:null,rotation:null}),tn.attr({z2:10});var on=a.get(["label","position"]);if(on!=="outside"&&on!=="outer")u.removeTextGuideLine();else{var fn=this.getTextGuideLine();fn||(fn=new Polyline$1,this.setTextGuideLine(fn)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:ar,opacity:retrieve3(d.get(["lineStyle","opacity"]),en,1)})}},n})(Sector),PieView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,s,l,u){var c=a.getData(),d=this._data,Ct=this.group,ar;if(!d&&c.count()>0){for(var en=c.getItemLayout(0),tn=1;isNaN(en&&en.startAngle)&&tn<c.count();++tn)en=c.getItemLayout(tn);en&&(ar=en.startAngle)}if(this._emptyCircleSector&&Ct.remove(this._emptyCircleSector),c.count()===0&&a.get("showEmptyCircle")){var on=getSeriesLayoutData(a),fn=new Sector({shape:extend(getBasicPieLayout(a,l),on)});fn.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=fn,Ct.add(fn)}c.diff(d).add(function(dn){var Cn=new PiePiece(c,dn,ar);c.setItemGraphicEl(dn,Cn),Ct.add(Cn)}).update(function(dn,Cn){var Rn=d.getItemGraphicEl(Cn);Rn.updateData(c,dn,ar),Rn.off("click"),Ct.add(Rn),c.setItemGraphicEl(dn,Rn)}).remove(function(dn){var Cn=d.getItemGraphicEl(dn);removeElementWithFadeOut(Cn,a,dn)}).execute(),pieLabelLayout(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},n.prototype.dispose=function(){},n.prototype.containPoint=function(a,s){var l=s.getData(),u=l.getItemLayout(0);if(u){var c=a[0]-u.cx,d=a[1]-u.cy,Ct=Math.sqrt(c*c+d*d);return Ct<=u.r&&Ct>=u.r0}},n.type="pie",n})(ChartView);function createSeriesDataSimply(t,n,a){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:t.getEncode()},n);var s=t.getSource(),l=prepareSeriesDataSchema(s,n).dimensions,u=new SeriesData(l,t);return u.initData(s,a),u}var LegendVisualProvider=(function(){function t(n,a){this._getDataWithEncodedVisual=n,this._getRawData=a}return t.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},t.prototype.containName=function(n){var a=this._getRawData();return a.indexOfName(n)>=0},t.prototype.indexOfName=function(n){var a=this._getDataWithEncodedVisual();return a.indexOfName(n)},t.prototype.getItemVisual=function(n,a){var s=this._getDataWithEncodedVisual();return s.getItemVisual(n,a)},t})(),innerData=makeInner(),PieSeriesModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype.getDataParams=function(a){var s=this.getData(),l=innerData(s),u=l.seats;if(!u){var c=[];s.each(s.mapDimension("value"),function(Ct){c.push(Ct)}),u=l.seats=getPercentSeats(c,s.hostModel.get("percentPrecision"))}var d=t.prototype.getDataParams.call(this,a);return d.percent=u[a]||0,d.$vars.push("percent"),d},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,l=a.emphasis.labelLine;s.show=s.show&&a.label.show,l.show=l.show&&a.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n})(SeriesModel);function negativeDataFilter(t){return{seriesType:t,reset:function(n,a){var s=n.getData();s.filterSelf(function(l){var u=s.mapDimension("value"),c=s.get(u,l);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$O(t){t.registerChartView(PieView),t.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",t.registerAction),t.registerLayout(curry$1(pieLayout,"pie")),t.registerProcessor(dataFilter$1("pie")),t.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},n.prototype.brushSelector=function(a,s,l){return l.point(s.getItemLayout(a))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n})(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=(function(){function t(){}return t})(),LargeSymbolPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(a,s){var l=s.points,u=s.size,c=this.symbolProxy,d=c.shape,Ct=a.getContext?a.getContext():a,ar=Ct&&u[0]<BOOST_SIZE_THRESHOLD,en=this.softClipShape,tn;if(ar){this._ctx=Ct;return}for(this._ctx=null,tn=this._off;tn<l.length;){var on=l[tn++],fn=l[tn++];isNaN(on)||isNaN(fn)||en&&!en.contain(on,fn)||(d.x=on-u[0]/2,d.y=fn-u[1]/2,d.width=u[0],d.height=u[1],c.buildPath(a,d,!0))}this.incremental&&(this._off=tn,this.notClear=!0)},n.prototype.afterBrush=function(){var a=this.shape,s=a.points,l=a.size,u=this._ctx,c=this.softClipShape,d;if(u){for(d=this._off;d<s.length;){var Ct=s[d++],ar=s[d++];isNaN(Ct)||isNaN(ar)||c&&!c.contain(Ct,ar)||u.fillRect(Ct-l[0]/2,ar-l[1]/2,l[0],l[1])}this.incremental&&(this._off=d,this.notClear=!0)}},n.prototype.findDataIndex=function(a,s){for(var l=this.shape,u=l.points,c=l.size,d=Math.max(c[0],4),Ct=Math.max(c[1],4),ar=u.length/2-1;ar>=0;ar--){var en=ar*2,tn=u[en]-d/2,on=u[en+1]-Ct/2;if(a>=tn&&s>=on&&a<=tn+d&&s<=on+Ct)return ar}return-1},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=l[0],s=l[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,l=s.points,u=s.size,c=u[0],d=u[1],Ct=1/0,ar=1/0,en=-1/0,tn=-1/0,on=0;on<l.length;){var fn=l[on++],dn=l[on++];Ct=Math.min(fn,Ct),en=Math.max(fn,en),ar=Math.min(dn,ar),tn=Math.max(dn,tn)}a=this._rect=new BoundingRect(Ct-c/2,ar-d/2,en-Ct+c,tn-ar+d)}return a},n})(Path),LargeSymbolDraw=(function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n,a){this._clear();var s=this._create();s.setShape({points:n.getLayout("points")}),this._setCommon(s,n,a)},t.prototype.updateLayout=function(n){var a=n.getLayout("points");this.group.eachChild(function(s){if(s.startIndex!=null){var l=(s.endIndex-s.startIndex)*2,u=s.startIndex*4*2;a=new Float32Array(a.buffer,u,l)}s.setShape("points",a),s.reset()})},t.prototype.incrementalPrepareUpdate=function(n){this._clear()},t.prototype.incrementalUpdate=function(n,a,s){var l=this._newAdded[0],u=a.getLayout("points"),c=l&&l.shape.points;if(c&&c.length<2e4){var d=c.length,Ct=new Float32Array(d+u.length);Ct.set(c),Ct.set(u,d),l.endIndex=n.end,l.setShape({points:Ct})}else{this._newAdded=[];var ar=this._create();ar.startIndex=n.start,ar.endIndex=n.end,ar.incremental=!0,ar.setShape({points:u}),this._setCommon(ar,a,s)}},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},t.prototype._setCommon=function(n,a,s){var l=a.hostModel;s=s||{};var u=a.getVisual("symbolSize");n.setShape("size",u instanceof Array?u:[u,u]),n.softClipShape=s.clipShape||null,n.symbolProxy=createSymbol$1(a.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var c=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(l.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var d=a.getVisual("style"),Ct=d&&d.fill;Ct&&n.setColor(Ct);var ar=getECData(n);ar.seriesIndex=l.seriesIndex,n.on("mousemove",function(en){ar.dataIndex=null;var tn=n.hoverDataIdx;tn>=0&&(ar.dataIndex=tn+(n.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t})(),ScatterView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.updateData(u,{clipShape:this._getClipShape(a)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(a,s,l){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.incrementalPrepareUpdate(u),this._finished=!1},n.prototype.incrementalRender=function(a,s,l){this._symbolDraw.incrementalUpdate(a,s.getData(),{clipShape:this._getClipShape(s)}),this._finished=a.end===s.getData().count()},n.prototype.updateTransform=function(a,s,l){var u=a.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var c=pointsLayout("").reset(a,s,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},n.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},n.prototype._getClipShape=function(a){if(a.get("clip",!0)){var s=a.coordinateSystem;return s&&s.getArea&&s.getArea(.1)}},n.prototype._updateSymbolDraw=function(a,s){var l=this._symbolDraw,u=s.pipelineContext,c=u.large;return(!l||c!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=c?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=c,this.group.removeAll()),this.group.add(l.group),l},n.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n})(ChartView),GridModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n})(ComponentModel),CartesianAxisModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n})(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(t,n,a,s){each$f(AXIS_TYPES,function(l,u){var c=merge(merge({},axisDefault[u],!0),s,!0),d=(function(Ct){__extends(ar,Ct);function ar(){var en=Ct!==null&&Ct.apply(this,arguments)||this;return en.type=n+"Axis."+u,en}return ar.prototype.mergeDefaultAndTheme=function(en,tn){var on=fetchLayoutMode(this),fn=on?getLayoutParams(en):{},dn=tn.getTheme();merge(en,dn.get(u+"Axis")),merge(en,this.getDefaultOption()),en.type=getAxisType(en),on&&mergeLayoutParam(en,fn,on)},ar.prototype.optionUpdated=function(){var en=this.option;en.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},ar.prototype.getCategories=function(en){var tn=this.option;if(tn.type==="category")return en?tn.data:this.__ordinalMeta.categories},ar.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},ar.type=n+"Axis."+u,ar.defaultOption=c,ar})(a);t.registerComponentModel(d)}),t.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(t){return t.type||(t.data?"category":"value")}var Cartesian=(function(){function t(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return t.prototype.getAxis=function(n){return this._axes[n]},t.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},t.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(a){return a.scale.type===n})},t.prototype.addAxis=function(n){var a=n.dim;this._axes[a]=n,this._dimList.push(a)},t})(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(t){return t.type==="interval"||t.type==="time"}var Cartesian2D=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=cartesian2DDimensions,a}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,s=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(a)||!canCalculateAffineTransform(s))){var l=a.getExtent(),u=s.getExtent(),c=this.dataToPoint([l[0],u[0]]),d=this.dataToPoint([l[1],u[1]]),Ct=l[1]-l[0],ar=u[1]-u[0];if(!(!Ct||!ar)){var en=(d[0]-c[0])/Ct,tn=(d[1]-c[1])/ar,on=c[0]-l[0]*en,fn=c[1]-u[0]*tn,dn=this._transform=[en,0,0,tn,on,fn];this._invTransform=invert([],dn)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(a){var s=this.getAxis("x"),l=this.getAxis("y");return s.contain(s.toLocalCoord(a[0]))&&l.contain(l.toLocalCoord(a[1]))},n.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},n.prototype.containZone=function(a,s){var l=this.dataToPoint(a),u=this.dataToPoint(s),c=this.getArea(),d=new BoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]);return c.intersect(d)},n.prototype.dataToPoint=function(a,s,l){l=l||[];var u=a[0],c=a[1];if(this._transform&&u!=null&&isFinite(u)&&c!=null&&isFinite(c))return applyTransform$1(l,a,this._transform);var d=this.getAxis("x"),Ct=this.getAxis("y");return l[0]=d.toGlobalCoord(d.dataToCoord(u,s)),l[1]=Ct.toGlobalCoord(Ct.dataToCoord(c,s)),l},n.prototype.clampData=function(a,s){var l=this.getAxis("x").scale,u=this.getAxis("y").scale,c=l.getExtent(),d=u.getExtent(),Ct=l.parse(a[0]),ar=u.parse(a[1]);return s=s||[],s[0]=Math.min(Math.max(Math.min(c[0],c[1]),Ct),Math.max(c[0],c[1])),s[1]=Math.min(Math.max(Math.min(d[0],d[1]),ar),Math.max(d[0],d[1])),s},n.prototype.pointToData=function(a,s){var l=[];if(this._invTransform)return applyTransform$1(l,a,this._invTransform);var u=this.getAxis("x"),c=this.getAxis("y");return l[0]=u.coordToData(u.toLocalCoord(a[0]),s),l[1]=c.coordToData(c.toLocalCoord(a[1]),s),l},n.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},n.prototype.getArea=function(a){a=a||0;var s=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),u=Math.min(s[0],s[1])-a,c=Math.min(l[0],l[1])-a,d=Math.max(s[0],s[1])-u+a,Ct=Math.max(l[0],l[1])-c+a;return new BoundingRect(u,c,d,Ct)},n})(Cartesian),Axis2D=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,a,s,l)||this;return d.index=0,d.type=u||"value",d.position=c||"bottom",d}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.getGlobalExtent=function(a){var s=this.getExtent();return s[0]=this.toGlobalCoord(s[0]),s[1]=this.toGlobalCoord(s[1]),a&&s[0]>s[1]&&s.reverse(),s},n.prototype.pointToData=function(a,s){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),s)},n.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},n})(Axis);function layout$2(t,n,a){a=a||{};var s=t.coordinateSystem,l=n.axis,u={},c=l.getAxesOnZeroOf()[0],d=l.position,Ct=c?"onZero":d,ar=l.dim,en=s.getRect(),tn=[en.x,en.x+en.width,en.y,en.y+en.height],on={left:0,right:1,top:0,bottom:1,onZero:2},fn=n.get("offset")||0,dn=ar==="x"?[tn[2]-fn,tn[3]+fn]:[tn[0]-fn,tn[1]+fn];if(c){var Cn=c.toGlobalCoord(c.dataToCoord(0));dn[on.onZero]=Math.max(Math.min(Cn,dn[1]),dn[0])}u.position=[ar==="y"?dn[on[Ct]]:tn[0],ar==="x"?dn[on[Ct]]:tn[3]],u.rotation=Math.PI/2*(ar==="x"?0:1);var Rn={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=Rn[d],u.labelOffset=c?dn[on[d]]-dn[on.onZero]:0,n.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(a.labelInside,n.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var ax=n.get(["axisLabel","rotate"]);return u.labelRotate=Ct==="top"?-ax:ax,u.z2=1,u}function isCartesian2DSeries(t){return t.get("coordinateSystem")==="cartesian2d"}function findAxisModels(t){var n={xAxisModel:null,yAxisModel:null};return each$f(n,function(a,s){var l=s.replace(/Model$/,""),u=t.getReferringComponents(l,SINGLE_REFERRING).models[0];n[s]=u}),n}var mathLog=Math.log;function alignScaleTicks(t,n,a){var s=IntervalScale.prototype,l=s.getTicks.call(a),u=s.getTicks.call(a,!0),c=l.length-1,d=s.getInterval.call(a),Ct=getScaleExtent(t,n),ar=Ct.extent,en=Ct.fixMin,tn=Ct.fixMax;if(t.type==="log"){var on=mathLog(t.base);ar=[mathLog(ar[0])/on,mathLog(ar[1])/on]}t.setExtent(ar[0],ar[1]),t.calcNiceExtent({splitNumber:c,fixMin:en,fixMax:tn});var fn=s.getExtent.call(t);en&&(ar[0]=fn[0]),tn&&(ar[1]=fn[1]);var dn=s.getInterval.call(t),Cn=ar[0],Rn=ar[1];if(en&&tn)dn=(Rn-Cn)/c;else if(en)for(Rn=ar[0]+dn*c;Rn<ar[1]&&isFinite(Rn)&&isFinite(ar[1]);)dn=increaseInterval(dn),Rn=ar[0]+dn*c;else if(tn)for(Cn=ar[1]-dn*c;Cn>ar[0]&&isFinite(Cn)&&isFinite(ar[0]);)dn=increaseInterval(dn),Cn=ar[1]-dn*c;else{var ax=t.getTicks().length-1;ax>c&&(dn=increaseInterval(dn));var ox=dn*c;Rn=Math.ceil(ar[1]/dn)*dn,Cn=round$3(Rn-ox),Cn<0&&ar[0]>=0?(Cn=0,Rn=round$3(ox)):Rn>0&&ar[1]<=0&&(Rn=0,Cn=-round$3(ox))}var sx=(l[0].value-u[0].value)/d,lx=(l[c].value-u[c].value)/d;s.setExtent.call(t,Cn+dn*sx,Rn+dn*lx),s.setInterval.call(t,dn),(sx||lx)&&s.setNiceExtent.call(t,Cn+dn,Rn-dn)}var Grid=(function(){function t(n,a,s){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,a,s),this.model=n}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(n,a){var s=this._axesMap;this._updateScale(n,this.model);function l(c){var d,Ct=keys(c),ar=Ct.length;if(ar){for(var en=[],tn=ar-1;tn>=0;tn--){var on=+Ct[tn],fn=c[on],dn=fn.model,Cn=fn.scale;isIntervalOrLogScale(Cn)&&dn.get("alignTicks")&&dn.get("interval")==null?en.push(fn):(niceScaleExtent(Cn,dn),isIntervalOrLogScale(Cn)&&(d=fn))}en.length&&(d||(d=en.pop(),niceScaleExtent(d.scale,d.model)),each$f(en,function(Rn){alignScaleTicks(Rn.scale,Rn.model,d.scale)}))}}l(s.x),l(s.y);var u={};each$f(s.x,function(c){fixAxisOnZero(s,"y",c,u)}),each$f(s.y,function(c){fixAxisOnZero(s,"x",c,u)}),this.resize(this.model,a)},t.prototype.resize=function(n,a,s){var l=n.getBoxLayoutParams(),u=!s&&n.get("containLabel"),c=getLayoutRect(l,{width:a.getWidth(),height:a.getHeight()});this._rect=c;var d=this._axesList;Ct(),u&&(each$f(d,function(ar){if(!ar.model.get(["axisLabel","inside"])){var en=estimateLabelUnionRect(ar);if(en){var tn=ar.isHorizontal()?"height":"width",on=ar.model.get(["axisLabel","margin"]);c[tn]-=en[tn]+on,ar.position==="top"?c.y+=en.height+on:ar.position==="left"&&(c.x+=en.width+on)}}}),Ct()),each$f(this._coordsList,function(ar){ar.calcAffineTransform()});function Ct(){each$f(d,function(ar){var en=ar.isHorizontal(),tn=en?[0,c.width]:[0,c.height],on=ar.inverse?1:0;ar.setExtent(tn[on],tn[1-on]),updateAxisTransform(ar,en?c.x:c.y)})}},t.prototype.getAxis=function(n,a){var s=this._axesMap[n];if(s!=null)return s[a||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(n,a){if(n!=null&&a!=null){var s="x"+n+"y"+a;return this._coordsMap[s]}isObject$3(n)&&(a=n.yAxisIndex,n=n.xAxisIndex);for(var l=0,u=this._coordsList;l<u.length;l++)if(u[l].getAxis("x").index===n||u[l].getAxis("y").index===a)return u[l]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(n,a,s){var l=this._findConvertTarget(a);return l.cartesian?l.cartesian.dataToPoint(s):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(s)):null},t.prototype.convertFromPixel=function(n,a,s){var l=this._findConvertTarget(a);return l.cartesian?l.cartesian.pointToData(s):l.axis?l.axis.coordToData(l.axis.toLocalCoord(s)):null},t.prototype._findConvertTarget=function(n){var a=n.seriesModel,s=n.xAxisModel||a&&a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=n.yAxisModel||a&&a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=n.gridModel,c=this._coordsList,d,Ct;if(a)d=a.coordinateSystem,indexOf(c,d)<0&&(d=null);else if(s&&l)d=this.getCartesian(s.componentIndex,l.componentIndex);else if(s)Ct=this.getAxis("x",s.componentIndex);else if(l)Ct=this.getAxis("y",l.componentIndex);else if(u){var ar=u.coordinateSystem;ar===this&&(d=this._coordsList[0])}return{cartesian:d,axis:Ct}},t.prototype.containPoint=function(n){var a=this._coordsList[0];if(a)return a.containPoint(n)},t.prototype._initCartesian=function(n,a,s){var l=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},d={x:{},y:{}},Ct={x:0,y:0};if(a.eachComponent("xAxis",ar("x"),this),a.eachComponent("yAxis",ar("y"),this),!Ct.x||!Ct.y){this._axesMap={},this._axesList=[];return}this._axesMap=d,each$f(d.x,function(en,tn){each$f(d.y,function(on,fn){var dn="x"+tn+"y"+fn,Cn=new Cartesian2D(dn);Cn.master=l,Cn.model=n,l._coordsMap[dn]=Cn,l._coordsList.push(Cn),Cn.addAxis(en),Cn.addAxis(on)})});function ar(en){return function(tn,on){if(isAxisUsedInTheGrid(tn,n)){var fn=tn.get("position");en==="x"?fn!=="top"&&fn!=="bottom"&&(fn=c.bottom?"top":"bottom"):fn!=="left"&&fn!=="right"&&(fn=c.left?"right":"left"),c[fn]=!0;var dn=new Axis2D(en,createScaleByModel$1(tn),[0,0],tn.get("type"),fn),Cn=dn.type==="category";dn.onBand=Cn&&tn.get("boundaryGap"),dn.inverse=tn.get("inverse"),tn.axis=dn,dn.model=tn,dn.grid=u,dn.index=on,u._axesList.push(dn),d[en][on]=dn,Ct[en]++}}}},t.prototype._updateScale=function(n,a){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var u=l.model.get("categorySortInfo");l.scale.setSortInfo(u)}}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,d=u.yAxisModel;if(!isAxisUsedInTheGrid(c,a)||!isAxisUsedInTheGrid(d,a))return;var Ct=this.getCartesian(c.componentIndex,d.componentIndex),ar=l.getData(),en=Ct.getAxis("x"),tn=Ct.getAxis("y");s(ar,en),s(ar,tn)}},this);function s(l,u){each$f(getDataDimensionsOnAxis(l,u.dim),function(c){u.scale.unionExtentFromData(l,c)})}},t.prototype.getTooltipAxes=function(n){var a=[],s=[];return each$f(this.getCartesians(),function(l){var u=n!=null&&n!=="auto"?l.getAxis(n):l.getBaseAxis(),c=l.getOtherAxis(u);indexOf(a,u)<0&&a.push(u),indexOf(s,c)<0&&s.push(c)}),{baseAxes:a,otherAxes:s}},t.create=function(n,a){var s=[];return n.eachComponent("grid",function(l,u){var c=new t(l,n,a);c.name="grid_"+u,c.resize(l,a,!0),l.coordinateSystem=c,s.push(c)}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,d=u.yAxisModel,Ct=c.getCoordSysModel(),ar=Ct.coordinateSystem;l.coordinateSystem=ar.getCartesian(c.componentIndex,d.componentIndex)}}),s},t.dimensions=cartesian2DDimensions,t})();function isAxisUsedInTheGrid(t,n){return t.getCoordSysModel()===n}function fixAxisOnZero(t,n,a,s){a.getAxesOnZeroOf=function(){return u?[u]:[]};var l=t[n],u,c=a.model,d=c.get(["axisLine","onZero"]),Ct=c.get(["axisLine","onZeroAxisIndex"]);if(!d)return;if(Ct!=null)canOnZeroToAxis(l[Ct])&&(u=l[Ct]);else for(var ar in l)if(l.hasOwnProperty(ar)&&canOnZeroToAxis(l[ar])&&!s[en(l[ar])]){u=l[ar];break}u&&(s[en(u)]=!0);function en(tn){return tn.dim+"_"+tn.index}}function canOnZeroToAxis(t){return t&&t.type!=="category"&&t.type!=="time"&&ifAxisCrossZero(t)}function updateAxisTransform(t,n){var a=t.getExtent(),s=a[0]+a[1];t.toGlobalCoord=t.dim==="x"?function(l){return l+n}:function(l){return s-l+n},t.toLocalCoord=t.dim==="x"?function(l){return l-n}:function(l){return s-l+n}}var PI$3=Math.PI,AxisBuilder=(function(){function t(n,a){this.group=new Group$3,this.opt=a,this.axisModel=n,defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var s=new Group$3({x:a.position[0],y:a.position[1],rotation:a.rotation});s.updateTransform(),this._transformGroup=s}return t.prototype.hasBuilder=function(n){return!!builders[n]},t.prototype.add=function(n){builders[n](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(n,a,s){var l=remRadian(a-n),u,c;return isRadianAroundZero(l)?(c=s>0?"top":"bottom",u="center"):isRadianAroundZero(l-PI$3)?(c=s>0?"bottom":"top",u="center"):(c="middle",l>0&&l<PI$3?u=s>0?"right":"left":u=s>0?"left":"right"),{rotation:l,textAlign:u,textVerticalAlign:c}},t.makeAxisEventDataBase=function(n){var a={componentType:n.mainType,componentIndex:n.componentIndex};return a[n.mainType+"Index"]=n.componentIndex,a},t.isLabelSilent=function(n){var a=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||a&&a.show)},t})(),builders={axisLine:function(t,n,a,s){var l=n.get(["axisLine","show"]);if(l==="auto"&&t.handleAutoShown&&(l=t.handleAutoShown("axisLine")),!!l){var u=n.axis.getExtent(),c=s.transform,d=[u[0],0],Ct=[u[1],0],ar=d[0]>Ct[0];c&&(applyTransform$1(d,d,c),applyTransform$1(Ct,Ct,c));var en=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),tn=new Line$1({shape:{x1:d[0],y1:d[1],x2:Ct[0],y2:Ct[1]},style:en,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(tn.shape,tn.style.lineWidth),tn.anid="line",a.add(tn);var on=n.get(["axisLine","symbol"]);if(on!=null){var fn=n.get(["axisLine","symbolSize"]);isString$1(on)&&(on=[on,on]),(isString$1(fn)||isNumber(fn))&&(fn=[fn,fn]);var dn=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,fn),Cn=fn[0],Rn=fn[1];each$f([{rotate:t.rotation+Math.PI/2,offset:dn[0],r:0},{rotate:t.rotation-Math.PI/2,offset:dn[1],r:Math.sqrt((d[0]-Ct[0])*(d[0]-Ct[0])+(d[1]-Ct[1])*(d[1]-Ct[1]))}],function(ax,ox){if(on[ox]!=="none"&&on[ox]!=null){var sx=createSymbol$1(on[ox],-Cn/2,-Rn/2,Cn,Rn,en.stroke,!0),lx=ax.r+ax.offset,cx=ar?Ct:d;sx.attr({rotation:ax.rotate,x:cx[0]+lx*Math.cos(t.rotation),y:cx[1]-lx*Math.sin(t.rotation),silent:!0,z2:11}),a.add(sx)}})}}},axisTickLabel:function(t,n,a,s){var l=buildAxisMajorTicks(a,s,n,t),u=buildAxisLabel(a,s,n,t);if(fixMinMaxLabelShow(n,u,l),buildAxisMinorTicks(a,s,n,t.tickDirection),n.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(u,function(d){return{label:d,priority:d.z2,defaultAttr:{ignore:d.ignore}}}));hideOverlap(c)}},axisName:function(t,n,a,s){var l=retrieve(t.axisName,n.get("name"));if(l){var u=n.get("nameLocation"),c=t.nameDirection,d=n.getModel("nameTextStyle"),Ct=n.get("nameGap")||0,ar=n.axis.getExtent(),en=ar[0]>ar[1]?-1:1,tn=[u==="start"?ar[0]-en*Ct:u==="end"?ar[1]+en*Ct:(ar[0]+ar[1])/2,isNameLocationCenter(u)?t.labelOffset+c*Ct:0],on,fn=n.get("nameRotate");fn!=null&&(fn=fn*PI$3/180);var dn;isNameLocationCenter(u)?on=AxisBuilder.innerTextLayout(t.rotation,fn??t.rotation,c):(on=endTextLayout(t.rotation,u,fn||0,ar),dn=t.axisNameAvailableWidth,dn!=null&&(dn=Math.abs(dn/Math.sin(on.rotation)),!isFinite(dn)&&(dn=null)));var Cn=d.getFont(),Rn=n.get("nameTruncate",!0)||{},ax=Rn.ellipsis,ox=retrieve(t.nameTruncateMaxWidth,Rn.maxWidth,dn),sx=new ZRText({x:tn[0],y:tn[1],rotation:on.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(d,{text:l,font:Cn,overflow:"truncate",width:ox,ellipsis:ax,fill:d.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:d.get("align")||on.textAlign,verticalAlign:d.get("verticalAlign")||on.textVerticalAlign}),z2:1});if(setTooltipConfig({el:sx,componentModel:n,itemName:l}),sx.__fullText=l,sx.anid="name",n.get("triggerEvent")){var lx=AxisBuilder.makeAxisEventDataBase(n);lx.targetType="axisName",lx.name=l,getECData(sx).eventData=lx}s.add(sx),sx.updateTransform(),a.add(sx),sx.decomposeTransform()}}};function endTextLayout(t,n,a,s){var l=remRadian(a-t),u,c,d=s[0]>s[1],Ct=n==="start"&&!d||n!=="start"&&d;return isRadianAroundZero(l-PI$3/2)?(c=Ct?"bottom":"top",u="center"):isRadianAroundZero(l-PI$3*1.5)?(c=Ct?"top":"bottom",u="center"):(c="middle",l<PI$3*1.5&&l>PI$3/2?u=Ct?"left":"right":u=Ct?"right":"left"),{rotation:l,textAlign:u,textVerticalAlign:c}}function fixMinMaxLabelShow(t,n,a){if(!shouldShowAllLabels(t.axis)){var s=t.get(["axisLabel","showMinLabel"]),l=t.get(["axisLabel","showMaxLabel"]);n=n||[],a=a||[];var u=n[0],c=n[1],d=n[n.length-1],Ct=n[n.length-2],ar=a[0],en=a[1],tn=a[a.length-1],on=a[a.length-2];s===!1?(ignoreEl(u),ignoreEl(ar)):isTwoLabelOverlapped(u,c)&&(s?(ignoreEl(c),ignoreEl(en)):(ignoreEl(u),ignoreEl(ar))),l===!1?(ignoreEl(d),ignoreEl(tn)):isTwoLabelOverlapped(Ct,d)&&(l?(ignoreEl(Ct),ignoreEl(on)):(ignoreEl(d),ignoreEl(tn)))}}function ignoreEl(t){t&&(t.ignore=!0)}function isTwoLabelOverlapped(t,n){var a=t&&t.getBoundingRect().clone(),s=n&&n.getBoundingRect().clone();if(!(!a||!s)){var l=identity([]);return rotate(l,l,-t.rotation),a.applyTransform(mul([],l,t.getLocalTransform())),s.applyTransform(mul([],l,n.getLocalTransform())),a.intersect(s)}}function isNameLocationCenter(t){return t==="middle"||t==="center"}function createTicks(t,n,a,s,l){for(var u=[],c=[],d=[],Ct=0;Ct<t.length;Ct++){var ar=t[Ct].coord;c[0]=ar,c[1]=0,d[0]=ar,d[1]=a,n&&(applyTransform$1(c,c,n),applyTransform$1(d,d,n));var en=new Line$1({shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:s,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(en.shape,en.style.lineWidth),en.anid=l+"_"+t[Ct].tickValue,u.push(en)}return u}function buildAxisMajorTicks(t,n,a,s){var l=a.axis,u=a.getModel("axisTick"),c=u.get("show");if(c==="auto"&&s.handleAutoShown&&(c=s.handleAutoShown("axisTick")),!(!c||l.scale.isBlank())){for(var d=u.getModel("lineStyle"),Ct=s.tickDirection*u.get("length"),ar=l.getTicksCoords(),en=createTicks(ar,n.transform,Ct,defaults(d.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),tn=0;tn<en.length;tn++)t.add(en[tn]);return en}}function buildAxisMinorTicks(t,n,a,s){var l=a.axis,u=a.getModel("minorTick");if(!(!u.get("show")||l.scale.isBlank())){var c=l.getMinorTicksCoords();if(c.length)for(var d=u.getModel("lineStyle"),Ct=s*u.get("length"),ar=defaults(d.getLineStyle(),defaults(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),en=0;en<c.length;en++)for(var tn=createTicks(c[en],n.transform,Ct,ar,"minorticks_"+en),on=0;on<tn.length;on++)t.add(tn[on])}}function buildAxisLabel(t,n,a,s){var l=a.axis,u=retrieve(s.axisLabelShow,a.get(["axisLabel","show"]));if(!(!u||l.scale.isBlank())){var c=a.getModel("axisLabel"),d=c.get("margin"),Ct=l.getViewLabels(),ar=(retrieve(s.labelRotate,c.get("rotate"))||0)*PI$3/180,en=AxisBuilder.innerTextLayout(s.rotation,ar,s.labelDirection),tn=a.getCategories&&a.getCategories(!0),on=[],fn=AxisBuilder.isLabelSilent(a),dn=a.get("triggerEvent");return each$f(Ct,function(Cn,Rn){var ax=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(Cn.tickValue):Cn.tickValue,ox=Cn.formattedLabel,sx=Cn.rawLabel,lx=c;if(tn&&tn[ax]){var cx=tn[ax];isObject$3(cx)&&cx.textStyle&&(lx=new Model(cx.textStyle,c,a.ecModel))}var fx=lx.getTextColor()||a.get(["axisLine","lineStyle","color"]),gx=l.dataToCoord(ax),mx=lx.getShallow("align",!0)||en.textAlign,px=retrieve2(lx.getShallow("alignMinLabel",!0),mx),hx=retrieve2(lx.getShallow("alignMaxLabel",!0),mx),vx=lx.getShallow("verticalAlign",!0)||lx.getShallow("baseline",!0)||en.textVerticalAlign,yx=retrieve2(lx.getShallow("verticalAlignMinLabel",!0),vx),Sx=retrieve2(lx.getShallow("verticalAlignMaxLabel",!0),vx),_x=new ZRText({x:gx,y:s.labelOffset+s.labelDirection*d,rotation:en.rotation,silent:fn,z2:10+(Cn.level||0),style:createTextStyle$1(lx,{text:ox,align:Rn===0?px:Rn===Ct.length-1?hx:mx,verticalAlign:Rn===0?yx:Rn===Ct.length-1?Sx:vx,fill:isFunction$1(fx)?fx(l.type==="category"?sx:l.type==="value"?ax+"":ax,Rn):fx})});if(_x.anid="label_"+ax,setTooltipConfig({el:_x,componentModel:a,itemName:ox,formatterParamsExtra:{isTruncated:function(){return _x.isTruncated},value:sx,tickIndex:Rn}}),dn){var Ex=AxisBuilder.makeAxisEventDataBase(a);Ex.targetType="axisLabel",Ex.value=sx,Ex.tickIndex=Rn,l.type==="category"&&(Ex.dataIndex=ax),getECData(_x).eventData=Ex}n.add(_x),_x.updateTransform(),on.push(_x),t.add(_x),_x.decomposeTransform()}),on}}function collect(t,n){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(a,t,n),a.seriesInvolved&&collectSeriesInfo(a,t),a}function collectAxesInfo(t,n,a){var s=n.getComponent("tooltip"),l=n.getComponent("axisPointer"),u=l.get("link",!0)||[],c=[];each$f(a.getCoordinateSystems(),function(d){if(!d.axisPointerEnabled)return;var Ct=makeKey(d.model),ar=t.coordSysAxesInfo[Ct]={};t.coordSysMap[Ct]=d;var en=d.model,tn=en.getModel("tooltip",s);if(each$f(d.getAxes(),curry$1(Cn,!1,null)),d.getTooltipAxes&&s&&tn.get("show")){var on=tn.get("trigger")==="axis",fn=tn.get(["axisPointer","type"])==="cross",dn=d.getTooltipAxes(tn.get(["axisPointer","axis"]));(on||fn)&&each$f(dn.baseAxes,curry$1(Cn,fn?"cross":!0,on)),fn&&each$f(dn.otherAxes,curry$1(Cn,"cross",!1))}function Cn(Rn,ax,ox){var sx=ox.model.getModel("axisPointer",l),lx=sx.get("show");if(!(!lx||lx==="auto"&&!Rn&&!isHandleTrigger(sx))){ax==null&&(ax=sx.get("triggerTooltip")),sx=Rn?makeAxisPointerModel(ox,tn,l,n,Rn,ax):sx;var cx=sx.get("snap"),fx=sx.get("triggerEmphasis"),gx=makeKey(ox.model),mx=ax||cx||ox.type==="category",px=t.axesInfo[gx]={key:gx,axis:ox,coordSys:d,axisPointerModel:sx,triggerTooltip:ax,triggerEmphasis:fx,involveSeries:mx,snap:cx,useHandle:isHandleTrigger(sx),seriesModels:[],linkGroup:null};ar[gx]=px,t.seriesInvolved=t.seriesInvolved||mx;var hx=getLinkGroupIndex(u,ox);if(hx!=null){var vx=c[hx]||(c[hx]={axesInfo:{}});vx.axesInfo[gx]=px,vx.mapper=u[hx].mapper,px.linkGroup=vx}}}})}function makeAxisPointerModel(t,n,a,s,l,u){var c=n.getModel("axisPointer"),d=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],Ct={};each$f(d,function(on){Ct[on]=clone$4(c.get(on))}),Ct.snap=t.type!=="category"&&!!u,c.get("type")==="cross"&&(Ct.type="line");var ar=Ct.label||(Ct.label={});if(ar.show==null&&(ar.show=!1),l==="cross"){var en=c.get(["label","show"]);if(ar.show=en??!0,!u){var tn=Ct.lineStyle=c.get("crossStyle");tn&&defaults(ar,tn.textStyle)}}return t.model.getModel("axisPointer",new Model(Ct,a,s))}function collectSeriesInfo(t,n){n.eachSeries(function(a){var s=a.coordinateSystem,l=a.get(["tooltip","trigger"],!0),u=a.get(["tooltip","show"],!0);!s||l==="none"||l===!1||l==="item"||u===!1||a.get(["axisPointer","show"],!0)===!1||each$f(t.coordSysAxesInfo[makeKey(s.model)],function(c){var d=c.axis;s.getAxis(d.dim)===d&&(c.seriesModels.push(a),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=a.getData().count())})})}function getLinkGroupIndex(t,n){for(var a=n.model,s=n.dim,l=0;l<t.length;l++){var u=t[l]||{};if(checkPropInLink(u[s+"AxisId"],a.id)||checkPropInLink(u[s+"AxisIndex"],a.componentIndex)||checkPropInLink(u[s+"AxisName"],a.name))return l}}function checkPropInLink(t,n){return t==="all"||isArray$1(t)&&indexOf(t,n)>=0||t===n}function fixValue(t){var n=getAxisInfo$1(t);if(n){var a=n.axisPointerModel,s=n.axis.scale,l=a.option,u=a.get("status"),c=a.get("value");c!=null&&(c=s.parse(c));var d=isHandleTrigger(a);u==null&&(l.status=d?"show":"hide");var Ct=s.getExtent().slice();Ct[0]>Ct[1]&&Ct.reverse(),(c==null||c>Ct[1])&&(c=Ct[1]),c<Ct[0]&&(c=Ct[0]),l.value=c,d&&(l.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(t){var n=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(t)]}function getAxisPointerModel(t){var n=getAxisInfo$1(t);return n&&n.axisPointerModel}function isHandleTrigger(t){return!!t.get(["handle","show"])}function makeKey(t){return t.type+"||"+t.id}var axisPointerClazz={},AxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this.axisPointerClass&&fixValue(a),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,l,!0)},n.prototype.updateAxisPointer=function(a,s,l,u){this._doUpdateAxisPointerClass(a,l,!1)},n.prototype.remove=function(a,s){var l=this._axisPointer;l&&l.remove(s)},n.prototype.dispose=function(a,s){this._disposeAxisPointer(s),t.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(a,s,l){var u=n.getAxisPointerClass(this.axisPointerClass);if(u){var c=getAxisPointerModel(a);c?(this._axisPointer||(this._axisPointer=new u)).render(a,c,s,l):this._disposeAxisPointer(s)}},n.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},n.registerAxisPointerClass=function(a,s){axisPointerClazz[a]=s},n.getAxisPointerClass=function(a){return a&&axisPointerClazz[a]},n.type="axis",n})(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(t,n,a,s){var l=a.axis;if(!l.scale.isBlank()){var u=a.getModel("splitArea"),c=u.getModel("areaStyle"),d=c.get("color"),Ct=s.coordinateSystem.getRect(),ar=l.getTicksCoords({tickModel:u,clamp:!0});if(ar.length){var en=d.length,tn=inner$f(t).splitAreaColors,on=createHashMap(),fn=0;if(tn)for(var dn=0;dn<ar.length;dn++){var Cn=tn.get(ar[dn].tickValue);if(Cn!=null){fn=(Cn+(en-1)*dn)%en;break}}var Rn=l.toGlobalCoord(ar[0].coord),ax=c.getAreaStyle();d=isArray$1(d)?d:[d];for(var dn=1;dn<ar.length;dn++){var ox=l.toGlobalCoord(ar[dn].coord),sx=void 0,lx=void 0,cx=void 0,fx=void 0;l.isHorizontal()?(sx=Rn,lx=Ct.y,cx=ox-sx,fx=Ct.height,Rn=sx+cx):(sx=Ct.x,lx=Rn,cx=Ct.width,fx=ox-lx,Rn=lx+fx);var gx=ar[dn-1].tickValue;gx!=null&&on.set(gx,fn),n.add(new Rect$2({anid:gx!=null?"area_"+gx:null,shape:{x:sx,y:lx,width:cx,height:fx},style:defaults({fill:d[fn]},ax),autoBatch:!0,silent:!0})),fn=(fn+1)%en}inner$f(t).splitAreaColors=on}}}function rectCoordAxisHandleRemove(t){inner$f(t).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="CartesianAxisPointer",a}return n.prototype.render=function(a,s,l,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var d=a.getCoordSysModel(),Ct=layout$2(d,a),ar=new AxisBuilder(a,extend({handleAutoShown:function(tn){for(var on=d.coordinateSystem.getCartesians(),fn=0;fn<on.length;fn++)if(isIntervalOrLogScale(on[fn].getOtherAxis(a.axis).scale))return!0;return!1}},Ct));each$f(axisBuilderAttrs$3,ar.add,ar),this._axisGroup.add(ar.getGroup()),each$f(selfBuilderAttrs$2,function(tn){a.get([tn,"show"])&&axisElementBuilders$2[tn](this,this._axisGroup,a,d)},this);var en=u&&u.type==="changeAxisOrder"&&u.isInitSort;en||groupTransition(c,this._axisGroup,a),t.prototype.render.call(this,a,s,l,u)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n})(AxisView),axisElementBuilders$2={splitLine:function(t,n,a,s){var l=a.axis;if(!l.scale.isBlank()){var u=a.getModel("splitLine"),c=u.getModel("lineStyle"),d=c.get("color"),Ct=u.get("showMinLine")!==!1,ar=u.get("showMaxLine")!==!1;d=isArray$1(d)?d:[d];for(var en=s.coordinateSystem.getRect(),tn=l.isHorizontal(),on=0,fn=l.getTicksCoords({tickModel:u}),dn=[],Cn=[],Rn=c.getLineStyle(),ax=0;ax<fn.length;ax++){var ox=l.toGlobalCoord(fn[ax].coord);if(!(ax===0&&!Ct||ax===fn.length-1&&!ar)){var sx=fn[ax].tickValue;tn?(dn[0]=ox,dn[1]=en.y,Cn[0]=ox,Cn[1]=en.y+en.height):(dn[0]=en.x,dn[1]=ox,Cn[0]=en.x+en.width,Cn[1]=ox);var lx=on++%d.length,cx=new Line$1({anid:sx!=null?"line_"+sx:null,autoBatch:!0,shape:{x1:dn[0],y1:dn[1],x2:Cn[0],y2:Cn[1]},style:defaults({stroke:d[lx]},Rn),silent:!0});subPixelOptimizeLine(cx.shape,Rn.lineWidth),n.add(cx)}}}},minorSplitLine:function(t,n,a,s){var l=a.axis,u=a.getModel("minorSplitLine"),c=u.getModel("lineStyle"),d=s.coordinateSystem.getRect(),Ct=l.isHorizontal(),ar=l.getMinorTicksCoords();if(ar.length)for(var en=[],tn=[],on=c.getLineStyle(),fn=0;fn<ar.length;fn++)for(var dn=0;dn<ar[fn].length;dn++){var Cn=l.toGlobalCoord(ar[fn][dn].coord);Ct?(en[0]=Cn,en[1]=d.y,tn[0]=Cn,tn[1]=d.y+d.height):(en[0]=d.x,en[1]=Cn,tn[0]=d.x+d.width,tn[1]=Cn);var Rn=new Line$1({anid:"minor_line_"+ar[fn][dn].tickValue,autoBatch:!0,shape:{x1:en[0],y1:en[1],x2:tn[0],y2:tn[1]},style:on,silent:!0});subPixelOptimizeLine(Rn.shape,on.lineWidth),n.add(Rn)}},splitArea:function(t,n,a,s){rectCoordAxisBuildSplitArea(t,n,a,s)}},CartesianXAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="xAxis",n})(CartesianAxisView),CartesianYAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=CartesianXAxisView.type,a}return n.type="yAxis",n})(CartesianAxisView),GridView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="grid",a}return n.prototype.render=function(a,s){this.group.removeAll(),a.get("show")&&this.group.add(new Rect$2({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n})(ComponentView),extraOption={offset:0};function install$N(t){t.registerComponentView(GridView),t.registerComponentModel(GridModel),t.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(t,"x",CartesianAxisModel,extraOption),axisModelCreator(t,"y",CartesianAxisModel,extraOption),t.registerComponentView(CartesianXAxisView),t.registerComponentView(CartesianYAxisView),t.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$M(t){use(install$N),t.registerSeriesModel(ScatterSeriesModel),t.registerChartView(ScatterView),t.registerLayout(pointsLayout("scatter"))}function radarLayout(t){t.eachSeriesByType("radar",function(n){var a=n.getData(),s=[],l=n.coordinateSystem;if(l){var u=l.getIndicatorAxes();each$f(u,function(c,d){a.each(a.mapDimension(u[d].dim),function(Ct,ar){s[ar]=s[ar]||[];var en=l.dataToPoint(Ct,d);s[ar][d]=isValidPoint(en)?en:getValueMissingPoint(l)})}),a.each(function(c){var d=find(s[c],function(Ct){return isValidPoint(Ct)})||getValueMissingPoint(l);s[c].push(d.slice()),a.setItemLayout(c,s[c])})}})}function isValidPoint(t){return!isNaN(t[0])&&!isNaN(t[1])}function getValueMissingPoint(t){return[t.cx,t.cy]}function radarBackwardCompat(t){var n=t.polar;if(n){isArray$1(n)||(n=[n]);var a=[];each$f(n,function(s,l){s.indicator?(s.type&&!s.shape&&(s.shape=s.type),t.radar=t.radar||[],isArray$1(t.radar)||(t.radar=[t.radar]),t.radar.push(s)):a.push(s)}),t.polar=a}each$f(t.series,function(s){s&&s.type==="radar"&&s.polarIndex&&(s.radarIndex=s.polarIndex)})}var RadarView$1=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.coordinateSystem,c=this.group,d=a.getData(),Ct=this._data;function ar(on,fn){var dn=on.getItemVisual(fn,"symbol")||"circle";if(dn!=="none"){var Cn=normalizeSymbolSize(on.getItemVisual(fn,"symbolSize")),Rn=createSymbol$1(dn,-1,-1,2,2),ax=on.getItemVisual(fn,"symbolRotate")||0;return Rn.attr({style:{strokeNoScale:!0},z2:100,scaleX:Cn[0]/2,scaleY:Cn[1]/2,rotation:ax*Math.PI/180||0}),Rn}}function en(on,fn,dn,Cn,Rn,ax){dn.removeAll();for(var ox=0;ox<fn.length-1;ox++){var sx=ar(Cn,Rn);sx&&(sx.__dimIdx=ox,on[ox]?(sx.setPosition(on[ox]),graphic$1[ax?"initProps":"updateProps"](sx,{x:fn[ox][0],y:fn[ox][1]},a,Rn)):sx.setPosition(fn[ox]),dn.add(sx))}}function tn(on){return map$1(on,function(fn){return[u.cx,u.cy]})}d.diff(Ct).add(function(on){var fn=d.getItemLayout(on);if(fn){var dn=new Polygon,Cn=new Polyline$1,Rn={shape:{points:fn}};dn.shape.points=tn(fn),Cn.shape.points=tn(fn),initProps(dn,Rn,a,on),initProps(Cn,Rn,a,on);var ax=new Group$3,ox=new Group$3;ax.add(Cn),ax.add(dn),ax.add(ox),en(Cn.shape.points,fn,ox,d,on,!0),d.setItemGraphicEl(on,ax)}}).update(function(on,fn){var dn=Ct.getItemGraphicEl(fn),Cn=dn.childAt(0),Rn=dn.childAt(1),ax=dn.childAt(2),ox={shape:{points:d.getItemLayout(on)}};ox.shape.points&&(en(Cn.shape.points,ox.shape.points,ax,d,on,!1),saveOldStyle(Rn),saveOldStyle(Cn),updateProps$1(Cn,ox,a),updateProps$1(Rn,ox,a),d.setItemGraphicEl(on,dn))}).remove(function(on){c.remove(Ct.getItemGraphicEl(on))}).execute(),d.eachItemGraphicEl(function(on,fn){var dn=d.getItemModel(fn),Cn=on.childAt(0),Rn=on.childAt(1),ax=on.childAt(2),ox=d.getItemVisual(fn,"style"),sx=ox.fill;c.add(on),Cn.useStyle(defaults(dn.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:sx})),setStatesStylesFromModel(Cn,dn,"lineStyle"),setStatesStylesFromModel(Rn,dn,"areaStyle");var lx=dn.getModel("areaStyle"),cx=lx.isEmpty()&&lx.parentModel.isEmpty();Rn.ignore=cx,each$f(["emphasis","select","blur"],function(mx){var px=dn.getModel([mx,"areaStyle"]),hx=px.isEmpty()&&px.parentModel.isEmpty();Rn.ensureState(mx).ignore=hx&&cx}),Rn.useStyle(defaults(lx.getAreaStyle(),{fill:sx,opacity:.7,decal:ox.decal}));var fx=dn.getModel("emphasis"),gx=fx.getModel("itemStyle").getItemStyle();ax.eachChild(function(mx){if(mx instanceof ZRImage){var px=mx.style;mx.useStyle(extend({image:px.image,x:px.x,y:px.y,width:px.width,height:px.height},ox))}else mx.useStyle(ox),mx.setColor(sx),mx.style.strokeNoScale=!0;var hx=mx.ensureState("emphasis");hx.style=clone$4(gx);var vx=d.getStore().get(d.getDimensionIndex(mx.__dimIdx),fn);(vx==null||isNaN(vx))&&(vx=""),setLabelStyle(mx,getLabelStatesModels(dn),{labelFetcher:d.hostModel,labelDataIndex:fn,labelDimIndex:mx.__dimIdx,defaultText:vx,inheritColor:sx,defaultOpacity:ox.opacity})}),toggleHoverEmphasis(on,fx.get("focus"),fx.get("blurScope"),fx.get("disabled"))}),this._data=d},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n})(ChartView),RadarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.coordinateSystem,d=c.getIndicatorAxes(),Ct=this.getData().getName(a),ar=Ct===""?this.name:Ct,en=retrieveVisualColorForTooltipMarker(this,a);return createTooltipMarkup("section",{header:ar,sortBlocks:!0,blocks:map$1(d,function(tn){var on=u.get(u.mapDimension(tn.dim),a);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:en,name:tn.name,value:on,sortParam:on})})})},n.prototype.getTooltipPosition=function(a){if(a!=null){for(var s=this.getData(),l=this.coordinateSystem,u=s.getValues(map$1(l.dimensions,function(ar){return s.mapDimension(ar)}),a),c=0,d=u.length;c<d;c++)if(!isNaN(u[c])){var Ct=l.getIndicatorAxes();return l.coordToPoint(Ct[c].dataToCoord(u[c]),c)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n})(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(t,n){return defaults({show:n},t)}var RadarModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),s=this.get("splitNumber"),l=this.get("scale"),u=this.get("axisLine"),c=this.get("axisTick"),d=this.get("axisLabel"),Ct=this.get("axisName"),ar=this.get(["axisName","show"]),en=this.get(["axisName","formatter"]),tn=this.get("axisNameGap"),on=this.get("triggerEvent"),fn=map$1(this.get("indicator")||[],function(dn){dn.max!=null&&dn.max>0&&!dn.min?dn.min=0:dn.min!=null&&dn.min<0&&!dn.max&&(dn.max=0);var Cn=Ct;dn.color!=null&&(Cn=defaults({color:dn.color},Ct));var Rn=merge(clone$4(dn),{boundaryGap:a,splitNumber:s,scale:l,axisLine:u,axisTick:c,axisLabel:d,name:dn.text,showName:ar,nameLocation:"end",nameGap:tn,nameTextStyle:Cn,triggerEvent:on},!1);if(isString$1(en)){var ax=Rn.name;Rn.name=en.replace("{value}",ax??"")}else isFunction$1(en)&&(Rn.name=en(Rn.name,Rn));var ox=new Model(Rn,null,this.ecModel);return mixin(ox,AxisModelCommonMixin.prototype),ox.mainType="radar",ox.componentIndex=this.componentIndex,ox},this);this._indicatorModels=fn},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n})(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group;u.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},n.prototype._buildAxes=function(a){var s=a.coordinateSystem,l=s.getIndicatorAxes(),u=map$1(l,function(c){var d=c.model.get("showName")?c.name:"",Ct=new AxisBuilder(c.model,{axisName:d,position:[s.cx,s.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return Ct});each$f(u,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(a){var s=a.coordinateSystem,l=s.getIndicatorAxes();if(!l.length)return;var u=a.get("shape"),c=a.getModel("splitLine"),d=a.getModel("splitArea"),Ct=c.getModel("lineStyle"),ar=d.getModel("areaStyle"),en=c.get("show"),tn=d.get("show"),on=Ct.get("color"),fn=ar.get("color"),dn=isArray$1(on)?on:[on],Cn=isArray$1(fn)?fn:[fn],Rn=[],ax=[];function ox(Ex,bx,Ax){var Mx=Ax%bx.length;return Ex[Mx]=Ex[Mx]||[],Mx}if(u==="circle")for(var sx=l[0].getTicksCoords(),lx=s.cx,cx=s.cy,fx=0;fx<sx.length;fx++){if(en){var gx=ox(Rn,dn,fx);Rn[gx].push(new Circle({shape:{cx:lx,cy:cx,r:sx[fx].coord}}))}if(tn&&fx<sx.length-1){var gx=ox(ax,Cn,fx);ax[gx].push(new Ring({shape:{cx:lx,cy:cx,r0:sx[fx].coord,r:sx[fx+1].coord}}))}}else for(var mx,px=map$1(l,function(Ex,bx){var Ax=Ex.getTicksCoords();return mx=mx==null?Ax.length-1:Math.min(Ax.length-1,mx),map$1(Ax,function(Mx){return s.coordToPoint(Mx.coord,bx)})}),hx=[],fx=0;fx<=mx;fx++){for(var vx=[],yx=0;yx<l.length;yx++)vx.push(px[yx][fx]);if(vx[0]&&vx.push(vx[0].slice()),en){var gx=ox(Rn,dn,fx);Rn[gx].push(new Polyline$1({shape:{points:vx}}))}if(tn&&hx){var gx=ox(ax,Cn,fx-1);ax[gx].push(new Polygon({shape:{points:vx.concat(hx)}}))}hx=vx.slice().reverse()}var Sx=Ct.getLineStyle(),_x=ar.getAreaStyle();each$f(ax,function(Ex,bx){this.group.add(mergePath(Ex,{style:defaults({stroke:"none",fill:Cn[bx%Cn.length]},_x),silent:!0}))},this),each$f(Rn,function(Ex,bx){this.group.add(mergePath(Ex,{style:defaults({fill:"none",stroke:dn[bx%dn.length]},Sx),silent:!0}))},this)},n.type="radar",n})(ComponentView),IndicatorAxis=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a,s,l)||this;return u.type="value",u.angle=0,u.name="",u}return n})(Axis),Radar=(function(){function t(n,a,s){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(l,u){var c="indicator_"+u,d=new IndicatorAxis(c,new IntervalScale);return d.name=l.get("name"),d.model=l,l.axis=d,this.dimensions.push(c),d},this),this.resize(n,s)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(n,a){var s=this._indicatorAxes[a];return this.coordToPoint(s.dataToCoord(n),a)},t.prototype.coordToPoint=function(n,a){var s=this._indicatorAxes[a],l=s.angle,u=this.cx+n*Math.cos(l),c=this.cy-n*Math.sin(l);return[u,c]},t.prototype.pointToData=function(n){var a=n[0]-this.cx,s=n[1]-this.cy,l=Math.sqrt(a*a+s*s);a/=l,s/=l;for(var u=Math.atan2(-s,a),c=1/0,d,Ct=-1,ar=0;ar<this._indicatorAxes.length;ar++){var en=this._indicatorAxes[ar],tn=Math.abs(u-en.angle);tn<c&&(d=en,Ct=ar,c=tn)}return[Ct,+(d&&d.coordToData(l))]},t.prototype.resize=function(n,a){var s=n.get("center"),l=a.getWidth(),u=a.getHeight(),c=Math.min(l,u)/2;this.cx=parsePercent(s[0],l),this.cy=parsePercent(s[1],u),this.startAngle=n.get("startAngle")*Math.PI/180;var d=n.get("radius");(isString$1(d)||isNumber(d))&&(d=[0,d]),this.r0=parsePercent(d[0],c),this.r=parsePercent(d[1],c),each$f(this._indicatorAxes,function(Ct,ar){Ct.setExtent(this.r0,this.r);var en=this.startAngle+ar*Math.PI*2/this._indicatorAxes.length;en=Math.atan2(Math.sin(en),Math.cos(en)),Ct.angle=en},this)},t.prototype.update=function(n,a){var s=this._indicatorAxes,l=this._model;each$f(s,function(d){d.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(d,Ct){if(!(d.get("coordinateSystem")!=="radar"||n.getComponent("radar",d.get("radarIndex"))!==l)){var ar=d.getData();each$f(s,function(en){en.scale.unionExtentFromData(ar,ar.mapDimension(en.dim))})}},this);var u=l.get("splitNumber"),c=new IntervalScale;c.setExtent(0,u),c.setInterval(1),each$f(s,function(d,Ct){alignScaleTicks(d.scale,d.model,c)})},t.prototype.convertToPixel=function(n,a,s){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(n,a,s){return console.warn("Not implemented."),null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.create=function(n,a){var s=[];return n.eachComponent("radar",function(l){var u=new t(l,n,a);s.push(u),l.coordinateSystem=u}),n.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=s[l.get("radarIndex")||0])}),s},t.dimensions=[],t})();function install$L(t){t.registerCoordinateSystem("radar",Radar),t.registerComponentModel(RadarModel),t.registerComponentView(RadarView),t.registerVisual({seriesType:"radar",reset:function(n){var a=n.getData();a.each(function(s){a.setItemVisual(s,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function install$K(t){use(install$L),t.registerChartView(RadarView$1),t.registerSeriesModel(RadarSeriesModel),t.registerLayout(radarLayout),t.registerProcessor(dataFilter$1("radar")),t.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(t,n,a){var s=getStore(t);s[n]=a}function release(t,n,a){var s=getStore(t),l=s[n];l===a&&(s[n]=null)}function isTaken(t,n){return!!getStore(t)[n]}function getStore(t){return t[ATTR]||(t[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;s._zr=a;var l=bind$1(s._mousedownHandler,s),u=bind$1(s._mousemoveHandler,s),c=bind$1(s._mouseupHandler,s),d=bind$1(s._mousewheelHandler,s),Ct=bind$1(s._pinchHandler,s);return s.enable=function(ar,en){this.disable(),this._opt=defaults(clone$4(en)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),ar==null&&(ar=!0),(ar===!0||ar==="move"||ar==="pan")&&(a.on("mousedown",l),a.on("mousemove",u),a.on("mouseup",c)),(ar===!0||ar==="scale"||ar==="zoom")&&(a.on("mousewheel",d),a.on("pinch",Ct))},s.disable=function(){a.off("mousedown",l),a.off("mousemove",u),a.off("mouseup",c),a.off("mousewheel",d),a.off("pinch",Ct)},s}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(a){this.pointerChecker=a},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(a){if(!isMiddleOrRightButtonOnMouseUpDown(a)){for(var s=a.target;s;){if(s.draggable)return;s=s.__hostTarget||s.parent}var l=a.offsetX,u=a.offsetY;this.pointerChecker&&this.pointerChecker(a,l,u)&&(this._x=l,this._y=u,this._dragging=!0)}},n.prototype._mousemoveHandler=function(a){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",a,this._opt)||a.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var s=a.offsetX,l=a.offsetY,u=this._x,c=this._y,d=s-u,Ct=l-c;this._x=s,this._y=l,this._opt.preventDefaultMouseMove&&stop(a.event),trigger$1(this,"pan","moveOnMouseMove",a,{dx:d,dy:Ct,oldX:u,oldY:c,newX:s,newY:l,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(a){isMiddleOrRightButtonOnMouseUpDown(a)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(a){var s=isAvailableBehavior("zoomOnMouseWheel",a,this._opt),l=isAvailableBehavior("moveOnMouseWheel",a,this._opt),u=a.wheelDelta,c=Math.abs(u),d=a.offsetX,Ct=a.offsetY;if(!(u===0||!s&&!l)){if(s){var ar=c>3?1.4:c>1?1.2:1.1,en=u>0?ar:1/ar;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",a,{scale:en,originX:d,originY:Ct,isAvailableBehavior:null})}if(l){var tn=Math.abs(u),on=(u>0?1:-1)*(tn>3?.4:tn>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:on,originX:d,originY:Ct,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(a){if(!isTaken(this._zr,"globalPan")){var s=a.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,a,{scale:s,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},n})(Eventful);function checkPointerAndTrigger(t,n,a,s,l){t.pointerChecker&&t.pointerChecker(s,l.originX,l.originY)&&(stop(s.event),trigger$1(t,n,a,s,l))}function trigger$1(t,n,a,s,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,a,s),t.trigger(n,l)}function isAvailableBehavior(t,n,a){var s=a[t];return!t||s&&(!isString$1(s)||n.event[s+"Key"])}function updateViewOnPan(t,n,a){var s=t.target;s.x+=n,s.y+=a,s.dirty()}function updateViewOnZoom(t,n,a,s){var l=t.target,u=t.zoomLimit,c=t.zoom=t.zoom||1;if(c*=n,u){var d=u.min||0,Ct=u.max||1/0;c=Math.max(Math.min(Ct,c),d)}var ar=c/t.zoom;t.zoom=c,l.x-=(a-l.x)*(ar-1),l.y-=(s-l.y)*(ar-1),l.scaleX*=ar,l.scaleY*=ar,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(t,n,a){var s=n.getComponentByElement(t.topTarget),l=s&&s.coordinateSystem;return s&&s!==a&&!IRRELEVANT_EXCLUDES.hasOwnProperty(s.mainType)&&l&&l.model!==a}function parseXML(t){if(isString$1(t)){var n=new DOMParser;t=n.parseFromString(t,"text/xml")}var a=t;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=(function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(n,a){a=a||{};var s=parseXML(n);this._defsUsePending=[];var l=new Group$3;this._root=l;var u=[],c=s.getAttribute("viewBox")||"",d=parseFloat(s.getAttribute("width")||a.width),Ct=parseFloat(s.getAttribute("height")||a.height);isNaN(d)&&(d=null),isNaN(Ct)&&(Ct=null),parseAttributes(s,l,null,!0,!1);for(var ar=s.firstChild;ar;)this._parseNode(ar,l,u,null,!1,!1),ar=ar.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var en,tn;if(c){var on=splitNumberSequence(c);on.length>=4&&(en={x:parseFloat(on[0]||0),y:parseFloat(on[1]||0),width:parseFloat(on[2]),height:parseFloat(on[3])})}if(en&&d!=null&&Ct!=null&&(tn=makeViewBoxTransform(en,{x:0,y:0,width:d,height:Ct}),!a.ignoreViewBox)){var fn=l;l=new Group$3,l.add(fn),fn.scaleX=fn.scaleY=tn.scale,fn.x=tn.x,fn.y=tn.y}return!a.ignoreRootClip&&d!=null&&Ct!=null&&l.setClipPath(new Rect$2({shape:{x:0,y:0,width:d,height:Ct}})),{root:l,width:d,height:Ct,viewBoxRect:en,viewBoxTransform:tn,named:u}},t.prototype._parseNode=function(n,a,s,l,u,c){var d=n.nodeName.toLowerCase(),Ct,ar=l;if(d==="defs"&&(u=!0),d==="text"&&(c=!0),d==="defs"||d==="switch")Ct=a;else{if(!u){var en=nodeParsers[d];if(en&&hasOwn(nodeParsers,d)){Ct=en.call(this,n,a);var tn=n.getAttribute("name");if(tn){var on={name:tn,namedFrom:null,svgNodeTagLower:d,el:Ct};s.push(on),d==="g"&&(ar=on)}else l&&s.push({name:l.name,namedFrom:l,svgNodeTagLower:d,el:Ct});a.add(Ct)}}var fn=paintServerParsers[d];if(fn&&hasOwn(paintServerParsers,d)){var dn=fn.call(this,n),Cn=n.getAttribute("id");Cn&&(this._defs[Cn]=dn)}}if(Ct&&Ct.isGroup)for(var Rn=n.firstChild;Rn;)Rn.nodeType===1?this._parseNode(Rn,Ct,s,ar,u,c):Rn.nodeType===3&&c&&this._parseText(Rn,Ct),Rn=Rn.nextSibling},t.prototype._parseText=function(n,a){var s=new TSpan({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),applyTextAlignment(s,a);var l=s.style,u=l.fontSize;u&&u<9&&(l.fontSize=9,s.scaleX*=u/9,s.scaleY*=u/9);var c=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=c;var d=s.getBoundingRect();return this._textX+=d.width,a.add(s),s},t.internalField=(function(){nodeParsers={g:function(n,a){var s=new Group$3;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s},rect:function(n,a){var s=new Rect$2;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),s.silent=!0,s},circle:function(n,a){var s=new Circle;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),s.silent=!0,s},line:function(n,a){var s=new Line$1;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),s.silent=!0,s},ellipse:function(n,a){var s=new Ellipse;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),s.silent=!0,s},polygon:function(n,a){var s=n.getAttribute("points"),l;s&&(l=parsePoints(s));var u=new Polygon({shape:{points:l||[]},silent:!0});return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},polyline:function(n,a){var s=n.getAttribute("points"),l;s&&(l=parsePoints(s));var u=new Polyline$1({shape:{points:l||[]},silent:!0});return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},image:function(n,a){var s=new ZRImage;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),s.silent=!0,s},text:function(n,a){var s=n.getAttribute("x")||"0",l=n.getAttribute("y")||"0",u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0";this._textX=parseFloat(s)+parseFloat(u),this._textY=parseFloat(l)+parseFloat(c);var d=new Group$3;return inheritStyle(a,d),parseAttributes(n,d,this._defsUsePending,!1,!0),d},tspan:function(n,a){var s=n.getAttribute("x"),l=n.getAttribute("y");s!=null&&(this._textX=parseFloat(s)),l!=null&&(this._textY=parseFloat(l));var u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0",d=new Group$3;return inheritStyle(a,d),parseAttributes(n,d,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),d},path:function(n,a){var s=n.getAttribute("d")||"",l=createFromString(s);return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.silent=!0,l}}})(),t})(),paintServerParsers={lineargradient:function(t){var n=parseInt(t.getAttribute("x1")||"0",10),a=parseInt(t.getAttribute("y1")||"0",10),s=parseInt(t.getAttribute("x2")||"10",10),l=parseInt(t.getAttribute("y2")||"0",10),u=new LinearGradient(n,a,s,l);return parsePaintServerUnit(t,u),parseGradientColorStops(t,u),u},radialgradient:function(t){var n=parseInt(t.getAttribute("cx")||"0",10),a=parseInt(t.getAttribute("cy")||"0",10),s=parseInt(t.getAttribute("r")||"0",10),l=new RadialGradient(n,a,s);return parsePaintServerUnit(t,l),parseGradientColorStops(t,l),l}};function parsePaintServerUnit(t,n){var a=t.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(t,n){for(var a=t.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var s=a.getAttribute("offset"),l=void 0;s&&s.indexOf("%")>0?l=parseInt(s,10)/100:s?l=parseFloat(s):l=0;var u={};parseInlineStyle(a,u,u);var c=u.stopColor||a.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:l,color:c})}a=a.nextSibling}}function inheritStyle(t,n){t&&t.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,t.__inheritedStyle))}function parsePoints(t){for(var n=splitNumberSequence(t),a=[],s=0;s<n.length;s+=2){var l=parseFloat(n[s]),u=parseFloat(n[s+1]);a.push([l,u])}return a}function parseAttributes(t,n,a,s,l){var u=n,c=u.__inheritedStyle=u.__inheritedStyle||{},d={};t.nodeType===1&&(parseTransformAttribute(t,n),parseInlineStyle(t,c,d),s||parseAttributeStyle(t,c,d)),u.style=u.style||{},c.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",c.fill,a)),c.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",c.stroke,a)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(Ct){c[Ct]!=null&&(u.style[Ct]=parseFloat(c[Ct]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(Ct){c[Ct]!=null&&(u.style[Ct]=c[Ct])}),l&&(u.__selfStyle=d),c.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(Ct){return parseFloat(Ct)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(u.invisible=!0),c.display==="none"&&(u.ignore=!0)}function applyTextAlignment(t,n){var a=n.__selfStyle;if(a){var s=a.textBaseline,l=s;!s||s==="auto"||s==="baseline"?l="alphabetic":s==="before-edge"||s==="text-before-edge"?l="top":s==="after-edge"||s==="text-after-edge"?l="bottom":(s==="central"||s==="mathematical")&&(l="middle"),t.style.textBaseline=l}var u=n.__inheritedStyle;if(u){var c=u.textAlign,d=c;c&&(c==="middle"&&(d="center"),t.style.textAlign=d)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(t,n,a,s){var l=a&&a.match(urlRegex);if(l){var u=trim$1(l[1]);s.push([t,n,u]);return}return a==="none"&&(a=null),a}function applyDefs(t,n){for(var a=0;a<n.length;a++){var s=n[a];s[0].style[s[1]]=t[s[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(t){return t.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(t,n){var a=t.getAttribute("transform");if(a){a=a.replace(/,/g," ");var s=[],l=null;a.replace(transformRegex,function(tn,on,fn){return s.push(on,fn),""});for(var u=s.length-1;u>0;u-=2){var c=s[u],d=s[u-1],Ct=splitNumberSequence(c);switch(l=l||create$1(),d){case"translate":translate(l,l,[parseFloat(Ct[0]),parseFloat(Ct[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(Ct[0]),parseFloat(Ct[1]||Ct[0])]);break;case"rotate":rotate(l,l,-parseFloat(Ct[0])*DEGREE_TO_ANGLE,[parseFloat(Ct[1]||"0"),parseFloat(Ct[2]||"0")]);break;case"skewX":var ar=Math.tan(parseFloat(Ct[0])*DEGREE_TO_ANGLE);mul(l,[1,0,ar,1,0,0],l);break;case"skewY":var en=Math.tan(parseFloat(Ct[0])*DEGREE_TO_ANGLE);mul(l,[1,en,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(Ct[0]),l[1]=parseFloat(Ct[1]),l[2]=parseFloat(Ct[2]),l[3]=parseFloat(Ct[3]),l[4]=parseFloat(Ct[4]),l[5]=parseFloat(Ct[5]);break}}n.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(t,n,a){var s=t.getAttribute("style");if(s){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(s))!=null;){var u=l[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;c&&(n[c]=l[2]);var d=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;d&&(a[d]=l[2])}}}function parseAttributeStyle(t,n,a){for(var s=0;s<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[s],u=t.getAttribute(l);u!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=u)}for(var s=0;s<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[s],u=t.getAttribute(l);u!=null&&(a[SELF_STYLE_ATTRIBUTES_MAP[l]]=u)}}function makeViewBoxTransform(t,n){var a=n.width/t.width,s=n.height/t.height,l=Math.min(a,s);return{scale:l,x:-(t.x+t.width/2)*l+(n.x+n.width/2),y:-(t.y+t.height/2)*l+(n.y+n.height/2)}}function parseSVG(t,n){var a=new SVGParser;return a.parse(t,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=(function(){function t(n,a){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(a)}return t.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=createRegions(n.named),s=a.regions,l=a.regionsMap;this._regions=s,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(n){var a,s;try{a=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},s=a.root,assert(s!=null)}catch(Rn){throw new Error(`Invalid svg format
`+Rn.message)}var l=new Group$3;l.add(s),l.isGeoSVGGraphicRoot=!0;var u=a.width,c=a.height,d=a.viewBoxRect,Ct=this._boundingRect;if(!Ct){var ar=void 0,en=void 0,tn=void 0,on=void 0;if(u!=null?(ar=0,tn=u):d&&(ar=d.x,tn=d.width),c!=null?(en=0,on=c):d&&(en=d.y,on=d.height),ar==null||en==null){var fn=s.getBoundingRect();ar==null&&(ar=fn.x,tn=fn.width),en==null&&(en=fn.y,on=fn.height)}Ct=this._boundingRect=new BoundingRect(ar,en,tn,on)}if(d){var dn=makeViewBoxTransform(d,Ct);s.scaleX=s.scaleY=dn.scale,s.x=dn.x,s.y=dn.y}l.setClipPath(new Rect$2({shape:Ct.plain()}));var Cn=[];return each$f(a.named,function(Rn){REGION_AVAILABLE_SVG_TAG_MAP.get(Rn.svgNodeTagLower)!=null&&(Cn.push(Rn),setSilent(Rn.el))}),{root:l,boundingRect:Ct,named:Cn}},t.prototype.useGraphic=function(n){var a=this._usedGraphicMap,s=a.get(n);return s||(s=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(n,s),s)},t.prototype.freeGraphic=function(n){var a=this._usedGraphicMap,s=a.get(n);s&&(a.removeKey(n),this._freedGraphics.push(s))},t})();function setSilent(t){t.silent=!1,t.isGroup&&t.traverse(function(n){n.silent=!1})}function createRegions(t){var n=[],a=createHashMap();return each$f(t,function(s){if(s.namedFrom==null){var l=new GeoSVGRegion(s.name,s.el);n.push(l),a.set(s.name,l)}}),{regions:n,regionsMap:a}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(t,n){if(t==="china"){for(var a=0;a<n.length;a++)if(n[a].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(s){return{type:"polygon",exterior:s}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(t,n){if(t==="china"){var a=coordsOffsetMap[n.name];if(a){var s=n.getCenter();s[0]+=a[0]/10.5,s[1]+=-a[1]/(10.5/.75),n.setCenter(s)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(t,n){t==="china"&&n.name===""&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=(function(){function t(n,a,s){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=s,this._geoJSON=parseInput(a)}return t.prototype.load=function(n,a){a=a||DEFAULT_NAME_PROPERTY;var s=this._parsedMap.get(a);if(!s){var l=this._parseToRegions(a);s=this._parsedMap.set(a,{regions:l,boundingRect:calculateBoundingRect(l)})}var u=createHashMap(),c=[];return each$f(s.regions,function(d){var Ct=d.name;n&&hasOwn(n,Ct)&&(d=d.cloneShallow(Ct=n[Ct])),c.push(d),u.set(Ct,d)}),{regions:c,boundingRect:s.boundingRect||new BoundingRect(0,0,0,0),regionsMap:u}},t.prototype._parseToRegions=function(n){var a=this._mapName,s=this._geoJSON,l;try{l=s?parseGeoJSON(s,n):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(a,l),each$f(l,function(u){var c=u.name;fixTextCoords(a,u),fixDiaoyuIsland(a,u);var d=this._specialAreas&&this._specialAreas[c];d&&u.transformTo(d.left,d.top,d.width,d.height)},this),l},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t})();function calculateBoundingRect(t){for(var n,a=0;a<t.length;a++){var s=t[a].getBoundingRect();n=n||s.clone(),n.union(s)}return n}function parseInput(t){return isString$1(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var storage=createHashMap();const geoSourceManager={registerMap:function(t,n,a){if(n.svg){var s=new GeoSVGResource(t,n.svg);storage.set(t,s)}else{var l=n.geoJson||n.geoJSON;l&&!n.features?a=n.specialAreas:l=n;var s=new GeoJSONResource(t,l,a);storage.set(t,s)}},getGeoResource:function(t){return storage.get(t)},getMapForUser:function(t){var n=storage.get(t);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(t,n,a){var s=storage.get(t);if(s)return s.load(n,a)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(t){var n=t.getItemStyle(),a=t.get("areaColor");return a!=null&&(n.fill=a),n}function fixLineStyle(t){var n=t.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=(function(){function t(n){var a=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(n.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Group$3),a.add(this._svgGroup=new Group$3)}return t.prototype.draw=function(n,a,s,l,u){var c=n.mainType==="geo",d=n.getData&&n.getData();c&&a.eachComponent({mainType:"series",subType:"map"},function(ax){!d&&ax.getHostGeoModel()===n&&(d=ax.getData())});var Ct=n.coordinateSystem,ar=this._regionsGroup,en=this.group,tn=Ct.getTransformInfo(),on=tn.raw,fn=tn.roam,dn=!ar.childAt(0)||u;dn?(en.x=fn.x,en.y=fn.y,en.scaleX=fn.scaleX,en.scaleY=fn.scaleY,en.dirty()):updateProps$1(en,fn,n);var Cn=d&&d.getVisual("visualMeta")&&d.getVisual("visualMeta").length>0,Rn={api:s,geo:Ct,mapOrGeoModel:n,data:d,isVisualEncodedByVisualMap:Cn,isGeo:c,transformInfoRaw:on};Ct.resourceType==="geoJSON"?this._buildGeoJSON(Rn):Ct.resourceType==="geoSVG"&&this._buildSVG(Rn),this._updateController(n,a,s),this._updateMapSelectHandler(n,ar,s,l)},t.prototype._buildGeoJSON=function(n){var a=this._regionsGroupByName=createHashMap(),s=createHashMap(),l=this._regionsGroup,u=n.transformInfoRaw,c=n.mapOrGeoModel,d=n.data,Ct=n.geo.projection,ar=Ct&&Ct.stream;function en(fn,dn){return dn&&(fn=dn(fn)),fn&&[fn[0]*u.scaleX+u.x,fn[1]*u.scaleY+u.y]}function tn(fn){for(var dn=[],Cn=!ar&&Ct&&Ct.project,Rn=0;Rn<fn.length;++Rn){var ax=en(fn[Rn],Cn);ax&&dn.push(ax)}return dn}function on(fn){return{shape:{points:tn(fn)}}}l.removeAll(),each$f(n.geo.regions,function(fn){var dn=fn.name,Cn=a.get(dn),Rn=s.get(dn)||{},ax=Rn.dataIdx,ox=Rn.regionModel;if(!Cn){Cn=a.set(dn,new Group$3),l.add(Cn),ax=d?d.indexOfName(dn):null,ox=n.isGeo?c.getRegionModel(dn):d?d.getItemModel(ax):null;var sx=ox.get("silent",!0);sx!=null&&(Cn.silent=sx),s.set(dn,{dataIdx:ax,regionModel:ox})}var lx=[],cx=[];each$f(fn.geometries,function(mx){if(mx.type==="polygon"){var px=[mx.exterior].concat(mx.interiors||[]);ar&&(px=projectPolys(px,ar)),each$f(px,function(vx){lx.push(new Polygon(on(vx)))})}else{var hx=mx.points;ar&&(hx=projectPolys(hx,ar,!0)),each$f(hx,function(vx){cx.push(new Polyline$1(on(vx)))})}});var fx=en(fn.getCenter(),Ct&&Ct.project);function gx(mx,px){if(mx.length){var hx=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:mx}});Cn.add(hx),applyOptionStyleForRegion(n,hx,ax,ox),resetLabelForRegion(n,hx,dn,ox,c,ax,fx),px&&(fixLineStyle(hx),each$f(hx.states,fixLineStyle))}}gx(lx),gx(cx,!0)}),a.each(function(fn,dn){var Cn=s.get(dn),Rn=Cn.dataIdx,ax=Cn.regionModel;resetEventTriggerForRegion(n,fn,dn,ax,c,Rn),resetTooltipForRegion(n,fn,dn,ax,c),resetStateTriggerForRegion(n,fn,dn,ax,c)},this)},t.prototype._buildSVG=function(n){var a=n.geo.map,s=n.transformInfoRaw;this._svgGroup.x=s.x,this._svgGroup.y=s.y,this._svgGroup.scaleX=s.scaleX,this._svgGroup.scaleY=s.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var l=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(c){var d=c.name,Ct=n.mapOrGeoModel,ar=n.data,en=c.svgNodeTagLower,tn=c.el,on=ar?ar.indexOfName(d):null,fn=Ct.getRegionModel(d);OPTION_STYLE_ENABLED_TAG_MAP.get(en)!=null&&tn instanceof Displayable&&applyOptionStyleForRegion(n,tn,on,fn),tn instanceof Displayable&&(tn.culling=!0);var dn=fn.get("silent",!0);if(dn!=null&&(tn.silent=dn),tn.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(en)!=null&&resetLabelForRegion(n,tn,d,fn,Ct,on,null),resetEventTriggerForRegion(n,tn,d,fn,Ct,on),resetTooltipForRegion(n,tn,d,fn,Ct),STATE_TRIGGER_TAG_MAP.get(en)!=null)){var Cn=resetStateTriggerForRegion(n,tn,d,fn,Ct);Cn==="self"&&(u=!0);var Rn=l.get(d)||l.set(d,[]);Rn.push(tn)}},this),this._enableBlurEntireSVG(u,n)},t.prototype._enableBlurEntireSVG=function(n,a){if(n&&a.isGeo){var s=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=s.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var c=u.ensureState("blur").style||{};c.opacity==null&&l!=null&&(c.opacity=l),u.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(n,a){if(n==null)return[];var s=a.coordinateSystem;if(s.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var u=l.get(n);return u?[u]:[]}}else if(s.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},t.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},t.prototype._useSVG=function(n){var a=geoSourceManager.getGeoResource(n);if(a&&a.type==="geoSVG"){var s=a.useGraphic(this.uid);this._svgGroup.add(s.root),this._svgGraphicRecord=s,this._svgMapName=n}},t.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var a=geoSourceManager.getGeoResource(n);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(n,a,s){var l=n.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=n.get("scaleLimit"),c.zoom=l.getZoom(),u.enable(n.get("roam")||!1);var d=n.mainType;function Ct(){var ar={type:"geoRoam",componentType:d};return ar[d+"Id"]=n.id,ar}u.off("pan").on("pan",function(ar){this._mouseDownFlag=!1,updateViewOnPan(c,ar.dx,ar.dy),s.dispatchAction(extend(Ct(),{dx:ar.dx,dy:ar.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(ar){this._mouseDownFlag=!1,updateViewOnZoom(c,ar.scale,ar.originX,ar.originY),s.dispatchAction(extend(Ct(),{totalZoom:c.zoom,zoom:ar.scale,originX:ar.originX,originY:ar.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(ar,en,tn){return l.containPoint([en,tn])&&!onIrrelevantElement(ar,s,n)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var a=n.getTextContent();a&&(a.ignore=mapLabelRaw(a).ignore)})},t.prototype._updateMapSelectHandler=function(n,a,s,l){var u=this;a.off("mousedown"),a.off("click"),n.get("selectedMode")&&(a.on("mousedown",function(){u._mouseDownFlag=!0}),a.on("click",function(c){u._mouseDownFlag&&(u._mouseDownFlag=!1)}))},t})();function applyOptionStyleForRegion(t,n,a,s){var l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["blur","itemStyle"]),d=s.getModel(["select","itemStyle"]),Ct=getFixedItemStyle(l),ar=getFixedItemStyle(u),en=getFixedItemStyle(d),tn=getFixedItemStyle(c),on=t.data;if(on){var fn=on.getItemVisual(a,"style"),dn=on.getItemVisual(a,"decal");t.isVisualEncodedByVisualMap&&fn.fill&&(Ct.fill=fn.fill),dn&&(Ct.decal=createOrUpdatePatternFromDecal(dn,t.api))}n.setStyle(Ct),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=ar,n.ensureState("select").style=en,n.ensureState("blur").style=tn,setDefaultStateProxy(n)}function resetLabelForRegion(t,n,a,s,l,u,c){var d=t.data,Ct=t.isGeo,ar=d&&isNaN(d.get(d.mapDimension("value"),u)),en=d&&d.getItemLayout(u);if(Ct||ar||en&&en.showLabel){var tn=Ct?a:u,on=void 0;(!d||u>=0)&&(on=l);var fn=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(s),{labelFetcher:on,labelDataIndex:tn,defaultText:a},fn);var dn=n.getTextContent();if(dn&&(mapLabelRaw(dn).ignore=dn.ignore,n.textConfig&&c)){var Cn=n.getBoundingRect().clone();n.textConfig.layoutRect=Cn,n.textConfig.position=[(c[0]-Cn.x)/Cn.width*100+"%",(c[1]-Cn.y)/Cn.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(t,n,a,s,l,u){t.data?t.data.setItemGraphicEl(u,n):getECData(n).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:a,region:s&&s.option||{}}}function resetTooltipForRegion(t,n,a,s,l){t.data||setTooltipConfig({el:n,componentModel:l,itemName:a,itemTooltipOption:s.get("tooltip")})}function resetStateTriggerForRegion(t,n,a,s,l){n.highDownSilentOnTouch=!!l.get("selectedMode");var u=s.getModel("emphasis"),c=u.get("focus");return toggleHoverEmphasis(n,c,u.get("blurScope"),u.get("disabled")),t.isGeo&&enableComponentHighDownFeatures(n,l,a),c}function projectPolys(t,n,a){var s=[],l;function u(){l=[]}function c(){l.length&&(s.push(l),l=[])}var d=n({polygonStart:u,polygonEnd:c,lineStart:u,lineEnd:c,point:function(Ct,ar){isFinite(Ct)&&isFinite(ar)&&l.push([Ct,ar])},sphere:function(){}});return!a&&d.polygonStart(),each$f(t,function(Ct){d.lineStart();for(var ar=0;ar<Ct.length;ar++)d.point(Ct[ar][0],Ct[ar][1]);d.lineEnd()}),!a&&d.polygonEnd(),s}var MapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var c=this.group;if(c.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===a.id){var d=this._mapDraw;d&&c.add(d.group)}else if(a.needsDrawMap){var d=this._mapDraw||new MapDraw(l);c.add(d.group),d.draw(a,s,l,this,u),this._mapDraw=d}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&s.getComponent("legend")&&this._renderSymbols(a,s,l)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(a,s,l){var u=a.originalData,c=this.group;u.each(u.mapDimension("value"),function(d,Ct){if(!isNaN(d)){var ar=u.getItemLayout(Ct);if(!(!ar||!ar.point)){var en=ar.point,tn=ar.offset,on=new Circle({style:{fill:a.getData().getVisual("style").fill},shape:{cx:en[0]+tn*9,cy:en[1],r:3},silent:!0,z2:8+(tn?0:Z2_EMPHASIS_LIFT+1)});if(!tn){var fn=a.mainSeries.getData(),dn=u.getName(Ct),Cn=fn.indexOfName(dn),Rn=u.getItemModel(Ct),ax=Rn.getModel("label"),ox=fn.getItemGraphicEl(Cn);setLabelStyle(on,getLabelStatesModels(Rn),{labelFetcher:{getFormattedLabel:function(sx,lx){return a.getFormattedLabel(Cn,lx)}},defaultText:dn}),on.disableLabelAnimation=!0,ax.get("position")||on.setTextConfig({position:"bottom"}),ox.onHoverStateChange=function(sx){setStatesFlag(on,sx)}}c.add(on)}}})},n.type="map",n})(ChartView),MapSeries=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(s){if(s!=null){var l=this.getData().getName(s),u=this.coordinateSystem,c=u.getRegion(l);return c&&u.dataToPoint(c.getCenter())}},a}return n.prototype.getInitialData=function(a){for(var s=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),u=[],c=0,d=s.count();c<d;c++){var Ct=s.getName(c);l.set(Ct,c)}var ar=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(ar.regions,function(en){var tn=en.name,on=l.get(tn),fn=en.properties&&en.properties.echartsStyle,dn;on==null?(dn={name:tn},u.push(dn)):dn=s.getRawDataItem(on),fn&&merge(dn,fn)}),s.appendData(u),s},n.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return a!=null?this.ecModel.getComponent("geo",a):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(a){var s=this.getData();return s.get(s.mapDimension("value"),a)},n.prototype.getRegionModel=function(a){var s=this.getData();return s.getItemModel(s.indexOfName(a))},n.prototype.formatTooltip=function(a,s,l){for(var u=this.getData(),c=this.getRawValue(a),d=u.getName(a),Ct=this.seriesGroup,ar=[],en=0;en<Ct.length;en++){var tn=Ct[en].originalData.indexOfName(d),on=u.mapDimension("value");isNaN(Ct[en].originalData.get(on,tn))||ar.push(Ct[en].name)}return createTooltipMarkup("section",{header:ar.join(", "),noHeader:!ar.length,blocks:[createTooltipMarkup("nameValue",{name:d,value:c})]})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.getLegendIcon=function(a){var s=a.icon||"roundRect",l=createSymbol$1(s,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return l.setStyle(a.itemStyle),l.style.stroke="none",s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n})(SeriesModel);function dataStatistics(t,n){var a={};return each$f(t,function(s){s.each(s.mapDimension("value"),function(l,u){var c="ec-"+s.getName(u);a[c]=a[c]||[],isNaN(l)||a[c].push(l)})}),t[0].map(t[0].mapDimension("value"),function(s,l){for(var u="ec-"+t[0].getName(l),c=0,d=1/0,Ct=-1/0,ar=a[u].length,en=0;en<ar;en++)d=Math.min(d,a[u][en]),Ct=Math.max(Ct,a[u][en]),c+=a[u][en];var tn;return n==="min"?tn=d:n==="max"?tn=Ct:n==="average"?tn=c/ar:tn=c,ar===0?NaN:tn})}function mapDataStatistic(t){var n={};t.eachSeriesByType("map",function(a){var s=a.getHostGeoModel(),l=s?"o"+s.id:"i"+a.getMapType();(n[l]=n[l]||[]).push(a)}),each$f(n,function(a,s){for(var l=dataStatistics(map$1(a,function(c){return c.getData()}),a[0].get("mapValueCalculation")),u=0;u<a.length;u++)a[u].originalData=a[u].getData();for(var u=0;u<a.length;u++)a[u].seriesGroup=a,a[u].needsDrawMap=u===0&&!a[u].getHostGeoModel(),a[u].setData(l.cloneShallow()),a[u].mainSeries=a[0]})}function mapSymbolLayout(t){var n={};t.eachSeriesByType("map",function(a){var s=a.getMapType();if(!(a.getHostGeoModel()||n[s])){var l={};each$f(a.seriesGroup,function(c){var d=c.coordinateSystem,Ct=c.originalData;c.get("showLegendSymbol")&&t.getComponent("legend")&&Ct.each(Ct.mapDimension("value"),function(ar,en){var tn=Ct.getName(en),on=d.getRegion(tn);if(!(!on||isNaN(ar))){var fn=l[tn]||0,dn=d.dataToPoint(on.getCenter());l[tn]=fn+1,Ct.setItemLayout(en,{point:dn,offset:fn})}})});var u=a.getData();u.each(function(c){var d=u.getName(c),Ct=u.getItemLayout(c)||{};Ct.showLabel=!l[d],u.setItemLayout(c,Ct)}),n[s]=!0}})}var v2ApplyTransform=applyTransform$1,View=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.type="view",s.dimensions=["x","y"],s._roamTransformable=new Transformable,s._rawTransformable=new Transformable,s.name=a,s}return n.prototype.setBoundingRect=function(a,s,l,u){return this._rect=new BoundingRect(a,s,l,u),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(a,s,l,u){this._transformTo(a,s,l,u),this._viewRect=new BoundingRect(a,s,l,u)},n.prototype._transformTo=function(a,s,l,u){var c=this.getBoundingRect(),d=this._rawTransformable;d.transform=c.calculateTransform(new BoundingRect(a,s,l,u));var Ct=d.parent;d.parent=null,d.decomposeTransform(),d.parent=Ct,this._updateTransform()},n.prototype.setCenter=function(a,s){a&&(this._center=[parsePercent(a[0],s.getWidth()),parsePercent(a[1],s.getHeight())],this._updateCenterAndZoom())},n.prototype.setZoom=function(a){a=a||1;var s=this.zoomLimit;s&&(s.max!=null&&(a=Math.min(s.max,a)),s.min!=null&&(a=Math.max(s.min,a))),this._zoom=a,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),s=a.x+a.width/2,l=a.y+a.height/2;return[s,l]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,a),l=applyTransform$1([],l,a),s.originX=u[0],s.originY=u[1],s.x=l[0]-u[0],s.y=l[1]-u[1],s.scaleX=s.scaleY=c,this._updateTransform()},n.prototype._updateTransform=function(){var a=this._roamTransformable,s=this._rawTransformable;s.parent=a,a.updateTransform(),s.updateTransform(),copy(this.transform||(this.transform=[]),s.transform||create$1()),this._rawTransform=s.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var a=this._rawTransformable,s=this._roamTransformable,l=new Transformable;return l.transform=s.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},n.prototype.dataToPoint=function(a,s,l){var u=s?this._rawTransform:this.transform;return l=l||[],u?v2ApplyTransform(l,a,u):copy$1(l,a)},n.prototype.pointToData=function(a){var s=this.invTransform;return s?v2ApplyTransform([],a,s):[a[0],a[1]]},n.prototype.convertToPixel=function(a,s,l){var u=getCoordSys$4(s);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(a,s,l){var u=getCoordSys$4(s);return u===this?u.pointToData(l):null},n.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},n.dimensions=["x","y"],n})(Transformable);function getCoordSys$4(t){var n=t.seriesModel;return n?n.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=s;var c=l.projection,d=geoSourceManager.load(s,l.nameMap,l.nameProperty),Ct=geoSourceManager.getGeoResource(s);u.resourceType=Ct?Ct.type:null;var ar=u.regions=d.regions,en=GEO_DEFAULT_PARAMS[Ct.type];u._regionsMap=d.regionsMap,u.regions=d.regions,u.projection=c;var tn;if(c)for(var on=0;on<ar.length;on++){var fn=ar[on].getBoundingRect(c);tn=tn||fn.clone(),tn.union(fn)}else tn=d.boundingRect;return u.setBoundingRect(tn.x,tn.y,tn.width,tn.height),u.aspectScale=c?1:retrieve2(l.aspectScale,en.aspectScale),u._invertLongitute=c?!1:en.invertLongitute,u}return n.prototype._transformTo=function(a,s,l,u){var c=this.getBoundingRect(),d=this._invertLongitute;c=c.clone(),d&&(c.y=-c.y-c.height);var Ct=this._rawTransformable;Ct.transform=c.calculateTransform(new BoundingRect(a,s,l,u));var ar=Ct.parent;Ct.parent=null,Ct.decomposeTransform(),Ct.parent=ar,d&&(Ct.scaleY=-Ct.scaleY),this._updateTransform()},n.prototype.getRegion=function(a){return this._regionsMap.get(a)},n.prototype.getRegionByCoord=function(a){for(var s=this.regions,l=0;l<s.length;l++){var u=s[l];if(u.type==="geoJSON"&&u.contain(a))return s[l]}},n.prototype.addGeoCoord=function(a,s){this._nameCoordMap.set(a,s)},n.prototype.getGeoCoord=function(a){var s=this._regionsMap.get(a);return this._nameCoordMap.get(a)||s&&s.getCenter()},n.prototype.dataToPoint=function(a,s,l){if(isString$1(a)&&(a=this.getGeoCoord(a)),a){var u=this.projection;return u&&(a=u.project(a)),a&&this.projectedToPoint(a,s,l)}},n.prototype.pointToData=function(a){var s=this.projection;return s&&(a=s.unproject(a)),a&&this.pointToProjected(a)},n.prototype.pointToProjected=function(a){return t.prototype.pointToData.call(this,a)},n.prototype.projectedToPoint=function(a,s,l){return t.prototype.dataToPoint.call(this,a,s,l)},n.prototype.convertToPixel=function(a,s,l){var u=getCoordSys$3(s);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(a,s,l){var u=getCoordSys$3(s);return u===this?u.pointToData(l):null},n})(View);mixin(Geo,View);function getCoordSys$3(t){var n=t.geoModel,a=t.seriesModel;return n?n.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(t,n){var a=t.get("boundingCoords");if(a!=null){var s=a[0],l=a[1];if(isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])){var u=this.projection;if(u){var c=s[0],d=s[1],Ct=l[0],ar=l[1];s=[1/0,1/0],l=[-1/0,-1/0];var en=function(fx,gx,mx,px){for(var hx=mx-fx,vx=px-gx,yx=0;yx<=100;yx++){var Sx=yx/100,_x=u.project([fx+hx*Sx,gx+vx*Sx]);min$1(s,s,_x),max$1(l,l,_x)}};en(c,d,Ct,d),en(Ct,d,Ct,ar),en(Ct,ar,c,ar),en(c,ar,Ct,d)}this.setBoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1])}}var tn=this.getBoundingRect(),on=t.get("layoutCenter"),fn=t.get("layoutSize"),dn=n.getWidth(),Cn=n.getHeight(),Rn=tn.width/tn.height*this.aspectScale,ax=!1,ox,sx;on&&fn&&(ox=[parsePercent(on[0],dn),parsePercent(on[1],Cn)],sx=parsePercent(fn,Math.min(dn,Cn)),!isNaN(ox[0])&&!isNaN(ox[1])&&!isNaN(sx)&&(ax=!0));var lx;if(ax)lx={},Rn>1?(lx.width=sx,lx.height=sx/Rn):(lx.height=sx,lx.width=sx*Rn),lx.y=ox[1]-lx.height/2,lx.x=ox[0]-lx.width/2;else{var cx=t.getBoxLayoutParams();cx.aspect=Rn,lx=getLayoutRect(cx,{width:dn,height:Cn})}this.setViewRect(lx.x,lx.y,lx.width,lx.height),this.setCenter(t.get("center"),n),this.setZoom(t.get("zoom"))}function setGeoCoords(t,n){each$f(n.get("geoCoord"),function(a,s){t.addGeoCoord(s,a)})}var GeoCreator=(function(){function t(){this.dimensions=geo2DDimensions}return t.prototype.create=function(n,a){var s=[];function l(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}n.eachComponent("geo",function(c,d){var Ct=c.get("map"),ar=new Geo(Ct+d,Ct,extend({nameMap:c.get("nameMap")},l(c)));ar.zoomLimit=c.get("scaleLimit"),s.push(ar),c.coordinateSystem=ar,ar.model=c,ar.resize=resizeGeo,ar.resize(c,a)}),n.eachSeries(function(c){var d=c.get("coordinateSystem");if(d==="geo"){var Ct=c.get("geoIndex")||0;c.coordinateSystem=s[Ct]}});var u={};return n.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var d=c.getMapType();u[d]=u[d]||[],u[d].push(c)}}),each$f(u,function(c,d){var Ct=map$1(c,function(en){return en.get("nameMap")}),ar=new Geo(d,d,extend({nameMap:mergeAll(Ct)},l(c[0])));ar.zoomLimit=retrieve.apply(null,map$1(c,function(en){return en.get("scaleLimit")})),s.push(ar),ar.resize=resizeGeo,ar.resize(c[0],a),each$f(c,function(en){en.coordinateSystem=ar,setGeoCoords(ar,en)})}),s},t.prototype.getFilledRegions=function(n,a,s,l){for(var u=(n||[]).slice(),c=createHashMap(),d=0;d<u.length;d++)c.set(u[d].name,u[d]);var Ct=geoSourceManager.load(a,s,l);return each$f(Ct.regions,function(ar){var en=ar.name,tn=c.get(en),on=ar.properties&&ar.properties.echartsStyle;tn||(tn={name:en},u.push(tn)),on&&merge(tn,on)}),u},t})(),geoCreator=new GeoCreator,GeoModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s,l){var u=geoSourceManager.getGeoResource(a.map);if(u&&u.type==="geoJSON"){var c=a.itemStyle=a.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(a,l),defaultEmphasis(a,"label",["show"])},n.prototype.optionUpdated=function(){var a=this,s=this.option;s.regions=geoCreator.getFilledRegions(s.regions,s.map,s.nameMap,s.nameProperty);var l={};this._optionModelMap=reduce(s.regions||[],function(u,c){var d=c.name;return d&&(u.set(d,new Model(c,a,a.ecModel)),c.selected&&(l[d]=!0)),u},createHashMap()),s.selectedMap||(s.selectedMap=l)},n.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(a,s){var l=this.getRegionModel(a),u=s==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),c={name:a};if(isFunction$1(u))return c.status=s,u(c);if(isString$1(u))return u.replace("{a}",a??"")},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.select=function(a){var s=this.option,l=s.selectedMode;if(l){l!=="multiple"&&(s.selectedMap=null);var u=s.selectedMap||(s.selectedMap={});u[a]=!0}},n.prototype.unSelect=function(a){var s=this.option.selectedMap;s&&(s[a]=!1)},n.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},n.prototype.isSelected=function(a){var s=this.option.selectedMap;return!!(s&&s[a])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n})(ComponentModel);function getCenterCoord(t,n){return t.pointToProjected?t.pointToProjected(n):t.pointToData(n)}function updateCenterAndZoom(t,n,a,s){var l=t.getZoom(),u=t.getCenter(),c=n.zoom,d=t.projectedToPoint?t.projectedToPoint(u):t.dataToPoint(u);if(n.dx!=null&&n.dy!=null&&(d[0]-=n.dx,d[1]-=n.dy,t.setCenter(getCenterCoord(t,d),s)),c!=null){if(a){var Ct=a.min||0,ar=a.max||1/0;c=Math.max(Math.min(l*c,ar),Ct)/l}t.scaleX*=c,t.scaleY*=c;var en=(n.originX-t.x)*(c-1),tn=(n.originY-t.y)*(c-1);t.x-=en,t.y-=tn,t.updateTransform(),t.setCenter(getCenterCoord(t,d),s),t.setZoom(c*l)}return{center:t.getCenter(),zoom:t.getZoom()}}var GeoView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.focusBlurEnabled=!0,a}return n.prototype.init=function(a,s){this._api=s},n.prototype.render=function(a,s,l,u){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(l));var c=this._mapDraw;c.draw(a,s,l,this,u),c.group.on("click",this._handleRegionClick,this),c.group.silent=a.get("silent"),this.group.add(c.group),this.updateSelectStatus(a,s,l)},n.prototype._handleRegionClick=function(a){var s;findEventDispatcher(a.target,function(l){return(s=getECData(l).eventData)!=null},!0),s&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:s.name})},n.prototype.updateSelectStatus=function(a,s,l){var u=this;this._mapDraw.group.traverse(function(c){var d=getECData(c).eventData;if(d)return u._model.isSelected(d.name)?l.enterSelect(c):l.leaveSelect(c),!0})},n.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n})(ComponentView);function registerMap(t,n,a){geoSourceManager.registerMap(t,n,a)}function install$J(t){t.registerCoordinateSystem("geo",geoCreator),t.registerComponentModel(GeoModel),t.registerComponentView(GeoView),t.registerImpl("registerMap",registerMap),t.registerImpl("getMap",function(a){return geoSourceManager.getMapForUser(a)});function n(a,s){s.update="geo:updateSelectStatus",t.registerAction(s,function(l,u){var c={},d=[];return u.eachComponent({mainType:"geo",query:l},function(Ct){Ct[a](l.name);var ar=Ct.coordinateSystem;each$f(ar.regions,function(tn){c[tn.name]=Ct.isSelected(tn.name)||!1});var en=[];each$f(c,function(tn,on){c[on]&&en.push(on)}),d.push({geoIndex:Ct.componentIndex,name:en})}),{selected:c,allSelected:d,name:l.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,s,l){var u=a.componentType||"series";s.eachComponent({mainType:u,query:a},function(c){var d=c.coordinateSystem;if(d.type==="geo"){var Ct=updateCenterAndZoom(d,a,c.get("scaleLimit"),l);c.setCenter&&c.setCenter(Ct.center),c.setZoom&&c.setZoom(Ct.zoom),u==="series"&&each$f(c.seriesGroup,function(ar){ar.setCenter(Ct.center),ar.setZoom(Ct.zoom)})}})})}function install$I(t){use(install$J),t.registerChartView(MapView),t.registerSeriesModel(MapSeries),t.registerLayout(mapSymbolLayout),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",t.registerAction)}function init(t){var n=t;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a=[n],s,l;s=a.pop();)if(l=s.children,s.isExpand&&l.length)for(var u=l.length,c=u-1;c>=0;c--){var d=l[c];d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},a.push(d)}}function firstWalk(t,n){var a=t.isExpand?t.children:[],s=t.parentNode.children,l=t.hierNode.i?s[t.hierNode.i-1]:null;if(a.length){executeShifts(t);var u=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;l?(t.hierNode.prelim=l.hierNode.prelim+n(t,l),t.hierNode.modifier=t.hierNode.prelim-u):t.hierNode.prelim=u}else l&&(t.hierNode.prelim=l.hierNode.prelim+n(t,l));t.parentNode.hierNode.defaultAncestor=apportion(t,l,t.parentNode.hierNode.defaultAncestor||s[0],n)}function secondWalk(t){var n=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:n},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function separation(t){return arguments.length?t:defaultSeparation}function radialCoordinate(t,n){return t-=Math.PI/2,{x:n*Math.cos(t),y:n*Math.sin(t)}}function getViewRect$4(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function executeShifts(t){for(var n=t.children,a=n.length,s=0,l=0;--a>=0;){var u=n[a];u.hierNode.prelim+=s,u.hierNode.modifier+=s,l+=u.hierNode.change,s+=u.hierNode.shift+l}}function apportion(t,n,a,s){if(n){for(var l=t,u=t,c=u.parentNode.children[0],d=n,Ct=l.hierNode.modifier,ar=u.hierNode.modifier,en=c.hierNode.modifier,tn=d.hierNode.modifier;d=nextRight(d),u=nextLeft(u),d&&u;){l=nextRight(l),c=nextLeft(c),l.hierNode.ancestor=t;var on=d.hierNode.prelim+tn-u.hierNode.prelim-ar+s(d,u);on>0&&(moveSubtree(nextAncestor(d,t,a),t,on),ar+=on,Ct+=on),tn+=d.hierNode.modifier,ar+=u.hierNode.modifier,Ct+=l.hierNode.modifier,en+=c.hierNode.modifier}d&&!nextRight(l)&&(l.hierNode.thread=d,l.hierNode.modifier+=tn-Ct),u&&!nextLeft(c)&&(c.hierNode.thread=u,c.hierNode.modifier+=ar-en,a=t)}return a}function nextRight(t){var n=t.children;return n.length&&t.isExpand?n[n.length-1]:t.hierNode.thread}function nextLeft(t){var n=t.children;return n.length&&t.isExpand?n[0]:t.hierNode.thread}function nextAncestor(t,n,a){return t.hierNode.ancestor.parentNode===n.parentNode?t.hierNode.ancestor:a}function moveSubtree(t,n,a){var s=a/(n.hierNode.i-t.hierNode.i);n.hierNode.change-=s,n.hierNode.shift+=a,n.hierNode.modifier+=a,n.hierNode.prelim+=a,t.hierNode.change+=s}function defaultSeparation(t,n){return t.parentNode===n.parentNode?1:2}var TreeEdgeShape=(function(){function t(){this.parentPoint=[],this.childPoints=[]}return t})(),TreePath=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TreeEdgeShape},n.prototype.buildPath=function(a,s){var l=s.childPoints,u=l.length,c=s.parentPoint,d=l[0],Ct=l[u-1];if(u===1){a.moveTo(c[0],c[1]),a.lineTo(d[0],d[1]);return}var ar=s.orient,en=ar==="TB"||ar==="BT"?0:1,tn=1-en,on=parsePercent(s.forkPosition,1),fn=[];fn[en]=c[en],fn[tn]=c[tn]+(Ct[tn]-c[tn])*on,a.moveTo(c[0],c[1]),a.lineTo(fn[0],fn[1]),a.moveTo(d[0],d[1]),fn[en]=d[en],a.lineTo(fn[0],fn[1]),fn[en]=Ct[en],a.lineTo(fn[0],fn[1]),a.lineTo(Ct[0],Ct[1]);for(var dn=1;dn<u-1;dn++){var Cn=l[dn];a.moveTo(Cn[0],Cn[1]),fn[en]=Cn[en],a.lineTo(fn[0],fn[1])}},n})(Path),TreeView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._mainGroup=new Group$3,a}return n.prototype.init=function(a,s){this._controller=new RoamController(s.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(a,s,l){var u=a.getData(),c=a.layoutInfo,d=this._mainGroup,Ct=a.get("layout");Ct==="radial"?(d.x=c.x+c.width/2,d.y=c.y+c.height/2):(d.x=c.x,d.y=c.y),this._updateViewCoordSys(a,l),this._updateController(a,s,l);var ar=this._data;u.diff(ar).add(function(en){symbolNeedsDraw(u,en)&&updateNode(u,en,null,d,a)}).update(function(en,tn){var on=ar.getItemGraphicEl(tn);if(!symbolNeedsDraw(u,en)){on&&removeNode(ar,tn,on,d,a);return}updateNode(u,en,on,d,a)}).remove(function(en){var tn=ar.getItemGraphicEl(en);tn&&removeNode(ar,en,tn,d,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),a.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function(en,tn){en.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:tn})})}),this._data=u},n.prototype._updateViewCoordSys=function(a,s){var l=a.getData(),u=[];l.each(function(tn){var on=l.getItemLayout(tn);on&&!isNaN(on.x)&&!isNaN(on.y)&&u.push([+on.x,+on.y])});var c=[],d=[];fromPoints(u,c,d);var Ct=this._min,ar=this._max;d[0]-c[0]===0&&(c[0]=Ct?Ct[0]:c[0]-1,d[0]=ar?ar[0]:d[0]+1),d[1]-c[1]===0&&(c[1]=Ct?Ct[1]:c[1]-1,d[1]=ar?ar[1]:d[1]+1);var en=a.coordinateSystem=new View;en.zoomLimit=a.get("scaleLimit"),en.setBoundingRect(c[0],c[1],d[0]-c[0],d[1]-c[1]),en.setCenter(a.get("center"),s),en.setZoom(a.get("zoom")),this.group.attr({x:en.x,y:en.y,scaleX:en.scaleX,scaleY:en.scaleY}),this._min=c,this._max=d},n.prototype._updateController=function(a,s,l){var u=this,c=this._controller,d=this._controllerHost,Ct=this.group;c.setPointerChecker(function(ar,en,tn){var on=Ct.getBoundingRect();return on.applyTransform(Ct.transform),on.contain(en,tn)&&!onIrrelevantElement(ar,l,a)}),c.enable(a.get("roam")),d.zoomLimit=a.get("scaleLimit"),d.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(ar){updateViewOnPan(d,ar.dx,ar.dy),l.dispatchAction({seriesId:a.id,type:"treeRoam",dx:ar.dx,dy:ar.dy})}).on("zoom",function(ar){updateViewOnZoom(d,ar.scale,ar.originX,ar.originY),l.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:ar.scale,originX:ar.originX,originY:ar.originY}),u._updateNodeAndLinkScale(a),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(a){var s=a.getData(),l=this._getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u.setSymbolScale(l)})},n.prototype._getNodeGlobalScale=function(a){var s=a.coordinateSystem;if(s.type!=="view")return 1;var l=this._nodeScaleRatio,u=s.scaleX||1,c=s.getZoom(),d=(c-1)*l+1;return d/u},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n})(ChartView);function symbolNeedsDraw(t,n){var a=t.getItemLayout(n);return a&&!isNaN(a.x)&&!isNaN(a.y)}function updateNode(t,n,a,s,l){var u=!a,c=t.tree.getNodeByDataIndex(n),d=c.getModel(),Ct=c.getVisual("style").fill,ar=c.isExpand===!1&&c.children.length!==0?Ct:"#fff",en=t.tree.root,tn=c.parentNode===en?c:c.parentNode||c,on=t.getItemGraphicEl(tn.dataIndex),fn=tn.getLayout(),dn=on?{x:on.__oldX,y:on.__oldY,rawX:on.__radialOldRawX,rawY:on.__radialOldRawY}:fn,Cn=c.getLayout();u?(a=new Symbol$1(t,n,null,{symbolInnerColor:ar,useNameLabel:!0}),a.x=dn.x,a.y=dn.y):a.updateData(t,n,null,{symbolInnerColor:ar,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=Cn.rawX,a.__radialRawY=Cn.rawY,s.add(a),t.setItemGraphicEl(n,a),a.__oldX=a.x,a.__oldY=a.y,updateProps$1(a,{x:Cn.x,y:Cn.y},l);var Rn=a.getSymbolPath();if(l.get("layout")==="radial"){var ax=en.children[0],ox=ax.getLayout(),sx=ax.children.length,lx=void 0,cx=void 0;if(Cn.x===ox.x&&c.isExpand===!0&&ax.children.length){var fx={x:(ax.children[0].getLayout().x+ax.children[sx-1].getLayout().x)/2,y:(ax.children[0].getLayout().y+ax.children[sx-1].getLayout().y)/2};lx=Math.atan2(fx.y-ox.y,fx.x-ox.x),lx<0&&(lx=Math.PI*2+lx),cx=fx.x<ox.x,cx&&(lx=lx-Math.PI)}else lx=Math.atan2(Cn.y-ox.y,Cn.x-ox.x),lx<0&&(lx=Math.PI*2+lx),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(cx=Cn.x<ox.x,cx&&(lx=lx-Math.PI)):(cx=Cn.x>ox.x,cx||(lx=lx-Math.PI));var gx=cx?"left":"right",mx=d.getModel("label"),px=mx.get("rotate"),hx=px*(Math.PI/180),vx=Rn.getTextContent();vx&&(Rn.setTextConfig({position:mx.get("position")||gx,rotation:px==null?-lx:hx,origin:"center"}),vx.setStyle("verticalAlign","middle"))}var yx=d.get(["emphasis","focus"]),Sx=yx==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):yx==="ancestor"?c.getAncestorsIndices():yx==="descendant"?c.getDescendantIndices():null;Sx&&(getECData(a).focus=Sx),drawEdge(l,c,en,a,dn,fn,Cn,s),a.__edge&&(a.onHoverStateChange=function(_x){if(_x!=="blur"){var Ex=c.parentNode&&t.getItemGraphicEl(c.parentNode.dataIndex);Ex&&Ex.hoverState===HOVER_STATE_BLUR||setStatesFlag(a.__edge,_x)}})}function drawEdge(t,n,a,s,l,u,c,d){var Ct=n.getModel(),ar=t.get("edgeShape"),en=t.get("layout"),tn=t.getOrient(),on=t.get(["lineStyle","curveness"]),fn=t.get("edgeForkPosition"),dn=Ct.getModel("lineStyle").getLineStyle(),Cn=s.__edge;if(ar==="curve")n.parentNode&&n.parentNode!==a&&(Cn||(Cn=s.__edge=new BezierCurve({shape:getEdgeShape(en,tn,on,l,l)})),updateProps$1(Cn,{shape:getEdgeShape(en,tn,on,u,c)},t));else if(ar==="polyline"&&en==="orthogonal"&&n!==a&&n.children&&n.children.length!==0&&n.isExpand===!0){for(var Rn=n.children,ax=[],ox=0;ox<Rn.length;ox++){var sx=Rn[ox].getLayout();ax.push([sx.x,sx.y])}Cn||(Cn=s.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:tn,forkPosition:fn}})),updateProps$1(Cn,{shape:{parentPoint:[c.x,c.y],childPoints:ax}},t)}Cn&&!(ar==="polyline"&&!n.isExpand)&&(Cn.useStyle(defaults({strokeNoScale:!0,fill:null},dn)),setStatesStylesFromModel(Cn,Ct,"lineStyle"),setDefaultStateProxy(Cn),d.add(Cn))}function removeNodeEdge(t,n,a,s,l){var u=n.tree.root,c=getSourceNode(u,t),d=c.source,Ct=c.sourceLayout,ar=n.getItemGraphicEl(t.dataIndex);if(ar){var en=n.getItemGraphicEl(d.dataIndex),tn=en.__edge,on=ar.__edge||(d.isExpand===!1||d.children.length===1?tn:void 0),fn=s.get("edgeShape"),dn=s.get("layout"),Cn=s.get("orient"),Rn=s.get(["lineStyle","curveness"]);on&&(fn==="curve"?removeElement(on,{shape:getEdgeShape(dn,Cn,Rn,Ct,Ct),style:{opacity:0}},s,{cb:function(){a.remove(on)},removeOpt:l}):fn==="polyline"&&s.get("layout")==="orthogonal"&&removeElement(on,{shape:{parentPoint:[Ct.x,Ct.y],childPoints:[[Ct.x,Ct.y]]},style:{opacity:0}},s,{cb:function(){a.remove(on)},removeOpt:l}))}}function getSourceNode(t,n){for(var a=n.parentNode===t?n:n.parentNode||n,s;s=a.getLayout(),s==null;)a=a.parentNode===t?a:a.parentNode||a;return{source:a,sourceLayout:s}}function removeNode(t,n,a,s,l){var u=t.tree.getNodeByDataIndex(n),c=t.tree.root,d=getSourceNode(c,u).sourceLayout,Ct={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(a,{x:d.x+1,y:d.y+1},l,{cb:function(){s.remove(a),t.setItemGraphicEl(n,null)},removeOpt:Ct}),a.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:Ct}),u.children.forEach(function(ar){removeNodeEdge(ar,t,s,l,Ct)}),removeNodeEdge(u,t,s,l,Ct)}function getEdgeShape(t,n,a,s,l){var u,c,d,Ct,ar,en,tn,on;if(t==="radial"){ar=s.rawX,tn=s.rawY,en=l.rawX,on=l.rawY;var fn=radialCoordinate(ar,tn),dn=radialCoordinate(ar,tn+(on-tn)*a),Cn=radialCoordinate(en,on+(tn-on)*a),Rn=radialCoordinate(en,on);return{x1:fn.x||0,y1:fn.y||0,x2:Rn.x||0,y2:Rn.y||0,cpx1:dn.x||0,cpy1:dn.y||0,cpx2:Cn.x||0,cpy2:Cn.y||0}}else ar=s.x,tn=s.y,en=l.x,on=l.y,(n==="LR"||n==="RL")&&(u=ar+(en-ar)*a,c=tn,d=en+(ar-en)*a,Ct=on),(n==="TB"||n==="BT")&&(u=ar,c=tn+(on-tn)*a,d=en,Ct=on+(tn-on)*a);return{x1:ar,y1:tn,x2:en,y2:on,cpx1:u,cpy1:c,cpx2:d,cpy2:Ct}}var inner$e=makeInner();function linkSeriesData(t){var n=t.mainData,a=t.datas;a||(a={main:n},t.datasAttr={main:"data"}),t.datas=t.mainData=null,linkAll(n,a,t),each$f(a,function(s){each$f(n.TRANSFERABLE_METHODS,function(l){s.wrapMethod(l,curry$1(transferInjection,t))})}),n.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,t)),each$f(n.CHANGABLE_METHODS,function(s){n.wrapMethod(s,curry$1(changeInjection,t))}),assert(a[n.dataType]===n)}function transferInjection(t,n){if(isMainData(this)){var a=extend({},inner$e(this).datas);a[this.dataType]=n,linkAll(n,a,t)}else linkSingle(n,this.dataType,inner$e(this).mainData,t);return n}function changeInjection(t,n){return t.struct&&t.struct.update(),n}function cloneShallowInjection(t,n){return each$f(inner$e(n).datas,function(a,s){a!==n&&linkSingle(a.cloneShallow(),s,n,t)}),n}function getLinkedData(t){var n=inner$e(this).mainData;return t==null||n==null?n:inner$e(n).datas[t]}function getLinkedDataAll(){var t=inner$e(this).mainData;return t==null?[{data:t}]:map$1(keys(inner$e(t).datas),function(n){return{type:n,data:inner$e(t).datas[n]}})}function isMainData(t){return inner$e(t).mainData===t}function linkAll(t,n,a){inner$e(t).datas={},each$f(n,function(s,l){linkSingle(s,l,t,a)})}function linkSingle(t,n,a,s){inner$e(a).datas[n]=t,inner$e(t).mainData=a,t.dataType=n,s.struct&&(t[s.structAttr]=s.struct,s.struct[s.datasAttr[n]]=t),t.getLinkedData=getLinkedData,t.getLinkedDataAll=getLinkedDataAll}var TreeNode=(function(){function t(n,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=a}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=null),n=n||{},isString$1(n)&&(n={order:n});var l=n.order||"preorder",u=this[n.attr||"children"],c;l==="preorder"&&(c=a.call(s,this));for(var d=0;!c&&d<u.length;d++)u[d].eachNode(n,a,s);l==="postorder"&&a.call(s,this)},t.prototype.updateDepthAndHeight=function(n){var a=0;this.depth=n;for(var s=0;s<this.children.length;s++){var l=this.children[s];l.updateDepthAndHeight(n+1),l.height>a&&(a=l.height)}this.height=a+1},t.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var a=0,s=this.children,l=s.length;a<l;a++){var u=s[a].getNodeById(n);if(u)return u}},t.prototype.contains=function(n){if(n===this)return!0;for(var a=0,s=this.children,l=s.length;a<l;a++){var u=s[a].contains(n);if(u)return u}},t.prototype.getAncestors=function(n){for(var a=[],s=n?this:this.parentNode;s;)a.push(s),s=s.parentNode;return a.reverse(),a},t.prototype.getAncestorsIndices=function(){for(var n=[],a=this;a;)n.push(a.dataIndex),a=a.parentNode;return n.reverse(),n},t.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(a){n.push(a.dataIndex)}),n},t.prototype.getValue=function(n){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},t.prototype.setLayout=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,a)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostTree,s=a.data.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,a)},t.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,a=0;a<n.length;++a)if(n[a]===this)return a;return-1}return-1},t.prototype.isAncestorOf=function(n){for(var a=n.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},t.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},t})(),Tree=(function(){function t(n){this.type="tree",this._nodes=[],this.hostModel=n}return t.prototype.eachNode=function(n,a,s){this.root.eachNode(n,a,s)},t.prototype.getNodeByDataIndex=function(n){var a=this.data.getRawIndex(n);return this._nodes[a]},t.prototype.getNodeById=function(n){return this.root.getNodeById(n)},t.prototype.update=function(){for(var n=this.data,a=this._nodes,s=0,l=a.length;s<l;s++)a[s].dataIndex=-1;for(var s=0,l=n.count();s<l;s++)a[n.getRawIndex(s)].dataIndex=s},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(n,a,s){var l=new t(a),u=[],c=1;d(n);function d(en,tn){var on=en.value;c=Math.max(c,isArray$1(on)?on.length:1),u.push(en);var fn=new TreeNode(convertOptionIdName(en.name,""),l);tn?addChild(fn,tn):l.root=fn,l._nodes.push(fn);var dn=en.children;if(dn)for(var Cn=0;Cn<dn.length;Cn++)d(dn[Cn],fn)}l.root.updateDepthAndHeight(0);var Ct=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:c}).dimensions,ar=new SeriesData(Ct,a);return ar.initData(u),s&&s(ar),linkSeriesData({mainData:ar,struct:l,structAttr:"tree"}),l.update(),l},t})();function addChild(t,n){var a=n.children;t.parentNode!==n&&(a.push(t),t.parentNode=n)}function retrieveTargetInfo(t,n,a){if(t&&indexOf(n,t.type)>=0){var s=a.getData().tree.root,l=t.targetNode;if(isString$1(l)&&(l=s.getNodeById(l)),l&&s.contains(l))return{node:l};var u=t.targetNodeId;if(u!=null&&(l=s.getNodeById(u)))return{node:l}}}function getPathToRoot(t){for(var n=[];t;)t=t.parentNode,t&&n.push(t);return n.reverse()}function aboveViewRoot(t,n){var a=getPathToRoot(t);return indexOf(a,n)>=0}function wrapTreePathInfo(t,n){for(var a=[];t;){var s=t.dataIndex;a.push({name:t.name,dataIndex:s,value:n.getRawValue(s)}),t=t.parentNode}return a.reverse(),a}var TreeSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a){var s={name:a.name,children:a.data},l=a.leaves||{},u=new Model(l,this,this.ecModel),c=Tree.createTree(s,this,d);function d(tn){tn.wrapMethod("getItemModel",function(on,fn){var dn=c.getNodeByDataIndex(fn);return dn&&dn.children.length&&dn.isExpand||(on.parentModel=u),on})}var Ct=0;c.eachNode("preorder",function(tn){tn.depth>Ct&&(Ct=tn.depth)});var ar=a.expandAndCollapse,en=ar&&a.initialTreeDepth>=0?a.initialTreeDepth:Ct;return c.root.eachNode("preorder",function(tn){var on=tn.hostTree.data.getRawDataItem(tn.dataIndex);tn.isExpand=on&&on.collapsed!=null?!on.collapsed:tn.depth<=en}),c.data},n.prototype.getOrient=function(){var a=this.get("orient");return a==="horizontal"?a="LR":a==="vertical"&&(a="TB"),a},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.formatTooltip=function(a,s,l){for(var u=this.getData().tree,c=u.root.children[0],d=u.getNodeByDataIndex(a),Ct=d.getValue(),ar=d.name;d&&d!==c;)ar=d.parentNode.name+"."+ar,d=d.parentNode;return createTooltipMarkup("nameValue",{name:ar,value:Ct,noValue:isNaN(Ct)||Ct==null})},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(l,this),s.collapsed=!l.isExpand,s},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n})(SeriesModel);function eachAfter(t,n,a){for(var s=[t],l=[],u;u=s.pop();)if(l.push(u),u.isExpand){var c=u.children;if(c.length)for(var d=0;d<c.length;d++)s.push(c[d])}for(;u=l.pop();)n(u,a)}function eachBefore(t,n){for(var a=[t],s;s=a.pop();)if(n(s),s.isExpand){var l=s.children;if(l.length)for(var u=l.length-1;u>=0;u--)a.push(l[u])}}function treeLayout(t,n){t.eachSeriesByType("tree",function(a){commonLayout(a,n)})}function commonLayout(t,n){var a=getViewRect$4(t,n);t.layoutInfo=a;var s=t.get("layout"),l=0,u=0,c=null;s==="radial"?(l=2*Math.PI,u=Math.min(a.height,a.width)/2,c=separation(function(sx,lx){return(sx.parentNode===lx.parentNode?1:2)/sx.depth})):(l=a.width,u=a.height,c=separation());var d=t.getData().tree.root,Ct=d.children[0];if(Ct){init(d),eachAfter(Ct,firstWalk,c),d.hierNode.modifier=-Ct.hierNode.prelim,eachBefore(Ct,secondWalk);var ar=Ct,en=Ct,tn=Ct;eachBefore(Ct,function(sx){var lx=sx.getLayout().x;lx<ar.getLayout().x&&(ar=sx),lx>en.getLayout().x&&(en=sx),sx.depth>tn.depth&&(tn=sx)});var on=ar===en?1:c(ar,en)/2,fn=on-ar.getLayout().x,dn=0,Cn=0,Rn=0,ax=0;if(s==="radial")dn=l/(en.getLayout().x+on+fn),Cn=u/(tn.depth-1||1),eachBefore(Ct,function(sx){Rn=(sx.getLayout().x+fn)*dn,ax=(sx.depth-1)*Cn;var lx=radialCoordinate(Rn,ax);sx.setLayout({x:lx.x,y:lx.y,rawX:Rn,rawY:ax},!0)});else{var ox=t.getOrient();ox==="RL"||ox==="LR"?(Cn=u/(en.getLayout().x+on+fn),dn=l/(tn.depth-1||1),eachBefore(Ct,function(sx){ax=(sx.getLayout().x+fn)*Cn,Rn=ox==="LR"?(sx.depth-1)*dn:l-(sx.depth-1)*dn,sx.setLayout({x:Rn,y:ax},!0)})):(ox==="TB"||ox==="BT")&&(dn=l/(en.getLayout().x+on+fn),Cn=u/(tn.depth-1||1),eachBefore(Ct,function(sx){Rn=(sx.getLayout().x+fn)*dn,ax=ox==="TB"?(sx.depth-1)*Cn:u-(sx.depth-1)*Cn,sx.setLayout({x:Rn,y:ax},!0)}))}}}function treeVisual(t){t.eachSeriesByType("tree",function(n){var a=n.getData(),s=a.tree;s.eachNode(function(l){var u=l.getModel(),c=u.getModel("itemStyle").getItemStyle(),d=a.ensureUniqueItemVisual(l.dataIndex,"style");extend(d,c)})})}function installTreeAction(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"tree",query:n},function(s){var l=n.dataIndex,u=s.getData().tree,c=u.getNodeByDataIndex(l);c.isExpand=!c.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,a,s){a.eachComponent({mainType:"series",subType:"tree",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,s);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}function install$H(t){t.registerChartView(TreeView),t.registerSeriesModel(TreeSeriesModel),t.registerLayout(treeLayout),t.registerVisual(treeVisual),installTreeAction(t)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(t){for(var n=0;n<actionTypes.length;n++)t.registerAction({type:actionTypes[n],update:"updateView"},noop);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,s){s.eachComponent({mainType:"series",subType:"treemap",query:a},l);function l(u,c){var d=["treemapZoomToNode","treemapRootToNode"],Ct=retrieveTargetInfo(a,d,u);if(Ct){var ar=u.getViewRoot();ar&&(a.direction=aboveViewRoot(ar,Ct.node)?"rollUp":"drillDown"),u.resetViewRoot(Ct.node)}}})}function enableAriaDecalForTree(t){var n=t.getData(),a=n.tree,s={};a.eachNode(function(l){for(var u=l;u&&u.depth>1;)u=u.parentNode;var c=getDecalFromPalette(t.ecModel,u.name||u.dataIndex+"",s);l.setVisual("decal",c)})}var TreemapSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventUsingHoverLayer=!0,a}return n.prototype.getInitialData=function(a,s){var l={name:a.name,children:a.data};completeTreeValue$1(l);var u=a.levels||[],c=this.designatedVisualItemStyle={},d=new Model({itemStyle:c},this,s);u=a.levels=setDefault(u,s);var Ct=map$1(u||[],function(tn){return new Model(tn,d,s)},this),ar=Tree.createTree(l,this,en);function en(tn){tn.wrapMethod("getItemModel",function(on,fn){var dn=ar.getNodeByDataIndex(fn),Cn=dn?Ct[dn.depth]:null;return on.parentModel=Cn||d,on})}return ar.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.getRawValue(a),d=u.getName(a);return createTooltipMarkup("nameValue",{name:d,value:c})},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(l,this),s.treePathInfo=s.treeAncestors,s},n.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,a)},n.prototype.mapIdToIndex=function(a){var s=this._idIndexMap;s||(s=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=s.get(a);return l==null&&s.set(a,l=this._idIndexMapCount++),l},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n})(SeriesModel);function completeTreeValue$1(t){var n=0;each$f(t.children,function(s){completeTreeValue$1(s);var l=s.value;isArray$1(l)&&(l=l[0]),n+=l});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}function setDefault(t,n){var a=normalizeToArray(n.get("color")),s=normalizeToArray(n.get(["aria","decal","decals"]));if(a){t=t||[];var l,u;each$f(t,function(d){var Ct=new Model(d),ar=Ct.get("color"),en=Ct.get("decal");(Ct.get(["itemStyle","color"])||ar&&ar!=="none")&&(l=!0),(Ct.get(["itemStyle","decal"])||en&&en!=="none")&&(u=!0)});var c=t[0]||(t[0]={});return l||(c.color=a.slice()),!u&&s&&(c.decal=s.slice()),t}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=(function(){function t(n){this.group=new Group$3,n.add(this.group)}return t.prototype.render=function(n,a,s,l){var u=n.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!u.get("show")||!s)){var d=u.getModel("itemStyle"),Ct=u.getModel("emphasis"),ar=d.getModel("textStyle"),en=Ct.getModel(["itemStyle","textStyle"]),tn={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(s,tn,ar),this._renderContent(n,tn,d,Ct,ar,en,l),positionElement(c,tn.pos,tn.box)}},t.prototype._prepare=function(n,a,s){for(var l=n;l;l=l.parentNode){var u=convertOptionIdName(l.getModel().get("name"),""),c=s.getTextRect(u),d=Math.max(c.width+TEXT_PADDING*2,a.emptyItemWidth);a.totalWidth+=d+ITEM_GAP,a.renderList.push({node:l,text:u,width:d})}},t.prototype._renderContent=function(n,a,s,l,u,c,d){for(var Ct=0,ar=a.emptyItemWidth,en=n.get(["breadcrumb","height"]),tn=getAvailableSize(a.pos,a.box),on=a.totalWidth,fn=a.renderList,dn=l.getModel("itemStyle").getItemStyle(),Cn=fn.length-1;Cn>=0;Cn--){var Rn=fn[Cn],ax=Rn.node,ox=Rn.width,sx=Rn.text;on>tn.width&&(on-=ox-ar,ox=ar,sx=null);var lx=new Polygon({shape:{points:makeItemPoints(Ct,0,ox,en,Cn===fn.length-1,Cn===0)},style:defaults(s.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(u,{text:sx})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(d,ax)});lx.disableLabelAnimation=!0,lx.getTextContent().ensureState("emphasis").style=createTextStyle$1(c,{text:sx}),lx.ensureState("emphasis").style=dn,toggleHoverEmphasis(lx,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(lx),packEventData(lx,n,ax),Ct+=ox+ITEM_GAP}},t.prototype.remove=function(){this.group.removeAll()},t})();function makeItemPoints(t,n,a,s,l,u){var c=[[l?t:t-ARRAY_LENGTH,n],[t+a,n],[t+a,n+s],[l?t:t-ARRAY_LENGTH,n+s]];return!u&&c.splice(2,0,[t+a+ARRAY_LENGTH,n+s/2]),!l&&c.push([t,n+s/2]),c}function packEventData(t,n,a){getECData(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,n)}}var AnimationWrap=(function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(n,a,s,l,u){return this._elExistsMap[n.id]?!1:(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:a,duration:s,delay:l,easing:u}),!0)},t.prototype.finished=function(n){return this._finishedCallback=n,this},t.prototype.start=function(){for(var n=this,a=this._storage.length,s=function(){a--,a<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},l=0,u=this._storage.length;l<u;l++){var c=this._storage[l];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:s,aborted:s})}return this},t})();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(t){var n=getStateItemStyle(t);return n.stroke=n.fill=n.lineWidth=null,n},inner$d=makeInner(),TreemapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._state="ready",a._storage=createStorage(),a}return n.prototype.render=function(a,s,l,u){var c=s.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(c,a)<0)){this.seriesModel=a,this.api=l,this.ecModel=s;var d=["treemapZoomToNode","treemapRootToNode"],Ct=retrieveTargetInfo(u,d,a),ar=u&&u.type,en=a.layoutInfo,tn=!this._oldTree,on=this._storage,fn=ar==="treemapRootToNode"&&Ct&&on?{rootNodeGroup:on.nodeGroup[Ct.node.getRawIndex()],direction:u.direction}:null,dn=this._giveContainerGroup(en),Cn=a.get("animation"),Rn=this._doRender(dn,a,fn);Cn&&!tn&&(!ar||ar==="treemapZoomToNode"||ar==="treemapRootToNode")?this._doAnimation(dn,Rn,a,fn):Rn.renderFinally(),this._resetController(l),this._renderBreadcrumb(a,l,Ct)}},n.prototype._giveContainerGroup=function(a){var s=this._containerGroup;return s||(s=this._containerGroup=new Group$2,this._initEvents(s),this.group.add(s)),s.x=a.x,s.y=a.y,s},n.prototype._doRender=function(a,s,l){var u=s.getData().tree,c=this._oldTree,d=createStorage(),Ct=createStorage(),ar=this._storage,en=[];function tn(ox,sx,lx,cx){return renderNode(s,Ct,ar,l,d,en,ox,sx,lx,cx)}Cn(u.root?[u.root]:[],c&&c.root?[c.root]:[],a,u===c||!c,0);var on=Rn(ar);if(this._oldTree=u,this._storage=Ct,this._controllerHost){var fn=this.seriesModel.layoutInfo,dn=u.root.getLayout();dn.width===fn.width&&dn.height===fn.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:d,willDeleteEls:on,renderFinally:ax};function Cn(ox,sx,lx,cx,fx){cx?(sx=ox,each$f(ox,function(px,hx){!px.isRemoved()&&mx(hx,hx)})):new DataDiffer(sx,ox,gx,gx).add(mx).update(mx).remove(curry$1(mx,null)).execute();function gx(px){return px.getId()}function mx(px,hx){var vx=px!=null?ox[px]:null,yx=hx!=null?sx[hx]:null,Sx=tn(vx,yx,lx,fx);Sx&&Cn(vx&&vx.viewChildren||[],yx&&yx.viewChildren||[],Sx,cx,fx+1)}}function Rn(ox){var sx=createStorage();return ox&&each$f(ox,function(lx,cx){var fx=sx[cx];each$f(lx,function(gx){gx&&(fx.push(gx),inner$d(gx).willDelete=!0)})}),sx}function ax(){each$f(on,function(ox){each$f(ox,function(sx){sx.parent&&sx.parent.remove(sx)})}),each$f(en,function(ox){ox.invisible=!0,ox.dirty()})}},n.prototype._doAnimation=function(a,s,l,u){var c=l.get("animationDurationUpdate"),d=l.get("animationEasing"),Ct=(isFunction$1(c)?0:c)||0,ar=(isFunction$1(d)?null:d)||"cubicOut",en=createWrap();each$f(s.willDeleteEls,function(tn,on){each$f(tn,function(fn,dn){if(!fn.invisible){var Cn=fn.parent,Rn,ax=inner$d(Cn);if(u&&u.direction==="drillDown")Rn=Cn===u.rootNodeGroup?{shape:{x:0,y:0,width:ax.nodeWidth,height:ax.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var ox=0,sx=0;ax.willDelete||(ox=ax.nodeWidth/2,sx=ax.nodeHeight/2),Rn=on==="nodeGroup"?{x:ox,y:sx,style:{opacity:0}}:{shape:{x:ox,y:sx,width:0,height:0},style:{opacity:0}}}Rn&&en.add(fn,Rn,Ct,0,ar)}})}),each$f(this._storage,function(tn,on){each$f(tn,function(fn,dn){var Cn=s.lastsForAnimation[on][dn],Rn={};Cn&&(fn instanceof Group$3?Cn.oldX!=null&&(Rn.x=fn.x,Rn.y=fn.y,fn.x=Cn.oldX,fn.y=Cn.oldY):(Cn.oldShape&&(Rn.shape=extend({},fn.shape),fn.setShape(Cn.oldShape)),Cn.fadein?(fn.setStyle("opacity",0),Rn.style={opacity:1}):fn.style.opacity!==1&&(Rn.style={opacity:1})),en.add(fn,Rn,Ct,0,ar))})},this),this._state="animating",en.finished(bind$1(function(){this._state="ready",s.renderFinally()},this)).start()},n.prototype._resetController=function(a){var s=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost),s||(s=this._controller=new RoamController(a.getZr()),s.enable(this.seriesModel.get("roam")),l.zoomLimit=this.seriesModel.get("scaleLimit"),l.zoom=this.seriesModel.get("zoom"),s.on("pan",bind$1(this._onPan,this)),s.on("zoom",bind$1(this._onZoom,this)));var u=new BoundingRect(0,0,a.getWidth(),a.getHeight());s.setPointerChecker(function(c,d,Ct){return u.contain(d,Ct)})},n.prototype._clearController=function(){var a=this._controller;this._controllerHost=null,a&&(a.dispose(),a=null)},n.prototype._onPan=function(a){if(this._state!=="animating"&&(Math.abs(a.dx)>DRAG_THRESHOLD||Math.abs(a.dy)>DRAG_THRESHOLD)){var s=this.seriesModel.getData().tree.root;if(!s)return;var l=s.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+a.dx,y:l.y+a.dy,width:l.width,height:l.height}})}},n.prototype._onZoom=function(a){var s=a.originX,l=a.originY,u=a.scale;if(this._state!=="animating"){var c=this.seriesModel.getData().tree.root;if(!c)return;var d=c.getLayout();if(!d)return;var Ct=new BoundingRect(d.x,d.y,d.width,d.height),ar=null,en=this._controllerHost;ar=en.zoomLimit;var tn=en.zoom=en.zoom||1;if(tn*=u,ar){var on=ar.min||0,fn=ar.max||1/0;tn=Math.max(Math.min(fn,tn),on)}var dn=tn/en.zoom;en.zoom=tn;var Cn=this.seriesModel.layoutInfo;s-=Cn.x,l-=Cn.y;var Rn=create$1();translate(Rn,Rn,[-s,-l]),scale$1(Rn,Rn,[dn,dn]),translate(Rn,Rn,[s,l]),Ct.applyTransform(Rn),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:Ct.x,y:Ct.y,width:Ct.width,height:Ct.height}})}},n.prototype._initEvents=function(a){var s=this;a.on("click",function(l){if(s._state==="ready"){var u=s.seriesModel.get("nodeClick",!0);if(u){var c=s.findTarget(l.offsetX,l.offsetY);if(c){var d=c.node;if(d.getLayout().isLeafRoot)s._rootToNode(c);else if(u==="zoomToNode")s._zoomToNode(c);else if(u==="link"){var Ct=d.hostTree.data.getItemModel(d.dataIndex),ar=Ct.get("link",!0),en=Ct.get("target",!0)||"blank";ar&&windowOpen(ar,en)}}}}},this)},n.prototype._renderBreadcrumb=function(a,s,l){var u=this;l||(l=a.get("leafDepth",!0)!=null?{node:a.getViewRoot()}:this.findTarget(s.getWidth()/2,s.getHeight()/2),l||(l={node:a.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,s,l.node,function(c){u._state!=="animating"&&(aboveViewRoot(a.getViewRoot(),c)?u._rootToNode({node:c}):u._zoomToNode({node:c}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype.findTarget=function(a,s){var l,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(c){var d=this._storage.background[c.getRawIndex()];if(d){var Ct=d.transformCoordToLocal(a,s),ar=d.shape;if(ar.x<=Ct[0]&&Ct[0]<=ar.x+ar.width&&ar.y<=Ct[1]&&Ct[1]<=ar.y+ar.height)l={node:c,offsetX:Ct[0],offsetY:Ct[1]};else return!1}},this),l},n.type="treemap",n})(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(t,n,a,s,l,u,c,d,Ct,ar){if(!c)return;var en=c.getLayout(),tn=t.getData(),on=c.getModel();if(tn.setItemGraphicEl(c.dataIndex,null),!en||!en.isInView)return;var fn=en.width,dn=en.height,Cn=en.borderWidth,Rn=en.invisible,ax=c.getRawIndex(),ox=d&&d.getRawIndex(),sx=c.viewChildren,lx=en.upperHeight,cx=sx&&sx.length,fx=on.getModel("itemStyle"),gx=on.getModel(["emphasis","itemStyle"]),mx=on.getModel(["blur","itemStyle"]),px=on.getModel(["select","itemStyle"]),hx=fx.get("borderRadius")||0,vx=Nx("nodeGroup",Group$2);if(!vx)return;if(Ct.add(vx),vx.x=en.x||0,vx.y=en.y||0,vx.markRedraw(),inner$d(vx).nodeWidth=fn,inner$d(vx).nodeHeight=dn,en.isAboveViewRoot)return vx;var yx=Nx("background",Rect$1,ar,Z2_BG);yx&&Cx(vx,yx,cx&&en.upperLabelHeight);var Sx=on.getModel("emphasis"),_x=Sx.get("focus"),Ex=Sx.get("blurScope"),bx=Sx.get("disabled"),Ax=_x==="ancestor"?c.getAncestorsIndices():_x==="descendant"?c.getDescendantIndices():_x;if(cx)isHighDownDispatcher(vx)&&setAsHighDownDispatcher(vx,!1),yx&&(setAsHighDownDispatcher(yx,!bx),tn.setItemGraphicEl(c.dataIndex,yx),enableHoverFocus(yx,Ax,Ex));else{var Mx=Nx("content",Rect$1,ar,Z2_CONTENT);Mx&&Lx(vx,Mx),yx.disableMorphing=!0,yx&&isHighDownDispatcher(yx)&&setAsHighDownDispatcher(yx,!1),setAsHighDownDispatcher(vx,!bx),tn.setItemGraphicEl(c.dataIndex,vx);var Rx=on.getShallow("cursor");Rx&&Mx.attr("cursor",Rx),enableHoverFocus(vx,Ax,Ex)}return vx;function Cx(Vx,Gx,Zx){var jx=getECData(Gx);if(jx.dataIndex=c.dataIndex,jx.seriesIndex=t.seriesIndex,Gx.setShape({x:0,y:0,width:fn,height:dn,r:hx}),Rn)qx(Gx);else{Gx.invisible=!1;var Hx=c.getVisual("style"),iE=Hx.stroke,Xx=getItemStyleNormal(fx);Xx.fill=iE;var rE=getStateItemStyle(gx);rE.fill=gx.get("borderColor");var uE=getStateItemStyle(mx);uE.fill=mx.get("borderColor");var aE=getStateItemStyle(px);if(aE.fill=px.get("borderColor"),Zx){var Kx=fn-2*Cn;Ix(Gx,iE,Hx.opacity,{x:Cn,y:0,width:Kx,height:lx})}else Gx.removeTextContent();Gx.setStyle(Xx),Gx.ensureState("emphasis").style=rE,Gx.ensureState("blur").style=uE,Gx.ensureState("select").style=aE,setDefaultStateProxy(Gx)}Vx.add(Gx)}function Lx(Vx,Gx){var Zx=getECData(Gx);Zx.dataIndex=c.dataIndex,Zx.seriesIndex=t.seriesIndex;var jx=Math.max(fn-2*Cn,0),Hx=Math.max(dn-2*Cn,0);if(Gx.culling=!0,Gx.setShape({x:Cn,y:Cn,width:jx,height:Hx,r:hx}),Rn)qx(Gx);else{Gx.invisible=!1;var iE=c.getVisual("style"),Xx=iE.fill,rE=getItemStyleNormal(fx);rE.fill=Xx,rE.decal=iE.decal;var uE=getStateItemStyle(gx),aE=getStateItemStyle(mx),Kx=getStateItemStyle(px);Ix(Gx,Xx,iE.opacity,null),Gx.setStyle(rE),Gx.ensureState("emphasis").style=uE,Gx.ensureState("blur").style=aE,Gx.ensureState("select").style=Kx,setDefaultStateProxy(Gx)}Vx.add(Gx)}function qx(Vx){!Vx.invisible&&u.push(Vx)}function Ix(Vx,Gx,Zx,jx){var Hx=on.getModel(jx?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),iE=convertOptionIdName(on.get("name"),null),Xx=Hx.getShallow("show");setLabelStyle(Vx,getLabelStatesModels(on,jx?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Xx?iE:null,inheritColor:Gx,defaultOpacity:Zx,labelFetcher:t,labelDataIndex:c.dataIndex});var rE=Vx.getTextContent();if(rE){var uE=rE.style,aE=normalizeCssArray$1(uE.padding||0);jx&&(Vx.setTextConfig({layoutRect:jx}),rE.disableLabelLayout=!0),rE.beforeUpdate=function(){var ME=Math.max((jx?jx.width:Vx.shape.width)-aE[1]-aE[3],0),IE=Math.max((jx?jx.height:Vx.shape.height)-aE[0]-aE[2],0);(uE.width!==ME||uE.height!==IE)&&rE.setStyle({width:ME,height:IE})},uE.truncateMinChar=2,uE.lineOverflow="truncate",Px(uE,jx,en);var Kx=rE.getState("emphasis");Px(Kx?Kx.style:null,jx,en)}}function Px(Vx,Gx,Zx){var jx=Vx?Vx.text:null;if(!Gx&&Zx.isLeafRoot&&jx!=null){var Hx=t.get("drillDownIcon",!0);Vx.text=Hx?Hx+" "+jx:jx}}function Nx(Vx,Gx,Zx,jx){var Hx=ox!=null&&a[Vx][ox],iE=l[Vx];return Hx?(a[Vx][ox]=null,Bx(iE,Hx)):Rn||(Hx=new Gx,Hx instanceof Displayable&&(Hx.z2=calculateZ2(Zx,jx)),$x(iE,Hx)),n[Vx][ax]=Hx}function Bx(Vx,Gx){var Zx=Vx[ax]={};Gx instanceof Group$2?(Zx.oldX=Gx.x,Zx.oldY=Gx.y):Zx.oldShape=extend({},Gx.shape)}function $x(Vx,Gx){var Zx=Vx[ax]={},jx=c.parentNode,Hx=Gx instanceof Group$3;if(jx&&(!s||s.direction==="drillDown")){var iE=0,Xx=0,rE=l.background[jx.getRawIndex()];!s&&rE&&rE.oldShape&&(iE=rE.oldShape.width,Xx=rE.oldShape.height),Hx?(Zx.oldX=0,Zx.oldY=Xx):Zx.oldShape={x:iE,y:Xx,width:0,height:0}}Zx.fadein=!Hx}}function calculateZ2(t,n){return t*Z2_BASE+n}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=(function(){function t(n){var a=n.mappingMethod,s=n.type,l=this.option=clone$4(n);this.type=s,this.mappingMethod=a,this._normalizeData=normalizers[a];var u=t.visualHandlers[s];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[a],a==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):a==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(a!=="linear"||l.dataExtent),normalizeVisualRange(l))}return t.prototype.mapValueToVisual=function(n){var a=this._normalizeData(n);return this._normalizedToVisual(a,n)},t.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},t.listVisualTypes=function(){return keys(t.visualHandlers)},t.isValidType=function(n){return t.visualHandlers.hasOwnProperty(n)},t.eachVisual=function(n,a,s){isObject$3(n)?each$f(n,a,s):a.call(s,n)},t.mapVisual=function(n,a,s){var l,u=isArray$1(n)?[]:isObject$3(n)?{}:(l=!0,null);return t.eachVisual(n,function(c,d){var Ct=a.call(s,c,d);l?u=Ct:u[d]=Ct}),u},t.retrieveVisuals=function(n){var a={},s;return n&&each$c(t.visualHandlers,function(l,u){n.hasOwnProperty(u)&&(a[u]=n[u],s=!0)}),s?a:null},t.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var a=[];each$c(n,function(s,l){a.push(l)}),n=a}else return[];return n.sort(function(s,l){return l==="color"&&s!=="color"&&s.indexOf("color")===0?1:-1}),n},t.dependsOn=function(n,a){return a==="color"?!!(n&&n.indexOf(a)===0):n===a},t.findPieceIndex=function(n,a,s){for(var l,u=1/0,c=0,d=a.length;c<d;c++){var Ct=a[c].value;if(Ct!=null){if(Ct===n||isString$1(Ct)&&Ct===n+"")return c;s&&on(Ct,c)}}for(var c=0,d=a.length;c<d;c++){var ar=a[c],en=ar.interval,tn=ar.close;if(en){if(en[0]===-1/0){if(littleThan(tn[1],n,en[1]))return c}else if(en[1]===1/0){if(littleThan(tn[0],en[0],n))return c}else if(littleThan(tn[0],en[0],n)&&littleThan(tn[1],n,en[1]))return c;s&&on(en[0],c),s&&on(en[1],c)}}if(s)return n===1/0?a.length-1:n===-1/0?0:l;function on(fn,dn){var Cn=Math.abs(fn-n);Cn<u&&(u=Cn,l=dn)}},t.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(a,s){return!s&&(a=this._normalizeData(a)),doMapCategory.call(this,a)}:function(a,s,l){var u=!!l;return!s&&(a=this._normalizeData(a)),l=fastLerp(a,n.parsedVisual,l),u?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),s},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,a)}),colorSaturation:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,a)}),colorLightness:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,null,a)}),colorAlpha:makePartialColorVisualHandler(function(n,a){return modifyAlpha(n,a)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,a,s){var l=this.mapValueToVisual(n);s("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=doMapToArray.call(this,n)),s},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},t})();function preprocessForPiecewise(t){var n=t.pieceList;t.hasSpecialVisual=!1,each$f(n,function(a,s){a.originIndex=s,a.visual!=null&&(t.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(t){var n=t.categories,a=t.categoryMap={},s=t.visual;if(each$c(n,function(c,d){a[c]=d}),!isArray$1(s)){var l=[];isObject$3(s)?each$c(s,function(c,d){var Ct=a[d];l[Ct??CATEGORY_DEFAULT_VISUAL_INDEX]=c}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=s,s=setVisualToOption(t,l)}for(var u=n.length-1;u>=0;u--)s[u]==null&&(delete a[n[u]],n.pop())}function normalizeVisualRange(t,n){var a=t.visual,s=[];isObject$3(a)?each$c(a,function(u){s.push(u)}):a!=null&&s.push(a);var l={color:1,symbol:1};!n&&s.length===1&&!l.hasOwnProperty(t.type)&&(s[1]=s[0]),setVisualToOption(t,s)}function makePartialColorVisualHandler(t){return{applyVisual:function(n,a,s){var l=this.mapValueToVisual(n);s("color",t(a("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(t){var n=this.option.visual;return n[Math.round(linearMap$2(t,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(t){return function(n,a,s){s(t,this.mapValueToVisual(n))}}function doMapCategory(t){var n=this.option.visual;return n[this.option.loop&&t!==CATEGORY_DEFAULT_VISUAL_INDEX?t%n.length:t]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(t){return{linear:function(n){return linearMap$2(n,t,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=linearMap$2(n,t,this.option.visual,!0)),s},fixed:doMapFixed}}function getSpecifiedVisual(t){var n=this.option,a=n.pieceList;if(n.hasSpecialVisual){var s=VisualMapping.findPieceIndex(t,a),l=a[s];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(t,n){return t.visual=n,t.type==="color"&&(t.parsedVisual=map$1(n,function(a){var s=parse(a);return s||[0,0,0,1]})),n}var normalizers={linear:function(t){return linearMap$2(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var n=this.option.pieceList,a=VisualMapping.findPieceIndex(t,n,!0);if(a!=null)return linearMap$2(a,[0,n.length-1],[0,1],!0)},category:function(t){var n=this.option.categories?this.option.categoryMap[t]:t;return n??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(t,n,a){return t?n<=a:n<a}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(t){var n=t.getData().tree,a=n.root;a.isRemoved()||travelTree(a,{},t.getViewRoot().getAncestors(),t)}};function travelTree(t,n,a,s){var l=t.getModel(),u=t.getLayout(),c=t.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var d=l.getModel(ITEM_STYLE_NORMAL),Ct=buildVisuals(d,n,s),ar=c.ensureUniqueItemVisual(t.dataIndex,"style"),en=d.get("borderColor"),tn=d.get("borderColorSaturation"),on;tn!=null&&(on=calculateColor(Ct),en=calculateBorderColor(tn,on)),ar.stroke=en;var fn=t.viewChildren;if(!fn||!fn.length)on=calculateColor(Ct),ar.fill=on;else{var dn=buildVisualMapping(t,l,u,d,Ct,fn);each$f(fn,function(Cn,Rn){if(Cn.depth>=a.length||Cn===a[Cn.depth]){var ax=mapVisual$1(l,Ct,Cn,Rn,dn,s);travelTree(Cn,ax,a,s)}})}}}function buildVisuals(t,n,a){var s=extend({},n),l=a.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){l[u]=n[u];var c=t.get(u);l[u]=null,c!=null&&(s[u]=c)}),s}function calculateColor(t){var n=getValueVisualDefine(t,"color");if(n){var a=getValueVisualDefine(t,"colorAlpha"),s=getValueVisualDefine(t,"colorSaturation");return s&&(n=modifyHSL(n,null,null,s)),a&&(n=modifyAlpha(n,a)),n}}function calculateBorderColor(t,n){return n!=null?modifyHSL(n,null,null,t):null}function getValueVisualDefine(t,n){var a=t[n];if(a!=null&&a!=="none")return a}function buildVisualMapping(t,n,a,s,l,u){if(!(!u||!u.length)){var c=getRangeVisual(n,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(n,"colorAlpha")||getRangeVisual(n,"colorSaturation"));if(c){var d=n.get("visualMin"),Ct=n.get("visualMax"),ar=a.dataExtent.slice();d!=null&&d<ar[0]&&(ar[0]=d),Ct!=null&&Ct>ar[1]&&(ar[1]=Ct);var en=n.get("colorMappingBy"),tn={type:c.name,dataExtent:ar,visual:c.range};tn.type==="color"&&(en==="index"||en==="id")?(tn.mappingMethod="category",tn.loop=!0):tn.mappingMethod="linear";var on=new VisualMapping(tn);return inner$c(on).drColorMappingBy=en,on}}}function getRangeVisual(t,n){var a=t.get(n);return isArray$1(a)&&a.length?{name:n,range:a}:null}function mapVisual$1(t,n,a,s,l,u){var c=extend({},n);if(l){var d=l.type,Ct=d==="color"&&inner$c(l).drColorMappingBy,ar=Ct==="index"?s:Ct==="id"?u.mapIdToIndex(a.getId()):a.getValue(t.get("visualDimension"));c[d]=l.mapValueToVisual(ar)}return c}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(t,n,a,s){var l=a.getWidth(),u=a.getHeight(),c=t.option,d=getLayoutRect(t.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),Ct=c.size||[],ar=parsePercent(retrieveValue(d.width,Ct[0]),l),en=parsePercent(retrieveValue(d.height,Ct[1]),u),tn=s&&s.type,on=["treemapZoomToNode","treemapRootToNode"],fn=retrieveTargetInfo(s,on,t),dn=tn==="treemapRender"||tn==="treemapMove"?s.rootRect:null,Cn=t.getViewRoot(),Rn=getPathToRoot(Cn);if(tn!=="treemapMove"){var ax=tn==="treemapZoomToNode"?estimateRootSize(t,fn,Cn,ar,en):dn?[dn.width,dn.height]:[ar,en],ox=c.sort;ox&&ox!=="asc"&&ox!=="desc"&&(ox="desc");var sx={squareRatio:c.squareRatio,sort:ox,leafDepth:c.leafDepth};Cn.hostTree.clearLayouts();var lx={x:0,y:0,width:ax[0],height:ax[1],area:ax[0]*ax[1]};Cn.setLayout(lx),squarify(Cn,sx,!1,0),lx=Cn.getLayout(),each$b(Rn,function(fx,gx){var mx=(Rn[gx+1]||Cn).getValue();fx.setLayout(extend({dataExtent:[mx,mx],borderWidth:0,upperHeight:0},lx))})}var cx=t.getData().tree.root;cx.setLayout(calculateRootPosition(d,dn,fn),!0),t.setLayoutInfo(d),prunning(cx,new BoundingRect(-d.x,-d.y,l,u),Rn,Cn,0)}};function squarify(t,n,a,s){var l,u;if(!t.isRemoved()){var c=t.getLayout();l=c.width,u=c.height;var d=t.getModel(),Ct=d.get(PATH_BORDER_WIDTH),ar=d.get(PATH_GAP_WIDTH)/2,en=getUpperLabelHeight(d),tn=Math.max(Ct,en),on=Ct-ar,fn=tn-ar;t.setLayout({borderWidth:Ct,upperHeight:tn,upperLabelHeight:en},!0),l=mathMax$3(l-2*on,0),u=mathMax$3(u-on-fn,0);var dn=l*u,Cn=initChildren$1(t,d,dn,n,a,s);if(Cn.length){var Rn={x:on,y:fn,width:l,height:u},ax=mathMin$3(l,u),ox=1/0,sx=[];sx.area=0;for(var lx=0,cx=Cn.length;lx<cx;){var fx=Cn[lx];sx.push(fx),sx.area+=fx.getLayout().area;var gx=worst(sx,ax,n.squareRatio);gx<=ox?(lx++,ox=gx):(sx.area-=sx.pop().getLayout().area,position(sx,ax,Rn,ar,!1),ax=mathMin$3(Rn.width,Rn.height),sx.length=sx.area=0,ox=1/0)}if(sx.length&&position(sx,ax,Rn,ar,!0),!a){var mx=d.get("childrenVisibleMin");mx!=null&&dn<mx&&(a=!0)}for(var lx=0,cx=Cn.length;lx<cx;lx++)squarify(Cn[lx],n,a,s+1)}}}function initChildren$1(t,n,a,s,l,u){var c=t.children||[],d=s.sort;d!=="asc"&&d!=="desc"&&(d=null);var Ct=s.leafDepth!=null&&s.leafDepth<=u;if(l&&!Ct)return t.viewChildren=[];c=filter(c,function(fn){return!fn.isRemoved()}),sort$1(c,d);var ar=statistic(n,c,d);if(ar.sum===0)return t.viewChildren=[];if(ar.sum=filterByThreshold(n,a,ar.sum,d,c),ar.sum===0)return t.viewChildren=[];for(var en=0,tn=c.length;en<tn;en++){var on=c[en].getValue()/ar.sum*a;c[en].setLayout({area:on})}return Ct&&(c.length&&t.setLayout({isLeafRoot:!0},!0),c.length=0),t.viewChildren=c,t.setLayout({dataExtent:ar.dataExtent},!0),c}function filterByThreshold(t,n,a,s,l){if(!s)return a;for(var u=t.get("visibleMin"),c=l.length,d=c,Ct=c-1;Ct>=0;Ct--){var ar=l[s==="asc"?c-Ct-1:Ct].getValue();ar/a*n<u&&(d=Ct,a-=ar)}return s==="asc"?l.splice(0,c-d):l.splice(d,c-d),a}function sort$1(t,n){return n&&t.sort(function(a,s){var l=n==="asc"?a.getValue()-s.getValue():s.getValue()-a.getValue();return l===0?n==="asc"?a.dataIndex-s.dataIndex:s.dataIndex-a.dataIndex:l}),t}function statistic(t,n,a){for(var s=0,l=0,u=n.length;l<u;l++)s+=n[l].getValue();var c=t.get("visualDimension"),d;return!n||!n.length?d=[NaN,NaN]:c==="value"&&a?(d=[n[n.length-1].getValue(),n[0].getValue()],a==="asc"&&d.reverse()):(d=[1/0,-1/0],each$b(n,function(Ct){var ar=Ct.getValue(c);ar<d[0]&&(d[0]=ar),ar>d[1]&&(d[1]=ar)})),{sum:s,dataExtent:d}}function worst(t,n,a){for(var s=0,l=1/0,u=0,c=void 0,d=t.length;u<d;u++)c=t[u].getLayout().area,c&&(c<l&&(l=c),c>s&&(s=c));var Ct=t.area*t.area,ar=n*n*a;return Ct?mathMax$3(ar*s/Ct,Ct/(ar*l)):1/0}function position(t,n,a,s,l){var u=n===a.width?0:1,c=1-u,d=["x","y"],Ct=["width","height"],ar=a[d[u]],en=n?t.area/n:0;(l||en>a[Ct[c]])&&(en=a[Ct[c]]);for(var tn=0,on=t.length;tn<on;tn++){var fn=t[tn],dn={},Cn=en?fn.getLayout().area/en:0,Rn=dn[Ct[c]]=mathMax$3(en-2*s,0),ax=a[d[u]]+a[Ct[u]]-ar,ox=tn===on-1||ax<Cn?ax:Cn,sx=dn[Ct[u]]=mathMax$3(ox-2*s,0);dn[d[c]]=a[d[c]]+mathMin$3(s,Rn/2),dn[d[u]]=ar+mathMin$3(s,sx/2),ar+=ox,fn.setLayout(dn,!0)}a[d[c]]+=en,a[Ct[c]]-=en}function estimateRootSize(t,n,a,s,l){var u=(n||{}).node,c=[s,l];if(!u||u===a)return c;for(var d,Ct=s*l,ar=Ct*t.option.zoomToNodeRatio;d=u.parentNode;){for(var en=0,tn=d.children,on=0,fn=tn.length;on<fn;on++)en+=tn[on].getValue();var dn=u.getValue();if(dn===0)return c;ar*=en/dn;var Cn=d.getModel(),Rn=Cn.get(PATH_BORDER_WIDTH),ax=Math.max(Rn,getUpperLabelHeight(Cn));ar+=4*Rn*Rn+(3*Rn+ax)*Math.pow(ar,.5),ar>MAX_SAFE_INTEGER&&(ar=MAX_SAFE_INTEGER),u=d}ar<Ct&&(ar=Ct);var ox=Math.pow(ar/Ct,.5);return[s*ox,l*ox]}function calculateRootPosition(t,n,a){if(n)return{x:n.x,y:n.y};var s={x:0,y:0};if(!a)return s;var l=a.node,u=l.getLayout();if(!u)return s;for(var c=[u.width/2,u.height/2],d=l;d;){var Ct=d.getLayout();c[0]+=Ct.x,c[1]+=Ct.y,d=d.parentNode}return{x:t.width/2-c[0],y:t.height/2-c[1]}}function prunning(t,n,a,s,l){var u=t.getLayout(),c=a[l],d=c&&c===t;if(!(c&&!d||l===a.length&&t!==s)){t.setLayout({isInView:!0,invisible:!d&&!n.intersect(u),isAboveViewRoot:d},!0);var Ct=new BoundingRect(n.x-u.x,n.y-u.y,n.width,n.height);each$b(t.viewChildren||[],function(ar){prunning(ar,Ct,a,s,l+1)})}}function getUpperLabelHeight(t){return t.get(PATH_UPPER_LABEL_SHOW)?t.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(t){t.registerSeriesModel(TreemapSeriesModel),t.registerChartView(TreemapView),t.registerVisual(treemapVisual),t.registerLayout(treemapLayout),installTreemapAction(t)}function categoryFilter(t){var n=t.findComponents({mainType:"legend"});!n||!n.length||t.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),l=a.getGraph(),u=l.data,c=s.mapArray(s.getName);u.filterSelf(function(d){var Ct=u.getItemModel(d),ar=Ct.getShallow("category");if(ar!=null){isNumber(ar)&&(ar=c[ar]);for(var en=0;en<n.length;en++)if(!n[en].isSelected(ar))return!1}return!0})})}function categoryVisual(t){var n={};t.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),l=a.getData(),u={};s.each(function(c){var d=s.getName(c);u["ec-"+d]=c;var Ct=s.getItemModel(c),ar=Ct.getModel("itemStyle").getItemStyle();ar.fill||(ar.fill=a.getColorFromPalette(d,n)),s.setItemVisual(c,"style",ar);for(var en=["symbol","symbolSize","symbolKeepAspect"],tn=0;tn<en.length;tn++){var on=Ct.getShallow(en[tn],!0);on!=null&&s.setItemVisual(c,en[tn],on)}}),s.count()&&l.each(function(c){var d=l.getItemModel(c),Ct=d.getShallow("category");if(Ct!=null){isString$1(Ct)&&(Ct=u["ec-"+Ct]);var ar=s.getItemVisual(Ct,"style"),en=l.ensureUniqueItemVisual(c,"style");extend(en,ar);for(var tn=["symbol","symbolSize","symbolKeepAspect"],on=0;on<tn.length;on++)l.setItemVisual(c,tn[on],s.getItemVisual(Ct,tn[on]))}})})}function normalize$1(t){return t instanceof Array||(t=[t,t]),t}function graphEdgeVisual(t){t.eachSeriesByType("graph",function(n){var a=n.getGraph(),s=n.getEdgeData(),l=normalize$1(n.get("edgeSymbol")),u=normalize$1(n.get("edgeSymbolSize"));s.setVisual("fromSymbol",l&&l[0]),s.setVisual("toSymbol",l&&l[1]),s.setVisual("fromSymbolSize",u&&u[0]),s.setVisual("toSymbolSize",u&&u[1]),s.setVisual("style",n.getModel("lineStyle").getLineStyle()),s.each(function(c){var d=s.getItemModel(c),Ct=a.getEdgeByIndex(c),ar=normalize$1(d.getShallow("symbol",!0)),en=normalize$1(d.getShallow("symbolSize",!0)),tn=d.getModel("lineStyle").getLineStyle(),on=s.ensureUniqueItemVisual(c,"style");switch(extend(on,tn),on.stroke){case"source":{var fn=Ct.node1.getVisual("style");on.stroke=fn&&fn.fill;break}case"target":{var fn=Ct.node2.getVisual("style");on.stroke=fn&&fn.fill;break}}ar[0]&&Ct.setVisual("fromSymbol",ar[0]),ar[1]&&Ct.setVisual("toSymbol",ar[1]),en[0]&&Ct.setVisual("fromSymbolSize",en[0]),en[1]&&Ct.setVisual("toSymbolSize",en[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(t){return t.get("autoCurveness")||null},createCurveness=function(t,n){var a=getAutoCurvenessParams(t),s=20,l=[];if(isNumber(a))s=a;else if(isArray$1(a)){t.__curvenessList=a;return}n>s&&(s=n);var u=s%2?s+2:s+3;l=[];for(var c=0;c<u;c++)l.push((c%2?c+1:c)/10*(c%2?-1:1));t.__curvenessList=l},getKeyOfEdges=function(t,n,a){var s=[t.id,t.dataIndex].join("."),l=[n.id,n.dataIndex].join(".");return[a.uid,s,l].join(KEY_DELIMITER)},getOppositeKey=function(t){var n=t.split(KEY_DELIMITER);return[n[0],n[2],n[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(t,n){var a=getKeyOfEdges(t.node1,t.node2,n);return n.__edgeMap[a]},getTotalLengthBetweenNodes=function(t,n){var a=getEdgeMapLengthWithKey(getKeyOfEdges(t.node1,t.node2,n),n),s=getEdgeMapLengthWithKey(getKeyOfEdges(t.node2,t.node1,n),n);return a+s},getEdgeMapLengthWithKey=function(t,n){var a=n.__edgeMap;return a[t]?a[t].length:0};function initCurvenessList(t){getAutoCurvenessParams(t)&&(t.__curvenessList=[],t.__edgeMap={},createCurveness(t))}function createEdgeMapForCurveness(t,n,a,s){if(getAutoCurvenessParams(a)){var l=getKeyOfEdges(t,n,a),u=a.__edgeMap,c=u[getOppositeKey(l)];u[l]&&!c?u[l].isForward=!0:c&&u[l]&&(c.isForward=!0,u[l].isForward=!1),u[l]=u[l]||[],u[l].push(s)}}function getCurvenessForEdge(t,n,a,s){var l=getAutoCurvenessParams(n),u=isArray$1(l);if(!l)return null;var c=getEdgeFromMap(t,n);if(!c)return null;for(var d=-1,Ct=0;Ct<c.length;Ct++)if(c[Ct]===a){d=Ct;break}var ar=getTotalLengthBetweenNodes(t,n);createCurveness(n,ar),t.lineStyle=t.lineStyle||{};var en=getKeyOfEdges(t.node1,t.node2,n),tn=n.__curvenessList,on=u||ar%2?0:1;if(c.isForward)return tn[on+d];var fn=getOppositeKey(en),dn=getEdgeMapLengthWithKey(fn,n),Cn=tn[d+dn+on];return s?u?l&&l[0]===0?(dn+on)%2?Cn:-Cn:((dn%2?0:1)+on)%2?Cn:-Cn:(dn+on)%2?Cn:-Cn:tn[d+dn+on]}function simpleLayout(t){var n=t.coordinateSystem;if(!(n&&n.type!=="view")){var a=t.getGraph();a.eachNode(function(s){var l=s.getModel();s.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(a,t)}}function simpleLayoutEdge(t,n){t.eachEdge(function(a,s){var l=retrieve3(a.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(a,n,s,!0),0),u=clone$3(a.node1.getLayout()),c=clone$3(a.node2.getLayout()),d=[u,c];+l&&d.push([(u[0]+c[0])/2-(u[1]-c[1])*l,(u[1]+c[1])/2-(c[0]-u[0])*l]),a.setLayout(d)})}function graphSimpleLayout(t,n){t.eachSeriesByType("graph",function(a){var s=a.get("layout"),l=a.coordinateSystem;if(l&&l.type!=="view"){var u=a.getData(),c=[];each$f(l.dimensions,function(on){c=c.concat(u.mapDimensionsAll(on))});for(var d=0;d<u.count();d++){for(var Ct=[],ar=!1,en=0;en<c.length;en++){var tn=u.get(c[en],d);isNaN(tn)||(ar=!0),Ct.push(tn)}ar?u.setItemLayout(d,l.dataToPoint(Ct)):u.setItemLayout(d,[NaN,NaN])}simpleLayoutEdge(u.graph,a)}else(!s||s==="none")&&simpleLayout(a)})}function getNodeGlobalScale(t){var n=t.coordinateSystem;if(n.type!=="view")return 1;var a=t.option.nodeScaleRatio,s=n.scaleX,l=n.getZoom(),u=(l-1)*a+1;return u/s}function getSymbolSize(t){var n=t.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(t,n,a,s){var l=t.coordinateSystem;if(!(l&&l.type!=="view")){var u=l.getBoundingRect(),c=t.getData(),d=c.graph,Ct=u.width/2+u.x,ar=u.height/2+u.y,en=Math.min(u.width,u.height)/2,tn=c.count();if(c.setLayout({cx:Ct,cy:ar}),!!tn){if(a){var on=l.pointToData(s),fn=on[0],dn=on[1],Cn=[fn-Ct,dn-ar];normalize$3(Cn,Cn),scale$2(Cn,Cn,en),a.setLayout([Ct+Cn[0],ar+Cn[1]],!0);var Rn=t.get(["circular","rotateLabel"]);rotateNodeLabel(a,Rn,Ct,ar)}_layoutNodesBasedOn[n](t,d,c,en,Ct,ar,tn),d.eachEdge(function(ax,ox){var sx=retrieve3(ax.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(ax,t,ox),0),lx=clone$3(ax.node1.getLayout()),cx=clone$3(ax.node2.getLayout()),fx,gx=(lx[0]+cx[0])/2,mx=(lx[1]+cx[1])/2;+sx&&(sx*=3,fx=[Ct*sx+gx*(1-sx),ar*sx+mx*(1-sx)]),ax.setLayout([lx,cx,fx])})}}}var _layoutNodesBasedOn={value:function(t,n,a,s,l,u,c){var d=0,Ct=a.getSum("value"),ar=Math.PI*2/(Ct||c);n.eachNode(function(en){var tn=en.getValue("value"),on=ar*(Ct?tn:1)/2;d+=on,en.setLayout([s*Math.cos(d)+l,s*Math.sin(d)+u]),d+=on})},symbolSize:function(t,n,a,s,l,u,c){var d=0;_symbolRadiansHalf.length=c;var Ct=getNodeGlobalScale(t);n.eachNode(function(tn){var on=getSymbolSize(tn);isNaN(on)&&(on=2),on<0&&(on=0),on*=Ct;var fn=Math.asin(on/2/s);isNaN(fn)&&(fn=PI$2/2),_symbolRadiansHalf[tn.dataIndex]=fn,d+=fn*2});var ar=(2*PI$2-d)/c/2,en=0;n.eachNode(function(tn){var on=ar+_symbolRadiansHalf[tn.dataIndex];en+=on,(!tn.getLayout()||!tn.getLayout().fixed)&&tn.setLayout([s*Math.cos(en)+l,s*Math.sin(en)+u]),en+=on})}};function rotateNodeLabel(t,n,a,s){var l=t.getGraphicEl();if(l){var u=t.getModel(),c=u.get(["label","rotate"])||0,d=l.getSymbolPath();if(n){var Ct=t.getLayout(),ar=Math.atan2(Ct[1]-s,Ct[0]-a);ar<0&&(ar=Math.PI*2+ar);var en=Ct[0]<a;en&&(ar=ar-Math.PI);var tn=en?"left":"right";d.setTextConfig({rotation:-ar,position:tn,origin:"center"});var on=d.ensureState("emphasis");extend(on.textConfig||(on.textConfig={}),{position:tn})}else d.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(t){t.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&circularLayout(n,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(t,n,a){for(var s=t,l=n,u=a.rect,c=u.width,d=u.height,Ct=[u.x+c/2,u.y+d/2],ar=a.gravity==null?.1:a.gravity,en=0;en<s.length;en++){var tn=s[en];tn.p||(tn.p=create$2(c*(Math.random()-.5)+Ct[0],d*(Math.random()-.5)+Ct[1])),tn.pp=clone$3(tn.p),tn.edges=null}var on=a.friction==null?.6:a.friction,fn=on,dn,Cn;return{warmUp:function(){fn=on*.8},setFixed:function(Rn){s[Rn].fixed=!0},setUnfixed:function(Rn){s[Rn].fixed=!1},beforeStep:function(Rn){dn=Rn},afterStep:function(Rn){Cn=Rn},step:function(Rn){dn&&dn(s,l);for(var ax=[],ox=s.length,sx=0;sx<l.length;sx++){var lx=l[sx];if(!lx.ignoreForceLayout){var cx=lx.n1,fx=lx.n2;sub(ax,fx.p,cx.p);var gx=len(ax)-lx.d,mx=fx.w/(cx.w+fx.w);isNaN(mx)&&(mx=0),normalize$3(ax,ax),!cx.fixed&&scaleAndAdd(cx.p,cx.p,ax,mx*gx*fn),!fx.fixed&&scaleAndAdd(fx.p,fx.p,ax,-(1-mx)*gx*fn)}}for(var sx=0;sx<ox;sx++){var px=s[sx];px.fixed||(sub(ax,Ct,px.p),scaleAndAdd(px.p,px.p,ax,ar*fn))}for(var sx=0;sx<ox;sx++)for(var cx=s[sx],hx=sx+1;hx<ox;hx++){var fx=s[hx];sub(ax,fx.p,cx.p);var gx=len(ax);gx===0&&(set$1(ax,Math.random()-.5,Math.random()-.5),gx=1);var vx=(cx.rep+fx.rep)/gx/gx;!cx.fixed&&scaleAndAdd(cx.pp,cx.pp,ax,vx),!fx.fixed&&scaleAndAdd(fx.pp,fx.pp,ax,-vx)}for(var yx=[],sx=0;sx<ox;sx++){var px=s[sx];px.fixed||(sub(yx,px.p,px.pp),scaleAndAdd(px.p,px.p,yx,fn),copy$1(px.pp,px.p))}fn=fn*.992;var Sx=fn<.01;Cn&&Cn(s,l,Sx),Rn&&Rn(Sx)}}}function graphForceLayout(t){t.eachSeriesByType("graph",function(n){var a=n.coordinateSystem;if(!(a&&a.type!=="view"))if(n.get("layout")==="force"){var s=n.preservedPoints||{},l=n.getGraph(),u=l.data,c=l.edgeData,d=n.getModel("force"),Ct=d.get("initLayout");n.preservedPoints?u.each(function(sx){var lx=u.getId(sx);u.setItemLayout(sx,s[lx]||[NaN,NaN])}):!Ct||Ct==="none"?simpleLayout(n):Ct==="circular"&&circularLayout(n,"value");var ar=u.getDataExtent("value"),en=c.getDataExtent("value"),tn=d.get("repulsion"),on=d.get("edgeLength"),fn=isArray$1(tn)?tn:[tn,tn],dn=isArray$1(on)?on:[on,on];dn=[dn[1],dn[0]];var Cn=u.mapArray("value",function(sx,lx){var cx=u.getItemLayout(lx),fx=linearMap$2(sx,ar,fn);return isNaN(fx)&&(fx=(fn[0]+fn[1])/2),{w:fx,rep:fx,fixed:u.getItemModel(lx).get("fixed"),p:!cx||isNaN(cx[0])||isNaN(cx[1])?null:cx}}),Rn=c.mapArray("value",function(sx,lx){var cx=l.getEdgeByIndex(lx),fx=linearMap$2(sx,en,dn);isNaN(fx)&&(fx=(dn[0]+dn[1])/2);var gx=cx.getModel(),mx=retrieve3(cx.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(cx,n,lx,!0),0);return{n1:Cn[cx.node1.dataIndex],n2:Cn[cx.node2.dataIndex],d:fx,curveness:mx,ignoreForceLayout:gx.get("ignoreForceLayout")}}),ax=a.getBoundingRect(),ox=forceLayout(Cn,Rn,{rect:ax,gravity:d.get("gravity"),friction:d.get("friction")});ox.beforeStep(function(sx,lx){for(var cx=0,fx=sx.length;cx<fx;cx++)sx[cx].fixed&&copy$1(sx[cx].p,l.getNodeByIndex(cx).getLayout())}),ox.afterStep(function(sx,lx,cx){for(var fx=0,gx=sx.length;fx<gx;fx++)sx[fx].fixed||l.getNodeByIndex(fx).setLayout(sx[fx].p),s[u.getId(fx)]=sx[fx].p;for(var fx=0,gx=lx.length;fx<gx;fx++){var mx=lx[fx],px=l.getEdgeByIndex(fx),hx=mx.n1.p,vx=mx.n2.p,yx=px.getLayout();yx=yx?yx.slice():[],yx[0]=yx[0]||[],yx[1]=yx[1]||[],copy$1(yx[0],hx),copy$1(yx[1],vx),+mx.curveness&&(yx[2]=[(hx[0]+vx[0])/2-(hx[1]-vx[1])*mx.curveness,(hx[1]+vx[1])/2-(vx[0]-hx[0])*mx.curveness]),px.setLayout(yx)}}),n.forceLayout=ox,n.preservedPoints=s,ox.step()}else n.forceLayout=null})}function getViewRect$3(t,n,a){var s=extend(t.getBoxLayoutParams(),{aspect:a});return getLayoutRect(s,{width:n.getWidth(),height:n.getHeight()})}function createViewCoordSys(t,n){var a=[];return t.eachSeriesByType("graph",function(s){var l=s.get("coordinateSystem");if(!l||l==="view"){var u=s.getData(),c=u.mapArray(function(Rn){var ax=u.getItemModel(Rn);return[+ax.get("x"),+ax.get("y")]}),d=[],Ct=[];fromPoints(c,d,Ct),Ct[0]-d[0]===0&&(Ct[0]+=1,d[0]-=1),Ct[1]-d[1]===0&&(Ct[1]+=1,d[1]-=1);var ar=(Ct[0]-d[0])/(Ct[1]-d[1]),en=getViewRect$3(s,n,ar);isNaN(ar)&&(d=[en.x,en.y],Ct=[en.x+en.width,en.y+en.height]);var tn=Ct[0]-d[0],on=Ct[1]-d[1],fn=en.width,dn=en.height,Cn=s.coordinateSystem=new View;Cn.zoomLimit=s.get("scaleLimit"),Cn.setBoundingRect(d[0],d[1],tn,on),Cn.setViewRect(en.x,en.y,fn,dn),Cn.setCenter(s.get("center"),n),Cn.setZoom(s.get("zoom")),a.push(Cn)}}),a}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t})();(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(StraightLineShape);function isStraightLine(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var ECLinePath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-line",s}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new StraightLineShape},n.prototype.buildPath=function(a,s){isStraightLine(s)?straightLineProto.buildPath.call(this,a,s):bezierCurveProto.buildPath.call(this,a,s)},n.prototype.pointAt=function(a){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,a):bezierCurveProto.pointAt.call(this,a)},n.prototype.tangentAt=function(a){var s=this.shape,l=isStraightLine(s)?[s.x2-s.x1,s.y2-s.y1]:bezierCurveProto.tangentAt.call(this,a);return normalize$3(l,l)},n})(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(t){return"_"+t+"Type"}function makeSymbolTypeValue(t,n,a){var s=n.getItemVisual(a,t);if(!s||s==="none")return s;var l=n.getItemVisual(a,t+"Size"),u=n.getItemVisual(a,t+"Rotate"),c=n.getItemVisual(a,t+"Offset"),d=n.getItemVisual(a,t+"KeepAspect"),Ct=normalizeSymbolSize(l),ar=normalizeSymbolOffset(c||0,Ct);return s+Ct+ar+(u||"")+(d||"")}function createSymbol(t,n,a){var s=n.getItemVisual(a,t);if(!(!s||s==="none")){var l=n.getItemVisual(a,t+"Size"),u=n.getItemVisual(a,t+"Rotate"),c=n.getItemVisual(a,t+"Offset"),d=n.getItemVisual(a,t+"KeepAspect"),Ct=normalizeSymbolSize(l),ar=normalizeSymbolOffset(c||0,Ct),en=createSymbol$1(s,-Ct[0]/2+ar[0],-Ct[1]/2+ar[1],Ct[0],Ct[1],null,d);return en.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,en.name=t,en}}function createLine(t){var n=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(n.shape,t),n}function setLinePoints(t,n){t.x1=n[0][0],t.y1=n[0][1],t.x2=n[1][0],t.y2=n[1][1],t.percent=1;var a=n[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var Line=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u._createLine(a,s,l),u}return n.prototype._createLine=function(a,s,l){var u=a.hostModel,c=a.getItemLayout(s),d=createLine(c);d.shape.percent=0,initProps(d,{shape:{percent:1}},u,s),this.add(d),each$f(SYMBOL_CATEGORIES,function(Ct){var ar=createSymbol(Ct,a,s);this.add(ar),this[makeSymbolTypeKey(Ct)]=makeSymbolTypeValue(Ct,a,s)},this),this._updateCommonStl(a,s,l)},n.prototype.updateData=function(a,s,l){var u=a.hostModel,c=this.childOfName("line"),d=a.getItemLayout(s),Ct={shape:{}};setLinePoints(Ct.shape,d),updateProps$1(c,Ct,u,s),each$f(SYMBOL_CATEGORIES,function(ar){var en=makeSymbolTypeValue(ar,a,s),tn=makeSymbolTypeKey(ar);if(this[tn]!==en){this.remove(this.childOfName(ar));var on=createSymbol(ar,a,s);this.add(on)}this[tn]=en},this),this._updateCommonStl(a,s,l)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(a,s,l){var u=a.hostModel,c=this.childOfName("line"),d=l&&l.emphasisLineStyle,Ct=l&&l.blurLineStyle,ar=l&&l.selectLineStyle,en=l&&l.labelStatesModels,tn=l&&l.emphasisDisabled,on=l&&l.focus,fn=l&&l.blurScope;if(!l||a.hasItemOption){var dn=a.getItemModel(s),Cn=dn.getModel("emphasis");d=Cn.getModel("lineStyle").getLineStyle(),Ct=dn.getModel(["blur","lineStyle"]).getLineStyle(),ar=dn.getModel(["select","lineStyle"]).getLineStyle(),tn=Cn.get("disabled"),on=Cn.get("focus"),fn=Cn.get("blurScope"),en=getLabelStatesModels(dn)}var Rn=a.getItemVisual(s,"style"),ax=Rn.stroke;c.useStyle(Rn),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=d,c.ensureState("blur").style=Ct,c.ensureState("select").style=ar,each$f(SYMBOL_CATEGORIES,function(fx){var gx=this.childOfName(fx);if(gx){gx.setColor(ax),gx.style.opacity=Rn.opacity;for(var mx=0;mx<SPECIAL_STATES.length;mx++){var px=SPECIAL_STATES[mx],hx=c.getState(px);if(hx){var vx=hx.style||{},yx=gx.ensureState(px),Sx=yx.style||(yx.style={});vx.stroke!=null&&(Sx[gx.__isEmptyBrush?"stroke":"fill"]=vx.stroke),vx.opacity!=null&&(Sx.opacity=vx.opacity)}}gx.markRedraw()}},this);var ox=u.getRawValue(s);setLabelStyle(this,en,{labelDataIndex:s,labelFetcher:{getFormattedLabel:function(fx,gx){return u.getFormattedLabel(fx,gx,a.dataType)}},inheritColor:ax||"#000",defaultOpacity:Rn.opacity,defaultText:(ox==null?a.getName(s):isFinite(ox)?round$3(ox):ox)+""});var sx=this.getTextContent();if(sx){var lx=en.normal;sx.__align=sx.style.align,sx.__verticalAlign=sx.style.verticalAlign,sx.__position=lx.get("position")||"middle";var cx=lx.get("distance");isArray$1(cx)||(cx=[cx,cx]),sx.__labelDistance=cx}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,on,fn,tn)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.updateLayout=function(a,s){this.setLinePoints(a.getItemLayout(s))},n.prototype.setLinePoints=function(a){var s=this.childOfName("line");setLinePoints(s.shape,a),s.dirty()},n.prototype.beforeUpdate=function(){var a=this,s=a.childOfName("fromSymbol"),l=a.childOfName("toSymbol"),u=a.getTextContent();if(!s&&!l&&(!u||u.ignore))return;for(var c=1,d=this.parent;d;)d.scaleX&&(c/=d.scaleX),d=d.parent;var Ct=a.childOfName("line");if(!this.__dirty&&!Ct.__dirty)return;var ar=Ct.shape.percent,en=Ct.pointAt(0),tn=Ct.pointAt(ar),on=sub([],tn,en);normalize$3(on,on);function fn(hx,vx){var yx=hx.__specifiedRotation;if(yx==null){var Sx=Ct.tangentAt(vx);hx.attr("rotation",(vx===1?-1:1)*Math.PI/2-Math.atan2(Sx[1],Sx[0]))}else hx.attr("rotation",yx)}if(s&&(s.setPosition(en),fn(s,0),s.scaleX=s.scaleY=c*ar,s.markRedraw()),l&&(l.setPosition(tn),fn(l,1),l.scaleX=l.scaleY=c*ar,l.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var dn=void 0,Cn=void 0,Rn=u.__labelDistance,ax=Rn[0]*c,ox=Rn[1]*c,sx=ar/2,lx=Ct.tangentAt(sx),cx=[lx[1],-lx[0]],fx=Ct.pointAt(sx);cx[1]>0&&(cx[0]=-cx[0],cx[1]=-cx[1]);var gx=lx[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var mx=-Math.atan2(lx[1],lx[0]);tn[0]<en[0]&&(mx=Math.PI+mx),u.rotation=mx}var px=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":px=-ox,Cn="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":px=ox,Cn="top";break;default:px=0,Cn="middle"}switch(u.__position){case"end":u.x=on[0]*ax+tn[0],u.y=on[1]*ox+tn[1],dn=on[0]>.8?"left":on[0]<-.8?"right":"center",Cn=on[1]>.8?"top":on[1]<-.8?"bottom":"middle";break;case"start":u.x=-on[0]*ax+en[0],u.y=-on[1]*ox+en[1],dn=on[0]>.8?"right":on[0]<-.8?"left":"center",Cn=on[1]>.8?"bottom":on[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=ax*gx+en[0],u.y=en[1]+px,dn=lx[0]<0?"right":"left",u.originX=-ax*gx,u.originY=-px;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=fx[0],u.y=fx[1]+px,dn="center",u.originY=-px;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-ax*gx+tn[0],u.y=tn[1]+px,dn=lx[0]>=0?"right":"left",u.originX=ax*gx,u.originY=-px;break}u.scaleX=u.scaleY=c,u.setStyle({verticalAlign:u.__verticalAlign||Cn,align:u.__align||dn})}},n})(Group$3),LineDraw=(function(){function t(n){this.group=new Group$3,this._LineCtor=n||Line}return t.prototype.updateData=function(n){var a=this;this._progressiveEls=null;var s=this,l=s.group,u=s._lineData;s._lineData=n,u||l.removeAll();var c=makeSeriesScope$1(n);n.diff(u).add(function(d){a._doAdd(n,d,c)}).update(function(d,Ct){a._doUpdate(u,n,Ct,d,c)}).remove(function(d){l.remove(u.getItemGraphicEl(d))}).execute()},t.prototype.updateLayout=function(){var n=this._lineData;n&&n.eachItemGraphicEl(function(a,s){a.updateLayout(n,s)},this)},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$1(n),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a){this._progressiveEls=[];function s(d){!d.isGroup&&!isEffectObject(d)&&(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var l=n.start;l<n.end;l++){var u=a.getItemLayout(l);if(lineNeedsDraw(u)){var c=new this._LineCtor(a,l,this._seriesScope);c.traverse(s),this.group.add(c),a.setItemGraphicEl(l,c),this._progressiveEls.push(c)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._doAdd=function(n,a,s){var l=n.getItemLayout(a);if(lineNeedsDraw(l)){var u=new this._LineCtor(n,a,s);n.setItemGraphicEl(a,u),this.group.add(u)}},t.prototype._doUpdate=function(n,a,s,l,u){var c=n.getItemGraphicEl(s);if(!lineNeedsDraw(a.getItemLayout(l))){this.group.remove(c);return}c?c.updateData(a,l,u):c=new this._LineCtor(a,l,u),a.setItemGraphicEl(l,c),this.group.add(c)},t})();function isEffectObject(t){return t.animators&&t.animators.length>0}function makeSeriesScope$1(t){var n=t.hostModel,a=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:getLabelStatesModels(n)}}function isPointNaN(t){return isNaN(t[0])||isNaN(t[1])}function lineNeedsDraw(t){return t&&!isPointNaN(t[0])&&!isPointNaN(t[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(t,n,a){for(var s=t[0],l=t[1],u=t[2],c=1/0,d,Ct=a*a,ar=.1,en=.1;en<=.9;en+=.1){v1[0]=quadraticAt(s[0],l[0],u[0],en),v1[1]=quadraticAt(s[1],l[1],u[1],en);var tn=mathAbs(v2DistSquare(v1,n)-Ct);tn<c&&(c=tn,d=en)}for(var on=0;on<32;on++){var fn=d+ar;v2[0]=quadraticAt(s[0],l[0],u[0],d),v2[1]=quadraticAt(s[1],l[1],u[1],d),v3[0]=quadraticAt(s[0],l[0],u[0],fn),v3[1]=quadraticAt(s[1],l[1],u[1],fn);var tn=v2DistSquare(v2,n)-Ct;if(mathAbs(tn)<.01)break;var dn=v2DistSquare(v3,n)-Ct;ar/=2,tn<0?dn>=0?d=d+ar:d=d-ar:dn>=0?d=d-ar:d=d+ar}return d}function adjustEdge(t,n){var a=[],s=quadraticSubdivide,l=[[],[],[]],u=[[],[]],c=[];n/=2,t.eachEdge(function(d,Ct){var ar=d.getLayout(),en=d.getVisual("fromSymbol"),tn=d.getVisual("toSymbol");ar.__original||(ar.__original=[clone$3(ar[0]),clone$3(ar[1])],ar[2]&&ar.__original.push(clone$3(ar[2])));var on=ar.__original;if(ar[2]!=null){if(copy$1(l[0],on[0]),copy$1(l[1],on[2]),copy$1(l[2],on[1]),en&&en!=="none"){var fn=getSymbolSize(d.node1),dn=intersectCurveCircle(l,on[0],fn*n);s(l[0][0],l[1][0],l[2][0],dn,a),l[0][0]=a[3],l[1][0]=a[4],s(l[0][1],l[1][1],l[2][1],dn,a),l[0][1]=a[3],l[1][1]=a[4]}if(tn&&tn!=="none"){var fn=getSymbolSize(d.node2),dn=intersectCurveCircle(l,on[1],fn*n);s(l[0][0],l[1][0],l[2][0],dn,a),l[1][0]=a[1],l[2][0]=a[2],s(l[0][1],l[1][1],l[2][1],dn,a),l[1][1]=a[1],l[2][1]=a[2]}copy$1(ar[0],l[0]),copy$1(ar[1],l[2]),copy$1(ar[2],l[1])}else{if(copy$1(u[0],on[0]),copy$1(u[1],on[1]),sub(c,u[1],u[0]),normalize$3(c,c),en&&en!=="none"){var fn=getSymbolSize(d.node1);scaleAndAdd$1(u[0],u[0],c,fn*n)}if(tn&&tn!=="none"){var fn=getSymbolSize(d.node2);scaleAndAdd$1(u[1],u[1],c,-fn*n)}copy$1(ar[0],u[0]),copy$1(ar[1],u[1])}})}function isViewCoordSys(t){return t.type==="view"}var GraphView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){var l=new SymbolDraw,u=new LineDraw,c=this.group;this._controller=new RoamController(s.getZr()),this._controllerHost={target:c},c.add(l.group),c.add(u.group),this._symbolDraw=l,this._lineDraw=u,this._firstRender=!0},n.prototype.render=function(a,s,l){var u=this,c=a.coordinateSystem;this._model=a;var d=this._symbolDraw,Ct=this._lineDraw,ar=this.group;if(isViewCoordSys(c)){var en={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?ar.attr(en):updateProps$1(ar,en,a)}adjustEdge(a.getGraph(),getNodeGlobalScale(a));var tn=a.getData();d.updateData(tn);var on=a.getEdgeData();Ct.updateData(on),this._updateNodeAndLinkScale(),this._updateController(a,s,l),clearTimeout(this._layoutTimeout);var fn=a.forceLayout,dn=a.get(["force","layoutAnimation"]);fn&&this._startForceLayoutIteration(fn,dn);var Cn=a.get("layout");tn.graph.eachNode(function(sx){var lx=sx.dataIndex,cx=sx.getGraphicEl(),fx=sx.getModel();if(cx){cx.off("drag").off("dragend");var gx=fx.get("draggable");gx&&cx.on("drag",function(px){switch(Cn){case"force":fn.warmUp(),!u._layouting&&u._startForceLayoutIteration(fn,dn),fn.setFixed(lx),tn.setItemLayout(lx,[cx.x,cx.y]);break;case"circular":tn.setItemLayout(lx,[cx.x,cx.y]),sx.setLayout({fixed:!0},!0),circularLayout(a,"symbolSize",sx,[px.offsetX,px.offsetY]),u.updateLayout(a);break;case"none":default:tn.setItemLayout(lx,[cx.x,cx.y]),simpleLayoutEdge(a.getGraph(),a),u.updateLayout(a);break}}).on("dragend",function(){fn&&fn.setUnfixed(lx)}),cx.setDraggable(gx,!!fx.get("cursor"));var mx=fx.get(["emphasis","focus"]);mx==="adjacency"&&(getECData(cx).focus=sx.getAdjacentDataIndices())}}),tn.graph.eachEdge(function(sx){var lx=sx.getGraphicEl(),cx=sx.getModel().get(["emphasis","focus"]);lx&&cx==="adjacency"&&(getECData(lx).focus={edge:[sx.dataIndex],node:[sx.node1.dataIndex,sx.node2.dataIndex]})});var Rn=a.get("layout")==="circular"&&a.get(["circular","rotateLabel"]),ax=tn.getLayout("cx"),ox=tn.getLayout("cy");tn.graph.eachNode(function(sx){rotateNodeLabel(sx,Rn,ax,ox)}),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(a,s){var l=this;(function u(){a.step(function(c){l.updateLayout(l._model),(l._layouting=!c)&&(s?l._layoutTimeout=setTimeout(u,16):u())})})()},n.prototype._updateController=function(a,s,l){var u=this,c=this._controller,d=this._controllerHost,Ct=this.group;if(c.setPointerChecker(function(ar,en,tn){var on=Ct.getBoundingRect();return on.applyTransform(Ct.transform),on.contain(en,tn)&&!onIrrelevantElement(ar,l,a)}),!isViewCoordSys(a.coordinateSystem)){c.disable();return}c.enable(a.get("roam")),d.zoomLimit=a.get("scaleLimit"),d.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(ar){updateViewOnPan(d,ar.dx,ar.dy),l.dispatchAction({seriesId:a.id,type:"graphRoam",dx:ar.dx,dy:ar.dy})}).on("zoom",function(ar){updateViewOnZoom(d,ar.scale,ar.originX,ar.originY),l.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:ar.scale,originX:ar.originX,originY:ar.originY}),u._updateNodeAndLinkScale(),adjustEdge(a.getGraph(),getNodeGlobalScale(a)),u._lineDraw.updateLayout(),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(){var a=this._model,s=a.getData(),l=getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u&&u.setSymbolScale(l)})},n.prototype.updateLayout=function(a){adjustEdge(a.getGraph(),getNodeGlobalScale(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n})(ChartView);function generateNodeKey(t){return"_EC_"+t}var Graph=(function(){function t(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(n,a){n=n==null?""+a:""+n;var s=this._nodesMap;if(!s[generateNodeKey(n)]){var l=new GraphNode(n,a);return l.hostGraph=this,this.nodes.push(l),s[generateNodeKey(n)]=l,l}},t.prototype.getNodeByIndex=function(n){var a=this.data.getRawIndex(n);return this.nodes[a]},t.prototype.getNodeById=function(n){return this._nodesMap[generateNodeKey(n)]},t.prototype.addEdge=function(n,a,s){var l=this._nodesMap,u=this._edgesMap;if(isNumber(n)&&(n=this.nodes[n]),isNumber(a)&&(a=this.nodes[a]),n instanceof GraphNode||(n=l[generateNodeKey(n)]),a instanceof GraphNode||(a=l[generateNodeKey(a)]),!(!n||!a)){var c=n.id+"-"+a.id,d=new GraphEdge(n,a,s);return d.hostGraph=this,this._directed&&(n.outEdges.push(d),a.inEdges.push(d)),n.edges.push(d),n!==a&&a.edges.push(d),this.edges.push(d),u[c]=d,d}},t.prototype.getEdgeByIndex=function(n){var a=this.edgeData.getRawIndex(n);return this.edges[a]},t.prototype.getEdge=function(n,a){n instanceof GraphNode&&(n=n.id),a instanceof GraphNode&&(a=a.id);var s=this._edgesMap;return this._directed?s[n+"-"+a]:s[n+"-"+a]||s[a+"-"+n]},t.prototype.eachNode=function(n,a){for(var s=this.nodes,l=s.length,u=0;u<l;u++)s[u].dataIndex>=0&&n.call(a,s[u],u)},t.prototype.eachEdge=function(n,a){for(var s=this.edges,l=s.length,u=0;u<l;u++)s[u].dataIndex>=0&&s[u].node1.dataIndex>=0&&s[u].node2.dataIndex>=0&&n.call(a,s[u],u)},t.prototype.breadthFirstTraverse=function(n,a,s,l){if(a instanceof GraphNode||(a=this._nodesMap[generateNodeKey(a)]),!!a){for(var u=s==="out"?"outEdges":s==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!n.call(l,a,null))for(var d=[a];d.length;)for(var Ct=d.shift(),ar=Ct[u],c=0;c<ar.length;c++){var en=ar[c],tn=en.node1===Ct?en.node2:en.node1;if(!tn.__visited){if(n.call(l,tn,Ct))return;d.push(tn),tn.__visited=!0}}}},t.prototype.update=function(){for(var n=this.data,a=this.edgeData,s=this.nodes,l=this.edges,u=0,c=s.length;u<c;u++)s[u].dataIndex=-1;for(var u=0,c=n.count();u<c;u++)s[n.getRawIndex(u)].dataIndex=u;a.filterSelf(function(d){var Ct=l[a.getRawIndex(d)];return Ct.node1.dataIndex>=0&&Ct.node2.dataIndex>=0});for(var u=0,c=l.length;u<c;u++)l[u].dataIndex=-1;for(var u=0,c=a.count();u<c;u++)l[a.getRawIndex(u)].dataIndex=u},t.prototype.clone=function(){for(var n=new t(this._directed),a=this.nodes,s=this.edges,l=0;l<a.length;l++)n.addNode(a[l].id,a[l].dataIndex);for(var l=0;l<s.length;l++){var u=s[l];n.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return n},t})(),GraphNode=(function(){function t(n,a){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=n??"",this.dataIndex=a??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.data.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},a=0;a<this.edges.length;a++){var s=this.edges[a];s.dataIndex<0||(n.edge.push(s.dataIndex),n.node.push(s.node1.dataIndex,s.node2.dataIndex))}return n},t.prototype.getTrajectoryDataIndices=function(){for(var n=createHashMap(),a=createHashMap(),s=0;s<this.edges.length;s++){var l=this.edges[s];if(!(l.dataIndex<0)){n.set(l.dataIndex,!0);for(var u=[l.node1],c=[l.node2],d=0;d<u.length;){var Ct=u[d];d++,a.set(Ct.dataIndex,!0);for(var ar=0;ar<Ct.inEdges.length;ar++)n.set(Ct.inEdges[ar].dataIndex,!0),u.push(Ct.inEdges[ar].node1)}for(d=0;d<c.length;){var en=c[d];d++,a.set(en.dataIndex,!0);for(var ar=0;ar<en.outEdges.length;ar++)n.set(en.outEdges[ar].dataIndex,!0),c.push(en.outEdges[ar].node2)}}}return{edge:n.keys(),node:a.keys()}},t})(),GraphEdge=(function(){function t(n,a,s){this.dataIndex=-1,this.node1=n,this.node2=a,this.dataIndex=s??-1}return t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.edgeData.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var n=createHashMap(),a=createHashMap();n.set(this.dataIndex,!0);for(var s=[this.node1],l=[this.node2],u=0;u<s.length;){var c=s[u];u++,a.set(c.dataIndex,!0);for(var d=0;d<c.inEdges.length;d++)n.set(c.inEdges[d].dataIndex,!0),s.push(c.inEdges[d].node1)}for(u=0;u<l.length;){var Ct=l[u];u++,a.set(Ct.dataIndex,!0);for(var d=0;d<Ct.outEdges.length;d++)n.set(Ct.outEdges[d].dataIndex,!0),l.push(Ct.outEdges[d].node2)}return{edge:n.keys(),node:a.keys()}},t})();function createGraphDataProxyMixin(t,n){return{getValue:function(a){var s=this[t][n];return s.getStore().get(s.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,s){this.dataIndex>=0&&this[t][n].setItemVisual(this.dataIndex,a,s)},getVisual:function(a){return this[t][n].getItemVisual(this.dataIndex,a)},setLayout:function(a,s){this.dataIndex>=0&&this[t][n].setItemLayout(this.dataIndex,a,s)},getLayout:function(){return this[t][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][n].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(t,n,a,s,l){for(var u=new Graph(s),c=0;c<t.length;c++)u.addNode(retrieve(t[c].id,t[c].name,c),c);for(var d=[],Ct=[],ar=0,c=0;c<n.length;c++){var en=n[c],tn=en.source,on=en.target;u.addEdge(tn,on,ar)&&(Ct.push(en),d.push(retrieve(convertOptionIdName(en.id,null),tn+" > "+on)),ar++)}var fn=a.get("coordinateSystem"),dn;if(fn==="cartesian2d"||fn==="polar")dn=createSeriesData(t,a);else{var Cn=CoordinateSystemManager.get(fn),Rn=Cn?Cn.dimensions||[]:[];indexOf(Rn,"value")<0&&Rn.concat(["value"]);var ax=prepareSeriesDataSchema(t,{coordDimensions:Rn,encodeDefine:a.getEncode()}).dimensions;dn=new SeriesData(ax,a),dn.initData(t)}var ox=new SeriesData(["value"],a);return ox.initData(Ct,d),l&&l(dn,ox),linkSeriesData({mainData:dn,struct:u,structAttr:"graph",datas:{node:dn,edge:ox},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments);var s=this;function l(){return s._categoriesData}this.legendVisualProvider=new LegendVisualProvider(l,l),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(a){t.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(a,"edgeLabel",["show"])},n.prototype.getInitialData=function(a,s){var l=a.edges||a.links||[],u=a.data||a.nodes||[],c=this;if(u&&l){initCurvenessList(this);var d=createGraphFromNodeEdge(u,l,this,!0,Ct);return each$f(d.edges,function(ar){createEdgeMapForCurveness(ar.node1,ar.node2,this,ar.dataIndex)},this),d.data}function Ct(ar,en){ar.wrapMethod("getItemModel",function(dn){var Cn=c._categoriesModels,Rn=dn.getShallow("category"),ax=Cn[Rn];return ax&&(ax.parentModel=dn.parentModel,dn.parentModel=ax),dn});var tn=Model.prototype.getModel;function on(dn,Cn){var Rn=tn.call(this,dn,Cn);return Rn.resolveParentPath=fn,Rn}en.wrapMethod("getItemModel",function(dn){return dn.resolveParentPath=fn,dn.getModel=on,dn});function fn(dn){if(dn&&(dn[0]==="label"||dn[1]==="label")){var Cn=dn.slice();return dn[0]==="label"?Cn[0]="edgeLabel":dn[1]==="label"&&(Cn[1]="edgeLabel"),Cn}return dn}}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(a,s,l){if(l==="edge"){var u=this.getData(),c=this.getDataParams(a,l),d=u.graph.getEdgeByIndex(a),Ct=u.getName(d.node1.dataIndex),ar=u.getName(d.node2.dataIndex),en=[];return Ct!=null&&en.push(Ct),ar!=null&&en.push(ar),createTooltipMarkup("nameValue",{name:en.join(" > "),value:c.value,noValue:c.value==null})}var tn=defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s});return tn},n.prototype._updateCategoriesData=function(){var a=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),s=new SeriesData(["value"],this);s.initData(a),this._categoriesData=s,this._categoriesModels=s.mapArray(function(l){return s.getItemModel(l)})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n})(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(t){t.registerChartView(GraphView),t.registerSeriesModel(GraphSeriesModel),t.registerProcessor(categoryFilter),t.registerVisual(categoryVisual),t.registerVisual(graphEdgeVisual),t.registerLayout(graphSimpleLayout),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),t.registerLayout(graphForceLayout),t.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),t.registerAction(actionInfo$1,function(n,a,s){a.eachComponent({mainType:"series",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,s);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}var PointerShape=(function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t})(),PointerPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="pointer",s}return n.prototype.getDefaultShape=function(){return new PointerShape},n.prototype.buildPath=function(a,s){var l=Math.cos,u=Math.sin,c=s.r,d=s.width,Ct=s.angle,ar=s.x-l(Ct)*d*(d>=c/3?1:2),en=s.y-u(Ct)*d*(d>=c/3?1:2);Ct=s.angle-Math.PI/2,a.moveTo(ar,en),a.lineTo(s.x+l(Ct)*d,s.y+u(Ct)*d),a.lineTo(s.x+l(s.angle)*c,s.y+u(s.angle)*c),a.lineTo(s.x-l(Ct)*d,s.y-u(Ct)*d),a.lineTo(ar,en)},n})(Path);function parsePosition(t,n){var a=t.get("center"),s=n.getWidth(),l=n.getHeight(),u=Math.min(s,l),c=parsePercent(a[0],n.getWidth()),d=parsePercent(a[1],n.getHeight()),Ct=parsePercent(t.get("radius"),u/2);return{cx:c,cy:d,r:Ct}}function formatLabel(t,n){var a=t==null?"":t+"";return n&&(isString$1(n)?a=n.replace("{value}",a):isFunction$1(n)&&(a=n(t))),a}var GaugeView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this.group.removeAll();var u=a.get(["axisLine","lineStyle","color"]),c=parsePosition(a,l);this._renderMain(a,s,l,u,c),this._data=a.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(a,s,l,u,c){var d=this.group,Ct=a.get("clockwise"),ar=-a.get("startAngle")/180*Math.PI,en=-a.get("endAngle")/180*Math.PI,tn=a.getModel("axisLine"),on=tn.get("roundCap"),fn=on?SausagePath:Sector,dn=tn.get("show"),Cn=tn.getModel("lineStyle"),Rn=Cn.get("width"),ax=[ar,en];normalizeArcAngles(ax,!Ct),ar=ax[0],en=ax[1];for(var ox=en-ar,sx=ar,lx=[],cx=0;dn&&cx<u.length;cx++){var fx=Math.min(Math.max(u[cx][0],0),1);en=ar+ox*fx;var gx=new fn({shape:{startAngle:sx,endAngle:en,cx:c.cx,cy:c.cy,clockwise:Ct,r0:c.r-Rn,r:c.r},silent:!0});gx.setStyle({fill:u[cx][1]}),gx.setStyle(Cn.getLineStyle(["color","width"])),lx.push(gx),sx=en}lx.reverse(),each$f(lx,function(px){return d.add(px)});var mx=function(px){if(px<=0)return u[0][1];var hx;for(hx=0;hx<u.length;hx++)if(u[hx][0]>=px&&(hx===0?0:u[hx-1][0])<px)return u[hx][1];return u[hx-1][1]};this._renderTicks(a,s,l,mx,c,ar,en,Ct,Rn),this._renderTitleAndDetail(a,s,l,mx,c),this._renderAnchor(a,c),this._renderPointer(a,s,l,mx,c,ar,en,Ct,Rn)},n.prototype._renderTicks=function(a,s,l,u,c,d,Ct,ar,en){for(var tn=this.group,on=c.cx,fn=c.cy,dn=c.r,Cn=+a.get("min"),Rn=+a.get("max"),ax=a.getModel("splitLine"),ox=a.getModel("axisTick"),sx=a.getModel("axisLabel"),lx=a.get("splitNumber"),cx=ox.get("splitNumber"),fx=parsePercent(ax.get("length"),dn),gx=parsePercent(ox.get("length"),dn),mx=d,px=(Ct-d)/lx,hx=px/cx,vx=ax.getModel("lineStyle").getLineStyle(),yx=ox.getModel("lineStyle").getLineStyle(),Sx=ax.get("distance"),_x,Ex,bx=0;bx<=lx;bx++){if(_x=Math.cos(mx),Ex=Math.sin(mx),ax.get("show")){var Ax=Sx?Sx+en:en,Mx=new Line$1({shape:{x1:_x*(dn-Ax)+on,y1:Ex*(dn-Ax)+fn,x2:_x*(dn-fx-Ax)+on,y2:Ex*(dn-fx-Ax)+fn},style:vx,silent:!0});vx.stroke==="auto"&&Mx.setStyle({stroke:u(bx/lx)}),tn.add(Mx)}if(sx.get("show")){var Ax=sx.get("distance")+Sx,Rx=formatLabel(round$3(bx/lx*(Rn-Cn)+Cn),sx.get("formatter")),Cx=u(bx/lx),Lx=_x*(dn-fx-Ax)+on,qx=Ex*(dn-fx-Ax)+fn,Ix=sx.get("rotate"),Px=0;Ix==="radial"?(Px=-mx+2*Math.PI,Px>Math.PI/2&&(Px+=Math.PI)):Ix==="tangential"?Px=-mx-Math.PI/2:isNumber(Ix)&&(Px=Ix*Math.PI/180),Px===0?tn.add(new ZRText({style:createTextStyle$1(sx,{text:Rx,x:Lx,y:qx,verticalAlign:Ex<-.8?"top":Ex>.8?"bottom":"middle",align:_x<-.4?"left":_x>.4?"right":"center"},{inheritColor:Cx}),silent:!0})):tn.add(new ZRText({style:createTextStyle$1(sx,{text:Rx,x:Lx,y:qx,verticalAlign:"middle",align:"center"},{inheritColor:Cx}),silent:!0,originX:Lx,originY:qx,rotation:Px}))}if(ox.get("show")&&bx!==lx){var Ax=ox.get("distance");Ax=Ax?Ax+en:en;for(var Nx=0;Nx<=cx;Nx++){_x=Math.cos(mx),Ex=Math.sin(mx);var Bx=new Line$1({shape:{x1:_x*(dn-Ax)+on,y1:Ex*(dn-Ax)+fn,x2:_x*(dn-gx-Ax)+on,y2:Ex*(dn-gx-Ax)+fn},silent:!0,style:yx});yx.stroke==="auto"&&Bx.setStyle({stroke:u((bx+Nx/cx)/lx)}),tn.add(Bx),mx+=hx}mx-=hx}else mx+=px}},n.prototype._renderPointer=function(a,s,l,u,c,d,Ct,ar,en){var tn=this.group,on=this._data,fn=this._progressEls,dn=[],Cn=a.get(["pointer","show"]),Rn=a.getModel("progress"),ax=Rn.get("show"),ox=a.getData(),sx=ox.mapDimension("value"),lx=+a.get("min"),cx=+a.get("max"),fx=[lx,cx],gx=[d,Ct];function mx(hx,vx){var yx=ox.getItemModel(hx),Sx=yx.getModel("pointer"),_x=parsePercent(Sx.get("width"),c.r),Ex=parsePercent(Sx.get("length"),c.r),bx=a.get(["pointer","icon"]),Ax=Sx.get("offsetCenter"),Mx=parsePercent(Ax[0],c.r),Rx=parsePercent(Ax[1],c.r),Cx=Sx.get("keepAspect"),Lx;return bx?Lx=createSymbol$1(bx,Mx-_x/2,Rx-Ex,_x,Ex,null,Cx):Lx=new PointerPath({shape:{angle:-Math.PI/2,width:_x,r:Ex,x:Mx,y:Rx}}),Lx.rotation=-(vx+Math.PI/2),Lx.x=c.cx,Lx.y=c.cy,Lx}function px(hx,vx){var yx=Rn.get("roundCap"),Sx=yx?SausagePath:Sector,_x=Rn.get("overlap"),Ex=_x?Rn.get("width"):en/ox.count(),bx=_x?c.r-Ex:c.r-(hx+1)*Ex,Ax=_x?c.r:c.r-hx*Ex,Mx=new Sx({shape:{startAngle:d,endAngle:vx,cx:c.cx,cy:c.cy,clockwise:ar,r0:bx,r:Ax}});return _x&&(Mx.z2=linearMap$2(ox.get(sx,hx),[lx,cx],[100,0],!0)),Mx}(ax||Cn)&&(ox.diff(on).add(function(hx){var vx=ox.get(sx,hx);if(Cn){var yx=mx(hx,d);initProps(yx,{rotation:-((isNaN(+vx)?gx[0]:linearMap$2(vx,fx,gx,!0))+Math.PI/2)},a),tn.add(yx),ox.setItemGraphicEl(hx,yx)}if(ax){var Sx=px(hx,d),_x=Rn.get("clip");initProps(Sx,{shape:{endAngle:linearMap$2(vx,fx,gx,_x)}},a),tn.add(Sx),setCommonECData(a.seriesIndex,ox.dataType,hx,Sx),dn[hx]=Sx}}).update(function(hx,vx){var yx=ox.get(sx,hx);if(Cn){var Sx=on.getItemGraphicEl(vx),_x=Sx?Sx.rotation:d,Ex=mx(hx,_x);Ex.rotation=_x,updateProps$1(Ex,{rotation:-((isNaN(+yx)?gx[0]:linearMap$2(yx,fx,gx,!0))+Math.PI/2)},a),tn.add(Ex),ox.setItemGraphicEl(hx,Ex)}if(ax){var bx=fn[vx],Ax=bx?bx.shape.endAngle:d,Mx=px(hx,Ax),Rx=Rn.get("clip");updateProps$1(Mx,{shape:{endAngle:linearMap$2(yx,fx,gx,Rx)}},a),tn.add(Mx),setCommonECData(a.seriesIndex,ox.dataType,hx,Mx),dn[hx]=Mx}}).execute(),ox.each(function(hx){var vx=ox.getItemModel(hx),yx=vx.getModel("emphasis"),Sx=yx.get("focus"),_x=yx.get("blurScope"),Ex=yx.get("disabled");if(Cn){var bx=ox.getItemGraphicEl(hx),Ax=ox.getItemVisual(hx,"style"),Mx=Ax.fill;if(bx instanceof ZRImage){var Rx=bx.style;bx.useStyle(extend({image:Rx.image,x:Rx.x,y:Rx.y,width:Rx.width,height:Rx.height},Ax))}else bx.useStyle(Ax),bx.type!=="pointer"&&bx.setColor(Mx);bx.setStyle(vx.getModel(["pointer","itemStyle"]).getItemStyle()),bx.style.fill==="auto"&&bx.setStyle("fill",u(linearMap$2(ox.get(sx,hx),fx,[0,1],!0))),bx.z2EmphasisLift=0,setStatesStylesFromModel(bx,vx),toggleHoverEmphasis(bx,Sx,_x,Ex)}if(ax){var Cx=dn[hx];Cx.useStyle(ox.getItemVisual(hx,"style")),Cx.setStyle(vx.getModel(["progress","itemStyle"]).getItemStyle()),Cx.z2EmphasisLift=0,setStatesStylesFromModel(Cx,vx),toggleHoverEmphasis(Cx,Sx,_x,Ex)}}),this._progressEls=dn)},n.prototype._renderAnchor=function(a,s){var l=a.getModel("anchor"),u=l.get("show");if(u){var c=l.get("size"),d=l.get("icon"),Ct=l.get("offsetCenter"),ar=l.get("keepAspect"),en=createSymbol$1(d,s.cx-c/2+parsePercent(Ct[0],s.r),s.cy-c/2+parsePercent(Ct[1],s.r),c,c,null,ar);en.z2=l.get("showAbove")?1:0,en.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(en)}},n.prototype._renderTitleAndDetail=function(a,s,l,u,c){var d=this,Ct=a.getData(),ar=Ct.mapDimension("value"),en=+a.get("min"),tn=+a.get("max"),on=new Group$3,fn=[],dn=[],Cn=a.isAnimationEnabled(),Rn=a.get(["pointer","showAbove"]);Ct.diff(this._data).add(function(ax){fn[ax]=new ZRText({silent:!0}),dn[ax]=new ZRText({silent:!0})}).update(function(ax,ox){fn[ax]=d._titleEls[ox],dn[ax]=d._detailEls[ox]}).execute(),Ct.each(function(ax){var ox=Ct.getItemModel(ax),sx=Ct.get(ar,ax),lx=new Group$3,cx=u(linearMap$2(sx,[en,tn],[0,1],!0)),fx=ox.getModel("title");if(fx.get("show")){var gx=fx.get("offsetCenter"),mx=c.cx+parsePercent(gx[0],c.r),px=c.cy+parsePercent(gx[1],c.r),hx=fn[ax];hx.attr({z2:Rn?0:2,style:createTextStyle$1(fx,{x:mx,y:px,text:Ct.getName(ax),align:"center",verticalAlign:"middle"},{inheritColor:cx})}),lx.add(hx)}var vx=ox.getModel("detail");if(vx.get("show")){var yx=vx.get("offsetCenter"),Sx=c.cx+parsePercent(yx[0],c.r),_x=c.cy+parsePercent(yx[1],c.r),Ex=parsePercent(vx.get("width"),c.r),bx=parsePercent(vx.get("height"),c.r),Ax=a.get(["progress","show"])?Ct.getItemVisual(ax,"style").fill:cx,hx=dn[ax],Mx=vx.get("formatter");hx.attr({z2:Rn?0:2,style:createTextStyle$1(vx,{x:Sx,y:_x,text:formatLabel(sx,Mx),width:isNaN(Ex)?null:Ex,height:isNaN(bx)?null:bx,align:"center",verticalAlign:"middle"},{inheritColor:Ax})}),setLabelValueAnimation(hx,{normal:vx},sx,function(Cx){return formatLabel(Cx,Mx)}),Cn&&animateLabelValue(hx,ax,Ct,a,{getFormattedLabel:function(Cx,Lx,qx,Ix,Px,Nx){return formatLabel(Nx?Nx.interpolatedValue:sx,Mx)}}),lx.add(hx)}on.add(lx)}),this.group.add(on),this._titleEls=fn,this._detailEls=dn},n.type="gauge",n})(ChartView),GaugeSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="itemStyle",a}return n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n})(SeriesModel);function install$E(t){t.registerChartView(GaugeView),t.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=(function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this,u=l,c=new Polyline$1,d=new ZRText;return u.setTextContent(d),l.setTextGuideLine(c),l.updateData(a,s,!0),l}return n.prototype.updateData=function(a,s,l){var u=this,c=a.hostModel,d=a.getItemModel(s),Ct=a.getItemLayout(s),ar=d.getModel("emphasis"),en=d.get(opacityAccessPath$1);en=en??1,l||saveOldStyle(u),u.useStyle(a.getItemVisual(s,"style")),u.style.lineJoin="round",l?(u.setShape({points:Ct.points}),u.style.opacity=0,initProps(u,{style:{opacity:en}},c,s)):updateProps$1(u,{style:{opacity:en},shape:{points:Ct.points}},c,s),setStatesStylesFromModel(u,d),this._updateLabel(a,s),toggleHoverEmphasis(this,ar.get("focus"),ar.get("blurScope"),ar.get("disabled"))},n.prototype._updateLabel=function(a,s){var l=this,u=this.getTextGuideLine(),c=l.getTextContent(),d=a.hostModel,Ct=a.getItemModel(s),ar=a.getItemLayout(s),en=ar.label,tn=a.getItemVisual(s,"style"),on=tn.fill;setLabelStyle(c,getLabelStatesModels(Ct),{labelFetcher:a.hostModel,labelDataIndex:s,defaultOpacity:tn.opacity,defaultText:a.getName(s)},{normal:{align:en.textAlign,verticalAlign:en.verticalAlign}}),l.setTextConfig({local:!0,inside:!!en.inside,insideStroke:on,outsideFill:on});var fn=en.linePoints;u.setShape({points:fn}),l.textGuideLineConfig={anchor:fn?new Point(fn[0][0],fn[0][1]):null},updateProps$1(c,{style:{x:en.x,y:en.y}},d,s),c.attr({rotation:en.rotation,originX:en.x,originY:en.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(Ct),{stroke:on})},n})(Polygon),FunnelView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._data,d=this.group;u.diff(c).add(function(Ct){var ar=new FunnelPiece(u,Ct);u.setItemGraphicEl(Ct,ar),d.add(ar)}).update(function(Ct,ar){var en=c.getItemGraphicEl(ar);en.updateData(u,Ct),d.add(en),u.setItemGraphicEl(Ct,en)}).remove(function(Ct){var ar=c.getItemGraphicEl(Ct);removeElementWithFadeOut(ar,a,Ct)}).execute(),this._data=u},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n})(ChartView),FunnelSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,l=a.emphasis.labelLine;s.show=s.show&&a.label.show,l.show=l.show&&a.emphasis.label.show},n.prototype.getDataParams=function(a){var s=this.getData(),l=t.prototype.getDataParams.call(this,a),u=s.mapDimension("value"),c=s.getSum(u);return l.percent=c?+(s.get(u,a)/c*100).toFixed(2):0,l.$vars.push("percent"),l},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n})(SeriesModel);function getViewRect$2(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getSortedIndices(t,n){for(var a=t.mapDimension("value"),s=t.mapArray(a,function(Ct){return Ct}),l=[],u=n==="ascending",c=0,d=t.count();c<d;c++)l[c]=c;return isFunction$1(n)?l.sort(n):n!=="none"&&l.sort(function(Ct,ar){return u?s[Ct]-s[ar]:s[ar]-s[Ct]}),l}function labelLayout(t){var n=t.hostModel,a=n.get("orient");t.each(function(s){var l=t.getItemModel(s),u=l.getModel("label"),c=u.get("position"),d=l.getModel("labelLine"),Ct=t.getItemLayout(s),ar=Ct.points,en=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",tn,on,fn,dn;if(en)c==="insideLeft"?(on=(ar[0][0]+ar[3][0])/2+5,fn=(ar[0][1]+ar[3][1])/2,tn="left"):c==="insideRight"?(on=(ar[1][0]+ar[2][0])/2-5,fn=(ar[1][1]+ar[2][1])/2,tn="right"):(on=(ar[0][0]+ar[1][0]+ar[2][0]+ar[3][0])/4,fn=(ar[0][1]+ar[1][1]+ar[2][1]+ar[3][1])/4,tn="center"),dn=[[on,fn],[on,fn]];else{var Cn=void 0,Rn=void 0,ax=void 0,ox=void 0,sx=d.get("length");c==="left"?(Cn=(ar[3][0]+ar[0][0])/2,Rn=(ar[3][1]+ar[0][1])/2,ax=Cn-sx,on=ax-5,tn="right"):c==="right"?(Cn=(ar[1][0]+ar[2][0])/2,Rn=(ar[1][1]+ar[2][1])/2,ax=Cn+sx,on=ax+5,tn="left"):c==="top"?(Cn=(ar[3][0]+ar[0][0])/2,Rn=(ar[3][1]+ar[0][1])/2,ox=Rn-sx,fn=ox-5,tn="center"):c==="bottom"?(Cn=(ar[1][0]+ar[2][0])/2,Rn=(ar[1][1]+ar[2][1])/2,ox=Rn+sx,fn=ox+5,tn="center"):c==="rightTop"?(Cn=a==="horizontal"?ar[3][0]:ar[1][0],Rn=a==="horizontal"?ar[3][1]:ar[1][1],a==="horizontal"?(ox=Rn-sx,fn=ox-5,tn="center"):(ax=Cn+sx,on=ax+5,tn="top")):c==="rightBottom"?(Cn=ar[2][0],Rn=ar[2][1],a==="horizontal"?(ox=Rn+sx,fn=ox+5,tn="center"):(ax=Cn+sx,on=ax+5,tn="bottom")):c==="leftTop"?(Cn=ar[0][0],Rn=a==="horizontal"?ar[0][1]:ar[1][1],a==="horizontal"?(ox=Rn-sx,fn=ox-5,tn="center"):(ax=Cn-sx,on=ax-5,tn="right")):c==="leftBottom"?(Cn=a==="horizontal"?ar[1][0]:ar[3][0],Rn=a==="horizontal"?ar[1][1]:ar[2][1],a==="horizontal"?(ox=Rn+sx,fn=ox+5,tn="center"):(ax=Cn-sx,on=ax-5,tn="right")):(Cn=(ar[1][0]+ar[2][0])/2,Rn=(ar[1][1]+ar[2][1])/2,a==="horizontal"?(ox=Rn+sx,fn=ox+5,tn="center"):(ax=Cn+sx,on=ax+5,tn="left")),a==="horizontal"?(ax=Cn,on=ax):(ox=Rn,fn=ox),dn=[[Cn,Rn],[ax,ox]]}Ct.label={linePoints:dn,x:on,y:fn,verticalAlign:"middle",textAlign:tn,inside:en}})}function funnelLayout(t,n){t.eachSeriesByType("funnel",function(a){var s=a.getData(),l=s.mapDimension("value"),u=a.get("sort"),c=getViewRect$2(a,n),d=a.get("orient"),Ct=c.width,ar=c.height,en=getSortedIndices(s,u),tn=c.x,on=c.y,fn=d==="horizontal"?[parsePercent(a.get("minSize"),ar),parsePercent(a.get("maxSize"),ar)]:[parsePercent(a.get("minSize"),Ct),parsePercent(a.get("maxSize"),Ct)],dn=s.getDataExtent(l),Cn=a.get("min"),Rn=a.get("max");Cn==null&&(Cn=Math.min(dn[0],0)),Rn==null&&(Rn=dn[1]);var ax=a.get("funnelAlign"),ox=a.get("gap"),sx=d==="horizontal"?Ct:ar,lx=(sx-ox*(s.count()-1))/s.count(),cx=function(_x,Ex){if(d==="horizontal"){var bx=s.get(l,_x)||0,Ax=linearMap$2(bx,[Cn,Rn],fn,!0),Mx=void 0;switch(ax){case"top":Mx=on;break;case"center":Mx=on+(ar-Ax)/2;break;case"bottom":Mx=on+(ar-Ax);break}return[[Ex,Mx],[Ex,Mx+Ax]]}var Rx=s.get(l,_x)||0,Cx=linearMap$2(Rx,[Cn,Rn],fn,!0),Lx;switch(ax){case"left":Lx=tn;break;case"center":Lx=tn+(Ct-Cx)/2;break;case"right":Lx=tn+Ct-Cx;break}return[[Lx,Ex],[Lx+Cx,Ex]]};u==="ascending"&&(lx=-lx,ox=-ox,d==="horizontal"?tn+=Ct:on+=ar,en=en.reverse());for(var fx=0;fx<en.length;fx++){var gx=en[fx],mx=en[fx+1],px=s.getItemModel(gx);if(d==="horizontal"){var hx=px.get(["itemStyle","width"]);hx==null?hx=lx:(hx=parsePercent(hx,Ct),u==="ascending"&&(hx=-hx));var vx=cx(gx,tn),yx=cx(mx,tn+hx);tn+=hx+ox,s.setItemLayout(gx,{points:vx.concat(yx.slice().reverse())})}else{var Sx=px.get(["itemStyle","height"]);Sx==null?Sx=lx:(Sx=parsePercent(Sx,ar),u==="ascending"&&(Sx=-Sx));var vx=cx(gx,on),yx=cx(mx,on+Sx);on+=Sx+ox,s.setItemLayout(gx,{points:vx.concat(yx.slice().reverse())})}}labelLayout(s)})}function install$D(t){t.registerChartView(FunnelView),t.registerSeriesModel(FunnelSeriesModel),t.registerLayout(funnelLayout),t.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._dataGroup=new Group$3,a._initialized=!1,a}return n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(a,s,l,u){this._progressiveEls=null;var c=this._dataGroup,d=a.getData(),Ct=this._data,ar=a.coordinateSystem,en=ar.dimensions,tn=makeSeriesScope(a);d.diff(Ct).add(on).update(fn).remove(dn).execute();function on(Rn){var ax=addEl(d,c,Rn,en,ar);updateElCommon(ax,d,Rn,tn)}function fn(Rn,ax){var ox=Ct.getItemGraphicEl(ax),sx=createLinePoints(d,Rn,en,ar);d.setItemGraphicEl(Rn,ox),updateProps$1(ox,{shape:{points:sx}},a,Rn),saveOldStyle(ox),updateElCommon(ox,d,Rn,tn)}function dn(Rn){var ax=Ct.getItemGraphicEl(Rn);c.remove(ax)}if(!this._initialized){this._initialized=!0;var Cn=createGridClipShape$2(ar,a,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(Cn)}this._data=d},n.prototype.incrementalPrepareRender=function(a,s,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(a,s,l){for(var u=s.getData(),c=s.coordinateSystem,d=c.dimensions,Ct=makeSeriesScope(s),ar=this._progressiveEls=[],en=a.start;en<a.end;en++){var tn=addEl(u,this._dataGroup,en,d,c);tn.incremental=!0,updateElCommon(tn,u,en,Ct),ar.push(tn)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n})(ChartView);function createGridClipShape$2(t,n,a){var s=t.model,l=t.getRect(),u=new Rect$2({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),c=s.get("layout")==="horizontal"?"width":"height";return u.setShape(c,0),initProps(u,{shape:{width:l.width,height:l.height}},n,a),u}function createLinePoints(t,n,a,s){for(var l=[],u=0;u<a.length;u++){var c=a[u],d=t.get(t.mapDimension(c),n);isEmptyValue(d,s.getAxis(c).type)||l.push(s.dataToPoint(d,c))}return l}function addEl(t,n,a,s,l){var u=createLinePoints(t,a,s,l),c=new Polyline$1({shape:{points:u},z2:10});return n.add(c),t.setItemGraphicEl(a,c),c}function makeSeriesScope(t){var n=t.get("smooth",!0);return n===!0&&(n=DEFAULT_SMOOTH),n=numericToNumber(n),eqNaN(n)&&(n=0),{smooth:n}}function updateElCommon(t,n,a,s){t.useStyle(n.getItemVisual(a,"style")),t.style.fill=null,t.setShape("smooth",s.smooth);var l=n.getItemModel(a),u=l.getModel("emphasis");setStatesStylesFromModel(t,l,"lineStyle"),toggleHoverEmphasis(t,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue(t,n){return n==="category"?t==null:t==null||isNaN(t)}var ParallelSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},n.prototype.getRawIndicesByActiveState=function(a){var s=this.coordinateSystem,l=this.getData(),u=[];return s.eachActiveState(l,function(c,d){a===c&&u.push(l.getRawIndex(d))}),u},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n})(SeriesModel);function makeDefaultEncode(t){var n=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(n){var a={};return each$f(n.dimensions,function(s){var l=convertDimNameToNumber(s);a[s]=l}),a}}function convertDimNameToNumber(t){return+t.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(t,n){var a=t.coordinateSystem,s={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(l,u){a.eachActiveState(u,function(c,d){var Ct=s[c];if(c==="normal"&&u.hasItemOption){var ar=u.getItemModel(d).get(opacityAccessPath,!0);ar!=null&&(Ct=ar)}var en=u.ensureUniqueItemVisual(d,"style");en.opacity=Ct},l.start,l.end)}}}};function parallelPreprocessor(t){createParallelIfNeeded(t),mergeAxisOptionFromParallel(t)}function createParallelIfNeeded(t){if(!t.parallel){var n=!1;each$f(t.series,function(a){a&&a.type==="parallel"&&(n=!0)}),n&&(t.parallel=[{}])}}function mergeAxisOptionFromParallel(t){var n=normalizeToArray(t.parallelAxis);each$f(n,function(a){if(isObject$3(a)){var s=a.parallelIndex||0,l=normalizeToArray(t.parallel)[s];l&&l.parallelAxisDefault&&merge(a,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this._model=a,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(u,c){l.getZr().on(c,this._handlers[c]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(a,s){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,u){s.getZr().off(u,l)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},n.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},a))},n.type="parallel",n})(ComponentView),handlers$1={mousedown:function(t){checkTrigger(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var n=this._mouseDownPoint;if(checkTrigger(this,"click")&&n){var a=[t.offsetX,t.offsetY],s=Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2);if(s>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var n=this._model,a=n.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),s=a.behavior;s==="jump"&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand(s==="none"?null:{axisExpandWindow:a.axisExpandWindow,animation:s==="jump"?null:{duration:0}})}}};function checkTrigger(t,n){var a=t._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===n}var ParallelModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(a){var s=this.option;a&&merge(s,a,!0),this._initDimensions()},n.prototype.contains=function(a,s){var l=a.get("parallelIndex");return l!=null&&s.getComponent("parallel",l)===this},n.prototype.setAxisExpand=function(a){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(s){a.hasOwnProperty(s)&&(this.option[s]=a[s])},this)},n.prototype._initDimensions=function(){var a=this.dimensions=[],s=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(u){a.push("dim"+u.get("dim")),s.push(u.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n})(ComponentModel),ParallelAxis=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,a,s,l)||this;return d.type=u||"value",d.axisIndex=c,d}return n.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},n})(Axis);function sliderMove(t,n,a,s,l,u){t=t||0;var c=a[1]-a[0];if(l!=null&&(l=restrict$1(l,[0,c])),u!=null&&(u=Math.max(u,l??0)),s==="all"){var d=Math.abs(n[1]-n[0]);d=restrict$1(d,[0,c]),l=u=restrict$1(d,[l,u]),s=0}n[0]=restrict$1(n[0],a),n[1]=restrict$1(n[1],a);var Ct=getSpanSign(n,s);n[s]+=t;var ar=l||0,en=a.slice();Ct.sign<0?en[0]+=ar:en[1]-=ar,n[s]=restrict$1(n[s],en);var tn;return tn=getSpanSign(n,s),l!=null&&(tn.sign!==Ct.sign||tn.span<l)&&(n[1-s]=n[s]+Ct.sign*l),tn=getSpanSign(n,s),u!=null&&tn.span>u&&(n[1-s]=n[s]+tn.sign*u),n}function getSpanSign(t,n){var a=t[n]-t[1-n];return{span:Math.abs(a),sign:a>0?-1:a<0?1:n?-1:1}}function restrict$1(t,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,t))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=(function(){function t(n,a,s){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,a,s)}return t.prototype._init=function(n,a,s){var l=n.dimensions,u=n.parallelAxisIndex;each$a(l,function(c,d){var Ct=u[d],ar=a.getComponent("parallelAxis",Ct),en=this._axesMap.set(c,new ParallelAxis(c,createScaleByModel$1(ar),[0,0],ar.get("type"),Ct)),tn=en.type==="category";en.onBand=tn&&ar.get("boundaryGap"),en.inverse=ar.get("inverse"),ar.axis=en,en.model=ar,en.coordinateSystem=ar.coordinateSystem=this},this)},t.prototype.update=function(n,a){this._updateAxesFromSeries(this._model,n)},t.prototype.containPoint=function(n){var a=this._makeLayoutInfo(),s=a.axisBase,l=a.layoutBase,u=a.pixelDimIndex,c=n[1-u],d=n[u];return c>=s&&c<=s+a.axisLength&&d>=l&&d<=l+a.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(n,a){a.eachSeries(function(s){if(n.contains(s,a)){var l=s.getData();each$a(this.dimensions,function(u){var c=this._axesMap.get(u);c.scale.unionExtentFromData(l,l.mapDimension(u)),niceScaleExtent(c.scale,c.model)},this)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var n=this._model,a=this._rect,s=["x","y"],l=["width","height"],u=n.get("layout"),c=u==="horizontal"?0:1,d=a[l[c]],Ct=[0,d],ar=this.dimensions.length,en=restrict(n.get("axisExpandWidth"),Ct),tn=restrict(n.get("axisExpandCount")||0,[0,ar]),on=n.get("axisExpandable")&&ar>3&&ar>tn&&tn>1&&en>0&&d>0,fn=n.get("axisExpandWindow"),dn;if(fn)dn=restrict(fn[1]-fn[0],Ct),fn[1]=fn[0]+dn;else{dn=restrict(en*(tn-1),Ct);var Cn=n.get("axisExpandCenter")||mathFloor(ar/2);fn=[en*Cn-dn/2],fn[1]=fn[0]+dn}var Rn=(d-dn)/(ar-tn);Rn<3&&(Rn=0);var ax=[mathFloor(round(fn[0]/en,1))+1,mathCeil(round(fn[1]/en,1))-1],ox=Rn/en*fn[0];return{layout:u,pixelDimIndex:c,layoutBase:a[s[c]],layoutLength:d,axisBase:a[s[1-c]],axisLength:a[l[1-c]],axisExpandable:on,axisExpandWidth:en,axisCollapseWidth:Rn,axisExpandWindow:fn,axisCount:ar,winInnerIndices:ax,axisExpandWindow0Pos:ox}},t.prototype._layoutAxes=function(){var n=this._rect,a=this._axesMap,s=this.dimensions,l=this._makeLayoutInfo(),u=l.layout;a.each(function(c){var d=[0,l.axisLength],Ct=c.inverse?1:0;c.setExtent(d[Ct],d[1-Ct])}),each$a(s,function(c,d){var Ct=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(d,l),ar={horizontal:{x:Ct.position,y:l.axisLength},vertical:{x:0,y:Ct.position}},en={horizontal:PI$1/2,vertical:0},tn=[ar[u].x+n.x,ar[u].y+n.y],on=en[u],fn=create$1();rotate(fn,fn,on),translate(fn,fn,tn),this._axesLayout[c]={position:tn,rotation:on,transform:fn,axisNameAvailableWidth:Ct.axisNameAvailableWidth,axisLabelShow:Ct.axisLabelShow,nameTruncateMaxWidth:Ct.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(n){return this._axesMap.get(n)},t.prototype.dataToPoint=function(n,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(n),a)},t.prototype.eachActiveState=function(n,a,s,l){s==null&&(s=0),l==null&&(l=n.count());var u=this._axesMap,c=this.dimensions,d=[],Ct=[];each$f(c,function(Rn){d.push(n.mapDimension(Rn)),Ct.push(u.get(Rn).model)});for(var ar=this.hasAxisBrushed(),en=s;en<l;en++){var tn=void 0;if(!ar)tn="normal";else{tn="active";for(var on=n.getValues(d,en),fn=0,dn=c.length;fn<dn;fn++){var Cn=Ct[fn].getActiveState(on[fn]);if(Cn==="inactive"){tn="inactive";break}}}a(tn,en)}},t.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,a=this._axesMap,s=!1,l=0,u=n.length;l<u;l++)a.get(n[l]).model.getActiveState()!=="normal"&&(s=!0);return s},t.prototype.axisCoordToPoint=function(n,a){var s=this._axesLayout[a];return applyTransform([n,0],s.transform)},t.prototype.getAxisLayout=function(n){return clone$4(this._axesLayout[n])},t.prototype.getSlidedAxisExpandWindow=function(n){var a=this._makeLayoutInfo(),s=a.pixelDimIndex,l=a.axisExpandWindow.slice(),u=l[1]-l[0],c=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:l};var d=n[s]-a.layoutBase-a.axisExpandWindow0Pos,Ct,ar="slide",en=a.axisCollapseWidth,tn=this._model.get("axisExpandSlideTriggerArea"),on=tn[0]!=null;if(en)on&&en&&d<u*tn[0]?(ar="jump",Ct=d-u*tn[2]):on&&en&&d>u*(1-tn[0])?(ar="jump",Ct=d-u*(1-tn[2])):(Ct=d-u*tn[1])>=0&&(Ct=d-u*(1-tn[1]))<=0&&(Ct=0),Ct*=a.axisExpandWidth/en,Ct?sliderMove(Ct,l,c,"all"):ar="none";else{var fn=l[1]-l[0],dn=c[1]*d/fn;l=[mathMax$2(0,dn-fn/2)],l[1]=mathMin$2(c[1],l[0]+fn),l[0]=l[1]-fn}return{axisExpandWindow:l,behavior:ar}},t})();function restrict(t,n){return mathMin$2(mathMax$2(t,n[0]),n[1])}function layoutAxisWithoutExpand(t,n){var a=n.layoutLength/(n.axisCount-1);return{position:a*t,axisNameAvailableWidth:a,axisLabelShow:!0}}function layoutAxisWithExpand(t,n){var a=n.layoutLength,s=n.axisExpandWidth,l=n.axisCount,u=n.axisCollapseWidth,c=n.winInnerIndices,d,Ct=u,ar=!1,en;return t<c[0]?(d=t*u,en=u):t<=c[1]?(d=n.axisExpandWindow0Pos+t*s-n.axisExpandWindow[0],Ct=s,ar=!0):(d=a-(l-1-t)*u,en=u),{position:d,axisNameAvailableWidth:Ct,axisLabelShow:ar,nameTruncateMaxWidth:en}}function createParallelCoordSys(t,n){var a=[];return t.eachComponent("parallel",function(s,l){var u=new Parallel(s,t,n);u.name="parallel_"+l,u.resize(s,n),s.coordinateSystem=u,u.model=s,a.push(u)}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="parallel"){var l=s.getReferringComponents("parallel",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),a}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.activeIntervals=[],a}return n.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(a){var s=this.activeIntervals=clone$4(a);if(s)for(var l=s.length-1;l>=0;l--)asc$2(s[l])},n.prototype.getActiveState=function(a){var s=this.activeIntervals;if(!s.length)return"normal";if(a==null||isNaN(+a))return"inactive";if(s.length===1){var l=s[0];if(l[0]<=a&&a<=l[1])return"active"}else for(var u=0,c=s.length;u<c;u++)if(s[u][0]<=a&&a<=s[u][1])return"active";return"inactive"},n})(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=(function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s._track=[],s._covers=[],s._handlers={},s._zr=a,s.group=new Group$3,s._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,u){this._handlers[u]=bind$1(l,this)},s),s}return n.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},n.prototype._doEnableBrush=function(a){var s=this._zr;this._enableGlobalPan||take(s,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,u){s.on(u,l)}),this._brushType=a.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),a,!0)},n.prototype._doDisableBrush=function(){var a=this._zr;release(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,l){a.off(l,s)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(a){if(a&&a.length){var s=this._panels={};each$f(a,function(l){s[l.panelId]=clone$4(l)})}else this._panels=null;return this},n.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var s=this.group;return this._zr.add(s),s.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=s.getLocalTransform(),this},n.prototype.updateCovers=function(a){a=map$1(a,function(on){return merge(clone$4(DEFAULT_BRUSH_OPT),on,!0)});var s="\0-brush-index-",l=this._covers,u=this._covers=[],c=this,d=this._creatingCover;return new DataDiffer(l,a,ar,Ct).add(en).update(en).remove(tn).execute(),this;function Ct(on,fn){return(on.id!=null?on.id:s+fn)+"-"+on.brushType}function ar(on,fn){return Ct(on.__brushOption,fn)}function en(on,fn){var dn=a[on];if(fn!=null&&l[fn]===d)u[on]=l[fn];else{var Cn=u[on]=fn!=null?(l[fn].__brushOption=dn,l[fn]):endCreating(c,createCover(c,dn));updateCoverAfterCreation(c,Cn)}}function tn(on){l[on]!==d&&c.group.remove(l[on])}},n.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n})(Eventful);function createCover(t,n){var a=coverRenderers[n.brushType].createCover(t,n);return a.__brushOption=n,updateZ$1(a,n),t.group.add(a),a}function endCreating(t,n){var a=getCoverRenderer(n);return a.endCreating&&(a.endCreating(t,n),updateZ$1(n,n.__brushOption)),n}function updateCoverShape(t,n){var a=n.__brushOption;getCoverRenderer(n).updateCoverShape(t,n,a.range,a)}function updateZ$1(t,n){var a=n.z;a==null&&(a=COVER_Z),t.traverse(function(s){s.z=a,s.z2=a})}function updateCoverAfterCreation(t,n){getCoverRenderer(n).updateCommon(t,n),updateCoverShape(t,n)}function getCoverRenderer(t){return coverRenderers[t.__brushOption.brushType]}function getPanelByPoint(t,n,a){var s=t._panels;if(!s)return BRUSH_PANEL_GLOBAL;var l,u=t._transform;return each$f(s,function(c){c.isTargetByCursor(n,a,u)&&(l=c)}),l}function getPanelByCover(t,n){var a=t._panels;if(!a)return BRUSH_PANEL_GLOBAL;var s=n.__brushOption.panelId;return s!=null?a[s]:BRUSH_PANEL_GLOBAL}function clearCovers(t){var n=t._covers,a=n.length;return each$f(n,function(s){t.group.remove(s)},t),n.length=0,!!a}function trigger(t,n){var a=map$1(t._covers,function(s){var l=s.__brushOption,u=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:u}});t.trigger("brush",{areas:a,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function shouldShowCover(t){var n=t._track;if(!n.length)return!1;var a=n[n.length-1],s=n[0],l=a[0]-s[0],u=a[1]-s[1],c=mathPow(l*l+u*u,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(t){var n=t.length-1;return n<0&&(n=0),[t[0],t[n]]}function createBaseRectCover(t,n,a,s){var l=new Group$3;return l.add(new Rect$2({name:"main",style:makeStyle(a),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,t,n,l,["n","s","w","e"]),ondragend:curry$1(trigger,n,{isEnd:!0})})),each$f(s,function(u){l.add(new Rect$2({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,t,n,l,u),ondragend:curry$1(trigger,n,{isEnd:!0})}))}),l}function updateBaseRect(t,n,a,s){var l=s.brushStyle.lineWidth||0,u=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),c=a[0][0],d=a[1][0],Ct=c-l/2,ar=d-l/2,en=a[0][1],tn=a[1][1],on=en-u+l/2,fn=tn-u+l/2,dn=en-c,Cn=tn-d,Rn=dn+l,ax=Cn+l;updateRectShape(t,n,"main",c,d,dn,Cn),s.transformable&&(updateRectShape(t,n,"w",Ct,ar,u,ax),updateRectShape(t,n,"e",on,ar,u,ax),updateRectShape(t,n,"n",Ct,ar,Rn,u),updateRectShape(t,n,"s",Ct,fn,Rn,u),updateRectShape(t,n,"nw",Ct,ar,u,u),updateRectShape(t,n,"ne",on,ar,u,u),updateRectShape(t,n,"sw",Ct,fn,u,u),updateRectShape(t,n,"se",on,fn,u,u))}function updateCommon$1(t,n){var a=n.__brushOption,s=a.transformable,l=n.childAt(0);l.useStyle(makeStyle(a)),l.attr({silent:!s,cursor:s?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var c=n.childOfName(u.join("")),d=u.length===1?getGlobalDirection1(t,u[0]):getGlobalDirection2(t,u);c&&c.attr({silent:!s,invisible:!s,cursor:s?CURSOR_MAP[d]+"-resize":null})})}function updateRectShape(t,n,a,s,l,u,c){var d=n.childOfName(a);d&&d.setShape(pointsToRect(clipByPanel(t,n,[[s,l],[s+u,l+c]])))}function makeStyle(t){return defaults({strokeNoScale:!0},t.brushStyle)}function formatRectRange(t,n,a,s){var l=[mathMin$1(t,a),mathMin$1(n,s)],u=[mathMax$1(t,a),mathMax$1(n,s)];return[[l[0],u[0]],[l[1],u[1]]]}function getTransform(t){return getTransform$1(t.group)}function getGlobalDirection1(t,n){var a={w:"left",e:"right",n:"top",s:"bottom"},s={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(a[n],getTransform(t));return s[l]}function getGlobalDirection2(t,n){var a=[getGlobalDirection1(t,n[0]),getGlobalDirection1(t,n[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function driftRect(t,n,a,s,l,u){var c=a.__brushOption,d=t.toRectRange(c.range),Ct=toLocalDelta(n,l,u);each$f(s,function(ar){var en=DIRECTION_MAP[ar];d[en[0]][en[1]]+=Ct[en[0]]}),c.range=t.fromRectRange(formatRectRange(d[0][0],d[1][0],d[0][1],d[1][1])),updateCoverAfterCreation(n,a),trigger(n,{isEnd:!1})}function driftPolygon(t,n,a,s){var l=n.__brushOption.range,u=toLocalDelta(t,a,s);each$f(l,function(c){c[0]+=u[0],c[1]+=u[1]}),updateCoverAfterCreation(t,n),trigger(t,{isEnd:!1})}function toLocalDelta(t,n,a){var s=t.group,l=s.transformCoordToLocal(n,a),u=s.transformCoordToLocal(0,0);return[l[0]-u[0],l[1]-u[1]]}function clipByPanel(t,n,a){var s=getPanelByCover(t,n);return s&&s!==BRUSH_PANEL_GLOBAL?s.clipPath(a,t._transform):clone$4(a)}function pointsToRect(t){var n=mathMin$1(t[0][0],t[1][0]),a=mathMin$1(t[0][1],t[1][1]),s=mathMax$1(t[0][0],t[1][0]),l=mathMax$1(t[0][1],t[1][1]);return{x:n,y:a,width:s-n,height:l-a}}function resetCursor(t,n,a){if(!(!t._brushType||isOutsideZrArea(t,n.offsetX,n.offsetY))){var s=t._zr,l=t._covers,u=getPanelByPoint(t,n,a);if(!t._dragging)for(var c=0;c<l.length;c++){var d=l[c].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||d.panelId===u.panelId)&&coverRenderers[d.brushType].contain(l[c],a[0],a[1]))return}u&&s.setCursorStyle("crosshair")}}function preventDefault(t){var n=t.event;n.preventDefault&&n.preventDefault()}function mainShapeContain(t,n,a){return t.childOfName("main").contain(n,a)}function updateCoverByMouse(t,n,a,s){var l=t._creatingCover,u=t._creatingPanel,c=t._brushOption,d;if(t._track.push(a.slice()),shouldShowCover(t)||l){if(u&&!l){c.brushMode==="single"&&clearCovers(t);var Ct=clone$4(c);Ct.brushType=determineBrushType(Ct.brushType,u),Ct.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,l=t._creatingCover=createCover(t,Ct),t._covers.push(l)}if(l){var ar=coverRenderers[determineBrushType(t._brushType,u)],en=l.__brushOption;en.range=ar.getCreatingRange(clipByPanel(t,l,t._track)),s&&(endCreating(t,l),ar.updateCommon(t,l)),updateCoverShape(t,l),d={isEnd:s}}}else s&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(t,n,a)&&clearCovers(t)&&(d={isEnd:s,removeOnClick:!0});return d}function determineBrushType(t,n){return t==="auto"?n.defaultBrushType:t}var pointerHandlers={mousedown:function(t){if(this._dragging)handleDragEnd(this,t);else if(!t.target||!t.target.draggable){preventDefault(t);var n=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=getPanelByPoint(this,t,n);a&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(t){var n=t.offsetX,a=t.offsetY,s=this.group.transformCoordToLocal(n,a);if(resetCursor(this,t,s),this._dragging){preventDefault(t);var l=updateCoverByMouse(this,t,s,!1);l&&trigger(this,l)}},mouseup:function(t){handleDragEnd(this,t)}};function handleDragEnd(t,n){if(t._dragging){preventDefault(n);var a=n.offsetX,s=n.offsetY,l=t.group.transformCoordToLocal(a,s),u=updateCoverByMouse(t,n,l,!0);t._dragging=!1,t._track=[],t._creatingCover=null,u&&trigger(t,u)}}function isOutsideZrArea(t,n,a){var s=t._zr;return n<0||n>s.getWidth()||a<0||a>s.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(t,n){function a(s){return s}return createBaseRectCover({toRectRange:a,fromRectRange:a},t,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var n=getTrackEnds(t);return formatRectRange(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(t,n,a,s){updateBaseRect(t,n,a,s)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(t,n){var a=new Group$3;return a.add(new Polyline$1({name:"main",style:makeStyle(n),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,n){n.remove(n.childAt(0)),n.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,t,n),ondragend:curry$1(trigger,t,{isEnd:!0})}))},updateCoverShape:function(t,n,a,s){n.childAt(0).setShape({points:clipByPanel(t,n,a)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(t){return{createCover:function(n,a){return createBaseRectCover({toRectRange:function(s){var l=[s,[0,100]];return t&&l.reverse(),l},fromRectRange:function(s){return s[t]}},n,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(n){var a=getTrackEnds(n),s=mathMin$1(a[0][t],a[1][t]),l=mathMax$1(a[0][t],a[1][t]);return[s,l]},updateCoverShape:function(n,a,s,l){var u,c=getPanelByCover(n,a);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)u=c.getLinearBrushOtherExtent(t);else{var d=n._zr;u=[0,[d.getWidth(),d.getHeight()][1-t]]}var Ct=[s,u];t&&Ct.reverse(),updateBaseRect(n,a,Ct,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(t){return t=normalizeRect(t),function(n){return clipPointsByRect(n,t)}}function makeLinearBrushOtherExtent(t,n){return t=normalizeRect(t),function(a){var s=n??a,l=s?t.width:t.height,u=s?t.x:t.y;return[u,u+(l||0)]}}function makeRectIsTargetByCursor(t,n,a){var s=normalizeRect(t);return function(l,u){return s.contain(u[0],u[1])&&!onIrrelevantElement(l,n,a)}}function normalizeRect(t){return BoundingRect.create(t)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){t.prototype.init.apply(this,arguments),(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this))},n.prototype.render=function(a,s,l,u){if(!fromAxisAreaSelect(a,s,u)){this.axisModel=a,this.api=l,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var d=getCoordSysModel(a,s),Ct=d.coordinateSystem,ar=a.getAreaSelectStyle(),en=ar.width,tn=a.axis.dim,on=Ct.getAxisLayout(tn),fn=extend({strokeContainThreshold:en},on),dn=new AxisBuilder(a,fn);each$f(elementList$1,dn.add,dn),this._axisGroup.add(dn.getGroup()),this._refreshBrushController(fn,ar,a,d,en,l),groupTransition(c,this._axisGroup,a)}}},n.prototype._refreshBrushController=function(a,s,l,u,c,d){var Ct=l.axis.getExtent(),ar=Ct[1]-Ct[0],en=Math.min(30,Math.abs(ar)*.1),tn=BoundingRect.create({x:Ct[0],y:-c/2,width:ar,height:c});tn.x-=en,tn.width+=2*en,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(tn),isTargetByCursor:makeRectIsTargetByCursor(tn,d,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(tn,0)}]).enableBrush({brushType:"lineX",brushStyle:s,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},n.prototype._onBrush=function(a){var s=a.areas,l=this.axisModel,u=l.axis,c=map$1(s,function(d){return[u.coordToData(d.range[0],!0),u.coordToData(d.range[1],!0)]});(!l.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:c})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n})(ComponentView);function fromAxisAreaSelect(t,n,a){return a&&a.type==="axisAreaSelect"&&n.findComponents({mainType:"parallelAxis",query:a})[0]===t}function getCoverInfoList(t){var n=t.axis;return map$1(t.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(a[0],!0),n.dataToCoord(a[1],!0)]}})}function getCoordSysModel(t,n){return n.getComponent("parallel",t.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(t){t.registerAction(actionInfo,function(n,a){a.eachComponent({mainType:"parallelAxis",query:n},function(s){s.axis.model.setActiveIntervals(n.intervals)})}),t.registerAction("parallelAxisExpand",function(n,a){a.eachComponent({mainType:"parallel",query:n},function(s){s.setAxisExpand(n)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(t){t.registerComponentView(ParallelView),t.registerComponentModel(ParallelModel),t.registerCoordinateSystem("parallel",parallelCoordSysCreator),t.registerPreprocessor(parallelPreprocessor),t.registerComponentModel(ParallelAxisModel),t.registerComponentView(ParallelAxisView),axisModelCreator(t,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(t)}function install$B(t){use(install$C),t.registerChartView(ParallelView$1),t.registerSeriesModel(ParallelSeriesModel),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=(function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t})(),SankeyPath=(function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SankeyPathShape},n.prototype.buildPath=function(a,s){var l=s.extent;a.moveTo(s.x1,s.y1),a.bezierCurveTo(s.cpx1,s.cpy1,s.cpx2,s.cpy2,s.x2,s.y2),s.orient==="vertical"?(a.lineTo(s.x2+l,s.y2),a.bezierCurveTo(s.cpx2+l,s.cpy2,s.cpx1+l,s.cpy1,s.x1+l,s.y1)):(a.lineTo(s.x2,s.y2+l),a.bezierCurveTo(s.cpx2,s.cpy2+l,s.cpx1,s.cpy1+l,s.x1,s.y1+l)),a.closePath()},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n})(Path),SankeyView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._focusAdjacencyDisabled=!1,a}return n.prototype.render=function(a,s,l){var u=this,c=a.getGraph(),d=this.group,Ct=a.layoutInfo,ar=Ct.width,en=Ct.height,tn=a.getData(),on=a.getData("edge"),fn=a.get("orient");this._model=a,d.removeAll(),d.x=Ct.x,d.y=Ct.y,c.eachEdge(function(dn){var Cn=new SankeyPath,Rn=getECData(Cn);Rn.dataIndex=dn.dataIndex,Rn.seriesIndex=a.seriesIndex,Rn.dataType="edge";var ax=dn.getModel(),ox=ax.getModel("lineStyle"),sx=ox.get("curveness"),lx=dn.node1.getLayout(),cx=dn.node1.getModel(),fx=cx.get("localX"),gx=cx.get("localY"),mx=dn.node2.getLayout(),px=dn.node2.getModel(),hx=px.get("localX"),vx=px.get("localY"),yx=dn.getLayout(),Sx,_x,Ex,bx,Ax,Mx,Rx,Cx;Cn.shape.extent=Math.max(1,yx.dy),Cn.shape.orient=fn,fn==="vertical"?(Sx=(fx!=null?fx*ar:lx.x)+yx.sy,_x=(gx!=null?gx*en:lx.y)+lx.dy,Ex=(hx!=null?hx*ar:mx.x)+yx.ty,bx=vx!=null?vx*en:mx.y,Ax=Sx,Mx=_x*(1-sx)+bx*sx,Rx=Ex,Cx=_x*sx+bx*(1-sx)):(Sx=(fx!=null?fx*ar:lx.x)+lx.dx,_x=(gx!=null?gx*en:lx.y)+yx.sy,Ex=hx!=null?hx*ar:mx.x,bx=(vx!=null?vx*en:mx.y)+yx.ty,Ax=Sx*(1-sx)+Ex*sx,Mx=_x,Rx=Sx*sx+Ex*(1-sx),Cx=bx),Cn.setShape({x1:Sx,y1:_x,x2:Ex,y2:bx,cpx1:Ax,cpy1:Mx,cpx2:Rx,cpy2:Cx}),Cn.useStyle(ox.getItemStyle()),applyCurveStyle(Cn.style,fn,dn);var Lx=""+ax.get("value"),qx=getLabelStatesModels(ax,"edgeLabel");setLabelStyle(Cn,qx,{labelFetcher:{getFormattedLabel:function(Nx,Bx,$x,Vx,Gx,Zx){return a.getFormattedLabel(Nx,Bx,"edge",Vx,retrieve3(Gx,qx.normal&&qx.normal.get("formatter"),Lx),Zx)}},labelDataIndex:dn.dataIndex,defaultText:Lx}),Cn.setTextConfig({position:"inside"});var Ix=ax.getModel("emphasis");setStatesStylesFromModel(Cn,ax,"lineStyle",function(Nx){var Bx=Nx.getItemStyle();return applyCurveStyle(Bx,fn,dn),Bx}),d.add(Cn),on.setItemGraphicEl(dn.dataIndex,Cn);var Px=Ix.get("focus");toggleHoverEmphasis(Cn,Px==="adjacency"?dn.getAdjacentDataIndices():Px==="trajectory"?dn.getTrajectoryDataIndices():Px,Ix.get("blurScope"),Ix.get("disabled"))}),c.eachNode(function(dn){var Cn=dn.getLayout(),Rn=dn.getModel(),ax=Rn.get("localX"),ox=Rn.get("localY"),sx=Rn.getModel("emphasis"),lx=Rn.get(["itemStyle","borderRadius"])||0,cx=new Rect$2({shape:{x:ax!=null?ax*ar:Cn.x,y:ox!=null?ox*en:Cn.y,width:Cn.dx,height:Cn.dy,r:lx},style:Rn.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(cx,getLabelStatesModels(Rn),{labelFetcher:{getFormattedLabel:function(gx,mx){return a.getFormattedLabel(gx,mx,"node")}},labelDataIndex:dn.dataIndex,defaultText:dn.id}),cx.disableLabelAnimation=!0,cx.setStyle("fill",dn.getVisual("color")),cx.setStyle("decal",dn.getVisual("style").decal),setStatesStylesFromModel(cx,Rn),d.add(cx),tn.setItemGraphicEl(dn.dataIndex,cx),getECData(cx).dataType="node";var fx=sx.get("focus");toggleHoverEmphasis(cx,fx==="adjacency"?dn.getAdjacentDataIndices():fx==="trajectory"?dn.getTrajectoryDataIndices():fx,sx.get("blurScope"),sx.get("disabled"))}),tn.eachItemGraphicEl(function(dn,Cn){var Rn=tn.getItemModel(Cn);Rn.get("draggable")&&(dn.drift=function(ax,ox){u._focusAdjacencyDisabled=!0,this.shape.x+=ax,this.shape.y+=ox,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:tn.getRawIndex(Cn),localX:this.shape.x/ar,localY:this.shape.y/en})},dn.ondragend=function(){u._focusAdjacencyDisabled=!1},dn.draggable=!0,dn.cursor="move")}),!this._data&&a.isAnimationEnabled()&&d.setClipPath(createGridClipShape$1(d.getBoundingRect(),a,function(){d.removeClipPath()})),this._data=a.getData()},n.prototype.dispose=function(){},n.type="sankey",n})(ChartView);function applyCurveStyle(t,n,a){switch(t.fill){case"source":t.fill=a.node1.getVisual("color"),t.decal=a.node1.getVisual("style").decal;break;case"target":t.fill=a.node2.getVisual("color"),t.decal=a.node2.getVisual("style").decal;break;case"gradient":var s=a.node1.getVisual("color"),l=a.node2.getVisual("color");isString$1(s)&&isString$1(l)&&(t.fill=new LinearGradient(0,0,+(n==="horizontal"),+(n==="vertical"),[{color:s,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(t,n,a){var s=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(s,{shape:{width:t.width+20}},n,a),s}var SankeySeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){var l=a.edges||a.links||[],u=a.data||a.nodes||[],c=a.levels||[];this.levelModels=[];for(var d=this.levelModels,Ct=0;Ct<c.length;Ct++)c[Ct].depth!=null&&c[Ct].depth>=0&&(d[c[Ct].depth]=new Model(c[Ct],this,s));var ar=createGraphFromNodeEdge(u,l,this,!0,en);return ar.data;function en(tn,on){tn.wrapMethod("getItemModel",function(fn,dn){var Cn=fn.parentModel,Rn=Cn.getData().getItemLayout(dn);if(Rn){var ax=Rn.depth,ox=Cn.levelModels[ax];ox&&(fn.parentModel=ox)}return fn}),on.wrapMethod("getItemModel",function(fn,dn){var Cn=fn.parentModel,Rn=Cn.getGraph().getEdgeByIndex(dn),ax=Rn.node1.getLayout();if(ax){var ox=ax.depth,sx=Cn.levelModels[ox];sx&&(fn.parentModel=sx)}return fn})}},n.prototype.setNodePosition=function(a,s){var l=this.option.data||this.option.nodes,u=l[a];u.localX=s[0],u.localY=s[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(a,s,l){function u(fn){return isNaN(fn)||fn==null}if(l==="edge"){var c=this.getDataParams(a,l),d=c.data,Ct=c.value,ar=d.source+" -- "+d.target;return createTooltipMarkup("nameValue",{name:ar,value:Ct,noValue:u(Ct)})}else{var en=this.getGraph().getNodeByIndex(a),tn=en.getLayout().value,on=this.getDataParams(a,l).data.name;return createTooltipMarkup("nameValue",{name:on!=null?on+"":null,value:tn,noValue:u(tn)})}},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(a,s){var l=t.prototype.getDataParams.call(this,a,s);if(l.value==null&&s==="node"){var u=this.getGraph().getNodeByIndex(a),c=u.getLayout().value;l.value=c}return l},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n})(SeriesModel);function sankeyLayout(t,n){t.eachSeriesByType("sankey",function(a){var s=a.get("nodeWidth"),l=a.get("nodeGap"),u=getViewRect$1(a,n);a.layoutInfo=u;var c=u.width,d=u.height,Ct=a.getGraph(),ar=Ct.nodes,en=Ct.edges;computeNodeValues(ar);var tn=filter(ar,function(Cn){return Cn.getLayout().value===0}),on=tn.length!==0?0:a.get("layoutIterations"),fn=a.get("orient"),dn=a.get("nodeAlign");layoutSankey(ar,en,s,l,c,d,on,fn,dn)})}function getViewRect$1(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function layoutSankey(t,n,a,s,l,u,c,d,Ct){computeNodeBreadths(t,n,a,l,u,d,Ct),computeNodeDepths(t,n,u,l,s,c,d),computeEdgeDepths(t,d)}function computeNodeValues(t){each$f(t,function(n){var a=sum(n.outEdges,getEdgeValue),s=sum(n.inEdges,getEdgeValue),l=n.getValue()||0,u=Math.max(a,s,l);n.setLayout({value:u},!0)})}function computeNodeBreadths(t,n,a,s,l,u,c){for(var d=[],Ct=[],ar=[],en=[],tn=0,on=0;on<n.length;on++)d[on]=1;for(var on=0;on<t.length;on++)Ct[on]=t[on].inEdges.length,Ct[on]===0&&ar.push(t[on]);for(var fn=-1;ar.length;){for(var dn=0;dn<ar.length;dn++){var Cn=ar[dn],Rn=Cn.hostGraph.data.getRawDataItem(Cn.dataIndex),ax=Rn.depth!=null&&Rn.depth>=0;ax&&Rn.depth>fn&&(fn=Rn.depth),Cn.setLayout({depth:ax?Rn.depth:tn},!0),u==="vertical"?Cn.setLayout({dy:a},!0):Cn.setLayout({dx:a},!0);for(var ox=0;ox<Cn.outEdges.length;ox++){var sx=Cn.outEdges[ox],lx=n.indexOf(sx);d[lx]=0;var cx=sx.node2,fx=t.indexOf(cx);--Ct[fx]===0&&en.indexOf(cx)<0&&en.push(cx)}}++tn,ar=en,en=[]}for(var on=0;on<d.length;on++)if(d[on]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var gx=fn>tn-1?fn:tn-1;c&&c!=="left"&&adjustNodeWithNodeAlign(t,c,u,gx);var mx=u==="vertical"?(l-a)/gx:(s-a)/gx;scaleNodeBreadths(t,mx,u)}function isNodeDepth(t){var n=t.hostGraph.data.getRawDataItem(t.dataIndex);return n.depth!=null&&n.depth>=0}function adjustNodeWithNodeAlign(t,n,a,s){if(n==="right"){for(var l=[],u=t,c=0;u.length;){for(var d=0;d<u.length;d++){var Ct=u[d];Ct.setLayout({skNodeHeight:c},!0);for(var ar=0;ar<Ct.inEdges.length;ar++){var en=Ct.inEdges[ar];l.indexOf(en.node1)<0&&l.push(en.node1)}}u=l,l=[],++c}each$f(t,function(tn){isNodeDepth(tn)||tn.setLayout({depth:Math.max(0,s-tn.getLayout().skNodeHeight)},!0)})}else n==="justify"&&moveSinksRight(t,s)}function moveSinksRight(t,n){each$f(t,function(a){!isNodeDepth(a)&&!a.outEdges.length&&a.setLayout({depth:n},!0)})}function scaleNodeBreadths(t,n,a){each$f(t,function(s){var l=s.getLayout().depth*n;a==="vertical"?s.setLayout({y:l},!0):s.setLayout({x:l},!0)})}function computeNodeDepths(t,n,a,s,l,u,c){var d=prepareNodesByBreadth(t,c);initializeNodeDepth(d,n,a,s,l,c),resolveCollisions(d,l,a,s,c);for(var Ct=1;u>0;u--)Ct*=.99,relaxRightToLeft(d,Ct,c),resolveCollisions(d,l,a,s,c),relaxLeftToRight(d,Ct,c),resolveCollisions(d,l,a,s,c)}function prepareNodesByBreadth(t,n){var a=[],s=n==="vertical"?"y":"x",l=groupData(t,function(u){return u.getLayout()[s]});return l.keys.sort(function(u,c){return u-c}),each$f(l.keys,function(u){a.push(l.buckets.get(u))}),a}function initializeNodeDepth(t,n,a,s,l,u){var c=1/0;each$f(t,function(d){var Ct=d.length,ar=0;each$f(d,function(tn){ar+=tn.getLayout().value});var en=u==="vertical"?(s-(Ct-1)*l)/ar:(a-(Ct-1)*l)/ar;en<c&&(c=en)}),each$f(t,function(d){each$f(d,function(Ct,ar){var en=Ct.getLayout().value*c;u==="vertical"?(Ct.setLayout({x:ar},!0),Ct.setLayout({dx:en},!0)):(Ct.setLayout({y:ar},!0),Ct.setLayout({dy:en},!0))})}),each$f(n,function(d){var Ct=+d.getValue()*c;d.setLayout({dy:Ct},!0)})}function resolveCollisions(t,n,a,s,l){var u=l==="vertical"?"x":"y";each$f(t,function(c){c.sort(function(Cn,Rn){return Cn.getLayout()[u]-Rn.getLayout()[u]});for(var d,Ct,ar,en=0,tn=c.length,on=l==="vertical"?"dx":"dy",fn=0;fn<tn;fn++)Ct=c[fn],ar=en-Ct.getLayout()[u],ar>0&&(d=Ct.getLayout()[u]+ar,l==="vertical"?Ct.setLayout({x:d},!0):Ct.setLayout({y:d},!0)),en=Ct.getLayout()[u]+Ct.getLayout()[on]+n;var dn=l==="vertical"?s:a;if(ar=en-n-dn,ar>0){d=Ct.getLayout()[u]-ar,l==="vertical"?Ct.setLayout({x:d},!0):Ct.setLayout({y:d},!0),en=d;for(var fn=tn-2;fn>=0;--fn)Ct=c[fn],ar=Ct.getLayout()[u]+Ct.getLayout()[on]+n-en,ar>0&&(d=Ct.getLayout()[u]-ar,l==="vertical"?Ct.setLayout({x:d},!0):Ct.setLayout({y:d},!0)),en=Ct.getLayout()[u]}})}function relaxRightToLeft(t,n,a){each$f(t.slice().reverse(),function(s){each$f(s,function(l){if(l.outEdges.length){var u=sum(l.outEdges,weightedTarget,a)/sum(l.outEdges,getEdgeValue);if(isNaN(u)){var c=l.outEdges.length;u=c?sum(l.outEdges,centerTarget,a)/c:0}if(a==="vertical"){var d=l.getLayout().x+(u-center(l,a))*n;l.setLayout({x:d},!0)}else{var Ct=l.getLayout().y+(u-center(l,a))*n;l.setLayout({y:Ct},!0)}}})})}function weightedTarget(t,n){return center(t.node2,n)*t.getValue()}function centerTarget(t,n){return center(t.node2,n)}function weightedSource(t,n){return center(t.node1,n)*t.getValue()}function centerSource(t,n){return center(t.node1,n)}function center(t,n){return n==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function getEdgeValue(t){return t.getValue()}function sum(t,n,a){for(var s=0,l=t.length,u=-1;++u<l;){var c=+n(t[u],a);isNaN(c)||(s+=c)}return s}function relaxLeftToRight(t,n,a){each$f(t,function(s){each$f(s,function(l){if(l.inEdges.length){var u=sum(l.inEdges,weightedSource,a)/sum(l.inEdges,getEdgeValue);if(isNaN(u)){var c=l.inEdges.length;u=c?sum(l.inEdges,centerSource,a)/c:0}if(a==="vertical"){var d=l.getLayout().x+(u-center(l,a))*n;l.setLayout({x:d},!0)}else{var Ct=l.getLayout().y+(u-center(l,a))*n;l.setLayout({y:Ct},!0)}}})})}function computeEdgeDepths(t,n){var a=n==="vertical"?"x":"y";each$f(t,function(s){s.outEdges.sort(function(l,u){return l.node2.getLayout()[a]-u.node2.getLayout()[a]}),s.inEdges.sort(function(l,u){return l.node1.getLayout()[a]-u.node1.getLayout()[a]})}),each$f(t,function(s){var l=0,u=0;each$f(s.outEdges,function(c){c.setLayout({sy:l},!0),l+=c.getLayout().dy}),each$f(s.inEdges,function(c){c.setLayout({ty:u},!0),u+=c.getLayout().dy})})}function sankeyVisual(t){t.eachSeriesByType("sankey",function(n){var a=n.getGraph(),s=a.nodes,l=a.edges;if(s.length){var u=1/0,c=-1/0;each$f(s,function(d){var Ct=d.getLayout().value;Ct<u&&(u=Ct),Ct>c&&(c=Ct)}),each$f(s,function(d){var Ct=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:n.get("color")}),ar=Ct.mapValueToVisual(d.getLayout().value),en=d.getModel().get(["itemStyle","color"]);en!=null?(d.setVisual("color",en),d.setVisual("style",{fill:en})):(d.setVisual("color",ar),d.setVisual("style",{fill:ar}))})}l.length&&each$f(l,function(d){var Ct=d.getModel().get("lineStyle");d.setVisual("style",Ct)})})}function install$A(t){t.registerChartView(SankeyView),t.registerSeriesModel(SankeySeriesModel),t.registerLayout(sankeyLayout),t.registerVisual(sankeyVisual),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"sankey",query:n},function(s){s.setNodePosition(n.dataIndex,[n.localX,n.localY])})})}var WhiskerBoxCommonMixin=(function(){function t(){}return t.prototype._hasEncodeRule=function(n){var a=this.getEncode();return a&&a.get(n)!=null},t.prototype.getInitialData=function(n,a){var s,l=a.getComponent("xAxis",this.get("xAxisIndex")),u=a.getComponent("yAxis",this.get("yAxisIndex")),c=l.get("type"),d=u.get("type"),Ct;c==="category"?(n.layout="horizontal",s=l.getOrdinalMeta(),Ct=!this._hasEncodeRule("x")):d==="category"?(n.layout="vertical",s=u.getOrdinalMeta(),Ct=!this._hasEncodeRule("y")):n.layout=n.layout||"horizontal";var ar=["x","y"],en=n.layout==="horizontal"?0:1,tn=this._baseAxisDim=ar[en],on=ar[1-en],fn=[l,u],dn=fn[en].get("type"),Cn=fn[1-en].get("type"),Rn=n.data;if(Rn&&Ct){var ax=[];each$f(Rn,function(lx,cx){var fx;isArray$1(lx)?(fx=lx.slice(),lx.unshift(cx)):isArray$1(lx.value)?(fx=extend({},lx),fx.value=fx.value.slice(),lx.value.unshift(cx)):fx=lx,ax.push(fx)}),n.data=ax}var ox=this.defaultValueDimensions,sx=[{name:tn,type:getDimensionTypeByAxis(dn),ordinalMeta:s,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:on,type:getDimensionTypeByAxis(Cn),dimsDef:ox.slice()}];return createSeriesDataSimply(this,{coordDimensions:sx,dimensionsCount:ox.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,sx,this)})},t.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},t})(),BoxplotSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n})(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this.group,d=this._data;this._data||c.removeAll();var Ct=a.get("layout")==="horizontal"?1:0;u.diff(d).add(function(ar){if(u.hasValue(ar)){var en=u.getItemLayout(ar),tn=createNormalBox$1(en,u,ar,Ct,!0);u.setItemGraphicEl(ar,tn),c.add(tn)}}).update(function(ar,en){var tn=d.getItemGraphicEl(en);if(!u.hasValue(ar)){c.remove(tn);return}var on=u.getItemLayout(ar);tn?(saveOldStyle(tn),updateNormalBoxData(on,tn,u,ar)):tn=createNormalBox$1(on,u,ar,Ct),c.add(tn),u.setItemGraphicEl(ar,tn)}).remove(function(ar){var en=d.getItemGraphicEl(ar);en&&c.remove(en)}).execute(),this._data=u},n.prototype.remove=function(a){var s=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(u){u&&s.remove(u)})},n.type="boxplot",n})(ChartView),BoxPathShape=(function(){function t(){}return t})(),BoxPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="boxplotBoxPath",s}return n.prototype.getDefaultShape=function(){return new BoxPathShape},n.prototype.buildPath=function(a,s){var l=s.points,u=0;for(a.moveTo(l[u][0],l[u][1]),u++;u<4;u++)a.lineTo(l[u][0],l[u][1]);for(a.closePath();u<l.length;u++)a.moveTo(l[u][0],l[u][1]),u++,a.lineTo(l[u][0],l[u][1])},n})(Path);function createNormalBox$1(t,n,a,s,l){var u=t.ends,c=new BoxPath({shape:{points:l?transInit$1(u,s,t):u}});return updateNormalBoxData(t,c,n,a,l),c}function updateNormalBoxData(t,n,a,s,l){var u=a.hostModel,c=graphic$1[l?"initProps":"updateProps"];c(n,{shape:{points:t.ends}},u,s),n.useStyle(a.getItemVisual(s,"style")),n.style.strokeNoScale=!0,n.z2=100;var d=a.getItemModel(s),Ct=d.getModel("emphasis");setStatesStylesFromModel(n,d),toggleHoverEmphasis(n,Ct.get("focus"),Ct.get("blurScope"),Ct.get("disabled"))}function transInit$1(t,n,a){return map$1(t,function(s){return s=s.slice(),s[n]=a.initBaseline,s})}var each$9=each$f;function boxplotLayout(t){var n=groupSeriesByAxis(t);each$9(n,function(a){var s=a.seriesModels;s.length&&(calculateBase(a),each$9(s,function(l,u){layoutSingleSeries(l,a.boxOffsetList[u],a.boxWidthList[u])}))})}function groupSeriesByAxis(t){var n=[],a=[];return t.eachSeriesByType("boxplot",function(s){var l=s.getBaseAxis(),u=indexOf(a,l);u<0&&(u=a.length,a[u]=l,n[u]={axis:l,seriesModels:[]}),n[u].seriesModels.push(s)}),n}function calculateBase(t){var n=t.axis,a=t.seriesModels,s=a.length,l=t.boxWidthList=[],u=t.boxOffsetList=[],c=[],d;if(n.type==="category")d=n.getBandWidth();else{var Ct=0;each$9(a,function(dn){Ct=Math.max(Ct,dn.getData().count())});var ar=n.getExtent();d=Math.abs(ar[1]-ar[0])/Ct}each$9(a,function(dn){var Cn=dn.get("boxWidth");isArray$1(Cn)||(Cn=[Cn,Cn]),c.push([parsePercent(Cn[0],d)||0,parsePercent(Cn[1],d)||0])});var en=d*.8-2,tn=en/s*.3,on=(en-tn*(s-1))/s,fn=on/2-en/2;each$9(a,function(dn,Cn){u.push(fn),fn+=tn+on,l.push(Math.min(Math.max(on,c[Cn][0]),c[Cn][1]))})}function layoutSingleSeries(t,n,a){var s=t.coordinateSystem,l=t.getData(),u=a/2,c=t.get("layout")==="horizontal"?0:1,d=1-c,Ct=["x","y"],ar=l.mapDimension(Ct[c]),en=l.mapDimensionsAll(Ct[d]);if(ar==null||en.length<5)return;for(var tn=0;tn<l.count();tn++){var on=l.get(ar,tn),fn=sx(on,en[2],tn),dn=sx(on,en[0],tn),Cn=sx(on,en[1],tn),Rn=sx(on,en[3],tn),ax=sx(on,en[4],tn),ox=[];lx(ox,Cn,!1),lx(ox,Rn,!0),ox.push(dn,Cn,ax,Rn),cx(ox,dn),cx(ox,ax),cx(ox,fn),l.setItemLayout(tn,{initBaseline:fn[d],ends:ox})}function sx(fx,gx,mx){var px=l.get(gx,mx),hx=[];hx[c]=fx,hx[d]=px;var vx;return isNaN(fx)||isNaN(px)?vx=[NaN,NaN]:(vx=s.dataToPoint(hx),vx[c]+=n),vx}function lx(fx,gx,mx){var px=gx.slice(),hx=gx.slice();px[c]+=u,hx[c]-=u,mx?fx.push(px,hx):fx.push(hx,px)}function cx(fx,gx){var mx=gx.slice(),px=gx.slice();mx[c]-=u,px[c]+=u,fx.push(mx,px)}}function prepareBoxplotData(t,n){n=n||{};for(var a=[],s=[],l=n.boundIQR,u=l==="none"||l===0,c=0;c<t.length;c++){var d=asc$2(t[c].slice()),Ct=quantile(d,.25),ar=quantile(d,.5),en=quantile(d,.75),tn=d[0],on=d[d.length-1],fn=(l??1.5)*(en-Ct),dn=u?tn:Math.max(tn,Ct-fn),Cn=u?on:Math.min(on,en+fn),Rn=n.itemNameFormatter,ax=isFunction$1(Rn)?Rn({value:c}):isString$1(Rn)?Rn.replace("{value}",c+""):c+"";a.push([ax,dn,Ct,ar,en,Cn]);for(var ox=0;ox<d.length;ox++){var sx=d[ox];if(sx<dn||sx>Cn){var lx=[ax,sx];s.push(lx)}}}return{boxData:a,outliers:s}}var boxplotTransform={type:"echarts:boxplot",transform:function t(n){var a=n.upstream;if(a.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var s="";throwError(s)}var l=prepareBoxplotData(a.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:l.boxData},{data:l.outliers}]}};function install$z(t){t.registerSeriesModel(BoxplotSeriesModel),t.registerChartView(BoxplotView),t.registerLayout(boxplotLayout),t.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(t,n){return n.get(t>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(t,n){return n.get(t===0?dojiBorderColorQuery:t>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(t,n){if(!n.isSeriesFiltered(t)){var a=t.pipelineContext.large;return!a&&{progress:function(s,l){for(var u;(u=s.next())!=null;){var c=l.getItemModel(u),d=l.getItemLayout(u).sign,Ct=c.getItemStyle();Ct.fill=getColor(d,c),Ct.stroke=getBorderColor(d,c)||Ct.fill;var ar=l.ensureUniqueItemVisual(u,"style");extend(ar,Ct)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},n.prototype.incrementalPrepareRender=function(a,s,l){this._clear(),this._updateDrawMode(a)},n.prototype.incrementalRender=function(a,s,l,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,s):this._incrementalRenderNormal(a,s)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},n.prototype._renderNormal=function(a){var s=a.getData(),l=this._data,u=this.group,c=s.getLayout("isSimpleBox"),d=a.get("clip",!0),Ct=a.coordinateSystem,ar=Ct.getArea&&Ct.getArea();this._data||u.removeAll(),s.diff(l).add(function(en){if(s.hasValue(en)){var tn=s.getItemLayout(en);if(d&&isNormalBoxClipped(ar,tn))return;var on=createNormalBox(tn,en,!0);initProps(on,{shape:{points:tn.ends}},a,en),setBoxCommon(on,s,en,c),u.add(on),s.setItemGraphicEl(en,on)}}).update(function(en,tn){var on=l.getItemGraphicEl(tn);if(!s.hasValue(en)){u.remove(on);return}var fn=s.getItemLayout(en);if(d&&isNormalBoxClipped(ar,fn)){u.remove(on);return}on?(updateProps$1(on,{shape:{points:fn.ends}},a,en),saveOldStyle(on)):on=createNormalBox(fn),setBoxCommon(on,s,en,c),u.add(on),s.setItemGraphicEl(en,on)}).remove(function(en){var tn=l.getItemGraphicEl(en);tn&&u.remove(tn)}).execute(),this._data=s},n.prototype._renderLarge=function(a){this._clear(),createLarge(a,this.group);var s=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;s?this.group.setClipPath(s):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(a,s){for(var l=s.getData(),u=l.getLayout("isSimpleBox"),c;(c=a.next())!=null;){var d=l.getItemLayout(c),Ct=createNormalBox(d);setBoxCommon(Ct,l,c,u),Ct.incremental=!0,this.group.add(Ct),this._progressiveEls.push(Ct)}},n.prototype._incrementalRenderLarge=function(a,s){createLarge(s,this.group,this._progressiveEls,!0)},n.prototype.remove=function(a){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n})(ChartView),NormalBoxPathShape=(function(){function t(){}return t})(),NormalBoxPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="normalCandlestickBox",s}return n.prototype.getDefaultShape=function(){return new NormalBoxPathShape},n.prototype.buildPath=function(a,s){var l=s.points;this.__simpleBox?(a.moveTo(l[4][0],l[4][1]),a.lineTo(l[6][0],l[6][1])):(a.moveTo(l[0][0],l[0][1]),a.lineTo(l[1][0],l[1][1]),a.lineTo(l[2][0],l[2][1]),a.lineTo(l[3][0],l[3][1]),a.closePath(),a.moveTo(l[4][0],l[4][1]),a.lineTo(l[5][0],l[5][1]),a.moveTo(l[6][0],l[6][1]),a.lineTo(l[7][0],l[7][1]))},n})(Path);function createNormalBox(t,n,a){var s=t.ends;return new NormalBoxPath({shape:{points:a?transInit(s,t):s},z2:100})}function isNormalBoxClipped(t,n){for(var a=!0,s=0;s<n.ends.length;s++)if(t.contain(n.ends[s][0],n.ends[s][1])){a=!1;break}return a}function setBoxCommon(t,n,a,s){var l=n.getItemModel(a);t.useStyle(n.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=s,setStatesStylesFromModel(t,l);var u=n.getItemLayout(a).sign;each$f(t.states,function(d,Ct){var ar=l.getModel(Ct),en=getColor(u,ar),tn=getBorderColor(u,ar)||en,on=d.style||(d.style={});en&&(on.fill=en),tn&&(on.stroke=tn)});var c=l.getModel("emphasis");toggleHoverEmphasis(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function transInit(t,n){return map$1(t,function(a){return a=a.slice(),a[1]=n.initBaseline,a})}var LargeBoxPathShape=(function(){function t(){}return t})(),LargeBoxPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="largeCandlestickBox",s}return n.prototype.getDefaultShape=function(){return new LargeBoxPathShape},n.prototype.buildPath=function(a,s){for(var l=s.points,u=0;u<l.length;)if(this.__sign===l[u++]){var c=l[u++];a.moveTo(c,l[u++]),a.lineTo(c,l[u++])}else u+=3},n})(Path);function createLarge(t,n,a,s){var l=t.getData(),u=l.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});n.add(c);var d=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});n.add(d);var Ct=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});n.add(Ct),setLargeStyle(1,c,t),setLargeStyle(-1,d,t),setLargeStyle(0,Ct,t),s&&(c.incremental=!0,d.incremental=!0),a&&a.push(c,d)}function setLargeStyle(t,n,a,s){var l=getBorderColor(t,a)||getColor(t,a),u=a.getModel("itemStyle").getItemStyle(SKIP_PROPS);n.useStyle(u),n.style.fill=null,n.style.stroke=l}var CandlestickSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(a,s,l){var u=s.getItemLayout(a);return u&&l.rect(u.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n})(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(t){!t||!isArray$1(t.series)||each$f(t.series,function(n){isObject$3(n)&&n.type==="k"&&(n.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem,a=t.getData(),s=calculateCandleWidth(t,a),l=0,u=1,c=["x","y"],d=a.getDimensionIndex(a.mapDimension(c[l])),Ct=map$1(a.mapDimensionsAll(c[u]),a.getDimensionIndex,a),ar=Ct[0],en=Ct[1],tn=Ct[2],on=Ct[3];if(a.setLayout({candleWidth:s,isSimpleBox:s<=1.3}),d<0||Ct.length<4)return;return{progress:t.pipelineContext.large?dn:fn};function fn(Cn,Rn){for(var ax,ox=Rn.getStore();(ax=Cn.next())!=null;){var sx=ox.get(d,ax),lx=ox.get(ar,ax),cx=ox.get(en,ax),fx=ox.get(tn,ax),gx=ox.get(on,ax),mx=Math.min(lx,cx),px=Math.max(lx,cx),hx=Ax(mx,sx),vx=Ax(px,sx),yx=Ax(fx,sx),Sx=Ax(gx,sx),_x=[];Mx(_x,vx,0),Mx(_x,hx,1),_x.push(Cx(Sx),Cx(vx),Cx(yx),Cx(hx));var Ex=Rn.getItemModel(ax),bx=!!Ex.get(["itemStyle","borderColorDoji"]);Rn.setItemLayout(ax,{sign:getSign(ox,ax,lx,cx,en,bx),initBaseline:lx>cx?vx[u]:hx[u],ends:_x,brushRect:Rx(fx,gx,sx)})}function Ax(Lx,qx){var Ix=[];return Ix[l]=qx,Ix[u]=Lx,isNaN(qx)||isNaN(Lx)?[NaN,NaN]:n.dataToPoint(Ix)}function Mx(Lx,qx,Ix){var Px=qx.slice(),Nx=qx.slice();Px[l]=subPixelOptimize(Px[l]+s/2,1,!1),Nx[l]=subPixelOptimize(Nx[l]-s/2,1,!0),Ix?Lx.push(Px,Nx):Lx.push(Nx,Px)}function Rx(Lx,qx,Ix){var Px=Ax(Lx,Ix),Nx=Ax(qx,Ix);return Px[l]-=s/2,Nx[l]-=s/2,{x:Px[0],y:Px[1],width:s,height:Nx[1]-Px[1]}}function Cx(Lx){return Lx[l]=subPixelOptimize(Lx[l],1),Lx}}function dn(Cn,Rn){for(var ax=createFloat32Array(Cn.count*4),ox=0,sx,lx=[],cx=[],fx,gx=Rn.getStore(),mx=!!t.get(["itemStyle","borderColorDoji"]);(fx=Cn.next())!=null;){var px=gx.get(d,fx),hx=gx.get(ar,fx),vx=gx.get(en,fx),yx=gx.get(tn,fx),Sx=gx.get(on,fx);if(isNaN(px)||isNaN(yx)||isNaN(Sx)){ax[ox++]=NaN,ox+=3;continue}ax[ox++]=getSign(gx,fx,hx,vx,en,mx),lx[l]=px,lx[u]=yx,sx=n.dataToPoint(lx,null,cx),ax[ox++]=sx?sx[0]:NaN,ax[ox++]=sx?sx[1]:NaN,lx[u]=Sx,sx=n.dataToPoint(lx,null,cx),ax[ox++]=sx?sx[1]:NaN}Rn.setLayout("largePoints",ax)}}};function getSign(t,n,a,s,l,u){var c;return a>s?c=-1:a<s?c=1:c=u?0:n>0?t.get(l,n-1)<=s?1:-1:1,c}function calculateCandleWidth(t,n){var a=t.getBaseAxis(),s,l=a.type==="category"?a.getBandWidth():(s=a.getExtent(),Math.abs(s[1]-s[0])/n.count()),u=parsePercent(retrieve2(t.get("barMaxWidth"),l),l),c=parsePercent(retrieve2(t.get("barMinWidth"),1),l),d=t.get("barWidth");return d!=null?parsePercent(d,l):Math.max(Math.min(l/2,u),c)}function install$y(t){t.registerChartView(CandlestickView),t.registerSeriesModel(CandlestickSeriesModel),t.registerPreprocessor(candlestickPreprocessor),t.registerVisual(candlestickVisual),t.registerLayout(candlestickLayout)}function updateRipplePath(t,n){var a=n.rippleEffectColor||n.color;t.eachChild(function(s){s.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?a:null,fill:n.brushType==="fill"?a:null}})})}var EffectSymbol=(function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this,u=new Symbol$1(a,s),c=new Group$3;return l.add(u),l.add(c),l.updateData(a,s),l}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(a){for(var s=a.symbolType,l=a.color,u=a.rippleNumber,c=this.childAt(1),d=0;d<u;d++){var Ct=createSymbol$1(s,-1,-1,2,2,l);Ct.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var ar=-d/u*a.period+a.effectOffset;Ct.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(ar).start(),Ct.animateStyle(!0).when(a.period,{opacity:0}).delay(ar).start(),c.add(Ct)}updateRipplePath(c,a)},n.prototype.updateEffectAnimation=function(a){for(var s=this._effectCfg,l=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],c=0;c<u.length;c++){var d=u[c];if(s[d]!==a[d]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}updateRipplePath(l,a)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},n.prototype.updateData=function(a,s){var l=this,u=a.hostModel;this.childAt(0).updateData(a,s);var c=this.childAt(1),d=a.getItemModel(s),Ct=a.getItemVisual(s,"symbol"),ar=normalizeSymbolSize(a.getItemVisual(s,"symbolSize")),en=a.getItemVisual(s,"style"),tn=en&&en.fill,on=d.getModel("emphasis");c.setScale(ar),c.traverse(function(Rn){Rn.setStyle("fill",tn)});var fn=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),ar);fn&&(c.x=fn[0],c.y=fn[1]);var dn=a.getItemVisual(s,"symbolRotate");c.rotation=(dn||0)*Math.PI/180||0;var Cn={};Cn.showEffectOn=u.get("showEffectOn"),Cn.rippleScale=d.get(["rippleEffect","scale"]),Cn.brushType=d.get(["rippleEffect","brushType"]),Cn.period=d.get(["rippleEffect","period"])*1e3,Cn.effectOffset=s/a.count(),Cn.z=u.getShallow("z")||0,Cn.zlevel=u.getShallow("zlevel")||0,Cn.symbolType=Ct,Cn.color=tn,Cn.rippleEffectColor=d.get(["rippleEffect","color"]),Cn.rippleNumber=d.get(["rippleEffect","number"]),Cn.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(Cn):this.startEffectAnimation(Cn),this._effectCfg=Cn):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Rn){Rn==="emphasis"?Cn.showEffectOn!=="render"&&l.startEffectAnimation(Cn):Rn==="normal"&&Cn.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=Cn,toggleHoverEmphasis(this,on.get("focus"),on.get("blurScope"),on.get("disabled"))},n.prototype.fadeOut=function(a){a&&a()},n})(Group$3),EffectScatterView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},n.prototype.render=function(a,s,l){var u=a.getData(),c=this._symbolDraw;c.updateData(u,{clipShape:this._getClipShape(a)}),this.group.add(c.group)},n.prototype._getClipShape=function(a){var s=a.coordinateSystem,l=s&&s.getArea&&s.getArea();return a.get("clip",!0)?l:null},n.prototype.updateTransform=function(a,s,l){var u=a.getData();this.group.dirty();var c=pointsLayout("").reset(a,s,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(a){var s=a.coordinateSystem;s&&s.getRoamTransform&&(this.group.transform=clone$2(s.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n})(ChartView),EffectScatterSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(a,s,l){return l.point(s.getItemLayout(a))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n})(SeriesModel);function install$x(t){t.registerChartView(EffectScatterView),t.registerSeriesModel(EffectScatterSeriesModel),t.registerLayout(pointsLayout("effectScatter"))}var EffectLine=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u.add(u.createLine(a,s,l)),u._updateEffectSymbol(a,s),u}return n.prototype.createLine=function(a,s,l){return new Line(a,s,l)},n.prototype._updateEffectSymbol=function(a,s){var l=a.getItemModel(s),u=l.getModel("effect"),c=u.get("symbolSize"),d=u.get("symbol");isArray$1(c)||(c=[c,c]);var Ct=a.getItemVisual(s,"style"),ar=u.get("color")||Ct&&Ct.stroke,en=this.childAt(1);this._symbolType!==d&&(this.remove(en),en=createSymbol$1(d,-.5,-.5,1,1,ar),en.z2=100,en.culling=!0,this.add(en)),en&&(en.setStyle("shadowColor",ar),en.setStyle(u.getItemStyle(["color"])),en.scaleX=c[0],en.scaleY=c[1],en.setColor(ar),this._symbolType=d,this._symbolScale=c,this._updateEffectAnimation(a,u,s))},n.prototype._updateEffectAnimation=function(a,s,l){var u=this.childAt(1);if(u){var c=a.getItemLayout(l),d=s.get("period")*1e3,Ct=s.get("loop"),ar=s.get("roundTrip"),en=s.get("constantSpeed"),tn=retrieve(s.get("delay"),function(fn){return fn/a.count()*d/3});if(u.ignore=!0,this._updateAnimationPoints(u,c),en>0&&(d=this._getLineLength(u)/en*1e3),d!==this._period||Ct!==this._loop||ar!==this._roundTrip){u.stopAnimation();var on=void 0;isFunction$1(tn)?on=tn(l):on=tn,u.__t>0&&(on=-d*u.__t),this._animateSymbol(u,d,on,Ct,ar)}this._period=d,this._loop=Ct,this._roundTrip=ar}},n.prototype._animateSymbol=function(a,s,l,u,c){if(s>0){a.__t=0;var d=this,Ct=a.animate("",u).when(c?s*2:s,{__t:c?2:1}).delay(l).during(function(){d._updateSymbolPosition(a)});u||Ct.done(function(){d.remove(a)}),Ct.start()}},n.prototype._getLineLength=function(a){return dist$1(a.__p1,a.__cp1)+dist$1(a.__cp1,a.__p2)},n.prototype._updateAnimationPoints=function(a,s){a.__p1=s[0],a.__p2=s[1],a.__cp1=s[2]||[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]},n.prototype.updateData=function(a,s,l){this.childAt(0).updateData(a,s,l),this._updateEffectSymbol(a,s)},n.prototype._updateSymbolPosition=function(a){var s=a.__p1,l=a.__p2,u=a.__cp1,c=a.__t<1?a.__t:2-a.__t,d=[a.x,a.y],Ct=d.slice(),ar=quadraticAt$1,en=quadraticDerivativeAt;d[0]=ar(s[0],u[0],l[0],c),d[1]=ar(s[1],u[1],l[1],c);var tn=a.__t<1?en(s[0],u[0],l[0],c):en(l[0],u[0],s[0],1-c),on=a.__t<1?en(s[1],u[1],l[1],c):en(l[1],u[1],s[1],1-c);a.rotation=-Math.atan2(on,tn)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(a.__lastT!==void 0&&a.__lastT<a.__t?(a.scaleY=dist$1(Ct,d)*1.05,c===1&&(d[0]=Ct[0]+(d[0]-Ct[0])/2,d[1]=Ct[1]+(d[1]-Ct[1])/2)):a.__lastT===1?a.scaleY=2*dist$1(s,d):a.scaleY=this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=d[0],a.y=d[1]},n.prototype.updateLayout=function(a,s){this.childAt(0).updateLayout(a,s);var l=a.getItemModel(s).getModel("effect");this._updateEffectAnimation(a,l,s)},n})(Group$3),Polyline=(function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u._createPolyline(a,s,l),u}return n.prototype._createPolyline=function(a,s,l){var u=a.getItemLayout(s),c=new Polyline$1({shape:{points:u}});this.add(c),this._updateCommonStl(a,s,l)},n.prototype.updateData=function(a,s,l){var u=a.hostModel,c=this.childAt(0),d={shape:{points:a.getItemLayout(s)}};updateProps$1(c,d,u,s),this._updateCommonStl(a,s,l)},n.prototype._updateCommonStl=function(a,s,l){var u=this.childAt(0),c=a.getItemModel(s),d=l&&l.emphasisLineStyle,Ct=l&&l.focus,ar=l&&l.blurScope,en=l&&l.emphasisDisabled;if(!l||a.hasItemOption){var tn=c.getModel("emphasis");d=tn.getModel("lineStyle").getLineStyle(),en=tn.get("disabled"),Ct=tn.get("focus"),ar=tn.get("blurScope")}u.useStyle(a.getItemVisual(s,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var on=u.ensureState("emphasis");on.style=d,toggleHoverEmphasis(this,Ct,ar,en)},n.prototype.updateLayout=function(a,s){var l=this.childAt(0);l.setShape("points",a.getItemLayout(s))},n})(Group$3),EffectPolyline=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return n.prototype.createLine=function(a,s,l){return new Polyline(a,s,l)},n.prototype._updateAnimationPoints=function(a,s){this._points=s;for(var l=[0],u=0,c=1;c<s.length;c++){var d=s[c-1],Ct=s[c];u+=dist$1(d,Ct),l.push(u)}if(u===0){this._length=0;return}for(var c=0;c<l.length;c++)l[c]/=u;this._offsets=l,this._length=u},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(a){var s=a.__t<1?a.__t:2-a.__t,l=this._points,u=this._offsets,c=l.length;if(u){var d=this._lastFrame,Ct;if(s<this._lastFramePercent){var ar=Math.min(d+1,c-1);for(Ct=ar;Ct>=0&&!(u[Ct]<=s);Ct--);Ct=Math.min(Ct,c-2)}else{for(Ct=d;Ct<c&&!(u[Ct]>s);Ct++);Ct=Math.min(Ct-1,c-2)}var en=(s-u[Ct])/(u[Ct+1]-u[Ct]),tn=l[Ct],on=l[Ct+1];a.x=tn[0]*(1-en)+en*on[0],a.y=tn[1]*(1-en)+en*on[1];var fn=a.__t<1?on[0]-tn[0]:tn[0]-on[0],dn=a.__t<1?on[1]-tn[1]:tn[1]-on[1];a.rotation=-Math.atan2(dn,fn)-Math.PI/2,this._lastFrame=Ct,this._lastFramePercent=s,a.ignore=!1}},n})(EffectLine),LargeLinesPathShape=(function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t})(),LargeLinesPath=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LargeLinesPathShape},n.prototype.buildPath=function(a,s){var l=s.segs,u=s.curveness,c;if(s.polyline)for(c=this._off;c<l.length;){var d=l[c++];if(d>0){a.moveTo(l[c++],l[c++]);for(var Ct=1;Ct<d;Ct++)a.lineTo(l[c++],l[c++])}}else for(c=this._off;c<l.length;){var ar=l[c++],en=l[c++],tn=l[c++],on=l[c++];if(a.moveTo(ar,en),u>0){var fn=(ar+tn)/2-(en-on)*u,dn=(en+on)/2-(tn-ar)*u;a.quadraticCurveTo(fn,dn,tn,on)}else a.lineTo(tn,on)}this.incremental&&(this._off=c,this.notClear=!0)},n.prototype.findDataIndex=function(a,s){var l=this.shape,u=l.segs,c=l.curveness,d=this.style.lineWidth;if(l.polyline)for(var Ct=0,ar=0;ar<u.length;){var en=u[ar++];if(en>0)for(var tn=u[ar++],on=u[ar++],fn=1;fn<en;fn++){var dn=u[ar++],Cn=u[ar++];if(containStroke$4(tn,on,dn,Cn,d,a,s))return Ct}Ct++}else for(var Ct=0,ar=0;ar<u.length;){var tn=u[ar++],on=u[ar++],dn=u[ar++],Cn=u[ar++];if(c>0){var Rn=(tn+dn)/2-(on-Cn)*c,ax=(on+Cn)/2-(dn-tn)*c;if(containStroke$2(tn,on,Rn,ax,dn,Cn,d,a,s))return Ct}else if(containStroke$4(tn,on,dn,Cn,d,a,s))return Ct;Ct++}return-1},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=l[0],s=l[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,l=s.segs,u=1/0,c=1/0,d=-1/0,Ct=-1/0,ar=0;ar<l.length;){var en=l[ar++],tn=l[ar++];u=Math.min(en,u),d=Math.max(en,d),c=Math.min(tn,c),Ct=Math.max(tn,Ct)}a=this._rect=new BoundingRect(u,c,d,Ct)}return a},n})(Path),LargeLineDraw=(function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n){this._clear();var a=this._create();a.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(a,n)},t.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(n,a){var s=this._newAdded[0],l=a.getLayout("linesPoints"),u=s&&s.shape.segs;if(u&&u.length<2e4){var c=u.length,d=new Float32Array(c+l.length);d.set(u),d.set(l,c),s.setShape({segs:d})}else{this._newAdded=[];var Ct=this._create();Ct.incremental=!0,Ct.setShape({segs:l}),this._setCommon(Ct,a),Ct.__startIndex=n.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(n),this.group.add(n),n},t.prototype._setCommon=function(n,a,s){var l=a.hostModel;n.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),n.useStyle(l.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var u=a.getVisual("style");u&&u.stroke&&n.setStyle("stroke",u.stroke),n.setStyle("fill",null);var c=getECData(n);c.seriesIndex=l.seriesIndex,n.on("mousemove",function(d){c.dataIndex=null;var Ct=n.hoverDataIdx;Ct>0&&(c.dataIndex=Ct+n.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t})(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem;if(n){var a=t.get("polyline"),s=t.pipelineContext.large;return{progress:function(l,u){var c=[];if(s){var d=void 0,Ct=l.end-l.start;if(a){for(var ar=0,en=l.start;en<l.end;en++)ar+=t.getLineCoordsCount(en);d=new Float32Array(Ct+ar*2)}else d=new Float32Array(Ct*4);for(var tn=0,on=[],en=l.start;en<l.end;en++){var fn=t.getLineCoords(en,c);a&&(d[tn++]=fn);for(var dn=0;dn<fn;dn++)on=n.dataToPoint(c[dn],!1,on),d[tn++]=on[0],d[tn++]=on[1]}u.setLayout("linesPoints",d)}else for(var en=l.start;en<l.end;en++){var Cn=u.getItemModel(en),fn=t.getLineCoords(en,c),Rn=[];if(a)for(var ax=0;ax<fn;ax++)Rn.push(n.dataToPoint(c[ax]));else{Rn[0]=n.dataToPoint(c[0]),Rn[1]=n.dataToPoint(c[1]);var ox=Cn.get(["lineStyle","curveness"]);+ox&&(Rn[2]=[(Rn[0][0]+Rn[1][0])/2-(Rn[0][1]-Rn[1][1])*ox,(Rn[0][1]+Rn[1][1])/2-(Rn[1][0]-Rn[0][0])*ox])}u.setItemLayout(en,Rn)}}}}}},LinesView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._updateLineDraw(u,a),d=a.get("zlevel"),Ct=a.get(["effect","trailLength"]),ar=l.getZr(),en=ar.painter.getType()==="svg";en||ar.painter.getLayer(d).clear(!0),this._lastZlevel!=null&&!en&&ar.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&Ct>0&&(en||ar.configLayer(d,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(Ct/10+.9,1),0)})),c.updateData(u);var tn=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a);tn?this.group.setClipPath(tn):this.group.removeClipPath(),this._lastZlevel=d,this._finished=!0},n.prototype.incrementalPrepareRender=function(a,s,l){var u=a.getData(),c=this._updateLineDraw(u,a);c.incrementalPrepareUpdate(u),this._clearLayer(l),this._finished=!1},n.prototype.incrementalRender=function(a,s,l){this._lineDraw.incrementalUpdate(a,s.getData()),this._finished=a.end===s.getData().count()},n.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},n.prototype.updateTransform=function(a,s,l){var u=a.getData(),c=a.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var d=linesLayout.reset(a,s,l);d.progress&&d.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(l)},n.prototype._updateLineDraw=function(a,s){var l=this._lineDraw,u=this._showEffect(s),c=!!s.get("polyline"),d=s.pipelineContext,Ct=d.large;return(!l||u!==this._hasEffet||c!==this._isPolyline||Ct!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=Ct?new LargeLineDraw:new LineDraw(c?u?EffectPolyline:Polyline:u?EffectLine:Line),this._hasEffet=u,this._isPolyline=c,this._isLargeDraw=Ct),this.group.add(l.group),l},n.prototype._showEffect=function(a){return!!a.get(["effect","show"])},n.prototype._clearLayer=function(a){var s=a.getZr(),l=s.painter.getType()==="svg";!l&&this._lastZlevel!=null&&s.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(a,s){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(s)},n.prototype.dispose=function(a,s){this.remove(a,s)},n.type="lines",n})(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(t){var n=t.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(t.data=map$1(n,function(a){var s=[a[0].coord,a[1].coord],l={coords:s};return a[0].name&&(l.fromName=a[0].name),a[1].name&&(l.toName=a[1].name),mergeAll([l,a[0],a[1]])}))}var LinesSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.init=function(a){a.data=a.data||[],compatEc2(a);var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count)),t.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(a){if(compatEc2(a),a.data){var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count))}t.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(a){var s=this._processFlatCoordsArray(a.data);s.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,s.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,s.flatCoordsOffset)):(this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset),a.data=new Float32Array(s.count)),this.getRawData().appendData(a.data)},n.prototype._getCoordsFromItemModel=function(a){var s=this.getData().getItemModel(a),l=s.option instanceof Array?s.option:s.getShallow("coords");return l},n.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[a*2+1]:this._getCoordsFromItemModel(a).length},n.prototype.getLineCoords=function(a,s){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[a*2],u=this._flatCoordsOffset[a*2+1],c=0;c<u;c++)s[c]=s[c]||[],s[c][0]=this._flatCoords[l+c*2],s[c][1]=this._flatCoords[l+c*2+1];return u}else{for(var d=this._getCoordsFromItemModel(a),c=0;c<d.length;c++)s[c]=s[c]||[],s[c][0]=d[c][0],s[c][1]=d[c][1];return d.length}},n.prototype._processFlatCoordsArray=function(a){var s=0;if(this._flatCoords&&(s=this._flatCoords.length),isNumber(a[0])){for(var l=a.length,u=new Uint32Arr(l),c=new Float64Arr(l),d=0,Ct=0,ar=0,en=0;en<l;){ar++;var tn=a[en++];u[Ct++]=d+s,u[Ct++]=tn;for(var on=0;on<tn;on++){var fn=a[en++],dn=a[en++];c[d++]=fn,c[d++]=dn}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,Ct),flatCoords:c,count:ar}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},n.prototype.getInitialData=function(a,s){var l=new SeriesData(["value"],this);return l.hasItemOption=!1,l.initData(a.data,[],function(u,c,d,Ct){if(u instanceof Array)return NaN;l.hasItemOption=!0;var ar=u.value;if(ar!=null)return ar instanceof Array?ar[Ct]:ar}),l},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=u.getItemModel(a),d=c.get("name");if(d)return d;var Ct=c.get("fromName"),ar=c.get("toName"),en=[];return Ct!=null&&en.push(Ct),ar!=null&&en.push(ar),createTooltipMarkup("nameValue",{name:en.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?1e4:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?2e4:this.get("progressiveThreshold"))},n.prototype.getZLevelKey=function(){var a=this.getModel("effect"),s=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&s>0?s+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n})(SeriesModel);function normalize(t){return t instanceof Array||(t=[t,t]),t}var linesVisual={seriesType:"lines",reset:function(t){var n=normalize(t.get("symbol")),a=normalize(t.get("symbolSize")),s=t.getData();s.setVisual("fromSymbol",n&&n[0]),s.setVisual("toSymbol",n&&n[1]),s.setVisual("fromSymbolSize",a&&a[0]),s.setVisual("toSymbolSize",a&&a[1]);function l(u,c){var d=u.getItemModel(c),Ct=normalize(d.getShallow("symbol",!0)),ar=normalize(d.getShallow("symbolSize",!0));Ct[0]&&u.setItemVisual(c,"fromSymbol",Ct[0]),Ct[1]&&u.setItemVisual(c,"toSymbol",Ct[1]),ar[0]&&u.setItemVisual(c,"fromSymbolSize",ar[0]),ar[1]&&u.setItemVisual(c,"toSymbolSize",ar[1])}return{dataEach:s.hasItemOption?l:null}}};function install$w(t){t.registerChartView(LinesView),t.registerSeriesModel(LinesSeriesModel),t.registerLayout(linesLayout),t.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=(function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=platformApi.createCanvas();this.canvas=n}return t.prototype.update=function(n,a,s,l,u,c){var d=this._getBrush(),Ct=this._getGradient(u,"inRange"),ar=this._getGradient(u,"outOfRange"),en=this.pointSize+this.blurSize,tn=this.canvas,on=tn.getContext("2d"),fn=n.length;tn.width=a,tn.height=s;for(var dn=0;dn<fn;++dn){var Cn=n[dn],Rn=Cn[0],ax=Cn[1],ox=Cn[2],sx=l(ox);on.globalAlpha=sx,on.drawImage(d,Rn-en,ax-en)}if(!tn.width||!tn.height)return tn;for(var lx=on.getImageData(0,0,tn.width,tn.height),cx=lx.data,fx=0,gx=cx.length,mx=this.minOpacity,px=this.maxOpacity,hx=px-mx;fx<gx;){var sx=cx[fx+3]/256,vx=Math.floor(sx*(GRADIENT_LEVELS-1))*4;if(sx>0){var yx=c(sx)?Ct:ar;sx>0&&(sx=sx*hx+mx),cx[fx++]=yx[vx],cx[fx++]=yx[vx+1],cx[fx++]=yx[vx+2],cx[fx++]=yx[vx+3]*sx*256}else fx+=4}return on.putImageData(lx,0,0),tn},t.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),a=this.pointSize+this.blurSize,s=a*2;n.width=s,n.height=s;var l=n.getContext("2d");return l.clearRect(0,0,s,s),l.shadowOffsetX=s,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-a,a,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),n},t.prototype._getGradient=function(n,a){for(var s=this._gradientPixels,l=s[a]||(s[a]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],c=0,d=0;d<256;d++)n[a](d/255,!0,u),l[c++]=u[0],l[c++]=u[1],l[c++]=u[2],l[c++]=u[3];return l},t})();function getIsInPiecewiseRange(t,n,a){var s=t[1]-t[0];n=map$1(n,function(c){return{interval:[(c.interval[0]-t[0])/s,(c.interval[1]-t[0])/s]}});var l=n.length,u=0;return function(c){var d;for(d=u;d<l;d++){var Ct=n[d].interval;if(Ct[0]<=c&&c<=Ct[1]){u=d;break}}if(d===l)for(d=u-1;d>=0;d--){var Ct=n[d].interval;if(Ct[0]<=c&&c<=Ct[1]){u=d;break}}return d>=0&&d<l&&a[d]}}function getIsInContinuousRange(t,n){var a=t[1]-t[0];return n=[(n[0]-t[0])/a,(n[1]-t[0])/a],function(s){return s>=n[0]&&s<=n[1]}}function isGeoCoordSys(t){var n=t.dimensions;return n[0]==="lng"&&n[1]==="lat"}var HeatmapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u;s.eachComponent("visualMap",function(d){d.eachTargetSeries(function(Ct){Ct===a&&(u=d)})}),this._progressiveEls=null,this.group.removeAll();var c=a.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(a,l,0,a.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,a,u,l)},n.prototype.incrementalPrepareRender=function(a,s,l){this.group.removeAll()},n.prototype.incrementalRender=function(a,s,l,u){var c=s.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(s,l,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(s,u,a.start,a.end,!0)))},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._renderOnCartesianAndCalendar=function(a,s,l,u,c){var d=a.coordinateSystem,Ct=isCoordinateSystemType(d,"cartesian2d"),ar,en,tn,on;if(Ct){var fn=d.getAxis("x"),dn=d.getAxis("y");ar=fn.getBandWidth()+.5,en=dn.getBandWidth()+.5,tn=fn.scale.getExtent(),on=dn.scale.getExtent()}for(var Cn=this.group,Rn=a.getData(),ax=a.getModel(["emphasis","itemStyle"]).getItemStyle(),ox=a.getModel(["blur","itemStyle"]).getItemStyle(),sx=a.getModel(["select","itemStyle"]).getItemStyle(),lx=a.get(["itemStyle","borderRadius"]),cx=getLabelStatesModels(a),fx=a.getModel("emphasis"),gx=fx.get("focus"),mx=fx.get("blurScope"),px=fx.get("disabled"),hx=Ct?[Rn.mapDimension("x"),Rn.mapDimension("y"),Rn.mapDimension("value")]:[Rn.mapDimension("time"),Rn.mapDimension("value")],vx=l;vx<u;vx++){var yx=void 0,Sx=Rn.getItemVisual(vx,"style");if(Ct){var _x=Rn.get(hx[0],vx),Ex=Rn.get(hx[1],vx);if(isNaN(Rn.get(hx[2],vx))||isNaN(_x)||isNaN(Ex)||_x<tn[0]||_x>tn[1]||Ex<on[0]||Ex>on[1])continue;var bx=d.dataToPoint([_x,Ex]);yx=new Rect$2({shape:{x:bx[0]-ar/2,y:bx[1]-en/2,width:ar,height:en},style:Sx})}else{if(isNaN(Rn.get(hx[1],vx)))continue;yx=new Rect$2({z2:1,shape:d.dataToRect([Rn.get(hx[0],vx)]).contentShape,style:Sx})}if(Rn.hasItemOption){var Ax=Rn.getItemModel(vx),Mx=Ax.getModel("emphasis");ax=Mx.getModel("itemStyle").getItemStyle(),ox=Ax.getModel(["blur","itemStyle"]).getItemStyle(),sx=Ax.getModel(["select","itemStyle"]).getItemStyle(),lx=Ax.get(["itemStyle","borderRadius"]),gx=Mx.get("focus"),mx=Mx.get("blurScope"),px=Mx.get("disabled"),cx=getLabelStatesModels(Ax)}yx.shape.r=lx;var Rx=a.getRawValue(vx),Cx="-";Rx&&Rx[2]!=null&&(Cx=Rx[2]+""),setLabelStyle(yx,cx,{labelFetcher:a,labelDataIndex:vx,defaultOpacity:Sx.opacity,defaultText:Cx}),yx.ensureState("emphasis").style=ax,yx.ensureState("blur").style=ox,yx.ensureState("select").style=sx,toggleHoverEmphasis(yx,gx,mx,px),yx.incremental=c,c&&(yx.states.emphasis.hoverLayer=!0),Cn.add(yx),Rn.setItemGraphicEl(vx,yx),this._progressiveEls&&this._progressiveEls.push(yx)}},n.prototype._renderOnGeo=function(a,s,l,u){var c=l.targetVisuals.inRange,d=l.targetVisuals.outOfRange,Ct=s.getData(),ar=this._hmLayer||this._hmLayer||new HeatmapLayer;ar.blurSize=s.get("blurSize"),ar.pointSize=s.get("pointSize"),ar.minOpacity=s.get("minOpacity"),ar.maxOpacity=s.get("maxOpacity");var en=a.getViewRect().clone(),tn=a.getRoamTransform();en.applyTransform(tn);var on=Math.max(en.x,0),fn=Math.max(en.y,0),dn=Math.min(en.width+en.x,u.getWidth()),Cn=Math.min(en.height+en.y,u.getHeight()),Rn=dn-on,ax=Cn-fn,ox=[Ct.mapDimension("lng"),Ct.mapDimension("lat"),Ct.mapDimension("value")],sx=Ct.mapArray(ox,function(gx,mx,px){var hx=a.dataToPoint([gx,mx]);return hx[0]-=on,hx[1]-=fn,hx.push(px),hx}),lx=l.getExtent(),cx=l.type==="visualMap.continuous"?getIsInContinuousRange(lx,l.option.range):getIsInPiecewiseRange(lx,l.getPieceList(),l.option.selected);ar.update(sx,Rn,ax,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:d.color.getColorMapper()},cx);var fx=new ZRImage({style:{width:Rn,height:ax,x:on,y:fn,image:ar.canvas},silent:!0});this.group.add(fx)},n.type="heatmap",n})(ChartView),HeatmapSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var a=CoordinateSystemManager.get(this.get("coordinateSystem"));if(a&&a.dimensions)return a.dimensions[0]==="lng"&&a.dimensions[1]==="lat"},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n})(SeriesModel);function install$v(t){t.registerChartView(HeatmapView),t.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group,c=a.getData(),d=this._data,Ct=a.coordinateSystem,ar=Ct.getBaseAxis(),en=ar.isHorizontal(),tn=Ct.master.getRect(),on={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:a,coordSys:Ct,coordSysExtent:[[tn.x,tn.x+tn.width],[tn.y,tn.y+tn.height]],isHorizontal:en,valueDim:LAYOUT_ATTRS[+en],categoryDim:LAYOUT_ATTRS[1-+en]};c.diff(d).add(function(dn){if(c.hasValue(dn)){var Cn=getItemModel(c,dn),Rn=getSymbolMeta(c,dn,Cn,on),ax=createBar(c,on,Rn);c.setItemGraphicEl(dn,ax),u.add(ax),updateCommon(ax,on,Rn)}}).update(function(dn,Cn){var Rn=d.getItemGraphicEl(Cn);if(!c.hasValue(dn)){u.remove(Rn);return}var ax=getItemModel(c,dn),ox=getSymbolMeta(c,dn,ax,on),sx=getShapeStr(c,ox);Rn&&sx!==Rn.__pictorialShapeStr&&(u.remove(Rn),c.setItemGraphicEl(dn,null),Rn=null),Rn?updateBar(Rn,on,ox):Rn=createBar(c,on,ox,!0),c.setItemGraphicEl(dn,Rn),Rn.__pictorialSymbolMeta=ox,u.add(Rn),updateCommon(Rn,on,ox)}).remove(function(dn){var Cn=d.getItemGraphicEl(dn);Cn&&removeBar(d,dn,Cn.__pictorialSymbolMeta.animationModel,Cn)}).execute();var fn=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;return fn?u.setClipPath(fn):u.removeClipPath(),this._data=c,this.group},n.prototype.remove=function(a,s){var l=this.group,u=this._data;a.get("animation")?u&&u.eachItemGraphicEl(function(c){removeBar(u,getECData(c).dataIndex,a,c)}):l.removeAll()},n.type="pictorialBar",n})(ChartView);function getSymbolMeta(t,n,a,s){var l=t.getItemLayout(n),u=a.get("symbolRepeat"),c=a.get("symbolClip"),d=a.get("symbolPosition")||"start",Ct=a.get("symbolRotate"),ar=(Ct||0)*Math.PI/180||0,en=a.get("symbolPatternSize")||2,tn=a.isAnimationEnabled(),on={dataIndex:n,layout:l,itemModel:a,symbolType:t.getItemVisual(n,"symbol")||"circle",style:t.getItemVisual(n,"style"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:en,rotation:ar,animationModel:tn?a:null,hoverScale:tn&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};prepareBarLength(a,u,l,s,on),prepareSymbolSize(t,n,l,u,c,on.boundingLength,on.pxSign,en,s,on),prepareLineWidth(a,on.symbolScale,ar,s,on);var fn=on.symbolSize,dn=normalizeSymbolOffset(a.get("symbolOffset"),fn);return prepareLayoutInfo(a,fn,l,u,c,dn,d,on.valueLineWidth,on.boundingLength,on.repeatCutLength,s,on),on}function prepareBarLength(t,n,a,s,l){var u=s.valueDim,c=t.get("symbolBoundingData"),d=s.coordSys.getOtherAxis(s.coordSys.getBaseAxis()),Ct=d.toGlobalCoord(d.dataToCoord(0)),ar=1-+(a[u.wh]<=0),en;if(isArray$1(c)){var tn=[convertToCoordOnAxis(d,c[0])-Ct,convertToCoordOnAxis(d,c[1])-Ct];tn[1]<tn[0]&&tn.reverse(),en=tn[ar]}else c!=null?en=convertToCoordOnAxis(d,c)-Ct:n?en=s.coordSysExtent[u.index][ar]-Ct:en=a[u.wh];l.boundingLength=en,n&&(l.repeatCutLength=a[u.wh]);var on=u.xy==="x",fn=d.inverse;l.pxSign=on&&!fn||!on&&fn?en>=0?1:-1:en>0?1:-1}function convertToCoordOnAxis(t,n){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(n)))}function prepareSymbolSize(t,n,a,s,l,u,c,d,Ct,ar){var en=Ct.valueDim,tn=Ct.categoryDim,on=Math.abs(a[tn.wh]),fn=t.getItemVisual(n,"symbolSize"),dn;isArray$1(fn)?dn=fn.slice():fn==null?dn=["100%","100%"]:dn=[fn,fn],dn[tn.index]=parsePercent(dn[tn.index],on),dn[en.index]=parsePercent(dn[en.index],s?on:Math.abs(u)),ar.symbolSize=dn;var Cn=ar.symbolScale=[dn[0]/d,dn[1]/d];Cn[en.index]*=(Ct.isHorizontal?-1:1)*c}function prepareLineWidth(t,n,a,s,l){var u=t.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:n[0],scaleY:n[1],rotation:a}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=n[s.valueDim.index]),l.valueLineWidth=u||0}function prepareLayoutInfo(t,n,a,s,l,u,c,d,Ct,ar,en,tn){var on=en.categoryDim,fn=en.valueDim,dn=tn.pxSign,Cn=Math.max(n[fn.index]+d,0),Rn=Cn;if(s){var ax=Math.abs(Ct),ox=retrieve(t.get("symbolMargin"),"15%")+"",sx=!1;ox.lastIndexOf("!")===ox.length-1&&(sx=!0,ox=ox.slice(0,ox.length-1));var lx=parsePercent(ox,n[fn.index]),cx=Math.max(Cn+lx*2,0),fx=sx?0:lx*2,gx=isNumeric(s),mx=gx?s:toIntTimes((ax+fx)/cx),px=ax-mx*Cn;lx=px/2/(sx?mx:Math.max(mx-1,1)),cx=Cn+lx*2,fx=sx?0:lx*2,!gx&&s!=="fixed"&&(mx=ar?toIntTimes((Math.abs(ar)+fx)/cx):0),Rn=mx*cx-fx,tn.repeatTimes=mx,tn.symbolMargin=lx}var hx=dn*(Rn/2),vx=tn.pathPosition=[];vx[on.index]=a[on.wh]/2,vx[fn.index]=c==="start"?hx:c==="end"?Ct-hx:Ct/2,u&&(vx[0]+=u[0],vx[1]+=u[1]);var yx=tn.bundlePosition=[];yx[on.index]=a[on.xy],yx[fn.index]=a[fn.xy];var Sx=tn.barRectShape=extend({},a);Sx[fn.wh]=dn*Math.max(Math.abs(a[fn.wh]),Math.abs(vx[fn.index]+hx)),Sx[on.wh]=a[on.wh];var _x=tn.clipShape={};_x[on.xy]=-a[on.xy],_x[on.wh]=en.ecSize[on.wh],_x[fn.xy]=0,_x[fn.wh]=a[fn.wh]}function createPath(t){var n=t.symbolPatternSize,a=createSymbol$1(t.symbolType,-n/2,-n/2,n,n);return a.attr({culling:!0}),a.type!=="image"&&a.setStyle({strokeNoScale:!0}),a}function createOrUpdateRepeatSymbols(t,n,a,s){var l=t.__pictorialBundle,u=a.symbolSize,c=a.valueLineWidth,d=a.pathPosition,Ct=n.valueDim,ar=a.repeatTimes||0,en=0,tn=u[n.valueDim.index]+c+a.symbolMargin*2;for(eachPath(t,function(Cn){Cn.__pictorialAnimationIndex=en,Cn.__pictorialRepeatTimes=ar,en<ar?updateAttr(Cn,null,dn(en),a,s):updateAttr(Cn,null,{scaleX:0,scaleY:0},a,s,function(){l.remove(Cn)}),en++});en<ar;en++){var on=createPath(a);on.__pictorialAnimationIndex=en,on.__pictorialRepeatTimes=ar,l.add(on);var fn=dn(en);updateAttr(on,{x:fn.x,y:fn.y,scaleX:0,scaleY:0},{scaleX:fn.scaleX,scaleY:fn.scaleY,rotation:fn.rotation},a,s)}function dn(Cn){var Rn=d.slice(),ax=a.pxSign,ox=Cn;return(a.symbolRepeatDirection==="start"?ax>0:ax<0)&&(ox=ar-1-Cn),Rn[Ct.index]=tn*(ox-ar/2+.5)+d[Ct.index],{x:Rn[0],y:Rn[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function createOrUpdateSingleSymbol(t,n,a,s){var l=t.__pictorialBundle,u=t.__pictorialMainPath;u?updateAttr(u,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,s):(u=t.__pictorialMainPath=createPath(a),l.add(u),updateAttr(u,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,s))}function createOrUpdateBarRect(t,n,a){var s=extend({},n.barRectShape),l=t.__pictorialBarRect;l?updateAttr(l,null,{shape:s},n,a):(l=t.__pictorialBarRect=new Rect$2({z2:2,shape:s,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,t.add(l))}function createOrUpdateClip(t,n,a,s){if(a.symbolClip){var l=t.__pictorialClipPath,u=extend({},a.clipShape),c=n.valueDim,d=a.animationModel,Ct=a.dataIndex;if(l)updateProps$1(l,{shape:u},d,Ct);else{u[c.wh]=0,l=new Rect$2({shape:u}),t.__pictorialBundle.setClipPath(l),t.__pictorialClipPath=l;var ar={};ar[c.wh]=a.clipShape[c.wh],graphic$1[s?"updateProps":"initProps"](l,{shape:ar},d,Ct)}}}function getItemModel(t,n){var a=t.getItemModel(n);return a.getAnimationDelayParams=getAnimationDelayParams,a.isAnimationEnabled=isAnimationEnabled,a}function getAnimationDelayParams(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(t,n,a,s){var l=new Group$3,u=new Group$3;return l.add(u),l.__pictorialBundle=u,u.x=a.bundlePosition[0],u.y=a.bundlePosition[1],a.symbolRepeat?createOrUpdateRepeatSymbols(l,n,a):createOrUpdateSingleSymbol(l,n,a),createOrUpdateBarRect(l,a,s),createOrUpdateClip(l,n,a,s),l.__pictorialShapeStr=getShapeStr(t,a),l.__pictorialSymbolMeta=a,l}function updateBar(t,n,a){var s=a.animationModel,l=a.dataIndex,u=t.__pictorialBundle;updateProps$1(u,{x:a.bundlePosition[0],y:a.bundlePosition[1]},s,l),a.symbolRepeat?createOrUpdateRepeatSymbols(t,n,a,!0):createOrUpdateSingleSymbol(t,n,a,!0),createOrUpdateBarRect(t,a,!0),createOrUpdateClip(t,n,a,!0)}function removeBar(t,n,a,s){var l=s.__pictorialBarRect;l&&l.removeTextContent();var u=[];eachPath(s,function(c){u.push(c)}),s.__pictorialMainPath&&u.push(s.__pictorialMainPath),s.__pictorialClipPath&&(a=null),each$f(u,function(c){removeElement(c,{scaleX:0,scaleY:0},a,n,function(){s.parent&&s.parent.remove(s)})}),t.setItemGraphicEl(n,null)}function getShapeStr(t,n){return[t.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function eachPath(t,n,a){each$f(t.__pictorialBundle.children(),function(s){s!==t.__pictorialBarRect&&n.call(a,s)})}function updateAttr(t,n,a,s,l,u){n&&t.attr(n),s.symbolClip&&!l?a&&t.attr(a):a&&graphic$1[l?"updateProps":"initProps"](t,a,s.animationModel,s.dataIndex,u)}function updateCommon(t,n,a){var s=a.dataIndex,l=a.itemModel,u=l.getModel("emphasis"),c=u.getModel("itemStyle").getItemStyle(),d=l.getModel(["blur","itemStyle"]).getItemStyle(),Ct=l.getModel(["select","itemStyle"]).getItemStyle(),ar=l.getShallow("cursor"),en=u.get("focus"),tn=u.get("blurScope"),on=u.get("scale");eachPath(t,function(Cn){if(Cn instanceof ZRImage){var Rn=Cn.style;Cn.useStyle(extend({image:Rn.image,x:Rn.x,y:Rn.y,width:Rn.width,height:Rn.height},a.style))}else Cn.useStyle(a.style);var ax=Cn.ensureState("emphasis");ax.style=c,on&&(ax.scaleX=Cn.scaleX*1.1,ax.scaleY=Cn.scaleY*1.1),Cn.ensureState("blur").style=d,Cn.ensureState("select").style=Ct,ar&&(Cn.cursor=ar),Cn.z2=a.z2});var fn=n.valueDim.posDesc[+(a.boundingLength>0)],dn=t.__pictorialBarRect;dn.ignoreClip=!0,setLabelStyle(dn,getLabelStatesModels(l),{labelFetcher:n.seriesModel,labelDataIndex:s,defaultText:getDefaultLabel(n.seriesModel.getData(),s),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:fn}),toggleHoverEmphasis(t,en,tn,u.get("disabled"))}function toIntTimes(t){var n=Math.round(t);return Math.abs(t-n)<1e-4?n:Math.ceil(t)}var PictorialBarSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return n.prototype.getInitialData=function(a){return a.stack=null,t.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n})(BaseBarSeriesModel);function install$u(t){t.registerChartView(PictorialBarView),t.registerSeriesModel(PictorialBarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._layers=[],a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this,d=this.group,Ct=a.getLayerSeries(),ar=u.getLayout("layoutInfo"),en=ar.rect,tn=ar.boundaryGap;d.x=0,d.y=en.y+tn[0];function on(Rn){return Rn.name}var fn=new DataDiffer(this._layersSeries||[],Ct,on,on),dn=[];fn.add(bind$1(Cn,this,"add")).update(bind$1(Cn,this,"update")).remove(bind$1(Cn,this,"remove")).execute();function Cn(Rn,ax,ox){var sx=c._layers;if(Rn==="remove"){d.remove(sx[ax]);return}for(var lx=[],cx=[],fx,gx=Ct[ax].indices,mx=0;mx<gx.length;mx++){var px=u.getItemLayout(gx[mx]),hx=px.x,vx=px.y0,yx=px.y;lx.push(hx,vx),cx.push(hx,vx+yx),fx=u.getItemVisual(gx[mx],"style")}var Sx,_x=u.getItemLayout(gx[0]),Ex=a.getModel("label"),bx=Ex.get("margin"),Ax=a.getModel("emphasis");if(Rn==="add"){var Mx=dn[ax]=new Group$3;Sx=new ECPolygon({shape:{points:lx,stackedOnPoints:cx,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Mx.add(Sx),d.add(Mx),a.isAnimationEnabled()&&Sx.setClipPath(createGridClipShape(Sx.getBoundingRect(),a,function(){Sx.removeClipPath()}))}else{var Mx=sx[ox];Sx=Mx.childAt(0),d.add(Mx),dn[ax]=Mx,updateProps$1(Sx,{shape:{points:lx,stackedOnPoints:cx}},a),saveOldStyle(Sx)}setLabelStyle(Sx,getLabelStatesModels(a),{labelDataIndex:gx[mx-1],defaultText:u.getName(gx[mx-1]),inheritColor:fx.fill},{normal:{verticalAlign:"middle"}}),Sx.setTextConfig({position:null,local:!0});var Rx=Sx.getTextContent();Rx&&(Rx.x=_x.x-bx,Rx.y=_x.y0+_x.y/2),Sx.useStyle(fx),u.setItemGraphicEl(ax,Sx),setStatesStylesFromModel(Sx,a),toggleHoverEmphasis(Sx,Ax.get("focus"),Ax.get("blurScope"),Ax.get("disabled"))}this._layersSeries=Ct,this._layers=dn},n.type="themeRiver",n})(ChartView);function createGridClipShape(t,n,a){var s=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(s,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},n,a),s}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.fixData=function(a){var s=a.length,l={},u=groupData(a,function(on){return l.hasOwnProperty(on[0]+"")||(l[on[0]+""]=-1),on[2]}),c=[];u.buckets.each(function(on,fn){c.push({name:fn,dataList:on})});for(var d=c.length,Ct=0;Ct<d;++Ct){for(var ar=c[Ct].name,en=0;en<c[Ct].dataList.length;++en){var tn=c[Ct].dataList[en][0]+"";l[tn]=Ct}for(var tn in l)l.hasOwnProperty(tn)&&l[tn]!==Ct&&(l[tn]=Ct,a[s]=[tn,0,ar],s++)}return a},n.prototype.getInitialData=function(a,s){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=l.get("type"),c=filter(a.data,function(dn){return dn[2]!==void 0}),d=this.fixData(c||[]),Ct=[],ar=this.nameMap=createHashMap(),en=0,tn=0;tn<d.length;++tn)Ct.push(d[tn][DATA_NAME_INDEX]),ar.get(d[tn][DATA_NAME_INDEX])||(ar.set(d[tn][DATA_NAME_INDEX],en),en++);var on=prepareSeriesDataSchema(d,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,fn=new SeriesData(on,this);return fn.initData(d),fn},n.prototype.getLayerSeries=function(){for(var a=this.getData(),s=a.count(),l=[],u=0;u<s;++u)l[u]=u;var c=a.mapDimension("single"),d=groupData(l,function(ar){return a.get("name",ar)}),Ct=[];return d.buckets.each(function(ar,en){ar.sort(function(tn,on){return a.get(c,tn)-a.get(c,on)}),Ct.push({name:en,indices:ar})}),Ct},n.prototype.getAxisTooltipData=function(a,s,l){isArray$1(a)||(a=a?[a]:[]);for(var u=this.getData(),c=this.getLayerSeries(),d=[],Ct=c.length,ar,en=0;en<Ct;++en){for(var tn=Number.MAX_VALUE,on=-1,fn=c[en].indices.length,dn=0;dn<fn;++dn){var Cn=u.get(a[0],c[en].indices[dn]),Rn=Math.abs(Cn-s);Rn<=tn&&(ar=Cn,tn=Rn,on=c[en].indices[dn])}d.push(on)}return{dataIndices:d,nestestValue:ar}},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=u.getName(a),d=u.get(u.mapDimension("value"),a);return createTooltipMarkup("nameValue",{name:c,value:d})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n})(SeriesModel);function themeRiverLayout(t,n){t.eachSeriesByType("themeRiver",function(a){var s=a.getData(),l=a.coordinateSystem,u={},c=l.getRect();u.rect=c;var d=a.get("boundaryGap"),Ct=l.getAxis();if(u.boundaryGap=d,Ct.orient==="horizontal"){d[0]=parsePercent(d[0],c.height),d[1]=parsePercent(d[1],c.height);var ar=c.height-d[0]-d[1];doThemeRiverLayout(s,a,ar)}else{d[0]=parsePercent(d[0],c.width),d[1]=parsePercent(d[1],c.width);var en=c.width-d[0]-d[1];doThemeRiverLayout(s,a,en)}s.setLayout("layoutInfo",u)})}function doThemeRiverLayout(t,n,a){if(t.count())for(var s=n.coordinateSystem,l=n.getLayerSeries(),u=t.mapDimension("single"),c=t.mapDimension("value"),d=map$1(l,function(Rn){return map$1(Rn.indices,function(ax){var ox=s.dataToPoint(t.get(u,ax));return ox[1]=t.get(c,ax),ox})}),Ct=computeBaseline(d),ar=Ct.y0,en=a/Ct.max,tn=l.length,on=l[0].indices.length,fn,dn=0;dn<on;++dn){fn=ar[dn]*en,t.setItemLayout(l[0].indices[dn],{layerIndex:0,x:d[0][dn][0],y0:fn,y:d[0][dn][1]*en});for(var Cn=1;Cn<tn;++Cn)fn+=d[Cn-1][dn][1]*en,t.setItemLayout(l[Cn].indices[dn],{layerIndex:Cn,x:d[Cn][dn][0],y0:fn,y:d[Cn][dn][1]*en})}}function computeBaseline(t){for(var n=t.length,a=t[0].length,s=[],l=[],u=0,c=0;c<a;++c){for(var d=0,Ct=0;Ct<n;++Ct)d+=t[Ct][c][1];d>u&&(u=d),s.push(d)}for(var ar=0;ar<a;++ar)l[ar]=(u-s[ar])/2;u=0;for(var en=0;en<a;++en){var tn=s[en]+l[en];tn>u&&(u=tn)}return{y0:l,max:u}}function install$t(t){t.registerChartView(ThemeRiverView),t.registerSeriesModel(ThemeRiverSeriesModel),t.registerLayout(themeRiverLayout),t.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=(function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=s.seriesIndex;var d=new ZRText({z2:DEFAULT_TEXT_Z,silent:a.getModel().get(["label","silent"])});return c.setTextContent(d),c.updateData(!0,a,s,l,u),c}return n.prototype.updateData=function(a,s,l,u,c){this.node=s,s.piece=this,l=l||this._seriesModel,u=u||this._ecModel;var d=this;getECData(d).dataIndex=s.dataIndex;var Ct=s.getModel(),ar=Ct.getModel("emphasis"),en=s.getLayout(),tn=extend({},en);tn.label=null;var on=s.getVisual("style");on.lineJoin="bevel";var fn=s.getVisual("decal");fn&&(on.decal=createOrUpdatePatternFromDecal(fn,c));var dn=getSectorCornerRadius(Ct.getModel("itemStyle"),tn,!0);extend(tn,dn),each$f(SPECIAL_STATES,function(ox){var sx=d.ensureState(ox),lx=Ct.getModel([ox,"itemStyle"]);sx.style=lx.getItemStyle();var cx=getSectorCornerRadius(lx,tn);cx&&(sx.shape=cx)}),a?(d.setShape(tn),d.shape.r=en.r0,initProps(d,{shape:{r:en.r}},l,s.dataIndex)):(updateProps$1(d,{shape:tn},l),saveOldStyle(d)),d.useStyle(on),this._updateLabel(l);var Cn=Ct.getShallow("cursor");Cn&&d.attr("cursor",Cn),this._seriesModel=l||this._seriesModel,this._ecModel=u||this._ecModel;var Rn=ar.get("focus"),ax=Rn==="relative"?concatArray(s.getAncestorsIndices(),s.getDescendantIndices()):Rn==="ancestor"?s.getAncestorsIndices():Rn==="descendant"?s.getDescendantIndices():Rn;toggleHoverEmphasis(this,ax,ar.get("blurScope"),ar.get("disabled"))},n.prototype._updateLabel=function(a){var s=this,l=this.node.getModel(),u=l.getModel("label"),c=this.node.getLayout(),d=c.endAngle-c.startAngle,Ct=(c.startAngle+c.endAngle)/2,ar=Math.cos(Ct),en=Math.sin(Ct),tn=this,on=tn.getTextContent(),fn=this.node.dataIndex,dn=u.get("minAngle")/180*Math.PI,Cn=u.get("show")&&!(dn!=null&&Math.abs(d)<dn);on.ignore=!Cn,each$f(DISPLAY_STATES,function(ax){var ox=ax==="normal"?l.getModel("label"):l.getModel([ax,"label"]),sx=ax==="normal",lx=sx?on:on.ensureState(ax),cx=a.getFormattedLabel(fn,ax);sx&&(cx=cx||s.node.name),lx.style=createTextStyle$1(ox,{},null,ax!=="normal",!0),cx&&(lx.style.text=cx);var fx=ox.get("show");fx!=null&&!sx&&(lx.ignore=!fx);var gx=Rn(ox,"position"),mx=sx?tn:tn.states[ax],px=mx.style.fill;mx.textConfig={outsideFill:ox.get("color")==="inherit"?px:null,inside:gx!=="outside"};var hx,vx=Rn(ox,"distance")||0,yx=Rn(ox,"align"),Sx=Rn(ox,"rotate"),_x=Math.PI*.5,Ex=Math.PI*1.5,bx=normalizeRadian(Sx==="tangential"?Math.PI/2-Ct:Ct),Ax=bx>_x&&!isRadianAroundZero(bx-_x)&&bx<Ex;gx==="outside"?(hx=c.r+vx,yx=Ax?"right":"left"):!yx||yx==="center"?(d===2*Math.PI&&c.r0===0?hx=0:hx=(c.r+c.r0)/2,yx="center"):yx==="left"?(hx=c.r0+vx,yx=Ax?"right":"left"):yx==="right"&&(hx=c.r-vx,yx=Ax?"left":"right"),lx.style.align=yx,lx.style.verticalAlign=Rn(ox,"verticalAlign")||"middle",lx.x=hx*ar+c.cx,lx.y=hx*en+c.cy;var Mx=0;Sx==="radial"?Mx=normalizeRadian(-Ct)+(Ax?Math.PI:0):Sx==="tangential"?Mx=normalizeRadian(Math.PI/2-Ct)+(Ax?Math.PI:0):isNumber(Sx)&&(Mx=Sx*Math.PI/180),lx.rotation=normalizeRadian(Mx)});function Rn(ax,ox){var sx=ax.get(ox);return sx??u.get(ox)}on.dirtyStyle()},n})(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(t){t.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(n,a){a.eachComponent({mainType:"series",subType:"sunburst",query:n},s);function s(l,u){var c=retrieveTargetInfo(n,[ROOT_TO_NODE_ACTION],l);if(c){var d=l.getViewRoot();d&&(n.direction=aboveViewRoot(d,c.node)?"rollUp":"drillDown"),l.resetViewRoot(c.node)}}}),t.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(n,a,s){n=extend({},n),a.eachComponent({mainType:"series",subType:"sunburst",query:n},l);function l(u){var c=retrieveTargetInfo(n,[HIGHLIGHT_ACTION],u);c&&(n.dataIndex=c.node.dataIndex)}s.dispatchAction(extend(n,{type:"highlight"}))}),t.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(n,a,s){n=extend({},n),s.dispatchAction(extend(n,{type:"downplay"}))})}var SunburstView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){var c=this;this.seriesModel=a,this.api=l,this.ecModel=s;var d=a.getData(),Ct=d.tree.root,ar=a.getViewRoot(),en=this.group,tn=a.get("renderLabelForZeroData"),on=[];ar.eachNode(function(ox){on.push(ox)});var fn=this._oldChildren||[];dn(on,fn),ax(Ct,ar),this._initEvents(),this._oldChildren=on;function dn(ox,sx){if(ox.length===0&&sx.length===0)return;new DataDiffer(sx,ox,lx,lx).add(cx).update(cx).remove(curry$1(cx,null)).execute();function lx(fx){return fx.getId()}function cx(fx,gx){var mx=fx==null?null:ox[fx],px=gx==null?null:sx[gx];Cn(mx,px)}}function Cn(ox,sx){if(!tn&&ox&&!ox.getValue()&&(ox=null),ox!==Ct&&sx!==Ct){if(sx&&sx.piece)ox?(sx.piece.updateData(!1,ox,a,s,l),d.setItemGraphicEl(ox.dataIndex,sx.piece)):Rn(sx);else if(ox){var lx=new SunburstPiece(ox,a,s,l);en.add(lx),d.setItemGraphicEl(ox.dataIndex,lx)}}}function Rn(ox){ox&&ox.piece&&(en.remove(ox.piece),ox.piece=null)}function ax(ox,sx){sx.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,ox,a,s,l):(c.virtualPiece=new SunburstPiece(ox,a,s,l),en.add(c.virtualPiece)),sx.piece.off("click"),c.virtualPiece.on("click",function(lx){c._rootToNode(sx.parentNode)})):c.virtualPiece&&(en.remove(c.virtualPiece),c.virtualPiece=null)}},n.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(s){var l=!1,u=a.seriesModel.getViewRoot();u.eachNode(function(c){if(!l&&c.piece&&c.piece===s.target){var d=c.getModel().get("nodeClick");if(d==="rootToNode")a._rootToNode(c);else if(d==="link"){var Ct=c.getModel(),ar=Ct.get("link");if(ar){var en=Ct.get("target",!0)||"_blank";windowOpen(ar,en)}}l=!0}})})},n.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},n.prototype.containPoint=function(a,s){var l=s.getData(),u=l.getItemLayout(0);if(u){var c=a[0]-u.cx,d=a[1]-u.cy,Ct=Math.sqrt(c*c+d*d);return Ct<=u.r&&Ct>=u.r0}},n.type="sunburst",n})(ChartView),SunburstSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a,s){var l={name:a.name,children:a.data};completeTreeValue(l);var u=this._levelModels=map$1(a.levels||[],function(Ct){return new Model(Ct,this,s)},this),c=Tree.createTree(l,this,d);function d(Ct){Ct.wrapMethod("getItemModel",function(ar,en){var tn=c.getNodeByDataIndex(en),on=u[tn.depth];return on&&(ar.parentModel=on),ar})}return c.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treePathInfo=wrapTreePathInfo(l,this),s},n.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n})(SeriesModel);function completeTreeValue(t){var n=0;each$f(t.children,function(s){completeTreeValue(s);var l=s.value;isArray$1(l)&&(l=l[0]),n+=l});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}var RADIAN=Math.PI/180;function sunburstLayout(t,n,a){n.eachSeriesByType(t,function(s){var l=s.get("center"),u=s.get("radius");isArray$1(u)||(u=[0,u]),isArray$1(l)||(l=[l,l]);var c=a.getWidth(),d=a.getHeight(),Ct=Math.min(c,d),ar=parsePercent(l[0],c),en=parsePercent(l[1],d),tn=parsePercent(u[0],Ct/2),on=parsePercent(u[1],Ct/2),fn=-s.get("startAngle")*RADIAN,dn=s.get("minAngle")*RADIAN,Cn=s.getData().tree.root,Rn=s.getViewRoot(),ax=Rn.depth,ox=s.get("sort");ox!=null&&initChildren(Rn,ox);var sx=0;each$f(Rn.children,function(bx){!isNaN(bx.getValue())&&sx++});var lx=Rn.getValue(),cx=Math.PI/(lx||sx)*2,fx=Rn.depth>0,gx=Rn.height-(fx?-1:1),mx=(on-tn)/(gx||1),px=s.get("clockwise"),hx=s.get("stillShowZeroSum"),vx=px?1:-1,yx=function(bx,Ax){if(bx){var Mx=Ax;if(bx!==Cn){var Rx=bx.getValue(),Cx=lx===0&&hx?cx:Rx*cx;Cx<dn&&(Cx=dn),Mx=Ax+vx*Cx;var Lx=bx.depth-ax-(fx?-1:1),qx=tn+mx*Lx,Ix=tn+mx*(Lx+1),Px=s.getLevelModel(bx);if(Px){var Nx=Px.get("r0",!0),Bx=Px.get("r",!0),$x=Px.get("radius",!0);$x!=null&&(Nx=$x[0],Bx=$x[1]),Nx!=null&&(qx=parsePercent(Nx,Ct/2)),Bx!=null&&(Ix=parsePercent(Bx,Ct/2))}bx.setLayout({angle:Cx,startAngle:Ax,endAngle:Mx,clockwise:px,cx:ar,cy:en,r0:qx,r:Ix})}if(bx.children&&bx.children.length){var Vx=0;each$f(bx.children,function(Gx){Vx+=yx(Gx,Ax+Vx)})}return Mx-Ax}};if(fx){var Sx=tn,_x=tn+mx,Ex=Math.PI*2;Cn.setLayout({angle:Ex,startAngle:fn,endAngle:fn+Ex,clockwise:px,cx:ar,cy:en,r0:Sx,r:_x})}yx(Rn,fn)})}function initChildren(t,n){var a=t.children||[];t.children=sort(a,n),a.length&&each$f(t.children,function(s){initChildren(s,n)})}function sort(t,n){if(isFunction$1(n)){var a=map$1(t,function(l,u){var c=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return c}},index:u}});return a.sort(function(l,u){return n(l.params,u.params)}),map$1(a,function(l){return t[l.index]})}else{var s=n==="asc";return t.sort(function(l,u){var c=(l.getValue()-u.getValue())*(s?1:-1);return c===0?(l.dataIndex-u.dataIndex)*(s?-1:1):c})}}function sunburstVisual(t){var n={};function a(s,l,u){for(var c=s;c&&c.depth>1;)c=c.parentNode;var d=l.getColorFromPalette(c.name||c.dataIndex+"",n);return s.depth>1&&isString$1(d)&&(d=lift(d,(s.depth-1)/(u-1)*.5)),d}t.eachSeriesByType("sunburst",function(s){var l=s.getData(),u=l.tree;u.eachNode(function(c){var d=c.getModel(),Ct=d.getModel("itemStyle").getItemStyle();Ct.fill||(Ct.fill=a(c,s,u.root.height));var ar=l.ensureUniqueItemVisual(c.dataIndex,"style");extend(ar,Ct)})})}function install$s(t){t.registerChartView(SunburstView),t.registerSeriesModel(SunburstSeriesModel),t.registerLayout(curry$1(sunburstLayout,"sunburst")),t.registerProcessor(curry$1(dataFilter$1,"sunburst")),t.registerVisual(sunburstVisual),installSunburstAction(t)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(a,s){return createSeriesData(null,this)},n.prototype.getDataParams=function(a,s,l){var u=t.prototype.getDataParams.call(this,a,s);return l&&(u.info=customInnerStore(l).info),u},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n})(SeriesModel);function dataToCoordSize$3(t,n){return n=n||[0,0],map$1(["x","y"],function(a,s){var l=this.getAxis(a),u=n[s],c=t[s]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(u-c)-l.dataToCoord(u+c))},this)}function cartesianPrepareCustom(t){var n=t.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$3,t)}}}function dataToCoordSize$2(t,n){return n=n||[0,0],map$1([0,1],function(a){var s=n[a],l=t[a]/2,u=[],c=[];return u[a]=s-l,c[a]=s+l,u[1-a]=c[1-a]=n[1-a],Math.abs(this.dataToPoint(u)[a]-this.dataToPoint(c)[a])},this)}function geoPrepareCustom(t){var n=t.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:t.getZoom()},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$2,t)}}}function dataToCoordSize$1(t,n){var a=this.getAxis(),s=n instanceof Array?n[0]:n,l=(t instanceof Array?t[0]:t)/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(s-l)-a.dataToCoord(s+l))}function singlePrepareCustom(t){var n=t.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$1,t)}}}function dataToCoordSize(t,n){return n=n||[0,0],map$1(["Radius","Angle"],function(a,s){var l="get"+a+"Axis",u=this[l](),c=n[s],d=t[s]/2,Ct=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-d)-u.dataToCoord(c+d));return a==="Angle"&&(Ct=Ct*Math.PI/180),Ct},this)}function polarPrepareCustom(t){var n=t.getRadiusAxis(),a=t.getAngleAxis(),s=n.getExtent();return s[0]>s[1]&&s.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:s[1],r0:s[0]},api:{coord:function(l){var u=n.dataToRadius(l[0]),c=a.dataToAngle(l[1]),d=t.coordToPoint([u,c]);return d.push(u,c*Math.PI/180),d},size:bind$1(dataToCoordSize,t)}}}function calendarPrepareCustom(t){var n=t.getRect(),a=t.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(s,l){return t.dataToPoint(s,l)}}}}function isEC4CompatibleStyle(t,n,a,s){return t&&(t.legacy||t.legacy!==!1&&!a&&!s&&n!=="tspan"&&(n==="text"||hasOwn(t,"text")))}function convertFromEC4CompatibleStyle(t,n,a){var s=t,l,u,c;if(n==="text")c=s;else{c={},hasOwn(s,"text")&&(c.text=s.text),hasOwn(s,"rich")&&(c.rich=s.rich),hasOwn(s,"textFill")&&(c.fill=s.textFill),hasOwn(s,"textStroke")&&(c.stroke=s.textStroke),hasOwn(s,"fontFamily")&&(c.fontFamily=s.fontFamily),hasOwn(s,"fontSize")&&(c.fontSize=s.fontSize),hasOwn(s,"fontStyle")&&(c.fontStyle=s.fontStyle),hasOwn(s,"fontWeight")&&(c.fontWeight=s.fontWeight),u={type:"text",style:c,silent:!0},l={};var d=hasOwn(s,"textPosition");a?l.position=d?s.textPosition:"inside":d&&(l.position=s.textPosition),hasOwn(s,"textPosition")&&(l.position=s.textPosition),hasOwn(s,"textOffset")&&(l.offset=s.textOffset),hasOwn(s,"textRotation")&&(l.rotation=s.textRotation),hasOwn(s,"textDistance")&&(l.distance=s.textDistance)}return convertEC4CompatibleRichItem(c,t),each$f(c.rich,function(Ct){convertEC4CompatibleRichItem(Ct,Ct)}),{textConfig:l,textContent:u}}function convertEC4CompatibleRichItem(t,n){n&&(n.font=n.textFont||n.font,hasOwn(n,"textStrokeWidth")&&(t.lineWidth=n.textStrokeWidth),hasOwn(n,"textAlign")&&(t.align=n.textAlign),hasOwn(n,"textVerticalAlign")&&(t.verticalAlign=n.textVerticalAlign),hasOwn(n,"textLineHeight")&&(t.lineHeight=n.textLineHeight),hasOwn(n,"textWidth")&&(t.width=n.textWidth),hasOwn(n,"textHeight")&&(t.height=n.textHeight),hasOwn(n,"textBackgroundColor")&&(t.backgroundColor=n.textBackgroundColor),hasOwn(n,"textPadding")&&(t.padding=n.textPadding),hasOwn(n,"textBorderColor")&&(t.borderColor=n.textBorderColor),hasOwn(n,"textBorderWidth")&&(t.borderWidth=n.textBorderWidth),hasOwn(n,"textBorderRadius")&&(t.borderRadius=n.textBorderRadius),hasOwn(n,"textBoxShadowColor")&&(t.shadowColor=n.textBoxShadowColor),hasOwn(n,"textBoxShadowBlur")&&(t.shadowBlur=n.textBoxShadowBlur),hasOwn(n,"textBoxShadowOffsetX")&&(t.shadowOffsetX=n.textBoxShadowOffsetX),hasOwn(n,"textBoxShadowOffsetY")&&(t.shadowOffsetY=n.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(t,n,a){var s=t;s.textPosition=s.textPosition||a.position||"inside",a.offset!=null&&(s.textOffset=a.offset),a.rotation!=null&&(s.textRotation=a.rotation),a.distance!=null&&(s.textDistance=a.distance);var l=s.textPosition.indexOf("inside")>=0,u=t.fill||"#000";convertToEC4RichItem(s,n);var c=s.textFill==null;return l?c&&(s.textFill=a.insideFill||"#fff",!s.textStroke&&a.insideStroke&&(s.textStroke=a.insideStroke),!s.textStroke&&(s.textStroke=u),s.textStrokeWidth==null&&(s.textStrokeWidth=2)):(c&&(s.textFill=t.fill||a.outsideFill||"#000"),!s.textStroke&&a.outsideStroke&&(s.textStroke=a.outsideStroke)),s.text=n.text,s.rich=n.rich,each$f(n.rich,function(d){convertToEC4RichItem(d,d)}),s}function convertToEC4RichItem(t,n){n&&(hasOwn(n,"fill")&&(t.textFill=n.fill),hasOwn(n,"stroke")&&(t.textStroke=n.fill),hasOwn(n,"lineWidth")&&(t.textStrokeWidth=n.lineWidth),hasOwn(n,"font")&&(t.font=n.font),hasOwn(n,"fontStyle")&&(t.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(t.fontWeight=n.fontWeight),hasOwn(n,"fontSize")&&(t.fontSize=n.fontSize),hasOwn(n,"fontFamily")&&(t.fontFamily=n.fontFamily),hasOwn(n,"align")&&(t.textAlign=n.align),hasOwn(n,"verticalAlign")&&(t.textVerticalAlign=n.verticalAlign),hasOwn(n,"lineHeight")&&(t.textLineHeight=n.lineHeight),hasOwn(n,"width")&&(t.textWidth=n.width),hasOwn(n,"height")&&(t.textHeight=n.height),hasOwn(n,"backgroundColor")&&(t.textBackgroundColor=n.backgroundColor),hasOwn(n,"padding")&&(t.textPadding=n.padding),hasOwn(n,"borderColor")&&(t.textBorderColor=n.borderColor),hasOwn(n,"borderWidth")&&(t.textBorderWidth=n.borderWidth),hasOwn(n,"borderRadius")&&(t.textBorderRadius=n.borderRadius),hasOwn(n,"shadowColor")&&(t.textBoxShadowColor=n.shadowColor),hasOwn(n,"shadowBlur")&&(t.textBoxShadowBlur=n.shadowBlur),hasOwn(n,"shadowOffsetX")&&(t.textBoxShadowOffsetX=n.shadowOffsetX),hasOwn(n,"shadowOffsetY")&&(t.textBoxShadowOffsetY=n.shadowOffsetY),hasOwn(n,"textShadowColor")&&(t.textShadowColor=n.textShadowColor),hasOwn(n,"textShadowBlur")&&(t.textShadowBlur=n.textShadowBlur),hasOwn(n,"textShadowOffsetX")&&(t.textShadowOffsetX=n.textShadowOffsetX),hasOwn(n,"textShadowOffsetY")&&(t.textShadowOffsetY=n.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=1,t},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(t,n,a,s,l){var u=t+"Animation",c=getAnimationConfig(t,s,l)||{},d=transitionInnerStore(n).userDuring;return c.duration>0&&(c.during=d?bind$1(duringCall,{el:n,userDuring:d}):null,c.setToFinal=!0,c.scope=t),extend(c,a[u]),c}function applyUpdateTransition(t,n,a,s){s=s||{};var l=s.dataIndex,u=s.isInit,c=s.clearStyle,d=a.isAnimationEnabled(),Ct=transitionInnerStore(t),ar=n.style;Ct.userDuring=n.during;var en={},tn={};if(prepareTransformAllPropsFinal(t,n,tn),prepareShapeOrExtraAllPropsFinal("shape",n,tn),prepareShapeOrExtraAllPropsFinal("extra",n,tn),!u&&d&&(prepareTransformTransitionFrom(t,n,en),prepareShapeOrExtraTransitionFrom("shape",t,n,en),prepareShapeOrExtraTransitionFrom("extra",t,n,en),prepareStyleTransitionFrom(t,n,ar,en)),tn.style=ar,applyPropsDirectly(t,tn,c),applyMiscProps(t,n),d)if(u){var on={};each$f(ELEMENT_ANIMATABLE_PROPS,function(dn){var Cn=dn?n[dn]:n;Cn&&Cn.enterFrom&&(dn&&(on[dn]=on[dn]||{}),extend(dn?on[dn]:on,Cn.enterFrom))});var fn=getElementAnimationConfig("enter",t,n,a,l);fn.duration>0&&t.animateFrom(on,fn)}else applyPropsTransition(t,n,l||0,a,en);updateLeaveTo(t,n),ar?t.dirty():t.markRedraw()}function updateLeaveTo(t,n){for(var a=transitionInnerStore(t).leaveToProps,s=0;s<ELEMENT_ANIMATABLE_PROPS.length;s++){var l=ELEMENT_ANIMATABLE_PROPS[s],u=l?n[l]:n;u&&u.leaveTo&&(a||(a=transitionInnerStore(t).leaveToProps={}),l&&(a[l]=a[l]||{}),extend(l?a[l]:a,u.leaveTo))}}function applyLeaveTransition(t,n,a,s){if(t){var l=t.parent,u=transitionInnerStore(t).leaveToProps;if(u){var c=getElementAnimationConfig("update",t,n,a,0);c.done=function(){l.remove(t)},t.animateTo(u,c)}else l.remove(t)}}function isTransitionAll(t){return t==="all"}function applyPropsDirectly(t,n,a){var s=n.style;if(!t.isGroup&&s){if(a){t.useStyle({});for(var l=t.animators,u=0;u<l.length;u++){var c=l[u];c.targetName==="style"&&c.changeTarget(t.style)}}t.setStyle(s)}n&&(n.style=null,n&&t.attr(n),n.style=s)}function applyPropsTransition(t,n,a,s,l){if(l){var u=getElementAnimationConfig("update",t,n,s,a);u.duration>0&&t.animateFrom(l,u)}}function applyMiscProps(t,n){hasOwn(n,"silent")&&(t.silent=n.silent),hasOwn(n,"ignore")&&(t.ignore=n.ignore),t instanceof Displayable&&hasOwn(n,"invisible")&&(t.invisible=n.invisible),t instanceof Path&&hasOwn(n,"autoBatch")&&(t.autoBatch=n.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(t,n){return tmpDuringScope.el[t]=n,this},getTransform:function(t){return tmpDuringScope.el[t]},setShape:function(t,n){var a=tmpDuringScope.el,s=a.shape||(a.shape={});return s[t]=n,a.dirtyShape&&a.dirtyShape(),this},getShape:function(t){var n=tmpDuringScope.el.shape;if(n)return n[t]},setStyle:function(t,n){var a=tmpDuringScope.el,s=a.style;return s&&(s[t]=n,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(t){var n=tmpDuringScope.el.style;if(n)return n[t]},setExtra:function(t,n){var a=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return a[t]=n,this},getExtra:function(t){var n=tmpDuringScope.el.extra;if(n)return n[t]}};function duringCall(){var t=this,n=t.el;if(n){var a=transitionInnerStore(n).userDuring,s=t.userDuring;if(a!==s){t.el=t.userDuring=null;return}tmpDuringScope.el=n,s(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(t,n,a,s){var l=a[t];if(l){var u=n[t],c;if(u){var d=a.transition,Ct=l.transition;if(Ct)if(!c&&(c=s[t]={}),isTransitionAll(Ct))extend(c,u);else for(var ar=normalizeToArray(Ct),en=0;en<ar.length;en++){var tn=ar[en],on=u[tn];c[tn]=on}else if(isTransitionAll(d)||indexOf(d,t)>=0){!c&&(c=s[t]={});for(var fn=keys(u),en=0;en<fn.length;en++){var tn=fn[en],on=u[tn];isNonStyleTransitionEnabled(l[tn],on)&&(c[tn]=on)}}}}}function prepareShapeOrExtraAllPropsFinal(t,n,a){var s=n[t];if(s)for(var l=a[t]={},u=keys(s),c=0;c<u.length;c++){var d=u[c];l[d]=cloneValue(s[d])}}function prepareTransformTransitionFrom(t,n,a){for(var s=n.transition,l=isTransitionAll(s)?TRANSFORMABLE_PROPS:normalizeToArray(s||[]),u=0;u<l.length;u++){var c=l[u];if(!(c==="style"||c==="shape"||c==="extra")){var d=t[c];a[c]=d}}}function prepareTransformAllPropsFinal(t,n,a){for(var s=0;s<LEGACY_TRANSFORM_PROPS.length;s++){var l=LEGACY_TRANSFORM_PROPS[s],u=LEGACY_TRANSFORM_PROPS_MAP[l],c=n[l];c&&(a[u[0]]=c[0],a[u[1]]=c[1])}for(var s=0;s<TRANSFORMABLE_PROPS.length;s++){var d=TRANSFORMABLE_PROPS[s];n[d]!=null&&(a[d]=n[d])}}function prepareStyleTransitionFrom(t,n,a,s){if(a){var l=t.style,u;if(l){var c=a.transition,d=n.transition;if(c&&!isTransitionAll(c)){var Ct=normalizeToArray(c);!u&&(u=s.style={});for(var ar=0;ar<Ct.length;ar++){var en=Ct[ar],tn=l[en];u[en]=tn}}else if(t.getAnimationStyleProps&&(isTransitionAll(d)||isTransitionAll(c)||indexOf(d,"style")>=0)){var on=t.getAnimationStyleProps(),fn=on?on.style:null;if(fn){!u&&(u=s.style={});for(var dn=keys(a),ar=0;ar<dn.length;ar++){var en=dn[ar];if(fn[en]){var tn=l[en];u[en]=tn}}}}}}}function isNonStyleTransitionEnabled(t,n){return isArrayLike(t)?t!==n:t!=null&&isFinite(t)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(t){t.stopAnimation("keyframe"),t.attr(getStateToRestore(t))}function applyKeyframeAnimation(t,n,a){if(!(!a.isAnimationEnabled()||!n)){if(isArray$1(n)){each$f(n,function(d){applyKeyframeAnimation(t,d,a)});return}var s=n.keyframes,l=n.duration;if(a&&l==null){var u=getAnimationConfig("enter",a,0);l=u&&u.duration}if(!(!s||!l)){var c=getStateToRestore(t);each$f(ELEMENT_ANIMATABLE_PROPS,function(d){if(!(d&&!t[d])){var Ct;s.sort(function(ar,en){return ar.percent-en.percent}),each$f(s,function(ar){var en=t.animators,tn=d?ar[d]:ar;if(tn){var on=keys(tn);if(d||(on=filter(on,function(Cn){return indexOf(KEYFRAME_EXCLUDE_KEYS,Cn)<0})),!!on.length){Ct||(Ct=t.animate(d,n.loop,!0),Ct.scope="keyframe");for(var fn=0;fn<en.length;fn++)en[fn]!==Ct&&en[fn].targetName===Ct.targetName&&en[fn].stopTracks(on);d&&(c[d]=c[d]||{});var dn=d?c[d]:c;each$f(on,function(Cn){dn[Cn]=((d?t[d]:t)||{})[Cn]}),Ct.whenWithKeys(l*ar.percent,tn,on,ar.easing)}}}),Ct&&Ct.delay(n.delay||0).duration(l).start(n.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(t){return t instanceof Path}function isDisplayable(t){return t instanceof Displayable}function copyElement(t,n){n.copyTransform(t),isDisplayable(n)&&isDisplayable(t)&&(n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n.invisible=t.invisible,n.ignore=t.ignore,isPath(n)&&isPath(t)&&n.setShape(t.shape))}var CustomChartView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this._progressiveEls=null;var c=this._data,d=a.getData(),Ct=this.group,ar=makeRenderItem(a,d,s,l);c||Ct.removeAll(),d.diff(c).add(function(tn){createOrUpdateItem(l,null,tn,ar(tn,u),a,Ct,d)}).remove(function(tn){var on=c.getItemGraphicEl(tn);on&&applyLeaveTransition(on,customInnerStore(on).option,a)}).update(function(tn,on){var fn=c.getItemGraphicEl(on);createOrUpdateItem(l,fn,tn,ar(tn,u),a,Ct,d)}).execute();var en=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;en?Ct.setClipPath(en):Ct.removeClipPath(),this._data=d},n.prototype.incrementalPrepareRender=function(a,s,l){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(a,s,l,u,c){var d=s.getData(),Ct=makeRenderItem(s,d,l,u),ar=this._progressiveEls=[];function en(fn){fn.isGroup||(fn.incremental=!0,fn.ensureState("emphasis").hoverLayer=!0)}for(var tn=a.start;tn<a.end;tn++){var on=createOrUpdateItem(null,null,tn,Ct(tn,c),s,this.group,d);on&&(on.traverse(en),ar.push(on))}},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype.filterForExposedEvent=function(a,s,l,u){var c=s.element;if(c==null||l.name===c)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===c)return!0;return!1},n.type="custom",n})(ChartView);function createEl$1(t){var n=t.type,a;if(n==="path"){var s=t.shape,l=s.width!=null&&s.height!=null?{x:s.x||0,y:s.y||0,width:s.width,height:s.height}:null,u=getPathData(s);a=makePath(u,null,l,s.layout||"center"),customInnerStore(a).customPathData=u}else if(n==="image")a=new ZRImage({}),customInnerStore(a).customImagePath=t.style.image;else if(n==="text")a=new ZRText({});else if(n==="group")a=new Group$3;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(n);if(!c){var d="";throwError(d)}a=new c}return customInnerStore(a).customGraphicType=n,a.name=t.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function updateElNormal(t,n,a,s,l,u,c){stopPreviousKeyframeAnimationAndRestore(n);var d=l&&l.normal.cfg;d&&n.setTextConfig(d),s&&s.transition==null&&(s.transition=DEFAULT_TRANSITION);var Ct=s&&s.style;if(Ct){if(n.type==="text"){var ar=Ct;hasOwn(ar,"textFill")&&(ar.fill=ar.textFill),hasOwn(ar,"textStroke")&&(ar.stroke=ar.textStroke)}var en=void 0,tn=isPath(n)?Ct.decal:null;t&&tn&&(tn.dirty=!0,en=createOrUpdatePatternFromDecal(tn,t)),Ct.__decalPattern=en}if(isDisplayable(n)&&Ct){var en=Ct.__decalPattern;en&&(Ct.decal=en)}applyUpdateTransition(n,s,u,{dataIndex:a,isInit:c,clearStyle:!0}),applyKeyframeAnimation(n,s.keyframeAnimation,u)}function updateElOnState(t,n,a,s,l){var u=n.isGroup?null:n,c=l&&l[t].cfg;if(u){var d=u.ensureState(t);if(s===!1){var Ct=u.getState(t);Ct&&(Ct.style=null)}else d.style=s||null;c&&(d.textConfig=c),setDefaultStateProxy(u)}}function updateZ(t,n,a){if(!t.isGroup){var s=t,l=a.currentZ,u=a.currentZLevel;s.z=l,s.zlevel=u;var c=n.z2;c!=null&&(s.z2=c||0);for(var d=0;d<STATES.length;d++)updateZForEachState(s,n,STATES[d])}}function updateZForEachState(t,n,a){var s=a===NORMAL,l=s?n:retrieveStateOption(n,a),u=l?l.z2:null,c;u!=null&&(c=s?t:t.ensureState(a),c.z2=u||0)}function makeRenderItem(t,n,a,s){var l=t.get("renderItem"),u=t.coordinateSystem,c={};u&&(c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var d=defaults({getWidth:s.getWidth,getHeight:s.getHeight,getZr:s.getZr,getDevicePixelRatio:s.getDevicePixelRatio,value:lx,style:fx,ordinalRawValue:cx,styleEmphasis:gx,visual:hx,barLayout:vx,currentSeriesIndices:yx,font:Sx},c.api||{}),Ct={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:c.coordSys,dataInsideLength:n.count(),encode:wrapEncodeDef(t.getData())},ar,en,tn={},on={},fn={},dn={},Cn=0;Cn<STATES.length;Cn++){var Rn=STATES[Cn];fn[Rn]=t.getModel(PATH_ITEM_STYLE[Rn]),dn[Rn]=t.getModel(PATH_LABEL[Rn])}function ax(_x){return _x===ar?en||(en=n.getItemModel(_x)):n.getItemModel(_x)}function ox(_x,Ex){return n.hasItemOption?_x===ar?tn[Ex]||(tn[Ex]=ax(_x).getModel(PATH_ITEM_STYLE[Ex])):ax(_x).getModel(PATH_ITEM_STYLE[Ex]):fn[Ex]}function sx(_x,Ex){return n.hasItemOption?_x===ar?on[Ex]||(on[Ex]=ax(_x).getModel(PATH_LABEL[Ex])):ax(_x).getModel(PATH_LABEL[Ex]):dn[Ex]}return function(_x,Ex){return ar=_x,en=null,tn={},on={},l&&l(defaults({dataIndexInside:_x,dataIndex:n.getRawIndex(_x),actionType:Ex?Ex.type:null},Ct),d)};function lx(_x,Ex){return Ex==null&&(Ex=ar),n.getStore().get(n.getDimensionIndex(_x||0),Ex)}function cx(_x,Ex){Ex==null&&(Ex=ar),_x=_x||0;var bx=n.getDimensionInfo(_x);if(!bx){var Ax=n.getDimensionIndex(_x);return Ax>=0?n.getStore().get(Ax,Ex):void 0}var Mx=n.get(bx.name,Ex),Rx=bx&&bx.ordinalMeta;return Rx?Rx.categories[Mx]:Mx}function fx(_x,Ex){Ex==null&&(Ex=ar);var bx=n.getItemVisual(Ex,"style"),Ax=bx&&bx.fill,Mx=bx&&bx.opacity,Rx=ox(Ex,NORMAL).getItemStyle();Ax!=null&&(Rx.fill=Ax),Mx!=null&&(Rx.opacity=Mx);var Cx={inheritColor:isString$1(Ax)?Ax:"#000"},Lx=sx(Ex,NORMAL),qx=createTextStyle$1(Lx,null,Cx,!1,!0);qx.text=Lx.getShallow("show")?retrieve2(t.getFormattedLabel(Ex,NORMAL),getDefaultLabel(n,Ex)):null;var Ix=createTextConfig(Lx,Cx,!1);return px(_x,Rx),Rx=convertToEC4StyleForCustomSerise(Rx,qx,Ix),_x&&mx(Rx,_x),Rx.legacy=!0,Rx}function gx(_x,Ex){Ex==null&&(Ex=ar);var bx=ox(Ex,EMPHASIS).getItemStyle(),Ax=sx(Ex,EMPHASIS),Mx=createTextStyle$1(Ax,null,null,!0,!0);Mx.text=Ax.getShallow("show")?retrieve3(t.getFormattedLabel(Ex,EMPHASIS),t.getFormattedLabel(Ex,NORMAL),getDefaultLabel(n,Ex)):null;var Rx=createTextConfig(Ax,null,!0);return px(_x,bx),bx=convertToEC4StyleForCustomSerise(bx,Mx,Rx),_x&&mx(bx,_x),bx.legacy=!0,bx}function mx(_x,Ex){for(var bx in Ex)hasOwn(Ex,bx)&&(_x[bx]=Ex[bx])}function px(_x,Ex){_x&&(_x.textFill&&(Ex.textFill=_x.textFill),_x.textPosition&&(Ex.textPosition=_x.textPosition))}function hx(_x,Ex){if(Ex==null&&(Ex=ar),hasOwn(STYLE_VISUAL_TYPE,_x)){var bx=n.getItemVisual(Ex,"style");return bx?bx[STYLE_VISUAL_TYPE[_x]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,_x))return n.getItemVisual(Ex,_x)}function vx(_x){if(u.type==="cartesian2d"){var Ex=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:Ex},_x))}}function yx(){return a.getCurrentSeriesIndices()}function Sx(_x){return getFont(_x,a)}}function wrapEncodeDef(t){var n={};return each$f(t.dimensions,function(a){var s=t.getDimensionInfo(a);if(!s.isExtraCoord){var l=s.coordDim,u=n[l]=n[l]||[];u[s.coordDimIndex]=t.getDimensionIndex(a)}}),n}function createOrUpdateItem(t,n,a,s,l,u,c){if(!s){u.remove(n);return}var d=doCreateOrUpdateEl(t,n,a,s,l,u);return d&&c.setItemGraphicEl(a,d),d&&toggleHoverEmphasis(d,s.focus,s.blurScope,s.emphasisDisabled),d}function doCreateOrUpdateEl(t,n,a,s,l,u){var c=-1,d=n;n&&doesElNeedRecreate(n,s,l)&&(c=indexOf(u.childrenRef(),n),n=null);var Ct=!n,ar=n;ar?ar.clearStates():(ar=createEl$1(s),d&&copyElement(d,ar)),s.morph===!1?ar.disableMorphing=!0:ar.disableMorphing&&(ar.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(ar,a,s,l,Ct,attachedTxInfoTmp),doCreateOrUpdateClipPath(ar,a,s,l,Ct),updateElNormal(t,ar,a,s,attachedTxInfoTmp,l,Ct),hasOwn(s,"info")&&(customInnerStore(ar).info=s.info);for(var en=0;en<STATES.length;en++){var tn=STATES[en];if(tn!==NORMAL){var on=retrieveStateOption(s,tn),fn=retrieveStyleOptionOnState(s,on,tn);updateElOnState(tn,ar,on,fn,attachedTxInfoTmp)}}return updateZ(ar,s,l),s.type==="group"&&mergeChildren(t,ar,a,s,l),c>=0?u.replaceAt(ar,c):u.add(ar),ar}function doesElNeedRecreate(t,n,a){var s=customInnerStore(t),l=n.type,u=n.shape,c=n.style;return a.isUniversalTransitionEnabled()||l!=null&&l!==s.customGraphicType||l==="path"&&hasOwnPathData(u)&&getPathData(u)!==s.customPathData||l==="image"&&hasOwn(c,"image")&&c.image!==s.customImagePath}function doCreateOrUpdateClipPath(t,n,a,s,l){var u=a.clipPath;if(u===!1)t&&t.getClipPath()&&t.removeClipPath();else if(u){var c=t.getClipPath();c&&doesElNeedRecreate(c,u,s)&&(c=null),c||(c=createEl$1(u),t.setClipPath(c)),updateElNormal(null,c,n,u,null,s,l)}}function doCreateOrUpdateAttachedTx(t,n,a,s,l,u){if(!t.isGroup){processTxInfo(a,null,u),processTxInfo(a,EMPHASIS,u);var c=u.normal.conOpt,d=u.emphasis.conOpt,Ct=u.blur.conOpt,ar=u.select.conOpt;if(c!=null||d!=null||ar!=null||Ct!=null){var en=t.getTextContent();if(c===!1)en&&t.removeTextContent();else{c=u.normal.conOpt=c||{type:"text"},en?en.clearStates():(en=createEl$1(c),t.setTextContent(en)),updateElNormal(null,en,n,c,null,s,l);for(var tn=c&&c.style,on=0;on<STATES.length;on++){var fn=STATES[on];if(fn!==NORMAL){var dn=u[fn].conOpt;updateElOnState(fn,en,dn,retrieveStyleOptionOnState(c,dn,fn),null)}}tn?en.dirty():en.markRedraw()}}}}function processTxInfo(t,n,a){var s=n?retrieveStateOption(t,n):t,l=n?retrieveStyleOptionOnState(t,s,EMPHASIS):t.style,u=t.type,c=s?s.textConfig:null,d=t.textContent,Ct=d?n?retrieveStateOption(d,n):d:null;if(l&&(a.isLegacy||isEC4CompatibleStyle(l,u,!!c,!!Ct))){a.isLegacy=!0;var ar=convertFromEC4CompatibleStyle(l,u,!n);!c&&ar.textConfig&&(c=ar.textConfig),!Ct&&ar.textContent&&(Ct=ar.textContent)}if(!n&&Ct){var en=Ct;!en.type&&(en.type="text")}var tn=n?a[n]:a.normal;tn.cfg=c,tn.conOpt=Ct}function retrieveStateOption(t,n){return n?t?t[n]:null:t}function retrieveStyleOptionOnState(t,n,a){var s=n&&n.style;return s==null&&a===EMPHASIS&&t&&(s=t.styleEmphasis),s}function mergeChildren(t,n,a,s,l){var u=s.children,c=u?u.length:0,d=s.$mergeChildren,Ct=d==="byName"||s.diffChildrenByName,ar=d===!1;if(!(!c&&!Ct&&!ar)){if(Ct){diffGroupChildren({api:t,oldChildren:n.children()||[],newChildren:u||[],dataIndex:a,seriesModel:l,group:n});return}ar&&n.removeAll();for(var en=0;en<c;en++){var tn=u[en],on=n.childAt(en);tn?(tn.ignore==null&&(tn.ignore=!1),doCreateOrUpdateEl(t,on,a,tn,l,n)):on.ignore=!0}for(var fn=n.childCount()-1;fn>=en;fn--){var dn=n.childAt(fn);removeChildFromGroup(n,dn,l)}}}function removeChildFromGroup(t,n,a){n&&applyLeaveTransition(n,customInnerStore(t).option,a)}function diffGroupChildren(t){new DataDiffer(t.oldChildren,t.newChildren,getKey,getKey,t).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(t,n){var a=t&&t.name;return a??GROUP_DIFF_PREFIX+n}function processAddUpdate(t,n){var a=this.context,s=t!=null?a.newChildren[t]:null,l=n!=null?a.oldChildren[n]:null;doCreateOrUpdateEl(a.api,l,a.dataIndex,s,a.seriesModel,a.group)}function processRemove(t){var n=this.context,a=n.oldChildren[t];a&&applyLeaveTransition(a,customInnerStore(a).option,n.seriesModel)}function getPathData(t){return t&&(t.pathData||t.d)}function hasOwnPathData(t){return t&&(hasOwn(t,"pathData")||hasOwn(t,"d"))}function install$r(t){t.registerChartView(CustomChartView),t.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=(function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(n,a,s,l){var u=a.get("value"),c=a.get("status");if(this._axisModel=n,this._axisPointerModel=a,this._api=s,!(!l&&this._lastValue===u&&this._lastStatus===c)){this._lastValue=u,this._lastStatus=c;var d=this._group,Ct=this._handle;if(!c||c==="hide"){d&&d.hide(),Ct&&Ct.hide();return}d&&d.show(),Ct&&Ct.show();var ar={};this.makeElOption(ar,u,n,a,s);var en=ar.graphicKey;en!==this._lastGraphicKey&&this.clear(s),this._lastGraphicKey=en;var tn=this._moveAnimation=this.determineAnimation(n,a);if(!d)d=this._group=new Group$3,this.createPointerEl(d,ar,n,a),this.createLabelEl(d,ar,n,a),s.getZr().add(d);else{var on=curry$1(updateProps,a,tn);this.updatePointerEl(d,ar,on),this.updateLabelEl(d,ar,on,a)}updateMandatoryProps(d,a,!0),this._renderHandle(u)}},t.prototype.remove=function(n){this.clear(n)},t.prototype.dispose=function(n){this.clear(n)},t.prototype.determineAnimation=function(n,a){var s=a.get("animation"),l=n.axis,u=l.type==="category",c=a.get("snap");if(!c&&!u)return!1;if(s==="auto"||s==null){var d=this.animationThreshold;if(u&&l.getBandWidth()>d)return!0;if(c){var Ct=getAxisInfo$1(n).seriesDataCount,ar=l.getExtent();return Math.abs(ar[0]-ar[1])/Ct>d}return!1}return s===!0},t.prototype.makeElOption=function(n,a,s,l,u){},t.prototype.createPointerEl=function(n,a,s,l){var u=a.pointer;if(u){var c=inner$b(n).pointerEl=new graphic$1[u.type](clone$1(a.pointer));n.add(c)}},t.prototype.createLabelEl=function(n,a,s,l){if(a.label){var u=inner$b(n).labelEl=new ZRText(clone$1(a.label));n.add(u),updateLabelShowHide(u,l)}},t.prototype.updatePointerEl=function(n,a,s){var l=inner$b(n).pointerEl;l&&a.pointer&&(l.setStyle(a.pointer.style),s(l,{shape:a.pointer.shape}))},t.prototype.updateLabelEl=function(n,a,s,l){var u=inner$b(n).labelEl;u&&(u.setStyle(a.label.style),s(u,{x:a.label.x,y:a.label.y}),updateLabelShowHide(u,l))},t.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,s=this._api.getZr(),l=this._handle,u=a.getModel("handle"),c=a.get("status");if(!u.get("show")||!c||c==="hide"){l&&s.remove(l),this._handle=null;return}var d;this._handle||(d=!0,l=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(ar){stop(ar.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),s.add(l)),updateMandatoryProps(l,a,!1),l.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var Ct=u.get("size");isArray$1(Ct)||(Ct=[Ct,Ct]),l.scaleX=Ct[0]/2,l.scaleY=Ct[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,d)}},t.prototype._moveHandleToValue=function(n,a){updateProps(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(n,a){var s=this._handle;if(s){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(s),[n,a],this._axisModel,this._axisPointerModel);this._payloadInfo=l,s.stopAnimation(),s.attr(getHandleTransProps(l)),inner$b(s).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var a=this._payloadInfo,s=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:s.axis.dim,axisIndex:s.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var a=n.getZr(),s=this._group,l=this._handle;a&&s&&(this._lastGraphicKey=null,s&&a.remove(s),l&&a.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(n,a,s){return s=s||0,{x:n[s],y:n[1-s],width:a[s],height:a[1-s]}},t})();function updateProps(t,n,a,s){propsEqual(inner$b(a).lastProp,s)||(inner$b(a).lastProp=s,n?updateProps$1(a,s,t):(a.stopAnimation(),a.attr(s)))}function propsEqual(t,n){if(isObject$3(t)&&isObject$3(n)){var a=!0;return each$f(n,function(s,l){a=a&&propsEqual(t[l],s)}),!!a}else return t===n}function updateLabelShowHide(t,n){t[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function updateMandatoryProps(t,n,a){var s=n.get("z"),l=n.get("zlevel");t&&t.traverse(function(u){u.type!=="group"&&(s!=null&&(u.z=s),l!=null&&(u.zlevel=l),u.silent=a)})}function buildElStyle(t){var n=t.get("type"),a=t.getModel(n+"Style"),s;return n==="line"?(s=a.getLineStyle(),s.fill=null):n==="shadow"&&(s=a.getAreaStyle(),s.stroke=null),s}function buildLabelElOption(t,n,a,s,l){var u=a.get("value"),c=getValueLabel(u,n.axis,n.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),d=a.getModel("label"),Ct=normalizeCssArray(d.get("padding")||0),ar=d.getFont(),en=getBoundingRect(c,ar),tn=l.position,on=en.width+Ct[1]+Ct[3],fn=en.height+Ct[0]+Ct[2],dn=l.align;dn==="right"&&(tn[0]-=on),dn==="center"&&(tn[0]-=on/2);var Cn=l.verticalAlign;Cn==="bottom"&&(tn[1]-=fn),Cn==="middle"&&(tn[1]-=fn/2),confineInContainer(tn,on,fn,s);var Rn=d.get("backgroundColor");(!Rn||Rn==="auto")&&(Rn=n.get(["axisLine","lineStyle","color"])),t.label={x:tn[0],y:tn[1],style:createTextStyle$1(d,{text:c,font:ar,fill:d.getTextColor(),padding:Ct,backgroundColor:Rn}),z2:10}}function confineInContainer(t,n,a,s){var l=s.getWidth(),u=s.getHeight();t[0]=Math.min(t[0]+n,l)-n,t[1]=Math.min(t[1]+a,u)-a,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function getValueLabel(t,n,a,s,l){t=n.scale.parse(t);var u=n.scale.getLabel({value:t},{precision:l.precision}),c=l.formatter;if(c){var d={value:getAxisRawValue(n,{value:t}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$f(s,function(Ct){var ar=a.getSeriesByIndex(Ct.seriesIndex),en=Ct.dataIndexInside,tn=ar&&ar.getDataParams(en);tn&&d.seriesData.push(tn)}),isString$1(c)?u=c.replace("{value}",u):isFunction$1(c)&&(u=c(d))}return u}function getTransformedPosition(t,n,a){var s=create$1();return rotate(s,s,a.rotation),translate(s,s,a.position),applyTransform([t.dataToCoord(n),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],s)}function buildCartesianSingleLabelElOption(t,n,a,s,l,u){var c=AxisBuilder.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=l.get(["label","margin"]),buildLabelElOption(n,s,l,u,{position:getTransformedPosition(s.axis,t,a),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(t,n,a){return a=a||0,{x1:t[a],y1:t[1-a],x2:n[a],y2:n[1-a]}}function makeRectShape(t,n,a){return a=a||0,{x:t[a],y:t[1-a],width:n[a],height:n[1-a]}}function makeSectorShape(t,n,a,s,l,u){return{cx:t,cy:n,r0:a,r:s,startAngle:l,endAngle:u,clockwise:!0}}var CartesianAxisPointer=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var d=l.axis,Ct=d.grid,ar=u.get("type"),en=getCartesian(Ct,d).getOtherAxis(d).getGlobalExtent(),tn=d.toGlobalCoord(d.dataToCoord(s,!0));if(ar&&ar!=="none"){var on=buildElStyle(u),fn=pointerShapeBuilder$2[ar](d,tn,en);fn.style=on,a.graphicKey=fn.type,a.pointer=fn}var dn=layout$2(Ct.model,l);buildCartesianSingleLabelElOption(s,a,dn,l,u,c)},n.prototype.getHandleTransform=function(a,s,l){var u=layout$2(s.axis.grid.model,s,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,s,l,u){var c=l.axis,d=c.grid,Ct=c.getGlobalExtent(!0),ar=getCartesian(d,c).getOtherAxis(c).getGlobalExtent(),en=c.dim==="x"?0:1,tn=[a.x,a.y];tn[en]+=s[en],tn[en]=Math.min(Ct[1],tn[en]),tn[en]=Math.max(Ct[0],tn[en]);var on=(ar[1]+ar[0])/2,fn=[on,on];fn[en]=tn[en];var dn=[{verticalAlign:"middle"},{align:"center"}];return{x:tn[0],y:tn[1],rotation:a.rotation,cursorPoint:fn,tooltipOption:dn[en]}},n})(BaseAxisPointer);function getCartesian(t,n){var a={};return a[n.dim+"AxisIndex"]=n.index,t.getCartesian(a)}var pointerShapeBuilder$2={line:function(t,n,a){var s=makeLineShape([n,a[0]],[n,a[1]],getAxisDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(t,n,a){var s=Math.max(1,t.getBandWidth()),l=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-s/2,a[0]],[s,l],getAxisDimIndex(t))}}};function getAxisDimIndex(t){return t.dim==="x"?0:1}var AxisPointerModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n})(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(t,n,a){if(!env.node){var s=n.getZr();inner$a(s).records||(inner$a(s).records={}),initGlobalListeners(s,n);var l=inner$a(s).records[t]||(inner$a(s).records[t]={});l.handler=a}}function initGlobalListeners(t,n){if(inner$a(t).initialized)return;inner$a(t).initialized=!0,a("click",curry$1(doEnter,"click")),a("mousemove",curry$1(doEnter,"mousemove")),a("globalout",onLeave);function a(s,l){t.on(s,function(u){var c=makeDispatchAction$1(n);each$8(inner$a(t).records,function(d){d&&l(d,u,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,n)})}}function dispatchTooltipFinally(t,n){var a=t.showTip.length,s=t.hideTip.length,l;a?l=t.showTip[a-1]:s&&(l=t.hideTip[s-1]),l&&(l.dispatchAction=null,n.dispatchAction(l))}function onLeave(t,n,a){t.handler("leave",null,a)}function doEnter(t,n,a,s){n.handler(t,a,s)}function makeDispatchAction$1(t){var n={showTip:[],hideTip:[]},a=function(s){var l=n[s.type];l?l.push(s):(s.dispatchAction=a,t.dispatchAction(s))};return{dispatchAction:a,pendings:n}}function unregister(t,n){if(!env.node){var a=n.getZr(),s=(inner$a(a).records||{})[t];s&&(inner$a(a).records[t]=null)}}var AxisPointerView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=s.getComponent("tooltip"),c=a.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(d,Ct,ar){c!=="none"&&(d==="leave"||c.indexOf(d)>=0)&&ar({type:"updateAxisPointer",currTrigger:d,x:Ct&&Ct.offsetX,y:Ct&&Ct.offsetY})})},n.prototype.remove=function(a,s){unregister("axisPointer",s)},n.prototype.dispose=function(a,s){unregister("axisPointer",s)},n.type="axisPointer",n})(ComponentView);function findPointFromSeries(t,n){var a=[],s=t.seriesIndex,l;if(s==null||!(l=n.getSeriesByIndex(s)))return{point:[]};var u=l.getData(),c=queryDataIndex(u,t);if(c==null||c<0||isArray$1(c))return{point:[]};var d=u.getItemGraphicEl(c),Ct=l.coordinateSystem;if(l.getTooltipPosition)a=l.getTooltipPosition(c)||[];else if(Ct&&Ct.dataToPoint)if(t.isStacked){var ar=Ct.getBaseAxis(),en=Ct.getOtherAxis(ar),tn=en.dim,on=ar.dim,fn=tn==="x"||tn==="radius"?1:0,dn=u.mapDimension(on),Cn=[];Cn[fn]=u.get(dn,c),Cn[1-fn]=u.get(u.getCalculationInfo("stackResultDimension"),c),a=Ct.dataToPoint(Cn)||[]}else a=Ct.dataToPoint(u.getValues(map$1(Ct.dimensions,function(ax){return u.mapDimension(ax)}),c))||[];else if(d){var Rn=d.getBoundingRect().clone();Rn.applyTransform(d.transform),a=[Rn.x+Rn.width/2,Rn.y+Rn.height/2]}return{point:a,el:d}}var inner$9=makeInner();function axisTrigger(t,n,a){var s=t.currTrigger,l=[t.x,t.y],u=t,c=t.dispatchAction||bind$1(a.dispatchAction,a),d=n.getComponent("axisPointer").coordSysAxesInfo;if(d){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},n).point);var Ct=illegalPoint(l),ar=u.axesInfo,en=d.axesInfo,tn=s==="leave"||illegalPoint(l),on={},fn={},dn={list:[],map:{}},Cn={showPointer:curry$1(showPointer,fn),showTooltip:curry$1(showTooltip,dn)};each$f(d.coordSysMap,function(ax,ox){var sx=Ct||ax.containPoint(l);each$f(d.coordSysAxesInfo[ox],function(lx,cx){var fx=lx.axis,gx=findInputAxisInfo(ar,lx);if(!tn&&sx&&(!ar||gx)){var mx=gx&&gx.value;mx==null&&!Ct&&(mx=fx.pointToData(l)),mx!=null&&processOnAxis(lx,mx,Cn,!1,on)}})});var Rn={};return each$f(en,function(ax,ox){var sx=ax.linkGroup;sx&&!fn[ox]&&each$f(sx.axesInfo,function(lx,cx){var fx=fn[cx];if(lx!==ax&&fx){var gx=fx.value;sx.mapper&&(gx=ax.axis.scale.parse(sx.mapper(gx,makeMapperParam(lx),makeMapperParam(ax)))),Rn[ax.key]=gx}})}),each$f(Rn,function(ax,ox){processOnAxis(en[ox],ax,Cn,!0,on)}),updateModelActually(fn,en,on),dispatchTooltipActually(dn,l,t,c),dispatchHighDownActually(en,c,a),on}}function processOnAxis(t,n,a,s,l){var u=t.axis;if(!(u.scale.isBlank()||!u.containData(n))){if(!t.involveSeries){a.showPointer(t,n);return}var c=buildPayloadsBySeries(n,t),d=c.payloadBatch,Ct=c.snapToValue;d[0]&&l.seriesIndex==null&&extend(l,d[0]),!s&&t.snap&&u.containData(Ct)&&Ct!=null&&(n=Ct),a.showPointer(t,n,d),a.showTooltip(t,c,Ct)}}function buildPayloadsBySeries(t,n){var a=n.axis,s=a.dim,l=t,u=[],c=Number.MAX_VALUE,d=-1;return each$f(n.seriesModels,function(Ct,ar){var en=Ct.getData().mapDimensionsAll(s),tn,on;if(Ct.getAxisTooltipData){var fn=Ct.getAxisTooltipData(en,t,a);on=fn.dataIndices,tn=fn.nestestValue}else{if(on=Ct.getData().indicesOfNearest(en[0],t,a.type==="category"?.5:null),!on.length)return;tn=Ct.getData().get(en[0],on[0])}if(!(tn==null||!isFinite(tn))){var dn=t-tn,Cn=Math.abs(dn);Cn<=c&&((Cn<c||dn>=0&&d<0)&&(c=Cn,d=dn,l=tn,u.length=0),each$f(on,function(Rn){u.push({seriesIndex:Ct.seriesIndex,dataIndexInside:Rn,dataIndex:Ct.getData().getRawIndex(Rn)})}))}}),{payloadBatch:u,snapToValue:l}}function showPointer(t,n,a,s){t[n.key]={value:a,payloadBatch:s}}function showTooltip(t,n,a,s){var l=a.payloadBatch,u=n.axis,c=u.model,d=n.axisPointerModel;if(!(!n.triggerTooltip||!l.length)){var Ct=n.coordSys.model,ar=makeKey(Ct),en=t.map[ar];en||(en=t.map[ar]={coordSysId:Ct.id,coordSysIndex:Ct.componentIndex,coordSysType:Ct.type,coordSysMainType:Ct.mainType,dataByAxis:[]},t.list.push(en)),en.dataByAxis.push({axisDim:u.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:s,valueLabelOpt:{precision:d.get(["label","precision"]),formatter:d.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(t,n,a){var s=a.axesInfo=[];each$f(n,function(l,u){var c=l.axisPointerModel.option,d=t[u];d?(!l.useHandle&&(c.status="show"),c.value=d.value,c.seriesDataIndices=(d.payloadBatch||[]).slice()):!l.useHandle&&(c.status="hide"),c.status==="show"&&s.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(t,n,a,s){if(illegalPoint(n)||!t.list.length){s({type:"hideTip"});return}var l=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};s({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:t.list})}function dispatchHighDownActually(t,n,a){var s=a.getZr(),l="axisPointerLastHighlights",u=inner$9(s)[l]||{},c=inner$9(s)[l]={};each$f(t,function(ar,en){var tn=ar.axisPointerModel.option;tn.status==="show"&&ar.triggerEmphasis&&each$f(tn.seriesDataIndices,function(on){var fn=on.seriesIndex+" | "+on.dataIndex;c[fn]=on})});var d=[],Ct=[];each$f(u,function(ar,en){!c[en]&&Ct.push(ar)}),each$f(c,function(ar,en){!u[en]&&d.push(ar)}),Ct.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:Ct}),d.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:d})}function findInputAxisInfo(t,n){for(var a=0;a<(t||[]).length;a++){var s=t[a];if(n.axis.dim===s.axisDim&&n.axis.model.componentIndex===s.axisIndex)return s}}function makeMapperParam(t){var n=t.axis.model,a={},s=a.axisDim=t.axis.dim;return a.axisIndex=a[s+"AxisIndex"]=n.componentIndex,a.axisName=a[s+"AxisName"]=n.name,a.axisId=a[s+"AxisId"]=n.id,a}function illegalPoint(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function install$q(t){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),t.registerComponentModel(AxisPointerModel),t.registerComponentView(AxisPointerView),t.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var a=n.axisPointer.link;a&&!isArray$1(a)&&(n.axisPointer.link=[a])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(n,a){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,a)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(t){use(install$N),use(install$q)}var PolarAxisPointer=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var d=l.axis;d.dim==="angle"&&(this.animationThreshold=Math.PI/18);var Ct=d.polar,ar=Ct.getOtherAxis(d),en=ar.getExtent(),tn=d.dataToCoord(s),on=u.get("type");if(on&&on!=="none"){var fn=buildElStyle(u),dn=pointerShapeBuilder$1[on](d,Ct,tn,en);dn.style=fn,a.graphicKey=dn.type,a.pointer=dn}var Cn=u.get(["label","margin"]),Rn=getLabelPosition(s,l,u,Ct,Cn);buildLabelElOption(a,l,u,c,Rn)},n})(BaseAxisPointer);function getLabelPosition(t,n,a,s,l){var u=n.axis,c=u.dataToCoord(t),d=s.getAngleAxis().getExtent()[0];d=d/180*Math.PI;var Ct=s.getRadiusAxis().getExtent(),ar,en,tn;if(u.dim==="radius"){var on=create$1();rotate(on,on,d),translate(on,on,[s.cx,s.cy]),ar=applyTransform([c,-l],on);var fn=n.getModel("axisLabel").get("rotate")||0,dn=AxisBuilder.innerTextLayout(d,fn*Math.PI/180,-1);en=dn.textAlign,tn=dn.textVerticalAlign}else{var Cn=Ct[1];ar=s.coordToPoint([Cn+l,c]);var Rn=s.cx,ax=s.cy;en=Math.abs(ar[0]-Rn)/Cn<.3?"center":ar[0]>Rn?"left":"right",tn=Math.abs(ar[1]-ax)/Cn<.3?"middle":ar[1]>ax?"top":"bottom"}return{position:ar,align:en,verticalAlign:tn}}var pointerShapeBuilder$1={line:function(t,n,a,s){return t.dim==="angle"?{type:"Line",shape:makeLineShape(n.coordToPoint([s[0],a]),n.coordToPoint([s[1],a]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r:a}}},shadow:function(t,n,a,s){var l=Math.max(1,t.getBandWidth()),u=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:makeSectorShape(n.cx,n.cy,s[0],s[1],(-a-l/2)*u,(-a+l/2)*u)}:{type:"Sector",shape:makeSectorShape(n.cx,n.cy,a-l/2,a+l/2,0,Math.PI*2)}}},PolarModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.findAxisModel=function(a){var s,l=this.ecModel;return l.eachComponent(a,function(u){u.getCoordSysModel()===this&&(s=u)},this),s},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n})(ComponentModel),PolarAxisModel=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},n.type="polarAxis",n})(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="angleAxis",n})(PolarAxisModel),RadiusAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="radiusAxis",n})(PolarAxisModel),RadiusAxis=(function(t){__extends(n,t);function n(a,s){return t.call(this,"radius",a,s)||this}return n.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},n})(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=(function(t){__extends(n,t);function n(a,s){return t.call(this,"angle",a,s||[0,360])||this}return n.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},n.prototype.calculateCategoryInterval=function(){var a=this,s=a.getLabelModel(),l=a.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var d=u[0],Ct=a.dataToCoord(d+1)-a.dataToCoord(d),ar=Math.abs(Ct),en=getBoundingRect(d==null?"":d+"",s.getFont(),"center","top"),tn=Math.max(en.height,7),on=tn/ar;isNaN(on)&&(on=1/0);var fn=Math.max(0,Math.floor(on)),dn=inner$8(a.model),Cn=dn.lastAutoInterval,Rn=dn.lastTickCount;return Cn!=null&&Rn!=null&&Math.abs(Cn-fn)<=1&&Math.abs(Rn-c)<=1&&Cn>fn?fn=Cn:(dn.lastTickCount=c,dn.lastAutoInterval=fn),fn},n})(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=(function(){function t(n){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(n){var a=this.pointToCoord(n);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},t.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},t.prototype.getAxis=function(n){var a="_"+n+"Axis";return this[a]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(n){var a=[],s=this._angleAxis,l=this._radiusAxis;return s.scale.type===n&&a.push(s),l.scale.type===n&&a.push(l),a},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(n){var a=this._angleAxis;return n===a?this._radiusAxis:a},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(n){var a=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},t.prototype.dataToPoint=function(n,a){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],a),this._angleAxis.dataToAngle(n[1],a)])},t.prototype.pointToData=function(n,a){var s=this.pointToCoord(n);return[this._radiusAxis.radiusToData(s[0],a),this._angleAxis.angleToData(s[1],a)]},t.prototype.pointToCoord=function(n){var a=n[0]-this.cx,s=n[1]-this.cy,l=this.getAngleAxis(),u=l.getExtent(),c=Math.min(u[0],u[1]),d=Math.max(u[0],u[1]);l.inverse?c=d-360:d=c+360;var Ct=Math.sqrt(a*a+s*s);a/=Ct,s/=Ct;for(var ar=Math.atan2(-s,a)/Math.PI*180,en=ar<c?1:-1;ar<c||ar>d;)ar+=en*360;return[Ct,ar]},t.prototype.coordToPoint=function(n){var a=n[0],s=n[1]/180*Math.PI,l=Math.cos(s)*a+this.cx,u=-Math.sin(s)*a+this.cy;return[l,u]},t.prototype.getArea=function(){var n=this.getAngleAxis(),a=this.getRadiusAxis(),s=a.getExtent().slice();s[0]>s[1]&&s.reverse();var l=n.getExtent(),u=Math.PI/180,c=1e-4;return{cx:this.cx,cy:this.cy,r0:s[0],r:s[1],startAngle:-l[0]*u,endAngle:-l[1]*u,clockwise:n.inverse,contain:function(d,Ct){var ar=d-this.cx,en=Ct-this.cy,tn=ar*ar+en*en,on=this.r,fn=this.r0;return on!==fn&&tn-c<=on*on&&tn+c>=fn*fn}}},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys$2(a);return l===this?this.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys$2(a);return l===this?this.pointToData(s):null},t})();function getCoordSys$2(t){var n=t.seriesModel,a=t.polarModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function resizePolar(t,n,a){var s=n.get("center"),l=a.getWidth(),u=a.getHeight();t.cx=parsePercent(s[0],l),t.cy=parsePercent(s[1],u);var c=t.getRadiusAxis(),d=Math.min(l,u)/2,Ct=n.get("radius");Ct==null?Ct=[0,"100%"]:isArray$1(Ct)||(Ct=[0,Ct]);var ar=[parsePercent(Ct[0],d),parsePercent(Ct[1],d)];c.inverse?c.setExtent(ar[1],ar[0]):c.setExtent(ar[0],ar[1])}function updatePolarScale(t,n){var a=this,s=a.getAngleAxis(),l=a.getRadiusAxis();if(s.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),t.eachSeries(function(d){if(d.coordinateSystem===a){var Ct=d.getData();each$f(getDataDimensionsOnAxis(Ct,"radius"),function(ar){l.scale.unionExtentFromData(Ct,ar)}),each$f(getDataDimensionsOnAxis(Ct,"angle"),function(ar){s.scale.unionExtentFromData(Ct,ar)})}}),niceScaleExtent(s.scale,s.model),niceScaleExtent(l.scale,l.model),s.type==="category"&&!s.onBand){var u=s.getExtent(),c=360/s.scale.count();s.inverse?u[1]+=c:u[1]-=c,s.setExtent(u[0],u[1])}}function isAngleAxisModel(t){return t.mainType==="angleAxis"}function setAxis(t,n){var a;if(t.type=n.get("type"),t.scale=createScaleByModel$1(n),t.onBand=n.get("boundaryGap")&&t.type==="category",t.inverse=n.get("inverse"),isAngleAxisModel(n)){t.inverse=t.inverse!==n.get("clockwise");var s=n.get("startAngle"),l=(a=n.get("endAngle"))!==null&&a!==void 0?a:s+(t.inverse?-360:360);t.setExtent(s,l)}n.axis=t,t.model=n}var polarCreator={dimensions:polarDimensions,create:function(t,n){var a=[];return t.eachComponent("polar",function(s,l){var u=new Polar(l+"");u.update=updatePolarScale;var c=u.getRadiusAxis(),d=u.getAngleAxis(),Ct=s.findAxisModel("radiusAxis"),ar=s.findAxisModel("angleAxis");setAxis(c,Ct),setAxis(d,ar),resizePolar(u,s,n),a.push(u),s.coordinateSystem=u,u.model=s}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="polar"){var l=s.getReferringComponents("polar",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),a}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(t,n,a){n[1]>n[0]&&(n=n.slice().reverse());var s=t.coordToPoint([n[0],a]),l=t.coordToPoint([n[1],a]);return{x1:s[0],y1:s[1],x2:l[0],y2:l[1]}}function getRadiusIdx(t){var n=t.getRadiusAxis();return n.inverse?0:1}function fixAngleOverlap(t){var n=t[0],a=t[t.length-1];n&&a&&Math.abs(Math.abs(n.coord-a.coord)-360)<1e-4&&t.pop()}var AngleAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var l=a.axis,u=l.polar,c=u.getRadiusAxis().getExtent(),d=l.getTicksCoords(),Ct=l.getMinorTicksCoords(),ar=map$1(l.getViewLabels(),function(en){en=clone$4(en);var tn=l.scale,on=tn.type==="ordinal"?tn.getRawOrdinalNumber(en.tickValue):en.tickValue;return en.coord=l.dataToCoord(on),en});fixAngleOverlap(ar),fixAngleOverlap(d),each$f(elementList,function(en){a.get([en,"show"])&&(!l.scale.isBlank()||en==="axisLine")&&angelAxisElementsBuilders[en](this.group,a,u,d,Ct,c,ar)},this)}},n.type="angleAxis",n})(AxisView),angelAxisElementsBuilders={axisLine:function(t,n,a,s,l,u){var c=n.getModel(["axisLine","lineStyle"]),d=a.getAngleAxis(),Ct=Math.PI/180,ar=d.getExtent(),en=getRadiusIdx(a),tn=en?0:1,on,fn=Math.abs(ar[1]-ar[0])===360?"Circle":"Arc";u[tn]===0?on=new graphic$1[fn]({shape:{cx:a.cx,cy:a.cy,r:u[en],startAngle:-ar[0]*Ct,endAngle:-ar[1]*Ct,clockwise:d.inverse},style:c.getLineStyle(),z2:1,silent:!0}):on=new Ring({shape:{cx:a.cx,cy:a.cy,r:u[en],r0:u[tn]},style:c.getLineStyle(),z2:1,silent:!0}),on.style.fill=null,t.add(on)},axisTick:function(t,n,a,s,l,u){var c=n.getModel("axisTick"),d=(c.get("inside")?-1:1)*c.get("length"),Ct=u[getRadiusIdx(a)],ar=map$1(s,function(en){return new Line$1({shape:getAxisLineShape(a,[Ct,Ct+d],en.coord)})});t.add(mergePath(ar,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,n,a,s,l,u){if(l.length){for(var c=n.getModel("axisTick"),d=n.getModel("minorTick"),Ct=(c.get("inside")?-1:1)*d.get("length"),ar=u[getRadiusIdx(a)],en=[],tn=0;tn<l.length;tn++)for(var on=0;on<l[tn].length;on++)en.push(new Line$1({shape:getAxisLineShape(a,[ar,ar+Ct],l[tn][on].coord)}));t.add(mergePath(en,{style:defaults(d.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,n,a,s,l,u,c){var d=n.getCategories(!0),Ct=n.getModel("axisLabel"),ar=Ct.get("margin"),en=n.get("triggerEvent");each$f(c,function(tn,on){var fn=Ct,dn=tn.tickValue,Cn=u[getRadiusIdx(a)],Rn=a.coordToPoint([Cn+ar,tn.coord]),ax=a.cx,ox=a.cy,sx=Math.abs(Rn[0]-ax)/Cn<.3?"center":Rn[0]>ax?"left":"right",lx=Math.abs(Rn[1]-ox)/Cn<.3?"middle":Rn[1]>ox?"top":"bottom";if(d&&d[dn]){var cx=d[dn];isObject$3(cx)&&cx.textStyle&&(fn=new Model(cx.textStyle,Ct,Ct.ecModel))}var fx=new ZRText({silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(fn,{x:Rn[0],y:Rn[1],fill:fn.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:tn.formattedLabel,align:sx,verticalAlign:lx})});if(t.add(fx),en){var gx=AxisBuilder.makeAxisEventDataBase(n);gx.targetType="axisLabel",gx.value=tn.rawLabel,getECData(fx).eventData=gx}},this)},splitLine:function(t,n,a,s,l,u){var c=n.getModel("splitLine"),d=c.getModel("lineStyle"),Ct=d.get("color"),ar=0;Ct=Ct instanceof Array?Ct:[Ct];for(var en=[],tn=0;tn<s.length;tn++){var on=ar++%Ct.length;en[on]=en[on]||[],en[on].push(new Line$1({shape:getAxisLineShape(a,u,s[tn].coord)}))}for(var tn=0;tn<en.length;tn++)t.add(mergePath(en[tn],{style:defaults({stroke:Ct[tn%Ct.length]},d.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(t,n,a,s,l,u){if(l.length){for(var c=n.getModel("minorSplitLine"),d=c.getModel("lineStyle"),Ct=[],ar=0;ar<l.length;ar++)for(var en=0;en<l[ar].length;en++)Ct.push(new Line$1({shape:getAxisLineShape(a,u,l[ar][en].coord)}));t.add(mergePath(Ct,{style:d.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(t,n,a,s,l,u){if(s.length){var c=n.getModel("splitArea"),d=c.getModel("areaStyle"),Ct=d.get("color"),ar=0;Ct=Ct instanceof Array?Ct:[Ct];for(var en=[],tn=Math.PI/180,on=-s[0].coord*tn,fn=Math.min(u[0],u[1]),dn=Math.max(u[0],u[1]),Cn=n.get("clockwise"),Rn=1,ax=s.length;Rn<=ax;Rn++){var ox=Rn===ax?s[0].coord:s[Rn].coord,sx=ar++%Ct.length;en[sx]=en[sx]||[],en[sx].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:fn,r:dn,startAngle:on,endAngle:-ox*tn,clockwise:Cn},silent:!0})),on=-ox*tn}for(var Rn=0;Rn<en.length;Rn++)t.add(mergePath(en[Rn],{style:defaults({fill:Ct[Rn%Ct.length]},d.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var l=this._axisGroup,u=this._axisGroup=new Group$3;this.group.add(u);var c=a.axis,d=c.polar,Ct=d.getAngleAxis(),ar=c.getTicksCoords(),en=c.getMinorTicksCoords(),tn=Ct.getExtent()[0],on=c.getExtent(),fn=layoutAxis(d,a,tn),dn=new AxisBuilder(a,fn);each$f(axisBuilderAttrs$1,dn.add,dn),u.add(dn.getGroup()),groupTransition(l,u,a),each$f(selfBuilderAttrs$1,function(Cn){a.get([Cn,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[Cn](this.group,a,d,tn,on,ar,en)},this)}},n.type="radiusAxis",n})(AxisView),axisElementBuilders$1={splitLine:function(t,n,a,s,l,u){var c=n.getModel("splitLine"),d=c.getModel("lineStyle"),Ct=d.get("color"),ar=0,en=a.getAngleAxis(),tn=Math.PI/180,on=en.getExtent(),fn=Math.abs(on[1]-on[0])===360?"Circle":"Arc";Ct=Ct instanceof Array?Ct:[Ct];for(var dn=[],Cn=0;Cn<u.length;Cn++){var Rn=ar++%Ct.length;dn[Rn]=dn[Rn]||[],dn[Rn].push(new graphic$1[fn]({shape:{cx:a.cx,cy:a.cy,r:Math.max(u[Cn].coord,0),startAngle:-on[0]*tn,endAngle:-on[1]*tn,clockwise:en.inverse}}))}for(var Cn=0;Cn<dn.length;Cn++)t.add(mergePath(dn[Cn],{style:defaults({stroke:Ct[Cn%Ct.length],fill:null},d.getLineStyle()),silent:!0}))},minorSplitLine:function(t,n,a,s,l,u,c){if(c.length){for(var d=n.getModel("minorSplitLine"),Ct=d.getModel("lineStyle"),ar=[],en=0;en<c.length;en++)for(var tn=0;tn<c[en].length;tn++)ar.push(new Circle({shape:{cx:a.cx,cy:a.cy,r:c[en][tn].coord}}));t.add(mergePath(ar,{style:defaults({fill:null},Ct.getLineStyle()),silent:!0}))}},splitArea:function(t,n,a,s,l,u){if(u.length){var c=n.getModel("splitArea"),d=c.getModel("areaStyle"),Ct=d.get("color"),ar=0;Ct=Ct instanceof Array?Ct:[Ct];for(var en=[],tn=u[0].coord,on=1;on<u.length;on++){var fn=ar++%Ct.length;en[fn]=en[fn]||[],en[fn].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:tn,r:u[on].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),tn=u[on].coord}for(var on=0;on<en.length;on++)t.add(mergePath(en[on],{style:defaults({fill:Ct[on%Ct.length]},d.getAreaStyle()),silent:!0}))}}};function layoutAxis(t,n,a){return{position:[t.cx,t.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function getAxisKey(t,n){return n.dim+t.model.componentIndex}function barLayoutPolar(t,n,a){var s={},l=calRadialBar(filter(n.getSeriesByType(t),function(u){return!n.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));n.eachSeriesByType(t,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),d=u.coordinateSystem,Ct=d.getBaseAxis(),ar=getAxisKey(d,Ct),en=getSeriesStackId(u),tn=l[ar][en],on=tn.offset,fn=tn.width,dn=d.getOtherAxis(Ct),Cn=u.coordinateSystem.cx,Rn=u.coordinateSystem.cy,ax=u.get("barMinHeight")||0,ox=u.get("barMinAngle")||0;s[en]=s[en]||[];for(var sx=c.mapDimension(dn.dim),lx=c.mapDimension(Ct.dim),cx=isDimensionStacked(c,sx),fx=Ct.dim!=="radius"||!u.get("roundCap",!0),gx=dn.model,mx=gx.get("startValue"),px=dn.dataToCoord(mx||0),hx=0,vx=c.count();hx<vx;hx++){var yx=c.get(sx,hx),Sx=c.get(lx,hx),_x=yx>=0?"p":"n",Ex=px;cx&&(s[en][Sx]||(s[en][Sx]={p:px,n:px}),Ex=s[en][Sx][_x]);var bx=void 0,Ax=void 0,Mx=void 0,Rx=void 0;if(dn.dim==="radius"){var Cx=dn.dataToCoord(yx)-px,Lx=Ct.dataToCoord(Sx);Math.abs(Cx)<ax&&(Cx=(Cx<0?-1:1)*ax),bx=Ex,Ax=Ex+Cx,Mx=Lx-on,Rx=Mx-fn,cx&&(s[en][Sx][_x]=Ax)}else{var qx=dn.dataToCoord(yx,fx)-px,Ix=Ct.dataToCoord(Sx);Math.abs(qx)<ox&&(qx=(qx<0?-1:1)*ox),bx=Ix+on,Ax=bx+fn,Mx=Ex,Rx=Ex+qx,cx&&(s[en][Sx][_x]=Rx)}c.setItemLayout(hx,{cx:Cn,cy:Rn,r0:bx,r:Ax,startAngle:-Mx*Math.PI/180,endAngle:-Rx*Math.PI/180,clockwise:Mx>=Rx})}}})}function calRadialBar(t){var n={};each$f(t,function(s,l){var u=s.getData(),c=s.coordinateSystem,d=c.getBaseAxis(),Ct=getAxisKey(c,d),ar=d.getExtent(),en=d.type==="category"?d.getBandWidth():Math.abs(ar[1]-ar[0])/u.count(),tn=n[Ct]||{bandWidth:en,remainedWidth:en,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},on=tn.stacks;n[Ct]=tn;var fn=getSeriesStackId(s);on[fn]||tn.autoWidthCount++,on[fn]=on[fn]||{width:0,maxWidth:0};var dn=parsePercent(s.get("barWidth"),en),Cn=parsePercent(s.get("barMaxWidth"),en),Rn=s.get("barGap"),ax=s.get("barCategoryGap");dn&&!on[fn].width&&(dn=Math.min(tn.remainedWidth,dn),on[fn].width=dn,tn.remainedWidth-=dn),Cn&&(on[fn].maxWidth=Cn),Rn!=null&&(tn.gap=Rn),ax!=null&&(tn.categoryGap=ax)});var a={};return each$f(n,function(s,l){a[l]={};var u=s.stacks,c=s.bandWidth,d=parsePercent(s.categoryGap,c),Ct=parsePercent(s.gap,1),ar=s.remainedWidth,en=s.autoWidthCount,tn=(ar-d)/(en+(en-1)*Ct);tn=Math.max(tn,0),each$f(u,function(Cn,Rn){var ax=Cn.maxWidth;ax&&ax<tn&&(ax=Math.min(ax,ar),Cn.width&&(ax=Math.min(ax,Cn.width)),ar-=ax,Cn.width=ax,en--)}),tn=(ar-d)/(en+(en-1)*Ct),tn=Math.max(tn,0);var on=0,fn;each$f(u,function(Cn,Rn){Cn.width||(Cn.width=tn),fn=Cn,on+=Cn.width*(1+Ct)}),fn&&(on-=fn.width*Ct);var dn=-on/2;each$f(u,function(Cn,Rn){a[l][Rn]=a[l][Rn]||{offset:dn,width:Cn.width},dn+=Cn.width*(1+Ct)})}),a}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="polar",n})(ComponentView);function install$o(t){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),t.registerCoordinateSystem("polar",polarCreator),t.registerComponentModel(PolarModel),t.registerComponentView(PolarView),axisModelCreator(t,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(t,"radius",RadiusAxisModel,radiusAxisExtraOption),t.registerComponentView(AngleAxisView),t.registerComponentView(RadiusAxisView),t.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(t,n){n=n||{};var a=t.coordinateSystem,s=t.axis,l={},u=s.position,c=s.orient,d=a.getRect(),Ct=[d.x,d.x+d.width,d.y,d.y+d.height],ar={horizontal:{top:Ct[2],bottom:Ct[3]},vertical:{left:Ct[0],right:Ct[1]}};l.position=[c==="vertical"?ar.vertical[u]:Ct[0],c==="horizontal"?ar.horizontal[u]:Ct[3]];var en={horizontal:0,vertical:1};l.rotation=Math.PI/2*en[c];var tn={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=tn[u],t.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(n.labelInside,t.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var on=n.rotate;return on==null&&(on=t.get(["axisLabel","rotate"])),l.labelRotation=u==="top"?-on:on,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="SingleAxisPointer",a}return n.prototype.render=function(a,s,l,u){var c=this.group;c.removeAll();var d=this._axisGroup;this._axisGroup=new Group$3;var Ct=layout$1(a),ar=new AxisBuilder(a,Ct);each$f(axisBuilderAttrs,ar.add,ar),c.add(this._axisGroup),c.add(ar.getGroup()),each$f(selfBuilderAttrs,function(en){a.get([en,"show"])&&axisElementBuilders[en](this,this.group,this._axisGroup,a)},this),groupTransition(d,this._axisGroup,a),t.prototype.render.call(this,a,s,l,u)},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="singleAxis",n})(AxisView),axisElementBuilders={splitLine:function(t,n,a,s){var l=s.axis;if(!l.scale.isBlank()){var u=s.getModel("splitLine"),c=u.getModel("lineStyle"),d=c.get("color");d=d instanceof Array?d:[d];for(var Ct=c.get("width"),ar=s.coordinateSystem.getRect(),en=l.isHorizontal(),tn=[],on=0,fn=l.getTicksCoords({tickModel:u}),dn=[],Cn=[],Rn=0;Rn<fn.length;++Rn){var ax=l.toGlobalCoord(fn[Rn].coord);en?(dn[0]=ax,dn[1]=ar.y,Cn[0]=ax,Cn[1]=ar.y+ar.height):(dn[0]=ar.x,dn[1]=ax,Cn[0]=ar.x+ar.width,Cn[1]=ax);var ox=new Line$1({shape:{x1:dn[0],y1:dn[1],x2:Cn[0],y2:Cn[1]},silent:!0});subPixelOptimizeLine(ox.shape,Ct);var sx=on++%d.length;tn[sx]=tn[sx]||[],tn[sx].push(ox)}for(var lx=c.getLineStyle(["color"]),Rn=0;Rn<tn.length;++Rn)n.add(mergePath(tn[Rn],{style:defaults({stroke:d[Rn%d.length]},lx),silent:!0}))}},splitArea:function(t,n,a,s){rectCoordAxisBuildSplitArea(t,a,s,s)}},SingleAxisModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n})(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=(function(t){__extends(n,t);function n(a,s,l,u,c){var d=t.call(this,a,s,l)||this;return d.type=u||"value",d.position=c||"bottom",d}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.pointToData=function(a,s){return this.coordinateSystem.pointToData(a)[0]},n})(Axis),singleDimensions=["single"],Single=(function(){function t(n,a,s){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=n,this._init(n,a,s)}return t.prototype._init=function(n,a,s){var l=this.dimension,u=new SingleAxis(l,createScaleByModel$1(n),[0,0],n.get("type"),n.get("position")),c=u.type==="category";u.onBand=c&&n.get("boundaryGap"),u.inverse=n.get("inverse"),u.orient=n.get("orient"),n.axis=u,u.model=n,u.coordinateSystem=this,this._axis=u},t.prototype.update=function(n,a){n.eachSeries(function(s){if(s.coordinateSystem===this){var l=s.getData();each$f(l.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(l,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var n=this._rect,a=this._axis,s=a.isHorizontal(),l=s?[0,n.width]:[0,n.height],u=a.inverse?1:0;a.setExtent(l[u],l[1-u]),this._updateAxisTransform(a,s?n.x:n.y)},t.prototype._updateAxisTransform=function(n,a){var s=n.getExtent(),l=s[0]+s[1],u=n.isHorizontal();n.toGlobalCoord=u?function(c){return c+a}:function(c){return l-c+a},n.toLocalCoord=u?function(c){return c-a}:function(c){return l-c+a}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(n){var a=this.getRect(),s=this.getAxis(),l=s.orient;return l==="horizontal"?s.contain(s.toLocalCoord(n[0]))&&n[1]>=a.y&&n[1]<=a.y+a.height:s.contain(s.toLocalCoord(n[1]))&&n[0]>=a.y&&n[0]<=a.y+a.height},t.prototype.pointToData=function(n){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(n[a.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(n){var a=this.getAxis(),s=this.getRect(),l=[],u=a.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),l[u]=a.toGlobalCoord(a.dataToCoord(+n)),l[1-u]=u===0?s.y+s.height/2:s.x+s.width/2,l},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys$1(a);return l===this?this.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys$1(a);return l===this?this.pointToData(s):null},t})();function getCoordSys$1(t){var n=t.seriesModel,a=t.singleAxisModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function create(t,n){var a=[];return t.eachComponent("singleAxis",function(s,l){var u=new Single(s,t,n);u.name="single_"+l,u.resize(s,n),s.coordinateSystem=u,a.push(u)}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="singleAxis"){var l=s.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];s.coordinateSystem=l&&l.coordinateSystem}}),a}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var d=l.axis,Ct=d.coordinateSystem,ar=getGlobalExtent(Ct,1-getPointDimIndex(d)),en=Ct.dataToPoint(s)[0],tn=u.get("type");if(tn&&tn!=="none"){var on=buildElStyle(u),fn=pointerShapeBuilder[tn](d,en,ar);fn.style=on,a.graphicKey=fn.type,a.pointer=fn}var dn=layout$1(l);buildCartesianSingleLabelElOption(s,a,dn,l,u,c)},n.prototype.getHandleTransform=function(a,s,l){var u=layout$1(s,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,s,l,u){var c=l.axis,d=c.coordinateSystem,Ct=getPointDimIndex(c),ar=getGlobalExtent(d,Ct),en=[a.x,a.y];en[Ct]+=s[Ct],en[Ct]=Math.min(ar[1],en[Ct]),en[Ct]=Math.max(ar[0],en[Ct]);var tn=getGlobalExtent(d,1-Ct),on=(tn[1]+tn[0])/2,fn=[on,on];return fn[Ct]=en[Ct],{x:en[0],y:en[1],rotation:a.rotation,cursorPoint:fn,tooltipOption:{verticalAlign:"middle"}}},n})(BaseAxisPointer),pointerShapeBuilder={line:function(t,n,a){var s=makeLineShape([n,a[0]],[n,a[1]],getPointDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(t,n,a){var s=t.getBandWidth(),l=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-s/2,a[0]],[s,l],getPointDimIndex(t))}}};function getPointDimIndex(t){return t.isHorizontal()?0:1}function getGlobalExtent(t,n){var a=t.getRect();return[a[XY$1[n]],a[XY$1[n]]+a[WH$1[n]]]}var SingleView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="single",n})(ComponentView);function install$n(t){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),t.registerComponentView(SingleView),t.registerComponentView(SingleAxisView),t.registerComponentModel(SingleAxisModel),axisModelCreator(t,"single",SingleAxisModel,SingleAxisModel.defaultOption),t.registerCoordinateSystem("single",singleCreator)}var CalendarModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s,l){var u=getLayoutParams(a);t.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(a,u)},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,a)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n})(ComponentModel);function mergeAndNormalizeLayoutParams$1(t,n){var a=t.cellSize,s;isArray$1(a)?s=a:s=t.cellSize=[a,a],s.length===1&&(s[1]=s[0]);var l=map$1([0,1],function(u){return sizeCalculable(n,u)&&(s[u]="auto"),s[u]!=null&&s[u]!=="auto"});mergeLayoutParam(t,n,{type:"box",ignoreSize:l})}var CalendarView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group;u.removeAll();var c=a.coordinateSystem,d=c.getRangeInfo(),Ct=c.getOrient(),ar=s.getLocaleModel();this._renderDayRect(a,d,u),this._renderLines(a,d,Ct,u),this._renderYearText(a,d,Ct,u),this._renderMonthText(a,ar,Ct,u),this._renderWeekText(a,ar,d,Ct,u)},n.prototype._renderDayRect=function(a,s,l){for(var u=a.coordinateSystem,c=a.getModel("itemStyle").getItemStyle(),d=u.getCellWidth(),Ct=u.getCellHeight(),ar=s.start.time;ar<=s.end.time;ar=u.getNextNDay(ar,1).time){var en=u.dataToRect([ar],!1).tl,tn=new Rect$2({shape:{x:en[0],y:en[1],width:d,height:Ct},cursor:"default",style:c});l.add(tn)}},n.prototype._renderLines=function(a,s,l,u){var c=this,d=a.coordinateSystem,Ct=a.getModel(["splitLine","lineStyle"]).getLineStyle(),ar=a.get(["splitLine","show"]),en=Ct.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var tn=s.start,on=0;tn.time<=s.end.time;on++){dn(tn.formatedDate),on===0&&(tn=d.getDateInfo(s.start.y+"-"+s.start.m));var fn=tn.date;fn.setMonth(fn.getMonth()+1),tn=d.getDateInfo(fn)}dn(d.getNextNDay(s.end.time,1).formatedDate);function dn(Cn){c._firstDayOfMonth.push(d.getDateInfo(Cn)),c._firstDayPoints.push(d.dataToRect([Cn],!1).tl);var Rn=c._getLinePointsOfOneWeek(a,Cn,l);c._tlpoints.push(Rn[0]),c._blpoints.push(Rn[Rn.length-1]),ar&&c._drawSplitline(Rn,Ct,u)}ar&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,en,l),Ct,u),ar&&this._drawSplitline(c._getEdgesPoints(c._blpoints,en,l),Ct,u)},n.prototype._getEdgesPoints=function(a,s,l){var u=[a[0].slice(),a[a.length-1].slice()],c=l==="horizontal"?0:1;return u[0][c]=u[0][c]-s/2,u[1][c]=u[1][c]+s/2,u},n.prototype._drawSplitline=function(a,s,l){var u=new Polyline$1({z2:20,shape:{points:a},style:s});l.add(u)},n.prototype._getLinePointsOfOneWeek=function(a,s,l){for(var u=a.coordinateSystem,c=u.getDateInfo(s),d=[],Ct=0;Ct<7;Ct++){var ar=u.getNextNDay(c.time,Ct),en=u.dataToRect([ar.time],!1);d[2*ar.day]=en.tl,d[2*ar.day+1]=en[l==="horizontal"?"bl":"tr"]}return d},n.prototype._formatterLabel=function(a,s){return isString$1(a)&&a?formatTplSimple(a,s):isFunction$1(a)?a(s):s.nameMap},n.prototype._yearTextPositionControl=function(a,s,l,u,c){var d=s[0],Ct=s[1],ar=["center","bottom"];u==="bottom"?(Ct+=c,ar=["center","top"]):u==="left"?d-=c:u==="right"?(d+=c,ar=["center","top"]):Ct-=c;var en=0;return(u==="left"||u==="right")&&(en=Math.PI/2),{rotation:en,x:d,y:Ct,style:{align:ar[0],verticalAlign:ar[1]}}},n.prototype._renderYearText=function(a,s,l,u){var c=a.getModel("yearLabel");if(c.get("show")){var d=c.get("margin"),Ct=c.get("position");Ct||(Ct=l!=="horizontal"?"top":"left");var ar=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],en=(ar[0][0]+ar[1][0])/2,tn=(ar[0][1]+ar[1][1])/2,on=l==="horizontal"?0:1,fn={top:[en,ar[on][1]],bottom:[en,ar[1-on][1]],left:[ar[1-on][0],tn],right:[ar[on][0],tn]},dn=s.start.y;+s.end.y>+s.start.y&&(dn=dn+"-"+s.end.y);var Cn=c.get("formatter"),Rn={start:s.start.y,end:s.end.y,nameMap:dn},ax=this._formatterLabel(Cn,Rn),ox=new ZRText({z2:30,style:createTextStyle$1(c,{text:ax}),silent:c.get("silent")});ox.attr(this._yearTextPositionControl(ox,fn[Ct],l,Ct,d)),u.add(ox)}},n.prototype._monthTextPositionControl=function(a,s,l,u,c){var d="left",Ct="top",ar=a[0],en=a[1];return l==="horizontal"?(en=en+c,s&&(d="center"),u==="start"&&(Ct="bottom")):(ar=ar+c,s&&(Ct="middle"),u==="start"&&(d="right")),{x:ar,y:en,align:d,verticalAlign:Ct}},n.prototype._renderMonthText=function(a,s,l,u){var c=a.getModel("monthLabel");if(c.get("show")){var d=c.get("nameMap"),Ct=c.get("margin"),ar=c.get("position"),en=c.get("align"),tn=[this._tlpoints,this._blpoints];(!d||isString$1(d))&&(d&&(s=getLocaleModel(d)||s),d=s.get(["time","monthAbbr"])||[]);var on=ar==="start"?0:1,fn=l==="horizontal"?0:1;Ct=ar==="start"?-Ct:Ct;for(var dn=en==="center",Cn=c.get("silent"),Rn=0;Rn<tn[on].length-1;Rn++){var ax=tn[on][Rn].slice(),ox=this._firstDayOfMonth[Rn];if(dn){var sx=this._firstDayPoints[Rn];ax[fn]=(sx[fn]+tn[0][Rn+1][fn])/2}var lx=c.get("formatter"),cx=d[+ox.m-1],fx={yyyy:ox.y,yy:(ox.y+"").slice(2),MM:ox.m,M:+ox.m,nameMap:cx},gx=this._formatterLabel(lx,fx),mx=new ZRText({z2:30,style:extend(createTextStyle$1(c,{text:gx}),this._monthTextPositionControl(ax,dn,l,ar,Ct)),silent:Cn});u.add(mx)}}},n.prototype._weekTextPositionControl=function(a,s,l,u,c){var d="center",Ct="middle",ar=a[0],en=a[1],tn=l==="start";return s==="horizontal"?(ar=ar+u+(tn?1:-1)*c[0]/2,d=tn?"right":"left"):(en=en+u+(tn?1:-1)*c[1]/2,Ct=tn?"bottom":"top"),{x:ar,y:en,align:d,verticalAlign:Ct}},n.prototype._renderWeekText=function(a,s,l,u,c){var d=a.getModel("dayLabel");if(d.get("show")){var Ct=a.coordinateSystem,ar=d.get("position"),en=d.get("nameMap"),tn=d.get("margin"),on=Ct.getFirstDayOfWeek();if(!en||isString$1(en)){en&&(s=getLocaleModel(en)||s);var fn=s.get(["time","dayOfWeekShort"]);en=fn||map$1(s.get(["time","dayOfWeekAbbr"]),function(fx){return fx[0]})}var dn=Ct.getNextNDay(l.end.time,7-l.lweek).time,Cn=[Ct.getCellWidth(),Ct.getCellHeight()];tn=parsePercent(tn,Math.min(Cn[1],Cn[0])),ar==="start"&&(dn=Ct.getNextNDay(l.start.time,-(7+l.fweek)).time,tn=-tn);for(var Rn=d.get("silent"),ax=0;ax<7;ax++){var ox=Ct.getNextNDay(dn,ax),sx=Ct.dataToRect([ox.time],!1).center,lx=ax;lx=Math.abs((ax+on)%7);var cx=new ZRText({z2:30,style:extend(createTextStyle$1(d,{text:en[lx]}),this._weekTextPositionControl(sx,u,ar,tn,Cn)),silent:Rn});c.add(cx)}}},n.type="calendar",n})(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=(function(){function t(n,a,s){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=n}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(n){n=parseDate(n);var a=n.getFullYear(),s=n.getMonth()+1,l=s<10?"0"+s:""+s,u=n.getDate(),c=u<10?"0"+u:""+u,d=n.getDay();return d=Math.abs((d+7-this.getFirstDayOfWeek())%7),{y:a+"",m:l,d:c,day:d,time:n.getTime(),formatedDate:a+"-"+l+"-"+c,date:n}},t.prototype.getNextNDay=function(n,a){return a=a||0,a===0?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+a),this.getDateInfo(n))},t.prototype.update=function(n,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var s=this._rangeInfo.weeks||1,l=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),d=this._orient==="horizontal"?[s,7]:[7,s];each$f([0,1],function(tn){en(u,tn)&&(c[l[tn]]=u[tn]*d[tn])});var Ct={width:a.getWidth(),height:a.getHeight()},ar=this._rect=getLayoutRect(c,Ct);each$f([0,1],function(tn){en(u,tn)||(u[tn]=ar[l[tn]]/d[tn])});function en(tn,on){return tn[on]!=null&&tn[on]!=="auto"}this._sw=u[0],this._sh=u[1]},t.prototype.dataToPoint=function(n,a){isArray$1(n)&&(n=n[0]),a==null&&(a=!0);var s=this.getDateInfo(n),l=this._rangeInfo,u=s.formatedDate;if(a&&!(s.time>=l.start.time&&s.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=s.day,d=this._getRangeInfo([l.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]:[this._rect.x+d*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},t.prototype.pointToData=function(n){var a=this.pointToDate(n);return a&&a.time},t.prototype.dataToRect=function(n,a){var s=this.dataToPoint(n,a);return{contentShape:{x:s[0]-(this._sw-this._lineWidth)/2,y:s[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:s,tl:[s[0]-this._sw/2,s[1]-this._sh/2],tr:[s[0]+this._sw/2,s[1]-this._sh/2],br:[s[0]+this._sw/2,s[1]+this._sh/2],bl:[s[0]-this._sw/2,s[1]+this._sh/2]}},t.prototype.pointToDate=function(n){var a=Math.floor((n[0]-this._rect.x)/this._sw)+1,s=Math.floor((n[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(s,a-1,l):this._getDateByWeeksAndDay(a,s-1,l)},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys(a);return l===this?l.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys(a);return l===this?l.pointToData(s):null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var n=this._model.get("range"),a;if(isArray$1(n)&&n.length===1&&(n=n[0]),isArray$1(n))a=n;else{var s=n.toString();if(/^\d{4}$/.test(s)&&(a=[s+"-01-01",s+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(s)){var l=this.getDateInfo(s),u=l.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);a=[l.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(s)&&(a=[s,s])}if(!a)return n;var d=this._getRangeInfo(a);return d.start.time>d.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(n){var a=[this.getDateInfo(n[0]),this.getDateInfo(n[1])],s;a[0].time>a[1].time&&(s=!0,a.reverse());var l=Math.floor(a[1].time/PROXIMATE_ONE_DAY)-Math.floor(a[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(a[0].time),c=u.getDate(),d=a[1].date.getDate();u.setDate(c+l-1);var Ct=u.getDate();if(Ct!==d)for(var ar=u.getTime()-a[1].time>0?1:-1;(Ct=u.getDate())!==d&&(u.getTime()-a[1].time)*ar>0;)l-=ar,u.setDate(Ct-ar);var en=Math.floor((l+a[0].day+6)/7),tn=s?-en+1:en-1;return s&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:l,weeks:en,nthWeek:tn,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(n,a,s){var l=this._getRangeInfo(s);if(n>l.weeks||n===0&&a<l.fweek||n===l.weeks&&a>l.lweek)return null;var u=(n-1)*7-l.fweek+a,c=new Date(l.start.time);return c.setDate(+l.start.d+u),this.getDateInfo(c)},t.create=function(n,a){var s=[];return n.eachComponent("calendar",function(l){var u=new t(l);s.push(u),l.coordinateSystem=u}),n.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=s[l.get("calendarIndex")||0])}),s},t.dimensions=["time","value"],t})();function getCoordSys(t){var n=t.calendarModel,a=t.seriesModel,s=n?n.coordinateSystem:a?a.coordinateSystem:null;return s}function install$m(t){t.registerComponentModel(CalendarModel),t.registerComponentView(CalendarView),t.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(t,n){var a=t.existing;if(n.id=t.keyInfo.id,!n.type&&a&&(n.type=a.type),n.parentId==null){var s=n.parentOption;s?n.parentId=s.id:a&&(n.parentId=a.parentId)}n.parentOption=null}function isSetLoc(t,n){var a;return each$f(n,function(s){t[s]!=null&&t[s]!=="auto"&&(a=!0)}),a}function mergeNewElOptionToExist(t,n,a){var s=extend({},a),l=t[n],u=a.$action||"merge";u==="merge"?l?(merge(l,s,!0),mergeLayoutParam(l,s,{ignoreSize:!0}),copyLayoutParams(a,l),copyTransitionInfo(a,l),copyTransitionInfo(a,l,"shape"),copyTransitionInfo(a,l,"style"),copyTransitionInfo(a,l,"extra"),a.clipPath=l.clipPath):t[n]=s:u==="replace"?t[n]=s:u==="remove"&&l&&(t[n]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(t,n,a){if(a&&(!t[a]&&n[a]&&(t[a]={}),t=t[a],n=n[a]),!(!t||!n))for(var s=a?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<s.length;l++){var u=s[l];t[u]==null&&n[u]!=null&&(t[u]=n[u])}}function setLayoutInfoToExist(t,n){if(t&&(t.hv=n.hv=[isSetLoc(n,["left","right"]),isSetLoc(n,["top","bottom"])],t.type==="group")){var a=t,s=n;a.width==null&&(a.width=s.width=0),a.height==null&&(a.height=s.height=0)}}var GraphicComponentModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventAutoZ=!0,a}return n.prototype.mergeOption=function(a,s){var l=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,a,s),this.option.elements=l},n.prototype.optionUpdated=function(a,s){var l=this.option,u=(s?l:a).elements,c=l.elements=s?[]:l.elements,d=[];this._flatten(u,d,null);var Ct=mappingToExists(c,d,"normalMerge"),ar=this._elOptionsToUpdate=[];each$f(Ct,function(en,tn){var on=en.newOption;on&&(ar.push(on),setKeyInfoToNewElOption(en,on),mergeNewElOptionToExist(c,tn,on),setLayoutInfoToExist(c[tn],on))},this),l.elements=filter(c,function(en){return en&&delete en.$action,en!=null})},n.prototype._flatten=function(a,s,l){each$f(a,function(u){if(u){l&&(u.parentOption=l),s.push(u);var c=u.children;c&&c.length&&this._flatten(c,s,u),delete u.children}},this)},n.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},n.type="graphic",n.defaultOption={elements:[]},n})(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._elMap=createHashMap()},n.prototype.render=function(a,s,l){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,l)},n.prototype._updateElements=function(a){var s=a.useElOptionsToUpdate();if(s){var l=this._elMap,u=this.group,c=a.get("z"),d=a.get("zlevel");each$f(s,function(Ct){var ar=convertOptionIdName(Ct.id,null),en=ar!=null?l.get(ar):null,tn=convertOptionIdName(Ct.parentId,null),on=tn!=null?l.get(tn):u,fn=Ct.type,dn=Ct.style;fn==="text"&&dn&&Ct.hv&&Ct.hv[1]&&(dn.textVerticalAlign=dn.textBaseline=dn.verticalAlign=dn.align=null);var Cn=Ct.textContent,Rn=Ct.textConfig;if(dn&&isEC4CompatibleStyle(dn,fn,!!Rn,!!Cn)){var ax=convertFromEC4CompatibleStyle(dn,fn,!0);!Rn&&ax.textConfig&&(Rn=Ct.textConfig=ax.textConfig),!Cn&&ax.textContent&&(Cn=ax.textContent)}var ox=getCleanedElOption(Ct),sx=Ct.$action||"merge",lx=sx==="merge",cx=sx==="replace";if(lx){var fx=!en,gx=en;fx?gx=createEl(ar,on,Ct.type,l):(gx&&(inner$7(gx).isNew=!1),stopPreviousKeyframeAnimationAndRestore(gx)),gx&&(applyUpdateTransition(gx,ox,a,{isInit:fx}),updateCommonAttrs(gx,Ct,c,d))}else if(cx){removeEl$1(en,Ct,l,a);var mx=createEl(ar,on,Ct.type,l);mx&&(applyUpdateTransition(mx,ox,a,{isInit:!0}),updateCommonAttrs(mx,Ct,c,d))}else sx==="remove"&&(updateLeaveTo(en,Ct),removeEl$1(en,Ct,l,a));var px=l.get(ar);if(px&&Cn)if(lx){var hx=px.getTextContent();hx?hx.attr(Cn):px.setTextContent(new ZRText(Cn))}else cx&&px.setTextContent(new ZRText(Cn));if(px){var vx=Ct.clipPath;if(vx){var yx=vx.type,Sx=void 0,fx=!1;if(lx){var _x=px.getClipPath();fx=!_x||inner$7(_x).type!==yx,Sx=fx?newEl(yx):_x}else cx&&(fx=!0,Sx=newEl(yx));px.setClipPath(Sx),applyUpdateTransition(Sx,vx,a,{isInit:fx}),applyKeyframeAnimation(Sx,vx.keyframeAnimation,a)}var Ex=inner$7(px);px.setTextConfig(Rn),Ex.option=Ct,setEventData(px,a,Ct),setTooltipConfig({el:px,componentModel:a,itemName:px.name,itemTooltipOption:Ct.tooltip}),applyKeyframeAnimation(px,Ct.keyframeAnimation,a)}})}},n.prototype._relocate=function(a,s){for(var l=a.option.elements,u=this.group,c=this._elMap,d=s.getWidth(),Ct=s.getHeight(),ar=["x","y"],en=0;en<l.length;en++){var tn=l[en],on=convertOptionIdName(tn.id,null),fn=on!=null?c.get(on):null;if(!(!fn||!fn.isGroup)){var dn=fn.parent,Cn=dn===u,Rn=inner$7(fn),ax=inner$7(dn);Rn.width=parsePercent(Rn.option.width,Cn?d:ax.width)||0,Rn.height=parsePercent(Rn.option.height,Cn?Ct:ax.height)||0}}for(var en=l.length-1;en>=0;en--){var tn=l[en],on=convertOptionIdName(tn.id,null),fn=on!=null?c.get(on):null;if(fn){var dn=fn.parent,ax=inner$7(dn),ox=dn===u?{width:d,height:Ct}:{width:ax.width,height:ax.height},sx={},lx=positionElement(fn,tn,ox,null,{hv:tn.hv,boundingMode:tn.bounding},sx);if(!inner$7(fn).isNew&&lx){for(var cx=tn.transition,fx={},gx=0;gx<ar.length;gx++){var mx=ar[gx],px=sx[mx];cx&&(isTransitionAll(cx)||indexOf(cx,mx)>=0)?fx[mx]=px:fn[mx]=px}updateProps$1(fn,fx,a,0)}else fn.attr(sx)}}},n.prototype._clear=function(){var a=this,s=this._elMap;s.each(function(l){removeEl$1(l,inner$7(l).option,s,a._lastGraphicModel)}),this._elMap=createHashMap()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n})(ComponentView);function newEl(t){var n=hasOwn(nonShapeGraphicElements,t)?nonShapeGraphicElements[t]:getShapeClass(t),a=new n({});return inner$7(a).type=t,a}function createEl(t,n,a,s){var l=newEl(a);return n.add(l),s.set(t,l),inner$7(l).id=t,inner$7(l).isNew=!0,l}function removeEl$1(t,n,a,s){var l=t&&t.parent;l&&(t.type==="group"&&t.traverse(function(u){removeEl$1(u,n,a,s)}),applyLeaveTransition(t,n,s),a.removeKey(inner$7(t).id))}function updateCommonAttrs(t,n,a,s){t.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",s||0],["z",a||0],["z2",0]],function(l){var u=l[0];hasOwn(n,u)?t[u]=retrieve2(n[u],l[1]):t[u]==null&&(t[u]=l[1])}),each$f(keys(n),function(l){if(l.indexOf("on")===0){var u=n[l];t[l]=isFunction$1(u)?u:null}}),hasOwn(n,"draggable")&&(t.draggable=n.draggable),n.name!=null&&(t.name=n.name),n.id!=null&&(t.id=n.id)}function getCleanedElOption(t){return t=extend({},t),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(n){delete t[n]}),t}function setEventData(t,n,a){var s=getECData(t).eventData;!t.silent&&!t.ignore&&!s&&(s=getECData(t).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:t.name}),s&&(s.info=a.info)}function install$l(t){t.registerComponentModel(GraphicComponentModel),t.registerComponentView(GraphicComponentView),t.registerPreprocessor(function(n){var a=n.graphic;isArray$1(a)?!a[0]||!a[0].elements?n.graphic=[{elements:a}]:n.graphic=[n.graphic[0]]:a&&!a.elements&&(n.graphic=[{elements:[a]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(t){var n=t.get("coordinateSystem");return indexOf(SERIES_COORDS,n)>=0}function getAxisMainType(t){return t+"Axis"}function findEffectedDataZooms(t,n){var a=createHashMap(),s=[],l=createHashMap();t.eachComponent({mainType:"dataZoom",query:n},function(en){l.get(en.uid)||d(en)});var u;do u=!1,t.eachComponent("dataZoom",c);while(u);function c(en){!l.get(en.uid)&&Ct(en)&&(d(en),u=!0)}function d(en){l.set(en.uid,!0),s.push(en),ar(en)}function Ct(en){var tn=!1;return en.eachTargetAxis(function(on,fn){var dn=a.get(on);dn&&dn[fn]&&(tn=!0)}),tn}function ar(en){en.eachTargetAxis(function(tn,on){(a.get(tn)||a.set(tn,[]))[on]=!0})}return s}function collectReferCoordSysModelInfo(t){var n=t.ecModel,a={infoList:[],infoMap:createHashMap()};return t.eachTargetAxis(function(s,l){var u=n.getComponent(getAxisMainType(s),l);if(u){var c=u.getCoordSysModel();if(c){var d=c.uid,Ct=a.infoMap.get(d);Ct||(Ct={model:c,axisModels:[]},a.infoList.push(Ct),a.infoMap.set(d,Ct)),Ct.axisModels.push(u)}}}),a}var DataZoomAxisInfo=(function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},t})(),DataZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return n.prototype.init=function(a,s,l){var u=retrieveRawOption(a);this.settledOption=u,this.mergeDefaultAndTheme(a,l),this._doInit(u)},n.prototype.mergeOption=function(a){var s=retrieveRawOption(a);merge(this.option,a,!0),merge(this.settledOption,s,!0),this._doInit(s)},n.prototype._doInit=function(a){var s=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,c){this._rangePropMode[c]==="value"&&(s[u[0]]=l[u[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var a=this.get("orient",!0),s=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(s);l?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(s,this._orient)),this._noTarget=!0,s.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(a){var s=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var u=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(u.specified){s=!0;var c=new DataZoomAxisInfo;each$f(u.models,function(d){c.add(d.componentIndex)}),a.set(l,c)}},this),s},n.prototype._fillAutoTargetAxisByOrient=function(a,s){var l=this.ecModel,u=!0;if(u){var c=s==="vertical"?"y":"x",d=l.findComponents({mainType:c+"Axis"});Ct(d,c)}if(u){var d=l.findComponents({mainType:"singleAxis",filter:function(en){return en.get("orient",!0)===s}});Ct(d,"single")}function Ct(ar,en){var tn=ar[0];if(tn){var on=new DataZoomAxisInfo;if(on.add(tn.componentIndex),a.set(en,on),u=!1,en==="x"||en==="y"){var fn=tn.getReferringComponents("grid",SINGLE_REFERRING).models[0];fn&&each$f(ar,function(dn){tn.componentIndex!==dn.componentIndex&&fn===dn.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&on.add(dn.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(ar){if(u){var en=l.findComponents({mainType:getAxisMainType(ar),filter:function(on){return on.get("type",!0)==="category"}});if(en[0]){var tn=new DataZoomAxisInfo;tn.add(en[0].componentIndex),a.set(ar,tn),u=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(s){!a&&(a=s)},this),a==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(a){var s=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,c){var d=a[u[0]]!=null,Ct=a[u[1]]!=null;d&&!Ct?s[c]="percent":!d&&Ct?s[c]="value":l?s[c]=l[c]:d&&(s[c]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(s,l){a==null&&(a=this.ecModel.getComponent(getAxisMainType(s),l))},this),a},n.prototype.eachTargetAxis=function(a,s){this._targetAxisInfoMap.each(function(l,u){each$f(l.indexList,function(c){a.call(s,u,c)})})},n.prototype.getAxisProxy=function(a,s){var l=this.getAxisModel(a,s);if(l)return l.__dzAxisProxy},n.prototype.getAxisModel=function(a,s){var l=this._targetAxisInfoMap.get(a);if(l&&l.indexMap[s])return this.ecModel.getComponent(getAxisMainType(a),s)},n.prototype.setRawRange=function(a){var s=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(a[u[0]]!=null||a[u[1]]!=null)&&(s[u[0]]=l[u[0]]=a[u[0]],s[u[1]]=l[u[1]]=a[u[1]])},this),this._updateRangeUse(a)},n.prototype.setCalculatedRange=function(a){var s=this.option;each$f(["start","startValue","end","endValue"],function(l){s[l]=a[l]})},n.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},n.prototype.getValueRange=function(a,s){if(a==null&&s==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(a,s).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var s,l=this._targetAxisInfoMap.keys(),u=0;u<l.length;u++)for(var c=l[u],d=this._targetAxisInfoMap.get(c),Ct=0;Ct<d.indexList.length;Ct++){var ar=this.getAxisProxy(c,d.indexList[Ct]);if(ar.hostedBy(this))return ar;s||(s=ar)}return s},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n})(ComponentModel);function retrieveRawOption(t){var n={};return each$f(["start","end","startValue","endValue","throttle"],function(a){t.hasOwnProperty(a)&&(n[a]=t[a])}),n}var SelectDataZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n})(DataZoomModel),DataZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this.dataZoomModel=a,this.ecModel=s,this.api=l},n.type="dataZoom",n})(ComponentView),SelectDataZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n})(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=(function(){function t(n,a,s,l){this._dimName=n,this._axisIndex=a,this.ecModel=l,this._dataZoomModel=s}return t.prototype.hostedBy=function(n){return this._dataZoomModel===n},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(a){if(isCoordSupported(a)){var s=getAxisMainType(this._dimName),l=a.getReferringComponents(s,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&n.push(a)}},this),n},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},t.prototype.calculateDataWindow=function(n){var a=this._dataExtent,s=this.getAxisModel(),l=s.axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],d=[],Ct=[],ar;each$7(["start","end"],function(on,fn){var dn=n[on],Cn=n[on+"Value"];u[fn]==="percent"?(dn==null&&(dn=c[fn]),Cn=l.parse(linearMap$2(dn,c,a))):(ar=!0,Cn=Cn==null?a[fn]:l.parse(Cn),dn=linearMap$2(Cn,a,c)),Ct[fn]=Cn==null||isNaN(Cn)?a[fn]:Cn,d[fn]=dn==null||isNaN(dn)?c[fn]:dn}),asc$1(Ct),asc$1(d);var en=this._minMaxSpan;ar?tn(Ct,d,a,c,!1):tn(d,Ct,c,a,!0);function tn(on,fn,dn,Cn,Rn){var ax=Rn?"Span":"ValueSpan";sliderMove(0,on,dn,"all",en["min"+ax],en["max"+ax]);for(var ox=0;ox<2;ox++)fn[ox]=linearMap$2(on[ox],dn,Cn,!0),Rn&&(fn[ox]=l.parse(fn[ox]))}return{valueWindow:Ct,percentWindow:d}},t.prototype.reset=function(n){if(n===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,a),this._updateMinMaxSpan();var s=this.calculateDataWindow(n.settledOption);this._valueWindow=s.valueWindow,this._percentWindow=s.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(n,a){if(n!==this._dataZoomModel)return;var s=this._dimName,l=this.getTargetSeriesModels(),u=n.get("filterMode"),c=this._valueWindow;if(u==="none")return;each$7(l,function(Ct){var ar=Ct.getData(),en=ar.mapDimensionsAll(s);if(en.length){if(u==="weakFilter"){var tn=ar.getStore(),on=map$1(en,function(fn){return ar.getDimensionIndex(fn)},ar);ar.filterSelf(function(fn){for(var dn,Cn,Rn,ax=0;ax<en.length;ax++){var ox=tn.get(on[ax],fn),sx=!isNaN(ox),lx=ox<c[0],cx=ox>c[1];if(sx&&!lx&&!cx)return!0;sx&&(Rn=!0),lx&&(dn=!0),cx&&(Cn=!0)}return Rn&&dn&&Cn})}else each$7(en,function(fn){if(u==="empty")Ct.setData(ar=ar.map(fn,function(Cn){return d(Cn)?Cn:NaN}));else{var dn={};dn[fn]=c,ar.selectRange(dn)}});each$7(en,function(fn){ar.setApproximateExtent(c,fn)})}});function d(Ct){return Ct>=c[0]&&Ct<=c[1]}},t.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},a=this._dataZoomModel,s=this._dataExtent;each$7(["min","max"],function(l){var u=a.get(l+"Span"),c=a.get(l+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?u=linearMap$2(s[0]+c,s,[0,100],!0):u!=null&&(c=linearMap$2(u,[0,100],s,!0)-s[0]),n[l+"Span"]=u,n[l+"ValueSpan"]=c},this)},t.prototype._setAxisModel=function(){var n=this.getAxisModel(),a=this._percentWindow,s=this._valueWindow;if(a){var l=getPixelPrecision(s,[0,500]);l=Math.min(l,20);var u=n.axis.scale.rawExtentInfo;a[0]!==0&&u.setDeterminedMinMax("min",+s[0].toFixed(l)),a[1]!==100&&u.setDeterminedMinMax("max",+s[1].toFixed(l)),u.freeze()}},t})();function calculateDataExtent(t,n,a){var s=[1/0,-1/0];each$7(a,function(c){unionAxisExtentFromData(s,c.getData(),n)});var l=t.getAxisModel(),u=ensureScaleRawExtentInfo(l.axis.scale,l,s).calculate();return[u.min,u.max]}var dataZoomProcessor={getTargetSeries:function(t){function n(l){t.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(c,d){var Ct=t.getComponent(getAxisMainType(c),d);l(c,d,Ct,u)})})}n(function(l,u,c,d){c.__dzAxisProxy=null});var a=[];n(function(l,u,c,d){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy(l,u,d,t),a.push(c.__dzAxisProxy))});var s=createHashMap();return each$f(a,function(l){each$f(l.getTargetSeriesModels(),function(u){s.set(u.uid,u)})}),s},overallReset:function(t,n){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(s,l){a.getAxisProxy(s,l).reset(a)}),a.eachTargetAxis(function(s,l){a.getAxisProxy(s,l).filterData(a,n)})}),t.eachComponent("dataZoom",function(a){var s=a.findRepresentativeAxisProxy();if(s){var l=s.getDataPercentWindow(),u=s.getDataValueWindow();a.setCalculatedRange({start:l[0],end:l[1],startValue:u[0],endValue:u[1]})}})}};function installDataZoomAction(t){t.registerAction("dataZoom",function(n,a){var s=findEffectedDataZooms(a,n);each$f(s,function(l){l.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}var installed$1=!1;function installCommon$1(t){installed$1||(installed$1=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(t){t.registerComponentModel(SelectDataZoomModel),t.registerComponentView(SelectDataZoomView),installCommon$1(t)}var ToolboxFeature=(function(){function t(){}return t})(),features={};function registerFeature(t,n){features[t]=n}function getFeature(t){return features[t]}var ToolboxModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;each$f(this.option.feature,function(s,l){var u=getFeature(l);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(a)),merge(s,u.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n})(ComponentModel);function layout(t,n,a){var s=n.getBoxLayoutParams(),l=n.get("padding"),u={width:a.getWidth(),height:a.getHeight()},c=getLayoutRect(s,u,l);box(n.get("orient"),t,n.get("itemGap"),c.width,c.height),positionElement(t,s,u,l)}function makeBackground(t,n){var a=normalizeCssArray(n.get("padding")),s=n.getItemStyle(["color","opacity"]);return s.fill=n.get("backgroundColor"),t=new Rect$2({shape:{x:t.x-a[3],y:t.y-a[0],width:t.width+a[1]+a[3],height:t.height+a[0]+a[2],r:n.get("borderRadius")},style:s,silent:!0,z2:-1}),t}var ToolboxView=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l,u){var c=this.group;if(c.removeAll(),!a.get("show"))return;var d=+a.get("itemSize"),Ct=a.get("orient")==="vertical",ar=a.get("feature")||{},en=this._features||(this._features={}),tn=[];each$f(ar,function(dn,Cn){tn.push(Cn)}),new DataDiffer(this._featureNames||[],tn).add(on).update(on).remove(curry$1(on,null)).execute(),this._featureNames=tn;function on(dn,Cn){var Rn=tn[dn],ax=tn[Cn],ox=ar[Rn],sx=new Model(ox,a,a.ecModel),lx;if(u&&u.newTitle!=null&&u.featureName===Rn&&(ox.title=u.newTitle),Rn&&!ax){if(isUserFeatureName(Rn))lx={onclick:sx.option.onclick,featureName:Rn};else{var cx=getFeature(Rn);if(!cx)return;lx=new cx}en[Rn]=lx}else if(lx=en[ax],!lx)return;lx.uid=getUID("toolbox-feature"),lx.model=sx,lx.ecModel=s,lx.api=l;var fx=lx instanceof ToolboxFeature;if(!Rn&&ax){fx&&lx.dispose&&lx.dispose(s,l);return}if(!sx.get("show")||fx&&lx.unusable){fx&&lx.remove&&lx.remove(s,l);return}fn(sx,lx,Rn),sx.setIconStatus=function(gx,mx){var px=this.option,hx=this.iconPaths;px.iconStatus=px.iconStatus||{},px.iconStatus[gx]=mx,hx[gx]&&(mx==="emphasis"?enterEmphasis:leaveEmphasis)(hx[gx])},lx instanceof ToolboxFeature&&lx.render&&lx.render(sx,s,l,u)}function fn(dn,Cn,Rn){var ax=dn.getModel("iconStyle"),ox=dn.getModel(["emphasis","iconStyle"]),sx=Cn instanceof ToolboxFeature&&Cn.getIcons?Cn.getIcons():dn.get("icon"),lx=dn.get("title")||{},cx,fx;isString$1(sx)?(cx={},cx[Rn]=sx):cx=sx,isString$1(lx)?(fx={},fx[Rn]=lx):fx=lx;var gx=dn.iconPaths={};each$f(cx,function(mx,px){var hx=createIcon(mx,{},{x:-d/2,y:-d/2,width:d,height:d});hx.setStyle(ax.getItemStyle());var vx=hx.ensureState("emphasis");vx.style=ox.getItemStyle();var yx=new ZRText({style:{text:fx[px],align:ox.get("textAlign"),borderRadius:ox.get("textBorderRadius"),padding:ox.get("textPadding"),fill:null,font:getFont({fontStyle:ox.get("textFontStyle"),fontFamily:ox.get("textFontFamily"),fontSize:ox.get("textFontSize"),fontWeight:ox.get("textFontWeight")},s)},ignore:!0});hx.setTextContent(yx),setTooltipConfig({el:hx,componentModel:a,itemName:px,formatterParamsExtra:{title:fx[px]}}),hx.__title=fx[px],hx.on("mouseover",function(){var Sx=ox.getItemStyle(),_x=Ct?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";yx.setStyle({fill:ox.get("textFill")||Sx.fill||Sx.stroke||"#000",backgroundColor:ox.get("textBackgroundColor")}),hx.setTextConfig({position:ox.get("textPosition")||_x}),yx.ignore=!a.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){dn.get(["iconStatus",px])!=="emphasis"&&l.leaveEmphasis(this),yx.hide()}),(dn.get(["iconStatus",px])==="emphasis"?enterEmphasis:leaveEmphasis)(hx),c.add(hx),hx.on("click",bind$1(Cn.onclick,Cn,s,l,px)),gx[px]=hx})}layout(c,a,l),c.add(makeBackground(c.getBoundingRect(),a)),Ct||c.eachChild(function(dn){var Cn=dn.__title,Rn=dn.ensureState("emphasis"),ax=Rn.textConfig||(Rn.textConfig={}),ox=dn.getTextContent(),sx=ox&&ox.ensureState("emphasis");if(sx&&!isFunction$1(sx)&&Cn){var lx=sx.style||(sx.style={}),cx=getBoundingRect(Cn,ZRText.makeFont(lx)),fx=dn.x+c.x,gx=dn.y+c.y+d,mx=!1;gx+cx.height>l.getHeight()&&(ax.position="top",mx=!0);var px=mx?-5-cx.height:d+10;fx+cx.width/2>l.getWidth()?(ax.position=["100%",px],lx.align="right"):fx-cx.width/2<0&&(ax.position=[0,px],lx.align="left")}})},n.prototype.updateView=function(a,s,l,u){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,s,l,u)})},n.prototype.remove=function(a,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(a,s)}),this.group.removeAll()},n.prototype.dispose=function(a,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(a,s)})},n.type="toolbox",n})(ComponentView);function isUserFeatureName(t){return t.indexOf("my")===0}var SaveAsImage=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){var l=this.model,u=l.get("name")||a.get("title.0.text")||"echarts",c=s.getZr().painter.getType()==="svg",d=c?"svg":l.get("type",!0)||"png",Ct=s.getConnectedDataURL({type:d,backgroundColor:l.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),ar=env.browser;if(typeof MouseEvent=="function"&&(ar.newEdge||!ar.ie&&!ar.edge)){var en=document.createElement("a");en.download=u+"."+d,en.target="_blank",en.href=Ct;var tn=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});en.dispatchEvent(tn)}else if(window.navigator.msSaveOrOpenBlob||c){var on=Ct.split(","),fn=on[0].indexOf("base64")>-1,dn=c?decodeURIComponent(on[1]):on[1];fn&&(dn=window.atob(dn));var Cn=u+"."+d;if(window.navigator.msSaveOrOpenBlob){for(var Rn=dn.length,ax=new Uint8Array(Rn);Rn--;)ax[Rn]=dn.charCodeAt(Rn);var ox=new Blob([ax]);window.navigator.msSaveOrOpenBlob(ox,Cn)}else{var sx=document.createElement("iframe");document.body.appendChild(sx);var lx=sx.contentWindow,cx=lx.document;cx.open("image/svg+xml","replace"),cx.write(dn),cx.close(),lx.focus(),cx.execCommand("SaveAs",!0,Cn),document.body.removeChild(sx)}}else{var fx=l.get("lang"),gx='<body style="margin:0;"><img src="'+Ct+'" style="max-width:100%;" title="'+(fx&&fx[0]||"")+'" /></body>',mx=window.open();mx.document.write(gx),mx.document.title=u}},n.getDefaultOption=function(a){var s={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return s},n})(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getIcons=function(){var a=this.model,s=a.get("icon"),l={};return each$f(a.get("type"),function(u){s[u]&&(l[u]=s[u])}),l},n.getDefaultOption=function(a){var s={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return s},n.prototype.onclick=function(a,s,l){var u=this.model,c=u.get(["seriesIndex",l]);if(seriesOptGenreator[l]){var d={series:[]},Ct=function(tn){var on=tn.subType,fn=tn.id,dn=seriesOptGenreator[l](on,fn,tn,u);dn&&(defaults(dn,tn.option),d.series.push(dn));var Cn=tn.coordinateSystem;if(Cn&&Cn.type==="cartesian2d"&&(l==="line"||l==="bar")){var Rn=Cn.getAxesByScale("ordinal")[0];if(Rn){var ax=Rn.dim,ox=ax+"Axis",sx=tn.getReferringComponents(ox,SINGLE_REFERRING).models[0],lx=sx.componentIndex;d[ox]=d[ox]||[];for(var cx=0;cx<=lx;cx++)d[ox][lx]=d[ox][lx]||{};d[ox][lx].boundaryGap=l==="bar"}}};each$f(radioTypes,function(tn){indexOf(tn,l)>=0&&each$f(tn,function(on){u.setIconStatus(on,"normal")})}),u.setIconStatus(l,"emphasis"),a.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},Ct);var ar,en=l;l==="stack"&&(ar=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",l])!=="emphasis"&&(en="tiled")),s.dispatchAction({type:"changeMagicType",currentType:en,newOption:d,newTitle:ar,featureName:"magicType"})}},n})(ToolboxFeature),seriesOptGenreator={line:function(t,n,a,s){if(t==="bar")return merge({id:n,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","line"])||{},!0)},bar:function(t,n,a,s){if(t==="line")return merge({id:n,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","bar"])||{},!0)},stack:function(t,n,a,s){var l=a.get("stack")===INNER_STACK_KEYWORD;if(t==="line"||t==="bar")return s.setIconStatus("stack",l?"normal":"emphasis"),merge({id:n,stack:l?"":INNER_STACK_KEYWORD},s.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,n){n.mergeOption(t.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(t){var n={},a=[],s=[];return t.eachRawSeries(function(l){var u=l.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var c=u.getBaseAxis();if(c.type==="category"){var d=c.dim+"_"+c.index;n[d]||(n[d]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},s.push({axisDim:c.dim,axisIndex:c.index})),n[d].series.push(l)}else a.push(l)}else a.push(l)}),{seriesGroupByCategoryAxis:n,other:a,meta:s}}function assembleSeriesWithCategoryAxis(t){var n=[];return each$f(t,function(a,s){var l=a.categoryAxis,u=a.valueAxis,c=u.dim,d=[" "].concat(map$1(a.series,function(fn){return fn.name})),Ct=[l.model.getCategories()];each$f(a.series,function(fn){var dn=fn.getRawData();Ct.push(fn.getRawData().mapArray(dn.mapDimension(c),function(Cn){return Cn}))});for(var ar=[d.join(ITEM_SPLITER)],en=0;en<Ct[0].length;en++){for(var tn=[],on=0;on<Ct.length;on++)tn.push(Ct[on][en]);ar.push(tn.join(ITEM_SPLITER))}n.push(ar.join(`
`))}),n.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(t){return map$1(t,function(n){var a=n.getRawData(),s=[n.name],l=[];return a.each(a.dimensions,function(){for(var u=arguments.length,c=arguments[u-1],d=a.getName(c),Ct=0;Ct<u-1;Ct++)l[Ct]=arguments[Ct];s.push((d?d+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),s.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(t){var n=groupSeries(t);return{value:filter([assembleSeriesWithCategoryAxis(n.seriesGroupByCategoryAxis),assembleOtherSeries(n.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:n.meta}}function trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(t){var n=t.slice(0,t.indexOf(`
`));if(n.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()).split(itemSplitRegex),s=[],l=map$1(a,function(Ct){return{name:Ct,data:[]}}),u=0;u<n.length;u++){var c=trim(n[u]).split(itemSplitRegex);s.push(c.shift());for(var d=0;d<c.length;d++)l[d]&&(l[d].data[u]=c[d])}return{series:l,categories:s}}function parseListContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()),s=[],l=0;l<n.length;l++){var u=trim(n[l]);if(u){var c=u.split(itemSplitRegex),d="",Ct=void 0,ar=!1;isNaN(c[0])?(ar=!0,d=c[0],c=c.slice(1),s[l]={name:d,value:[]},Ct=s[l].value):Ct=s[l]=[];for(var en=0;en<c.length;en++)Ct.push(+c[en]);Ct.length===1&&(ar?s[l].value=Ct[0]:s[l]=Ct[0])}}return{name:a,data:s}}function parseContents(t,n){var a=t.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),s={series:[]};return each$f(a,function(l,u){if(isTSVFormat(l)){var c=parseTSVContents(l),d=n[u],Ct=d.axisDim+"Axis";d&&(s[Ct]=s[Ct]||[],s[Ct][d.axisIndex]={data:c.categories},s.series=s.series.concat(c.series))}else{var c=parseListContents(l);s.series.push(c)}}),s}var DataView$1=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){setTimeout(function(){s.dispatchAction({type:"hideTip"})});var l=s.getDom(),u=this.model;this._dom&&l.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=u.get("backgroundColor")||"#fff";var d=document.createElement("h4"),Ct=u.get("lang")||[];d.innerHTML=Ct[0]||u.get("title"),d.style.cssText="margin:10px 20px",d.style.color=u.get("textColor");var ar=document.createElement("div"),en=document.createElement("textarea");ar.style.cssText="overflow:auto";var tn=u.get("optionToContent"),on=u.get("contentToOption"),fn=getContentFromModel(a);if(isFunction$1(tn)){var dn=tn(s.getOption());isString$1(dn)?ar.innerHTML=dn:isDom(dn)&&ar.appendChild(dn)}else{en.readOnly=u.get("readOnly");var Cn=en.style;Cn.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",Cn.color=u.get("textColor"),Cn.borderColor=u.get("textareaBorderColor"),Cn.backgroundColor=u.get("textareaColor"),en.value=fn.value,ar.appendChild(en)}var Rn=fn.meta,ax=document.createElement("div");ax.style.cssText="position:absolute;bottom:5px;left:0;right:0";var ox="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",sx=document.createElement("div"),lx=document.createElement("div");ox+=";background-color:"+u.get("buttonColor"),ox+=";color:"+u.get("buttonTextColor");var cx=this;function fx(){l.removeChild(c),cx._dom=null}addEventListener(sx,"click",fx),addEventListener(lx,"click",function(){if(on==null&&tn!=null||on!=null&&tn==null){fx();return}var gx;try{isFunction$1(on)?gx=on(ar,s.getOption()):gx=parseContents(en.value,Rn)}catch(mx){throw fx(),new Error("Data view format error "+mx)}gx&&s.dispatchAction({type:"changeDataView",newOption:gx}),fx()}),sx.innerHTML=Ct[1],lx.innerHTML=Ct[2],lx.style.cssText=sx.style.cssText=ox,!u.get("readOnly")&&ax.appendChild(lx),ax.appendChild(sx),c.appendChild(d),c.appendChild(ar),c.appendChild(ax),ar.style.height=l.clientHeight-80+"px",l.appendChild(c),this._dom=c},n.prototype.remove=function(a,s){this._dom&&s.getDom().removeChild(this._dom)},n.prototype.dispose=function(a,s){this.remove(a,s)},n.getDefaultOption=function(a){var s={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return s},n})(ToolboxFeature);function tryMergeDataOption(t,n){return map$1(t,function(a,s){var l=n&&n[s];if(isObject$3(l)&&!isArray$1(l)){var u=isObject$3(a)&&!isArray$1(a);u||(a={value:a});var c=l.name!=null&&a.name==null;return a=defaults(a,l),c&&delete a.name,a}else return a})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,n){var a=[];each$f(t.newOption.series,function(s){var l=n.getSeriesByName(s.name)[0];if(!l)a.push(extend({type:"scatter"},s));else{var u=l.get("data");a.push({name:s.name,data:tryMergeDataOption(s.data,u)})}}),n.mergeOption(defaults({series:a},t.newOption))});var each$6=each$f,inner$6=makeInner();function push(t,n){var a=getStoreSnapshots(t);each$6(n,function(s,l){for(var u=a.length-1;u>=0;u--){var c=a[u];if(c[l])break}if(u<0){var d=t.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(d){var Ct=d.getPercentRange();a[0][l]={dataZoomId:l,start:Ct[0],end:Ct[1]}}}}),a.push(n)}function pop(t){var n=getStoreSnapshots(t),a=n[n.length-1];n.length>1&&n.pop();var s={};return each$6(a,function(l,u){for(var c=n.length-1;c>=0;c--)if(l=n[c][u],l){s[u]=l;break}}),s}function clear(t){inner$6(t).snapshots=null}function count(t){return getStoreSnapshots(t).length}function getStoreSnapshots(t){var n=inner$6(t);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var RestoreOption=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){clear(a),s.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(a){var s={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return s},n})(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,n){n.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=(function(){function t(n,a,s){var l=this;this._targetInfoList=[];var u=parseFinder(a,n);each$f(targetInfoBuilders,function(c,d){(!s||!s.include||indexOf(s.include,d)>=0)&&c(u,l._targetInfoList)})}return t.prototype.setOutputRanges=function(n,a){return this.matchOutputRanges(n,a,function(s,l,u){if((s.coordRanges||(s.coordRanges=[])).push(l),!s.coordRange){s.coordRange=l;var c=coordConvert[s.brushType](0,u,l);s.__rangeOffset={offset:diffProcessor[s.brushType](c.values,s.range,[1,1]),xyMinMax:c.xyMinMax}}}),n},t.prototype.matchOutputRanges=function(n,a,s){each$f(n,function(l){var u=this.findTargetInfo(l,a);u&&u!==!0&&each$f(u.coordSyses,function(c){var d=coordConvert[l.brushType](1,c,l.range,!0);s(l,d.values,c,a)})},this)},t.prototype.setInputRanges=function(n,a){each$f(n,function(s){var l=this.findTargetInfo(s,a);if(s.range=s.range||[],l&&l!==!0){s.panelId=l.panelId;var u=coordConvert[s.brushType](0,l.coordSys,s.coordRange),c=s.__rangeOffset;s.range=c?diffProcessor[s.brushType](u.values,c.offset,getScales(u.xyMinMax,c.xyMinMax)):u.values}},this)},t.prototype.makePanelOpts=function(n,a){return map$1(this._targetInfoList,function(s){var l=s.getPanelRect();return{panelId:s.panelId,defaultBrushType:a?a(s):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,n,s.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},t.prototype.controlSeries=function(n,a,s){var l=this.findTargetInfo(n,s);return l===!0||l&&indexOf(l.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(n,a){for(var s=this._targetInfoList,l=parseFinder(a,n),u=0;u<s.length;u++){var c=s[u],d=n.panelId;if(d){if(c.panelId===d)return c}else for(var Ct=0;Ct<targetInfoMatchers.length;Ct++)if(targetInfoMatchers[Ct](l,c))return c}return!0},t})();function formatMinMax(t){return t[0]>t[1]&&t.reverse(),t}function parseFinder(t,n){return parseFinder$1(t,n,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(t,n){var a=t.xAxisModels,s=t.yAxisModels,l=t.gridModels,u=createHashMap(),c={},d={};!a&&!s&&!l||(each$f(a,function(Ct){var ar=Ct.axis.grid.model;u.set(ar.id,ar),c[ar.id]=!0}),each$f(s,function(Ct){var ar=Ct.axis.grid.model;u.set(ar.id,ar),d[ar.id]=!0}),each$f(l,function(Ct){u.set(Ct.id,Ct),c[Ct.id]=!0,d[Ct.id]=!0}),u.each(function(Ct){var ar=Ct.coordinateSystem,en=[];each$f(ar.getCartesians(),function(tn,on){(indexOf(a,tn.getAxis("x").model)>=0||indexOf(s,tn.getAxis("y").model)>=0)&&en.push(tn)}),n.push({panelId:"grid--"+Ct.id,gridModel:Ct,coordSysModel:Ct,coordSys:en[0],coordSyses:en,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[Ct.id],yAxisDeclared:d[Ct.id]})}))},geo:function(t,n){each$f(t.geoModels,function(a){var s=a.coordinateSystem;n.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:s,coordSyses:[s],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(t,n){var a=t.xAxisModel,s=t.yAxisModel,l=t.gridModel;return!l&&a&&(l=a.axis.grid.model),!l&&s&&(l=s.axis.grid.model),l&&l===n.gridModel},function(t,n){var a=t.geoModel;return a&&a===n.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,n=t.getBoundingRect().clone();return n.applyTransform(getTransform$1(t)),n}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(t,n,a,s){var l=t?n.pointToData([a[0][0],a[1][0]],s):n.dataToPoint([a[0][0],a[1][0]],s),u=t?n.pointToData([a[0][1],a[1][1]],s):n.dataToPoint([a[0][1],a[1][1]],s),c=[formatMinMax([l[0],u[0]]),formatMinMax([l[1],u[1]])];return{values:c,xyMinMax:c}},polygon:function(t,n,a,s){var l=[[1/0,-1/0],[1/0,-1/0]],u=map$1(a,function(c){var d=t?n.pointToData(c,s):n.dataToPoint(c,s);return l[0][0]=Math.min(l[0][0],d[0]),l[1][0]=Math.min(l[1][0],d[1]),l[0][1]=Math.max(l[0][1],d[0]),l[1][1]=Math.max(l[1][1],d[1]),d});return{values:u,xyMinMax:l}}};function axisConvert(t,n,a,s){var l=a.getAxis(["x","y"][t]),u=formatMinMax(map$1([0,1],function(d){return n?l.coordToData(l.toLocalCoord(s[d]),!0):l.toGlobalCoord(l.dataToCoord(s[d]))})),c=[];return c[t]=u,c[1-t]=[NaN,NaN],{values:u,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(t,n,a){return[[t[0][0]-a[0]*n[0][0],t[0][1]-a[0]*n[0][1]],[t[1][0]-a[1]*n[1][0],t[1][1]-a[1]*n[1][1]]]},polygon:function(t,n,a){return map$1(t,function(s,l){return[s[0]-a[0]*n[l][0],s[1]-a[1]*n[l][1]]})}};function axisDiffProcessor(t,n,a,s){return[n[0]-s[t]*a[0],n[1]-s[t]*a[1]]}function getScales(t,n){var a=getSize(t),s=getSize(n),l=[a[0]/s[0],a[1]/s[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l,u){this._brushController||(this._brushController=new BrushController(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(a,s,this,u,l),updateBackBtnStatus(a,s)},n.prototype.onclick=function(a,s,l){handlers[l].call(this)},n.prototype.remove=function(a,s){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(a,s){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(a){var s=a.areas;if(!a.isEnd||!s.length)return;var l={},u=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager(makeAxisFinder(this.model),u,{include:["grid"]});c.matchOutputRanges(s,u,function(ar,en,tn){if(tn.type==="cartesian2d"){var on=ar.brushType;on==="rect"?(d("x",tn,en[0]),d("y",tn,en[1])):d({lineX:"x",lineY:"y"}[on],tn,en)}}),push(u,l),this._dispatchZoomAction(l);function d(ar,en,tn){var on=en.getAxis(ar),fn=on.model,dn=Ct(ar,fn,u),Cn=dn.findRepresentativeAxisProxy(fn).getMinMaxSpan();(Cn.minValueSpan!=null||Cn.maxValueSpan!=null)&&(tn=sliderMove(0,tn.slice(),on.scale.getExtent(),0,Cn.minValueSpan,Cn.maxValueSpan)),dn&&(l[dn.id]={dataZoomId:dn.id,startValue:tn[0],endValue:tn[1]})}function Ct(ar,en,tn){var on;return tn.eachComponent({mainType:"dataZoom",subType:"select"},function(fn){var dn=fn.getAxisModel(ar,en.componentIndex);dn&&(on=fn)}),on}},n.prototype._dispatchZoomAction=function(a){var s=[];each$5(a,function(l,u){s.push(clone$4(l))}),s.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:s})},n.getDefaultOption=function(a){var s={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return s},n})(ToolboxFeature),handlers={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(t){var n={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return n.xAxisIndex==null&&n.xAxisId==null&&(n.xAxisIndex="all"),n.yAxisIndex==null&&n.yAxisId==null&&(n.yAxisIndex="all"),n}function updateBackBtnStatus(t,n){t.setIconStatus("back",count(n)>1?"emphasis":"normal")}function updateZoomBtnStatus(t,n,a,s,l){var u=a._isZoomActive;s&&s.type==="takeGlobalCursor"&&(u=s.key==="dataZoomSelect"?s.dataZoomSelectActive:!1),a._isZoomActive=u,t.setIconStatus("zoom",u?"emphasis":"normal");var c=new BrushTargetManager(makeAxisFinder(t),n,{include:["grid"]}),d=c.makePanelOpts(l,function(Ct){return Ct.xAxisDeclared&&!Ct.yAxisDeclared?"lineX":!Ct.xAxisDeclared&&Ct.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(d).enableBrush(u&&d.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(t){var n=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!n||n.get(a)==null)return;var s=n.getModel(a),l=[],u=makeAxisFinder(s),c=parseFinder$1(t,u);each$5(c.xAxisModels,function(Ct){return d(Ct,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(Ct){return d(Ct,"yAxis","yAxisIndex")});function d(Ct,ar,en){var tn=Ct.componentIndex,on={type:"select",$fromToolbox:!0,filterMode:s.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+ar+tn};on[en]=tn,l.push(on)}return l});function install$j(t){t.registerComponentModel(ToolboxModel),t.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n})(ComponentModel);function shouldTooltipConfine(t){var n=t.get("confine");return n!=null?!!n:t.get("renderMode")==="richText"}function testStyle(t){if(env.domSupported){for(var n=document.documentElement.style,a=0,s=t.length;a<s;a++)if(t[a]in n)return t[a]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(t,n){if(!t)return n;n=toCamelCase(n,!0);var a=t.indexOf(n);return t=a===-1?n:"-"+t.slice(0,a)+"-"+n,t.toLowerCase()}function getComputedStyle$1(t,n){var a=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return a?a[n]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function assembleArrow(t,n,a){if(!isString$1(a)||a==="inside")return"";var s=t.get("backgroundColor"),l=t.get("borderWidth");n=convertToColorString(n);var u=mirrorPos(a),c=Math.max(Math.round(l)*1.5,6),d="",Ct=CSS_TRANSFORM_VENDOR+":",ar;indexOf(["left","right"],u)>-1?(d+="top:50%",Ct+="translateY(-50%) rotate("+(ar=u==="left"?-225:-45)+"deg)"):(d+="left:50%",Ct+="translateX(-50%) rotate("+(ar=u==="top"?225:45)+"deg)");var en=ar*Math.PI/180,tn=c+l,on=tn*Math.abs(Math.cos(en))+tn*Math.abs(Math.sin(en)),fn=Math.round(((on-Math.SQRT2*l)/2+Math.SQRT2*l-(on-tn)/2)*100)/100;d+=";"+u+":-"+fn+"px";var dn=n+" solid "+l+"px;",Cn=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",d+";"+Ct+";","border-bottom:"+dn,"border-right:"+dn,"background-color:"+s+";"];return'<div style="'+Cn.join("")+'"></div>'}function assembleTransition(t,n){var a="cubic-bezier(0.23,1,0.32,1)",s=" "+t/2+"s "+a,l="opacity"+s+",visibility"+s;return n||(s=" "+t+"s "+a,l+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+s:",left"+s+",top"+s),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(t,n,a){var s=t.toFixed(0)+"px",l=n.toFixed(0)+"px";if(!env.transformSupported)return a?"top:"+l+";left:"+s+";":[["top",l],["left",s]];var u=env.transform3dSupported,c="translate"+(u?"3d":"")+"("+s+","+l+(u?",0":"")+")";return a?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(t){var n=[],a=t.get("fontSize"),s=t.getTextColor();s&&n.push("color:"+s),n.push("font:"+t.getFont());var l=retrieve2(t.get("lineHeight"),Math.round(a*3/2));a&&n.push("line-height:"+l+"px");var u=t.get("textShadowColor"),c=t.get("textShadowBlur")||0,d=t.get("textShadowOffsetX")||0,Ct=t.get("textShadowOffsetY")||0;return u&&c&&n.push("text-shadow:"+d+"px "+Ct+"px "+c+"px "+u),each$f(["decoration","align"],function(ar){var en=t.get(ar);en&&n.push("text-"+ar+":"+en)}),n.join(";")}function assembleCssText(t,n,a){var s=[],l=t.get("transitionDuration"),u=t.get("backgroundColor"),c=t.get("shadowBlur"),d=t.get("shadowColor"),Ct=t.get("shadowOffsetX"),ar=t.get("shadowOffsetY"),en=t.getModel("textStyle"),tn=getPaddingFromTooltipModel(t,"html"),on=Ct+"px "+ar+"px "+c+"px "+d;return s.push("box-shadow:"+on),n&&l&&s.push(assembleTransition(l,a)),u&&s.push("background-color:"+u),each$f(["width","color","radius"],function(fn){var dn="border-"+fn,Cn=toCamelCase(dn),Rn=t.get(Cn);Rn!=null&&s.push(dn+":"+Rn+(fn==="color"?"":"px"))}),s.push(assembleFont(en)),tn!=null&&s.push("padding:"+normalizeCssArray(tn).join("px ")+"px"),s.join(";")+";"}function makeStyleCoord$1(t,n,a,s,l){var u=n&&n.painter;if(a){var c=u&&u.getViewportRoot();c&&transformLocalCoord(t,c,a,s,l)}else{t[0]=s,t[1]=l;var d=u&&u.getViewportRootOffset();d&&(t[0]+=d.offsetLeft,t[1]+=d.offsetTop)}t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var TooltipHTMLContent=(function(){function t(n,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var l=this._zr=n.getZr(),u=a.appendTo,c=u&&(isString$1(u)?document.querySelector(u):isDom(u)?u:isFunction$1(u)&&u(n.getDom()));makeStyleCoord$1(this._styleCoord,l,c,n.getWidth()/2,n.getHeight()/2),(c||n.getDom()).appendChild(s),this._api=n,this._container=c;var d=this;s.onmouseenter=function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0},s.onmousemove=function(Ct){if(Ct=Ct||window.event,!d._enterable){var ar=l.handler,en=l.painter.getViewportRoot();normalizeEvent(en,Ct,!0),ar.dispatch("mousemove",Ct)}},s.onmouseleave=function(){d._inContent=!1,d._enterable&&d._show&&d.hideLater(d._hideDelay)}}return t.prototype.update=function(n){if(!this._container){var a=this._api.getDom(),s=getComputedStyle$1(a,"position"),l=a.style;l.position!=="absolute"&&s!=="absolute"&&(l.position="relative")}var u=n.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=n.get("className")||""},t.prototype.show=function(n,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el,l=s.style,u=this._styleCoord;s.innerHTML?l.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(a)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(n,a,s,l,u){var c=this.el;if(n==null){c.innerHTML="";return}var d="";if(isString$1(u)&&s.get("trigger")==="item"&&!shouldTooltipConfine(s)&&(d=assembleArrow(s,l,u)),isString$1(n))c.innerHTML=n+d;else if(n){c.innerHTML="",isArray$1(n)||(n=[n]);for(var Ct=0;Ct<n.length;Ct++)isDom(n[Ct])&&n[Ct].parentNode!==c&&c.appendChild(n[Ct]);if(d&&c.childNodes.length){var ar=document.createElement("div");ar.innerHTML=d,c.appendChild(ar)}}},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},t.prototype.moveTo=function(n,a){if(this.el){var s=this._styleCoord;if(makeStyleCoord$1(s,this._zr,this._container,n,a),s[0]!=null&&s[1]!=null){var l=this.el.style,u=assembleTransform(s[0],s[1]);each$f(u,function(c){l[c[0]]=c[1]})}}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){var n=this,a=this.el.style;a.visibility="hidden",a.opacity="0",env.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el.parentNode;n&&n.removeChild(this.el),this.el=this._container=null},t})(),TooltipRichContent=(function(){function t(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return t.prototype.update=function(n){var a=n.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(n,a,s,l,u){var c=this;isObject$3(n)&&throwError(""),this.el&&this._zr.remove(this.el);var d=s.getModel("textStyle");this.el=new ZRText({style:{rich:a.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:d.get("textShadowColor"),fill:s.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(s,"richText"),verticalAlign:"top",align:"left"},z:s.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(ar){c.el.style[ar]=s.get(ar)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(ar){c.el.style[ar]=d.get(ar)||0}),this._zr.add(this.el);var Ct=this;this.el.on("mouseover",function(){Ct._enterable&&(clearTimeout(Ct._hideTimeout),Ct._show=!0),Ct._inContent=!0}),this.el.on("mouseout",function(){Ct._enterable&&Ct._show&&Ct.hideLater(Ct._hideDelay),Ct._inContent=!1})},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el,a=this.el.getBoundingRect(),s=calcShadowOuterSize(n.style);return[a.width+s.left+s.right,a.height+s.top+s.bottom]},t.prototype.moveTo=function(n,a){var s=this.el;if(s){var l=this._styleCoord;makeStyleCoord(l,this._zr,n,a),n=l[0],a=l[1];var u=s.style,c=mathMaxWith0(u.borderWidth||0),d=calcShadowOuterSize(u);s.x=n+c+d.left,s.y=a+c+d.top,s.markRedraw()}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t})();function mathMaxWith0(t){return Math.max(0,t)}function calcShadowOuterSize(t){var n=mathMaxWith0(t.shadowBlur||0),a=mathMaxWith0(t.shadowOffsetX||0),s=mathMaxWith0(t.shadowOffsetY||0);return{left:mathMaxWith0(n-a),right:mathMaxWith0(n+a),top:mathMaxWith0(n-s),bottom:mathMaxWith0(n+s)}}function makeStyleCoord(t,n,a,s){t[0]=a,t[1]=s,t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){if(!(env.node||!s.getDom())){var l=a.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent(s):new TooltipHTMLContent(s,{appendTo:l.get("appendToBody",!0)?"body":l.get("appendTo",!0)})}},n.prototype.render=function(a,s,l){if(!(env.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=s,this._api=l;var u=this._tooltipContent;u.update(a),u.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var a=this._tooltipModel,s=a.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,u,c){s!=="none"&&(s.indexOf(l)>=0?this._tryShow(u,c):l==="leave"&&this._hide(c))},this))},n.prototype._keepShow=function(){var a=this._tooltipModel,s=this._ecModel,l=this._api,u=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&c.manuallyShowTip(a,s,l,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(a,s,l,u){if(!(u.from===this.uid||env.node||!l.getDom())){var c=makeDispatchAction(u,l);this._ticket="";var d=u.dataByCoordSys,Ct=findComponentReference(u,s,l);if(Ct){var ar=Ct.el.getBoundingRect().clone();ar.applyTransform(Ct.el.transform),this._tryShow({offsetX:ar.x+ar.width/2,offsetY:ar.y+ar.height/2,target:Ct.el,position:u.position,positionDefault:"bottom"},c)}else if(u.tooltip&&u.x!=null&&u.y!=null){var en=proxyRect;en.x=u.x,en.y=u.y,en.update(),getECData(en).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:en},c)}else if(d)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:d,tooltipOption:u.tooltipOption},c);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(a,s,l,u))return;var tn=findPointFromSeries(u,s),on=tn.point[0],fn=tn.point[1];on!=null&&fn!=null&&this._tryShow({offsetX:on,offsetY:fn,target:tn.el,position:u.position,positionDefault:"bottom"},c)}else u.x!=null&&u.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:l.getZr().findHover(u.x,u.y).target},c))}},n.prototype.manuallyHideTip=function(a,s,l,u){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,l))},n.prototype._manuallyAxisShowTip=function(a,s,l,u){var c=u.seriesIndex,d=u.dataIndex,Ct=s.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||d==null||Ct==null)){var ar=s.getSeriesByIndex(c);if(ar){var en=ar.getData(),tn=buildTooltipModel([en.getItemModel(d),ar,(ar.coordinateSystem||{}).model],this._tooltipModel);if(tn.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:d,position:u.position}),!0}}},n.prototype._tryShow=function(a,s){var l=a.target,u=this._tooltipModel;if(u){this._lastX=a.offsetX,this._lastY=a.offsetY;var c=a.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,a);else if(l){var d=getECData(l);if(d.ssrType==="legend")return;this._lastDataByCoordSys=null;var Ct,ar;findEventDispatcher(l,function(en){if(getECData(en).dataIndex!=null)return Ct=en,!0;if(getECData(en).tooltipConfig!=null)return ar=en,!0},!0),Ct?this._showSeriesItemTooltip(a,Ct,s):ar?this._showComponentItemTooltip(a,ar,s):this._hide(s)}else this._lastDataByCoordSys=null,this._hide(s)}},n.prototype._showOrMove=function(a,s){var l=a.get("showDelay");s=bind$1(s,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(s,l):s()},n.prototype._showAxisTooltip=function(a,s){var l=this._ecModel,u=this._tooltipModel,c=[s.offsetX,s.offsetY],d=buildTooltipModel([s.tooltipOption],u),Ct=this._renderMode,ar=[],en=createTooltipMarkup("section",{blocks:[],noHeader:!0}),tn=[],on=new TooltipMarkupStyleCreator;each$f(a,function(ox){each$f(ox.dataByAxis,function(sx){var lx=l.getComponent(sx.axisDim+"Axis",sx.axisIndex),cx=sx.value;if(!(!lx||cx==null)){var fx=getValueLabel(cx,lx.axis,l,sx.seriesDataIndices,sx.valueLabelOpt),gx=createTooltipMarkup("section",{header:fx,noHeader:!trim$1(fx),sortBlocks:!0,blocks:[]});en.blocks.push(gx),each$f(sx.seriesDataIndices,function(mx){var px=l.getSeriesByIndex(mx.seriesIndex),hx=mx.dataIndexInside,vx=px.getDataParams(hx);if(!(vx.dataIndex<0)){vx.axisDim=sx.axisDim,vx.axisIndex=sx.axisIndex,vx.axisType=sx.axisType,vx.axisId=sx.axisId,vx.axisValue=getAxisRawValue(lx.axis,{value:cx}),vx.axisValueLabel=fx,vx.marker=on.makeTooltipMarker("item",convertToColorString(vx.color),Ct);var yx=normalizeTooltipFormatResult(px.formatTooltip(hx,!0,null)),Sx=yx.frag;if(Sx){var _x=buildTooltipModel([px],u).get("valueFormatter");gx.blocks.push(_x?extend({valueFormatter:_x},Sx):Sx)}yx.text&&tn.push(yx.text),ar.push(vx)}})}})}),en.blocks.reverse(),tn.reverse();var fn=s.position,dn=d.get("order"),Cn=buildTooltipMarkup(en,on,Ct,dn,l.get("useUTC"),d.get("textStyle"));Cn&&tn.unshift(Cn);var Rn=Ct==="richText"?`

`:"<br/>",ax=tn.join(Rn);this._showOrMove(d,function(){this._updateContentNotChangedOnAxis(a,ar)?this._updatePosition(d,fn,c[0],c[1],this._tooltipContent,ar):this._showTooltipContent(d,ax,ar,Math.random()+"",c[0],c[1],fn,null,on)})},n.prototype._showSeriesItemTooltip=function(a,s,l){var u=this._ecModel,c=getECData(s),d=c.seriesIndex,Ct=u.getSeriesByIndex(d),ar=c.dataModel||Ct,en=c.dataIndex,tn=c.dataType,on=ar.getData(tn),fn=this._renderMode,dn=a.positionDefault,Cn=buildTooltipModel([on.getItemModel(en),ar,Ct&&(Ct.coordinateSystem||{}).model],this._tooltipModel,dn?{position:dn}:null),Rn=Cn.get("trigger");if(!(Rn!=null&&Rn!=="item")){var ax=ar.getDataParams(en,tn),ox=new TooltipMarkupStyleCreator;ax.marker=ox.makeTooltipMarker("item",convertToColorString(ax.color),fn);var sx=normalizeTooltipFormatResult(ar.formatTooltip(en,!1,tn)),lx=Cn.get("order"),cx=Cn.get("valueFormatter"),fx=sx.frag,gx=fx?buildTooltipMarkup(cx?extend({valueFormatter:cx},fx):fx,ox,fn,lx,u.get("useUTC"),Cn.get("textStyle")):sx.text,mx="item_"+ar.name+"_"+en;this._showOrMove(Cn,function(){this._showTooltipContent(Cn,gx,ax,mx,a.offsetX,a.offsetY,a.position,a.target,ox)}),l({type:"showTip",dataIndexInside:en,dataIndex:on.getRawIndex(en),seriesIndex:d,from:this.uid})}},n.prototype._showComponentItemTooltip=function(a,s,l){var u=this._renderMode==="html",c=getECData(s),d=c.tooltipConfig,Ct=d.option||{},ar=Ct.encodeHTMLContent;if(isString$1(Ct)){var en=Ct;Ct={content:en,formatter:en},ar=!0}ar&&u&&Ct.content&&(Ct=clone$4(Ct),Ct.content=encodeHTML(Ct.content));var tn=[Ct],on=this._ecModel.getComponent(c.componentMainType,c.componentIndex);on&&tn.push(on),tn.push({formatter:Ct.content});var fn=a.positionDefault,dn=buildTooltipModel(tn,this._tooltipModel,fn?{position:fn}:null),Cn=dn.get("content"),Rn=Math.random()+"",ax=new TooltipMarkupStyleCreator;this._showOrMove(dn,function(){var ox=clone$4(dn.get("formatterParams")||{});this._showTooltipContent(dn,Cn,ox,Rn,a.offsetX,a.offsetY,a.position,s,ax)}),l({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(a,s,l,u,c,d,Ct,ar,en){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var tn=this._tooltipContent;tn.setEnterable(a.get("enterable"));var on=a.get("formatter");Ct=Ct||a.get("position");var fn=s,dn=this._getNearestPoint([c,d],l,a.get("trigger"),a.get("borderColor")),Cn=dn.color;if(on)if(isString$1(on)){var Rn=a.ecModel.get("useUTC"),ax=isArray$1(l)?l[0]:l,ox=ax&&ax.axisType&&ax.axisType.indexOf("time")>=0;fn=on,ox&&(fn=format$1(ax.axisValue,fn,Rn)),fn=formatTpl(fn,l,!0)}else if(isFunction$1(on)){var sx=bind$1(function(lx,cx){lx===this._ticket&&(tn.setContent(cx,en,a,Cn,Ct),this._updatePosition(a,Ct,c,d,tn,l,ar))},this);this._ticket=u,fn=on(l,u,sx)}else fn=on;tn.setContent(fn,en,a,Cn,Ct),tn.show(a,Cn),this._updatePosition(a,Ct,c,d,tn,l,ar)}},n.prototype._getNearestPoint=function(a,s,l,u){if(l==="axis"||isArray$1(s))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(s))return{color:u||s.color||s.borderColor}},n.prototype._updatePosition=function(a,s,l,u,c,d,Ct){var ar=this._api.getWidth(),en=this._api.getHeight();s=s||a.get("position");var tn=c.getSize(),on=a.get("align"),fn=a.get("verticalAlign"),dn=Ct&&Ct.getBoundingRect().clone();if(Ct&&dn.applyTransform(Ct.transform),isFunction$1(s)&&(s=s([l,u],d,c.el,dn,{viewSize:[ar,en],contentSize:tn.slice()})),isArray$1(s))l=parsePercent(s[0],ar),u=parsePercent(s[1],en);else if(isObject$3(s)){var Cn=s;Cn.width=tn[0],Cn.height=tn[1];var Rn=getLayoutRect(Cn,{width:ar,height:en});l=Rn.x,u=Rn.y,on=null,fn=null}else if(isString$1(s)&&Ct){var ax=calcTooltipPosition(s,dn,tn,a.get("borderWidth"));l=ax[0],u=ax[1]}else{var ax=refixTooltipPosition(l,u,c,ar,en,on?null:20,fn?null:20);l=ax[0],u=ax[1]}if(on&&(l-=isCenterAlign(on)?tn[0]/2:on==="right"?tn[0]:0),fn&&(u-=isCenterAlign(fn)?tn[1]/2:fn==="bottom"?tn[1]:0),shouldTooltipConfine(a)){var ax=confineTooltipPosition(l,u,c,ar,en);l=ax[0],u=ax[1]}c.moveTo(l,u)},n.prototype._updateContentNotChangedOnAxis=function(a,s){var l=this._lastDataByCoordSys,u=this._cbParamsList,c=!!l&&l.length===a.length;return c&&each$f(l,function(d,Ct){var ar=d.dataByAxis||[],en=a[Ct]||{},tn=en.dataByAxis||[];c=c&&ar.length===tn.length,c&&each$f(ar,function(on,fn){var dn=tn[fn]||{},Cn=on.seriesDataIndices||[],Rn=dn.seriesDataIndices||[];c=c&&on.value===dn.value&&on.axisType===dn.axisType&&on.axisId===dn.axisId&&Cn.length===Rn.length,c&&each$f(Cn,function(ax,ox){var sx=Rn[ox];c=c&&ax.seriesIndex===sx.seriesIndex&&ax.dataIndex===sx.dataIndex}),u&&each$f(on.seriesDataIndices,function(ax){var ox=ax.seriesIndex,sx=s[ox],lx=u[ox];sx&&lx&&lx.data!==sx.data&&(c=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=s,!!c},n.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},n.prototype.dispose=function(a,s){env.node||!s.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",s))},n.type="tooltip",n})(ComponentView);function buildTooltipModel(t,n,a){var s=n.ecModel,l;a?(l=new Model(a,s,s),l=new Model(n.option,l,s)):l=n;for(var u=t.length-1;u>=0;u--){var c=t[u];c&&(c instanceof Model&&(c=c.get("tooltip",!0)),isString$1(c)&&(c={formatter:c}),c&&(l=new Model(c,l,s)))}return l}function makeDispatchAction(t,n){return t.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(t,n,a,s,l,u,c){var d=a.getSize(),Ct=d[0],ar=d[1];return u!=null&&(t+Ct+u+2>s?t-=Ct+u:t+=u),c!=null&&(n+ar+c>l?n-=ar+c:n+=c),[t,n]}function confineTooltipPosition(t,n,a,s,l){var u=a.getSize(),c=u[0],d=u[1];return t=Math.min(t+c,s)-c,n=Math.min(n+d,l)-d,t=Math.max(t,0),n=Math.max(n,0),[t,n]}function calcTooltipPosition(t,n,a,s){var l=a[0],u=a[1],c=Math.ceil(Math.SQRT2*s)+8,d=0,Ct=0,ar=n.width,en=n.height;switch(t){case"inside":d=n.x+ar/2-l/2,Ct=n.y+en/2-u/2;break;case"top":d=n.x+ar/2-l/2,Ct=n.y-u-c;break;case"bottom":d=n.x+ar/2-l/2,Ct=n.y+en+c;break;case"left":d=n.x-l-c,Ct=n.y+en/2-u/2;break;case"right":d=n.x+ar+c,Ct=n.y+en/2-u/2}return[d,Ct]}function isCenterAlign(t){return t==="center"||t==="middle"}function findComponentReference(t,n,a){var s=preParseFinder(t).queryOptionMap,l=s.keys()[0];if(!(!l||l==="series")){var u=queryReferringComponents(n,l,s.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),c=u.models[0];if(c){var d=a.getViewOfComponentModel(c),Ct;if(d.group.traverse(function(ar){var en=getECData(ar).tooltipConfig;if(en&&en.name===t.name)return Ct=ar,!0}),Ct)return{componentMainType:l,componentIndex:c.componentIndex,el:Ct}}}}function install$i(t){use(install$q),t.registerComponentModel(TooltipModel),t.registerComponentView(TooltipView),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(t,n){var a=normalizeToArray(t?t.brush:[]);if(a.length){var s=[];each$f(a,function(Ct){var ar=Ct.hasOwnProperty("toolbox")?Ct.toolbox:[];ar instanceof Array&&(s=s.concat(ar))});var l=t&&t.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},t.toolbox=[l]);var u=l.feature||(l.feature={}),c=u.brush||(u.brush={}),d=c.type||(c.type=[]);d.push.apply(d,s),removeDuplicate(d),n&&!d.length&&d.push.apply(d,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(t){var n={};each$f(t,function(a){n[a]=1}),t.length=0,each$f(n,function(a,s){t.push(s)})}var each$4=each$f;function hasKeys(t){if(t){for(var n in t)if(t.hasOwnProperty(n))return!0}}function createVisualMappings(t,n,a){var s={};return each$4(n,function(u){var c=s[u]=l();each$4(t[u],function(d,Ct){if(VisualMapping.isValidType(Ct)){var ar={type:Ct,visual:d};a&&a(ar,u),c[Ct]=new VisualMapping(ar),Ct==="opacity"&&(ar=clone$4(ar),ar.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping(ar))}})}),s;function l(){var u=function(){};u.prototype.__hidden=u.prototype;var c=new u;return c}}function replaceVisualOption(t,n,a){var s;each$f(a,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])&&(s=!0)}),s&&each$f(a,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])?t[l]=clone$4(n[l]):delete t[l]})}function applyVisual(t,n,a,s,l,u){var c={};each$f(t,function(tn){var on=VisualMapping.prepareVisualTypes(n[tn]);c[tn]=on});var d;function Ct(tn){return getItemVisualFromData(a,d,tn)}function ar(tn,on){setItemVisualFromData(a,d,tn,on)}a.each(en);function en(tn,on){d=tn;var fn=a.getRawDataItem(d);if(!(fn&&fn.visualMap===!1))for(var dn=s.call(l,tn),Cn=n[dn],Rn=c[dn],ax=0,ox=Rn.length;ax<ox;ax++){var sx=Rn[ax];Cn[sx]&&Cn[sx].applyVisual(tn,Ct,ar)}}}function incrementalApplyVisual(t,n,a,s){var l={};return each$f(t,function(u){var c=VisualMapping.prepareVisualTypes(n[u]);l[u]=c}),{progress:function(c,d){var Ct;s!=null&&(Ct=d.getDimensionIndex(s));function ar(cx){return getItemVisualFromData(d,tn,cx)}function en(cx,fx){setItemVisualFromData(d,tn,cx,fx)}for(var tn,on=d.getStore();(tn=c.next())!=null;){var fn=d.getRawDataItem(tn);if(!(fn&&fn.visualMap===!1))for(var dn=s!=null?on.get(Ct,tn):tn,Cn=a(dn),Rn=n[Cn],ax=l[Cn],ox=0,sx=ax.length;ox<sx;ox++){var lx=ax[ox];Rn[lx]&&Rn[lx].applyVisual(dn,ar,en)}}}}}function makeBrushCommonSelectorForSeries(t){var n=t.brushType,a={point:function(s){return selector[n].point(s,a,t)},rect:function(s){return selector[n].rect(s,a,t)}};return a}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])},rect:function(t,n,a){return t&&a.boundingRect.intersect(t)}},polygon:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])&&contain(a.range,t[0],t[1])},rect:function(t,n,a){var s=a.range;if(!t||s.length<=1)return!1;var l=t.x,u=t.y,c=t.width,d=t.height,Ct=s[0];if(contain(s,l,u)||contain(s,l+c,u)||contain(s,l,u+d)||contain(s,l+c,u+d)||BoundingRect.create(t).contain(Ct[0],Ct[1])||linePolygonIntersect(l,u,l+c,u,s)||linePolygonIntersect(l,u,l,u+d,s)||linePolygonIntersect(l+c,u,l+c,u+d,s)||linePolygonIntersect(l,u+d,l+c,u+d,s))return!0}}};function getLineSelectors(t){var n=["x","y"],a=["width","height"];return{point:function(s,l,u){if(s){var c=u.range,d=s[t];return inLineRange(d,c)}},rect:function(s,l,u){if(s){var c=u.range,d=[s[n[t]],s[n[t]]+s[a[t]]];return d[1]<d[0]&&d.reverse(),inLineRange(d[0],c)||inLineRange(d[1],c)||inLineRange(c[0],d)||inLineRange(c[1],d)}}}}function inLineRange(t,n){return n[0]<=t&&t<=n[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(t){t.eachComponent({mainType:"brush"},function(n){var a=n.brushTargetManager=new BrushTargetManager(n.option,t);a.setInputRanges(n.areas,t)})}function brushVisual(t,n,a){var s=[],l,u;t.eachComponent({mainType:"brush"},function(c){a&&a.type==="takeGlobalCursor"&&c.setBrushOption(a.key==="brush"?a.brushOption:{brushType:!1})}),layoutCovers(t),t.eachComponent({mainType:"brush"},function(c,d){var Ct={brushId:c.id,brushIndex:d,brushName:c.name,areas:clone$4(c.areas),selected:[]};s.push(Ct);var ar=c.option,en=ar.brushLink,tn=[],on=[],fn=[],dn=!1;d||(l=ar.throttleType,u=ar.throttleDelay);var Cn=map$1(c.areas,function(cx){var fx=boundingRectBuilders[cx.brushType],gx=defaults({boundingRect:fx?fx(cx):void 0},cx);return gx.selectors=makeBrushCommonSelectorForSeries(gx),gx}),Rn=createVisualMappings(c.option,STATE_LIST,function(cx){cx.mappingMethod="fixed"});isArray$1(en)&&each$f(en,function(cx){tn[cx]=1});function ax(cx){return en==="all"||!!tn[cx]}function ox(cx){return!!cx.length}t.eachSeries(function(cx,fx){var gx=fn[fx]=[];cx.subType==="parallel"?sx(cx,fx):lx(cx,fx,gx)});function sx(cx,fx){var gx=cx.coordinateSystem;dn=dn||gx.hasAxisBrushed(),ax(fx)&&gx.eachActiveState(cx.getData(),function(mx,px){mx==="active"&&(on[px]=1)})}function lx(cx,fx,gx){if(!(!cx.brushSelector||brushModelNotControll(c,fx))&&(each$f(Cn,function(px){c.brushTargetManager.controlSeries(px,cx,t)&&gx.push(px),dn=dn||ox(gx)}),ax(fx)&&ox(gx))){var mx=cx.getData();mx.each(function(px){checkInRange(cx,gx,mx,px)&&(on[px]=1)})}}t.eachSeries(function(cx,fx){var gx={seriesId:cx.id,seriesIndex:fx,seriesName:cx.name,dataIndex:[]};Ct.selected.push(gx);var mx=fn[fx],px=cx.getData(),hx=ax(fx)?function(vx){return on[vx]?(gx.dataIndex.push(px.getRawIndex(vx)),"inBrush"):"outOfBrush"}:function(vx){return checkInRange(cx,mx,px,vx)?(gx.dataIndex.push(px.getRawIndex(vx)),"inBrush"):"outOfBrush"};(ax(fx)?dn:ox(mx))&&applyVisual(STATE_LIST,Rn,px,hx)})}),dispatchAction$1(n,l,u,s,a)}function dispatchAction$1(t,n,a,s,l){if(l){var u=t.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(u,DISPATCH_METHOD,a,n);c(t,s)}}}function doDispatch(t,n){if(!t.isDisposed()){var a=t.getZr();a[DISPATCH_FLAG]=!0,t.dispatchAction({type:"brushSelect",batch:n}),a[DISPATCH_FLAG]=!1}}function checkInRange(t,n,a,s){for(var l=0,u=n.length;l<u;l++){var c=n[l];if(t.brushSelector(s,a,c.selectors,c))return!0}}function brushModelNotControll(t,n){var a=t.option.seriesIndex;return a!=null&&a!=="all"&&(isArray$1(a)?indexOf(a,n)<0:n!==a)}var boundingRectBuilders={rect:function(t){return getBoundingRectFromMinMax(t.range)},polygon:function(t){for(var n,a=t.range,s=0,l=a.length;s<l;s++){n=n||[[1/0,-1/0],[1/0,-1/0]];var u=a[s];u[0]<n[0][0]&&(n[0][0]=u[0]),u[0]>n[0][1]&&(n[0][1]=u[0]),u[1]<n[1][0]&&(n[1][0]=u[1]),u[1]>n[1][1]&&(n[1][1]=u[1])}return n&&getBoundingRectFromMinMax(n)}};function getBoundingRectFromMinMax(t){return new BoundingRect(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var BrushView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){this.ecModel=a,this.api=s,this.model,(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},n.prototype.render=function(a,s,l,u){this.model=a,this._updateController(a,s,l,u)},n.prototype.updateTransform=function(a,s,l,u){layoutCovers(s),this._updateController(a,s,l,u)},n.prototype.updateVisual=function(a,s,l,u){this.updateTransform(a,s,l,u)},n.prototype.updateView=function(a,s,l,u){this._updateController(a,s,l,u)},n.prototype._updateController=function(a,s,l,u){(!u||u.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(l)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(a){var s=this.model.id,l=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:s,areas:clone$4(l),$from:s}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:s,areas:clone$4(l),$from:s})},n.type="brush",n})(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.areas=[],a.brushOption={},a}return n.prototype.optionUpdated=function(a,s){var l=this.option;!s&&replaceVisualOption(l,a,["inBrush","outOfBrush"]);var u=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},n.prototype.setAreas=function(a){a&&(this.areas=map$1(a,function(s){return generateBrushOption(this.option,s)},this))},n.prototype.setBrushOption=function(a){this.brushOption=generateBrushOption(this.option,a),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n})(ComponentModel);function generateBrushOption(t,n){return merge({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Model(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},n,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l){var u,c,d;s.eachComponent({mainType:"brush"},function(Ct){u=Ct.brushType,c=Ct.brushOption.brushMode||"single",d=d||!!Ct.areas.length}),this._brushType=u,this._brushMode=c,each$f(a.get("type",!0),function(Ct){a.setIconStatus(Ct,(Ct==="keep"?c==="multiple":Ct==="clear"?d:Ct===u)?"emphasis":"normal")})},n.prototype.updateView=function(a,s,l){this.render(a,s,l)},n.prototype.getIcons=function(){var a=this.model,s=a.get("icon",!0),l={};return each$f(a.get("type",!0),function(u){s[u]&&(l[u]=s[u])}),l},n.prototype.onclick=function(a,s,l){var u=this._brushType,c=this._brushMode;l==="clear"?(s.dispatchAction({type:"axisAreaSelect",intervals:[]}),s.dispatchAction({type:"brush",command:"clear",areas:[]})):s.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?u:u===l?!1:l,brushMode:l==="keep"?c==="multiple"?"single":"multiple":c}})},n.getDefaultOption=function(a){var s={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])};return s},n})(ToolboxFeature);function install$h(t){t.registerComponentView(BrushView),t.registerComponentModel(BrushModel),t.registerPreprocessor(brushPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,brushVisual),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,a){a.eachComponent({mainType:"brush",query:n},function(s){s.setAreas(n.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n})(ComponentModel),TitleView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){if(this.group.removeAll(),!!a.get("show")){var u=this.group,c=a.getModel("textStyle"),d=a.getModel("subtextStyle"),Ct=a.get("textAlign"),ar=retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),en=new ZRText({style:createTextStyle$1(c,{text:a.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),tn=en.getBoundingRect(),on=a.get("subtext"),fn=new ZRText({style:createTextStyle$1(d,{text:on,fill:d.getTextColor(),y:tn.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),dn=a.get("link"),Cn=a.get("sublink"),Rn=a.get("triggerEvent",!0);en.silent=!dn&&!Rn,fn.silent=!Cn&&!Rn,dn&&en.on("click",function(){windowOpen(dn,"_"+a.get("target"))}),Cn&&fn.on("click",function(){windowOpen(Cn,"_"+a.get("subtarget"))}),getECData(en).eventData=getECData(fn).eventData=Rn?{componentType:"title",componentIndex:a.componentIndex}:null,u.add(en),on&&u.add(fn);var ax=u.getBoundingRect(),ox=a.getBoxLayoutParams();ox.width=ax.width,ox.height=ax.height;var sx=getLayoutRect(ox,{width:l.getWidth(),height:l.getHeight()},a.get("padding"));Ct||(Ct=a.get("left")||a.get("right"),Ct==="middle"&&(Ct="center"),Ct==="right"?sx.x+=sx.width:Ct==="center"&&(sx.x+=sx.width/2)),ar||(ar=a.get("top")||a.get("bottom"),ar==="center"&&(ar="middle"),ar==="bottom"?sx.y+=sx.height:ar==="middle"&&(sx.y+=sx.height/2),ar=ar||"top"),u.x=sx.x,u.y=sx.y,u.markRedraw();var lx={align:Ct,verticalAlign:ar};en.setStyle(lx),fn.setStyle(lx),ax=u.getBoundingRect();var cx=sx.margin,fx=a.getItemStyle(["color","opacity"]);fx.fill=a.get("backgroundColor");var gx=new Rect$2({shape:{x:ax.x-cx[3],y:ax.y-cx[0],width:ax.width+cx[1]+cx[3],height:ax.height+cx[0]+cx[2],r:a.get("borderRadius")},style:fx,subPixelOptimize:!0,silent:!0});u.add(gx)}},n.type="title",n})(ComponentView);function install$g(t){t.registerComponentModel(TitleModel),t.registerComponentView(TitleView)}var TimelineModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode="box",a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),this._initData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var s=this._data.count();this.option.loop?a=(a%s+s)%s:(a>=s&&(a=s-1),a<0&&(a=0)),this.option.currentIndex=a},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(a){this.option.autoPlay=!!a},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var a=this.option,s=a.data||[],l=a.axisType,u=this._names=[],c;l==="category"?(c=[],each$f(s,function(ar,en){var tn=convertOptionIdName(getDataItemValue(ar),""),on;isObject$3(ar)?(on=clone$4(ar),on.value=en):on=en,c.push(on),u.push(tn)})):c=s;var d={category:"ordinal",time:"time",value:"number"}[l]||"number",Ct=this._data=new SeriesData([{name:"value",type:d}],this);Ct.initData(c,u)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n})(ComponentModel),SliderTimelineModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline.slider",n.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n})(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline",n})(ComponentView),TimelineAxis=(function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this,a,s,l)||this;return c.type=u||"value",c}return n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},n})(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){this.api=s},n.prototype.render=function(a,s,l){if(this.model=a,this.api=l,this.ecModel=s,this.group.removeAll(),a.get("show",!0)){var u=this._layout(a,l),c=this._createGroup("_mainGroup"),d=this._createGroup("_labelGroup"),Ct=this._axis=this._createAxis(u,a);a.formatTooltip=function(ar){var en=Ct.scale.getLabel({value:ar});return createTooltipMarkup("nameValue",{noName:!0,value:en})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(ar){this["_render"+ar](u,c,Ct,a)},this),this._renderAxisLabel(u,d,Ct,a),this._position(u,a)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(a,s){var l=a.get(["label","position"]),u=a.get("orient"),c=getViewRect(a,s),d;l==null||l==="auto"?d=u==="horizontal"?c.y+c.height/2<s.getHeight()/2?"-":"+":c.x+c.width/2<s.getWidth()/2?"+":"-":isString$1(l)?d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][l]:d=l;var Ct={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},ar={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},en={horizontal:0,vertical:PI/2},tn=u==="vertical"?c.height:c.width,on=a.getModel("controlStyle"),fn=on.get("show",!0),dn=fn?on.get("itemSize"):0,Cn=fn?on.get("itemGap"):0,Rn=dn+Cn,ax=a.get(["label","rotate"])||0;ax=ax*PI/180;var ox,sx,lx,cx=on.get("position",!0),fx=fn&&on.get("showPlayBtn",!0),gx=fn&&on.get("showPrevBtn",!0),mx=fn&&on.get("showNextBtn",!0),px=0,hx=tn;cx==="left"||cx==="bottom"?(fx&&(ox=[0,0],px+=Rn),gx&&(sx=[px,0],px+=Rn),mx&&(lx=[hx-dn,0],hx-=Rn)):(fx&&(ox=[hx-dn,0],hx-=Rn),gx&&(sx=[0,0],px+=Rn),mx&&(lx=[hx-dn,0],hx-=Rn));var vx=[px,hx];return a.get("inverse")&&vx.reverse(),{viewRect:c,mainLength:tn,orient:u,rotation:en[u],labelRotation:ax,labelPosOpt:d,labelAlign:a.get(["label","align"])||Ct[u],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||ar[u],playPosition:ox,prevBtnPosition:sx,nextBtnPosition:lx,axisExtent:vx,controlSize:dn,controlGap:Cn}},n.prototype._position=function(a,s){var l=this._mainGroup,u=this._labelGroup,c=a.viewRect;if(a.orient==="vertical"){var d=create$1(),Ct=c.x,ar=c.y+c.height;translate(d,d,[-Ct,-ar]),rotate(d,d,-PI/2),translate(d,d,[Ct,ar]),c=c.clone(),c.applyTransform(d)}var en=ox(c),tn=ox(l.getBoundingRect()),on=ox(u.getBoundingRect()),fn=[l.x,l.y],dn=[u.x,u.y];dn[0]=fn[0]=en[0][0];var Cn=a.labelPosOpt;if(Cn==null||isString$1(Cn)){var Rn=Cn==="+"?0:1;sx(fn,tn,en,1,Rn),sx(dn,on,en,1,1-Rn)}else{var Rn=Cn>=0?0:1;sx(fn,tn,en,1,Rn),dn[1]=fn[1]+Cn}l.setPosition(fn),u.setPosition(dn),l.rotation=u.rotation=a.rotation,ax(l),ax(u);function ax(lx){lx.originX=en[0][0]-lx.x,lx.originY=en[1][0]-lx.y}function ox(lx){return[[lx.x,lx.x+lx.width],[lx.y,lx.y+lx.height]]}function sx(lx,cx,fx,gx,mx){lx[gx]+=fx[gx][mx]-cx[gx][mx]}},n.prototype._createAxis=function(a,s){var l=s.getData(),u=s.get("axisType"),c=createScaleByModel(s,u);c.getTicks=function(){return l.mapArray(["value"],function(ar){return{value:ar}})};var d=l.getDataExtent("value");c.setExtent(d[0],d[1]),c.calcNiceTicks();var Ct=new TimelineAxis("value",c,a.axisExtent,u);return Ct.model=s,Ct},n.prototype._createGroup=function(a){var s=this[a]=new Group$3;return this.group.add(s),s},n.prototype._renderAxisLine=function(a,s,l,u){var c=l.getExtent();if(u.get(["lineStyle","show"])){var d=new Line$1({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});s.add(d);var Ct=this._progressLine=new Line$1({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:d.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});s.add(Ct)}},n.prototype._renderAxisTick=function(a,s,l,u){var c=this,d=u.getData(),Ct=l.scale.getTicks();this._tickSymbols=[],each$f(Ct,function(ar){var en=l.dataToCoord(ar.value),tn=d.getItemModel(ar.value),on=tn.getModel("itemStyle"),fn=tn.getModel(["emphasis","itemStyle"]),dn=tn.getModel(["progress","itemStyle"]),Cn={x:en,y:0,onclick:bind$1(c._changeTimeline,c,ar.value)},Rn=giveSymbol(tn,on,s,Cn);Rn.ensureState("emphasis").style=fn.getItemStyle(),Rn.ensureState("progress").style=dn.getItemStyle(),enableHoverEmphasis(Rn);var ax=getECData(Rn);tn.get("tooltip")?(ax.dataIndex=ar.value,ax.dataModel=u):ax.dataIndex=ax.dataModel=null,c._tickSymbols.push(Rn)})},n.prototype._renderAxisLabel=function(a,s,l,u){var c=this,d=l.getLabelModel();if(d.get("show")){var Ct=u.getData(),ar=l.getViewLabels();this._tickLabels=[],each$f(ar,function(en){var tn=en.tickValue,on=Ct.getItemModel(tn),fn=on.getModel("label"),dn=on.getModel(["emphasis","label"]),Cn=on.getModel(["progress","label"]),Rn=l.dataToCoord(en.tickValue),ax=new ZRText({x:Rn,y:0,rotation:a.labelRotation-a.rotation,onclick:bind$1(c._changeTimeline,c,tn),silent:!1,style:createTextStyle$1(fn,{text:en.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});ax.ensureState("emphasis").style=createTextStyle$1(dn),ax.ensureState("progress").style=createTextStyle$1(Cn),s.add(ax),enableHoverEmphasis(ax),labelDataIndexStore(ax).dataIndex=tn,c._tickLabels.push(ax)})}},n.prototype._renderControl=function(a,s,l,u){var c=a.controlSize,d=a.rotation,Ct=u.getModel("controlStyle").getItemStyle(),ar=u.getModel(["emphasis","controlStyle"]).getItemStyle(),en=u.getPlayState(),tn=u.get("inverse",!0);on(a.nextBtnPosition,"next",bind$1(this._changeTimeline,this,tn?"-":"+")),on(a.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,tn?"+":"-")),on(a.playPosition,en?"stop":"play",bind$1(this._handlePlayClick,this,!en),!0);function on(fn,dn,Cn,Rn){if(fn){var ax=parsePercent$1(retrieve2(u.get(["controlStyle",dn+"BtnSize"]),c),c),ox=[0,-ax/2,ax,ax],sx=makeControlIcon(u,dn+"Icon",ox,{x:fn[0],y:fn[1],originX:c/2,originY:0,rotation:Rn?-d:0,rectHover:!0,style:Ct,onclick:Cn});sx.ensureState("emphasis").style=ar,s.add(sx),enableHoverEmphasis(sx)}}},n.prototype._renderCurrentPointer=function(a,s,l,u){var c=u.getData(),d=u.getCurrentIndex(),Ct=c.getItemModel(d).getModel("checkpointStyle"),ar=this,en={onCreate:function(tn){tn.draggable=!0,tn.drift=bind$1(ar._handlePointerDrag,ar),tn.ondragend=bind$1(ar._handlePointerDragend,ar),pointerMoveTo(tn,ar._progressLine,d,l,u,!0)},onUpdate:function(tn){pointerMoveTo(tn,ar._progressLine,d,l,u)}};this._currentPointer=giveSymbol(Ct,Ct,this._mainGroup,{},this._currentPointer,en)},n.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},n.prototype._handlePointerDrag=function(a,s,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},n.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},n.prototype._pointerChangeTimeline=function(a,s){var l=this._toAxisCoord(a)[0],u=this._axis,c=asc$2(u.getExtent().slice());l>c[1]&&(l=c[1]),l<c[0]&&(l=c[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var d=this._progressLine;d&&(d.shape.x2=l,d.dirty());var Ct=this._findNearestTick(l),ar=this.model;(s||Ct!==ar.getCurrentIndex()&&ar.get("realtime"))&&this._changeTimeline(Ct)},n.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var s=a.model;a._changeTimeline(s.getCurrentIndex()+(s.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(a){var s=this._mainGroup.getLocalTransform();return applyTransform(a,s,!0)},n.prototype._findNearestTick=function(a){var s=this.model.getData(),l=1/0,u,c=this._axis;return s.each(["value"],function(d,Ct){var ar=c.dataToCoord(d),en=Math.abs(ar-a);en<l&&(l=en,u=Ct)}),u},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(a){var s=this.model.getCurrentIndex();a==="+"?a=s+1:a==="-"&&(a=s-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},n.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),s=this._tickSymbols,l=this._tickLabels;if(s)for(var u=0;u<s.length;u++)s&&s[u]&&s[u].toggleState("progress",u<a);if(l)for(var u=0;u<l.length;u++)l&&l[u]&&l[u].toggleState("progress",labelDataIndexStore(l[u]).dataIndex<=a)},n.type="timeline.slider",n})(TimelineView);function createScaleByModel(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},t.get("padding"))}function makeControlIcon(t,n,a,s){var l=s.style,u=createIcon(t.get(["controlStyle",n]),s||{},new BoundingRect(a[0],a[1],a[2],a[3]));return l&&u.setStyle(l),u}function giveSymbol(t,n,a,s,l,u){var c=n.get("color");if(l)l.setColor(c),a.add(l),u&&u.onUpdate(l);else{var d=t.get("symbol");l=createSymbol$1(d,-1,-1,2,2,c),l.setStyle("strokeNoScale",!0),a.add(l),u&&u.onCreate(l)}var Ct=n.getItemStyle(["color"]);l.setStyle(Ct),s=merge({rectHover:!0,z2:100},s,!0);var ar=normalizeSymbolSize(t.get("symbolSize"));s.scaleX=ar[0]/2,s.scaleY=ar[1]/2;var en=normalizeSymbolOffset(t.get("symbolOffset"),ar);en&&(s.x=(s.x||0)+en[0],s.y=(s.y||0)+en[1]);var tn=t.get("symbolRotate");return s.rotation=(tn||0)*Math.PI/180||0,l.attr(s),l.updateTransform(),l}function pointerMoveTo(t,n,a,s,l,u){if(!t.dragging){var c=l.getModel("checkpointStyle"),d=s.dataToCoord(l.getData().get("value",a));if(u||!c.get("animation",!0))t.attr({x:d,y:0}),n&&n.attr({shape:{x2:d}});else{var Ct={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:d,y:0},Ct),n&&n.animateTo({shape:{x2:d}},Ct)}}}function installTimelineAction(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,a,s){var l=a.getComponent("timeline");return l&&n.currentIndex!=null&&(l.setCurrentIndex(n.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),s.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),a.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},n)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,a){var s=a.getComponent("timeline");s&&n.playState!=null&&s.setPlayState(n.playState)})}function timelinePreprocessor(t){var n=t&&t.timeline;isArray$1(n)||(n=n?[n]:[]),each$f(n,function(a){a&&compatibleEC2(a)})}function compatibleEC2(t){var n=t.type,a={number:"value",time:"time"};if(a[n]&&(t.axisType=a[n],delete t.type),transferItem(t),has$1(t,"controlPosition")){var s=t.controlStyle||(t.controlStyle={});has$1(s,"position")||(s.position=t.controlPosition),s.position==="none"&&!has$1(s,"show")&&(s.show=!1,delete s.position),delete t.controlPosition}each$f(t.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(t){var n=t.itemStyle||(t.itemStyle={}),a=n.emphasis||(n.emphasis={}),s=t.label||t.label||{},l=s.normal||(s.normal={}),u={normal:1,emphasis:1};each$f(s,function(c,d){!u[d]&&!has$1(l,d)&&(l[d]=c)}),a.label&&!has$1(s,"emphasis")&&(s.emphasis=a.label,delete a.label)}function has$1(t,n){return t.hasOwnProperty(n)}function install$f(t){t.registerComponentModel(SliderTimelineModel),t.registerComponentView(SliderTimelineView),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(t),t.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(t,n){if(!t)return!1;for(var a=isArray$1(t)?t:[t],s=0;s<a.length;s++)if(a[s]&&a[s][n])return!0;return!1}function fillLabel(t){defaultEmphasis(t,"label",["show"])}var inner$5=makeInner(),MarkerModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.createdBySelf=!1,a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),this._mergeOption(a,l,!1,!0)},n.prototype.isAnimationEnabled=function(){if(env.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},n.prototype.mergeOption=function(a,s){this._mergeOption(a,s,!1,!1)},n.prototype._mergeOption=function(a,s,l,u){var c=this.mainType;l||s.eachSeries(function(d){var Ct=d.get(this.mainType,!0),ar=inner$5(d)[c];if(!Ct||!Ct.data){inner$5(d)[c]=null;return}ar?ar._mergeOption(Ct,s,!0):(u&&fillLabel(Ct),each$f(Ct.data,function(en){en instanceof Array?(fillLabel(en[0]),fillLabel(en[1])):fillLabel(en)}),ar=this.createMarkerModelFromSeries(Ct,this,s),extend(ar,{mainType:this.mainType,seriesIndex:d.seriesIndex,name:d.name,createdBySelf:!0}),ar.__hostSeries=d),inner$5(d)[c]=ar},this)},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.getRawValue(a),d=u.getName(a);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:d,value:c,noName:!d,noValue:c==null})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(a){this._data=a},n.prototype.getDataParams=function(a,s){var l=DataFormatMixin.prototype.getDataParams.call(this,a,s),u=this.__hostSeries;return u&&(l.seriesId=u.id,l.seriesName=u.name,l.seriesType=u.subType),l},n.getMarkerModelFromSeries=function(a,s){return inner$5(a)[s]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n})(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n})(MarkerModel);function hasXOrY(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function hasXAndY(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function markerTypeCalculatorWithExtent(t,n,a,s,l,u){var c=[],d=isDimensionStacked(n,s),Ct=d?n.getCalculationInfo("stackResultDimension"):s,ar=numCalculate(n,Ct,t),en=n.indicesOfNearest(Ct,ar)[0];c[l]=n.get(a,en),c[u]=n.get(Ct,en);var tn=n.get(s,en),on=getPrecision(n.get(s,en));return on=Math.min(on,20),on>=0&&(c[u]=+c[u].toFixed(on)),[c,tn]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(t,n){if(n){var a=t.getData(),s=t.coordinateSystem,l=s&&s.dimensions;if(!hasXAndY(n)&&!isArray$1(n.coord)&&isArray$1(l)){var u=getAxisInfo(n,a,s,t);if(n=clone$4(n),n.type&&markerTypeCalculator[n.type]&&u.baseAxis&&u.valueAxis){var c=indexOf(l,u.baseAxis.dim),d=indexOf(l,u.valueAxis.dim),Ct=markerTypeCalculator[n.type](a,u.baseDataDim,u.valueDataDim,c,d);n.coord=Ct[0],n.value=Ct[1]}else n.coord=[n.xAxis!=null?n.xAxis:n.radiusAxis,n.yAxis!=null?n.yAxis:n.angleAxis]}if(n.coord==null||!isArray$1(l))n.coord=[];else for(var ar=n.coord,en=0;en<2;en++)markerTypeCalculator[ar[en]]&&(ar[en]=numCalculate(a,a.mapDimension(l[en]),ar[en]));return n}}function getAxisInfo(t,n,a,s){var l={};return t.valueIndex!=null||t.valueDim!=null?(l.valueDataDim=t.valueIndex!=null?n.getDimension(t.valueIndex):t.valueDim,l.valueAxis=a.getAxis(dataDimToCoordDim(s,l.valueDataDim)),l.baseAxis=a.getOtherAxis(l.valueAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim)):(l.baseAxis=s.getBaseAxis(),l.valueAxis=a.getOtherAxis(l.baseAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim),l.valueDataDim=n.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(t,n){var a=t.getData().getDimensionInfo(n);return a&&a.coordDim}function dataFilter(t,n){return t&&t.containData&&n.coord&&!hasXOrY(n)?t.containData(n.coord):!0}function zoneFilter(t,n,a){return t&&t.containZone&&n.coord&&a.coord&&!hasXOrY(n)&&!hasXOrY(a)?t.containZone(n.coord,a.coord):!0}function createMarkerDimValueGetter(t,n){return t?function(a,s,l,u){var c=u<2?a.coord&&a.coord[u]:a.value;return parseDataValue(c,n[u])}:function(a,s,l,u){return parseDataValue(a.value,n[u])}}function numCalculate(t,n,a){if(a==="average"){var s=0,l=0;return t.each(n,function(u,c){isNaN(u)||(s+=u,l++)}),s/l}else return a==="median"?t.getMedian(n):t.getDataExtent(n)[a==="max"?1:0]}var inner$4=makeInner(),MarkerView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this.markerGroupMap=createHashMap()},n.prototype.render=function(a,s,l){var u=this,c=this.markerGroupMap;c.each(function(d){inner$4(d).keep=!1}),s.eachSeries(function(d){var Ct=MarkerModel.getMarkerModelFromSeries(d,u.type);Ct&&u.renderSeries(d,Ct,s,l)}),c.each(function(d){!inner$4(d).keep&&u.group.remove(d.group)})},n.prototype.markKeep=function(a){inner$4(a).keep=!0},n.prototype.toggleBlurSeries=function(a,s){var l=this;each$f(a,function(u){var c=MarkerModel.getMarkerModelFromSeries(u,l.type);if(c){var d=c.getData();d.eachItemGraphicEl(function(Ct){Ct&&(s?enterBlur(Ct):leaveBlur(Ct))})}})},n.type="marker",n})(ComponentView);function updateMarkerLayout(t,n,a){var s=n.coordinateSystem;t.each(function(l){var u=t.getItemModel(l),c,d=parsePercent(u.get("x"),a.getWidth()),Ct=parsePercent(u.get("y"),a.getHeight());if(!isNaN(d)&&!isNaN(Ct))c=[d,Ct];else if(n.getMarkerPosition)c=n.getMarkerPosition(t.getValues(t.dimensions,l));else if(s){var ar=t.get(s.dimensions[0],l),en=t.get(s.dimensions[1],l);c=s.dataToPoint([ar,en])}isNaN(d)||(c[0]=d),isNaN(Ct)||(c[1]=Ct),t.setItemLayout(l,c)})}var MarkPointView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markPoint");c&&(updateMarkerLayout(c.getData(),u,l),this.markerGroupMap.get(u.id).updateLayout())},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,d=a.id,Ct=a.getData(),ar=this.markerGroupMap,en=ar.get(d)||ar.set(d,new SymbolDraw),tn=createData(c,a,s);s.setData(tn),updateMarkerLayout(s.getData(),a,u),tn.each(function(on){var fn=tn.getItemModel(on),dn=fn.getShallow("symbol"),Cn=fn.getShallow("symbolSize"),Rn=fn.getShallow("symbolRotate"),ax=fn.getShallow("symbolOffset"),ox=fn.getShallow("symbolKeepAspect");if(isFunction$1(dn)||isFunction$1(Cn)||isFunction$1(Rn)||isFunction$1(ax)){var sx=s.getRawValue(on),lx=s.getDataParams(on);isFunction$1(dn)&&(dn=dn(sx,lx)),isFunction$1(Cn)&&(Cn=Cn(sx,lx)),isFunction$1(Rn)&&(Rn=Rn(sx,lx)),isFunction$1(ax)&&(ax=ax(sx,lx))}var cx=fn.getModel("itemStyle").getItemStyle(),fx=getVisualFromData(Ct,"color");cx.fill||(cx.fill=fx),tn.setItemVisual(on,{symbol:dn,symbolSize:Cn,symbolRotate:Rn,symbolOffset:ax,symbolKeepAspect:ox,style:cx})}),en.updateData(tn),this.group.add(en.group),tn.eachItemGraphicEl(function(on){on.traverse(function(fn){getECData(fn).dataModel=s})}),this.markKeep(en),en.group.silent=s.get("silent")||a.get("silent")},n.type="markPoint",n})(MarkerView);function createData(t,n,a){var s;t?s=map$1(t&&t.dimensions,function(d){var Ct=n.getData().getDimensionInfo(n.getData().mapDimension(d))||{};return extend(extend({},Ct),{name:d,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,a),u=map$1(a.get("data"),curry$1(dataTransform,n));t&&(u=filter(u,curry$1(dataFilter,t)));var c=createMarkerDimValueGetter(!!t,s);return l.initData(u,null,c),l}function install$e(t){t.registerComponentModel(MarkPointModel),t.registerComponentView(MarkPointView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}var MarkLineModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n})(MarkerModel),inner$3=makeInner(),markLineTransform=function(t,n,a,s){var l=t.getData(),u;if(isArray$1(s))u=s;else{var c=s.type;if(c==="min"||c==="max"||c==="average"||c==="median"||s.xAxis!=null||s.yAxis!=null){var d=void 0,Ct=void 0;if(s.yAxis!=null||s.xAxis!=null)d=n.getAxis(s.yAxis!=null?"y":"x"),Ct=retrieve(s.yAxis,s.xAxis);else{var ar=getAxisInfo(s,l,n,t);d=ar.valueAxis;var en=getStackedDimension(l,ar.valueDataDim);Ct=numCalculate(l,en,c)}var tn=d.dim==="x"?0:1,on=1-tn,fn=clone$4(s),dn={coord:[]};fn.type=null,fn.coord=[],fn.coord[on]=-1/0,dn.coord[on]=1/0;var Cn=a.get("precision");Cn>=0&&isNumber(Ct)&&(Ct=+Ct.toFixed(Math.min(Cn,20))),fn.coord[tn]=dn.coord[tn]=Ct,u=[fn,dn,{type:c,valueIndex:s.valueIndex,value:Ct}]}else u=[]}var Rn=[dataTransform(t,u[0]),dataTransform(t,u[1]),extend({},u[2])];return Rn[2].type=Rn[2].type||null,merge(Rn[2],Rn[0]),merge(Rn[2],Rn[1]),Rn};function isInfinity$1(t){return!isNaN(t)&&!isFinite(t)}function ifMarkLineHasOnlyDim(t,n,a,s){var l=1-t,u=s.dimensions[t];return isInfinity$1(n[l])&&isInfinity$1(a[l])&&n[t]===a[t]&&s.getAxis(u).containData(n[t])}function markLineFilter(t,n){if(t.type==="cartesian2d"){var a=n[0].coord,s=n[1].coord;if(a&&s&&(ifMarkLineHasOnlyDim(1,a,s,t)||ifMarkLineHasOnlyDim(0,a,s,t)))return!0}return dataFilter(t,n[0])&&dataFilter(t,n[1])}function updateSingleMarkerEndLayout(t,n,a,s,l){var u=s.coordinateSystem,c=t.getItemModel(n),d,Ct=parsePercent(c.get("x"),l.getWidth()),ar=parsePercent(c.get("y"),l.getHeight());if(!isNaN(Ct)&&!isNaN(ar))d=[Ct,ar];else{if(s.getMarkerPosition)d=s.getMarkerPosition(t.getValues(t.dimensions,n));else{var en=u.dimensions,tn=t.get(en[0],n),on=t.get(en[1],n);d=u.dataToPoint([tn,on])}if(isCoordinateSystemType(u,"cartesian2d")){var fn=u.getAxis("x"),dn=u.getAxis("y"),en=u.dimensions;isInfinity$1(t.get(en[0],n))?d[0]=fn.toGlobalCoord(fn.getExtent()[a?0:1]):isInfinity$1(t.get(en[1],n))&&(d[1]=dn.toGlobalCoord(dn.getExtent()[a?0:1]))}isNaN(Ct)||(d[0]=Ct),isNaN(ar)||(d[1]=ar)}t.setItemLayout(n,d)}var MarkLineView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markLine");if(c){var d=c.getData(),Ct=inner$3(c).from,ar=inner$3(c).to;Ct.each(function(en){updateSingleMarkerEndLayout(Ct,en,!0,u,l),updateSingleMarkerEndLayout(ar,en,!1,u,l)}),d.each(function(en){d.setItemLayout(en,[Ct.getItemLayout(en),ar.getItemLayout(en)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,d=a.id,Ct=a.getData(),ar=this.markerGroupMap,en=ar.get(d)||ar.set(d,new LineDraw);this.group.add(en.group);var tn=createList$1(c,a,s),on=tn.from,fn=tn.to,dn=tn.line;inner$3(s).from=on,inner$3(s).to=fn,s.setData(dn);var Cn=s.get("symbol"),Rn=s.get("symbolSize"),ax=s.get("symbolRotate"),ox=s.get("symbolOffset");isArray$1(Cn)||(Cn=[Cn,Cn]),isArray$1(Rn)||(Rn=[Rn,Rn]),isArray$1(ax)||(ax=[ax,ax]),isArray$1(ox)||(ox=[ox,ox]),tn.from.each(function(lx){sx(on,lx,!0),sx(fn,lx,!1)}),dn.each(function(lx){var cx=dn.getItemModel(lx).getModel("lineStyle").getLineStyle();dn.setItemLayout(lx,[on.getItemLayout(lx),fn.getItemLayout(lx)]),cx.stroke==null&&(cx.stroke=on.getItemVisual(lx,"style").fill),dn.setItemVisual(lx,{fromSymbolKeepAspect:on.getItemVisual(lx,"symbolKeepAspect"),fromSymbolOffset:on.getItemVisual(lx,"symbolOffset"),fromSymbolRotate:on.getItemVisual(lx,"symbolRotate"),fromSymbolSize:on.getItemVisual(lx,"symbolSize"),fromSymbol:on.getItemVisual(lx,"symbol"),toSymbolKeepAspect:fn.getItemVisual(lx,"symbolKeepAspect"),toSymbolOffset:fn.getItemVisual(lx,"symbolOffset"),toSymbolRotate:fn.getItemVisual(lx,"symbolRotate"),toSymbolSize:fn.getItemVisual(lx,"symbolSize"),toSymbol:fn.getItemVisual(lx,"symbol"),style:cx})}),en.updateData(dn),tn.line.eachItemGraphicEl(function(lx){getECData(lx).dataModel=s,lx.traverse(function(cx){getECData(cx).dataModel=s})});function sx(lx,cx,fx){var gx=lx.getItemModel(cx);updateSingleMarkerEndLayout(lx,cx,fx,a,u);var mx=gx.getModel("itemStyle").getItemStyle();mx.fill==null&&(mx.fill=getVisualFromData(Ct,"color")),lx.setItemVisual(cx,{symbolKeepAspect:gx.get("symbolKeepAspect"),symbolOffset:retrieve2(gx.get("symbolOffset",!0),ox[fx?0:1]),symbolRotate:retrieve2(gx.get("symbolRotate",!0),ax[fx?0:1]),symbolSize:retrieve2(gx.get("symbolSize"),Rn[fx?0:1]),symbol:retrieve2(gx.get("symbol",!0),Cn[fx?0:1]),style:mx})}this.markKeep(en),en.group.silent=s.get("silent")||a.get("silent")},n.type="markLine",n})(MarkerView);function createList$1(t,n,a){var s;t?s=map$1(t&&t.dimensions,function(ar){var en=n.getData().getDimensionInfo(n.getData().mapDimension(ar))||{};return extend(extend({},en),{name:ar,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,a),u=new SeriesData(s,a),c=new SeriesData([],a),d=map$1(a.get("data"),curry$1(markLineTransform,n,t,a));t&&(d=filter(d,curry$1(markLineFilter,t)));var Ct=createMarkerDimValueGetter(!!t,s);return l.initData(map$1(d,function(ar){return ar[0]}),null,Ct),u.initData(map$1(d,function(ar){return ar[1]}),null,Ct),c.initData(map$1(d,function(ar){return ar[2]})),c.hasItemOption=!0,{from:l,to:u,line:c}}function install$d(t){t.registerComponentModel(MarkLineModel),t.registerComponentView(MarkLineView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markLine")&&(n.markLine=n.markLine||{})})}var MarkAreaModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n})(MarkerModel),inner$2=makeInner(),markAreaTransform=function(t,n,a,s){var l=s[0],u=s[1];if(!(!l||!u)){var c=dataTransform(t,l),d=dataTransform(t,u),Ct=c.coord,ar=d.coord;Ct[0]=retrieve(Ct[0],-1/0),Ct[1]=retrieve(Ct[1],-1/0),ar[0]=retrieve(ar[0],1/0),ar[1]=retrieve(ar[1],1/0);var en=mergeAll([{},c,d]);return en.coord=[c.coord,d.coord],en.x0=c.x,en.y0=c.y,en.x1=d.x,en.y1=d.y,en}};function isInfinity(t){return!isNaN(t)&&!isFinite(t)}function ifMarkAreaHasOnlyDim(t,n,a,s){var l=1-t;return isInfinity(n[l])&&isInfinity(a[l])}function markAreaFilter(t,n){var a=n.coord[0],s=n.coord[1],l={coord:a,x:n.x0,y:n.y0},u={coord:s,x:n.x1,y:n.y1};return isCoordinateSystemType(t,"cartesian2d")?a&&s&&(ifMarkAreaHasOnlyDim(1,a,s)||ifMarkAreaHasOnlyDim(0,a,s))?!0:zoneFilter(t,l,u):dataFilter(t,l)||dataFilter(t,u)}function getSingleMarkerEndPoint(t,n,a,s,l){var u=s.coordinateSystem,c=t.getItemModel(n),d,Ct=parsePercent(c.get(a[0]),l.getWidth()),ar=parsePercent(c.get(a[1]),l.getHeight());if(!isNaN(Ct)&&!isNaN(ar))d=[Ct,ar];else{if(s.getMarkerPosition){var en=t.getValues(["x0","y0"],n),tn=t.getValues(["x1","y1"],n),on=u.clampData(en),fn=u.clampData(tn),dn=[];a[0]==="x0"?dn[0]=on[0]>fn[0]?tn[0]:en[0]:dn[0]=on[0]>fn[0]?en[0]:tn[0],a[1]==="y0"?dn[1]=on[1]>fn[1]?tn[1]:en[1]:dn[1]=on[1]>fn[1]?en[1]:tn[1],d=s.getMarkerPosition(dn,a,!0)}else{var Cn=t.get(a[0],n),Rn=t.get(a[1],n),ax=[Cn,Rn];u.clampData&&u.clampData(ax,ax),d=u.dataToPoint(ax,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var ox=u.getAxis("x"),sx=u.getAxis("y"),Cn=t.get(a[0],n),Rn=t.get(a[1],n);isInfinity(Cn)?d[0]=ox.toGlobalCoord(ox.getExtent()[a[0]==="x0"?0:1]):isInfinity(Rn)&&(d[1]=sx.toGlobalCoord(sx.getExtent()[a[1]==="y0"?0:1]))}isNaN(Ct)||(d[0]=Ct),isNaN(ar)||(d[1]=ar)}return d}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markArea");if(c){var d=c.getData();d.each(function(Ct){var ar=map$1(dimPermutations,function(tn){return getSingleMarkerEndPoint(d,Ct,tn,u,l)});d.setItemLayout(Ct,ar);var en=d.getItemGraphicEl(Ct);en.setShape("points",ar)})}},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,d=a.id,Ct=a.getData(),ar=this.markerGroupMap,en=ar.get(d)||ar.set(d,{group:new Group$3});this.group.add(en.group),this.markKeep(en);var tn=createList(c,a,s);s.setData(tn),tn.each(function(on){var fn=map$1(dimPermutations,function(mx){return getSingleMarkerEndPoint(tn,on,mx,a,u)}),dn=c.getAxis("x").scale,Cn=c.getAxis("y").scale,Rn=dn.getExtent(),ax=Cn.getExtent(),ox=[dn.parse(tn.get("x0",on)),dn.parse(tn.get("x1",on))],sx=[Cn.parse(tn.get("y0",on)),Cn.parse(tn.get("y1",on))];asc$2(ox),asc$2(sx);var lx=!(Rn[0]>ox[1]||Rn[1]<ox[0]||ax[0]>sx[1]||ax[1]<sx[0]),cx=!lx;tn.setItemLayout(on,{points:fn,allClipped:cx});var fx=tn.getItemModel(on).getModel("itemStyle").getItemStyle(),gx=getVisualFromData(Ct,"color");fx.fill||(fx.fill=gx,isString$1(fx.fill)&&(fx.fill=modifyAlpha(fx.fill,.4))),fx.stroke||(fx.stroke=gx),tn.setItemVisual(on,"style",fx)}),tn.diff(inner$2(en).data).add(function(on){var fn=tn.getItemLayout(on);if(!fn.allClipped){var dn=new Polygon({shape:{points:fn.points}});tn.setItemGraphicEl(on,dn),en.group.add(dn)}}).update(function(on,fn){var dn=inner$2(en).data.getItemGraphicEl(fn),Cn=tn.getItemLayout(on);Cn.allClipped?dn&&en.group.remove(dn):(dn?updateProps$1(dn,{shape:{points:Cn.points}},s,on):dn=new Polygon({shape:{points:Cn.points}}),tn.setItemGraphicEl(on,dn),en.group.add(dn))}).remove(function(on){var fn=inner$2(en).data.getItemGraphicEl(on);en.group.remove(fn)}).execute(),tn.eachItemGraphicEl(function(on,fn){var dn=tn.getItemModel(fn),Cn=tn.getItemVisual(fn,"style");on.useStyle(tn.getItemVisual(fn,"style")),setLabelStyle(on,getLabelStatesModels(dn),{labelFetcher:s,labelDataIndex:fn,defaultText:tn.getName(fn)||"",inheritColor:isString$1(Cn.fill)?modifyAlpha(Cn.fill,1):"#000"}),setStatesStylesFromModel(on,dn),toggleHoverEmphasis(on,null,null,dn.get(["emphasis","disabled"])),getECData(on).dataModel=s}),inner$2(en).data=tn,en.group.silent=s.get("silent")||a.get("silent")},n.type="markArea",n})(MarkerView);function createList(t,n,a){var s,l,u=["x0","y0","x1","y1"];if(t){var c=map$1(t&&t.dimensions,function(ar){var en=n.getData(),tn=en.getDimensionInfo(en.mapDimension(ar))||{};return extend(extend({},tn),{name:ar,ordinalMeta:null})});l=map$1(u,function(ar,en){return{name:ar,type:c[en%2].type}}),s=new SeriesData(l,a)}else l=[{name:"value",type:"float"}],s=new SeriesData(l,a);var d=map$1(a.get("data"),curry$1(markAreaTransform,n,t,a));t&&(d=filter(d,curry$1(markAreaFilter,t)));var Ct=t?function(ar,en,tn,on){var fn=ar.coord[Math.floor(on/2)][on%2];return parseDataValue(fn,l[on])}:function(ar,en,tn,on){return parseDataValue(ar.value,l[on])};return s.initData(d,null,Ct),s.hasItemOption=!0,s}function install$c(t){t.registerComponentModel(MarkAreaModel),t.registerComponentView(MarkAreaView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markArea")&&(n.markArea=n.markArea||{})})}var getDefaultSelectorOptions=function(t,n){if(n==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(n==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),a.selected=a.selected||{},this._updateSelector(a)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),this._updateSelector(a)},n.prototype._updateSelector=function(a){var s=a.selector,l=this.ecModel;s===!0&&(s=a.selector=["all","inverse"]),isArray$1(s)&&each$f(s,function(u,c){isString$1(u)&&(u={type:u}),s[c]=merge(u,getDefaultSelectorOptions(l,u.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get("selectedMode")==="single"){for(var s=!1,l=0;l<a.length;l++){var u=a[l].get("name");if(this.isSelected(u)){this.select(u),s=!0;break}}!s&&this.select(a[0].get("name"))}},n.prototype._updateData=function(a){var s=[],l=[];a.eachRawSeries(function(Ct){var ar=Ct.name;l.push(ar);var en;if(Ct.legendVisualProvider){var tn=Ct.legendVisualProvider,on=tn.getAllNames();a.isSeriesFiltered(Ct)||(l=l.concat(on)),on.length?s=s.concat(on):en=!0}else en=!0;en&&isNameSpecified(Ct)&&s.push(Ct.name)}),this._availableNames=l;var u=this.get("data")||s,c=createHashMap(),d=map$1(u,function(Ct){return(isString$1(Ct)||isNumber(Ct))&&(Ct={name:Ct}),c.get(Ct.name)?null:(c.set(Ct.name,!0),new Model(Ct,this,this.ecModel))},this);this._data=filter(d,function(Ct){return!!Ct})},n.prototype.getData=function(){return this._data},n.prototype.select=function(a){var s=this.option.selected,l=this.get("selectedMode");if(l==="single"){var u=this._data;each$f(u,function(c){s[c.get("name")]=!1})}s[a]=!0},n.prototype.unSelect=function(a){this.get("selectedMode")!=="single"&&(this.option.selected[a]=!1)},n.prototype.toggleSelected=function(a){var s=this.option.selected;s.hasOwnProperty(a)||(s[a]=!0),this[s[a]?"unSelect":"select"](a)},n.prototype.allSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(l){s[l.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(l){var u=l.get("name",!0);s.hasOwnProperty(u)||(s[u]=!0),s[u]=!s[u]})},n.prototype.isSelected=function(a){var s=this.option.selected;return!(s.hasOwnProperty(a)&&!s[a])&&indexOf(this._availableNames,a)>=0},n.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n})(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!1,a}return n.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(a,s,l){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var c=a.get("align"),d=a.get("orient");(!c||c==="auto")&&(c=a.get("left")==="right"&&d==="vertical"?"right":"left");var Ct=a.get("selector",!0),ar=a.get("selectorPosition",!0);Ct&&(!ar||ar==="auto")&&(ar=d==="horizontal"?"end":"start"),this.renderInner(c,a,s,l,Ct,d,ar);var en=a.getBoxLayoutParams(),tn={width:l.getWidth(),height:l.getHeight()},on=a.get("padding"),fn=getLayoutRect(en,tn,on),dn=this.layoutInner(a,c,fn,u,Ct,ar),Cn=getLayoutRect(defaults({width:dn.width,height:dn.height},en),tn,on);this.group.x=Cn.x-dn.x,this.group.y=Cn.y-dn.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(dn,a))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(a,s,l,u,c,d,Ct){var ar=this.getContentGroup(),en=createHashMap(),tn=s.get("selectedMode"),on=[];l.eachRawSeries(function(fn){!fn.get("legendHoverLink")&&on.push(fn.id)}),each$3(s.getData(),function(fn,dn){var Cn=fn.get("name");if(!this.newlineDisabled&&(Cn===""||Cn===`
`)){var Rn=new Group$1;Rn.newline=!0,ar.add(Rn);return}var ax=l.getSeriesByName(Cn)[0];if(!en.get(Cn))if(ax){var ox=ax.getData(),sx=ox.getVisual("legendLineStyle")||{},lx=ox.getVisual("legendIcon"),cx=ox.getVisual("style"),fx=this._createItem(ax,Cn,dn,fn,s,a,sx,cx,lx,tn,u);fx.on("click",curry(dispatchSelectAction,Cn,null,u,on)).on("mouseover",curry(dispatchHighlightAction,ax.name,null,u,on)).on("mouseout",curry(dispatchDownplayAction,ax.name,null,u,on)),l.ssr&&fx.eachChild(function(gx){var mx=getECData(gx);mx.seriesIndex=ax.seriesIndex,mx.dataIndex=dn,mx.ssrType="legend"}),en.set(Cn,!0)}else l.eachRawSeries(function(gx){if(!en.get(Cn)&&gx.legendVisualProvider){var mx=gx.legendVisualProvider;if(!mx.containName(Cn))return;var px=mx.indexOfName(Cn),hx=mx.getItemVisual(px,"style"),vx=mx.getItemVisual(px,"legendIcon"),yx=parse(hx.fill);yx&&yx[3]===0&&(yx[3]=.2,hx=extend(extend({},hx),{fill:stringify(yx,"rgba")}));var Sx=this._createItem(gx,Cn,dn,fn,s,a,{},hx,vx,tn,u);Sx.on("click",curry(dispatchSelectAction,null,Cn,u,on)).on("mouseover",curry(dispatchHighlightAction,null,Cn,u,on)).on("mouseout",curry(dispatchDownplayAction,null,Cn,u,on)),l.ssr&&Sx.eachChild(function(_x){var Ex=getECData(_x);Ex.seriesIndex=gx.seriesIndex,Ex.dataIndex=dn,Ex.ssrType="legend"}),en.set(Cn,!0)}},this)},this),c&&this._createSelector(c,s,u,d,Ct)},n.prototype._createSelector=function(a,s,l,u,c){var d=this.getSelectorGroup();each$3(a,function(ar){var en=ar.type,tn=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:en==="all"?"legendAllSelect":"legendInverseSelect",legendId:s.id})}});d.add(tn);var on=s.getModel("selectorLabel"),fn=s.getModel(["emphasis","selectorLabel"]);setLabelStyle(tn,{normal:on,emphasis:fn},{defaultText:ar.title}),enableHoverEmphasis(tn)})},n.prototype._createItem=function(a,s,l,u,c,d,Ct,ar,en,tn,on){var fn=a.visualDrawType,dn=c.get("itemWidth"),Cn=c.get("itemHeight"),Rn=c.isSelected(s),ax=u.get("symbolRotate"),ox=u.get("symbolKeepAspect"),sx=u.get("icon");en=sx||en||"roundRect";var lx=getLegendStyle(en,u,Ct,ar,fn,Rn,on),cx=new Group$1,fx=u.getModel("textStyle");if(isFunction$1(a.getLegendIcon)&&(!sx||sx==="inherit"))cx.add(a.getLegendIcon({itemWidth:dn,itemHeight:Cn,icon:en,iconRotate:ax,itemStyle:lx.itemStyle,lineStyle:lx.lineStyle,symbolKeepAspect:ox}));else{var gx=sx==="inherit"&&a.getData().getVisual("symbol")?ax==="inherit"?a.getData().getVisual("symbolRotate"):ax:0;cx.add(getDefaultLegendIcon({itemWidth:dn,itemHeight:Cn,icon:en,iconRotate:gx,itemStyle:lx.itemStyle,symbolKeepAspect:ox}))}var mx=d==="left"?dn+5:-5,px=d,hx=c.get("formatter"),vx=s;isString$1(hx)&&hx?vx=hx.replace("{name}",s??""):isFunction$1(hx)&&(vx=hx(s));var yx=Rn?fx.getTextColor():u.get("inactiveColor");cx.add(new ZRText({style:createTextStyle$1(fx,{text:vx,x:mx,y:Cn/2,fill:yx,align:px,verticalAlign:"middle"},{inheritColor:yx})}));var Sx=new Rect$2({shape:cx.getBoundingRect(),style:{fill:"transparent"}}),_x=u.getModel("tooltip");return _x.get("show")&&setTooltipConfig({el:Sx,componentModel:c,itemName:s,itemTooltipOption:_x.option}),cx.add(Sx),cx.eachChild(function(Ex){Ex.silent=!0}),Sx.silent=!tn,this.getContentGroup().add(cx),enableHoverEmphasis(cx),cx.__legendDataIndex=l,cx},n.prototype.layoutInner=function(a,s,l,u,c,d){var Ct=this.getContentGroup(),ar=this.getSelectorGroup();box(a.get("orient"),Ct,a.get("itemGap"),l.width,l.height);var en=Ct.getBoundingRect(),tn=[-en.x,-en.y];if(ar.markRedraw(),Ct.markRedraw(),c){box("horizontal",ar,a.get("selectorItemGap",!0));var on=ar.getBoundingRect(),fn=[-on.x,-on.y],dn=a.get("selectorButtonGap",!0),Cn=a.getOrient().index,Rn=Cn===0?"width":"height",ax=Cn===0?"height":"width",ox=Cn===0?"y":"x";d==="end"?fn[Cn]+=en[Rn]+dn:tn[Cn]+=on[Rn]+dn,fn[1-Cn]+=en[ax]/2-on[ax]/2,ar.x=fn[0],ar.y=fn[1],Ct.x=tn[0],Ct.y=tn[1];var sx={x:0,y:0};return sx[Rn]=en[Rn]+dn+on[Rn],sx[ax]=Math.max(en[ax],on[ax]),sx[ox]=Math.min(0,on[ox]+fn[1-Cn]),sx}else return Ct.x=tn[0],Ct.y=tn[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n})(ComponentView);function getLegendStyle(t,n,a,s,l,u,c){function d(Rn,ax){Rn.lineWidth==="auto"&&(Rn.lineWidth=ax.lineWidth>0?2:0),each$3(Rn,function(ox,sx){Rn[sx]==="inherit"&&(Rn[sx]=ax[sx])})}var Ct=n.getModel("itemStyle"),ar=Ct.getItemStyle(),en=t.lastIndexOf("empty",0)===0?"fill":"stroke",tn=Ct.getShallow("decal");ar.decal=!tn||tn==="inherit"?s.decal:createOrUpdatePatternFromDecal(tn,c),ar.fill==="inherit"&&(ar.fill=s[l]),ar.stroke==="inherit"&&(ar.stroke=s[en]),ar.opacity==="inherit"&&(ar.opacity=(l==="fill"?s:a).opacity),d(ar,s);var on=n.getModel("lineStyle"),fn=on.getLineStyle();if(d(fn,a),ar.fill==="auto"&&(ar.fill=s.fill),ar.stroke==="auto"&&(ar.stroke=s.fill),fn.stroke==="auto"&&(fn.stroke=s.fill),!u){var dn=n.get("inactiveBorderWidth"),Cn=ar[en];ar.lineWidth=dn==="auto"?s.lineWidth>0&&Cn?2:0:ar.lineWidth,ar.fill=n.get("inactiveColor"),ar.stroke=n.get("inactiveBorderColor"),fn.stroke=on.get("inactiveColor"),fn.lineWidth=on.get("inactiveWidth")}return{itemStyle:ar,lineStyle:fn}}function getDefaultLegendIcon(t){var n=t.icon||"roundRect",a=createSymbol$1(n,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return a.setStyle(t.itemStyle),a.rotation=(t.iconRotate||0)*Math.PI/180,a.setOrigin([t.itemWidth/2,t.itemHeight/2]),n.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}function dispatchSelectAction(t,n,a,s){dispatchDownplayAction(t,n,a,s),a.dispatchAction({type:"legendToggleSelect",name:t??n}),dispatchHighlightAction(t,n,a,s)}function isUseHoverLayer(t){for(var n=t.getZr().storage.getDisplayList(),a,s=0,l=n.length;s<l&&!(a=n[s].states.emphasis);)s++;return a&&a.hoverLayer}function dispatchHighlightAction(t,n,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"highlight",seriesName:t,name:n,excludeSeriesId:s})}function dispatchDownplayAction(t,n,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"downplay",seriesName:t,name:n,excludeSeriesId:s})}function legendFilter(t){var n=t.findComponents({mainType:"legend"});n&&n.length&&t.filterSeries(function(a){for(var s=0;s<n.length;s++)if(!n[s].isSelected(a.name))return!1;return!0})}function legendSelectActionHandler(t,n,a){var s=t==="allSelect"||t==="inverseSelect",l={},u=[];a.eachComponent({mainType:"legend",query:n},function(d){s?d[t]():d[t](n.name),makeSelectedMap(d,l),u.push(d.componentIndex)});var c={};return a.eachComponent("legend",function(d){each$f(l,function(Ct,ar){d[Ct?"select":"unSelect"](ar)}),makeSelectedMap(d,c)}),s?{selected:c,legendIndex:u}:{name:n.name,selected:c}}function makeSelectedMap(t,n){var a=n||{};return each$f(t.getData(),function(s){var l=s.get("name");if(!(l===`
`||l==="")){var u=t.isSelected(l);hasOwn(a,l)?a[l]=a[l]&&u:a[l]=u}}),a}function installLegendAction(t){t.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),t.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),t.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(t){t.registerComponentModel(LegendModel),t.registerComponentView(LegendView),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),t.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(t)}var ScrollableLegendModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},n.prototype.init=function(a,s,l){var u=getLayoutParams(a);t.prototype.init.call(this,a,s,l),mergeAndNormalizeLayoutParams(this,a,u)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),mergeAndNormalizeLayoutParams(this,this.option,a)},n.type="legend.scroll",n.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n})(LegendModel);function mergeAndNormalizeLayoutParams(t,n,a){var s=t.getOrient(),l=[1,1];l[s.index]=0,mergeLayoutParam(n,a,{type:"box",ignoreSize:!!l})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!0,a._currentIndex=0,a}return n.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},n.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(a,s,l,u,c,d,Ct){var ar=this;t.prototype.renderInner.call(this,a,s,l,u,c,d,Ct);var en=this._controllerGroup,tn=s.get("pageIconSize",!0),on=isArray$1(tn)?tn:[tn,tn];dn("pagePrev",0);var fn=s.getModel("pageTextStyle");en.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:fn.getTextColor(),font:fn.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),dn("pageNext",1);function dn(Cn,Rn){var ax=Cn+"DataIndex",ox=createIcon(s.get("pageIcons",!0)[s.getOrient().name][Rn],{onclick:bind$1(ar._pageGo,ar,ax,s,u)},{x:-on[0]/2,y:-on[1]/2,width:on[0],height:on[1]});ox.name=Cn,en.add(ox)}},n.prototype.layoutInner=function(a,s,l,u,c,d){var Ct=this.getSelectorGroup(),ar=a.getOrient().index,en=WH[ar],tn=XY[ar],on=WH[1-ar],fn=XY[1-ar];c&&box("horizontal",Ct,a.get("selectorItemGap",!0));var dn=a.get("selectorButtonGap",!0),Cn=Ct.getBoundingRect(),Rn=[-Cn.x,-Cn.y],ax=clone$4(l);c&&(ax[en]=l[en]-Cn[en]-dn);var ox=this._layoutContentAndController(a,u,ax,ar,en,on,fn,tn);if(c){if(d==="end")Rn[ar]+=ox[en]+dn;else{var sx=Cn[en]+dn;Rn[ar]-=sx,ox[tn]-=sx}ox[en]+=Cn[en]+dn,Rn[1-ar]+=ox[fn]+ox[on]/2-Cn[on]/2,ox[on]=Math.max(ox[on],Cn[on]),ox[fn]=Math.min(ox[fn],Cn[fn]+Rn[1-ar]),Ct.x=Rn[0],Ct.y=Rn[1],Ct.markRedraw()}return ox},n.prototype._layoutContentAndController=function(a,s,l,u,c,d,Ct,ar){var en=this.getContentGroup(),tn=this._containerGroup,on=this._controllerGroup;box(a.get("orient"),en,a.get("itemGap"),u?l.width:null,u?null:l.height),box("horizontal",on,a.get("pageButtonItemGap",!0));var fn=en.getBoundingRect(),dn=on.getBoundingRect(),Cn=this._showController=fn[c]>l[c],Rn=[-fn.x,-fn.y];s||(Rn[u]=en[ar]);var ax=[0,0],ox=[-dn.x,-dn.y],sx=retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));if(Cn){var lx=a.get("pageButtonPosition",!0);lx==="end"?ox[u]+=l[c]-dn[c]:ax[u]+=dn[c]+sx}ox[1-u]+=fn[d]/2-dn[d]/2,en.setPosition(Rn),tn.setPosition(ax),on.setPosition(ox);var cx={x:0,y:0};if(cx[c]=Cn?l[c]:fn[c],cx[d]=Math.max(fn[d],dn[d]),cx[Ct]=Math.min(0,dn[Ct]+ox[1-u]),tn.__rectSize=l[c],Cn){var fx={x:0,y:0};fx[c]=Math.max(l[c]-dn[c]-sx,0),fx[d]=cx[d],tn.setClipPath(new Rect$2({shape:fx})),tn.__rectSize=fx[c]}else on.eachChild(function(mx){mx.attr({invisible:!0,silent:!0})});var gx=this._getPageInfo(a);return gx.pageIndex!=null&&updateProps$1(en,{x:gx.contentPosition[0],y:gx.contentPosition[1]},Cn?a:null),this._updatePageInfoView(a,gx),cx},n.prototype._pageGo=function(a,s,l){var u=this._getPageInfo(s)[a];u!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:s.id})},n.prototype._updatePageInfoView=function(a,s){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(en){var tn=en+"DataIndex",on=s[tn]!=null,fn=l.childOfName(en);fn&&(fn.setStyle("fill",on?a.get("pageIconColor",!0):a.get("pageIconInactiveColor",!0)),fn.cursor=on?"pointer":"default")});var u=l.childOfName("pageText"),c=a.get("pageFormatter"),d=s.pageIndex,Ct=d!=null?d+1:0,ar=s.pageCount;u&&c&&u.setStyle("text",isString$1(c)?c.replace("{current}",Ct==null?"":Ct+"").replace("{total}",ar==null?"":ar+""):c({current:Ct,total:ar}))},n.prototype._getPageInfo=function(a){var s=a.get("scrollDataIndex",!0),l=this.getContentGroup(),u=this._containerGroup.__rectSize,c=a.getOrient().index,d=WH[c],Ct=XY[c],ar=this._findTargetItemIndex(s),en=l.children(),tn=en[ar],on=en.length,fn=on?1:0,dn={contentPosition:[l.x,l.y],pageCount:fn,pageIndex:fn-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!tn)return dn;var Cn=lx(tn);dn.contentPosition[c]=-Cn.s;for(var Rn=ar+1,ax=Cn,ox=Cn,sx=null;Rn<=on;++Rn)sx=lx(en[Rn]),(!sx&&ox.e>ax.s+u||sx&&!cx(sx,ax.s))&&(ox.i>ax.i?ax=ox:ax=sx,ax&&(dn.pageNextDataIndex==null&&(dn.pageNextDataIndex=ax.i),++dn.pageCount)),ox=sx;for(var Rn=ar-1,ax=Cn,ox=Cn,sx=null;Rn>=-1;--Rn)sx=lx(en[Rn]),(!sx||!cx(ox,sx.s))&&ax.i<ox.i&&(ox=ax,dn.pagePrevDataIndex==null&&(dn.pagePrevDataIndex=ax.i),++dn.pageCount,++dn.pageIndex),ax=sx;return dn;function lx(fx){if(fx){var gx=fx.getBoundingRect(),mx=gx[Ct]+fx[Ct];return{s:mx,e:mx+gx[d],i:fx.__legendDataIndex}}}function cx(fx,gx){return fx.e>=gx&&fx.s<=gx+u}},n.prototype._findTargetItemIndex=function(a){if(!this._showController)return 0;var s,l=this.getContentGroup(),u;return l.eachChild(function(c,d){var Ct=c.__legendDataIndex;u==null&&Ct!=null&&(u=d),Ct===a&&(s=d)}),s??u},n.type="legend.scroll",n})(LegendView);function installScrollableLegendAction(t){t.registerAction("legendScroll","legendscroll",function(n,a){var s=n.scrollDataIndex;s!=null&&a.eachComponent({mainType:"legend",subType:"scroll",query:n},function(l){l.setScrollDataIndex(s)})})}function install$a(t){use(install$b),t.registerComponentModel(ScrollableLegendModel),t.registerComponentView(ScrollableLegendView),installScrollableLegendAction(t)}function install$9(t){use(install$b),use(install$a)}var InsideZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.inside",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n})(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(t,n,a){inner$1(t).coordSysRecordMap.each(function(s){var l=s.dataZoomInfoMap.get(n.uid);l&&(l.getRange=a)})}function disposeCoordSysRecordIfNeeded(t,n){for(var a=inner$1(t).coordSysRecordMap,s=a.keys(),l=0;l<s.length;l++){var u=s[l],c=a.get(u),d=c.dataZoomInfoMap;if(d){var Ct=n.uid,ar=d.get(Ct);ar&&(d.removeKey(Ct),d.keys().length||disposeCoordSysRecord(a,c))}}}function disposeCoordSysRecord(t,n){if(n){t.removeKey(n.model.uid);var a=n.controller;a&&a.dispose()}}function createCoordSysRecord(t,n){var a={model:n,containsPoint:curry$1(containsPoint,n),dispatchAction:curry$1(dispatchAction,t),dataZoomInfoMap:null,controller:null},s=a.controller=new RoamController(t.getZr());return each$f(["pan","zoom","scrollMove"],function(l){s.on(l,function(u){var c=[];a.dataZoomInfoMap.each(function(d){if(u.isAvailableBehavior(d.model.option)){var Ct=(d.getRange||{})[l],ar=Ct&&Ct(d.dzReferCoordSysInfo,a.model.mainType,a.controller,u);!d.model.get("disabled",!0)&&ar&&c.push({dataZoomId:d.model.id,start:ar[0],end:ar[1]})}}),c.length&&a.dispatchAction(c)})}),a}function dispatchAction(t,n){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function containsPoint(t,n,a,s){return t.coordinateSystem.containPoint([a,s])}function mergeControllerParams(t){var n,a="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return t.each(function(u){var c=u.model,d=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;s[a+d]>s[a+n]&&(n=d),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(n,a){var s=inner$1(a),l=s.coordSysRecordMap||(s.coordSysRecordMap=createHashMap());l.each(function(u){u.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var c=collectReferCoordSysModelInfo(u);each$f(c.infoList,function(d){var Ct=d.model.uid,ar=l.get(Ct)||l.set(Ct,createCoordSysRecord(a,d.model)),en=ar.dataZoomInfoMap||(ar.dataZoomInfoMap=createHashMap());en.set(u.uid,{dzReferCoordSysInfo:d,model:u,getRange:null})})}),l.each(function(u){var c=u.controller,d,Ct=u.dataZoomInfoMap;if(Ct){var ar=Ct.keys()[0];ar!=null&&(d=Ct.get(ar))}if(!d){disposeCoordSysRecord(l,u);return}var en=mergeControllerParams(Ct);c.enable(en.controlType,en.opt),c.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",d.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return n.prototype.render=function(a,s,l){if(t.prototype.render.apply(this,arguments),a.noTarget()){this._clear();return}this.range=a.getPercentRange(),setViewInfoToCoordSysRecord(l,a,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n})(DataZoomView),getRangeHandlers={zoom:function(t,n,a,s){var l=this.range,u=l.slice(),c=t.axisModels[0];if(c){var d=getDirectionInfo[n](null,[s.originX,s.originY],c,a,t),Ct=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(u[1]-u[0])+u[0],ar=Math.max(1/s.scale,0);u[0]=(u[0]-Ct)*ar+Ct,u[1]=(u[1]-Ct)*ar+Ct;var en=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,en.minSpan,en.maxSpan),this.range=u,l[0]!==u[0]||l[1]!==u[1])return u}},pan:makeMover(function(t,n,a,s,l,u){var c=getDirectionInfo[s]([u.oldX,u.oldY],[u.newX,u.newY],n,l,a);return c.signal*(t[1]-t[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(t,n,a,s,l,u){var c=getDirectionInfo[s]([0,0],[u.scrollDelta,u.scrollDelta],n,l,a);return c.signal*(t[1]-t[0])*u.scrollDelta})};function makeMover(t){return function(n,a,s,l){var u=this.range,c=u.slice(),d=n.axisModels[0];if(d){var Ct=t(c,d,n,a,s,l);if(sliderMove(Ct,c,[0,100],"all"),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}}}var getDirectionInfo={grid:function(t,n,a,s,l){var u=a.axis,c={},d=l.model.coordinateSystem.getRect();return t=t||[0,0],u.dim==="x"?(c.pixel=n[0]-t[0],c.pixelLength=d.width,c.pixelStart=d.x,c.signal=u.inverse?1:-1):(c.pixel=n[1]-t[1],c.pixelLength=d.height,c.pixelStart=d.y,c.signal=u.inverse?-1:1),c},polar:function(t,n,a,s,l){var u=a.axis,c={},d=l.model.coordinateSystem,Ct=d.getRadiusAxis().getExtent(),ar=d.getAngleAxis().getExtent();return t=t?d.pointToCoord(t):[0,0],n=d.pointToCoord(n),a.mainType==="radiusAxis"?(c.pixel=n[0]-t[0],c.pixelLength=Ct[1]-Ct[0],c.pixelStart=Ct[0],c.signal=u.inverse?1:-1):(c.pixel=n[1]-t[1],c.pixelLength=ar[1]-ar[0],c.pixelStart=ar[0],c.signal=u.inverse?-1:1),c},singleAxis:function(t,n,a,s,l){var u=a.axis,c=l.model.coordinateSystem.getRect(),d={};return t=t||[0,0],u.orient==="horizontal"?(d.pixel=n[0]-t[0],d.pixelLength=c.width,d.pixelStart=c.x,d.signal=u.inverse?1:-1):(d.pixel=n[1]-t[1],d.pixelLength=c.height,d.pixelStart=c.y,d.signal=u.inverse?-1:1),d}};function install$8(t){installCommon$1(t),t.registerComponentModel(InsideZoomModel),t.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(t)}var SliderZoomModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n})(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._displayables={},a}return n.prototype.init=function(a,s){this.api=s,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},n.prototype.render=function(a,s,l,u){if(t.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),a.get("show")===!1){this.group.removeAll();return}if(a.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var s=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(s),this._positionGroup()},n.prototype._resetLocation=function(){var a=this.dataZoomModel,s=this.api,l=a.get("brushSelect"),u=l?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),d={width:s.getWidth(),height:s.getHeight()},Ct=this._orient===HORIZONTAL?{right:d.width-c.x-c.width,top:d.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},ar=getLayoutParams(a.option);each$f(["right","top","width","height"],function(tn){ar[tn]==="ph"&&(ar[tn]=Ct[tn])});var en=getLayoutRect(ar,d);this._location={x:en.x,y:en.y},this._size=[en.width,en.height],this._orient===VERTICAL&&this._size.reverse()},n.prototype._positionGroup=function(){var a=this.group,s=this._location,l=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),c=u&&u.get("inverse"),d=this._displayables.sliderGroup,Ct=(this._dataShadowInfo||{}).otherAxisInverse;d.attr(l===HORIZONTAL&&!c?{scaleY:Ct?1:-1,scaleX:1}:l===HORIZONTAL&&c?{scaleY:Ct?1:-1,scaleX:-1}:l===VERTICAL&&!c?{scaleY:Ct?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:Ct?-1:1,scaleX:-1,rotation:Math.PI/2});var ar=a.getBoundingRect([d]);a.x=s.x-ar.x,a.y=s.y-ar.y,a.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var a=this.dataZoomModel,s=this._size,l=this._displayables.sliderGroup,u=a.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),d=this.api.getZr();u?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",d.on("mousemove",this._onBrush),d.on("mouseup",this._onBrushEnd)):(d.off("mousemove",this._onBrush),d.off("mouseup",this._onBrushEnd)),l.add(c)},n.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!a)return;var s=this._size,l=this._shadowSize||[],u=a.series,c=u.getRawData(),d=u.getShadowDim&&u.getShadowDim(),Ct=d&&c.getDimensionInfo(d)?u.getShadowDim():a.otherDim;if(Ct==null)return;var ar=this._shadowPolygonPts,en=this._shadowPolylinePts;if(c!==this._shadowData||Ct!==this._shadowDim||s[0]!==l[0]||s[1]!==l[1]){var tn=c.getDataExtent(Ct),on=(tn[1]-tn[0])*.3;tn=[tn[0]-on,tn[1]+on];var fn=[0,s[1]],dn=[0,s[0]],Cn=[[s[0],0],[0,0]],Rn=[],ax=dn[1]/(c.count()-1),ox=0,sx=Math.round(c.count()/s[0]),lx;c.each([Ct],function(px,hx){if(sx>0&&hx%sx){ox+=ax;return}var vx=px==null||isNaN(px)||px==="",yx=vx?0:linearMap$2(px,tn,fn,!0);vx&&!lx&&hx?(Cn.push([Cn[Cn.length-1][0],0]),Rn.push([Rn[Rn.length-1][0],0])):!vx&&lx&&(Cn.push([ox,0]),Rn.push([ox,0])),Cn.push([ox,yx]),Rn.push([ox,yx]),ox+=ax,lx=vx}),ar=this._shadowPolygonPts=Cn,en=this._shadowPolylinePts=Rn}this._shadowData=c,this._shadowDim=Ct,this._shadowSize=[s[0],s[1]];var cx=this.dataZoomModel;function fx(px){var hx=cx.getModel(px?"selectedDataBackground":"dataBackground"),vx=new Group$3,yx=new Polygon({shape:{points:ar},segmentIgnoreThreshold:1,style:hx.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),Sx=new Polyline$1({shape:{points:en},segmentIgnoreThreshold:1,style:hx.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return vx.add(yx),vx.add(Sx),vx}for(var gx=0;gx<3;gx++){var mx=fx(gx===1);this._displayables.sliderGroup.add(mx),this._displayables.dataShadowSegs.push(mx)}},n.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,s=a.get("showDataShadow");if(s!==!1){var l,u=this.ecModel;return a.eachTargetAxis(function(c,d){var Ct=a.getAxisProxy(c,d).getTargetSeriesModels();each$f(Ct,function(ar){if(!l&&!(s!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,ar.get("type"))<0)){var en=u.getComponent(getAxisMainType(c),d).axis,tn=getOtherDim(c),on,fn=ar.coordinateSystem;tn!=null&&fn.getOtherAxis&&(on=fn.getOtherAxis(en).inverse),tn=ar.getData().mapDimension(tn),l={thisAxis:en,series:ar,thisDim:c,otherDim:tn,otherAxisInverse:on}}},this)},this),l}},n.prototype._renderHandle=function(){var a=this.group,s=this._displayables,l=s.handles=[null,null],u=s.handleLabels=[null,null],c=this._displayables.sliderGroup,d=this._size,Ct=this.dataZoomModel,ar=this.api,en=Ct.get("borderRadius")||0,tn=Ct.get("brushSelect"),on=s.filler=new Rect({silent:tn,style:{fill:Ct.get("fillerColor")},textConfig:{position:"inside"}});c.add(on),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:d[0],height:d[1],r:en},style:{stroke:Ct.get("dataBackgroundColor")||Ct.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(sx){var lx=Ct.get("handleIcon");!symbolBuildProxies[lx]&&lx.indexOf("path://")<0&&lx.indexOf("image://")<0&&(lx="path://"+lx);var cx=createSymbol$1(lx,-1,0,2,2,null,!0);cx.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,sx),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var fx=cx.getBoundingRect(),gx=Ct.get("handleSize");this._handleHeight=parsePercent(gx,this._size[1]),this._handleWidth=fx.width/fx.height*this._handleHeight,cx.setStyle(Ct.getModel("handleStyle").getItemStyle()),cx.style.strokeNoScale=!0,cx.rectHover=!0,cx.ensureState("emphasis").style=Ct.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(cx);var mx=Ct.get("handleColor");mx!=null&&(cx.style.fill=mx),c.add(l[sx]=cx);var px=Ct.getModel("textStyle"),hx=Ct.get("handleLabel")||{},vx=hx.show||!1;a.add(u[sx]=new ZRText({silent:!0,invisible:!vx,style:createTextStyle$1(px,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:px.getTextColor(),font:px.getFont()}),z2:10}))},this);var fn=on;if(tn){var dn=parsePercent(Ct.get("moveHandleSize"),d[1]),Cn=s.moveHandle=new Rect$2({style:Ct.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:d[1]-.5,height:dn}}),Rn=dn*.8,ax=s.moveHandleIcon=createSymbol$1(Ct.get("moveHandleIcon"),-Rn/2,-Rn/2,Rn,Rn,"#fff",!0);ax.silent=!0,ax.y=d[1]+dn/2-.5,Cn.ensureState("emphasis").style=Ct.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var ox=Math.min(d[1]/2,Math.max(dn,10));fn=s.moveZone=new Rect$2({invisible:!0,shape:{y:d[1]-ox,height:dn+ox}}),fn.on("mouseover",function(){ar.enterEmphasis(Cn)}).on("mouseout",function(){ar.leaveEmphasis(Cn)}),c.add(Cn),c.add(ax),c.add(fn)}fn.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),s=this._getViewExtent();this._handleEnds=[linearMap$2(a[0],[0,100],s,!0),linearMap$2(a[1],[0,100],s,!0)]},n.prototype._updateInterval=function(a,s){var l=this.dataZoomModel,u=this._handleEnds,c=this._getViewExtent(),d=l.findRepresentativeAxisProxy().getMinMaxSpan(),Ct=[0,100];sliderMove(s,u,c,l.get("zoomLock")?"all":a,d.minSpan!=null?linearMap$2(d.minSpan,Ct,c,!0):null,d.maxSpan!=null?linearMap$2(d.maxSpan,Ct,c,!0):null);var ar=this._range,en=this._range=asc$2([linearMap$2(u[0],c,Ct,!0),linearMap$2(u[1],c,Ct,!0)]);return!ar||ar[0]!==en[0]||ar[1]!==en[1]},n.prototype._updateView=function(a){var s=this._displayables,l=this._handleEnds,u=asc$2(l.slice()),c=this._size;each$f([0,1],function(fn){var dn=s.handles[fn],Cn=this._handleHeight;dn.attr({scaleX:Cn/2,scaleY:Cn/2,x:l[fn]+(fn?-1:1),y:c[1]/2-Cn/2})},this),s.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:c[1]});var d={x:u[0],width:u[1]-u[0]};s.moveHandle&&(s.moveHandle.setShape(d),s.moveZone.setShape(d),s.moveZone.getBoundingRect(),s.moveHandleIcon&&s.moveHandleIcon.attr("x",d.x+d.width/2));for(var Ct=s.dataShadowSegs,ar=[0,u[0],u[1],c[0]],en=0;en<Ct.length;en++){var tn=Ct[en],on=tn.getClipPath();on||(on=new Rect$2,tn.setClipPath(on)),on.setShape({x:ar[en],y:0,width:ar[en+1]-ar[en],height:c[1]})}this._updateDataInfo(a)},n.prototype._updateDataInfo=function(a){var s=this.dataZoomModel,l=this._displayables,u=l.handleLabels,c=this._orient,d=["",""];if(s.get("showDetail")){var Ct=s.findRepresentativeAxisProxy();if(Ct){var ar=Ct.getAxisModel().axis,en=this._range,tn=a?Ct.calculateDataWindow({start:en[0],end:en[1]}).valueWindow:Ct.getDataValueWindow();d=[this._formatLabel(tn[0],ar),this._formatLabel(tn[1],ar)]}}var on=asc$2(this._handleEnds.slice());fn.call(this,0),fn.call(this,1);function fn(dn){var Cn=getTransform$1(l.handles[dn].parent,this.group),Rn=transformDirection(dn===0?"right":"left",Cn),ax=this._handleWidth/2+LABEL_GAP,ox=applyTransform([on[dn]+(dn===0?-ax:ax),this._size[1]/2],Cn);u[dn].setStyle({x:ox[0],y:ox[1],verticalAlign:c===HORIZONTAL?"middle":Rn,align:c===HORIZONTAL?Rn:"center",text:d[dn]})}},n.prototype._formatLabel=function(a,s){var l=this.dataZoomModel,u=l.get("labelFormatter"),c=l.get("labelPrecision");(c==null||c==="auto")&&(c=s.getPixelPrecision());var d=a==null||isNaN(a)?"":s.type==="category"||s.type==="time"?s.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(c,20));return isFunction$1(u)?u(a,d):isString$1(u)?u.replace("{value}",d):d},n.prototype._showDataInfo=function(a){var s=this.dataZoomModel.get("handleLabel")||{},l=s.show||!1,u=this.dataZoomModel.getModel(["emphasis","handleLabel"]),c=u.get("show")||!1,d=a||this._dragging?c:l,Ct=this._displayables,ar=Ct.handleLabels;ar[0].attr("invisible",!d),ar[1].attr("invisible",!d),Ct.moveHandle&&this.api[d?"enterEmphasis":"leaveEmphasis"](Ct.moveHandle,1)},n.prototype._onDragMove=function(a,s,l,u){this._dragging=!0,stop(u.event);var c=this._displayables.sliderGroup.getLocalTransform(),d=applyTransform([s,l],c,!0),Ct=this._updateInterval(a,d[0]),ar=this.dataZoomModel.get("realtime");this._updateView(!ar),Ct&&ar&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var a=this.dataZoomModel.get("realtime");!a&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(a){var s=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(l[0]<0||l[0]>s[0]||l[1]<0||l[1]>s[1])){var u=this._handleEnds,c=(u[0]+u[1])/2,d=this._updateInterval("all",l[0]-c);this._updateView(),d&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(a){var s=a.offsetX,l=a.offsetY;this._brushStart=new Point(s,l),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(a){if(this._brushing){var s=this._displayables.brushRect;if(this._brushing=!1,!!s){s.attr("ignore",!0);var l=s.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(l.width)<5)){var c=this._getViewExtent(),d=[0,100];this._range=asc$2([linearMap$2(l.x,c,d,!0),linearMap$2(l.x+l.width,c,d,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(a){this._brushing&&(stop(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},n.prototype._updateBrushRect=function(a,s){var l=this._displayables,u=this.dataZoomModel,c=l.brushRect;c||(c=l.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(c)),c.attr("ignore",!1);var d=this._brushStart,Ct=this._displayables.sliderGroup,ar=Ct.transformCoordToLocal(a,s),en=Ct.transformCoordToLocal(d.x,d.y),tn=this._size;ar[0]=Math.max(Math.min(tn[0],ar[0]),0),c.setShape({x:en[0],y:0,width:ar[0]-en[0],height:tn[1]})},n.prototype._dispatchZoomAction=function(a){var s=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?REALTIME_ANIMATION_CONFIG:null,start:s[0],end:s[1]})},n.prototype._findCoordRect=function(){var a,s=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!a&&s.length){var l=s[0].model.coordinateSystem;a=l.getRect&&l.getRect()}if(!a){var u=this.api.getWidth(),c=this.api.getHeight();a={x:u*.2,y:c*.2,width:u*.6,height:c*.6}}return a},n.type="dataZoom.slider",n})(DataZoomView);function getOtherDim(t){var n={x:"y",y:"x",radius:"angle",angle:"radius"};return n[t]}function getCursor$1(t){return t==="vertical"?"ns-resize":"ew-resize"}function install$7(t){t.registerComponentModel(SliderZoomModel),t.registerComponentView(SliderZoomView),installCommon$1(t)}function install$6(t){use(install$8),use(install$7)}var visualDefault={get:function(t,n,a){var s=clone$4((defaultOption[t]||{})[n]);return a&&isArray$1(s)?s[s.length-1]:s}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l)},n.prototype.optionUpdated=function(a,s){var l=this.option;!s&&replaceVisualOption(l,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(a){var s=this.stateList;a=bind$1(a,this),this.controllerVisuals=createVisualMappings(this.option.controller,s,a),this.targetVisuals=createVisualMappings(this.option.target,s,a)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,s=[];return a==null||a==="all"?this.ecModel.eachSeries(function(l,u){s.push(u)}):s=normalizeToArray(a),s},n.prototype.eachTargetSeries=function(a,s){each$f(this.getTargetSeriesIndices(),function(l){var u=this.ecModel.getSeriesByIndex(l);u&&a.call(s,u)},this)},n.prototype.isTargetSeries=function(a){var s=!1;return this.eachTargetSeries(function(l){l===a&&(s=!0)}),s},n.prototype.formatValueText=function(a,s,l){var u=this.option,c=u.precision,d=this.dataBound,Ct=u.formatter,ar;l=l||["<",">"],isArray$1(a)&&(a=a.slice(),ar=!0);var en=s?a:ar?[tn(a[0]),tn(a[1])]:tn(a);if(isString$1(Ct))return Ct.replace("{value}",ar?en[0]:en).replace("{value2}",ar?en[1]:en);if(isFunction$1(Ct))return ar?Ct(a[0],a[1]):Ct(a);if(ar)return a[0]===d[0]?l[0]+" "+en[1]:a[1]===d[1]?l[1]+" "+en[0]:en[0]+" - "+en[1];return en;function tn(on){return on===d[0]?"min":on===d[1]?"max":(+on).toFixed(Math.min(c,20))}},n.prototype.resetExtent=function(){var a=this.option,s=asc([a.min,a.max]);this._dataExtent=s},n.prototype.getDataDimensionIndex=function(a){var s=this.option.dimension;if(s!=null)return a.getDimensionIndex(s);for(var l=a.dimensions,u=l.length-1;u>=0;u--){var c=l[u],d=a.getDimensionInfo(c);if(!d.isCalculationCoord)return d.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var a=this.ecModel,s=this.option,l={inRange:s.inRange,outOfRange:s.outOfRange},u=s.target||(s.target={}),c=s.controller||(s.controller={});merge(u,l),merge(c,l);var d=this.isCategory();Ct.call(this,u),Ct.call(this,c),ar.call(this,u,"inRange","outOfRange"),en.call(this,c);function Ct(tn){isArray(s.color)&&!tn.inRange&&(tn.inRange={color:s.color.slice().reverse()}),tn.inRange=tn.inRange||{color:a.get("gradientColor")}}function ar(tn,on,fn){var dn=tn[on],Cn=tn[fn];dn&&!Cn&&(Cn=tn[fn]={},each$2(dn,function(Rn,ax){if(VisualMapping.isValidType(ax)){var ox=visualDefault.get(ax,"inactive",d);ox!=null&&(Cn[ax]=ox,ax==="color"&&!Cn.hasOwnProperty("opacity")&&!Cn.hasOwnProperty("colorAlpha")&&(Cn.opacity=[0,0]))}}))}function en(tn){var on=(tn.inRange||{}).symbol||(tn.outOfRange||{}).symbol,fn=(tn.inRange||{}).symbolSize||(tn.outOfRange||{}).symbolSize,dn=this.get("inactiveColor"),Cn=this.getItemSymbol(),Rn=Cn||"roundRect";each$2(this.stateList,function(ax){var ox=this.itemSize,sx=tn[ax];sx||(sx=tn[ax]={color:d?dn:[dn]}),sx.symbol==null&&(sx.symbol=on&&clone$4(on)||(d?Rn:[Rn])),sx.symbolSize==null&&(sx.symbolSize=fn&&clone$4(fn)||(d?ox[0]:[ox[0],ox[0]])),sx.symbol=mapVisual(sx.symbol,function(fx){return fx==="none"?Rn:fx});var lx=sx.symbolSize;if(lx!=null){var cx=-1/0;eachVisual(lx,function(fx){fx>cx&&(cx=fx)}),sx.symbolSize=mapVisual(lx,function(fx){return linearMap$1(fx,[0,cx],[0,ox[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(a){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(a){return null},n.prototype.getVisualMeta=function(a){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n})(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(a,s){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=DEFAULT_BAR_BOUND[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var a=this.getExtent(),s=this.option.range;!s||s.auto?(a.auto=1,this.option.range=a):isArray$1(s)&&(s[0]>s[1]&&s.reverse(),s[0]=Math.max(s[0],a[0]),s[1]=Math.min(s[1],a[1]))},n.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(a){var s=this.option.controller[a].symbolSize;s&&s[0]!==s[1]&&(s[0]=s[1]/3)},this)},n.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},n.prototype.getSelected=function(){var a=this.getExtent(),s=asc$2((this.get("range")||[]).slice());return s[0]>a[1]&&(s[0]=a[1]),s[1]>a[1]&&(s[1]=a[1]),s[0]<a[0]&&(s[0]=a[0]),s[1]<a[0]&&(s[1]=a[0]),s},n.prototype.getValueState=function(a){var s=this.option.range,l=this.getExtent();return(s[0]<=l[0]||s[0]<=a)&&(s[1]>=l[1]||a<=s[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var s=[];return this.eachTargetSeries(function(l){var u=[],c=l.getData();c.each(this.getDataDimensionIndex(c),function(d,Ct){a[0]<=d&&d<=a[1]&&u.push(Ct)},this),s.push({seriesId:l.id,dataIndex:u})},this),s},n.prototype.getVisualMeta=function(a){var s=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function c(fn,dn){u.push({value:fn,color:a(fn,dn)})}for(var d=0,Ct=0,ar=l.length,en=s.length;Ct<en&&(!l.length||s[Ct]<=l[0]);Ct++)s[Ct]<l[d]&&c(s[Ct],"outOfRange");for(var tn=1;d<ar;d++,tn=0)tn&&u.length&&c(l[d],"outOfRange"),c(l[d],"inRange");for(var tn=1;Ct<en;Ct++)(!l.length||l[l.length-1]<s[Ct])&&(tn&&(u.length&&c(u[u.length-1].value,"outOfRange"),tn=0),c(s[Ct],"outOfRange"));var on=u.length;return{stops:u,outerColors:[on?u[0].color:"transparent",on?u[on-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n})(VisualMapModel);function getColorStopValues(t,n,a){if(a[0]===a[1])return a.slice();for(var s=200,l=(a[1]-a[0])/s,u=a[0],c=[],d=0;d<=s&&u<a[1];d++)c.push(u),u+=l;return c.push(a[1]),c}var VisualMapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return n.prototype.init=function(a,s){this.ecModel=a,this.api=s},n.prototype.render=function(a,s,l,u){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,s,l,u)},n.prototype.renderBackground=function(a){var s=this.visualMapModel,l=normalizeCssArray(s.get("padding")||0),u=a.getBoundingRect();a.add(new Rect$2({z2:-1,silent:!0,shape:{x:u.x-l[3],y:u.y-l[0],width:u.width+l[3]+l[1],height:u.height+l[0]+l[2]},style:{fill:s.get("backgroundColor"),stroke:s.get("borderColor"),lineWidth:s.get("borderWidth")}}))},n.prototype.getControllerVisual=function(a,s,l){l=l||{};var u=l.forceState,c=this.visualMapModel,d={};if(s==="color"){var Ct=c.get("contentColor");d.color=Ct}function ar(fn){return d[fn]}function en(fn,dn){d[fn]=dn}var tn=c.controllerVisuals[u||c.getValueState(a)],on=VisualMapping.prepareVisualTypes(tn);return each$f(on,function(fn){var dn=tn[fn];l.convertOpacityToAlpha&&fn==="opacity"&&(fn="colorAlpha",dn=tn.__alphaForOpacity),VisualMapping.dependsOn(fn,s)&&dn&&dn.applyVisual(a,ar,en)}),d[s]},n.prototype.positionGroup=function(a){var s=this.visualMapModel,l=this.api;positionElement(a,s.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},n.prototype.doRender=function(a,s,l,u){},n.type="visualMap",n})(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(t,n,a){var s=t.option,l=s.align;if(l!=null&&l!=="auto")return l;for(var u={width:n.getWidth(),height:n.getHeight()},c=s.orient==="horizontal"?1:0,d=paramsSet[c],Ct=[0,null,10],ar={},en=0;en<3;en++)ar[paramsSet[1-c][en]]=Ct[en],ar[d[en]]=en===2?a[0]:s[d[en]];var tn=[["x","width",3],["y","height",0]][c],on=getLayoutRect(ar,u,s.padding);return d[(on.margin[tn[2]]||0)+on[tn[0]]+on[tn[1]]*.5<u[tn[1]]*.5?0:1]}function makeHighDownBatch(t,n){return each$f(t||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(n?n.componentIndex:"")}),t}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return n.prototype.init=function(a,s){t.prototype.init.call(this,a,s),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(a,s,l,u){(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,s=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(s);var l=a.get("text");this._renderEndsText(s,l,0),this._renderEndsText(s,l,1),this._updateView(!0),this.renderBackground(s),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(s)},n.prototype._renderEndsText=function(a,s,l){if(s){var u=s[1-l];u=u!=null?u+"":"";var c=this.visualMapModel,d=c.get("textGap"),Ct=c.itemSize,ar=this._shapes.mainGroup,en=this._applyTransform([Ct[0]/2,l===0?-d:Ct[1]+d],ar),tn=this._applyTransform(l===0?"bottom":"top",ar),on=this._orient,fn=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(fn,{x:en[0],y:en[1],verticalAlign:on==="horizontal"?"middle":tn,align:on==="horizontal"?tn:"center",text:u})}))}},n.prototype._renderBar=function(a){var s=this.visualMapModel,l=this._shapes,u=s.itemSize,c=this._orient,d=this._useHandle,Ct=getItemAlign(s,this.api,u),ar=l.mainGroup=this._createBarGroup(Ct),en=new Group$3;ar.add(en),en.add(l.outOfRange=createPolygon()),en.add(l.inRange=createPolygon(null,d?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),en.setClipPath(new Rect$2({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var tn=s.textStyleModel.getTextRect(""),on=mathMax(tn.width,tn.height);d&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(s,ar,0,u,on,c),this._createHandle(s,ar,1,u,on,c)),this._createIndicator(s,ar,u,on,c),a.add(ar)},n.prototype._createHandle=function(a,s,l,u,c,d){var Ct=bind$1(this._dragHandle,this,l,!1),ar=bind$1(this._dragHandle,this,l,!0),en=parsePercent$1(a.get("handleSize"),u[0]),tn=createSymbol$1(a.get("handleIcon"),-en/2,-en/2,en,en,null,!0),on=getCursor(this._orient);tn.attr({cursor:on,draggable:!0,drift:Ct,ondragend:ar,onmousemove:function(ax){stop(ax.event)}}),tn.x=u[0]/2,tn.useStyle(a.getModel("handleStyle").getItemStyle()),tn.setStyle({strokeNoScale:!0,strokeFirst:!0}),tn.style.lineWidth*=2,tn.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(tn,!0),s.add(tn);var fn=this.visualMapModel.textStyleModel,dn=new ZRText({cursor:on,draggable:!0,drift:Ct,onmousemove:function(ax){stop(ax.event)},ondragend:ar,style:createTextStyle$1(fn,{x:0,y:0,text:""})});dn.ensureState("blur").style={opacity:.1},dn.stateTransition={duration:200},this.group.add(dn);var Cn=[en,0],Rn=this._shapes;Rn.handleThumbs[l]=tn,Rn.handleLabelPoints[l]=Cn,Rn.handleLabels[l]=dn},n.prototype._createIndicator=function(a,s,l,u,c){var d=parsePercent$1(a.get("indicatorSize"),l[0]),Ct=createSymbol$1(a.get("indicatorIcon"),-d/2,-d/2,d,d,null,!0);Ct.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var ar=a.getModel("indicatorStyle").getItemStyle();if(Ct instanceof ZRImage){var en=Ct.style;Ct.useStyle(extend({image:en.image,x:en.x,y:en.y,width:en.width,height:en.height},ar))}else Ct.useStyle(ar);s.add(Ct);var tn=this.visualMapModel.textStyleModel,on=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(tn,{x:0,y:0,text:""})});this.group.add(on);var fn=[(c==="horizontal"?u/2:HOVER_LINK_OUT)+l[0]/2,0],dn=this._shapes;dn.indicator=Ct,dn.indicatorLabel=on,dn.indicatorLabelPoint=fn,this._firstShowIndicator=!0},n.prototype._dragHandle=function(a,s,l,u){if(this._useHandle){if(this._dragging=!s,!s){var c=this._applyTransform([l,u],this._shapes.mainGroup,!0);this._updateInterval(a,c[1]),this._hideIndicator(),this._updateView()}s===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),s?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},n.prototype._resetInterval=function(){var a=this.visualMapModel,s=this._dataInterval=a.getSelected(),l=a.getExtent(),u=[0,a.itemSize[1]];this._handleEnds=[linearMap(s[0],l,u,!0),linearMap(s[1],l,u,!0)]},n.prototype._updateInterval=function(a,s){s=s||0;var l=this.visualMapModel,u=this._handleEnds,c=[0,l.itemSize[1]];sliderMove(s,u,c,a,0);var d=l.getExtent();this._dataInterval=[linearMap(u[0],c,d,!0),linearMap(u[1],c,d,!0)]},n.prototype._updateView=function(a){var s=this.visualMapModel,l=s.getExtent(),u=this._shapes,c=[0,s.itemSize[1]],d=a?c:this._handleEnds,Ct=this._createBarVisual(this._dataInterval,l,d,"inRange"),ar=this._createBarVisual(l,l,c,"outOfRange");u.inRange.setStyle({fill:Ct.barColor}).setShape("points",Ct.barPoints),u.outOfRange.setStyle({fill:ar.barColor}).setShape("points",ar.barPoints),this._updateHandle(d,Ct)},n.prototype._createBarVisual=function(a,s,l,u){var c={forceState:u,convertOpacityToAlpha:!0},d=this._makeColorGradient(a,c),Ct=[this.getControllerVisual(a[0],"symbolSize",c),this.getControllerVisual(a[1],"symbolSize",c)],ar=this._createBarPoints(l,Ct);return{barColor:new LinearGradient(0,0,0,1,d),barPoints:ar,handlesColor:[d[0].color,d[d.length-1].color]}},n.prototype._makeColorGradient=function(a,s){var l=100,u=[],c=(a[1]-a[0])/l;u.push({color:this.getControllerVisual(a[0],"color",s),offset:0});for(var d=1;d<l;d++){var Ct=a[0]+c*d;if(Ct>a[1])break;u.push({color:this.getControllerVisual(Ct,"color",s),offset:d/l})}return u.push({color:this.getControllerVisual(a[1],"color",s),offset:1}),u},n.prototype._createBarPoints=function(a,s){var l=this.visualMapModel.itemSize;return[[l[0]-s[0],a[0]],[l[0],a[0]],[l[0],a[1]],[l[0]-s[1],a[1]]]},n.prototype._createBarGroup=function(a){var s=this._orient,l=this.visualMapModel.get("inverse");return new Group$3(s==="horizontal"&&!l?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:s==="horizontal"&&l?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:s==="vertical"&&!l?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},n.prototype._updateHandle=function(a,s){if(this._useHandle){var l=this._shapes,u=this.visualMapModel,c=l.handleThumbs,d=l.handleLabels,Ct=u.itemSize,ar=u.getExtent(),en=this._applyTransform("left",l.mainGroup);each$1([0,1],function(tn){var on=c[tn];on.setStyle("fill",s.handlesColor[tn]),on.y=a[tn];var fn=linearMap(a[tn],[0,Ct[1]],ar,!0),dn=this.getControllerVisual(fn,"symbolSize");on.scaleX=on.scaleY=dn/Ct[0],on.x=Ct[0]-dn/2;var Cn=applyTransform(l.handleLabelPoints[tn],getTransform$1(on,this.group));if(this._orient==="horizontal"){var Rn=en==="left"||en==="top"?(Ct[0]-dn)/2:(Ct[0]-dn)/-2;Cn[1]+=Rn}d[tn].setStyle({x:Cn[0],y:Cn[1],text:u.formatValueText(this._dataInterval[tn]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(a,s,l,u){var c=this.visualMapModel,d=c.getExtent(),Ct=c.itemSize,ar=[0,Ct[1]],en=this._shapes,tn=en.indicator;if(tn){tn.attr("invisible",!1);var on={convertOpacityToAlpha:!0},fn=this.getControllerVisual(a,"color",on),dn=this.getControllerVisual(a,"symbolSize"),Cn=linearMap(a,d,ar,!0),Rn=Ct[0]-dn/2,ax={x:tn.x,y:tn.y};tn.y=Cn,tn.x=Rn;var ox=applyTransform(en.indicatorLabelPoint,getTransform$1(tn,this.group)),sx=en.indicatorLabel;sx.attr("invisible",!1);var lx=this._applyTransform("left",en.mainGroup),cx=this._orient,fx=cx==="horizontal";sx.setStyle({text:(l||"")+c.formatValueText(s),verticalAlign:fx?lx:"middle",align:fx?"center":lx});var gx={x:Rn,y:Cn,style:{fill:fn}},mx={style:{x:ox[0],y:ox[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var px={duration:100,easing:"cubicInOut",additive:!0};tn.x=ax.x,tn.y=ax.y,tn.animateTo(gx,px),sx.animateTo(mx,px)}else tn.attr(gx),sx.attr(mx);this._firstShowIndicator=!1;var hx=this._shapes.handleLabels;if(hx)for(var vx=0;vx<hx.length;vx++)this.api.enterBlur(hx[vx])}},n.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(s){if(a._hovering=!0,!a._dragging){var l=a.visualMapModel.itemSize,u=a._applyTransform([s.offsetX,s.offsetY],a._shapes.mainGroup,!0,!0);u[1]=mathMin(mathMax(0,u[1]),l[1]),a._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=l[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(a,s){var l=this.visualMapModel,u=l.itemSize;if(l.option.hoverLink){var c=[0,u[1]],d=l.getExtent();a=mathMin(mathMax(c[0],a),c[1]);var Ct=getHalfHoverLinkSize(l,d,c),ar=[a-Ct,a+Ct],en=linearMap(a,c,d,!0),tn=[linearMap(ar[0],c,d,!0),linearMap(ar[1],c,d,!0)];ar[0]<c[0]&&(tn[0]=-1/0),ar[1]>c[1]&&(tn[1]=1/0),s&&(tn[0]===-1/0?this._showIndicator(en,tn[1],"< ",Ct):tn[1]===1/0?this._showIndicator(en,tn[0],"> ",Ct):this._showIndicator(en,en," ",Ct));var on=this._hoverLinkDataIndices,fn=[];(s||useHoverLinkOnHandle(l))&&(fn=this._hoverLinkDataIndices=l.findTargetDataIndices(tn));var dn=compressBatches(on,fn);this._dispatchHighDown("downplay",makeHighDownBatch(dn[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(dn[1],l))}},n.prototype._hoverLinkFromSeriesMouseOver=function(a){var s;if(findEventDispatcher(a.target,function(Ct){var ar=getECData(Ct);if(ar.dataIndex!=null)return s=ar,!0},!0),!!s){var l=this.ecModel.getSeriesByIndex(s.seriesIndex),u=this.visualMapModel;if(u.isTargetSeries(l)){var c=l.getData(s.dataType),d=c.getStore().get(u.getDataDimensionIndex(c),s.dataIndex);isNaN(d)||this._showIndicator(d,d)}}},n.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var s=this._shapes.handleLabels;if(s)for(var l=0;l<s.length;l++)this.api.leaveBlur(s[l])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(a,this.visualMapModel)),a.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(a,s,l,u){var c=getTransform$1(s,u?null:this.group);return isArray$1(a)?applyTransform(a,c,l):transformDirection(a,c,l)},n.prototype._dispatchHighDown=function(a,s){s&&s.length&&this.api.dispatchAction({type:a,batch:s})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n})(VisualMapView);function createPolygon(t,n,a,s){return new Polygon({shape:{points:t},draggable:!!a,cursor:n,drift:a,onmousemove:function(l){stop(l.event)},ondragend:s})}function getHalfHoverLinkSize(t,n,a){var s=HOVER_LINK_SIZE/2,l=t.get("hoverLinkDataSize");return l&&(s=linearMap(l,n,a,!0)/2),s}function useHoverLinkOnHandle(t){var n=t.get("hoverLinkOnHandle");return!!(n??t.get("realtime"))}function getCursor(t){return t==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(t,n){n.eachComponent({mainType:"visualMap",query:t},function(a){a.setSelected(t.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(t,n){var a=[];return n.eachComponent("visualMap",function(s){var l=t.pipelineContext;!s.isTargetSeries(t)||l&&l.large||a.push(incrementalApplyVisual(s.stateList,s.targetVisuals,bind$1(s.getValueState,s),s.getDataDimensionIndex(t.getData())))}),a}},{createOnAllSeries:!0,reset:function(t,n){var a=t.getData(),s=[];n.eachComponent("visualMap",function(l){if(l.isTargetSeries(t)){var u=l.getVisualMeta(bind$1(getColorVisual,null,t,l))||{stops:[],outerColors:[]},c=l.getDataDimensionIndex(a);c>=0&&(u.dimension=c,s.push(u))}}),t.getData().setVisual("visualMeta",s)}}];function getColorVisual(t,n,a,s){for(var l=n.targetVisuals[s],u=VisualMapping.prepareVisualTypes(l),c={color:getVisualFromData(t.getData(),"color")},d=0,Ct=u.length;d<Ct;d++){var ar=u[d],en=l[ar==="opacity"?"__alphaForOpacity":ar];en&&en.applyVisual(a,tn,on)}return c.color;function tn(fn){return c[fn]}function on(fn,dn){c[fn]=dn}}var each=each$f;function visualMapPreprocessor(t){var n=t&&t.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(a){if(a){has(a,"splitList")&&!has(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var s=a.pieces;s&&isArray$1(s)&&each(s,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(t,n){return t&&t.hasOwnProperty&&t.hasOwnProperty(n)}var installed=!1;function installCommon(t){installed||(installed=!0,t.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),t.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(n){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,n)}),t.registerPreprocessor(visualMapPreprocessor))}function install$5(t){t.registerComponentModel(ContinuousModel),t.registerComponentView(ContinuousView),installCommon(t)}var PiecewiseModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._pieceList=[],a}return n.prototype.optionUpdated=function(a,s){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(a,s);var u=this.option.categories;this.resetVisual(function(c,d){l==="categories"?(c.mappingMethod="category",c.categories=clone$4(u)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(Ct){return Ct=clone$4(Ct),d!=="inRange"&&(Ct.visual=null),Ct}))})},n.prototype.completeVisualOption=function(){var a=this.option,s={},l=VisualMapping.listVisualTypes(),u=this.isCategory();each$f(a.pieces,function(d){each$f(l,function(Ct){d.hasOwnProperty(Ct)&&(s[Ct]=1)})}),each$f(s,function(d,Ct){var ar=!1;each$f(this.stateList,function(en){ar=ar||c(a,en,Ct)||c(a.target,en,Ct)},this),!ar&&each$f(this.stateList,function(en){(a[en]||(a[en]={}))[Ct]=visualDefault.get(Ct,en==="inRange"?"active":"inactive",u)})},this);function c(d,Ct,ar){return d&&d[Ct]&&d[Ct].hasOwnProperty(ar)}t.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(a,s){var l=this.option,u=this._pieceList,c=(s?l:a).selected||{};if(l.selected=c,each$f(u,function(Ct,ar){var en=this.getSelectedMapKey(Ct);c.hasOwnProperty(en)||(c[en]=!0)},this),l.selectedMode==="single"){var d=!1;each$f(u,function(Ct,ar){var en=this.getSelectedMapKey(Ct);c[en]&&(d?c[en]=!1:d=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(a){this.option.selected=clone$4(a)},n.prototype.getValueState=function(a){var s=VisualMapping.findPieceIndex(a,this._pieceList);return s!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[s])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var s=[],l=this._pieceList;return this.eachTargetSeries(function(u){var c=[],d=u.getData();d.each(this.getDataDimensionIndex(d),function(Ct,ar){var en=VisualMapping.findPieceIndex(Ct,l);en===a&&c.push(ar)},this),s.push({seriesId:u.id,dataIndex:c})},this),s},n.prototype.getRepresentValue=function(a){var s;if(this.isCategory())s=a.value;else if(a.value!=null)s=a.value;else{var l=a.interval||[];s=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return s},n.prototype.getVisualMeta=function(a){if(this.isCategory())return;var s=[],l=["",""],u=this;function c(en,tn){var on=u.getRepresentValue({interval:en});tn||(tn=u.getValueState(on));var fn=a(on,tn);en[0]===-1/0?l[0]=fn:en[1]===1/0?l[1]=fn:s.push({value:en[0],color:fn},{value:en[1],color:fn})}var d=this._pieceList.slice();if(!d.length)d.push({interval:[-1/0,1/0]});else{var Ct=d[0].interval[0];Ct!==-1/0&&d.unshift({interval:[-1/0,Ct]}),Ct=d[d.length-1].interval[1],Ct!==1/0&&d.push({interval:[Ct,1/0]})}var ar=-1/0;return each$f(d,function(en){var tn=en.interval;tn&&(tn[0]>ar&&c([ar,tn[0]],"outOfRange"),c(tn.slice()),ar=tn[1])},this),{stops:s,outerColors:l}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n})(VisualMapModel),resetMethods={splitNumber:function(t){var n=this.option,a=Math.min(n.precision,20),s=this.getExtent(),l=n.splitNumber;l=Math.max(parseInt(l,10),1),n.splitNumber=l;for(var u=(s[1]-s[0])/l;+u.toFixed(a)!==u&&a<5;)a++;n.precision=a,u=+u.toFixed(a),n.minOpen&&t.push({interval:[-1/0,s[0]],close:[0,0]});for(var c=0,d=s[0];c<l;d+=u,c++){var Ct=c===l-1?s[1]:d+u;t.push({interval:[d,Ct],close:[1,1]})}n.maxOpen&&t.push({interval:[s[1],1/0],close:[0,0]}),reformIntervals(t),each$f(t,function(ar,en){ar.index=en,ar.text=this.formatValueText(ar.interval)},this)},categories:function(t){var n=this.option;each$f(n.categories,function(a){t.push({text:this.formatValueText(a,!0),value:a})},this),normalizeReverse(n,t)},pieces:function(t){var n=this.option;each$f(n.pieces,function(a,s){isObject$3(a)||(a={value:a});var l={text:"",index:s};if(a.label!=null&&(l.text=a.label),a.hasOwnProperty("value")){var u=l.value=a.value;l.interval=[u,u],l.close=[1,1]}else{for(var c=l.interval=[],d=l.close=[0,0],Ct=[1,0,1],ar=[-1/0,1/0],en=[],tn=0;tn<2;tn++){for(var on=[["gte","gt","min"],["lte","lt","max"]][tn],fn=0;fn<3&&c[tn]==null;fn++)c[tn]=a[on[fn]],d[tn]=Ct[fn],en[tn]=fn===2;c[tn]==null&&(c[tn]=ar[tn])}en[0]&&c[1]===1/0&&(d[0]=0),en[1]&&c[0]===-1/0&&(d[1]=0),c[0]===c[1]&&d[0]&&d[1]&&(l.value=c[0])}l.visual=VisualMapping.retrieveVisuals(a),t.push(l)},this),normalizeReverse(n,t),reformIntervals(t),each$f(t,function(a){var s=a.close,l=[["<",""][s[1]],[">",""][s[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,l)},this)}};function normalizeReverse(t,n){var a=t.inverse;(t.orient==="vertical"?!a:a)&&n.reverse()}var PiecewiseVisualMapView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.doRender=function(){var a=this.group;a.removeAll();var s=this.visualMapModel,l=s.get("textGap"),u=s.textStyleModel,c=u.getFont(),d=u.getTextColor(),Ct=this._getItemAlign(),ar=s.itemSize,en=this._getViewData(),tn=en.endsText,on=retrieve(s.get("showLabel",!0),!tn),fn=!s.get("selectedMode");tn&&this._renderEndsText(a,tn[0],ar,on,Ct),each$f(en.viewPieceList,function(dn){var Cn=dn.piece,Rn=new Group$3;Rn.onclick=bind$1(this._onItemClick,this,Cn),this._enableHoverLink(Rn,dn.indexInModelPieceList);var ax=s.getRepresentValue(Cn);if(this._createItemSymbol(Rn,ax,[0,0,ar[0],ar[1]],fn),on){var ox=this.visualMapModel.getValueState(ax);Rn.add(new ZRText({style:{x:Ct==="right"?-l:ar[0]+l,y:ar[1]/2,text:Cn.text,verticalAlign:"middle",align:Ct,font:c,fill:d,opacity:ox==="outOfRange"?.5:1},silent:fn}))}a.add(Rn)},this),tn&&this._renderEndsText(a,tn[1],ar,on,Ct),box(s.get("orient"),a,s.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},n.prototype._enableHoverLink=function(a,s){var l=this;a.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(c){var d=l.visualMapModel;d.option.hoverLink&&l.api.dispatchAction({type:c,batch:makeHighDownBatch(d.findTargetDataIndices(s),d)})}},n.prototype._getItemAlign=function(){var a=this.visualMapModel,s=a.option;if(s.orient==="vertical")return getItemAlign(a,this.api,a.itemSize);var l=s.align;return(!l||l==="auto")&&(l="left"),l},n.prototype._renderEndsText=function(a,s,l,u,c){if(s){var d=new Group$3,Ct=this.visualMapModel.textStyleModel;d.add(new ZRText({style:createTextStyle$1(Ct,{x:u?c==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:u?c:"center",text:s})})),a.add(d)}},n.prototype._getViewData=function(){var a=this.visualMapModel,s=map$1(a.getPieceList(),function(d,Ct){return{piece:d,indexInModelPieceList:Ct}}),l=a.get("text"),u=a.get("orient"),c=a.get("inverse");return(u==="horizontal"?c:!c)?s.reverse():l&&(l=l.slice().reverse()),{viewPieceList:s,endsText:l}},n.prototype._createItemSymbol=function(a,s,l,u){var c=createSymbol$1(this.getControllerVisual(s,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(s,"color"));c.silent=u,a.add(c)},n.prototype._onItemClick=function(a){var s=this.visualMapModel,l=s.option,u=l.selectedMode;if(u){var c=clone$4(l.selected),d=s.getSelectedMapKey(a);u==="single"||u===!0?(c[d]=!0,each$f(c,function(Ct,ar){c[ar]=ar===d})):c[d]=!c[d],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},n.type="visualMap.piecewise",n})(VisualMapView);function install$4(t){t.registerComponentModel(PiecewiseModel),t.registerComponentView(PiecewiseVisualMapView),installCommon(t)}function install$3(t){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(t,n){var a=t.getModel("aria");if(!a.get("enabled"))return;var s=clone$4(DEFAULT_OPTION);merge(s.label,t.getLocaleModel().get("aria"),!1),merge(a.option,s,!1),l(),u();function l(){var ar=a.getModel("decal"),en=ar.get("show");if(en){var tn=createHashMap();t.eachSeries(function(on){if(!on.isColorBySeries()){var fn=tn.get(on.type);fn||(fn={},tn.set(on.type,fn)),inner(on).scope=fn}}),t.eachRawSeries(function(on){if(t.isSeriesFiltered(on))return;if(isFunction$1(on.enableAriaDecal)){on.enableAriaDecal();return}var fn=on.getData();if(on.isColorBySeries()){var ox=getDecalFromPalette(on.ecModel,on.name,decalPaletteScope,t.getSeriesCount()),sx=fn.getVisual("decal");fn.setVisual("decal",lx(sx,ox))}else{var dn=on.getRawData(),Cn={},Rn=inner(on).scope;fn.each(function(cx){var fx=fn.getRawIndex(cx);Cn[fx]=cx});var ax=dn.count();dn.each(function(cx){var fx=Cn[cx],gx=dn.getName(cx)||cx+"",mx=getDecalFromPalette(on.ecModel,gx,Rn,ax),px=fn.getItemVisual(fx,"decal");fn.setItemVisual(fx,"decal",lx(px,mx))})}function lx(cx,fx){var gx=cx?extend(extend({},fx),cx):fx;return gx.dirty=!0,gx}})}}function u(){var ar=n.getZr().dom;if(ar){var en=t.getLocaleModel().get("aria"),tn=a.getModel("label");if(tn.option=defaults(tn.option,en),!!tn.get("enabled")){if(ar.setAttribute("role","img"),tn.get("description")){ar.setAttribute("aria-label",tn.get("description"));return}var on=t.getSeriesCount(),fn=tn.get(["data","maxCount"])||10,dn=tn.get(["series","maxCount"])||10,Cn=Math.min(on,dn),Rn;if(!(on<1)){var ax=d();if(ax){var ox=tn.get(["general","withTitle"]);Rn=c(ox,{title:ax})}else Rn=tn.get(["general","withoutTitle"]);var sx=[],lx=on>1?tn.get(["series","multiple","prefix"]):tn.get(["series","single","prefix"]);Rn+=c(lx,{seriesCount:on}),t.eachSeries(function(mx,px){if(px<Cn){var hx=void 0,vx=mx.get("name"),yx=vx?"withName":"withoutName";hx=on>1?tn.get(["series","multiple",yx]):tn.get(["series","single",yx]),hx=c(hx,{seriesId:mx.seriesIndex,seriesName:mx.get("name"),seriesType:Ct(mx.subType)});var Sx=mx.getData();if(Sx.count()>fn){var _x=tn.get(["data","partialData"]);hx+=c(_x,{displayCnt:fn})}else hx+=tn.get(["data","allData"]);for(var Ex=tn.get(["data","separator","middle"]),bx=tn.get(["data","separator","end"]),Ax=tn.get(["data","excludeDimensionId"]),Mx=[],Rx=0;Rx<Sx.count();Rx++)if(Rx<fn){var Cx=Sx.getName(Rx),Lx=Ax?filter(Sx.getValues(Rx),function(Ix,Px){return indexOf(Ax,Px)===-1}):Sx.getValues(Rx),qx=tn.get(["data",Cx?"withName":"withoutName"]);Mx.push(c(qx,{name:Cx,value:Lx.join(Ex)}))}hx+=Mx.join(Ex)+bx,sx.push(hx)}});var cx=tn.getModel(["series","multiple","separator"]),fx=cx.get("middle"),gx=cx.get("end");Rn+=sx.join(fx)+gx,ar.setAttribute("aria-label",Rn)}}}}function c(ar,en){if(!isString$1(ar))return ar;var tn=ar;return each$f(en,function(on,fn){tn=tn.replace(new RegExp("\\{\\s*"+fn+"\\s*\\}","g"),on)}),tn}function d(){var ar=t.get("title");return ar&&ar.length&&(ar=ar[0]),ar&&ar.text}function Ct(ar){var en=t.getLocaleModel().get(["series","typeNames"]);return en[ar]||en.chart}}function ariaPreprocessor(t){if(!(!t||!t.aria)){var n=t.aria;n.show!=null&&(n.enabled=n.show),n.label=n.label||{},each$f(["description","general","series","data"],function(a){n[a]!=null&&(n.label[a]=n[a])})}}function install$2(t){t.registerPreprocessor(ariaPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=(function(){function t(n){var a=this._condVal=isString$1(n)?new RegExp(n):isRegExp(n)?n:null;if(a==null){var s="";throwError(s)}}return t.prototype.evaluate=function(n){var a=typeof n;return isString$1(a)?this._condVal.test(n):isNumber(a)?this._condVal.test(n+""):!1},t})(),ConstConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){return this.value},t})(),AndConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(!n[a].evaluate())return!1;return!0},t})(),OrConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(n[a].evaluate())return!0;return!1},t})(),NotConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t})(),RelationalConditionInternal=(function(){function t(){}return t.prototype.evaluate=function(){for(var n=!!this.valueParser,a=this.getValue,s=a(this.valueGetterParam),l=n?this.valueParser(s):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(n?l:s))return!1;return!0},t})();function parseOption(t,n){if(t===!0||t===!1){var a=new ConstConditionInternal;return a.value=t,a}var s="";return isObjectNotArray(t)||throwError(s),t.and?parseAndOrOption("and",t,n):t.or?parseAndOrOption("or",t,n):t.not?parseNotOption(t,n):parseRelationalOption(t,n)}function parseAndOrOption(t,n,a){var s=n[t],l="";isArray$1(s)||throwError(l),s.length||throwError(l);var u=t==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(s,function(c){return parseOption(c,a)}),u.children.length||throwError(l),u}function parseNotOption(t,n){var a=t.not,s="";isObjectNotArray(a)||throwError(s);var l=new NotConditionInternal;return l.child=parseOption(a,n),l.child||throwError(s),l}function parseRelationalOption(t,n){for(var a="",s=n.prepareGetValue(t),l=[],u=keys(t),c=t.parser,d=c?getRawValueParser(c):null,Ct=0;Ct<u.length;Ct++){var ar=u[Ct];if(!(ar==="parser"||n.valueGetterAttrMap.get(ar))){var en=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,ar)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[ar]:ar,tn=t[ar],on=d?d(tn):tn,fn=createFilterComparator(en,on)||en==="reg"&&new RegExpEvaluator(on);fn||throwError(a),l.push(fn)}}l.length||throwError(a);var dn=new RelationalConditionInternal;return dn.valueGetterParam=s,dn.valueParser=d,dn.getValue=n.getValue,dn.subCondList=l,dn}function isObjectNotArray(t){return isObject$3(t)&&!isArrayLike(t)}var ConditionalExpressionParsed=(function(){function t(n,a){this._cond=parseOption(n,a)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t})();function parseConditionalExpression(t,n){return new ConditionalExpressionParsed(t,n)}var filterTransform={type:"echarts:filter",transform:function(t){for(var n=t.upstream,a,s=parseConditionalExpression(t.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(d){var Ct="",ar=d.dimension;hasOwn(d,"dimension")||throwError(Ct);var en=n.getDimensionInfo(ar);return en||throwError(Ct),{dimIdx:en.index}},getValue:function(d){return n.retrieveValueFromItem(a,d.dimIdx)}}),l=[],u=0,c=n.count();u<c;u++)a=n.getRawDataItem(u),s.evaluate()&&l.push(a);return{data:l}}},sortTransform={type:"echarts:sort",transform:function(t){var n=t.upstream,a=t.config,s="",l=normalizeToArray(a);l.length||throwError(s);var u=[];each$f(l,function(en){var tn=en.dimension,on=en.order,fn=en.parser,dn=en.incomparable;if(tn==null&&throwError(s),on!=="asc"&&on!=="desc"&&throwError(s),dn&&dn!=="min"&&dn!=="max"){var Cn="";throwError(Cn)}if(on!=="asc"&&on!=="desc"){var Rn="";throwError(Rn)}var ax=n.getDimensionInfo(tn);ax||throwError(s);var ox=fn?getRawValueParser(fn):null;fn&&!ox&&throwError(s),u.push({dimIdx:ax.index,parser:ox,comparator:new SortOrderComparator(on,dn)})});var c=n.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(s);for(var d=[],Ct=0,ar=n.count();Ct<ar;Ct++)d.push(n.getRawDataItem(Ct));return d.sort(function(en,tn){for(var on=0;on<u.length;on++){var fn=u[on],dn=n.retrieveValueFromItem(en,fn.dimIdx),Cn=n.retrieveValueFromItem(tn,fn.dimIdx);fn.parser&&(dn=fn.parser(dn),Cn=fn.parser(Cn));var Rn=fn.comparator.evaluate(dn,Cn);if(Rn!==0)return Rn}return 0}),{data:d}}};function install$1(t){t.registerTransform(filterTransform),t.registerTransform(sortTransform)}var DatasetModel=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.prototype.init=function(a,s,l){t.prototype.init.call(this,a,s,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),disableTransformOptionMerge(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},n})(ComponentModel),DatasetView=(function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.type="dataset",n})(ComponentView);function install(t){t.registerComponentModel(DatasetModel),t.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(t,n){return Math.abs(t-n)<1e-5}function pathToBezierCurves(t){var n=t.data,a=t.len(),s=[],l,u=0,c=0,d=0,Ct=0;function ar(Sx,_x){l&&l.length>2&&s.push(l),l=[Sx,_x]}function en(Sx,_x,Ex,bx){aroundEqual(Sx,Ex)&&aroundEqual(_x,bx)||l.push(Sx,_x,Ex,bx,Ex,bx)}function tn(Sx,_x,Ex,bx,Ax,Mx){var Rx=Math.abs(_x-Sx),Cx=Math.tan(Rx/4)*4/3,Lx=_x<Sx?-1:1,qx=Math.cos(Sx),Ix=Math.sin(Sx),Px=Math.cos(_x),Nx=Math.sin(_x),Bx=qx*Ax+Ex,$x=Ix*Mx+bx,Vx=Px*Ax+Ex,Gx=Nx*Mx+bx,Zx=Ax*Cx*Lx,jx=Mx*Cx*Lx;l.push(Bx-Zx*Ix,$x+jx*qx,Vx+Zx*Nx,Gx-jx*Px,Vx,Gx)}for(var on,fn,dn,Cn,Rn=0;Rn<a;){var ax=n[Rn++],ox=Rn===1;switch(ox&&(u=n[Rn],c=n[Rn+1],d=u,Ct=c,(ax===CMD.L||ax===CMD.C||ax===CMD.Q)&&(l=[d,Ct])),ax){case CMD.M:u=d=n[Rn++],c=Ct=n[Rn++],ar(d,Ct);break;case CMD.L:on=n[Rn++],fn=n[Rn++],en(u,c,on,fn),u=on,c=fn;break;case CMD.C:l.push(n[Rn++],n[Rn++],n[Rn++],n[Rn++],u=n[Rn++],c=n[Rn++]);break;case CMD.Q:on=n[Rn++],fn=n[Rn++],dn=n[Rn++],Cn=n[Rn++],l.push(u+2/3*(on-u),c+2/3*(fn-c),dn+2/3*(on-dn),Cn+2/3*(fn-Cn),dn,Cn),u=dn,c=Cn;break;case CMD.A:var sx=n[Rn++],lx=n[Rn++],cx=n[Rn++],fx=n[Rn++],gx=n[Rn++],mx=n[Rn++]+gx;Rn+=1;var px=!n[Rn++];on=Math.cos(gx)*cx+sx,fn=Math.sin(gx)*fx+lx,ox?(d=on,Ct=fn,ar(d,Ct)):en(u,c,on,fn),u=Math.cos(mx)*cx+sx,c=Math.sin(mx)*fx+lx;for(var hx=(px?-1:1)*Math.PI/2,vx=gx;px?vx>mx:vx<mx;vx+=hx){var yx=px?Math.max(vx+hx,mx):Math.min(vx+hx,mx);tn(vx,yx,sx,lx,cx,fx)}break;case CMD.R:d=u=n[Rn++],Ct=c=n[Rn++],on=d+n[Rn++],fn=Ct+n[Rn++],ar(on,Ct),en(on,Ct,on,fn),en(on,fn,d,fn),en(d,fn,d,Ct),en(d,Ct,on,Ct);break;case CMD.Z:l&&en(u,c,d,Ct),u=d,c=Ct;break}}return l&&l.length>2&&s.push(l),s}function adpativeBezier(t,n,a,s,l,u,c,d,Ct,ar){if(aroundEqual(t,a)&&aroundEqual(n,s)&&aroundEqual(l,c)&&aroundEqual(u,d)){Ct.push(c,d);return}var en=2/ar,tn=en*en,on=c-t,fn=d-n,dn=Math.sqrt(on*on+fn*fn);on/=dn,fn/=dn;var Cn=a-t,Rn=s-n,ax=l-c,ox=u-d,sx=Cn*Cn+Rn*Rn,lx=ax*ax+ox*ox;if(sx<tn&&lx<tn){Ct.push(c,d);return}var cx=on*Cn+fn*Rn,fx=-on*ax-fn*ox,gx=sx-cx*cx,mx=lx-fx*fx;if(gx<tn&&cx>=0&&mx<tn&&fx>=0){Ct.push(c,d);return}var px=[],hx=[];cubicSubdivide(t,a,l,c,.5,px),cubicSubdivide(n,s,u,d,.5,hx),adpativeBezier(px[0],hx[0],px[1],hx[1],px[2],hx[2],px[3],hx[3],Ct,ar),adpativeBezier(px[4],hx[4],px[5],hx[5],px[6],hx[6],px[7],hx[7],Ct,ar)}function pathToPolygons(t,n){var a=pathToBezierCurves(t),s=[];n=n||1;for(var l=0;l<a.length;l++){var u=a[l],c=[],d=u[0],Ct=u[1];c.push(d,Ct);for(var ar=2;ar<u.length;){var en=u[ar++],tn=u[ar++],on=u[ar++],fn=u[ar++],dn=u[ar++],Cn=u[ar++];adpativeBezier(d,Ct,en,tn,on,fn,dn,Cn,c,n),d=dn,Ct=Cn}s.push(c)}return s}function getDividingGrids(t,n,a){var s=t[n],l=t[1-n],u=Math.abs(s/l),c=Math.ceil(Math.sqrt(u*a)),d=Math.floor(a/c);d===0&&(d=1,c=a);for(var Ct=[],ar=0;ar<c;ar++)Ct.push(d);var en=c*d,tn=a-en;if(tn>0)for(var ar=0;ar<tn;ar++)Ct[ar%c]+=1;return Ct}function divideSector(t,n,a){for(var s=t.r0,l=t.r,u=t.startAngle,c=t.endAngle,d=Math.abs(c-u),Ct=d*l,ar=l-s,en=Ct>Math.abs(ar),tn=getDividingGrids([Ct,ar],en?0:1,n),on=(en?d:ar)/tn.length,fn=0;fn<tn.length;fn++)for(var dn=(en?ar:d)/tn[fn],Cn=0;Cn<tn[fn];Cn++){var Rn={};en?(Rn.startAngle=u+on*fn,Rn.endAngle=u+on*(fn+1),Rn.r0=s+dn*Cn,Rn.r=s+dn*(Cn+1)):(Rn.startAngle=u+dn*Cn,Rn.endAngle=u+dn*(Cn+1),Rn.r0=s+on*fn,Rn.r=s+on*(fn+1)),Rn.clockwise=t.clockwise,Rn.cx=t.cx,Rn.cy=t.cy,a.push(Rn)}}function divideRect(t,n,a){for(var s=t.width,l=t.height,u=s>l,c=getDividingGrids([s,l],u?0:1,n),d=u?"width":"height",Ct=u?"height":"width",ar=u?"x":"y",en=u?"y":"x",tn=t[d]/c.length,on=0;on<c.length;on++)for(var fn=t[Ct]/c[on],dn=0;dn<c[on];dn++){var Cn={};Cn[ar]=on*tn,Cn[en]=dn*fn,Cn[d]=tn,Cn[Ct]=fn,Cn.x+=t.x,Cn.y+=t.y,a.push(Cn)}}function crossProduct2d(t,n,a,s){return t*s-a*n}function lineLineIntersect(t,n,a,s,l,u,c,d){var Ct=a-t,ar=s-n,en=c-l,tn=d-u,on=crossProduct2d(en,tn,Ct,ar);if(Math.abs(on)<1e-6)return null;var fn=t-l,dn=n-u,Cn=crossProduct2d(fn,dn,en,tn)/on;return Cn<0||Cn>1?null:new Point(Cn*Ct+t,Cn*ar+n)}function projPtOnLine(t,n,a){var s=new Point;Point.sub(s,a,n),s.normalize();var l=new Point;Point.sub(l,t,n);var u=l.dot(s);return u}function addToPoly(t,n){var a=t[t.length-1];a&&a[0]===n[0]&&a[1]===n[1]||t.push(n)}function splitPolygonByLine(t,n,a){for(var s=t.length,l=[],u=0;u<s;u++){var c=t[u],d=t[(u+1)%s],Ct=lineLineIntersect(c[0],c[1],d[0],d[1],n.x,n.y,a.x,a.y);Ct&&l.push({projPt:projPtOnLine(Ct,n,a),pt:Ct,idx:u})}if(l.length<2)return[{points:t},{points:t}];l.sort(function(Rn,ax){return Rn.projPt-ax.projPt});var ar=l[0],en=l[l.length-1];if(en.idx<ar.idx){var tn=ar;ar=en,en=tn}for(var on=[ar.pt.x,ar.pt.y],fn=[en.pt.x,en.pt.y],dn=[on],Cn=[fn],u=ar.idx+1;u<=en.idx;u++)addToPoly(dn,t[u].slice());addToPoly(dn,fn),addToPoly(dn,on);for(var u=en.idx+1;u<=ar.idx+s;u++)addToPoly(Cn,t[u%s].slice());return addToPoly(Cn,on),addToPoly(Cn,fn),[{points:dn},{points:Cn}]}function binaryDividePolygon(t){var n=t.points,a=[],s=[];fromPoints(n,a,s);var l=new BoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),u=l.width,c=l.height,d=l.x,Ct=l.y,ar=new Point,en=new Point;return u>c?(ar.x=en.x=d+u/2,ar.y=Ct,en.y=Ct+c):(ar.y=en.y=Ct+c/2,ar.x=d,en.x=d+u),splitPolygonByLine(n,ar,en)}function binaryDivideRecursive(t,n,a,s){if(a===1)s.push(n);else{var l=Math.floor(a/2),u=t(n);binaryDivideRecursive(t,u[0],l,s),binaryDivideRecursive(t,u[1],a-l,s)}return s}function clone(t,n){for(var a=[],s=0;s<n;s++)a.push(clonePath(t));return a}function copyPathProps(t,n){n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel}function polygonConvert(t){for(var n=[],a=0;a<t.length;)n.push([t[a++],t[a++]]);return n}function split(t,n){var a=[],s=t.shape,l;switch(t.type){case"rect":divideRect(s,n,a),l=Rect$2;break;case"sector":divideSector(s,n,a),l=Sector;break;case"circle":divideSector({r0:0,r:s.r,startAngle:0,endAngle:Math.PI*2,cx:s.cx,cy:s.cy},n,a),l=Sector;break;default:var u=t.getComputedTransform(),c=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,d=map$1(pathToPolygons(t.getUpdatedPathProxy(),c),function(ax){return polygonConvert(ax)}),Ct=d.length;if(Ct===0)binaryDivideRecursive(binaryDividePolygon,{points:d[0]},n,a);else if(Ct===n)for(var ar=0;ar<Ct;ar++)a.push({points:d[ar]});else{var en=0,tn=map$1(d,function(ax){var ox=[],sx=[];fromPoints(ax,ox,sx);var lx=(sx[1]-ox[1])*(sx[0]-ox[0]);return en+=lx,{poly:ax,area:lx}});tn.sort(function(ax,ox){return ox.area-ax.area});for(var on=n,ar=0;ar<Ct;ar++){var fn=tn[ar];if(on<=0)break;var dn=ar===Ct-1?on:Math.ceil(fn.area/en*n);dn<0||(binaryDivideRecursive(binaryDividePolygon,{points:fn.poly},dn,a),on-=dn)}}l=Polygon;break}if(!l)return clone(t,n);for(var Cn=[],ar=0;ar<a.length;ar++){var Rn=new l;Rn.setShape(a[ar]),copyPathProps(t,Rn),Cn.push(Rn)}return Cn}function alignSubpath(t,n){var a=t.length,s=n.length;if(a===s)return[t,n];for(var l=[],u=[],c=a<s?t:n,d=Math.min(a,s),Ct=Math.abs(s-a)/6,ar=(d-2)/6,en=Math.ceil(Ct/ar)+1,tn=[c[0],c[1]],on=Ct,fn=2;fn<d;){var dn=c[fn-2],Cn=c[fn-1],Rn=c[fn++],ax=c[fn++],ox=c[fn++],sx=c[fn++],lx=c[fn++],cx=c[fn++];if(on<=0){tn.push(Rn,ax,ox,sx,lx,cx);continue}for(var fx=Math.min(on,en-1)+1,gx=1;gx<=fx;gx++){var mx=gx/fx;cubicSubdivide(dn,Rn,ox,lx,mx,l),cubicSubdivide(Cn,ax,sx,cx,mx,u),dn=l[3],Cn=u[3],tn.push(l[1],u[1],l[2],u[2],dn,Cn),Rn=l[5],ax=u[5],ox=l[6],sx=u[6]}on-=fx-1}return c===t?[tn,n]:[t,tn]}function createSubpath(t,n){for(var a=t.length,s=t[a-2],l=t[a-1],u=[],c=0;c<n.length;)u[c++]=s,u[c++]=l;return u}function alignBezierCurves(t,n){for(var a,s,l,u=[],c=[],d=0;d<Math.max(t.length,n.length);d++){var Ct=t[d],ar=n[d],en=void 0,tn=void 0;Ct?ar?(a=alignSubpath(Ct,ar),en=a[0],tn=a[1],s=en,l=tn):(tn=createSubpath(l||Ct,Ct),en=Ct):(en=createSubpath(s||ar,ar),tn=ar),u.push(en),c.push(tn)}return[u,c]}function centroid(t){for(var n=0,a=0,s=0,l=t.length,u=0,c=l-2;u<l;c=u,u+=2){var d=t[c],Ct=t[c+1],ar=t[u],en=t[u+1],tn=d*en-ar*Ct;n+=tn,a+=(d+ar)*tn,s+=(Ct+en)*tn}return n===0?[t[0]||0,t[1]||0]:[a/n/3,s/n/3,n]}function findBestRingOffset(t,n,a,s){for(var l=(t.length-2)/6,u=1/0,c=0,d=t.length,Ct=d-2,ar=0;ar<l;ar++){for(var en=ar*6,tn=0,on=0;on<d;on+=2){var fn=on===0?en:(en+on-2)%Ct+2,dn=t[fn]-a[0],Cn=t[fn+1]-a[1],Rn=n[on]-s[0],ax=n[on+1]-s[1],ox=Rn-dn,sx=ax-Cn;tn+=ox*ox+sx*sx}tn<u&&(u=tn,c=ar)}return c}function reverse(t){for(var n=[],a=t.length,s=0;s<a;s+=2)n[s]=t[a-s-2],n[s+1]=t[a-s-1];return n}function findBestMorphingRotation(t,n,a,s){for(var l=[],u,c=0;c<t.length;c++){var d=t[c],Ct=n[c],ar=centroid(d),en=centroid(Ct);u==null&&(u=ar[2]<0!=en[2]<0);var tn=[],on=[],fn=0,dn=1/0,Cn=[],Rn=d.length;u&&(d=reverse(d));for(var ax=findBestRingOffset(d,Ct,ar,en)*6,ox=Rn-2,sx=0;sx<ox;sx+=2){var lx=(ax+sx)%ox+2;tn[sx+2]=d[lx]-ar[0],tn[sx+3]=d[lx+1]-ar[1]}tn[0]=d[ax]-ar[0],tn[1]=d[ax+1]-ar[1];for(var cx=s/a,fx=-s/2;fx<=s/2;fx+=cx){for(var gx=Math.sin(fx),mx=Math.cos(fx),px=0,sx=0;sx<d.length;sx+=2){var hx=tn[sx],vx=tn[sx+1],yx=Ct[sx]-en[0],Sx=Ct[sx+1]-en[1],_x=yx*mx-Sx*gx,Ex=yx*gx+Sx*mx;Cn[sx]=_x,Cn[sx+1]=Ex;var bx=_x-hx,Ax=Ex-vx;px+=bx*bx+Ax*Ax}if(px<dn){dn=px,fn=fx;for(var Mx=0;Mx<Cn.length;Mx++)on[Mx]=Cn[Mx]}}l.push({from:tn,to:on,fromCp:ar,toCp:en,rotation:-fn})}return l}function isCombineMorphing(t){return t.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(t,n,a){var s=SAVED_METHOD_PREFIX+n,l=t[s]||t[n];t[s]||(t[s]=t[n]);var u=a.replace,c=a.after,d=a.before;t[n]=function(){var Ct=arguments,ar;return d&&d.apply(this,Ct),u?ar=u.apply(this,Ct):ar=l.apply(this,Ct),c&&c.apply(this,Ct),ar}}function restoreMethod(t,n){var a=SAVED_METHOD_PREFIX+n;t[a]&&(t[n]=t[a],t[a]=null)}function applyTransformOnBeziers(t,n){for(var a=0;a<t.length;a++)for(var s=t[a],l=0;l<s.length;){var u=s[l],c=s[l+1];s[l++]=n[0]*u+n[2]*c+n[4],s[l++]=n[1]*u+n[3]*c+n[5]}}function prepareMorphPath(t,n){var a=t.getUpdatedPathProxy(),s=n.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(a),pathToBezierCurves(s)),u=l[0],c=l[1],d=t.getComputedTransform(),Ct=n.getComputedTransform();function ar(){this.transform=null}d&&applyTransformOnBeziers(u,d),Ct&&applyTransformOnBeziers(c,Ct),saveAndModifyMethod(n,"updateTransform",{replace:ar}),n.transform=null;var en=findBestMorphingRotation(u,c,10,Math.PI),tn=[];saveAndModifyMethod(n,"buildPath",{replace:function(on){for(var fn=n.__morphT,dn=1-fn,Cn=[],Rn=0;Rn<en.length;Rn++){var ax=en[Rn],ox=ax.from,sx=ax.to,lx=ax.rotation*fn,cx=ax.fromCp,fx=ax.toCp,gx=Math.sin(lx),mx=Math.cos(lx);lerp$1(Cn,cx,fx,fn);for(var px=0;px<ox.length;px+=2){var hx=ox[px],vx=ox[px+1],yx=sx[px],Sx=sx[px+1],_x=hx*dn+yx*fn,Ex=vx*dn+Sx*fn;tn[px]=_x*mx-Ex*gx+Cn[0],tn[px+1]=_x*gx+Ex*mx+Cn[1]}var bx=tn[0],Ax=tn[1];on.moveTo(bx,Ax);for(var px=2;px<ox.length;){var yx=tn[px++],Sx=tn[px++],Mx=tn[px++],Rx=tn[px++],Cx=tn[px++],Lx=tn[px++];bx===yx&&Ax===Sx&&Mx===Cx&&Rx===Lx?on.lineTo(Cx,Lx):on.bezierCurveTo(yx,Sx,Mx,Rx,Cx,Lx),bx=Cx,Ax=Lx}}}})}function morphPath(t,n,a){if(!t||!n)return n;var s=a.done,l=a.during;prepareMorphPath(t,n),n.__morphT=0;function u(){restoreMethod(n,"buildPath"),restoreMethod(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()}return n.animateTo({__morphT:1},defaults({during:function(c){n.dirtyShape(),l&&l(c)},done:function(){u(),s&&s()}},a)),n}function hilbert(t,n,a,s,l,u){var c=16;t=l===a?0:Math.round(32767*(t-a)/(l-a)),n=u===s?0:Math.round(32767*(n-s)/(u-s));for(var d=0,Ct,ar=(1<<c)/2;ar>0;ar/=2){var en=0,tn=0;(t&ar)>0&&(en=1),(n&ar)>0&&(tn=1),d+=ar*ar*(3*en^tn),tn===0&&(en===1&&(t=ar-1-t,n=ar-1-n),Ct=t,t=n,n=Ct)}return d}function sortPaths(t){var n=1/0,a=1/0,s=-1/0,l=-1/0,u=map$1(t,function(d){var Ct=d.getBoundingRect(),ar=d.getComputedTransform(),en=Ct.x+Ct.width/2+(ar?ar[4]:0),tn=Ct.y+Ct.height/2+(ar?ar[5]:0);return n=Math.min(en,n),a=Math.min(tn,a),s=Math.max(en,s),l=Math.max(tn,l),[en,tn]}),c=map$1(u,function(d,Ct){return{cp:d,z:hilbert(d[0],d[1],n,a,s,l),path:t[Ct]}});return c.sort(function(d,Ct){return d.z-Ct.z}).map(function(d){return d.path})}function defaultDividePath(t){return split(t.path,t.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(t,n,a){var s=[];function l(cx){for(var fx=0;fx<cx.length;fx++){var gx=cx[fx];isCombineMorphing(gx)?l(gx.childrenRef()):gx instanceof Path&&s.push(gx)}}l(t);var u=s.length;if(!u)return createEmptyReturn();var c=a.dividePath||defaultDividePath,d=c({path:n,count:u});if(d.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();s=sortPaths(s),d=sortPaths(d);for(var Ct=a.done,ar=a.during,en=a.individualDelay,tn=new Transformable,on=0;on<u;on++){var fn=s[on],dn=d[on];dn.parent=n,dn.copyTransform(tn),en||prepareMorphPath(fn,dn)}n.__isCombineMorphing=!0,n.childrenRef=function(){return d};function Cn(cx){for(var fx=0;fx<d.length;fx++)d[fx].addSelfToZr(cx)}saveAndModifyMethod(n,"addSelfToZr",{after:function(cx){Cn(cx)}}),saveAndModifyMethod(n,"removeSelfFromZr",{after:function(cx){for(var fx=0;fx<d.length;fx++)d[fx].removeSelfFromZr(cx)}});function Rn(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,restoreMethod(n,"addSelfToZr"),restoreMethod(n,"removeSelfFromZr")}var ax=d.length;if(en)for(var ox=ax,sx=function(){ox--,ox===0&&(Rn(),Ct&&Ct())},on=0;on<ax;on++){var lx=en?defaults({delay:(a.delay||0)+en(on,ax,s[on],d[on]),done:sx},a):a;morphPath(s[on],d[on],lx)}else n.__morphT=0,n.animateTo({__morphT:1},defaults({during:function(cx){for(var fx=0;fx<ax;fx++){var gx=d[fx];gx.__morphT=n.__morphT,gx.dirtyShape()}ar&&ar(cx)},done:function(){Rn();for(var cx=0;cx<t.length;cx++)restoreMethod(t[cx],"updateTransform");Ct&&Ct()}},a));return n.__zr&&Cn(n.__zr),{fromIndividuals:s,toIndividuals:d,count:ax}}function separateMorph(t,n,a){var s=n.length,l=[],u=a.dividePath||defaultDividePath;function c(fn){for(var dn=0;dn<fn.length;dn++){var Cn=fn[dn];isCombineMorphing(Cn)?c(Cn.childrenRef()):Cn instanceof Path&&l.push(Cn)}}if(isCombineMorphing(t)){c(t.childrenRef());var d=l.length;if(d<s)for(var Ct=0,ar=d;ar<s;ar++)l.push(clonePath(l[Ct++%d]));l.length=s}else{l=u({path:t,count:s});for(var en=t.getComputedTransform(),ar=0;ar<l.length;ar++)l[ar].setLocalTransform(en);if(l.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),n=sortPaths(n);for(var tn=a.individualDelay,ar=0;ar<s;ar++){var on=tn?defaults({delay:(a.delay||0)+tn(ar,s,l[ar],n[ar])},a):a;morphPath(l[ar],n[ar],on)}return{fromIndividuals:l,toIndividuals:n,count:n.length}}function isMultiple(t){return isArray$1(t[0])}function prepareMorphBatches(t,n){for(var a=[],s=t.length,l=0;l<s;l++)a.push({one:t[l],many:[]});for(var l=0;l<n.length;l++){var u=n[l].length,c=void 0;for(c=0;c<u;c++)a[c%s].many.push(n[l][c])}for(var d=0,l=s-1;l>=0;l--)if(!a[l].many.length){var Ct=a[d].many;if(Ct.length<=1)if(d)d=0;else return a;var u=Ct.length,ar=Math.ceil(u/2);a[l].many=Ct.slice(ar,u),a[d].many=Ct.slice(0,ar),d++}return a}var pathDividers={clone:function(t){for(var n=[],a=1-Math.pow(1-t.path.style.opacity,1/t.count),s=0;s<t.count;s++){var l=clonePath(t.path);l.setStyle("opacity",a),n.push(l)}return n},split:null};function applyMorphAnimation(t,n,a,s,l,u){if(!t.length||!n.length)return;var c=getAnimationConfig("update",s,l);if(!(c&&c.duration>0))return;var d=s.getModel("universalTransition").get("delay"),Ct=Object.assign({setToFinal:!0},c),ar,en;isMultiple(t)&&(ar=t,en=n),isMultiple(n)&&(ar=n,en=t);function tn(ax,ox,sx,lx,cx){var fx=ax.many,gx=ax.one;if(fx.length===1&&!cx){var mx=ox?fx[0]:gx,px=ox?gx:fx[0];if(isCombineMorphing(mx))tn({many:[mx],one:px},!0,sx,lx,!0);else{var hx=d?defaults({delay:d(sx,lx)},Ct):Ct;morphPath(mx,px,hx),u(mx,px,mx,px,hx)}}else for(var vx=defaults({dividePath:pathDividers[a],individualDelay:d&&function(Ax,Mx,Rx,Cx){return d(Ax+sx,lx)}},Ct),yx=ox?combineMorph(fx,gx,vx):separateMorph(gx,fx,vx),Sx=yx.fromIndividuals,_x=yx.toIndividuals,Ex=Sx.length,bx=0;bx<Ex;bx++){var hx=d?defaults({delay:d(bx,Ex)},Ct):Ct;u(Sx[bx],_x[bx],ox?fx[bx]:ax.one,ox?ax.one:fx[bx],hx)}}for(var on=ar?ar===t:t.length>n.length,fn=ar?prepareMorphBatches(en,ar):prepareMorphBatches(on?n:t,[on?t:n]),dn=0,Cn=0;Cn<fn.length;Cn++)dn+=fn[Cn].many.length;for(var Rn=0,Cn=0;Cn<fn.length;Cn++)tn(fn[Cn],on,Rn,dn),Rn+=fn[Cn].many.length}function getPathList(t){if(!t)return[];if(isArray$1(t)){for(var n=[],a=0;a<t.length;a++)n.push(getPathList(t[a]));return n}var s=[];return t.traverse(function(l){l instanceof Path&&!l.disableMorphing&&!l.invisible&&!l.ignore&&s.push(l)}),s}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(t,n){for(var a=t.dimensions,s=0;s<a.length;s++){var l=t.getDimensionInfo(a[s]);if(l&&l.otherDims[n]===0)return a[s]}}function getValueByDimension(t,n,a){var s=t.getDimensionInfo(a),l=s&&s.ordinalMeta;if(s){var u=t.get(s.name,n);return l&&l.categories[u]||u+""}}function getGroupId(t,n,a,s){var l=s?"itemChildGroupId":"itemGroupId",u=getDimension(t,l);if(u){var c=getValueByDimension(t,n,u);return c}var d=t.getRawDataItem(n),Ct=s?"childGroupId":"groupId";if(d&&d[Ct])return d[Ct]+"";if(!s)return a||t.getId(n)}function flattenDataDiffItems(t){var n=[];return each$f(t,function(a){var s=a.data,l=a.dataGroupId;if(!(s.count()>DATA_COUNT_THRESHOLD))for(var u=s.getIndices(),c=0;c<u.length;c++)n.push({data:s,groupId:getGroupId(s,c,l,!1),childGroupId:getGroupId(s,c,l,!0),divide:a.divide,dataIndex:c})}),n}function fadeInElement(t,n,a){t.traverse(function(s){s instanceof Path&&initProps(s,{style:{opacity:0}},n,{dataIndex:a,isFrom:!0})})}function removeEl(t){if(t.parent){var n=t.getComputedTransform();t.setLocalTransform(n),t.parent.remove(t)}}function stopAnimation(t){t.stopAnimation(),t.isGroup&&t.traverse(function(n){n.stopAnimation()})}function animateElementStyles(t,n,a){var s=getAnimationConfig("update",a,n);s&&t.traverse(function(l){if(l instanceof Displayable){var u=getOldStyle(l);u&&l.animateFrom({style:u},s)}})}function isAllIdSame(t,n){var a=t.length;if(a!==n.length)return!1;for(var s=0;s<a;s++){var l=t[s],u=n[s];if(l.data.getId(l.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(t,n,a){var s=flattenDataDiffItems(t),l=flattenDataDiffItems(n);function u(sx,lx,cx,fx,gx){(cx||sx)&&lx.animateFrom({style:cx&&cx!==sx?extend(extend({},cx.style),sx.style):sx.style},gx)}var c=!1,d=TRANSITION_NONE,Ct=createHashMap(),ar=createHashMap();s.forEach(function(sx){sx.groupId&&Ct.set(sx.groupId,!0),sx.childGroupId&&ar.set(sx.childGroupId,!0)});for(var en=0;en<l.length;en++){var tn=l[en].groupId;if(ar.get(tn)){d=TRANSITION_P2C;break}var on=l[en].childGroupId;if(on&&Ct.get(on)){d=TRANSITION_C2P;break}}function fn(sx,lx){return function(cx){var fx=cx.data,gx=cx.dataIndex;return lx?fx.getId(gx):sx?d===TRANSITION_P2C?cx.childGroupId:cx.groupId:d===TRANSITION_C2P?cx.childGroupId:cx.groupId}}var dn=isAllIdSame(s,l),Cn={};if(!dn)for(var en=0;en<l.length;en++){var Rn=l[en],ax=Rn.data.getItemGraphicEl(Rn.dataIndex);ax&&(Cn[ax.id]=!0)}function ox(sx,lx){var cx=s[lx],fx=l[sx],gx=fx.data.hostModel,mx=cx.data.getItemGraphicEl(cx.dataIndex),px=fx.data.getItemGraphicEl(fx.dataIndex);if(mx===px){px&&animateElementStyles(px,fx.dataIndex,gx);return}mx&&Cn[mx.id]||px&&(stopAnimation(px),mx?(stopAnimation(mx),removeEl(mx),c=!0,applyMorphAnimation(getPathList(mx),getPathList(px),fx.divide,gx,sx,u)):fadeInElement(px,gx,sx))}new DataDiffer(s,l,fn(!0,dn),fn(!1,dn),null,"multiple").update(ox).updateManyToOne(function(sx,lx){var cx=l[sx],fx=cx.data,gx=fx.hostModel,mx=fx.getItemGraphicEl(cx.dataIndex),px=filter(map$1(lx,function(hx){return s[hx].data.getItemGraphicEl(s[hx].dataIndex)}),function(hx){return hx&&hx!==mx&&!Cn[hx.id]});mx&&(stopAnimation(mx),px.length?(each$f(px,function(hx){stopAnimation(hx),removeEl(hx)}),c=!0,applyMorphAnimation(getPathList(px),getPathList(mx),cx.divide,gx,sx,u)):fadeInElement(mx,gx,cx.dataIndex))}).updateOneToMany(function(sx,lx){var cx=s[lx],fx=cx.data.getItemGraphicEl(cx.dataIndex);if(!(fx&&Cn[fx.id])){var gx=filter(map$1(sx,function(px){return l[px].data.getItemGraphicEl(l[px].dataIndex)}),function(px){return px&&px!==fx}),mx=l[sx[0]].data.hostModel;gx.length&&(each$f(gx,function(px){return stopAnimation(px)}),fx?(stopAnimation(fx),removeEl(fx),c=!0,applyMorphAnimation(getPathList(fx),getPathList(gx),cx.divide,mx,sx[0],u)):each$f(gx,function(px){return fadeInElement(px,mx,sx[0])}))}}).updateManyToMany(function(sx,lx){new DataDiffer(lx,sx,function(cx){return s[cx].data.getId(s[cx].dataIndex)},function(cx){return l[cx].data.getId(l[cx].dataIndex)}).update(function(cx,fx){ox(sx[cx],lx[fx])}).execute()}).execute(),c&&each$f(n,function(sx){var lx=sx.data,cx=lx.hostModel,fx=cx&&a.getViewOfSeriesModel(cx),gx=getAnimationConfig("update",cx,0);fx&&cx.isAnimationEnabled()&&gx&&gx.duration>0&&fx.group.traverse(function(mx){mx instanceof Path&&!mx.animators.length&&mx.animateFrom({style:{opacity:0}},gx)})})}function getSeriesTransitionKey(t){var n=t.getModel("universalTransition").get("seriesKey");return n||t.id}function convertArraySeriesKeyToString(t){return isArray$1(t)?t.sort().join(","):t}function getDivideShapeFromData(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(t,n){var a=createHashMap(),s=createHashMap(),l=createHashMap();return each$f(t.oldSeries,function(u,c){var d=t.oldDataGroupIds[c],Ct=t.oldData[c],ar=getSeriesTransitionKey(u),en=convertArraySeriesKeyToString(ar);s.set(en,{dataGroupId:d,data:Ct}),isArray$1(ar)&&each$f(ar,function(tn){l.set(tn,{key:en,dataGroupId:d,data:Ct})})}),each$f(n.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var c=u.get("dataGroupId"),d=u.getData(),Ct=getSeriesTransitionKey(u),ar=convertArraySeriesKeyToString(Ct),en=s.get(ar);if(en)a.set(ar,{oldSeries:[{dataGroupId:en.dataGroupId,divide:getDivideShapeFromData(en.data),data:en.data}],newSeries:[{dataGroupId:c,divide:getDivideShapeFromData(d),data:d}]});else if(isArray$1(Ct)){var tn=[];each$f(Ct,function(dn){var Cn=s.get(dn);Cn.data&&tn.push({dataGroupId:Cn.dataGroupId,divide:getDivideShapeFromData(Cn.data),data:Cn.data})}),tn.length&&a.set(ar,{oldSeries:tn,newSeries:[{dataGroupId:c,data:d,divide:getDivideShapeFromData(d)}]})}else{var on=l.get(Ct);if(on){var fn=a.get(on.key);fn||(fn={oldSeries:[{dataGroupId:on.dataGroupId,data:on.data,divide:getDivideShapeFromData(on.data)}],newSeries:[]},a.set(on.key,fn)),fn.newSeries.push({dataGroupId:c,data:d,divide:getDivideShapeFromData(d)})}}}}),a}function querySeries(t,n){for(var a=0;a<t.length;a++){var s=n.seriesIndex!=null&&n.seriesIndex===t[a].seriesIndex||n.seriesId!=null&&n.seriesId===t[a].id;if(s)return a}}function transitionSeriesFromOpt(t,n,a,s){var l=[],u=[];each$f(normalizeToArray(t.from),function(c){var d=querySeries(n.oldSeries,c);d>=0&&l.push({dataGroupId:n.oldDataGroupIds[d],data:n.oldData[d],divide:getDivideShapeFromData(n.oldData[d]),groupIdDim:c.dimension})}),each$f(normalizeToArray(t.to),function(c){var d=querySeries(a.updatedSeries,c);if(d>=0){var Ct=a.updatedSeries[d].getData();u.push({dataGroupId:n.oldDataGroupIds[d],data:Ct,divide:getDivideShapeFromData(Ct),groupIdDim:c.dimension})}}),l.length>0&&u.length>0&&transitionBetween(l,u,s)}function installUniversalTransition(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,s){each$f(normalizeToArray(s.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(u){for(var c=s.updatedSeries,d=0;d<c.length;d++)(u.seriesIndex!=null&&u.seriesIndex===c[d].seriesIndex||u.seriesId!=null&&u.seriesId===c[d].id)&&(c[d][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(n,a,s){var l=getUniversalTransitionGlobalStore(a);if(l.oldSeries&&s.updatedSeries&&s.optionChanged){var u=s.seriesTransition;if(u)each$f(normalizeToArray(u),function(fn){transitionSeriesFromOpt(fn,l,s,a)});else{var c=findTransitionSeriesBatches(l,s);each$f(c.keys(),function(fn){var dn=c.get(fn);transitionBetween(dn.oldSeries,dn.newSeries,a)})}each$f(s.updatedSeries,function(fn){fn[SERIES_UNIVERSAL_TRANSITION_PROP]&&(fn[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var d=n.getSeries(),Ct=l.oldSeries=[],ar=l.oldDataGroupIds=[],en=l.oldData=[],tn=0;tn<d.length;tn++){var on=d[tn].getData();on.count()<DATA_COUNT_THRESHOLD&&(Ct.push(d[tn]),ar.push(d[tn].get("dataGroupId")),en.push(on))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={},hasRequiredId;function requireId(){return hasRequiredId||(hasRequiredId=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1,a=function(){return"".concat(n++)};t.default=a})(id)),id}var sensors={},object={},debounce={},hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,u=null;return function(){for(var c=this,d=arguments.length,Ct=new Array(d),ar=0;ar<d;ar++)Ct[ar]=arguments[ar];clearTimeout(u),u=setTimeout(function(){s.apply(c,Ct)},l)}};t.default=n})(debounce)),debounce}var constant={},hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant;hasRequiredConstant=1,Object.defineProperty(constant,"__esModule",{value:!0}),constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var t="size-sensor-id";constant.SizeSensorId=t;var n="size-sensor-object";constant.SensorClassName=n;var a="-1";return constant.SensorTabIndex=a,constant}var hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,Object.defineProperty(object,"__esModule",{value:!0}),object.createSensor=void 0;var t=a(requireDebounce()),n=requireConstant();function a(l){return l&&l.__esModule?l:{default:l}}var s=function(u,c){var d=void 0,Ct=[],ar=function(){getComputedStyle(u).position==="static"&&(u.style.position="relative");var Cn=document.createElement("object");return Cn.onload=function(){Cn.contentDocument.defaultView.addEventListener("resize",en),en()},Cn.style.display="block",Cn.style.position="absolute",Cn.style.top="0",Cn.style.left="0",Cn.style.height="100%",Cn.style.width="100%",Cn.style.overflow="hidden",Cn.style.pointerEvents="none",Cn.style.zIndex="-1",Cn.style.opacity="0",Cn.setAttribute("class",n.SensorClassName),Cn.setAttribute("tabindex",n.SensorTabIndex),Cn.type="text/html",u.appendChild(Cn),Cn.data="about:blank",Cn},en=(0,t.default)(function(){Ct.forEach(function(dn){dn(u)})}),tn=function(Cn){d||(d=ar()),Ct.indexOf(Cn)===-1&&Ct.push(Cn)},on=function(){d&&d.parentNode&&(d.contentDocument&&d.contentDocument.defaultView.removeEventListener("resize",en),d.parentNode.removeChild(d),u.removeAttribute(n.SizeSensorId),d=void 0,Ct=[],c&&c())},fn=function(Cn){var Rn=Ct.indexOf(Cn);Rn!==-1&&Ct.splice(Rn,1),Ct.length===0&&d&&on()};return{element:u,bind:tn,destroy:on,unbind:fn}};return object.createSensor=s,object}var resizeObserver={},hasRequiredResizeObserver;function requireResizeObserver(){if(hasRequiredResizeObserver)return resizeObserver;hasRequiredResizeObserver=1,Object.defineProperty(resizeObserver,"__esModule",{value:!0}),resizeObserver.createSensor=void 0;var t=requireConstant(),n=a(requireDebounce());function a(l){return l&&l.__esModule?l:{default:l}}var s=function(u,c){var d=void 0,Ct=[],ar=(0,n.default)(function(){Ct.forEach(function(dn){dn(u)})}),en=function(){var Cn=new ResizeObserver(ar);return Cn.observe(u),ar(),Cn},tn=function(Cn){d||(d=en()),Ct.indexOf(Cn)===-1&&Ct.push(Cn)},on=function(){d.disconnect(),Ct=[],d=void 0,u.removeAttribute(t.SizeSensorId),c&&c()},fn=function(Cn){var Rn=Ct.indexOf(Cn);Rn!==-1&&Ct.splice(Rn,1),Ct.length===0&&d&&on()};return{element:u,bind:tn,destroy:on,unbind:fn}};return resizeObserver.createSensor=s,resizeObserver}var hasRequiredSensors;function requireSensors(){if(hasRequiredSensors)return sensors;hasRequiredSensors=1,Object.defineProperty(sensors,"__esModule",{value:!0}),sensors.createSensor=void 0;var t=requireObject(),n=requireResizeObserver(),a=typeof ResizeObserver<"u"?n.createSensor:t.createSensor;return sensors.createSensor=a,sensors}var hasRequiredSensorPool;function requireSensorPool(){if(hasRequiredSensorPool)return sensorPool;hasRequiredSensorPool=1,Object.defineProperty(sensorPool,"__esModule",{value:!0}),sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var t=s(requireId()),n=requireSensors(),a=requireConstant();function s(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}}var l={};sensorPool.Sensors=l;function u(Ct){Ct&&l[Ct]&&delete l[Ct]}var c=function(ar){var en=ar.getAttribute(a.SizeSensorId);if(en&&l[en])return l[en];var tn=(0,t.default)();ar.setAttribute(a.SizeSensorId,tn);var on=(0,n.createSensor)(ar,function(){return u(tn)});return l[tn]=on,on};sensorPool.getSensor=c;var d=function(ar){var en=ar.element.getAttribute(a.SizeSensorId);ar.destroy(),u(en)};return sensorPool.removeSensor=d,sensorPool}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ver=lib.clear=lib.bind=void 0;var t=requireSensorPool(),n=function(u,c){var d=(0,t.getSensor)(u);return d.bind(c),function(){d.unbind(c)}};lib.bind=n;var a=function(u){var c=(0,t.getSensor)(u);(0,t.removeSensor)(c)};lib.clear=a;var s="1.0.2";return lib.ver=s,lib}var libExports=requireLib();function pick(t,n){var a={};return n.forEach(function(s){a[s]=t[s]}),a}function isFunction(t){return typeof t=="function"}function isString(t){return typeof t=="string"}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,l,u;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(l=s;l--!==0;)if(!t(n[l],a[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(u=Object.keys(n),s=u.length,s!==Object.keys(a).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;for(l=s;l--!==0;){var c=u[l];if(!t(n[c],a[c]))return!1}return!0}return n!==n&&a!==a}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const isEqual=getDefaultExportFromCjs(fastDeepEqualExports);var EChartsReactCore=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.echarts=a.echarts,s.ele=null,s.isInitialResize=!0,s}return n.prototype.componentDidMount=function(){this.renderNewEcharts()},n.prototype.componentDidUpdate=function(a){var s=this.props.shouldSetOption;if(!(isFunction(s)&&!s(a,this.props))){if(!isEqual(a.theme,this.props.theme)||!isEqual(a.opts,this.props.opts)||!isEqual(a.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var l=["option","notMerge","lazyUpdate","showLoading","loadingOption"];isEqual(pick(this.props,l),pick(a,l))||this.updateEChartsOption(),(!isEqual(a.style,this.props.style)||!isEqual(a.className,this.props.className))&&this.resize()}},n.prototype.componentWillUnmount=function(){this.dispose()},n.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},n.prototype.dispose=function(){if(this.ele){try{libExports.clear(this.ele)}catch(a){console.warn(a)}this.echarts.dispose(this.ele)}},n.prototype.renderNewEcharts=function(){var a=this,s=this.props,l=s.onEvents,u=s.onChartReady,c=this.updateEChartsOption();this.bindEvents(c,l||{}),isFunction(u)&&u(c),this.ele&&libExports.bind(this.ele,function(){a.resize()})},n.prototype.bindEvents=function(a,s){function l(c,d){isString(c)&&isFunction(d)&&a.on(c,function(Ct){d(Ct,a)})}for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&l(u,s[u])},n.prototype.updateEChartsOption=function(){var a=this.props,s=a.option,l=a.notMerge,u=l===void 0?!1:l,c=a.lazyUpdate,d=c===void 0?!1:c,Ct=a.showLoading,ar=a.loadingOption,en=ar===void 0?null:ar,tn=this.getEchartsInstance();return tn.setOption(s,u,d),Ct?tn.showLoading(en):tn.hideLoading(),tn},n.prototype.resize=function(){var a=this.getEchartsInstance();if(!this.isInitialResize)try{a.resize()}catch(s){console.warn(s)}this.isInitialResize=!1},n.prototype.render=function(){var a=this,s=this.props,l=s.style,u=s.className,c=u===void 0?"":u,d=__assign({height:300},l);return React.createElement("div",{ref:function(Ct){a.ele=Ct},style:d,className:"echarts-for-react "+c})},n})(reactExports.PureComponent),EChartsReact=(function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.echarts=echarts,s}return n})(EChartsReactCore);const MyEChartsPlot=({freq_new:t,mag_new:n})=>{if(t.length===0||n.length===0)return jsxRuntimeExports.jsx("b",{children:"No data available for plot"});const a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#aaa"}},formatter:function(s){const l=s[0],u=l.value[0],c=l.value[1];let d="";return u>=1e9?d=(u/1e9).toFixed(3)+" GHz":u>=1e6?d=(u/1e6).toFixed(3)+" MHz":u>=1e3?d=(u/1e3).toFixed(3)+" kHz":d=u.toFixed(2)+" Hz",`
      <strong>Frequency:</strong> ${d}<br/>
      <strong>Amplitude:</strong> ${c.toPrecision(6)} dB
    `}},xAxis:{min:t[0],max:t[t.length-1],type:"log",name:"freq (Hz)",minorSplitLine:{show:!0},axisLabel:{formatter:function(s){return s>=1e9?(s/1e9).toFixed(2)+"G":s>=1e6?(s/1e6).toFixed(2)+"M":s>=1e3?(s/1e3).toFixed(2)+"k":s.toFixed(2)}}},yAxis:{type:"value",name:"amplitude (dB)"},series:[{data:t.map((s,l)=>[s,n[l]]),type:"line",smooth:!1,lineStyle:{width:2}}]};return jsxRuntimeExports.jsx(EChartsReact,{option:a,style:{width:"100%",height:"400px"}})},Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiContainer"})}),initialSchematic={settings:{defaultZoom:.75,gridSize:32,width:2432,height:1792,maxZoom:2},shapes:[{image:"origin.svg",x:0,y:0,fixed:!0,offset:[-32,-32]},{image:"gnd.svg",connectors:[[0,0]],x:192,y:128,offset:[-100,-180]},{image:"vin.svg",connectors:[[0,0]],x:-192,y:0,offset:[-64,0]},{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:-96,y:-64,label:{text:"L0",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:64,y:-64,label:{text:"R0",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:192,y:32,label:{text:"C0",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},{image:"vprobe.svg",connectors:[[0,0]],x:0,y:-160,offset:[-10,-90],label:{text:"X0",class:"circuit_label",x:0,y:-30}}],wires:[{start:{connectorID:0,shapeID:1},end:{shapeID:5,connectorID:1},points:[]},{start:{connectorID:0,shapeID:5},end:{shapeID:4,connectorID:1},points:[[192,-64]]},{start:{connectorID:0,shapeID:4},end:{shapeID:3,connectorID:1},points:[]},{start:{connectorID:0,shapeID:3},end:{shapeID:2,connectorID:0},points:[[-192,-64]]},{start:{connectorID:0,shapeID:6},end:{shapeID:3,connectorID:1},points:[[0,-64]]}]},initialComponents={L0:{type:"inductor",value:1,unit:"uH"},R0:{type:"resistor",value:10,unit:"K"},C0:{type:"capacitor",value:10,unit:"fF"}},initialSettings={fmin:1,fminUnit:"MHz",fmax:100,fmaxUnit:"GHz",resolution:100};var urlContainsState=!1;function stateFromURL(){const t=new URL(window.location.href),n=t.searchParams.get("components"),a=t.searchParams.get("settings"),s=t.searchParams.get("schematic");var l=initialComponents,u=initialSettings,c=initialSchematic;if(n&&(urlContainsState=!0,l=n.split("__").reduce((d,Ct)=>{const[ar,en,tn,on]=Ct.split("_");return d[ar]={type:en,value:parseFloat(tn),unit:on},d},{})),a&&(urlContainsState=!0,u=a.split("__").reduce((d,Ct)=>{const[ar,en]=Ct.split("_");return d[ar]=isNaN(en)?en:parseFloat(en),d},{})),s){urlContainsState=!0;const d=Uint8Array.from(atob(decodeURIComponent(s)),ar=>ar.charCodeAt(0)),Ct=pako.inflate(d,{to:"string"});c=JSON.parse(Ct)}return[l,u,c]}const[modifiedComponents,modifiedSettings,modifiedSchematic]=stateFromURL();function new_calculate_tf(textResult,fRange,numSteps,components,setErrorSnackbar){if(textResult=="")return{freq_new:[],mag_new:[]};var complex_freq=textResult,rep;for(const t in components)rep=RegExp(t,"g"),complex_freq=complex_freq.replace(rep,components[t]);const re=/s/gi,reDollar=/\$/gi,re2=/\^/gi;var res=complex_freq.replace(re2,"**");const re3=/sqrt/gi;res=res.replace(re3,"$");const re4=/abs/gi;res=res.replace(re4,"");const re5=/I/gi;res=res.replace(re5,"1");var fstepdB_20=Math.log10(fRange.fmax/fRange.fmin)/numSteps,fstep=10**fstepdB_20,absNew,evalNew;const freq=[],mag=[];try{for(var f=fRange.fmin;f<fRange.fmax;f=f*fstep){freq.push(f);const mathString=res.replace(re,2*Math.PI*f).replace(reDollar,"Math.sqrt");evalNew=eval(mathString),absNew=Math.abs(evalNew),mag.push(20*Math.log10(absNew))}}catch(t){setErrorSnackbar(n=>n||!0),console.log("oh no",t)}return{freq_new:freq,mag_new:mag}}function compToURL(t,n){return`${t}_${n.type}_${n.value}_${n.unit}`}function App(){const[t,n]=reactExports.useState([]),[a,s]=reactExports.useState({}),[l,u]=reactExports.useState({text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:""}),[c,d]=reactExports.useState(modifiedComponents),[Ct,ar]=reactExports.useState(modifiedSettings),[en,tn]=reactExports.useState({pointer:0,state:[modifiedSchematic]}),[on,fn]=reactExports.useState(!1),[dn,Cn]=reactExports.useState(!1),[Rn,ax]=reactExports.useState(!1),ox=()=>{window.location.href=window.location.origin+window.location.pathname};reactExports.useEffect(()=>{const Sx=setTimeout(()=>{urlContainsState&&fn(!0)},1e3);return()=>clearTimeout(Sx)},[]);function sx(){return jsxRuntimeExports.jsx(Snackbar,{open:on,autoHideDuration:1e4,onClose:()=>fn(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Some settings were loaded from the URL. Please click here to reset to the default state.",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200},onClick:ox})})}function lx(){return jsxRuntimeExports.jsx(Snackbar,{open:dn,autoHideDuration:1e4,onClose:()=>Cn(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"An error has occurred. Please try using Sympy. If the issue persists please leave a comment",sx:{backgroundColor:"#ec1186ff",color:"#fff",maxWidth:200}})})}function cx(){return jsxRuntimeExports.jsx(Snackbar,{open:Rn,autoHideDuration:1e4,onClose:()=>ax(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"The circuit seems to be unsolvable. Please double check your connections and try using Sympy if not already. Check the console for more details, and feel free to leave a comment.",sx:{backgroundColor:"#ec1186ff",color:"#fff",maxWidth:200}})})}const fx={};for(const Sx in c)fx[Sx]=c[Sx].value*units[c[Sx].type][c[Sx].unit];const[gx,mx]=reactExports.useState(null),[px,hx]=reactExports.useState(null);reactExports.useEffect(()=>{const Sx={fmin:Ct.fmin*units.frequency[Ct.fminUnit],fmax:Ct.fmax*units.frequency[Ct.fmaxUnit]},_x={};for(const Ax in c)_x[Ax]=c[Ax].value*units[c[Ax].type][c[Ax].unit];const{freq_new:Ex,mag_new:bx}=new_calculate_tf(l.complexResponse,Sx,Ct.resolution,_x,Cn);mx(Ex),hx(bx)},[l,Ct,c]);function vx(){const Sx=new URL(window.location.href);Sx.searchParams.set("components",Object.keys(c).map(Ax=>compToURL(Ax,c[Ax])).join("__")),Sx.searchParams.set("settings",Object.keys(Ct).map(Ax=>`${Ax}_${Ct[Ax]}`).join("__"));const _x=JSON.stringify(en.state[en.pointer]),Ex=pako.deflate(_x,{to:"string"}),bx=encodeURIComponent(btoa(String.fromCharCode(...Ex)));return Sx.searchParams.set("schematic",bx),window.history.pushState({},"",Sx.toString()),Sx.toString()}async function yx(){const[Sx,_x]=await calcBilinear(l.solver);u({...l,bilinearRaw:Sx,bilinearMathML:`<math>${_x}</math>`})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(sx,{}),jsxRuntimeExports.jsx(lx,{}),jsxRuntimeExports.jsx(cx,{}),jsxRuntimeExports.jsx(NavBar,{stateToURL:vx}),jsxRuntimeExports.jsx("div",{className:"w-100 p-2 bg-green pb-5",children:jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{px:{xs:0,sm:2}},children:[jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col",children:jsxRuntimeExports.jsx("p",{className:"my-0",children:"This free online circuit solver tool can calculate the transfer function of circuits built from resistors, capacitors, inductors and op-amps. The user can quickly explore different topologies and find their Laplace transform"})})}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-0",id:"schematic",children:[jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(VisioJSSchematic,{setResults:u,setNodes:n,history:en,setHistory:tn,setComponentValues:d,setFullyConnectedComponents:s})}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(ComponentAdjuster,{componentValues:c,setComponentValues:d})})]}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-3",id:"schematic",children:[jsxRuntimeExports.jsx(ChoseTF,{setResults:u,nodes:t,fullyConnectedComponents:a,componentValuesSolved:fx,setUnsolveSnackbar:ax}),l.text!=""&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace Transform",textResult:l.text,mathML:l.mathML,caclDone:l.text!=""}),l.numericText!=null&&jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace Transform (numeric)",textResult:l.numericText,mathML:l.numericML,caclDone:l.text!=""}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(MyEChartsPlot,{freq_new:gx,mag_new:px})}),jsxRuntimeExports.jsx(FreqAdjusters,{settings:Ct,setSettings:ar}),l.bilinearMathML==""?jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:1,children:jsxRuntimeExports.jsx(Button,{variant:"contained",color:"info",sx:{m:3},onClick:async()=>{yx()},children:"Calculate bilinear transform"})}):jsxRuntimeExports.jsx(DisplayMathML,{title:"Bilinear Transform",textResult:l.bilinearRaw,mathML:l.bilinearMathML,caclDone:l.text!=""})]})]}),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1",children:jsxRuntimeExports.jsx(ReleaseNotes,{})},"releaseNotes"),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1 shadow-sm rounded bg-lightgreen",children:jsxRuntimeExports.jsx($,{"website-id":"12350","page-id":"7"})},"comments")]})},"wrapper"),jsxRuntimeExports.jsx(Footer,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}))});export default W$();
